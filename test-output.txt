
> project-01-bookmemo@0.0.0 test:unit
> jest

FAIL src/components/search/FullTextSearch.test.jsx (8.31 s)
  ● FullTextSearch › 書籍クリック時は書籍詳細ページに遷移する

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "/book/book1"
    Received: "/book/book1", {"state": {"returnPath": "/", "searchState": {"results": [{"bookId": "book1", "id": "book1", "title": "テスト書籍", "type": "book"}]}}}

    Number of calls: 1

    [0m [90m 361 |[39m     
     [90m 362 |[39m     [90m// 書籍詳細ページに遷移[39m
    [31m[1m>[22m[39m[90m 363 |[39m     expect(mockNavigate)[33m.[39mtoHaveBeenCalledWith([32m'/book/book1'[39m)[33m;[39m
     [90m     |[39m                          [31m[1m^[22m[39m
     [90m 364 |[39m   })[33m;[39m
     [90m 365 |[39m
     [90m 366 |[39m   test([32m'メモクリック時はメモ詳細ダイアログが開く'[39m[33m,[39m () [33m=>[39m {[0m

      at Object.toHaveBeenCalledWith (src/components/search/FullTextSearch.test.jsx:363:26)

PASS src/components/MemoCard.test.jsx (9.175 s)
  ● Console

    console.error
      Unknown event handler property `onSwipedLeft`. It will be ignored.

    [0m [90m 30 |[39m       [36mreturn[39m[33m;[39m
     [90m 31 |[39m     }
    [31m[1m>[22m[39m[90m 32 |[39m     originalError[33m.[39mcall(console[33m,[39m [33m...[39margs)[33m;[39m
     [90m    |[39m                   [31m[1m^[22m[39m
     [90m 33 |[39m   }[33m;[39m
     [90m 34 |[39m })[33m;[39m
     [90m 35 |[39m[0m

      at console.call [as error] (jest.setup.js:32:19)
      at validateProperty (node_modules/react-dom/cjs/react-dom-client.development.js:2943:21)
      at warnUnknownProperties (node_modules/react-dom/cjs/react-dom-client.development.js:3154:9)
      at validatePropertiesInDevelopment (node_modules/react-dom/cjs/react-dom-client.development.js:17117:9)
      at setInitialProperties (node_modules/react-dom/cjs/react-dom-client.development.js:17741:7)
      at completeWork (node_modules/react-dom/cjs/react-dom-client.development.js:11391:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
      at completeUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:15268:19)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:15149:11)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14419:13)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:859:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at renderWithProviders (src/components/MemoCard.test.jsx:44:16)
      at Object.renderWithProviders (src/components/MemoCard.test.jsx:310:27)

    console.error
      Unknown event handler property `onSwipedRight`. It will be ignored.

    [0m [90m 30 |[39m       [36mreturn[39m[33m;[39m
     [90m 31 |[39m     }
    [31m[1m>[22m[39m[90m 32 |[39m     originalError[33m.[39mcall(console[33m,[39m [33m...[39margs)[33m;[39m
     [90m    |[39m                   [31m[1m^[22m[39m
     [90m 33 |[39m   }[33m;[39m
     [90m 34 |[39m })[33m;[39m
     [90m 35 |[39m[0m

      at console.call [as error] (jest.setup.js:32:19)
      at validateProperty (node_modules/react-dom/cjs/react-dom-client.development.js:2943:21)
      at warnUnknownProperties (node_modules/react-dom/cjs/react-dom-client.development.js:3154:9)
      at validatePropertiesInDevelopment (node_modules/react-dom/cjs/react-dom-client.development.js:17117:9)
      at setInitialProperties (node_modules/react-dom/cjs/react-dom-client.development.js:17741:7)
      at completeWork (node_modules/react-dom/cjs/react-dom-client.development.js:11391:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
      at completeUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:15268:19)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:15149:11)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14419:13)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:859:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at renderWithProviders (src/components/MemoCard.test.jsx:44:16)
      at Object.renderWithProviders (src/components/MemoCard.test.jsx:310:27)

    console.error
      React does not recognize the `preventDefaultTouchmoveEvent` prop on a DOM element. If you intentionally want it to appear in the DOM as a custom attribute, spell it as lowercase `preventdefaulttouchmoveevent` instead. If you accidentally passed it from a parent component, remove it from the DOM element.

    [0m [90m 30 |[39m       [36mreturn[39m[33m;[39m
     [90m 31 |[39m     }
    [31m[1m>[22m[39m[90m 32 |[39m     originalError[33m.[39mcall(console[33m,[39m [33m...[39margs)[33m;[39m
     [90m    |[39m                   [31m[1m^[22m[39m
     [90m 33 |[39m   }[33m;[39m
     [90m 34 |[39m })[33m;[39m
     [90m 35 |[39m[0m

      at console.call [as error] (jest.setup.js:32:19)
      at validateProperty (node_modules/react-dom/cjs/react-dom-client.development.js:3009:19)
      at warnUnknownProperties (node_modules/react-dom/cjs/react-dom-client.development.js:3154:9)
      at validatePropertiesInDevelopment (node_modules/react-dom/cjs/react-dom-client.development.js:17117:9)
      at setInitialProperties (node_modules/react-dom/cjs/react-dom-client.development.js:17741:7)
      at completeWork (node_modules/react-dom/cjs/react-dom-client.development.js:11391:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
      at completeUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:15268:19)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:15149:11)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14419:13)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:859:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at renderWithProviders (src/components/MemoCard.test.jsx:44:16)
      at Object.renderWithProviders (src/components/MemoCard.test.jsx:310:27)

    console.error
      React does not recognize the `trackMouse` prop on a DOM element. If you intentionally want it to appear in the DOM as a custom attribute, spell it as lowercase `trackmouse` instead. If you accidentally passed it from a parent component, remove it from the DOM element.

    [0m [90m 30 |[39m       [36mreturn[39m[33m;[39m
     [90m 31 |[39m     }
    [31m[1m>[22m[39m[90m 32 |[39m     originalError[33m.[39mcall(console[33m,[39m [33m...[39margs)[33m;[39m
     [90m    |[39m                   [31m[1m^[22m[39m
     [90m 33 |[39m   }[33m;[39m
     [90m 34 |[39m })[33m;[39m
     [90m 35 |[39m[0m

      at console.call [as error] (jest.setup.js:32:19)
      at validateProperty (node_modules/react-dom/cjs/react-dom-client.development.js:3009:19)
      at warnUnknownProperties (node_modules/react-dom/cjs/react-dom-client.development.js:3154:9)
      at validatePropertiesInDevelopment (node_modules/react-dom/cjs/react-dom-client.development.js:17117:9)
      at setInitialProperties (node_modules/react-dom/cjs/react-dom-client.development.js:17741:7)
      at completeWork (node_modules/react-dom/cjs/react-dom-client.development.js:11391:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
      at completeUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:15268:19)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:15149:11)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14419:13)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:859:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at renderWithProviders (src/components/MemoCard.test.jsx:44:16)
      at Object.renderWithProviders (src/components/MemoCard.test.jsx:310:27)

PASS src/components/BookTagEditor.test.jsx (9.105 s)
  ● Console

    console.log
      === BookTagEditor test: renders book tags START ===

      at Object.log (src/components/BookTagEditor.test.jsx:57:13)

    console.log
      === BookTagEditor test: renderWithProviders START ===

      at Object.log (src/components/BookTagEditor.test.jsx:58:13)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === BookTagEditor test: renderWithProviders END ===

      at Object.log (src/components/BookTagEditor.test.jsx:62:13)

    console.log
      === BookTagEditor test: waitFor START ===

      at Object.log (src/components/BookTagEditor.test.jsx:65:13)

    console.log
      === BookTagEditor test: waitFor callback START ===

      at log (src/components/BookTagEditor.test.jsx:68:17)

    console.log
      === BookTagEditor test: waitFor callback END ===

      at log (src/components/BookTagEditor.test.jsx:70:17)

    console.log
      === BookTagEditor test: waitFor END ===

      at Object.log (src/components/BookTagEditor.test.jsx:73:13)

    console.log
      === BookTagEditor test: 最終確認 START ===

      at Object.log (src/components/BookTagEditor.test.jsx:76:13)

    console.log
      === BookTagEditor test: 最終確認 END ===

      at Object.log (src/components/BookTagEditor.test.jsx:81:13)

    console.log
      === BookTagEditor test: renders book tags END ===

      at Object.log (src/components/BookTagEditor.test.jsx:82:13)

    console.log
      === BookTagEditor test: shows message when no tags are set START ===

      at Object.log (src/components/BookTagEditor.test.jsx:95:13)

    console.log
      === BookTagEditor test: renderWithProviders START ===

      at Object.log (src/components/BookTagEditor.test.jsx:98:13)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === BookTagEditor test: renderWithProviders END ===

      at Object.log (src/components/BookTagEditor.test.jsx:102:13)

    console.log
      === BookTagEditor test: waitFor START ===

      at Object.log (src/components/BookTagEditor.test.jsx:105:13)

    console.log
      === BookTagEditor test: waitFor callback START ===

      at log (src/components/BookTagEditor.test.jsx:108:17)

    console.log
      === BookTagEditor test: waitFor callback END ===

      at log (src/components/BookTagEditor.test.jsx:111:17)

    console.log
      === BookTagEditor test: waitFor END ===

      at Object.log (src/components/BookTagEditor.test.jsx:114:13)

    console.log
      === BookTagEditor test: shows message when no tags are set END ===

      at Object.log (src/components/BookTagEditor.test.jsx:115:13)

    console.log
      === BookTagEditor test: opens edit dialog when edit button is clicked START ===

      at Object.log (src/components/BookTagEditor.test.jsx:129:13)

    console.log
      === BookTagEditor test: renderWithProviders START ===

      at Object.log (src/components/BookTagEditor.test.jsx:130:13)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === BookTagEditor test: renderWithProviders END ===

      at Object.log (src/components/BookTagEditor.test.jsx:134:13)

    console.log
      === BookTagEditor test: waitFor START ===

      at Object.log (src/components/BookTagEditor.test.jsx:137:13)

    console.log
      === BookTagEditor test: waitFor callback START ===

      at log (src/components/BookTagEditor.test.jsx:140:17)

    console.log
      === BookTagEditor test: waitFor callback END ===

      at log (src/components/BookTagEditor.test.jsx:142:17)

    console.log
      === BookTagEditor test: waitFor END ===

      at Object.log (src/components/BookTagEditor.test.jsx:145:13)

    console.log
      === BookTagEditor test: 編集ボタンクリック START ===

      at Object.log (src/components/BookTagEditor.test.jsx:148:13)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === BookTagEditor test: 編集ボタンクリック END ===

      at Object.log (src/components/BookTagEditor.test.jsx:151:13)

    console.log
      === BookTagEditor test: ダイアログ確認 START ===

      at Object.log (src/components/BookTagEditor.test.jsx:154:13)

    console.log
      === BookTagEditor test: ダイアログ確認 waitFor callback START ===

      at log (src/components/BookTagEditor.test.jsx:157:17)

    console.log
      === BookTagEditor test: ダイアログ確認 waitFor callback END ===

      at log (src/components/BookTagEditor.test.jsx:161:17)

    console.log
      === BookTagEditor test: ダイアログ確認 END ===

      at Object.log (src/components/BookTagEditor.test.jsx:164:13)

    console.log
      === BookTagEditor test: opens edit dialog when edit button is clicked END ===

      at Object.log (src/components/BookTagEditor.test.jsx:165:13)

    console.log
      === BookTagEditor test: saves tags to Firestore START ===

      at Object.log (src/components/BookTagEditor.test.jsx:181:13)

    console.log
      === BookTagEditor test: renderWithProviders START ===

      at Object.log (src/components/BookTagEditor.test.jsx:185:13)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === BookTagEditor test: renderWithProviders END ===

      at Object.log (src/components/BookTagEditor.test.jsx:189:13)

    console.log
      === BookTagEditor test: waitFor START ===

      at Object.log (src/components/BookTagEditor.test.jsx:192:13)

    console.log
      === BookTagEditor test: waitFor callback START ===

      at log (src/components/BookTagEditor.test.jsx:195:17)

    console.log
      === BookTagEditor test: waitFor callback END ===

      at log (src/components/BookTagEditor.test.jsx:197:17)

    console.log
      === BookTagEditor test: waitFor END ===

      at Object.log (src/components/BookTagEditor.test.jsx:200:13)

    console.log
      === BookTagEditor test: 編集ダイアログを開く START ===

      at Object.log (src/components/BookTagEditor.test.jsx:203:13)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === BookTagEditor test: 編集ダイアログを開く END ===

      at Object.log (src/components/BookTagEditor.test.jsx:206:13)

    console.log
      === BookTagEditor test: 保存ボタン確認 START ===

      at Object.log (src/components/BookTagEditor.test.jsx:209:13)

    console.log
      === BookTagEditor test: 保存ボタン確認 waitFor callback START ===

      at log (src/components/BookTagEditor.test.jsx:212:17)

    console.log
      === BookTagEditor test: 保存ボタン確認 waitFor callback END ===

      at log (src/components/BookTagEditor.test.jsx:214:17)

    console.log
      === BookTagEditor test: 保存ボタン確認 END ===

      at Object.log (src/components/BookTagEditor.test.jsx:217:13)

    console.log
      === BookTagEditor test: 保存ボタンクリック START ===

      at Object.log (src/components/BookTagEditor.test.jsx:219:13)

    console.log
      === BookTagEditor test: 保存ボタンクリック END ===

      at Object.log (src/components/BookTagEditor.test.jsx:222:13)

    console.log
      === BookTagEditor test: Firestore保存確認 START ===

      at Object.log (src/components/BookTagEditor.test.jsx:225:13)

    console.log
      === BookTagEditor test: Firestore保存確認 waitFor callback START ===

      at log (src/components/BookTagEditor.test.jsx:228:17)

    console.log
      === BookTagEditor test: Firestore保存確認 waitFor callback END ===

      at log (src/components/BookTagEditor.test.jsx:236:17)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === BookTagEditor test: Firestore保存確認 END ===

      at Object.log (src/components/BookTagEditor.test.jsx:239:13)

    console.log
      === BookTagEditor test: saves tags to Firestore END ===

      at Object.log (src/components/BookTagEditor.test.jsx:240:13)

PASS src/pages/BookDetail.test.jsx (10.2 s)
  ● Console

    console.error
      📖 BookDetail error: エラーが発生しました

    [0m [90m 30 |[39m       [36mreturn[39m[33m;[39m
     [90m 31 |[39m     }
    [31m[1m>[22m[39m[90m 32 |[39m     originalError[33m.[39mcall(console[33m,[39m [33m...[39margs)[33m;[39m
     [90m    |[39m                   [31m[1m^[22m[39m
     [90m 33 |[39m   }[33m;[39m
     [90m 34 |[39m })[33m;[39m
     [90m 35 |[39m[0m

      at console.call [as error] (jest.setup.js:32:19)
      at error (src/pages/BookDetail.jsx:127:13)
      at Object.react-stack-bottom-frame (node_modules/react-dom/cjs/react-dom-client.development.js:23863:20)
      at renderWithHooks (node_modules/react-dom/cjs/react-dom-client.development.js:5529:22)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:8897:19)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14419:13)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:859:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at renderWithProviders (src/test-utils.js:23:16)
      at Object.<anonymous> (src/pages/BookDetail.test.jsx:148:24)

    console.warn
      📖 BookDetail: Book not found for ID: undefined

    [0m [90m 130 |[39m   
     [90m 131 |[39m   [36mif[39m ([33m![39mbook) {
    [31m[1m>[22m[39m[90m 132 |[39m     console[33m.[39mwarn([32m'📖 BookDetail: Book not found for ID:'[39m[33m,[39m id)[33m;[39m
     [90m     |[39m             [31m[1m^[22m[39m
     [90m 133 |[39m     [36mreturn[39m [33m<[39m[33mdiv[39m data[33m-[39mtestid[33m=[39m[32m"book-detail-not-found"[39m[33m>[39m本が見つかりません。[33m<[39m[33m/[39m[33mdiv[39m[33m>[39m[33m;[39m
     [90m 134 |[39m   }
     [90m 135 |[39m[0m

      at warn (src/pages/BookDetail.jsx:132:13)
      at Object.react-stack-bottom-frame (node_modules/react-dom/cjs/react-dom-client.development.js:23863:20)
      at renderWithHooks (node_modules/react-dom/cjs/react-dom-client.development.js:5529:22)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:8897:19)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14419:13)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:859:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at renderWithProviders (src/test-utils.js:23:16)
      at Object.<anonymous> (src/pages/BookDetail.test.jsx:161:24)

    console.warn
      📖 BookDetail: Book not found for ID: undefined

    [0m [90m 130 |[39m   
     [90m 131 |[39m   [36mif[39m ([33m![39mbook) {
    [31m[1m>[22m[39m[90m 132 |[39m     console[33m.[39mwarn([32m'📖 BookDetail: Book not found for ID:'[39m[33m,[39m id)[33m;[39m
     [90m     |[39m             [31m[1m^[22m[39m
     [90m 133 |[39m     [36mreturn[39m [33m<[39m[33mdiv[39m data[33m-[39mtestid[33m=[39m[32m"book-detail-not-found"[39m[33m>[39m本が見つかりません。[33m<[39m[33m/[39m[33mdiv[39m[33m>[39m[33m;[39m
     [90m 134 |[39m   }
     [90m 135 |[39m[0m

      at warn (src/pages/BookDetail.jsx:132:13)
      at Object.react-stack-bottom-frame (node_modules/react-dom/cjs/react-dom-client.development.js:23863:20)
      at renderWithHooks (node_modules/react-dom/cjs/react-dom-client.development.js:5529:22)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:8897:19)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14419:13)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:859:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at renderWithProviders (src/test-utils.js:23:16)
      at Object.<anonymous> (src/pages/BookDetail.test.jsx:459:26)

PASS src/components/search/AdvancedSearchForm.test.jsx (10.127 s)
  ● Console

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

PASS src/components/MemoEditor.test.jsx (10.77 s)
  ● Console

    console.error
      Error updating memo:  TypeError: onClose is not a function
          at onClose (D:\work\AI\project-01-bookmemo\src\components\MemoEditor.jsx:69:5)
          at handleClose (D:\work\AI\project-01-bookmemo\src\components\MemoEditor.jsx:90:7)

    [0m [90m 30 |[39m       [36mreturn[39m[33m;[39m
     [90m 31 |[39m     }
    [31m[1m>[22m[39m[90m 32 |[39m     originalError[33m.[39mcall(console[33m,[39m [33m...[39margs)[33m;[39m
     [90m    |[39m                   [31m[1m^[22m[39m
     [90m 33 |[39m   }[33m;[39m
     [90m 34 |[39m })[33m;[39m
     [90m 35 |[39m[0m

      at console.call [as error] (jest.setup.js:32:19)
      at error (src/components/MemoEditor.jsx:95:15)

PASS src/components/tags/TagStats.test.jsx (10.832 s)
  ● Console

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

FAIL src/pages/TagSearch.test.jsx (10.478 s)
  ● Console

    console.log
      検索実行: {
        text: '',
        status: 'all',
        dateRange: { type: 'none' },
        selectedTags: [],
        sortBy: 'updatedAt',
        sortOrder: 'desc'
      }

      at log (src/pages/TagSearch.jsx:61:13)

    console.log
      タグがクリックされました: 小説

      at log (src/pages/TagSearch.jsx:79:13)

    console.log
      タグがクリックされました: 小説

      at log (src/pages/TagSearch.jsx:79:13)

    console.log
      タグがクリックされました: 技術書

      at log (src/pages/TagSearch.jsx:79:13)

    console.log
      タグがクリックされました: 小説

      at log (src/pages/TagSearch.jsx:79:13)

  ● TagSearch › 詳細検索機能 › 検索結果クリック: 本は遷移し、メモはダイアログを開く

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "/book/book1"
    Received: "/book/book1", {"state": {"returnPath": "/", "searchState": {"results": [{"id": "book1", "title": "テスト本", "type": "book"}, {"bookId": "book1", "content": "テストメモ", "id": "memo1", "type": "memo"}]}}}

    Number of calls: 1

    [0m [90m 264 |[39m       [90m// 本の結果をクリック → 書籍詳細へ遷移[39m
     [90m 265 |[39m       fireEvent[33m.[39mclick(screen[33m.[39mgetByTestId([32m'result-0'[39m))[33m;[39m
    [31m[1m>[22m[39m[90m 266 |[39m       expect(mockNavigate)[33m.[39mtoHaveBeenCalledWith([32m'/book/book1'[39m)[33m;[39m
     [90m     |[39m                            [31m[1m^[22m[39m
     [90m 267 |[39m
     [90m 268 |[39m       [90m// メモの結果をクリック → メモ詳細ダイアログが開く（遷移しない）[39m
     [90m 269 |[39m       fireEvent[33m.[39mclick(screen[33m.[39mgetByTestId([32m'result-1'[39m))[33m;[39m[0m

      at Object.toHaveBeenCalledWith (src/pages/TagSearch.test.jsx:266:28)

PASS src/components/search/SearchResults.test.jsx
  ● Console

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

PASS src/components/ExternalBookSearch.test.jsx (10.85 s)
PASS src/hooks/useBookList.test.js
  ● Console

    console.error
      Error fetching books: Error: Firestore error
          at Object.<anonymous> (D:\work\AI\project-01-bookmemo\src\hooks\useBookList.test.js:155:25)
          at Promise.finally.completed (D:\work\AI\project-01-bookmemo\node_modules\jest-circus\build\jestAdapterInit.js:1559:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (D:\work\AI\project-01-bookmemo\node_modules\jest-circus\build\jestAdapterInit.js:1499:10)
          at _callCircusTest (D:\work\AI\project-01-bookmemo\node_modules\jest-circus\build\jestAdapterInit.js:1009:40)
          at _runTest (D:\work\AI\project-01-bookmemo\node_modules\jest-circus\build\jestAdapterInit.js:949:3)
          at _runTestsForDescribeBlock (D:\work\AI\project-01-bookmemo\node_modules\jest-circus\build\jestAdapterInit.js:839:13)
          at _runTestsForDescribeBlock (D:\work\AI\project-01-bookmemo\node_modules\jest-circus\build\jestAdapterInit.js:829:11)
          at _runTestsForDescribeBlock (D:\work\AI\project-01-bookmemo\node_modules\jest-circus\build\jestAdapterInit.js:829:11)
          at run (D:\work\AI\project-01-bookmemo\node_modules\jest-circus\build\jestAdapterInit.js:757:3)
          at runAndTransformResultsToJestFormat (D:\work\AI\project-01-bookmemo\node_modules\jest-circus\build\jestAdapterInit.js:1920:21)
          at jestAdapter (D:\work\AI\project-01-bookmemo\node_modules\jest-circus\build\runner.js:101:19)
          at runTestInternal (D:\work\AI\project-01-bookmemo\node_modules\jest-runner\build\testWorker.js:272:16)
          at runTest (D:\work\AI\project-01-bookmemo\node_modules\jest-runner\build\testWorker.js:340:7)
          at Object.worker (D:\work\AI\project-01-bookmemo\node_modules\jest-runner\build\testWorker.js:494:12)

    [0m [90m 30 |[39m       [36mreturn[39m[33m;[39m
     [90m 31 |[39m     }
    [31m[1m>[22m[39m[90m 32 |[39m     originalError[33m.[39mcall(console[33m,[39m [33m...[39margs)[33m;[39m
     [90m    |[39m                   [31m[1m^[22m[39m
     [90m 33 |[39m   }[33m;[39m
     [90m 34 |[39m })[33m;[39m
     [90m 35 |[39m[0m

      at console.call [as error] (jest.setup.js:32:19)
      at error (src/hooks/useBookList.js:85:15)

PASS src/pages/BookList.test.jsx
PASS src/components/MemoList.test.jsx
  ● Console

    console.error
      Error deleting memo: Error: Delete failed
          at Object.<anonymous> (D:\work\AI\project-01-bookmemo\src\components\MemoList.test.jsx:389:56)
          at Promise.finally.completed (D:\work\AI\project-01-bookmemo\node_modules\jest-circus\build\jestAdapterInit.js:1559:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (D:\work\AI\project-01-bookmemo\node_modules\jest-circus\build\jestAdapterInit.js:1499:10)
          at _callCircusTest (D:\work\AI\project-01-bookmemo\node_modules\jest-circus\build\jestAdapterInit.js:1009:40)
          at runNextTicks (node:internal/process/task_queues:65:5)
          at listOnTimeout (node:internal/timers:549:9)
          at processTimers (node:internal/timers:523:7)
          at _runTest (D:\work\AI\project-01-bookmemo\node_modules\jest-circus\build\jestAdapterInit.js:949:3)
          at _runTestsForDescribeBlock (D:\work\AI\project-01-bookmemo\node_modules\jest-circus\build\jestAdapterInit.js:839:13)
          at _runTestsForDescribeBlock (D:\work\AI\project-01-bookmemo\node_modules\jest-circus\build\jestAdapterInit.js:829:11)
          at run (D:\work\AI\project-01-bookmemo\node_modules\jest-circus\build\jestAdapterInit.js:757:3)
          at runAndTransformResultsToJestFormat (D:\work\AI\project-01-bookmemo\node_modules\jest-circus\build\jestAdapterInit.js:1920:21)
          at jestAdapter (D:\work\AI\project-01-bookmemo\node_modules\jest-circus\build\runner.js:101:19)
          at runTestInternal (D:\work\AI\project-01-bookmemo\node_modules\jest-runner\build\testWorker.js:272:16)
          at runTest (D:\work\AI\project-01-bookmemo\node_modules\jest-runner\build\testWorker.js:340:7)
          at Object.worker (D:\work\AI\project-01-bookmemo\node_modules\jest-runner\build\testWorker.js:494:12)

    [0m [90m 30 |[39m       [36mreturn[39m[33m;[39m
     [90m 31 |[39m     }
    [31m[1m>[22m[39m[90m 32 |[39m     originalError[33m.[39mcall(console[33m,[39m [33m...[39margs)[33m;[39m
     [90m    |[39m                   [31m[1m^[22m[39m
     [90m 33 |[39m   }[33m;[39m
     [90m 34 |[39m })[33m;[39m
     [90m 35 |[39m[0m

      at console.call [as error] (jest.setup.js:32:19)
      at error (src/components/MemoList.jsx:40:15)

PASS src/components/CameraPasteOCR.test.jsx
  ● Console

    console.log
      [CameraPasteOCR] ペーストされたテキスト: テストテキスト

      at log (src/components/CameraPasteOCR.jsx:18:19)

PASS src/components/search/TagSearchField.test.jsx
PASS src/components/BookScanner.test.jsx
PASS src/components/search/DateRangeSelector.test.jsx
PASS src/components/search/MemoContentSearchField.test.jsx
PASS src/components/MemoAdd.test.jsx (13.634 s)
  ● Console

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      🐛 📝 MEMO [2025-10-25T10:35:29.599Z] handleSubmit開始
        Data: {
        "text": "テスト引用文",
        "comment": "テストコメント",
        "page": "123",
        "tags": []
      }

      at log (src/utils/logger.js:126:15)

    console.log
      🐛 📝 MEMO [2025-10-25T10:35:29.607Z] 保存するタグ
        Data: []

      at log (src/utils/logger.js:126:15)

    console.log
      🐛 📝 MEMO [2025-10-25T10:35:29.608Z] addMemo呼び出し前

      at log (src/utils/logger.js:126:15)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.info
      ℹ️ 📝 MEMO [2025-10-25T10:35:29.710Z] addMemo呼び出し完了
        Data: {
        "memoId": "test-memo-id"
      }

      at info (src/utils/logger.js:123:15)

    console.log
      🐛 📝 MEMO [2025-10-25T10:35:29.711Z] フォームリセット前

      at log (src/utils/logger.js:126:15)

    console.log
      🐛 📝 MEMO [2025-10-25T10:35:29.712Z] フォームリセット完了

      at log (src/utils/logger.js:126:15)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      🐛 📝 MEMO [2025-10-25T10:35:31.862Z] handleSubmit開始
        Data: {
        "text": "テストメモ",
        "comment": "",
        "page": "",
        "tags": []
      }

      at log (src/utils/logger.js:126:15)

    console.log
      🐛 📝 MEMO [2025-10-25T10:35:31.863Z] 保存するタグ
        Data: []

      at log (src/utils/logger.js:126:15)

    console.log
      🐛 📝 MEMO [2025-10-25T10:35:31.866Z] addMemo呼び出し前

      at log (src/utils/logger.js:126:15)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.info
      ℹ️ 📝 MEMO [2025-10-25T10:35:32.079Z] addMemo呼び出し完了
        Data: {
        "memoId": "test-memo-id"
      }

      at info (src/utils/logger.js:123:15)

    console.log
      🐛 📝 MEMO [2025-10-25T10:35:32.081Z] フォームリセット前

      at log (src/utils/logger.js:126:15)

    console.log
      🐛 📝 MEMO [2025-10-25T10:35:32.082Z] フォームリセット完了

      at log (src/utils/logger.js:126:15)

    console.log
      🐛 📝 MEMO [2025-10-25T10:35:32.082Z] onMemoAddedコールバック呼び出し

      at log (src/utils/logger.js:126:15)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      🐛 📝 MEMO [2025-10-25T10:35:33.322Z] handleSubmit開始
        Data: {
        "text": "テスト引用文",
        "comment": "",
        "page": "",
        "tags": []
      }

      at log (src/utils/logger.js:126:15)

    console.log
      🐛 📝 MEMO [2025-10-25T10:35:33.323Z] 保存するタグ
        Data: []

      at log (src/utils/logger.js:126:15)

    console.log
      🐛 📝 MEMO [2025-10-25T10:35:33.325Z] addMemo呼び出し前

      at log (src/utils/logger.js:126:15)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.error
      ❌ 📝 MEMO [2025-10-25T10:35:33.440Z] Error adding memo
        Data: {}

    [0m [90m 30 |[39m       [36mreturn[39m[33m;[39m
     [90m 31 |[39m     }
    [31m[1m>[22m[39m[90m 32 |[39m     originalError[33m.[39mcall(console[33m,[39m [33m...[39margs)[33m;[39m
     [90m    |[39m                   [31m[1m^[22m[39m
     [90m 33 |[39m   }[33m;[39m
     [90m 34 |[39m })[33m;[39m
     [90m 35 |[39m[0m

      at console.call [as error] (jest.setup.js:32:19)
      at error (src/utils/logger.js:117:15)
      at Object.log [as error] (src/utils/logger.js:138:39)
      at Object.error (src/utils/logger.js:165:38)
      at error (src/components/MemoAdd.jsx:81:19)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      🐛 📝 MEMO [2025-10-25T10:35:34.392Z] handleSubmit開始
        Data: {
        "text": "テストメモ",
        "comment": "",
        "page": "",
        "tags": []
      }

      at log (src/utils/logger.js:126:15)

    console.log
      🐛 📝 MEMO [2025-10-25T10:35:34.393Z] 保存するタグ
        Data: [
        "新規タグ"
      ]

      at log (src/utils/logger.js:126:15)

    console.log
      🐛 📝 MEMO [2025-10-25T10:35:34.395Z] addMemo呼び出し前

      at log (src/utils/logger.js:126:15)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.info
      ℹ️ 📝 MEMO [2025-10-25T10:35:34.564Z] addMemo呼び出し完了
        Data: {
        "memoId": "test-memo-id"
      }

      at info (src/utils/logger.js:123:15)

    console.log
      🐛 📝 MEMO [2025-10-25T10:35:34.565Z] フォームリセット前

      at log (src/utils/logger.js:126:15)

    console.log
      🐛 📝 MEMO [2025-10-25T10:35:34.565Z] フォームリセット完了

      at log (src/utils/logger.js:126:15)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

PASS src/hooks/useNavigation.test.js
PASS src/hooks/useSearch.test.js
  ● Console

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      検索条件: {
        text: '',
        status: 'all',
        dateRange: { type: 'none' },
        memoContent: '',
        selectedTags: [],
        sortBy: 'updatedAt',
        sortOrder: 'desc'
      }

      at Object.log [as executeSearch] (src/hooks/useSearch.js:103:15)

    console.log
      全クエリ実行完了, 総結果数: 4

      at Object.log [as executeSearch] (src/hooks/useSearch.js:107:15)

    console.log
      結果の内訳: { books: 2, memos: 2 }

      at Object.log [as executeSearch] (src/hooks/useSearch.js:108:15)

    console.log
      [searchStorage] Saved search results to sessionStorage: 4

      at log (src/utils/searchStorage.js:17:13)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      [searchStorage] Restored search results from sessionStorage: 4

      at log (src/utils/searchStorage.js:48:13)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      検索条件: {
        text: '',
        status: 'all',
        dateRange: { type: 'none' },
        memoContent: '',
        selectedTags: [ '小説' ],
        sortBy: 'updatedAt',
        sortOrder: 'desc'
      }

      at Object.log [as executeSearch] (src/hooks/useSearch.js:103:15)

    console.log
      全クエリ実行完了, 総結果数: 4

      at Object.log [as executeSearch] (src/hooks/useSearch.js:107:15)

    console.log
      結果の内訳: { books: 2, memos: 2 }

      at Object.log [as executeSearch] (src/hooks/useSearch.js:108:15)

    console.log
      [searchStorage] Saved search results to sessionStorage: 2

      at log (src/utils/searchStorage.js:17:13)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      [searchStorage] Restored search results from sessionStorage: 2

      at log (src/utils/searchStorage.js:48:13)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      検索条件: {
        text: '',
        status: 'reading',
        dateRange: { type: 'none' },
        memoContent: '',
        selectedTags: [],
        sortBy: 'updatedAt',
        sortOrder: 'desc'
      }

      at Object.log [as executeSearch] (src/hooks/useSearch.js:103:15)

    console.log
      全クエリ実行完了, 総結果数: 4

      at Object.log [as executeSearch] (src/hooks/useSearch.js:107:15)

    console.log
      結果の内訳: { books: 2, memos: 2 }

      at Object.log [as executeSearch] (src/hooks/useSearch.js:108:15)

    console.log
      [searchStorage] Saved search results to sessionStorage: 4

      at log (src/utils/searchStorage.js:17:13)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      [searchStorage] Restored search results from sessionStorage: 4

      at log (src/utils/searchStorage.js:48:13)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      検索条件: {
        text: '',
        status: 'all',
        dateRange: { type: 'none' },
        memoContent: '',
        selectedTags: [ '小説' ],
        sortBy: 'updatedAt',
        sortOrder: 'desc'
      }

      at Object.log [as executeSearch] (src/hooks/useSearch.js:103:15)

    console.log
      全クエリ実行完了, 総結果数: 4

      at Object.log [as executeSearch] (src/hooks/useSearch.js:107:15)

    console.log
      結果の内訳: { books: 2, memos: 2 }

      at Object.log [as executeSearch] (src/hooks/useSearch.js:108:15)

    console.log
      [searchStorage] Saved search results to sessionStorage: 2

      at log (src/utils/searchStorage.js:17:13)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      [searchStorage] Restored search results from sessionStorage: 2

      at log (src/utils/searchStorage.js:48:13)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      検索条件: {
        text: '',
        status: 'all',
        dateRange: { type: 'none' },
        memoContent: '',
        includeMemoContent: false,
        selectedTags: [ '小説' ],
        sortBy: 'updatedAt',
        sortOrder: 'desc'
      }

      at Object.log [as executeSearch] (src/hooks/useSearch.js:103:15)

    console.log
      全クエリ実行完了, 総結果数: 3

      at Object.log [as executeSearch] (src/hooks/useSearch.js:107:15)

    console.log
      結果の内訳: { books: 3, memos: 0 }

      at Object.log [as executeSearch] (src/hooks/useSearch.js:108:15)

    console.log
      [searchStorage] Saved search results to sessionStorage: 2

      at log (src/utils/searchStorage.js:17:13)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      [searchStorage] Restored search results from sessionStorage: 2

      at log (src/utils/searchStorage.js:48:13)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      検索条件: {
        text: '',
        status: 'all',
        dateRange: { type: 'none' },
        memoContent: '',
        includeMemoContent: false,
        selectedTags: [ '小説' ],
        sortBy: 'updatedAt',
        sortOrder: 'desc'
      }

      at Object.log [as executeSearch] (src/hooks/useSearch.js:103:15)

    console.log
      全クエリ実行完了, 総結果数: 3

      at Object.log [as executeSearch] (src/hooks/useSearch.js:107:15)

    console.log
      結果の内訳: { books: 3, memos: 0 }

      at Object.log [as executeSearch] (src/hooks/useSearch.js:108:15)

    console.log
      [searchStorage] Saved search results to sessionStorage: 2

      at log (src/utils/searchStorage.js:17:13)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      [searchStorage] Restored search results from sessionStorage: 2

      at log (src/utils/searchStorage.js:48:13)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      検索条件: {
        text: 'テスト',
        status: 'all',
        dateRange: { type: 'none' },
        memoContent: '',
        selectedTags: [],
        sortBy: 'updatedAt',
        sortOrder: 'desc'
      }

      at Object.log [as executeSearch] (src/hooks/useSearch.js:103:15)

    console.log
      全クエリ実行完了, 総結果数: 4

      at Object.log [as executeSearch] (src/hooks/useSearch.js:107:15)

    console.log
      結果の内訳: { books: 2, memos: 2 }

      at Object.log [as executeSearch] (src/hooks/useSearch.js:108:15)

    console.log
      [searchStorage] Saved search results to sessionStorage: 2

      at log (src/utils/searchStorage.js:17:13)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      [searchStorage] Restored search results from sessionStorage: 2

      at log (src/utils/searchStorage.js:48:13)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      検索条件: {
        text: '',
        status: 'all',
        dateRange: { type: 'none' },
        memoContent: '',
        selectedTags: [],
        sortBy: 'updatedAt',
        sortOrder: 'desc'
      }

      at Object.log [as executeSearch] (src/hooks/useSearch.js:103:15)

    console.error
      検索エラー: Error: Firestore error
          at Object.<anonymous> (D:\work\AI\project-01-bookmemo\src\hooks\useSearch.test.js:382:37)
          at Promise.finally.completed (D:\work\AI\project-01-bookmemo\node_modules\jest-circus\build\jestAdapterInit.js:1559:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (D:\work\AI\project-01-bookmemo\node_modules\jest-circus\build\jestAdapterInit.js:1499:10)
          at _callCircusTest (D:\work\AI\project-01-bookmemo\node_modules\jest-circus\build\jestAdapterInit.js:1009:40)
          at _runTest (D:\work\AI\project-01-bookmemo\node_modules\jest-circus\build\jestAdapterInit.js:949:3)
          at _runTestsForDescribeBlock (D:\work\AI\project-01-bookmemo\node_modules\jest-circus\build\jestAdapterInit.js:839:13)
          at _runTestsForDescribeBlock (D:\work\AI\project-01-bookmemo\node_modules\jest-circus\build\jestAdapterInit.js:829:11)
          at _runTestsForDescribeBlock (D:\work\AI\project-01-bookmemo\node_modules\jest-circus\build\jestAdapterInit.js:829:11)
          at run (D:\work\AI\project-01-bookmemo\node_modules\jest-circus\build\jestAdapterInit.js:757:3)
          at runAndTransformResultsToJestFormat (D:\work\AI\project-01-bookmemo\node_modules\jest-circus\build\jestAdapterInit.js:1920:21)
          at jestAdapter (D:\work\AI\project-01-bookmemo\node_modules\jest-circus\build\runner.js:101:19)
          at runTestInternal (D:\work\AI\project-01-bookmemo\node_modules\jest-runner\build\testWorker.js:272:16)
          at runTest (D:\work\AI\project-01-bookmemo\node_modules\jest-runner\build\testWorker.js:340:7)
          at Object.worker (D:\work\AI\project-01-bookmemo\node_modules\jest-runner\build\testWorker.js:494:12)

    [0m [90m 30 |[39m       [36mreturn[39m[33m;[39m
     [90m 31 |[39m     }
    [31m[1m>[22m[39m[90m 32 |[39m     originalError[33m.[39mcall(console[33m,[39m [33m...[39margs)[33m;[39m
     [90m    |[39m                   [31m[1m^[22m[39m
     [90m 33 |[39m   }[33m;[39m
     [90m 34 |[39m })[33m;[39m
     [90m 35 |[39m[0m

      at console.call [as error] (jest.setup.js:32:19)
      at Object.error [as executeSearch] (src/hooks/useSearch.js:119:15)
      at src/hooks/useSearch.test.js:397:9

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      [searchStorage] Restored search results from sessionStorage: 2

      at log (src/utils/searchStorage.js:48:13)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      検索条件: {
        text: '',
        status: 'all',
        dateRange: { type: 'none' },
        memoContent: '',
        selectedTags: [],
        sortBy: 'updatedAt',
        sortOrder: 'desc'
      }

      at Object.log [as executeSearch] (src/hooks/useSearch.js:103:15)

    console.log
      全クエリ実行完了, 総結果数: 4

      at Object.log [as executeSearch] (src/hooks/useSearch.js:107:15)

    console.log
      結果の内訳: { books: 2, memos: 2 }

      at Object.log [as executeSearch] (src/hooks/useSearch.js:108:15)

    console.log
      [searchStorage] Saved search results to sessionStorage: 4

      at log (src/utils/searchStorage.js:17:13)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      [searchStorage] Restored search results from sessionStorage: 4

      at log (src/utils/searchStorage.js:48:13)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      検索条件: {
        text: '',
        status: 'all',
        dateRange: { type: 'year', year: 2024 },
        memoContent: '',
        selectedTags: [],
        sortBy: 'updatedAt',
        sortOrder: 'desc'
      }

      at Object.log [as executeSearch] (src/hooks/useSearch.js:103:15)

    console.log
      全クエリ実行完了, 総結果数: 4

      at Object.log [as executeSearch] (src/hooks/useSearch.js:107:15)

    console.log
      結果の内訳: { books: 2, memos: 2 }

      at Object.log [as executeSearch] (src/hooks/useSearch.js:108:15)

    console.log
      [searchStorage] Saved search results to sessionStorage: 4

      at log (src/utils/searchStorage.js:17:13)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      [searchStorage] Restored search results from sessionStorage: 4

      at log (src/utils/searchStorage.js:48:13)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      検索条件: {
        text: '',
        status: 'all',
        dateRange: { type: 'month', year: 2024, month: 3 },
        memoContent: '',
        selectedTags: [],
        sortBy: 'updatedAt',
        sortOrder: 'desc'
      }

      at Object.log [as executeSearch] (src/hooks/useSearch.js:103:15)

    console.log
      全クエリ実行完了, 総結果数: 4

      at Object.log [as executeSearch] (src/hooks/useSearch.js:107:15)

    console.log
      結果の内訳: { books: 2, memos: 2 }

      at Object.log [as executeSearch] (src/hooks/useSearch.js:108:15)

    console.log
      [searchStorage] Saved search results to sessionStorage: 4

      at log (src/utils/searchStorage.js:17:13)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      [searchStorage] Restored search results from sessionStorage: 4

      at log (src/utils/searchStorage.js:48:13)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      検索条件: {
        text: '',
        status: 'all',
        dateRange: { type: 'none' },
        memoContent: '',
        selectedTags: [],
        sortBy: 'title',
        sortOrder: 'asc'
      }

      at Object.log [as executeSearch] (src/hooks/useSearch.js:103:15)

    console.log
      全クエリ実行完了, 総結果数: 4

      at Object.log [as executeSearch] (src/hooks/useSearch.js:107:15)

    console.log
      結果の内訳: { books: 2, memos: 2 }

      at Object.log [as executeSearch] (src/hooks/useSearch.js:108:15)

    console.log
      [searchStorage] Saved search results to sessionStorage: 4

      at log (src/utils/searchStorage.js:17:13)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

PASS src/hooks/useMemo.test.js
  ● Console

    console.log
      === useMemo test: fetches memos successfully START ===

      at Object.log (src/hooks/useMemo.test.js:23:13)

    console.log
      === useMemo test: renderHook START ===

      at Object.log (src/hooks/useMemo.test.js:30:13)

    console.log
      === useMemo test: renderHook END ===

      at Object.log (src/hooks/useMemo.test.js:32:13)

    console.log
      === useMemo test: waitFor START ===

      at Object.log (src/hooks/useMemo.test.js:34:13)

    console.log
      === useMemo test: waitFor callback START ===

      at log (src/hooks/useMemo.test.js:36:15)

    console.log
      === useMemo test: waitFor callback START ===

      at log (src/hooks/useMemo.test.js:36:15)

    console.log
      === useMemo test: waitFor callback END ===

      at log (src/hooks/useMemo.test.js:38:15)

    console.log
      === useMemo test: waitFor END ===

      at Object.log (src/hooks/useMemo.test.js:40:13)

    console.log
      === useMemo test: 最終確認 START ===

      at Object.log (src/hooks/useMemo.test.js:42:13)

    console.log
      === useMemo test: 最終確認 END ===

      at Object.log (src/hooks/useMemo.test.js:47:13)

    console.log
      === useMemo test: fetches memos successfully END ===

      at Object.log (src/hooks/useMemo.test.js:48:13)

    console.log
      === useMemo test: handles fetch error START ===

      at Object.log (src/hooks/useMemo.test.js:52:13)

    console.error
      Error fetching memos: Error: Network error
          at Object.<anonymous> (D:\work\AI\project-01-bookmemo\src\hooks\useMemo.test.js:53:31)
          at Promise.finally.completed (D:\work\AI\project-01-bookmemo\node_modules\jest-circus\build\jestAdapterInit.js:1559:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (D:\work\AI\project-01-bookmemo\node_modules\jest-circus\build\jestAdapterInit.js:1499:10)
          at _callCircusTest (D:\work\AI\project-01-bookmemo\node_modules\jest-circus\build\jestAdapterInit.js:1009:40)
          at _runTest (D:\work\AI\project-01-bookmemo\node_modules\jest-circus\build\jestAdapterInit.js:949:3)
          at _runTestsForDescribeBlock (D:\work\AI\project-01-bookmemo\node_modules\jest-circus\build\jestAdapterInit.js:839:13)
          at _runTestsForDescribeBlock (D:\work\AI\project-01-bookmemo\node_modules\jest-circus\build\jestAdapterInit.js:829:11)
          at run (D:\work\AI\project-01-bookmemo\node_modules\jest-circus\build\jestAdapterInit.js:757:3)
          at runAndTransformResultsToJestFormat (D:\work\AI\project-01-bookmemo\node_modules\jest-circus\build\jestAdapterInit.js:1920:21)
          at jestAdapter (D:\work\AI\project-01-bookmemo\node_modules\jest-circus\build\runner.js:101:19)
          at runTestInternal (D:\work\AI\project-01-bookmemo\node_modules\jest-runner\build\testWorker.js:272:16)
          at runTest (D:\work\AI\project-01-bookmemo\node_modules\jest-runner\build\testWorker.js:340:7)
          at Object.worker (D:\work\AI\project-01-bookmemo\node_modules\jest-runner\build\testWorker.js:494:12)

    [0m [90m 30 |[39m       [36mreturn[39m[33m;[39m
     [90m 31 |[39m     }
    [31m[1m>[22m[39m[90m 32 |[39m     originalError[33m.[39mcall(console[33m,[39m [33m...[39margs)[33m;[39m
     [90m    |[39m                   [31m[1m^[22m[39m
     [90m 33 |[39m   }[33m;[39m
     [90m 34 |[39m })[33m;[39m
     [90m 35 |[39m[0m

      at console.call [as error] (jest.setup.js:32:19)
      at error (src/hooks/useMemo.js:47:15)

    console.log
      === useMemo test: handles fetch error END ===

      at Object.log (src/hooks/useMemo.test.js:60:13)

    console.log
      === useMemo test: adds memo successfully START ===

      at Object.log (src/hooks/useMemo.test.js:64:13)

    console.log
      === useMemo test: adds memo successfully END ===

      at Object.log (src/hooks/useMemo.test.js:89:13)

    console.log
      === useMemo test: handles add memo error START ===

      at Object.log (src/hooks/useMemo.test.js:93:13)

    console.error
      Error adding memo: Error: Add failed
          at Object.<anonymous> (D:\work\AI\project-01-bookmemo\src\hooks\useMemo.test.js:95:30)
          at Promise.finally.completed (D:\work\AI\project-01-bookmemo\node_modules\jest-circus\build\jestAdapterInit.js:1559:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (D:\work\AI\project-01-bookmemo\node_modules\jest-circus\build\jestAdapterInit.js:1499:10)
          at _callCircusTest (D:\work\AI\project-01-bookmemo\node_modules\jest-circus\build\jestAdapterInit.js:1009:40)
          at _runTest (D:\work\AI\project-01-bookmemo\node_modules\jest-circus\build\jestAdapterInit.js:949:3)
          at _runTestsForDescribeBlock (D:\work\AI\project-01-bookmemo\node_modules\jest-circus\build\jestAdapterInit.js:839:13)
          at _runTestsForDescribeBlock (D:\work\AI\project-01-bookmemo\node_modules\jest-circus\build\jestAdapterInit.js:829:11)
          at run (D:\work\AI\project-01-bookmemo\node_modules\jest-circus\build\jestAdapterInit.js:757:3)
          at runAndTransformResultsToJestFormat (D:\work\AI\project-01-bookmemo\node_modules\jest-circus\build\jestAdapterInit.js:1920:21)
          at jestAdapter (D:\work\AI\project-01-bookmemo\node_modules\jest-circus\build\runner.js:101:19)
          at runTestInternal (D:\work\AI\project-01-bookmemo\node_modules\jest-runner\build\testWorker.js:272:16)
          at runTest (D:\work\AI\project-01-bookmemo\node_modules\jest-runner\build\testWorker.js:340:7)
          at Object.worker (D:\work\AI\project-01-bookmemo\node_modules\jest-runner\build\testWorker.js:494:12)

    [0m [90m 30 |[39m       [36mreturn[39m[33m;[39m
     [90m 31 |[39m     }
    [31m[1m>[22m[39m[90m 32 |[39m     originalError[33m.[39mcall(console[33m,[39m [33m...[39margs)[33m;[39m
     [90m    |[39m                   [31m[1m^[22m[39m
     [90m 33 |[39m   }[33m;[39m
     [90m 34 |[39m })[33m;[39m
     [90m 35 |[39m[0m

      at console.call [as error] (jest.setup.js:32:19)
      at Object.error [as addMemo] (src/hooks/useMemo.js:81:15)
      at Object.<anonymous> (src/hooks/useMemo.test.js:100:5)

    console.log
      === useMemo test: handles add memo error END ===

      at Object.log (src/hooks/useMemo.test.js:101:13)

    console.log
      === useMemo test: updates memo successfully START ===

      at Object.log (src/hooks/useMemo.test.js:105:13)

    console.log
      === useMemo test: updates memo successfully END ===

      at Object.log (src/hooks/useMemo.test.js:132:13)

    console.log
      === useMemo test: handles update memo error START ===

      at Object.log (src/hooks/useMemo.test.js:136:13)

    console.error
      Error updating memo: Error: Update failed
          at Object.<anonymous> (D:\work\AI\project-01-bookmemo\src\hooks\useMemo.test.js:138:33)
          at Promise.finally.completed (D:\work\AI\project-01-bookmemo\node_modules\jest-circus\build\jestAdapterInit.js:1559:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (D:\work\AI\project-01-bookmemo\node_modules\jest-circus\build\jestAdapterInit.js:1499:10)
          at _callCircusTest (D:\work\AI\project-01-bookmemo\node_modules\jest-circus\build\jestAdapterInit.js:1009:40)
          at _runTest (D:\work\AI\project-01-bookmemo\node_modules\jest-circus\build\jestAdapterInit.js:949:3)
          at _runTestsForDescribeBlock (D:\work\AI\project-01-bookmemo\node_modules\jest-circus\build\jestAdapterInit.js:839:13)
          at _runTestsForDescribeBlock (D:\work\AI\project-01-bookmemo\node_modules\jest-circus\build\jestAdapterInit.js:829:11)
          at run (D:\work\AI\project-01-bookmemo\node_modules\jest-circus\build\jestAdapterInit.js:757:3)
          at runAndTransformResultsToJestFormat (D:\work\AI\project-01-bookmemo\node_modules\jest-circus\build\jestAdapterInit.js:1920:21)
          at jestAdapter (D:\work\AI\project-01-bookmemo\node_modules\jest-circus\build\runner.js:101:19)
          at runTestInternal (D:\work\AI\project-01-bookmemo\node_modules\jest-runner\build\testWorker.js:272:16)
          at runTest (D:\work\AI\project-01-bookmemo\node_modules\jest-runner\build\testWorker.js:340:7)
          at Object.worker (D:\work\AI\project-01-bookmemo\node_modules\jest-runner\build\testWorker.js:494:12)

    [0m [90m 30 |[39m       [36mreturn[39m[33m;[39m
     [90m 31 |[39m     }
    [31m[1m>[22m[39m[90m 32 |[39m     originalError[33m.[39mcall(console[33m,[39m [33m...[39margs)[33m;[39m
     [90m    |[39m                   [31m[1m^[22m[39m
     [90m 33 |[39m   }[33m;[39m
     [90m 34 |[39m })[33m;[39m
     [90m 35 |[39m[0m

      at console.call [as error] (jest.setup.js:32:19)
      at Object.error [as updateMemo] (src/hooks/useMemo.js:109:15)
      at Object.<anonymous> (src/hooks/useMemo.test.js:143:5)

    console.log
      === useMemo test: handles update memo error END ===

      at Object.log (src/hooks/useMemo.test.js:144:13)

    console.log
      === useMemo test: deletes memo successfully START ===

      at Object.log (src/hooks/useMemo.test.js:148:13)

    console.log
      === useMemo test: deletes memo successfully END ===

      at Object.log (src/hooks/useMemo.test.js:168:13)

    console.log
      === useMemo test: handles delete memo error START ===

      at Object.log (src/hooks/useMemo.test.js:172:13)

    console.error
      Error deleting memo: Error: Delete failed
          at Object.<anonymous> (D:\work\AI\project-01-bookmemo\src\hooks\useMemo.test.js:174:33)
          at Promise.finally.completed (D:\work\AI\project-01-bookmemo\node_modules\jest-circus\build\jestAdapterInit.js:1559:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (D:\work\AI\project-01-bookmemo\node_modules\jest-circus\build\jestAdapterInit.js:1499:10)
          at _callCircusTest (D:\work\AI\project-01-bookmemo\node_modules\jest-circus\build\jestAdapterInit.js:1009:40)
          at _runTest (D:\work\AI\project-01-bookmemo\node_modules\jest-circus\build\jestAdapterInit.js:949:3)
          at _runTestsForDescribeBlock (D:\work\AI\project-01-bookmemo\node_modules\jest-circus\build\jestAdapterInit.js:839:13)
          at _runTestsForDescribeBlock (D:\work\AI\project-01-bookmemo\node_modules\jest-circus\build\jestAdapterInit.js:829:11)
          at run (D:\work\AI\project-01-bookmemo\node_modules\jest-circus\build\jestAdapterInit.js:757:3)
          at runAndTransformResultsToJestFormat (D:\work\AI\project-01-bookmemo\node_modules\jest-circus\build\jestAdapterInit.js:1920:21)
          at jestAdapter (D:\work\AI\project-01-bookmemo\node_modules\jest-circus\build\runner.js:101:19)
          at runTestInternal (D:\work\AI\project-01-bookmemo\node_modules\jest-runner\build\testWorker.js:272:16)
          at runTest (D:\work\AI\project-01-bookmemo\node_modules\jest-runner\build\testWorker.js:340:7)
          at Object.worker (D:\work\AI\project-01-bookmemo\node_modules\jest-runner\build\testWorker.js:494:12)

    [0m [90m 30 |[39m       [36mreturn[39m[33m;[39m
     [90m 31 |[39m     }
    [31m[1m>[22m[39m[90m 32 |[39m     originalError[33m.[39mcall(console[33m,[39m [33m...[39margs)[33m;[39m
     [90m    |[39m                   [31m[1m^[22m[39m
     [90m 33 |[39m   }[33m;[39m
     [90m 34 |[39m })[33m;[39m
     [90m 35 |[39m[0m

      at console.call [as error] (jest.setup.js:32:19)
      at Object.error [as deleteMemo] (src/hooks/useMemo.js:124:15)
      at Object.<anonymous> (src/hooks/useMemo.test.js:179:5)

    console.log
      === useMemo test: handles delete memo error END ===

      at Object.log (src/hooks/useMemo.test.js:180:13)

    console.log
      === useMemo test: addMemo should not cause infinite loop START ===

      at Object.log (src/hooks/useMemo.test.js:186:15)

    console.log
      === useMemo test: addMemo should not cause infinite loop END ===

      at Object.log (src/hooks/useMemo.test.js:214:15)

    console.log
      === useMemo test: updateMemo should not cause infinite loop START ===

      at Object.log (src/hooks/useMemo.test.js:218:15)

    console.log
      === useMemo test: updateMemo should not cause infinite loop END ===

      at Object.log (src/hooks/useMemo.test.js:246:15)

    console.log
      === useMemo test: addMemo should update state immediately START ===

      at Object.log (src/hooks/useMemo.test.js:250:15)

    console.log
      === useMemo test: addMemo should update state immediately END ===

      at Object.log (src/hooks/useMemo.test.js:272:15)

    console.log
      === useMemo test: updateMemo should update state immediately START ===

      at Object.log (src/hooks/useMemo.test.js:276:15)

    console.log
      === useMemo test: updateMemo should update state immediately END ===

      at Object.log (src/hooks/useMemo.test.js:299:15)

PASS src/hooks/useSearchResultHandler.test.jsx
  ● Console

    console.warn
      [useSearchResultHandler] Memo not found in results, navigating to book page

    [0m [90m 73 |[39m       } [36melse[39m {
     [90m 74 |[39m         [90m// フォールバック: メモが見つからない場合は書籍詳細へ遷移[39m
    [31m[1m>[22m[39m[90m 75 |[39m         console[33m.[39mwarn([32m'[useSearchResultHandler] Memo not found in results, navigating to book page'[39m)[33m;[39m
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 76 |[39m         navigate([32m`/book/${bookId}?memo=${memoId}`[39m)[33m;[39m
     [90m 77 |[39m       }
     [90m 78 |[39m     }[0m

      at Object.warn [as handleResultClick] (src/hooks/useSearchResultHandler.jsx:75:17)
      at handleResultClick (src/hooks/useSearchResultHandler.test.jsx:84:24)
      at node_modules/@testing-library/react/dist/act-compat.js:48:24
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:789:22)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at Object.<anonymous> (src/hooks/useSearchResultHandler.test.jsx:83:10)

    console.warn
      [useSearchResultHandler] Memo not found in results, navigating to book page

    [0m [90m 73 |[39m       } [36melse[39m {
     [90m 74 |[39m         [90m// フォールバック: メモが見つからない場合は書籍詳細へ遷移[39m
    [31m[1m>[22m[39m[90m 75 |[39m         console[33m.[39mwarn([32m'[useSearchResultHandler] Memo not found in results, navigating to book page'[39m)[33m;[39m
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 76 |[39m         navigate([32m`/book/${bookId}?memo=${memoId}`[39m)[33m;[39m
     [90m 77 |[39m       }
     [90m 78 |[39m     }[0m

      at Object.warn [as handleResultClick] (src/hooks/useSearchResultHandler.jsx:75:17)
      at handleResultClick (src/hooks/useSearchResultHandler.test.jsx:149:24)
      at node_modules/@testing-library/react/dist/act-compat.js:48:24
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:789:22)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at Object.<anonymous> (src/hooks/useSearchResultHandler.test.jsx:148:10)

PASS src/components/BookCard.test.jsx
PASS src/hooks/useBookDuplicateCheck.test.js
  ● Console

    console.error
      Error checking book duplicate: Error: Firestore error
          at Object.<anonymous> (D:\work\AI\project-01-bookmemo\src\hooks\useBookDuplicateCheck.test.js:156:25)
          at Promise.finally.completed (D:\work\AI\project-01-bookmemo\node_modules\jest-circus\build\jestAdapterInit.js:1559:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (D:\work\AI\project-01-bookmemo\node_modules\jest-circus\build\jestAdapterInit.js:1499:10)
          at _callCircusTest (D:\work\AI\project-01-bookmemo\node_modules\jest-circus\build\jestAdapterInit.js:1009:40)
          at _runTest (D:\work\AI\project-01-bookmemo\node_modules\jest-circus\build\jestAdapterInit.js:949:3)
          at _runTestsForDescribeBlock (D:\work\AI\project-01-bookmemo\node_modules\jest-circus\build\jestAdapterInit.js:839:13)
          at _runTestsForDescribeBlock (D:\work\AI\project-01-bookmemo\node_modules\jest-circus\build\jestAdapterInit.js:829:11)
          at _runTestsForDescribeBlock (D:\work\AI\project-01-bookmemo\node_modules\jest-circus\build\jestAdapterInit.js:829:11)
          at run (D:\work\AI\project-01-bookmemo\node_modules\jest-circus\build\jestAdapterInit.js:757:3)
          at runAndTransformResultsToJestFormat (D:\work\AI\project-01-bookmemo\node_modules\jest-circus\build\jestAdapterInit.js:1920:21)
          at jestAdapter (D:\work\AI\project-01-bookmemo\node_modules\jest-circus\build\runner.js:101:19)
          at runTestInternal (D:\work\AI\project-01-bookmemo\node_modules\jest-runner\build\testWorker.js:272:16)
          at runTest (D:\work\AI\project-01-bookmemo\node_modules\jest-runner\build\testWorker.js:340:7)
          at Object.worker (D:\work\AI\project-01-bookmemo\node_modules\jest-runner\build\testWorker.js:494:12)

    [0m [90m 30 |[39m       [36mreturn[39m[33m;[39m
     [90m 31 |[39m     }
    [31m[1m>[22m[39m[90m 32 |[39m     originalError[33m.[39mcall(console[33m,[39m [33m...[39margs)[33m;[39m
     [90m    |[39m                   [31m[1m^[22m[39m
     [90m 33 |[39m   }[33m;[39m
     [90m 34 |[39m })[33m;[39m
     [90m 35 |[39m[0m

      at console.call [as error] (jest.setup.js:32:19)
      at Object.error [as checkDuplicate] (src/hooks/useBookDuplicateCheck.js:62:15)
      at src/hooks/useBookDuplicateCheck.test.js:163:25

PASS src/hooks/useTagStats.test.js
  ● Console

    console.log
      useTagStats: タグ統計取得開始, userId: test-user-id

      at log (src/hooks/useTagStats.js:33:15)

    console.log
      useTagStats: データ取得完了, 本: 2 メモ: 1

      at log (src/hooks/useTagStats.js:41:15)

    console.log
      useTagStats: 本データ: { id: 'book1', title: undefined, tags: [ '小説', '文学' ] }

      at log (src/hooks/useTagStats.js:49:17)
          at Array.forEach (<anonymous>)

    console.log
      useTagStats: 本データ: { id: 'book2', title: undefined, tags: [ '技術書', 'プログラミング' ] }

      at log (src/hooks/useTagStats.js:49:17)
          at Array.forEach (<anonymous>)

    console.log
      useTagStats: 本のタグ集計完了

      at log (src/hooks/useTagStats.js:67:15)

    console.log
      useTagStats: メモデータ: {
        id: 'memo1',
        bookId: 'book1',
        tags: [ '小説', '感想' ],
        text: 'undefined...'
      }

      at log (src/hooks/useTagStats.js:72:17)
          at Array.forEach (<anonymous>)

    console.log
      useTagStats: メモのタグ集計完了, 最終統計: {
        '小説': { bookCount: 1, memoCount: 1, lastUsed: 2024-03-01T00:00:00.000Z },
        '文学': { bookCount: 1, memoCount: 0, lastUsed: 2024-01-01T00:00:00.000Z },
        '技術書': { bookCount: 1, memoCount: 0, lastUsed: 2024-02-01T00:00:00.000Z },
        'プログラミング': { bookCount: 1, memoCount: 0, lastUsed: 2024-02-01T00:00:00.000Z },
        '感想': { bookCount: 0, memoCount: 1, lastUsed: 2024-03-01T00:00:00.000Z }
      }

      at log (src/hooks/useTagStats.js:95:15)

    console.log
      useTagStats: タグ統計設定完了

      at log (src/hooks/useTagStats.js:98:15)

    console.log
      useTagStats: タグ統計取得開始, userId: test-user-id

      at log (src/hooks/useTagStats.js:33:15)

    console.log
      useTagStats: データ取得完了, 本: 2 メモ: 1

      at log (src/hooks/useTagStats.js:41:15)

    console.log
      useTagStats: 本データ: { id: 'book1', title: undefined, tags: [ '小説', '文学' ] }

      at log (src/hooks/useTagStats.js:49:17)
          at Array.forEach (<anonymous>)

    console.log
      useTagStats: 本データ: { id: 'book2', title: undefined, tags: [ '小説' ] }

      at log (src/hooks/useTagStats.js:49:17)
          at Array.forEach (<anonymous>)

    console.log
      useTagStats: 本のタグ集計完了

      at log (src/hooks/useTagStats.js:67:15)

    console.log
      useTagStats: メモデータ: { id: 'memo1', bookId: 'book1', tags: [ '小説' ], text: 'undefined...' }

      at log (src/hooks/useTagStats.js:72:17)
          at Array.forEach (<anonymous>)

    console.log
      useTagStats: メモのタグ集計完了, 最終統計: {
        '小説': { bookCount: 2, memoCount: 1, lastUsed: 2024-03-01T00:00:00.000Z },
        '文学': { bookCount: 1, memoCount: 0, lastUsed: 2024-01-01T00:00:00.000Z }
      }

      at log (src/hooks/useTagStats.js:95:15)

    console.log
      useTagStats: タグ統計設定完了

      at log (src/hooks/useTagStats.js:98:15)

    console.log
      useTagStats: タグ統計取得開始, userId: test-user-id

      at log (src/hooks/useTagStats.js:33:15)

    console.log
      useTagStats: データ取得完了, 本: 1 メモ: 0

      at log (src/hooks/useTagStats.js:41:15)

    console.log
      useTagStats: 本データ: { id: 'book1', title: undefined, tags: [ '小説', '文学' ] }

      at log (src/hooks/useTagStats.js:49:17)
          at Array.forEach (<anonymous>)

    console.log
      useTagStats: 本のタグ集計完了

      at log (src/hooks/useTagStats.js:67:15)

    console.log
      useTagStats: メモのタグ集計完了, 最終統計: {
        '小説': { bookCount: 1, memoCount: 0, lastUsed: 2024-01-01T00:00:00.000Z },
        '文学': { bookCount: 1, memoCount: 0, lastUsed: 2024-01-01T00:00:00.000Z }
      }

      at log (src/hooks/useTagStats.js:95:15)

    console.log
      useTagStats: タグ統計設定完了

      at log (src/hooks/useTagStats.js:98:15)

    console.log
      useTagStats: タグ統計取得開始, userId: test-user-id

      at log (src/hooks/useTagStats.js:33:15)

    console.log
      useTagStats: データ取得完了, 本: 1 メモ: 0

      at log (src/hooks/useTagStats.js:41:15)

    console.log
      useTagStats: 本データ: { id: 'book1', title: undefined, tags: [ '小説' ] }

      at log (src/hooks/useTagStats.js:49:17)
          at Array.forEach (<anonymous>)

    console.log
      useTagStats: 本のタグ集計完了

      at log (src/hooks/useTagStats.js:67:15)

    console.log
      useTagStats: メモのタグ集計完了, 最終統計: {
        '小説': { bookCount: 1, memoCount: 0, lastUsed: 2024-01-01T00:00:00.000Z }
      }

      at log (src/hooks/useTagStats.js:95:15)

    console.log
      useTagStats: タグ統計設定完了

      at log (src/hooks/useTagStats.js:98:15)

    console.log
      useTagStats: タグ統計取得開始, userId: test-user-id

      at log (src/hooks/useTagStats.js:33:15)

    console.log
      useTagStats: データ取得完了, 本: 1 メモ: 0

      at log (src/hooks/useTagStats.js:41:15)

    console.log
      useTagStats: 本データ: { id: 'book1', title: undefined, tags: [ '小説' ] }

      at log (src/hooks/useTagStats.js:49:17)
          at Array.forEach (<anonymous>)

    console.log
      useTagStats: 本のタグ集計完了

      at log (src/hooks/useTagStats.js:67:15)

    console.log
      useTagStats: メモのタグ集計完了, 最終統計: {
        '小説': { bookCount: 1, memoCount: 0, lastUsed: 2024-01-01T00:00:00.000Z }
      }

      at log (src/hooks/useTagStats.js:95:15)

    console.log
      useTagStats: タグ統計設定完了

      at log (src/hooks/useTagStats.js:98:15)

    console.log
      useTagStats: タグ統計取得開始, userId: test-user-id

      at log (src/hooks/useTagStats.js:33:15)

    console.error
      タグ統計の取得に失敗しました: Error: Firestore error
          at Object.<anonymous> (D:\work\AI\project-01-bookmemo\src\hooks\useTagStats.test.js:300:35)
          at Promise.finally.completed (D:\work\AI\project-01-bookmemo\node_modules\jest-circus\build\jestAdapterInit.js:1559:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (D:\work\AI\project-01-bookmemo\node_modules\jest-circus\build\jestAdapterInit.js:1499:10)
          at _callCircusTest (D:\work\AI\project-01-bookmemo\node_modules\jest-circus\build\jestAdapterInit.js:1009:40)
          at _runTest (D:\work\AI\project-01-bookmemo\node_modules\jest-circus\build\jestAdapterInit.js:949:3)
          at _runTestsForDescribeBlock (D:\work\AI\project-01-bookmemo\node_modules\jest-circus\build\jestAdapterInit.js:839:13)
          at _runTestsForDescribeBlock (D:\work\AI\project-01-bookmemo\node_modules\jest-circus\build\jestAdapterInit.js:829:11)
          at run (D:\work\AI\project-01-bookmemo\node_modules\jest-circus\build\jestAdapterInit.js:757:3)
          at runAndTransformResultsToJestFormat (D:\work\AI\project-01-bookmemo\node_modules\jest-circus\build\jestAdapterInit.js:1920:21)
          at jestAdapter (D:\work\AI\project-01-bookmemo\node_modules\jest-circus\build\runner.js:101:19)
          at runTestInternal (D:\work\AI\project-01-bookmemo\node_modules\jest-runner\build\testWorker.js:272:16)
          at runTest (D:\work\AI\project-01-bookmemo\node_modules\jest-runner\build\testWorker.js:340:7)
          at Object.worker (D:\work\AI\project-01-bookmemo\node_modules\jest-runner\build\testWorker.js:494:12)

    [0m [90m 30 |[39m       [36mreturn[39m[33m;[39m
     [90m 31 |[39m     }
    [31m[1m>[22m[39m[90m 32 |[39m     originalError[33m.[39mcall(console[33m,[39m [33m...[39margs)[33m;[39m
     [90m    |[39m                   [31m[1m^[22m[39m
     [90m 33 |[39m   }[33m;[39m
     [90m 34 |[39m })[33m;[39m
     [90m 35 |[39m[0m

      at console.call [as error] (jest.setup.js:32:19)
      at error (src/hooks/useTagStats.js:100:15)

    console.log
      useTagStats: タグ統計取得開始, userId: test-user-id

      at log (src/hooks/useTagStats.js:33:15)

    console.log
      useTagStats: データ取得完了, 本: 1 メモ: 1

      at log (src/hooks/useTagStats.js:41:15)

    console.log
      useTagStats: 本データ: { id: 'book1', title: undefined, tags: [ '小説' ] }

      at log (src/hooks/useTagStats.js:49:17)
          at Array.forEach (<anonymous>)

    console.log
      useTagStats: 本のタグ集計完了

      at log (src/hooks/useTagStats.js:67:15)

    console.log
      useTagStats: メモデータ: {
        id: 'memo1',
        bookId: 'book1',
        tags: [ '小説', '感想' ],
        text: 'undefined...'
      }

      at log (src/hooks/useTagStats.js:72:17)
          at Array.forEach (<anonymous>)

    console.log
      useTagStats: メモのタグ集計完了, 最終統計: {
        '小説': { bookCount: 1, memoCount: 1, lastUsed: 2024-02-01T00:00:00.000Z },
        '感想': { bookCount: 0, memoCount: 1, lastUsed: 2024-02-01T00:00:00.000Z }
      }

      at log (src/hooks/useTagStats.js:95:15)

    console.log
      useTagStats: タグ統計設定完了

      at log (src/hooks/useTagStats.js:98:15)

PASS src/hooks/useBook.test.js
  ● Console

    console.log
      === useBook test: fetches book successfully START ===

      at Object.log (src/hooks/useBook.test.js:54:13)

    console.log
      === useBook test: renderUseBook START ===

      at Object.log (src/hooks/useBook.test.js:69:13)

    console.log
      === useBook test: renderUseBook END ===

      at Object.log (src/hooks/useBook.test.js:71:13)

    console.log
      === useBook test: 初期状態確認 START ===

      at Object.log (src/hooks/useBook.test.js:74:13)

    console.log
      === useBook test: 初期状態確認 END ===

      at Object.log (src/hooks/useBook.test.js:77:13)

    console.log
      === useBook test: waitFor START ===

      at Object.log (src/hooks/useBook.test.js:80:13)

    console.log
      === useBook test: waitFor callback START ===

      at log (src/hooks/useBook.test.js:82:15)

    console.log
      === useBook test: waitFor callback START ===

      at log (src/hooks/useBook.test.js:82:15)

    console.log
      === useBook test: waitFor callback END ===

      at log (src/hooks/useBook.test.js:84:15)

    console.log
      === useBook test: waitFor END ===

      at Object.log (src/hooks/useBook.test.js:86:13)

    console.log
      === useBook test: 最終確認 START ===

      at Object.log (src/hooks/useBook.test.js:88:13)

    console.log
      === useBook test: 最終確認 END ===

      at Object.log (src/hooks/useBook.test.js:97:13)

    console.log
      === useBook test: fetches book successfully END ===

      at Object.log (src/hooks/useBook.test.js:98:13)

    console.log
      === useBook test: handles book not found START ===

      at Object.log (src/hooks/useBook.test.js:102:13)

    console.error
      No such document or access denied!

    [0m [90m 30 |[39m       [36mreturn[39m[33m;[39m
     [90m 31 |[39m     }
    [31m[1m>[22m[39m[90m 32 |[39m     originalError[33m.[39mcall(console[33m,[39m [33m...[39margs)[33m;[39m
     [90m    |[39m                   [31m[1m^[22m[39m
     [90m 33 |[39m   }[33m;[39m
     [90m 34 |[39m })[33m;[39m
     [90m 35 |[39m[0m

      at console.call [as error] (jest.setup.js:32:19)
      at error (src/hooks/useBook.js:30:17)

    console.log
      === useBook test: handles book not found END ===

      at Object.log (src/hooks/useBook.test.js:116:13)

    console.log
      === useBook test: handles access denied START ===

      at Object.log (src/hooks/useBook.test.js:120:13)

    console.error
      No such document or access denied!

    [0m [90m 30 |[39m       [36mreturn[39m[33m;[39m
     [90m 31 |[39m     }
    [31m[1m>[22m[39m[90m 32 |[39m     originalError[33m.[39mcall(console[33m,[39m [33m...[39margs)[33m;[39m
     [90m    |[39m                   [31m[1m^[22m[39m
     [90m 33 |[39m   }[33m;[39m
     [90m 34 |[39m })[33m;[39m
     [90m 35 |[39m[0m

      at console.call [as error] (jest.setup.js:32:19)
      at error (src/hooks/useBook.js:30:17)

    console.log
      === useBook test: handles access denied END ===

      at Object.log (src/hooks/useBook.test.js:141:13)

    console.log
      === useBook test: handles fetch error START ===

      at Object.log (src/hooks/useBook.test.js:145:13)

    console.error
      Error fetching document: Error: Network error
          at Object.<anonymous> (D:\work\AI\project-01-bookmemo\src\hooks\useBook.test.js:146:30)
          at Promise.finally.completed (D:\work\AI\project-01-bookmemo\node_modules\jest-circus\build\jestAdapterInit.js:1559:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (D:\work\AI\project-01-bookmemo\node_modules\jest-circus\build\jestAdapterInit.js:1499:10)
          at _callCircusTest (D:\work\AI\project-01-bookmemo\node_modules\jest-circus\build\jestAdapterInit.js:1009:40)
          at _runTest (D:\work\AI\project-01-bookmemo\node_modules\jest-circus\build\jestAdapterInit.js:949:3)
          at _runTestsForDescribeBlock (D:\work\AI\project-01-bookmemo\node_modules\jest-circus\build\jestAdapterInit.js:839:13)
          at _runTestsForDescribeBlock (D:\work\AI\project-01-bookmemo\node_modules\jest-circus\build\jestAdapterInit.js:829:11)
          at run (D:\work\AI\project-01-bookmemo\node_modules\jest-circus\build\jestAdapterInit.js:757:3)
          at runAndTransformResultsToJestFormat (D:\work\AI\project-01-bookmemo\node_modules\jest-circus\build\jestAdapterInit.js:1920:21)
          at jestAdapter (D:\work\AI\project-01-bookmemo\node_modules\jest-circus\build\runner.js:101:19)
          at runTestInternal (D:\work\AI\project-01-bookmemo\node_modules\jest-runner\build\testWorker.js:272:16)
          at runTest (D:\work\AI\project-01-bookmemo\node_modules\jest-runner\build\testWorker.js:340:7)
          at Object.worker (D:\work\AI\project-01-bookmemo\node_modules\jest-runner\build\testWorker.js:494:12)

    [0m [90m 30 |[39m       [36mreturn[39m[33m;[39m
     [90m 31 |[39m     }
    [31m[1m>[22m[39m[90m 32 |[39m     originalError[33m.[39mcall(console[33m,[39m [33m...[39margs)[33m;[39m
     [90m    |[39m                   [31m[1m^[22m[39m
     [90m 33 |[39m   }[33m;[39m
     [90m 34 |[39m })[33m;[39m
     [90m 35 |[39m[0m

      at console.call [as error] (jest.setup.js:32:19)
      at error (src/hooks/useBook.js:36:15)

    console.log
      === useBook test: handles fetch error END ===

      at Object.log (src/hooks/useBook.test.js:156:13)

    console.log
      === useBook test: updates book status successfully START ===

      at Object.log (src/hooks/useBook.test.js:160:13)

    console.log
      === useBook test: updates book status successfully END ===

      at Object.log (src/hooks/useBook.test.js:196:13)

    console.log
      === useBook test: updates book tags successfully START ===

      at Object.log (src/hooks/useBook.test.js:200:13)

    console.log
      === useBook test: updates book tags successfully END ===

      at Object.log (src/hooks/useBook.test.js:236:13)

    console.log
      === useBook test: handles update error START ===

      at Object.log (src/hooks/useBook.test.js:240:13)

    console.error
      Error updating book: Error: Update failed
          at Object.<anonymous> (D:\work\AI\project-01-bookmemo\src\hooks\useBook.test.js:253:33)
          at Promise.finally.completed (D:\work\AI\project-01-bookmemo\node_modules\jest-circus\build\jestAdapterInit.js:1559:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (D:\work\AI\project-01-bookmemo\node_modules\jest-circus\build\jestAdapterInit.js:1499:10)
          at _callCircusTest (D:\work\AI\project-01-bookmemo\node_modules\jest-circus\build\jestAdapterInit.js:1009:40)
          at _runTest (D:\work\AI\project-01-bookmemo\node_modules\jest-circus\build\jestAdapterInit.js:949:3)
          at _runTestsForDescribeBlock (D:\work\AI\project-01-bookmemo\node_modules\jest-circus\build\jestAdapterInit.js:839:13)
          at _runTestsForDescribeBlock (D:\work\AI\project-01-bookmemo\node_modules\jest-circus\build\jestAdapterInit.js:829:11)
          at run (D:\work\AI\project-01-bookmemo\node_modules\jest-circus\build\jestAdapterInit.js:757:3)
          at runAndTransformResultsToJestFormat (D:\work\AI\project-01-bookmemo\node_modules\jest-circus\build\jestAdapterInit.js:1920:21)
          at jestAdapter (D:\work\AI\project-01-bookmemo\node_modules\jest-circus\build\runner.js:101:19)
          at runTestInternal (D:\work\AI\project-01-bookmemo\node_modules\jest-runner\build\testWorker.js:272:16)
          at runTest (D:\work\AI\project-01-bookmemo\node_modules\jest-runner\build\testWorker.js:340:7)
          at Object.worker (D:\work\AI\project-01-bookmemo\node_modules\jest-runner\build\testWorker.js:494:12)

    [0m [90m 30 |[39m       [36mreturn[39m[33m;[39m
     [90m 31 |[39m     }
    [31m[1m>[22m[39m[90m 32 |[39m     originalError[33m.[39mcall(console[33m,[39m [33m...[39margs)[33m;[39m
     [90m    |[39m                   [31m[1m^[22m[39m
     [90m 33 |[39m   }[33m;[39m
     [90m 34 |[39m })[33m;[39m
     [90m 35 |[39m[0m

      at console.call [as error] (jest.setup.js:32:19)
      at error (src/hooks/useBook.js:64:15)
      at Object.updateBookStatus (src/hooks/useBook.js:71:12)
      at src/hooks/useBook.test.js:265:9

    console.log
      === useBook test: handles update error END ===

      at Object.log (src/hooks/useBook.test.js:270:13)

    console.log
      === useBook test: returns null when no user or bookId START ===

      at Object.log (src/hooks/useBook.test.js:274:13)

    console.log
      === useBook test: returns null when no user or bookId END ===

      at Object.log (src/hooks/useBook.test.js:284:13)

PASS src/utils/searchStorage.test.js
PASS src/hooks/useBookSearch.test.js
PASS src/components/BarcodeScanner.test.jsx (5.085 s)
PASS src/hooks/useBookActions.test.js
  ● Console

    console.error
      Error adding book: Error: Firestore error
          at Object.<anonymous> (D:\work\AI\project-01-bookmemo\src\hooks\useBookActions.test.js:208:25)
          at Promise.finally.completed (D:\work\AI\project-01-bookmemo\node_modules\jest-circus\build\jestAdapterInit.js:1559:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (D:\work\AI\project-01-bookmemo\node_modules\jest-circus\build\jestAdapterInit.js:1499:10)
          at _callCircusTest (D:\work\AI\project-01-bookmemo\node_modules\jest-circus\build\jestAdapterInit.js:1009:40)
          at _runTest (D:\work\AI\project-01-bookmemo\node_modules\jest-circus\build\jestAdapterInit.js:949:3)
          at _runTestsForDescribeBlock (D:\work\AI\project-01-bookmemo\node_modules\jest-circus\build\jestAdapterInit.js:839:13)
          at _runTestsForDescribeBlock (D:\work\AI\project-01-bookmemo\node_modules\jest-circus\build\jestAdapterInit.js:829:11)
          at _runTestsForDescribeBlock (D:\work\AI\project-01-bookmemo\node_modules\jest-circus\build\jestAdapterInit.js:829:11)
          at run (D:\work\AI\project-01-bookmemo\node_modules\jest-circus\build\jestAdapterInit.js:757:3)
          at runAndTransformResultsToJestFormat (D:\work\AI\project-01-bookmemo\node_modules\jest-circus\build\jestAdapterInit.js:1920:21)
          at jestAdapter (D:\work\AI\project-01-bookmemo\node_modules\jest-circus\build\runner.js:101:19)
          at runTestInternal (D:\work\AI\project-01-bookmemo\node_modules\jest-runner\build\testWorker.js:272:16)
          at runTest (D:\work\AI\project-01-bookmemo\node_modules\jest-runner\build\testWorker.js:340:7)
          at Object.worker (D:\work\AI\project-01-bookmemo\node_modules\jest-runner\build\testWorker.js:494:12)

    [0m [90m 30 |[39m       [36mreturn[39m[33m;[39m
     [90m 31 |[39m     }
    [31m[1m>[22m[39m[90m 32 |[39m     originalError[33m.[39mcall(console[33m,[39m [33m...[39margs)[33m;[39m
     [90m    |[39m                   [31m[1m^[22m[39m
     [90m 33 |[39m   }[33m;[39m
     [90m 34 |[39m })[33m;[39m
     [90m 35 |[39m[0m

      at console.call [as error] (jest.setup.js:32:19)
      at Object.error [as addBook] (src/hooks/useBookActions.js:82:15)
      at src/hooks/useBookActions.test.js:217:11

    console.error
      Error adding book: Error: Test error
          at Object.<anonymous> (D:\work\AI\project-01-bookmemo\src\hooks\useBookActions.test.js:256:25)
          at Promise.finally.completed (D:\work\AI\project-01-bookmemo\node_modules\jest-circus\build\jestAdapterInit.js:1559:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (D:\work\AI\project-01-bookmemo\node_modules\jest-circus\build\jestAdapterInit.js:1499:10)
          at _callCircusTest (D:\work\AI\project-01-bookmemo\node_modules\jest-circus\build\jestAdapterInit.js:1009:40)
          at _runTest (D:\work\AI\project-01-bookmemo\node_modules\jest-circus\build\jestAdapterInit.js:949:3)
          at _runTestsForDescribeBlock (D:\work\AI\project-01-bookmemo\node_modules\jest-circus\build\jestAdapterInit.js:839:13)
          at _runTestsForDescribeBlock (D:\work\AI\project-01-bookmemo\node_modules\jest-circus\build\jestAdapterInit.js:829:11)
          at _runTestsForDescribeBlock (D:\work\AI\project-01-bookmemo\node_modules\jest-circus\build\jestAdapterInit.js:829:11)
          at run (D:\work\AI\project-01-bookmemo\node_modules\jest-circus\build\jestAdapterInit.js:757:3)
          at runAndTransformResultsToJestFormat (D:\work\AI\project-01-bookmemo\node_modules\jest-circus\build\jestAdapterInit.js:1920:21)
          at jestAdapter (D:\work\AI\project-01-bookmemo\node_modules\jest-circus\build\runner.js:101:19)
          at runTestInternal (D:\work\AI\project-01-bookmemo\node_modules\jest-runner\build\testWorker.js:272:16)
          at runTest (D:\work\AI\project-01-bookmemo\node_modules\jest-runner\build\testWorker.js:340:7)
          at Object.worker (D:\work\AI\project-01-bookmemo\node_modules\jest-runner\build\testWorker.js:494:12)

    [0m [90m 30 |[39m       [36mreturn[39m[33m;[39m
     [90m 31 |[39m     }
    [31m[1m>[22m[39m[90m 32 |[39m     originalError[33m.[39mcall(console[33m,[39m [33m...[39margs)[33m;[39m
     [90m    |[39m                   [31m[1m^[22m[39m
     [90m 33 |[39m   }[33m;[39m
     [90m 34 |[39m })[33m;[39m
     [90m 35 |[39m[0m

      at console.call [as error] (jest.setup.js:32:19)
      at Object.error [as addBook] (src/hooks/useBookActions.js:82:15)
      at src/hooks/useBookActions.test.js:265:11

    console.error
      Error adding book: Error: Tag history error
          at Object.<anonymous> (D:\work\AI\project-01-bookmemo\src\hooks\useBookActions.test.js:286:47)
          at Promise.finally.completed (D:\work\AI\project-01-bookmemo\node_modules\jest-circus\build\jestAdapterInit.js:1559:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (D:\work\AI\project-01-bookmemo\node_modules\jest-circus\build\jestAdapterInit.js:1499:10)
          at _callCircusTest (D:\work\AI\project-01-bookmemo\node_modules\jest-circus\build\jestAdapterInit.js:1009:40)
          at _runTest (D:\work\AI\project-01-bookmemo\node_modules\jest-circus\build\jestAdapterInit.js:949:3)
          at _runTestsForDescribeBlock (D:\work\AI\project-01-bookmemo\node_modules\jest-circus\build\jestAdapterInit.js:839:13)
          at _runTestsForDescribeBlock (D:\work\AI\project-01-bookmemo\node_modules\jest-circus\build\jestAdapterInit.js:829:11)
          at _runTestsForDescribeBlock (D:\work\AI\project-01-bookmemo\node_modules\jest-circus\build\jestAdapterInit.js:829:11)
          at run (D:\work\AI\project-01-bookmemo\node_modules\jest-circus\build\jestAdapterInit.js:757:3)
          at runAndTransformResultsToJestFormat (D:\work\AI\project-01-bookmemo\node_modules\jest-circus\build\jestAdapterInit.js:1920:21)
          at jestAdapter (D:\work\AI\project-01-bookmemo\node_modules\jest-circus\build\runner.js:101:19)
          at runTestInternal (D:\work\AI\project-01-bookmemo\node_modules\jest-runner\build\testWorker.js:272:16)
          at runTest (D:\work\AI\project-01-bookmemo\node_modules\jest-runner\build\testWorker.js:340:7)
          at Object.worker (D:\work\AI\project-01-bookmemo\node_modules\jest-runner\build\testWorker.js:494:12)

    [0m [90m 30 |[39m       [36mreturn[39m[33m;[39m
     [90m 31 |[39m     }
    [31m[1m>[22m[39m[90m 32 |[39m     originalError[33m.[39mcall(console[33m,[39m [33m...[39margs)[33m;[39m
     [90m    |[39m                   [31m[1m^[22m[39m
     [90m 33 |[39m   }[33m;[39m
     [90m 34 |[39m })[33m;[39m
     [90m 35 |[39m[0m

      at console.call [as error] (jest.setup.js:32:19)
      at Object.error [as addBook] (src/hooks/useBookActions.js:82:15)
      at src/hooks/useBookActions.test.js:295:11

    console.error
      Error adding initial status history: Error: History error
          at Object.<anonymous> (D:\work\AI\project-01-bookmemo\src\hooks\useBookActions.test.js:310:32)
          at Promise.finally.completed (D:\work\AI\project-01-bookmemo\node_modules\jest-circus\build\jestAdapterInit.js:1559:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (D:\work\AI\project-01-bookmemo\node_modules\jest-circus\build\jestAdapterInit.js:1499:10)
          at _callCircusTest (D:\work\AI\project-01-bookmemo\node_modules\jest-circus\build\jestAdapterInit.js:1009:40)
          at _runTest (D:\work\AI\project-01-bookmemo\node_modules\jest-circus\build\jestAdapterInit.js:949:3)
          at _runTestsForDescribeBlock (D:\work\AI\project-01-bookmemo\node_modules\jest-circus\build\jestAdapterInit.js:839:13)
          at _runTestsForDescribeBlock (D:\work\AI\project-01-bookmemo\node_modules\jest-circus\build\jestAdapterInit.js:829:11)
          at _runTestsForDescribeBlock (D:\work\AI\project-01-bookmemo\node_modules\jest-circus\build\jestAdapterInit.js:829:11)
          at run (D:\work\AI\project-01-bookmemo\node_modules\jest-circus\build\jestAdapterInit.js:757:3)
          at runAndTransformResultsToJestFormat (D:\work\AI\project-01-bookmemo\node_modules\jest-circus\build\jestAdapterInit.js:1920:21)
          at jestAdapter (D:\work\AI\project-01-bookmemo\node_modules\jest-circus\build\runner.js:101:19)
          at runTestInternal (D:\work\AI\project-01-bookmemo\node_modules\jest-runner\build\testWorker.js:272:16)
          at runTest (D:\work\AI\project-01-bookmemo\node_modules\jest-runner\build\testWorker.js:340:7)
          at Object.worker (D:\work\AI\project-01-bookmemo\node_modules\jest-runner\build\testWorker.js:494:12)

    [0m [90m 30 |[39m       [36mreturn[39m[33m;[39m
     [90m 31 |[39m     }
    [31m[1m>[22m[39m[90m 32 |[39m     originalError[33m.[39mcall(console[33m,[39m [33m...[39margs)[33m;[39m
     [90m    |[39m                   [31m[1m^[22m[39m
     [90m 33 |[39m   }[33m;[39m
     [90m 34 |[39m })[33m;[39m
     [90m 35 |[39m[0m

      at console.call [as error] (jest.setup.js:32:19)
      at Object.error [as addBook] (src/hooks/useBookActions.js:75:19)
      at src/hooks/useBookActions.test.js:321:18

PASS src/hooks/useBookStatusManager.test.js
  ● Console

    console.info
      ℹ️ 📊 STATUS [2025-10-25T10:35:36.428Z] Manual history added successfully

      at info (src/utils/logger.js:123:15)

    console.info
      ℹ️ 📊 STATUS [2025-10-25T10:35:36.448Z] Manual history added successfully

      at info (src/utils/logger.js:123:15)

    console.info
      ℹ️ 📊 STATUS [2025-10-25T10:35:36.453Z] Manual history added successfully

      at info (src/utils/logger.js:123:15)

    console.info
      ℹ️ 📊 STATUS [2025-10-25T10:35:36.468Z] Manual history added successfully

      at info (src/utils/logger.js:123:15)

    console.error
      ❌ 📊 STATUS [2025-10-25T10:35:36.473Z] Failed to add manual history
        Data: {}

    [0m [90m 30 |[39m       [36mreturn[39m[33m;[39m
     [90m 31 |[39m     }
    [31m[1m>[22m[39m[90m 32 |[39m     originalError[33m.[39mcall(console[33m,[39m [33m...[39margs)[33m;[39m
     [90m    |[39m                   [31m[1m^[22m[39m
     [90m 33 |[39m   }[33m;[39m
     [90m 34 |[39m })[33m;[39m
     [90m 35 |[39m[0m

      at console.call [as error] (jest.setup.js:32:19)
      at error (src/utils/logger.js:117:15)
      at Object.log [as error] (src/utils/logger.js:138:39)
      at Object.error (src/utils/logger.js:172:38)
      at Object.error [as handleAddManualHistory] (src/hooks/useBookStatusManager.js:47:21)
      at src/hooks/useBookStatusManager.test.js:121:9

    console.info
      ℹ️ 📊 STATUS [2025-10-25T10:35:36.487Z] Manual history added successfully

      at info (src/utils/logger.js:123:15)

PASS src/hooks/useSearchCache.test.js
  ● Console

    console.log
      🔍 キャッシュ検索: { searchText: 'test', key: 'test', cacheKeys: [] }

      at Object.log [as getCached] (src/hooks/useSearchCache.js:50:13)

    console.log
      ❌ キャッシュミス: test

      at Object.log [as getCached] (src/hooks/useSearchCache.js:54:15)

    console.log
      💾 キャッシュ保存: { searchText: 'テスト', key: 'テスト', resultsCount: 1 }

      at Object.log [as setCached] (src/hooks/useSearchCache.js:79:13)

    console.log
      ✅ キャッシュ保存成功: { key: 'テスト', cacheSize: 1 }

      at Object.log [as setCached] (src/hooks/useSearchCache.js:102:15)

    console.log
      🔍 キャッシュ検索: { searchText: 'テスト', key: 'テスト', cacheKeys: [ 'テスト' ] }

      at Object.log [as getCached] (src/hooks/useSearchCache.js:50:13)

    console.log
      ✅ キャッシュヒット: テスト

      at Object.log [as getCached] (src/hooks/useSearchCache.js:66:13)

    console.log
      💾 キャッシュ保存: { searchText: '  テスト  ', key: 'テスト', resultsCount: 1 }

      at Object.log [as setCached] (src/hooks/useSearchCache.js:79:13)

    console.log
      ✅ キャッシュ保存成功: { key: 'テスト', cacheSize: 1 }

      at Object.log [as setCached] (src/hooks/useSearchCache.js:102:15)

    console.log
      🔍 キャッシュ検索: { searchText: 'テスト', key: 'テスト', cacheKeys: [ 'テスト' ] }

      at Object.log [as getCached] (src/hooks/useSearchCache.js:50:13)

    console.log
      ✅ キャッシュヒット: テスト

      at Object.log [as getCached] (src/hooks/useSearchCache.js:66:13)

    console.log
      🔍 キャッシュ検索: { searchText: '  テスト', key: 'テスト', cacheKeys: [ 'テスト' ] }

      at Object.log [as getCached] (src/hooks/useSearchCache.js:50:13)

    console.log
      ✅ キャッシュヒット: テスト

      at Object.log [as getCached] (src/hooks/useSearchCache.js:66:13)

    console.log
      🔍 キャッシュ検索: { searchText: 'テスト  ', key: 'テスト', cacheKeys: [ 'テスト' ] }

      at Object.log [as getCached] (src/hooks/useSearchCache.js:50:13)

    console.log
      ✅ キャッシュヒット: テスト

      at Object.log [as getCached] (src/hooks/useSearchCache.js:66:13)

    console.log
      🔍 キャッシュ検索: { searchText: 'テスト', key: 'テスト', cacheKeys: [ 'てすと' ] }

      at Object.log [as getCached] (src/hooks/useSearchCache.js:50:13)

    console.log
      ❌ キャッシュミス: テスト

      at Object.log [as getCached] (src/hooks/useSearchCache.js:54:15)

    console.log
      🔍 キャッシュ検索: { searchText: 'テスト', key: 'テスト', cacheKeys: [ 'テスト' ] }

      at Object.log [as getCached] (src/hooks/useSearchCache.js:50:13)

    console.log
      ✅ キャッシュヒット: テスト

      at Object.log [as getCached] (src/hooks/useSearchCache.js:66:13)

    console.log
      💾 キャッシュ保存: { searchText: '検索1', key: '検索1', resultsCount: 1 }

      at Object.log [as setCached] (src/hooks/useSearchCache.js:79:13)

    console.log
      ✅ キャッシュ保存成功: { key: '検索1', cacheSize: 1 }

      at Object.log [as setCached] (src/hooks/useSearchCache.js:102:15)

    console.warn
      A function to advance timers was called but the timers APIs are not replaced with fake timers. Call `jest.useFakeTimers()` in this test file or enable fake timers for all tests by setting 'fakeTimers': {'enableGlobally': true} in Jest configuration file.
      Stack Trace:
      
          [0m [90m 123 |[39m     
           [90m 124 |[39m     [90m// 少し時間を空ける[39m
          [31m[1m>[22m[39m[90m 125 |[39m     jest[33m.[39madvanceTimersByTime([35m100[39m)[33m;[39m
           [90m     |[39m          [31m[1m^[22m[39m
           [90m 126 |[39m     
           [90m 127 |[39m     act(() [33m=>[39m {
           [90m 128 |[39m       result[33m.[39mcurrent[33m.[39msetCached([32m'検索2'[39m[33m,[39m results2)[33m;[39m[0m
      
            Error: 
            at FakeTimers._checkFakeTimers (node_modules/@jest/fake-timers/build/index.js:641:7)
            at FakeTimers.advanceTimersByTime (node_modules/@jest/fake-timers/build/index.js:575:14)
            at Object.advanceTimersByTime (src/hooks/useSearchCache.test.js:125:10)

    [0m [90m 123 |[39m     
     [90m 124 |[39m     [90m// 少し時間を空ける[39m
    [31m[1m>[22m[39m[90m 125 |[39m     jest[33m.[39madvanceTimersByTime([35m100[39m)[33m;[39m
     [90m     |[39m          [31m[1m^[22m[39m
     [90m 126 |[39m     
     [90m 127 |[39m     act(() [33m=>[39m {
     [90m 128 |[39m       result[33m.[39mcurrent[33m.[39msetCached([32m'検索2'[39m[33m,[39m results2)[33m;[39m[0m

      at FakeTimers._checkFakeTimers (node_modules/@jest/fake-timers/build/index.js:639:28)
      at FakeTimers.advanceTimersByTime (node_modules/@jest/fake-timers/build/index.js:575:14)
      at Object.advanceTimersByTime (src/hooks/useSearchCache.test.js:125:10)

    console.log
      💾 キャッシュ保存: { searchText: '検索2', key: '検索2', resultsCount: 1 }

      at Object.log [as setCached] (src/hooks/useSearchCache.js:79:13)

    console.log
      ✅ キャッシュ保存成功: { key: '検索2', cacheSize: 2 }

      at Object.log [as setCached] (src/hooks/useSearchCache.js:102:15)

    console.log
      🔍 キャッシュ検索: { searchText: '検索1', key: '検索1', cacheKeys: [ '検索1', '検索2' ] }

      at Object.log [as getCached] (src/hooks/useSearchCache.js:50:13)

    console.log
      ✅ キャッシュヒット: 検索1

      at Object.log [as getCached] (src/hooks/useSearchCache.js:66:13)

    console.log
      🔍 キャッシュ検索: { searchText: '検索2', key: '検索2', cacheKeys: [ '検索1', '検索2' ] }

      at Object.log [as getCached] (src/hooks/useSearchCache.js:50:13)

    console.log
      ✅ キャッシュヒット: 検索2

      at Object.log [as getCached] (src/hooks/useSearchCache.js:66:13)

    console.log
      💾 キャッシュ保存: { searchText: 'テスト', key: 'テスト', resultsCount: 1 }

      at Object.log [as setCached] (src/hooks/useSearchCache.js:79:13)

    console.log
      ✅ キャッシュ保存成功: { key: 'テスト', cacheSize: 1 }

      at Object.log [as setCached] (src/hooks/useSearchCache.js:102:15)

    console.log
      🔍 キャッシュ検索: { searchText: 'テスト', key: 'テスト', cacheKeys: [ 'テスト' ] }

      at Object.log [as getCached] (src/hooks/useSearchCache.js:50:13)

    console.log
      ✅ キャッシュヒット: テスト

      at Object.log [as getCached] (src/hooks/useSearchCache.js:66:13)

    console.log
      🔍 キャッシュ検索: { searchText: 'テスト', key: 'テスト', cacheKeys: [] }

      at Object.log [as getCached] (src/hooks/useSearchCache.js:50:13)

    console.log
      ❌ キャッシュミス: テスト

      at Object.log [as getCached] (src/hooks/useSearchCache.js:54:15)

    console.log
      💾 キャッシュ保存: { searchText: '検索1', key: '検索1', resultsCount: 1 }

      at Object.log [as setCached] (src/hooks/useSearchCache.js:79:13)

    console.log
      ✅ キャッシュ保存成功: { key: '検索1', cacheSize: 1 }

      at Object.log [as setCached] (src/hooks/useSearchCache.js:102:15)

    console.log
      💾 キャッシュ保存: { searchText: '検索2', key: '検索2', resultsCount: 1 }

      at Object.log [as setCached] (src/hooks/useSearchCache.js:79:13)

    console.log
      ✅ キャッシュ保存成功: { key: '検索2', cacheSize: 2 }

      at Object.log [as setCached] (src/hooks/useSearchCache.js:102:15)

    console.log
      💾 キャッシュ保存: { searchText: 'テスト', key: 'テスト', resultsCount: 1 }

      at Object.log [as setCached] (src/hooks/useSearchCache.js:79:13)

    console.error
      キャッシュの保存に失敗しました: Error: Storage full
          at Object.<anonymous> (D:\work\AI\project-01-bookmemo\src\hooks\useSearchCache.test.js:181:13)
          at D:\work\AI\project-01-bookmemo\node_modules\jest-mock\build\index.js:305:39
          at Object.<anonymous> (D:\work\AI\project-01-bookmemo\node_modules\jest-mock\build\index.js:312:13)
          at Object.mockConstructor [as setItem] (D:\work\AI\project-01-bookmemo\node_modules\jest-mock\build\index.js:102:19)
          at Object.setItem [as setCached] (D:\work\AI\project-01-bookmemo\src\hooks\useSearchCache.js:101:20)
          at setCached (D:\work\AI\project-01-bookmemo\src\hooks\useSearchCache.test.js:187:24)
          at D:\work\AI\project-01-bookmemo\node_modules\@testing-library\react\dist\act-compat.js:48:24
          at process.env.NODE_ENV.exports.act (D:\work\AI\project-01-bookmemo\node_modules\react\cjs\react.development.js:789:22)
          at D:\work\AI\project-01-bookmemo\node_modules\@testing-library\react\dist\act-compat.js:47:25
          at D:\work\AI\project-01-bookmemo\src\hooks\useSearchCache.test.js:186:10
          at Object.<anonymous> (D:\work\AI\project-01-bookmemo\node_modules\expect\build\index.js:1824:9)
          at Object.throwingMatcher [as toThrow] (D:\work\AI\project-01-bookmemo\node_modules\expect\build\index.js:2232:93)
          at Object.toThrow (D:\work\AI\project-01-bookmemo\src\hooks\useSearchCache.test.js:189:12)
          at Promise.finally.completed (D:\work\AI\project-01-bookmemo\node_modules\jest-circus\build\jestAdapterInit.js:1559:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (D:\work\AI\project-01-bookmemo\node_modules\jest-circus\build\jestAdapterInit.js:1499:10)
          at _callCircusTest (D:\work\AI\project-01-bookmemo\node_modules\jest-circus\build\jestAdapterInit.js:1009:40)
          at processTicksAndRejections (node:internal/process/task_queues:105:5)
          at _runTest (D:\work\AI\project-01-bookmemo\node_modules\jest-circus\build\jestAdapterInit.js:949:3)
          at _runTestsForDescribeBlock (D:\work\AI\project-01-bookmemo\node_modules\jest-circus\build\jestAdapterInit.js:839:13)
          at _runTestsForDescribeBlock (D:\work\AI\project-01-bookmemo\node_modules\jest-circus\build\jestAdapterInit.js:829:11)
          at run (D:\work\AI\project-01-bookmemo\node_modules\jest-circus\build\jestAdapterInit.js:757:3)
          at runAndTransformResultsToJestFormat (D:\work\AI\project-01-bookmemo\node_modules\jest-circus\build\jestAdapterInit.js:1920:21)
          at jestAdapter (D:\work\AI\project-01-bookmemo\node_modules\jest-circus\build\runner.js:101:19)
          at runTestInternal (D:\work\AI\project-01-bookmemo\node_modules\jest-runner\build\testWorker.js:272:16)
          at runTest (D:\work\AI\project-01-bookmemo\node_modules\jest-runner\build\testWorker.js:340:7)
          at Object.worker (D:\work\AI\project-01-bookmemo\node_modules\jest-runner\build\testWorker.js:494:12)

    [0m [90m 30 |[39m       [36mreturn[39m[33m;[39m
     [90m 31 |[39m     }
    [31m[1m>[22m[39m[90m 32 |[39m     originalError[33m.[39mcall(console[33m,[39m [33m...[39margs)[33m;[39m
     [90m    |[39m                   [31m[1m^[22m[39m
     [90m 33 |[39m   }[33m;[39m
     [90m 34 |[39m })[33m;[39m
     [90m 35 |[39m[0m

      at console.call [as error] (jest.setup.js:32:19)
      at Object.error [as setCached] (src/hooks/useSearchCache.js:104:15)
      at setCached (src/hooks/useSearchCache.test.js:187:24)
      at node_modules/@testing-library/react/dist/act-compat.js:48:24
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:789:22)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at src/hooks/useSearchCache.test.js:186:10
      at Object.<anonymous> (node_modules/expect/build/index.js:1824:9)
      at Object.throwingMatcher [as toThrow] (node_modules/expect/build/index.js:2232:93)
      at Object.toThrow (src/hooks/useSearchCache.test.js:189:12)

    console.error
      キャッシュの読み込みに失敗しました: SyntaxError: Expected property name or '}' in JSON at position 1 (line 1 column 2)
          at JSON.parse (<anonymous>)
          at parse (D:\work\AI\project-01-bookmemo\src\hooks\useSearchCache.js:25:28)
          at mountStateImpl (D:\work\AI\project-01-bookmemo\node_modules\react-dom\cjs\react-dom-client.development.js:6130:24)
          at mountState (D:\work\AI\project-01-bookmemo\node_modules\react-dom\cjs\react-dom-client.development.js:6151:22)
          at Object.useState (D:\work\AI\project-01-bookmemo\node_modules\react-dom\cjs\react-dom-client.development.js:22951:18)
          at process.env.NODE_ENV.exports.useState (D:\work\AI\project-01-bookmemo\node_modules\react\cjs\react.development.js:1221:34)
          at useSearchCache (D:\work\AI\project-01-bookmemo\src\hooks\useSearchCache.js:32:37)
          at D:\work\AI\project-01-bookmemo\src\hooks\useSearchCache.test.js:201:38
          at TestComponent (D:\work\AI\project-01-bookmemo\node_modules\@testing-library\react\dist\pure.js:331:27)
          at Object.react-stack-bottom-frame (D:\work\AI\project-01-bookmemo\node_modules\react-dom\cjs\react-dom-client.development.js:23863:20)
          at renderWithHooks (D:\work\AI\project-01-bookmemo\node_modules\react-dom\cjs\react-dom-client.development.js:5529:22)
          at updateFunctionComponent (D:\work\AI\project-01-bookmemo\node_modules\react-dom\cjs\react-dom-client.development.js:8897:19)
          at beginWork (D:\work\AI\project-01-bookmemo\node_modules\react-dom\cjs\react-dom-client.development.js:10522:18)
          at runWithFiberInDEV (D:\work\AI\project-01-bookmemo\node_modules\react-dom\cjs\react-dom-client.development.js:1522:13)
          at performUnitOfWork (D:\work\AI\project-01-bookmemo\node_modules\react-dom\cjs\react-dom-client.development.js:15140:22)
          at workLoopSync (D:\work\AI\project-01-bookmemo\node_modules\react-dom\cjs\react-dom-client.development.js:14956:41)
          at renderRootSync (D:\work\AI\project-01-bookmemo\node_modules\react-dom\cjs\react-dom-client.development.js:14936:11)
          at performWorkOnRoot (D:\work\AI\project-01-bookmemo\node_modules\react-dom\cjs\react-dom-client.development.js:14419:13)
          at performWorkOnRootViaSchedulerTask (D:\work\AI\project-01-bookmemo\node_modules\react-dom\cjs\react-dom-client.development.js:16216:7)
          at flushActQueue (D:\work\AI\project-01-bookmemo\node_modules\react\cjs\react.development.js:566:34)
          at process.env.NODE_ENV.exports.act (D:\work\AI\project-01-bookmemo\node_modules\react\cjs\react.development.js:859:10)
          at D:\work\AI\project-01-bookmemo\node_modules\@testing-library\react\dist\act-compat.js:47:25
          at renderRoot (D:\work\AI\project-01-bookmemo\node_modules\@testing-library\react\dist\pure.js:190:26)
          at render (D:\work\AI\project-01-bookmemo\node_modules\@testing-library\react\dist\pure.js:292:10)
          at renderHook (D:\work\AI\project-01-bookmemo\node_modules\@testing-library\react\dist\pure.js:340:7)
          at D:\work\AI\project-01-bookmemo\src\hooks\useSearchCache.test.js:201:17
          at Object.<anonymous> (D:\work\AI\project-01-bookmemo\node_modules\expect\build\index.js:1824:9)
          at Object.throwingMatcher [as toThrow] (D:\work\AI\project-01-bookmemo\node_modules\expect\build\index.js:2232:93)
          at Object.toThrow (D:\work\AI\project-01-bookmemo\src\hooks\useSearchCache.test.js:202:12)
          at Promise.finally.completed (D:\work\AI\project-01-bookmemo\node_modules\jest-circus\build\jestAdapterInit.js:1559:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (D:\work\AI\project-01-bookmemo\node_modules\jest-circus\build\jestAdapterInit.js:1499:10)
          at _callCircusTest (D:\work\AI\project-01-bookmemo\node_modules\jest-circus\build\jestAdapterInit.js:1009:40)
          at processTicksAndRejections (node:internal/process/task_queues:105:5)
          at _runTest (D:\work\AI\project-01-bookmemo\node_modules\jest-circus\build\jestAdapterInit.js:949:3)
          at _runTestsForDescribeBlock (D:\work\AI\project-01-bookmemo\node_modules\jest-circus\build\jestAdapterInit.js:839:13)
          at _runTestsForDescribeBlock (D:\work\AI\project-01-bookmemo\node_modules\jest-circus\build\jestAdapterInit.js:829:11)
          at run (D:\work\AI\project-01-bookmemo\node_modules\jest-circus\build\jestAdapterInit.js:757:3)
          at runAndTransformResultsToJestFormat (D:\work\AI\project-01-bookmemo\node_modules\jest-circus\build\jestAdapterInit.js:1920:21)
          at jestAdapter (D:\work\AI\project-01-bookmemo\node_modules\jest-circus\build\runner.js:101:19)
          at runTestInternal (D:\work\AI\project-01-bookmemo\node_modules\jest-runner\build\testWorker.js:272:16)
          at runTest (D:\work\AI\project-01-bookmemo\node_modules\jest-runner\build\testWorker.js:340:7)
          at Object.worker (D:\work\AI\project-01-bookmemo\node_modules\jest-runner\build\testWorker.js:494:12)

    [0m [90m 30 |[39m       [36mreturn[39m[33m;[39m
     [90m 31 |[39m     }
    [31m[1m>[22m[39m[90m 32 |[39m     originalError[33m.[39mcall(console[33m,[39m [33m...[39margs)[33m;[39m
     [90m    |[39m                   [31m[1m^[22m[39m
     [90m 33 |[39m   }[33m;[39m
     [90m 34 |[39m })[33m;[39m
     [90m 35 |[39m[0m

      at console.call [as error] (jest.setup.js:32:19)
      at error (src/hooks/useSearchCache.js:27:15)
      at mountStateImpl (node_modules/react-dom/cjs/react-dom-client.development.js:6130:24)
      at mountState (node_modules/react-dom/cjs/react-dom-client.development.js:6151:22)
      at Object.useState (node_modules/react-dom/cjs/react-dom-client.development.js:22951:18)
      at process.env.NODE_ENV.exports.useState (node_modules/react/cjs/react.development.js:1221:34)
      at useSearchCache (src/hooks/useSearchCache.js:32:37)
      at src/hooks/useSearchCache.test.js:201:38
      at TestComponent (node_modules/@testing-library/react/dist/pure.js:331:27)
      at Object.react-stack-bottom-frame (node_modules/react-dom/cjs/react-dom-client.development.js:23863:20)
      at renderWithHooks (node_modules/react-dom/cjs/react-dom-client.development.js:5529:22)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:8897:19)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14419:13)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:859:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at renderHook (node_modules/@testing-library/react/dist/pure.js:340:7)
      at src/hooks/useSearchCache.test.js:201:17
      at Object.<anonymous> (node_modules/expect/build/index.js:1824:9)
      at Object.throwingMatcher [as toThrow] (node_modules/expect/build/index.js:2232:93)
      at Object.toThrow (src/hooks/useSearchCache.test.js:202:12)

PASS src/hooks/useFullTextSearch.test.js
  ● Console

    console.log
      🎯 キャッシュヒット: テスト

      at Object.log [as handleSearch] (src/hooks/useFullTextSearch.js:72:15)

    console.log
      🔍 Firebase検索実行: テスト

      at Object.log [as handleSearch] (src/hooks/useFullTextSearch.js:86:15)

    console.log
      🔍 Firebase検索実行: テスト

      at Object.log [as handleSearch] (src/hooks/useFullTextSearch.js:86:15)

    console.error
      検索エラー: Error: Firestore error
          at Object.<anonymous> (D:\work\AI\project-01-bookmemo\src\hooks\useFullTextSearch.test.js:169:41)
          at Promise.finally.completed (D:\work\AI\project-01-bookmemo\node_modules\jest-circus\build\jestAdapterInit.js:1559:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (D:\work\AI\project-01-bookmemo\node_modules\jest-circus\build\jestAdapterInit.js:1499:10)
          at _callCircusTest (D:\work\AI\project-01-bookmemo\node_modules\jest-circus\build\jestAdapterInit.js:1009:40)
          at _runTest (D:\work\AI\project-01-bookmemo\node_modules\jest-circus\build\jestAdapterInit.js:949:3)
          at _runTestsForDescribeBlock (D:\work\AI\project-01-bookmemo\node_modules\jest-circus\build\jestAdapterInit.js:839:13)
          at _runTestsForDescribeBlock (D:\work\AI\project-01-bookmemo\node_modules\jest-circus\build\jestAdapterInit.js:829:11)
          at run (D:\work\AI\project-01-bookmemo\node_modules\jest-circus\build\jestAdapterInit.js:757:3)
          at runAndTransformResultsToJestFormat (D:\work\AI\project-01-bookmemo\node_modules\jest-circus\build\jestAdapterInit.js:1920:21)
          at jestAdapter (D:\work\AI\project-01-bookmemo\node_modules\jest-circus\build\runner.js:101:19)
          at runTestInternal (D:\work\AI\project-01-bookmemo\node_modules\jest-runner\build\testWorker.js:272:16)
          at runTest (D:\work\AI\project-01-bookmemo\node_modules\jest-runner\build\testWorker.js:340:7)
          at Object.worker (D:\work\AI\project-01-bookmemo\node_modules\jest-runner\build\testWorker.js:494:12)

    [0m [90m 30 |[39m       [36mreturn[39m[33m;[39m
     [90m 31 |[39m     }
    [31m[1m>[22m[39m[90m 32 |[39m     originalError[33m.[39mcall(console[33m,[39m [33m...[39margs)[33m;[39m
     [90m    |[39m                   [31m[1m^[22m[39m
     [90m 33 |[39m   }[33m;[39m
     [90m 34 |[39m })[33m;[39m
     [90m 35 |[39m[0m

      at console.call [as error] (jest.setup.js:32:19)
      at Object.error [as handleSearch] (src/hooks/useFullTextSearch.js:104:15)
      at src/hooks/useFullTextSearch.test.js:178:7

PASS src/hooks/useSearchRateLimit.test.js
PASS src/hooks/useTagHistory.test.js
PASS src/config/fullTextSearchConfig.test.js
PASS src/hooks/useBookStatusHistory.test.js
  ● Console

    console.log
      🐛 📊 STATUS [2025-10-25T10:35:36.425Z] Setting up listener for bookId
        Data: {
        "bookId": "test-book-id"
      }

      at log (src/utils/logger.js:126:15)

    console.log
      🐛 📊 STATUS [2025-10-25T10:35:36.444Z] Snapshot received
        Data: {
        "size": 0,
        "empty": true,
        "bookId": "test-book-id"
      }

      at log (src/utils/logger.js:126:15)

    console.log
      🐛 📊 STATUS [2025-10-25T10:35:36.453Z] No user or bookId
        Data: {
        "user": false,
        "bookId": "test-book-id"
      }

      at log (src/utils/logger.js:126:15)

    console.log
      🐛 📊 STATUS [2025-10-25T10:35:36.458Z] No user or bookId
        Data: {
        "user": true,
        "bookId": null
      }

      at log (src/utils/logger.js:126:15)

    console.log
      🐛 📊 STATUS [2025-10-25T10:35:36.467Z] Setting up listener for bookId
        Data: {
        "bookId": "test-book-id"
      }

      at log (src/utils/logger.js:126:15)

    console.log
      🐛 📊 STATUS [2025-10-25T10:35:36.469Z] Snapshot received
        Data: {
        "size": 0,
        "empty": true,
        "bookId": "test-book-id"
      }

      at log (src/utils/logger.js:126:15)

    console.log
      🐛 📊 STATUS [2025-10-25T10:35:36.482Z] Setting up listener for bookId
        Data: {
        "bookId": "test-book-id"
      }

      at log (src/utils/logger.js:126:15)

    console.log
      🐛 📊 STATUS [2025-10-25T10:35:36.484Z] Snapshot received
        Data: {
        "size": 0,
        "empty": true,
        "bookId": "test-book-id"
      }

      at log (src/utils/logger.js:126:15)

    console.error
      ❌ 📊 STATUS [2025-10-25T10:35:36.487Z] Error adding status history
        Data: {}

    [0m [90m 30 |[39m       [36mreturn[39m[33m;[39m
     [90m 31 |[39m     }
    [31m[1m>[22m[39m[90m 32 |[39m     originalError[33m.[39mcall(console[33m,[39m [33m...[39margs)[33m;[39m
     [90m    |[39m                   [31m[1m^[22m[39m
     [90m 33 |[39m   }[33m;[39m
     [90m 34 |[39m })[33m;[39m
     [90m 35 |[39m[0m

      at console.call [as error] (jest.setup.js:32:19)
      at error (src/utils/logger.js:117:15)
      at Object.log [as error] (src/utils/logger.js:138:39)
      at Object.error (src/utils/logger.js:172:38)
      at Object.error [as addStatusHistory] (src/hooks/useBookStatusHistory.js:127:21)
      at src/hooks/useBookStatusHistory.test.js:141:11

    console.log
      🐛 📊 STATUS [2025-10-25T10:35:36.502Z] Setting up listener for bookId
        Data: {
        "bookId": "test-book-id"
      }

      at log (src/utils/logger.js:126:15)

    console.log
      🐛 📊 STATUS [2025-10-25T10:35:36.504Z] Snapshot received
        Data: {
        "size": 0,
        "empty": true,
        "bookId": "test-book-id"
      }

      at log (src/utils/logger.js:126:15)

    console.log
      🐛 📊 STATUS [2025-10-25T10:35:36.546Z] Setting up listener for bookId
        Data: {
        "bookId": "test-book-id"
      }

      at log (src/utils/logger.js:126:15)

    console.log
      🐛 📊 STATUS [2025-10-25T10:35:36.548Z] Snapshot received
        Data: {
        "size": 0,
        "empty": true,
        "bookId": "test-book-id"
      }

      at log (src/utils/logger.js:126:15)

    console.log
      🐛 📊 STATUS [2025-10-25T10:35:36.553Z] Setting up listener for bookId
        Data: {
        "bookId": "test-book-id"
      }

      at log (src/utils/logger.js:126:15)

    console.log
      🐛 📊 STATUS [2025-10-25T10:35:36.555Z] Snapshot received
        Data: {
        "size": 0,
        "empty": true,
        "bookId": "test-book-id"
      }

      at log (src/utils/logger.js:126:15)

    console.log
      🐛 📊 STATUS [2025-10-25T10:35:36.561Z] Setting up listener for bookId
        Data: {
        "bookId": "test-book-id"
      }

      at log (src/utils/logger.js:126:15)

    console.log
      🐛 📊 STATUS [2025-10-25T10:35:36.563Z] Snapshot received
        Data: {
        "size": 0,
        "empty": true,
        "bookId": "test-book-id"
      }

      at log (src/utils/logger.js:126:15)

    console.info
      ℹ️ 📊 STATUS [2025-10-25T10:35:36.566Z] Adding manual status history
        Data: {
        "bookId": "test-book-id",
        "date": "2025-12-31T12:00:00.000Z",
        "status": "finished",
        "previousStatus": "reading",
        "userId": "test-user-id"
      }

      at info (src/utils/logger.js:123:15)

    console.info
      ℹ️ 📊 STATUS [2025-10-25T10:35:36.567Z] Manual status history added successfully

      at info (src/utils/logger.js:123:15)

    console.log
      🐛 📊 STATUS [2025-10-25T10:35:36.573Z] Setting up listener for bookId
        Data: {
        "bookId": "test-book-id"
      }

      at log (src/utils/logger.js:126:15)

    console.log
      🐛 📊 STATUS [2025-10-25T10:35:36.577Z] Snapshot received
        Data: {
        "size": 0,
        "empty": true,
        "bookId": "test-book-id"
      }

      at log (src/utils/logger.js:126:15)

    console.info
      ℹ️ 📊 STATUS [2025-10-25T10:35:36.579Z] Adding manual status history
        Data: {
        "bookId": "test-book-id",
        "date": "2025-12-31T12:00:00.000Z",
        "status": "finished",
        "previousStatus": null,
        "userId": "test-user-id"
      }

      at info (src/utils/logger.js:123:15)

    console.info
      ℹ️ 📊 STATUS [2025-10-25T10:35:36.581Z] Manual status history added successfully

      at info (src/utils/logger.js:123:15)

    console.log
      🐛 📊 STATUS [2025-10-25T10:35:36.586Z] Setting up listener for bookId
        Data: {
        "bookId": "test-book-id"
      }

      at log (src/utils/logger.js:126:15)

    console.log
      🐛 📊 STATUS [2025-10-25T10:35:36.589Z] Snapshot received
        Data: {
        "size": 0,
        "empty": true,
        "bookId": "test-book-id"
      }

      at log (src/utils/logger.js:126:15)

    console.info
      ℹ️ 📊 STATUS [2025-10-25T10:35:36.593Z] Adding manual status history
        Data: {
        "bookId": "test-book-id",
        "date": "2025-12-31T12:00:00.000Z",
        "status": "finished",
        "previousStatus": "reading",
        "userId": "test-user-id"
      }

      at info (src/utils/logger.js:123:15)

    console.error
      ❌ 📊 STATUS [2025-10-25T10:35:36.594Z] Error adding manual status history
        Data: {}

    [0m [90m 30 |[39m       [36mreturn[39m[33m;[39m
     [90m 31 |[39m     }
    [31m[1m>[22m[39m[90m 32 |[39m     originalError[33m.[39mcall(console[33m,[39m [33m...[39margs)[33m;[39m
     [90m    |[39m                   [31m[1m^[22m[39m
     [90m 33 |[39m   }[33m;[39m
     [90m 34 |[39m })[33m;[39m
     [90m 35 |[39m[0m

      at console.call [as error] (jest.setup.js:32:19)
      at error (src/utils/logger.js:117:15)
      at Object.log [as error] (src/utils/logger.js:138:39)
      at Object.error (src/utils/logger.js:172:38)
      at Object.error [as addManualStatusHistory] (src/hooks/useBookStatusHistory.js:180:21)
      at src/hooks/useBookStatusHistory.test.js:235:9

    console.log
      🐛 📊 STATUS [2025-10-25T10:35:36.599Z] Setting up listener for bookId
        Data: {
        "bookId": "test-book-id"
      }

      at log (src/utils/logger.js:126:15)

    console.log
      🐛 📊 STATUS [2025-10-25T10:35:36.601Z] Snapshot received
        Data: {
        "size": 0,
        "empty": true,
        "bookId": "test-book-id"
      }

      at log (src/utils/logger.js:126:15)

    console.log
      🐛 📊 STATUS [2025-10-25T10:35:36.616Z] No user or bookId
        Data: {
        "user": false,
        "bookId": "test-book-id"
      }

      at log (src/utils/logger.js:126:15)

    console.log
      🐛 📊 STATUS [2025-10-25T10:35:36.618Z] No user or bookId for manual history addition
        Data: {
        "user": false,
        "bookId": "test-book-id"
      }

      at log (src/utils/logger.js:126:15)

    console.log
      🐛 📊 STATUS [2025-10-25T10:35:36.625Z] No user or bookId
        Data: {
        "user": true,
        "bookId": null
      }

      at log (src/utils/logger.js:126:15)

    console.log
      🐛 📊 STATUS [2025-10-25T10:35:36.627Z] No user or bookId for manual history addition
        Data: {
        "user": true,
        "bookId": null
      }

      at log (src/utils/logger.js:126:15)

    console.log
      🐛 📊 STATUS [2025-10-25T10:35:36.634Z] Setting up listener for bookId
        Data: {
        "bookId": "test-book-id"
      }

      at log (src/utils/logger.js:126:15)

    console.log
      🐛 📊 STATUS [2025-10-25T10:35:36.636Z] Snapshot received
        Data: {
        "size": 0,
        "empty": true,
        "bookId": "test-book-id"
      }

      at log (src/utils/logger.js:126:15)

    console.log
      🐛 📊 STATUS [2025-10-25T10:35:36.646Z] Setting up listener for bookId
        Data: {
        "bookId": "test-book-id"
      }

      at log (src/utils/logger.js:126:15)

    console.log
      🐛 📊 STATUS [2025-10-25T10:35:36.659Z] Setting up listener for bookId
        Data: {
        "bookId": "test-book-id"
      }

      at log (src/utils/logger.js:126:15)

    console.log
      🐛 📊 STATUS [2025-10-25T10:35:36.661Z] Snapshot received
        Data: {
        "size": 0,
        "empty": true,
        "bookId": "test-book-id"
      }

      at log (src/utils/logger.js:126:15)

    console.log
      🐛 📊 STATUS [2025-10-25T10:35:36.667Z] Setting up listener for bookId
        Data: {
        "bookId": "test-book-id"
      }

      at log (src/utils/logger.js:126:15)

    console.log
      🐛 📊 STATUS [2025-10-25T10:35:36.668Z] Snapshot received
        Data: {
        "size": 0,
        "empty": true,
        "bookId": "test-book-id"
      }

      at log (src/utils/logger.js:126:15)

    console.log
      🐛 📊 STATUS [2025-10-25T10:35:36.674Z] Setting up listener for bookId
        Data: {
        "bookId": "test-book-id"
      }

      at log (src/utils/logger.js:126:15)

    console.log
      🐛 📊 STATUS [2025-10-25T10:35:36.676Z] Snapshot received
        Data: {
        "size": 0,
        "empty": true,
        "bookId": "test-book-id"
      }

      at log (src/utils/logger.js:126:15)

    console.log
      🐛 📊 STATUS [2025-10-25T10:35:36.681Z] Setting up listener for bookId
        Data: {
        "bookId": "test-book-id"
      }

      at log (src/utils/logger.js:126:15)

    console.error
      ❌ 📊 STATUS [2025-10-25T10:35:36.683Z] Error fetching status history
        Data: {
        "code": "permission-denied",
        "message": "Missing or insufficient permissions."
      }

    [0m [90m 30 |[39m       [36mreturn[39m[33m;[39m
     [90m 31 |[39m     }
    [31m[1m>[22m[39m[90m 32 |[39m     originalError[33m.[39mcall(console[33m,[39m [33m...[39margs)[33m;[39m
     [90m    |[39m                   [31m[1m^[22m[39m
     [90m 33 |[39m   }[33m;[39m
     [90m 34 |[39m })[33m;[39m
     [90m 35 |[39m[0m

      at console.call [as error] (jest.setup.js:32:19)
      at error (src/utils/logger.js:117:15)
      at Object.log [as error] (src/utils/logger.js:138:39)
      at Object.error (src/utils/logger.js:172:38)
      at error (src/hooks/useBookStatusHistory.js:74:25)
      at onError (src/hooks/useBookStatusHistory.test.js:372:9)
      at mockOnSnapshot (src/hooks/useBookStatusHistory.test.js:30:28)
      at src/hooks/useBookStatusHistory.js:51:37
      at fetchStatusHistory (src/hooks/useBookStatusHistory.js:190:25)
      at Object.react-stack-bottom-frame (node_modules/react-dom/cjs/react-dom-client.development.js:23949:20)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
      at commitHookEffectListMount (node_modules/react-dom/cjs/react-dom-client.development.js:11905:29)
      at commitHookPassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:12028:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:13841:13)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:13815:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:13834:11)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:13815:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:13834:11)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:13815:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:13853:11)
      at flushPassiveEffects (node_modules/react-dom/cjs/react-dom-client.development.js:15737:9)
      at node_modules/react-dom/cjs/react-dom-client.development.js:15379:15
      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:859:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at renderHook (node_modules/@testing-library/react/dist/pure.js:340:7)
      at renderHookWithContext (src/hooks/useBookStatusHistory.test.js:69:22)
      at Object.renderHookWithContext (src/hooks/useBookStatusHistory.test.js:376:26)

    console.error
      ❌ 📊 STATUS [2025-10-25T10:35:36.684Z] Error details
        Data: {
        "code": "permission-denied",
        "message": "Missing or insufficient permissions.",
        "bookId": "test-book-id",
        "userId": "test-user-id"
      }

    [0m [90m 30 |[39m       [36mreturn[39m[33m;[39m
     [90m 31 |[39m     }
    [31m[1m>[22m[39m[90m 32 |[39m     originalError[33m.[39mcall(console[33m,[39m [33m...[39margs)[33m;[39m
     [90m    |[39m                   [31m[1m^[22m[39m
     [90m 33 |[39m   }[33m;[39m
     [90m 34 |[39m })[33m;[39m
     [90m 35 |[39m[0m

      at console.call [as error] (jest.setup.js:32:19)
      at error (src/utils/logger.js:117:15)
      at Object.log [as error] (src/utils/logger.js:138:39)
      at Object.error (src/utils/logger.js:172:38)
      at error (src/hooks/useBookStatusHistory.js:75:25)
      at onError (src/hooks/useBookStatusHistory.test.js:372:9)
      at mockOnSnapshot (src/hooks/useBookStatusHistory.test.js:30:28)
      at src/hooks/useBookStatusHistory.js:51:37
      at fetchStatusHistory (src/hooks/useBookStatusHistory.js:190:25)
      at Object.react-stack-bottom-frame (node_modules/react-dom/cjs/react-dom-client.development.js:23949:20)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
      at commitHookEffectListMount (node_modules/react-dom/cjs/react-dom-client.development.js:11905:29)
      at commitHookPassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:12028:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:13841:13)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:13815:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:13834:11)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:13815:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:13834:11)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:13815:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:13853:11)
      at flushPassiveEffects (node_modules/react-dom/cjs/react-dom-client.development.js:15737:9)
      at node_modules/react-dom/cjs/react-dom-client.development.js:15379:15
      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:859:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at renderHook (node_modules/@testing-library/react/dist/pure.js:340:7)
      at renderHookWithContext (src/hooks/useBookStatusHistory.test.js:69:22)
      at Object.renderHookWithContext (src/hooks/useBookStatusHistory.test.js:376:26)

    console.warn
      ⚠️ 📊 STATUS [2025-10-25T10:35:36.686Z] Permission denied for statusHistory, treating as empty history

    [0m [90m 118 |[39m       [36mbreak[39m[33m;[39m
     [90m 119 |[39m     [36mcase[39m [33mLOG_LEVELS[39m[33m.[39m[33mWARN[39m[33m:[39m
    [31m[1m>[22m[39m[90m 120 |[39m       console[33m.[39mwarn(formattedMessage)[33m;[39m
     [90m     |[39m               [31m[1m^[22m[39m
     [90m 121 |[39m       [36mbreak[39m[33m;[39m
     [90m 122 |[39m     [36mcase[39m [33mLOG_LEVELS[39m[33m.[39m[33mINFO[39m[33m:[39m
     [90m 123 |[39m       console[33m.[39minfo(formattedMessage)[33m;[39m[0m

      at warn (src/utils/logger.js:120:15)
      at Object.log [as warn] (src/utils/logger.js:141:38)
      at Object.warn (src/utils/logger.js:173:37)
      at warn (src/hooks/useBookStatusHistory.js:84:27)
      at onError (src/hooks/useBookStatusHistory.test.js:372:9)
      at mockOnSnapshot (src/hooks/useBookStatusHistory.test.js:30:28)
      at src/hooks/useBookStatusHistory.js:51:37
      at fetchStatusHistory (src/hooks/useBookStatusHistory.js:190:25)
      at Object.react-stack-bottom-frame (node_modules/react-dom/cjs/react-dom-client.development.js:23949:20)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
      at commitHookEffectListMount (node_modules/react-dom/cjs/react-dom-client.development.js:11905:29)
      at commitHookPassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:12028:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:13841:13)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:13815:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:13834:11)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:13815:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:13834:11)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:13815:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:13853:11)
      at flushPassiveEffects (node_modules/react-dom/cjs/react-dom-client.development.js:15737:9)
      at node_modules/react-dom/cjs/react-dom-client.development.js:15379:15
      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:859:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at renderHook (node_modules/@testing-library/react/dist/pure.js:340:7)
      at renderHookWithContext (src/hooks/useBookStatusHistory.test.js:69:22)
      at Object.renderHookWithContext (src/hooks/useBookStatusHistory.test.js:376:26)

    console.log
      🐛 📊 STATUS [2025-10-25T10:35:36.692Z] Setting up listener for bookId
        Data: {
        "bookId": "test-book-id"
      }

      at log (src/utils/logger.js:126:15)

    console.error
      ❌ 📊 STATUS [2025-10-25T10:35:36.694Z] Error fetching status history
        Data: {}

    [0m [90m 30 |[39m       [36mreturn[39m[33m;[39m
     [90m 31 |[39m     }
    [31m[1m>[22m[39m[90m 32 |[39m     originalError[33m.[39mcall(console[33m,[39m [33m...[39margs)[33m;[39m
     [90m    |[39m                   [31m[1m^[22m[39m
     [90m 33 |[39m   }[33m;[39m
     [90m 34 |[39m })[33m;[39m
     [90m 35 |[39m[0m

      at console.call [as error] (jest.setup.js:32:19)
      at error (src/utils/logger.js:117:15)
      at Object.log [as error] (src/utils/logger.js:138:39)
      at Object.error (src/utils/logger.js:172:38)
      at error (src/hooks/useBookStatusHistory.js:74:25)
      at onError (src/hooks/useBookStatusHistory.test.js:387:9)
      at mockOnSnapshot (src/hooks/useBookStatusHistory.test.js:30:28)
      at src/hooks/useBookStatusHistory.js:51:37
      at fetchStatusHistory (src/hooks/useBookStatusHistory.js:190:25)
      at Object.react-stack-bottom-frame (node_modules/react-dom/cjs/react-dom-client.development.js:23949:20)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
      at commitHookEffectListMount (node_modules/react-dom/cjs/react-dom-client.development.js:11905:29)
      at commitHookPassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:12028:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:13841:13)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:13815:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:13834:11)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:13815:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:13834:11)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:13815:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:13853:11)
      at flushPassiveEffects (node_modules/react-dom/cjs/react-dom-client.development.js:15737:9)
      at node_modules/react-dom/cjs/react-dom-client.development.js:15379:15
      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:859:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at renderHook (node_modules/@testing-library/react/dist/pure.js:340:7)
      at renderHookWithContext (src/hooks/useBookStatusHistory.test.js:69:22)
      at Object.renderHookWithContext (src/hooks/useBookStatusHistory.test.js:391:26)

    console.error
      ❌ 📊 STATUS [2025-10-25T10:35:36.695Z] Error details
        Data: {
        "message": "Network error",
        "bookId": "test-book-id",
        "userId": "test-user-id"
      }

    [0m [90m 30 |[39m       [36mreturn[39m[33m;[39m
     [90m 31 |[39m     }
    [31m[1m>[22m[39m[90m 32 |[39m     originalError[33m.[39mcall(console[33m,[39m [33m...[39margs)[33m;[39m
     [90m    |[39m                   [31m[1m^[22m[39m
     [90m 33 |[39m   }[33m;[39m
     [90m 34 |[39m })[33m;[39m
     [90m 35 |[39m[0m

      at console.call [as error] (jest.setup.js:32:19)
      at error (src/utils/logger.js:117:15)
      at Object.log [as error] (src/utils/logger.js:138:39)
      at Object.error (src/utils/logger.js:172:38)
      at error (src/hooks/useBookStatusHistory.js:75:25)
      at onError (src/hooks/useBookStatusHistory.test.js:387:9)
      at mockOnSnapshot (src/hooks/useBookStatusHistory.test.js:30:28)
      at src/hooks/useBookStatusHistory.js:51:37
      at fetchStatusHistory (src/hooks/useBookStatusHistory.js:190:25)
      at Object.react-stack-bottom-frame (node_modules/react-dom/cjs/react-dom-client.development.js:23949:20)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
      at commitHookEffectListMount (node_modules/react-dom/cjs/react-dom-client.development.js:11905:29)
      at commitHookPassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:12028:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:13841:13)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:13815:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:13834:11)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:13815:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:13834:11)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:13815:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:13853:11)
      at flushPassiveEffects (node_modules/react-dom/cjs/react-dom-client.development.js:15737:9)
      at node_modules/react-dom/cjs/react-dom-client.development.js:15379:15
      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:859:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at renderHook (node_modules/@testing-library/react/dist/pure.js:340:7)
      at renderHookWithContext (src/hooks/useBookStatusHistory.test.js:69:22)
      at Object.renderHookWithContext (src/hooks/useBookStatusHistory.test.js:391:26)

PASS src/constants/bookStatus.test.js
PASS src/utils/dateUtils.test.js
PASS src/hooks/__tests__/useBookFiltering.test.js
PASS src/constants/memoRating.test.js
PASS src/utils/logger.test.js
PASS src/hooks/__tests__/useBookStats.test.js
PASS src/pages/BookAdd.test.jsx (16.472 s)
PASS src/components/BookForm.test.jsx (16.781 s)
  ● Console

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

PASS src/components/PWAInstallPrompt.test.jsx (37.163 s)
PASS src/components/BookInfo.test.jsx (37.22 s)
  ● Console

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      🐛 📊 STATUS [2025-10-25T10:35:58.405Z] No user or bookId
        Data: {
        "user": true
      }

      at log (src/utils/logger.js:126:15)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      🐛 📊 STATUS [2025-10-25T10:35:58.445Z] No user or bookId
        Data: {
        "user": true
      }

      at log (src/utils/logger.js:126:15)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      🐛 📊 STATUS [2025-10-25T10:35:58.470Z] No user or bookId
        Data: {
        "user": true
      }

      at log (src/utils/logger.js:126:15)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      🐛 📊 STATUS [2025-10-25T10:35:58.500Z] No user or bookId
        Data: {
        "user": true
      }

      at log (src/utils/logger.js:126:15)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      🐛 📊 STATUS [2025-10-25T10:35:58.523Z] No user or bookId
        Data: {
        "user": true
      }

      at log (src/utils/logger.js:126:15)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      🐛 📊 STATUS [2025-10-25T10:35:58.542Z] No user or bookId
        Data: {
        "user": true
      }

      at log (src/utils/logger.js:126:15)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      🐛 📊 STATUS [2025-10-25T10:35:58.573Z] No user or bookId
        Data: {
        "user": true
      }

      at log (src/utils/logger.js:126:15)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      🐛 📊 STATUS [2025-10-25T10:35:58.594Z] No user or bookId
        Data: {
        "user": true
      }

      at log (src/utils/logger.js:126:15)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      🐛 📊 STATUS [2025-10-25T10:35:58.616Z] No user or bookId
        Data: {
        "user": true
      }

      at log (src/utils/logger.js:126:15)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      🐛 📊 STATUS [2025-10-25T10:35:58.635Z] No user or bookId
        Data: {
        "user": true
      }

      at log (src/utils/logger.js:126:15)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      🐛 📊 STATUS [2025-10-25T10:35:58.656Z] No user or bookId
        Data: {
        "user": true
      }

      at log (src/utils/logger.js:126:15)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

PASS src/components/BookStatusChanger.test.jsx (37.078 s)
  ● Console

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      🐛 📊 STATUS [2025-10-25T10:35:58.361Z] No user or bookId
        Data: {
        "user": true
      }

      at log (src/utils/logger.js:126:15)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      🐛 📊 STATUS [2025-10-25T10:35:58.403Z] No user or bookId
        Data: {
        "user": true
      }

      at log (src/utils/logger.js:126:15)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      🐛 📊 STATUS [2025-10-25T10:35:58.556Z] No user or bookId
        Data: {
        "user": true
      }

      at log (src/utils/logger.js:126:15)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.error
      Error adding status history: Error: 無効なパラメータです。
          at D:\work\AI\project-01-bookmemo\src\hooks\useBookStatusHistory.js:109:13
          at addStatusHistory (D:\work\AI\project-01-bookmemo\src\components\BookStatusChanger.jsx:49:15)
          at runNextTicks (node:internal/process/task_queues:65:5)
          at listOnTimeout (node:internal/timers:549:9)
          at processTimers (node:internal/timers:523:7)

    [0m [90m 30 |[39m       [36mreturn[39m[33m;[39m
     [90m 31 |[39m     }
    [31m[1m>[22m[39m[90m 32 |[39m     originalError[33m.[39mcall(console[33m,[39m [33m...[39margs)[33m;[39m
     [90m    |[39m                   [31m[1m^[22m[39m
     [90m 33 |[39m   }[33m;[39m
     [90m 34 |[39m })[33m;[39m
     [90m 35 |[39m[0m

      at console.call [as error] (jest.setup.js:32:19)
      at error (src/components/BookStatusChanger.jsx:51:17)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      🐛 📊 STATUS [2025-10-25T10:35:58.667Z] No user or bookId
        Data: {
        "user": true
      }

      at log (src/utils/logger.js:126:15)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.error
      Error adding status history: Error: 無効なパラメータです。
          at D:\work\AI\project-01-bookmemo\src\hooks\useBookStatusHistory.js:109:13
          at addStatusHistory (D:\work\AI\project-01-bookmemo\src\components\BookStatusChanger.jsx:49:15)

    [0m [90m 30 |[39m       [36mreturn[39m[33m;[39m
     [90m 31 |[39m     }
    [31m[1m>[22m[39m[90m 32 |[39m     originalError[33m.[39mcall(console[33m,[39m [33m...[39margs)[33m;[39m
     [90m    |[39m                   [31m[1m^[22m[39m
     [90m 33 |[39m   }[33m;[39m
     [90m 34 |[39m })[33m;[39m
     [90m 35 |[39m[0m

      at console.call [as error] (jest.setup.js:32:19)
      at error (src/components/BookStatusChanger.jsx:51:17)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      🐛 📊 STATUS [2025-10-25T10:35:58.745Z] No user or bookId
        Data: {
        "user": true
      }

      at log (src/utils/logger.js:126:15)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      🐛 📊 STATUS [2025-10-25T10:35:58.804Z] No user or bookId
        Data: {
        "user": true
      }

      at log (src/utils/logger.js:126:15)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)

    console.log
      🐛 📊 STATUS [2025-10-25T10:35:58.817Z] No user or bookId
        Data: {
        "user": true
      }

      at log (src/utils/logger.js:126:15)

    console.log
      === useAuth mock called ===

      at log (jest.setup.js:119:11)

    console.log
      returning: { user: { uid: 'test-user-id' }, loading: false }

      at log (jest.setup.js:120:11)


Summary of all failing tests
FAIL src/components/search/FullTextSearch.test.jsx (8.31 s)
  ● FullTextSearch › 書籍クリック時は書籍詳細ページに遷移する

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "/book/book1"
    Received: "/book/book1", {"state": {"returnPath": "/", "searchState": {"results": [{"bookId": "book1", "id": "book1", "title": "テスト書籍", "type": "book"}]}}}

    Number of calls: 1

    [0m [90m 361 |[39m     
     [90m 362 |[39m     [90m// 書籍詳細ページに遷移[39m
    [31m[1m>[22m[39m[90m 363 |[39m     expect(mockNavigate)[33m.[39mtoHaveBeenCalledWith([32m'/book/book1'[39m)[33m;[39m
     [90m     |[39m                          [31m[1m^[22m[39m
     [90m 364 |[39m   })[33m;[39m
     [90m 365 |[39m
     [90m 366 |[39m   test([32m'メモクリック時はメモ詳細ダイアログが開く'[39m[33m,[39m () [33m=>[39m {[0m

      at Object.toHaveBeenCalledWith (src/components/search/FullTextSearch.test.jsx:363:26)

FAIL src/pages/TagSearch.test.jsx (10.478 s)
  ● TagSearch › 詳細検索機能 › 検索結果クリック: 本は遷移し、メモはダイアログを開く

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "/book/book1"
    Received: "/book/book1", {"state": {"returnPath": "/", "searchState": {"results": [{"id": "book1", "title": "テスト本", "type": "book"}, {"bookId": "book1", "content": "テストメモ", "id": "memo1", "type": "memo"}]}}}

    Number of calls: 1

    [0m [90m 264 |[39m       [90m// 本の結果をクリック → 書籍詳細へ遷移[39m
     [90m 265 |[39m       fireEvent[33m.[39mclick(screen[33m.[39mgetByTestId([32m'result-0'[39m))[33m;[39m
    [31m[1m>[22m[39m[90m 266 |[39m       expect(mockNavigate)[33m.[39mtoHaveBeenCalledWith([32m'/book/book1'[39m)[33m;[39m
     [90m     |[39m                            [31m[1m^[22m[39m
     [90m 267 |[39m
     [90m 268 |[39m       [90m// メモの結果をクリック → メモ詳細ダイアログが開く（遷移しない）[39m
     [90m 269 |[39m       fireEvent[33m.[39mclick(screen[33m.[39mgetByTestId([32m'result-1'[39m))[33m;[39m[0m

      at Object.toHaveBeenCalledWith (src/pages/TagSearch.test.jsx:266:28)


Test Suites: 2 failed, 47 passed, 49 total
Tests:       2 failed, 9 skipped, 540 passed, 551 total
Snapshots:   0 total
Time:        40.436 s
Ran all test suites.

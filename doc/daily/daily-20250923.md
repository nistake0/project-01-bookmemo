# 日報 - 2025-09-23

## 概要
- コード品質改善（責務分離）を中心に複数箇所をリファクタリングし、ユニットテストで回帰確認を実施。

## 実施内容
- App.jsx の責務分離（完了）
  - `src/theme/appTheme.js` へ MUI テーマを切り出し
  - `src/utils/errorLogger.js` へ ErrorLogger/グローバルエラーハンドラ/デバッグコマンドを切り出し
  - 影響範囲: 小（挙動不変）
- ManualHistoryAddDialog のバリデーション分離（完了）
  - `src/hooks/useHistoryValidation.js` 新規作成
  - ダイアログ側から検証ロジックを委譲
- useBookList の分割（進捗）
  - `src/hooks/useBookFiltering.js` 追加（filterBooks/normalizeTag）
  - `src/hooks/useBookStats.js` 追加（computeBookStats）
  - `src/hooks/useBookList.js` を上記に委譲（公開API不変）
  - 追加テスト: `useBookFiltering.test.js`, `useBookStats.test.js`
- useBookStatusHistory の計算ロジック分離（完了）
  - `src/utils/statusHistoryUtils.js` 追加（extractImportantDates, getCurrentStatusFromHistory, calculateReadingDuration）
  - `src/hooks/useBookStatusHistory.js` から委譲（API不変）
- **書籍追加時の初期ステータス設定（完了）**
  - デフォルトステータスを「読書中」から「積読」に変更
  - 書籍追加フォームにステータス選択UIを追加
  - ユーザーが明示的にステータスを選択可能
  - 後方互換性を維持（既存データに影響なし）

## テスト
- ユニットテスト: 38/38 成功（合計 397 tests）
- 回帰なし。新規ユニットテスト（2件）を追加。
- ステータス選択機能のテスト追加（BookForm.test.jsx）

## 次のアクション候補
- useSearch の段階的分割（useSearchQuery / useSearchExecution / useSearchResults）
- MemoAdd の状態管理整理（フォームロジックの薄型化）
- MemoEditor のモード管理簡素化

## メモ
- E2E は追加せず、ユニットテストで機能的担保を確保（方針どおり）。

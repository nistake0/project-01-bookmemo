# é–‹ç™ºæ—¥å ± - 2025å¹´1æœˆ31æ—¥

## ğŸ“‹ æœ¬æ—¥ã®ä½œæ¥­æ¦‚è¦

ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæœ€å„ªå…ˆç›®æ¨™ï¼ˆ`doc/discussion-user-profile-and-theme-tasks.md`ï¼‰ã«åŸºã¥ãã€**ã‚¿ã‚¹ã‚¯B: ãƒ†ãƒ¼ãƒé¸æŠæ©Ÿèƒ½**ã¨**ã‚¿ã‚¹ã‚¯C: ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«æ©Ÿèƒ½**ã‚’å®Ÿè£…ã€‚ãƒ¦ãƒ¼ã‚¶ãƒ¼è¨­å®šãƒ»ãƒ†ãƒ¼ãƒãƒ»ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ã®ä¸€é€£ã®æ©Ÿèƒ½ãŒå®Œäº†ã€‚

ç¶šã„ã¦**ãƒ‡ã‚¶ã‚¤ãƒ³è¦ç´ åˆ†é›¢ãƒ»çµ±ä¸€ å®Ÿè£…è¨ˆç”»**ï¼ˆ`doc/design-implementation-plan.md`ï¼‰ã‚’å®Ÿæ–½ã€‚Phase 0ã€œ4 ã«ã‚ˆã‚Šã€æ›¸ç±ãƒ»ãƒ¡ãƒ¢ã®ãƒ†ãƒ¼ãƒåˆ†é›¢ã€cardStyles ã«ã‚ˆã‚‹ã‚¹ã‚¿ã‚¤ãƒ«å…±é€šåŒ–ã€çµ±è¨ˆã‚°ãƒ©ãƒ•è‰²ã®ãƒ†ãƒ¼ãƒåŒ–ã‚’å®Œäº†ã€‚

---

## âœ… å®Ÿæ–½å†…å®¹

### 1. ã‚¿ã‚¹ã‚¯B: ãƒ†ãƒ¼ãƒé¸æŠæ©Ÿèƒ½

**å®Ÿè£…å†…å®¹**:
- **ãƒ†ãƒ¼ãƒãƒ—ãƒªã‚»ãƒƒãƒˆ**ï¼ˆ`src/theme/themePresets.js`ï¼‰
  - library-classic: å›³æ›¸é¤¨èƒŒæ™¯ï¼‹ãƒ‘ã‚¿ãƒ¼ãƒ³ï¼‹èŒ¶ç³»ã‚ªãƒ¼ãƒãƒ¼ãƒ¬ã‚¤
  - minimal-light: å˜è‰²ã‚°ãƒ¬ãƒ¼èƒŒæ™¯ï¼ˆæ˜ç¢ºãªå·®åˆ¥åŒ–ã®ãŸã‚ãƒ‘ã‚¿ãƒ¼ãƒ³ãªã—ï¼‰
- **ãƒ†ãƒ¼ãƒãƒ•ã‚¡ã‚¯ãƒˆãƒª**ï¼ˆ`src/theme/createThemeFromPreset.js`ï¼‰
  - ãƒ—ãƒªã‚»ãƒƒãƒˆIDã‹ã‚‰MUIãƒ†ãƒ¼ãƒã‚’å‹•çš„ç”Ÿæˆ
- **ThemeProviderWithUserSettings**ï¼ˆ`src/components/ThemeProviderWithUserSettings.jsx`ï¼‰
  - useUserSettings ã‹ã‚‰ themePresetId ã‚’å–å¾—ã—ã€ThemeProvider ã«æ¸¡ã™
- **è¨­å®šç”»é¢ã«ãƒ†ãƒ¼ãƒé¸æŠUI**ï¼ˆãƒ©ã‚¸ã‚ªãƒœã‚¿ãƒ³ï¼‰

**èª²é¡Œå¯¾å¿œ**:
- ãƒ†ãƒ¼ãƒå¤‰æ›´ãŒãƒªãƒ­ãƒ¼ãƒ‰ã—ãªã„ã¨åæ˜ ã•ã‚Œãªã„å•é¡Œ â†’ **UserSettingsProvider** ã§è¨­å®š state ã‚’å…±æœ‰ã—ã€å³æ™‚åæ˜ ã‚’å®Ÿç¾
- library-classic ã¨ minimal-light ã®è¦‹ãŸç›®ã®å·®ãŒåˆ†ã‹ã‚‰ãªã„ â†’ minimal-light ã‚’ãƒ‘ã‚¿ãƒ¼ãƒ³ãªã—ã®å˜è‰²èƒŒæ™¯ã«å¤‰æ›´
- JSX ã‚’å«ã‚€ .js ãƒ•ã‚¡ã‚¤ãƒ«ã® Vite ãƒ‘ãƒ¼ã‚¹ã‚¨ãƒ©ãƒ¼ â†’ `useUserSettings.js` ã‚’ `useUserSettings.jsx` ã«ãƒªãƒãƒ¼ãƒ 

### 2. ã‚¿ã‚¹ã‚¯C: ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«æ©Ÿèƒ½

**å®Ÿè£…å†…å®¹**:
- **è¡¨ç¤ºåãƒ»ã‚¢ãƒã‚¿ãƒ¼URL** ã®è¡¨ç¤ºãƒ»ç·¨é›†
- **ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ç·¨é›†ãƒ€ã‚¤ã‚¢ãƒ­ã‚°**ï¼ˆè¡¨ç¤ºåã€ã‚¢ãƒã‚¿ãƒ¼ç”»åƒURLï¼‰
- ã‚¢ãƒã‚¿ãƒ¼è¡¨ç¤º: URLæŒ‡å®šç”»åƒã€æœªè¨­å®šæ™‚ã¯è¡¨ç¤ºåã®é ­æ–‡å­—ã€ã„ãšã‚Œã‚‚ç„¡ã„å ´åˆã¯ PersonIcon
- Firestore `users/{userId}` ã® `profile` ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã«ä¿å­˜

### 3. UserSettingsProvider ã®å°å…¥

**èƒŒæ™¯**: Settings ã¨ ThemeProviderWithUserSettings ãŒåˆ¥ã€…ã« useUserSettings ã‚’å‘¼ã‚“ã§ãŠã‚Šã€state ãŒå…±æœ‰ã•ã‚Œã¦ã„ãªã‹ã£ãŸã€‚

**å¯¾å¿œ**: Context ã«ã‚ˆã‚‹ state å…±æœ‰
- `UserSettingsProvider` ã§ãƒ¦ãƒ¼ã‚¶ãƒ¼è¨­å®šã‚’ä¸€å…ƒç®¡ç†
- ãƒ†ãƒ¼ãƒå¤‰æ›´æ™‚ã€å³åº§ã« ThemeProvider ã«åæ˜ 

### 4. ã‚«ãƒãƒ¬ãƒƒã‚¸çŠ¶æ³ã®èª¿æŸ»

- å…¨ä½“: ç´„54%ï¼ˆStatementsï¼‰
- æ–°è¦å®Ÿè£…ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«: Settings 77%ã€useUserSettings 58%ã€ThemeProviderWithUserSettings / createThemeFromPreset ã¯0%
- TODO ã¨ã—ã¦ `doc/bug-feature-memo.md` ã«è¨˜éŒ²

---

## ğŸ“Š ä½œæ¥­æˆæœ

### æ–°è¦ä½œæˆãƒ•ã‚¡ã‚¤ãƒ«
- `src/theme/themePresets.js` - ãƒ†ãƒ¼ãƒãƒ—ãƒªã‚»ãƒƒãƒˆå®šç¾©
- `src/theme/createThemeFromPreset.js` - ãƒ†ãƒ¼ãƒãƒ•ã‚¡ã‚¯ãƒˆãƒª
- `src/components/ThemeProviderWithUserSettings.jsx` - å‹•çš„ãƒ†ãƒ¼ãƒæä¾›
- `src/constants/userSettings.js` - ãƒ¦ãƒ¼ã‚¶ãƒ¼è¨­å®šå®šæ•°
- `src/hooks/useUserSettings.jsx` - ãƒ¦ãƒ¼ã‚¶ãƒ¼è¨­å®šãƒ•ãƒƒã‚¯ï¼ˆContext çµ±åˆï¼‰
- `src/pages/Settings.jsx` - è¨­å®šç”»é¢ï¼ˆã‚¢ã‚«ã‚¦ãƒ³ãƒˆãƒ»ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ãƒ»ãƒ†ãƒ¼ãƒãƒ»ãƒ­ã‚°ã‚¢ã‚¦ãƒˆï¼‰
- `src/pages/Settings.test.jsx` - è¨­å®šç”»é¢ã®ãƒ†ã‚¹ãƒˆ

### å¤‰æ›´ãƒ•ã‚¡ã‚¤ãƒ«
- `src/App.jsx` - UserSettingsProviderã€ThemeProviderWithUserSettingsã€èƒŒæ™¯CSSå¤‰æ•°ã®ãƒ†ãƒ¼ãƒé€£å‹•
- `src/main.jsx` - å›ºå®š ThemeProvider ã‚’å‰Šé™¤ã— App ã«é›†ç´„
- `src/config/paths.js` - buildPath ã®åˆ©ç”¨ï¼ˆãƒ†ãƒ¼ãƒç”¨ï¼‰
- `doc/bug-feature-memo.md` - ã‚¿ã‚¹ã‚¯B/C å®Œäº†ã€ã‚«ãƒãƒ¬ãƒƒã‚¸æ”¹å–„TODO

### å‰Šé™¤ãƒ•ã‚¡ã‚¤ãƒ«
- `src/hooks/useUserSettings.js` - .jsx ã¸ãƒªãƒãƒ¼ãƒ ã®ãŸã‚

---

## ğŸ§ª ãƒ†ã‚¹ãƒˆçµæœ

- **ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆ**: 59 ã‚¹ã‚¤ãƒ¼ãƒˆã€639 ãƒ†ã‚¹ãƒˆé€šéï¼ˆPhase 0ã€œ4 å®Œäº†æ™‚ç‚¹ï¼‰
- **Settings ãƒ†ã‚¹ãƒˆ**: 6ä»¶ï¼ˆè¨­å®šè¡¨ç¤ºã€ãƒ­ã‚°ã‚¢ã‚¦ãƒˆã€ãƒ†ãƒ¼ãƒé¸æŠã€ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ç·¨é›†ï¼‰
- **ãƒ“ãƒ«ãƒ‰**: æˆåŠŸ

---

## ğŸ“ ã‚³ãƒŸãƒƒãƒˆå±¥æ­´

1. **feat: ãƒ†ãƒ¼ãƒé¸æŠæ©Ÿèƒ½ï¼ˆã‚¿ã‚¹ã‚¯Bï¼‰ã¨ãƒ¦ãƒ¼ã‚¶ãƒ¼è¨­å®šåŸºç›¤**
   - ãƒ†ãƒ¼ãƒãƒ—ãƒªã‚»ãƒƒãƒˆã€ãƒ•ã‚¡ã‚¯ãƒˆãƒªã€UserSettingsProviderã€ãƒ†ãƒ¼ãƒé¸æŠUI
   - library-classic / minimal-light ã®å·®åˆ¥åŒ–
   - useUserSettings.jsx ãƒªãƒãƒ¼ãƒ 

2. **feat: ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«æ©Ÿèƒ½ï¼ˆã‚¿ã‚¹ã‚¯Cï¼‰**
   - è¡¨ç¤ºåãƒ»ã‚¢ãƒã‚¿ãƒ¼ã®è¡¨ç¤ºãƒ»ç·¨é›†
   - ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ç·¨é›†ãƒ€ã‚¤ã‚¢ãƒ­ã‚°
   - ã‚«ãƒãƒ¬ãƒƒã‚¸æ”¹å–„TODOã®è¨˜éŒ²

---

## ğŸ“Œ ä»Šå¾Œã®TODOï¼ˆè¨˜éŒ²æ¸ˆã¿ï¼‰

- **ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸æ”¹å–„**ï¼ˆ`doc/bug-feature-memo.md`ï¼‰
  - ThemeProviderWithUserSettingsã€createThemeFromPreset ã®ãƒ†ã‚¹ãƒˆ
  - useUserSettings ã® updateProfile/updatePreferencesã€ã‚¨ãƒ©ãƒ¼ãƒ‘ã‚¹ã®ãƒ†ã‚¹ãƒˆ

---

## 5. ãƒ‡ã‚¶ã‚¤ãƒ³è¦ç´ åˆ†é›¢ãƒ»çµ±ä¸€ å®Ÿè£…è¨ˆç”»ï¼ˆPhase 0ã€œ4ï¼‰

**å‚ç…§**: `doc/design-implementation-plan.md`ï¼ˆæœ€å„ªå…ˆTODOï¼‰

### Phase 0: åœŸå°ã®æ•´å‚™
- **fallbacks.js** æ–°è¦ä½œæˆ: FALLBACK_BROWN, FALLBACK_MEMO, FALLBACK_ACCENT ã‚’å…±é€šåŒ–
- **themePresets**: cardShadow, cardShadowHover ã‚’è¿½åŠ 
- **createThemeFromPreset**: theme.custom ã« cardShadow, cardShadowHover ã‚’è¿½åŠ 
- **BookCard, MemoCard, SearchResults, BookDetail**: fallbacks ã¨ theme å‚ç…§ã«ç½®æ›
- **fallbacks.test.js**, **createThemeFromPreset.test.js** æ–°è¦ä½œæˆ

### Phase 1: ãƒ—ãƒªã‚»ãƒƒãƒˆåˆ†é›¢
- **themePresets**: bookAccent, memoAccent, bookDecorations, memoDecorations ã‚’è¿½åŠ 
- **createThemeFromPreset**: theme.custom ã«ä¸Šè¨˜ã‚’è¿½åŠ 
- **themePresets.test.js** æ–°è¦ä½œæˆ
- æ›¸ç±ï¼èŒ¶ç³»ï¼neutralã€ãƒ¡ãƒ¢ï¼ç´«ç³»ï¼neutral ã§è¦–è¦šçš„ã«åŒºåˆ¥

### Phase 2: æ›¸ç±ç³»ã‚¹ã‚¿ã‚¤ãƒ«çµ±ä¸€
- **cardStyles.js** æ–°è¦ä½œæˆ: getBookCardSx, getMemoCardSx, getBookAccent, getMemoAccent ç­‰
- **BookCard, MemoCard, BookDetail, SearchResults** ã‚’ cardStyles ä½¿ç”¨ã«ãƒªãƒ•ã‚¡ã‚¯ã‚¿
- **BookInfo**: æ›¸å½±ãƒ—ãƒ¬ãƒ¼ã‚¹ãƒ›ãƒ«ãƒ€ãƒ¼æ ç·šã« bookAccent å‚ç…§
- **ExternalBookSearch**: æ¤œç´¢çµæœã‚«ãƒ¼ãƒ‰ã« getBookCardSx é©ç”¨
- **cardStyles.test.js** æ–°è¦ä½œæˆ

### Phase 3: ãƒ¡ãƒ¢ç³»åˆ†é›¢ï¼ˆPhase 1 ã¨åŒæ™‚å®Ÿæ–½ï¼‰
- **MemoCard**: memoAccent, memoDecorations, FALLBACK_MEMO ä½¿ç”¨
- **SearchResults**: æ›¸ç±ãƒ»ãƒ¡ãƒ¢ã§åˆ¥ã€…ã® accent/decorations

### Phase 4: çµ±è¨ˆã‚°ãƒ©ãƒ•è‰²ã®ãƒ†ãƒ¼ãƒåŒ–
- **themePresets**: chartColors { bar, memo } ã‚’è¿½åŠ 
- **createThemeFromPreset**: theme.custom.chartColors ã‚’è¿½åŠ 
- **Stats**: BarChart ã® series è‰²ã‚’ theme.custom.chartColors ã‹ã‚‰å‚ç…§

---

## ğŸ“Š ä½œæ¥­æˆæœï¼ˆãƒ‡ã‚¶ã‚¤ãƒ³å®Ÿè£…åˆ†ï¼‰

### æ–°è¦ä½œæˆãƒ•ã‚¡ã‚¤ãƒ«
- `src/theme/fallbacks.js` - å…±é€šãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯å€¤
- `src/theme/fallbacks.test.js`
- `src/theme/cardStyles.js` - ã‚«ãƒ¼ãƒ‰ã‚¹ã‚¿ã‚¤ãƒ«ç”Ÿæˆï¼ˆgetBookCardSx, getMemoCardSx ç­‰ï¼‰
- `src/theme/cardStyles.test.js`
- `src/theme/themePresets.test.js`
- `src/theme/createThemeFromPreset.test.js`
- `doc/design-element-classification-and-policy.md` - è¦ç´ åˆ†é¡ã¨ãƒ†ãƒ¼ãƒæ–¹é‡
- `doc/design-embedding-review.md` - å…¨è¦ç´ ã®åŸ‹ã‚è¾¼ã¿çŠ¶æ³ãƒ¬ãƒ“ãƒ¥ãƒ¼
- `doc/design-implementation-plan.md` - å®Ÿè£…è¨ˆç”»ãƒ»ãƒ†ã‚¹ãƒˆæˆ¦ç•¥

### å¤‰æ›´ãƒ•ã‚¡ã‚¤ãƒ«
- `src/theme/themePresets.js` - bookAccent, memoAccent, chartColors ç­‰
- `src/theme/createThemeFromPreset.js` - theme.custom æ‹¡å¼µ
- `src/components/BookCard.jsx`, `MemoCard.jsx`, `BookInfo.jsx`, `ExternalBookSearch.jsx`
- `src/components/search/SearchResults.jsx`
- `src/pages/BookDetail.jsx`, `Stats.jsx`
- `doc/design-system-overview.md`
- `doc/bug-feature-memo.md` - å®Ÿè£…è¨ˆç”»ã‚’æœ€å„ªå…ˆTODOã¨ã—ã¦è¨˜éŒ²

---

## ğŸ“ ã‚³ãƒŸãƒƒãƒˆå±¥æ­´ï¼ˆãƒ‡ã‚¶ã‚¤ãƒ³å®Ÿè£…åˆ†ï¼‰

1. **docs: ãƒ‡ã‚¶ã‚¤ãƒ³è¦ç´ åˆ†é›¢ãƒ»çµ±ä¸€ã®è¨­è¨ˆã¨å®Ÿè£…è¨ˆç”»ã‚’è¿½åŠ ï¼ˆæœ€å„ªå…ˆTODOï¼‰**
2. **feat(theme): Phase 0 - ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯å…±é€šåŒ–ãƒ»boxShadow ãƒ†ãƒ¼ãƒåŒ–**
3. **feat(theme): Phase 1-3 - ãƒ—ãƒªã‚»ãƒƒãƒˆåˆ†é›¢ãƒ»cardStylesãƒ»ãƒ¡ãƒ¢ç³»åˆ†é›¢**
4. **feat(theme): Phase 4 - çµ±è¨ˆã‚°ãƒ©ãƒ•è‰²ã®ãƒ†ãƒ¼ãƒåŒ–**

---

## é–¢é€£ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

- `doc/discussion-user-profile-and-theme-tasks.md` - ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæœ€å„ªå…ˆç›®æ¨™
- `doc/theme-selectable-review-20260131.md` - ãƒ†ãƒ¼ãƒé¸æŠå®Ÿè£…ã®éšœå£åˆ†æ
- `doc/design-implementation-plan.md` - ãƒ‡ã‚¶ã‚¤ãƒ³è¦ç´ åˆ†é›¢ãƒ»çµ±ä¸€ å®Ÿè£…è¨ˆç”»
- `doc/design-element-classification-and-policy.md` - è¦ç´ åˆ†é¡ã¨ãƒ†ãƒ¼ãƒæ–¹é‡
- `doc/design-system-overview.md` - ãƒ‡ã‚¶ã‚¤ãƒ³ã‚·ã‚¹ãƒ†ãƒ æ¦‚è¦

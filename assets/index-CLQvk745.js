var VN=Object.defineProperty;var UN=(t,e,n)=>e in t?VN(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var xe=(t,e,n)=>UN(t,typeof e!="symbol"?e+"":e,n);import{r as O,j as v,B as re,T as te,a as ct,b as ze,u as di,C as Sn,c as Cn,d as fR,e as dn,P as Xn,k as hR,R as wi,D as Ni,f as Yi,g as Li,A as bi,h as Bi,i as N1,l as Sa,m as HN,n as Hx,o as pR,S as L1,p as gR,L as ab,q as sb,s as zN,t as um,I as Gr,v as Im,w as zh,H as $N,F as ki,x as Ta,y as Xa,M as Zt,z as Bs,E as GN,G as WN,J as B1,K as zd,N as zC,O as Fs,Q as p0,U as _o,V as $2,W as YN,X as jc,Y as qN,Z as mR,_ as dm,$ as XN,a0 as KN,a1 as H,a2 as je,a3 as bt,a4 as Gl,a5 as Ot,a6 as Mt,a7 as Ma,a8 as Ct,a9 as Ut,aa as Pe,ab as wt,ac as $d,ad as He,ae as i0,af as ci,ag as Kn,ah as js,ai as yR,aj as QN,ak as Md,al as vR,am as ZN,an as JN,ao as Pa,ap as F0,aq as e5,ar as t5,as as Ao,at as Vc,au as F1,av as xR,aw as n5,ax as r5,ay as i5,az as wR,aA as $C,aB as a5,aC as ne,aD as bR,aE as _R,aF as AR,aG as GC,aH as s5,aI as o5,aJ as l5,aK as c5,aL as u5,aM as d5,aN as f5,aO as ER,aP as SR,aQ as h5,aR as CR,aS as p5,aT as g5,aU as m5,aV as y5,aW as v5,aX as x5,aY as WC,aZ as Lg,a_ as w5,a$ as b5,b0 as _5,b1 as A5,b2 as E5,b3 as S5,b4 as Ih,b5 as C5,b6 as T5,b7 as I5}from"./mui-vendor-DG2-d_0K.js";import{r as ob,a as D5,g as R5}from"./react-vendor-DJG_os-6.js";import{u as No,a as YC,b as O5,c as au,d as M5,H as P5,R as k5,e as mo,N as TR}from"./utils-vendor-CgedADlS.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();var zx={exports:{}},Dh={},$x={exports:{}},Gx={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qC;function N5(){return qC||(qC=1,function(t){function e(G,W){var K=G.length;G.push(W);e:for(;0<K;){var Z=K-1>>>1,fe=G[Z];if(0<i(fe,W))G[Z]=W,G[K]=fe,K=Z;else break e}}function n(G){return G.length===0?null:G[0]}function r(G){if(G.length===0)return null;var W=G[0],K=G.pop();if(K!==W){G[0]=K;e:for(var Z=0,fe=G.length,me=fe>>>1;Z<me;){var ve=2*(Z+1)-1,be=G[ve],Me=ve+1,ge=G[Me];if(0>i(be,K))Me<fe&&0>i(ge,be)?(G[Z]=ge,G[Me]=K,Z=Me):(G[Z]=be,G[ve]=K,Z=ve);else if(Me<fe&&0>i(ge,K))G[Z]=ge,G[Me]=K,Z=Me;else break e}}return W}function i(G,W){var K=G.sortIndex-W.sortIndex;return K!==0?K:G.id-W.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var s=Date,o=s.now();t.unstable_now=function(){return s.now()-o}}var c=[],d=[],f=1,p=null,g=3,m=!1,x=!1,b=!1,A=!1,E=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;function I(G){for(var W=n(d);W!==null;){if(W.callback===null)r(d);else if(W.startTime<=G)r(d),W.sortIndex=W.expirationTime,e(c,W);else break;W=n(d)}}function P(G){if(b=!1,I(G),!x)if(n(c)!==null)x=!0,F||(F=!0,k());else{var W=n(d);W!==null&&X(P,W.startTime-G)}}var F=!1,M=-1,D=5,R=-1;function B(){return A?!0:!(t.unstable_now()-R<D)}function N(){if(A=!1,F){var G=t.unstable_now();R=G;var W=!0;try{e:{x=!1,b&&(b=!1,S(M),M=-1),m=!0;var K=g;try{t:{for(I(G),p=n(c);p!==null&&!(p.expirationTime>G&&B());){var Z=p.callback;if(typeof Z=="function"){p.callback=null,g=p.priorityLevel;var fe=Z(p.expirationTime<=G);if(G=t.unstable_now(),typeof fe=="function"){p.callback=fe,I(G),W=!0;break t}p===n(c)&&r(c),I(G)}else r(c);p=n(c)}if(p!==null)W=!0;else{var me=n(d);me!==null&&X(P,me.startTime-G),W=!1}}break e}finally{p=null,g=K,m=!1}W=void 0}}finally{W?k():F=!1}}}var k;if(typeof T=="function")k=function(){T(N)};else if(typeof MessageChannel<"u"){var j=new MessageChannel,q=j.port2;j.port1.onmessage=N,k=function(){q.postMessage(null)}}else k=function(){E(N,0)};function X(G,W){M=E(function(){G(t.unstable_now())},W)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(G){G.callback=null},t.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<G?Math.floor(1e3/G):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_next=function(G){switch(g){case 1:case 2:case 3:var W=3;break;default:W=g}var K=g;g=W;try{return G()}finally{g=K}},t.unstable_requestPaint=function(){A=!0},t.unstable_runWithPriority=function(G,W){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var K=g;g=G;try{return W()}finally{g=K}},t.unstable_scheduleCallback=function(G,W,K){var Z=t.unstable_now();switch(typeof K=="object"&&K!==null?(K=K.delay,K=typeof K=="number"&&0<K?Z+K:Z):K=Z,G){case 1:var fe=-1;break;case 2:fe=250;break;case 5:fe=1073741823;break;case 4:fe=1e4;break;default:fe=5e3}return fe=K+fe,G={id:f++,callback:W,priorityLevel:G,startTime:K,expirationTime:fe,sortIndex:-1},K>Z?(G.sortIndex=K,e(d,G),n(c)===null&&G===n(d)&&(b?(S(M),M=-1):b=!0,X(P,K-Z))):(G.sortIndex=fe,e(c,G),x||m||(x=!0,F||(F=!0,k()))),G},t.unstable_shouldYield=B,t.unstable_wrapCallback=function(G){var W=g;return function(){var K=g;g=W;try{return G.apply(this,arguments)}finally{g=K}}}}(Gx)),Gx}var XC;function L5(){return XC||(XC=1,$x.exports=N5()),$x.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var KC;function B5(){if(KC)return Dh;KC=1;var t=L5(),e=ob(),n=D5();function r(l){var u="https://react.dev/errors/"+l;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var h=2;h<arguments.length;h++)u+="&args[]="+encodeURIComponent(arguments[h])}return"Minified React error #"+l+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(l){return!(!l||l.nodeType!==1&&l.nodeType!==9&&l.nodeType!==11)}function a(l){var u=l,h=l;if(l.alternate)for(;u.return;)u=u.return;else{l=u;do u=l,(u.flags&4098)!==0&&(h=u.return),l=u.return;while(l)}return u.tag===3?h:null}function s(l){if(l.tag===13){var u=l.memoizedState;if(u===null&&(l=l.alternate,l!==null&&(u=l.memoizedState)),u!==null)return u.dehydrated}return null}function o(l){if(a(l)!==l)throw Error(r(188))}function c(l){var u=l.alternate;if(!u){if(u=a(l),u===null)throw Error(r(188));return u!==l?null:l}for(var h=l,y=u;;){var _=h.return;if(_===null)break;var C=_.alternate;if(C===null){if(y=_.return,y!==null){h=y;continue}break}if(_.child===C.child){for(C=_.child;C;){if(C===h)return o(_),l;if(C===y)return o(_),u;C=C.sibling}throw Error(r(188))}if(h.return!==y.return)h=_,y=C;else{for(var U=!1,z=_.child;z;){if(z===h){U=!0,h=_,y=C;break}if(z===y){U=!0,y=_,h=C;break}z=z.sibling}if(!U){for(z=C.child;z;){if(z===h){U=!0,h=C,y=_;break}if(z===y){U=!0,y=C,h=_;break}z=z.sibling}if(!U)throw Error(r(189))}}if(h.alternate!==y)throw Error(r(190))}if(h.tag!==3)throw Error(r(188));return h.stateNode.current===h?l:u}function d(l){var u=l.tag;if(u===5||u===26||u===27||u===6)return l;for(l=l.child;l!==null;){if(u=d(l),u!==null)return u;l=l.sibling}return null}var f=Object.assign,p=Symbol.for("react.element"),g=Symbol.for("react.transitional.element"),m=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),b=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),E=Symbol.for("react.provider"),S=Symbol.for("react.consumer"),T=Symbol.for("react.context"),I=Symbol.for("react.forward_ref"),P=Symbol.for("react.suspense"),F=Symbol.for("react.suspense_list"),M=Symbol.for("react.memo"),D=Symbol.for("react.lazy"),R=Symbol.for("react.activity"),B=Symbol.for("react.memo_cache_sentinel"),N=Symbol.iterator;function k(l){return l===null||typeof l!="object"?null:(l=N&&l[N]||l["@@iterator"],typeof l=="function"?l:null)}var j=Symbol.for("react.client.reference");function q(l){if(l==null)return null;if(typeof l=="function")return l.$$typeof===j?null:l.displayName||l.name||null;if(typeof l=="string")return l;switch(l){case x:return"Fragment";case A:return"Profiler";case b:return"StrictMode";case P:return"Suspense";case F:return"SuspenseList";case R:return"Activity"}if(typeof l=="object")switch(l.$$typeof){case m:return"Portal";case T:return(l.displayName||"Context")+".Provider";case S:return(l._context.displayName||"Context")+".Consumer";case I:var u=l.render;return l=l.displayName,l||(l=u.displayName||u.name||"",l=l!==""?"ForwardRef("+l+")":"ForwardRef"),l;case M:return u=l.displayName||null,u!==null?u:q(l.type)||"Memo";case D:u=l._payload,l=l._init;try{return q(l(u))}catch{}}return null}var X=Array.isArray,G=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,W=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,K={pending:!1,data:null,method:null,action:null},Z=[],fe=-1;function me(l){return{current:l}}function ve(l){0>fe||(l.current=Z[fe],Z[fe]=null,fe--)}function be(l,u){fe++,Z[fe]=l.current,l.current=u}var Me=me(null),ge=me(null),Le=me(null),Ne=me(null);function Se(l,u){switch(be(Le,u),be(ge,l),be(Me,null),u.nodeType){case 9:case 11:l=(l=u.documentElement)&&(l=l.namespaceURI)?yC(l):0;break;default:if(l=u.tagName,u=u.namespaceURI)u=yC(u),l=vC(u,l);else switch(l){case"svg":l=1;break;case"math":l=2;break;default:l=0}}ve(Me),be(Me,l)}function J(){ve(Me),ve(ge),ve(Le)}function he(l){l.memoizedState!==null&&be(Ne,l);var u=Me.current,h=vC(u,l.type);u!==h&&(be(ge,l),be(Me,h))}function ue(l){ge.current===l&&(ve(Me),ve(ge)),Ne.current===l&&(ve(Ne),Ah._currentValue=K)}var ie=Object.prototype.hasOwnProperty,Be=t.unstable_scheduleCallback,we=t.unstable_cancelCallback,$e=t.unstable_shouldYield,Oe=t.unstable_requestPaint,De=t.unstable_now,qe=t.unstable_getCurrentPriorityLevel,We=t.unstable_ImmediatePriority,Re=t.unstable_UserBlockingPriority,ke=t.unstable_NormalPriority,ht=t.unstable_LowPriority,_t=t.unstable_IdlePriority,xn=t.log,Pn=t.unstable_setDisableYieldValue,rt=null,at=null;function In(l){if(typeof xn=="function"&&Pn(l),at&&typeof at.setStrictMode=="function")try{at.setStrictMode(rt,l)}catch{}}var Qe=Math.clz32?Math.clz32:tn,mt=Math.log,Nt=Math.LN2;function tn(l){return l>>>=0,l===0?32:31-(mt(l)/Nt|0)|0}var An=256,Dn=4194304;function qt(l){var u=l&42;if(u!==0)return u;switch(l&-l){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return l&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return l}}function qr(l,u,h){var y=l.pendingLanes;if(y===0)return 0;var _=0,C=l.suspendedLanes,U=l.pingedLanes;l=l.warmLanes;var z=y&134217727;return z!==0?(y=z&~C,y!==0?_=qt(y):(U&=z,U!==0?_=qt(U):h||(h=z&~l,h!==0&&(_=qt(h))))):(z=y&~C,z!==0?_=qt(z):U!==0?_=qt(U):h||(h=y&~l,h!==0&&(_=qt(h)))),_===0?0:u!==0&&u!==_&&(u&C)===0&&(C=_&-_,h=u&-u,C>=h||C===32&&(h&4194048)!==0)?u:_}function yt(l,u){return(l.pendingLanes&~(l.suspendedLanes&~l.pingedLanes)&u)===0}function Vn(l,u){switch(l){case 1:case 2:case 4:case 8:case 64:return u+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Jn(){var l=An;return An<<=1,(An&4194048)===0&&(An=256),l}function Xr(){var l=Dn;return Dn<<=1,(Dn&62914560)===0&&(Dn=4194304),l}function Ei(l){for(var u=[],h=0;31>h;h++)u.push(l);return u}function lr(l,u){l.pendingLanes|=u,u!==268435456&&(l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0)}function Jl(l,u,h,y,_,C){var U=l.pendingLanes;l.pendingLanes=h,l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0,l.expiredLanes&=h,l.entangledLanes&=h,l.errorRecoveryDisabledLanes&=h,l.shellSuspendCounter=0;var z=l.entanglements,Q=l.expirationTimes,le=l.hiddenUpdates;for(h=U&~h;0<h;){var Ee=31-Qe(h),Te=1<<Ee;z[Ee]=0,Q[Ee]=-1;var de=le[Ee];if(de!==null)for(le[Ee]=null,Ee=0;Ee<de.length;Ee++){var pe=de[Ee];pe!==null&&(pe.lane&=-536870913)}h&=~Te}y!==0&&ua(l,y,0),C!==0&&_===0&&l.tag!==0&&(l.suspendedLanes|=C&~(U&~u))}function ua(l,u,h){l.pendingLanes|=u,l.suspendedLanes&=~u;var y=31-Qe(u);l.entangledLanes|=u,l.entanglements[y]=l.entanglements[y]|1073741824|h&4194090}function yu(l,u){var h=l.entangledLanes|=u;for(l=l.entanglements;h;){var y=31-Qe(h),_=1<<y;_&u|l[y]&u&&(l[y]|=u),h&=~_}}function Gs(l){switch(l){case 2:l=1;break;case 8:l=4;break;case 32:l=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:l=128;break;case 268435456:l=134217728;break;default:l=0}return l}function wn(l){return l&=-l,2<l?8<l?(l&134217727)!==0?32:268435456:8:2}function cr(){var l=W.p;return l!==0?l:(l=window.event,l===void 0?32:BC(l.type))}function ec(l,u){var h=W.p;try{return W.p=l,u()}finally{W.p=h}}var kn=Math.random().toString(36).slice(2),xr="__reactFiber$"+kn,ur="__reactProps$"+kn,da="__reactContainer$"+kn,If="__reactEvents$"+kn,Gy="__reactListeners$"+kn,Ho="__reactHandles$"+kn,mp="__reactResources$"+kn,tc="__reactMarker$"+kn;function zo(l){delete l[xr],delete l[ur],delete l[If],delete l[Gy],delete l[Ho]}function Ws(l){var u=l[xr];if(u)return u;for(var h=l.parentNode;h;){if(u=h[da]||h[xr]){if(h=u.alternate,u.child!==null||h!==null&&h.child!==null)for(l=_C(l);l!==null;){if(h=l[xr])return h;l=_C(l)}return u}l=h,h=l.parentNode}return null}function is(l){if(l=l[xr]||l[da]){var u=l.tag;if(u===5||u===6||u===13||u===26||u===27||u===3)return l}return null}function as(l){var u=l.tag;if(u===5||u===26||u===27||u===6)return l.stateNode;throw Error(r(33))}function Si(l){var u=l[mp];return u||(u=l[mp]={hoistableStyles:new Map,hoistableScripts:new Map}),u}function er(l){l[tc]=!0}var Df=new Set,vu={};function Na(l,u){Ys(l,u),Ys(l+"Capture",u)}function Ys(l,u){for(vu[l]=u,l=0;l<u.length;l++)Df.add(u[l])}var yp=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),vp={},nc={};function xp(l){return ie.call(nc,l)?!0:ie.call(vp,l)?!1:yp.test(l)?nc[l]=!0:(vp[l]=!0,!1)}function $o(l,u,h){if(xp(u))if(h===null)l.removeAttribute(u);else{switch(typeof h){case"undefined":case"function":case"symbol":l.removeAttribute(u);return;case"boolean":var y=u.toLowerCase().slice(0,5);if(y!=="data-"&&y!=="aria-"){l.removeAttribute(u);return}}l.setAttribute(u,""+h)}}function ss(l,u,h){if(h===null)l.removeAttribute(u);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(u);return}l.setAttribute(u,""+h)}}function Kr(l,u,h,y){if(y===null)l.removeAttribute(h);else{switch(typeof y){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(h);return}l.setAttributeNS(u,h,""+y)}}var rc,wp;function qs(l){if(rc===void 0)try{throw Error()}catch(h){var u=h.stack.trim().match(/\n( *(at )?)/);rc=u&&u[1]||"",wp=-1<h.stack.indexOf(`
    at`)?" (<anonymous>)":-1<h.stack.indexOf("@")?"@unknown:0:0":""}return`
`+rc+l+wp}var xu=!1;function wu(l,u){if(!l||xu)return"";xu=!0;var h=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var y={DetermineComponentFrameRoot:function(){try{if(u){var Te=function(){throw Error()};if(Object.defineProperty(Te.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Te,[])}catch(pe){var de=pe}Reflect.construct(l,[],Te)}else{try{Te.call()}catch(pe){de=pe}l.call(Te.prototype)}}else{try{throw Error()}catch(pe){de=pe}(Te=l())&&typeof Te.catch=="function"&&Te.catch(function(){})}}catch(pe){if(pe&&de&&typeof pe.stack=="string")return[pe.stack,de.stack]}return[null,null]}};y.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var _=Object.getOwnPropertyDescriptor(y.DetermineComponentFrameRoot,"name");_&&_.configurable&&Object.defineProperty(y.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var C=y.DetermineComponentFrameRoot(),U=C[0],z=C[1];if(U&&z){var Q=U.split(`
`),le=z.split(`
`);for(_=y=0;y<Q.length&&!Q[y].includes("DetermineComponentFrameRoot");)y++;for(;_<le.length&&!le[_].includes("DetermineComponentFrameRoot");)_++;if(y===Q.length||_===le.length)for(y=Q.length-1,_=le.length-1;1<=y&&0<=_&&Q[y]!==le[_];)_--;for(;1<=y&&0<=_;y--,_--)if(Q[y]!==le[_]){if(y!==1||_!==1)do if(y--,_--,0>_||Q[y]!==le[_]){var Ee=`
`+Q[y].replace(" at new "," at ");return l.displayName&&Ee.includes("<anonymous>")&&(Ee=Ee.replace("<anonymous>",l.displayName)),Ee}while(1<=y&&0<=_);break}}}finally{xu=!1,Error.prepareStackTrace=h}return(h=l?l.displayName||l.name:"")?qs(h):""}function Rf(l){switch(l.tag){case 26:case 27:case 5:return qs(l.type);case 16:return qs("Lazy");case 13:return qs("Suspense");case 19:return qs("SuspenseList");case 0:case 15:return wu(l.type,!1);case 11:return wu(l.type.render,!1);case 1:return wu(l.type,!0);case 31:return qs("Activity");default:return""}}function bu(l){try{var u="";do u+=Rf(l),l=l.return;while(l);return u}catch(h){return`
Error generating stack: `+h.message+`
`+h.stack}}function Ci(l){switch(typeof l){case"bigint":case"boolean":case"number":case"string":case"undefined":return l;case"object":return l;default:return""}}function Of(l){var u=l.type;return(l=l.nodeName)&&l.toLowerCase()==="input"&&(u==="checkbox"||u==="radio")}function Wy(l){var u=Of(l)?"checked":"value",h=Object.getOwnPropertyDescriptor(l.constructor.prototype,u),y=""+l[u];if(!l.hasOwnProperty(u)&&typeof h<"u"&&typeof h.get=="function"&&typeof h.set=="function"){var _=h.get,C=h.set;return Object.defineProperty(l,u,{configurable:!0,get:function(){return _.call(this)},set:function(U){y=""+U,C.call(this,U)}}),Object.defineProperty(l,u,{enumerable:h.enumerable}),{getValue:function(){return y},setValue:function(U){y=""+U},stopTracking:function(){l._valueTracker=null,delete l[u]}}}}function _u(l){l._valueTracker||(l._valueTracker=Wy(l))}function Mf(l){if(!l)return!1;var u=l._valueTracker;if(!u)return!0;var h=u.getValue(),y="";return l&&(y=Of(l)?l.checked?"true":"false":l.value),l=y,l!==h?(u.setValue(l),!0):!1}function ic(l){if(l=l||(typeof document<"u"?document:void 0),typeof l>"u")return null;try{return l.activeElement||l.body}catch{return l.body}}var Yy=/[\n"\\]/g;function dr(l){return l.replace(Yy,function(u){return"\\"+u.charCodeAt(0).toString(16)+" "})}function Xi(l,u,h,y,_,C,U,z){l.name="",U!=null&&typeof U!="function"&&typeof U!="symbol"&&typeof U!="boolean"?l.type=U:l.removeAttribute("type"),u!=null?U==="number"?(u===0&&l.value===""||l.value!=u)&&(l.value=""+Ci(u)):l.value!==""+Ci(u)&&(l.value=""+Ci(u)):U!=="submit"&&U!=="reset"||l.removeAttribute("value"),u!=null?Go(l,U,Ci(u)):h!=null?Go(l,U,Ci(h)):y!=null&&l.removeAttribute("value"),_==null&&C!=null&&(l.defaultChecked=!!C),_!=null&&(l.checked=_&&typeof _!="function"&&typeof _!="symbol"),z!=null&&typeof z!="function"&&typeof z!="symbol"&&typeof z!="boolean"?l.name=""+Ci(z):l.removeAttribute("name")}function ac(l,u,h,y,_,C,U,z){if(C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"&&(l.type=C),u!=null||h!=null){if(!(C!=="submit"&&C!=="reset"||u!=null))return;h=h!=null?""+Ci(h):"",u=u!=null?""+Ci(u):h,z||u===l.value||(l.value=u),l.defaultValue=u}y=y??_,y=typeof y!="function"&&typeof y!="symbol"&&!!y,l.checked=z?l.checked:!!y,l.defaultChecked=!!y,U!=null&&typeof U!="function"&&typeof U!="symbol"&&typeof U!="boolean"&&(l.name=U)}function Go(l,u,h){u==="number"&&ic(l.ownerDocument)===l||l.defaultValue===""+h||(l.defaultValue=""+h)}function Xs(l,u,h,y){if(l=l.options,u){u={};for(var _=0;_<h.length;_++)u["$"+h[_]]=!0;for(h=0;h<l.length;h++)_=u.hasOwnProperty("$"+l[h].value),l[h].selected!==_&&(l[h].selected=_),_&&y&&(l[h].defaultSelected=!0)}else{for(h=""+Ci(h),u=null,_=0;_<l.length;_++){if(l[_].value===h){l[_].selected=!0,y&&(l[_].defaultSelected=!0);return}u!==null||l[_].disabled||(u=l[_])}u!==null&&(u.selected=!0)}}function fn(l,u,h){if(u!=null&&(u=""+Ci(u),u!==l.value&&(l.value=u),h==null)){l.defaultValue!==u&&(l.defaultValue=u);return}l.defaultValue=h!=null?""+Ci(h):""}function sc(l,u,h,y){if(u==null){if(y!=null){if(h!=null)throw Error(r(92));if(X(y)){if(1<y.length)throw Error(r(93));y=y[0]}h=y}h==null&&(h=""),u=h}h=Ci(u),l.defaultValue=h,y=l.textContent,y===h&&y!==""&&y!==null&&(l.value=y)}function fa(l,u){if(u){var h=l.firstChild;if(h&&h===l.lastChild&&h.nodeType===3){h.nodeValue=u;return}}l.textContent=u}var oc=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function bp(l,u,h){var y=u.indexOf("--")===0;h==null||typeof h=="boolean"||h===""?y?l.setProperty(u,""):u==="float"?l.cssFloat="":l[u]="":y?l.setProperty(u,h):typeof h!="number"||h===0||oc.has(u)?u==="float"?l.cssFloat=h:l[u]=(""+h).trim():l[u]=h+"px"}function Pf(l,u,h){if(u!=null&&typeof u!="object")throw Error(r(62));if(l=l.style,h!=null){for(var y in h)!h.hasOwnProperty(y)||u!=null&&u.hasOwnProperty(y)||(y.indexOf("--")===0?l.setProperty(y,""):y==="float"?l.cssFloat="":l[y]="");for(var _ in u)y=u[_],u.hasOwnProperty(_)&&h[_]!==y&&bp(l,_,y)}else for(var C in u)u.hasOwnProperty(C)&&bp(l,C,u[C])}function kf(l){if(l.indexOf("-")===-1)return!1;switch(l){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var qy=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Xy=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Au(l){return Xy.test(""+l)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":l}var Ks=null;function ha(l){return l=l.target||l.srcElement||window,l.correspondingUseElement&&(l=l.correspondingUseElement),l.nodeType===3?l.parentNode:l}var Qs=null,Zs=null;function Nf(l){var u=is(l);if(u&&(l=u.stateNode)){var h=l[ur]||null;e:switch(l=u.stateNode,u.type){case"input":if(Xi(l,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name),u=h.name,h.type==="radio"&&u!=null){for(h=l;h.parentNode;)h=h.parentNode;for(h=h.querySelectorAll('input[name="'+dr(""+u)+'"][type="radio"]'),u=0;u<h.length;u++){var y=h[u];if(y!==l&&y.form===l.form){var _=y[ur]||null;if(!_)throw Error(r(90));Xi(y,_.value,_.defaultValue,_.defaultValue,_.checked,_.defaultChecked,_.type,_.name)}}for(u=0;u<h.length;u++)y=h[u],y.form===l.form&&Mf(y)}break e;case"textarea":fn(l,h.value,h.defaultValue);break e;case"select":u=h.value,u!=null&&Xs(l,!!h.multiple,u,!1)}}}var os=!1;function _p(l,u,h){if(os)return l(u,h);os=!0;try{var y=l(u);return y}finally{if(os=!1,(Qs!==null||Zs!==null)&&(gg(),Qs&&(u=Qs,l=Zs,Zs=Qs=null,Nf(u),l)))for(u=0;u<l.length;u++)Nf(l[u])}}function lc(l,u){var h=l.stateNode;if(h===null)return null;var y=h[ur]||null;if(y===null)return null;h=y[u];e:switch(u){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(y=!y.disabled)||(l=l.type,y=!(l==="button"||l==="input"||l==="select"||l==="textarea")),l=!y;break e;default:l=!1}if(l)return null;if(h&&typeof h!="function")throw Error(r(231,u,typeof h));return h}var La=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),pa=!1;if(La)try{var cc={};Object.defineProperty(cc,"passive",{get:function(){pa=!0}}),window.addEventListener("test",cc,cc),window.removeEventListener("test",cc,cc)}catch{pa=!1}var ls=null,Wo=null,Js=null;function Lf(){if(Js)return Js;var l,u=Wo,h=u.length,y,_="value"in ls?ls.value:ls.textContent,C=_.length;for(l=0;l<h&&u[l]===_[l];l++);var U=h-l;for(y=1;y<=U&&u[h-y]===_[C-y];y++);return Js=_.slice(l,1<y?1-y:void 0)}function cs(l){var u=l.keyCode;return"charCode"in l?(l=l.charCode,l===0&&u===13&&(l=13)):l=u,l===10&&(l=13),32<=l||l===13?l:0}function us(){return!0}function Bf(){return!1}function Nr(l){function u(h,y,_,C,U){this._reactName=h,this._targetInst=_,this.type=y,this.nativeEvent=C,this.target=U,this.currentTarget=null;for(var z in l)l.hasOwnProperty(z)&&(h=l[z],this[z]=h?h(C):C[z]);return this.isDefaultPrevented=(C.defaultPrevented!=null?C.defaultPrevented:C.returnValue===!1)?us:Bf,this.isPropagationStopped=Bf,this}return f(u.prototype,{preventDefault:function(){this.defaultPrevented=!0;var h=this.nativeEvent;h&&(h.preventDefault?h.preventDefault():typeof h.returnValue!="unknown"&&(h.returnValue=!1),this.isDefaultPrevented=us)},stopPropagation:function(){var h=this.nativeEvent;h&&(h.stopPropagation?h.stopPropagation():typeof h.cancelBubble!="unknown"&&(h.cancelBubble=!0),this.isPropagationStopped=us)},persist:function(){},isPersistent:us}),u}var nn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(l){return l.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Eu=Nr(nn),uc=f({},nn,{view:0,detail:0}),Ap=Nr(uc),Su,Cu,ds,dc=f({},uc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:pc,button:0,buttons:0,relatedTarget:function(l){return l.relatedTarget===void 0?l.fromElement===l.srcElement?l.toElement:l.fromElement:l.relatedTarget},movementX:function(l){return"movementX"in l?l.movementX:(l!==ds&&(ds&&l.type==="mousemove"?(Su=l.screenX-ds.screenX,Cu=l.screenY-ds.screenY):Cu=Su=0,ds=l),Su)},movementY:function(l){return"movementY"in l?l.movementY:Cu}}),ga=Nr(dc),Ep=f({},dc,{dataTransfer:0}),Ky=Nr(Ep),fc=f({},uc,{relatedTarget:0}),Tu=Nr(fc),Ff=f({},nn,{animationName:0,elapsedTime:0,pseudoElement:0}),Iu=Nr(Ff),Sp=f({},nn,{clipboardData:function(l){return"clipboardData"in l?l.clipboardData:window.clipboardData}}),Du=Nr(Sp),Qy=f({},nn,{data:0}),jf=Nr(Qy),hc={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Cp={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Tp={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Vf(l){var u=this.nativeEvent;return u.getModifierState?u.getModifierState(l):(l=Tp[l])?!!u[l]:!1}function pc(){return Vf}var Ip=f({},uc,{key:function(l){if(l.key){var u=hc[l.key]||l.key;if(u!=="Unidentified")return u}return l.type==="keypress"?(l=cs(l),l===13?"Enter":String.fromCharCode(l)):l.type==="keydown"||l.type==="keyup"?Cp[l.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:pc,charCode:function(l){return l.type==="keypress"?cs(l):0},keyCode:function(l){return l.type==="keydown"||l.type==="keyup"?l.keyCode:0},which:function(l){return l.type==="keypress"?cs(l):l.type==="keydown"||l.type==="keyup"?l.keyCode:0}}),Ru=Nr(Ip),Dp=f({},dc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Uf=Nr(Dp),eo=f({},uc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:pc}),Rp=Nr(eo),Op=f({},nn,{propertyName:0,elapsedTime:0,pseudoElement:0}),Mp=Nr(Op),Pp=f({},dc,{deltaX:function(l){return"deltaX"in l?l.deltaX:"wheelDeltaX"in l?-l.wheelDeltaX:0},deltaY:function(l){return"deltaY"in l?l.deltaY:"wheelDeltaY"in l?-l.wheelDeltaY:"wheelDelta"in l?-l.wheelDelta:0},deltaZ:0,deltaMode:0}),Ou=Nr(Pp),Ti=f({},nn,{newState:0,oldState:0}),kp=Nr(Ti),Np=[9,13,27,32],fs=La&&"CompositionEvent"in window,w=null;La&&"documentMode"in document&&(w=document.documentMode);var L=La&&"TextEvent"in window&&!w,V=La&&(!fs||w&&8<w&&11>=w),$=" ",se=!1;function ye(l,u){switch(l){case"keyup":return Np.indexOf(u.keyCode)!==-1;case"keydown":return u.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Fe(l){return l=l.detail,typeof l=="object"&&"data"in l?l.data:null}var Lt=!1;function wr(l,u){switch(l){case"compositionend":return Fe(u);case"keypress":return u.which!==32?null:(se=!0,$);case"textInput":return l=u.data,l===$&&se?null:l;default:return null}}function Bt(l,u){if(Lt)return l==="compositionend"||!fs&&ye(l,u)?(l=Lf(),Js=Wo=ls=null,Lt=!1,l):null;switch(l){case"paste":return null;case"keypress":if(!(u.ctrlKey||u.altKey||u.metaKey)||u.ctrlKey&&u.altKey){if(u.char&&1<u.char.length)return u.char;if(u.which)return String.fromCharCode(u.which)}return null;case"compositionend":return V&&u.locale!=="ko"?null:u.data;default:return null}}var Lr={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function br(l){var u=l&&l.nodeName&&l.nodeName.toLowerCase();return u==="input"?!!Lr[l.type]:u==="textarea"}function to(l,u,h,y){Qs?Zs?Zs.push(y):Zs=[y]:Qs=y,u=bg(u,"onChange"),0<u.length&&(h=new Eu("onChange","change",null,h,y),l.push({event:h,listeners:u}))}var Qr=null,hs=null;function Hf(l){fC(l,0)}function Lp(l){var u=as(l);if(Mf(u))return l}function PA(l,u){if(l==="change")return u}var kA=!1;if(La){var Zy;if(La){var Jy="oninput"in document;if(!Jy){var NA=document.createElement("div");NA.setAttribute("oninput","return;"),Jy=typeof NA.oninput=="function"}Zy=Jy}else Zy=!1;kA=Zy&&(!document.documentMode||9<document.documentMode)}function LA(){Qr&&(Qr.detachEvent("onpropertychange",BA),hs=Qr=null)}function BA(l){if(l.propertyName==="value"&&Lp(hs)){var u=[];to(u,hs,l,ha(l)),_p(Hf,u)}}function m6(l,u,h){l==="focusin"?(LA(),Qr=u,hs=h,Qr.attachEvent("onpropertychange",BA)):l==="focusout"&&LA()}function y6(l){if(l==="selectionchange"||l==="keyup"||l==="keydown")return Lp(hs)}function v6(l,u){if(l==="click")return Lp(u)}function x6(l,u){if(l==="input"||l==="change")return Lp(u)}function w6(l,u){return l===u&&(l!==0||1/l===1/u)||l!==l&&u!==u}var Ki=typeof Object.is=="function"?Object.is:w6;function zf(l,u){if(Ki(l,u))return!0;if(typeof l!="object"||l===null||typeof u!="object"||u===null)return!1;var h=Object.keys(l),y=Object.keys(u);if(h.length!==y.length)return!1;for(y=0;y<h.length;y++){var _=h[y];if(!ie.call(u,_)||!Ki(l[_],u[_]))return!1}return!0}function FA(l){for(;l&&l.firstChild;)l=l.firstChild;return l}function jA(l,u){var h=FA(l);l=0;for(var y;h;){if(h.nodeType===3){if(y=l+h.textContent.length,l<=u&&y>=u)return{node:h,offset:u-l};l=y}e:{for(;h;){if(h.nextSibling){h=h.nextSibling;break e}h=h.parentNode}h=void 0}h=FA(h)}}function VA(l,u){return l&&u?l===u?!0:l&&l.nodeType===3?!1:u&&u.nodeType===3?VA(l,u.parentNode):"contains"in l?l.contains(u):l.compareDocumentPosition?!!(l.compareDocumentPosition(u)&16):!1:!1}function UA(l){l=l!=null&&l.ownerDocument!=null&&l.ownerDocument.defaultView!=null?l.ownerDocument.defaultView:window;for(var u=ic(l.document);u instanceof l.HTMLIFrameElement;){try{var h=typeof u.contentWindow.location.href=="string"}catch{h=!1}if(h)l=u.contentWindow;else break;u=ic(l.document)}return u}function ev(l){var u=l&&l.nodeName&&l.nodeName.toLowerCase();return u&&(u==="input"&&(l.type==="text"||l.type==="search"||l.type==="tel"||l.type==="url"||l.type==="password")||u==="textarea"||l.contentEditable==="true")}var b6=La&&"documentMode"in document&&11>=document.documentMode,Mu=null,tv=null,$f=null,nv=!1;function HA(l,u,h){var y=h.window===h?h.document:h.nodeType===9?h:h.ownerDocument;nv||Mu==null||Mu!==ic(y)||(y=Mu,"selectionStart"in y&&ev(y)?y={start:y.selectionStart,end:y.selectionEnd}:(y=(y.ownerDocument&&y.ownerDocument.defaultView||window).getSelection(),y={anchorNode:y.anchorNode,anchorOffset:y.anchorOffset,focusNode:y.focusNode,focusOffset:y.focusOffset}),$f&&zf($f,y)||($f=y,y=bg(tv,"onSelect"),0<y.length&&(u=new Eu("onSelect","select",null,u,h),l.push({event:u,listeners:y}),u.target=Mu)))}function gc(l,u){var h={};return h[l.toLowerCase()]=u.toLowerCase(),h["Webkit"+l]="webkit"+u,h["Moz"+l]="moz"+u,h}var Pu={animationend:gc("Animation","AnimationEnd"),animationiteration:gc("Animation","AnimationIteration"),animationstart:gc("Animation","AnimationStart"),transitionrun:gc("Transition","TransitionRun"),transitionstart:gc("Transition","TransitionStart"),transitioncancel:gc("Transition","TransitionCancel"),transitionend:gc("Transition","TransitionEnd")},rv={},zA={};La&&(zA=document.createElement("div").style,"AnimationEvent"in window||(delete Pu.animationend.animation,delete Pu.animationiteration.animation,delete Pu.animationstart.animation),"TransitionEvent"in window||delete Pu.transitionend.transition);function mc(l){if(rv[l])return rv[l];if(!Pu[l])return l;var u=Pu[l],h;for(h in u)if(u.hasOwnProperty(h)&&h in zA)return rv[l]=u[h];return l}var $A=mc("animationend"),GA=mc("animationiteration"),WA=mc("animationstart"),_6=mc("transitionrun"),A6=mc("transitionstart"),E6=mc("transitioncancel"),YA=mc("transitionend"),qA=new Map,iv="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");iv.push("scrollEnd");function Ba(l,u){qA.set(l,u),Na(u,[l])}var XA=new WeakMap;function ma(l,u){if(typeof l=="object"&&l!==null){var h=XA.get(l);return h!==void 0?h:(u={value:l,source:u,stack:bu(u)},XA.set(l,u),u)}return{value:l,source:u,stack:bu(u)}}var ya=[],ku=0,av=0;function Bp(){for(var l=ku,u=av=ku=0;u<l;){var h=ya[u];ya[u++]=null;var y=ya[u];ya[u++]=null;var _=ya[u];ya[u++]=null;var C=ya[u];if(ya[u++]=null,y!==null&&_!==null){var U=y.pending;U===null?_.next=_:(_.next=U.next,U.next=_),y.pending=_}C!==0&&KA(h,_,C)}}function Fp(l,u,h,y){ya[ku++]=l,ya[ku++]=u,ya[ku++]=h,ya[ku++]=y,av|=y,l.lanes|=y,l=l.alternate,l!==null&&(l.lanes|=y)}function sv(l,u,h,y){return Fp(l,u,h,y),jp(l)}function Nu(l,u){return Fp(l,null,null,u),jp(l)}function KA(l,u,h){l.lanes|=h;var y=l.alternate;y!==null&&(y.lanes|=h);for(var _=!1,C=l.return;C!==null;)C.childLanes|=h,y=C.alternate,y!==null&&(y.childLanes|=h),C.tag===22&&(l=C.stateNode,l===null||l._visibility&1||(_=!0)),l=C,C=C.return;return l.tag===3?(C=l.stateNode,_&&u!==null&&(_=31-Qe(h),l=C.hiddenUpdates,y=l[_],y===null?l[_]=[u]:y.push(u),u.lane=h|536870912),C):null}function jp(l){if(50<gh)throw gh=0,fx=null,Error(r(185));for(var u=l.return;u!==null;)l=u,u=l.return;return l.tag===3?l.stateNode:null}var Lu={};function S6(l,u,h,y){this.tag=l,this.key=h,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=u,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=y,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Qi(l,u,h,y){return new S6(l,u,h,y)}function ov(l){return l=l.prototype,!(!l||!l.isReactComponent)}function no(l,u){var h=l.alternate;return h===null?(h=Qi(l.tag,u,l.key,l.mode),h.elementType=l.elementType,h.type=l.type,h.stateNode=l.stateNode,h.alternate=l,l.alternate=h):(h.pendingProps=u,h.type=l.type,h.flags=0,h.subtreeFlags=0,h.deletions=null),h.flags=l.flags&65011712,h.childLanes=l.childLanes,h.lanes=l.lanes,h.child=l.child,h.memoizedProps=l.memoizedProps,h.memoizedState=l.memoizedState,h.updateQueue=l.updateQueue,u=l.dependencies,h.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext},h.sibling=l.sibling,h.index=l.index,h.ref=l.ref,h.refCleanup=l.refCleanup,h}function QA(l,u){l.flags&=65011714;var h=l.alternate;return h===null?(l.childLanes=0,l.lanes=u,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=h.childLanes,l.lanes=h.lanes,l.child=h.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=h.memoizedProps,l.memoizedState=h.memoizedState,l.updateQueue=h.updateQueue,l.type=h.type,u=h.dependencies,l.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext}),l}function Vp(l,u,h,y,_,C){var U=0;if(y=l,typeof l=="function")ov(l)&&(U=1);else if(typeof l=="string")U=TN(l,h,Me.current)?26:l==="html"||l==="head"||l==="body"?27:5;else e:switch(l){case R:return l=Qi(31,h,u,_),l.elementType=R,l.lanes=C,l;case x:return yc(h.children,_,C,u);case b:U=8,_|=24;break;case A:return l=Qi(12,h,u,_|2),l.elementType=A,l.lanes=C,l;case P:return l=Qi(13,h,u,_),l.elementType=P,l.lanes=C,l;case F:return l=Qi(19,h,u,_),l.elementType=F,l.lanes=C,l;default:if(typeof l=="object"&&l!==null)switch(l.$$typeof){case E:case T:U=10;break e;case S:U=9;break e;case I:U=11;break e;case M:U=14;break e;case D:U=16,y=null;break e}U=29,h=Error(r(130,l===null?"null":typeof l,"")),y=null}return u=Qi(U,h,u,_),u.elementType=l,u.type=y,u.lanes=C,u}function yc(l,u,h,y){return l=Qi(7,l,y,u),l.lanes=h,l}function lv(l,u,h){return l=Qi(6,l,null,u),l.lanes=h,l}function cv(l,u,h){return u=Qi(4,l.children!==null?l.children:[],l.key,u),u.lanes=h,u.stateNode={containerInfo:l.containerInfo,pendingChildren:null,implementation:l.implementation},u}var Bu=[],Fu=0,Up=null,Hp=0,va=[],xa=0,vc=null,ro=1,io="";function xc(l,u){Bu[Fu++]=Hp,Bu[Fu++]=Up,Up=l,Hp=u}function ZA(l,u,h){va[xa++]=ro,va[xa++]=io,va[xa++]=vc,vc=l;var y=ro;l=io;var _=32-Qe(y)-1;y&=~(1<<_),h+=1;var C=32-Qe(u)+_;if(30<C){var U=_-_%5;C=(y&(1<<U)-1).toString(32),y>>=U,_-=U,ro=1<<32-Qe(u)+_|h<<_|y,io=C+l}else ro=1<<C|h<<_|y,io=l}function uv(l){l.return!==null&&(xc(l,1),ZA(l,1,0))}function dv(l){for(;l===Up;)Up=Bu[--Fu],Bu[Fu]=null,Hp=Bu[--Fu],Bu[Fu]=null;for(;l===vc;)vc=va[--xa],va[xa]=null,io=va[--xa],va[xa]=null,ro=va[--xa],va[xa]=null}var Ii=null,Yn=null,Xt=!1,wc=null,ps=!1,fv=Error(r(519));function bc(l){var u=Error(r(418,""));throw Yf(ma(u,l)),fv}function JA(l){var u=l.stateNode,h=l.type,y=l.memoizedProps;switch(u[xr]=l,u[ur]=y,h){case"dialog":Rt("cancel",u),Rt("close",u);break;case"iframe":case"object":case"embed":Rt("load",u);break;case"video":case"audio":for(h=0;h<yh.length;h++)Rt(yh[h],u);break;case"source":Rt("error",u);break;case"img":case"image":case"link":Rt("error",u),Rt("load",u);break;case"details":Rt("toggle",u);break;case"input":Rt("invalid",u),ac(u,y.value,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name,!0),_u(u);break;case"select":Rt("invalid",u);break;case"textarea":Rt("invalid",u),sc(u,y.value,y.defaultValue,y.children),_u(u)}h=y.children,typeof h!="string"&&typeof h!="number"&&typeof h!="bigint"||u.textContent===""+h||y.suppressHydrationWarning===!0||mC(u.textContent,h)?(y.popover!=null&&(Rt("beforetoggle",u),Rt("toggle",u)),y.onScroll!=null&&Rt("scroll",u),y.onScrollEnd!=null&&Rt("scrollend",u),y.onClick!=null&&(u.onclick=_g),u=!0):u=!1,u||bc(l)}function eE(l){for(Ii=l.return;Ii;)switch(Ii.tag){case 5:case 13:ps=!1;return;case 27:case 3:ps=!0;return;default:Ii=Ii.return}}function Gf(l){if(l!==Ii)return!1;if(!Xt)return eE(l),Xt=!0,!1;var u=l.tag,h;if((h=u!==3&&u!==27)&&((h=u===5)&&(h=l.type,h=!(h!=="form"&&h!=="button")||Ix(l.type,l.memoizedProps)),h=!h),h&&Yn&&bc(l),eE(l),u===13){if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(r(317));e:{for(l=l.nextSibling,u=0;l;){if(l.nodeType===8)if(h=l.data,h==="/$"){if(u===0){Yn=ja(l.nextSibling);break e}u--}else h!=="$"&&h!=="$!"&&h!=="$?"||u++;l=l.nextSibling}Yn=null}}else u===27?(u=Yn,ll(l.type)?(l=Mx,Mx=null,Yn=l):Yn=u):Yn=Ii?ja(l.stateNode.nextSibling):null;return!0}function Wf(){Yn=Ii=null,Xt=!1}function tE(){var l=wc;return l!==null&&(Ui===null?Ui=l:Ui.push.apply(Ui,l),wc=null),l}function Yf(l){wc===null?wc=[l]:wc.push(l)}var hv=me(null),_c=null,ao=null;function Yo(l,u,h){be(hv,u._currentValue),u._currentValue=h}function so(l){l._currentValue=hv.current,ve(hv)}function pv(l,u,h){for(;l!==null;){var y=l.alternate;if((l.childLanes&u)!==u?(l.childLanes|=u,y!==null&&(y.childLanes|=u)):y!==null&&(y.childLanes&u)!==u&&(y.childLanes|=u),l===h)break;l=l.return}}function gv(l,u,h,y){var _=l.child;for(_!==null&&(_.return=l);_!==null;){var C=_.dependencies;if(C!==null){var U=_.child;C=C.firstContext;e:for(;C!==null;){var z=C;C=_;for(var Q=0;Q<u.length;Q++)if(z.context===u[Q]){C.lanes|=h,z=C.alternate,z!==null&&(z.lanes|=h),pv(C.return,h,l),y||(U=null);break e}C=z.next}}else if(_.tag===18){if(U=_.return,U===null)throw Error(r(341));U.lanes|=h,C=U.alternate,C!==null&&(C.lanes|=h),pv(U,h,l),U=null}else U=_.child;if(U!==null)U.return=_;else for(U=_;U!==null;){if(U===l){U=null;break}if(_=U.sibling,_!==null){_.return=U.return,U=_;break}U=U.return}_=U}}function qf(l,u,h,y){l=null;for(var _=u,C=!1;_!==null;){if(!C){if((_.flags&524288)!==0)C=!0;else if((_.flags&262144)!==0)break}if(_.tag===10){var U=_.alternate;if(U===null)throw Error(r(387));if(U=U.memoizedProps,U!==null){var z=_.type;Ki(_.pendingProps.value,U.value)||(l!==null?l.push(z):l=[z])}}else if(_===Ne.current){if(U=_.alternate,U===null)throw Error(r(387));U.memoizedState.memoizedState!==_.memoizedState.memoizedState&&(l!==null?l.push(Ah):l=[Ah])}_=_.return}l!==null&&gv(u,l,h,y),u.flags|=262144}function zp(l){for(l=l.firstContext;l!==null;){if(!Ki(l.context._currentValue,l.memoizedValue))return!0;l=l.next}return!1}function Ac(l){_c=l,ao=null,l=l.dependencies,l!==null&&(l.firstContext=null)}function fi(l){return nE(_c,l)}function $p(l,u){return _c===null&&Ac(l),nE(l,u)}function nE(l,u){var h=u._currentValue;if(u={context:u,memoizedValue:h,next:null},ao===null){if(l===null)throw Error(r(308));ao=u,l.dependencies={lanes:0,firstContext:u},l.flags|=524288}else ao=ao.next=u;return h}var C6=typeof AbortController<"u"?AbortController:function(){var l=[],u=this.signal={aborted:!1,addEventListener:function(h,y){l.push(y)}};this.abort=function(){u.aborted=!0,l.forEach(function(h){return h()})}},T6=t.unstable_scheduleCallback,I6=t.unstable_NormalPriority,_r={$$typeof:T,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function mv(){return{controller:new C6,data:new Map,refCount:0}}function Xf(l){l.refCount--,l.refCount===0&&T6(I6,function(){l.controller.abort()})}var Kf=null,yv=0,ju=0,Vu=null;function D6(l,u){if(Kf===null){var h=Kf=[];yv=0,ju=xx(),Vu={status:"pending",value:void 0,then:function(y){h.push(y)}}}return yv++,u.then(rE,rE),u}function rE(){if(--yv===0&&Kf!==null){Vu!==null&&(Vu.status="fulfilled");var l=Kf;Kf=null,ju=0,Vu=null;for(var u=0;u<l.length;u++)(0,l[u])()}}function R6(l,u){var h=[],y={status:"pending",value:null,reason:null,then:function(_){h.push(_)}};return l.then(function(){y.status="fulfilled",y.value=u;for(var _=0;_<h.length;_++)(0,h[_])(u)},function(_){for(y.status="rejected",y.reason=_,_=0;_<h.length;_++)(0,h[_])(void 0)}),y}var iE=G.S;G.S=function(l,u){typeof u=="object"&&u!==null&&typeof u.then=="function"&&D6(l,u),iE!==null&&iE(l,u)};var Ec=me(null);function vv(){var l=Ec.current;return l!==null?l:En.pooledCache}function Gp(l,u){u===null?be(Ec,Ec.current):be(Ec,u.pool)}function aE(){var l=vv();return l===null?null:{parent:_r._currentValue,pool:l}}var Qf=Error(r(460)),sE=Error(r(474)),Wp=Error(r(542)),xv={then:function(){}};function oE(l){return l=l.status,l==="fulfilled"||l==="rejected"}function Yp(){}function lE(l,u,h){switch(h=l[h],h===void 0?l.push(u):h!==u&&(u.then(Yp,Yp),u=h),u.status){case"fulfilled":return u.value;case"rejected":throw l=u.reason,uE(l),l;default:if(typeof u.status=="string")u.then(Yp,Yp);else{if(l=En,l!==null&&100<l.shellSuspendCounter)throw Error(r(482));l=u,l.status="pending",l.then(function(y){if(u.status==="pending"){var _=u;_.status="fulfilled",_.value=y}},function(y){if(u.status==="pending"){var _=u;_.status="rejected",_.reason=y}})}switch(u.status){case"fulfilled":return u.value;case"rejected":throw l=u.reason,uE(l),l}throw Zf=u,Qf}}var Zf=null;function cE(){if(Zf===null)throw Error(r(459));var l=Zf;return Zf=null,l}function uE(l){if(l===Qf||l===Wp)throw Error(r(483))}var qo=!1;function wv(l){l.updateQueue={baseState:l.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function bv(l,u){l=l.updateQueue,u.updateQueue===l&&(u.updateQueue={baseState:l.baseState,firstBaseUpdate:l.firstBaseUpdate,lastBaseUpdate:l.lastBaseUpdate,shared:l.shared,callbacks:null})}function Xo(l){return{lane:l,tag:0,payload:null,callback:null,next:null}}function Ko(l,u,h){var y=l.updateQueue;if(y===null)return null;if(y=y.shared,(an&2)!==0){var _=y.pending;return _===null?u.next=u:(u.next=_.next,_.next=u),y.pending=u,u=jp(l),KA(l,null,h),u}return Fp(l,y,u,h),jp(l)}function Jf(l,u,h){if(u=u.updateQueue,u!==null&&(u=u.shared,(h&4194048)!==0)){var y=u.lanes;y&=l.pendingLanes,h|=y,u.lanes=h,yu(l,h)}}function _v(l,u){var h=l.updateQueue,y=l.alternate;if(y!==null&&(y=y.updateQueue,h===y)){var _=null,C=null;if(h=h.firstBaseUpdate,h!==null){do{var U={lane:h.lane,tag:h.tag,payload:h.payload,callback:null,next:null};C===null?_=C=U:C=C.next=U,h=h.next}while(h!==null);C===null?_=C=u:C=C.next=u}else _=C=u;h={baseState:y.baseState,firstBaseUpdate:_,lastBaseUpdate:C,shared:y.shared,callbacks:y.callbacks},l.updateQueue=h;return}l=h.lastBaseUpdate,l===null?h.firstBaseUpdate=u:l.next=u,h.lastBaseUpdate=u}var Av=!1;function eh(){if(Av){var l=Vu;if(l!==null)throw l}}function th(l,u,h,y){Av=!1;var _=l.updateQueue;qo=!1;var C=_.firstBaseUpdate,U=_.lastBaseUpdate,z=_.shared.pending;if(z!==null){_.shared.pending=null;var Q=z,le=Q.next;Q.next=null,U===null?C=le:U.next=le,U=Q;var Ee=l.alternate;Ee!==null&&(Ee=Ee.updateQueue,z=Ee.lastBaseUpdate,z!==U&&(z===null?Ee.firstBaseUpdate=le:z.next=le,Ee.lastBaseUpdate=Q))}if(C!==null){var Te=_.baseState;U=0,Ee=le=Q=null,z=C;do{var de=z.lane&-536870913,pe=de!==z.lane;if(pe?(Ft&de)===de:(y&de)===de){de!==0&&de===ju&&(Av=!0),Ee!==null&&(Ee=Ee.next={lane:0,tag:z.tag,payload:z.payload,callback:null,next:null});e:{var dt=l,st=z;de=u;var gn=h;switch(st.tag){case 1:if(dt=st.payload,typeof dt=="function"){Te=dt.call(gn,Te,de);break e}Te=dt;break e;case 3:dt.flags=dt.flags&-65537|128;case 0:if(dt=st.payload,de=typeof dt=="function"?dt.call(gn,Te,de):dt,de==null)break e;Te=f({},Te,de);break e;case 2:qo=!0}}de=z.callback,de!==null&&(l.flags|=64,pe&&(l.flags|=8192),pe=_.callbacks,pe===null?_.callbacks=[de]:pe.push(de))}else pe={lane:de,tag:z.tag,payload:z.payload,callback:z.callback,next:null},Ee===null?(le=Ee=pe,Q=Te):Ee=Ee.next=pe,U|=de;if(z=z.next,z===null){if(z=_.shared.pending,z===null)break;pe=z,z=pe.next,pe.next=null,_.lastBaseUpdate=pe,_.shared.pending=null}}while(!0);Ee===null&&(Q=Te),_.baseState=Q,_.firstBaseUpdate=le,_.lastBaseUpdate=Ee,C===null&&(_.shared.lanes=0),il|=U,l.lanes=U,l.memoizedState=Te}}function dE(l,u){if(typeof l!="function")throw Error(r(191,l));l.call(u)}function fE(l,u){var h=l.callbacks;if(h!==null)for(l.callbacks=null,l=0;l<h.length;l++)dE(h[l],u)}var Uu=me(null),qp=me(0);function hE(l,u){l=po,be(qp,l),be(Uu,u),po=l|u.baseLanes}function Ev(){be(qp,po),be(Uu,Uu.current)}function Sv(){po=qp.current,ve(Uu),ve(qp)}var Qo=0,At=null,hn=null,fr=null,Xp=!1,Hu=!1,Sc=!1,Kp=0,nh=0,zu=null,O6=0;function tr(){throw Error(r(321))}function Cv(l,u){if(u===null)return!1;for(var h=0;h<u.length&&h<l.length;h++)if(!Ki(l[h],u[h]))return!1;return!0}function Tv(l,u,h,y,_,C){return Qo=C,At=u,u.memoizedState=null,u.updateQueue=null,u.lanes=0,G.H=l===null||l.memoizedState===null?KE:QE,Sc=!1,C=h(y,_),Sc=!1,Hu&&(C=gE(u,h,y,_)),pE(l),C}function pE(l){G.H=ng;var u=hn!==null&&hn.next!==null;if(Qo=0,fr=hn=At=null,Xp=!1,nh=0,zu=null,u)throw Error(r(300));l===null||Br||(l=l.dependencies,l!==null&&zp(l)&&(Br=!0))}function gE(l,u,h,y){At=l;var _=0;do{if(Hu&&(zu=null),nh=0,Hu=!1,25<=_)throw Error(r(301));if(_+=1,fr=hn=null,l.updateQueue!=null){var C=l.updateQueue;C.lastEffect=null,C.events=null,C.stores=null,C.memoCache!=null&&(C.memoCache.index=0)}G.H=F6,C=u(h,y)}while(Hu);return C}function M6(){var l=G.H,u=l.useState()[0];return u=typeof u.then=="function"?rh(u):u,l=l.useState()[0],(hn!==null?hn.memoizedState:null)!==l&&(At.flags|=1024),u}function Iv(){var l=Kp!==0;return Kp=0,l}function Dv(l,u,h){u.updateQueue=l.updateQueue,u.flags&=-2053,l.lanes&=~h}function Rv(l){if(Xp){for(l=l.memoizedState;l!==null;){var u=l.queue;u!==null&&(u.pending=null),l=l.next}Xp=!1}Qo=0,fr=hn=At=null,Hu=!1,nh=Kp=0,zu=null}function ji(){var l={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return fr===null?At.memoizedState=fr=l:fr=fr.next=l,fr}function hr(){if(hn===null){var l=At.alternate;l=l!==null?l.memoizedState:null}else l=hn.next;var u=fr===null?At.memoizedState:fr.next;if(u!==null)fr=u,hn=l;else{if(l===null)throw At.alternate===null?Error(r(467)):Error(r(310));hn=l,l={memoizedState:hn.memoizedState,baseState:hn.baseState,baseQueue:hn.baseQueue,queue:hn.queue,next:null},fr===null?At.memoizedState=fr=l:fr=fr.next=l}return fr}function Ov(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function rh(l){var u=nh;return nh+=1,zu===null&&(zu=[]),l=lE(zu,l,u),u=At,(fr===null?u.memoizedState:fr.next)===null&&(u=u.alternate,G.H=u===null||u.memoizedState===null?KE:QE),l}function Qp(l){if(l!==null&&typeof l=="object"){if(typeof l.then=="function")return rh(l);if(l.$$typeof===T)return fi(l)}throw Error(r(438,String(l)))}function Mv(l){var u=null,h=At.updateQueue;if(h!==null&&(u=h.memoCache),u==null){var y=At.alternate;y!==null&&(y=y.updateQueue,y!==null&&(y=y.memoCache,y!=null&&(u={data:y.data.map(function(_){return _.slice()}),index:0})))}if(u==null&&(u={data:[],index:0}),h===null&&(h=Ov(),At.updateQueue=h),h.memoCache=u,h=u.data[u.index],h===void 0)for(h=u.data[u.index]=Array(l),y=0;y<l;y++)h[y]=B;return u.index++,h}function oo(l,u){return typeof u=="function"?u(l):u}function Zp(l){var u=hr();return Pv(u,hn,l)}function Pv(l,u,h){var y=l.queue;if(y===null)throw Error(r(311));y.lastRenderedReducer=h;var _=l.baseQueue,C=y.pending;if(C!==null){if(_!==null){var U=_.next;_.next=C.next,C.next=U}u.baseQueue=_=C,y.pending=null}if(C=l.baseState,_===null)l.memoizedState=C;else{u=_.next;var z=U=null,Q=null,le=u,Ee=!1;do{var Te=le.lane&-536870913;if(Te!==le.lane?(Ft&Te)===Te:(Qo&Te)===Te){var de=le.revertLane;if(de===0)Q!==null&&(Q=Q.next={lane:0,revertLane:0,action:le.action,hasEagerState:le.hasEagerState,eagerState:le.eagerState,next:null}),Te===ju&&(Ee=!0);else if((Qo&de)===de){le=le.next,de===ju&&(Ee=!0);continue}else Te={lane:0,revertLane:le.revertLane,action:le.action,hasEagerState:le.hasEagerState,eagerState:le.eagerState,next:null},Q===null?(z=Q=Te,U=C):Q=Q.next=Te,At.lanes|=de,il|=de;Te=le.action,Sc&&h(C,Te),C=le.hasEagerState?le.eagerState:h(C,Te)}else de={lane:Te,revertLane:le.revertLane,action:le.action,hasEagerState:le.hasEagerState,eagerState:le.eagerState,next:null},Q===null?(z=Q=de,U=C):Q=Q.next=de,At.lanes|=Te,il|=Te;le=le.next}while(le!==null&&le!==u);if(Q===null?U=C:Q.next=z,!Ki(C,l.memoizedState)&&(Br=!0,Ee&&(h=Vu,h!==null)))throw h;l.memoizedState=C,l.baseState=U,l.baseQueue=Q,y.lastRenderedState=C}return _===null&&(y.lanes=0),[l.memoizedState,y.dispatch]}function kv(l){var u=hr(),h=u.queue;if(h===null)throw Error(r(311));h.lastRenderedReducer=l;var y=h.dispatch,_=h.pending,C=u.memoizedState;if(_!==null){h.pending=null;var U=_=_.next;do C=l(C,U.action),U=U.next;while(U!==_);Ki(C,u.memoizedState)||(Br=!0),u.memoizedState=C,u.baseQueue===null&&(u.baseState=C),h.lastRenderedState=C}return[C,y]}function mE(l,u,h){var y=At,_=hr(),C=Xt;if(C){if(h===void 0)throw Error(r(407));h=h()}else h=u();var U=!Ki((hn||_).memoizedState,h);U&&(_.memoizedState=h,Br=!0),_=_.queue;var z=xE.bind(null,y,_,l);if(ih(2048,8,z,[l]),_.getSnapshot!==u||U||fr!==null&&fr.memoizedState.tag&1){if(y.flags|=2048,$u(9,Jp(),vE.bind(null,y,_,h,u),null),En===null)throw Error(r(349));C||(Qo&124)!==0||yE(y,u,h)}return h}function yE(l,u,h){l.flags|=16384,l={getSnapshot:u,value:h},u=At.updateQueue,u===null?(u=Ov(),At.updateQueue=u,u.stores=[l]):(h=u.stores,h===null?u.stores=[l]:h.push(l))}function vE(l,u,h,y){u.value=h,u.getSnapshot=y,wE(u)&&bE(l)}function xE(l,u,h){return h(function(){wE(u)&&bE(l)})}function wE(l){var u=l.getSnapshot;l=l.value;try{var h=u();return!Ki(l,h)}catch{return!0}}function bE(l){var u=Nu(l,2);u!==null&&na(u,l,2)}function Nv(l){var u=ji();if(typeof l=="function"){var h=l;if(l=h(),Sc){In(!0);try{h()}finally{In(!1)}}}return u.memoizedState=u.baseState=l,u.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:oo,lastRenderedState:l},u}function _E(l,u,h,y){return l.baseState=h,Pv(l,hn,typeof y=="function"?y:oo)}function P6(l,u,h,y,_){if(tg(l))throw Error(r(485));if(l=u.action,l!==null){var C={payload:_,action:l,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(U){C.listeners.push(U)}};G.T!==null?h(!0):C.isTransition=!1,y(C),h=u.pending,h===null?(C.next=u.pending=C,AE(u,C)):(C.next=h.next,u.pending=h.next=C)}}function AE(l,u){var h=u.action,y=u.payload,_=l.state;if(u.isTransition){var C=G.T,U={};G.T=U;try{var z=h(_,y),Q=G.S;Q!==null&&Q(U,z),EE(l,u,z)}catch(le){Lv(l,u,le)}finally{G.T=C}}else try{C=h(_,y),EE(l,u,C)}catch(le){Lv(l,u,le)}}function EE(l,u,h){h!==null&&typeof h=="object"&&typeof h.then=="function"?h.then(function(y){SE(l,u,y)},function(y){return Lv(l,u,y)}):SE(l,u,h)}function SE(l,u,h){u.status="fulfilled",u.value=h,CE(u),l.state=h,u=l.pending,u!==null&&(h=u.next,h===u?l.pending=null:(h=h.next,u.next=h,AE(l,h)))}function Lv(l,u,h){var y=l.pending;if(l.pending=null,y!==null){y=y.next;do u.status="rejected",u.reason=h,CE(u),u=u.next;while(u!==y)}l.action=null}function CE(l){l=l.listeners;for(var u=0;u<l.length;u++)(0,l[u])()}function TE(l,u){return u}function IE(l,u){if(Xt){var h=En.formState;if(h!==null){e:{var y=At;if(Xt){if(Yn){t:{for(var _=Yn,C=ps;_.nodeType!==8;){if(!C){_=null;break t}if(_=ja(_.nextSibling),_===null){_=null;break t}}C=_.data,_=C==="F!"||C==="F"?_:null}if(_){Yn=ja(_.nextSibling),y=_.data==="F!";break e}}bc(y)}y=!1}y&&(u=h[0])}}return h=ji(),h.memoizedState=h.baseState=u,y={pending:null,lanes:0,dispatch:null,lastRenderedReducer:TE,lastRenderedState:u},h.queue=y,h=YE.bind(null,At,y),y.dispatch=h,y=Nv(!1),C=Uv.bind(null,At,!1,y.queue),y=ji(),_={state:u,dispatch:null,action:l,pending:null},y.queue=_,h=P6.bind(null,At,_,C,h),_.dispatch=h,y.memoizedState=l,[u,h,!1]}function DE(l){var u=hr();return RE(u,hn,l)}function RE(l,u,h){if(u=Pv(l,u,TE)[0],l=Zp(oo)[0],typeof u=="object"&&u!==null&&typeof u.then=="function")try{var y=rh(u)}catch(U){throw U===Qf?Wp:U}else y=u;u=hr();var _=u.queue,C=_.dispatch;return h!==u.memoizedState&&(At.flags|=2048,$u(9,Jp(),k6.bind(null,_,h),null)),[y,C,l]}function k6(l,u){l.action=u}function OE(l){var u=hr(),h=hn;if(h!==null)return RE(u,h,l);hr(),u=u.memoizedState,h=hr();var y=h.queue.dispatch;return h.memoizedState=l,[u,y,!1]}function $u(l,u,h,y){return l={tag:l,create:h,deps:y,inst:u,next:null},u=At.updateQueue,u===null&&(u=Ov(),At.updateQueue=u),h=u.lastEffect,h===null?u.lastEffect=l.next=l:(y=h.next,h.next=l,l.next=y,u.lastEffect=l),l}function Jp(){return{destroy:void 0,resource:void 0}}function ME(){return hr().memoizedState}function eg(l,u,h,y){var _=ji();y=y===void 0?null:y,At.flags|=l,_.memoizedState=$u(1|u,Jp(),h,y)}function ih(l,u,h,y){var _=hr();y=y===void 0?null:y;var C=_.memoizedState.inst;hn!==null&&y!==null&&Cv(y,hn.memoizedState.deps)?_.memoizedState=$u(u,C,h,y):(At.flags|=l,_.memoizedState=$u(1|u,C,h,y))}function PE(l,u){eg(8390656,8,l,u)}function kE(l,u){ih(2048,8,l,u)}function NE(l,u){return ih(4,2,l,u)}function LE(l,u){return ih(4,4,l,u)}function BE(l,u){if(typeof u=="function"){l=l();var h=u(l);return function(){typeof h=="function"?h():u(null)}}if(u!=null)return l=l(),u.current=l,function(){u.current=null}}function FE(l,u,h){h=h!=null?h.concat([l]):null,ih(4,4,BE.bind(null,u,l),h)}function Bv(){}function jE(l,u){var h=hr();u=u===void 0?null:u;var y=h.memoizedState;return u!==null&&Cv(u,y[1])?y[0]:(h.memoizedState=[l,u],l)}function VE(l,u){var h=hr();u=u===void 0?null:u;var y=h.memoizedState;if(u!==null&&Cv(u,y[1]))return y[0];if(y=l(),Sc){In(!0);try{l()}finally{In(!1)}}return h.memoizedState=[y,u],y}function Fv(l,u,h){return h===void 0||(Qo&1073741824)!==0?l.memoizedState=u:(l.memoizedState=h,l=zS(),At.lanes|=l,il|=l,h)}function UE(l,u,h,y){return Ki(h,u)?h:Uu.current!==null?(l=Fv(l,h,y),Ki(l,u)||(Br=!0),l):(Qo&42)===0?(Br=!0,l.memoizedState=h):(l=zS(),At.lanes|=l,il|=l,u)}function HE(l,u,h,y,_){var C=W.p;W.p=C!==0&&8>C?C:8;var U=G.T,z={};G.T=z,Uv(l,!1,u,h);try{var Q=_(),le=G.S;if(le!==null&&le(z,Q),Q!==null&&typeof Q=="object"&&typeof Q.then=="function"){var Ee=R6(Q,y);ah(l,u,Ee,ta(l))}else ah(l,u,y,ta(l))}catch(Te){ah(l,u,{then:function(){},status:"rejected",reason:Te},ta())}finally{W.p=C,G.T=U}}function N6(){}function jv(l,u,h,y){if(l.tag!==5)throw Error(r(476));var _=zE(l).queue;HE(l,_,u,K,h===null?N6:function(){return $E(l),h(y)})}function zE(l){var u=l.memoizedState;if(u!==null)return u;u={memoizedState:K,baseState:K,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:oo,lastRenderedState:K},next:null};var h={};return u.next={memoizedState:h,baseState:h,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:oo,lastRenderedState:h},next:null},l.memoizedState=u,l=l.alternate,l!==null&&(l.memoizedState=u),u}function $E(l){var u=zE(l).next.queue;ah(l,u,{},ta())}function Vv(){return fi(Ah)}function GE(){return hr().memoizedState}function WE(){return hr().memoizedState}function L6(l){for(var u=l.return;u!==null;){switch(u.tag){case 24:case 3:var h=ta();l=Xo(h);var y=Ko(u,l,h);y!==null&&(na(y,u,h),Jf(y,u,h)),u={cache:mv()},l.payload=u;return}u=u.return}}function B6(l,u,h){var y=ta();h={lane:y,revertLane:0,action:h,hasEagerState:!1,eagerState:null,next:null},tg(l)?qE(u,h):(h=sv(l,u,h,y),h!==null&&(na(h,l,y),XE(h,u,y)))}function YE(l,u,h){var y=ta();ah(l,u,h,y)}function ah(l,u,h,y){var _={lane:y,revertLane:0,action:h,hasEagerState:!1,eagerState:null,next:null};if(tg(l))qE(u,_);else{var C=l.alternate;if(l.lanes===0&&(C===null||C.lanes===0)&&(C=u.lastRenderedReducer,C!==null))try{var U=u.lastRenderedState,z=C(U,h);if(_.hasEagerState=!0,_.eagerState=z,Ki(z,U))return Fp(l,u,_,0),En===null&&Bp(),!1}catch{}finally{}if(h=sv(l,u,_,y),h!==null)return na(h,l,y),XE(h,u,y),!0}return!1}function Uv(l,u,h,y){if(y={lane:2,revertLane:xx(),action:y,hasEagerState:!1,eagerState:null,next:null},tg(l)){if(u)throw Error(r(479))}else u=sv(l,h,y,2),u!==null&&na(u,l,2)}function tg(l){var u=l.alternate;return l===At||u!==null&&u===At}function qE(l,u){Hu=Xp=!0;var h=l.pending;h===null?u.next=u:(u.next=h.next,h.next=u),l.pending=u}function XE(l,u,h){if((h&4194048)!==0){var y=u.lanes;y&=l.pendingLanes,h|=y,u.lanes=h,yu(l,h)}}var ng={readContext:fi,use:Qp,useCallback:tr,useContext:tr,useEffect:tr,useImperativeHandle:tr,useLayoutEffect:tr,useInsertionEffect:tr,useMemo:tr,useReducer:tr,useRef:tr,useState:tr,useDebugValue:tr,useDeferredValue:tr,useTransition:tr,useSyncExternalStore:tr,useId:tr,useHostTransitionStatus:tr,useFormState:tr,useActionState:tr,useOptimistic:tr,useMemoCache:tr,useCacheRefresh:tr},KE={readContext:fi,use:Qp,useCallback:function(l,u){return ji().memoizedState=[l,u===void 0?null:u],l},useContext:fi,useEffect:PE,useImperativeHandle:function(l,u,h){h=h!=null?h.concat([l]):null,eg(4194308,4,BE.bind(null,u,l),h)},useLayoutEffect:function(l,u){return eg(4194308,4,l,u)},useInsertionEffect:function(l,u){eg(4,2,l,u)},useMemo:function(l,u){var h=ji();u=u===void 0?null:u;var y=l();if(Sc){In(!0);try{l()}finally{In(!1)}}return h.memoizedState=[y,u],y},useReducer:function(l,u,h){var y=ji();if(h!==void 0){var _=h(u);if(Sc){In(!0);try{h(u)}finally{In(!1)}}}else _=u;return y.memoizedState=y.baseState=_,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:l,lastRenderedState:_},y.queue=l,l=l.dispatch=B6.bind(null,At,l),[y.memoizedState,l]},useRef:function(l){var u=ji();return l={current:l},u.memoizedState=l},useState:function(l){l=Nv(l);var u=l.queue,h=YE.bind(null,At,u);return u.dispatch=h,[l.memoizedState,h]},useDebugValue:Bv,useDeferredValue:function(l,u){var h=ji();return Fv(h,l,u)},useTransition:function(){var l=Nv(!1);return l=HE.bind(null,At,l.queue,!0,!1),ji().memoizedState=l,[!1,l]},useSyncExternalStore:function(l,u,h){var y=At,_=ji();if(Xt){if(h===void 0)throw Error(r(407));h=h()}else{if(h=u(),En===null)throw Error(r(349));(Ft&124)!==0||yE(y,u,h)}_.memoizedState=h;var C={value:h,getSnapshot:u};return _.queue=C,PE(xE.bind(null,y,C,l),[l]),y.flags|=2048,$u(9,Jp(),vE.bind(null,y,C,h,u),null),h},useId:function(){var l=ji(),u=En.identifierPrefix;if(Xt){var h=io,y=ro;h=(y&~(1<<32-Qe(y)-1)).toString(32)+h,u=""+u+"R"+h,h=Kp++,0<h&&(u+="H"+h.toString(32)),u+=""}else h=O6++,u=""+u+"r"+h.toString(32)+"";return l.memoizedState=u},useHostTransitionStatus:Vv,useFormState:IE,useActionState:IE,useOptimistic:function(l){var u=ji();u.memoizedState=u.baseState=l;var h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return u.queue=h,u=Uv.bind(null,At,!0,h),h.dispatch=u,[l,u]},useMemoCache:Mv,useCacheRefresh:function(){return ji().memoizedState=L6.bind(null,At)}},QE={readContext:fi,use:Qp,useCallback:jE,useContext:fi,useEffect:kE,useImperativeHandle:FE,useInsertionEffect:NE,useLayoutEffect:LE,useMemo:VE,useReducer:Zp,useRef:ME,useState:function(){return Zp(oo)},useDebugValue:Bv,useDeferredValue:function(l,u){var h=hr();return UE(h,hn.memoizedState,l,u)},useTransition:function(){var l=Zp(oo)[0],u=hr().memoizedState;return[typeof l=="boolean"?l:rh(l),u]},useSyncExternalStore:mE,useId:GE,useHostTransitionStatus:Vv,useFormState:DE,useActionState:DE,useOptimistic:function(l,u){var h=hr();return _E(h,hn,l,u)},useMemoCache:Mv,useCacheRefresh:WE},F6={readContext:fi,use:Qp,useCallback:jE,useContext:fi,useEffect:kE,useImperativeHandle:FE,useInsertionEffect:NE,useLayoutEffect:LE,useMemo:VE,useReducer:kv,useRef:ME,useState:function(){return kv(oo)},useDebugValue:Bv,useDeferredValue:function(l,u){var h=hr();return hn===null?Fv(h,l,u):UE(h,hn.memoizedState,l,u)},useTransition:function(){var l=kv(oo)[0],u=hr().memoizedState;return[typeof l=="boolean"?l:rh(l),u]},useSyncExternalStore:mE,useId:GE,useHostTransitionStatus:Vv,useFormState:OE,useActionState:OE,useOptimistic:function(l,u){var h=hr();return hn!==null?_E(h,hn,l,u):(h.baseState=l,[l,h.queue.dispatch])},useMemoCache:Mv,useCacheRefresh:WE},Gu=null,sh=0;function rg(l){var u=sh;return sh+=1,Gu===null&&(Gu=[]),lE(Gu,l,u)}function oh(l,u){u=u.props.ref,l.ref=u!==void 0?u:null}function ig(l,u){throw u.$$typeof===p?Error(r(525)):(l=Object.prototype.toString.call(u),Error(r(31,l==="[object Object]"?"object with keys {"+Object.keys(u).join(", ")+"}":l)))}function ZE(l){var u=l._init;return u(l._payload)}function JE(l){function u(ae,ee){if(l){var oe=ae.deletions;oe===null?(ae.deletions=[ee],ae.flags|=16):oe.push(ee)}}function h(ae,ee){if(!l)return null;for(;ee!==null;)u(ae,ee),ee=ee.sibling;return null}function y(ae){for(var ee=new Map;ae!==null;)ae.key!==null?ee.set(ae.key,ae):ee.set(ae.index,ae),ae=ae.sibling;return ee}function _(ae,ee){return ae=no(ae,ee),ae.index=0,ae.sibling=null,ae}function C(ae,ee,oe){return ae.index=oe,l?(oe=ae.alternate,oe!==null?(oe=oe.index,oe<ee?(ae.flags|=67108866,ee):oe):(ae.flags|=67108866,ee)):(ae.flags|=1048576,ee)}function U(ae){return l&&ae.alternate===null&&(ae.flags|=67108866),ae}function z(ae,ee,oe,Ce){return ee===null||ee.tag!==6?(ee=lv(oe,ae.mode,Ce),ee.return=ae,ee):(ee=_(ee,oe),ee.return=ae,ee)}function Q(ae,ee,oe,Ce){var Xe=oe.type;return Xe===x?Ee(ae,ee,oe.props.children,Ce,oe.key):ee!==null&&(ee.elementType===Xe||typeof Xe=="object"&&Xe!==null&&Xe.$$typeof===D&&ZE(Xe)===ee.type)?(ee=_(ee,oe.props),oh(ee,oe),ee.return=ae,ee):(ee=Vp(oe.type,oe.key,oe.props,null,ae.mode,Ce),oh(ee,oe),ee.return=ae,ee)}function le(ae,ee,oe,Ce){return ee===null||ee.tag!==4||ee.stateNode.containerInfo!==oe.containerInfo||ee.stateNode.implementation!==oe.implementation?(ee=cv(oe,ae.mode,Ce),ee.return=ae,ee):(ee=_(ee,oe.children||[]),ee.return=ae,ee)}function Ee(ae,ee,oe,Ce,Xe){return ee===null||ee.tag!==7?(ee=yc(oe,ae.mode,Ce,Xe),ee.return=ae,ee):(ee=_(ee,oe),ee.return=ae,ee)}function Te(ae,ee,oe){if(typeof ee=="string"&&ee!==""||typeof ee=="number"||typeof ee=="bigint")return ee=lv(""+ee,ae.mode,oe),ee.return=ae,ee;if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case g:return oe=Vp(ee.type,ee.key,ee.props,null,ae.mode,oe),oh(oe,ee),oe.return=ae,oe;case m:return ee=cv(ee,ae.mode,oe),ee.return=ae,ee;case D:var Ce=ee._init;return ee=Ce(ee._payload),Te(ae,ee,oe)}if(X(ee)||k(ee))return ee=yc(ee,ae.mode,oe,null),ee.return=ae,ee;if(typeof ee.then=="function")return Te(ae,rg(ee),oe);if(ee.$$typeof===T)return Te(ae,$p(ae,ee),oe);ig(ae,ee)}return null}function de(ae,ee,oe,Ce){var Xe=ee!==null?ee.key:null;if(typeof oe=="string"&&oe!==""||typeof oe=="number"||typeof oe=="bigint")return Xe!==null?null:z(ae,ee,""+oe,Ce);if(typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case g:return oe.key===Xe?Q(ae,ee,oe,Ce):null;case m:return oe.key===Xe?le(ae,ee,oe,Ce):null;case D:return Xe=oe._init,oe=Xe(oe._payload),de(ae,ee,oe,Ce)}if(X(oe)||k(oe))return Xe!==null?null:Ee(ae,ee,oe,Ce,null);if(typeof oe.then=="function")return de(ae,ee,rg(oe),Ce);if(oe.$$typeof===T)return de(ae,ee,$p(ae,oe),Ce);ig(ae,oe)}return null}function pe(ae,ee,oe,Ce,Xe){if(typeof Ce=="string"&&Ce!==""||typeof Ce=="number"||typeof Ce=="bigint")return ae=ae.get(oe)||null,z(ee,ae,""+Ce,Xe);if(typeof Ce=="object"&&Ce!==null){switch(Ce.$$typeof){case g:return ae=ae.get(Ce.key===null?oe:Ce.key)||null,Q(ee,ae,Ce,Xe);case m:return ae=ae.get(Ce.key===null?oe:Ce.key)||null,le(ee,ae,Ce,Xe);case D:var Tt=Ce._init;return Ce=Tt(Ce._payload),pe(ae,ee,oe,Ce,Xe)}if(X(Ce)||k(Ce))return ae=ae.get(oe)||null,Ee(ee,ae,Ce,Xe,null);if(typeof Ce.then=="function")return pe(ae,ee,oe,rg(Ce),Xe);if(Ce.$$typeof===T)return pe(ae,ee,oe,$p(ee,Ce),Xe);ig(ee,Ce)}return null}function dt(ae,ee,oe,Ce){for(var Xe=null,Tt=null,Ze=ee,ot=ee=0,jr=null;Ze!==null&&ot<oe.length;ot++){Ze.index>ot?(jr=Ze,Ze=null):jr=Ze.sibling;var $t=de(ae,Ze,oe[ot],Ce);if($t===null){Ze===null&&(Ze=jr);break}l&&Ze&&$t.alternate===null&&u(ae,Ze),ee=C($t,ee,ot),Tt===null?Xe=$t:Tt.sibling=$t,Tt=$t,Ze=jr}if(ot===oe.length)return h(ae,Ze),Xt&&xc(ae,ot),Xe;if(Ze===null){for(;ot<oe.length;ot++)Ze=Te(ae,oe[ot],Ce),Ze!==null&&(ee=C(Ze,ee,ot),Tt===null?Xe=Ze:Tt.sibling=Ze,Tt=Ze);return Xt&&xc(ae,ot),Xe}for(Ze=y(Ze);ot<oe.length;ot++)jr=pe(Ze,ae,ot,oe[ot],Ce),jr!==null&&(l&&jr.alternate!==null&&Ze.delete(jr.key===null?ot:jr.key),ee=C(jr,ee,ot),Tt===null?Xe=jr:Tt.sibling=jr,Tt=jr);return l&&Ze.forEach(function(hl){return u(ae,hl)}),Xt&&xc(ae,ot),Xe}function st(ae,ee,oe,Ce){if(oe==null)throw Error(r(151));for(var Xe=null,Tt=null,Ze=ee,ot=ee=0,jr=null,$t=oe.next();Ze!==null&&!$t.done;ot++,$t=oe.next()){Ze.index>ot?(jr=Ze,Ze=null):jr=Ze.sibling;var hl=de(ae,Ze,$t.value,Ce);if(hl===null){Ze===null&&(Ze=jr);break}l&&Ze&&hl.alternate===null&&u(ae,Ze),ee=C(hl,ee,ot),Tt===null?Xe=hl:Tt.sibling=hl,Tt=hl,Ze=jr}if($t.done)return h(ae,Ze),Xt&&xc(ae,ot),Xe;if(Ze===null){for(;!$t.done;ot++,$t=oe.next())$t=Te(ae,$t.value,Ce),$t!==null&&(ee=C($t,ee,ot),Tt===null?Xe=$t:Tt.sibling=$t,Tt=$t);return Xt&&xc(ae,ot),Xe}for(Ze=y(Ze);!$t.done;ot++,$t=oe.next())$t=pe(Ze,ae,ot,$t.value,Ce),$t!==null&&(l&&$t.alternate!==null&&Ze.delete($t.key===null?ot:$t.key),ee=C($t,ee,ot),Tt===null?Xe=$t:Tt.sibling=$t,Tt=$t);return l&&Ze.forEach(function(jN){return u(ae,jN)}),Xt&&xc(ae,ot),Xe}function gn(ae,ee,oe,Ce){if(typeof oe=="object"&&oe!==null&&oe.type===x&&oe.key===null&&(oe=oe.props.children),typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case g:e:{for(var Xe=oe.key;ee!==null;){if(ee.key===Xe){if(Xe=oe.type,Xe===x){if(ee.tag===7){h(ae,ee.sibling),Ce=_(ee,oe.props.children),Ce.return=ae,ae=Ce;break e}}else if(ee.elementType===Xe||typeof Xe=="object"&&Xe!==null&&Xe.$$typeof===D&&ZE(Xe)===ee.type){h(ae,ee.sibling),Ce=_(ee,oe.props),oh(Ce,oe),Ce.return=ae,ae=Ce;break e}h(ae,ee);break}else u(ae,ee);ee=ee.sibling}oe.type===x?(Ce=yc(oe.props.children,ae.mode,Ce,oe.key),Ce.return=ae,ae=Ce):(Ce=Vp(oe.type,oe.key,oe.props,null,ae.mode,Ce),oh(Ce,oe),Ce.return=ae,ae=Ce)}return U(ae);case m:e:{for(Xe=oe.key;ee!==null;){if(ee.key===Xe)if(ee.tag===4&&ee.stateNode.containerInfo===oe.containerInfo&&ee.stateNode.implementation===oe.implementation){h(ae,ee.sibling),Ce=_(ee,oe.children||[]),Ce.return=ae,ae=Ce;break e}else{h(ae,ee);break}else u(ae,ee);ee=ee.sibling}Ce=cv(oe,ae.mode,Ce),Ce.return=ae,ae=Ce}return U(ae);case D:return Xe=oe._init,oe=Xe(oe._payload),gn(ae,ee,oe,Ce)}if(X(oe))return dt(ae,ee,oe,Ce);if(k(oe)){if(Xe=k(oe),typeof Xe!="function")throw Error(r(150));return oe=Xe.call(oe),st(ae,ee,oe,Ce)}if(typeof oe.then=="function")return gn(ae,ee,rg(oe),Ce);if(oe.$$typeof===T)return gn(ae,ee,$p(ae,oe),Ce);ig(ae,oe)}return typeof oe=="string"&&oe!==""||typeof oe=="number"||typeof oe=="bigint"?(oe=""+oe,ee!==null&&ee.tag===6?(h(ae,ee.sibling),Ce=_(ee,oe),Ce.return=ae,ae=Ce):(h(ae,ee),Ce=lv(oe,ae.mode,Ce),Ce.return=ae,ae=Ce),U(ae)):h(ae,ee)}return function(ae,ee,oe,Ce){try{sh=0;var Xe=gn(ae,ee,oe,Ce);return Gu=null,Xe}catch(Ze){if(Ze===Qf||Ze===Wp)throw Ze;var Tt=Qi(29,Ze,null,ae.mode);return Tt.lanes=Ce,Tt.return=ae,Tt}finally{}}}var Wu=JE(!0),eS=JE(!1),wa=me(null),gs=null;function Zo(l){var u=l.alternate;be(Ar,Ar.current&1),be(wa,l),gs===null&&(u===null||Uu.current!==null||u.memoizedState!==null)&&(gs=l)}function tS(l){if(l.tag===22){if(be(Ar,Ar.current),be(wa,l),gs===null){var u=l.alternate;u!==null&&u.memoizedState!==null&&(gs=l)}}else Jo()}function Jo(){be(Ar,Ar.current),be(wa,wa.current)}function lo(l){ve(wa),gs===l&&(gs=null),ve(Ar)}var Ar=me(0);function ag(l){for(var u=l;u!==null;){if(u.tag===13){var h=u.memoizedState;if(h!==null&&(h=h.dehydrated,h===null||h.data==="$?"||Ox(h)))return u}else if(u.tag===19&&u.memoizedProps.revealOrder!==void 0){if((u.flags&128)!==0)return u}else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===l)break;for(;u.sibling===null;){if(u.return===null||u.return===l)return null;u=u.return}u.sibling.return=u.return,u=u.sibling}return null}function Hv(l,u,h,y){u=l.memoizedState,h=h(y,u),h=h==null?u:f({},u,h),l.memoizedState=h,l.lanes===0&&(l.updateQueue.baseState=h)}var zv={enqueueSetState:function(l,u,h){l=l._reactInternals;var y=ta(),_=Xo(y);_.payload=u,h!=null&&(_.callback=h),u=Ko(l,_,y),u!==null&&(na(u,l,y),Jf(u,l,y))},enqueueReplaceState:function(l,u,h){l=l._reactInternals;var y=ta(),_=Xo(y);_.tag=1,_.payload=u,h!=null&&(_.callback=h),u=Ko(l,_,y),u!==null&&(na(u,l,y),Jf(u,l,y))},enqueueForceUpdate:function(l,u){l=l._reactInternals;var h=ta(),y=Xo(h);y.tag=2,u!=null&&(y.callback=u),u=Ko(l,y,h),u!==null&&(na(u,l,h),Jf(u,l,h))}};function nS(l,u,h,y,_,C,U){return l=l.stateNode,typeof l.shouldComponentUpdate=="function"?l.shouldComponentUpdate(y,C,U):u.prototype&&u.prototype.isPureReactComponent?!zf(h,y)||!zf(_,C):!0}function rS(l,u,h,y){l=u.state,typeof u.componentWillReceiveProps=="function"&&u.componentWillReceiveProps(h,y),typeof u.UNSAFE_componentWillReceiveProps=="function"&&u.UNSAFE_componentWillReceiveProps(h,y),u.state!==l&&zv.enqueueReplaceState(u,u.state,null)}function Cc(l,u){var h=u;if("ref"in u){h={};for(var y in u)y!=="ref"&&(h[y]=u[y])}if(l=l.defaultProps){h===u&&(h=f({},h));for(var _ in l)h[_]===void 0&&(h[_]=l[_])}return h}var sg=typeof reportError=="function"?reportError:function(l){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var u=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof l=="object"&&l!==null&&typeof l.message=="string"?String(l.message):String(l),error:l});if(!window.dispatchEvent(u))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",l);return}console.error(l)};function iS(l){sg(l)}function aS(l){console.error(l)}function sS(l){sg(l)}function og(l,u){try{var h=l.onUncaughtError;h(u.value,{componentStack:u.stack})}catch(y){setTimeout(function(){throw y})}}function oS(l,u,h){try{var y=l.onCaughtError;y(h.value,{componentStack:h.stack,errorBoundary:u.tag===1?u.stateNode:null})}catch(_){setTimeout(function(){throw _})}}function $v(l,u,h){return h=Xo(h),h.tag=3,h.payload={element:null},h.callback=function(){og(l,u)},h}function lS(l){return l=Xo(l),l.tag=3,l}function cS(l,u,h,y){var _=h.type.getDerivedStateFromError;if(typeof _=="function"){var C=y.value;l.payload=function(){return _(C)},l.callback=function(){oS(u,h,y)}}var U=h.stateNode;U!==null&&typeof U.componentDidCatch=="function"&&(l.callback=function(){oS(u,h,y),typeof _!="function"&&(al===null?al=new Set([this]):al.add(this));var z=y.stack;this.componentDidCatch(y.value,{componentStack:z!==null?z:""})})}function j6(l,u,h,y,_){if(h.flags|=32768,y!==null&&typeof y=="object"&&typeof y.then=="function"){if(u=h.alternate,u!==null&&qf(u,h,_,!0),h=wa.current,h!==null){switch(h.tag){case 13:return gs===null?px():h.alternate===null&&qn===0&&(qn=3),h.flags&=-257,h.flags|=65536,h.lanes=_,y===xv?h.flags|=16384:(u=h.updateQueue,u===null?h.updateQueue=new Set([y]):u.add(y),mx(l,y,_)),!1;case 22:return h.flags|=65536,y===xv?h.flags|=16384:(u=h.updateQueue,u===null?(u={transitions:null,markerInstances:null,retryQueue:new Set([y])},h.updateQueue=u):(h=u.retryQueue,h===null?u.retryQueue=new Set([y]):h.add(y)),mx(l,y,_)),!1}throw Error(r(435,h.tag))}return mx(l,y,_),px(),!1}if(Xt)return u=wa.current,u!==null?((u.flags&65536)===0&&(u.flags|=256),u.flags|=65536,u.lanes=_,y!==fv&&(l=Error(r(422),{cause:y}),Yf(ma(l,h)))):(y!==fv&&(u=Error(r(423),{cause:y}),Yf(ma(u,h))),l=l.current.alternate,l.flags|=65536,_&=-_,l.lanes|=_,y=ma(y,h),_=$v(l.stateNode,y,_),_v(l,_),qn!==4&&(qn=2)),!1;var C=Error(r(520),{cause:y});if(C=ma(C,h),ph===null?ph=[C]:ph.push(C),qn!==4&&(qn=2),u===null)return!0;y=ma(y,h),h=u;do{switch(h.tag){case 3:return h.flags|=65536,l=_&-_,h.lanes|=l,l=$v(h.stateNode,y,l),_v(h,l),!1;case 1:if(u=h.type,C=h.stateNode,(h.flags&128)===0&&(typeof u.getDerivedStateFromError=="function"||C!==null&&typeof C.componentDidCatch=="function"&&(al===null||!al.has(C))))return h.flags|=65536,_&=-_,h.lanes|=_,_=lS(_),cS(_,l,h,y),_v(h,_),!1}h=h.return}while(h!==null);return!1}var uS=Error(r(461)),Br=!1;function Zr(l,u,h,y){u.child=l===null?eS(u,null,h,y):Wu(u,l.child,h,y)}function dS(l,u,h,y,_){h=h.render;var C=u.ref;if("ref"in y){var U={};for(var z in y)z!=="ref"&&(U[z]=y[z])}else U=y;return Ac(u),y=Tv(l,u,h,U,C,_),z=Iv(),l!==null&&!Br?(Dv(l,u,_),co(l,u,_)):(Xt&&z&&uv(u),u.flags|=1,Zr(l,u,y,_),u.child)}function fS(l,u,h,y,_){if(l===null){var C=h.type;return typeof C=="function"&&!ov(C)&&C.defaultProps===void 0&&h.compare===null?(u.tag=15,u.type=C,hS(l,u,C,y,_)):(l=Vp(h.type,null,y,u,u.mode,_),l.ref=u.ref,l.return=u,u.child=l)}if(C=l.child,!Zv(l,_)){var U=C.memoizedProps;if(h=h.compare,h=h!==null?h:zf,h(U,y)&&l.ref===u.ref)return co(l,u,_)}return u.flags|=1,l=no(C,y),l.ref=u.ref,l.return=u,u.child=l}function hS(l,u,h,y,_){if(l!==null){var C=l.memoizedProps;if(zf(C,y)&&l.ref===u.ref)if(Br=!1,u.pendingProps=y=C,Zv(l,_))(l.flags&131072)!==0&&(Br=!0);else return u.lanes=l.lanes,co(l,u,_)}return Gv(l,u,h,y,_)}function pS(l,u,h){var y=u.pendingProps,_=y.children,C=l!==null?l.memoizedState:null;if(y.mode==="hidden"){if((u.flags&128)!==0){if(y=C!==null?C.baseLanes|h:h,l!==null){for(_=u.child=l.child,C=0;_!==null;)C=C|_.lanes|_.childLanes,_=_.sibling;u.childLanes=C&~y}else u.childLanes=0,u.child=null;return gS(l,u,y,h)}if((h&536870912)!==0)u.memoizedState={baseLanes:0,cachePool:null},l!==null&&Gp(u,C!==null?C.cachePool:null),C!==null?hE(u,C):Ev(),tS(u);else return u.lanes=u.childLanes=536870912,gS(l,u,C!==null?C.baseLanes|h:h,h)}else C!==null?(Gp(u,C.cachePool),hE(u,C),Jo(),u.memoizedState=null):(l!==null&&Gp(u,null),Ev(),Jo());return Zr(l,u,_,h),u.child}function gS(l,u,h,y){var _=vv();return _=_===null?null:{parent:_r._currentValue,pool:_},u.memoizedState={baseLanes:h,cachePool:_},l!==null&&Gp(u,null),Ev(),tS(u),l!==null&&qf(l,u,y,!0),null}function lg(l,u){var h=u.ref;if(h===null)l!==null&&l.ref!==null&&(u.flags|=4194816);else{if(typeof h!="function"&&typeof h!="object")throw Error(r(284));(l===null||l.ref!==h)&&(u.flags|=4194816)}}function Gv(l,u,h,y,_){return Ac(u),h=Tv(l,u,h,y,void 0,_),y=Iv(),l!==null&&!Br?(Dv(l,u,_),co(l,u,_)):(Xt&&y&&uv(u),u.flags|=1,Zr(l,u,h,_),u.child)}function mS(l,u,h,y,_,C){return Ac(u),u.updateQueue=null,h=gE(u,y,h,_),pE(l),y=Iv(),l!==null&&!Br?(Dv(l,u,C),co(l,u,C)):(Xt&&y&&uv(u),u.flags|=1,Zr(l,u,h,C),u.child)}function yS(l,u,h,y,_){if(Ac(u),u.stateNode===null){var C=Lu,U=h.contextType;typeof U=="object"&&U!==null&&(C=fi(U)),C=new h(y,C),u.memoizedState=C.state!==null&&C.state!==void 0?C.state:null,C.updater=zv,u.stateNode=C,C._reactInternals=u,C=u.stateNode,C.props=y,C.state=u.memoizedState,C.refs={},wv(u),U=h.contextType,C.context=typeof U=="object"&&U!==null?fi(U):Lu,C.state=u.memoizedState,U=h.getDerivedStateFromProps,typeof U=="function"&&(Hv(u,h,U,y),C.state=u.memoizedState),typeof h.getDerivedStateFromProps=="function"||typeof C.getSnapshotBeforeUpdate=="function"||typeof C.UNSAFE_componentWillMount!="function"&&typeof C.componentWillMount!="function"||(U=C.state,typeof C.componentWillMount=="function"&&C.componentWillMount(),typeof C.UNSAFE_componentWillMount=="function"&&C.UNSAFE_componentWillMount(),U!==C.state&&zv.enqueueReplaceState(C,C.state,null),th(u,y,C,_),eh(),C.state=u.memoizedState),typeof C.componentDidMount=="function"&&(u.flags|=4194308),y=!0}else if(l===null){C=u.stateNode;var z=u.memoizedProps,Q=Cc(h,z);C.props=Q;var le=C.context,Ee=h.contextType;U=Lu,typeof Ee=="object"&&Ee!==null&&(U=fi(Ee));var Te=h.getDerivedStateFromProps;Ee=typeof Te=="function"||typeof C.getSnapshotBeforeUpdate=="function",z=u.pendingProps!==z,Ee||typeof C.UNSAFE_componentWillReceiveProps!="function"&&typeof C.componentWillReceiveProps!="function"||(z||le!==U)&&rS(u,C,y,U),qo=!1;var de=u.memoizedState;C.state=de,th(u,y,C,_),eh(),le=u.memoizedState,z||de!==le||qo?(typeof Te=="function"&&(Hv(u,h,Te,y),le=u.memoizedState),(Q=qo||nS(u,h,Q,y,de,le,U))?(Ee||typeof C.UNSAFE_componentWillMount!="function"&&typeof C.componentWillMount!="function"||(typeof C.componentWillMount=="function"&&C.componentWillMount(),typeof C.UNSAFE_componentWillMount=="function"&&C.UNSAFE_componentWillMount()),typeof C.componentDidMount=="function"&&(u.flags|=4194308)):(typeof C.componentDidMount=="function"&&(u.flags|=4194308),u.memoizedProps=y,u.memoizedState=le),C.props=y,C.state=le,C.context=U,y=Q):(typeof C.componentDidMount=="function"&&(u.flags|=4194308),y=!1)}else{C=u.stateNode,bv(l,u),U=u.memoizedProps,Ee=Cc(h,U),C.props=Ee,Te=u.pendingProps,de=C.context,le=h.contextType,Q=Lu,typeof le=="object"&&le!==null&&(Q=fi(le)),z=h.getDerivedStateFromProps,(le=typeof z=="function"||typeof C.getSnapshotBeforeUpdate=="function")||typeof C.UNSAFE_componentWillReceiveProps!="function"&&typeof C.componentWillReceiveProps!="function"||(U!==Te||de!==Q)&&rS(u,C,y,Q),qo=!1,de=u.memoizedState,C.state=de,th(u,y,C,_),eh();var pe=u.memoizedState;U!==Te||de!==pe||qo||l!==null&&l.dependencies!==null&&zp(l.dependencies)?(typeof z=="function"&&(Hv(u,h,z,y),pe=u.memoizedState),(Ee=qo||nS(u,h,Ee,y,de,pe,Q)||l!==null&&l.dependencies!==null&&zp(l.dependencies))?(le||typeof C.UNSAFE_componentWillUpdate!="function"&&typeof C.componentWillUpdate!="function"||(typeof C.componentWillUpdate=="function"&&C.componentWillUpdate(y,pe,Q),typeof C.UNSAFE_componentWillUpdate=="function"&&C.UNSAFE_componentWillUpdate(y,pe,Q)),typeof C.componentDidUpdate=="function"&&(u.flags|=4),typeof C.getSnapshotBeforeUpdate=="function"&&(u.flags|=1024)):(typeof C.componentDidUpdate!="function"||U===l.memoizedProps&&de===l.memoizedState||(u.flags|=4),typeof C.getSnapshotBeforeUpdate!="function"||U===l.memoizedProps&&de===l.memoizedState||(u.flags|=1024),u.memoizedProps=y,u.memoizedState=pe),C.props=y,C.state=pe,C.context=Q,y=Ee):(typeof C.componentDidUpdate!="function"||U===l.memoizedProps&&de===l.memoizedState||(u.flags|=4),typeof C.getSnapshotBeforeUpdate!="function"||U===l.memoizedProps&&de===l.memoizedState||(u.flags|=1024),y=!1)}return C=y,lg(l,u),y=(u.flags&128)!==0,C||y?(C=u.stateNode,h=y&&typeof h.getDerivedStateFromError!="function"?null:C.render(),u.flags|=1,l!==null&&y?(u.child=Wu(u,l.child,null,_),u.child=Wu(u,null,h,_)):Zr(l,u,h,_),u.memoizedState=C.state,l=u.child):l=co(l,u,_),l}function vS(l,u,h,y){return Wf(),u.flags|=256,Zr(l,u,h,y),u.child}var Wv={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Yv(l){return{baseLanes:l,cachePool:aE()}}function qv(l,u,h){return l=l!==null?l.childLanes&~h:0,u&&(l|=ba),l}function xS(l,u,h){var y=u.pendingProps,_=!1,C=(u.flags&128)!==0,U;if((U=C)||(U=l!==null&&l.memoizedState===null?!1:(Ar.current&2)!==0),U&&(_=!0,u.flags&=-129),U=(u.flags&32)!==0,u.flags&=-33,l===null){if(Xt){if(_?Zo(u):Jo(),Xt){var z=Yn,Q;if(Q=z){e:{for(Q=z,z=ps;Q.nodeType!==8;){if(!z){z=null;break e}if(Q=ja(Q.nextSibling),Q===null){z=null;break e}}z=Q}z!==null?(u.memoizedState={dehydrated:z,treeContext:vc!==null?{id:ro,overflow:io}:null,retryLane:536870912,hydrationErrors:null},Q=Qi(18,null,null,0),Q.stateNode=z,Q.return=u,u.child=Q,Ii=u,Yn=null,Q=!0):Q=!1}Q||bc(u)}if(z=u.memoizedState,z!==null&&(z=z.dehydrated,z!==null))return Ox(z)?u.lanes=32:u.lanes=536870912,null;lo(u)}return z=y.children,y=y.fallback,_?(Jo(),_=u.mode,z=cg({mode:"hidden",children:z},_),y=yc(y,_,h,null),z.return=u,y.return=u,z.sibling=y,u.child=z,_=u.child,_.memoizedState=Yv(h),_.childLanes=qv(l,U,h),u.memoizedState=Wv,y):(Zo(u),Xv(u,z))}if(Q=l.memoizedState,Q!==null&&(z=Q.dehydrated,z!==null)){if(C)u.flags&256?(Zo(u),u.flags&=-257,u=Kv(l,u,h)):u.memoizedState!==null?(Jo(),u.child=l.child,u.flags|=128,u=null):(Jo(),_=y.fallback,z=u.mode,y=cg({mode:"visible",children:y.children},z),_=yc(_,z,h,null),_.flags|=2,y.return=u,_.return=u,y.sibling=_,u.child=y,Wu(u,l.child,null,h),y=u.child,y.memoizedState=Yv(h),y.childLanes=qv(l,U,h),u.memoizedState=Wv,u=_);else if(Zo(u),Ox(z)){if(U=z.nextSibling&&z.nextSibling.dataset,U)var le=U.dgst;U=le,y=Error(r(419)),y.stack="",y.digest=U,Yf({value:y,source:null,stack:null}),u=Kv(l,u,h)}else if(Br||qf(l,u,h,!1),U=(h&l.childLanes)!==0,Br||U){if(U=En,U!==null&&(y=h&-h,y=(y&42)!==0?1:Gs(y),y=(y&(U.suspendedLanes|h))!==0?0:y,y!==0&&y!==Q.retryLane))throw Q.retryLane=y,Nu(l,y),na(U,l,y),uS;z.data==="$?"||px(),u=Kv(l,u,h)}else z.data==="$?"?(u.flags|=192,u.child=l.child,u=null):(l=Q.treeContext,Yn=ja(z.nextSibling),Ii=u,Xt=!0,wc=null,ps=!1,l!==null&&(va[xa++]=ro,va[xa++]=io,va[xa++]=vc,ro=l.id,io=l.overflow,vc=u),u=Xv(u,y.children),u.flags|=4096);return u}return _?(Jo(),_=y.fallback,z=u.mode,Q=l.child,le=Q.sibling,y=no(Q,{mode:"hidden",children:y.children}),y.subtreeFlags=Q.subtreeFlags&65011712,le!==null?_=no(le,_):(_=yc(_,z,h,null),_.flags|=2),_.return=u,y.return=u,y.sibling=_,u.child=y,y=_,_=u.child,z=l.child.memoizedState,z===null?z=Yv(h):(Q=z.cachePool,Q!==null?(le=_r._currentValue,Q=Q.parent!==le?{parent:le,pool:le}:Q):Q=aE(),z={baseLanes:z.baseLanes|h,cachePool:Q}),_.memoizedState=z,_.childLanes=qv(l,U,h),u.memoizedState=Wv,y):(Zo(u),h=l.child,l=h.sibling,h=no(h,{mode:"visible",children:y.children}),h.return=u,h.sibling=null,l!==null&&(U=u.deletions,U===null?(u.deletions=[l],u.flags|=16):U.push(l)),u.child=h,u.memoizedState=null,h)}function Xv(l,u){return u=cg({mode:"visible",children:u},l.mode),u.return=l,l.child=u}function cg(l,u){return l=Qi(22,l,null,u),l.lanes=0,l.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},l}function Kv(l,u,h){return Wu(u,l.child,null,h),l=Xv(u,u.pendingProps.children),l.flags|=2,u.memoizedState=null,l}function wS(l,u,h){l.lanes|=u;var y=l.alternate;y!==null&&(y.lanes|=u),pv(l.return,u,h)}function Qv(l,u,h,y,_){var C=l.memoizedState;C===null?l.memoizedState={isBackwards:u,rendering:null,renderingStartTime:0,last:y,tail:h,tailMode:_}:(C.isBackwards=u,C.rendering=null,C.renderingStartTime=0,C.last=y,C.tail=h,C.tailMode=_)}function bS(l,u,h){var y=u.pendingProps,_=y.revealOrder,C=y.tail;if(Zr(l,u,y.children,h),y=Ar.current,(y&2)!==0)y=y&1|2,u.flags|=128;else{if(l!==null&&(l.flags&128)!==0)e:for(l=u.child;l!==null;){if(l.tag===13)l.memoizedState!==null&&wS(l,h,u);else if(l.tag===19)wS(l,h,u);else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===u)break e;for(;l.sibling===null;){if(l.return===null||l.return===u)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}y&=1}switch(be(Ar,y),_){case"forwards":for(h=u.child,_=null;h!==null;)l=h.alternate,l!==null&&ag(l)===null&&(_=h),h=h.sibling;h=_,h===null?(_=u.child,u.child=null):(_=h.sibling,h.sibling=null),Qv(u,!1,_,h,C);break;case"backwards":for(h=null,_=u.child,u.child=null;_!==null;){if(l=_.alternate,l!==null&&ag(l)===null){u.child=_;break}l=_.sibling,_.sibling=h,h=_,_=l}Qv(u,!0,h,null,C);break;case"together":Qv(u,!1,null,null,void 0);break;default:u.memoizedState=null}return u.child}function co(l,u,h){if(l!==null&&(u.dependencies=l.dependencies),il|=u.lanes,(h&u.childLanes)===0)if(l!==null){if(qf(l,u,h,!1),(h&u.childLanes)===0)return null}else return null;if(l!==null&&u.child!==l.child)throw Error(r(153));if(u.child!==null){for(l=u.child,h=no(l,l.pendingProps),u.child=h,h.return=u;l.sibling!==null;)l=l.sibling,h=h.sibling=no(l,l.pendingProps),h.return=u;h.sibling=null}return u.child}function Zv(l,u){return(l.lanes&u)!==0?!0:(l=l.dependencies,!!(l!==null&&zp(l)))}function V6(l,u,h){switch(u.tag){case 3:Se(u,u.stateNode.containerInfo),Yo(u,_r,l.memoizedState.cache),Wf();break;case 27:case 5:he(u);break;case 4:Se(u,u.stateNode.containerInfo);break;case 10:Yo(u,u.type,u.memoizedProps.value);break;case 13:var y=u.memoizedState;if(y!==null)return y.dehydrated!==null?(Zo(u),u.flags|=128,null):(h&u.child.childLanes)!==0?xS(l,u,h):(Zo(u),l=co(l,u,h),l!==null?l.sibling:null);Zo(u);break;case 19:var _=(l.flags&128)!==0;if(y=(h&u.childLanes)!==0,y||(qf(l,u,h,!1),y=(h&u.childLanes)!==0),_){if(y)return bS(l,u,h);u.flags|=128}if(_=u.memoizedState,_!==null&&(_.rendering=null,_.tail=null,_.lastEffect=null),be(Ar,Ar.current),y)break;return null;case 22:case 23:return u.lanes=0,pS(l,u,h);case 24:Yo(u,_r,l.memoizedState.cache)}return co(l,u,h)}function _S(l,u,h){if(l!==null)if(l.memoizedProps!==u.pendingProps)Br=!0;else{if(!Zv(l,h)&&(u.flags&128)===0)return Br=!1,V6(l,u,h);Br=(l.flags&131072)!==0}else Br=!1,Xt&&(u.flags&1048576)!==0&&ZA(u,Hp,u.index);switch(u.lanes=0,u.tag){case 16:e:{l=u.pendingProps;var y=u.elementType,_=y._init;if(y=_(y._payload),u.type=y,typeof y=="function")ov(y)?(l=Cc(y,l),u.tag=1,u=yS(null,u,y,l,h)):(u.tag=0,u=Gv(null,u,y,l,h));else{if(y!=null){if(_=y.$$typeof,_===I){u.tag=11,u=dS(null,u,y,l,h);break e}else if(_===M){u.tag=14,u=fS(null,u,y,l,h);break e}}throw u=q(y)||y,Error(r(306,u,""))}}return u;case 0:return Gv(l,u,u.type,u.pendingProps,h);case 1:return y=u.type,_=Cc(y,u.pendingProps),yS(l,u,y,_,h);case 3:e:{if(Se(u,u.stateNode.containerInfo),l===null)throw Error(r(387));y=u.pendingProps;var C=u.memoizedState;_=C.element,bv(l,u),th(u,y,null,h);var U=u.memoizedState;if(y=U.cache,Yo(u,_r,y),y!==C.cache&&gv(u,[_r],h,!0),eh(),y=U.element,C.isDehydrated)if(C={element:y,isDehydrated:!1,cache:U.cache},u.updateQueue.baseState=C,u.memoizedState=C,u.flags&256){u=vS(l,u,y,h);break e}else if(y!==_){_=ma(Error(r(424)),u),Yf(_),u=vS(l,u,y,h);break e}else{switch(l=u.stateNode.containerInfo,l.nodeType){case 9:l=l.body;break;default:l=l.nodeName==="HTML"?l.ownerDocument.body:l}for(Yn=ja(l.firstChild),Ii=u,Xt=!0,wc=null,ps=!0,h=eS(u,null,y,h),u.child=h;h;)h.flags=h.flags&-3|4096,h=h.sibling}else{if(Wf(),y===_){u=co(l,u,h);break e}Zr(l,u,y,h)}u=u.child}return u;case 26:return lg(l,u),l===null?(h=CC(u.type,null,u.pendingProps,null))?u.memoizedState=h:Xt||(h=u.type,l=u.pendingProps,y=Ag(Le.current).createElement(h),y[xr]=u,y[ur]=l,ei(y,h,l),er(y),u.stateNode=y):u.memoizedState=CC(u.type,l.memoizedProps,u.pendingProps,l.memoizedState),null;case 27:return he(u),l===null&&Xt&&(y=u.stateNode=AC(u.type,u.pendingProps,Le.current),Ii=u,ps=!0,_=Yn,ll(u.type)?(Mx=_,Yn=ja(y.firstChild)):Yn=_),Zr(l,u,u.pendingProps.children,h),lg(l,u),l===null&&(u.flags|=4194304),u.child;case 5:return l===null&&Xt&&((_=y=Yn)&&(y=pN(y,u.type,u.pendingProps,ps),y!==null?(u.stateNode=y,Ii=u,Yn=ja(y.firstChild),ps=!1,_=!0):_=!1),_||bc(u)),he(u),_=u.type,C=u.pendingProps,U=l!==null?l.memoizedProps:null,y=C.children,Ix(_,C)?y=null:U!==null&&Ix(_,U)&&(u.flags|=32),u.memoizedState!==null&&(_=Tv(l,u,M6,null,null,h),Ah._currentValue=_),lg(l,u),Zr(l,u,y,h),u.child;case 6:return l===null&&Xt&&((l=h=Yn)&&(h=gN(h,u.pendingProps,ps),h!==null?(u.stateNode=h,Ii=u,Yn=null,l=!0):l=!1),l||bc(u)),null;case 13:return xS(l,u,h);case 4:return Se(u,u.stateNode.containerInfo),y=u.pendingProps,l===null?u.child=Wu(u,null,y,h):Zr(l,u,y,h),u.child;case 11:return dS(l,u,u.type,u.pendingProps,h);case 7:return Zr(l,u,u.pendingProps,h),u.child;case 8:return Zr(l,u,u.pendingProps.children,h),u.child;case 12:return Zr(l,u,u.pendingProps.children,h),u.child;case 10:return y=u.pendingProps,Yo(u,u.type,y.value),Zr(l,u,y.children,h),u.child;case 9:return _=u.type._context,y=u.pendingProps.children,Ac(u),_=fi(_),y=y(_),u.flags|=1,Zr(l,u,y,h),u.child;case 14:return fS(l,u,u.type,u.pendingProps,h);case 15:return hS(l,u,u.type,u.pendingProps,h);case 19:return bS(l,u,h);case 31:return y=u.pendingProps,h=u.mode,y={mode:y.mode,children:y.children},l===null?(h=cg(y,h),h.ref=u.ref,u.child=h,h.return=u,u=h):(h=no(l.child,y),h.ref=u.ref,u.child=h,h.return=u,u=h),u;case 22:return pS(l,u,h);case 24:return Ac(u),y=fi(_r),l===null?(_=vv(),_===null&&(_=En,C=mv(),_.pooledCache=C,C.refCount++,C!==null&&(_.pooledCacheLanes|=h),_=C),u.memoizedState={parent:y,cache:_},wv(u),Yo(u,_r,_)):((l.lanes&h)!==0&&(bv(l,u),th(u,null,null,h),eh()),_=l.memoizedState,C=u.memoizedState,_.parent!==y?(_={parent:y,cache:y},u.memoizedState=_,u.lanes===0&&(u.memoizedState=u.updateQueue.baseState=_),Yo(u,_r,y)):(y=C.cache,Yo(u,_r,y),y!==_.cache&&gv(u,[_r],h,!0))),Zr(l,u,u.pendingProps.children,h),u.child;case 29:throw u.pendingProps}throw Error(r(156,u.tag))}function uo(l){l.flags|=4}function AS(l,u){if(u.type!=="stylesheet"||(u.state.loading&4)!==0)l.flags&=-16777217;else if(l.flags|=16777216,!OC(u)){if(u=wa.current,u!==null&&((Ft&4194048)===Ft?gs!==null:(Ft&62914560)!==Ft&&(Ft&536870912)===0||u!==gs))throw Zf=xv,sE;l.flags|=8192}}function ug(l,u){u!==null&&(l.flags|=4),l.flags&16384&&(u=l.tag!==22?Xr():536870912,l.lanes|=u,Ku|=u)}function lh(l,u){if(!Xt)switch(l.tailMode){case"hidden":u=l.tail;for(var h=null;u!==null;)u.alternate!==null&&(h=u),u=u.sibling;h===null?l.tail=null:h.sibling=null;break;case"collapsed":h=l.tail;for(var y=null;h!==null;)h.alternate!==null&&(y=h),h=h.sibling;y===null?u||l.tail===null?l.tail=null:l.tail.sibling=null:y.sibling=null}}function Un(l){var u=l.alternate!==null&&l.alternate.child===l.child,h=0,y=0;if(u)for(var _=l.child;_!==null;)h|=_.lanes|_.childLanes,y|=_.subtreeFlags&65011712,y|=_.flags&65011712,_.return=l,_=_.sibling;else for(_=l.child;_!==null;)h|=_.lanes|_.childLanes,y|=_.subtreeFlags,y|=_.flags,_.return=l,_=_.sibling;return l.subtreeFlags|=y,l.childLanes=h,u}function U6(l,u,h){var y=u.pendingProps;switch(dv(u),u.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Un(u),null;case 1:return Un(u),null;case 3:return h=u.stateNode,y=null,l!==null&&(y=l.memoizedState.cache),u.memoizedState.cache!==y&&(u.flags|=2048),so(_r),J(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(l===null||l.child===null)&&(Gf(u)?uo(u):l===null||l.memoizedState.isDehydrated&&(u.flags&256)===0||(u.flags|=1024,tE())),Un(u),null;case 26:return h=u.memoizedState,l===null?(uo(u),h!==null?(Un(u),AS(u,h)):(Un(u),u.flags&=-16777217)):h?h!==l.memoizedState?(uo(u),Un(u),AS(u,h)):(Un(u),u.flags&=-16777217):(l.memoizedProps!==y&&uo(u),Un(u),u.flags&=-16777217),null;case 27:ue(u),h=Le.current;var _=u.type;if(l!==null&&u.stateNode!=null)l.memoizedProps!==y&&uo(u);else{if(!y){if(u.stateNode===null)throw Error(r(166));return Un(u),null}l=Me.current,Gf(u)?JA(u):(l=AC(_,y,h),u.stateNode=l,uo(u))}return Un(u),null;case 5:if(ue(u),h=u.type,l!==null&&u.stateNode!=null)l.memoizedProps!==y&&uo(u);else{if(!y){if(u.stateNode===null)throw Error(r(166));return Un(u),null}if(l=Me.current,Gf(u))JA(u);else{switch(_=Ag(Le.current),l){case 1:l=_.createElementNS("http://www.w3.org/2000/svg",h);break;case 2:l=_.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;default:switch(h){case"svg":l=_.createElementNS("http://www.w3.org/2000/svg",h);break;case"math":l=_.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;case"script":l=_.createElement("div"),l.innerHTML="<script><\/script>",l=l.removeChild(l.firstChild);break;case"select":l=typeof y.is=="string"?_.createElement("select",{is:y.is}):_.createElement("select"),y.multiple?l.multiple=!0:y.size&&(l.size=y.size);break;default:l=typeof y.is=="string"?_.createElement(h,{is:y.is}):_.createElement(h)}}l[xr]=u,l[ur]=y;e:for(_=u.child;_!==null;){if(_.tag===5||_.tag===6)l.appendChild(_.stateNode);else if(_.tag!==4&&_.tag!==27&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===u)break e;for(;_.sibling===null;){if(_.return===null||_.return===u)break e;_=_.return}_.sibling.return=_.return,_=_.sibling}u.stateNode=l;e:switch(ei(l,h,y),h){case"button":case"input":case"select":case"textarea":l=!!y.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&uo(u)}}return Un(u),u.flags&=-16777217,null;case 6:if(l&&u.stateNode!=null)l.memoizedProps!==y&&uo(u);else{if(typeof y!="string"&&u.stateNode===null)throw Error(r(166));if(l=Le.current,Gf(u)){if(l=u.stateNode,h=u.memoizedProps,y=null,_=Ii,_!==null)switch(_.tag){case 27:case 5:y=_.memoizedProps}l[xr]=u,l=!!(l.nodeValue===h||y!==null&&y.suppressHydrationWarning===!0||mC(l.nodeValue,h)),l||bc(u)}else l=Ag(l).createTextNode(y),l[xr]=u,u.stateNode=l}return Un(u),null;case 13:if(y=u.memoizedState,l===null||l.memoizedState!==null&&l.memoizedState.dehydrated!==null){if(_=Gf(u),y!==null&&y.dehydrated!==null){if(l===null){if(!_)throw Error(r(318));if(_=u.memoizedState,_=_!==null?_.dehydrated:null,!_)throw Error(r(317));_[xr]=u}else Wf(),(u.flags&128)===0&&(u.memoizedState=null),u.flags|=4;Un(u),_=!1}else _=tE(),l!==null&&l.memoizedState!==null&&(l.memoizedState.hydrationErrors=_),_=!0;if(!_)return u.flags&256?(lo(u),u):(lo(u),null)}if(lo(u),(u.flags&128)!==0)return u.lanes=h,u;if(h=y!==null,l=l!==null&&l.memoizedState!==null,h){y=u.child,_=null,y.alternate!==null&&y.alternate.memoizedState!==null&&y.alternate.memoizedState.cachePool!==null&&(_=y.alternate.memoizedState.cachePool.pool);var C=null;y.memoizedState!==null&&y.memoizedState.cachePool!==null&&(C=y.memoizedState.cachePool.pool),C!==_&&(y.flags|=2048)}return h!==l&&h&&(u.child.flags|=8192),ug(u,u.updateQueue),Un(u),null;case 4:return J(),l===null&&Ax(u.stateNode.containerInfo),Un(u),null;case 10:return so(u.type),Un(u),null;case 19:if(ve(Ar),_=u.memoizedState,_===null)return Un(u),null;if(y=(u.flags&128)!==0,C=_.rendering,C===null)if(y)lh(_,!1);else{if(qn!==0||l!==null&&(l.flags&128)!==0)for(l=u.child;l!==null;){if(C=ag(l),C!==null){for(u.flags|=128,lh(_,!1),l=C.updateQueue,u.updateQueue=l,ug(u,l),u.subtreeFlags=0,l=h,h=u.child;h!==null;)QA(h,l),h=h.sibling;return be(Ar,Ar.current&1|2),u.child}l=l.sibling}_.tail!==null&&De()>hg&&(u.flags|=128,y=!0,lh(_,!1),u.lanes=4194304)}else{if(!y)if(l=ag(C),l!==null){if(u.flags|=128,y=!0,l=l.updateQueue,u.updateQueue=l,ug(u,l),lh(_,!0),_.tail===null&&_.tailMode==="hidden"&&!C.alternate&&!Xt)return Un(u),null}else 2*De()-_.renderingStartTime>hg&&h!==536870912&&(u.flags|=128,y=!0,lh(_,!1),u.lanes=4194304);_.isBackwards?(C.sibling=u.child,u.child=C):(l=_.last,l!==null?l.sibling=C:u.child=C,_.last=C)}return _.tail!==null?(u=_.tail,_.rendering=u,_.tail=u.sibling,_.renderingStartTime=De(),u.sibling=null,l=Ar.current,be(Ar,y?l&1|2:l&1),u):(Un(u),null);case 22:case 23:return lo(u),Sv(),y=u.memoizedState!==null,l!==null?l.memoizedState!==null!==y&&(u.flags|=8192):y&&(u.flags|=8192),y?(h&536870912)!==0&&(u.flags&128)===0&&(Un(u),u.subtreeFlags&6&&(u.flags|=8192)):Un(u),h=u.updateQueue,h!==null&&ug(u,h.retryQueue),h=null,l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(h=l.memoizedState.cachePool.pool),y=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(y=u.memoizedState.cachePool.pool),y!==h&&(u.flags|=2048),l!==null&&ve(Ec),null;case 24:return h=null,l!==null&&(h=l.memoizedState.cache),u.memoizedState.cache!==h&&(u.flags|=2048),so(_r),Un(u),null;case 25:return null;case 30:return null}throw Error(r(156,u.tag))}function H6(l,u){switch(dv(u),u.tag){case 1:return l=u.flags,l&65536?(u.flags=l&-65537|128,u):null;case 3:return so(_r),J(),l=u.flags,(l&65536)!==0&&(l&128)===0?(u.flags=l&-65537|128,u):null;case 26:case 27:case 5:return ue(u),null;case 13:if(lo(u),l=u.memoizedState,l!==null&&l.dehydrated!==null){if(u.alternate===null)throw Error(r(340));Wf()}return l=u.flags,l&65536?(u.flags=l&-65537|128,u):null;case 19:return ve(Ar),null;case 4:return J(),null;case 10:return so(u.type),null;case 22:case 23:return lo(u),Sv(),l!==null&&ve(Ec),l=u.flags,l&65536?(u.flags=l&-65537|128,u):null;case 24:return so(_r),null;case 25:return null;default:return null}}function ES(l,u){switch(dv(u),u.tag){case 3:so(_r),J();break;case 26:case 27:case 5:ue(u);break;case 4:J();break;case 13:lo(u);break;case 19:ve(Ar);break;case 10:so(u.type);break;case 22:case 23:lo(u),Sv(),l!==null&&ve(Ec);break;case 24:so(_r)}}function ch(l,u){try{var h=u.updateQueue,y=h!==null?h.lastEffect:null;if(y!==null){var _=y.next;h=_;do{if((h.tag&l)===l){y=void 0;var C=h.create,U=h.inst;y=C(),U.destroy=y}h=h.next}while(h!==_)}}catch(z){bn(u,u.return,z)}}function el(l,u,h){try{var y=u.updateQueue,_=y!==null?y.lastEffect:null;if(_!==null){var C=_.next;y=C;do{if((y.tag&l)===l){var U=y.inst,z=U.destroy;if(z!==void 0){U.destroy=void 0,_=u;var Q=h,le=z;try{le()}catch(Ee){bn(_,Q,Ee)}}}y=y.next}while(y!==C)}}catch(Ee){bn(u,u.return,Ee)}}function SS(l){var u=l.updateQueue;if(u!==null){var h=l.stateNode;try{fE(u,h)}catch(y){bn(l,l.return,y)}}}function CS(l,u,h){h.props=Cc(l.type,l.memoizedProps),h.state=l.memoizedState;try{h.componentWillUnmount()}catch(y){bn(l,u,y)}}function uh(l,u){try{var h=l.ref;if(h!==null){switch(l.tag){case 26:case 27:case 5:var y=l.stateNode;break;case 30:y=l.stateNode;break;default:y=l.stateNode}typeof h=="function"?l.refCleanup=h(y):h.current=y}}catch(_){bn(l,u,_)}}function ms(l,u){var h=l.ref,y=l.refCleanup;if(h!==null)if(typeof y=="function")try{y()}catch(_){bn(l,u,_)}finally{l.refCleanup=null,l=l.alternate,l!=null&&(l.refCleanup=null)}else if(typeof h=="function")try{h(null)}catch(_){bn(l,u,_)}else h.current=null}function TS(l){var u=l.type,h=l.memoizedProps,y=l.stateNode;try{e:switch(u){case"button":case"input":case"select":case"textarea":h.autoFocus&&y.focus();break e;case"img":h.src?y.src=h.src:h.srcSet&&(y.srcset=h.srcSet)}}catch(_){bn(l,l.return,_)}}function Jv(l,u,h){try{var y=l.stateNode;cN(y,l.type,h,u),y[ur]=u}catch(_){bn(l,l.return,_)}}function IS(l){return l.tag===5||l.tag===3||l.tag===26||l.tag===27&&ll(l.type)||l.tag===4}function ex(l){e:for(;;){for(;l.sibling===null;){if(l.return===null||IS(l.return))return null;l=l.return}for(l.sibling.return=l.return,l=l.sibling;l.tag!==5&&l.tag!==6&&l.tag!==18;){if(l.tag===27&&ll(l.type)||l.flags&2||l.child===null||l.tag===4)continue e;l.child.return=l,l=l.child}if(!(l.flags&2))return l.stateNode}}function tx(l,u,h){var y=l.tag;if(y===5||y===6)l=l.stateNode,u?(h.nodeType===9?h.body:h.nodeName==="HTML"?h.ownerDocument.body:h).insertBefore(l,u):(u=h.nodeType===9?h.body:h.nodeName==="HTML"?h.ownerDocument.body:h,u.appendChild(l),h=h._reactRootContainer,h!=null||u.onclick!==null||(u.onclick=_g));else if(y!==4&&(y===27&&ll(l.type)&&(h=l.stateNode,u=null),l=l.child,l!==null))for(tx(l,u,h),l=l.sibling;l!==null;)tx(l,u,h),l=l.sibling}function dg(l,u,h){var y=l.tag;if(y===5||y===6)l=l.stateNode,u?h.insertBefore(l,u):h.appendChild(l);else if(y!==4&&(y===27&&ll(l.type)&&(h=l.stateNode),l=l.child,l!==null))for(dg(l,u,h),l=l.sibling;l!==null;)dg(l,u,h),l=l.sibling}function DS(l){var u=l.stateNode,h=l.memoizedProps;try{for(var y=l.type,_=u.attributes;_.length;)u.removeAttributeNode(_[0]);ei(u,y,h),u[xr]=l,u[ur]=h}catch(C){bn(l,l.return,C)}}var fo=!1,nr=!1,nx=!1,RS=typeof WeakSet=="function"?WeakSet:Set,Fr=null;function z6(l,u){if(l=l.containerInfo,Cx=Dg,l=UA(l),ev(l)){if("selectionStart"in l)var h={start:l.selectionStart,end:l.selectionEnd};else e:{h=(h=l.ownerDocument)&&h.defaultView||window;var y=h.getSelection&&h.getSelection();if(y&&y.rangeCount!==0){h=y.anchorNode;var _=y.anchorOffset,C=y.focusNode;y=y.focusOffset;try{h.nodeType,C.nodeType}catch{h=null;break e}var U=0,z=-1,Q=-1,le=0,Ee=0,Te=l,de=null;t:for(;;){for(var pe;Te!==h||_!==0&&Te.nodeType!==3||(z=U+_),Te!==C||y!==0&&Te.nodeType!==3||(Q=U+y),Te.nodeType===3&&(U+=Te.nodeValue.length),(pe=Te.firstChild)!==null;)de=Te,Te=pe;for(;;){if(Te===l)break t;if(de===h&&++le===_&&(z=U),de===C&&++Ee===y&&(Q=U),(pe=Te.nextSibling)!==null)break;Te=de,de=Te.parentNode}Te=pe}h=z===-1||Q===-1?null:{start:z,end:Q}}else h=null}h=h||{start:0,end:0}}else h=null;for(Tx={focusedElem:l,selectionRange:h},Dg=!1,Fr=u;Fr!==null;)if(u=Fr,l=u.child,(u.subtreeFlags&1024)!==0&&l!==null)l.return=u,Fr=l;else for(;Fr!==null;){switch(u=Fr,C=u.alternate,l=u.flags,u.tag){case 0:break;case 11:case 15:break;case 1:if((l&1024)!==0&&C!==null){l=void 0,h=u,_=C.memoizedProps,C=C.memoizedState,y=h.stateNode;try{var dt=Cc(h.type,_,h.elementType===h.type);l=y.getSnapshotBeforeUpdate(dt,C),y.__reactInternalSnapshotBeforeUpdate=l}catch(st){bn(h,h.return,st)}}break;case 3:if((l&1024)!==0){if(l=u.stateNode.containerInfo,h=l.nodeType,h===9)Rx(l);else if(h===1)switch(l.nodeName){case"HEAD":case"HTML":case"BODY":Rx(l);break;default:l.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((l&1024)!==0)throw Error(r(163))}if(l=u.sibling,l!==null){l.return=u.return,Fr=l;break}Fr=u.return}}function OS(l,u,h){var y=h.flags;switch(h.tag){case 0:case 11:case 15:tl(l,h),y&4&&ch(5,h);break;case 1:if(tl(l,h),y&4)if(l=h.stateNode,u===null)try{l.componentDidMount()}catch(U){bn(h,h.return,U)}else{var _=Cc(h.type,u.memoizedProps);u=u.memoizedState;try{l.componentDidUpdate(_,u,l.__reactInternalSnapshotBeforeUpdate)}catch(U){bn(h,h.return,U)}}y&64&&SS(h),y&512&&uh(h,h.return);break;case 3:if(tl(l,h),y&64&&(l=h.updateQueue,l!==null)){if(u=null,h.child!==null)switch(h.child.tag){case 27:case 5:u=h.child.stateNode;break;case 1:u=h.child.stateNode}try{fE(l,u)}catch(U){bn(h,h.return,U)}}break;case 27:u===null&&y&4&&DS(h);case 26:case 5:tl(l,h),u===null&&y&4&&TS(h),y&512&&uh(h,h.return);break;case 12:tl(l,h);break;case 13:tl(l,h),y&4&&kS(l,h),y&64&&(l=h.memoizedState,l!==null&&(l=l.dehydrated,l!==null&&(h=Z6.bind(null,h),mN(l,h))));break;case 22:if(y=h.memoizedState!==null||fo,!y){u=u!==null&&u.memoizedState!==null||nr,_=fo;var C=nr;fo=y,(nr=u)&&!C?nl(l,h,(h.subtreeFlags&8772)!==0):tl(l,h),fo=_,nr=C}break;case 30:break;default:tl(l,h)}}function MS(l){var u=l.alternate;u!==null&&(l.alternate=null,MS(u)),l.child=null,l.deletions=null,l.sibling=null,l.tag===5&&(u=l.stateNode,u!==null&&zo(u)),l.stateNode=null,l.return=null,l.dependencies=null,l.memoizedProps=null,l.memoizedState=null,l.pendingProps=null,l.stateNode=null,l.updateQueue=null}var Nn=null,Vi=!1;function ho(l,u,h){for(h=h.child;h!==null;)PS(l,u,h),h=h.sibling}function PS(l,u,h){if(at&&typeof at.onCommitFiberUnmount=="function")try{at.onCommitFiberUnmount(rt,h)}catch{}switch(h.tag){case 26:nr||ms(h,u),ho(l,u,h),h.memoizedState?h.memoizedState.count--:h.stateNode&&(h=h.stateNode,h.parentNode.removeChild(h));break;case 27:nr||ms(h,u);var y=Nn,_=Vi;ll(h.type)&&(Nn=h.stateNode,Vi=!1),ho(l,u,h),xh(h.stateNode),Nn=y,Vi=_;break;case 5:nr||ms(h,u);case 6:if(y=Nn,_=Vi,Nn=null,ho(l,u,h),Nn=y,Vi=_,Nn!==null)if(Vi)try{(Nn.nodeType===9?Nn.body:Nn.nodeName==="HTML"?Nn.ownerDocument.body:Nn).removeChild(h.stateNode)}catch(C){bn(h,u,C)}else try{Nn.removeChild(h.stateNode)}catch(C){bn(h,u,C)}break;case 18:Nn!==null&&(Vi?(l=Nn,bC(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,h.stateNode),Th(l)):bC(Nn,h.stateNode));break;case 4:y=Nn,_=Vi,Nn=h.stateNode.containerInfo,Vi=!0,ho(l,u,h),Nn=y,Vi=_;break;case 0:case 11:case 14:case 15:nr||el(2,h,u),nr||el(4,h,u),ho(l,u,h);break;case 1:nr||(ms(h,u),y=h.stateNode,typeof y.componentWillUnmount=="function"&&CS(h,u,y)),ho(l,u,h);break;case 21:ho(l,u,h);break;case 22:nr=(y=nr)||h.memoizedState!==null,ho(l,u,h),nr=y;break;default:ho(l,u,h)}}function kS(l,u){if(u.memoizedState===null&&(l=u.alternate,l!==null&&(l=l.memoizedState,l!==null&&(l=l.dehydrated,l!==null))))try{Th(l)}catch(h){bn(u,u.return,h)}}function $6(l){switch(l.tag){case 13:case 19:var u=l.stateNode;return u===null&&(u=l.stateNode=new RS),u;case 22:return l=l.stateNode,u=l._retryCache,u===null&&(u=l._retryCache=new RS),u;default:throw Error(r(435,l.tag))}}function rx(l,u){var h=$6(l);u.forEach(function(y){var _=J6.bind(null,l,y);h.has(y)||(h.add(y),y.then(_,_))})}function Zi(l,u){var h=u.deletions;if(h!==null)for(var y=0;y<h.length;y++){var _=h[y],C=l,U=u,z=U;e:for(;z!==null;){switch(z.tag){case 27:if(ll(z.type)){Nn=z.stateNode,Vi=!1;break e}break;case 5:Nn=z.stateNode,Vi=!1;break e;case 3:case 4:Nn=z.stateNode.containerInfo,Vi=!0;break e}z=z.return}if(Nn===null)throw Error(r(160));PS(C,U,_),Nn=null,Vi=!1,C=_.alternate,C!==null&&(C.return=null),_.return=null}if(u.subtreeFlags&13878)for(u=u.child;u!==null;)NS(u,l),u=u.sibling}var Fa=null;function NS(l,u){var h=l.alternate,y=l.flags;switch(l.tag){case 0:case 11:case 14:case 15:Zi(u,l),Ji(l),y&4&&(el(3,l,l.return),ch(3,l),el(5,l,l.return));break;case 1:Zi(u,l),Ji(l),y&512&&(nr||h===null||ms(h,h.return)),y&64&&fo&&(l=l.updateQueue,l!==null&&(y=l.callbacks,y!==null&&(h=l.shared.hiddenCallbacks,l.shared.hiddenCallbacks=h===null?y:h.concat(y))));break;case 26:var _=Fa;if(Zi(u,l),Ji(l),y&512&&(nr||h===null||ms(h,h.return)),y&4){var C=h!==null?h.memoizedState:null;if(y=l.memoizedState,h===null)if(y===null)if(l.stateNode===null){e:{y=l.type,h=l.memoizedProps,_=_.ownerDocument||_;t:switch(y){case"title":C=_.getElementsByTagName("title")[0],(!C||C[tc]||C[xr]||C.namespaceURI==="http://www.w3.org/2000/svg"||C.hasAttribute("itemprop"))&&(C=_.createElement(y),_.head.insertBefore(C,_.querySelector("head > title"))),ei(C,y,h),C[xr]=l,er(C),y=C;break e;case"link":var U=DC("link","href",_).get(y+(h.href||""));if(U){for(var z=0;z<U.length;z++)if(C=U[z],C.getAttribute("href")===(h.href==null||h.href===""?null:h.href)&&C.getAttribute("rel")===(h.rel==null?null:h.rel)&&C.getAttribute("title")===(h.title==null?null:h.title)&&C.getAttribute("crossorigin")===(h.crossOrigin==null?null:h.crossOrigin)){U.splice(z,1);break t}}C=_.createElement(y),ei(C,y,h),_.head.appendChild(C);break;case"meta":if(U=DC("meta","content",_).get(y+(h.content||""))){for(z=0;z<U.length;z++)if(C=U[z],C.getAttribute("content")===(h.content==null?null:""+h.content)&&C.getAttribute("name")===(h.name==null?null:h.name)&&C.getAttribute("property")===(h.property==null?null:h.property)&&C.getAttribute("http-equiv")===(h.httpEquiv==null?null:h.httpEquiv)&&C.getAttribute("charset")===(h.charSet==null?null:h.charSet)){U.splice(z,1);break t}}C=_.createElement(y),ei(C,y,h),_.head.appendChild(C);break;default:throw Error(r(468,y))}C[xr]=l,er(C),y=C}l.stateNode=y}else RC(_,l.type,l.stateNode);else l.stateNode=IC(_,y,l.memoizedProps);else C!==y?(C===null?h.stateNode!==null&&(h=h.stateNode,h.parentNode.removeChild(h)):C.count--,y===null?RC(_,l.type,l.stateNode):IC(_,y,l.memoizedProps)):y===null&&l.stateNode!==null&&Jv(l,l.memoizedProps,h.memoizedProps)}break;case 27:Zi(u,l),Ji(l),y&512&&(nr||h===null||ms(h,h.return)),h!==null&&y&4&&Jv(l,l.memoizedProps,h.memoizedProps);break;case 5:if(Zi(u,l),Ji(l),y&512&&(nr||h===null||ms(h,h.return)),l.flags&32){_=l.stateNode;try{fa(_,"")}catch(pe){bn(l,l.return,pe)}}y&4&&l.stateNode!=null&&(_=l.memoizedProps,Jv(l,_,h!==null?h.memoizedProps:_)),y&1024&&(nx=!0);break;case 6:if(Zi(u,l),Ji(l),y&4){if(l.stateNode===null)throw Error(r(162));y=l.memoizedProps,h=l.stateNode;try{h.nodeValue=y}catch(pe){bn(l,l.return,pe)}}break;case 3:if(Cg=null,_=Fa,Fa=Eg(u.containerInfo),Zi(u,l),Fa=_,Ji(l),y&4&&h!==null&&h.memoizedState.isDehydrated)try{Th(u.containerInfo)}catch(pe){bn(l,l.return,pe)}nx&&(nx=!1,LS(l));break;case 4:y=Fa,Fa=Eg(l.stateNode.containerInfo),Zi(u,l),Ji(l),Fa=y;break;case 12:Zi(u,l),Ji(l);break;case 13:Zi(u,l),Ji(l),l.child.flags&8192&&l.memoizedState!==null!=(h!==null&&h.memoizedState!==null)&&(cx=De()),y&4&&(y=l.updateQueue,y!==null&&(l.updateQueue=null,rx(l,y)));break;case 22:_=l.memoizedState!==null;var Q=h!==null&&h.memoizedState!==null,le=fo,Ee=nr;if(fo=le||_,nr=Ee||Q,Zi(u,l),nr=Ee,fo=le,Ji(l),y&8192)e:for(u=l.stateNode,u._visibility=_?u._visibility&-2:u._visibility|1,_&&(h===null||Q||fo||nr||Tc(l)),h=null,u=l;;){if(u.tag===5||u.tag===26){if(h===null){Q=h=u;try{if(C=Q.stateNode,_)U=C.style,typeof U.setProperty=="function"?U.setProperty("display","none","important"):U.display="none";else{z=Q.stateNode;var Te=Q.memoizedProps.style,de=Te!=null&&Te.hasOwnProperty("display")?Te.display:null;z.style.display=de==null||typeof de=="boolean"?"":(""+de).trim()}}catch(pe){bn(Q,Q.return,pe)}}}else if(u.tag===6){if(h===null){Q=u;try{Q.stateNode.nodeValue=_?"":Q.memoizedProps}catch(pe){bn(Q,Q.return,pe)}}}else if((u.tag!==22&&u.tag!==23||u.memoizedState===null||u===l)&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===l)break e;for(;u.sibling===null;){if(u.return===null||u.return===l)break e;h===u&&(h=null),u=u.return}h===u&&(h=null),u.sibling.return=u.return,u=u.sibling}y&4&&(y=l.updateQueue,y!==null&&(h=y.retryQueue,h!==null&&(y.retryQueue=null,rx(l,h))));break;case 19:Zi(u,l),Ji(l),y&4&&(y=l.updateQueue,y!==null&&(l.updateQueue=null,rx(l,y)));break;case 30:break;case 21:break;default:Zi(u,l),Ji(l)}}function Ji(l){var u=l.flags;if(u&2){try{for(var h,y=l.return;y!==null;){if(IS(y)){h=y;break}y=y.return}if(h==null)throw Error(r(160));switch(h.tag){case 27:var _=h.stateNode,C=ex(l);dg(l,C,_);break;case 5:var U=h.stateNode;h.flags&32&&(fa(U,""),h.flags&=-33);var z=ex(l);dg(l,z,U);break;case 3:case 4:var Q=h.stateNode.containerInfo,le=ex(l);tx(l,le,Q);break;default:throw Error(r(161))}}catch(Ee){bn(l,l.return,Ee)}l.flags&=-3}u&4096&&(l.flags&=-4097)}function LS(l){if(l.subtreeFlags&1024)for(l=l.child;l!==null;){var u=l;LS(u),u.tag===5&&u.flags&1024&&u.stateNode.reset(),l=l.sibling}}function tl(l,u){if(u.subtreeFlags&8772)for(u=u.child;u!==null;)OS(l,u.alternate,u),u=u.sibling}function Tc(l){for(l=l.child;l!==null;){var u=l;switch(u.tag){case 0:case 11:case 14:case 15:el(4,u,u.return),Tc(u);break;case 1:ms(u,u.return);var h=u.stateNode;typeof h.componentWillUnmount=="function"&&CS(u,u.return,h),Tc(u);break;case 27:xh(u.stateNode);case 26:case 5:ms(u,u.return),Tc(u);break;case 22:u.memoizedState===null&&Tc(u);break;case 30:Tc(u);break;default:Tc(u)}l=l.sibling}}function nl(l,u,h){for(h=h&&(u.subtreeFlags&8772)!==0,u=u.child;u!==null;){var y=u.alternate,_=l,C=u,U=C.flags;switch(C.tag){case 0:case 11:case 15:nl(_,C,h),ch(4,C);break;case 1:if(nl(_,C,h),y=C,_=y.stateNode,typeof _.componentDidMount=="function")try{_.componentDidMount()}catch(le){bn(y,y.return,le)}if(y=C,_=y.updateQueue,_!==null){var z=y.stateNode;try{var Q=_.shared.hiddenCallbacks;if(Q!==null)for(_.shared.hiddenCallbacks=null,_=0;_<Q.length;_++)dE(Q[_],z)}catch(le){bn(y,y.return,le)}}h&&U&64&&SS(C),uh(C,C.return);break;case 27:DS(C);case 26:case 5:nl(_,C,h),h&&y===null&&U&4&&TS(C),uh(C,C.return);break;case 12:nl(_,C,h);break;case 13:nl(_,C,h),h&&U&4&&kS(_,C);break;case 22:C.memoizedState===null&&nl(_,C,h),uh(C,C.return);break;case 30:break;default:nl(_,C,h)}u=u.sibling}}function ix(l,u){var h=null;l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(h=l.memoizedState.cachePool.pool),l=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(l=u.memoizedState.cachePool.pool),l!==h&&(l!=null&&l.refCount++,h!=null&&Xf(h))}function ax(l,u){l=null,u.alternate!==null&&(l=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==l&&(u.refCount++,l!=null&&Xf(l))}function ys(l,u,h,y){if(u.subtreeFlags&10256)for(u=u.child;u!==null;)BS(l,u,h,y),u=u.sibling}function BS(l,u,h,y){var _=u.flags;switch(u.tag){case 0:case 11:case 15:ys(l,u,h,y),_&2048&&ch(9,u);break;case 1:ys(l,u,h,y);break;case 3:ys(l,u,h,y),_&2048&&(l=null,u.alternate!==null&&(l=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==l&&(u.refCount++,l!=null&&Xf(l)));break;case 12:if(_&2048){ys(l,u,h,y),l=u.stateNode;try{var C=u.memoizedProps,U=C.id,z=C.onPostCommit;typeof z=="function"&&z(U,u.alternate===null?"mount":"update",l.passiveEffectDuration,-0)}catch(Q){bn(u,u.return,Q)}}else ys(l,u,h,y);break;case 13:ys(l,u,h,y);break;case 23:break;case 22:C=u.stateNode,U=u.alternate,u.memoizedState!==null?C._visibility&2?ys(l,u,h,y):dh(l,u):C._visibility&2?ys(l,u,h,y):(C._visibility|=2,Yu(l,u,h,y,(u.subtreeFlags&10256)!==0)),_&2048&&ix(U,u);break;case 24:ys(l,u,h,y),_&2048&&ax(u.alternate,u);break;default:ys(l,u,h,y)}}function Yu(l,u,h,y,_){for(_=_&&(u.subtreeFlags&10256)!==0,u=u.child;u!==null;){var C=l,U=u,z=h,Q=y,le=U.flags;switch(U.tag){case 0:case 11:case 15:Yu(C,U,z,Q,_),ch(8,U);break;case 23:break;case 22:var Ee=U.stateNode;U.memoizedState!==null?Ee._visibility&2?Yu(C,U,z,Q,_):dh(C,U):(Ee._visibility|=2,Yu(C,U,z,Q,_)),_&&le&2048&&ix(U.alternate,U);break;case 24:Yu(C,U,z,Q,_),_&&le&2048&&ax(U.alternate,U);break;default:Yu(C,U,z,Q,_)}u=u.sibling}}function dh(l,u){if(u.subtreeFlags&10256)for(u=u.child;u!==null;){var h=l,y=u,_=y.flags;switch(y.tag){case 22:dh(h,y),_&2048&&ix(y.alternate,y);break;case 24:dh(h,y),_&2048&&ax(y.alternate,y);break;default:dh(h,y)}u=u.sibling}}var fh=8192;function qu(l){if(l.subtreeFlags&fh)for(l=l.child;l!==null;)FS(l),l=l.sibling}function FS(l){switch(l.tag){case 26:qu(l),l.flags&fh&&l.memoizedState!==null&&DN(Fa,l.memoizedState,l.memoizedProps);break;case 5:qu(l);break;case 3:case 4:var u=Fa;Fa=Eg(l.stateNode.containerInfo),qu(l),Fa=u;break;case 22:l.memoizedState===null&&(u=l.alternate,u!==null&&u.memoizedState!==null?(u=fh,fh=16777216,qu(l),fh=u):qu(l));break;default:qu(l)}}function jS(l){var u=l.alternate;if(u!==null&&(l=u.child,l!==null)){u.child=null;do u=l.sibling,l.sibling=null,l=u;while(l!==null)}}function hh(l){var u=l.deletions;if((l.flags&16)!==0){if(u!==null)for(var h=0;h<u.length;h++){var y=u[h];Fr=y,US(y,l)}jS(l)}if(l.subtreeFlags&10256)for(l=l.child;l!==null;)VS(l),l=l.sibling}function VS(l){switch(l.tag){case 0:case 11:case 15:hh(l),l.flags&2048&&el(9,l,l.return);break;case 3:hh(l);break;case 12:hh(l);break;case 22:var u=l.stateNode;l.memoizedState!==null&&u._visibility&2&&(l.return===null||l.return.tag!==13)?(u._visibility&=-3,fg(l)):hh(l);break;default:hh(l)}}function fg(l){var u=l.deletions;if((l.flags&16)!==0){if(u!==null)for(var h=0;h<u.length;h++){var y=u[h];Fr=y,US(y,l)}jS(l)}for(l=l.child;l!==null;){switch(u=l,u.tag){case 0:case 11:case 15:el(8,u,u.return),fg(u);break;case 22:h=u.stateNode,h._visibility&2&&(h._visibility&=-3,fg(u));break;default:fg(u)}l=l.sibling}}function US(l,u){for(;Fr!==null;){var h=Fr;switch(h.tag){case 0:case 11:case 15:el(8,h,u);break;case 23:case 22:if(h.memoizedState!==null&&h.memoizedState.cachePool!==null){var y=h.memoizedState.cachePool.pool;y!=null&&y.refCount++}break;case 24:Xf(h.memoizedState.cache)}if(y=h.child,y!==null)y.return=h,Fr=y;else e:for(h=l;Fr!==null;){y=Fr;var _=y.sibling,C=y.return;if(MS(y),y===h){Fr=null;break e}if(_!==null){_.return=C,Fr=_;break e}Fr=C}}}var G6={getCacheForType:function(l){var u=fi(_r),h=u.data.get(l);return h===void 0&&(h=l(),u.data.set(l,h)),h}},W6=typeof WeakMap=="function"?WeakMap:Map,an=0,En=null,Dt=null,Ft=0,sn=0,ea=null,rl=!1,Xu=!1,sx=!1,po=0,qn=0,il=0,Ic=0,ox=0,ba=0,Ku=0,ph=null,Ui=null,lx=!1,cx=0,hg=1/0,pg=null,al=null,Jr=0,sl=null,Qu=null,Zu=0,ux=0,dx=null,HS=null,gh=0,fx=null;function ta(){if((an&2)!==0&&Ft!==0)return Ft&-Ft;if(G.T!==null){var l=ju;return l!==0?l:xx()}return cr()}function zS(){ba===0&&(ba=(Ft&536870912)===0||Xt?Jn():536870912);var l=wa.current;return l!==null&&(l.flags|=32),ba}function na(l,u,h){(l===En&&(sn===2||sn===9)||l.cancelPendingCommit!==null)&&(Ju(l,0),ol(l,Ft,ba,!1)),lr(l,h),((an&2)===0||l!==En)&&(l===En&&((an&2)===0&&(Ic|=h),qn===4&&ol(l,Ft,ba,!1)),vs(l))}function $S(l,u,h){if((an&6)!==0)throw Error(r(327));var y=!h&&(u&124)===0&&(u&l.expiredLanes)===0||yt(l,u),_=y?X6(l,u):gx(l,u,!0),C=y;do{if(_===0){Xu&&!y&&ol(l,u,0,!1);break}else{if(h=l.current.alternate,C&&!Y6(h)){_=gx(l,u,!1),C=!1;continue}if(_===2){if(C=u,l.errorRecoveryDisabledLanes&C)var U=0;else U=l.pendingLanes&-536870913,U=U!==0?U:U&536870912?536870912:0;if(U!==0){u=U;e:{var z=l;_=ph;var Q=z.current.memoizedState.isDehydrated;if(Q&&(Ju(z,U).flags|=256),U=gx(z,U,!1),U!==2){if(sx&&!Q){z.errorRecoveryDisabledLanes|=C,Ic|=C,_=4;break e}C=Ui,Ui=_,C!==null&&(Ui===null?Ui=C:Ui.push.apply(Ui,C))}_=U}if(C=!1,_!==2)continue}}if(_===1){Ju(l,0),ol(l,u,0,!0);break}e:{switch(y=l,C=_,C){case 0:case 1:throw Error(r(345));case 4:if((u&4194048)!==u)break;case 6:ol(y,u,ba,!rl);break e;case 2:Ui=null;break;case 3:case 5:break;default:throw Error(r(329))}if((u&62914560)===u&&(_=cx+300-De(),10<_)){if(ol(y,u,ba,!rl),qr(y,0,!0)!==0)break e;y.timeoutHandle=xC(GS.bind(null,y,h,Ui,pg,lx,u,ba,Ic,Ku,rl,C,2,-0,0),_);break e}GS(y,h,Ui,pg,lx,u,ba,Ic,Ku,rl,C,0,-0,0)}}break}while(!0);vs(l)}function GS(l,u,h,y,_,C,U,z,Q,le,Ee,Te,de,pe){if(l.timeoutHandle=-1,Te=u.subtreeFlags,(Te&8192||(Te&16785408)===16785408)&&(_h={stylesheets:null,count:0,unsuspend:IN},FS(u),Te=RN(),Te!==null)){l.cancelPendingCommit=Te(ZS.bind(null,l,u,C,h,y,_,U,z,Q,Ee,1,de,pe)),ol(l,C,U,!le);return}ZS(l,u,C,h,y,_,U,z,Q)}function Y6(l){for(var u=l;;){var h=u.tag;if((h===0||h===11||h===15)&&u.flags&16384&&(h=u.updateQueue,h!==null&&(h=h.stores,h!==null)))for(var y=0;y<h.length;y++){var _=h[y],C=_.getSnapshot;_=_.value;try{if(!Ki(C(),_))return!1}catch{return!1}}if(h=u.child,u.subtreeFlags&16384&&h!==null)h.return=u,u=h;else{if(u===l)break;for(;u.sibling===null;){if(u.return===null||u.return===l)return!0;u=u.return}u.sibling.return=u.return,u=u.sibling}}return!0}function ol(l,u,h,y){u&=~ox,u&=~Ic,l.suspendedLanes|=u,l.pingedLanes&=~u,y&&(l.warmLanes|=u),y=l.expirationTimes;for(var _=u;0<_;){var C=31-Qe(_),U=1<<C;y[C]=-1,_&=~U}h!==0&&ua(l,h,u)}function gg(){return(an&6)===0?(mh(0),!1):!0}function hx(){if(Dt!==null){if(sn===0)var l=Dt.return;else l=Dt,ao=_c=null,Rv(l),Gu=null,sh=0,l=Dt;for(;l!==null;)ES(l.alternate,l),l=l.return;Dt=null}}function Ju(l,u){var h=l.timeoutHandle;h!==-1&&(l.timeoutHandle=-1,dN(h)),h=l.cancelPendingCommit,h!==null&&(l.cancelPendingCommit=null,h()),hx(),En=l,Dt=h=no(l.current,null),Ft=u,sn=0,ea=null,rl=!1,Xu=yt(l,u),sx=!1,Ku=ba=ox=Ic=il=qn=0,Ui=ph=null,lx=!1,(u&8)!==0&&(u|=u&32);var y=l.entangledLanes;if(y!==0)for(l=l.entanglements,y&=u;0<y;){var _=31-Qe(y),C=1<<_;u|=l[_],y&=~C}return po=u,Bp(),h}function WS(l,u){At=null,G.H=ng,u===Qf||u===Wp?(u=cE(),sn=3):u===sE?(u=cE(),sn=4):sn=u===uS?8:u!==null&&typeof u=="object"&&typeof u.then=="function"?6:1,ea=u,Dt===null&&(qn=1,og(l,ma(u,l.current)))}function YS(){var l=G.H;return G.H=ng,l===null?ng:l}function qS(){var l=G.A;return G.A=G6,l}function px(){qn=4,rl||(Ft&4194048)!==Ft&&wa.current!==null||(Xu=!0),(il&134217727)===0&&(Ic&134217727)===0||En===null||ol(En,Ft,ba,!1)}function gx(l,u,h){var y=an;an|=2;var _=YS(),C=qS();(En!==l||Ft!==u)&&(pg=null,Ju(l,u)),u=!1;var U=qn;e:do try{if(sn!==0&&Dt!==null){var z=Dt,Q=ea;switch(sn){case 8:hx(),U=6;break e;case 3:case 2:case 9:case 6:wa.current===null&&(u=!0);var le=sn;if(sn=0,ea=null,ed(l,z,Q,le),h&&Xu){U=0;break e}break;default:le=sn,sn=0,ea=null,ed(l,z,Q,le)}}q6(),U=qn;break}catch(Ee){WS(l,Ee)}while(!0);return u&&l.shellSuspendCounter++,ao=_c=null,an=y,G.H=_,G.A=C,Dt===null&&(En=null,Ft=0,Bp()),U}function q6(){for(;Dt!==null;)XS(Dt)}function X6(l,u){var h=an;an|=2;var y=YS(),_=qS();En!==l||Ft!==u?(pg=null,hg=De()+500,Ju(l,u)):Xu=yt(l,u);e:do try{if(sn!==0&&Dt!==null){u=Dt;var C=ea;t:switch(sn){case 1:sn=0,ea=null,ed(l,u,C,1);break;case 2:case 9:if(oE(C)){sn=0,ea=null,KS(u);break}u=function(){sn!==2&&sn!==9||En!==l||(sn=7),vs(l)},C.then(u,u);break e;case 3:sn=7;break e;case 4:sn=5;break e;case 7:oE(C)?(sn=0,ea=null,KS(u)):(sn=0,ea=null,ed(l,u,C,7));break;case 5:var U=null;switch(Dt.tag){case 26:U=Dt.memoizedState;case 5:case 27:var z=Dt;if(!U||OC(U)){sn=0,ea=null;var Q=z.sibling;if(Q!==null)Dt=Q;else{var le=z.return;le!==null?(Dt=le,mg(le)):Dt=null}break t}}sn=0,ea=null,ed(l,u,C,5);break;case 6:sn=0,ea=null,ed(l,u,C,6);break;case 8:hx(),qn=6;break e;default:throw Error(r(462))}}K6();break}catch(Ee){WS(l,Ee)}while(!0);return ao=_c=null,G.H=y,G.A=_,an=h,Dt!==null?0:(En=null,Ft=0,Bp(),qn)}function K6(){for(;Dt!==null&&!$e();)XS(Dt)}function XS(l){var u=_S(l.alternate,l,po);l.memoizedProps=l.pendingProps,u===null?mg(l):Dt=u}function KS(l){var u=l,h=u.alternate;switch(u.tag){case 15:case 0:u=mS(h,u,u.pendingProps,u.type,void 0,Ft);break;case 11:u=mS(h,u,u.pendingProps,u.type.render,u.ref,Ft);break;case 5:Rv(u);default:ES(h,u),u=Dt=QA(u,po),u=_S(h,u,po)}l.memoizedProps=l.pendingProps,u===null?mg(l):Dt=u}function ed(l,u,h,y){ao=_c=null,Rv(u),Gu=null,sh=0;var _=u.return;try{if(j6(l,_,u,h,Ft)){qn=1,og(l,ma(h,l.current)),Dt=null;return}}catch(C){if(_!==null)throw Dt=_,C;qn=1,og(l,ma(h,l.current)),Dt=null;return}u.flags&32768?(Xt||y===1?l=!0:Xu||(Ft&536870912)!==0?l=!1:(rl=l=!0,(y===2||y===9||y===3||y===6)&&(y=wa.current,y!==null&&y.tag===13&&(y.flags|=16384))),QS(u,l)):mg(u)}function mg(l){var u=l;do{if((u.flags&32768)!==0){QS(u,rl);return}l=u.return;var h=U6(u.alternate,u,po);if(h!==null){Dt=h;return}if(u=u.sibling,u!==null){Dt=u;return}Dt=u=l}while(u!==null);qn===0&&(qn=5)}function QS(l,u){do{var h=H6(l.alternate,l);if(h!==null){h.flags&=32767,Dt=h;return}if(h=l.return,h!==null&&(h.flags|=32768,h.subtreeFlags=0,h.deletions=null),!u&&(l=l.sibling,l!==null)){Dt=l;return}Dt=l=h}while(l!==null);qn=6,Dt=null}function ZS(l,u,h,y,_,C,U,z,Q){l.cancelPendingCommit=null;do yg();while(Jr!==0);if((an&6)!==0)throw Error(r(327));if(u!==null){if(u===l.current)throw Error(r(177));if(C=u.lanes|u.childLanes,C|=av,Jl(l,h,C,U,z,Q),l===En&&(Dt=En=null,Ft=0),Qu=u,sl=l,Zu=h,ux=C,dx=_,HS=y,(u.subtreeFlags&10256)!==0||(u.flags&10256)!==0?(l.callbackNode=null,l.callbackPriority=0,eN(ke,function(){return rC(),null})):(l.callbackNode=null,l.callbackPriority=0),y=(u.flags&13878)!==0,(u.subtreeFlags&13878)!==0||y){y=G.T,G.T=null,_=W.p,W.p=2,U=an,an|=4;try{z6(l,u,h)}finally{an=U,W.p=_,G.T=y}}Jr=1,JS(),eC(),tC()}}function JS(){if(Jr===1){Jr=0;var l=sl,u=Qu,h=(u.flags&13878)!==0;if((u.subtreeFlags&13878)!==0||h){h=G.T,G.T=null;var y=W.p;W.p=2;var _=an;an|=4;try{NS(u,l);var C=Tx,U=UA(l.containerInfo),z=C.focusedElem,Q=C.selectionRange;if(U!==z&&z&&z.ownerDocument&&VA(z.ownerDocument.documentElement,z)){if(Q!==null&&ev(z)){var le=Q.start,Ee=Q.end;if(Ee===void 0&&(Ee=le),"selectionStart"in z)z.selectionStart=le,z.selectionEnd=Math.min(Ee,z.value.length);else{var Te=z.ownerDocument||document,de=Te&&Te.defaultView||window;if(de.getSelection){var pe=de.getSelection(),dt=z.textContent.length,st=Math.min(Q.start,dt),gn=Q.end===void 0?st:Math.min(Q.end,dt);!pe.extend&&st>gn&&(U=gn,gn=st,st=U);var ae=jA(z,st),ee=jA(z,gn);if(ae&&ee&&(pe.rangeCount!==1||pe.anchorNode!==ae.node||pe.anchorOffset!==ae.offset||pe.focusNode!==ee.node||pe.focusOffset!==ee.offset)){var oe=Te.createRange();oe.setStart(ae.node,ae.offset),pe.removeAllRanges(),st>gn?(pe.addRange(oe),pe.extend(ee.node,ee.offset)):(oe.setEnd(ee.node,ee.offset),pe.addRange(oe))}}}}for(Te=[],pe=z;pe=pe.parentNode;)pe.nodeType===1&&Te.push({element:pe,left:pe.scrollLeft,top:pe.scrollTop});for(typeof z.focus=="function"&&z.focus(),z=0;z<Te.length;z++){var Ce=Te[z];Ce.element.scrollLeft=Ce.left,Ce.element.scrollTop=Ce.top}}Dg=!!Cx,Tx=Cx=null}finally{an=_,W.p=y,G.T=h}}l.current=u,Jr=2}}function eC(){if(Jr===2){Jr=0;var l=sl,u=Qu,h=(u.flags&8772)!==0;if((u.subtreeFlags&8772)!==0||h){h=G.T,G.T=null;var y=W.p;W.p=2;var _=an;an|=4;try{OS(l,u.alternate,u)}finally{an=_,W.p=y,G.T=h}}Jr=3}}function tC(){if(Jr===4||Jr===3){Jr=0,Oe();var l=sl,u=Qu,h=Zu,y=HS;(u.subtreeFlags&10256)!==0||(u.flags&10256)!==0?Jr=5:(Jr=0,Qu=sl=null,nC(l,l.pendingLanes));var _=l.pendingLanes;if(_===0&&(al=null),wn(h),u=u.stateNode,at&&typeof at.onCommitFiberRoot=="function")try{at.onCommitFiberRoot(rt,u,void 0,(u.current.flags&128)===128)}catch{}if(y!==null){u=G.T,_=W.p,W.p=2,G.T=null;try{for(var C=l.onRecoverableError,U=0;U<y.length;U++){var z=y[U];C(z.value,{componentStack:z.stack})}}finally{G.T=u,W.p=_}}(Zu&3)!==0&&yg(),vs(l),_=l.pendingLanes,(h&4194090)!==0&&(_&42)!==0?l===fx?gh++:(gh=0,fx=l):gh=0,mh(0)}}function nC(l,u){(l.pooledCacheLanes&=u)===0&&(u=l.pooledCache,u!=null&&(l.pooledCache=null,Xf(u)))}function yg(l){return JS(),eC(),tC(),rC()}function rC(){if(Jr!==5)return!1;var l=sl,u=ux;ux=0;var h=wn(Zu),y=G.T,_=W.p;try{W.p=32>h?32:h,G.T=null,h=dx,dx=null;var C=sl,U=Zu;if(Jr=0,Qu=sl=null,Zu=0,(an&6)!==0)throw Error(r(331));var z=an;if(an|=4,VS(C.current),BS(C,C.current,U,h),an=z,mh(0,!1),at&&typeof at.onPostCommitFiberRoot=="function")try{at.onPostCommitFiberRoot(rt,C)}catch{}return!0}finally{W.p=_,G.T=y,nC(l,u)}}function iC(l,u,h){u=ma(h,u),u=$v(l.stateNode,u,2),l=Ko(l,u,2),l!==null&&(lr(l,2),vs(l))}function bn(l,u,h){if(l.tag===3)iC(l,l,h);else for(;u!==null;){if(u.tag===3){iC(u,l,h);break}else if(u.tag===1){var y=u.stateNode;if(typeof u.type.getDerivedStateFromError=="function"||typeof y.componentDidCatch=="function"&&(al===null||!al.has(y))){l=ma(h,l),h=lS(2),y=Ko(u,h,2),y!==null&&(cS(h,y,u,l),lr(y,2),vs(y));break}}u=u.return}}function mx(l,u,h){var y=l.pingCache;if(y===null){y=l.pingCache=new W6;var _=new Set;y.set(u,_)}else _=y.get(u),_===void 0&&(_=new Set,y.set(u,_));_.has(h)||(sx=!0,_.add(h),l=Q6.bind(null,l,u,h),u.then(l,l))}function Q6(l,u,h){var y=l.pingCache;y!==null&&y.delete(u),l.pingedLanes|=l.suspendedLanes&h,l.warmLanes&=~h,En===l&&(Ft&h)===h&&(qn===4||qn===3&&(Ft&62914560)===Ft&&300>De()-cx?(an&2)===0&&Ju(l,0):ox|=h,Ku===Ft&&(Ku=0)),vs(l)}function aC(l,u){u===0&&(u=Xr()),l=Nu(l,u),l!==null&&(lr(l,u),vs(l))}function Z6(l){var u=l.memoizedState,h=0;u!==null&&(h=u.retryLane),aC(l,h)}function J6(l,u){var h=0;switch(l.tag){case 13:var y=l.stateNode,_=l.memoizedState;_!==null&&(h=_.retryLane);break;case 19:y=l.stateNode;break;case 22:y=l.stateNode._retryCache;break;default:throw Error(r(314))}y!==null&&y.delete(u),aC(l,h)}function eN(l,u){return Be(l,u)}var vg=null,td=null,yx=!1,xg=!1,vx=!1,Dc=0;function vs(l){l!==td&&l.next===null&&(td===null?vg=td=l:td=td.next=l),xg=!0,yx||(yx=!0,nN())}function mh(l,u){if(!vx&&xg){vx=!0;do for(var h=!1,y=vg;y!==null;){if(l!==0){var _=y.pendingLanes;if(_===0)var C=0;else{var U=y.suspendedLanes,z=y.pingedLanes;C=(1<<31-Qe(42|l)+1)-1,C&=_&~(U&~z),C=C&201326741?C&201326741|1:C?C|2:0}C!==0&&(h=!0,cC(y,C))}else C=Ft,C=qr(y,y===En?C:0,y.cancelPendingCommit!==null||y.timeoutHandle!==-1),(C&3)===0||yt(y,C)||(h=!0,cC(y,C));y=y.next}while(h);vx=!1}}function tN(){sC()}function sC(){xg=yx=!1;var l=0;Dc!==0&&(uN()&&(l=Dc),Dc=0);for(var u=De(),h=null,y=vg;y!==null;){var _=y.next,C=oC(y,u);C===0?(y.next=null,h===null?vg=_:h.next=_,_===null&&(td=h)):(h=y,(l!==0||(C&3)!==0)&&(xg=!0)),y=_}mh(l)}function oC(l,u){for(var h=l.suspendedLanes,y=l.pingedLanes,_=l.expirationTimes,C=l.pendingLanes&-62914561;0<C;){var U=31-Qe(C),z=1<<U,Q=_[U];Q===-1?((z&h)===0||(z&y)!==0)&&(_[U]=Vn(z,u)):Q<=u&&(l.expiredLanes|=z),C&=~z}if(u=En,h=Ft,h=qr(l,l===u?h:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),y=l.callbackNode,h===0||l===u&&(sn===2||sn===9)||l.cancelPendingCommit!==null)return y!==null&&y!==null&&we(y),l.callbackNode=null,l.callbackPriority=0;if((h&3)===0||yt(l,h)){if(u=h&-h,u===l.callbackPriority)return u;switch(y!==null&&we(y),wn(h)){case 2:case 8:h=Re;break;case 32:h=ke;break;case 268435456:h=_t;break;default:h=ke}return y=lC.bind(null,l),h=Be(h,y),l.callbackPriority=u,l.callbackNode=h,u}return y!==null&&y!==null&&we(y),l.callbackPriority=2,l.callbackNode=null,2}function lC(l,u){if(Jr!==0&&Jr!==5)return l.callbackNode=null,l.callbackPriority=0,null;var h=l.callbackNode;if(yg()&&l.callbackNode!==h)return null;var y=Ft;return y=qr(l,l===En?y:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),y===0?null:($S(l,y,u),oC(l,De()),l.callbackNode!=null&&l.callbackNode===h?lC.bind(null,l):null)}function cC(l,u){if(yg())return null;$S(l,u,!0)}function nN(){fN(function(){(an&6)!==0?Be(We,tN):sC()})}function xx(){return Dc===0&&(Dc=Jn()),Dc}function uC(l){return l==null||typeof l=="symbol"||typeof l=="boolean"?null:typeof l=="function"?l:Au(""+l)}function dC(l,u){var h=u.ownerDocument.createElement("input");return h.name=u.name,h.value=u.value,l.id&&h.setAttribute("form",l.id),u.parentNode.insertBefore(h,u),l=new FormData(l),h.parentNode.removeChild(h),l}function rN(l,u,h,y,_){if(u==="submit"&&h&&h.stateNode===_){var C=uC((_[ur]||null).action),U=y.submitter;U&&(u=(u=U[ur]||null)?uC(u.formAction):U.getAttribute("formAction"),u!==null&&(C=u,U=null));var z=new Eu("action","action",null,y,_);l.push({event:z,listeners:[{instance:null,listener:function(){if(y.defaultPrevented){if(Dc!==0){var Q=U?dC(_,U):new FormData(_);jv(h,{pending:!0,data:Q,method:_.method,action:C},null,Q)}}else typeof C=="function"&&(z.preventDefault(),Q=U?dC(_,U):new FormData(_),jv(h,{pending:!0,data:Q,method:_.method,action:C},C,Q))},currentTarget:_}]})}}for(var wx=0;wx<iv.length;wx++){var bx=iv[wx],iN=bx.toLowerCase(),aN=bx[0].toUpperCase()+bx.slice(1);Ba(iN,"on"+aN)}Ba($A,"onAnimationEnd"),Ba(GA,"onAnimationIteration"),Ba(WA,"onAnimationStart"),Ba("dblclick","onDoubleClick"),Ba("focusin","onFocus"),Ba("focusout","onBlur"),Ba(_6,"onTransitionRun"),Ba(A6,"onTransitionStart"),Ba(E6,"onTransitionCancel"),Ba(YA,"onTransitionEnd"),Ys("onMouseEnter",["mouseout","mouseover"]),Ys("onMouseLeave",["mouseout","mouseover"]),Ys("onPointerEnter",["pointerout","pointerover"]),Ys("onPointerLeave",["pointerout","pointerover"]),Na("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Na("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Na("onBeforeInput",["compositionend","keypress","textInput","paste"]),Na("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Na("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Na("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var yh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),sN=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(yh));function fC(l,u){u=(u&4)!==0;for(var h=0;h<l.length;h++){var y=l[h],_=y.event;y=y.listeners;e:{var C=void 0;if(u)for(var U=y.length-1;0<=U;U--){var z=y[U],Q=z.instance,le=z.currentTarget;if(z=z.listener,Q!==C&&_.isPropagationStopped())break e;C=z,_.currentTarget=le;try{C(_)}catch(Ee){sg(Ee)}_.currentTarget=null,C=Q}else for(U=0;U<y.length;U++){if(z=y[U],Q=z.instance,le=z.currentTarget,z=z.listener,Q!==C&&_.isPropagationStopped())break e;C=z,_.currentTarget=le;try{C(_)}catch(Ee){sg(Ee)}_.currentTarget=null,C=Q}}}}function Rt(l,u){var h=u[If];h===void 0&&(h=u[If]=new Set);var y=l+"__bubble";h.has(y)||(hC(u,l,2,!1),h.add(y))}function _x(l,u,h){var y=0;u&&(y|=4),hC(h,l,y,u)}var wg="_reactListening"+Math.random().toString(36).slice(2);function Ax(l){if(!l[wg]){l[wg]=!0,Df.forEach(function(h){h!=="selectionchange"&&(sN.has(h)||_x(h,!1,l),_x(h,!0,l))});var u=l.nodeType===9?l:l.ownerDocument;u===null||u[wg]||(u[wg]=!0,_x("selectionchange",!1,u))}}function hC(l,u,h,y){switch(BC(u)){case 2:var _=PN;break;case 8:_=kN;break;default:_=Bx}h=_.bind(null,u,h,l),_=void 0,!pa||u!=="touchstart"&&u!=="touchmove"&&u!=="wheel"||(_=!0),y?_!==void 0?l.addEventListener(u,h,{capture:!0,passive:_}):l.addEventListener(u,h,!0):_!==void 0?l.addEventListener(u,h,{passive:_}):l.addEventListener(u,h,!1)}function Ex(l,u,h,y,_){var C=y;if((u&1)===0&&(u&2)===0&&y!==null)e:for(;;){if(y===null)return;var U=y.tag;if(U===3||U===4){var z=y.stateNode.containerInfo;if(z===_)break;if(U===4)for(U=y.return;U!==null;){var Q=U.tag;if((Q===3||Q===4)&&U.stateNode.containerInfo===_)return;U=U.return}for(;z!==null;){if(U=Ws(z),U===null)return;if(Q=U.tag,Q===5||Q===6||Q===26||Q===27){y=C=U;continue e}z=z.parentNode}}y=y.return}_p(function(){var le=C,Ee=ha(h),Te=[];e:{var de=qA.get(l);if(de!==void 0){var pe=Eu,dt=l;switch(l){case"keypress":if(cs(h)===0)break e;case"keydown":case"keyup":pe=Ru;break;case"focusin":dt="focus",pe=Tu;break;case"focusout":dt="blur",pe=Tu;break;case"beforeblur":case"afterblur":pe=Tu;break;case"click":if(h.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":pe=ga;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":pe=Ky;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":pe=Rp;break;case $A:case GA:case WA:pe=Iu;break;case YA:pe=Mp;break;case"scroll":case"scrollend":pe=Ap;break;case"wheel":pe=Ou;break;case"copy":case"cut":case"paste":pe=Du;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":pe=Uf;break;case"toggle":case"beforetoggle":pe=kp}var st=(u&4)!==0,gn=!st&&(l==="scroll"||l==="scrollend"),ae=st?de!==null?de+"Capture":null:de;st=[];for(var ee=le,oe;ee!==null;){var Ce=ee;if(oe=Ce.stateNode,Ce=Ce.tag,Ce!==5&&Ce!==26&&Ce!==27||oe===null||ae===null||(Ce=lc(ee,ae),Ce!=null&&st.push(vh(ee,Ce,oe))),gn)break;ee=ee.return}0<st.length&&(de=new pe(de,dt,null,h,Ee),Te.push({event:de,listeners:st}))}}if((u&7)===0){e:{if(de=l==="mouseover"||l==="pointerover",pe=l==="mouseout"||l==="pointerout",de&&h!==Ks&&(dt=h.relatedTarget||h.fromElement)&&(Ws(dt)||dt[da]))break e;if((pe||de)&&(de=Ee.window===Ee?Ee:(de=Ee.ownerDocument)?de.defaultView||de.parentWindow:window,pe?(dt=h.relatedTarget||h.toElement,pe=le,dt=dt?Ws(dt):null,dt!==null&&(gn=a(dt),st=dt.tag,dt!==gn||st!==5&&st!==27&&st!==6)&&(dt=null)):(pe=null,dt=le),pe!==dt)){if(st=ga,Ce="onMouseLeave",ae="onMouseEnter",ee="mouse",(l==="pointerout"||l==="pointerover")&&(st=Uf,Ce="onPointerLeave",ae="onPointerEnter",ee="pointer"),gn=pe==null?de:as(pe),oe=dt==null?de:as(dt),de=new st(Ce,ee+"leave",pe,h,Ee),de.target=gn,de.relatedTarget=oe,Ce=null,Ws(Ee)===le&&(st=new st(ae,ee+"enter",dt,h,Ee),st.target=oe,st.relatedTarget=gn,Ce=st),gn=Ce,pe&&dt)t:{for(st=pe,ae=dt,ee=0,oe=st;oe;oe=nd(oe))ee++;for(oe=0,Ce=ae;Ce;Ce=nd(Ce))oe++;for(;0<ee-oe;)st=nd(st),ee--;for(;0<oe-ee;)ae=nd(ae),oe--;for(;ee--;){if(st===ae||ae!==null&&st===ae.alternate)break t;st=nd(st),ae=nd(ae)}st=null}else st=null;pe!==null&&pC(Te,de,pe,st,!1),dt!==null&&gn!==null&&pC(Te,gn,dt,st,!0)}}e:{if(de=le?as(le):window,pe=de.nodeName&&de.nodeName.toLowerCase(),pe==="select"||pe==="input"&&de.type==="file")var Xe=PA;else if(br(de))if(kA)Xe=x6;else{Xe=y6;var Tt=m6}else pe=de.nodeName,!pe||pe.toLowerCase()!=="input"||de.type!=="checkbox"&&de.type!=="radio"?le&&kf(le.elementType)&&(Xe=PA):Xe=v6;if(Xe&&(Xe=Xe(l,le))){to(Te,Xe,h,Ee);break e}Tt&&Tt(l,de,le),l==="focusout"&&le&&de.type==="number"&&le.memoizedProps.value!=null&&Go(de,"number",de.value)}switch(Tt=le?as(le):window,l){case"focusin":(br(Tt)||Tt.contentEditable==="true")&&(Mu=Tt,tv=le,$f=null);break;case"focusout":$f=tv=Mu=null;break;case"mousedown":nv=!0;break;case"contextmenu":case"mouseup":case"dragend":nv=!1,HA(Te,h,Ee);break;case"selectionchange":if(b6)break;case"keydown":case"keyup":HA(Te,h,Ee)}var Ze;if(fs)e:{switch(l){case"compositionstart":var ot="onCompositionStart";break e;case"compositionend":ot="onCompositionEnd";break e;case"compositionupdate":ot="onCompositionUpdate";break e}ot=void 0}else Lt?ye(l,h)&&(ot="onCompositionEnd"):l==="keydown"&&h.keyCode===229&&(ot="onCompositionStart");ot&&(V&&h.locale!=="ko"&&(Lt||ot!=="onCompositionStart"?ot==="onCompositionEnd"&&Lt&&(Ze=Lf()):(ls=Ee,Wo="value"in ls?ls.value:ls.textContent,Lt=!0)),Tt=bg(le,ot),0<Tt.length&&(ot=new jf(ot,l,null,h,Ee),Te.push({event:ot,listeners:Tt}),Ze?ot.data=Ze:(Ze=Fe(h),Ze!==null&&(ot.data=Ze)))),(Ze=L?wr(l,h):Bt(l,h))&&(ot=bg(le,"onBeforeInput"),0<ot.length&&(Tt=new jf("onBeforeInput","beforeinput",null,h,Ee),Te.push({event:Tt,listeners:ot}),Tt.data=Ze)),rN(Te,l,le,h,Ee)}fC(Te,u)})}function vh(l,u,h){return{instance:l,listener:u,currentTarget:h}}function bg(l,u){for(var h=u+"Capture",y=[];l!==null;){var _=l,C=_.stateNode;if(_=_.tag,_!==5&&_!==26&&_!==27||C===null||(_=lc(l,h),_!=null&&y.unshift(vh(l,_,C)),_=lc(l,u),_!=null&&y.push(vh(l,_,C))),l.tag===3)return y;l=l.return}return[]}function nd(l){if(l===null)return null;do l=l.return;while(l&&l.tag!==5&&l.tag!==27);return l||null}function pC(l,u,h,y,_){for(var C=u._reactName,U=[];h!==null&&h!==y;){var z=h,Q=z.alternate,le=z.stateNode;if(z=z.tag,Q!==null&&Q===y)break;z!==5&&z!==26&&z!==27||le===null||(Q=le,_?(le=lc(h,C),le!=null&&U.unshift(vh(h,le,Q))):_||(le=lc(h,C),le!=null&&U.push(vh(h,le,Q)))),h=h.return}U.length!==0&&l.push({event:u,listeners:U})}var oN=/\r\n?/g,lN=/\u0000|\uFFFD/g;function gC(l){return(typeof l=="string"?l:""+l).replace(oN,`
`).replace(lN,"")}function mC(l,u){return u=gC(u),gC(l)===u}function _g(){}function pn(l,u,h,y,_,C){switch(h){case"children":typeof y=="string"?u==="body"||u==="textarea"&&y===""||fa(l,y):(typeof y=="number"||typeof y=="bigint")&&u!=="body"&&fa(l,""+y);break;case"className":ss(l,"class",y);break;case"tabIndex":ss(l,"tabindex",y);break;case"dir":case"role":case"viewBox":case"width":case"height":ss(l,h,y);break;case"style":Pf(l,y,C);break;case"data":if(u!=="object"){ss(l,"data",y);break}case"src":case"href":if(y===""&&(u!=="a"||h!=="href")){l.removeAttribute(h);break}if(y==null||typeof y=="function"||typeof y=="symbol"||typeof y=="boolean"){l.removeAttribute(h);break}y=Au(""+y),l.setAttribute(h,y);break;case"action":case"formAction":if(typeof y=="function"){l.setAttribute(h,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof C=="function"&&(h==="formAction"?(u!=="input"&&pn(l,u,"name",_.name,_,null),pn(l,u,"formEncType",_.formEncType,_,null),pn(l,u,"formMethod",_.formMethod,_,null),pn(l,u,"formTarget",_.formTarget,_,null)):(pn(l,u,"encType",_.encType,_,null),pn(l,u,"method",_.method,_,null),pn(l,u,"target",_.target,_,null)));if(y==null||typeof y=="symbol"||typeof y=="boolean"){l.removeAttribute(h);break}y=Au(""+y),l.setAttribute(h,y);break;case"onClick":y!=null&&(l.onclick=_g);break;case"onScroll":y!=null&&Rt("scroll",l);break;case"onScrollEnd":y!=null&&Rt("scrollend",l);break;case"dangerouslySetInnerHTML":if(y!=null){if(typeof y!="object"||!("__html"in y))throw Error(r(61));if(h=y.__html,h!=null){if(_.children!=null)throw Error(r(60));l.innerHTML=h}}break;case"multiple":l.multiple=y&&typeof y!="function"&&typeof y!="symbol";break;case"muted":l.muted=y&&typeof y!="function"&&typeof y!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(y==null||typeof y=="function"||typeof y=="boolean"||typeof y=="symbol"){l.removeAttribute("xlink:href");break}h=Au(""+y),l.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",h);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":y!=null&&typeof y!="function"&&typeof y!="symbol"?l.setAttribute(h,""+y):l.removeAttribute(h);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":y&&typeof y!="function"&&typeof y!="symbol"?l.setAttribute(h,""):l.removeAttribute(h);break;case"capture":case"download":y===!0?l.setAttribute(h,""):y!==!1&&y!=null&&typeof y!="function"&&typeof y!="symbol"?l.setAttribute(h,y):l.removeAttribute(h);break;case"cols":case"rows":case"size":case"span":y!=null&&typeof y!="function"&&typeof y!="symbol"&&!isNaN(y)&&1<=y?l.setAttribute(h,y):l.removeAttribute(h);break;case"rowSpan":case"start":y==null||typeof y=="function"||typeof y=="symbol"||isNaN(y)?l.removeAttribute(h):l.setAttribute(h,y);break;case"popover":Rt("beforetoggle",l),Rt("toggle",l),$o(l,"popover",y);break;case"xlinkActuate":Kr(l,"http://www.w3.org/1999/xlink","xlink:actuate",y);break;case"xlinkArcrole":Kr(l,"http://www.w3.org/1999/xlink","xlink:arcrole",y);break;case"xlinkRole":Kr(l,"http://www.w3.org/1999/xlink","xlink:role",y);break;case"xlinkShow":Kr(l,"http://www.w3.org/1999/xlink","xlink:show",y);break;case"xlinkTitle":Kr(l,"http://www.w3.org/1999/xlink","xlink:title",y);break;case"xlinkType":Kr(l,"http://www.w3.org/1999/xlink","xlink:type",y);break;case"xmlBase":Kr(l,"http://www.w3.org/XML/1998/namespace","xml:base",y);break;case"xmlLang":Kr(l,"http://www.w3.org/XML/1998/namespace","xml:lang",y);break;case"xmlSpace":Kr(l,"http://www.w3.org/XML/1998/namespace","xml:space",y);break;case"is":$o(l,"is",y);break;case"innerText":case"textContent":break;default:(!(2<h.length)||h[0]!=="o"&&h[0]!=="O"||h[1]!=="n"&&h[1]!=="N")&&(h=qy.get(h)||h,$o(l,h,y))}}function Sx(l,u,h,y,_,C){switch(h){case"style":Pf(l,y,C);break;case"dangerouslySetInnerHTML":if(y!=null){if(typeof y!="object"||!("__html"in y))throw Error(r(61));if(h=y.__html,h!=null){if(_.children!=null)throw Error(r(60));l.innerHTML=h}}break;case"children":typeof y=="string"?fa(l,y):(typeof y=="number"||typeof y=="bigint")&&fa(l,""+y);break;case"onScroll":y!=null&&Rt("scroll",l);break;case"onScrollEnd":y!=null&&Rt("scrollend",l);break;case"onClick":y!=null&&(l.onclick=_g);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!vu.hasOwnProperty(h))e:{if(h[0]==="o"&&h[1]==="n"&&(_=h.endsWith("Capture"),u=h.slice(2,_?h.length-7:void 0),C=l[ur]||null,C=C!=null?C[h]:null,typeof C=="function"&&l.removeEventListener(u,C,_),typeof y=="function")){typeof C!="function"&&C!==null&&(h in l?l[h]=null:l.hasAttribute(h)&&l.removeAttribute(h)),l.addEventListener(u,y,_);break e}h in l?l[h]=y:y===!0?l.setAttribute(h,""):$o(l,h,y)}}}function ei(l,u,h){switch(u){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Rt("error",l),Rt("load",l);var y=!1,_=!1,C;for(C in h)if(h.hasOwnProperty(C)){var U=h[C];if(U!=null)switch(C){case"src":y=!0;break;case"srcSet":_=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,u));default:pn(l,u,C,U,h,null)}}_&&pn(l,u,"srcSet",h.srcSet,h,null),y&&pn(l,u,"src",h.src,h,null);return;case"input":Rt("invalid",l);var z=C=U=_=null,Q=null,le=null;for(y in h)if(h.hasOwnProperty(y)){var Ee=h[y];if(Ee!=null)switch(y){case"name":_=Ee;break;case"type":U=Ee;break;case"checked":Q=Ee;break;case"defaultChecked":le=Ee;break;case"value":C=Ee;break;case"defaultValue":z=Ee;break;case"children":case"dangerouslySetInnerHTML":if(Ee!=null)throw Error(r(137,u));break;default:pn(l,u,y,Ee,h,null)}}ac(l,C,z,Q,le,U,_,!1),_u(l);return;case"select":Rt("invalid",l),y=U=C=null;for(_ in h)if(h.hasOwnProperty(_)&&(z=h[_],z!=null))switch(_){case"value":C=z;break;case"defaultValue":U=z;break;case"multiple":y=z;default:pn(l,u,_,z,h,null)}u=C,h=U,l.multiple=!!y,u!=null?Xs(l,!!y,u,!1):h!=null&&Xs(l,!!y,h,!0);return;case"textarea":Rt("invalid",l),C=_=y=null;for(U in h)if(h.hasOwnProperty(U)&&(z=h[U],z!=null))switch(U){case"value":y=z;break;case"defaultValue":_=z;break;case"children":C=z;break;case"dangerouslySetInnerHTML":if(z!=null)throw Error(r(91));break;default:pn(l,u,U,z,h,null)}sc(l,y,_,C),_u(l);return;case"option":for(Q in h)if(h.hasOwnProperty(Q)&&(y=h[Q],y!=null))switch(Q){case"selected":l.selected=y&&typeof y!="function"&&typeof y!="symbol";break;default:pn(l,u,Q,y,h,null)}return;case"dialog":Rt("beforetoggle",l),Rt("toggle",l),Rt("cancel",l),Rt("close",l);break;case"iframe":case"object":Rt("load",l);break;case"video":case"audio":for(y=0;y<yh.length;y++)Rt(yh[y],l);break;case"image":Rt("error",l),Rt("load",l);break;case"details":Rt("toggle",l);break;case"embed":case"source":case"link":Rt("error",l),Rt("load",l);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(le in h)if(h.hasOwnProperty(le)&&(y=h[le],y!=null))switch(le){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,u));default:pn(l,u,le,y,h,null)}return;default:if(kf(u)){for(Ee in h)h.hasOwnProperty(Ee)&&(y=h[Ee],y!==void 0&&Sx(l,u,Ee,y,h,void 0));return}}for(z in h)h.hasOwnProperty(z)&&(y=h[z],y!=null&&pn(l,u,z,y,h,null))}function cN(l,u,h,y){switch(u){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var _=null,C=null,U=null,z=null,Q=null,le=null,Ee=null;for(pe in h){var Te=h[pe];if(h.hasOwnProperty(pe)&&Te!=null)switch(pe){case"checked":break;case"value":break;case"defaultValue":Q=Te;default:y.hasOwnProperty(pe)||pn(l,u,pe,null,y,Te)}}for(var de in y){var pe=y[de];if(Te=h[de],y.hasOwnProperty(de)&&(pe!=null||Te!=null))switch(de){case"type":C=pe;break;case"name":_=pe;break;case"checked":le=pe;break;case"defaultChecked":Ee=pe;break;case"value":U=pe;break;case"defaultValue":z=pe;break;case"children":case"dangerouslySetInnerHTML":if(pe!=null)throw Error(r(137,u));break;default:pe!==Te&&pn(l,u,de,pe,y,Te)}}Xi(l,U,z,Q,le,Ee,C,_);return;case"select":pe=U=z=de=null;for(C in h)if(Q=h[C],h.hasOwnProperty(C)&&Q!=null)switch(C){case"value":break;case"multiple":pe=Q;default:y.hasOwnProperty(C)||pn(l,u,C,null,y,Q)}for(_ in y)if(C=y[_],Q=h[_],y.hasOwnProperty(_)&&(C!=null||Q!=null))switch(_){case"value":de=C;break;case"defaultValue":z=C;break;case"multiple":U=C;default:C!==Q&&pn(l,u,_,C,y,Q)}u=z,h=U,y=pe,de!=null?Xs(l,!!h,de,!1):!!y!=!!h&&(u!=null?Xs(l,!!h,u,!0):Xs(l,!!h,h?[]:"",!1));return;case"textarea":pe=de=null;for(z in h)if(_=h[z],h.hasOwnProperty(z)&&_!=null&&!y.hasOwnProperty(z))switch(z){case"value":break;case"children":break;default:pn(l,u,z,null,y,_)}for(U in y)if(_=y[U],C=h[U],y.hasOwnProperty(U)&&(_!=null||C!=null))switch(U){case"value":de=_;break;case"defaultValue":pe=_;break;case"children":break;case"dangerouslySetInnerHTML":if(_!=null)throw Error(r(91));break;default:_!==C&&pn(l,u,U,_,y,C)}fn(l,de,pe);return;case"option":for(var dt in h)if(de=h[dt],h.hasOwnProperty(dt)&&de!=null&&!y.hasOwnProperty(dt))switch(dt){case"selected":l.selected=!1;break;default:pn(l,u,dt,null,y,de)}for(Q in y)if(de=y[Q],pe=h[Q],y.hasOwnProperty(Q)&&de!==pe&&(de!=null||pe!=null))switch(Q){case"selected":l.selected=de&&typeof de!="function"&&typeof de!="symbol";break;default:pn(l,u,Q,de,y,pe)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var st in h)de=h[st],h.hasOwnProperty(st)&&de!=null&&!y.hasOwnProperty(st)&&pn(l,u,st,null,y,de);for(le in y)if(de=y[le],pe=h[le],y.hasOwnProperty(le)&&de!==pe&&(de!=null||pe!=null))switch(le){case"children":case"dangerouslySetInnerHTML":if(de!=null)throw Error(r(137,u));break;default:pn(l,u,le,de,y,pe)}return;default:if(kf(u)){for(var gn in h)de=h[gn],h.hasOwnProperty(gn)&&de!==void 0&&!y.hasOwnProperty(gn)&&Sx(l,u,gn,void 0,y,de);for(Ee in y)de=y[Ee],pe=h[Ee],!y.hasOwnProperty(Ee)||de===pe||de===void 0&&pe===void 0||Sx(l,u,Ee,de,y,pe);return}}for(var ae in h)de=h[ae],h.hasOwnProperty(ae)&&de!=null&&!y.hasOwnProperty(ae)&&pn(l,u,ae,null,y,de);for(Te in y)de=y[Te],pe=h[Te],!y.hasOwnProperty(Te)||de===pe||de==null&&pe==null||pn(l,u,Te,de,y,pe)}var Cx=null,Tx=null;function Ag(l){return l.nodeType===9?l:l.ownerDocument}function yC(l){switch(l){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function vC(l,u){if(l===0)switch(u){case"svg":return 1;case"math":return 2;default:return 0}return l===1&&u==="foreignObject"?0:l}function Ix(l,u){return l==="textarea"||l==="noscript"||typeof u.children=="string"||typeof u.children=="number"||typeof u.children=="bigint"||typeof u.dangerouslySetInnerHTML=="object"&&u.dangerouslySetInnerHTML!==null&&u.dangerouslySetInnerHTML.__html!=null}var Dx=null;function uN(){var l=window.event;return l&&l.type==="popstate"?l===Dx?!1:(Dx=l,!0):(Dx=null,!1)}var xC=typeof setTimeout=="function"?setTimeout:void 0,dN=typeof clearTimeout=="function"?clearTimeout:void 0,wC=typeof Promise=="function"?Promise:void 0,fN=typeof queueMicrotask=="function"?queueMicrotask:typeof wC<"u"?function(l){return wC.resolve(null).then(l).catch(hN)}:xC;function hN(l){setTimeout(function(){throw l})}function ll(l){return l==="head"}function bC(l,u){var h=u,y=0,_=0;do{var C=h.nextSibling;if(l.removeChild(h),C&&C.nodeType===8)if(h=C.data,h==="/$"){if(0<y&&8>y){h=y;var U=l.ownerDocument;if(h&1&&xh(U.documentElement),h&2&&xh(U.body),h&4)for(h=U.head,xh(h),U=h.firstChild;U;){var z=U.nextSibling,Q=U.nodeName;U[tc]||Q==="SCRIPT"||Q==="STYLE"||Q==="LINK"&&U.rel.toLowerCase()==="stylesheet"||h.removeChild(U),U=z}}if(_===0){l.removeChild(C),Th(u);return}_--}else h==="$"||h==="$?"||h==="$!"?_++:y=h.charCodeAt(0)-48;else y=0;h=C}while(h);Th(u)}function Rx(l){var u=l.firstChild;for(u&&u.nodeType===10&&(u=u.nextSibling);u;){var h=u;switch(u=u.nextSibling,h.nodeName){case"HTML":case"HEAD":case"BODY":Rx(h),zo(h);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(h.rel.toLowerCase()==="stylesheet")continue}l.removeChild(h)}}function pN(l,u,h,y){for(;l.nodeType===1;){var _=h;if(l.nodeName.toLowerCase()!==u.toLowerCase()){if(!y&&(l.nodeName!=="INPUT"||l.type!=="hidden"))break}else if(y){if(!l[tc])switch(u){case"meta":if(!l.hasAttribute("itemprop"))break;return l;case"link":if(C=l.getAttribute("rel"),C==="stylesheet"&&l.hasAttribute("data-precedence"))break;if(C!==_.rel||l.getAttribute("href")!==(_.href==null||_.href===""?null:_.href)||l.getAttribute("crossorigin")!==(_.crossOrigin==null?null:_.crossOrigin)||l.getAttribute("title")!==(_.title==null?null:_.title))break;return l;case"style":if(l.hasAttribute("data-precedence"))break;return l;case"script":if(C=l.getAttribute("src"),(C!==(_.src==null?null:_.src)||l.getAttribute("type")!==(_.type==null?null:_.type)||l.getAttribute("crossorigin")!==(_.crossOrigin==null?null:_.crossOrigin))&&C&&l.hasAttribute("async")&&!l.hasAttribute("itemprop"))break;return l;default:return l}}else if(u==="input"&&l.type==="hidden"){var C=_.name==null?null:""+_.name;if(_.type==="hidden"&&l.getAttribute("name")===C)return l}else return l;if(l=ja(l.nextSibling),l===null)break}return null}function gN(l,u,h){if(u==="")return null;for(;l.nodeType!==3;)if((l.nodeType!==1||l.nodeName!=="INPUT"||l.type!=="hidden")&&!h||(l=ja(l.nextSibling),l===null))return null;return l}function Ox(l){return l.data==="$!"||l.data==="$?"&&l.ownerDocument.readyState==="complete"}function mN(l,u){var h=l.ownerDocument;if(l.data!=="$?"||h.readyState==="complete")u();else{var y=function(){u(),h.removeEventListener("DOMContentLoaded",y)};h.addEventListener("DOMContentLoaded",y),l._reactRetry=y}}function ja(l){for(;l!=null;l=l.nextSibling){var u=l.nodeType;if(u===1||u===3)break;if(u===8){if(u=l.data,u==="$"||u==="$!"||u==="$?"||u==="F!"||u==="F")break;if(u==="/$")return null}}return l}var Mx=null;function _C(l){l=l.previousSibling;for(var u=0;l;){if(l.nodeType===8){var h=l.data;if(h==="$"||h==="$!"||h==="$?"){if(u===0)return l;u--}else h==="/$"&&u++}l=l.previousSibling}return null}function AC(l,u,h){switch(u=Ag(h),l){case"html":if(l=u.documentElement,!l)throw Error(r(452));return l;case"head":if(l=u.head,!l)throw Error(r(453));return l;case"body":if(l=u.body,!l)throw Error(r(454));return l;default:throw Error(r(451))}}function xh(l){for(var u=l.attributes;u.length;)l.removeAttributeNode(u[0]);zo(l)}var _a=new Map,EC=new Set;function Eg(l){return typeof l.getRootNode=="function"?l.getRootNode():l.nodeType===9?l:l.ownerDocument}var go=W.d;W.d={f:yN,r:vN,D:xN,C:wN,L:bN,m:_N,X:EN,S:AN,M:SN};function yN(){var l=go.f(),u=gg();return l||u}function vN(l){var u=is(l);u!==null&&u.tag===5&&u.type==="form"?$E(u):go.r(l)}var rd=typeof document>"u"?null:document;function SC(l,u,h){var y=rd;if(y&&typeof u=="string"&&u){var _=dr(u);_='link[rel="'+l+'"][href="'+_+'"]',typeof h=="string"&&(_+='[crossorigin="'+h+'"]'),EC.has(_)||(EC.add(_),l={rel:l,crossOrigin:h,href:u},y.querySelector(_)===null&&(u=y.createElement("link"),ei(u,"link",l),er(u),y.head.appendChild(u)))}}function xN(l){go.D(l),SC("dns-prefetch",l,null)}function wN(l,u){go.C(l,u),SC("preconnect",l,u)}function bN(l,u,h){go.L(l,u,h);var y=rd;if(y&&l&&u){var _='link[rel="preload"][as="'+dr(u)+'"]';u==="image"&&h&&h.imageSrcSet?(_+='[imagesrcset="'+dr(h.imageSrcSet)+'"]',typeof h.imageSizes=="string"&&(_+='[imagesizes="'+dr(h.imageSizes)+'"]')):_+='[href="'+dr(l)+'"]';var C=_;switch(u){case"style":C=id(l);break;case"script":C=ad(l)}_a.has(C)||(l=f({rel:"preload",href:u==="image"&&h&&h.imageSrcSet?void 0:l,as:u},h),_a.set(C,l),y.querySelector(_)!==null||u==="style"&&y.querySelector(wh(C))||u==="script"&&y.querySelector(bh(C))||(u=y.createElement("link"),ei(u,"link",l),er(u),y.head.appendChild(u)))}}function _N(l,u){go.m(l,u);var h=rd;if(h&&l){var y=u&&typeof u.as=="string"?u.as:"script",_='link[rel="modulepreload"][as="'+dr(y)+'"][href="'+dr(l)+'"]',C=_;switch(y){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":C=ad(l)}if(!_a.has(C)&&(l=f({rel:"modulepreload",href:l},u),_a.set(C,l),h.querySelector(_)===null)){switch(y){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(h.querySelector(bh(C)))return}y=h.createElement("link"),ei(y,"link",l),er(y),h.head.appendChild(y)}}}function AN(l,u,h){go.S(l,u,h);var y=rd;if(y&&l){var _=Si(y).hoistableStyles,C=id(l);u=u||"default";var U=_.get(C);if(!U){var z={loading:0,preload:null};if(U=y.querySelector(wh(C)))z.loading=5;else{l=f({rel:"stylesheet",href:l,"data-precedence":u},h),(h=_a.get(C))&&Px(l,h);var Q=U=y.createElement("link");er(Q),ei(Q,"link",l),Q._p=new Promise(function(le,Ee){Q.onload=le,Q.onerror=Ee}),Q.addEventListener("load",function(){z.loading|=1}),Q.addEventListener("error",function(){z.loading|=2}),z.loading|=4,Sg(U,u,y)}U={type:"stylesheet",instance:U,count:1,state:z},_.set(C,U)}}}function EN(l,u){go.X(l,u);var h=rd;if(h&&l){var y=Si(h).hoistableScripts,_=ad(l),C=y.get(_);C||(C=h.querySelector(bh(_)),C||(l=f({src:l,async:!0},u),(u=_a.get(_))&&kx(l,u),C=h.createElement("script"),er(C),ei(C,"link",l),h.head.appendChild(C)),C={type:"script",instance:C,count:1,state:null},y.set(_,C))}}function SN(l,u){go.M(l,u);var h=rd;if(h&&l){var y=Si(h).hoistableScripts,_=ad(l),C=y.get(_);C||(C=h.querySelector(bh(_)),C||(l=f({src:l,async:!0,type:"module"},u),(u=_a.get(_))&&kx(l,u),C=h.createElement("script"),er(C),ei(C,"link",l),h.head.appendChild(C)),C={type:"script",instance:C,count:1,state:null},y.set(_,C))}}function CC(l,u,h,y){var _=(_=Le.current)?Eg(_):null;if(!_)throw Error(r(446));switch(l){case"meta":case"title":return null;case"style":return typeof h.precedence=="string"&&typeof h.href=="string"?(u=id(h.href),h=Si(_).hoistableStyles,y=h.get(u),y||(y={type:"style",instance:null,count:0,state:null},h.set(u,y)),y):{type:"void",instance:null,count:0,state:null};case"link":if(h.rel==="stylesheet"&&typeof h.href=="string"&&typeof h.precedence=="string"){l=id(h.href);var C=Si(_).hoistableStyles,U=C.get(l);if(U||(_=_.ownerDocument||_,U={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},C.set(l,U),(C=_.querySelector(wh(l)))&&!C._p&&(U.instance=C,U.state.loading=5),_a.has(l)||(h={rel:"preload",as:"style",href:h.href,crossOrigin:h.crossOrigin,integrity:h.integrity,media:h.media,hrefLang:h.hrefLang,referrerPolicy:h.referrerPolicy},_a.set(l,h),C||CN(_,l,h,U.state))),u&&y===null)throw Error(r(528,""));return U}if(u&&y!==null)throw Error(r(529,""));return null;case"script":return u=h.async,h=h.src,typeof h=="string"&&u&&typeof u!="function"&&typeof u!="symbol"?(u=ad(h),h=Si(_).hoistableScripts,y=h.get(u),y||(y={type:"script",instance:null,count:0,state:null},h.set(u,y)),y):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,l))}}function id(l){return'href="'+dr(l)+'"'}function wh(l){return'link[rel="stylesheet"]['+l+"]"}function TC(l){return f({},l,{"data-precedence":l.precedence,precedence:null})}function CN(l,u,h,y){l.querySelector('link[rel="preload"][as="style"]['+u+"]")?y.loading=1:(u=l.createElement("link"),y.preload=u,u.addEventListener("load",function(){return y.loading|=1}),u.addEventListener("error",function(){return y.loading|=2}),ei(u,"link",h),er(u),l.head.appendChild(u))}function ad(l){return'[src="'+dr(l)+'"]'}function bh(l){return"script[async]"+l}function IC(l,u,h){if(u.count++,u.instance===null)switch(u.type){case"style":var y=l.querySelector('style[data-href~="'+dr(h.href)+'"]');if(y)return u.instance=y,er(y),y;var _=f({},h,{"data-href":h.href,"data-precedence":h.precedence,href:null,precedence:null});return y=(l.ownerDocument||l).createElement("style"),er(y),ei(y,"style",_),Sg(y,h.precedence,l),u.instance=y;case"stylesheet":_=id(h.href);var C=l.querySelector(wh(_));if(C)return u.state.loading|=4,u.instance=C,er(C),C;y=TC(h),(_=_a.get(_))&&Px(y,_),C=(l.ownerDocument||l).createElement("link"),er(C);var U=C;return U._p=new Promise(function(z,Q){U.onload=z,U.onerror=Q}),ei(C,"link",y),u.state.loading|=4,Sg(C,h.precedence,l),u.instance=C;case"script":return C=ad(h.src),(_=l.querySelector(bh(C)))?(u.instance=_,er(_),_):(y=h,(_=_a.get(C))&&(y=f({},h),kx(y,_)),l=l.ownerDocument||l,_=l.createElement("script"),er(_),ei(_,"link",y),l.head.appendChild(_),u.instance=_);case"void":return null;default:throw Error(r(443,u.type))}else u.type==="stylesheet"&&(u.state.loading&4)===0&&(y=u.instance,u.state.loading|=4,Sg(y,h.precedence,l));return u.instance}function Sg(l,u,h){for(var y=h.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),_=y.length?y[y.length-1]:null,C=_,U=0;U<y.length;U++){var z=y[U];if(z.dataset.precedence===u)C=z;else if(C!==_)break}C?C.parentNode.insertBefore(l,C.nextSibling):(u=h.nodeType===9?h.head:h,u.insertBefore(l,u.firstChild))}function Px(l,u){l.crossOrigin==null&&(l.crossOrigin=u.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=u.referrerPolicy),l.title==null&&(l.title=u.title)}function kx(l,u){l.crossOrigin==null&&(l.crossOrigin=u.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=u.referrerPolicy),l.integrity==null&&(l.integrity=u.integrity)}var Cg=null;function DC(l,u,h){if(Cg===null){var y=new Map,_=Cg=new Map;_.set(h,y)}else _=Cg,y=_.get(h),y||(y=new Map,_.set(h,y));if(y.has(l))return y;for(y.set(l,null),h=h.getElementsByTagName(l),_=0;_<h.length;_++){var C=h[_];if(!(C[tc]||C[xr]||l==="link"&&C.getAttribute("rel")==="stylesheet")&&C.namespaceURI!=="http://www.w3.org/2000/svg"){var U=C.getAttribute(u)||"";U=l+U;var z=y.get(U);z?z.push(C):y.set(U,[C])}}return y}function RC(l,u,h){l=l.ownerDocument||l,l.head.insertBefore(h,u==="title"?l.querySelector("head > title"):null)}function TN(l,u,h){if(h===1||u.itemProp!=null)return!1;switch(l){case"meta":case"title":return!0;case"style":if(typeof u.precedence!="string"||typeof u.href!="string"||u.href==="")break;return!0;case"link":if(typeof u.rel!="string"||typeof u.href!="string"||u.href===""||u.onLoad||u.onError)break;switch(u.rel){case"stylesheet":return l=u.disabled,typeof u.precedence=="string"&&l==null;default:return!0}case"script":if(u.async&&typeof u.async!="function"&&typeof u.async!="symbol"&&!u.onLoad&&!u.onError&&u.src&&typeof u.src=="string")return!0}return!1}function OC(l){return!(l.type==="stylesheet"&&(l.state.loading&3)===0)}var _h=null;function IN(){}function DN(l,u,h){if(_h===null)throw Error(r(475));var y=_h;if(u.type==="stylesheet"&&(typeof h.media!="string"||matchMedia(h.media).matches!==!1)&&(u.state.loading&4)===0){if(u.instance===null){var _=id(h.href),C=l.querySelector(wh(_));if(C){l=C._p,l!==null&&typeof l=="object"&&typeof l.then=="function"&&(y.count++,y=Tg.bind(y),l.then(y,y)),u.state.loading|=4,u.instance=C,er(C);return}C=l.ownerDocument||l,h=TC(h),(_=_a.get(_))&&Px(h,_),C=C.createElement("link"),er(C);var U=C;U._p=new Promise(function(z,Q){U.onload=z,U.onerror=Q}),ei(C,"link",h),u.instance=C}y.stylesheets===null&&(y.stylesheets=new Map),y.stylesheets.set(u,l),(l=u.state.preload)&&(u.state.loading&3)===0&&(y.count++,u=Tg.bind(y),l.addEventListener("load",u),l.addEventListener("error",u))}}function RN(){if(_h===null)throw Error(r(475));var l=_h;return l.stylesheets&&l.count===0&&Nx(l,l.stylesheets),0<l.count?function(u){var h=setTimeout(function(){if(l.stylesheets&&Nx(l,l.stylesheets),l.unsuspend){var y=l.unsuspend;l.unsuspend=null,y()}},6e4);return l.unsuspend=u,function(){l.unsuspend=null,clearTimeout(h)}}:null}function Tg(){if(this.count--,this.count===0){if(this.stylesheets)Nx(this,this.stylesheets);else if(this.unsuspend){var l=this.unsuspend;this.unsuspend=null,l()}}}var Ig=null;function Nx(l,u){l.stylesheets=null,l.unsuspend!==null&&(l.count++,Ig=new Map,u.forEach(ON,l),Ig=null,Tg.call(l))}function ON(l,u){if(!(u.state.loading&4)){var h=Ig.get(l);if(h)var y=h.get(null);else{h=new Map,Ig.set(l,h);for(var _=l.querySelectorAll("link[data-precedence],style[data-precedence]"),C=0;C<_.length;C++){var U=_[C];(U.nodeName==="LINK"||U.getAttribute("media")!=="not all")&&(h.set(U.dataset.precedence,U),y=U)}y&&h.set(null,y)}_=u.instance,U=_.getAttribute("data-precedence"),C=h.get(U)||y,C===y&&h.set(null,_),h.set(U,_),this.count++,y=Tg.bind(this),_.addEventListener("load",y),_.addEventListener("error",y),C?C.parentNode.insertBefore(_,C.nextSibling):(l=l.nodeType===9?l.head:l,l.insertBefore(_,l.firstChild)),u.state.loading|=4}}var Ah={$$typeof:T,Provider:null,Consumer:null,_currentValue:K,_currentValue2:K,_threadCount:0};function MN(l,u,h,y,_,C,U,z){this.tag=1,this.containerInfo=l,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ei(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ei(0),this.hiddenUpdates=Ei(null),this.identifierPrefix=y,this.onUncaughtError=_,this.onCaughtError=C,this.onRecoverableError=U,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=z,this.incompleteTransitions=new Map}function MC(l,u,h,y,_,C,U,z,Q,le,Ee,Te){return l=new MN(l,u,h,U,z,Q,le,Te),u=1,C===!0&&(u|=24),C=Qi(3,null,null,u),l.current=C,C.stateNode=l,u=mv(),u.refCount++,l.pooledCache=u,u.refCount++,C.memoizedState={element:y,isDehydrated:h,cache:u},wv(C),l}function PC(l){return l?(l=Lu,l):Lu}function kC(l,u,h,y,_,C){_=PC(_),y.context===null?y.context=_:y.pendingContext=_,y=Xo(u),y.payload={element:h},C=C===void 0?null:C,C!==null&&(y.callback=C),h=Ko(l,y,u),h!==null&&(na(h,l,u),Jf(h,l,u))}function NC(l,u){if(l=l.memoizedState,l!==null&&l.dehydrated!==null){var h=l.retryLane;l.retryLane=h!==0&&h<u?h:u}}function Lx(l,u){NC(l,u),(l=l.alternate)&&NC(l,u)}function LC(l){if(l.tag===13){var u=Nu(l,67108864);u!==null&&na(u,l,67108864),Lx(l,67108864)}}var Dg=!0;function PN(l,u,h,y){var _=G.T;G.T=null;var C=W.p;try{W.p=2,Bx(l,u,h,y)}finally{W.p=C,G.T=_}}function kN(l,u,h,y){var _=G.T;G.T=null;var C=W.p;try{W.p=8,Bx(l,u,h,y)}finally{W.p=C,G.T=_}}function Bx(l,u,h,y){if(Dg){var _=Fx(y);if(_===null)Ex(l,u,y,Rg,h),FC(l,y);else if(LN(_,l,u,h,y))y.stopPropagation();else if(FC(l,y),u&4&&-1<NN.indexOf(l)){for(;_!==null;){var C=is(_);if(C!==null)switch(C.tag){case 3:if(C=C.stateNode,C.current.memoizedState.isDehydrated){var U=qt(C.pendingLanes);if(U!==0){var z=C;for(z.pendingLanes|=2,z.entangledLanes|=2;U;){var Q=1<<31-Qe(U);z.entanglements[1]|=Q,U&=~Q}vs(C),(an&6)===0&&(hg=De()+500,mh(0))}}break;case 13:z=Nu(C,2),z!==null&&na(z,C,2),gg(),Lx(C,2)}if(C=Fx(y),C===null&&Ex(l,u,y,Rg,h),C===_)break;_=C}_!==null&&y.stopPropagation()}else Ex(l,u,y,null,h)}}function Fx(l){return l=ha(l),jx(l)}var Rg=null;function jx(l){if(Rg=null,l=Ws(l),l!==null){var u=a(l);if(u===null)l=null;else{var h=u.tag;if(h===13){if(l=s(u),l!==null)return l;l=null}else if(h===3){if(u.stateNode.current.memoizedState.isDehydrated)return u.tag===3?u.stateNode.containerInfo:null;l=null}else u!==l&&(l=null)}}return Rg=l,null}function BC(l){switch(l){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(qe()){case We:return 2;case Re:return 8;case ke:case ht:return 32;case _t:return 268435456;default:return 32}default:return 32}}var Vx=!1,cl=null,ul=null,dl=null,Eh=new Map,Sh=new Map,fl=[],NN="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function FC(l,u){switch(l){case"focusin":case"focusout":cl=null;break;case"dragenter":case"dragleave":ul=null;break;case"mouseover":case"mouseout":dl=null;break;case"pointerover":case"pointerout":Eh.delete(u.pointerId);break;case"gotpointercapture":case"lostpointercapture":Sh.delete(u.pointerId)}}function Ch(l,u,h,y,_,C){return l===null||l.nativeEvent!==C?(l={blockedOn:u,domEventName:h,eventSystemFlags:y,nativeEvent:C,targetContainers:[_]},u!==null&&(u=is(u),u!==null&&LC(u)),l):(l.eventSystemFlags|=y,u=l.targetContainers,_!==null&&u.indexOf(_)===-1&&u.push(_),l)}function LN(l,u,h,y,_){switch(u){case"focusin":return cl=Ch(cl,l,u,h,y,_),!0;case"dragenter":return ul=Ch(ul,l,u,h,y,_),!0;case"mouseover":return dl=Ch(dl,l,u,h,y,_),!0;case"pointerover":var C=_.pointerId;return Eh.set(C,Ch(Eh.get(C)||null,l,u,h,y,_)),!0;case"gotpointercapture":return C=_.pointerId,Sh.set(C,Ch(Sh.get(C)||null,l,u,h,y,_)),!0}return!1}function jC(l){var u=Ws(l.target);if(u!==null){var h=a(u);if(h!==null){if(u=h.tag,u===13){if(u=s(h),u!==null){l.blockedOn=u,ec(l.priority,function(){if(h.tag===13){var y=ta();y=Gs(y);var _=Nu(h,y);_!==null&&na(_,h,y),Lx(h,y)}});return}}else if(u===3&&h.stateNode.current.memoizedState.isDehydrated){l.blockedOn=h.tag===3?h.stateNode.containerInfo:null;return}}}l.blockedOn=null}function Og(l){if(l.blockedOn!==null)return!1;for(var u=l.targetContainers;0<u.length;){var h=Fx(l.nativeEvent);if(h===null){h=l.nativeEvent;var y=new h.constructor(h.type,h);Ks=y,h.target.dispatchEvent(y),Ks=null}else return u=is(h),u!==null&&LC(u),l.blockedOn=h,!1;u.shift()}return!0}function VC(l,u,h){Og(l)&&h.delete(u)}function BN(){Vx=!1,cl!==null&&Og(cl)&&(cl=null),ul!==null&&Og(ul)&&(ul=null),dl!==null&&Og(dl)&&(dl=null),Eh.forEach(VC),Sh.forEach(VC)}function Mg(l,u){l.blockedOn===u&&(l.blockedOn=null,Vx||(Vx=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,BN)))}var Pg=null;function UC(l){Pg!==l&&(Pg=l,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Pg===l&&(Pg=null);for(var u=0;u<l.length;u+=3){var h=l[u],y=l[u+1],_=l[u+2];if(typeof y!="function"){if(jx(y||h)===null)continue;break}var C=is(h);C!==null&&(l.splice(u,3),u-=3,jv(C,{pending:!0,data:_,method:h.method,action:y},y,_))}}))}function Th(l){function u(Q){return Mg(Q,l)}cl!==null&&Mg(cl,l),ul!==null&&Mg(ul,l),dl!==null&&Mg(dl,l),Eh.forEach(u),Sh.forEach(u);for(var h=0;h<fl.length;h++){var y=fl[h];y.blockedOn===l&&(y.blockedOn=null)}for(;0<fl.length&&(h=fl[0],h.blockedOn===null);)jC(h),h.blockedOn===null&&fl.shift();if(h=(l.ownerDocument||l).$$reactFormReplay,h!=null)for(y=0;y<h.length;y+=3){var _=h[y],C=h[y+1],U=_[ur]||null;if(typeof C=="function")U||UC(h);else if(U){var z=null;if(C&&C.hasAttribute("formAction")){if(_=C,U=C[ur]||null)z=U.formAction;else if(jx(_)!==null)continue}else z=U.action;typeof z=="function"?h[y+1]=z:(h.splice(y,3),y-=3),UC(h)}}}function Ux(l){this._internalRoot=l}kg.prototype.render=Ux.prototype.render=function(l){var u=this._internalRoot;if(u===null)throw Error(r(409));var h=u.current,y=ta();kC(h,y,l,u,null,null)},kg.prototype.unmount=Ux.prototype.unmount=function(){var l=this._internalRoot;if(l!==null){this._internalRoot=null;var u=l.containerInfo;kC(l.current,2,null,l,null,null),gg(),u[da]=null}};function kg(l){this._internalRoot=l}kg.prototype.unstable_scheduleHydration=function(l){if(l){var u=cr();l={blockedOn:null,target:l,priority:u};for(var h=0;h<fl.length&&u!==0&&u<fl[h].priority;h++);fl.splice(h,0,l),h===0&&jC(l)}};var HC=e.version;if(HC!=="19.1.0")throw Error(r(527,HC,"19.1.0"));W.findDOMNode=function(l){var u=l._reactInternals;if(u===void 0)throw typeof l.render=="function"?Error(r(188)):(l=Object.keys(l).join(","),Error(r(268,l)));return l=c(u),l=l!==null?d(l):null,l=l===null?null:l.stateNode,l};var FN={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:G,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ng=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ng.isDisabled&&Ng.supportsFiber)try{rt=Ng.inject(FN),at=Ng}catch{}}return Dh.createRoot=function(l,u){if(!i(l))throw Error(r(299));var h=!1,y="",_=iS,C=aS,U=sS,z=null;return u!=null&&(u.unstable_strictMode===!0&&(h=!0),u.identifierPrefix!==void 0&&(y=u.identifierPrefix),u.onUncaughtError!==void 0&&(_=u.onUncaughtError),u.onCaughtError!==void 0&&(C=u.onCaughtError),u.onRecoverableError!==void 0&&(U=u.onRecoverableError),u.unstable_transitionCallbacks!==void 0&&(z=u.unstable_transitionCallbacks)),u=MC(l,1,!1,null,null,h,y,_,C,U,z,null),l[da]=u.current,Ax(l),new Ux(u)},Dh.hydrateRoot=function(l,u,h){if(!i(l))throw Error(r(299));var y=!1,_="",C=iS,U=aS,z=sS,Q=null,le=null;return h!=null&&(h.unstable_strictMode===!0&&(y=!0),h.identifierPrefix!==void 0&&(_=h.identifierPrefix),h.onUncaughtError!==void 0&&(C=h.onUncaughtError),h.onCaughtError!==void 0&&(U=h.onCaughtError),h.onRecoverableError!==void 0&&(z=h.onRecoverableError),h.unstable_transitionCallbacks!==void 0&&(Q=h.unstable_transitionCallbacks),h.formState!==void 0&&(le=h.formState)),u=MC(l,1,!0,u,h??null,y,_,C,U,z,Q,le),u.context=PC(null),h=u.current,y=ta(),y=Gs(y),_=Xo(y),_.callback=null,Ko(h,_,y),h=y,u.current.lanes=h,lr(u,h),vs(u),l[da]=u.current,Ax(l),new kg(u)},Dh.version="19.1.0",Dh}var QC;function F5(){if(QC)return zx.exports;QC=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),zx.exports=B5(),zx.exports}var j5=F5();const V5=()=>{};var ZC={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IR=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},U5=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const a=t[n++];e[r++]=String.fromCharCode((i&31)<<6|a&63)}else if(i>239&&i<365){const a=t[n++],s=t[n++],o=t[n++],c=((i&7)<<18|(a&63)<<12|(s&63)<<6|o&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const a=t[n++],s=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(a&63)<<6|s&63)}}return e.join("")},DR={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const a=t[i],s=i+1<t.length,o=s?t[i+1]:0,c=i+2<t.length,d=c?t[i+2]:0,f=a>>2,p=(a&3)<<4|o>>4;let g=(o&15)<<2|d>>6,m=d&63;c||(m=64,s||(g=64)),r.push(n[f],n[p],n[g],n[m])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(IR(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):U5(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const a=n[t.charAt(i++)],o=i<t.length?n[t.charAt(i)]:0;++i;const d=i<t.length?n[t.charAt(i)]:64;++i;const p=i<t.length?n[t.charAt(i)]:64;if(++i,a==null||o==null||d==null||p==null)throw new H5;const g=a<<2|o>>4;if(r.push(g),d!==64){const m=o<<4&240|d>>2;if(r.push(m),p!==64){const x=d<<6&192|p;r.push(x)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class H5 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const z5=function(t){const e=IR(t);return DR.encodeByteArray(e,!0)},Dm=function(t){return z5(t).replace(/\./g,"")},RR=function(t){try{return DR.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $5(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G5=()=>$5().__FIREBASE_DEFAULTS__,W5=()=>{if(typeof process>"u"||typeof ZC>"u")return;const t=ZC.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},Y5=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&RR(t[1]);return e&&JSON.parse(e)},j1=()=>{try{return V5()||G5()||W5()||Y5()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},OR=t=>{var e,n;return(n=(e=j1())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},q5=t=>{const e=OR(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},MR=()=>{var t;return(t=j1())===null||t===void 0?void 0:t.config},PR=t=>{var e;return(e=j1())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X5{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function df(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function kR(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K5(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,a=t.sub||t.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Dm(JSON.stringify(n)),Dm(JSON.stringify(s)),""].join(".")}const a0={};function Q5(){const t={prod:[],emulator:[]};for(const e of Object.keys(a0))a0[e]?t.emulator.push(e):t.prod.push(e);return t}function Z5(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let JC=!1;function NR(t,e){if(typeof window>"u"||typeof document>"u"||!df(window.location.host)||a0[t]===e||a0[t]||JC)return;a0[t]=e;function n(g){return`__firebase__banner__${g}`}const r="__firebase__banner",a=Q5().prod.length>0;function s(){const g=document.getElementById(r);g&&g.remove()}function o(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function c(g,m){g.setAttribute("width","24"),g.setAttribute("id",m),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function d(){const g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{JC=!0,s()},g}function f(g,m){g.setAttribute("id",m),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function p(){const g=Z5(r),m=n("text"),x=document.getElementById(m)||document.createElement("span"),b=n("learnmore"),A=document.getElementById(b)||document.createElement("a"),E=n("preprendIcon"),S=document.getElementById(E)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){const T=g.element;o(T),f(A,b);const I=d();c(S,E),T.append(S,x,A,I),document.body.appendChild(T)}a?(x.innerText="Preview backend disconnected.",S.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(S.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,x.innerText="Preview backend running in this workspace."),x.setAttribute("id",m)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _i(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function J5(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(_i())}function e9(){var t;const e=(t=j1())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function t9(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function n9(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function r9(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function i9(){const t=_i();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function a9(){return!e9()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function s9(){try{return typeof indexedDB=="object"}catch{return!1}}function o9(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var a;e(((a=i.error)===null||a===void 0?void 0:a.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l9="FirebaseError";class Lo extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=l9,Object.setPrototypeOf(this,Lo.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,j0.prototype.create)}}class j0{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,a=this.errors[e],s=a?c9(a,r):"Error",o=`${this.serviceName}: ${s} (${i}).`;return new Lo(i,o,r)}}function c9(t,e){return t.replace(u9,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const u9=/\{\$([^}]+)}/g;function d9(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Qc(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const a=t[i],s=e[i];if(eT(a)&&eT(s)){if(!Qc(a,s))return!1}else if(a!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function eT(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V0(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function $h(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,a]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(a)}}),e}function Gh(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function f9(t,e){const n=new h9(t,e);return n.subscribe.bind(n)}class h9{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");p9(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Wx),i.error===void 0&&(i.error=Wx),i.complete===void 0&&(i.complete=Wx);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function p9(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Wx(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qn(t){return t&&t._delegate?t._delegate:t}class Zc{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nc="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g9{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new X5;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(a){if(i)return null;throw a}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(y9(e))try{this.getOrInitializeService({instanceIdentifier:Nc})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const a=this.getOrInitializeService({instanceIdentifier:i});r.resolve(a)}catch{}}}}clearInstance(e=Nc){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Nc){return this.instances.has(e)}getOptions(e=Nc){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[a,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(a);r===o&&s.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),a=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;a.add(e),this.onInitCallbacks.set(i,a);const s=this.instances.get(i);return s&&e(s,i),()=>{a.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:m9(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Nc){return this.component?this.component.multipleInstances?e:Nc:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function m9(t){return t===Nc?void 0:t}function y9(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v9{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new g9(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Pt;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Pt||(Pt={}));const x9={debug:Pt.DEBUG,verbose:Pt.VERBOSE,info:Pt.INFO,warn:Pt.WARN,error:Pt.ERROR,silent:Pt.SILENT},w9=Pt.INFO,b9={[Pt.DEBUG]:"log",[Pt.VERBOSE]:"log",[Pt.INFO]:"info",[Pt.WARN]:"warn",[Pt.ERROR]:"error"},_9=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=b9[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class lb{constructor(e){this.name=e,this._logLevel=w9,this._logHandler=_9,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Pt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?x9[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Pt.DEBUG,...e),this._logHandler(this,Pt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Pt.VERBOSE,...e),this._logHandler(this,Pt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Pt.INFO,...e),this._logHandler(this,Pt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Pt.WARN,...e),this._logHandler(this,Pt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Pt.ERROR,...e),this._logHandler(this,Pt.ERROR,...e)}}const A9=(t,e)=>e.some(n=>t instanceof n);let tT,nT;function E9(){return tT||(tT=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function S9(){return nT||(nT=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const LR=new WeakMap,G2=new WeakMap,BR=new WeakMap,Yx=new WeakMap,cb=new WeakMap;function C9(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",a),t.removeEventListener("error",s)},a=()=>{n(Rl(t.result)),i()},s=()=>{r(t.error),i()};t.addEventListener("success",a),t.addEventListener("error",s)});return e.then(n=>{n instanceof IDBCursor&&LR.set(n,t)}).catch(()=>{}),cb.set(e,t),e}function T9(t){if(G2.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",s),t.removeEventListener("abort",s)},a=()=>{n(),i()},s=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",a),t.addEventListener("error",s),t.addEventListener("abort",s)});G2.set(t,e)}let W2={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return G2.get(t);if(e==="objectStoreNames")return t.objectStoreNames||BR.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Rl(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function I9(t){W2=t(W2)}function D9(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(qx(this),e,...n);return BR.set(r,e.sort?e.sort():[e]),Rl(r)}:S9().includes(t)?function(...e){return t.apply(qx(this),e),Rl(LR.get(this))}:function(...e){return Rl(t.apply(qx(this),e))}}function R9(t){return typeof t=="function"?D9(t):(t instanceof IDBTransaction&&T9(t),A9(t,E9())?new Proxy(t,W2):t)}function Rl(t){if(t instanceof IDBRequest)return C9(t);if(Yx.has(t))return Yx.get(t);const e=R9(t);return e!==t&&(Yx.set(t,e),cb.set(e,t)),e}const qx=t=>cb.get(t);function O9(t,e,{blocked:n,upgrade:r,blocking:i,terminated:a}={}){const s=indexedDB.open(t,e),o=Rl(s);return r&&s.addEventListener("upgradeneeded",c=>{r(Rl(s.result),c.oldVersion,c.newVersion,Rl(s.transaction),c)}),n&&s.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),o.then(c=>{a&&c.addEventListener("close",()=>a()),i&&c.addEventListener("versionchange",d=>i(d.oldVersion,d.newVersion,d))}).catch(()=>{}),o}const M9=["get","getKey","getAll","getAllKeys","count"],P9=["put","add","delete","clear"],Xx=new Map;function rT(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Xx.get(e))return Xx.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=P9.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||M9.includes(n)))return;const a=async function(s,...o){const c=this.transaction(s,i?"readwrite":"readonly");let d=c.store;return r&&(d=d.index(o.shift())),(await Promise.all([d[n](...o),i&&c.done]))[0]};return Xx.set(e,a),a}I9(t=>({...t,get:(e,n,r)=>rT(e,n)||t.get(e,n,r),has:(e,n)=>!!rT(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k9{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(N9(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function N9(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Y2="@firebase/app",iT="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Co=new lb("@firebase/app"),L9="@firebase/app-compat",B9="@firebase/analytics-compat",F9="@firebase/analytics",j9="@firebase/app-check-compat",V9="@firebase/app-check",U9="@firebase/auth",H9="@firebase/auth-compat",z9="@firebase/database",$9="@firebase/data-connect",G9="@firebase/database-compat",W9="@firebase/functions",Y9="@firebase/functions-compat",q9="@firebase/installations",X9="@firebase/installations-compat",K9="@firebase/messaging",Q9="@firebase/messaging-compat",Z9="@firebase/performance",J9="@firebase/performance-compat",eL="@firebase/remote-config",tL="@firebase/remote-config-compat",nL="@firebase/storage",rL="@firebase/storage-compat",iL="@firebase/firestore",aL="@firebase/ai",sL="@firebase/firestore-compat",oL="firebase",lL="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q2="[DEFAULT]",cL={[Y2]:"fire-core",[L9]:"fire-core-compat",[F9]:"fire-analytics",[B9]:"fire-analytics-compat",[V9]:"fire-app-check",[j9]:"fire-app-check-compat",[U9]:"fire-auth",[H9]:"fire-auth-compat",[z9]:"fire-rtdb",[$9]:"fire-data-connect",[G9]:"fire-rtdb-compat",[W9]:"fire-fn",[Y9]:"fire-fn-compat",[q9]:"fire-iid",[X9]:"fire-iid-compat",[K9]:"fire-fcm",[Q9]:"fire-fcm-compat",[Z9]:"fire-perf",[J9]:"fire-perf-compat",[eL]:"fire-rc",[tL]:"fire-rc-compat",[nL]:"fire-gcs",[rL]:"fire-gcs-compat",[iL]:"fire-fst",[sL]:"fire-fst-compat",[aL]:"fire-vertex","fire-js":"fire-js",[oL]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rm=new Map,uL=new Map,X2=new Map;function aT(t,e){try{t.container.addComponent(e)}catch(n){Co.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Gd(t){const e=t.name;if(X2.has(e))return Co.debug(`There were multiple attempts to register component ${e}.`),!1;X2.set(e,t);for(const n of Rm.values())aT(n,t);for(const n of uL.values())aT(n,t);return!0}function ub(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Ca(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dL={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ol=new j0("app","Firebase",dL);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fL{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Zc("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ol.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ff=lL;function FR(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:q2,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw Ol.create("bad-app-name",{appName:String(i)});if(n||(n=MR()),!n)throw Ol.create("no-options");const a=Rm.get(i);if(a){if(Qc(n,a.options)&&Qc(r,a.config))return a;throw Ol.create("duplicate-app",{appName:i})}const s=new v9(i);for(const c of X2.values())s.addComponent(c);const o=new fL(n,r,s);return Rm.set(i,o),o}function jR(t=q2){const e=Rm.get(t);if(!e&&t===q2&&MR())return FR();if(!e)throw Ol.create("no-app",{appName:t});return e}function Ml(t,e,n){var r;let i=(r=cL[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const a=i.match(/\s|\//),s=e.match(/\s|\//);if(a||s){const o=[`Unable to register library "${i}" with version "${e}":`];a&&o.push(`library name "${i}" contains illegal characters (whitespace or "/")`),a&&s&&o.push("and"),s&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Co.warn(o.join(" "));return}Gd(new Zc(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hL="firebase-heartbeat-database",pL=1,g0="firebase-heartbeat-store";let Kx=null;function VR(){return Kx||(Kx=O9(hL,pL,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(g0)}catch(n){console.warn(n)}}}}).catch(t=>{throw Ol.create("idb-open",{originalErrorMessage:t.message})})),Kx}async function gL(t){try{const n=(await VR()).transaction(g0),r=await n.objectStore(g0).get(UR(t));return await n.done,r}catch(e){if(e instanceof Lo)Co.warn(e.message);else{const n=Ol.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Co.warn(n.message)}}}async function sT(t,e){try{const r=(await VR()).transaction(g0,"readwrite");await r.objectStore(g0).put(e,UR(t)),await r.done}catch(n){if(n instanceof Lo)Co.warn(n.message);else{const r=Ol.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Co.warn(r.message)}}}function UR(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mL=1024,yL=30;class vL{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new wL(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=oT();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(s=>s.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:i}),this._heartbeatsCache.heartbeats.length>yL){const s=bL(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Co.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=oT(),{heartbeatsToSend:r,unsentEntries:i}=xL(this._heartbeatsCache.heartbeats),a=Dm(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(n){return Co.warn(n),""}}}function oT(){return new Date().toISOString().substring(0,10)}function xL(t,e=mL){const n=[];let r=t.slice();for(const i of t){const a=n.find(s=>s.agent===i.agent);if(a){if(a.dates.push(i.date),lT(n)>e){a.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),lT(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class wL{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return s9()?o9().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await gL(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return sT(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return sT(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function lT(t){return Dm(JSON.stringify({version:2,heartbeats:t})).length}function bL(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _L(t){Gd(new Zc("platform-logger",e=>new k9(e),"PRIVATE")),Gd(new Zc("heartbeat",e=>new vL(e),"PRIVATE")),Ml(Y2,iT,t),Ml(Y2,iT,"esm2017"),Ml("fire-js","")}_L("");function db(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function HR(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const AL=HR,zR=new j0("auth","Firebase",HR());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Om=new lb("@firebase/auth");function EL(t,...e){Om.logLevel<=Pt.WARN&&Om.warn(`Auth (${ff}): ${t}`,...e)}function fm(t,...e){Om.logLevel<=Pt.ERROR&&Om.error(`Auth (${ff}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Za(t,...e){throw fb(t,...e)}function Rs(t,...e){return fb(t,...e)}function $R(t,e,n){const r=Object.assign(Object.assign({},AL()),{[e]:n});return new j0("auth","Firebase",r).create(e,{appName:t.name})}function Eo(t){return $R(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function fb(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return zR.create(t,...e)}function ut(t,e,...n){if(!t)throw fb(e,...n)}function yo(t){const e="INTERNAL ASSERTION FAILED: "+t;throw fm(e),new Error(e)}function To(t,e){t||yo(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K2(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function SL(){return cT()==="http:"||cT()==="https:"}function cT(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CL(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(SL()||n9()||"connection"in navigator)?navigator.onLine:!0}function TL(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U0{constructor(e,n){this.shortDelay=e,this.longDelay=n,To(n>e,"Short delay should be less than long delay!"),this.isMobile=J5()||r9()}get(){return CL()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hb(t,e){To(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GR{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;yo("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;yo("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;yo("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IL={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DL=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],RL=new U0(3e4,6e4);function Wl(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Yl(t,e,n,r,i={}){return WR(t,i,async()=>{let a={},s={};r&&(e==="GET"?s=r:a={body:JSON.stringify(r)});const o=V0(Object.assign({key:t.config.apiKey},s)).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const d=Object.assign({method:e,headers:c},a);return t9()||(d.referrerPolicy="no-referrer"),t.emulatorConfig&&df(t.emulatorConfig.host)&&(d.credentials="include"),GR.fetch()(await YR(t,t.config.apiHost,n,o),d)})}async function WR(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},IL),e);try{const i=new ML(t),a=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const s=await a.json();if("needConfirmation"in s)throw Bg(t,"account-exists-with-different-credential",s);if(a.ok&&!("errorMessage"in s))return s;{const o=a.ok?s.errorMessage:s.error.message,[c,d]=o.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Bg(t,"credential-already-in-use",s);if(c==="EMAIL_EXISTS")throw Bg(t,"email-already-in-use",s);if(c==="USER_DISABLED")throw Bg(t,"user-disabled",s);const f=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw $R(t,f,d);Za(t,f)}}catch(i){if(i instanceof Lo)throw i;Za(t,"network-request-failed",{message:String(i)})}}async function H0(t,e,n,r,i={}){const a=await Yl(t,e,n,r,i);return"mfaPendingCredential"in a&&Za(t,"multi-factor-auth-required",{_serverResponse:a}),a}async function YR(t,e,n,r){const i=`${e}${n}?${r}`,a=t,s=a.config.emulator?hb(t.config,i):`${t.config.apiScheme}://${i}`;return DL.includes(n)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(s).toString():s}function OL(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class ML{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Rs(this.auth,"network-request-failed")),RL.get())})}}function Bg(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Rs(t,e,r);return i.customData._tokenResponse=n,i}function uT(t){return t!==void 0&&t.enterprise!==void 0}class PL{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return OL(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function kL(t,e){return Yl(t,"GET","/v2/recaptchaConfig",Wl(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NL(t,e){return Yl(t,"POST","/v1/accounts:delete",e)}async function Mm(t,e){return Yl(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s0(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function LL(t,e=!1){const n=Qn(t),r=await n.getIdToken(e),i=pb(r);ut(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const a=typeof i.firebase=="object"?i.firebase:void 0,s=a==null?void 0:a.sign_in_provider;return{claims:i,token:r,authTime:s0(Qx(i.auth_time)),issuedAtTime:s0(Qx(i.iat)),expirationTime:s0(Qx(i.exp)),signInProvider:s||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function Qx(t){return Number(t)*1e3}function pb(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return fm("JWT malformed, contained fewer than 3 sections"),null;try{const i=RR(n);return i?JSON.parse(i):(fm("Failed to decode base64 JWT payload"),null)}catch(i){return fm("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function dT(t){const e=pb(t);return ut(e,"internal-error"),ut(typeof e.exp<"u","internal-error"),ut(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function m0(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Lo&&BL(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function BL({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FL{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q2{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=s0(this.lastLoginAt),this.creationTime=s0(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Pm(t){var e;const n=t.auth,r=await t.getIdToken(),i=await m0(t,Mm(n,{idToken:r}));ut(i==null?void 0:i.users.length,n,"internal-error");const a=i.users[0];t._notifyReloadListener(a);const s=!((e=a.providerUserInfo)===null||e===void 0)&&e.length?qR(a.providerUserInfo):[],o=VL(t.providerData,s),c=t.isAnonymous,d=!(t.email&&a.passwordHash)&&!(o!=null&&o.length),f=c?d:!1,p={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:o,metadata:new Q2(a.createdAt,a.lastLoginAt),isAnonymous:f};Object.assign(t,p)}async function jL(t){const e=Qn(t);await Pm(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function VL(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function qR(t){return t.map(e=>{var{providerId:n}=e,r=db(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UL(t,e){const n=await WR(t,{},async()=>{const r=V0({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:a}=t.config,s=await YR(t,i,"/v1/token",`key=${a}`),o=await t._getAdditionalHeaders();o["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:o,body:r};return t.emulatorConfig&&df(t.emulatorConfig.host)&&(c.credentials="include"),GR.fetch()(s,c)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function HL(t,e){return Yl(t,"POST","/v2/accounts:revokeToken",Wl(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pd{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ut(e.idToken,"internal-error"),ut(typeof e.idToken<"u","internal-error"),ut(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):dT(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ut(e.length!==0,"internal-error");const n=dT(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ut(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:a}=await UL(e,n);this.updateTokensAndExpiration(r,i,Number(a))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:a}=n,s=new Pd;return r&&(ut(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(ut(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),a&&(ut(typeof a=="number","internal-error",{appName:e}),s.expirationTime=a),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Pd,this.toJSON())}_performRefresh(){return yo("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pl(t,e){ut(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Ka{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,a=db(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new FL(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new Q2(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const n=await m0(this,this.stsTokenManager.getToken(this.auth,e));return ut(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return LL(this,e)}reload(){return jL(this)}_assign(e){this!==e&&(ut(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Ka(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){ut(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Pm(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ca(this.auth.app))return Promise.reject(Eo(this.auth));const e=await this.getIdToken();return await m0(this,NL(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,a,s,o,c,d,f;const p=(r=n.displayName)!==null&&r!==void 0?r:void 0,g=(i=n.email)!==null&&i!==void 0?i:void 0,m=(a=n.phoneNumber)!==null&&a!==void 0?a:void 0,x=(s=n.photoURL)!==null&&s!==void 0?s:void 0,b=(o=n.tenantId)!==null&&o!==void 0?o:void 0,A=(c=n._redirectEventId)!==null&&c!==void 0?c:void 0,E=(d=n.createdAt)!==null&&d!==void 0?d:void 0,S=(f=n.lastLoginAt)!==null&&f!==void 0?f:void 0,{uid:T,emailVerified:I,isAnonymous:P,providerData:F,stsTokenManager:M}=n;ut(T&&M,e,"internal-error");const D=Pd.fromJSON(this.name,M);ut(typeof T=="string",e,"internal-error"),pl(p,e.name),pl(g,e.name),ut(typeof I=="boolean",e,"internal-error"),ut(typeof P=="boolean",e,"internal-error"),pl(m,e.name),pl(x,e.name),pl(b,e.name),pl(A,e.name),pl(E,e.name),pl(S,e.name);const R=new Ka({uid:T,auth:e,email:g,emailVerified:I,displayName:p,isAnonymous:P,photoURL:x,phoneNumber:m,tenantId:b,stsTokenManager:D,createdAt:E,lastLoginAt:S});return F&&Array.isArray(F)&&(R.providerData=F.map(B=>Object.assign({},B))),A&&(R._redirectEventId=A),R}static async _fromIdTokenResponse(e,n,r=!1){const i=new Pd;i.updateFromServerResponse(n);const a=new Ka({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Pm(a),a}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];ut(i.localId!==void 0,"internal-error");const a=i.providerUserInfo!==void 0?qR(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!(a!=null&&a.length),o=new Pd;o.updateFromIdToken(r);const c=new Ka({uid:i.localId,auth:e,stsTokenManager:o,isAnonymous:s}),d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new Q2(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(a!=null&&a.length)};return Object.assign(c,d),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fT=new Map;function vo(t){To(t instanceof Function,"Expected a class definition");let e=fT.get(t);return e?(To(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,fT.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XR{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}XR.type="NONE";const hT=XR;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hm(t,e,n){return`firebase:${t}:${e}:${n}`}class kd{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:a}=this.auth;this.fullUserKey=hm(this.userKey,i.apiKey,a),this.fullPersistenceKey=hm("persistence",i.apiKey,a),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Mm(this.auth,{idToken:e}).catch(()=>{});return n?Ka._fromGetAccountInfoResponse(this.auth,n,e):null}return Ka._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new kd(vo(hT),e,r);const i=(await Promise.all(n.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let a=i[0]||vo(hT);const s=hm(r,e.config.apiKey,e.name);let o=null;for(const d of n)try{const f=await d._get(s);if(f){let p;if(typeof f=="string"){const g=await Mm(e,{idToken:f}).catch(()=>{});if(!g)break;p=await Ka._fromGetAccountInfoResponse(e,g,f)}else p=Ka._fromJSON(e,f);d!==a&&(o=p),a=d;break}}catch{}const c=i.filter(d=>d._shouldAllowMigration);return!a._shouldAllowMigration||!c.length?new kd(a,e,r):(a=c[0],o&&await a._set(s,o.toJSON()),await Promise.all(n.map(async d=>{if(d!==a)try{await d._remove(s)}catch{}})),new kd(a,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pT(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(JR(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(KR(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(t4(e))return"Blackberry";if(n4(e))return"Webos";if(QR(e))return"Safari";if((e.includes("chrome/")||ZR(e))&&!e.includes("edge/"))return"Chrome";if(e4(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function KR(t=_i()){return/firefox\//i.test(t)}function QR(t=_i()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function ZR(t=_i()){return/crios\//i.test(t)}function JR(t=_i()){return/iemobile/i.test(t)}function e4(t=_i()){return/android/i.test(t)}function t4(t=_i()){return/blackberry/i.test(t)}function n4(t=_i()){return/webos/i.test(t)}function gb(t=_i()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function zL(t=_i()){var e;return gb(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function $L(){return i9()&&document.documentMode===10}function r4(t=_i()){return gb(t)||e4(t)||n4(t)||t4(t)||/windows phone/i.test(t)||JR(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i4(t,e=[]){let n;switch(t){case"Browser":n=pT(_i());break;case"Worker":n=`${pT(_i())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${ff}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GL{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=a=>new Promise((s,o)=>{try{const c=e(a);s(c)}catch(c){o(c)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WL(t,e={}){return Yl(t,"GET","/v2/passwordPolicy",Wl(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YL=6;class qL{constructor(e){var n,r,i,a;const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=s.minPasswordLength)!==null&&n!==void 0?n:YL,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(a=e.forceUpgradeOnSignin)!==null&&a!==void 0?a:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,a,s,o;const c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(n=c.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(i=c.containsLowercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(a=c.containsUppercaseLetter)!==null&&a!==void 0?a:!0),c.isValid&&(c.isValid=(s=c.containsNumericCharacter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(o=c.containsNonAlphanumericCharacter)!==null&&o!==void 0?o:!0),c}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XL{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new gT(this),this.idTokenSubscription=new gT(this),this.beforeStateQueue=new GL(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=zR,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=vo(n)),this._initializationPromise=this.queue(async()=>{var r,i,a;if(!this._deleted&&(this.persistenceManager=await kd.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((a=this.currentUser)===null||a===void 0?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Mm(this,{idToken:e}),r=await Ka._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Ca(this.app)){const s=this.app.settings.authIdToken;return s?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(o,o))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const s=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,o=i==null?void 0:i._redirectEventId,c=await this.tryRedirectSignIn(e);(!s||s===o)&&(c!=null&&c.user)&&(i=c.user,a=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(i)}catch(s){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return ut(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Pm(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=TL()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ca(this.app))return Promise.reject(Eo(this));const n=e?Qn(e):null;return n&&ut(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ut(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Ca(this.app)?Promise.reject(Eo(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ca(this.app)?Promise.reject(Eo(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(vo(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await WL(this),n=new qL(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new j0("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await HL(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&vo(e)||this._popupRedirectResolver;ut(n,this,"argument-error"),this.redirectPersistenceManager=await kd.create(this,[vo(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const a=typeof n=="function"?n:n.next.bind(n);let s=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(ut(o,this,"internal-error"),o.then(()=>{s||a(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,r,i);return()=>{s=!0,c()}}else{const c=e.addObserver(n);return()=>{s=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ut(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=i4(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;if(Ca(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&EL(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function su(t){return Qn(t)}class gT{constructor(e){this.auth=e,this.observer=null,this.addObserver=f9(n=>this.observer=n)}get next(){return ut(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let V1={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function KL(t){V1=t}function a4(t){return V1.loadJS(t)}function QL(){return V1.recaptchaEnterpriseScript}function ZL(){return V1.gapiScript}function JL(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class e7{constructor(){this.enterprise=new t7}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class t7{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const n7="recaptcha-enterprise",s4="NO_RECAPTCHA";class r7{constructor(e){this.type=n7,this.auth=su(e)}async verify(e="verify",n=!1){async function r(a){if(!n){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(s,o)=>{kL(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)o(new Error("recaptcha Enterprise site key undefined"));else{const d=new PL(c);return a.tenantId==null?a._agentRecaptchaConfig=d:a._tenantRecaptchaConfigs[a.tenantId]=d,s(d.siteKey)}}).catch(c=>{o(c)})})}function i(a,s,o){const c=window.grecaptcha;uT(c)?c.enterprise.ready(()=>{c.enterprise.execute(a,{action:e}).then(d=>{s(d)}).catch(()=>{s(s4)})}):o(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new e7().execute("siteKey",{action:"verify"}):new Promise((a,s)=>{r(this.auth).then(o=>{if(!n&&uT(window.grecaptcha))i(o,a,s);else{if(typeof window>"u"){s(new Error("RecaptchaVerifier is only supported in browser"));return}let c=QL();c.length!==0&&(c+=o),a4(c).then(()=>{i(o,a,s)}).catch(d=>{s(d)})}}).catch(o=>{s(o)})})}}async function mT(t,e,n,r=!1,i=!1){const a=new r7(t);let s;if(i)s=s4;else try{s=await a.verify(n)}catch{s=await a.verify(n,!0)}const o=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in o){const c=o.phoneEnrollmentInfo.phoneNumber,d=o.phoneEnrollmentInfo.recaptchaToken;Object.assign(o,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:d,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in o){const c=o.phoneSignInInfo.recaptchaToken;Object.assign(o,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return o}return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function Z2(t,e,n,r,i){var a;if(!((a=t._getRecaptchaConfig())===null||a===void 0)&&a.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await mT(t,e,n,n==="getOobCode");return r(t,s)}else return r(t,e).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await mT(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(s)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i7(t,e){const n=ub(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),a=n.getOptions();if(Qc(a,e??{}))return i;Za(i,"already-initialized")}return n.initialize({options:e})}function a7(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(vo);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function s7(t,e,n){const r=su(t);ut(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,a=o4(e),{host:s,port:o}=o7(e),c=o===null?"":`:${o}`,d={url:`${a}//${s}${c}/`},f=Object.freeze({host:s,port:o,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){ut(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),ut(Qc(d,r.config.emulator)&&Qc(f,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=d,r.emulatorConfig=f,r.settings.appVerificationDisabledForTesting=!0,df(s)?(kR(`${a}//${s}${c}`),NR("Auth",!0)):l7()}function o4(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function o7(t){const e=o4(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const a=i[1];return{host:a,port:yT(r.substr(a.length+1))}}else{const[a,s]=r.split(":");return{host:a,port:yT(s)}}}function yT(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function l7(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mb{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return yo("not implemented")}_getIdTokenResponse(e){return yo("not implemented")}_linkToIdToken(e,n){return yo("not implemented")}_getReauthenticationResolver(e){return yo("not implemented")}}async function c7(t,e){return Yl(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function u7(t,e){return H0(t,"POST","/v1/accounts:signInWithPassword",Wl(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function d7(t,e){return H0(t,"POST","/v1/accounts:signInWithEmailLink",Wl(t,e))}async function f7(t,e){return H0(t,"POST","/v1/accounts:signInWithEmailLink",Wl(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y0 extends mb{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new y0(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new y0(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Z2(e,n,"signInWithPassword",u7);case"emailLink":return d7(e,{email:this._email,oobCode:this._password});default:Za(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Z2(e,r,"signUpPassword",c7);case"emailLink":return f7(e,{idToken:n,email:this._email,oobCode:this._password});default:Za(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Nd(t,e){return H0(t,"POST","/v1/accounts:signInWithIdp",Wl(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h7="http://localhost";class Jc extends mb{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Jc(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Za("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,a=db(n,["providerId","signInMethod"]);if(!r||!i)return null;const s=new Jc(r,i);return s.idToken=a.idToken||void 0,s.accessToken=a.accessToken||void 0,s.secret=a.secret,s.nonce=a.nonce,s.pendingToken=a.pendingToken||null,s}_getIdTokenResponse(e){const n=this.buildRequest();return Nd(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Nd(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Nd(e,n)}buildRequest(){const e={requestUri:h7,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=V0(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p7(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function g7(t){const e=$h(Gh(t)).link,n=e?$h(Gh(e)).deep_link_id:null,r=$h(Gh(t)).deep_link_id;return(r?$h(Gh(r)).link:null)||r||n||e||t}class yb{constructor(e){var n,r,i,a,s,o;const c=$h(Gh(e)),d=(n=c.apiKey)!==null&&n!==void 0?n:null,f=(r=c.oobCode)!==null&&r!==void 0?r:null,p=p7((i=c.mode)!==null&&i!==void 0?i:null);ut(d&&f&&p,"argument-error"),this.apiKey=d,this.operation=p,this.code=f,this.continueUrl=(a=c.continueUrl)!==null&&a!==void 0?a:null,this.languageCode=(s=c.lang)!==null&&s!==void 0?s:null,this.tenantId=(o=c.tenantId)!==null&&o!==void 0?o:null}static parseLink(e){const n=g7(e);try{return new yb(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hf{constructor(){this.providerId=hf.PROVIDER_ID}static credential(e,n){return y0._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=yb.parseLink(n);return ut(r,"argument-error"),y0._fromEmailAndCode(e,r.code,r.tenantId)}}hf.PROVIDER_ID="password";hf.EMAIL_PASSWORD_SIGN_IN_METHOD="password";hf.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l4{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z0 extends l4{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Al extends z0{constructor(){super("facebook.com")}static credential(e){return Jc._fromParams({providerId:Al.PROVIDER_ID,signInMethod:Al.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Al.credentialFromTaggedObject(e)}static credentialFromError(e){return Al.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Al.credential(e.oauthAccessToken)}catch{return null}}}Al.FACEBOOK_SIGN_IN_METHOD="facebook.com";Al.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class El extends z0{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Jc._fromParams({providerId:El.PROVIDER_ID,signInMethod:El.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return El.credentialFromTaggedObject(e)}static credentialFromError(e){return El.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return El.credential(n,r)}catch{return null}}}El.GOOGLE_SIGN_IN_METHOD="google.com";El.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sl extends z0{constructor(){super("github.com")}static credential(e){return Jc._fromParams({providerId:Sl.PROVIDER_ID,signInMethod:Sl.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Sl.credentialFromTaggedObject(e)}static credentialFromError(e){return Sl.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Sl.credential(e.oauthAccessToken)}catch{return null}}}Sl.GITHUB_SIGN_IN_METHOD="github.com";Sl.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cl extends z0{constructor(){super("twitter.com")}static credential(e,n){return Jc._fromParams({providerId:Cl.PROVIDER_ID,signInMethod:Cl.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Cl.credentialFromTaggedObject(e)}static credentialFromError(e){return Cl.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Cl.credential(n,r)}catch{return null}}}Cl.TWITTER_SIGN_IN_METHOD="twitter.com";Cl.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function m7(t,e){return H0(t,"POST","/v1/accounts:signUp",Wl(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eu{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const a=await Ka._fromIdTokenResponse(e,r,i),s=vT(r);return new eu({user:a,providerId:s,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=vT(r);return new eu({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function vT(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class km extends Lo{constructor(e,n,r,i){var a;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,km.prototype),this.customData={appName:e.name,tenantId:(a=e.tenantId)!==null&&a!==void 0?a:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new km(e,n,r,i)}}function c4(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?km._fromErrorAndOperation(t,a,e,r):a})}async function y7(t,e,n=!1){const r=await m0(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return eu._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function v7(t,e,n=!1){const{auth:r}=t;if(Ca(r.app))return Promise.reject(Eo(r));const i="reauthenticate";try{const a=await m0(t,c4(r,i,e,t),n);ut(a.idToken,r,"internal-error");const s=pb(a.idToken);ut(s,r,"internal-error");const{sub:o}=s;return ut(t.uid===o,r,"user-mismatch"),eu._forOperation(t,i,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&Za(r,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function u4(t,e,n=!1){if(Ca(t.app))return Promise.reject(Eo(t));const r="signIn",i=await c4(t,r,e),a=await eu._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(a.user),a}async function x7(t,e){return u4(su(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function d4(t){const e=su(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function w7(t,e,n){if(Ca(t.app))return Promise.reject(Eo(t));const r=su(t),s=await Z2(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",m7).catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&d4(t),c}),o=await eu._fromIdTokenResponse(r,"signIn",s);return await r._updateCurrentUser(o.user),o}function b7(t,e,n){return Ca(t.app)?Promise.reject(Eo(t)):x7(Qn(t),hf.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&d4(t),r})}function _7(t,e,n,r){return Qn(t).onIdTokenChanged(e,n,r)}function A7(t,e,n){return Qn(t).beforeAuthStateChanged(e,n)}function E7(t,e,n,r){return Qn(t).onAuthStateChanged(e,n,r)}function S7(t){return Qn(t).signOut()}const Nm="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f4{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Nm,"1"),this.storage.removeItem(Nm),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C7=1e3,T7=10;class h4 extends f4{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=r4(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((s,o,c)=>{this.notifyListeners(s,c)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const s=this.storage.getItem(r);!n&&this.localCache[r]===s||this.notifyListeners(r,s)},a=this.storage.getItem(r);$L()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,T7):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},C7)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}h4.type="LOCAL";const I7=h4;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p4 extends f4{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}p4.type="SESSION";const g4=p4;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D7(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U1{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new U1(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:a}=n.data,s=this.handlersMap[i];if(!(s!=null&&s.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const o=Array.from(s).map(async d=>d(n.origin,a)),c=await D7(o);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}U1.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vb(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R7{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let a,s;return new Promise((o,c)=>{const d=vb("",20);i.port1.start();const f=setTimeout(()=>{c(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(p){const g=p;if(g.data.eventId===d)switch(g.data.status){case"ack":clearTimeout(f),a=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),o(g.data.response);break;default:clearTimeout(f),clearTimeout(a),c(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:d,data:n},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Os(){return window}function O7(t){Os().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m4(){return typeof Os().WorkerGlobalScope<"u"&&typeof Os().importScripts=="function"}async function M7(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function P7(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function k7(){return m4()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y4="firebaseLocalStorageDb",N7=1,Lm="firebaseLocalStorage",v4="fbase_key";class $0{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function H1(t,e){return t.transaction([Lm],e?"readwrite":"readonly").objectStore(Lm)}function L7(){const t=indexedDB.deleteDatabase(y4);return new $0(t).toPromise()}function J2(){const t=indexedDB.open(y4,N7);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Lm,{keyPath:v4})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Lm)?e(r):(r.close(),await L7(),e(await J2()))})})}async function xT(t,e,n){const r=H1(t,!0).put({[v4]:e,value:n});return new $0(r).toPromise()}async function B7(t,e){const n=H1(t,!1).get(e),r=await new $0(n).toPromise();return r===void 0?null:r.value}function wT(t,e){const n=H1(t,!0).delete(e);return new $0(n).toPromise()}const F7=800,j7=3;class x4{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await J2(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>j7)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return m4()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=U1._getInstance(k7()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await M7(),!this.activeServiceWorker)return;this.sender=new R7(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||P7()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await J2();return await xT(e,Nm,"1"),await wT(e,Nm),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>xT(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>B7(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>wT(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const a=H1(i,!1).getAll();return new $0(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:a}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(a)&&(this.notifyListeners(i,a),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),F7)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}x4.type="LOCAL";const V7=x4;new U0(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U7(t,e){return e?vo(e):(ut(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xb extends mb{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Nd(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Nd(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Nd(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function H7(t){return u4(t.auth,new xb(t),t.bypassAuthState)}function z7(t){const{auth:e,user:n}=t;return ut(n,e,"internal-error"),v7(n,new xb(t),t.bypassAuthState)}async function $7(t){const{auth:e,user:n}=t;return ut(n,e,"internal-error"),y7(n,new xb(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w4{constructor(e,n,r,i,a=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:a,error:s,type:o}=e;if(s){this.reject(s);return}const c={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(c))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return H7;case"linkViaPopup":case"linkViaRedirect":return $7;case"reauthViaPopup":case"reauthViaRedirect":return z7;default:Za(this.auth,"internal-error")}}resolve(e){To(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){To(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G7=new U0(2e3,1e4);class _d extends w4{constructor(e,n,r,i,a){super(e,n,i,a),this.provider=r,this.authWindow=null,this.pollId=null,_d.currentPopupAction&&_d.currentPopupAction.cancel(),_d.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ut(e,this.auth,"internal-error"),e}async onExecution(){To(this.filter.length===1,"Popup operations only handle one event");const e=vb();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Rs(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Rs(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,_d.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Rs(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,G7.get())};e()}}_d.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W7="pendingRedirect",pm=new Map;class Y7 extends w4{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=pm.get(this.auth._key());if(!e){try{const r=await q7(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}pm.set(this.auth._key(),e)}return this.bypassAuthState||pm.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function q7(t,e){const n=Q7(e),r=K7(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function X7(t,e){pm.set(t._key(),e)}function K7(t){return vo(t._redirectPersistence)}function Q7(t){return hm(W7,t.config.apiKey,t.name)}async function Z7(t,e,n=!1){if(Ca(t.app))return Promise.reject(Eo(t));const r=su(t),i=U7(r,e),s=await new Y7(r,i,n).execute();return s&&!n&&(delete s.user._redirectEventId,await r._persistUserIfCurrent(s.user),await r._setRedirectUser(null,e)),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J7=600*1e3;class eB{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!tB(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!b4(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Rs(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=J7&&this.cachedEventUids.clear(),this.cachedEventUids.has(bT(e))}saveEventToCache(e){this.cachedEventUids.add(bT(e)),this.lastProcessedEventTime=Date.now()}}function bT(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function b4({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function tB(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return b4(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nB(t,e={}){return Yl(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rB=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,iB=/^https?/;async function aB(t){if(t.config.emulator)return;const{authorizedDomains:e}=await nB(t);for(const n of e)try{if(sB(n))return}catch{}Za(t,"unauthorized-domain")}function sB(t){const e=K2(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const s=new URL(t);return s.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&s.hostname===r}if(!iB.test(n))return!1;if(rB.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oB=new U0(3e4,6e4);function _T(){const t=Os().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function lB(t){return new Promise((e,n)=>{var r,i,a;function s(){_T(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{_T(),n(Rs(t,"network-request-failed"))},timeout:oB.get()})}if(!((i=(r=Os().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((a=Os().gapi)===null||a===void 0)&&a.load)s();else{const o=JL("iframefcb");return Os()[o]=()=>{gapi.load?s():n(Rs(t,"network-request-failed"))},a4(`${ZL()}?onload=${o}`).catch(c=>n(c))}}).catch(e=>{throw gm=null,e})}let gm=null;function cB(t){return gm=gm||lB(t),gm}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uB=new U0(5e3,15e3),dB="__/auth/iframe",fB="emulator/auth/iframe",hB={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},pB=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function gB(t){const e=t.config;ut(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?hb(e,fB):`https://${t.config.authDomain}/${dB}`,r={apiKey:e.apiKey,appName:t.name,v:ff},i=pB.get(t.config.apiHost);i&&(r.eid=i);const a=t._getFrameworks();return a.length&&(r.fw=a.join(",")),`${n}?${V0(r).slice(1)}`}async function mB(t){const e=await cB(t),n=Os().gapi;return ut(n,t,"internal-error"),e.open({where:document.body,url:gB(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:hB,dontclear:!0},r=>new Promise(async(i,a)=>{await r.restyle({setHideOnLeave:!1});const s=Rs(t,"network-request-failed"),o=Os().setTimeout(()=>{a(s)},uB.get());function c(){Os().clearTimeout(o),i(r)}r.ping(c).then(c,()=>{a(s)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yB={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},vB=500,xB=600,wB="_blank",bB="http://localhost";class AT{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function _B(t,e,n,r=vB,i=xB){const a=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString();let o="";const c=Object.assign(Object.assign({},yB),{width:r.toString(),height:i.toString(),top:a,left:s}),d=_i().toLowerCase();n&&(o=ZR(d)?wB:n),KR(d)&&(e=e||bB,c.scrollbars="yes");const f=Object.entries(c).reduce((g,[m,x])=>`${g}${m}=${x},`,"");if(zL(d)&&o!=="_self")return AB(e||"",o),new AT(null);const p=window.open(e||"",o,f);ut(p,t,"popup-blocked");try{p.focus()}catch{}return new AT(p)}function AB(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EB="__/auth/handler",SB="emulator/auth/handler",CB=encodeURIComponent("fac");async function ET(t,e,n,r,i,a){ut(t.config.authDomain,t,"auth-domain-config-required"),ut(t.config.apiKey,t,"invalid-api-key");const s={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:ff,eventId:i};if(e instanceof l4){e.setDefaultLanguage(t.languageCode),s.providerId=e.providerId||"",d9(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(const[f,p]of Object.entries({}))s[f]=p}if(e instanceof z0){const f=e.getScopes().filter(p=>p!=="");f.length>0&&(s.scopes=f.join(","))}t.tenantId&&(s.tid=t.tenantId);const o=s;for(const f of Object.keys(o))o[f]===void 0&&delete o[f];const c=await t._getAppCheckToken(),d=c?`#${CB}=${encodeURIComponent(c)}`:"";return`${TB(t)}?${V0(o).slice(1)}${d}`}function TB({config:t}){return t.emulator?hb(t,SB):`https://${t.authDomain}/${EB}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zx="webStorageSupport";class IB{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=g4,this._completeRedirectFn=Z7,this._overrideRedirectResult=X7}async _openPopup(e,n,r,i){var a;To((a=this.eventManagers[e._key()])===null||a===void 0?void 0:a.manager,"_initialize() not called before _openPopup()");const s=await ET(e,n,r,K2(),i);return _B(e,s,vb())}async _openRedirect(e,n,r,i){await this._originValidation(e);const a=await ET(e,n,r,K2(),i);return O7(a),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:a}=this.eventManagers[n];return i?Promise.resolve(i):(To(a,"If manager is not set, promise should be"),a)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await mB(e),r=new eB(e);return n.register("authEvent",i=>(ut(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Zx,{type:Zx},i=>{var a;const s=(a=i==null?void 0:i[0])===null||a===void 0?void 0:a[Zx];s!==void 0&&n(!!s),Za(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=aB(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return r4()||QR()||gb()}}const DB=IB;var ST="@firebase/auth",CT="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RB{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ut(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OB(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function MB(t){Gd(new Zc("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:s,authDomain:o}=r.options;ut(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:s,authDomain:o,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:i4(t)},d=new XL(r,i,a,c);return a7(d,n),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Gd(new Zc("auth-internal",e=>{const n=su(e.getProvider("auth").getImmediate());return(r=>new RB(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ml(ST,CT,OB(t)),Ml(ST,CT,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PB=300,kB=PR("authIdTokenMaxAge")||PB;let TT=null;const NB=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>kB)return;const i=n==null?void 0:n.token;TT!==i&&(TT=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function LB(t=jR()){const e=ub(t,"auth");if(e.isInitialized())return e.getImmediate();const n=i7(t,{popupRedirectResolver:DB,persistence:[V7,I7,g4]}),r=PR("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(r,location.origin);if(location.origin===a.origin){const s=NB(a.toString());A7(n,s,()=>s(n.currentUser)),_7(n,o=>s(o))}}const i=OR("auth");return i&&s7(n,`http://${i}`),n}function BB(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}KL({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const a=Rs("internal-error");a.customData=i,n(a)},r.type="text/javascript",r.charset="UTF-8",BB().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});MB("Browser");var FB="firebase",jB="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ml(FB,jB,"app");var IT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Pl,_4;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(M,D){function R(){}R.prototype=D.prototype,M.D=D.prototype,M.prototype=new R,M.prototype.constructor=M,M.C=function(B,N,k){for(var j=Array(arguments.length-2),q=2;q<arguments.length;q++)j[q-2]=arguments[q];return D.prototype[N].apply(B,j)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(M,D,R){R||(R=0);var B=Array(16);if(typeof D=="string")for(var N=0;16>N;++N)B[N]=D.charCodeAt(R++)|D.charCodeAt(R++)<<8|D.charCodeAt(R++)<<16|D.charCodeAt(R++)<<24;else for(N=0;16>N;++N)B[N]=D[R++]|D[R++]<<8|D[R++]<<16|D[R++]<<24;D=M.g[0],R=M.g[1],N=M.g[2];var k=M.g[3],j=D+(k^R&(N^k))+B[0]+3614090360&4294967295;D=R+(j<<7&4294967295|j>>>25),j=k+(N^D&(R^N))+B[1]+3905402710&4294967295,k=D+(j<<12&4294967295|j>>>20),j=N+(R^k&(D^R))+B[2]+606105819&4294967295,N=k+(j<<17&4294967295|j>>>15),j=R+(D^N&(k^D))+B[3]+3250441966&4294967295,R=N+(j<<22&4294967295|j>>>10),j=D+(k^R&(N^k))+B[4]+4118548399&4294967295,D=R+(j<<7&4294967295|j>>>25),j=k+(N^D&(R^N))+B[5]+1200080426&4294967295,k=D+(j<<12&4294967295|j>>>20),j=N+(R^k&(D^R))+B[6]+2821735955&4294967295,N=k+(j<<17&4294967295|j>>>15),j=R+(D^N&(k^D))+B[7]+4249261313&4294967295,R=N+(j<<22&4294967295|j>>>10),j=D+(k^R&(N^k))+B[8]+1770035416&4294967295,D=R+(j<<7&4294967295|j>>>25),j=k+(N^D&(R^N))+B[9]+2336552879&4294967295,k=D+(j<<12&4294967295|j>>>20),j=N+(R^k&(D^R))+B[10]+4294925233&4294967295,N=k+(j<<17&4294967295|j>>>15),j=R+(D^N&(k^D))+B[11]+2304563134&4294967295,R=N+(j<<22&4294967295|j>>>10),j=D+(k^R&(N^k))+B[12]+1804603682&4294967295,D=R+(j<<7&4294967295|j>>>25),j=k+(N^D&(R^N))+B[13]+4254626195&4294967295,k=D+(j<<12&4294967295|j>>>20),j=N+(R^k&(D^R))+B[14]+2792965006&4294967295,N=k+(j<<17&4294967295|j>>>15),j=R+(D^N&(k^D))+B[15]+1236535329&4294967295,R=N+(j<<22&4294967295|j>>>10),j=D+(N^k&(R^N))+B[1]+4129170786&4294967295,D=R+(j<<5&4294967295|j>>>27),j=k+(R^N&(D^R))+B[6]+3225465664&4294967295,k=D+(j<<9&4294967295|j>>>23),j=N+(D^R&(k^D))+B[11]+643717713&4294967295,N=k+(j<<14&4294967295|j>>>18),j=R+(k^D&(N^k))+B[0]+3921069994&4294967295,R=N+(j<<20&4294967295|j>>>12),j=D+(N^k&(R^N))+B[5]+3593408605&4294967295,D=R+(j<<5&4294967295|j>>>27),j=k+(R^N&(D^R))+B[10]+38016083&4294967295,k=D+(j<<9&4294967295|j>>>23),j=N+(D^R&(k^D))+B[15]+3634488961&4294967295,N=k+(j<<14&4294967295|j>>>18),j=R+(k^D&(N^k))+B[4]+3889429448&4294967295,R=N+(j<<20&4294967295|j>>>12),j=D+(N^k&(R^N))+B[9]+568446438&4294967295,D=R+(j<<5&4294967295|j>>>27),j=k+(R^N&(D^R))+B[14]+3275163606&4294967295,k=D+(j<<9&4294967295|j>>>23),j=N+(D^R&(k^D))+B[3]+4107603335&4294967295,N=k+(j<<14&4294967295|j>>>18),j=R+(k^D&(N^k))+B[8]+1163531501&4294967295,R=N+(j<<20&4294967295|j>>>12),j=D+(N^k&(R^N))+B[13]+2850285829&4294967295,D=R+(j<<5&4294967295|j>>>27),j=k+(R^N&(D^R))+B[2]+4243563512&4294967295,k=D+(j<<9&4294967295|j>>>23),j=N+(D^R&(k^D))+B[7]+1735328473&4294967295,N=k+(j<<14&4294967295|j>>>18),j=R+(k^D&(N^k))+B[12]+2368359562&4294967295,R=N+(j<<20&4294967295|j>>>12),j=D+(R^N^k)+B[5]+4294588738&4294967295,D=R+(j<<4&4294967295|j>>>28),j=k+(D^R^N)+B[8]+2272392833&4294967295,k=D+(j<<11&4294967295|j>>>21),j=N+(k^D^R)+B[11]+1839030562&4294967295,N=k+(j<<16&4294967295|j>>>16),j=R+(N^k^D)+B[14]+4259657740&4294967295,R=N+(j<<23&4294967295|j>>>9),j=D+(R^N^k)+B[1]+2763975236&4294967295,D=R+(j<<4&4294967295|j>>>28),j=k+(D^R^N)+B[4]+1272893353&4294967295,k=D+(j<<11&4294967295|j>>>21),j=N+(k^D^R)+B[7]+4139469664&4294967295,N=k+(j<<16&4294967295|j>>>16),j=R+(N^k^D)+B[10]+3200236656&4294967295,R=N+(j<<23&4294967295|j>>>9),j=D+(R^N^k)+B[13]+681279174&4294967295,D=R+(j<<4&4294967295|j>>>28),j=k+(D^R^N)+B[0]+3936430074&4294967295,k=D+(j<<11&4294967295|j>>>21),j=N+(k^D^R)+B[3]+3572445317&4294967295,N=k+(j<<16&4294967295|j>>>16),j=R+(N^k^D)+B[6]+76029189&4294967295,R=N+(j<<23&4294967295|j>>>9),j=D+(R^N^k)+B[9]+3654602809&4294967295,D=R+(j<<4&4294967295|j>>>28),j=k+(D^R^N)+B[12]+3873151461&4294967295,k=D+(j<<11&4294967295|j>>>21),j=N+(k^D^R)+B[15]+530742520&4294967295,N=k+(j<<16&4294967295|j>>>16),j=R+(N^k^D)+B[2]+3299628645&4294967295,R=N+(j<<23&4294967295|j>>>9),j=D+(N^(R|~k))+B[0]+4096336452&4294967295,D=R+(j<<6&4294967295|j>>>26),j=k+(R^(D|~N))+B[7]+1126891415&4294967295,k=D+(j<<10&4294967295|j>>>22),j=N+(D^(k|~R))+B[14]+2878612391&4294967295,N=k+(j<<15&4294967295|j>>>17),j=R+(k^(N|~D))+B[5]+4237533241&4294967295,R=N+(j<<21&4294967295|j>>>11),j=D+(N^(R|~k))+B[12]+1700485571&4294967295,D=R+(j<<6&4294967295|j>>>26),j=k+(R^(D|~N))+B[3]+2399980690&4294967295,k=D+(j<<10&4294967295|j>>>22),j=N+(D^(k|~R))+B[10]+4293915773&4294967295,N=k+(j<<15&4294967295|j>>>17),j=R+(k^(N|~D))+B[1]+2240044497&4294967295,R=N+(j<<21&4294967295|j>>>11),j=D+(N^(R|~k))+B[8]+1873313359&4294967295,D=R+(j<<6&4294967295|j>>>26),j=k+(R^(D|~N))+B[15]+4264355552&4294967295,k=D+(j<<10&4294967295|j>>>22),j=N+(D^(k|~R))+B[6]+2734768916&4294967295,N=k+(j<<15&4294967295|j>>>17),j=R+(k^(N|~D))+B[13]+1309151649&4294967295,R=N+(j<<21&4294967295|j>>>11),j=D+(N^(R|~k))+B[4]+4149444226&4294967295,D=R+(j<<6&4294967295|j>>>26),j=k+(R^(D|~N))+B[11]+3174756917&4294967295,k=D+(j<<10&4294967295|j>>>22),j=N+(D^(k|~R))+B[2]+718787259&4294967295,N=k+(j<<15&4294967295|j>>>17),j=R+(k^(N|~D))+B[9]+3951481745&4294967295,M.g[0]=M.g[0]+D&4294967295,M.g[1]=M.g[1]+(N+(j<<21&4294967295|j>>>11))&4294967295,M.g[2]=M.g[2]+N&4294967295,M.g[3]=M.g[3]+k&4294967295}r.prototype.u=function(M,D){D===void 0&&(D=M.length);for(var R=D-this.blockSize,B=this.B,N=this.h,k=0;k<D;){if(N==0)for(;k<=R;)i(this,M,k),k+=this.blockSize;if(typeof M=="string"){for(;k<D;)if(B[N++]=M.charCodeAt(k++),N==this.blockSize){i(this,B),N=0;break}}else for(;k<D;)if(B[N++]=M[k++],N==this.blockSize){i(this,B),N=0;break}}this.h=N,this.o+=D},r.prototype.v=function(){var M=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);M[0]=128;for(var D=1;D<M.length-8;++D)M[D]=0;var R=8*this.o;for(D=M.length-8;D<M.length;++D)M[D]=R&255,R/=256;for(this.u(M),M=Array(16),D=R=0;4>D;++D)for(var B=0;32>B;B+=8)M[R++]=this.g[D]>>>B&255;return M};function a(M,D){var R=o;return Object.prototype.hasOwnProperty.call(R,M)?R[M]:R[M]=D(M)}function s(M,D){this.h=D;for(var R=[],B=!0,N=M.length-1;0<=N;N--){var k=M[N]|0;B&&k==D||(R[N]=k,B=!1)}this.g=R}var o={};function c(M){return-128<=M&&128>M?a(M,function(D){return new s([D|0],0>D?-1:0)}):new s([M|0],0>M?-1:0)}function d(M){if(isNaN(M)||!isFinite(M))return p;if(0>M)return A(d(-M));for(var D=[],R=1,B=0;M>=R;B++)D[B]=M/R|0,R*=4294967296;return new s(D,0)}function f(M,D){if(M.length==0)throw Error("number format error: empty string");if(D=D||10,2>D||36<D)throw Error("radix out of range: "+D);if(M.charAt(0)=="-")return A(f(M.substring(1),D));if(0<=M.indexOf("-"))throw Error('number format error: interior "-" character');for(var R=d(Math.pow(D,8)),B=p,N=0;N<M.length;N+=8){var k=Math.min(8,M.length-N),j=parseInt(M.substring(N,N+k),D);8>k?(k=d(Math.pow(D,k)),B=B.j(k).add(d(j))):(B=B.j(R),B=B.add(d(j)))}return B}var p=c(0),g=c(1),m=c(16777216);t=s.prototype,t.m=function(){if(b(this))return-A(this).m();for(var M=0,D=1,R=0;R<this.g.length;R++){var B=this.i(R);M+=(0<=B?B:4294967296+B)*D,D*=4294967296}return M},t.toString=function(M){if(M=M||10,2>M||36<M)throw Error("radix out of range: "+M);if(x(this))return"0";if(b(this))return"-"+A(this).toString(M);for(var D=d(Math.pow(M,6)),R=this,B="";;){var N=I(R,D).g;R=E(R,N.j(D));var k=((0<R.g.length?R.g[0]:R.h)>>>0).toString(M);if(R=N,x(R))return k+B;for(;6>k.length;)k="0"+k;B=k+B}},t.i=function(M){return 0>M?0:M<this.g.length?this.g[M]:this.h};function x(M){if(M.h!=0)return!1;for(var D=0;D<M.g.length;D++)if(M.g[D]!=0)return!1;return!0}function b(M){return M.h==-1}t.l=function(M){return M=E(this,M),b(M)?-1:x(M)?0:1};function A(M){for(var D=M.g.length,R=[],B=0;B<D;B++)R[B]=~M.g[B];return new s(R,~M.h).add(g)}t.abs=function(){return b(this)?A(this):this},t.add=function(M){for(var D=Math.max(this.g.length,M.g.length),R=[],B=0,N=0;N<=D;N++){var k=B+(this.i(N)&65535)+(M.i(N)&65535),j=(k>>>16)+(this.i(N)>>>16)+(M.i(N)>>>16);B=j>>>16,k&=65535,j&=65535,R[N]=j<<16|k}return new s(R,R[R.length-1]&-2147483648?-1:0)};function E(M,D){return M.add(A(D))}t.j=function(M){if(x(this)||x(M))return p;if(b(this))return b(M)?A(this).j(A(M)):A(A(this).j(M));if(b(M))return A(this.j(A(M)));if(0>this.l(m)&&0>M.l(m))return d(this.m()*M.m());for(var D=this.g.length+M.g.length,R=[],B=0;B<2*D;B++)R[B]=0;for(B=0;B<this.g.length;B++)for(var N=0;N<M.g.length;N++){var k=this.i(B)>>>16,j=this.i(B)&65535,q=M.i(N)>>>16,X=M.i(N)&65535;R[2*B+2*N]+=j*X,S(R,2*B+2*N),R[2*B+2*N+1]+=k*X,S(R,2*B+2*N+1),R[2*B+2*N+1]+=j*q,S(R,2*B+2*N+1),R[2*B+2*N+2]+=k*q,S(R,2*B+2*N+2)}for(B=0;B<D;B++)R[B]=R[2*B+1]<<16|R[2*B];for(B=D;B<2*D;B++)R[B]=0;return new s(R,0)};function S(M,D){for(;(M[D]&65535)!=M[D];)M[D+1]+=M[D]>>>16,M[D]&=65535,D++}function T(M,D){this.g=M,this.h=D}function I(M,D){if(x(D))throw Error("division by zero");if(x(M))return new T(p,p);if(b(M))return D=I(A(M),D),new T(A(D.g),A(D.h));if(b(D))return D=I(M,A(D)),new T(A(D.g),D.h);if(30<M.g.length){if(b(M)||b(D))throw Error("slowDivide_ only works with positive integers.");for(var R=g,B=D;0>=B.l(M);)R=P(R),B=P(B);var N=F(R,1),k=F(B,1);for(B=F(B,2),R=F(R,2);!x(B);){var j=k.add(B);0>=j.l(M)&&(N=N.add(R),k=j),B=F(B,1),R=F(R,1)}return D=E(M,N.j(D)),new T(N,D)}for(N=p;0<=M.l(D);){for(R=Math.max(1,Math.floor(M.m()/D.m())),B=Math.ceil(Math.log(R)/Math.LN2),B=48>=B?1:Math.pow(2,B-48),k=d(R),j=k.j(D);b(j)||0<j.l(M);)R-=B,k=d(R),j=k.j(D);x(k)&&(k=g),N=N.add(k),M=E(M,j)}return new T(N,M)}t.A=function(M){return I(this,M).h},t.and=function(M){for(var D=Math.max(this.g.length,M.g.length),R=[],B=0;B<D;B++)R[B]=this.i(B)&M.i(B);return new s(R,this.h&M.h)},t.or=function(M){for(var D=Math.max(this.g.length,M.g.length),R=[],B=0;B<D;B++)R[B]=this.i(B)|M.i(B);return new s(R,this.h|M.h)},t.xor=function(M){for(var D=Math.max(this.g.length,M.g.length),R=[],B=0;B<D;B++)R[B]=this.i(B)^M.i(B);return new s(R,this.h^M.h)};function P(M){for(var D=M.g.length+1,R=[],B=0;B<D;B++)R[B]=M.i(B)<<1|M.i(B-1)>>>31;return new s(R,M.h)}function F(M,D){var R=D>>5;D%=32;for(var B=M.g.length-R,N=[],k=0;k<B;k++)N[k]=0<D?M.i(k+R)>>>D|M.i(k+R+1)<<32-D:M.i(k+R);return new s(N,M.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,_4=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=d,s.fromString=f,Pl=s}).apply(typeof IT<"u"?IT:typeof self<"u"?self:typeof window<"u"?window:{});var Fg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var A4,Wh,E4,mm,ew,S4,C4,T4;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(w,L,V){return w==Array.prototype||w==Object.prototype||(w[L]=V.value),w};function n(w){w=[typeof globalThis=="object"&&globalThis,w,typeof window=="object"&&window,typeof self=="object"&&self,typeof Fg=="object"&&Fg];for(var L=0;L<w.length;++L){var V=w[L];if(V&&V.Math==Math)return V}throw Error("Cannot find global object")}var r=n(this);function i(w,L){if(L)e:{var V=r;w=w.split(".");for(var $=0;$<w.length-1;$++){var se=w[$];if(!(se in V))break e;V=V[se]}w=w[w.length-1],$=V[w],L=L($),L!=$&&L!=null&&e(V,w,{configurable:!0,writable:!0,value:L})}}function a(w,L){w instanceof String&&(w+="");var V=0,$=!1,se={next:function(){if(!$&&V<w.length){var ye=V++;return{value:L(ye,w[ye]),done:!1}}return $=!0,{done:!0,value:void 0}}};return se[Symbol.iterator]=function(){return se},se}i("Array.prototype.values",function(w){return w||function(){return a(this,function(L,V){return V})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var s=s||{},o=this||self;function c(w){var L=typeof w;return L=L!="object"?L:w?Array.isArray(w)?"array":L:"null",L=="array"||L=="object"&&typeof w.length=="number"}function d(w){var L=typeof w;return L=="object"&&w!=null||L=="function"}function f(w,L,V){return w.call.apply(w.bind,arguments)}function p(w,L,V){if(!w)throw Error();if(2<arguments.length){var $=Array.prototype.slice.call(arguments,2);return function(){var se=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(se,$),w.apply(L,se)}}return function(){return w.apply(L,arguments)}}function g(w,L,V){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:p,g.apply(null,arguments)}function m(w,L){var V=Array.prototype.slice.call(arguments,1);return function(){var $=V.slice();return $.push.apply($,arguments),w.apply(this,$)}}function x(w,L){function V(){}V.prototype=L.prototype,w.aa=L.prototype,w.prototype=new V,w.prototype.constructor=w,w.Qb=function($,se,ye){for(var Fe=Array(arguments.length-2),Lt=2;Lt<arguments.length;Lt++)Fe[Lt-2]=arguments[Lt];return L.prototype[se].apply($,Fe)}}function b(w){const L=w.length;if(0<L){const V=Array(L);for(let $=0;$<L;$++)V[$]=w[$];return V}return[]}function A(w,L){for(let V=1;V<arguments.length;V++){const $=arguments[V];if(c($)){const se=w.length||0,ye=$.length||0;w.length=se+ye;for(let Fe=0;Fe<ye;Fe++)w[se+Fe]=$[Fe]}else w.push($)}}class E{constructor(L,V){this.i=L,this.j=V,this.h=0,this.g=null}get(){let L;return 0<this.h?(this.h--,L=this.g,this.g=L.next,L.next=null):L=this.i(),L}}function S(w){return/^[\s\xa0]*$/.test(w)}function T(){var w=o.navigator;return w&&(w=w.userAgent)?w:""}function I(w){return I[" "](w),w}I[" "]=function(){};var P=T().indexOf("Gecko")!=-1&&!(T().toLowerCase().indexOf("webkit")!=-1&&T().indexOf("Edge")==-1)&&!(T().indexOf("Trident")!=-1||T().indexOf("MSIE")!=-1)&&T().indexOf("Edge")==-1;function F(w,L,V){for(const $ in w)L.call(V,w[$],$,w)}function M(w,L){for(const V in w)L.call(void 0,w[V],V,w)}function D(w){const L={};for(const V in w)L[V]=w[V];return L}const R="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function B(w,L){let V,$;for(let se=1;se<arguments.length;se++){$=arguments[se];for(V in $)w[V]=$[V];for(let ye=0;ye<R.length;ye++)V=R[ye],Object.prototype.hasOwnProperty.call($,V)&&(w[V]=$[V])}}function N(w){var L=1;w=w.split(":");const V=[];for(;0<L&&w.length;)V.push(w.shift()),L--;return w.length&&V.push(w.join(":")),V}function k(w){o.setTimeout(()=>{throw w},0)}function j(){var w=Z;let L=null;return w.g&&(L=w.g,w.g=w.g.next,w.g||(w.h=null),L.next=null),L}class q{constructor(){this.h=this.g=null}add(L,V){const $=X.get();$.set(L,V),this.h?this.h.next=$:this.g=$,this.h=$}}var X=new E(()=>new G,w=>w.reset());class G{constructor(){this.next=this.g=this.h=null}set(L,V){this.h=L,this.g=V,this.next=null}reset(){this.next=this.g=this.h=null}}let W,K=!1,Z=new q,fe=()=>{const w=o.Promise.resolve(void 0);W=()=>{w.then(me)}};var me=()=>{for(var w;w=j();){try{w.h.call(w.g)}catch(V){k(V)}var L=X;L.j(w),100>L.h&&(L.h++,w.next=L.g,L.g=w)}K=!1};function ve(){this.s=this.s,this.C=this.C}ve.prototype.s=!1,ve.prototype.ma=function(){this.s||(this.s=!0,this.N())},ve.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function be(w,L){this.type=w,this.g=this.target=L,this.defaultPrevented=!1}be.prototype.h=function(){this.defaultPrevented=!0};var Me=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var w=!1,L=Object.defineProperty({},"passive",{get:function(){w=!0}});try{const V=()=>{};o.addEventListener("test",V,L),o.removeEventListener("test",V,L)}catch{}return w}();function ge(w,L){if(be.call(this,w?w.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,w){var V=this.type=w.type,$=w.changedTouches&&w.changedTouches.length?w.changedTouches[0]:null;if(this.target=w.target||w.srcElement,this.g=L,L=w.relatedTarget){if(P){e:{try{I(L.nodeName);var se=!0;break e}catch{}se=!1}se||(L=null)}}else V=="mouseover"?L=w.fromElement:V=="mouseout"&&(L=w.toElement);this.relatedTarget=L,$?(this.clientX=$.clientX!==void 0?$.clientX:$.pageX,this.clientY=$.clientY!==void 0?$.clientY:$.pageY,this.screenX=$.screenX||0,this.screenY=$.screenY||0):(this.clientX=w.clientX!==void 0?w.clientX:w.pageX,this.clientY=w.clientY!==void 0?w.clientY:w.pageY,this.screenX=w.screenX||0,this.screenY=w.screenY||0),this.button=w.button,this.key=w.key||"",this.ctrlKey=w.ctrlKey,this.altKey=w.altKey,this.shiftKey=w.shiftKey,this.metaKey=w.metaKey,this.pointerId=w.pointerId||0,this.pointerType=typeof w.pointerType=="string"?w.pointerType:Le[w.pointerType]||"",this.state=w.state,this.i=w,w.defaultPrevented&&ge.aa.h.call(this)}}x(ge,be);var Le={2:"touch",3:"pen",4:"mouse"};ge.prototype.h=function(){ge.aa.h.call(this);var w=this.i;w.preventDefault?w.preventDefault():w.returnValue=!1};var Ne="closure_listenable_"+(1e6*Math.random()|0),Se=0;function J(w,L,V,$,se){this.listener=w,this.proxy=null,this.src=L,this.type=V,this.capture=!!$,this.ha=se,this.key=++Se,this.da=this.fa=!1}function he(w){w.da=!0,w.listener=null,w.proxy=null,w.src=null,w.ha=null}function ue(w){this.src=w,this.g={},this.h=0}ue.prototype.add=function(w,L,V,$,se){var ye=w.toString();w=this.g[ye],w||(w=this.g[ye]=[],this.h++);var Fe=Be(w,L,$,se);return-1<Fe?(L=w[Fe],V||(L.fa=!1)):(L=new J(L,this.src,ye,!!$,se),L.fa=V,w.push(L)),L};function ie(w,L){var V=L.type;if(V in w.g){var $=w.g[V],se=Array.prototype.indexOf.call($,L,void 0),ye;(ye=0<=se)&&Array.prototype.splice.call($,se,1),ye&&(he(L),w.g[V].length==0&&(delete w.g[V],w.h--))}}function Be(w,L,V,$){for(var se=0;se<w.length;++se){var ye=w[se];if(!ye.da&&ye.listener==L&&ye.capture==!!V&&ye.ha==$)return se}return-1}var we="closure_lm_"+(1e6*Math.random()|0),$e={};function Oe(w,L,V,$,se){if(Array.isArray(L)){for(var ye=0;ye<L.length;ye++)Oe(w,L[ye],V,$,se);return null}return V=Pn(V),w&&w[Ne]?w.K(L,V,d($)?!!$.capture:!1,se):De(w,L,V,!1,$,se)}function De(w,L,V,$,se,ye){if(!L)throw Error("Invalid event type");var Fe=d(se)?!!se.capture:!!se,Lt=_t(w);if(Lt||(w[we]=Lt=new ue(w)),V=Lt.add(L,V,$,Fe,ye),V.proxy)return V;if($=qe(),V.proxy=$,$.src=w,$.listener=V,w.addEventListener)Me||(se=Fe),se===void 0&&(se=!1),w.addEventListener(L.toString(),$,se);else if(w.attachEvent)w.attachEvent(ke(L.toString()),$);else if(w.addListener&&w.removeListener)w.addListener($);else throw Error("addEventListener and attachEvent are unavailable.");return V}function qe(){function w(V){return L.call(w.src,w.listener,V)}const L=ht;return w}function We(w,L,V,$,se){if(Array.isArray(L))for(var ye=0;ye<L.length;ye++)We(w,L[ye],V,$,se);else $=d($)?!!$.capture:!!$,V=Pn(V),w&&w[Ne]?(w=w.i,L=String(L).toString(),L in w.g&&(ye=w.g[L],V=Be(ye,V,$,se),-1<V&&(he(ye[V]),Array.prototype.splice.call(ye,V,1),ye.length==0&&(delete w.g[L],w.h--)))):w&&(w=_t(w))&&(L=w.g[L.toString()],w=-1,L&&(w=Be(L,V,$,se)),(V=-1<w?L[w]:null)&&Re(V))}function Re(w){if(typeof w!="number"&&w&&!w.da){var L=w.src;if(L&&L[Ne])ie(L.i,w);else{var V=w.type,$=w.proxy;L.removeEventListener?L.removeEventListener(V,$,w.capture):L.detachEvent?L.detachEvent(ke(V),$):L.addListener&&L.removeListener&&L.removeListener($),(V=_t(L))?(ie(V,w),V.h==0&&(V.src=null,L[we]=null)):he(w)}}}function ke(w){return w in $e?$e[w]:$e[w]="on"+w}function ht(w,L){if(w.da)w=!0;else{L=new ge(L,this);var V=w.listener,$=w.ha||w.src;w.fa&&Re(w),w=V.call($,L)}return w}function _t(w){return w=w[we],w instanceof ue?w:null}var xn="__closure_events_fn_"+(1e9*Math.random()>>>0);function Pn(w){return typeof w=="function"?w:(w[xn]||(w[xn]=function(L){return w.handleEvent(L)}),w[xn])}function rt(){ve.call(this),this.i=new ue(this),this.M=this,this.F=null}x(rt,ve),rt.prototype[Ne]=!0,rt.prototype.removeEventListener=function(w,L,V,$){We(this,w,L,V,$)};function at(w,L){var V,$=w.F;if($)for(V=[];$;$=$.F)V.push($);if(w=w.M,$=L.type||L,typeof L=="string")L=new be(L,w);else if(L instanceof be)L.target=L.target||w;else{var se=L;L=new be($,w),B(L,se)}if(se=!0,V)for(var ye=V.length-1;0<=ye;ye--){var Fe=L.g=V[ye];se=In(Fe,$,!0,L)&&se}if(Fe=L.g=w,se=In(Fe,$,!0,L)&&se,se=In(Fe,$,!1,L)&&se,V)for(ye=0;ye<V.length;ye++)Fe=L.g=V[ye],se=In(Fe,$,!1,L)&&se}rt.prototype.N=function(){if(rt.aa.N.call(this),this.i){var w=this.i,L;for(L in w.g){for(var V=w.g[L],$=0;$<V.length;$++)he(V[$]);delete w.g[L],w.h--}}this.F=null},rt.prototype.K=function(w,L,V,$){return this.i.add(String(w),L,!1,V,$)},rt.prototype.L=function(w,L,V,$){return this.i.add(String(w),L,!0,V,$)};function In(w,L,V,$){if(L=w.i.g[String(L)],!L)return!0;L=L.concat();for(var se=!0,ye=0;ye<L.length;++ye){var Fe=L[ye];if(Fe&&!Fe.da&&Fe.capture==V){var Lt=Fe.listener,wr=Fe.ha||Fe.src;Fe.fa&&ie(w.i,Fe),se=Lt.call(wr,$)!==!1&&se}}return se&&!$.defaultPrevented}function Qe(w,L,V){if(typeof w=="function")V&&(w=g(w,V));else if(w&&typeof w.handleEvent=="function")w=g(w.handleEvent,w);else throw Error("Invalid listener argument");return 2147483647<Number(L)?-1:o.setTimeout(w,L||0)}function mt(w){w.g=Qe(()=>{w.g=null,w.i&&(w.i=!1,mt(w))},w.l);const L=w.h;w.h=null,w.m.apply(null,L)}class Nt extends ve{constructor(L,V){super(),this.m=L,this.l=V,this.h=null,this.i=!1,this.g=null}j(L){this.h=arguments,this.g?this.i=!0:mt(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function tn(w){ve.call(this),this.h=w,this.g={}}x(tn,ve);var An=[];function Dn(w){F(w.g,function(L,V){this.g.hasOwnProperty(V)&&Re(L)},w),w.g={}}tn.prototype.N=function(){tn.aa.N.call(this),Dn(this)},tn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var qt=o.JSON.stringify,qr=o.JSON.parse,yt=class{stringify(w){return o.JSON.stringify(w,void 0)}parse(w){return o.JSON.parse(w,void 0)}};function Vn(){}Vn.prototype.h=null;function Jn(w){return w.h||(w.h=w.i())}function Xr(){}var Ei={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function lr(){be.call(this,"d")}x(lr,be);function Jl(){be.call(this,"c")}x(Jl,be);var ua={},yu=null;function Gs(){return yu=yu||new rt}ua.La="serverreachability";function wn(w){be.call(this,ua.La,w)}x(wn,be);function cr(w){const L=Gs();at(L,new wn(L))}ua.STAT_EVENT="statevent";function ec(w,L){be.call(this,ua.STAT_EVENT,w),this.stat=L}x(ec,be);function kn(w){const L=Gs();at(L,new ec(L,w))}ua.Ma="timingevent";function xr(w,L){be.call(this,ua.Ma,w),this.size=L}x(xr,be);function ur(w,L){if(typeof w!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){w()},L)}function da(){this.g=!0}da.prototype.xa=function(){this.g=!1};function If(w,L,V,$,se,ye){w.info(function(){if(w.g)if(ye)for(var Fe="",Lt=ye.split("&"),wr=0;wr<Lt.length;wr++){var Bt=Lt[wr].split("=");if(1<Bt.length){var Lr=Bt[0];Bt=Bt[1];var br=Lr.split("_");Fe=2<=br.length&&br[1]=="type"?Fe+(Lr+"="+Bt+"&"):Fe+(Lr+"=redacted&")}}else Fe=null;else Fe=ye;return"XMLHTTP REQ ("+$+") [attempt "+se+"]: "+L+`
`+V+`
`+Fe})}function Gy(w,L,V,$,se,ye,Fe){w.info(function(){return"XMLHTTP RESP ("+$+") [ attempt "+se+"]: "+L+`
`+V+`
`+ye+" "+Fe})}function Ho(w,L,V,$){w.info(function(){return"XMLHTTP TEXT ("+L+"): "+tc(w,V)+($?" "+$:"")})}function mp(w,L){w.info(function(){return"TIMEOUT: "+L})}da.prototype.info=function(){};function tc(w,L){if(!w.g)return L;if(!L)return null;try{var V=JSON.parse(L);if(V){for(w=0;w<V.length;w++)if(Array.isArray(V[w])){var $=V[w];if(!(2>$.length)){var se=$[1];if(Array.isArray(se)&&!(1>se.length)){var ye=se[0];if(ye!="noop"&&ye!="stop"&&ye!="close")for(var Fe=1;Fe<se.length;Fe++)se[Fe]=""}}}}return qt(V)}catch{return L}}var zo={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ws={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},is;function as(){}x(as,Vn),as.prototype.g=function(){return new XMLHttpRequest},as.prototype.i=function(){return{}},is=new as;function Si(w,L,V,$){this.j=w,this.i=L,this.l=V,this.R=$||1,this.U=new tn(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new er}function er(){this.i=null,this.g="",this.h=!1}var Df={},vu={};function Na(w,L,V){w.L=1,w.v=sc(Xi(L)),w.m=V,w.P=!0,Ys(w,null)}function Ys(w,L){w.F=Date.now(),nc(w),w.A=Xi(w.v);var V=w.A,$=w.R;Array.isArray($)||($=[String($)]),Nf(V.i,"t",$),w.C=0,V=w.j.J,w.h=new er,w.g=Mp(w.j,V?L:null,!w.m),0<w.O&&(w.M=new Nt(g(w.Y,w,w.g),w.O)),L=w.U,V=w.g,$=w.ca;var se="readystatechange";Array.isArray(se)||(se&&(An[0]=se.toString()),se=An);for(var ye=0;ye<se.length;ye++){var Fe=Oe(V,se[ye],$||L.handleEvent,!1,L.h||L);if(!Fe)break;L.g[Fe.key]=Fe}L=w.H?D(w.H):{},w.m?(w.u||(w.u="POST"),L["Content-Type"]="application/x-www-form-urlencoded",w.g.ea(w.A,w.u,w.m,L)):(w.u="GET",w.g.ea(w.A,w.u,null,L)),cr(),If(w.i,w.u,w.A,w.l,w.R,w.m)}Si.prototype.ca=function(w){w=w.target;const L=this.M;L&&ga(w)==3?L.j():this.Y(w)},Si.prototype.Y=function(w){try{if(w==this.g)e:{const br=ga(this.g);var L=this.g.Ba();const to=this.g.Z();if(!(3>br)&&(br!=3||this.g&&(this.h.h||this.g.oa()||Ep(this.g)))){this.J||br!=4||L==7||(L==8||0>=to?cr(3):cr(2)),$o(this);var V=this.g.Z();this.X=V;t:if(yp(this)){var $=Ep(this.g);w="";var se=$.length,ye=ga(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Kr(this),ss(this);var Fe="";break t}this.h.i=new o.TextDecoder}for(L=0;L<se;L++)this.h.h=!0,w+=this.h.i.decode($[L],{stream:!(ye&&L==se-1)});$.length=0,this.h.g+=w,this.C=0,Fe=this.h.g}else Fe=this.g.oa();if(this.o=V==200,Gy(this.i,this.u,this.A,this.l,this.R,br,V),this.o){if(this.T&&!this.K){t:{if(this.g){var Lt,wr=this.g;if((Lt=wr.g?wr.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!S(Lt)){var Bt=Lt;break t}}Bt=null}if(V=Bt)Ho(this.i,this.l,V,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,rc(this,V);else{this.o=!1,this.s=3,kn(12),Kr(this),ss(this);break e}}if(this.P){V=!0;let Qr;for(;!this.J&&this.C<Fe.length;)if(Qr=vp(this,Fe),Qr==vu){br==4&&(this.s=4,kn(14),V=!1),Ho(this.i,this.l,null,"[Incomplete Response]");break}else if(Qr==Df){this.s=4,kn(15),Ho(this.i,this.l,Fe,"[Invalid Chunk]"),V=!1;break}else Ho(this.i,this.l,Qr,null),rc(this,Qr);if(yp(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),br!=4||Fe.length!=0||this.h.h||(this.s=1,kn(16),V=!1),this.o=this.o&&V,!V)Ho(this.i,this.l,Fe,"[Invalid Chunked Response]"),Kr(this),ss(this);else if(0<Fe.length&&!this.W){this.W=!0;var Lr=this.j;Lr.g==this&&Lr.ba&&!Lr.M&&(Lr.j.info("Great, no buffering proxy detected. Bytes received: "+Fe.length),pc(Lr),Lr.M=!0,kn(11))}}else Ho(this.i,this.l,Fe,null),rc(this,Fe);br==4&&Kr(this),this.o&&!this.J&&(br==4?Dp(this.j,this):(this.o=!1,nc(this)))}else Ky(this.g),V==400&&0<Fe.indexOf("Unknown SID")?(this.s=3,kn(12)):(this.s=0,kn(13)),Kr(this),ss(this)}}}catch{}finally{}};function yp(w){return w.g?w.u=="GET"&&w.L!=2&&w.j.Ca:!1}function vp(w,L){var V=w.C,$=L.indexOf(`
`,V);return $==-1?vu:(V=Number(L.substring(V,$)),isNaN(V)?Df:($+=1,$+V>L.length?vu:(L=L.slice($,$+V),w.C=$+V,L)))}Si.prototype.cancel=function(){this.J=!0,Kr(this)};function nc(w){w.S=Date.now()+w.I,xp(w,w.I)}function xp(w,L){if(w.B!=null)throw Error("WatchDog timer not null");w.B=ur(g(w.ba,w),L)}function $o(w){w.B&&(o.clearTimeout(w.B),w.B=null)}Si.prototype.ba=function(){this.B=null;const w=Date.now();0<=w-this.S?(mp(this.i,this.A),this.L!=2&&(cr(),kn(17)),Kr(this),this.s=2,ss(this)):xp(this,this.S-w)};function ss(w){w.j.G==0||w.J||Dp(w.j,w)}function Kr(w){$o(w);var L=w.M;L&&typeof L.ma=="function"&&L.ma(),w.M=null,Dn(w.U),w.g&&(L=w.g,w.g=null,L.abort(),L.ma())}function rc(w,L){try{var V=w.j;if(V.G!=0&&(V.g==w||Rf(V.h,w))){if(!w.K&&Rf(V.h,w)&&V.G==3){try{var $=V.Da.g.parse(L)}catch{$=null}if(Array.isArray($)&&$.length==3){var se=$;if(se[0]==0){e:if(!V.u){if(V.g)if(V.g.F+3e3<w.F)Ru(V),Iu(V);else break e;Vf(V),kn(18)}}else V.za=se[1],0<V.za-V.T&&37500>se[2]&&V.F&&V.v==0&&!V.C&&(V.C=ur(g(V.Za,V),6e3));if(1>=wu(V.h)&&V.ca){try{V.ca()}catch{}V.ca=void 0}}else eo(V,11)}else if((w.K||V.g==w)&&Ru(V),!S(L))for(se=V.Da.g.parse(L),L=0;L<se.length;L++){let Bt=se[L];if(V.T=Bt[0],Bt=Bt[1],V.G==2)if(Bt[0]=="c"){V.K=Bt[1],V.ia=Bt[2];const Lr=Bt[3];Lr!=null&&(V.la=Lr,V.j.info("VER="+V.la));const br=Bt[4];br!=null&&(V.Aa=br,V.j.info("SVER="+V.Aa));const to=Bt[5];to!=null&&typeof to=="number"&&0<to&&($=1.5*to,V.L=$,V.j.info("backChannelRequestTimeoutMs_="+$)),$=V;const Qr=w.g;if(Qr){const hs=Qr.g?Qr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(hs){var ye=$.h;ye.g||hs.indexOf("spdy")==-1&&hs.indexOf("quic")==-1&&hs.indexOf("h2")==-1||(ye.j=ye.l,ye.g=new Set,ye.h&&(bu(ye,ye.h),ye.h=null))}if($.D){const Hf=Qr.g?Qr.g.getResponseHeader("X-HTTP-Session-Id"):null;Hf&&($.ya=Hf,fn($.I,$.D,Hf))}}V.G=3,V.l&&V.l.ua(),V.ba&&(V.R=Date.now()-w.F,V.j.info("Handshake RTT: "+V.R+"ms")),$=V;var Fe=w;if($.qa=Op($,$.J?$.ia:null,$.W),Fe.K){Ci($.h,Fe);var Lt=Fe,wr=$.L;wr&&(Lt.I=wr),Lt.B&&($o(Lt),nc(Lt)),$.g=Fe}else Tp($);0<V.i.length&&Du(V)}else Bt[0]!="stop"&&Bt[0]!="close"||eo(V,7);else V.G==3&&(Bt[0]=="stop"||Bt[0]=="close"?Bt[0]=="stop"?eo(V,7):Ff(V):Bt[0]!="noop"&&V.l&&V.l.ta(Bt),V.v=0)}}cr(4)}catch{}}var wp=class{constructor(w,L){this.g=w,this.map=L}};function qs(w){this.l=w||10,o.PerformanceNavigationTiming?(w=o.performance.getEntriesByType("navigation"),w=0<w.length&&(w[0].nextHopProtocol=="hq"||w[0].nextHopProtocol=="h2")):w=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=w?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function xu(w){return w.h?!0:w.g?w.g.size>=w.j:!1}function wu(w){return w.h?1:w.g?w.g.size:0}function Rf(w,L){return w.h?w.h==L:w.g?w.g.has(L):!1}function bu(w,L){w.g?w.g.add(L):w.h=L}function Ci(w,L){w.h&&w.h==L?w.h=null:w.g&&w.g.has(L)&&w.g.delete(L)}qs.prototype.cancel=function(){if(this.i=Of(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const w of this.g.values())w.cancel();this.g.clear()}};function Of(w){if(w.h!=null)return w.i.concat(w.h.D);if(w.g!=null&&w.g.size!==0){let L=w.i;for(const V of w.g.values())L=L.concat(V.D);return L}return b(w.i)}function Wy(w){if(w.V&&typeof w.V=="function")return w.V();if(typeof Map<"u"&&w instanceof Map||typeof Set<"u"&&w instanceof Set)return Array.from(w.values());if(typeof w=="string")return w.split("");if(c(w)){for(var L=[],V=w.length,$=0;$<V;$++)L.push(w[$]);return L}L=[],V=0;for($ in w)L[V++]=w[$];return L}function _u(w){if(w.na&&typeof w.na=="function")return w.na();if(!w.V||typeof w.V!="function"){if(typeof Map<"u"&&w instanceof Map)return Array.from(w.keys());if(!(typeof Set<"u"&&w instanceof Set)){if(c(w)||typeof w=="string"){var L=[];w=w.length;for(var V=0;V<w;V++)L.push(V);return L}L=[],V=0;for(const $ in w)L[V++]=$;return L}}}function Mf(w,L){if(w.forEach&&typeof w.forEach=="function")w.forEach(L,void 0);else if(c(w)||typeof w=="string")Array.prototype.forEach.call(w,L,void 0);else for(var V=_u(w),$=Wy(w),se=$.length,ye=0;ye<se;ye++)L.call(void 0,$[ye],V&&V[ye],w)}var ic=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Yy(w,L){if(w){w=w.split("&");for(var V=0;V<w.length;V++){var $=w[V].indexOf("="),se=null;if(0<=$){var ye=w[V].substring(0,$);se=w[V].substring($+1)}else ye=w[V];L(ye,se?decodeURIComponent(se.replace(/\+/g," ")):"")}}}function dr(w){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,w instanceof dr){this.h=w.h,ac(this,w.j),this.o=w.o,this.g=w.g,Go(this,w.s),this.l=w.l;var L=w.i,V=new Ks;V.i=L.i,L.g&&(V.g=new Map(L.g),V.h=L.h),Xs(this,V),this.m=w.m}else w&&(L=String(w).match(ic))?(this.h=!1,ac(this,L[1]||"",!0),this.o=fa(L[2]||""),this.g=fa(L[3]||"",!0),Go(this,L[4]),this.l=fa(L[5]||"",!0),Xs(this,L[6]||"",!0),this.m=fa(L[7]||"")):(this.h=!1,this.i=new Ks(null,this.h))}dr.prototype.toString=function(){var w=[],L=this.j;L&&w.push(oc(L,Pf,!0),":");var V=this.g;return(V||L=="file")&&(w.push("//"),(L=this.o)&&w.push(oc(L,Pf,!0),"@"),w.push(encodeURIComponent(String(V)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),V=this.s,V!=null&&w.push(":",String(V))),(V=this.l)&&(this.g&&V.charAt(0)!="/"&&w.push("/"),w.push(oc(V,V.charAt(0)=="/"?qy:kf,!0))),(V=this.i.toString())&&w.push("?",V),(V=this.m)&&w.push("#",oc(V,Au)),w.join("")};function Xi(w){return new dr(w)}function ac(w,L,V){w.j=V?fa(L,!0):L,w.j&&(w.j=w.j.replace(/:$/,""))}function Go(w,L){if(L){if(L=Number(L),isNaN(L)||0>L)throw Error("Bad port number "+L);w.s=L}else w.s=null}function Xs(w,L,V){L instanceof Ks?(w.i=L,_p(w.i,w.h)):(V||(L=oc(L,Xy)),w.i=new Ks(L,w.h))}function fn(w,L,V){w.i.set(L,V)}function sc(w){return fn(w,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),w}function fa(w,L){return w?L?decodeURI(w.replace(/%25/g,"%2525")):decodeURIComponent(w):""}function oc(w,L,V){return typeof w=="string"?(w=encodeURI(w).replace(L,bp),V&&(w=w.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),w):null}function bp(w){return w=w.charCodeAt(0),"%"+(w>>4&15).toString(16)+(w&15).toString(16)}var Pf=/[#\/\?@]/g,kf=/[#\?:]/g,qy=/[#\?]/g,Xy=/[#\?@]/g,Au=/#/g;function Ks(w,L){this.h=this.g=null,this.i=w||null,this.j=!!L}function ha(w){w.g||(w.g=new Map,w.h=0,w.i&&Yy(w.i,function(L,V){w.add(decodeURIComponent(L.replace(/\+/g," ")),V)}))}t=Ks.prototype,t.add=function(w,L){ha(this),this.i=null,w=os(this,w);var V=this.g.get(w);return V||this.g.set(w,V=[]),V.push(L),this.h+=1,this};function Qs(w,L){ha(w),L=os(w,L),w.g.has(L)&&(w.i=null,w.h-=w.g.get(L).length,w.g.delete(L))}function Zs(w,L){return ha(w),L=os(w,L),w.g.has(L)}t.forEach=function(w,L){ha(this),this.g.forEach(function(V,$){V.forEach(function(se){w.call(L,se,$,this)},this)},this)},t.na=function(){ha(this);const w=Array.from(this.g.values()),L=Array.from(this.g.keys()),V=[];for(let $=0;$<L.length;$++){const se=w[$];for(let ye=0;ye<se.length;ye++)V.push(L[$])}return V},t.V=function(w){ha(this);let L=[];if(typeof w=="string")Zs(this,w)&&(L=L.concat(this.g.get(os(this,w))));else{w=Array.from(this.g.values());for(let V=0;V<w.length;V++)L=L.concat(w[V])}return L},t.set=function(w,L){return ha(this),this.i=null,w=os(this,w),Zs(this,w)&&(this.h-=this.g.get(w).length),this.g.set(w,[L]),this.h+=1,this},t.get=function(w,L){return w?(w=this.V(w),0<w.length?String(w[0]):L):L};function Nf(w,L,V){Qs(w,L),0<V.length&&(w.i=null,w.g.set(os(w,L),b(V)),w.h+=V.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const w=[],L=Array.from(this.g.keys());for(var V=0;V<L.length;V++){var $=L[V];const ye=encodeURIComponent(String($)),Fe=this.V($);for($=0;$<Fe.length;$++){var se=ye;Fe[$]!==""&&(se+="="+encodeURIComponent(String(Fe[$]))),w.push(se)}}return this.i=w.join("&")};function os(w,L){return L=String(L),w.j&&(L=L.toLowerCase()),L}function _p(w,L){L&&!w.j&&(ha(w),w.i=null,w.g.forEach(function(V,$){var se=$.toLowerCase();$!=se&&(Qs(this,$),Nf(this,se,V))},w)),w.j=L}function lc(w,L){const V=new da;if(o.Image){const $=new Image;$.onload=m(pa,V,"TestLoadImage: loaded",!0,L,$),$.onerror=m(pa,V,"TestLoadImage: error",!1,L,$),$.onabort=m(pa,V,"TestLoadImage: abort",!1,L,$),$.ontimeout=m(pa,V,"TestLoadImage: timeout",!1,L,$),o.setTimeout(function(){$.ontimeout&&$.ontimeout()},1e4),$.src=w}else L(!1)}function La(w,L){const V=new da,$=new AbortController,se=setTimeout(()=>{$.abort(),pa(V,"TestPingServer: timeout",!1,L)},1e4);fetch(w,{signal:$.signal}).then(ye=>{clearTimeout(se),ye.ok?pa(V,"TestPingServer: ok",!0,L):pa(V,"TestPingServer: server error",!1,L)}).catch(()=>{clearTimeout(se),pa(V,"TestPingServer: error",!1,L)})}function pa(w,L,V,$,se){try{se&&(se.onload=null,se.onerror=null,se.onabort=null,se.ontimeout=null),$(V)}catch{}}function cc(){this.g=new yt}function ls(w,L,V){const $=V||"";try{Mf(w,function(se,ye){let Fe=se;d(se)&&(Fe=qt(se)),L.push($+ye+"="+encodeURIComponent(Fe))})}catch(se){throw L.push($+"type="+encodeURIComponent("_badmap")),se}}function Wo(w){this.l=w.Ub||null,this.j=w.eb||!1}x(Wo,Vn),Wo.prototype.g=function(){return new Js(this.l,this.j)},Wo.prototype.i=function(w){return function(){return w}}({});function Js(w,L){rt.call(this),this.D=w,this.o=L,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}x(Js,rt),t=Js.prototype,t.open=function(w,L){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=w,this.A=L,this.readyState=1,us(this)},t.send=function(w){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const L={headers:this.u,method:this.B,credentials:this.m,cache:void 0};w&&(L.body=w),(this.D||o).fetch(new Request(this.A,L)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,cs(this)),this.readyState=0},t.Sa=function(w){if(this.g&&(this.l=w,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=w.headers,this.readyState=2,us(this)),this.g&&(this.readyState=3,us(this),this.g)))if(this.responseType==="arraybuffer")w.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in w){if(this.j=w.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Lf(this)}else w.text().then(this.Ra.bind(this),this.ga.bind(this))};function Lf(w){w.j.read().then(w.Pa.bind(w)).catch(w.ga.bind(w))}t.Pa=function(w){if(this.g){if(this.o&&w.value)this.response.push(w.value);else if(!this.o){var L=w.value?w.value:new Uint8Array(0);(L=this.v.decode(L,{stream:!w.done}))&&(this.response=this.responseText+=L)}w.done?cs(this):us(this),this.readyState==3&&Lf(this)}},t.Ra=function(w){this.g&&(this.response=this.responseText=w,cs(this))},t.Qa=function(w){this.g&&(this.response=w,cs(this))},t.ga=function(){this.g&&cs(this)};function cs(w){w.readyState=4,w.l=null,w.j=null,w.v=null,us(w)}t.setRequestHeader=function(w,L){this.u.append(w,L)},t.getResponseHeader=function(w){return this.h&&this.h.get(w.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const w=[],L=this.h.entries();for(var V=L.next();!V.done;)V=V.value,w.push(V[0]+": "+V[1]),V=L.next();return w.join(`\r
`)};function us(w){w.onreadystatechange&&w.onreadystatechange.call(w)}Object.defineProperty(Js.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(w){this.m=w?"include":"same-origin"}});function Bf(w){let L="";return F(w,function(V,$){L+=$,L+=":",L+=V,L+=`\r
`}),L}function Nr(w,L,V){e:{for($ in V){var $=!1;break e}$=!0}$||(V=Bf(V),typeof w=="string"?V!=null&&encodeURIComponent(String(V)):fn(w,L,V))}function nn(w){rt.call(this),this.headers=new Map,this.o=w||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}x(nn,rt);var Eu=/^https?$/i,uc=["POST","PUT"];t=nn.prototype,t.Ha=function(w){this.J=w},t.ea=function(w,L,V,$){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+w);L=L?L.toUpperCase():"GET",this.D=w,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():is.g(),this.v=this.o?Jn(this.o):Jn(is),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(L,String(w),!0),this.B=!1}catch(ye){Ap(this,ye);return}if(w=V||"",V=new Map(this.headers),$)if(Object.getPrototypeOf($)===Object.prototype)for(var se in $)V.set(se,$[se]);else if(typeof $.keys=="function"&&typeof $.get=="function")for(const ye of $.keys())V.set(ye,$.get(ye));else throw Error("Unknown input type for opt_headers: "+String($));$=Array.from(V.keys()).find(ye=>ye.toLowerCase()=="content-type"),se=o.FormData&&w instanceof o.FormData,!(0<=Array.prototype.indexOf.call(uc,L,void 0))||$||se||V.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ye,Fe]of V)this.g.setRequestHeader(ye,Fe);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{dc(this),this.u=!0,this.g.send(w),this.u=!1}catch(ye){Ap(this,ye)}};function Ap(w,L){w.h=!1,w.g&&(w.j=!0,w.g.abort(),w.j=!1),w.l=L,w.m=5,Su(w),ds(w)}function Su(w){w.A||(w.A=!0,at(w,"complete"),at(w,"error"))}t.abort=function(w){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=w||7,at(this,"complete"),at(this,"abort"),ds(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ds(this,!0)),nn.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Cu(this):this.bb())},t.bb=function(){Cu(this)};function Cu(w){if(w.h&&typeof s<"u"&&(!w.v[1]||ga(w)!=4||w.Z()!=2)){if(w.u&&ga(w)==4)Qe(w.Ea,0,w);else if(at(w,"readystatechange"),ga(w)==4){w.h=!1;try{const Fe=w.Z();e:switch(Fe){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var L=!0;break e;default:L=!1}var V;if(!(V=L)){var $;if($=Fe===0){var se=String(w.D).match(ic)[1]||null;!se&&o.self&&o.self.location&&(se=o.self.location.protocol.slice(0,-1)),$=!Eu.test(se?se.toLowerCase():"")}V=$}if(V)at(w,"complete"),at(w,"success");else{w.m=6;try{var ye=2<ga(w)?w.g.statusText:""}catch{ye=""}w.l=ye+" ["+w.Z()+"]",Su(w)}}finally{ds(w)}}}}function ds(w,L){if(w.g){dc(w);const V=w.g,$=w.v[0]?()=>{}:null;w.g=null,w.v=null,L||at(w,"ready");try{V.onreadystatechange=$}catch{}}}function dc(w){w.I&&(o.clearTimeout(w.I),w.I=null)}t.isActive=function(){return!!this.g};function ga(w){return w.g?w.g.readyState:0}t.Z=function(){try{return 2<ga(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(w){if(this.g){var L=this.g.responseText;return w&&L.indexOf(w)==0&&(L=L.substring(w.length)),qr(L)}};function Ep(w){try{if(!w.g)return null;if("response"in w.g)return w.g.response;switch(w.H){case"":case"text":return w.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in w.g)return w.g.mozResponseArrayBuffer}return null}catch{return null}}function Ky(w){const L={};w=(w.g&&2<=ga(w)&&w.g.getAllResponseHeaders()||"").split(`\r
`);for(let $=0;$<w.length;$++){if(S(w[$]))continue;var V=N(w[$]);const se=V[0];if(V=V[1],typeof V!="string")continue;V=V.trim();const ye=L[se]||[];L[se]=ye,ye.push(V)}M(L,function($){return $.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function fc(w,L,V){return V&&V.internalChannelParams&&V.internalChannelParams[w]||L}function Tu(w){this.Aa=0,this.i=[],this.j=new da,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=fc("failFast",!1,w),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=fc("baseRetryDelayMs",5e3,w),this.cb=fc("retryDelaySeedMs",1e4,w),this.Wa=fc("forwardChannelMaxRetries",2,w),this.wa=fc("forwardChannelRequestTimeoutMs",2e4,w),this.pa=w&&w.xmlHttpFactory||void 0,this.Xa=w&&w.Tb||void 0,this.Ca=w&&w.useFetchStreams||!1,this.L=void 0,this.J=w&&w.supportsCrossDomainXhr||!1,this.K="",this.h=new qs(w&&w.concurrentRequestLimit),this.Da=new cc,this.P=w&&w.fastHandshake||!1,this.O=w&&w.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=w&&w.Rb||!1,w&&w.xa&&this.j.xa(),w&&w.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&w&&w.detectBufferingProxy||!1,this.ja=void 0,w&&w.longPollingTimeout&&0<w.longPollingTimeout&&(this.ja=w.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Tu.prototype,t.la=8,t.G=1,t.connect=function(w,L,V,$){kn(0),this.W=w,this.H=L||{},V&&$!==void 0&&(this.H.OSID=V,this.H.OAID=$),this.F=this.X,this.I=Op(this,null,this.W),Du(this)};function Ff(w){if(Sp(w),w.G==3){var L=w.U++,V=Xi(w.I);if(fn(V,"SID",w.K),fn(V,"RID",L),fn(V,"TYPE","terminate"),hc(w,V),L=new Si(w,w.j,L),L.L=2,L.v=sc(Xi(V)),V=!1,o.navigator&&o.navigator.sendBeacon)try{V=o.navigator.sendBeacon(L.v.toString(),"")}catch{}!V&&o.Image&&(new Image().src=L.v,V=!0),V||(L.g=Mp(L.j,null),L.g.ea(L.v)),L.F=Date.now(),nc(L)}Rp(w)}function Iu(w){w.g&&(pc(w),w.g.cancel(),w.g=null)}function Sp(w){Iu(w),w.u&&(o.clearTimeout(w.u),w.u=null),Ru(w),w.h.cancel(),w.s&&(typeof w.s=="number"&&o.clearTimeout(w.s),w.s=null)}function Du(w){if(!xu(w.h)&&!w.s){w.s=!0;var L=w.Ga;W||fe(),K||(W(),K=!0),Z.add(L,w),w.B=0}}function Qy(w,L){return wu(w.h)>=w.h.j-(w.s?1:0)?!1:w.s?(w.i=L.D.concat(w.i),!0):w.G==1||w.G==2||w.B>=(w.Va?0:w.Wa)?!1:(w.s=ur(g(w.Ga,w,L),Uf(w,w.B)),w.B++,!0)}t.Ga=function(w){if(this.s)if(this.s=null,this.G==1){if(!w){this.U=Math.floor(1e5*Math.random()),w=this.U++;const se=new Si(this,this.j,w);let ye=this.o;if(this.S&&(ye?(ye=D(ye),B(ye,this.S)):ye=this.S),this.m!==null||this.O||(se.H=ye,ye=null),this.P)e:{for(var L=0,V=0;V<this.i.length;V++){t:{var $=this.i[V];if("__data__"in $.map&&($=$.map.__data__,typeof $=="string")){$=$.length;break t}$=void 0}if($===void 0)break;if(L+=$,4096<L){L=V;break e}if(L===4096||V===this.i.length-1){L=V+1;break e}}L=1e3}else L=1e3;L=Cp(this,se,L),V=Xi(this.I),fn(V,"RID",w),fn(V,"CVER",22),this.D&&fn(V,"X-HTTP-Session-Id",this.D),hc(this,V),ye&&(this.O?L="headers="+encodeURIComponent(String(Bf(ye)))+"&"+L:this.m&&Nr(V,this.m,ye)),bu(this.h,se),this.Ua&&fn(V,"TYPE","init"),this.P?(fn(V,"$req",L),fn(V,"SID","null"),se.T=!0,Na(se,V,null)):Na(se,V,L),this.G=2}}else this.G==3&&(w?jf(this,w):this.i.length==0||xu(this.h)||jf(this))};function jf(w,L){var V;L?V=L.l:V=w.U++;const $=Xi(w.I);fn($,"SID",w.K),fn($,"RID",V),fn($,"AID",w.T),hc(w,$),w.m&&w.o&&Nr($,w.m,w.o),V=new Si(w,w.j,V,w.B+1),w.m===null&&(V.H=w.o),L&&(w.i=L.D.concat(w.i)),L=Cp(w,V,1e3),V.I=Math.round(.5*w.wa)+Math.round(.5*w.wa*Math.random()),bu(w.h,V),Na(V,$,L)}function hc(w,L){w.H&&F(w.H,function(V,$){fn(L,$,V)}),w.l&&Mf({},function(V,$){fn(L,$,V)})}function Cp(w,L,V){V=Math.min(w.i.length,V);var $=w.l?g(w.l.Na,w.l,w):null;e:{var se=w.i;let ye=-1;for(;;){const Fe=["count="+V];ye==-1?0<V?(ye=se[0].g,Fe.push("ofs="+ye)):ye=0:Fe.push("ofs="+ye);let Lt=!0;for(let wr=0;wr<V;wr++){let Bt=se[wr].g;const Lr=se[wr].map;if(Bt-=ye,0>Bt)ye=Math.max(0,se[wr].g-100),Lt=!1;else try{ls(Lr,Fe,"req"+Bt+"_")}catch{$&&$(Lr)}}if(Lt){$=Fe.join("&");break e}}}return w=w.i.splice(0,V),L.D=w,$}function Tp(w){if(!w.g&&!w.u){w.Y=1;var L=w.Fa;W||fe(),K||(W(),K=!0),Z.add(L,w),w.v=0}}function Vf(w){return w.g||w.u||3<=w.v?!1:(w.Y++,w.u=ur(g(w.Fa,w),Uf(w,w.v)),w.v++,!0)}t.Fa=function(){if(this.u=null,Ip(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var w=2*this.R;this.j.info("BP detection timer enabled: "+w),this.A=ur(g(this.ab,this),w)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,kn(10),Iu(this),Ip(this))};function pc(w){w.A!=null&&(o.clearTimeout(w.A),w.A=null)}function Ip(w){w.g=new Si(w,w.j,"rpc",w.Y),w.m===null&&(w.g.H=w.o),w.g.O=0;var L=Xi(w.qa);fn(L,"RID","rpc"),fn(L,"SID",w.K),fn(L,"AID",w.T),fn(L,"CI",w.F?"0":"1"),!w.F&&w.ja&&fn(L,"TO",w.ja),fn(L,"TYPE","xmlhttp"),hc(w,L),w.m&&w.o&&Nr(L,w.m,w.o),w.L&&(w.g.I=w.L);var V=w.g;w=w.ia,V.L=1,V.v=sc(Xi(L)),V.m=null,V.P=!0,Ys(V,w)}t.Za=function(){this.C!=null&&(this.C=null,Iu(this),Vf(this),kn(19))};function Ru(w){w.C!=null&&(o.clearTimeout(w.C),w.C=null)}function Dp(w,L){var V=null;if(w.g==L){Ru(w),pc(w),w.g=null;var $=2}else if(Rf(w.h,L))V=L.D,Ci(w.h,L),$=1;else return;if(w.G!=0){if(L.o)if($==1){V=L.m?L.m.length:0,L=Date.now()-L.F;var se=w.B;$=Gs(),at($,new xr($,V)),Du(w)}else Tp(w);else if(se=L.s,se==3||se==0&&0<L.X||!($==1&&Qy(w,L)||$==2&&Vf(w)))switch(V&&0<V.length&&(L=w.h,L.i=L.i.concat(V)),se){case 1:eo(w,5);break;case 4:eo(w,10);break;case 3:eo(w,6);break;default:eo(w,2)}}}function Uf(w,L){let V=w.Ta+Math.floor(Math.random()*w.cb);return w.isActive()||(V*=2),V*L}function eo(w,L){if(w.j.info("Error code "+L),L==2){var V=g(w.fb,w),$=w.Xa;const se=!$;$=new dr($||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||ac($,"https"),sc($),se?lc($.toString(),V):La($.toString(),V)}else kn(2);w.G=0,w.l&&w.l.sa(L),Rp(w),Sp(w)}t.fb=function(w){w?(this.j.info("Successfully pinged google.com"),kn(2)):(this.j.info("Failed to ping google.com"),kn(1))};function Rp(w){if(w.G=0,w.ka=[],w.l){const L=Of(w.h);(L.length!=0||w.i.length!=0)&&(A(w.ka,L),A(w.ka,w.i),w.h.i.length=0,b(w.i),w.i.length=0),w.l.ra()}}function Op(w,L,V){var $=V instanceof dr?Xi(V):new dr(V);if($.g!="")L&&($.g=L+"."+$.g),Go($,$.s);else{var se=o.location;$=se.protocol,L=L?L+"."+se.hostname:se.hostname,se=+se.port;var ye=new dr(null);$&&ac(ye,$),L&&(ye.g=L),se&&Go(ye,se),V&&(ye.l=V),$=ye}return V=w.D,L=w.ya,V&&L&&fn($,V,L),fn($,"VER",w.la),hc(w,$),$}function Mp(w,L,V){if(L&&!w.J)throw Error("Can't create secondary domain capable XhrIo object.");return L=w.Ca&&!w.pa?new nn(new Wo({eb:V})):new nn(w.pa),L.Ha(w.J),L}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Pp(){}t=Pp.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Ou(){}Ou.prototype.g=function(w,L){return new Ti(w,L)};function Ti(w,L){rt.call(this),this.g=new Tu(L),this.l=w,this.h=L&&L.messageUrlParams||null,w=L&&L.messageHeaders||null,L&&L.clientProtocolHeaderRequired&&(w?w["X-Client-Protocol"]="webchannel":w={"X-Client-Protocol":"webchannel"}),this.g.o=w,w=L&&L.initMessageHeaders||null,L&&L.messageContentType&&(w?w["X-WebChannel-Content-Type"]=L.messageContentType:w={"X-WebChannel-Content-Type":L.messageContentType}),L&&L.va&&(w?w["X-WebChannel-Client-Profile"]=L.va:w={"X-WebChannel-Client-Profile":L.va}),this.g.S=w,(w=L&&L.Sb)&&!S(w)&&(this.g.m=w),this.v=L&&L.supportsCrossDomainXhr||!1,this.u=L&&L.sendRawJson||!1,(L=L&&L.httpSessionIdParam)&&!S(L)&&(this.g.D=L,w=this.h,w!==null&&L in w&&(w=this.h,L in w&&delete w[L])),this.j=new fs(this)}x(Ti,rt),Ti.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ti.prototype.close=function(){Ff(this.g)},Ti.prototype.o=function(w){var L=this.g;if(typeof w=="string"){var V={};V.__data__=w,w=V}else this.u&&(V={},V.__data__=qt(w),w=V);L.i.push(new wp(L.Ya++,w)),L.G==3&&Du(L)},Ti.prototype.N=function(){this.g.l=null,delete this.j,Ff(this.g),delete this.g,Ti.aa.N.call(this)};function kp(w){lr.call(this),w.__headers__&&(this.headers=w.__headers__,this.statusCode=w.__status__,delete w.__headers__,delete w.__status__);var L=w.__sm__;if(L){e:{for(const V in L){w=V;break e}w=void 0}(this.i=w)&&(w=this.i,L=L!==null&&w in L?L[w]:void 0),this.data=L}else this.data=w}x(kp,lr);function Np(){Jl.call(this),this.status=1}x(Np,Jl);function fs(w){this.g=w}x(fs,Pp),fs.prototype.ua=function(){at(this.g,"a")},fs.prototype.ta=function(w){at(this.g,new kp(w))},fs.prototype.sa=function(w){at(this.g,new Np)},fs.prototype.ra=function(){at(this.g,"b")},Ou.prototype.createWebChannel=Ou.prototype.g,Ti.prototype.send=Ti.prototype.o,Ti.prototype.open=Ti.prototype.m,Ti.prototype.close=Ti.prototype.close,T4=function(){return new Ou},C4=function(){return Gs()},S4=ua,ew={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},zo.NO_ERROR=0,zo.TIMEOUT=8,zo.HTTP_ERROR=6,mm=zo,Ws.COMPLETE="complete",E4=Ws,Xr.EventType=Ei,Ei.OPEN="a",Ei.CLOSE="b",Ei.ERROR="c",Ei.MESSAGE="d",rt.prototype.listen=rt.prototype.K,Wh=Xr,nn.prototype.listenOnce=nn.prototype.L,nn.prototype.getLastError=nn.prototype.Ka,nn.prototype.getLastErrorCode=nn.prototype.Ba,nn.prototype.getStatus=nn.prototype.Z,nn.prototype.getResponseJson=nn.prototype.Oa,nn.prototype.getResponseText=nn.prototype.oa,nn.prototype.send=nn.prototype.ea,nn.prototype.setWithCredentials=nn.prototype.Ha,A4=nn}).apply(typeof Fg<"u"?Fg:typeof self<"u"?self:typeof window<"u"?window:{});const DT="@firebase/firestore",RT="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yi{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}yi.UNAUTHENTICATED=new yi(null),yi.GOOGLE_CREDENTIALS=new yi("google-credentials-uid"),yi.FIRST_PARTY=new yi("first-party-uid"),yi.MOCK_USER=new yi("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let pf="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tu=new lb("@firebase/firestore");function md(){return tu.logLevel}function Ge(t,...e){if(tu.logLevel<=Pt.DEBUG){const n=e.map(wb);tu.debug(`Firestore (${pf}): ${t}`,...n)}}function Io(t,...e){if(tu.logLevel<=Pt.ERROR){const n=e.map(wb);tu.error(`Firestore (${pf}): ${t}`,...n)}}function Fl(t,...e){if(tu.logLevel<=Pt.WARN){const n=e.map(wb);tu.warn(`Firestore (${pf}): ${t}`,...n)}}function wb(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tt(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,I4(t,r,n)}function I4(t,e,n){let r=`FIRESTORE (${pf}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Io(r),new Error(r)}function Ht(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||I4(e,i,r)}function gt(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ae={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ue extends Lo{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ms{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D4{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class VB{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(yi.UNAUTHENTICATED))}shutdown(){}}class UB{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class HB{constructor(e){this.t=e,this.currentUser=yi.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ht(this.o===void 0,42304);let r=this.i;const i=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let a=new Ms;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new Ms,e.enqueueRetryable(()=>i(this.currentUser))};const s=()=>{const c=a;e.enqueueRetryable(async()=>{await c.promise,await i(this.currentUser)})},o=c=>{Ge("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(c=>o(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?o(c):(Ge("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Ms)}},0),s()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(Ge("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ht(typeof r.accessToken=="string",31837,{l:r}),new D4(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ht(e===null||typeof e=="string",2055,{h:e}),new yi(e)}}class zB{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=yi.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class $B{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new zB(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(yi.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class OT{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class GB{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Ca(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Ht(this.o===void 0,3512);const r=a=>{a.error!=null&&Ge("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const s=a.token!==this.m;return this.m=a.token,Ge("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?n(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const i=a=>{Ge("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(a=>i(a)),setTimeout(()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?i(a):Ge("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new OT(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ht(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new OT(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WB(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R4(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bb{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=WB(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<n&&(r+=e.charAt(i[a]%62))}return r}}function St(t,e){return t<e?-1:t>e?1:0}function tw(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=t.codePointAt(n),i=e.codePointAt(n);if(r!==i){if(r<128&&i<128)return St(r,i);{const a=R4(),s=YB(a.encode(MT(t,n)),a.encode(MT(e,n)));return s!==0?s:St(r,i)}}n+=r>65535?2:1}return St(t.length,e.length)}function MT(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function YB(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return St(t[n],e[n]);return St(t.length,e.length)}function Wd(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PT="__name__";class ws{constructor(e,n,r){n===void 0?n=0:n>e.length&&tt(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&tt(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return ws.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof ws?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const a=ws.compareSegments(e.get(i),n.get(i));if(a!==0)return a}return St(e.length,n.length)}static compareSegments(e,n){const r=ws.isNumericId(e),i=ws.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?ws.extractNumericId(e).compare(ws.extractNumericId(n)):tw(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Pl.fromString(e.substring(4,e.length-2))}}class un extends ws{construct(e,n,r){return new un(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Ue(Ae.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new un(n)}static emptyPath(){return new un([])}}const qB=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class si extends ws{construct(e,n,r){return new si(e,n,r)}static isValidIdentifier(e){return qB.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),si.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===PT}static keyField(){return new si([PT])}static fromServerFormat(e){const n=[];let r="",i=0;const a=()=>{if(r.length===0)throw new Ue(Ae.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let s=!1;for(;i<e.length;){const o=e[i];if(o==="\\"){if(i+1===e.length)throw new Ue(Ae.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new Ue(Ae.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else o==="`"?(s=!s,i++):o!=="."||s?(r+=o,i++):(a(),i++)}if(a(),s)throw new Ue(Ae.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new si(n)}static emptyPath(){return new si([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Je{constructor(e){this.path=e}static fromPath(e){return new Je(un.fromString(e))}static fromName(e){return new Je(un.fromString(e).popFirst(5))}static empty(){return new Je(un.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&un.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return un.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Je(new un(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _b(t,e,n){if(!n)throw new Ue(Ae.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function XB(t,e,n,r){if(e===!0&&r===!0)throw new Ue(Ae.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function kT(t){if(!Je.isDocumentKey(t))throw new Ue(Ae.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function NT(t){if(Je.isDocumentKey(t))throw new Ue(Ae.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function O4(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function z1(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":tt(12329,{type:typeof t})}function li(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Ue(Ae.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=z1(t);throw new Ue(Ae.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function KB(t,e){if(e<=0)throw new Ue(Ae.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vr(t,e){const n={typeString:t};return e&&(n.value=e),n}function G0(t,e){if(!O4(t))throw new Ue(Ae.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const i=e[r].typeString,a="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const s=t[r];if(i&&typeof s!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(a!==void 0&&s!==a.value){n=`Expected '${r}' field to equal '${a.value}'`;break}}if(n)throw new Ue(Ae.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LT=-62135596800,BT=1e6;class Mn{static now(){return Mn.fromMillis(Date.now())}static fromDate(e){return Mn.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*BT);return new Mn(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Ue(Ae.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Ue(Ae.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<LT)throw new Ue(Ae.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ue(Ae.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/BT}_compareTo(e){return this.seconds===e.seconds?St(this.nanoseconds,e.nanoseconds):St(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Mn._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(G0(e,Mn._jsonSchema))return new Mn(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-LT;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Mn._jsonSchemaVersion="firestore/timestamp/1.0",Mn._jsonSchema={type:vr("string",Mn._jsonSchemaVersion),seconds:vr("number"),nanoseconds:vr("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lt{static fromTimestamp(e){return new lt(e)}static min(){return new lt(new Mn(0,0))}static max(){return new lt(new Mn(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v0=-1;function QB(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=lt.fromTimestamp(r===1e9?new Mn(n+1,0):new Mn(n,r));return new jl(i,Je.empty(),e)}function ZB(t){return new jl(t.readTime,t.key,v0)}class jl{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new jl(lt.min(),Je.empty(),v0)}static max(){return new jl(lt.max(),Je.empty(),v0)}}function JB(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Je.comparator(t.documentKey,e.documentKey),n!==0?n:St(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eF="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class tF{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gf(t){if(t.code!==Ae.FAILED_PRECONDITION||t.message!==eF)throw t;Ge("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ie{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&tt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new Ie((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(n,a).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof Ie?n:Ie.resolve(n)}catch(n){return Ie.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):Ie.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):Ie.reject(n)}static resolve(e){return new Ie((n,r)=>{n(e)})}static reject(e){return new Ie((n,r)=>{r(e)})}static waitFor(e){return new Ie((n,r)=>{let i=0,a=0,s=!1;e.forEach(o=>{++i,o.next(()=>{++a,s&&a===i&&n()},c=>r(c))}),s=!0,a===i&&n()})}static or(e){let n=Ie.resolve(!1);for(const r of e)n=n.next(i=>i?Ie.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,a)=>{r.push(n.call(this,i,a))}),this.waitFor(r)}static mapArray(e,n){return new Ie((r,i)=>{const a=e.length,s=new Array(a);let o=0;for(let c=0;c<a;c++){const d=c;n(e[d]).next(f=>{s[d]=f,++o,o===a&&r(s)},f=>i(f))}})}static doWhile(e,n){return new Ie((r,i)=>{const a=()=>{e()===!0?n().next(()=>{a()},i):r()};a()})}}function nF(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function mf(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $1{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this._e(r),this.ae=r=>n.writeSequenceNumber(r))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}$1.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ab=-1;function W0(t){return t==null}function Bm(t){return t===0&&1/t==-1/0}function rF(t){return typeof t=="number"&&Number.isInteger(t)&&!Bm(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M4="";function iF(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=FT(e)),e=aF(t.get(n),e);return FT(e)}function aF(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const a=t.charAt(i);switch(a){case"\0":n+="";break;case M4:n+="";break;default:n+=a}}return n}function FT(t){return t+M4+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jT(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ql(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function P4(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wn{constructor(e,n){this.comparator=e,this.root=n||ii.EMPTY}insert(e,n){return new Wn(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,ii.BLACK,null,null))}remove(e){return new Wn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ii.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new jg(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new jg(this.root,e,this.comparator,!1)}getReverseIterator(){return new jg(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new jg(this.root,e,this.comparator,!0)}}class jg{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=n?r(e.key,n):1,n&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ii{constructor(e,n,r,i,a){this.key=e,this.value=n,this.color=r??ii.RED,this.left=i??ii.EMPTY,this.right=a??ii.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,a){return new ii(e??this.key,n??this.value,r??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,n,r),null):a===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return ii.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return ii.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ii.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ii.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw tt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw tt(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw tt(27949);return e+(this.isRed()?0:1)}}ii.EMPTY=null,ii.RED=!0,ii.BLACK=!1;ii.EMPTY=new class{constructor(){this.size=0}get key(){throw tt(57766)}get value(){throw tt(16141)}get color(){throw tt(16727)}get left(){throw tt(29726)}get right(){throw tt(36894)}copy(e,n,r,i,a){return this}insert(e,n,r){return new ii(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mr{constructor(e){this.comparator=e,this.data=new Wn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new VT(this.data.getIterator())}getIteratorFrom(e){return new VT(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Mr)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,a=r.getNext().key;if(this.comparator(i,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Mr(this.comparator);return n.data=e,n}}class VT{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aa{constructor(e){this.fields=e,e.sort(si.comparator)}static empty(){return new aa([])}unionWith(e){let n=new Mr(si.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new aa(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Wd(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k4 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ui{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new k4("Invalid base64 string: "+a):a}}(e);return new ui(n)}static fromUint8Array(e){const n=function(i){let a="";for(let s=0;s<i.length;++s)a+=String.fromCharCode(i[s]);return a}(e);return new ui(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return St(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ui.EMPTY_BYTE_STRING=new ui("");const sF=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Vl(t){if(Ht(!!t,39018),typeof t=="string"){let e=0;const n=sF.exec(t);if(Ht(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:rr(t.seconds),nanos:rr(t.nanos)}}function rr(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Ul(t){return typeof t=="string"?ui.fromBase64String(t):ui.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N4="server_timestamp",L4="__type__",B4="__previous_value__",F4="__local_write_time__";function Eb(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[L4])===null||n===void 0?void 0:n.stringValue)===N4}function G1(t){const e=t.mapValue.fields[B4];return Eb(e)?G1(e):e}function x0(t){const e=Vl(t.mapValue.fields[F4].timestampValue);return new Mn(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oF{constructor(e,n,r,i,a,s,o,c,d,f){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.longPollingOptions=c,this.useFetchStreams=d,this.isUsingEmulator=f}}const Fm="(default)";class w0{constructor(e,n){this.projectId=e,this.database=n||Fm}static empty(){return new w0("","")}get isDefaultDatabase(){return this.database===Fm}isEqual(e){return e instanceof w0&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j4="__type__",lF="__max__",Vg={mapValue:{}},V4="__vector__",jm="value";function Hl(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Eb(t)?4:uF(t)?9007199254740991:cF(t)?10:11:tt(28295,{value:t})}function Vs(t,e){if(t===e)return!0;const n=Hl(t);if(n!==Hl(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return x0(t).isEqual(x0(e));case 3:return function(i,a){if(typeof i.timestampValue=="string"&&typeof a.timestampValue=="string"&&i.timestampValue.length===a.timestampValue.length)return i.timestampValue===a.timestampValue;const s=Vl(i.timestampValue),o=Vl(a.timestampValue);return s.seconds===o.seconds&&s.nanos===o.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,a){return Ul(i.bytesValue).isEqual(Ul(a.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,a){return rr(i.geoPointValue.latitude)===rr(a.geoPointValue.latitude)&&rr(i.geoPointValue.longitude)===rr(a.geoPointValue.longitude)}(t,e);case 2:return function(i,a){if("integerValue"in i&&"integerValue"in a)return rr(i.integerValue)===rr(a.integerValue);if("doubleValue"in i&&"doubleValue"in a){const s=rr(i.doubleValue),o=rr(a.doubleValue);return s===o?Bm(s)===Bm(o):isNaN(s)&&isNaN(o)}return!1}(t,e);case 9:return Wd(t.arrayValue.values||[],e.arrayValue.values||[],Vs);case 10:case 11:return function(i,a){const s=i.mapValue.fields||{},o=a.mapValue.fields||{};if(jT(s)!==jT(o))return!1;for(const c in s)if(s.hasOwnProperty(c)&&(o[c]===void 0||!Vs(s[c],o[c])))return!1;return!0}(t,e);default:return tt(52216,{left:t})}}function b0(t,e){return(t.values||[]).find(n=>Vs(n,e))!==void 0}function Yd(t,e){if(t===e)return 0;const n=Hl(t),r=Hl(e);if(n!==r)return St(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return St(t.booleanValue,e.booleanValue);case 2:return function(a,s){const o=rr(a.integerValue||a.doubleValue),c=rr(s.integerValue||s.doubleValue);return o<c?-1:o>c?1:o===c?0:isNaN(o)?isNaN(c)?0:-1:1}(t,e);case 3:return UT(t.timestampValue,e.timestampValue);case 4:return UT(x0(t),x0(e));case 5:return tw(t.stringValue,e.stringValue);case 6:return function(a,s){const o=Ul(a),c=Ul(s);return o.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(a,s){const o=a.split("/"),c=s.split("/");for(let d=0;d<o.length&&d<c.length;d++){const f=St(o[d],c[d]);if(f!==0)return f}return St(o.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(a,s){const o=St(rr(a.latitude),rr(s.latitude));return o!==0?o:St(rr(a.longitude),rr(s.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return HT(t.arrayValue,e.arrayValue);case 10:return function(a,s){var o,c,d,f;const p=a.fields||{},g=s.fields||{},m=(o=p[jm])===null||o===void 0?void 0:o.arrayValue,x=(c=g[jm])===null||c===void 0?void 0:c.arrayValue,b=St(((d=m==null?void 0:m.values)===null||d===void 0?void 0:d.length)||0,((f=x==null?void 0:x.values)===null||f===void 0?void 0:f.length)||0);return b!==0?b:HT(m,x)}(t.mapValue,e.mapValue);case 11:return function(a,s){if(a===Vg.mapValue&&s===Vg.mapValue)return 0;if(a===Vg.mapValue)return 1;if(s===Vg.mapValue)return-1;const o=a.fields||{},c=Object.keys(o),d=s.fields||{},f=Object.keys(d);c.sort(),f.sort();for(let p=0;p<c.length&&p<f.length;++p){const g=tw(c[p],f[p]);if(g!==0)return g;const m=Yd(o[c[p]],d[f[p]]);if(m!==0)return m}return St(c.length,f.length)}(t.mapValue,e.mapValue);default:throw tt(23264,{le:n})}}function UT(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return St(t,e);const n=Vl(t),r=Vl(e),i=St(n.seconds,r.seconds);return i!==0?i:St(n.nanos,r.nanos)}function HT(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const a=Yd(n[i],r[i]);if(a)return a}return St(n.length,r.length)}function qd(t){return nw(t)}function nw(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Vl(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Ul(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return Je.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const a of n.values||[])i?i=!1:r+=",",r+=nw(a);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",a=!0;for(const s of r)a?a=!1:i+=",",i+=`${s}:${nw(n.fields[s])}`;return i+"}"}(t.mapValue):tt(61005,{value:t})}function ym(t){switch(Hl(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=G1(t);return e?16+ym(e):16;case 5:return 2*t.stringValue.length;case 6:return Ul(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,a)=>i+ym(a),0)}(t.arrayValue);case 10:case 11:return function(r){let i=0;return ql(r.fields,(a,s)=>{i+=a.length+ym(s)}),i}(t.mapValue);default:throw tt(13486,{value:t})}}function zT(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function rw(t){return!!t&&"integerValue"in t}function Sb(t){return!!t&&"arrayValue"in t}function $T(t){return!!t&&"nullValue"in t}function GT(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function vm(t){return!!t&&"mapValue"in t}function cF(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[j4])===null||n===void 0?void 0:n.stringValue)===V4}function o0(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return ql(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=o0(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=o0(t.arrayValue.values[n]);return e}return Object.assign({},t)}function uF(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===lF}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pi{constructor(e){this.value=e}static empty(){return new Pi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!vm(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=o0(n)}setAll(e){let n=si.emptyPath(),r={},i=[];e.forEach((s,o)=>{if(!n.isImmediateParentOf(o)){const c=this.getFieldsMap(n);this.applyChanges(c,r,i),r={},i=[],n=o.popLast()}s?r[o.lastSegment()]=o0(s):i.push(o.lastSegment())});const a=this.getFieldsMap(n);this.applyChanges(a,r,i)}delete(e){const n=this.field(e.popLast());vm(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Vs(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];vm(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){ql(n,(i,a)=>e[i]=a);for(const i of r)delete e[i]}clone(){return new Pi(o0(this.value))}}function U4(t){const e=[];return ql(t.fields,(n,r)=>{const i=new si([n]);if(vm(r)){const a=U4(r.mapValue).fields;if(a.length===0)e.push(i);else for(const s of a)e.push(i.child(s))}else e.push(i)}),new aa(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zr{constructor(e,n,r,i,a,s,o){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=a,this.data=s,this.documentState=o}static newInvalidDocument(e){return new zr(e,0,lt.min(),lt.min(),lt.min(),Pi.empty(),0)}static newFoundDocument(e,n,r,i){return new zr(e,1,n,lt.min(),r,i,0)}static newNoDocument(e,n){return new zr(e,2,n,lt.min(),lt.min(),Pi.empty(),0)}static newUnknownDocument(e,n){return new zr(e,3,n,lt.min(),lt.min(),Pi.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(lt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Pi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Pi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=lt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof zr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new zr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vm{constructor(e,n){this.position=e,this.inclusive=n}}function WT(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const a=e[i],s=t.position[i];if(a.field.isKeyField()?r=Je.comparator(Je.fromName(s.referenceValue),n.key):r=Yd(s,n.data.field(a.field)),a.dir==="desc"&&(r*=-1),r!==0)break}return r}function YT(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Vs(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _0{constructor(e,n="asc"){this.field=e,this.dir=n}}function dF(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H4{}class mr extends H4{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new hF(e,n,r):n==="array-contains"?new mF(e,r):n==="in"?new yF(e,r):n==="not-in"?new vF(e,r):n==="array-contains-any"?new xF(e,r):new mr(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new pF(e,r):new gF(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Yd(n,this.value)):n!==null&&Hl(this.value)===Hl(n)&&this.matchesComparison(Yd(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return tt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ja extends H4{constructor(e,n){super(),this.filters=e,this.op=n,this.he=null}static create(e,n){return new Ja(e,n)}matches(e){return z4(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function z4(t){return t.op==="and"}function $4(t){return fF(t)&&z4(t)}function fF(t){for(const e of t.filters)if(e instanceof Ja)return!1;return!0}function iw(t){if(t instanceof mr)return t.field.canonicalString()+t.op.toString()+qd(t.value);if($4(t))return t.filters.map(e=>iw(e)).join(",");{const e=t.filters.map(n=>iw(n)).join(",");return`${t.op}(${e})`}}function G4(t,e){return t instanceof mr?function(r,i){return i instanceof mr&&r.op===i.op&&r.field.isEqual(i.field)&&Vs(r.value,i.value)}(t,e):t instanceof Ja?function(r,i){return i instanceof Ja&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((a,s,o)=>a&&G4(s,i.filters[o]),!0):!1}(t,e):void tt(19439)}function W4(t){return t instanceof mr?function(n){return`${n.field.canonicalString()} ${n.op} ${qd(n.value)}`}(t):t instanceof Ja?function(n){return n.op.toString()+" {"+n.getFilters().map(W4).join(" ,")+"}"}(t):"Filter"}class hF extends mr{constructor(e,n,r){super(e,n,r),this.key=Je.fromName(r.referenceValue)}matches(e){const n=Je.comparator(e.key,this.key);return this.matchesComparison(n)}}class pF extends mr{constructor(e,n){super(e,"in",n),this.keys=Y4("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class gF extends mr{constructor(e,n){super(e,"not-in",n),this.keys=Y4("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function Y4(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>Je.fromName(r.referenceValue))}class mF extends mr{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Sb(n)&&b0(n.arrayValue,this.value)}}class yF extends mr{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&b0(this.value.arrayValue,n)}}class vF extends mr{constructor(e,n){super(e,"not-in",n)}matches(e){if(b0(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!b0(this.value.arrayValue,n)}}class xF extends mr{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Sb(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>b0(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wF{constructor(e,n=null,r=[],i=[],a=null,s=null,o=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=s,this.endAt=o,this.Pe=null}}function qT(t,e=null,n=[],r=[],i=null,a=null,s=null){return new wF(t,e,n,r,i,a,s)}function Cb(t){const e=gt(t);if(e.Pe===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>iw(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(a){return a.field.canonicalString()+a.dir}(r)).join(","),W0(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>qd(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>qd(r)).join(",")),e.Pe=n}return e.Pe}function Tb(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!dF(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!G4(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!YT(t.startAt,e.startAt)&&YT(t.endAt,e.endAt)}function aw(t){return Je.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ou{constructor(e,n=null,r=[],i=[],a=null,s="F",o=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=s,this.startAt=o,this.endAt=c,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function bF(t,e,n,r,i,a,s,o){return new ou(t,e,n,r,i,a,s,o)}function W1(t){return new ou(t)}function XT(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function q4(t){return t.collectionGroup!==null}function l0(t){const e=gt(t);if(e.Te===null){e.Te=[];const n=new Set;for(const a of e.explicitOrderBy)e.Te.push(a),n.add(a.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let o=new Mr(si.comparator);return s.filters.forEach(c=>{c.getFlattenedFilters().forEach(d=>{d.isInequality()&&(o=o.add(d.field))})}),o})(e).forEach(a=>{n.has(a.canonicalString())||a.isKeyField()||e.Te.push(new _0(a,r))}),n.has(si.keyField().canonicalString())||e.Te.push(new _0(si.keyField(),r))}return e.Te}function Ps(t){const e=gt(t);return e.Ie||(e.Ie=_F(e,l0(t))),e.Ie}function _F(t,e){if(t.limitType==="F")return qT(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const a=i.dir==="desc"?"asc":"desc";return new _0(i.field,a)});const n=t.endAt?new Vm(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Vm(t.startAt.position,t.startAt.inclusive):null;return qT(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function sw(t,e){const n=t.filters.concat([e]);return new ou(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Um(t,e,n){return new ou(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Y1(t,e){return Tb(Ps(t),Ps(e))&&t.limitType===e.limitType}function X4(t){return`${Cb(Ps(t))}|lt:${t.limitType}`}function yd(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>W4(i)).join(", ")}]`),W0(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>qd(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>qd(i)).join(",")),`Target(${r})`}(Ps(t))}; limitType=${t.limitType})`}function q1(t,e){return e.isFoundDocument()&&function(r,i){const a=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(a):Je.isDocumentKey(r.path)?r.path.isEqual(a):r.path.isImmediateParentOf(a)}(t,e)&&function(r,i){for(const a of l0(r))if(!a.field.isKeyField()&&i.data.field(a.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const a of r.filters)if(!a.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(s,o,c){const d=WT(s,o,c);return s.inclusive?d<=0:d<0}(r.startAt,l0(r),i)||r.endAt&&!function(s,o,c){const d=WT(s,o,c);return s.inclusive?d>=0:d>0}(r.endAt,l0(r),i))}(t,e)}function AF(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function K4(t){return(e,n)=>{let r=!1;for(const i of l0(t)){const a=EF(i,e,n);if(a!==0)return a;r=r||i.field.isKeyField()}return 0}}function EF(t,e,n){const r=t.field.isKeyField()?Je.comparator(e.key,n.key):function(a,s,o){const c=s.data.field(a),d=o.data.field(a);return c!==null&&d!==null?Yd(c,d):tt(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return tt(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lu{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,a]of r)if(this.equalsFn(i,e))return a}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){ql(this.inner,(n,r)=>{for(const[i,a]of r)e(i,a)})}isEmpty(){return P4(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SF=new Wn(Je.comparator);function Do(){return SF}const Q4=new Wn(Je.comparator);function Yh(...t){let e=Q4;for(const n of t)e=e.insert(n.key,n);return e}function Z4(t){let e=Q4;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Hc(){return c0()}function J4(){return c0()}function c0(){return new lu(t=>t.toString(),(t,e)=>t.isEqual(e))}const CF=new Wn(Je.comparator),TF=new Mr(Je.comparator);function kt(...t){let e=TF;for(const n of t)e=e.add(n);return e}const IF=new Mr(St);function DF(){return IF}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ib(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Bm(e)?"-0":e}}function eO(t){return{integerValue:""+t}}function RF(t,e){return rF(e)?eO(e):Ib(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X1{constructor(){this._=void 0}}function OF(t,e,n){return t instanceof A0?function(i,a){const s={fields:{[L4]:{stringValue:N4},[F4]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return a&&Eb(a)&&(a=G1(a)),a&&(s.fields[B4]=a),{mapValue:s}}(n,e):t instanceof E0?nO(t,e):t instanceof S0?rO(t,e):function(i,a){const s=tO(i,a),o=KT(s)+KT(i.Ee);return rw(s)&&rw(i.Ee)?eO(o):Ib(i.serializer,o)}(t,e)}function MF(t,e,n){return t instanceof E0?nO(t,e):t instanceof S0?rO(t,e):n}function tO(t,e){return t instanceof Hm?function(r){return rw(r)||function(a){return!!a&&"doubleValue"in a}(r)}(e)?e:{integerValue:0}:null}class A0 extends X1{}class E0 extends X1{constructor(e){super(),this.elements=e}}function nO(t,e){const n=iO(e);for(const r of t.elements)n.some(i=>Vs(i,r))||n.push(r);return{arrayValue:{values:n}}}class S0 extends X1{constructor(e){super(),this.elements=e}}function rO(t,e){let n=iO(e);for(const r of t.elements)n=n.filter(i=>!Vs(i,r));return{arrayValue:{values:n}}}class Hm extends X1{constructor(e,n){super(),this.serializer=e,this.Ee=n}}function KT(t){return rr(t.integerValue||t.doubleValue)}function iO(t){return Sb(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PF{constructor(e,n){this.field=e,this.transform=n}}function kF(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof E0&&i instanceof E0||r instanceof S0&&i instanceof S0?Wd(r.elements,i.elements,Vs):r instanceof Hm&&i instanceof Hm?Vs(r.Ee,i.Ee):r instanceof A0&&i instanceof A0}(t.transform,e.transform)}class NF{constructor(e,n){this.version=e,this.transformResults=n}}class yr{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new yr}static exists(e){return new yr(void 0,e)}static updateTime(e){return new yr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function xm(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class K1{}function aO(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new q0(t.key,yr.none()):new Y0(t.key,t.data,yr.none());{const n=t.data,r=Pi.empty();let i=new Mr(si.comparator);for(let a of e.fields)if(!i.has(a)){let s=n.field(a);s===null&&a.length>1&&(a=a.popLast(),s=n.field(a)),s===null?r.delete(a):r.set(a,s),i=i.add(a)}return new Xl(t.key,r,new aa(i.toArray()),yr.none())}}function LF(t,e,n){t instanceof Y0?function(i,a,s){const o=i.value.clone(),c=ZT(i.fieldTransforms,a,s.transformResults);o.setAll(c),a.convertToFoundDocument(s.version,o).setHasCommittedMutations()}(t,e,n):t instanceof Xl?function(i,a,s){if(!xm(i.precondition,a))return void a.convertToUnknownDocument(s.version);const o=ZT(i.fieldTransforms,a,s.transformResults),c=a.data;c.setAll(sO(i)),c.setAll(o),a.convertToFoundDocument(s.version,c).setHasCommittedMutations()}(t,e,n):function(i,a,s){a.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,n)}function u0(t,e,n,r){return t instanceof Y0?function(a,s,o,c){if(!xm(a.precondition,s))return o;const d=a.value.clone(),f=JT(a.fieldTransforms,c,s);return d.setAll(f),s.convertToFoundDocument(s.version,d).setHasLocalMutations(),null}(t,e,n,r):t instanceof Xl?function(a,s,o,c){if(!xm(a.precondition,s))return o;const d=JT(a.fieldTransforms,c,s),f=s.data;return f.setAll(sO(a)),f.setAll(d),s.convertToFoundDocument(s.version,f).setHasLocalMutations(),o===null?null:o.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(p=>p.field))}(t,e,n,r):function(a,s,o){return xm(a.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):o}(t,e,n)}function BF(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),a=tO(r.transform,i||null);a!=null&&(n===null&&(n=Pi.empty()),n.set(r.field,a))}return n||null}function QT(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Wd(r,i,(a,s)=>kF(a,s))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Y0 extends K1{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Xl extends K1{constructor(e,n,r,i,a=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function sO(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function ZT(t,e,n){const r=new Map;Ht(t.length===n.length,32656,{Ae:n.length,Re:t.length});for(let i=0;i<n.length;i++){const a=t[i],s=a.transform,o=e.data.field(a.field);r.set(a.field,MF(s,o,n[i]))}return r}function JT(t,e,n){const r=new Map;for(const i of t){const a=i.transform,s=n.data.field(i.field);r.set(i.field,OF(a,s,e))}return r}class q0 extends K1{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class oO extends K1{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FF{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&LF(a,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=u0(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=u0(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=J4();return this.mutations.forEach(i=>{const a=e.get(i.key),s=a.overlayedDocument;let o=this.applyToLocalView(s,a.mutatedFields);o=n.has(i.key)?null:o;const c=aO(s,o);c!==null&&r.set(i.key,c),s.isValidDocument()||s.convertToNoDocument(lt.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),kt())}isEqual(e){return this.batchId===e.batchId&&Wd(this.mutations,e.mutations,(n,r)=>QT(n,r))&&Wd(this.baseMutations,e.baseMutations,(n,r)=>QT(n,r))}}class Db{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Ht(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let i=function(){return CF}();const a=e.mutations;for(let s=0;s<a.length;s++)i=i.insert(a[s].key,r[s].version);return new Db(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jF{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VF{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var gr,jt;function lO(t){switch(t){case Ae.OK:return tt(64938);case Ae.CANCELLED:case Ae.UNKNOWN:case Ae.DEADLINE_EXCEEDED:case Ae.RESOURCE_EXHAUSTED:case Ae.INTERNAL:case Ae.UNAVAILABLE:case Ae.UNAUTHENTICATED:return!1;case Ae.INVALID_ARGUMENT:case Ae.NOT_FOUND:case Ae.ALREADY_EXISTS:case Ae.PERMISSION_DENIED:case Ae.FAILED_PRECONDITION:case Ae.ABORTED:case Ae.OUT_OF_RANGE:case Ae.UNIMPLEMENTED:case Ae.DATA_LOSS:return!0;default:return tt(15467,{code:t})}}function cO(t){if(t===void 0)return Io("GRPC error has no .code"),Ae.UNKNOWN;switch(t){case gr.OK:return Ae.OK;case gr.CANCELLED:return Ae.CANCELLED;case gr.UNKNOWN:return Ae.UNKNOWN;case gr.DEADLINE_EXCEEDED:return Ae.DEADLINE_EXCEEDED;case gr.RESOURCE_EXHAUSTED:return Ae.RESOURCE_EXHAUSTED;case gr.INTERNAL:return Ae.INTERNAL;case gr.UNAVAILABLE:return Ae.UNAVAILABLE;case gr.UNAUTHENTICATED:return Ae.UNAUTHENTICATED;case gr.INVALID_ARGUMENT:return Ae.INVALID_ARGUMENT;case gr.NOT_FOUND:return Ae.NOT_FOUND;case gr.ALREADY_EXISTS:return Ae.ALREADY_EXISTS;case gr.PERMISSION_DENIED:return Ae.PERMISSION_DENIED;case gr.FAILED_PRECONDITION:return Ae.FAILED_PRECONDITION;case gr.ABORTED:return Ae.ABORTED;case gr.OUT_OF_RANGE:return Ae.OUT_OF_RANGE;case gr.UNIMPLEMENTED:return Ae.UNIMPLEMENTED;case gr.DATA_LOSS:return Ae.DATA_LOSS;default:return tt(39323,{code:t})}}(jt=gr||(gr={}))[jt.OK=0]="OK",jt[jt.CANCELLED=1]="CANCELLED",jt[jt.UNKNOWN=2]="UNKNOWN",jt[jt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",jt[jt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",jt[jt.NOT_FOUND=5]="NOT_FOUND",jt[jt.ALREADY_EXISTS=6]="ALREADY_EXISTS",jt[jt.PERMISSION_DENIED=7]="PERMISSION_DENIED",jt[jt.UNAUTHENTICATED=16]="UNAUTHENTICATED",jt[jt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",jt[jt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",jt[jt.ABORTED=10]="ABORTED",jt[jt.OUT_OF_RANGE=11]="OUT_OF_RANGE",jt[jt.UNIMPLEMENTED=12]="UNIMPLEMENTED",jt[jt.INTERNAL=13]="INTERNAL",jt[jt.UNAVAILABLE=14]="UNAVAILABLE",jt[jt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UF=new Pl([4294967295,4294967295],0);function eI(t){const e=R4().encode(t),n=new _4;return n.update(e),new Uint8Array(n.digest())}function tI(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new Pl([n,r],0),new Pl([i,a],0)]}class Rb{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new qh(`Invalid padding: ${n}`);if(r<0)throw new qh(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new qh(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new qh(`Invalid padding when bitmap length is 0: ${n}`);this.fe=8*e.length-n,this.ge=Pl.fromNumber(this.fe)}pe(e,n,r){let i=e.add(n.multiply(Pl.fromNumber(r)));return i.compare(UF)===1&&(i=new Pl([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const n=eI(e),[r,i]=tI(n);for(let a=0;a<this.hashCount;a++){const s=this.pe(r,i,a);if(!this.ye(s))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),s=new Rb(a,i,n);return r.forEach(o=>s.insert(o)),s}insert(e){if(this.fe===0)return;const n=eI(e),[r,i]=tI(n);for(let a=0;a<this.hashCount;a++){const s=this.pe(r,i,a);this.we(s)}}we(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class qh extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q1{constructor(e,n,r,i,a){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,X0.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Q1(lt.min(),i,new Wn(St),Do(),kt())}}class X0{constructor(e,n,r,i,a){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new X0(r,n,kt(),kt(),kt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wm{constructor(e,n,r,i){this.Se=e,this.removedTargetIds=n,this.key=r,this.be=i}}class uO{constructor(e,n){this.targetId=e,this.De=n}}class dO{constructor(e,n,r=ui.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class nI{constructor(){this.ve=0,this.Ce=rI(),this.Fe=ui.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=kt(),n=kt(),r=kt();return this.Ce.forEach((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:tt(38017,{changeType:a})}}),new X0(this.Fe,this.Me,e,n,r)}ke(){this.xe=!1,this.Ce=rI()}qe(e,n){this.xe=!0,this.Ce=this.Ce.insert(e,n)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,Ht(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class HF{constructor(e){this.We=e,this.Ge=new Map,this.ze=Do(),this.je=Ug(),this.Je=Ug(),this.He=new Wn(St)}Ye(e){for(const n of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(n,e.be):this.Xe(n,e.key,e.be);for(const n of e.removedTargetIds)this.Xe(n,e.key,e.be)}et(e){this.forEachTarget(e,n=>{const r=this.tt(n);switch(e.state){case 0:this.nt(n)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(n);break;case 3:this.nt(n)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(n)&&(this.rt(n),r.Be(e.resumeToken));break;default:tt(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Ge.forEach((r,i)=>{this.nt(i)&&n(i)})}it(e){const n=e.targetId,r=e.De.count,i=this.st(n);if(i){const a=i.target;if(aw(a))if(r===0){const s=new Je(a.path);this.Xe(n,s,zr.newNoDocument(s,lt.min()))}else Ht(r===1,20013,{expectedCount:r});else{const s=this.ot(n);if(s!==r){const o=this._t(e),c=o?this.ut(o,e,s):1;if(c!==0){this.rt(n);const d=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(n,d)}}}}}_t(e){const n=e.De.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:a=0}=n;let s,o;try{s=Ul(r).toUint8Array()}catch(c){if(c instanceof k4)return Fl("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{o=new Rb(s,i,a)}catch(c){return Fl(c instanceof qh?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return o.fe===0?null:o}ut(e,n,r){return n.De.count===r-this.ht(e,n.targetId)?0:2}ht(e,n){const r=this.We.getRemoteKeysForTarget(n);let i=0;return r.forEach(a=>{const s=this.We.lt(),o=`projects/${s.projectId}/databases/${s.database}/documents/${a.path.canonicalString()}`;e.mightContain(o)||(this.Xe(n,a,null),i++)}),i}Pt(e){const n=new Map;this.Ge.forEach((a,s)=>{const o=this.st(s);if(o){if(a.current&&aw(o.target)){const c=new Je(o.target.path);this.Tt(c).has(s)||this.It(s,c)||this.Xe(s,c,zr.newNoDocument(c,e))}a.Ne&&(n.set(s,a.Le()),a.ke())}});let r=kt();this.Je.forEach((a,s)=>{let o=!0;s.forEachWhile(c=>{const d=this.st(c);return!d||d.purpose==="TargetPurposeLimboResolution"||(o=!1,!1)}),o&&(r=r.add(a))}),this.ze.forEach((a,s)=>s.setReadTime(e));const i=new Q1(e,n,this.He,this.ze,r);return this.ze=Do(),this.je=Ug(),this.Je=Ug(),this.He=new Wn(St),i}Ze(e,n){if(!this.nt(e))return;const r=this.It(e,n.key)?2:0;this.tt(e).qe(n.key,r),this.ze=this.ze.insert(n.key,n),this.je=this.je.insert(n.key,this.Tt(n.key).add(e)),this.Je=this.Je.insert(n.key,this.dt(n.key).add(e))}Xe(e,n,r){if(!this.nt(e))return;const i=this.tt(e);this.It(e,n)?i.qe(n,1):i.Qe(n),this.Je=this.Je.insert(n,this.dt(n).delete(e)),this.Je=this.Je.insert(n,this.dt(n).add(e)),r&&(this.ze=this.ze.insert(n,r))}removeTarget(e){this.Ge.delete(e)}ot(e){const n=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let n=this.Ge.get(e);return n||(n=new nI,this.Ge.set(e,n)),n}dt(e){let n=this.Je.get(e);return n||(n=new Mr(St),this.Je=this.Je.insert(e,n)),n}Tt(e){let n=this.je.get(e);return n||(n=new Mr(St),this.je=this.je.insert(e,n)),n}nt(e){const n=this.st(e)!==null;return n||Ge("WatchChangeAggregator","Detected inactive target",e),n}st(e){const n=this.Ge.get(e);return n&&n.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new nI),this.We.getRemoteKeysForTarget(e).forEach(n=>{this.Xe(e,n,null)})}It(e,n){return this.We.getRemoteKeysForTarget(e).has(n)}}function Ug(){return new Wn(Je.comparator)}function rI(){return new Wn(Je.comparator)}const zF={asc:"ASCENDING",desc:"DESCENDING"},$F={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},GF={and:"AND",or:"OR"};class WF{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function ow(t,e){return t.useProto3Json||W0(e)?e:{value:e}}function zm(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function fO(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function YF(t,e){return zm(t,e.toTimestamp())}function sa(t){return Ht(!!t,49232),lt.fromTimestamp(function(n){const r=Vl(n);return new Mn(r.seconds,r.nanos)}(t))}function Ob(t,e){return lw(t,e).canonicalString()}function lw(t,e){const n=function(i){return new un(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function hO(t){const e=un.fromString(t);return Ht(xO(e),10190,{key:e.toString()}),e}function $m(t,e){return Ob(t.databaseId,e.path)}function d0(t,e){const n=hO(e);if(n.get(1)!==t.databaseId.projectId)throw new Ue(Ae.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Ue(Ae.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Je(gO(n))}function pO(t,e){return Ob(t.databaseId,e)}function qF(t){const e=hO(t);return e.length===4?un.emptyPath():gO(e)}function cw(t){return new un(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function gO(t){return Ht(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function iI(t,e,n){return{name:$m(t,e),fields:n.value.mapValue.fields}}function XF(t,e){return"found"in e?function(r,i){Ht(!!i.found,43571),i.found.name,i.found.updateTime;const a=d0(r,i.found.name),s=sa(i.found.updateTime),o=i.found.createTime?sa(i.found.createTime):lt.min(),c=new Pi({mapValue:{fields:i.found.fields}});return zr.newFoundDocument(a,s,o,c)}(t,e):"missing"in e?function(r,i){Ht(!!i.missing,3894),Ht(!!i.readTime,22933);const a=d0(r,i.missing),s=sa(i.readTime);return zr.newNoDocument(a,s)}(t,e):tt(7234,{result:e})}function KF(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:tt(39313,{state:d})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],a=function(d,f){return d.useProto3Json?(Ht(f===void 0||typeof f=="string",58123),ui.fromBase64String(f||"")):(Ht(f===void 0||f instanceof Buffer||f instanceof Uint8Array,16193),ui.fromUint8Array(f||new Uint8Array))}(t,e.targetChange.resumeToken),s=e.targetChange.cause,o=s&&function(d){const f=d.code===void 0?Ae.UNKNOWN:cO(d.code);return new Ue(f,d.message||"")}(s);n=new dO(r,i,a,o||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=d0(t,r.document.name),a=sa(r.document.updateTime),s=r.document.createTime?sa(r.document.createTime):lt.min(),o=new Pi({mapValue:{fields:r.document.fields}}),c=zr.newFoundDocument(i,a,s,o),d=r.targetIds||[],f=r.removedTargetIds||[];n=new wm(d,f,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=d0(t,r.document),a=r.readTime?sa(r.readTime):lt.min(),s=zr.newNoDocument(i,a),o=r.removedTargetIds||[];n=new wm([],o,s.key,s)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=d0(t,r.document),a=r.removedTargetIds||[];n=new wm([],a,i,null)}else{if(!("filter"in e))return tt(11601,{At:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:a}=r,s=new VF(i,a),o=r.targetId;n=new uO(o,s)}}return n}function mO(t,e){let n;if(e instanceof Y0)n={update:iI(t,e.key,e.value)};else if(e instanceof q0)n={delete:$m(t,e.key)};else if(e instanceof Xl)n={update:iI(t,e.key,e.data),updateMask:aj(e.fieldMask)};else{if(!(e instanceof oO))return tt(16599,{Rt:e.type});n={verify:$m(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(a,s){const o=s.transform;if(o instanceof A0)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof E0)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof S0)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof Hm)return{fieldPath:s.field.canonicalString(),increment:o.Ee};throw tt(20930,{transform:s.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,a){return a.updateTime!==void 0?{updateTime:YF(i,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:tt(27497)}(t,e.precondition)),n}function QF(t,e){return t&&t.length>0?(Ht(e!==void 0,14353),t.map(n=>function(i,a){let s=i.updateTime?sa(i.updateTime):sa(a);return s.isEqual(lt.min())&&(s=sa(a)),new NF(s,i.transformResults||[])}(n,e))):[]}function ZF(t,e){return{documents:[pO(t,e.path)]}}function JF(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=pO(t,i);const a=function(d){if(d.length!==0)return vO(Ja.create(d,"and"))}(e.filters);a&&(n.structuredQuery.where=a);const s=function(d){if(d.length!==0)return d.map(f=>function(g){return{field:vd(g.field),direction:nj(g.dir)}}(f))}(e.orderBy);s&&(n.structuredQuery.orderBy=s);const o=ow(t,e.limit);return o!==null&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{Vt:n,parent:i}}function ej(t){let e=qF(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Ht(r===1,65062);const f=n.from[0];f.allDescendants?i=f.collectionId:e=e.child(f.collectionId)}let a=[];n.where&&(a=function(p){const g=yO(p);return g instanceof Ja&&$4(g)?g.getFilters():[g]}(n.where));let s=[];n.orderBy&&(s=function(p){return p.map(g=>function(x){return new _0(xd(x.field),function(A){switch(A){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(x.direction))}(g))}(n.orderBy));let o=null;n.limit&&(o=function(p){let g;return g=typeof p=="object"?p.value:p,W0(g)?null:g}(n.limit));let c=null;n.startAt&&(c=function(p){const g=!!p.before,m=p.values||[];return new Vm(m,g)}(n.startAt));let d=null;return n.endAt&&(d=function(p){const g=!p.before,m=p.values||[];return new Vm(m,g)}(n.endAt)),bF(e,i,s,a,o,"F",c,d)}function tj(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return tt(28987,{purpose:i})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function yO(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=xd(n.unaryFilter.field);return mr.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=xd(n.unaryFilter.field);return mr.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=xd(n.unaryFilter.field);return mr.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=xd(n.unaryFilter.field);return mr.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return tt(61313);default:return tt(60726)}}(t):t.fieldFilter!==void 0?function(n){return mr.create(xd(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return tt(58110);default:return tt(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Ja.create(n.compositeFilter.filters.map(r=>yO(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return tt(1026)}}(n.compositeFilter.op))}(t):tt(30097,{filter:t})}function nj(t){return zF[t]}function rj(t){return $F[t]}function ij(t){return GF[t]}function vd(t){return{fieldPath:t.canonicalString()}}function xd(t){return si.fromServerFormat(t.fieldPath)}function vO(t){return t instanceof mr?function(n){if(n.op==="=="){if(GT(n.value))return{unaryFilter:{field:vd(n.field),op:"IS_NAN"}};if($T(n.value))return{unaryFilter:{field:vd(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(GT(n.value))return{unaryFilter:{field:vd(n.field),op:"IS_NOT_NAN"}};if($T(n.value))return{unaryFilter:{field:vd(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:vd(n.field),op:rj(n.op),value:n.value}}}(t):t instanceof Ja?function(n){const r=n.getFilters().map(i=>vO(i));return r.length===1?r[0]:{compositeFilter:{op:ij(n.op),filters:r}}}(t):tt(54877,{filter:t})}function aj(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function xO(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tl{constructor(e,n,r,i,a=lt.min(),s=lt.min(),o=ui.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o,this.expectedCount=c}withSequenceNumber(e){return new Tl(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Tl(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Tl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Tl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sj{constructor(e){this.gt=e}}function oj(t){const e=ej({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Um(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lj{constructor(){this.Dn=new cj}addToCollectionParentIndex(e,n){return this.Dn.add(n),Ie.resolve()}getCollectionParents(e,n){return Ie.resolve(this.Dn.getEntries(n))}addFieldIndex(e,n){return Ie.resolve()}deleteFieldIndex(e,n){return Ie.resolve()}deleteAllFieldIndexes(e){return Ie.resolve()}createTargetIndexes(e,n){return Ie.resolve()}getDocumentsMatchingTarget(e,n){return Ie.resolve(null)}getIndexType(e,n){return Ie.resolve(0)}getFieldIndexes(e,n){return Ie.resolve([])}getNextCollectionGroupToUpdate(e){return Ie.resolve(null)}getMinOffset(e,n){return Ie.resolve(jl.min())}getMinOffsetFromCollectionGroup(e,n){return Ie.resolve(jl.min())}updateCollectionGroup(e,n,r){return Ie.resolve()}updateIndexEntries(e,n){return Ie.resolve()}}class cj{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Mr(un.comparator),a=!i.has(r);return this.index[n]=i.add(r),a}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Mr(un.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aI={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},wO=41943040;class $i{static withCacheSize(e){return new $i(e,$i.DEFAULT_COLLECTION_PERCENTILE,$i.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */$i.DEFAULT_COLLECTION_PERCENTILE=10,$i.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,$i.DEFAULT=new $i(wO,$i.DEFAULT_COLLECTION_PERCENTILE,$i.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),$i.DISABLED=new $i(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xd{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new Xd(0)}static ur(){return new Xd(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sI="LruGarbageCollector",uj=1048576;function oI([t,e],[n,r]){const i=St(t,n);return i===0?St(e,r):i}class dj{constructor(e){this.Tr=e,this.buffer=new Mr(oI),this.Ir=0}dr(){return++this.Ir}Er(e){const n=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();oI(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class fj{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){Ge(sI,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){mf(n)?Ge(sI,"Ignoring IndexedDB error during garbage collection: ",n):await gf(n)}await this.Rr(3e5)})}}class hj{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.mr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return Ie.resolve($1.ue);const r=new dj(n);return this.Vr.forEachTarget(e,i=>r.Er(i.sequenceNumber)).next(()=>this.Vr.gr(e,i=>r.Er(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Vr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Ge("LruGarbageCollector","Garbage collection skipped; disabled"),Ie.resolve(aI)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Ge("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),aI):this.pr(e,n))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,n){let r,i,a,s,o,c,d;const f=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(Ge("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,s=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,o=Date.now(),this.removeTargets(e,r,n))).next(p=>(a=p,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(d=Date.now(),md()<=Pt.DEBUG&&Ge("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-f}ms
	Determined least recently used ${i} in `+(o-s)+`ms
	Removed ${a} targets in `+(c-o)+`ms
	Removed ${p} documents in `+(d-c)+`ms
Total Duration: ${d-f}ms`),Ie.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:p})))}}function pj(t,e){return new hj(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gj{constructor(){this.changes=new lu(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,zr.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?Ie.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mj{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yj{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&u0(r.mutation,i,aa.empty(),Mn.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,kt()).next(()=>r))}getLocalViewOfDocuments(e,n,r=kt()){const i=Hc();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(a=>{let s=Yh();return a.forEach((o,c)=>{s=s.insert(o,c.overlayedDocument)}),s}))}getOverlayedDocuments(e,n){const r=Hc();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,kt()))}populateOverlays(e,n,r){const i=[];return r.forEach(a=>{n.has(a)||i.push(a)}),this.documentOverlayCache.getOverlays(e,i).next(a=>{a.forEach((s,o)=>{n.set(s,o)})})}computeViews(e,n,r,i){let a=Do();const s=c0(),o=function(){return c0()}();return n.forEach((c,d)=>{const f=r.get(d.key);i.has(d.key)&&(f===void 0||f.mutation instanceof Xl)?a=a.insert(d.key,d):f!==void 0?(s.set(d.key,f.mutation.getFieldMask()),u0(f.mutation,d,f.mutation.getFieldMask(),Mn.now())):s.set(d.key,aa.empty())}),this.recalculateAndSaveOverlays(e,a).next(c=>(c.forEach((d,f)=>s.set(d,f)),n.forEach((d,f)=>{var p;return o.set(d,new mj(f,(p=s.get(d))!==null&&p!==void 0?p:null))}),o))}recalculateAndSaveOverlays(e,n){const r=c0();let i=new Wn((s,o)=>s-o),a=kt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(s=>{for(const o of s)o.keys().forEach(c=>{const d=n.get(c);if(d===null)return;let f=r.get(c)||aa.empty();f=o.applyToLocalView(d,f),r.set(c,f);const p=(i.get(o.batchId)||kt()).add(c);i=i.insert(o.batchId,p)})}).next(()=>{const s=[],o=i.getReverseIterator();for(;o.hasNext();){const c=o.getNext(),d=c.key,f=c.value,p=J4();f.forEach(g=>{if(!a.has(g)){const m=aO(n.get(g),r.get(g));m!==null&&p.set(g,m),a=a.add(g)}}),s.push(this.documentOverlayCache.saveOverlays(e,d,p))}return Ie.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(s){return Je.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):q4(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(a=>{const s=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-a.size):Ie.resolve(Hc());let o=v0,c=a;return s.next(d=>Ie.forEach(d,(f,p)=>(o<p.largestBatchId&&(o=p.largestBatchId),a.get(f)?Ie.resolve():this.remoteDocumentCache.getEntry(e,f).next(g=>{c=c.insert(f,g)}))).next(()=>this.populateOverlays(e,d,a)).next(()=>this.computeViews(e,c,d,kt())).next(f=>({batchId:o,changes:Z4(f)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Je(n)).next(r=>{let i=Yh();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const a=n.collectionGroup;let s=Yh();return this.indexManager.getCollectionParents(e,a).next(o=>Ie.forEach(o,c=>{const d=function(p,g){return new ou(g,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,c.child(a));return this.getDocumentsMatchingCollectionQuery(e,d,r,i).next(f=>{f.forEach((p,g)=>{s=s.insert(p,g)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,r,i){let a;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(s=>(a=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,a,i))).next(s=>{a.forEach((c,d)=>{const f=d.getKey();s.get(f)===null&&(s=s.insert(f,zr.newInvalidDocument(f)))});let o=Yh();return s.forEach((c,d)=>{const f=a.get(c);f!==void 0&&u0(f.mutation,d,aa.empty(),Mn.now()),q1(n,d)&&(o=o.insert(c,d))}),o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vj{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,n){return Ie.resolve(this.Br.get(n))}saveBundleMetadata(e,n){return this.Br.set(n.id,function(i){return{id:i.id,version:i.version,createTime:sa(i.createTime)}}(n)),Ie.resolve()}getNamedQuery(e,n){return Ie.resolve(this.Lr.get(n))}saveNamedQuery(e,n){return this.Lr.set(n.name,function(i){return{name:i.name,query:oj(i.bundledQuery),readTime:sa(i.readTime)}}(n)),Ie.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xj{constructor(){this.overlays=new Wn(Je.comparator),this.kr=new Map}getOverlay(e,n){return Ie.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Hc();return Ie.forEach(n,i=>this.getOverlay(e,i).next(a=>{a!==null&&r.set(i,a)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,a)=>{this.wt(e,n,a)}),Ie.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.kr.get(r);return i!==void 0&&(i.forEach(a=>this.overlays=this.overlays.remove(a)),this.kr.delete(r)),Ie.resolve()}getOverlaysForCollection(e,n,r){const i=Hc(),a=n.length+1,s=new Je(n.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){const c=o.getNext().value,d=c.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===a&&c.largestBatchId>r&&i.set(c.getKey(),c)}return Ie.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let a=new Wn((d,f)=>d-f);const s=this.overlays.getIterator();for(;s.hasNext();){const d=s.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let f=a.get(d.largestBatchId);f===null&&(f=Hc(),a=a.insert(d.largestBatchId,f)),f.set(d.getKey(),d)}}const o=Hc(),c=a.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((d,f)=>o.set(d,f)),!(o.size()>=i)););return Ie.resolve(o)}wt(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const s=this.kr.get(i.largestBatchId).delete(r.key);this.kr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new jF(n,r));let a=this.kr.get(n);a===void 0&&(a=kt(),this.kr.set(n,a)),this.kr.set(n,a.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wj{constructor(){this.sessionToken=ui.EMPTY_BYTE_STRING}getSessionToken(e){return Ie.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,Ie.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mb{constructor(){this.qr=new Mr(Hr.Qr),this.$r=new Mr(Hr.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,n){const r=new Hr(e,n);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Wr(new Hr(e,n))}Gr(e,n){e.forEach(r=>this.removeReference(r,n))}zr(e){const n=new Je(new un([])),r=new Hr(n,e),i=new Hr(n,e+1),a=[];return this.$r.forEachInRange([r,i],s=>{this.Wr(s),a.push(s.key)}),a}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const n=new Je(new un([])),r=new Hr(n,e),i=new Hr(n,e+1);let a=kt();return this.$r.forEachInRange([r,i],s=>{a=a.add(s.key)}),a}containsKey(e){const n=new Hr(e,0),r=this.qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Hr{constructor(e,n){this.key=e,this.Hr=n}static Qr(e,n){return Je.comparator(e.key,n.key)||St(e.Hr,n.Hr)}static Ur(e,n){return St(e.Hr,n.Hr)||Je.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bj{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.er=1,this.Yr=new Mr(Hr.Qr)}checkEmpty(e){return Ie.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const a=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new FF(a,n,r,i);this.mutationQueue.push(s);for(const o of i)this.Yr=this.Yr.add(new Hr(o.key,a)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return Ie.resolve(s)}lookupMutationBatch(e,n){return Ie.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.Xr(r),a=i<0?0:i;return Ie.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return Ie.resolve(this.mutationQueue.length===0?Ab:this.er-1)}getAllMutationBatches(e){return Ie.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Hr(n,0),i=new Hr(n,Number.POSITIVE_INFINITY),a=[];return this.Yr.forEachInRange([r,i],s=>{const o=this.Zr(s.Hr);a.push(o)}),Ie.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Mr(St);return n.forEach(i=>{const a=new Hr(i,0),s=new Hr(i,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([a,s],o=>{r=r.add(o.Hr)})}),Ie.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let a=r;Je.isDocumentKey(a)||(a=a.child(""));const s=new Hr(new Je(a),0);let o=new Mr(St);return this.Yr.forEachWhile(c=>{const d=c.key.path;return!!r.isPrefixOf(d)&&(d.length===i&&(o=o.add(c.Hr)),!0)},s),Ie.resolve(this.ei(o))}ei(e){const n=[];return e.forEach(r=>{const i=this.Zr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){Ht(this.ti(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return Ie.forEach(n.mutations,i=>{const a=new Hr(i.key,n.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Yr=r})}rr(e){}containsKey(e,n){const r=new Hr(n,0),i=this.Yr.firstAfterOrEqual(r);return Ie.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,Ie.resolve()}ti(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _j{constructor(e){this.ni=e,this.docs=function(){return new Wn(Je.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),a=i?i.size:0,s=this.ni(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:s}),this.size+=s-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return Ie.resolve(r?r.document.mutableCopy():zr.newInvalidDocument(n))}getEntries(e,n){let r=Do();return n.forEach(i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():zr.newInvalidDocument(i))}),Ie.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let a=Do();const s=n.path,o=new Je(s.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(o);for(;c.hasNext();){const{key:d,value:{document:f}}=c.getNext();if(!s.isPrefixOf(d.path))break;d.path.length>s.length+1||JB(ZB(f),r)<=0||(i.has(f.key)||q1(n,f))&&(a=a.insert(f.key,f.mutableCopy()))}return Ie.resolve(a)}getAllFromCollectionGroup(e,n,r,i){tt(9500)}ri(e,n){return Ie.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new Aj(this)}getSize(e){return Ie.resolve(this.size)}}class Aj extends gj{constructor(e){super(),this.Or=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Or.addEntry(e,i)):this.Or.removeEntry(r)}),Ie.waitFor(n)}getFromCache(e,n){return this.Or.getEntry(e,n)}getAllFromCache(e,n){return this.Or.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ej{constructor(e){this.persistence=e,this.ii=new lu(n=>Cb(n),Tb),this.lastRemoteSnapshotVersion=lt.min(),this.highestTargetId=0,this.si=0,this.oi=new Mb,this.targetCount=0,this._i=Xd.ar()}forEachTarget(e,n){return this.ii.forEach((r,i)=>n(i)),Ie.resolve()}getLastRemoteSnapshotVersion(e){return Ie.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Ie.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),Ie.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.si&&(this.si=n),Ie.resolve()}hr(e){this.ii.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this._i=new Xd(n),this.highestTargetId=n),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,n){return this.hr(n),this.targetCount+=1,Ie.resolve()}updateTargetData(e,n){return this.hr(n),Ie.resolve()}removeTargetData(e,n){return this.ii.delete(n.target),this.oi.zr(n.targetId),this.targetCount-=1,Ie.resolve()}removeTargets(e,n,r){let i=0;const a=[];return this.ii.forEach((s,o)=>{o.sequenceNumber<=n&&r.get(o.targetId)===null&&(this.ii.delete(s),a.push(this.removeMatchingKeysForTargetId(e,o.targetId)),i++)}),Ie.waitFor(a).next(()=>i)}getTargetCount(e){return Ie.resolve(this.targetCount)}getTargetData(e,n){const r=this.ii.get(n)||null;return Ie.resolve(r)}addMatchingKeys(e,n,r){return this.oi.Kr(n,r),Ie.resolve()}removeMatchingKeys(e,n,r){this.oi.Gr(n,r);const i=this.persistence.referenceDelegate,a=[];return i&&n.forEach(s=>{a.push(i.markPotentiallyOrphaned(e,s))}),Ie.waitFor(a)}removeMatchingKeysForTargetId(e,n){return this.oi.zr(n),Ie.resolve()}getMatchingKeysForTargetId(e,n){const r=this.oi.Jr(n);return Ie.resolve(r)}containsKey(e,n){return Ie.resolve(this.oi.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bO{constructor(e,n){this.ai={},this.overlays={},this.ui=new $1(0),this.ci=!1,this.ci=!0,this.li=new wj,this.referenceDelegate=e(this),this.hi=new Ej(this),this.indexManager=new lj,this.remoteDocumentCache=function(i){return new _j(i)}(r=>this.referenceDelegate.Pi(r)),this.serializer=new sj(n),this.Ti=new vj(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new xj,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ai[e.toKey()];return r||(r=new bj(n,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,n,r){Ge("MemoryPersistence","Starting transaction:",e);const i=new Sj(this.ui.next());return this.referenceDelegate.Ii(),r(i).next(a=>this.referenceDelegate.di(i).next(()=>a)).toPromise().then(a=>(i.raiseOnCommittedEvent(),a))}Ei(e,n){return Ie.or(Object.values(this.ai).map(r=>()=>r.containsKey(e,n)))}}class Sj extends tF{constructor(e){super(),this.currentSequenceNumber=e}}class Pb{constructor(e){this.persistence=e,this.Ai=new Mb,this.Ri=null}static Vi(e){return new Pb(e)}get mi(){if(this.Ri)return this.Ri;throw tt(60996)}addReference(e,n,r){return this.Ai.addReference(r,n),this.mi.delete(r.toString()),Ie.resolve()}removeReference(e,n,r){return this.Ai.removeReference(r,n),this.mi.add(r.toString()),Ie.resolve()}markPotentiallyOrphaned(e,n){return this.mi.add(n.toString()),Ie.resolve()}removeTarget(e,n){this.Ai.zr(n.targetId).forEach(i=>this.mi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(a=>this.mi.add(a.toString()))}).next(()=>r.removeTargetData(e,n))}Ii(){this.Ri=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ie.forEach(this.mi,r=>{const i=Je.fromPath(r);return this.fi(e,i).next(a=>{a||n.removeEntry(i,lt.min())})}).next(()=>(this.Ri=null,n.apply(e)))}updateLimboDocument(e,n){return this.fi(e,n).next(r=>{r?this.mi.delete(n.toString()):this.mi.add(n.toString())})}Pi(e){return 0}fi(e,n){return Ie.or([()=>Ie.resolve(this.Ai.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class Gm{constructor(e,n){this.persistence=e,this.gi=new lu(r=>iF(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=pj(this,n)}static Vi(e,n){return new Gm(e,n)}Ii(){}di(e){return Ie.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}mr(e){const n=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}yr(e){let n=0;return this.gr(e,r=>{n++}).next(()=>n)}gr(e,n){return Ie.forEach(this.gi,(r,i)=>this.Sr(e,r,i).next(a=>a?Ie.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),a=i.newChangeBuffer();return i.ri(e,s=>this.Sr(e,s,n).next(o=>{o||(r++,a.removeEntry(s,lt.min()))})).next(()=>a.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.gi.set(n,e.currentSequenceNumber),Ie.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),Ie.resolve()}removeReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),Ie.resolve()}updateLimboDocument(e,n){return this.gi.set(n,e.currentSequenceNumber),Ie.resolve()}Pi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=ym(e.data.value)),n}Sr(e,n,r){return Ie.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.gi.get(n);return Ie.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kb{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Is=r,this.ds=i}static Es(e,n){let r=kt(),i=kt();for(const a of n.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new kb(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cj{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tj{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=function(){return a9()?8:nF(_i())>0?6:4}()}initialize(e,n){this.gs=e,this.indexManager=n,this.As=!0}getDocumentsMatchingQuery(e,n,r,i){const a={result:null};return this.ps(e,n).next(s=>{a.result=s}).next(()=>{if(!a.result)return this.ys(e,n,i,r).next(s=>{a.result=s})}).next(()=>{if(a.result)return;const s=new Cj;return this.ws(e,n,s).next(o=>{if(a.result=o,this.Rs)return this.Ss(e,n,s,o.size)})}).next(()=>a.result)}Ss(e,n,r,i){return r.documentReadCount<this.Vs?(md()<=Pt.DEBUG&&Ge("QueryEngine","SDK will not create cache indexes for query:",yd(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),Ie.resolve()):(md()<=Pt.DEBUG&&Ge("QueryEngine","Query:",yd(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.fs*i?(md()<=Pt.DEBUG&&Ge("QueryEngine","The SDK decides to create cache indexes for query:",yd(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ps(n))):Ie.resolve())}ps(e,n){if(XT(n))return Ie.resolve(null);let r=Ps(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Um(n,null,"F"),r=Ps(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(a=>{const s=kt(...a);return this.gs.getDocuments(e,s).next(o=>this.indexManager.getMinOffset(e,r).next(c=>{const d=this.bs(n,o);return this.Ds(n,d,s,c.readTime)?this.ps(e,Um(n,null,"F")):this.vs(e,d,n,c)}))})))}ys(e,n,r,i){return XT(n)||i.isEqual(lt.min())?Ie.resolve(null):this.gs.getDocuments(e,r).next(a=>{const s=this.bs(n,a);return this.Ds(n,s,r,i)?Ie.resolve(null):(md()<=Pt.DEBUG&&Ge("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),yd(n)),this.vs(e,s,n,QB(i,v0)).next(o=>o))})}bs(e,n){let r=new Mr(K4(e));return n.forEach((i,a)=>{q1(e,a)&&(r=r.add(a))}),r}Ds(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const a=e.limitType==="F"?n.last():n.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}ws(e,n,r){return md()<=Pt.DEBUG&&Ge("QueryEngine","Using full collection scan to execute query:",yd(n)),this.gs.getDocumentsMatchingQuery(e,n,jl.min(),r)}vs(e,n,r,i){return this.gs.getDocumentsMatchingQuery(e,r,i).next(a=>(n.forEach(s=>{a=a.insert(s.key,s)}),a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nb="LocalStore",Ij=3e8;class Dj{constructor(e,n,r,i){this.persistence=e,this.Cs=n,this.serializer=i,this.Fs=new Wn(St),this.Ms=new lu(a=>Cb(a),Tb),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new yj(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Fs))}}function Rj(t,e,n,r){return new Dj(t,e,n,r)}async function _O(t,e){const n=gt(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(a=>(i=a,n.Ns(e),n.mutationQueue.getAllMutationBatches(r))).next(a=>{const s=[],o=[];let c=kt();for(const d of i){s.push(d.batchId);for(const f of d.mutations)c=c.add(f.key)}for(const d of a){o.push(d.batchId);for(const f of d.mutations)c=c.add(f.key)}return n.localDocuments.getDocuments(r,c).next(d=>({Bs:d,removedBatchIds:s,addedBatchIds:o}))})})}function Oj(t,e){const n=gt(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),a=n.Os.newChangeBuffer({trackRemovals:!0});return function(o,c,d,f){const p=d.batch,g=p.keys();let m=Ie.resolve();return g.forEach(x=>{m=m.next(()=>f.getEntry(c,x)).next(b=>{const A=d.docVersions.get(x);Ht(A!==null,48541),b.version.compareTo(A)<0&&(p.applyToRemoteDocument(b,d),b.isValidDocument()&&(b.setReadTime(d.commitVersion),f.addEntry(b)))})}),m.next(()=>o.mutationQueue.removeMutationBatch(c,p))}(n,r,e,a).next(()=>a.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(o){let c=kt();for(let d=0;d<o.mutationResults.length;++d)o.mutationResults[d].transformResults.length>0&&(c=c.add(o.batch.mutations[d].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function AO(t){const e=gt(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.hi.getLastRemoteSnapshotVersion(n))}function Mj(t,e){const n=gt(t),r=e.snapshotVersion;let i=n.Fs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const s=n.Os.newChangeBuffer({trackRemovals:!0});i=n.Fs;const o=[];e.targetChanges.forEach((f,p)=>{const g=i.get(p);if(!g)return;o.push(n.hi.removeMatchingKeys(a,f.removedDocuments,p).next(()=>n.hi.addMatchingKeys(a,f.addedDocuments,p)));let m=g.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(p)!==null?m=m.withResumeToken(ui.EMPTY_BYTE_STRING,lt.min()).withLastLimboFreeSnapshotVersion(lt.min()):f.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(f.resumeToken,r)),i=i.insert(p,m),function(b,A,E){return b.resumeToken.approximateByteSize()===0||A.snapshotVersion.toMicroseconds()-b.snapshotVersion.toMicroseconds()>=Ij?!0:E.addedDocuments.size+E.modifiedDocuments.size+E.removedDocuments.size>0}(g,m,f)&&o.push(n.hi.updateTargetData(a,m))});let c=Do(),d=kt();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(a,f))}),o.push(Pj(a,s,e.documentUpdates).next(f=>{c=f.Ls,d=f.ks})),!r.isEqual(lt.min())){const f=n.hi.getLastRemoteSnapshotVersion(a).next(p=>n.hi.setTargetsMetadata(a,a.currentSequenceNumber,r));o.push(f)}return Ie.waitFor(o).next(()=>s.apply(a)).next(()=>n.localDocuments.getLocalViewOfDocuments(a,c,d)).next(()=>c)}).then(a=>(n.Fs=i,a))}function Pj(t,e,n){let r=kt(),i=kt();return n.forEach(a=>r=r.add(a)),e.getEntries(t,r).next(a=>{let s=Do();return n.forEach((o,c)=>{const d=a.get(o);c.isFoundDocument()!==d.isFoundDocument()&&(i=i.add(o)),c.isNoDocument()&&c.version.isEqual(lt.min())?(e.removeEntry(o,c.readTime),s=s.insert(o,c)):!d.isValidDocument()||c.version.compareTo(d.version)>0||c.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(c),s=s.insert(o,c)):Ge(Nb,"Ignoring outdated watch update for ",o,". Current version:",d.version," Watch version:",c.version)}),{Ls:s,ks:i}})}function kj(t,e){const n=gt(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=Ab),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Nj(t,e){const n=gt(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.hi.getTargetData(r,e).next(a=>a?(i=a,Ie.resolve(i)):n.hi.allocateTargetId(r).next(s=>(i=new Tl(e,s,"TargetPurposeListen",r.currentSequenceNumber),n.hi.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.Fs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Fs=n.Fs.insert(r.targetId,r),n.Ms.set(e,r.targetId)),r})}async function uw(t,e,n){const r=gt(t),i=r.Fs.get(e),a=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",a,s=>r.persistence.referenceDelegate.removeTarget(s,i))}catch(s){if(!mf(s))throw s;Ge(Nb,`Failed to update sequence numbers for target ${e}: ${s}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(i.target)}function lI(t,e,n){const r=gt(t);let i=lt.min(),a=kt();return r.persistence.runTransaction("Execute query","readwrite",s=>function(c,d,f){const p=gt(c),g=p.Ms.get(f);return g!==void 0?Ie.resolve(p.Fs.get(g)):p.hi.getTargetData(d,f)}(r,s,Ps(e)).next(o=>{if(o)return i=o.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(s,o.targetId).next(c=>{a=c})}).next(()=>r.Cs.getDocumentsMatchingQuery(s,e,n?i:lt.min(),n?a:kt())).next(o=>(Lj(r,AF(e),o),{documents:o,qs:a})))}function Lj(t,e,n){let r=t.xs.get(e)||lt.min();n.forEach((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),t.xs.set(e,r)}class cI{constructor(){this.activeTargetIds=DF()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Bj{constructor(){this.Fo=new cI,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,n,r){this.Mo[e]=n}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new cI,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fj{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uI="ConnectivityMonitor";class dI{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){Ge(uI,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){Ge(uI,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Hg=null;function dw(){return Hg===null?Hg=function(){return 268435456+Math.round(2147483648*Math.random())}():Hg++,"0x"+Hg.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jx="RestConnection",jj={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Vj{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.$o=n+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.Ko=this.databaseId.database===Fm?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,n,r,i,a){const s=dw(),o=this.Go(e,n.toUriEncodedString());Ge(Jx,`Sending RPC '${e}' ${s}:`,o,r);const c={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(c,i,a);const{host:d}=new URL(o),f=df(d);return this.jo(e,o,c,r,f).then(p=>(Ge(Jx,`Received RPC '${e}' ${s}: `,p),p),p=>{throw Fl(Jx,`RPC '${e}' ${s} failed with error: `,p,"url: ",o,"request:",r),p})}Jo(e,n,r,i,a,s){return this.Wo(e,n,r,i,a)}zo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+pf}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,a)=>e[a]=i),r&&r.headers.forEach((i,a)=>e[a]=i)}Go(e,n){const r=jj[e];return`${this.$o}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uj{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hi="WebChannelConnection";class Hj extends Vj{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,n,r,i,a){const s=dw();return new Promise((o,c)=>{const d=new A4;d.setWithCredentials(!0),d.listenOnce(E4.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case mm.NO_ERROR:const p=d.getResponseJson();Ge(hi,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(p)),o(p);break;case mm.TIMEOUT:Ge(hi,`RPC '${e}' ${s} timed out`),c(new Ue(Ae.DEADLINE_EXCEEDED,"Request time out"));break;case mm.HTTP_ERROR:const g=d.getStatus();if(Ge(hi,`RPC '${e}' ${s} failed with status:`,g,"response text:",d.getResponseText()),g>0){let m=d.getResponseJson();Array.isArray(m)&&(m=m[0]);const x=m==null?void 0:m.error;if(x&&x.status&&x.message){const b=function(E){const S=E.toLowerCase().replace(/_/g,"-");return Object.values(Ae).indexOf(S)>=0?S:Ae.UNKNOWN}(x.status);c(new Ue(b,x.message))}else c(new Ue(Ae.UNKNOWN,"Server responded with status "+d.getStatus()))}else c(new Ue(Ae.UNAVAILABLE,"Connection failed."));break;default:tt(9055,{c_:e,streamId:s,l_:d.getLastErrorCode(),h_:d.getLastError()})}}finally{Ge(hi,`RPC '${e}' ${s} completed.`)}});const f=JSON.stringify(i);Ge(hi,`RPC '${e}' ${s} sending request:`,i),d.send(n,"POST",f,r,15)})}P_(e,n,r){const i=dw(),a=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=T4(),o=C4(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(c.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(c.useFetchStreams=!0),this.zo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;const f=a.join("");Ge(hi,`Creating RPC '${e}' stream ${i}: ${f}`,c);const p=s.createWebChannel(f,c);this.T_(p);let g=!1,m=!1;const x=new Uj({Ho:A=>{m?Ge(hi,`Not sending because RPC '${e}' stream ${i} is closed:`,A):(g||(Ge(hi,`Opening RPC '${e}' stream ${i} transport.`),p.open(),g=!0),Ge(hi,`RPC '${e}' stream ${i} sending:`,A),p.send(A))},Yo:()=>p.close()}),b=(A,E,S)=>{A.listen(E,T=>{try{S(T)}catch(I){setTimeout(()=>{throw I},0)}})};return b(p,Wh.EventType.OPEN,()=>{m||(Ge(hi,`RPC '${e}' stream ${i} transport opened.`),x.s_())}),b(p,Wh.EventType.CLOSE,()=>{m||(m=!0,Ge(hi,`RPC '${e}' stream ${i} transport closed`),x.__(),this.I_(p))}),b(p,Wh.EventType.ERROR,A=>{m||(m=!0,Fl(hi,`RPC '${e}' stream ${i} transport errored. Name:`,A.name,"Message:",A.message),x.__(new Ue(Ae.UNAVAILABLE,"The operation could not be completed")))}),b(p,Wh.EventType.MESSAGE,A=>{var E;if(!m){const S=A.data[0];Ht(!!S,16349);const T=S,I=(T==null?void 0:T.error)||((E=T[0])===null||E===void 0?void 0:E.error);if(I){Ge(hi,`RPC '${e}' stream ${i} received error:`,I);const P=I.status;let F=function(R){const B=gr[R];if(B!==void 0)return cO(B)}(P),M=I.message;F===void 0&&(F=Ae.INTERNAL,M="Unknown error status: "+P+" with message "+I.message),m=!0,x.__(new Ue(F,M)),p.close()}else Ge(hi,`RPC '${e}' stream ${i} received:`,S),x.a_(S)}}),b(o,S4.STAT_EVENT,A=>{A.stat===ew.PROXY?Ge(hi,`RPC '${e}' stream ${i} detected buffering proxy`):A.stat===ew.NOPROXY&&Ge(hi,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{x.o_()},0),x}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(n=>n===e)}}function e2(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z1(t){return new WF(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lb{constructor(e,n,r=1e3,i=1.5,a=6e4){this.Fi=e,this.timerId=n,this.d_=r,this.E_=i,this.A_=a,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const n=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),i=Math.max(0,n-r);i>0&&Ge("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.R_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,i,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fI="PersistentStream";class EO{constructor(e,n,r,i,a,s,o,c){this.Fi=e,this.w_=r,this.S_=i,this.connection=a,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=c,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new Lb(e,n)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():n&&n.code===Ae.RESOURCE_EXHAUSTED?(Io(n.toString()),Io("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):n&&n.code===Ae.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(n)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),n=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.b_===n&&this.W_(r,i)},r=>{e(()=>{const i=new Ue(Ae.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(i)})})}W_(e,n){const r=this.K_(this.b_);this.stream=this.z_(e,n),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(i=>{r(()=>this.G_(i))}),this.stream.onMessage(i=>{r(()=>++this.C_==1?this.j_(i):this.onNext(i))})}O_(){this.state=5,this.F_.g_(async()=>{this.state=0,this.start()})}G_(e){return Ge(fI,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return n=>{this.Fi.enqueueAndForget(()=>this.b_===e?n():(Ge(fI,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class zj extends EO{constructor(e,n,r,i,a,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,s),this.serializer=a}z_(e,n){return this.connection.P_("Listen",e,n)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const n=KF(this.serializer,e),r=function(a){if(!("targetChange"in a))return lt.min();const s=a.targetChange;return s.targetIds&&s.targetIds.length?lt.min():s.readTime?sa(s.readTime):lt.min()}(e);return this.listener.J_(n,r)}H_(e){const n={};n.database=cw(this.serializer),n.addTarget=function(a,s){let o;const c=s.target;if(o=aw(c)?{documents:ZF(a,c)}:{query:JF(a,c).Vt},o.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){o.resumeToken=fO(a,s.resumeToken);const d=ow(a,s.expectedCount);d!==null&&(o.expectedCount=d)}else if(s.snapshotVersion.compareTo(lt.min())>0){o.readTime=zm(a,s.snapshotVersion.toTimestamp());const d=ow(a,s.expectedCount);d!==null&&(o.expectedCount=d)}return o}(this.serializer,e);const r=tj(this.serializer,e);r&&(n.labels=r),this.k_(n)}Y_(e){const n={};n.database=cw(this.serializer),n.removeTarget=e,this.k_(n)}}class $j extends EO{constructor(e,n,r,i,a,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,s),this.serializer=a}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,n){return this.connection.P_("Write",e,n)}j_(e){return Ht(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ht(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){Ht(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const n=QF(e.writeResults,e.commitTime),r=sa(e.commitTime);return this.listener.ta(r,n)}na(){const e={};e.database=cw(this.serializer),this.k_(e)}X_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>mO(this.serializer,r))};this.k_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gj{}class Wj extends Gj{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ra=!1}ia(){if(this.ra)throw new Ue(Ae.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,r,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,s])=>this.connection.Wo(e,lw(n,r),i,a,s)).catch(a=>{throw a.name==="FirebaseError"?(a.code===Ae.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Ue(Ae.UNKNOWN,a.toString())})}Jo(e,n,r,i,a){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Jo(e,lw(n,r),i,s,o,a)).catch(s=>{throw s.name==="FirebaseError"?(s.code===Ae.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Ue(Ae.UNKNOWN,s.toString())})}terminate(){this.ra=!0,this.connection.terminate()}}class Yj{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(Io(n),this._a=!1):Ge("OnlineStateTracker",n)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nu="RemoteStore";class qj{constructor(e,n,r,i,a){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=a,this.Ea.xo(s=>{r.enqueueAndForget(async()=>{cu(this)&&(Ge(nu,"Restarting streams for network reachability change."),await async function(c){const d=gt(c);d.Ia.add(4),await K0(d),d.Aa.set("Unknown"),d.Ia.delete(4),await J1(d)}(this))})}),this.Aa=new Yj(r,i)}}async function J1(t){if(cu(t))for(const e of t.da)await e(!0)}async function K0(t){for(const e of t.da)await e(!1)}function SO(t,e){const n=gt(t);n.Ta.has(e.targetId)||(n.Ta.set(e.targetId,e),Vb(n)?jb(n):yf(n).x_()&&Fb(n,e))}function Bb(t,e){const n=gt(t),r=yf(n);n.Ta.delete(e),r.x_()&&CO(n,e),n.Ta.size===0&&(r.x_()?r.B_():cu(n)&&n.Aa.set("Unknown"))}function Fb(t,e){if(t.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(lt.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}yf(t).H_(e)}function CO(t,e){t.Ra.$e(e),yf(t).Y_(e)}function jb(t){t.Ra=new HF({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>t.Ta.get(e)||null,lt:()=>t.datastore.serializer.databaseId}),yf(t).start(),t.Aa.aa()}function Vb(t){return cu(t)&&!yf(t).M_()&&t.Ta.size>0}function cu(t){return gt(t).Ia.size===0}function TO(t){t.Ra=void 0}async function Xj(t){t.Aa.set("Online")}async function Kj(t){t.Ta.forEach((e,n)=>{Fb(t,e)})}async function Qj(t,e){TO(t),Vb(t)?(t.Aa.la(e),jb(t)):t.Aa.set("Unknown")}async function Zj(t,e,n){if(t.Aa.set("Online"),e instanceof dO&&e.state===2&&e.cause)try{await async function(i,a){const s=a.cause;for(const o of a.targetIds)i.Ta.has(o)&&(await i.remoteSyncer.rejectListen(o,s),i.Ta.delete(o),i.Ra.removeTarget(o))}(t,e)}catch(r){Ge(nu,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Wm(t,r)}else if(e instanceof wm?t.Ra.Ye(e):e instanceof uO?t.Ra.it(e):t.Ra.et(e),!n.isEqual(lt.min()))try{const r=await AO(t.localStore);n.compareTo(r)>=0&&await function(a,s){const o=a.Ra.Pt(s);return o.targetChanges.forEach((c,d)=>{if(c.resumeToken.approximateByteSize()>0){const f=a.Ta.get(d);f&&a.Ta.set(d,f.withResumeToken(c.resumeToken,s))}}),o.targetMismatches.forEach((c,d)=>{const f=a.Ta.get(c);if(!f)return;a.Ta.set(c,f.withResumeToken(ui.EMPTY_BYTE_STRING,f.snapshotVersion)),CO(a,c);const p=new Tl(f.target,c,d,f.sequenceNumber);Fb(a,p)}),a.remoteSyncer.applyRemoteEvent(o)}(t,n)}catch(r){Ge(nu,"Failed to raise snapshot:",r),await Wm(t,r)}}async function Wm(t,e,n){if(!mf(e))throw e;t.Ia.add(1),await K0(t),t.Aa.set("Offline"),n||(n=()=>AO(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Ge(nu,"Retrying IndexedDB access"),await n(),t.Ia.delete(1),await J1(t)})}function IO(t,e){return e().catch(n=>Wm(t,n,e))}async function ey(t){const e=gt(t),n=zl(e);let r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:Ab;for(;Jj(e);)try{const i=await kj(e.localStore,r);if(i===null){e.Pa.length===0&&n.B_();break}r=i.batchId,eV(e,i)}catch(i){await Wm(e,i)}DO(e)&&RO(e)}function Jj(t){return cu(t)&&t.Pa.length<10}function eV(t,e){t.Pa.push(e);const n=zl(t);n.x_()&&n.Z_&&n.X_(e.mutations)}function DO(t){return cu(t)&&!zl(t).M_()&&t.Pa.length>0}function RO(t){zl(t).start()}async function tV(t){zl(t).na()}async function nV(t){const e=zl(t);for(const n of t.Pa)e.X_(n.mutations)}async function rV(t,e,n){const r=t.Pa.shift(),i=Db.from(r,e,n);await IO(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await ey(t)}async function iV(t,e){e&&zl(t).Z_&&await async function(r,i){if(function(s){return lO(s)&&s!==Ae.ABORTED}(i.code)){const a=r.Pa.shift();zl(r).N_(),await IO(r,()=>r.remoteSyncer.rejectFailedWrite(a.batchId,i)),await ey(r)}}(t,e),DO(t)&&RO(t)}async function hI(t,e){const n=gt(t);n.asyncQueue.verifyOperationInProgress(),Ge(nu,"RemoteStore received new credentials");const r=cu(n);n.Ia.add(3),await K0(n),r&&n.Aa.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ia.delete(3),await J1(n)}async function aV(t,e){const n=gt(t);e?(n.Ia.delete(2),await J1(n)):e||(n.Ia.add(2),await K0(n),n.Aa.set("Unknown"))}function yf(t){return t.Va||(t.Va=function(n,r,i){const a=gt(n);return a.ia(),new zj(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)}(t.datastore,t.asyncQueue,{Zo:Xj.bind(null,t),e_:Kj.bind(null,t),n_:Qj.bind(null,t),J_:Zj.bind(null,t)}),t.da.push(async e=>{e?(t.Va.N_(),Vb(t)?jb(t):t.Aa.set("Unknown")):(await t.Va.stop(),TO(t))})),t.Va}function zl(t){return t.ma||(t.ma=function(n,r,i){const a=gt(n);return a.ia(),new $j(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)}(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),e_:tV.bind(null,t),n_:iV.bind(null,t),ea:nV.bind(null,t),ta:rV.bind(null,t)}),t.da.push(async e=>{e?(t.ma.N_(),await ey(t)):(await t.ma.stop(),t.Pa.length>0&&(Ge(nu,`Stopping write stream with ${t.Pa.length} pending writes`),t.Pa=[]))})),t.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ub{constructor(e,n,r,i,a){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new Ms,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,a){const s=Date.now()+r,o=new Ub(e,n,s,i,a);return o.start(r),o}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ue(Ae.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Hb(t,e){if(Io("AsyncQueue",`${e}: ${t}`),mf(t))return new Ue(Ae.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ld{static emptySet(e){return new Ld(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||Je.comparator(n.key,r.key):(n,r)=>Je.comparator(n.key,r.key),this.keyedMap=Yh(),this.sortedSet=new Wn(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ld)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Ld;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pI{constructor(){this.fa=new Wn(Je.comparator)}track(e){const n=e.doc.key,r=this.fa.get(n);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(n,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(n):e.type===1&&r.type===2?this.fa=this.fa.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):tt(63341,{At:e,ga:r}):this.fa=this.fa.insert(n,e)}pa(){const e=[];return this.fa.inorderTraversal((n,r)=>{e.push(r)}),e}}class Kd{constructor(e,n,r,i,a,s,o,c,d){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=c,this.hasCachedResults=d}static fromInitialDocuments(e,n,r,i,a){const s=[];return n.forEach(o=>{s.push({type:0,doc:o})}),new Kd(e,n,Ld.emptySet(n),s,r,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Y1(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sV{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}}class oV{constructor(){this.queries=gI(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(n,r){const i=gt(n),a=i.queries;i.queries=gI(),a.forEach((s,o)=>{for(const c of o.wa)c.onError(r)})})(this,new Ue(Ae.ABORTED,"Firestore shutting down"))}}function gI(){return new lu(t=>X4(t),Y1)}async function zb(t,e){const n=gt(t);let r=3;const i=e.query;let a=n.queries.get(i);a?!a.Sa()&&e.ba()&&(r=2):(a=new sV,r=e.ba()?0:1);try{switch(r){case 0:a.ya=await n.onListen(i,!0);break;case 1:a.ya=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(s){const o=Hb(s,`Initialization of query '${yd(e.query)}' failed`);return void e.onError(o)}n.queries.set(i,a),a.wa.push(e),e.va(n.onlineState),a.ya&&e.Ca(a.ya)&&Gb(n)}async function $b(t,e){const n=gt(t),r=e.query;let i=3;const a=n.queries.get(r);if(a){const s=a.wa.indexOf(e);s>=0&&(a.wa.splice(s,1),a.wa.length===0?i=e.ba()?0:1:!a.Sa()&&e.ba()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function lV(t,e){const n=gt(t);let r=!1;for(const i of e){const a=i.query,s=n.queries.get(a);if(s){for(const o of s.wa)o.Ca(i)&&(r=!0);s.ya=i}}r&&Gb(n)}function cV(t,e,n){const r=gt(t),i=r.queries.get(e);if(i)for(const a of i.wa)a.onError(n);r.queries.delete(e)}function Gb(t){t.Da.forEach(e=>{e.next()})}var fw,mI;(mI=fw||(fw={})).Fa="default",mI.Cache="cache";class Wb{constructor(e,n,r){this.query=e,this.Ma=n,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Kd(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),n=!0):this.Ba(e,this.onlineState)&&(this.La(e),n=!0),this.Oa=e,n}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let n=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),n=!0),n}Ba(e,n){if(!e.fromCache||!this.ba())return!0;const r=n!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const n=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}La(e){e=Kd.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==fw.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OO{constructor(e){this.key=e}}class MO{constructor(e){this.key=e}}class uV{constructor(e,n){this.query=e,this.Ha=n,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=kt(),this.mutatedKeys=kt(),this.Xa=K4(e),this.eu=new Ld(this.Xa)}get tu(){return this.Ha}nu(e,n){const r=n?n.ru:new pI,i=n?n.eu:this.eu;let a=n?n.mutatedKeys:this.mutatedKeys,s=i,o=!1;const c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,d=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((f,p)=>{const g=i.get(f),m=q1(this.query,p)?p:null,x=!!g&&this.mutatedKeys.has(g.key),b=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let A=!1;g&&m?g.data.isEqual(m.data)?x!==b&&(r.track({type:3,doc:m}),A=!0):this.iu(g,m)||(r.track({type:2,doc:m}),A=!0,(c&&this.Xa(m,c)>0||d&&this.Xa(m,d)<0)&&(o=!0)):!g&&m?(r.track({type:0,doc:m}),A=!0):g&&!m&&(r.track({type:1,doc:g}),A=!0,(c||d)&&(o=!0)),A&&(m?(s=s.add(m),a=b?a.add(f):a.delete(f)):(s=s.delete(f),a=a.delete(f)))}),this.query.limit!==null)for(;s.size>this.query.limit;){const f=this.query.limitType==="F"?s.last():s.first();s=s.delete(f.key),a=a.delete(f.key),r.track({type:1,doc:f})}return{eu:s,ru:r,Ds:o,mutatedKeys:a}}iu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const a=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const s=e.ru.pa();s.sort((f,p)=>function(m,x){const b=A=>{switch(A){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return tt(20277,{At:A})}};return b(m)-b(x)}(f.type,p.type)||this.Xa(f.doc,p.doc)),this.su(r),i=i!=null&&i;const o=n&&!i?this.ou():[],c=this.Za.size===0&&this.current&&!i?1:0,d=c!==this.Ya;return this.Ya=c,s.length!==0||d?{snapshot:new Kd(this.query,e.eu,a,s,e.mutatedKeys,c===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:o}:{_u:o}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new pI,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=kt(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});const n=[];return e.forEach(r=>{this.Za.has(r)||n.push(new MO(r))}),this.Za.forEach(r=>{e.has(r)||n.push(new OO(r))}),n}uu(e){this.Ha=e.qs,this.Za=kt();const n=this.nu(e.documents);return this.applyChanges(n,!0)}cu(){return Kd.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const Yb="SyncEngine";class dV{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class fV{constructor(e){this.key=e,this.lu=!1}}class hV{constructor(e,n,r,i,a,s){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=s,this.hu={},this.Pu=new lu(o=>X4(o),Y1),this.Tu=new Map,this.Iu=new Set,this.du=new Wn(Je.comparator),this.Eu=new Map,this.Au=new Mb,this.Ru={},this.Vu=new Map,this.mu=Xd.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function pV(t,e,n=!0){const r=FO(t);let i;const a=r.Pu.get(e);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),i=a.view.cu()):i=await PO(r,e,n,!0),i}async function gV(t,e){const n=FO(t);await PO(n,e,!0,!1)}async function PO(t,e,n,r){const i=await Nj(t.localStore,Ps(e)),a=i.targetId,s=t.sharedClientState.addLocalQueryTarget(a,n);let o;return r&&(o=await mV(t,e,a,s==="current",i.resumeToken)),t.isPrimaryClient&&n&&SO(t.remoteStore,i),o}async function mV(t,e,n,r,i){t.gu=(p,g,m)=>async function(b,A,E,S){let T=A.view.nu(E);T.Ds&&(T=await lI(b.localStore,A.query,!1).then(({documents:M})=>A.view.nu(M,T)));const I=S&&S.targetChanges.get(A.targetId),P=S&&S.targetMismatches.get(A.targetId)!=null,F=A.view.applyChanges(T,b.isPrimaryClient,I,P);return vI(b,A.targetId,F._u),F.snapshot}(t,p,g,m);const a=await lI(t.localStore,e,!0),s=new uV(e,a.qs),o=s.nu(a.documents),c=X0.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),d=s.applyChanges(o,t.isPrimaryClient,c);vI(t,n,d._u);const f=new dV(e,n,s);return t.Pu.set(e,f),t.Tu.has(n)?t.Tu.get(n).push(e):t.Tu.set(n,[e]),d.snapshot}async function yV(t,e,n){const r=gt(t),i=r.Pu.get(e),a=r.Tu.get(i.targetId);if(a.length>1)return r.Tu.set(i.targetId,a.filter(s=>!Y1(s,e))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await uw(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Bb(r.remoteStore,i.targetId),hw(r,i.targetId)}).catch(gf)):(hw(r,i.targetId),await uw(r.localStore,i.targetId,!0))}async function vV(t,e){const n=gt(t),r=n.Pu.get(e),i=n.Tu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Bb(n.remoteStore,r.targetId))}async function xV(t,e,n){const r=CV(t);try{const i=await function(s,o){const c=gt(s),d=Mn.now(),f=o.reduce((m,x)=>m.add(x.key),kt());let p,g;return c.persistence.runTransaction("Locally write mutations","readwrite",m=>{let x=Do(),b=kt();return c.Os.getEntries(m,f).next(A=>{x=A,x.forEach((E,S)=>{S.isValidDocument()||(b=b.add(E))})}).next(()=>c.localDocuments.getOverlayedDocuments(m,x)).next(A=>{p=A;const E=[];for(const S of o){const T=BF(S,p.get(S.key).overlayedDocument);T!=null&&E.push(new Xl(S.key,T,U4(T.value.mapValue),yr.exists(!0)))}return c.mutationQueue.addMutationBatch(m,d,E,o)}).next(A=>{g=A;const E=A.applyToLocalDocumentSet(p,b);return c.documentOverlayCache.saveOverlays(m,A.batchId,E)})}).then(()=>({batchId:g.batchId,changes:Z4(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,o,c){let d=s.Ru[s.currentUser.toKey()];d||(d=new Wn(St)),d=d.insert(o,c),s.Ru[s.currentUser.toKey()]=d}(r,i.batchId,n),await Q0(r,i.changes),await ey(r.remoteStore)}catch(i){const a=Hb(i,"Failed to persist write");n.reject(a)}}async function kO(t,e){const n=gt(t);try{const r=await Mj(n.localStore,e);e.targetChanges.forEach((i,a)=>{const s=n.Eu.get(a);s&&(Ht(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?s.lu=!0:i.modifiedDocuments.size>0?Ht(s.lu,14607):i.removedDocuments.size>0&&(Ht(s.lu,42227),s.lu=!1))}),await Q0(n,r,e)}catch(r){await gf(r)}}function yI(t,e,n){const r=gt(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Pu.forEach((a,s)=>{const o=s.view.va(e);o.snapshot&&i.push(o.snapshot)}),function(s,o){const c=gt(s);c.onlineState=o;let d=!1;c.queries.forEach((f,p)=>{for(const g of p.wa)g.va(o)&&(d=!0)}),d&&Gb(c)}(r.eventManager,e),i.length&&r.hu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function wV(t,e,n){const r=gt(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Eu.get(e),a=i&&i.key;if(a){let s=new Wn(Je.comparator);s=s.insert(a,zr.newNoDocument(a,lt.min()));const o=kt().add(a),c=new Q1(lt.min(),new Map,new Wn(St),s,o);await kO(r,c),r.du=r.du.remove(a),r.Eu.delete(e),qb(r)}else await uw(r.localStore,e,!1).then(()=>hw(r,e,n)).catch(gf)}async function bV(t,e){const n=gt(t),r=e.batch.batchId;try{const i=await Oj(n.localStore,e);LO(n,r,null),NO(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Q0(n,i)}catch(i){await gf(i)}}async function _V(t,e,n){const r=gt(t);try{const i=await function(s,o){const c=gt(s);return c.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let f;return c.mutationQueue.lookupMutationBatch(d,o).next(p=>(Ht(p!==null,37113),f=p.keys(),c.mutationQueue.removeMutationBatch(d,p))).next(()=>c.mutationQueue.performConsistencyCheck(d)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(d,f,o)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,f)).next(()=>c.localDocuments.getDocuments(d,f))})}(r.localStore,e);LO(r,e,n),NO(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Q0(r,i)}catch(i){await gf(i)}}function NO(t,e){(t.Vu.get(e)||[]).forEach(n=>{n.resolve()}),t.Vu.delete(e)}function LO(t,e,n){const r=gt(t);let i=r.Ru[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(n?a.reject(n):a.resolve(),i=i.remove(e)),r.Ru[r.currentUser.toKey()]=i}}function hw(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Tu.get(e))t.Pu.delete(r),n&&t.hu.pu(r,n);t.Tu.delete(e),t.isPrimaryClient&&t.Au.zr(e).forEach(r=>{t.Au.containsKey(r)||BO(t,r)})}function BO(t,e){t.Iu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(Bb(t.remoteStore,n),t.du=t.du.remove(e),t.Eu.delete(n),qb(t))}function vI(t,e,n){for(const r of n)r instanceof OO?(t.Au.addReference(r.key,e),AV(t,r)):r instanceof MO?(Ge(Yb,"Document no longer in limbo: "+r.key),t.Au.removeReference(r.key,e),t.Au.containsKey(r.key)||BO(t,r.key)):tt(19791,{yu:r})}function AV(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Iu.has(r)||(Ge(Yb,"New document in limbo: "+n),t.Iu.add(r),qb(t))}function qb(t){for(;t.Iu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Iu.values().next().value;t.Iu.delete(e);const n=new Je(un.fromString(e)),r=t.mu.next();t.Eu.set(r,new fV(n)),t.du=t.du.insert(n,r),SO(t.remoteStore,new Tl(Ps(W1(n.path)),r,"TargetPurposeLimboResolution",$1.ue))}}async function Q0(t,e,n){const r=gt(t),i=[],a=[],s=[];r.Pu.isEmpty()||(r.Pu.forEach((o,c)=>{s.push(r.gu(c,e,n).then(d=>{var f;if((d||n)&&r.isPrimaryClient){const p=d?!d.fromCache:(f=n==null?void 0:n.targetChanges.get(c.targetId))===null||f===void 0?void 0:f.current;r.sharedClientState.updateQueryState(c.targetId,p?"current":"not-current")}if(d){i.push(d);const p=kb.Es(c.targetId,d);a.push(p)}}))}),await Promise.all(s),r.hu.J_(i),await async function(c,d){const f=gt(c);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>Ie.forEach(d,g=>Ie.forEach(g.Is,m=>f.persistence.referenceDelegate.addReference(p,g.targetId,m)).next(()=>Ie.forEach(g.ds,m=>f.persistence.referenceDelegate.removeReference(p,g.targetId,m)))))}catch(p){if(!mf(p))throw p;Ge(Nb,"Failed to update sequence numbers: "+p)}for(const p of d){const g=p.targetId;if(!p.fromCache){const m=f.Fs.get(g),x=m.snapshotVersion,b=m.withLastLimboFreeSnapshotVersion(x);f.Fs=f.Fs.insert(g,b)}}}(r.localStore,a))}async function EV(t,e){const n=gt(t);if(!n.currentUser.isEqual(e)){Ge(Yb,"User change. New user:",e.toKey());const r=await _O(n.localStore,e);n.currentUser=e,function(a,s){a.Vu.forEach(o=>{o.forEach(c=>{c.reject(new Ue(Ae.CANCELLED,s))})}),a.Vu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Q0(n,r.Bs)}}function SV(t,e){const n=gt(t),r=n.Eu.get(e);if(r&&r.lu)return kt().add(r.key);{let i=kt();const a=n.Tu.get(e);if(!a)return i;for(const s of a){const o=n.Pu.get(s);i=i.unionWith(o.view.tu)}return i}}function FO(t){const e=gt(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=kO.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=SV.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=wV.bind(null,e),e.hu.J_=lV.bind(null,e.eventManager),e.hu.pu=cV.bind(null,e.eventManager),e}function CV(t){const e=gt(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=bV.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=_V.bind(null,e),e}class Ym{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Z1(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,n){return null}Fu(e,n){return null}vu(e){return Rj(this.persistence,new Tj,e.initialUser,this.serializer)}Du(e){return new bO(Pb.Vi,this.serializer)}bu(e){return new Bj}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Ym.provider={build:()=>new Ym};class TV extends Ym{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,n){Ht(this.persistence.referenceDelegate instanceof Gm,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new fj(r,e.asyncQueue,n)}Du(e){const n=this.cacheSizeBytes!==void 0?$i.withCacheSize(this.cacheSizeBytes):$i.DEFAULT;return new bO(r=>Gm.Vi(r,n),this.serializer)}}class pw{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>yI(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=EV.bind(null,this.syncEngine),await aV(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new oV}()}createDatastore(e){const n=Z1(e.databaseInfo.databaseId),r=function(a){return new Hj(a)}(e.databaseInfo);return function(a,s,o,c){return new Wj(a,s,o,c)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,a,s,o){return new qj(r,i,a,s,o)}(this.localStore,this.datastore,e.asyncQueue,n=>yI(this.syncEngine,n,0),function(){return dI.C()?new dI:new Fj}())}createSyncEngine(e,n){return function(i,a,s,o,c,d,f){const p=new hV(i,a,s,o,c,d);return f&&(p.fu=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const a=gt(i);Ge(nu,"RemoteStore shutting down."),a.Ia.add(5),await K0(a),a.Ea.shutdown(),a.Aa.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}pw.provider={build:()=>new pw};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xb{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):Io("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IV{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new Ue(Ae.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const n=await async function(i,a){const s=gt(i),o={documents:a.map(p=>$m(s.serializer,p))},c=await s.Jo("BatchGetDocuments",s.serializer.databaseId,un.emptyPath(),o,a.length),d=new Map;c.forEach(p=>{const g=XF(s.serializer,p);d.set(g.key.toString(),g)});const f=[];return a.forEach(p=>{const g=d.get(p.toString());Ht(!!g,55234,{key:p}),f.push(g)}),f}(this.datastore,e);return n.forEach(r=>this.recordVersion(r)),n}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new q0(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach(n=>{e.delete(n.key.toString())}),e.forEach((n,r)=>{const i=Je.fromPath(r);this.mutations.push(new oO(i,this.precondition(i)))}),await async function(r,i){const a=gt(r),s={writes:i.map(o=>mO(a.serializer,o))};await a.Wo("Commit",a.serializer.databaseId,un.emptyPath(),s)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw tt(50498,{Wu:e.constructor.name});n=lt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new Ue(Ae.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(lt.min())?yr.exists(!1):yr.updateTime(n):yr.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(lt.min()))throw new Ue(Ae.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return yr.updateTime(n)}return yr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DV{constructor(e,n,r,i,a){this.asyncQueue=e,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=a,this.Gu=r.maxAttempts,this.F_=new Lb(this.asyncQueue,"transaction_retry")}zu(){this.Gu-=1,this.ju()}ju(){this.F_.g_(async()=>{const e=new IV(this.datastore),n=this.Ju(e);n&&n.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.Hu(i)}))}).catch(r=>{this.Hu(r)})})}Ju(e){try{const n=this.updateFunction(e);return!W0(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}Hu(e){this.Gu>0&&this.Yu(e)?(this.Gu-=1,this.asyncQueue.enqueueAndForget(()=>(this.ju(),Promise.resolve()))):this.deferred.reject(e)}Yu(e){if(e.name==="FirebaseError"){const n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!lO(n)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $l="FirestoreClient";class RV{constructor(e,n,r,i,a){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=yi.UNAUTHENTICATED,this.clientId=bb.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(r,async s=>{Ge($l,"Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(Ge($l,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ms;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Hb(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function t2(t,e){t.asyncQueue.verifyOperationInProgress(),Ge($l,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await _O(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>{Fl("Terminating Firestore due to IndexedDb database deletion"),t.terminate().then(()=>{Ge("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(i=>{Fl("Terminating Firestore due to IndexedDb database deletion failed",i)})}),t._offlineComponents=e}async function xI(t,e){t.asyncQueue.verifyOperationInProgress();const n=await OV(t);Ge($l,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>hI(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>hI(e.remoteStore,i)),t._onlineComponents=e}async function OV(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Ge($l,"Using user provided OfflineComponentProvider");try{await t2(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===Ae.FAILED_PRECONDITION||i.code===Ae.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;Fl("Error using user provided cache. Falling back to memory cache: "+n),await t2(t,new Ym)}}else Ge($l,"Using default OfflineComponentProvider"),await t2(t,new TV(void 0));return t._offlineComponents}async function Kb(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Ge($l,"Using user provided OnlineComponentProvider"),await xI(t,t._uninitializedComponentsProvider._online)):(Ge($l,"Using default OnlineComponentProvider"),await xI(t,new pw))),t._onlineComponents}function MV(t){return Kb(t).then(e=>e.syncEngine)}function PV(t){return Kb(t).then(e=>e.datastore)}async function qm(t){const e=await Kb(t),n=e.eventManager;return n.onListen=pV.bind(null,e.syncEngine),n.onUnlisten=yV.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=gV.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=vV.bind(null,e.syncEngine),n}function kV(t,e,n={}){const r=new Ms;return t.asyncQueue.enqueueAndForget(async()=>function(a,s,o,c,d){const f=new Xb({next:g=>{f.Ou(),s.enqueueAndForget(()=>$b(a,p));const m=g.docs.has(o);!m&&g.fromCache?d.reject(new Ue(Ae.UNAVAILABLE,"Failed to get document because the client is offline.")):m&&g.fromCache&&c&&c.source==="server"?d.reject(new Ue(Ae.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(g)},error:g=>d.reject(g)}),p=new Wb(W1(o.path),f,{includeMetadataChanges:!0,ka:!0});return zb(a,p)}(await qm(t),t.asyncQueue,e,n,r)),r.promise}function NV(t,e,n={}){const r=new Ms;return t.asyncQueue.enqueueAndForget(async()=>function(a,s,o,c,d){const f=new Xb({next:g=>{f.Ou(),s.enqueueAndForget(()=>$b(a,p)),g.fromCache&&c.source==="server"?d.reject(new Ue(Ae.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(g)},error:g=>d.reject(g)}),p=new Wb(o,f,{includeMetadataChanges:!0,ka:!0});return zb(a,p)}(await qm(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jO(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wI=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VO="firestore.googleapis.com",bI=!0;class _I{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Ue(Ae.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=VO,this.ssl=bI}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:bI;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=wO;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<uj)throw new Ue(Ae.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}XB("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=jO((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new Ue(Ae.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new Ue(Ae.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new Ue(Ae.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Z0{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new _I({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ue(Ae.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ue(Ae.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new _I(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new VB;switch(r.type){case"firstParty":return new $B(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Ue(Ae.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=wI.get(n);r&&(Ge("ComponentProvider","Removing Datastore"),wI.delete(n),r.terminate())}(this),Promise.resolve()}}function LV(t,e,n,r={}){var i;t=li(t,Z0);const a=df(e),s=t._getSettings(),o=Object.assign(Object.assign({},s),{emulatorOptions:t._getEmulatorOptions()}),c=`${e}:${n}`;a&&(kR(`https://${c}`),NR("Firestore",!0)),s.host!==VO&&s.host!==c&&Fl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const d=Object.assign(Object.assign({},s),{host:c,ssl:a,emulatorOptions:r});if(!Qc(d,o)&&(t._setSettings(d),r.mockUserToken)){let f,p;if(typeof r.mockUserToken=="string")f=r.mockUserToken,p=yi.MOCK_USER;else{f=K5(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const g=r.mockUserToken.sub||r.mockUserToken.user_id;if(!g)throw new Ue(Ae.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new yi(g)}t._authCredentials=new UB(new D4(f,p))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $s{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new $s(this.firestore,e,this._query)}}class $n{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new kl(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new $n(this.firestore,e,this._key)}toJSON(){return{type:$n._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(G0(n,$n._jsonSchema))return new $n(e,r||null,new Je(un.fromString(n.referencePath)))}}$n._jsonSchemaVersion="firestore/documentReference/1.0",$n._jsonSchema={type:vr("string",$n._jsonSchemaVersion),referencePath:vr("string")};class kl extends $s{constructor(e,n,r){super(e,n,W1(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new $n(this.firestore,null,new Je(e))}withConverter(e){return new kl(this.firestore,e,this._path)}}function Gn(t,e,...n){if(t=Qn(t),_b("collection","path",e),t instanceof Z0){const r=un.fromString(e,...n);return NT(r),new kl(t,null,r)}{if(!(t instanceof $n||t instanceof kl))throw new Ue(Ae.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(un.fromString(e,...n));return NT(r),new kl(t.firestore,null,r)}}function Il(t,e){if(t=li(t,Z0),_b("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Ue(Ae.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new $s(t,null,function(r){return new ou(un.emptyPath(),r)}(e))}function ai(t,e,...n){if(t=Qn(t),arguments.length===1&&(e=bb.newId()),_b("doc","path",e),t instanceof Z0){const r=un.fromString(e,...n);return kT(r),new $n(t,null,new Je(r))}{if(!(t instanceof $n||t instanceof kl))throw new Ue(Ae.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(un.fromString(e,...n));return kT(r),new $n(t.firestore,t instanceof kl?t.converter:null,new Je(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AI="AsyncQueue";class EI{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new Lb(this,"async_queue_retry"),this.oc=()=>{const r=e2();r&&Ge(AI,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;const n=e2();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const n=e2();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});const n=new Ms;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!mf(e))throw e;Ge(AI,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(e){const n=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,Io("INTERNAL UNHANDLED ERROR: ",SI(r)),r}).then(r=>(this.nc=!1,r))));return this._c=n,n}enqueueAfterDelay(e,n,r){this.ac(),this.sc.indexOf(e)>-1&&(n=0);const i=Ub.createAndSchedule(this,e,n,r,a=>this.lc(a));return this.ec.push(i),i}ac(){this.tc&&tt(47125,{hc:SI(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const n of this.ec)if(n.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.ec)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){const n=this.ec.indexOf(e);this.ec.splice(n,1)}}function SI(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CI(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const a of r)if(a in i&&typeof i[a]=="function")return!0;return!1}(t,["next","error","complete"])}class es extends Z0{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new EI,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new EI(e),this._firestoreClient=void 0,await e}}}function BV(t,e){const n=typeof t=="object"?t:jR(),r=typeof t=="string"?t:Fm,i=ub(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const a=q5("firestore");a&&LV(i,...a)}return i}function vf(t){if(t._terminated)throw new Ue(Ae.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||FV(t),t._firestoreClient}function FV(t){var e,n,r;const i=t._freezeSettings(),a=function(o,c,d,f){return new oF(o,c,d,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,jO(f.experimentalLongPollingOptions),f.useFetchStreams,f.isUsingEmulator)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new RV(t._authCredentials,t._appCheckCredentials,t._queue,a,t._componentsProvider&&function(o){const c=o==null?void 0:o._online.build();return{_offline:o==null?void 0:o._offline.build(c),_online:c}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ra{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ra(ui.fromBase64String(e))}catch(n){throw new Ue(Ae.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new ra(ui.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:ra._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(G0(e,ra._jsonSchema))return ra.fromBase64String(e.bytes)}}ra._jsonSchemaVersion="firestore/bytes/1.0",ra._jsonSchema={type:vr("string",ra._jsonSchemaVersion),bytes:vr("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xf{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Ue(Ae.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new si(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ty{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ks{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Ue(Ae.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Ue(Ae.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return St(this._lat,e._lat)||St(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:ks._jsonSchemaVersion}}static fromJSON(e){if(G0(e,ks._jsonSchema))return new ks(e.latitude,e.longitude)}}ks._jsonSchemaVersion="firestore/geoPoint/1.0",ks._jsonSchema={type:vr("string",ks._jsonSchemaVersion),latitude:vr("number"),longitude:vr("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ns{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let a=0;a<r.length;++a)if(r[a]!==i[a])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Ns._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(G0(e,Ns._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new Ns(e.vectorValues);throw new Ue(Ae.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ns._jsonSchemaVersion="firestore/vectorValue/1.0",Ns._jsonSchema={type:vr("string",Ns._jsonSchemaVersion),vectorValues:vr("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jV=/^__.*__$/;class VV{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Xl(e,this.data,this.fieldMask,n,this.fieldTransforms):new Y0(e,this.data,n,this.fieldTransforms)}}class UO{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Xl(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function HO(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw tt(40011,{Ec:t})}}class Qb{constructor(e,n,r,i,a,s){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,a===void 0&&this.Ac(),this.fieldTransforms=a||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new Qb(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Rc({path:r,mc:!1});return i.fc(e),i}gc(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Rc({path:r,mc:!1});return i.Ac(),i}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return Xm(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(HO(this.Ec)&&jV.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class UV{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Z1(e)}Dc(e,n,r,i=!1){return new Qb({Ec:e,methodName:n,bc:r,path:si.emptyPath(),mc:!1,Sc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function wf(t){const e=t._freezeSettings(),n=Z1(t._databaseId);return new UV(t._databaseId,!!e.ignoreUndefinedProperties,n)}function ny(t,e,n,r,i,a={}){const s=t.Dc(a.merge||a.mergeFields?2:0,e,n,i);t_("Data must be an object, but it was:",s,r);const o=zO(r,s);let c,d;if(a.merge)c=new aa(s.fieldMask),d=s.fieldTransforms;else if(a.mergeFields){const f=[];for(const p of a.mergeFields){const g=gw(e,p,n);if(!s.contains(g))throw new Ue(Ae.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);GO(f,g)||f.push(g)}c=new aa(f),d=s.fieldTransforms.filter(p=>c.covers(p.field))}else c=null,d=s.fieldTransforms;return new VV(new Pi(o),c,d)}class ry extends ty{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof ry}}class Zb extends ty{_toFieldTransform(e){return new PF(e.path,new A0)}isEqual(e){return e instanceof Zb}}function Jb(t,e,n,r){const i=t.Dc(1,e,n);t_("Data must be an object, but it was:",i,r);const a=[],s=Pi.empty();ql(r,(c,d)=>{const f=n_(e,c,n);d=Qn(d);const p=i.gc(f);if(d instanceof ry)a.push(f);else{const g=J0(d,p);g!=null&&(a.push(f),s.set(f,g))}});const o=new aa(a);return new UO(s,o,i.fieldTransforms)}function e_(t,e,n,r,i,a){const s=t.Dc(1,e,n),o=[gw(e,r,n)],c=[i];if(a.length%2!=0)throw new Ue(Ae.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<a.length;g+=2)o.push(gw(e,a[g])),c.push(a[g+1]);const d=[],f=Pi.empty();for(let g=o.length-1;g>=0;--g)if(!GO(d,o[g])){const m=o[g];let x=c[g];x=Qn(x);const b=s.gc(m);if(x instanceof ry)d.push(m);else{const A=J0(x,b);A!=null&&(d.push(m),f.set(m,A))}}const p=new aa(d);return new UO(f,p,s.fieldTransforms)}function HV(t,e,n,r=!1){return J0(n,t.Dc(r?4:3,e))}function J0(t,e){if($O(t=Qn(t)))return t_("Unsupported field value:",e,t),zO(t,e);if(t instanceof ty)return function(r,i){if(!HO(i.Ec))throw i.wc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.wc(`${r._methodName}() is not currently supported inside arrays`);const a=r._toFieldTransform(i);a&&i.fieldTransforms.push(a)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return function(r,i){const a=[];let s=0;for(const o of r){let c=J0(o,i.yc(s));c==null&&(c={nullValue:"NULL_VALUE"}),a.push(c),s++}return{arrayValue:{values:a}}}(t,e)}return function(r,i){if((r=Qn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return RF(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const a=Mn.fromDate(r);return{timestampValue:zm(i.serializer,a)}}if(r instanceof Mn){const a=new Mn(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:zm(i.serializer,a)}}if(r instanceof ks)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof ra)return{bytesValue:fO(i.serializer,r._byteString)};if(r instanceof $n){const a=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(a))throw i.wc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:Ob(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Ns)return function(s,o){return{mapValue:{fields:{[j4]:{stringValue:V4},[jm]:{arrayValue:{values:s.toArray().map(d=>{if(typeof d!="number")throw o.wc("VectorValues must only contain numeric values.");return Ib(o.serializer,d)})}}}}}}(r,i);throw i.wc(`Unsupported field value: ${z1(r)}`)}(t,e)}function zO(t,e){const n={};return P4(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ql(t,(r,i)=>{const a=J0(i,e.Vc(r));a!=null&&(n[r]=a)}),{mapValue:{fields:n}}}function $O(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Mn||t instanceof ks||t instanceof ra||t instanceof $n||t instanceof ty||t instanceof Ns)}function t_(t,e,n){if(!$O(n)||!O4(n)){const r=z1(n);throw r==="an object"?e.wc(t+" a custom object"):e.wc(t+" "+r)}}function gw(t,e,n){if((e=Qn(e))instanceof xf)return e._internalPath;if(typeof e=="string")return n_(t,e);throw Xm("Field path arguments must be of type string or ",t,!1,void 0,n)}const zV=new RegExp("[~\\*/\\[\\]]");function n_(t,e,n){if(e.search(zV)>=0)throw Xm(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new xf(...e.split("."))._internalPath}catch{throw Xm(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Xm(t,e,n,r,i){const a=r&&!r.isEmpty(),s=i!==void 0;let o=`Function ${e}() called with invalid data`;n&&(o+=" (via `toFirestore()`)"),o+=". ";let c="";return(a||s)&&(c+=" (found",a&&(c+=` in field ${r}`),s&&(c+=` in document ${i}`),c+=")"),new Ue(Ae.INVALID_ARGUMENT,o+t+c)}function GO(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Km{constructor(e,n,r,i,a){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new $n(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new $V(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(iy("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class $V extends Km{data(){return super.data()}}function iy(t,e){return typeof e=="string"?n_(t,e):e instanceof xf?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WO(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Ue(Ae.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class r_{}class i_ extends r_{}function Ln(t,e,...n){let r=[];e instanceof r_&&r.push(e),r=r.concat(n),function(a){const s=a.filter(c=>c instanceof a_).length,o=a.filter(c=>c instanceof ay).length;if(s>1||s>0&&o>0)throw new Ue(Ae.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class ay extends i_{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new ay(e,n,r)}_apply(e){const n=this._parse(e);return YO(e._query,n),new $s(e.firestore,e.converter,sw(e._query,n))}_parse(e){const n=wf(e.firestore);return function(a,s,o,c,d,f,p){let g;if(d.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new Ue(Ae.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){II(p,f);const x=[];for(const b of p)x.push(TI(c,a,b));g={arrayValue:{values:x}}}else g=TI(c,a,p)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||II(p,f),g=HV(o,s,p,f==="in"||f==="not-in");return mr.create(d,f,g)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function vn(t,e,n){const r=e,i=iy("where",t);return ay._create(i,r,n)}class a_ extends r_{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new a_(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Ja.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,a){let s=i;const o=a.getFlattenedFilters();for(const c of o)YO(s,c),s=sw(s,c)}(e._query,n),new $s(e.firestore,e.converter,sw(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class s_ extends i_{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new s_(e,n)}_apply(e){const n=function(i,a,s){if(i.startAt!==null)throw new Ue(Ae.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new Ue(Ae.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new _0(a,s)}(e._query,this._field,this._direction);return new $s(e.firestore,e.converter,function(i,a){const s=i.explicitOrderBy.concat([a]);return new ou(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function sy(t,e="asc"){const n=e,r=iy("orderBy",t);return s_._create(r,n)}class o_ extends i_{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new o_(e,n,r)}_apply(e){return new $s(e.firestore,e.converter,Um(e._query,this._limit,this._limitType))}}function Qm(t){return KB("limit",t),o_._create("limit",t,"F")}function TI(t,e,n){if(typeof(n=Qn(n))=="string"){if(n==="")throw new Ue(Ae.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!q4(e)&&n.indexOf("/")!==-1)throw new Ue(Ae.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(un.fromString(n));if(!Je.isDocumentKey(r))throw new Ue(Ae.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return zT(t,new Je(r))}if(n instanceof $n)return zT(t,n._key);throw new Ue(Ae.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${z1(n)}.`)}function II(t,e){if(!Array.isArray(t)||t.length===0)throw new Ue(Ae.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function YO(t,e){const n=function(i,a){for(const s of i)for(const o of s.getFlattenedFilters())if(a.indexOf(o.op)>=0)return o.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new Ue(Ae.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Ue(Ae.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class qO{convertValue(e,n="none"){switch(Hl(e)){case 0:return null;case 1:return e.booleanValue;case 2:return rr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ul(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw tt(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return ql(e,(i,a)=>{r[i]=this.convertValue(a,n)}),r}convertVectorValue(e){var n,r,i;const a=(i=(r=(n=e.fields)===null||n===void 0?void 0:n[jm].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>rr(s.doubleValue));return new Ns(a)}convertGeoPoint(e){return new ks(rr(e.latitude),rr(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=G1(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(x0(e));default:return null}}convertTimestamp(e){const n=Vl(e);return new Mn(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=un.fromString(e);Ht(xO(r),9688,{name:e});const i=new w0(r.get(1),r.get(3)),a=new Je(r.popFirst(5));return i.isEqual(n)||Io(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oy(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class GV extends qO{constructor(e){super(),this.firestore=e}convertBytes(e){return new ra(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new $n(this.firestore,null,n)}}class Ad{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Nl extends Km{constructor(e,n,r,i,a,s){super(e,n,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new bm(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(iy("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Ue(Ae.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Nl._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Nl._jsonSchemaVersion="firestore/documentSnapshot/1.0",Nl._jsonSchema={type:vr("string",Nl._jsonSchemaVersion),bundleSource:vr("string","DocumentSnapshot"),bundleName:vr("string"),bundle:vr("string")};class bm extends Nl{data(e={}){return super.data(e)}}class Yc{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Ad(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new bm(this._firestore,this._userDataWriter,r.key,r,new Ad(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Ue(Ae.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,a){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(o=>{const c=new bm(i._firestore,i._userDataWriter,o.doc.key,o.doc,new Ad(i._snapshot.mutatedKeys.has(o.doc.key),i._snapshot.fromCache),i.query.converter);return o.doc,{type:"added",doc:c,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(o=>a||o.type!==3).map(o=>{const c=new bm(i._firestore,i._userDataWriter,o.doc.key,o.doc,new Ad(i._snapshot.mutatedKeys.has(o.doc.key),i._snapshot.fromCache),i.query.converter);let d=-1,f=-1;return o.type!==0&&(d=s.indexOf(o.doc.key),s=s.delete(o.doc.key)),o.type!==1&&(s=s.add(o.doc),f=s.indexOf(o.doc.key)),{type:WV(o.type),doc:c,oldIndex:d,newIndex:f}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Ue(Ae.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Yc._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=bb.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],i=[];return this.docs.forEach(a=>{a._document!==null&&(n.push(a._document),r.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),i.push(a.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function WV(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return tt(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _m(t){t=li(t,$n);const e=li(t.firestore,es);return kV(vf(e),t._key).then(n=>KO(e,t,n))}Yc._jsonSchemaVersion="firestore/querySnapshot/1.0",Yc._jsonSchema={type:vr("string",Yc._jsonSchemaVersion),bundleSource:vr("string","QuerySnapshot"),bundleName:vr("string"),bundle:vr("string")};class ly extends qO{constructor(e){super(),this.firestore=e}convertBytes(e){return new ra(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new $n(this.firestore,null,n)}}function Hn(t){t=li(t,$s);const e=li(t.firestore,es),n=vf(e),r=new ly(e);return WO(t._query),NV(n,t._query).then(i=>new Yc(e,r,t,i))}function Zm(t,e,n){t=li(t,$n);const r=li(t.firestore,es),i=oy(t.converter,e,n);return ep(r,[ny(wf(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,yr.none())])}function cy(t,e,n,...r){t=li(t,$n);const i=li(t.firestore,es),a=wf(i);let s;return s=typeof(e=Qn(e))=="string"||e instanceof xf?e_(a,"updateDoc",t._key,e,n,r):Jb(a,"updateDoc",t._key,e),ep(i,[s.toMutation(t._key,yr.exists(!0))])}function XO(t){return ep(li(t.firestore,es),[new q0(t._key,yr.none())])}function C0(t,e){const n=li(t.firestore,es),r=ai(t),i=oy(t.converter,e);return ep(n,[ny(wf(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,yr.exists(!1))]).then(()=>r)}function YV(t,...e){var n,r,i;t=Qn(t);let a={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||CI(e[s])||(a=e[s++]);const o={includeMetadataChanges:a.includeMetadataChanges,source:a.source};if(CI(e[s])){const p=e[s];e[s]=(n=p.next)===null||n===void 0?void 0:n.bind(p),e[s+1]=(r=p.error)===null||r===void 0?void 0:r.bind(p),e[s+2]=(i=p.complete)===null||i===void 0?void 0:i.bind(p)}let c,d,f;if(t instanceof $n)d=li(t.firestore,es),f=W1(t._key.path),c={next:p=>{e[s]&&e[s](KO(d,t,p))},error:e[s+1],complete:e[s+2]};else{const p=li(t,$s);d=li(p.firestore,es),f=p._query;const g=new ly(d);c={next:m=>{e[s]&&e[s](new Yc(d,g,p,m))},error:e[s+1],complete:e[s+2]},WO(t._query)}return function(g,m,x,b){const A=new Xb(b),E=new Wb(m,A,x);return g.asyncQueue.enqueueAndForget(async()=>zb(await qm(g),E)),()=>{A.Ou(),g.asyncQueue.enqueueAndForget(async()=>$b(await qm(g),E))}}(vf(d),f,o,c)}function ep(t,e){return function(r,i){const a=new Ms;return r.asyncQueue.enqueueAndForget(async()=>xV(await MV(r),i,a)),a.promise}(vf(t),e)}function KO(t,e,n){const r=n.docs.get(e._key),i=new ly(t);return new Nl(t,i,e._key,r,new Ad(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qV={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XV{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=wf(e)}set(e,n,r){this._verifyNotCommitted();const i=Dl(e,this._firestore),a=oy(i.converter,n,r),s=ny(this._dataReader,"WriteBatch.set",i._key,a,i.converter!==null,r);return this._mutations.push(s.toMutation(i._key,yr.none())),this}update(e,n,r,...i){this._verifyNotCommitted();const a=Dl(e,this._firestore);let s;return s=typeof(n=Qn(n))=="string"||n instanceof xf?e_(this._dataReader,"WriteBatch.update",a._key,n,r,i):Jb(this._dataReader,"WriteBatch.update",a._key,n),this._mutations.push(s.toMutation(a._key,yr.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Dl(e,this._firestore);return this._mutations=this._mutations.concat(new q0(n._key,yr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ue(Ae.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Dl(t,e){if((t=Qn(t)).firestore!==e)throw new Ue(Ae.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KV{constructor(e,n){this._firestore=e,this._transaction=n,this._dataReader=wf(e)}get(e){const n=Dl(e,this._firestore),r=new GV(this._firestore);return this._transaction.lookup([n._key]).then(i=>{if(!i||i.length!==1)return tt(24041);const a=i[0];if(a.isFoundDocument())return new Km(this._firestore,r,a.key,a,n.converter);if(a.isNoDocument())return new Km(this._firestore,r,n._key,null,n.converter);throw tt(18433,{doc:a})})}set(e,n,r){const i=Dl(e,this._firestore),a=oy(i.converter,n,r),s=ny(this._dataReader,"Transaction.set",i._key,a,i.converter!==null,r);return this._transaction.set(i._key,s),this}update(e,n,r,...i){const a=Dl(e,this._firestore);let s;return s=typeof(n=Qn(n))=="string"||n instanceof xf?e_(this._dataReader,"Transaction.update",a._key,n,r,i):Jb(this._dataReader,"Transaction.update",a._key,n),this._transaction.update(a._key,s),this}delete(e){const n=Dl(e,this._firestore);return this._transaction.delete(n._key),this}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QV extends KV{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=Dl(e,this._firestore),r=new ly(this._firestore);return super.get(e).then(i=>new Nl(this._firestore,r,n._key,i._document,new Ad(!1,!1),n.converter))}}function ZV(t,e,n){t=li(t,es);const r=Object.assign(Object.assign({},qV),n);return function(a){if(a.maxAttempts<1)throw new Ue(Ae.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(a,s,o){const c=new Ms;return a.asyncQueue.enqueueAndForget(async()=>{const d=await PV(a);new DV(a.asyncQueue,d,o,s,c).zu()}),c.promise}(vf(t),i=>e(new QV(t,i)),r)}function ir(){return new Zb("serverTimestamp")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JV(t){return vf(t=li(t,es)),new XV(t,e=>ep(t,e))}(function(e,n=!0){(function(i){pf=i})(ff),Gd(new Zc("firestore",(r,{instanceIdentifier:i,options:a})=>{const s=r.getProvider("app").getImmediate(),o=new es(new HB(r.getProvider("auth-internal")),new GB(s,r.getProvider("app-check-internal")),function(d,f){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new Ue(Ae.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new w0(d.options.projectId,f)}(s,i),s);return a=Object.assign({useFetchStreams:n},a),o._setSettings(a),o},"PUBLIC").setMultipleInstances(!0)),Ml(DT,RT,e),Ml(DT,RT,"esm2017")})();const eU={apiKey:"AIzaSyBg60nFX2rmrW66n3lPeXRLTfMhjlgFrEE",authDomain:"project-01-bookmemo-prod.firebaseapp.com",projectId:"project-01-bookmemo-prod",storageBucket:"project-01-bookmemo-prod.firebasestorage.app",messagingSenderId:"414976225343",appId:"1:414976225343:web:31244d8c1ffe3b6f89088a"},QO=FR(eU),Jm=LB(QO),vt=BV(QO),ZO=O.createContext();function tU({children:t}){const[e,n]=O.useState(null),[r,i]=O.useState(!0);O.useEffect(()=>{const s=E7(Jm,o=>{n(o),i(!1)});return()=>s()},[]);const a=O.useCallback(async()=>{try{await S7(Jm)}catch(s){throw console.error(":",s),s}},[]);return v.jsx(ZO.Provider,{value:{user:e,loading:r,signOut:a},children:t})}function jn(){return O.useContext(ZO)}function nU(){const[t,e]=O.useState(""),[n,r]=O.useState(""),[i,a]=O.useState(""),[s,o]=O.useState(!1),c=No(),d=async f=>{if(f.preventDefault(),!s){o(!0),a("");try{await b7(Jm,t,n),c("/")}catch(p){a(p.message)}finally{o(!1)}}};return v.jsxs(re,{component:"form",onSubmit:d,sx:{maxWidth:400,mx:"auto",mt:8},children:[v.jsx(te,{variant:"h5",align:"center",gutterBottom:!0,"data-testid":"login-title",children:""}),v.jsx(ct,{label:"",type:"email",value:t,onChange:f=>e(f.target.value),fullWidth:!0,margin:"normal",required:!0,inputProps:{"data-testid":"login-email-input"}}),v.jsx(ct,{label:"",type:"password",value:n,onChange:f=>r(f.target.value),fullWidth:!0,margin:"normal",required:!0,inputProps:{"data-testid":"login-password-input"}}),i&&v.jsx(te,{color:"error",children:i}),v.jsx(ze,{type:"submit",variant:"contained",fullWidth:!0,sx:{mt:2},"data-testid":"login-submit",disabled:s,children:s?"...":""})]})}function rU(){const[t,e]=O.useState(""),[n,r]=O.useState(""),[i,a]=O.useState(""),[s,o]=O.useState(!1),c=async d=>{if(d.preventDefault(),!s){o(!0),a("");try{await w7(Jm,t,n)}catch(f){a(f.message)}finally{o(!1)}}};return v.jsxs(re,{component:"form",onSubmit:c,sx:{maxWidth:400,mx:"auto",mt:8},children:[v.jsx(te,{variant:"h5",align:"center",gutterBottom:!0,children:""}),v.jsx(ct,{label:"",type:"email",value:t,onChange:d=>e(d.target.value),fullWidth:!0,margin:"normal",required:!0}),v.jsx(ct,{label:"",type:"password",value:n,onChange:d=>r(d.target.value),fullWidth:!0,margin:"normal",required:!0}),i&&v.jsx(te,{color:"error",children:i}),v.jsx(ze,{type:"submit",variant:"contained",fullWidth:!0,sx:{mt:2},disabled:s,children:s?"...":""})]})}const ft={TSUNDOKU:"tsundoku",READING:"reading",SUSPENDED:"suspended",RE_READING:"re-reading",FINISHED:"finished"},Qa={BOUGHT:"bought",BORROWED:"borrowed",GIFT:"gift",UNKNOWN:"unknown"},T0={[ft.TSUNDOKU]:"",[ft.READING]:"",[ft.SUSPENDED]:"",[ft.RE_READING]:"",[ft.FINISHED]:""},DI={[Qa.BOUGHT]:"",[Qa.BORROWED]:"",[Qa.GIFT]:"",[Qa.UNKNOWN]:""},mw={[ft.TSUNDOKU]:"default",[ft.READING]:"primary",[ft.SUSPENDED]:"warning",[ft.RE_READING]:"secondary",[ft.FINISHED]:"success"},Cr=ft.TSUNDOKU,l_=[ft.TSUNDOKU,ft.READING,ft.SUSPENDED,ft.RE_READING,ft.FINISHED],iU=[Qa.BOUGHT,Qa.BORROWED,Qa.GIFT,Qa.UNKNOWN],yn={ALL:"all",TSUNDOKU:ft.TSUNDOKU,READING_GROUP:"reading-group",READING:ft.READING,SUSPENDED:ft.SUSPENDED,RE_READING:ft.RE_READING,FINISHED:ft.FINISHED},wd={[yn.ALL]:"",[yn.TSUNDOKU]:"",[yn.READING_GROUP]:"",[yn.READING]:"",[yn.SUSPENDED]:"",[yn.RE_READING]:"",[yn.FINISHED]:""},e1=t=>l_.includes(t),Us=t=>T0[t]||T0[Cr],bs=t=>mw[t]||mw[Cr],JO=t=>DI[t]||DI[Qa.UNKNOWN],n2={fill:"rgba(184, 134, 11, 0.4)",stroke:"rgba(139, 69, 19, 0.5)",strokeInner:"rgba(184, 134, 11, 0.3)"};function Ts({position:t="top-left",size:e=24,accentKey:n="brown"}){var f,p,g,m;const r=di(),i=(p=(f=r.palette)==null?void 0:f.decorative)==null?void 0:p.gold,a=(m=(g=r.palette)==null?void 0:g.decorative)==null?void 0:m[n],s=(i==null?void 0:i.stroke)||n2.fill,o=(a==null?void 0:a.main)||(a==null?void 0:a.border)||n2.stroke,c=(i==null?void 0:i.strokeLight)||(i==null?void 0:i.accent)||n2.strokeInner,d={"top-left":{top:0,left:0,transform:"rotate(0deg)"},"top-right":{top:0,right:0,transform:"rotate(90deg)"},"bottom-left":{bottom:0,left:0,transform:"rotate(-90deg)"},"bottom-right":{bottom:0,right:0,transform:"rotate(180deg)"}};return v.jsx(re,{sx:{position:"absolute",...d[t],width:e,height:e,opacity:.4,pointerEvents:"none",zIndex:2},"aria-hidden":"true",children:v.jsxs("svg",{width:e,height:e,viewBox:"0 0 24 24",children:[v.jsx("path",{d:"M 0 0 L 24 0 L 24 4 L 4 4 L 4 24 L 0 24 Z",fill:s,stroke:o,strokeWidth:"0.5"}),v.jsx("path",{d:"M 2 2 L 22 2 L 22 6 L 6 6 L 6 22 L 2 22 Z",fill:"none",stroke:c,strokeWidth:"0.3"})]})})}const eM={light:"rgba(139, 69, 19, 0.2)",lighter:"rgba(139, 69, 19, 0.1)",borderHover:"rgba(139, 69, 19, 0.3)"},tM={light:"rgba(123, 104, 238, 0.25)",lighter:"rgba(123, 104, 238, 0.12)",borderHover:"rgba(123, 104, 238, 0.4)",shadow:"rgba(123, 104, 238, 0.08)",shadowHover:"rgba(123, 104, 238, 0.12)"},nM="0 8px 32px rgba(0, 0, 0, 0.12), 0 2px 8px rgba(0, 0, 0, 0.08), inset 0 1px 0 rgba(255, 255, 255, 0.5)",rM="0 12px 40px rgba(0, 0, 0, 0.16), 0 4px 12px rgba(0, 0, 0, 0.12), inset 0 1px 0 rgba(255, 255, 255, 0.6)";function uy(t,e={}){var g,m,x,b,A,E,S,T,I;const{hover:n=!0,hoverTransform:r=!0,overrides:i={}}=e,a=((g=t.custom)==null?void 0:g.bookAccent)??((m=t.custom)==null?void 0:m.cardAccent)??"brown",s=((b=(x=t.palette)==null?void 0:x.decorative)==null?void 0:b[a])||eM,o=((A=t.custom)==null?void 0:A.bookDecorations)??((E=t.custom)==null?void 0:E.cardDecorations)??{innerBorder:!0,centerLine:!0},c=((S=t.custom)==null?void 0:S.glassEffect)??{opacity:.75,blur:"20px",saturate:"180%"},d=((T=t.custom)==null?void 0:T.cardShadow)??nM,f=((I=t.custom)==null?void 0:I.cardShadowHover)??rM,p={backgroundColor:`rgba(255, 255, 255, ${c.opacity})`,backdropFilter:`blur(${c.blur}) saturate(${c.saturate})`,border:`2px solid ${s.light}`,borderRadius:3,boxShadow:d,position:"relative",overflow:"visible",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",...o.innerBorder&&{"&::before":{content:'""',position:"absolute",top:8,left:8,right:8,bottom:8,border:`1px solid ${s.lighter}`,borderRadius:2,pointerEvents:"none",zIndex:0}},...o.centerLine&&{"&::after":{content:'""',position:"absolute",top:0,left:"50%",width:1,height:"100%",background:`linear-gradient(to bottom, transparent, ${s.lighter}, transparent)`,pointerEvents:"none",zIndex:0}}};return n&&(p["&:hover"]={boxShadow:f,borderColor:s.borderHover||s.light},r&&(p["&:hover"].transform="translateY(-4px)")),{...p,...i}}function iM(t,e={}){var b,A,E,S,T,I,P,F,M;const{hover:n=!0,hoverTransform:r=!1,useMemoAccentShadow:i=!1,borderRadius:a=3,innerBorderInset:s=8,overrides:o={}}=e,c=((b=t.custom)==null?void 0:b.memoAccent)??((A=t.custom)==null?void 0:A.cardAccent)??"memo",d=((S=(E=t.palette)==null?void 0:E.decorative)==null?void 0:S[c])||tM,f=((T=t.custom)==null?void 0:T.memoDecorations)??((I=t.custom)==null?void 0:I.cardDecorations)??{innerBorder:!0,centerLine:!0},p=((P=t.custom)==null?void 0:P.glassEffect)??{opacity:.75,blur:"20px",saturate:"180%"};let g=((F=t.custom)==null?void 0:F.cardShadow)??nM,m=((M=t.custom)==null?void 0:M.cardShadowHover)??rM;if(i){const D=d.shadow||"rgba(123, 104, 238, 0.08)",R=d.shadowHover||d.shadow||"rgba(123, 104, 238, 0.12)";g=`0 6px 24px rgba(0, 0, 0, 0.1), 0 2px 8px ${D}, inset 0 1px 0 rgba(255, 255, 255, 0.6)`,m=`0 10px 32px rgba(0, 0, 0, 0.12), 0 4px 12px ${R}, inset 0 1px 0 rgba(255, 255, 255, 0.65)`}const x={backgroundColor:`rgba(255, 255, 255, ${p.opacity})`,backdropFilter:`blur(${p.blur}) saturate(${p.saturate})`,border:`2px solid ${d.light}`,borderRadius:a,boxShadow:g,position:"relative",overflow:"visible",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",...f.innerBorder&&{"&::before":{content:'""',position:"absolute",top:s,left:s,right:s,bottom:s,border:`1px solid ${d.lighter}`,borderRadius:Math.max(1,a-1),pointerEvents:"none",zIndex:0}},...f.centerLine&&{"&::after":{content:'""',position:"absolute",top:0,left:"50%",width:1,height:"100%",background:`linear-gradient(to bottom, transparent, ${d.lighter}, transparent)`,pointerEvents:"none",zIndex:0}}};return n&&(x["&:hover"]={boxShadow:m,borderColor:d.borderHover||d.light},r&&(x["&:hover"].transform=typeof r=="string"?`translateY(${r})`:"translateY(-4px)")),{...x,...o}}function dy(t){var n,r,i,a;const e=((n=t.custom)==null?void 0:n.bookAccent)??((r=t.custom)==null?void 0:r.cardAccent)??"brown";return{key:e,palette:((a=(i=t.palette)==null?void 0:i.decorative)==null?void 0:a[e])||eM}}function aU(t){var n,r,i,a;const e=((n=t.custom)==null?void 0:n.memoAccent)??((r=t.custom)==null?void 0:r.cardAccent)??"memo";return{key:e,palette:((a=(i=t.palette)==null?void 0:i.decorative)==null?void 0:a[e])||tM}}function c_(t){var e,n;return((e=t.custom)==null?void 0:e.bookDecorations)??((n=t.custom)==null?void 0:n.cardDecorations)??{corners:!0,innerBorder:!0,centerLine:!0}}function aM(t){var e,n;return((e=t.custom)==null?void 0:e.memoDecorations)??((n=t.custom)==null?void 0:n.cardDecorations)??{corners:!0,innerBorder:!0,centerLine:!0}}function sU({book:t,onClick:e,testId:n}){const r=di(),i=uy(r,{overrides:{cursor:"pointer",height:"100%",display:"flex",flexDirection:"column",minHeight:{xs:"140px",sm:"160px"}}}),{key:a}=dy(r),s=c_(r);return v.jsxs(Sn,{sx:i,onClick:e,"data-testid":n||`book-card-${t.id}`,children:[s.corners&&v.jsxs(v.Fragment,{children:[v.jsx(Ts,{position:"top-left",size:20,accentKey:a}),v.jsx(Ts,{position:"top-right",size:20,accentKey:a})]}),v.jsx(Cn,{sx:{flex:1,display:"flex",flexDirection:"column",p:{xs:1.5,sm:2},position:"relative",zIndex:1,"&:last-child":{pb:{xs:1.5,sm:2}}},children:v.jsxs(re,{sx:{display:"flex",alignItems:"flex-start",gap:{xs:1.5,sm:2},height:"100%"},children:[t.coverImageUrl&&v.jsx(fR,{component:"img",sx:{width:{xs:50,sm:60},height:{xs:70,sm:80},objectFit:"cover",flexShrink:0,borderRadius:1},image:t.coverImageUrl,alt:t.title}),v.jsxs(re,{sx:{flex:1,minWidth:0,display:"flex",flexDirection:"column",height:"100%"},children:[v.jsx(te,{variant:"h6",component:"h3",gutterBottom:!0,sx:{fontSize:{xs:"0.9rem",sm:"1rem",md:"1.1rem"},lineHeight:1.2,fontWeight:600,mb:.5,overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical"},children:t.title||""}),v.jsx(te,{variant:"body2",color:"text.secondary",sx:{fontSize:{xs:"0.75rem",sm:"0.8rem",md:"0.9rem"},mb:.5,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:t.author||""}),v.jsx(re,{sx:{mb:1},children:v.jsx(dn,{label:Us(t.status||Cr),color:bs(t.status||Cr),size:"small",sx:{fontSize:{xs:"0.65rem",sm:"0.7rem",md:"0.75rem"},height:{xs:"18px",sm:"20px",md:"22px"},"& .MuiChip-label":{px:{xs:.5,sm:.75}}}})}),(t.publisher||t.publishedDate)&&v.jsxs(te,{variant:"body2",color:"text.secondary",sx:{fontSize:{xs:"0.7rem",sm:"0.75rem",md:"0.8rem"},mb:1,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:[t.publisher," ",t.publisher&&t.publishedDate&&""," ",t.publishedDate]}),v.jsx(re,{sx:{minHeight:{xs:"32px",sm:"36px"},mb:1,display:"flex",flexWrap:"wrap",gap:.5},children:t.tags&&t.tags.length>0?t.tags.slice(0,3).map((o,c)=>v.jsx(dn,{label:o,size:"small",variant:"outlined",sx:{fontSize:{xs:"0.65rem",sm:"0.7rem",md:"0.75rem"},height:{xs:"18px",sm:"20px",md:"22px"},"& .MuiChip-label":{px:{xs:.5,sm:.75}}}},c)):v.jsx(te,{variant:"caption",color:"text.secondary",sx:{fontSize:{xs:"0.65rem",sm:"0.7rem",md:"0.75rem"},alignSelf:"center"},children:""})}),v.jsxs(te,{variant:"caption",color:"text.secondary",sx:{mt:"auto",fontSize:{xs:"0.65rem",sm:"0.7rem",md:"0.75rem"},fontWeight:500},children:[": ",Us(t.status||Cr)]})]})]})})]})}var oU={};const yw=()=>typeof process<"u"&&oU?!0:typeof window<"u"&&window.location?window.location.hostname!=="localhost"&&window.location.hostname!=="127.0.0.1":!1,lU=()=>yw()?"/project-01-bookmemo":"",ti=t=>{const e=lU(),n=t.startsWith("/")?t:`/${t}`;return`${e}${n}`},Is={MANIFEST:()=>ti("/manifest.webmanifest"),SW_JS:()=>ti("/sw.js"),VITE_SVG:()=>ti("/vite.svg"),PAPER_TEXTURE:()=>ti("/paper-texture.jpg"),NOISE_TEXTURE:()=>ti("/noise.svg"),LIBRARY_PATTERN:()=>ti("/library-pattern.svg"),LIBRARY_BACKGROUND:()=>ti("/library-background.jpg"),ICON_192:()=>ti("/icons/icon-192x192.png"),ICON_512:()=>ti("/icons/icon-512x512.png"),APPLE_TOUCH_ICON:()=>ti("/icons/apple-touch-icon.png"),APPLE_TOUCH_ICON_512:()=>ti("/icons/apple-touch-icon-512x512.png"),ROOT:()=>ti("/"),ADD:()=>ti("/add"),SEARCH:()=>ti("/search"),SETTINGS:()=>ti("/settings"),IS_PRODUCTION:yw,IS_DEVELOPMENT:()=>!yw()},cU={border:"rgba(139, 69, 19, 0.25)",light:"rgba(139, 69, 19, 0.3)"},uU={accent:"rgba(184, 134, 11, 0.15)",subtle:"rgba(184, 134, 11, 0.08)"},dU={backgroundImage:"paper",goldOverlay:!0,centerLine:!0,borderRadius:{xs:16,sm:20},accentKey:"brown"},tp=({title:t,subtitle:e,children:n})=>{var p,g,m,x,b;const r=di(),i=((p=r.custom)==null?void 0:p.pageHeader)||dU,a=i.accentKey||"brown",s=((m=(g=r.palette)==null?void 0:g.decorative)==null?void 0:m[a])||cU,o=((b=(x=r.palette)==null?void 0:x.decorative)==null?void 0:b.gold)||uU,c=i.borderRadius??{xs:16,sm:20},d=i.backgroundImage==="paper",f={p:0,mb:3,position:"relative",overflow:"hidden",borderRadius:c,backgroundColor:"rgba(255, 255, 255, 0.7)",backdropFilter:"blur(24px) saturate(180%)",border:`3px solid ${s.border||s.light}`,backgroundImage:d?[`url("${Is.PAPER_TEXTURE()}")`,"linear-gradient(135deg, rgba(255, 255, 255, 0.7), rgba(255, 255, 255, 0.5))"]:"linear-gradient(135deg, rgba(255, 255, 255, 0.85), rgba(255, 255, 255, 0.7))",backgroundBlendMode:d?"overlay":"normal",backgroundSize:d?"200% 200%, cover":"cover",backgroundPosition:d?"0 0, center":"center",boxShadow:`
      0 18px 50px rgba(15, 23, 42, 0.15),
      0 4px 12px rgba(0, 0, 0, 0.1),
      inset 0 1px 0 rgba(255, 255, 255, 0.6)
    `,...i.goldOverlay&&{"&::before":{content:'""',position:"absolute",top:0,left:0,right:0,bottom:0,background:`
          linear-gradient(135deg, ${o.accent} 0%, transparent 30%),
          linear-gradient(225deg, ${o.accent} 0%, transparent 30%),
          linear-gradient(45deg, transparent 0%, ${o.subtle||o.accent} 50%, transparent 100%),
          linear-gradient(315deg, transparent 0%, ${o.subtle||o.accent} 50%, transparent 100%)
        `,pointerEvents:"none",zIndex:0}},...i.centerLine&&{"&::after":{content:'""',position:"absolute",top:"50%",left:"10%",right:"10%",height:2,background:`linear-gradient(90deg, transparent, ${s.light||s.border||"rgba(139, 69, 19, 0.3)"}, transparent)`,transform:"translateY(-50%)",pointerEvents:"none",zIndex:0}}};return v.jsx(Xn,{elevation:0,"data-testid":"page-header",sx:f,children:v.jsxs(re,{sx:{p:{xs:2,sm:3,md:4},textAlign:"center",color:"text.primary",position:"relative",zIndex:1},children:[v.jsx(te,{variant:"h4",component:"h1","data-testid":"page-header-title",sx:{fontWeight:700,fontSize:{xs:"1.5rem",sm:"2rem",md:"2.5rem"},mb:e?1:0,color:"rgba(15, 23, 42, 0.92)",letterSpacing:"-0.02em"},children:t}),e&&v.jsx(te,{variant:"body1","data-testid":"page-header-subtitle",sx:{opacity:.92,fontSize:{xs:"0.9rem",sm:"1rem"},color:"rgba(51, 65, 85, 0.92)"},children:e}),n&&v.jsx(re,{sx:{mt:2},children:n})]})})},fU=hR`
  0%, 80%, 100% {
    transform: scale(0.6);
    opacity: 0.5;
  }
  40% {
    transform: scale(1.1);
    opacity: 1;
  }
`,hU=hR`
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
`;function Bo({variant:t="inline",message:e,size:n="medium","data-testid":r="loading-indicator"}){const i=t==="fullPage",a=i?12:n==="small"?8:10,s=i?10:n==="small"?6:8,o={display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:i?2:1.5,animation:`${hU} 0.25s ease-out`,...i&&{minHeight:"50vh",width:"100%",py:4},...!i&&{padding:3}},c={display:"flex",alignItems:"center",justifyContent:"center",gap:s},d=f=>({width:a,height:a,borderRadius:"50%",bgcolor:"primary.main",animation:`${fU} 1.2s ease-in-out ${f} infinite both`,boxShadow:"0 2px 8px rgba(25, 118, 210, 0.35)"});return v.jsxs(re,{"data-testid":r,sx:o,children:[v.jsxs(re,{sx:c,children:[v.jsx(re,{sx:d(0)}),v.jsx(re,{sx:d(.15)}),v.jsx(re,{sx:d(.3)})]}),e&&v.jsx(te,{variant:i?"body1":"body2",color:"text.secondary",sx:{fontWeight:500},children:e})]})}const Pr=wi.createContext({setGlobalError:()=>{}}),pU=({open:t,message:e,onClose:n})=>v.jsxs(Ni,{open:t,onClose:n,maxWidth:"xs",fullWidth:!0,disableEscapeKeyDown:!1,disableBackdropClick:!1,children:[v.jsx(Yi,{sx:{color:"error.main",fontWeight:"bold"},children:""}),v.jsx(Li,{children:v.jsx(bi,{severity:"error",sx:{mb:2},children:e})}),v.jsx(Bi,{sx:{justifyContent:"center",pb:2},children:v.jsx(ze,{onClick:n,color:"error",variant:"contained",autoFocus:!0,children:""})})]}),gU=({children:t})=>{const[e,n]=O.useState(null),r=a=>{n(a)},i=()=>{n(null)};return v.jsxs(Pr.Provider,{value:{setGlobalError:r},children:[t,e&&v.jsx(pU,{open:!!e,message:e,onClose:i})]})};function Xh(t){return t?(n=>n.replace(/[---]/g,r=>String.fromCharCode(r.charCodeAt(0)-65248)))(String(t)).toLowerCase():""}function mU(t,e,n){return Array.isArray(t)?t.filter(i=>{if(e!==yn.ALL){const s=i.status||Cr;if(e===yn.READING_GROUP){if(![ft.READING,ft.RE_READING].includes(s))return!1}else if(s!==e)return!1}if(!n||!String(n).trim())return!0;const a=Xh(n);return i.title&&Xh(i.title).includes(a)||i.author&&Xh(i.author).includes(a)||Array.isArray(i.tags)&&i.tags.some(s=>Xh(s).includes(a))}):[]}function yU(t,e){const n=Array.isArray(t)?t:[],r=n.length,i=a=>n.filter(s=>(s.status||Cr)===a).length;return{total:r,tsundoku:i(ft.TSUNDOKU),reading:i(ft.READING),reReading:i(ft.RE_READING),finished:i(ft.FINISHED),filtered:Array.isArray(e)?e.length:0}}const vU=()=>{try{if(typeof wi>"u"||!wi.useState)return{allBooks:[],filteredBooks:[],stats:{total:0,tsundoku:0,reading:0,reReading:0,finished:0,filtered:0},loading:!1,error:null,filter:yn.READING,searchText:"",fetchBooks:async()=>{},handleFilterChange:()=>{},handleSearchChange:()=>{},clearSearch:()=>{},clearFilter:()=>{},normalizeTag:()=>""}}catch(I){return console.warn("React context not available in useBookList:",I),{allBooks:[],filteredBooks:[],stats:{total:0,reading:0,finished:0,filtered:0},loading:!1,error:null,filter:"reading",searchText:"",fetchBooks:async()=>{},handleFilterChange:()=>{},handleSearchChange:()=>{},clearSearch:()=>{},clearFilter:()=>{},normalizeTag:()=>""}}const{user:t}=jn(),e=O.useContext(Pr),n=(e==null?void 0:e.setGlobalError)||(()=>{}),[r,i]=O.useState([]),[a,s]=O.useState(!0),[o,c]=O.useState(null),[d,f]=O.useState(yn.READING_GROUP),[p,g]=O.useState(""),m=O.useCallback(async()=>{if(!t){i([]),s(!1);return}try{s(!0),c(null);const I=Ln(Gn(vt,"books"),vn("userId","==",t.uid),sy("updatedAt","desc")),F=(await Hn(I)).docs.map(M=>({id:M.id,...M.data()}));i(F)}catch(I){console.error("Error fetching books:",I),n(""),c("")}finally{s(!1)}},[t,n]),x=O.useCallback((I,P)=>{f(P)},[]),b=O.useCallback(I=>{g(I.target.value)},[]),A=O.useCallback(()=>{g("")},[]),E=O.useCallback(()=>{f(yn.READING_GROUP)},[]),S=mU(r,d,p),T=yU(r,S);return O.useEffect(()=>{m()},[t==null?void 0:t.uid]),{allBooks:r,filteredBooks:S,stats:T,loading:a,error:o,filter:d,searchText:p,fetchBooks:m,handleFilterChange:x,handleSearchChange:b,clearSearch:A,clearFilter:E,normalizeTag:Xh}};function xU(){const t=No(),{filteredBooks:e,loading:n,error:r,filter:i,searchText:a,handleFilterChange:s,handleSearchChange:o}=vU(),c=d=>{t(`/book/${d}`)};return n?v.jsx(Bo,{variant:"fullPage",message:"...","data-testid":"book-list-loading"}):v.jsxs(re,{sx:{maxWidth:1200,mx:"auto",pb:{xs:"72px",sm:"80px"}},children:[v.jsx(tp,{title:"",subtitle:"","data-testid":"book-list-header"}),v.jsxs(re,{sx:{px:{xs:1.5,sm:2,md:0}},children:[v.jsx(ct,{label:"",value:a,onChange:o,fullWidth:!0,size:"small",sx:{mb:{xs:1.5,sm:2},"& .MuiOutlinedInput-root":{fontSize:{xs:"0.9rem",sm:"1rem"}}}}),v.jsx(re,{sx:{borderBottom:1,borderColor:"divider",mb:{xs:1.5,sm:2},position:"sticky",top:0,zIndex:1100,backgroundColor:"background.paper"},"data-testid":"book-list-tabs-container",style:{position:"sticky",top:0,zIndex:1100},children:v.jsxs(N1,{value:i,onChange:s,variant:{xs:"scrollable",sm:"standard"},scrollButtons:"auto",allowScrollButtonsMobile:!0,centered:{sm:!0},sx:{"& .MuiTab-root":{fontSize:{xs:"0.8rem",sm:"0.9rem"},minHeight:{xs:"40px",sm:"48px"},minWidth:{xs:"60px",sm:"auto"},px:{xs:1,sm:2}},"& .MuiTabs-scrollButtons":{"&.Mui-disabled":{opacity:.3}}},children:[v.jsx(Sa,{label:wd[yn.ALL],value:yn.ALL}),v.jsx(Sa,{label:wd[yn.TSUNDOKU],value:yn.TSUNDOKU}),v.jsx(Sa,{label:wd[yn.READING_GROUP],value:yn.READING_GROUP}),v.jsx(Sa,{label:wd[yn.SUSPENDED],value:yn.SUSPENDED}),v.jsx(Sa,{label:wd[yn.FINISHED],value:yn.FINISHED})]})}),e.length===0?v.jsx(re,{sx:{textAlign:"center",py:{xs:3,sm:4},px:{xs:2,sm:0}},children:v.jsx(te,{variant:"body1",color:"text.secondary",sx:{fontSize:{xs:"0.9rem",sm:"1rem"}},children:""})}):v.jsx(re,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",sm:"repeat(2, 1fr)",md:"repeat(3, 1fr)",lg:"repeat(4, 1fr)"},gap:{xs:1.5,sm:2},dataTestid:"book-list-grid"},"data-testid":"book-list-grid",children:e.map(d=>v.jsx(re,{"data-testid":`book-grid-item-${d.id}`,children:v.jsx(sU,{book:d,onClick:()=>c(d.id),testId:`book-list-card-${d.id}`})},d.id))})]})]})}const Hs=(t,e)=>{const[n,r]=O.useState([]),[i,a]=O.useState(!1),s=O.useCallback(async()=>{if(e!=null&&e.uid)try{a(!0);const d=t==="book"?"bookTagHistory":"memoTagHistory",f=Ln(Gn(vt,"users",e.uid,d),sy("updatedAt","desc")),p=await Hn(f),g=[];p.forEach(m=>{const x=m.data();x.tag&&g.push(x.tag)}),r(g)}catch(d){throw console.error(":",d),d}finally{a(!1)}},[e==null?void 0:e.uid,t]),o=O.useCallback(async d=>{if(!(!(e!=null&&e.uid)||!d))try{const f=t==="book"?"bookTagHistory":"memoTagHistory",p=ai(vt,"users",e.uid,f,d);await Zm(p,{tag:d,updatedAt:ir()})}catch(f){throw console.error(":",f),f}},[e==null?void 0:e.uid,t]),c=O.useCallback(async d=>{if(!(!(e!=null&&e.uid)||!d||d.length===0))try{const f=d.map(p=>{const g=t==="book"?"bookTagHistory":"memoTagHistory",m=ai(vt,"users",e.uid,g,p);return Zm(m,{tag:p,updatedAt:ir()})});await Promise.all(f)}catch(f){throw console.error(":",f),f}},[e==null?void 0:e.uid,t]);return{tagOptions:n,loading:i,fetchTagHistory:s,saveTagToHistory:o,saveTagsToHistory:c}},wU=()=>{const{user:t}=jn(),e=O.useContext(Pr),n=(e==null?void 0:e.setGlobalError)||(()=>{}),[r,i]=O.useState(!1),[a,s]=O.useState(null),{saveTagsToHistory:o}=Hs("book",t),c=O.useCallback(async f=>{if(!t)throw new Error("");if(!f.title)throw new Error("");try{i(!0),s(null);let p=(f.tags||[]).filter(x=>x&&x.trim()!=="");f.inputTagValue&&!p.includes(f.inputTagValue.trim())&&(p=[...p,f.inputTagValue.trim()]),p=p.filter(x=>x&&x.trim()!=="");const g=await C0(Gn(vt,"books"),{userId:t.uid,isbn:f.isbn||"",title:f.title,author:f.author||"",publisher:f.publisher||"",publishedDate:f.publishedDate||"",coverImageUrl:f.coverImageUrl||"",tags:p,status:f.status||Cr,acquisitionType:f.acquisitionType||"unknown",createdAt:ir(),updatedAt:ir()});p.length>0&&await o(p);const m=f.status||Cr;if(m)try{const x=Gn(vt,"books",g.id,"statusHistory");await C0(x,{status:m,previousStatus:null,changedAt:ir(),changedBy:t.uid,notes:"",createdAt:ir()})}catch(x){console.error("Error adding initial status history:",x)}return g.id}catch(p){console.error("Error adding book:",p);const g=": "+p.message;throw n(g),s(g),p}finally{i(!1)}},[t,n,o]),d=O.useCallback(()=>{s(null)},[]);return{addBook:c,loading:r,error:a,clearError:d}},bU=()=>{const{user:t}=jn(),e=O.useContext(Pr),n=(e==null?void 0:e.setGlobalError)||(()=>{}),[r,i]=O.useState(!1),[a,s]=O.useState(""),[o,c]=O.useState(!1),d=O.useCallback(async g=>{if(!g||!g.trim())return s("ISBN"),null;s(""),i(!0),c(!0);try{const m=g.trim(),b=(await YC.get(`https://api.openbd.jp/v1/get?isbn=${m}`)).data[0];let A="",E="",S="",T="",I="",P=[];if(b&&b.summary&&(A=b.summary.title||"",E=b.summary.author||"",S=b.summary.publisher||"",T=b.summary.pubdate||"",I=b.summary.cover||"",b.summary.subject&&P.push(b.summary.subject),b.summary.ndc&&P.push(b.summary.ndc)),!I||!A)try{const M=(await YC.get(`https://www.googleapis.com/books/v1/volumes?q=isbn:${m}`)).data;if(M.items&&M.items.length>0){const D=M.items[0].volumeInfo;A||(A=D.title||""),E||(E=D.authors?D.authors.join(", "):""),S||(S=D.publisher||""),T||(T=D.publishedDate||""),!I&&D.imageLinks&&(I=D.imageLinks.thumbnail||D.imageLinks.smallThumbnail||""),D.categories&&D.categories.length>0&&(P=[...P,...D.categories])}}catch(F){console.error("Failed to fetch from Google Books API",F)}return A?{isbn:m,title:A,author:E,publisher:S,publishedDate:T,coverImageUrl:I,tags:Array.from(new Set(P))}:(n(""),null)}catch{const x="";return n(x),s(x),null}finally{i(!1)}},[n]),f=O.useCallback(()=>{s(null)},[]),p=O.useCallback(()=>{c(!1),s(null)},[]);return{searchBookByIsbn:d,loading:r,error:a,searchPerformed:o,clearError:f,clearSearch:p}},sM=()=>{const{user:t}=jn(),e=O.useContext(Pr),n=(e==null?void 0:e.setGlobalError)||(()=>{}),[r,i]=O.useState(!1),[a,s]=O.useState(null),[o,c]=O.useState(null),d=O.useCallback(async p=>{if(!t||!p||!p.trim())return s(null),null;i(!0),c(null),s(null);try{const g=Gn(vt,"books"),m=Ln(g,vn("userId","==",t.uid),vn("isbn","==",p.trim())),x=await Hn(m);if(x.empty)return s(null),null;{const b=x.docs[0],A={id:b.id,...b.data()};return s(A),A}}catch(g){console.error("Error checking book duplicate:",g);const m=": "+g.message;return c(m),n(m),null}finally{i(!1)}},[t,n]),f=O.useCallback(()=>{s(null),c(null),i(!1)},[]);return{isChecking:r,duplicateBook:a,error:o,checkDuplicate:d,resetDuplicateCheck:f}};var _U={};const AU=()=>typeof jest<"u"?_U.VITE_GOOGLE_BOOKS_API_KEY:"AIzaSyA4Zzn47v8NQiFSs-pwDxO8iqTZtdt0Df0",EU=()=>{const[t,e]=O.useState([]),[n,r]=O.useState(!1),[i,a]=O.useState(""),[s,o]=O.useState(null),[c,d]=O.useState([]),[f,p]=O.useState({author:"",publisher:"",yearFrom:"",yearTo:""}),g=O.useCallback(()=>{try{const N=localStorage.getItem("bookSearchHistory");if(N){const k=JSON.parse(N);d(Array.isArray(k)?k:[])}}catch(N){console.warn("Failed to load search history:",N),d([])}},[]),m=O.useCallback(N=>{try{localStorage.setItem("bookSearchHistory",JSON.stringify(N))}catch(k){console.warn("Failed to save search history:",k)}},[]),x=O.useCallback((N,k)=>{if(!N||N.trim().length<2)return;const j={query:N.trim(),searchType:k,timestamp:Date.now()};d(q=>{const X=q.filter(W=>!(W.query===j.query&&W.searchType===j.searchType)),G=[j,...X].slice(0,10);return m(G),G})},[m]),b=O.useCallback(N=>{d(k=>{const j=k.filter((q,X)=>X!==N);return m(j),j})},[m]),A=O.useCallback(()=>{d([]),m([])},[m]),E=O.useCallback(N=>!N||N.length===0?N:N.filter(k=>{if(f.author&&k.author&&!k.author.toLowerCase().includes(f.author.toLowerCase())||f.publisher&&k.publisher&&!k.publisher.toLowerCase().includes(f.publisher.toLowerCase()))return!1;if(f.yearFrom||f.yearTo){const j=k.publishedDate?parseInt(k.publishedDate.split("-")[0]):null;if(j){if(f.yearFrom&&j<parseInt(f.yearFrom)||f.yearTo&&j>parseInt(f.yearTo))return!1}else return!1}return!0}),[f]),S=O.useCallback(N=>{p(k=>({...k,...N}))},[]),T=O.useCallback(()=>{p({author:"",publisher:"",yearFrom:"",yearTo:""})},[]),I=O.useCallback((N,k)=>Array.isArray(N)?N.map((j,q)=>({id:`${k}-${q}`,source:k,title:j.title||"",author:j.author||"",publisher:j.publisher||"",publishedDate:j.publishedDate||"",isbn:j.isbn||"",coverImageUrl:j.coverImageUrl||"",description:j.description||"",confidence:k==="google"?.8:.6})):[],[]),P=O.useCallback(async(N,k)=>{try{let j;try{j=AU()}catch(W){console.error("Error accessing environment variables:",W),j=void 0}if(console.log("Google Books API Key check:",{hasApiKey:!!j,apiKeyLength:j?j.length:0,isJestEnvironment:typeof jest<"u",environment:typeof jest<"u"?"test":"browser"}),!j)return console.warn("Google Books API key is not configured, skipping Google Books search"),[];let q=N;k==="author"?q=`inauthor:${N}`:k==="publisher"?q=`inpublisher:${N}`:q=`intitle:${N}`;const X=await fetch(`https://www.googleapis.com/books/v1/volumes?q=${encodeURIComponent(q)}&key=${j}&maxResults=10`);if(!X.ok)throw new Error(`Google Books API error: ${X.status}`);const G=await X.json();return G.items?G.items.map(W=>{var me,ve,be;const K=W.volumeInfo||{},Z=K.industryIdentifiers||[],fe=((me=Z.find(Me=>Me.type==="ISBN_13"))==null?void 0:me.identifier)||((ve=Z.find(Me=>Me.type==="ISBN_10"))==null?void 0:ve.identifier)||"";return{title:K.title||"",author:K.authors?K.authors.join(", "):"",publisher:K.publisher||"",publishedDate:K.publishedDate||"",isbn:fe,coverImageUrl:((be=K.imageLinks)==null?void 0:be.thumbnail)||"",description:K.description||""}}):[]}catch(j){throw console.error("Google Books API error:",j),j}},[]),F=O.useCallback(N=>{const k=N.message||N.toString();return k.includes("API key")||k.includes("API key is not configured")?"":k.includes("network")||k.includes("fetch")?"":k.includes("timeout")?"":k.includes("404")||k.includes("Not Found")?"":k.includes("429")||k.includes("Too Many Requests")?"":k.includes("500")||k.includes("Internal Server Error")?"":""},[]),M=O.useCallback(async(N,k="title")=>{if(!N||N.trim()===""){e([]);return}r(!0),a("..."),o(null),e([]);try{const j=[];let q=!1,X=null;try{a("Google Books..."),console.log("Trying Google Books API for query:",N);const W=await P(N,k);if(console.log("Google Books raw results:",W),W&&W.length>0){const K=I(W,"google");console.log("Google Books normalized results:",K),j.push(...K)}}catch(W){console.warn("Google Books API failed:",W),q=!0,X=W}a("..."),console.log("Search results:",j),console.log("Results length:",j.length);const G=j.sort((W,K)=>K.confidence-W.confidence);e(G),j.length>0&&x(N,k),q&&j.length===0?o(F(X)):j.length===0&&o(k==="title"?`

 : `:"")}catch(j){console.error("External book search error:",j),o(F(j))}finally{r(!1),a("")}},[F,x]),D=O.useCallback(()=>{e([]),o(null)},[]),R=O.useCallback(()=>{o(null)},[]),B=E(t);return{searchResults:t,filteredResults:B,loading:n,loadingStep:i,error:s,searchBooks:M,clearSearchResults:D,clearError:R,searchHistory:c,loadSearchHistory:g,addToSearchHistory:x,removeFromSearchHistory:b,clearSearchHistory:A,filters:f,updateFilters:S,clearFilters:T}},SU=({onBookSelect:t,onCancel:e})=>{const n=di(),r=uy(n,{overrides:{mb:2,cursor:"pointer"}}),[i,a]=O.useState("title"),[s,o]=O.useState(""),[c,d]=O.useState("relevance"),[f,p]=O.useState(!1),[g,m]=O.useState({}),{searchResults:x,filteredResults:b,loading:A,loadingStep:E,error:S,searchBooks:T,clearSearchResults:I,clearError:P,searchHistory:F,loadSearchHistory:M,removeFromSearchHistory:D,clearSearchHistory:R,filters:B,updateFilters:N,clearFilters:k}=EU(),{checkDuplicate:j}=sM(),q=O.useCallback((Se,J)=>{J!==null&&(a(J),I())},[I]),X=O.useCallback(Se=>{o(Se.target.value),S&&P()},[S,P]),G=O.useCallback(async()=>{s.trim()&&(m({}),await T(s.trim(),i))},[s,i,T]),W=O.useCallback(async Se=>{if(!Se||Se.length===0)return;const J={};for(const he of Se)if(he.isbn)try{const ue=await j(he.isbn);ue&&(J[he.id]=ue)}catch(ue){console.error("Error checking duplicate for book:",he.title,ue)}m(J)},[j]),K=O.useCallback(Se=>{m({}),t(Se)},[t]),Z=O.useCallback(()=>{I(),o(""),m({}),e()},[I,e]),fe=O.useCallback((Se,J)=>{o(Se),a(J),p(!1),m({}),T(Se,J)},[T]),me=O.useCallback(Se=>{D(Se)},[D]),ve=O.useCallback(()=>{R()},[R]),be=O.useCallback(()=>{f||M(),p(!f)},[f,M]),Me=O.useCallback(Se=>{if(!Se||Se.length===0)return Se;const J=[...Se];switch(c){case"title":return J.sort((he,ue)=>he.title.localeCompare(ue.title,"ja"));case"author":return J.sort((he,ue)=>he.author.localeCompare(ue.author,"ja"));case"date":return J.sort((he,ue)=>{const ie=new Date(he.publishedDate||"1900-01-01");return new Date(ue.publishedDate||"1900-01-01")-ie});case"relevance":default:return J.sort((he,ue)=>ue.confidence-he.confidence)}},[c]);wi.useEffect(()=>{b&&b.length>0&&!A&&W(b)},[b,A]);const ge=()=>{if(A)return v.jsxs(re,{sx:{mt:2},children:[v.jsx(te,{variant:"subtitle2",sx:{mb:2,color:"primary.main",fontWeight:"bold",fontSize:{xs:"0.9rem",sm:"1rem"}},children:E||"..."}),[...Array(3)].map((J,he)=>v.jsx(Sn,{sx:{mb:2},children:v.jsx(Cn,{children:v.jsxs(re,{sx:{display:"flex",gap:2},children:[v.jsx(zh,{variant:"rectangular",width:60,height:80}),v.jsxs(re,{sx:{flex:1},children:[v.jsx(zh,{variant:"text",width:"80%",height:24}),v.jsx(zh,{variant:"text",width:"60%",height:20}),v.jsx(zh,{variant:"text",width:"40%",height:16})]})]})})},he))]});if(S)return v.jsx(bi,{severity:"error",sx:{mt:2},action:v.jsx(ze,{color:"inherit",size:"small",onClick:P,children:""}),children:S});if(x.length===0&&s.trim())return v.jsxs(re,{sx:{mt:2,textAlign:"center",py:4},children:[v.jsxs(te,{variant:"body1",color:"text.secondary",children:["",s,""]}),v.jsx(te,{variant:"body2",color:"text.secondary",sx:{mt:1},children:""})]});if(x.length===0)return v.jsxs(re,{sx:{mt:2,textAlign:"center",py:4},children:[v.jsx(te,{variant:"body1",color:"text.secondary",children:""}),F&&F.length>0&&v.jsx(re,{sx:{mt:2},children:v.jsx(ze,{variant:"outlined",startIcon:v.jsx($N,{}),onClick:be,size:"small",children:""})})]});const Se=Me(b||[]);return v.jsxs(re,{sx:{mt:2},children:[v.jsxs(re,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2,flexDirection:{xs:"column",sm:"row"},gap:{xs:1,sm:0}},children:[v.jsxs(te,{variant:"subtitle2",sx:{fontSize:{xs:"0.9rem",sm:"1rem"}},children:[" (",x.length,")"]}),v.jsxs(ki,{size:"small",sx:{minWidth:120},children:[v.jsx(Ta,{children:""}),v.jsxs(Xa,{value:c,onChange:J=>d(J.target.value),label:"",children:[v.jsx(Zt,{value:"relevance",children:""}),v.jsx(Zt,{value:"title",children:""}),v.jsx(Zt,{value:"author",children:""}),v.jsx(Zt,{value:"date",children:""})]})]})]}),Se.map(J=>v.jsx(Sn,{sx:r,onClick:()=>K(J),"data-testid":`search-result-${J.id}`,children:v.jsx(Cn,{children:v.jsxs(re,{sx:{display:"flex",gap:2},children:[v.jsx(re,{sx:{flexShrink:0},children:J.coverImageUrl?v.jsx(fR,{component:"img",image:J.coverImageUrl,alt:J.title,sx:{width:60,height:80,objectFit:"cover",borderRadius:1}}):v.jsx(re,{sx:{width:60,height:80,bgcolor:"grey.200",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:1},children:v.jsx(te,{variant:"caption",color:"text.secondary",children:""})})}),v.jsxs(re,{sx:{flex:1,minWidth:0},children:[v.jsx(te,{variant:"subtitle1",sx:{fontWeight:"bold",mb:.5,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",fontSize:{xs:"0.9rem",sm:"1rem"}},children:J.title}),v.jsx(te,{variant:"body2",color:"text.secondary",sx:{mb:.5},children:J.author}),v.jsxs(te,{variant:"body2",color:"text.secondary",sx:{mb:1},children:[J.publisher,J.publishedDate&&` - ${J.publishedDate}`]}),v.jsxs(re,{sx:{display:"flex",gap:.5,flexWrap:"wrap",mb:{xs:1,sm:1.5}},children:[v.jsx(dn,{label:J.source==="google"?"Google Books":"OpenBD",size:"small",color:J.source==="google"?"primary":"secondary",variant:"outlined",sx:{fontSize:{xs:"0.7rem",sm:"0.8rem"}}}),J.isbn&&v.jsx(dn,{label:`ISBN: ${J.isbn}`,size:"small",variant:"outlined",sx:{fontSize:{xs:"0.7rem",sm:"0.8rem"}}})]})]}),v.jsx(re,{sx:{flexShrink:0,alignSelf:"center",mt:{xs:1,sm:0}},children:g[J.id]?v.jsx(ze,{variant:"outlined",size:"small",disabled:!0,"data-testid":`duplicate-book-${J.id}`,sx:{fontSize:{xs:"0.75rem",sm:"0.85rem"},minWidth:{xs:"100%",sm:"auto"},color:"text.secondary",borderColor:"text.secondary"},children:""}):v.jsx(ze,{variant:"contained",size:"small",onClick:he=>{he.stopPropagation(),K(J)},"data-testid":`select-book-${J.id}`,sx:{fontSize:{xs:"0.75rem",sm:"0.85rem"},minWidth:{xs:"100%",sm:"auto"}},children:""})})]})})},J.id))]})},Le=()=>x.length===0?null:v.jsxs(re,{sx:{mt:2,p:2,bgcolor:"grey.50",borderRadius:1},children:[v.jsxs(re,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[v.jsx(te,{variant:"subtitle2",color:"text.secondary",children:""}),v.jsx(ze,{size:"small",onClick:k,disabled:!(B!=null&&B.author)&&!(B!=null&&B.publisher)&&!(B!=null&&B.yearFrom)&&!(B!=null&&B.yearTo),children:""})]}),v.jsxs(re,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",sm:"1fr 1fr"},gap:2,mb:2},children:[v.jsx(ct,{label:"",value:(B==null?void 0:B.author)||"",onChange:Se=>N({author:Se.target.value}),size:"small",placeholder:"",sx:{fontSize:{xs:"0.8rem",sm:"0.9rem"}}}),v.jsx(ct,{label:"",value:(B==null?void 0:B.publisher)||"",onChange:Se=>N({publisher:Se.target.value}),size:"small",placeholder:"",sx:{fontSize:{xs:"0.8rem",sm:"0.9rem"}}}),v.jsx(ct,{label:"",type:"number",value:(B==null?void 0:B.yearFrom)||"",onChange:Se=>N({yearFrom:Se.target.value}),size:"small",placeholder:": 2020",sx:{fontSize:{xs:"0.8rem",sm:"0.9rem"}}}),v.jsx(ct,{label:"",type:"number",value:(B==null?void 0:B.yearTo)||"",onChange:Se=>N({yearTo:Se.target.value}),size:"small",placeholder:": 2024",sx:{fontSize:{xs:"0.8rem",sm:"0.9rem"}}})]}),v.jsxs(te,{variant:"caption",color:"text.secondary",children:[(b==null?void 0:b.length)||0,"",(x==null?void 0:x.length)||0,""]})]}),Ne=()=>!f||!F||F.length===0?null:v.jsxs(re,{sx:{mt:2},children:[v.jsxs(re,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:1},children:[v.jsx(te,{variant:"subtitle2",color:"text.secondary",children:""}),v.jsxs(re,{children:[v.jsx(ze,{size:"small",onClick:ve,startIcon:v.jsx(gR,{}),sx:{mr:1},children:""}),v.jsx(ze,{size:"small",onClick:()=>p(!1),children:""})]})]}),v.jsx(ab,{sx:{bgcolor:"background.paper",borderRadius:1},children:F.map((Se,J)=>v.jsx(sb,{sx:{px:1},secondaryAction:v.jsx(Gr,{edge:"end",onClick:()=>me(J),size:"small",children:v.jsx(Im,{fontSize:"small"})}),children:v.jsx(zN,{onClick:()=>fe(Se.query,Se.searchType),sx:{borderRadius:1},children:v.jsx(um,{primary:Se.query,secondary:`${Se.searchType==="title"?"":Se.searchType==="author"?"":""}`})})},`${Se.query}-${Se.timestamp}`))})]});return v.jsxs(re,{sx:{p:{xs:1.5,sm:2},border:1,borderColor:"primary.main",borderRadius:1,bgcolor:"primary.50",mt:{xs:1.5,sm:2},maxWidth:"100%",overflow:"hidden"},"data-testid":"external-book-search",children:[v.jsx(te,{variant:"h6",sx:{mb:{xs:1.5,sm:2},fontSize:{xs:"1rem",sm:"1.25rem"}},children:" "}),v.jsx(re,{sx:{mb:{xs:1.5,sm:2},display:"flex",justifyContent:"center"},children:v.jsxs(HN,{value:i,exclusive:!0,onChange:q,"aria-label":"search type",size:"small",children:[v.jsx(Hx,{value:"title","aria-label":"title","data-testid":"search-type-title",children:""}),v.jsx(Hx,{value:"author","aria-label":"author","data-testid":"search-type-author",children:""}),v.jsx(Hx,{value:"publisher","aria-label":"publisher","data-testid":"search-type-publisher",children:""})]})}),v.jsxs(re,{sx:{display:"flex",gap:{xs:.5,sm:1},mb:{xs:1.5,sm:2},flexDirection:{xs:"column",sm:"row"}},children:[v.jsx(ct,{fullWidth:!0,placeholder:`${i==="title"?"":i==="author"?"":""}`,value:s,onChange:X,onKeyPress:Se=>{Se.key==="Enter"&&G()},"data-testid":"search-query-input",size:"small"}),v.jsx(ze,{variant:"contained",onClick:G,disabled:!s.trim()||A,startIcon:A?v.jsx(pR,{size:16}):v.jsx(L1,{}),"data-testid":"search-button",sx:{fontSize:{xs:"0.8rem",sm:"0.9rem"},minWidth:{xs:"100%",sm:"auto"}},children:A?"...":""})]}),Ne(),Le(),ge(),v.jsx(re,{sx:{mt:{xs:2,sm:3},textAlign:"right"},children:v.jsx(ze,{onClick:Z,"data-testid":"cancel-button",sx:{fontSize:{xs:"0.8rem",sm:"0.9rem"}},children:" ISBN"})})]})};function CU({isbn:t="",onBookAdded:e}){const[n,r]=O.useState(t),[i,a]=O.useState(""),[s,o]=O.useState(""),[c,d]=O.useState(""),[f,p]=O.useState(""),[g,m]=O.useState(""),[x,b]=O.useState([]),[A,E]=O.useState(""),[S,T]=O.useState(ft.TSUNDOKU),[I,P]=O.useState(Qa.UNKNOWN),[F,M]=O.useState(!1),{user:D}=jn(),{tagOptions:R,fetchTagHistory:B}=Hs("book",D),{addBook:N,loading:k,error:j}=wU(),{searchBookByIsbn:q,loading:X,error:G}=bU(),{duplicateBook:W,checkDuplicate:K,resetDuplicateCheck:Z}=sM();O.useEffect(()=>{B()},[B]),O.useEffect(()=>{t&&t!==n&&(console.log("[BookForm] useEffect: propsisbn:",t),r(t),t.trim()!==""&&(console.log("[BookForm] useEffect: ",t),fe(t)))},[t,n]);const fe=async ge=>{const Le=ge!==void 0?ge:n;if(!Le||!Le.trim())return;Z();const Ne=await q(Le);Ne&&(a(Ne.title),o(Ne.author),d(Ne.publisher),p(Ne.publishedDate),m(Ne.coverImageUrl),b(Ne.tags),await K(Le))},me=async ge=>{if(ge.preventDefault(),!i)return;const Ne=await N({isbn:n,title:i,author:s,publisher:c,publishedDate:f,coverImageUrl:g,tags:x,inputTagValue:A,status:S,acquisitionType:I});Ne&&e(Ne)},ve=()=>{M(!F)},be=async ge=>{a(ge.title),o(ge.author),d(ge.publisher),p(ge.publishedDate),m(ge.coverImageUrl),r(ge.isbn),M(!1),ge.isbn&&await K(ge.isbn)},Me=()=>{M(!1)};return v.jsxs(Xn,{component:"form",onSubmit:me,sx:{p:3,mt:{xs:1,sm:2}},role:"form","data-testid":"book-form",elevation:0,children:[v.jsxs(re,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",sm:"1fr 1fr"},gap:{xs:1,sm:1.5}},children:[v.jsx(re,{children:v.jsx(ct,{label:"ISBN",value:n,onChange:ge=>r(ge.target.value),fullWidth:!0,size:"small",placeholder:": 9784873119485",inputProps:{"data-testid":"book-isbn-input"}})}),v.jsx(re,{children:v.jsx(ze,{onClick:()=>fe(),variant:"outlined",disabled:X,sx:{mt:{xs:1,sm:0},height:{xs:"40px",sm:"56px"},fontSize:{xs:"0.8rem",sm:"0.9rem"}},fullWidth:!0,"data-testid":"book-fetch-button",children:X?"...":"ISBN"})})]}),v.jsxs(re,{sx:{mt:1.5,textAlign:"center"},children:[v.jsx(ze,{variant:"outlined",onClick:ve,startIcon:v.jsx("span",{children:""}),"data-testid":"external-search-button",sx:{fontSize:{xs:"0.8rem",sm:"0.9rem"},px:3,py:1},children:""}),v.jsx(te,{variant:"caption",color:"text.secondary",sx:{display:"block",mt:.5},children:"ISBN"})]}),F&&v.jsx(SU,{onBookSelect:be,onCancel:Me}),g&&v.jsx(re,{sx:{textAlign:"center",my:{xs:1.5,sm:2},px:{xs:1,sm:0}},children:v.jsx("img",{src:g,alt:"",style:{maxHeight:"120px",maxWidth:"100%",width:"auto",borderRadius:"4px"},"data-testid":"book-cover-image"})}),v.jsxs(re,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",sm:"1fr 1fr"},gap:{xs:1,sm:1.5},mt:{xs:.5,sm:1}},children:[v.jsx(re,{children:v.jsx(ct,{label:"",value:i,onChange:ge=>a(ge.target.value),fullWidth:!0,required:!0,size:"small",inputProps:{"data-testid":"book-title-input"}})}),v.jsx(re,{children:v.jsx(ct,{label:"",value:s,onChange:ge=>o(ge.target.value),fullWidth:!0,size:"small",inputProps:{"data-testid":"book-author-input"}})}),v.jsx(re,{children:v.jsx(ct,{label:"",value:c,onChange:ge=>d(ge.target.value),fullWidth:!0,size:"small",inputProps:{"data-testid":"book-publisher-input"}})}),v.jsx(re,{children:v.jsx(ct,{label:"",value:f,onChange:ge=>p(ge.target.value),fullWidth:!0,size:"small",inputProps:{"data-testid":"book-publishdate-input"}})})]}),v.jsx(re,{sx:{mt:{xs:1.5,sm:2}},children:v.jsx(Bs,{multiple:!0,freeSolo:!0,options:R,value:x,getOptionLabel:ge=>typeof ge=="string"?ge:ge.inputValue||ge.tag||"",onChange:(ge,Le)=>{const Ne=(Le||[]).map(Se=>{if(typeof Se=="string")return Se;if(Se&&typeof Se=="object"){if("inputValue"in Se&&Se.inputValue)return Se.inputValue;if("tag"in Se&&Se.tag)return Se.tag}return""}).filter(Boolean);b(Ne)},inputValue:A,onInputChange:(ge,Le)=>E(Le),renderInput:ge=>v.jsx(ct,{...ge,label:"",fullWidth:!0,size:"small",placeholder:": ,,",inputProps:{...ge.inputProps,"data-testid":"book-tags-input"}}),sx:{"& .MuiChip-root":{fontSize:{xs:"0.75rem",sm:"0.8rem"},height:{xs:"24px",sm:"28px"}}}})}),v.jsx(re,{sx:{mt:{xs:1.5,sm:2}},children:v.jsxs(ki,{fullWidth:!0,size:"small",children:[v.jsx(Ta,{id:"book-status-label",children:""}),v.jsx(Xa,{labelId:"book-status-label",value:S,label:"",onChange:ge=>T(ge.target.value),"data-testid":"book-status-select",children:l_.map(ge=>v.jsx(Zt,{value:ge,children:Us(ge)},ge))})]})}),v.jsx(re,{sx:{mt:{xs:1.5,sm:2}},children:v.jsxs(ki,{fullWidth:!0,size:"small",children:[v.jsx(Ta,{id:"book-acquisition-type-label",children:""}),v.jsx(Xa,{labelId:"book-acquisition-type-label",value:I,label:"",onChange:ge=>P(ge.target.value),"data-testid":"book-acquisition-type-select",children:iU.map(ge=>v.jsx(Zt,{value:ge,children:JO(ge)},ge))})]})}),W&&v.jsxs(bi,{severity:"info",sx:{mt:{xs:1.5,sm:2},fontSize:{xs:"0.8rem",sm:"0.9rem"}},"data-testid":"duplicate-book-alert",children:[": ",W.title]}),(G||j)&&v.jsx(te,{color:"error",sx:{mt:{xs:1.5,sm:2},fontSize:{xs:"0.8rem",sm:"0.9rem"}},"data-testid":"book-form-error",children:G||j}),v.jsx(ze,{type:"submit",variant:"contained",disabled:k||W,sx:{mt:{xs:2,sm:3},mb:{xs:"72px",sm:2},width:{xs:"100%",sm:"auto"},py:{xs:1.5,sm:2}},"data-testid":"book-add-submit",children:k?"...":W?"":""})]})}function TU(t,e){var n=Object.setPrototypeOf;n?n(t,e):t.__proto__=e}function IU(t,e){e===void 0&&(e=t.constructor);var n=Error.captureStackTrace;n&&n(t,e)}var DU=function(){var t=function(n,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(i[s]=a[s])},t(n,r)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),RU=function(t){DU(e,t);function e(n,r){var i=this.constructor,a=t.call(this,n,r)||this;return Object.defineProperty(a,"name",{value:i.name,enumerable:!1,configurable:!0}),TU(a,i.prototype),IU(a),a}return e}(Error),OU=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),qi=function(t){OU(e,t);function e(n){n===void 0&&(n=void 0);var r=t.call(this,n)||this;return r.message=n,r}return e.prototype.getKind=function(){var n=this.constructor;return n.kind},e.kind="Exception",e}(RU),MU=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),za=function(t){MU(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="ArgumentException",e}(qi),PU=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),it=function(t){PU(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="IllegalArgumentException",e}(qi),kU=function(){function t(e){if(this.binarizer=e,e===null)throw new it("Binarizer must be non-null.")}return t.prototype.getWidth=function(){return this.binarizer.getWidth()},t.prototype.getHeight=function(){return this.binarizer.getHeight()},t.prototype.getBlackRow=function(e,n){return this.binarizer.getBlackRow(e,n)},t.prototype.getBlackMatrix=function(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix},t.prototype.isCropSupported=function(){return this.binarizer.getLuminanceSource().isCropSupported()},t.prototype.crop=function(e,n,r,i){var a=this.binarizer.getLuminanceSource().crop(e,n,r,i);return new t(this.binarizer.createBinarizer(a))},t.prototype.isRotateSupported=function(){return this.binarizer.getLuminanceSource().isRotateSupported()},t.prototype.rotateCounterClockwise=function(){var e=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new t(this.binarizer.createBinarizer(e))},t.prototype.rotateCounterClockwise45=function(){var e=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new t(this.binarizer.createBinarizer(e))},t.prototype.toString=function(){try{return this.getBlackMatrix().toString()}catch{return""}},t}(),NU=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),$r=function(t){NU(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.getChecksumInstance=function(){return new e},e.kind="ChecksumException",e}(qi),LU=function(){function t(e){this.source=e}return t.prototype.getLuminanceSource=function(){return this.source},t.prototype.getWidth=function(){return this.source.getWidth()},t.prototype.getHeight=function(){return this.source.getHeight()},t}(),Tn=function(){function t(){}return t.arraycopy=function(e,n,r,i,a){for(;a--;)r[i++]=e[n++]},t.currentTimeMillis=function(){return Date.now()},t}(),BU=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),u_=function(t){BU(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="IndexOutOfBoundsException",e}(qi),FU=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),RI=function(t){FU(e,t);function e(n,r){n===void 0&&(n=void 0),r===void 0&&(r=void 0);var i=t.call(this,r)||this;return i.index=n,i.message=r,i}return e.kind="ArrayIndexOutOfBoundsException",e}(u_),jU=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Rr=function(){function t(){}return t.fill=function(e,n){for(var r=0,i=e.length;r<i;r++)e[r]=n},t.fillWithin=function(e,n,r,i){t.rangeCheck(e.length,n,r);for(var a=n;a<r;a++)e[a]=i},t.rangeCheck=function(e,n,r){if(n>r)throw new it("fromIndex("+n+") > toIndex("+r+")");if(n<0)throw new RI(n);if(r>e)throw new RI(r)},t.asList=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return e},t.create=function(e,n,r){var i=Array.from({length:e});return i.map(function(a){return Array.from({length:n}).fill(r)})},t.createInt32Array=function(e,n,r){var i=Array.from({length:e});return i.map(function(a){return Int32Array.from({length:n}).fill(r)})},t.equals=function(e,n){if(!e||!n||!e.length||!n.length||e.length!==n.length)return!1;for(var r=0,i=e.length;r<i;r++)if(e[r]!==n[r])return!1;return!0},t.hashCode=function(e){var n,r;if(e===null)return 0;var i=1;try{for(var a=jU(e),s=a.next();!s.done;s=a.next()){var o=s.value;i=31*i+o}}catch(c){n={error:c}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}return i},t.fillUint8Array=function(e,n){for(var r=0;r!==e.length;r++)e[r]=n},t.copyOf=function(e,n){return e.slice(0,n)},t.copyOfUint8Array=function(e,n){if(e.length<=n){var r=new Uint8Array(n);return r.set(e),r}return e.slice(0,n)},t.copyOfRange=function(e,n,r){var i=r-n,a=new Int32Array(i);return Tn.arraycopy(e,n,a,0,i),a},t.binarySearch=function(e,n,r){r===void 0&&(r=t.numberComparator);for(var i=0,a=e.length-1;i<=a;){var s=a+i>>1,o=r(n,e[s]);if(o>0)i=s+1;else if(o<0)a=s-1;else return s}return-i-1},t.numberComparator=function(e,n){return e-n},t}(),It=function(){function t(){}return t.numberOfTrailingZeros=function(e){var n;if(e===0)return 32;var r=31;return n=e<<16,n!==0&&(r-=16,e=n),n=e<<8,n!==0&&(r-=8,e=n),n=e<<4,n!==0&&(r-=4,e=n),n=e<<2,n!==0&&(r-=2,e=n),r-(e<<1>>>31)},t.numberOfLeadingZeros=function(e){if(e===0)return 32;var n=1;return e>>>16||(n+=16,e<<=16),e>>>24||(n+=8,e<<=8),e>>>28||(n+=4,e<<=4),e>>>30||(n+=2,e<<=2),n-=e>>>31,n},t.toHexString=function(e){return e.toString(16)},t.toBinaryString=function(e){return String(parseInt(String(e),2))},t.bitCount=function(e){return e=e-(e>>>1&1431655765),e=(e&858993459)+(e>>>2&858993459),e=e+(e>>>4)&252645135,e=e+(e>>>8),e=e+(e>>>16),e&63},t.truncDivision=function(e,n){return Math.trunc(e/n)},t.parseInt=function(e,n){return n===void 0&&(n=void 0),parseInt(e,n)},t.MIN_VALUE_32_BITS=-2147483648,t.MAX_VALUE=Number.MAX_SAFE_INTEGER,t}(),Wr=function(){function t(e,n){e===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=e,n==null?this.bits=t.makeArray(e):this.bits=n)}return t.prototype.getSize=function(){return this.size},t.prototype.getSizeInBytes=function(){return Math.floor((this.size+7)/8)},t.prototype.ensureCapacity=function(e){if(e>this.bits.length*32){var n=t.makeArray(e);Tn.arraycopy(this.bits,0,n,0,this.bits.length),this.bits=n}},t.prototype.get=function(e){return(this.bits[Math.floor(e/32)]&1<<(e&31))!==0},t.prototype.set=function(e){this.bits[Math.floor(e/32)]|=1<<(e&31)},t.prototype.flip=function(e){this.bits[Math.floor(e/32)]^=1<<(e&31)},t.prototype.getNextSet=function(e){var n=this.size;if(e>=n)return n;var r=this.bits,i=Math.floor(e/32),a=r[i];a&=~((1<<(e&31))-1);for(var s=r.length;a===0;){if(++i===s)return n;a=r[i]}var o=i*32+It.numberOfTrailingZeros(a);return o>n?n:o},t.prototype.getNextUnset=function(e){var n=this.size;if(e>=n)return n;var r=this.bits,i=Math.floor(e/32),a=~r[i];a&=~((1<<(e&31))-1);for(var s=r.length;a===0;){if(++i===s)return n;a=~r[i]}var o=i*32+It.numberOfTrailingZeros(a);return o>n?n:o},t.prototype.setBulk=function(e,n){this.bits[Math.floor(e/32)]=n},t.prototype.setRange=function(e,n){if(n<e||e<0||n>this.size)throw new it;if(n!==e){n--;for(var r=Math.floor(e/32),i=Math.floor(n/32),a=this.bits,s=r;s<=i;s++){var o=s>r?0:e&31,c=s<i?31:n&31,d=(2<<c)-(1<<o);a[s]|=d}}},t.prototype.clear=function(){for(var e=this.bits.length,n=this.bits,r=0;r<e;r++)n[r]=0},t.prototype.isRange=function(e,n,r){if(n<e||e<0||n>this.size)throw new it;if(n===e)return!0;n--;for(var i=Math.floor(e/32),a=Math.floor(n/32),s=this.bits,o=i;o<=a;o++){var c=o>i?0:e&31,d=o<a?31:n&31,f=(2<<d)-(1<<c)&4294967295;if((s[o]&f)!==(r?f:0))return!1}return!0},t.prototype.appendBit=function(e){this.ensureCapacity(this.size+1),e&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++},t.prototype.appendBits=function(e,n){if(n<0||n>32)throw new it("Num bits must be between 0 and 32");this.ensureCapacity(this.size+n);for(var r=n;r>0;r--)this.appendBit((e>>r-1&1)===1)},t.prototype.appendBitArray=function(e){var n=e.size;this.ensureCapacity(this.size+n);for(var r=0;r<n;r++)this.appendBit(e.get(r))},t.prototype.xor=function(e){if(this.size!==e.size)throw new it("Sizes don't match");for(var n=this.bits,r=0,i=n.length;r<i;r++)n[r]^=e.bits[r]},t.prototype.toBytes=function(e,n,r,i){for(var a=0;a<i;a++){for(var s=0,o=0;o<8;o++)this.get(e)&&(s|=1<<7-o),e++;n[r+a]=s}},t.prototype.getBitArray=function(){return this.bits},t.prototype.reverse=function(){for(var e=new Int32Array(this.bits.length),n=Math.floor((this.size-1)/32),r=n+1,i=this.bits,a=0;a<r;a++){var s=i[a];s=s>>1&1431655765|(s&1431655765)<<1,s=s>>2&858993459|(s&858993459)<<2,s=s>>4&252645135|(s&252645135)<<4,s=s>>8&16711935|(s&16711935)<<8,s=s>>16&65535|(s&65535)<<16,e[n-a]=s}if(this.size!==r*32){for(var o=r*32-this.size,c=e[0]>>>o,a=1;a<r;a++){var d=e[a];c|=d<<32-o,e[a-1]=c,c=d>>>o}e[r-1]=c}this.bits=e},t.makeArray=function(e){return new Int32Array(Math.floor((e+31)/32))},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var n=e;return this.size===n.size&&Rr.equals(this.bits,n.bits)},t.prototype.hashCode=function(){return 31*this.size+Rr.hashCode(this.bits)},t.prototype.toString=function(){for(var e="",n=0,r=this.size;n<r;n++)(n&7)===0&&(e+=" "),e+=this.get(n)?"X":".";return e},t.prototype.clone=function(){return new t(this.size,this.bits.slice())},t.prototype.toArray=function(){for(var e=[],n=0,r=this.size;n<r;n++)e.push(this.get(n));return e},t}(),vw;(function(t){t[t.OTHER=0]="OTHER",t[t.PURE_BARCODE=1]="PURE_BARCODE",t[t.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",t[t.TRY_HARDER=3]="TRY_HARDER",t[t.CHARACTER_SET=4]="CHARACTER_SET",t[t.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",t[t.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",t[t.ENABLE_CODE_39_EXTENDED_MODE=7]="ENABLE_CODE_39_EXTENDED_MODE",t[t.ASSUME_GS1=8]="ASSUME_GS1",t[t.RETURN_CODABAR_START_END=9]="RETURN_CODABAR_START_END",t[t.NEED_RESULT_POINT_CALLBACK=10]="NEED_RESULT_POINT_CALLBACK",t[t.ALLOWED_EAN_EXTENSIONS=11]="ALLOWED_EAN_EXTENSIONS"})(vw||(vw={}));const Bn=vw;var VU=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ve=function(t){VU(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.getFormatInstance=function(){return new e},e.kind="FormatException",e}(qi),UU=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},on;(function(t){t[t.Cp437=0]="Cp437",t[t.ISO8859_1=1]="ISO8859_1",t[t.ISO8859_2=2]="ISO8859_2",t[t.ISO8859_3=3]="ISO8859_3",t[t.ISO8859_4=4]="ISO8859_4",t[t.ISO8859_5=5]="ISO8859_5",t[t.ISO8859_6=6]="ISO8859_6",t[t.ISO8859_7=7]="ISO8859_7",t[t.ISO8859_8=8]="ISO8859_8",t[t.ISO8859_9=9]="ISO8859_9",t[t.ISO8859_10=10]="ISO8859_10",t[t.ISO8859_11=11]="ISO8859_11",t[t.ISO8859_13=12]="ISO8859_13",t[t.ISO8859_14=13]="ISO8859_14",t[t.ISO8859_15=14]="ISO8859_15",t[t.ISO8859_16=15]="ISO8859_16",t[t.SJIS=16]="SJIS",t[t.Cp1250=17]="Cp1250",t[t.Cp1251=18]="Cp1251",t[t.Cp1252=19]="Cp1252",t[t.Cp1256=20]="Cp1256",t[t.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",t[t.UTF8=22]="UTF8",t[t.ASCII=23]="ASCII",t[t.Big5=24]="Big5",t[t.GB18030=25]="GB18030",t[t.EUC_KR=26]="EUC_KR"})(on||(on={}));var Dr=function(){function t(e,n,r){for(var i,a,s=[],o=3;o<arguments.length;o++)s[o-3]=arguments[o];this.valueIdentifier=e,this.name=r,typeof n=="number"?this.values=Int32Array.from([n]):this.values=n,this.otherEncodingNames=s,t.VALUE_IDENTIFIER_TO_ECI.set(e,this),t.NAME_TO_ECI.set(r,this);for(var c=this.values,d=0,f=c.length;d!==f;d++){var p=c[d];t.VALUES_TO_ECI.set(p,this)}try{for(var g=UU(s),m=g.next();!m.done;m=g.next()){var x=m.value;t.NAME_TO_ECI.set(x,this)}}catch(b){i={error:b}}finally{try{m&&!m.done&&(a=g.return)&&a.call(g)}finally{if(i)throw i.error}}}return t.prototype.getValueIdentifier=function(){return this.valueIdentifier},t.prototype.getName=function(){return this.name},t.prototype.getValue=function(){return this.values[0]},t.getCharacterSetECIByValue=function(e){if(e<0||e>=900)throw new Ve("incorect value");var n=t.VALUES_TO_ECI.get(e);if(n===void 0)throw new Ve("incorect value");return n},t.getCharacterSetECIByName=function(e){var n=t.NAME_TO_ECI.get(e);if(n===void 0)throw new Ve("incorect value");return n},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var n=e;return this.getName()===n.getName()},t.VALUE_IDENTIFIER_TO_ECI=new Map,t.VALUES_TO_ECI=new Map,t.NAME_TO_ECI=new Map,t.Cp437=new t(on.Cp437,Int32Array.from([0,2]),"Cp437"),t.ISO8859_1=new t(on.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),t.ISO8859_2=new t(on.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),t.ISO8859_3=new t(on.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),t.ISO8859_4=new t(on.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),t.ISO8859_5=new t(on.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),t.ISO8859_6=new t(on.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),t.ISO8859_7=new t(on.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),t.ISO8859_8=new t(on.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),t.ISO8859_9=new t(on.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),t.ISO8859_10=new t(on.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),t.ISO8859_11=new t(on.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),t.ISO8859_13=new t(on.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),t.ISO8859_14=new t(on.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),t.ISO8859_15=new t(on.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),t.ISO8859_16=new t(on.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),t.SJIS=new t(on.SJIS,20,"SJIS","Shift_JIS"),t.Cp1250=new t(on.Cp1250,21,"Cp1250","windows-1250"),t.Cp1251=new t(on.Cp1251,22,"Cp1251","windows-1251"),t.Cp1252=new t(on.Cp1252,23,"Cp1252","windows-1252"),t.Cp1256=new t(on.Cp1256,24,"Cp1256","windows-1256"),t.UnicodeBigUnmarked=new t(on.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),t.UTF8=new t(on.UTF8,26,"UTF8","UTF-8"),t.ASCII=new t(on.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),t.Big5=new t(on.Big5,28,"Big5"),t.GB18030=new t(on.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),t.EUC_KR=new t(on.EUC_KR,30,"EUC_KR","EUC-KR"),t}(),HU=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Am=function(t){HU(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="UnsupportedOperationException",e}(qi),Oa=function(){function t(){}return t.decode=function(e,n){var r=this.encodingName(n);return this.customDecoder?this.customDecoder(e,r):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(r)?this.decodeFallback(e,r):new TextDecoder(r).decode(e)},t.shouldDecodeOnFallback=function(e){return!t.isBrowser()&&e==="ISO-8859-1"},t.encode=function(e,n){var r=this.encodingName(n);return this.customEncoder?this.customEncoder(e,r):typeof TextEncoder>"u"?this.encodeFallback(e):new TextEncoder().encode(e)},t.isBrowser=function(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"},t.encodingName=function(e){return typeof e=="string"?e:e.getName()},t.encodingCharacterSet=function(e){return e instanceof Dr?e:Dr.getCharacterSetECIByName(e)},t.decodeFallback=function(e,n){var r=this.encodingCharacterSet(n);if(t.isDecodeFallbackSupported(r)){for(var i="",a=0,s=e.length;a<s;a++){var o=e[a].toString(16);o.length<2&&(o="0"+o),i+="%"+o}return decodeURIComponent(i)}if(r.equals(Dr.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(e.buffer));throw new Am("Encoding "+this.encodingName(n)+" not supported by fallback.")},t.isDecodeFallbackSupported=function(e){return e.equals(Dr.UTF8)||e.equals(Dr.ISO8859_1)||e.equals(Dr.ASCII)},t.encodeFallback=function(e){for(var n=btoa(unescape(encodeURIComponent(e))),r=n.split(""),i=[],a=0;a<r.length;a++)i.push(r[a].charCodeAt(0));return new Uint8Array(i)},t}(),Vt=function(){function t(){}return t.castAsNonUtf8Char=function(e,n){n===void 0&&(n=null);var r=n?n.getName():this.ISO88591;return Oa.decode(new Uint8Array([e]),r)},t.guessEncoding=function(e,n){if(n!=null&&n.get(Bn.CHARACTER_SET)!==void 0)return n.get(Bn.CHARACTER_SET).toString();for(var r=e.length,i=!0,a=!0,s=!0,o=0,c=0,d=0,f=0,p=0,g=0,m=0,x=0,b=0,A=0,E=0,S=e.length>3&&e[0]===239&&e[1]===187&&e[2]===191,T=0;T<r&&(i||a||s);T++){var I=e[T]&255;s&&(o>0?(I&128)===0?s=!1:o--:(I&128)!==0&&((I&64)===0?s=!1:(o++,(I&32)===0?c++:(o++,(I&16)===0?d++:(o++,(I&8)===0?f++:s=!1))))),i&&(I>127&&I<160?i=!1:I>159&&(I<192||I===215||I===247)&&E++),a&&(p>0?I<64||I===127||I>252?a=!1:p--:I===128||I===160||I>239?a=!1:I>160&&I<224?(g++,x=0,m++,m>b&&(b=m)):I>127?(p++,m=0,x++,x>A&&(A=x)):(m=0,x=0))}return s&&o>0&&(s=!1),a&&p>0&&(a=!1),s&&(S||c+d+f>0)?t.UTF8:a&&(t.ASSUME_SHIFT_JIS||b>=3||A>=3)?t.SHIFT_JIS:i&&a?b===2&&g===2||E*10>=r?t.SHIFT_JIS:t.ISO88591:i?t.ISO88591:a?t.SHIFT_JIS:s?t.UTF8:t.PLATFORM_DEFAULT_ENCODING},t.format=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i=-1;function a(o,c,d,f,p,g){if(o==="%%")return"%";if(n[++i]!==void 0){o=f?parseInt(f.substr(1)):void 0;var m=p?parseInt(p.substr(1)):void 0,x;switch(g){case"s":x=n[i];break;case"c":x=n[i][0];break;case"f":x=parseFloat(n[i]).toFixed(o);break;case"p":x=parseFloat(n[i]).toPrecision(o);break;case"e":x=parseFloat(n[i]).toExponential(o);break;case"x":x=parseInt(n[i]).toString(m||16);break;case"d":x=parseFloat(parseInt(n[i],m||10).toPrecision(o)).toFixed(0);break}x=typeof x=="object"?JSON.stringify(x):(+x).toString(m);for(var b=parseInt(d),A=d&&d[0]+""=="0"?"0":" ";x.length<b;)x=c!==void 0?x+A:A+x;return x}}var s=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(s,a)},t.getBytes=function(e,n){return Oa.encode(e,n)},t.getCharCode=function(e,n){return n===void 0&&(n=0),e.charCodeAt(n)},t.getCharAt=function(e){return String.fromCharCode(e)},t.SHIFT_JIS=Dr.SJIS.getName(),t.GB2312="GB2312",t.ISO88591=Dr.ISO8859_1.getName(),t.EUC_JP="EUC_JP",t.UTF8=Dr.UTF8.getName(),t.PLATFORM_DEFAULT_ENCODING=t.UTF8,t.ASSUME_SHIFT_JIS=!1,t}(),Et=function(){function t(e){e===void 0&&(e=""),this.value=e}return t.prototype.enableDecoding=function(e){return this.encoding=e,this},t.prototype.append=function(e){return typeof e=="string"?this.value+=e.toString():this.encoding?this.value+=Vt.castAsNonUtf8Char(e,this.encoding):this.value+=String.fromCharCode(e),this},t.prototype.appendChars=function(e,n,r){for(var i=n;n<n+r;i++)this.append(e[i]);return this},t.prototype.length=function(){return this.value.length},t.prototype.charAt=function(e){return this.value.charAt(e)},t.prototype.deleteCharAt=function(e){this.value=this.value.substr(0,e)+this.value.substring(e+1)},t.prototype.setCharAt=function(e,n){this.value=this.value.substr(0,e)+n+this.value.substr(e+1)},t.prototype.substring=function(e,n){return this.value.substring(e,n)},t.prototype.setLengthToZero=function(){this.value=""},t.prototype.toString=function(){return this.value},t.prototype.insert=function(e,n){this.value=this.value.substring(0,e)+n+this.value.substring(e)},t}(),zs=function(){function t(e,n,r,i){if(this.width=e,this.height=n,this.rowSize=r,this.bits=i,n==null&&(n=e),this.height=n,e<1||n<1)throw new it("Both dimensions must be greater than 0");r==null&&(r=Math.floor((e+31)/32)),this.rowSize=r,i==null&&(this.bits=new Int32Array(this.rowSize*this.height))}return t.parseFromBooleanArray=function(e){for(var n=e.length,r=e[0].length,i=new t(r,n),a=0;a<n;a++)for(var s=e[a],o=0;o<r;o++)s[o]&&i.set(o,a);return i},t.parseFromString=function(e,n,r){if(e===null)throw new it("stringRepresentation cannot be null");for(var i=new Array(e.length),a=0,s=0,o=-1,c=0,d=0;d<e.length;)if(e.charAt(d)===`
`||e.charAt(d)==="\r"){if(a>s){if(o===-1)o=a-s;else if(a-s!==o)throw new it("row lengths do not match");s=a,c++}d++}else if(e.substring(d,d+n.length)===n)d+=n.length,i[a]=!0,a++;else if(e.substring(d,d+r.length)===r)d+=r.length,i[a]=!1,a++;else throw new it("illegal character encountered: "+e.substring(d));if(a>s){if(o===-1)o=a-s;else if(a-s!==o)throw new it("row lengths do not match");c++}for(var f=new t(o,c),p=0;p<a;p++)i[p]&&f.set(Math.floor(p%o),Math.floor(p/o));return f},t.prototype.get=function(e,n){var r=n*this.rowSize+Math.floor(e/32);return(this.bits[r]>>>(e&31)&1)!==0},t.prototype.set=function(e,n){var r=n*this.rowSize+Math.floor(e/32);this.bits[r]|=1<<(e&31)&4294967295},t.prototype.unset=function(e,n){var r=n*this.rowSize+Math.floor(e/32);this.bits[r]&=~(1<<(e&31)&4294967295)},t.prototype.flip=function(e,n){var r=n*this.rowSize+Math.floor(e/32);this.bits[r]^=1<<(e&31)&4294967295},t.prototype.xor=function(e){if(this.width!==e.getWidth()||this.height!==e.getHeight()||this.rowSize!==e.getRowSize())throw new it("input matrix dimensions do not match");for(var n=new Wr(Math.floor(this.width/32)+1),r=this.rowSize,i=this.bits,a=0,s=this.height;a<s;a++)for(var o=a*r,c=e.getRow(a,n).getBitArray(),d=0;d<r;d++)i[o+d]^=c[d]},t.prototype.clear=function(){for(var e=this.bits,n=e.length,r=0;r<n;r++)e[r]=0},t.prototype.setRegion=function(e,n,r,i){if(n<0||e<0)throw new it("Left and top must be nonnegative");if(i<1||r<1)throw new it("Height and width must be at least 1");var a=e+r,s=n+i;if(s>this.height||a>this.width)throw new it("The region must fit inside the matrix");for(var o=this.rowSize,c=this.bits,d=n;d<s;d++)for(var f=d*o,p=e;p<a;p++)c[f+Math.floor(p/32)]|=1<<(p&31)&4294967295},t.prototype.getRow=function(e,n){n==null||n.getSize()<this.width?n=new Wr(this.width):n.clear();for(var r=this.rowSize,i=this.bits,a=e*r,s=0;s<r;s++)n.setBulk(s*32,i[a+s]);return n},t.prototype.setRow=function(e,n){Tn.arraycopy(n.getBitArray(),0,this.bits,e*this.rowSize,this.rowSize)},t.prototype.rotate180=function(){for(var e=this.getWidth(),n=this.getHeight(),r=new Wr(e),i=new Wr(e),a=0,s=Math.floor((n+1)/2);a<s;a++)r=this.getRow(a,r),i=this.getRow(n-1-a,i),r.reverse(),i.reverse(),this.setRow(a,i),this.setRow(n-1-a,r)},t.prototype.getEnclosingRectangle=function(){for(var e=this.width,n=this.height,r=this.rowSize,i=this.bits,a=e,s=n,o=-1,c=-1,d=0;d<n;d++)for(var f=0;f<r;f++){var p=i[d*r+f];if(p!==0){if(d<s&&(s=d),d>c&&(c=d),f*32<a){for(var g=0;(p<<31-g&4294967295)===0;)g++;f*32+g<a&&(a=f*32+g)}if(f*32+31>o){for(var g=31;!(p>>>g);)g--;f*32+g>o&&(o=f*32+g)}}}return o<a||c<s?null:Int32Array.from([a,s,o-a+1,c-s+1])},t.prototype.getTopLeftOnBit=function(){for(var e=this.rowSize,n=this.bits,r=0;r<n.length&&n[r]===0;)r++;if(r===n.length)return null;for(var i=r/e,a=r%e*32,s=n[r],o=0;(s<<31-o&4294967295)===0;)o++;return a+=o,Int32Array.from([a,i])},t.prototype.getBottomRightOnBit=function(){for(var e=this.rowSize,n=this.bits,r=n.length-1;r>=0&&n[r]===0;)r--;if(r<0)return null;for(var i=Math.floor(r/e),a=Math.floor(r%e)*32,s=n[r],o=31;!(s>>>o);)o--;return a+=o,Int32Array.from([a,i])},t.prototype.getWidth=function(){return this.width},t.prototype.getHeight=function(){return this.height},t.prototype.getRowSize=function(){return this.rowSize},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var n=e;return this.width===n.width&&this.height===n.height&&this.rowSize===n.rowSize&&Rr.equals(this.bits,n.bits)},t.prototype.hashCode=function(){var e=this.width;return e=31*e+this.width,e=31*e+this.height,e=31*e+this.rowSize,e=31*e+Rr.hashCode(this.bits),e},t.prototype.toString=function(e,n,r){return e===void 0&&(e="X "),n===void 0&&(n="  "),r===void 0&&(r=`
`),this.buildToString(e,n,r)},t.prototype.buildToString=function(e,n,r){for(var i=new Et,a=0,s=this.height;a<s;a++){for(var o=0,c=this.width;o<c;o++)i.append(this.get(o,a)?e:n);i.append(r)}return i.toString()},t.prototype.clone=function(){return new t(this.width,this.height,this.rowSize,this.bits.slice())},t}(),zU=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),_e=function(t){zU(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.getNotFoundInstance=function(){return new e},e.kind="NotFoundException",e}(qi),$U=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),GU=function(t){$U(e,t);function e(n){var r=t.call(this,n)||this;return r.luminances=e.EMPTY,r.buckets=new Int32Array(e.LUMINANCE_BUCKETS),r}return e.prototype.getBlackRow=function(n,r){var i=this.getLuminanceSource(),a=i.getWidth();r==null||r.getSize()<a?r=new Wr(a):r.clear(),this.initArrays(a);for(var s=i.getRow(n,this.luminances),o=this.buckets,c=0;c<a;c++)o[(s[c]&255)>>e.LUMINANCE_SHIFT]++;var d=e.estimateBlackPoint(o);if(a<3)for(var c=0;c<a;c++)(s[c]&255)<d&&r.set(c);else for(var f=s[0]&255,p=s[1]&255,c=1;c<a-1;c++){var g=s[c+1]&255;(p*4-f-g)/2<d&&r.set(c),f=p,p=g}return r},e.prototype.getBlackMatrix=function(){var n=this.getLuminanceSource(),r=n.getWidth(),i=n.getHeight(),a=new zs(r,i);this.initArrays(r);for(var s=this.buckets,o=1;o<5;o++)for(var c=Math.floor(i*o/5),d=n.getRow(c,this.luminances),f=Math.floor(r*4/5),p=Math.floor(r/5);p<f;p++){var g=d[p]&255;s[g>>e.LUMINANCE_SHIFT]++}for(var m=e.estimateBlackPoint(s),x=n.getMatrix(),o=0;o<i;o++)for(var b=o*r,p=0;p<r;p++){var g=x[b+p]&255;g<m&&a.set(p,o)}return a},e.prototype.createBinarizer=function(n){return new e(n)},e.prototype.initArrays=function(n){this.luminances.length<n&&(this.luminances=new Uint8ClampedArray(n));for(var r=this.buckets,i=0;i<e.LUMINANCE_BUCKETS;i++)r[i]=0},e.estimateBlackPoint=function(n){for(var r=n.length,i=0,a=0,s=0,o=0;o<r;o++)n[o]>s&&(a=o,s=n[o]),n[o]>i&&(i=n[o]);for(var c=0,d=0,o=0;o<r;o++){var f=o-a,p=n[o]*f*f;p>d&&(c=o,d=p)}if(a>c){var g=a;a=c,c=g}if(c-a<=r/16)throw new _e;for(var m=c-1,x=-1,o=c-1;o>a;o--){var b=o-a,p=b*b*(c-o)*(i-n[o]);p>x&&(m=o,x=p)}return m<<e.LUMINANCE_SHIFT},e.LUMINANCE_BITS=5,e.LUMINANCE_SHIFT=8-e.LUMINANCE_BITS,e.LUMINANCE_BUCKETS=1<<e.LUMINANCE_BITS,e.EMPTY=Uint8ClampedArray.from([0]),e}(LU),WU=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),YU=function(t){WU(e,t);function e(n){var r=t.call(this,n)||this;return r.matrix=null,r}return e.prototype.getBlackMatrix=function(){if(this.matrix!==null)return this.matrix;var n=this.getLuminanceSource(),r=n.getWidth(),i=n.getHeight();if(r>=e.MINIMUM_DIMENSION&&i>=e.MINIMUM_DIMENSION){var a=n.getMatrix(),s=r>>e.BLOCK_SIZE_POWER;(r&e.BLOCK_SIZE_MASK)!==0&&s++;var o=i>>e.BLOCK_SIZE_POWER;(i&e.BLOCK_SIZE_MASK)!==0&&o++;var c=e.calculateBlackPoints(a,s,o,r,i),d=new zs(r,i);e.calculateThresholdForBlock(a,s,o,r,i,c,d),this.matrix=d}else this.matrix=t.prototype.getBlackMatrix.call(this);return this.matrix},e.prototype.createBinarizer=function(n){return new e(n)},e.calculateThresholdForBlock=function(n,r,i,a,s,o,c){for(var d=s-e.BLOCK_SIZE,f=a-e.BLOCK_SIZE,p=0;p<i;p++){var g=p<<e.BLOCK_SIZE_POWER;g>d&&(g=d);for(var m=e.cap(p,2,i-3),x=0;x<r;x++){var b=x<<e.BLOCK_SIZE_POWER;b>f&&(b=f);for(var A=e.cap(x,2,r-3),E=0,S=-2;S<=2;S++){var T=o[m+S];E+=T[A-2]+T[A-1]+T[A]+T[A+1]+T[A+2]}var I=E/25;e.thresholdBlock(n,b,g,I,a,c)}}},e.cap=function(n,r,i){return n<r?r:n>i?i:n},e.thresholdBlock=function(n,r,i,a,s,o){for(var c=0,d=i*s+r;c<e.BLOCK_SIZE;c++,d+=s)for(var f=0;f<e.BLOCK_SIZE;f++)(n[d+f]&255)<=a&&o.set(r+f,i+c)},e.calculateBlackPoints=function(n,r,i,a,s){for(var o=s-e.BLOCK_SIZE,c=a-e.BLOCK_SIZE,d=new Array(i),f=0;f<i;f++){d[f]=new Int32Array(r);var p=f<<e.BLOCK_SIZE_POWER;p>o&&(p=o);for(var g=0;g<r;g++){var m=g<<e.BLOCK_SIZE_POWER;m>c&&(m=c);for(var x=0,b=255,A=0,E=0,S=p*a+m;E<e.BLOCK_SIZE;E++,S+=a){for(var T=0;T<e.BLOCK_SIZE;T++){var I=n[S+T]&255;x+=I,I<b&&(b=I),I>A&&(A=I)}if(A-b>e.MIN_DYNAMIC_RANGE)for(E++,S+=a;E<e.BLOCK_SIZE;E++,S+=a)for(var T=0;T<e.BLOCK_SIZE;T++)x+=n[S+T]&255}var P=x>>e.BLOCK_SIZE_POWER*2;if(A-b<=e.MIN_DYNAMIC_RANGE&&(P=b/2,f>0&&g>0)){var F=(d[f-1][g]+2*d[f][g-1]+d[f-1][g-1])/4;b<F&&(P=F)}d[f][g]=P}}return d},e.BLOCK_SIZE_POWER=3,e.BLOCK_SIZE=1<<e.BLOCK_SIZE_POWER,e.BLOCK_SIZE_MASK=e.BLOCK_SIZE-1,e.MINIMUM_DIMENSION=e.BLOCK_SIZE*5,e.MIN_DYNAMIC_RANGE=24,e}(GU),fy=function(){function t(e,n){this.width=e,this.height=n}return t.prototype.getWidth=function(){return this.width},t.prototype.getHeight=function(){return this.height},t.prototype.isCropSupported=function(){return!1},t.prototype.crop=function(e,n,r,i){throw new Am("This luminance source does not support cropping.")},t.prototype.isRotateSupported=function(){return!1},t.prototype.rotateCounterClockwise=function(){throw new Am("This luminance source does not support rotation by 90 degrees.")},t.prototype.rotateCounterClockwise45=function(){throw new Am("This luminance source does not support rotation by 45 degrees.")},t.prototype.toString=function(){for(var e=new Uint8ClampedArray(this.width),n=new Et,r=0;r<this.height;r++){for(var i=this.getRow(r,e),a=0;a<this.width;a++){var s=i[a]&255,o=void 0;s<64?o="#":s<128?o="+":s<192?o=".":o=" ",n.append(o)}n.append(`
`)}return n.toString()},t}(),qU=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),d_=function(t){qU(e,t);function e(n){var r=t.call(this,n.getWidth(),n.getHeight())||this;return r.delegate=n,r}return e.prototype.getRow=function(n,r){for(var i=this.delegate.getRow(n,r),a=this.getWidth(),s=0;s<a;s++)i[s]=255-(i[s]&255);return i},e.prototype.getMatrix=function(){for(var n=this.delegate.getMatrix(),r=this.getWidth()*this.getHeight(),i=new Uint8ClampedArray(r),a=0;a<r;a++)i[a]=255-(n[a]&255);return i},e.prototype.isCropSupported=function(){return this.delegate.isCropSupported()},e.prototype.crop=function(n,r,i,a){return new e(this.delegate.crop(n,r,i,a))},e.prototype.isRotateSupported=function(){return this.delegate.isRotateSupported()},e.prototype.invert=function(){return this.delegate},e.prototype.rotateCounterClockwise=function(){return new e(this.delegate.rotateCounterClockwise())},e.prototype.rotateCounterClockwise45=function(){return new e(this.delegate.rotateCounterClockwise45())},e}(fy),XU=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),KU=function(t){XU(e,t);function e(n,r){r===void 0&&(r=!1);var i=t.call(this,n.width,n.height)||this;return i.canvas=n,i.tempCanvasElement=null,i.buffer=e.makeBufferFromCanvasImageData(n,r),i}return e.makeBufferFromCanvasImageData=function(n,r){r===void 0&&(r=!1);var i=n.getContext("2d").getImageData(0,0,n.width,n.height);return e.toGrayscaleBuffer(i.data,n.width,n.height,r)},e.toGrayscaleBuffer=function(n,r,i,a){a===void 0&&(a=!1);var s=new Uint8ClampedArray(r*i);if(e.FRAME_INDEX=!e.FRAME_INDEX,e.FRAME_INDEX||!a)for(var o=0,c=0,d=n.length;o<d;o+=4,c++){var f=void 0,p=n[o+3];if(p===0)f=255;else{var g=n[o],m=n[o+1],x=n[o+2];f=306*g+601*m+117*x+512>>10}s[c]=f}else for(var o=0,c=0,b=n.length;o<b;o+=4,c++){var f=void 0,p=n[o+3];if(p===0)f=255;else{var g=n[o],m=n[o+1],x=n[o+2];f=306*g+601*m+117*x+512>>10}s[c]=255-f}return s},e.prototype.getRow=function(n,r){if(n<0||n>=this.getHeight())throw new it("Requested row is outside the image: "+n);var i=this.getWidth(),a=n*i;return r===null?r=this.buffer.slice(a,a+i):(r.length<i&&(r=new Uint8ClampedArray(i)),r.set(this.buffer.slice(a,a+i))),r},e.prototype.getMatrix=function(){return this.buffer},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(n,r,i,a){return t.prototype.crop.call(this,n,r,i,a),this},e.prototype.isRotateSupported=function(){return!0},e.prototype.rotateCounterClockwise=function(){return this.rotate(-90),this},e.prototype.rotateCounterClockwise45=function(){return this.rotate(-45),this},e.prototype.getTempCanvasElement=function(){if(this.tempCanvasElement===null){var n=this.canvas.ownerDocument.createElement("canvas");n.width=this.canvas.width,n.height=this.canvas.height,this.tempCanvasElement=n}return this.tempCanvasElement},e.prototype.rotate=function(n){var r=this.getTempCanvasElement(),i=r.getContext("2d"),a=n*e.DEGREE_TO_RADIANS,s=this.canvas.width,o=this.canvas.height,c=Math.ceil(Math.abs(Math.cos(a))*s+Math.abs(Math.sin(a))*o),d=Math.ceil(Math.abs(Math.sin(a))*s+Math.abs(Math.cos(a))*o);return r.width=c,r.height=d,i.translate(c/2,d/2),i.rotate(a),i.drawImage(this.canvas,s/-2,o/-2),this.buffer=e.makeBufferFromCanvasImageData(r),this},e.prototype.invert=function(){return new d_(this)},e.DEGREE_TO_RADIANS=Math.PI/180,e.FRAME_INDEX=!0,e}(fy),QU=function(){function t(e,n,r){this.deviceId=e,this.label=n,this.kind="videoinput",this.groupId=r||void 0}return t.prototype.toJSON=function(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}},t}(),Di=function(t,e,n,r){function i(a){return a instanceof n?a:new n(function(s){s(a)})}return new(n||(n=Promise))(function(a,s){function o(f){try{d(r.next(f))}catch(p){s(p)}}function c(f){try{d(r.throw(f))}catch(p){s(p)}}function d(f){f.done?a(f.value):i(f.value).then(o,c)}d((r=r.apply(t,e||[])).next())})},Ri=function(t,e){var n={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,i,a,s;return s={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function o(d){return function(f){return c([d,f])}}function c(d){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(a=d[0]&2?i.return:d[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,d[1])).done)return a;switch(i=0,a&&(d=[d[0]&2,a.value]),d[0]){case 0:case 1:a=d;break;case 4:return n.label++,{value:d[1],done:!1};case 5:n.label++,i=d[1],d=[0];continue;case 7:d=n.ops.pop(),n.trys.pop();continue;default:if(a=n.trys,!(a=a.length>0&&a[a.length-1])&&(d[0]===6||d[0]===2)){n=0;continue}if(d[0]===3&&(!a||d[1]>a[0]&&d[1]<a[3])){n.label=d[1];break}if(d[0]===6&&n.label<a[1]){n.label=a[1],a=d;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(d);break}a[2]&&n.ops.pop(),n.trys.pop();continue}d=e.call(t,n)}catch(f){d=[6,f],i=0}finally{r=a=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}},ZU=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},bf=function(){function t(e,n,r){n===void 0&&(n=500),this.reader=e,this.timeBetweenScansMillis=n,this._hints=r,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}return Object.defineProperty(t.prototype,"hasNavigator",{get:function(){return typeof navigator<"u"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isMediaDevicesSuported",{get:function(){return this.hasNavigator&&!!navigator.mediaDevices},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"canEnumerateDevices",{get:function(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"timeBetweenDecodingAttempts",{get:function(){return this._timeBetweenDecodingAttempts},set:function(e){this._timeBetweenDecodingAttempts=e<0?0:e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hints",{get:function(){return this._hints},set:function(e){this._hints=e||null},enumerable:!1,configurable:!0}),t.prototype.listVideoInputDevices=function(){return Di(this,void 0,void 0,function(){var e,n,r,i,a,s,o,c,d,f,p,g;return Ri(this,function(m){switch(m.label){case 0:if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");return[4,navigator.mediaDevices.enumerateDevices()];case 1:e=m.sent(),n=[];try{for(r=ZU(e),i=r.next();!i.done;i=r.next())a=i.value,s=a.kind==="video"?"videoinput":a.kind,s==="videoinput"&&(o=a.deviceId||a.id,c=a.label||"Video device "+(n.length+1),d=a.groupId,f={deviceId:o,label:c,kind:s,groupId:d},n.push(f))}catch(x){p={error:x}}finally{try{i&&!i.done&&(g=r.return)&&g.call(r)}finally{if(p)throw p.error}}return[2,n]}})})},t.prototype.getVideoInputDevices=function(){return Di(this,void 0,void 0,function(){var e;return Ri(this,function(n){switch(n.label){case 0:return[4,this.listVideoInputDevices()];case 1:return e=n.sent(),[2,e.map(function(r){return new QU(r.deviceId,r.label)})]}})})},t.prototype.findDeviceById=function(e){return Di(this,void 0,void 0,function(){var n;return Ri(this,function(r){switch(r.label){case 0:return[4,this.listVideoInputDevices()];case 1:return n=r.sent(),n?[2,n.find(function(i){return i.deviceId===e})]:[2,null]}})})},t.prototype.decodeFromInputVideoDevice=function(e,n){return Di(this,void 0,void 0,function(){return Ri(this,function(r){switch(r.label){case 0:return[4,this.decodeOnceFromVideoDevice(e,n)];case 1:return[2,r.sent()]}})})},t.prototype.decodeOnceFromVideoDevice=function(e,n){return Di(this,void 0,void 0,function(){var r,i;return Ri(this,function(a){switch(a.label){case 0:return this.reset(),e?r={deviceId:{exact:e}}:r={facingMode:"environment"},i={video:r},[4,this.decodeOnceFromConstraints(i,n)];case 1:return[2,a.sent()]}})})},t.prototype.decodeOnceFromConstraints=function(e,n){return Di(this,void 0,void 0,function(){var r;return Ri(this,function(i){switch(i.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return r=i.sent(),[4,this.decodeOnceFromStream(r,n)];case 2:return[2,i.sent()]}})})},t.prototype.decodeOnceFromStream=function(e,n){return Di(this,void 0,void 0,function(){var r,i;return Ri(this,function(a){switch(a.label){case 0:return this.reset(),[4,this.attachStreamToVideo(e,n)];case 1:return r=a.sent(),[4,this.decodeOnce(r)];case 2:return i=a.sent(),[2,i]}})})},t.prototype.decodeFromInputVideoDeviceContinuously=function(e,n,r){return Di(this,void 0,void 0,function(){return Ri(this,function(i){switch(i.label){case 0:return[4,this.decodeFromVideoDevice(e,n,r)];case 1:return[2,i.sent()]}})})},t.prototype.decodeFromVideoDevice=function(e,n,r){return Di(this,void 0,void 0,function(){var i,a;return Ri(this,function(s){switch(s.label){case 0:return e?i={deviceId:{exact:e}}:i={facingMode:"environment"},a={video:i},[4,this.decodeFromConstraints(a,n,r)];case 1:return[2,s.sent()]}})})},t.prototype.decodeFromConstraints=function(e,n,r){return Di(this,void 0,void 0,function(){var i;return Ri(this,function(a){switch(a.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return i=a.sent(),[4,this.decodeFromStream(i,n,r)];case 2:return[2,a.sent()]}})})},t.prototype.decodeFromStream=function(e,n,r){return Di(this,void 0,void 0,function(){var i;return Ri(this,function(a){switch(a.label){case 0:return this.reset(),[4,this.attachStreamToVideo(e,n)];case 1:return i=a.sent(),[4,this.decodeContinuously(i,r)];case 2:return[2,a.sent()]}})})},t.prototype.stopAsyncDecode=function(){this._stopAsyncDecode=!0},t.prototype.stopContinuousDecode=function(){this._stopContinuousDecode=!0},t.prototype.attachStreamToVideo=function(e,n){return Di(this,void 0,void 0,function(){var r;return Ri(this,function(i){switch(i.label){case 0:return r=this.prepareVideoElement(n),this.addVideoSource(r,e),this.videoElement=r,this.stream=e,[4,this.playVideoOnLoadAsync(r)];case 1:return i.sent(),[2,r]}})})},t.prototype.playVideoOnLoadAsync=function(e){var n=this;return new Promise(function(r,i){return n.playVideoOnLoad(e,function(){return r()})})},t.prototype.playVideoOnLoad=function(e,n){var r=this;this.videoEndedListener=function(){return r.stopStreams()},this.videoCanPlayListener=function(){return r.tryPlayVideo(e)},e.addEventListener("ended",this.videoEndedListener),e.addEventListener("canplay",this.videoCanPlayListener),e.addEventListener("playing",n),this.tryPlayVideo(e)},t.prototype.isVideoPlaying=function(e){return e.currentTime>0&&!e.paused&&!e.ended&&e.readyState>2},t.prototype.tryPlayVideo=function(e){return Di(this,void 0,void 0,function(){return Ri(this,function(n){switch(n.label){case 0:if(this.isVideoPlaying(e))return console.warn("Trying to play video that is already playing."),[2];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,e.play()];case 2:return n.sent(),[3,4];case 3:return n.sent(),console.warn("It was not possible to play the video."),[3,4];case 4:return[2]}})})},t.prototype.getMediaElement=function(e,n){var r=document.getElementById(e);if(!r)throw new za("element with id '"+e+"' not found");if(r.nodeName.toLowerCase()!==n.toLowerCase())throw new za("element with id '"+e+"' must be an "+n+" element");return r},t.prototype.decodeFromImage=function(e,n){if(!e&&!n)throw new za("either imageElement with a src set or an url must be provided");return n&&!e?this.decodeFromImageUrl(n):this.decodeFromImageElement(e)},t.prototype.decodeFromVideo=function(e,n){if(!e&&!n)throw new za("Either an element with a src set or an URL must be provided");return n&&!e?this.decodeFromVideoUrl(n):this.decodeFromVideoElement(e)},t.prototype.decodeFromVideoContinuously=function(e,n,r){if(e===void 0&&n===void 0)throw new za("Either an element with a src set or an URL must be provided");return n&&!e?this.decodeFromVideoUrlContinuously(n,r):this.decodeFromVideoElementContinuously(e,r)},t.prototype.decodeFromImageElement=function(e){if(!e)throw new za("An image element must be provided.");this.reset();var n=this.prepareImageElement(e);this.imageElement=n;var r;return this.isImageLoaded(n)?r=this.decodeOnce(n,!1,!0):r=this._decodeOnLoadImage(n),r},t.prototype.decodeFromVideoElement=function(e){var n=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideo(n)},t.prototype.decodeFromVideoElementContinuously=function(e,n){var r=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideoContinuously(r,n)},t.prototype._decodeFromVideoElementSetup=function(e){if(!e)throw new za("A video element must be provided.");this.reset();var n=this.prepareVideoElement(e);return this.videoElement=n,n},t.prototype.decodeFromImageUrl=function(e){if(!e)throw new za("An URL must be provided.");this.reset();var n=this.prepareImageElement();this.imageElement=n;var r=this._decodeOnLoadImage(n);return n.src=e,r},t.prototype.decodeFromVideoUrl=function(e){if(!e)throw new za("An URL must be provided.");this.reset();var n=this.prepareVideoElement(),r=this.decodeFromVideoElement(n);return n.src=e,r},t.prototype.decodeFromVideoUrlContinuously=function(e,n){if(!e)throw new za("An URL must be provided.");this.reset();var r=this.prepareVideoElement(),i=this.decodeFromVideoElementContinuously(r,n);return r.src=e,i},t.prototype._decodeOnLoadImage=function(e){var n=this;return new Promise(function(r,i){n.imageLoadedListener=function(){return n.decodeOnce(e,!1,!0).then(r,i)},e.addEventListener("load",n.imageLoadedListener)})},t.prototype._decodeOnLoadVideo=function(e){return Di(this,void 0,void 0,function(){return Ri(this,function(n){switch(n.label){case 0:return[4,this.playVideoOnLoadAsync(e)];case 1:return n.sent(),[4,this.decodeOnce(e)];case 2:return[2,n.sent()]}})})},t.prototype._decodeOnLoadVideoContinuously=function(e,n){return Di(this,void 0,void 0,function(){return Ri(this,function(r){switch(r.label){case 0:return[4,this.playVideoOnLoadAsync(e)];case 1:return r.sent(),this.decodeContinuously(e,n),[2]}})})},t.prototype.isImageLoaded=function(e){return!(!e.complete||e.naturalWidth===0)},t.prototype.prepareImageElement=function(e){var n;return typeof e>"u"&&(n=document.createElement("img"),n.width=200,n.height=200),typeof e=="string"&&(n=this.getMediaElement(e,"img")),e instanceof HTMLImageElement&&(n=e),n},t.prototype.prepareVideoElement=function(e){var n;return!e&&typeof document<"u"&&(n=document.createElement("video"),n.width=200,n.height=200),typeof e=="string"&&(n=this.getMediaElement(e,"video")),e instanceof HTMLVideoElement&&(n=e),n.setAttribute("autoplay","true"),n.setAttribute("muted","true"),n.setAttribute("playsinline","true"),n},t.prototype.decodeOnce=function(e,n,r){var i=this;n===void 0&&(n=!0),r===void 0&&(r=!0),this._stopAsyncDecode=!1;var a=function(s,o){if(i._stopAsyncDecode){o(new _e("Video stream has ended before any code could be detected.")),i._stopAsyncDecode=void 0;return}try{var c=i.decode(e);s(c)}catch(g){var d=n&&g instanceof _e,f=g instanceof $r||g instanceof Ve,p=f&&r;if(d||p)return setTimeout(a,i._timeBetweenDecodingAttempts,s,o);o(g)}};return new Promise(function(s,o){return a(s,o)})},t.prototype.decodeContinuously=function(e,n){var r=this;this._stopContinuousDecode=!1;var i=function(){if(r._stopContinuousDecode){r._stopContinuousDecode=void 0;return}try{var a=r.decode(e);n(a,null),setTimeout(i,r.timeBetweenScansMillis)}catch(c){n(null,c);var s=c instanceof $r||c instanceof Ve,o=c instanceof _e;(s||o)&&setTimeout(i,r._timeBetweenDecodingAttempts)}};i()},t.prototype.decode=function(e){var n=this.createBinaryBitmap(e);return this.decodeBitmap(n)},t.prototype.createBinaryBitmap=function(e){this.getCaptureCanvasContext(e);var n=!1;e instanceof HTMLVideoElement?(this.drawFrameOnCanvas(e),n=!0):this.drawImageOnCanvas(e);var r=this.getCaptureCanvas(e),i=new KU(r,n),a=new YU(i);return new kU(a)},t.prototype.getCaptureCanvasContext=function(e){if(!this.captureCanvasContext){var n=this.getCaptureCanvas(e),r=void 0;try{r=n.getContext("2d",{willReadFrequently:!0})}catch{r=n.getContext("2d")}this.captureCanvasContext=r}return this.captureCanvasContext},t.prototype.getCaptureCanvas=function(e){if(!this.captureCanvas){var n=this.createCaptureCanvas(e);this.captureCanvas=n}return this.captureCanvas},t.prototype.drawFrameOnCanvas=function(e,n,r){n===void 0&&(n={sx:0,sy:0,sWidth:e.videoWidth,sHeight:e.videoHeight,dx:0,dy:0,dWidth:e.videoWidth,dHeight:e.videoHeight}),r===void 0&&(r=this.captureCanvasContext),r.drawImage(e,n.sx,n.sy,n.sWidth,n.sHeight,n.dx,n.dy,n.dWidth,n.dHeight)},t.prototype.drawImageOnCanvas=function(e,n,r){n===void 0&&(n={sx:0,sy:0,sWidth:e.naturalWidth,sHeight:e.naturalHeight,dx:0,dy:0,dWidth:e.naturalWidth,dHeight:e.naturalHeight}),r===void 0&&(r=this.captureCanvasContext),r.drawImage(e,n.sx,n.sy,n.sWidth,n.sHeight,n.dx,n.dy,n.dWidth,n.dHeight)},t.prototype.decodeBitmap=function(e){return this.reader.decode(e,this._hints)},t.prototype.createCaptureCanvas=function(e){if(typeof document>"u")return this._destroyCaptureCanvas(),null;var n=document.createElement("canvas"),r,i;return typeof e<"u"&&(e instanceof HTMLVideoElement?(r=e.videoWidth,i=e.videoHeight):e instanceof HTMLImageElement&&(r=e.naturalWidth||e.width,i=e.naturalHeight||e.height)),n.style.width=r+"px",n.style.height=i+"px",n.width=r,n.height=i,n},t.prototype.stopStreams=function(){this.stream&&(this.stream.getVideoTracks().forEach(function(e){return e.stop()}),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()},t.prototype.reset=function(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()},t.prototype._destroyVideoElement=function(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)},t.prototype._destroyImageElement=function(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)},t.prototype._destroyCaptureCanvas=function(){this.captureCanvasContext=void 0,this.captureCanvas=void 0},t.prototype.addVideoSource=function(e,n){try{e.srcObject=n}catch{e.src=URL.createObjectURL(n)}},t.prototype.cleanVideoSource=function(e){try{e.srcObject=null}catch{e.src=""}this.videoElement.removeAttribute("src")},t}(),Ai=function(){function t(e,n,r,i,a,s){r===void 0&&(r=n==null?0:8*n.length),s===void 0&&(s=Tn.currentTimeMillis()),this.text=e,this.rawBytes=n,this.numBits=r,this.resultPoints=i,this.format=a,this.timestamp=s,this.text=e,this.rawBytes=n,r==null?this.numBits=n==null?0:8*n.length:this.numBits=r,this.resultPoints=i,this.format=a,this.resultMetadata=null,s==null?this.timestamp=Tn.currentTimeMillis():this.timestamp=s}return t.prototype.getText=function(){return this.text},t.prototype.getRawBytes=function(){return this.rawBytes},t.prototype.getNumBits=function(){return this.numBits},t.prototype.getResultPoints=function(){return this.resultPoints},t.prototype.getBarcodeFormat=function(){return this.format},t.prototype.getResultMetadata=function(){return this.resultMetadata},t.prototype.putMetadata=function(e,n){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(e,n)},t.prototype.putAllMetadata=function(e){e!==null&&(this.resultMetadata===null?this.resultMetadata=e:this.resultMetadata=new Map(e))},t.prototype.addResultPoints=function(e){var n=this.resultPoints;if(n===null)this.resultPoints=e;else if(e!==null&&e.length>0){var r=new Array(n.length+e.length);Tn.arraycopy(n,0,r,0,n.length),Tn.arraycopy(e,0,r,n.length,e.length),this.resultPoints=r}},t.prototype.getTimestamp=function(){return this.timestamp},t.prototype.toString=function(){return this.text},t}(),xw;(function(t){t[t.AZTEC=0]="AZTEC",t[t.CODABAR=1]="CODABAR",t[t.CODE_39=2]="CODE_39",t[t.CODE_93=3]="CODE_93",t[t.CODE_128=4]="CODE_128",t[t.DATA_MATRIX=5]="DATA_MATRIX",t[t.EAN_8=6]="EAN_8",t[t.EAN_13=7]="EAN_13",t[t.ITF=8]="ITF",t[t.MAXICODE=9]="MAXICODE",t[t.PDF_417=10]="PDF_417",t[t.QR_CODE=11]="QR_CODE",t[t.RSS_14=12]="RSS_14",t[t.RSS_EXPANDED=13]="RSS_EXPANDED",t[t.UPC_A=14]="UPC_A",t[t.UPC_E=15]="UPC_E",t[t.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(xw||(xw={}));const et=xw;var ww;(function(t){t[t.OTHER=0]="OTHER",t[t.ORIENTATION=1]="ORIENTATION",t[t.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",t[t.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",t[t.ISSUE_NUMBER=4]="ISSUE_NUMBER",t[t.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",t[t.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",t[t.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",t[t.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",t[t.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",t[t.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(ww||(ww={}));const oi=ww;var hy=function(){function t(e,n,r,i,a,s){a===void 0&&(a=-1),s===void 0&&(s=-1),this.rawBytes=e,this.text=n,this.byteSegments=r,this.ecLevel=i,this.structuredAppendSequenceNumber=a,this.structuredAppendParity=s,this.numBits=e==null?0:8*e.length}return t.prototype.getRawBytes=function(){return this.rawBytes},t.prototype.getNumBits=function(){return this.numBits},t.prototype.setNumBits=function(e){this.numBits=e},t.prototype.getText=function(){return this.text},t.prototype.getByteSegments=function(){return this.byteSegments},t.prototype.getECLevel=function(){return this.ecLevel},t.prototype.getErrorsCorrected=function(){return this.errorsCorrected},t.prototype.setErrorsCorrected=function(e){this.errorsCorrected=e},t.prototype.getErasures=function(){return this.erasures},t.prototype.setErasures=function(e){this.erasures=e},t.prototype.getOther=function(){return this.other},t.prototype.setOther=function(e){this.other=e},t.prototype.hasStructuredAppend=function(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0},t.prototype.getStructuredAppendParity=function(){return this.structuredAppendParity},t.prototype.getStructuredAppendSequenceNumber=function(){return this.structuredAppendSequenceNumber},t}(),Kh=function(){function t(){}return t.prototype.exp=function(e){return this.expTable[e]},t.prototype.log=function(e){if(e===0)throw new it;return this.logTable[e]},t.addOrSubtract=function(e,n){return e^n},t}(),Ll=function(){function t(e,n){if(n.length===0)throw new it;this.field=e;var r=n.length;if(r>1&&n[0]===0){for(var i=1;i<r&&n[i]===0;)i++;i===r?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(r-i),Tn.arraycopy(n,i,this.coefficients,0,this.coefficients.length))}else this.coefficients=n}return t.prototype.getCoefficients=function(){return this.coefficients},t.prototype.getDegree=function(){return this.coefficients.length-1},t.prototype.isZero=function(){return this.coefficients[0]===0},t.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},t.prototype.evaluateAt=function(e){if(e===0)return this.getCoefficient(0);var n=this.coefficients,r;if(e===1){r=0;for(var i=0,a=n.length;i!==a;i++){var s=n[i];r=Kh.addOrSubtract(r,s)}return r}r=n[0];for(var o=n.length,c=this.field,i=1;i<o;i++)r=Kh.addOrSubtract(c.multiply(e,r),n[i]);return r},t.prototype.addOrSubtract=function(e){if(!this.field.equals(e.field))throw new it("GenericGFPolys do not have same GenericGF field");if(this.isZero())return e;if(e.isZero())return this;var n=this.coefficients,r=e.coefficients;if(n.length>r.length){var i=n;n=r,r=i}var a=new Int32Array(r.length),s=r.length-n.length;Tn.arraycopy(r,0,a,0,s);for(var o=s;o<r.length;o++)a[o]=Kh.addOrSubtract(n[o-s],r[o]);return new t(this.field,a)},t.prototype.multiply=function(e){if(!this.field.equals(e.field))throw new it("GenericGFPolys do not have same GenericGF field");if(this.isZero()||e.isZero())return this.field.getZero();for(var n=this.coefficients,r=n.length,i=e.coefficients,a=i.length,s=new Int32Array(r+a-1),o=this.field,c=0;c<r;c++)for(var d=n[c],f=0;f<a;f++)s[c+f]=Kh.addOrSubtract(s[c+f],o.multiply(d,i[f]));return new t(o,s)},t.prototype.multiplyScalar=function(e){if(e===0)return this.field.getZero();if(e===1)return this;for(var n=this.coefficients.length,r=this.field,i=new Int32Array(n),a=this.coefficients,s=0;s<n;s++)i[s]=r.multiply(a[s],e);return new t(r,i)},t.prototype.multiplyByMonomial=function(e,n){if(e<0)throw new it;if(n===0)return this.field.getZero();for(var r=this.coefficients,i=r.length,a=new Int32Array(i+e),s=this.field,o=0;o<i;o++)a[o]=s.multiply(r[o],n);return new t(s,a)},t.prototype.divide=function(e){if(!this.field.equals(e.field))throw new it("GenericGFPolys do not have same GenericGF field");if(e.isZero())throw new it("Divide by 0");for(var n=this.field,r=n.getZero(),i=this,a=e.getCoefficient(e.getDegree()),s=n.inverse(a);i.getDegree()>=e.getDegree()&&!i.isZero();){var o=i.getDegree()-e.getDegree(),c=n.multiply(i.getCoefficient(i.getDegree()),s),d=e.multiplyByMonomial(o,c),f=n.buildMonomial(o,c);r=r.addOrSubtract(f),i=i.addOrSubtract(d)}return[r,i]},t.prototype.toString=function(){for(var e="",n=this.getDegree();n>=0;n--){var r=this.getCoefficient(n);if(r!==0){if(r<0?(e+=" - ",r=-r):e.length>0&&(e+=" + "),n===0||r!==1){var i=this.field.log(r);i===0?e+="1":i===1?e+="a":(e+="a^",e+=i)}n!==0&&(n===1?e+="x":(e+="x^",e+=n))}}return e},t}(),JU=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),oM=function(t){JU(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="ArithmeticException",e}(qi),eH=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Gi=function(t){eH(e,t);function e(n,r,i){var a=t.call(this)||this;a.primitive=n,a.size=r,a.generatorBase=i;for(var s=new Int32Array(r),o=1,c=0;c<r;c++)s[c]=o,o*=2,o>=r&&(o^=n,o&=r-1);a.expTable=s;for(var d=new Int32Array(r),c=0;c<r-1;c++)d[s[c]]=c;return a.logTable=d,a.zero=new Ll(a,Int32Array.from([0])),a.one=new Ll(a,Int32Array.from([1])),a}return e.prototype.getZero=function(){return this.zero},e.prototype.getOne=function(){return this.one},e.prototype.buildMonomial=function(n,r){if(n<0)throw new it;if(r===0)return this.zero;var i=new Int32Array(n+1);return i[0]=r,new Ll(this,i)},e.prototype.inverse=function(n){if(n===0)throw new oM;return this.expTable[this.size-this.logTable[n]-1]},e.prototype.multiply=function(n,r){return n===0||r===0?0:this.expTable[(this.logTable[n]+this.logTable[r])%(this.size-1)]},e.prototype.getSize=function(){return this.size},e.prototype.getGeneratorBase=function(){return this.generatorBase},e.prototype.toString=function(){return"GF(0x"+It.toHexString(this.primitive)+","+this.size+")"},e.prototype.equals=function(n){return n===this},e.AZTEC_DATA_12=new e(4201,4096,1),e.AZTEC_DATA_10=new e(1033,1024,1),e.AZTEC_DATA_6=new e(67,64,1),e.AZTEC_PARAM=new e(19,16,1),e.QR_CODE_FIELD_256=new e(285,256,0),e.DATA_MATRIX_FIELD_256=new e(301,256,1),e.AZTEC_DATA_8=e.DATA_MATRIX_FIELD_256,e.MAXICODE_FIELD_64=e.AZTEC_DATA_6,e}(Kh),tH=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),zg=function(t){tH(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="ReedSolomonException",e}(qi),nH=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),np=function(t){nH(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="IllegalStateException",e}(qi),py=function(){function t(e){this.field=e}return t.prototype.decode=function(e,n){for(var r=this.field,i=new Ll(r,e),a=new Int32Array(n),s=!0,o=0;o<n;o++){var c=i.evaluateAt(r.exp(o+r.getGeneratorBase()));a[a.length-1-o]=c,c!==0&&(s=!1)}if(!s)for(var d=new Ll(r,a),f=this.runEuclideanAlgorithm(r.buildMonomial(n,1),d,n),p=f[0],g=f[1],m=this.findErrorLocations(p),x=this.findErrorMagnitudes(g,m),o=0;o<m.length;o++){var b=e.length-1-r.log(m[o]);if(b<0)throw new zg("Bad error location");e[b]=Gi.addOrSubtract(e[b],x[o])}},t.prototype.runEuclideanAlgorithm=function(e,n,r){if(e.getDegree()<n.getDegree()){var i=e;e=n,n=i}for(var a=this.field,s=e,o=n,c=a.getZero(),d=a.getOne();o.getDegree()>=(r/2|0);){var f=s,p=c;if(s=o,c=d,s.isZero())throw new zg("r_{i-1} was zero");o=f;for(var g=a.getZero(),m=s.getCoefficient(s.getDegree()),x=a.inverse(m);o.getDegree()>=s.getDegree()&&!o.isZero();){var b=o.getDegree()-s.getDegree(),A=a.multiply(o.getCoefficient(o.getDegree()),x);g=g.addOrSubtract(a.buildMonomial(b,A)),o=o.addOrSubtract(s.multiplyByMonomial(b,A))}if(d=g.multiply(c).addOrSubtract(p),o.getDegree()>=s.getDegree())throw new np("Division algorithm failed to reduce polynomial?")}var E=d.getCoefficient(0);if(E===0)throw new zg("sigmaTilde(0) was zero");var S=a.inverse(E),T=d.multiplyScalar(S),I=o.multiplyScalar(S);return[T,I]},t.prototype.findErrorLocations=function(e){var n=e.getDegree();if(n===1)return Int32Array.from([e.getCoefficient(1)]);for(var r=new Int32Array(n),i=0,a=this.field,s=1;s<a.getSize()&&i<n;s++)e.evaluateAt(s)===0&&(r[i]=a.inverse(s),i++);if(i!==n)throw new zg("Error locator degree does not match number of roots");return r},t.prototype.findErrorMagnitudes=function(e,n){for(var r=n.length,i=new Int32Array(r),a=this.field,s=0;s<r;s++){for(var o=a.inverse(n[s]),c=1,d=0;d<r;d++)if(s!==d){var f=a.multiply(n[d],o),p=(f&1)===0?f|1:f&-2;c=a.multiply(c,p)}i[s]=a.multiply(e.evaluateAt(o),a.inverse(c)),a.getGeneratorBase()!==0&&(i[s]=a.multiply(i[s],o))}return i},t}(),ni;(function(t){t[t.UPPER=0]="UPPER",t[t.LOWER=1]="LOWER",t[t.MIXED=2]="MIXED",t[t.DIGIT=3]="DIGIT",t[t.PUNCT=4]="PUNCT",t[t.BINARY=5]="BINARY"})(ni||(ni={}));var OI=function(){function t(){}return t.prototype.decode=function(e){this.ddata=e;var n=e.getBits(),r=this.extractBits(n),i=this.correctBits(r),a=t.convertBoolArrayToByteArray(i),s=t.getEncodedData(i),o=new hy(a,s,null,null);return o.setNumBits(i.length),o},t.highLevelDecode=function(e){return this.getEncodedData(e)},t.getEncodedData=function(e){for(var n=e.length,r=ni.UPPER,i=ni.UPPER,a="",s=0;s<n;)if(i===ni.BINARY){if(n-s<5)break;var o=t.readCode(e,s,5);if(s+=5,o===0){if(n-s<11)break;o=t.readCode(e,s,11)+31,s+=11}for(var c=0;c<o;c++){if(n-s<8){s=n;break}var d=t.readCode(e,s,8);a+=Vt.castAsNonUtf8Char(d),s+=8}i=r}else{var f=i===ni.DIGIT?4:5;if(n-s<f)break;var d=t.readCode(e,s,f);s+=f;var p=t.getCharacter(i,d);p.startsWith("CTRL_")?(r=i,i=t.getTable(p.charAt(5)),p.charAt(6)==="L"&&(r=i)):(a+=p,i=r)}return a},t.getTable=function(e){switch(e){case"L":return ni.LOWER;case"P":return ni.PUNCT;case"M":return ni.MIXED;case"D":return ni.DIGIT;case"B":return ni.BINARY;case"U":default:return ni.UPPER}},t.getCharacter=function(e,n){switch(e){case ni.UPPER:return t.UPPER_TABLE[n];case ni.LOWER:return t.LOWER_TABLE[n];case ni.MIXED:return t.MIXED_TABLE[n];case ni.PUNCT:return t.PUNCT_TABLE[n];case ni.DIGIT:return t.DIGIT_TABLE[n];default:throw new np("Bad table")}},t.prototype.correctBits=function(e){var n,r;this.ddata.getNbLayers()<=2?(r=6,n=Gi.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(r=8,n=Gi.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(r=10,n=Gi.AZTEC_DATA_10):(r=12,n=Gi.AZTEC_DATA_12);var i=this.ddata.getNbDatablocks(),a=e.length/r;if(a<i)throw new Ve;for(var s=e.length%r,o=new Int32Array(a),c=0;c<a;c++,s+=r)o[c]=t.readCode(e,s,r);try{var d=new py(n);d.decode(o,a-i)}catch(A){throw new Ve(A)}for(var f=(1<<r)-1,p=0,c=0;c<i;c++){var g=o[c];if(g===0||g===f)throw new Ve;(g===1||g===f-1)&&p++}for(var m=new Array(i*r-p),x=0,c=0;c<i;c++){var g=o[c];if(g===1||g===f-1)m.fill(g>1,x,x+r-1),x+=r-1;else for(var b=r-1;b>=0;--b)m[x++]=(g&1<<b)!==0}return m},t.prototype.extractBits=function(e){var n=this.ddata.isCompact(),r=this.ddata.getNbLayers(),i=(n?11:14)+r*4,a=new Int32Array(i),s=new Array(this.totalBitsInLayer(r,n));if(n)for(var o=0;o<a.length;o++)a[o]=o;else for(var c=i+1+2*It.truncDivision(It.truncDivision(i,2)-1,15),d=i/2,f=It.truncDivision(c,2),o=0;o<d;o++){var p=o+It.truncDivision(o,15);a[d-o-1]=f-p-1,a[d+o]=f+p+1}for(var o=0,g=0;o<r;o++){for(var m=(r-o)*4+(n?9:12),x=o*2,b=i-1-x,A=0;A<m;A++)for(var E=A*2,S=0;S<2;S++)s[g+E+S]=e.get(a[x+S],a[x+A]),s[g+2*m+E+S]=e.get(a[x+A],a[b-S]),s[g+4*m+E+S]=e.get(a[b-S],a[b-A]),s[g+6*m+E+S]=e.get(a[b-A],a[x+S]);g+=m*8}return s},t.readCode=function(e,n,r){for(var i=0,a=n;a<n+r;a++)i<<=1,e[a]&&(i|=1);return i},t.readByte=function(e,n){var r=e.length-n;return r>=8?t.readCode(e,n,8):t.readCode(e,n,r)<<8-r},t.convertBoolArrayToByteArray=function(e){for(var n=new Uint8Array((e.length+7)/8),r=0;r<n.length;r++)n[r]=t.readByte(e,8*r);return n},t.prototype.totalBitsInLayer=function(e,n){return((n?88:112)+16*e)*e},t.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],t.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],t.MIXED_TABLE=["CTRL_PS"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~","","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],t.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],t.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"],t}(),Gt=function(){function t(){}return t.round=function(e){return isNaN(e)?0:e<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:e>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:e+(e<0?-.5:.5)|0},t.distance=function(e,n,r,i){var a=e-r,s=n-i;return Math.sqrt(a*a+s*s)},t.sum=function(e){for(var n=0,r=0,i=e.length;r!==i;r++){var a=e[r];n+=a}return n},t}(),bw=function(){function t(){}return t.floatToIntBits=function(e){return e},t.MAX_VALUE=Number.MAX_SAFE_INTEGER,t}(),Ke=function(){function t(e,n){this.x=e,this.y=n}return t.prototype.getX=function(){return this.x},t.prototype.getY=function(){return this.y},t.prototype.equals=function(e){if(e instanceof t){var n=e;return this.x===n.x&&this.y===n.y}return!1},t.prototype.hashCode=function(){return 31*bw.floatToIntBits(this.x)+bw.floatToIntBits(this.y)},t.prototype.toString=function(){return"("+this.x+","+this.y+")"},t.orderBestPatterns=function(e){var n=this.distance(e[0],e[1]),r=this.distance(e[1],e[2]),i=this.distance(e[0],e[2]),a,s,o;if(r>=n&&r>=i?(s=e[0],a=e[1],o=e[2]):i>=r&&i>=n?(s=e[1],a=e[0],o=e[2]):(s=e[2],a=e[0],o=e[1]),this.crossProductZ(a,s,o)<0){var c=a;a=o,o=c}e[0]=a,e[1]=s,e[2]=o},t.distance=function(e,n){return Gt.distance(e.x,e.y,n.x,n.y)},t.crossProductZ=function(e,n,r){var i=n.x,a=n.y;return(r.x-i)*(e.y-a)-(r.y-a)*(e.x-i)},t}(),f_=function(){function t(e,n){this.bits=e,this.points=n}return t.prototype.getBits=function(){return this.bits},t.prototype.getPoints=function(){return this.points},t}(),rH=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),iH=function(t){rH(e,t);function e(n,r,i,a,s){var o=t.call(this,n,r)||this;return o.compact=i,o.nbDatablocks=a,o.nbLayers=s,o}return e.prototype.getNbLayers=function(){return this.nbLayers},e.prototype.getNbDatablocks=function(){return this.nbDatablocks},e.prototype.isCompact=function(){return this.compact},e}(f_),_w=function(){function t(e,n,r,i){this.image=e,this.height=e.getHeight(),this.width=e.getWidth(),n==null&&(n=t.INIT_SIZE),r==null&&(r=e.getWidth()/2|0),i==null&&(i=e.getHeight()/2|0);var a=n/2|0;if(this.leftInit=r-a,this.rightInit=r+a,this.upInit=i-a,this.downInit=i+a,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new _e}return t.prototype.detect=function(){for(var e=this.leftInit,n=this.rightInit,r=this.upInit,i=this.downInit,a=!1,s=!0,o=!1,c=!1,d=!1,f=!1,p=!1,g=this.width,m=this.height;s;){s=!1;for(var x=!0;(x||!c)&&n<g;)x=this.containsBlackPoint(r,i,n,!1),x?(n++,s=!0,c=!0):c||n++;if(n>=g){a=!0;break}for(var b=!0;(b||!d)&&i<m;)b=this.containsBlackPoint(e,n,i,!0),b?(i++,s=!0,d=!0):d||i++;if(i>=m){a=!0;break}for(var A=!0;(A||!f)&&e>=0;)A=this.containsBlackPoint(r,i,e,!1),A?(e--,s=!0,f=!0):f||e--;if(e<0){a=!0;break}for(var E=!0;(E||!p)&&r>=0;)E=this.containsBlackPoint(e,n,r,!0),E?(r--,s=!0,p=!0):p||r--;if(r<0){a=!0;break}s&&(o=!0)}if(!a&&o){for(var S=n-e,T=null,I=1;T===null&&I<S;I++)T=this.getBlackPointOnSegment(e,i-I,e+I,i);if(T==null)throw new _e;for(var P=null,I=1;P===null&&I<S;I++)P=this.getBlackPointOnSegment(e,r+I,e+I,r);if(P==null)throw new _e;for(var F=null,I=1;F===null&&I<S;I++)F=this.getBlackPointOnSegment(n,r+I,n-I,r);if(F==null)throw new _e;for(var M=null,I=1;M===null&&I<S;I++)M=this.getBlackPointOnSegment(n,i-I,n-I,i);if(M==null)throw new _e;return this.centerEdges(M,T,F,P)}else throw new _e},t.prototype.getBlackPointOnSegment=function(e,n,r,i){for(var a=Gt.round(Gt.distance(e,n,r,i)),s=(r-e)/a,o=(i-n)/a,c=this.image,d=0;d<a;d++){var f=Gt.round(e+d*s),p=Gt.round(n+d*o);if(c.get(f,p))return new Ke(f,p)}return null},t.prototype.centerEdges=function(e,n,r,i){var a=e.getX(),s=e.getY(),o=n.getX(),c=n.getY(),d=r.getX(),f=r.getY(),p=i.getX(),g=i.getY(),m=t.CORR;return a<this.width/2?[new Ke(p-m,g+m),new Ke(o+m,c+m),new Ke(d-m,f-m),new Ke(a+m,s-m)]:[new Ke(p+m,g+m),new Ke(o+m,c-m),new Ke(d-m,f+m),new Ke(a-m,s-m)]},t.prototype.containsBlackPoint=function(e,n,r,i){var a=this.image;if(i){for(var s=e;s<=n;s++)if(a.get(s,r))return!0}else for(var o=e;o<=n;o++)if(a.get(r,o))return!0;return!1},t.INIT_SIZE=10,t.CORR=1,t}(),MI=function(){function t(){}return t.checkAndNudgePoints=function(e,n){for(var r=e.getWidth(),i=e.getHeight(),a=!0,s=0;s<n.length&&a;s+=2){var o=Math.floor(n[s]),c=Math.floor(n[s+1]);if(o<-1||o>r||c<-1||c>i)throw new _e;a=!1,o===-1?(n[s]=0,a=!0):o===r&&(n[s]=r-1,a=!0),c===-1?(n[s+1]=0,a=!0):c===i&&(n[s+1]=i-1,a=!0)}a=!0;for(var s=n.length-2;s>=0&&a;s-=2){var o=Math.floor(n[s]),c=Math.floor(n[s+1]);if(o<-1||o>r||c<-1||c>i)throw new _e;a=!1,o===-1?(n[s]=0,a=!0):o===r&&(n[s]=r-1,a=!0),c===-1?(n[s+1]=0,a=!0):c===i&&(n[s+1]=i-1,a=!0)}},t}(),lM=function(){function t(e,n,r,i,a,s,o,c,d){this.a11=e,this.a21=n,this.a31=r,this.a12=i,this.a22=a,this.a32=s,this.a13=o,this.a23=c,this.a33=d}return t.quadrilateralToQuadrilateral=function(e,n,r,i,a,s,o,c,d,f,p,g,m,x,b,A){var E=t.quadrilateralToSquare(e,n,r,i,a,s,o,c),S=t.squareToQuadrilateral(d,f,p,g,m,x,b,A);return S.times(E)},t.prototype.transformPoints=function(e){for(var n=e.length,r=this.a11,i=this.a12,a=this.a13,s=this.a21,o=this.a22,c=this.a23,d=this.a31,f=this.a32,p=this.a33,g=0;g<n;g+=2){var m=e[g],x=e[g+1],b=a*m+c*x+p;e[g]=(r*m+s*x+d)/b,e[g+1]=(i*m+o*x+f)/b}},t.prototype.transformPointsWithValues=function(e,n){for(var r=this.a11,i=this.a12,a=this.a13,s=this.a21,o=this.a22,c=this.a23,d=this.a31,f=this.a32,p=this.a33,g=e.length,m=0;m<g;m++){var x=e[m],b=n[m],A=a*x+c*b+p;e[m]=(r*x+s*b+d)/A,n[m]=(i*x+o*b+f)/A}},t.squareToQuadrilateral=function(e,n,r,i,a,s,o,c){var d=e-r+a-o,f=n-i+s-c;if(d===0&&f===0)return new t(r-e,a-r,e,i-n,s-i,n,0,0,1);var p=r-a,g=o-a,m=i-s,x=c-s,b=p*x-g*m,A=(d*x-g*f)/b,E=(p*f-d*m)/b;return new t(r-e+A*r,o-e+E*o,e,i-n+A*i,c-n+E*c,n,A,E,1)},t.quadrilateralToSquare=function(e,n,r,i,a,s,o,c){return t.squareToQuadrilateral(e,n,r,i,a,s,o,c).buildAdjoint()},t.prototype.buildAdjoint=function(){return new t(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)},t.prototype.times=function(e){return new t(this.a11*e.a11+this.a21*e.a12+this.a31*e.a13,this.a11*e.a21+this.a21*e.a22+this.a31*e.a23,this.a11*e.a31+this.a21*e.a32+this.a31*e.a33,this.a12*e.a11+this.a22*e.a12+this.a32*e.a13,this.a12*e.a21+this.a22*e.a22+this.a32*e.a23,this.a12*e.a31+this.a22*e.a32+this.a32*e.a33,this.a13*e.a11+this.a23*e.a12+this.a33*e.a13,this.a13*e.a21+this.a23*e.a22+this.a33*e.a23,this.a13*e.a31+this.a23*e.a32+this.a33*e.a33)},t}(),aH=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),sH=function(t){aH(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.sampleGrid=function(n,r,i,a,s,o,c,d,f,p,g,m,x,b,A,E,S,T,I){var P=lM.quadrilateralToQuadrilateral(a,s,o,c,d,f,p,g,m,x,b,A,E,S,T,I);return this.sampleGridWithTransform(n,r,i,P)},e.prototype.sampleGridWithTransform=function(n,r,i,a){if(r<=0||i<=0)throw new _e;for(var s=new zs(r,i),o=new Float32Array(2*r),c=0;c<i;c++){for(var d=o.length,f=c+.5,p=0;p<d;p+=2)o[p]=p/2+.5,o[p+1]=f;a.transformPoints(o),MI.checkAndNudgePoints(n,o);try{for(var p=0;p<d;p+=2)n.get(Math.floor(o[p]),Math.floor(o[p+1]))&&s.set(p/2,c)}catch{throw new _e}}return s},e}(MI),h_=function(){function t(){}return t.setGridSampler=function(e){t.gridSampler=e},t.getInstance=function(){return t.gridSampler},t.gridSampler=new sH,t}(),Hi=function(){function t(e,n){this.x=e,this.y=n}return t.prototype.toResultPoint=function(){return new Ke(this.getX(),this.getY())},t.prototype.getX=function(){return this.x},t.prototype.getY=function(){return this.y},t}(),oH=function(){function t(e){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=e}return t.prototype.detect=function(){return this.detectMirror(!1)},t.prototype.detectMirror=function(e){var n=this.getMatrixCenter(),r=this.getBullsEyeCorners(n);if(e){var i=r[0];r[0]=r[2],r[2]=i}this.extractParameters(r);var a=this.sampleGrid(this.image,r[this.shift%4],r[(this.shift+1)%4],r[(this.shift+2)%4],r[(this.shift+3)%4]),s=this.getMatrixCornerPoints(r);return new iH(a,s,this.compact,this.nbDataBlocks,this.nbLayers)},t.prototype.extractParameters=function(e){if(!this.isValidPoint(e[0])||!this.isValidPoint(e[1])||!this.isValidPoint(e[2])||!this.isValidPoint(e[3]))throw new _e;var n=2*this.nbCenterLayers,r=new Int32Array([this.sampleLine(e[0],e[1],n),this.sampleLine(e[1],e[2],n),this.sampleLine(e[2],e[3],n),this.sampleLine(e[3],e[0],n)]);this.shift=this.getRotation(r,n);for(var i=0,a=0;a<4;a++){var s=r[(this.shift+a)%4];this.compact?(i<<=7,i+=s>>1&127):(i<<=10,i+=(s>>2&992)+(s>>1&31))}var o=this.getCorrectedParameterData(i,this.compact);this.compact?(this.nbLayers=(o>>6)+1,this.nbDataBlocks=(o&63)+1):(this.nbLayers=(o>>11)+1,this.nbDataBlocks=(o&2047)+1)},t.prototype.getRotation=function(e,n){var r=0;e.forEach(function(a,s,o){var c=(a>>n-2<<1)+(a&1);r=(r<<3)+c}),r=((r&1)<<11)+(r>>1);for(var i=0;i<4;i++)if(It.bitCount(r^this.EXPECTED_CORNER_BITS[i])<=2)return i;throw new _e},t.prototype.getCorrectedParameterData=function(e,n){var r,i;n?(r=7,i=2):(r=10,i=4);for(var a=r-i,s=new Int32Array(r),o=r-1;o>=0;--o)s[o]=e&15,e>>=4;try{var c=new py(Gi.AZTEC_PARAM);c.decode(s,a)}catch{throw new _e}for(var d=0,o=0;o<i;o++)d=(d<<4)+s[o];return d},t.prototype.getBullsEyeCorners=function(e){var n=e,r=e,i=e,a=e,s=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){var o=this.getFirstDifferent(n,s,1,-1),c=this.getFirstDifferent(r,s,1,1),d=this.getFirstDifferent(i,s,-1,1),f=this.getFirstDifferent(a,s,-1,-1);if(this.nbCenterLayers>2){var p=this.distancePoint(f,o)*this.nbCenterLayers/(this.distancePoint(a,n)*(this.nbCenterLayers+2));if(p<.75||p>1.25||!this.isWhiteOrBlackRectangle(o,c,d,f))break}n=o,r=c,i=d,a=f,s=!s}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new _e;this.compact=this.nbCenterLayers===5;var g=new Ke(n.getX()+.5,n.getY()-.5),m=new Ke(r.getX()+.5,r.getY()+.5),x=new Ke(i.getX()-.5,i.getY()+.5),b=new Ke(a.getX()-.5,a.getY()-.5);return this.expandSquare([g,m,x,b],2*this.nbCenterLayers-3,2*this.nbCenterLayers)},t.prototype.getMatrixCenter=function(){var e,n,r,i;try{var a=new _w(this.image).detect();e=a[0],n=a[1],r=a[2],i=a[3]}catch{var s=this.image.getWidth()/2,o=this.image.getHeight()/2;e=this.getFirstDifferent(new Hi(s+7,o-7),!1,1,-1).toResultPoint(),n=this.getFirstDifferent(new Hi(s+7,o+7),!1,1,1).toResultPoint(),r=this.getFirstDifferent(new Hi(s-7,o+7),!1,-1,1).toResultPoint(),i=this.getFirstDifferent(new Hi(s-7,o-7),!1,-1,-1).toResultPoint()}var c=Gt.round((e.getX()+i.getX()+n.getX()+r.getX())/4),d=Gt.round((e.getY()+i.getY()+n.getY()+r.getY())/4);try{var a=new _w(this.image,15,c,d).detect();e=a[0],n=a[1],r=a[2],i=a[3]}catch{e=this.getFirstDifferent(new Hi(c+7,d-7),!1,1,-1).toResultPoint(),n=this.getFirstDifferent(new Hi(c+7,d+7),!1,1,1).toResultPoint(),r=this.getFirstDifferent(new Hi(c-7,d+7),!1,-1,1).toResultPoint(),i=this.getFirstDifferent(new Hi(c-7,d-7),!1,-1,-1).toResultPoint()}return c=Gt.round((e.getX()+i.getX()+n.getX()+r.getX())/4),d=Gt.round((e.getY()+i.getY()+n.getY()+r.getY())/4),new Hi(c,d)},t.prototype.getMatrixCornerPoints=function(e){return this.expandSquare(e,2*this.nbCenterLayers,this.getDimension())},t.prototype.sampleGrid=function(e,n,r,i,a){var s=h_.getInstance(),o=this.getDimension(),c=o/2-this.nbCenterLayers,d=o/2+this.nbCenterLayers;return s.sampleGrid(e,o,o,c,c,d,c,d,d,c,d,n.getX(),n.getY(),r.getX(),r.getY(),i.getX(),i.getY(),a.getX(),a.getY())},t.prototype.sampleLine=function(e,n,r){for(var i=0,a=this.distanceResultPoint(e,n),s=a/r,o=e.getX(),c=e.getY(),d=s*(n.getX()-e.getX())/a,f=s*(n.getY()-e.getY())/a,p=0;p<r;p++)this.image.get(Gt.round(o+p*d),Gt.round(c+p*f))&&(i|=1<<r-p-1);return i},t.prototype.isWhiteOrBlackRectangle=function(e,n,r,i){var a=3;e=new Hi(e.getX()-a,e.getY()+a),n=new Hi(n.getX()-a,n.getY()-a),r=new Hi(r.getX()+a,r.getY()-a),i=new Hi(i.getX()+a,i.getY()+a);var s=this.getColor(i,e);if(s===0)return!1;var o=this.getColor(e,n);return o!==s||(o=this.getColor(n,r),o!==s)?!1:(o=this.getColor(r,i),o===s)},t.prototype.getColor=function(e,n){for(var r=this.distancePoint(e,n),i=(n.getX()-e.getX())/r,a=(n.getY()-e.getY())/r,s=0,o=e.getX(),c=e.getY(),d=this.image.get(e.getX(),e.getY()),f=Math.ceil(r),p=0;p<f;p++)o+=i,c+=a,this.image.get(Gt.round(o),Gt.round(c))!==d&&s++;var g=s/r;return g>.1&&g<.9?0:g<=.1===d?1:-1},t.prototype.getFirstDifferent=function(e,n,r,i){for(var a=e.getX()+r,s=e.getY()+i;this.isValid(a,s)&&this.image.get(a,s)===n;)a+=r,s+=i;for(a-=r,s-=i;this.isValid(a,s)&&this.image.get(a,s)===n;)a+=r;for(a-=r;this.isValid(a,s)&&this.image.get(a,s)===n;)s+=i;return s-=i,new Hi(a,s)},t.prototype.expandSquare=function(e,n,r){var i=r/(2*n),a=e[0].getX()-e[2].getX(),s=e[0].getY()-e[2].getY(),o=(e[0].getX()+e[2].getX())/2,c=(e[0].getY()+e[2].getY())/2,d=new Ke(o+i*a,c+i*s),f=new Ke(o-i*a,c-i*s);a=e[1].getX()-e[3].getX(),s=e[1].getY()-e[3].getY(),o=(e[1].getX()+e[3].getX())/2,c=(e[1].getY()+e[3].getY())/2;var p=new Ke(o+i*a,c+i*s),g=new Ke(o-i*a,c-i*s),m=[d,p,f,g];return m},t.prototype.isValid=function(e,n){return e>=0&&e<this.image.getWidth()&&n>0&&n<this.image.getHeight()},t.prototype.isValidPoint=function(e){var n=Gt.round(e.getX()),r=Gt.round(e.getY());return this.isValid(n,r)},t.prototype.distancePoint=function(e,n){return Gt.distance(e.getX(),e.getY(),n.getX(),n.getY())},t.prototype.distanceResultPoint=function(e,n){return Gt.distance(e.getX(),e.getY(),n.getX(),n.getY())},t.prototype.getDimension=function(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(It.truncDivision(this.nbLayers-4,8)+1)+15},t}(),Aw=function(){function t(){}return t.prototype.decode=function(e,n){n===void 0&&(n=null);var r=null,i=new oH(e.getBlackMatrix()),a=null,s=null;try{var o=i.detectMirror(!1);a=o.getPoints(),this.reportFoundResultPoints(n,a),s=new OI().decode(o)}catch(p){r=p}if(s==null)try{var o=i.detectMirror(!0);a=o.getPoints(),this.reportFoundResultPoints(n,a),s=new OI().decode(o)}catch(p){throw r??p}var c=new Ai(s.getText(),s.getRawBytes(),s.getNumBits(),a,et.AZTEC,Tn.currentTimeMillis()),d=s.getByteSegments();d!=null&&c.putMetadata(oi.BYTE_SEGMENTS,d);var f=s.getECLevel();return f!=null&&c.putMetadata(oi.ERROR_CORRECTION_LEVEL,f),c},t.prototype.reportFoundResultPoints=function(e,n){if(e!=null){var r=e.get(Bn.NEED_RESULT_POINT_CALLBACK);r!=null&&n.forEach(function(i,a,s){r.foundPossibleResultPoint(i)})}},t.prototype.reset=function(){},t}(),lH=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}();(function(t){lH(e,t);function e(n){return n===void 0&&(n=500),t.call(this,new Aw,n)||this}return e})(bf);var Or=function(){function t(){}return t.prototype.decode=function(e,n){try{return this.doDecode(e,n)}catch{var r=n&&n.get(Bn.TRY_HARDER)===!0;if(r&&e.isRotateSupported()){var i=e.rotateCounterClockwise(),a=this.doDecode(i,n),s=a.getResultMetadata(),o=270;s!==null&&s.get(oi.ORIENTATION)===!0&&(o=o+s.get(oi.ORIENTATION)%360),a.putMetadata(oi.ORIENTATION,o);var c=a.getResultPoints();if(c!==null)for(var d=i.getHeight(),f=0;f<c.length;f++)c[f]=new Ke(d-c[f].getY()-1,c[f].getX());return a}else throw new _e}},t.prototype.reset=function(){},t.prototype.doDecode=function(e,n){var r=e.getWidth(),i=e.getHeight(),a=new Wr(r),s=n&&n.get(Bn.TRY_HARDER)===!0,o=Math.max(1,i>>(s?8:5)),c;s?c=i:c=15;for(var d=Math.trunc(i/2),f=0;f<c;f++){var p=Math.trunc((f+1)/2),g=(f&1)===0,m=d+o*(g?p:-p);if(m<0||m>=i)break;try{a=e.getBlackRow(m,a)}catch{continue}for(var x=function(S){if(S===1&&(a.reverse(),n&&n.get(Bn.NEED_RESULT_POINT_CALLBACK)===!0)){var T=new Map;n.forEach(function(F,M){return T.set(M,F)}),T.delete(Bn.NEED_RESULT_POINT_CALLBACK),n=T}try{var I=b.decodeRow(m,a,n);if(S===1){I.putMetadata(oi.ORIENTATION,180);var P=I.getResultPoints();P!==null&&(P[0]=new Ke(r-P[0].getX()-1,P[0].getY()),P[1]=new Ke(r-P[1].getX()-1,P[1].getY()))}return{value:I}}catch{}},b=this,A=0;A<2;A++){var E=x(A);if(typeof E=="object")return E.value}}throw new _e},t.recordPattern=function(e,n,r){for(var i=r.length,a=0;a<i;a++)r[a]=0;var s=e.getSize();if(n>=s)throw new _e;for(var o=!e.get(n),c=0,d=n;d<s;){if(e.get(d)!==o)r[c]++;else{if(++c===i)break;r[c]=1,o=!o}d++}if(!(c===i||c===i-1&&d===s))throw new _e},t.recordPatternInReverse=function(e,n,r){for(var i=r.length,a=e.get(n);n>0&&i>=0;)e.get(--n)!==a&&(i--,a=!a);if(i>=0)throw new _e;t.recordPattern(e,n+1,r)},t.patternMatchVariance=function(e,n,r){for(var i=e.length,a=0,s=0,o=0;o<i;o++)a+=e[o],s+=n[o];if(a<s)return Number.POSITIVE_INFINITY;var c=a/s;r*=c;for(var d=0,f=0;f<i;f++){var p=e[f],g=n[f]*c,m=p>g?p-g:g-p;if(m>r)return Number.POSITIVE_INFINITY;d+=m}return d/a},t}(),cH=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),PI=function(t){cH(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.findStartPattern=function(n){for(var r=n.getSize(),i=n.getNextSet(0),a=0,s=Int32Array.from([0,0,0,0,0,0]),o=i,c=!1,d=6,f=i;f<r;f++)if(n.get(f)!==c)s[a]++;else{if(a===d-1){for(var p=e.MAX_AVG_VARIANCE,g=-1,m=e.CODE_START_A;m<=e.CODE_START_C;m++){var x=Or.patternMatchVariance(s,e.CODE_PATTERNS[m],e.MAX_INDIVIDUAL_VARIANCE);x<p&&(p=x,g=m)}if(g>=0&&n.isRange(Math.max(0,o-(f-o)/2),o,!1))return Int32Array.from([o,f,g]);o+=s[0]+s[1],s=s.slice(2,s.length),s[a-1]=0,s[a]=0,a--}else a++;s[a]=1,c=!c}throw new _e},e.decodeCode=function(n,r,i){Or.recordPattern(n,i,r);for(var a=e.MAX_AVG_VARIANCE,s=-1,o=0;o<e.CODE_PATTERNS.length;o++){var c=e.CODE_PATTERNS[o],d=this.patternMatchVariance(r,c,e.MAX_INDIVIDUAL_VARIANCE);d<a&&(a=d,s=o)}if(s>=0)return s;throw new _e},e.prototype.decodeRow=function(n,r,i){var a=i&&i.get(Bn.ASSUME_GS1)===!0,s=e.findStartPattern(r),o=s[2],c=0,d=new Uint8Array(20);d[c++]=o;var f;switch(o){case e.CODE_START_A:f=e.CODE_CODE_A;break;case e.CODE_START_B:f=e.CODE_CODE_B;break;case e.CODE_START_C:f=e.CODE_CODE_C;break;default:throw new Ve}for(var p=!1,g=!1,m="",x=s[0],b=s[1],A=Int32Array.from([0,0,0,0,0,0]),E=0,S=0,T=o,I=0,P=!0,F=!1,M=!1;!p;){var D=g;switch(g=!1,E=S,S=e.decodeCode(r,A,b),d[c++]=S,S!==e.CODE_STOP&&(P=!0),S!==e.CODE_STOP&&(I++,T+=I*S),x=b,b+=A.reduce(function(W,K){return W+K},0),S){case e.CODE_START_A:case e.CODE_START_B:case e.CODE_START_C:throw new Ve}switch(f){case e.CODE_CODE_A:if(S<64)M===F?m+=String.fromCharCode(32+S):m+=String.fromCharCode(32+S+128),M=!1;else if(S<96)M===F?m+=String.fromCharCode(S-64):m+=String.fromCharCode(S+64),M=!1;else switch(S!==e.CODE_STOP&&(P=!1),S){case e.CODE_FNC_1:a&&(m.length===0?m+="]C1":m+="");break;case e.CODE_FNC_2:case e.CODE_FNC_3:break;case e.CODE_FNC_4_A:!F&&M?(F=!0,M=!1):F&&M?(F=!1,M=!1):M=!0;break;case e.CODE_SHIFT:g=!0,f=e.CODE_CODE_B;break;case e.CODE_CODE_B:f=e.CODE_CODE_B;break;case e.CODE_CODE_C:f=e.CODE_CODE_C;break;case e.CODE_STOP:p=!0;break}break;case e.CODE_CODE_B:if(S<96)M===F?m+=String.fromCharCode(32+S):m+=String.fromCharCode(32+S+128),M=!1;else switch(S!==e.CODE_STOP&&(P=!1),S){case e.CODE_FNC_1:a&&(m.length===0?m+="]C1":m+="");break;case e.CODE_FNC_2:case e.CODE_FNC_3:break;case e.CODE_FNC_4_B:!F&&M?(F=!0,M=!1):F&&M?(F=!1,M=!1):M=!0;break;case e.CODE_SHIFT:g=!0,f=e.CODE_CODE_A;break;case e.CODE_CODE_A:f=e.CODE_CODE_A;break;case e.CODE_CODE_C:f=e.CODE_CODE_C;break;case e.CODE_STOP:p=!0;break}break;case e.CODE_CODE_C:if(S<100)S<10&&(m+="0"),m+=S;else switch(S!==e.CODE_STOP&&(P=!1),S){case e.CODE_FNC_1:a&&(m.length===0?m+="]C1":m+="");break;case e.CODE_CODE_A:f=e.CODE_CODE_A;break;case e.CODE_CODE_B:f=e.CODE_CODE_B;break;case e.CODE_STOP:p=!0;break}break}D&&(f=f===e.CODE_CODE_A?e.CODE_CODE_B:e.CODE_CODE_A)}var R=b-x;if(b=r.getNextUnset(b),!r.isRange(b,Math.min(r.getSize(),b+(b-x)/2),!1))throw new _e;if(T-=I*E,T%103!==E)throw new $r;var B=m.length;if(B===0)throw new _e;B>0&&P&&(f===e.CODE_CODE_C?m=m.substring(0,B-2):m=m.substring(0,B-1));for(var N=(s[1]+s[0])/2,k=x+R/2,j=d.length,q=new Uint8Array(j),X=0;X<j;X++)q[X]=d[X];var G=[new Ke(N,n),new Ke(k,n)];return new Ai(m,q,0,G,et.CODE_128,new Date().getTime())},e.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],e.MAX_AVG_VARIANCE=.25,e.MAX_INDIVIDUAL_VARIANCE=.7,e.CODE_SHIFT=98,e.CODE_CODE_C=99,e.CODE_CODE_B=100,e.CODE_CODE_A=101,e.CODE_FNC_1=102,e.CODE_FNC_2=97,e.CODE_FNC_3=96,e.CODE_FNC_4_A=101,e.CODE_FNC_4_B=100,e.CODE_START_A=103,e.CODE_START_B=104,e.CODE_START_C=105,e.CODE_STOP=106,e}(Or),uH=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),r2=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},kI=function(t){uH(e,t);function e(n,r){n===void 0&&(n=!1),r===void 0&&(r=!1);var i=t.call(this)||this;return i.usingCheckDigit=n,i.extendedMode=r,i.decodeRowResult="",i.counters=new Int32Array(9),i}return e.prototype.decodeRow=function(n,r,i){var a,s,o,c,d=this.counters;d.fill(0),this.decodeRowResult="";var f=e.findAsteriskPattern(r,d),p=r.getNextSet(f[1]),g=r.getSize(),m,x;do{e.recordPattern(r,p,d);var b=e.toNarrowWidePattern(d);if(b<0)throw new _e;m=e.patternToChar(b),this.decodeRowResult+=m,x=p;try{for(var A=(a=void 0,r2(d)),E=A.next();!E.done;E=A.next()){var S=E.value;p+=S}}catch(j){a={error:j}}finally{try{E&&!E.done&&(s=A.return)&&s.call(A)}finally{if(a)throw a.error}}p=r.getNextSet(p)}while(m!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var T=0;try{for(var I=r2(d),P=I.next();!P.done;P=I.next()){var S=P.value;T+=S}}catch(j){o={error:j}}finally{try{P&&!P.done&&(c=I.return)&&c.call(I)}finally{if(o)throw o.error}}var F=p-x-T;if(p!==g&&F*2<T)throw new _e;if(this.usingCheckDigit){for(var M=this.decodeRowResult.length-1,D=0,R=0;R<M;R++)D+=e.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(R));if(this.decodeRowResult.charAt(M)!==e.ALPHABET_STRING.charAt(D%43))throw new $r;this.decodeRowResult=this.decodeRowResult.substring(0,M)}if(this.decodeRowResult.length===0)throw new _e;var B;this.extendedMode?B=e.decodeExtended(this.decodeRowResult):B=this.decodeRowResult;var N=(f[1]+f[0])/2,k=x+T/2;return new Ai(B,null,0,[new Ke(N,n),new Ke(k,n)],et.CODE_39,new Date().getTime())},e.findAsteriskPattern=function(n,r){for(var i=n.getSize(),a=n.getNextSet(0),s=0,o=a,c=!1,d=r.length,f=a;f<i;f++)if(n.get(f)!==c)r[s]++;else{if(s===d-1){if(this.toNarrowWidePattern(r)===e.ASTERISK_ENCODING&&n.isRange(Math.max(0,o-Math.floor((f-o)/2)),o,!1))return[o,f];o+=r[0]+r[1],r.copyWithin(0,2,2+s-1),r[s-1]=0,r[s]=0,s--}else s++;r[s]=1,c=!c}throw new _e},e.toNarrowWidePattern=function(n){var r,i,a=n.length,s=0,o;do{var c=2147483647;try{for(var d=(r=void 0,r2(n)),f=d.next();!f.done;f=d.next()){var p=f.value;p<c&&p>s&&(c=p)}}catch(b){r={error:b}}finally{try{f&&!f.done&&(i=d.return)&&i.call(d)}finally{if(r)throw r.error}}s=c,o=0;for(var g=0,m=0,x=0;x<a;x++){var p=n[x];p>s&&(m|=1<<a-1-x,o++,g+=p)}if(o===3){for(var x=0;x<a&&o>0;x++){var p=n[x];if(p>s&&(o--,p*2>=g))return-1}return m}}while(o>3);return-1},e.patternToChar=function(n){for(var r=0;r<e.CHARACTER_ENCODINGS.length;r++)if(e.CHARACTER_ENCODINGS[r]===n)return e.ALPHABET_STRING.charAt(r);if(n===e.ASTERISK_ENCODING)return"*";throw new _e},e.decodeExtended=function(n){for(var r=n.length,i="",a=0;a<r;a++){var s=n.charAt(a);if(s==="+"||s==="$"||s==="%"||s==="/"){var o=n.charAt(a+1),c="\0";switch(s){case"+":if(o>="A"&&o<="Z")c=String.fromCharCode(o.charCodeAt(0)+32);else throw new Ve;break;case"$":if(o>="A"&&o<="Z")c=String.fromCharCode(o.charCodeAt(0)-64);else throw new Ve;break;case"%":if(o>="A"&&o<="E")c=String.fromCharCode(o.charCodeAt(0)-38);else if(o>="F"&&o<="J")c=String.fromCharCode(o.charCodeAt(0)-11);else if(o>="K"&&o<="O")c=String.fromCharCode(o.charCodeAt(0)+16);else if(o>="P"&&o<="T")c=String.fromCharCode(o.charCodeAt(0)+43);else if(o==="U")c="\0";else if(o==="V")c="@";else if(o==="W")c="`";else if(o==="X"||o==="Y"||o==="Z")c="";else throw new Ve;break;case"/":if(o>="A"&&o<="O")c=String.fromCharCode(o.charCodeAt(0)-32);else if(o==="Z")c=":";else throw new Ve;break}i+=c,a++}else i+=s}return i},e.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",e.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],e.ASTERISK_ENCODING=148,e}(Or),dH=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),i2=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},NI=function(t){dH(e,t);function e(){var n=t.call(this)||this;return n.decodeRowResult="",n.counters=new Int32Array(6),n}return e.prototype.decodeRow=function(n,r,i){var a,s,o,c,d=this.findAsteriskPattern(r),f=r.getNextSet(d[1]),p=r.getSize(),g=this.counters;g.fill(0),this.decodeRowResult="";var m,x;do{e.recordPattern(r,f,g);var b=this.toPattern(g);if(b<0)throw new _e;m=this.patternToChar(b),this.decodeRowResult+=m,x=f;try{for(var A=(a=void 0,i2(g)),E=A.next();!E.done;E=A.next()){var S=E.value;f+=S}}catch(R){a={error:R}}finally{try{E&&!E.done&&(s=A.return)&&s.call(A)}finally{if(a)throw a.error}}f=r.getNextSet(f)}while(m!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var T=0;try{for(var I=i2(g),P=I.next();!P.done;P=I.next()){var S=P.value;T+=S}}catch(R){o={error:R}}finally{try{P&&!P.done&&(c=I.return)&&c.call(I)}finally{if(o)throw o.error}}if(f===p||!r.get(f))throw new _e;if(this.decodeRowResult.length<2)throw new _e;this.checkChecksums(this.decodeRowResult),this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-2);var F=this.decodeExtended(this.decodeRowResult),M=(d[1]+d[0])/2,D=x+T/2;return new Ai(F,null,0,[new Ke(M,n),new Ke(D,n)],et.CODE_93,new Date().getTime())},e.prototype.findAsteriskPattern=function(n){var r=n.getSize(),i=n.getNextSet(0);this.counters.fill(0);for(var a=this.counters,s=i,o=!1,c=a.length,d=0,f=i;f<r;f++)if(n.get(f)!==o)a[d]++;else{if(d===c-1){if(this.toPattern(a)===e.ASTERISK_ENCODING)return new Int32Array([s,f]);s+=a[0]+a[1],a.copyWithin(0,2,2+d-1),a[d-1]=0,a[d]=0,d--}else d++;a[d]=1,o=!o}throw new _e},e.prototype.toPattern=function(n){var r,i,a=0;try{for(var s=i2(n),o=s.next();!o.done;o=s.next()){var c=o.value;a+=c}}catch(x){r={error:x}}finally{try{o&&!o.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}for(var d=0,f=n.length,p=0;p<f;p++){var g=Math.round(n[p]*9/a);if(g<1||g>4)return-1;if((p&1)===0)for(var m=0;m<g;m++)d=d<<1|1;else d<<=g}return d},e.prototype.patternToChar=function(n){for(var r=0;r<e.CHARACTER_ENCODINGS.length;r++)if(e.CHARACTER_ENCODINGS[r]===n)return e.ALPHABET_STRING.charAt(r);throw new _e},e.prototype.decodeExtended=function(n){for(var r=n.length,i="",a=0;a<r;a++){var s=n.charAt(a);if(s>="a"&&s<="d"){if(a>=r-1)throw new Ve;var o=n.charAt(a+1),c="\0";switch(s){case"d":if(o>="A"&&o<="Z")c=String.fromCharCode(o.charCodeAt(0)+32);else throw new Ve;break;case"a":if(o>="A"&&o<="Z")c=String.fromCharCode(o.charCodeAt(0)-64);else throw new Ve;break;case"b":if(o>="A"&&o<="E")c=String.fromCharCode(o.charCodeAt(0)-38);else if(o>="F"&&o<="J")c=String.fromCharCode(o.charCodeAt(0)-11);else if(o>="K"&&o<="O")c=String.fromCharCode(o.charCodeAt(0)+16);else if(o>="P"&&o<="T")c=String.fromCharCode(o.charCodeAt(0)+43);else if(o==="U")c="\0";else if(o==="V")c="@";else if(o==="W")c="`";else if(o>="X"&&o<="Z")c="";else throw new Ve;break;case"c":if(o>="A"&&o<="O")c=String.fromCharCode(o.charCodeAt(0)-32);else if(o==="Z")c=":";else throw new Ve;break}i+=c,a++}else i+=s}return i},e.prototype.checkChecksums=function(n){var r=n.length;this.checkOneChecksum(n,r-2,20),this.checkOneChecksum(n,r-1,15)},e.prototype.checkOneChecksum=function(n,r,i){for(var a=1,s=0,o=r-1;o>=0;o--)s+=a*e.ALPHABET_STRING.indexOf(n.charAt(o)),++a>i&&(a=1);if(n.charAt(r)!==e.ALPHABET_STRING[s%47])throw new $r},e.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%abcd*",e.CHARACTER_ENCODINGS=[276,328,324,322,296,292,290,336,274,266,424,420,418,404,402,394,360,356,354,308,282,344,332,326,300,278,436,434,428,422,406,410,364,358,310,314,302,468,466,458,366,374,430,294,474,470,306,350],e.ASTERISK_ENCODING=e.CHARACTER_ENCODINGS[47],e}(Or),fH=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),hH=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},LI=function(t){fH(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.narrowLineWidth=-1,n}return e.prototype.decodeRow=function(n,r,i){var a,s,o=this.decodeStart(r),c=this.decodeEnd(r),d=new Et;e.decodeMiddle(r,o[1],c[0],d);var f=d.toString(),p=null;i!=null&&(p=i.get(Bn.ALLOWED_LENGTHS)),p==null&&(p=e.DEFAULT_ALLOWED_LENGTHS);var g=f.length,m=!1,x=0;try{for(var b=hH(p),A=b.next();!A.done;A=b.next()){var E=A.value;if(g===E){m=!0;break}E>x&&(x=E)}}catch(I){a={error:I}}finally{try{A&&!A.done&&(s=b.return)&&s.call(b)}finally{if(a)throw a.error}}if(!m&&g>x&&(m=!0),!m)throw new Ve;var S=[new Ke(o[1],n),new Ke(c[0],n)],T=new Ai(f,null,0,S,et.ITF,new Date().getTime());return T},e.decodeMiddle=function(n,r,i,a){var s=new Int32Array(10),o=new Int32Array(5),c=new Int32Array(5);for(s.fill(0),o.fill(0),c.fill(0);r<i;){Or.recordPattern(n,r,s);for(var d=0;d<5;d++){var f=2*d;o[d]=s[f],c[d]=s[f+1]}var p=e.decodeDigit(o);a.append(p.toString()),p=this.decodeDigit(c),a.append(p.toString()),s.forEach(function(g){r+=g})}},e.prototype.decodeStart=function(n){var r=e.skipWhiteSpace(n),i=e.findGuardPattern(n,r,e.START_PATTERN);return this.narrowLineWidth=(i[1]-i[0])/4,this.validateQuietZone(n,i[0]),i},e.prototype.validateQuietZone=function(n,r){var i=this.narrowLineWidth*10;i=i<r?i:r;for(var a=r-1;i>0&&a>=0&&!n.get(a);a--)i--;if(i!==0)throw new _e},e.skipWhiteSpace=function(n){var r=n.getSize(),i=n.getNextSet(0);if(i===r)throw new _e;return i},e.prototype.decodeEnd=function(n){n.reverse();try{var r=e.skipWhiteSpace(n),i=void 0;try{i=e.findGuardPattern(n,r,e.END_PATTERN_REVERSED[0])}catch(s){s instanceof _e&&(i=e.findGuardPattern(n,r,e.END_PATTERN_REVERSED[1]))}this.validateQuietZone(n,i[0]);var a=i[0];return i[0]=n.getSize()-i[1],i[1]=n.getSize()-a,i}finally{n.reverse()}},e.findGuardPattern=function(n,r,i){var a=i.length,s=new Int32Array(a),o=n.getSize(),c=!1,d=0,f=r;s.fill(0);for(var p=r;p<o;p++)if(n.get(p)!==c)s[d]++;else{if(d===a-1){if(Or.patternMatchVariance(s,i,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return[f,p];f+=s[0]+s[1],Tn.arraycopy(s,2,s,0,d-1),s[d-1]=0,s[d]=0,d--}else d++;s[d]=1,c=!c}throw new _e},e.decodeDigit=function(n){for(var r=e.MAX_AVG_VARIANCE,i=-1,a=e.PATTERNS.length,s=0;s<a;s++){var o=e.PATTERNS[s],c=Or.patternMatchVariance(n,o,e.MAX_INDIVIDUAL_VARIANCE);c<r?(r=c,i=s):c===r&&(i=-1)}if(i>=0)return i%10;throw new _e},e.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],e.MAX_AVG_VARIANCE=.38,e.MAX_INDIVIDUAL_VARIANCE=.5,e.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],e.START_PATTERN=Int32Array.from([1,1,1,1]),e.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])],e}(Or),pH=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Qd=function(t){pH(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.decodeRowStringBuffer="",n}return e.findStartGuardPattern=function(n){for(var r=!1,i,a=0,s=Int32Array.from([0,0,0]);!r;){s=Int32Array.from([0,0,0]),i=e.findGuardPattern(n,a,!1,this.START_END_PATTERN,s);var o=i[0];a=i[1];var c=o-(a-o);c>=0&&(r=n.isRange(c,o,!1))}return i},e.checkChecksum=function(n){return e.checkStandardUPCEANChecksum(n)},e.checkStandardUPCEANChecksum=function(n){var r=n.length;if(r===0)return!1;var i=parseInt(n.charAt(r-1),10);return e.getStandardUPCEANChecksum(n.substring(0,r-1))===i},e.getStandardUPCEANChecksum=function(n){for(var r=n.length,i=0,a=r-1;a>=0;a-=2){var s=n.charAt(a).charCodeAt(0)-48;if(s<0||s>9)throw new Ve;i+=s}i*=3;for(var a=r-2;a>=0;a-=2){var s=n.charAt(a).charCodeAt(0)-48;if(s<0||s>9)throw new Ve;i+=s}return(1e3-i)%10},e.decodeEnd=function(n,r){return e.findGuardPattern(n,r,!1,e.START_END_PATTERN,new Int32Array(e.START_END_PATTERN.length).fill(0))},e.findGuardPatternWithoutCounters=function(n,r,i,a){return this.findGuardPattern(n,r,i,a,new Int32Array(a.length))},e.findGuardPattern=function(n,r,i,a,s){var o=n.getSize();r=i?n.getNextUnset(r):n.getNextSet(r);for(var c=0,d=r,f=a.length,p=i,g=r;g<o;g++)if(n.get(g)!==p)s[c]++;else{if(c===f-1){if(Or.patternMatchVariance(s,a,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return Int32Array.from([d,g]);d+=s[0]+s[1];for(var m=s.slice(2,s.length),x=0;x<c-1;x++)s[x]=m[x];s[c-1]=0,s[c]=0,c--}else c++;s[c]=1,p=!p}throw new _e},e.decodeDigit=function(n,r,i,a){this.recordPattern(n,i,r);for(var s=this.MAX_AVG_VARIANCE,o=-1,c=a.length,d=0;d<c;d++){var f=a[d],p=Or.patternMatchVariance(r,f,e.MAX_INDIVIDUAL_VARIANCE);p<s&&(s=p,o=d)}if(o>=0)return o;throw new _e},e.MAX_AVG_VARIANCE=.48,e.MAX_INDIVIDUAL_VARIANCE=.7,e.START_END_PATTERN=Int32Array.from([1,1,1]),e.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),e.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),e.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])],e}(Or),gH=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},mH=function(){function t(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return t.prototype.decodeRow=function(e,n,r){var i=this.decodeRowStringBuffer,a=this.decodeMiddle(n,r,i),s=i.toString(),o=t.parseExtensionString(s),c=[new Ke((r[0]+r[1])/2,e),new Ke(a,e)],d=new Ai(s,null,0,c,et.UPC_EAN_EXTENSION,new Date().getTime());return o!=null&&d.putAllMetadata(o),d},t.prototype.decodeMiddle=function(e,n,r){var i,a,s=this.decodeMiddleCounters;s[0]=0,s[1]=0,s[2]=0,s[3]=0;for(var o=e.getSize(),c=n[1],d=0,f=0;f<5&&c<o;f++){var p=Qd.decodeDigit(e,s,c,Qd.L_AND_G_PATTERNS);r+=String.fromCharCode(48+p%10);try{for(var g=(i=void 0,gH(s)),m=g.next();!m.done;m=g.next()){var x=m.value;c+=x}}catch(A){i={error:A}}finally{try{m&&!m.done&&(a=g.return)&&a.call(g)}finally{if(i)throw i.error}}p>=10&&(d|=1<<4-f),f!==4&&(c=e.getNextSet(c),c=e.getNextUnset(c))}if(r.length!==5)throw new _e;var b=this.determineCheckDigit(d);if(t.extensionChecksum(r.toString())!==b)throw new _e;return c},t.extensionChecksum=function(e){for(var n=e.length,r=0,i=n-2;i>=0;i-=2)r+=e.charAt(i).charCodeAt(0)-48;r*=3;for(var i=n-1;i>=0;i-=2)r+=e.charAt(i).charCodeAt(0)-48;return r*=3,r%10},t.prototype.determineCheckDigit=function(e){for(var n=0;n<10;n++)if(e===this.CHECK_DIGIT_ENCODINGS[n])return n;throw new _e},t.parseExtensionString=function(e){if(e.length!==5)return null;var n=t.parseExtension5String(e);return n==null?null:new Map([[oi.SUGGESTED_PRICE,n]])},t.parseExtension5String=function(e){var n;switch(e.charAt(0)){case"0":n="";break;case"5":n="$";break;case"9":switch(e){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}n="";break;default:n="";break}var r=parseInt(e.substring(1)),i=(r/100).toString(),a=r%100,s=a<10?"0"+a:a.toString();return n+i+"."+s},t}(),yH=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},vH=function(){function t(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return t.prototype.decodeRow=function(e,n,r){var i=this.decodeRowStringBuffer,a=this.decodeMiddle(n,r,i),s=i.toString(),o=t.parseExtensionString(s),c=[new Ke((r[0]+r[1])/2,e),new Ke(a,e)],d=new Ai(s,null,0,c,et.UPC_EAN_EXTENSION,new Date().getTime());return o!=null&&d.putAllMetadata(o),d},t.prototype.decodeMiddle=function(e,n,r){var i,a,s=this.decodeMiddleCounters;s[0]=0,s[1]=0,s[2]=0,s[3]=0;for(var o=e.getSize(),c=n[1],d=0,f=0;f<2&&c<o;f++){var p=Qd.decodeDigit(e,s,c,Qd.L_AND_G_PATTERNS);r+=String.fromCharCode(48+p%10);try{for(var g=(i=void 0,yH(s)),m=g.next();!m.done;m=g.next()){var x=m.value;c+=x}}catch(b){i={error:b}}finally{try{m&&!m.done&&(a=g.return)&&a.call(g)}finally{if(i)throw i.error}}p>=10&&(d|=1<<1-f),f!==1&&(c=e.getNextSet(c),c=e.getNextUnset(c))}if(r.length!==2)throw new _e;if(parseInt(r.toString())%4!==d)throw new _e;return c},t.parseExtensionString=function(e){return e.length!==2?null:new Map([[oi.ISSUE_NUMBER,parseInt(e)]])},t}(),xH=function(){function t(){}return t.decodeRow=function(e,n,r){var i=Qd.findGuardPattern(n,r,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{var a=new mH;return a.decodeRow(e,n,i)}catch{var s=new vH;return s.decodeRow(e,n,i)}},t.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]),t}(),wH=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Tr=function(t){wH(e,t);function e(){var n=t.call(this)||this;n.decodeRowStringBuffer="",e.L_AND_G_PATTERNS=e.L_PATTERNS.map(function(o){return Int32Array.from(o)});for(var r=10;r<20;r++){for(var i=e.L_PATTERNS[r-10],a=new Int32Array(i.length),s=0;s<i.length;s++)a[s]=i[i.length-s-1];e.L_AND_G_PATTERNS[r]=a}return n}return e.prototype.decodeRow=function(n,r,i){var a=e.findStartGuardPattern(r),s=i==null?null:i.get(Bn.NEED_RESULT_POINT_CALLBACK);if(s!=null){var o=new Ke((a[0]+a[1])/2,n);s.foundPossibleResultPoint(o)}var c=this.decodeMiddle(r,a,this.decodeRowStringBuffer),d=c.rowOffset,f=c.resultString;if(s!=null){var p=new Ke(d,n);s.foundPossibleResultPoint(p)}var g=e.decodeEnd(r,d);if(s!=null){var m=new Ke((g[0]+g[1])/2,n);s.foundPossibleResultPoint(m)}var x=g[1],b=x+(x-g[0]);if(b>=r.getSize()||!r.isRange(x,b,!1))throw new _e;var A=f.toString();if(A.length<8)throw new Ve;if(!e.checkChecksum(A))throw new $r;var E=(a[1]+a[0])/2,S=(g[1]+g[0])/2,T=this.getBarcodeFormat(),I=[new Ke(E,n),new Ke(S,n)],P=new Ai(A,null,0,I,T,new Date().getTime()),F=0;try{var M=xH.decodeRow(n,r,g[1]);P.putMetadata(oi.UPC_EAN_EXTENSION,M.getText()),P.putAllMetadata(M.getResultMetadata()),P.addResultPoints(M.getResultPoints()),F=M.getText().length}catch{}var D=i==null?null:i.get(Bn.ALLOWED_EAN_EXTENSIONS);if(D!=null){var R=!1;for(var B in D)if(F.toString()===B){R=!0;break}if(!R)throw new _e}return T===et.EAN_13||et.UPC_A,P},e.checkChecksum=function(n){return e.checkStandardUPCEANChecksum(n)},e.checkStandardUPCEANChecksum=function(n){var r=n.length;if(r===0)return!1;var i=parseInt(n.charAt(r-1),10);return e.getStandardUPCEANChecksum(n.substring(0,r-1))===i},e.getStandardUPCEANChecksum=function(n){for(var r=n.length,i=0,a=r-1;a>=0;a-=2){var s=n.charAt(a).charCodeAt(0)-48;if(s<0||s>9)throw new Ve;i+=s}i*=3;for(var a=r-2;a>=0;a-=2){var s=n.charAt(a).charCodeAt(0)-48;if(s<0||s>9)throw new Ve;i+=s}return(1e3-i)%10},e.decodeEnd=function(n,r){return e.findGuardPattern(n,r,!1,e.START_END_PATTERN,new Int32Array(e.START_END_PATTERN.length).fill(0))},e}(Qd),bH=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),BI=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Ew=function(t){bH(e,t);function e(){var n=t.call(this)||this;return n.decodeMiddleCounters=Int32Array.from([0,0,0,0]),n}return e.prototype.decodeMiddle=function(n,r,i){var a,s,o,c,d=this.decodeMiddleCounters;d[0]=0,d[1]=0,d[2]=0,d[3]=0;for(var f=n.getSize(),p=r[1],g=0,m=0;m<6&&p<f;m++){var x=Tr.decodeDigit(n,d,p,Tr.L_AND_G_PATTERNS);i+=String.fromCharCode(48+x%10);try{for(var b=(a=void 0,BI(d)),A=b.next();!A.done;A=b.next()){var E=A.value;p+=E}}catch(P){a={error:P}}finally{try{A&&!A.done&&(s=b.return)&&s.call(b)}finally{if(a)throw a.error}}x>=10&&(g|=1<<5-m)}i=e.determineFirstDigit(i,g);var S=Tr.findGuardPattern(n,p,!0,Tr.MIDDLE_PATTERN,new Int32Array(Tr.MIDDLE_PATTERN.length).fill(0));p=S[1];for(var m=0;m<6&&p<f;m++){var x=Tr.decodeDigit(n,d,p,Tr.L_PATTERNS);i+=String.fromCharCode(48+x);try{for(var T=(o=void 0,BI(d)),I=T.next();!I.done;I=T.next()){var E=I.value;p+=E}}catch(M){o={error:M}}finally{try{I&&!I.done&&(c=T.return)&&c.call(T)}finally{if(o)throw o.error}}}return{rowOffset:p,resultString:i}},e.prototype.getBarcodeFormat=function(){return et.EAN_13},e.determineFirstDigit=function(n,r){for(var i=0;i<10;i++)if(r===this.FIRST_DIGIT_ENCODINGS[i])return n=String.fromCharCode(48+i)+n,n;throw new _e},e.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26],e}(Tr),_H=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),FI=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},jI=function(t){_H(e,t);function e(){var n=t.call(this)||this;return n.decodeMiddleCounters=Int32Array.from([0,0,0,0]),n}return e.prototype.decodeMiddle=function(n,r,i){var a,s,o,c,d=this.decodeMiddleCounters;d[0]=0,d[1]=0,d[2]=0,d[3]=0;for(var f=n.getSize(),p=r[1],g=0;g<4&&p<f;g++){var m=Tr.decodeDigit(n,d,p,Tr.L_PATTERNS);i+=String.fromCharCode(48+m);try{for(var x=(a=void 0,FI(d)),b=x.next();!b.done;b=x.next()){var A=b.value;p+=A}}catch(I){a={error:I}}finally{try{b&&!b.done&&(s=x.return)&&s.call(x)}finally{if(a)throw a.error}}}var E=Tr.findGuardPattern(n,p,!0,Tr.MIDDLE_PATTERN,new Int32Array(Tr.MIDDLE_PATTERN.length).fill(0));p=E[1];for(var g=0;g<4&&p<f;g++){var m=Tr.decodeDigit(n,d,p,Tr.L_PATTERNS);i+=String.fromCharCode(48+m);try{for(var S=(o=void 0,FI(d)),T=S.next();!T.done;T=S.next()){var A=T.value;p+=A}}catch(F){o={error:F}}finally{try{T&&!T.done&&(c=S.return)&&c.call(S)}finally{if(o)throw o.error}}}return{rowOffset:p,resultString:i}},e.prototype.getBarcodeFormat=function(){return et.EAN_8},e}(Tr),AH=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),VI=function(t){AH(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.ean13Reader=new Ew,n}return e.prototype.getBarcodeFormat=function(){return et.UPC_A},e.prototype.decode=function(n,r){return this.maybeReturnResult(this.ean13Reader.decode(n))},e.prototype.decodeRow=function(n,r,i){return this.maybeReturnResult(this.ean13Reader.decodeRow(n,r,i))},e.prototype.decodeMiddle=function(n,r,i){return this.ean13Reader.decodeMiddle(n,r,i)},e.prototype.maybeReturnResult=function(n){var r=n.getText();if(r.charAt(0)==="0"){var i=new Ai(r.substring(1),null,null,n.getResultPoints(),et.UPC_A);return n.getResultMetadata()!=null&&i.putAllMetadata(n.getResultMetadata()),i}else throw new _e},e.prototype.reset=function(){this.ean13Reader.reset()},e}(Tr),EH=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),SH=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},UI=function(t){EH(e,t);function e(){var n=t.call(this)||this;return n.decodeMiddleCounters=new Int32Array(4),n}return e.prototype.decodeMiddle=function(n,r,i){var a,s,o=this.decodeMiddleCounters.map(function(A){return A});o[0]=0,o[1]=0,o[2]=0,o[3]=0;for(var c=n.getSize(),d=r[1],f=0,p=0;p<6&&d<c;p++){var g=e.decodeDigit(n,o,d,e.L_AND_G_PATTERNS);i+=String.fromCharCode(48+g%10);try{for(var m=(a=void 0,SH(o)),x=m.next();!x.done;x=m.next()){var b=x.value;d+=b}}catch(A){a={error:A}}finally{try{x&&!x.done&&(s=m.return)&&s.call(m)}finally{if(a)throw a.error}}g>=10&&(f|=1<<5-p)}return e.determineNumSysAndCheckDigit(new Et(i),f),d},e.prototype.decodeEnd=function(n,r){return e.findGuardPatternWithoutCounters(n,r,!0,e.MIDDLE_END_PATTERN)},e.prototype.checkChecksum=function(n){return Tr.checkChecksum(e.convertUPCEtoUPCA(n))},e.determineNumSysAndCheckDigit=function(n,r){for(var i=0;i<=1;i++)for(var a=0;a<10;a++)if(r===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[i][a]){n.insert(0,"0"+i),n.append("0"+a);return}throw _e.getNotFoundInstance()},e.prototype.getBarcodeFormat=function(){return et.UPC_E},e.convertUPCEtoUPCA=function(n){var r=n.slice(1,7).split("").map(function(s){return s.charCodeAt(0)}),i=new Et;i.append(n.charAt(0));var a=r[5];switch(a){case 0:case 1:case 2:i.appendChars(r,0,2),i.append(a),i.append("0000"),i.appendChars(r,2,3);break;case 3:i.appendChars(r,0,3),i.append("00000"),i.appendChars(r,3,2);break;case 4:i.appendChars(r,0,4),i.append("00000"),i.append(r[4]);break;default:i.appendChars(r,0,5),i.append("0000"),i.append(a);break}return n.length>=8&&i.append(n.charAt(7)),i.toString()},e.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),e.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,1])],e}(Tr),CH=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),HI=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},a2=function(t){CH(e,t);function e(n){var r=t.call(this)||this,i=n==null?null:n.get(Bn.POSSIBLE_FORMATS),a=[];return i!=null&&(i.indexOf(et.EAN_13)>-1&&a.push(new Ew),i.indexOf(et.UPC_A)>-1&&a.push(new VI),i.indexOf(et.EAN_8)>-1&&a.push(new jI),i.indexOf(et.UPC_E)>-1&&a.push(new UI)),a.length===0&&(a.push(new Ew),a.push(new VI),a.push(new jI),a.push(new UI)),r.readers=a,r}return e.prototype.decodeRow=function(n,r,i){var a,s;try{for(var o=HI(this.readers),c=o.next();!c.done;c=o.next()){var d=c.value;try{var f=d.decodeRow(n,r,i),p=f.getBarcodeFormat()===et.EAN_13&&f.getText().charAt(0)==="0",g=i==null?null:i.get(Bn.POSSIBLE_FORMATS),m=g==null||g.includes(et.UPC_A);if(p&&m){var x=f.getRawBytes(),b=new Ai(f.getText().substring(1),x,x?x.length:null,f.getResultPoints(),et.UPC_A);return b.putAllMetadata(f.getResultMetadata()),b}return f}catch{}}}catch(A){a={error:A}}finally{try{c&&!c.done&&(s=o.return)&&s.call(o)}finally{if(a)throw a.error}}throw new _e},e.prototype.reset=function(){var n,r;try{for(var i=HI(this.readers),a=i.next();!a.done;a=i.next()){var s=a.value;s.reset()}}catch(o){n={error:o}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}},e}(Or),TH=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),IH=function(t){TH(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.CODA_BAR_CHAR_SET={nnnnnww:"0",nnnnwwn:"1",nnnwnnw:"2",wwnnnnn:"3",nnwnnwn:"4",wnnnnwn:"5",nwnnnnw:"6",nwnnwnn:"7",nwwnnnn:"8",wnnwnnn:"9",nnnwwnn:"-",nnwwnnn:"$",wnnnwnw:":",wnwnnnw:"/",wnwnwnn:".",nnwwwww:"+",nnwwnwn:"A",nwnwnnw:"B",nnnwnww:"C",nnnwwwn:"D"},n}return e.prototype.decodeRow=function(n,r,i){var a=this.getValidRowData(r);if(!a)throw new _e;var s=this.codaBarDecodeRow(a.row);if(!s)throw new _e;return new Ai(s,null,0,[new Ke(a.left,n),new Ke(a.right,n)],et.CODABAR,new Date().getTime())},e.prototype.getValidRowData=function(n){var r=n.toArray(),i=r.indexOf(!0);if(i===-1)return null;var a=r.lastIndexOf(!0);if(a<=i)return null;r=r.slice(i,a+1);for(var s=[],o=r[0],c=1,d=1;d<r.length;d++)r[d]===o?c++:(o=r[d],s.push(c),c=1);return s.push(c),s.length<23&&(s.length+1)%8!==0?null:{row:s,left:i,right:a}},e.prototype.codaBarDecodeRow=function(n){for(var r=[],i=Math.ceil(n.reduce(function(c,d){return(c+d)/2},0));n.length>0;){var a=n.splice(0,8).splice(0,7),s=a.map(function(c){return c<i?"n":"w"}).join("");if(this.CODA_BAR_CHAR_SET[s]===void 0)return null;r.push(this.CODA_BAR_CHAR_SET[s])}var o=r.join("");return this.validCodaBarString(o)?o:null},e.prototype.validCodaBarString=function(n){var r=/^[A-D].{1,}[A-D]$/;return r.test(n)},e}(Or),DH=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),RH=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Lc=function(t){DH(e,t);function e(){var n=t.call(this)||this;return n.decodeFinderCounters=new Int32Array(4),n.dataCharacterCounters=new Int32Array(8),n.oddRoundingErrors=new Array(4),n.evenRoundingErrors=new Array(4),n.oddCounts=new Array(n.dataCharacterCounters.length/2),n.evenCounts=new Array(n.dataCharacterCounters.length/2),n}return e.prototype.getDecodeFinderCounters=function(){return this.decodeFinderCounters},e.prototype.getDataCharacterCounters=function(){return this.dataCharacterCounters},e.prototype.getOddRoundingErrors=function(){return this.oddRoundingErrors},e.prototype.getEvenRoundingErrors=function(){return this.evenRoundingErrors},e.prototype.getOddCounts=function(){return this.oddCounts},e.prototype.getEvenCounts=function(){return this.evenCounts},e.prototype.parseFinderValue=function(n,r){for(var i=0;i<r.length;i++)if(Or.patternMatchVariance(n,r[i],e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return i;throw new _e},e.count=function(n){return Gt.sum(new Int32Array(n))},e.increment=function(n,r){for(var i=0,a=r[0],s=1;s<n.length;s++)r[s]>a&&(a=r[s],i=s);n[i]++},e.decrement=function(n,r){for(var i=0,a=r[0],s=1;s<n.length;s++)r[s]<a&&(a=r[s],i=s);n[i]--},e.isFinderPattern=function(n){var r,i,a=n[0]+n[1],s=a+n[2]+n[3],o=a/s;if(o>=e.MIN_FINDER_PATTERN_RATIO&&o<=e.MAX_FINDER_PATTERN_RATIO){var c=Number.MAX_SAFE_INTEGER,d=Number.MIN_SAFE_INTEGER;try{for(var f=RH(n),p=f.next();!p.done;p=f.next()){var g=p.value;g>d&&(d=g),g<c&&(c=g)}}catch(m){r={error:m}}finally{try{p&&!p.done&&(i=f.return)&&i.call(f)}finally{if(r)throw r.error}}return d<10*c}return!1},e.MAX_AVG_VARIANCE=.2,e.MAX_INDIVIDUAL_VARIANCE=.45,e.MIN_FINDER_PATTERN_RATIO=9.5/12,e.MAX_FINDER_PATTERN_RATIO=12.5/14,e}(Or),t1=function(){function t(e,n){this.value=e,this.checksumPortion=n}return t.prototype.getValue=function(){return this.value},t.prototype.getChecksumPortion=function(){return this.checksumPortion},t.prototype.toString=function(){return this.value+"("+this.checksumPortion+")"},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var n=e;return this.value===n.value&&this.checksumPortion===n.checksumPortion},t.prototype.hashCode=function(){return this.value^this.checksumPortion},t}(),cM=function(){function t(e,n,r,i,a){this.value=e,this.startEnd=n,this.value=e,this.startEnd=n,this.resultPoints=new Array,this.resultPoints.push(new Ke(r,a)),this.resultPoints.push(new Ke(i,a))}return t.prototype.getValue=function(){return this.value},t.prototype.getStartEnd=function(){return this.startEnd},t.prototype.getResultPoints=function(){return this.resultPoints},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var n=e;return this.value===n.value},t.prototype.hashCode=function(){return this.value},t}(),OH=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Ed=function(){function t(){}return t.getRSSvalue=function(e,n,r){var i,a,s=0;try{for(var o=OH(e),c=o.next();!c.done;c=o.next()){var d=c.value;s+=d}}catch(S){i={error:S}}finally{try{c&&!c.done&&(a=o.return)&&a.call(o)}finally{if(i)throw i.error}}for(var f=0,p=0,g=e.length,m=0;m<g-1;m++){var x=void 0;for(x=1,p|=1<<m;x<e[m];x++,p&=~(1<<m)){var b=t.combins(s-x-1,g-m-2);if(r&&p===0&&s-x-(g-m-1)>=g-m-1&&(b-=t.combins(s-x-(g-m),g-m-2)),g-m-1>1){for(var A=0,E=s-x-(g-m-2);E>n;E--)A+=t.combins(s-x-E-1,g-m-3);b-=A*(g-1-m)}else s-x>n&&b--;f+=b}s-=x}return f},t.combins=function(e,n){var r,i;e-n>n?(i=n,r=e-n):(i=e-n,r=n);for(var a=1,s=1,o=e;o>r;o--)a*=o,s<=i&&(a/=s,s++);for(;s<=i;)a/=s,s++;return a},t}(),MH=function(){function t(){}return t.buildBitArray=function(e){var n=e.length*2-1;e[e.length-1].getRightChar()==null&&(n-=1);for(var r=12*n,i=new Wr(r),a=0,s=e[0],o=s.getRightChar().getValue(),c=11;c>=0;--c)(o&1<<c)!==0&&i.set(a),a++;for(var c=1;c<e.length;++c){for(var d=e[c],f=d.getLeftChar().getValue(),p=11;p>=0;--p)(f&1<<p)!==0&&i.set(a),a++;if(d.getRightChar()!==null)for(var g=d.getRightChar().getValue(),p=11;p>=0;--p)(g&1<<p)!==0&&i.set(a),a++}return i},t}(),Rc=function(){function t(e,n){n?this.decodedInformation=null:(this.finished=e,this.decodedInformation=n)}return t.prototype.getDecodedInformation=function(){return this.decodedInformation},t.prototype.isFinished=function(){return this.finished},t}(),p_=function(){function t(e){this.newPosition=e}return t.prototype.getNewPosition=function(){return this.newPosition},t}(),PH=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Va=function(t){PH(e,t);function e(n,r){var i=t.call(this,n)||this;return i.value=r,i}return e.prototype.getValue=function(){return this.value},e.prototype.isFNC1=function(){return this.value===e.FNC1},e.FNC1="$",e}(p_),kH=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Oc=function(t){kH(e,t);function e(n,r,i){var a=t.call(this,n)||this;return i?(a.remaining=!0,a.remainingValue=a.remainingValue):(a.remaining=!1,a.remainingValue=0),a.newString=r,a}return e.prototype.getNewString=function(){return this.newString},e.prototype.isRemaining=function(){return this.remaining},e.prototype.getRemainingValue=function(){return this.remainingValue},e}(p_),NH=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),sd=function(t){NH(e,t);function e(n,r,i){var a=t.call(this,n)||this;if(r<0||r>10||i<0||i>10)throw new Ve;return a.firstDigit=r,a.secondDigit=i,a}return e.prototype.getFirstDigit=function(){return this.firstDigit},e.prototype.getSecondDigit=function(){return this.secondDigit},e.prototype.getValue=function(){return this.firstDigit*10+this.secondDigit},e.prototype.isFirstDigitFNC1=function(){return this.firstDigit===e.FNC1},e.prototype.isSecondDigitFNC1=function(){return this.secondDigit===e.FNC1},e.prototype.isAnyFNC1=function(){return this.firstDigit===e.FNC1||this.secondDigit===e.FNC1},e.FNC1=10,e}(p_),$g=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},LH=function(){function t(){}return t.parseFieldsInGeneralPurpose=function(e){var n,r,i,a,s,o,c,d;if(!e)return null;if(e.length<2)throw new _e;var f=e.substring(0,2);try{for(var p=$g(t.TWO_DIGIT_DATA_LENGTH),g=p.next();!g.done;g=p.next()){var m=g.value;if(m[0]===f)return m[1]===t.VARIABLE_LENGTH?t.processVariableAI(2,m[2],e):t.processFixedAI(2,m[1],e)}}catch(F){n={error:F}}finally{try{g&&!g.done&&(r=p.return)&&r.call(p)}finally{if(n)throw n.error}}if(e.length<3)throw new _e;var x=e.substring(0,3);try{for(var b=$g(t.THREE_DIGIT_DATA_LENGTH),A=b.next();!A.done;A=b.next()){var m=A.value;if(m[0]===x)return m[1]===t.VARIABLE_LENGTH?t.processVariableAI(3,m[2],e):t.processFixedAI(3,m[1],e)}}catch(F){i={error:F}}finally{try{A&&!A.done&&(a=b.return)&&a.call(b)}finally{if(i)throw i.error}}try{for(var E=$g(t.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH),S=E.next();!S.done;S=E.next()){var m=S.value;if(m[0]===x)return m[1]===t.VARIABLE_LENGTH?t.processVariableAI(4,m[2],e):t.processFixedAI(4,m[1],e)}}catch(F){s={error:F}}finally{try{S&&!S.done&&(o=E.return)&&o.call(E)}finally{if(s)throw s.error}}if(e.length<4)throw new _e;var T=e.substring(0,4);try{for(var I=$g(t.FOUR_DIGIT_DATA_LENGTH),P=I.next();!P.done;P=I.next()){var m=P.value;if(m[0]===T)return m[1]===t.VARIABLE_LENGTH?t.processVariableAI(4,m[2],e):t.processFixedAI(4,m[1],e)}}catch(F){c={error:F}}finally{try{P&&!P.done&&(d=I.return)&&d.call(I)}finally{if(c)throw c.error}}throw new _e},t.processFixedAI=function(e,n,r){if(r.length<e)throw new _e;var i=r.substring(0,e);if(r.length<e+n)throw new _e;var a=r.substring(e,e+n),s=r.substring(e+n),o="("+i+")"+a,c=t.parseFieldsInGeneralPurpose(s);return c==null?o:o+c},t.processVariableAI=function(e,n,r){var i=r.substring(0,e),a;r.length<e+n?a=r.length:a=e+n;var s=r.substring(e,a),o=r.substring(a),c="("+i+")"+s,d=t.parseFieldsInGeneralPurpose(o);return d==null?c:c+d},t.VARIABLE_LENGTH=[],t.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",t.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",t.VARIABLE_LENGTH,20],["22",t.VARIABLE_LENGTH,29],["30",t.VARIABLE_LENGTH,8],["37",t.VARIABLE_LENGTH,8],["90",t.VARIABLE_LENGTH,30],["91",t.VARIABLE_LENGTH,30],["92",t.VARIABLE_LENGTH,30],["93",t.VARIABLE_LENGTH,30],["94",t.VARIABLE_LENGTH,30],["95",t.VARIABLE_LENGTH,30],["96",t.VARIABLE_LENGTH,30],["97",t.VARIABLE_LENGTH,3],["98",t.VARIABLE_LENGTH,30],["99",t.VARIABLE_LENGTH,30]],t.THREE_DIGIT_DATA_LENGTH=[["240",t.VARIABLE_LENGTH,30],["241",t.VARIABLE_LENGTH,30],["242",t.VARIABLE_LENGTH,6],["250",t.VARIABLE_LENGTH,30],["251",t.VARIABLE_LENGTH,30],["253",t.VARIABLE_LENGTH,17],["254",t.VARIABLE_LENGTH,20],["400",t.VARIABLE_LENGTH,30],["401",t.VARIABLE_LENGTH,30],["402",17],["403",t.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",t.VARIABLE_LENGTH,20],["421",t.VARIABLE_LENGTH,15],["422",3],["423",t.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],t.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",t.VARIABLE_LENGTH,15],["391",t.VARIABLE_LENGTH,18],["392",t.VARIABLE_LENGTH,15],["393",t.VARIABLE_LENGTH,18],["703",t.VARIABLE_LENGTH,30]],t.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",t.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",t.VARIABLE_LENGTH,20],["8003",t.VARIABLE_LENGTH,30],["8004",t.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",t.VARIABLE_LENGTH,30],["8008",t.VARIABLE_LENGTH,12],["8018",18],["8020",t.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",t.VARIABLE_LENGTH,70],["8200",t.VARIABLE_LENGTH,70]],t}(),Em=function(){function t(e){this.buffer=new Et,this.information=e}return t.prototype.decodeAllCodes=function(e,n){var r=n,i=null;do{var a=this.decodeGeneralPurposeField(r,i),s=LH.parseFieldsInGeneralPurpose(a.getNewString());if(s!=null&&e.append(s),a.isRemaining()?i=""+a.getRemainingValue():i=null,r===a.getNewPosition())break;r=a.getNewPosition()}while(!0);return e.toString()},t.prototype.isStillNumeric=function(e){if(e+7>this.information.getSize())return e+4<=this.information.getSize();for(var n=e;n<e+3;++n)if(this.information.get(n))return!0;return this.information.get(e+3)},t.prototype.decodeNumeric=function(e){if(e+7>this.information.getSize()){var n=this.extractNumericValueFromBitArray(e,4);return n===0?new sd(this.information.getSize(),sd.FNC1,sd.FNC1):new sd(this.information.getSize(),n-1,sd.FNC1)}var r=this.extractNumericValueFromBitArray(e,7),i=(r-8)/11,a=(r-8)%11;return new sd(e+7,i,a)},t.prototype.extractNumericValueFromBitArray=function(e,n){return t.extractNumericValueFromBitArray(this.information,e,n)},t.extractNumericValueFromBitArray=function(e,n,r){for(var i=0,a=0;a<r;++a)e.get(n+a)&&(i|=1<<r-a-1);return i},t.prototype.decodeGeneralPurposeField=function(e,n){this.buffer.setLengthToZero(),n!=null&&this.buffer.append(n),this.current.setPosition(e);var r=this.parseBlocks();return r!=null&&r.isRemaining()?new Oc(this.current.getPosition(),this.buffer.toString(),r.getRemainingValue()):new Oc(this.current.getPosition(),this.buffer.toString())},t.prototype.parseBlocks=function(){var e,n;do{var r=this.current.getPosition();this.current.isAlpha()?(n=this.parseAlphaBlock(),e=n.isFinished()):this.current.isIsoIec646()?(n=this.parseIsoIec646Block(),e=n.isFinished()):(n=this.parseNumericBlock(),e=n.isFinished());var i=r!==this.current.getPosition();if(!i&&!e)break}while(!e);return n.getDecodedInformation()},t.prototype.parseNumericBlock=function(){for(;this.isStillNumeric(this.current.getPosition());){var e=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFirstDigitFNC1()){var n=void 0;return e.isSecondDigitFNC1()?n=new Oc(this.current.getPosition(),this.buffer.toString()):n=new Oc(this.current.getPosition(),this.buffer.toString(),e.getSecondDigit()),new Rc(!0,n)}if(this.buffer.append(e.getFirstDigit()),e.isSecondDigitFNC1()){var n=new Oc(this.current.getPosition(),this.buffer.toString());return new Rc(!0,n)}this.buffer.append(e.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new Rc(!1)},t.prototype.parseIsoIec646Block=function(){for(;this.isStillIsoIec646(this.current.getPosition());){var e=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){var n=new Oc(this.current.getPosition(),this.buffer.toString());return new Rc(!0,n)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new Rc(!1)},t.prototype.parseAlphaBlock=function(){for(;this.isStillAlpha(this.current.getPosition());){var e=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){var n=new Oc(this.current.getPosition(),this.buffer.toString());return new Rc(!0,n)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new Rc(!1)},t.prototype.isStillIsoIec646=function(e){if(e+5>this.information.getSize())return!1;var n=this.extractNumericValueFromBitArray(e,5);if(n>=5&&n<16)return!0;if(e+7>this.information.getSize())return!1;var r=this.extractNumericValueFromBitArray(e,7);if(r>=64&&r<116)return!0;if(e+8>this.information.getSize())return!1;var i=this.extractNumericValueFromBitArray(e,8);return i>=232&&i<253},t.prototype.decodeIsoIec646=function(e){var n=this.extractNumericValueFromBitArray(e,5);if(n===15)return new Va(e+5,Va.FNC1);if(n>=5&&n<15)return new Va(e+5,"0"+(n-5));var r=this.extractNumericValueFromBitArray(e,7);if(r>=64&&r<90)return new Va(e+7,""+(r+1));if(r>=90&&r<116)return new Va(e+7,""+(r+7));var i=this.extractNumericValueFromBitArray(e,8),a;switch(i){case 232:a="!";break;case 233:a='"';break;case 234:a="%";break;case 235:a="&";break;case 236:a="'";break;case 237:a="(";break;case 238:a=")";break;case 239:a="*";break;case 240:a="+";break;case 241:a=",";break;case 242:a="-";break;case 243:a=".";break;case 244:a="/";break;case 245:a=":";break;case 246:a=";";break;case 247:a="<";break;case 248:a="=";break;case 249:a=">";break;case 250:a="?";break;case 251:a="_";break;case 252:a=" ";break;default:throw new Ve}return new Va(e+8,a)},t.prototype.isStillAlpha=function(e){if(e+5>this.information.getSize())return!1;var n=this.extractNumericValueFromBitArray(e,5);if(n>=5&&n<16)return!0;if(e+6>this.information.getSize())return!1;var r=this.extractNumericValueFromBitArray(e,6);return r>=16&&r<63},t.prototype.decodeAlphanumeric=function(e){var n=this.extractNumericValueFromBitArray(e,5);if(n===15)return new Va(e+5,Va.FNC1);if(n>=5&&n<15)return new Va(e+5,"0"+(n-5));var r=this.extractNumericValueFromBitArray(e,6);if(r>=32&&r<58)return new Va(e+6,""+(r+33));var i;switch(r){case 58:i="*";break;case 59:i=",";break;case 60:i="-";break;case 61:i=".";break;case 62:i="/";break;default:throw new np("Decoding invalid alphanumeric value: "+r)}return new Va(e+6,i)},t.prototype.isAlphaTo646ToAlphaLatch=function(e){if(e+1>this.information.getSize())return!1;for(var n=0;n<5&&n+e<this.information.getSize();++n)if(n===2){if(!this.information.get(e+2))return!1}else if(this.information.get(e+n))return!1;return!0},t.prototype.isAlphaOr646ToNumericLatch=function(e){if(e+3>this.information.getSize())return!1;for(var n=e;n<e+3;++n)if(this.information.get(n))return!1;return!0},t.prototype.isNumericToAlphaNumericLatch=function(e){if(e+1>this.information.getSize())return!1;for(var n=0;n<4&&n+e<this.information.getSize();++n)if(this.information.get(e+n))return!1;return!0},t}(),uM=function(){function t(e){this.information=e,this.generalDecoder=new Em(e)}return t.prototype.getInformation=function(){return this.information},t.prototype.getGeneralDecoder=function(){return this.generalDecoder},t}(),BH=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Wa=function(t){BH(e,t);function e(n){return t.call(this,n)||this}return e.prototype.encodeCompressedGtin=function(n,r){n.append("(01)");var i=n.length();n.append("9"),this.encodeCompressedGtinWithoutAI(n,r,i)},e.prototype.encodeCompressedGtinWithoutAI=function(n,r,i){for(var a=0;a<4;++a){var s=this.getGeneralDecoder().extractNumericValueFromBitArray(r+10*a,10);s/100===0&&n.append("0"),s/10===0&&n.append("0"),n.append(s)}e.appendCheckDigit(n,i)},e.appendCheckDigit=function(n,r){for(var i=0,a=0;a<13;a++){var s=n.charAt(a+r).charCodeAt(0)-48;i+=(a&1)===0?3*s:s}i=10-i%10,i===10&&(i=0),n.append(i)},e.GTIN_SIZE=40,e}(uM),FH=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),jH=function(t){FH(e,t);function e(n){return t.call(this,n)||this}return e.prototype.parseInformation=function(){var n=new Et;n.append("(01)");var r=n.length(),i=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE,4);return n.append(i),this.encodeCompressedGtinWithoutAI(n,e.HEADER_SIZE+4,r),this.getGeneralDecoder().decodeAllCodes(n,e.HEADER_SIZE+44)},e.HEADER_SIZE=4,e}(Wa),VH=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),UH=function(t){VH(e,t);function e(n){return t.call(this,n)||this}return e.prototype.parseInformation=function(){var n=new Et;return this.getGeneralDecoder().decodeAllCodes(n,e.HEADER_SIZE)},e.HEADER_SIZE=5,e}(uM),HH=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Sm=function(t){HH(e,t);function e(n){return t.call(this,n)||this}return e.prototype.encodeCompressedWeight=function(n,r,i){var a=this.getGeneralDecoder().extractNumericValueFromBitArray(r,i);this.addWeightCode(n,a);for(var s=this.checkWeight(a),o=1e5,c=0;c<5;++c)s/o===0&&n.append("0"),o/=10;n.append(s)},e}(Wa),zH=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),dM=function(t){zH(e,t);function e(n){return t.call(this,n)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()!==e.HEADER_SIZE+Sm.GTIN_SIZE+e.WEIGHT_SIZE)throw new _e;var n=new Et;return this.encodeCompressedGtin(n,e.HEADER_SIZE),this.encodeCompressedWeight(n,e.HEADER_SIZE+Sm.GTIN_SIZE,e.WEIGHT_SIZE),n.toString()},e.HEADER_SIZE=5,e.WEIGHT_SIZE=15,e}(Sm),$H=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),GH=function(t){$H(e,t);function e(n){return t.call(this,n)||this}return e.prototype.addWeightCode=function(n,r){n.append("(3103)")},e.prototype.checkWeight=function(n){return n},e}(dM),WH=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),YH=function(t){WH(e,t);function e(n){return t.call(this,n)||this}return e.prototype.addWeightCode=function(n,r){r<1e4?n.append("(3202)"):n.append("(3203)")},e.prototype.checkWeight=function(n){return n<1e4?n:n-1e4},e}(dM),qH=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),XH=function(t){qH(e,t);function e(n){return t.call(this,n)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()<e.HEADER_SIZE+Wa.GTIN_SIZE)throw new _e;var n=new Et;this.encodeCompressedGtin(n,e.HEADER_SIZE);var r=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+Wa.GTIN_SIZE,e.LAST_DIGIT_SIZE);n.append("(392"),n.append(r),n.append(")");var i=this.getGeneralDecoder().decodeGeneralPurposeField(e.HEADER_SIZE+Wa.GTIN_SIZE+e.LAST_DIGIT_SIZE,null);return n.append(i.getNewString()),n.toString()},e.HEADER_SIZE=8,e.LAST_DIGIT_SIZE=2,e}(Wa),KH=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),QH=function(t){KH(e,t);function e(n){return t.call(this,n)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()<e.HEADER_SIZE+Wa.GTIN_SIZE)throw new _e;var n=new Et;this.encodeCompressedGtin(n,e.HEADER_SIZE);var r=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+Wa.GTIN_SIZE,e.LAST_DIGIT_SIZE);n.append("(393"),n.append(r),n.append(")");var i=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+Wa.GTIN_SIZE+e.LAST_DIGIT_SIZE,e.FIRST_THREE_DIGITS_SIZE);i/100===0&&n.append("0"),i/10===0&&n.append("0"),n.append(i);var a=this.getGeneralDecoder().decodeGeneralPurposeField(e.HEADER_SIZE+Wa.GTIN_SIZE+e.LAST_DIGIT_SIZE+e.FIRST_THREE_DIGITS_SIZE,null);return n.append(a.getNewString()),n.toString()},e.HEADER_SIZE=8,e.LAST_DIGIT_SIZE=2,e.FIRST_THREE_DIGITS_SIZE=10,e}(Wa),ZH=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),gl=function(t){ZH(e,t);function e(n,r,i){var a=t.call(this,n)||this;return a.dateCode=i,a.firstAIdigits=r,a}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()!==e.HEADER_SIZE+e.GTIN_SIZE+e.WEIGHT_SIZE+e.DATE_SIZE)throw new _e;var n=new Et;return this.encodeCompressedGtin(n,e.HEADER_SIZE),this.encodeCompressedWeight(n,e.HEADER_SIZE+e.GTIN_SIZE,e.WEIGHT_SIZE),this.encodeCompressedDate(n,e.HEADER_SIZE+e.GTIN_SIZE+e.WEIGHT_SIZE),n.toString()},e.prototype.encodeCompressedDate=function(n,r){var i=this.getGeneralDecoder().extractNumericValueFromBitArray(r,e.DATE_SIZE);if(i!==38400){n.append("("),n.append(this.dateCode),n.append(")");var a=i%32;i/=32;var s=i%12+1;i/=12;var o=i;o/10===0&&n.append("0"),n.append(o),s/10===0&&n.append("0"),n.append(s),a/10===0&&n.append("0"),n.append(a)}},e.prototype.addWeightCode=function(n,r){n.append("("),n.append(this.firstAIdigits),n.append(r/1e5),n.append(")")},e.prototype.checkWeight=function(n){return n%1e5},e.HEADER_SIZE=8,e.WEIGHT_SIZE=20,e.DATE_SIZE=16,e}(Sm);function JH(t){try{if(t.get(1))return new jH(t);if(!t.get(2))return new UH(t);var e=Em.extractNumericValueFromBitArray(t,1,4);switch(e){case 4:return new GH(t);case 5:return new YH(t)}var n=Em.extractNumericValueFromBitArray(t,1,5);switch(n){case 12:return new XH(t);case 13:return new QH(t)}var r=Em.extractNumericValueFromBitArray(t,1,7);switch(r){case 56:return new gl(t,"310","11");case 57:return new gl(t,"320","11");case 58:return new gl(t,"310","13");case 59:return new gl(t,"320","13");case 60:return new gl(t,"310","15");case 61:return new gl(t,"320","15");case 62:return new gl(t,"310","17");case 63:return new gl(t,"320","17")}}catch(i){throw console.log(i),new np("unknown decoder: "+t)}}var zI=function(){function t(e,n,r,i){this.leftchar=e,this.rightchar=n,this.finderpattern=r,this.maybeLast=i}return t.prototype.mayBeLast=function(){return this.maybeLast},t.prototype.getLeftChar=function(){return this.leftchar},t.prototype.getRightChar=function(){return this.rightchar},t.prototype.getFinderPattern=function(){return this.finderpattern},t.prototype.mustBeLast=function(){return this.rightchar==null},t.prototype.toString=function(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"},t.equals=function(e,n){return e instanceof t?t.equalsOrNull(e.leftchar,n.leftchar)&&t.equalsOrNull(e.rightchar,n.rightchar)&&t.equalsOrNull(e.finderpattern,n.finderpattern):!1},t.equalsOrNull=function(e,n){return e===null?n===null:t.equals(e,n)},t.prototype.hashCode=function(){var e=this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue();return e},t}(),ez=function(){function t(e,n,r){this.pairs=e,this.rowNumber=n,this.wasReversed=r}return t.prototype.getPairs=function(){return this.pairs},t.prototype.getRowNumber=function(){return this.rowNumber},t.prototype.isReversed=function(){return this.wasReversed},t.prototype.isEquivalent=function(e){return this.checkEqualitity(this,e)},t.prototype.toString=function(){return"{ "+this.pairs+" }"},t.prototype.equals=function(e,n){return e instanceof t?this.checkEqualitity(e,n)&&e.wasReversed===n.wasReversed:!1},t.prototype.checkEqualitity=function(e,n){if(!(!e||!n)){var r;return e.forEach(function(i,a){n.forEach(function(s){i.getLeftChar().getValue()===s.getLeftChar().getValue()&&i.getRightChar().getValue()===s.getRightChar().getValue()&&i.getFinderPatter().getValue()===s.getFinderPatter().getValue()&&(r=!0)})}),r}},t}(),tz=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),ml=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},nz=function(t){tz(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.pairs=new Array(e.MAX_PAIRS),n.rows=new Array,n.startEnd=[2],n}return e.prototype.decodeRow=function(n,r,i){this.pairs.length=0,this.startFromEven=!1;try{return e.constructResult(this.decodeRow2pairs(n,r))}catch{}return this.pairs.length=0,this.startFromEven=!0,e.constructResult(this.decodeRow2pairs(n,r))},e.prototype.reset=function(){this.pairs.length=0,this.rows.length=0},e.prototype.decodeRow2pairs=function(n,r){for(var i=!1;!i;)try{this.pairs.push(this.retrieveNextPair(r,this.pairs,n))}catch(o){if(o instanceof _e){if(!this.pairs.length)throw new _e;i=!0}}if(this.checkChecksum())return this.pairs;var a;if(this.rows.length?a=!0:a=!1,this.storeRow(n,!1),a){var s=this.checkRowsBoolean(!1);if(s!=null||(s=this.checkRowsBoolean(!0),s!=null))return s}throw new _e},e.prototype.checkRowsBoolean=function(n){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,n&&(this.rows=this.rows.reverse());var r=null;try{r=this.checkRows(new Array,0)}catch(i){console.log(i)}return n&&(this.rows=this.rows.reverse()),r},e.prototype.checkRows=function(n,r){for(var i,a,s=r;s<this.rows.length;s++){var o=this.rows[s];this.pairs.length=0;try{for(var c=(i=void 0,ml(n)),d=c.next();!d.done;d=c.next()){var f=d.value;this.pairs.push(f.getPairs())}}catch(g){i={error:g}}finally{try{d&&!d.done&&(a=c.return)&&a.call(c)}finally{if(i)throw i.error}}if(this.pairs.push(o.getPairs()),!!e.isValidSequence(this.pairs)){if(this.checkChecksum())return this.pairs;var p=new Array(n);p.push(o);try{return this.checkRows(p,s+1)}catch(g){console.log(g)}}}throw new _e},e.isValidSequence=function(n){var r,i;try{for(var a=ml(e.FINDER_PATTERN_SEQUENCES),s=a.next();!s.done;s=a.next()){var o=s.value;if(!(n.length>o.length)){for(var c=!0,d=0;d<n.length;d++)if(n[d].getFinderPattern().getValue()!==o[d]){c=!1;break}if(c)return!0}}}catch(f){r={error:f}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}return!1},e.prototype.storeRow=function(n,r){for(var i=0,a=!1,s=!1;i<this.rows.length;){var o=this.rows[i];if(o.getRowNumber()>n){s=o.isEquivalent(this.pairs);break}a=o.isEquivalent(this.pairs),i++}s||a||e.isPartialRow(this.pairs,this.rows)||(this.rows.push(i,new ez(this.pairs,n,r)),this.removePartialRows(this.pairs,this.rows))},e.prototype.removePartialRows=function(n,r){var i,a,s,o,c,d;try{for(var f=ml(r),p=f.next();!p.done;p=f.next()){var g=p.value;if(g.getPairs().length!==n.length){var m=!0;try{for(var x=(s=void 0,ml(g.getPairs())),b=x.next();!b.done;b=x.next()){var A=b.value,E=!1;try{for(var S=(c=void 0,ml(n)),T=S.next();!T.done;T=S.next()){var I=T.value;if(zI.equals(A,I)){E=!0;break}}}catch(P){c={error:P}}finally{try{T&&!T.done&&(d=S.return)&&d.call(S)}finally{if(c)throw c.error}}E||(m=!1)}}catch(P){s={error:P}}finally{try{b&&!b.done&&(o=x.return)&&o.call(x)}finally{if(s)throw s.error}}}}}catch(P){i={error:P}}finally{try{p&&!p.done&&(a=f.return)&&a.call(f)}finally{if(i)throw i.error}}},e.isPartialRow=function(n,r){var i,a,s,o,c,d;try{for(var f=ml(r),p=f.next();!p.done;p=f.next()){var g=p.value,m=!0;try{for(var x=(s=void 0,ml(n)),b=x.next();!b.done;b=x.next()){var A=b.value,E=!1;try{for(var S=(c=void 0,ml(g.getPairs())),T=S.next();!T.done;T=S.next()){var I=T.value;if(A.equals(I)){E=!0;break}}}catch(P){c={error:P}}finally{try{T&&!T.done&&(d=S.return)&&d.call(S)}finally{if(c)throw c.error}}if(!E){m=!1;break}}}catch(P){s={error:P}}finally{try{b&&!b.done&&(o=x.return)&&o.call(x)}finally{if(s)throw s.error}}if(m)return!0}}catch(P){i={error:P}}finally{try{p&&!p.done&&(a=f.return)&&a.call(f)}finally{if(i)throw i.error}}return!1},e.prototype.getRows=function(){return this.rows},e.constructResult=function(n){var r=MH.buildBitArray(n),i=JH(r),a=i.parseInformation(),s=n[0].getFinderPattern().getResultPoints(),o=n[n.length-1].getFinderPattern().getResultPoints(),c=[s[0],s[1],o[0],o[1]];return new Ai(a,null,null,c,et.RSS_EXPANDED,null)},e.prototype.checkChecksum=function(){var n=this.pairs.get(0),r=n.getLeftChar(),i=n.getRightChar();if(i===null)return!1;for(var a=i.getChecksumPortion(),s=2,o=1;o<this.pairs.size();++o){var c=this.pairs.get(o);a+=c.getLeftChar().getChecksumPortion(),s++;var d=c.getRightChar();d!=null&&(a+=d.getChecksumPortion(),s++)}a%=211;var f=211*(s-4)+a;return f===r.getValue()},e.getNextSecondBar=function(n,r){var i;return n.get(r)?(i=n.getNextUnset(r),i=n.getNextSet(i)):(i=n.getNextSet(r),i=n.getNextUnset(i)),i},e.prototype.retrieveNextPair=function(n,r,i){var a=r.length%2===0;this.startFromEven&&(a=!a);var s,o=!0,c=-1;do this.findNextPair(n,r,c),s=this.parseFoundFinderPattern(n,i,a),s===null?c=e.getNextSecondBar(n,this.startEnd[0]):o=!1;while(o);var d=this.decodeDataCharacter(n,s,a,!0);if(!this.isEmptyPair(r)&&r[r.length-1].mustBeLast())throw new _e;var f;try{f=this.decodeDataCharacter(n,s,a,!1)}catch(p){f=null,console.log(p)}return new zI(d,f,s,!0)},e.prototype.isEmptyPair=function(n){return n.length===0},e.prototype.findNextPair=function(n,r,i){var a=this.getDecodeFinderCounters();a[0]=0,a[1]=0,a[2]=0,a[3]=0;var s=n.getSize(),o;if(i>=0)o=i;else if(this.isEmptyPair(r))o=0;else{var c=r[r.length-1];o=c.getFinderPattern().getStartEnd()[1]}var d=r.length%2!==0;this.startFromEven&&(d=!d);for(var f=!1;o<s&&(f=!n.get(o),!!f);)o++;for(var p=0,g=o,m=o;m<s;m++)if(n.get(m)!==f)a[p]++;else{if(p===3){if(d&&e.reverseCounters(a),e.isFinderPattern(a)){this.startEnd[0]=g,this.startEnd[1]=m;return}d&&e.reverseCounters(a),g+=a[0]+a[1],a[0]=a[2],a[1]=a[3],a[2]=0,a[3]=0,p--}else p++;a[p]=1,f=!f}throw new _e},e.reverseCounters=function(n){for(var r=n.length,i=0;i<r/2;++i){var a=n[i];n[i]=n[r-i-1],n[r-i-1]=a}},e.prototype.parseFoundFinderPattern=function(n,r,i){var a,s,o;if(i){for(var c=this.startEnd[0]-1;c>=0&&!n.get(c);)c--;c++,a=this.startEnd[0]-c,s=c,o=this.startEnd[1]}else s=this.startEnd[0],o=n.getNextUnset(this.startEnd[1]+1),a=o-this.startEnd[1];var d=this.getDecodeFinderCounters();Tn.arraycopy(d,0,d,1,d.length-1),d[0]=a;var f;try{f=this.parseFinderValue(d,e.FINDER_PATTERNS)}catch{return null}return new cM(f,[s,o],s,o,r)},e.prototype.decodeDataCharacter=function(n,r,i,a){for(var s=this.getDataCharacterCounters(),o=0;o<s.length;o++)s[o]=0;if(a)e.recordPatternInReverse(n,r.getStartEnd()[0],s);else{e.recordPattern(n,r.getStartEnd()[1],s);for(var c=0,d=s.length-1;c<d;c++,d--){var f=s[c];s[c]=s[d],s[d]=f}}var p=17,g=Gt.sum(new Int32Array(s))/p,m=(r.getStartEnd()[1]-r.getStartEnd()[0])/15;if(Math.abs(g-m)/m>.3)throw new _e;for(var x=this.getOddCounts(),b=this.getEvenCounts(),A=this.getOddRoundingErrors(),E=this.getEvenRoundingErrors(),c=0;c<s.length;c++){var S=1*s[c]/g,T=S+.5;if(T<1){if(S<.3)throw new _e;T=1}else if(T>8){if(S>8.7)throw new _e;T=8}var I=c/2;(c&1)===0?(x[I]=T,A[I]=S-T):(b[I]=T,E[I]=S-T)}this.adjustOddEvenCounts(p);for(var P=4*r.getValue()+(i?0:2)+(a?0:1)-1,F=0,M=0,c=x.length-1;c>=0;c--){if(e.isNotA1left(r,i,a)){var D=e.WEIGHTS[P][2*c];M+=x[c]*D}F+=x[c]}for(var R=0,c=b.length-1;c>=0;c--)if(e.isNotA1left(r,i,a)){var D=e.WEIGHTS[P][2*c+1];R+=b[c]*D}var B=M+R;if((F&1)!==0||F>13||F<4)throw new _e;var N=(13-F)/2,k=e.SYMBOL_WIDEST[N],j=9-k,q=Ed.getRSSvalue(x,k,!0),X=Ed.getRSSvalue(b,j,!1),G=e.EVEN_TOTAL_SUBSET[N],W=e.GSUM[N],K=q*G+X+W;return new t1(K,B)},e.isNotA1left=function(n,r,i){return!(n.getValue()===0&&r&&i)},e.prototype.adjustOddEvenCounts=function(n){var r=Gt.sum(new Int32Array(this.getOddCounts())),i=Gt.sum(new Int32Array(this.getEvenCounts())),a=!1,s=!1;r>13?s=!0:r<4&&(a=!0);var o=!1,c=!1;i>13?c=!0:i<4&&(o=!0);var d=r+i-n,f=(r&1)===1,p=(i&1)===0;if(d===1)if(f){if(p)throw new _e;s=!0}else{if(!p)throw new _e;c=!0}else if(d===-1)if(f){if(p)throw new _e;a=!0}else{if(!p)throw new _e;o=!0}else if(d===0){if(f){if(!p)throw new _e;r<i?(a=!0,c=!0):(s=!0,o=!0)}else if(p)throw new _e}else throw new _e;if(a){if(s)throw new _e;e.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(s&&e.decrement(this.getOddCounts(),this.getOddRoundingErrors()),o){if(c)throw new _e;e.increment(this.getEvenCounts(),this.getOddRoundingErrors())}c&&e.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},e.SYMBOL_WIDEST=[7,5,4,3,1],e.EVEN_TOTAL_SUBSET=[4,20,52,104,204],e.GSUM=[0,348,1388,2948,3988],e.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],e.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],e.FINDER_PAT_A=0,e.FINDER_PAT_B=1,e.FINDER_PAT_C=2,e.FINDER_PAT_D=3,e.FINDER_PAT_E=4,e.FINDER_PAT_F=5,e.FINDER_PATTERN_SEQUENCES=[[e.FINDER_PAT_A,e.FINDER_PAT_A],[e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B],[e.FINDER_PAT_A,e.FINDER_PAT_C,e.FINDER_PAT_B,e.FINDER_PAT_D],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_C],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_D,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_D],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_E],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F]],e.MAX_PAIRS=11,e}(Lc),rz=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),iz=function(t){rz(e,t);function e(n,r,i){var a=t.call(this,n,r)||this;return a.count=0,a.finderPattern=i,a}return e.prototype.getFinderPattern=function(){return this.finderPattern},e.prototype.getCount=function(){return this.count},e.prototype.incrementCount=function(){this.count++},e}(t1),az=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),s2=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},$I=function(t){az(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.possibleLeftPairs=[],n.possibleRightPairs=[],n}return e.prototype.decodeRow=function(n,r,i){var a,s,o,c,d=this.decodePair(r,!1,n,i);e.addOrTally(this.possibleLeftPairs,d),r.reverse();var f=this.decodePair(r,!0,n,i);e.addOrTally(this.possibleRightPairs,f),r.reverse();try{for(var p=s2(this.possibleLeftPairs),g=p.next();!g.done;g=p.next()){var m=g.value;if(m.getCount()>1)try{for(var x=(o=void 0,s2(this.possibleRightPairs)),b=x.next();!b.done;b=x.next()){var A=b.value;if(A.getCount()>1&&e.checkChecksum(m,A))return e.constructResult(m,A)}}catch(E){o={error:E}}finally{try{b&&!b.done&&(c=x.return)&&c.call(x)}finally{if(o)throw o.error}}}}catch(E){a={error:E}}finally{try{g&&!g.done&&(s=p.return)&&s.call(p)}finally{if(a)throw a.error}}throw new _e},e.addOrTally=function(n,r){var i,a;if(r!=null){var s=!1;try{for(var o=s2(n),c=o.next();!c.done;c=o.next()){var d=c.value;if(d.getValue()===r.getValue()){d.incrementCount(),s=!0;break}}}catch(f){i={error:f}}finally{try{c&&!c.done&&(a=o.return)&&a.call(o)}finally{if(i)throw i.error}}s||n.push(r)}},e.prototype.reset=function(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0},e.constructResult=function(n,r){for(var i=4537077*n.getValue()+r.getValue(),a=new String(i).toString(),s=new Et,o=13-a.length;o>0;o--)s.append("0");s.append(a);for(var c=0,o=0;o<13;o++){var d=s.charAt(o).charCodeAt(0)-48;c+=(o&1)===0?3*d:d}c=10-c%10,c===10&&(c=0),s.append(c.toString());var f=n.getFinderPattern().getResultPoints(),p=r.getFinderPattern().getResultPoints();return new Ai(s.toString(),null,0,[f[0],f[1],p[0],p[1]],et.RSS_14,new Date().getTime())},e.checkChecksum=function(n,r){var i=(n.getChecksumPortion()+16*r.getChecksumPortion())%79,a=9*n.getFinderPattern().getValue()+r.getFinderPattern().getValue();return a>72&&a--,a>8&&a--,i===a},e.prototype.decodePair=function(n,r,i,a){try{var s=this.findFinderPattern(n,r),o=this.parseFoundFinderPattern(n,i,r,s),c=a==null?null:a.get(Bn.NEED_RESULT_POINT_CALLBACK);if(c!=null){var d=(s[0]+s[1])/2;r&&(d=n.getSize()-1-d),c.foundPossibleResultPoint(new Ke(d,i))}var f=this.decodeDataCharacter(n,o,!0),p=this.decodeDataCharacter(n,o,!1);return new iz(1597*f.getValue()+p.getValue(),f.getChecksumPortion()+4*p.getChecksumPortion(),o)}catch{return null}},e.prototype.decodeDataCharacter=function(n,r,i){for(var a=this.getDataCharacterCounters(),s=0;s<a.length;s++)a[s]=0;if(i)Or.recordPatternInReverse(n,r.getStartEnd()[0],a);else{Or.recordPattern(n,r.getStartEnd()[1]+1,a);for(var o=0,c=a.length-1;o<c;o++,c--){var d=a[o];a[o]=a[c],a[c]=d}}for(var f=i?16:15,p=Gt.sum(new Int32Array(a))/f,g=this.getOddCounts(),m=this.getEvenCounts(),x=this.getOddRoundingErrors(),b=this.getEvenRoundingErrors(),o=0;o<a.length;o++){var A=a[o]/p,E=Math.floor(A+.5);E<1?E=1:E>8&&(E=8);var S=Math.floor(o/2);(o&1)===0?(g[S]=E,x[S]=A-E):(m[S]=E,b[S]=A-E)}this.adjustOddEvenCounts(i,f);for(var T=0,I=0,o=g.length-1;o>=0;o--)I*=9,I+=g[o],T+=g[o];for(var P=0,F=0,o=m.length-1;o>=0;o--)P*=9,P+=m[o],F+=m[o];var M=I+3*P;if(i){if((T&1)!==0||T>12||T<4)throw new _e;var D=(12-T)/2,R=e.OUTSIDE_ODD_WIDEST[D],B=9-R,N=Ed.getRSSvalue(g,R,!1),k=Ed.getRSSvalue(m,B,!0),j=e.OUTSIDE_EVEN_TOTAL_SUBSET[D],q=e.OUTSIDE_GSUM[D];return new t1(N*j+k+q,M)}else{if((F&1)!==0||F>10||F<4)throw new _e;var D=(10-F)/2,R=e.INSIDE_ODD_WIDEST[D],B=9-R,N=Ed.getRSSvalue(g,R,!0),k=Ed.getRSSvalue(m,B,!1),X=e.INSIDE_ODD_TOTAL_SUBSET[D],q=e.INSIDE_GSUM[D];return new t1(k*X+N+q,M)}},e.prototype.findFinderPattern=function(n,r){var i=this.getDecodeFinderCounters();i[0]=0,i[1]=0,i[2]=0,i[3]=0;for(var a=n.getSize(),s=!1,o=0;o<a&&(s=!n.get(o),r!==s);)o++;for(var c=0,d=o,f=o;f<a;f++)if(n.get(f)!==s)i[c]++;else{if(c===3){if(Lc.isFinderPattern(i))return[d,f];d+=i[0]+i[1],i[0]=i[2],i[1]=i[3],i[2]=0,i[3]=0,c--}else c++;i[c]=1,s=!s}throw new _e},e.prototype.parseFoundFinderPattern=function(n,r,i,a){for(var s=n.get(a[0]),o=a[0]-1;o>=0&&s!==n.get(o);)o--;o++;var c=a[0]-o,d=this.getDecodeFinderCounters(),f=new Int32Array(d.length);Tn.arraycopy(d,0,f,1,d.length-1),f[0]=c;var p=this.parseFinderValue(f,e.FINDER_PATTERNS),g=o,m=a[1];return i&&(g=n.getSize()-1-g,m=n.getSize()-1-m),new cM(p,[o,a[1]],g,m,r)},e.prototype.adjustOddEvenCounts=function(n,r){var i=Gt.sum(new Int32Array(this.getOddCounts())),a=Gt.sum(new Int32Array(this.getEvenCounts())),s=!1,o=!1,c=!1,d=!1;n?(i>12?o=!0:i<4&&(s=!0),a>12?d=!0:a<4&&(c=!0)):(i>11?o=!0:i<5&&(s=!0),a>10?d=!0:a<4&&(c=!0));var f=i+a-r,p=(i&1)===(n?1:0),g=(a&1)===1;if(f===1)if(p){if(g)throw new _e;o=!0}else{if(!g)throw new _e;d=!0}else if(f===-1)if(p){if(g)throw new _e;s=!0}else{if(!g)throw new _e;c=!0}else if(f===0){if(p){if(!g)throw new _e;i<a?(s=!0,d=!0):(o=!0,c=!0)}else if(g)throw new _e}else throw new _e;if(s){if(o)throw new _e;Lc.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(o&&Lc.decrement(this.getOddCounts(),this.getOddRoundingErrors()),c){if(d)throw new _e;Lc.increment(this.getEvenCounts(),this.getOddRoundingErrors())}d&&Lc.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},e.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],e.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],e.OUTSIDE_GSUM=[0,161,961,2015,2715],e.INSIDE_GSUM=[0,336,1036,1516],e.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],e.INSIDE_ODD_WIDEST=[2,4,6,8],e.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])],e}(Lc),sz=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Qh=function(t){sz(e,t);function e(n){var r=t.call(this)||this;r.readers=[];var i=n?n.get(Bn.POSSIBLE_FORMATS):null,a=n&&n.get(Bn.ASSUME_CODE_39_CHECK_DIGIT)!==void 0,s=n&&n.get(Bn.ENABLE_CODE_39_EXTENDED_MODE)!==void 0;return i&&((i.includes(et.EAN_13)||i.includes(et.UPC_A)||i.includes(et.EAN_8)||i.includes(et.UPC_E))&&r.readers.push(new a2(n)),i.includes(et.CODE_39)&&r.readers.push(new kI(a,s)),i.includes(et.CODE_93)&&r.readers.push(new NI),i.includes(et.CODE_128)&&r.readers.push(new PI),i.includes(et.ITF)&&r.readers.push(new LI),i.includes(et.CODABAR)&&r.readers.push(new IH),i.includes(et.RSS_14)&&r.readers.push(new $I),i.includes(et.RSS_EXPANDED)&&(console.warn("RSS Expanded reader IS NOT ready for production yet! use at your own risk."),r.readers.push(new nz))),r.readers.length===0&&(r.readers.push(new a2(n)),r.readers.push(new kI),r.readers.push(new NI),r.readers.push(new a2(n)),r.readers.push(new PI),r.readers.push(new LI),r.readers.push(new $I)),r}return e.prototype.decodeRow=function(n,r,i){for(var a=0;a<this.readers.length;a++)try{return this.readers[a].decodeRow(n,r,i)}catch{}throw new _e},e.prototype.reset=function(){this.readers.forEach(function(n){return n.reset()})},e}(Or),oz=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}();(function(t){oz(e,t);function e(n,r){return n===void 0&&(n=500),t.call(this,new Qh(r),n,r)||this}return e})(bf);var GI=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},rn=function(){function t(e,n,r){this.ecCodewords=e,this.ecBlocks=[n],r&&this.ecBlocks.push(r)}return t.prototype.getECCodewords=function(){return this.ecCodewords},t.prototype.getECBlocks=function(){return this.ecBlocks},t}(),Kt=function(){function t(e,n){this.count=e,this.dataCodewords=n}return t.prototype.getCount=function(){return this.count},t.prototype.getDataCodewords=function(){return this.dataCodewords},t}(),lz=function(){function t(e,n,r,i,a,s){var o,c;this.versionNumber=e,this.symbolSizeRows=n,this.symbolSizeColumns=r,this.dataRegionSizeRows=i,this.dataRegionSizeColumns=a,this.ecBlocks=s;var d=0,f=s.getECCodewords(),p=s.getECBlocks();try{for(var g=GI(p),m=g.next();!m.done;m=g.next()){var x=m.value;d+=x.getCount()*(x.getDataCodewords()+f)}}catch(b){o={error:b}}finally{try{m&&!m.done&&(c=g.return)&&c.call(g)}finally{if(o)throw o.error}}this.totalCodewords=d}return t.prototype.getVersionNumber=function(){return this.versionNumber},t.prototype.getSymbolSizeRows=function(){return this.symbolSizeRows},t.prototype.getSymbolSizeColumns=function(){return this.symbolSizeColumns},t.prototype.getDataRegionSizeRows=function(){return this.dataRegionSizeRows},t.prototype.getDataRegionSizeColumns=function(){return this.dataRegionSizeColumns},t.prototype.getTotalCodewords=function(){return this.totalCodewords},t.prototype.getECBlocks=function(){return this.ecBlocks},t.getVersionForDimensions=function(e,n){var r,i;if((e&1)!==0||(n&1)!==0)throw new Ve;try{for(var a=GI(t.VERSIONS),s=a.next();!s.done;s=a.next()){var o=s.value;if(o.symbolSizeRows===e&&o.symbolSizeColumns===n)return o}}catch(c){r={error:c}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}throw new Ve},t.prototype.toString=function(){return""+this.versionNumber},t.buildVersions=function(){return[new t(1,10,10,8,8,new rn(5,new Kt(1,3))),new t(2,12,12,10,10,new rn(7,new Kt(1,5))),new t(3,14,14,12,12,new rn(10,new Kt(1,8))),new t(4,16,16,14,14,new rn(12,new Kt(1,12))),new t(5,18,18,16,16,new rn(14,new Kt(1,18))),new t(6,20,20,18,18,new rn(18,new Kt(1,22))),new t(7,22,22,20,20,new rn(20,new Kt(1,30))),new t(8,24,24,22,22,new rn(24,new Kt(1,36))),new t(9,26,26,24,24,new rn(28,new Kt(1,44))),new t(10,32,32,14,14,new rn(36,new Kt(1,62))),new t(11,36,36,16,16,new rn(42,new Kt(1,86))),new t(12,40,40,18,18,new rn(48,new Kt(1,114))),new t(13,44,44,20,20,new rn(56,new Kt(1,144))),new t(14,48,48,22,22,new rn(68,new Kt(1,174))),new t(15,52,52,24,24,new rn(42,new Kt(2,102))),new t(16,64,64,14,14,new rn(56,new Kt(2,140))),new t(17,72,72,16,16,new rn(36,new Kt(4,92))),new t(18,80,80,18,18,new rn(48,new Kt(4,114))),new t(19,88,88,20,20,new rn(56,new Kt(4,144))),new t(20,96,96,22,22,new rn(68,new Kt(4,174))),new t(21,104,104,24,24,new rn(56,new Kt(6,136))),new t(22,120,120,18,18,new rn(68,new Kt(6,175))),new t(23,132,132,20,20,new rn(62,new Kt(8,163))),new t(24,144,144,22,22,new rn(62,new Kt(8,156),new Kt(2,155))),new t(25,8,18,6,16,new rn(7,new Kt(1,5))),new t(26,8,32,6,14,new rn(11,new Kt(1,10))),new t(27,12,26,10,24,new rn(14,new Kt(1,16))),new t(28,12,36,10,16,new rn(18,new Kt(1,22))),new t(29,16,36,14,16,new rn(24,new Kt(1,32))),new t(30,16,48,14,22,new rn(28,new Kt(1,49)))]},t.VERSIONS=t.buildVersions(),t}(),cz=function(){function t(e){var n=e.getHeight();if(n<8||n>144||(n&1)!==0)throw new Ve;this.version=t.readVersion(e),this.mappingBitMatrix=this.extractDataRegion(e),this.readMappingMatrix=new zs(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}return t.prototype.getVersion=function(){return this.version},t.readVersion=function(e){var n=e.getHeight(),r=e.getWidth();return lz.getVersionForDimensions(n,r)},t.prototype.readCodewords=function(){var e=new Int8Array(this.version.getTotalCodewords()),n=0,r=4,i=0,a=this.mappingBitMatrix.getHeight(),s=this.mappingBitMatrix.getWidth(),o=!1,c=!1,d=!1,f=!1;do if(r===a&&i===0&&!o)e[n++]=this.readCorner1(a,s)&255,r-=2,i+=2,o=!0;else if(r===a-2&&i===0&&(s&3)!==0&&!c)e[n++]=this.readCorner2(a,s)&255,r-=2,i+=2,c=!0;else if(r===a+4&&i===2&&(s&7)===0&&!d)e[n++]=this.readCorner3(a,s)&255,r-=2,i+=2,d=!0;else if(r===a-2&&i===0&&(s&7)===4&&!f)e[n++]=this.readCorner4(a,s)&255,r-=2,i+=2,f=!0;else{do r<a&&i>=0&&!this.readMappingMatrix.get(i,r)&&(e[n++]=this.readUtah(r,i,a,s)&255),r-=2,i+=2;while(r>=0&&i<s);r+=1,i+=3;do r>=0&&i<s&&!this.readMappingMatrix.get(i,r)&&(e[n++]=this.readUtah(r,i,a,s)&255),r+=2,i-=2;while(r<a&&i>=0);r+=3,i+=1}while(r<a||i<s);if(n!==this.version.getTotalCodewords())throw new Ve;return e},t.prototype.readModule=function(e,n,r,i){return e<0&&(e+=r,n+=4-(r+4&7)),n<0&&(n+=i,e+=4-(i+4&7)),this.readMappingMatrix.set(n,e),this.mappingBitMatrix.get(n,e)},t.prototype.readUtah=function(e,n,r,i){var a=0;return this.readModule(e-2,n-2,r,i)&&(a|=1),a<<=1,this.readModule(e-2,n-1,r,i)&&(a|=1),a<<=1,this.readModule(e-1,n-2,r,i)&&(a|=1),a<<=1,this.readModule(e-1,n-1,r,i)&&(a|=1),a<<=1,this.readModule(e-1,n,r,i)&&(a|=1),a<<=1,this.readModule(e,n-2,r,i)&&(a|=1),a<<=1,this.readModule(e,n-1,r,i)&&(a|=1),a<<=1,this.readModule(e,n,r,i)&&(a|=1),a},t.prototype.readCorner1=function(e,n){var r=0;return this.readModule(e-1,0,e,n)&&(r|=1),r<<=1,this.readModule(e-1,1,e,n)&&(r|=1),r<<=1,this.readModule(e-1,2,e,n)&&(r|=1),r<<=1,this.readModule(0,n-2,e,n)&&(r|=1),r<<=1,this.readModule(0,n-1,e,n)&&(r|=1),r<<=1,this.readModule(1,n-1,e,n)&&(r|=1),r<<=1,this.readModule(2,n-1,e,n)&&(r|=1),r<<=1,this.readModule(3,n-1,e,n)&&(r|=1),r},t.prototype.readCorner2=function(e,n){var r=0;return this.readModule(e-3,0,e,n)&&(r|=1),r<<=1,this.readModule(e-2,0,e,n)&&(r|=1),r<<=1,this.readModule(e-1,0,e,n)&&(r|=1),r<<=1,this.readModule(0,n-4,e,n)&&(r|=1),r<<=1,this.readModule(0,n-3,e,n)&&(r|=1),r<<=1,this.readModule(0,n-2,e,n)&&(r|=1),r<<=1,this.readModule(0,n-1,e,n)&&(r|=1),r<<=1,this.readModule(1,n-1,e,n)&&(r|=1),r},t.prototype.readCorner3=function(e,n){var r=0;return this.readModule(e-1,0,e,n)&&(r|=1),r<<=1,this.readModule(e-1,n-1,e,n)&&(r|=1),r<<=1,this.readModule(0,n-3,e,n)&&(r|=1),r<<=1,this.readModule(0,n-2,e,n)&&(r|=1),r<<=1,this.readModule(0,n-1,e,n)&&(r|=1),r<<=1,this.readModule(1,n-3,e,n)&&(r|=1),r<<=1,this.readModule(1,n-2,e,n)&&(r|=1),r<<=1,this.readModule(1,n-1,e,n)&&(r|=1),r},t.prototype.readCorner4=function(e,n){var r=0;return this.readModule(e-3,0,e,n)&&(r|=1),r<<=1,this.readModule(e-2,0,e,n)&&(r|=1),r<<=1,this.readModule(e-1,0,e,n)&&(r|=1),r<<=1,this.readModule(0,n-2,e,n)&&(r|=1),r<<=1,this.readModule(0,n-1,e,n)&&(r|=1),r<<=1,this.readModule(1,n-1,e,n)&&(r|=1),r<<=1,this.readModule(2,n-1,e,n)&&(r|=1),r<<=1,this.readModule(3,n-1,e,n)&&(r|=1),r},t.prototype.extractDataRegion=function(e){var n=this.version.getSymbolSizeRows(),r=this.version.getSymbolSizeColumns();if(e.getHeight()!==n)throw new it("Dimension of bitMatrix must match the version size");for(var i=this.version.getDataRegionSizeRows(),a=this.version.getDataRegionSizeColumns(),s=n/i|0,o=r/a|0,c=s*i,d=o*a,f=new zs(d,c),p=0;p<s;++p)for(var g=p*i,m=0;m<o;++m)for(var x=m*a,b=0;b<i;++b)for(var A=p*(i+2)+1+b,E=g+b,S=0;S<a;++S){var T=m*(a+2)+1+S;if(e.get(T,A)){var I=x+S;f.set(I,E)}}return f},t}(),WI=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},uz=function(){function t(e,n){this.numDataCodewords=e,this.codewords=n}return t.getDataBlocks=function(e,n){var r,i,a,s,o=n.getECBlocks(),c=0,d=o.getECBlocks();try{for(var f=WI(d),p=f.next();!p.done;p=f.next()){var g=p.value;c+=g.getCount()}}catch(q){r={error:q}}finally{try{p&&!p.done&&(i=f.return)&&i.call(f)}finally{if(r)throw r.error}}var m=new Array(c),x=0;try{for(var b=WI(d),A=b.next();!A.done;A=b.next())for(var g=A.value,E=0;E<g.getCount();E++){var S=g.getDataCodewords(),T=o.getECCodewords()+S;m[x++]=new t(S,new Uint8Array(T))}}catch(q){a={error:q}}finally{try{A&&!A.done&&(s=b.return)&&s.call(b)}finally{if(a)throw a.error}}for(var I=m[0].codewords.length,P=I-o.getECCodewords(),F=P-1,M=0,E=0;E<F;E++)for(var D=0;D<x;D++)m[D].codewords[E]=e[M++];for(var R=n.getVersionNumber()===24,B=R?8:x,D=0;D<B;D++)m[D].codewords[P-1]=e[M++];for(var N=m[0].codewords.length,E=P;E<N;E++)for(var D=0;D<x;D++){var k=R?(D+8)%x:D,j=R&&k>7?E-1:E;m[k].codewords[j]=e[M++]}if(M!==e.length)throw new it;return m},t.prototype.getNumDataCodewords=function(){return this.numDataCodewords},t.prototype.getCodewords=function(){return this.codewords},t}(),fM=function(){function t(e){this.bytes=e,this.byteOffset=0,this.bitOffset=0}return t.prototype.getBitOffset=function(){return this.bitOffset},t.prototype.getByteOffset=function(){return this.byteOffset},t.prototype.readBits=function(e){if(e<1||e>32||e>this.available())throw new it(""+e);var n=0,r=this.bitOffset,i=this.byteOffset,a=this.bytes;if(r>0){var s=8-r,o=e<s?e:s,c=s-o,d=255>>8-o<<c;n=(a[i]&d)>>c,e-=o,r+=o,r===8&&(r=0,i++)}if(e>0){for(;e>=8;)n=n<<8|a[i]&255,i++,e-=8;if(e>0){var c=8-e,d=255>>c<<c;n=n<<e|(a[i]&d)>>c,r+=e}}return this.bitOffset=r,this.byteOffset=i,n},t.prototype.available=function(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset},t}(),Er;(function(t){t[t.PAD_ENCODE=0]="PAD_ENCODE",t[t.ASCII_ENCODE=1]="ASCII_ENCODE",t[t.C40_ENCODE=2]="C40_ENCODE",t[t.TEXT_ENCODE=3]="TEXT_ENCODE",t[t.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",t[t.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",t[t.BASE256_ENCODE=6]="BASE256_ENCODE"})(Er||(Er={}));var dz=function(){function t(){}return t.decode=function(e){var n=new fM(e),r=new Et,i=new Et,a=new Array,s=Er.ASCII_ENCODE;do if(s===Er.ASCII_ENCODE)s=this.decodeAsciiSegment(n,r,i);else{switch(s){case Er.C40_ENCODE:this.decodeC40Segment(n,r);break;case Er.TEXT_ENCODE:this.decodeTextSegment(n,r);break;case Er.ANSIX12_ENCODE:this.decodeAnsiX12Segment(n,r);break;case Er.EDIFACT_ENCODE:this.decodeEdifactSegment(n,r);break;case Er.BASE256_ENCODE:this.decodeBase256Segment(n,r,a);break;default:throw new Ve}s=Er.ASCII_ENCODE}while(s!==Er.PAD_ENCODE&&n.available()>0);return i.length()>0&&r.append(i.toString()),new hy(e,r.toString(),a.length===0?null:a,null)},t.decodeAsciiSegment=function(e,n,r){var i=!1;do{var a=e.readBits(8);if(a===0)throw new Ve;if(a<=128)return i&&(a+=128),n.append(String.fromCharCode(a-1)),Er.ASCII_ENCODE;if(a===129)return Er.PAD_ENCODE;if(a<=229){var s=a-130;s<10&&n.append("0"),n.append(""+s)}else switch(a){case 230:return Er.C40_ENCODE;case 231:return Er.BASE256_ENCODE;case 232:n.append("");break;case 233:case 234:break;case 235:i=!0;break;case 236:n.append("[)>05"),r.insert(0,"");break;case 237:n.append("[)>06"),r.insert(0,"");break;case 238:return Er.ANSIX12_ENCODE;case 239:return Er.TEXT_ENCODE;case 240:return Er.EDIFACT_ENCODE;case 241:break;default:if(a!==254||e.available()!==0)throw new Ve;break}}while(e.available()>0);return Er.ASCII_ENCODE},t.decodeC40Segment=function(e,n){var r=!1,i=[],a=0;do{if(e.available()===8)return;var s=e.readBits(8);if(s===254)return;this.parseTwoBytes(s,e.readBits(8),i);for(var o=0;o<3;o++){var c=i[o];switch(a){case 0:if(c<3)a=c+1;else if(c<this.C40_BASIC_SET_CHARS.length){var d=this.C40_BASIC_SET_CHARS[c];r?(n.append(String.fromCharCode(d.charCodeAt(0)+128)),r=!1):n.append(d)}else throw new Ve;break;case 1:r?(n.append(String.fromCharCode(c+128)),r=!1):n.append(String.fromCharCode(c)),a=0;break;case 2:if(c<this.C40_SHIFT2_SET_CHARS.length){var d=this.C40_SHIFT2_SET_CHARS[c];r?(n.append(String.fromCharCode(d.charCodeAt(0)+128)),r=!1):n.append(d)}else switch(c){case 27:n.append("");break;case 30:r=!0;break;default:throw new Ve}a=0;break;case 3:r?(n.append(String.fromCharCode(c+224)),r=!1):n.append(String.fromCharCode(c+96)),a=0;break;default:throw new Ve}}}while(e.available()>0)},t.decodeTextSegment=function(e,n){var r=!1,i=[],a=0;do{if(e.available()===8)return;var s=e.readBits(8);if(s===254)return;this.parseTwoBytes(s,e.readBits(8),i);for(var o=0;o<3;o++){var c=i[o];switch(a){case 0:if(c<3)a=c+1;else if(c<this.TEXT_BASIC_SET_CHARS.length){var d=this.TEXT_BASIC_SET_CHARS[c];r?(n.append(String.fromCharCode(d.charCodeAt(0)+128)),r=!1):n.append(d)}else throw new Ve;break;case 1:r?(n.append(String.fromCharCode(c+128)),r=!1):n.append(String.fromCharCode(c)),a=0;break;case 2:if(c<this.TEXT_SHIFT2_SET_CHARS.length){var d=this.TEXT_SHIFT2_SET_CHARS[c];r?(n.append(String.fromCharCode(d.charCodeAt(0)+128)),r=!1):n.append(d)}else switch(c){case 27:n.append("");break;case 30:r=!0;break;default:throw new Ve}a=0;break;case 3:if(c<this.TEXT_SHIFT3_SET_CHARS.length){var d=this.TEXT_SHIFT3_SET_CHARS[c];r?(n.append(String.fromCharCode(d.charCodeAt(0)+128)),r=!1):n.append(d),a=0}else throw new Ve;break;default:throw new Ve}}}while(e.available()>0)},t.decodeAnsiX12Segment=function(e,n){var r=[];do{if(e.available()===8)return;var i=e.readBits(8);if(i===254)return;this.parseTwoBytes(i,e.readBits(8),r);for(var a=0;a<3;a++){var s=r[a];switch(s){case 0:n.append("\r");break;case 1:n.append("*");break;case 2:n.append(">");break;case 3:n.append(" ");break;default:if(s<14)n.append(String.fromCharCode(s+44));else if(s<40)n.append(String.fromCharCode(s+51));else throw new Ve;break}}}while(e.available()>0)},t.parseTwoBytes=function(e,n,r){var i=(e<<8)+n-1,a=Math.floor(i/1600);r[0]=a,i-=a*1600,a=Math.floor(i/40),r[1]=a,r[2]=i-a*40},t.decodeEdifactSegment=function(e,n){do{if(e.available()<=16)return;for(var r=0;r<4;r++){var i=e.readBits(6);if(i===31){var a=8-e.getBitOffset();a!==8&&e.readBits(a);return}(i&32)===0&&(i|=64),n.append(String.fromCharCode(i))}}while(e.available()>0)},t.decodeBase256Segment=function(e,n,r){var i=1+e.getByteOffset(),a=this.unrandomize255State(e.readBits(8),i++),s;if(a===0?s=e.available()/8|0:a<250?s=a:s=250*(a-249)+this.unrandomize255State(e.readBits(8),i++),s<0)throw new Ve;for(var o=new Uint8Array(s),c=0;c<s;c++){if(e.available()<8)throw new Ve;o[c]=this.unrandomize255State(e.readBits(8),i++)}r.push(o);try{n.append(Oa.decode(o,Vt.ISO88591))}catch(d){throw new np("Platform does not support required encoding: "+d.message)}},t.unrandomize255State=function(e,n){var r=149*n%255+1,i=e-r;return i>=0?i:i+256},t.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],t.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],t.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],t.TEXT_SHIFT2_SET_CHARS=t.C40_SHIFT2_SET_CHARS,t.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""],t}(),fz=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},hz=function(){function t(){this.rsDecoder=new py(Gi.DATA_MATRIX_FIELD_256)}return t.prototype.decode=function(e){var n,r,i=new cz(e),a=i.getVersion(),s=i.readCodewords(),o=uz.getDataBlocks(s,a),c=0;try{for(var d=fz(o),f=d.next();!f.done;f=d.next()){var p=f.value;c+=p.getNumDataCodewords()}}catch(T){n={error:T}}finally{try{f&&!f.done&&(r=d.return)&&r.call(d)}finally{if(n)throw n.error}}for(var g=new Uint8Array(c),m=o.length,x=0;x<m;x++){var b=o[x],A=b.getCodewords(),E=b.getNumDataCodewords();this.correctErrors(A,E);for(var S=0;S<E;S++)g[S*m+x]=A[S]}return dz.decode(g)},t.prototype.correctErrors=function(e,n){var r=new Int32Array(e);try{this.rsDecoder.decode(r,e.length-n)}catch{throw new $r}for(var i=0;i<n;i++)e[i]=r[i]},t}(),pz=function(){function t(e){this.image=e,this.rectangleDetector=new _w(this.image)}return t.prototype.detect=function(){var e=this.rectangleDetector.detect(),n=this.detectSolid1(e);if(n=this.detectSolid2(n),n[3]=this.correctTopRight(n),!n[3])throw new _e;n=this.shiftToModuleCenter(n);var r=n[0],i=n[1],a=n[2],s=n[3],o=this.transitionsBetween(r,s)+1,c=this.transitionsBetween(a,s)+1;(o&1)===1&&(o+=1),(c&1)===1&&(c+=1),4*o<7*c&&4*c<7*o&&(o=c=Math.max(o,c));var d=t.sampleGrid(this.image,r,i,a,s,o,c);return new f_(d,[r,i,a,s])},t.shiftPoint=function(e,n,r){var i=(n.getX()-e.getX())/(r+1),a=(n.getY()-e.getY())/(r+1);return new Ke(e.getX()+i,e.getY()+a)},t.moveAway=function(e,n,r){var i=e.getX(),a=e.getY();return i<n?i-=1:i+=1,a<r?a-=1:a+=1,new Ke(i,a)},t.prototype.detectSolid1=function(e){var n=e[0],r=e[1],i=e[3],a=e[2],s=this.transitionsBetween(n,r),o=this.transitionsBetween(r,i),c=this.transitionsBetween(i,a),d=this.transitionsBetween(a,n),f=s,p=[a,n,r,i];return f>o&&(f=o,p[0]=n,p[1]=r,p[2]=i,p[3]=a),f>c&&(f=c,p[0]=r,p[1]=i,p[2]=a,p[3]=n),f>d&&(p[0]=i,p[1]=a,p[2]=n,p[3]=r),p},t.prototype.detectSolid2=function(e){var n=e[0],r=e[1],i=e[2],a=e[3],s=this.transitionsBetween(n,a),o=t.shiftPoint(r,i,(s+1)*4),c=t.shiftPoint(i,r,(s+1)*4),d=this.transitionsBetween(o,n),f=this.transitionsBetween(c,a);return d<f?(e[0]=n,e[1]=r,e[2]=i,e[3]=a):(e[0]=r,e[1]=i,e[2]=a,e[3]=n),e},t.prototype.correctTopRight=function(e){var n=e[0],r=e[1],i=e[2],a=e[3],s=this.transitionsBetween(n,a),o=this.transitionsBetween(r,a),c=t.shiftPoint(n,r,(o+1)*4),d=t.shiftPoint(i,r,(s+1)*4);s=this.transitionsBetween(c,a),o=this.transitionsBetween(d,a);var f=new Ke(a.getX()+(i.getX()-r.getX())/(s+1),a.getY()+(i.getY()-r.getY())/(s+1)),p=new Ke(a.getX()+(n.getX()-r.getX())/(o+1),a.getY()+(n.getY()-r.getY())/(o+1));if(!this.isValid(f))return this.isValid(p)?p:null;if(!this.isValid(p))return f;var g=this.transitionsBetween(c,f)+this.transitionsBetween(d,f),m=this.transitionsBetween(c,p)+this.transitionsBetween(d,p);return g>m?f:p},t.prototype.shiftToModuleCenter=function(e){var n=e[0],r=e[1],i=e[2],a=e[3],s=this.transitionsBetween(n,a)+1,o=this.transitionsBetween(i,a)+1,c=t.shiftPoint(n,r,o*4),d=t.shiftPoint(i,r,s*4);s=this.transitionsBetween(c,a)+1,o=this.transitionsBetween(d,a)+1,(s&1)===1&&(s+=1),(o&1)===1&&(o+=1);var f=(n.getX()+r.getX()+i.getX()+a.getX())/4,p=(n.getY()+r.getY()+i.getY()+a.getY())/4;n=t.moveAway(n,f,p),r=t.moveAway(r,f,p),i=t.moveAway(i,f,p),a=t.moveAway(a,f,p);var g,m;return c=t.shiftPoint(n,r,o*4),c=t.shiftPoint(c,a,s*4),g=t.shiftPoint(r,n,o*4),g=t.shiftPoint(g,i,s*4),d=t.shiftPoint(i,a,o*4),d=t.shiftPoint(d,r,s*4),m=t.shiftPoint(a,i,o*4),m=t.shiftPoint(m,n,s*4),[c,g,d,m]},t.prototype.isValid=function(e){return e.getX()>=0&&e.getX()<this.image.getWidth()&&e.getY()>0&&e.getY()<this.image.getHeight()},t.sampleGrid=function(e,n,r,i,a,s,o){var c=h_.getInstance();return c.sampleGrid(e,s,o,.5,.5,s-.5,.5,s-.5,o-.5,.5,o-.5,n.getX(),n.getY(),a.getX(),a.getY(),i.getX(),i.getY(),r.getX(),r.getY())},t.prototype.transitionsBetween=function(e,n){var r=Math.trunc(e.getX()),i=Math.trunc(e.getY()),a=Math.trunc(n.getX()),s=Math.trunc(n.getY()),o=Math.abs(s-i)>Math.abs(a-r);if(o){var c=r;r=i,i=c,c=a,a=s,s=c}for(var d=Math.abs(a-r),f=Math.abs(s-i),p=-d/2,g=i<s?1:-1,m=r<a?1:-1,x=0,b=this.image.get(o?i:r,o?r:i),A=r,E=i;A!==a;A+=m){var S=this.image.get(o?E:A,o?A:E);if(S!==b&&(x++,b=S),p+=f,p>0){if(E===s)break;E+=g,p-=d}}return x},t}(),Sw=function(){function t(){this.decoder=new hz}return t.prototype.decode=function(e,n){n===void 0&&(n=null);var r,i;if(n!=null&&n.has(Bn.PURE_BARCODE)){var a=t.extractPureBits(e.getBlackMatrix());r=this.decoder.decode(a),i=t.NO_POINTS}else{var s=new pz(e.getBlackMatrix()).detect();r=this.decoder.decode(s.getBits()),i=s.getPoints()}var o=r.getRawBytes(),c=new Ai(r.getText(),o,8*o.length,i,et.DATA_MATRIX,Tn.currentTimeMillis()),d=r.getByteSegments();d!=null&&c.putMetadata(oi.BYTE_SEGMENTS,d);var f=r.getECLevel();return f!=null&&c.putMetadata(oi.ERROR_CORRECTION_LEVEL,f),c},t.prototype.reset=function(){},t.extractPureBits=function(e){var n=e.getTopLeftOnBit(),r=e.getBottomRightOnBit();if(n==null||r==null)throw new _e;var i=this.moduleSize(n,e),a=n[1],s=r[1],o=n[0],c=r[0],d=(c-o+1)/i,f=(s-a+1)/i;if(d<=0||f<=0)throw new _e;var p=i/2;a+=p,o+=p;for(var g=new zs(d,f),m=0;m<f;m++)for(var x=a+m*i,b=0;b<d;b++)e.get(o+b*i,x)&&g.set(b,m);return g},t.moduleSize=function(e,n){for(var r=n.getWidth(),i=e[0],a=e[1];i<r&&n.get(i,a);)i++;if(i===r)throw new _e;var s=i-e[0];if(s===0)throw new _e;return s},t.NO_POINTS=[],t}(),gz=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}();(function(t){gz(e,t);function e(n){return n===void 0&&(n=500),t.call(this,new Sw,n)||this}return e})(bf);var Sd;(function(t){t[t.L=0]="L",t[t.M=1]="M",t[t.Q=2]="Q",t[t.H=3]="H"})(Sd||(Sd={}));var mz=function(){function t(e,n,r){this.value=e,this.stringValue=n,this.bits=r,t.FOR_BITS.set(r,this),t.FOR_VALUE.set(e,this)}return t.prototype.getValue=function(){return this.value},t.prototype.getBits=function(){return this.bits},t.fromString=function(e){switch(e){case"L":return t.L;case"M":return t.M;case"Q":return t.Q;case"H":return t.H;default:throw new za(e+"not available")}},t.prototype.toString=function(){return this.stringValue},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var n=e;return this.value===n.value},t.forBits=function(e){if(e<0||e>=t.FOR_BITS.size)throw new it;return t.FOR_BITS.get(e)},t.FOR_BITS=new Map,t.FOR_VALUE=new Map,t.L=new t(Sd.L,"L",1),t.M=new t(Sd.M,"M",0),t.Q=new t(Sd.Q,"Q",3),t.H=new t(Sd.H,"H",2),t}(),yz=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},hM=function(){function t(e){this.errorCorrectionLevel=mz.forBits(e>>3&3),this.dataMask=e&7}return t.numBitsDiffering=function(e,n){return It.bitCount(e^n)},t.decodeFormatInformation=function(e,n){var r=t.doDecodeFormatInformation(e,n);return r!==null?r:t.doDecodeFormatInformation(e^t.FORMAT_INFO_MASK_QR,n^t.FORMAT_INFO_MASK_QR)},t.doDecodeFormatInformation=function(e,n){var r,i,a=Number.MAX_SAFE_INTEGER,s=0;try{for(var o=yz(t.FORMAT_INFO_DECODE_LOOKUP),c=o.next();!c.done;c=o.next()){var d=c.value,f=d[0];if(f===e||f===n)return new t(d[1]);var p=t.numBitsDiffering(e,f);p<a&&(s=d[1],a=p),e!==n&&(p=t.numBitsDiffering(n,f),p<a&&(s=d[1],a=p))}}catch(g){r={error:g}}finally{try{c&&!c.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}return a<=3?new t(s):null},t.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},t.prototype.getDataMask=function(){return this.dataMask},t.prototype.hashCode=function(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var n=e;return this.errorCorrectionLevel===n.errorCorrectionLevel&&this.dataMask===n.dataMask},t.FORMAT_INFO_MASK_QR=21522,t.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])],t}(),vz=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ce=function(){function t(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];this.ecCodewordsPerBlock=e,this.ecBlocks=n}return t.prototype.getECCodewordsPerBlock=function(){return this.ecCodewordsPerBlock},t.prototype.getNumBlocks=function(){var e,n,r=0,i=this.ecBlocks;try{for(var a=vz(i),s=a.next();!s.done;s=a.next()){var o=s.value;r+=o.getCount()}}catch(c){e={error:c}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(e)throw e.error}}return r},t.prototype.getTotalECCodewords=function(){return this.ecCodewordsPerBlock*this.getNumBlocks()},t.prototype.getECBlocks=function(){return this.ecBlocks},t}(),Y=function(){function t(e,n){this.count=e,this.dataCodewords=n}return t.prototype.getCount=function(){return this.count},t.prototype.getDataCodewords=function(){return this.dataCodewords},t}(),xz=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},qc=function(){function t(e,n){for(var r,i,a=[],s=2;s<arguments.length;s++)a[s-2]=arguments[s];this.versionNumber=e,this.alignmentPatternCenters=n,this.ecBlocks=a;var o=0,c=a[0].getECCodewordsPerBlock(),d=a[0].getECBlocks();try{for(var f=xz(d),p=f.next();!p.done;p=f.next()){var g=p.value;o+=g.getCount()*(g.getDataCodewords()+c)}}catch(m){r={error:m}}finally{try{p&&!p.done&&(i=f.return)&&i.call(f)}finally{if(r)throw r.error}}this.totalCodewords=o}return t.prototype.getVersionNumber=function(){return this.versionNumber},t.prototype.getAlignmentPatternCenters=function(){return this.alignmentPatternCenters},t.prototype.getTotalCodewords=function(){return this.totalCodewords},t.prototype.getDimensionForVersion=function(){return 17+4*this.versionNumber},t.prototype.getECBlocksForLevel=function(e){return this.ecBlocks[e.getValue()]},t.getProvisionalVersionForDimension=function(e){if(e%4!==1)throw new Ve;try{return this.getVersionForNumber((e-17)/4)}catch{throw new Ve}},t.getVersionForNumber=function(e){if(e<1||e>40)throw new it;return t.VERSIONS[e-1]},t.decodeVersionInformation=function(e){for(var n=Number.MAX_SAFE_INTEGER,r=0,i=0;i<t.VERSION_DECODE_INFO.length;i++){var a=t.VERSION_DECODE_INFO[i];if(a===e)return t.getVersionForNumber(i+7);var s=hM.numBitsDiffering(e,a);s<n&&(r=i+7,n=s)}return n<=3?t.getVersionForNumber(r):null},t.prototype.buildFunctionPattern=function(){var e=this.getDimensionForVersion(),n=new zs(e);n.setRegion(0,0,9,9),n.setRegion(e-8,0,8,9),n.setRegion(0,e-8,9,8);for(var r=this.alignmentPatternCenters.length,i=0;i<r;i++)for(var a=this.alignmentPatternCenters[i]-2,s=0;s<r;s++)i===0&&(s===0||s===r-1)||i===r-1&&s===0||n.setRegion(this.alignmentPatternCenters[s]-2,a,5,5);return n.setRegion(6,9,1,e-17),n.setRegion(9,6,e-17,1),this.versionNumber>6&&(n.setRegion(e-11,0,3,6),n.setRegion(0,e-11,6,3)),n},t.prototype.toString=function(){return""+this.versionNumber},t.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),t.VERSIONS=[new t(1,new Int32Array(0),new ce(7,new Y(1,19)),new ce(10,new Y(1,16)),new ce(13,new Y(1,13)),new ce(17,new Y(1,9))),new t(2,Int32Array.from([6,18]),new ce(10,new Y(1,34)),new ce(16,new Y(1,28)),new ce(22,new Y(1,22)),new ce(28,new Y(1,16))),new t(3,Int32Array.from([6,22]),new ce(15,new Y(1,55)),new ce(26,new Y(1,44)),new ce(18,new Y(2,17)),new ce(22,new Y(2,13))),new t(4,Int32Array.from([6,26]),new ce(20,new Y(1,80)),new ce(18,new Y(2,32)),new ce(26,new Y(2,24)),new ce(16,new Y(4,9))),new t(5,Int32Array.from([6,30]),new ce(26,new Y(1,108)),new ce(24,new Y(2,43)),new ce(18,new Y(2,15),new Y(2,16)),new ce(22,new Y(2,11),new Y(2,12))),new t(6,Int32Array.from([6,34]),new ce(18,new Y(2,68)),new ce(16,new Y(4,27)),new ce(24,new Y(4,19)),new ce(28,new Y(4,15))),new t(7,Int32Array.from([6,22,38]),new ce(20,new Y(2,78)),new ce(18,new Y(4,31)),new ce(18,new Y(2,14),new Y(4,15)),new ce(26,new Y(4,13),new Y(1,14))),new t(8,Int32Array.from([6,24,42]),new ce(24,new Y(2,97)),new ce(22,new Y(2,38),new Y(2,39)),new ce(22,new Y(4,18),new Y(2,19)),new ce(26,new Y(4,14),new Y(2,15))),new t(9,Int32Array.from([6,26,46]),new ce(30,new Y(2,116)),new ce(22,new Y(3,36),new Y(2,37)),new ce(20,new Y(4,16),new Y(4,17)),new ce(24,new Y(4,12),new Y(4,13))),new t(10,Int32Array.from([6,28,50]),new ce(18,new Y(2,68),new Y(2,69)),new ce(26,new Y(4,43),new Y(1,44)),new ce(24,new Y(6,19),new Y(2,20)),new ce(28,new Y(6,15),new Y(2,16))),new t(11,Int32Array.from([6,30,54]),new ce(20,new Y(4,81)),new ce(30,new Y(1,50),new Y(4,51)),new ce(28,new Y(4,22),new Y(4,23)),new ce(24,new Y(3,12),new Y(8,13))),new t(12,Int32Array.from([6,32,58]),new ce(24,new Y(2,92),new Y(2,93)),new ce(22,new Y(6,36),new Y(2,37)),new ce(26,new Y(4,20),new Y(6,21)),new ce(28,new Y(7,14),new Y(4,15))),new t(13,Int32Array.from([6,34,62]),new ce(26,new Y(4,107)),new ce(22,new Y(8,37),new Y(1,38)),new ce(24,new Y(8,20),new Y(4,21)),new ce(22,new Y(12,11),new Y(4,12))),new t(14,Int32Array.from([6,26,46,66]),new ce(30,new Y(3,115),new Y(1,116)),new ce(24,new Y(4,40),new Y(5,41)),new ce(20,new Y(11,16),new Y(5,17)),new ce(24,new Y(11,12),new Y(5,13))),new t(15,Int32Array.from([6,26,48,70]),new ce(22,new Y(5,87),new Y(1,88)),new ce(24,new Y(5,41),new Y(5,42)),new ce(30,new Y(5,24),new Y(7,25)),new ce(24,new Y(11,12),new Y(7,13))),new t(16,Int32Array.from([6,26,50,74]),new ce(24,new Y(5,98),new Y(1,99)),new ce(28,new Y(7,45),new Y(3,46)),new ce(24,new Y(15,19),new Y(2,20)),new ce(30,new Y(3,15),new Y(13,16))),new t(17,Int32Array.from([6,30,54,78]),new ce(28,new Y(1,107),new Y(5,108)),new ce(28,new Y(10,46),new Y(1,47)),new ce(28,new Y(1,22),new Y(15,23)),new ce(28,new Y(2,14),new Y(17,15))),new t(18,Int32Array.from([6,30,56,82]),new ce(30,new Y(5,120),new Y(1,121)),new ce(26,new Y(9,43),new Y(4,44)),new ce(28,new Y(17,22),new Y(1,23)),new ce(28,new Y(2,14),new Y(19,15))),new t(19,Int32Array.from([6,30,58,86]),new ce(28,new Y(3,113),new Y(4,114)),new ce(26,new Y(3,44),new Y(11,45)),new ce(26,new Y(17,21),new Y(4,22)),new ce(26,new Y(9,13),new Y(16,14))),new t(20,Int32Array.from([6,34,62,90]),new ce(28,new Y(3,107),new Y(5,108)),new ce(26,new Y(3,41),new Y(13,42)),new ce(30,new Y(15,24),new Y(5,25)),new ce(28,new Y(15,15),new Y(10,16))),new t(21,Int32Array.from([6,28,50,72,94]),new ce(28,new Y(4,116),new Y(4,117)),new ce(26,new Y(17,42)),new ce(28,new Y(17,22),new Y(6,23)),new ce(30,new Y(19,16),new Y(6,17))),new t(22,Int32Array.from([6,26,50,74,98]),new ce(28,new Y(2,111),new Y(7,112)),new ce(28,new Y(17,46)),new ce(30,new Y(7,24),new Y(16,25)),new ce(24,new Y(34,13))),new t(23,Int32Array.from([6,30,54,78,102]),new ce(30,new Y(4,121),new Y(5,122)),new ce(28,new Y(4,47),new Y(14,48)),new ce(30,new Y(11,24),new Y(14,25)),new ce(30,new Y(16,15),new Y(14,16))),new t(24,Int32Array.from([6,28,54,80,106]),new ce(30,new Y(6,117),new Y(4,118)),new ce(28,new Y(6,45),new Y(14,46)),new ce(30,new Y(11,24),new Y(16,25)),new ce(30,new Y(30,16),new Y(2,17))),new t(25,Int32Array.from([6,32,58,84,110]),new ce(26,new Y(8,106),new Y(4,107)),new ce(28,new Y(8,47),new Y(13,48)),new ce(30,new Y(7,24),new Y(22,25)),new ce(30,new Y(22,15),new Y(13,16))),new t(26,Int32Array.from([6,30,58,86,114]),new ce(28,new Y(10,114),new Y(2,115)),new ce(28,new Y(19,46),new Y(4,47)),new ce(28,new Y(28,22),new Y(6,23)),new ce(30,new Y(33,16),new Y(4,17))),new t(27,Int32Array.from([6,34,62,90,118]),new ce(30,new Y(8,122),new Y(4,123)),new ce(28,new Y(22,45),new Y(3,46)),new ce(30,new Y(8,23),new Y(26,24)),new ce(30,new Y(12,15),new Y(28,16))),new t(28,Int32Array.from([6,26,50,74,98,122]),new ce(30,new Y(3,117),new Y(10,118)),new ce(28,new Y(3,45),new Y(23,46)),new ce(30,new Y(4,24),new Y(31,25)),new ce(30,new Y(11,15),new Y(31,16))),new t(29,Int32Array.from([6,30,54,78,102,126]),new ce(30,new Y(7,116),new Y(7,117)),new ce(28,new Y(21,45),new Y(7,46)),new ce(30,new Y(1,23),new Y(37,24)),new ce(30,new Y(19,15),new Y(26,16))),new t(30,Int32Array.from([6,26,52,78,104,130]),new ce(30,new Y(5,115),new Y(10,116)),new ce(28,new Y(19,47),new Y(10,48)),new ce(30,new Y(15,24),new Y(25,25)),new ce(30,new Y(23,15),new Y(25,16))),new t(31,Int32Array.from([6,30,56,82,108,134]),new ce(30,new Y(13,115),new Y(3,116)),new ce(28,new Y(2,46),new Y(29,47)),new ce(30,new Y(42,24),new Y(1,25)),new ce(30,new Y(23,15),new Y(28,16))),new t(32,Int32Array.from([6,34,60,86,112,138]),new ce(30,new Y(17,115)),new ce(28,new Y(10,46),new Y(23,47)),new ce(30,new Y(10,24),new Y(35,25)),new ce(30,new Y(19,15),new Y(35,16))),new t(33,Int32Array.from([6,30,58,86,114,142]),new ce(30,new Y(17,115),new Y(1,116)),new ce(28,new Y(14,46),new Y(21,47)),new ce(30,new Y(29,24),new Y(19,25)),new ce(30,new Y(11,15),new Y(46,16))),new t(34,Int32Array.from([6,34,62,90,118,146]),new ce(30,new Y(13,115),new Y(6,116)),new ce(28,new Y(14,46),new Y(23,47)),new ce(30,new Y(44,24),new Y(7,25)),new ce(30,new Y(59,16),new Y(1,17))),new t(35,Int32Array.from([6,30,54,78,102,126,150]),new ce(30,new Y(12,121),new Y(7,122)),new ce(28,new Y(12,47),new Y(26,48)),new ce(30,new Y(39,24),new Y(14,25)),new ce(30,new Y(22,15),new Y(41,16))),new t(36,Int32Array.from([6,24,50,76,102,128,154]),new ce(30,new Y(6,121),new Y(14,122)),new ce(28,new Y(6,47),new Y(34,48)),new ce(30,new Y(46,24),new Y(10,25)),new ce(30,new Y(2,15),new Y(64,16))),new t(37,Int32Array.from([6,28,54,80,106,132,158]),new ce(30,new Y(17,122),new Y(4,123)),new ce(28,new Y(29,46),new Y(14,47)),new ce(30,new Y(49,24),new Y(10,25)),new ce(30,new Y(24,15),new Y(46,16))),new t(38,Int32Array.from([6,32,58,84,110,136,162]),new ce(30,new Y(4,122),new Y(18,123)),new ce(28,new Y(13,46),new Y(32,47)),new ce(30,new Y(48,24),new Y(14,25)),new ce(30,new Y(42,15),new Y(32,16))),new t(39,Int32Array.from([6,26,54,82,110,138,166]),new ce(30,new Y(20,117),new Y(4,118)),new ce(28,new Y(40,47),new Y(7,48)),new ce(30,new Y(43,24),new Y(22,25)),new ce(30,new Y(10,15),new Y(67,16))),new t(40,Int32Array.from([6,30,58,86,114,142,170]),new ce(30,new Y(19,118),new Y(6,119)),new ce(28,new Y(18,47),new Y(31,48)),new ce(30,new Y(34,24),new Y(34,25)),new ce(30,new Y(20,15),new Y(61,16)))],t}(),Vr;(function(t){t[t.DATA_MASK_000=0]="DATA_MASK_000",t[t.DATA_MASK_001=1]="DATA_MASK_001",t[t.DATA_MASK_010=2]="DATA_MASK_010",t[t.DATA_MASK_011=3]="DATA_MASK_011",t[t.DATA_MASK_100=4]="DATA_MASK_100",t[t.DATA_MASK_101=5]="DATA_MASK_101",t[t.DATA_MASK_110=6]="DATA_MASK_110",t[t.DATA_MASK_111=7]="DATA_MASK_111"})(Vr||(Vr={}));var YI=function(){function t(e,n){this.value=e,this.isMasked=n}return t.prototype.unmaskBitMatrix=function(e,n){for(var r=0;r<n;r++)for(var i=0;i<n;i++)this.isMasked(r,i)&&e.flip(i,r)},t.values=new Map([[Vr.DATA_MASK_000,new t(Vr.DATA_MASK_000,function(e,n){return(e+n&1)===0})],[Vr.DATA_MASK_001,new t(Vr.DATA_MASK_001,function(e,n){return(e&1)===0})],[Vr.DATA_MASK_010,new t(Vr.DATA_MASK_010,function(e,n){return n%3===0})],[Vr.DATA_MASK_011,new t(Vr.DATA_MASK_011,function(e,n){return(e+n)%3===0})],[Vr.DATA_MASK_100,new t(Vr.DATA_MASK_100,function(e,n){return(Math.floor(e/2)+Math.floor(n/3)&1)===0})],[Vr.DATA_MASK_101,new t(Vr.DATA_MASK_101,function(e,n){return e*n%6===0})],[Vr.DATA_MASK_110,new t(Vr.DATA_MASK_110,function(e,n){return e*n%6<3})],[Vr.DATA_MASK_111,new t(Vr.DATA_MASK_111,function(e,n){return(e+n+e*n%3&1)===0})]]),t}(),wz=function(){function t(e){var n=e.getHeight();if(n<21||(n&3)!==1)throw new Ve;this.bitMatrix=e}return t.prototype.readFormatInformation=function(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;for(var e=0,n=0;n<6;n++)e=this.copyBit(n,8,e);e=this.copyBit(7,8,e),e=this.copyBit(8,8,e),e=this.copyBit(8,7,e);for(var r=5;r>=0;r--)e=this.copyBit(8,r,e);for(var i=this.bitMatrix.getHeight(),a=0,s=i-7,r=i-1;r>=s;r--)a=this.copyBit(8,r,a);for(var n=i-8;n<i;n++)a=this.copyBit(n,8,a);if(this.parsedFormatInfo=hM.decodeFormatInformation(e,a),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new Ve},t.prototype.readVersion=function(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;var e=this.bitMatrix.getHeight(),n=Math.floor((e-17)/4);if(n<=6)return qc.getVersionForNumber(n);for(var r=0,i=e-11,a=5;a>=0;a--)for(var s=e-9;s>=i;s--)r=this.copyBit(s,a,r);var o=qc.decodeVersionInformation(r);if(o!==null&&o.getDimensionForVersion()===e)return this.parsedVersion=o,o;r=0;for(var s=5;s>=0;s--)for(var a=e-9;a>=i;a--)r=this.copyBit(s,a,r);if(o=qc.decodeVersionInformation(r),o!==null&&o.getDimensionForVersion()===e)return this.parsedVersion=o,o;throw new Ve},t.prototype.copyBit=function(e,n,r){var i=this.isMirror?this.bitMatrix.get(n,e):this.bitMatrix.get(e,n);return i?r<<1|1:r<<1},t.prototype.readCodewords=function(){var e=this.readFormatInformation(),n=this.readVersion(),r=YI.values.get(e.getDataMask()),i=this.bitMatrix.getHeight();r.unmaskBitMatrix(this.bitMatrix,i);for(var a=n.buildFunctionPattern(),s=!0,o=new Uint8Array(n.getTotalCodewords()),c=0,d=0,f=0,p=i-1;p>0;p-=2){p===6&&p--;for(var g=0;g<i;g++)for(var m=s?i-1-g:g,x=0;x<2;x++)a.get(p-x,m)||(f++,d<<=1,this.bitMatrix.get(p-x,m)&&(d|=1),f===8&&(o[c++]=d,f=0,d=0));s=!s}if(c!==n.getTotalCodewords())throw new Ve;return o},t.prototype.remask=function(){if(this.parsedFormatInfo!==null){var e=YI.values.get(this.parsedFormatInfo.getDataMask()),n=this.bitMatrix.getHeight();e.unmaskBitMatrix(this.bitMatrix,n)}},t.prototype.setMirror=function(e){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=e},t.prototype.mirror=function(){for(var e=this.bitMatrix,n=0,r=e.getWidth();n<r;n++)for(var i=n+1,a=e.getHeight();i<a;i++)e.get(n,i)!==e.get(i,n)&&(e.flip(i,n),e.flip(n,i))},t}(),qI=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},bz=function(){function t(e,n){this.numDataCodewords=e,this.codewords=n}return t.getDataBlocks=function(e,n,r){var i,a,s,o;if(e.length!==n.getTotalCodewords())throw new it;var c=n.getECBlocksForLevel(r),d=0,f=c.getECBlocks();try{for(var p=qI(f),g=p.next();!g.done;g=p.next()){var m=g.value;d+=m.getCount()}}catch(j){i={error:j}}finally{try{g&&!g.done&&(a=p.return)&&a.call(p)}finally{if(i)throw i.error}}var x=new Array(d),b=0;try{for(var A=qI(f),E=A.next();!E.done;E=A.next())for(var m=E.value,S=0;S<m.getCount();S++){var T=m.getDataCodewords(),I=c.getECCodewordsPerBlock()+T;x[b++]=new t(T,new Uint8Array(I))}}catch(j){s={error:j}}finally{try{E&&!E.done&&(o=A.return)&&o.call(A)}finally{if(s)throw s.error}}for(var P=x[0].codewords.length,F=x.length-1;F>=0;){var M=x[F].codewords.length;if(M===P)break;F--}F++;for(var D=P-c.getECCodewordsPerBlock(),R=0,S=0;S<D;S++)for(var B=0;B<b;B++)x[B].codewords[S]=e[R++];for(var B=F;B<b;B++)x[B].codewords[D]=e[R++];for(var N=x[0].codewords.length,S=D;S<N;S++)for(var B=0;B<b;B++){var k=B<F?S:S+1;x[B].codewords[k]=e[R++]}return x},t.prototype.getNumDataCodewords=function(){return this.numDataCodewords},t.prototype.getCodewords=function(){return this.codewords},t}(),Ea;(function(t){t[t.TERMINATOR=0]="TERMINATOR",t[t.NUMERIC=1]="NUMERIC",t[t.ALPHANUMERIC=2]="ALPHANUMERIC",t[t.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",t[t.BYTE=4]="BYTE",t[t.ECI=5]="ECI",t[t.KANJI=6]="KANJI",t[t.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",t[t.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",t[t.HANZI=9]="HANZI"})(Ea||(Ea={}));var On=function(){function t(e,n,r,i){this.value=e,this.stringValue=n,this.characterCountBitsForVersions=r,this.bits=i,t.FOR_BITS.set(i,this),t.FOR_VALUE.set(e,this)}return t.forBits=function(e){var n=t.FOR_BITS.get(e);if(n===void 0)throw new it;return n},t.prototype.getCharacterCountBits=function(e){var n=e.getVersionNumber(),r;return n<=9?r=0:n<=26?r=1:r=2,this.characterCountBitsForVersions[r]},t.prototype.getValue=function(){return this.value},t.prototype.getBits=function(){return this.bits},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var n=e;return this.value===n.value},t.prototype.toString=function(){return this.stringValue},t.FOR_BITS=new Map,t.FOR_VALUE=new Map,t.TERMINATOR=new t(Ea.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),t.NUMERIC=new t(Ea.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),t.ALPHANUMERIC=new t(Ea.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),t.STRUCTURED_APPEND=new t(Ea.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),t.BYTE=new t(Ea.BYTE,"BYTE",Int32Array.from([8,16,16]),4),t.ECI=new t(Ea.ECI,"ECI",Int32Array.from([0,0,0]),7),t.KANJI=new t(Ea.KANJI,"KANJI",Int32Array.from([8,10,12]),8),t.FNC1_FIRST_POSITION=new t(Ea.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),t.FNC1_SECOND_POSITION=new t(Ea.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),t.HANZI=new t(Ea.HANZI,"HANZI",Int32Array.from([8,10,12]),13),t}(),_z=function(){function t(){}return t.decode=function(e,n,r,i){var a=new fM(e),s=new Et,o=new Array,c=-1,d=-1;try{var f=null,p=!1,g=void 0;do{if(a.available()<4)g=On.TERMINATOR;else{var m=a.readBits(4);g=On.forBits(m)}switch(g){case On.TERMINATOR:break;case On.FNC1_FIRST_POSITION:case On.FNC1_SECOND_POSITION:p=!0;break;case On.STRUCTURED_APPEND:if(a.available()<16)throw new Ve;c=a.readBits(8),d=a.readBits(8);break;case On.ECI:var x=t.parseECIValue(a);if(f=Dr.getCharacterSetECIByValue(x),f===null)throw new Ve;break;case On.HANZI:var b=a.readBits(4),A=a.readBits(g.getCharacterCountBits(n));b===t.GB2312_SUBSET&&t.decodeHanziSegment(a,s,A);break;default:var E=a.readBits(g.getCharacterCountBits(n));switch(g){case On.NUMERIC:t.decodeNumericSegment(a,s,E);break;case On.ALPHANUMERIC:t.decodeAlphanumericSegment(a,s,E,p);break;case On.BYTE:t.decodeByteSegment(a,s,E,f,o,i);break;case On.KANJI:t.decodeKanjiSegment(a,s,E);break;default:throw new Ve}break}}while(g!==On.TERMINATOR)}catch{throw new Ve}return new hy(e,s.toString(),o.length===0?null:o,r===null?null:r.toString(),c,d)},t.decodeHanziSegment=function(e,n,r){if(r*13>e.available())throw new Ve;for(var i=new Uint8Array(2*r),a=0;r>0;){var s=e.readBits(13),o=s/96<<8&4294967295|s%96;o<959?o+=41377:o+=42657,i[a]=o>>8&255,i[a+1]=o&255,a+=2,r--}try{n.append(Oa.decode(i,Vt.GB2312))}catch(c){throw new Ve(c)}},t.decodeKanjiSegment=function(e,n,r){if(r*13>e.available())throw new Ve;for(var i=new Uint8Array(2*r),a=0;r>0;){var s=e.readBits(13),o=s/192<<8&4294967295|s%192;o<7936?o+=33088:o+=49472,i[a]=o>>8,i[a+1]=o,a+=2,r--}try{n.append(Oa.decode(i,Vt.SHIFT_JIS))}catch(c){throw new Ve(c)}},t.decodeByteSegment=function(e,n,r,i,a,s){if(8*r>e.available())throw new Ve;for(var o=new Uint8Array(r),c=0;c<r;c++)o[c]=e.readBits(8);var d;i===null?d=Vt.guessEncoding(o,s):d=i.getName();try{n.append(Oa.decode(o,d))}catch(f){throw new Ve(f)}a.push(o)},t.toAlphaNumericChar=function(e){if(e>=t.ALPHANUMERIC_CHARS.length)throw new Ve;return t.ALPHANUMERIC_CHARS[e]},t.decodeAlphanumericSegment=function(e,n,r,i){for(var a=n.length();r>1;){if(e.available()<11)throw new Ve;var s=e.readBits(11);n.append(t.toAlphaNumericChar(Math.floor(s/45))),n.append(t.toAlphaNumericChar(s%45)),r-=2}if(r===1){if(e.available()<6)throw new Ve;n.append(t.toAlphaNumericChar(e.readBits(6)))}if(i)for(var o=a;o<n.length();o++)n.charAt(o)==="%"&&(o<n.length()-1&&n.charAt(o+1)==="%"?n.deleteCharAt(o+1):n.setCharAt(o,""))},t.decodeNumericSegment=function(e,n,r){for(;r>=3;){if(e.available()<10)throw new Ve;var i=e.readBits(10);if(i>=1e3)throw new Ve;n.append(t.toAlphaNumericChar(Math.floor(i/100))),n.append(t.toAlphaNumericChar(Math.floor(i/10)%10)),n.append(t.toAlphaNumericChar(i%10)),r-=3}if(r===2){if(e.available()<7)throw new Ve;var a=e.readBits(7);if(a>=100)throw new Ve;n.append(t.toAlphaNumericChar(Math.floor(a/10))),n.append(t.toAlphaNumericChar(a%10))}else if(r===1){if(e.available()<4)throw new Ve;var s=e.readBits(4);if(s>=10)throw new Ve;n.append(t.toAlphaNumericChar(s))}},t.parseECIValue=function(e){var n=e.readBits(8);if((n&128)===0)return n&127;if((n&192)===128){var r=e.readBits(8);return(n&63)<<8&4294967295|r}if((n&224)===192){var i=e.readBits(16);return(n&31)<<16&4294967295|i}throw new Ve},t.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",t.GB2312_SUBSET=1,t}(),pM=function(){function t(e){this.mirrored=e}return t.prototype.isMirrored=function(){return this.mirrored},t.prototype.applyMirroredCorrection=function(e){if(!(!this.mirrored||e===null||e.length<3)){var n=e[0];e[0]=e[2],e[2]=n}},t}(),XI=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Az=function(){function t(){this.rsDecoder=new py(Gi.QR_CODE_FIELD_256)}return t.prototype.decodeBooleanArray=function(e,n){return this.decodeBitMatrix(zs.parseFromBooleanArray(e),n)},t.prototype.decodeBitMatrix=function(e,n){var r=new wz(e),i=null;try{return this.decodeBitMatrixParser(r,n)}catch(s){i=s}try{r.remask(),r.setMirror(!0),r.readVersion(),r.readFormatInformation(),r.mirror();var a=this.decodeBitMatrixParser(r,n);return a.setOther(new pM(!0)),a}catch(s){throw i!==null?i:s}},t.prototype.decodeBitMatrixParser=function(e,n){var r,i,a,s,o=e.readVersion(),c=e.readFormatInformation().getErrorCorrectionLevel(),d=e.readCodewords(),f=bz.getDataBlocks(d,o,c),p=0;try{for(var g=XI(f),m=g.next();!m.done;m=g.next()){var x=m.value;p+=x.getNumDataCodewords()}}catch(F){r={error:F}}finally{try{m&&!m.done&&(i=g.return)&&i.call(g)}finally{if(r)throw r.error}}var b=new Uint8Array(p),A=0;try{for(var E=XI(f),S=E.next();!S.done;S=E.next()){var x=S.value,T=x.getCodewords(),I=x.getNumDataCodewords();this.correctErrors(T,I);for(var P=0;P<I;P++)b[A++]=T[P]}}catch(F){a={error:F}}finally{try{S&&!S.done&&(s=E.return)&&s.call(E)}finally{if(a)throw a.error}}return _z.decode(b,o,c,n)},t.prototype.correctErrors=function(e,n){var r=new Int32Array(e);try{this.rsDecoder.decode(r,e.length-n)}catch{throw new $r}for(var i=0;i<n;i++)e[i]=r[i]},t}(),Ez=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Sz=function(t){Ez(e,t);function e(n,r,i){var a=t.call(this,n,r)||this;return a.estimatedModuleSize=i,a}return e.prototype.aboutEquals=function(n,r,i){if(Math.abs(r-this.getY())<=n&&Math.abs(i-this.getX())<=n){var a=Math.abs(n-this.estimatedModuleSize);return a<=1||a<=this.estimatedModuleSize}return!1},e.prototype.combineEstimate=function(n,r,i){var a=(this.getX()+r)/2,s=(this.getY()+n)/2,o=(this.estimatedModuleSize+i)/2;return new e(a,s,o)},e}(Ke),Cz=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Tz=function(){function t(e,n,r,i,a,s,o){this.image=e,this.startX=n,this.startY=r,this.width=i,this.height=a,this.moduleSize=s,this.resultPointCallback=o,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}return t.prototype.find=function(){for(var e=this.startX,n=this.height,r=this.width,i=e+r,a=this.startY+n/2,s=new Int32Array(3),o=this.image,c=0;c<n;c++){var d=a+((c&1)===0?Math.floor((c+1)/2):-Math.floor((c+1)/2));s[0]=0,s[1]=0,s[2]=0;for(var f=e;f<i&&!o.get(f,d);)f++;for(var p=0;f<i;){if(o.get(f,d))if(p===1)s[1]++;else if(p===2){if(this.foundPatternCross(s)){var g=this.handlePossibleCenter(s,d,f);if(g!==null)return g}s[0]=s[2],s[1]=1,s[2]=0,p=1}else s[++p]++;else p===1&&p++,s[p]++;f++}if(this.foundPatternCross(s)){var g=this.handlePossibleCenter(s,d,i);if(g!==null)return g}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new _e},t.centerFromEnd=function(e,n){return n-e[2]-e[1]/2},t.prototype.foundPatternCross=function(e){for(var n=this.moduleSize,r=n/2,i=0;i<3;i++)if(Math.abs(n-e[i])>=r)return!1;return!0},t.prototype.crossCheckVertical=function(e,n,r,i){var a=this.image,s=a.getHeight(),o=this.crossCheckStateCount;o[0]=0,o[1]=0,o[2]=0;for(var c=e;c>=0&&a.get(n,c)&&o[1]<=r;)o[1]++,c--;if(c<0||o[1]>r)return NaN;for(;c>=0&&!a.get(n,c)&&o[0]<=r;)o[0]++,c--;if(o[0]>r)return NaN;for(c=e+1;c<s&&a.get(n,c)&&o[1]<=r;)o[1]++,c++;if(c===s||o[1]>r)return NaN;for(;c<s&&!a.get(n,c)&&o[2]<=r;)o[2]++,c++;if(o[2]>r)return NaN;var d=o[0]+o[1]+o[2];return 5*Math.abs(d-i)>=2*i?NaN:this.foundPatternCross(o)?t.centerFromEnd(o,c):NaN},t.prototype.handlePossibleCenter=function(e,n,r){var i,a,s=e[0]+e[1]+e[2],o=t.centerFromEnd(e,r),c=this.crossCheckVertical(n,o,2*e[1],s);if(!isNaN(c)){var d=(e[0]+e[1]+e[2])/3;try{for(var f=Cz(this.possibleCenters),p=f.next();!p.done;p=f.next()){var g=p.value;if(g.aboutEquals(d,c,o))return g.combineEstimate(c,o,d)}}catch(x){i={error:x}}finally{try{p&&!p.done&&(a=f.return)&&a.call(f)}finally{if(i)throw i.error}}var m=new Sz(o,c,d);this.possibleCenters.push(m),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(m)}return null},t}(),Iz=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Dz=function(t){Iz(e,t);function e(n,r,i,a){var s=t.call(this,n,r)||this;return s.estimatedModuleSize=i,s.count=a,a===void 0&&(s.count=1),s}return e.prototype.getEstimatedModuleSize=function(){return this.estimatedModuleSize},e.prototype.getCount=function(){return this.count},e.prototype.aboutEquals=function(n,r,i){if(Math.abs(r-this.getY())<=n&&Math.abs(i-this.getX())<=n){var a=Math.abs(n-this.estimatedModuleSize);return a<=1||a<=this.estimatedModuleSize}return!1},e.prototype.combineEstimate=function(n,r,i){var a=this.count+1,s=(this.count*this.getX()+r)/a,o=(this.count*this.getY()+n)/a,c=(this.count*this.estimatedModuleSize+i)/a;return new e(s,o,c,a)},e}(Ke),Rz=function(){function t(e){this.bottomLeft=e[0],this.topLeft=e[1],this.topRight=e[2]}return t.prototype.getBottomLeft=function(){return this.bottomLeft},t.prototype.getTopLeft=function(){return this.topLeft},t.prototype.getTopRight=function(){return this.topRight},t}(),Rh=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Oz=function(){function t(e,n){this.image=e,this.resultPointCallback=n,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=n}return t.prototype.getImage=function(){return this.image},t.prototype.getPossibleCenters=function(){return this.possibleCenters},t.prototype.find=function(e){var n=e!=null&&e.get(Bn.TRY_HARDER)!==void 0,r=e!=null&&e.get(Bn.PURE_BARCODE)!==void 0,i=this.image,a=i.getHeight(),s=i.getWidth(),o=Math.floor(3*a/(4*t.MAX_MODULES));(o<t.MIN_SKIP||n)&&(o=t.MIN_SKIP);for(var c=!1,d=new Int32Array(5),f=o-1;f<a&&!c;f+=o){d[0]=0,d[1]=0,d[2]=0,d[3]=0,d[4]=0;for(var p=0,g=0;g<s;g++)if(i.get(g,f))(p&1)===1&&p++,d[p]++;else if((p&1)===0)if(p===4)if(t.foundPatternCross(d)){var m=this.handlePossibleCenter(d,f,g,r);if(m===!0)if(o=2,this.hasSkipped===!0)c=this.haveMultiplyConfirmedCenters();else{var x=this.findRowSkip();x>d[2]&&(f+=x-d[2]-o,g=s-1)}else{d[0]=d[2],d[1]=d[3],d[2]=d[4],d[3]=1,d[4]=0,p=3;continue}p=0,d[0]=0,d[1]=0,d[2]=0,d[3]=0,d[4]=0}else d[0]=d[2],d[1]=d[3],d[2]=d[4],d[3]=1,d[4]=0,p=3;else d[++p]++;else d[p]++;if(t.foundPatternCross(d)){var m=this.handlePossibleCenter(d,f,s,r);m===!0&&(o=d[0],this.hasSkipped&&(c=this.haveMultiplyConfirmedCenters()))}}var b=this.selectBestPatterns();return Ke.orderBestPatterns(b),new Rz(b)},t.centerFromEnd=function(e,n){return n-e[4]-e[3]-e[2]/2},t.foundPatternCross=function(e){for(var n=0,r=0;r<5;r++){var i=e[r];if(i===0)return!1;n+=i}if(n<7)return!1;var a=n/7,s=a/2;return Math.abs(a-e[0])<s&&Math.abs(a-e[1])<s&&Math.abs(3*a-e[2])<3*s&&Math.abs(a-e[3])<s&&Math.abs(a-e[4])<s},t.prototype.getCrossCheckStateCount=function(){var e=this.crossCheckStateCount;return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e},t.prototype.crossCheckDiagonal=function(e,n,r,i){for(var a=this.getCrossCheckStateCount(),s=0,o=this.image;e>=s&&n>=s&&o.get(n-s,e-s);)a[2]++,s++;if(e<s||n<s)return!1;for(;e>=s&&n>=s&&!o.get(n-s,e-s)&&a[1]<=r;)a[1]++,s++;if(e<s||n<s||a[1]>r)return!1;for(;e>=s&&n>=s&&o.get(n-s,e-s)&&a[0]<=r;)a[0]++,s++;if(a[0]>r)return!1;var c=o.getHeight(),d=o.getWidth();for(s=1;e+s<c&&n+s<d&&o.get(n+s,e+s);)a[2]++,s++;if(e+s>=c||n+s>=d)return!1;for(;e+s<c&&n+s<d&&!o.get(n+s,e+s)&&a[3]<r;)a[3]++,s++;if(e+s>=c||n+s>=d||a[3]>=r)return!1;for(;e+s<c&&n+s<d&&o.get(n+s,e+s)&&a[4]<r;)a[4]++,s++;if(a[4]>=r)return!1;var f=a[0]+a[1]+a[2]+a[3]+a[4];return Math.abs(f-i)<2*i&&t.foundPatternCross(a)},t.prototype.crossCheckVertical=function(e,n,r,i){for(var a=this.image,s=a.getHeight(),o=this.getCrossCheckStateCount(),c=e;c>=0&&a.get(n,c);)o[2]++,c--;if(c<0)return NaN;for(;c>=0&&!a.get(n,c)&&o[1]<=r;)o[1]++,c--;if(c<0||o[1]>r)return NaN;for(;c>=0&&a.get(n,c)&&o[0]<=r;)o[0]++,c--;if(o[0]>r)return NaN;for(c=e+1;c<s&&a.get(n,c);)o[2]++,c++;if(c===s)return NaN;for(;c<s&&!a.get(n,c)&&o[3]<r;)o[3]++,c++;if(c===s||o[3]>=r)return NaN;for(;c<s&&a.get(n,c)&&o[4]<r;)o[4]++,c++;if(o[4]>=r)return NaN;var d=o[0]+o[1]+o[2]+o[3]+o[4];return 5*Math.abs(d-i)>=2*i?NaN:t.foundPatternCross(o)?t.centerFromEnd(o,c):NaN},t.prototype.crossCheckHorizontal=function(e,n,r,i){for(var a=this.image,s=a.getWidth(),o=this.getCrossCheckStateCount(),c=e;c>=0&&a.get(c,n);)o[2]++,c--;if(c<0)return NaN;for(;c>=0&&!a.get(c,n)&&o[1]<=r;)o[1]++,c--;if(c<0||o[1]>r)return NaN;for(;c>=0&&a.get(c,n)&&o[0]<=r;)o[0]++,c--;if(o[0]>r)return NaN;for(c=e+1;c<s&&a.get(c,n);)o[2]++,c++;if(c===s)return NaN;for(;c<s&&!a.get(c,n)&&o[3]<r;)o[3]++,c++;if(c===s||o[3]>=r)return NaN;for(;c<s&&a.get(c,n)&&o[4]<r;)o[4]++,c++;if(o[4]>=r)return NaN;var d=o[0]+o[1]+o[2]+o[3]+o[4];return 5*Math.abs(d-i)>=i?NaN:t.foundPatternCross(o)?t.centerFromEnd(o,c):NaN},t.prototype.handlePossibleCenter=function(e,n,r,i){var a=e[0]+e[1]+e[2]+e[3]+e[4],s=t.centerFromEnd(e,r),o=this.crossCheckVertical(n,Math.floor(s),e[2],a);if(!isNaN(o)&&(s=this.crossCheckHorizontal(Math.floor(s),Math.floor(o),e[2],a),!isNaN(s)&&(!i||this.crossCheckDiagonal(Math.floor(o),Math.floor(s),e[2],a)))){for(var c=a/7,d=!1,f=this.possibleCenters,p=0,g=f.length;p<g;p++){var m=f[p];if(m.aboutEquals(c,o,s)){f[p]=m.combineEstimate(o,s,c),d=!0;break}}if(!d){var x=new Dz(s,o,c);f.push(x),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(x)}return!0}return!1},t.prototype.findRowSkip=function(){var e,n,r=this.possibleCenters.length;if(r<=1)return 0;var i=null;try{for(var a=Rh(this.possibleCenters),s=a.next();!s.done;s=a.next()){var o=s.value;if(o.getCount()>=t.CENTER_QUORUM)if(i==null)i=o;else return this.hasSkipped=!0,Math.floor((Math.abs(i.getX()-o.getX())-Math.abs(i.getY()-o.getY()))/2)}}catch(c){e={error:c}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(e)throw e.error}}return 0},t.prototype.haveMultiplyConfirmedCenters=function(){var e,n,r,i,a=0,s=0,o=this.possibleCenters.length;try{for(var c=Rh(this.possibleCenters),d=c.next();!d.done;d=c.next()){var f=d.value;f.getCount()>=t.CENTER_QUORUM&&(a++,s+=f.getEstimatedModuleSize())}}catch(b){e={error:b}}finally{try{d&&!d.done&&(n=c.return)&&n.call(c)}finally{if(e)throw e.error}}if(a<3)return!1;var p=s/o,g=0;try{for(var m=Rh(this.possibleCenters),x=m.next();!x.done;x=m.next()){var f=x.value;g+=Math.abs(f.getEstimatedModuleSize()-p)}}catch(b){r={error:b}}finally{try{x&&!x.done&&(i=m.return)&&i.call(m)}finally{if(r)throw r.error}}return g<=.05*s},t.prototype.selectBestPatterns=function(){var e,n,r,i,a=this.possibleCenters.length;if(a<3)throw new _e;var s=this.possibleCenters,o;if(a>3){var c=0,d=0;try{for(var f=Rh(this.possibleCenters),p=f.next();!p.done;p=f.next()){var g=p.value,m=g.getEstimatedModuleSize();c+=m,d+=m*m}}catch(P){e={error:P}}finally{try{p&&!p.done&&(n=f.return)&&n.call(f)}finally{if(e)throw e.error}}o=c/a;var x=Math.sqrt(d/a-o*o);s.sort(function(P,F){var M=Math.abs(F.getEstimatedModuleSize()-o),D=Math.abs(P.getEstimatedModuleSize()-o);return M<D?-1:M>D?1:0});for(var b=Math.max(.2*o,x),A=0;A<s.length&&s.length>3;A++){var E=s[A];Math.abs(E.getEstimatedModuleSize()-o)>b&&(s.splice(A,1),A--)}}if(s.length>3){var c=0;try{for(var S=Rh(s),T=S.next();!T.done;T=S.next()){var I=T.value;c+=I.getEstimatedModuleSize()}}catch(F){r={error:F}}finally{try{T&&!T.done&&(i=S.return)&&i.call(S)}finally{if(r)throw r.error}}o=c/s.length,s.sort(function(F,M){if(M.getCount()===F.getCount()){var D=Math.abs(M.getEstimatedModuleSize()-o),R=Math.abs(F.getEstimatedModuleSize()-o);return D<R?1:D>R?-1:0}else return M.getCount()-F.getCount()}),s.splice(3)}return[s[0],s[1],s[2]]},t.CENTER_QUORUM=2,t.MIN_SKIP=3,t.MAX_MODULES=57,t}(),Mz=function(){function t(e){this.image=e}return t.prototype.getImage=function(){return this.image},t.prototype.getResultPointCallback=function(){return this.resultPointCallback},t.prototype.detect=function(e){this.resultPointCallback=e==null?null:e.get(Bn.NEED_RESULT_POINT_CALLBACK);var n=new Oz(this.image,this.resultPointCallback),r=n.find(e);return this.processFinderPatternInfo(r)},t.prototype.processFinderPatternInfo=function(e){var n=e.getTopLeft(),r=e.getTopRight(),i=e.getBottomLeft(),a=this.calculateModuleSize(n,r,i);if(a<1)throw new _e("No pattern found in proccess finder.");var s=t.computeDimension(n,r,i,a),o=qc.getProvisionalVersionForDimension(s),c=o.getDimensionForVersion()-7,d=null;if(o.getAlignmentPatternCenters().length>0)for(var f=r.getX()-n.getX()+i.getX(),p=r.getY()-n.getY()+i.getY(),g=1-3/c,m=Math.floor(n.getX()+g*(f-n.getX())),x=Math.floor(n.getY()+g*(p-n.getY())),b=4;b<=16;b<<=1)try{d=this.findAlignmentInRegion(a,m,x,b);break}catch(T){if(!(T instanceof _e))throw T}var A=t.createTransform(n,r,i,d,s),E=t.sampleGrid(this.image,A,s),S;return d===null?S=[i,n,r]:S=[i,n,r,d],new f_(E,S)},t.createTransform=function(e,n,r,i,a){var s=a-3.5,o,c,d,f;return i!==null?(o=i.getX(),c=i.getY(),d=s-3,f=d):(o=n.getX()-e.getX()+r.getX(),c=n.getY()-e.getY()+r.getY(),d=s,f=s),lM.quadrilateralToQuadrilateral(3.5,3.5,s,3.5,d,f,3.5,s,e.getX(),e.getY(),n.getX(),n.getY(),o,c,r.getX(),r.getY())},t.sampleGrid=function(e,n,r){var i=h_.getInstance();return i.sampleGridWithTransform(e,r,r,n)},t.computeDimension=function(e,n,r,i){var a=Gt.round(Ke.distance(e,n)/i),s=Gt.round(Ke.distance(e,r)/i),o=Math.floor((a+s)/2)+7;switch(o&3){case 0:o++;break;case 2:o--;break;case 3:throw new _e("Dimensions could be not found.")}return o},t.prototype.calculateModuleSize=function(e,n,r){return(this.calculateModuleSizeOneWay(e,n)+this.calculateModuleSizeOneWay(e,r))/2},t.prototype.calculateModuleSizeOneWay=function(e,n){var r=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(e.getX()),Math.floor(e.getY()),Math.floor(n.getX()),Math.floor(n.getY())),i=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(n.getX()),Math.floor(n.getY()),Math.floor(e.getX()),Math.floor(e.getY()));return isNaN(r)?i/7:isNaN(i)?r/7:(r+i)/14},t.prototype.sizeOfBlackWhiteBlackRunBothWays=function(e,n,r,i){var a=this.sizeOfBlackWhiteBlackRun(e,n,r,i),s=1,o=e-(r-e);o<0?(s=e/(e-o),o=0):o>=this.image.getWidth()&&(s=(this.image.getWidth()-1-e)/(o-e),o=this.image.getWidth()-1);var c=Math.floor(n-(i-n)*s);return s=1,c<0?(s=n/(n-c),c=0):c>=this.image.getHeight()&&(s=(this.image.getHeight()-1-n)/(c-n),c=this.image.getHeight()-1),o=Math.floor(e+(o-e)*s),a+=this.sizeOfBlackWhiteBlackRun(e,n,o,c),a-1},t.prototype.sizeOfBlackWhiteBlackRun=function(e,n,r,i){var a=Math.abs(i-n)>Math.abs(r-e);if(a){var s=e;e=n,n=s,s=r,r=i,i=s}for(var o=Math.abs(r-e),c=Math.abs(i-n),d=-o/2,f=e<r?1:-1,p=n<i?1:-1,g=0,m=r+f,x=e,b=n;x!==m;x+=f){var A=a?b:x,E=a?x:b;if(g===1===this.image.get(A,E)){if(g===2)return Gt.distance(x,b,e,n);g++}if(d+=c,d>0){if(b===i)break;b+=p,d-=o}}return g===2?Gt.distance(r+f,i,e,n):NaN},t.prototype.findAlignmentInRegion=function(e,n,r,i){var a=Math.floor(i*e),s=Math.max(0,n-a),o=Math.min(this.image.getWidth()-1,n+a);if(o-s<e*3)throw new _e("Alignment top exceeds estimated module size.");var c=Math.max(0,r-a),d=Math.min(this.image.getHeight()-1,r+a);if(d-c<e*3)throw new _e("Alignment bottom exceeds estimated module size.");var f=new Tz(this.image,s,c,o-s,d-c,e,this.resultPointCallback);return f.find()},t}(),Cw=function(){function t(){this.decoder=new Az}return t.prototype.getDecoder=function(){return this.decoder},t.prototype.decode=function(e,n){var r,i;if(n!=null&&n.get(Bn.PURE_BARCODE)!==void 0){var a=t.extractPureBits(e.getBlackMatrix());r=this.decoder.decodeBitMatrix(a,n),i=t.NO_POINTS}else{var s=new Mz(e.getBlackMatrix()).detect(n);r=this.decoder.decodeBitMatrix(s.getBits(),n),i=s.getPoints()}r.getOther()instanceof pM&&r.getOther().applyMirroredCorrection(i);var o=new Ai(r.getText(),r.getRawBytes(),void 0,i,et.QR_CODE,void 0),c=r.getByteSegments();c!==null&&o.putMetadata(oi.BYTE_SEGMENTS,c);var d=r.getECLevel();return d!==null&&o.putMetadata(oi.ERROR_CORRECTION_LEVEL,d),r.hasStructuredAppend()&&(o.putMetadata(oi.STRUCTURED_APPEND_SEQUENCE,r.getStructuredAppendSequenceNumber()),o.putMetadata(oi.STRUCTURED_APPEND_PARITY,r.getStructuredAppendParity())),o},t.prototype.reset=function(){},t.extractPureBits=function(e){var n=e.getTopLeftOnBit(),r=e.getBottomRightOnBit();if(n===null||r===null)throw new _e;var i=this.moduleSize(n,e),a=n[1],s=r[1],o=n[0],c=r[0];if(o>=c||a>=s)throw new _e;if(s-a!==c-o&&(c=o+(s-a),c>=e.getWidth()))throw new _e;var d=Math.round((c-o+1)/i),f=Math.round((s-a+1)/i);if(d<=0||f<=0)throw new _e;if(f!==d)throw new _e;var p=Math.floor(i/2);a+=p,o+=p;var g=o+Math.floor((d-1)*i)-c;if(g>0){if(g>p)throw new _e;o-=g}var m=a+Math.floor((f-1)*i)-s;if(m>0){if(m>p)throw new _e;a-=m}for(var x=new zs(d,f),b=0;b<f;b++)for(var A=a+Math.floor(b*i),E=0;E<d;E++)e.get(o+Math.floor(E*i),A)&&x.set(E,b);return x},t.moduleSize=function(e,n){for(var r=n.getHeight(),i=n.getWidth(),a=e[0],s=e[1],o=!0,c=0;a<i&&s<r;){if(o!==n.get(a,s)){if(++c===5)break;o=!o}a++,s++}if(a===i||s===r)throw new _e;return(a-e[0])/7},t.NO_POINTS=new Array,t}(),Pz=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},zt=function(){function t(){}return t.prototype.PDF417Common=function(){},t.getBitCountSum=function(e){return Gt.sum(e)},t.toIntArray=function(e){var n,r;if(e==null||!e.length)return t.EMPTY_INT_ARRAY;var i=new Int32Array(e.length),a=0;try{for(var s=Pz(e),o=s.next();!o.done;o=s.next()){var c=o.value;i[a++]=c}}catch(d){n={error:d}}finally{try{o&&!o.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}return i},t.getCodeword=function(e){var n=Rr.binarySearch(t.SYMBOL_TABLE,e&262143);return n<0?-1:(t.CODEWORD_TABLE[n]-1)%t.NUMBER_OF_CODEWORDS},t.NUMBER_OF_CODEWORDS=929,t.MAX_CODEWORDS_IN_BARCODE=t.NUMBER_OF_CODEWORDS-1,t.MIN_ROWS_IN_BARCODE=3,t.MAX_ROWS_IN_BARCODE=90,t.MODULES_IN_CODEWORD=17,t.MODULES_IN_STOP_PATTERN=18,t.BARS_IN_MODULE=8,t.EMPTY_INT_ARRAY=new Int32Array([]),t.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),t.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]),t}(),kz=function(){function t(e,n){this.bits=e,this.points=n}return t.prototype.getBits=function(){return this.bits},t.prototype.getPoints=function(){return this.points},t}(),Nz=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Lz=function(){function t(){}return t.detectMultiple=function(e,n,r){var i=e.getBlackMatrix(),a=t.detect(r,i);return a.length||(i=i.clone(),i.rotate180(),a=t.detect(r,i)),new kz(i,a)},t.detect=function(e,n){for(var r,i,a=new Array,s=0,o=0,c=!1;s<n.getHeight();){var d=t.findVertices(n,s,o);if(d[0]==null&&d[3]==null){if(!c)break;c=!1,o=0;try{for(var f=(r=void 0,Nz(a)),p=f.next();!p.done;p=f.next()){var g=p.value;g[1]!=null&&(s=Math.trunc(Math.max(s,g[1].getY()))),g[3]!=null&&(s=Math.max(s,Math.trunc(g[3].getY())))}}catch(m){r={error:m}}finally{try{p&&!p.done&&(i=f.return)&&i.call(f)}finally{if(r)throw r.error}}s+=t.ROW_STEP;continue}if(c=!0,a.push(d),!e)break;d[2]!=null?(o=Math.trunc(d[2].getX()),s=Math.trunc(d[2].getY())):(o=Math.trunc(d[4].getX()),s=Math.trunc(d[4].getY()))}return a},t.findVertices=function(e,n,r){var i=e.getHeight(),a=e.getWidth(),s=new Array(8);return t.copyToResult(s,t.findRowsWithPattern(e,i,a,n,r,t.START_PATTERN),t.INDEXES_START_PATTERN),s[4]!=null&&(r=Math.trunc(s[4].getX()),n=Math.trunc(s[4].getY())),t.copyToResult(s,t.findRowsWithPattern(e,i,a,n,r,t.STOP_PATTERN),t.INDEXES_STOP_PATTERN),s},t.copyToResult=function(e,n,r){for(var i=0;i<r.length;i++)e[r[i]]=n[i]},t.findRowsWithPattern=function(e,n,r,i,a,s){for(var o=new Array(4),c=!1,d=new Int32Array(s.length);i<n;i+=t.ROW_STEP){var f=t.findGuardPattern(e,a,i,r,!1,s,d);if(f!=null){for(;i>0;){var p=t.findGuardPattern(e,a,--i,r,!1,s,d);if(p!=null)f=p;else{i++;break}}o[0]=new Ke(f[0],i),o[1]=new Ke(f[1],i),c=!0;break}}var g=i+1;if(c){for(var m=0,p=Int32Array.from([Math.trunc(o[0].getX()),Math.trunc(o[1].getX())]);g<n;g++){var f=t.findGuardPattern(e,p[0],g,r,!1,s,d);if(f!=null&&Math.abs(p[0]-f[0])<t.MAX_PATTERN_DRIFT&&Math.abs(p[1]-f[1])<t.MAX_PATTERN_DRIFT)p=f,m=0;else{if(m>t.SKIPPED_ROW_COUNT_MAX)break;m++}}g-=m+1,o[2]=new Ke(p[0],g),o[3]=new Ke(p[1],g)}return g-i<t.BARCODE_MIN_HEIGHT&&Rr.fill(o,null),o},t.findGuardPattern=function(e,n,r,i,a,s,o){Rr.fillWithin(o,0,o.length,0);for(var c=n,d=0;e.get(c,r)&&c>0&&d++<t.MAX_PIXEL_DRIFT;)c--;for(var f=c,p=0,g=s.length,m=a;f<i;f++){var x=e.get(f,r);if(x!==m)o[p]++;else{if(p===g-1){if(t.patternMatchVariance(o,s,t.MAX_INDIVIDUAL_VARIANCE)<t.MAX_AVG_VARIANCE)return new Int32Array([c,f]);c+=o[0]+o[1],Tn.arraycopy(o,2,o,0,p-1),o[p-1]=0,o[p]=0,p--}else p++;o[p]=1,m=!m}}return p===g-1&&t.patternMatchVariance(o,s,t.MAX_INDIVIDUAL_VARIANCE)<t.MAX_AVG_VARIANCE?new Int32Array([c,f-1]):null},t.patternMatchVariance=function(e,n,r){for(var i=e.length,a=0,s=0,o=0;o<i;o++)a+=e[o],s+=n[o];if(a<s)return 1/0;var c=a/s;r*=c;for(var d=0,f=0;f<i;f++){var p=e[f],g=n[f]*c,m=p>g?p-g:g-p;if(m>r)return 1/0;d+=m}return d/a},t.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),t.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),t.MAX_AVG_VARIANCE=.42,t.MAX_INDIVIDUAL_VARIANCE=.8,t.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),t.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),t.MAX_PIXEL_DRIFT=3,t.MAX_PATTERN_DRIFT=5,t.SKIPPED_ROW_COUNT_MAX=25,t.ROW_STEP=5,t.BARCODE_MIN_HEIGHT=10,t}(),Bz=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},zc=function(){function t(e,n){if(n.length===0)throw new it;this.field=e;var r=n.length;if(r>1&&n[0]===0){for(var i=1;i<r&&n[i]===0;)i++;i===r?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(r-i),Tn.arraycopy(n,i,this.coefficients,0,this.coefficients.length))}else this.coefficients=n}return t.prototype.getCoefficients=function(){return this.coefficients},t.prototype.getDegree=function(){return this.coefficients.length-1},t.prototype.isZero=function(){return this.coefficients[0]===0},t.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},t.prototype.evaluateAt=function(e){var n,r;if(e===0)return this.getCoefficient(0);if(e===1){var i=0;try{for(var a=Bz(this.coefficients),s=a.next();!s.done;s=a.next()){var o=s.value;i=this.field.add(i,o)}}catch(p){n={error:p}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}return i}for(var c=this.coefficients[0],d=this.coefficients.length,f=1;f<d;f++)c=this.field.add(this.field.multiply(e,c),this.coefficients[f]);return c},t.prototype.add=function(e){if(!this.field.equals(e.field))throw new it("ModulusPolys do not have same ModulusGF field");if(this.isZero())return e;if(e.isZero())return this;var n=this.coefficients,r=e.coefficients;if(n.length>r.length){var i=n;n=r,r=i}var a=new Int32Array(r.length),s=r.length-n.length;Tn.arraycopy(r,0,a,0,s);for(var o=s;o<r.length;o++)a[o]=this.field.add(n[o-s],r[o]);return new t(this.field,a)},t.prototype.subtract=function(e){if(!this.field.equals(e.field))throw new it("ModulusPolys do not have same ModulusGF field");return e.isZero()?this:this.add(e.negative())},t.prototype.multiply=function(e){return e instanceof t?this.multiplyOther(e):this.multiplyScalar(e)},t.prototype.multiplyOther=function(e){if(!this.field.equals(e.field))throw new it("ModulusPolys do not have same ModulusGF field");if(this.isZero()||e.isZero())return new t(this.field,new Int32Array([0]));for(var n=this.coefficients,r=n.length,i=e.coefficients,a=i.length,s=new Int32Array(r+a-1),o=0;o<r;o++)for(var c=n[o],d=0;d<a;d++)s[o+d]=this.field.add(s[o+d],this.field.multiply(c,i[d]));return new t(this.field,s)},t.prototype.negative=function(){for(var e=this.coefficients.length,n=new Int32Array(e),r=0;r<e;r++)n[r]=this.field.subtract(0,this.coefficients[r]);return new t(this.field,n)},t.prototype.multiplyScalar=function(e){if(e===0)return new t(this.field,new Int32Array([0]));if(e===1)return this;for(var n=this.coefficients.length,r=new Int32Array(n),i=0;i<n;i++)r[i]=this.field.multiply(this.coefficients[i],e);return new t(this.field,r)},t.prototype.multiplyByMonomial=function(e,n){if(e<0)throw new it;if(n===0)return new t(this.field,new Int32Array([0]));for(var r=this.coefficients.length,i=new Int32Array(r+e),a=0;a<r;a++)i[a]=this.field.multiply(this.coefficients[a],n);return new t(this.field,i)},t.prototype.toString=function(){for(var e=new Et,n=this.getDegree();n>=0;n--){var r=this.getCoefficient(n);r!==0&&(r<0?(e.append(" - "),r=-r):e.length()>0&&e.append(" + "),(n===0||r!==1)&&e.append(r),n!==0&&(n===1?e.append("x"):(e.append("x^"),e.append(n))))}return e.toString()},t}(),Fz=function(){function t(){}return t.prototype.add=function(e,n){return(e+n)%this.modulus},t.prototype.subtract=function(e,n){return(this.modulus+e-n)%this.modulus},t.prototype.exp=function(e){return this.expTable[e]},t.prototype.log=function(e){if(e===0)throw new it;return this.logTable[e]},t.prototype.inverse=function(e){if(e===0)throw new oM;return this.expTable[this.modulus-this.logTable[e]-1]},t.prototype.multiply=function(e,n){return e===0||n===0?0:this.expTable[(this.logTable[e]+this.logTable[n])%(this.modulus-1)]},t.prototype.getSize=function(){return this.modulus},t.prototype.equals=function(e){return e===this},t}(),jz=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Vz=function(t){jz(e,t);function e(n,r){var i=t.call(this)||this;i.modulus=n,i.expTable=new Int32Array(n),i.logTable=new Int32Array(n);for(var a=1,s=0;s<n;s++)i.expTable[s]=a,a=a*r%n;for(var s=0;s<n-1;s++)i.logTable[i.expTable[s]]=s;return i.zero=new zc(i,new Int32Array([0])),i.one=new zc(i,new Int32Array([1])),i}return e.prototype.getZero=function(){return this.zero},e.prototype.getOne=function(){return this.one},e.prototype.buildMonomial=function(n,r){if(n<0)throw new it;if(r===0)return this.zero;var i=new Int32Array(n+1);return i[0]=r,new zc(this,i)},e.PDF417_GF=new e(zt.NUMBER_OF_CODEWORDS,3),e}(Fz),Uz=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Hz=function(){function t(){this.field=Vz.PDF417_GF}return t.prototype.decode=function(e,n,r){for(var i,a,s=new zc(this.field,e),o=new Int32Array(n),c=!1,d=n;d>0;d--){var f=s.evaluateAt(this.field.exp(d));o[n-d]=f,f!==0&&(c=!0)}if(!c)return 0;var p=this.field.getOne();if(r!=null)try{for(var g=Uz(r),m=g.next();!m.done;m=g.next()){var x=m.value,b=this.field.exp(e.length-1-x),A=new zc(this.field,new Int32Array([this.field.subtract(0,b),1]));p=p.multiply(A)}}catch(D){i={error:D}}finally{try{m&&!m.done&&(a=g.return)&&a.call(g)}finally{if(i)throw i.error}}for(var E=new zc(this.field,o),S=this.runEuclideanAlgorithm(this.field.buildMonomial(n,1),E,n),T=S[0],I=S[1],P=this.findErrorLocations(T),F=this.findErrorMagnitudes(I,T,P),d=0;d<P.length;d++){var M=e.length-1-this.field.log(P[d]);if(M<0)throw $r.getChecksumInstance();e[M]=this.field.subtract(e[M],F[d])}return P.length},t.prototype.runEuclideanAlgorithm=function(e,n,r){if(e.getDegree()<n.getDegree()){var i=e;e=n,n=i}for(var a=e,s=n,o=this.field.getZero(),c=this.field.getOne();s.getDegree()>=Math.round(r/2);){var d=a,f=o;if(a=s,o=c,a.isZero())throw $r.getChecksumInstance();s=d;for(var p=this.field.getZero(),g=a.getCoefficient(a.getDegree()),m=this.field.inverse(g);s.getDegree()>=a.getDegree()&&!s.isZero();){var x=s.getDegree()-a.getDegree(),b=this.field.multiply(s.getCoefficient(s.getDegree()),m);p=p.add(this.field.buildMonomial(x,b)),s=s.subtract(a.multiplyByMonomial(x,b))}c=p.multiply(o).subtract(f).negative()}var A=c.getCoefficient(0);if(A===0)throw $r.getChecksumInstance();var E=this.field.inverse(A),S=c.multiply(E),T=s.multiply(E);return[S,T]},t.prototype.findErrorLocations=function(e){for(var n=e.getDegree(),r=new Int32Array(n),i=0,a=1;a<this.field.getSize()&&i<n;a++)e.evaluateAt(a)===0&&(r[i]=this.field.inverse(a),i++);if(i!==n)throw $r.getChecksumInstance();return r},t.prototype.findErrorMagnitudes=function(e,n,r){for(var i=n.getDegree(),a=new Int32Array(i),s=1;s<=i;s++)a[i-s]=this.field.multiply(s,n.getCoefficient(s));for(var o=new zc(this.field,a),c=r.length,d=new Int32Array(c),s=0;s<c;s++){var f=this.field.inverse(r[s]),p=this.field.subtract(0,e.evaluateAt(f)),g=this.field.inverse(o.evaluateAt(f));d[s]=this.field.multiply(p,g)}return d},t}(),Tw=function(){function t(e,n,r,i,a){e instanceof t?this.constructor_2(e):this.constructor_1(e,n,r,i,a)}return t.prototype.constructor_1=function(e,n,r,i,a){var s=n==null||r==null,o=i==null||a==null;if(s&&o)throw new _e;s?(n=new Ke(0,i.getY()),r=new Ke(0,a.getY())):o&&(i=new Ke(e.getWidth()-1,n.getY()),a=new Ke(e.getWidth()-1,r.getY())),this.image=e,this.topLeft=n,this.bottomLeft=r,this.topRight=i,this.bottomRight=a,this.minX=Math.trunc(Math.min(n.getX(),r.getX())),this.maxX=Math.trunc(Math.max(i.getX(),a.getX())),this.minY=Math.trunc(Math.min(n.getY(),i.getY())),this.maxY=Math.trunc(Math.max(r.getY(),a.getY()))},t.prototype.constructor_2=function(e){this.image=e.image,this.topLeft=e.getTopLeft(),this.bottomLeft=e.getBottomLeft(),this.topRight=e.getTopRight(),this.bottomRight=e.getBottomRight(),this.minX=e.getMinX(),this.maxX=e.getMaxX(),this.minY=e.getMinY(),this.maxY=e.getMaxY()},t.merge=function(e,n){return e==null?n:n==null?e:new t(e.image,e.topLeft,e.bottomLeft,n.topRight,n.bottomRight)},t.prototype.addMissingRows=function(e,n,r){var i=this.topLeft,a=this.bottomLeft,s=this.topRight,o=this.bottomRight;if(e>0){var c=r?this.topLeft:this.topRight,d=Math.trunc(c.getY()-e);d<0&&(d=0);var f=new Ke(c.getX(),d);r?i=f:s=f}if(n>0){var p=r?this.bottomLeft:this.bottomRight,g=Math.trunc(p.getY()+n);g>=this.image.getHeight()&&(g=this.image.getHeight()-1);var m=new Ke(p.getX(),g);r?a=m:o=m}return new t(this.image,i,a,s,o)},t.prototype.getMinX=function(){return this.minX},t.prototype.getMaxX=function(){return this.maxX},t.prototype.getMinY=function(){return this.minY},t.prototype.getMaxY=function(){return this.maxY},t.prototype.getTopLeft=function(){return this.topLeft},t.prototype.getTopRight=function(){return this.topRight},t.prototype.getBottomLeft=function(){return this.bottomLeft},t.prototype.getBottomRight=function(){return this.bottomRight},t}(),zz=function(){function t(e,n,r,i){this.columnCount=e,this.errorCorrectionLevel=i,this.rowCountUpperPart=n,this.rowCountLowerPart=r,this.rowCount=n+r}return t.prototype.getColumnCount=function(){return this.columnCount},t.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},t.prototype.getRowCount=function(){return this.rowCount},t.prototype.getRowCountUpperPart=function(){return this.rowCountUpperPart},t.prototype.getRowCountLowerPart=function(){return this.rowCountLowerPart},t}(),g_=function(){function t(){this.buffer=""}return t.form=function(e,n){var r=-1;function i(s,o,c,d,f,p){if(s==="%%")return"%";if(n[++r]!==void 0){s=d?parseInt(d.substr(1)):void 0;var g=f?parseInt(f.substr(1)):void 0,m;switch(p){case"s":m=n[r];break;case"c":m=n[r][0];break;case"f":m=parseFloat(n[r]).toFixed(s);break;case"p":m=parseFloat(n[r]).toPrecision(s);break;case"e":m=parseFloat(n[r]).toExponential(s);break;case"x":m=parseInt(n[r]).toString(g||16);break;case"d":m=parseFloat(parseInt(n[r],g||10).toPrecision(s)).toFixed(0);break}m=typeof m=="object"?JSON.stringify(m):(+m).toString(g);for(var x=parseInt(c),b=c&&c[0]+""=="0"?"0":" ";m.length<x;)m=o!==void 0?m+b:b+m;return m}}var a=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(a,i)},t.prototype.format=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];this.buffer+=t.form(e,n)},t.prototype.toString=function(){return this.buffer},t}(),$z=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},gM=function(){function t(e){this.boundingBox=new Tw(e),this.codewords=new Array(e.getMaxY()-e.getMinY()+1)}return t.prototype.getCodewordNearby=function(e){var n=this.getCodeword(e);if(n!=null)return n;for(var r=1;r<t.MAX_NEARBY_DISTANCE;r++){var i=this.imageRowToCodewordIndex(e)-r;if(i>=0&&(n=this.codewords[i],n!=null)||(i=this.imageRowToCodewordIndex(e)+r,i<this.codewords.length&&(n=this.codewords[i],n!=null)))return n}return null},t.prototype.imageRowToCodewordIndex=function(e){return e-this.boundingBox.getMinY()},t.prototype.setCodeword=function(e,n){this.codewords[this.imageRowToCodewordIndex(e)]=n},t.prototype.getCodeword=function(e){return this.codewords[this.imageRowToCodewordIndex(e)]},t.prototype.getBoundingBox=function(){return this.boundingBox},t.prototype.getCodewords=function(){return this.codewords},t.prototype.toString=function(){var e,n,r=new g_,i=0;try{for(var a=$z(this.codewords),s=a.next();!s.done;s=a.next()){var o=s.value;if(o==null){r.format("%3d:    |   %n",i++);continue}r.format("%3d: %3d|%3d%n",i++,o.getRowNumber(),o.getValue())}}catch(c){e={error:c}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(e)throw e.error}}return r.toString()},t.MAX_NEARBY_DISTANCE=5,t}(),Gz=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Wz=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,a=[],s;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(o){s={error:o}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return a},Zh=function(){function t(){this.values=new Map}return t.prototype.setValue=function(e){e=Math.trunc(e);var n=this.values.get(e);n==null&&(n=0),n++,this.values.set(e,n)},t.prototype.getValue=function(){var e,n,r=-1,i=new Array,a=function(p,g){var m={getKey:function(){return p},getValue:function(){return g}};m.getValue()>r?(r=m.getValue(),i=[],i.push(m.getKey())):m.getValue()===r&&i.push(m.getKey())};try{for(var s=Gz(this.values.entries()),o=s.next();!o.done;o=s.next()){var c=Wz(o.value,2),d=c[0],f=c[1];a(d,f)}}catch(p){e={error:p}}finally{try{o&&!o.done&&(n=s.return)&&n.call(s)}finally{if(e)throw e.error}}return zt.toIntArray(i)},t.prototype.getConfidence=function(e){return this.values.get(e)},t}(),Yz=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),o2=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},KI=function(t){Yz(e,t);function e(n,r){var i=t.call(this,n)||this;return i._isLeft=r,i}return e.prototype.setRowNumbers=function(){var n,r;try{for(var i=o2(this.getCodewords()),a=i.next();!a.done;a=i.next()){var s=a.value;s!=null&&s.setRowNumberAsRowIndicatorColumn()}}catch(o){n={error:o}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}},e.prototype.adjustCompleteIndicatorColumnRowNumbers=function(n){var r=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(r,n);for(var i=this.getBoundingBox(),a=this._isLeft?i.getTopLeft():i.getTopRight(),s=this._isLeft?i.getBottomLeft():i.getBottomRight(),o=this.imageRowToCodewordIndex(Math.trunc(a.getY())),c=this.imageRowToCodewordIndex(Math.trunc(s.getY())),d=-1,f=1,p=0,g=o;g<c;g++)if(r[g]!=null){var m=r[g],x=m.getRowNumber()-d;if(x===0)p++;else if(x===1)f=Math.max(f,p),p=1,d=m.getRowNumber();else if(x<0||m.getRowNumber()>=n.getRowCount()||x>g)r[g]=null;else{var b=void 0;f>2?b=(f-2)*x:b=x;for(var A=b>=g,E=1;E<=b&&!A;E++)A=r[g-E]!=null;A?r[g]=null:(d=m.getRowNumber(),p=1)}}},e.prototype.getRowHeights=function(){var n,r,i=this.getBarcodeMetadata();if(i==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(i);var a=new Int32Array(i.getRowCount());try{for(var s=o2(this.getCodewords()),o=s.next();!o.done;o=s.next()){var c=o.value;if(c!=null){var d=c.getRowNumber();if(d>=a.length)continue;a[d]++}}}catch(f){n={error:f}}finally{try{o&&!o.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}return a},e.prototype.adjustIncompleteIndicatorColumnRowNumbers=function(n){for(var r=this.getBoundingBox(),i=this._isLeft?r.getTopLeft():r.getTopRight(),a=this._isLeft?r.getBottomLeft():r.getBottomRight(),s=this.imageRowToCodewordIndex(Math.trunc(i.getY())),o=this.imageRowToCodewordIndex(Math.trunc(a.getY())),c=this.getCodewords(),d=-1,f=s;f<o;f++)if(c[f]!=null){var p=c[f];p.setRowNumberAsRowIndicatorColumn();var g=p.getRowNumber()-d;g===0||(g===1?d=p.getRowNumber():p.getRowNumber()>=n.getRowCount()?c[f]=null:d=p.getRowNumber())}},e.prototype.getBarcodeMetadata=function(){var n,r,i=this.getCodewords(),a=new Zh,s=new Zh,o=new Zh,c=new Zh;try{for(var d=o2(i),f=d.next();!f.done;f=d.next()){var p=f.value;if(p!=null){p.setRowNumberAsRowIndicatorColumn();var g=p.getValue()%30,m=p.getRowNumber();switch(this._isLeft||(m+=2),m%3){case 0:s.setValue(g*3+1);break;case 1:c.setValue(g/3),o.setValue(g%3);break;case 2:a.setValue(g+1);break}}}}catch(b){n={error:b}}finally{try{f&&!f.done&&(r=d.return)&&r.call(d)}finally{if(n)throw n.error}}if(a.getValue().length===0||s.getValue().length===0||o.getValue().length===0||c.getValue().length===0||a.getValue()[0]<1||s.getValue()[0]+o.getValue()[0]<zt.MIN_ROWS_IN_BARCODE||s.getValue()[0]+o.getValue()[0]>zt.MAX_ROWS_IN_BARCODE)return null;var x=new zz(a.getValue()[0],s.getValue()[0],o.getValue()[0],c.getValue()[0]);return this.removeIncorrectCodewords(i,x),x},e.prototype.removeIncorrectCodewords=function(n,r){for(var i=0;i<n.length;i++){var a=n[i];if(n[i]!=null){var s=a.getValue()%30,o=a.getRowNumber();if(o>r.getRowCount()){n[i]=null;continue}switch(this._isLeft||(o+=2),o%3){case 0:s*3+1!==r.getRowCountUpperPart()&&(n[i]=null);break;case 1:(Math.trunc(s/3)!==r.getErrorCorrectionLevel()||s%3!==r.getRowCountLowerPart())&&(n[i]=null);break;case 2:s+1!==r.getColumnCount()&&(n[i]=null);break}}}},e.prototype.isLeft=function(){return this._isLeft},e.prototype.toString=function(){return"IsLeft: "+this._isLeft+`
`+t.prototype.toString.call(this)},e}(gM),qz=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Xz=function(){function t(e,n){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=e,this.barcodeColumnCount=e.getColumnCount(),this.boundingBox=n,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}return t.prototype.getDetectionResultColumns=function(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);var e=zt.MAX_CODEWORDS_IN_BARCODE,n;do n=e,e=this.adjustRowNumbersAndGetCount();while(e>0&&e<n);return this.detectionResultColumns},t.prototype.adjustIndicatorColumnRowNumbers=function(e){e!=null&&e.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)},t.prototype.adjustRowNumbersAndGetCount=function(){var e=this.adjustRowNumbersByRow();if(e===0)return 0;for(var n=1;n<this.barcodeColumnCount+1;n++)for(var r=this.detectionResultColumns[n].getCodewords(),i=0;i<r.length;i++)r[i]!=null&&(r[i].hasValidRowNumber()||this.adjustRowNumbers(n,i,r));return e},t.prototype.adjustRowNumbersByRow=function(){this.adjustRowNumbersFromBothRI();var e=this.adjustRowNumbersFromLRI();return e+this.adjustRowNumbersFromRRI()},t.prototype.adjustRowNumbersFromBothRI=function(){if(!(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)){for(var e=this.detectionResultColumns[0].getCodewords(),n=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),r=0;r<e.length;r++)if(e[r]!=null&&n[r]!=null&&e[r].getRowNumber()===n[r].getRowNumber())for(var i=1;i<=this.barcodeColumnCount;i++){var a=this.detectionResultColumns[i].getCodewords()[r];a!=null&&(a.setRowNumber(e[r].getRowNumber()),a.hasValidRowNumber()||(this.detectionResultColumns[i].getCodewords()[r]=null))}}},t.prototype.adjustRowNumbersFromRRI=function(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;for(var e=0,n=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),r=0;r<n.length;r++)if(n[r]!=null)for(var i=n[r].getRowNumber(),a=0,s=this.barcodeColumnCount+1;s>0&&a<this.ADJUST_ROW_NUMBER_SKIP;s--){var o=this.detectionResultColumns[s].getCodewords()[r];o!=null&&(a=t.adjustRowNumberIfValid(i,a,o),o.hasValidRowNumber()||e++)}return e},t.prototype.adjustRowNumbersFromLRI=function(){if(this.detectionResultColumns[0]==null)return 0;for(var e=0,n=this.detectionResultColumns[0].getCodewords(),r=0;r<n.length;r++)if(n[r]!=null)for(var i=n[r].getRowNumber(),a=0,s=1;s<this.barcodeColumnCount+1&&a<this.ADJUST_ROW_NUMBER_SKIP;s++){var o=this.detectionResultColumns[s].getCodewords()[r];o!=null&&(a=t.adjustRowNumberIfValid(i,a,o),o.hasValidRowNumber()||e++)}return e},t.adjustRowNumberIfValid=function(e,n,r){return r==null||r.hasValidRowNumber()||(r.isValidRowNumber(e)?(r.setRowNumber(e),n=0):++n),n},t.prototype.adjustRowNumbers=function(e,n,r){var i,a;if(this.detectionResultColumns[e-1]!=null){var s=r[n],o=this.detectionResultColumns[e-1].getCodewords(),c=o;this.detectionResultColumns[e+1]!=null&&(c=this.detectionResultColumns[e+1].getCodewords());var d=new Array(14);d[2]=o[n],d[3]=c[n],n>0&&(d[0]=r[n-1],d[4]=o[n-1],d[5]=c[n-1]),n>1&&(d[8]=r[n-2],d[10]=o[n-2],d[11]=c[n-2]),n<r.length-1&&(d[1]=r[n+1],d[6]=o[n+1],d[7]=c[n+1]),n<r.length-2&&(d[9]=r[n+2],d[12]=o[n+2],d[13]=c[n+2]);try{for(var f=qz(d),p=f.next();!p.done;p=f.next()){var g=p.value;if(t.adjustRowNumber(s,g))return}}catch(m){i={error:m}}finally{try{p&&!p.done&&(a=f.return)&&a.call(f)}finally{if(i)throw i.error}}}},t.adjustRowNumber=function(e,n){return n==null?!1:n.hasValidRowNumber()&&n.getBucket()===e.getBucket()?(e.setRowNumber(n.getRowNumber()),!0):!1},t.prototype.getBarcodeColumnCount=function(){return this.barcodeColumnCount},t.prototype.getBarcodeRowCount=function(){return this.barcodeMetadata.getRowCount()},t.prototype.getBarcodeECLevel=function(){return this.barcodeMetadata.getErrorCorrectionLevel()},t.prototype.setBoundingBox=function(e){this.boundingBox=e},t.prototype.getBoundingBox=function(){return this.boundingBox},t.prototype.setDetectionResultColumn=function(e,n){this.detectionResultColumns[e]=n},t.prototype.getDetectionResultColumn=function(e){return this.detectionResultColumns[e]},t.prototype.toString=function(){var e=this.detectionResultColumns[0];e==null&&(e=this.detectionResultColumns[this.barcodeColumnCount+1]);for(var n=new g_,r=0;r<e.getCodewords().length;r++){n.format("CW %3d:",r);for(var i=0;i<this.barcodeColumnCount+2;i++){if(this.detectionResultColumns[i]==null){n.format("    |   ");continue}var a=this.detectionResultColumns[i].getCodewords()[r];if(a==null){n.format("    |   ");continue}n.format(" %3d|%3d",a.getRowNumber(),a.getValue())}n.format("%n")}return n.toString()},t}(),Kz=function(){function t(e,n,r,i){this.rowNumber=t.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(e),this.endX=Math.trunc(n),this.bucket=Math.trunc(r),this.value=Math.trunc(i)}return t.prototype.hasValidRowNumber=function(){return this.isValidRowNumber(this.rowNumber)},t.prototype.isValidRowNumber=function(e){return e!==t.BARCODE_ROW_UNKNOWN&&this.bucket===e%3*3},t.prototype.setRowNumberAsRowIndicatorColumn=function(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))},t.prototype.getWidth=function(){return this.endX-this.startX},t.prototype.getStartX=function(){return this.startX},t.prototype.getEndX=function(){return this.endX},t.prototype.getBucket=function(){return this.bucket},t.prototype.getValue=function(){return this.value},t.prototype.getRowNumber=function(){return this.rowNumber},t.prototype.setRowNumber=function(e){this.rowNumber=e},t.prototype.toString=function(){return this.rowNumber+"|"+this.value},t.BARCODE_ROW_UNKNOWN=-1,t}(),Qz=function(){function t(){}return t.initialize=function(){for(var e=0;e<zt.SYMBOL_TABLE.length;e++)for(var n=zt.SYMBOL_TABLE[e],r=n&1,i=0;i<zt.BARS_IN_MODULE;i++){for(var a=0;(n&1)===r;)a+=1,n>>=1;r=n&1,t.RATIOS_TABLE[e]||(t.RATIOS_TABLE[e]=new Array(zt.BARS_IN_MODULE)),t.RATIOS_TABLE[e][zt.BARS_IN_MODULE-i-1]=Math.fround(a/zt.MODULES_IN_CODEWORD)}this.bSymbolTableReady=!0},t.getDecodedValue=function(e){var n=t.getDecodedCodewordValue(t.sampleBitCounts(e));return n!==-1?n:t.getClosestDecodedValue(e)},t.sampleBitCounts=function(e){for(var n=Gt.sum(e),r=new Int32Array(zt.BARS_IN_MODULE),i=0,a=0,s=0;s<zt.MODULES_IN_CODEWORD;s++){var o=n/(2*zt.MODULES_IN_CODEWORD)+s*n/zt.MODULES_IN_CODEWORD;a+e[i]<=o&&(a+=e[i],i++),r[i]++}return r},t.getDecodedCodewordValue=function(e){var n=t.getBitValue(e);return zt.getCodeword(n)===-1?-1:n},t.getBitValue=function(e){for(var n=0,r=0;r<e.length;r++)for(var i=0;i<e[r];i++)n=n<<1|(r%2===0?1:0);return Math.trunc(n)},t.getClosestDecodedValue=function(e){var n=Gt.sum(e),r=new Array(zt.BARS_IN_MODULE);if(n>1)for(var i=0;i<r.length;i++)r[i]=Math.fround(e[i]/n);var a=bw.MAX_VALUE,s=-1;this.bSymbolTableReady||t.initialize();for(var o=0;o<t.RATIOS_TABLE.length;o++){for(var c=0,d=t.RATIOS_TABLE[o],f=0;f<zt.BARS_IN_MODULE;f++){var p=Math.fround(d[f]-r[f]);if(c+=Math.fround(p*p),c>=a)break}c<a&&(a=c,s=zt.SYMBOL_TABLE[o])}return s},t.bSymbolTableReady=!1,t.RATIOS_TABLE=new Array(zt.SYMBOL_TABLE.length).map(function(e){return new Array(zt.BARS_IN_MODULE)}),t}(),Zz=function(){function t(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}return t.prototype.getSegmentIndex=function(){return this.segmentIndex},t.prototype.setSegmentIndex=function(e){this.segmentIndex=e},t.prototype.getFileId=function(){return this.fileId},t.prototype.setFileId=function(e){this.fileId=e},t.prototype.getOptionalData=function(){return this.optionalData},t.prototype.setOptionalData=function(e){this.optionalData=e},t.prototype.isLastSegment=function(){return this.lastSegment},t.prototype.setLastSegment=function(e){this.lastSegment=e},t.prototype.getSegmentCount=function(){return this.segmentCount},t.prototype.setSegmentCount=function(e){this.segmentCount=e},t.prototype.getSender=function(){return this.sender||null},t.prototype.setSender=function(e){this.sender=e},t.prototype.getAddressee=function(){return this.addressee||null},t.prototype.setAddressee=function(e){this.addressee=e},t.prototype.getFileName=function(){return this.fileName},t.prototype.setFileName=function(e){this.fileName=e},t.prototype.getFileSize=function(){return this.fileSize},t.prototype.setFileSize=function(e){this.fileSize=e},t.prototype.getChecksum=function(){return this.checksum},t.prototype.setChecksum=function(e){this.checksum=e},t.prototype.getTimestamp=function(){return this.timestamp},t.prototype.setTimestamp=function(e){this.timestamp=e},t}(),QI=function(){function t(){}return t.parseLong=function(e,n){return n===void 0&&(n=void 0),parseInt(e,n)},t}(),Jz=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),e$=function(t){Jz(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="NullPointerException",e}(qi),t$=function(){function t(){}return t.prototype.writeBytes=function(e){this.writeBytesOffset(e,0,e.length)},t.prototype.writeBytesOffset=function(e,n,r){if(e==null)throw new e$;if(n<0||n>e.length||r<0||n+r>e.length||n+r<0)throw new u_;if(r===0)return;for(var i=0;i<r;i++)this.write(e[n+i])},t.prototype.flush=function(){},t.prototype.close=function(){},t}(),n$=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),r$=function(t){n$(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e}(qi),i$=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),a$=function(t){i$(e,t);function e(n){n===void 0&&(n=32);var r=t.call(this)||this;if(r.count=0,n<0)throw new it("Negative initial size: "+n);return r.buf=new Uint8Array(n),r}return e.prototype.ensureCapacity=function(n){n-this.buf.length>0&&this.grow(n)},e.prototype.grow=function(n){var r=this.buf.length,i=r<<1;if(i-n<0&&(i=n),i<0){if(n<0)throw new r$;i=It.MAX_VALUE}this.buf=Rr.copyOfUint8Array(this.buf,i)},e.prototype.write=function(n){this.ensureCapacity(this.count+1),this.buf[this.count]=n,this.count+=1},e.prototype.writeBytesOffset=function(n,r,i){if(r<0||r>n.length||i<0||r+i-n.length>0)throw new u_;this.ensureCapacity(this.count+i),Tn.arraycopy(n,r,this.buf,this.count,i),this.count+=i},e.prototype.writeTo=function(n){n.writeBytesOffset(this.buf,0,this.count)},e.prototype.reset=function(){this.count=0},e.prototype.toByteArray=function(){return Rr.copyOfUint8Array(this.buf,this.count)},e.prototype.size=function(){return this.count},e.prototype.toString=function(n){return n?typeof n=="string"?this.toString_string(n):this.toString_number(n):this.toString_void()},e.prototype.toString_void=function(){return new String(this.buf).toString()},e.prototype.toString_string=function(n){return new String(this.buf).toString()},e.prototype.toString_number=function(n){return new String(this.buf).toString()},e.prototype.close=function(){},e}(t$),mn;(function(t){t[t.ALPHA=0]="ALPHA",t[t.LOWER=1]="LOWER",t[t.MIXED=2]="MIXED",t[t.PUNCT=3]="PUNCT",t[t.ALPHA_SHIFT=4]="ALPHA_SHIFT",t[t.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(mn||(mn={}));function mM(){if(typeof window<"u")return window.BigInt||null;if(typeof global<"u")return global.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}var Gg;function bl(t){if(typeof Gg>"u"&&(Gg=mM()),Gg===null)throw new Error("BigInt is not supported!");return Gg(t)}function s$(){var t=[];t[0]=bl(1);var e=bl(900);t[1]=e;for(var n=2;n<16;n++)t[n]=t[n-1]*e;return t}var o$=function(){function t(){}return t.decode=function(e,n){var r=new Et(""),i=Dr.ISO8859_1;r.enableDecoding(i);for(var a=1,s=e[a++],o=new Zz;a<e[0];){switch(s){case t.TEXT_COMPACTION_MODE_LATCH:a=t.textCompaction(e,a,r);break;case t.BYTE_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:a=t.byteCompaction(s,e,i,a,r);break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r.append(e[a++]);break;case t.NUMERIC_COMPACTION_MODE_LATCH:a=t.numericCompaction(e,a,r);break;case t.ECI_CHARSET:Dr.getCharacterSetECIByValue(e[a++]);break;case t.ECI_GENERAL_PURPOSE:a+=2;break;case t.ECI_USER_DEFINED:a++;break;case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:a=t.decodeMacroBlock(e,a,o);break;case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:throw new Ve;default:a--,a=t.textCompaction(e,a,r);break}if(a<e.length)s=e[a++];else throw Ve.getFormatInstance()}if(r.length()===0)throw Ve.getFormatInstance();var c=new hy(null,r.toString(),null,n);return c.setOther(o),c},t.decodeMacroBlock=function(e,n,r){if(n+t.NUMBER_OF_SEQUENCE_CODEWORDS>e[0])throw Ve.getFormatInstance();for(var i=new Int32Array(t.NUMBER_OF_SEQUENCE_CODEWORDS),a=0;a<t.NUMBER_OF_SEQUENCE_CODEWORDS;a++,n++)i[a]=e[n];r.setSegmentIndex(It.parseInt(t.decodeBase900toBase10(i,t.NUMBER_OF_SEQUENCE_CODEWORDS)));var s=new Et;n=t.textCompaction(e,n,s),r.setFileId(s.toString());var o=-1;for(e[n]===t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(o=n+1);n<e[0];)switch(e[n]){case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(n++,e[n]){case t.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:var c=new Et;n=t.textCompaction(e,n+1,c),r.setFileName(c.toString());break;case t.MACRO_PDF417_OPTIONAL_FIELD_SENDER:var d=new Et;n=t.textCompaction(e,n+1,d),r.setSender(d.toString());break;case t.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:var f=new Et;n=t.textCompaction(e,n+1,f),r.setAddressee(f.toString());break;case t.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:var p=new Et;n=t.numericCompaction(e,n+1,p),r.setSegmentCount(It.parseInt(p.toString()));break;case t.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:var g=new Et;n=t.numericCompaction(e,n+1,g),r.setTimestamp(QI.parseLong(g.toString()));break;case t.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:var m=new Et;n=t.numericCompaction(e,n+1,m),r.setChecksum(It.parseInt(m.toString()));break;case t.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:var x=new Et;n=t.numericCompaction(e,n+1,x),r.setFileSize(QI.parseLong(x.toString()));break;default:throw Ve.getFormatInstance()}break;case t.MACRO_PDF417_TERMINATOR:n++,r.setLastSegment(!0);break;default:throw Ve.getFormatInstance()}if(o!==-1){var b=n-o;r.isLastSegment()&&b--,r.setOptionalData(Rr.copyOfRange(e,o,o+b))}return n},t.textCompaction=function(e,n,r){for(var i=new Int32Array((e[0]-n)*2),a=new Int32Array((e[0]-n)*2),s=0,o=!1;n<e[0]&&!o;){var c=e[n++];if(c<t.TEXT_COMPACTION_MODE_LATCH)i[s]=c/30,i[s+1]=c%30,s+=2;else switch(c){case t.TEXT_COMPACTION_MODE_LATCH:i[s++]=t.TEXT_COMPACTION_MODE_LATCH;break;case t.BYTE_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:case t.NUMERIC_COMPACTION_MODE_LATCH:case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:n--,o=!0;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i[s]=t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,c=e[n++],a[s]=c,s++;break}}return t.decodeTextCompaction(i,a,s,r),n},t.decodeTextCompaction=function(e,n,r,i){for(var a=mn.ALPHA,s=mn.ALPHA,o=0;o<r;){var c=e[o],d="";switch(a){case mn.ALPHA:if(c<26)d=String.fromCharCode(65+c);else switch(c){case 26:d=" ";break;case t.LL:a=mn.LOWER;break;case t.ML:a=mn.MIXED;break;case t.PS:s=a,a=mn.PUNCT_SHIFT;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(n[o]);break;case t.TEXT_COMPACTION_MODE_LATCH:a=mn.ALPHA;break}break;case mn.LOWER:if(c<26)d=String.fromCharCode(97+c);else switch(c){case 26:d=" ";break;case t.AS:s=a,a=mn.ALPHA_SHIFT;break;case t.ML:a=mn.MIXED;break;case t.PS:s=a,a=mn.PUNCT_SHIFT;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(n[o]);break;case t.TEXT_COMPACTION_MODE_LATCH:a=mn.ALPHA;break}break;case mn.MIXED:if(c<t.PL)d=t.MIXED_CHARS[c];else switch(c){case t.PL:a=mn.PUNCT;break;case 26:d=" ";break;case t.LL:a=mn.LOWER;break;case t.AL:a=mn.ALPHA;break;case t.PS:s=a,a=mn.PUNCT_SHIFT;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(n[o]);break;case t.TEXT_COMPACTION_MODE_LATCH:a=mn.ALPHA;break}break;case mn.PUNCT:if(c<t.PAL)d=t.PUNCT_CHARS[c];else switch(c){case t.PAL:a=mn.ALPHA;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(n[o]);break;case t.TEXT_COMPACTION_MODE_LATCH:a=mn.ALPHA;break}break;case mn.ALPHA_SHIFT:if(a=s,c<26)d=String.fromCharCode(65+c);else switch(c){case 26:d=" ";break;case t.TEXT_COMPACTION_MODE_LATCH:a=mn.ALPHA;break}break;case mn.PUNCT_SHIFT:if(a=s,c<t.PAL)d=t.PUNCT_CHARS[c];else switch(c){case t.PAL:a=mn.ALPHA;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(n[o]);break;case t.TEXT_COMPACTION_MODE_LATCH:a=mn.ALPHA;break}break}d!==""&&i.append(d),o++}},t.byteCompaction=function(e,n,r,i,a){var s=new a$,o=0,c=0,d=!1;switch(e){case t.BYTE_COMPACTION_MODE_LATCH:for(var f=new Int32Array(6),p=n[i++];i<n[0]&&!d;)switch(f[o++]=p,c=900*c+p,p=n[i++],p){case t.TEXT_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH:case t.NUMERIC_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:i--,d=!0;break;default:if(o%5===0&&o>0){for(var g=0;g<6;++g)s.write(Number(bl(c)>>bl(8*(5-g))));c=0,o=0}break}i===n[0]&&p<t.TEXT_COMPACTION_MODE_LATCH&&(f[o++]=p);for(var m=0;m<o;m++)s.write(f[m]);break;case t.BYTE_COMPACTION_MODE_LATCH_6:for(;i<n[0]&&!d;){var x=n[i++];if(x<t.TEXT_COMPACTION_MODE_LATCH)o++,c=900*c+x;else switch(x){case t.TEXT_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH:case t.NUMERIC_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:i--,d=!0;break}if(o%5===0&&o>0){for(var g=0;g<6;++g)s.write(Number(bl(c)>>bl(8*(5-g))));c=0,o=0}}break}return a.append(Oa.decode(s.toByteArray(),r)),i},t.numericCompaction=function(e,n,r){for(var i=0,a=!1,s=new Int32Array(t.MAX_NUMERIC_CODEWORDS);n<e[0]&&!a;){var o=e[n++];if(n===e[0]&&(a=!0),o<t.TEXT_COMPACTION_MODE_LATCH)s[i]=o,i++;else switch(o){case t.TEXT_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:n--,a=!0;break}(i%t.MAX_NUMERIC_CODEWORDS===0||o===t.NUMERIC_COMPACTION_MODE_LATCH||a)&&i>0&&(r.append(t.decodeBase900toBase10(s,i)),i=0)}return n},t.decodeBase900toBase10=function(e,n){for(var r=bl(0),i=0;i<n;i++)r+=t.EXP900[n-i-1]*bl(e[i]);var a=r.toString();if(a.charAt(0)!=="1")throw new Ve;return a.substring(1)},t.TEXT_COMPACTION_MODE_LATCH=900,t.BYTE_COMPACTION_MODE_LATCH=901,t.NUMERIC_COMPACTION_MODE_LATCH=902,t.BYTE_COMPACTION_MODE_LATCH_6=924,t.ECI_USER_DEFINED=925,t.ECI_GENERAL_PURPOSE=926,t.ECI_CHARSET=927,t.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,t.MACRO_PDF417_TERMINATOR=922,t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,t.MAX_NUMERIC_CODEWORDS=15,t.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,t.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,t.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,t.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,t.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,t.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,t.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,t.PL=25,t.LL=27,t.AS=27,t.ML=28,t.AL=28,t.PS=29,t.PAL=29,t.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,t.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",t.EXP900=mM()?s$():[],t.NUMBER_OF_SEQUENCE_CODEWORDS=2,t}(),Oh=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},l$=function(){function t(){}return t.decode=function(e,n,r,i,a,s,o){for(var c=new Tw(e,n,r,i,a),d=null,f=null,p,g=!0;;g=!1){if(n!=null&&(d=t.getRowIndicatorColumn(e,c,n,!0,s,o)),i!=null&&(f=t.getRowIndicatorColumn(e,c,i,!1,s,o)),p=t.merge(d,f),p==null)throw _e.getNotFoundInstance();var m=p.getBoundingBox();if(g&&m!=null&&(m.getMinY()<c.getMinY()||m.getMaxY()>c.getMaxY()))c=m;else break}p.setBoundingBox(c);var x=p.getBarcodeColumnCount()+1;p.setDetectionResultColumn(0,d),p.setDetectionResultColumn(x,f);for(var b=d!=null,A=1;A<=x;A++){var E=b?A:x-A;if(p.getDetectionResultColumn(E)===void 0){var S=void 0;E===0||E===x?S=new KI(c,E===0):S=new gM(c),p.setDetectionResultColumn(E,S);for(var T=-1,I=T,P=c.getMinY();P<=c.getMaxY();P++){if(T=t.getStartColumn(p,E,P,b),T<0||T>c.getMaxX()){if(I===-1)continue;T=I}var F=t.detectCodeword(e,c.getMinX(),c.getMaxX(),b,T,P,s,o);F!=null&&(S.setCodeword(P,F),I=T,s=Math.min(s,F.getWidth()),o=Math.max(o,F.getWidth()))}}}return t.createDecoderResult(p)},t.merge=function(e,n){if(e==null&&n==null)return null;var r=t.getBarcodeMetadata(e,n);if(r==null)return null;var i=Tw.merge(t.adjustBoundingBox(e),t.adjustBoundingBox(n));return new Xz(r,i)},t.adjustBoundingBox=function(e){var n,r;if(e==null)return null;var i=e.getRowHeights();if(i==null)return null;var a=t.getMax(i),s=0;try{for(var o=Oh(i),c=o.next();!c.done;c=o.next()){var d=c.value;if(s+=a-d,d>0)break}}catch(m){n={error:m}}finally{try{c&&!c.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}for(var f=e.getCodewords(),p=0;s>0&&f[p]==null;p++)s--;for(var g=0,p=i.length-1;p>=0&&(g+=a-i[p],!(i[p]>0));p--);for(var p=f.length-1;g>0&&f[p]==null;p--)g--;return e.getBoundingBox().addMissingRows(s,g,e.isLeft())},t.getMax=function(e){var n,r,i=-1;try{for(var a=Oh(e),s=a.next();!s.done;s=a.next()){var o=s.value;i=Math.max(i,o)}}catch(c){n={error:c}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}return i},t.getBarcodeMetadata=function(e,n){var r;if(e==null||(r=e.getBarcodeMetadata())==null)return n==null?null:n.getBarcodeMetadata();var i;return n==null||(i=n.getBarcodeMetadata())==null?r:r.getColumnCount()!==i.getColumnCount()&&r.getErrorCorrectionLevel()!==i.getErrorCorrectionLevel()&&r.getRowCount()!==i.getRowCount()?null:r},t.getRowIndicatorColumn=function(e,n,r,i,a,s){for(var o=new KI(n,i),c=0;c<2;c++)for(var d=c===0?1:-1,f=Math.trunc(Math.trunc(r.getX())),p=Math.trunc(Math.trunc(r.getY()));p<=n.getMaxY()&&p>=n.getMinY();p+=d){var g=t.detectCodeword(e,0,e.getWidth(),i,f,p,a,s);g!=null&&(o.setCodeword(p,g),i?f=g.getStartX():f=g.getEndX())}return o},t.adjustCodewordCount=function(e,n){var r=n[0][1],i=r.getValue(),a=e.getBarcodeColumnCount()*e.getBarcodeRowCount()-t.getNumberOfECCodeWords(e.getBarcodeECLevel());if(i.length===0){if(a<1||a>zt.MAX_CODEWORDS_IN_BARCODE)throw _e.getNotFoundInstance();r.setValue(a)}else i[0]!==a&&r.setValue(a)},t.createDecoderResult=function(e){var n=t.createBarcodeMatrix(e);t.adjustCodewordCount(e,n);for(var r=new Array,i=new Int32Array(e.getBarcodeRowCount()*e.getBarcodeColumnCount()),a=[],s=new Array,o=0;o<e.getBarcodeRowCount();o++)for(var c=0;c<e.getBarcodeColumnCount();c++){var d=n[o][c+1].getValue(),f=o*e.getBarcodeColumnCount()+c;d.length===0?r.push(f):d.length===1?i[f]=d[0]:(s.push(f),a.push(d))}for(var p=new Array(a.length),g=0;g<p.length;g++)p[g]=a[g];return t.createDecoderResultFromAmbiguousValues(e.getBarcodeECLevel(),i,zt.toIntArray(r),zt.toIntArray(s),p)},t.createDecoderResultFromAmbiguousValues=function(e,n,r,i,a){for(var s=new Int32Array(i.length),o=100;o-- >0;){for(var c=0;c<s.length;c++)n[i[c]]=a[c][s[c]];try{return t.decodeCodewords(n,e,r)}catch(f){var d=f instanceof $r;if(!d)throw f}if(s.length===0)throw $r.getChecksumInstance();for(var c=0;c<s.length;c++)if(s[c]<a[c].length-1){s[c]++;break}else if(s[c]=0,c===s.length-1)throw $r.getChecksumInstance()}throw $r.getChecksumInstance()},t.createBarcodeMatrix=function(e){for(var n,r,i,a,s=Array.from({length:e.getBarcodeRowCount()},function(){return new Array(e.getBarcodeColumnCount()+2)}),o=0;o<s.length;o++)for(var c=0;c<s[o].length;c++)s[o][c]=new Zh;var d=0;try{for(var f=Oh(e.getDetectionResultColumns()),p=f.next();!p.done;p=f.next()){var g=p.value;if(g!=null)try{for(var m=(i=void 0,Oh(g.getCodewords())),x=m.next();!x.done;x=m.next()){var b=x.value;if(b!=null){var A=b.getRowNumber();if(A>=0){if(A>=s.length)continue;s[A][d].setValue(b.getValue())}}}}catch(E){i={error:E}}finally{try{x&&!x.done&&(a=m.return)&&a.call(m)}finally{if(i)throw i.error}}d++}}catch(E){n={error:E}}finally{try{p&&!p.done&&(r=f.return)&&r.call(f)}finally{if(n)throw n.error}}return s},t.isValidBarcodeColumn=function(e,n){return n>=0&&n<=e.getBarcodeColumnCount()+1},t.getStartColumn=function(e,n,r,i){var a,s,o=i?1:-1,c=null;if(t.isValidBarcodeColumn(e,n-o)&&(c=e.getDetectionResultColumn(n-o).getCodeword(r)),c!=null)return i?c.getEndX():c.getStartX();if(c=e.getDetectionResultColumn(n).getCodewordNearby(r),c!=null)return i?c.getStartX():c.getEndX();if(t.isValidBarcodeColumn(e,n-o)&&(c=e.getDetectionResultColumn(n-o).getCodewordNearby(r)),c!=null)return i?c.getEndX():c.getStartX();for(var d=0;t.isValidBarcodeColumn(e,n-o);){n-=o;try{for(var f=(a=void 0,Oh(e.getDetectionResultColumn(n).getCodewords())),p=f.next();!p.done;p=f.next()){var g=p.value;if(g!=null)return(i?g.getEndX():g.getStartX())+o*d*(g.getEndX()-g.getStartX())}}catch(m){a={error:m}}finally{try{p&&!p.done&&(s=f.return)&&s.call(f)}finally{if(a)throw a.error}}d++}return i?e.getBoundingBox().getMinX():e.getBoundingBox().getMaxX()},t.detectCodeword=function(e,n,r,i,a,s,o,c){a=t.adjustCodewordStartColumn(e,n,r,i,a,s);var d=t.getModuleBitCount(e,n,r,i,a,s);if(d==null)return null;var f,p=Gt.sum(d);if(i)f=a+p;else{for(var g=0;g<d.length/2;g++){var m=d[g];d[g]=d[d.length-1-g],d[d.length-1-g]=m}f=a,a=f-p}if(!t.checkCodewordSkew(p,o,c))return null;var x=Qz.getDecodedValue(d),b=zt.getCodeword(x);return b===-1?null:new Kz(a,f,t.getCodewordBucketNumber(x),b)},t.getModuleBitCount=function(e,n,r,i,a,s){for(var o=a,c=new Int32Array(8),d=0,f=i?1:-1,p=i;(i?o<r:o>=n)&&d<c.length;)e.get(o,s)===p?(c[d]++,o+=f):(d++,p=!p);return d===c.length||o===(i?r:n)&&d===c.length-1?c:null},t.getNumberOfECCodeWords=function(e){return 2<<e},t.adjustCodewordStartColumn=function(e,n,r,i,a,s){for(var o=a,c=i?-1:1,d=0;d<2;d++){for(;(i?o>=n:o<r)&&i===e.get(o,s);){if(Math.abs(a-o)>t.CODEWORD_SKEW_SIZE)return a;o+=c}c=-c,i=!i}return o},t.checkCodewordSkew=function(e,n,r){return n-t.CODEWORD_SKEW_SIZE<=e&&e<=r+t.CODEWORD_SKEW_SIZE},t.decodeCodewords=function(e,n,r){if(e.length===0)throw Ve.getFormatInstance();var i=1<<n+1,a=t.correctErrors(e,r,i);t.verifyCodewordCount(e,i);var s=o$.decode(e,""+n);return s.setErrorsCorrected(a),s.setErasures(r.length),s},t.correctErrors=function(e,n,r){if(n!=null&&n.length>r/2+t.MAX_ERRORS||r<0||r>t.MAX_EC_CODEWORDS)throw $r.getChecksumInstance();return t.errorCorrection.decode(e,r,n)},t.verifyCodewordCount=function(e,n){if(e.length<4)throw Ve.getFormatInstance();var r=e[0];if(r>e.length)throw Ve.getFormatInstance();if(r===0)if(n<e.length)e[0]=e.length-n;else throw Ve.getFormatInstance()},t.getBitCountForCodeword=function(e){for(var n=new Int32Array(8),r=0,i=n.length-1;!((e&1)!==r&&(r=e&1,i--,i<0));)n[i]++,e>>=1;return n},t.getCodewordBucketNumber=function(e){return e instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(e):this.getCodewordBucketNumber_number(e)},t.getCodewordBucketNumber_number=function(e){return t.getCodewordBucketNumber(t.getBitCountForCodeword(e))},t.getCodewordBucketNumber_Int32Array=function(e){return(e[0]-e[2]+e[4]-e[6]+9)%9},t.toString=function(e){for(var n=new g_,r=0;r<e.length;r++){n.format("Row %2d: ",r);for(var i=0;i<e[r].length;i++){var a=e[r][i];a.getValue().length===0?n.format("        ",null):n.format("%4d(%2d)",a.getValue()[0],a.getConfidence(a.getValue()[0]))}n.format("%n")}return n.toString()},t.CODEWORD_SKEW_SIZE=2,t.MAX_ERRORS=3,t.MAX_EC_CODEWORDS=512,t.errorCorrection=new Hz,t}(),c$=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Iw=function(){function t(){}return t.prototype.decode=function(e,n){n===void 0&&(n=null);var r=t.decode(e,n,!1);if(r==null||r.length===0||r[0]==null)throw _e.getNotFoundInstance();return r[0]},t.prototype.decodeMultiple=function(e,n){n===void 0&&(n=null);try{return t.decode(e,n,!0)}catch(r){throw r instanceof Ve||r instanceof $r?_e.getNotFoundInstance():r}},t.decode=function(e,n,r){var i,a,s=new Array,o=Lz.detectMultiple(e,n,r);try{for(var c=c$(o.getPoints()),d=c.next();!d.done;d=c.next()){var f=d.value,p=l$.decode(o.getBits(),f[4],f[5],f[6],f[7],t.getMinCodewordWidth(f),t.getMaxCodewordWidth(f)),g=new Ai(p.getText(),p.getRawBytes(),void 0,f,et.PDF_417);g.putMetadata(oi.ERROR_CORRECTION_LEVEL,p.getECLevel());var m=p.getOther();m!=null&&g.putMetadata(oi.PDF417_EXTRA_METADATA,m),s.push(g)}}catch(x){i={error:x}}finally{try{d&&!d.done&&(a=c.return)&&a.call(c)}finally{if(i)throw i.error}}return s.map(function(x){return x})},t.getMaxWidth=function(e,n){return e==null||n==null?0:Math.trunc(Math.abs(e.getX()-n.getX()))},t.getMinWidth=function(e,n){return e==null||n==null?It.MAX_VALUE:Math.trunc(Math.abs(e.getX()-n.getX()))},t.getMaxCodewordWidth=function(e){return Math.floor(Math.max(Math.max(t.getMaxWidth(e[0],e[4]),t.getMaxWidth(e[6],e[2])*zt.MODULES_IN_CODEWORD/zt.MODULES_IN_STOP_PATTERN),Math.max(t.getMaxWidth(e[1],e[5]),t.getMaxWidth(e[7],e[3])*zt.MODULES_IN_CODEWORD/zt.MODULES_IN_STOP_PATTERN)))},t.getMinCodewordWidth=function(e){return Math.floor(Math.min(Math.min(t.getMinWidth(e[0],e[4]),t.getMinWidth(e[6],e[2])*zt.MODULES_IN_CODEWORD/zt.MODULES_IN_STOP_PATTERN),Math.min(t.getMinWidth(e[1],e[5]),t.getMinWidth(e[7],e[3])*zt.MODULES_IN_CODEWORD/zt.MODULES_IN_STOP_PATTERN)))},t.prototype.reset=function(){},t}(),u$=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),ZI=function(t){u$(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="ReaderException",e}(qi),JI=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},d$=function(){function t(){}return t.prototype.decode=function(e,n){return this.setHints(n),this.decodeInternal(e)},t.prototype.decodeWithState=function(e){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(e)},t.prototype.setHints=function(e){this.hints=e;var n=e!=null&&e.get(Bn.TRY_HARDER)!==void 0,r=e==null?null:e.get(Bn.POSSIBLE_FORMATS),i=new Array;if(r!=null){var a=r.some(function(s){return s===et.UPC_A||s===et.UPC_E||s===et.EAN_13||s===et.EAN_8||s===et.CODABAR||s===et.CODE_39||s===et.CODE_93||s===et.CODE_128||s===et.ITF||s===et.RSS_14||s===et.RSS_EXPANDED});a&&!n&&i.push(new Qh(e)),r.includes(et.QR_CODE)&&i.push(new Cw),r.includes(et.DATA_MATRIX)&&i.push(new Sw),r.includes(et.AZTEC)&&i.push(new Aw),r.includes(et.PDF_417)&&i.push(new Iw),a&&n&&i.push(new Qh(e))}i.length===0&&(n||i.push(new Qh(e)),i.push(new Cw),i.push(new Sw),i.push(new Aw),i.push(new Iw),n&&i.push(new Qh(e))),this.readers=i},t.prototype.reset=function(){var e,n;if(this.readers!==null)try{for(var r=JI(this.readers),i=r.next();!i.done;i=r.next()){var a=i.value;a.reset()}}catch(s){e={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}},t.prototype.decodeInternal=function(e){var n,r;if(this.readers===null)throw new ZI("No readers where selected, nothing can be read.");try{for(var i=JI(this.readers),a=i.next();!a.done;a=i.next()){var s=a.value;try{return s.decode(e,this.hints)}catch(o){if(o instanceof ZI)continue}}}catch(o){n={error:o}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}throw new _e("No MultiFormat Readers were able to detect the code.")},t}(),f$=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),h$=function(t){f$(e,t);function e(n,r){n===void 0&&(n=null),r===void 0&&(r=500);var i=this,a=new d$;return a.setHints(n),i=t.call(this,a,r)||this,i}return e.prototype.decodeBitmap=function(n){return this.reader.decodeWithState(n)},e}(bf),p$=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}();(function(t){p$(e,t);function e(n){return n===void 0&&(n=500),t.call(this,new Iw,n)||this}return e})(bf);var g$=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}();(function(t){g$(e,t);function e(n){return n===void 0&&(n=500),t.call(this,new Cw,n)||this}return e})(bf);var Dw;(function(t){t[t.ERROR_CORRECTION=0]="ERROR_CORRECTION",t[t.CHARACTER_SET=1]="CHARACTER_SET",t[t.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",t[t.DATA_MATRIX_COMPACT=3]="DATA_MATRIX_COMPACT",t[t.MIN_SIZE=4]="MIN_SIZE",t[t.MAX_SIZE=5]="MAX_SIZE",t[t.MARGIN=6]="MARGIN",t[t.PDF417_COMPACT=7]="PDF417_COMPACT",t[t.PDF417_COMPACTION=8]="PDF417_COMPACTION",t[t.PDF417_DIMENSIONS=9]="PDF417_DIMENSIONS",t[t.AZTEC_LAYERS=10]="AZTEC_LAYERS",t[t.QR_VERSION=11]="QR_VERSION",t[t.GS1_FORMAT=12]="GS1_FORMAT",t[t.FORCE_C40=13]="FORCE_C40"})(Dw||(Dw={}));const Wg=Dw;var yM=function(){function t(e){this.field=e,this.cachedGenerators=[],this.cachedGenerators.push(new Ll(e,Int32Array.from([1])))}return t.prototype.buildGenerator=function(e){var n=this.cachedGenerators;if(e>=n.length)for(var r=n[n.length-1],i=this.field,a=n.length;a<=e;a++){var s=r.multiply(new Ll(i,Int32Array.from([1,i.exp(a-1+i.getGeneratorBase())])));n.push(s),r=s}return n[e]},t.prototype.encode=function(e,n){if(n===0)throw new it("No error correction bytes");var r=e.length-n;if(r<=0)throw new it("No data bytes provided");var i=this.buildGenerator(n),a=new Int32Array(r);Tn.arraycopy(e,0,a,0,r);var s=new Ll(this.field,a);s=s.multiplyByMonomial(n,1);for(var o=s.divide(i)[1],c=o.getCoefficients(),d=n-c.length,f=0;f<d;f++)e[r+f]=0;Tn.arraycopy(c,0,e,r+d,c.length)},t}(),Jh=function(){function t(){}return t.applyMaskPenaltyRule1=function(e){return t.applyMaskPenaltyRule1Internal(e,!0)+t.applyMaskPenaltyRule1Internal(e,!1)},t.applyMaskPenaltyRule2=function(e){for(var n=0,r=e.getArray(),i=e.getWidth(),a=e.getHeight(),s=0;s<a-1;s++)for(var o=r[s],c=0;c<i-1;c++){var d=o[c];d===o[c+1]&&d===r[s+1][c]&&d===r[s+1][c+1]&&n++}return t.N2*n},t.applyMaskPenaltyRule3=function(e){for(var n=0,r=e.getArray(),i=e.getWidth(),a=e.getHeight(),s=0;s<a;s++)for(var o=0;o<i;o++){var c=r[s];o+6<i&&c[o]===1&&c[o+1]===0&&c[o+2]===1&&c[o+3]===1&&c[o+4]===1&&c[o+5]===0&&c[o+6]===1&&(t.isWhiteHorizontal(c,o-4,o)||t.isWhiteHorizontal(c,o+7,o+11))&&n++,s+6<a&&r[s][o]===1&&r[s+1][o]===0&&r[s+2][o]===1&&r[s+3][o]===1&&r[s+4][o]===1&&r[s+5][o]===0&&r[s+6][o]===1&&(t.isWhiteVertical(r,o,s-4,s)||t.isWhiteVertical(r,o,s+7,s+11))&&n++}return n*t.N3},t.isWhiteHorizontal=function(e,n,r){n=Math.max(n,0),r=Math.min(r,e.length);for(var i=n;i<r;i++)if(e[i]===1)return!1;return!0},t.isWhiteVertical=function(e,n,r,i){r=Math.max(r,0),i=Math.min(i,e.length);for(var a=r;a<i;a++)if(e[a][n]===1)return!1;return!0},t.applyMaskPenaltyRule4=function(e){for(var n=0,r=e.getArray(),i=e.getWidth(),a=e.getHeight(),s=0;s<a;s++)for(var o=r[s],c=0;c<i;c++)o[c]===1&&n++;var d=e.getHeight()*e.getWidth(),f=Math.floor(Math.abs(n*2-d)*10/d);return f*t.N4},t.getDataMaskBit=function(e,n,r){var i,a;switch(e){case 0:i=r+n&1;break;case 1:i=r&1;break;case 2:i=n%3;break;case 3:i=(r+n)%3;break;case 4:i=Math.floor(r/2)+Math.floor(n/3)&1;break;case 5:a=r*n,i=(a&1)+a%3;break;case 6:a=r*n,i=(a&1)+a%3&1;break;case 7:a=r*n,i=a%3+(r+n&1)&1;break;default:throw new it("Invalid mask pattern: "+e)}return i===0},t.applyMaskPenaltyRule1Internal=function(e,n){for(var r=0,i=n?e.getHeight():e.getWidth(),a=n?e.getWidth():e.getHeight(),s=e.getArray(),o=0;o<i;o++){for(var c=0,d=-1,f=0;f<a;f++){var p=n?s[o][f]:s[f][o];p===d?c++:(c>=5&&(r+=t.N1+(c-5)),c=1,d=p)}c>=5&&(r+=t.N1+(c-5))}return r},t.N1=3,t.N2=3,t.N3=40,t.N4=10,t}(),m$=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},y$=function(){function t(e,n){this.width=e,this.height=n;for(var r=new Array(n),i=0;i!==n;i++)r[i]=new Uint8Array(e);this.bytes=r}return t.prototype.getHeight=function(){return this.height},t.prototype.getWidth=function(){return this.width},t.prototype.get=function(e,n){return this.bytes[n][e]},t.prototype.getArray=function(){return this.bytes},t.prototype.setNumber=function(e,n,r){this.bytes[n][e]=r},t.prototype.setBoolean=function(e,n,r){this.bytes[n][e]=r?1:0},t.prototype.clear=function(e){var n,r;try{for(var i=m$(this.bytes),a=i.next();!a.done;a=i.next()){var s=a.value;Rr.fill(s,e)}}catch(o){n={error:o}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var n=e;if(this.width!==n.width||this.height!==n.height)return!1;for(var r=0,i=this.height;r<i;++r)for(var a=this.bytes[r],s=n.bytes[r],o=0,c=this.width;o<c;++o)if(a[o]!==s[o])return!1;return!0},t.prototype.toString=function(){for(var e=new Et,n=0,r=this.height;n<r;++n){for(var i=this.bytes[n],a=0,s=this.width;a<s;++a)switch(i[a]){case 0:e.append(" 0");break;case 1:e.append(" 1");break;default:e.append("  ");break}e.append(`
`)}return e.toString()},t}(),Rw=function(){function t(){this.maskPattern=-1}return t.prototype.getMode=function(){return this.mode},t.prototype.getECLevel=function(){return this.ecLevel},t.prototype.getVersion=function(){return this.version},t.prototype.getMaskPattern=function(){return this.maskPattern},t.prototype.getMatrix=function(){return this.matrix},t.prototype.toString=function(){var e=new Et;return e.append(`<<
`),e.append(" mode: "),e.append(this.mode?this.mode.toString():"null"),e.append(`
 ecLevel: `),e.append(this.ecLevel?this.ecLevel.toString():"null"),e.append(`
 version: `),e.append(this.version?this.version.toString():"null"),e.append(`
 maskPattern: `),e.append(this.maskPattern.toString()),this.matrix?(e.append(`
 matrix:
`),e.append(this.matrix.toString())):e.append(`
 matrix: null
`),e.append(`>>
`),e.toString()},t.prototype.setMode=function(e){this.mode=e},t.prototype.setECLevel=function(e){this.ecLevel=e},t.prototype.setVersion=function(e){this.version=e},t.prototype.setMaskPattern=function(e){this.maskPattern=e},t.prototype.setMatrix=function(e){this.matrix=e},t.isValidMaskPattern=function(e){return e>=0&&e<t.NUM_MASK_PATTERNS},t.NUM_MASK_PATTERNS=8,t}(),v$=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Rn=function(t){v$(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="WriterException",e}(qi),eD=function(){function t(){}return t.clearMatrix=function(e){e.clear(255)},t.buildMatrix=function(e,n,r,i,a){t.clearMatrix(a),t.embedBasicPatterns(r,a),t.embedTypeInfo(n,i,a),t.maybeEmbedVersionInfo(r,a),t.embedDataBits(e,i,a)},t.embedBasicPatterns=function(e,n){t.embedPositionDetectionPatternsAndSeparators(n),t.embedDarkDotAtLeftBottomCorner(n),t.maybeEmbedPositionAdjustmentPatterns(e,n),t.embedTimingPatterns(n)},t.embedTypeInfo=function(e,n,r){var i=new Wr;t.makeTypeInfoBits(e,n,i);for(var a=0,s=i.getSize();a<s;++a){var o=i.get(i.getSize()-1-a),c=t.TYPE_INFO_COORDINATES[a],d=c[0],f=c[1];if(r.setBoolean(d,f,o),a<8){var p=r.getWidth()-a-1,g=8;r.setBoolean(p,g,o)}else{var p=8,g=r.getHeight()-7+(a-8);r.setBoolean(p,g,o)}}},t.maybeEmbedVersionInfo=function(e,n){if(!(e.getVersionNumber()<7)){var r=new Wr;t.makeVersionInfoBits(e,r);for(var i=17,a=0;a<6;++a)for(var s=0;s<3;++s){var o=r.get(i);i--,n.setBoolean(a,n.getHeight()-11+s,o),n.setBoolean(n.getHeight()-11+s,a,o)}}},t.embedDataBits=function(e,n,r){for(var i=0,a=-1,s=r.getWidth()-1,o=r.getHeight()-1;s>0;){for(s===6&&(s-=1);o>=0&&o<r.getHeight();){for(var c=0;c<2;++c){var d=s-c;if(t.isEmpty(r.get(d,o))){var f=void 0;i<e.getSize()?(f=e.get(i),++i):f=!1,n!==255&&Jh.getDataMaskBit(n,d,o)&&(f=!f),r.setBoolean(d,o,f)}}o+=a}a=-a,o+=a,s-=2}if(i!==e.getSize())throw new Rn("Not all bits consumed: "+i+"/"+e.getSize())},t.findMSBSet=function(e){return 32-It.numberOfLeadingZeros(e)},t.calculateBCHCode=function(e,n){if(n===0)throw new it("0 polynomial");var r=t.findMSBSet(n);for(e<<=r-1;t.findMSBSet(e)>=r;)e^=n<<t.findMSBSet(e)-r;return e},t.makeTypeInfoBits=function(e,n,r){if(!Rw.isValidMaskPattern(n))throw new Rn("Invalid mask pattern");var i=e.getBits()<<3|n;r.appendBits(i,5);var a=t.calculateBCHCode(i,t.TYPE_INFO_POLY);r.appendBits(a,10);var s=new Wr;if(s.appendBits(t.TYPE_INFO_MASK_PATTERN,15),r.xor(s),r.getSize()!==15)throw new Rn("should not happen but we got: "+r.getSize())},t.makeVersionInfoBits=function(e,n){n.appendBits(e.getVersionNumber(),6);var r=t.calculateBCHCode(e.getVersionNumber(),t.VERSION_INFO_POLY);if(n.appendBits(r,12),n.getSize()!==18)throw new Rn("should not happen but we got: "+n.getSize())},t.isEmpty=function(e){return e===255},t.embedTimingPatterns=function(e){for(var n=8;n<e.getWidth()-8;++n){var r=(n+1)%2;t.isEmpty(e.get(n,6))&&e.setNumber(n,6,r),t.isEmpty(e.get(6,n))&&e.setNumber(6,n,r)}},t.embedDarkDotAtLeftBottomCorner=function(e){if(e.get(8,e.getHeight()-8)===0)throw new Rn;e.setNumber(8,e.getHeight()-8,1)},t.embedHorizontalSeparationPattern=function(e,n,r){for(var i=0;i<8;++i){if(!t.isEmpty(r.get(e+i,n)))throw new Rn;r.setNumber(e+i,n,0)}},t.embedVerticalSeparationPattern=function(e,n,r){for(var i=0;i<7;++i){if(!t.isEmpty(r.get(e,n+i)))throw new Rn;r.setNumber(e,n+i,0)}},t.embedPositionAdjustmentPattern=function(e,n,r){for(var i=0;i<5;++i)for(var a=t.POSITION_ADJUSTMENT_PATTERN[i],s=0;s<5;++s)r.setNumber(e+s,n+i,a[s])},t.embedPositionDetectionPattern=function(e,n,r){for(var i=0;i<7;++i)for(var a=t.POSITION_DETECTION_PATTERN[i],s=0;s<7;++s)r.setNumber(e+s,n+i,a[s])},t.embedPositionDetectionPatternsAndSeparators=function(e){var n=t.POSITION_DETECTION_PATTERN[0].length;t.embedPositionDetectionPattern(0,0,e),t.embedPositionDetectionPattern(e.getWidth()-n,0,e),t.embedPositionDetectionPattern(0,e.getWidth()-n,e);var r=8;t.embedHorizontalSeparationPattern(0,r-1,e),t.embedHorizontalSeparationPattern(e.getWidth()-r,r-1,e),t.embedHorizontalSeparationPattern(0,e.getWidth()-r,e);var i=7;t.embedVerticalSeparationPattern(i,0,e),t.embedVerticalSeparationPattern(e.getHeight()-i-1,0,e),t.embedVerticalSeparationPattern(i,e.getHeight()-i,e)},t.maybeEmbedPositionAdjustmentPatterns=function(e,n){if(!(e.getVersionNumber()<2))for(var r=e.getVersionNumber()-1,i=t.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[r],a=0,s=i.length;a!==s;a++){var o=i[a];if(o>=0)for(var c=0;c!==s;c++){var d=i[c];d>=0&&t.isEmpty(n.get(d,o))&&t.embedPositionAdjustmentPattern(d-2,o-2,n)}}},t.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),t.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),t.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),t.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),t.VERSION_INFO_POLY=7973,t.TYPE_INFO_POLY=1335,t.TYPE_INFO_MASK_PATTERN=21522,t}(),x$=function(){function t(e,n){this.dataBytes=e,this.errorCorrectionBytes=n}return t.prototype.getDataBytes=function(){return this.dataBytes},t.prototype.getErrorCorrectionBytes=function(){return this.errorCorrectionBytes},t}(),tD=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};(function(){function t(){}return t.calculateMaskPenalty=function(e){return Jh.applyMaskPenaltyRule1(e)+Jh.applyMaskPenaltyRule2(e)+Jh.applyMaskPenaltyRule3(e)+Jh.applyMaskPenaltyRule4(e)},t.encode=function(e,n,r){r===void 0&&(r=null);var i=t.DEFAULT_BYTE_MODE_ENCODING,a=r!==null&&r.get(Wg.CHARACTER_SET)!==void 0;a&&(i=r.get(Wg.CHARACTER_SET).toString());var s=this.chooseMode(e,i),o=new Wr;if(s===On.BYTE&&(a||t.DEFAULT_BYTE_MODE_ENCODING!==i)){var c=Dr.getCharacterSetECIByName(i);c!==void 0&&this.appendECI(c,o)}this.appendModeInfo(s,o);var d=new Wr;this.appendBytes(e,s,d,i);var f;if(r!==null&&r.get(Wg.QR_VERSION)!==void 0){var p=Number.parseInt(r.get(Wg.QR_VERSION).toString(),10);f=qc.getVersionForNumber(p);var g=this.calculateBitsNeeded(s,o,d,f);if(!this.willFit(g,f,n))throw new Rn("Data too big for requested version")}else f=this.recommendVersion(n,s,o,d);var m=new Wr;m.appendBitArray(o);var x=s===On.BYTE?d.getSizeInBytes():e.length;this.appendLengthInfo(x,f,s,m),m.appendBitArray(d);var b=f.getECBlocksForLevel(n),A=f.getTotalCodewords()-b.getTotalECCodewords();this.terminateBits(A,m);var E=this.interleaveWithECBytes(m,f.getTotalCodewords(),A,b.getNumBlocks()),S=new Rw;S.setECLevel(n),S.setMode(s),S.setVersion(f);var T=f.getDimensionForVersion(),I=new y$(T,T),P=this.chooseMaskPattern(E,n,f,I);return S.setMaskPattern(P),eD.buildMatrix(E,n,f,P,I),S.setMatrix(I),S},t.recommendVersion=function(e,n,r,i){var a=this.calculateBitsNeeded(n,r,i,qc.getVersionForNumber(1)),s=this.chooseVersion(a,e),o=this.calculateBitsNeeded(n,r,i,s);return this.chooseVersion(o,e)},t.calculateBitsNeeded=function(e,n,r,i){return n.getSize()+e.getCharacterCountBits(i)+r.getSize()},t.getAlphanumericCode=function(e){return e<t.ALPHANUMERIC_TABLE.length?t.ALPHANUMERIC_TABLE[e]:-1},t.chooseMode=function(e,n){if(n===void 0&&(n=null),Dr.SJIS.getName()===n&&this.isOnlyDoubleByteKanji(e))return On.KANJI;for(var r=!1,i=!1,a=0,s=e.length;a<s;++a){var o=e.charAt(a);if(t.isDigit(o))r=!0;else if(this.getAlphanumericCode(o.charCodeAt(0))!==-1)i=!0;else return On.BYTE}return i?On.ALPHANUMERIC:r?On.NUMERIC:On.BYTE},t.isOnlyDoubleByteKanji=function(e){var n;try{n=Oa.encode(e,Dr.SJIS)}catch{return!1}var r=n.length;if(r%2!==0)return!1;for(var i=0;i<r;i+=2){var a=n[i]&255;if((a<129||a>159)&&(a<224||a>235))return!1}return!0},t.chooseMaskPattern=function(e,n,r,i){for(var a=Number.MAX_SAFE_INTEGER,s=-1,o=0;o<Rw.NUM_MASK_PATTERNS;o++){eD.buildMatrix(e,n,r,o,i);var c=this.calculateMaskPenalty(i);c<a&&(a=c,s=o)}return s},t.chooseVersion=function(e,n){for(var r=1;r<=40;r++){var i=qc.getVersionForNumber(r);if(t.willFit(e,i,n))return i}throw new Rn("Data too big")},t.willFit=function(e,n,r){var i=n.getTotalCodewords(),a=n.getECBlocksForLevel(r),s=a.getTotalECCodewords(),o=i-s,c=(e+7)/8;return o>=c},t.terminateBits=function(e,n){var r=e*8;if(n.getSize()>r)throw new Rn("data bits cannot fit in the QR Code"+n.getSize()+" > "+r);for(var i=0;i<4&&n.getSize()<r;++i)n.appendBit(!1);var a=n.getSize()&7;if(a>0)for(var i=a;i<8;i++)n.appendBit(!1);for(var s=e-n.getSizeInBytes(),i=0;i<s;++i)n.appendBits((i&1)===0?236:17,8);if(n.getSize()!==r)throw new Rn("Bits size does not equal capacity")},t.getNumDataBytesAndNumECBytesForBlockID=function(e,n,r,i,a,s){if(i>=r)throw new Rn("Block ID too large");var o=e%r,c=r-o,d=Math.floor(e/r),f=d+1,p=Math.floor(n/r),g=p+1,m=d-p,x=f-g;if(m!==x)throw new Rn("EC bytes mismatch");if(r!==c+o)throw new Rn("RS blocks mismatch");if(e!==(p+m)*c+(g+x)*o)throw new Rn("Total bytes mismatch");i<c?(a[0]=p,s[0]=m):(a[0]=g,s[0]=x)},t.interleaveWithECBytes=function(e,n,r,i){var a,s,o,c;if(e.getSizeInBytes()!==r)throw new Rn("Number of bits and data bytes does not match");for(var d=0,f=0,p=0,g=new Array,m=0;m<i;++m){var x=new Int32Array(1),b=new Int32Array(1);t.getNumDataBytesAndNumECBytesForBlockID(n,r,i,m,x,b);var A=x[0],E=new Uint8Array(A);e.toBytes(8*d,E,0,A);var S=t.generateECBytes(E,b[0]);g.push(new x$(E,S)),f=Math.max(f,A),p=Math.max(p,S.length),d+=x[0]}if(r!==d)throw new Rn("Data bytes does not match offset");for(var T=new Wr,m=0;m<f;++m)try{for(var I=(a=void 0,tD(g)),P=I.next();!P.done;P=I.next()){var F=P.value,E=F.getDataBytes();m<E.length&&T.appendBits(E[m],8)}}catch(B){a={error:B}}finally{try{P&&!P.done&&(s=I.return)&&s.call(I)}finally{if(a)throw a.error}}for(var m=0;m<p;++m)try{for(var M=(o=void 0,tD(g)),D=M.next();!D.done;D=M.next()){var F=D.value,S=F.getErrorCorrectionBytes();m<S.length&&T.appendBits(S[m],8)}}catch(B){o={error:B}}finally{try{D&&!D.done&&(c=M.return)&&c.call(M)}finally{if(o)throw o.error}}if(n!==T.getSizeInBytes())throw new Rn("Interleaving error: "+n+" and "+T.getSizeInBytes()+" differ.");return T},t.generateECBytes=function(e,n){for(var r=e.length,i=new Int32Array(r+n),a=0;a<r;a++)i[a]=e[a]&255;new yM(Gi.QR_CODE_FIELD_256).encode(i,n);for(var s=new Uint8Array(n),a=0;a<n;a++)s[a]=i[r+a];return s},t.appendModeInfo=function(e,n){n.appendBits(e.getBits(),4)},t.appendLengthInfo=function(e,n,r,i){var a=r.getCharacterCountBits(n);if(e>=1<<a)throw new Rn(e+" is bigger than "+((1<<a)-1));i.appendBits(e,a)},t.appendBytes=function(e,n,r,i){switch(n){case On.NUMERIC:t.appendNumericBytes(e,r);break;case On.ALPHANUMERIC:t.appendAlphanumericBytes(e,r);break;case On.BYTE:t.append8BitBytes(e,r,i);break;case On.KANJI:t.appendKanjiBytes(e,r);break;default:throw new Rn("Invalid mode: "+n)}},t.getDigit=function(e){return e.charCodeAt(0)-48},t.isDigit=function(e){var n=t.getDigit(e);return n>=0&&n<=9},t.appendNumericBytes=function(e,n){for(var r=e.length,i=0;i<r;){var a=t.getDigit(e.charAt(i));if(i+2<r){var s=t.getDigit(e.charAt(i+1)),o=t.getDigit(e.charAt(i+2));n.appendBits(a*100+s*10+o,10),i+=3}else if(i+1<r){var s=t.getDigit(e.charAt(i+1));n.appendBits(a*10+s,7),i+=2}else n.appendBits(a,4),i++}},t.appendAlphanumericBytes=function(e,n){for(var r=e.length,i=0;i<r;){var a=t.getAlphanumericCode(e.charCodeAt(i));if(a===-1)throw new Rn;if(i+1<r){var s=t.getAlphanumericCode(e.charCodeAt(i+1));if(s===-1)throw new Rn;n.appendBits(a*45+s,11),i+=2}else n.appendBits(a,6),i++}},t.append8BitBytes=function(e,n,r){var i;try{i=Oa.encode(e,r)}catch(c){throw new Rn(c)}for(var a=0,s=i.length;a!==s;a++){var o=i[a];n.appendBits(o,8)}},t.appendKanjiBytes=function(e,n){var r;try{r=Oa.encode(e,Dr.SJIS)}catch(p){throw new Rn(p)}for(var i=r.length,a=0;a<i;a+=2){var s=r[a]&255,o=r[a+1]&255,c=s<<8&4294967295|o,d=-1;if(c>=33088&&c<=40956?d=c-33088:c>=57408&&c<=60351&&(d=c-49472),d===-1)throw new Rn("Invalid byte sequence");var f=(d>>8)*192+(d&255);n.appendBits(f,13)}},t.appendECI=function(e,n){n.appendBits(On.ECI.getBits(),4),n.appendBits(e.getValue(),8)},t.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),t.DEFAULT_BYTE_MODE_ENCODING=Dr.UTF8.getName(),t})();var w$=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}();(function(t){w$(e,t);function e(n,r,i,a,s,o,c,d){var f=t.call(this,o,c)||this;if(f.yuvData=n,f.dataWidth=r,f.dataHeight=i,f.left=a,f.top=s,a+o>r||s+c>i)throw new it("Crop rectangle does not fit within image data.");return d&&f.reverseHorizontal(o,c),f}return e.prototype.getRow=function(n,r){if(n<0||n>=this.getHeight())throw new it("Requested row is outside the image: "+n);var i=this.getWidth();(r==null||r.length<i)&&(r=new Uint8ClampedArray(i));var a=(n+this.top)*this.dataWidth+this.left;return Tn.arraycopy(this.yuvData,a,r,0,i),r},e.prototype.getMatrix=function(){var n=this.getWidth(),r=this.getHeight();if(n===this.dataWidth&&r===this.dataHeight)return this.yuvData;var i=n*r,a=new Uint8ClampedArray(i),s=this.top*this.dataWidth+this.left;if(n===this.dataWidth)return Tn.arraycopy(this.yuvData,s,a,0,i),a;for(var o=0;o<r;o++){var c=o*n;Tn.arraycopy(this.yuvData,s,a,c,n),s+=this.dataWidth}return a},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(n,r,i,a){return new e(this.yuvData,this.dataWidth,this.dataHeight,this.left+n,this.top+r,i,a,!1)},e.prototype.renderThumbnail=function(){for(var n=this.getWidth()/e.THUMBNAIL_SCALE_FACTOR,r=this.getHeight()/e.THUMBNAIL_SCALE_FACTOR,i=new Int32Array(n*r),a=this.yuvData,s=this.top*this.dataWidth+this.left,o=0;o<r;o++){for(var c=o*n,d=0;d<n;d++){var f=a[s+d*e.THUMBNAIL_SCALE_FACTOR]&255;i[c+d]=4278190080|f*65793}s+=this.dataWidth*e.THUMBNAIL_SCALE_FACTOR}return i},e.prototype.getThumbnailWidth=function(){return this.getWidth()/e.THUMBNAIL_SCALE_FACTOR},e.prototype.getThumbnailHeight=function(){return this.getHeight()/e.THUMBNAIL_SCALE_FACTOR},e.prototype.reverseHorizontal=function(n,r){for(var i=this.yuvData,a=0,s=this.top*this.dataWidth+this.left;a<r;a++,s+=this.dataWidth)for(var o=s+n/2,c=s,d=s+n-1;c<o;c++,d--){var f=i[c];i[c]=i[d],i[d]=f}},e.prototype.invert=function(){return new d_(this)},e.THUMBNAIL_SCALE_FACTOR=2,e})(fy);var b$=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}();(function(t){b$(e,t);function e(n,r,i,a,s,o,c){var d=t.call(this,r,i)||this;if(d.dataWidth=a,d.dataHeight=s,d.left=o,d.top=c,n.BYTES_PER_ELEMENT===4){for(var f=r*i,p=new Uint8ClampedArray(f),g=0;g<f;g++){var m=n[g],x=m>>16&255,b=m>>7&510,A=m&255;p[g]=(x+b+A)/4&255}d.luminances=p}else d.luminances=n;if(a===void 0&&(d.dataWidth=r),s===void 0&&(d.dataHeight=i),o===void 0&&(d.left=0),c===void 0&&(d.top=0),d.left+r>d.dataWidth||d.top+i>d.dataHeight)throw new it("Crop rectangle does not fit within image data.");return d}return e.prototype.getRow=function(n,r){if(n<0||n>=this.getHeight())throw new it("Requested row is outside the image: "+n);var i=this.getWidth();(r==null||r.length<i)&&(r=new Uint8ClampedArray(i));var a=(n+this.top)*this.dataWidth+this.left;return Tn.arraycopy(this.luminances,a,r,0,i),r},e.prototype.getMatrix=function(){var n=this.getWidth(),r=this.getHeight();if(n===this.dataWidth&&r===this.dataHeight)return this.luminances;var i=n*r,a=new Uint8ClampedArray(i),s=this.top*this.dataWidth+this.left;if(n===this.dataWidth)return Tn.arraycopy(this.luminances,s,a,0,i),a;for(var o=0;o<r;o++){var c=o*n;Tn.arraycopy(this.luminances,s,a,c,n),s+=this.dataWidth}return a},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(n,r,i,a){return new e(this.luminances,i,a,this.dataWidth,this.dataHeight,this.left+n,this.top+r)},e.prototype.invert=function(){return new d_(this)},e})(fy);var _$=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),A$=function(t){_$(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.forName=function(n){return this.getCharacterSetECIByName(n)},e}(Dr),E$=function(){function t(){}return t.ISO_8859_1=Dr.ISO8859_1,t}(),Ow,S$=301,C$=function(t,e){for(var n=1,r=0;r<255;r++)e[r]=n,t[n]=r,n*=2,n>=256&&(n^=S$);return{LOG:t,ALOG:e}};Ow=C$([],[]),Ow.LOG;Ow.ALOG;var nD;(function(t){t[t.FORCE_NONE=0]="FORCE_NONE",t[t.FORCE_SQUARE=1]="FORCE_SQUARE",t[t.FORCE_RECTANGLE=2]="FORCE_RECTANGLE"})(nD||(nD={}));var rD=129,vM=230,T$=231,I$=235,D$=236,R$=237,O$=238,M$=239,P$=240,l2=254,k$=254,iD="[)>05",aD="[)>06",sD="",ln=0,ri=1,Mi=2,Sr=3,Ur=4,mi=5,N$=function(){function t(){}return t.prototype.getEncodingMode=function(){return ln},t.prototype.encode=function(e){var n=Ya.determineConsecutiveDigitCount(e.getMessage(),e.pos);if(n>=2)e.writeCodeword(this.encodeASCIIDigits(e.getMessage().charCodeAt(e.pos),e.getMessage().charCodeAt(e.pos+1))),e.pos+=2;else{var r=e.getCurrentChar(),i=Ya.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(i!==this.getEncodingMode())switch(i){case mi:e.writeCodeword(T$),e.signalEncoderChange(mi);return;case ri:e.writeCodeword(vM),e.signalEncoderChange(ri);return;case Sr:e.writeCodeword(O$),e.signalEncoderChange(Sr);break;case Mi:e.writeCodeword(M$),e.signalEncoderChange(Mi);break;case Ur:e.writeCodeword(P$),e.signalEncoderChange(Ur);break;default:throw new Error("Illegal mode: "+i)}else Ya.isExtendedASCII(r)?(e.writeCodeword(I$),e.writeCodeword(r-128+1),e.pos++):(e.writeCodeword(r+1),e.pos++)}},t.prototype.encodeASCIIDigits=function(e,n){if(Ya.isDigit(e)&&Ya.isDigit(n)){var r=(e-48)*10+(n-48);return r+130}throw new Error("not digits: "+e+n)},t}(),L$=function(){function t(){}return t.prototype.getEncodingMode=function(){return mi},t.prototype.encode=function(e){var n=new Et;for(n.append(0);e.hasMoreCharacters();){var r=e.getCurrentChar();n.append(r),e.pos++;var i=Ya.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(i!==this.getEncodingMode()){e.signalEncoderChange(ln);break}}var a=n.length()-1,s=1,o=e.getCodewordCount()+a+s;e.updateSymbolInfo(o);var c=e.getSymbolInfo().getDataCapacity()-o>0;if(e.hasMoreCharacters()||c)if(a<=249)n.setCharAt(0,Vt.getCharAt(a));else if(a<=1555)n.setCharAt(0,Vt.getCharAt(Math.floor(a/250)+249)),n.insert(1,Vt.getCharAt(a%250));else throw new Error("Message length not in valid ranges: "+a);for(var d=0,r=n.length();d<r;d++)e.writeCodeword(this.randomize255State(n.charAt(d).charCodeAt(0),e.getCodewordCount()+1))},t.prototype.randomize255State=function(e,n){var r=149*n%255+1,i=e+r;return i<=255?i:i-256},t}(),m_=function(){function t(){}return t.prototype.getEncodingMode=function(){return ri},t.prototype.encodeMaximal=function(e){for(var n=new Et,r=0,i=e.pos,a=0;e.hasMoreCharacters();){var s=e.getCurrentChar();e.pos++,r=this.encodeChar(s,n),n.length()%3===0&&(i=e.pos,a=n.length())}if(a!==n.length()){var o=Math.floor(n.length()/3*2),c=Math.floor(e.getCodewordCount()+o+1);e.updateSymbolInfo(c);var d=e.getSymbolInfo().getDataCapacity()-c,f=Math.floor(n.length()%3);(f===2&&d!==2||f===1&&(r>3||d!==1))&&(e.pos=i)}n.length()>0&&e.writeCodeword(vM),this.handleEOD(e,n)},t.prototype.encode=function(e){for(var n=new Et;e.hasMoreCharacters();){var r=e.getCurrentChar();e.pos++;var i=this.encodeChar(r,n),a=Math.floor(n.length()/3)*2,s=e.getCodewordCount()+a;e.updateSymbolInfo(s);var o=e.getSymbolInfo().getDataCapacity()-s;if(!e.hasMoreCharacters()){var c=new Et;for(n.length()%3===2&&o!==2&&(i=this.backtrackOneCharacter(e,n,c,i));n.length()%3===1&&(i>3||o!==1);)i=this.backtrackOneCharacter(e,n,c,i);break}var d=n.length();if(d%3===0){var f=Ya.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(f!==this.getEncodingMode()){e.signalEncoderChange(ln);break}}}this.handleEOD(e,n)},t.prototype.backtrackOneCharacter=function(e,n,r,i){var a=n.length(),s=n.toString().substring(0,a-i);n.setLengthToZero(),n.append(s),e.pos--;var o=e.getCurrentChar();return i=this.encodeChar(o,r),e.resetSymbolInfo(),i},t.prototype.writeNextTriplet=function(e,n){e.writeCodewords(this.encodeToCodewords(n.toString()));var r=n.toString().substring(3);n.setLengthToZero(),n.append(r)},t.prototype.handleEOD=function(e,n){var r=Math.floor(n.length()/3*2),i=n.length()%3,a=e.getCodewordCount()+r;e.updateSymbolInfo(a);var s=e.getSymbolInfo().getDataCapacity()-a;if(i===2){for(n.append("\0");n.length()>=3;)this.writeNextTriplet(e,n);e.hasMoreCharacters()&&e.writeCodeword(l2)}else if(s===1&&i===1){for(;n.length()>=3;)this.writeNextTriplet(e,n);e.hasMoreCharacters()&&e.writeCodeword(l2),e.pos--}else if(i===0){for(;n.length()>=3;)this.writeNextTriplet(e,n);(s>0||e.hasMoreCharacters())&&e.writeCodeword(l2)}else throw new Error("Unexpected case. Please report!");e.signalEncoderChange(ln)},t.prototype.encodeChar=function(e,n){if(e===32)return n.append(3),1;if(e>=48&&e<=57)return n.append(e-48+4),1;if(e>=65&&e<=90)return n.append(e-65+14),1;if(e<32)return n.append(0),n.append(e),2;if(e<=47)return n.append(1),n.append(e-33),2;if(e<=64)return n.append(1),n.append(e-58+15),2;if(e<=95)return n.append(1),n.append(e-91+22),2;if(e<=127)return n.append(2),n.append(e-96),2;n.append("1");var r=2;return r+=this.encodeChar(e-128,n),r},t.prototype.encodeToCodewords=function(e){var n=1600*e.charCodeAt(0)+40*e.charCodeAt(1)+e.charCodeAt(2)+1,r=n/256,i=n%256,a=new Et;return a.append(r),a.append(i),a.toString()},t}(),B$=function(){function t(){}return t.prototype.getEncodingMode=function(){return Ur},t.prototype.encode=function(e){for(var n=new Et;e.hasMoreCharacters();){var r=e.getCurrentChar();this.encodeChar(r,n),e.pos++;var i=n.length();if(i>=4){e.writeCodewords(this.encodeToCodewords(n.toString()));var a=n.toString().substring(4);n.setLengthToZero(),n.append(a);var s=Ya.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(s!==this.getEncodingMode()){e.signalEncoderChange(ln);break}}}n.append(Vt.getCharAt(31)),this.handleEOD(e,n)},t.prototype.handleEOD=function(e,n){try{var r=n.length();if(r===0)return;if(r===1){e.updateSymbolInfo();var i=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount(),a=e.getRemainingCharacters();if(a>i&&(e.updateSymbolInfo(e.getCodewordCount()+1),i=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount()),a<=i&&i<=2)return}if(r>4)throw new Error("Count must not exceed 4");var s=r-1,o=this.encodeToCodewords(n.toString()),c=!e.hasMoreCharacters(),d=c&&s<=2;if(s<=2){e.updateSymbolInfo(e.getCodewordCount()+s);var i=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount();i>=3&&(d=!1,e.updateSymbolInfo(e.getCodewordCount()+o.length))}d?(e.resetSymbolInfo(),e.pos-=s):e.writeCodewords(o)}finally{e.signalEncoderChange(ln)}},t.prototype.encodeChar=function(e,n){e>=32&&e<=63?n.append(e):e>=64&&e<=94?n.append(Vt.getCharAt(e-64)):Ya.illegalCharacter(Vt.getCharAt(e))},t.prototype.encodeToCodewords=function(e){var n=e.length;if(n===0)throw new Error("StringBuilder must not be empty");var r=e.charAt(0).charCodeAt(0),i=n>=2?e.charAt(1).charCodeAt(0):0,a=n>=3?e.charAt(2).charCodeAt(0):0,s=n>=4?e.charAt(3).charCodeAt(0):0,o=(r<<18)+(i<<12)+(a<<6)+s,c=o>>16&255,d=o>>8&255,f=o&255,p=new Et;return p.append(c),n>=2&&p.append(d),n>=3&&p.append(f),p.toString()},t}(),F$=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),j$=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Qt=function(){function t(e,n,r,i,a,s,o,c){o===void 0&&(o=0),c===void 0&&(c=0),this.rectangular=e,this.dataCapacity=n,this.errorCodewords=r,this.matrixWidth=i,this.matrixHeight=a,this.dataRegions=s,this.rsBlockData=o,this.rsBlockError=c}return t.lookup=function(e,n,r,i,a){var s,o;n===void 0&&(n=0),r===void 0&&(r=null),i===void 0&&(i=null),a===void 0&&(a=!0);try{for(var c=j$(U$),d=c.next();!d.done;d=c.next()){var f=d.value;if(!(n===1&&f.rectangular)&&!(n===2&&!f.rectangular)&&!(r!=null&&(f.getSymbolWidth()<r.getWidth()||f.getSymbolHeight()<r.getHeight()))&&!(i!=null&&(f.getSymbolWidth()>i.getWidth()||f.getSymbolHeight()>i.getHeight()))&&e<=f.dataCapacity)return f}}catch(p){s={error:p}}finally{try{d&&!d.done&&(o=c.return)&&o.call(c)}finally{if(s)throw s.error}}if(a)throw new Error("Can't find a symbol arrangement that matches the message. Data codewords: "+e);return null},t.prototype.getHorizontalDataRegions=function(){switch(this.dataRegions){case 1:return 1;case 2:case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},t.prototype.getVerticalDataRegions=function(){switch(this.dataRegions){case 1:case 2:return 1;case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},t.prototype.getSymbolDataWidth=function(){return this.getHorizontalDataRegions()*this.matrixWidth},t.prototype.getSymbolDataHeight=function(){return this.getVerticalDataRegions()*this.matrixHeight},t.prototype.getSymbolWidth=function(){return this.getSymbolDataWidth()+this.getHorizontalDataRegions()*2},t.prototype.getSymbolHeight=function(){return this.getSymbolDataHeight()+this.getVerticalDataRegions()*2},t.prototype.getCodewordCount=function(){return this.dataCapacity+this.errorCodewords},t.prototype.getInterleavedBlockCount=function(){return this.rsBlockData?this.dataCapacity/this.rsBlockData:1},t.prototype.getDataCapacity=function(){return this.dataCapacity},t.prototype.getErrorCodewords=function(){return this.errorCodewords},t.prototype.getDataLengthForInterleavedBlock=function(e){return this.rsBlockData},t.prototype.getErrorLengthForInterleavedBlock=function(e){return this.rsBlockError},t}(),V$=function(t){F$(e,t);function e(){return t.call(this,!1,1558,620,22,22,36,-1,62)||this}return e.prototype.getInterleavedBlockCount=function(){return 10},e.prototype.getDataLengthForInterleavedBlock=function(n){return n<=8?156:155},e}(Qt),U$=[new Qt(!1,3,5,8,8,1),new Qt(!1,5,7,10,10,1),new Qt(!0,5,7,16,6,1),new Qt(!1,8,10,12,12,1),new Qt(!0,10,11,14,6,2),new Qt(!1,12,12,14,14,1),new Qt(!0,16,14,24,10,1),new Qt(!1,18,14,16,16,1),new Qt(!1,22,18,18,18,1),new Qt(!0,22,18,16,10,2),new Qt(!1,30,20,20,20,1),new Qt(!0,32,24,16,14,2),new Qt(!1,36,24,22,22,1),new Qt(!1,44,28,24,24,1),new Qt(!0,49,28,22,14,2),new Qt(!1,62,36,14,14,4),new Qt(!1,86,42,16,16,4),new Qt(!1,114,48,18,18,4),new Qt(!1,144,56,20,20,4),new Qt(!1,174,68,22,22,4),new Qt(!1,204,84,24,24,4,102,42),new Qt(!1,280,112,14,14,16,140,56),new Qt(!1,368,144,16,16,16,92,36),new Qt(!1,456,192,18,18,16,114,48),new Qt(!1,576,224,20,20,16,144,56),new Qt(!1,696,272,22,22,16,174,68),new Qt(!1,816,336,24,24,16,136,56),new Qt(!1,1050,408,18,18,36,175,68),new Qt(!1,1304,496,20,20,36,163,62),new V$],H$=function(){function t(e){this.msg=e,this.pos=0,this.skipAtEnd=0;for(var n=e.split("").map(function(o){return o.charCodeAt(0)}),r=new Et,i=0,a=n.length;i<a;i++){var s=String.fromCharCode(n[i]&255);if(s==="?"&&e.charAt(i)!=="?")throw new Error("Message contains characters outside ISO-8859-1 encoding.");r.append(s)}this.msg=r.toString(),this.shape=0,this.codewords=new Et,this.newEncoding=-1}return t.prototype.setSymbolShape=function(e){this.shape=e},t.prototype.setSizeConstraints=function(e,n){this.minSize=e,this.maxSize=n},t.prototype.getMessage=function(){return this.msg},t.prototype.setSkipAtEnd=function(e){this.skipAtEnd=e},t.prototype.getCurrentChar=function(){return this.msg.charCodeAt(this.pos)},t.prototype.getCurrent=function(){return this.msg.charCodeAt(this.pos)},t.prototype.getCodewords=function(){return this.codewords},t.prototype.writeCodewords=function(e){this.codewords.append(e)},t.prototype.writeCodeword=function(e){this.codewords.append(e)},t.prototype.getCodewordCount=function(){return this.codewords.length()},t.prototype.getNewEncoding=function(){return this.newEncoding},t.prototype.signalEncoderChange=function(e){this.newEncoding=e},t.prototype.resetEncoderSignal=function(){this.newEncoding=-1},t.prototype.hasMoreCharacters=function(){return this.pos<this.getTotalMessageCharCount()},t.prototype.getTotalMessageCharCount=function(){return this.msg.length-this.skipAtEnd},t.prototype.getRemainingCharacters=function(){return this.getTotalMessageCharCount()-this.pos},t.prototype.getSymbolInfo=function(){return this.symbolInfo},t.prototype.updateSymbolInfo=function(e){e===void 0&&(e=this.getCodewordCount()),(this.symbolInfo==null||e>this.symbolInfo.getDataCapacity())&&(this.symbolInfo=Qt.lookup(e,this.shape,this.minSize,this.maxSize,!0))},t.prototype.resetSymbolInfo=function(){this.symbolInfo=null},t}(),z$=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),$$=function(t){z$(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.getEncodingMode=function(){return Sr},e.prototype.encode=function(n){for(var r=new Et;n.hasMoreCharacters();){var i=n.getCurrentChar();n.pos++,this.encodeChar(i,r);var a=r.length();if(a%3===0){this.writeNextTriplet(n,r);var s=Ya.lookAheadTest(n.getMessage(),n.pos,this.getEncodingMode());if(s!==this.getEncodingMode()){n.signalEncoderChange(ln);break}}}this.handleEOD(n,r)},e.prototype.encodeChar=function(n,r){switch(n){case 13:r.append(0);break;case 42:r.append(1);break;case 62:r.append(2);break;case 32:r.append(3);break;default:n>=48&&n<=57?r.append(n-48+4):n>=65&&n<=90?r.append(n-65+14):Ya.illegalCharacter(Vt.getCharAt(n));break}return 1},e.prototype.handleEOD=function(n,r){n.updateSymbolInfo();var i=n.getSymbolInfo().getDataCapacity()-n.getCodewordCount(),a=r.length();n.pos-=a,(n.getRemainingCharacters()>1||i>1||n.getRemainingCharacters()!==i)&&n.writeCodeword(k$),n.getNewEncoding()<0&&n.signalEncoderChange(ln)},e}(m_),G$=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),W$=function(t){G$(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.getEncodingMode=function(){return Mi},e.prototype.encodeChar=function(n,r){if(n===32)return r.append(3),1;if(n>=48&&n<=57)return r.append(n-48+4),1;if(n>=97&&n<=122)return r.append(n-97+14),1;if(n<32)return r.append(0),r.append(n),2;if(n<=47)return r.append(1),r.append(n-33),2;if(n<=64)return r.append(1),r.append(n-58+15),2;if(n>=91&&n<=95)return r.append(1),r.append(n-91+22),2;if(n===96)return r.append(2),r.append(0),2;if(n<=90)return r.append(2),r.append(n-65+1),2;if(n<=127)return r.append(2),r.append(n-123+27),2;r.append("1");var i=2;return i+=this.encodeChar(n-128,r),i},e}(m_),Ya=function(){function t(){}return t.randomize253State=function(e){var n=149*e%253+1,r=rD+n;return r<=254?r:r-254},t.encodeHighLevel=function(e,n,r,i,a){n===void 0&&(n=0),r===void 0&&(r=null),i===void 0&&(i=null),a===void 0&&(a=!1);var s=new m_,o=[new N$,s,new W$,new $$,new B$,new L$],c=new H$(e);c.setSymbolShape(n),c.setSizeConstraints(r,i),e.startsWith(iD)&&e.endsWith(sD)?(c.writeCodeword(D$),c.setSkipAtEnd(2),c.pos+=iD.length):e.startsWith(aD)&&e.endsWith(sD)&&(c.writeCodeword(R$),c.setSkipAtEnd(2),c.pos+=aD.length);var d=ln;for(a&&(s.encodeMaximal(c),d=c.getNewEncoding(),c.resetEncoderSignal());c.hasMoreCharacters();)o[d].encode(c),c.getNewEncoding()>=0&&(d=c.getNewEncoding(),c.resetEncoderSignal());var f=c.getCodewordCount();c.updateSymbolInfo();var p=c.getSymbolInfo().getDataCapacity();f<p&&d!==ln&&d!==mi&&d!==Ur&&c.writeCodeword("");var g=c.getCodewords();for(g.length()<p&&g.append(rD);g.length()<p;)g.append(this.randomize253State(g.length()+1));return c.getCodewords().toString()},t.lookAheadTest=function(e,n,r){var i=this.lookAheadTestIntern(e,n,r);if(r===Sr&&i===Sr){for(var a=Math.min(n+3,e.length),s=n;s<a;s++)if(!this.isNativeX12(e.charCodeAt(s)))return ln}else if(r===Ur&&i===Ur){for(var a=Math.min(n+4,e.length),s=n;s<a;s++)if(!this.isNativeEDIFACT(e.charCodeAt(s)))return ln}return i},t.lookAheadTestIntern=function(e,n,r){if(n>=e.length)return r;var i;r===ln?i=[0,1,1,1,1,1.25]:(i=[1,2,2,2,2,2.25],i[r]=0);for(var a=0,s=new Uint8Array(6),o=[];;){if(n+a===e.length){Rr.fill(s,0),Rr.fill(o,0);var c=this.findMinimums(i,o,It.MAX_VALUE,s),d=this.getMinimumCount(s);if(o[ln]===c)return ln;if(d===1){if(s[mi]>0)return mi;if(s[Ur]>0)return Ur;if(s[Mi]>0)return Mi;if(s[Sr]>0)return Sr}return ri}var f=e.charCodeAt(n+a);if(a++,this.isDigit(f)?i[ln]+=.5:this.isExtendedASCII(f)?(i[ln]=Math.ceil(i[ln]),i[ln]+=2):(i[ln]=Math.ceil(i[ln]),i[ln]++),this.isNativeC40(f)?i[ri]+=2/3:this.isExtendedASCII(f)?i[ri]+=8/3:i[ri]+=4/3,this.isNativeText(f)?i[Mi]+=2/3:this.isExtendedASCII(f)?i[Mi]+=8/3:i[Mi]+=4/3,this.isNativeX12(f)?i[Sr]+=2/3:this.isExtendedASCII(f)?i[Sr]+=13/3:i[Sr]+=10/3,this.isNativeEDIFACT(f)?i[Ur]+=3/4:this.isExtendedASCII(f)?i[Ur]+=17/4:i[Ur]+=13/4,this.isSpecialB256(f)?i[mi]+=4:i[mi]++,a>=4){if(Rr.fill(s,0),Rr.fill(o,0),this.findMinimums(i,o,It.MAX_VALUE,s),o[ln]<this.min(o[mi],o[ri],o[Mi],o[Sr],o[Ur]))return ln;if(o[mi]<o[ln]||o[mi]+1<this.min(o[ri],o[Mi],o[Sr],o[Ur]))return mi;if(o[Ur]+1<this.min(o[mi],o[ri],o[Mi],o[Sr],o[ln]))return Ur;if(o[Mi]+1<this.min(o[mi],o[ri],o[Ur],o[Sr],o[ln]))return Mi;if(o[Sr]+1<this.min(o[mi],o[ri],o[Ur],o[Mi],o[ln]))return Sr;if(o[ri]+1<this.min(o[ln],o[mi],o[Ur],o[Mi])){if(o[ri]<o[Sr])return ri;if(o[ri]===o[Sr]){for(var p=n+a+1;p<e.length;){var g=e.charCodeAt(p);if(this.isX12TermSep(g))return Sr;if(!this.isNativeX12(g))break;p++}return ri}}}}},t.min=function(e,n,r,i,a){var s=Math.min(e,Math.min(n,Math.min(r,i)));return a===void 0?s:Math.min(s,a)},t.findMinimums=function(e,n,r,i){for(var a=0;a<6;a++){var s=n[a]=Math.ceil(e[a]);r>s&&(r=s,Rr.fill(i,0)),r===s&&(i[a]=i[a]+1)}return r},t.getMinimumCount=function(e){for(var n=0,r=0;r<6;r++)n+=e[r];return n||0},t.isDigit=function(e){return e>=48&&e<=57},t.isExtendedASCII=function(e){return e>=128&&e<=255},t.isNativeC40=function(e){return e===32||e>=48&&e<=57||e>=65&&e<=90},t.isNativeText=function(e){return e===32||e>=48&&e<=57||e>=97&&e<=122},t.isNativeX12=function(e){return this.isX12TermSep(e)||e===32||e>=48&&e<=57||e>=65&&e<=90},t.isX12TermSep=function(e){return e===13||e===42||e===62},t.isNativeEDIFACT=function(e){return e>=32&&e<=94},t.isSpecialB256=function(e){return!1},t.determineConsecutiveDigitCount=function(e,n){n===void 0&&(n=0);for(var r=e.length,i=n;i<r&&this.isDigit(e.charCodeAt(i));)i++;return i-n},t.illegalCharacter=function(e){var n=It.toHexString(e.charCodeAt(0));throw n="0000".substring(0,4-n.length)+n,new Error("Illegal character: "+e+" (0x"+n+")")},t}(),c2=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},oD=function(){function t(e){this.charset=e,this.name=e.name}return t.prototype.canEncode=function(e){try{return Oa.encode(e,this.charset)!=null}catch{return!1}},t}(),Y$=function(){function t(e,n,r){var i,a,s,o,c,d;this.ENCODERS=["IBM437","ISO-8859-2","ISO-8859-3","ISO-8859-4","ISO-8859-5","ISO-8859-6","ISO-8859-7","ISO-8859-8","ISO-8859-9","ISO-8859-10","ISO-8859-11","ISO-8859-13","ISO-8859-14","ISO-8859-15","ISO-8859-16","windows-1250","windows-1251","windows-1252","windows-1256","Shift_JIS"].map(function(R){return new oD(A$.forName(R))}),this.encoders=[];var f=[];f.push(new oD(E$.ISO_8859_1));for(var p=n!=null&&n.name.startsWith("UTF"),g=0;g<e.length;g++){var m=!1;try{for(var x=(i=void 0,c2(f)),b=x.next();!b.done;b=x.next()){var A=b.value,E=e.charAt(g),S=E.charCodeAt(0);if(S===r||A.canEncode(E)){m=!0;break}}}catch(R){i={error:R}}finally{try{b&&!b.done&&(a=x.return)&&a.call(x)}finally{if(i)throw i.error}}if(!m)try{for(var T=(s=void 0,c2(this.ENCODERS)),I=T.next();!I.done;I=T.next()){var A=I.value;if(A.canEncode(e.charAt(g))){f.push(A),m=!0;break}}}catch(R){s={error:R}}finally{try{I&&!I.done&&(o=T.return)&&o.call(T)}finally{if(s)throw s.error}}m||(p=!0)}if(f.length===1&&!p)this.encoders=[f[0]];else{this.encoders=[];var P=0;try{for(var F=c2(f),M=F.next();!M.done;M=F.next()){var A=M.value;this.encoders[P++]=A}}catch(R){c={error:R}}finally{try{M&&!M.done&&(d=F.return)&&d.call(F)}finally{if(c)throw c.error}}}var D=-1;if(n!=null){for(var g=0;g<this.encoders.length;g++)if(this.encoders[g]!=null&&n.name===this.encoders[g].name){D=g;break}}this.priorityEncoderIndex=D}return t.prototype.length=function(){return this.encoders.length},t.prototype.getCharsetName=function(e){if(!(e<this.length()))throw new Error("index must be less than length");return this.encoders[e].name},t.prototype.getCharset=function(e){if(!(e<this.length()))throw new Error("index must be less than length");return this.encoders[e].charset},t.prototype.getECIValue=function(e){return this.encoders[e].charset.getValueIdentifier()},t.prototype.getPriorityEncoderIndex=function(){return this.priorityEncoderIndex},t.prototype.canEncode=function(e,n){if(!(n<this.length()))throw new Error("index must be less than length");return!0},t.prototype.encode=function(e,n){if(!(n<this.length()))throw new Error("index must be less than length");return Oa.encode(Vt.getCharAt(e),this.encoders[n].name)},t}(),q$=3,X$=function(){function t(e,n,r){this.fnc1=r;var i=new Y$(e,n,r);if(i.length()===1)for(var a=0;a<this.bytes.length;a++){var s=e.charAt(a).charCodeAt(0);this.bytes[a]=s===r?1e3:s}else this.bytes=this.encodeMinimally(e,i,r)}return t.prototype.getFNC1Character=function(){return this.fnc1},t.prototype.length=function(){return this.bytes.length},t.prototype.haveNCharacters=function(e,n){if(e+n-1>=this.bytes.length)return!1;for(var r=0;r<n;r++)if(this.isECI(e+r))return!1;return!0},t.prototype.charAt=function(e){if(e<0||e>=this.length())throw new Error(""+e);if(this.isECI(e))throw new Error("value at "+e+" is not a character but an ECI");return this.isFNC1(e)?this.fnc1:this.bytes[e]},t.prototype.subSequence=function(e,n){if(e<0||e>n||n>this.length())throw new Error(""+e);for(var r=new Et,i=e;i<n;i++){if(this.isECI(i))throw new Error("value at "+i+" is not a character but an ECI");r.append(this.charAt(i))}return r.toString()},t.prototype.isECI=function(e){if(e<0||e>=this.length())throw new Error(""+e);return this.bytes[e]>255&&this.bytes[e]<=999},t.prototype.isFNC1=function(e){if(e<0||e>=this.length())throw new Error(""+e);return this.bytes[e]===1e3},t.prototype.getECIValue=function(e){if(e<0||e>=this.length())throw new Error(""+e);if(!this.isECI(e))throw new Error("value at "+e+" is not an ECI but a character");return this.bytes[e]-256},t.prototype.addEdge=function(e,n,r){(e[n][r.encoderIndex]==null||e[n][r.encoderIndex].cachedTotalSize>r.cachedTotalSize)&&(e[n][r.encoderIndex]=r)},t.prototype.addEdges=function(e,n,r,i,a,s){var o=e.charAt(i).charCodeAt(0),c=0,d=n.length();n.getPriorityEncoderIndex()>=0&&(o===s||n.canEncode(o,n.getPriorityEncoderIndex()))&&(c=n.getPriorityEncoderIndex(),d=c+1);for(var f=c;f<d;f++)(o===s||n.canEncode(o,f))&&this.addEdge(r,i+1,new lD(o,n,f,a,s))},t.prototype.encodeMinimally=function(e,n,r){var i=e.length,a=new lD[i+1][n.length()];this.addEdges(e,n,a,0,null,r);for(var s=1;s<=i;s++){for(var o=0;o<n.length();o++)a[s][o]!=null&&s<i&&this.addEdges(e,n,a,s,a[s][o],r);for(var o=0;o<n.length();o++)a[s-1][o]=null}for(var c=-1,d=It.MAX_VALUE,o=0;o<n.length();o++)if(a[i][o]!=null){var f=a[i][o];f.cachedTotalSize<d&&(d=f.cachedTotalSize,c=o)}if(c<0)throw new Error('Failed to encode "'+e+'"');for(var p=[],g=a[i][c];g!=null;){if(g.isFNC1())p.unshift(1e3);else for(var m=n.encode(g.c,g.encoderIndex),s=m.length-1;s>=0;s--)p.unshift(m[s]&255);var x=g.previous===null?0:g.previous.encoderIndex;x!==g.encoderIndex&&p.unshift(256+n.getECIValue(g.encoderIndex)),g=g.previous}for(var b=[],s=0;s<b.length;s++)b[s]=p[s];return b},t}(),lD=function(){function t(e,n,r,i,a){this.c=e,this.encoderSet=n,this.encoderIndex=r,this.previous=i,this.fnc1=a,this.c=e===a?1e3:e;var s=this.isFNC1()?1:n.encode(e,r).length,o=i===null?0:i.encoderIndex;o!==r&&(s+=q$),i!=null&&(s+=i.cachedTotalSize),this.cachedTotalSize=s}return t.prototype.isFNC1=function(){return this.c===1e3},t}(),K$=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}();var cD;(function(t){t[t.ASCII=0]="ASCII",t[t.C40=1]="C40",t[t.TEXT=2]="TEXT",t[t.X12=3]="X12",t[t.EDF=4]="EDF",t[t.B256=5]="B256"})(cD||(cD={}));(function(t){K$(e,t);function e(n,r,i,a,s){var o=t.call(this,n,r,i)||this;return o.shape=a,o.macroId=s,o}return e.prototype.getMacroId=function(){return this.macroId},e.prototype.getShapeHint=function(){return this.shape},e})(X$);var Q$=function(){function t(){}return t.prototype.isCompact=function(){return this.compact},t.prototype.setCompact=function(e){this.compact=e},t.prototype.getSize=function(){return this.size},t.prototype.setSize=function(e){this.size=e},t.prototype.getLayers=function(){return this.layers},t.prototype.setLayers=function(e){this.layers=e},t.prototype.getCodeWords=function(){return this.codeWords},t.prototype.setCodeWords=function(e){this.codeWords=e},t.prototype.getMatrix=function(){return this.matrix},t.prototype.setMatrix=function(e){this.matrix=e},t}(),uD=function(){function t(){}return t.singletonList=function(e){return[e]},t.min=function(e,n){return e.sort(n)[0]},t}(),Z$=function(){function t(e){this.previous=e}return t.prototype.getPrevious=function(){return this.previous},t}(),J$=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),y_=function(t){J$(e,t);function e(n,r,i){var a=t.call(this,n)||this;return a.value=r,a.bitCount=i,a}return e.prototype.appendTo=function(n,r){n.appendBits(this.value,this.bitCount)},e.prototype.add=function(n,r){return new e(this,n,r)},e.prototype.addBinaryShift=function(n,r){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new e(this,n,r)},e.prototype.toString=function(){var n=this.value&(1<<this.bitCount)-1;return n|=1<<this.bitCount,"<"+It.toBinaryString(n|1<<this.bitCount).substring(1)+">"},e}(Z$),eG=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),tG=function(t){eG(e,t);function e(n,r,i){var a=t.call(this,n,0,0)||this;return a.binaryShiftStart=r,a.binaryShiftByteCount=i,a}return e.prototype.appendTo=function(n,r){for(var i=0;i<this.binaryShiftByteCount;i++)(i===0||i===31&&this.binaryShiftByteCount<=62)&&(n.appendBits(31,5),this.binaryShiftByteCount>62?n.appendBits(this.binaryShiftByteCount-31,16):i===0?n.appendBits(Math.min(this.binaryShiftByteCount,31),5):n.appendBits(this.binaryShiftByteCount-31,5)),n.appendBits(r[this.binaryShiftStart+i],8)},e.prototype.addBinaryShift=function(n,r){return new e(this,n,r)},e.prototype.toString=function(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"},e}(y_);function nG(t,e,n){return new tG(t,e,n)}function Mh(t,e,n){return new y_(t,e,n)}var rG=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],Bl=0,n1=1,Ia=2,xM=3,Ds=4,iG=new y_(null,0,0),u2=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])],aG=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};function sG(t){var e,n;try{for(var r=aG(t),i=r.next();!i.done;i=r.next()){var a=i.value;Rr.fill(a,-1)}}catch(s){e={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return t[Bl][Ds]=0,t[n1][Ds]=0,t[n1][Bl]=28,t[xM][Ds]=0,t[Ia][Ds]=0,t[Ia][Bl]=15,t}var wM=sG(Rr.createInt32Array(6,6)),oG=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},lG=function(){function t(e,n,r,i){this.token=e,this.mode=n,this.binaryShiftByteCount=r,this.bitCount=i}return t.prototype.getMode=function(){return this.mode},t.prototype.getToken=function(){return this.token},t.prototype.getBinaryShiftByteCount=function(){return this.binaryShiftByteCount},t.prototype.getBitCount=function(){return this.bitCount},t.prototype.latchAndAppend=function(e,n){var r=this.bitCount,i=this.token;if(e!==this.mode){var a=u2[this.mode][e];i=Mh(i,a&65535,a>>16),r+=a>>16}var s=e===Ia?4:5;return i=Mh(i,n,s),new t(i,e,0,r+s)},t.prototype.shiftAndAppend=function(e,n){var r=this.token,i=this.mode===Ia?4:5;return r=Mh(r,wM[this.mode][e],i),r=Mh(r,n,5),new t(r,this.mode,0,this.bitCount+i+5)},t.prototype.addBinaryShiftChar=function(e){var n=this.token,r=this.mode,i=this.bitCount;if(this.mode===Ds||this.mode===Ia){var a=u2[r][Bl];n=Mh(n,a&65535,a>>16),i+=a>>16,r=Bl}var s=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,o=new t(n,r,this.binaryShiftByteCount+1,i+s);return o.binaryShiftByteCount===2078&&(o=o.endBinaryShift(e+1)),o},t.prototype.endBinaryShift=function(e){if(this.binaryShiftByteCount===0)return this;var n=this.token;return n=nG(n,e-this.binaryShiftByteCount,this.binaryShiftByteCount),new t(n,this.mode,0,this.bitCount)},t.prototype.isBetterThanOrEqualTo=function(e){var n=this.bitCount+(u2[this.mode][e.mode]>>16);return this.binaryShiftByteCount<e.binaryShiftByteCount?n+=t.calculateBinaryShiftCost(e)-t.calculateBinaryShiftCost(this):this.binaryShiftByteCount>e.binaryShiftByteCount&&e.binaryShiftByteCount>0&&(n+=10),n<=e.bitCount},t.prototype.toBitArray=function(e){for(var n,r,i=[],a=this.endBinaryShift(e.length).token;a!==null;a=a.getPrevious())i.unshift(a);var s=new Wr;try{for(var o=oG(i),c=o.next();!c.done;c=o.next()){var d=c.value;d.appendTo(s,e)}}catch(f){n={error:f}}finally{try{c&&!c.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return s},t.prototype.toString=function(){return Vt.format("%s bits=%d bytes=%d",rG[this.mode],this.bitCount,this.binaryShiftByteCount)},t.calculateBinaryShiftCost=function(e){return e.binaryShiftByteCount>62?21:e.binaryShiftByteCount>31?20:e.binaryShiftByteCount>0?10:0},t.INITIAL_STATE=new t(iG,Bl,0,0),t}();function cG(t){var e=Vt.getCharCode(" "),n=Vt.getCharCode("."),r=Vt.getCharCode(",");t[Bl][e]=1;for(var i=Vt.getCharCode("Z"),a=Vt.getCharCode("A"),s=a;s<=i;s++)t[Bl][s]=s-a+2;t[n1][e]=1;for(var o=Vt.getCharCode("z"),c=Vt.getCharCode("a"),s=c;s<=o;s++)t[n1][s]=s-c+2;t[Ia][e]=1;for(var d=Vt.getCharCode("9"),f=Vt.getCharCode("0"),s=f;s<=d;s++)t[Ia][s]=s-f+2;t[Ia][r]=12,t[Ia][n]=13;for(var p=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""],g=0;g<p.length;g++)t[xM][Vt.getCharCode(p[g])]=g;for(var m=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"],g=0;g<m.length;g++)Vt.getCharCode(m[g])>0&&(t[Ds][Vt.getCharCode(m[g])]=g);return t}var d2=cG(Rr.createInt32Array(5,256)),Yg=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},uG=function(){function t(e){this.text=e}return t.prototype.encode=function(){for(var e=Vt.getCharCode(" "),n=Vt.getCharCode(`
`),r=uD.singletonList(lG.INITIAL_STATE),i=0;i<this.text.length;i++){var a=void 0,s=i+1<this.text.length?this.text[i+1]:0;switch(this.text[i]){case Vt.getCharCode("\r"):a=s===n?2:0;break;case Vt.getCharCode("."):a=s===e?3:0;break;case Vt.getCharCode(","):a=s===e?4:0;break;case Vt.getCharCode(":"):a=s===e?5:0;break;default:a=0}a>0?(r=t.updateStateListForPair(r,i,a),i++):r=this.updateStateListForChar(r,i)}var o=uD.min(r,function(c,d){return c.getBitCount()-d.getBitCount()});return o.toBitArray(this.text)},t.prototype.updateStateListForChar=function(e,n){var r,i,a=[];try{for(var s=Yg(e),o=s.next();!o.done;o=s.next()){var c=o.value;this.updateStateForChar(c,n,a)}}catch(d){r={error:d}}finally{try{o&&!o.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}return t.simplifyStates(a)},t.prototype.updateStateForChar=function(e,n,r){for(var i=this.text[n]&255,a=d2[e.getMode()][i]>0,s=null,o=0;o<=Ds;o++){var c=d2[o][i];if(c>0){if(s==null&&(s=e.endBinaryShift(n)),!a||o===e.getMode()||o===Ia){var d=s.latchAndAppend(o,c);r.push(d)}if(!a&&wM[e.getMode()][o]>=0){var f=s.shiftAndAppend(o,c);r.push(f)}}}if(e.getBinaryShiftByteCount()>0||d2[e.getMode()][i]===0){var p=e.addBinaryShiftChar(n);r.push(p)}},t.updateStateListForPair=function(e,n,r){var i,a,s=[];try{for(var o=Yg(e),c=o.next();!c.done;c=o.next()){var d=c.value;this.updateStateForPair(d,n,r,s)}}catch(f){i={error:f}}finally{try{c&&!c.done&&(a=o.return)&&a.call(o)}finally{if(i)throw i.error}}return this.simplifyStates(s)},t.updateStateForPair=function(e,n,r,i){var a=e.endBinaryShift(n);if(i.push(a.latchAndAppend(Ds,r)),e.getMode()!==Ds&&i.push(a.shiftAndAppend(Ds,r)),r===3||r===4){var s=a.latchAndAppend(Ia,16-r).latchAndAppend(Ia,1);i.push(s)}if(e.getBinaryShiftByteCount()>0){var o=e.addBinaryShiftChar(n).addBinaryShiftChar(n+1);i.push(o)}},t.simplifyStates=function(e){var n,r,i,a,s=[];try{for(var o=Yg(e),c=o.next();!c.done;c=o.next()){var d=c.value,f=!0,p=function(A){if(A.isBetterThanOrEqualTo(d))return f=!1,"break";d.isBetterThanOrEqualTo(A)&&(s=s.filter(function(E){return E!==A}))};try{for(var g=(i=void 0,Yg(s)),m=g.next();!m.done;m=g.next()){var x=m.value,b=p(x);if(b==="break")break}}catch(A){i={error:A}}finally{try{m&&!m.done&&(a=g.return)&&a.call(g)}finally{if(i)throw i.error}}f&&s.push(d)}}catch(A){n={error:A}}finally{try{c&&!c.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return s},t}(),dG=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};(function(){function t(){}return t.encodeBytes=function(e){return t.encode(e,t.DEFAULT_EC_PERCENT,t.DEFAULT_AZTEC_LAYERS)},t.encode=function(e,n,r){var i=new uG(e).encode(),a=It.truncDivision(i.getSize()*n,100)+11,s=i.getSize()+a,o,c,d,f,p;if(r!==t.DEFAULT_AZTEC_LAYERS){if(o=r<0,c=Math.abs(r),c>(o?t.MAX_NB_BITS_COMPACT:t.MAX_NB_BITS))throw new it(Vt.format("Illegal value %s for layers",r));d=t.totalBitsInLayer(c,o),f=t.WORD_SIZE[c];var g=d-d%f;if(p=t.stuffBits(i,f),p.getSize()+a>g)throw new it("Data to large for user specified layer");if(o&&p.getSize()>f*64)throw new it("Data to large for user specified layer")}else{f=0,p=null;for(var m=0;;m++){if(m>t.MAX_NB_BITS)throw new it("Data too large for an Aztec code");if(o=m<=3,c=o?m+1:m,d=t.totalBitsInLayer(c,o),!(s>d)){(p==null||f!==t.WORD_SIZE[c])&&(f=t.WORD_SIZE[c],p=t.stuffBits(i,f));var g=d-d%f;if(!(o&&p.getSize()>f*64)&&p.getSize()+a<=g)break}}}var x=t.generateCheckWords(p,d,f),b=p.getSize()/f,A=t.generateModeMessage(o,c,b),E=(o?11:14)+c*4,S=new Int32Array(E),T;if(o){T=E;for(var m=0;m<S.length;m++)S[m]=m}else{T=E+1+2*It.truncDivision(It.truncDivision(E,2)-1,15);for(var I=It.truncDivision(E,2),P=It.truncDivision(T,2),m=0;m<I;m++){var F=m+It.truncDivision(m,15);S[I-m-1]=P-F-1,S[I+m]=P+F+1}}for(var M=new zs(T),m=0,D=0;m<c;m++){for(var R=(c-m)*4+(o?9:12),B=0;B<R;B++)for(var N=B*2,k=0;k<2;k++)x.get(D+N+k)&&M.set(S[m*2+k],S[m*2+B]),x.get(D+R*2+N+k)&&M.set(S[m*2+B],S[E-1-m*2-k]),x.get(D+R*4+N+k)&&M.set(S[E-1-m*2-k],S[E-1-m*2-B]),x.get(D+R*6+N+k)&&M.set(S[E-1-m*2-B],S[m*2+k]);D+=R*8}if(t.drawModeMessage(M,o,T,A),o)t.drawBullsEye(M,It.truncDivision(T,2),5);else{t.drawBullsEye(M,It.truncDivision(T,2),7);for(var m=0,B=0;m<It.truncDivision(E,2)-1;m+=15,B+=16)for(var k=It.truncDivision(T,2)&1;k<T;k+=2)M.set(It.truncDivision(T,2)-B,k),M.set(It.truncDivision(T,2)+B,k),M.set(k,It.truncDivision(T,2)-B),M.set(k,It.truncDivision(T,2)+B)}var j=new Q$;return j.setCompact(o),j.setSize(T),j.setLayers(c),j.setCodeWords(b),j.setMatrix(M),j},t.drawBullsEye=function(e,n,r){for(var i=0;i<r;i+=2)for(var a=n-i;a<=n+i;a++)e.set(a,n-i),e.set(a,n+i),e.set(n-i,a),e.set(n+i,a);e.set(n-r,n-r),e.set(n-r+1,n-r),e.set(n-r,n-r+1),e.set(n+r,n-r),e.set(n+r,n-r+1),e.set(n+r,n+r-1)},t.generateModeMessage=function(e,n,r){var i=new Wr;return e?(i.appendBits(n-1,2),i.appendBits(r-1,6),i=t.generateCheckWords(i,28,4)):(i.appendBits(n-1,5),i.appendBits(r-1,11),i=t.generateCheckWords(i,40,4)),i},t.drawModeMessage=function(e,n,r,i){var a=It.truncDivision(r,2);if(n)for(var s=0;s<7;s++){var o=a-3+s;i.get(s)&&e.set(o,a-5),i.get(s+7)&&e.set(a+5,o),i.get(20-s)&&e.set(o,a+5),i.get(27-s)&&e.set(a-5,o)}else for(var s=0;s<10;s++){var o=a-5+s+It.truncDivision(s,5);i.get(s)&&e.set(o,a-7),i.get(s+10)&&e.set(a+7,o),i.get(29-s)&&e.set(o,a+7),i.get(39-s)&&e.set(a-7,o)}},t.generateCheckWords=function(e,n,r){var i,a,s=e.getSize()/r,o=new yM(t.getGF(r)),c=It.truncDivision(n,r),d=t.bitsToWords(e,r,c);o.encode(d,c-s);var f=n%r,p=new Wr;p.appendBits(0,f);try{for(var g=dG(Array.from(d)),m=g.next();!m.done;m=g.next()){var x=m.value;p.appendBits(x,r)}}catch(b){i={error:b}}finally{try{m&&!m.done&&(a=g.return)&&a.call(g)}finally{if(i)throw i.error}}return p},t.bitsToWords=function(e,n,r){var i=new Int32Array(r),a,s;for(a=0,s=e.getSize()/n;a<s;a++){for(var o=0,c=0;c<n;c++)o|=e.get(a*n+c)?1<<n-c-1:0;i[a]=o}return i},t.getGF=function(e){switch(e){case 4:return Gi.AZTEC_PARAM;case 6:return Gi.AZTEC_DATA_6;case 8:return Gi.AZTEC_DATA_8;case 10:return Gi.AZTEC_DATA_10;case 12:return Gi.AZTEC_DATA_12;default:throw new it("Unsupported word size "+e)}},t.stuffBits=function(e,n){for(var r=new Wr,i=e.getSize(),a=(1<<n)-2,s=0;s<i;s+=n){for(var o=0,c=0;c<n;c++)(s+c>=i||e.get(s+c))&&(o|=1<<n-1-c);(o&a)===a?(r.appendBits(o&a,n),s--):(o&a)===0?(r.appendBits(o|1,n),s--):r.appendBits(o,n)}return r},t.totalBitsInLayer=function(e,n){return((n?88:112)+16*e)*e},t.DEFAULT_EC_PERCENT=33,t.DEFAULT_AZTEC_LAYERS=0,t.MAX_NB_BITS=32,t.MAX_NB_BITS_COMPACT=4,t.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]),t})();const fG=({onDetected:t,onError:e})=>{const n=O.useRef(null),r=O.useRef(new h$),i=O.useRef(!1);return O.useEffect(()=>{const a=n.current;let s;const o=()=>{a.play().catch(f=>console.error("play() failed:",f))},c=()=>{a.videoWidth===0||a.videoHeight===0||i.current||(i.current=!0,r.current.decodeFromStream(s,a,(f,p)=>{f&&(r.current.reset(),t(f.getText())),p&&!(p instanceof _e)&&(r.current.reset(),e(p.message||""))}))};return(async()=>{if(a)try{s=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment",aspectRatio:.5}}),a.srcObject=s,a.muted=!0,a.addEventListener("loadedmetadata",o),a.addEventListener("playing",c)}catch(f){const p=`
: ${f&&f.message?f.message:""}`;console.log("[BarcodeScanner] onError",p),e(p)}})(),()=>{if(r.current.reset(),i.current=!1,a){a.removeEventListener("loadedmetadata",o),a.removeEventListener("playing",c);const f=a.srcObject;f&&f.getTracks().forEach(g=>g.stop()),a.srcObject=null}}},[t,e]),v.jsx(re,{"data-testid":"barcode-scanner-container",children:v.jsx("video",{ref:n,style:{width:"100%",height:"auto",border:"1px solid gray"},autoPlay:!0,muted:!0,playsInline:!0,"data-testid":"barcode-scanner-video"})})},hG={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"90%",maxWidth:400,bgcolor:"background.paper",border:"2px solid #000",boxShadow:24,p:4},pG=({onScan:t,onScanError:e})=>{const[n,r]=O.useState(!1),{setGlobalError:i}=O.useContext(Pr)||{setGlobalError:()=>{}},a=o=>{t(o),r(!1)},s=o=>{i(o),r(!1)};return v.jsxs(v.Fragment,{children:[v.jsx(ze,{variant:"outlined",startIcon:v.jsx(GN,{}),onClick:()=>r(!0),sx:{mt:2,mb:2},fullWidth:!0,"data-testid":"barcode-scan-button",children:""}),v.jsx(WN,{open:n,onClose:()=>r(!1),"aria-labelledby":"scanner-modal-title","data-testid":"barcode-scan-modal",children:v.jsxs(re,{sx:hG,children:[v.jsxs(re,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[v.jsx(te,{id:"scanner-modal-title",variant:"h6",component:"h2",children:""}),v.jsx(Gr,{onClick:()=>r(!1),children:v.jsx(te,{variant:"h6",children:""})})]}),v.jsx(fG,{onDetected:a,onError:s,"data-testid":"barcode-scanner"})]})})]})};function gG(){const[t,e]=O.useState(""),n=No(),r=a=>{console.log("[BookAdd] handleScanDetected :",a),e(a)},i=a=>{n(`/book/${a}`)};return v.jsxs(re,{sx:{maxWidth:500,mx:"auto",pb:{xs:"72px",sm:"80px"}},children:[v.jsx(tp,{title:"",subtitle:"","data-testid":"book-add-header"}),v.jsxs(re,{sx:{px:{xs:1.5,sm:2,md:0}},children:[v.jsx(pG,{onScan:r,onScanError:a=>console.error(a)}),v.jsx(CU,{isbn:t,onBookAdded:i})]})]})}const _l={NONE:0,ONE:1,TWO:2,THREE:3,FOUR:4,FIVE:5},ia=_l.NONE,mG=t=>t!=null&&t>_l.NONE,e0=t=>(t==null?void 0:t.rating)||ia,dD=t=>mG(t)?t:0,r1=t=>{const e={[_l.NONE]:"",[_l.ONE]:"",[_l.TWO]:"",[_l.THREE]:"",[_l.FOUR]:"",[_l.FIVE]:""};return e[t]||e[ia]},v_="lastSearchResults",x_="lastSearchTimestamp",yG=1800*1e3,vG=t=>{try{sessionStorage.setItem(v_,JSON.stringify(t)),sessionStorage.setItem(x_,Date.now().toString()),console.log("[searchStorage] Saved search results to sessionStorage:",t.length)}catch(e){console.warn("[searchStorage] Failed to save search results to sessionStorage:",e)}},xG=()=>{try{const t=sessionStorage.getItem(v_),e=sessionStorage.getItem(x_);if(!t||!e)return null;if(Date.now()-parseInt(e,10)>=yG)return w_(),console.log("[searchStorage] Expired search results removed"),null;const i=JSON.parse(t);return console.log("[searchStorage] Restored search results from sessionStorage:",i.length),i}catch(t){return console.warn("[searchStorage] Failed to restore search results from sessionStorage:",t),null}},w_=()=>{sessionStorage.removeItem(v_),sessionStorage.removeItem(x_)},b_=t=>{const{user:e}=jn(),n=O.useContext(Pr),r=(n==null?void 0:n.setGlobalError)||(()=>{}),[i,a]=O.useState([]),[s,o]=O.useState(!0),[c,d]=O.useState(null),{saveTagsToHistory:f}=Hs("memo",e),p=O.useCallback(async()=>{if(!e||!t){a([]),o(!1);return}try{o(!0),d(null);const A=Gn(vt,"books",t,"memos"),E=Ln(A,sy("createdAt","desc")),I=(await Hn(E)).docs.map(P=>({id:P.id,...P.data(),rating:P.data().rating||ia})).sort((P,F)=>{var R,B,N,k;const M=dD(P.rating),D=dD(F.rating);return M!==D?D-M:new Date(((B=(R=F.createdAt)==null?void 0:R.toDate)==null?void 0:B.call(R))||F.createdAt||0)-new Date(((k=(N=P.createdAt)==null?void 0:N.toDate)==null?void 0:k.call(N))||P.createdAt||0)});a(I)}catch(A){console.error("Error fetching memos:",A),r(""),d("")}finally{o(!1)}},[e==null?void 0:e.uid,t]),g=O.useCallback(async A=>{if(!e||!t)throw new Error("ID");try{const E=Gn(vt,"books",t,"memos"),S=await C0(E,{...A,userId:e.uid,createdAt:ir(),updatedAt:ir()}),T={id:S.id,...A,userId:e.uid,createdAt:new Date,updatedAt:new Date};return a(I=>[T,...I]),S.id}catch(E){throw console.error("Error adding memo:",E),r(""),E}},[e==null?void 0:e.uid,t]),m=O.useCallback(async(A,E)=>{if(!e||!t||!A)throw new Error("IDID");try{const S=ai(vt,"books",t,"memos",A);return await cy(S,{...E,userId:e.uid,updatedAt:ir()}),a(T=>T.map(P=>P.id===A?{...P,...E,userId:e.uid,updatedAt:new Date}:P)),!0}catch(S){throw console.error("Error updating memo:",S),r(""),S}},[e==null?void 0:e.uid,t]),x=O.useCallback(async A=>{if(!e||!t||!A)throw new Error("IDID");try{const E=ai(vt,"books",t,"memos",A);return await XO(E),a(S=>S.filter(T=>T.id!==A)),!0}catch(E){throw console.error("Error deleting memo:",E),r(""),E}},[e==null?void 0:e.uid,t]),b=O.useCallback(async({memoId:A,targetBookId:E})=>{var S;if(!e||!t)throw new Error("ID");if(!A)throw new Error("ID");if(!E)throw new Error("ID");if(E===t)throw new Error("");try{const T=await ZV(vt,async I=>{const P=ai(vt,"books",t,"memos",A),F=await I.get(P);if(!F.exists())throw new Error("");const M=F.data(),D=ai(vt,"books",E);if(!(await I.get(D)).exists())throw new Error("");const B=Gn(vt,"books",E,"memos"),N=ai(B);I.set(N,{...M,userId:e.uid,createdAt:M.createdAt||ir(),updatedAt:ir()}),I.delete(P);const k=ai(vt,"books",t);return I.update(k,{updatedAt:ir()}),I.update(D,{updatedAt:ir()}),{memoData:M,newMemoId:N.id}});return a(I=>I.filter(P=>P.id!==A)),Array.isArray((S=T.memoData)==null?void 0:S.tags)&&T.memoData.tags.length>0&&await f(T.memoData.tags),w_(),T.newMemoId}catch(T){throw console.error("Error moving memo:",T),r(""),T}},[e==null?void 0:e.uid,t,f,r]);return O.useEffect(()=>{p()},[p]),{memos:i,loading:s,error:c,fetchMemos:p,addMemo:g,updateMemo:m,deleteMemo:x,moveMemo:b}},fD=t=>{try{const e=t&&typeof t.toDate=="function"?t.toDate():t instanceof Date?t:null;if(!e)return"";const n=e.getFullYear(),r=e.getMonth()+1,i=e.getDate();return`${n}/${r}/${i}`}catch{return""}},wG=({memo:t,onEdit:e,onDelete:n,onClick:r})=>{const i=di(),a=iM(i,{overrides:{position:"relative",maxWidth:"100%",mx:"auto",cursor:r?"pointer":"default"}}),{key:s}=aU(i),o=aM(i),c=B1("(max-width:600px)"),[d,f]=O.useState(!1),m=(t.text?t.text.split(`
`):[]).slice(0,2).join(`
`),x=t.createdAt&&t.createdAt.toDate?t.createdAt.toDate():null,b=S=>{S&&S.stopPropagation(),f(!1),typeof e=="function"&&e(t,!0)},A=S=>{S&&S.stopPropagation(),f(!1),n(t.id)},E=O5({onSwipedLeft:()=>f(!0),onSwipedRight:()=>f(!1),preventDefaultTouchmoveEvent:!0,trackMouse:!0});return c?v.jsxs(re,{position:"relative",...E,"data-allow-local-swipe":!0,sx:{mb:2},children:[v.jsxs(Sn,{"data-testid":"memo-card",sx:{...a,transform:d?"translateX(-100px)":"none","&:hover":{...a["&:hover"],transform:d?"translateX(-100px)":"translateY(-2px)"}},onClick:r?()=>r(t,!1):void 0,children:[o.corners&&v.jsxs(v.Fragment,{children:[v.jsx(Ts,{position:"top-left",size:20,accentKey:s}),v.jsx(Ts,{position:"top-right",size:20,accentKey:s})]}),v.jsxs(Cn,{sx:{pb:.5,minHeight:48,maxHeight:80,overflow:"hidden",position:"relative",zIndex:1},children:[v.jsx(te,{variant:"body1",sx:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",lineHeight:1.2},children:m}),t.comment&&v.jsx(te,{variant:"body2",color:"text.secondary",sx:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",lineHeight:1.2,mt:.25},children:t.comment}),e0(t)>0&&v.jsx(zd,{value:e0(t),readOnly:!0,size:"small",sx:{mt:.25,mb:.25}})]}),v.jsx(zC,{sx:{justifyContent:"space-between",alignItems:"center",py:0},children:v.jsxs(Fs,{direction:"row",spacing:1,alignItems:"center",children:[t.page&&v.jsxs(te,{variant:"caption",children:["p.",t.page]}),x&&v.jsx(te,{variant:"caption",color:"text.secondary",children:fD(x)}),Array.isArray(t.tags)&&t.tags.map((S,T)=>v.jsx(dn,{label:S,size:"small",color:"secondary"},T))]})})]}),d&&v.jsxs(re,{position:"absolute",top:0,right:0,height:"100%",display:"flex",flexDirection:"column",justifyContent:"center",zIndex:2,sx:{p:1,gap:1},children:[v.jsx(Gr,{onClick:b,sx:{bgcolor:"primary.main",color:"white",mb:1},size:"large",children:v.jsx(p0,{})}),v.jsx(Gr,{onClick:A,sx:{bgcolor:"error.main",color:"white"},size:"large",children:v.jsx(Im,{})})]})]}):v.jsxs(Sn,{"data-testid":"memo-card",sx:{...a,"&:hover":{...a["&:hover"],transform:"translateY(-4px)"}},onClick:r?()=>r(t,!1):void 0,children:[o.corners&&v.jsxs(v.Fragment,{children:[v.jsx(Ts,{position:"top-left",size:20,accentKey:s}),v.jsx(Ts,{position:"top-right",size:20,accentKey:s})]}),v.jsxs(Cn,{sx:{pb:1,minHeight:{xs:48,sm:64},maxHeight:{xs:72,sm:88},overflow:"hidden",position:"relative",zIndex:1},children:[v.jsx(te,{variant:"body1",sx:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:m}),t.comment&&v.jsx(te,{variant:"body2",color:"text.secondary",sx:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:t.comment}),e0(t)>0&&v.jsx(zd,{value:e0(t),readOnly:!0,size:"small",sx:{mt:.5}})]}),v.jsxs(zC,{sx:{justifyContent:"space-between",alignItems:"center",py:0},children:[v.jsxs(Fs,{direction:"row",spacing:1,alignItems:"center",children:[t.page&&v.jsxs(te,{variant:"caption",children:["p.",t.page]}),x&&v.jsx(te,{variant:"caption",color:"text.secondary",children:fD(x)}),Array.isArray(t.tags)&&t.tags.map((S,T)=>v.jsx(dn,{label:S,size:"small",color:"secondary"},T))]}),v.jsxs(re,{sx:{display:{xs:"none",sm:"flex"}},children:[v.jsx(Gr,{"aria-label":"edit",onClick:b,size:"small","data-testid":"memo-edit-button",children:v.jsx(p0,{fontSize:"small"})}),v.jsx(Gr,{"aria-label":"delete",onClick:A,size:"small","data-testid":"memo-delete-button",children:v.jsx(Im,{fontSize:"small"})})]})]})]})},bG=()=>{const{user:t}=jn(),e=O.useContext(Pr),n=(e==null?void 0:e.setGlobalError)||(()=>{}),[r,i]=O.useState([]),[a,s]=O.useState(!1),[o,c]=O.useState(null),d=O.useCallback(async()=>{if(!(t!=null&&t.uid)){i([]),s(!1);return}try{s(!0),c(null);const p=Ln(Gn(vt,"books"),vn("userId","==",t.uid)),x=(await Hn(p)).docs.map(b=>{const A=b.data()||{};return{id:b.id,title:A.title||"",titleLower:(A.title||"").toLocaleLowerCase(),author:A.author||"",status:A.status||"",updatedAt:A.updatedAt||null,coverImageUrl:A.coverImageUrl||""}}).sort((b,A)=>{var E,S;return b.titleLower===A.titleLower?(((E=b.updatedAt)==null?void 0:E.seconds)||0)<(((S=A.updatedAt)==null?void 0:S.seconds)||0)?1:-1:b.titleLower.localeCompare(A.titleLower)});i(x)}catch(p){console.error("Error fetching books for lookup:",p),n(""),c(""),i([])}finally{s(!1)}},[t==null?void 0:t.uid,n]);return O.useEffect(()=>{d()},[d]),{books:O.useMemo(()=>r.map(p=>({id:p.id,title:p.title,author:p.author,status:p.status,updatedAt:p.updatedAt,coverImageUrl:p.coverImageUrl})),[r]),loading:a,error:o,refresh:d}},_G=t=>{if(!t)return"";try{const e=typeof t.toDate=="function"?t.toDate():t instanceof Date?t:null;if(!e)return"";const n=e.getFullYear(),r=String(e.getMonth()+1).padStart(2,"0"),i=String(e.getDate()).padStart(2,"0"),a=String(e.getHours()).padStart(2,"0"),s=String(e.getMinutes()).padStart(2,"0");return`${n}/${r}/${i} ${a}:${s}`}catch{return""}},AG=t=>{if(!t)return"";const e=t.text||t.comment||"";if(!e)return"";const n=e.trim().replace(/\s+/g," ");return n.length<=80?n:`${n.slice(0,77)}`},EG=({open:t,memo:e,currentBookId:n,onClose:r,onMove:i,onSuccess:a})=>{const{books:s,loading:o,error:c,refresh:d}=bG(),[f,p]=O.useState(""),[g,m]=O.useState(null),[x,b]=O.useState("idle"),[A,E]=O.useState(!1),S=O.useMemo(()=>s.find(P=>P.id===f)||null,[s,f]);O.useEffect(()=>{t||(p(""),m(null),b("idle"),E(!1))},[t]),O.useEffect(()=>{c&&p("")},[c]);const T=async P=>{if(P.preventDefault(),m(null),b("idle"),!S){m(""),b("required");return}if(S.id===n){m(""),b("same-book");return}if(!(e!=null&&e.id)){m(""),b("invalid-memo");return}try{E(!0),await(i==null?void 0:i({memoId:e.id,targetBookId:S.id})),a==null||a(S.id),r==null||r()}catch(F){console.error("Failed to move memo:",F),m(""),b("submit-error")}finally{E(!1)}},I=P=>{if(!(P!=null&&P.status))return null;const F=T0[P.status]||"",M=mw[P.status]||"default";return v.jsx(dn,{size:"small",label:F,color:M,sx:{ml:1},"data-testid":"memo-move-book-status-chip"})};return v.jsxs(Ni,{open:t,onClose:A?void 0:r,maxWidth:"sm",fullWidth:!0,"data-testid":"memo-move-dialog",children:[v.jsx(Yi,{children:""}),v.jsx(Li,{dividers:!0,children:v.jsxs(Fs,{spacing:2,children:[e&&v.jsxs(re,{sx:{border:P=>`1px solid ${P.palette.divider}`,borderRadius:1,p:2,backgroundColor:P=>P.palette.action.hover},"data-testid":"memo-move-summary",children:[v.jsx(te,{variant:"subtitle2",gutterBottom:!0,"data-testid":"memo-move-summary-label",children:""}),e.text&&v.jsx(te,{variant:"body2",sx:{whiteSpace:"pre-line",mb:e.comment?1:0},children:AG(e)}),e.comment&&v.jsx(te,{variant:"body2",color:"text.secondary",sx:{whiteSpace:"pre-line"},children:e.comment}),e.createdAt&&v.jsxs(te,{variant:"caption",color:"text.secondary",sx:{display:"block",mt:1},children:[": ",_G(e.createdAt)]})]}),v.jsx(te,{variant:"body2",color:"text.secondary","data-testid":"memo-move-instruction",children:""}),v.jsx(_o,{}),c&&v.jsx(bi,{severity:"error","data-testid":"memo-move-fetch-error",action:v.jsx(ze,{color:"inherit",size:"small",onClick:d,"data-testid":"memo-move-refresh-button",children:""}),children:""}),o?v.jsx(Bo,{variant:"inline",message:"...","data-testid":"memo-move-loading"}):v.jsx("form",{onSubmit:T,"data-testid":"memo-move-form",children:v.jsx(Bs,{options:s,value:S,onChange:(P,F)=>{const M=(F==null?void 0:F.id)||"";if(p(M),!M){m(null),b("idle");return}if(M===n){m(""),b("same-book");return}m(null),b("idle")},getOptionLabel:P=>(P==null?void 0:P.title)||"",noOptionsText:"",renderOption:(P,F)=>O.createElement(re,{component:"li",...P,key:F.id,"data-testid":`memo-move-option-${F.id}`},v.jsxs(Fs,{spacing:.5,sx:{width:"100%"},children:[v.jsxs(re,{sx:{display:"flex",alignItems:"center"},children:[v.jsx(te,{variant:"subtitle2",children:F.title||""}),I(F)]}),F.author&&v.jsx(te,{variant:"body2",color:"text.secondary",children:F.author})]})),renderInput:P=>v.jsx(ct,{...P,"data-testid":"memo-move-book-textfield",label:"",placeholder:"",error:!!g,helperText:g||(s.length===0?"":""),inputProps:{...P.inputProps,"data-testid":"memo-move-book-input"},FormHelperTextProps:{...P.FormHelperTextProps??{},"data-testid":"memo-move-helper-text","data-state":x}}),disabled:A||s.length===0,"data-testid":"memo-move-book-autocomplete"})})]})}),v.jsxs(Bi,{children:[v.jsx(ze,{onClick:r,disabled:A,"data-testid":"memo-move-cancel-button",children:""}),v.jsx(ze,{onClick:T,variant:"contained",disabled:A||!S||S.id===n||s.length===0,"data-testid":"memo-move-submit-button",children:A?"...":""})]})]})},SG=t=>{try{const e=t&&typeof t.toDate=="function"?t.toDate():t instanceof Date?t:null;if(!e)return"";const n=e.getFullYear(),r=e.getMonth()+1,i=e.getDate(),a=e.getHours(),s=String(e.getMinutes()).padStart(2,"0"),o=String(e.getSeconds()).padStart(2,"0");return`${n}/${r}/${i} ${a}:${s}:${o}`}catch{return""}},bM=({open:t,memo:e,bookId:n,onClose:r,onUpdate:i,onDelete:a,onMove:s,editMode:o=!1})=>{const{setGlobalError:c}=O.useContext(Pr),{updateMemo:d,deleteMemo:f,moveMemo:p}=b_(n),[g,m]=O.useState(o?"edit":"view"),[x,b]=O.useState(null),[A,E]=O.useState(!1),[S,T]=O.useState(""),[I,P]=O.useState(!1);wi.useEffect(()=>{e&&(b({...e,rating:e0(e)}),m(o?"edit":"view"),E(!1),T(""),P(!1))},[e,o]);const F=()=>{b(null),m("view"),E(!1),T(""),P(!1),typeof r=="function"&&r()},M=async N=>{if(N.preventDefault(),!x||!x.text.trim())return;let k=x.tags||[];S&&!k.includes(S)&&(k=[...k,S]);try{await d(x.id,{text:x.text,comment:x.comment,page:Number(x.page)||null,tags:k,rating:x.rating||ia}),F(),i&&i()}catch(j){console.error("Error updating memo: ",j),c("")}},D=async N=>{try{await f(N),F(),a&&a()}catch(k){console.error("Error deleting memo: ",k),c("")}},R=async({memoId:N,targetBookId:k})=>p({memoId:N,targetBookId:k}),B=N=>{typeof s=="function"&&s(N),typeof i=="function"&&i(),F()};return e?v.jsxs(v.Fragment,{children:[v.jsxs(Ni,{open:t,onClose:F,maxWidth:"sm",fullWidth:!0,"data-testid":"memo-detail-dialog",children:[v.jsx(Yi,{"data-testid":"memo-detail-title","data-testid-title":"",children:""}),v.jsx(Li,{children:g==="view"?v.jsxs(v.Fragment,{children:[v.jsx(te,{variant:"body1",sx:{whiteSpace:"pre-line",mb:2},"data-testid":"memo-detail-text",children:x==null?void 0:x.text}),(x==null?void 0:x.comment)&&v.jsx(te,{variant:"body2",color:"text.secondary",sx:{mb:1},"data-testid":"memo-detail-comment",children:x.comment}),(x==null?void 0:x.rating)!=null&&v.jsxs(re,{sx:{mb:1},children:[x.rating>0&&v.jsx(zd,{value:x.rating,readOnly:!0,size:"small",sx:{mb:.5}}),v.jsx(te,{variant:"caption",color:"text.secondary",sx:{display:"block"},"data-testid":"memo-detail-rating-description",children:r1(x.rating||ia)})]}),v.jsx(Fs,{direction:"row",spacing:1,sx:{mb:1,flexWrap:"wrap"},"data-testid":"memo-detail-tags",children:Array.isArray(x==null?void 0:x.tags)&&x.tags.map((N,k)=>v.jsx(dn,{label:N,size:"small",color:"secondary"},k))}),(x==null?void 0:x.page)&&v.jsxs(te,{variant:"caption",sx:{display:"block",mb:1},"data-testid":"memo-detail-page",children:["p. ",x.page]}),(x==null?void 0:x.createdAt)&&v.jsx(te,{variant:"caption",color:"text.secondary",sx:{display:"block",mb:1},"data-testid":"memo-detail-created-at",children:SG(x.createdAt)})]}):v.jsxs(re,{component:"form",onSubmit:M,sx:{mt:1},children:[v.jsx(ct,{label:"",fullWidth:!0,multiline:!0,rows:4,value:(x==null?void 0:x.text)||"",onChange:N=>b({...x,text:N.target.value}),margin:"normal",required:!0,inputProps:{"data-testid":"memo-text-input"}}),v.jsx(ct,{label:"",fullWidth:!0,multiline:!0,rows:2,value:(x==null?void 0:x.comment)||"",onChange:N=>b({...x,comment:N.target.value}),margin:"normal",inputProps:{"data-testid":"memo-comment-input"}}),v.jsx(ct,{label:"",type:"number",value:(x==null?void 0:x.page)||"",onChange:N=>b({...x,page:N.target.value}),margin:"normal",sx:{mr:2},inputProps:{"data-testid":"memo-page-input"}}),v.jsxs(ki,{margin:"normal",fullWidth:!0,children:[v.jsx($2,{component:"legend",children:""}),v.jsx(zd,{value:(x==null?void 0:x.rating)||ia,onChange:(N,k)=>{b({...x,rating:k||ia})},size:"large",sx:{mt:1},"data-testid":"memo-rating-input"}),v.jsx(te,{variant:"caption",color:"text.secondary",sx:{mt:1,display:"block"},children:r1((x==null?void 0:x.rating)||ia)})]}),v.jsx(Bs,{multiple:!0,freeSolo:!0,options:[],value:(x==null?void 0:x.tags)||[],getOptionLabel:N=>typeof N=="string"?N:N.inputValue||N.tag||"",onChange:(N,k)=>{const j=(k||[]).map(q=>{if(typeof q=="string")return q;if(q&&typeof q=="object"){if("inputValue"in q&&q.inputValue)return q.inputValue;if("tag"in q&&q.tag)return q.tag}return""}).filter(Boolean);b({...x,tags:j})},inputValue:S,onInputChange:(N,k)=>T(k),renderInput:N=>v.jsx(ct,{...N,label:"",margin:"normal",fullWidth:!0,placeholder:": ,,",inputProps:{...N.inputProps,"data-testid":"memo-tags-input"}})})]})}),v.jsx(Bi,{children:g==="view"?v.jsxs(v.Fragment,{children:[v.jsx(ze,{onClick:()=>P(!0),"data-testid":"memo-move-button",children:""}),v.jsx(ze,{onClick:()=>m("edit"),"data-testid":"memo-edit-button",children:""}),v.jsx(ze,{onClick:()=>E(!0),color:"error","data-testid":"memo-delete-button",children:""}),v.jsx(ze,{onClick:F,"data-testid":"memo-close-button",children:""})]}):v.jsxs(v.Fragment,{children:[v.jsx(ze,{onClick:()=>m("view"),"data-testid":"memo-cancel-button",children:""}),v.jsx(ze,{onClick:M,variant:"contained","data-testid":"memo-update-button",children:""})]})})]}),v.jsxs(Ni,{open:A,onClose:()=>E(!1),"data-testid":"memo-delete-dialog",children:[v.jsx(Yi,{"data-testid":"memo-delete-confirm-title",children:""}),v.jsx(Li,{children:v.jsx(te,{children:""})}),v.jsxs(Bi,{children:[v.jsx(ze,{onClick:()=>E(!1),"data-testid":"memo-delete-cancel-button",children:""}),v.jsx(ze,{onClick:()=>{D(x==null?void 0:x.id)},color:"error",variant:"contained","data-testid":"memo-delete-confirm-button",children:""})]})]}),v.jsx(EG,{open:I,memo:x,currentBookId:n,onClose:()=>P(!1),onMove:R,onSuccess:B})]}):null},CG=({bookId:t,onMemoUpdated:e})=>{const{setGlobalError:n}=O.useContext(Pr),{memos:r,loading:i,deleteMemo:a}=b_(t),[s,o]=O.useState(null),[c,d]=O.useState(!1),[f,p]=O.useState(!1),[g,m]=O.useState(null),[x,b]=O.useState(!1),A=(F,M=!1)=>{o(F),b(M),d(!0)},E=F=>{const M=r.find(D=>D.id===F);M&&(m(M),p(!0))},S=async()=>{if(g)try{await a(g.id),p(!1),m(null)}catch(F){console.error("Error deleting memo:",F),n("")}},T=()=>{o(null),d(!1)},I=()=>{p(!1),m(null)},P=()=>{e&&e()};return i?v.jsx(te,{children:"..."}):r.length===0?v.jsx(te,{children:""}):v.jsxs(v.Fragment,{children:[v.jsx(re,{sx:{display:"flex",flexDirection:"column",gap:2},children:r.map(F=>v.jsx(wG,{memo:F,onEdit:(M,D)=>A(M,D),onDelete:E,onClick:M=>A(M,!1)},F.id))}),v.jsx(bM,{open:c,memo:s,bookId:t,onClose:T,onUpdate:P,onDelete:P,editMode:x}),v.jsxs(Ni,{open:f,onClose:I,"data-testid":"memo-delete-dialog",children:[v.jsx(Yi,{"data-testid":"memo-delete-confirm-title",children:""}),v.jsx(Li,{children:v.jsx(te,{children:""})}),v.jsxs(Bi,{children:[v.jsx(ze,{onClick:I,"data-testid":"memo-delete-cancel-button",children:""}),v.jsx(ze,{onClick:S,color:"error",variant:"contained","data-testid":"memo-delete-confirm-button",children:""})]})]})]})},hD=({onTextDetected:t,disabled:e=!1})=>{const[n,r]=O.useState(!1),[i,a]=O.useState(null),s=async()=>{r(!0),a(null);try{if(navigator.clipboard&&navigator.clipboard.readText){const c=await navigator.clipboard.readText();c&&c.trim()?(console.log("[CameraPasteOCR] :",c),t(c.trim())):a("")}else a("")}catch(c){console.error("[CameraPasteOCR] :",c),a("")}finally{r(!1)}},o=()=>{a(null)};return v.jsxs(v.Fragment,{children:[v.jsx(ze,{variant:"outlined",startIcon:v.jsx(YN,{}),onClick:s,disabled:e||n,fullWidth:!0,sx:{mt:1,mb:1,height:{xs:"40px",sm:"48px"},fontSize:{xs:"0.8rem",sm:"0.9rem"}},"data-testid":"camera-paste-ocr-button",children:n?"...":""}),v.jsx(jc,{open:!!i,autoHideDuration:6e3,onClose:o,anchorOrigin:{vertical:"bottom",horizontal:"center"},children:v.jsx(bi,{onClose:o,severity:"error","data-testid":"camera-paste-ocr-error",children:i})})]})};var pD={};const xi={ERROR:0,WARN:1,INFO:2,DEBUG:3},TG=()=>{let t,e=!1;try{if(typeof window<"u"){const n=window.__VITE_ENV__||{};t=n.VITE_LOG_LEVEL,e=n.PROD}}catch{}return typeof process<"u"&&pD&&(t||(t=pD.VITE_LOG_LEVEL),e||(e=!0)),t&&xi[t.toUpperCase()]!==void 0?xi[t.toUpperCase()]:e?xi.WARN:xi.DEBUG},IG=TG(),pr={AUTH:" AUTH",BOOK:" BOOK",MEMO:" MEMO",STATUS:" STATUS",FIREBASE:" FIREBASE"},DG=(t,e,n,r=null)=>{const i=new Date().toISOString();let s=`${{[xi.ERROR]:"",[xi.WARN]:"",[xi.INFO]:"",[xi.DEBUG]:""}[t]||""} ${e} [${i}] ${n}`;return r!=null&&(s+=`
  Data: ${JSON.stringify(r,null,2)}`),s},qg=(t,e,n,r=null)=>{if(t>IG)return;const i=DG(t,e,n,r);switch(t){case xi.ERROR:console.error(i);break;case xi.WARN:console.warn(i);break;case xi.INFO:console.info(i);break;case xi.DEBUG:console.log(i);break;default:console.log(i)}},xt={error:(t,e,n)=>qg(xi.ERROR,t,e,n),warn:(t,e,n)=>qg(xi.WARN,t,e,n),info:(t,e,n)=>qg(xi.INFO,t,e,n),debug:(t,e,n)=>qg(xi.DEBUG,t,e,n),auth:{error:(t,e)=>xt.error(pr.AUTH,t,e),warn:(t,e)=>xt.warn(pr.AUTH,t,e),info:(t,e)=>xt.info(pr.AUTH,t,e),debug:(t,e)=>xt.debug(pr.AUTH,t,e)},book:{error:(t,e)=>xt.error(pr.BOOK,t,e),warn:(t,e)=>xt.warn(pr.BOOK,t,e),info:(t,e)=>xt.info(pr.BOOK,t,e),debug:(t,e)=>xt.debug(pr.BOOK,t,e)},memo:{error:(t,e)=>xt.error(pr.MEMO,t,e),warn:(t,e)=>xt.warn(pr.MEMO,t,e),info:(t,e)=>xt.info(pr.MEMO,t,e),debug:(t,e)=>xt.debug(pr.MEMO,t,e)},status:{error:(t,e)=>xt.error(pr.STATUS,t,e),warn:(t,e)=>xt.warn(pr.STATUS,t,e),info:(t,e)=>xt.info(pr.STATUS,t,e),debug:(t,e)=>xt.debug(pr.STATUS,t,e)},firebase:{error:(t,e)=>xt.error(pr.FIREBASE,t,e),warn:(t,e)=>xt.warn(pr.FIREBASE,t,e),info:(t,e)=>xt.info(pr.FIREBASE,t,e),debug:(t,e)=>xt.debug(pr.FIREBASE,t,e)}},RG=({bookId:t,bookTags:e=[],onMemoAdded:n,onClose:r})=>{const{user:i}=jn(),{setGlobalError:a}=O.useContext(Pr),{addMemo:s}=b_(t),[o,c]=O.useState(""),[d,f]=O.useState(""),[p,g]=O.useState(""),[m,x]=O.useState([]),[b,A]=O.useState(""),[E,S]=O.useState(ia),[T,I]=O.useState(!1),{tagOptions:P,fetchTagHistory:F,saveTagsToHistory:M}=Hs("memo",i);O.useEffect(()=>{F()},[F]);const D=async k=>{if(k.preventDefault(),!o.trim()||T)return;I(!0),xt.memo.debug("handleSubmit",{text:o,comment:d,page:p,tags:m});let j=m;b&&!m.includes(b)&&(j=[...m,b]),xt.memo.debug("",j);try{xt.memo.debug("addMemo");const q=await s({text:o,comment:d,page:Number(p)||null,tags:j,rating:E||ia});xt.memo.info("addMemo",{memoId:q}),await M(j),xt.memo.debug(""),c(""),f(""),g(""),x([]),A(""),S(ia),xt.memo.debug(""),n&&(xt.memo.debug("onMemoAdded"),n())}catch(q){xt.memo.error("Error adding memo",q),a("")}finally{I(!1)}},R=()=>{r&&r()},B=k=>{xt.memo.info("OCR",{detectedText:k}),c(k)};return r?v.jsxs(v.Fragment,{children:[v.jsx(Yi,{"data-testid":"memo-add-dialog-title",children:""}),v.jsx(Li,{children:v.jsxs(re,{component:"form",onSubmit:D,sx:{mt:1},"data-testid":"memo-add-form",children:[v.jsx(ct,{label:"",fullWidth:!0,multiline:!0,rows:3,value:o,onChange:k=>c(k.target.value),required:!0,inputProps:{"data-testid":"memo-text-input"}}),v.jsx(hD,{onTextDetected:B}),v.jsx(ct,{label:"",fullWidth:!0,multiline:!0,rows:2,value:d,onChange:k=>f(k.target.value),inputProps:{"data-testid":"memo-comment-input"}}),v.jsx(ct,{label:"",type:"number",value:p,onChange:k=>g(k.target.value),sx:{mr:2,width:{xs:"100%",sm:"auto"}},inputProps:{"data-testid":"memo-page-input"}}),v.jsxs(ki,{margin:"normal",fullWidth:!0,children:[v.jsx($2,{component:"legend",children:""}),v.jsx(zd,{value:E,onChange:(k,j)=>{S(j||ia)},size:"large",sx:{mt:1},"data-testid":"memo-rating-input"}),v.jsx(te,{variant:"caption",color:"text.secondary",sx:{mt:1,display:"block"},"data-testid":"memo-rating-description",children:r1(E)})]}),v.jsx(Bs,{multiple:!0,freeSolo:!0,options:P,value:m,getOptionLabel:k=>typeof k=="string"?k:k.inputValue||k.tag||"",onChange:async(k,j)=>{const q=(j||[]).map(X=>{if(typeof X=="string")return X;if(X&&typeof X=="object"){if("inputValue"in X&&X.inputValue)return X.inputValue;if("tag"in X&&X.tag)return X.tag}return""}).filter(Boolean);x(q),await M(q)},inputValue:b,onInputChange:(k,j)=>A(j),renderInput:k=>v.jsx(ct,{...k,label:"",fullWidth:!0,placeholder:": ,,",inputProps:{...k.inputProps,"data-testid":"memo-tags-input"}})})]})}),v.jsxs(Bi,{children:[v.jsx(ze,{onClick:R,"data-testid":"memo-add-cancel",disabled:T,children:""}),v.jsx(ze,{onClick:D,variant:"contained","data-testid":"memo-add-submit",disabled:T,children:T?"...":""})]})]}):v.jsxs(re,{component:"form",onSubmit:D,sx:{mt:1},"data-testid":"memo-add-form",children:[v.jsx(ct,{label:"",fullWidth:!0,multiline:!0,rows:3,value:o,onChange:k=>c(k.target.value),required:!0,inputProps:{"data-testid":"memo-text-input"}}),v.jsx(hD,{onTextDetected:B}),v.jsx(ct,{label:"",fullWidth:!0,multiline:!0,rows:2,value:d,onChange:k=>f(k.target.value),inputProps:{"data-testid":"memo-comment-input"}}),v.jsx(ct,{label:"",type:"number",value:p,onChange:k=>g(k.target.value),sx:{mr:2,width:{xs:"100%",sm:"auto"}},inputProps:{"data-testid":"memo-page-input"}}),v.jsxs(ki,{margin:"normal",fullWidth:!0,children:[v.jsx($2,{component:"legend",children:""}),v.jsx(zd,{value:E,onChange:(k,j)=>{S(j||ia)},size:"large",sx:{mt:1},"data-testid":"memo-rating-input"}),v.jsx(te,{variant:"caption",color:"text.secondary",sx:{mt:1,display:"block"},"data-testid":"memo-rating-description",children:r1(E)})]}),v.jsx(Bs,{multiple:!0,freeSolo:!0,options:P,value:m,getOptionLabel:k=>typeof k=="string"?k:k.inputValue||k.tag||"",onChange:async(k,j)=>{const q=(j||[]).map(X=>{if(typeof X=="string")return X;if(X&&typeof X=="object"){if("inputValue"in X&&X.inputValue)return X.inputValue;if("tag"in X&&X.tag)return X.tag}return""}).filter(Boolean);x(q),await M(q)},inputValue:b,onInputChange:(k,j)=>A(j),renderInput:k=>v.jsx(ct,{...k,label:"",fullWidth:!0,placeholder:": ,,",inputProps:{...k.inputProps,"data-testid":"memo-tags-input"}})}),v.jsx(ze,{type:"submit",variant:"contained",disabled:T,sx:{mt:2,mb:{xs:8,sm:2},width:{xs:"100%",sm:"auto"}},"data-testid":"memo-add-submit",children:T?"...":""})]})};function gD(t){if(!t)return null;if(typeof t.toDate=="function")return t.toDate();try{return new Date(t)}catch{return null}}function OG(t){if(!Array.isArray(t)||t.length===0)return{};const e=t.find(a=>(a==null?void 0:a.status)===ft.READING||(a==null?void 0:a.status)===ft.RE_READING),n=t.find(a=>(a==null?void 0:a.status)===ft.FINISHED),r=t.find(a=>(a==null?void 0:a.status)===ft.RE_READING),i={};return e!=null&&e.changedAt&&(i.readingStartedAt=e.changedAt),n!=null&&n.changedAt&&(i.finishedAt=n.changedAt),r!=null&&r.changedAt&&(i.reReadingStartedAt=r.changedAt),i}function MG(t){var e;return!Array.isArray(t)||t.length===0?null:((e=t[0])==null?void 0:e.status)??null}function PG(t){if(!t)return null;const{readingStartedAt:e,finishedAt:n}=t;if(!e||!n)return null;const r=gD(e),i=gD(n);if(!r||!i)return null;const a=Math.abs(i-r);return Math.ceil(a/(1e3*60*60*24))}const __=t=>{const{user:e}=jn(),n=O.useContext(Pr),r=(n==null?void 0:n.setGlobalError)||(()=>{}),[i,a]=O.useState([]),[s,o]=O.useState(!0),[c,d]=O.useState(null),f=O.useCallback(()=>{if(!e||!t)return xt.status.debug("No user or bookId",{user:!!e,bookId:t}),o(!1),()=>{};try{xt.status.debug("Setting up listener for bookId",{bookId:t}),o(!0),d(null);const E=Gn(vt,"books",t,"statusHistory"),S=Ln(E);return YV(S,I=>{xt.status.debug("Snapshot received",{size:I.size,empty:I.empty,bookId:t});const P=I.docs.map(F=>({id:F.id,...F.data()}));P.sort((F,M)=>{var B,N;const D=(B=F.changedAt)!=null&&B.toDate?F.changedAt.toDate():new Date(F.changedAt||0);return((N=M.changedAt)!=null&&N.toDate?M.changedAt.toDate():new Date(M.changedAt||0))-D}),a(P),o(!1)},I=>{if(xt.status.error("Error fetching status history",I),xt.status.error("Error details",{code:I.code,message:I.message,bookId:t,userId:e.uid}),I.code==="permission-denied"){xt.status.warn("Permission denied for statusHistory, treating as empty history"),a([]),o(!1);return}r(""),d(""),o(!1)})}catch(E){return xt.status.error("Error setting up status history listener",E),r(""),d(""),o(!1),()=>{}}},[t,e,r]),p=O.useCallback(async(E,S,T=null)=>{if(!e||!t||!e1(E))throw new Error("");try{const I=Gn(vt,"books",t,"statusHistory"),P={status:E,previousStatus:S||null,changedAt:ir(),changedBy:e.uid,notes:T||null,createdAt:ir()};return(await C0(I,P)).id}catch(I){throw xt.status.error("Error adding status history",I),r(""),I}},[t,e,r]),g=O.useCallback(()=>i.length?OG(i):{},[i]),m=O.useCallback(()=>MG(i),[i]),x=O.useCallback(()=>PG(g()),[g]),b=O.useCallback(async(E,S,T)=>{if(!e||!t){xt.status.debug("No user or bookId for manual history addition",{user:!!e,bookId:t});return}if(!e1(S))throw new Error("Invalid status");try{xt.status.info("Adding manual status history",{bookId:t,date:E,status:S,previousStatus:T,userId:e.uid});const I=Gn(vt,"books",t,"statusHistory"),P={status:S,previousStatus:T||"",changedAt:E,userId:e.uid};await C0(I,P),xt.status.info("Manual status history added successfully")}catch(I){throw xt.status.error("Error adding manual status history",I),r(""),I}},[e,t,r]),A=i.length>0?i[0]:null;return O.useEffect(()=>f(),[t,e]),{history:i,loading:s,error:c,addStatusHistory:p,addManualStatusHistory:b,latestHistory:A,getImportantDates:g,getCurrentStatus:m,getReadingDuration:x,refetch:f}},kG=({book:t,bookId:e,onStatusChange:n})=>{const r=O.useContext(Pr),i=(r==null?void 0:r.setGlobalError)||(()=>{}),{addStatusHistory:a}=__(e),[s,o]=O.useState(!1),[c,d]=O.useState(null),f=async x=>{if(!t||!e1(x))return;o(!0),d(null);const b=ai(vt,"books",e),A=t.status||Cr;try{const E={status:x,updatedAt:ir()};x===ft.FINISHED&&(E.finishedAt=ir()),await cy(b,E);try{await a(x,A)}catch(S){console.error("Error adding status history:",S)}n(x)}catch(E){console.error("Error updating status:",E),i("")}finally{o(!1)}},p=x=>{d(x.currentTarget)},g=()=>{d(null)};if(!t)return null;const m=t.status||Cr;return v.jsxs(re,{sx:{display:"flex",alignItems:"center",gap:1},children:[v.jsx(dn,{label:Us(m),color:bs(m),"data-testid":"book-status-chip"}),v.jsx(ze,{onClick:p,variant:"outlined",disabled:s,endIcon:v.jsx(qN,{}),"data-testid":"book-status-change-button",children:s?"...":""}),v.jsx(mR,{anchorEl:c,open:!!c,onClose:g,"data-testid":"book-status-menu",children:l_.map(x=>v.jsx(Zt,{onClick:()=>f(x),disabled:x===m,"data-testid":`status-menu-item-${x}`,children:Us(x)},x))})]})},NG=(t,e="google")=>{const n=encodeURIComponent(t),r={google:`https://www.google.com/search?q=${n}`,amazon:`https://www.amazon.co.jp/s?k=${n}`,rakuten:`https://books.rakuten.co.jp/rb/Search?qt=${n}`};return r[e]||r.google};function LG(t={}){const{showSnackbar:e,enableExternalSearch:n=!0}=t,[r,i]=O.useState(null),[a,s]=O.useState(""),[o,c]=O.useState(null),d=(x,b,A=null)=>{x.preventDefault(),x.stopPropagation(),console.log("[useTextCopyMenu] handleClick called",{text:b,currentTarget:x.currentTarget}),i(x.currentTarget),s(b),c(A)},f=(x,b,A=null)=>{x.preventDefault(),x.stopPropagation(),console.log("[useTextCopyMenu] handleContextMenu called",{text:b,currentTarget:x.currentTarget}),i(x.currentTarget),s(b),c(A)},p=()=>{i(null)};return{handleClick:d,handleContextMenu:f,menuProps:{anchorEl:r,open:!!r,onClose:p},handleCopy:async()=>{try{await navigator.clipboard.writeText(a),e&&e("","success"),p()}catch(x){console.error(":",x),e&&e("","error")}},handleExternalSearch:x=>{if(!n)return;let b=a;o!=null&&o.author&&a===o.title&&(b=`${a} ${o.author}`);const A=NG(b,x);window.open(A,"_blank","noopener,noreferrer"),p()},selectedText:a}}const BG=({book:t,bookId:e,onStatusChange:n,onEdit:r})=>{const i=di(),{palette:a}=dy(i),[s,o]=wi.useState({open:!1,message:"",severity:"success"}),c=(x,b="success")=>{o({open:!0,message:x,severity:b})},{handleClick:d,handleContextMenu:f,menuProps:p,handleCopy:g,handleExternalSearch:m}=LG({showSnackbar:c});return t?v.jsxs(v.Fragment,{children:[v.jsxs(re,{"data-testid":"book-info",children:[v.jsx(re,{sx:{display:"flex",justifyContent:"center",alignItems:"center",mb:2},children:v.jsx(kG,{book:t,bookId:e,onStatusChange:n})}),v.jsx(re,{sx:{textAlign:"left",mb:2},"data-testid":"book-cover-section",children:t.coverImageUrl?v.jsx("img",{src:t.coverImageUrl,alt:`${t.title}`,style:{maxHeight:"250px",width:"auto"},"data-testid":"book-cover-image"}):v.jsx(re,{sx:{border:`1px dashed ${(a==null?void 0:a.border)||(a==null?void 0:a.light)||"grey"}`,height:250,width:167,display:"flex",alignItems:"center",justifyContent:"center",mx:"auto"},"data-testid":"book-cover-placeholder",children:v.jsx(te,{variant:"body1",color:"text.secondary",children:""})})}),v.jsxs(re,{sx:{mb:2},"data-testid":"book-details",children:[v.jsx(te,{variant:"h4",gutterBottom:!0,sx:{wordBreak:"break-word",cursor:"pointer",userSelect:"none","&:hover":{opacity:.8}},onClick:x=>d(x,t.title,t),onContextMenu:x=>f(x,t.title,t),"data-testid":"book-title",children:t.title}),v.jsx(te,{variant:"h6",color:"text.secondary",gutterBottom:!0,sx:{cursor:"pointer",userSelect:"none","&:hover":{opacity:.8}},onClick:x=>d(x,t.author,t),onContextMenu:x=>f(x,t.author,t),"data-testid":"book-author",children:t.author}),t.publisher&&v.jsxs(te,{variant:"body1",color:"text.secondary",gutterBottom:!0,sx:{cursor:"pointer",userSelect:"none","&:hover":{opacity:.8}},onClick:x=>d(x,t.publisher,t),onContextMenu:x=>f(x,t.publisher,t),"data-testid":"book-publisher",children:[": ",t.publisher]}),t.publishedDate&&v.jsxs(te,{variant:"body1",color:"text.secondary",gutterBottom:!0,"data-testid":"book-published-date",children:[": ",t.publishedDate]}),t.isbn&&v.jsxs(te,{variant:"body1",color:"text.secondary",gutterBottom:!0,component:"span",sx:{cursor:"pointer",userSelect:"none",textDecoration:"underline",textUnderlineOffset:2,"&:hover":{opacity:.8}},onClick:()=>{const x=t.isbn.replace(/[^0-9Xx]/g,"");x&&window.open(`https://www.amazon.co.jp/s?k=${x}`,"_blank","noopener,noreferrer")},"data-testid":"book-isbn",children:["ISBN: ",t.isbn]}),t.acquisitionType&&t.acquisitionType!==Qa.UNKNOWN&&v.jsx(re,{sx:{mb:1},children:v.jsx(dn,{label:`: ${JO(t.acquisitionType)}`,color:"primary",variant:"outlined",size:"small","data-testid":"book-acquisition-type"})})]})]}),v.jsxs(mR,{...p,"data-testid":"text-copy-menu",children:[v.jsxs(Zt,{onClick:g,"data-testid":"text-copy-menu-copy",children:[v.jsx(dm,{children:v.jsx(XN,{fontSize:"small"})}),v.jsx(um,{children:""})]}),v.jsxs(Zt,{onClick:()=>m("google"),"data-testid":"text-copy-menu-google",children:[v.jsx(dm,{children:v.jsx(L1,{fontSize:"small"})}),v.jsx(um,{children:"Google"})]}),v.jsxs(Zt,{onClick:()=>m("amazon"),"data-testid":"text-copy-menu-amazon",children:[v.jsx(dm,{children:v.jsx(KN,{fontSize:"small"})}),v.jsx(um,{children:"Amazon"})]})]}),v.jsx(jc,{open:s.open,autoHideDuration:3e3,onClose:()=>o({...s,open:!1}),anchorOrigin:{vertical:"bottom",horizontal:"center"},"data-testid":"text-copy-snackbar",children:v.jsx(bi,{onClose:()=>o({...s,open:!1}),severity:s.severity,sx:{width:"100%"},"data-testid":"text-copy-alert",children:s.message})})]}):null},FG=t=>t?t.replace(/[^0-9Xx]/g,"").toUpperCase():"",jG=({open:t,book:e,onClose:n,onSave:r})=>{const[i,a]=O.useState(""),[s,o]=O.useState(""),[c,d]=O.useState(""),[f,p]=O.useState(""),[g,m]=O.useState(""),[x,b]=O.useState(!1),[A,E]=O.useState(!1),[S,T]=O.useState(null),I=O.useMemo(()=>!!(e!=null&&e.isbn),[e==null?void 0:e.isbn]);O.useEffect(()=>{t&&e&&(a(e.title||""),o(e.author||""),d(e.publisher||""),p(e.publishedDate||""),m(e.coverImageUrl||""),T(null),b(!1),E(!1)),t||(T(null),b(!1),E(!1))},[t,e]);const P=()=>{x||n==null||n()},F=()=>{const D=FG(e==null?void 0:e.isbn);if(!D){T("ISBN");return}const R=`https://cover.openbd.jp/${D}.jpg`;E(!0),T(null);const B=new Image;B.onload=()=>{m(R),E(!1),T(null)},B.onerror=()=>{E(!1),T("openBD")},B.src=R},M=async D=>{D.preventDefault();const R=i.trim();if(!R){T("");return}b(!0),T(null);try{await(r==null?void 0:r({title:R,author:s.trim(),publisher:c.trim(),publishedDate:f.trim(),coverImageUrl:g.trim()})),n==null||n()}catch(B){console.error("Failed to update book:",B),T(""),b(!1)}};return v.jsxs(Ni,{open:t,onClose:P,maxWidth:"sm",fullWidth:!0,"data-testid":"book-edit-dialog",children:[v.jsx(Yi,{"data-testid":"book-edit-dialog-title",children:""}),v.jsx(Li,{dividers:!0,children:v.jsx(re,{component:"form",onSubmit:M,id:"book-edit-form",noValidate:!0,children:v.jsxs(Fs,{spacing:2,children:[(e==null?void 0:e.isbn)&&v.jsx(re,{children:v.jsxs(te,{variant:"body2",color:"text.secondary","data-testid":"book-edit-isbn",children:["ISBN: ",e.isbn]})}),v.jsx(ct,{label:"",value:i,onChange:D=>a(D.target.value),required:!0,fullWidth:!0,size:"small",inputProps:{"data-testid":"book-edit-title-input"}}),v.jsx(ct,{label:"",value:s,onChange:D=>o(D.target.value),fullWidth:!0,size:"small",inputProps:{"data-testid":"book-edit-author-input"}}),v.jsx(ct,{label:"",value:c,onChange:D=>d(D.target.value),fullWidth:!0,size:"small",inputProps:{"data-testid":"book-edit-publisher-input"}}),v.jsx(ct,{label:"",value:f,onChange:D=>p(D.target.value),fullWidth:!0,size:"small",inputProps:{"data-testid":"book-edit-published-date-input"}}),v.jsx(ct,{label:"URL",value:g,onChange:D=>m(D.target.value),fullWidth:!0,size:"small",inputProps:{"data-testid":"book-edit-cover-url-input"}}),v.jsxs(Fs,{direction:"row",spacing:1,children:[v.jsx(ze,{variant:"outlined",onClick:F,disabled:!I||x||A,"data-testid":"book-edit-fetch-cover-button",children:A?"...":"openBD"}),v.jsx(ze,{variant:"outlined",onClick:()=>{m(""),T(null)},disabled:x||A,"data-testid":"book-edit-clear-cover-button",children:""})]}),g&&v.jsx(re,{sx:{textAlign:"center",mt:1},children:v.jsx("img",{src:g,alt:"",style:{maxHeight:180,borderRadius:4},"data-testid":"book-edit-cover-preview"})}),S&&v.jsx(bi,{severity:"error","data-testid":"book-edit-error",children:S})]})})}),v.jsxs(Bi,{children:[v.jsx(ze,{onClick:P,disabled:x,"data-testid":"book-edit-cancel",children:""}),v.jsx(ze,{type:"submit",form:"book-edit-form",variant:"contained",disabled:x,"data-testid":"book-edit-save",children:x?"...":""})]})]})},VG=({book:t,bookId:e,onTagsChange:n})=>{const{user:r}=jn(),i=O.useContext(Pr),a=(i==null?void 0:i.setGlobalError)||(()=>{}),[s,o]=O.useState(!1),[c,d]=O.useState([]),{tagOptions:f,fetchTagHistory:p,saveTagsToHistory:g}=Hs("book",r);O.useEffect(()=>{p()},[p]);const m=()=>{d(t.tags||[]),o(!0)},x=async()=>{if(t)try{const b=ai(vt,"books",e);await cy(b,{tags:c,updatedAt:ir()}),await g(c),n(c),o(!1)}catch(b){console.error("Error updating tags:",b),a("")}};return t?v.jsxs(re,{sx:{mb:2},children:[v.jsxs(re,{sx:{display:"flex",alignItems:"center",gap:1,mb:1},children:[v.jsx(te,{variant:"h6",children:":"}),v.jsx(Gr,{onClick:m,size:"small","data-testid":"edit-tags-button",children:v.jsx(p0,{})})]}),v.jsx(re,{sx:{display:"flex",flexWrap:"wrap",gap:1},children:(t.tags||[]).map((b,A)=>v.jsx(dn,{label:b,size:"small"},A))}),v.jsxs(Ni,{open:s,onClose:()=>o(!1),maxWidth:"sm",fullWidth:!0,children:[v.jsx(Yi,{children:""}),v.jsx(Li,{children:v.jsx(Bs,{multiple:!0,freeSolo:!0,options:f,value:c,onChange:(b,A)=>d(A),renderInput:b=>v.jsx(ct,{...b,label:"",placeholder:"",fullWidth:!0,margin:"normal"}),renderTags:(b,A)=>b.map((E,S)=>O.createElement(dn,{...A({index:S}),key:S,label:E,size:"small"}))})}),v.jsxs(Bi,{children:[v.jsx(ze,{onClick:()=>o(!1),children:""}),v.jsx(ze,{onClick:x,variant:"contained","data-testid":"save-tags-button",children:""})]})]})]}):null},UG=t=>({components:{MuiLocalizationProvider:{defaultProps:{localeText:H({},t)}}}}),_M={previousMonth:"Previous month",nextMonth:"Next month",openPreviousView:"Open previous view",openNextView:"Open next view",calendarViewSwitchingButtonAriaLabel:t=>t==="year"?"year view is open, switch to calendar view":"calendar view is open, switch to year view",start:"Start",end:"End",startDate:"Start date",startTime:"Start time",endDate:"End date",endTime:"End time",cancelButtonLabel:"Cancel",clearButtonLabel:"Clear",okButtonLabel:"OK",todayButtonLabel:"Today",nextStepButtonLabel:"Next",datePickerToolbarTitle:"Select date",dateTimePickerToolbarTitle:"Select date & time",timePickerToolbarTitle:"Select time",dateRangePickerToolbarTitle:"Select date range",timeRangePickerToolbarTitle:"Select time range",clockLabelText:(t,e)=>`Select ${t}. ${e?`Selected time is ${e}`:"No time selected"}`,hoursClockNumberText:t=>`${t} hours`,minutesClockNumberText:t=>`${t} minutes`,secondsClockNumberText:t=>`${t} seconds`,selectViewText:t=>`Select ${t}`,calendarWeekNumberHeaderLabel:"Week number",calendarWeekNumberHeaderText:"#",calendarWeekNumberAriaLabelText:t=>`Week ${t}`,calendarWeekNumberText:t=>`${t}`,openDatePickerDialogue:t=>t?`Choose date, selected date is ${t}`:"Choose date",openTimePickerDialogue:t=>t?`Choose time, selected time is ${t}`:"Choose time",openRangePickerDialogue:t=>t?`Choose range, selected range is ${t}`:"Choose range",fieldClearLabel:"Clear",timeTableLabel:"pick time",dateTableLabel:"pick date",fieldYearPlaceholder:t=>"Y".repeat(t.digitAmount),fieldMonthPlaceholder:t=>t.contentType==="letter"?"MMMM":"MM",fieldDayPlaceholder:()=>"DD",fieldWeekDayPlaceholder:t=>t.contentType==="letter"?"EEEE":"EE",fieldHoursPlaceholder:()=>"hh",fieldMinutesPlaceholder:()=>"mm",fieldSecondsPlaceholder:()=>"ss",fieldMeridiemPlaceholder:()=>"aa",year:"Year",month:"Month",day:"Day",weekDay:"Week day",hours:"Hours",minutes:"Minutes",seconds:"Seconds",meridiem:"Meridiem",empty:"Empty"},HG=_M;UG(_M);const zG=["localeText"],Mw=O.createContext(null),AM=function(e){const{localeText:n}=e,r=je(e,zG),{adapter:i,localeText:a}=O.useContext(Mw)??{adapter:void 0,localeText:void 0},s=bt({props:r,name:"MuiLocalizationProvider"}),{children:o,dateAdapter:c,dateFormats:d,dateLibInstance:f,adapterLocale:p,localeText:g}=s,m=O.useMemo(()=>H({},g,a,n),[g,a,n]),x=O.useMemo(()=>{if(!c)return i||null;const E=new c({locale:p,formats:d,instance:f});if(!E.isMUIAdapter)throw new Error(["MUI X: The date adapter should be imported from `@mui/x-date-pickers` or `@mui/x-date-pickers-pro`, not from `@date-io`","For example, `import { AdapterDayjs } from '@mui/x-date-pickers/AdapterDayjs'` instead of `import AdapterDayjs from '@date-io/dayjs'`","More information on the installation documentation: https://mui.com/x/react-date-pickers/quickstart/#installation"].join(`
`));return E},[c,p,d,f,i]),b=O.useMemo(()=>x?{minDate:x.date("1900-01-01T00:00:00.000"),maxDate:x.date("2099-12-31T00:00:00.000")}:null,[x]),A=O.useMemo(()=>({utils:x,adapter:x,defaultDates:b,localeText:m}),[b,x,m]);return v.jsx(Mw.Provider,{value:A,children:o})},A_=()=>{const t=O.useContext(Mw);if(t===null)throw new Error(["MUI X: Can not find the date and time pickers localization context.","It looks like you forgot to wrap your component in LocalizationProvider.","This can also happen if you are bundling multiple versions of the `@mui/x-date-pickers` package"].join(`
`));if(t.adapter===null)throw new Error(["MUI X: Can not find the date and time pickers adapter from its localization context.","It looks like you forgot to pass a `dateAdapter` to your LocalizationProvider."].join(`
`));const e=O.useMemo(()=>H({},HG,t.localeText),[t.localeText]);return O.useMemo(()=>H({},t,{localeText:e}),[t,e])},Yt=()=>A_().adapter,ts=()=>A_().localeText,Pw=["disablePast","disableFuture","minDate","maxDate","shouldDisableDate","shouldDisableMonth","shouldDisableYear"],kw=["disablePast","disableFuture","minTime","maxTime","shouldDisableTime","minutesStep","ampm","disableIgnoringDatePartForTimeValidation"],EM=["minDateTime","maxDateTime"],$G=[...Pw,...kw,...EM],SM=t=>$G.reduce((e,n)=>(t.hasOwnProperty(n)&&(e[n]=t[n]),e),{}),GG=["value","defaultValue","referenceDate","format","formatDensity","onChange","timezone","onError","shouldRespectLeadingZeros","selectedSections","onSelectedSectionsChange","unstableFieldRef","unstableStartFieldRef","unstableEndFieldRef","enableAccessibleFieldDOMStructure","disabled","readOnly","dateSeparator","autoFocus","focused"],CM=(t,e)=>O.useMemo(()=>{const n=H({},t),r={},i=a=>{n.hasOwnProperty(a)&&(r[a]=n[a],delete n[a])};return GG.forEach(i),e==="date"?Pw.forEach(i):e==="time"?kw.forEach(i):e==="date-time"&&(Pw.forEach(i),kw.forEach(i),EM.forEach(i)),{forwardedProps:n,internalProps:r}},[t,e]),_s=(t,e)=>t.length!==e.length?!1:e.every(n=>t.includes(n)),WG=({openTo:t,defaultOpenTo:e,views:n,defaultViews:r})=>{const i=n??r;let a;if(t!=null)a=t;else if(i.includes(e))a=e;else if(i.length>0)a=i[0];else throw new Error("MUI X: The `views` prop must contain at least one view.");return{views:i,openTo:a}},i1=(t,e,n)=>{let r=e;return r=t.setHours(r,t.getHours(n)),r=t.setMinutes(r,t.getMinutes(n)),r=t.setSeconds(r,t.getSeconds(n)),r=t.setMilliseconds(r,t.getMilliseconds(n)),r},I0=({date:t,disableFuture:e,disablePast:n,maxDate:r,minDate:i,isDateDisabled:a,adapter:s,timezone:o})=>{const c=i1(s,s.date(void 0,o),t);n&&s.isBefore(i,c)&&(i=c),e&&s.isAfter(r,c)&&(r=c);let d=t,f=t;for(s.isBefore(t,i)&&(d=i,f=null),s.isAfter(t,r)&&(f&&(f=r),d=null);d||f;){if(d&&s.isAfter(d,r)&&(d=null),f&&s.isBefore(f,i)&&(f=null),d){if(!a(d))return d;d=s.addDays(d,1)}if(f){if(!a(f))return f;f=s.addDays(f,-1)}}return null},YG=(t,e)=>t.isValid(e)?e:null,a1=(t,e,n)=>e==null||!t.isValid(e)?n:e,qG=(t,e,n)=>!t.isValid(e)&&e!=null&&!t.isValid(n)&&n!=null?!0:t.isEqual(e,n),E_=(t,e)=>{const r=[t.startOfYear(e)];for(;r.length<12;){const i=r[r.length-1];r.push(t.addMonths(i,1))}return r},S_=(t,e,n)=>n==="date"?t.startOfDay(t.date(void 0,e)):t.date(void 0,e),f0=(t,e)=>{const n=t.setHours(t.date(),e==="am"?2:14);return t.format(n,"meridiem")},TM=["year","month","day"],Zd=t=>TM.includes(t),mD=(t,{format:e,views:n},r)=>{if(e!=null)return e;const i=t.formats;return _s(n,["year"])?i.year:_s(n,["month"])?i.month:_s(n,["day"])?i.dayOfMonth:_s(n,["month","year"])?`${i.month} ${i.year}`:_s(n,["day","month"])?`${i.month} ${i.dayOfMonth}`:i.keyboardDate},XG=(t,e)=>{const n=t.startOfWeek(e);return[0,1,2,3,4,5,6].map(r=>t.addDays(n,r))},IM=(t,e)=>{const n=t.formatTokenMap[e];if(n==null)throw new Error([`MUI X: The token "${e}" is not supported by the Date and Time Pickers.`,"Please try using another token or open an issue on https://github.com/mui/mui-x/issues/new/choose if you think it should be supported."].join(`
`));return typeof n=="string"?{type:n,contentType:n==="meridiem"?"letter":"digit",maxLength:void 0}:{type:n.sectionType,contentType:n.contentType,maxLength:n.maxLength}},gy=(t,e)=>{const n=[],r=t.date(void 0,"default"),i=t.startOfWeek(r),a=t.endOfWeek(r);let s=i;for(;t.isBefore(s,a);)n.push(s),s=t.addDays(s,1);return n.map(o=>t.formatByString(o,e))},DM=(t,e,n,r)=>{switch(n){case"month":return E_(t,t.date(void 0,e)).map(i=>t.formatByString(i,r));case"weekDay":return gy(t,r);case"meridiem":{const i=t.date(void 0,e);return[t.startOfDay(i),t.endOfDay(i)].map(a=>t.formatByString(a,r))}default:return[]}},yD="s",KG=["0","1","2","3","4","5","6","7","8","9"],QG=t=>{const e=t.date(void 0);return t.formatByString(t.setSeconds(e,0),yD)==="0"?KG:Array.from({length:10}).map((r,i)=>t.formatByString(t.setSeconds(e,i),yD))},ru=(t,e)=>{if(e[0]==="0")return t;const n=[];let r="";for(let i=0;i<t.length;i+=1){r+=t[i];const a=e.indexOf(r);a>-1&&(n.push(a.toString()),r="")}return n.join("")},C_=(t,e)=>e[0]==="0"?t:t.split("").map(n=>e[Number(n)]).join(""),vD=(t,e)=>{const n=ru(t,e);return n!==" "&&!Number.isNaN(Number(n))},T_=(t,e)=>Number(t).toString().padStart(e,"0"),RM=(t,e,n,r,i)=>{if(i.type==="day"&&i.contentType==="digit-with-letter"){const s=t.setDate(n.longestMonth,e);return t.formatByString(s,i.format)}let a=e.toString();return i.hasLeadingZerosInInput&&(a=T_(a,i.maxLength)),C_(a,r)},I_=(t,e,n)=>{let r=t.value||t.placeholder;const i=e==="non-input"?t.hasLeadingZerosInFormat:t.hasLeadingZerosInInput;return e==="non-input"&&t.hasLeadingZerosInInput&&!t.hasLeadingZerosInFormat&&(r=Number(ru(r,n)).toString()),["input-rtl","input-ltr"].includes(e)&&t.contentType==="digit"&&!i&&r.length===1&&(r=`${r}`),e==="input-rtl"&&(r=`${r}`),r},xD=(t,e,n,r)=>t.formatByString(t.parse(e,n),r),ZG=(t,e)=>t.formatByString(t.date(void 0,"system"),e).length===4,OM=(t,e,n,r)=>{if(e!=="digit")return!1;const i=t.date(void 0,"default");switch(n){case"year":return t.lib==="dayjs"&&r==="YY"?!0:t.formatByString(t.setYear(i,1),r).startsWith("0");case"month":return t.formatByString(t.startOfYear(i),r).length>1;case"day":return t.formatByString(t.startOfMonth(i),r).length>1;case"weekDay":return t.formatByString(t.startOfWeek(i),r).length>1;case"hours":return t.formatByString(t.setHours(i,1),r).length>1;case"minutes":return t.formatByString(t.setMinutes(i,1),r).length>1;case"seconds":return t.formatByString(t.setSeconds(i,1),r).length>1;default:throw new Error("Invalid section type")}},JG=(t,e,n)=>{const r=e.some(c=>c.type==="day"),i=[],a=[];for(let c=0;c<e.length;c+=1){const d=e[c];r&&d.type==="weekDay"||(i.push(d.format),a.push(I_(d,"non-input",n)))}const s=i.join(" "),o=a.join(" ");return t.parse(o,s)},eW=t=>t.map(e=>`${e.startSeparator}${e.value||e.placeholder}${e.endSeparator}`).join(""),tW=(t,e,n)=>{const i=t.map(a=>{const s=I_(a,n?"input-rtl":"input-ltr",e);return`${a.startSeparator}${s}${a.endSeparator}`}).join("");return n?`${i}`:i},nW=(t,e,n)=>{const r=t.date(void 0,n),i=t.endOfYear(r),a=t.endOfDay(r),{maxDaysInMonth:s,longestMonth:o}=E_(t,r).reduce((c,d)=>{const f=t.getDaysInMonth(d);return f>c.maxDaysInMonth?{maxDaysInMonth:f,longestMonth:d}:c},{maxDaysInMonth:0,longestMonth:null});return{year:({format:c})=>({minimum:0,maximum:ZG(t,c)?9999:99}),month:()=>({minimum:1,maximum:t.getMonth(i)+1}),day:({currentDate:c})=>({minimum:1,maximum:t.isValid(c)?t.getDaysInMonth(c):s,longestMonth:o}),weekDay:({format:c,contentType:d})=>{if(d==="digit"){const f=gy(t,c).map(Number);return{minimum:Math.min(...f),maximum:Math.max(...f)}}return{minimum:1,maximum:7}},hours:({format:c})=>{const d=t.getHours(a);return ru(t.formatByString(t.endOfDay(r),c),e)!==d.toString()?{minimum:1,maximum:Number(ru(t.formatByString(t.startOfDay(r),c),e))}:{minimum:0,maximum:d}},minutes:()=>({minimum:0,maximum:t.getMinutes(a)}),seconds:()=>({minimum:0,maximum:t.getSeconds(a)}),meridiem:()=>({minimum:0,maximum:1}),empty:()=>({minimum:0,maximum:0})}},rW=(t,e,n,r)=>{switch(e.type){case"year":return t.setYear(r,t.getYear(n));case"month":return t.setMonth(r,t.getMonth(n));case"weekDay":{let i=t.formatByString(n,e.format);e.hasLeadingZerosInInput&&(i=T_(i,e.maxLength));const a=gy(t,e.format),s=a.indexOf(i),c=a.indexOf(e.value)-s;return t.addDays(n,c)}case"day":return t.setDate(r,t.getDate(n));case"meridiem":{const i=t.getHours(n)<12,a=t.getHours(r);return i&&a>=12?t.addHours(r,-12):!i&&a<12?t.addHours(r,12):r}case"hours":return t.setHours(r,t.getHours(n));case"minutes":return t.setMinutes(r,t.getMinutes(n));case"seconds":return t.setSeconds(r,t.getSeconds(n));default:return r}},wD={year:1,month:2,day:3,weekDay:4,hours:5,minutes:6,seconds:7,meridiem:8,empty:9},bD=(t,e,n,r,i)=>[...n].sort((a,s)=>wD[a.type]-wD[s.type]).reduce((a,s)=>!i||s.modified?rW(t,s,e,a):a,r),iW=()=>navigator.userAgent.toLowerCase().includes("android"),aW=(t,e)=>{const n={};if(!e)return t.forEach((c,d)=>{const f=d===0?null:d-1,p=d===t.length-1?null:d+1;n[d]={leftIndex:f,rightIndex:p}}),{neighbors:n,startIndex:0,endIndex:t.length-1};const r={},i={};let a=0,s=0,o=t.length-1;for(;o>=0;){s=t.findIndex((c,d)=>{var f;return d>=a&&((f=c.endSeparator)==null?void 0:f.includes(" "))&&c.endSeparator!==" / "}),s===-1&&(s=t.length-1);for(let c=s;c>=a;c-=1)i[c]=o,r[o]=c,o-=1;a=s+1}return t.forEach((c,d)=>{const f=i[d],p=f===0?null:r[f-1],g=f===t.length-1?null:r[f+1];n[d]={leftIndex:p,rightIndex:g}}),{neighbors:n,startIndex:r[0],endIndex:r[t.length-1]}},Nw=(t,e)=>{if(t==null)return null;if(t==="all")return"all";if(typeof t=="string"){const n=e.findIndex(r=>r.type===t);return n===-1?null:n}return t},sW=({adapter:t,format:e})=>{let n=10,r=e,i=t.expandFormat(e);for(;i!==r;)if(r=i,i=t.expandFormat(r),n-=1,n<0)throw new Error("MUI X: The format expansion seems to be in an infinite loop. Please open an issue with the format passed to the component.");return i},oW=({adapter:t,expandedFormat:e})=>{const n=[],{start:r,end:i}=t.escapedCharacters,a=new RegExp(`(\\${r}[^\\${i}]*\\${i})+`,"g");let s=null;for(;s=a.exec(e);)n.push({start:s.index,end:a.lastIndex-1});return n},lW=(t,e,n,r)=>{switch(n.type){case"year":return e.fieldYearPlaceholder({digitAmount:t.formatByString(t.date(void 0,"default"),r).length,format:r});case"month":return e.fieldMonthPlaceholder({contentType:n.contentType,format:r});case"day":return e.fieldDayPlaceholder({format:r});case"weekDay":return e.fieldWeekDayPlaceholder({contentType:n.contentType,format:r});case"hours":return e.fieldHoursPlaceholder({format:r});case"minutes":return e.fieldMinutesPlaceholder({format:r});case"seconds":return e.fieldSecondsPlaceholder({format:r});case"meridiem":return e.fieldMeridiemPlaceholder({format:r});default:return r}},cW=({adapter:t,date:e,shouldRespectLeadingZeros:n,localeText:r,localizedDigits:i,now:a,token:s,startSeparator:o})=>{if(s==="")throw new Error("MUI X: Should not call `commitToken` with an empty token");const c=IM(t,s),d=OM(t,c.contentType,c.type,s),f=n?d:c.contentType==="digit",p=t.isValid(e);let g=p?t.formatByString(e,s):"",m=null;if(f)if(d)m=g===""?t.formatByString(a,s).length:g.length;else{if(c.maxLength==null)throw new Error(`MUI X: The token ${s} should have a 'maxLength' property on it's adapter`);m=c.maxLength,p&&(g=C_(T_(ru(g,i),m),i))}return H({},c,{format:s,maxLength:m,value:g,placeholder:lW(t,r,c,s),hasLeadingZerosInFormat:d,hasLeadingZerosInInput:f,startSeparator:o,endSeparator:"",modified:!1})},uW=t=>{var m;const{adapter:e,expandedFormat:n,escapedParts:r}=t,i=e.date(void 0),a=[];let s="";const o=Object.keys(e.formatTokenMap).sort((x,b)=>b.length-x.length),c=/^([a-zA-Z]+)/,d=new RegExp(`^(${o.join("|")})*$`),f=new RegExp(`^(${o.join("|")})`),p=x=>r.find(b=>b.start<=x&&b.end>=x);let g=0;for(;g<n.length;){const x=p(g),b=x!=null,A=(m=c.exec(n.slice(g)))==null?void 0:m[1];if(!b&&A!=null&&d.test(A)){let E=A;for(;E.length>0;){const S=f.exec(E)[1];E=E.slice(S.length),a.push(cW(H({},t,{now:i,token:S,startSeparator:s}))),s=""}g+=A.length}else{const E=n[g];b&&(x==null?void 0:x.start)===g||(x==null?void 0:x.end)===g||(a.length===0?s+=E:(a[a.length-1].endSeparator+=E,a[a.length-1].isEndFormatSeparator=!0)),g+=1}}return a.length===0&&s.length>0&&a.push({type:"empty",contentType:"letter",maxLength:null,format:"",value:"",placeholder:"",hasLeadingZerosInFormat:!1,hasLeadingZerosInInput:!1,startSeparator:s,endSeparator:"",modified:!1}),a},dW=({isRtl:t,formatDensity:e,sections:n})=>n.map(r=>{const i=a=>{let s=a;return t&&s!==null&&s.includes(" ")&&(s=`${s}`),e==="spacious"&&["/",".","-"].includes(s)&&(s=` ${s} `),s};return r.startSeparator=i(r.startSeparator),r.endSeparator=i(r.endSeparator),r}),_D=t=>{let e=sW(t);t.isRtl&&t.enableAccessibleFieldDOMStructure&&(e=e.split(" ").reverse().join(" "));const n=oW(H({},t,{expandedFormat:e})),r=uW(H({},t,{expandedFormat:e,escapedParts:n}));return dW(H({},t,{sections:r}))},D_=O.createContext(null),Kl=()=>{const t=O.useContext(D_);if(t==null)throw new Error("MUI X: The `usePickerContext` hook can only be called inside the context of a Picker component");return t},R_=()=>O.useContext(D_),MM=O.createContext(()=>!0);function fW(){return O.useContext(MM)}const PM=O.createContext(null);function kM(){return O.useContext(PM)}const NM=O.createContext(null),LM=O.createContext({ownerState:{isPickerDisabled:!1,isPickerReadOnly:!1,isPickerValueEmpty:!1,isPickerOpen:!1,pickerVariant:"desktop",pickerOrientation:"portrait"},rootRefObject:{current:null},labelId:void 0,dismissViews:()=>{},hasUIView:!0,getCurrentViewMode:()=>"UI",triggerElement:null,viewContainerRole:null,defaultActionBarActions:[],onPopperExited:void 0});function BM(t){const{contextValue:e,actionsContextValue:n,privateContextValue:r,fieldPrivateContextValue:i,isValidContextValue:a,localeText:s,children:o}=t;return v.jsx(D_.Provider,{value:e,children:v.jsx(NM.Provider,{value:n,children:v.jsx(LM.Provider,{value:r,children:v.jsx(PM.Provider,{value:i,children:v.jsx(MM.Provider,{value:a,children:v.jsx(AM,{localeText:s,children:o})})})})})})}const hW=()=>{const t=O.useContext(NM);if(t==null)throw new Error(["MUI X: The `usePickerActionsContext` can only be called in fields that are used as a slot of a Picker component"].join(`
`));return t},FM=()=>A_().defaultDates,_f=t=>{const e=Yt(),n=O.useRef(void 0);return n.current===void 0&&(n.current=e.date(void 0,t)),n.current},pW=Gl(v.jsx("path",{d:"M7 10l5 5 5-5z"})),gW=Gl(v.jsx("path",{d:"M15.41 16.59L10.83 12l4.58-4.59L14 6l-6 6 6 6 1.41-1.41z"})),mW=Gl(v.jsx("path",{d:"M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z"})),yW=Gl(v.jsx("path",{d:"M17 12h-5v5h5v-5zM16 1v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2h-1V1h-2zm3 18H5V8h14v11z"}));Gl(v.jsxs(O.Fragment,{children:[v.jsx("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),v.jsx("path",{d:"M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"})]}));const vW=Gl(v.jsx("path",{d:"M9 11H7v2h2v-2zm4 0h-2v2h2v-2zm4 0h-2v2h2v-2zm2-7h-1V2h-2v2H8V2H6v2H5c-1.11 0-1.99.9-1.99 2L3 20c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 16H5V9h14v11z"})),xW=Gl(v.jsxs(O.Fragment,{children:[v.jsx("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),v.jsx("path",{d:"M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"})]})),wW=Gl(v.jsx("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}));function bW(t){return Ot("MuiPickersArrowSwitcher",t)}Mt("MuiPickersArrowSwitcher",["root","spacer","button","previousIconButton","nextIconButton","leftArrowIcon","rightArrowIcon"]);const or=()=>O.useContext(LM),_W=["children","className","slots","slotProps","isNextDisabled","isNextHidden","onGoToNext","nextLabel","isPreviousDisabled","isPreviousHidden","onGoToPrevious","previousLabel","labelId","classes"],AW=["ownerState"],EW=["ownerState"],SW=Pe("div",{name:"MuiPickersArrowSwitcher",slot:"Root"})({display:"flex"}),CW=Pe("div",{name:"MuiPickersArrowSwitcher",slot:"Spacer"})(({theme:t})=>({width:t.spacing(3)})),AD=Pe(Gr,{name:"MuiPickersArrowSwitcher",slot:"Button"})({variants:[{props:{isButtonHidden:!0},style:{visibility:"hidden"}}]}),TW=t=>wt({root:["root"],spacer:["spacer"],button:["button"],previousIconButton:["previousIconButton"],nextIconButton:["nextIconButton"],leftArrowIcon:["leftArrowIcon"],rightArrowIcon:["rightArrowIcon"]},bW,t),IW=O.forwardRef(function(e,n){const r=Ma(),i=bt({props:e,name:"MuiPickersArrowSwitcher"}),{children:a,className:s,slots:o,slotProps:c,isNextDisabled:d,isNextHidden:f,onGoToNext:p,nextLabel:g,isPreviousDisabled:m,isPreviousHidden:x,onGoToPrevious:b,previousLabel:A,labelId:E,classes:S}=i,T=je(i,_W),{ownerState:I}=or(),P=TW(S),F={isDisabled:d,isHidden:f,goTo:p,label:g},M={isDisabled:m,isHidden:x,goTo:b,label:A},D=(o==null?void 0:o.previousIconButton)??AD,R=Ct({elementType:D,externalSlotProps:c==null?void 0:c.previousIconButton,additionalProps:{size:"medium",title:M.label,"aria-label":M.label,disabled:M.isDisabled,edge:"end",onClick:M.goTo},ownerState:H({},I,{isButtonHidden:M.isHidden??!1}),className:Ut(P.button,P.previousIconButton)}),B=(o==null?void 0:o.nextIconButton)??AD,N=Ct({elementType:B,externalSlotProps:c==null?void 0:c.nextIconButton,additionalProps:{size:"medium",title:F.label,"aria-label":F.label,disabled:F.isDisabled,edge:"start",onClick:F.goTo},ownerState:H({},I,{isButtonHidden:F.isHidden??!1}),className:Ut(P.button,P.nextIconButton)}),k=(o==null?void 0:o.leftArrowIcon)??gW,j=Ct({elementType:k,externalSlotProps:c==null?void 0:c.leftArrowIcon,additionalProps:{fontSize:"inherit"},ownerState:I,className:P.leftArrowIcon}),q=je(j,AW),X=(o==null?void 0:o.rightArrowIcon)??mW,G=Ct({elementType:X,externalSlotProps:c==null?void 0:c.rightArrowIcon,additionalProps:{fontSize:"inherit"},ownerState:I,className:P.rightArrowIcon}),W=je(G,EW);return v.jsxs(SW,H({ref:n,className:Ut(P.root,s),ownerState:I},T,{children:[v.jsx(D,H({},R,{children:r?v.jsx(X,H({},W)):v.jsx(k,H({},q))})),a?v.jsx(te,{variant:"subtitle1",component:"span",id:E,children:a}):v.jsx(CW,{className:P.spacer,ownerState:I}),v.jsx(B,H({},N,{children:r?v.jsx(k,H({},q)):v.jsx(X,H({},W))}))]}))}),jM=["hours","minutes","seconds"],DW=["hours","minutes","seconds","meridiem"],D0=t=>jM.includes(t),Cd=t=>DW.includes(t),RW=(t,e)=>t?e.getHours(t)>=12?"pm":"am":null,Lw=(t,e,n)=>n&&(t>=12?"pm":"am")!==e?e==="am"?t-12:t+12:t,OW=(t,e,n,r)=>{const i=Lw(r.getHours(t),e,n);return r.setHours(t,i)},ED=(t,e)=>e.getHours(t)*3600+e.getMinutes(t)*60+e.getSeconds(t),my=(t,e)=>(n,r)=>t?e.isAfter(n,r):ED(n,e)>ED(r,e),SD=(t,{format:e,views:n,ampm:r})=>{if(e!=null)return e;const i=t.formats;return _s(n,["hours"])?r?`${i.hours12h} ${i.meridiem}`:i.hours24h:_s(n,["minutes"])?i.minutes:_s(n,["seconds"])?i.seconds:_s(n,["minutes","seconds"])?`${i.minutes}:${i.seconds}`:_s(n,["hours","minutes","seconds"])?r?`${i.hours12h}:${i.minutes}:${i.seconds} ${i.meridiem}`:`${i.hours24h}:${i.minutes}:${i.seconds}`:r?`${i.hours12h}:${i.minutes} ${i.meridiem}`:`${i.hours24h}:${i.minutes}`},VM={hasNextStep:!1,hasSeveralSteps:!1,goToNextStep:()=>{},areViewsInSameStep:()=>!0};function MW(t){const{steps:e,isViewMatchingStep:n,onStepChange:r}=t;return i=>{if(e==null)return VM;const a=e.findIndex(o=>n(i.view,o)),s=a===-1||a===e.length-1?null:e[a+1];return{hasNextStep:s!=null,hasSeveralSteps:e.length>1,goToNextStep:()=>{s!=null&&r(H({},i,{step:s}))},areViewsInSameStep:(o,c)=>{const d=e.find(p=>n(o,p)),f=e.find(p=>n(c,p));return d===f}}}}function yy({onChange:t,onViewChange:e,openTo:n,view:r,views:i,autoFocus:a,focusedView:s,onFocusedViewChange:o,getStepNavigation:c}){const d=O.useRef(n),f=O.useRef(i),p=O.useRef(i.includes(n)?n:i[0]),[g,m]=$d({name:"useViews",state:"view",controlled:r,default:p.current}),x=O.useRef(a?g:null),[b,A]=$d({name:"useViews",state:"focusedView",controlled:s,default:x.current}),E=c?c({setView:m,view:g,defaultView:p.current,views:i}):VM;O.useEffect(()=>{(d.current&&d.current!==n||f.current&&f.current.some(R=>!i.includes(R)))&&(m(i.includes(n)?n:i[0]),f.current=i,d.current=n)},[n,m,g,i]);const S=i.indexOf(g),T=i[S-1]??null,I=i[S+1]??null,P=He((R,B)=>{A(B?R:N=>R===N?null:N),o==null||o(R,B)}),F=He(R=>{P(R,!0),R!==g&&(m(R),e&&e(R))}),M=He(()=>{I&&F(I)}),D=He((R,B,N)=>{const k=B==="finish",j=N?i.indexOf(N)<i.length-1:!!I;t(R,k&&j?"partial":B,N);let X=null;if(N!=null&&N!==g?X=N:k&&(X=g),X==null)return;const G=i[i.indexOf(X)+1];G==null||!E.areViewsInSameStep(X,G)||F(G)});return H({},E,{view:g,setView:F,focusedView:b,setFocusedView:P,nextView:I,previousView:T,defaultView:i.includes(n)?n:i[0],goToNextView:M,setValueAndGoToNextView:D})}function PW(t,{disableFuture:e,maxDate:n,timezone:r}){const i=Yt();return O.useMemo(()=>{const a=i.date(void 0,r),s=i.startOfMonth(e&&i.isBefore(a,n)?a:n);return!i.isAfter(s,t)},[e,n,t,i,r])}function kW(t,{disablePast:e,minDate:n,timezone:r}){const i=Yt();return O.useMemo(()=>{const a=i.date(void 0,r),s=i.startOfMonth(e&&i.isAfter(a,n)?a:n);return!i.isBefore(s,t)},[e,n,t,i,r])}function UM(t,e,n,r){const i=Yt(),a=O.useMemo(()=>i.isValid(t)?t:null,[i,t]),s=RW(a,i),o=O.useCallback(c=>{const d=a==null?null:OW(a,c,!!e,i);n(d,r??"partial")},[e,a,n,r,i]);return{meridiemMode:s,handleMeridiemChange:o}}const R0=36,vy=2,Jd=320,NW=280,ef=336,HM=232,t0=48,O_=Pe("div")({overflow:"hidden",width:Jd,maxHeight:ef,display:"flex",flexDirection:"column",margin:"0 auto"}),uu=({name:t,timezone:e,value:n,defaultValue:r,referenceDate:i,onChange:a,valueManager:s})=>{const o=Yt(),[c,d]=$d({name:t,state:"value",controlled:n,default:r??s.emptyValue}),f=O.useMemo(()=>s.getTimezone(o,c),[o,s,c]),p=He(b=>f==null?b:s.setTimezone(o,f,b)),g=O.useMemo(()=>e||f||(i?o.getTimezone(Array.isArray(i)?i[0]:i):"default"),[e,f,i,o]),m=O.useMemo(()=>s.setTimezone(o,g,c),[s,o,g,c]),x=He((b,...A)=>{const E=p(b);d(E),a==null||a(E,...A)});return{value:m,handleValueChange:x,timezone:g}},Ga={year:1,month:2,day:3,hours:4,minutes:5,seconds:6,milliseconds:7},LW=t=>Math.max(...t.map(e=>Ga[e.type]??1)),Ph=(t,e,n)=>{if(e===Ga.year)return t.startOfYear(n);if(e===Ga.month)return t.startOfMonth(n);if(e===Ga.day)return t.startOfDay(n);let r=n;return e<Ga.minutes&&(r=t.setMinutes(r,0)),e<Ga.seconds&&(r=t.setSeconds(r,0)),e<Ga.milliseconds&&(r=t.setMilliseconds(r,0)),r},BW=({props:t,adapter:e,granularity:n,timezone:r,getTodayDate:i})=>{let a=i?i():Ph(e,n,S_(e,r));t.minDate!=null&&e.isAfterDay(t.minDate,a)&&(a=Ph(e,n,t.minDate)),t.maxDate!=null&&e.isBeforeDay(t.maxDate,a)&&(a=Ph(e,n,t.maxDate));const s=my(t.disableIgnoringDatePartForTimeValidation??!1,e);return t.minTime!=null&&s(t.minTime,a)&&(a=Ph(e,n,t.disableIgnoringDatePartForTimeValidation?t.minTime:i1(e,a,t.minTime))),t.maxTime!=null&&s(a,t.maxTime)&&(a=Ph(e,n,t.disableIgnoringDatePartForTimeValidation?t.maxTime:i1(e,a,t.maxTime))),a},FW=["value","referenceDate"],Fi={emptyValue:null,getTodayValue:S_,getInitialReferenceValue:t=>{let{value:e,referenceDate:n}=t,r=je(t,FW);return r.adapter.isValid(e)?e:n??BW(r)},cleanValue:YG,areValuesEqual:qG,isSameError:(t,e)=>t===e,hasError:t=>t!=null,defaultErrorState:null,getTimezone:(t,e)=>t.isValid(e)?t.getTimezone(e):null,setTimezone:(t,e,n)=>n==null?null:t.setTimezone(n,e)},jW={updateReferenceValue:(t,e,n)=>t.isValid(e)?e:n,getSectionsFromValue:(t,e)=>e(t),getV7HiddenInputValueFromSections:eW,getV6InputValueFromSections:tW,parseValueStr:(t,e,n)=>n(t.trim(),e),getDateFromSection:t=>t,getDateSectionsFromValue:t=>t,updateDateInValue:(t,e,n)=>n,clearDateSections:t=>t.map(e=>H({},e,{value:""}))},zM=({value:t,referenceDate:e,adapter:n,props:r,timezone:i})=>{const a=O.useMemo(()=>Fi.getInitialReferenceValue({value:t,adapter:n,props:r,referenceDate:e,granularity:Ga.day,timezone:i,getTodayDate:()=>S_(n,i,"date")}),[e,i]);return t??a};function VW(t){return Ot("MuiDigitalClock",t)}const Bw=Mt("MuiDigitalClock",["root","list","item"]);function UW(t,e){return Array.isArray(e)?e.every(n=>t.indexOf(n)!==-1):t.indexOf(e)!==-1}const HW=t=>{setTimeout(t,0)},$M=(t=document)=>{const e=t.activeElement;return e?e.shadowRoot?$M(e.shadowRoot):e:null},vi=t=>$M(i0(t)),s1=t=>Array.from(t.children).indexOf(vi(t)),zW="@media (pointer: fine)";function $W(...t){return t.reduce((e,n)=>(Array.isArray(n)?e.push(...n):n!=null&&e.push(n),e),[])}const GW=["ampm","timeStep","autoFocus","slots","slotProps","value","defaultValue","referenceDate","disableIgnoringDatePartForTimeValidation","maxTime","minTime","disableFuture","disablePast","minutesStep","shouldDisableTime","onChange","view","openTo","onViewChange","focusedView","onFocusedViewChange","className","classes","disabled","readOnly","views","skipDisabled","timezone"],WW=t=>wt({root:["root"],list:["list"],item:["item"]},VW,t),YW=Pe(O_,{name:"MuiDigitalClock",slot:"Root"})({overflowY:"auto",width:"100%",scrollbarWidth:"thin","@media (prefers-reduced-motion: no-preference)":{scrollBehavior:"auto"},maxHeight:HM,variants:[{props:{hasDigitalClockAlreadyBeenRendered:!0},style:{"@media (prefers-reduced-motion: no-preference)":{scrollBehavior:"smooth"}}}]}),qW=Pe(yR,{name:"MuiDigitalClock",slot:"List"})({padding:0}),XW=Pe(Zt,{name:"MuiDigitalClock",slot:"Item",shouldForwardProp:t=>t!=="itemValue"&&t!=="formattedValue"})(({theme:t})=>({padding:"8px 16px",margin:"2px 4px","&:first-of-type":{marginTop:4},"&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.hoverOpacity})`:js(t.palette.primary.main,t.palette.action.hoverOpacity)},"&.Mui-selected":{backgroundColor:(t.vars||t).palette.primary.main,color:(t.vars||t).palette.primary.contrastText,"&:focus-visible, &:hover":{backgroundColor:(t.vars||t).palette.primary.dark}},"&.Mui-focusVisible":{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.focusOpacity})`:js(t.palette.primary.main,t.palette.action.focusOpacity)}})),KW=O.forwardRef(function(e,n){const r=Yt(),i=O.useRef(null),a=ci(n,i),s=O.useRef(null),o=bt({props:e,name:"MuiDigitalClock"}),{ampm:c=r.is12HourCycleInCurrentLocale(),timeStep:d=30,autoFocus:f,slots:p,slotProps:g,value:m,defaultValue:x,referenceDate:b,disableIgnoringDatePartForTimeValidation:A=!1,maxTime:E,minTime:S,disableFuture:T,disablePast:I,minutesStep:P=1,shouldDisableTime:F,onChange:M,view:D,openTo:R,onViewChange:B,focusedView:N,onFocusedViewChange:k,className:j,classes:q,disabled:X,readOnly:G,views:W=["hours"],skipDisabled:K=!1,timezone:Z}=o,fe=je(o,GW),{value:me,handleValueChange:ve,timezone:be}=uu({name:"DigitalClock",timezone:Z,value:m,defaultValue:x,referenceDate:b,onChange:M,valueManager:Fi}),Me=ts(),ge=_f(be),{ownerState:Le}=or(),Ne=H({},Le,{hasDigitalClockAlreadyBeenRendered:!!i.current}),Se=WW(q),J=(p==null?void 0:p.digitalClockItem)??XW,he=Ct({elementType:J,externalSlotProps:g==null?void 0:g.digitalClockItem,ownerState:Ne,className:Se.item}),ue=zM({value:me,referenceDate:b,adapter:r,props:o,timezone:be}),ie=He(We=>ve(We,"finish","hours")),{setValueAndGoToNextView:Be}=yy({view:D,views:W,openTo:R,onViewChange:B,onChange:ie,focusedView:N,onFocusedViewChange:k}),we=He(We=>{Be(We,"finish")});Kn(()=>{if(i.current===null)return;const We=i.current.querySelector('[role="listbox"] [role="option"][tabindex="0"], [role="listbox"] [role="option"][aria-selected="true"]');if(!We)return;const Re=We.offsetTop;(f||N)&&We.focus(),i.current.scrollTop=Re-4});const $e=O.useCallback(We=>{const Re=my(A,r),ke=()=>!(S&&Re(S,We)||E&&Re(We,E)||T&&Re(We,ge)||I&&Re(ge,We)),ht=()=>r.getMinutes(We)%P!==0?!1:F?!F(We,"hours"):!0;return!ke()||!ht()},[A,r,S,E,T,ge,I,P,F]),Oe=O.useMemo(()=>{const We=[];let ke=r.startOfDay(ue);for(;r.isSameDay(ue,ke);)We.push(ke),ke=r.addMinutes(ke,d);return We},[ue,d,r]),De=Oe.findIndex(We=>r.isEqual(We,ue)),qe=We=>{switch(We.key){case"PageUp":{const Re=s1(s.current)-5,ke=s.current.children,ht=Math.max(0,Re),_t=ke[ht];_t&&_t.focus(),We.preventDefault();break}case"PageDown":{const Re=s1(s.current)+5,ke=s.current.children,ht=Math.min(ke.length-1,Re),_t=ke[ht];_t&&_t.focus(),We.preventDefault();break}}};return v.jsx(YW,H({ref:a,className:Ut(Se.root,j),ownerState:Ne},fe,{children:v.jsx(qW,{ref:s,role:"listbox","aria-label":Me.timePickerToolbarTitle,className:Se.list,onKeyDown:qe,children:Oe.map((We,Re)=>{const ke=$e(We);if(K&&ke)return null;const ht=r.isEqual(We,me),_t=r.format(We,c?"fullTime12h":"fullTime24h"),Pn=De===Re||De===-1&&Re===0?0:-1;return v.jsx(J,H({onClick:()=>!G&&we(We),selected:ht,disabled:X||ke,disableRipple:G,role:"option","aria-disabled":G,"aria-selected":ht,tabIndex:Pn,itemValue:We,formattedValue:_t},he,{children:_t}),`${We.valueOf()}-${_t}`)})})}))});function QW(t){return Ot("MuiMultiSectionDigitalClock",t)}const Fw=Mt("MuiMultiSectionDigitalClock",["root"]);function ZW(t){return Ot("MuiMultiSectionDigitalClockSection",t)}const jw=Mt("MuiMultiSectionDigitalClockSection",["root","item"]),JW=["autoFocus","onChange","className","classes","disabled","readOnly","items","active","slots","slotProps","skipDisabled"],eY=t=>wt({root:["root"],item:["item"]},ZW,t),tY=Pe(yR,{name:"MuiMultiSectionDigitalClockSection",slot:"Root"})(({theme:t})=>({maxHeight:HM,width:56,padding:0,overflow:"hidden",scrollbarWidth:"thin","@media (prefers-reduced-motion: no-preference)":{scrollBehavior:"auto"},"@media (pointer: fine)":{"&:hover":{overflowY:"auto"}},"@media (pointer: none), (pointer: coarse)":{overflowY:"auto"},"&:not(:first-of-type)":{borderLeft:`1px solid ${(t.vars||t).palette.divider}`},variants:[{props:{hasDigitalClockAlreadyBeenRendered:!0},style:{"@media (prefers-reduced-motion: no-preference)":{scrollBehavior:"smooth"}}}]})),nY=Pe(Zt,{name:"MuiMultiSectionDigitalClockSection",slot:"Item"})(({theme:t})=>({padding:8,margin:"2px 4px",width:t0,justifyContent:"center","&:first-of-type":{marginTop:4},"&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.hoverOpacity})`:js(t.palette.primary.main,t.palette.action.hoverOpacity)},"&.Mui-selected":{backgroundColor:(t.vars||t).palette.primary.main,color:(t.vars||t).palette.primary.contrastText,"&:focus-visible, &:hover":{backgroundColor:(t.vars||t).palette.primary.dark}},"&.Mui-focusVisible":{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.focusOpacity})`:js(t.palette.primary.main,t.palette.action.focusOpacity)}})),rY=O.forwardRef(function(e,n){const r=O.useRef(null),i=ci(n,r),a=O.useRef(null),s=bt({props:e,name:"MuiMultiSectionDigitalClockSection"}),{autoFocus:o,onChange:c,className:d,classes:f,disabled:p,readOnly:g,items:m,active:x,slots:b,slotProps:A,skipDisabled:E}=s,S=je(s,JW),{ownerState:T}=or(),I=H({},T,{hasDigitalClockAlreadyBeenRendered:!!r.current}),P=eY(f),F=(b==null?void 0:b.digitalClockSectionItem)??nY;Kn(()=>{if(r.current===null)return;const R=r.current.querySelector('[role="option"][tabindex="0"], [role="option"][aria-selected="true"]');if(x&&o&&R&&R.focus(),!R||a.current===R)return;a.current=R;const B=R.offsetTop,N=R.offsetHeight,k=r.current.clientHeight,j=r.current.scrollHeight,q=B-k/2+N/2,X=j-k,G=Math.min(q,X);r.current.scrollTop=Math.max(0,G)});const M=m.findIndex(R=>R.isFocused(R.value)),D=R=>{switch(R.key){case"PageUp":{const B=s1(r.current)-5,N=r.current.children,k=Math.max(0,B),j=N[k];j&&j.focus(),R.preventDefault();break}case"PageDown":{const B=s1(r.current)+5,N=r.current.children,k=Math.min(N.length-1,B),j=N[k];j&&j.focus(),R.preventDefault();break}}};return v.jsx(tY,H({ref:i,className:Ut(P.root,d),ownerState:I,autoFocusItem:o&&x,role:"listbox",onKeyDown:D},S,{children:m.map((R,B)=>{var X;const N=(X=R.isDisabled)==null?void 0:X.call(R,R.value),k=p||N;if(E&&k)return null;const j=R.isSelected(R.value),q=M===B||M===-1&&B===0?0:-1;return v.jsx(F,H({onClick:()=>!g&&c(R.value),selected:j,disabled:k,disableRipple:g,role:"option","aria-disabled":g||k||void 0,"aria-label":R.ariaLabel,"aria-selected":j,tabIndex:q,className:P.item},A==null?void 0:A.digitalClockSectionItem,{children:R.label}),R.label)})}))}),iY=({now:t,value:e,adapter:n,ampm:r,isDisabled:i,resolveAriaLabel:a,timeStep:s,valueOrReferenceDate:o})=>{const c=e?n.getHours(e):null,d=[],f=(m,x)=>{const b=x??c;return b===null?!1:r?m===12?b===12||b===0:b===m||b-12===m:b===m},p=m=>f(m,n.getHours(o)),g=r?11:23;for(let m=0;m<=g;m+=s){let x=n.format(n.setHours(t,m),r?"hours12h":"hours24h");const b=a(parseInt(x,10).toString());x=n.formatNumber(x),d.push({value:m,label:x,isSelected:f,isDisabled:i,isFocused:p,ariaLabel:b})}return d},CD=({value:t,adapter:e,isDisabled:n,timeStep:r,resolveLabel:i,resolveAriaLabel:a,hasValue:s=!0})=>{const o=d=>t===null?!1:s&&t===d,c=d=>t===d;return[...Array.from({length:Math.ceil(60/r)},(d,f)=>{const p=r*f;return{value:p,label:e.formatNumber(i(p)),isDisabled:n,isSelected:o,isFocused:c,ariaLabel:a(p.toString())}})]},aY=["ampm","timeSteps","autoFocus","slots","slotProps","value","defaultValue","referenceDate","disableIgnoringDatePartForTimeValidation","maxTime","minTime","disableFuture","disablePast","minutesStep","shouldDisableTime","onChange","view","views","openTo","onViewChange","focusedView","onFocusedViewChange","className","classes","disabled","readOnly","skipDisabled","timezone"],sY=t=>wt({root:["root"]},QW,t),oY=Pe(O_,{name:"MuiMultiSectionDigitalClock",slot:"Root"})(({theme:t})=>({flexDirection:"row",width:"100%",borderBottom:`1px solid ${(t.vars||t).palette.divider}`})),lY=O.forwardRef(function(e,n){const r=Yt(),i=Ma(),a=bt({props:e,name:"MuiMultiSectionDigitalClock"}),{ampm:s=r.is12HourCycleInCurrentLocale(),timeSteps:o,autoFocus:c,slots:d,slotProps:f,value:p,defaultValue:g,referenceDate:m,disableIgnoringDatePartForTimeValidation:x=!1,maxTime:b,minTime:A,disableFuture:E,disablePast:S,minutesStep:T=1,shouldDisableTime:I,onChange:P,view:F,views:M=["hours","minutes"],openTo:D,onViewChange:R,focusedView:B,onFocusedViewChange:N,className:k,classes:j,disabled:q,readOnly:X,skipDisabled:G=!1,timezone:W}=a,K=je(a,aY),{value:Z,handleValueChange:fe,timezone:me}=uu({name:"MultiSectionDigitalClock",timezone:W,value:p,defaultValue:g,referenceDate:m,onChange:P,valueManager:Fi}),ve=ts(),be=_f(me),Me=O.useMemo(()=>H({hours:1,minutes:5,seconds:5},o),[o]),ge=zM({value:Z,referenceDate:m,adapter:r,props:a,timezone:me}),Le=He((Re,ke,ht)=>fe(Re,ke,ht)),Ne=O.useMemo(()=>!s||!M.includes("hours")||M.includes("meridiem")?M:[...M,"meridiem"],[s,M]),{view:Se,setValueAndGoToNextView:J,focusedView:he}=yy({view:F,views:Ne,openTo:D,onViewChange:R,onChange:Le,focusedView:B,onFocusedViewChange:N}),ue=He(Re=>{J(Re,"finish","meridiem")}),{meridiemMode:ie,handleMeridiemChange:Be}=UM(ge,s,ue,"finish"),we=O.useCallback((Re,ke)=>{const ht=my(x,r),_t=ke==="hours"||ke==="minutes"&&Ne.includes("seconds"),xn=({start:rt,end:at})=>!(A&&ht(A,at)||b&&ht(rt,b)||E&&ht(rt,be)||S&&ht(be,_t?at:rt)),Pn=(rt,at=1)=>{if(rt%at!==0)return!1;if(I)switch(ke){case"hours":return!I(r.setHours(ge,rt),"hours");case"minutes":return!I(r.setMinutes(ge,rt),"minutes");case"seconds":return!I(r.setSeconds(ge,rt),"seconds");default:return!1}return!0};switch(ke){case"hours":{const rt=Lw(Re,ie,s),at=r.setHours(ge,rt);if(r.getHours(at)!==rt)return!0;const In=r.setSeconds(r.setMinutes(at,0),0),Qe=r.setSeconds(r.setMinutes(at,59),59);return!xn({start:In,end:Qe})||!Pn(rt)}case"minutes":{const rt=r.setMinutes(ge,Re),at=r.setSeconds(rt,0),In=r.setSeconds(rt,59);return!xn({start:at,end:In})||!Pn(Re,T)}case"seconds":{const rt=r.setSeconds(ge,Re);return!xn({start:rt,end:rt})||!Pn(Re)}default:throw new Error("not supported")}},[s,ge,x,b,ie,A,T,I,r,E,S,be,Ne]),$e=O.useCallback(Re=>{switch(Re){case"hours":return{onChange:ke=>{const ht=Lw(ke,ie,s);J(r.setHours(ge,ht),"finish","hours")},items:iY({now:be,value:Z,ampm:s,adapter:r,isDisabled:ke=>we(ke,"hours"),timeStep:Me.hours,resolveAriaLabel:ve.hoursClockNumberText,valueOrReferenceDate:ge})};case"minutes":return{onChange:ke=>{J(r.setMinutes(ge,ke),"finish","minutes")},items:CD({value:r.getMinutes(ge),adapter:r,isDisabled:ke=>we(ke,"minutes"),resolveLabel:ke=>r.format(r.setMinutes(be,ke),"minutes"),timeStep:Me.minutes,hasValue:!!Z,resolveAriaLabel:ve.minutesClockNumberText})};case"seconds":return{onChange:ke=>{J(r.setSeconds(ge,ke),"finish","seconds")},items:CD({value:r.getSeconds(ge),adapter:r,isDisabled:ke=>we(ke,"seconds"),resolveLabel:ke=>r.format(r.setSeconds(be,ke),"seconds"),timeStep:Me.seconds,hasValue:!!Z,resolveAriaLabel:ve.secondsClockNumberText})};case"meridiem":{const ke=f0(r,"am"),ht=f0(r,"pm");return{onChange:Be,items:[{value:"am",label:ke,isSelected:()=>!!Z&&ie==="am",isFocused:()=>!!ge&&ie==="am",ariaLabel:ke},{value:"pm",label:ht,isSelected:()=>!!Z&&ie==="pm",isFocused:()=>!!ge&&ie==="pm",ariaLabel:ht}]}}default:throw new Error(`Unknown view: ${Re} found.`)}},[be,Z,s,r,Me.hours,Me.minutes,Me.seconds,ve.hoursClockNumberText,ve.minutesClockNumberText,ve.secondsClockNumberText,ie,J,ge,we,Be]),Oe=O.useMemo(()=>{if(!i)return Ne;const Re=Ne.filter(ke=>ke!=="meridiem");return Re.reverse(),Ne.includes("meridiem")&&Re.push("meridiem"),Re},[i,Ne]),De=O.useMemo(()=>Ne.reduce((Re,ke)=>H({},Re,{[ke]:$e(ke)}),{}),[Ne,$e]),{ownerState:qe}=or(),We=sY(j);return v.jsx(oY,H({ref:n,className:Ut(We.root,k),ownerState:qe,role:"group"},K,{children:Oe.map(Re=>v.jsx(rY,{items:De[Re].items,onChange:De[Re].onChange,active:Se===Re,autoFocus:c||he===Re,disabled:q,readOnly:X,slots:d,slotProps:f,skipDisabled:G,"aria-label":ve.selectViewText(Re)},Re))}))});function cY(t){return Ot("MuiPickersDay",t)}const Mc=Mt("MuiPickersDay",["root","dayWithMargin","dayOutsideMonth","hiddenDaySpacingFiller","today","selected","disabled"]);function GM(t){const{disabled:e,selected:n,today:r,outsideCurrentMonth:i,day:a,disableMargin:s,disableHighlightToday:o,showDaysOutsideCurrentMonth:c}=t,d=Yt(),{ownerState:f}=or();return O.useMemo(()=>H({},f,{day:a,isDaySelected:n??!1,isDayDisabled:e??!1,isDayCurrent:r??!1,isDayOutsideMonth:i??!1,isDayStartOfWeek:d.isSameDay(a,d.startOfWeek(a)),isDayEndOfWeek:d.isSameDay(a,d.endOfWeek(a)),disableMargin:s??!1,disableHighlightToday:o??!1,showDaysOutsideCurrentMonth:c??!1}),[d,f,a,n,e,r,i,s,o,c])}const uY=["autoFocus","className","classes","hidden","isAnimating","onClick","onDaySelect","onFocus","onBlur","onKeyDown","onMouseDown","onMouseEnter","children","isFirstVisibleCell","isLastVisibleCell","day","selected","disabled","today","outsideCurrentMonth","disableMargin","disableHighlightToday","showDaysOutsideCurrentMonth"],dY=(t,e)=>{const{isDaySelected:n,isDayDisabled:r,isDayCurrent:i,isDayOutsideMonth:a,disableMargin:s,disableHighlightToday:o,showDaysOutsideCurrentMonth:c}=e,d=a&&!c;return wt({root:["root",n&&!d&&"selected",r&&"disabled",!s&&"dayWithMargin",!o&&i&&"today",a&&c&&"dayOutsideMonth",d&&"hiddenDaySpacingFiller"],hiddenDaySpacingFiller:["hiddenDaySpacingFiller"]},cY,t)},WM=({theme:t})=>H({},t.typography.caption,{width:R0,height:R0,borderRadius:"50%",padding:0,backgroundColor:"transparent",transition:t.transitions.create("background-color",{duration:t.transitions.duration.short}),color:(t.vars||t).palette.text.primary,"@media (pointer: fine)":{"&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.hoverOpacity})`:js(t.palette.primary.main,t.palette.action.hoverOpacity)}},"&:focus":{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.focusOpacity})`:js(t.palette.primary.main,t.palette.action.focusOpacity),[`&.${Mc.selected}`]:{willChange:"background-color",backgroundColor:(t.vars||t).palette.primary.dark}},[`&.${Mc.selected}`]:{color:(t.vars||t).palette.primary.contrastText,backgroundColor:(t.vars||t).palette.primary.main,fontWeight:t.typography.fontWeightMedium,"&:hover":{willChange:"background-color",backgroundColor:(t.vars||t).palette.primary.dark}},[`&.${Mc.disabled}:not(.${Mc.selected})`]:{color:(t.vars||t).palette.text.disabled},[`&.${Mc.disabled}&.${Mc.selected}`]:{opacity:.6},variants:[{props:{disableMargin:!1},style:{margin:`0 ${vy}px`}},{props:{isDayOutsideMonth:!0,showDaysOutsideCurrentMonth:!0},style:{color:(t.vars||t).palette.text.secondary}},{props:{disableHighlightToday:!1,isDayCurrent:!0},style:{[`&:not(.${Mc.selected})`]:{border:`1px solid ${(t.vars||t).palette.text.secondary}`}}}]}),YM=(t,e)=>{const{ownerState:n}=t;return[e.root,!n.disableMargin&&e.dayWithMargin,!n.disableHighlightToday&&n.isDayCurrent&&e.today,!n.isDayOutsideMonth&&n.showDaysOutsideCurrentMonth&&e.dayOutsideMonth,n.isDayOutsideMonth&&!n.showDaysOutsideCurrentMonth&&e.hiddenDaySpacingFiller]},fY=Pe(QN,{name:"MuiPickersDay",slot:"Root",overridesResolver:YM})(WM),hY=Pe("div",{name:"MuiPickersDay",slot:"Root",overridesResolver:YM})(({theme:t})=>H({},WM({theme:t}),{opacity:0,pointerEvents:"none"})),kh=()=>{},pY=O.forwardRef(function(e,n){const r=bt({props:e,name:"MuiPickersDay"}),{autoFocus:i=!1,className:a,classes:s,isAnimating:o,onClick:c,onDaySelect:d,onFocus:f=kh,onBlur:p=kh,onKeyDown:g=kh,onMouseDown:m=kh,onMouseEnter:x=kh,children:b,day:A,selected:E,disabled:S,today:T,outsideCurrentMonth:I,disableMargin:P,disableHighlightToday:F,showDaysOutsideCurrentMonth:M}=r,D=je(r,uY),R=GM({day:A,selected:E,disabled:S,today:T,outsideCurrentMonth:I,disableMargin:P,disableHighlightToday:F,showDaysOutsideCurrentMonth:M}),B=dY(s,R),N=Yt(),k=O.useRef(null),j=ci(k,n);Kn(()=>{i&&!S&&!o&&!I&&k.current.focus()},[i,S,o,I]);const q=G=>{m(G),I&&G.preventDefault()},X=G=>{G.defaultMuiPrevented=!0,S||d(A),I&&G.currentTarget.focus(),c&&c(G)};return I&&!M?v.jsx(hY,{className:Ut(B.root,B.hiddenDaySpacingFiller,a),ownerState:R,role:D.role}):v.jsx(fY,H({className:Ut(B.root,a),ref:j,centerRipple:!0,disabled:S,tabIndex:E?0:-1,onKeyDown:G=>g(G,A),onFocus:G=>f(G,A),onBlur:G=>p(G,A),onMouseEnter:G=>x(G,A),onClick:X,onMouseDown:q},D,{ownerState:R,children:b??N.format(A,"dayOfMonth")}))}),gY=O.memo(pY),od=t=>t.saveQuery!=null,qM=({stateResponse:{localizedDigits:t,sectionsValueBoundaries:e,state:n,timezone:r,setCharacterQuery:i,setTempAndroidValueStr:a,updateSectionValue:s}})=>{const o=Yt(),c=({keyPressed:p,sectionIndex:g},m,x)=>{const b=p.toLowerCase(),A=n.sections[g];if(n.characterQuery!=null&&(!x||x(n.characterQuery.value))&&n.characterQuery.sectionIndex===g){const S=`${n.characterQuery.value}${b}`,T=m(S,A);if(!od(T))return i({sectionIndex:g,value:S,sectionType:A.type}),T}const E=m(b,A);return od(E)&&!E.saveQuery?(i(null),null):(i({sectionIndex:g,value:b,sectionType:A.type}),od(E)?null:E)},d=p=>{const g=(b,A,E)=>{const S=A.filter(T=>T.toLowerCase().startsWith(E));return S.length===0?{saveQuery:!1}:{sectionValue:S[0],shouldGoToNextSection:S.length===1}},m=(b,A,E,S)=>{const T=I=>DM(o,r,A.type,I);if(A.contentType==="letter")return g(A.format,T(A.format),b);if(E&&S!=null&&IM(o,E).contentType==="letter"){const I=T(E),P=g(E,I,b);return od(P)?{saveQuery:!1}:H({},P,{sectionValue:S(P.sectionValue,I)})}return{saveQuery:!1}};return c(p,(b,A)=>{switch(A.type){case"month":{const E=S=>xD(o,S,o.formats.month,A.format);return m(b,A,o.formats.month,E)}case"weekDay":{const E=(S,T)=>T.indexOf(S).toString();return m(b,A,o.formats.weekday,E)}case"meridiem":return m(b,A);default:return{saveQuery:!1}}})},f=p=>{const g=({queryValue:x,skipIfBelowMinimum:b,section:A})=>{const E=ru(x,t),S=Number(E),T=e[A.type]({currentDate:null,format:A.format,contentType:A.contentType});if(S>T.maximum)return{saveQuery:!1};if(b&&S<T.minimum)return{saveQuery:!0};const I=S*10>T.maximum||E.length===T.maximum.toString().length;return{sectionValue:RM(o,S,T,t,A),shouldGoToNextSection:I}};return c(p,(x,b)=>{if(b.contentType==="digit"||b.contentType==="digit-with-letter")return g({queryValue:x,skipIfBelowMinimum:!1,section:b});if(b.type==="month"){OM(o,"digit","month","MM");const A=g({queryValue:x,skipIfBelowMinimum:!0,section:{type:b.type,format:"MM",hasLeadingZerosInInput:!0,contentType:"digit",maxLength:2}});if(od(A))return A;const E=xD(o,A.sectionValue,"MM",b.format);return H({},A,{sectionValue:E})}if(b.type==="weekDay"){const A=g({queryValue:x,skipIfBelowMinimum:!0,section:b});if(od(A))return A;const E=gy(o,b.format)[Number(A.sectionValue)-1];return H({},A,{sectionValue:E})}return{saveQuery:!1}},x=>vD(x,t))};return He(p=>{const g=n.sections[p.sectionIndex],x=vD(p.keyPressed,t)?f(H({},p,{keyPressed:C_(p.keyPressed,t)})):d(p);if(x==null){a(null);return}s({section:g,newSectionValue:x.sectionValue,shouldGoToNextSection:x.shouldGoToNextSection})})},M_=({props:t,value:e,timezone:n,adapter:r})=>{if(e===null)return null;const{shouldDisableDate:i,shouldDisableMonth:a,shouldDisableYear:s,disablePast:o,disableFuture:c,minDate:d,maxDate:f}=t,p=r.date(void 0,n);switch(!0){case!r.isValid(e):return"invalidDate";case!!(i&&i(e)):return"shouldDisableDate";case!!(a&&a(e)):return"shouldDisableMonth";case!!(s&&s(e)):return"shouldDisableYear";case!!(c&&r.isAfterDay(e,p)):return"disableFuture";case!!(o&&r.isBeforeDay(e,p)):return"disablePast";case!!(d&&r.isBeforeDay(e,d)):return"minDate";case!!(f&&r.isAfterDay(e,f)):return"maxDate";default:return null}};M_.valueManager=Fi;const XM=({adapter:t,value:e,timezone:n,props:r})=>{if(e===null)return null;const{minTime:i,maxTime:a,minutesStep:s,shouldDisableTime:o,disableIgnoringDatePartForTimeValidation:c=!1,disablePast:d,disableFuture:f}=r,p=t.date(void 0,n),g=my(c,t);switch(!0){case!t.isValid(e):return"invalidDate";case!!(i&&g(i,e)):return"minTime";case!!(a&&g(e,a)):return"maxTime";case!!(f&&t.isAfter(e,p)):return"disableFuture";case!!(d&&t.isBefore(e,p)):return"disablePast";case!!(o&&o(e,"hours")):return"shouldDisableTime-hours";case!!(o&&o(e,"minutes")):return"shouldDisableTime-minutes";case!!(o&&o(e,"seconds")):return"shouldDisableTime-seconds";case!!(s&&t.getMinutes(e)%s!==0):return"minutesStep";default:return null}};XM.valueManager=Fi;const xy=({adapter:t,value:e,timezone:n,props:r})=>{const i=M_({adapter:t,value:e,timezone:n,props:r});return i!==null?i:XM({adapter:t,value:e,timezone:n,props:r})};xy.valueManager=Fi;function KM(t){const{props:e,validator:n,value:r,timezone:i,onError:a}=t,s=Yt(),o=O.useRef(n.valueManager.defaultErrorState),c=n({adapter:s,value:r,timezone:i,props:e}),d=n.valueManager.hasError(c);O.useEffect(()=>{a&&!n.valueManager.isSameError(c,o.current)&&a(c,r),o.current=c},[n,a,c,r]);const f=He(p=>n({adapter:s,value:p,timezone:i,props:e}));return{validationError:c,hasValidationError:d,getValidationErrorForNewValue:f}}const mY=5e3,QM=t=>{var Oe;const e=Yt(),n=ts(),r=Ma(),{manager:{validator:i,valueType:a,internal_valueManager:s,internal_fieldValueManager:o},internalPropsWithDefaults:c,internalPropsWithDefaults:{value:d,defaultValue:f,referenceDate:p,onChange:g,format:m,formatDensity:x="dense",selectedSections:b,onSelectedSectionsChange:A,shouldRespectLeadingZeros:E=!1,timezone:S,enableAccessibleFieldDOMStructure:T=!0},forwardedProps:{error:I}}=t,{value:P,handleValueChange:F,timezone:M}=uu({name:"a field component",timezone:S,value:d,defaultValue:f,referenceDate:p,onChange:g,valueManager:s}),D=O.useRef(P);O.useEffect(()=>{D.current=P},[P]);const{hasValidationError:R}=KM({props:c,validator:i,timezone:M,value:P,onError:c.onError}),B=O.useMemo(()=>I!==void 0?I:R,[R,I]),N=O.useMemo(()=>QG(e),[e]),k=O.useMemo(()=>nW(e,N,M),[e,N,M]),j=O.useCallback(De=>o.getSectionsFromValue(De,qe=>_D({adapter:e,localeText:n,localizedDigits:N,format:m,date:qe,formatDensity:x,shouldRespectLeadingZeros:E,enableAccessibleFieldDOMStructure:T,isRtl:r})),[o,m,n,N,r,E,e,x,T]),[q,X]=O.useState(()=>{const De=j(P),qe={sections:De,lastExternalValue:P,lastSectionsDependencies:{format:m,isRtl:r,locale:e.locale},tempValueStrAndroid:null,characterQuery:null},We=LW(De),Re=s.getInitialReferenceValue({referenceDate:p,value:P,adapter:e,props:c,granularity:We,timezone:M});return H({},qe,{referenceValue:Re})}),[G,W]=$d({controlled:b,default:null,name:"useField",state:"selectedSections"}),K=De=>{W(De),A==null||A(De)},Z=O.useMemo(()=>Nw(G,q.sections),[G,q.sections]),fe=Z==="all"?0:Z,me=O.useMemo(()=>aW(q.sections,r&&!T),[q.sections,r,T]),ve=O.useMemo(()=>q.sections.every(De=>De.value===""),[q.sections]),be=De=>{const qe={validationError:i({adapter:e,value:De,timezone:M,props:c})};F(De,qe)},Me=(De,qe)=>{const We=[...q.sections];return We[De]=H({},We[De],{value:qe,modified:!0}),We},ge=O.useRef(null),Le=Md(),Ne=De=>{fe!=null&&(ge.current={sectionIndex:fe,value:De},Le.start(0,()=>{ge.current=null}))},Se=()=>{s.areValuesEqual(e,P,s.emptyValue)?X(De=>H({},De,{sections:De.sections.map(qe=>H({},qe,{value:""})),tempValueStrAndroid:null,characterQuery:null})):(X(De=>H({},De,{characterQuery:null})),be(s.emptyValue))},J=()=>{if(fe==null)return;const De=q.sections[fe];De.value!==""&&(Ne(""),o.getDateFromSection(P,De)===null?X(qe=>H({},qe,{sections:Me(fe,""),tempValueStrAndroid:null,characterQuery:null})):(X(qe=>H({},qe,{characterQuery:null})),be(o.updateDateInValue(P,De,null))))},he=De=>{const qe=(Re,ke)=>{const ht=e.parse(Re,m);if(!e.isValid(ht))return null;const _t=_D({adapter:e,localeText:n,localizedDigits:N,format:m,date:ht,formatDensity:x,shouldRespectLeadingZeros:E,enableAccessibleFieldDOMStructure:T,isRtl:r});return bD(e,ht,_t,ke,!1)},We=o.parseValueStr(De,q.referenceValue,qe);be(We)},ue=Md(),ie=({section:De,newSectionValue:qe,shouldGoToNextSection:We})=>{Le.clear(),ue.clear();const Re=o.getDateFromSection(P,De);We&&fe<q.sections.length-1&&K(fe+1);const ke=Me(fe,qe),ht=o.getDateSectionsFromValue(ke,De),_t=JG(e,ht,N);if(e.isValid(_t)){const xn=bD(e,_t,ht,o.getDateFromSection(q.referenceValue,De),!0);return Re==null&&ue.start(0,()=>{D.current===P&&X(Pn=>H({},Pn,{sections:o.clearDateSections(q.sections,De),tempValueStrAndroid:null}))}),be(o.updateDateInValue(P,De,xn))}return ht.every(xn=>xn.value!=="")&&(Re==null||e.isValid(Re))?(Ne(qe),be(o.updateDateInValue(P,De,_t))):Re!=null?(Ne(qe),be(o.updateDateInValue(P,De,null))):X(xn=>H({},xn,{sections:ke,tempValueStrAndroid:null}))},Be=De=>X(qe=>H({},qe,{tempValueStrAndroid:De})),we=He(De=>{X(qe=>H({},qe,{characterQuery:De}))});if(P!==q.lastExternalValue){let De;ge.current!=null&&!e.isValid(o.getDateFromSection(P,q.sections[ge.current.sectionIndex]))?De=Me(ge.current.sectionIndex,ge.current.value):De=j(P),X(qe=>H({},qe,{lastExternalValue:P,sections:De,sectionsDependencies:{format:m,isRtl:r,locale:e.locale},referenceValue:o.updateReferenceValue(e,P,qe.referenceValue),tempValueStrAndroid:null}))}if(r!==q.lastSectionsDependencies.isRtl||m!==q.lastSectionsDependencies.format||e.locale!==q.lastSectionsDependencies.locale){const De=j(P);X(qe=>H({},qe,{lastSectionsDependencies:{format:m,isRtl:r,locale:e.locale},sections:De,tempValueStrAndroid:null,characterQuery:null}))}q.characterQuery!=null&&!B&&fe==null&&we(null),q.characterQuery!=null&&((Oe=q.sections[q.characterQuery.sectionIndex])==null?void 0:Oe.type)!==q.characterQuery.sectionType&&we(null),O.useEffect(()=>{ge.current!=null&&(ge.current=null)});const $e=Md();return O.useEffect(()=>(q.characterQuery!=null&&$e.start(mY,()=>we(null)),()=>{}),[q.characterQuery,we,$e]),O.useEffect(()=>{q.tempValueStrAndroid!=null&&fe!=null&&J()},[q.sections]),{activeSectionIndex:fe,areAllSectionsEmpty:ve,error:B,localizedDigits:N,parsedSelectedSections:Z,sectionOrder:me,sectionsValueBoundaries:k,state:q,timezone:M,value:P,clearValue:Se,clearActiveSection:J,setCharacterQuery:we,setSelectedSections:K,setTempAndroidValueStr:Be,updateSectionValue:ie,updateValueFromValueStr:he,getSectionsFromValue:j}};function ZM(t){const{manager:{internal_useApplyDefaultValuesToFieldInternalProps:e},internalProps:n,skipContextFieldRefAssignment:r}=t,i=R_(),a=kM(),s=ci(n.unstableFieldRef,r?null:a==null?void 0:a.fieldRef),o=i==null?void 0:i.setValue,c=O.useCallback((f,p)=>o==null?void 0:o(f,{validationError:p.validationError,shouldClose:!1}),[o]),d=O.useMemo(()=>a!=null&&i!=null?H({value:i.value,onChange:c,timezone:i.timezone,disabled:i.disabled,readOnly:i.readOnly,autoFocus:i.autoFocus&&!i.open,focused:i.open?!0:void 0,format:i.fieldFormat,formatDensity:a.formatDensity,enableAccessibleFieldDOMStructure:a.enableAccessibleFieldDOMStructure,selectedSections:a.selectedSections,onSelectedSectionsChange:a.onSelectedSectionsChange,unstableFieldRef:s},n):n,[i,a,n,c,s]);return e(d)}function P_(t){const{focused:e,domGetters:n,stateResponse:{parsedSelectedSections:r,state:i}}=t;if(!n.isReady())return;const a=i0(n.getRoot()).getSelection();if(!a)return;if(r==null){a.rangeCount>0&&a.getRangeAt(0).startContainer instanceof Node&&n.getRoot().contains(a.getRangeAt(0).startContainer)&&a.removeAllRanges(),e&&n.getRoot().blur();return}if(!n.getRoot().contains(vi(n.getRoot())))return;const s=new window.Range;let o;r==="all"?o=n.getRoot():i.sections[r].type==="empty"?o=n.getSectionContainer(r):o=n.getSectionContent(r),s.selectNodeContents(o),o.focus(),a.removeAllRanges(),a.addRange(s)}function JM(t){const e=Yt(),{manager:{internal_fieldValueManager:n},internalPropsWithDefaults:{minutesStep:r,disabled:i,readOnly:a},stateResponse:{state:s,value:o,activeSectionIndex:c,parsedSelectedSections:d,sectionsValueBoundaries:f,localizedDigits:p,timezone:g,sectionOrder:m,clearValue:x,clearActiveSection:b,setSelectedSections:A,updateSectionValue:E}}=t;return He(S=>{if(!i)switch(!0){case((S.ctrlKey||S.metaKey)&&String.fromCharCode(S.keyCode)==="A"&&!S.shiftKey&&!S.altKey):{S.preventDefault(),A("all");break}case S.key==="ArrowRight":{if(S.preventDefault(),d==null)A(m.startIndex);else if(d==="all")A(m.endIndex);else{const T=m.neighbors[d].rightIndex;T!==null&&A(T)}break}case S.key==="ArrowLeft":{if(S.preventDefault(),d==null)A(m.endIndex);else if(d==="all")A(m.startIndex);else{const T=m.neighbors[d].leftIndex;T!==null&&A(T)}break}case S.key==="Delete":{if(S.preventDefault(),a)break;d==null||d==="all"?x():b();break}case["ArrowUp","ArrowDown","Home","End","PageUp","PageDown"].includes(S.key):{if(S.preventDefault(),a||c==null)break;d==="all"&&A(c);const T=s.sections[c],I=vY(e,g,T,S.key,f,p,n.getDateFromSection(o,T),{minutesStep:r});E({section:T,newSectionValue:I,shouldGoToNextSection:!1});break}}})}function yY(t){switch(t){case"ArrowUp":return 1;case"ArrowDown":return-1;case"PageUp":return 5;case"PageDown":return-5;default:return 0}}function vY(t,e,n,r,i,a,s,o){const c=yY(r),d=r==="Home",f=r==="End",p=n.value===""||d||f,g=()=>{const x=i[n.type]({currentDate:s,format:n.format,contentType:n.contentType}),b=S=>RM(t,S,x,a,n),A=n.type==="minutes"&&(o!=null&&o.minutesStep)?o.minutesStep:1;let E;if(p){if(n.type==="year"&&!f&&!d)return t.formatByString(t.date(void 0,e),n.format);c>0||d?E=x.minimum:E=x.maximum}else E=parseInt(ru(n.value,a),10)+c*A;return E%A!==0&&((c<0||d)&&(E+=A-(A+E)%A),(c>0||f)&&(E-=E%A)),E>x.maximum?b(x.minimum+(E-x.maximum-1)%(x.maximum-x.minimum+1)):E<x.minimum?b(x.maximum-(x.minimum-E-1)%(x.maximum-x.minimum+1)):b(E)},m=()=>{const x=DM(t,e,n.type,n.format);if(x.length===0)return n.value;if(p)return c>0||d?x[0]:x[x.length-1];const E=((x.indexOf(n.value)+c)%x.length+x.length)%x.length;return x[E]};return n.contentType==="digit"||n.contentType==="digit-with-letter"?g():m()}function xY(t){const{manager:e,focused:n,setFocused:r,domGetters:i,stateResponse:a,applyCharacterEditing:s,internalPropsWithDefaults:o,stateResponse:{parsedSelectedSections:c,sectionOrder:d,state:f,clearValue:p,setCharacterQuery:g,setSelectedSections:m,updateValueFromValueStr:x},internalPropsWithDefaults:{disabled:b=!1,readOnly:A=!1}}=t,E=JM({manager:e,internalPropsWithDefaults:o,stateResponse:a}),S=Md(),T=He(D=>{b||!i.isReady()||(r(!0),c==="all"?S.start(0,()=>{const R=document.getSelection().getRangeAt(0).startOffset;if(R===0){m(d.startIndex);return}let B=0,N=0;for(;N<R&&B<f.sections.length;){const k=f.sections[B];B+=1,N+=`${k.startSeparator}${k.value||k.placeholder}${k.endSeparator}`.length}m(B-1)}):n?i.getRoot().contains(D.target)||m(d.startIndex):(r(!0),m(d.startIndex)))}),I=He(D=>{if(!i.isReady()||c!=="all")return;const B=D.target.textContent??"";i.getRoot().innerHTML=f.sections.map(N=>`${N.startSeparator}${N.value||N.placeholder}${N.endSeparator}`).join(""),P_({focused:n,domGetters:i,stateResponse:a}),B.length===0||B.charCodeAt(0)===10?(p(),m("all")):B.length>1?x(B):(c==="all"&&m(0),s({keyPressed:B,sectionIndex:0}))}),P=He(D=>{if(A||c!=="all"){D.preventDefault();return}const R=D.clipboardData.getData("text");D.preventDefault(),g(null),x(R)}),F=He(()=>{if(n||b||!i.isReady())return;const D=vi(i.getRoot());r(!0),i.getSectionIndexFromDOMElement(D)!=null||m(d.startIndex)}),M=He(()=>{setTimeout(()=>{if(!i.isReady())return;const D=vi(i.getRoot());!i.getRoot().contains(D)&&(r(!1),m(null))})});return{onKeyDown:E,onBlur:M,onFocus:F,onClick:T,onPaste:P,onInput:I,contentEditable:c==="all",tabIndex:c===0?-1:0}}function wY(t){const{manager:{internal_fieldValueManager:e},stateResponse:{areAllSectionsEmpty:n,state:r,updateValueFromValueStr:i}}=t,a=He(o=>{i(o.target.value)});return{value:O.useMemo(()=>n?"":e.getV7HiddenInputValueFromSections(r.sections),[n,r.sections,e]),onChange:a}}function bY(t){const{stateResponse:{setSelectedSections:e},internalPropsWithDefaults:{disabled:n=!1}}=t,r=O.useCallback(i=>a=>{n||a.isDefaultPrevented()||e(i)},[n,e]);return O.useCallback(i=>({"data-sectionindex":i,onClick:r(i)}),[r])}function _Y(t){const e=Yt(),n=ts(),{focused:r,domGetters:i,stateResponse:a,applyCharacterEditing:s,manager:{internal_fieldValueManager:o},stateResponse:{parsedSelectedSections:c,sectionsValueBoundaries:d,state:f,value:p,clearActiveSection:g,setCharacterQuery:m,setSelectedSections:x,updateSectionValue:b,updateValueFromValueStr:A},internalPropsWithDefaults:{disabled:E=!1,readOnly:S=!1}}=t,T=c==="all",I=!T&&!E&&!S,P=He(N=>{if(!i.isReady())return;const k=f.sections[N];i.getSectionContent(N).innerHTML=k.value||k.placeholder,P_({focused:r,domGetters:i,stateResponse:a})}),F=He(N=>{if(!i.isReady())return;const k=N.target,j=k.textContent??"",q=i.getSectionIndexFromDOMElement(k),X=f.sections[q];if(S){P(q);return}if(j.length===0){if(X.value===""){P(q);return}const G=N.nativeEvent.inputType;if(G==="insertParagraph"||G==="insertLineBreak"){P(q);return}P(q),g();return}s({keyPressed:j,sectionIndex:q}),P(q)}),M=He(N=>{N.preventDefault()}),D=He(N=>{if(N.preventDefault(),S||E||typeof c!="number")return;const k=f.sections[c],j=N.clipboardData.getData("text"),q=/^[a-zA-Z]+$/.test(j),X=/^[0-9]+$/.test(j),G=/^(([a-zA-Z]+)|)([0-9]+)(([a-zA-Z]+)|)$/.test(j);k.contentType==="letter"&&q||k.contentType==="digit"&&X||k.contentType==="digit-with-letter"&&G?(m(null),b({section:k,newSectionValue:j,shouldGoToNextSection:!0})):!q&&!X&&(m(null),A(j))}),R=He(N=>{N.preventDefault(),N.dataTransfer.dropEffect="none"}),B=O.useCallback(N=>()=>{E||x(N)},[E,x]);return O.useCallback((N,k)=>{const j=d[N.type]({currentDate:o.getDateFromSection(p,N),contentType:N.contentType,format:N.format});return{onInput:F,onPaste:D,onMouseUp:M,onDragOver:R,onFocus:B(k),"aria-readonly":S,"aria-valuenow":EY(N,e),"aria-valuemin":j.minimum,"aria-valuemax":j.maximum,"aria-valuetext":N.value?AY(N,e):n.empty,"aria-label":n[N.type],"aria-disabled":E,tabIndex:T||k>0?-1:0,contentEditable:!T&&!E&&!S,role:"spinbutton","data-range-position":N.dateName||void 0,spellCheck:I?!1:void 0,autoCapitalize:I?"off":void 0,autoCorrect:I?"off":void 0,children:N.value||N.placeholder,inputMode:N.contentType==="letter"?"text":"numeric"}},[d,T,E,S,I,n,e,F,D,M,R,B,o,p])}function AY(t,e){if(t.value)switch(t.type){case"month":{if(t.contentType==="digit"){const r=e.setMonth(e.date(),Number(t.value)-1);return e.isValid(r)?e.format(r,"month"):""}const n=e.parse(t.value,t.format);return n&&e.isValid(n)?e.format(n,"month"):void 0}case"day":if(t.contentType==="digit"){const n=e.setDate(e.startOfYear(e.date()),Number(t.value));return e.isValid(n)?e.format(n,"dayOfMonthFull"):""}return t.value;case"weekDay":return;default:return}}function EY(t,e){if(t.value)switch(t.type){case"weekDay":return t.contentType==="letter"?void 0:Number(t.value);case"meridiem":{const n=e.parse(`01:00 ${t.value}`,`${e.formats.hours12h}:${e.formats.minutes} ${t.format}`);return n?e.getHours(n)>=12?1:0:void 0}case"day":return t.contentType==="digit-with-letter"?parseInt(t.value,10):Number(t.value);case"month":{if(t.contentType==="digit")return Number(t.value);const n=e.parse(t.value,t.format);return n?e.getMonth(n)+1:void 0}default:return t.contentType!=="letter"?Number(t.value):void 0}}const SY=t=>{const{props:e,manager:n,skipContextFieldRefAssignment:r,manager:{valueType:i,internal_useOpenPickerButtonAriaLabel:a}}=t,{internalProps:s,forwardedProps:o}=CM(e,i),c=ZM({manager:n,internalProps:s,skipContextFieldRefAssignment:r}),{sectionListRef:d,onBlur:f,onClick:p,onFocus:g,onInput:m,onPaste:x,onKeyDown:b,onClear:A,clearable:E}=o,{disabled:S=!1,readOnly:T=!1,autoFocus:I=!1,focused:P,unstableFieldRef:F}=c,M=O.useRef(null),D=ci(d,M),R=O.useMemo(()=>({isReady:()=>M.current!=null,getRoot:()=>M.current.getRoot(),getSectionContainer:Oe=>M.current.getSectionContainer(Oe),getSectionContent:Oe=>M.current.getSectionContent(Oe),getSectionIndexFromDOMElement:Oe=>M.current.getSectionIndexFromDOMElement(Oe)}),[M]),B=QM({manager:n,internalPropsWithDefaults:c,forwardedProps:o}),{areAllSectionsEmpty:N,error:k,parsedSelectedSections:j,sectionOrder:q,state:X,value:G,clearValue:W,setSelectedSections:K}=B,Z=qM({stateResponse:B}),fe=a(G),[me,ve]=O.useState(!1);function be(Oe=0){if(S||!M.current||TD(M)!=null)return;const De=Nw(Oe,X.sections);ve(!0),M.current.getSectionContent(De).focus()}const Me=xY({manager:n,internalPropsWithDefaults:c,stateResponse:B,applyCharacterEditing:Z,focused:me,setFocused:ve,domGetters:R}),ge=wY({manager:n,stateResponse:B}),Le=bY({stateResponse:B,internalPropsWithDefaults:c}),Ne=_Y({manager:n,stateResponse:B,applyCharacterEditing:Z,internalPropsWithDefaults:c,domGetters:R,focused:me}),Se=He(Oe=>{b==null||b(Oe),Me.onKeyDown(Oe)}),J=He(Oe=>{f==null||f(Oe),Me.onBlur(Oe)}),he=He(Oe=>{g==null||g(Oe),Me.onFocus(Oe)}),ue=He(Oe=>{Oe.isDefaultPrevented()||(p==null||p(Oe),Me.onClick(Oe))}),ie=He(Oe=>{x==null||x(Oe),Me.onPaste(Oe)}),Be=He(Oe=>{m==null||m(Oe),Me.onInput(Oe)}),we=He((Oe,...De)=>{Oe.preventDefault(),A==null||A(Oe,...De),W(),ID(M)?K(q.startIndex):be(0)}),$e=O.useMemo(()=>X.sections.map((Oe,De)=>{const qe=Ne(Oe,De);return{container:Le(De),content:Ne(Oe,De),before:{children:Oe.startSeparator},after:{children:Oe.endSeparator,"data-range-position":Oe.isEndFormatSeparator?qe["data-range-position"]:void 0}}}),[X.sections,Le,Ne]);return O.useEffect(()=>{if(M.current==null)throw new Error(["MUI X: The `sectionListRef` prop has not been initialized by `PickersSectionList`","You probably tried to pass a component to the `textField` slot that contains an `<input />` element instead of a `PickersSectionList`.","","If you want to keep using an `<input />` HTML element for the editing, please add the `enableAccessibleFieldDOMStructure={false}` prop to your Picker or Field component:","","<DatePicker enableAccessibleFieldDOMStructure={false} slots={{ textField: MyCustomTextField }} />","","Learn more about the field accessible DOM structure on the MUI documentation: https://mui.com/x/react-date-pickers/fields/#fields-to-edit-a-single-element"].join(`
`));I&&!S&&M.current&&M.current.getSectionContent(q.startIndex).focus()},[]),Kn(()=>{if(!(!me||!M.current)){if(j==="all")M.current.getRoot().focus();else if(typeof j=="number"){const Oe=M.current.getSectionContent(j);Oe&&Oe.focus()}}},[j,me]),Kn(()=>{P_({focused:me,domGetters:R,stateResponse:B})}),O.useImperativeHandle(F,()=>({getSections:()=>X.sections,getActiveSectionIndex:()=>TD(M),setSelectedSections:Oe=>{if(S||!M.current)return;const De=Nw(Oe,X.sections);ve((De==="all"?0:De)!==null),K(Oe)},focusField:be,isFieldFocused:()=>ID(M)})),H({},o,Me,{onBlur:J,onClick:ue,onFocus:he,onInput:Be,onPaste:ie,onKeyDown:Se,onClear:we},ge,{error:k,clearable:!!(E&&!N&&!T&&!S),focused:P??me,sectionListRef:D,enableAccessibleFieldDOMStructure:!0,elements:$e,areAllSectionsEmpty:N,disabled:S,readOnly:T,autoFocus:I,openPickerAriaLabel:fe})};function TD(t){var n;const e=vi((n=t.current)==null?void 0:n.getRoot());return!e||!t.current||!t.current.getRoot().contains(e)?null:t.current.getSectionIndexFromDOMElement(e)}function ID(t){var n;const e=vi((n=t.current)==null?void 0:n.getRoot());return!!t.current&&t.current.getRoot().contains(e)}const Td=t=>t.replace(/[\u2066\u2067\u2068\u2069]/g,""),CY=(t,e,n)=>{let r=0,i=n?1:0;const a=[];for(let s=0;s<t.length;s+=1){const o=t[s],c=I_(o,n?"input-rtl":"input-ltr",e),d=`${o.startSeparator}${c}${o.endSeparator}`,f=Td(d).length,p=d.length,g=Td(c),m=i+(g===""?0:c.indexOf(g[0]))+o.startSeparator.length,x=m+g.length;a.push(H({},o,{start:r,end:r+f,startInInput:m,endInInput:x})),r+=f,i+=p}return a},TY=t=>{const e=Ma(),n=Md(),r=Md(),{props:i,manager:a,skipContextFieldRefAssignment:s,manager:{valueType:o,internal_valueManager:c,internal_fieldValueManager:d,internal_useOpenPickerButtonAriaLabel:f}}=t,{internalProps:p,forwardedProps:g}=CM(i,o),m=ZM({manager:a,internalProps:p,skipContextFieldRefAssignment:s}),{onFocus:x,onClick:b,onPaste:A,onBlur:E,onKeyDown:S,onClear:T,clearable:I,inputRef:P,placeholder:F}=g,{readOnly:M=!1,disabled:D=!1,autoFocus:R=!1,focused:B,unstableFieldRef:N}=m,k=O.useRef(null),j=ci(P,k),q=QM({manager:a,internalPropsWithDefaults:m,forwardedProps:g}),{activeSectionIndex:X,areAllSectionsEmpty:G,error:W,localizedDigits:K,parsedSelectedSections:Z,sectionOrder:fe,state:me,value:ve,clearValue:be,clearActiveSection:Me,setCharacterQuery:ge,setSelectedSections:Le,setTempAndroidValueStr:Ne,updateSectionValue:Se,updateValueFromValueStr:J,getSectionsFromValue:he}=q,ue=qM({stateResponse:q}),ie=f(ve),Be=O.useMemo(()=>CY(me.sections,K,e),[me.sections,K,e]);function we(){const Qe=k.current.selectionStart??0;let mt;Qe<=Be[0].startInInput||Qe>=Be[Be.length-1].endInInput?mt=1:mt=Be.findIndex(tn=>tn.startInInput-tn.startSeparator.length>Qe);const Nt=mt===-1?Be.length-1:mt-1;Le(Nt)}function $e(Qe=0){var mt;vi(k.current)!==k.current&&((mt=k.current)==null||mt.focus(),Le(Qe))}const Oe=He(Qe=>{x==null||x(Qe);const mt=k.current;n.start(0,()=>{!mt||mt!==k.current||X==null&&(mt.value.length&&Number(mt.selectionEnd)-Number(mt.selectionStart)===mt.value.length?Le("all"):we())})}),De=He((Qe,...mt)=>{Qe.isDefaultPrevented()||(b==null||b(Qe,...mt),we())}),qe=He(Qe=>{if(A==null||A(Qe),Qe.preventDefault(),M||D)return;const mt=Qe.clipboardData.getData("text");if(typeof Z=="number"){const Nt=me.sections[Z],tn=/^[a-zA-Z]+$/.test(mt),An=/^[0-9]+$/.test(mt),Dn=/^(([a-zA-Z]+)|)([0-9]+)(([a-zA-Z]+)|)$/.test(mt);if(Nt.contentType==="letter"&&tn||Nt.contentType==="digit"&&An||Nt.contentType==="digit-with-letter"&&Dn){ge(null),Se({section:Nt,newSectionValue:mt,shouldGoToNextSection:!0});return}if(tn||An)return}ge(null),J(mt)}),We=He(Qe=>{E==null||E(Qe),Le(null)}),Re=He(Qe=>{if(M)return;const mt=Qe.target.value;if(mt===""){be();return}const Nt=Qe.nativeEvent.data,tn=Nt&&Nt.length>1,An=tn?Nt:mt,Dn=Td(An);if(Z==="all"&&Le(X),X==null||tn){J(tn?Nt:Dn);return}let qt;if(Z==="all"&&Dn.length===1)qt=Dn;else{const qr=Td(d.getV6InputValueFromSections(Be,K,e));let yt=-1,Vn=-1;for(let lr=0;lr<qr.length;lr+=1)yt===-1&&qr[lr]!==Dn[lr]&&(yt=lr),Vn===-1&&qr[qr.length-lr-1]!==Dn[Dn.length-lr-1]&&(Vn=lr);const Jn=Be[X];if(yt<Jn.start||qr.length-Vn-1>Jn.end)return;const Ei=Dn.length-qr.length+Jn.end-Td(Jn.endSeparator||"").length;qt=Dn.slice(Jn.start+Td(Jn.startSeparator||"").length,Ei)}if(qt.length===0){iW()&&Ne(An),Me();return}ue({keyPressed:qt,sectionIndex:X})}),ke=He((Qe,...mt)=>{Qe.preventDefault(),T==null||T(Qe,...mt),be(),DD(k)?Le(fe.startIndex):$e(0)}),ht=JM({manager:a,internalPropsWithDefaults:m,stateResponse:q}),_t=He(Qe=>{S==null||S(Qe),ht(Qe)}),xn=O.useMemo(()=>F!==void 0?F:d.getV6InputValueFromSections(he(c.emptyValue),K,e),[F,d,he,c.emptyValue,K,e]),Pn=O.useMemo(()=>me.tempValueStrAndroid??d.getV6InputValueFromSections(me.sections,K,e),[me.sections,d,me.tempValueStrAndroid,K,e]);O.useEffect(()=>{k.current&&k.current===vi(k.current)&&Le("all")},[]),Kn(()=>{function Qe(){if(!k.current)return;if(Z==null){k.current.scrollLeft&&(k.current.scrollLeft=0);return}if(k.current!==vi(k.current))return;const mt=k.current.scrollTop;if(Z==="all")k.current.select();else{const Nt=Be[Z],tn=Nt.type==="empty"?Nt.startInInput-Nt.startSeparator.length:Nt.startInInput,An=Nt.type==="empty"?Nt.endInInput+Nt.endSeparator.length:Nt.endInInput;(tn!==k.current.selectionStart||An!==k.current.selectionEnd)&&k.current===vi(k.current)&&k.current.setSelectionRange(tn,An),r.start(0,()=>{k.current&&k.current===vi(k.current)&&k.current.selectionStart===k.current.selectionEnd&&(k.current.selectionStart!==tn||k.current.selectionEnd!==An)&&Qe()})}k.current.scrollTop=mt}Qe()});const rt=O.useMemo(()=>X==null||me.sections[X].contentType==="letter"?"text":"numeric",[X,me.sections]),In=!(k.current&&k.current===vi(k.current))&&G;return O.useImperativeHandle(N,()=>({getSections:()=>me.sections,getActiveSectionIndex:()=>{const Qe=k.current.selectionStart??0,mt=k.current.selectionEnd??0;if(Qe===0&&mt===0)return null;const Nt=Qe<=Be[0].startInInput?1:Be.findIndex(tn=>tn.startInInput-tn.startSeparator.length>Qe);return Nt===-1?Be.length-1:Nt-1},setSelectedSections:Qe=>Le(Qe),focusField:$e,isFieldFocused:()=>DD(k)})),H({},g,{error:W,clearable:!!(I&&!G&&!M&&!D),onBlur:We,onClick:De,onFocus:Oe,onPaste:qe,onKeyDown:_t,onClear:ke,inputRef:j,enableAccessibleFieldDOMStructure:!1,placeholder:xn,inputMode:rt,autoComplete:"off",value:In?"":Pn,onChange:Re,focused:B,disabled:D,readOnly:M,autoFocus:R,openPickerAriaLabel:ie})};function DD(t){return t.current===vi(t.current)}const IY=t=>{const e=kM();return(t.props.enableAccessibleFieldDOMStructure??(e==null?void 0:e.enableAccessibleFieldDOMStructure)??!0?SY:TY)(t)};function k_(t){const e=Yt(),n=FM();return O.useMemo(()=>({disablePast:t.disablePast??!1,disableFuture:t.disableFuture??!1,minDate:a1(e,t.minDate,n.minDate),maxDate:a1(e,t.maxDate,n.maxDate)}),[t.minDate,t.maxDate,t.disableFuture,t.disablePast,e,n])}function DY(t={}){const{enableAccessibleFieldDOMStructure:e=!0}=t;return O.useMemo(()=>({valueType:"date-time",validator:xy,internal_valueManager:Fi,internal_fieldValueManager:jW,internal_enableAccessibleFieldDOMStructure:e,internal_useApplyDefaultValuesToFieldInternalProps:OY,internal_useOpenPickerButtonAriaLabel:RY}),[e])}function RY(t){const e=Yt(),n=ts();return O.useMemo(()=>{const r=e.isValid(t)?e.format(t,"fullDate"):null;return n.openDatePickerDialogue(r)},[t,n,e])}function OY(t){const e=Yt(),n=eP(t),r=O.useMemo(()=>t.ampm??e.is12HourCycleInCurrentLocale(),[t.ampm,e]);return O.useMemo(()=>H({},t,n,{format:t.format??(r?e.formats.keyboardDateTime12h:e.formats.keyboardDateTime24h)}),[t,n,r,e])}function eP(t){const e=Yt(),n=FM();return O.useMemo(()=>({disablePast:t.disablePast??!1,disableFuture:t.disableFuture??!1,disableIgnoringDatePartForTimeValidation:!!t.minDateTime||!!t.maxDateTime||!!t.disableFuture||!!t.disablePast,minDate:a1(e,t.minDateTime??t.minDate,n.minDate),maxDate:a1(e,t.maxDateTime??t.maxDate,n.maxDate),minTime:t.minDateTime??t.minTime,maxTime:t.maxDateTime??t.maxTime}),[t.minDateTime,t.maxDateTime,t.minTime,t.maxTime,t.minDate,t.maxDate,t.disableFuture,t.disablePast,e,n])}function N_(t){const{ownerState:e}=or(),n=Ma();return O.useMemo(()=>H({},e,{isFieldDisabled:t.disabled??!1,isFieldReadOnly:t.readOnly??!1,isFieldRequired:t.required??!1,fieldDirection:n?"rtl":"ltr"}),[e,t.disabled,t.readOnly,t.required,n])}function MY(t){return Ot("MuiPickersTextField",t)}Mt("MuiPickersTextField",["root","focused","disabled","error","required"]);function PY(t){return Ot("MuiPickersInputBase",t)}const Bd=Mt("MuiPickersInputBase",["root","focused","disabled","error","notchedOutline","sectionContent","sectionBefore","sectionAfter","adornedStart","adornedEnd","input","inputSizeSmall","activeBar"]);function kY(t){return Ot("MuiPickersSectionList",t)}const Nh=Mt("MuiPickersSectionList",["root","section","sectionContent"]),NY=["slots","slotProps","elements","sectionListRef","classes"],tP=Pe("div",{name:"MuiPickersSectionList",slot:"Root"})({direction:"ltr /*! @noflip */",outline:"none"}),nP=Pe("span",{name:"MuiPickersSectionList",slot:"Section"})({}),rP=Pe("span",{name:"MuiPickersSectionList",slot:"SectionSeparator"})({whiteSpace:"pre"}),iP=Pe("span",{name:"MuiPickersSectionList",slot:"SectionContent"})({outline:"none"}),LY=t=>wt({root:["root"],section:["section"],sectionContent:["sectionContent"]},kY,t);function BY(t){const{slots:e,slotProps:n,element:r,classes:i}=t,{ownerState:a}=or(),s=(e==null?void 0:e.section)??nP,o=Ct({elementType:s,externalSlotProps:n==null?void 0:n.section,externalForwardedProps:r.container,className:i.section,ownerState:a}),c=(e==null?void 0:e.sectionContent)??iP,d=Ct({elementType:c,externalSlotProps:n==null?void 0:n.sectionContent,externalForwardedProps:r.content,additionalProps:{suppressContentEditableWarning:!0},className:i.sectionContent,ownerState:a}),f=(e==null?void 0:e.sectionSeparator)??rP,p=Ct({elementType:f,externalSlotProps:n==null?void 0:n.sectionSeparator,externalForwardedProps:r.before,ownerState:H({},a,{separatorPosition:"before"})}),g=Ct({elementType:f,externalSlotProps:n==null?void 0:n.sectionSeparator,externalForwardedProps:r.after,ownerState:H({},a,{separatorPosition:"after"})});return v.jsxs(s,H({},o,{children:[v.jsx(f,H({},p)),v.jsx(c,H({},d)),v.jsx(f,H({},g))]}))}const FY=O.forwardRef(function(e,n){const r=bt({props:e,name:"MuiPickersSectionList"}),{slots:i,slotProps:a,elements:s,sectionListRef:o,classes:c}=r,d=je(r,NY),f=LY(c),{ownerState:p}=or(),g=O.useRef(null),m=ci(n,g),x=E=>{if(!g.current)throw new Error(`MUI X: Cannot call sectionListRef.${E} before the mount of the component.`);return g.current};O.useImperativeHandle(o,()=>({getRoot(){return x("getRoot")},getSectionContainer(E){return x("getSectionContainer").querySelector(`.${Nh.section}[data-sectionindex="${E}"]`)},getSectionContent(E){return x("getSectionContent").querySelector(`.${Nh.section}[data-sectionindex="${E}"] .${Nh.sectionContent}`)},getSectionIndexFromDOMElement(E){const S=x("getSectionIndexFromDOMElement");if(E==null||!S.contains(E))return null;let T=null;return E.classList.contains(Nh.section)?T=E:E.classList.contains(Nh.sectionContent)&&(T=E.parentElement),T==null?null:Number(T.dataset.sectionindex)}}));const b=(i==null?void 0:i.root)??tP,A=Ct({elementType:b,externalSlotProps:a==null?void 0:a.root,externalForwardedProps:d,additionalProps:{ref:m,suppressContentEditableWarning:!0},className:f.root,ownerState:p});return v.jsx(b,H({},A,{children:A.contentEditable?s.map(({content:E,before:S,after:T})=>`${S.children}${E.children}${T.children}`).join(""):v.jsx(O.Fragment,{children:s.map((E,S)=>v.jsx(BY,{slots:i,slotProps:a,element:E,classes:f},S))})}))}),aP=O.createContext(null),wy=()=>{const t=O.useContext(aP);if(t==null)throw new Error(["MUI X: The `usePickerTextFieldOwnerState` can only be called in components that are used inside a PickerTextField component"].join(`
`));return t},jY=["elements","areAllSectionsEmpty","defaultValue","label","value","onChange","id","autoFocus","endAdornment","startAdornment","renderSuffix","slots","slotProps","contentEditable","tabIndex","onInput","onPaste","onKeyDown","fullWidth","name","readOnly","inputProps","inputRef","sectionListRef","onFocus","onBlur","classes","ownerState"],VY=t=>Math.round(t*1e5)/1e5,by=Pe("div",{name:"MuiPickersInputBase",slot:"Root"})(({theme:t})=>H({},t.typography.body1,{color:(t.vars||t).palette.text.primary,cursor:"text",padding:0,display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",boxSizing:"border-box",letterSpacing:`${VY(.15/16)}em`,variants:[{props:{isInputInFullWidth:!0},style:{width:"100%"}}]})),L_=Pe(tP,{name:"MuiPickersInputBase",slot:"SectionsContainer"})(({theme:t})=>({padding:"4px 0 5px",fontFamily:t.typography.fontFamily,fontSize:"inherit",lineHeight:"1.4375em",flexGrow:1,outline:"none",display:"flex",flexWrap:"nowrap",overflow:"hidden",letterSpacing:"inherit",width:"182px",variants:[{props:{fieldDirection:"rtl"},style:{justifyContent:"end"}},{props:{inputSize:"small"},style:{paddingTop:1}},{props:{hasStartAdornment:!1,isFieldFocused:!1,isFieldValueEmpty:!0},style:{color:"currentColor",opacity:0}},{props:{hasStartAdornment:!1,isFieldFocused:!1,isFieldValueEmpty:!0,inputHasLabel:!1},style:t.vars?{opacity:t.vars.opacity.inputPlaceholder}:{opacity:t.palette.mode==="light"?.42:.5}},{props:{hasStartAdornment:!1,isFieldFocused:!1,isFieldValueEmpty:!0,inputHasLabel:!0,isLabelShrunk:!0},style:t.vars?{opacity:t.vars.opacity.inputPlaceholder}:{opacity:t.palette.mode==="light"?.42:.5}}]})),UY=Pe(nP,{name:"MuiPickersInputBase",slot:"Section"})(({theme:t})=>({fontFamily:t.typography.fontFamily,fontSize:"inherit",letterSpacing:"inherit",lineHeight:"1.4375em",display:"inline-block",whiteSpace:"nowrap"})),HY=Pe(iP,{name:"MuiPickersInputBase",slot:"SectionContent",overridesResolver:(t,e)=>e.content})(({theme:t})=>({fontFamily:t.typography.fontFamily,lineHeight:"1.4375em",letterSpacing:"inherit",width:"fit-content",outline:"none"})),zY=Pe(rP,{name:"MuiPickersInputBase",slot:"Separator"})(()=>({whiteSpace:"pre",letterSpacing:"inherit"})),$Y=Pe("input",{name:"MuiPickersInputBase",slot:"Input",overridesResolver:(t,e)=>e.hiddenInput})(H({},JN)),GY=Pe("div",{name:"MuiPickersInputBase",slot:"ActiveBar"})(({theme:t,ownerState:e})=>({display:"none",position:"absolute",height:2,bottom:2,borderTopLeftRadius:2,borderTopRightRadius:2,transition:t.transitions.create(["width","left"],{duration:t.transitions.duration.shortest}),backgroundColor:(t.vars||t).palette.primary.main,'[data-active-range-position="start"] &, [data-active-range-position="end"] &':{display:"block"},'[data-active-range-position="start"] &':{left:e.sectionOffsets[0]},'[data-active-range-position="end"] &':{left:e.sectionOffsets[1]}})),WY=(t,e)=>{const{isFieldFocused:n,isFieldDisabled:r,isFieldReadOnly:i,hasFieldError:a,inputSize:s,isInputInFullWidth:o,inputColor:c,hasStartAdornment:d,hasEndAdornment:f}=e,p={root:["root",n&&!r&&"focused",r&&"disabled",i&&"readOnly",a&&"error",o&&"fullWidth",`color${ZN(c)}`,s==="small"&&"inputSizeSmall",d&&"adornedStart",f&&"adornedEnd"],notchedOutline:["notchedOutline"],input:["input"],sectionsContainer:["sectionsContainer"],sectionContent:["sectionContent"],sectionBefore:["sectionBefore"],sectionAfter:["sectionAfter"],activeBar:["activeBar"]};return wt(p,PY,t)};function RD(t,e,n,r){var i;if(t.content.id){const a=(i=e.current)==null?void 0:i.querySelectorAll(`[data-sectionindex="${n}"] [data-range-position="${r}"]`);if(a)return Array.from(a).reduce((s,o)=>s+o.offsetWidth,0)}return 0}function YY(t,e){var i,a,s,o,c;let n=0;if(((i=e.current)==null?void 0:i.getAttribute("data-active-range-position"))==="end")for(let d=t.length-1;d>=t.length/2;d-=1)n+=RD(t[d],e,d,"end");else for(let d=0;d<t.length/2;d+=1)n+=RD(t[d],e,d,"start");return{activeBarWidth:n,sectionOffsets:[((s=(a=e.current)==null?void 0:a.querySelector('[data-sectionindex="0"]'))==null?void 0:s.offsetLeft)||0,((c=(o=e.current)==null?void 0:o.querySelector(`[data-sectionindex="${t.length/2}"]`))==null?void 0:c.offsetLeft)||0]}}const B_=O.forwardRef(function(e,n){const r=bt({props:e,name:"MuiPickersInputBase"}),{elements:i,areAllSectionsEmpty:a,value:s,onChange:o,id:c,endAdornment:d,startAdornment:f,renderSuffix:p,slots:g,slotProps:m,contentEditable:x,tabIndex:b,onInput:A,onPaste:E,onKeyDown:S,name:T,readOnly:I,inputProps:P,inputRef:F,sectionListRef:M,onFocus:D,onBlur:R,classes:B,ownerState:N}=r,k=je(r,jY),j=wy(),q=O.useRef(null),X=O.useRef(null),G=O.useRef([]),W=ci(n,q),K=ci(P==null?void 0:P.ref,F),Z=vR();if(!Z)throw new Error("MUI X: PickersInputBase should always be used inside a PickersTextField component");const fe=N??j,me=he=>{var ue;(ue=Z.onFocus)==null||ue.call(Z,he),D==null||D(he)},ve=he=>{me(he)},be=he=>{var ue,ie;if(S==null||S(he),he.key==="Enter"&&!he.defaultMuiPrevented){if((ue=q.current)!=null&&ue.dataset.multiInput)return;const Be=(ie=q.current)==null?void 0:ie.closest("form"),we=Be==null?void 0:Be.querySelector('[type="submit"]');if(!Be||!we)return;he.preventDefault(),Be.requestSubmit(we)}},Me=he=>{var ue;(ue=Z.onBlur)==null||ue.call(Z,he),R==null||R(he)};O.useEffect(()=>{Z&&Z.setAdornedStart(!!f)},[Z,f]),O.useEffect(()=>{Z&&(a?Z.onEmpty():Z.onFilled())},[Z,a]);const ge=WY(B,fe),Le=(g==null?void 0:g.root)||by,Ne=Ct({elementType:Le,externalSlotProps:m==null?void 0:m.root,externalForwardedProps:k,additionalProps:{"aria-invalid":Z.error,ref:W},className:ge.root,ownerState:fe}),Se=(g==null?void 0:g.input)||L_,J=i.some(he=>he.content["data-range-position"]!==void 0);return O.useEffect(()=>{if(!J||!fe.isPickerOpen)return;const{activeBarWidth:he,sectionOffsets:ue}=YY(i,q);G.current=[ue[0],ue[1]],X.current&&(X.current.style.width=`${he}px`)},[i,J,fe.isPickerOpen]),v.jsxs(Le,H({},Ne,{children:[f,v.jsx(FY,{sectionListRef:M,elements:i,contentEditable:x,tabIndex:b,className:ge.sectionsContainer,onFocus:me,onBlur:Me,onInput:A,onPaste:E,onKeyDown:be,slots:{root:Se,section:UY,sectionContent:HY,sectionSeparator:zY},slotProps:{root:H({},m==null?void 0:m.input,{ownerState:fe}),sectionContent:{className:Bd.sectionContent},sectionSeparator:({separatorPosition:he})=>({className:he==="before"?Bd.sectionBefore:Bd.sectionAfter})}}),d,p?p(H({},Z)):null,v.jsx($Y,H({name:T,className:ge.input,value:s,onChange:o,id:c,"aria-hidden":"true",tabIndex:-1,readOnly:I,required:Z.required,disabled:Z.disabled,onFocus:ve},P,{ref:K})),J&&v.jsx(GY,{className:ge.activeBar,ref:X,ownerState:{sectionOffsets:G.current}})]}))});function qY(t){return Ot("MuiPickersOutlinedInput",t)}const Ua=H({},Bd,Mt("MuiPickersOutlinedInput",["root","notchedOutline","input"])),XY=["children","className","label","notched","shrink"],KY=Pe("fieldset",{name:"MuiPickersOutlinedInput",slot:"NotchedOutline"})(({theme:t})=>{const e=t.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{textAlign:"left",position:"absolute",bottom:0,right:0,top:-5,left:0,margin:0,padding:"0 8px",pointerEvents:"none",borderRadius:"inherit",borderStyle:"solid",borderWidth:1,overflow:"hidden",minWidth:"0%",borderColor:t.vars?`rgba(${t.vars.palette.common.onBackgroundChannel} / 0.23)`:e}}),OD=Pe("span")(({theme:t})=>({fontFamily:t.typography.fontFamily,fontSize:"inherit"})),QY=Pe("legend",{shouldForwardProp:t=>Pa(t)&&t!=="notched"})(({theme:t})=>({float:"unset",width:"auto",overflow:"hidden",variants:[{props:{inputHasLabel:!1},style:{padding:0,lineHeight:"11px",transition:t.transitions.create("width",{duration:150,easing:t.transitions.easing.easeOut})}},{props:{inputHasLabel:!0},style:{display:"block",padding:0,height:11,fontSize:"0.75em",visibility:"hidden",maxWidth:.01,transition:t.transitions.create("max-width",{duration:50,easing:t.transitions.easing.easeOut}),whiteSpace:"nowrap","& > span":{paddingLeft:5,paddingRight:5,display:"inline-block",opacity:0,visibility:"visible"}}},{props:{inputHasLabel:!0,notched:!0},style:{maxWidth:"100%",transition:t.transitions.create("max-width",{duration:100,easing:t.transitions.easing.easeOut,delay:50})}}]}));function ZY(t){const{className:e,label:n,notched:r}=t,i=je(t,XY),a=wy();return v.jsx(KY,H({"aria-hidden":!0,className:e},i,{ownerState:a,children:v.jsx(QY,{ownerState:a,notched:r,children:n?v.jsx(OD,{children:n}):v.jsx(OD,{className:"notranslate",children:""})})}))}const JY=["label","autoFocus","ownerState","classes","notched"],eq=Pe(by,{name:"MuiPickersOutlinedInput",slot:"Root"})(({theme:t})=>{const e=t.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{padding:"0 14px",borderRadius:(t.vars||t).shape.borderRadius,[`&:hover .${Ua.notchedOutline}`]:{borderColor:(t.vars||t).palette.text.primary},"@media (hover: none)":{[`&:hover .${Ua.notchedOutline}`]:{borderColor:t.vars?`rgba(${t.vars.palette.common.onBackgroundChannel} / 0.23)`:e}},[`&.${Ua.focused} .${Ua.notchedOutline}`]:{borderStyle:"solid",borderWidth:2},[`&.${Ua.disabled}`]:{[`& .${Ua.notchedOutline}`]:{borderColor:(t.vars||t).palette.action.disabled},"*":{color:(t.vars||t).palette.action.disabled}},[`&.${Ua.error} .${Ua.notchedOutline}`]:{borderColor:(t.vars||t).palette.error.main},variants:Object.keys((t.vars??t).palette).filter(n=>{var r;return((r=(t.vars??t).palette[n])==null?void 0:r.main)??!1}).map(n=>({props:{inputColor:n},style:{[`&.${Ua.focused}:not(.${Ua.error}) .${Ua.notchedOutline}`]:{borderColor:(t.vars||t).palette[n].main}}}))}}),tq=Pe(L_,{name:"MuiPickersOutlinedInput",slot:"SectionsContainer"})({padding:"16.5px 0",variants:[{props:{inputSize:"small"},style:{padding:"8.5px 0"}}]}),nq=t=>{const n=wt({root:["root"],notchedOutline:["notchedOutline"],input:["input"]},qY,t);return H({},t,n)},sP=O.forwardRef(function(e,n){const r=bt({props:e,name:"MuiPickersOutlinedInput"}),{label:i,classes:a,notched:s}=r,o=je(r,JY),c=vR(),d=nq(a);return v.jsx(B_,H({slots:{root:eq,input:tq},renderSuffix:f=>v.jsx(ZY,{shrink:!!(s||f.adornedStart||f.focused||f.filled),notched:!!(s||f.adornedStart||f.focused||f.filled),className:d.notchedOutline,label:i!=null&&i!==""&&(c!=null&&c.required)?v.jsxs(O.Fragment,{children:[i,"","*"]}):i})},o,{label:i,classes:d,ref:n}))});sP.muiName="Input";function rq(t){return Ot("MuiPickersFilledInput",t)}const Pc=H({},Bd,Mt("MuiPickersFilledInput",["root","underline","input"])),iq=["label","autoFocus","disableUnderline","hiddenLabel","classes"],aq=Pe(by,{name:"MuiPickersFilledInput",slot:"Root",shouldForwardProp:t=>Pa(t)&&t!=="disableUnderline"})(({theme:t})=>{const e=t.palette.mode==="light",n=e?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)",r=e?"rgba(0, 0, 0, 0.06)":"rgba(255, 255, 255, 0.09)",i=e?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.13)",a=e?"rgba(0, 0, 0, 0.12)":"rgba(255, 255, 255, 0.12)";return{backgroundColor:t.vars?t.vars.palette.FilledInput.bg:r,borderTopLeftRadius:(t.vars||t).shape.borderRadius,borderTopRightRadius:(t.vars||t).shape.borderRadius,transition:t.transitions.create("background-color",{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut}),"&:hover":{backgroundColor:t.vars?t.vars.palette.FilledInput.hoverBg:i,"@media (hover: none)":{backgroundColor:t.vars?t.vars.palette.FilledInput.bg:r}},[`&.${Pc.focused}`]:{backgroundColor:t.vars?t.vars.palette.FilledInput.bg:r},[`&.${Pc.disabled}`]:{backgroundColor:t.vars?t.vars.palette.FilledInput.disabledBg:a},variants:[...Object.keys((t.vars??t).palette).filter(s=>(t.vars??t).palette[s].main).map(s=>{var o;return{props:{inputColor:s,disableUnderline:!1},style:{"&::after":{borderBottom:`2px solid ${(o=(t.vars||t).palette[s])==null?void 0:o.main}`}}}}),{props:{disableUnderline:!1},style:{"&::after":{left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:t.transitions.create("transform",{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${Pc.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${Pc.error}`]:{"&:before, &:after":{borderBottomColor:(t.vars||t).palette.error.main}},"&::before":{borderBottom:`1px solid ${t.vars?`rgba(${t.vars.palette.common.onBackgroundChannel} / ${t.vars.opacity.inputUnderline})`:n}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:t.transitions.create("border-bottom-color",{duration:t.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${Pc.disabled}, .${Pc.error}):before`]:{borderBottom:`1px solid ${(t.vars||t).palette.text.primary}`},[`&.${Pc.disabled}:before`]:{borderBottomStyle:"dotted"}}},{props:{hasStartAdornment:!0},style:{paddingLeft:12}},{props:{hasEndAdornment:!0},style:{paddingRight:12}}]}}),sq=Pe(L_,{name:"MuiPickersFilledInput",slot:"sectionsContainer",shouldForwardProp:t=>Pa(t)&&t!=="hiddenLabel"})({paddingTop:25,paddingRight:12,paddingBottom:8,paddingLeft:12,variants:[{props:{inputSize:"small"},style:{paddingTop:21,paddingBottom:4}},{props:{hasStartAdornment:!0},style:{paddingLeft:0}},{props:{hasEndAdornment:!0},style:{paddingRight:0}},{props:{hiddenLabel:!0},style:{paddingTop:16,paddingBottom:17}},{props:{hiddenLabel:!0,inputSize:"small"},style:{paddingTop:8,paddingBottom:9}}]}),oq=(t,e)=>{const{inputHasUnderline:n}=e,i=wt({root:["root",n&&"underline"],input:["input"]},rq,t);return H({},t,i)},oP=O.forwardRef(function(e,n){const r=bt({props:e,name:"MuiPickersFilledInput"}),{label:i,disableUnderline:a=!1,hiddenLabel:s=!1,classes:o}=r,c=je(r,iq),d=wy(),f=H({},d,{inputHasUnderline:!a}),p=oq(o,f);return v.jsx(B_,H({slots:{root:aq,input:sq},slotProps:{root:{disableUnderline:a},input:{hiddenLabel:s}}},c,{label:i,classes:p,ref:n,ownerState:f}))});oP.muiName="Input";function lq(t){return Ot("MuiPickersFilledInput",t)}const Lh=H({},Bd,Mt("MuiPickersInput",["root","underline","input"])),cq=["label","autoFocus","disableUnderline","ownerState","classes"],uq=Pe(by,{name:"MuiPickersInput",slot:"Root",shouldForwardProp:t=>Pa(t)&&t!=="disableUnderline"})(({theme:t})=>{let n=t.palette.mode==="light"?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return t.vars&&(n=`rgba(${t.vars.palette.common.onBackgroundChannel} / ${t.vars.opacity.inputUnderline})`),{"label + &":{marginTop:16},variants:[...Object.keys((t.vars??t).palette).filter(r=>(t.vars??t).palette[r].main).map(r=>({props:{inputColor:r,inputHasUnderline:!0},style:{"&::after":{borderBottom:`2px solid ${(t.vars||t).palette[r].main}`}}})),{props:{inputHasUnderline:!0},style:{"&::after":{background:"red",left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:t.transitions.create("transform",{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${Lh.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${Lh.error}`]:{"&:before, &:after":{borderBottomColor:(t.vars||t).palette.error.main}},"&::before":{borderBottom:`1px solid ${n}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:t.transitions.create("border-bottom-color",{duration:t.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${Lh.disabled}, .${Lh.error}):before`]:{borderBottom:`2px solid ${(t.vars||t).palette.text.primary}`,"@media (hover: none)":{borderBottom:`1px solid ${n}`}},[`&.${Lh.disabled}:before`]:{borderBottomStyle:"dotted"}}}]}}),dq=(t,e)=>{const{inputHasUnderline:n}=e,i=wt({root:["root",!n&&"underline"],input:["input"]},lq,t);return H({},t,i)},lP=O.forwardRef(function(e,n){const r=bt({props:e,name:"MuiPickersInput"}),{label:i,disableUnderline:a=!1,classes:s}=r,o=je(r,cq),c=wy(),d=H({},c,{inputHasUnderline:!a}),f=dq(s,d);return v.jsx(B_,H({slots:{root:uq},slotProps:{root:{disableUnderline:a}}},o,{ownerState:d,label:i,classes:f,ref:n}))});lP.muiName="Input";const fq=["onFocus","onBlur","className","classes","color","disabled","error","variant","required","hiddenLabel","InputProps","inputProps","inputRef","sectionListRef","elements","areAllSectionsEmpty","onClick","onKeyDown","onKeyUp","onPaste","onInput","endAdornment","startAdornment","tabIndex","contentEditable","focused","value","onChange","fullWidth","id","name","helperText","FormHelperTextProps","label","InputLabelProps","data-active-range-position"],hq={standard:lP,filled:oP,outlined:sP},pq=Pe(ki,{name:"MuiPickersTextField",slot:"Root"})({maxWidth:"100%"}),gq=(t,e)=>{const{isFieldFocused:n,isFieldDisabled:r,isFieldRequired:i}=e;return wt({root:["root",n&&!r&&"focused",r&&"disabled",i&&"required"]},MY,t)},cP=O.forwardRef(function(e,n){const r=bt({props:e,name:"MuiPickersTextField"}),{onFocus:i,onBlur:a,className:s,classes:o,color:c="primary",disabled:d=!1,error:f=!1,variant:p="outlined",required:g=!1,hiddenLabel:m=!1,InputProps:x,inputProps:b,inputRef:A,sectionListRef:E,elements:S,areAllSectionsEmpty:T,onClick:I,onKeyDown:P,onKeyUp:F,onPaste:M,onInput:D,endAdornment:R,startAdornment:B,tabIndex:N,contentEditable:k,focused:j,value:q,onChange:X,fullWidth:G,id:W,name:K,helperText:Z,FormHelperTextProps:fe,label:me,InputLabelProps:ve,"data-active-range-position":be}=r,Me=je(r,fq),ge=O.useRef(null),Le=ci(n,ge),Ne=F0(W),Se=Z&&Ne?`${Ne}-helper-text`:void 0,J=me&&Ne?`${Ne}-label`:void 0,he=N_({disabled:r.disabled,required:r.required,readOnly:x==null?void 0:x.readOnly}),ue=O.useMemo(()=>H({},he,{isFieldValueEmpty:T,isFieldFocused:j??!1,hasFieldError:f??!1,inputSize:r.size??"medium",inputColor:c??"primary",isInputInFullWidth:G??!1,hasStartAdornment:!!(B??(x==null?void 0:x.startAdornment)),hasEndAdornment:!!(R??(x==null?void 0:x.endAdornment)),inputHasLabel:!!me,isLabelShrunk:!!(ve!=null&&ve.shrink)}),[he,T,j,f,r.size,c,G,B,R,x==null?void 0:x.startAdornment,x==null?void 0:x.endAdornment,me,ve==null?void 0:ve.shrink]),ie=gq(o,ue),Be=hq[p],we={};return p==="outlined"?(ve&&typeof ve.shrink<"u"&&(we.notched=ve.shrink),we.label=me):p==="filled"&&(we.hiddenLabel=m),v.jsx(aP.Provider,{value:ue,children:v.jsxs(pq,H({className:Ut(ie.root,s),ref:Le,focused:j,disabled:d,variant:p,error:f,color:c,fullWidth:G,required:g,ownerState:ue},Me,{children:[me!=null&&me!==""&&v.jsx(Ta,H({htmlFor:Ne,id:J},ve,{children:me})),v.jsx(Be,H({elements:S,areAllSectionsEmpty:T,onClick:I,onKeyDown:P,onKeyUp:F,onInput:D,onPaste:M,onFocus:i,onBlur:a,endAdornment:R,startAdornment:B,tabIndex:N,contentEditable:k,value:q,onChange:X,id:Ne,fullWidth:G,inputProps:b,inputRef:A,sectionListRef:E,label:me,name:K,role:"group","aria-labelledby":J,"aria-describedby":Se,"aria-live":Se?"polite":void 0,"data-active-range-position":be},we,x)),Z&&v.jsx(e5,H({id:Se},fe,{children:Z}))]}))})}),mq=["enableAccessibleFieldDOMStructure"],yq=["InputProps","readOnly","onClear","clearable","clearButtonPosition","openPickerButtonPosition","openPickerAriaLabel"],vq=["onPaste","onKeyDown","inputMode","readOnly","InputProps","inputProps","inputRef","onClear","clearable","clearButtonPosition","openPickerButtonPosition","openPickerAriaLabel"],xq=["ownerState"],wq=["ownerState"],bq=["ownerState"],_q=["ownerState"],Aq=["InputProps","inputProps"],f2=()=>{},Eq=t=>{var S,T,I,P,F,M,D,R,B;let{enableAccessibleFieldDOMStructure:e}=t,n=je(t,mq);if(e){const{InputProps:N,readOnly:k,onClear:j,clearable:q,clearButtonPosition:X,openPickerButtonPosition:G,openPickerAriaLabel:W}=n,K=je(n,yq),Z=Vc>=6&&((S=K==null?void 0:K.slotProps)!=null&&S.input)?h0((T=K==null?void 0:K.slotProps)==null?void 0:T.input,N):f2;return{clearable:q,onClear:j,clearButtonPosition:X,openPickerButtonPosition:G,openPickerAriaLabel:W,textFieldProps:H({},K,Vc>=6&&((I=K==null?void 0:K.slotProps)!=null&&I.input)?{slotProps:H({},K==null?void 0:K.slotProps,{input:fe=>H({},Ao(Z,fe),{readOnly:k})})}:{InputProps:H({},N??{},{readOnly:k})})}}const{onPaste:r,onKeyDown:i,inputMode:a,readOnly:s,InputProps:o,inputProps:c,inputRef:d,onClear:f,clearable:p,clearButtonPosition:g,openPickerButtonPosition:m,openPickerAriaLabel:x}=n,b=je(n,vq),A=Vc>=6&&((P=b==null?void 0:b.slotProps)!=null&&P.input)?h0((F=b==null?void 0:b.slotProps)==null?void 0:F.input,o):f2,E=Vc>=6&&((M=b==null?void 0:b.slotProps)!=null&&M.htmlInput)?h0((D=b==null?void 0:b.slotProps)==null?void 0:D.htmlInput,c):f2;return{clearable:p,onClear:f,clearButtonPosition:g,openPickerButtonPosition:m,openPickerAriaLabel:x,textFieldProps:H({},b,Vc>=6&&((R=b==null?void 0:b.slotProps)!=null&&R.input||(B=b==null?void 0:b.slotProps)!=null&&B.htmlInput)?{slotProps:H({},b==null?void 0:b.slotProps,{input:N=>H({},Ao(A,N),{readOnly:s}),htmlInput:N=>H({},Ao(E,N),{inputMode:a,onPaste:r,onKeyDown:i,ref:d})})}:{InputProps:H({},o??{},{readOnly:s}),inputProps:H({},c??{},{inputMode:a,onPaste:r,onKeyDown:i,ref:d})})}},F_=O.createContext({slots:{},slotProps:{},inputRef:void 0});function Sq(t){var fe,me,ve;const{fieldResponse:e,defaultOpenPickerIcon:n}=t,r=ts(),i=R_(),a=O.useContext(F_),{textFieldProps:s,onClear:o,clearable:c,openPickerAriaLabel:d,clearButtonPosition:f="end",openPickerButtonPosition:p="end"}=Eq(e),g=N_(s),m=He(be=>{be.preventDefault(),i==null||i.setOpen(Me=>!Me)}),x=i?i.triggerStatus:"hidden",b=c?f:null,A=x!=="hidden"?p:null,E=a.slots.textField??(e.enableAccessibleFieldDOMStructure===!1?ct:cP),S=a.slots.inputAdornment??t5,T=Ct({elementType:S,externalSlotProps:a.slotProps.inputAdornment,additionalProps:{position:"start"},ownerState:H({},g,{position:"start"})}),I=je(T,xq),P=Ct({elementType:S,externalSlotProps:a.slotProps.inputAdornment,additionalProps:{position:"end"},ownerState:H({},g,{position:"end"})}),F=je(P,wq),M=a.slots.openPickerButton??Gr,D=Ct({elementType:M,externalSlotProps:a.slotProps.openPickerButton,additionalProps:{disabled:x==="disabled",onClick:m,"aria-label":d,edge:s.variant!=="standard"?A:!1},ownerState:g}),R=je(D,bq),B=a.slots.openPickerIcon??n,N=Ct({elementType:B,externalSlotProps:a.slotProps.openPickerIcon,ownerState:g}),k=a.slots.clearButton??Gr,j=Ct({elementType:k,externalSlotProps:a.slotProps.clearButton,className:"clearButton",additionalProps:{title:r.fieldClearLabel,tabIndex:-1,onClick:o,disabled:e.disabled||e.readOnly,edge:s.variant!=="standard"&&b!==A?b:!1},ownerState:g}),q=je(j,_q),X=a.slots.clearIcon??wW,G=Ct({elementType:X,externalSlotProps:a.slotProps.clearIcon,additionalProps:{fontSize:"small"},ownerState:g});s.ref=ci(s.ref,i==null?void 0:i.rootRef);const W={},K=Ao((Vc>=6&&((fe=s==null?void 0:s.slotProps)==null?void 0:fe.input))??s.InputProps,g);i&&(W.ref=i.triggerRef),!(K!=null&&K.startAdornment)&&(b==="start"||A==="start")&&(W.startAdornment=v.jsxs(S,H({},I,{children:[A==="start"&&v.jsx(M,H({},R,{children:v.jsx(B,H({},N))})),b==="start"&&v.jsx(k,H({},q,{children:v.jsx(X,H({},G))}))]}))),!(K!=null&&K.endAdornment)&&(b==="end"||A==="end")&&(W.endAdornment=v.jsxs(S,H({},F,{children:[b==="end"&&v.jsx(k,H({},q,{children:v.jsx(X,H({},G))})),A==="end"&&v.jsx(M,H({},R,{children:v.jsx(B,H({},N))}))]}))),!(W!=null&&W.endAdornment)&&!(W!=null&&W.startAdornment)&&a.slots.inputAdornment&&(W.endAdornment=v.jsx(S,H({},F))),b!=null&&(s.sx=[{"& .clearButton":{opacity:1},"@media (pointer: fine)":{"& .clearButton":{opacity:0},"&:hover, &:focus-within":{".clearButton":{opacity:1}}}},...Array.isArray(s.sx)?s.sx:[s.sx]]);const Z=Vc>=6&&((me=s==null?void 0:s.slotProps)!=null&&me.input)?Ao(h0(K,W),g):H({},K,W);return(ve=s==null?void 0:s.slotProps)==null||delete ve.input,e.enableAccessibleFieldDOMStructure&&(s==null||delete s.slotProps),v.jsx(E,H({},s,{InputProps:Z}))}function h0(t,e){return t?e?n=>H({},Ao(e,n),Ao(t,n)):t:e}function Cq(t){const{ref:e,externalForwardedProps:n,slotProps:r}=t,i=O.useContext(F_),a=R_(),s=N_(n),{InputProps:o,inputProps:c}=n,d=je(n,Aq),f=Ct({elementType:cP,externalSlotProps:h0(i.slotProps.textField,r==null?void 0:r.textField),externalForwardedProps:d,additionalProps:{ref:e,sx:a==null?void 0:a.rootSx,label:a==null?void 0:a.label,name:a==null?void 0:a.name,className:a==null?void 0:a.rootClassName,inputRef:i.inputRef},ownerState:s});return f.inputProps=H({},c,f.inputProps),f.InputProps=H({},o,f.InputProps),f}function Tq(t){const{slots:e={},slotProps:n={},inputRef:r,children:i}=t,a=O.useMemo(()=>({inputRef:r,slots:{openPickerButton:e.openPickerButton,openPickerIcon:e.openPickerIcon,textField:e.textField,inputAdornment:e.inputAdornment,clearIcon:e.clearIcon,clearButton:e.clearButton},slotProps:{openPickerButton:n.openPickerButton,openPickerIcon:n.openPickerIcon,textField:n.textField,inputAdornment:n.inputAdornment,clearIcon:n.clearIcon,clearButton:n.clearButton}}),[r,e.openPickerButton,e.openPickerIcon,e.textField,e.inputAdornment,e.clearIcon,e.clearButton,n.openPickerButton,n.openPickerIcon,n.textField,n.inputAdornment,n.clearIcon,n.clearButton]);return v.jsx(F_.Provider,{value:a,children:i})}const Iq=t=>{const e=DY(t);return IY({manager:e,props:t})},Dq=["slots","slotProps"],uP=O.forwardRef(function(e,n){const r=bt({props:e,name:"MuiDateTimeField"}),{slots:i,slotProps:a}=r,s=je(r,Dq),o=Cq({slotProps:a,ref:n,externalForwardedProps:s}),c=Iq(o);return v.jsx(Tq,{slots:i,slotProps:a,inputRef:s.inputRef,children:v.jsx(Sq,{fieldResponse:c,defaultOpenPickerIcon:yW})})}),dP=({shouldDisableDate:t,shouldDisableMonth:e,shouldDisableYear:n,minDate:r,maxDate:i,disableFuture:a,disablePast:s,timezone:o})=>{const c=Yt();return O.useCallback(d=>M_({adapter:c,value:d,timezone:o,props:{shouldDisableDate:t,shouldDisableMonth:e,shouldDisableYear:n,minDate:r,maxDate:i,disableFuture:a,disablePast:s}})!==null,[c,t,e,n,r,i,a,s,o])},Rq=(t,e)=>(n,r)=>{switch(r.type){case"setVisibleDate":return H({},n,{slideDirection:r.direction,currentMonth:r.month,isMonthSwitchingAnimating:!e.isSameMonth(r.month,n.currentMonth)&&!t&&!r.skipAnimation,focusedDay:r.focusedDay});case"changeMonthTimezone":{const i=r.newTimezone;if(e.getTimezone(n.currentMonth)===i)return n;let a=e.setTimezone(n.currentMonth,i);return e.getMonth(a)!==e.getMonth(n.currentMonth)&&(a=e.setMonth(a,e.getMonth(n.currentMonth))),H({},n,{currentMonth:a})}case"finishMonthSwitchingAnimation":return H({},n,{isMonthSwitchingAnimating:!1});default:throw new Error("missing support")}},Oq=t=>{const{value:e,referenceDate:n,disableFuture:r,disablePast:i,maxDate:a,minDate:s,onMonthChange:o,onYearChange:c,reduceAnimations:d,shouldDisableDate:f,timezone:p,getCurrentMonthFromVisibleDate:g}=t,m=Yt(),x=O.useRef(Rq(!!d,m)).current,b=O.useMemo(()=>Fi.getInitialReferenceValue({value:e,adapter:m,timezone:p,props:t,referenceDate:n,granularity:Ga.day}),[n,p]),[A,E]=O.useReducer(x,{isMonthSwitchingAnimating:!1,focusedDay:b,currentMonth:m.startOfMonth(b),slideDirection:"left"}),S=dP({shouldDisableDate:f,minDate:s,maxDate:a,disableFuture:r,disablePast:i,timezone:p});O.useEffect(()=>{E({type:"changeMonthTimezone",newTimezone:m.getTimezone(b)})},[b,m]);const T=He(({target:P,reason:F})=>{if(F==="cell-interaction"&&A.focusedDay!=null&&m.isSameDay(P,A.focusedDay))return;const M=F==="cell-interaction";let D,R;if(F==="cell-interaction")D=g(P,A.currentMonth),R=P;else if(D=m.isSameMonth(P,A.currentMonth)?A.currentMonth:m.startOfMonth(P),R=P,S(R)){const k=m.startOfMonth(P),j=m.endOfMonth(P);R=I0({adapter:m,date:R,minDate:m.isBefore(s,k)?k:s,maxDate:m.isAfter(a,j)?j:a,disablePast:i,disableFuture:r,isDateDisabled:S,timezone:p})}const B=!m.isSameMonth(A.currentMonth,D),N=!m.isSameYear(A.currentMonth,D);B&&(o==null||o(D)),N&&(c==null||c(m.startOfYear(D))),E({type:"setVisibleDate",month:D,direction:m.isAfterDay(D,A.currentMonth)?"left":"right",focusedDay:A.focusedDay!=null&&R!=null&&m.isSameDay(R,A.focusedDay)?A.focusedDay:R,skipAnimation:M})}),I=O.useCallback(()=>{E({type:"finishMonthSwitchingAnimation"})},[]);return{referenceDate:b,calendarState:A,setVisibleDate:T,isDateDisabled:S,onMonthSwitchingAnimationEnd:I}},Mq=t=>Ot("MuiPickersFadeTransitionGroup",t);Mt("MuiPickersFadeTransitionGroup",["root"]);const Pq=["children"],kq=t=>wt({root:["root"]},Mq,t),Nq=Pe(xR,{name:"MuiPickersFadeTransitionGroup",slot:"Root"})({display:"block",position:"relative"});function fP(t){const e=bt({props:t,name:"MuiPickersFadeTransitionGroup"}),{className:n,reduceAnimations:r,transKey:i,classes:a}=e,{children:s}=e,o=je(e,Pq),c=kq(a),d=di();return r?s:v.jsx(Nq,{className:Ut(c.root,n),ownerState:o,children:v.jsx(F1,{appear:!1,mountOnEnter:!0,unmountOnExit:!0,timeout:{appear:d.transitions.duration.enteringScreen,enter:d.transitions.duration.enteringScreen,exit:0},children:s},i)})}const Lq=t=>Ot("MuiPickersSlideTransition",t),Aa=Mt("MuiPickersSlideTransition",["root","slideEnter-left","slideEnter-right","slideEnterActive","slideExit","slideExitActiveLeft-left","slideExitActiveLeft-right"]),Bq=["children","className","reduceAnimations","slideDirection","transKey","classes"],Fq=(t,e)=>{const{slideDirection:n}=e,r={root:["root"],exit:["slideExit"],enterActive:["slideEnterActive"],enter:[`slideEnter-${n}`],exitActive:[`slideExitActiveLeft-${n}`]};return wt(r,Lq,t)},jq=Pe(xR,{name:"MuiPickersSlideTransition",slot:"Root",overridesResolver:(t,e)=>[e.root,{[`.${Aa["slideEnter-left"]}`]:e["slideEnter-left"]},{[`.${Aa["slideEnter-right"]}`]:e["slideEnter-right"]},{[`.${Aa.slideEnterActive}`]:e.slideEnterActive},{[`.${Aa.slideExit}`]:e.slideExit},{[`.${Aa["slideExitActiveLeft-left"]}`]:e["slideExitActiveLeft-left"]},{[`.${Aa["slideExitActiveLeft-right"]}`]:e["slideExitActiveLeft-right"]}]})(({theme:t})=>{const e=t.transitions.create("transform",{duration:t.transitions.duration.complex,easing:"cubic-bezier(0.35, 0.8, 0.4, 1)"});return{display:"block",position:"relative",overflowX:"hidden","& > *":{position:"absolute",top:0,right:0,left:0},[`& .${Aa["slideEnter-left"]}`]:{willChange:"transform",transform:"translate(100%)",zIndex:1},[`& .${Aa["slideEnter-right"]}`]:{willChange:"transform",transform:"translate(-100%)",zIndex:1},[`& .${Aa.slideEnterActive}`]:{transform:"translate(0%)",transition:e},[`& .${Aa.slideExit}`]:{transform:"translate(0%)"},[`& .${Aa["slideExitActiveLeft-left"]}`]:{willChange:"transform",transform:"translate(-100%)",transition:e,zIndex:0},[`& .${Aa["slideExitActiveLeft-right"]}`]:{willChange:"transform",transform:"translate(100%)",transition:e,zIndex:0}}});function Vq(t){const e=bt({props:t,name:"MuiPickersSlideTransition"}),{children:n,className:r,reduceAnimations:i,slideDirection:a,transKey:s,classes:o}=e,c=je(e,Bq),{ownerState:d}=or(),f=H({},d,{slideDirection:a}),p=Fq(o,f),g=di();if(i)return v.jsx("div",{className:Ut(p.root,r),children:n});const m={exit:p.exit,enterActive:p.enterActive,enter:p.enter,exitActive:p.exitActive};return v.jsx(jq,{className:Ut(p.root,r),childFactory:x=>O.cloneElement(x,{classNames:m}),role:"presentation",ownerState:f,children:v.jsx(n5,H({mountOnEnter:!0,unmountOnExit:!0,timeout:g.transitions.duration.complex,classNames:m},c,{children:n}),s)})}const Uq=t=>Ot("MuiDayCalendar",t);Mt("MuiDayCalendar",["root","header","weekDayLabel","loadingContainer","slideTransition","monthContainer","weekContainer","weekNumberLabel","weekNumber"]);const Hq=["parentProps","day","focusedDay","selectedDays","isDateDisabled","currentMonthNumber","isViewFocused"],zq=["ownerState"],$q=t=>wt({root:["root"],header:["header"],weekDayLabel:["weekDayLabel"],loadingContainer:["loadingContainer"],slideTransition:["slideTransition"],monthContainer:["monthContainer"],weekContainer:["weekContainer"],weekNumberLabel:["weekNumberLabel"],weekNumber:["weekNumber"]},Uq,t),hP=(R0+vy*2)*6,Gq=Pe("div",{name:"MuiDayCalendar",slot:"Root"})({}),Wq=Pe("div",{name:"MuiDayCalendar",slot:"Header"})({display:"flex",justifyContent:"center",alignItems:"center"}),Yq=Pe(te,{name:"MuiDayCalendar",slot:"WeekDayLabel"})(({theme:t})=>({width:36,height:40,margin:"0 2px",textAlign:"center",display:"flex",justifyContent:"center",alignItems:"center",color:(t.vars||t).palette.text.secondary})),qq=Pe(te,{name:"MuiDayCalendar",slot:"WeekNumberLabel"})(({theme:t})=>({width:36,height:40,margin:"0 2px",textAlign:"center",display:"flex",justifyContent:"center",alignItems:"center",color:(t.vars||t).palette.text.disabled})),Xq=Pe(te,{name:"MuiDayCalendar",slot:"WeekNumber"})(({theme:t})=>H({},t.typography.caption,{width:R0,height:R0,padding:0,margin:`0 ${vy}px`,color:(t.vars||t).palette.text.disabled,fontSize:"0.75rem",alignItems:"center",justifyContent:"center",display:"inline-flex"})),Kq=Pe("div",{name:"MuiDayCalendar",slot:"LoadingContainer"})({display:"flex",justifyContent:"center",alignItems:"center",minHeight:hP}),Qq=Pe(Vq,{name:"MuiDayCalendar",slot:"SlideTransition"})({minHeight:hP}),Zq=Pe("div",{name:"MuiDayCalendar",slot:"MonthContainer"})({overflow:"hidden"}),Jq=Pe("div",{name:"MuiDayCalendar",slot:"WeekContainer"})({margin:`${vy}px 0`,display:"flex",justifyContent:"center"});function eX(t){let{parentProps:e,day:n,focusedDay:r,selectedDays:i,isDateDisabled:a,currentMonthNumber:s,isViewFocused:o}=t,c=je(t,Hq);const{disabled:d,disableHighlightToday:f,isMonthSwitchingAnimating:p,showDaysOutsideCurrentMonth:g,slots:m,slotProps:x,timezone:b}=e,A=Yt(),E=_f(b),S=r!=null&&A.isSameDay(n,r),T=o&&S,I=i.some(q=>A.isSameDay(q,n)),P=A.isSameDay(n,E),F=O.useMemo(()=>d||a(n),[d,a,n]),M=O.useMemo(()=>A.getMonth(n)!==s,[A,n,s]),D=GM({day:n,selected:I,disabled:F,today:P,outsideCurrentMonth:M,disableMargin:void 0,disableHighlightToday:f,showDaysOutsideCurrentMonth:g}),R=(m==null?void 0:m.day)??gY,B=Ct({elementType:R,externalSlotProps:x==null?void 0:x.day,additionalProps:H({disableHighlightToday:f,showDaysOutsideCurrentMonth:g,role:"gridcell",isAnimating:p,"data-timestamp":A.toJsDate(n).valueOf()},c),ownerState:H({},D,{day:n,isDayDisabled:F,isDaySelected:I})}),N=je(B,zq),k=O.useMemo(()=>{const q=A.startOfMonth(A.setMonth(n,s));return g?A.isSameDay(n,A.startOfWeek(q)):A.isSameDay(n,q)},[s,n,g,A]),j=O.useMemo(()=>{const q=A.endOfMonth(A.setMonth(n,s));return g?A.isSameDay(n,A.endOfWeek(q)):A.isSameDay(n,q)},[s,n,g,A]);return v.jsx(R,H({},N,{day:n,disabled:F,autoFocus:!M&&T,today:P,outsideCurrentMonth:M,isFirstVisibleCell:k,isLastVisibleCell:j,selected:I,tabIndex:S?0:-1,"aria-selected":I,"aria-current":P?"date":void 0}))}function tX(t){const e=bt({props:t,name:"MuiDayCalendar"}),n=Yt(),{onFocusedDayChange:r,className:i,classes:a,currentMonth:s,selectedDays:o,focusedDay:c,loading:d,onSelectedDaysChange:f,onMonthSwitchingAnimationEnd:p,readOnly:g,reduceAnimations:m,renderLoading:x=()=>v.jsx("span",{children:"..."}),slideDirection:b,TransitionProps:A,disablePast:E,disableFuture:S,minDate:T,maxDate:I,shouldDisableDate:P,shouldDisableMonth:F,shouldDisableYear:M,dayOfWeekFormatter:D=ue=>n.format(ue,"weekdayShort").charAt(0).toUpperCase(),hasFocus:R,onFocusedViewChange:B,gridLabelId:N,displayWeekNumber:k,fixedWeekNumber:j,timezone:q}=e,X=_f(q),G=$q(a),W=Ma(),K=dP({shouldDisableDate:P,shouldDisableMonth:F,shouldDisableYear:M,minDate:T,maxDate:I,disablePast:E,disableFuture:S,timezone:q}),Z=ts(),fe=He(ue=>{g||f(ue)}),me=ue=>{K(ue)||(r(ue),B==null||B(!0))},ve=He((ue,ie)=>{switch(ue.key){case"ArrowUp":me(n.addDays(ie,-7)),ue.preventDefault();break;case"ArrowDown":me(n.addDays(ie,7)),ue.preventDefault();break;case"ArrowLeft":{const Be=n.addDays(ie,W?1:-1),we=n.addMonths(ie,W?1:-1),$e=I0({adapter:n,date:Be,minDate:W?Be:n.startOfMonth(we),maxDate:W?n.endOfMonth(we):Be,isDateDisabled:K,timezone:q});me($e||Be),ue.preventDefault();break}case"ArrowRight":{const Be=n.addDays(ie,W?-1:1),we=n.addMonths(ie,W?-1:1),$e=I0({adapter:n,date:Be,minDate:W?n.startOfMonth(we):Be,maxDate:W?Be:n.endOfMonth(we),isDateDisabled:K,timezone:q});me($e||Be),ue.preventDefault();break}case"Home":me(n.startOfWeek(ie)),ue.preventDefault();break;case"End":me(n.endOfWeek(ie)),ue.preventDefault();break;case"PageUp":me(n.addMonths(ie,1)),ue.preventDefault();break;case"PageDown":me(n.addMonths(ie,-1)),ue.preventDefault();break}}),be=He((ue,ie)=>me(ie)),Me=He((ue,ie)=>{c!=null&&n.isSameDay(c,ie)&&(B==null||B(!1))}),ge=n.getMonth(s),Le=n.getYear(s),Ne=O.useMemo(()=>o.filter(ue=>!!ue).map(ue=>n.startOfDay(ue)),[n,o]),Se=`${Le}-${ge}`,J=O.useMemo(()=>O.createRef(),[Se]),he=O.useMemo(()=>{const ue=n.getWeekArray(s);let ie=n.addMonths(s,1);for(;j&&ue.length<j;){const Be=n.getWeekArray(ie),we=n.isSameDay(ue[ue.length-1][0],Be[0][0]);Be.slice(we?1:0).forEach($e=>{ue.length<j&&ue.push($e)}),ie=n.addMonths(ie,1)}return ue},[s,j,n]);return v.jsxs(Gq,{role:"grid","aria-labelledby":N,className:G.root,children:[v.jsxs(Wq,{role:"row",className:G.header,children:[k&&v.jsx(qq,{variant:"caption",role:"columnheader","aria-label":Z.calendarWeekNumberHeaderLabel,className:G.weekNumberLabel,children:Z.calendarWeekNumberHeaderText}),XG(n,X).map((ue,ie)=>v.jsx(Yq,{variant:"caption",role:"columnheader","aria-label":n.format(ue,"weekday"),className:G.weekDayLabel,children:D(ue)},ie.toString()))]}),d?v.jsx(Kq,{className:G.loadingContainer,children:x()}):v.jsx(Qq,H({transKey:Se,onExited:p,reduceAnimations:m,slideDirection:b,className:Ut(i,G.slideTransition)},A,{nodeRef:J,children:v.jsx(Zq,{ref:J,role:"rowgroup",className:G.monthContainer,children:he.map((ue,ie)=>v.jsxs(Jq,{role:"row",className:G.weekContainer,"aria-rowindex":ie+1,children:[k&&v.jsx(Xq,{className:G.weekNumber,role:"rowheader","aria-label":Z.calendarWeekNumberAriaLabelText(n.getWeekNumber(ue[0])),children:Z.calendarWeekNumberText(n.getWeekNumber(ue[0]))}),ue.map((Be,we)=>v.jsx(eX,{parentProps:e,day:Be,selectedDays:Ne,isViewFocused:R,focusedDay:c,onKeyDown:ve,onFocus:be,onBlur:Me,onDaySelect:fe,isDateDisabled:K,currentMonthNumber:ge,"aria-colindex":we+1},Be.toString()))]},`week-${ue[0]}`))})}))]})}function pP(t){return Ot("MuiMonthCalendar",t)}const Xg=Mt("MuiMonthCalendar",["root","button","disabled","selected"]),nX=["autoFocus","classes","disabled","selected","value","onClick","onKeyDown","onFocus","onBlur","slots","slotProps"],rX=(t,e)=>{const n={button:["button",e.isMonthDisabled&&"disabled",e.isMonthSelected&&"selected"]};return wt(n,pP,t)},iX=Pe("button",{name:"MuiMonthCalendar",slot:"Button",overridesResolver:(t,e)=>[e.button,{[`&.${Xg.disabled}`]:e.disabled},{[`&.${Xg.selected}`]:e.selected}]})(({theme:t})=>H({color:"unset",backgroundColor:"transparent",border:0,outline:0},t.typography.subtitle1,{height:36,width:72,borderRadius:18,cursor:"pointer","&:focus":{backgroundColor:t.vars?`rgba(${t.vars.palette.action.activeChannel} / ${t.vars.palette.action.hoverOpacity})`:js(t.palette.action.active,t.palette.action.hoverOpacity)},"&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette.action.activeChannel} / ${t.vars.palette.action.hoverOpacity})`:js(t.palette.action.active,t.palette.action.hoverOpacity)},"&:disabled":{cursor:"auto",pointerEvents:"none"},[`&.${Xg.disabled}`]:{color:(t.vars||t).palette.text.secondary},[`&.${Xg.selected}`]:{color:(t.vars||t).palette.primary.contrastText,backgroundColor:(t.vars||t).palette.primary.main,"&:focus, &:hover":{backgroundColor:(t.vars||t).palette.primary.dark}}})),aX=O.memo(function(e){const{autoFocus:n,classes:r,disabled:i,selected:a,value:s,onClick:o,onKeyDown:c,onFocus:d,onBlur:f,slots:p,slotProps:g}=e,m=je(e,nX),x=O.useRef(null),{ownerState:b}=or(),A=H({},b,{isMonthDisabled:i,isMonthSelected:a}),E=rX(r,A);Kn(()=>{var I;n&&((I=x.current)==null||I.focus())},[n]);const S=(p==null?void 0:p.monthButton)??iX,T=Ct({elementType:S,externalSlotProps:g==null?void 0:g.monthButton,externalForwardedProps:m,additionalProps:{disabled:i,ref:x,type:"button",role:"radio","aria-checked":a,onClick:I=>o(I,s),onKeyDown:I=>c(I,s),onFocus:I=>d(I,s),onBlur:I=>f(I,s)},ownerState:A,className:E.button});return v.jsx(S,H({},T))}),sX=["autoFocus","className","currentMonth","classes","value","defaultValue","referenceDate","disabled","disableFuture","disablePast","maxDate","minDate","onChange","shouldDisableMonth","readOnly","disableHighlightToday","onMonthFocus","hasFocus","onFocusedViewChange","monthsPerRow","timezone","gridLabelId","slots","slotProps"],oX=t=>wt({root:["root"]},pP,t);function lX(t,e){const n=bt({props:t,name:e}),r=k_(n);return H({},n,r,{monthsPerRow:n.monthsPerRow??3})}const MD=(t,e,n,r,i)=>!!(t===e&&r&&i.isSameYear(n,r)),cX=Pe("div",{name:"MuiMonthCalendar",slot:"Root",shouldForwardProp:t=>Pa(t)&&t!=="monthsPerRow"})({display:"flex",flexWrap:"wrap",justifyContent:"space-evenly",rowGap:16,padding:"8px 0",width:Jd,boxSizing:"border-box",variants:[{props:{monthsPerRow:3},style:{columnGap:24}},{props:{monthsPerRow:4},style:{columnGap:0}}]}),uX=O.forwardRef(function(e,n){const r=lX(e,"MuiMonthCalendar"),{autoFocus:i,className:a,currentMonth:s,classes:o,value:c,defaultValue:d,referenceDate:f,disabled:p,disableFuture:g,disablePast:m,maxDate:x,minDate:b,onChange:A,shouldDisableMonth:E,readOnly:S,onMonthFocus:T,hasFocus:I,onFocusedViewChange:P,monthsPerRow:F,timezone:M,gridLabelId:D,slots:R,slotProps:B}=r,N=je(r,sX),{value:k,handleValueChange:j,timezone:q}=uu({name:"MonthCalendar",timezone:M,value:c,defaultValue:d,referenceDate:f,onChange:A,valueManager:Fi}),X=_f(q),G=Ma(),W=Yt(),{ownerState:K}=or(),Z=O.useMemo(()=>Fi.getInitialReferenceValue({value:k,adapter:W,props:r,timezone:q,referenceDate:f,granularity:Ga.month}),[]),fe=oX(o),me=O.useMemo(()=>W.getMonth(X),[W,X]),ve=O.useMemo(()=>k!=null?W.getMonth(k):null,[k,W]),[be,Me]=O.useState(()=>ve||W.getMonth(Z)),[ge,Le]=$d({name:"MonthCalendar",state:"hasFocus",controlled:I,default:i??!1}),Ne=He(we=>{Le(we),P&&P(we)}),Se=O.useCallback(we=>{const $e=W.startOfMonth(m&&W.isAfter(X,b)?X:b),Oe=W.startOfMonth(g&&W.isBefore(X,x)?X:x),De=W.startOfMonth(we);return W.isBefore(De,$e)||W.isAfter(De,Oe)?!0:E?E(De):!1},[g,m,x,b,X,E,W]),J=He((we,$e)=>{if(S)return;const Oe=k&&s&&!W.isSameYear(k,s)?W.setYear(k,W.getYear(s)):k,De=W.setMonth(Oe??Z,$e);j(De)}),he=He(we=>{Se(W.setMonth(k??s??Z,we))||(Me(we),Ne(!0),T&&T(we))});O.useEffect(()=>{Me(we=>ve!==null&&we!==ve?ve:we)},[ve]);const ue=He((we,$e)=>{switch(we.key){case"ArrowUp":he((12+$e-3)%12),we.preventDefault();break;case"ArrowDown":he((12+$e+3)%12),we.preventDefault();break;case"ArrowLeft":he((12+$e+(G?1:-1))%12),we.preventDefault();break;case"ArrowRight":he((12+$e+(G?-1:1))%12),we.preventDefault();break}}),ie=He((we,$e)=>{he($e)}),Be=He((we,$e)=>{be===$e&&Ne(!1)});return v.jsx(cX,H({ref:n,className:Ut(fe.root,a),ownerState:K,role:"radiogroup","aria-labelledby":D,monthsPerRow:F},N,{children:E_(W,s??k??Z).map(we=>{const $e=W.getMonth(we),Oe=W.format(we,"monthShort"),De=W.format(we,"month"),qe=MD($e,ve,we,k,W),We=p||Se(we);return v.jsx(aX,{selected:qe,value:$e,onClick:J,onKeyDown:ue,autoFocus:ge&&$e===be,disabled:We,tabIndex:$e===be&&!We?0:-1,onFocus:ie,onBlur:Be,"aria-current":MD($e,me,we,X,W)?"date":void 0,"aria-label":De,slots:R,slotProps:B,classes:o,children:Oe},Oe)})}))});function gP(t){return Ot("MuiYearCalendar",t)}const Kg=Mt("MuiYearCalendar",["root","button","disabled","selected"]),dX=["autoFocus","classes","disabled","selected","value","onClick","onKeyDown","onFocus","onBlur","slots","slotProps"],fX=(t,e)=>{const n={button:["button",e.isYearDisabled&&"disabled",e.isYearSelected&&"selected"]};return wt(n,gP,t)},hX=Pe("button",{name:"MuiYearCalendar",slot:"Button",overridesResolver:(t,e)=>[e.button,{[`&.${Kg.disabled}`]:e.disabled},{[`&.${Kg.selected}`]:e.selected}]})(({theme:t})=>H({color:"unset",backgroundColor:"transparent",border:0,outline:0},t.typography.subtitle1,{height:36,width:72,borderRadius:18,cursor:"pointer","&:focus":{backgroundColor:t.vars?`rgba(${t.vars.palette.action.activeChannel} / ${t.vars.palette.action.focusOpacity})`:js(t.palette.action.active,t.palette.action.focusOpacity)},"&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette.action.activeChannel} / ${t.vars.palette.action.hoverOpacity})`:js(t.palette.action.active,t.palette.action.hoverOpacity)},"&:disabled":{cursor:"auto",pointerEvents:"none"},[`&.${Kg.disabled}`]:{color:(t.vars||t).palette.text.secondary},[`&.${Kg.selected}`]:{color:(t.vars||t).palette.primary.contrastText,backgroundColor:(t.vars||t).palette.primary.main,"&:focus, &:hover":{backgroundColor:(t.vars||t).palette.primary.dark}}})),pX=O.memo(function(e){const{autoFocus:n,classes:r,disabled:i,selected:a,value:s,onClick:o,onKeyDown:c,onFocus:d,onBlur:f,slots:p,slotProps:g}=e,m=je(e,dX),x=O.useRef(null),{ownerState:b}=or(),A=H({},b,{isYearDisabled:i,isYearSelected:a}),E=fX(r,A);Kn(()=>{var I;n&&((I=x.current)==null||I.focus())},[n]);const S=(p==null?void 0:p.yearButton)??hX,T=Ct({elementType:S,externalSlotProps:g==null?void 0:g.yearButton,externalForwardedProps:m,additionalProps:{disabled:i,ref:x,type:"button",role:"radio","aria-checked":a,onClick:I=>o(I,s),onKeyDown:I=>c(I,s),onFocus:I=>d(I,s),onBlur:I=>f(I,s)},ownerState:A,className:E.button});return v.jsx(S,H({},T))}),gX=["autoFocus","className","classes","value","defaultValue","referenceDate","disabled","disableFuture","disablePast","maxDate","minDate","onChange","readOnly","shouldDisableYear","disableHighlightToday","onYearFocus","hasFocus","onFocusedViewChange","yearsOrder","yearsPerRow","timezone","gridLabelId","slots","slotProps"],mX=t=>wt({root:["root"]},gP,t);function yX(t,e){const n=bt({props:t,name:e}),r=k_(n);return H({},n,r,{yearsPerRow:n.yearsPerRow??3,yearsOrder:n.yearsOrder??"asc"})}const vX=Pe("div",{name:"MuiYearCalendar",slot:"Root",shouldForwardProp:t=>Pa(t)&&t!=="yearsPerRow"})({display:"flex",flexWrap:"wrap",justifyContent:"space-evenly",rowGap:12,padding:"6px 0",overflowY:"auto",height:"100%",width:Jd,maxHeight:NW,boxSizing:"border-box",position:"relative",variants:[{props:{yearsPerRow:3},style:{columnGap:24}},{props:{yearsPerRow:4},style:{columnGap:0,padding:"0 2px"}}]}),xX=Pe("div",{name:"MuiYearCalendar",slot:"ButtonFiller"})({height:36,width:72}),wX=O.forwardRef(function(e,n){const r=yX(e,"MuiYearCalendar"),{autoFocus:i,className:a,classes:s,value:o,defaultValue:c,referenceDate:d,disabled:f,disableFuture:p,disablePast:g,maxDate:m,minDate:x,onChange:b,readOnly:A,shouldDisableYear:E,onYearFocus:S,hasFocus:T,onFocusedViewChange:I,yearsOrder:P,yearsPerRow:F,timezone:M,gridLabelId:D,slots:R,slotProps:B}=r,N=je(r,gX),{value:k,handleValueChange:j,timezone:q}=uu({name:"YearCalendar",timezone:M,value:o,defaultValue:c,referenceDate:d,onChange:b,valueManager:Fi}),X=_f(q),G=Ma(),W=Yt(),{ownerState:K}=or(),Z=O.useMemo(()=>Fi.getInitialReferenceValue({value:k,adapter:W,props:r,timezone:q,referenceDate:d,granularity:Ga.year}),[]),fe=mX(s),me=O.useMemo(()=>W.getYear(X),[W,X]),ve=O.useMemo(()=>k!=null?W.getYear(k):null,[k,W]),[be,Me]=O.useState(()=>ve||W.getYear(Z)),[ge,Le]=$d({name:"YearCalendar",state:"hasFocus",controlled:T,default:i??!1}),Ne=He(Re=>{Le(Re),I&&I(Re)}),Se=O.useCallback(Re=>{if(g&&W.isBeforeYear(Re,X)||p&&W.isAfterYear(Re,X)||x&&W.isBeforeYear(Re,x)||m&&W.isAfterYear(Re,m))return!0;if(!E)return!1;const ke=W.startOfYear(Re);return E(ke)},[p,g,m,x,X,E,W]),J=He((Re,ke)=>{if(A)return;const ht=W.setYear(k??Z,ke);j(ht)}),he=He(Re=>{Se(W.setYear(k??Z,Re))||(Me(Re),Ne(!0),S==null||S(Re))});O.useEffect(()=>{Me(Re=>ve!==null&&Re!==ve?ve:Re)},[ve]);const ue=P!=="desc"?F*1:F*-1,ie=G&&P==="asc"||!G&&P==="desc"?-1:1,Be=He((Re,ke)=>{switch(Re.key){case"ArrowUp":he(ke-ue),Re.preventDefault();break;case"ArrowDown":he(ke+ue),Re.preventDefault();break;case"ArrowLeft":he(ke-ie),Re.preventDefault();break;case"ArrowRight":he(ke+ie),Re.preventDefault();break}}),we=He((Re,ke)=>{he(ke)}),$e=He((Re,ke)=>{be===ke&&Ne(!1)}),Oe=O.useRef(null),De=ci(n,Oe);O.useEffect(()=>{if(i||Oe.current===null)return;const Re=Oe.current.querySelector('[tabindex="0"]');if(!Re)return;const ke=Re.offsetHeight,ht=Re.offsetTop,_t=Oe.current.clientHeight,xn=Oe.current.scrollTop,Pn=ht+ke;ke>_t||ht<xn||(Oe.current.scrollTop=Pn-_t/2-ke/2)},[i]);const qe=W.getYearRange([x,m]);P==="desc"&&qe.reverse();let We=F-qe.length%F;return We===F&&(We=0),v.jsxs(vX,H({ref:De,className:Ut(fe.root,a),ownerState:K,role:"radiogroup","aria-labelledby":D,yearsPerRow:F},N,{children:[qe.map(Re=>{const ke=W.getYear(Re),ht=ke===ve,_t=f||Se(Re);return v.jsx(pX,{selected:ht,value:ke,onClick:J,onKeyDown:Be,autoFocus:ge&&ke===be,disabled:_t,tabIndex:ke===be&&!_t?0:-1,onFocus:we,onBlur:$e,"aria-current":me===ke?"date":void 0,slots:R,slotProps:B,classes:s,children:W.format(Re,"year")},W.format(Re,"year"))}),Array.from({length:We},(Re,ke)=>v.jsx(xX,{},ke))]}))}),bX=t=>Ot("MuiPickersCalendarHeader",t),_X=Mt("MuiPickersCalendarHeader",["root","labelContainer","label","switchViewButton","switchViewIcon"]),AX=["slots","slotProps","currentMonth","disabled","disableFuture","disablePast","maxDate","minDate","onMonthChange","onViewChange","view","reduceAnimations","views","labelId","className","classes","timezone","format"],EX=["ownerState"],SX=t=>wt({root:["root"],labelContainer:["labelContainer"],label:["label"],switchViewButton:["switchViewButton"],switchViewIcon:["switchViewIcon"]},bX,t),CX=Pe("div",{name:"MuiPickersCalendarHeader",slot:"Root"})({display:"flex",alignItems:"center",marginTop:12,marginBottom:4,paddingLeft:24,paddingRight:12,maxHeight:40,minHeight:40}),TX=Pe("div",{name:"MuiPickersCalendarHeader",slot:"LabelContainer"})(({theme:t})=>H({display:"flex",overflow:"hidden",alignItems:"center",cursor:"pointer",marginRight:"auto"},t.typography.body1,{fontWeight:t.typography.fontWeightMedium})),IX=Pe("div",{name:"MuiPickersCalendarHeader",slot:"Label"})({marginRight:6}),DX=Pe(Gr,{name:"MuiPickersCalendarHeader",slot:"SwitchViewButton"})({marginRight:"auto",variants:[{props:{view:"year"},style:{[`.${_X.switchViewIcon}`]:{transform:"rotate(180deg)"}}}]}),RX=Pe(pW,{name:"MuiPickersCalendarHeader",slot:"SwitchViewIcon"})(({theme:t})=>({willChange:"transform",transition:t.transitions.create("transform"),transform:"rotate(0deg)"})),OX=O.forwardRef(function(e,n){const r=ts(),i=Yt(),a=bt({props:e,name:"MuiPickersCalendarHeader"}),{slots:s,slotProps:o,currentMonth:c,disabled:d,disableFuture:f,disablePast:p,maxDate:g,minDate:m,onMonthChange:x,onViewChange:b,view:A,reduceAnimations:E,views:S,labelId:T,className:I,classes:P,timezone:F,format:M=`${i.formats.month} ${i.formats.year}`}=a,D=je(a,AX),{ownerState:R}=or(),B=SX(P),N=(s==null?void 0:s.switchViewButton)??DX,k=Ct({elementType:N,externalSlotProps:o==null?void 0:o.switchViewButton,additionalProps:{size:"small","aria-label":r.calendarViewSwitchingButtonAriaLabel(A)},ownerState:H({},R,{view:A}),className:B.switchViewButton}),j=(s==null?void 0:s.switchViewIcon)??RX,q=Ct({elementType:j,externalSlotProps:o==null?void 0:o.switchViewIcon,ownerState:R,className:B.switchViewIcon}),X=je(q,EX),G=()=>x(i.addMonths(c,1)),W=()=>x(i.addMonths(c,-1)),K=PW(c,{disableFuture:f,maxDate:g,timezone:F}),Z=kW(c,{disablePast:p,minDate:m,timezone:F}),fe=()=>{if(!(S.length===1||!b||d))if(S.length===2)b(S.find(ve=>ve!==A)||S[0]);else{const ve=S.indexOf(A)!==0?0:1;b(S[ve])}};if(S.length===1&&S[0]==="year")return null;const me=i.formatByString(c,M);return v.jsxs(CX,H({},D,{ownerState:R,className:Ut(B.root,I),ref:n,children:[v.jsxs(TX,{role:"presentation",onClick:fe,ownerState:R,"aria-live":"polite",className:B.labelContainer,children:[v.jsx(fP,{reduceAnimations:E,transKey:me,children:v.jsx(IX,{id:T,ownerState:R,className:B.label,children:me})}),S.length>1&&!d&&v.jsx(N,H({},k,{children:v.jsx(j,H({},X))}))]}),v.jsx(F1,{in:A==="day",appear:!E,enter:!E,children:v.jsx(IW,{slots:s,slotProps:o,onGoToPrevious:W,isPreviousDisabled:Z,previousLabel:r.previousMonth,onGoToNext:G,isNextDisabled:K,nextLabel:r.nextMonth})})]}))}),MX="@media (prefers-reduced-motion: reduce)",Fd=typeof navigator<"u"&&navigator.userAgent.match(/android\s(\d+)|OS\s(\d+)/i),PD=Fd&&Fd[1]?parseInt(Fd[1],10):null,kD=Fd&&Fd[2]?parseInt(Fd[2],10):null,PX=PD&&PD<10||kD&&kD<13||!1;function mP(t){const e=B1(MX,{defaultMatches:!1});return t??(e||PX)}const kX=t=>Ot("MuiDateCalendar",t);Mt("MuiDateCalendar",["root","viewTransitionContainer"]);const NX=["autoFocus","onViewChange","value","defaultValue","referenceDate","disableFuture","disablePast","onChange","onYearChange","onMonthChange","reduceAnimations","shouldDisableDate","shouldDisableMonth","shouldDisableYear","view","views","openTo","className","classes","disabled","readOnly","minDate","maxDate","disableHighlightToday","focusedView","onFocusedViewChange","showDaysOutsideCurrentMonth","fixedWeekNumber","dayOfWeekFormatter","slots","slotProps","loading","renderLoading","displayWeekNumber","yearsOrder","yearsPerRow","monthsPerRow","timezone"],LX=t=>wt({root:["root"],viewTransitionContainer:["viewTransitionContainer"]},kX,t);function BX(t,e){const n=bt({props:t,name:e}),r=mP(n.reduceAnimations),i=k_(n);return H({},n,i,{loading:n.loading??!1,openTo:n.openTo??"day",views:n.views??["year","day"],reduceAnimations:r,renderLoading:n.renderLoading??(()=>v.jsx("span",{children:"..."}))})}const FX=Pe(O_,{name:"MuiDateCalendar",slot:"Root"})({display:"flex",flexDirection:"column",height:ef}),jX=Pe(fP,{name:"MuiDateCalendar",slot:"ViewTransitionContainer"})({}),VX=O.forwardRef(function(e,n){const r=Yt(),{ownerState:i}=or(),a=F0(),s=BX(e,"MuiDateCalendar"),{autoFocus:o,onViewChange:c,value:d,defaultValue:f,referenceDate:p,disableFuture:g,disablePast:m,onChange:x,onMonthChange:b,reduceAnimations:A,shouldDisableDate:E,shouldDisableMonth:S,shouldDisableYear:T,view:I,views:P,openTo:F,className:M,classes:D,disabled:R,readOnly:B,minDate:N,maxDate:k,disableHighlightToday:j,focusedView:q,onFocusedViewChange:X,showDaysOutsideCurrentMonth:G,fixedWeekNumber:W,dayOfWeekFormatter:K,slots:Z,slotProps:fe,loading:me,renderLoading:ve,displayWeekNumber:be,yearsOrder:Me,yearsPerRow:ge,monthsPerRow:Le,timezone:Ne}=s,Se=je(s,NX),{value:J,handleValueChange:he,timezone:ue}=uu({name:"DateCalendar",timezone:Ne,value:d,defaultValue:f,referenceDate:p,onChange:x,valueManager:Fi}),{view:ie,setView:Be,focusedView:we,setFocusedView:$e,goToNextView:Oe,setValueAndGoToNextView:De}=yy({view:I,views:P,openTo:F,onChange:he,onViewChange:c,autoFocus:o,focusedView:q,onFocusedViewChange:X}),{referenceDate:qe,calendarState:We,setVisibleDate:Re,isDateDisabled:ke,onMonthSwitchingAnimationEnd:ht}=Oq({value:J,referenceDate:p,reduceAnimations:A,onMonthChange:b,minDate:N,maxDate:k,shouldDisableDate:E,disablePast:m,disableFuture:g,timezone:ue,getCurrentMonthFromVisibleDate:(yt,Vn)=>r.isSameMonth(yt,Vn)?Vn:r.startOfMonth(yt)}),_t=R&&J||N,xn=R&&J||k,Pn=`${a}-grid-label`,rt=we!==null,at=(Z==null?void 0:Z.calendarHeader)??OX,In=Ct({elementType:at,externalSlotProps:fe==null?void 0:fe.calendarHeader,additionalProps:{views:P,view:ie,currentMonth:We.currentMonth,onViewChange:Be,onMonthChange:yt=>Re({target:yt,reason:"header-navigation"}),minDate:_t,maxDate:xn,disabled:R,disablePast:m,disableFuture:g,reduceAnimations:A,timezone:ue,labelId:Pn},ownerState:i}),Qe=He(yt=>{const Vn=r.startOfMonth(yt),Jn=r.endOfMonth(yt),Xr=ke(yt)?I0({adapter:r,date:yt,minDate:r.isBefore(N,Vn)?Vn:N,maxDate:r.isAfter(k,Jn)?Jn:k,disablePast:m,disableFuture:g,isDateDisabled:ke,timezone:ue}):yt;Xr?(De(Xr,"finish"),Re({target:Xr,reason:"cell-interaction"})):(Oe(),Re({target:Vn,reason:"cell-interaction"}))}),mt=He(yt=>{const Vn=r.startOfYear(yt),Jn=r.endOfYear(yt),Xr=ke(yt)?I0({adapter:r,date:yt,minDate:r.isBefore(N,Vn)?Vn:N,maxDate:r.isAfter(k,Jn)?Jn:k,disablePast:m,disableFuture:g,isDateDisabled:ke,timezone:ue}):yt;Xr?(De(Xr,"finish"),Re({target:Xr,reason:"cell-interaction"})):(Oe(),Re({target:Vn,reason:"cell-interaction"}))}),Nt=He(yt=>he(yt&&i1(r,yt,J??qe),"finish",ie));O.useEffect(()=>{r.isValid(J)&&Re({target:J,reason:"controlled-value-change"})},[J]);const tn=LX(D),An={disablePast:m,disableFuture:g,maxDate:k,minDate:N},Dn={disableHighlightToday:j,readOnly:B,disabled:R,timezone:ue,gridLabelId:Pn,slots:Z,slotProps:fe},qt=O.useRef(ie);O.useEffect(()=>{qt.current!==ie&&(we===qt.current&&$e(ie,!0),qt.current=ie)},[we,$e,ie]);const qr=O.useMemo(()=>[J],[J]);return v.jsxs(FX,H({ref:n,className:Ut(tn.root,M),ownerState:i},Se,{children:[v.jsx(at,H({},In,{slots:Z,slotProps:fe})),v.jsx(jX,{reduceAnimations:A,className:tn.viewTransitionContainer,transKey:ie,ownerState:i,children:v.jsxs("div",{children:[ie==="year"&&v.jsx(wX,H({},An,Dn,{value:J,onChange:mt,shouldDisableYear:T,hasFocus:rt,onFocusedViewChange:yt=>$e("year",yt),yearsOrder:Me,yearsPerRow:ge,referenceDate:qe})),ie==="month"&&v.jsx(uX,H({},An,Dn,{currentMonth:We.currentMonth,hasFocus:rt,className:M,value:J,onChange:Qe,shouldDisableMonth:S,onFocusedViewChange:yt=>$e("month",yt),monthsPerRow:Le,referenceDate:qe})),ie==="day"&&v.jsx(tX,H({},We,An,Dn,{onMonthSwitchingAnimationEnd:ht,hasFocus:rt,onFocusedDayChange:yt=>Re({target:yt,reason:"cell-interaction"}),reduceAnimations:A,selectedDays:qr,onSelectedDaysChange:Nt,shouldDisableDate:E,shouldDisableMonth:S,shouldDisableYear:T,onFocusedViewChange:yt=>$e("day",yt),showDaysOutsideCurrentMonth:G,fixedWeekNumber:W,dayOfWeekFormatter:K,displayWeekNumber:be,loading:me,renderLoading:ve}))]})})]}))});function yP(t){return Ot("MuiPickersToolbar",t)}const UX=Mt("MuiPickersToolbar",["root","title","content"]);function vP(){const{ownerState:t}=or(),e=Ma();return O.useMemo(()=>H({},t,{toolbarDirection:e?"rtl":"ltr"}),[t,e])}const HX=["children","className","classes","toolbarTitle","hidden","titleId","classes","landscapeDirection"],zX=t=>wt({root:["root"],title:["title"],content:["content"]},yP,t),$X=Pe("div",{name:"MuiPickersToolbar",slot:"Root"})(({theme:t})=>({display:"flex",flexDirection:"column",alignItems:"flex-start",justifyContent:"space-between",padding:t.spacing(2,3),variants:[{props:{pickerOrientation:"landscape"},style:{height:"auto",maxWidth:160,padding:16,justifyContent:"flex-start",flexWrap:"wrap"}}]})),GX=Pe("div",{name:"MuiPickersToolbar",slot:"Content",shouldForwardProp:t=>Pa(t)&&t!=="landscapeDirection"})({display:"flex",flexWrap:"wrap",width:"100%",flex:1,justifyContent:"space-between",alignItems:"center",flexDirection:"row",variants:[{props:{pickerOrientation:"landscape"},style:{justifyContent:"flex-start",alignItems:"flex-start",flexDirection:"column"}},{props:{pickerOrientation:"landscape",landscapeDirection:"row"},style:{flexDirection:"row"}}]}),WX=O.forwardRef(function(e,n){const r=bt({props:e,name:"MuiPickersToolbar"}),{children:i,className:a,classes:s,toolbarTitle:o,hidden:c,titleId:d,landscapeDirection:f}=r,p=je(r,HX),g=vP(),m=zX(s);return c?null:v.jsxs($X,H({ref:n,className:Ut(m.root,a),ownerState:g},p,{children:[v.jsx(te,{color:"text.secondary",variant:"overline",id:d,className:m.title,children:o}),v.jsx(GX,{className:m.content,ownerState:g,landscapeDirection:f,children:i})]}))});function YX(t){return Ot("MuiPickerPopper",t)}Mt("MuiPickerPopper",["root","paper"]);const qX=["PaperComponent","ownerState","children","paperSlotProps","paperClasses","onPaperClick","onPaperTouchStart"],XX=t=>wt({root:["root"],paper:["paper"]},YX,t),KX=Pe(wR,{name:"MuiPickerPopper",slot:"Root"})(({theme:t})=>({zIndex:t.zIndex.modal})),QX=Pe(Xn,{name:"MuiPickerPopper",slot:"Paper"})({outline:0,transformOrigin:"top center",variants:[{props:({popperPlacement:t})=>new Set(["top","top-start","top-end"]).has(t),style:{transformOrigin:"bottom center"}}]});function ZX(t,e){return e.documentElement.clientWidth<t.clientX||e.documentElement.clientHeight<t.clientY}function JX(t,e){const n=O.useRef(!1),r=O.useRef(!1),i=O.useRef(null),a=O.useRef(!1);O.useEffect(()=>{if(!t)return;function c(){a.current=!0}return document.addEventListener("mousedown",c,!0),document.addEventListener("touchstart",c,!0),()=>{document.removeEventListener("mousedown",c,!0),document.removeEventListener("touchstart",c,!0),a.current=!1}},[t]);const s=He(c=>{if(!a.current)return;const d=r.current;r.current=!1;const f=i0(i.current);if(!i.current||"clientX"in c&&ZX(c,f))return;if(n.current){n.current=!1;return}let p;c.composedPath?p=c.composedPath().indexOf(i.current)>-1:p=!f.documentElement.contains(c.target)||i.current.contains(c.target),!p&&!d&&e(c)}),o=c=>{c.defaultMuiPrevented||(r.current=!0)};return O.useEffect(()=>{if(t){const c=i0(i.current),d=()=>{n.current=!0};return c.addEventListener("touchstart",s),c.addEventListener("touchmove",d),()=>{c.removeEventListener("touchstart",s),c.removeEventListener("touchmove",d)}}},[t,s]),O.useEffect(()=>{if(t){const c=i0(i.current);return c.addEventListener("click",s),()=>{c.removeEventListener("click",s),r.current=!1}}},[t,s]),[i,o,o]}const eK=O.forwardRef((t,e)=>{const{PaperComponent:n,ownerState:r,children:i,paperSlotProps:a,paperClasses:s,onPaperClick:o,onPaperTouchStart:c}=t,d=je(t,qX),f=Ct({elementType:n,externalSlotProps:a,additionalProps:{tabIndex:-1,elevation:8,ref:e},className:s,ownerState:r});return v.jsx(n,H({},d,f,{onClick:p=>{var g;o(p),(g=f.onClick)==null||g.call(f,p)},onTouchStart:p=>{var g;c(p),(g=f.onTouchStart)==null||g.call(f,p)},ownerState:r,children:i}))});function tK(t){const e=bt({props:t,name:"MuiPickerPopper"}),{children:n,placement:r="bottom-start",slots:i,slotProps:a,classes:s}=e,{open:o,popupRef:c,reduceAnimations:d}=Kl(),{ownerState:f,rootRefObject:p}=or(),{dismissViews:g,getCurrentViewMode:m,onPopperExited:x,triggerElement:b,viewContainerRole:A}=or();O.useEffect(()=>{function W(K){o&&K.key==="Escape"&&g()}return document.addEventListener("keydown",W),()=>{document.removeEventListener("keydown",W)}},[g,o]);const E=O.useRef(null);O.useEffect(()=>{A==="tooltip"||m()==="field"||(o?E.current=vi(p.current):E.current&&E.current instanceof HTMLElement&&setTimeout(()=>{E.current instanceof HTMLElement&&E.current.focus()}))},[o,A,m,p]);const S=XX(s),T=He(()=>{A==="tooltip"?HW(()=>{var W,K;(W=p.current)!=null&&W.contains(vi(p.current))||(K=c.current)!=null&&K.contains(vi(c.current))||g()}):g()}),[I,P,F]=JX(o,T),M=O.useRef(null),D=ci(M,c),R=ci(D,I),B=W=>{W.key==="Escape"&&(W.stopPropagation(),g())},N=(i==null?void 0:i.desktopTransition)??d?F1:r5,k=(i==null?void 0:i.desktopTrapFocus)??i5,j=(i==null?void 0:i.desktopPaper)??QX,q=(i==null?void 0:i.popper)??KX,X=Ct({elementType:q,externalSlotProps:a==null?void 0:a.popper,additionalProps:{transition:!0,role:A??void 0,open:o,placement:r,anchorEl:b,onKeyDown:B},className:S.root,ownerState:f}),G=O.useMemo(()=>H({},f,{popperPlacement:X.placement}),[f,X.placement]);return v.jsx(q,H({},X,{children:({TransitionProps:W})=>v.jsx(k,H({open:o,disableAutoFocus:!0,disableRestoreFocus:!0,disableEnforceFocus:A==="tooltip",isEnabled:()=>!0},a==null?void 0:a.desktopTrapFocus,{children:v.jsx(N,H({},W,a==null?void 0:a.desktopTransition,{onExited:K=>{var Z,fe,me;x==null||x(),(fe=(Z=a==null?void 0:a.desktopTransition)==null?void 0:Z.onExited)==null||fe.call(Z,K),(me=W==null?void 0:W.onExited)==null||me.call(W)},children:v.jsx(eK,{PaperComponent:j,ownerState:G,ref:R,onPaperClick:P,onPaperTouchStart:F,paperClasses:S.paper,paperSlotProps:a==null?void 0:a.desktopPaper,children:n})}))}))}))}function ND(){return typeof window>"u"?"portrait":window.screen&&window.screen.orientation&&window.screen.orientation.angle?Math.abs(window.screen.orientation.angle)===90?"landscape":"portrait":window.orientation&&Math.abs(Number(window.orientation))===90?"landscape":"portrait"}function nK(t,e){const[n,r]=O.useState(ND);return Kn(()=>{const i=()=>{r(ND())};return window.addEventListener("orientationchange",i),()=>{window.removeEventListener("orientationchange",i)}},[]),UW(t,["hours","minutes","seconds"])?"portrait":e??n}function rK(t){const{props:e,valueManager:n,validator:r}=t,{value:i,defaultValue:a,onChange:s,referenceDate:o,timezone:c,onAccept:d,closeOnSelect:f,open:p,onOpen:g,onClose:m}=e,{current:x}=O.useRef(a),{current:b}=O.useRef(i!==void 0),{current:A}=O.useRef(p!==void 0),E=Yt(),{timezone:S,value:T,handleValueChange:I}=uu({name:"a picker component",timezone:c,value:i,defaultValue:x,referenceDate:o,onChange:s,valueManager:n}),[P,F]=O.useState(()=>({open:!1,lastExternalValue:T,clockShallowValue:void 0,lastCommittedValue:T,hasBeenModifiedSinceMount:!1})),{getValidationErrorForNewValue:M}=KM({props:e,validator:r,timezone:S,value:T,onError:e.onError}),D=He(k=>{const j=typeof k=="function"?k(P.open):k;A||F(q=>H({},q,{open:j})),j&&g&&g(),j||m==null||m()}),R=He((k,j)=>{const{changeImportance:q="accept",skipPublicationIfPristine:X=!1,validationError:G,shortcut:W,shouldClose:K=q==="accept"}=j??{};let Z,fe;!X&&!b&&!P.hasBeenModifiedSinceMount?(Z=!0,fe=q==="accept"):(Z=!n.areValuesEqual(E,k,T),fe=q==="accept"&&!n.areValuesEqual(E,k,P.lastCommittedValue)),F(be=>H({},be,{clockShallowValue:Z?void 0:be.clockShallowValue,lastCommittedValue:fe?k:be.lastCommittedValue,hasBeenModifiedSinceMount:!0}));let me=null;const ve=()=>(me||(me={validationError:G??M(k)},W&&(me.shortcut=W)),me);Z&&I(k,ve()),fe&&d&&d(k,ve()),K&&D(!1)});T!==P.lastExternalValue&&F(k=>H({},k,{lastExternalValue:T,clockShallowValue:void 0,hasBeenModifiedSinceMount:!0}));const B=He((k,j="partial")=>{if(j==="shallow"){F(q=>H({},q,{clockShallowValue:k,hasBeenModifiedSinceMount:!0}));return}R(k,{changeImportance:j==="finish"&&f?"accept":"set"})});O.useEffect(()=>{if(A){if(p===void 0)throw new Error("You must not mix controlling and uncontrolled mode for `open` prop");F(k=>H({},k,{open:p}))}},[A,p]);const N=O.useMemo(()=>n.cleanValue(E,P.clockShallowValue===void 0?T:P.clockShallowValue),[E,n,P.clockShallowValue,T]);return{timezone:S,state:P,setValue:R,setValueFromView:B,setOpen:D,value:T,viewValue:N}}const iK=["className","sx"],xP=({ref:t,props:e,valueManager:n,valueType:r,variant:i,validator:a,onPopperExited:s,autoFocusView:o,rendererInterceptor:c,localeText:d,viewContainerRole:f,getStepNavigation:p})=>{const{views:g,view:m,openTo:x,onViewChange:b,viewRenderers:A,reduceAnimations:E,orientation:S,disableOpenPicker:T,closeOnSelect:I,disabled:P,readOnly:F,formatDensity:M,enableAccessibleFieldDOMStructure:D,selectedSections:R,onSelectedSectionsChange:B,format:N,label:k,autoFocus:j,name:q}=e,{className:X,sx:G}=e,W=je(e,iK),K=F0(),Z=Yt(),fe=mP(E),me=nK(g,S),{current:ve}=O.useRef(x??null),[be,Me]=O.useState(null),ge=O.useRef(null),Le=O.useRef(null),Ne=O.useRef(null),Se=ci(t,Ne),{timezone:J,state:he,setOpen:ue,setValue:ie,setValueFromView:Be,value:we,viewValue:$e}=rK({props:e,valueManager:n,validator:a}),{view:Oe,setView:De,defaultView:qe,focusedView:We,setFocusedView:Re,setValueAndGoToNextView:ke,goToNextStep:ht,hasNextStep:_t,hasSeveralSteps:xn}=yy({view:m,views:g,openTo:x,onChange:Be,onViewChange:b,autoFocus:o,getStepNavigation:p}),Pn=He(()=>ie(n.emptyValue)),rt=He(()=>ie(n.getTodayValue(Z,J,r))),at=He(()=>ie(we)),In=He(()=>ie(he.lastCommittedValue,{skipPublicationIfPristine:!0})),Qe=He(()=>{ie(we,{skipPublicationIfPristine:!0})}),{hasUIView:mt,viewModeLookup:Nt,timeViewsCount:tn}=O.useMemo(()=>g.reduce((wn,cr)=>{const ec=A[cr]==null?"field":"UI";return wn.viewModeLookup[cr]=ec,ec==="UI"&&(wn.hasUIView=!0,D0(cr)&&(wn.timeViewsCount+=1)),wn},{hasUIView:!1,viewModeLookup:{},timeViewsCount:0}),[A,g]),An=Nt[Oe],Dn=He(()=>An),[qt,qr]=O.useState(An==="UI"?Oe:null);qt!==Oe&&Nt[Oe]==="UI"&&qr(Oe),Kn(()=>{An==="field"&&he.open&&(ue(!1),setTimeout(()=>{var wn,cr;(wn=Le==null?void 0:Le.current)==null||wn.setSelectedSections(Oe),(cr=Le==null?void 0:Le.current)==null||cr.focusField(Oe)}))},[Oe]),Kn(()=>{if(!he.open)return;let wn=Oe;An==="field"&&qt!=null&&(wn=qt),wn!==qe&&Nt[wn]==="UI"&&Nt[qe]==="UI"&&(wn=qe),wn!==Oe&&De(wn),Re(wn,!0)},[he.open]);const yt=O.useMemo(()=>({isPickerValueEmpty:n.areValuesEqual(Z,we,n.emptyValue),isPickerOpen:he.open,isPickerDisabled:e.disabled??!1,isPickerReadOnly:e.readOnly??!1,pickerOrientation:me,pickerVariant:i}),[Z,n,we,he.open,me,i,e.disabled,e.readOnly]),Vn=O.useMemo(()=>T||!mt?"hidden":P||F?"disabled":"enabled",[T,mt,P,F]),Jn=He(ht),Xr=O.useMemo(()=>I&&!xn?[]:["cancel","nextOrAccept"],[I,xn]),Ei=O.useMemo(()=>({setValue:ie,setOpen:ue,clearValue:Pn,setValueToToday:rt,acceptValueChanges:at,cancelValueChanges:In,setView:De,goToNextStep:Jn}),[ie,ue,Pn,rt,at,In,De,Jn]),lr=O.useMemo(()=>H({},Ei,{value:we,timezone:J,open:he.open,views:g,view:qt,initialView:ve,disabled:P??!1,readOnly:F??!1,autoFocus:j??!1,variant:i,orientation:me,popupRef:ge,reduceAnimations:fe,triggerRef:Me,triggerStatus:Vn,hasNextStep:_t,fieldFormat:N??"",name:q,label:k,rootSx:G,rootRef:Se,rootClassName:X}),[Ei,we,Se,i,me,fe,P,F,N,X,q,k,G,Vn,_t,J,he.open,qt,g,ve,j]),Jl=O.useMemo(()=>({dismissViews:Qe,ownerState:yt,hasUIView:mt,getCurrentViewMode:Dn,rootRefObject:Ne,labelId:K,triggerElement:be,viewContainerRole:f,defaultActionBarActions:Xr,onPopperExited:s}),[Qe,yt,mt,Dn,K,be,f,Xr,s]),ua=O.useMemo(()=>({formatDensity:M,enableAccessibleFieldDOMStructure:D,selectedSections:R,onSelectedSectionsChange:B,fieldRef:Le}),[M,D,R,B,Le]);return{providerProps:{localeText:d,contextValue:lr,privateContextValue:Jl,actionsContextValue:Ei,fieldPrivateContextValue:ua,isValidContextValue:wn=>{const cr=a({adapter:Z,value:wn,timezone:J,props:e});return!n.hasError(cr)}},renderCurrentView:()=>{if(qt==null)return null;const wn=A[qt];if(wn==null)return null;const cr=H({},W,{views:g,timezone:J,value:$e,onChange:ke,view:qt,onViewChange:De,showViewSwitcher:tn>1,timeViewsCount:tn},f==="tooltip"?{focusedView:null,onFocusedViewChange:()=>{}}:{focusedView:We,onFocusedViewChange:Re});return c?v.jsx(c,{viewRenderers:A,popperView:qt,rendererProps:cr}):wn(cr)},ownerState:yt}};function wP(t){return Ot("MuiPickersLayout",t)}const $a=Mt("MuiPickersLayout",["root","landscape","contentWrapper","toolbar","actionBar","tabs","shortcuts"]),aK=["actions"],sK=Pe(Bi,{name:"MuiPickersLayout",slot:"ActionBar"})({});function oK(t){const{actions:e}=t,n=je(t,aK),r=ts(),{clearValue:i,setValueToToday:a,acceptValueChanges:s,cancelValueChanges:o,goToNextStep:c,hasNextStep:d}=Kl();if(e==null||e.length===0)return null;const f=e==null?void 0:e.map(p=>{switch(p){case"clear":return v.jsx(ze,{onClick:i,children:r.clearButtonLabel},p);case"cancel":return v.jsx(ze,{onClick:o,children:r.cancelButtonLabel},p);case"accept":return v.jsx(ze,{onClick:s,children:r.okButtonLabel},p);case"today":return v.jsx(ze,{onClick:a,children:r.todayButtonLabel},p);case"next":return v.jsx(ze,{onClick:c,children:r.nextStepButtonLabel},p);case"nextOrAccept":return d?v.jsx(ze,{onClick:c,children:r.nextStepButtonLabel},p):v.jsx(ze,{onClick:s,children:r.okButtonLabel},p);default:return null}});return v.jsx(sK,H({},n,{children:f}))}const lK=O.memo(oK),cK=["items","changeImportance"],uK=["getValue"],dK=Pe(ab,{name:"MuiPickersLayout",slot:"Shortcuts"})({});function fK(t){const{items:e,changeImportance:n="accept"}=t,r=je(t,cK),{setValue:i}=hW(),a=fW();if(e==null||e.length===0)return null;const s=e.map(o=>{let{getValue:c}=o,d=je(o,uK);const f=c({isValid:a});return H({},d,{label:d.label,onClick:()=>{i(f,{changeImportance:n,shortcut:d})},disabled:!a(f)})});return v.jsx(dK,H({dense:!0,sx:[{maxHeight:ef,maxWidth:200,overflow:"auto"},...Array.isArray(r.sx)?r.sx:[r.sx]]},r,{children:s.map(o=>v.jsx(sb,{children:v.jsx(dn,H({},o))},o.id??o.label))}))}const hK=["ownerState"];function pK(t){return t.view!==null}const gK=(t,e)=>{const{pickerOrientation:n}=e;return wt({root:["root",n==="landscape"&&"landscape"],contentWrapper:["contentWrapper"],toolbar:["toolbar"],actionBar:["actionBar"],tabs:["tabs"],landscape:["landscape"],shortcuts:["shortcuts"]},wP,t)},bP=t=>{const{ownerState:e,defaultActionBarActions:n}=or(),{view:r}=Kl(),i=Ma(),{children:a,slots:s,slotProps:o,classes:c}=t,d=O.useMemo(()=>H({},e,{layoutDirection:i?"rtl":"ltr",hasShortcuts:!1}),[e,i]),f=gK(c,d),p=(s==null?void 0:s.actionBar)??lK,g=Ct({elementType:p,externalSlotProps:o==null?void 0:o.actionBar,additionalProps:{actions:n},className:f.actionBar,ownerState:d}),m=je(g,hK),x=v.jsx(p,H({},m)),b=s==null?void 0:s.toolbar,A=Ct({elementType:b,externalSlotProps:o==null?void 0:o.toolbar,className:f.toolbar,ownerState:d}),E=pK(A)&&b?v.jsx(b,H({},A)):null,S=a,T=s==null?void 0:s.tabs,I=r&&T?v.jsx(T,H({className:f.tabs},o==null?void 0:o.tabs)):null,P=(s==null?void 0:s.shortcuts)??fK,F=Ct({elementType:P,externalSlotProps:o==null?void 0:o.shortcuts,className:f.shortcuts,ownerState:d}),M=Array.isArray(F==null?void 0:F.items)&&F.items.length>0,D=r&&P?v.jsx(P,H({},F)):null;return{toolbar:E,content:S,tabs:I,actionBar:x,shortcuts:D,ownerState:H({},d,{hasShortcuts:M})}},mK=(t,e)=>{const{pickerOrientation:n}=e;return wt({root:["root",n==="landscape"&&"landscape"],contentWrapper:["contentWrapper"]},wP,t)},_P=Pe("div",{name:"MuiPickersLayout",slot:"Root"})({display:"grid",gridAutoColumns:"max-content auto max-content",gridAutoRows:"max-content auto max-content",[`& .${$a.actionBar}`]:{gridColumn:"1 / 4",gridRow:3},variants:[{props:{pickerOrientation:"landscape",hasShortcuts:!1},style:{[`& .${$a.toolbar}`]:{gridColumn:1,gridRow:"1 / 3"}}},{props:{pickerOrientation:"landscape",hasShortcuts:!0},style:{[`& .${$a.toolbar}`]:{gridColumn:"2 / 4",gridRow:1,maxWidth:"max-content"},[`& .${$a.shortcuts}`]:{gridColumn:1,gridRow:2}}},{props:{pickerOrientation:"portrait"},style:{[`& .${$a.toolbar}`]:{gridColumn:"2 / 4",gridRow:1},[`& .${$a.shortcuts}`]:{gridColumn:1,gridRow:"2 / 3"}}},{props:{hasShortcuts:!0,layoutDirection:"rtl"},style:{[`& .${$a.shortcuts}`]:{gridColumn:4}}}]}),AP=Pe("div",{name:"MuiPickersLayout",slot:"ContentWrapper"})({gridColumn:"2 / 4",gridRow:2,display:"flex",flexDirection:"column"}),EP=O.forwardRef(function(e,n){const r=bt({props:e,name:"MuiPickersLayout"}),{toolbar:i,content:a,tabs:s,actionBar:o,shortcuts:c,ownerState:d}=bP(r),{orientation:f,variant:p}=Kl(),{sx:g,className:m,classes:x}=r,b=mK(x,d);return v.jsxs(_P,{ref:n,sx:g,className:Ut(b.root,m),ownerState:d,children:[f==="landscape"?c:i,f==="landscape"?i:c,v.jsx(AP,{className:b.contentWrapper,ownerState:d,children:p==="desktop"?v.jsxs(O.Fragment,{children:[a,s]}):v.jsxs(O.Fragment,{children:[s,a]})}),o]})});function SP(t){const{steps:e}=t;return MW({steps:e,isViewMatchingStep:(n,r)=>r.views==null||r.views.includes(n),onStepChange:({step:n,defaultView:r,setView:i,view:a,views:s})=>{const o=n.views==null?r:n.views.find(c=>s.includes(c));o!==a&&i(o)}})}const yK=["props","steps"],vK=["ownerState"],xK=t=>{var F;let{props:e,steps:n}=t,r=je(t,yK);const{slots:i,slotProps:a,label:s,inputRef:o,localeText:c}=e,d=SP({steps:n}),{providerProps:f,renderCurrentView:p,ownerState:g}=xP(H({},r,{props:e,localeText:c,autoFocusView:!0,viewContainerRole:"dialog",variant:"desktop",getStepNavigation:d})),m=f.privateContextValue.labelId,x=((F=a==null?void 0:a.toolbar)==null?void 0:F.hidden)??!1,b=i.field,A=Ct({elementType:b,externalSlotProps:a==null?void 0:a.field,additionalProps:H({},x&&{id:m}),ownerState:g}),E=je(A,vK),S=i.layout??EP;let T=m;x&&(s?T=`${m}-label`:T=void 0);const I=H({},a,{toolbar:H({},a==null?void 0:a.toolbar,{titleId:m}),popper:H({"aria-labelledby":T},a==null?void 0:a.popper)});return{renderPicker:()=>v.jsxs(BM,H({},f,{children:[v.jsx(b,H({},E,{slots:i,slotProps:I,inputRef:o})),v.jsx(tK,{slots:i,slotProps:I,children:v.jsx(S,H({},I==null?void 0:I.layout,{slots:i,slotProps:I,children:p()}))})]}))}},jd=({view:t,onViewChange:e,views:n,focusedView:r,onFocusedViewChange:i,value:a,defaultValue:s,referenceDate:o,onChange:c,className:d,classes:f,disableFuture:p,disablePast:g,minDate:m,maxDate:x,shouldDisableDate:b,shouldDisableMonth:A,shouldDisableYear:E,reduceAnimations:S,onMonthChange:T,monthsPerRow:I,onYearChange:P,yearsOrder:F,yearsPerRow:M,slots:D,slotProps:R,loading:B,renderLoading:N,disableHighlightToday:k,readOnly:j,disabled:q,showDaysOutsideCurrentMonth:X,dayOfWeekFormatter:G,sx:W,autoFocus:K,fixedWeekNumber:Z,displayWeekNumber:fe,timezone:me})=>v.jsx(VX,{view:t,onViewChange:e,views:n.filter(Zd),focusedView:r&&Zd(r)?r:null,onFocusedViewChange:i,value:a,defaultValue:s,referenceDate:o,onChange:c,className:d,classes:f,disableFuture:p,disablePast:g,minDate:m,maxDate:x,shouldDisableDate:b,shouldDisableMonth:A,shouldDisableYear:E,reduceAnimations:S,onMonthChange:T,monthsPerRow:I,onYearChange:P,yearsOrder:F,yearsPerRow:M,slots:D,slotProps:R,loading:B,renderLoading:N,disableHighlightToday:k,readOnly:j,disabled:q,showDaysOutsideCurrentMonth:X,dayOfWeekFormatter:G,sx:W,autoFocus:K,fixedWeekNumber:Z,displayWeekNumber:fe,timezone:me}),wK=Pe(Ni)({[`& .${$C.container}`]:{outline:0},[`& .${$C.paper}`]:{outline:0,minWidth:Jd}}),bK=Pe(Li)({"&:first-of-type":{padding:0}});function _K(t){const{children:e,slots:n,slotProps:r}=t,{open:i}=Kl(),{dismissViews:a,onPopperExited:s}=or(),o=(n==null?void 0:n.dialog)??wK,c=(n==null?void 0:n.mobileTransition)??F1;return v.jsx(o,H({open:i,onClose:()=>{a(),s==null||s()}},r==null?void 0:r.dialog,{TransitionComponent:c,TransitionProps:r==null?void 0:r.mobileTransition,PaperComponent:n==null?void 0:n.mobilePaper,PaperProps:r==null?void 0:r.mobilePaper,children:v.jsx(bK,{children:e})}))}const AK=["props","steps"],EK=["ownerState"],SK=t=>{var F;let{props:e,steps:n}=t,r=je(t,AK);const{slots:i,slotProps:a,label:s,inputRef:o,localeText:c}=e,d=SP({steps:n}),{providerProps:f,renderCurrentView:p,ownerState:g}=xP(H({},r,{props:e,localeText:c,autoFocusView:!0,viewContainerRole:"dialog",variant:"mobile",getStepNavigation:d})),m=f.privateContextValue.labelId,x=((F=a==null?void 0:a.toolbar)==null?void 0:F.hidden)??!1,b=i.field,A=Ct({elementType:b,externalSlotProps:a==null?void 0:a.field,additionalProps:H({},x&&{id:m}),ownerState:g}),E=je(A,EK),S=i.layout??EP;let T=m;x&&(s?T=`${m}-label`:T=void 0);const I=H({},a,{toolbar:H({},a==null?void 0:a.toolbar,{titleId:m}),mobilePaper:H({"aria-labelledby":T},a==null?void 0:a.mobilePaper)});return{renderPicker:()=>v.jsxs(BM,H({},f,{children:[v.jsx(b,H({},E,{slots:i,slotProps:I,inputRef:o})),v.jsx(_K,{slots:i,slotProps:I,children:v.jsx(S,H({},I==null?void 0:I.layout,{slots:i,slotProps:I,children:p()}))})]}))}};function CK(t){return Ot("MuiPickersToolbarText",t)}const TK=Mt("MuiPickersToolbarText",["root"]),IK=["className","classes","selected","value"],DK=t=>wt({root:["root"]},CK,t),RK=Pe(te,{name:"MuiPickersToolbarText",slot:"Root"})(({theme:t})=>({transition:t.transitions.create("color"),color:(t.vars||t).palette.text.secondary,"&[data-selected]":{color:(t.vars||t).palette.text.primary}})),CP=O.forwardRef(function(e,n){const r=bt({props:e,name:"MuiPickersToolbarText"}),{className:i,classes:a,selected:s,value:o}=r,c=je(r,IK),d=DK(a);return v.jsx(RK,H({ref:n,className:Ut(d.root,i),component:"span",ownerState:r},s&&{"data-selected":!0},c,{children:o}))}),OK=["align","className","classes","selected","typographyClassName","value","variant","width"],MK=t=>wt({root:["root"]},yP,t),PK=Pe(ze,{name:"MuiPickersToolbarButton",slot:"Root"})({padding:0,minWidth:16,textTransform:"none"}),yl=O.forwardRef(function(e,n){const r=bt({props:e,name:"MuiPickersToolbarButton"}),{align:i,className:a,classes:s,selected:o,typographyClassName:c,value:d,variant:f,width:p}=r,g=je(r,OK),m=MK(s);return v.jsx(PK,H({variant:"text",ref:n,className:Ut(m.root,a),ownerState:r},p?{sx:{width:p}}:{},g,{children:v.jsx(CP,{align:i,className:c,variant:f,value:d,selected:o})}))}),TP=({view:t,onViewChange:e,focusedView:n,onFocusedViewChange:r,views:i,value:a,defaultValue:s,referenceDate:o,onChange:c,className:d,classes:f,disableFuture:p,disablePast:g,minTime:m,maxTime:x,shouldDisableTime:b,minutesStep:A,ampm:E,slots:S,slotProps:T,readOnly:I,disabled:P,sx:F,autoFocus:M,disableIgnoringDatePartForTimeValidation:D,timeSteps:R,skipDisabled:B,timezone:N})=>v.jsx(KW,{view:t,onViewChange:e,focusedView:n&&D0(n)?n:null,onFocusedViewChange:r,views:i.filter(D0),value:a,defaultValue:s,referenceDate:o,onChange:c,className:d,classes:f,disableFuture:p,disablePast:g,minTime:m,maxTime:x,shouldDisableTime:b,minutesStep:A,ampm:E,slots:S,slotProps:T,readOnly:I,disabled:P,sx:F,autoFocus:M,disableIgnoringDatePartForTimeValidation:D,timeStep:R==null?void 0:R.minutes,skipDisabled:B,timezone:N}),o1=({view:t,onViewChange:e,focusedView:n,onFocusedViewChange:r,views:i,value:a,defaultValue:s,referenceDate:o,onChange:c,className:d,classes:f,disableFuture:p,disablePast:g,minTime:m,maxTime:x,shouldDisableTime:b,minutesStep:A,ampm:E,slots:S,slotProps:T,readOnly:I,disabled:P,sx:F,autoFocus:M,disableIgnoringDatePartForTimeValidation:D,timeSteps:R,skipDisabled:B,timezone:N})=>v.jsx(lY,{view:t,onViewChange:e,focusedView:n&&Cd(n)?n:null,onFocusedViewChange:r,views:i.filter(D0),value:a,defaultValue:s,referenceDate:o,onChange:c,className:d,classes:f,disableFuture:p,disablePast:g,minTime:m,maxTime:x,shouldDisableTime:b,minutesStep:A,ampm:E,slots:S,slotProps:T,readOnly:I,disabled:P,sx:F,autoFocus:M,disableIgnoringDatePartForTimeValidation:D,timeSteps:R,skipDisabled:B,timezone:N}),kK=["views","format"],IP=(t,e,n)=>{let{views:r,format:i}=e,a=je(e,kK);if(i)return i;const s=[],o=[];if(r.forEach(f=>{D0(f)?o.push(f):Zd(f)&&s.push(f)}),o.length===0)return mD(t,H({views:s},a));if(s.length===0)return SD(t,H({views:o},a));const c=SD(t,H({views:o},a));return`${mD(t,H({views:s},a))} ${c}`},NK=(t,e,n)=>n?e.filter(r=>!Cd(r)||r==="hours"):t?[...e,"meridiem"]:e,LK=(t,e)=>1440/((t.hours??1)*(t.minutes??5))<=e;function BK({thresholdToRenderTimeInASingleColumn:t,ampm:e,timeSteps:n,views:r}){const i=t??24,a=H({hours:1,minutes:5,seconds:5},n),s=LK(a,i);return{thresholdToRenderTimeInASingleColumn:i,timeSteps:a,shouldRenderTimeInASingleColumn:s,views:NK(e,r,s)}}function FK(t){return Ot("MuiDateTimePickerTabs",t)}Mt("MuiDateTimePickerTabs",["root"]);const jK=t=>Zd(t)?"date":"time",VK=t=>t==="date"?"day":"hours",UK=t=>wt({root:["root"]},FK,t),HK=Pe(N1,{name:"MuiDateTimePickerTabs",slot:"Root"})(({theme:t})=>({boxShadow:`0 -1px 0 0 inset ${(t.vars||t).palette.divider}`,"&:last-child":{boxShadow:`0 1px 0 0 inset ${(t.vars||t).palette.divider}`,[`& .${a5.indicator}`]:{bottom:"auto",top:0}}})),zK=function(e){const n=bt({props:e,name:"MuiDateTimePickerTabs"}),{dateIcon:r=v.jsx(vW,{}),timeIcon:i=v.jsx(xW,{}),hidden:a=typeof window>"u"||window.innerHeight<667,className:s,classes:o,sx:c}=n,d=ts(),{ownerState:f}=or(),{view:p,setView:g}=Kl(),m=UK(o),x=(b,A)=>{g(VK(A))};return a?null:v.jsxs(HK,{ownerState:f,variant:"fullWidth",value:jK(p),onChange:x,className:Ut(s,m.root),sx:c,children:[v.jsx(Sa,{value:"date","aria-label":d.dateTableLabel,icon:v.jsx(O.Fragment,{children:r})}),v.jsx(Sa,{value:"time","aria-label":d.timeTableLabel,icon:v.jsx(O.Fragment,{children:i})})]})};function $K(t){return Ot("MuiDateTimePickerToolbar",t)}const h2=Mt("MuiDateTimePickerToolbar",["root","dateContainer","timeContainer","timeDigitsContainer","separator","timeLabelReverse","ampmSelection","ampmLandscape","ampmLabel"]),GK=["ampm","ampmInClock","toolbarFormat","toolbarPlaceholder","toolbarTitle","className","classes"],WK=(t,e)=>{const{pickerOrientation:n,toolbarDirection:r}=e;return wt({root:["root"],dateContainer:["dateContainer"],timeContainer:["timeContainer",r==="rtl"&&"timeLabelReverse"],timeDigitsContainer:["timeDigitsContainer",r==="rtl"&&"timeLabelReverse"],separator:["separator"],ampmSelection:["ampmSelection",n==="landscape"&&"ampmLandscape"],ampmLabel:["ampmLabel"]},$K,t)},YK=Pe(WX,{name:"MuiDateTimePickerToolbar",slot:"Root",shouldForwardProp:t=>Pa(t)&&t!=="toolbarVariant"})(({theme:t})=>({paddingLeft:16,paddingRight:16,justifyContent:"space-around",position:"relative",variants:[{props:{toolbarVariant:"desktop"},style:{borderBottom:`1px solid ${(t.vars||t).palette.divider}`,[`& .${UX.content} .${TK.root}[data-selected]`]:{color:(t.vars||t).palette.primary.main,fontWeight:t.typography.fontWeightBold}}},{props:{toolbarVariant:"desktop",pickerOrientation:"landscape"},style:{borderRight:`1px solid ${(t.vars||t).palette.divider}`}},{props:{toolbarVariant:"desktop",pickerOrientation:"portrait"},style:{paddingLeft:24,paddingRight:0}}]})),qK=Pe("div",{name:"MuiDateTimePickerToolbar",slot:"DateContainer"})({display:"flex",flexDirection:"column",alignItems:"flex-start"}),XK=Pe("div",{name:"MuiDateTimePickerToolbar",slot:"TimeContainer",shouldForwardProp:t=>Pa(t)&&t!=="toolbarVariant"})({display:"flex",flexDirection:"row",variants:[{props:{toolbarDirection:"rtl"},style:{flexDirection:"row-reverse"}},{props:{toolbarVariant:"desktop",pickerOrientation:"portrait"},style:{gap:9,marginRight:4,alignSelf:"flex-end"}},{props:({pickerOrientation:t,toolbarVariant:e})=>t==="landscape"&&e!=="desktop",style:{flexDirection:"column"}},{props:({pickerOrientation:t,toolbarVariant:e,toolbarDirection:n})=>t==="landscape"&&e!=="desktop"&&n==="rtl",style:{flexDirection:"column-reverse"}}]}),KK=Pe("div",{name:"MuiDateTimePickerToolbar",slot:"TimeDigitsContainer",shouldForwardProp:t=>Pa(t)&&t!=="toolbarVariant"})({display:"flex",variants:[{props:{toolbarDirection:"rtl"},style:{flexDirection:"row-reverse"}},{props:{toolbarVariant:"desktop"},style:{gap:1.5}}]}),LD=Pe(CP,{name:"MuiDateTimePickerToolbar",slot:"Separator",shouldForwardProp:t=>Pa(t)&&t!=="toolbarVariant"})({margin:"0 4px 0 2px",cursor:"default",variants:[{props:{toolbarVariant:"desktop"},style:{margin:0}}]}),QK=Pe("div",{name:"MuiDateTimePickerToolbar",slot:"AmPmSelection",overridesResolver:(t,e)=>[{[`.${h2.ampmLabel}`]:e.ampmLabel},{[`&.${h2.ampmLandscape}`]:e.ampmLandscape},e.ampmSelection]})({display:"flex",flexDirection:"column",marginRight:"auto",marginLeft:12,[`& .${h2.ampmLabel}`]:{fontSize:17},variants:[{props:{pickerOrientation:"landscape"},style:{margin:"4px 0 auto",flexDirection:"row",justifyContent:"space-around",width:"100%"}}]}),ZK=O.createContext(null);function JK(t){const e=bt({props:t,name:"MuiDateTimePickerToolbar"}),{ampm:n,ampmInClock:r,toolbarFormat:i,toolbarPlaceholder:a="",toolbarTitle:s,className:o,classes:c}=e,d=je(e,GK),{value:f,setValue:p,disabled:g,readOnly:m,variant:x,orientation:b,view:A,setView:E,views:S}=Kl(),T=ts(),I=vP(),P=WK(c,I),F=Yt(),M=O.useContext(ZK),D=M?M.value:f,R=M?M.setValue:p,B=M?M.view:A,N=M?M.setView:E,{meridiemMode:k,handleMeridiemChange:j}=UM(D,n,fe=>R(fe,{changeImportance:"set"})),q=M!=null&&M.forceDesktopVariant?"desktop":x,X=q==="desktop",G=!!(n&&!r),W=s??T.dateTimePickerToolbarTitle,K=O.useMemo(()=>F.isValid(D)?i?F.formatByString(D,i):F.format(D,"shortDate"):a,[D,i,a,F]),Z=(fe,me)=>F.isValid(D)?F.format(D,fe):me;return v.jsxs(YK,H({className:Ut(P.root,o),toolbarTitle:W,toolbarVariant:q},d,{ownerState:I,children:[v.jsxs(qK,{className:P.dateContainer,ownerState:I,children:[S.includes("year")&&v.jsx(yl,{tabIndex:-1,variant:"subtitle1",onClick:()=>N("year"),selected:B==="year",value:Z("year","")}),S.includes("day")&&v.jsx(yl,{tabIndex:-1,variant:X?"h5":"h4",onClick:()=>N("day"),selected:B==="day",value:K})]}),v.jsxs(XK,{className:P.timeContainer,ownerState:I,toolbarVariant:q,children:[v.jsxs(KK,{className:P.timeDigitsContainer,ownerState:I,toolbarVariant:q,children:[S.includes("hours")&&v.jsxs(O.Fragment,{children:[v.jsx(yl,{variant:X?"h5":"h3",width:X&&b==="portrait"?t0:void 0,onClick:()=>N("hours"),selected:B==="hours",value:Z(n?"hours12h":"hours24h","--")}),v.jsx(LD,{variant:X?"h5":"h3",value:":",className:P.separator,ownerState:I,toolbarVariant:q}),v.jsx(yl,{variant:X?"h5":"h3",width:X&&b==="portrait"?t0:void 0,onClick:()=>N("minutes"),selected:B==="minutes"||!S.includes("minutes")&&B==="hours",value:Z("minutes","--"),disabled:!S.includes("minutes")})]}),S.includes("seconds")&&v.jsxs(O.Fragment,{children:[v.jsx(LD,{variant:X?"h5":"h3",value:":",className:P.separator,ownerState:I,toolbarVariant:q}),v.jsx(yl,{variant:X?"h5":"h3",width:X&&b==="portrait"?t0:void 0,onClick:()=>N("seconds"),selected:B==="seconds",value:Z("seconds","--")})]})]}),G&&!X&&v.jsxs(QK,{className:P.ampmSelection,ownerState:I,children:[v.jsx(yl,{variant:"subtitle2",selected:k==="am",typographyClassName:P.ampmLabel,value:f0(F,"am"),onClick:m?void 0:()=>j("am"),disabled:g}),v.jsx(yl,{variant:"subtitle2",selected:k==="pm",typographyClassName:P.ampmLabel,value:f0(F,"pm"),onClick:m?void 0:()=>j("pm"),disabled:g})]}),n&&X&&v.jsx(yl,{variant:"h5",onClick:()=>N("meridiem"),selected:B==="meridiem",value:D&&k?f0(F,k):"--",width:t0})]})]}))}function DP(t,e){var m;const n=Yt(),r=bt({props:t,name:e}),i=eP(r),a=r.ampm??n.is12HourCycleInCurrentLocale(),s=O.useMemo(()=>{var x;return((x=r.localeText)==null?void 0:x.toolbarTitle)==null?r.localeText:H({},r.localeText,{dateTimePickerToolbarTitle:r.localeText.toolbarTitle})},[r.localeText]),{openTo:o,views:c}=WG({views:r.views,openTo:r.openTo,defaultViews:["year","day","hours","minutes"],defaultOpenTo:"day"}),{shouldRenderTimeInASingleColumn:d,thresholdToRenderTimeInASingleColumn:f,views:p,timeSteps:g}=BK({thresholdToRenderTimeInASingleColumn:r.thresholdToRenderTimeInASingleColumn,ampm:a,timeSteps:r.timeSteps,views:c});return H({},r,i,{timeSteps:g,openTo:o,shouldRenderTimeInASingleColumn:d,thresholdToRenderTimeInASingleColumn:f,views:p,ampm:a,localeText:s,orientation:r.orientation??"portrait",slots:H({toolbar:JK,tabs:zK},r.slots),slotProps:H({},r.slotProps,{toolbar:H({ampm:a},(m=r.slotProps)==null?void 0:m.toolbar)})})}const eQ=O.forwardRef(function(e,n){var x;const{toolbar:r,tabs:i,content:a,actionBar:s,shortcuts:o,ownerState:c}=bP(e),{orientation:d}=Kl(),{sx:f,className:p,classes:g}=e,m=s&&(((x=s.props.actions)==null?void 0:x.length)??0)>0;return v.jsxs(_P,{ref:n,className:Ut($a.root,g==null?void 0:g.root,p),sx:[{[`& .${$a.tabs}`]:{gridRow:4,gridColumn:"1 / 4"},[`& .${$a.actionBar}`]:{gridRow:5}},...Array.isArray(f)?f:[f]],ownerState:c,children:[d==="landscape"?o:r,d==="landscape"?r:o,v.jsxs(AP,{className:Ut($a.contentWrapper,g==null?void 0:g.contentWrapper),ownerState:c,sx:{display:"grid"},children:[a,i,m&&v.jsx(_o,{sx:{gridRow:3,gridColumn:"1 / 4"}})]}),s]})}),tQ=["openTo","focusedView","timeViewsCount"],nQ=function(e){var m,x;const{viewRenderers:n,popperView:r,rendererProps:i}=e,{openTo:a,focusedView:s,timeViewsCount:o}=i,c=je(i,tQ),d=H({},c,{autoFocus:!1,focusedView:null,sx:[{[`&.${Fw.root}`]:{borderBottom:0},[`&.${Fw.root}, .${jw.root}, &.${Bw.root}`]:{maxHeight:ef}}]}),f=Cd(r),p=f?"day":r,g=f?r:"hours";return v.jsxs(O.Fragment,{children:[(m=n[p])==null?void 0:m.call(n,H({},i,{view:f?"day":r,focusedView:s&&Zd(s)?s:null,views:i.views.filter(Zd),sx:[{gridColumn:1},...d.sx]})),o>0&&v.jsxs(O.Fragment,{children:[v.jsx(_o,{orientation:"vertical",sx:{gridColumn:2}}),(x=n[g])==null?void 0:x.call(n,H({},d,{view:f?r:"hours",focusedView:s&&Cd(s)?s:null,openTo:Cd(a)?a:"hours",views:i.views.filter(Cd),sx:[{gridColumn:3},...d.sx]}))]})]})},RP=O.forwardRef(function(e,n){var g,m,x;const r=Yt(),i=DP(e,"MuiDesktopDateTimePicker"),a=i.shouldRenderTimeInASingleColumn?TP:o1,s=H({day:jd,month:jd,year:jd,hours:a,minutes:a,seconds:a,meridiem:a},i.viewRenderers),o=i.ampmInClock??!0,d=((g=s.hours)==null?void 0:g.name)===o1.name?i.views:i.views.filter(b=>b!=="meridiem"),f=H({},i,{viewRenderers:s,format:IP(r,i),views:d,yearsPerRow:i.yearsPerRow??4,ampmInClock:o,slots:H({field:uP,layout:eQ},i.slots),slotProps:H({},i.slotProps,{field:b=>{var A;return H({},Ao((A=i.slotProps)==null?void 0:A.field,b),SM(i))},toolbar:H({hidden:!0,ampmInClock:o},(m=i.slotProps)==null?void 0:m.toolbar),tabs:H({hidden:!0},(x=i.slotProps)==null?void 0:x.tabs)})}),{renderPicker:p}=xK({ref:n,props:f,valueManager:Fi,valueType:"date-time",validator:xy,rendererInterceptor:nQ,steps:null});return p()});RP.propTypes={ampm:ne.bool,ampmInClock:ne.bool,autoFocus:ne.bool,className:ne.string,closeOnSelect:ne.bool,dayOfWeekFormatter:ne.func,defaultValue:ne.object,disabled:ne.bool,disableFuture:ne.bool,disableHighlightToday:ne.bool,disableIgnoringDatePartForTimeValidation:ne.bool,disableOpenPicker:ne.bool,disablePast:ne.bool,displayWeekNumber:ne.bool,enableAccessibleFieldDOMStructure:ne.any,fixedWeekNumber:ne.number,format:ne.string,formatDensity:ne.oneOf(["dense","spacious"]),inputRef:bR,label:ne.node,loading:ne.bool,localeText:ne.object,maxDate:ne.object,maxDateTime:ne.object,maxTime:ne.object,minDate:ne.object,minDateTime:ne.object,minTime:ne.object,minutesStep:ne.number,monthsPerRow:ne.oneOf([3,4]),name:ne.string,onAccept:ne.func,onChange:ne.func,onClose:ne.func,onError:ne.func,onMonthChange:ne.func,onOpen:ne.func,onSelectedSectionsChange:ne.func,onViewChange:ne.func,onYearChange:ne.func,open:ne.bool,openTo:ne.oneOf(["day","hours","meridiem","minutes","month","seconds","year"]),orientation:ne.oneOf(["landscape","portrait"]),readOnly:ne.bool,reduceAnimations:ne.bool,referenceDate:ne.object,renderLoading:ne.func,selectedSections:ne.oneOfType([ne.oneOf(["all","day","empty","hours","meridiem","minutes","month","seconds","weekDay","year"]),ne.number]),shouldDisableDate:ne.func,shouldDisableMonth:ne.func,shouldDisableTime:ne.func,shouldDisableYear:ne.func,showDaysOutsideCurrentMonth:ne.bool,skipDisabled:ne.bool,slotProps:ne.object,slots:ne.object,sx:ne.oneOfType([ne.arrayOf(ne.oneOfType([ne.func,ne.object,ne.bool])),ne.func,ne.object]),thresholdToRenderTimeInASingleColumn:ne.number,timeSteps:ne.shape({hours:ne.number,minutes:ne.number,seconds:ne.number}),timezone:ne.string,value:ne.object,view:ne.oneOf(["day","hours","meridiem","minutes","month","seconds","year"]),viewRenderers:ne.shape({day:ne.func,hours:ne.func,meridiem:ne.func,minutes:ne.func,month:ne.func,seconds:ne.func,year:ne.func}),views:ne.arrayOf(ne.oneOf(["day","hours","minutes","month","seconds","year"]).isRequired),yearsOrder:ne.oneOf(["asc","desc"]),yearsPerRow:ne.oneOf([3,4])};const rQ=[{views:TM},{views:jM}],OP=O.forwardRef(function(e,n){var g,m,x,b,A,E;const r=Yt(),i=DP(e,"MuiMobileDateTimePicker"),a=i.shouldRenderTimeInASingleColumn?TP:o1,s=H({day:jd,month:jd,year:jd,hours:a,minutes:a,seconds:a,meridiem:a},i.viewRenderers),o=i.ampmInClock??!1,d=((g=s.hours)==null?void 0:g.name)===o1.name?i.views:i.views.filter(S=>S!=="meridiem"),f=H({},i,{viewRenderers:s,format:IP(r,i),views:d,ampmInClock:o,slots:H({field:uP},i.slots),slotProps:H({},i.slotProps,{field:S=>{var T;return H({},Ao((T=i.slotProps)==null?void 0:T.field,S),SM(i))},toolbar:H({hidden:!1,ampmInClock:o},(m=i.slotProps)==null?void 0:m.toolbar),tabs:H({hidden:!1},(x=i.slotProps)==null?void 0:x.tabs),layout:H({},(b=i.slotProps)==null?void 0:b.layout,{sx:$W([{[`& .${Fw.root}`]:{width:Jd},[`& .${jw.root}`]:{flex:1,maxHeight:ef-1,[`.${jw.item}`]:{width:"auto"}},[`& .${Bw.root}`]:{width:Jd,maxHeight:ef,flex:1,[`.${Bw.item}`]:{justifyContent:"center"}}}],(E=(A=i.slotProps)==null?void 0:A.layout)==null?void 0:E.sx)})})}),{renderPicker:p}=SK({ref:n,props:f,valueManager:Fi,valueType:"date-time",validator:xy,steps:rQ});return p()});OP.propTypes={ampm:ne.bool,ampmInClock:ne.bool,autoFocus:ne.bool,className:ne.string,closeOnSelect:ne.bool,dayOfWeekFormatter:ne.func,defaultValue:ne.object,disabled:ne.bool,disableFuture:ne.bool,disableHighlightToday:ne.bool,disableIgnoringDatePartForTimeValidation:ne.bool,disableOpenPicker:ne.bool,disablePast:ne.bool,displayWeekNumber:ne.bool,enableAccessibleFieldDOMStructure:ne.any,fixedWeekNumber:ne.number,format:ne.string,formatDensity:ne.oneOf(["dense","spacious"]),inputRef:bR,label:ne.node,loading:ne.bool,localeText:ne.object,maxDate:ne.object,maxDateTime:ne.object,maxTime:ne.object,minDate:ne.object,minDateTime:ne.object,minTime:ne.object,minutesStep:ne.number,monthsPerRow:ne.oneOf([3,4]),name:ne.string,onAccept:ne.func,onChange:ne.func,onClose:ne.func,onError:ne.func,onMonthChange:ne.func,onOpen:ne.func,onSelectedSectionsChange:ne.func,onViewChange:ne.func,onYearChange:ne.func,open:ne.bool,openTo:ne.oneOf(["day","hours","meridiem","minutes","month","seconds","year"]),orientation:ne.oneOf(["landscape","portrait"]),readOnly:ne.bool,reduceAnimations:ne.bool,referenceDate:ne.object,renderLoading:ne.func,selectedSections:ne.oneOfType([ne.oneOf(["all","day","empty","hours","meridiem","minutes","month","seconds","weekDay","year"]),ne.number]),shouldDisableDate:ne.func,shouldDisableMonth:ne.func,shouldDisableTime:ne.func,shouldDisableYear:ne.func,showDaysOutsideCurrentMonth:ne.bool,skipDisabled:ne.bool,slotProps:ne.object,slots:ne.object,sx:ne.oneOfType([ne.arrayOf(ne.oneOfType([ne.func,ne.object,ne.bool])),ne.func,ne.object]),thresholdToRenderTimeInASingleColumn:ne.number,timeSteps:ne.shape({hours:ne.number,minutes:ne.number,seconds:ne.number}),timezone:ne.string,value:ne.object,view:ne.oneOf(["day","hours","meridiem","minutes","month","seconds","year"]),viewRenderers:ne.shape({day:ne.func,hours:ne.func,meridiem:ne.func,minutes:ne.func,month:ne.func,seconds:ne.func,year:ne.func}),views:ne.arrayOf(ne.oneOf(["day","hours","minutes","month","seconds","year"]).isRequired),yearsOrder:ne.oneOf(["asc","desc"]),yearsPerRow:ne.oneOf([3,4])};const iQ=["desktopModeMediaQuery"],aQ=O.forwardRef(function(e,n){const r=bt({props:e,name:"MuiDateTimePicker"}),{desktopModeMediaQuery:i=zW}=r,a=je(r,iQ);return B1(i,{defaultMatches:!0})?v.jsx(RP,H({ref:n},a)):v.jsx(OP,H({ref:n},a))}),MP=6048e5,sQ=864e5,PP=6e4,kP=36e5,oQ=1e3,BD=Symbol.for("constructDateFrom");function Fn(t,e){return typeof t=="function"?t(e):t&&typeof t=="object"&&BD in t?t[BD](e):t instanceof Date?new t.constructor(e):new Date(e)}function nt(t,e){return Fn(e||t,t)}function _y(t,e,n){const r=nt(t,n==null?void 0:n.in);return isNaN(e)?Fn((n==null?void 0:n.in)||t,NaN):(e&&r.setDate(r.getDate()+e),r)}function NP(t,e,n){return Fn(t,+nt(t)+e)}function lQ(t,e,n){return NP(t,e*1e3)}function cQ(t,e,n){const r=nt(t,n==null?void 0:n.in);return r.setTime(r.getTime()+e*PP),r}function uQ(t,e,n){return NP(t,e*kP)}function dQ(t,e,n){return _y(t,e*7,n)}function LP(t,e,n){const r=nt(t,n==null?void 0:n.in);if(isNaN(e))return Fn(t,NaN);if(!e)return r;const i=r.getDate(),a=Fn(t,r.getTime());a.setMonth(r.getMonth()+e+1,0);const s=a.getDate();return i>=s?a:(r.setFullYear(a.getFullYear(),a.getMonth(),i),r)}function fQ(t,e,n){return LP(t,e*12,n)}function FD(t,e){const n=nt(t,e==null?void 0:e.in);return n.setHours(23,59,59,999),n}let hQ={};function du(){return hQ}function pQ(t,e){var o,c,d,f;const n=du(),r=(e==null?void 0:e.weekStartsOn)??((c=(o=e==null?void 0:e.locale)==null?void 0:o.options)==null?void 0:c.weekStartsOn)??n.weekStartsOn??((f=(d=n.locale)==null?void 0:d.options)==null?void 0:f.weekStartsOn)??0,i=nt(t,e==null?void 0:e.in),a=i.getDay(),s=(a<r?-7:0)+6-(a-r);return i.setDate(i.getDate()+s),i.setHours(23,59,59,999),i}function jD(t,e){const n=nt(t,e==null?void 0:e.in),r=n.getFullYear();return n.setFullYear(r+1,0,0),n.setHours(23,59,59,999),n}const gQ={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},mQ=(t,e,n)=>{let r;const i=gQ[t];return typeof i=="string"?r=i:e===1?r=i.one:r=i.other.replace("{{count}}",e.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function Vd(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const yQ={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},vQ={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},xQ={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},wQ={date:Vd({formats:yQ,defaultWidth:"full"}),time:Vd({formats:vQ,defaultWidth:"full"}),dateTime:Vd({formats:xQ,defaultWidth:"full"})},bQ={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},_Q=(t,e,n,r)=>bQ[t];function As(t){return(e,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let i;if(r==="formatting"&&t.formattingValues){const s=t.defaultFormattingWidth||t.defaultWidth,o=n!=null&&n.width?String(n.width):s;i=t.formattingValues[o]||t.formattingValues[s]}else{const s=t.defaultWidth,o=n!=null&&n.width?String(n.width):t.defaultWidth;i=t.values[o]||t.values[s]}const a=t.argumentCallback?t.argumentCallback(e):e;return i[a]}}const AQ={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},EQ={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},SQ={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},CQ={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},TQ={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},IQ={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},DQ=(t,e)=>{const n=Number(t),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},RQ={ordinalNumber:DQ,era:As({values:AQ,defaultWidth:"wide"}),quarter:As({values:EQ,defaultWidth:"wide",argumentCallback:t=>t-1}),month:As({values:SQ,defaultWidth:"wide"}),day:As({values:CQ,defaultWidth:"wide"}),dayPeriod:As({values:TQ,defaultWidth:"wide",formattingValues:IQ,defaultFormattingWidth:"wide"})};function Es(t){return(e,n={})=>{const r=n.width,i=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],a=e.match(i);if(!a)return null;const s=a[0],o=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],c=Array.isArray(o)?MQ(o,p=>p.test(s)):OQ(o,p=>p.test(s));let d;d=t.valueCallback?t.valueCallback(c):c,d=n.valueCallback?n.valueCallback(d):d;const f=e.slice(s.length);return{value:d,rest:f}}}function OQ(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function MQ(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function BP(t){return(e,n={})=>{const r=e.match(t.matchPattern);if(!r)return null;const i=r[0],a=e.match(t.parsePattern);if(!a)return null;let s=t.valueCallback?t.valueCallback(a[0]):a[0];s=n.valueCallback?n.valueCallback(s):s;const o=e.slice(i.length);return{value:s,rest:o}}}const PQ=/^(\d+)(th|st|nd|rd)?/i,kQ=/\d+/i,NQ={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},LQ={any:[/^b/i,/^(a|c)/i]},BQ={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},FQ={any:[/1/i,/2/i,/3/i,/4/i]},jQ={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},VQ={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},UQ={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},HQ={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},zQ={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},$Q={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},GQ={ordinalNumber:BP({matchPattern:PQ,parsePattern:kQ,valueCallback:t=>parseInt(t,10)}),era:Es({matchPatterns:NQ,defaultMatchWidth:"wide",parsePatterns:LQ,defaultParseWidth:"any"}),quarter:Es({matchPatterns:BQ,defaultMatchWidth:"wide",parsePatterns:FQ,defaultParseWidth:"any",valueCallback:t=>t+1}),month:Es({matchPatterns:jQ,defaultMatchWidth:"wide",parsePatterns:VQ,defaultParseWidth:"any"}),day:Es({matchPatterns:UQ,defaultMatchWidth:"wide",parsePatterns:HQ,defaultParseWidth:"any"}),dayPeriod:Es({matchPatterns:zQ,defaultMatchWidth:"any",parsePatterns:$Q,defaultParseWidth:"any"})},j_={code:"en-US",formatDistance:mQ,formatLong:wQ,formatRelative:_Q,localize:RQ,match:GQ,options:{weekStartsOn:0,firstWeekContainsDate:1}};function l1(t){const e=nt(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function rp(t,...e){const n=Fn.bind(null,e.find(r=>typeof r=="object"));return e.map(n)}function O0(t,e){const n=nt(t,e==null?void 0:e.in);return n.setHours(0,0,0,0),n}function WQ(t,e,n){const[r,i]=rp(n==null?void 0:n.in,t,e),a=O0(r),s=O0(i),o=+a-l1(a),c=+s-l1(s);return Math.round((o-c)/sQ)}function FP(t,e){const n=nt(t,e==null?void 0:e.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}function YQ(t,e){const n=nt(t,e==null?void 0:e.in);return WQ(n,FP(n))+1}function Ro(t,e){var o,c,d,f;const n=du(),r=(e==null?void 0:e.weekStartsOn)??((c=(o=e==null?void 0:e.locale)==null?void 0:o.options)==null?void 0:c.weekStartsOn)??n.weekStartsOn??((f=(d=n.locale)==null?void 0:d.options)==null?void 0:f.weekStartsOn)??0,i=nt(t,e==null?void 0:e.in),a=i.getDay(),s=(a<r?7:0)+a-r;return i.setDate(i.getDate()-s),i.setHours(0,0,0,0),i}function tf(t,e){return Ro(t,{...e,weekStartsOn:1})}function jP(t,e){const n=nt(t,e==null?void 0:e.in),r=n.getFullYear(),i=Fn(n,0);i.setFullYear(r+1,0,4),i.setHours(0,0,0,0);const a=tf(i),s=Fn(n,0);s.setFullYear(r,0,4),s.setHours(0,0,0,0);const o=tf(s);return n.getTime()>=a.getTime()?r+1:n.getTime()>=o.getTime()?r:r-1}function qQ(t,e){const n=jP(t,e),r=Fn(t,0);return r.setFullYear(n,0,4),r.setHours(0,0,0,0),tf(r)}function VP(t,e){const n=nt(t,e==null?void 0:e.in),r=+tf(n)-+qQ(n);return Math.round(r/MP)+1}function V_(t,e){var f,p,g,m;const n=nt(t,e==null?void 0:e.in),r=n.getFullYear(),i=du(),a=(e==null?void 0:e.firstWeekContainsDate)??((p=(f=e==null?void 0:e.locale)==null?void 0:f.options)==null?void 0:p.firstWeekContainsDate)??i.firstWeekContainsDate??((m=(g=i.locale)==null?void 0:g.options)==null?void 0:m.firstWeekContainsDate)??1,s=Fn((e==null?void 0:e.in)||t,0);s.setFullYear(r+1,0,a),s.setHours(0,0,0,0);const o=Ro(s,e),c=Fn((e==null?void 0:e.in)||t,0);c.setFullYear(r,0,a),c.setHours(0,0,0,0);const d=Ro(c,e);return+n>=+o?r+1:+n>=+d?r:r-1}function XQ(t,e){var o,c,d,f;const n=du(),r=(e==null?void 0:e.firstWeekContainsDate)??((c=(o=e==null?void 0:e.locale)==null?void 0:o.options)==null?void 0:c.firstWeekContainsDate)??n.firstWeekContainsDate??((f=(d=n.locale)==null?void 0:d.options)==null?void 0:f.firstWeekContainsDate)??1,i=V_(t,e),a=Fn((e==null?void 0:e.in)||t,0);return a.setFullYear(i,0,r),a.setHours(0,0,0,0),Ro(a,e)}function U_(t,e){const n=nt(t,e==null?void 0:e.in),r=+Ro(n,e)-+XQ(n,e);return Math.round(r/MP)+1}function cn(t,e){const n=t<0?"-":"",r=Math.abs(t).toString().padStart(e,"0");return n+r}const vl={y(t,e){const n=t.getFullYear(),r=n>0?n:1-n;return cn(e==="yy"?r%100:r,e.length)},M(t,e){const n=t.getMonth();return e==="M"?String(n+1):cn(n+1,2)},d(t,e){return cn(t.getDate(),e.length)},a(t,e){const n=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(t,e){return cn(t.getHours()%12||12,e.length)},H(t,e){return cn(t.getHours(),e.length)},m(t,e){return cn(t.getMinutes(),e.length)},s(t,e){return cn(t.getSeconds(),e.length)},S(t,e){const n=e.length,r=t.getMilliseconds(),i=Math.trunc(r*Math.pow(10,n-3));return cn(i,e.length)}},ld={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},VD={G:function(t,e,n){const r=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(t,e,n){if(e==="yo"){const r=t.getFullYear(),i=r>0?r:1-r;return n.ordinalNumber(i,{unit:"year"})}return vl.y(t,e)},Y:function(t,e,n,r){const i=V_(t,r),a=i>0?i:1-i;if(e==="YY"){const s=a%100;return cn(s,2)}return e==="Yo"?n.ordinalNumber(a,{unit:"year"}):cn(a,e.length)},R:function(t,e){const n=jP(t);return cn(n,e.length)},u:function(t,e){const n=t.getFullYear();return cn(n,e.length)},Q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return cn(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return cn(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(t,e,n){const r=t.getMonth();switch(e){case"M":case"MM":return vl.M(t,e);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(t,e,n){const r=t.getMonth();switch(e){case"L":return String(r+1);case"LL":return cn(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(t,e,n,r){const i=U_(t,r);return e==="wo"?n.ordinalNumber(i,{unit:"week"}):cn(i,e.length)},I:function(t,e,n){const r=VP(t);return e==="Io"?n.ordinalNumber(r,{unit:"week"}):cn(r,e.length)},d:function(t,e,n){return e==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):vl.d(t,e)},D:function(t,e,n){const r=YQ(t);return e==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):cn(r,e.length)},E:function(t,e,n){const r=t.getDay();switch(e){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(t,e,n,r){const i=t.getDay(),a=(i-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(a);case"ee":return cn(a,2);case"eo":return n.ordinalNumber(a,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});case"eeee":default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(t,e,n,r){const i=t.getDay(),a=(i-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(a);case"cc":return cn(a,e.length);case"co":return n.ordinalNumber(a,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});case"cccc":default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(t,e,n){const r=t.getDay(),i=r===0?7:r;switch(e){case"i":return String(i);case"ii":return cn(i,e.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(t,e,n){const i=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(t,e,n){const r=t.getHours();let i;switch(r===12?i=ld.noon:r===0?i=ld.midnight:i=r/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(t,e,n){const r=t.getHours();let i;switch(r>=17?i=ld.evening:r>=12?i=ld.afternoon:r>=4?i=ld.morning:i=ld.night,e){case"B":case"BB":case"BBB":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(t,e,n){if(e==="ho"){let r=t.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return vl.h(t,e)},H:function(t,e,n){return e==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):vl.H(t,e)},K:function(t,e,n){const r=t.getHours()%12;return e==="Ko"?n.ordinalNumber(r,{unit:"hour"}):cn(r,e.length)},k:function(t,e,n){let r=t.getHours();return r===0&&(r=24),e==="ko"?n.ordinalNumber(r,{unit:"hour"}):cn(r,e.length)},m:function(t,e,n){return e==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):vl.m(t,e)},s:function(t,e,n){return e==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):vl.s(t,e)},S:function(t,e){return vl.S(t,e)},X:function(t,e,n){const r=t.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return HD(r);case"XXXX":case"XX":return Bc(r);case"XXXXX":case"XXX":default:return Bc(r,":")}},x:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"x":return HD(r);case"xxxx":case"xx":return Bc(r);case"xxxxx":case"xxx":default:return Bc(r,":")}},O:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+UD(r,":");case"OOOO":default:return"GMT"+Bc(r,":")}},z:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+UD(r,":");case"zzzz":default:return"GMT"+Bc(r,":")}},t:function(t,e,n){const r=Math.trunc(+t/1e3);return cn(r,e.length)},T:function(t,e,n){return cn(+t,e.length)}};function UD(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),i=Math.trunc(r/60),a=r%60;return a===0?n+String(i):n+String(i)+e+cn(a,2)}function HD(t,e){return t%60===0?(t>0?"-":"+")+cn(Math.abs(t)/60,2):Bc(t,e)}function Bc(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),i=cn(Math.trunc(r/60),2),a=cn(r%60,2);return n+i+e+a}const zD=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},UP=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},KQ=(t,e)=>{const n=t.match(/(P+)(p+)?/)||[],r=n[1],i=n[2];if(!i)return zD(t,e);let a;switch(r){case"P":a=e.dateTime({width:"short"});break;case"PP":a=e.dateTime({width:"medium"});break;case"PPP":a=e.dateTime({width:"long"});break;case"PPPP":default:a=e.dateTime({width:"full"});break}return a.replace("{{date}}",zD(r,e)).replace("{{time}}",UP(i,e))},c1={p:UP,P:KQ},QQ=/^D+$/,ZQ=/^Y+$/,JQ=["D","DD","YY","YYYY"];function HP(t){return QQ.test(t)}function zP(t){return ZQ.test(t)}function Vw(t,e,n){const r=eZ(t,e,n);if(console.warn(r),JQ.includes(t))throw new RangeError(r)}function eZ(t,e,n){const r=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}function tZ(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function $P(t){return!(!tZ(t)&&typeof t!="number"||isNaN(+nt(t)))}const nZ=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,rZ=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,iZ=/^'([^]*?)'?$/,aZ=/''/g,sZ=/[a-zA-Z]/;function oZ(t,e,n){var f,p,g,m,x,b,A,E;const r=du(),i=(n==null?void 0:n.locale)??r.locale??j_,a=(n==null?void 0:n.firstWeekContainsDate)??((p=(f=n==null?void 0:n.locale)==null?void 0:f.options)==null?void 0:p.firstWeekContainsDate)??r.firstWeekContainsDate??((m=(g=r.locale)==null?void 0:g.options)==null?void 0:m.firstWeekContainsDate)??1,s=(n==null?void 0:n.weekStartsOn)??((b=(x=n==null?void 0:n.locale)==null?void 0:x.options)==null?void 0:b.weekStartsOn)??r.weekStartsOn??((E=(A=r.locale)==null?void 0:A.options)==null?void 0:E.weekStartsOn)??0,o=nt(t,n==null?void 0:n.in);if(!$P(o))throw new RangeError("Invalid time value");let c=e.match(rZ).map(S=>{const T=S[0];if(T==="p"||T==="P"){const I=c1[T];return I(S,i.formatLong)}return S}).join("").match(nZ).map(S=>{if(S==="''")return{isToken:!1,value:"'"};const T=S[0];if(T==="'")return{isToken:!1,value:lZ(S)};if(VD[T])return{isToken:!0,value:S};if(T.match(sZ))throw new RangeError("Format string contains an unescaped latin alphabet character `"+T+"`");return{isToken:!1,value:S}});i.localize.preprocessor&&(c=i.localize.preprocessor(o,c));const d={firstWeekContainsDate:a,weekStartsOn:s,locale:i};return c.map(S=>{if(!S.isToken)return S.value;const T=S.value;(!(n!=null&&n.useAdditionalWeekYearTokens)&&zP(T)||!(n!=null&&n.useAdditionalDayOfYearTokens)&&HP(T))&&Vw(T,e,String(t));const I=VD[T[0]];return I(o,T,i.localize,d)}).join("")}function lZ(t){const e=t.match(iZ);return e?e[1].replace(aZ,"'"):t}function cZ(t,e){return nt(t,e==null?void 0:e.in).getDate()}function GP(t,e){const n=nt(t,e==null?void 0:e.in),r=n.getFullYear(),i=n.getMonth(),a=Fn(n,0);return a.setFullYear(r,i+1,0),a.setHours(0,0,0,0),a.getDate()}function uZ(t,e){return nt(t,e==null?void 0:e.in).getHours()}function dZ(t,e){return nt(t,e==null?void 0:e.in).getMinutes()}function fZ(t,e){return nt(t,e==null?void 0:e.in).getMonth()}function hZ(t){return nt(t).getSeconds()}function pZ(t){return nt(t).getMilliseconds()}function gZ(t,e){return nt(t,e==null?void 0:e.in).getFullYear()}function p2(t,e){return+nt(t)>+nt(e)}function g2(t,e){return+nt(t)<+nt(e)}function mZ(t,e){return+nt(t)==+nt(e)}function yZ(t,e,n){const[r,i]=rp(n==null?void 0:n.in,t,e);return+O0(r)==+O0(i)}function vZ(t,e,n){const[r,i]=rp(n==null?void 0:n.in,t,e);return r.getFullYear()===i.getFullYear()}function xZ(t,e,n){const[r,i]=rp(n==null?void 0:n.in,t,e);return r.getFullYear()===i.getFullYear()&&r.getMonth()===i.getMonth()}function $D(t,e){const n=nt(t,e==null?void 0:e.in);return n.setMinutes(0,0,0),n}function wZ(t,e,n){const[r,i]=rp(n==null?void 0:n.in,t,e);return+$D(r)==+$D(i)}function bZ(){return Object.assign({},du())}function _Z(t,e){const n=AZ(e)?new e(0):Fn(e,0);return n.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()),n.setHours(t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()),n}function AZ(t){var e;return typeof t=="function"&&((e=t.prototype)==null?void 0:e.constructor)===t}const EZ=10;class WP{constructor(){xe(this,"subPriority",0)}validate(e,n){return!0}}class SZ extends WP{constructor(e,n,r,i,a){super(),this.value=e,this.validateValue=n,this.setValue=r,this.priority=i,a&&(this.subPriority=a)}validate(e,n){return this.validateValue(e,this.value,n)}set(e,n,r){return this.setValue(e,n,this.value,r)}}class CZ extends WP{constructor(n,r){super();xe(this,"priority",EZ);xe(this,"subPriority",-1);this.context=n||(i=>Fn(r,i))}set(n,r){return r.timestampIsSet?n:Fn(n,_Z(n,this.context))}}class en{run(e,n,r,i){const a=this.parse(e,n,r,i);return a?{setter:new SZ(a.value,this.validate,this.set,this.priority,this.subPriority),rest:a.rest}:null}validate(e,n,r){return!0}}class TZ extends en{constructor(){super(...arguments);xe(this,"priority",140);xe(this,"incompatibleTokens",["R","u","t","T"])}parse(n,r,i){switch(r){case"G":case"GG":case"GGG":return i.era(n,{width:"abbreviated"})||i.era(n,{width:"narrow"});case"GGGGG":return i.era(n,{width:"narrow"});case"GGGG":default:return i.era(n,{width:"wide"})||i.era(n,{width:"abbreviated"})||i.era(n,{width:"narrow"})}}set(n,r,i){return r.era=i,n.setFullYear(i,0,1),n.setHours(0,0,0,0),n}}const ar={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},Ss={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function sr(t,e){return t&&{value:e(t.value),rest:t.rest}}function zn(t,e){const n=e.match(t);return n?{value:parseInt(n[0],10),rest:e.slice(n[0].length)}:null}function Cs(t,e){const n=e.match(t);if(!n)return null;if(n[0]==="Z")return{value:0,rest:e.slice(1)};const r=n[1]==="+"?1:-1,i=n[2]?parseInt(n[2],10):0,a=n[3]?parseInt(n[3],10):0,s=n[5]?parseInt(n[5],10):0;return{value:r*(i*kP+a*PP+s*oQ),rest:e.slice(n[0].length)}}function YP(t){return zn(ar.anyDigitsSigned,t)}function Zn(t,e){switch(t){case 1:return zn(ar.singleDigit,e);case 2:return zn(ar.twoDigits,e);case 3:return zn(ar.threeDigits,e);case 4:return zn(ar.fourDigits,e);default:return zn(new RegExp("^\\d{1,"+t+"}"),e)}}function u1(t,e){switch(t){case 1:return zn(ar.singleDigitSigned,e);case 2:return zn(ar.twoDigitsSigned,e);case 3:return zn(ar.threeDigitsSigned,e);case 4:return zn(ar.fourDigitsSigned,e);default:return zn(new RegExp("^-?\\d{1,"+t+"}"),e)}}function H_(t){switch(t){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function qP(t,e){const n=e>0,r=n?e:1-e;let i;if(r<=50)i=t||100;else{const a=r+50,s=Math.trunc(a/100)*100,o=t>=a%100;i=t+s-(o?100:0)}return n?i:1-i}function XP(t){return t%400===0||t%4===0&&t%100!==0}class IZ extends en{constructor(){super(...arguments);xe(this,"priority",130);xe(this,"incompatibleTokens",["Y","R","u","w","I","i","e","c","t","T"])}parse(n,r,i){const a=s=>({year:s,isTwoDigitYear:r==="yy"});switch(r){case"y":return sr(Zn(4,n),a);case"yo":return sr(i.ordinalNumber(n,{unit:"year"}),a);default:return sr(Zn(r.length,n),a)}}validate(n,r){return r.isTwoDigitYear||r.year>0}set(n,r,i){const a=n.getFullYear();if(i.isTwoDigitYear){const o=qP(i.year,a);return n.setFullYear(o,0,1),n.setHours(0,0,0,0),n}const s=!("era"in r)||r.era===1?i.year:1-i.year;return n.setFullYear(s,0,1),n.setHours(0,0,0,0),n}}class DZ extends en{constructor(){super(...arguments);xe(this,"priority",130);xe(this,"incompatibleTokens",["y","R","u","Q","q","M","L","I","d","D","i","t","T"])}parse(n,r,i){const a=s=>({year:s,isTwoDigitYear:r==="YY"});switch(r){case"Y":return sr(Zn(4,n),a);case"Yo":return sr(i.ordinalNumber(n,{unit:"year"}),a);default:return sr(Zn(r.length,n),a)}}validate(n,r){return r.isTwoDigitYear||r.year>0}set(n,r,i,a){const s=V_(n,a);if(i.isTwoDigitYear){const c=qP(i.year,s);return n.setFullYear(c,0,a.firstWeekContainsDate),n.setHours(0,0,0,0),Ro(n,a)}const o=!("era"in r)||r.era===1?i.year:1-i.year;return n.setFullYear(o,0,a.firstWeekContainsDate),n.setHours(0,0,0,0),Ro(n,a)}}class RZ extends en{constructor(){super(...arguments);xe(this,"priority",130);xe(this,"incompatibleTokens",["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"])}parse(n,r){return u1(r==="R"?4:r.length,n)}set(n,r,i){const a=Fn(n,0);return a.setFullYear(i,0,4),a.setHours(0,0,0,0),tf(a)}}class OZ extends en{constructor(){super(...arguments);xe(this,"priority",130);xe(this,"incompatibleTokens",["G","y","Y","R","w","I","i","e","c","t","T"])}parse(n,r){return u1(r==="u"?4:r.length,n)}set(n,r,i){return n.setFullYear(i,0,1),n.setHours(0,0,0,0),n}}class MZ extends en{constructor(){super(...arguments);xe(this,"priority",120);xe(this,"incompatibleTokens",["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"])}parse(n,r,i){switch(r){case"Q":case"QQ":return Zn(r.length,n);case"Qo":return i.ordinalNumber(n,{unit:"quarter"});case"QQQ":return i.quarter(n,{width:"abbreviated",context:"formatting"})||i.quarter(n,{width:"narrow",context:"formatting"});case"QQQQQ":return i.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return i.quarter(n,{width:"wide",context:"formatting"})||i.quarter(n,{width:"abbreviated",context:"formatting"})||i.quarter(n,{width:"narrow",context:"formatting"})}}validate(n,r){return r>=1&&r<=4}set(n,r,i){return n.setMonth((i-1)*3,1),n.setHours(0,0,0,0),n}}class PZ extends en{constructor(){super(...arguments);xe(this,"priority",120);xe(this,"incompatibleTokens",["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"])}parse(n,r,i){switch(r){case"q":case"qq":return Zn(r.length,n);case"qo":return i.ordinalNumber(n,{unit:"quarter"});case"qqq":return i.quarter(n,{width:"abbreviated",context:"standalone"})||i.quarter(n,{width:"narrow",context:"standalone"});case"qqqqq":return i.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return i.quarter(n,{width:"wide",context:"standalone"})||i.quarter(n,{width:"abbreviated",context:"standalone"})||i.quarter(n,{width:"narrow",context:"standalone"})}}validate(n,r){return r>=1&&r<=4}set(n,r,i){return n.setMonth((i-1)*3,1),n.setHours(0,0,0,0),n}}class kZ extends en{constructor(){super(...arguments);xe(this,"incompatibleTokens",["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]);xe(this,"priority",110)}parse(n,r,i){const a=s=>s-1;switch(r){case"M":return sr(zn(ar.month,n),a);case"MM":return sr(Zn(2,n),a);case"Mo":return sr(i.ordinalNumber(n,{unit:"month"}),a);case"MMM":return i.month(n,{width:"abbreviated",context:"formatting"})||i.month(n,{width:"narrow",context:"formatting"});case"MMMMM":return i.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return i.month(n,{width:"wide",context:"formatting"})||i.month(n,{width:"abbreviated",context:"formatting"})||i.month(n,{width:"narrow",context:"formatting"})}}validate(n,r){return r>=0&&r<=11}set(n,r,i){return n.setMonth(i,1),n.setHours(0,0,0,0),n}}class NZ extends en{constructor(){super(...arguments);xe(this,"priority",110);xe(this,"incompatibleTokens",["Y","R","q","Q","M","w","I","D","i","e","c","t","T"])}parse(n,r,i){const a=s=>s-1;switch(r){case"L":return sr(zn(ar.month,n),a);case"LL":return sr(Zn(2,n),a);case"Lo":return sr(i.ordinalNumber(n,{unit:"month"}),a);case"LLL":return i.month(n,{width:"abbreviated",context:"standalone"})||i.month(n,{width:"narrow",context:"standalone"});case"LLLLL":return i.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return i.month(n,{width:"wide",context:"standalone"})||i.month(n,{width:"abbreviated",context:"standalone"})||i.month(n,{width:"narrow",context:"standalone"})}}validate(n,r){return r>=0&&r<=11}set(n,r,i){return n.setMonth(i,1),n.setHours(0,0,0,0),n}}function LZ(t,e,n){const r=nt(t,n==null?void 0:n.in),i=U_(r,n)-e;return r.setDate(r.getDate()-i*7),nt(r,n==null?void 0:n.in)}class BZ extends en{constructor(){super(...arguments);xe(this,"priority",100);xe(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","i","t","T"])}parse(n,r,i){switch(r){case"w":return zn(ar.week,n);case"wo":return i.ordinalNumber(n,{unit:"week"});default:return Zn(r.length,n)}}validate(n,r){return r>=1&&r<=53}set(n,r,i,a){return Ro(LZ(n,i,a),a)}}function FZ(t,e,n){const r=nt(t,n==null?void 0:n.in),i=VP(r,n)-e;return r.setDate(r.getDate()-i*7),r}class jZ extends en{constructor(){super(...arguments);xe(this,"priority",100);xe(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"])}parse(n,r,i){switch(r){case"I":return zn(ar.week,n);case"Io":return i.ordinalNumber(n,{unit:"week"});default:return Zn(r.length,n)}}validate(n,r){return r>=1&&r<=53}set(n,r,i){return tf(FZ(n,i))}}const VZ=[31,28,31,30,31,30,31,31,30,31,30,31],UZ=[31,29,31,30,31,30,31,31,30,31,30,31];class HZ extends en{constructor(){super(...arguments);xe(this,"priority",90);xe(this,"subPriority",1);xe(this,"incompatibleTokens",["Y","R","q","Q","w","I","D","i","e","c","t","T"])}parse(n,r,i){switch(r){case"d":return zn(ar.date,n);case"do":return i.ordinalNumber(n,{unit:"date"});default:return Zn(r.length,n)}}validate(n,r){const i=n.getFullYear(),a=XP(i),s=n.getMonth();return a?r>=1&&r<=UZ[s]:r>=1&&r<=VZ[s]}set(n,r,i){return n.setDate(i),n.setHours(0,0,0,0),n}}class zZ extends en{constructor(){super(...arguments);xe(this,"priority",90);xe(this,"subpriority",1);xe(this,"incompatibleTokens",["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"])}parse(n,r,i){switch(r){case"D":case"DD":return zn(ar.dayOfYear,n);case"Do":return i.ordinalNumber(n,{unit:"date"});default:return Zn(r.length,n)}}validate(n,r){const i=n.getFullYear();return XP(i)?r>=1&&r<=366:r>=1&&r<=365}set(n,r,i){return n.setMonth(0,i),n.setHours(0,0,0,0),n}}function z_(t,e,n){var p,g,m,x;const r=du(),i=(n==null?void 0:n.weekStartsOn)??((g=(p=n==null?void 0:n.locale)==null?void 0:p.options)==null?void 0:g.weekStartsOn)??r.weekStartsOn??((x=(m=r.locale)==null?void 0:m.options)==null?void 0:x.weekStartsOn)??0,a=nt(t,n==null?void 0:n.in),s=a.getDay(),c=(e%7+7)%7,d=7-i,f=e<0||e>6?e-(s+d)%7:(c+d)%7-(s+d)%7;return _y(a,f,n)}class $Z extends en{constructor(){super(...arguments);xe(this,"priority",90);xe(this,"incompatibleTokens",["D","i","e","c","t","T"])}parse(n,r,i){switch(r){case"E":case"EE":case"EEE":return i.day(n,{width:"abbreviated",context:"formatting"})||i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"});case"EEEEE":return i.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"});case"EEEE":default:return i.day(n,{width:"wide",context:"formatting"})||i.day(n,{width:"abbreviated",context:"formatting"})||i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"})}}validate(n,r){return r>=0&&r<=6}set(n,r,i,a){return n=z_(n,i,a),n.setHours(0,0,0,0),n}}class GZ extends en{constructor(){super(...arguments);xe(this,"priority",90);xe(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"])}parse(n,r,i,a){const s=o=>{const c=Math.floor((o-1)/7)*7;return(o+a.weekStartsOn+6)%7+c};switch(r){case"e":case"ee":return sr(Zn(r.length,n),s);case"eo":return sr(i.ordinalNumber(n,{unit:"day"}),s);case"eee":return i.day(n,{width:"abbreviated",context:"formatting"})||i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"});case"eeeee":return i.day(n,{width:"narrow",context:"formatting"});case"eeeeee":return i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"});case"eeee":default:return i.day(n,{width:"wide",context:"formatting"})||i.day(n,{width:"abbreviated",context:"formatting"})||i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"})}}validate(n,r){return r>=0&&r<=6}set(n,r,i,a){return n=z_(n,i,a),n.setHours(0,0,0,0),n}}class WZ extends en{constructor(){super(...arguments);xe(this,"priority",90);xe(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"])}parse(n,r,i,a){const s=o=>{const c=Math.floor((o-1)/7)*7;return(o+a.weekStartsOn+6)%7+c};switch(r){case"c":case"cc":return sr(Zn(r.length,n),s);case"co":return sr(i.ordinalNumber(n,{unit:"day"}),s);case"ccc":return i.day(n,{width:"abbreviated",context:"standalone"})||i.day(n,{width:"short",context:"standalone"})||i.day(n,{width:"narrow",context:"standalone"});case"ccccc":return i.day(n,{width:"narrow",context:"standalone"});case"cccccc":return i.day(n,{width:"short",context:"standalone"})||i.day(n,{width:"narrow",context:"standalone"});case"cccc":default:return i.day(n,{width:"wide",context:"standalone"})||i.day(n,{width:"abbreviated",context:"standalone"})||i.day(n,{width:"short",context:"standalone"})||i.day(n,{width:"narrow",context:"standalone"})}}validate(n,r){return r>=0&&r<=6}set(n,r,i,a){return n=z_(n,i,a),n.setHours(0,0,0,0),n}}function YZ(t,e){const n=nt(t,e==null?void 0:e.in).getDay();return n===0?7:n}function qZ(t,e,n){const r=nt(t,n==null?void 0:n.in),i=YZ(r,n),a=e-i;return _y(r,a,n)}class XZ extends en{constructor(){super(...arguments);xe(this,"priority",90);xe(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"])}parse(n,r,i){const a=s=>s===0?7:s;switch(r){case"i":case"ii":return Zn(r.length,n);case"io":return i.ordinalNumber(n,{unit:"day"});case"iii":return sr(i.day(n,{width:"abbreviated",context:"formatting"})||i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"}),a);case"iiiii":return sr(i.day(n,{width:"narrow",context:"formatting"}),a);case"iiiiii":return sr(i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"}),a);case"iiii":default:return sr(i.day(n,{width:"wide",context:"formatting"})||i.day(n,{width:"abbreviated",context:"formatting"})||i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"}),a)}}validate(n,r){return r>=1&&r<=7}set(n,r,i){return n=qZ(n,i),n.setHours(0,0,0,0),n}}class KZ extends en{constructor(){super(...arguments);xe(this,"priority",80);xe(this,"incompatibleTokens",["b","B","H","k","t","T"])}parse(n,r,i){switch(r){case"a":case"aa":case"aaa":return i.dayPeriod(n,{width:"abbreviated",context:"formatting"})||i.dayPeriod(n,{width:"narrow",context:"formatting"});case"aaaaa":return i.dayPeriod(n,{width:"narrow",context:"formatting"});case"aaaa":default:return i.dayPeriod(n,{width:"wide",context:"formatting"})||i.dayPeriod(n,{width:"abbreviated",context:"formatting"})||i.dayPeriod(n,{width:"narrow",context:"formatting"})}}set(n,r,i){return n.setHours(H_(i),0,0,0),n}}class QZ extends en{constructor(){super(...arguments);xe(this,"priority",80);xe(this,"incompatibleTokens",["a","B","H","k","t","T"])}parse(n,r,i){switch(r){case"b":case"bb":case"bbb":return i.dayPeriod(n,{width:"abbreviated",context:"formatting"})||i.dayPeriod(n,{width:"narrow",context:"formatting"});case"bbbbb":return i.dayPeriod(n,{width:"narrow",context:"formatting"});case"bbbb":default:return i.dayPeriod(n,{width:"wide",context:"formatting"})||i.dayPeriod(n,{width:"abbreviated",context:"formatting"})||i.dayPeriod(n,{width:"narrow",context:"formatting"})}}set(n,r,i){return n.setHours(H_(i),0,0,0),n}}class ZZ extends en{constructor(){super(...arguments);xe(this,"priority",80);xe(this,"incompatibleTokens",["a","b","t","T"])}parse(n,r,i){switch(r){case"B":case"BB":case"BBB":return i.dayPeriod(n,{width:"abbreviated",context:"formatting"})||i.dayPeriod(n,{width:"narrow",context:"formatting"});case"BBBBB":return i.dayPeriod(n,{width:"narrow",context:"formatting"});case"BBBB":default:return i.dayPeriod(n,{width:"wide",context:"formatting"})||i.dayPeriod(n,{width:"abbreviated",context:"formatting"})||i.dayPeriod(n,{width:"narrow",context:"formatting"})}}set(n,r,i){return n.setHours(H_(i),0,0,0),n}}class JZ extends en{constructor(){super(...arguments);xe(this,"priority",70);xe(this,"incompatibleTokens",["H","K","k","t","T"])}parse(n,r,i){switch(r){case"h":return zn(ar.hour12h,n);case"ho":return i.ordinalNumber(n,{unit:"hour"});default:return Zn(r.length,n)}}validate(n,r){return r>=1&&r<=12}set(n,r,i){const a=n.getHours()>=12;return a&&i<12?n.setHours(i+12,0,0,0):!a&&i===12?n.setHours(0,0,0,0):n.setHours(i,0,0,0),n}}class eJ extends en{constructor(){super(...arguments);xe(this,"priority",70);xe(this,"incompatibleTokens",["a","b","h","K","k","t","T"])}parse(n,r,i){switch(r){case"H":return zn(ar.hour23h,n);case"Ho":return i.ordinalNumber(n,{unit:"hour"});default:return Zn(r.length,n)}}validate(n,r){return r>=0&&r<=23}set(n,r,i){return n.setHours(i,0,0,0),n}}class tJ extends en{constructor(){super(...arguments);xe(this,"priority",70);xe(this,"incompatibleTokens",["h","H","k","t","T"])}parse(n,r,i){switch(r){case"K":return zn(ar.hour11h,n);case"Ko":return i.ordinalNumber(n,{unit:"hour"});default:return Zn(r.length,n)}}validate(n,r){return r>=0&&r<=11}set(n,r,i){return n.getHours()>=12&&i<12?n.setHours(i+12,0,0,0):n.setHours(i,0,0,0),n}}class nJ extends en{constructor(){super(...arguments);xe(this,"priority",70);xe(this,"incompatibleTokens",["a","b","h","H","K","t","T"])}parse(n,r,i){switch(r){case"k":return zn(ar.hour24h,n);case"ko":return i.ordinalNumber(n,{unit:"hour"});default:return Zn(r.length,n)}}validate(n,r){return r>=1&&r<=24}set(n,r,i){const a=i<=24?i%24:i;return n.setHours(a,0,0,0),n}}class rJ extends en{constructor(){super(...arguments);xe(this,"priority",60);xe(this,"incompatibleTokens",["t","T"])}parse(n,r,i){switch(r){case"m":return zn(ar.minute,n);case"mo":return i.ordinalNumber(n,{unit:"minute"});default:return Zn(r.length,n)}}validate(n,r){return r>=0&&r<=59}set(n,r,i){return n.setMinutes(i,0,0),n}}class iJ extends en{constructor(){super(...arguments);xe(this,"priority",50);xe(this,"incompatibleTokens",["t","T"])}parse(n,r,i){switch(r){case"s":return zn(ar.second,n);case"so":return i.ordinalNumber(n,{unit:"second"});default:return Zn(r.length,n)}}validate(n,r){return r>=0&&r<=59}set(n,r,i){return n.setSeconds(i,0),n}}class aJ extends en{constructor(){super(...arguments);xe(this,"priority",30);xe(this,"incompatibleTokens",["t","T"])}parse(n,r){const i=a=>Math.trunc(a*Math.pow(10,-r.length+3));return sr(Zn(r.length,n),i)}set(n,r,i){return n.setMilliseconds(i),n}}class sJ extends en{constructor(){super(...arguments);xe(this,"priority",10);xe(this,"incompatibleTokens",["t","T","x"])}parse(n,r){switch(r){case"X":return Cs(Ss.basicOptionalMinutes,n);case"XX":return Cs(Ss.basic,n);case"XXXX":return Cs(Ss.basicOptionalSeconds,n);case"XXXXX":return Cs(Ss.extendedOptionalSeconds,n);case"XXX":default:return Cs(Ss.extended,n)}}set(n,r,i){return r.timestampIsSet?n:Fn(n,n.getTime()-l1(n)-i)}}class oJ extends en{constructor(){super(...arguments);xe(this,"priority",10);xe(this,"incompatibleTokens",["t","T","X"])}parse(n,r){switch(r){case"x":return Cs(Ss.basicOptionalMinutes,n);case"xx":return Cs(Ss.basic,n);case"xxxx":return Cs(Ss.basicOptionalSeconds,n);case"xxxxx":return Cs(Ss.extendedOptionalSeconds,n);case"xxx":default:return Cs(Ss.extended,n)}}set(n,r,i){return r.timestampIsSet?n:Fn(n,n.getTime()-l1(n)-i)}}class lJ extends en{constructor(){super(...arguments);xe(this,"priority",40);xe(this,"incompatibleTokens","*")}parse(n){return YP(n)}set(n,r,i){return[Fn(n,i*1e3),{timestampIsSet:!0}]}}class cJ extends en{constructor(){super(...arguments);xe(this,"priority",20);xe(this,"incompatibleTokens","*")}parse(n){return YP(n)}set(n,r,i){return[Fn(n,i),{timestampIsSet:!0}]}}const uJ={G:new TZ,y:new IZ,Y:new DZ,R:new RZ,u:new OZ,Q:new MZ,q:new PZ,M:new kZ,L:new NZ,w:new BZ,I:new jZ,d:new HZ,D:new zZ,E:new $Z,e:new GZ,c:new WZ,i:new XZ,a:new KZ,b:new QZ,B:new ZZ,h:new JZ,H:new eJ,K:new tJ,k:new nJ,m:new rJ,s:new iJ,S:new aJ,X:new sJ,x:new oJ,t:new lJ,T:new cJ},dJ=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,fJ=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,hJ=/^'([^]*?)'?$/,pJ=/''/g,gJ=/\S/,mJ=/[a-zA-Z]/;function yJ(t,e,n,r){var A,E,S,T,I,P,F,M;const i=()=>Fn((r==null?void 0:r.in)||n,NaN),a=bZ(),s=(r==null?void 0:r.locale)??a.locale??j_,o=(r==null?void 0:r.firstWeekContainsDate)??((E=(A=r==null?void 0:r.locale)==null?void 0:A.options)==null?void 0:E.firstWeekContainsDate)??a.firstWeekContainsDate??((T=(S=a.locale)==null?void 0:S.options)==null?void 0:T.firstWeekContainsDate)??1,c=(r==null?void 0:r.weekStartsOn)??((P=(I=r==null?void 0:r.locale)==null?void 0:I.options)==null?void 0:P.weekStartsOn)??a.weekStartsOn??((M=(F=a.locale)==null?void 0:F.options)==null?void 0:M.weekStartsOn)??0;if(!e)return t?i():nt(n,r==null?void 0:r.in);const d={firstWeekContainsDate:o,weekStartsOn:c,locale:s},f=[new CZ(r==null?void 0:r.in,n)],p=e.match(fJ).map(D=>{const R=D[0];if(R in c1){const B=c1[R];return B(D,s.formatLong)}return D}).join("").match(dJ),g=[];for(let D of p){!(r!=null&&r.useAdditionalWeekYearTokens)&&zP(D)&&Vw(D,e,t),!(r!=null&&r.useAdditionalDayOfYearTokens)&&HP(D)&&Vw(D,e,t);const R=D[0],B=uJ[R];if(B){const{incompatibleTokens:N}=B;if(Array.isArray(N)){const j=g.find(q=>N.includes(q.token)||q.token===R);if(j)throw new RangeError(`The format string mustn't contain \`${j.fullToken}\` and \`${D}\` at the same time`)}else if(B.incompatibleTokens==="*"&&g.length>0)throw new RangeError(`The format string mustn't contain \`${D}\` and any other token at the same time`);g.push({token:R,fullToken:D});const k=B.run(t,D,s.match,d);if(!k)return i();f.push(k.setter),t=k.rest}else{if(R.match(mJ))throw new RangeError("Format string contains an unescaped latin alphabet character `"+R+"`");if(D==="''"?D="'":R==="'"&&(D=vJ(D)),t.indexOf(D)===0)t=t.slice(D.length);else return i()}}if(t.length>0&&gJ.test(t))return i();const m=f.map(D=>D.priority).sort((D,R)=>R-D).filter((D,R,B)=>B.indexOf(D)===R).map(D=>f.filter(R=>R.priority===D).sort((R,B)=>B.subPriority-R.subPriority)).map(D=>D[0]);let x=nt(n,r==null?void 0:r.in);if(isNaN(+x))return i();const b={};for(const D of m){if(!D.validate(x,d))return i();const R=D.set(x,b,d);Array.isArray(R)?(x=R[0],Object.assign(b,R[1])):x=R}return x}function vJ(t){return t.match(hJ)[1].replace(pJ,"'")}function xJ(t,e,n){const r=nt(t,n==null?void 0:n.in);return r.setDate(e),r}function wJ(t,e,n){const r=nt(t,n==null?void 0:n.in);return r.setHours(e),r}function bJ(t,e,n){const r=nt(t,n==null?void 0:n.in);return r.setMinutes(e),r}function _J(t,e,n){const r=nt(t,n==null?void 0:n.in),i=r.getFullYear(),a=r.getDate(),s=Fn(t,0);s.setFullYear(i,e,15),s.setHours(0,0,0,0);const o=GP(s);return r.setMonth(e,Math.min(a,o)),r}function AJ(t,e,n){const r=nt(t,n==null?void 0:n.in);return r.setSeconds(e),r}function EJ(t,e,n){const r=nt(t,n==null?void 0:n.in);return r.setMilliseconds(e),r}function SJ(t,e,n){const r=nt(t,n==null?void 0:n.in);return isNaN(+r)?Fn(t,NaN):(r.setFullYear(e),r)}function CJ(t,e){const n=nt(t,e==null?void 0:e.in);return n.setDate(1),n.setHours(0,0,0,0),n}function TJ(t,e){const n=nt(t,e==null?void 0:e.in),r=n.getMonth();return n.setFullYear(n.getFullYear(),r+1,0),n.setHours(23,59,59,999),n}function IJ(t,e,n){const r=+nt(t,n==null?void 0:n.in),[i,a]=[+nt(e.start,n==null?void 0:n.in),+nt(e.end,n==null?void 0:n.in)].sort((s,o)=>s-o);return r>=i&&r<=a}const DJ={y:{sectionType:"year",contentType:"digit",maxLength:4},yy:"year",yyy:{sectionType:"year",contentType:"digit",maxLength:4},yyyy:"year",M:{sectionType:"month",contentType:"digit",maxLength:2},MM:"month",MMMM:{sectionType:"month",contentType:"letter"},MMM:{sectionType:"month",contentType:"letter"},L:{sectionType:"month",contentType:"digit",maxLength:2},LL:"month",LLL:{sectionType:"month",contentType:"letter"},LLLL:{sectionType:"month",contentType:"letter"},d:{sectionType:"day",contentType:"digit",maxLength:2},dd:"day",do:{sectionType:"day",contentType:"digit-with-letter"},E:{sectionType:"weekDay",contentType:"letter"},EE:{sectionType:"weekDay",contentType:"letter"},EEE:{sectionType:"weekDay",contentType:"letter"},EEEE:{sectionType:"weekDay",contentType:"letter"},EEEEE:{sectionType:"weekDay",contentType:"letter"},i:{sectionType:"weekDay",contentType:"digit",maxLength:1},ii:"weekDay",iii:{sectionType:"weekDay",contentType:"letter"},iiii:{sectionType:"weekDay",contentType:"letter"},e:{sectionType:"weekDay",contentType:"digit",maxLength:1},ee:"weekDay",eee:{sectionType:"weekDay",contentType:"letter"},eeee:{sectionType:"weekDay",contentType:"letter"},eeeee:{sectionType:"weekDay",contentType:"letter"},eeeeee:{sectionType:"weekDay",contentType:"letter"},c:{sectionType:"weekDay",contentType:"digit",maxLength:1},cc:"weekDay",ccc:{sectionType:"weekDay",contentType:"letter"},cccc:{sectionType:"weekDay",contentType:"letter"},ccccc:{sectionType:"weekDay",contentType:"letter"},cccccc:{sectionType:"weekDay",contentType:"letter"},a:"meridiem",aa:"meridiem",aaa:"meridiem",H:{sectionType:"hours",contentType:"digit",maxLength:2},HH:"hours",h:{sectionType:"hours",contentType:"digit",maxLength:2},hh:"hours",m:{sectionType:"minutes",contentType:"digit",maxLength:2},mm:"minutes",s:{sectionType:"seconds",contentType:"digit",maxLength:2},ss:"seconds"},RJ={year:"yyyy",month:"LLLL",monthShort:"MMM",dayOfMonth:"d",dayOfMonthFull:"do",weekday:"EEEE",weekdayShort:"EEEEEE",hours24h:"HH",hours12h:"hh",meridiem:"aa",minutes:"mm",seconds:"ss",fullDate:"PP",keyboardDate:"P",shortDate:"MMM d",normalDate:"d MMMM",normalDateWithWeekday:"EEE, MMM d",fullTime12h:"hh:mm aa",fullTime24h:"HH:mm",keyboardDateTime12h:"P hh:mm aa",keyboardDateTime24h:"P HH:mm"};class OJ{constructor(e){xe(this,"isMUIAdapter",!0);xe(this,"isTimezoneCompatible",!1);xe(this,"formatTokenMap",DJ);xe(this,"escapedCharacters",{start:"'",end:"'"});xe(this,"date",e=>typeof e>"u"?new Date:e===null?null:new Date(e));xe(this,"getInvalidDate",()=>new Date("Invalid Date"));xe(this,"getTimezone",()=>"default");xe(this,"setTimezone",e=>e);xe(this,"toJsDate",e=>e);xe(this,"getCurrentLocaleCode",()=>this.locale.code);xe(this,"is12HourCycleInCurrentLocale",()=>/a/.test(this.locale.formatLong.time({width:"short"})));xe(this,"expandFormat",e=>{const n=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g;return e.match(n).map(r=>{const i=r[0];if(i==="p"||i==="P"){const a=this.longFormatters[i];return a(r,this.locale.formatLong)}return r}).join("")});xe(this,"formatNumber",e=>e);xe(this,"getDayOfWeek",e=>e.getDay()+1);const{locale:n,formats:r,longFormatters:i,lib:a}=e;this.locale=n,this.formats=H({},RJ,r),this.longFormatters=i,this.lib=a||"date-fns"}}class MJ extends OJ{constructor({locale:n,formats:r}={}){super({locale:n??j_,formats:r,longFormatters:c1});xe(this,"parse",(n,r)=>n===""?null:yJ(n,r,new Date,{locale:this.locale}));xe(this,"isValid",n=>n==null?!1:$P(n));xe(this,"format",(n,r)=>this.formatByString(n,this.formats[r]));xe(this,"formatByString",(n,r)=>oZ(n,r,{locale:this.locale}));xe(this,"isEqual",(n,r)=>n===null&&r===null?!0:n===null||r===null?!1:mZ(n,r));xe(this,"isSameYear",(n,r)=>vZ(n,r));xe(this,"isSameMonth",(n,r)=>xZ(n,r));xe(this,"isSameDay",(n,r)=>yZ(n,r));xe(this,"isSameHour",(n,r)=>wZ(n,r));xe(this,"isAfter",(n,r)=>p2(n,r));xe(this,"isAfterYear",(n,r)=>p2(n,jD(r)));xe(this,"isAfterDay",(n,r)=>p2(n,FD(r)));xe(this,"isBefore",(n,r)=>g2(n,r));xe(this,"isBeforeYear",(n,r)=>g2(n,this.startOfYear(r)));xe(this,"isBeforeDay",(n,r)=>g2(n,this.startOfDay(r)));xe(this,"isWithinRange",(n,[r,i])=>IJ(n,{start:r,end:i}));xe(this,"startOfYear",n=>FP(n));xe(this,"startOfMonth",n=>CJ(n));xe(this,"startOfWeek",n=>Ro(n,{locale:this.locale}));xe(this,"startOfDay",n=>O0(n));xe(this,"endOfYear",n=>jD(n));xe(this,"endOfMonth",n=>TJ(n));xe(this,"endOfWeek",n=>pQ(n,{locale:this.locale}));xe(this,"endOfDay",n=>FD(n));xe(this,"addYears",(n,r)=>fQ(n,r));xe(this,"addMonths",(n,r)=>LP(n,r));xe(this,"addWeeks",(n,r)=>dQ(n,r));xe(this,"addDays",(n,r)=>_y(n,r));xe(this,"addHours",(n,r)=>uQ(n,r));xe(this,"addMinutes",(n,r)=>cQ(n,r));xe(this,"addSeconds",(n,r)=>lQ(n,r));xe(this,"getYear",n=>gZ(n));xe(this,"getMonth",n=>fZ(n));xe(this,"getDate",n=>cZ(n));xe(this,"getHours",n=>uZ(n));xe(this,"getMinutes",n=>dZ(n));xe(this,"getSeconds",n=>hZ(n));xe(this,"getMilliseconds",n=>pZ(n));xe(this,"setYear",(n,r)=>SJ(n,r));xe(this,"setMonth",(n,r)=>_J(n,r));xe(this,"setDate",(n,r)=>xJ(n,r));xe(this,"setHours",(n,r)=>wJ(n,r));xe(this,"setMinutes",(n,r)=>bJ(n,r));xe(this,"setSeconds",(n,r)=>AJ(n,r));xe(this,"setMilliseconds",(n,r)=>EJ(n,r));xe(this,"getDaysInMonth",n=>GP(n));xe(this,"getWeekArray",n=>{const r=this.startOfWeek(this.startOfMonth(n)),i=this.endOfWeek(this.endOfMonth(n));let a=0,s=r;const o=[];for(;this.isBefore(s,i);){const c=Math.floor(a/7);o[c]=o[c]||[],o[c].push(s),s=this.addDays(s,1),a+=1}return o});xe(this,"getWeekNumber",n=>U_(n,{locale:this.locale}));xe(this,"getYearRange",([n,r])=>{const i=this.startOfYear(n),a=this.endOfYear(r),s=[];let o=i;for(;this.isBefore(o,a);)s.push(o),o=this.addYears(o,1);return s})}}const PJ={lessThanXSeconds:{one:"1",other:"{{count}}",oneWithSuffix:"1",otherWithSuffix:"{{count}}"},xSeconds:{one:"1",other:"{{count}}"},halfAMinute:"30",lessThanXMinutes:{one:"1",other:"{{count}}",oneWithSuffix:"1",otherWithSuffix:"{{count}}"},xMinutes:{one:"1",other:"{{count}}"},aboutXHours:{one:"1",other:"{{count}}"},xHours:{one:"1",other:"{{count}}"},xDays:{one:"1",other:"{{count}}"},aboutXWeeks:{one:"1",other:"{{count}}"},xWeeks:{one:"1",other:"{{count}}"},aboutXMonths:{one:"1",other:"{{count}}"},xMonths:{one:"1",other:"{{count}}"},aboutXYears:{one:"1",other:"{{count}}"},xYears:{one:"1",other:"{{count}}"},overXYears:{one:"1",other:"{{count}}"},almostXYears:{one:"1",other:"{{count}}"}},kJ=(t,e,n)=>{n=n||{};let r;const i=PJ[t];return typeof i=="string"?r=i:e===1?n.addSuffix&&i.oneWithSuffix?r=i.oneWithSuffix:r=i.one:n.addSuffix&&i.otherWithSuffix?r=i.otherWithSuffix.replace("{{count}}",String(e)):r=i.other.replace("{{count}}",String(e)),n.addSuffix?n.comparison&&n.comparison>0?r+"":r+"":r},NJ={full:"yMdEEEE",long:"yMd",medium:"y/MM/dd",short:"y/MM/dd"},LJ={full:"Hmmss zzzz",long:"H:mm:ss z",medium:"H:mm:ss",short:"H:mm"},BJ={full:"{{date}} {{time}}",long:"{{date}} {{time}}",medium:"{{date}} {{time}}",short:"{{date}} {{time}}"},FJ={date:Vd({formats:NJ,defaultWidth:"full"}),time:Vd({formats:LJ,defaultWidth:"full"}),dateTime:Vd({formats:BJ,defaultWidth:"full"})},jJ={lastWeek:"eeeep",yesterday:"p",today:"p",tomorrow:"p",nextWeek:"eeeep",other:"P"},VJ=(t,e,n,r)=>jJ[t],UJ={narrow:["BC","AC"],abbreviated:["",""],wide:["",""]},HJ={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1","2","3","4"]},zJ={narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],abbreviated:["1","2","3","4","5","6","7","8","9","10","11","12"],wide:["1","2","3","4","5","6","7","8","9","10","11","12"]},$J={narrow:["","","","","","",""],short:["","","","","","",""],abbreviated:["","","","","","",""],wide:["","","","","","",""]},GJ={narrow:{am:"",pm:"",midnight:"",noon:"",morning:"",afternoon:"",evening:"",night:""},abbreviated:{am:"",pm:"",midnight:"",noon:"",morning:"",afternoon:"",evening:"",night:""},wide:{am:"",pm:"",midnight:"",noon:"",morning:"",afternoon:"",evening:"",night:""}},WJ={narrow:{am:"",pm:"",midnight:"",noon:"",morning:"",afternoon:"",evening:"",night:""},abbreviated:{am:"",pm:"",midnight:"",noon:"",morning:"",afternoon:"",evening:"",night:""},wide:{am:"",pm:"",midnight:"",noon:"",morning:"",afternoon:"",evening:"",night:""}},YJ=(t,e)=>{const n=Number(t);switch(String(e==null?void 0:e.unit)){case"year":return`${n}`;case"quarter":return`${n}`;case"month":return`${n}`;case"week":return`${n}`;case"date":return`${n}`;case"hour":return`${n}`;case"minute":return`${n}`;case"second":return`${n}`;default:return`${n}`}},qJ={ordinalNumber:YJ,era:As({values:UJ,defaultWidth:"wide"}),quarter:As({values:HJ,defaultWidth:"wide",argumentCallback:t=>Number(t)-1}),month:As({values:zJ,defaultWidth:"wide"}),day:As({values:$J,defaultWidth:"wide"}),dayPeriod:As({values:GJ,defaultWidth:"wide",formattingValues:WJ,defaultFormattingWidth:"wide"})},XJ=/^?\d+(|||||||)?/i,KJ=/\d+/i,QJ={narrow:/^(B\.?C\.?|A\.?D\.?)/i,abbreviated:/^([]|)/i,wide:/^([]|)/i},ZJ={narrow:[/^B/i,/^A/i],any:[/^()/i,/^(|)/i]},JJ={narrow:/^[1234]/i,abbreviated:/^Q[1234]/i,wide:/^[1234]/i},eee={any:[/(1||)/i,/(2||)/i,/(3||)/i,/(4||)/i]},tee={narrow:/^([123456789]|1[012])/,abbreviated:/^([123456789]|1[012])/i,wide:/^([123456789]|1[012])/i},nee={any:[/^1\D/,/^2/,/^3/,/^4/,/^5/,/^6/,/^7/,/^8/,/^9/,/^10/,/^11/,/^12/]},ree={narrow:/^[]/,short:/^[]/,abbreviated:/^[]/,wide:/^[]/},iee={any:[/^/,/^/,/^/,/^/,/^/,/^/,/^/]},aee={any:/^(AM|PM|||||||)/i},see={any:{am:/^(A|)/i,pm:/^(P|)/i,midnight:/^|/i,noon:/^/i,morning:/^/i,afternoon:/^/i,evening:/^/i,night:/^/i}},oee={ordinalNumber:BP({matchPattern:XJ,parsePattern:KJ,valueCallback:function(t){return parseInt(t,10)}}),era:Es({matchPatterns:QJ,defaultMatchWidth:"wide",parsePatterns:ZJ,defaultParseWidth:"any"}),quarter:Es({matchPatterns:JJ,defaultMatchWidth:"wide",parsePatterns:eee,defaultParseWidth:"any",valueCallback:t=>t+1}),month:Es({matchPatterns:tee,defaultMatchWidth:"wide",parsePatterns:nee,defaultParseWidth:"any"}),day:Es({matchPatterns:ree,defaultMatchWidth:"wide",parsePatterns:iee,defaultParseWidth:"any"}),dayPeriod:Es({matchPatterns:aee,defaultMatchWidth:"any",parsePatterns:see,defaultParseWidth:"any"})},lee={code:"ja",formatDistance:kJ,formatLong:FJ,formatRelative:VJ,localize:qJ,match:oee,options:{weekStartsOn:0,firstWeekContainsDate:1}};function cee(){return{validate:O.useCallback((e,n,r,i=[])=>{if(!e)throw new Error("");if(e>new Date)throw new Error("");if(!e1(n))throw new Error("");if((i||[]).some(o=>{var d;const c=(d=o==null?void 0:o.changedAt)!=null&&d.toDate?o.changedAt.toDate():o!=null&&o.changedAt?new Date(o.changedAt):null;return c?Math.abs(c-e)<6e4:!1}))throw new Error("")},[])}}const uee=({open:t,onClose:e,onAdd:n,bookId:r,existingHistory:i=[],currentBookStatus:a=null})=>{const[s,o]=O.useState(new Date),[c,d]=O.useState(ft.READING),[f,p]=O.useState(""),[g,m]=O.useState(!1),[x,b]=O.useState(""),{validate:A}=cee(),E=()=>Object.values(ft).filter(I=>I!==c);wi.useEffect(()=>{f===c&&p("")},[c,f]),wi.useEffect(()=>{t&&p(a&&a!==c?a:"")},[t,a,c]);const S=async()=>{b(""),m(!0);try{A(s,c,f,i),await n(s,c,f,i),T()}catch(I){b(I.message)}finally{m(!1)}},T=()=>{o(new Date),d(ft.READING),p(""),b(""),m(!1),e()};return v.jsx(AM,{dateAdapter:MJ,adapterLocale:lee,children:v.jsxs(Ni,{open:t,onClose:T,maxWidth:"sm",fullWidth:!0,children:[v.jsx(Yi,{children:" "}),v.jsx(Li,{children:v.jsxs(re,{sx:{display:"flex",flexDirection:"column",gap:2,mt:1},children:[v.jsx(aQ,{label:"",value:s,onChange:I=>o(I),maxDateTime:new Date,slotProps:{textField:{fullWidth:!0}}}),v.jsxs(ki,{fullWidth:!0,children:[v.jsx(Ta,{children:""}),v.jsx(Xa,{value:c,onChange:I=>d(I.target.value),label:"",children:Object.entries(T0).map(([I,P])=>v.jsx(Zt,{value:I,children:P},I))})]}),v.jsxs(ki,{fullWidth:!0,children:[v.jsx(Ta,{children:""}),v.jsxs(Xa,{value:f,onChange:I=>p(I.target.value),label:"",children:[v.jsx(Zt,{value:"",children:v.jsx("em",{children:""})}),E().map(I=>v.jsx(Zt,{value:I,children:T0[I]},I))]})]}),x&&v.jsx(te,{color:"error",variant:"body2",children:x})]})}),v.jsxs(Bi,{children:[v.jsx(ze,{onClick:T,disabled:g,children:""}),v.jsx(ze,{onClick:S,variant:"contained",disabled:g,children:g?"...":""})]})]})})},dee=({history:t=[],loading:e=!1,error:n=null,importantDates:r={},readingDuration:i=null,showAddButton:a=!1,bookId:s=null,onAddHistory:o=null,currentBookStatus:c=null})=>{const[d,f]=O.useState(!1),p=async(b,A,E,S)=>{o&&await o(b,A,E,S)},g=b=>{switch(b){case ft.TSUNDOKU:return v.jsx(GC,{});case ft.READING:return v.jsx(l5,{});case ft.RE_READING:return v.jsx(o5,{});case ft.FINISHED:return v.jsx(s5,{});default:return v.jsx(GC,{})}},m=b=>b?(b.toDate?b.toDate():new Date(b)).toLocaleDateString("ja-JP",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"",x=()=>!r||Object.keys(r).length===0?null:v.jsxs(re,{sx:{mb:3},children:[v.jsx(te,{variant:"h6",gutterBottom:!0,children:""}),v.jsxs(Xn,{sx:{p:2,mb:2},children:[r.readingStartedAt&&v.jsxs(re,{sx:{mb:1},children:[v.jsx(te,{variant:"body2",color:"text.secondary",children:""}),v.jsx(te,{variant:"body1",children:m(r.readingStartedAt)})]}),r.reReadingStartedAt&&v.jsxs(re,{sx:{mb:1},children:[v.jsx(te,{variant:"body2",color:"text.secondary",children:""}),v.jsx(te,{variant:"body1",children:m(r.reReadingStartedAt)})]}),r.finishedAt&&v.jsxs(re,{sx:{mb:1},children:[v.jsx(te,{variant:"body2",color:"text.secondary",children:""}),v.jsx(te,{variant:"body1",children:m(r.finishedAt)})]}),i&&v.jsxs(re,{children:[v.jsx(te,{variant:"body2",color:"text.secondary",children:""}),v.jsxs(te,{variant:"body1",children:[i,""]})]})]})]});return e?v.jsx(Bo,{variant:"inline",message:"...","data-testid":"status-history-loading"}):n?v.jsx(re,{sx:{p:2},children:v.jsxs(te,{color:"error",children:[": ",n]})}):v.jsxs(re,{sx:{p:2},children:[x(),v.jsxs(re,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[v.jsx(te,{variant:"h6",children:""}),a&&v.jsx(ze,{variant:"outlined",size:"small",startIcon:v.jsx(_R,{}),onClick:()=>f(!0),"data-testid":"add-history-button",children:""})]}),(!t||t.length===0)&&v.jsxs(re,{sx:{textAlign:"center",py:4},children:[v.jsx(te,{variant:"body1",color:"text.secondary",gutterBottom:!0,children:""}),v.jsx(te,{variant:"body2",color:"text.secondary",children:""})]}),v.jsx(ab,{children:(t||[]).map((b,A)=>v.jsxs(sb,{sx:{flexDirection:"column",alignItems:"flex-start"},children:[v.jsxs(re,{sx:{display:"flex",alignItems:"center",gap:1,mb:1,width:"100%"},children:[v.jsx(dm,{sx:{minWidth:"auto"},children:v.jsx(AR,{sx:{bgcolor:bs(b.status)==="primary"?"primary.main":bs(b.status)==="secondary"?"secondary.main":bs(b.status)==="success"?"success.main":"default",width:32,height:32},children:g(b.status)})}),v.jsxs(re,{sx:{flexGrow:1},children:[v.jsxs(re,{sx:{display:"flex",alignItems:"center",gap:1,mb:1},children:[v.jsx(dn,{label:Us(b.status),color:bs(b.status),size:"small"}),b.previousStatus&&v.jsxs(v.Fragment,{children:[v.jsx(te,{variant:"body2",color:"text.secondary",children:""}),v.jsx(dn,{label:Us(b.previousStatus),color:bs(b.previousStatus),size:"small",variant:"outlined"})]})]}),v.jsx(te,{variant:"body2",color:"text.secondary",children:m(b.changedAt)}),b.notes&&v.jsx(te,{variant:"body2",color:"text.secondary",sx:{mt:1},children:b.notes})]})]}),A<t.length-1&&v.jsx(_o,{sx:{width:"100%",mt:1}})]},b.id))}),a&&v.jsx(uee,{open:d,onClose:()=>f(!1),onAdd:p,bookId:s,existingHistory:t,currentBookStatus:c})]})},fee=({bookId:t})=>{const{latestHistory:e,loading:n,error:r}=__(t);if(n)return v.jsxs(Xn,{sx:{p:2,mb:2},children:[v.jsx(te,{variant:"h6",gutterBottom:!0,children:" "}),v.jsx(zh,{variant:"rectangular",height:40})]});if(r)return v.jsxs(Xn,{sx:{p:2,mb:2},children:[v.jsx(te,{variant:"h6",gutterBottom:!0,children:" "}),v.jsx(te,{color:"error",children:""})]});if(!e)return v.jsxs(Xn,{sx:{p:2,mb:2},children:[v.jsx(te,{variant:"h6",gutterBottom:!0,children:" "}),v.jsx(te,{color:"text.secondary",children:""})]});const i=a=>a?(a.toDate?a.toDate():new Date(a)).toLocaleDateString("ja-JP",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}):"";return v.jsxs(Xn,{sx:{p:2,mb:2},children:[v.jsx(te,{variant:"h6",gutterBottom:!0,children:" "}),v.jsxs(re,{sx:{display:"flex",alignItems:"center",gap:1,flexWrap:"wrap"},children:[v.jsx(te,{variant:"body2",color:"text.secondary",children:i(e.changedAt)}),v.jsx(dn,{label:Us(e.status),color:bs(e.status),size:"small"}),e.previousStatus&&v.jsxs(v.Fragment,{children:[v.jsx(te,{variant:"body2",color:"text.secondary",children:""}),v.jsx(dn,{label:Us(e.previousStatus),color:bs(e.previousStatus),size:"small",variant:"outlined"})]})]})]})},hee=t=>{const{user:e}=jn(),n=O.useContext(Pr),r=(n==null?void 0:n.setGlobalError)||(()=>{}),[i,a]=O.useState(null),[s,o]=O.useState(!0),[c,d]=O.useState(null),f=O.useCallback(async()=>{if(!e||!t){o(!1);return}try{o(!0),d(null);const b=ai(vt,"books",t),A=await _m(b);A.exists()&&A.data().userId===e.uid?a({id:A.id,...A.data()}):(console.error("No such document or access denied!"),r(""),a(null),d(""))}catch(b){console.error("Error fetching document:",b),r(""),d("")}finally{o(!1)}},[t,e]),p=O.useCallback(async b=>{if(!e||!t)throw new Error("ID");try{const A=ai(vt,"books",t);return await cy(A,{...b,updatedAt:ir()}),a(E=>({...E,...b})),!0}catch(A){throw console.error("Error updating book:",A),r(""),A}},[t,e]),g=O.useCallback(async b=>await p({status:b}),[p]),m=O.useCallback(async b=>await p({tags:b}),[p]),x=O.useCallback(async()=>{if(!e||!t)throw new Error("ID");try{const b=Gn(vt,"books",t,"memos");if(!(await Hn(b)).empty){const S="";throw r(S),new Error(S)}const E=ai(vt,"books",t);return await XO(E),a(null),!0}catch(b){throw console.error("Error deleting book:",b),b.message.includes("")||r(""),b}},[t,e,r]);return O.useEffect(()=>{f()},[f]),{book:i,loading:s,error:c,fetchBook:f,updateBook:p,updateBookStatus:g,updateBookTags:m,deleteBook:x}},Qg=t=>t&&typeof t.toDate=="function"?t.toDate():t instanceof Date?t:new Date(t),pee=(t,e,n)=>({handleAddManualHistory:O.useCallback(async(i,a,s,o=[])=>{try{await e(i,a,s),xt.status.info("Manual history added successfully");const c=[...o],d={status:a,previousStatus:s,changedAt:i};c.push(d),c.sort((p,g)=>Qg(g.changedAt)-Qg(p.changedAt));const f=c.length>0&&Qg(c[0].changedAt).getTime()===Qg(i).getTime();if(!t)return;f&&a!==t.status&&await n(a)}catch(c){throw xt.status.error("Failed to add manual history",c),c}},[t,e,n])}),KP=()=>{const t=No(),e=au(),n=O.useCallback(()=>{const{returnPath:a,searchState:s}=e.state||{};a&&s?t(a,{state:{restoreSearch:s}}):t(-1)},[t,e.state]),r=O.useCallback(()=>{t(1)},[t]),i=O.useCallback(a=>{console.log("Restoring search state:",a)},[]);return{handleBack:n,handleForward:r,restoreSearchState:i,location:e}},gee=()=>{const{id:t}=M5();au();const e=No(),{book:n,loading:r,error:i,updateBook:a,updateBookStatus:s,updateBookTags:o,deleteBook:c}=hee(t),{history:d,loading:f,error:p,addManualStatusHistory:g,getImportantDates:m,getReadingDuration:x}=__(t),{handleAddManualHistory:b}=pee(n,g,s);KP();const[A,E]=O.useState(0),[S,T]=O.useState(!1),[I,P]=O.useState(!1),[F,M]=O.useState(!1),[D,R]=O.useState(0),B=Se=>{s(Se)},N=Se=>{o(Se)},k=()=>{E(Se=>Se+1),T(!1)},j=()=>{E(Se=>Se+1)},q=()=>{T(!0)},X=()=>{T(!1)},G=()=>{P(!0)},W=()=>{P(!1)},K=async Se=>{await a(Se)},Z=()=>{M(!0)},fe=()=>{M(!1)},me=async()=>{try{await c(),e("/")}catch(Se){console.error(":",Se)}finally{M(!1)}},ve=(Se,J)=>{R(J)},be=()=>{switch(D){case 0:return v.jsxs(v.Fragment,{children:[v.jsx(te,{variant:"h5",gutterBottom:!0,sx:{mb:{xs:1,sm:2}},"data-testid":"memo-list-title",children:""}),v.jsx(CG,{bookId:n.id,onMemoUpdated:j},A)]});case 1:return v.jsx(dee,{history:d,loading:f,error:p,importantDates:m(),readingDuration:x(),showAddButton:!0,bookId:t,onAddHistory:b,currentBookStatus:n==null?void 0:n.status});default:return null}};if(r)return v.jsx(Bo,{variant:"fullPage",message:"...","data-testid":"book-detail-loading"});if(i)return console.error(" BookDetail error:",i),v.jsxs("div",{"data-testid":"book-detail-error",children:[": ",i]});if(!n)return console.warn(" BookDetail: Book not found for ID:",t),v.jsx("div",{"data-testid":"book-detail-not-found",children:""});const Me=di(),ge=uy(Me,{hover:!1,overrides:{position:"relative",overflow:"visible"}}),{key:Le}=dy(Me),Ne=c_(Me);return v.jsxs(re,{sx:{maxWidth:800,mx:"auto",mt:{xs:2,sm:4},pb:"80px",px:{xs:2,sm:0}},"data-testid":"book-detail",children:[v.jsxs(Xn,{sx:ge,children:[Ne.corners&&v.jsxs(v.Fragment,{children:[v.jsx(Ts,{position:"top-left",size:20,accentKey:Le}),v.jsx(Ts,{position:"top-right",size:20,accentKey:Le})]}),v.jsxs(re,{sx:{position:"relative",zIndex:1,p:{xs:2,sm:3}},children:[v.jsx(BG,{book:n,bookId:t,onStatusChange:B,onEdit:G}),v.jsx(fee,{bookId:t}),v.jsx(VG,{book:n,bookId:t,onTagsChange:N}),v.jsx(re,{sx:{textAlign:"left",mt:2,mb:2},children:v.jsxs(Fs,{direction:"row",spacing:1,children:[v.jsx(ze,{variant:"outlined",color:"primary",size:"small",startIcon:v.jsx(p0,{}),onClick:G,"data-testid":"book-edit-button",children:""}),v.jsx(ze,{variant:"outlined",color:"error",size:"small",startIcon:v.jsx(Im,{}),onClick:Z,"data-testid":"book-delete-button",children:""})]})}),v.jsx(_o,{sx:{my:{xs:1,sm:2}}}),v.jsx(re,{sx:{borderBottom:1,borderColor:"divider",mb:2},children:v.jsxs(N1,{value:D,onChange:ve,"aria-label":"book detail tabs","data-testid":"book-detail-tabs",children:[v.jsx(Sa,{label:"","data-testid":"memo-list-tab"}),v.jsx(Sa,{label:"","data-testid":"status-history-tab"})]})}),be()]})]}),v.jsx(c5,{color:"primary","aria-label":"",sx:{position:"fixed",bottom:{xs:80,sm:88},right:{xs:16,sm:16}},onClick:q,"data-testid":"memo-add-fab",children:v.jsx(_R,{})}),v.jsx(Ni,{open:S,onClose:X,maxWidth:"sm",fullWidth:!0,"data-testid":"memo-add-dialog",children:v.jsx(RG,{bookId:n.id,bookTags:n.tags||[],onMemoAdded:k,onClose:X})}),v.jsx(jG,{open:I,book:n,onClose:W,onSave:K}),v.jsxs(Ni,{open:F,onClose:fe,"data-testid":"book-delete-dialog",children:[v.jsx(Yi,{"data-testid":"book-delete-confirm-title",children:""}),v.jsxs(Li,{children:[v.jsx(te,{children:""}),v.jsx(te,{variant:"body2",color:"text.secondary",sx:{mt:1},children:""})]}),v.jsxs(Bi,{children:[v.jsx(ze,{onClick:fe,"data-testid":"book-delete-cancel-button",children:""}),v.jsx(ze,{onClick:me,color:"error",variant:"contained","data-testid":"book-delete-confirm-button",children:""})]})]})]})};function m2({children:t,value:e,index:n,...r}){return v.jsx("div",{role:"tabpanel",hidden:e!==n,id:`tabpanel-${n}`,"aria-labelledby":`tab-${n}`,...r,children:e===n&&v.jsx(re,{sx:{p:3},children:t})})}const mee=t=>{const[e,n]=O.useState({}),[r,i]=O.useState(!1),[a,s]=O.useState(null),o=O.useCallback(async()=>{if(t!=null&&t.uid)try{i(!0),s(null),console.log("useTagStats: , userId:",t.uid);const[p,g]=await Promise.all([Hn(Ln(Gn(vt,"books"),vn("userId","==",t.uid))),Hn(Ln(Il(vt,"memos"),vn("userId","==",t.uid)))]);console.log("useTagStats: , :",p.size,":",g.size);const m={};p.forEach(x=>{const b=x.data();console.log("useTagStats: :",{id:x.id,title:b.title,tags:b.tags}),b.tags&&Array.isArray(b.tags)&&b.tags.forEach(A=>{var S,T;m[A]||(m[A]={bookCount:0,memoCount:0,lastUsed:null}),m[A].bookCount++;const E=((T=(S=b.updatedAt)==null?void 0:S.toDate)==null?void 0:T.call(S))||new Date;(!m[A].lastUsed||E>m[A].lastUsed)&&(m[A].lastUsed=E)})}),console.log("useTagStats: "),g.forEach(x=>{var A,E;const b=x.data();console.log("useTagStats: :",{id:x.id,bookId:(A=x.ref.parent.parent)==null?void 0:A.id,tags:b.tags,text:((E=b.text)==null?void 0:E.substring(0,30))+"..."}),b.tags&&Array.isArray(b.tags)&&b.tags.forEach(S=>{var I,P;m[S]||(m[S]={bookCount:0,memoCount:0,lastUsed:null}),m[S].memoCount++;const T=((P=(I=b.updatedAt)==null?void 0:I.toDate)==null?void 0:P.call(I))||new Date;(!m[S].lastUsed||T>m[S].lastUsed)&&(m[S].lastUsed=T)})}),console.log("useTagStats: , :",m),n(m),console.log("useTagStats: ")}catch(p){console.error(":",p),s(p)}finally{i(!1)}},[t==null?void 0:t.uid]),c=O.useCallback((p="count",g="desc")=>Object.entries(e).map(([x,b])=>({tag:x,...b,totalCount:b.bookCount+b.memoCount,type:b.bookCount>0&&b.memoCount>0?"both":b.bookCount>0?"book":"memo"})).sort((x,b)=>{let A=0;switch(p){case"count":A=b.totalCount-x.totalCount;break;case"name":A=x.tag.localeCompare(b.tag,"ja");break;case"lastUsed":A=(b.lastUsed||0)-(x.lastUsed||0);break;default:A=b.totalCount-x.totalCount}return g==="asc"?-A:A}),[e]),d=O.useCallback(p=>e[p]||null,[e]),f=O.useCallback(()=>{n({}),s(null)},[]);return O.useEffect(()=>{t!=null&&t.uid?o():f()},[t==null?void 0:t.uid,o,f]),{tagStats:e,loading:r,error:a,fetchTagStats:o,getSortedTagStats:c,getTagStat:d,clearStats:f}};function xl(t){var e,n;if(t==null)return"";try{return(((n=(e=String(t)).normalize)==null?void 0:n.call(e,"NFKC"))??String(t)).trim().replace(/\s+/g," ").toLowerCase()}catch{return String(t).trim().toLowerCase()}}function yee(){const{user:t}=jn(),e=O.useContext(Pr),n=(e==null?void 0:e.setGlobalError)||(()=>{}),[r,i]=O.useState(!1),a=async(f,p)=>{for(let m=0;m<f.length;m+=450){const x=f.slice(m,m+450),b=JV(vt);x.forEach(A=>p(b,A)),await b.commit()}},s=O.useCallback(async(f,p)=>{if(!(t!=null&&t.uid))throw new Error("");const g=xl(f),m=xl(p);if(!g||!m)throw new Error("");if(g===m)return{booksUpdated:0,memosUpdated:0};i(!0);try{const x=Ln(Gn(vt,"books"),vn("userId","==",t.uid)),b=await Hn(x),A=[];b.forEach(I=>{const P=I.data(),F=Array.isArray(P.tags)?P.tags:[];if(F.includes(g)){const M=Array.from(new Set(F.map(D=>D===g?m:D)));A.push({ref:I.ref,tags:M})}});const E=Ln(Il(vt,"memos"),vn("userId","==",t.uid)),S=await Hn(E),T=[];return S.forEach(I=>{const P=I.data(),F=Array.isArray(P.tags)?P.tags:[];if(F.includes(g)){const M=Array.from(new Set(F.map(D=>D===g?m:D)));T.push({ref:I.ref,tags:M})}}),await a(A,(I,P)=>{I.update(P.ref,{tags:P.tags})}),await a(T,(I,P)=>{I.update(P.ref,{tags:P.tags})}),{booksUpdated:A.length,memosUpdated:T.length}}catch(x){throw console.error(":",x),n(""),x}finally{i(!1)}},[t==null?void 0:t.uid]),o=O.useCallback(async f=>{if(!(t!=null&&t.uid))throw new Error("");const p=xl(f);if(!p)throw new Error("");i(!0);try{const g=Ln(Gn(vt,"books"),vn("userId","==",t.uid)),m=await Hn(g),x=[];m.forEach(S=>{const T=S.data(),I=Array.isArray(T.tags)?T.tags:[];if(I.includes(p)){const P=I.filter(F=>F!==p);x.push({ref:S.ref,tags:P})}});const b=Ln(Il(vt,"memos"),vn("userId","==",t.uid)),A=await Hn(b),E=[];return A.forEach(S=>{const T=S.data(),I=Array.isArray(T.tags)?T.tags:[];if(I.includes(p)){const P=I.filter(F=>F!==p);E.push({ref:S.ref,tags:P})}}),await a(x,(S,T)=>{S.update(T.ref,{tags:T.tags})}),await a(E,(S,T)=>{S.update(T.ref,{tags:T.tags})}),{booksUpdated:x.length,memosUpdated:E.length}}catch(g){throw console.error(":",g),n(""),g}finally{i(!1)}},[t==null?void 0:t.uid]),c=O.useCallback(async f=>{if(!(t!=null&&t.uid))throw new Error("");const p=new Set((Array.isArray(f)?f:String(f||"").split(",")).map(g=>xl(g)).filter(g=>!!g));if(p.size===0)throw new Error("");i(!0);try{const g=Ln(Gn(vt,"books"),vn("userId","==",t.uid)),m=await Hn(g),x=[];m.forEach(S=>{const T=S.data(),I=Array.isArray(T.tags)?T.tags:[],P=I.filter(F=>!p.has(xl(F)));P.length!==I.length&&x.push({ref:S.ref,tags:P})});const b=Ln(Il(vt,"memos"),vn("userId","==",t.uid)),A=await Hn(b),E=[];return A.forEach(S=>{const T=S.data(),I=Array.isArray(T.tags)?T.tags:[],P=I.filter(F=>!p.has(xl(F)));P.length!==I.length&&E.push({ref:S.ref,tags:P})}),await a(x,(S,T)=>{S.update(T.ref,{tags:T.tags})}),await a(E,(S,T)=>{S.update(T.ref,{tags:T.tags})}),{booksUpdated:x.length,memosUpdated:E.length}}catch(g){throw console.error(":",g),n(""),g}finally{i(!1)}},[t==null?void 0:t.uid]),d=O.useCallback(async(f,p)=>{if(!(t!=null&&t.uid))throw new Error("");const g=xl(p),m=Array.from(new Set(String(f||"").split(",").map(x=>xl(x)).filter(x=>!!x)));if(!g||m.length===0)throw new Error("");if(m.includes(g))throw new Error("");i(!0);try{const x=Ln(Gn(vt,"books"),vn("userId","==",t.uid)),b=await Hn(x),A=[];b.forEach(I=>{const P=I.data(),F=Array.isArray(P.tags)?P.tags:[];if(F.some(D=>m.includes(D))){const D=F.filter(B=>!m.includes(B)),R=Array.from(new Set([...D,g]));R.join("|")!==F.join("|")&&A.push({ref:I.ref,tags:R})}});const E=Ln(Il(vt,"memos"),vn("userId","==",t.uid)),S=await Hn(E),T=[];return S.forEach(I=>{const P=I.data(),F=Array.isArray(P.tags)?P.tags:[];if(F.some(D=>m.includes(D))){const D=F.filter(B=>!m.includes(B)),R=Array.from(new Set([...D,g]));R.join("|")!==F.join("|")&&T.push({ref:I.ref,tags:R})}}),await a(A,(I,P)=>{I.update(P.ref,{tags:P.tags})}),await a(T,(I,P)=>{I.update(P.ref,{tags:P.tags})}),{booksUpdated:A.length,memosUpdated:T.length}}catch(x){throw console.error(":",x),n(""),x}finally{i(!1)}},[t==null?void 0:t.uid]);return{loading:r,renameTag:s,deleteTag:o,deleteTags:c,mergeTags:d}}function vee({open:t,tag:e,onClose:n,onRename:r,onDelete:i,onMerge:a,busy:s=!1}){const[o,c]=O.useState(e||""),[d,f]=O.useState(""),[p,g]=O.useState(""),m=()=>{c(e||""),n==null||n()};return v.jsxs(Ni,{open:t,onClose:m,maxWidth:"xs",fullWidth:!0,children:[v.jsx(Yi,{children:""}),v.jsxs(Li,{children:[v.jsx(te,{variant:"body2",color:"text.secondary",sx:{mb:1},children:""}),v.jsx(ct,{autoFocus:!0,fullWidth:!0,label:"",value:o,onChange:x=>c(x.target.value),disabled:s}),v.jsxs(re,{sx:{mt:2},children:[v.jsx(te,{variant:"body2",color:"text.secondary",sx:{mb:1},children:""}),v.jsx(ct,{fullWidth:!0,label:"",value:d,onChange:x=>f(x.target.value),disabled:s}),v.jsx(ct,{fullWidth:!0,label:"",value:p,onChange:x=>g(x.target.value),disabled:s,sx:{mt:1}})]})]}),v.jsxs(Bi,{children:[v.jsx(ze,{onClick:()=>i==null?void 0:i(e),color:"error",disabled:s,"data-testid":"tag-delete-button",children:""}),v.jsx(ze,{onClick:m,disabled:s,children:""}),v.jsx(ze,{onClick:()=>r==null?void 0:r(e,o),variant:"contained",disabled:s,"data-testid":"tag-rename-button",children:""}),v.jsx(ze,{onClick:()=>a==null?void 0:a(p,d),variant:"outlined",disabled:s,"data-testid":"tag-merge-button",children:""})]})]})}function xee({open:t,onClose:e,onConfirm:n,busy:r=!1}){const{user:i}=jn(),{tagOptions:a,fetchTagHistory:s}=Hs("book",i),{tagOptions:o,fetchTagHistory:c}=Hs("memo",i),[d,f]=O.useState([]),[p,g]=O.useState("");O.useEffect(()=>{t&&i&&(s(),c())},[t,i,s,c]),O.useEffect(()=>{t||(f([]),g(""))},[t]);const m=O.useMemo(()=>{const x=new Set([...a||[],...o||[]]);return Array.from(x).sort((b,A)=>b.localeCompare(A,"ja"))},[a,o]);return v.jsxs(Ni,{open:t,onClose:e,maxWidth:"sm",fullWidth:!0,children:[v.jsx(Yi,{children:""}),v.jsxs(Li,{children:[v.jsx(te,{variant:"body2",color:"text.secondary",sx:{mb:2},children:""}),v.jsx(Bs,{multiple:!0,freeSolo:!0,options:m,value:d,inputValue:p,onInputChange:(x,b)=>g(b),onChange:(x,b)=>f(b),renderTags:(x,b)=>x.map((A,E)=>{const{key:S,...T}=b({index:E});return v.jsx(dn,{label:A,...T,color:"error",variant:"outlined"},S)}),renderInput:x=>v.jsx(ct,{...x,label:"",placeholder:"...",fullWidth:!0,"data-testid":"bulk-delete-tags-input"}),"data-testid":"bulk-delete-tags-autocomplete"}),!!d.length&&v.jsx(re,{sx:{mt:1},children:v.jsxs(te,{variant:"caption",color:"text.secondary",children:[": ",d.join(", ")]})})]}),v.jsxs(Bi,{children:[v.jsx(ze,{onClick:e,disabled:r,children:""}),v.jsx(ze,{onClick:()=>n==null?void 0:n(d),color:"error",variant:"contained",disabled:r||d.length===0,"data-testid":"bulk-delete-confirm",children:""})]})]})}function wee({open:t,onClose:e,onConfirm:n,busy:r=!1}){const{user:i}=jn(),{tagOptions:a,fetchTagHistory:s}=Hs("book",i),{tagOptions:o,fetchTagHistory:c}=Hs("memo",i),[d,f]=O.useState(""),[p,g]=O.useState([]),[m,x]=O.useState("");O.useEffect(()=>{t&&i&&(s(),c())},[t,i,s,c]),O.useEffect(()=>{t||(f(""),g([]),x(""))},[t]);const b=O.useMemo(()=>{const E=new Set([...a||[],...o||[]]);return Array.from(E).sort((S,T)=>S.localeCompare(T,"ja"))},[a,o]),A=d.trim().length>0&&p.length>0;return v.jsxs(Ni,{open:t,onClose:e,maxWidth:"sm",fullWidth:!0,children:[v.jsx(Yi,{children:""}),v.jsxs(Li,{children:[v.jsx(te,{variant:"body2",color:"text.secondary",sx:{mb:2},children:""}),v.jsxs(re,{sx:{mb:2},children:[v.jsx(te,{variant:"subtitle2",sx:{mb:1},children:""}),v.jsx(Bs,{freeSolo:!0,options:b,value:d,inputValue:m,onInputChange:(E,S)=>x(S),onChange:(E,S)=>f(S||m),renderInput:E=>v.jsx(ct,{...E,label:"",placeholder:"",fullWidth:!0}),"data-testid":"bulk-merge-canonical"})]}),v.jsxs(re,{children:[v.jsx(te,{variant:"subtitle2",sx:{mb:1},children:""}),v.jsx(Bs,{multiple:!0,freeSolo:!0,options:b,value:p,onChange:(E,S)=>g(S),renderTags:(E,S)=>E.map((T,I)=>{const{key:P,...F}=S({index:I});return v.jsx(dn,{label:T,...F,color:"primary",variant:"outlined"},P)}),renderInput:E=>v.jsx(ct,{...E,label:"",placeholder:"...",fullWidth:!0}),"data-testid":"bulk-merge-aliases"})]})]}),v.jsxs(Bi,{children:[v.jsx(ze,{onClick:e,disabled:r,children:""}),v.jsx(ze,{onClick:()=>n==null?void 0:n(p,d||m),variant:"contained",disabled:r||!A,"data-testid":"bulk-merge-confirm",children:""})]})]})}function bee({onTagClick:t}){const{user:e}=jn(),{tagStats:n,loading:r,error:i,getSortedTagStats:a,fetchTagStats:s}=mee(e),{loading:o,renameTag:c,deleteTag:d,deleteTags:f,mergeTags:p}=yee(),[g,m]=O.useState("count"),[x,b]=O.useState("desc"),[A,E]=O.useState(!1),[S,T]=O.useState(""),[I,P]=O.useState(!1),[F,M]=O.useState(!1),D=a(g,x),R=Object.keys(n).length,B=Object.values(n).reduce((k,j)=>k+j.bookCount,0),N=Object.values(n).reduce((k,j)=>k+j.memoCount,0);return r?v.jsx(Bo,{variant:"inline",message:"...","data-testid":"tag-stats-loading"}):i?v.jsx(re,{sx:{p:2},children:v.jsxs(bi,{severity:"error",children:[": ",i.message]})}):R===0?v.jsx(re,{sx:{p:3},children:v.jsx(bi,{severity:"info",children:""})}):v.jsxs(re,{children:[v.jsxs(Xn,{sx:{p:2,mb:3},children:[v.jsx(te,{variant:"h6",gutterBottom:!0,children:""}),v.jsxs(re,{sx:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:2},children:[v.jsxs(re,{sx:{textAlign:"center"},children:[v.jsx(te,{variant:"h4",color:"primary",children:R}),v.jsx(te,{variant:"body2",color:"text.secondary",children:""})]}),v.jsxs(re,{sx:{textAlign:"center"},children:[v.jsx(te,{variant:"h4",color:"secondary",children:B}),v.jsx(te,{variant:"body2",color:"text.secondary",children:""})]}),v.jsxs(re,{sx:{textAlign:"center"},children:[v.jsx(te,{variant:"h4",color:"info.main",children:N}),v.jsx(te,{variant:"body2",color:"text.secondary",children:""})]})]})]}),v.jsxs(Xn,{sx:{p:2,mb:2,display:"flex",gap:2,alignItems:"center",flexWrap:"wrap"},children:[v.jsxs(te,{variant:"h6",children:[" (",R,")"]}),v.jsx(dn,{label:"",size:"small",color:"error",variant:"outlined",onClick:()=>P(!0),"data-testid":"open-bulk-delete"}),v.jsx(dn,{label:"",size:"small",color:"primary",variant:"outlined",onClick:()=>M(!0),"data-testid":"open-bulk-merge"}),v.jsxs(ki,{size:"small",sx:{minWidth:120},children:[v.jsx(Ta,{children:""}),v.jsxs(Xa,{value:g,label:"",onChange:k=>m(k.target.value),children:[v.jsx(Zt,{value:"count",children:""}),v.jsx(Zt,{value:"name",children:""}),v.jsx(Zt,{value:"lastUsed",children:""})]})]}),v.jsxs(ki,{size:"small",sx:{minWidth:100},children:[v.jsx(Ta,{children:""}),v.jsxs(Xa,{value:x,label:"",onChange:k=>b(k.target.value),children:[v.jsx(Zt,{value:"desc",children:""}),v.jsx(Zt,{value:"asc",children:""})]})]})]}),v.jsx(re,{className:"tag-stats-grid",children:D.map(k=>v.jsx(Sn,{"data-testid":`tag-stat-card-${k.tag}`,onClick:()=>t==null?void 0:t(k.tag),className:"tag-stat-card",children:v.jsxs(Cn,{children:[v.jsxs(re,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",mb:1},children:[v.jsx(te,{variant:"h6",component:"div",sx:{wordBreak:"break-all"},children:k.tag}),v.jsx(dn,{label:k.type,size:"small",color:k.type==="both"?"primary":k.type==="book"?"secondary":"info",variant:"outlined"})]}),v.jsxs(re,{sx:{display:"flex",justifyContent:"space-between",mb:1},children:[v.jsxs(te,{variant:"body2",color:"text.secondary",children:[": ",k.bookCount,""]}),v.jsxs(te,{variant:"body2",color:"text.secondary",children:[": ",k.memoCount,""]})]}),v.jsxs(re,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[v.jsxs(te,{variant:"body2",color:"primary",sx:{fontWeight:"bold"},children:[": ",k.totalCount,""]}),v.jsx(re,{sx:{display:"flex",gap:1},children:v.jsx(dn,{size:"small",label:"",onClick:j=>{j.stopPropagation(),T(k.tag),E(!0)},clickable:!0,color:"primary",variant:"outlined","data-testid":`tag-edit-${k.tag}`})})]}),k.lastUsed&&v.jsxs(te,{variant:"caption",color:"text.secondary",sx:{display:"block",mt:1},children:[": ",k.lastUsed.toLocaleDateString("ja-JP")]})]})},k.tag))}),v.jsx(vee,{open:A,tag:S,busy:o,onClose:()=>E(!1),onRename:async(k,j)=>{await c(k,j),await s(),E(!1)},onDelete:async k=>{await d(k),await s(),E(!1)},onMerge:async(k,j)=>{await p(k,j),await s(),E(!1)}}),v.jsx(xee,{open:I,onClose:()=>P(!1),busy:o,onConfirm:async k=>{!k||k.length===0||(await f(k),await s(),P(!1))}}),v.jsx(wee,{open:F,onClose:()=>M(!1),busy:o,onConfirm:async(k,j)=>{!k||k.length===0||!j||(await p(k.join(","),j),await s(),M(!1))}})]})}function _ee({value:t,onChange:e}){const[n,r]=O.useState((t==null?void 0:t.type)||"none"),[i,a]=O.useState((t==null?void 0:t.year)||new Date().getFullYear()),[s,o]=O.useState((t==null?void 0:t.month)||1),[c,d]=O.useState((t==null?void 0:t.quarter)||1),[f,p]=O.useState((t==null?void 0:t.startDate)||""),[g,m]=O.useState((t==null?void 0:t.endDate)||""),x=I=>{const P=I.target.value;r(P);let F={type:P};switch(P){case"year":F.year=i;break;case"month":F.year=i,F.month=s;break;case"quarter":F.year=i,F.quarter=c;break;case"custom":F.startDate=f,F.endDate=g;break}e==null||e(F)},b=I=>{const P=I.target.value;a(P),e==null||e({...t,year:P})},A=I=>{const P=I.target.value;o(P),e==null||e({...t,month:P})},E=I=>{const P=I.target.value;d(P),e==null||e({...t,quarter:P})},S=I=>{const P=I.target.value;p(P),e==null||e({...t,startDate:P})},T=I=>{const P=I.target.value;m(P),e==null||e({...t,endDate:P})};return v.jsxs(re,{children:[v.jsx(te,{variant:"subtitle2",gutterBottom:!0,children:""}),v.jsxs(Xn,{sx:{p:2},children:[v.jsxs(ki,{fullWidth:!0,margin:"normal",children:[v.jsx(Ta,{children:""}),v.jsxs(Xa,{value:n,onChange:x,label:"","data-testid":"date-range-type-select",children:[v.jsx(Zt,{value:"none",children:""}),v.jsx(Zt,{value:"year",children:""}),v.jsx(Zt,{value:"month",children:""}),v.jsx(Zt,{value:"quarter",children:""}),v.jsx(Zt,{value:"custom",children:""})]})]}),(n==="year"||n==="month"||n==="quarter")&&v.jsxs(ki,{fullWidth:!0,margin:"normal",children:[v.jsx(Ta,{children:""}),v.jsx(Xa,{value:i,onChange:b,label:"","data-testid":"year-select",children:Array.from({length:10},(I,P)=>new Date().getFullYear()-P).map(I=>v.jsxs(Zt,{value:I,children:[I,""]},I))})]}),n==="month"&&v.jsxs(ki,{fullWidth:!0,margin:"normal",children:[v.jsx(Ta,{children:""}),v.jsx(Xa,{value:s,onChange:A,label:"","data-testid":"month-select",children:Array.from({length:12},(I,P)=>P+1).map(I=>v.jsxs(Zt,{value:I,children:[I,""]},I))})]}),n==="quarter"&&v.jsxs(ki,{fullWidth:!0,margin:"normal",children:[v.jsx(Ta,{children:""}),v.jsxs(Xa,{value:c,onChange:E,label:"","data-testid":"quarter-select",children:[v.jsx(Zt,{value:1,children:"11-3"}),v.jsx(Zt,{value:2,children:"24-6"}),v.jsx(Zt,{value:3,children:"37-9"}),v.jsx(Zt,{value:4,children:"410-12"})]})]}),n==="custom"&&v.jsxs(re,{sx:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:2,mt:1},"data-testid":"custom-date-range-grid",children:[v.jsx(re,{"data-testid":"start-date-grid-item",children:v.jsx(ct,{label:"",type:"date",value:f,onChange:S,fullWidth:!0,InputLabelProps:{shrink:!0},inputProps:{"data-testid":"start-date-input"}})}),v.jsx(re,{"data-testid":"end-date-grid-item",children:v.jsx(ct,{label:"",type:"date",value:g,onChange:T,fullWidth:!0,InputLabelProps:{shrink:!0},inputProps:{"data-testid":"end-date-input"}})})]}),n!=="none"&&v.jsxs(te,{variant:"body2",color:"text.secondary",sx:{mt:1},children:[n==="year"&&`${i}`,n==="month"&&`${i}${s}`,n==="quarter"&&`${i}${c}`,n==="custom"&&""]})]})]})}function Aee({selectedTags:t=[],onTagsChange:e,type:n="book"}){const{user:r}=jn(),{tagOptions:i,loading:a,fetchTagHistory:s}=Hs(n,r),[o,c]=O.useState("");O.useEffect(()=>{r&&s()},[r,s]);const d=(g,m)=>{if(m&&!t.includes(m)){const x=[...t,m];e==null||e(x),c("")}},f=g=>{const m=t.filter(x=>x!==g);e==null||e(m)},p=(g,m)=>{c(m)};return v.jsxs(re,{children:[v.jsx(te,{variant:"subtitle2",gutterBottom:!0,children:""}),v.jsxs(Xn,{sx:{p:2},children:[v.jsx(Bs,{freeSolo:!0,multiple:!0,options:i||[],value:t,inputValue:o,onInputChange:p,onChange:d,renderTags:(g,m)=>g.map((x,b)=>{const{key:A,...E}=m({index:b});return v.jsx(dn,{label:x,...E,onDelete:()=>f(x),color:"primary",variant:"outlined","data-testid":`selected-tag-${x}`},A)}),renderInput:g=>v.jsx(ct,{...g,label:"",placeholder:"...",fullWidth:!0,"data-testid":"tag-search-input"}),loading:a,noOptionsText:"","data-testid":"tag-autocomplete"}),v.jsx(te,{variant:"body2",color:"text.secondary",sx:{mt:1},children:t.length>0?`: ${t.join(", ")}`:""})]})]})}function Eee({searchConditions:t,onSearchConditionsChange:e,onSearch:n}){const[r,i]=O.useState(yn.ALL),a=f=>{e==null||e({...t,text:f.target.value})},s=(f,p)=>{i(p),e==null||e({...t,status:p})},o=f=>{e==null||e({...t,dateRange:f})},c=f=>{e==null||e({...t,selectedTags:f})},d=()=>{n==null||n(t)};return v.jsxs(re,{children:[v.jsxs(Xn,{sx:{p:2,mb:2},children:[v.jsx(te,{variant:"h6",gutterBottom:!0,"data-testid":"advanced-search-title",children:""}),v.jsx(ct,{label:"",value:(t==null?void 0:t.text)||"",onChange:a,fullWidth:!0,margin:"normal",placeholder:"","data-testid":"text-search-field"}),v.jsxs(re,{sx:{mt:2},children:[v.jsx(te,{variant:"subtitle2",gutterBottom:!0,"data-testid":"status-filter-label",children:""}),v.jsx(re,{sx:{display:"flex",gap:1,flexWrap:"wrap"},children:[yn.ALL,yn.TSUNDOKU,yn.READING_GROUP,yn.SUSPENDED,yn.FINISHED].map(f=>v.jsx(ze,{variant:r===f?"contained":"outlined",size:"small",onClick:()=>s(null,f),"data-testid":`status-filter-${f}`,children:wd[f]},f))})]}),v.jsx(re,{sx:{mt:2},children:v.jsx(_ee,{dateRange:(t==null?void 0:t.dateRange)||{type:"none"},onDateRangeChange:o})}),v.jsx(re,{sx:{mt:2},children:v.jsx(Aee,{selectedTags:(t==null?void 0:t.selectedTags)||[],onTagsChange:c,type:"book"})})]}),v.jsx(re,{sx:{display:"flex",justifyContent:"center"},children:v.jsx(ze,{variant:"contained",onClick:d,"data-testid":"search-button",children:""})})]})}function Ay({results:t=[],loading:e=!1,searchQuery:n="",onResultClick:r}){const i=di(),{user:a}=jn(),s=uy(i,{overrides:{cursor:"pointer",height:"100%",display:"flex",flexDirection:"column"}}),o=iM(i,{useMemoAccentShadow:!0,borderRadius:2,innerBorderInset:6,hoverTransform:"-3px",overrides:{cursor:"pointer",height:"100%",display:"flex",flexDirection:"column"}}),{key:c}=dy(i),d=c_(i);aM(i);const f=No(),g=r||((E,S,T)=>{E==="book"?f(`/book/${S}`):E==="memo"&&f(`/book/${S}?memo=${T}`)});if(e)return v.jsx(Bo,{variant:"inline",message:"...","data-testid":"search-results-loading"});if(!t||t.length===0)return v.jsx(re,{sx:{p:3},children:v.jsx(bi,{severity:"info","data-testid":"search-results-empty-message",children:n?`${n}`:""})});const m=t.filter(E=>E.type==="book"),x=t.filter(E=>E.type==="memo"),b=E=>v.jsx(Sn,{sx:o,onClick:()=>g("memo",E.bookId,E.id),"data-testid":`memo-result-${E.id}`,children:v.jsxs(Cn,{sx:{flexGrow:1,display:"flex",flexDirection:"column",position:"relative",zIndex:1},children:[v.jsx(re,{sx:{mb:2},children:v.jsxs(te,{variant:"h6",component:"h3",gutterBottom:!0,sx:{fontWeight:"bold",display:"flex",alignItems:"center",gap:1},children:[v.jsx("span",{children:""}),v.jsxs("span",{children:[E.bookTitle||""," - ",E.page||""]})]})}),E.text&&v.jsx(re,{sx:{mb:2,flexGrow:1},children:v.jsx(te,{variant:"body2",sx:{backgroundColor:"grey.50",p:1,borderRadius:1,border:"1px solid",borderColor:"grey.200",fontStyle:"italic"},children:E.text.length>120?`${E.text.substring(0,120)}...`:E.text})}),E.comment&&v.jsx(re,{sx:{mb:2},children:v.jsxs(te,{variant:"body2",sx:{backgroundColor:"primary.50",p:1,borderRadius:1,border:"1px solid",borderColor:"primary.200"},children:[" ",E.comment.length>100?`${E.comment.substring(0,100)}...`:E.comment]})}),E.tags&&E.tags.length>0&&v.jsx(re,{sx:{mb:2},children:v.jsx(re,{sx:{display:"flex",gap:.5,flexWrap:"wrap"},children:E.tags.map((S,T)=>v.jsx(dn,{label:S,size:"small",variant:"outlined",sx:{fontSize:"0.75rem"}},T))})}),v.jsx(re,{sx:{mt:"auto"},children:v.jsxs(te,{variant:"caption",color:"text.secondary",children:[": ",E.createdAt?typeof E.createdAt.toDate=="function"?new Date(E.createdAt.toDate()).toLocaleDateString("ja-JP"):new Date(E.createdAt).toLocaleDateString("ja-JP"):""]})})]})},E.id),A=E=>v.jsxs(Sn,{sx:s,onClick:()=>g("book",E.id),"data-testid":`book-result-${E.id}`,children:[d.corners&&v.jsxs(v.Fragment,{children:[v.jsx(Ts,{position:"top-left",size:20,accentKey:c}),v.jsx(Ts,{position:"top-right",size:20,accentKey:c})]}),v.jsxs(Cn,{sx:{flexGrow:1,display:"flex",flexDirection:"column",position:"relative",zIndex:1},children:[v.jsx(re,{sx:{mb:2},children:v.jsxs(te,{variant:"h6",component:"h3",gutterBottom:!0,sx:{fontWeight:"bold",display:"flex",alignItems:"center",gap:1},children:[v.jsx("span",{children:""}),v.jsx("span",{children:E.title})]})}),v.jsxs(re,{sx:{mb:2},children:[v.jsx(te,{variant:"body2",color:"text.secondary",sx:{mb:1},children:E.author||""}),v.jsx(dn,{label:Us(E.status),size:"small",color:bs(E.status),sx:{fontSize:"0.75rem"}})]}),E.tags&&E.tags.length>0&&v.jsx(re,{sx:{mb:2},children:v.jsx(re,{sx:{display:"flex",gap:.5,flexWrap:"wrap"},children:E.tags.map((S,T)=>v.jsx(dn,{label:S,size:"small",variant:"outlined",sx:{fontSize:"0.75rem"}},T))})}),v.jsx(re,{sx:{mt:"auto"},children:v.jsxs(te,{variant:"caption",color:"text.secondary",children:[": ",E.updatedAt?typeof E.updatedAt.toDate=="function"?new Date(E.updatedAt.toDate()).toLocaleDateString("ja-JP"):new Date(E.updatedAt).toLocaleDateString("ja-JP"):""]})})]})]},E.id);return v.jsxs(re,{children:[v.jsxs(Xn,{sx:{p:2,mb:2},children:[v.jsxs(te,{variant:"h6",gutterBottom:!0,children:[" (",t.length,")"]}),v.jsxs(te,{variant:"body2",color:"text.secondary",children:[" : ",m.length,",  : ",x.length,""]})]}),v.jsx(re,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",sm:"1fr 1fr",md:"repeat(3, 1fr)"},gap:2},children:t.map(E=>v.jsx(re,{children:E.type==="book"?A(E):b(E)},`${E.type}-${E.id}`))})]})}Ay.propTypes={results:ne.arrayOf(ne.shape({id:ne.string.isRequired,type:ne.oneOf(["book","memo"]).isRequired,title:ne.string,author:ne.string,status:ne.string,tags:ne.arrayOf(ne.string),updatedAt:ne.oneOfType([ne.object,ne.string,ne.instanceOf(Date)]),bookId:ne.string,bookTitle:ne.string,text:ne.string,comment:ne.string,page:ne.number,createdAt:ne.oneOfType([ne.object,ne.string,ne.instanceOf(Date)])})),loading:ne.bool,searchQuery:ne.string,onResultClick:ne.func.isRequired};Ay.defaultProps={results:[],loading:!1,searchQuery:""};const Ey={MIN_SEARCH_LENGTH:2,CACHE_KEY:"fullTextSearchCache",CACHE_MAX_ITEMS:100,CACHE_EXPIRY_MS:1440*60*1e3,RATE_LIMIT_MS:5e3,ERROR_MESSAGES:{TOO_SHORT:t=>`${t}`,RATE_LIMITED:t=>`${t}`,SEARCH_FAILED:""},PLACEHOLDER:"",DESCRIPTION:"2"};function See(){const{CACHE_KEY:t,CACHE_MAX_ITEMS:e,CACHE_EXPIRY_MS:n}=Ey,r=O.useCallback(()=>{try{const p=localStorage.getItem(t);return p?JSON.parse(p):{}}catch(p){return console.error(":",p),{}}},[t]),[i,a]=O.useState(r),s=O.useCallback(p=>p.toLowerCase().trim(),[]),o=O.useCallback(p=>{const g=s(p);console.log(" :",{searchText:p,key:g,cacheKeys:Object.keys(i)});const m=i[g];return m?Date.now()-m.timestamp>n?(console.log(" :",g),null):(console.log(" :",g),m.data):(console.log(" :",g),null)},[i,s,n]),c=O.useCallback((p,g)=>{const m=s(p),x=Date.now();console.log(" :",{searchText:p,key:m,resultsCount:(g==null?void 0:g.length)||0});let b={...i};if(Object.keys(b).length>=e&&!b[m]){const A=Object.keys(b).sort((E,S)=>b[E].timestamp-b[S].timestamp)[0];console.log(" :",A),delete b[A]}b[m]={data:g,timestamp:x},a(b);try{localStorage.setItem(t,JSON.stringify(b)),console.log(" :",{key:m,cacheSize:Object.keys(b).length})}catch(A){console.error(":",A)}},[i,s,t,e]),d=O.useCallback(()=>{a({});try{localStorage.removeItem(t)}catch(p){console.error(":",p)}},[t]),f=O.useCallback(()=>{const p=Date.now(),g=Object.entries(i);return{totalItems:g.length,validItems:g.filter(([,m])=>p-m.timestamp<=n).length,maxItems:e,expiryMs:n}},[i,e,n]);return{getCached:o,setCached:c,clearCache:d,getCacheStats:f}}function Cee(){const{RATE_LIMIT_MS:t,ERROR_MESSAGES:e}=Ey,[n,r]=O.useState({}),i=O.useCallback(d=>d.toLowerCase().trim(),[]),a=O.useCallback(d=>{const f=i(d),p=Date.now(),g=n[f]||0,m=p-g;if(m<t){const x=t-m,b=Math.ceil(x/1e3);return{allowed:!1,remainingMs:x,error:e.RATE_LIMITED(b)}}return{allowed:!0,remainingMs:0,error:null}},[n,i,t,e]),s=O.useCallback(d=>{const f=i(d),p=Date.now();r(g=>({...g,[f]:p}))},[i]),o=O.useCallback(d=>{if(d){const f=i(d);r(p=>{const g={...p};return delete g[f],g})}else r({})},[i]),c=O.useCallback(d=>{const f=i(d),p=Date.now(),g=n[f]||0,m=p-g;return m<t?t-m:0},[n,i,t]);return{checkRateLimit:a,recordSearch:s,resetRateLimit:o,getRemainingTime:c}}function Tee(t){const e=new Date;let n=null,r=null;if(!t||!t.type||t.type==="none")return{startDate:n,endDate:r};switch(t.type){case"year":t.year&&(n=new Date(t.year,0,1),r=new Date(t.year,11,31,23,59,59));break;case"month":t.year&&t.month&&(n=new Date(t.year,t.month-1,1),r=new Date(t.year,t.month,0,23,59,59));break;case"quarter":if(t.year&&t.quarter){const i=(t.quarter-1)*3;n=new Date(t.year,i,1),r=new Date(t.year,i+3,0,23,59,59)}break;case"custom":t.startDate&&(n=new Date(t.startDate)),t.endDate&&(r=new Date(t.endDate),r.setHours(23,59,59));break;case"recent":t.months&&(n=new Date(e.getFullYear(),e.getMonth()-t.months,e.getDate()),r=e);break}return{startDate:n,endDate:r}}function Iee(t,e,n,r=50){if(!e)return[];const{status:i,dateRange:a,selectedTags:s}=n||{},o=[],c=[vn("userId","==",e.uid)];if(i&&i!=="all"&&c.push(vn("status","==",i)),a&&a.type!=="none"){const{startDate:p,endDate:g}=Tee(a);p&&c.push(vn("updatedAt",">=",p)),g&&c.push(vn("updatedAt","<=",g))}s&&s.length>0&&Array.isArray(s)&&!s.some(p=>Array.isArray(p))&&c.push(vn("tags","array-contains-any",s));const d=Ln(Gn(t,"books"),...c,sy("updatedAt","desc"),Qm(r));o.push({type:"book",query:d});const f=Ln(Il(t,"memos"),vn("userId","==",e.uid),Qm(r*3));return o.push({type:"memo",query:f}),o}async function Dee({db:t,user:e,queries:n,resultLimit:r=50}){var a,s;const i=[];for(const{type:o,query:c}of n)try{const d=await Hn(c);if(o==="memo")for(const f of d.docs){const p=f.data(),g=(a=f.ref.parent.parent)==null?void 0:a.id;let m="";if(g)try{const x=await Hn(Ln(Gn(t,"books"),vn("__name__","==",g),vn("userId","==",e.uid)));x.empty||(m=x.docs[0].data().title||"")}catch{}i.push({id:f.id,type:o,bookId:g,bookTitle:m,...p})}else d.forEach(f=>{const p=f.data();i.push({id:f.id,type:o,...p})})}catch(d){const f=String((d==null?void 0:d.message)||"");if(d.code==="failed-precondition"||f.includes("index")||f.includes("array-contains-any"))if(o==="memo"){const p=Ln(Il(t,"memos"),vn("userId","==",e.uid),Qm(r*2)),g=await Hn(p);for(const m of g.docs){const x=m.data(),b=(s=m.ref.parent.parent)==null?void 0:s.id;let A="";if(b)try{const E=await Hn(Ln(Gn(t,"books"),vn("__name__","==",b),vn("userId","==",e.uid)));E.empty||(A=E.docs[0].data().title||"")}catch{}i.push({id:m.id,type:o,bookId:b,bookTitle:A,...x})}}else{const p=Ln(Gn(t,"books"),vn("userId","==",e.uid),Qm(r*2));(await Hn(p)).forEach(m=>{const x=m.data();i.push({id:m.id,type:o,...x})})}else throw d}return i}function Ree(t,e){if(!e)return t;const n=String(e).toLowerCase();return(t||[]).filter(r=>r.type==="book"?r.title&&String(r.title).toLowerCase().includes(n)||r.author&&String(r.author).toLowerCase().includes(n)||r.tags&&Array.isArray(r.tags)&&r.tags.some(i=>String(i).toLowerCase().includes(n)):r.type==="memo"?r.text&&String(r.text).toLowerCase().includes(n)||r.comment&&String(r.comment).toLowerCase().includes(n)||r.tags&&Array.isArray(r.tags)&&r.tags.some(i=>String(i).toLowerCase().includes(n)):!1)}function Oee(t,e){if(!e||e.length===0)return t;const n=i=>{if(!Array.isArray(i))return[];const a=[],s=o=>{Array.isArray(o)?o.forEach(s):typeof o=="string"&&o.trim()&&a.push(o.toLowerCase().trim())};return i.forEach(s),a},r=n(e);return(t||[]).filter(i=>!i.tags||!Array.isArray(i.tags)?!1:n(i.tags).some(s=>r.includes(s)))}function Mee(t,e){if(!e)return t;const n=String(e).toLowerCase();return(t||[]).filter(r=>r.text&&String(r.text).toLowerCase().includes(n)||r.comment&&String(r.comment).toLowerCase().includes(n))}function Pee(t,e="updatedAt",n="desc"){const r=[...t||[]];return r.sort((i,a)=>{let s=i[e],o=a[e];return(e==="updatedAt"||e==="createdAt")&&(s=s!=null&&s.toDate?s.toDate():s?new Date(s):new Date(0),o=o!=null&&o.toDate?o.toDate():o?new Date(o):new Date(0)),typeof s=="string"&&typeof o=="string"&&(s=s.toLowerCase(),o=o.toLowerCase()),n==="asc"?s>o?1:-1:s<o?1:-1}),r}function kee(t,e={}){const{text:n,selectedTags:r,memoContent:i,sortBy:a="updatedAt",sortOrder:s="desc"}=e;let o=Ree(t,n);if(r&&r.length>0&&(o=Oee(o,r)),i){const c=o.filter(f=>f.type==="book"),d=Mee(o.filter(f=>f.type==="memo"),i);o=[...c,...d]}return Pee(o,a,s)}function QP(t={}){const{user:e}=jn(),[n,r]=O.useState([]),[i,a]=O.useState(!1),[s,o]=O.useState(null),{limit:c=50}=t;O.useEffect(()=>{if(!e)return;const g=xG();g&&r(g)},[e]);const d=O.useCallback(g=>Iee(vt,e,g,c),[e,c]),f=O.useCallback(async g=>{if(!e){o("");return}a(!0),o(null);try{console.log(":",g);const m=d(g),x=await Dee({db:vt,user:e,queries:m,resultLimit:c});console.log(", :",x.length),console.log(":",{books:x.filter(A=>A.type==="book").length,memos:x.filter(A=>A.type==="memo").length});const b=kee(x,g);r(b),vG(b)}catch(m){console.error(":",m),o("")}finally{a(!1)}},[e,d]),p=O.useCallback(()=>{r([]),o(null),w_()},[]);return{results:n,loading:i,error:s,executeSearch:f,clearResults:p,setResults:r}}function Nee(){const{MIN_SEARCH_LENGTH:t,ERROR_MESSAGES:e}=Ey,[n,r]=O.useState(""),[i,a]=O.useState(""),{getCached:s,setCached:o,clearCache:c,getCacheStats:d}=See(),{checkRateLimit:f,recordSearch:p,resetRateLimit:g}=Cee(),{executeSearch:m,results:x,loading:b}=QP(),[A,E]=O.useState(null),S=O.useRef(!1),T=O.useRef(""),I=O.useCallback(B=>B.trim().length<t?{valid:!1,error:e.TOO_SHORT(t)}:{valid:!0,error:null},[t,e]),P=O.useCallback(async()=>{const B=I(n);if(!B.valid){a(B.error);return}a("");const N=s(n);if(N){console.log(" :",n),E(N);return}const k=f(n);if(!k.allowed){a(k.error);return}try{console.log(" Firebase:",n),S.current=!0,T.current=n,E(null),await m({text:n,status:"all",dateRange:{type:"none"},selectedTags:[],sortBy:"updatedAt",sortOrder:"desc"})}catch(j){console.error(":",j),a(e.SEARCH_FAILED),S.current=!1}},[n,I,f,s,m,o,p,e]),F=O.useCallback(B=>{r(B),i&&a("")},[i]),M=O.useCallback(()=>{E(null),r(""),a("")},[]),D=O.useCallback(()=>{c(),E(null)},[c]);return O.useEffect(()=>{if(S.current&&x&&x.length>=0&&!b){const B=T.current;console.log(" Firebase:",B,"resultsCount:",x.length),o(B,x),p(B),S.current=!1}},[x,b,o,p]),{searchText:n,error:i,loading:b,results:A||x,handleSearch:P,handleSearchTextChange:F,clearResults:M,clearCache:D,validateSearchText:I,getCacheStats:d,resetRateLimit:g,canSearch:n.trim().length>=t&&!b}}function ZP(t){const e=No(),n=au(),[r,i]=O.useState(!1),[a,s]=O.useState(null),[o,c]=O.useState(null),d=O.useCallback((g,m,x)=>{if(g==="book"){const b=n.pathname;e(`/book/${m}`,{state:{returnPath:b,searchState:{results:t}}})}else if(g==="memo"){const b=t.find(A=>A.type==="memo"&&A.id===x);b?(s(b),c(m),i(!0)):(console.warn("[useSearchResultHandler] Memo not found in results, navigating to book page"),e(`/book/${m}?memo=${x}`))}},[e,n.pathname,t]),f=O.useCallback(()=>{i(!1),s(null),c(null)},[]),p=O.useCallback(()=>v.jsx(bM,{open:r,memo:a,bookId:o,onClose:f,onUpdate:f,onDelete:f}),[r,a,o,f]);return{handleResultClick:d,memoDialogOpen:r,selectedMemo:a,selectedMemoBookId:o,closeMemoDialog:f,MemoDialog:p}}function Lee(){const{searchText:t,error:e,loading:n,results:r,handleSearch:i,handleSearchTextChange:a,clearResults:s,clearCache:o,getCacheStats:c,canSearch:d}=Nee(),{handleResultClick:f,MemoDialog:p}=ZP(r),{PLACEHOLDER:g,DESCRIPTION:m}=Ey,x=A=>{A.key==="Enter"&&d&&i()},b=c();return v.jsxs(re,{"data-testid":"full-text-search",children:[v.jsxs(Xn,{sx:{p:3,mb:3},children:[v.jsx(te,{variant:"body2",color:"text.secondary",sx:{mb:2},"data-testid":"full-text-search-description",children:m}),v.jsxs(re,{sx:{display:"flex",gap:1,mb:2},children:[v.jsx(ct,{fullWidth:!0,label:"",placeholder:g,value:t,onChange:A=>a(A.target.value),onKeyPress:x,error:!!e,helperText:e,autoFocus:!0,disabled:n,"data-testid":"full-text-search-input",InputProps:{endAdornment:t&&v.jsx(Gr,{size:"small",onClick:s,"data-testid":"full-text-search-clear-input",children:v.jsx(gR,{fontSize:"small"})})}}),v.jsx(ze,{variant:"contained",onClick:i,disabled:!d,startIcon:n?v.jsx(pR,{size:20}):v.jsx(L1,{}),"data-testid":"full-text-search-button",sx:{minWidth:100},children:n?"...":""})]}),b.totalItems>0&&v.jsxs(re,{sx:{display:"flex",alignItems:"center",gap:1},children:[v.jsxs(te,{variant:"caption",color:"text.secondary","data-testid":"full-text-search-cache-info",children:[": ",b.validItems,"/",b.maxItems," "]}),v.jsx(u5,{title:"",children:v.jsx(Gr,{size:"small",onClick:o,"data-testid":"full-text-search-clear-cache",children:v.jsx(d5,{fontSize:"small"})})})]})]}),!n&&r&&r.length>0&&v.jsx(re,{"data-testid":"full-text-search-results",children:v.jsx(Ay,{results:r,onResultClick:f})}),!n&&r&&r.length===0&&v.jsx(bi,{severity:"info","data-testid":"full-text-search-no-results",children:""}),!n&&!r&&!e&&v.jsx(bi,{severity:"info","data-testid":"full-text-search-initial",children:""}),v.jsx(p,{})]})}function Bee(){const{user:t}=jn(),e=au(),[n,r]=O.useState(0),[i,a]=O.useState({text:"",status:"all",dateRange:{type:"none"},selectedTags:[],sortBy:"updatedAt",sortOrder:"desc"}),{results:s,loading:o,error:c,executeSearch:d,clearResults:f,setResults:p}=QP(),{handleResultClick:g,MemoDialog:m}=ZP(s);O.useEffect(()=>{var I;const T=(I=e.state)==null?void 0:I.restoreSearch;T!=null&&T.results&&(console.log("[TagSearch] Restoring search state:",T),p(T.results))},[e.state,p]);const x=(T,I)=>{r(I)},b=T=>{a(T)},A=T=>{console.log(":",T),d(T)},E=()=>{f(),a({text:"",status:"all",dateRange:{type:"none"},selectedTags:[],sortBy:"updatedAt",sortOrder:"desc"})},S=T=>{console.log(":",T);const I={...i,selectedTags:[T],text:""};a(I),r(1),d(I)};return t?v.jsxs(re,{sx:{maxWidth:1e3,mx:"auto",mb:4,pb:"56px"},children:[v.jsx(tp,{title:"",subtitle:""}),v.jsxs(re,{sx:{px:{xs:1.5,sm:2,md:0}},children:[v.jsx(re,{sx:{borderBottom:1,borderColor:"divider",mb:2,position:"sticky",top:0,zIndex:1100,backgroundColor:"background.paper"},"data-testid":"tag-search-tabs-container",style:{position:"sticky",top:0,zIndex:1100},children:v.jsxs(N1,{value:n,onChange:x,centered:!0,"data-testid":"tag-search-tabs",children:[v.jsx(Sa,{label:"",id:"tag-search-tab-0","aria-controls":"tag-search-tabpanel-0","data-testid":"full-text-search-tab"}),v.jsx(Sa,{label:"",id:"tag-search-tab-1","aria-controls":"tag-search-tabpanel-1","data-testid":"advanced-search-tab"}),v.jsx(Sa,{label:"",id:"tag-search-tab-2","aria-controls":"tag-search-tabpanel-2","data-testid":"tag-management-tab"})]})}),v.jsx(m2,{value:n,index:0,"data-testid":"full-text-search-tab-panel",children:v.jsx(Fee,{})}),v.jsx(m2,{value:n,index:1,"data-testid":"advanced-search-tab-panel",children:v.jsx(jee,{searchConditions:i,onSearchConditionsChange:b,onSearch:A,results:s,loading:o,error:c,onResultClick:g,onClearSearch:E})}),v.jsx(m2,{value:n,index:2,"data-testid":"tag-management-tab-panel",children:v.jsx(Vee,{onTagClick:S})}),v.jsx(m,{})]})]}):v.jsx(re,{sx:{maxWidth:600,mx:"auto",mt:4,p:2},children:v.jsx(te,{variant:"h6",color:"error",children:""})})}function Fee(){return v.jsxs(re,{children:[v.jsxs(Xn,{sx:{p:2,mb:3},children:[v.jsx(te,{variant:"h5",gutterBottom:!0,children:""}),v.jsx(te,{variant:"body2",color:"text.secondary",children:""})]}),v.jsx(Lee,{})]})}function jee({searchConditions:t,onSearchConditionsChange:e,onSearch:n,results:r,loading:i,error:a,onResultClick:s,onClearSearch:o}){return v.jsxs(re,{children:[v.jsxs(Xn,{sx:{p:2,mb:3},children:[v.jsx(te,{variant:"h5",gutterBottom:!0,children:""}),v.jsx(te,{variant:"body2",color:"text.secondary",children:""})]}),v.jsx(Eee,{searchConditions:t,onSearchConditionsChange:e,onSearch:n}),a&&v.jsx(re,{sx:{mt:2},children:v.jsx(bi,{severity:"error",children:a})}),(r.length>0||i)&&v.jsx(re,{sx:{mt:4},children:v.jsx(Ay,{results:r,loading:i,searchQuery:t.text,onResultClick:s})}),r.length>0&&!i&&v.jsx(Xn,{sx:{p:1.5,mt:2,textAlign:"center"},children:v.jsx(te,{variant:"body2",color:"primary",sx:{cursor:"pointer",textDecoration:"underline"},onClick:o,children:""})})]})}function Vee({onTagClick:t}){return v.jsxs(re,{children:[v.jsxs(Xn,{sx:{p:2,mb:3},children:[v.jsx(te,{variant:"h5",gutterBottom:!0,children:""}),v.jsx(te,{variant:"body2",color:"text.secondary",children:""})]}),v.jsx(bee,{onTagClick:t})]})}function Zg(t,e,n=1){if(!e)return;const r=t.get(e)||0;t.set(e,r+n)}function Uee(){const{user:t}=jn(),e=O.useContext(Pr),n=(e==null?void 0:e.setGlobalError)||(()=>{}),[r,i]=O.useState(!0),[a,s]=O.useState(null),[o,c]=O.useState([]),[d,f]=O.useState([]);O.useEffect(()=>{let T=!1;async function I(){if(!t){c([]),f([]),i(!1);return}i(!0),s(null);try{const P=Ln(Gn(vt,"books"),vn("userId","==",t.uid)),M=(await Hn(P)).docs.map(N=>({id:N.id,...N.data()})),D=Ln(Il(vt,"memos"),vn("userId","==",t.uid)),B=(await Hn(D)).docs.map(N=>({id:N.id,...N.data()}));T||(c(M),f(B))}catch(P){console.error("Failed to load stats:",P),T||(s(""),n(""))}finally{T||i(!1)}}return I(),()=>{T=!0}},[t]);const p=O.useMemo(()=>{const T=o.length,I=o.filter(D=>(D.status||Cr)===ft.TSUNDOKU).length,P=o.filter(D=>(D.status||Cr)===ft.READING).length,F=o.filter(D=>(D.status||Cr)===ft.RE_READING).length,M=o.filter(D=>(D.status||Cr)===ft.FINISHED).length;return{totalBooks:T,tsundokuBooks:I,readingBooks:P,reReadingBooks:F,finishedBooks:M}},[o]),g=O.useMemo(()=>{const T=o.filter(M=>(M.status||Cr)===ft.TSUNDOKU).length,I=o.filter(M=>(M.status||Cr)===ft.READING).length,P=o.filter(M=>(M.status||Cr)===ft.RE_READING).length,F=o.filter(M=>(M.status||Cr)===ft.FINISHED).length;return{tsundoku:T,reading:I,reReading:P,finished:F}},[o]),m=O.useMemo(()=>{const T=new Map,I=new Map;for(const M of o){const D=Array.isArray(M.tags)?M.tags:[];for(const R of D)Zg(T,String(R).trim())}for(const M of d){const D=Array.isArray(M.tags)?M.tags:[];for(const R of D)Zg(I,String(R).trim())}const P=new Set([...T.keys(),...I.keys()]),F=[];for(const M of P){const D=T.get(M)||0,R=I.get(M)||0;F.push({tag:M,bookCount:D,memoCount:R,totalCount:D+R})}return F.sort((M,D)=>D.totalCount-M.totalCount||M.tag.localeCompare(D.tag)),F},[o,d]),x=O.useMemo(()=>{var F;const T=new Date,I=[],P=new Map;for(let M=11;M>=0;M-=1){const D=new Date(T.getFullYear(),T.getMonth()-M,1),R=`${D.getFullYear()}-${String(D.getMonth()+1).padStart(2,"0")}`;P.set(R,I.length),I.push({key:R,year:D.getFullYear(),month:D.getMonth()+1,count:0})}for(const M of o){const D=M.status||"reading",R=M.finishedAt||M.updatedAt||M.createdAt;if(!R||D!=="finished")continue;const B=typeof(R==null?void 0:R.toDate)=="function"?R.toDate():new Date(R);if(Number.isNaN((F=B==null?void 0:B.getTime)==null?void 0:F.call(B)))continue;const N=`${B.getFullYear()}-${String(B.getMonth()+1).padStart(2,"0")}`;if(!P.has(N))continue;const k=P.get(N);I[k].count+=1}return I},[o]),b=O.useMemo(()=>{var F;const T=new Date,I=[],P=new Map;for(let M=11;M>=0;M-=1){const D=new Date(T.getFullYear(),T.getMonth()-M,1),R=`${D.getFullYear()}-${String(D.getMonth()+1).padStart(2,"0")}`;P.set(R,I.length),I.push({key:R,year:D.getFullYear(),month:D.getMonth()+1,count:0})}for(const M of o){const D=M.createdAt||M.updatedAt||M.finishedAt;if(!D)continue;const R=typeof(D==null?void 0:D.toDate)=="function"?D.toDate():new Date(D);if(Number.isNaN((F=R==null?void 0:R.getTime)==null?void 0:F.call(R)))continue;const B=`${R.getFullYear()}-${String(R.getMonth()+1).padStart(2,"0")}`;if(!P.has(B))continue;const N=P.get(B);I[N].count+=1}return I},[o]),A=O.useMemo(()=>{var F;const T=new Date,I=[],P=new Map;for(let M=11;M>=0;M-=1){const D=new Date(T.getFullYear(),T.getMonth()-M,1),R=`${D.getFullYear()}-${String(D.getMonth()+1).padStart(2,"0")}`;P.set(R,I.length),I.push({key:R,year:D.getFullYear(),month:D.getMonth()+1,count:0})}for(const M of d){const D=M.createdAt||M.updatedAt;if(!D)continue;const R=typeof(D==null?void 0:D.toDate)=="function"?D.toDate():new Date(D);if(Number.isNaN((F=R==null?void 0:R.getTime)==null?void 0:F.call(R)))continue;const B=`${R.getFullYear()}-${String(R.getMonth()+1).padStart(2,"0")}`;if(!P.has(B))continue;const N=P.get(B);I[N].count+=1}return I},[d]),E=O.useMemo(()=>{const T=new Map;for(const P of o){const F=(P.author||"").toString().trim();F&&Zg(T,F)}const I=[...T.entries()].map(([P,F])=>({author:P,total:F}));return I.sort((P,F)=>F.total-P.total||P.author.localeCompare(F.author)),I},[o]),S=O.useMemo(()=>{const T=new Map;for(const P of o){const F=(P.publisher||"").toString().trim();F&&Zg(T,F)}const I=[...T.entries()].map(([P,F])=>({publisher:P,total:F}));return I.sort((P,F)=>F.total-P.total||P.publisher.localeCompare(F.publisher)),I},[o]);return{loading:r,error:a,summary:p,tagStats:m,monthlyFinished:x,monthlyAddedBooks:b,monthlyMemos:A,topAuthors:E,topPublishers:S,statusDistribution:g}}const $_="DEFAULT_X_AXIS_KEY",G_="DEFAULT_Y_AXIS_KEY",Hee={top:20,bottom:20,left:20,right:20},zee=45,$ee=25,JP=20;class Gee{constructor(e){this.value=void 0,this.listeners=void 0,this.subscribe=n=>(this.listeners.add(n),()=>{this.listeners.delete(n)}),this.getSnapshot=()=>this.value,this.update=n=>{const r=n(this.value);r!==this.value&&(this.value=r,this.listeners.forEach(i=>i(r)))},this.value=e,this.listeners=new Set}}const Sy=({params:t,store:e})=>{O.useEffect(()=>{e.update(r=>H({},r,{animation:H({},r.animation,{skip:t.skipAnimation})}))},[e,t.skipAnimation]);const n=O.useCallback(()=>{let r=!1;return e.update(i=>H({},i,{animation:H({},i.animation,{skipAnimationRequests:i.animation.skipAnimationRequests+1})})),()=>{r||(r=!0,e.update(i=>H({},i,{animation:H({},i.animation,{skipAnimationRequests:i.animation.skipAnimationRequests-1})})))}},[e]);return Kn(()=>{if(typeof window>"u"||!(window!=null&&window.matchMedia))return;let i;const a=o=>{o.matches?i=n():i==null||i()},s=window.matchMedia("(prefers-reduced-motion)");return a(s),s.addEventListener("change",a),()=>{s.removeEventListener("change",a)}},[n,e]),{instance:{disableAnimation:n}}};Sy.params={skipAnimation:!0};Sy.getDefaultizedParams=({params:t})=>H({},t,{skipAnimation:t.skipAnimation??!1});Sy.getInitialState=({skipAnimation:t})=>({animation:{skip:t,skipAnimationRequests:0}});var d1=Symbol("NOT_FOUND");function Wee(t,e=`expected a function, instead received ${typeof t}`){if(typeof t!="function")throw new TypeError(e)}function Yee(t,e=`expected an object, instead received ${typeof t}`){if(typeof t!="object")throw new TypeError(e)}function qee(t,e="expected all items to be functions, instead received the following types: "){if(!t.every(n=>typeof n=="function")){const n=t.map(r=>typeof r=="function"?`function ${r.name||"unnamed"}()`:typeof r).join(", ");throw new TypeError(`${e}[${n}]`)}}var GD=t=>Array.isArray(t)?t:[t];function Xee(t){const e=Array.isArray(t[0])?t[0]:t;return qee(e,"createSelector expects all input-selectors to be functions, but received the following types: "),e}function Kee(t,e){const n=[],{length:r}=t;for(let i=0;i<r;i++)n.push(t[i].apply(null,e));return n}function Qee(t){let e;return{get(n){return e&&t(e.key,n)?e.value:d1},put(n,r){e={key:n,value:r}},getEntries(){return e?[e]:[]},clear(){e=void 0}}}function Zee(t,e){let n=[];function r(o){const c=n.findIndex(d=>e(o,d.key));if(c>-1){const d=n[c];return c>0&&(n.splice(c,1),n.unshift(d)),d.value}return d1}function i(o,c){r(o)===d1&&(n.unshift({key:o,value:c}),n.length>t&&n.pop())}function a(){return n}function s(){n=[]}return{get:r,put:i,getEntries:a,clear:s}}var Jee=(t,e)=>t===e;function ete(t){return function(n,r){if(n===null||r===null||n.length!==r.length)return!1;const{length:i}=n;for(let a=0;a<i;a++)if(!t(n[a],r[a]))return!1;return!0}}function tte(t,e){const n=typeof e=="object"?e:{equalityCheck:e},{equalityCheck:r=Jee,maxSize:i=1,resultEqualityCheck:a}=n,s=ete(r);let o=0;const c=i<=1?Qee(s):Zee(i,s);function d(){let f=c.get(arguments);if(f===d1){if(f=t.apply(null,arguments),o++,a){const g=c.getEntries().find(m=>a(m.value,f));g&&(f=g.value,o!==0&&o--)}c.put(arguments,f)}return f}return d.clearCache=()=>{c.clear(),d.resetResultsCount()},d.resultsCount=()=>o,d.resetResultsCount=()=>{o=0},d}var nte=class{constructor(t){this.value=t}deref(){return this.value}},rte=typeof WeakRef<"u"?WeakRef:nte,ite=0,WD=1;function Jg(){return{s:ite,v:void 0,o:null,p:null}}function ek(t,e={}){let n=Jg();const{resultEqualityCheck:r}=e;let i,a=0;function s(){var p;let o=n;const{length:c}=arguments;for(let g=0,m=c;g<m;g++){const x=arguments[g];if(typeof x=="function"||typeof x=="object"&&x!==null){let b=o.o;b===null&&(o.o=b=new WeakMap);const A=b.get(x);A===void 0?(o=Jg(),b.set(x,o)):o=A}else{let b=o.p;b===null&&(o.p=b=new Map);const A=b.get(x);A===void 0?(o=Jg(),b.set(x,o)):o=A}}const d=o;let f;if(o.s===WD)f=o.v;else if(f=t.apply(null,arguments),a++,r){const g=((p=i==null?void 0:i.deref)==null?void 0:p.call(i))??i;g!=null&&r(g,f)&&(f=g,a!==0&&a--),i=typeof f=="object"&&f!==null||typeof f=="function"?new rte(f):f}return d.s=WD,d.v=f,f}return s.clearCache=()=>{n=Jg(),s.resetResultsCount()},s.resultsCount=()=>a,s.resetResultsCount=()=>{a=0},s}function tk(t,...e){const n=typeof t=="function"?{memoize:t,memoizeOptions:e}:t,r=(...i)=>{let a=0,s=0,o,c={},d=i.pop();typeof d=="object"&&(c=d,d=i.pop()),Wee(d,`createSelector expects an output function after the inputs, but received: [${typeof d}]`);const f={...n,...c},{memoize:p,memoizeOptions:g=[],argsMemoize:m=ek,argsMemoizeOptions:x=[]}=f,b=GD(g),A=GD(x),E=Xee(i),S=p(function(){return a++,d.apply(null,arguments)},...b),T=m(function(){s++;const P=Kee(E,arguments);return o=S.apply(null,P),o},...A);return Object.assign(T,{resultFunc:d,memoizedResultFunc:S,dependencies:E,dependencyRecomputations:()=>s,resetDependencyRecomputations:()=>{s=0},lastResult:()=>o,recomputations:()=>a,resetRecomputations:()=>{a=0},memoize:p,argsMemoize:m})};return Object.assign(r,{withTypes:()=>r}),r}var ate=tk(ek),ste=Object.assign((t,e=ate)=>{Yee(t,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof t}`);const n=Object.keys(t),r=n.map(a=>t[a]);return e(r,(...a)=>a.reduce((s,o,c)=>(s[n[c]]=o,s),{}))},{withTypes:()=>ste});const ote=tk({memoize:tte,memoizeOptions:{maxSize:1,equalityCheck:Object.is}}),YD=new WeakMap,Ye=(...t)=>(n,...r)=>{const i=n.cacheKey;let a=YD.get(i);a||(a=new Map,YD.set(i,a));const s=a.get(t);if(s)return s(n,...r);const o=ote(...t);return a.set(t,o),o(n,...r)},lte=t=>t.animation,cte=Ye([lte],t=>t.skip||t.skipAnimationRequests>0);var y2={exports:{}},v2={},x2={exports:{}},w2={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qD;function ute(){if(qD)return w2;qD=1;var t=ob();function e(p,g){return p===g&&(p!==0||1/p===1/g)||p!==p&&g!==g}var n=typeof Object.is=="function"?Object.is:e,r=t.useState,i=t.useEffect,a=t.useLayoutEffect,s=t.useDebugValue;function o(p,g){var m=g(),x=r({inst:{value:m,getSnapshot:g}}),b=x[0].inst,A=x[1];return a(function(){b.value=m,b.getSnapshot=g,c(b)&&A({inst:b})},[p,m,g]),i(function(){return c(b)&&A({inst:b}),p(function(){c(b)&&A({inst:b})})},[p]),s(m),m}function c(p){var g=p.getSnapshot;p=p.value;try{var m=g();return!n(p,m)}catch{return!0}}function d(p,g){return g()}var f=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?d:o;return w2.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:f,w2}var XD;function dte(){return XD||(XD=1,x2.exports=ute()),x2.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var KD;function fte(){if(KD)return v2;KD=1;var t=ob(),e=dte();function n(d,f){return d===f&&(d!==0||1/d===1/f)||d!==d&&f!==f}var r=typeof Object.is=="function"?Object.is:n,i=e.useSyncExternalStore,a=t.useRef,s=t.useEffect,o=t.useMemo,c=t.useDebugValue;return v2.useSyncExternalStoreWithSelector=function(d,f,p,g,m){var x=a(null);if(x.current===null){var b={hasValue:!1,value:null};x.current=b}else b=x.current;x=o(function(){function E(F){if(!S){if(S=!0,T=F,F=g(F),m!==void 0&&b.hasValue){var M=b.value;if(m(M,F))return I=M}return I=F}if(M=I,r(T,F))return M;var D=g(F);return m!==void 0&&m(M,D)?(T=F,M):(T=F,I=D)}var S=!1,T,I,P=p===void 0?null:p;return[function(){return E(f())},P===null?void 0:function(){return E(P())}]},[f,p,g,m]);var A=i(d,x[0],x[1]);return s(function(){b.hasValue=!0,b.value=A},[A]),c(A),A},v2}var QD;function hte(){return QD||(QD=1,y2.exports=fte()),y2.exports}var pte=hte();const gte=Object.is,pt=(t,e,n=[],r=gte)=>{const i=a=>e(a,...n);return pte.useSyncExternalStoreWithSelector(t.subscribe,t.getSnapshot,t.getSnapshot,i,r)},fu=t=>{var e;return(e=t.cartesianAxis)==null?void 0:e.x},Af=t=>{var e;return(e=t.cartesianAxis)==null?void 0:e.y},mte=Ye([Af],t=>(t??[]).reduce((e,n)=>{var r;return n.position==="left"?e+(n.width||0)+((r=n.zoom)!=null&&r.slider.enabled?n.zoom.slider.size:0):e},0)),yte=Ye([Af],t=>(t??[]).reduce((e,n)=>{var r;return n.position==="right"?e+(n.width||0)+((r=n.zoom)!=null&&r.slider.enabled?n.zoom.slider.size:0):e},0)),vte=Ye([fu],t=>(t??[]).reduce((e,n)=>{var r;return n.position==="top"?e+(n.height||0)+((r=n.zoom)!=null&&r.slider.enabled?n.zoom.slider.size:0):e},0)),xte=Ye([fu],t=>(t??[]).reduce((e,n)=>{var r;return n.position==="bottom"?e+(n.height||0)+((r=n.zoom)!=null&&r.slider.enabled?n.zoom.slider.size:0):e},0)),wte=t=>t.dimensions,nk=t=>t.dimensions.width,rk=t=>t.dimensions.height,bte=t=>t.dimensions.margin.top,_te=t=>t.dimensions.margin.right,Ate=t=>t.dimensions.margin.bottom,Ete=t=>t.dimensions.margin.left,Fo=Ye([nk,rk,bte,_te,Ate,Ete,vte,yte,xte,mte],(t,e,n,r,i,a,s,o,c,d)=>({width:t-a-r-d-o,left:a+d,right:r+o,height:e-n-i-s-c,top:n+s,bottom:i+c})),ik=Ye([wte],t=>({width:t.propsWidth,height:t.propsHeight})),Ste=Ye([nk,rk],(t,e)=>({width:t,height:e}));function ak(t,e){return typeof t=="number"?{top:t,bottom:t,left:t,right:t}:e?H({},e,t):t}const Cte=10,Cy=({params:t,store:e,svgRef:n})=>{const r=t.width!==void 0&&t.height!==void 0,i=O.useRef({displayError:!1,initialCompute:!0,computeRun:0}),[a,s]=O.useState(0),[o,c]=O.useState(0),d=O.useCallback(()=>{const x=n==null?void 0:n.current;if(!x)return{};const A=f5(x).getComputedStyle(x),E=Math.floor(parseFloat(A.height))||0,S=Math.floor(parseFloat(A.width))||0;return e.update(T=>T.dimensions.width===S&&T.dimensions.height===E?T:H({},T,{dimensions:{margin:{top:t.margin.top,right:t.margin.right,bottom:t.margin.bottom,left:t.margin.left},width:t.width??S,height:t.height??E,propsWidth:t.width,propsHeight:t.height}})),{height:E,width:S}},[e,n,t.height,t.width,t.margin.left,t.margin.right,t.margin.top,t.margin.bottom]);O.useEffect(()=>{e.update(x=>{const b=t.width??x.dimensions.width,A=t.height??x.dimensions.height;return H({},x,{dimensions:{margin:{top:t.margin.top,right:t.margin.right,bottom:t.margin.bottom,left:t.margin.left},width:b,height:A,propsHeight:t.height,propsWidth:t.width}})})},[e,t.height,t.width,t.margin.left,t.margin.right,t.margin.top,t.margin.bottom]),O.useEffect(()=>{i.current.displayError=!0},[]),Kn(()=>{if(r||!i.current.initialCompute||i.current.computeRun>Cte)return;const x=d();x.width!==a||x.height!==o?(i.current.computeRun+=1,x.width!==void 0&&s(x.width),x.height!==void 0&&c(x.height)):i.current.initialCompute&&(i.current.initialCompute=!1)},[o,a,d,r]),Kn(()=>{if(r)return()=>{};d();const x=n.current;if(typeof ResizeObserver>"u")return()=>{};let b;const A=new ResizeObserver(()=>{b=requestAnimationFrame(()=>{d()})});return x&&A.observe(x),()=>{b&&cancelAnimationFrame(b),x&&A.unobserve(x)}},[d,r,n]);const f=pt(e,Fo),p=O.useCallback(x=>x>=f.left-1&&x<=f.left+f.width,[f.left,f.width]),g=O.useCallback(x=>x>=f.top-1&&x<=f.top+f.height,[f.height,f.top]);return{instance:{isPointInside:O.useCallback((x,b,A)=>A&&"closest"in A&&A.closest("[data-drawing-container]")?!0:p(x)&&g(b),[p,g]),isXInside:p,isYInside:g}}};Cy.params={width:!0,height:!0,margin:!0};Cy.getDefaultizedParams=({params:t})=>H({},t,{margin:ak(t.margin,Hee)});Cy.getInitialState=({width:t,height:e,margin:n})=>({dimensions:{margin:n,width:t??0,height:e??0,propsWidth:t,propsHeight:e}});const W_=({params:t,store:e})=>(Kn(()=>{e.update(n=>H({},n,{experimentalFeatures:t.experimentalFeatures}))},[e,t.experimentalFeatures]),{});W_.params={experimentalFeatures:!0};W_.getInitialState=({experimentalFeatures:t})=>({experimentalFeatures:t});const Tte=t=>t.experimentalFeatures,sk=Ye([Tte],t=>!!(t!=null&&t.preferStrictDomainInLineCharts));let ZD=0;const Ite=()=>(ZD+=1,`mui-chart-${ZD}`),Y_=({params:t,store:e})=>(O.useEffect(()=>{e.update(n=>t.id===void 0||t.id===n.id.providedChartId&&n.id.chartId!==void 0?n:H({},n,{id:H({},n.id,{chartId:t.id??Ite()})}))},[e,t.id]),{});Y_.params={id:!0};Y_.getInitialState=({id:t})=>({id:{chartId:t,providedChartId:t}});const Dte=t=>t.id,Rte=Ye([Dte],t=>t.chartId),Ote=["#4254FB","#FFB422","#FA4F58","#0DBEFF","#22BF75","#FA83B4","#FF7511"],Mte=["#495AFB","#FFC758","#F35865","#30C8FF","#44CE8D","#F286B3","#FF8C39"],ok=t=>t==="dark"?Mte:Ote,lk=({series:t,colors:e,seriesConfig:n,dataset:r})=>{const i={};t.forEach((s,o)=>{var f;const c=n[s.type].getSeriesWithDefaultValues(s,o,e),d=c.id;if(i[s.type]===void 0&&(i[s.type]={series:{},seriesOrder:[]}),((f=i[s.type])==null?void 0:f.series[d])!==void 0)throw new Error(`MUI X Charts: series' id "${d}" is not unique.`);i[s.type].series[d]=c,i[s.type].seriesOrder.push(d)});const a={};return Object.keys(n).forEach(s=>{var c,d;const o=i[s];o!==void 0&&(a[s]=((d=(c=n[s])==null?void 0:c.seriesProcessor)==null?void 0:d.call(c,o,r))??i[s])}),a},Ty=({params:t,store:e,seriesConfig:n})=>{const{series:r,dataset:i,theme:a,colors:s}=t,o=O.useRef(!0);return O.useEffect(()=>{if(o.current){o.current=!1;return}e.update(c=>H({},c,{series:H({},c.series,{processedSeries:lk({series:r,colors:typeof s=="function"?s(a):s,seriesConfig:n,dataset:i})})}))},[s,i,r,a,n,e]),{}};Ty.params={dataset:!0,series:!0,colors:!0,theme:!0};const Pte=[];Ty.getDefaultizedParams=({params:t})=>{var e;return H({},t,{series:(e=t.series)!=null&&e.length?t.series:Pte,colors:t.colors??ok,theme:t.theme??"light"})};Ty.getInitialState=({series:t=[],colors:e,theme:n,dataset:r},i,a)=>({series:{seriesConfig:a,processedSeries:lk({series:t,colors:typeof e=="function"?e(n):e,seriesConfig:a,dataset:r})}});const ck=t=>t.series,ns=Ye([ck],t=>t.processedSeries),jo=Ye([ck],t=>t.seriesConfig),kte={abort:!0,animationcancel:!0,animationend:!0,animationiteration:!0,animationstart:!0,auxclick:!0,beforeinput:!0,beforetoggle:!0,blur:!0,cancel:!0,canplay:!0,canplaythrough:!0,change:!0,click:!0,close:!0,compositionend:!0,compositionstart:!0,compositionupdate:!0,contextlost:!0,contextmenu:!0,contextrestored:!0,copy:!0,cuechange:!0,cut:!0,dblclick:!0,drag:!0,dragend:!0,dragenter:!0,dragleave:!0,dragover:!0,dragstart:!0,drop:!0,durationchange:!0,emptied:!0,ended:!0,error:!0,focus:!0,focusin:!0,focusout:!0,formdata:!0,gotpointercapture:!0,input:!0,invalid:!0,keydown:!0,keypress:!0,keyup:!0,load:!0,loadeddata:!0,loadedmetadata:!0,loadstart:!0,lostpointercapture:!0,mousedown:!0,mouseenter:!0,mouseleave:!0,mousemove:!0,mouseout:!0,mouseover:!0,mouseup:!0,paste:!0,pause:!0,play:!0,playing:!0,pointercancel:!0,pointerdown:!0,pointerenter:!0,pointerleave:!0,pointermove:!0,pointerout:!0,pointerover:!0,pointerup:!0,progress:!0,ratechange:!0,reset:!0,resize:!0,scroll:!0,scrollend:!0,securitypolicyviolation:!0,seeked:!0,seeking:!0,select:!0,selectionchange:!0,selectstart:!0,slotchange:!0,stalled:!0,submit:!0,suspend:!0,timeupdate:!0,toggle:!0,touchcancel:!0,touchend:!0,touchmove:!0,touchstart:!0,transitioncancel:!0,transitionend:!0,transitionrun:!0,transitionstart:!0,volumechange:!0,waiting:!0,webkitanimationend:!0,webkitanimationiteration:!0,webkitanimationstart:!0,webkittransitionend:!0,wheel:!0,beforematch:!0,pointerrawupdate:!0};class uk{constructor(e){if(this.name=void 0,this.preventDefault=void 0,this.stopPropagation=void 0,this.preventIf=void 0,this.requiredKeys=void 0,this.keyboardManager=void 0,this.pointerMode=void 0,this.customData={},this.pointerManager=void 0,this.gesturesRegistry=void 0,this.element=void 0,this.state=void 0,this.isSinglePhase=void 0,this.eventType=void 0,this.optionsType=void 0,this.mutableOptionsType=void 0,this.mutableStateType=void 0,!e||!e.name)throw new Error("Gesture must be initialized with a valid name.");if(e.name in kte)throw new Error(`Gesture can't be created with a native event name. Tried to use "${e.name}". Please use a custom name instead.`);this.name=e.name,this.preventDefault=e.preventDefault??!1,this.stopPropagation=e.stopPropagation??!1,this.preventIf=e.preventIf??[],this.requiredKeys=e.requiredKeys??[],this.pointerMode=e.pointerMode??[]}init(e,n,r,i){this.element=e,this.pointerManager=n,this.gesturesRegistry=r,this.keyboardManager=i;const a=`${this.name}ChangeOptions`;this.element.addEventListener(a,this.handleOptionsChange.bind(this));const s=`${this.name}ChangeState`;this.element.addEventListener(s,this.handleStateChange.bind(this))}handleOptionsChange(e){e&&e.detail&&this.updateOptions(e.detail)}updateOptions(e){this.preventDefault=e.preventDefault??this.preventDefault,this.stopPropagation=e.stopPropagation??this.stopPropagation,this.preventIf=e.preventIf??this.preventIf,this.requiredKeys=e.requiredKeys??this.requiredKeys,this.pointerMode=e.pointerMode??this.pointerMode}handleStateChange(e){e&&e.detail&&this.updateState(e.detail)}updateState(e){Object.assign(this.state,e)}getTargetElement(e){return this.isActive||this.element===e.target||"contains"in this.element&&this.element.contains(e.target)||"getRootNode"in this.element&&this.element.getRootNode()instanceof ShadowRoot&&e.composedPath().includes(this.element)?this.element:null}set isActive(e){e?this.gesturesRegistry.registerActiveGesture(this.element,this):this.gesturesRegistry.unregisterActiveGesture(this.element,this)}get isActive(){return this.gesturesRegistry.isGestureActive(this.element,this)??!1}shouldPreventGesture(e){if(!this.keyboardManager.areKeysPressed(this.requiredKeys))return!0;if(this.preventIf.length===0)return!1;const n=this.gesturesRegistry.getActiveGestures(e);return this.preventIf.some(r=>n[r])}isPointerTypeAllowed(e){return!this.pointerMode||this.pointerMode.length===0?!0:this.pointerMode.includes(e)}destroy(){const e=`${this.name}ChangeOptions`;this.element.removeEventListener(e,this.handleOptionsChange.bind(this));const n=`${this.name}ChangeState`;this.element.removeEventListener(n,this.handleStateChange.bind(this))}}class Nte{constructor(){this.activeGestures=new Map}registerActiveGesture(e,n){this.activeGestures.has(e)||this.activeGestures.set(e,new Set);const r=this.activeGestures.get(e),i={gesture:n,element:e};r.add(i)}unregisterActiveGesture(e,n){const r=this.activeGestures.get(e);r&&(r.forEach(i=>{i.gesture===n&&r.delete(i)}),r.size===0&&this.activeGestures.delete(e))}getActiveGestures(e){const n=this.activeGestures.get(e);return n?Array.from(n).reduce((r,i)=>(r[i.gesture.name]=!0,r),{}):{}}isGestureActive(e,n){const r=this.activeGestures.get(e);return r?Array.from(r).some(i=>i.gesture===n):!1}destroy(){this.activeGestures.clear()}unregisterElement(e){this.activeGestures.delete(e)}}class Lte{constructor(){this.pressedKeys=new Set,this.handleKeyDown=e=>{this.pressedKeys.add(e.key)},this.handleKeyUp=e=>{this.pressedKeys.delete(e.key)},this.clearKeys=()=>{this.pressedKeys.clear()},this.initialize()}initialize(){typeof window>"u"||(window.addEventListener("keydown",this.handleKeyDown),window.addEventListener("keyup",this.handleKeyUp),window.addEventListener("blur",this.clearKeys))}areKeysPressed(e){return!e||e.length===0?!0:e.every(n=>n==="ControlOrMeta"?this.pressedKeys.has("Control")||this.pressedKeys.has("Meta"):this.pressedKeys.has(n))}destroy(){typeof window<"u"&&(window.removeEventListener("keydown",this.handleKeyDown),window.removeEventListener("keyup",this.handleKeyUp),window.removeEventListener("blur",this.clearKeys)),this.clearKeys()}}class Bte{constructor(e){this.root=void 0,this.touchAction=void 0,this.passive=void 0,this.preventEventInterruption=!0,this.pointers=new Map,this.gestureHandlers=new Set,this.handleInterruptEvents=n=>{if(this.preventEventInterruption&&"pointerType"in n&&n.pointerType==="touch"){n.preventDefault();return}const r=new PointerEvent("forceCancel",{bubbles:!1,cancelable:!1}),i=this.pointers.values().next().value;if(this.pointers.size>0&&i){Object.defineProperties(r,{clientX:{value:i.clientX},clientY:{value:i.clientY},pointerId:{value:i.pointerId},pointerType:{value:i.pointerType}});for(const[a,s]of this.pointers.entries()){const o=H({},s,{type:"forceCancel"});this.pointers.set(a,o)}}this.notifyHandlers(r),this.pointers.clear()},this.handlePointerEvent=n=>{const{type:r,pointerId:i}=n;if(r==="pointerdown"||r==="pointermove")this.pointers.set(i,this.createPointerData(n));else if(r==="pointerup"||r==="pointercancel"||r==="forceCancel"){this.pointers.set(i,this.createPointerData(n)),this.notifyHandlers(n),this.pointers.delete(i);return}this.notifyHandlers(n)},this.root=e.root??document.getRootNode({composed:!0}),this.touchAction=e.touchAction||"auto",this.passive=e.passive??!1,this.preventEventInterruption=e.preventEventInterruption??!1,this.setupEventListeners()}registerGestureHandler(e){return this.gestureHandlers.add(e),()=>{this.gestureHandlers.delete(e)}}getPointers(){return new Map(this.pointers)}setupEventListeners(){this.touchAction!=="auto"&&(this.root.style.touchAction=this.touchAction),this.root.addEventListener("pointerdown",this.handlePointerEvent,{passive:this.passive}),this.root.addEventListener("pointermove",this.handlePointerEvent,{passive:this.passive}),this.root.addEventListener("pointerup",this.handlePointerEvent,{passive:this.passive}),this.root.addEventListener("pointercancel",this.handlePointerEvent,{passive:this.passive}),this.root.addEventListener("forceCancel",this.handlePointerEvent,{passive:this.passive}),this.root.addEventListener("blur",this.handleInterruptEvents),this.root.addEventListener("contextmenu",this.handleInterruptEvents)}notifyHandlers(e){this.gestureHandlers.forEach(n=>n(this.pointers,e))}createPointerData(e){return{pointerId:e.pointerId,clientX:e.clientX,clientY:e.clientY,pageX:e.pageX,pageY:e.pageY,target:e.target,timeStamp:e.timeStamp,type:e.type,isPrimary:e.isPrimary,pressure:e.pressure,width:e.width,height:e.height,pointerType:e.pointerType,srcEvent:e}}destroy(){this.root.removeEventListener("pointerdown",this.handlePointerEvent),this.root.removeEventListener("pointermove",this.handlePointerEvent),this.root.removeEventListener("pointerup",this.handlePointerEvent),this.root.removeEventListener("pointercancel",this.handlePointerEvent),this.root.removeEventListener("forceCancel",this.handlePointerEvent),this.root.removeEventListener("blur",this.handleInterruptEvents),this.root.removeEventListener("contextmenu",this.handleInterruptEvents),this.pointers.clear(),this.gestureHandlers.clear()}}class Fte{constructor(e){this.gestureTemplates=new Map,this.elementGestureMap=new Map,this.activeGesturesRegistry=new Nte,this.pointerManager=void 0,this.keyboardManager=new Lte,this.pointerManager=new Bte({root:e.root,touchAction:e.touchAction,passive:e.passive}),e.gestures&&e.gestures.length>0&&e.gestures.forEach(n=>{this.addGestureTemplate(n)})}addGestureTemplate(e){this.gestureTemplates.has(e.name)&&console.warn(`Gesture template with name "${e.name}" already exists. It will be overwritten.`),this.gestureTemplates.set(e.name,e)}setGestureOptions(e,n,r){const i=this.elementGestureMap.get(n);if(!i||!i.has(e)){console.error(`Gesture "${e}" not found on the provided element.`);return}const a=new CustomEvent(`${e}ChangeOptions`,{detail:r,bubbles:!1,cancelable:!1,composed:!1});n.dispatchEvent(a)}setGestureState(e,n,r){const i=this.elementGestureMap.get(n);if(!i||!i.has(e)){console.error(`Gesture "${e}" not found on the provided element.`);return}const a=new CustomEvent(`${e}ChangeState`,{detail:r,bubbles:!1,cancelable:!1,composed:!1});n.dispatchEvent(a)}registerElement(e,n,r){return Array.isArray(e)||(e=[e]),e.forEach(i=>{const a=r==null?void 0:r[i];this.registerSingleGesture(i,n,a)}),n}registerSingleGesture(e,n,r){const i=this.gestureTemplates.get(e);if(!i)return console.error(`Gesture template "${e}" not found.`),!1;this.elementGestureMap.has(n)||this.elementGestureMap.set(n,new Map);const a=this.elementGestureMap.get(n);a.has(e)&&(console.warn(`Element already has gesture "${e}" registered. It will be replaced.`),this.unregisterElement(e,n));const s=i.clone(r);return s.init(n,this.pointerManager,this.activeGesturesRegistry,this.keyboardManager),a.set(e,s),!0}unregisterElement(e,n){const r=this.elementGestureMap.get(n);return!r||!r.has(e)?!1:(r.get(e).destroy(),r.delete(e),this.activeGesturesRegistry.unregisterElement(n),r.size===0&&this.elementGestureMap.delete(n),!0)}unregisterAllGestures(e){const n=this.elementGestureMap.get(e);if(n){for(const[,r]of n)r.destroy(),this.activeGesturesRegistry.unregisterElement(e);this.elementGestureMap.delete(e)}}destroy(){for(const[e]of this.elementGestureMap)this.unregisterAllGestures(e);this.gestureTemplates.clear(),this.elementGestureMap.clear(),this.activeGesturesRegistry.destroy(),this.keyboardManager.destroy(),this.pointerManager.destroy()}}class ip extends uk{constructor(e){super(e),this.unregisterHandler=null,this.originalTarget=null,this.optionsType=void 0,this.mutableOptionsType=void 0,this.minPointers=void 0,this.maxPointers=void 0,this.minPointers=e.minPointers??1,this.maxPointers=e.maxPointers??1/0}init(e,n,r,i){super.init(e,n,r,i),this.unregisterHandler=this.pointerManager.registerGestureHandler(this.handlePointerEvent.bind(this))}updateOptions(e){super.updateOptions(e),this.minPointers=e.minPointers??this.minPointers,this.maxPointers=e.maxPointers??this.maxPointers}getRelevantPointers(e,n){return e.filter(r=>this.isPointerTypeAllowed(r.pointerType)&&(n===r.target||r.target===this.originalTarget||n===this.originalTarget||"contains"in n&&n.contains(r.target))||"getRootNode"in n&&n.getRootNode()instanceof ShadowRoot&&r.srcEvent.composedPath().includes(n))}destroy(){this.unregisterHandler&&(this.unregisterHandler(),this.unregisterHandler=null),super.destroy()}}function jte(t,e){const n=e.x-t.x,r=e.y-t.y;return Math.sqrt(n*n+r*r)}function b2(t){if(t.length<2)return 0;let e=0,n=0;for(let r=0;r<t.length;r+=1)for(let i=r+1;i<t.length;i+=1)e+=jte({x:t[r].clientX,y:t[r].clientY},{x:t[i].clientX,y:t[i].clientY}),n+=1;return n>0?e/n:0}function Oo(t){if(t.length===0)return{x:0,y:0};const e=t.reduce((n,r)=>(n.x+=r.clientX,n.y+=r.clientY,n),{x:0,y:0});return{x:e.x/t.length,y:e.y/t.length}}function Ef(t,e){return`${t}${e==="ongoing"?"":e.charAt(0).toUpperCase()+e.slice(1)}`}const em=1e-5,wl=1e-5,JD=.15;function Vte(t,e){const n=e.x-t.x,r=e.y-t.y,i={vertical:null,horizontal:null,mainAxis:null},a=Ute(e,t),s=Math.abs(n)>Math.abs(r)?"horizontal":"vertical",o=a||s==="horizontal"?em:JD,c=a?em:s==="horizontal"?JD:em;return Math.abs(n)>o&&(i.horizontal=n>0?"right":"left"),Math.abs(r)>c&&(i.vertical=r>0?"down":"up"),i.mainAxis=a?"diagonal":s,i}function Ute(t,e){const n=e.x-t.x,r=e.y-t.y,i=Math.atan2(r,n)*180/Math.PI;return i>=-45+wl&&i<=-22.5+wl||i>=22.5+wl&&i<=45+wl||i>=135+wl&&i<=157.5+wl||i>=-157.5+wl&&i<=-135+wl}function Hte(t,e){if(!t.vertical&&!t.horizontal)return!1;if(e.length===0)return!0;const n=t.vertical===null||e.includes(t.vertical),r=t.horizontal===null||e.includes(t.horizontal);return n&&r}const e3=0,zte=t=>t>e3?1:t<-e3?-1:0;class q_ extends ip{constructor(e){super(e),this.state={lastPosition:null},this.isSinglePhase=void 0,this.eventType=void 0,this.optionsType=void 0,this.mutableOptionsType=void 0,this.mutableStateType=void 0,this.threshold=void 0,this.handleElementEnterBound=void 0,this.handleElementLeaveBound=void 0,this.handleElementEnterBound=this.handleElementEnter.bind(this),this.handleElementLeaveBound=this.handleElementLeave.bind(this),this.threshold=e.threshold||0}clone(e){return new q_(H({name:this.name,preventDefault:this.preventDefault,stopPropagation:this.stopPropagation,threshold:this.threshold,minPointers:this.minPointers,maxPointers:this.maxPointers,requiredKeys:[...this.requiredKeys],pointerMode:[...this.pointerMode],preventIf:[...this.preventIf]},e))}init(e,n,r,i){super.init(e,n,r,i),this.element.addEventListener("pointerenter",this.handleElementEnterBound),this.element.addEventListener("pointerleave",this.handleElementLeaveBound)}destroy(){this.element.removeEventListener("pointerenter",this.handleElementEnterBound),this.element.removeEventListener("pointerleave",this.handleElementLeaveBound),this.resetState(),super.destroy()}updateOptions(e){super.updateOptions(e)}resetState(){this.isActive=!1,this.state={lastPosition:null}}handleElementEnter(e){if(e.pointerType!=="mouse"&&e.pointerType!=="pen")return;const n=this.pointerManager.getPointers()||new Map,r=Array.from(n.values());if(r.length>=this.minPointers&&r.length<=this.maxPointers){this.isActive=!0;const i={x:e.clientX,y:e.clientY};this.state.lastPosition=i,this.emitMoveEvent(this.element,"start",r,e),this.emitMoveEvent(this.element,"ongoing",r,e)}}handleElementLeave(e){if(e.pointerType!=="mouse"&&e.pointerType!=="pen"||!this.isActive)return;const n=this.pointerManager.getPointers()||new Map,r=Array.from(n.values());this.emitMoveEvent(this.element,"end",r,e),this.resetState()}handlePointerEvent(e,n){if(n.type!=="pointermove"||n.pointerType!=="mouse"&&n.pointerType!=="pen")return;this.preventDefault&&n.preventDefault(),this.stopPropagation&&n.stopPropagation();const r=Array.from(e.values()),i=this.getTargetElement(n);if(!i||r.length<this.minPointers||r.length>this.maxPointers)return;if(this.shouldPreventGesture(i)){if(!this.isActive)return;this.resetState(),this.emitMoveEvent(i,"end",r,n);return}const a={x:n.clientX,y:n.clientY};this.state.lastPosition=a,this.isActive||(this.isActive=!0,this.emitMoveEvent(i,"start",r,n)),this.emitMoveEvent(i,"ongoing",r,n)}emitMoveEvent(e,n,r,i){const a=this.state.lastPosition||Oo(r),s=this.gesturesRegistry.getActiveGestures(e),o={gestureName:this.name,centroid:a,target:i.target,srcEvent:i,phase:n,pointers:r,timeStamp:i.timeStamp,activeGestures:s,customData:this.customData},c=Ef(this.name,n),d=new CustomEvent(c,{bubbles:!0,cancelable:!0,composed:!0,detail:o});e.dispatchEvent(d)}}class X_ extends ip{constructor(e){super(e),this.state={startPointers:new Map,startCentroid:null,lastCentroid:null,movementThresholdReached:!1,totalDeltaX:0,totalDeltaY:0,activeDeltaX:0,activeDeltaY:0,lastDirection:{vertical:null,horizontal:null,mainAxis:null},lastDeltas:null},this.isSinglePhase=void 0,this.eventType=void 0,this.optionsType=void 0,this.mutableOptionsType=void 0,this.mutableStateType=void 0,this.threshold=void 0,this.direction=void 0,this.direction=e.direction||["up","down","left","right"],this.threshold=e.threshold||0}clone(e){return new X_(H({name:this.name,preventDefault:this.preventDefault,stopPropagation:this.stopPropagation,threshold:this.threshold,minPointers:this.minPointers,maxPointers:this.maxPointers,direction:[...this.direction],requiredKeys:[...this.requiredKeys],pointerMode:[...this.pointerMode],preventIf:[...this.preventIf]},e))}destroy(){this.resetState(),super.destroy()}updateOptions(e){super.updateOptions(e),this.direction=e.direction||this.direction}resetState(){this.isActive=!1,this.state=H({},this.state,{startPointers:new Map,startCentroid:null,lastCentroid:null,lastDeltas:null,activeDeltaX:0,activeDeltaY:0,movementThresholdReached:!1,lastDirection:{vertical:null,horizontal:null,mainAxis:null}})}handlePointerEvent(e,n){const r=Array.from(e.values());if(n.type==="forceCancel"){this.cancel(n.target,r,n);return}const i=this.getTargetElement(n);if(!i)return;if(this.shouldPreventGesture(i)){this.cancel(i,r,n);return}const a=this.getRelevantPointers(r,i);if(a.length<this.minPointers||a.length>this.maxPointers){this.cancel(i,a,n);return}switch(n.type){case"pointerdown":!this.isActive&&!this.state.startCentroid&&(a.forEach(s=>{this.state.startPointers.set(s.pointerId,s)}),this.originalTarget=i,this.state.startCentroid=Oo(a),this.state.lastCentroid=H({},this.state.startCentroid));break;case"pointermove":if(this.state.startCentroid&&a.length>=this.minPointers){const s=Oo(a),o=s.x-this.state.startCentroid.x,c=s.y-this.state.startCentroid.y,d=Math.sqrt(o*o+c*c),f=Vte(this.state.lastCentroid??this.state.startCentroid,s),p=this.state.lastCentroid?s.x-this.state.lastCentroid.x:0,g=this.state.lastCentroid?s.y-this.state.lastCentroid.y:0;!this.state.movementThresholdReached&&d>=this.threshold&&Hte(f,this.direction)?(this.state.movementThresholdReached=!0,this.isActive=!0,this.state.lastDeltas={x:p,y:g},this.state.totalDeltaX+=p,this.state.totalDeltaY+=g,this.state.activeDeltaX+=p,this.state.activeDeltaY+=g,this.emitPanEvent(i,"start",a,n,s),this.emitPanEvent(i,"ongoing",a,n,s)):this.state.movementThresholdReached&&this.isActive&&(this.state.lastDeltas={x:p,y:g},this.state.totalDeltaX+=p,this.state.totalDeltaY+=g,this.state.activeDeltaX+=p,this.state.activeDeltaY+=g,this.emitPanEvent(i,"ongoing",a,n,s)),this.state.lastCentroid=s,this.state.lastDirection=f}break;case"pointerup":case"pointercancel":case"forceCancel":if(this.isActive&&this.state.movementThresholdReached){if(a.filter(s=>s.type!=="pointerup"&&s.type!=="pointercancel").length<this.minPointers){const s=this.state.lastCentroid||this.state.startCentroid;n.type==="pointercancel"&&this.emitPanEvent(i,"cancel",a,n,s),this.emitPanEvent(i,"end",a,n,s),this.resetState()}}else this.resetState();break}}emitPanEvent(e,n,r,i,a){var E,S;if(!this.state.startCentroid)return;const s=((E=this.state.lastDeltas)==null?void 0:E.x)??0,o=((S=this.state.lastDeltas)==null?void 0:S.y)??0,c=this.state.startPointers.values().next().value,d=c?(i.timeStamp-c.timeStamp)/1e3:0,f=d>0?s/d:0,p=d>0?o/d:0,g=Math.sqrt(f*f+p*p),m=this.gesturesRegistry.getActiveGestures(e),x={gestureName:this.name,initialCentroid:this.state.startCentroid,centroid:a,target:i.target,srcEvent:i,phase:n,pointers:r,timeStamp:i.timeStamp,deltaX:s,deltaY:o,direction:this.state.lastDirection,velocityX:f,velocityY:p,velocity:g,totalDeltaX:this.state.totalDeltaX,totalDeltaY:this.state.totalDeltaY,activeDeltaX:this.state.activeDeltaX,activeDeltaY:this.state.activeDeltaY,activeGestures:m,customData:this.customData},b=Ef(this.name,n),A=new CustomEvent(b,{bubbles:!0,cancelable:!0,composed:!0,detail:x});e.dispatchEvent(A),this.preventDefault&&i.preventDefault(),this.stopPropagation&&i.stopPropagation()}cancel(e,n,r){if(this.isActive){const i=e??this.element;this.emitPanEvent(i,"cancel",n,r,this.state.lastCentroid),this.emitPanEvent(i,"end",n,r,this.state.lastCentroid)}this.resetState()}}class K_ extends ip{constructor(e){super(H({},e,{minPointers:e.minPointers??2})),this.state={startDistance:0,lastDistance:0,lastScale:1,lastTime:0,velocity:0,totalScale:1,deltaScale:0},this.isSinglePhase=void 0,this.eventType=void 0,this.optionsType=void 0,this.mutableOptionsType=void 0,this.mutableStateType=void 0,this.threshold=void 0,this.threshold=e.threshold??0}clone(e){return new K_(H({name:this.name,preventDefault:this.preventDefault,stopPropagation:this.stopPropagation,threshold:this.threshold,minPointers:this.minPointers,maxPointers:this.maxPointers,requiredKeys:[...this.requiredKeys],pointerMode:[...this.pointerMode],preventIf:[...this.preventIf]},e))}destroy(){this.resetState(),super.destroy()}updateOptions(e){super.updateOptions(e)}resetState(){this.isActive=!1,this.state=H({},this.state,{startDistance:0,lastDistance:0,lastScale:1,lastTime:0,velocity:0,deltaScale:0})}handlePointerEvent(e,n){const r=Array.from(e.values()),i=this.getTargetElement(n);if(!i)return;if(this.shouldPreventGesture(i)){this.isActive&&(this.emitPinchEvent(i,"cancel",r,n),this.resetState());return}const a=this.getRelevantPointers(r,i);switch(n.type){case"pointerdown":if(a.length>=2&&!this.isActive){const s=b2(a);this.state.startDistance=s,this.state.lastDistance=s,this.state.lastTime=n.timeStamp,this.originalTarget=i}break;case"pointermove":if(this.state.startDistance&&a.length>=this.minPointers){const s=b2(a),o=Math.abs(s-this.state.lastDistance);if(o!==0&&o>=this.threshold){const c=this.state.startDistance?s/this.state.startDistance:1,d=c/this.state.lastScale;this.state.totalScale*=d;const f=(n.timeStamp-this.state.lastTime)/1e3;if(this.state.lastDistance){const g=(s-this.state.lastDistance)/f;this.state.velocity=Number.isNaN(g)?0:g}this.state.lastDistance=s,this.state.deltaScale=c-this.state.lastScale,this.state.lastScale=c,this.state.lastTime=n.timeStamp,this.isActive?this.emitPinchEvent(i,"ongoing",a,n):(this.isActive=!0,this.emitPinchEvent(i,"start",a,n),this.emitPinchEvent(i,"ongoing",a,n))}}break;case"pointerup":case"pointercancel":case"forceCancel":if(this.isActive){const s=a.filter(o=>o.type!=="pointerup"&&o.type!=="pointercancel");if(s.length<this.minPointers)n.type==="pointercancel"&&this.emitPinchEvent(i,"cancel",a,n),this.emitPinchEvent(i,"end",a,n),this.resetState();else if(s.length>=2){const o=b2(s);this.state.startDistance=o/this.state.lastScale}}break}}emitPinchEvent(e,n,r,i){const a=Oo(r),s=this.state.lastDistance,o=this.state.lastScale,c=this.gesturesRegistry.getActiveGestures(e),d={gestureName:this.name,centroid:a,target:i.target,srcEvent:i,phase:n,pointers:r,timeStamp:i.timeStamp,scale:o,deltaScale:this.state.deltaScale,totalScale:this.state.totalScale,distance:s,velocity:this.state.velocity,activeGestures:c,direction:zte(this.state.velocity),customData:this.customData};this.preventDefault&&i.preventDefault(),this.stopPropagation&&i.stopPropagation();const f=Ef(this.name,n),p=new CustomEvent(f,{bubbles:!0,cancelable:!0,composed:!0,detail:d});e.dispatchEvent(p)}}class Q_ extends ip{constructor(e){super(e),this.state={startCentroid:null,lastPosition:null,timerId:null,startTime:0,pressThresholdReached:!1},this.isSinglePhase=void 0,this.eventType=void 0,this.optionsType=void 0,this.mutableOptionsType=void 0,this.mutableStateType=void 0,this.duration=void 0,this.maxDistance=void 0,this.duration=e.duration??500,this.maxDistance=e.maxDistance??10}clone(e){return new Q_(H({name:this.name,preventDefault:this.preventDefault,stopPropagation:this.stopPropagation,minPointers:this.minPointers,maxPointers:this.maxPointers,duration:this.duration,maxDistance:this.maxDistance,requiredKeys:[...this.requiredKeys],pointerMode:[...this.pointerMode],preventIf:[...this.preventIf]},e))}destroy(){this.clearPressTimer(),this.resetState(),super.destroy()}updateOptions(e){super.updateOptions(e),this.duration=e.duration??this.duration,this.maxDistance=e.maxDistance??this.maxDistance}resetState(){this.clearPressTimer(),this.isActive=!1,this.state=H({},this.state,{startCentroid:null,lastPosition:null,timerId:null,startTime:0,pressThresholdReached:!1})}clearPressTimer(){this.state.timerId!==null&&(clearTimeout(this.state.timerId),this.state.timerId=null)}handlePointerEvent(e,n){const r=Array.from(e.values());if(n.type==="forceCancel"){this.cancelPress(n.target,r,n);return}const i=this.getTargetElement(n);if(!i)return;if(this.shouldPreventGesture(i)){this.isActive&&this.cancelPress(i,r,n);return}const a=this.getRelevantPointers(r,i);if(a.length<this.minPointers||a.length>this.maxPointers){this.isActive&&this.cancelPress(i,a,n);return}switch(n.type){case"pointerdown":!this.isActive&&!this.state.startCentroid&&(this.state.startCentroid=Oo(a),this.state.lastPosition=H({},this.state.startCentroid),this.state.startTime=n.timeStamp,this.isActive=!0,this.originalTarget=i,this.clearPressTimer(),this.state.timerId=setTimeout(()=>{if(this.isActive&&this.state.startCentroid){this.state.pressThresholdReached=!0;const s=this.state.lastPosition;this.emitPressEvent(i,"start",a,n,s),this.emitPressEvent(i,"ongoing",a,n,s)}},this.duration));break;case"pointermove":if(this.isActive&&this.state.startCentroid){const s=Oo(a);this.state.lastPosition=s;const o=s.x-this.state.startCentroid.x,c=s.y-this.state.startCentroid.y;Math.sqrt(o*o+c*c)>this.maxDistance&&this.cancelPress(i,a,n)}break;case"pointerup":if(this.isActive){if(this.state.pressThresholdReached){const s=this.state.lastPosition||this.state.startCentroid;this.emitPressEvent(i,"end",a,n,s)}this.resetState()}break;case"pointercancel":case"forceCancel":this.cancelPress(i,a,n);break}}emitPressEvent(e,n,r,i,a){const s=this.gesturesRegistry.getActiveGestures(e),o=i.timeStamp-this.state.startTime,c={gestureName:this.name,centroid:a,target:i.target,srcEvent:i,phase:n,pointers:r,timeStamp:i.timeStamp,x:a.x,y:a.y,duration:o,activeGestures:s,customData:this.customData},d=Ef(this.name,n),f=new CustomEvent(d,{bubbles:!0,cancelable:!0,composed:!0,detail:c});e.dispatchEvent(f),this.preventDefault&&i.preventDefault(),this.stopPropagation&&i.stopPropagation()}cancelPress(e,n,r){if(this.isActive&&this.state.pressThresholdReached){const i=this.state.lastPosition||this.state.startCentroid;this.emitPressEvent(e??this.element,"cancel",n,r,i),this.emitPressEvent(e??this.element,"end",n,r,i)}this.resetState()}}class Z_ extends ip{constructor(e){super(e),this.state={startCentroid:null,currentTapCount:0,lastTapTime:0,lastPosition:null},this.isSinglePhase=void 0,this.eventType=void 0,this.optionsType=void 0,this.mutableOptionsType=void 0,this.mutableStateType=void 0,this.maxDistance=void 0,this.taps=void 0,this.maxDistance=e.maxDistance??10,this.taps=e.taps??1}clone(e){return new Z_(H({name:this.name,preventDefault:this.preventDefault,stopPropagation:this.stopPropagation,minPointers:this.minPointers,maxPointers:this.maxPointers,maxDistance:this.maxDistance,taps:this.taps,requiredKeys:[...this.requiredKeys],pointerMode:[...this.pointerMode],preventIf:[...this.preventIf]},e))}destroy(){this.resetState(),super.destroy()}updateOptions(e){super.updateOptions(e),this.maxDistance=e.maxDistance??this.maxDistance,this.taps=e.taps??this.taps}resetState(){this.isActive=!1,this.state={startCentroid:null,currentTapCount:0,lastTapTime:0,lastPosition:null}}handlePointerEvent(e,n){const r=Array.from(e.values()),i=this.getTargetElement(n);if(!i)return;const a=this.getRelevantPointers(r,i);if(this.shouldPreventGesture(i)||a.length<this.minPointers||a.length>this.maxPointers){this.isActive&&this.cancelTap(i,a,n);return}switch(n.type){case"pointerdown":this.isActive||(this.state.startCentroid=Oo(a),this.state.lastPosition=H({},this.state.startCentroid),this.isActive=!0,this.originalTarget=i);break;case"pointermove":if(this.isActive&&this.state.startCentroid){const s=Oo(a);this.state.lastPosition=s;const o=s.x-this.state.startCentroid.x,c=s.y-this.state.startCentroid.y;Math.sqrt(o*o+c*c)>this.maxDistance&&this.cancelTap(i,a,n)}break;case"pointerup":if(this.isActive){this.state.currentTapCount+=1;const s=this.state.lastPosition||this.state.startCentroid;if(!s){this.cancelTap(i,a,n);return}this.state.currentTapCount>=this.taps?(this.fireTapEvent(i,a,n,s),this.resetState()):(this.state.lastTapTime=n.timeStamp,this.isActive=!1,this.state.startCentroid=null,setTimeout(()=>{this.state&&this.state.currentTapCount>0&&this.state.currentTapCount<this.taps&&(this.state.currentTapCount=0)},300))}break;case"pointercancel":case"forceCancel":this.cancelTap(i,a,n);break}}fireTapEvent(e,n,r,i){const a=this.gesturesRegistry.getActiveGestures(e),s={gestureName:this.name,centroid:i,target:r.target,srcEvent:r,phase:"end",pointers:n,timeStamp:r.timeStamp,x:i.x,y:i.y,tapCount:this.state.currentTapCount,activeGestures:a,customData:this.customData},o=new CustomEvent(this.name,{bubbles:!0,cancelable:!0,composed:!0,detail:s});e.dispatchEvent(o),this.preventDefault&&r.preventDefault(),this.stopPropagation&&r.stopPropagation()}cancelTap(e,n,r){if(this.state.startCentroid||this.state.lastPosition){const i=this.state.lastPosition||this.state.startCentroid,a=this.gesturesRegistry.getActiveGestures(e),s={gestureName:this.name,centroid:i,target:r.target,srcEvent:r,phase:"cancel",pointers:n,timeStamp:r.timeStamp,x:i.x,y:i.y,tapCount:this.state.currentTapCount,activeGestures:a,customData:this.customData},o=Ef(this.name,"cancel"),c=new CustomEvent(o,{bubbles:!0,cancelable:!0,composed:!0,detail:s});e.dispatchEvent(c)}this.resetState()}}class J_ extends uk{constructor(e){super(e),this.state={totalDeltaX:0,totalDeltaY:0,totalDeltaZ:0},this.isSinglePhase=void 0,this.eventType=void 0,this.optionsType=void 0,this.mutableOptionsType=void 0,this.mutableStateType=void 0,this.sensitivity=void 0,this.max=void 0,this.min=void 0,this.initialDelta=void 0,this.invert=void 0,this.handleWheelEventBound=void 0,this.sensitivity=e.sensitivity??1,this.max=e.max??Number.MAX_SAFE_INTEGER,this.min=e.min??Number.MIN_SAFE_INTEGER,this.initialDelta=e.initialDelta??0,this.invert=e.invert??!1,this.state.totalDeltaX=this.initialDelta,this.state.totalDeltaY=this.initialDelta,this.state.totalDeltaZ=this.initialDelta,this.handleWheelEventBound=this.handleWheelEvent.bind(this)}clone(e){return new J_(H({name:this.name,preventDefault:this.preventDefault,stopPropagation:this.stopPropagation,sensitivity:this.sensitivity,max:this.max,min:this.min,initialDelta:this.initialDelta,invert:this.invert,requiredKeys:[...this.requiredKeys],pointerMode:[...this.pointerMode],preventIf:[...this.preventIf]},e))}init(e,n,r,i){super.init(e,n,r,i),this.element.addEventListener("wheel",this.handleWheelEventBound)}destroy(){this.element.removeEventListener("wheel",this.handleWheelEventBound),this.resetState(),super.destroy()}resetState(){this.isActive=!1,this.state={totalDeltaX:0,totalDeltaY:0,totalDeltaZ:0}}updateOptions(e){super.updateOptions(e),this.sensitivity=e.sensitivity??this.sensitivity,this.max=e.max??this.max,this.min=e.min??this.min,this.initialDelta=e.initialDelta??this.initialDelta,this.invert=e.invert??this.invert}handleWheelEvent(e){if(this.shouldPreventGesture(this.element))return;const n=this.pointerManager.getPointers()||new Map,r=Array.from(n.values());this.state.totalDeltaX+=e.deltaX*this.sensitivity*(this.invert?-1:1),this.state.totalDeltaY+=e.deltaY*this.sensitivity*(this.invert?-1:1),this.state.totalDeltaZ+=e.deltaZ*this.sensitivity*(this.invert?-1:1),["totalDeltaX","totalDeltaY","totalDeltaZ"].forEach(i=>{this.state[i]<this.min&&(this.state[i]=this.min),this.state[i]>this.max&&(this.state[i]=this.max)}),this.emitWheelEvent(r,e)}emitWheelEvent(e,n){const r=e.length>0?Oo(e):{x:n.clientX,y:n.clientY},i=this.gesturesRegistry.getActiveGestures(this.element),a={gestureName:this.name,centroid:r,target:n.target,srcEvent:n,phase:"ongoing",pointers:e,timeStamp:n.timeStamp,deltaX:n.deltaX*this.sensitivity*(this.invert?-1:1),deltaY:n.deltaY*this.sensitivity*(this.invert?-1:1),deltaZ:n.deltaZ*this.sensitivity*(this.invert?-1:1),deltaMode:n.deltaMode,totalDeltaX:this.state.totalDeltaX,totalDeltaY:this.state.totalDeltaY,totalDeltaZ:this.state.totalDeltaZ,activeGestures:i,customData:this.customData};this.preventDefault&&n.preventDefault(),this.stopPropagation&&n.stopPropagation();const s=Ef(this.name,"ongoing"),o=new CustomEvent(s,{bubbles:!0,cancelable:!0,composed:!0,detail:a});this.element.dispatchEvent(o)}}const cd=t=>t.preventDefault(),eA=({svgRef:t})=>{O.useEffect(()=>{const n=t.current;if(!n)return;const r=new Fte({gestures:[new X_({name:"pan",threshold:0,maxPointers:1}),new q_({name:"move",preventIf:["pan","pinch"]}),new K_({name:"pinch",threshold:5,preventIf:["pan"]}),new J_({name:"turnWheel",sensitivity:.01,initialDelta:1}),new Z_({name:"tap",maxDistance:10,preventIf:["pan","pinch"]}),new Q_({name:"quickPress",duration:50,maxDistance:10})]});return r.registerElement(["pan","move","pinch","turnWheel","tap","quickPress"],n),()=>{r.destroy()}},[t]);const e=O.useCallback((n,r,i)=>{const a=t.current;return a==null||a.addEventListener(n,r,i),{cleanup:()=>a==null?void 0:a.removeEventListener(n,r)}},[t]);return O.useEffect(()=>{const n=t.current;return n==null||n.addEventListener("gesturestart",cd),n==null||n.addEventListener("gesturechange",cd),n==null||n.addEventListener("gestureend",cd),()=>{n==null||n.removeEventListener("gesturestart",cd),n==null||n.removeEventListener("gesturechange",cd),n==null||n.removeEventListener("gestureend",cd)}},[t]),{instance:{addInteractionListener:e}}};eA.params={};eA.getInitialState=()=>({});const $te=[Y_,W_,Cy,Ty,eA,Sy],Gte=["apiRef"],Wte=t=>{let{plugins:e}=t,n=je(t.props,Gte);const r={};e.forEach(s=>{Object.assign(r,s.params)});const i={};return Object.keys(n).forEach(s=>{const o=n[s];r[s]&&(i[s]=o)}),e.reduce((s,o)=>o.getDefaultizedParams?o.getDefaultizedParams({params:s}):s,i)};let t3=0;function Yte(t,e,n){const r=F0(),i=O.useMemo(()=>[...$te,...t],[t]),a=Wte({plugins:i,props:e});a.id=a.id??r;const o=O.useRef({}).current,c=Xte(e.apiRef),d=O.useRef(null),f=O.useRef(null),p=O.useRef(null);if(p.current==null){t3+=1;const x={cacheKey:{id:t3}};i.forEach(b=>{b.getInitialState&&Object.assign(x,b.getInitialState(a,x,n))}),p.current=new Gee(x)}const g=x=>{const b=x({instance:o,params:a,plugins:i,store:p.current,svgRef:f,chartRootRef:d,seriesConfig:n});b.publicAPI&&Object.assign(c.current,b.publicAPI),b.instance&&Object.assign(o,b.instance)};return i.forEach(g),{contextValue:O.useMemo(()=>({store:p.current,publicAPI:c.current,instance:o,svgRef:f,chartRootRef:d}),[o,c])}}function qte(t){return t.current==null&&(t.current={}),t}function Xte(t){const e=O.useRef({});return t?qte(t):e}const dk=O.createContext(null),fk=()=>{},hk=4,pk=20+2*hk,Kte=40+2*hk,Qte="hover",Zte={top:5,bottom:5,left:5,right:5},tm={minStart:0,maxEnd:100,step:5,minSpan:10,maxSpan:100,panning:!0,filterMode:"keep",slider:{enabled:!1,preview:!1,size:pk,showTooltip:Qte}},tA=(t,e,n)=>{var r;if(t)return t===!0?H({axisId:e,axisDirection:n},tm):H({axisId:e,axisDirection:n},tm,t,{slider:H({},tm.slider,{size:((r=t.slider)==null?void 0:r.preview)??tm.slider.preview?Kte:pk},t.slider)})};function gk(t,e){const n={top:0,bottom:0,none:0};return(t&&t.length>0?t:[{id:$_,scaleType:"linear"}]).map((a,s)=>{var m;const o=a.dataKey,c=s===0?"bottom":"none",d=a.position??c,f=$ee+(a.label?JP:0),p=a.id??`defaultized-x-axis-${s}`,g=H({offset:n[d]},a,{id:p,position:d,height:a.height??f,zoom:tA(a.zoom,p,"x")});if(d!=="none"&&(n[d]+=g.height,(m=g.zoom)!=null&&m.slider.enabled&&(n[d]+=g.zoom.slider.size)),o===void 0||a.data!==void 0)return g;if(e===void 0)throw new Error("MUI X Charts: x-axis uses `dataKey` but no `dataset` is provided.");return H({},g,{data:e.map(x=>x[o])})})}function mk(t,e){const n={right:0,left:0,none:0};return(t&&t.length>0?t:[{id:G_,scaleType:"linear"}]).map((a,s)=>{var m;const o=a.dataKey,c=s===0?"left":"none",d=a.position??c,f=zee+(a.label?JP:0),p=a.id??`defaultized-y-axis-${s}`,g=H({offset:n[d]},a,{id:p,position:d,width:a.width??f,zoom:tA(a.zoom,p,"y")});if(d!=="none"&&(n[d]+=g.width,(m=g.zoom)!=null&&m.slider.enabled&&(n[d]+=g.zoom.slider.size)),o===void 0||a.data!==void 0)return g;if(e===void 0)throw new Error("MUI X Charts: y-axis uses `dataKey` but no `dataset` is provided.");return H({},g,{data:e.map(x=>x[o])})})}function Cm(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Jte(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function nA(t){let e,n,r;t.length!==2?(e=Cm,n=(o,c)=>Cm(t(o),c),r=(o,c)=>t(o)-c):(e=t===Cm||t===Jte?t:ene,n=t,r=t);function i(o,c,d=0,f=o.length){if(d<f){if(e(c,c)!==0)return f;do{const p=d+f>>>1;n(o[p],c)<0?d=p+1:f=p}while(d<f)}return d}function a(o,c,d=0,f=o.length){if(d<f){if(e(c,c)!==0)return f;do{const p=d+f>>>1;n(o[p],c)<=0?d=p+1:f=p}while(d<f)}return d}function s(o,c,d=0,f=o.length){const p=i(o,c,d,f-1);return p>d&&r(o[p-1],c)>-r(o[p],c)?p-1:p}return{left:i,center:s,right:a}}function ene(){return 0}function tne(t){return t===null?NaN:+t}const nne=nA(Cm),yk=nne.right;nA(tne).center;class n3 extends Map{constructor(e,n=ane){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,i]of e)this.set(r,i)}get(e){return super.get(r3(this,e))}has(e){return super.has(r3(this,e))}set(e,n){return super.set(rne(this,e),n)}delete(e){return super.delete(ine(this,e))}}function r3({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function rne({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function ine({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function ane(t){return t!==null&&typeof t=="object"?t.valueOf():t}const sne=Math.sqrt(50),one=Math.sqrt(10),lne=Math.sqrt(2);function f1(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),a=r/Math.pow(10,i),s=a>=sne?10:a>=one?5:a>=lne?2:1;let o,c,d;return i<0?(d=Math.pow(10,-i)/s,o=Math.round(t*d),c=Math.round(e*d),o/d<t&&++o,c/d>e&&--c,d=-d):(d=Math.pow(10,i)*s,o=Math.round(t/d),c=Math.round(e/d),o*d<t&&++o,c*d>e&&--c),c<o&&.5<=n&&n<2?f1(t,e,n*2):[o,c,d]}function Uw(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[i,a,s]=r?f1(e,t,n):f1(t,e,n);if(!(a>=i))return[];const o=a-i+1,c=new Array(o);if(r)if(s<0)for(let d=0;d<o;++d)c[d]=(a-d)/-s;else for(let d=0;d<o;++d)c[d]=(a-d)*s;else if(s<0)for(let d=0;d<o;++d)c[d]=(i+d)/-s;else for(let d=0;d<o;++d)c[d]=(i+d)*s;return c}function Hw(t,e,n){return e=+e,t=+t,n=+n,f1(t,e,n)[2]}function zw(t,e,n){e=+e,t=+t,n=+n;const r=e<t,i=r?Hw(e,t,n):Hw(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}function cne(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((e-t)/n))|0,a=new Array(i);++r<i;)a[r]=t+r*n;return a}function Vo(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function une(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const i3=Symbol("implicit");function h1(){var t=new n3,e=[],n=[],r=i3;function i(a){let s=t.get(a);if(s===void 0){if(r!==i3)return r;t.set(a,s=e.push(a)-1)}return n[s%n.length]}return i.domain=function(a){if(!arguments.length)return e.slice();e=[],t=new n3;for(const s of a)t.has(s)||t.set(s,e.push(s)-1);return i},i.range=function(a){return arguments.length?(n=Array.from(a),i):n.slice()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return h1(e,n).unknown(r)},Vo.apply(i,arguments),i}function Iy(){var t=h1().unknown(void 0),e=t.domain,n=t.range,r=0,i=1,a,s,o=!1,c=0,d=0,f=.5;delete t.unknown;function p(){var g=e().length,m=i<r,x=m?i:r,b=m?r:i;a=(b-x)/Math.max(1,g-c+d*2),o&&(a=Math.floor(a)),x+=(b-x-a*(g-c))*f,s=a*(1-c),o&&(x=Math.round(x),s=Math.round(s));var A=cne(g).map(function(E){return x+a*E});return n(m?A.reverse():A)}return t.domain=function(g){return arguments.length?(e(g),p()):e()},t.range=function(g){return arguments.length?([r,i]=g,r=+r,i=+i,p()):[r,i]},t.rangeRound=function(g){return[r,i]=g,r=+r,i=+i,o=!0,p()},t.bandwidth=function(){return s},t.step=function(){return a},t.round=function(g){return arguments.length?(o=!!g,p()):o},t.padding=function(g){return arguments.length?(c=Math.min(1,d=+g),p()):c},t.paddingInner=function(g){return arguments.length?(c=Math.min(1,g),p()):c},t.paddingOuter=function(g){return arguments.length?(d=+g,p()):d},t.align=function(g){return arguments.length?(f=Math.max(0,Math.min(1,g)),p()):f},t.copy=function(){return Iy(e(),[r,i]).round(o).paddingInner(c).paddingOuter(d).align(f)},Vo.apply(p(),arguments)}function vk(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return vk(e())},t}function xk(){return vk(Iy.apply(null,arguments).paddingInner(1))}function rA(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function wk(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function ap(){}var M0=.7,p1=1/M0,Ud="\\s*([+-]?\\d+)\\s*",P0="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ls="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",dne=/^#([0-9a-f]{3,8})$/,fne=new RegExp(`^rgb\\(${Ud},${Ud},${Ud}\\)$`),hne=new RegExp(`^rgb\\(${Ls},${Ls},${Ls}\\)$`),pne=new RegExp(`^rgba\\(${Ud},${Ud},${Ud},${P0}\\)$`),gne=new RegExp(`^rgba\\(${Ls},${Ls},${Ls},${P0}\\)$`),mne=new RegExp(`^hsl\\(${P0},${Ls},${Ls}\\)$`),yne=new RegExp(`^hsla\\(${P0},${Ls},${Ls},${P0}\\)$`),a3={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};rA(ap,k0,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:s3,formatHex:s3,formatHex8:vne,formatHsl:xne,formatRgb:o3,toString:o3});function s3(){return this.rgb().formatHex()}function vne(){return this.rgb().formatHex8()}function xne(){return bk(this).formatHsl()}function o3(){return this.rgb().formatRgb()}function k0(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=dne.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?l3(e):n===3?new Wi(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?nm(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?nm(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=fne.exec(t))?new Wi(e[1],e[2],e[3],1):(e=hne.exec(t))?new Wi(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=pne.exec(t))?nm(e[1],e[2],e[3],e[4]):(e=gne.exec(t))?nm(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=mne.exec(t))?d3(e[1],e[2]/100,e[3]/100,1):(e=yne.exec(t))?d3(e[1],e[2]/100,e[3]/100,e[4]):a3.hasOwnProperty(t)?l3(a3[t]):t==="transparent"?new Wi(NaN,NaN,NaN,0):null}function l3(t){return new Wi(t>>16&255,t>>8&255,t&255,1)}function nm(t,e,n,r){return r<=0&&(t=e=n=NaN),new Wi(t,e,n,r)}function wne(t){return t instanceof ap||(t=k0(t)),t?(t=t.rgb(),new Wi(t.r,t.g,t.b,t.opacity)):new Wi}function $w(t,e,n,r){return arguments.length===1?wne(t):new Wi(t,e,n,r??1)}function Wi(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}rA(Wi,$w,wk(ap,{brighter(t){return t=t==null?p1:Math.pow(p1,t),new Wi(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?M0:Math.pow(M0,t),new Wi(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Wi(Xc(this.r),Xc(this.g),Xc(this.b),g1(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:c3,formatHex:c3,formatHex8:bne,formatRgb:u3,toString:u3}));function c3(){return`#${$c(this.r)}${$c(this.g)}${$c(this.b)}`}function bne(){return`#${$c(this.r)}${$c(this.g)}${$c(this.b)}${$c((isNaN(this.opacity)?1:this.opacity)*255)}`}function u3(){const t=g1(this.opacity);return`${t===1?"rgb(":"rgba("}${Xc(this.r)}, ${Xc(this.g)}, ${Xc(this.b)}${t===1?")":`, ${t})`}`}function g1(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Xc(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function $c(t){return t=Xc(t),(t<16?"0":"")+t.toString(16)}function d3(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new qa(t,e,n,r)}function bk(t){if(t instanceof qa)return new qa(t.h,t.s,t.l,t.opacity);if(t instanceof ap||(t=k0(t)),!t)return new qa;if(t instanceof qa)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),a=Math.max(e,n,r),s=NaN,o=a-i,c=(a+i)/2;return o?(e===a?s=(n-r)/o+(n<r)*6:n===a?s=(r-e)/o+2:s=(e-n)/o+4,o/=c<.5?a+i:2-a-i,s*=60):o=c>0&&c<1?0:s,new qa(s,o,c,t.opacity)}function _ne(t,e,n,r){return arguments.length===1?bk(t):new qa(t,e,n,r??1)}function qa(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}rA(qa,_ne,wk(ap,{brighter(t){return t=t==null?p1:Math.pow(p1,t),new qa(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?M0:Math.pow(M0,t),new qa(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new Wi(_2(t>=240?t-240:t+120,i,r),_2(t,i,r),_2(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new qa(f3(this.h),rm(this.s),rm(this.l),g1(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=g1(this.opacity);return`${t===1?"hsl(":"hsla("}${f3(this.h)}, ${rm(this.s)*100}%, ${rm(this.l)*100}%${t===1?")":`, ${t})`}`}}));function f3(t){return t=(t||0)%360,t<0?t+360:t}function rm(t){return Math.max(0,Math.min(1,t||0))}function _2(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const iA=t=>()=>t;function Ane(t,e){return function(n){return t+n*e}}function Ene(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function Sne(t){return(t=+t)==1?_k:function(e,n){return n-e?Ene(e,n,t):iA(isNaN(e)?n:e)}}function _k(t,e){var n=e-t;return n?Ane(t,n):iA(isNaN(t)?e:t)}const h3=function t(e){var n=Sne(e);function r(i,a){var s=n((i=$w(i)).r,(a=$w(a)).r),o=n(i.g,a.g),c=n(i.b,a.b),d=_k(i.opacity,a.opacity);return function(f){return i.r=s(f),i.g=o(f),i.b=c(f),i.opacity=d(f),i+""}}return r.gamma=t,r}(1);function Cne(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(a){for(i=0;i<n;++i)r[i]=t[i]*(1-a)+e[i]*a;return r}}function Tne(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Ine(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),a=new Array(n),s;for(s=0;s<r;++s)i[s]=Dy(t[s],e[s]);for(;s<n;++s)a[s]=e[s];return function(o){for(s=0;s<r;++s)a[s]=i[s](o);return a}}function aA(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function Jt(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function Dne(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=Dy(t[i],e[i]):r[i]=e[i];return function(a){for(i in n)r[i]=n[i](a);return r}}var Gw=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,A2=new RegExp(Gw.source,"g");function Rne(t){return function(){return t}}function One(t){return function(e){return t(e)+""}}function Mne(t,e){var n=Gw.lastIndex=A2.lastIndex=0,r,i,a,s=-1,o=[],c=[];for(t=t+"",e=e+"";(r=Gw.exec(t))&&(i=A2.exec(e));)(a=i.index)>n&&(a=e.slice(n,a),o[s]?o[s]+=a:o[++s]=a),(r=r[0])===(i=i[0])?o[s]?o[s]+=i:o[++s]=i:(o[++s]=null,c.push({i:s,x:Jt(r,i)})),n=A2.lastIndex;return n<e.length&&(a=e.slice(n),o[s]?o[s]+=a:o[++s]=a),o.length<2?c[0]?One(c[0].x):Rne(e):(e=c.length,function(d){for(var f=0,p;f<e;++f)o[(p=c[f]).i]=p.x(d);return o.join("")})}function Dy(t,e){var n=typeof e,r;return e==null||n==="boolean"?iA(e):(n==="number"?Jt:n==="string"?(r=k0(e))?(e=r,h3):Mne:e instanceof k0?h3:e instanceof Date?aA:Tne(e)?Cne:Array.isArray(e)?Ine:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?Dne:Jt)(t,e)}function Ak(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function Pne(t){return function(){return t}}function kne(t){return+t}var p3=[0,1];function Da(t){return t}function Ww(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:Pne(isNaN(e)?NaN:.5)}function Nne(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function Lne(t,e,n){var r=t[0],i=t[1],a=e[0],s=e[1];return i<r?(r=Ww(i,r),a=n(s,a)):(r=Ww(r,i),a=n(a,s)),function(o){return a(r(o))}}function Bne(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),a=new Array(r),s=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++s<r;)i[s]=Ww(t[s],t[s+1]),a[s]=n(e[s],e[s+1]);return function(o){var c=yk(t,o,1,r)-1;return a[c](i[c](o))}}function sp(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function Ry(){var t=p3,e=p3,n=Dy,r,i,a,s=Da,o,c,d;function f(){var g=Math.min(t.length,e.length);return s!==Da&&(s=Nne(t[0],t[g-1])),o=g>2?Bne:Lne,c=d=null,p}function p(g){return g==null||isNaN(g=+g)?a:(c||(c=o(t.map(r),e,n)))(r(s(g)))}return p.invert=function(g){return s(i((d||(d=o(e,t.map(r),Jt)))(g)))},p.domain=function(g){return arguments.length?(t=Array.from(g,kne),f()):t.slice()},p.range=function(g){return arguments.length?(e=Array.from(g),f()):e.slice()},p.rangeRound=function(g){return e=Array.from(g),n=Ak,f()},p.clamp=function(g){return arguments.length?(s=g?!0:Da,f()):s!==Da},p.interpolate=function(g){return arguments.length?(n=g,f()):n},p.unknown=function(g){return arguments.length?(a=g,p):a},function(g,m){return r=g,i=m,f()}}function Ek(){return Ry()(Da,Da)}function Fne(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function m1(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function nf(t){return t=m1(Math.abs(t)),t?t[1]:NaN}function jne(t,e){return function(n,r){for(var i=n.length,a=[],s=0,o=t[0],c=0;i>0&&o>0&&(c+o+1>r&&(o=Math.max(1,r-c)),a.push(n.substring(i-=o,i+o)),!((c+=o+1)>r));)o=t[s=(s+1)%t.length];return a.reverse().join(e)}}function Vne(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var Une=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function N0(t){if(!(e=Une.exec(t)))throw new Error("invalid format: "+t);var e;return new sA({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}N0.prototype=sA.prototype;function sA(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}sA.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Hne(t){e:for(var e=t.length,n=1,r=-1,i;n<e;++n)switch(t[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+t[n])break e;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var Sk;function zne(t,e){var n=m1(t,e);if(!n)return t+"";var r=n[0],i=n[1],a=i-(Sk=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,s=r.length;return a===s?r:a>s?r+new Array(a-s+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+m1(t,Math.max(0,e+a-1))[0]}function g3(t,e){var n=m1(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const m3={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:Fne,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>g3(t*100,e),r:g3,s:zne,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function y3(t){return t}var v3=Array.prototype.map,x3=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function $ne(t){var e=t.grouping===void 0||t.thousands===void 0?y3:jne(v3.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",a=t.numerals===void 0?y3:Vne(v3.call(t.numerals,String)),s=t.percent===void 0?"%":t.percent+"",o=t.minus===void 0?"":t.minus+"",c=t.nan===void 0?"NaN":t.nan+"";function d(p){p=N0(p);var g=p.fill,m=p.align,x=p.sign,b=p.symbol,A=p.zero,E=p.width,S=p.comma,T=p.precision,I=p.trim,P=p.type;P==="n"?(S=!0,P="g"):m3[P]||(T===void 0&&(T=12),I=!0,P="g"),(A||g==="0"&&m==="=")&&(A=!0,g="0",m="=");var F=b==="$"?n:b==="#"&&/[boxX]/.test(P)?"0"+P.toLowerCase():"",M=b==="$"?r:/[%p]/.test(P)?s:"",D=m3[P],R=/[defgprs%]/.test(P);T=T===void 0?6:/[gprs]/.test(P)?Math.max(1,Math.min(21,T)):Math.max(0,Math.min(20,T));function B(N){var k=F,j=M,q,X,G;if(P==="c")j=D(N)+j,N="";else{N=+N;var W=N<0||1/N<0;if(N=isNaN(N)?c:D(Math.abs(N),T),I&&(N=Hne(N)),W&&+N==0&&x!=="+"&&(W=!1),k=(W?x==="("?x:o:x==="-"||x==="("?"":x)+k,j=(P==="s"?x3[8+Sk/3]:"")+j+(W&&x==="("?")":""),R){for(q=-1,X=N.length;++q<X;)if(G=N.charCodeAt(q),48>G||G>57){j=(G===46?i+N.slice(q+1):N.slice(q))+j,N=N.slice(0,q);break}}}S&&!A&&(N=e(N,1/0));var K=k.length+N.length+j.length,Z=K<E?new Array(E-K+1).join(g):"";switch(S&&A&&(N=e(Z+N,Z.length?E-j.length:1/0),Z=""),m){case"<":N=k+N+j+Z;break;case"=":N=k+Z+N+j;break;case"^":N=Z.slice(0,K=Z.length>>1)+k+N+j+Z.slice(K);break;default:N=Z+k+N+j;break}return a(N)}return B.toString=function(){return p+""},B}function f(p,g){var m=d((p=N0(p),p.type="f",p)),x=Math.max(-8,Math.min(8,Math.floor(nf(g)/3)))*3,b=Math.pow(10,-x),A=x3[8+x/3];return function(E){return m(b*E)+A}}return{format:d,formatPrefix:f}}var im,oA,Ck;Gne({thousands:",",grouping:[3],currency:["$",""]});function Gne(t){return im=$ne(t),oA=im.format,Ck=im.formatPrefix,im}function Wne(t){return Math.max(0,-nf(Math.abs(t)))}function Yne(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(nf(e)/3)))*3-nf(Math.abs(t)))}function qne(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,nf(e)-nf(t))+1}function Xne(t,e,n,r){var i=zw(t,e,n),a;switch(r=N0(r??",f"),r.type){case"s":{var s=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(a=Yne(i,s))&&(r.precision=a),Ck(r,s)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(a=qne(i,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=a-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(a=Wne(i))&&(r.precision=a-(r.type==="%")*2);break}}return oA(r)}function Oy(t){var e=t.domain;return t.ticks=function(n){var r=e();return Uw(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var i=e();return Xne(i[0],i[i.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),i=0,a=r.length-1,s=r[i],o=r[a],c,d,f=10;for(o<s&&(d=s,s=o,o=d,d=i,i=a,a=d);f-- >0;){if(d=Hw(s,o,n),d===c)return r[i]=s,r[a]=o,e(r);if(d>0)s=Math.floor(s/d)*d,o=Math.ceil(o/d)*d;else if(d<0)s=Math.ceil(s*d)/d,o=Math.floor(o*d)/d;else break;c=d}return t},t}function lA(){var t=Ek();return t.copy=function(){return sp(t,lA())},Vo.apply(t,arguments),Oy(t)}function Tk(t,e){t=t.slice();var n=0,r=t.length-1,i=t[n],a=t[r],s;return a<i&&(s=n,n=r,r=s,s=i,i=a,a=s),t[n]=e.floor(i),t[r]=e.ceil(a),t}function w3(t){return Math.log(t)}function b3(t){return Math.exp(t)}function Kne(t){return-Math.log(-t)}function Qne(t){return-Math.exp(-t)}function Zne(t){return isFinite(t)?+("1e"+t):t<0?0:t}function Jne(t){return t===10?Zne:t===Math.E?Math.exp:e=>Math.pow(t,e)}function ere(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function _3(t){return(e,n)=>-t(-e,n)}function tre(t){const e=t(w3,b3),n=e.domain;let r=10,i,a;function s(){return i=ere(r),a=Jne(r),n()[0]<0?(i=_3(i),a=_3(a),t(Kne,Qne)):t(w3,b3),e}return e.base=function(o){return arguments.length?(r=+o,s()):r},e.domain=function(o){return arguments.length?(n(o),s()):n()},e.ticks=o=>{const c=n();let d=c[0],f=c[c.length-1];const p=f<d;p&&([d,f]=[f,d]);let g=i(d),m=i(f),x,b;const A=o==null?10:+o;let E=[];if(!(r%1)&&m-g<A){if(g=Math.floor(g),m=Math.ceil(m),d>0){for(;g<=m;++g)for(x=1;x<r;++x)if(b=g<0?x/a(-g):x*a(g),!(b<d)){if(b>f)break;E.push(b)}}else for(;g<=m;++g)for(x=r-1;x>=1;--x)if(b=g>0?x/a(-g):x*a(g),!(b<d)){if(b>f)break;E.push(b)}E.length*2<A&&(E=Uw(d,f,A))}else E=Uw(g,m,Math.min(m-g,A)).map(a);return p?E.reverse():E},e.tickFormat=(o,c)=>{if(o==null&&(o=10),c==null&&(c=r===10?"s":","),typeof c!="function"&&(!(r%1)&&(c=N0(c)).precision==null&&(c.trim=!0),c=oA(c)),o===1/0)return c;const d=Math.max(1,r*o/e.ticks().length);return f=>{let p=f/a(Math.round(i(f)));return p*r<r-.5&&(p*=r),p<=d?c(f):""}},e.nice=()=>n(Tk(n(),{floor:o=>a(Math.floor(i(o))),ceil:o=>a(Math.ceil(i(o)))})),e}function y1(){const t=tre(Ry()).domain([1,10]);return t.copy=()=>sp(t,y1()).base(t.base()),Vo.apply(t,arguments),t}function A3(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function E3(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function nre(t){var e=1,n=t(A3(e),E3(e));return n.constant=function(r){return arguments.length?t(A3(e=+r),E3(e)):e},Oy(n)}function Ik(){var t=nre(Ry());return t.copy=function(){return sp(t,Ik()).constant(t.constant())},Vo.apply(t,arguments)}function S3(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function rre(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function ire(t){return t<0?-t*t:t*t}function are(t){var e=t(Da,Da),n=1;function r(){return n===1?t(Da,Da):n===.5?t(rre,ire):t(S3(n),S3(1/n))}return e.exponent=function(i){return arguments.length?(n=+i,r()):n},Oy(e)}function cA(){var t=are(Ry());return t.copy=function(){return sp(t,cA()).exponent(t.exponent())},Vo.apply(t,arguments),t}function sre(){return cA.apply(null,arguments).exponent(.5)}function Dk(){var t=[.5],e=[0,1],n,r=1;function i(a){return a!=null&&a<=a?e[yk(t,a,0,r)]:n}return i.domain=function(a){return arguments.length?(t=Array.from(a),r=Math.min(t.length,e.length-1),i):t.slice()},i.range=function(a){return arguments.length?(e=Array.from(a),r=Math.min(t.length,e.length-1),i):e.slice()},i.invertExtent=function(a){var s=e.indexOf(a);return[t[s-1],t[s]]},i.unknown=function(a){return arguments.length?(n=a,i):n},i.copy=function(){return Dk().domain(t).range(e).unknown(n)},Vo.apply(i,arguments)}const E2=new Date,S2=new Date;function kr(t,e,n,r){function i(a){return t(a=arguments.length===0?new Date:new Date(+a)),a}return i.floor=a=>(t(a=new Date(+a)),a),i.ceil=a=>(t(a=new Date(a-1)),e(a,1),t(a),a),i.round=a=>{const s=i(a),o=i.ceil(a);return a-s<o-a?s:o},i.offset=(a,s)=>(e(a=new Date(+a),s==null?1:Math.floor(s)),a),i.range=(a,s,o)=>{const c=[];if(a=i.ceil(a),o=o==null?1:Math.floor(o),!(a<s)||!(o>0))return c;let d;do c.push(d=new Date(+a)),e(a,o),t(a);while(d<a&&a<s);return c},i.filter=a=>kr(s=>{if(s>=s)for(;t(s),!a(s);)s.setTime(s-1)},(s,o)=>{if(s>=s)if(o<0)for(;++o<=0;)for(;e(s,-1),!a(s););else for(;--o>=0;)for(;e(s,1),!a(s););}),n&&(i.count=(a,s)=>(E2.setTime(+a),S2.setTime(+s),t(E2),t(S2),Math.floor(n(E2,S2))),i.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?i.filter(r?s=>r(s)%a===0:s=>i.count(0,s)%a===0):i)),i}const v1=kr(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);v1.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?kr(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):v1);v1.range;const xo=1e3,Ra=xo*60,wo=Ra*60,Mo=wo*24,uA=Mo*7,C3=Mo*30,C2=Mo*365,Gc=kr(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*xo)},(t,e)=>(e-t)/xo,t=>t.getUTCSeconds());Gc.range;const dA=kr(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*xo)},(t,e)=>{t.setTime(+t+e*Ra)},(t,e)=>(e-t)/Ra,t=>t.getMinutes());dA.range;const fA=kr(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*Ra)},(t,e)=>(e-t)/Ra,t=>t.getUTCMinutes());fA.range;const hA=kr(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*xo-t.getMinutes()*Ra)},(t,e)=>{t.setTime(+t+e*wo)},(t,e)=>(e-t)/wo,t=>t.getHours());hA.range;const pA=kr(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*wo)},(t,e)=>(e-t)/wo,t=>t.getUTCHours());pA.range;const op=kr(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Ra)/Mo,t=>t.getDate()-1);op.range;const My=kr(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Mo,t=>t.getUTCDate()-1);My.range;const Rk=kr(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Mo,t=>Math.floor(t/Mo));Rk.range;function hu(t){return kr(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*Ra)/uA)}const Py=hu(0),x1=hu(1),ore=hu(2),lre=hu(3),rf=hu(4),cre=hu(5),ure=hu(6);Py.range;x1.range;ore.range;lre.range;rf.range;cre.range;ure.range;function pu(t){return kr(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/uA)}const ky=pu(0),w1=pu(1),dre=pu(2),fre=pu(3),af=pu(4),hre=pu(5),pre=pu(6);ky.range;w1.range;dre.range;fre.range;af.range;hre.range;pre.range;const gA=kr(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());gA.range;const mA=kr(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());mA.range;const Po=kr(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());Po.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:kr(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)});Po.range;const ko=kr(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());ko.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:kr(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)});ko.range;function Ok(t,e,n,r,i,a){const s=[[Gc,1,xo],[Gc,5,5*xo],[Gc,15,15*xo],[Gc,30,30*xo],[a,1,Ra],[a,5,5*Ra],[a,15,15*Ra],[a,30,30*Ra],[i,1,wo],[i,3,3*wo],[i,6,6*wo],[i,12,12*wo],[r,1,Mo],[r,2,2*Mo],[n,1,uA],[e,1,C3],[e,3,3*C3],[t,1,C2]];function o(d,f,p){const g=f<d;g&&([d,f]=[f,d]);const m=p&&typeof p.range=="function"?p:c(d,f,p),x=m?m.range(d,+f+1):[];return g?x.reverse():x}function c(d,f,p){const g=Math.abs(f-d)/p,m=nA(([,,A])=>A).right(s,g);if(m===s.length)return t.every(zw(d/C2,f/C2,p));if(m===0)return v1.every(Math.max(zw(d,f,p),1));const[x,b]=s[g/s[m-1][2]<s[m][2]/g?m-1:m];return x.every(b)}return[o,c]}const[gre,mre]=Ok(ko,mA,ky,Rk,pA,fA),[yre,vre]=Ok(Po,gA,Py,op,hA,dA);function T2(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function I2(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Bh(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function xre(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,a=t.days,s=t.shortDays,o=t.months,c=t.shortMonths,d=Fh(i),f=jh(i),p=Fh(a),g=jh(a),m=Fh(s),x=jh(s),b=Fh(o),A=jh(o),E=Fh(c),S=jh(c),T={a:W,A:K,b:Z,B:fe,c:null,d:M3,e:M3,f:Hre,g:Zre,G:eie,H:jre,I:Vre,j:Ure,L:Mk,m:zre,M:$re,p:me,q:ve,Q:N3,s:L3,S:Gre,u:Wre,U:Yre,V:qre,w:Xre,W:Kre,x:null,X:null,y:Qre,Y:Jre,Z:tie,"%":k3},I={a:be,A:Me,b:ge,B:Le,c:null,d:P3,e:P3,f:aie,g:gie,G:yie,H:nie,I:rie,j:iie,L:kk,m:sie,M:oie,p:Ne,q:Se,Q:N3,s:L3,S:lie,u:cie,U:uie,V:die,w:fie,W:hie,x:null,X:null,y:pie,Y:mie,Z:vie,"%":k3},P={a:B,A:N,b:k,B:j,c:q,d:R3,e:R3,f:Nre,g:D3,G:I3,H:O3,I:O3,j:Ore,L:kre,m:Rre,M:Mre,p:R,q:Dre,Q:Bre,s:Fre,S:Pre,u:Ere,U:Sre,V:Cre,w:Are,W:Tre,x:X,X:G,y:D3,Y:I3,Z:Ire,"%":Lre};T.x=F(n,T),T.X=F(r,T),T.c=F(e,T),I.x=F(n,I),I.X=F(r,I),I.c=F(e,I);function F(J,he){return function(ue){var ie=[],Be=-1,we=0,$e=J.length,Oe,De,qe;for(ue instanceof Date||(ue=new Date(+ue));++Be<$e;)J.charCodeAt(Be)===37&&(ie.push(J.slice(we,Be)),(De=T3[Oe=J.charAt(++Be)])!=null?Oe=J.charAt(++Be):De=Oe==="e"?" ":"0",(qe=he[Oe])&&(Oe=qe(ue,De)),ie.push(Oe),we=Be+1);return ie.push(J.slice(we,Be)),ie.join("")}}function M(J,he){return function(ue){var ie=Bh(1900,void 0,1),Be=D(ie,J,ue+="",0),we,$e;if(Be!=ue.length)return null;if("Q"in ie)return new Date(ie.Q);if("s"in ie)return new Date(ie.s*1e3+("L"in ie?ie.L:0));if(he&&!("Z"in ie)&&(ie.Z=0),"p"in ie&&(ie.H=ie.H%12+ie.p*12),ie.m===void 0&&(ie.m="q"in ie?ie.q:0),"V"in ie){if(ie.V<1||ie.V>53)return null;"w"in ie||(ie.w=1),"Z"in ie?(we=I2(Bh(ie.y,0,1)),$e=we.getUTCDay(),we=$e>4||$e===0?w1.ceil(we):w1(we),we=My.offset(we,(ie.V-1)*7),ie.y=we.getUTCFullYear(),ie.m=we.getUTCMonth(),ie.d=we.getUTCDate()+(ie.w+6)%7):(we=T2(Bh(ie.y,0,1)),$e=we.getDay(),we=$e>4||$e===0?x1.ceil(we):x1(we),we=op.offset(we,(ie.V-1)*7),ie.y=we.getFullYear(),ie.m=we.getMonth(),ie.d=we.getDate()+(ie.w+6)%7)}else("W"in ie||"U"in ie)&&("w"in ie||(ie.w="u"in ie?ie.u%7:"W"in ie?1:0),$e="Z"in ie?I2(Bh(ie.y,0,1)).getUTCDay():T2(Bh(ie.y,0,1)).getDay(),ie.m=0,ie.d="W"in ie?(ie.w+6)%7+ie.W*7-($e+5)%7:ie.w+ie.U*7-($e+6)%7);return"Z"in ie?(ie.H+=ie.Z/100|0,ie.M+=ie.Z%100,I2(ie)):T2(ie)}}function D(J,he,ue,ie){for(var Be=0,we=he.length,$e=ue.length,Oe,De;Be<we;){if(ie>=$e)return-1;if(Oe=he.charCodeAt(Be++),Oe===37){if(Oe=he.charAt(Be++),De=P[Oe in T3?he.charAt(Be++):Oe],!De||(ie=De(J,ue,ie))<0)return-1}else if(Oe!=ue.charCodeAt(ie++))return-1}return ie}function R(J,he,ue){var ie=d.exec(he.slice(ue));return ie?(J.p=f.get(ie[0].toLowerCase()),ue+ie[0].length):-1}function B(J,he,ue){var ie=m.exec(he.slice(ue));return ie?(J.w=x.get(ie[0].toLowerCase()),ue+ie[0].length):-1}function N(J,he,ue){var ie=p.exec(he.slice(ue));return ie?(J.w=g.get(ie[0].toLowerCase()),ue+ie[0].length):-1}function k(J,he,ue){var ie=E.exec(he.slice(ue));return ie?(J.m=S.get(ie[0].toLowerCase()),ue+ie[0].length):-1}function j(J,he,ue){var ie=b.exec(he.slice(ue));return ie?(J.m=A.get(ie[0].toLowerCase()),ue+ie[0].length):-1}function q(J,he,ue){return D(J,e,he,ue)}function X(J,he,ue){return D(J,n,he,ue)}function G(J,he,ue){return D(J,r,he,ue)}function W(J){return s[J.getDay()]}function K(J){return a[J.getDay()]}function Z(J){return c[J.getMonth()]}function fe(J){return o[J.getMonth()]}function me(J){return i[+(J.getHours()>=12)]}function ve(J){return 1+~~(J.getMonth()/3)}function be(J){return s[J.getUTCDay()]}function Me(J){return a[J.getUTCDay()]}function ge(J){return c[J.getUTCMonth()]}function Le(J){return o[J.getUTCMonth()]}function Ne(J){return i[+(J.getUTCHours()>=12)]}function Se(J){return 1+~~(J.getUTCMonth()/3)}return{format:function(J){var he=F(J+="",T);return he.toString=function(){return J},he},parse:function(J){var he=M(J+="",!1);return he.toString=function(){return J},he},utcFormat:function(J){var he=F(J+="",I);return he.toString=function(){return J},he},utcParse:function(J){var he=M(J+="",!0);return he.toString=function(){return J},he}}}var T3={"-":"",_:" ",0:"0"},Yr=/^\s*\d+/,wre=/^%/,bre=/[\\^$*+?|[\]().{}]/g;function Wt(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",a=i.length;return r+(a<n?new Array(n-a+1).join(e)+i:i)}function _re(t){return t.replace(bre,"\\$&")}function Fh(t){return new RegExp("^(?:"+t.map(_re).join("|")+")","i")}function jh(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function Are(t,e,n){var r=Yr.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function Ere(t,e,n){var r=Yr.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function Sre(t,e,n){var r=Yr.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function Cre(t,e,n){var r=Yr.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function Tre(t,e,n){var r=Yr.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function I3(t,e,n){var r=Yr.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function D3(t,e,n){var r=Yr.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function Ire(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function Dre(t,e,n){var r=Yr.exec(e.slice(n,n+1));return r?(t.q=r[0]*3-3,n+r[0].length):-1}function Rre(t,e,n){var r=Yr.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function R3(t,e,n){var r=Yr.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function Ore(t,e,n){var r=Yr.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function O3(t,e,n){var r=Yr.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function Mre(t,e,n){var r=Yr.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function Pre(t,e,n){var r=Yr.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function kre(t,e,n){var r=Yr.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function Nre(t,e,n){var r=Yr.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function Lre(t,e,n){var r=wre.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function Bre(t,e,n){var r=Yr.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function Fre(t,e,n){var r=Yr.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function M3(t,e){return Wt(t.getDate(),e,2)}function jre(t,e){return Wt(t.getHours(),e,2)}function Vre(t,e){return Wt(t.getHours()%12||12,e,2)}function Ure(t,e){return Wt(1+op.count(Po(t),t),e,3)}function Mk(t,e){return Wt(t.getMilliseconds(),e,3)}function Hre(t,e){return Mk(t,e)+"000"}function zre(t,e){return Wt(t.getMonth()+1,e,2)}function $re(t,e){return Wt(t.getMinutes(),e,2)}function Gre(t,e){return Wt(t.getSeconds(),e,2)}function Wre(t){var e=t.getDay();return e===0?7:e}function Yre(t,e){return Wt(Py.count(Po(t)-1,t),e,2)}function Pk(t){var e=t.getDay();return e>=4||e===0?rf(t):rf.ceil(t)}function qre(t,e){return t=Pk(t),Wt(rf.count(Po(t),t)+(Po(t).getDay()===4),e,2)}function Xre(t){return t.getDay()}function Kre(t,e){return Wt(x1.count(Po(t)-1,t),e,2)}function Qre(t,e){return Wt(t.getFullYear()%100,e,2)}function Zre(t,e){return t=Pk(t),Wt(t.getFullYear()%100,e,2)}function Jre(t,e){return Wt(t.getFullYear()%1e4,e,4)}function eie(t,e){var n=t.getDay();return t=n>=4||n===0?rf(t):rf.ceil(t),Wt(t.getFullYear()%1e4,e,4)}function tie(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+Wt(e/60|0,"0",2)+Wt(e%60,"0",2)}function P3(t,e){return Wt(t.getUTCDate(),e,2)}function nie(t,e){return Wt(t.getUTCHours(),e,2)}function rie(t,e){return Wt(t.getUTCHours()%12||12,e,2)}function iie(t,e){return Wt(1+My.count(ko(t),t),e,3)}function kk(t,e){return Wt(t.getUTCMilliseconds(),e,3)}function aie(t,e){return kk(t,e)+"000"}function sie(t,e){return Wt(t.getUTCMonth()+1,e,2)}function oie(t,e){return Wt(t.getUTCMinutes(),e,2)}function lie(t,e){return Wt(t.getUTCSeconds(),e,2)}function cie(t){var e=t.getUTCDay();return e===0?7:e}function uie(t,e){return Wt(ky.count(ko(t)-1,t),e,2)}function Nk(t){var e=t.getUTCDay();return e>=4||e===0?af(t):af.ceil(t)}function die(t,e){return t=Nk(t),Wt(af.count(ko(t),t)+(ko(t).getUTCDay()===4),e,2)}function fie(t){return t.getUTCDay()}function hie(t,e){return Wt(w1.count(ko(t)-1,t),e,2)}function pie(t,e){return Wt(t.getUTCFullYear()%100,e,2)}function gie(t,e){return t=Nk(t),Wt(t.getUTCFullYear()%100,e,2)}function mie(t,e){return Wt(t.getUTCFullYear()%1e4,e,4)}function yie(t,e){var n=t.getUTCDay();return t=n>=4||n===0?af(t):af.ceil(t),Wt(t.getUTCFullYear()%1e4,e,4)}function vie(){return"+0000"}function k3(){return"%"}function N3(t){return+t}function L3(t){return Math.floor(+t/1e3)}var ud,Lk,Bk;xie({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function xie(t){return ud=xre(t),Lk=ud.format,ud.parse,Bk=ud.utcFormat,ud.utcParse,ud}function wie(t){return new Date(t)}function bie(t){return t instanceof Date?+t:+new Date(+t)}function yA(t,e,n,r,i,a,s,o,c,d){var f=Ek(),p=f.invert,g=f.domain,m=d(".%L"),x=d(":%S"),b=d("%I:%M"),A=d("%I %p"),E=d("%a %d"),S=d("%b %d"),T=d("%B"),I=d("%Y");function P(F){return(c(F)<F?m:o(F)<F?x:s(F)<F?b:a(F)<F?A:r(F)<F?i(F)<F?E:S:n(F)<F?T:I)(F)}return f.invert=function(F){return new Date(p(F))},f.domain=function(F){return arguments.length?g(Array.from(F,bie)):g().map(wie)},f.ticks=function(F){var M=g();return t(M[0],M[M.length-1],F??10)},f.tickFormat=function(F,M){return M==null?P:d(M)},f.nice=function(F){var M=g();return(!F||typeof F.range!="function")&&(F=e(M[0],M[M.length-1],F??10)),F?g(Tk(M,F)):f},f.copy=function(){return sp(f,yA(t,e,n,r,i,a,s,o,c,d))},f}function Fk(){return Vo.apply(yA(yre,vre,Po,gA,Py,op,hA,dA,Gc,Lk).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function _ie(){return Vo.apply(yA(gre,mre,ko,mA,ky,My,pA,fA,Gc,Bk).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Aie(){var t=0,e=1,n,r,i,a,s=Da,o=!1,c;function d(p){return p==null||isNaN(p=+p)?c:s(i===0?.5:(p=(a(p)-n)*i,o?Math.max(0,Math.min(1,p)):p))}d.domain=function(p){return arguments.length?([t,e]=p,n=a(t=+t),r=a(e=+e),i=n===r?0:1/(r-n),d):[t,e]},d.clamp=function(p){return arguments.length?(o=!!p,d):o},d.interpolator=function(p){return arguments.length?(s=p,d):s};function f(p){return function(g){var m,x;return arguments.length?([m,x]=g,s=p(m,x),d):[s(0),s(1)]}}return d.range=f(Dy),d.rangeRound=f(Ak),d.unknown=function(p){return arguments.length?(c=p,d):c},function(p){return a=p,n=p(t),r=p(e),i=n===r?0:1/(r-n),d}}function Eie(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function jk(){var t=Oy(Aie()(Da));return t.copy=function(){return Eie(t,jk())},une.apply(t,arguments)}function Sie(t,e){return function(r,i){return i.location==="tick"?i.scale.tickFormat(t)(r):i.location==="zoom-slider-tooltip"?e.tickFormat(2)(r):`${r}`}}function b1(t){return t.scaleType==="band"}function vA(t){return t.scaleType==="point"}function Cie(t){return t.scaleType==="symlog"}function Tie(t){return t.type==="piecewise"?Dk(t.thresholds,t.colors):jk([t.min??0,t.max??100],t.color)}function sf(t){return t.values?h1(t.values,t.colors).unknown(t.unknownColor??null):h1(t.colors.map((e,n)=>n),t.colors).unknown(t.unknownColor??null)}function Kc(t){return t.type==="ordinal"?sf(t):Tie(t)}function Vk(t){const{tickMaxStep:e,tickMinStep:n,tickNumber:r,range:i,domain:a}=t,s=n===void 0?999:Math.floor(Math.abs(a[1]-a[0])/n),o=e===void 0?2:Math.ceil(Math.abs(a[1]-a[0])/e),c=r??Math.floor(Math.abs(i[1]-i[0])/50);return Math.min(s,Math.max(o,c))}function Uk(t,e){return e[1]-e[0]===0?1:t/((e[1]-e[0])/100)}function Iie(t,e){const n=Ik(t,e),r=n.ticks,{negativeScale:i,linearScale:a,positiveScale:s}=Die(n);return n.ticks=o=>{const c=r(o),d=n.constant();let f=0,p=0,g=0;c.forEach(x=>{x>-d&&x<d&&(p+=1),x<=-d&&(f+=1),x>=d&&(g+=1)});const m=[];if(f>0&&m.push(...i.ticks(f)),p>0){const x=a.ticks(p);m.at(-1)===x[0]?m.push(...x.slice(1)):m.push(...x)}if(g>0){const x=s.ticks(g);m.at(-1)===x[0]?m.push(...x.slice(1)):m.push(...x)}return m},n.tickFormat=(o=10,c)=>{const d=n.constant(),[f,p]=n.domain(),g=p-f,m=i.domain(),x=m[1]-m[0],A=(g===0?0:x/g)*o,E=a.domain(),S=E[1]-E[0],I=(g===0?0:S/g)*o,P=s.domain(),F=P[1]-P[0],D=(g===0?0:F/g)*o,R=i.tickFormat(A,c),B=a.tickFormat(I,c),N=s.tickFormat(D,c);return k=>(k.valueOf()<=-d?R:k.valueOf()>=d?N:B)(k)},n}function Die(t){const e=t.constant(),n=t.domain(),r=[n[0],Math.min(n[1],-e)],i=y1(r,t.range()),a=[Math.max(n[0],-e),Math.min(n[1],e)],s=lA(a,t.range()),o=[Math.max(n[0],e),n[1]],c=y1(o,t.range());return{negativeScale:i,linearScale:s,positiveScale:c}}function _1(t,e,n){switch(t){case"log":return y1(e,n);case"pow":return cA(e,n);case"sqrt":return sre(e,n);case"time":return Fk(e,n);case"utc":return _ie(e,n);case"symlog":return Iie(e,n);default:return lA(e,n)}}const A1=t=>(t==null?void 0:t[0])instanceof Date;function E1(t,e){const n=Fk(t.data,e);return(r,{location:i})=>i==="tick"?n.tickFormat(t.tickNumber)(r):`${r.toLocaleString()}`}const D2=(t,e)=>{const n=t[1]-t[0],r=e[1]-e[0],i=t[0]-e[0]*n/r,a=t[1]+(100-e[1])*n/r;return[i,a]};let B3,F3;class Rie{constructor(){if(this.types=new Set,B3)throw new Error("You can only create one instance!");B3=this.types}addType(e){this.types.add(e)}getTypes(){return this.types}}class Oie{constructor(){if(this.types=new Set,F3)throw new Error("You can only create one instance!");F3=this.types}addType(e){this.types.add(e)}getTypes(){return this.types}}const Ny=new Rie;Ny.addType("bar");Ny.addType("line");Ny.addType("scatter");const Hk=new Oie;Hk.addType("radar");function xA(t){return Ny.getTypes().has(t)}const Mie=(t,e,n,r,i,a,s,o)=>{var x;const c=r==="x"?i[e].xExtremumGetter:i[e].yExtremumGetter,d=((x=s[e])==null?void 0:x.series)??{},[f,p]=(c==null?void 0:c({series:d,axis:n,axisIndex:a,isDefaultAxis:a===0,getFilters:o}))??[1/0,-1/0],[g,m]=t;return[Math.min(f,g),Math.max(p,m)]},zk=(t,e,n,r,i,a)=>{const o=Object.keys(n).filter(xA).reduce((c,d)=>Mie(c,d,t,e,n,r,i,a),[1/0,-1/0]);return Number.isNaN(o[0])||Number.isNaN(o[1])?[1/0,-1/0]:o},Pie=(t,e,n,r)=>{const i=new Set;return Object.keys(e).filter(xA).forEach(s=>{var d,f,p;const o=((d=n[s])==null?void 0:d.series)??{},c=(p=(f=e[s]).axisTooltipGetter)==null?void 0:p.call(f,o);c!==void 0&&c.forEach(({axisId:g,direction:m})=>{m===t&&i.add(g??r)})}),i},kie=(t,e,n,r)=>{var i;if(t.domainLimit!==void 0)return t.domainLimit;if(e==="x")for(const a of((i=r.line)==null?void 0:i.seriesOrder)??[]){const s=r.line.series[a];if(s.xAxisId===t.id||s.xAxisId===void 0&&n===0)return"strict"}return"nice"};function Nie(t,e,n){const r=e==="x"?[t.left,t.left+t.width]:[t.top+t.height,t.top];return n.reverse?[r[1],r[0]]:r}const Lie=.2,Bie=.1;function $k({drawingArea:t,formattedSeries:e,axis:n,seriesConfig:r,axisDirection:i,zoomMap:a,zoomOptions:s,getFilters:o,preferStrictDomainInLineCharts:c}){if(n===void 0)return{axis:{},axisIds:[]};const d=Pie(i,r,e,n[0].id),f={};return n.forEach((p,g)=>{const m=p,x=s==null?void 0:s[m.id],b=a==null?void 0:a.get(m.id),A=b?[b.start,b.end]:[0,100],E=Nie(t,i,m),[S,T]=zk(m,i,r,g,e,b===void 0&&!x?o:void 0),I=!m.ignoreTooltip&&d.has(m.id),P=m.data??[];if(b1(m)){const W=m.categoryGapRatio??Lie,K=m.barGapRatio??Bie,Z=i==="y"?[E[1],E[0]]:E,fe=D2(Z,A);if(f[m.id]=H({offset:0,height:0,categoryGapRatio:W,barGapRatio:K,triggerTooltip:I},m,{data:P,scale:Iy(m.data,fe).paddingInner(W).paddingOuter(W/2),tickNumber:m.data.length,colorScale:m.colorMap&&(m.colorMap.type==="ordinal"?sf(H({values:m.data},m.colorMap)):Kc(m.colorMap))}),A1(m.data)){const me=E1(m,Z);f[m.id].valueFormatter=m.valueFormatter??me}}if(vA(m)){const W=i==="y"?[...E].reverse():E,K=D2(W,A);if(f[m.id]=H({offset:0,height:0,triggerTooltip:I},m,{data:P,scale:xk(m.data,K),tickNumber:m.data.length,colorScale:m.colorMap&&(m.colorMap.type==="ordinal"?sf(H({values:m.data},m.colorMap)):Kc(m.colorMap))}),A1(m.data)){const Z=E1(m,W);f[m.id].valueFormatter=m.valueFormatter??Z}}if(m.scaleType==="band"||m.scaleType==="point")return;const F=m.scaleType??"linear",M=c?kie(m,i,g,e):m.domainLimit??"nice",D=[m.min??S,m.max??T];if(typeof M=="function"){const{min:W,max:K}=M(S,T);D[0]=W,D[1]=K}const R=Vk(H({},m,{range:E,domain:D})),B=Uk(R,A),N=D2(E,A),k=_1(F,D,N);Cie(m)&&m.constant!=null&&k.constant(m.constant);const j=M==="nice"?k.nice(R):k,[q,X]=j.domain(),G=[m.min??q,m.max??X];f[m.id]=H({offset:0,height:0,triggerTooltip:I},m,{data:P,scaleType:F,scale:j.domain(G),tickNumber:B,colorScale:m.colorMap&&Kc(m.colorMap),valueFormatter:m.valueFormatter??Sie(B,_1(F,E.map(W=>k.invert(W)),E))})}),{axis:f,axisIds:n.map(({id:p})=>p)}}function Fie(t){return t!=null}function Gk({zoomMap:t,zoomOptions:e,seriesConfig:n,formattedSeries:r,direction:i}){return(a,s)=>{const o=e[a.id];if(!o||o.filterMode!=="discard")return null;const c=t==null?void 0:t.get(a.id);if(c===void 0||c.start<=0&&c.end>=100)return null;const d=a.scaleType;return d==="point"||d==="band"?jie(a.data,c.start,c.end,i):Vie(d,zk(a,i,n,s,r),c.start,c.end,i,a.data)}}function jie(t,e,n,r){const i=(t==null?void 0:t.length)??0,a=Math.floor(e*i/100),s=Math.ceil(n*i/100);return function(c,d){return(c[r]??(t==null?void 0:t[d]))==null?!0:d>=a&&d<s}}function Vie(t,e,n,r,i,a){let s,o;[s,o]=_1(t??"linear",e,[0,100]).nice().domain(),s=s instanceof Date?s.getTime():s,o=o instanceof Date?o.getTime():o;const c=s+n*(o-s)/100,d=s+r*(o-s)/100;return function(p,g){const m=p[i]??(a==null?void 0:a[g]);return m==null?!0:m>=c&&m<=d}}const Uie=t=>({currentAxisId:e,seriesXAxisId:n,seriesYAxisId:r,isDefaultAxis:i})=>(a,s)=>{var d,f;return!(e===n?r:n)||i?((f=(d=Object.values(t??{}))[0])==null?void 0:f.call(d,a,s))??!0:[r,n].filter(p=>p!==e).map(p=>t[p??""]).filter(Fie).every(p=>p(a,s))},j3=t=>(e=[])=>e.reduce((n,r)=>{const{zoom:i,id:a}=r,s=tA(i,a,t);return s&&(n[a]=s),n},{}),Hie=t=>{const e=new Map;return t.forEach(n=>{e.set(n.axisId,n)}),e},Wk=t=>t.zoom,Yk=Ye([Wk],t=>t==null?void 0:t.isInteracting),Ly=Ye([Wk],t=>(t==null?void 0:t.zoomData)&&Hie(t==null?void 0:t.zoomData)),lp=Ye([fu,Af],(t,e)=>H({},j3("x")(t),j3("y")(e)));Ye([lp,(t,e)=>e],(t,e)=>t[e]);const zie=Ye([Ly,lp,jo,ns],(t,e,n,r)=>t&&e&&Gk({zoomMap:t,zoomOptions:e,seriesConfig:n,formattedSeries:r,direction:"x"})),$ie=Ye([Ly,lp,jo,ns],(t,e,n,r)=>t&&e&&Gk({zoomMap:t,zoomOptions:e,seriesConfig:n,formattedSeries:r,direction:"y"})),qk=Ye([zie,$ie,fu,Af],(t,e,n,r)=>{if(t===void 0||e===void 0)return;const i=n==null?void 0:n.reduce((s,o,c)=>{const d=t(o,c);return d!==null&&(s[o.id]=d),s},{}),a=r==null?void 0:r.reduce((s,o,c)=>{const d=e(o,c);return d!==null&&(s[o.id]=d),s},{});if(!(Object.keys(i??{}).length===0&&Object.keys(a??{}).length===0))return Uie(H({},i,a))}),la=Ye([fu,Fo,ns,jo,Ly,lp,qk,sk],(t,e,n,r,i,a,s,o)=>$k({drawingArea:e,formattedSeries:n,axis:t,seriesConfig:r,axisDirection:"x",zoomMap:i,zoomOptions:a,getFilters:s,preferStrictDomainInLineCharts:o})),ca=Ye([Af,Fo,ns,jo,Ly,lp,qk,sk],(t,e,n,r,i,a,s,o)=>$k({drawingArea:e,formattedSeries:n,axis:t,seriesConfig:r,axisDirection:"y",zoomMap:i,zoomOptions:a,getFilters:s,preferStrictDomainInLineCharts:o}));Ye([la,ca,(t,e)=>e],(t,e,n)=>(t==null?void 0:t.axis[n])??(e==null?void 0:e.axis[n]));Ye([fu,Af,(t,e)=>e],(t,e,n)=>{const r=(t==null?void 0:t.find(i=>i.id===n))??(e==null?void 0:e.find(i=>i.id===n))??null;if(r)return r});function rs(t){return t.bandwidth!==void 0}function dd(t){return t instanceof Date?t.getTime():t}function of(t,e){const{scale:n,data:r,reverse:i}=t;if(!rs(n)){const s=n.invert(e);if(r===void 0)return-1;const o=dd(s);return r==null?void 0:r.findIndex((d,f)=>{const p=dd(d);return p>o&&(f===0||Math.abs(o-p)<=Math.abs(o-dd(r[f-1])))||p<=o&&(f===r.length-1||Math.abs(dd(s)-p)<Math.abs(dd(s)-dd(r[f+1])))})}const a=n.bandwidth()===0?Math.floor((e-Math.min(...n.range())+n.step()/2)/n.step()):Math.floor((e-Math.min(...n.range()))/n.step());return a<0||a>=r.length?-1:i?r.length-1-a:a}function V3(t,e,n){const{scale:r,data:i}=t;if(!rs(r)){const a=r.invert(e);return n<0?a:i[n]}return n<0||n>=i.length?null:i[n]}function Yw(t,e){const n=t.createSVGPoint();return n.x=e.clientX,n.y=e.clientY,n.matrixTransform(t.getScreenCTM().inverse())}const Gie=Object.is;function Xk(t,e){if(t===e)return!0;if(!(t instanceof Object)||!(e instanceof Object))return!1;let n=0,r=0;for(const i in t)if(n+=1,!Gie(t[i],e[i])||!(i in e))return!1;for(const i in e)r+=1;return n===r}const Sf=({store:t})=>{const e=He(function(){t.update(s=>H({},s,{interaction:{pointer:null,item:null}}))}),n=He(function(s){t.update(o=>{const c=o.interaction.item;return s?c===null||Object.keys(s).some(d=>s[d]!==c[d])?o:H({},o,{interaction:H({},o.interaction,{item:null})}):c===null?o:H({},o,{interaction:H({},o.interaction,{item:null})})})}),r=He(function(s){t.update(o=>Xk(o.interaction.item,s)?o:H({},o,{interaction:H({},o.interaction,{item:s})}))}),i=He(function(s){t.update(o=>H({},o,{interaction:H({},o.interaction,{pointer:s})}))});return{instance:{cleanInteraction:e,setItemInteraction:r,removeItemInteraction:n,setPointerCoordinate:i}}};Sf.getInitialState=()=>({interaction:{item:null,pointer:null}});Sf.params={};const wA=t=>t.interaction,Wie=Ye([wA],t=>t!==void 0),Kk=Ye([wA],t=>(t==null?void 0:t.item)??null),Qk=Ye([wA],t=>(t==null?void 0:t.pointer)??null),cp=Ye([Qk],t=>t&&t.x),up=Ye([Qk],t=>t&&t.y),Yie=Ye([Kk],t=>t!==null);function Hd(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){if(t.constructor!==e.constructor)return!1;if(Array.isArray(t)){const i=t.length;if(i!==e.length)return!1;for(let a=0;a<i;a+=1)if(!Hd(t[a],e[a]))return!1;return!0}if(t instanceof Map&&e instanceof Map){if(t.size!==e.size)return!1;const i=Array.from(t.entries());for(let a=0;a<i.length;a+=1)if(!e.has(i[a][0]))return!1;for(let a=0;a<i.length;a+=1){const s=i[a];if(!Hd(s[1],e.get(s[0])))return!1}return!0}if(t instanceof Set&&e instanceof Set){if(t.size!==e.size)return!1;const i=Array.from(t.entries());for(let a=0;a<i.length;a+=1)if(!e.has(i[a][0]))return!1;return!0}if(ArrayBuffer.isView(t)&&ArrayBuffer.isView(e)){const i=t.length;if(i!==e.length)return!1;for(let a=0;a<i;a+=1)if(t[a]!==e[a])return!1;return!0}if(t.constructor===RegExp)return t.source===e.source&&t.flags===e.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===e.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===e.toString();const n=Object.keys(t),r=n.length;if(r!==Object.keys(e).length)return!1;for(let i=0;i<r;i+=1)if(!Object.prototype.hasOwnProperty.call(e,n[i]))return!1;for(let i=0;i<r;i+=1){const a=n[i];if(!Hd(t[a],e[a]))return!1}return!0}return t!==t&&e!==e}const By=(t,e)=>e;function qw(t,e,n=e.axisIds[0]){return Array.isArray(n)?n.map(r=>of(e.axis[r],t)):of(e.axis[n],t)}const Zk=(t,e,n)=>{if(t===null)return null;const r=qw(t,e,n);return r===-1?null:r},bA=Ye([cp,la,By],Zk),_A=Ye([up,ca,By],Zk),qie=Ye([cp,up,la,ca],(t,e,n,r)=>[...t===null?[]:n.axisIds.map(i=>({axisId:i,dataIndex:qw(t,n,i)})),...e===null?[]:r.axisIds.map(i=>({axisId:i,dataIndex:qw(e,r,i)}))].filter(i=>i.dataIndex!==null&&i.dataIndex>=0));function Jk(t,e,n,r=e.axisIds[0]){return Array.isArray(r)?r.map((i,a)=>V3(e.axis[i],t,n[a])):V3(e.axis[r],t,n)}const Xie=Ye([cp,la,bA,By],(t,e,n,r)=>t===null||n===null||e.axisIds.length===0?null:Jk(t,e,n,r)),Kie=Ye([up,ca,_A,By],(t,e,n,r)=>t===null||n===null||e.axisIds.length===0?null:Jk(t,e,n,r)),e8=Ye([cp,la],(t,e)=>t===null?[]:e.axisIds.filter(n=>e.axis[n].triggerTooltip).map(n=>({axisId:n,dataIndex:of(e.axis[n],t)})).filter(({dataIndex:n})=>n>=0),{memoizeOptions:{resultEqualityCheck:Hd}}),t8=Ye([up,ca],(t,e)=>t===null?[]:e.axisIds.filter(n=>e.axis[n].triggerTooltip).map(n=>({axisId:n,dataIndex:of(e.axis[n],t)})).filter(({dataIndex:n})=>n>=0),{memoizeOptions:{resultEqualityCheck:Hd}}),Qie=Ye([e8,t8],(t,e)=>t.length>0||e.length>0),Zie=()=>{};function Jie(t,e,n,r){const i=ER(eae,{store:t,selector:e,skip:r}).current;i.effect=n,O.useEffect(i.onMount(r),[r])}function eae(t){const{store:e,selector:n,skip:r}=t;let i=!1,a;const s=()=>{o.dispose??(o.dispose=e.subscribe(c=>{const d=n(c);o.effect(a,d),a=d}))},o={effect:Zie,dispose:null,onMount:c=>()=>{if(!c)return i||(i=!0,a=n(e.value)),s(),()=>{var d;(d=o.dispose)==null||d.call(o),o.dispose=null}}};return r||(i=!0,a=n(e.value),s()),o}const Cf=({params:t,store:e,seriesConfig:n,svgRef:r,instance:i})=>{const{xAxis:a,yAxis:s,dataset:o,onHighlightedAxisChange:c}=t,d=pt(e,Fo),f=pt(e,ns),p=pt(e,Wie),{axis:g,axisIds:m}=pt(e,la),{axis:x,axisIds:b}=pt(e,ca);fk({controlled:t.highlightedAxis}),Kn(()=>{t.highlightedAxis!==void 0&&e.update(T=>T.controlledCartesianAxisHighlight===t.highlightedAxis?T:H({},T,{controlledCartesianAxisHighlight:t.highlightedAxis}))},[e,t.highlightedAxis]);const A=O.useRef(!0);O.useEffect(()=>{if(A.current){A.current=!1;return}e.update(T=>H({},T,{cartesianAxis:H({},T.cartesianAxis,{x:gk(a,o),y:mk(s,o)})}))},[n,d,a,s,o,e]);const E=m[0],S=b[0];return Jie(e,qie,(T,I)=>{if(!Object.is(T,I)){if(T.length!==I.length){c(I);return}T!=null&&T.some(({axisId:P,dataIndex:F},M)=>I[M].axisId!==P||I[M].dataIndex!==F)&&c(I)}},!c),O.useEffect(()=>{const T=r.current;if(!p||!T||t.disableAxisListener)return()=>{};const I=i.addInteractionListener("moveEnd",N=>{var k;N.detail.activeGestures.pan||(k=i.cleanInteraction)==null||k.call(i)}),P=i.addInteractionListener("panEnd",N=>{var k;N.detail.activeGestures.move||(k=i.cleanInteraction)==null||k.call(i)}),F=i.addInteractionListener("quickPressEnd",N=>{var k;!N.detail.activeGestures.move&&!N.detail.activeGestures.pan&&((k=i.cleanInteraction)==null||k.call(i))}),M=N=>{var X,G;const k=N.detail.srcEvent,j=N.detail.target,q=Yw(T,k);if(N.detail.srcEvent.buttons>=1&&(j!=null&&j.hasPointerCapture(N.detail.srcEvent.pointerId))&&!(j!=null&&j.closest("[data-charts-zoom-slider]"))&&(j==null||j.releasePointerCapture(N.detail.srcEvent.pointerId)),!i.isPointInside(q.x,q.y,j)){(X=i.cleanInteraction)==null||X.call(i);return}(G=i.setPointerCoordinate)==null||G.call(i,q)},D=i.addInteractionListener("move",M),R=i.addInteractionListener("pan",M),B=i.addInteractionListener("quickPress",M);return()=>{D.cleanup(),I.cleanup(),R.cleanup(),P.cleanup(),B.cleanup(),F.cleanup()}},[r,e,g,E,x,S,i,t.disableAxisListener,p]),O.useEffect(()=>{const T=r.current,I=t.onAxisClick;if(T===null||!I)return()=>{};const P=i.addInteractionListener("tap",F=>{let M=null,D=!1;const R=Yw(T,F.detail.srcEvent),B=of(g[E],R.x);D=B!==-1,M=D?B:of(x[S],R.y);const N=D?m[0]:b[0];if(M==null||M===-1)return;const k=(D?g:x)[N].data[M],j={};Object.keys(f).filter(q=>["bar","line"].includes(q)).forEach(q=>{var X;(X=f[q])==null||X.seriesOrder.forEach(G=>{const W=f[q].series[G],K=W.xAxisId,Z=W.yAxisId,fe=D?K:Z;(fe===void 0||fe===N)&&(j[G]=W.data[M])})}),I(F.detail.srcEvent,{dataIndex:M,axisValue:k,seriesValues:j})});return()=>{P.cleanup()}},[t.onAxisClick,f,r,g,m,x,b,E,S,i]),{}};Cf.params={xAxis:!0,yAxis:!0,dataset:!0,onAxisClick:!0,disableAxisListener:!0,onHighlightedAxisChange:!0,highlightedAxis:!0};Cf.getDefaultizedParams=({params:t})=>H({},t,{colors:t.colors??ok,theme:t.theme??"light",defaultizedXAxis:gk(t.xAxis,t.dataset),defaultizedYAxis:mk(t.yAxis,t.dataset)});Cf.getInitialState=t=>H({cartesianAxis:{x:t.defaultizedXAxis,y:t.defaultizedYAxis}},t.highlightedAxis===void 0?{}:{controlledCartesianAxisHighlight:t.highlightedAxis});const Tf=t=>t.controlledCartesianAxisHighlight,n8=(t,e,n)=>n!==void 0?n.filter(r=>e.axis[r.axisId]!==void 0).map(r=>r):t===null?[]:[{axisId:e.axisIds[0],dataIndex:t}];Ye([bA,la,Tf],n8);Ye([_A,ca,Tf],n8);const r8=(t,e,n,r)=>r!==void 0?r.map(i=>{var a,s;return H({},i,{value:(s=(a=n.axis[i.axisId])==null?void 0:a.data)==null?void 0:s[i.dataIndex]})}).filter(({value:i})=>i!==void 0):e===null?[]:[{axisId:n.axisIds[0],dataIndex:t,value:e}],tae=Ye([bA,Xie,la,Tf],r8),nae=Ye([_A,Kie,ca,Tf],r8),i8=(t,e)=>t===void 0?[e.axis[e.axisIds[0]]]:t.map(r=>e.axis[r.axisId]??null).filter(r=>r!==null);Ye([Tf,la],i8);Ye([Tf,ca],i8);function U3(t,e){return t.id!==void 0?t:H({id:e},t)}function H3(t){return t.colorMap?H({},t,{colorScale:t.colorMap.type==="ordinal"&&t.data?sf(H({values:t.data},t.colorMap)):Kc(t.colorMap.type==="continuous"?H({min:t.min,max:t.max},t.colorMap):t.colorMap)}):t}function a8(t,e){if(!t||t.length===0)return{axis:{},axisIds:[]};const n={},r=[];return t.forEach((i,a)=>{const s=i.dataKey,o=i.id??`defaultized-z-axis-${a}`;if(s===void 0||i.data!==void 0){n[o]=H3(U3(i,o)),r.push(o);return}if(e===void 0)throw new Error("MUI X Charts: z-axis uses `dataKey` but no `dataset` is provided.");n[o]=H3(U3(H({},i,{data:e.map(c=>c[s])}),o)),r.push(o)}),{axis:n,axisIds:r}}const dp=({params:t,store:e})=>{const{zAxis:n,dataset:r}=t,i=O.useRef(!0);return O.useEffect(()=>{if(i.current){i.current=!1;return}e.update(a=>H({},a,{zAxis:a8(n,r)}))},[n,r,e]),{}};dp.params={zAxis:!0,dataset:!0};dp.getInitialState=t=>({zAxis:a8(t.zAxis,t.dataset)});const rae=t=>t,iae=Ye([rae],t=>t.zAxis),gu=({store:t,params:e})=>{fk({controlled:e.highlightedItem}),Kn(()=>{t.update(i=>i.highlight.item===e.highlightedItem?i:H({},i,{highlight:H({},i.highlight,{item:e.highlightedItem})}))},[t,e.highlightedItem]);const n=He(()=>{var i;(i=e.onHighlightChange)==null||i.call(e,null),t.update(a=>H({},a,{highlight:{item:null}}))}),r=He(i=>{var s;const a=t.getSnapshot().highlight.item;Xk(a,i)||((s=e.onHighlightChange)==null||s.call(e,i),t.update(o=>H({},o,{highlight:{item:i}})))});return{instance:{clearHighlight:n,setHighlight:r}}};gu.getDefaultizedParams=({params:t})=>H({},t,{highlightedItem:t.highlightedItem??null});gu.getInitialState=t=>({highlight:{item:t.highlightedItem}});gu.params={highlightedItem:!0,onHighlightChange:!0};function s8(t){let e=1/0,n=-1/0;for(const r of t??[])r<e&&(e=r),r>n&&(n=r);return[e,n]}const z3=(t,e)=>e==="x"?{x:t,y:null}:{x:null,y:t},o8=t=>{var s;const{axis:e,getFilters:n,isDefaultAxis:r}=t,i=n==null?void 0:n({currentAxisId:e.id,isDefaultAxis:r}),a=i?(s=e.data)==null?void 0:s.filter((o,c)=>i({x:null,y:null},c)):e.data;return s8(a??[])},l8=t=>e=>{const{series:n,axis:r,getFilters:i,isDefaultAxis:a}=e;return Object.keys(n).filter(s=>{const o=t==="x"?n[s].xAxisId:n[s].yAxisId;return o===r.id||a&&o===void 0}).reduce((s,o)=>{const{stackedData:c}=n[o],d=i==null?void 0:i({currentAxisId:r.id,isDefaultAxis:a,seriesXAxisId:n[o].xAxisId,seriesYAxisId:n[o].yAxisId}),[f,p]=(c==null?void 0:c.reduce((g,m,x)=>d&&(!d(z3(m[0],t),x)||!d(z3(m[1],t),x))?g:[Math.min(...m,g[0]),Math.max(...m,g[1])],[1/0,-1/0]))??[1/0,-1/0];return[Math.min(f,s[0]),Math.max(p,s[1])]},[1/0,-1/0])},aae=t=>Object.keys(t.series).some(n=>t.series[n].layout==="horizontal")?l8("x")(t):o8(t),sae=t=>Object.keys(t.series).some(n=>t.series[n].layout==="horizontal")?o8(t):l8("y")(t);function Ir(t){return function(){return t}}const $3=Math.abs,pi=Math.atan2,kc=Math.cos,oae=Math.max,R2=Math.min,xs=Math.sin,Id=Math.sqrt,zi=1e-12,L0=Math.PI,S1=L0/2,Tm=2*L0;function lae(t){return t>1?0:t<-1?L0:Math.acos(t)}function G3(t){return t>=1?S1:t<=-1?-S1:Math.asin(t)}const Xw=Math.PI,Kw=2*Xw,Fc=1e-6,cae=Kw-Fc;function c8(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function uae(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return c8;const n=10**e;return function(r){this._+=r[0];for(let i=1,a=r.length;i<a;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}let dae=class{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?c8:uae(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,r,i){this._append`Q${+e},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(e,n,r,i,a,s){this._append`C${+e},${+n},${+r},${+i},${this._x1=+a},${this._y1=+s}`}arcTo(e,n,r,i,a){if(e=+e,n=+n,r=+r,i=+i,a=+a,a<0)throw new Error(`negative radius: ${a}`);let s=this._x1,o=this._y1,c=r-e,d=i-n,f=s-e,p=o-n,g=f*f+p*p;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(g>Fc)if(!(Math.abs(p*c-d*f)>Fc)||!a)this._append`L${this._x1=e},${this._y1=n}`;else{let m=r-s,x=i-o,b=c*c+d*d,A=m*m+x*x,E=Math.sqrt(b),S=Math.sqrt(g),T=a*Math.tan((Xw-Math.acos((b+g-A)/(2*E*S)))/2),I=T/S,P=T/E;Math.abs(I-1)>Fc&&this._append`L${e+I*f},${n+I*p}`,this._append`A${a},${a},0,0,${+(p*m>f*x)},${this._x1=e+P*c},${this._y1=n+P*d}`}}arc(e,n,r,i,a,s){if(e=+e,n=+n,r=+r,s=!!s,r<0)throw new Error(`negative radius: ${r}`);let o=r*Math.cos(i),c=r*Math.sin(i),d=e+o,f=n+c,p=1^s,g=s?i-a:a-i;this._x1===null?this._append`M${d},${f}`:(Math.abs(this._x1-d)>Fc||Math.abs(this._y1-f)>Fc)&&this._append`L${d},${f}`,r&&(g<0&&(g=g%Kw+Kw),g>cae?this._append`A${r},${r},0,1,${p},${e-o},${n-c}A${r},${r},0,1,${p},${this._x1=d},${this._y1=f}`:g>Fc&&this._append`A${r},${r},0,${+(g>=Xw)},${p},${this._x1=e+r*Math.cos(a)},${this._y1=n+r*Math.sin(a)}`)}rect(e,n,r,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}};function fae(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);e=r}return t},()=>new dae(e)}function hae(t){return t.innerRadius}function pae(t){return t.outerRadius}function gae(t){return t.startAngle}function mae(t){return t.endAngle}function yae(t){return t&&t.padAngle}function vae(t,e,n,r,i,a,s,o){var c=n-t,d=r-e,f=s-i,p=o-a,g=p*c-f*d;if(!(g*g<zi))return g=(f*(e-a)-p*(t-i))/g,[t+g*c,e+g*d]}function am(t,e,n,r,i,a,s){var o=t-n,c=e-r,d=(s?a:-a)/Id(o*o+c*c),f=d*c,p=-d*o,g=t+f,m=e+p,x=n+f,b=r+p,A=(g+x)/2,E=(m+b)/2,S=x-g,T=b-m,I=S*S+T*T,P=i-a,F=g*b-x*m,M=(T<0?-1:1)*Id(oae(0,P*P*I-F*F)),D=(F*T-S*M)/I,R=(-F*S-T*M)/I,B=(F*T+S*M)/I,N=(-F*S+T*M)/I,k=D-A,j=R-E,q=B-A,X=N-E;return k*k+j*j>q*q+X*X&&(D=B,R=N),{cx:D,cy:R,x01:-f,y01:-p,x11:D*(i/P-1),y11:R*(i/P-1)}}function u8(){var t=hae,e=pae,n=Ir(0),r=null,i=gae,a=mae,s=yae,o=null,c=fae(d);function d(){var f,p,g=+t.apply(this,arguments),m=+e.apply(this,arguments),x=i.apply(this,arguments)-S1,b=a.apply(this,arguments)-S1,A=$3(b-x),E=b>x;if(o||(o=f=c()),m<g&&(p=m,m=g,g=p),!(m>zi))o.moveTo(0,0);else if(A>Tm-zi)o.moveTo(m*kc(x),m*xs(x)),o.arc(0,0,m,x,b,!E),g>zi&&(o.moveTo(g*kc(b),g*xs(b)),o.arc(0,0,g,b,x,E));else{var S=x,T=b,I=x,P=b,F=A,M=A,D=s.apply(this,arguments)/2,R=D>zi&&(r?+r.apply(this,arguments):Id(g*g+m*m)),B=R2($3(m-g)/2,+n.apply(this,arguments)),N=B,k=B,j,q;if(R>zi){var X=G3(R/g*xs(D)),G=G3(R/m*xs(D));(F-=X*2)>zi?(X*=E?1:-1,I+=X,P-=X):(F=0,I=P=(x+b)/2),(M-=G*2)>zi?(G*=E?1:-1,S+=G,T-=G):(M=0,S=T=(x+b)/2)}var W=m*kc(S),K=m*xs(S),Z=g*kc(P),fe=g*xs(P);if(B>zi){var me=m*kc(T),ve=m*xs(T),be=g*kc(I),Me=g*xs(I),ge;if(A<L0)if(ge=vae(W,K,be,Me,me,ve,Z,fe)){var Le=W-ge[0],Ne=K-ge[1],Se=me-ge[0],J=ve-ge[1],he=1/xs(lae((Le*Se+Ne*J)/(Id(Le*Le+Ne*Ne)*Id(Se*Se+J*J)))/2),ue=Id(ge[0]*ge[0]+ge[1]*ge[1]);N=R2(B,(g-ue)/(he-1)),k=R2(B,(m-ue)/(he+1))}else N=k=0}M>zi?k>zi?(j=am(be,Me,W,K,m,k,E),q=am(me,ve,Z,fe,m,k,E),o.moveTo(j.cx+j.x01,j.cy+j.y01),k<B?o.arc(j.cx,j.cy,k,pi(j.y01,j.x01),pi(q.y01,q.x01),!E):(o.arc(j.cx,j.cy,k,pi(j.y01,j.x01),pi(j.y11,j.x11),!E),o.arc(0,0,m,pi(j.cy+j.y11,j.cx+j.x11),pi(q.cy+q.y11,q.cx+q.x11),!E),o.arc(q.cx,q.cy,k,pi(q.y11,q.x11),pi(q.y01,q.x01),!E))):(o.moveTo(W,K),o.arc(0,0,m,S,T,!E)):o.moveTo(W,K),!(g>zi)||!(F>zi)?o.lineTo(Z,fe):N>zi?(j=am(Z,fe,me,ve,g,-N,E),q=am(W,K,be,Me,g,-N,E),o.lineTo(j.cx+j.x01,j.cy+j.y01),N<B?o.arc(j.cx,j.cy,N,pi(j.y01,j.x01),pi(q.y01,q.x01),!E):(o.arc(j.cx,j.cy,N,pi(j.y01,j.x01),pi(j.y11,j.x11),!E),o.arc(0,0,g,pi(j.cy+j.y11,j.cx+j.x11),pi(q.cy+q.y11,q.cx+q.x11),E),o.arc(q.cx,q.cy,N,pi(q.y11,q.x11),pi(q.y01,q.x01),!E))):o.arc(0,0,g,P,I,E)}if(o.closePath(),f)return o=null,f+""||null}return d.centroid=function(){var f=(+t.apply(this,arguments)+ +e.apply(this,arguments))/2,p=(+i.apply(this,arguments)+ +a.apply(this,arguments))/2-L0/2;return[kc(p)*f,xs(p)*f]},d.innerRadius=function(f){return arguments.length?(t=typeof f=="function"?f:Ir(+f),d):t},d.outerRadius=function(f){return arguments.length?(e=typeof f=="function"?f:Ir(+f),d):e},d.cornerRadius=function(f){return arguments.length?(n=typeof f=="function"?f:Ir(+f),d):n},d.padRadius=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:Ir(+f),d):r},d.startAngle=function(f){return arguments.length?(i=typeof f=="function"?f:Ir(+f),d):i},d.endAngle=function(f){return arguments.length?(a=typeof f=="function"?f:Ir(+f),d):a},d.padAngle=function(f){return arguments.length?(s=typeof f=="function"?f:Ir(+f),d):s},d.context=function(f){return arguments.length?(o=f??null,d):o},d}function d8(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function xae(t,e){return e<t?-1:e>t?1:e>=t?0:NaN}function wae(t){return t}function bae(){var t=wae,e=xae,n=null,r=Ir(0),i=Ir(Tm),a=Ir(0);function s(o){var c,d=(o=d8(o)).length,f,p,g=0,m=new Array(d),x=new Array(d),b=+r.apply(this,arguments),A=Math.min(Tm,Math.max(-Tm,i.apply(this,arguments)-b)),E,S=Math.min(Math.abs(A)/d,a.apply(this,arguments)),T=S*(A<0?-1:1),I;for(c=0;c<d;++c)(I=x[m[c]=c]=+t(o[c],c,o))>0&&(g+=I);for(e!=null?m.sort(function(P,F){return e(x[P],x[F])}):n!=null&&m.sort(function(P,F){return n(o[P],o[F])}),c=0,p=g?(A-d*T)/g:0;c<d;++c,b=E)f=m[c],I=x[f],E=b+(I>0?I*p:0)+T,x[f]={data:o[f],index:c,value:I,startAngle:b,endAngle:E,padAngle:S};return x}return s.value=function(o){return arguments.length?(t=typeof o=="function"?o:Ir(+o),s):t},s.sortValues=function(o){return arguments.length?(e=o,n=null,s):e},s.sort=function(o){return arguments.length?(n=o,e=null,s):n},s.startAngle=function(o){return arguments.length?(r=typeof o=="function"?o:Ir(+o),s):r},s.endAngle=function(o){return arguments.length?(i=typeof o=="function"?o:Ir(+o),s):i},s.padAngle=function(o){return arguments.length?(a=typeof o=="function"?o:Ir(+o),s):a},s}function lf(t,e){if((s=t.length)>1)for(var n=1,r,i,a=t[e[0]],s,o=a.length;n<s;++n)for(i=a,a=t[e[n]],r=0;r<o;++r)a[r][1]+=a[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function cf(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}function _ae(t,e){return t[e]}function Aae(t){const e=[];return e.key=t,e}function f8(){var t=Ir([]),e=cf,n=lf,r=_ae;function i(a){var s=Array.from(t.apply(this,arguments),Aae),o,c=s.length,d=-1,f;for(const p of a)for(o=0,++d;o<c;++o)(s[o][d]=[0,+r(p,s[o].key,d,a)]).data=p;for(o=0,f=d8(e(s));o<c;++o)s[f[o]].index=o;return n(s,f),s}return i.keys=function(a){return arguments.length?(t=typeof a=="function"?a:Ir(Array.from(a)),i):t},i.value=function(a){return arguments.length?(r=typeof a=="function"?a:Ir(+a),i):r},i.order=function(a){return arguments.length?(e=a==null?cf:typeof a=="function"?a:Ir(Array.from(a)),i):e},i.offset=function(a){return arguments.length?(n=a??lf,i):n},i}function Eae(t,e){if((r=t.length)>0){for(var n,r,i=0,a=t[0].length,s;i<a;++i){for(s=n=0;n<r;++n)s+=t[n][i][1]||0;if(s)for(n=0;n<r;++n)t[n][i][1]/=s}lf(t,e)}}function Sae(t,e){if((c=t.length)>0)for(var n,r=0,i,a,s,o,c,d=t[e[0]].length;r<d;++r)for(s=o=0,n=0;n<c;++n)(a=(i=t[e[n]][r])[1]-i[0])>0?(i[0]=s,i[1]=s+=a):a<0?(i[1]=o,i[0]=o+=a):(i[0]=0,i[1]=a)}function Cae(t,e){if((i=t.length)>0){for(var n=0,r=t[e[0]],i,a=r.length;n<a;++n){for(var s=0,o=0;s<i;++s)o+=t[s][n][1]||0;r[n][1]+=r[n][0]=-o/2}lf(t,e)}}function Tae(t,e){if(!(!((s=t.length)>0)||!((a=(i=t[e[0]]).length)>0))){for(var n=0,r=1,i,a,s;r<a;++r){for(var o=0,c=0,d=0;o<s;++o){for(var f=t[e[o]],p=f[r][1]||0,g=f[r-1][1]||0,m=(p-g)/2,x=0;x<o;++x){var b=t[e[x]],A=b[r][1]||0,E=b[r-1][1]||0;m+=A-E}c+=p,d+=m*p}i[r-1][1]+=i[r-1][0]=n,c&&(n-=d/c)}i[r-1][1]+=i[r-1][0]=n,lf(t,e)}}function h8(t){var e=t.map(Iae);return cf(t).sort(function(n,r){return e[n]-e[r]})}function Iae(t){for(var e=-1,n=0,r=t.length,i,a=-1/0;++e<r;)(i=+t[e][1])>a&&(a=i,n=e);return n}function p8(t){var e=t.map(g8);return cf(t).sort(function(n,r){return e[n]-e[r]})}function g8(t){for(var e=0,n=-1,r=t.length,i;++n<r;)(i=+t[n][1])&&(e+=i);return e}function Dae(t){return p8(t).reverse()}function Rae(t){var e=t.length,n,r,i=t.map(g8),a=h8(t),s=0,o=0,c=[],d=[];for(n=0;n<e;++n)r=a[n],s<o?(s+=i[r],c.push(r)):(o+=i[r],d.push(r));return d.reverse().concat(c)}function Oae(t){return cf(t).reverse()}const O2={appearance:h8,ascending:p8,descending:Dae,insideOut:Rae,none:cf,reverse:Oae},M2={expand:Eae,diverging:Sae,none:lf,silhouette:Cae,wiggle:Tae},m8=t=>{const{series:e,seriesOrder:n,defaultStrategy:r}=t,i=[],a={};return n.forEach(s=>{const{stack:o,stackOrder:c,stackOffset:d}=e[s];o===void 0?i.push({ids:[s],stackingOrder:O2.none,stackingOffset:M2.none}):a[o]===void 0?(a[o]=i.length,i.push({ids:[s],stackingOrder:O2[c??(r==null?void 0:r.stackOrder)??"none"],stackingOffset:M2[d??(r==null?void 0:r.stackOffset)??"diverging"]})):(i[a[o]].ids.push(s),c!==void 0&&(i[a[o]].stackingOrder=O2[c]),d!==void 0&&(i[a[o]].stackingOffset=M2[d]))}),i},Mae=t=>t==null?"":t.toLocaleString(),Pae=(t,e)=>{const{seriesOrder:n,series:r}=t,i=m8(t),a=e??[];n.forEach(o=>{const c=r[o].data;if(c!==void 0)c.forEach((d,f)=>{a.length<=f?a.push({[o]:d}):a[f][o]=d});else if(e===void 0)throw new Error([`MUI X Charts: bar series with id='${o}' has no data.`,"Either provide a data property to the series or use the dataset prop."].join(`
`))});const s={};return i.forEach(o=>{const{ids:c,stackingOffset:d,stackingOrder:f}=o,p=f8().keys(c.map(g=>{const m=r[g].dataKey;return r[g].data===void 0&&m!==void 0?m:g})).value((g,m)=>g[m]??0).order(f).offset(d)(a);c.forEach((g,m)=>{const x=r[g].dataKey;s[g]=H({layout:"vertical",labelMarkType:"square",minBarSize:0,valueFormatter:r[g].valueFormatter??Mae},r[g],{data:x?e.map(b=>{const A=b[x];return typeof A!="number"?null:A}):r[g].data,stackedData:p[m].map(([b,A])=>[b,A])})})}),{seriesOrder:n,stackingGroups:i,series:s}};function oa(t,e){return typeof t=="function"?t(e):t}const kae=t=>{const{seriesOrder:e,series:n}=t;return e.reduce((r,i)=>{const a=oa(n[i].label,"legend");return a===void 0||r.push({markType:n[i].labelMarkType,id:i,seriesId:i,color:n[i].color,label:a}),r},[])},y8=(t,e,n)=>{const r=t.layout==="vertical",i=r?e==null?void 0:e.colorScale:n==null?void 0:n.colorScale,a=r?n==null?void 0:n.colorScale:e==null?void 0:e.colorScale,s=r?e==null?void 0:e.data:n==null?void 0:n.data;return a?o=>{if(o===void 0)return t.color;const c=t.data[o],d=c===null?t.color:a(c);return d===null?t.color:d}:i&&s?o=>{if(o===void 0)return t.color;const c=s[o],d=c===null?t.color:i(c);return d===null?t.color:d}:()=>t.color},Nae=t=>{const{series:e,getColor:n,identifier:r}=t;if(!r||r.dataIndex===void 0)return null;const i=oa(e.label,"tooltip"),a=e.data[r.dataIndex];if(a==null)return null;const s=e.valueFormatter(a,{dataIndex:r.dataIndex});return{identifier:r,color:n(r.dataIndex),label:i,value:a,formattedValue:s,markType:e.labelMarkType}},Lae=t=>Object.values(t).map(e=>e.layout==="horizontal"?{direction:"y",axisId:e.yAxisId}:{direction:"x",axisId:e.xAxisId}),Bae=(t,e,n)=>H({id:t.id??`auto-generated-id-${e}`,color:n[e%n.length]},t),Fae={seriesProcessor:Pae,colorProcessor:y8,legendGetter:kae,tooltipGetter:Nae,axisTooltipGetter:Lae,xExtremumGetter:aae,yExtremumGetter:sae,getSeriesWithDefaultValues:Bae},jae=t=>{const{series:e,axis:n,isDefaultAxis:r,getFilters:i}=t;let a=1/0,s=-1/0;for(const o in e){if(!Object.hasOwn(e,o))continue;const c=e[o].xAxisId;if(!(c===n.id||c===void 0&&r))continue;const d=i==null?void 0:i({currentAxisId:n.id,isDefaultAxis:r,seriesXAxisId:e[o].xAxisId,seriesYAxisId:e[o].yAxisId}),f=e[o].data??[];for(let p=0;p<f.length;p+=1){const g=f[p];d&&!d(g,p)||g.x!==null&&(g.x<a&&(a=g.x),g.x>s&&(s=g.x))}}return[a,s]},Vae=t=>{const{series:e,axis:n,isDefaultAxis:r,getFilters:i}=t;let a=1/0,s=-1/0;for(const o in e){if(!Object.hasOwn(e,o))continue;const c=e[o].yAxisId;if(!(c===n.id||c===void 0&&r))continue;const d=i==null?void 0:i({currentAxisId:n.id,isDefaultAxis:r,seriesXAxisId:e[o].xAxisId,seriesYAxisId:e[o].yAxisId}),f=e[o].data??[];for(let p=0;p<f.length;p+=1){const g=f[p];d&&!d(g,p)||g.y!==null&&(g.y<a&&(a=g.y),g.y>s&&(s=g.y))}}return[a,s]},Uae=({series:t,seriesOrder:e},n)=>({series:Object.fromEntries(Object.entries(t).map(([i,a])=>{const s=a==null?void 0:a.datasetKeys,o=["x","y","id"].filter(d=>typeof(s==null?void 0:s[d])!="string");if(a!=null&&a.datasetKeys&&o.length>0)throw new Error([`MUI X Charts: scatter series with id='${i}' has incomplete datasetKeys.`,`Properties ${o.map(d=>`"${d}"`).join(", ")} are missing.`].join(`
`));const c=s?(n==null?void 0:n.map(d=>({x:d[s.x]??null,y:d[s.y]??null,z:s.z&&d[s.z],id:s.id&&d[s.id]})))??[]:a.data??[];return[i,H({labelMarkType:"circle",markerSize:4},a,{preview:H({markerSize:1},a==null?void 0:a.preview),data:c,valueFormatter:a.valueFormatter??(d=>d&&`(${d.x}, ${d.y})`)})]})),seriesOrder:e}),Hae=(t,e,n,r)=>{const i=r==null?void 0:r.colorScale,a=n==null?void 0:n.colorScale,s=e==null?void 0:e.colorScale;return i?o=>{var f,p;if(o===void 0)return t.color;if(((f=r==null?void 0:r.data)==null?void 0:f[o])!==void 0){const g=i((p=r==null?void 0:r.data)==null?void 0:p[o]);if(g!==null)return g}const c=t.data[o],d=c===null?t.color:i(c.z);return d===null?t.color:d}:a?o=>{if(o===void 0)return t.color;const c=t.data[o],d=c===null?t.color:a(c.y);return d===null?t.color:d}:s?o=>{if(o===void 0)return t.color;const c=t.data[o],d=c===null?t.color:s(c.x);return d===null?t.color:d}:()=>t.color},zae=t=>{const{seriesOrder:e,series:n}=t;return e.reduce((r,i)=>{const a=oa(n[i].label,"legend");return a===void 0||r.push({markType:n[i].labelMarkType,id:i,seriesId:i,color:n[i].color,label:a}),r},[])},$ae=t=>{const{series:e,getColor:n,identifier:r}=t;if(!r||r.dataIndex===void 0)return null;const i=oa(e.label,"tooltip"),a=e.data[r.dataIndex],s=e.valueFormatter(a,{dataIndex:r.dataIndex});return{identifier:r,color:n(r.dataIndex),label:i,value:a,formattedValue:s,markType:e.labelMarkType}},Gae=(t,e,n)=>H({id:t.id??`auto-generated-id-${e}`,color:n[e%n.length]},t),Wae={seriesProcessor:Uae,colorProcessor:Hae,legendGetter:zae,tooltipGetter:$ae,xExtremumGetter:jae,yExtremumGetter:Vae,getSeriesWithDefaultValues:Gae},Yae=t=>{const{axis:e}=t;return s8(e.data??[])};function qae(t,e,n,r){return n.reduce((i,a,s)=>{if(e[s]===null)return i;const[o,c]=t(a);return r&&(!r({y:o,x:null},s)||!r({y:c,x:null},s))?i:[Math.min(o,c,i[0]),Math.max(o,c,i[1])]},[1/0,-1/0])}const Xae=t=>{const{series:e,axis:n,isDefaultAxis:r,getFilters:i}=t;return Object.keys(e).filter(a=>{const s=e[a].yAxisId;return s===n.id||r&&s===void 0}).reduce((a,s)=>{const{area:o,stackedData:c,data:d}=e[s],f=o!==void 0,p=i==null?void 0:i({currentAxisId:n.id,isDefaultAxis:r,seriesXAxisId:e[s].xAxisId,seriesYAxisId:e[s].yAxisId}),g=f&&n.scaleType!=="log"&&typeof e[s].baseline!="string"?A=>A:A=>[A[1],A[1]],m=qae(g,d,c,p),[x,b]=m;return[Math.min(x,a[0]),Math.max(b,a[1])]},[1/0,-1/0])};function Kae(t,e){const n={};return Object.keys(t).forEach(r=>{n[r]=H({},t[r],{valueFormatter:t[r].valueFormatter??e})}),n}const Qae=(t,e)=>{const{seriesOrder:n,series:r}=t,i=m8(H({},t,{defaultStrategy:{stackOffset:"none"}})),a=e??[];n.forEach(o=>{const c=r[o].data;c!==void 0&&c.forEach((d,f)=>{a.length<=f?a.push({[o]:d}):a[f][o]=d})});const s={};return i.forEach(o=>{const{ids:c,stackingOrder:d,stackingOffset:f}=o,p=f8().keys(c.map(g=>{const m=r[g].dataKey;return r[g].data===void 0&&m!==void 0?m:g})).value((g,m)=>g[m]??0).order(d).offset(f)(a);c.forEach((g,m)=>{const x=r[g].dataKey;s[g]=H({labelMarkType:"line"},r[g],{data:x?e.map(b=>{const A=b[x];return typeof A!="number"?null:A}):r[g].data,stackedData:p[m].map(([b,A])=>[b,A])})})}),{seriesOrder:n,stackingGroups:i,series:Kae(s,o=>o==null?"":o.toLocaleString())}},Zae=(t,e,n)=>{const r=n==null?void 0:n.colorScale,i=e==null?void 0:e.colorScale;return r?a=>{if(a===void 0)return t.color;const s=t.data[a],o=s===null?t.color:r(s);return o===null?t.color:o}:i?a=>{var c;if(a===void 0)return t.color;const s=(c=e.data)==null?void 0:c[a],o=s===null?t.color:i(s);return o===null?t.color:o}:()=>t.color},Jae=t=>{const{seriesOrder:e,series:n}=t;return e.reduce((r,i)=>{const a=oa(n[i].label,"legend");return a===void 0||r.push({markType:n[i].labelMarkType,id:i,seriesId:i,color:n[i].color,label:a}),r},[])},ese=t=>{const{series:e,getColor:n,identifier:r}=t;if(!r||r.dataIndex===void 0)return null;const i=oa(e.label,"tooltip"),a=e.data[r.dataIndex],s=e.valueFormatter(a,{dataIndex:r.dataIndex});return{identifier:r,color:n(r.dataIndex),label:i,value:a,formattedValue:s,markType:e.labelMarkType}},tse=t=>Object.values(t).map(e=>({direction:"x",axisId:e.xAxisId})),nse=(t,e,n)=>H({id:t.id??`auto-generated-id-${e}`,color:n[e%n.length]},t),rse={colorProcessor:Zae,seriesProcessor:Qae,legendGetter:Jae,tooltipGetter:ese,axisTooltipGetter:tse,xExtremumGetter:Yae,yExtremumGetter:Xae,getSeriesWithDefaultValues:nse},ise=(t="none")=>{if(typeof t=="function")return t;switch(t){case"none":return null;case"desc":return(e,n)=>n-e;case"asc":return(e,n)=>e-n;default:return null}},ase=t=>{const{seriesOrder:e,series:n}=t,r={};return e.forEach(i=>{const a=bae().startAngle(2*Math.PI*(n[i].startAngle??0)/360).endAngle(2*Math.PI*(n[i].endAngle??360)/360).padAngle(2*Math.PI*(n[i].paddingAngle??0)/360).sortValues(ise(n[i].sortingValues??"none"))(n[i].data.map(s=>s.value));r[i]=H({labelMarkType:"circle",valueFormatter:s=>s.value.toLocaleString()},n[i],{data:n[i].data.map((s,o)=>H({},s,{id:s.id??`auto-generated-pie-id-${i}-${o}`},a[o])).map((s,o)=>{var c,d;return H({labelMarkType:"circle"},s,{formattedValue:((d=(c=n[i]).valueFormatter)==null?void 0:d.call(c,H({},s,{label:oa(s.label,"arc")}),{dataIndex:o}))??s.value.toLocaleString()})})})}),{seriesOrder:e,series:r}},sse=t=>e=>t.data[e].color,ose=t=>{const{seriesOrder:e,series:n}=t;return e.reduce((r,i)=>(n[i].data.forEach((a,s)=>{const o=oa(a.label,"legend");o!==void 0&&r.push({markType:a.labelMarkType??n[i].labelMarkType,id:a.id??s,seriesId:i,color:a.color,label:o,itemId:a.id??s})}),r),[])},lse=t=>{const{series:e,getColor:n,identifier:r}=t;if(!r||r.dataIndex===void 0)return null;const i=e.data[r.dataIndex];if(i==null)return null;const a=oa(i.label,"tooltip"),s=H({},i,{label:a}),o=e.valueFormatter(s,{dataIndex:r.dataIndex});return{identifier:r,color:n(r.dataIndex),label:a,value:s,formattedValue:o,markType:i.labelMarkType??e.labelMarkType}},cse=(t,e,n)=>H({id:t.id??`auto-generated-id-${e}`},t,{data:t.data.map((r,i)=>H({color:n[i%n.length]},r))}),use={colorProcessor:sse,seriesProcessor:ase,legendGetter:ose,tooltipGetter:lse,getSeriesWithDefaultValues:cse},dse={bar:Fae,scatter:Wae,line:rse,pie:use},fse=[dp,Cf,Sf,gu];function hse(t){const{children:e,plugins:n=fse,pluginParams:r={},seriesConfig:i=dse}=t,{contextValue:a}=Yte(n,r,i);return v.jsx(dk.Provider,{value:a,children:e})}const Ql=()=>{const t=O.useContext(dk);if(t==null)throw new Error(["MUI X Charts: Could not find the Chart context.","It looks like you rendered your component outside of a ChartDataProvider.","This can also happen if you are bundling multiple versions of the library."].join(`
`));return t};function _n(){const t=Ql();if(!t)throw new Error(["MUI X Charts: Could not find the charts context.","It looks like you rendered your component outside of a ChartContainer parent component."].join(`
`));return t.store}function ka(){const t=_n();return pt(t,Fo)}function AA(){const t=_n();return pt(t,Rte)}function EA(t){return Hk.getTypes().has(t)}const pse=(t,e,n,r,i,a,s)=>{var m;const o=r==="rotation"?i[e].rotationExtremumGetter:i[e].radiusExtremumGetter,c=((m=s[e])==null?void 0:m.series)??{},[d,f]=(o==null?void 0:o({series:c,axis:n,axisIndex:a,isDefaultAxis:a===0}))??[1/0,-1/0],[p,g]=t;return[Math.min(d,p),Math.max(f,g)]},gse=(t,e,n,r,i)=>{const s=Object.keys(n).filter(EA).reduce((o,c)=>pse(o,c,t,e,n,r,i),[1/0,-1/0]);return Number.isNaN(s[0])||Number.isNaN(s[1])?[1/0,-1/0]:s},Dd=(t,e)=>t===void 0?e:Math.PI*t/180,mse=(t,e,n,r)=>{const i=new Set;return Object.keys(e).filter(EA).forEach(s=>{var d,f,p;const o=((d=n[s])==null?void 0:d.series)??{},c=(p=(f=e[s]).axisTooltipGetter)==null?void 0:p.call(f,o);c!==void 0&&c.forEach(({axisId:g,direction:m})=>{m===t&&i.add(g??r)})}),i};function yse(t,e,n){if(e==="rotation"){if(n.scaleType==="point"){const r=[Dd(n.startAngle,0),Dd(n.endAngle,2*Math.PI)],i=r[1]-r[0];return i>Math.PI*2-.1&&(r[1]-=i/n.data.length),r}return[Dd(n.startAngle,0),Dd(n.endAngle,2*Math.PI)]}return[0,Math.min(t.height,t.width)/2]}const vse=.2,xse=.1;function v8({drawingArea:t,formattedSeries:e,axis:n,seriesConfig:r,axisDirection:i}){if(n===void 0)return{axis:{},axisIds:[]};const a=mse(i,r,e,n[0].id),s={};return n.forEach((o,c)=>{const d=o,f=yse(t,i,d),[p,g]=gse(d,i,r,c,e),m=!d.ignoreTooltip&&a.has(d.id),x=d.data??[];if(b1(d)){const R=d.categoryGapRatio??vse,B=d.barGapRatio??xse;if(s[d.id]=H({offset:0,categoryGapRatio:R,barGapRatio:B,triggerTooltip:m},d,{data:x,scale:Iy(d.data,f).paddingInner(R).paddingOuter(R/2),tickNumber:d.data.length,colorScale:d.colorMap&&(d.colorMap.type==="ordinal"?sf(H({values:d.data},d.colorMap)):Kc(d.colorMap))}),A1(d.data)){const N=E1(d,f);s[d.id].valueFormatter=d.valueFormatter??N}}if(vA(d)&&(s[d.id]=H({offset:0,triggerTooltip:m},d,{data:x,scale:xk(d.data,f),tickNumber:d.data.length,colorScale:d.colorMap&&(d.colorMap.type==="ordinal"?sf(H({values:d.data},d.colorMap)):Kc(d.colorMap))}),A1(d.data))){const R=E1(d,f);s[d.id].valueFormatter=d.valueFormatter??R}if(d.scaleType==="band"||d.scaleType==="point")return;const b=d.scaleType??"linear",A=d.domainLimit??"nice",E=[d.min??p,d.max??g];if(typeof A=="function"){const{min:R,max:B}=A(p,g);E[0]=R,E[1]=B}const S=Vk(H({},d,{range:f,domain:E})),T=Uk(S,f),I=_1(b,E,f),P=A==="nice"?I.nice(S):I,[F,M]=P.domain(),D=[d.min??F,d.max??M];s[d.id]=H({offset:0,triggerTooltip:m},d,{data:x,scaleType:b,scale:P.domain(D),tickNumber:T,colorScale:d.colorMap&&Kc(d.colorMap)})}),{axis:s,axisIds:n.map(({id:o})=>o)}}const x8=t=>t.polarAxis,w8=Ye([x8],t=>t==null?void 0:t.rotation),wse=Ye([x8],t=>t==null?void 0:t.radius),mu=Ye([w8,Fo,ns,jo],(t,e,n,r)=>v8({drawingArea:e,formattedSeries:n,axis:t,seriesConfig:r,axisDirection:"rotation"})),bse=Ye([wse,Fo,ns,jo],(t,e,n,r)=>v8({drawingArea:e,formattedSeries:n,axis:t,seriesConfig:r,axisDirection:"radius"})),_se=Ye([Fo],t=>({cx:t.left+t.width/2,cy:t.top+t.height/2})),Ase=t=>(e,n)=>Math.atan2(e-t.cx,t.cy-n);function Fy(t){return(t%360+360)%360}const P2=2*Math.PI;function Ese(t){return(t%P2+P2)%P2}function W3(t,e){const{scale:n,data:r,reverse:i}=t;if(!rs(n))throw new Error("MUI X Charts: getAxisValue is not implemented for polare continuous axes.");if(!r)return-1;const a=Ese(e-Math.min(...n.range())),s=n.bandwidth()===0?Math.floor((a+n.step()/2)/n.step())%r.length:Math.floor(a/n.step());return s<0||s>=r.length?-1:i?r.length-1-s:s}function Uo(){const t=_n(),{axis:e,axisIds:n}=pt(t,la);return{xAxis:e,xAxisIds:n}}function Zl(){const t=_n(),{axis:e,axisIds:n}=pt(t,ca);return{yAxis:e,yAxisIds:n}}function Sse(t){const e=_n(),{axis:n,axisIds:r}=pt(e,la),i=r[0];return n[i]}function Cse(t){const e=_n(),{axis:n,axisIds:r}=pt(e,ca),i=r[0];return n[i]}function b8(){const t=_n(),{axis:e,axisIds:n}=pt(t,mu);return{rotationAxis:e,rotationAxisIds:n}}function Tse(){const t=_n(),{axis:e,axisIds:n}=pt(t,bse);return{radiusAxis:e,radiusAxisIds:n}}function Ise(t){const e=_n(),{axis:n,axisIds:r}=pt(e,mu),i=r[0];return n[i]}function C1(t){return rs(t)?e=>(t(e)??0)+t.bandwidth()/2:e=>t(e)}function SA(){const t=_n(),{axis:e,axisIds:n}=pt(t,iae)??{axis:{},axisIds:[]};return{zAxis:e,zAxisIds:n}}function CA(){const t=Ql();if(!t)throw new Error(["MUI X Charts: Could not find the svg ref context.","It looks like you rendered your component outside of a ChartContainer parent component."].join(`
`));return t.svgRef}function jy(){const t=_n();return pt(t,ns)}function Dse(t,e){if(t===e)return!0;if(!Array.isArray(t)||!Array.isArray(e))return!1;let n=t.length;if(n!==e.length)return!1;for(;n--;)if(t[n]!==e[n])return!1;return!0}function _8(t){const e=Ye([ns,(n,r)=>r],(n,r)=>{var a,s,o,c,d,f;if(!r||Array.isArray(r)&&r.length===0)return((s=(a=n[t])==null?void 0:a.seriesOrder)==null?void 0:s.map(p=>{var g;return(g=n[t])==null?void 0:g.series[p]}))??[];if(!Array.isArray(r))return(c=(o=n[t])==null?void 0:o.series)==null?void 0:c[r];const i=[];for(const p of r){const g=(f=(d=n[t])==null?void 0:d.series)==null?void 0:f[p];g&&i.push(g)}return i});return n=>{const r=_n();return pt(r,e,[n],Dse)}}function A8(t){const e=Ye([ns],n=>n[t]);return()=>{const n=_n();return pt(n,e)}}_8("pie");const Rse=A8("pie");function Ose(){return Rse()}_8("bar");const Mse=A8("bar");function Pse(){return Mse()}function kse(){return!1}function E8(t,e){return!t||!e?kse:function(r){return r?t.highlight==="series"?r.seriesId===e.seriesId:t.highlight==="item"?r.dataIndex===e.dataIndex&&r.seriesId===e.seriesId:!1:!1}}function Nse(){return!1}function S8(t,e){return!t||!e?Nse:function(r){return r?t.fade==="series"?r.seriesId===e.seriesId&&r.dataIndex!==e.dataIndex:t.fade==="global"?r.seriesId!==e.seriesId||r.dataIndex!==e.dataIndex:!1:!1}}const Lse=t=>t.highlight,Bse=t=>t.series,Fse=Ye([Bse],t=>{const e=new Map;return Object.keys(t.processedSeries).forEach(n=>{var i;const r=t.processedSeries[n];(i=r==null?void 0:r.seriesOrder)==null||i.forEach(a=>{const s=r==null?void 0:r.series[a];e.set(a,s==null?void 0:s.highlightScope)})}),e}),fp=Ye([Lse],function(e){return e.item}),Vy=Ye([Fse,fp],function(e,n){if(!n)return null;const r=e.get(n.seriesId);return r===void 0?null:r}),jse=Ye([Vy,fp],E8),Vse=Ye([Vy,fp],S8),Use=Ye([Vy,fp,(t,e)=>e],function(e,n,r){return E8(e,n)(r)}),Hse=Ye([Vy,fp,(t,e)=>e],function(e,n,r){return S8(e,n)(r)});function C8(t){const e=_n(),n=pt(e,Use,[t]),r=pt(e,Hse,[t]);return{isHighlighted:n,isFaded:!n&&r}}function zse(){const t=_n(),e=pt(t,jse),n=pt(t,Vse);return{isHighlighted:e,isFaded:n}}function $se(t,e){return Object.keys(t).flatMap(n=>{const r=e[n].legendGetter;return r===void 0?[]:r(t[n])})}function Gse(){const t=jy(),e=_n(),n=pt(e,jo);return{items:$se(t,n)}}function Wse(){const t=AA();return O.useCallback(e=>`${t}-gradient-${e}`,[t])}function Yse(){const t=AA();return O.useCallback(e=>`${t}-gradient-${e}-object-bound`,[t])}var k2,Y3;function qse(){if(Y3)return k2;Y3=1;var t=4,e=.001,n=1e-7,r=10,i=11,a=1/(i-1),s=typeof Float32Array=="function";function o(b,A){return 1-3*A+3*b}function c(b,A){return 3*A-6*b}function d(b){return 3*b}function f(b,A,E){return((o(A,E)*b+c(A,E))*b+d(A))*b}function p(b,A,E){return 3*o(A,E)*b*b+2*c(A,E)*b+d(A)}function g(b,A,E,S,T){var I,P,F=0;do P=A+(E-A)/2,I=f(P,S,T)-b,I>0?E=P:A=P;while(Math.abs(I)>n&&++F<r);return P}function m(b,A,E,S){for(var T=0;T<t;++T){var I=p(A,E,S);if(I===0)return A;var P=f(A,E,S)-b;A-=P/I}return A}function x(b){return b}return k2=function(A,E,S,T){if(!(0<=A&&A<=1&&0<=S&&S<=1))throw new Error("bezier x values must be in [0, 1] range");if(A===E&&S===T)return x;for(var I=s?new Float32Array(i):new Array(i),P=0;P<i;++P)I[P]=f(P*a,A,S);function F(M){for(var D=0,R=1,B=i-1;R!==B&&I[R]<=M;++R)D+=a;--R;var N=(M-I[R])/(I[R+1]-I[R]),k=D+N*a,j=p(k,A,S);return j>=e?m(M,k,A,S):j===0?k:g(M,D,D+a,A,S)}return function(D){return D===0?0:D===1?1:f(F(D),E,T)}},k2}var Xse=qse();const Kse=R5(Xse),TA=300,T8="cubic-bezier(0.66, 0, 0.34, 1)",Qse=Kse(.66,0,.34,1);var uf=0,n0=0,Vh=0,I8=1e3,T1,r0,I1=0,iu=0,Uy=0,B0=typeof performance=="object"&&performance.now?performance:Date,D8=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function IA(){return iu||(D8(Zse),iu=B0.now()+Uy)}function Zse(){iu=0}function D1(){this._call=this._time=this._next=null}D1.prototype=R8.prototype={constructor:D1,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?IA():+n)+(e==null?0:+e),!this._next&&r0!==this&&(r0?r0._next=this:T1=this,r0=this),this._call=t,this._time=n,Zw()},stop:function(){this._call&&(this._call=null,this._time=1/0,Zw())}};function R8(t,e,n){var r=new D1;return r.restart(t,e,n),r}function Qw(){IA(),++uf;for(var t=T1,e;t;)(e=iu-t._time)>=0&&t._call.call(void 0,e),t=t._next;--uf}function q3(){iu=(I1=B0.now())+Uy,uf=n0=0;try{Qw()}finally{uf=0,eoe(),iu=0}}function Jse(){var t=B0.now(),e=t-I1;e>I8&&(Uy-=e,I1=t)}function eoe(){for(var t,e=T1,n,r=1/0;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:T1=n);r0=t,Zw(r)}function Zw(t){if(!uf){n0&&(n0=clearTimeout(n0));var e=t-iu;e>24?(t<1/0&&(n0=setTimeout(q3,t-B0.now()-Uy)),Vh&&(Vh=clearInterval(Vh))):(Vh||(I1=B0.now(),Vh=setInterval(Jse,I8)),uf=1,D8(q3))}}function toe(t,e,n){var r=new D1;return e=e==null?0:+e,r.restart(i=>{r.stop(),t(i+e)},e,n),r}class noe{constructor(e,n,r){this.duration=void 0,this.elapsed=0,this.easingFn=void 0,this.timer=null,this.onTickCallback=void 0,this.duration=e,this.easingFn=n,this.onTickCallback=r,this.resume()}get running(){return this.timer!==null}timerCallback(e){this.elapsed=Math.min(e,this.duration);const n=this.duration===0?1:this.elapsed/this.duration,r=this.easingFn(n);this.onTickCallback(r),this.elapsed>=this.duration&&this.stop()}resume(){if(this.running||this.elapsed>=this.duration)return this;const e=IA()-this.elapsed;return this.timer=R8(n=>this.timerCallback(n),0,e),Qw(),this}stop(){return this.running?(this.timer&&(this.timer.stop(),this.timer=null),this):this}finish(){return this.stop(),toe(()=>this.timerCallback(this.duration)),Qw(),this}}function roe(t,e){if(Object.is(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;const n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(let i=0;i<n.length;i+=1){const a=n[i];if(!Object.prototype.hasOwnProperty.call(e,a)||!Object.is(t[a],e[a]))return!1}return!0}function ioe(t,{createInterpolator:e,applyProps:n,skip:r,initialProps:i=t}){const a=O.useRef(i),s=O.useRef(null),o=O.useRef(null),c=O.useRef(t);Kn(()=>{c.current=t},[t]),Kn(()=>{var p;r&&((p=s.current)==null||p.finish(),s.current=null,o.current=null,a.current=t)},[t,r]);const d=O.useCallback(p=>{const g=a.current,m=e(g,t);s.current=new noe(TA,Qse,x=>{const b=m(x);a.current=b,n(p,b)})},[n,e,t]);return O.useCallback(p=>{var m,x,b,A;if(p===null){(m=s.current)==null||m.stop();return}const g=o.current;if(g===p){if(roe(c.current,t)){(x=s.current)==null||x.resume();return}(b=s.current)==null||b.stop()}g&&((A=s.current)==null||A.stop()),o.current=p,(s.current||!r)&&d(p)},[d,t,r])}function hp(t,{createInterpolator:e,transformProps:n,applyProps:r,skip:i,initialProps:a=t,ref:s}){const o=n??(f=>f),c=ioe(t,{initialProps:a,createInterpolator:e,applyProps:(f,p)=>r(f,o(p)),skip:i});return H({},n(i?t:a),{ref:ci(c,s)})}function aoe(t,e){const n=Jt(t.x,e.x),r=Jt(t.y,e.y),i=Jt(t.width,e.width),a=Jt(t.height,e.height);return s=>({x:n(s),y:r(s),width:i(s),height:a(s)})}function soe(t){const e={x:t.layout==="vertical"?t.x:t.xOrigin,y:t.layout==="vertical"?t.yOrigin:t.y,width:t.layout==="vertical"?t.width:0,height:t.layout==="vertical"?0:t.height};return hp({x:t.x,y:t.y,width:t.width,height:t.height},{createInterpolator:aoe,applyProps(n,r){n.setAttribute("x",r.x.toString()),n.setAttribute("y",r.y.toString()),n.setAttribute("width",r.width.toString()),n.setAttribute("height",r.height.toString())},transformProps:n=>n,initialProps:e,skip:t.skipAnimation,ref:t.ref})}function ooe(t,e){const n=Jt(t.x,e.x),r=Jt(t.y,e.y),i=Jt(t.width,e.width),a=Jt(t.height,e.height);return s=>({x:n(s),y:r(s),width:i(s),height:a(s)})}function loe(t){const e={x:t.layout==="vertical"?t.x+t.width/2:t.xOrigin,y:t.layout==="vertical"?t.yOrigin:t.y+t.height/2,width:t.width,height:t.height},n={x:t.x+t.width/2,y:t.y+t.height/2,width:t.width,height:t.height};return hp(n,{createInterpolator:ooe,transformProps:r=>r,applyProps(r,i){r.setAttribute("x",i.x.toString()),r.setAttribute("y",i.y.toString()),r.setAttribute("width",i.width.toString()),r.setAttribute("height",i.height.toString())},initialProps:e,skip:t.skipAnimation,ref:t.ref})}function coe(t,e){const n=Jt(t.startAngle,e.startAngle),r=Jt(t.endAngle,e.endAngle),i=Jt(t.innerRadius,e.innerRadius),a=Jt(t.outerRadius,e.outerRadius),s=Jt(t.paddingAngle,e.paddingAngle),o=Jt(t.cornerRadius,e.cornerRadius);return c=>({startAngle:n(c),endAngle:r(c),innerRadius:i(c),outerRadius:a(c),paddingAngle:s(c),cornerRadius:o(c)})}function uoe(t){const e={startAngle:(t.startAngle+t.endAngle)/2,endAngle:(t.startAngle+t.endAngle)/2,innerRadius:t.innerRadius,outerRadius:t.outerRadius,paddingAngle:t.paddingAngle,cornerRadius:t.cornerRadius};return hp({startAngle:t.startAngle,endAngle:t.endAngle,innerRadius:t.innerRadius,outerRadius:t.outerRadius,paddingAngle:t.paddingAngle,cornerRadius:t.cornerRadius},{createInterpolator:coe,transformProps:n=>({d:u8().cornerRadius(n.cornerRadius)({padAngle:n.paddingAngle,innerRadius:n.innerRadius,outerRadius:n.outerRadius,startAngle:n.startAngle,endAngle:n.endAngle}),visibility:n.startAngle===n.endAngle?"hidden":"visible"}),applyProps(n,r){n.setAttribute("d",r.d),n.setAttribute("visibility",r.visibility)},initialProps:e,skip:t.skipAnimation,ref:t.ref})}function doe(t,e){const n=Jt(t.startAngle,e.startAngle),r=Jt(t.endAngle,e.endAngle),i=Jt(t.innerRadius,e.innerRadius),a=Jt(t.outerRadius,e.outerRadius),s=Jt(t.paddingAngle,e.paddingAngle),o=Jt(t.cornerRadius,e.cornerRadius);return c=>({startAngle:n(c),endAngle:r(c),innerRadius:i(c),outerRadius:a(c),paddingAngle:s(c),cornerRadius:o(c)})}function foe(t){const e={startAngle:(t.startAngle+t.endAngle)/2,endAngle:(t.startAngle+t.endAngle)/2,innerRadius:t.arcLabelRadius??t.innerRadius,outerRadius:t.arcLabelRadius??t.outerRadius,paddingAngle:t.paddingAngle,cornerRadius:t.cornerRadius};return hp({startAngle:t.startAngle,endAngle:t.endAngle,innerRadius:(t==null?void 0:t.arcLabelRadius)??t.innerRadius,outerRadius:(t==null?void 0:t.arcLabelRadius)??t.outerRadius,paddingAngle:t.paddingAngle,cornerRadius:t.cornerRadius},{createInterpolator:doe,transformProps:n=>{const[r,i]=u8().cornerRadius(n.cornerRadius).centroid({padAngle:n.paddingAngle,startAngle:n.startAngle,endAngle:n.endAngle,innerRadius:n.innerRadius,outerRadius:n.outerRadius});return{x:r,y:i}},applyProps(n,{x:r,y:i}){n.setAttribute("x",r.toString()),n.setAttribute("y",i.toString())},initialProps:e,skip:t.skipAnimation,ref:t.ref})}function hoe(){return Ql().chartRootRef}const poe={"image/png":"PNG","image/jpeg":"JPEG","image/webp":"WebP"},goe=t=>({components:{MuiChartsLocalizationProvider:{defaultProps:{localeText:H({},t)}}}}),O8={loading:"Loading data",noData:"No data to display",zoomIn:"Zoom in",zoomOut:"Zoom out",toolbarExport:"Export",toolbarExportPrint:"Print",toolbarExportImage:t=>`Export as ${poe[t]??t}`},moe=O8;goe(O8);const yoe=["localeText"],Jw=O.createContext(null);function voe(t){const{localeText:e}=t,n=je(t,yoe),{localeText:r}=O.useContext(Jw)??{localeText:void 0},i=bt({props:n,name:"MuiChartsLocalizationProvider"}),{children:a,localeText:s}=i,o=O.useMemo(()=>H({},moe,s,r,e),[s,r,e]),c=O.useMemo(()=>({localeText:o}),[o]);return v.jsx(Jw.Provider,{value:c,children:a})}const M8=()=>{const t=O.useContext(Jw);if(t===null)throw new Error(["MUI X Charts: Can not find the charts localization context.","It looks like you forgot to wrap your component in ChartsLocalizationProvider.","This can also happen if you are bundling multiple versions of the `@mui/x-charts` package"].join(`
`));return t};function xoe(t){const{id:e,offset:n}=t,{left:r,top:i,width:a,height:s}=ka(),o=H({top:0,right:0,bottom:0,left:0},n);return v.jsx("clipPath",{id:e,children:v.jsx("rect",{x:r-o.left,y:i-o.top,width:a+o.left+o.right,height:s+o.top+o.bottom})})}function woe(){return typeof window>"u"}const sm=new Map,boe=2e3,_oe={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},Aoe=["minWidth","maxWidth","width","minHeight","maxHeight","height","top","left","fontSize","padding","margin","paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom"],X3="mui_measurement_span";function P8(t,e){return Aoe.indexOf(t)>=0&&e===+e?`${e}px`:e}function k8(t){return t.split("").reduce((r,i)=>i===i.toUpperCase()?[...r,"-",i.toLowerCase()]:[...r,i],[]).join("")}const Eoe=t=>Object.keys(t).sort().reduce((e,n)=>`${e}${k8(n)}:${P8(n,t[n])};`,"");let N2;const pp=(t,e={})=>{if(t==null||woe())return{width:0,height:0};const n=`${t}`,r=Eoe(e),i=`${n}-${r}`,a=sm.get(i);if(a)return a;try{let s=document.getElementById(X3);s===null&&(s=document.createElement("span"),s.setAttribute("id",X3),s.setAttribute("aria-hidden","true"),document.body.appendChild(s));const o=H({},_oe,e);Object.keys(o).map(f=>(s.style[k8(f)]=P8(f,o[f]),f)),s.textContent=n;const c=s.getBoundingClientRect(),d={width:c.width,height:c.height};return sm.set(i,d),sm.size+1>boe&&sm.clear(),N2&&clearTimeout(N2),N2=setTimeout(()=>{s.textContent=""},0),d}catch{return{width:0,height:0}}};function N8({style:t,needsComputation:e,text:n}){return n.split(`
`).map(r=>H({text:r},e?pp(r,t):{width:0,height:0}))}function DA(){const[t,e]=O.useState(typeof window<"u"||!1);return O.useEffect(()=>{e(!0)},[]),t}const Soe=["x","y","style","text","ownerState"],Coe=["angle","textAnchor","dominantBaseline"];function R1(t){const{x:e,y:n,style:r,text:i}=t,a=je(t,Soe),s=r??{},{angle:o,textAnchor:c,dominantBaseline:d}=s,f=je(s,Coe),p=DA(),g=O.useMemo(()=>N8({style:f,needsComputation:p&&i.includes(`
`),text:i}),[f,i,p]);let m;switch(d){case"hanging":case"text-before-edge":m=0;break;case"central":m=(g.length-1)/2*-g[0].height;break;default:m=(g.length-1)*-g[0].height;break}return v.jsx("text",H({},a,{transform:o?`rotate(${o}, ${e}, ${n})`:void 0,x:e,y:n,textAnchor:c,dominantBaseline:d,style:f,children:g.map((x,b)=>v.jsx("tspan",{x:e,dy:`${b===0?m:g[0].height}px`,dominantBaseline:d,children:x.text},b))}))}function RA(t){return typeof t=="number"&&!Number.isFinite(t)}const L2={start:0,extremities:0,end:1,middle:.5};function Toe(t){const{scale:e,tickNumber:n,valueFormatter:r,tickInterval:i,tickPlacement:a="extremities",tickLabelPlacement:s,isInside:o}=t;if(rs(e)){const g=e.domain(),m=s??"middle";return e.bandwidth()>0?[...(typeof i=="function"&&g.filter(i)||typeof i=="object"&&i||g).map(A=>{const E=`${A}`;return{value:A,formattedValue:(r==null?void 0:r(A,{location:"tick",scale:e,tickNumber:n,defaultTickLabel:E}))??E,offset:e(A)-(e.step()-e.bandwidth())/2+L2[a]*e.step(),labelOffset:m==="tick"?0:e.step()*(L2[m]-L2[a])}}),...a==="extremities"?[{formattedValue:void 0,offset:e.range()[1],labelOffset:0}]:[]]:(typeof i=="function"&&g.filter(i)||typeof i=="object"&&i||g).map(b=>{const A=`${b}`;return{value:b,formattedValue:(r==null?void 0:r(b,{location:"tick",scale:e,tickNumber:n,defaultTickLabel:A}))??A,offset:e(b),labelOffset:0}})}if(e.domain().some(RA))return[];const d=s,f=typeof i=="object"?i:e.ticks(n),p=[];for(let g=0;g<f.length;g+=1){const m=f[g],x=e(m);if(o(x)){const b=e.tickFormat(n)(m);p.push({value:m,formattedValue:(r==null?void 0:r(m,{location:"tick",scale:e,tickNumber:n,defaultTickLabel:b}))??b,offset:x,labelOffset:d==="middle"?e(f[g-1]??0)-(x+e(f[g-1]??0))/2:0})}}return p}function Hy(t){const{scale:e,tickNumber:n,valueFormatter:r,tickInterval:i,tickPlacement:a="extremities",tickLabelPlacement:s,direction:o}=t,{instance:c}=Ql(),d=o==="x"?c.isXInside:c.isYInside;return O.useMemo(()=>Toe({scale:e,tickNumber:n,tickPlacement:a,tickInterval:i,tickLabelPlacement:s,valueFormatter:r,isInside:d}),[e,n,a,i,s,r,d])}function Ioe(t=!1){const[e,n]=O.useState(!1);return Kn(()=>{t||n(!0)},[t]),O.useEffect(()=>{t&&n(!0)},[t]),e}const L8=typeof window<"u"&&"Intl"in window&&"Segmenter"in Intl?new Intl.Segmenter(void 0,{granularity:"grapheme"}):null;function Doe(t){return t.length}function Roe(t){const e=L8.segment(t);let n=0;for(const r of e)n+=1;return n}const Ooe=L8?Roe:Doe;function Moe(t){return t*(Math.PI/180)}const B8=typeof window<"u"&&"Intl"in window&&"Segmenter"in Intl?new Intl.Segmenter(void 0,{granularity:"grapheme"}):null;function Poe(t,e){return t.slice(0,e)}function koe(t,e){const n=B8.segment(t);let r="",i=0;for(const a of n)if(r+=a.segment,i+=1,i>=e)break;return r}const Noe=B8?koe:Poe,K3="";function F8(t,e){const{width:n,height:r,measureText:i}=e,a=Moe(e.angle),s=i(t),o=Math.abs(s.width*Math.cos(a))+Math.abs(s.height*Math.sin(a)),c=Math.abs(s.width*Math.sin(a))+Math.abs(s.height*Math.cos(a));return o<=n&&c<=r}function j8(t,e){if(e(t))return t;let n=t,r=1,i=1/2;const a=Ooe(t);let s=a,o=a,c=null;do{if(o=s,s=Math.floor(a*i),s===0)break;n=Noe(t,s).trim();const d=e(n+K3);r+=1,d?(c=n,i+=1/2**r):i-=1/2**r}while(Math.abs(s-o)!==1);return c?c+K3:""}function Loe(t,e,n,r,i){const a=new Map,s=Fy((i==null?void 0:i.angle)??0);let o=1,c=1;(i==null?void 0:i.textAnchor)==="start"?(o=1/0,c=1):(i==null?void 0:i.textAnchor)==="end"?(o=1,c=1/0):(o=2,c=2),s>90&&s<270&&([o,c]=[c,o]),r&&([o,c]=[c,o]);for(const d of t)if(d.formattedValue){const f=Math.min((d.offset+d.labelOffset)*o,(e.left+e.width+e.right-d.offset-d.labelOffset)*c),p=g=>F8(g,{width:f,height:n,angle:s,measureText:m=>pp(m,i)});a.set(d,j8(d.formattedValue.toString(),p))}return a}const Q3=5;function Boe(t,e,n=0){const r=Math.min(Math.abs(n)%180,Math.abs(Math.abs(n)%180-180)%180);if(r<Q3)return t;if(r>90-Q3)return e;const i=Dd(r),a=Math.atan2(e,t);return i<a?t/Math.cos(i):e/Math.sin(i)}function Foe(t,{tickLabelStyle:e,tickLabelInterval:n,tickLabelMinGap:r,reverse:i,isMounted:a,isXInside:s}){const o=f=>{if(!a||f.formattedValue===void 0)return{width:0,height:0};const p=N8({style:e,needsComputation:!0,text:f.formattedValue});return{width:Math.max(...p.map(g=>g.width)),height:Math.max(p.length*p[0].height)}};if(typeof n=="function")return new Set(t.filter((f,p)=>n(f.value,p)));let c=0;const d=i?-1:1;return new Set(t.filter((f,p)=>{const{offset:g,labelOffset:m}=f,x=g+m;if(p>0&&d*x<d*(c+r)||!s(x))return!1;const{width:b,height:A}=o(f),E=Boe(b,A,e==null?void 0:e.angle),S=x-d*E/2;return p>0&&d*S<d*(c+r)?!1:(c=x+d*E/2,!0)}))}function V8(t){return Ot("MuiChartsAxis",t)}const om=Mt("MuiChartsAxis",["root","line","tickContainer","tick","tickLabel","label","directionX","directionY","top","bottom","left","right","id"]),U8=Pe("g",{name:"MuiChartsAxis",slot:"Root"})(({theme:t})=>({[`& .${om.tickLabel}`]:H({},t.typography.caption,{fill:(t.vars||t).palette.text.primary}),[`& .${om.label}`]:{fill:(t.vars||t).palette.text.primary},[`& .${om.line}`]:{stroke:(t.vars||t).palette.text.primary,shapeRendering:"crispEdges",strokeWidth:1},[`& .${om.tick}`]:{stroke:(t.vars||t).palette.text.primary,shapeRendering:"crispEdges"}})),joe=t=>{const{classes:e,position:n,id:r}=t,i={root:["root","directionX",n,`id-${r}`],line:["line"],tickContainer:["tickContainer"],tick:["tick"],tickLabel:["tickLabel"],label:["label"]};return wt(i,V8,e)},eb=3,Voe=4,H8=Pe(U8,{name:"MuiChartsXAxis",slot:"Root"})({}),Uoe={disableLine:!1,disableTicks:!1,tickSize:6,tickLabelMinGap:4};function z8(t){const e=Fy(t);return e<=30||e>=330||e<=210&&e>=150?"middle":e<=180?"end":"start"}function $8(t){const e=Fy(t);return e<=30||e>=330?"hanging":e<=210&&e>=150?"auto":"central"}function G8(t){switch(t){case"start":return"end";case"end":return"start";default:return t}}const Hoe=["scale","tickNumber","reverse"],W8=t=>{const{xAxis:e,xAxisIds:n}=Uo(),r=e[t.axisId??n[0]],{scale:i,tickNumber:a,reverse:s}=r,o=je(r,Hoe),c=bt({props:H({},o,t),name:"MuiChartsXAxis"}),d=H({},Uoe,c),{position:f,tickLabelStyle:p,labelStyle:g,slots:m,slotProps:x}=d,b=di(),A=Ma(),E=joe(d),S=f==="bottom"?1:-1,T=(m==null?void 0:m.axisLine)??"line",I=(m==null?void 0:m.axisTick)??"line",P=(m==null?void 0:m.axisTickLabel)??R1,F=(m==null?void 0:m.axisLabel)??R1,M=z8((f==="bottom"?0:180)-((p==null?void 0:p.angle)??0)),D=$8((f==="bottom"?0:180)-((p==null?void 0:p.angle)??0)),R=Ct({elementType:P,externalSlotProps:x==null?void 0:x.axisTickLabel,additionalProps:{style:H({},b.typography.caption,{fontSize:12,lineHeight:1.25,textAnchor:A?G8(M):M,dominantBaseline:D},p)},className:E.tickLabel,ownerState:{}}),B=Ct({elementType:F,externalSlotProps:x==null?void 0:x.axisLabel,additionalProps:{style:H({},b.typography.body1,{lineHeight:1,fontSize:14,textAnchor:"middle",dominantBaseline:f==="bottom"?"text-after-edge":"text-before-edge"},g)},ownerState:{}}),N=i.domain(),k=rs(i),j=k&&N.length===0||!k&&N.some(RA)||f==="none";return{xScale:i,defaultizedProps:d,tickNumber:a,positionSign:S,skipAxisRendering:j,classes:E,Line:T,Tick:I,TickLabel:P,Label:F,axisTickLabelProps:R,axisLabelProps:B,reverse:s,isRtl:A}};function zoe(t){const{xScale:e,defaultizedProps:n,tickNumber:r,positionSign:i,skipAxisRendering:a,classes:s,Line:o,Tick:c,TickLabel:d,Label:f,axisTickLabelProps:p,axisLabelProps:g,reverse:m,isRtl:x}=W8(t),b=Ioe(),{position:A,disableLine:E,disableTicks:S,label:T,tickSize:I,valueFormatter:P,slotProps:F,tickInterval:M,tickLabelInterval:D,tickPlacement:R,tickLabelPlacement:B,tickLabelMinGap:N,sx:k,offset:j,height:q}=n,X=ka(),{left:G,top:W,width:K,height:Z}=X,{instance:fe}=Ql(),me=DA(),ve=S?4:I,be=Hy({scale:e,tickNumber:r,valueFormatter:P,tickInterval:M,tickPlacement:R,tickLabelPlacement:B,direction:"x"}),Me=Foe(be,{tickLabelStyle:p.style,tickLabelInterval:D,tickLabelMinGap:N,reverse:m,isMounted:b,isXInside:fe.isXInside});if(a)return null;const ge=T?pp(T,g.style).height:0,Le={x:G+K/2,y:i*q},Ne=Math.max(0,q-(T?ge+Voe:0)-ve-eb),Se=me?Loe(Me,X,Ne,x,p.style):new Map(Array.from(Me).map(J=>[J,J.formattedValue]));return v.jsxs(H8,{transform:`translate(0, ${A==="bottom"?W+Z+j:W-j})`,className:s.root,sx:k,children:[!E&&v.jsx(o,H({x1:G,x2:G+K,className:s.line},F==null?void 0:F.axisLine)),be.map((J,he)=>{const{offset:ue,labelOffset:ie}=J,Be=ie??0,we=i*(ve+eb),$e=fe.isXInside(ue),Oe=Se.get(J),De=Me.has(J);return v.jsxs("g",{transform:`translate(${ue}, 0)`,className:s.tickContainer,children:[!S&&$e&&v.jsx(c,H({y2:i*ve,className:s.tick},F==null?void 0:F.axisTick)),Oe!==void 0&&De&&v.jsx(d,H({x:Be,y:we},p,{text:Oe}))]},he)}),T&&v.jsx("g",{className:s.label,children:v.jsx(f,H({},Le,g,{text:T}))})]})}const Uh={start:0,extremities:0,end:1,middle:.5,tick:0};function $oe(t){const{scale:e,tickInterval:n,tickLabelPlacement:r="middle",tickPlacement:i="extremities",groups:a}=t;return O.useMemo(()=>{const s=e.domain(),o=typeof n=="function"&&s.filter(n)||typeof n=="object"&&n||s;if(e.bandwidth()>0){const c=Z3(o,a,i,r,e);return c[0]&&(c[0].ignoreTick=!0),[{formattedValue:void 0,offset:e.range()[0],labelOffset:0,groupIndex:a.length-1},...c,{formattedValue:void 0,offset:e.range()[1],labelOffset:0,groupIndex:a.length-1}]}return Z3(o,a,i,r,e)},[e,n,a,i,r])}function Z3(t,e,n,r,i){const a=[],s=new Map;let o=0;for(let c=0;c<e.length;c+=1)for(let d=0;d<t.length;d+=1){const f=t[d],p=e[c].getValue(f,d),g=a[a.length-1];if((g==null?void 0:g.value)!==p||(g==null?void 0:g.groupIndex)!==c){o=1;const x=rs(i)?i(f)-(i.step()-i.bandwidth())/2+Uh[n]*i.step():i(f),b=i.step()*o*(Uh[r]-Uh[n]);a.push({value:p,formattedValue:`${p}`,offset:x,groupIndex:c,dataIndex:d,ignoreTick:!1,labelOffset:b}),s.has(d)||s.set(d,new Set);const A=s.get(d);for(const E of A.values())a[E].ignoreTick=!0;A.add(a.length-1)}else{o+=1;const x=i.step()*o*(Uh[r]-Uh[n]);g.labelOffset=x}}return a}const J3={tickSize:6},Goe=(t,e,n)=>{const r=t[e]??{},i=n??J3.tickSize,a=i*e*2+i;return H({},J3,r,{tickSize:r.tickSize??a})};function Woe(t){const{xScale:e,defaultizedProps:n,positionSign:r,skipAxisRendering:i,classes:a,Line:s,Tick:o,TickLabel:c,Label:d,axisTickLabelProps:f,axisLabelProps:p}=W8(t);if(!rs(e))throw new Error("MUI X Charts: ChartsGroupedXAxis only supports the `band` and `point` scale types.");const{position:g,disableLine:m,disableTicks:x,label:b,tickSize:A,valueFormatter:E,slotProps:S,tickInterval:T,tickPlacement:I,tickLabelPlacement:P,sx:F,offset:M,height:D}=n,R=n.groups,B=ka(),{left:N,top:k,width:j,height:q}=B,{instance:X}=Ql(),G={x:N+j/2,y:r*D},W=$oe({scale:e,tickInterval:T,tickPlacement:I,tickLabelPlacement:P,groups:R});return i?null:v.jsxs(H8,{transform:`translate(0, ${g==="bottom"?k+q+M:k-M})`,className:a.root,sx:F,children:[!m&&v.jsx(s,H({x1:N,x2:N+j,className:a.line},S==null?void 0:S.axisLine)),W.map((K,Z)=>{const{offset:fe,labelOffset:me}=K,ve=me??0,be=X.isXInside(fe),Me=K.formattedValue,ge=K.ignoreTick??!1,Le=K.groupIndex??0,Ne=Goe(R,Le,A),Se=r*Ne.tickSize,J=r*(Ne.tickSize+eb);return v.jsxs("g",{transform:`translate(${fe}, 0)`,className:a.tickContainer,"data-group-index":Le,children:[!x&&!ge&&be&&v.jsx(o,H({y2:Se,className:a.tick},S==null?void 0:S.axisTick)),Me!==void 0&&v.jsx(c,H({x:ve,y:J},f,{text:Me}))]},Z)}),b&&v.jsx("g",{className:a.label,children:v.jsx(d,H({},G,p,{text:b}))})]})}function Yoe(t){const{xAxis:e,xAxisIds:n}=Uo(),r=e[t.axisId??n[0]];return"groups"in r&&Array.isArray(r.groups)?v.jsx(Woe,H({},t)):v.jsx(zoe,H({},t))}function qoe(t,e,n,r,i){const a=new Map,s=Fy((i==null?void 0:i.angle)??0);let o=1,c=1;(i==null?void 0:i.textAnchor)==="start"?(o=1/0,c=1):(i==null?void 0:i.textAnchor)==="end"?(o=1,c=1/0):(o=2,c=2),s>180&&([o,c]=[c,o]),r&&([o,c]=[c,o]);for(const d of t)if(d.formattedValue){const f=Math.min((d.offset+d.labelOffset)*o,(e.top+e.height+e.bottom-d.offset-d.labelOffset)*c),p=g=>F8(g,{width:n,height:f,angle:s,measureText:m=>pp(m,i)});a.set(d,j8(d.formattedValue.toString(),p))}return a}const Xoe=["scale","tickNumber"],Koe=t=>{const{classes:e,position:n,id:r}=t,i={root:["root","directionY",n,`id-${r}`],line:["line"],tickContainer:["tickContainer"],tick:["tick"],tickLabel:["tickLabel"],label:["label"]};return wt(i,V8,e)},eR=2,Qoe=2,Zoe=Pe(U8,{name:"MuiChartsYAxis",slot:"Root"})({}),Joe={disableLine:!1,disableTicks:!1,tickSize:6};function ele(t){const{yAxisIds:e,yAxis:n}=Zl(),r=n[t.axisId??e[0]],{scale:i,tickNumber:a}=r,s=je(r,Xoe),o=bt({props:H({},s,t),name:"MuiChartsYAxis"}),c=H({},Joe,o),{position:d,disableLine:f,disableTicks:p,label:g,labelStyle:m,tickLabelStyle:x,tickSize:b,valueFormatter:A,slots:E,slotProps:S,tickPlacement:T,tickLabelPlacement:I,tickInterval:P,tickLabelInterval:F,sx:M,offset:D,width:R}=c,B=di(),N=Ma(),k=DA(),j=Koe(c),{instance:q}=Ql(),X=ka(),{left:G,top:W,width:K,height:Z}=X,fe=p?4:b,me=Hy({scale:i,tickNumber:a,valueFormatter:A,tickPlacement:T,tickLabelPlacement:I,tickInterval:P,direction:"y"}),ve=d==="right"?1:-1,be=typeof(x==null?void 0:x.fontSize)=="number"?x.fontSize:12,Me=(E==null?void 0:E.axisLine)??"line",ge=(E==null?void 0:E.axisTick)??"line",Le=(E==null?void 0:E.axisTickLabel)??R1,Ne=(E==null?void 0:E.axisLabel)??R1,Se=z8((d==="right"?-90:90)-((x==null?void 0:x.angle)??0)),J=$8((d==="right"?-90:90)-((x==null?void 0:x.angle)??0)),he=Ct({elementType:Le,externalSlotProps:S==null?void 0:S.axisTickLabel,additionalProps:{style:H({},B.typography.caption,{fontSize:be,textAnchor:N?G8(Se):Se,dominantBaseline:J},x)},className:j.tickLabel,ownerState:{}}),ue=Ct({elementType:Ne,externalSlotProps:S==null?void 0:S.axisLabel,additionalProps:{style:H({},B.typography.body1,{lineHeight:1,fontSize:14,angle:ve*90,textAnchor:"middle",dominantBaseline:"text-before-edge"},m)},ownerState:{}}),ie=Ct({elementType:Me,externalSlotProps:S==null?void 0:S.axisLine,additionalProps:{strokeLinecap:"square"},ownerState:{}}),Be=i.domain(),we=rs(i);if(we&&Be.length===0||!we&&Be.some(RA)||d==="none")return null;const $e={x:ve*R,y:W+Z/2},Oe=Math.max(0,R-(g?pp(g,ue.style).height+Qoe:0)-fe-eR),De=k?qoe(me,X,Oe,N,he.style):new Map(Array.from(me).map(qe=>[qe,qe.formattedValue]));return v.jsxs(Zoe,{transform:`translate(${d==="right"?G+K+D:G-D}, 0)`,className:j.root,sx:M,children:[!f&&v.jsx(Me,H({y1:W,y2:W+Z,className:j.line},ie)),me.map((qe,We)=>{const{offset:Re,labelOffset:ke,value:ht}=qe,_t=ve*(fe+eR),xn=ke,Pn=typeof F=="function"&&!(F!=null&&F(ht,We)),rt=q.isYInside(Re),at=De.get(qe);return rt?v.jsxs("g",{transform:`translate(0, ${Re})`,className:j.tickContainer,children:[!p&&v.jsx(ge,H({x2:ve*fe,className:j.tick},S==null?void 0:S.axisTick)),at!==void 0&&!Pn&&v.jsx(Le,H({x:_t,y:xn,text:at},he))]},We):null}),g&&k&&v.jsx("g",{className:j.label,children:v.jsx(Ne,H({},$e,ue,{text:g}))})]})}function tle(t){const{slots:e,slotProps:n}=t,{xAxisIds:r,xAxis:i}=Uo(),{yAxisIds:a,yAxis:s}=Zl();return v.jsxs(O.Fragment,{children:[r.map(o=>!i[o].position||i[o].position==="none"?null:v.jsx(Yoe,{slots:e,slotProps:n,axisId:o},o)),a.map(o=>!s[o].position||s[o].position==="none"?null:v.jsx(ele,{slots:e,slotProps:n,axisId:o},o))]})}function nle(t){return Ot("MuiChartsGrid",t)}const tR=Mt("MuiChartsGrid",["root","line","horizontalLine","verticalLine"]),rle=Pe("g",{name:"MuiChartsGrid",slot:"Root",overridesResolver:(t,e)=>[{[`&.${tR.verticalLine}`]:e.verticalLine},{[`&.${tR.horizontalLine}`]:e.horizontalLine},e.root]})({}),Y8=Pe("line",{name:"MuiChartsGrid",slot:"Line"})(({theme:t})=>({stroke:(t.vars||t).palette.divider,shapeRendering:"crispEdges",strokeWidth:1}));function ile(t){const{axis:e,start:n,end:r,classes:i}=t,{scale:a,tickNumber:s,tickInterval:o}=e,c=Hy({scale:a,tickNumber:s,tickInterval:o,direction:"x"});return v.jsx(O.Fragment,{children:c.map(({value:d,offset:f})=>{var p;return v.jsx(Y8,{y1:n,y2:r,x1:f,x2:f,className:i.verticalLine},`vertical-${((p=d==null?void 0:d.getTime)==null?void 0:p.call(d))??d}`)})})}function ale(t){const{axis:e,start:n,end:r,classes:i}=t,{scale:a,tickNumber:s,tickInterval:o}=e,c=Hy({scale:a,tickNumber:s,tickInterval:o,direction:"y"});return v.jsx(O.Fragment,{children:c.map(({value:d,offset:f})=>{var p;return v.jsx(Y8,{y1:f,y2:f,x1:n,x2:r,className:i.horizontalLine},`horizontal-${((p=d==null?void 0:d.getTime)==null?void 0:p.call(d))??d}`)})})}const sle=["vertical","horizontal"],ole=({classes:t})=>wt({root:["root"],verticalLine:["line","verticalLine"],horizontalLine:["line","horizontalLine"]},nle,t);function lle(t){const e=bt({props:t,name:"MuiChartsGrid"}),n=ka(),{vertical:r,horizontal:i}=e,a=je(e,sle),{xAxis:s,xAxisIds:o}=Uo(),{yAxis:c,yAxisIds:d}=Zl(),f=ole(e),p=c[d[0]],g=s[o[0]];return v.jsxs(rle,H({},a,{className:f.root,children:[r&&v.jsx(ile,{axis:g,start:n.top,end:n.height+n.top,classes:f}),i&&v.jsx(ale,{axis:p,start:n.left,end:n.width+n.left,classes:f})]}))}function cle(t){return Ot("MuiChartsTooltip",t)}const bd=Mt("MuiChartsTooltip",["root","paper","table","row","cell","mark","markContainer","labelCell","valueCell","axisValueCell"]),zy=t=>wt({root:["root"],paper:["paper"],table:["table"],row:["row"],cell:["cell"],mark:["mark"],markContainer:["markContainer"],labelCell:["labelCell"],valueCell:["valueCell"],axisValueCell:["axisValueCell"]},cle,t);function ule(){var F,M,D;const t=_n(),e=pt(t,Kk),n=pt(t,jo),r=jy(),{xAxis:i,xAxisIds:a}=Uo(),{yAxis:s,yAxisIds:o}=Zl(),{zAxis:c,zAxisIds:d}=SA(),{rotationAxis:f,rotationAxisIds:p}=b8(),{radiusAxis:g,radiusAxisIds:m}=Tse(),x=r.xAxisId??a[0],b=r.yAxisId??o[0],A=r.zAxisId??d[0],E=r.rotationAxisId??p[0],S=r.radiusAxisId??m[0];if(!e)return null;const T=(F=r[e.type])==null?void 0:F.series[e.seriesId];if(!T)return null;const I=((D=(M=n[T.type]).colorProcessor)==null?void 0:D.call(M,T,x&&i[x],b&&s[b],A&&c[A]))??(()=>""),P={};return x!==void 0&&(P.x=i[x]),b!==void 0&&(P.y=s[b]),E!==void 0&&(P.rotation=f[E]),S!==void 0&&(P.radius=g[S]),n[T.type].tooltipGetter({series:T,axesConfig:P,getColor:I,identifier:e})}const tb=Pe("div",{name:"MuiChartsTooltip",slot:"Container",overridesResolver:(t,e)=>e.paper})(({theme:t})=>{var e;return{backgroundColor:(t.vars||t).palette.background.paper,color:(t.vars||t).palette.text.primary,borderRadius:(e=(t.vars||t).shape)==null?void 0:e.borderRadius,border:`solid ${(t.vars||t).palette.divider} 1px`}}),nb=Pe("table",{name:"MuiChartsTooltip",slot:"Table"})(({theme:t})=>({borderSpacing:0,[`& .${bd.markContainer}`]:{display:"inline-block",width:`calc(20px + ${t.spacing(1.5)})`,verticalAlign:"middle"},"& caption":{borderBottom:`solid ${(t.vars||t).palette.divider} 1px`,padding:t.spacing(.5,1.5),textAlign:"start",whiteSpace:"nowrap","& span":{marginRight:t.spacing(1.5)}}})),rb=Pe("tr",{name:"MuiChartsTooltip",slot:"Row"})(({theme:t})=>({"tr:first-of-type& td":{paddingTop:t.spacing(.5)},"tr:last-of-type& td":{paddingBottom:t.spacing(.5)}})),Rd=Pe(te,{name:"MuiChartsTooltip",slot:"Cell"})(({theme:t})=>({verticalAlign:"middle",color:(t.vars||t).palette.text.secondary,textAlign:"start",[`&.${bd.cell}`]:{paddingLeft:t.spacing(1),paddingRight:t.spacing(1)},[`&.${bd.labelCell}`]:{fontWeight:t.typography.fontWeightRegular},[`&.${bd.valueCell}, &.${bd.axisValueCell}`]:{color:(t.vars||t).palette.text.primary,fontWeight:t.typography.fontWeightMedium},[`&.${bd.valueCell}`]:{paddingLeft:t.spacing(1.5),paddingRight:t.spacing(1.5)},"td:first-of-type&, th:first-of-type&":{paddingLeft:t.spacing(1.5)},"td:last-of-type&, th:last-of-type&":{paddingRight:t.spacing(1.5)}}));function dle(t){return Ot("MuiChartsLabelMark",t)}const fd=Mt("MuiChartsLabelMark",["root","line","square","circle","mask","fill"]),fle=t=>{const{type:e}=t;return wt({root:typeof e=="function"?["root"]:["root",e],mask:["mask"],fill:["fill"]},dle,t.classes)},q8=(t,e,n)=>O.forwardRef(function(i,a){var g;const s=bt({props:i,name:t}),o=typeof e.defaultProps=="function"?e.defaultProps(s):e.defaultProps??{},c=SR(o,s),d=di(),f=(g=e.classesResolver)==null?void 0:g.call(e,c,d),p=O.forwardRef(n);return v.jsx(p,H({},c,{classes:f,ref:a}))}),hle=["type","color","className","classes"],ple=Pe("div",{name:"MuiChartsLabelMark",slot:"Root"})(()=>({display:"flex",width:14,height:14,[`&.${fd.line}`]:{width:16,height:"unset",alignItems:"center",[`.${fd.mask}`]:{height:4,width:"100%",borderRadius:1,overflow:"hidden"}},[`&.${fd.square}`]:{height:13,width:13,borderRadius:2,overflow:"hidden"},[`&.${fd.circle}`]:{height:15,width:15},svg:{display:"block"},[`& .${fd.mask} > *`]:{height:"100%",width:"100%"},[`& .${fd.mask}`]:{height:"100%",width:"100%"}})),O1=q8("MuiChartsLabelMark",{defaultProps:{type:"square"},classesResolver:fle},function(e,n){const{type:r,color:i,className:a,classes:s}=e,o=je(e,hle),c=r;return v.jsx(ple,H({className:Ut(s==null?void 0:s.root,a),ownerState:e,"aria-hidden":"true",ref:n},o,{children:v.jsx("div",{className:s==null?void 0:s.mask,children:typeof c=="function"?v.jsx(c,{className:s==null?void 0:s.fill,color:i}):v.jsx("svg",{viewBox:"0 0 24 24",preserveAspectRatio:r==="line"?"none":void 0,children:r==="circle"?v.jsx("circle",{className:s==null?void 0:s.fill,r:"12",cx:"12",cy:"12",fill:i}):v.jsx("rect",{className:s==null?void 0:s.fill,width:"24",height:"24",fill:i})})})}))});function gle(t){const{classes:e,sx:n}=t,r=ule(),i=zy(e);if(!r)return null;if("values"in r){const{label:d,color:f,markType:p}=r;return v.jsx(tb,{sx:n,className:i.paper,children:v.jsxs(nb,{className:i.table,children:[v.jsxs(te,{component:"caption",children:[v.jsx("div",{className:i.markContainer,children:v.jsx(O1,{type:p,color:f,className:i.mark})}),d]}),v.jsx("tbody",{children:r.values.map(({formattedValue:g,label:m})=>v.jsxs(rb,{className:i.row,children:[v.jsx(Rd,{className:Ut(i.labelCell,i.cell),component:"th",children:m}),v.jsx(Rd,{className:Ut(i.valueCell,i.cell),component:"td",children:g})]},m))})]})})}const{color:a,label:s,formattedValue:o,markType:c}=r;return v.jsx(tb,{sx:n,className:i.paper,children:v.jsx(nb,{className:i.table,children:v.jsx("tbody",{children:v.jsxs(rb,{className:i.row,children:[v.jsxs(Rd,{className:Ut(i.labelCell,i.cell),component:"th",children:[v.jsx("div",{className:i.markContainer,children:v.jsx(O1,{type:c,color:a,className:i.mark})}),s]}),v.jsx(Rd,{className:Ut(i.valueCell,i.cell),component:"td",children:o})]})})})})}function mle(t){const e=_n(),n=pt(e,jo);return O.useMemo(()=>{const i={};return Object.keys(n).forEach(a=>{i[a]=n[a].colorProcessor}),i},[n])}function yle(){const t=CA(),[e,n]=O.useState(null);return O.useEffect(()=>{const r=t.current;if(r===null)return()=>{};const i=s=>{s.pointerType!=="mouse"&&n(null)},a=s=>{n({pointerType:s.pointerType})};return r.addEventListener("pointerenter",a),r.addEventListener("pointerup",i),()=>{r.removeEventListener("pointerenter",a),r.removeEventListener("pointerup",i)}},[t]),e}function vle(t){return t instanceof Date?t.toUTCString():t.toLocaleString()}const xle="@media (pointer: fine)",wle=()=>B1(xle,{defaultMatches:!0}),X8=(t,e)=>e,K8=(t,e)=>e;function Q8(t,e,n){return Array.isArray(n)?n.map(r=>W3(e.axis[r],t)):W3(e.axis[n],t)}const Z8=Ye([cp,up,_se],(t,e,n)=>t===null||e===null?null:Ase(n)(t,e)),ble=Ye([Z8,mu,X8],(t,e,n=e.axisIds[0])=>t===null?null:Q8(t,e,n)),J8=Ye([Z8,mu,K8],(t,e,n=e.axisIds)=>t===null?null:Q8(t,e,n));Ye([mu,ble,X8],(t,e,n=t.axisIds[0])=>{var i;if(e===null||e===-1||t.axisIds.length===0)return null;const r=(i=t.axis[n])==null?void 0:i.data;return r?r[e]:null});Ye([mu,J8,K8],(t,e,n=t.axisIds)=>e===null?null:n.map((r,i)=>{var s;const a=e[i];return a===-1?null:(s=t.axis[r].data)==null?void 0:s[a]}));const e6=Ye([J8,mu],(t,e)=>t===null?[]:e.axisIds.map((n,r)=>({axisId:n,dataIndex:t[r]})).filter(({axisId:n,dataIndex:r})=>e.axis[n].triggerTooltip&&r>=0),{memoizeOptions:{resultEqualityCheck:Hd}});Ye([],()=>[]);const _le=Ye([e6],t=>t.length>0);function B2(t,e,n){var s;const r=((s=t.data)==null?void 0:s[e])??null,a=(t.valueFormatter??(o=>t.scaleType==="utc"?vle(o):o.toLocaleString()))(r,{location:"tooltip",scale:t.scale});return{axisDirection:n,axisId:t.id,mainAxis:t,dataIndex:e,axisValue:r,axisFormattedValue:a,seriesItems:[]}}function Ale(t={}){const{multipleAxes:e,directions:n}=t,r=Sse(),i=Cse(),a=Ise(),s=_n(),o=pt(s,e8),c=pt(s,t8),d=pt(s,e6),f=jy(),{xAxis:p}=Uo(),{yAxis:g}=Zl(),{zAxis:m,zAxisIds:x}=SA(),{rotationAxis:b}=b8(),A=mle();if(o.length===0&&c.length===0&&d.length===0)return null;const E=[];return(n===void 0||n.includes("x"))&&o.forEach(({axisId:S,dataIndex:T})=>{!e&&E.length>1||E.push(B2(p[S],T,"x"))}),(n===void 0||n.includes("y"))&&c.forEach(({axisId:S,dataIndex:T})=>{!e&&E.length>1||E.push(B2(g[S],T,"y"))}),(n===void 0||n.includes("rotation"))&&d.forEach(({axisId:S,dataIndex:T})=>{!e&&E.length>1||E.push(B2(b[S],T,"rotation"))}),Object.keys(f).filter(xA).forEach(S=>{const T=f[S];return T?T.seriesOrder.forEach(I=>{var R;const P=T.series[I],F=P.xAxisId??r.id,M=P.yAxisId??i.id,D=E.findIndex(({axisDirection:B,axisId:N})=>B==="x"&&N===F||B==="y"&&N===M);if(D>=0){const B="zAxisId"in P?P.zAxisId:x[0],{dataIndex:N}=E[D],k=((R=A[S])==null?void 0:R.call(A,P,p[F],g[M],B?m[B]:void 0)(N))??"",j=P.data[N]??null,q=P.valueFormatter(j,{dataIndex:N}),X=oa(P.label,"tooltip")??null;E[D].seriesItems.push({seriesId:I,color:k,value:j,formattedValue:q,formattedLabel:X,markType:P.labelMarkType})}}):[]}),Object.keys(f).filter(EA).forEach(S=>{const T=f[S];return T?T.seriesOrder.forEach(I=>{var D;const P=T.series[I],F=P.rotationAxisId??(a==null?void 0:a.id),M=E.findIndex(({axisDirection:R,axisId:B})=>R==="rotation"&&B===F);if(M>=0){const{dataIndex:R}=E[M],B=((D=A[S])==null?void 0:D.call(A,P)(R))??"",N=P.data[R]??null,k=P.valueFormatter(N,{dataIndex:R}),j=oa(P.label,"tooltip")??null;E[M].seriesItems.push({seriesId:I,color:B,value:N,formattedValue:k,formattedLabel:j,markType:P.labelMarkType})}}):[]}),e?E:E.length===0?E[0]:null}function Ele(t){return Ale(H({},t,{multipleAxes:!0}))}function Sle(t){const e=zy(t.classes),n=Ele();return n===null?null:v.jsx(tb,{sx:t.sx,className:e.paper,children:n.map(({axisId:r,mainAxis:i,axisValue:a,axisFormattedValue:s,seriesItems:o})=>v.jsxs(nb,{className:e.table,children:[a!=null&&!i.hideTooltip&&v.jsx(te,{component:"caption",children:s}),v.jsx("tbody",{children:o.map(({seriesId:c,color:d,formattedValue:f,formattedLabel:p,markType:g})=>f==null?null:v.jsxs(rb,{className:e.row,children:[v.jsxs(Rd,{className:Ut(e.labelCell,e.cell),component:"th",children:[v.jsx("div",{className:e.markContainer,children:v.jsx(O1,{type:g,color:d,className:e.mark})}),p||null]}),v.jsx(Rd,{className:Ut(e.valueCell,e.cell),component:"td",children:f})]},c))})]},r))})}function Cle(t){let e,n;const r=()=>{n=null,t(...e)};function i(...a){e=a,n||(n=requestAnimationFrame(r))}return i.clear=()=>{n&&(cancelAnimationFrame(n),n=null)},i}function Tle(){const t=_n(),e=pt(t,w8),n=pt(t,fu);return e!==void 0?"polar":n!==void 0?"cartesian":"none"}const Ile=["trigger","classes","children"],Dle=()=>!1,Rle=Pe(wR,{name:"MuiChartsTooltip",slot:"Root"})(({theme:t})=>({pointerEvents:"none",zIndex:t.zIndex.modal}));function Ole(t){const e=bt({props:t,name:"MuiChartsTooltipContainer"}),{trigger:n="axis",classes:r,children:i}=e,a=je(e,Ile),s=CA(),o=zy(r),c=yle(),d=wle(),f=O.useRef(null),p=ER(()=>({x:0,y:0})),g=Tle(),m=_n(),x=pt(m,n==="axis"?g==="polar"&&_le||g==="cartesian"&&Qie||Dle:Yie);O.useEffect(()=>{const T=s.current;if(T===null)return()=>{};const I=Cle(()=>{var F;return(F=f.current)==null?void 0:F.update()}),P=F=>{p.current={x:F.clientX,y:F.clientY},I()};return T.addEventListener("pointerdown",P),T.addEventListener("pointermove",P),()=>{T.removeEventListener("pointerdown",P),T.removeEventListener("pointermove",P),I.clear()}},[s,p]);const b=O.useMemo(()=>({getBoundingClientRect:()=>({x:p.current.x,y:p.current.y,top:p.current.y,left:p.current.x,right:p.current.x,bottom:p.current.y,width:0,height:0,toJSON:()=>""})}),[p]),A=(c==null?void 0:c.pointerType)==="mouse"||d,E=(c==null?void 0:c.pointerType)==="touch"||!d,S=O.useMemo(()=>[{name:"offset",options:{offset:()=>E?[0,64]:[0,8]}},...A?[]:[{name:"flip",options:{fallbackPlacements:["top-end","top-start","bottom-end","bottom"]}}]],[A,E]);return n==="none"?null:v.jsx(h5,{children:x&&v.jsx(Rle,H({className:o==null?void 0:o.root,open:x,placement:A?"right-start":"top",popperRef:f,anchorEl:b,modifiers:S},a,{children:i}))})}function t6(t){const{classes:e,trigger:n="axis"}=t,r=zy(e);return v.jsx(Ole,H({},t,{classes:e,children:n==="axis"?v.jsx(Sle,{classes:r}):v.jsx(gle,{classes:r})}))}function Mle(t){return Ot("MuiChartsLabel",t)}Mt("MuiChartsLabel",["root"]);const Ple=t=>wt({root:["root"]},Mle,t.classes),kle=["children","className","classes"],Nle=q8("MuiChartsLabel",{classesResolver:Ple},function(e,n){const{children:r,className:i,classes:a}=e,s=je(e,kle);return v.jsx("span",H({className:Ut(a==null?void 0:a.root,i),ref:n},s,{children:r}))}),Lle=t=>({type:"series",color:t.color,label:t.label,seriesId:t.seriesId,itemId:t.itemId});function Ble(t){return Ot("MuiChartsLegend",t)}const Fle=t=>{const{classes:e,direction:n}=t;return wt({root:["root",n],item:["item"],mark:["mark"],label:["label"],series:["series"]},Ble,e)},nR=Mt("MuiChartsLegend",["root","item","series","mark","label","vertical","horizontal"]),jle=["slots","slotProps"],Vle=["ownerState"],Ule=(t,e,n,r)=>{function i(a,s){var P;const o=bt({props:a,name:t}),c=typeof n.defaultProps=="function"?n.defaultProps(o):n.defaultProps??{},d=SR(c,o),f=d,{slots:p,slotProps:g}=f,m=je(f,jle),x=di(),b=(P=n.classesResolver)==null?void 0:P.call(n,d,x),A=(p==null?void 0:p[e])??r,E=n.propagateSlots&&!(p!=null&&p[e]),S=Ct({elementType:A,externalSlotProps:g==null?void 0:g[e],additionalProps:H({},m,{classes:b},E&&{slots:p,slotProps:g}),ownerState:{}}),T=je(S,Vle),I=H({},T);for(const F of n.omitProps??[])delete I[F];return v.jsx(A,H({},I,{ref:s}))}return O.forwardRef(i)},Hle=["direction","onItemClick","className","classes"],zle=Pe("ul",{name:"MuiChartsLegend",slot:"Root"})(({ownerState:t,theme:e})=>H({},e.typography.caption,{color:(e.vars||e).palette.text.primary,lineHeight:"100%",display:"flex",flexDirection:t.direction==="vertical"?"column":"row",alignItems:t.direction==="vertical"?void 0:"center",flexShrink:0,gap:e.spacing(2),listStyleType:"none",paddingInlineStart:0,marginBlock:e.spacing(1),marginInline:e.spacing(1),flexWrap:"wrap",li:{display:t.direction==="horizontal"?"inline-flex":void 0},[`button.${nR.series}`]:{background:"none",border:"none",padding:0,fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",letterSpacing:"inherit",color:"inherit"},[`& .${nR.series}`]:{display:t.direction==="vertical"?"flex":"inline-flex",alignItems:"center",gap:e.spacing(1)}})),n6=Ule("MuiChartsLegend","legend",{defaultProps:{direction:"horizontal"},omitProps:["position"],classesResolver:Fle},O.forwardRef(function(e,n){const r=Gse(),{onItemClick:i,className:a,classes:s}=e,o=je(e,Hle);if(r.items.length===0)return null;const c=i?"button":"div";return v.jsx(zle,H({className:Ut(s==null?void 0:s.root,a),ref:n},o,{ownerState:e,children:r.items.map((d,f)=>v.jsx("li",{className:s==null?void 0:s.item,"data-series":d.id,children:v.jsxs(c,{className:s==null?void 0:s.series,role:i?"button":void 0,type:i?"button":void 0,onClick:i?p=>i(p,Lle(d),f):void 0,children:[v.jsx(O1,{className:s==null?void 0:s.mark,color:d.color,type:d.markType}),v.jsx(Nle,{className:s==null?void 0:s.label,children:d.label})]})},d.id))}))}));function $le(t){return Ot("MuiChartsAxisHighlight",t)}Mt("MuiChartsAxisHighlight",["root"]);const M1=Pe("path",{name:"MuiChartsAxisHighlight",slot:"Root"})(({theme:t})=>({pointerEvents:"none",variants:[{props:{axisHighlight:"band"},style:H({fill:"white",fillOpacity:.1},t.applyStyles("light",{fill:"gray"}))},{props:{axisHighlight:"line"},style:H({strokeDasharray:"5 2",stroke:"#ffffff"},t.applyStyles("light",{stroke:"#000000"}))}]}));function Gle(t){const{type:e,classes:n}=t,{left:r,width:i}=ka(),a=_n(),s=pt(a,nae),o=pt(a,ca);return s.length===0?null:s.map(({axisId:c,value:d})=>{const p=o.axis[c].scale,g=C1(p),m=e==="band"&&d!==null&&rs(p);return v.jsxs(O.Fragment,{children:[m&&p(d)!==void 0&&v.jsx(M1,{d:`M ${r} ${p(d)-(p.step()-p.bandwidth())/2} l 0 ${p.step()} l ${i} 0 l 0 ${-p.step()} Z`,className:n.root,ownerState:{axisHighlight:"band"}}),e==="line"&&d!==null&&v.jsx(M1,{d:`M ${r} ${g(d)} L ${r+i} ${g(d)}`,className:n.root,ownerState:{axisHighlight:"line"}})]},`${c}-${d}`)})}function Wle(t){const{type:e,classes:n}=t,{top:r,height:i}=ka(),a=_n(),s=pt(a,tae),o=pt(a,la);return s.length===0?null:s.map(({axisId:c,value:d})=>{const p=o.axis[c].scale,g=C1(p),m=e==="band"&&d!==null&&rs(p);return v.jsxs(O.Fragment,{children:[m&&p(d)!==void 0&&v.jsx(M1,{d:`M ${p(d)-(p.step()-p.bandwidth())/2} ${r} l ${p.step()} 0 l 0 ${i} l ${-p.step()} 0 Z`,className:n.root,ownerState:{axisHighlight:"band"}}),e==="line"&&d!==null&&v.jsx(M1,{d:`M ${g(d)} ${r} L ${g(d)} ${r+i}`,className:n.root,ownerState:{axisHighlight:"line"}})]},`${c}-${d}`)})}const Yle=()=>wt({root:["root"]},$le);function qle(t){const{x:e,y:n}=t,r=Yle();return v.jsxs(O.Fragment,{children:[e&&v.jsx(Wle,{type:e,classes:r}),n&&v.jsx(Gle,{type:n,classes:r})]})}function Xle(t){return Ot("MuiBarElement",t)}const Kle=Mt("MuiBarElement",["root","highlighted","faded","series"]),Qle=t=>{const{classes:e,id:n,isHighlighted:r,isFaded:i}=t,a={root:["root",`series-${n}`,r&&"highlighted",i&&"faded"]};return wt(a,Xle,e)};function Zle(t){"hasPointerCapture"in t.currentTarget&&t.currentTarget.hasPointerCapture(t.pointerId)&&t.currentTarget.releasePointerCapture(t.pointerId)}const r6=(t,e)=>{const{instance:n}=Ql(),r=O.useRef(!1),i=O.useCallback(()=>{r.current=!0,n.setItemInteraction({type:t.type,seriesId:t.seriesId,dataIndex:t.dataIndex}),n.setHighlight({seriesId:t.seriesId,dataIndex:t.dataIndex})},[n,t.type,t.seriesId,t.dataIndex]),a=O.useCallback(()=>{r.current=!1,n.removeItemInteraction({type:t.type,seriesId:t.seriesId,dataIndex:t.dataIndex}),n.clearHighlight()},[n,t.type,t.seriesId,t.dataIndex]);return O.useEffect(()=>()=>{r.current&&a()},[a]),{onPointerEnter:i,onPointerLeave:a,onPointerDown:Zle}},Jle=["ownerState","skipAnimation","id","dataIndex","xOrigin","yOrigin"];function ece(t){const{ownerState:e}=t,n=je(t,Jle),r=soe(t);return v.jsx("rect",H({},n,{filter:e.isHighlighted?"brightness(120%)":void 0,opacity:e.isFaded?.3:1,"data-highlighted":e.isHighlighted||void 0,"data-faded":e.isFaded||void 0},r))}const tce=["id","dataIndex","classes","color","slots","slotProps","style","onClick","skipAnimation","layout","x","xOrigin","y","yOrigin","width","height"];function nce(t){const{id:e,dataIndex:n,classes:r,color:i,slots:a,slotProps:s,style:o,onClick:c,skipAnimation:d,layout:f,x:p,xOrigin:g,y:m,yOrigin:x,width:b,height:A}=t,E=je(t,tce),S=r6({type:"bar",seriesId:e,dataIndex:n}),{isFaded:T,isHighlighted:I}=C8({seriesId:e,dataIndex:n}),P={id:e,dataIndex:n,classes:r,color:i,isFaded:T,isHighlighted:I},F=Qle(P),M=(a==null?void 0:a.bar)??ece,D=Ct({elementType:M,externalSlotProps:s==null?void 0:s.bar,externalForwardedProps:E,additionalProps:H({},S,{id:e,dataIndex:n,color:i,x:p,xOrigin:g,y:m,yOrigin:x,width:b,height:A,style:o,onClick:c,cursor:c?"pointer":"unset",stroke:"none",fill:i,skipAnimation:d,layout:f}),className:F.root,ownerState:P});return v.jsx(M,H({},D))}function rce(t,e){const n=Jt(t.x,e.x),r=Jt(t.y,e.y),i=Jt(t.width,e.width),a=Jt(t.height,e.height),s=Jt(t.borderRadius,e.borderRadius);return o=>({x:n(o),y:r(o),width:i(o),height:a(o),borderRadius:s(o)})}function ice(t){const e={x:t.layout==="vertical"?t.x:t.xOrigin,y:t.layout==="vertical"?t.yOrigin:t.y,width:t.layout==="vertical"?t.width:0,height:t.layout==="vertical"?0:t.height,borderRadius:t.borderRadius};return hp({x:t.x,y:t.y,width:t.width,height:t.height,borderRadius:t.borderRadius},{createInterpolator:rce,transformProps:n=>({d:sce(t.hasNegative,t.hasPositive,t.layout,n.x,n.y,n.width,n.height,t.xOrigin,t.yOrigin,n.borderRadius)}),applyProps(n,{d:r}){r&&n.setAttribute("d",r)},initialProps:e,skip:t.skipAnimation,ref:t.ref})}function ace(t){const{maskId:e,x:n,y:r,width:i,height:a,skipAnimation:s}=t,{ref:o,d:c}=ice({layout:t.layout??"vertical",hasNegative:t.hasNegative,hasPositive:t.hasPositive,xOrigin:t.xOrigin,yOrigin:t.yOrigin,x:n,y:r,width:i,height:a,borderRadius:t.borderRadius??0,skipAnimation:s});return!t.borderRadius||t.borderRadius<=0?null:v.jsx("clipPath",{id:e,children:v.jsx("path",{ref:o,d:c})})}function sce(t,e,n,r,i,a,s,o,c,d){if(n==="vertical"){if(e&&t){const p=Math.min(d,a/2,s/2);return`M${r},${i+s/2} v${-(s/2-p)} a${p},${p} 0 0 1 ${p},${-p} h${a-p*2} a${p},${p} 0 0 1 ${p},${p} v${s-2*p} a${p},${p} 0 0 1 ${-p},${p} h${-(a-p*2)} a${p},${p} 0 0 1 ${-p},${-p} v${-(s/2-p)}`}const f=Math.min(d,a/2);if(e)return`M${r},${Math.max(c,i+f)} v${Math.min(0,-(c-i-f))} a${f},${f} 0 0 1 ${f},${-f} h${a-f*2} a${f},${f} 0 0 1 ${f},${f} v${Math.max(0,c-i-f)} Z`;if(t)return`M${r},${Math.min(c,i+s-f)} v${Math.max(0,s-f)} a${f},${f} 0 0 0 ${f},${f} h${a-f*2} a${f},${f} 0 0 0 ${f},${-f} v${-Math.max(0,s-f)} Z`}if(n==="horizontal"){if(e&&t){const p=Math.min(d,a/2,s/2);return`M${r+a/2},${i} h${a/2-p} a${p},${p} 0 0 1 ${p},${p} v${s-p*2} a${p},${p} 0 0 1 ${-p},${p} h${-(a-2*p)} a${p},${p} 0 0 1 ${-p},${-p} v${-(s-p*2)} a${p},${p} 0 0 1 ${p},${-p} h${a/2-p}`}const f=Math.min(d,s/2);if(e)return`M${Math.min(o,r-f)},${i} h${a} a${f},${f} 0 0 1 ${f},${f} v${s-f*2} a${f},${f} 0 0 1 ${-f},${f} h${-a} Z`;if(t)return`M${Math.max(o,r+a+f)},${i} h${-a} a${f},${f} 0 0 0 ${-f},${f} v${s-f*2} a${f},${f} 0 0 0 ${f},${f} h${a} Z`}}function oce(t){return Ot("MuiBarLabel",t)}const F2=Mt("MuiBarLabel",["root","highlighted","faded","animate"]),lce=t=>{const{classes:e,seriesId:n,isFaded:r,isHighlighted:i,skipAnimation:a}=t,s={root:["root",`series-${n}`,i&&"highlighted",r&&"faded",!a&&"animate"]};return wt(s,oce,e)},cce=t=>{const{barLabel:e,value:n,dataIndex:r,seriesId:i,height:a,width:s}=t;return e==="value"?n?n==null?void 0:n.toString():null:e({seriesId:i,dataIndex:r,value:n},{bar:{height:a,width:s}})},uce=["seriesId","dataIndex","color","isFaded","isHighlighted","classes","skipAnimation","layout","xOrigin","yOrigin"],dce=Pe("text",{name:"MuiBarLabel",slot:"Root",overridesResolver:(t,e)=>[{[`&.${F2.faded}`]:e.faded},{[`&.${F2.highlighted}`]:e.highlighted},e.root]})(({theme:t})=>{var e,n,r,i;return H({},(e=t==null?void 0:t.typography)==null?void 0:e.body2,{stroke:"none",fill:(i=(r=(n=t.vars||t)==null?void 0:n.palette)==null?void 0:r.text)==null?void 0:i.primary,transition:"opacity 0.2s ease-in, fill 0.2s ease-in",textAnchor:"middle",dominantBaseline:"central",pointerEvents:"none",opacity:1,[`&.${F2.faded}`]:{opacity:.3}})});function fce(t){const e=bt({props:t,name:"MuiBarLabel"}),n=je(e,uce),r=loe(e);return v.jsx(dce,H({},n,r))}const hce=["seriesId","classes","color","dataIndex","barLabel","slots","slotProps","xOrigin","yOrigin","x","y","width","height","value","skipAnimation","layout"],pce=["ownerState"];function gce(t){const{seriesId:e,classes:n,color:r,dataIndex:i,barLabel:a,slots:s,slotProps:o,xOrigin:c,yOrigin:d,x:f,y:p,width:g,height:m,value:x,skipAnimation:b,layout:A}=t,E=je(t,hce),{isFaded:S,isHighlighted:T}=C8({seriesId:e,dataIndex:i}),I={seriesId:e,classes:n,color:r,isFaded:S,isHighlighted:T,dataIndex:i,skipAnimation:b,layout:A},P=lce(I),F=(s==null?void 0:s.barLabel)??fce,M=Ct({elementType:F,externalSlotProps:o==null?void 0:o.barLabel,additionalProps:H({},E,{xOrigin:c,yOrigin:d,x:f,y:p,width:g,height:m,className:P.root}),ownerState:I}),{ownerState:D}=M,R=je(M,pce);if(!a)return null;const B=cce({barLabel:a,value:x,dataIndex:i,seriesId:e,height:m,width:g});return B?v.jsx(F,H({},R,D,{children:B})):null}function mce(t){return Ot("MuiBar",t)}Mt("MuiBar",["root","series","seriesLabels"]);const i6=t=>wt({root:["root"],series:["series"],seriesLabels:["seriesLabels"]},mce,t),yce=["bars","skipAnimation"];function vce(t){const{bars:e,skipAnimation:n}=t,r=je(t,yce),i=i6();return v.jsx(O.Fragment,{children:e.flatMap(({seriesId:a,data:s})=>v.jsx("g",{className:i.seriesLabels,"data-series":a,children:s.map(({xOrigin:o,yOrigin:c,x:d,y:f,dataIndex:p,color:g,value:m,width:x,height:b,layout:A})=>v.jsx(gce,H({seriesId:a,dataIndex:p,value:m,color:g,xOrigin:o,yOrigin:c,x:d,y:f,width:x,height:b,skipAnimation:n??!1,layout:A??"vertical"},r),p))},a))})}function a6(t){const e=_n(),n=pt(e,cte);return t||n}function xce(){const t=_n();return pt(t,Yk)}const j2=(t,e)=>{const n=`${t}-axis`,r=`${t}Axis`;return e===(t==="x"?$_:G_)?`The first \`${r}\``:`The ${n} with id "${e}"`};function wce(t,e,n,r,i,a,s){const o=i[r],c=s[a],d=t?o:c,f=t?c:o,p=t?r:a,g=t?a:r,m=t?"x":"y",x=t?"y":"x";if(!b1(d))throw new Error(`MUI X Charts: ${j2(m,p)} should be of type "band" to display the bar series of id "${e}".`);if(d.data===void 0)throw new Error(`MUI X Charts: ${j2(m,p)} should have data property.`);if(b1(f)||vA(f))throw new Error(`MUI X Charts: ${j2(x,g)} should be a continuous type to display the bar series of id "${e}".`)}function bce(t,e,n){const r=Pse()??{series:{},stackingGroups:[]},i=Uo().xAxisIds[0],a=Zl().yAxisIds[0],s=AA(),{series:o,stackingGroups:c}=r,d={};return{completedData:c.flatMap(({ids:p},g)=>{const m=t.left,x=t.left+t.width,b=t.top,A=t.top+t.height;return p.map(E=>{const S=o[E].xAxisId??i,T=o[E].yAxisId??a,I=e[S],P=n[T],F=o[E].layout==="vertical";wce(F,E,o[E],S,e,T,n);const M=F?I:P,D=I.scale,R=P.scale,B=y8(o[E],e[S],n[T]),N=M.scale.bandwidth(),{barWidth:k,offset:j}=_ce({bandWidth:N,numberOfGroups:c.length,gapRatio:M.barGapRatio}),q=g*(k+j),{stackedData:X,data:G,layout:W,minBarSize:K}=o[E],Z=M.data.map((fe,me)=>{if(G[me]==null)return null;const be=X[me].map(ue=>F?R(ue):D(ue)),Me=Math.round(Math.min(...be)),ge=Math.round(Math.max(...be)),Le=o[E].stack,{barSize:Ne,startCoordinate:Se}=Ace(F,Me,ge,G[me],K),J={seriesId:E,dataIndex:me,layout:W,x:F?D(fe)+q:Se,y:F?Se:R(fe)+q,xOrigin:D(0)??0,yOrigin:R(0)??0,height:F?Ne:k,width:F?k:Ne,color:B(me),value:G[me],maskId:`${s}_${Le||E}_${g}_${me}`};if(J.x>x||J.x+J.width<m||J.y>A||J.y+J.height<b)return null;d[J.maskId]||(d[J.maskId]={id:J.maskId,width:0,height:0,hasNegative:!1,hasPositive:!1,layout:J.layout,xOrigin:D(0),yOrigin:R(0),x:0,y:0});const he=d[J.maskId];return he.width=J.layout==="vertical"?J.width:he.width+J.width,he.height=J.layout==="vertical"?he.height+J.height:J.height,he.x=Math.min(he.x===0?1/0:he.x,J.x),he.y=Math.min(he.y===0?1/0:he.y,J.y),he.hasNegative=he.hasNegative||(J.value??0)<0,he.hasPositive=he.hasPositive||(J.value??0)>0,J}).filter(fe=>fe!==null);return{seriesId:E,data:Z}})}),masksData:Object.values(d)}}function _ce({bandWidth:t,numberOfGroups:e,gapRatio:n}){if(n===0)return{barWidth:t/e,offset:0};const r=t/(e+(e-1)*n),i=n*r;return{barWidth:r,offset:i}}function Ace(t,e,n,r,i){if(r===0||r==null)return{barSize:0,startCoordinate:e};const a=n-e<i,s=a?i:n-e,o=t&&r>=0,c=!t&&r<0;return a&&(o||c)?{barSize:s,startCoordinate:n-s}:{barSize:s,startCoordinate:e}}const Ece=["skipAnimation","onItemClick","borderRadius","barLabel"],Sce=Pe("g",{name:"MuiBarPlot",slot:"Root"})({[`& .${Kle.root}`]:{transition:"opacity 0.2s ease-in, fill 0.2s ease-in"}});function Cce(t){const{skipAnimation:e,onItemClick:n,borderRadius:r,barLabel:i}=t,a=je(t,Ece),s=xce(),o=a6(s||e),{xAxis:c}=Uo(),{yAxis:d}=Zl(),{completedData:f,masksData:p}=bce(ka(),c,d),g=!r||r<=0,m=i6();return v.jsxs(Sce,{className:m.root,children:[!g&&p.map(({id:x,x:b,y:A,xOrigin:E,yOrigin:S,width:T,height:I,hasPositive:P,hasNegative:F,layout:M})=>v.jsx(ace,{maskId:x,borderRadius:r,hasNegative:F,hasPositive:P,layout:M,x:b,y:A,xOrigin:E,yOrigin:S,width:T,height:I,skipAnimation:o??!1},x)),f.map(({seriesId:x,data:b})=>v.jsx("g",{"data-series":x,className:m.series,children:b.map(({dataIndex:A,color:E,maskId:S,layout:T,x:I,xOrigin:P,y:F,yOrigin:M,width:D,height:R})=>{const B=v.jsx(nce,H({id:x,dataIndex:A,color:E,skipAnimation:o??!1,layout:T??"vertical",x:I,xOrigin:P,y:F,yOrigin:M,width:D,height:R},a,{onClick:n&&(N=>{n(N,{type:"bar",seriesId:x,dataIndex:A})})}),A);return g?B:v.jsx("g",{clipPath:`url(#${S})`,children:B},A)})},x)),i&&v.jsx(vce,H({bars:f,skipAnimation:o,barLabel:i},a))]})}const Tce=["message"],Ice=Pe("text")(({theme:t})=>H({},t.typography.body2,{stroke:"none",fill:(t.vars||t).palette.text.primary,shapeRendering:"crispEdges",textAnchor:"middle",dominantBaseline:"middle"}));function Dce(t){const{message:e}=t,n=je(t,Tce),{top:r,left:i,height:a,width:s}=ka(),{localeText:o}=M8();return v.jsx(Ice,H({x:i+s/2,y:r+a/2},n,{children:e??o.loading}))}const Rce=["message"],Oce=Pe("text")(({theme:t})=>H({},t.typography.body2,{stroke:"none",fill:(t.vars||t).palette.text.primary,shapeRendering:"crispEdges",textAnchor:"middle",dominantBaseline:"middle"}));function Mce(t){const{message:e}=t,n=je(t,Rce),{top:r,left:i,height:a,width:s}=ka(),{localeText:o}=M8();return v.jsx(Oce,H({x:i+s/2,y:r+a/2},n,{children:e??o.noData}))}function Pce(){const t=jy();return Object.values(t).every(e=>{if(!e)return!0;const{series:n,seriesOrder:r}=e;return r.every(i=>n[i].data.length===0)})}function s6(t){var n,r,i,a;const e=Pce();if(t.loading){const s=((n=t.slots)==null?void 0:n.loadingOverlay)??Dce;return v.jsx(s,H({},(r=t.slotProps)==null?void 0:r.loadingOverlay))}if(e){const s=((i=t.slots)==null?void 0:i.noDataOverlay)??Mce;return v.jsx(s,H({},(a=t.slotProps)==null?void 0:a.noDataOverlay))}return null}const kce=[dp,Cf,Sf,gu],Nce=["xAxis","yAxis","series","width","height","margin","colors","dataset","sx","axisHighlight","grid","children","slots","slotProps","skipAnimation","loading","layout","onItemClick","highlightedItem","onHighlightChange","borderRadius","barLabel","className","hideLegend","showToolbar"],Lce=t=>{var J,he,ue,ie,Be;const{xAxis:e,yAxis:n,series:r,width:i,height:a,margin:s,colors:o,dataset:c,sx:d,axisHighlight:f,grid:p,children:g,slots:m,slotProps:x,skipAnimation:b,loading:A,layout:E,onItemClick:S,highlightedItem:T,onHighlightChange:I,borderRadius:P,barLabel:F,className:M}=t,D=je(t,Nce),B=`${F0()}-clip-path`,N=E==="horizontal"||E===void 0&&r.some(we=>we.layout==="horizontal"),k=O.useMemo(()=>[{id:$_,scaleType:"band",data:Array.from({length:Math.max(...r.map(we=>(we.data??c??[]).length))},(we,$e)=>$e)}],[c,r]),j=O.useMemo(()=>[{id:G_,scaleType:"band",data:Array.from({length:Math.max(...r.map(we=>(we.data??c??[]).length))},(we,$e)=>$e)}],[c,r]),q=O.useMemo(()=>r.map(we=>H({type:"bar"},we,{layout:N?"horizontal":"vertical"})),[N,r]),X=N?void 0:k,G=O.useMemo(()=>e?N?e:e.map(we=>H({scaleType:"band"},we)):X,[X,N,e]),W=N?j:void 0,K=O.useMemo(()=>n?N?n.map(we=>H({scaleType:"band"},we)):n:W,[W,N,n]),Z=H({},D,{series:q,width:i,height:a,margin:s,colors:o,dataset:c,xAxis:G,yAxis:K,highlightedItem:T,onHighlightChange:I,disableAxisListener:((J=x==null?void 0:x.tooltip)==null?void 0:J.trigger)!=="axis"&&(f==null?void 0:f.x)==="none"&&(f==null?void 0:f.y)==="none",className:M,skipAnimation:b,plugins:kce}),fe={onItemClick:S,slots:m,slotProps:x,borderRadius:P,barLabel:F},me={vertical:p==null?void 0:p.vertical,horizontal:p==null?void 0:p.horizontal},ve={clipPath:`url(#${B})`},be={id:B},Me={slots:m,slotProps:x,loading:A},ge={slots:m,slotProps:x},Le=H({},N?{y:"band"}:{x:"band"},f),Ne={slots:m,slotProps:x};return{chartsWrapperProps:{sx:d,legendPosition:(ue=(he=t.slotProps)==null?void 0:he.legend)==null?void 0:ue.position,legendDirection:(Be=(ie=t.slotProps)==null?void 0:ie.legend)==null?void 0:Be.direction},chartContainerProps:Z,barPlotProps:fe,gridProps:me,clipPathProps:be,clipPathGroupProps:ve,overlayProps:Me,chartsAxisProps:ge,axisHighlightProps:Le,legendProps:Ne,children:g}},Bce={baseButton:ze,baseIconButton:Gr},Fce={},jce=H({},Bce,Fce),Vce=O.createContext(null);function Uce(t){const{slots:e,slotProps:n={},defaultSlots:r,children:i}=t,a=O.useMemo(()=>({slots:H({},r,e),slotProps:n}),[r,e,n]);return v.jsx(Vce.Provider,{value:a,children:i})}const So=11102230246251565e-32,gi=134217729,Hce=(3+8*So)*So;function V2(t,e,n,r,i){let a,s,o,c,d=e[0],f=r[0],p=0,g=0;f>d==f>-d?(a=d,d=e[++p]):(a=f,f=r[++g]);let m=0;if(p<t&&g<n)for(f>d==f>-d?(s=d+a,o=a-(s-d),d=e[++p]):(s=f+a,o=a-(s-f),f=r[++g]),a=s,o!==0&&(i[m++]=o);p<t&&g<n;)f>d==f>-d?(s=a+d,c=s-a,o=a-(s-c)+(d-c),d=e[++p]):(s=a+f,c=s-a,o=a-(s-c)+(f-c),f=r[++g]),a=s,o!==0&&(i[m++]=o);for(;p<t;)s=a+d,c=s-a,o=a-(s-c)+(d-c),d=e[++p],a=s,o!==0&&(i[m++]=o);for(;g<n;)s=a+f,c=s-a,o=a-(s-c)+(f-c),f=r[++g],a=s,o!==0&&(i[m++]=o);return(a!==0||m===0)&&(i[m++]=a),m}function zce(t,e){let n=e[0];for(let r=1;r<t;r++)n+=e[r];return n}function gp(t){return new Float64Array(t)}const $ce=(3+16*So)*So,Gce=(2+12*So)*So,Wce=(9+64*So)*So*So,hd=gp(4),rR=gp(8),iR=gp(12),aR=gp(16),Oi=gp(4);function Yce(t,e,n,r,i,a,s){let o,c,d,f,p,g,m,x,b,A,E,S,T,I,P,F,M,D;const R=t-i,B=n-i,N=e-a,k=r-a;I=R*k,g=gi*R,m=g-(g-R),x=R-m,g=gi*k,b=g-(g-k),A=k-b,P=x*A-(I-m*b-x*b-m*A),F=N*B,g=gi*N,m=g-(g-N),x=N-m,g=gi*B,b=g-(g-B),A=B-b,M=x*A-(F-m*b-x*b-m*A),E=P-M,p=P-E,hd[0]=P-(E+p)+(p-M),S=I+E,p=S-I,T=I-(S-p)+(E-p),E=T-F,p=T-E,hd[1]=T-(E+p)+(p-F),D=S+E,p=D-S,hd[2]=S-(D-p)+(E-p),hd[3]=D;let j=zce(4,hd),q=Gce*s;if(j>=q||-j>=q||(p=t-R,o=t-(R+p)+(p-i),p=n-B,d=n-(B+p)+(p-i),p=e-N,c=e-(N+p)+(p-a),p=r-k,f=r-(k+p)+(p-a),o===0&&c===0&&d===0&&f===0)||(q=Wce*s+Hce*Math.abs(j),j+=R*f+k*o-(N*d+B*c),j>=q||-j>=q))return j;I=o*k,g=gi*o,m=g-(g-o),x=o-m,g=gi*k,b=g-(g-k),A=k-b,P=x*A-(I-m*b-x*b-m*A),F=c*B,g=gi*c,m=g-(g-c),x=c-m,g=gi*B,b=g-(g-B),A=B-b,M=x*A-(F-m*b-x*b-m*A),E=P-M,p=P-E,Oi[0]=P-(E+p)+(p-M),S=I+E,p=S-I,T=I-(S-p)+(E-p),E=T-F,p=T-E,Oi[1]=T-(E+p)+(p-F),D=S+E,p=D-S,Oi[2]=S-(D-p)+(E-p),Oi[3]=D;const X=V2(4,hd,4,Oi,rR);I=R*f,g=gi*R,m=g-(g-R),x=R-m,g=gi*f,b=g-(g-f),A=f-b,P=x*A-(I-m*b-x*b-m*A),F=N*d,g=gi*N,m=g-(g-N),x=N-m,g=gi*d,b=g-(g-d),A=d-b,M=x*A-(F-m*b-x*b-m*A),E=P-M,p=P-E,Oi[0]=P-(E+p)+(p-M),S=I+E,p=S-I,T=I-(S-p)+(E-p),E=T-F,p=T-E,Oi[1]=T-(E+p)+(p-F),D=S+E,p=D-S,Oi[2]=S-(D-p)+(E-p),Oi[3]=D;const G=V2(X,rR,4,Oi,iR);I=o*f,g=gi*o,m=g-(g-o),x=o-m,g=gi*f,b=g-(g-f),A=f-b,P=x*A-(I-m*b-x*b-m*A),F=c*d,g=gi*c,m=g-(g-c),x=c-m,g=gi*d,b=g-(g-d),A=d-b,M=x*A-(F-m*b-x*b-m*A),E=P-M,p=P-E,Oi[0]=P-(E+p)+(p-M),S=I+E,p=S-I,T=I-(S-p)+(E-p),E=T-F,p=T-E,Oi[1]=T-(E+p)+(p-F),D=S+E,p=D-S,Oi[2]=S-(D-p)+(E-p),Oi[3]=D;const W=V2(G,iR,4,Oi,aR);return aR[W-1]}function lm(t,e,n,r,i,a){const s=(e-a)*(n-i),o=(t-i)*(r-a),c=s-o,d=Math.abs(s+o);return Math.abs(c)>=$ce*d?c:-Yce(t,e,n,r,i,a,d)}const sR=Math.pow(2,-52),cm=new Uint32Array(512);class P1{static from(e,n=Zce,r=Jce){const i=e.length,a=new Float64Array(i*2);for(let s=0;s<i;s++){const o=e[s];a[2*s]=n(o),a[2*s+1]=r(o)}return new P1(a)}constructor(e){const n=e.length>>1;if(n>0&&typeof e[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=e;const r=Math.max(2*n-5,0);this._triangles=new Uint32Array(r*3),this._halfedges=new Int32Array(r*3),this._hashSize=Math.ceil(Math.sqrt(n)),this._hullPrev=new Uint32Array(n),this._hullNext=new Uint32Array(n),this._hullTri=new Uint32Array(n),this._hullHash=new Int32Array(this._hashSize),this._ids=new Uint32Array(n),this._dists=new Float64Array(n),this.update()}update(){const{coords:e,_hullPrev:n,_hullNext:r,_hullTri:i,_hullHash:a}=this,s=e.length>>1;let o=1/0,c=1/0,d=-1/0,f=-1/0;for(let R=0;R<s;R++){const B=e[2*R],N=e[2*R+1];B<o&&(o=B),N<c&&(c=N),B>d&&(d=B),N>f&&(f=N),this._ids[R]=R}const p=(o+d)/2,g=(c+f)/2;let m,x,b;for(let R=0,B=1/0;R<s;R++){const N=U2(p,g,e[2*R],e[2*R+1]);N<B&&(m=R,B=N)}const A=e[2*m],E=e[2*m+1];for(let R=0,B=1/0;R<s;R++){if(R===m)continue;const N=U2(A,E,e[2*R],e[2*R+1]);N<B&&N>0&&(x=R,B=N)}let S=e[2*x],T=e[2*x+1],I=1/0;for(let R=0;R<s;R++){if(R===m||R===x)continue;const B=Kce(A,E,S,T,e[2*R],e[2*R+1]);B<I&&(b=R,I=B)}let P=e[2*b],F=e[2*b+1];if(I===1/0){for(let N=0;N<s;N++)this._dists[N]=e[2*N]-e[0]||e[2*N+1]-e[1];Od(this._ids,this._dists,0,s-1);const R=new Uint32Array(s);let B=0;for(let N=0,k=-1/0;N<s;N++){const j=this._ids[N],q=this._dists[j];q>k&&(R[B++]=j,k=q)}this.hull=R.subarray(0,B),this.triangles=new Uint32Array(0),this.halfedges=new Uint32Array(0);return}if(lm(A,E,S,T,P,F)<0){const R=x,B=S,N=T;x=b,S=P,T=F,b=R,P=B,F=N}const M=Qce(A,E,S,T,P,F);this._cx=M.x,this._cy=M.y;for(let R=0;R<s;R++)this._dists[R]=U2(e[2*R],e[2*R+1],M.x,M.y);Od(this._ids,this._dists,0,s-1),this._hullStart=m;let D=3;r[m]=n[b]=x,r[x]=n[m]=b,r[b]=n[x]=m,i[m]=0,i[x]=1,i[b]=2,a.fill(-1),a[this._hashKey(A,E)]=m,a[this._hashKey(S,T)]=x,a[this._hashKey(P,F)]=b,this.trianglesLen=0,this._addTriangle(m,x,b,-1,-1,-1);for(let R=0,B,N;R<this._ids.length;R++){const k=this._ids[R],j=e[2*k],q=e[2*k+1];if(R>0&&Math.abs(j-B)<=sR&&Math.abs(q-N)<=sR||(B=j,N=q,k===m||k===x||k===b))continue;let X=0;for(let fe=0,me=this._hashKey(j,q);fe<this._hashSize&&(X=a[(me+fe)%this._hashSize],!(X!==-1&&X!==r[X]));fe++);X=n[X];let G=X,W;for(;W=r[G],lm(j,q,e[2*G],e[2*G+1],e[2*W],e[2*W+1])>=0;)if(G=W,G===X){G=-1;break}if(G===-1)continue;let K=this._addTriangle(G,k,r[G],-1,-1,i[G]);i[k]=this._legalize(K+2),i[G]=K,D++;let Z=r[G];for(;W=r[Z],lm(j,q,e[2*Z],e[2*Z+1],e[2*W],e[2*W+1])<0;)K=this._addTriangle(Z,k,W,i[k],-1,i[Z]),i[k]=this._legalize(K+2),r[Z]=Z,D--,Z=W;if(G===X)for(;W=n[G],lm(j,q,e[2*W],e[2*W+1],e[2*G],e[2*G+1])<0;)K=this._addTriangle(W,k,G,-1,i[G],i[W]),this._legalize(K+2),i[W]=K,r[G]=G,D--,G=W;this._hullStart=n[k]=G,r[G]=n[Z]=k,r[k]=Z,a[this._hashKey(j,q)]=k,a[this._hashKey(e[2*G],e[2*G+1])]=G}this.hull=new Uint32Array(D);for(let R=0,B=this._hullStart;R<D;R++)this.hull[R]=B,B=r[B];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(e,n){return Math.floor(qce(e-this._cx,n-this._cy)*this._hashSize)%this._hashSize}_legalize(e){const{_triangles:n,_halfedges:r,coords:i}=this;let a=0,s=0;for(;;){const o=r[e],c=e-e%3;if(s=c+(e+2)%3,o===-1){if(a===0)break;e=cm[--a];continue}const d=o-o%3,f=c+(e+1)%3,p=d+(o+2)%3,g=n[s],m=n[e],x=n[f],b=n[p];if(Xce(i[2*g],i[2*g+1],i[2*m],i[2*m+1],i[2*x],i[2*x+1],i[2*b],i[2*b+1])){n[e]=b,n[o]=g;const E=r[p];if(E===-1){let T=this._hullStart;do{if(this._hullTri[T]===p){this._hullTri[T]=e;break}T=this._hullPrev[T]}while(T!==this._hullStart)}this._link(e,E),this._link(o,r[s]),this._link(s,p);const S=d+(o+1)%3;a<cm.length&&(cm[a++]=S)}else{if(a===0)break;e=cm[--a]}}return s}_link(e,n){this._halfedges[e]=n,n!==-1&&(this._halfedges[n]=e)}_addTriangle(e,n,r,i,a,s){const o=this.trianglesLen;return this._triangles[o]=e,this._triangles[o+1]=n,this._triangles[o+2]=r,this._link(o,i),this._link(o+1,a),this._link(o+2,s),this.trianglesLen+=3,o}}function qce(t,e){const n=t/(Math.abs(t)+Math.abs(e));return(e>0?3-n:1+n)/4}function U2(t,e,n,r){const i=t-n,a=e-r;return i*i+a*a}function Xce(t,e,n,r,i,a,s,o){const c=t-s,d=e-o,f=n-s,p=r-o,g=i-s,m=a-o,x=c*c+d*d,b=f*f+p*p,A=g*g+m*m;return c*(p*A-b*m)-d*(f*A-b*g)+x*(f*m-p*g)<0}function Kce(t,e,n,r,i,a){const s=n-t,o=r-e,c=i-t,d=a-e,f=s*s+o*o,p=c*c+d*d,g=.5/(s*d-o*c),m=(d*f-o*p)*g,x=(s*p-c*f)*g;return m*m+x*x}function Qce(t,e,n,r,i,a){const s=n-t,o=r-e,c=i-t,d=a-e,f=s*s+o*o,p=c*c+d*d,g=.5/(s*d-o*c),m=t+(d*f-o*p)*g,x=e+(s*p-c*f)*g;return{x:m,y:x}}function Od(t,e,n,r){if(r-n<=20)for(let i=n+1;i<=r;i++){const a=t[i],s=e[a];let o=i-1;for(;o>=n&&e[t[o]]>s;)t[o+1]=t[o--];t[o+1]=a}else{const i=n+r>>1;let a=n+1,s=r;Hh(t,i,a),e[t[n]]>e[t[r]]&&Hh(t,n,r),e[t[a]]>e[t[r]]&&Hh(t,a,r),e[t[n]]>e[t[a]]&&Hh(t,n,a);const o=t[a],c=e[o];for(;;){do a++;while(e[t[a]]<c);do s--;while(e[t[s]]>c);if(s<a)break;Hh(t,a,s)}t[n+1]=t[s],t[s]=o,r-a+1>=s-n?(Od(t,e,a,r),Od(t,e,n,s-1)):(Od(t,e,n,s-1),Od(t,e,a,r))}}function Hh(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function Zce(t){return t[0]}function Jce(t){return t[1]}const oR=1e-6;class Wc{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(e,n){this._+=`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(e,n){this._+=`L${this._x1=+e},${this._y1=+n}`}arc(e,n,r){e=+e,n=+n,r=+r;const i=e+r,a=n;if(r<0)throw new Error("negative radius");this._x1===null?this._+=`M${i},${a}`:(Math.abs(this._x1-i)>oR||Math.abs(this._y1-a)>oR)&&(this._+="L"+i+","+a),r&&(this._+=`A${r},${r},0,1,1,${e-r},${n}A${r},${r},0,1,1,${this._x1=i},${this._y1=a}`)}rect(e,n,r,i){this._+=`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${+r}v${+i}h${-r}Z`}value(){return this._||null}}class ib{constructor(){this._=[]}moveTo(e,n){this._.push([e,n])}closePath(){this._.push(this._[0].slice())}lineTo(e,n){this._.push([e,n])}value(){return this._.length?this._:null}}class eue{constructor(e,[n,r,i,a]=[0,0,960,500]){if(!((i=+i)>=(n=+n))||!((a=+a)>=(r=+r)))throw new Error("invalid bounds");this.delaunay=e,this._circumcenters=new Float64Array(e.points.length*2),this.vectors=new Float64Array(e.points.length*2),this.xmax=i,this.xmin=n,this.ymax=a,this.ymin=r,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:e,hull:n,triangles:r},vectors:i}=this;let a,s;const o=this.circumcenters=this._circumcenters.subarray(0,r.length/3*2);for(let b=0,A=0,E=r.length,S,T;b<E;b+=3,A+=2){const I=r[b]*2,P=r[b+1]*2,F=r[b+2]*2,M=e[I],D=e[I+1],R=e[P],B=e[P+1],N=e[F],k=e[F+1],j=R-M,q=B-D,X=N-M,G=k-D,W=(j*G-q*X)*2;if(Math.abs(W)<1e-9){if(a===void 0){a=s=0;for(const Z of n)a+=e[Z*2],s+=e[Z*2+1];a/=n.length,s/=n.length}const K=1e9*Math.sign((a-M)*G-(s-D)*X);S=(M+N)/2-K*G,T=(D+k)/2+K*X}else{const K=1/W,Z=j*j+q*q,fe=X*X+G*G;S=M+(G*Z-q*fe)*K,T=D+(j*fe-X*Z)*K}o[A]=S,o[A+1]=T}let c=n[n.length-1],d,f=c*4,p,g=e[2*c],m,x=e[2*c+1];i.fill(0);for(let b=0;b<n.length;++b)c=n[b],d=f,p=g,m=x,f=c*4,g=e[2*c],x=e[2*c+1],i[d+2]=i[f]=m-x,i[d+3]=i[f+1]=g-p}render(e){const n=e==null?e=new Wc:void 0,{delaunay:{halfedges:r,inedges:i,hull:a},circumcenters:s,vectors:o}=this;if(a.length<=1)return null;for(let f=0,p=r.length;f<p;++f){const g=r[f];if(g<f)continue;const m=Math.floor(f/3)*2,x=Math.floor(g/3)*2,b=s[m],A=s[m+1],E=s[x],S=s[x+1];this._renderSegment(b,A,E,S,e)}let c,d=a[a.length-1];for(let f=0;f<a.length;++f){c=d,d=a[f];const p=Math.floor(i[d]/3)*2,g=s[p],m=s[p+1],x=c*4,b=this._project(g,m,o[x+2],o[x+3]);b&&this._renderSegment(g,m,b[0],b[1],e)}return n&&n.value()}renderBounds(e){const n=e==null?e=new Wc:void 0;return e.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),n&&n.value()}renderCell(e,n){const r=n==null?n=new Wc:void 0,i=this._clip(e);if(i===null||!i.length)return;n.moveTo(i[0],i[1]);let a=i.length;for(;i[0]===i[a-2]&&i[1]===i[a-1]&&a>1;)a-=2;for(let s=2;s<a;s+=2)(i[s]!==i[s-2]||i[s+1]!==i[s-1])&&n.lineTo(i[s],i[s+1]);return n.closePath(),r&&r.value()}*cellPolygons(){const{delaunay:{points:e}}=this;for(let n=0,r=e.length/2;n<r;++n){const i=this.cellPolygon(n);i&&(i.index=n,yield i)}}cellPolygon(e){const n=new ib;return this.renderCell(e,n),n.value()}_renderSegment(e,n,r,i,a){let s;const o=this._regioncode(e,n),c=this._regioncode(r,i);o===0&&c===0?(a.moveTo(e,n),a.lineTo(r,i)):(s=this._clipSegment(e,n,r,i,o,c))&&(a.moveTo(s[0],s[1]),a.lineTo(s[2],s[3]))}contains(e,n,r){return n=+n,n!==n||(r=+r,r!==r)?!1:this.delaunay._step(e,n,r)===e}*neighbors(e){const n=this._clip(e);if(n)for(const r of this.delaunay.neighbors(e)){const i=this._clip(r);if(i){e:for(let a=0,s=n.length;a<s;a+=2)for(let o=0,c=i.length;o<c;o+=2)if(n[a]===i[o]&&n[a+1]===i[o+1]&&n[(a+2)%s]===i[(o+c-2)%c]&&n[(a+3)%s]===i[(o+c-1)%c]){yield r;break e}}}}_cell(e){const{circumcenters:n,delaunay:{inedges:r,halfedges:i,triangles:a}}=this,s=r[e];if(s===-1)return null;const o=[];let c=s;do{const d=Math.floor(c/3);if(o.push(n[d*2],n[d*2+1]),c=c%3===2?c-2:c+1,a[c]!==e)break;c=i[c]}while(c!==s&&c!==-1);return o}_clip(e){if(e===0&&this.delaunay.hull.length===1)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const n=this._cell(e);if(n===null)return null;const{vectors:r}=this,i=e*4;return this._simplify(r[i]||r[i+1]?this._clipInfinite(e,n,r[i],r[i+1],r[i+2],r[i+3]):this._clipFinite(e,n))}_clipFinite(e,n){const r=n.length;let i=null,a,s,o=n[r-2],c=n[r-1],d,f=this._regioncode(o,c),p,g=0;for(let m=0;m<r;m+=2)if(a=o,s=c,o=n[m],c=n[m+1],d=f,f=this._regioncode(o,c),d===0&&f===0)p=g,g=0,i?i.push(o,c):i=[o,c];else{let x,b,A,E,S;if(d===0){if((x=this._clipSegment(a,s,o,c,d,f))===null)continue;[b,A,E,S]=x}else{if((x=this._clipSegment(o,c,a,s,f,d))===null)continue;[E,S,b,A]=x,p=g,g=this._edgecode(b,A),p&&g&&this._edge(e,p,g,i,i.length),i?i.push(b,A):i=[b,A]}p=g,g=this._edgecode(E,S),p&&g&&this._edge(e,p,g,i,i.length),i?i.push(E,S):i=[E,S]}if(i)p=g,g=this._edgecode(i[0],i[1]),p&&g&&this._edge(e,p,g,i,i.length);else if(this.contains(e,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return i}_clipSegment(e,n,r,i,a,s){const o=a<s;for(o&&([e,n,r,i,a,s]=[r,i,e,n,s,a]);;){if(a===0&&s===0)return o?[r,i,e,n]:[e,n,r,i];if(a&s)return null;let c,d,f=a||s;f&8?(c=e+(r-e)*(this.ymax-n)/(i-n),d=this.ymax):f&4?(c=e+(r-e)*(this.ymin-n)/(i-n),d=this.ymin):f&2?(d=n+(i-n)*(this.xmax-e)/(r-e),c=this.xmax):(d=n+(i-n)*(this.xmin-e)/(r-e),c=this.xmin),a?(e=c,n=d,a=this._regioncode(e,n)):(r=c,i=d,s=this._regioncode(r,i))}}_clipInfinite(e,n,r,i,a,s){let o=Array.from(n),c;if((c=this._project(o[0],o[1],r,i))&&o.unshift(c[0],c[1]),(c=this._project(o[o.length-2],o[o.length-1],a,s))&&o.push(c[0],c[1]),o=this._clipFinite(e,o))for(let d=0,f=o.length,p,g=this._edgecode(o[f-2],o[f-1]);d<f;d+=2)p=g,g=this._edgecode(o[d],o[d+1]),p&&g&&(d=this._edge(e,p,g,o,d),f=o.length);else this.contains(e,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(o=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return o}_edge(e,n,r,i,a){for(;n!==r;){let s,o;switch(n){case 5:n=4;continue;case 4:n=6,s=this.xmax,o=this.ymin;break;case 6:n=2;continue;case 2:n=10,s=this.xmax,o=this.ymax;break;case 10:n=8;continue;case 8:n=9,s=this.xmin,o=this.ymax;break;case 9:n=1;continue;case 1:n=5,s=this.xmin,o=this.ymin;break}(i[a]!==s||i[a+1]!==o)&&this.contains(e,s,o)&&(i.splice(a,0,s,o),a+=2)}return a}_project(e,n,r,i){let a=1/0,s,o,c;if(i<0){if(n<=this.ymin)return null;(s=(this.ymin-n)/i)<a&&(c=this.ymin,o=e+(a=s)*r)}else if(i>0){if(n>=this.ymax)return null;(s=(this.ymax-n)/i)<a&&(c=this.ymax,o=e+(a=s)*r)}if(r>0){if(e>=this.xmax)return null;(s=(this.xmax-e)/r)<a&&(o=this.xmax,c=n+(a=s)*i)}else if(r<0){if(e<=this.xmin)return null;(s=(this.xmin-e)/r)<a&&(o=this.xmin,c=n+(a=s)*i)}return[o,c]}_edgecode(e,n){return(e===this.xmin?1:e===this.xmax?2:0)|(n===this.ymin?4:n===this.ymax?8:0)}_regioncode(e,n){return(e<this.xmin?1:e>this.xmax?2:0)|(n<this.ymin?4:n>this.ymax?8:0)}_simplify(e){if(e&&e.length>4){for(let n=0;n<e.length;n+=2){const r=(n+2)%e.length,i=(n+4)%e.length;(e[n]===e[r]&&e[r]===e[i]||e[n+1]===e[r+1]&&e[r+1]===e[i+1])&&(e.splice(r,2),n-=2)}e.length||(e=null)}return e}}const tue=2*Math.PI,pd=Math.pow;function nue(t){return t[0]}function rue(t){return t[1]}function iue(t){const{triangles:e,coords:n}=t;for(let r=0;r<e.length;r+=3){const i=2*e[r],a=2*e[r+1],s=2*e[r+2];if((n[s]-n[i])*(n[a+1]-n[i+1])-(n[a]-n[i])*(n[s+1]-n[i+1])>1e-10)return!1}return!0}function aue(t,e,n){return[t+Math.sin(t+e)*n,e+Math.cos(t-e)*n]}class OA{static from(e,n=nue,r=rue,i){return new OA("length"in e?sue(e,n,r,i):Float64Array.from(oue(e,n,r,i)))}constructor(e){this._delaunator=new P1(e),this.inedges=new Int32Array(e.length/2),this._hullIndex=new Int32Array(e.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const e=this._delaunator,n=this.points;if(e.hull&&e.hull.length>2&&iue(e)){this.collinear=Int32Array.from({length:n.length/2},(g,m)=>m).sort((g,m)=>n[2*g]-n[2*m]||n[2*g+1]-n[2*m+1]);const c=this.collinear[0],d=this.collinear[this.collinear.length-1],f=[n[2*c],n[2*c+1],n[2*d],n[2*d+1]],p=1e-8*Math.hypot(f[3]-f[1],f[2]-f[0]);for(let g=0,m=n.length/2;g<m;++g){const x=aue(n[2*g],n[2*g+1],p);n[2*g]=x[0],n[2*g+1]=x[1]}this._delaunator=new P1(n)}else delete this.collinear;const r=this.halfedges=this._delaunator.halfedges,i=this.hull=this._delaunator.hull,a=this.triangles=this._delaunator.triangles,s=this.inedges.fill(-1),o=this._hullIndex.fill(-1);for(let c=0,d=r.length;c<d;++c){const f=a[c%3===2?c-2:c+1];(r[c]===-1||s[f]===-1)&&(s[f]=c)}for(let c=0,d=i.length;c<d;++c)o[i[c]]=c;i.length<=2&&i.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=i[0],s[i[0]]=1,i.length===2&&(s[i[1]]=0,this.triangles[1]=i[1],this.triangles[2]=i[1]))}voronoi(e){return new eue(this,e)}*neighbors(e){const{inedges:n,hull:r,_hullIndex:i,halfedges:a,triangles:s,collinear:o}=this;if(o){const p=o.indexOf(e);p>0&&(yield o[p-1]),p<o.length-1&&(yield o[p+1]);return}const c=n[e];if(c===-1)return;let d=c,f=-1;do{if(yield f=s[d],d=d%3===2?d-2:d+1,s[d]!==e)return;if(d=a[d],d===-1){const p=r[(i[e]+1)%r.length];p!==f&&(yield p);return}}while(d!==c)}find(e,n,r=0){if(e=+e,e!==e||(n=+n,n!==n))return-1;const i=r;let a;for(;(a=this._step(r,e,n))>=0&&a!==r&&a!==i;)r=a;return a}_step(e,n,r){const{inedges:i,hull:a,_hullIndex:s,halfedges:o,triangles:c,points:d}=this;if(i[e]===-1||!d.length)return(e+1)%(d.length>>1);let f=e,p=pd(n-d[e*2],2)+pd(r-d[e*2+1],2);const g=i[e];let m=g;do{let x=c[m];const b=pd(n-d[x*2],2)+pd(r-d[x*2+1],2);if(b<p&&(p=b,f=x),m=m%3===2?m-2:m+1,c[m]!==e)break;if(m=o[m],m===-1){if(m=a[(s[e]+1)%a.length],m!==x&&pd(n-d[m*2],2)+pd(r-d[m*2+1],2)<p)return m;break}}while(m!==g);return f}render(e){const n=e==null?e=new Wc:void 0,{points:r,halfedges:i,triangles:a}=this;for(let s=0,o=i.length;s<o;++s){const c=i[s];if(c<s)continue;const d=a[s]*2,f=a[c]*2;e.moveTo(r[d],r[d+1]),e.lineTo(r[f],r[f+1])}return this.renderHull(e),n&&n.value()}renderPoints(e,n){n===void 0&&(!e||typeof e.moveTo!="function")&&(n=e,e=null),n=n==null?2:+n;const r=e==null?e=new Wc:void 0,{points:i}=this;for(let a=0,s=i.length;a<s;a+=2){const o=i[a],c=i[a+1];e.moveTo(o+n,c),e.arc(o,c,n,0,tue)}return r&&r.value()}renderHull(e){const n=e==null?e=new Wc:void 0,{hull:r,points:i}=this,a=r[0]*2,s=r.length;e.moveTo(i[a],i[a+1]);for(let o=1;o<s;++o){const c=2*r[o];e.lineTo(i[c],i[c+1])}return e.closePath(),n&&n.value()}hullPolygon(){const e=new ib;return this.renderHull(e),e.value()}renderTriangle(e,n){const r=n==null?n=new Wc:void 0,{points:i,triangles:a}=this,s=a[e*=3]*2,o=a[e+1]*2,c=a[e+2]*2;return n.moveTo(i[s],i[s+1]),n.lineTo(i[o],i[o+1]),n.lineTo(i[c],i[c+1]),n.closePath(),r&&r.value()}*trianglePolygons(){const{triangles:e}=this;for(let n=0,r=e.length/3;n<r;++n)yield this.trianglePolygon(n)}trianglePolygon(e){const n=new ib;return this.renderTriangle(e,n),n.value()}}function sue(t,e,n,r){const i=t.length,a=new Float64Array(i*2);for(let s=0;s<i;++s){const o=t[s];a[s*2]=e.call(r,o,s,t),a[s*2+1]=n.call(r,o,s,t)}return a}function*oue(t,e,n,r){let i=0;for(const a of t)yield e.call(r,a,i,t),yield n.call(r,a,i,t),++i}const $y=({svgRef:t,params:e,store:n,instance:r})=>{var F;const{disableVoronoi:i,voronoiMaxRadius:a,onItemClick:s}=e,o=pt(n,Fo),{axis:c,axisIds:d}=pt(n,la),{axis:f,axisIds:p}=pt(n,ca),g=pt(n,Yk),{series:m,seriesOrder:x}=((F=pt(n,ns))==null?void 0:F.scatter)??{},b=O.useRef({}),A=O.useRef(void 0),E=O.useRef(void 0),S=d[0],T=p[0];Kn(()=>{n.update(M=>M.voronoi.isVoronoiEnabled===!i?M:H({},M,{voronoi:{isVoronoiEnabled:!i}}))},[n,i]),Kn(()=>{if(g||x===void 0||m===void 0||i)return;b.current={};let M=[];x.forEach(D=>{const{data:R,xAxisId:B,yAxisId:N}=m[D],k=c[B??S].scale,j=f[N??T].scale,q=C1(k),X=C1(j),G=[],W=[];for(let K=0;K<R.length;K+=1){const{x:Z,y:fe}=R[K],me=q(Z),ve=X(fe);r.isPointInside(me,ve)&&(G.push(me),G.push(ve),W.push(K))}b.current[D]={seriesId:D,seriesIndexes:W,startIndex:M.length,endIndex:M.length+G.length},M=M.concat(G)}),A.current=new OA(M),E.current=void 0},[g,S,T,m,x,c,f,o,r,i]),O.useEffect(()=>{if(t.current===null||i)return;const M=t.current;function D(W){const K=Yw(M,W);if(!r.isPointInside(K.x,K.y))return E.current=void 0,"outside-chart";if(!A.current)return"no-point-found";const Z=A.current.find(K.x,K.y,E.current);if(Z===void 0)return"no-point-found";E.current=Z;const fe=Object.values(b.current).find(be=>2*Z>=be.startIndex&&2*Z<be.endIndex);if(fe===void 0)return"no-point-found";const me=(2*Z-b.current[fe.seriesId].startIndex)/2,ve=b.current[fe.seriesId].seriesIndexes[me];if(a!==void 0){const be=A.current.points[2*Z],Me=A.current.points[2*Z+1];if((be-K.x)**2+(Me-K.y)**2>a**2)return"outside-voronoi-max-radius"}return{seriesId:fe.seriesId,dataIndex:ve}}const R=r.addInteractionListener("moveEnd",W=>{var K,Z;W.detail.activeGestures.pan||((K=r.cleanInteraction)==null||K.call(r),(Z=r.clearHighlight)==null||Z.call(r))}),B=r.addInteractionListener("panEnd",W=>{var K,Z;W.detail.activeGestures.move||((K=r.cleanInteraction)==null||K.call(r),(Z=r.clearHighlight)==null||Z.call(r))}),N=r.addInteractionListener("quickPressEnd",W=>{var K,Z;!W.detail.activeGestures.move&&!W.detail.activeGestures.pan&&((K=r.cleanInteraction)==null||K.call(r),(Z=r.clearHighlight)==null||Z.call(r))}),k=W=>{var me,ve,be,Me,ge,Le;const K=D(W.detail.srcEvent);if(K==="outside-chart"){(me=r.cleanInteraction)==null||me.call(r),(ve=r.clearHighlight)==null||ve.call(r);return}if(K==="outside-voronoi-max-radius"||K==="no-point-found"){(be=r.removeItemInteraction)==null||be.call(r),(Me=r.clearHighlight)==null||Me.call(r);return}const{seriesId:Z,dataIndex:fe}=K;(ge=r.setItemInteraction)==null||ge.call(r,{type:"scatter",seriesId:Z,dataIndex:fe}),(Le=r.setHighlight)==null||Le.call(r,{seriesId:Z,dataIndex:fe})},j=r.addInteractionListener("tap",W=>{const K=D(W.detail.srcEvent);if(typeof K!="string"&&s){const{seriesId:Z,dataIndex:fe}=K;s(W.detail.srcEvent,{type:"scatter",seriesId:Z,dataIndex:fe})}}),q=r.addInteractionListener("move",k),X=r.addInteractionListener("pan",k),G=r.addInteractionListener("quickPress",k);return()=>{j.cleanup(),q.cleanup(),R.cleanup(),X.cleanup(),B.cleanup(),G.cleanup(),N.cleanup()}},[t,f,c,a,s,i,o,r]);const I=He(()=>{n.update(M=>H({},M,{voronoi:H({},M.voronoi,{isVoronoiEnabled:!0})}))}),P=He(()=>{n.update(M=>H({},M,{voronoi:H({},M.voronoi,{isVoronoiEnabled:!1})}))});return{instance:{enableVoronoi:I,disableVoronoi:P}}};$y.getDefaultizedParams=({params:t})=>H({},t,{disableVoronoi:t.disableVoronoi??!t.series.some(e=>e.type==="scatter")});$y.getInitialState=t=>({voronoi:{isVoronoiEnabled:!t.disableVoronoi}});$y.params={disableVoronoi:!0,voronoiMaxRadius:!0,onItemClick:!0};const o6=[dp,Cf,Sf,gu,$y],lue=["children","localeText","plugins","seriesConfig","slots","slotProps"],cue=t=>{const e=bt({props:t,name:"MuiChartDataProvider"}),{children:n,localeText:r,plugins:i=o6,seriesConfig:a,slots:s,slotProps:o}=e,c=je(e,lue),d=di(),f={plugins:i,seriesConfig:a,pluginParams:H({theme:d.palette.mode},c)};return{children:n,localeText:r,chartProviderProps:f,slots:s,slotProps:o}};function l6(t){const{children:e,localeText:n,chartProviderProps:r,slots:i,slotProps:a}=cue(t);return v.jsx(hse,H({},r,{children:v.jsx(voe,{localeText:n,children:v.jsx(Uce,{slots:i,slotProps:a,defaultSlots:jce,children:e})})}))}function lR(t){const{isReversed:e,gradientId:n,size:r,direction:i,scale:a,colorMap:s}=t;return r<=0?null:v.jsx("linearGradient",{id:n,x1:"0",x2:"0",y1:"0",y2:"0",[`${i}${e?1:2}`]:`${r}px`,gradientUnits:"userSpaceOnUse",children:s.thresholds.map((o,c)=>{const d=a(o);if(d===void 0)return null;const f=e?1-d/r:d/r;return Number.isNaN(f)?null:v.jsxs(O.Fragment,{children:[v.jsx("stop",{offset:f,stopColor:s.colors[c],stopOpacity:1}),v.jsx("stop",{offset:f,stopColor:s.colors[c+1],stopOpacity:1})]},o.toString()+c)})})}const uue=10;function cR(t){const{gradientUnits:e,isReversed:n,gradientId:r,size:i,direction:a,scale:s,colorScale:o,colorMap:c}=t,d=[c.min??0,c.max??100],f=d.map(s).filter(x=>x!==void 0);if(f.length!==2)return null;const p=typeof d[0]=="number"?Jt(d[0],d[1]):aA(d[0],d[1]),g=Math.round((Math.max(...f)-Math.min(...f))/uue),m=`${d[0]}-${d[1]}-`;return v.jsx("linearGradient",{id:r,x1:"0",x2:"0",y1:"0",y2:"0",[`${a}${n?1:2}`]:e==="objectBoundingBox"?1:`${i}px`,gradientUnits:e??"userSpaceOnUse",children:Array.from({length:g+1},(x,b)=>{const A=p(b/g);if(A===void 0)return null;const E=s(A);if(E===void 0)return null;const S=n?1-E/i:E/i,T=o(A);return T===null?null:v.jsx("stop",{offset:S,stopColor:T,stopOpacity:1},m+b)})})}const due=10,fue=t=>t?{x1:"1",x2:"0",y1:"0",y2:"0"}:{x1:"0",x2:"1",y1:"0",y2:"0"};function H2(t){const{isReversed:e,gradientId:n,colorScale:r,colorMap:i}=t,a=[i.min??0,i.max??100],s=typeof a[0]=="number"?Jt(a[0],a[1]):aA(a[0],a[1]),o=due,c=`${a[0]}-${a[1]}-`;return v.jsx("linearGradient",H({id:n},fue(e),{gradientUnits:"objectBoundingBox",children:Array.from({length:o+1},(d,f)=>{const p=f/o,g=s(p);if(g===void 0)return null;const m=r(g);return m===null?null:v.jsx("stop",{offset:p,stopColor:m,stopOpacity:1},c+f)})}))}function hue(){const{top:t,height:e,bottom:n,left:r,width:i,right:a}=ka(),s=t+e+n,o=r+i+a,c=Wse(),d=Yse(),{xAxis:f,xAxisIds:p}=Uo(),{yAxis:g,yAxisIds:m}=Zl(),{zAxis:x,zAxisIds:b}=SA(),A=m.filter(T=>g[T].colorMap!==void 0),E=p.filter(T=>f[T].colorMap!==void 0),S=b.filter(T=>x[T].colorMap!==void 0);return A.length===0&&E.length===0&&S.length===0?null:v.jsxs("defs",{children:[A.map(T=>{const I=c(T),P=d(T),{colorMap:F,scale:M,colorScale:D,reverse:R}=g[T];return(F==null?void 0:F.type)==="piecewise"?v.jsx(lR,{isReversed:!R,scale:M,colorMap:F,size:s,gradientId:I,direction:"y"},I):(F==null?void 0:F.type)==="continuous"?v.jsxs(O.Fragment,{children:[v.jsx(cR,{isReversed:!R,scale:M,colorScale:D,colorMap:F,size:s,gradientId:I,direction:"y"}),v.jsx(H2,{isReversed:R,colorScale:D,colorMap:F,gradientId:P})]},I):null}),E.map(T=>{const I=c(T),P=d(T),{colorMap:F,scale:M,reverse:D,colorScale:R}=f[T];return(F==null?void 0:F.type)==="piecewise"?v.jsx(lR,{isReversed:D,scale:M,colorMap:F,size:o,gradientId:I,direction:"x"},I):(F==null?void 0:F.type)==="continuous"?v.jsxs(O.Fragment,{children:[v.jsx(cR,{isReversed:D,scale:M,colorScale:R,colorMap:F,size:o,gradientId:I,direction:"x"}),v.jsx(H2,{isReversed:D,colorScale:R,colorMap:F,gradientId:P})]},I):null}),S.map(T=>{const I=d(T),{colorMap:P,colorScale:F}=x[T];return(P==null?void 0:P.type)==="continuous"?v.jsx(H2,{colorScale:F,colorMap:P,gradientId:I},I):null})]})}const pue=["children","className","title","desc"],gue=Pe("svg",{name:"MuiChartsSurface",slot:"Root"})(({ownerState:t})=>({width:t.width??"100%",height:t.height??"100%",display:"flex",position:"relative",flexDirection:"column",alignItems:"center",justifyContent:"center",overflow:"hidden",touchAction:"pan-y",userSelect:"none"})),c6=O.forwardRef(function(e,n){const r=_n(),{width:i,height:a}=pt(r,Ste),{width:s,height:o}=pt(r,ik),c=CA(),d=ci(c,n),f=bt({props:e,name:"MuiChartsSurface"}),{children:p,className:g,title:m,desc:x}=f,b=je(f,pue),A=a>0&&i>0;return v.jsxs(gue,H({ownerState:{width:s,height:o},viewBox:`0 0 ${i} ${a}`,className:g},b,{ref:d,children:[m&&v.jsx("title",{children:m}),x&&v.jsx("desc",{children:x}),v.jsx(hue,{}),A&&p]}))}),mue=["width","height","margin","children","series","colors","dataset","desc","onAxisClick","highlightedAxis","onHighlightedAxisChange","disableVoronoi","voronoiMaxRadius","onItemClick","disableAxisListener","highlightedItem","onHighlightChange","sx","title","xAxis","yAxis","zAxis","rotationAxis","radiusAxis","skipAnimation","seriesConfig","plugins","localeText","slots","slotProps","experimentalFeatures"],u6=(t,e)=>{const n=t,{width:r,height:i,margin:a,children:s,series:o,colors:c,dataset:d,desc:f,onAxisClick:p,highlightedAxis:g,onHighlightedAxisChange:m,disableVoronoi:x,voronoiMaxRadius:b,onItemClick:A,disableAxisListener:E,highlightedItem:S,onHighlightChange:T,sx:I,title:P,xAxis:F,yAxis:M,zAxis:D,rotationAxis:R,radiusAxis:B,skipAnimation:N,seriesConfig:k,plugins:j,localeText:q,slots:X,slotProps:G,experimentalFeatures:W}=n,K=je(n,mue),Z=H({title:P,desc:f,sx:I,ref:e},K);return{chartDataProviderProps:{margin:a,series:o,colors:c,dataset:d,disableAxisListener:E,highlightedItem:S,onHighlightChange:T,onAxisClick:p,highlightedAxis:g,onHighlightedAxisChange:m,disableVoronoi:x,voronoiMaxRadius:b,onItemClick:A,xAxis:F,yAxis:M,zAxis:D,rotationAxis:R,radiusAxis:B,skipAnimation:N,width:r,height:i,localeText:q,seriesConfig:k,experimentalFeatures:W,plugins:j??o6,slots:X,slotProps:G},chartsSurfaceProps:Z,children:s}},yue=(t,e)=>t==="vertical"?(e==null?void 0:e.horizontal)==="start"?"row":"row-reverse":(e==null?void 0:e.vertical)==="bottom"?"column-reverse":"column",vue=(t,e)=>{if(t==="vertical"){if((e==null?void 0:e.vertical)==="top")return"flex-start";if((e==null?void 0:e.vertical)==="bottom")return"flex-end"}if(t==="horizontal"){if((e==null?void 0:e.horizontal)==="start")return"flex-start";if((e==null?void 0:e.horizontal)==="end")return"flex-end"}return"center"},xue=Pe("div",{name:"MuiChartsWrapper",slot:"Root",shouldForwardProp:t=>Pa(t)&&t!=="extendVertically"})(({ownerState:t})=>({display:"flex",flexDirection:yue(t.legendDirection,t.legendPosition),flex:1,justifyContent:"center",alignItems:vue(t.legendDirection,t.legendPosition),variants:[{props:{extendVertically:!0},style:{height:"100%"}}]}));function d6(t){const{children:e,sx:n,extendVertically:r}=t,i=hoe(),a=_n(),{height:s}=pt(a,ik);return v.jsx(xue,{ref:i,ownerState:t,sx:n,extendVertically:r??s===void 0,children:e})}const z2=O.forwardRef(function(e,n){var T,I,P,F;const r=bt({props:e,name:"MuiBarChart"}),{chartsWrapperProps:i,chartContainerProps:a,barPlotProps:s,gridProps:o,clipPathProps:c,clipPathGroupProps:d,overlayProps:f,chartsAxisProps:p,axisHighlightProps:g,legendProps:m,children:x}=Lce(r),{chartDataProviderProps:b,chartsSurfaceProps:A}=u6(a,n),E=((T=r.slots)==null?void 0:T.tooltip)??t6,S=(I=r.slots)==null?void 0:I.toolbar;return v.jsx(l6,H({},b,{children:v.jsxs(d6,H({},i,{children:[r.showToolbar&&S?v.jsx(S,H({},(P=r.slotProps)==null?void 0:P.toolbar)):null,!r.hideLegend&&v.jsx(n6,H({},m)),v.jsxs(c6,H({},A,{children:[v.jsx(lle,H({},o)),v.jsxs("g",H({},d,{children:[v.jsx(Cce,H({},s)),v.jsx(s6,H({},f)),v.jsx(qle,H({},g))]})),v.jsx(tle,H({},p)),v.jsx(xoe,H({},c)),x]})),!r.loading&&v.jsx(E,H({},(F=r.slotProps)==null?void 0:F.tooltip))]}))}))}),wue=["classes","color","dataIndex","id","isFaded","isHighlighted","onClick","cornerRadius","startAngle","endAngle","innerRadius","outerRadius","paddingAngle","skipAnimation"];function bue(t){return Ot("MuiPieArc",t)}Mt("MuiPieArc",["root","highlighted","faded","series"]);const _ue=t=>{const{classes:e,id:n,isFaded:r,isHighlighted:i,dataIndex:a}=t,s={root:["root",`series-${n}`,`data-index-${a}`,i&&"highlighted",r&&"faded"]};return wt(s,bue,e)},Aue=Pe("path",{name:"MuiPieArc",slot:"Root",overridesResolver:(t,e)=>e.arc})(({theme:t})=>({stroke:(t.vars||t).palette.background.paper,transitionProperty:"opacity, fill, filter",transitionDuration:`${TA}ms`,transitionTimingFunction:T8})),Eue=O.forwardRef(function(e,n){const{classes:r,color:i,dataIndex:a,id:s,isFaded:o,isHighlighted:c,onClick:d,cornerRadius:f,startAngle:p,endAngle:g,innerRadius:m,outerRadius:x,paddingAngle:b,skipAnimation:A}=e,E=je(e,wue),S={id:s,dataIndex:a,classes:r,color:i,isFaded:o,isHighlighted:c},T=_ue(S),I=r6({type:"pie",seriesId:s,dataIndex:a}),P=uoe({cornerRadius:f,startAngle:p,endAngle:g,innerRadius:m,outerRadius:x,paddingAngle:b,skipAnimation:A,ref:n});return v.jsx(Aue,H({onClick:d,cursor:d?"pointer":"unset",ownerState:S,className:T.root,fill:S.color,opacity:S.isFaded?.3:1,filter:S.isHighlighted?"brightness(120%)":"none",strokeWidth:1,strokeLinejoin:"round","data-highlighted":S.isHighlighted||void 0,"data-faded":S.isFaded||void 0},E,I,P))});function f6(t){const{id:e,data:n,faded:r,highlighted:i,paddingAngle:a=0,innerRadius:s=0,arcLabelRadius:o,outerRadius:c,cornerRadius:d=0}=t,{isFaded:f,isHighlighted:p}=zse();return O.useMemo(()=>n.map((m,x)=>{const b={seriesId:e,dataIndex:x},A=p(b),E=!A&&f(b),S=H({additionalRadius:0},E&&r||A&&i||{}),T=Math.max(0,Dd(S.paddingAngle??a)),I=Math.max(0,S.innerRadius??s),P=Math.max(0,S.outerRadius??c+S.additionalRadius),F=S.cornerRadius??d,M=S.arcLabelRadius??o??(I+P)/2;return H({},m,S,{dataIndex:x,isFaded:E,isHighlighted:A,paddingAngle:T,innerRadius:I,outerRadius:P,cornerRadius:F,arcLabelRadius:M})}),[d,s,c,a,o,n,r,i,f,p,e])}const Sue=["slots","slotProps","innerRadius","outerRadius","cornerRadius","paddingAngle","id","highlighted","faded","data","onItemClick","skipAnimation"];function Cue(t){const{slots:e,slotProps:n,innerRadius:r=0,outerRadius:i,cornerRadius:a=0,paddingAngle:s=0,id:o,highlighted:c,faded:d={additionalRadius:-5},data:f,onItemClick:p,skipAnimation:g}=t,m=je(t,Sue),x=f6({innerRadius:r,outerRadius:i,cornerRadius:a,paddingAngle:s,id:o,highlighted:c,faded:d,data:f});if(f.length===0)return null;const b=(e==null?void 0:e.pieArc)??Eue;return v.jsx("g",H({},m,{children:x.map((A,E)=>v.jsx(b,H({startAngle:A.startAngle,endAngle:A.endAngle,paddingAngle:A.paddingAngle,innerRadius:A.innerRadius,outerRadius:A.outerRadius,cornerRadius:A.cornerRadius,skipAnimation:g??!1,id:o,color:A.color,dataIndex:E,isFaded:A.isFaded,isHighlighted:A.isHighlighted,onClick:p&&(S=>{p(S,{type:"pie",seriesId:o,dataIndex:E},A)})},n==null?void 0:n.pieArc),A.dataIndex))}))}const Tue=["id","classes","color","startAngle","endAngle","paddingAngle","arcLabelRadius","innerRadius","outerRadius","cornerRadius","formattedArcLabel","isHighlighted","isFaded","style","skipAnimation"];function Iue(t){return Ot("MuiPieArcLabel",t)}const Due=Mt("MuiPieArcLabel",["root","highlighted","faded","animate","series"]),Rue=t=>{const{classes:e,id:n,isFaded:r,isHighlighted:i,skipAnimation:a}=t,s={root:["root",`series-${n}`,i&&"highlighted",r&&"faded",!a&&"animate"]};return wt(s,Iue,e)},Oue=Pe("text",{name:"MuiPieArcLabel",slot:"Root"})(({theme:t})=>({fill:(t.vars||t).palette.text.primary,textAnchor:"middle",dominantBaseline:"middle",pointerEvents:"none",animationName:"animate-opacity",animationDuration:"0s",animationTimingFunction:T8,[`&.${Due.animate}`]:{animationDuration:`${TA}ms`},"@keyframes animate-opacity":{from:{opacity:0}}})),Mue=O.forwardRef(function(e,n){const{id:r,classes:i,color:a,startAngle:s,endAngle:o,paddingAngle:c,arcLabelRadius:d,cornerRadius:f,formattedArcLabel:p,isHighlighted:g,isFaded:m,skipAnimation:x}=e,b=je(e,Tue),E=Rue({id:r,classes:i,isFaded:m,isHighlighted:g,skipAnimation:x}),S=foe({cornerRadius:f,startAngle:s,endAngle:o,innerRadius:d,outerRadius:d,paddingAngle:c,skipAnimation:x,ref:n});return v.jsx(Oue,H({className:E.root},b,S,{children:p}))}),Pue=["arcLabel","arcLabelMinAngle","arcLabelRadius","cornerRadius","data","faded","highlighted","id","innerRadius","outerRadius","paddingAngle","skipAnimation","slotProps","slots"],kue=180/Math.PI;function Nue(t,e,n){var i;if(!t||(n.endAngle-n.startAngle)*kue<e)return null;switch(t){case"label":return oa(n.label,"arc");case"value":return(i=n.value)==null?void 0:i.toString();case"formattedValue":return n.formattedValue;default:return t(H({},n,{label:oa(n.label,"arc")}))}}function Lue(t){const{arcLabel:e,arcLabelMinAngle:n=0,arcLabelRadius:r,cornerRadius:i=0,data:a,faded:s={additionalRadius:-5},highlighted:o,id:c,innerRadius:d,outerRadius:f,paddingAngle:p=0,skipAnimation:g,slotProps:m,slots:x}=t,b=je(t,Pue),A=f6({innerRadius:d,outerRadius:f,arcLabelRadius:r,cornerRadius:i,paddingAngle:p,id:c,highlighted:o,faded:s,data:a});if(a.length===0)return null;const E=(x==null?void 0:x.pieArcLabel)??Mue;return v.jsx("g",H({},b,{children:A.map(S=>v.jsx(E,H({startAngle:S.startAngle,endAngle:S.endAngle,paddingAngle:S.paddingAngle,innerRadius:S.innerRadius,outerRadius:S.outerRadius,arcLabelRadius:S.arcLabelRadius,cornerRadius:S.cornerRadius,id:c,color:S.color,isFaded:S.isFaded,isHighlighted:S.isHighlighted,formattedArcLabel:Nue(e,n,S),skipAnimation:g??!1},m==null?void 0:m.pieArcLabel),S.id??S.dataIndex))}))}function Uc(t,e){if(typeof t=="number")return t;if(t==="100%")return e;if(t.endsWith("%")){const n=Number.parseFloat(t.slice(0,t.length-1));if(!Number.isNaN(n))return n*e/100}if(t.endsWith("px")){const n=Number.parseFloat(t.slice(0,t.length-2));if(!Number.isNaN(n))return n}throw new Error(`MUI X Charts: Received an unknown value "${t}". It should be a number, or a string with a percentage value.`)}function uR(t,e){const{height:n,width:r}=e,{cx:i,cy:a}=t,s=Math.min(r,n)/2,o=Uc(i??"50%",r),c=Uc(a??"50%",n);return{cx:o,cy:c,availableRadius:s}}function Bue(t){return Ot("MuiPieChart",t)}Mt("MuiPieChart",["root","series","seriesLabels"]);const Fue=t=>wt({root:["root"],series:["series"],seriesLabels:["seriesLabels"]},Bue,t);function jue(t){const{skipAnimation:e,slots:n,slotProps:r,onItemClick:i}=t,a=Ose(),{left:s,top:o,width:c,height:d}=ka(),f=a6(e),p=Fue();if(a===void 0)return null;const{series:g,seriesOrder:m}=a;return v.jsxs("g",{children:[m.map(x=>{const{innerRadius:b,outerRadius:A,cornerRadius:E,paddingAngle:S,data:T,cx:I,cy:P,highlighted:F,faded:M}=g[x],{cx:D,cy:R,availableRadius:B}=uR({cx:I,cy:P},{width:c,height:d}),N=Uc(A??B,B),k=Uc(b??0,B);return v.jsx("g",{className:p.series,transform:`translate(${s+D}, ${o+R})`,"data-series":x,children:v.jsx(Cue,{innerRadius:k,outerRadius:N,cornerRadius:E,paddingAngle:S,id:x,data:T,skipAnimation:f,highlighted:F,faded:M,onItemClick:i,slots:n,slotProps:r})},x)}),m.map(x=>{const{innerRadius:b,outerRadius:A,arcLabelRadius:E,cornerRadius:S,paddingAngle:T,arcLabel:I,arcLabelMinAngle:P,data:F,cx:M,cy:D}=g[x],{cx:R,cy:B,availableRadius:N}=uR({cx:M,cy:D},{width:c,height:d}),k=Uc(A??N,N),j=Uc(b??0,N),q=E===void 0?(k+j)/2:Uc(E,N);return v.jsx("g",{className:p.seriesLabels,transform:`translate(${s+R}, ${o+B})`,"data-series":x,children:v.jsx(Lue,{innerRadius:j,outerRadius:k??N,arcLabelRadius:q,cornerRadius:S,paddingAngle:T,id:x,data:F,skipAnimation:f,arcLabel:I,arcLabelMinAngle:P,slots:n,slotProps:r})},x)})]})}const Vue=[Sf,gu],Uue=["series","width","height","margin","colors","sx","skipAnimation","hideLegend","children","slots","slotProps","onItemClick","loading","highlightedItem","onHighlightChange","className","showToolbar"],dR=O.forwardRef(function(e,n){var N,k,j,q,X,G,W,K;const r=bt({props:e,name:"MuiPieChart"}),{series:i,width:a,height:s,margin:o,colors:c,sx:d,skipAnimation:f,hideLegend:p,children:g,slots:m,slotProps:x,onItemClick:b,loading:A,highlightedItem:E,onHighlightChange:S,className:T,showToolbar:I}=r,P=je(r,Uue),F=ak(o,Zte),{chartDataProviderProps:M,chartsSurfaceProps:D}=u6(H({},P,{series:i.map(Z=>H({type:"pie"},Z)),width:a,height:s,margin:F,colors:c,highlightedItem:E,onHighlightChange:S,className:T,skipAnimation:f,plugins:Vue}),n),R=(m==null?void 0:m.tooltip)??t6,B=(N=r.slots)==null?void 0:N.toolbar;return v.jsx(l6,H({},M,{children:v.jsxs(d6,{legendPosition:(j=(k=r.slotProps)==null?void 0:k.legend)==null?void 0:j.position,legendDirection:((X=(q=r==null?void 0:r.slotProps)==null?void 0:q.legend)==null?void 0:X.direction)??"vertical",sx:d,children:[I&&B?v.jsx(B,H({},(G=r.slotProps)==null?void 0:G.toolbar)):null,!p&&v.jsx(n6,{direction:((K=(W=r==null?void 0:r.slotProps)==null?void 0:W.legend)==null?void 0:K.direction)??"vertical",slots:m,slotProps:x}),v.jsxs(c6,H({},D,{children:[v.jsx(jue,{slots:m,slotProps:x,onItemClick:b}),v.jsx(s6,{loading:A,slots:m,slotProps:x}),g]})),!A&&v.jsx(R,H({trigger:"item"},x==null?void 0:x.tooltip))]})}))});function Hue(){var m;const e=((m=di().custom)==null?void 0:m.chartColors)??{bar:"#42a5f5",memo:"#9c27b0"},{loading:n,error:r,summary:i,tagStats:a,monthlyFinished:s,monthlyAddedBooks:o,monthlyMemos:c,topAuthors:d,topPublishers:f,statusDistribution:p}=Uee(),g=i&&(i.totalBooks>0||i.finishedBooks>0||i.readingBooks>0||i.tsundokuBooks>0||i.reReadingBooks>0);return v.jsxs(re,{sx:{maxWidth:1200,mx:"auto",mb:10},children:[v.jsx(tp,{title:"",subtitle:""}),v.jsxs(re,{sx:{p:2},children:[n&&v.jsx(Bo,{variant:"inline",message:"...","data-testid":"stats-loading"}),r&&v.jsx(te,{color:"error",sx:{mb:2},children:r}),!n&&!r&&!g&&v.jsx(Sn,{sx:{mb:2},children:v.jsxs(Cn,{sx:{textAlign:"center",py:4},children:[v.jsx(te,{variant:"h6",color:"text.secondary",gutterBottom:!0,children:" "}),v.jsx(te,{variant:"body2",color:"text.secondary",children:""})]})}),g&&v.jsxs(v.Fragment,{children:[v.jsxs(re,{sx:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:{xs:1,sm:2},width:"100%",mb:2,"@media (max-width: 480px)":{gap:.75}},children:[v.jsx(Sn,{"data-testid":"stats-total-books",sx:{transition:"transform 0.2s ease-in-out","&:hover":{transform:"translateY(-2px)"}},children:v.jsxs(Cn,{children:[v.jsx(te,{variant:"h6",children:""}),v.jsx(te,{variant:"h4",sx:{fontWeight:"bold"},children:(i==null?void 0:i.totalBooks)??"-"})]})}),v.jsx(Sn,{"data-testid":"stats-tsundoku-books",sx:{transition:"transform 0.2s ease-in-out","&:hover":{transform:"translateY(-2px)"}},children:v.jsxs(Cn,{children:[v.jsx(te,{variant:"h6",children:""}),v.jsx(te,{variant:"h4",sx:{fontWeight:"bold"},children:(i==null?void 0:i.tsundokuBooks)??"-"})]})}),v.jsx(Sn,{"data-testid":"stats-reading-books",sx:{transition:"transform 0.2s ease-in-out","&:hover":{transform:"translateY(-2px)"}},children:v.jsxs(Cn,{children:[v.jsx(te,{variant:"h6",children:""}),v.jsx(te,{variant:"h4",sx:{fontWeight:"bold"},children:(i==null?void 0:i.readingBooks)??"-"})]})}),v.jsx(Sn,{"data-testid":"stats-rereading-books",sx:{transition:"transform 0.2s ease-in-out","&:hover":{transform:"translateY(-2px)"}},children:v.jsxs(Cn,{children:[v.jsx(te,{variant:"h6",children:""}),v.jsx(te,{variant:"h4",sx:{fontWeight:"bold"},children:(i==null?void 0:i.reReadingBooks)??"-"})]})}),v.jsx(Sn,{"data-testid":"stats-finished-books",sx:{transition:"transform 0.2s ease-in-out","&:hover":{transform:"translateY(-2px)"}},children:v.jsxs(Cn,{children:[v.jsx(te,{variant:"h6",children:""}),v.jsx(te,{variant:"h4",sx:{fontWeight:"bold"},children:(i==null?void 0:i.finishedBooks)??"-"})]})})]}),!!i&&v.jsx(Sn,{sx:{mb:2},"data-testid":"chart-status-pie",children:v.jsxs(Cn,{children:[v.jsx(te,{variant:"h6",sx:{mb:1},children:""}),v.jsx(dR,{height:220,series:[{data:[{id:"tsundoku",label:"",value:(p==null?void 0:p.tsundoku)??0},{id:"reading",label:"",value:(p==null?void 0:p.reading)??0},{id:"reReading",label:"",value:(p==null?void 0:p.reReading)??0},{id:"finished",label:"",value:(p==null?void 0:p.finished)??0}],innerRadius:30,paddingAngle:2}]})]})}),v.jsx(_o,{sx:{my:2}}),v.jsx(Sn,{sx:{mb:2},"data-testid":"chart-monthly-finished",children:v.jsxs(Cn,{children:[v.jsx(te,{variant:"h6",sx:{mb:1},children:"12"}),v.jsx(z2,{xAxis:[{scaleType:"band",data:(s??[]).map(x=>x.key)}],series:[{data:(s??[]).map(x=>x.count),label:""}],height:260})]})}),v.jsxs(re,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",md:"1fr 1fr"},gap:2,mb:2},children:[v.jsx(Sn,{"data-testid":"chart-monthly-added",children:v.jsxs(Cn,{children:[v.jsx(te,{variant:"subtitle1",sx:{mb:1},children:"12"}),v.jsx(z2,{xAxis:[{scaleType:"band",data:(o??[]).map(x=>x.key)}],series:[{data:(o??[]).map(x=>x.count),label:"",color:e.bar}],height:220})]})}),v.jsx(Sn,{"data-testid":"chart-monthly-memos",children:v.jsxs(Cn,{children:[v.jsx(te,{variant:"subtitle1",sx:{mb:1},children:"12"}),v.jsx(z2,{xAxis:[{scaleType:"band",data:(c??[]).map(x=>x.key)}],series:[{data:(c??[]).map(x=>x.count),label:"",color:e.memo}],height:220})]})})]}),v.jsx(_o,{sx:{my:2}}),!!(a!=null&&a.length)&&v.jsx(Sn,{sx:{mb:2},"data-testid":"chart-tag-pie",children:v.jsxs(Cn,{children:[v.jsx(te,{variant:"h6",sx:{mb:1},children:""}),v.jsx(dR,{height:260,series:[{data:a.slice(0,6).map(x=>({id:x.tag,label:x.tag,value:x.totalCount})),innerRadius:40,paddingAngle:2}]})]})}),v.jsxs(re,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",sm:"1fr 1fr"},gap:2},children:[((a==null?void 0:a.slice(0,10))??[]).map(x=>v.jsx(re,{children:v.jsx(Sn,{"data-testid":`tag-stat-${x.tag}`,children:v.jsxs(Cn,{children:[v.jsx(te,{variant:"subtitle1",sx:{fontWeight:600},children:x.tag}),v.jsxs(te,{variant:"body2",color:"text.secondary",children:[": ",x.bookCount," / : ",x.memoCount," / : ",x.totalCount]})]})})},x.tag)),(!a||a.length===0)&&!n&&v.jsx(re,{children:v.jsx(te,{variant:"body2",color:"text.secondary",children:""})})]}),v.jsx(_o,{sx:{my:2}}),v.jsxs(Xn,{sx:{p:2,mb:2},children:[v.jsx(te,{variant:"h6",sx:{mb:2},children:""}),v.jsxs(re,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",sm:"1fr 1fr"},gap:2},children:[((d==null?void 0:d.slice(0,10))??[]).map(x=>v.jsx(re,{children:v.jsx(Sn,{"data-testid":`author-top-${x.author}`,children:v.jsxs(Cn,{children:[v.jsx(te,{variant:"subtitle1",sx:{fontWeight:600},children:x.author}),v.jsxs(te,{variant:"body2",color:"text.secondary",children:[": ",x.total]})]})})},x.author)),(!d||d.length===0)&&!n&&v.jsx(re,{children:v.jsx(te,{variant:"body2",color:"text.secondary",children:""})})]})]}),v.jsxs(Xn,{sx:{p:2},children:[v.jsx(te,{variant:"h6",sx:{mb:2},children:""}),v.jsxs(re,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",sm:"1fr 1fr"},gap:2},children:[((f==null?void 0:f.slice(0,10))??[]).map(x=>v.jsx(re,{children:v.jsx(Sn,{"data-testid":`publisher-top-${x.publisher}`,children:v.jsxs(Cn,{children:[v.jsx(te,{variant:"subtitle1",sx:{fontWeight:600},children:x.publisher}),v.jsxs(te,{variant:"body2",color:"text.secondary",children:[": ",x.total]})]})})},x.publisher)),(!f||f.length===0)&&!n&&v.jsx(re,{children:v.jsx(te,{variant:"body2",color:"text.secondary",children:""})})]})]})]})]})]})}const k1="library-classic",Ha={profile:{displayName:"",avatarUrl:""},preferences:{themePresetId:k1}},h6=O.createContext(null);function p6(){const t=O.useContext(h6);if(!t)throw new Error("useUserSettings must be used within UserSettingsProvider");return t}function zue({children:t}){const{user:e}=jn(),n=O.useContext(Pr),r=(n==null?void 0:n.setGlobalError)||(()=>{}),[i,a]=O.useState(Ha),[s,o]=O.useState(!0),[c,d]=O.useState(null),f=O.useCallback(async()=>{var x,b,A;if(!(e!=null&&e.uid)){a(Ha),o(!1);return}try{o(!0),d(null);const E=ai(vt,"users",e.uid),S=await _m(E);if(S.exists()){const T=S.data();a({profile:{displayName:((x=T.profile)==null?void 0:x.displayName)??Ha.profile.displayName,avatarUrl:((b=T.profile)==null?void 0:b.avatarUrl)??Ha.profile.avatarUrl},preferences:{themePresetId:((A=T.preferences)==null?void 0:A.themePresetId)??Ha.preferences.themePresetId}})}else a(Ha)}catch(E){console.error(":",E),r(""),d(""),a(Ha)}finally{o(!1)}},[e==null?void 0:e.uid,r]);O.useEffect(()=>{f()},[f]);const p=O.useCallback(async x=>{if(e!=null&&e.uid)try{const b=ai(vt,"users",e.uid),A=await _m(b),E=A.exists()?A.data():{},S=E.profile??Ha.profile,I={...E.preferences??Ha.preferences,...x};await Zm(b,{profile:S,preferences:I,updatedAt:ir()},{merge:!0}),a(P=>({...P,preferences:I}))}catch(b){throw console.error(":",b),r(""),b}},[e==null?void 0:e.uid,r]),g=O.useCallback(async x=>{if(e!=null&&e.uid)try{const b=ai(vt,"users",e.uid),A=await _m(b),E=A.exists()?A.data():{},S=E.profile??Ha.profile,T=E.preferences??Ha.preferences,I={...S,...x};await Zm(b,{profile:I,preferences:T,updatedAt:ir()},{merge:!0}),a(P=>({...P,profile:I}))}catch(b){throw console.error(":",b),r(""),b}},[e==null?void 0:e.uid,r]),m={settings:i,loading:s,error:c,updatePreferences:p,updateProfile:g,refresh:f};return v.jsx(h6.Provider,{value:m,children:t})}function $ue({children:t}){return v.jsx(zue,{children:t})}function g6(t){const e=n=>`url("${t(n)}")`;return{"library-classic":{id:"library-classic",name:"",description:"",background:{image:e("/library-background.jpg"),pattern:e("/library-pattern.svg")},overlay:{top:"rgba(245, 247, 250, 0.3)",mid:"rgba(139, 69, 19, 0.1)",bottom:"rgba(15, 23, 42, 0.2)"},backgroundColor:"#eef2ff",bookAccent:"brown",memoAccent:"memo",cardAccent:"brown",bookDecorations:{corners:!0,innerBorder:!0,centerLine:!0},memoDecorations:{corners:!0,innerBorder:!0,centerLine:!1},cardDecorations:{corners:!0,innerBorder:!0,centerLine:!0},glassEffect:{opacity:.75,blur:"20px",saturate:"180%"},pageHeader:{backgroundImage:"paper",goldOverlay:!0,centerLine:!0,borderRadius:{xs:16,sm:20},accentKey:"brown"},cardShadow:"0 8px 32px rgba(0, 0, 0, 0.12), 0 2px 8px rgba(0, 0, 0, 0.08), inset 0 1px 0 rgba(255, 255, 255, 0.5)",cardShadowHover:"0 12px 40px rgba(0, 0, 0, 0.16), 0 4px 12px rgba(0, 0, 0, 0.12), inset 0 1px 0 rgba(255, 255, 255, 0.6)",chartColors:{bar:"#42a5f5",memo:"#9c27b0"}},"minimal-light":{id:"minimal-light",name:"",description:"",background:{image:"none",pattern:"none"},overlay:{top:"transparent",mid:"transparent",bottom:"transparent"},backgroundColor:"#f5f5f5",bookAccent:"neutral",memoAccent:"neutral",cardAccent:"neutral",bookDecorations:{corners:!1,innerBorder:!1,centerLine:!1},memoDecorations:{corners:!1,innerBorder:!1,centerLine:!1},cardDecorations:{corners:!1,innerBorder:!1,centerLine:!1},glassEffect:{opacity:.9,blur:"12px",saturate:"140%"},pageHeader:{backgroundImage:"none",goldOverlay:!1,centerLine:!1,borderRadius:0,accentKey:"neutral"},cardShadow:"0 8px 32px rgba(0, 0, 0, 0.12), 0 2px 8px rgba(0, 0, 0, 0.08), inset 0 1px 0 rgba(255, 255, 255, 0.5)",cardShadowHover:"0 12px 40px rgba(0, 0, 0, 0.16), 0 4px 12px rgba(0, 0, 0, 0.12), inset 0 1px 0 rgba(255, 255, 255, 0.6)",chartColors:{bar:"#42a5f5",memo:"#9c27b0"}}}}function Gue(){var P,F,M,D,R;const t=No(),{user:e,signOut:n}=jn(),{settings:r,loading:i,error:a,updatePreferences:s,updateProfile:o}=p6(),c=g6(ti),[d,f]=O.useState(!1),[p,g]=O.useState(""),[m,x]=O.useState(""),[b,A]=O.useState(!1),E=()=>{var B,N;g(((B=r.profile)==null?void 0:B.displayName)||""),x(((N=r.profile)==null?void 0:N.avatarUrl)||""),f(!0)},S=()=>{f(!1)},T=async()=>{A(!0);try{await o({displayName:p.trim(),avatarUrl:m.trim()}),S()}catch(B){console.error(":",B)}finally{A(!1)}},I=async()=>{try{await n(),t("/login")}catch(B){console.error(":",B)}};return v.jsxs(re,{sx:{maxWidth:600,mx:"auto",mb:10},children:[v.jsx(tp,{title:"",subtitle:""}),v.jsxs(re,{sx:{p:2},children:[i&&v.jsx(Bo,{variant:"inline",message:"...","data-testid":"settings-loading"}),a&&v.jsx(te,{color:"error",sx:{mb:2},"data-testid":"settings-error",children:a}),!i&&v.jsxs(v.Fragment,{children:[v.jsx(Sn,{sx:{mb:2},"data-testid":"settings-account-section",children:v.jsxs(Cn,{children:[v.jsx(te,{variant:"h6",gutterBottom:!0,children:""}),v.jsx(te,{variant:"body2",color:"text.secondary",sx:{mb:2},children:(e==null?void 0:e.email)||""}),v.jsxs(re,{sx:{display:"flex",alignItems:"center",gap:2,mt:2},children:[v.jsx(AR,{src:((P=r.profile)==null?void 0:P.avatarUrl)||void 0,alt:((F=r.profile)==null?void 0:F.displayName)||"",sx:{width:56,height:56},children:(M=r.profile)!=null&&M.displayName?r.profile.displayName.charAt(0).toUpperCase():v.jsx(CR,{})}),v.jsxs(re,{sx:{flex:1},children:[v.jsx(te,{variant:"body1",fontWeight:"medium",children:((D=r.profile)==null?void 0:D.displayName)||""}),v.jsx(ze,{size:"small",startIcon:v.jsx(p0,{}),onClick:E,"data-testid":"profile-edit-button",children:""})]})]})]})}),v.jsxs(Ni,{open:d,onClose:S,maxWidth:"sm",fullWidth:!0,children:[v.jsx(Yi,{children:""}),v.jsxs(Li,{children:[v.jsx(ct,{label:"",fullWidth:!0,value:p,onChange:B=>g(B.target.value),placeholder:"",sx:{mt:1,mb:2},inputProps:{"data-testid":"profile-display-name-input"}}),v.jsx(ct,{label:"URL",fullWidth:!0,value:m,onChange:B=>x(B.target.value),placeholder:"https://...",helperText:"URL",inputProps:{"data-testid":"profile-avatar-url-input"}})]}),v.jsxs(Bi,{children:[v.jsx(ze,{onClick:S,children:""}),v.jsx(ze,{variant:"contained",onClick:T,disabled:b,"data-testid":"profile-save-button",children:b?"...":""})]})]}),v.jsx(Sn,{sx:{mb:2},"data-testid":"settings-display-section",children:v.jsxs(Cn,{children:[v.jsx(te,{variant:"h6",gutterBottom:!0,children:""}),v.jsx(te,{variant:"body2",color:"text.secondary",sx:{mb:2},children:""}),v.jsx(p5,{value:((R=r.preferences)==null?void 0:R.themePresetId)||"library-classic",onChange:B=>s({themePresetId:B.target.value}),"data-testid":"theme-preset-radio-group",children:Object.values(c).map(B=>v.jsx(g5,{value:B.id,control:v.jsx(m5,{"data-testid":`theme-preset-${B.id}`}),label:v.jsxs(re,{children:[v.jsx(te,{variant:"body1",children:B.name}),v.jsx(te,{variant:"caption",color:"text.secondary",children:B.description})]})},B.id))})]})}),v.jsx(_o,{sx:{my:2}}),v.jsx(re,{sx:{display:"flex",justifyContent:"center",pt:2},children:v.jsx(ze,{variant:"outlined",color:"primary",onClick:I,"data-testid":"settings-logout-button",children:""})})]})]})]})}const MA=()=>{try{if(typeof wi>"u"||!wi.useState)return{isOnline:!0,isInstallable:!1,isInstalled:!1,swRegistration:null,userEngagement:0,lastVisitTime:null,shouldShowInstallPrompt:!1,shouldShowManualInstallGuide:!1,registerServiceWorker:async()=>null,installApp:async()=>{},requestNotificationPermission:async()=>"denied",sendNotification:()=>null,checkForUpdates:async()=>{},clearCache:async()=>{},reloadApp:()=>{},recordInstallPromptDismiss:()=>{}}}catch(R){return console.warn("React context not available in usePWA:",R),{isOnline:!0,isInstallable:!1,isInstalled:!1,swRegistration:null,userEngagement:0,lastVisitTime:null,shouldShowInstallPrompt:!1,shouldShowManualInstallGuide:!1,registerServiceWorker:async()=>null,installApp:async()=>{},requestNotificationPermission:async()=>"denied",sendNotification:()=>null,checkForUpdates:async()=>{},clearCache:async()=>{},reloadApp:()=>{},recordInstallPromptDismiss:()=>{}}}if(!(typeof window<"u"&&typeof navigator<"u"&&"serviceWorker"in navigator&&"PushManager"in window&&!Is.IS_DEVELOPMENT()))return{isOnline:!0,isInstallable:!1,isInstalled:!1,swRegistration:null,userEngagement:0,lastVisitTime:null,shouldShowInstallPrompt:!1,shouldShowManualInstallGuide:!1,registerServiceWorker:async()=>null,installApp:async()=>{},requestNotificationPermission:async()=>"denied",sendNotification:()=>null,checkForUpdates:async()=>{},clearCache:async()=>{},reloadApp:()=>{},recordInstallPromptDismiss:()=>{}};const[e,n]=O.useState(navigator.onLine),[r,i]=O.useState(null),[a,s]=O.useState(null),[o,c]=O.useState(!1),[d,f]=O.useState(!1),[p,g]=O.useState(0),[m,x]=O.useState(null);O.useEffect(()=>{const R=()=>n(!0),B=()=>n(!1);return window.addEventListener("online",R),window.addEventListener("offline",B),()=>{window.removeEventListener("online",R),window.removeEventListener("offline",B)}},[]),O.useEffect(()=>{if(typeof window>"u")return;const R=()=>{g(N=>N+1)},B=["click","scroll","keydown","touchstart"];return B.forEach(N=>{window.addEventListener(N,R,{passive:!0})}),()=>{B.forEach(N=>{window.removeEventListener(N,R)})}},[]),O.useEffect(()=>{if(typeof localStorage>"u")return;const R=Date.now(),B=localStorage.getItem("bookmemo_last_visit");if(B){if(R-parseInt(B)>1440*60*1e3){const k=parseInt(localStorage.getItem("bookmemo_visit_count")||"0")+1;localStorage.setItem("bookmemo_visit_count",k.toString())}}else localStorage.setItem("bookmemo_visit_count","1");localStorage.setItem("bookmemo_last_visit",R.toString()),x(R)},[]);const b=O.useCallback(async()=>{if(Is.IS_DEVELOPMENT())return console.log("Service Worker registration skipped in development environment"),null;try{const R=Is.SW_JS(),B=await navigator.serviceWorker.register(R);return i(B),console.log("Service Worker registered:",B),B.addEventListener("updatefound",()=>{const N=B.installing;N&&N.addEventListener("statechange",()=>{N.state==="installed"&&navigator.serviceWorker.controller&&console.log("New Service Worker available")})}),B}catch(R){return console.error("Service Worker registration failed:",R),console.warn("Service Worker registration failed, but app will continue without PWA features"),null}},[]);O.useEffect(()=>{if(typeof window>"u"||typeof localStorage>"u")return;const R=k=>{k.preventDefault(),s(k),c(!0)},B=()=>{f(!0),c(!1),s(null),console.log("PWA was installed"),localStorage.setItem("bookmemo_installed","true"),localStorage.setItem("bookmemo_install_date",Date.now().toString())};return window.addEventListener("beforeinstallprompt",R),window.addEventListener("appinstalled",B),localStorage.getItem("bookmemo_installed")==="true"&&(f(!0),c(!1)),()=>{window.removeEventListener("beforeinstallprompt",R),window.removeEventListener("appinstalled",B)}},[]);const A=O.useCallback(async()=>{if(a){a.prompt();const{outcome:R}=await a.userChoice;console.log(R==="accepted"?"User accepted the install prompt":"User dismissed the install prompt"),s(null),c(!1)}},[a]),E=O.useCallback(()=>{if(d||!o)return!1;const R=parseInt(localStorage.getItem("bookmemo_visit_count")||"0"),B=parseInt(localStorage.getItem("bookmemo_dismiss_count")||"0");return R>=1&&p>=5&&B<3},[d,o,p]),S=O.useCallback(()=>{if(d)return!1;const R=/iPad|iPhone|iPod/.test(navigator.userAgent),B=/Safari/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent);return R&&B},[d]),T=O.useCallback(()=>{if(typeof localStorage>"u")return;const R=parseInt(localStorage.getItem("bookmemo_dismiss_count")||"0")+1;localStorage.setItem("bookmemo_dismiss_count",R.toString())},[]),I=O.useCallback(async()=>{if(typeof window>"u"||!("Notification"in window))return"denied";try{return await Notification.requestPermission()}catch(R){return console.warn("Notification permission request failed:",R),"denied"}},[]),P=O.useCallback((R,B={})=>{if(typeof window>"u"||!("Notification"in window)||Notification.permission!=="granted")return null;try{const N=Is.ICON_192();return new Notification(R,{icon:N,badge:N,...B})}catch(N){return console.warn("Notification send failed:",N),null}},[]),F=O.useCallback(async()=>{r&&await r.update()},[r]),M=O.useCallback(async()=>{if(!(typeof window>"u"||!("caches"in window)))try{const R=await caches.keys();await Promise.all(R.map(B=>caches.delete(B)))}catch(R){console.warn("Cache clear failed:",R)}},[]),D=O.useCallback(()=>{window.location.reload()},[]);return{isOnline:e,isInstallable:o,isInstalled:d,swRegistration:r,userEngagement:p,lastVisitTime:m,shouldShowInstallPrompt:E(),shouldShowManualInstallGuide:S(),registerServiceWorker:b,installApp:A,requestNotificationPermission:I,sendNotification:P,checkForUpdates:F,clearCache:M,reloadApp:D,recordInstallPromptDismiss:T}},Wue=()=>{if(!(typeof window<"u"&&"serviceWorker"in navigator&&"PushManager"in window))return null;try{const{isOnline:e,isInstallable:n,isInstalled:r,installApp:i,shouldShowInstallPrompt:a,shouldShowManualInstallGuide:s,recordInstallPromptDismiss:o}=MA(),[c,d]=O.useState(!1),[f,p]=O.useState(!1),[g,m]=O.useState(!1),[x,b]=O.useState(!1);O.useEffect(()=>{p(!e)},[e]);const A=async()=>{try{await i(),d(!1),m(!1)}catch(F){console.error("Installation failed:",F)}},E=()=>{d(!1),o&&o()},S=()=>{m(!1),o&&o()},T=()=>{p(!1)},I=()=>{b(!1),o&&o()},P=[{icon:v.jsx(y5,{}),title:"",description:""},{icon:v.jsx(v5,{}),title:"",description:""},{icon:v.jsx(x5,{}),title:"",description:""}];return v.jsxs(v.Fragment,{children:[v.jsx(jc,{open:c,anchorOrigin:{vertical:"bottom",horizontal:"center"},sx:{mb:8},children:v.jsx(bi,{severity:"info",action:v.jsxs(re,{sx:{display:"flex",alignItems:"center",gap:1},children:[v.jsx(ze,{color:"inherit",size:"small",startIcon:v.jsx(WC,{}),onClick:A,"data-testid":"pwa-install-button",variant:"contained",sx:{backgroundColor:"primary.main",color:"white","&:hover":{backgroundColor:"primary.dark"}},children:""}),v.jsx(Gr,{"aria-label":"close",color:"inherit",size:"small",onClick:E,children:v.jsx(Lg,{fontSize:"inherit"})})]}),sx:{width:"100%"},children:v.jsx(te,{variant:"body2",children:"BookMemo"})})}),v.jsx(jc,{open:g,anchorOrigin:{vertical:"bottom",horizontal:"center"},sx:{mb:8,width:"100%",maxWidth:"600px"},children:v.jsx(Sn,{sx:{width:"100%",boxShadow:3},children:v.jsxs(Cn,{sx:{p:2},children:[v.jsxs(re,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",mb:2},children:[v.jsx(te,{variant:"h6",component:"h2",sx:{fontWeight:"bold"},children:" BookMemo"}),v.jsx(Gr,{size:"small",onClick:S,sx:{mt:-.5},children:v.jsx(Lg,{})})]}),v.jsx(te,{variant:"body2",sx:{mb:2,color:"text.secondary"},children:""}),v.jsx(Fs,{direction:"row",spacing:1,sx:{mb:2,flexWrap:"wrap",gap:1},children:P.map((F,M)=>v.jsx(dn,{icon:F.icon,label:F.title,size:"small",variant:"outlined",sx:{fontSize:"0.75rem"}},M))}),v.jsxs(re,{sx:{display:"flex",gap:1,justifyContent:"flex-end"},children:[v.jsx(ze,{variant:"outlined",size:"small",onClick:S,children:""}),v.jsx(ze,{variant:"contained",size:"small",startIcon:v.jsx(WC,{}),onClick:A,sx:{backgroundColor:"primary.main","&:hover":{backgroundColor:"primary.dark"}},children:""})]})]})})}),v.jsx(jc,{open:f,anchorOrigin:{vertical:"top",horizontal:"center"},children:v.jsx(bi,{severity:"warning",icon:v.jsx(w5,{}),action:v.jsx(Gr,{"aria-label":"close",color:"inherit",size:"small",onClick:T,children:v.jsx(Lg,{fontSize:"inherit"})}),sx:{width:"100%"},"data-testid":"pwa-offline-alert",children:v.jsx(te,{variant:"body2",children:""})})}),v.jsx(jc,{open:e&&f,anchorOrigin:{vertical:"top",horizontal:"center"},autoHideDuration:3e3,onClose:T,children:v.jsx(bi,{severity:"success",icon:v.jsx(b5,{}),sx:{width:"100%"},children:v.jsx(te,{variant:"body2",children:""})})}),v.jsx(jc,{open:x,anchorOrigin:{vertical:"bottom",horizontal:"center"},sx:{mb:8,width:"100%",maxWidth:"600px"},children:v.jsx(Sn,{sx:{width:"100%",boxShadow:3},children:v.jsxs(Cn,{sx:{p:2},children:[v.jsxs(re,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",mb:2},children:[v.jsx(te,{variant:"h6",component:"h2",sx:{fontWeight:"bold"},children:" BookMemo"}),v.jsx(Gr,{size:"small",onClick:I,sx:{mt:-.5},children:v.jsx(Lg,{})})]}),v.jsx(te,{variant:"body2",sx:{mb:2,color:"text.secondary"},children:"iPhoneBookMemo"}),v.jsxs(re,{sx:{mb:2},children:[v.jsx(te,{variant:"body2",sx:{fontWeight:"bold",mb:1},children:"1. "}),v.jsx(te,{variant:"body2",sx:{mb:1,pl:2},children:"Safari"}),v.jsx(te,{variant:"body2",sx:{fontWeight:"bold",mb:1},children:"2. "}),v.jsx(te,{variant:"body2",sx:{mb:1,pl:2},children:""}),v.jsx(te,{variant:"body2",sx:{fontWeight:"bold",mb:1},children:"3. "}),v.jsx(te,{variant:"body2",sx:{pl:2},children:""})]}),v.jsx(Fs,{direction:"row",spacing:1,sx:{mb:2,flexWrap:"wrap",gap:1},children:P.map((F,M)=>v.jsx(dn,{icon:F.icon,label:F.title,size:"small",variant:"outlined",sx:{fontSize:"0.75rem"}},M))}),v.jsxs(re,{sx:{display:"flex",gap:1,justifyContent:"flex-end"},children:[v.jsx(ze,{variant:"outlined",size:"small",onClick:I,children:""}),v.jsx(ze,{variant:"contained",size:"small",onClick:I,sx:{backgroundColor:"primary.main","&:hover":{backgroundColor:"primary.dark"}},children:""})]})]})})})]})}catch(e){return console.warn("PWA hook error in PWAInstallPrompt, skipping PWA features:",e),null}},Yue=()=>{try{return!(typeof wi>"u"||!wi.useState||!wi.useContext||typeof window>"u"||typeof navigator>"u")}catch(t){return console.warn("React context check failed:",t),!1}},que=t=>function(n){const[r,i]=wi.useState(!1),[a,s]=wi.useState(0),o=20,c=50;return wi.useEffect(()=>{const d=()=>{if(Yue()){i(!0);return}a<o?(s(f=>f+1),setTimeout(d,c)):(console.warn("React context initialization timeout, proceeding with fallback"),i(!0))};d()},[a]),r?v.jsx(t,{...n}):v.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",fontSize:"1rem",color:"#666"},children:"..."})};function Xue(t,e){const n=g6(e),r=n[t]||n[k1],i=r.background.image==="none"?"none":r.background.image,a=r.background.pattern==="none"?"none":r.background.pattern,s=i!=="none",o=a!=="none",c=r.glassEffect??{opacity:.75,blur:"20px",saturate:"180%"},d=_5({palette:{mode:"light",background:{default:r.backgroundColor,paper:"#ffffff"},primary:{main:"#1976d2"},secondary:{main:"#f50057"},success:{main:"#2e7d32",light:"#4caf50",dark:"#1b5e20"},warning:{main:"#ed6c02",light:"#ff9800",dark:"#e65100"},info:{main:"#0288d1",light:"#03a9f4",dark:"#01579b"},error:{main:"#d32f2f",light:"#ef5350",dark:"#c62828"},text:{primary:"#222"},decorative:{brown:{main:"rgba(139, 69, 19, 1)",light:"rgba(139, 69, 19, 0.2)",lighter:"rgba(139, 69, 19, 0.1)",border:"rgba(139, 69, 19, 0.25)",borderHover:"rgba(139, 69, 19, 0.3)"},gold:{accent:"rgba(184, 134, 11, 0.15)",subtle:"rgba(184, 134, 11, 0.08)",stroke:"rgba(184, 134, 11, 0.4)",strokeLight:"rgba(184, 134, 11, 0.3)"},memo:{main:"rgba(123, 104, 238, 1)",light:"rgba(123, 104, 238, 0.25)",lighter:"rgba(123, 104, 238, 0.12)",border:"rgba(123, 104, 238, 0.25)",borderHover:"rgba(123, 104, 238, 0.4)",shadow:"rgba(123, 104, 238, 0.08)",shadowHover:"rgba(123, 104, 238, 0.12)"},neutral:{light:"rgba(100, 100, 100, 0.15)",lighter:"rgba(100, 100, 100, 0.08)",border:"rgba(100, 100, 100, 0.2)",borderHover:"rgba(100, 100, 100, 0.25)"}},custom:{pageHeader:{brown:{dark:"#8B4513",medium:"#A0522D",light:"#CD853F"},text:{title:"#FFF8DC",subtitle:"#F5F5DC"}}}},typography:{fontFamily:"Segoe UI, Helvetica Neue, Arial, sans-serif",h1:{fontSize:"1.8rem","@media (min-width:600px)":{fontSize:"2.5rem"}},h2:{fontSize:"1.5rem","@media (min-width:600px)":{fontSize:"2rem"}},h3:{fontSize:"1.3rem","@media (min-width:600px)":{fontSize:"1.6rem"}},h4:{fontSize:"1.1rem","@media (min-width:600px)":{fontSize:"1.4rem"}},h5:{fontSize:"1rem","@media (min-width:600px)":{fontSize:"1.2rem"}},h6:{fontSize:"0.9rem","@media (min-width:600px)":{fontSize:"1.1rem"}},body1:{fontSize:"0.9rem","@media (min-width:600px)":{fontSize:"1rem"}},body2:{fontSize:"0.8rem","@media (min-width:600px)":{fontSize:"0.9rem"}},caption:{fontSize:"0.7rem","@media (min-width:600px)":{fontSize:"0.8rem"}}},components:{MuiCssBaseline:{styleOverrides:{"#app-scroll-container":{position:"relative",backgroundColor:r.backgroundColor,backgroundImage:!s&&!o?"none":s&&o?"var(--bm-library-image), var(--bm-library-bg)":s?"var(--bm-library-image)":"var(--bm-library-bg)",backgroundBlendMode:s||o?"normal, overlay":"normal",backgroundRepeat:s&&o?"no-repeat, repeat":o?"repeat":"no-repeat",backgroundSize:s&&o?"cover, 320px 320px":s?"cover":o?"320px 320px":"auto",backgroundPosition:s&&o?"center center, 0 var(--bg-offset, 0px)":o?"0 var(--bg-offset, 0px)":"center center",backgroundAttachment:"fixed, fixed",minHeight:"100vh",width:"100%","&::before":{content:'""',position:"fixed",inset:0,background:`linear-gradient(
                180deg,
                ${r.overlay.top} 0%,
                ${r.overlay.mid} 50%,
                ${r.overlay.bottom} 100%
              )`,pointerEvents:"none",zIndex:0},"& > *":{position:"relative",zIndex:1}}}},MuiTextField:{styleOverrides:{root:{marginBottom:"8px","@media (min-width:600px)":{marginBottom:"16px"},"& .MuiInputBase-root":{fontSize:"0.9rem","@media (min-width:600px)":{fontSize:"1rem"},backgroundColor:"#ffffff"}}},defaultProps:{size:"small",margin:"dense"}},MuiButton:{styleOverrides:{root:{fontSize:"0.9rem",padding:"8px 16px","@media (min-width:600px)":{fontSize:"1rem",padding:"10px 20px"}}},defaultProps:{size:"medium"}},MuiCard:{styleOverrides:{root:{height:"100%",display:"flex",flexDirection:"column",marginBottom:"8px","@media (min-width:600px)":{marginBottom:"16px"},borderRadius:16,border:"1px solid rgba(15, 23, 42, 0.08)",backgroundColor:`rgba(255, 255, 255, ${c.opacity})`,backdropFilter:`saturate(${c.saturate}) blur(${c.blur})`,boxShadow:"0 10px 28px rgba(15, 23, 42, 0.08)",transition:"box-shadow 160ms ease, transform 160ms ease","&:hover":{boxShadow:"0 16px 36px rgba(15, 23, 42, 0.12)"}}}},MuiCardContent:{styleOverrides:{root:{flex:1,display:"flex",flexDirection:"column",padding:"12px","@media (min-width:600px)":{padding:"16px"},"&:last-child":{paddingBottom:"12px","@media (min-width:600px)":{paddingBottom:"16px"}}}}},MuiPaper:{styleOverrides:{root:{padding:"12px","@media (min-width:600px)":{padding:"16px"},borderRadius:16,border:"1px solid rgba(15, 23, 42, 0.08)",backgroundColor:`rgba(255, 255, 255, ${c.opacity})`,backdropFilter:`saturate(${c.saturate}) blur(${c.blur})`,boxShadow:"0 10px 28px rgba(15, 23, 42, 0.08)"}}},MuiMenu:{styleOverrides:{paper:{borderRadius:12,border:"1px solid rgba(15, 23, 42, 0.12)",backgroundColor:"rgba(255, 255, 255, 0.98)",backdropFilter:"none",boxShadow:"0 14px 40px rgba(15, 23, 42, 0.18)",padding:0}}},MuiPopover:{styleOverrides:{paper:{borderRadius:12,border:"1px solid rgba(15, 23, 42, 0.12)",backgroundColor:"rgba(255, 255, 255, 0.98)",backdropFilter:"none",boxShadow:"0 14px 40px rgba(15, 23, 42, 0.18)",padding:0}}},MuiAutocomplete:{styleOverrides:{root:{marginBottom:"8px","@media (min-width:600px)":{marginBottom:"16px"}}}},MuiChip:{styleOverrides:{root:{fontSize:"0.8rem",height:"24px","@media (min-width:600px)":{fontSize:"0.9rem",height:"32px"}}}},MuiDialog:{styleOverrides:{paper:{margin:"16px",width:"calc(100% - 32px)",maxWidth:"400px","@media (min-width:600px)":{margin:"32px",width:"calc(100% - 64px)",maxWidth:"600px"},borderRadius:16,border:"1px solid rgba(15, 23, 42, 0.12)",backgroundColor:"#ffffff",backdropFilter:"none",boxShadow:"0 20px 60px rgba(15, 23, 42, 0.22)",padding:0}}},MuiBottomNavigation:{styleOverrides:{root:{height:"56px","@media (min-width:600px)":{height:"64px"}}}},MuiBottomNavigationAction:{styleOverrides:{root:{fontSize:"0.7rem","@media (min-width:600px)":{fontSize:"0.8rem"}}}},MuiAlert:{styleOverrides:{root:{backgroundColor:"rgba(255, 255, 255, 0.85)",backdropFilter:"blur(8px) saturate(140%)"}}}},breakpoints:{values:{xs:0,sm:600,md:900,lg:1200,xl:1536}},spacing:M=>`${4*M}px`}),f=r.bookAccent??r.cardAccent??"brown",p=r.memoAccent??r.cardAccent??"memo",g=r.cardAccent??f,m=r.bookDecorations??r.cardDecorations??{corners:!0,innerBorder:!0,centerLine:!0},x=r.memoDecorations??r.cardDecorations??{corners:!0,innerBorder:!0,centerLine:!1},b=r.cardDecorations??m,A=r.glassEffect??{opacity:.75,blur:"20px",saturate:"180%"},E=r.pageHeader??{backgroundImage:"paper",goldOverlay:!0,centerLine:!0,borderRadius:{xs:16,sm:20},accentKey:"brown"},S="0 8px 32px rgba(0, 0, 0, 0.12), 0 2px 8px rgba(0, 0, 0, 0.08), inset 0 1px 0 rgba(255, 255, 255, 0.5)",T="0 12px 40px rgba(0, 0, 0, 0.16), 0 4px 12px rgba(0, 0, 0, 0.12), inset 0 1px 0 rgba(255, 255, 255, 0.6)",I=r.cardShadow??S,P=r.cardShadowHover??T,F=r.chartColors??{bar:"#42a5f5",memo:"#9c27b0"};return d.custom={...d.custom,bookAccent:f,memoAccent:p,cardAccent:g,bookDecorations:m,memoDecorations:x,cardDecorations:b,glassEffect:A,pageHeader:E,cardShadow:I,cardShadowHover:P,chartColors:F,backgroundVars:{"--bm-library-image":s?i:"none","--bm-library-bg":o?a:"none"}},d}function Kue({children:t}){var i;const{settings:e,loading:n}=p6(),r=O.useMemo(()=>{var s;const a=n?k1:((s=e.preferences)==null?void 0:s.themePresetId)||k1;return Xue(a,ti)},[(i=e.preferences)==null?void 0:i.themePresetId,n]);return v.jsxs(A5,{theme:r,children:[v.jsx(E5,{}),t]})}const bo={saveError:(t,e="")=>{try{const n={timestamp:new Date().toISOString(),error:(t==null?void 0:t.message)||(t==null?void 0:t.toString())||"Unknown error",stack:(t==null?void 0:t.stack)||"",context:e,url:typeof window<"u"?window.location.href:"",userAgent:typeof navigator<"u"?navigator.userAgent:""},r=JSON.parse(localStorage.getItem("bookmemo_error_logs")||"[]");return r.push(n),r.length>10&&r.splice(0,r.length-10),localStorage.setItem("bookmemo_error_logs",JSON.stringify(r)),console.error(" PERSISTENT ERROR LOG:",n),n}catch(n){console.error("Error saving error log:",n)}},getErrors:()=>{try{return JSON.parse(localStorage.getItem("bookmemo_error_logs")||"[]")}catch{return[]}},clearErrors:()=>{localStorage.removeItem("bookmemo_error_logs")}},Que=()=>{typeof window>"u"||(window.addEventListener("error",t=>{bo.saveError(t.error,"Global Error Handler")}),window.addEventListener("unhandledrejection",t=>{bo.saveError(t.reason,"Unhandled Promise Rejection")}),window.addEventListener("beforeunload",()=>{bo.getErrors().length>0&&console.log(" Error logs available in localStorage: bookmemo_error_logs")}))};function Zue({containerId:t="app-scroll-container",cssVarName:e="--bg-offset",factor:n=.45}={}){O.useEffect(()=>{const r=document.getElementById(t);if(!r)return;const i=typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-reduced-motion: reduce)").matches;let a=0;const s=()=>{a||(a=window.requestAnimationFrame(()=>{a=0;const o=r.scrollTop||0,c=i?0:Math.round(o*n);r.style.setProperty(e,`${c}px`)}))};return s(),r.addEventListener("scroll",s,{passive:!0}),()=>{r.removeEventListener("scroll",s),a&&window.cancelAnimationFrame(a)}},[t,e,n])}function gd({children:t}){const{user:e,loading:n}=jn(),r=au();return O.useEffect(()=>{!n&&!e&&console.warn(" Authentication required for:",r.pathname)},[e,n,r.pathname]),n?v.jsx(Bo,{variant:"fullPage",message:"...","data-testid":"auth-loading"}):e?t:(console.warn(" Unauthenticated access attempt, redirecting to login"),v.jsx(TR,{to:"/login"}))}function Jue(){const t=No(),e=au(),[n,r]=O.useState(0);return O.useEffect(()=>{e.pathname.startsWith("/add")?r(1):e.pathname.startsWith("/tags")?r(2):e.pathname.startsWith("/stats")?r(3):e.pathname.startsWith("/settings")?r(4):r(0)},[e.pathname]),v.jsxs(S5,{value:n,onChange:(i,a)=>{r(a),a===0&&t("/"),a===1&&t("/add"),a===2&&t("/tags"),a===3&&t("/stats"),a===4&&t("/settings")},showLabels:!0,sx:{position:"fixed",bottom:0,left:0,right:0,zIndex:1e3,backgroundColor:"background.paper",borderTop:1,borderColor:"divider",height:{xs:"64px",sm:"72px"},"& .MuiBottomNavigationAction-root":{minWidth:{xs:"60px",sm:"80px"},padding:{xs:"6px 4px",sm:"8px 6px"}},"& .MuiBottomNavigationAction-label":{fontSize:{xs:"0.7rem",sm:"0.8rem"},marginTop:{xs:"2px",sm:"4px"}},"& .MuiBottomNavigationAction-iconOnly":{fontSize:{xs:"1.5rem",sm:"1.75rem"}}},children:[v.jsx(Ih,{label:"",icon:v.jsx(C5,{}),"data-testid":"bottom-nav-list",sx:{"&.Mui-selected":{color:"primary.main"}}}),v.jsx(Ih,{label:"",icon:v.jsx(T5,{}),"data-testid":"bottom-nav-add",sx:{"&.Mui-selected":{color:"primary.main"}}}),v.jsx(Ih,{label:"",icon:v.jsx(L1,{}),"data-testid":"bottom-nav-search",sx:{"&.Mui-selected":{color:"primary.main"}}}),v.jsx(Ih,{label:"",icon:v.jsx(I5,{}),"data-testid":"bottom-nav-stats",sx:{"&.Mui-selected":{color:"primary.main"}}}),v.jsx(Ih,{label:"",icon:v.jsx(CR,{}),"data-testid":"bottom-nav-settings",sx:{"&.Mui-selected":{color:"primary.main"}}})]})}function ede(){var d;const t=au(),e=di(),{user:n}=jn(),{setGlobalError:r}=O.useContext(Pr),{isStandalone:i}=MA(),{handleBack:a,handleForward:s}=KP(),o=((d=e.custom)==null?void 0:d.backgroundVars)||{"--bm-library-image":`url("${Is.LIBRARY_BACKGROUND()}")`,"--bm-library-bg":`url("${Is.LIBRARY_PATTERN()}")`},c=t.pathname.startsWith("/login")||t.pathname.startsWith("/signup")||!n;return O.useEffect(()=>{if(!i)return;let f=0,p=0,g=0,m=0,x=!1;const b=100,A=T=>{f=T.changedTouches[0].screenX,g=T.changedTouches[0].screenY;const I=document.elementFromPoint(f,g);x=(I==null?void 0:I.closest("[data-allow-local-swipe]"))!==null},E=T=>{p=T.changedTouches[0].screenX,m=T.changedTouches[0].screenY,S()},S=()=>{const T=p-f,I=Math.abs(m-g),P=b;x||Math.abs(T)>P&&Math.abs(T)>I&&(T>0?a():s())};return document.addEventListener("touchstart",A,{passive:!0}),document.addEventListener("touchend",E,{passive:!0}),()=>{document.removeEventListener("touchstart",A),document.removeEventListener("touchend",E)}},[i,a,s]),O.useEffect(()=>{Que()},[]),O.useEffect(()=>{const f=document.getElementById("app-scroll-container");f&&f.scrollTo(0,0)},[t.pathname]),Zue({factor:.45}),O.useEffect(()=>{const f=x=>{console.error("Global error caught:",x.error),bo.saveError(x.error,"AppRoutes Global Error"),x.error&&x.error.message&&x.error.message.includes("404")?r&&r(""):r&&r("")},p=x=>{console.error("Unhandled promise rejection:",x.reason),bo.saveError(x.reason,"AppRoutes Unhandled Promise Rejection"),x.reason&&x.reason.message&&(x.reason.message.includes("404")||x.reason.message.includes("Failed to fetch")),r&&r("")},g=x=>{x.target&&x.target.src&&(console.error("Resource loading error:",x.target.src),bo.saveError(new Error(`Resource loading failed: ${x.target.src}`),"AppRoutes Resource Error"),(x.target.src.includes("sw.js")||x.target.src.includes("manifest.webmanifest"))&&r&&r(""))},m=x=>{x.target&&x.target.src&&x.target.src.includes("404")&&(console.error("404 Error detected:",x.target.src),bo.saveError(new Error(`404 Error: ${x.target.src} - SPA routing issue detected`),"AppRoutes 404 Error"),r&&r("SPA"))};return window.addEventListener("error",m,!0),window.addEventListener("error",f),window.addEventListener("unhandledrejection",p),window.addEventListener("error",g,!0),()=>{window.removeEventListener("error",f),window.removeEventListener("unhandledrejection",p),window.removeEventListener("error",g,!0)}},[r]),v.jsxs(v.Fragment,{children:[v.jsx(re,{id:"app-scroll-container",sx:{height:"100vh",overflowY:"auto",WebkitOverflowScrolling:"touch",pb:c?0:{xs:"64px",sm:"72px"},"--bm-noise-bg":`url("${Is.NOISE_TEXTURE()}")`,...o},children:v.jsxs(k5,{children:[v.jsx(mo,{path:"/login",element:v.jsx(nU,{})}),v.jsx(mo,{path:"/signup",element:v.jsx(rU,{})}),v.jsx(mo,{path:"/",element:v.jsx(gd,{children:v.jsx(xU,{})})}),v.jsx(mo,{path:"/add",element:v.jsx(gd,{children:v.jsx(gG,{})})}),v.jsx(mo,{path:"/book/:id",element:v.jsx(gd,{children:v.jsx(gee,{})})}),v.jsx(mo,{path:"/tags",element:v.jsx(gd,{children:v.jsx(Bee,{})})}),v.jsx(mo,{path:"/stats",element:v.jsx(gd,{children:v.jsx(Hue,{})})}),v.jsx(mo,{path:"/settings",element:v.jsx(gd,{children:v.jsx(Gue,{})})}),v.jsx(mo,{path:"*",element:v.jsx(TR,{to:"/"})})]})}),!c&&v.jsx(Jue,{})]})}function tde(){return v.jsx(tU,{children:v.jsx(gU,{children:v.jsx(P5,{children:v.jsx($ue,{children:v.jsxs(Kue,{children:[v.jsx(nde,{}),v.jsx(ede,{}),typeof window<"u"&&"serviceWorker"in navigator&&!Is.IS_DEVELOPMENT()&&v.jsx(Wue,{})]})})})})})}function nde(){if(Is.IS_DEVELOPMENT()||!("serviceWorker"in navigator&&"PushManager"in window))return null;try{const{registerServiceWorker:e}=MA();return O.useEffect(()=>{e().catch(n=>{console.warn("Service Worker registration failed in PWAProvider:",n),bo.saveError(n,"PWAProvider Service Worker Registration")})},[e]),null}catch(e){return console.warn("PWA hook error, skipping PWA initialization:",e),bo.saveError(e,"PWAProvider Hook Error"),null}}const rde=que(tde);j5.createRoot(document.getElementById("root")).render(v.jsx(O.StrictMode,{children:v.jsx(rde,{})}));

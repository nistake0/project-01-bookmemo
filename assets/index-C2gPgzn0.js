var EN=Object.defineProperty;var SN=(n,e,t)=>e in n?EN(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var xe=(n,e,t)=>SN(n,typeof e!="symbol"?e+"":e,t);import{r as M,j as v,B as ne,T as te,a as ht,b as $e,C as kn,c as Nn,d as aR,e as dn,P as qn,k as sR,R as yi,D as zi,f as aa,g as $i,A as vi,h as Gi,i as D1,l as Ea,m as CN,n as Nx,o as oR,S as R1,p as lR,L as Qw,q as Zw,s as TN,t as om,I as $r,u as Em,v as Uh,H as IN,F as Mi,w as Ca,x as Ya,M as Zt,y as Ns,z as DN,E as RN,G as M1,J as Ud,K as NC,N as Ls,O as Sm,Q as Sl,U as L2,V as MN,W as Bc,X as ON,Y as cR,Z as lm,_ as PN,$ as kN,a0 as H,a1 as Be,a2 as bt,a3 as Ul,a4 as Mt,a5 as Ot,a6 as Ma,a7 as Ct,a8 as Ut,a9 as ke,aa as xt,ab as Hd,ac as He,ad as n0,ae as oi,af as Xn,ag as Bs,ah as uR,ai as NN,aj as Rd,ak as dR,al as LN,am as BN,an as Oa,ao as N0,ap as FN,aq as VN,ar as xo,as as Fc,at as ru,au as O1,av as fR,aw as jN,ax as UN,ay as HN,az as hR,aA as LC,aB as zN,aC as ee,aD as pR,aE as gR,aF as $N,aG as BC,aH as GN,aI as WN,aJ as YN,aK as qN,aL as XN,aM as KN,aN as QN,aO as mR,aP as yR,aQ as ZN,aR as JN,aS as e5,aT as t5,aU as FC,aV as Og,aW as n5,aX as r5,aY as i5,aZ as vR,a_ as a5,a$ as s5,b0 as Pg,b1 as o5,b2 as l5,b3 as c5}from"./mui-vendor-CmPorpbx.js";import{r as Jw,a as u5,g as d5}from"./react-vendor-DJG_os-6.js";import{u as Hl,a as VC,b as f5,c as iu,d as h5,H as p5,R as g5,e as ll,N as xR}from"./utils-vendor-Dxg47-Vu.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function t(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=t(i);fetch(i.href,a)}})();var Lx={exports:{}},Ch={},Bx={exports:{}},Fx={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jC;function m5(){return jC||(jC=1,function(n){function e(G,W){var K=G.length;G.push(W);e:for(;0<K;){var Z=K-1>>>1,fe=G[Z];if(0<i(fe,W))G[Z]=W,G[K]=fe,K=Z;else break e}}function t(G){return G.length===0?null:G[0]}function r(G){if(G.length===0)return null;var W=G[0],K=G.pop();if(K!==W){G[0]=K;e:for(var Z=0,fe=G.length,ge=fe>>>1;Z<ge;){var ve=2*(Z+1)-1,be=G[ve],Pe=ve+1,ue=G[Pe];if(0>i(be,K))Pe<fe&&0>i(ue,be)?(G[Z]=ue,G[Pe]=K,Z=Pe):(G[Z]=be,G[ve]=K,Z=ve);else if(Pe<fe&&0>i(ue,K))G[Z]=ue,G[Pe]=K,Z=Pe;else break e}}return W}function i(G,W){var K=G.sortIndex-W.sortIndex;return K!==0?K:G.id-W.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var s=Date,o=s.now();n.unstable_now=function(){return s.now()-o}}var c=[],d=[],f=1,p=null,g=3,m=!1,x=!1,b=!1,A=!1,E=typeof setTimeout=="function"?setTimeout:null,C=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;function D(G){for(var W=t(d);W!==null;){if(W.callback===null)r(d);else if(W.startTime<=G)r(d),W.sortIndex=W.expirationTime,e(c,W);else break;W=t(d)}}function k(G){if(b=!1,D(G),!x)if(t(c)!==null)x=!0,B||(B=!0,P());else{var W=t(d);W!==null&&X(k,W.startTime-G)}}var B=!1,O=-1,I=5,R=-1;function F(){return A?!0:!(n.unstable_now()-R<I)}function N(){if(A=!1,B){var G=n.unstable_now();R=G;var W=!0;try{e:{x=!1,b&&(b=!1,C(O),O=-1),m=!0;var K=g;try{t:{for(D(G),p=t(c);p!==null&&!(p.expirationTime>G&&F());){var Z=p.callback;if(typeof Z=="function"){p.callback=null,g=p.priorityLevel;var fe=Z(p.expirationTime<=G);if(G=n.unstable_now(),typeof fe=="function"){p.callback=fe,D(G),W=!0;break t}p===t(c)&&r(c),D(G)}else r(c);p=t(c)}if(p!==null)W=!0;else{var ge=t(d);ge!==null&&X(k,ge.startTime-G),W=!1}}break e}finally{p=null,g=K,m=!1}W=void 0}}finally{W?P():B=!1}}}var P;if(typeof T=="function")P=function(){T(N)};else if(typeof MessageChannel<"u"){var V=new MessageChannel,q=V.port2;V.port1.onmessage=N,P=function(){q.postMessage(null)}}else P=function(){E(N,0)};function X(G,W){O=E(function(){G(n.unstable_now())},W)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(G){G.callback=null},n.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<G?Math.floor(1e3/G):5},n.unstable_getCurrentPriorityLevel=function(){return g},n.unstable_next=function(G){switch(g){case 1:case 2:case 3:var W=3;break;default:W=g}var K=g;g=W;try{return G()}finally{g=K}},n.unstable_requestPaint=function(){A=!0},n.unstable_runWithPriority=function(G,W){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var K=g;g=G;try{return W()}finally{g=K}},n.unstable_scheduleCallback=function(G,W,K){var Z=n.unstable_now();switch(typeof K=="object"&&K!==null?(K=K.delay,K=typeof K=="number"&&0<K?Z+K:Z):K=Z,G){case 1:var fe=-1;break;case 2:fe=250;break;case 5:fe=1073741823;break;case 4:fe=1e4;break;default:fe=5e3}return fe=K+fe,G={id:f++,callback:W,priorityLevel:G,startTime:K,expirationTime:fe,sortIndex:-1},K>Z?(G.sortIndex=K,e(d,G),t(c)===null&&G===t(d)&&(b?(C(O),O=-1):b=!0,X(k,K-Z))):(G.sortIndex=fe,e(c,G),x||m||(x=!0,B||(B=!0,P()))),G},n.unstable_shouldYield=F,n.unstable_wrapCallback=function(G){var W=g;return function(){var K=g;g=W;try{return G.apply(this,arguments)}finally{g=K}}}}(Fx)),Fx}var UC;function y5(){return UC||(UC=1,Bx.exports=m5()),Bx.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var HC;function v5(){if(HC)return Ch;HC=1;var n=y5(),e=Jw(),t=u5();function r(l){var u="https://react.dev/errors/"+l;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var h=2;h<arguments.length;h++)u+="&args[]="+encodeURIComponent(arguments[h])}return"Minified React error #"+l+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(l){return!(!l||l.nodeType!==1&&l.nodeType!==9&&l.nodeType!==11)}function a(l){var u=l,h=l;if(l.alternate)for(;u.return;)u=u.return;else{l=u;do u=l,(u.flags&4098)!==0&&(h=u.return),l=u.return;while(l)}return u.tag===3?h:null}function s(l){if(l.tag===13){var u=l.memoizedState;if(u===null&&(l=l.alternate,l!==null&&(u=l.memoizedState)),u!==null)return u.dehydrated}return null}function o(l){if(a(l)!==l)throw Error(r(188))}function c(l){var u=l.alternate;if(!u){if(u=a(l),u===null)throw Error(r(188));return u!==l?null:l}for(var h=l,y=u;;){var _=h.return;if(_===null)break;var S=_.alternate;if(S===null){if(y=_.return,y!==null){h=y;continue}break}if(_.child===S.child){for(S=_.child;S;){if(S===h)return o(_),l;if(S===y)return o(_),u;S=S.sibling}throw Error(r(188))}if(h.return!==y.return)h=_,y=S;else{for(var U=!1,z=_.child;z;){if(z===h){U=!0,h=_,y=S;break}if(z===y){U=!0,y=_,h=S;break}z=z.sibling}if(!U){for(z=S.child;z;){if(z===h){U=!0,h=S,y=_;break}if(z===y){U=!0,y=S,h=_;break}z=z.sibling}if(!U)throw Error(r(189))}}if(h.alternate!==y)throw Error(r(190))}if(h.tag!==3)throw Error(r(188));return h.stateNode.current===h?l:u}function d(l){var u=l.tag;if(u===5||u===26||u===27||u===6)return l;for(l=l.child;l!==null;){if(u=d(l),u!==null)return u;l=l.sibling}return null}var f=Object.assign,p=Symbol.for("react.element"),g=Symbol.for("react.transitional.element"),m=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),b=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),E=Symbol.for("react.provider"),C=Symbol.for("react.consumer"),T=Symbol.for("react.context"),D=Symbol.for("react.forward_ref"),k=Symbol.for("react.suspense"),B=Symbol.for("react.suspense_list"),O=Symbol.for("react.memo"),I=Symbol.for("react.lazy"),R=Symbol.for("react.activity"),F=Symbol.for("react.memo_cache_sentinel"),N=Symbol.iterator;function P(l){return l===null||typeof l!="object"?null:(l=N&&l[N]||l["@@iterator"],typeof l=="function"?l:null)}var V=Symbol.for("react.client.reference");function q(l){if(l==null)return null;if(typeof l=="function")return l.$$typeof===V?null:l.displayName||l.name||null;if(typeof l=="string")return l;switch(l){case x:return"Fragment";case A:return"Profiler";case b:return"StrictMode";case k:return"Suspense";case B:return"SuspenseList";case R:return"Activity"}if(typeof l=="object")switch(l.$$typeof){case m:return"Portal";case T:return(l.displayName||"Context")+".Provider";case C:return(l._context.displayName||"Context")+".Consumer";case D:var u=l.render;return l=l.displayName,l||(l=u.displayName||u.name||"",l=l!==""?"ForwardRef("+l+")":"ForwardRef"),l;case O:return u=l.displayName||null,u!==null?u:q(l.type)||"Memo";case I:u=l._payload,l=l._init;try{return q(l(u))}catch{}}return null}var X=Array.isArray,G=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,W=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,K={pending:!1,data:null,method:null,action:null},Z=[],fe=-1;function ge(l){return{current:l}}function ve(l){0>fe||(l.current=Z[fe],Z[fe]=null,fe--)}function be(l,u){fe++,Z[fe]=l.current,l.current=u}var Pe=ge(null),ue=ge(null),Se=ge(null),Ae=ge(null);function Fe(l,u){switch(be(Se,u),be(ue,l),be(Pe,null),u.nodeType){case 9:case 11:l=(l=u.documentElement)&&(l=l.namespaceURI)?cC(l):0;break;default:if(l=u.tagName,u=u.namespaceURI)u=cC(u),l=uC(u,l);else switch(l){case"svg":l=1;break;case"math":l=2;break;default:l=0}}ve(Pe),be(Pe,l)}function ae(){ve(Pe),ve(ue),ve(Se)}function ye(l){l.memoizedState!==null&&be(Ae,l);var u=Pe.current,h=uC(u,l.type);u!==h&&(be(ue,l),be(Pe,h))}function pe(l){ue.current===l&&(ve(Pe),ve(ue)),Ae.current===l&&(ve(Ae),bh._currentValue=K)}var ie=Object.prototype.hasOwnProperty,Ve=n.unstable_scheduleCallback,we=n.unstable_cancelCallback,ze=n.unstable_shouldYield,Oe=n.unstable_requestPaint,Re=n.unstable_now,qe=n.unstable_getCurrentPriorityLevel,We=n.unstable_ImmediatePriority,Me=n.unstable_UserBlockingPriority,Ne=n.unstable_NormalPriority,ft=n.unstable_LowPriority,_t=n.unstable_IdlePriority,xn=n.log,Mn=n.unstable_setDisableYieldValue,rt=null,at=null;function Cn(l){if(typeof xn=="function"&&Mn(l),at&&typeof at.setStrictMode=="function")try{at.setStrictMode(rt,l)}catch{}}var Qe=Math.clz32?Math.clz32:tn,mt=Math.log,Nt=Math.LN2;function tn(l){return l>>>=0,l===0?32:31-(mt(l)/Nt|0)|0}var An=256,Tn=4194304;function qt(l){var u=l&42;if(u!==0)return u;switch(l&-l){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return l&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return l}}function qr(l,u,h){var y=l.pendingLanes;if(y===0)return 0;var _=0,S=l.suspendedLanes,U=l.pingedLanes;l=l.warmLanes;var z=y&134217727;return z!==0?(y=z&~S,y!==0?_=qt(y):(U&=z,U!==0?_=qt(U):h||(h=z&~l,h!==0&&(_=qt(h))))):(z=y&~S,z!==0?_=qt(z):U!==0?_=qt(U):h||(h=y&~l,h!==0&&(_=qt(h)))),_===0?0:u!==0&&u!==_&&(u&S)===0&&(S=_&-_,h=u&-u,S>=h||S===32&&(h&4194048)!==0)?u:_}function yt(l,u){return(l.pendingLanes&~(l.suspendedLanes&~l.pingedLanes)&u)===0}function Vn(l,u){switch(l){case 1:case 2:case 4:case 8:case 64:return u+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Zn(){var l=An;return An<<=1,(An&4194048)===0&&(An=256),l}function Xr(){var l=Tn;return Tn<<=1,(Tn&62914560)===0&&(Tn=4194304),l}function bi(l){for(var u=[],h=0;31>h;h++)u.push(l);return u}function or(l,u){l.pendingLanes|=u,u!==268435456&&(l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0)}function Ql(l,u,h,y,_,S){var U=l.pendingLanes;l.pendingLanes=h,l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0,l.expiredLanes&=h,l.entangledLanes&=h,l.errorRecoveryDisabledLanes&=h,l.shellSuspendCounter=0;var z=l.entanglements,Q=l.expirationTimes,le=l.hiddenUpdates;for(h=U&~h;0<h;){var Ce=31-Qe(h),Ie=1<<Ce;z[Ce]=0,Q[Ce]=-1;var de=le[Ce];if(de!==null)for(le[Ce]=null,Ce=0;Ce<de.length;Ce++){var he=de[Ce];he!==null&&(he.lane&=-536870913)}h&=~Ie}y!==0&&ca(l,y,0),S!==0&&_===0&&l.tag!==0&&(l.suspendedLanes|=S&~(U&~u))}function ca(l,u,h){l.pendingLanes|=u,l.suspendedLanes&=~u;var y=31-Qe(u);l.entangledLanes|=u,l.entanglements[y]=l.entanglements[y]|1073741824|h&4194090}function mu(l,u){var h=l.entangledLanes|=u;for(l=l.entanglements;h;){var y=31-Qe(h),_=1<<y;_&u|l[y]&u&&(l[y]|=u),h&=~_}}function zs(l){switch(l){case 2:l=1;break;case 8:l=4;break;case 32:l=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:l=128;break;case 268435456:l=134217728;break;default:l=0}return l}function wn(l){return l&=-l,2<l?8<l?(l&134217727)!==0?32:268435456:8:2}function lr(){var l=W.p;return l!==0?l:(l=window.event,l===void 0?32:DC(l.type))}function Zl(l,u){var h=W.p;try{return W.p=l,u()}finally{W.p=h}}var On=Math.random().toString(36).slice(2),vr="__reactFiber$"+On,cr="__reactProps$"+On,ua="__reactContainer$"+On,Cf="__reactEvents$"+On,Fy="__reactListeners$"+On,Lo="__reactHandles$"+On,fp="__reactResources$"+On,Jl="__reactMarker$"+On;function Bo(l){delete l[vr],delete l[cr],delete l[Cf],delete l[Fy],delete l[Lo]}function $s(l){var u=l[vr];if(u)return u;for(var h=l.parentNode;h;){if(u=h[ua]||h[vr]){if(h=u.alternate,u.child!==null||h!==null&&h.child!==null)for(l=pC(l);l!==null;){if(h=l[vr])return h;l=pC(l)}return u}l=h,h=l.parentNode}return null}function ns(l){if(l=l[vr]||l[ua]){var u=l.tag;if(u===5||u===6||u===13||u===26||u===27||u===3)return l}return null}function rs(l){var u=l.tag;if(u===5||u===26||u===27||u===6)return l.stateNode;throw Error(r(33))}function _i(l){var u=l[fp];return u||(u=l[fp]={hoistableStyles:new Map,hoistableScripts:new Map}),u}function Jn(l){l[Jl]=!0}var Tf=new Set,yu={};function ka(l,u){Gs(l,u),Gs(l+"Capture",u)}function Gs(l,u){for(yu[l]=u,l=0;l<u.length;l++)Tf.add(u[l])}var hp=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),pp={},ec={};function gp(l){return ie.call(ec,l)?!0:ie.call(pp,l)?!1:hp.test(l)?ec[l]=!0:(pp[l]=!0,!1)}function Fo(l,u,h){if(gp(u))if(h===null)l.removeAttribute(u);else{switch(typeof h){case"undefined":case"function":case"symbol":l.removeAttribute(u);return;case"boolean":var y=u.toLowerCase().slice(0,5);if(y!=="data-"&&y!=="aria-"){l.removeAttribute(u);return}}l.setAttribute(u,""+h)}}function is(l,u,h){if(h===null)l.removeAttribute(u);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(u);return}l.setAttribute(u,""+h)}}function Kr(l,u,h,y){if(y===null)l.removeAttribute(h);else{switch(typeof y){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(h);return}l.setAttributeNS(u,h,""+y)}}var tc,mp;function Ws(l){if(tc===void 0)try{throw Error()}catch(h){var u=h.stack.trim().match(/\n( *(at )?)/);tc=u&&u[1]||"",mp=-1<h.stack.indexOf(`
    at`)?" (<anonymous>)":-1<h.stack.indexOf("@")?"@unknown:0:0":""}return`
`+tc+l+mp}var vu=!1;function xu(l,u){if(!l||vu)return"";vu=!0;var h=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var y={DetermineComponentFrameRoot:function(){try{if(u){var Ie=function(){throw Error()};if(Object.defineProperty(Ie.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Ie,[])}catch(he){var de=he}Reflect.construct(l,[],Ie)}else{try{Ie.call()}catch(he){de=he}l.call(Ie.prototype)}}else{try{throw Error()}catch(he){de=he}(Ie=l())&&typeof Ie.catch=="function"&&Ie.catch(function(){})}}catch(he){if(he&&de&&typeof he.stack=="string")return[he.stack,de.stack]}return[null,null]}};y.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var _=Object.getOwnPropertyDescriptor(y.DetermineComponentFrameRoot,"name");_&&_.configurable&&Object.defineProperty(y.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var S=y.DetermineComponentFrameRoot(),U=S[0],z=S[1];if(U&&z){var Q=U.split(`
`),le=z.split(`
`);for(_=y=0;y<Q.length&&!Q[y].includes("DetermineComponentFrameRoot");)y++;for(;_<le.length&&!le[_].includes("DetermineComponentFrameRoot");)_++;if(y===Q.length||_===le.length)for(y=Q.length-1,_=le.length-1;1<=y&&0<=_&&Q[y]!==le[_];)_--;for(;1<=y&&0<=_;y--,_--)if(Q[y]!==le[_]){if(y!==1||_!==1)do if(y--,_--,0>_||Q[y]!==le[_]){var Ce=`
`+Q[y].replace(" at new "," at ");return l.displayName&&Ce.includes("<anonymous>")&&(Ce=Ce.replace("<anonymous>",l.displayName)),Ce}while(1<=y&&0<=_);break}}}finally{vu=!1,Error.prepareStackTrace=h}return(h=l?l.displayName||l.name:"")?Ws(h):""}function If(l){switch(l.tag){case 26:case 27:case 5:return Ws(l.type);case 16:return Ws("Lazy");case 13:return Ws("Suspense");case 19:return Ws("SuspenseList");case 0:case 15:return xu(l.type,!1);case 11:return xu(l.type.render,!1);case 1:return xu(l.type,!0);case 31:return Ws("Activity");default:return""}}function wu(l){try{var u="";do u+=If(l),l=l.return;while(l);return u}catch(h){return`
Error generating stack: `+h.message+`
`+h.stack}}function Ai(l){switch(typeof l){case"bigint":case"boolean":case"number":case"string":case"undefined":return l;case"object":return l;default:return""}}function Df(l){var u=l.type;return(l=l.nodeName)&&l.toLowerCase()==="input"&&(u==="checkbox"||u==="radio")}function Vy(l){var u=Df(l)?"checked":"value",h=Object.getOwnPropertyDescriptor(l.constructor.prototype,u),y=""+l[u];if(!l.hasOwnProperty(u)&&typeof h<"u"&&typeof h.get=="function"&&typeof h.set=="function"){var _=h.get,S=h.set;return Object.defineProperty(l,u,{configurable:!0,get:function(){return _.call(this)},set:function(U){y=""+U,S.call(this,U)}}),Object.defineProperty(l,u,{enumerable:h.enumerable}),{getValue:function(){return y},setValue:function(U){y=""+U},stopTracking:function(){l._valueTracker=null,delete l[u]}}}}function bu(l){l._valueTracker||(l._valueTracker=Vy(l))}function Rf(l){if(!l)return!1;var u=l._valueTracker;if(!u)return!0;var h=u.getValue(),y="";return l&&(y=Df(l)?l.checked?"true":"false":l.value),l=y,l!==h?(u.setValue(l),!0):!1}function nc(l){if(l=l||(typeof document<"u"?document:void 0),typeof l>"u")return null;try{return l.activeElement||l.body}catch{return l.body}}var jy=/[\n"\\]/g;function ur(l){return l.replace(jy,function(u){return"\\"+u.charCodeAt(0).toString(16)+" "})}function Yi(l,u,h,y,_,S,U,z){l.name="",U!=null&&typeof U!="function"&&typeof U!="symbol"&&typeof U!="boolean"?l.type=U:l.removeAttribute("type"),u!=null?U==="number"?(u===0&&l.value===""||l.value!=u)&&(l.value=""+Ai(u)):l.value!==""+Ai(u)&&(l.value=""+Ai(u)):U!=="submit"&&U!=="reset"||l.removeAttribute("value"),u!=null?Vo(l,U,Ai(u)):h!=null?Vo(l,U,Ai(h)):y!=null&&l.removeAttribute("value"),_==null&&S!=null&&(l.defaultChecked=!!S),_!=null&&(l.checked=_&&typeof _!="function"&&typeof _!="symbol"),z!=null&&typeof z!="function"&&typeof z!="symbol"&&typeof z!="boolean"?l.name=""+Ai(z):l.removeAttribute("name")}function rc(l,u,h,y,_,S,U,z){if(S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"&&(l.type=S),u!=null||h!=null){if(!(S!=="submit"&&S!=="reset"||u!=null))return;h=h!=null?""+Ai(h):"",u=u!=null?""+Ai(u):h,z||u===l.value||(l.value=u),l.defaultValue=u}y=y??_,y=typeof y!="function"&&typeof y!="symbol"&&!!y,l.checked=z?l.checked:!!y,l.defaultChecked=!!y,U!=null&&typeof U!="function"&&typeof U!="symbol"&&typeof U!="boolean"&&(l.name=U)}function Vo(l,u,h){u==="number"&&nc(l.ownerDocument)===l||l.defaultValue===""+h||(l.defaultValue=""+h)}function Ys(l,u,h,y){if(l=l.options,u){u={};for(var _=0;_<h.length;_++)u["$"+h[_]]=!0;for(h=0;h<l.length;h++)_=u.hasOwnProperty("$"+l[h].value),l[h].selected!==_&&(l[h].selected=_),_&&y&&(l[h].defaultSelected=!0)}else{for(h=""+Ai(h),u=null,_=0;_<l.length;_++){if(l[_].value===h){l[_].selected=!0,y&&(l[_].defaultSelected=!0);return}u!==null||l[_].disabled||(u=l[_])}u!==null&&(u.selected=!0)}}function fn(l,u,h){if(u!=null&&(u=""+Ai(u),u!==l.value&&(l.value=u),h==null)){l.defaultValue!==u&&(l.defaultValue=u);return}l.defaultValue=h!=null?""+Ai(h):""}function ic(l,u,h,y){if(u==null){if(y!=null){if(h!=null)throw Error(r(92));if(X(y)){if(1<y.length)throw Error(r(93));y=y[0]}h=y}h==null&&(h=""),u=h}h=Ai(u),l.defaultValue=h,y=l.textContent,y===h&&y!==""&&y!==null&&(l.value=y)}function da(l,u){if(u){var h=l.firstChild;if(h&&h===l.lastChild&&h.nodeType===3){h.nodeValue=u;return}}l.textContent=u}var ac=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function yp(l,u,h){var y=u.indexOf("--")===0;h==null||typeof h=="boolean"||h===""?y?l.setProperty(u,""):u==="float"?l.cssFloat="":l[u]="":y?l.setProperty(u,h):typeof h!="number"||h===0||ac.has(u)?u==="float"?l.cssFloat=h:l[u]=(""+h).trim():l[u]=h+"px"}function Mf(l,u,h){if(u!=null&&typeof u!="object")throw Error(r(62));if(l=l.style,h!=null){for(var y in h)!h.hasOwnProperty(y)||u!=null&&u.hasOwnProperty(y)||(y.indexOf("--")===0?l.setProperty(y,""):y==="float"?l.cssFloat="":l[y]="");for(var _ in u)y=u[_],u.hasOwnProperty(_)&&h[_]!==y&&yp(l,_,y)}else for(var S in u)u.hasOwnProperty(S)&&yp(l,S,u[S])}function Of(l){if(l.indexOf("-")===-1)return!1;switch(l){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Uy=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Hy=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function _u(l){return Hy.test(""+l)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":l}var qs=null;function fa(l){return l=l.target||l.srcElement||window,l.correspondingUseElement&&(l=l.correspondingUseElement),l.nodeType===3?l.parentNode:l}var Xs=null,Ks=null;function Pf(l){var u=ns(l);if(u&&(l=u.stateNode)){var h=l[cr]||null;e:switch(l=u.stateNode,u.type){case"input":if(Yi(l,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name),u=h.name,h.type==="radio"&&u!=null){for(h=l;h.parentNode;)h=h.parentNode;for(h=h.querySelectorAll('input[name="'+ur(""+u)+'"][type="radio"]'),u=0;u<h.length;u++){var y=h[u];if(y!==l&&y.form===l.form){var _=y[cr]||null;if(!_)throw Error(r(90));Yi(y,_.value,_.defaultValue,_.defaultValue,_.checked,_.defaultChecked,_.type,_.name)}}for(u=0;u<h.length;u++)y=h[u],y.form===l.form&&Rf(y)}break e;case"textarea":fn(l,h.value,h.defaultValue);break e;case"select":u=h.value,u!=null&&Ys(l,!!h.multiple,u,!1)}}}var as=!1;function vp(l,u,h){if(as)return l(u,h);as=!0;try{var y=l(u);return y}finally{if(as=!1,(Xs!==null||Ks!==null)&&(dg(),Xs&&(u=Xs,l=Ks,Ks=Xs=null,Pf(u),l)))for(u=0;u<l.length;u++)Pf(l[u])}}function sc(l,u){var h=l.stateNode;if(h===null)return null;var y=h[cr]||null;if(y===null)return null;h=y[u];e:switch(u){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(y=!y.disabled)||(l=l.type,y=!(l==="button"||l==="input"||l==="select"||l==="textarea")),l=!y;break e;default:l=!1}if(l)return null;if(h&&typeof h!="function")throw Error(r(231,u,typeof h));return h}var Na=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ha=!1;if(Na)try{var oc={};Object.defineProperty(oc,"passive",{get:function(){ha=!0}}),window.addEventListener("test",oc,oc),window.removeEventListener("test",oc,oc)}catch{ha=!1}var ss=null,jo=null,Qs=null;function kf(){if(Qs)return Qs;var l,u=jo,h=u.length,y,_="value"in ss?ss.value:ss.textContent,S=_.length;for(l=0;l<h&&u[l]===_[l];l++);var U=h-l;for(y=1;y<=U&&u[h-y]===_[S-y];y++);return Qs=_.slice(l,1<y?1-y:void 0)}function os(l){var u=l.keyCode;return"charCode"in l?(l=l.charCode,l===0&&u===13&&(l=13)):l=u,l===10&&(l=13),32<=l||l===13?l:0}function ls(){return!0}function Nf(){return!1}function kr(l){function u(h,y,_,S,U){this._reactName=h,this._targetInst=_,this.type=y,this.nativeEvent=S,this.target=U,this.currentTarget=null;for(var z in l)l.hasOwnProperty(z)&&(h=l[z],this[z]=h?h(S):S[z]);return this.isDefaultPrevented=(S.defaultPrevented!=null?S.defaultPrevented:S.returnValue===!1)?ls:Nf,this.isPropagationStopped=Nf,this}return f(u.prototype,{preventDefault:function(){this.defaultPrevented=!0;var h=this.nativeEvent;h&&(h.preventDefault?h.preventDefault():typeof h.returnValue!="unknown"&&(h.returnValue=!1),this.isDefaultPrevented=ls)},stopPropagation:function(){var h=this.nativeEvent;h&&(h.stopPropagation?h.stopPropagation():typeof h.cancelBubble!="unknown"&&(h.cancelBubble=!0),this.isPropagationStopped=ls)},persist:function(){},isPersistent:ls}),u}var nn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(l){return l.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Au=kr(nn),lc=f({},nn,{view:0,detail:0}),xp=kr(lc),Eu,Su,cs,cc=f({},lc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:fc,button:0,buttons:0,relatedTarget:function(l){return l.relatedTarget===void 0?l.fromElement===l.srcElement?l.toElement:l.fromElement:l.relatedTarget},movementX:function(l){return"movementX"in l?l.movementX:(l!==cs&&(cs&&l.type==="mousemove"?(Eu=l.screenX-cs.screenX,Su=l.screenY-cs.screenY):Su=Eu=0,cs=l),Eu)},movementY:function(l){return"movementY"in l?l.movementY:Su}}),pa=kr(cc),wp=f({},cc,{dataTransfer:0}),zy=kr(wp),uc=f({},lc,{relatedTarget:0}),Cu=kr(uc),Lf=f({},nn,{animationName:0,elapsedTime:0,pseudoElement:0}),Tu=kr(Lf),bp=f({},nn,{clipboardData:function(l){return"clipboardData"in l?l.clipboardData:window.clipboardData}}),Iu=kr(bp),$y=f({},nn,{data:0}),Bf=kr($y),dc={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_p={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ap={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ff(l){var u=this.nativeEvent;return u.getModifierState?u.getModifierState(l):(l=Ap[l])?!!u[l]:!1}function fc(){return Ff}var Ep=f({},lc,{key:function(l){if(l.key){var u=dc[l.key]||l.key;if(u!=="Unidentified")return u}return l.type==="keypress"?(l=os(l),l===13?"Enter":String.fromCharCode(l)):l.type==="keydown"||l.type==="keyup"?_p[l.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:fc,charCode:function(l){return l.type==="keypress"?os(l):0},keyCode:function(l){return l.type==="keydown"||l.type==="keyup"?l.keyCode:0},which:function(l){return l.type==="keypress"?os(l):l.type==="keydown"||l.type==="keyup"?l.keyCode:0}}),Du=kr(Ep),Sp=f({},cc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Vf=kr(Sp),Zs=f({},lc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:fc}),Cp=kr(Zs),Tp=f({},nn,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ip=kr(Tp),Dp=f({},cc,{deltaX:function(l){return"deltaX"in l?l.deltaX:"wheelDeltaX"in l?-l.wheelDeltaX:0},deltaY:function(l){return"deltaY"in l?l.deltaY:"wheelDeltaY"in l?-l.wheelDeltaY:"wheelDelta"in l?-l.wheelDelta:0},deltaZ:0,deltaMode:0}),Ru=kr(Dp),Ei=f({},nn,{newState:0,oldState:0}),Rp=kr(Ei),Mp=[9,13,27,32],us=Na&&"CompositionEvent"in window,w=null;Na&&"documentMode"in document&&(w=document.documentMode);var L=Na&&"TextEvent"in window&&!w,j=Na&&(!us||w&&8<w&&11>=w),$=" ",se=!1;function me(l,u){switch(l){case"keyup":return Mp.indexOf(u.keyCode)!==-1;case"keydown":return u.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Le(l){return l=l.detail,typeof l=="object"&&"data"in l?l.data:null}var Lt=!1;function xr(l,u){switch(l){case"compositionend":return Le(u);case"keypress":return u.which!==32?null:(se=!0,$);case"textInput":return l=u.data,l===$&&se?null:l;default:return null}}function Bt(l,u){if(Lt)return l==="compositionend"||!us&&me(l,u)?(l=kf(),Qs=jo=ss=null,Lt=!1,l):null;switch(l){case"paste":return null;case"keypress":if(!(u.ctrlKey||u.altKey||u.metaKey)||u.ctrlKey&&u.altKey){if(u.char&&1<u.char.length)return u.char;if(u.which)return String.fromCharCode(u.which)}return null;case"compositionend":return j&&u.locale!=="ko"?null:u.data;default:return null}}var Nr={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function wr(l){var u=l&&l.nodeName&&l.nodeName.toLowerCase();return u==="input"?!!Nr[l.type]:u==="textarea"}function Js(l,u,h,y){Xs?Ks?Ks.push(y):Ks=[y]:Xs=y,u=yg(u,"onChange"),0<u.length&&(h=new Au("onChange","change",null,h,y),l.push({event:h,listeners:u}))}var Qr=null,ds=null;function jf(l){iC(l,0)}function Op(l){var u=rs(l);if(Rf(u))return l}function SA(l,u){if(l==="change")return u}var CA=!1;if(Na){var Gy;if(Na){var Wy="oninput"in document;if(!Wy){var TA=document.createElement("div");TA.setAttribute("oninput","return;"),Wy=typeof TA.oninput=="function"}Gy=Wy}else Gy=!1;CA=Gy&&(!document.documentMode||9<document.documentMode)}function IA(){Qr&&(Qr.detachEvent("onpropertychange",DA),ds=Qr=null)}function DA(l){if(l.propertyName==="value"&&Op(ds)){var u=[];Js(u,ds,l,fa(l)),vp(jf,u)}}function e6(l,u,h){l==="focusin"?(IA(),Qr=u,ds=h,Qr.attachEvent("onpropertychange",DA)):l==="focusout"&&IA()}function t6(l){if(l==="selectionchange"||l==="keyup"||l==="keydown")return Op(ds)}function n6(l,u){if(l==="click")return Op(u)}function r6(l,u){if(l==="input"||l==="change")return Op(u)}function i6(l,u){return l===u&&(l!==0||1/l===1/u)||l!==l&&u!==u}var qi=typeof Object.is=="function"?Object.is:i6;function Uf(l,u){if(qi(l,u))return!0;if(typeof l!="object"||l===null||typeof u!="object"||u===null)return!1;var h=Object.keys(l),y=Object.keys(u);if(h.length!==y.length)return!1;for(y=0;y<h.length;y++){var _=h[y];if(!ie.call(u,_)||!qi(l[_],u[_]))return!1}return!0}function RA(l){for(;l&&l.firstChild;)l=l.firstChild;return l}function MA(l,u){var h=RA(l);l=0;for(var y;h;){if(h.nodeType===3){if(y=l+h.textContent.length,l<=u&&y>=u)return{node:h,offset:u-l};l=y}e:{for(;h;){if(h.nextSibling){h=h.nextSibling;break e}h=h.parentNode}h=void 0}h=RA(h)}}function OA(l,u){return l&&u?l===u?!0:l&&l.nodeType===3?!1:u&&u.nodeType===3?OA(l,u.parentNode):"contains"in l?l.contains(u):l.compareDocumentPosition?!!(l.compareDocumentPosition(u)&16):!1:!1}function PA(l){l=l!=null&&l.ownerDocument!=null&&l.ownerDocument.defaultView!=null?l.ownerDocument.defaultView:window;for(var u=nc(l.document);u instanceof l.HTMLIFrameElement;){try{var h=typeof u.contentWindow.location.href=="string"}catch{h=!1}if(h)l=u.contentWindow;else break;u=nc(l.document)}return u}function Yy(l){var u=l&&l.nodeName&&l.nodeName.toLowerCase();return u&&(u==="input"&&(l.type==="text"||l.type==="search"||l.type==="tel"||l.type==="url"||l.type==="password")||u==="textarea"||l.contentEditable==="true")}var a6=Na&&"documentMode"in document&&11>=document.documentMode,Mu=null,qy=null,Hf=null,Xy=!1;function kA(l,u,h){var y=h.window===h?h.document:h.nodeType===9?h:h.ownerDocument;Xy||Mu==null||Mu!==nc(y)||(y=Mu,"selectionStart"in y&&Yy(y)?y={start:y.selectionStart,end:y.selectionEnd}:(y=(y.ownerDocument&&y.ownerDocument.defaultView||window).getSelection(),y={anchorNode:y.anchorNode,anchorOffset:y.anchorOffset,focusNode:y.focusNode,focusOffset:y.focusOffset}),Hf&&Uf(Hf,y)||(Hf=y,y=yg(qy,"onSelect"),0<y.length&&(u=new Au("onSelect","select",null,u,h),l.push({event:u,listeners:y}),u.target=Mu)))}function hc(l,u){var h={};return h[l.toLowerCase()]=u.toLowerCase(),h["Webkit"+l]="webkit"+u,h["Moz"+l]="moz"+u,h}var Ou={animationend:hc("Animation","AnimationEnd"),animationiteration:hc("Animation","AnimationIteration"),animationstart:hc("Animation","AnimationStart"),transitionrun:hc("Transition","TransitionRun"),transitionstart:hc("Transition","TransitionStart"),transitioncancel:hc("Transition","TransitionCancel"),transitionend:hc("Transition","TransitionEnd")},Ky={},NA={};Na&&(NA=document.createElement("div").style,"AnimationEvent"in window||(delete Ou.animationend.animation,delete Ou.animationiteration.animation,delete Ou.animationstart.animation),"TransitionEvent"in window||delete Ou.transitionend.transition);function pc(l){if(Ky[l])return Ky[l];if(!Ou[l])return l;var u=Ou[l],h;for(h in u)if(u.hasOwnProperty(h)&&h in NA)return Ky[l]=u[h];return l}var LA=pc("animationend"),BA=pc("animationiteration"),FA=pc("animationstart"),s6=pc("transitionrun"),o6=pc("transitionstart"),l6=pc("transitioncancel"),VA=pc("transitionend"),jA=new Map,Qy="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Qy.push("scrollEnd");function La(l,u){jA.set(l,u),ka(u,[l])}var UA=new WeakMap;function ga(l,u){if(typeof l=="object"&&l!==null){var h=UA.get(l);return h!==void 0?h:(u={value:l,source:u,stack:wu(u)},UA.set(l,u),u)}return{value:l,source:u,stack:wu(u)}}var ma=[],Pu=0,Zy=0;function Pp(){for(var l=Pu,u=Zy=Pu=0;u<l;){var h=ma[u];ma[u++]=null;var y=ma[u];ma[u++]=null;var _=ma[u];ma[u++]=null;var S=ma[u];if(ma[u++]=null,y!==null&&_!==null){var U=y.pending;U===null?_.next=_:(_.next=U.next,U.next=_),y.pending=_}S!==0&&HA(h,_,S)}}function kp(l,u,h,y){ma[Pu++]=l,ma[Pu++]=u,ma[Pu++]=h,ma[Pu++]=y,Zy|=y,l.lanes|=y,l=l.alternate,l!==null&&(l.lanes|=y)}function Jy(l,u,h,y){return kp(l,u,h,y),Np(l)}function ku(l,u){return kp(l,null,null,u),Np(l)}function HA(l,u,h){l.lanes|=h;var y=l.alternate;y!==null&&(y.lanes|=h);for(var _=!1,S=l.return;S!==null;)S.childLanes|=h,y=S.alternate,y!==null&&(y.childLanes|=h),S.tag===22&&(l=S.stateNode,l===null||l._visibility&1||(_=!0)),l=S,S=S.return;return l.tag===3?(S=l.stateNode,_&&u!==null&&(_=31-Qe(h),l=S.hiddenUpdates,y=l[_],y===null?l[_]=[u]:y.push(u),u.lane=h|536870912),S):null}function Np(l){if(50<hh)throw hh=0,ax=null,Error(r(185));for(var u=l.return;u!==null;)l=u,u=l.return;return l.tag===3?l.stateNode:null}var Nu={};function c6(l,u,h,y){this.tag=l,this.key=h,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=u,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=y,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Xi(l,u,h,y){return new c6(l,u,h,y)}function ev(l){return l=l.prototype,!(!l||!l.isReactComponent)}function eo(l,u){var h=l.alternate;return h===null?(h=Xi(l.tag,u,l.key,l.mode),h.elementType=l.elementType,h.type=l.type,h.stateNode=l.stateNode,h.alternate=l,l.alternate=h):(h.pendingProps=u,h.type=l.type,h.flags=0,h.subtreeFlags=0,h.deletions=null),h.flags=l.flags&65011712,h.childLanes=l.childLanes,h.lanes=l.lanes,h.child=l.child,h.memoizedProps=l.memoizedProps,h.memoizedState=l.memoizedState,h.updateQueue=l.updateQueue,u=l.dependencies,h.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext},h.sibling=l.sibling,h.index=l.index,h.ref=l.ref,h.refCleanup=l.refCleanup,h}function zA(l,u){l.flags&=65011714;var h=l.alternate;return h===null?(l.childLanes=0,l.lanes=u,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=h.childLanes,l.lanes=h.lanes,l.child=h.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=h.memoizedProps,l.memoizedState=h.memoizedState,l.updateQueue=h.updateQueue,l.type=h.type,u=h.dependencies,l.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext}),l}function Lp(l,u,h,y,_,S){var U=0;if(y=l,typeof l=="function")ev(l)&&(U=1);else if(typeof l=="string")U=dN(l,h,Pe.current)?26:l==="html"||l==="head"||l==="body"?27:5;else e:switch(l){case R:return l=Xi(31,h,u,_),l.elementType=R,l.lanes=S,l;case x:return gc(h.children,_,S,u);case b:U=8,_|=24;break;case A:return l=Xi(12,h,u,_|2),l.elementType=A,l.lanes=S,l;case k:return l=Xi(13,h,u,_),l.elementType=k,l.lanes=S,l;case B:return l=Xi(19,h,u,_),l.elementType=B,l.lanes=S,l;default:if(typeof l=="object"&&l!==null)switch(l.$$typeof){case E:case T:U=10;break e;case C:U=9;break e;case D:U=11;break e;case O:U=14;break e;case I:U=16,y=null;break e}U=29,h=Error(r(130,l===null?"null":typeof l,"")),y=null}return u=Xi(U,h,u,_),u.elementType=l,u.type=y,u.lanes=S,u}function gc(l,u,h,y){return l=Xi(7,l,y,u),l.lanes=h,l}function tv(l,u,h){return l=Xi(6,l,null,u),l.lanes=h,l}function nv(l,u,h){return u=Xi(4,l.children!==null?l.children:[],l.key,u),u.lanes=h,u.stateNode={containerInfo:l.containerInfo,pendingChildren:null,implementation:l.implementation},u}var Lu=[],Bu=0,Bp=null,Fp=0,ya=[],va=0,mc=null,to=1,no="";function yc(l,u){Lu[Bu++]=Fp,Lu[Bu++]=Bp,Bp=l,Fp=u}function $A(l,u,h){ya[va++]=to,ya[va++]=no,ya[va++]=mc,mc=l;var y=to;l=no;var _=32-Qe(y)-1;y&=~(1<<_),h+=1;var S=32-Qe(u)+_;if(30<S){var U=_-_%5;S=(y&(1<<U)-1).toString(32),y>>=U,_-=U,to=1<<32-Qe(u)+_|h<<_|y,no=S+l}else to=1<<S|h<<_|y,no=l}function rv(l){l.return!==null&&(yc(l,1),$A(l,1,0))}function iv(l){for(;l===Bp;)Bp=Lu[--Bu],Lu[Bu]=null,Fp=Lu[--Bu],Lu[Bu]=null;for(;l===mc;)mc=ya[--va],ya[va]=null,no=ya[--va],ya[va]=null,to=ya[--va],ya[va]=null}var Si=null,Wn=null,Xt=!1,vc=null,fs=!1,av=Error(r(519));function xc(l){var u=Error(r(418,""));throw Gf(ga(u,l)),av}function GA(l){var u=l.stateNode,h=l.type,y=l.memoizedProps;switch(u[vr]=l,u[cr]=y,h){case"dialog":Rt("cancel",u),Rt("close",u);break;case"iframe":case"object":case"embed":Rt("load",u);break;case"video":case"audio":for(h=0;h<gh.length;h++)Rt(gh[h],u);break;case"source":Rt("error",u);break;case"img":case"image":case"link":Rt("error",u),Rt("load",u);break;case"details":Rt("toggle",u);break;case"input":Rt("invalid",u),rc(u,y.value,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name,!0),bu(u);break;case"select":Rt("invalid",u);break;case"textarea":Rt("invalid",u),ic(u,y.value,y.defaultValue,y.children),bu(u)}h=y.children,typeof h!="string"&&typeof h!="number"&&typeof h!="bigint"||u.textContent===""+h||y.suppressHydrationWarning===!0||lC(u.textContent,h)?(y.popover!=null&&(Rt("beforetoggle",u),Rt("toggle",u)),y.onScroll!=null&&Rt("scroll",u),y.onScrollEnd!=null&&Rt("scrollend",u),y.onClick!=null&&(u.onclick=vg),u=!0):u=!1,u||xc(l)}function WA(l){for(Si=l.return;Si;)switch(Si.tag){case 5:case 13:fs=!1;return;case 27:case 3:fs=!0;return;default:Si=Si.return}}function zf(l){if(l!==Si)return!1;if(!Xt)return WA(l),Xt=!0,!1;var u=l.tag,h;if((h=u!==3&&u!==27)&&((h=u===5)&&(h=l.type,h=!(h!=="form"&&h!=="button")||bx(l.type,l.memoizedProps)),h=!h),h&&Wn&&xc(l),WA(l),u===13){if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(r(317));e:{for(l=l.nextSibling,u=0;l;){if(l.nodeType===8)if(h=l.data,h==="/$"){if(u===0){Wn=Fa(l.nextSibling);break e}u--}else h!=="$"&&h!=="$!"&&h!=="$?"||u++;l=l.nextSibling}Wn=null}}else u===27?(u=Wn,nl(l.type)?(l=Sx,Sx=null,Wn=l):Wn=u):Wn=Si?Fa(l.stateNode.nextSibling):null;return!0}function $f(){Wn=Si=null,Xt=!1}function YA(){var l=vc;return l!==null&&(Ni===null?Ni=l:Ni.push.apply(Ni,l),vc=null),l}function Gf(l){vc===null?vc=[l]:vc.push(l)}var sv=ge(null),wc=null,ro=null;function Uo(l,u,h){be(sv,u._currentValue),u._currentValue=h}function io(l){l._currentValue=sv.current,ve(sv)}function ov(l,u,h){for(;l!==null;){var y=l.alternate;if((l.childLanes&u)!==u?(l.childLanes|=u,y!==null&&(y.childLanes|=u)):y!==null&&(y.childLanes&u)!==u&&(y.childLanes|=u),l===h)break;l=l.return}}function lv(l,u,h,y){var _=l.child;for(_!==null&&(_.return=l);_!==null;){var S=_.dependencies;if(S!==null){var U=_.child;S=S.firstContext;e:for(;S!==null;){var z=S;S=_;for(var Q=0;Q<u.length;Q++)if(z.context===u[Q]){S.lanes|=h,z=S.alternate,z!==null&&(z.lanes|=h),ov(S.return,h,l),y||(U=null);break e}S=z.next}}else if(_.tag===18){if(U=_.return,U===null)throw Error(r(341));U.lanes|=h,S=U.alternate,S!==null&&(S.lanes|=h),ov(U,h,l),U=null}else U=_.child;if(U!==null)U.return=_;else for(U=_;U!==null;){if(U===l){U=null;break}if(_=U.sibling,_!==null){_.return=U.return,U=_;break}U=U.return}_=U}}function Wf(l,u,h,y){l=null;for(var _=u,S=!1;_!==null;){if(!S){if((_.flags&524288)!==0)S=!0;else if((_.flags&262144)!==0)break}if(_.tag===10){var U=_.alternate;if(U===null)throw Error(r(387));if(U=U.memoizedProps,U!==null){var z=_.type;qi(_.pendingProps.value,U.value)||(l!==null?l.push(z):l=[z])}}else if(_===Ae.current){if(U=_.alternate,U===null)throw Error(r(387));U.memoizedState.memoizedState!==_.memoizedState.memoizedState&&(l!==null?l.push(bh):l=[bh])}_=_.return}l!==null&&lv(u,l,h,y),u.flags|=262144}function Vp(l){for(l=l.firstContext;l!==null;){if(!qi(l.context._currentValue,l.memoizedValue))return!0;l=l.next}return!1}function bc(l){wc=l,ro=null,l=l.dependencies,l!==null&&(l.firstContext=null)}function ci(l){return qA(wc,l)}function jp(l,u){return wc===null&&bc(l),qA(l,u)}function qA(l,u){var h=u._currentValue;if(u={context:u,memoizedValue:h,next:null},ro===null){if(l===null)throw Error(r(308));ro=u,l.dependencies={lanes:0,firstContext:u},l.flags|=524288}else ro=ro.next=u;return h}var u6=typeof AbortController<"u"?AbortController:function(){var l=[],u=this.signal={aborted:!1,addEventListener:function(h,y){l.push(y)}};this.abort=function(){u.aborted=!0,l.forEach(function(h){return h()})}},d6=n.unstable_scheduleCallback,f6=n.unstable_NormalPriority,br={$$typeof:T,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function cv(){return{controller:new u6,data:new Map,refCount:0}}function Yf(l){l.refCount--,l.refCount===0&&d6(f6,function(){l.controller.abort()})}var qf=null,uv=0,Fu=0,Vu=null;function h6(l,u){if(qf===null){var h=qf=[];uv=0,Fu=fx(),Vu={status:"pending",value:void 0,then:function(y){h.push(y)}}}return uv++,u.then(XA,XA),u}function XA(){if(--uv===0&&qf!==null){Vu!==null&&(Vu.status="fulfilled");var l=qf;qf=null,Fu=0,Vu=null;for(var u=0;u<l.length;u++)(0,l[u])()}}function p6(l,u){var h=[],y={status:"pending",value:null,reason:null,then:function(_){h.push(_)}};return l.then(function(){y.status="fulfilled",y.value=u;for(var _=0;_<h.length;_++)(0,h[_])(u)},function(_){for(y.status="rejected",y.reason=_,_=0;_<h.length;_++)(0,h[_])(void 0)}),y}var KA=G.S;G.S=function(l,u){typeof u=="object"&&u!==null&&typeof u.then=="function"&&h6(l,u),KA!==null&&KA(l,u)};var _c=ge(null);function dv(){var l=_c.current;return l!==null?l:En.pooledCache}function Up(l,u){u===null?be(_c,_c.current):be(_c,u.pool)}function QA(){var l=dv();return l===null?null:{parent:br._currentValue,pool:l}}var Xf=Error(r(460)),ZA=Error(r(474)),Hp=Error(r(542)),fv={then:function(){}};function JA(l){return l=l.status,l==="fulfilled"||l==="rejected"}function zp(){}function eE(l,u,h){switch(h=l[h],h===void 0?l.push(u):h!==u&&(u.then(zp,zp),u=h),u.status){case"fulfilled":return u.value;case"rejected":throw l=u.reason,nE(l),l;default:if(typeof u.status=="string")u.then(zp,zp);else{if(l=En,l!==null&&100<l.shellSuspendCounter)throw Error(r(482));l=u,l.status="pending",l.then(function(y){if(u.status==="pending"){var _=u;_.status="fulfilled",_.value=y}},function(y){if(u.status==="pending"){var _=u;_.status="rejected",_.reason=y}})}switch(u.status){case"fulfilled":return u.value;case"rejected":throw l=u.reason,nE(l),l}throw Kf=u,Xf}}var Kf=null;function tE(){if(Kf===null)throw Error(r(459));var l=Kf;return Kf=null,l}function nE(l){if(l===Xf||l===Hp)throw Error(r(483))}var Ho=!1;function hv(l){l.updateQueue={baseState:l.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function pv(l,u){l=l.updateQueue,u.updateQueue===l&&(u.updateQueue={baseState:l.baseState,firstBaseUpdate:l.firstBaseUpdate,lastBaseUpdate:l.lastBaseUpdate,shared:l.shared,callbacks:null})}function zo(l){return{lane:l,tag:0,payload:null,callback:null,next:null}}function $o(l,u,h){var y=l.updateQueue;if(y===null)return null;if(y=y.shared,(an&2)!==0){var _=y.pending;return _===null?u.next=u:(u.next=_.next,_.next=u),y.pending=u,u=Np(l),HA(l,null,h),u}return kp(l,y,u,h),Np(l)}function Qf(l,u,h){if(u=u.updateQueue,u!==null&&(u=u.shared,(h&4194048)!==0)){var y=u.lanes;y&=l.pendingLanes,h|=y,u.lanes=h,mu(l,h)}}function gv(l,u){var h=l.updateQueue,y=l.alternate;if(y!==null&&(y=y.updateQueue,h===y)){var _=null,S=null;if(h=h.firstBaseUpdate,h!==null){do{var U={lane:h.lane,tag:h.tag,payload:h.payload,callback:null,next:null};S===null?_=S=U:S=S.next=U,h=h.next}while(h!==null);S===null?_=S=u:S=S.next=u}else _=S=u;h={baseState:y.baseState,firstBaseUpdate:_,lastBaseUpdate:S,shared:y.shared,callbacks:y.callbacks},l.updateQueue=h;return}l=h.lastBaseUpdate,l===null?h.firstBaseUpdate=u:l.next=u,h.lastBaseUpdate=u}var mv=!1;function Zf(){if(mv){var l=Vu;if(l!==null)throw l}}function Jf(l,u,h,y){mv=!1;var _=l.updateQueue;Ho=!1;var S=_.firstBaseUpdate,U=_.lastBaseUpdate,z=_.shared.pending;if(z!==null){_.shared.pending=null;var Q=z,le=Q.next;Q.next=null,U===null?S=le:U.next=le,U=Q;var Ce=l.alternate;Ce!==null&&(Ce=Ce.updateQueue,z=Ce.lastBaseUpdate,z!==U&&(z===null?Ce.firstBaseUpdate=le:z.next=le,Ce.lastBaseUpdate=Q))}if(S!==null){var Ie=_.baseState;U=0,Ce=le=Q=null,z=S;do{var de=z.lane&-536870913,he=de!==z.lane;if(he?(Ft&de)===de:(y&de)===de){de!==0&&de===Fu&&(mv=!0),Ce!==null&&(Ce=Ce.next={lane:0,tag:z.tag,payload:z.payload,callback:null,next:null});e:{var ut=l,st=z;de=u;var gn=h;switch(st.tag){case 1:if(ut=st.payload,typeof ut=="function"){Ie=ut.call(gn,Ie,de);break e}Ie=ut;break e;case 3:ut.flags=ut.flags&-65537|128;case 0:if(ut=st.payload,de=typeof ut=="function"?ut.call(gn,Ie,de):ut,de==null)break e;Ie=f({},Ie,de);break e;case 2:Ho=!0}}de=z.callback,de!==null&&(l.flags|=64,he&&(l.flags|=8192),he=_.callbacks,he===null?_.callbacks=[de]:he.push(de))}else he={lane:de,tag:z.tag,payload:z.payload,callback:z.callback,next:null},Ce===null?(le=Ce=he,Q=Ie):Ce=Ce.next=he,U|=de;if(z=z.next,z===null){if(z=_.shared.pending,z===null)break;he=z,z=he.next,he.next=null,_.lastBaseUpdate=he,_.shared.pending=null}}while(!0);Ce===null&&(Q=Ie),_.baseState=Q,_.firstBaseUpdate=le,_.lastBaseUpdate=Ce,S===null&&(_.shared.lanes=0),Zo|=U,l.lanes=U,l.memoizedState=Ie}}function rE(l,u){if(typeof l!="function")throw Error(r(191,l));l.call(u)}function iE(l,u){var h=l.callbacks;if(h!==null)for(l.callbacks=null,l=0;l<h.length;l++)rE(h[l],u)}var ju=ge(null),$p=ge(0);function aE(l,u){l=fo,be($p,l),be(ju,u),fo=l|u.baseLanes}function yv(){be($p,fo),be(ju,ju.current)}function vv(){fo=$p.current,ve(ju),ve($p)}var Go=0,At=null,hn=null,dr=null,Gp=!1,Uu=!1,Ac=!1,Wp=0,eh=0,Hu=null,g6=0;function er(){throw Error(r(321))}function xv(l,u){if(u===null)return!1;for(var h=0;h<u.length&&h<l.length;h++)if(!qi(l[h],u[h]))return!1;return!0}function wv(l,u,h,y,_,S){return Go=S,At=u,u.memoizedState=null,u.updateQueue=null,u.lanes=0,G.H=l===null||l.memoizedState===null?HE:zE,Ac=!1,S=h(y,_),Ac=!1,Uu&&(S=oE(u,h,y,_)),sE(l),S}function sE(l){G.H=Zp;var u=hn!==null&&hn.next!==null;if(Go=0,dr=hn=At=null,Gp=!1,eh=0,Hu=null,u)throw Error(r(300));l===null||Lr||(l=l.dependencies,l!==null&&Vp(l)&&(Lr=!0))}function oE(l,u,h,y){At=l;var _=0;do{if(Uu&&(Hu=null),eh=0,Uu=!1,25<=_)throw Error(r(301));if(_+=1,dr=hn=null,l.updateQueue!=null){var S=l.updateQueue;S.lastEffect=null,S.events=null,S.stores=null,S.memoCache!=null&&(S.memoCache.index=0)}G.H=_6,S=u(h,y)}while(Uu);return S}function m6(){var l=G.H,u=l.useState()[0];return u=typeof u.then=="function"?th(u):u,l=l.useState()[0],(hn!==null?hn.memoizedState:null)!==l&&(At.flags|=1024),u}function bv(){var l=Wp!==0;return Wp=0,l}function _v(l,u,h){u.updateQueue=l.updateQueue,u.flags&=-2053,l.lanes&=~h}function Av(l){if(Gp){for(l=l.memoizedState;l!==null;){var u=l.queue;u!==null&&(u.pending=null),l=l.next}Gp=!1}Go=0,dr=hn=At=null,Uu=!1,eh=Wp=0,Hu=null}function Pi(){var l={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return dr===null?At.memoizedState=dr=l:dr=dr.next=l,dr}function fr(){if(hn===null){var l=At.alternate;l=l!==null?l.memoizedState:null}else l=hn.next;var u=dr===null?At.memoizedState:dr.next;if(u!==null)dr=u,hn=l;else{if(l===null)throw At.alternate===null?Error(r(467)):Error(r(310));hn=l,l={memoizedState:hn.memoizedState,baseState:hn.baseState,baseQueue:hn.baseQueue,queue:hn.queue,next:null},dr===null?At.memoizedState=dr=l:dr=dr.next=l}return dr}function Ev(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function th(l){var u=eh;return eh+=1,Hu===null&&(Hu=[]),l=eE(Hu,l,u),u=At,(dr===null?u.memoizedState:dr.next)===null&&(u=u.alternate,G.H=u===null||u.memoizedState===null?HE:zE),l}function Yp(l){if(l!==null&&typeof l=="object"){if(typeof l.then=="function")return th(l);if(l.$$typeof===T)return ci(l)}throw Error(r(438,String(l)))}function Sv(l){var u=null,h=At.updateQueue;if(h!==null&&(u=h.memoCache),u==null){var y=At.alternate;y!==null&&(y=y.updateQueue,y!==null&&(y=y.memoCache,y!=null&&(u={data:y.data.map(function(_){return _.slice()}),index:0})))}if(u==null&&(u={data:[],index:0}),h===null&&(h=Ev(),At.updateQueue=h),h.memoCache=u,h=u.data[u.index],h===void 0)for(h=u.data[u.index]=Array(l),y=0;y<l;y++)h[y]=F;return u.index++,h}function ao(l,u){return typeof u=="function"?u(l):u}function qp(l){var u=fr();return Cv(u,hn,l)}function Cv(l,u,h){var y=l.queue;if(y===null)throw Error(r(311));y.lastRenderedReducer=h;var _=l.baseQueue,S=y.pending;if(S!==null){if(_!==null){var U=_.next;_.next=S.next,S.next=U}u.baseQueue=_=S,y.pending=null}if(S=l.baseState,_===null)l.memoizedState=S;else{u=_.next;var z=U=null,Q=null,le=u,Ce=!1;do{var Ie=le.lane&-536870913;if(Ie!==le.lane?(Ft&Ie)===Ie:(Go&Ie)===Ie){var de=le.revertLane;if(de===0)Q!==null&&(Q=Q.next={lane:0,revertLane:0,action:le.action,hasEagerState:le.hasEagerState,eagerState:le.eagerState,next:null}),Ie===Fu&&(Ce=!0);else if((Go&de)===de){le=le.next,de===Fu&&(Ce=!0);continue}else Ie={lane:0,revertLane:le.revertLane,action:le.action,hasEagerState:le.hasEagerState,eagerState:le.eagerState,next:null},Q===null?(z=Q=Ie,U=S):Q=Q.next=Ie,At.lanes|=de,Zo|=de;Ie=le.action,Ac&&h(S,Ie),S=le.hasEagerState?le.eagerState:h(S,Ie)}else de={lane:Ie,revertLane:le.revertLane,action:le.action,hasEagerState:le.hasEagerState,eagerState:le.eagerState,next:null},Q===null?(z=Q=de,U=S):Q=Q.next=de,At.lanes|=Ie,Zo|=Ie;le=le.next}while(le!==null&&le!==u);if(Q===null?U=S:Q.next=z,!qi(S,l.memoizedState)&&(Lr=!0,Ce&&(h=Vu,h!==null)))throw h;l.memoizedState=S,l.baseState=U,l.baseQueue=Q,y.lastRenderedState=S}return _===null&&(y.lanes=0),[l.memoizedState,y.dispatch]}function Tv(l){var u=fr(),h=u.queue;if(h===null)throw Error(r(311));h.lastRenderedReducer=l;var y=h.dispatch,_=h.pending,S=u.memoizedState;if(_!==null){h.pending=null;var U=_=_.next;do S=l(S,U.action),U=U.next;while(U!==_);qi(S,u.memoizedState)||(Lr=!0),u.memoizedState=S,u.baseQueue===null&&(u.baseState=S),h.lastRenderedState=S}return[S,y]}function lE(l,u,h){var y=At,_=fr(),S=Xt;if(S){if(h===void 0)throw Error(r(407));h=h()}else h=u();var U=!qi((hn||_).memoizedState,h);U&&(_.memoizedState=h,Lr=!0),_=_.queue;var z=dE.bind(null,y,_,l);if(nh(2048,8,z,[l]),_.getSnapshot!==u||U||dr!==null&&dr.memoizedState.tag&1){if(y.flags|=2048,zu(9,Xp(),uE.bind(null,y,_,h,u),null),En===null)throw Error(r(349));S||(Go&124)!==0||cE(y,u,h)}return h}function cE(l,u,h){l.flags|=16384,l={getSnapshot:u,value:h},u=At.updateQueue,u===null?(u=Ev(),At.updateQueue=u,u.stores=[l]):(h=u.stores,h===null?u.stores=[l]:h.push(l))}function uE(l,u,h,y){u.value=h,u.getSnapshot=y,fE(u)&&hE(l)}function dE(l,u,h){return h(function(){fE(u)&&hE(l)})}function fE(l){var u=l.getSnapshot;l=l.value;try{var h=u();return!qi(l,h)}catch{return!0}}function hE(l){var u=ku(l,2);u!==null&&ea(u,l,2)}function Iv(l){var u=Pi();if(typeof l=="function"){var h=l;if(l=h(),Ac){Cn(!0);try{h()}finally{Cn(!1)}}}return u.memoizedState=u.baseState=l,u.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ao,lastRenderedState:l},u}function pE(l,u,h,y){return l.baseState=h,Cv(l,hn,typeof y=="function"?y:ao)}function y6(l,u,h,y,_){if(Qp(l))throw Error(r(485));if(l=u.action,l!==null){var S={payload:_,action:l,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(U){S.listeners.push(U)}};G.T!==null?h(!0):S.isTransition=!1,y(S),h=u.pending,h===null?(S.next=u.pending=S,gE(u,S)):(S.next=h.next,u.pending=h.next=S)}}function gE(l,u){var h=u.action,y=u.payload,_=l.state;if(u.isTransition){var S=G.T,U={};G.T=U;try{var z=h(_,y),Q=G.S;Q!==null&&Q(U,z),mE(l,u,z)}catch(le){Dv(l,u,le)}finally{G.T=S}}else try{S=h(_,y),mE(l,u,S)}catch(le){Dv(l,u,le)}}function mE(l,u,h){h!==null&&typeof h=="object"&&typeof h.then=="function"?h.then(function(y){yE(l,u,y)},function(y){return Dv(l,u,y)}):yE(l,u,h)}function yE(l,u,h){u.status="fulfilled",u.value=h,vE(u),l.state=h,u=l.pending,u!==null&&(h=u.next,h===u?l.pending=null:(h=h.next,u.next=h,gE(l,h)))}function Dv(l,u,h){var y=l.pending;if(l.pending=null,y!==null){y=y.next;do u.status="rejected",u.reason=h,vE(u),u=u.next;while(u!==y)}l.action=null}function vE(l){l=l.listeners;for(var u=0;u<l.length;u++)(0,l[u])()}function xE(l,u){return u}function wE(l,u){if(Xt){var h=En.formState;if(h!==null){e:{var y=At;if(Xt){if(Wn){t:{for(var _=Wn,S=fs;_.nodeType!==8;){if(!S){_=null;break t}if(_=Fa(_.nextSibling),_===null){_=null;break t}}S=_.data,_=S==="F!"||S==="F"?_:null}if(_){Wn=Fa(_.nextSibling),y=_.data==="F!";break e}}xc(y)}y=!1}y&&(u=h[0])}}return h=Pi(),h.memoizedState=h.baseState=u,y={pending:null,lanes:0,dispatch:null,lastRenderedReducer:xE,lastRenderedState:u},h.queue=y,h=VE.bind(null,At,y),y.dispatch=h,y=Iv(!1),S=kv.bind(null,At,!1,y.queue),y=Pi(),_={state:u,dispatch:null,action:l,pending:null},y.queue=_,h=y6.bind(null,At,_,S,h),_.dispatch=h,y.memoizedState=l,[u,h,!1]}function bE(l){var u=fr();return _E(u,hn,l)}function _E(l,u,h){if(u=Cv(l,u,xE)[0],l=qp(ao)[0],typeof u=="object"&&u!==null&&typeof u.then=="function")try{var y=th(u)}catch(U){throw U===Xf?Hp:U}else y=u;u=fr();var _=u.queue,S=_.dispatch;return h!==u.memoizedState&&(At.flags|=2048,zu(9,Xp(),v6.bind(null,_,h),null)),[y,S,l]}function v6(l,u){l.action=u}function AE(l){var u=fr(),h=hn;if(h!==null)return _E(u,h,l);fr(),u=u.memoizedState,h=fr();var y=h.queue.dispatch;return h.memoizedState=l,[u,y,!1]}function zu(l,u,h,y){return l={tag:l,create:h,deps:y,inst:u,next:null},u=At.updateQueue,u===null&&(u=Ev(),At.updateQueue=u),h=u.lastEffect,h===null?u.lastEffect=l.next=l:(y=h.next,h.next=l,l.next=y,u.lastEffect=l),l}function Xp(){return{destroy:void 0,resource:void 0}}function EE(){return fr().memoizedState}function Kp(l,u,h,y){var _=Pi();y=y===void 0?null:y,At.flags|=l,_.memoizedState=zu(1|u,Xp(),h,y)}function nh(l,u,h,y){var _=fr();y=y===void 0?null:y;var S=_.memoizedState.inst;hn!==null&&y!==null&&xv(y,hn.memoizedState.deps)?_.memoizedState=zu(u,S,h,y):(At.flags|=l,_.memoizedState=zu(1|u,S,h,y))}function SE(l,u){Kp(8390656,8,l,u)}function CE(l,u){nh(2048,8,l,u)}function TE(l,u){return nh(4,2,l,u)}function IE(l,u){return nh(4,4,l,u)}function DE(l,u){if(typeof u=="function"){l=l();var h=u(l);return function(){typeof h=="function"?h():u(null)}}if(u!=null)return l=l(),u.current=l,function(){u.current=null}}function RE(l,u,h){h=h!=null?h.concat([l]):null,nh(4,4,DE.bind(null,u,l),h)}function Rv(){}function ME(l,u){var h=fr();u=u===void 0?null:u;var y=h.memoizedState;return u!==null&&xv(u,y[1])?y[0]:(h.memoizedState=[l,u],l)}function OE(l,u){var h=fr();u=u===void 0?null:u;var y=h.memoizedState;if(u!==null&&xv(u,y[1]))return y[0];if(y=l(),Ac){Cn(!0);try{l()}finally{Cn(!1)}}return h.memoizedState=[y,u],y}function Mv(l,u,h){return h===void 0||(Go&1073741824)!==0?l.memoizedState=u:(l.memoizedState=h,l=NS(),At.lanes|=l,Zo|=l,h)}function PE(l,u,h,y){return qi(h,u)?h:ju.current!==null?(l=Mv(l,h,y),qi(l,u)||(Lr=!0),l):(Go&42)===0?(Lr=!0,l.memoizedState=h):(l=NS(),At.lanes|=l,Zo|=l,u)}function kE(l,u,h,y,_){var S=W.p;W.p=S!==0&&8>S?S:8;var U=G.T,z={};G.T=z,kv(l,!1,u,h);try{var Q=_(),le=G.S;if(le!==null&&le(z,Q),Q!==null&&typeof Q=="object"&&typeof Q.then=="function"){var Ce=p6(Q,y);rh(l,u,Ce,Ji(l))}else rh(l,u,y,Ji(l))}catch(Ie){rh(l,u,{then:function(){},status:"rejected",reason:Ie},Ji())}finally{W.p=S,G.T=U}}function x6(){}function Ov(l,u,h,y){if(l.tag!==5)throw Error(r(476));var _=NE(l).queue;kE(l,_,u,K,h===null?x6:function(){return LE(l),h(y)})}function NE(l){var u=l.memoizedState;if(u!==null)return u;u={memoizedState:K,baseState:K,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ao,lastRenderedState:K},next:null};var h={};return u.next={memoizedState:h,baseState:h,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ao,lastRenderedState:h},next:null},l.memoizedState=u,l=l.alternate,l!==null&&(l.memoizedState=u),u}function LE(l){var u=NE(l).next.queue;rh(l,u,{},Ji())}function Pv(){return ci(bh)}function BE(){return fr().memoizedState}function FE(){return fr().memoizedState}function w6(l){for(var u=l.return;u!==null;){switch(u.tag){case 24:case 3:var h=Ji();l=zo(h);var y=$o(u,l,h);y!==null&&(ea(y,u,h),Qf(y,u,h)),u={cache:cv()},l.payload=u;return}u=u.return}}function b6(l,u,h){var y=Ji();h={lane:y,revertLane:0,action:h,hasEagerState:!1,eagerState:null,next:null},Qp(l)?jE(u,h):(h=Jy(l,u,h,y),h!==null&&(ea(h,l,y),UE(h,u,y)))}function VE(l,u,h){var y=Ji();rh(l,u,h,y)}function rh(l,u,h,y){var _={lane:y,revertLane:0,action:h,hasEagerState:!1,eagerState:null,next:null};if(Qp(l))jE(u,_);else{var S=l.alternate;if(l.lanes===0&&(S===null||S.lanes===0)&&(S=u.lastRenderedReducer,S!==null))try{var U=u.lastRenderedState,z=S(U,h);if(_.hasEagerState=!0,_.eagerState=z,qi(z,U))return kp(l,u,_,0),En===null&&Pp(),!1}catch{}finally{}if(h=Jy(l,u,_,y),h!==null)return ea(h,l,y),UE(h,u,y),!0}return!1}function kv(l,u,h,y){if(y={lane:2,revertLane:fx(),action:y,hasEagerState:!1,eagerState:null,next:null},Qp(l)){if(u)throw Error(r(479))}else u=Jy(l,h,y,2),u!==null&&ea(u,l,2)}function Qp(l){var u=l.alternate;return l===At||u!==null&&u===At}function jE(l,u){Uu=Gp=!0;var h=l.pending;h===null?u.next=u:(u.next=h.next,h.next=u),l.pending=u}function UE(l,u,h){if((h&4194048)!==0){var y=u.lanes;y&=l.pendingLanes,h|=y,u.lanes=h,mu(l,h)}}var Zp={readContext:ci,use:Yp,useCallback:er,useContext:er,useEffect:er,useImperativeHandle:er,useLayoutEffect:er,useInsertionEffect:er,useMemo:er,useReducer:er,useRef:er,useState:er,useDebugValue:er,useDeferredValue:er,useTransition:er,useSyncExternalStore:er,useId:er,useHostTransitionStatus:er,useFormState:er,useActionState:er,useOptimistic:er,useMemoCache:er,useCacheRefresh:er},HE={readContext:ci,use:Yp,useCallback:function(l,u){return Pi().memoizedState=[l,u===void 0?null:u],l},useContext:ci,useEffect:SE,useImperativeHandle:function(l,u,h){h=h!=null?h.concat([l]):null,Kp(4194308,4,DE.bind(null,u,l),h)},useLayoutEffect:function(l,u){return Kp(4194308,4,l,u)},useInsertionEffect:function(l,u){Kp(4,2,l,u)},useMemo:function(l,u){var h=Pi();u=u===void 0?null:u;var y=l();if(Ac){Cn(!0);try{l()}finally{Cn(!1)}}return h.memoizedState=[y,u],y},useReducer:function(l,u,h){var y=Pi();if(h!==void 0){var _=h(u);if(Ac){Cn(!0);try{h(u)}finally{Cn(!1)}}}else _=u;return y.memoizedState=y.baseState=_,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:l,lastRenderedState:_},y.queue=l,l=l.dispatch=b6.bind(null,At,l),[y.memoizedState,l]},useRef:function(l){var u=Pi();return l={current:l},u.memoizedState=l},useState:function(l){l=Iv(l);var u=l.queue,h=VE.bind(null,At,u);return u.dispatch=h,[l.memoizedState,h]},useDebugValue:Rv,useDeferredValue:function(l,u){var h=Pi();return Mv(h,l,u)},useTransition:function(){var l=Iv(!1);return l=kE.bind(null,At,l.queue,!0,!1),Pi().memoizedState=l,[!1,l]},useSyncExternalStore:function(l,u,h){var y=At,_=Pi();if(Xt){if(h===void 0)throw Error(r(407));h=h()}else{if(h=u(),En===null)throw Error(r(349));(Ft&124)!==0||cE(y,u,h)}_.memoizedState=h;var S={value:h,getSnapshot:u};return _.queue=S,SE(dE.bind(null,y,S,l),[l]),y.flags|=2048,zu(9,Xp(),uE.bind(null,y,S,h,u),null),h},useId:function(){var l=Pi(),u=En.identifierPrefix;if(Xt){var h=no,y=to;h=(y&~(1<<32-Qe(y)-1)).toString(32)+h,u=""+u+"R"+h,h=Wp++,0<h&&(u+="H"+h.toString(32)),u+=""}else h=g6++,u=""+u+"r"+h.toString(32)+"";return l.memoizedState=u},useHostTransitionStatus:Pv,useFormState:wE,useActionState:wE,useOptimistic:function(l){var u=Pi();u.memoizedState=u.baseState=l;var h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return u.queue=h,u=kv.bind(null,At,!0,h),h.dispatch=u,[l,u]},useMemoCache:Sv,useCacheRefresh:function(){return Pi().memoizedState=w6.bind(null,At)}},zE={readContext:ci,use:Yp,useCallback:ME,useContext:ci,useEffect:CE,useImperativeHandle:RE,useInsertionEffect:TE,useLayoutEffect:IE,useMemo:OE,useReducer:qp,useRef:EE,useState:function(){return qp(ao)},useDebugValue:Rv,useDeferredValue:function(l,u){var h=fr();return PE(h,hn.memoizedState,l,u)},useTransition:function(){var l=qp(ao)[0],u=fr().memoizedState;return[typeof l=="boolean"?l:th(l),u]},useSyncExternalStore:lE,useId:BE,useHostTransitionStatus:Pv,useFormState:bE,useActionState:bE,useOptimistic:function(l,u){var h=fr();return pE(h,hn,l,u)},useMemoCache:Sv,useCacheRefresh:FE},_6={readContext:ci,use:Yp,useCallback:ME,useContext:ci,useEffect:CE,useImperativeHandle:RE,useInsertionEffect:TE,useLayoutEffect:IE,useMemo:OE,useReducer:Tv,useRef:EE,useState:function(){return Tv(ao)},useDebugValue:Rv,useDeferredValue:function(l,u){var h=fr();return hn===null?Mv(h,l,u):PE(h,hn.memoizedState,l,u)},useTransition:function(){var l=Tv(ao)[0],u=fr().memoizedState;return[typeof l=="boolean"?l:th(l),u]},useSyncExternalStore:lE,useId:BE,useHostTransitionStatus:Pv,useFormState:AE,useActionState:AE,useOptimistic:function(l,u){var h=fr();return hn!==null?pE(h,hn,l,u):(h.baseState=l,[l,h.queue.dispatch])},useMemoCache:Sv,useCacheRefresh:FE},$u=null,ih=0;function Jp(l){var u=ih;return ih+=1,$u===null&&($u=[]),eE($u,l,u)}function ah(l,u){u=u.props.ref,l.ref=u!==void 0?u:null}function eg(l,u){throw u.$$typeof===p?Error(r(525)):(l=Object.prototype.toString.call(u),Error(r(31,l==="[object Object]"?"object with keys {"+Object.keys(u).join(", ")+"}":l)))}function $E(l){var u=l._init;return u(l._payload)}function GE(l){function u(re,J){if(l){var oe=re.deletions;oe===null?(re.deletions=[J],re.flags|=16):oe.push(J)}}function h(re,J){if(!l)return null;for(;J!==null;)u(re,J),J=J.sibling;return null}function y(re){for(var J=new Map;re!==null;)re.key!==null?J.set(re.key,re):J.set(re.index,re),re=re.sibling;return J}function _(re,J){return re=eo(re,J),re.index=0,re.sibling=null,re}function S(re,J,oe){return re.index=oe,l?(oe=re.alternate,oe!==null?(oe=oe.index,oe<J?(re.flags|=67108866,J):oe):(re.flags|=67108866,J)):(re.flags|=1048576,J)}function U(re){return l&&re.alternate===null&&(re.flags|=67108866),re}function z(re,J,oe,Te){return J===null||J.tag!==6?(J=tv(oe,re.mode,Te),J.return=re,J):(J=_(J,oe),J.return=re,J)}function Q(re,J,oe,Te){var Xe=oe.type;return Xe===x?Ce(re,J,oe.props.children,Te,oe.key):J!==null&&(J.elementType===Xe||typeof Xe=="object"&&Xe!==null&&Xe.$$typeof===I&&$E(Xe)===J.type)?(J=_(J,oe.props),ah(J,oe),J.return=re,J):(J=Lp(oe.type,oe.key,oe.props,null,re.mode,Te),ah(J,oe),J.return=re,J)}function le(re,J,oe,Te){return J===null||J.tag!==4||J.stateNode.containerInfo!==oe.containerInfo||J.stateNode.implementation!==oe.implementation?(J=nv(oe,re.mode,Te),J.return=re,J):(J=_(J,oe.children||[]),J.return=re,J)}function Ce(re,J,oe,Te,Xe){return J===null||J.tag!==7?(J=gc(oe,re.mode,Te,Xe),J.return=re,J):(J=_(J,oe),J.return=re,J)}function Ie(re,J,oe){if(typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint")return J=tv(""+J,re.mode,oe),J.return=re,J;if(typeof J=="object"&&J!==null){switch(J.$$typeof){case g:return oe=Lp(J.type,J.key,J.props,null,re.mode,oe),ah(oe,J),oe.return=re,oe;case m:return J=nv(J,re.mode,oe),J.return=re,J;case I:var Te=J._init;return J=Te(J._payload),Ie(re,J,oe)}if(X(J)||P(J))return J=gc(J,re.mode,oe,null),J.return=re,J;if(typeof J.then=="function")return Ie(re,Jp(J),oe);if(J.$$typeof===T)return Ie(re,jp(re,J),oe);eg(re,J)}return null}function de(re,J,oe,Te){var Xe=J!==null?J.key:null;if(typeof oe=="string"&&oe!==""||typeof oe=="number"||typeof oe=="bigint")return Xe!==null?null:z(re,J,""+oe,Te);if(typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case g:return oe.key===Xe?Q(re,J,oe,Te):null;case m:return oe.key===Xe?le(re,J,oe,Te):null;case I:return Xe=oe._init,oe=Xe(oe._payload),de(re,J,oe,Te)}if(X(oe)||P(oe))return Xe!==null?null:Ce(re,J,oe,Te,null);if(typeof oe.then=="function")return de(re,J,Jp(oe),Te);if(oe.$$typeof===T)return de(re,J,jp(re,oe),Te);eg(re,oe)}return null}function he(re,J,oe,Te,Xe){if(typeof Te=="string"&&Te!==""||typeof Te=="number"||typeof Te=="bigint")return re=re.get(oe)||null,z(J,re,""+Te,Xe);if(typeof Te=="object"&&Te!==null){switch(Te.$$typeof){case g:return re=re.get(Te.key===null?oe:Te.key)||null,Q(J,re,Te,Xe);case m:return re=re.get(Te.key===null?oe:Te.key)||null,le(J,re,Te,Xe);case I:var Tt=Te._init;return Te=Tt(Te._payload),he(re,J,oe,Te,Xe)}if(X(Te)||P(Te))return re=re.get(oe)||null,Ce(J,re,Te,Xe,null);if(typeof Te.then=="function")return he(re,J,oe,Jp(Te),Xe);if(Te.$$typeof===T)return he(re,J,oe,jp(J,Te),Xe);eg(J,Te)}return null}function ut(re,J,oe,Te){for(var Xe=null,Tt=null,Ze=J,ot=J=0,Fr=null;Ze!==null&&ot<oe.length;ot++){Ze.index>ot?(Fr=Ze,Ze=null):Fr=Ze.sibling;var $t=de(re,Ze,oe[ot],Te);if($t===null){Ze===null&&(Ze=Fr);break}l&&Ze&&$t.alternate===null&&u(re,Ze),J=S($t,J,ot),Tt===null?Xe=$t:Tt.sibling=$t,Tt=$t,Ze=Fr}if(ot===oe.length)return h(re,Ze),Xt&&yc(re,ot),Xe;if(Ze===null){for(;ot<oe.length;ot++)Ze=Ie(re,oe[ot],Te),Ze!==null&&(J=S(Ze,J,ot),Tt===null?Xe=Ze:Tt.sibling=Ze,Tt=Ze);return Xt&&yc(re,ot),Xe}for(Ze=y(Ze);ot<oe.length;ot++)Fr=he(Ze,re,ot,oe[ot],Te),Fr!==null&&(l&&Fr.alternate!==null&&Ze.delete(Fr.key===null?ot:Fr.key),J=S(Fr,J,ot),Tt===null?Xe=Fr:Tt.sibling=Fr,Tt=Fr);return l&&Ze.forEach(function(ol){return u(re,ol)}),Xt&&yc(re,ot),Xe}function st(re,J,oe,Te){if(oe==null)throw Error(r(151));for(var Xe=null,Tt=null,Ze=J,ot=J=0,Fr=null,$t=oe.next();Ze!==null&&!$t.done;ot++,$t=oe.next()){Ze.index>ot?(Fr=Ze,Ze=null):Fr=Ze.sibling;var ol=de(re,Ze,$t.value,Te);if(ol===null){Ze===null&&(Ze=Fr);break}l&&Ze&&ol.alternate===null&&u(re,Ze),J=S(ol,J,ot),Tt===null?Xe=ol:Tt.sibling=ol,Tt=ol,Ze=Fr}if($t.done)return h(re,Ze),Xt&&yc(re,ot),Xe;if(Ze===null){for(;!$t.done;ot++,$t=oe.next())$t=Ie(re,$t.value,Te),$t!==null&&(J=S($t,J,ot),Tt===null?Xe=$t:Tt.sibling=$t,Tt=$t);return Xt&&yc(re,ot),Xe}for(Ze=y(Ze);!$t.done;ot++,$t=oe.next())$t=he(Ze,re,ot,$t.value,Te),$t!==null&&(l&&$t.alternate!==null&&Ze.delete($t.key===null?ot:$t.key),J=S($t,J,ot),Tt===null?Xe=$t:Tt.sibling=$t,Tt=$t);return l&&Ze.forEach(function(AN){return u(re,AN)}),Xt&&yc(re,ot),Xe}function gn(re,J,oe,Te){if(typeof oe=="object"&&oe!==null&&oe.type===x&&oe.key===null&&(oe=oe.props.children),typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case g:e:{for(var Xe=oe.key;J!==null;){if(J.key===Xe){if(Xe=oe.type,Xe===x){if(J.tag===7){h(re,J.sibling),Te=_(J,oe.props.children),Te.return=re,re=Te;break e}}else if(J.elementType===Xe||typeof Xe=="object"&&Xe!==null&&Xe.$$typeof===I&&$E(Xe)===J.type){h(re,J.sibling),Te=_(J,oe.props),ah(Te,oe),Te.return=re,re=Te;break e}h(re,J);break}else u(re,J);J=J.sibling}oe.type===x?(Te=gc(oe.props.children,re.mode,Te,oe.key),Te.return=re,re=Te):(Te=Lp(oe.type,oe.key,oe.props,null,re.mode,Te),ah(Te,oe),Te.return=re,re=Te)}return U(re);case m:e:{for(Xe=oe.key;J!==null;){if(J.key===Xe)if(J.tag===4&&J.stateNode.containerInfo===oe.containerInfo&&J.stateNode.implementation===oe.implementation){h(re,J.sibling),Te=_(J,oe.children||[]),Te.return=re,re=Te;break e}else{h(re,J);break}else u(re,J);J=J.sibling}Te=nv(oe,re.mode,Te),Te.return=re,re=Te}return U(re);case I:return Xe=oe._init,oe=Xe(oe._payload),gn(re,J,oe,Te)}if(X(oe))return ut(re,J,oe,Te);if(P(oe)){if(Xe=P(oe),typeof Xe!="function")throw Error(r(150));return oe=Xe.call(oe),st(re,J,oe,Te)}if(typeof oe.then=="function")return gn(re,J,Jp(oe),Te);if(oe.$$typeof===T)return gn(re,J,jp(re,oe),Te);eg(re,oe)}return typeof oe=="string"&&oe!==""||typeof oe=="number"||typeof oe=="bigint"?(oe=""+oe,J!==null&&J.tag===6?(h(re,J.sibling),Te=_(J,oe),Te.return=re,re=Te):(h(re,J),Te=tv(oe,re.mode,Te),Te.return=re,re=Te),U(re)):h(re,J)}return function(re,J,oe,Te){try{ih=0;var Xe=gn(re,J,oe,Te);return $u=null,Xe}catch(Ze){if(Ze===Xf||Ze===Hp)throw Ze;var Tt=Xi(29,Ze,null,re.mode);return Tt.lanes=Te,Tt.return=re,Tt}finally{}}}var Gu=GE(!0),WE=GE(!1),xa=ge(null),hs=null;function Wo(l){var u=l.alternate;be(_r,_r.current&1),be(xa,l),hs===null&&(u===null||ju.current!==null||u.memoizedState!==null)&&(hs=l)}function YE(l){if(l.tag===22){if(be(_r,_r.current),be(xa,l),hs===null){var u=l.alternate;u!==null&&u.memoizedState!==null&&(hs=l)}}else Yo()}function Yo(){be(_r,_r.current),be(xa,xa.current)}function so(l){ve(xa),hs===l&&(hs=null),ve(_r)}var _r=ge(0);function tg(l){for(var u=l;u!==null;){if(u.tag===13){var h=u.memoizedState;if(h!==null&&(h=h.dehydrated,h===null||h.data==="$?"||Ex(h)))return u}else if(u.tag===19&&u.memoizedProps.revealOrder!==void 0){if((u.flags&128)!==0)return u}else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===l)break;for(;u.sibling===null;){if(u.return===null||u.return===l)return null;u=u.return}u.sibling.return=u.return,u=u.sibling}return null}function Nv(l,u,h,y){u=l.memoizedState,h=h(y,u),h=h==null?u:f({},u,h),l.memoizedState=h,l.lanes===0&&(l.updateQueue.baseState=h)}var Lv={enqueueSetState:function(l,u,h){l=l._reactInternals;var y=Ji(),_=zo(y);_.payload=u,h!=null&&(_.callback=h),u=$o(l,_,y),u!==null&&(ea(u,l,y),Qf(u,l,y))},enqueueReplaceState:function(l,u,h){l=l._reactInternals;var y=Ji(),_=zo(y);_.tag=1,_.payload=u,h!=null&&(_.callback=h),u=$o(l,_,y),u!==null&&(ea(u,l,y),Qf(u,l,y))},enqueueForceUpdate:function(l,u){l=l._reactInternals;var h=Ji(),y=zo(h);y.tag=2,u!=null&&(y.callback=u),u=$o(l,y,h),u!==null&&(ea(u,l,h),Qf(u,l,h))}};function qE(l,u,h,y,_,S,U){return l=l.stateNode,typeof l.shouldComponentUpdate=="function"?l.shouldComponentUpdate(y,S,U):u.prototype&&u.prototype.isPureReactComponent?!Uf(h,y)||!Uf(_,S):!0}function XE(l,u,h,y){l=u.state,typeof u.componentWillReceiveProps=="function"&&u.componentWillReceiveProps(h,y),typeof u.UNSAFE_componentWillReceiveProps=="function"&&u.UNSAFE_componentWillReceiveProps(h,y),u.state!==l&&Lv.enqueueReplaceState(u,u.state,null)}function Ec(l,u){var h=u;if("ref"in u){h={};for(var y in u)y!=="ref"&&(h[y]=u[y])}if(l=l.defaultProps){h===u&&(h=f({},h));for(var _ in l)h[_]===void 0&&(h[_]=l[_])}return h}var ng=typeof reportError=="function"?reportError:function(l){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var u=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof l=="object"&&l!==null&&typeof l.message=="string"?String(l.message):String(l),error:l});if(!window.dispatchEvent(u))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",l);return}console.error(l)};function KE(l){ng(l)}function QE(l){console.error(l)}function ZE(l){ng(l)}function rg(l,u){try{var h=l.onUncaughtError;h(u.value,{componentStack:u.stack})}catch(y){setTimeout(function(){throw y})}}function JE(l,u,h){try{var y=l.onCaughtError;y(h.value,{componentStack:h.stack,errorBoundary:u.tag===1?u.stateNode:null})}catch(_){setTimeout(function(){throw _})}}function Bv(l,u,h){return h=zo(h),h.tag=3,h.payload={element:null},h.callback=function(){rg(l,u)},h}function eS(l){return l=zo(l),l.tag=3,l}function tS(l,u,h,y){var _=h.type.getDerivedStateFromError;if(typeof _=="function"){var S=y.value;l.payload=function(){return _(S)},l.callback=function(){JE(u,h,y)}}var U=h.stateNode;U!==null&&typeof U.componentDidCatch=="function"&&(l.callback=function(){JE(u,h,y),typeof _!="function"&&(Jo===null?Jo=new Set([this]):Jo.add(this));var z=y.stack;this.componentDidCatch(y.value,{componentStack:z!==null?z:""})})}function A6(l,u,h,y,_){if(h.flags|=32768,y!==null&&typeof y=="object"&&typeof y.then=="function"){if(u=h.alternate,u!==null&&Wf(u,h,_,!0),h=xa.current,h!==null){switch(h.tag){case 13:return hs===null?ox():h.alternate===null&&Yn===0&&(Yn=3),h.flags&=-257,h.flags|=65536,h.lanes=_,y===fv?h.flags|=16384:(u=h.updateQueue,u===null?h.updateQueue=new Set([y]):u.add(y),cx(l,y,_)),!1;case 22:return h.flags|=65536,y===fv?h.flags|=16384:(u=h.updateQueue,u===null?(u={transitions:null,markerInstances:null,retryQueue:new Set([y])},h.updateQueue=u):(h=u.retryQueue,h===null?u.retryQueue=new Set([y]):h.add(y)),cx(l,y,_)),!1}throw Error(r(435,h.tag))}return cx(l,y,_),ox(),!1}if(Xt)return u=xa.current,u!==null?((u.flags&65536)===0&&(u.flags|=256),u.flags|=65536,u.lanes=_,y!==av&&(l=Error(r(422),{cause:y}),Gf(ga(l,h)))):(y!==av&&(u=Error(r(423),{cause:y}),Gf(ga(u,h))),l=l.current.alternate,l.flags|=65536,_&=-_,l.lanes|=_,y=ga(y,h),_=Bv(l.stateNode,y,_),gv(l,_),Yn!==4&&(Yn=2)),!1;var S=Error(r(520),{cause:y});if(S=ga(S,h),fh===null?fh=[S]:fh.push(S),Yn!==4&&(Yn=2),u===null)return!0;y=ga(y,h),h=u;do{switch(h.tag){case 3:return h.flags|=65536,l=_&-_,h.lanes|=l,l=Bv(h.stateNode,y,l),gv(h,l),!1;case 1:if(u=h.type,S=h.stateNode,(h.flags&128)===0&&(typeof u.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(Jo===null||!Jo.has(S))))return h.flags|=65536,_&=-_,h.lanes|=_,_=eS(_),tS(_,l,h,y),gv(h,_),!1}h=h.return}while(h!==null);return!1}var nS=Error(r(461)),Lr=!1;function Zr(l,u,h,y){u.child=l===null?WE(u,null,h,y):Gu(u,l.child,h,y)}function rS(l,u,h,y,_){h=h.render;var S=u.ref;if("ref"in y){var U={};for(var z in y)z!=="ref"&&(U[z]=y[z])}else U=y;return bc(u),y=wv(l,u,h,U,S,_),z=bv(),l!==null&&!Lr?(_v(l,u,_),oo(l,u,_)):(Xt&&z&&rv(u),u.flags|=1,Zr(l,u,y,_),u.child)}function iS(l,u,h,y,_){if(l===null){var S=h.type;return typeof S=="function"&&!ev(S)&&S.defaultProps===void 0&&h.compare===null?(u.tag=15,u.type=S,aS(l,u,S,y,_)):(l=Lp(h.type,null,y,u,u.mode,_),l.ref=u.ref,l.return=u,u.child=l)}if(S=l.child,!Gv(l,_)){var U=S.memoizedProps;if(h=h.compare,h=h!==null?h:Uf,h(U,y)&&l.ref===u.ref)return oo(l,u,_)}return u.flags|=1,l=eo(S,y),l.ref=u.ref,l.return=u,u.child=l}function aS(l,u,h,y,_){if(l!==null){var S=l.memoizedProps;if(Uf(S,y)&&l.ref===u.ref)if(Lr=!1,u.pendingProps=y=S,Gv(l,_))(l.flags&131072)!==0&&(Lr=!0);else return u.lanes=l.lanes,oo(l,u,_)}return Fv(l,u,h,y,_)}function sS(l,u,h){var y=u.pendingProps,_=y.children,S=l!==null?l.memoizedState:null;if(y.mode==="hidden"){if((u.flags&128)!==0){if(y=S!==null?S.baseLanes|h:h,l!==null){for(_=u.child=l.child,S=0;_!==null;)S=S|_.lanes|_.childLanes,_=_.sibling;u.childLanes=S&~y}else u.childLanes=0,u.child=null;return oS(l,u,y,h)}if((h&536870912)!==0)u.memoizedState={baseLanes:0,cachePool:null},l!==null&&Up(u,S!==null?S.cachePool:null),S!==null?aE(u,S):yv(),YE(u);else return u.lanes=u.childLanes=536870912,oS(l,u,S!==null?S.baseLanes|h:h,h)}else S!==null?(Up(u,S.cachePool),aE(u,S),Yo(),u.memoizedState=null):(l!==null&&Up(u,null),yv(),Yo());return Zr(l,u,_,h),u.child}function oS(l,u,h,y){var _=dv();return _=_===null?null:{parent:br._currentValue,pool:_},u.memoizedState={baseLanes:h,cachePool:_},l!==null&&Up(u,null),yv(),YE(u),l!==null&&Wf(l,u,y,!0),null}function ig(l,u){var h=u.ref;if(h===null)l!==null&&l.ref!==null&&(u.flags|=4194816);else{if(typeof h!="function"&&typeof h!="object")throw Error(r(284));(l===null||l.ref!==h)&&(u.flags|=4194816)}}function Fv(l,u,h,y,_){return bc(u),h=wv(l,u,h,y,void 0,_),y=bv(),l!==null&&!Lr?(_v(l,u,_),oo(l,u,_)):(Xt&&y&&rv(u),u.flags|=1,Zr(l,u,h,_),u.child)}function lS(l,u,h,y,_,S){return bc(u),u.updateQueue=null,h=oE(u,y,h,_),sE(l),y=bv(),l!==null&&!Lr?(_v(l,u,S),oo(l,u,S)):(Xt&&y&&rv(u),u.flags|=1,Zr(l,u,h,S),u.child)}function cS(l,u,h,y,_){if(bc(u),u.stateNode===null){var S=Nu,U=h.contextType;typeof U=="object"&&U!==null&&(S=ci(U)),S=new h(y,S),u.memoizedState=S.state!==null&&S.state!==void 0?S.state:null,S.updater=Lv,u.stateNode=S,S._reactInternals=u,S=u.stateNode,S.props=y,S.state=u.memoizedState,S.refs={},hv(u),U=h.contextType,S.context=typeof U=="object"&&U!==null?ci(U):Nu,S.state=u.memoizedState,U=h.getDerivedStateFromProps,typeof U=="function"&&(Nv(u,h,U,y),S.state=u.memoizedState),typeof h.getDerivedStateFromProps=="function"||typeof S.getSnapshotBeforeUpdate=="function"||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(U=S.state,typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount(),U!==S.state&&Lv.enqueueReplaceState(S,S.state,null),Jf(u,y,S,_),Zf(),S.state=u.memoizedState),typeof S.componentDidMount=="function"&&(u.flags|=4194308),y=!0}else if(l===null){S=u.stateNode;var z=u.memoizedProps,Q=Ec(h,z);S.props=Q;var le=S.context,Ce=h.contextType;U=Nu,typeof Ce=="object"&&Ce!==null&&(U=ci(Ce));var Ie=h.getDerivedStateFromProps;Ce=typeof Ie=="function"||typeof S.getSnapshotBeforeUpdate=="function",z=u.pendingProps!==z,Ce||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(z||le!==U)&&XE(u,S,y,U),Ho=!1;var de=u.memoizedState;S.state=de,Jf(u,y,S,_),Zf(),le=u.memoizedState,z||de!==le||Ho?(typeof Ie=="function"&&(Nv(u,h,Ie,y),le=u.memoizedState),(Q=Ho||qE(u,h,Q,y,de,le,U))?(Ce||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount()),typeof S.componentDidMount=="function"&&(u.flags|=4194308)):(typeof S.componentDidMount=="function"&&(u.flags|=4194308),u.memoizedProps=y,u.memoizedState=le),S.props=y,S.state=le,S.context=U,y=Q):(typeof S.componentDidMount=="function"&&(u.flags|=4194308),y=!1)}else{S=u.stateNode,pv(l,u),U=u.memoizedProps,Ce=Ec(h,U),S.props=Ce,Ie=u.pendingProps,de=S.context,le=h.contextType,Q=Nu,typeof le=="object"&&le!==null&&(Q=ci(le)),z=h.getDerivedStateFromProps,(le=typeof z=="function"||typeof S.getSnapshotBeforeUpdate=="function")||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(U!==Ie||de!==Q)&&XE(u,S,y,Q),Ho=!1,de=u.memoizedState,S.state=de,Jf(u,y,S,_),Zf();var he=u.memoizedState;U!==Ie||de!==he||Ho||l!==null&&l.dependencies!==null&&Vp(l.dependencies)?(typeof z=="function"&&(Nv(u,h,z,y),he=u.memoizedState),(Ce=Ho||qE(u,h,Ce,y,de,he,Q)||l!==null&&l.dependencies!==null&&Vp(l.dependencies))?(le||typeof S.UNSAFE_componentWillUpdate!="function"&&typeof S.componentWillUpdate!="function"||(typeof S.componentWillUpdate=="function"&&S.componentWillUpdate(y,he,Q),typeof S.UNSAFE_componentWillUpdate=="function"&&S.UNSAFE_componentWillUpdate(y,he,Q)),typeof S.componentDidUpdate=="function"&&(u.flags|=4),typeof S.getSnapshotBeforeUpdate=="function"&&(u.flags|=1024)):(typeof S.componentDidUpdate!="function"||U===l.memoizedProps&&de===l.memoizedState||(u.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||U===l.memoizedProps&&de===l.memoizedState||(u.flags|=1024),u.memoizedProps=y,u.memoizedState=he),S.props=y,S.state=he,S.context=Q,y=Ce):(typeof S.componentDidUpdate!="function"||U===l.memoizedProps&&de===l.memoizedState||(u.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||U===l.memoizedProps&&de===l.memoizedState||(u.flags|=1024),y=!1)}return S=y,ig(l,u),y=(u.flags&128)!==0,S||y?(S=u.stateNode,h=y&&typeof h.getDerivedStateFromError!="function"?null:S.render(),u.flags|=1,l!==null&&y?(u.child=Gu(u,l.child,null,_),u.child=Gu(u,null,h,_)):Zr(l,u,h,_),u.memoizedState=S.state,l=u.child):l=oo(l,u,_),l}function uS(l,u,h,y){return $f(),u.flags|=256,Zr(l,u,h,y),u.child}var Vv={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function jv(l){return{baseLanes:l,cachePool:QA()}}function Uv(l,u,h){return l=l!==null?l.childLanes&~h:0,u&&(l|=wa),l}function dS(l,u,h){var y=u.pendingProps,_=!1,S=(u.flags&128)!==0,U;if((U=S)||(U=l!==null&&l.memoizedState===null?!1:(_r.current&2)!==0),U&&(_=!0,u.flags&=-129),U=(u.flags&32)!==0,u.flags&=-33,l===null){if(Xt){if(_?Wo(u):Yo(),Xt){var z=Wn,Q;if(Q=z){e:{for(Q=z,z=fs;Q.nodeType!==8;){if(!z){z=null;break e}if(Q=Fa(Q.nextSibling),Q===null){z=null;break e}}z=Q}z!==null?(u.memoizedState={dehydrated:z,treeContext:mc!==null?{id:to,overflow:no}:null,retryLane:536870912,hydrationErrors:null},Q=Xi(18,null,null,0),Q.stateNode=z,Q.return=u,u.child=Q,Si=u,Wn=null,Q=!0):Q=!1}Q||xc(u)}if(z=u.memoizedState,z!==null&&(z=z.dehydrated,z!==null))return Ex(z)?u.lanes=32:u.lanes=536870912,null;so(u)}return z=y.children,y=y.fallback,_?(Yo(),_=u.mode,z=ag({mode:"hidden",children:z},_),y=gc(y,_,h,null),z.return=u,y.return=u,z.sibling=y,u.child=z,_=u.child,_.memoizedState=jv(h),_.childLanes=Uv(l,U,h),u.memoizedState=Vv,y):(Wo(u),Hv(u,z))}if(Q=l.memoizedState,Q!==null&&(z=Q.dehydrated,z!==null)){if(S)u.flags&256?(Wo(u),u.flags&=-257,u=zv(l,u,h)):u.memoizedState!==null?(Yo(),u.child=l.child,u.flags|=128,u=null):(Yo(),_=y.fallback,z=u.mode,y=ag({mode:"visible",children:y.children},z),_=gc(_,z,h,null),_.flags|=2,y.return=u,_.return=u,y.sibling=_,u.child=y,Gu(u,l.child,null,h),y=u.child,y.memoizedState=jv(h),y.childLanes=Uv(l,U,h),u.memoizedState=Vv,u=_);else if(Wo(u),Ex(z)){if(U=z.nextSibling&&z.nextSibling.dataset,U)var le=U.dgst;U=le,y=Error(r(419)),y.stack="",y.digest=U,Gf({value:y,source:null,stack:null}),u=zv(l,u,h)}else if(Lr||Wf(l,u,h,!1),U=(h&l.childLanes)!==0,Lr||U){if(U=En,U!==null&&(y=h&-h,y=(y&42)!==0?1:zs(y),y=(y&(U.suspendedLanes|h))!==0?0:y,y!==0&&y!==Q.retryLane))throw Q.retryLane=y,ku(l,y),ea(U,l,y),nS;z.data==="$?"||ox(),u=zv(l,u,h)}else z.data==="$?"?(u.flags|=192,u.child=l.child,u=null):(l=Q.treeContext,Wn=Fa(z.nextSibling),Si=u,Xt=!0,vc=null,fs=!1,l!==null&&(ya[va++]=to,ya[va++]=no,ya[va++]=mc,to=l.id,no=l.overflow,mc=u),u=Hv(u,y.children),u.flags|=4096);return u}return _?(Yo(),_=y.fallback,z=u.mode,Q=l.child,le=Q.sibling,y=eo(Q,{mode:"hidden",children:y.children}),y.subtreeFlags=Q.subtreeFlags&65011712,le!==null?_=eo(le,_):(_=gc(_,z,h,null),_.flags|=2),_.return=u,y.return=u,y.sibling=_,u.child=y,y=_,_=u.child,z=l.child.memoizedState,z===null?z=jv(h):(Q=z.cachePool,Q!==null?(le=br._currentValue,Q=Q.parent!==le?{parent:le,pool:le}:Q):Q=QA(),z={baseLanes:z.baseLanes|h,cachePool:Q}),_.memoizedState=z,_.childLanes=Uv(l,U,h),u.memoizedState=Vv,y):(Wo(u),h=l.child,l=h.sibling,h=eo(h,{mode:"visible",children:y.children}),h.return=u,h.sibling=null,l!==null&&(U=u.deletions,U===null?(u.deletions=[l],u.flags|=16):U.push(l)),u.child=h,u.memoizedState=null,h)}function Hv(l,u){return u=ag({mode:"visible",children:u},l.mode),u.return=l,l.child=u}function ag(l,u){return l=Xi(22,l,null,u),l.lanes=0,l.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},l}function zv(l,u,h){return Gu(u,l.child,null,h),l=Hv(u,u.pendingProps.children),l.flags|=2,u.memoizedState=null,l}function fS(l,u,h){l.lanes|=u;var y=l.alternate;y!==null&&(y.lanes|=u),ov(l.return,u,h)}function $v(l,u,h,y,_){var S=l.memoizedState;S===null?l.memoizedState={isBackwards:u,rendering:null,renderingStartTime:0,last:y,tail:h,tailMode:_}:(S.isBackwards=u,S.rendering=null,S.renderingStartTime=0,S.last=y,S.tail=h,S.tailMode=_)}function hS(l,u,h){var y=u.pendingProps,_=y.revealOrder,S=y.tail;if(Zr(l,u,y.children,h),y=_r.current,(y&2)!==0)y=y&1|2,u.flags|=128;else{if(l!==null&&(l.flags&128)!==0)e:for(l=u.child;l!==null;){if(l.tag===13)l.memoizedState!==null&&fS(l,h,u);else if(l.tag===19)fS(l,h,u);else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===u)break e;for(;l.sibling===null;){if(l.return===null||l.return===u)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}y&=1}switch(be(_r,y),_){case"forwards":for(h=u.child,_=null;h!==null;)l=h.alternate,l!==null&&tg(l)===null&&(_=h),h=h.sibling;h=_,h===null?(_=u.child,u.child=null):(_=h.sibling,h.sibling=null),$v(u,!1,_,h,S);break;case"backwards":for(h=null,_=u.child,u.child=null;_!==null;){if(l=_.alternate,l!==null&&tg(l)===null){u.child=_;break}l=_.sibling,_.sibling=h,h=_,_=l}$v(u,!0,h,null,S);break;case"together":$v(u,!1,null,null,void 0);break;default:u.memoizedState=null}return u.child}function oo(l,u,h){if(l!==null&&(u.dependencies=l.dependencies),Zo|=u.lanes,(h&u.childLanes)===0)if(l!==null){if(Wf(l,u,h,!1),(h&u.childLanes)===0)return null}else return null;if(l!==null&&u.child!==l.child)throw Error(r(153));if(u.child!==null){for(l=u.child,h=eo(l,l.pendingProps),u.child=h,h.return=u;l.sibling!==null;)l=l.sibling,h=h.sibling=eo(l,l.pendingProps),h.return=u;h.sibling=null}return u.child}function Gv(l,u){return(l.lanes&u)!==0?!0:(l=l.dependencies,!!(l!==null&&Vp(l)))}function E6(l,u,h){switch(u.tag){case 3:Fe(u,u.stateNode.containerInfo),Uo(u,br,l.memoizedState.cache),$f();break;case 27:case 5:ye(u);break;case 4:Fe(u,u.stateNode.containerInfo);break;case 10:Uo(u,u.type,u.memoizedProps.value);break;case 13:var y=u.memoizedState;if(y!==null)return y.dehydrated!==null?(Wo(u),u.flags|=128,null):(h&u.child.childLanes)!==0?dS(l,u,h):(Wo(u),l=oo(l,u,h),l!==null?l.sibling:null);Wo(u);break;case 19:var _=(l.flags&128)!==0;if(y=(h&u.childLanes)!==0,y||(Wf(l,u,h,!1),y=(h&u.childLanes)!==0),_){if(y)return hS(l,u,h);u.flags|=128}if(_=u.memoizedState,_!==null&&(_.rendering=null,_.tail=null,_.lastEffect=null),be(_r,_r.current),y)break;return null;case 22:case 23:return u.lanes=0,sS(l,u,h);case 24:Uo(u,br,l.memoizedState.cache)}return oo(l,u,h)}function pS(l,u,h){if(l!==null)if(l.memoizedProps!==u.pendingProps)Lr=!0;else{if(!Gv(l,h)&&(u.flags&128)===0)return Lr=!1,E6(l,u,h);Lr=(l.flags&131072)!==0}else Lr=!1,Xt&&(u.flags&1048576)!==0&&$A(u,Fp,u.index);switch(u.lanes=0,u.tag){case 16:e:{l=u.pendingProps;var y=u.elementType,_=y._init;if(y=_(y._payload),u.type=y,typeof y=="function")ev(y)?(l=Ec(y,l),u.tag=1,u=cS(null,u,y,l,h)):(u.tag=0,u=Fv(null,u,y,l,h));else{if(y!=null){if(_=y.$$typeof,_===D){u.tag=11,u=rS(null,u,y,l,h);break e}else if(_===O){u.tag=14,u=iS(null,u,y,l,h);break e}}throw u=q(y)||y,Error(r(306,u,""))}}return u;case 0:return Fv(l,u,u.type,u.pendingProps,h);case 1:return y=u.type,_=Ec(y,u.pendingProps),cS(l,u,y,_,h);case 3:e:{if(Fe(u,u.stateNode.containerInfo),l===null)throw Error(r(387));y=u.pendingProps;var S=u.memoizedState;_=S.element,pv(l,u),Jf(u,y,null,h);var U=u.memoizedState;if(y=U.cache,Uo(u,br,y),y!==S.cache&&lv(u,[br],h,!0),Zf(),y=U.element,S.isDehydrated)if(S={element:y,isDehydrated:!1,cache:U.cache},u.updateQueue.baseState=S,u.memoizedState=S,u.flags&256){u=uS(l,u,y,h);break e}else if(y!==_){_=ga(Error(r(424)),u),Gf(_),u=uS(l,u,y,h);break e}else{switch(l=u.stateNode.containerInfo,l.nodeType){case 9:l=l.body;break;default:l=l.nodeName==="HTML"?l.ownerDocument.body:l}for(Wn=Fa(l.firstChild),Si=u,Xt=!0,vc=null,fs=!0,h=WE(u,null,y,h),u.child=h;h;)h.flags=h.flags&-3|4096,h=h.sibling}else{if($f(),y===_){u=oo(l,u,h);break e}Zr(l,u,y,h)}u=u.child}return u;case 26:return ig(l,u),l===null?(h=vC(u.type,null,u.pendingProps,null))?u.memoizedState=h:Xt||(h=u.type,l=u.pendingProps,y=xg(Se.current).createElement(h),y[vr]=u,y[cr]=l,ei(y,h,l),Jn(y),u.stateNode=y):u.memoizedState=vC(u.type,l.memoizedProps,u.pendingProps,l.memoizedState),null;case 27:return ye(u),l===null&&Xt&&(y=u.stateNode=gC(u.type,u.pendingProps,Se.current),Si=u,fs=!0,_=Wn,nl(u.type)?(Sx=_,Wn=Fa(y.firstChild)):Wn=_),Zr(l,u,u.pendingProps.children,h),ig(l,u),l===null&&(u.flags|=4194304),u.child;case 5:return l===null&&Xt&&((_=y=Wn)&&(y=Z6(y,u.type,u.pendingProps,fs),y!==null?(u.stateNode=y,Si=u,Wn=Fa(y.firstChild),fs=!1,_=!0):_=!1),_||xc(u)),ye(u),_=u.type,S=u.pendingProps,U=l!==null?l.memoizedProps:null,y=S.children,bx(_,S)?y=null:U!==null&&bx(_,U)&&(u.flags|=32),u.memoizedState!==null&&(_=wv(l,u,m6,null,null,h),bh._currentValue=_),ig(l,u),Zr(l,u,y,h),u.child;case 6:return l===null&&Xt&&((l=h=Wn)&&(h=J6(h,u.pendingProps,fs),h!==null?(u.stateNode=h,Si=u,Wn=null,l=!0):l=!1),l||xc(u)),null;case 13:return dS(l,u,h);case 4:return Fe(u,u.stateNode.containerInfo),y=u.pendingProps,l===null?u.child=Gu(u,null,y,h):Zr(l,u,y,h),u.child;case 11:return rS(l,u,u.type,u.pendingProps,h);case 7:return Zr(l,u,u.pendingProps,h),u.child;case 8:return Zr(l,u,u.pendingProps.children,h),u.child;case 12:return Zr(l,u,u.pendingProps.children,h),u.child;case 10:return y=u.pendingProps,Uo(u,u.type,y.value),Zr(l,u,y.children,h),u.child;case 9:return _=u.type._context,y=u.pendingProps.children,bc(u),_=ci(_),y=y(_),u.flags|=1,Zr(l,u,y,h),u.child;case 14:return iS(l,u,u.type,u.pendingProps,h);case 15:return aS(l,u,u.type,u.pendingProps,h);case 19:return hS(l,u,h);case 31:return y=u.pendingProps,h=u.mode,y={mode:y.mode,children:y.children},l===null?(h=ag(y,h),h.ref=u.ref,u.child=h,h.return=u,u=h):(h=eo(l.child,y),h.ref=u.ref,u.child=h,h.return=u,u=h),u;case 22:return sS(l,u,h);case 24:return bc(u),y=ci(br),l===null?(_=dv(),_===null&&(_=En,S=cv(),_.pooledCache=S,S.refCount++,S!==null&&(_.pooledCacheLanes|=h),_=S),u.memoizedState={parent:y,cache:_},hv(u),Uo(u,br,_)):((l.lanes&h)!==0&&(pv(l,u),Jf(u,null,null,h),Zf()),_=l.memoizedState,S=u.memoizedState,_.parent!==y?(_={parent:y,cache:y},u.memoizedState=_,u.lanes===0&&(u.memoizedState=u.updateQueue.baseState=_),Uo(u,br,y)):(y=S.cache,Uo(u,br,y),y!==_.cache&&lv(u,[br],h,!0))),Zr(l,u,u.pendingProps.children,h),u.child;case 29:throw u.pendingProps}throw Error(r(156,u.tag))}function lo(l){l.flags|=4}function gS(l,u){if(u.type!=="stylesheet"||(u.state.loading&4)!==0)l.flags&=-16777217;else if(l.flags|=16777216,!AC(u)){if(u=xa.current,u!==null&&((Ft&4194048)===Ft?hs!==null:(Ft&62914560)!==Ft&&(Ft&536870912)===0||u!==hs))throw Kf=fv,ZA;l.flags|=8192}}function sg(l,u){u!==null&&(l.flags|=4),l.flags&16384&&(u=l.tag!==22?Xr():536870912,l.lanes|=u,Xu|=u)}function sh(l,u){if(!Xt)switch(l.tailMode){case"hidden":u=l.tail;for(var h=null;u!==null;)u.alternate!==null&&(h=u),u=u.sibling;h===null?l.tail=null:h.sibling=null;break;case"collapsed":h=l.tail;for(var y=null;h!==null;)h.alternate!==null&&(y=h),h=h.sibling;y===null?u||l.tail===null?l.tail=null:l.tail.sibling=null:y.sibling=null}}function jn(l){var u=l.alternate!==null&&l.alternate.child===l.child,h=0,y=0;if(u)for(var _=l.child;_!==null;)h|=_.lanes|_.childLanes,y|=_.subtreeFlags&65011712,y|=_.flags&65011712,_.return=l,_=_.sibling;else for(_=l.child;_!==null;)h|=_.lanes|_.childLanes,y|=_.subtreeFlags,y|=_.flags,_.return=l,_=_.sibling;return l.subtreeFlags|=y,l.childLanes=h,u}function S6(l,u,h){var y=u.pendingProps;switch(iv(u),u.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return jn(u),null;case 1:return jn(u),null;case 3:return h=u.stateNode,y=null,l!==null&&(y=l.memoizedState.cache),u.memoizedState.cache!==y&&(u.flags|=2048),io(br),ae(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(l===null||l.child===null)&&(zf(u)?lo(u):l===null||l.memoizedState.isDehydrated&&(u.flags&256)===0||(u.flags|=1024,YA())),jn(u),null;case 26:return h=u.memoizedState,l===null?(lo(u),h!==null?(jn(u),gS(u,h)):(jn(u),u.flags&=-16777217)):h?h!==l.memoizedState?(lo(u),jn(u),gS(u,h)):(jn(u),u.flags&=-16777217):(l.memoizedProps!==y&&lo(u),jn(u),u.flags&=-16777217),null;case 27:pe(u),h=Se.current;var _=u.type;if(l!==null&&u.stateNode!=null)l.memoizedProps!==y&&lo(u);else{if(!y){if(u.stateNode===null)throw Error(r(166));return jn(u),null}l=Pe.current,zf(u)?GA(u):(l=gC(_,y,h),u.stateNode=l,lo(u))}return jn(u),null;case 5:if(pe(u),h=u.type,l!==null&&u.stateNode!=null)l.memoizedProps!==y&&lo(u);else{if(!y){if(u.stateNode===null)throw Error(r(166));return jn(u),null}if(l=Pe.current,zf(u))GA(u);else{switch(_=xg(Se.current),l){case 1:l=_.createElementNS("http://www.w3.org/2000/svg",h);break;case 2:l=_.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;default:switch(h){case"svg":l=_.createElementNS("http://www.w3.org/2000/svg",h);break;case"math":l=_.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;case"script":l=_.createElement("div"),l.innerHTML="<script><\/script>",l=l.removeChild(l.firstChild);break;case"select":l=typeof y.is=="string"?_.createElement("select",{is:y.is}):_.createElement("select"),y.multiple?l.multiple=!0:y.size&&(l.size=y.size);break;default:l=typeof y.is=="string"?_.createElement(h,{is:y.is}):_.createElement(h)}}l[vr]=u,l[cr]=y;e:for(_=u.child;_!==null;){if(_.tag===5||_.tag===6)l.appendChild(_.stateNode);else if(_.tag!==4&&_.tag!==27&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===u)break e;for(;_.sibling===null;){if(_.return===null||_.return===u)break e;_=_.return}_.sibling.return=_.return,_=_.sibling}u.stateNode=l;e:switch(ei(l,h,y),h){case"button":case"input":case"select":case"textarea":l=!!y.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&lo(u)}}return jn(u),u.flags&=-16777217,null;case 6:if(l&&u.stateNode!=null)l.memoizedProps!==y&&lo(u);else{if(typeof y!="string"&&u.stateNode===null)throw Error(r(166));if(l=Se.current,zf(u)){if(l=u.stateNode,h=u.memoizedProps,y=null,_=Si,_!==null)switch(_.tag){case 27:case 5:y=_.memoizedProps}l[vr]=u,l=!!(l.nodeValue===h||y!==null&&y.suppressHydrationWarning===!0||lC(l.nodeValue,h)),l||xc(u)}else l=xg(l).createTextNode(y),l[vr]=u,u.stateNode=l}return jn(u),null;case 13:if(y=u.memoizedState,l===null||l.memoizedState!==null&&l.memoizedState.dehydrated!==null){if(_=zf(u),y!==null&&y.dehydrated!==null){if(l===null){if(!_)throw Error(r(318));if(_=u.memoizedState,_=_!==null?_.dehydrated:null,!_)throw Error(r(317));_[vr]=u}else $f(),(u.flags&128)===0&&(u.memoizedState=null),u.flags|=4;jn(u),_=!1}else _=YA(),l!==null&&l.memoizedState!==null&&(l.memoizedState.hydrationErrors=_),_=!0;if(!_)return u.flags&256?(so(u),u):(so(u),null)}if(so(u),(u.flags&128)!==0)return u.lanes=h,u;if(h=y!==null,l=l!==null&&l.memoizedState!==null,h){y=u.child,_=null,y.alternate!==null&&y.alternate.memoizedState!==null&&y.alternate.memoizedState.cachePool!==null&&(_=y.alternate.memoizedState.cachePool.pool);var S=null;y.memoizedState!==null&&y.memoizedState.cachePool!==null&&(S=y.memoizedState.cachePool.pool),S!==_&&(y.flags|=2048)}return h!==l&&h&&(u.child.flags|=8192),sg(u,u.updateQueue),jn(u),null;case 4:return ae(),l===null&&mx(u.stateNode.containerInfo),jn(u),null;case 10:return io(u.type),jn(u),null;case 19:if(ve(_r),_=u.memoizedState,_===null)return jn(u),null;if(y=(u.flags&128)!==0,S=_.rendering,S===null)if(y)sh(_,!1);else{if(Yn!==0||l!==null&&(l.flags&128)!==0)for(l=u.child;l!==null;){if(S=tg(l),S!==null){for(u.flags|=128,sh(_,!1),l=S.updateQueue,u.updateQueue=l,sg(u,l),u.subtreeFlags=0,l=h,h=u.child;h!==null;)zA(h,l),h=h.sibling;return be(_r,_r.current&1|2),u.child}l=l.sibling}_.tail!==null&&Re()>cg&&(u.flags|=128,y=!0,sh(_,!1),u.lanes=4194304)}else{if(!y)if(l=tg(S),l!==null){if(u.flags|=128,y=!0,l=l.updateQueue,u.updateQueue=l,sg(u,l),sh(_,!0),_.tail===null&&_.tailMode==="hidden"&&!S.alternate&&!Xt)return jn(u),null}else 2*Re()-_.renderingStartTime>cg&&h!==536870912&&(u.flags|=128,y=!0,sh(_,!1),u.lanes=4194304);_.isBackwards?(S.sibling=u.child,u.child=S):(l=_.last,l!==null?l.sibling=S:u.child=S,_.last=S)}return _.tail!==null?(u=_.tail,_.rendering=u,_.tail=u.sibling,_.renderingStartTime=Re(),u.sibling=null,l=_r.current,be(_r,y?l&1|2:l&1),u):(jn(u),null);case 22:case 23:return so(u),vv(),y=u.memoizedState!==null,l!==null?l.memoizedState!==null!==y&&(u.flags|=8192):y&&(u.flags|=8192),y?(h&536870912)!==0&&(u.flags&128)===0&&(jn(u),u.subtreeFlags&6&&(u.flags|=8192)):jn(u),h=u.updateQueue,h!==null&&sg(u,h.retryQueue),h=null,l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(h=l.memoizedState.cachePool.pool),y=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(y=u.memoizedState.cachePool.pool),y!==h&&(u.flags|=2048),l!==null&&ve(_c),null;case 24:return h=null,l!==null&&(h=l.memoizedState.cache),u.memoizedState.cache!==h&&(u.flags|=2048),io(br),jn(u),null;case 25:return null;case 30:return null}throw Error(r(156,u.tag))}function C6(l,u){switch(iv(u),u.tag){case 1:return l=u.flags,l&65536?(u.flags=l&-65537|128,u):null;case 3:return io(br),ae(),l=u.flags,(l&65536)!==0&&(l&128)===0?(u.flags=l&-65537|128,u):null;case 26:case 27:case 5:return pe(u),null;case 13:if(so(u),l=u.memoizedState,l!==null&&l.dehydrated!==null){if(u.alternate===null)throw Error(r(340));$f()}return l=u.flags,l&65536?(u.flags=l&-65537|128,u):null;case 19:return ve(_r),null;case 4:return ae(),null;case 10:return io(u.type),null;case 22:case 23:return so(u),vv(),l!==null&&ve(_c),l=u.flags,l&65536?(u.flags=l&-65537|128,u):null;case 24:return io(br),null;case 25:return null;default:return null}}function mS(l,u){switch(iv(u),u.tag){case 3:io(br),ae();break;case 26:case 27:case 5:pe(u);break;case 4:ae();break;case 13:so(u);break;case 19:ve(_r);break;case 10:io(u.type);break;case 22:case 23:so(u),vv(),l!==null&&ve(_c);break;case 24:io(br)}}function oh(l,u){try{var h=u.updateQueue,y=h!==null?h.lastEffect:null;if(y!==null){var _=y.next;h=_;do{if((h.tag&l)===l){y=void 0;var S=h.create,U=h.inst;y=S(),U.destroy=y}h=h.next}while(h!==_)}}catch(z){bn(u,u.return,z)}}function qo(l,u,h){try{var y=u.updateQueue,_=y!==null?y.lastEffect:null;if(_!==null){var S=_.next;y=S;do{if((y.tag&l)===l){var U=y.inst,z=U.destroy;if(z!==void 0){U.destroy=void 0,_=u;var Q=h,le=z;try{le()}catch(Ce){bn(_,Q,Ce)}}}y=y.next}while(y!==S)}}catch(Ce){bn(u,u.return,Ce)}}function yS(l){var u=l.updateQueue;if(u!==null){var h=l.stateNode;try{iE(u,h)}catch(y){bn(l,l.return,y)}}}function vS(l,u,h){h.props=Ec(l.type,l.memoizedProps),h.state=l.memoizedState;try{h.componentWillUnmount()}catch(y){bn(l,u,y)}}function lh(l,u){try{var h=l.ref;if(h!==null){switch(l.tag){case 26:case 27:case 5:var y=l.stateNode;break;case 30:y=l.stateNode;break;default:y=l.stateNode}typeof h=="function"?l.refCleanup=h(y):h.current=y}}catch(_){bn(l,u,_)}}function ps(l,u){var h=l.ref,y=l.refCleanup;if(h!==null)if(typeof y=="function")try{y()}catch(_){bn(l,u,_)}finally{l.refCleanup=null,l=l.alternate,l!=null&&(l.refCleanup=null)}else if(typeof h=="function")try{h(null)}catch(_){bn(l,u,_)}else h.current=null}function xS(l){var u=l.type,h=l.memoizedProps,y=l.stateNode;try{e:switch(u){case"button":case"input":case"select":case"textarea":h.autoFocus&&y.focus();break e;case"img":h.src?y.src=h.src:h.srcSet&&(y.srcset=h.srcSet)}}catch(_){bn(l,l.return,_)}}function Wv(l,u,h){try{var y=l.stateNode;Y6(y,l.type,h,u),y[cr]=u}catch(_){bn(l,l.return,_)}}function wS(l){return l.tag===5||l.tag===3||l.tag===26||l.tag===27&&nl(l.type)||l.tag===4}function Yv(l){e:for(;;){for(;l.sibling===null;){if(l.return===null||wS(l.return))return null;l=l.return}for(l.sibling.return=l.return,l=l.sibling;l.tag!==5&&l.tag!==6&&l.tag!==18;){if(l.tag===27&&nl(l.type)||l.flags&2||l.child===null||l.tag===4)continue e;l.child.return=l,l=l.child}if(!(l.flags&2))return l.stateNode}}function qv(l,u,h){var y=l.tag;if(y===5||y===6)l=l.stateNode,u?(h.nodeType===9?h.body:h.nodeName==="HTML"?h.ownerDocument.body:h).insertBefore(l,u):(u=h.nodeType===9?h.body:h.nodeName==="HTML"?h.ownerDocument.body:h,u.appendChild(l),h=h._reactRootContainer,h!=null||u.onclick!==null||(u.onclick=vg));else if(y!==4&&(y===27&&nl(l.type)&&(h=l.stateNode,u=null),l=l.child,l!==null))for(qv(l,u,h),l=l.sibling;l!==null;)qv(l,u,h),l=l.sibling}function og(l,u,h){var y=l.tag;if(y===5||y===6)l=l.stateNode,u?h.insertBefore(l,u):h.appendChild(l);else if(y!==4&&(y===27&&nl(l.type)&&(h=l.stateNode),l=l.child,l!==null))for(og(l,u,h),l=l.sibling;l!==null;)og(l,u,h),l=l.sibling}function bS(l){var u=l.stateNode,h=l.memoizedProps;try{for(var y=l.type,_=u.attributes;_.length;)u.removeAttributeNode(_[0]);ei(u,y,h),u[vr]=l,u[cr]=h}catch(S){bn(l,l.return,S)}}var co=!1,tr=!1,Xv=!1,_S=typeof WeakSet=="function"?WeakSet:Set,Br=null;function T6(l,u){if(l=l.containerInfo,xx=Sg,l=PA(l),Yy(l)){if("selectionStart"in l)var h={start:l.selectionStart,end:l.selectionEnd};else e:{h=(h=l.ownerDocument)&&h.defaultView||window;var y=h.getSelection&&h.getSelection();if(y&&y.rangeCount!==0){h=y.anchorNode;var _=y.anchorOffset,S=y.focusNode;y=y.focusOffset;try{h.nodeType,S.nodeType}catch{h=null;break e}var U=0,z=-1,Q=-1,le=0,Ce=0,Ie=l,de=null;t:for(;;){for(var he;Ie!==h||_!==0&&Ie.nodeType!==3||(z=U+_),Ie!==S||y!==0&&Ie.nodeType!==3||(Q=U+y),Ie.nodeType===3&&(U+=Ie.nodeValue.length),(he=Ie.firstChild)!==null;)de=Ie,Ie=he;for(;;){if(Ie===l)break t;if(de===h&&++le===_&&(z=U),de===S&&++Ce===y&&(Q=U),(he=Ie.nextSibling)!==null)break;Ie=de,de=Ie.parentNode}Ie=he}h=z===-1||Q===-1?null:{start:z,end:Q}}else h=null}h=h||{start:0,end:0}}else h=null;for(wx={focusedElem:l,selectionRange:h},Sg=!1,Br=u;Br!==null;)if(u=Br,l=u.child,(u.subtreeFlags&1024)!==0&&l!==null)l.return=u,Br=l;else for(;Br!==null;){switch(u=Br,S=u.alternate,l=u.flags,u.tag){case 0:break;case 11:case 15:break;case 1:if((l&1024)!==0&&S!==null){l=void 0,h=u,_=S.memoizedProps,S=S.memoizedState,y=h.stateNode;try{var ut=Ec(h.type,_,h.elementType===h.type);l=y.getSnapshotBeforeUpdate(ut,S),y.__reactInternalSnapshotBeforeUpdate=l}catch(st){bn(h,h.return,st)}}break;case 3:if((l&1024)!==0){if(l=u.stateNode.containerInfo,h=l.nodeType,h===9)Ax(l);else if(h===1)switch(l.nodeName){case"HEAD":case"HTML":case"BODY":Ax(l);break;default:l.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((l&1024)!==0)throw Error(r(163))}if(l=u.sibling,l!==null){l.return=u.return,Br=l;break}Br=u.return}}function AS(l,u,h){var y=h.flags;switch(h.tag){case 0:case 11:case 15:Xo(l,h),y&4&&oh(5,h);break;case 1:if(Xo(l,h),y&4)if(l=h.stateNode,u===null)try{l.componentDidMount()}catch(U){bn(h,h.return,U)}else{var _=Ec(h.type,u.memoizedProps);u=u.memoizedState;try{l.componentDidUpdate(_,u,l.__reactInternalSnapshotBeforeUpdate)}catch(U){bn(h,h.return,U)}}y&64&&yS(h),y&512&&lh(h,h.return);break;case 3:if(Xo(l,h),y&64&&(l=h.updateQueue,l!==null)){if(u=null,h.child!==null)switch(h.child.tag){case 27:case 5:u=h.child.stateNode;break;case 1:u=h.child.stateNode}try{iE(l,u)}catch(U){bn(h,h.return,U)}}break;case 27:u===null&&y&4&&bS(h);case 26:case 5:Xo(l,h),u===null&&y&4&&xS(h),y&512&&lh(h,h.return);break;case 12:Xo(l,h);break;case 13:Xo(l,h),y&4&&CS(l,h),y&64&&(l=h.memoizedState,l!==null&&(l=l.dehydrated,l!==null&&(h=L6.bind(null,h),eN(l,h))));break;case 22:if(y=h.memoizedState!==null||co,!y){u=u!==null&&u.memoizedState!==null||tr,_=co;var S=tr;co=y,(tr=u)&&!S?Ko(l,h,(h.subtreeFlags&8772)!==0):Xo(l,h),co=_,tr=S}break;case 30:break;default:Xo(l,h)}}function ES(l){var u=l.alternate;u!==null&&(l.alternate=null,ES(u)),l.child=null,l.deletions=null,l.sibling=null,l.tag===5&&(u=l.stateNode,u!==null&&Bo(u)),l.stateNode=null,l.return=null,l.dependencies=null,l.memoizedProps=null,l.memoizedState=null,l.pendingProps=null,l.stateNode=null,l.updateQueue=null}var Pn=null,ki=!1;function uo(l,u,h){for(h=h.child;h!==null;)SS(l,u,h),h=h.sibling}function SS(l,u,h){if(at&&typeof at.onCommitFiberUnmount=="function")try{at.onCommitFiberUnmount(rt,h)}catch{}switch(h.tag){case 26:tr||ps(h,u),uo(l,u,h),h.memoizedState?h.memoizedState.count--:h.stateNode&&(h=h.stateNode,h.parentNode.removeChild(h));break;case 27:tr||ps(h,u);var y=Pn,_=ki;nl(h.type)&&(Pn=h.stateNode,ki=!1),uo(l,u,h),yh(h.stateNode),Pn=y,ki=_;break;case 5:tr||ps(h,u);case 6:if(y=Pn,_=ki,Pn=null,uo(l,u,h),Pn=y,ki=_,Pn!==null)if(ki)try{(Pn.nodeType===9?Pn.body:Pn.nodeName==="HTML"?Pn.ownerDocument.body:Pn).removeChild(h.stateNode)}catch(S){bn(h,u,S)}else try{Pn.removeChild(h.stateNode)}catch(S){bn(h,u,S)}break;case 18:Pn!==null&&(ki?(l=Pn,hC(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,h.stateNode),Sh(l)):hC(Pn,h.stateNode));break;case 4:y=Pn,_=ki,Pn=h.stateNode.containerInfo,ki=!0,uo(l,u,h),Pn=y,ki=_;break;case 0:case 11:case 14:case 15:tr||qo(2,h,u),tr||qo(4,h,u),uo(l,u,h);break;case 1:tr||(ps(h,u),y=h.stateNode,typeof y.componentWillUnmount=="function"&&vS(h,u,y)),uo(l,u,h);break;case 21:uo(l,u,h);break;case 22:tr=(y=tr)||h.memoizedState!==null,uo(l,u,h),tr=y;break;default:uo(l,u,h)}}function CS(l,u){if(u.memoizedState===null&&(l=u.alternate,l!==null&&(l=l.memoizedState,l!==null&&(l=l.dehydrated,l!==null))))try{Sh(l)}catch(h){bn(u,u.return,h)}}function I6(l){switch(l.tag){case 13:case 19:var u=l.stateNode;return u===null&&(u=l.stateNode=new _S),u;case 22:return l=l.stateNode,u=l._retryCache,u===null&&(u=l._retryCache=new _S),u;default:throw Error(r(435,l.tag))}}function Kv(l,u){var h=I6(l);u.forEach(function(y){var _=B6.bind(null,l,y);h.has(y)||(h.add(y),y.then(_,_))})}function Ki(l,u){var h=u.deletions;if(h!==null)for(var y=0;y<h.length;y++){var _=h[y],S=l,U=u,z=U;e:for(;z!==null;){switch(z.tag){case 27:if(nl(z.type)){Pn=z.stateNode,ki=!1;break e}break;case 5:Pn=z.stateNode,ki=!1;break e;case 3:case 4:Pn=z.stateNode.containerInfo,ki=!0;break e}z=z.return}if(Pn===null)throw Error(r(160));SS(S,U,_),Pn=null,ki=!1,S=_.alternate,S!==null&&(S.return=null),_.return=null}if(u.subtreeFlags&13878)for(u=u.child;u!==null;)TS(u,l),u=u.sibling}var Ba=null;function TS(l,u){var h=l.alternate,y=l.flags;switch(l.tag){case 0:case 11:case 14:case 15:Ki(u,l),Qi(l),y&4&&(qo(3,l,l.return),oh(3,l),qo(5,l,l.return));break;case 1:Ki(u,l),Qi(l),y&512&&(tr||h===null||ps(h,h.return)),y&64&&co&&(l=l.updateQueue,l!==null&&(y=l.callbacks,y!==null&&(h=l.shared.hiddenCallbacks,l.shared.hiddenCallbacks=h===null?y:h.concat(y))));break;case 26:var _=Ba;if(Ki(u,l),Qi(l),y&512&&(tr||h===null||ps(h,h.return)),y&4){var S=h!==null?h.memoizedState:null;if(y=l.memoizedState,h===null)if(y===null)if(l.stateNode===null){e:{y=l.type,h=l.memoizedProps,_=_.ownerDocument||_;t:switch(y){case"title":S=_.getElementsByTagName("title")[0],(!S||S[Jl]||S[vr]||S.namespaceURI==="http://www.w3.org/2000/svg"||S.hasAttribute("itemprop"))&&(S=_.createElement(y),_.head.insertBefore(S,_.querySelector("head > title"))),ei(S,y,h),S[vr]=l,Jn(S),y=S;break e;case"link":var U=bC("link","href",_).get(y+(h.href||""));if(U){for(var z=0;z<U.length;z++)if(S=U[z],S.getAttribute("href")===(h.href==null||h.href===""?null:h.href)&&S.getAttribute("rel")===(h.rel==null?null:h.rel)&&S.getAttribute("title")===(h.title==null?null:h.title)&&S.getAttribute("crossorigin")===(h.crossOrigin==null?null:h.crossOrigin)){U.splice(z,1);break t}}S=_.createElement(y),ei(S,y,h),_.head.appendChild(S);break;case"meta":if(U=bC("meta","content",_).get(y+(h.content||""))){for(z=0;z<U.length;z++)if(S=U[z],S.getAttribute("content")===(h.content==null?null:""+h.content)&&S.getAttribute("name")===(h.name==null?null:h.name)&&S.getAttribute("property")===(h.property==null?null:h.property)&&S.getAttribute("http-equiv")===(h.httpEquiv==null?null:h.httpEquiv)&&S.getAttribute("charset")===(h.charSet==null?null:h.charSet)){U.splice(z,1);break t}}S=_.createElement(y),ei(S,y,h),_.head.appendChild(S);break;default:throw Error(r(468,y))}S[vr]=l,Jn(S),y=S}l.stateNode=y}else _C(_,l.type,l.stateNode);else l.stateNode=wC(_,y,l.memoizedProps);else S!==y?(S===null?h.stateNode!==null&&(h=h.stateNode,h.parentNode.removeChild(h)):S.count--,y===null?_C(_,l.type,l.stateNode):wC(_,y,l.memoizedProps)):y===null&&l.stateNode!==null&&Wv(l,l.memoizedProps,h.memoizedProps)}break;case 27:Ki(u,l),Qi(l),y&512&&(tr||h===null||ps(h,h.return)),h!==null&&y&4&&Wv(l,l.memoizedProps,h.memoizedProps);break;case 5:if(Ki(u,l),Qi(l),y&512&&(tr||h===null||ps(h,h.return)),l.flags&32){_=l.stateNode;try{da(_,"")}catch(he){bn(l,l.return,he)}}y&4&&l.stateNode!=null&&(_=l.memoizedProps,Wv(l,_,h!==null?h.memoizedProps:_)),y&1024&&(Xv=!0);break;case 6:if(Ki(u,l),Qi(l),y&4){if(l.stateNode===null)throw Error(r(162));y=l.memoizedProps,h=l.stateNode;try{h.nodeValue=y}catch(he){bn(l,l.return,he)}}break;case 3:if(_g=null,_=Ba,Ba=wg(u.containerInfo),Ki(u,l),Ba=_,Qi(l),y&4&&h!==null&&h.memoizedState.isDehydrated)try{Sh(u.containerInfo)}catch(he){bn(l,l.return,he)}Xv&&(Xv=!1,IS(l));break;case 4:y=Ba,Ba=wg(l.stateNode.containerInfo),Ki(u,l),Qi(l),Ba=y;break;case 12:Ki(u,l),Qi(l);break;case 13:Ki(u,l),Qi(l),l.child.flags&8192&&l.memoizedState!==null!=(h!==null&&h.memoizedState!==null)&&(nx=Re()),y&4&&(y=l.updateQueue,y!==null&&(l.updateQueue=null,Kv(l,y)));break;case 22:_=l.memoizedState!==null;var Q=h!==null&&h.memoizedState!==null,le=co,Ce=tr;if(co=le||_,tr=Ce||Q,Ki(u,l),tr=Ce,co=le,Qi(l),y&8192)e:for(u=l.stateNode,u._visibility=_?u._visibility&-2:u._visibility|1,_&&(h===null||Q||co||tr||Sc(l)),h=null,u=l;;){if(u.tag===5||u.tag===26){if(h===null){Q=h=u;try{if(S=Q.stateNode,_)U=S.style,typeof U.setProperty=="function"?U.setProperty("display","none","important"):U.display="none";else{z=Q.stateNode;var Ie=Q.memoizedProps.style,de=Ie!=null&&Ie.hasOwnProperty("display")?Ie.display:null;z.style.display=de==null||typeof de=="boolean"?"":(""+de).trim()}}catch(he){bn(Q,Q.return,he)}}}else if(u.tag===6){if(h===null){Q=u;try{Q.stateNode.nodeValue=_?"":Q.memoizedProps}catch(he){bn(Q,Q.return,he)}}}else if((u.tag!==22&&u.tag!==23||u.memoizedState===null||u===l)&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===l)break e;for(;u.sibling===null;){if(u.return===null||u.return===l)break e;h===u&&(h=null),u=u.return}h===u&&(h=null),u.sibling.return=u.return,u=u.sibling}y&4&&(y=l.updateQueue,y!==null&&(h=y.retryQueue,h!==null&&(y.retryQueue=null,Kv(l,h))));break;case 19:Ki(u,l),Qi(l),y&4&&(y=l.updateQueue,y!==null&&(l.updateQueue=null,Kv(l,y)));break;case 30:break;case 21:break;default:Ki(u,l),Qi(l)}}function Qi(l){var u=l.flags;if(u&2){try{for(var h,y=l.return;y!==null;){if(wS(y)){h=y;break}y=y.return}if(h==null)throw Error(r(160));switch(h.tag){case 27:var _=h.stateNode,S=Yv(l);og(l,S,_);break;case 5:var U=h.stateNode;h.flags&32&&(da(U,""),h.flags&=-33);var z=Yv(l);og(l,z,U);break;case 3:case 4:var Q=h.stateNode.containerInfo,le=Yv(l);qv(l,le,Q);break;default:throw Error(r(161))}}catch(Ce){bn(l,l.return,Ce)}l.flags&=-3}u&4096&&(l.flags&=-4097)}function IS(l){if(l.subtreeFlags&1024)for(l=l.child;l!==null;){var u=l;IS(u),u.tag===5&&u.flags&1024&&u.stateNode.reset(),l=l.sibling}}function Xo(l,u){if(u.subtreeFlags&8772)for(u=u.child;u!==null;)AS(l,u.alternate,u),u=u.sibling}function Sc(l){for(l=l.child;l!==null;){var u=l;switch(u.tag){case 0:case 11:case 14:case 15:qo(4,u,u.return),Sc(u);break;case 1:ps(u,u.return);var h=u.stateNode;typeof h.componentWillUnmount=="function"&&vS(u,u.return,h),Sc(u);break;case 27:yh(u.stateNode);case 26:case 5:ps(u,u.return),Sc(u);break;case 22:u.memoizedState===null&&Sc(u);break;case 30:Sc(u);break;default:Sc(u)}l=l.sibling}}function Ko(l,u,h){for(h=h&&(u.subtreeFlags&8772)!==0,u=u.child;u!==null;){var y=u.alternate,_=l,S=u,U=S.flags;switch(S.tag){case 0:case 11:case 15:Ko(_,S,h),oh(4,S);break;case 1:if(Ko(_,S,h),y=S,_=y.stateNode,typeof _.componentDidMount=="function")try{_.componentDidMount()}catch(le){bn(y,y.return,le)}if(y=S,_=y.updateQueue,_!==null){var z=y.stateNode;try{var Q=_.shared.hiddenCallbacks;if(Q!==null)for(_.shared.hiddenCallbacks=null,_=0;_<Q.length;_++)rE(Q[_],z)}catch(le){bn(y,y.return,le)}}h&&U&64&&yS(S),lh(S,S.return);break;case 27:bS(S);case 26:case 5:Ko(_,S,h),h&&y===null&&U&4&&xS(S),lh(S,S.return);break;case 12:Ko(_,S,h);break;case 13:Ko(_,S,h),h&&U&4&&CS(_,S);break;case 22:S.memoizedState===null&&Ko(_,S,h),lh(S,S.return);break;case 30:break;default:Ko(_,S,h)}u=u.sibling}}function Qv(l,u){var h=null;l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(h=l.memoizedState.cachePool.pool),l=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(l=u.memoizedState.cachePool.pool),l!==h&&(l!=null&&l.refCount++,h!=null&&Yf(h))}function Zv(l,u){l=null,u.alternate!==null&&(l=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==l&&(u.refCount++,l!=null&&Yf(l))}function gs(l,u,h,y){if(u.subtreeFlags&10256)for(u=u.child;u!==null;)DS(l,u,h,y),u=u.sibling}function DS(l,u,h,y){var _=u.flags;switch(u.tag){case 0:case 11:case 15:gs(l,u,h,y),_&2048&&oh(9,u);break;case 1:gs(l,u,h,y);break;case 3:gs(l,u,h,y),_&2048&&(l=null,u.alternate!==null&&(l=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==l&&(u.refCount++,l!=null&&Yf(l)));break;case 12:if(_&2048){gs(l,u,h,y),l=u.stateNode;try{var S=u.memoizedProps,U=S.id,z=S.onPostCommit;typeof z=="function"&&z(U,u.alternate===null?"mount":"update",l.passiveEffectDuration,-0)}catch(Q){bn(u,u.return,Q)}}else gs(l,u,h,y);break;case 13:gs(l,u,h,y);break;case 23:break;case 22:S=u.stateNode,U=u.alternate,u.memoizedState!==null?S._visibility&2?gs(l,u,h,y):ch(l,u):S._visibility&2?gs(l,u,h,y):(S._visibility|=2,Wu(l,u,h,y,(u.subtreeFlags&10256)!==0)),_&2048&&Qv(U,u);break;case 24:gs(l,u,h,y),_&2048&&Zv(u.alternate,u);break;default:gs(l,u,h,y)}}function Wu(l,u,h,y,_){for(_=_&&(u.subtreeFlags&10256)!==0,u=u.child;u!==null;){var S=l,U=u,z=h,Q=y,le=U.flags;switch(U.tag){case 0:case 11:case 15:Wu(S,U,z,Q,_),oh(8,U);break;case 23:break;case 22:var Ce=U.stateNode;U.memoizedState!==null?Ce._visibility&2?Wu(S,U,z,Q,_):ch(S,U):(Ce._visibility|=2,Wu(S,U,z,Q,_)),_&&le&2048&&Qv(U.alternate,U);break;case 24:Wu(S,U,z,Q,_),_&&le&2048&&Zv(U.alternate,U);break;default:Wu(S,U,z,Q,_)}u=u.sibling}}function ch(l,u){if(u.subtreeFlags&10256)for(u=u.child;u!==null;){var h=l,y=u,_=y.flags;switch(y.tag){case 22:ch(h,y),_&2048&&Qv(y.alternate,y);break;case 24:ch(h,y),_&2048&&Zv(y.alternate,y);break;default:ch(h,y)}u=u.sibling}}var uh=8192;function Yu(l){if(l.subtreeFlags&uh)for(l=l.child;l!==null;)RS(l),l=l.sibling}function RS(l){switch(l.tag){case 26:Yu(l),l.flags&uh&&l.memoizedState!==null&&hN(Ba,l.memoizedState,l.memoizedProps);break;case 5:Yu(l);break;case 3:case 4:var u=Ba;Ba=wg(l.stateNode.containerInfo),Yu(l),Ba=u;break;case 22:l.memoizedState===null&&(u=l.alternate,u!==null&&u.memoizedState!==null?(u=uh,uh=16777216,Yu(l),uh=u):Yu(l));break;default:Yu(l)}}function MS(l){var u=l.alternate;if(u!==null&&(l=u.child,l!==null)){u.child=null;do u=l.sibling,l.sibling=null,l=u;while(l!==null)}}function dh(l){var u=l.deletions;if((l.flags&16)!==0){if(u!==null)for(var h=0;h<u.length;h++){var y=u[h];Br=y,PS(y,l)}MS(l)}if(l.subtreeFlags&10256)for(l=l.child;l!==null;)OS(l),l=l.sibling}function OS(l){switch(l.tag){case 0:case 11:case 15:dh(l),l.flags&2048&&qo(9,l,l.return);break;case 3:dh(l);break;case 12:dh(l);break;case 22:var u=l.stateNode;l.memoizedState!==null&&u._visibility&2&&(l.return===null||l.return.tag!==13)?(u._visibility&=-3,lg(l)):dh(l);break;default:dh(l)}}function lg(l){var u=l.deletions;if((l.flags&16)!==0){if(u!==null)for(var h=0;h<u.length;h++){var y=u[h];Br=y,PS(y,l)}MS(l)}for(l=l.child;l!==null;){switch(u=l,u.tag){case 0:case 11:case 15:qo(8,u,u.return),lg(u);break;case 22:h=u.stateNode,h._visibility&2&&(h._visibility&=-3,lg(u));break;default:lg(u)}l=l.sibling}}function PS(l,u){for(;Br!==null;){var h=Br;switch(h.tag){case 0:case 11:case 15:qo(8,h,u);break;case 23:case 22:if(h.memoizedState!==null&&h.memoizedState.cachePool!==null){var y=h.memoizedState.cachePool.pool;y!=null&&y.refCount++}break;case 24:Yf(h.memoizedState.cache)}if(y=h.child,y!==null)y.return=h,Br=y;else e:for(h=l;Br!==null;){y=Br;var _=y.sibling,S=y.return;if(ES(y),y===h){Br=null;break e}if(_!==null){_.return=S,Br=_;break e}Br=S}}}var D6={getCacheForType:function(l){var u=ci(br),h=u.data.get(l);return h===void 0&&(h=l(),u.data.set(l,h)),h}},R6=typeof WeakMap=="function"?WeakMap:Map,an=0,En=null,Dt=null,Ft=0,sn=0,Zi=null,Qo=!1,qu=!1,Jv=!1,fo=0,Yn=0,Zo=0,Cc=0,ex=0,wa=0,Xu=0,fh=null,Ni=null,tx=!1,nx=0,cg=1/0,ug=null,Jo=null,Jr=0,el=null,Ku=null,Qu=0,rx=0,ix=null,kS=null,hh=0,ax=null;function Ji(){if((an&2)!==0&&Ft!==0)return Ft&-Ft;if(G.T!==null){var l=Fu;return l!==0?l:fx()}return lr()}function NS(){wa===0&&(wa=(Ft&536870912)===0||Xt?Zn():536870912);var l=xa.current;return l!==null&&(l.flags|=32),wa}function ea(l,u,h){(l===En&&(sn===2||sn===9)||l.cancelPendingCommit!==null)&&(Zu(l,0),tl(l,Ft,wa,!1)),or(l,h),((an&2)===0||l!==En)&&(l===En&&((an&2)===0&&(Cc|=h),Yn===4&&tl(l,Ft,wa,!1)),ms(l))}function LS(l,u,h){if((an&6)!==0)throw Error(r(327));var y=!h&&(u&124)===0&&(u&l.expiredLanes)===0||yt(l,u),_=y?P6(l,u):lx(l,u,!0),S=y;do{if(_===0){qu&&!y&&tl(l,u,0,!1);break}else{if(h=l.current.alternate,S&&!M6(h)){_=lx(l,u,!1),S=!1;continue}if(_===2){if(S=u,l.errorRecoveryDisabledLanes&S)var U=0;else U=l.pendingLanes&-536870913,U=U!==0?U:U&536870912?536870912:0;if(U!==0){u=U;e:{var z=l;_=fh;var Q=z.current.memoizedState.isDehydrated;if(Q&&(Zu(z,U).flags|=256),U=lx(z,U,!1),U!==2){if(Jv&&!Q){z.errorRecoveryDisabledLanes|=S,Cc|=S,_=4;break e}S=Ni,Ni=_,S!==null&&(Ni===null?Ni=S:Ni.push.apply(Ni,S))}_=U}if(S=!1,_!==2)continue}}if(_===1){Zu(l,0),tl(l,u,0,!0);break}e:{switch(y=l,S=_,S){case 0:case 1:throw Error(r(345));case 4:if((u&4194048)!==u)break;case 6:tl(y,u,wa,!Qo);break e;case 2:Ni=null;break;case 3:case 5:break;default:throw Error(r(329))}if((u&62914560)===u&&(_=nx+300-Re(),10<_)){if(tl(y,u,wa,!Qo),qr(y,0,!0)!==0)break e;y.timeoutHandle=dC(BS.bind(null,y,h,Ni,ug,tx,u,wa,Cc,Xu,Qo,S,2,-0,0),_);break e}BS(y,h,Ni,ug,tx,u,wa,Cc,Xu,Qo,S,0,-0,0)}}break}while(!0);ms(l)}function BS(l,u,h,y,_,S,U,z,Q,le,Ce,Ie,de,he){if(l.timeoutHandle=-1,Ie=u.subtreeFlags,(Ie&8192||(Ie&16785408)===16785408)&&(wh={stylesheets:null,count:0,unsuspend:fN},RS(u),Ie=pN(),Ie!==null)){l.cancelPendingCommit=Ie($S.bind(null,l,u,S,h,y,_,U,z,Q,Ce,1,de,he)),tl(l,S,U,!le);return}$S(l,u,S,h,y,_,U,z,Q)}function M6(l){for(var u=l;;){var h=u.tag;if((h===0||h===11||h===15)&&u.flags&16384&&(h=u.updateQueue,h!==null&&(h=h.stores,h!==null)))for(var y=0;y<h.length;y++){var _=h[y],S=_.getSnapshot;_=_.value;try{if(!qi(S(),_))return!1}catch{return!1}}if(h=u.child,u.subtreeFlags&16384&&h!==null)h.return=u,u=h;else{if(u===l)break;for(;u.sibling===null;){if(u.return===null||u.return===l)return!0;u=u.return}u.sibling.return=u.return,u=u.sibling}}return!0}function tl(l,u,h,y){u&=~ex,u&=~Cc,l.suspendedLanes|=u,l.pingedLanes&=~u,y&&(l.warmLanes|=u),y=l.expirationTimes;for(var _=u;0<_;){var S=31-Qe(_),U=1<<S;y[S]=-1,_&=~U}h!==0&&ca(l,h,u)}function dg(){return(an&6)===0?(ph(0),!1):!0}function sx(){if(Dt!==null){if(sn===0)var l=Dt.return;else l=Dt,ro=wc=null,Av(l),$u=null,ih=0,l=Dt;for(;l!==null;)mS(l.alternate,l),l=l.return;Dt=null}}function Zu(l,u){var h=l.timeoutHandle;h!==-1&&(l.timeoutHandle=-1,X6(h)),h=l.cancelPendingCommit,h!==null&&(l.cancelPendingCommit=null,h()),sx(),En=l,Dt=h=eo(l.current,null),Ft=u,sn=0,Zi=null,Qo=!1,qu=yt(l,u),Jv=!1,Xu=wa=ex=Cc=Zo=Yn=0,Ni=fh=null,tx=!1,(u&8)!==0&&(u|=u&32);var y=l.entangledLanes;if(y!==0)for(l=l.entanglements,y&=u;0<y;){var _=31-Qe(y),S=1<<_;u|=l[_],y&=~S}return fo=u,Pp(),h}function FS(l,u){At=null,G.H=Zp,u===Xf||u===Hp?(u=tE(),sn=3):u===ZA?(u=tE(),sn=4):sn=u===nS?8:u!==null&&typeof u=="object"&&typeof u.then=="function"?6:1,Zi=u,Dt===null&&(Yn=1,rg(l,ga(u,l.current)))}function VS(){var l=G.H;return G.H=Zp,l===null?Zp:l}function jS(){var l=G.A;return G.A=D6,l}function ox(){Yn=4,Qo||(Ft&4194048)!==Ft&&xa.current!==null||(qu=!0),(Zo&134217727)===0&&(Cc&134217727)===0||En===null||tl(En,Ft,wa,!1)}function lx(l,u,h){var y=an;an|=2;var _=VS(),S=jS();(En!==l||Ft!==u)&&(ug=null,Zu(l,u)),u=!1;var U=Yn;e:do try{if(sn!==0&&Dt!==null){var z=Dt,Q=Zi;switch(sn){case 8:sx(),U=6;break e;case 3:case 2:case 9:case 6:xa.current===null&&(u=!0);var le=sn;if(sn=0,Zi=null,Ju(l,z,Q,le),h&&qu){U=0;break e}break;default:le=sn,sn=0,Zi=null,Ju(l,z,Q,le)}}O6(),U=Yn;break}catch(Ce){FS(l,Ce)}while(!0);return u&&l.shellSuspendCounter++,ro=wc=null,an=y,G.H=_,G.A=S,Dt===null&&(En=null,Ft=0,Pp()),U}function O6(){for(;Dt!==null;)US(Dt)}function P6(l,u){var h=an;an|=2;var y=VS(),_=jS();En!==l||Ft!==u?(ug=null,cg=Re()+500,Zu(l,u)):qu=yt(l,u);e:do try{if(sn!==0&&Dt!==null){u=Dt;var S=Zi;t:switch(sn){case 1:sn=0,Zi=null,Ju(l,u,S,1);break;case 2:case 9:if(JA(S)){sn=0,Zi=null,HS(u);break}u=function(){sn!==2&&sn!==9||En!==l||(sn=7),ms(l)},S.then(u,u);break e;case 3:sn=7;break e;case 4:sn=5;break e;case 7:JA(S)?(sn=0,Zi=null,HS(u)):(sn=0,Zi=null,Ju(l,u,S,7));break;case 5:var U=null;switch(Dt.tag){case 26:U=Dt.memoizedState;case 5:case 27:var z=Dt;if(!U||AC(U)){sn=0,Zi=null;var Q=z.sibling;if(Q!==null)Dt=Q;else{var le=z.return;le!==null?(Dt=le,fg(le)):Dt=null}break t}}sn=0,Zi=null,Ju(l,u,S,5);break;case 6:sn=0,Zi=null,Ju(l,u,S,6);break;case 8:sx(),Yn=6;break e;default:throw Error(r(462))}}k6();break}catch(Ce){FS(l,Ce)}while(!0);return ro=wc=null,G.H=y,G.A=_,an=h,Dt!==null?0:(En=null,Ft=0,Pp(),Yn)}function k6(){for(;Dt!==null&&!ze();)US(Dt)}function US(l){var u=pS(l.alternate,l,fo);l.memoizedProps=l.pendingProps,u===null?fg(l):Dt=u}function HS(l){var u=l,h=u.alternate;switch(u.tag){case 15:case 0:u=lS(h,u,u.pendingProps,u.type,void 0,Ft);break;case 11:u=lS(h,u,u.pendingProps,u.type.render,u.ref,Ft);break;case 5:Av(u);default:mS(h,u),u=Dt=zA(u,fo),u=pS(h,u,fo)}l.memoizedProps=l.pendingProps,u===null?fg(l):Dt=u}function Ju(l,u,h,y){ro=wc=null,Av(u),$u=null,ih=0;var _=u.return;try{if(A6(l,_,u,h,Ft)){Yn=1,rg(l,ga(h,l.current)),Dt=null;return}}catch(S){if(_!==null)throw Dt=_,S;Yn=1,rg(l,ga(h,l.current)),Dt=null;return}u.flags&32768?(Xt||y===1?l=!0:qu||(Ft&536870912)!==0?l=!1:(Qo=l=!0,(y===2||y===9||y===3||y===6)&&(y=xa.current,y!==null&&y.tag===13&&(y.flags|=16384))),zS(u,l)):fg(u)}function fg(l){var u=l;do{if((u.flags&32768)!==0){zS(u,Qo);return}l=u.return;var h=S6(u.alternate,u,fo);if(h!==null){Dt=h;return}if(u=u.sibling,u!==null){Dt=u;return}Dt=u=l}while(u!==null);Yn===0&&(Yn=5)}function zS(l,u){do{var h=C6(l.alternate,l);if(h!==null){h.flags&=32767,Dt=h;return}if(h=l.return,h!==null&&(h.flags|=32768,h.subtreeFlags=0,h.deletions=null),!u&&(l=l.sibling,l!==null)){Dt=l;return}Dt=l=h}while(l!==null);Yn=6,Dt=null}function $S(l,u,h,y,_,S,U,z,Q){l.cancelPendingCommit=null;do hg();while(Jr!==0);if((an&6)!==0)throw Error(r(327));if(u!==null){if(u===l.current)throw Error(r(177));if(S=u.lanes|u.childLanes,S|=Zy,Ql(l,h,S,U,z,Q),l===En&&(Dt=En=null,Ft=0),Ku=u,el=l,Qu=h,rx=S,ix=_,kS=y,(u.subtreeFlags&10256)!==0||(u.flags&10256)!==0?(l.callbackNode=null,l.callbackPriority=0,F6(Ne,function(){return XS(),null})):(l.callbackNode=null,l.callbackPriority=0),y=(u.flags&13878)!==0,(u.subtreeFlags&13878)!==0||y){y=G.T,G.T=null,_=W.p,W.p=2,U=an,an|=4;try{T6(l,u,h)}finally{an=U,W.p=_,G.T=y}}Jr=1,GS(),WS(),YS()}}function GS(){if(Jr===1){Jr=0;var l=el,u=Ku,h=(u.flags&13878)!==0;if((u.subtreeFlags&13878)!==0||h){h=G.T,G.T=null;var y=W.p;W.p=2;var _=an;an|=4;try{TS(u,l);var S=wx,U=PA(l.containerInfo),z=S.focusedElem,Q=S.selectionRange;if(U!==z&&z&&z.ownerDocument&&OA(z.ownerDocument.documentElement,z)){if(Q!==null&&Yy(z)){var le=Q.start,Ce=Q.end;if(Ce===void 0&&(Ce=le),"selectionStart"in z)z.selectionStart=le,z.selectionEnd=Math.min(Ce,z.value.length);else{var Ie=z.ownerDocument||document,de=Ie&&Ie.defaultView||window;if(de.getSelection){var he=de.getSelection(),ut=z.textContent.length,st=Math.min(Q.start,ut),gn=Q.end===void 0?st:Math.min(Q.end,ut);!he.extend&&st>gn&&(U=gn,gn=st,st=U);var re=MA(z,st),J=MA(z,gn);if(re&&J&&(he.rangeCount!==1||he.anchorNode!==re.node||he.anchorOffset!==re.offset||he.focusNode!==J.node||he.focusOffset!==J.offset)){var oe=Ie.createRange();oe.setStart(re.node,re.offset),he.removeAllRanges(),st>gn?(he.addRange(oe),he.extend(J.node,J.offset)):(oe.setEnd(J.node,J.offset),he.addRange(oe))}}}}for(Ie=[],he=z;he=he.parentNode;)he.nodeType===1&&Ie.push({element:he,left:he.scrollLeft,top:he.scrollTop});for(typeof z.focus=="function"&&z.focus(),z=0;z<Ie.length;z++){var Te=Ie[z];Te.element.scrollLeft=Te.left,Te.element.scrollTop=Te.top}}Sg=!!xx,wx=xx=null}finally{an=_,W.p=y,G.T=h}}l.current=u,Jr=2}}function WS(){if(Jr===2){Jr=0;var l=el,u=Ku,h=(u.flags&8772)!==0;if((u.subtreeFlags&8772)!==0||h){h=G.T,G.T=null;var y=W.p;W.p=2;var _=an;an|=4;try{AS(l,u.alternate,u)}finally{an=_,W.p=y,G.T=h}}Jr=3}}function YS(){if(Jr===4||Jr===3){Jr=0,Oe();var l=el,u=Ku,h=Qu,y=kS;(u.subtreeFlags&10256)!==0||(u.flags&10256)!==0?Jr=5:(Jr=0,Ku=el=null,qS(l,l.pendingLanes));var _=l.pendingLanes;if(_===0&&(Jo=null),wn(h),u=u.stateNode,at&&typeof at.onCommitFiberRoot=="function")try{at.onCommitFiberRoot(rt,u,void 0,(u.current.flags&128)===128)}catch{}if(y!==null){u=G.T,_=W.p,W.p=2,G.T=null;try{for(var S=l.onRecoverableError,U=0;U<y.length;U++){var z=y[U];S(z.value,{componentStack:z.stack})}}finally{G.T=u,W.p=_}}(Qu&3)!==0&&hg(),ms(l),_=l.pendingLanes,(h&4194090)!==0&&(_&42)!==0?l===ax?hh++:(hh=0,ax=l):hh=0,ph(0)}}function qS(l,u){(l.pooledCacheLanes&=u)===0&&(u=l.pooledCache,u!=null&&(l.pooledCache=null,Yf(u)))}function hg(l){return GS(),WS(),YS(),XS()}function XS(){if(Jr!==5)return!1;var l=el,u=rx;rx=0;var h=wn(Qu),y=G.T,_=W.p;try{W.p=32>h?32:h,G.T=null,h=ix,ix=null;var S=el,U=Qu;if(Jr=0,Ku=el=null,Qu=0,(an&6)!==0)throw Error(r(331));var z=an;if(an|=4,OS(S.current),DS(S,S.current,U,h),an=z,ph(0,!1),at&&typeof at.onPostCommitFiberRoot=="function")try{at.onPostCommitFiberRoot(rt,S)}catch{}return!0}finally{W.p=_,G.T=y,qS(l,u)}}function KS(l,u,h){u=ga(h,u),u=Bv(l.stateNode,u,2),l=$o(l,u,2),l!==null&&(or(l,2),ms(l))}function bn(l,u,h){if(l.tag===3)KS(l,l,h);else for(;u!==null;){if(u.tag===3){KS(u,l,h);break}else if(u.tag===1){var y=u.stateNode;if(typeof u.type.getDerivedStateFromError=="function"||typeof y.componentDidCatch=="function"&&(Jo===null||!Jo.has(y))){l=ga(h,l),h=eS(2),y=$o(u,h,2),y!==null&&(tS(h,y,u,l),or(y,2),ms(y));break}}u=u.return}}function cx(l,u,h){var y=l.pingCache;if(y===null){y=l.pingCache=new R6;var _=new Set;y.set(u,_)}else _=y.get(u),_===void 0&&(_=new Set,y.set(u,_));_.has(h)||(Jv=!0,_.add(h),l=N6.bind(null,l,u,h),u.then(l,l))}function N6(l,u,h){var y=l.pingCache;y!==null&&y.delete(u),l.pingedLanes|=l.suspendedLanes&h,l.warmLanes&=~h,En===l&&(Ft&h)===h&&(Yn===4||Yn===3&&(Ft&62914560)===Ft&&300>Re()-nx?(an&2)===0&&Zu(l,0):ex|=h,Xu===Ft&&(Xu=0)),ms(l)}function QS(l,u){u===0&&(u=Xr()),l=ku(l,u),l!==null&&(or(l,u),ms(l))}function L6(l){var u=l.memoizedState,h=0;u!==null&&(h=u.retryLane),QS(l,h)}function B6(l,u){var h=0;switch(l.tag){case 13:var y=l.stateNode,_=l.memoizedState;_!==null&&(h=_.retryLane);break;case 19:y=l.stateNode;break;case 22:y=l.stateNode._retryCache;break;default:throw Error(r(314))}y!==null&&y.delete(u),QS(l,h)}function F6(l,u){return Ve(l,u)}var pg=null,ed=null,ux=!1,gg=!1,dx=!1,Tc=0;function ms(l){l!==ed&&l.next===null&&(ed===null?pg=ed=l:ed=ed.next=l),gg=!0,ux||(ux=!0,j6())}function ph(l,u){if(!dx&&gg){dx=!0;do for(var h=!1,y=pg;y!==null;){if(l!==0){var _=y.pendingLanes;if(_===0)var S=0;else{var U=y.suspendedLanes,z=y.pingedLanes;S=(1<<31-Qe(42|l)+1)-1,S&=_&~(U&~z),S=S&201326741?S&201326741|1:S?S|2:0}S!==0&&(h=!0,tC(y,S))}else S=Ft,S=qr(y,y===En?S:0,y.cancelPendingCommit!==null||y.timeoutHandle!==-1),(S&3)===0||yt(y,S)||(h=!0,tC(y,S));y=y.next}while(h);dx=!1}}function V6(){ZS()}function ZS(){gg=ux=!1;var l=0;Tc!==0&&(q6()&&(l=Tc),Tc=0);for(var u=Re(),h=null,y=pg;y!==null;){var _=y.next,S=JS(y,u);S===0?(y.next=null,h===null?pg=_:h.next=_,_===null&&(ed=h)):(h=y,(l!==0||(S&3)!==0)&&(gg=!0)),y=_}ph(l)}function JS(l,u){for(var h=l.suspendedLanes,y=l.pingedLanes,_=l.expirationTimes,S=l.pendingLanes&-62914561;0<S;){var U=31-Qe(S),z=1<<U,Q=_[U];Q===-1?((z&h)===0||(z&y)!==0)&&(_[U]=Vn(z,u)):Q<=u&&(l.expiredLanes|=z),S&=~z}if(u=En,h=Ft,h=qr(l,l===u?h:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),y=l.callbackNode,h===0||l===u&&(sn===2||sn===9)||l.cancelPendingCommit!==null)return y!==null&&y!==null&&we(y),l.callbackNode=null,l.callbackPriority=0;if((h&3)===0||yt(l,h)){if(u=h&-h,u===l.callbackPriority)return u;switch(y!==null&&we(y),wn(h)){case 2:case 8:h=Me;break;case 32:h=Ne;break;case 268435456:h=_t;break;default:h=Ne}return y=eC.bind(null,l),h=Ve(h,y),l.callbackPriority=u,l.callbackNode=h,u}return y!==null&&y!==null&&we(y),l.callbackPriority=2,l.callbackNode=null,2}function eC(l,u){if(Jr!==0&&Jr!==5)return l.callbackNode=null,l.callbackPriority=0,null;var h=l.callbackNode;if(hg()&&l.callbackNode!==h)return null;var y=Ft;return y=qr(l,l===En?y:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),y===0?null:(LS(l,y,u),JS(l,Re()),l.callbackNode!=null&&l.callbackNode===h?eC.bind(null,l):null)}function tC(l,u){if(hg())return null;LS(l,u,!0)}function j6(){K6(function(){(an&6)!==0?Ve(We,V6):ZS()})}function fx(){return Tc===0&&(Tc=Zn()),Tc}function nC(l){return l==null||typeof l=="symbol"||typeof l=="boolean"?null:typeof l=="function"?l:_u(""+l)}function rC(l,u){var h=u.ownerDocument.createElement("input");return h.name=u.name,h.value=u.value,l.id&&h.setAttribute("form",l.id),u.parentNode.insertBefore(h,u),l=new FormData(l),h.parentNode.removeChild(h),l}function U6(l,u,h,y,_){if(u==="submit"&&h&&h.stateNode===_){var S=nC((_[cr]||null).action),U=y.submitter;U&&(u=(u=U[cr]||null)?nC(u.formAction):U.getAttribute("formAction"),u!==null&&(S=u,U=null));var z=new Au("action","action",null,y,_);l.push({event:z,listeners:[{instance:null,listener:function(){if(y.defaultPrevented){if(Tc!==0){var Q=U?rC(_,U):new FormData(_);Ov(h,{pending:!0,data:Q,method:_.method,action:S},null,Q)}}else typeof S=="function"&&(z.preventDefault(),Q=U?rC(_,U):new FormData(_),Ov(h,{pending:!0,data:Q,method:_.method,action:S},S,Q))},currentTarget:_}]})}}for(var hx=0;hx<Qy.length;hx++){var px=Qy[hx],H6=px.toLowerCase(),z6=px[0].toUpperCase()+px.slice(1);La(H6,"on"+z6)}La(LA,"onAnimationEnd"),La(BA,"onAnimationIteration"),La(FA,"onAnimationStart"),La("dblclick","onDoubleClick"),La("focusin","onFocus"),La("focusout","onBlur"),La(s6,"onTransitionRun"),La(o6,"onTransitionStart"),La(l6,"onTransitionCancel"),La(VA,"onTransitionEnd"),Gs("onMouseEnter",["mouseout","mouseover"]),Gs("onMouseLeave",["mouseout","mouseover"]),Gs("onPointerEnter",["pointerout","pointerover"]),Gs("onPointerLeave",["pointerout","pointerover"]),ka("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ka("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ka("onBeforeInput",["compositionend","keypress","textInput","paste"]),ka("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ka("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ka("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var gh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),$6=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(gh));function iC(l,u){u=(u&4)!==0;for(var h=0;h<l.length;h++){var y=l[h],_=y.event;y=y.listeners;e:{var S=void 0;if(u)for(var U=y.length-1;0<=U;U--){var z=y[U],Q=z.instance,le=z.currentTarget;if(z=z.listener,Q!==S&&_.isPropagationStopped())break e;S=z,_.currentTarget=le;try{S(_)}catch(Ce){ng(Ce)}_.currentTarget=null,S=Q}else for(U=0;U<y.length;U++){if(z=y[U],Q=z.instance,le=z.currentTarget,z=z.listener,Q!==S&&_.isPropagationStopped())break e;S=z,_.currentTarget=le;try{S(_)}catch(Ce){ng(Ce)}_.currentTarget=null,S=Q}}}}function Rt(l,u){var h=u[Cf];h===void 0&&(h=u[Cf]=new Set);var y=l+"__bubble";h.has(y)||(aC(u,l,2,!1),h.add(y))}function gx(l,u,h){var y=0;u&&(y|=4),aC(h,l,y,u)}var mg="_reactListening"+Math.random().toString(36).slice(2);function mx(l){if(!l[mg]){l[mg]=!0,Tf.forEach(function(h){h!=="selectionchange"&&($6.has(h)||gx(h,!1,l),gx(h,!0,l))});var u=l.nodeType===9?l:l.ownerDocument;u===null||u[mg]||(u[mg]=!0,gx("selectionchange",!1,u))}}function aC(l,u,h,y){switch(DC(u)){case 2:var _=yN;break;case 8:_=vN;break;default:_=Rx}h=_.bind(null,u,h,l),_=void 0,!ha||u!=="touchstart"&&u!=="touchmove"&&u!=="wheel"||(_=!0),y?_!==void 0?l.addEventListener(u,h,{capture:!0,passive:_}):l.addEventListener(u,h,!0):_!==void 0?l.addEventListener(u,h,{passive:_}):l.addEventListener(u,h,!1)}function yx(l,u,h,y,_){var S=y;if((u&1)===0&&(u&2)===0&&y!==null)e:for(;;){if(y===null)return;var U=y.tag;if(U===3||U===4){var z=y.stateNode.containerInfo;if(z===_)break;if(U===4)for(U=y.return;U!==null;){var Q=U.tag;if((Q===3||Q===4)&&U.stateNode.containerInfo===_)return;U=U.return}for(;z!==null;){if(U=$s(z),U===null)return;if(Q=U.tag,Q===5||Q===6||Q===26||Q===27){y=S=U;continue e}z=z.parentNode}}y=y.return}vp(function(){var le=S,Ce=fa(h),Ie=[];e:{var de=jA.get(l);if(de!==void 0){var he=Au,ut=l;switch(l){case"keypress":if(os(h)===0)break e;case"keydown":case"keyup":he=Du;break;case"focusin":ut="focus",he=Cu;break;case"focusout":ut="blur",he=Cu;break;case"beforeblur":case"afterblur":he=Cu;break;case"click":if(h.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":he=pa;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":he=zy;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":he=Cp;break;case LA:case BA:case FA:he=Tu;break;case VA:he=Ip;break;case"scroll":case"scrollend":he=xp;break;case"wheel":he=Ru;break;case"copy":case"cut":case"paste":he=Iu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":he=Vf;break;case"toggle":case"beforetoggle":he=Rp}var st=(u&4)!==0,gn=!st&&(l==="scroll"||l==="scrollend"),re=st?de!==null?de+"Capture":null:de;st=[];for(var J=le,oe;J!==null;){var Te=J;if(oe=Te.stateNode,Te=Te.tag,Te!==5&&Te!==26&&Te!==27||oe===null||re===null||(Te=sc(J,re),Te!=null&&st.push(mh(J,Te,oe))),gn)break;J=J.return}0<st.length&&(de=new he(de,ut,null,h,Ce),Ie.push({event:de,listeners:st}))}}if((u&7)===0){e:{if(de=l==="mouseover"||l==="pointerover",he=l==="mouseout"||l==="pointerout",de&&h!==qs&&(ut=h.relatedTarget||h.fromElement)&&($s(ut)||ut[ua]))break e;if((he||de)&&(de=Ce.window===Ce?Ce:(de=Ce.ownerDocument)?de.defaultView||de.parentWindow:window,he?(ut=h.relatedTarget||h.toElement,he=le,ut=ut?$s(ut):null,ut!==null&&(gn=a(ut),st=ut.tag,ut!==gn||st!==5&&st!==27&&st!==6)&&(ut=null)):(he=null,ut=le),he!==ut)){if(st=pa,Te="onMouseLeave",re="onMouseEnter",J="mouse",(l==="pointerout"||l==="pointerover")&&(st=Vf,Te="onPointerLeave",re="onPointerEnter",J="pointer"),gn=he==null?de:rs(he),oe=ut==null?de:rs(ut),de=new st(Te,J+"leave",he,h,Ce),de.target=gn,de.relatedTarget=oe,Te=null,$s(Ce)===le&&(st=new st(re,J+"enter",ut,h,Ce),st.target=oe,st.relatedTarget=gn,Te=st),gn=Te,he&&ut)t:{for(st=he,re=ut,J=0,oe=st;oe;oe=td(oe))J++;for(oe=0,Te=re;Te;Te=td(Te))oe++;for(;0<J-oe;)st=td(st),J--;for(;0<oe-J;)re=td(re),oe--;for(;J--;){if(st===re||re!==null&&st===re.alternate)break t;st=td(st),re=td(re)}st=null}else st=null;he!==null&&sC(Ie,de,he,st,!1),ut!==null&&gn!==null&&sC(Ie,gn,ut,st,!0)}}e:{if(de=le?rs(le):window,he=de.nodeName&&de.nodeName.toLowerCase(),he==="select"||he==="input"&&de.type==="file")var Xe=SA;else if(wr(de))if(CA)Xe=r6;else{Xe=t6;var Tt=e6}else he=de.nodeName,!he||he.toLowerCase()!=="input"||de.type!=="checkbox"&&de.type!=="radio"?le&&Of(le.elementType)&&(Xe=SA):Xe=n6;if(Xe&&(Xe=Xe(l,le))){Js(Ie,Xe,h,Ce);break e}Tt&&Tt(l,de,le),l==="focusout"&&le&&de.type==="number"&&le.memoizedProps.value!=null&&Vo(de,"number",de.value)}switch(Tt=le?rs(le):window,l){case"focusin":(wr(Tt)||Tt.contentEditable==="true")&&(Mu=Tt,qy=le,Hf=null);break;case"focusout":Hf=qy=Mu=null;break;case"mousedown":Xy=!0;break;case"contextmenu":case"mouseup":case"dragend":Xy=!1,kA(Ie,h,Ce);break;case"selectionchange":if(a6)break;case"keydown":case"keyup":kA(Ie,h,Ce)}var Ze;if(us)e:{switch(l){case"compositionstart":var ot="onCompositionStart";break e;case"compositionend":ot="onCompositionEnd";break e;case"compositionupdate":ot="onCompositionUpdate";break e}ot=void 0}else Lt?me(l,h)&&(ot="onCompositionEnd"):l==="keydown"&&h.keyCode===229&&(ot="onCompositionStart");ot&&(j&&h.locale!=="ko"&&(Lt||ot!=="onCompositionStart"?ot==="onCompositionEnd"&&Lt&&(Ze=kf()):(ss=Ce,jo="value"in ss?ss.value:ss.textContent,Lt=!0)),Tt=yg(le,ot),0<Tt.length&&(ot=new Bf(ot,l,null,h,Ce),Ie.push({event:ot,listeners:Tt}),Ze?ot.data=Ze:(Ze=Le(h),Ze!==null&&(ot.data=Ze)))),(Ze=L?xr(l,h):Bt(l,h))&&(ot=yg(le,"onBeforeInput"),0<ot.length&&(Tt=new Bf("onBeforeInput","beforeinput",null,h,Ce),Ie.push({event:Tt,listeners:ot}),Tt.data=Ze)),U6(Ie,l,le,h,Ce)}iC(Ie,u)})}function mh(l,u,h){return{instance:l,listener:u,currentTarget:h}}function yg(l,u){for(var h=u+"Capture",y=[];l!==null;){var _=l,S=_.stateNode;if(_=_.tag,_!==5&&_!==26&&_!==27||S===null||(_=sc(l,h),_!=null&&y.unshift(mh(l,_,S)),_=sc(l,u),_!=null&&y.push(mh(l,_,S))),l.tag===3)return y;l=l.return}return[]}function td(l){if(l===null)return null;do l=l.return;while(l&&l.tag!==5&&l.tag!==27);return l||null}function sC(l,u,h,y,_){for(var S=u._reactName,U=[];h!==null&&h!==y;){var z=h,Q=z.alternate,le=z.stateNode;if(z=z.tag,Q!==null&&Q===y)break;z!==5&&z!==26&&z!==27||le===null||(Q=le,_?(le=sc(h,S),le!=null&&U.unshift(mh(h,le,Q))):_||(le=sc(h,S),le!=null&&U.push(mh(h,le,Q)))),h=h.return}U.length!==0&&l.push({event:u,listeners:U})}var G6=/\r\n?/g,W6=/\u0000|\uFFFD/g;function oC(l){return(typeof l=="string"?l:""+l).replace(G6,`
`).replace(W6,"")}function lC(l,u){return u=oC(u),oC(l)===u}function vg(){}function pn(l,u,h,y,_,S){switch(h){case"children":typeof y=="string"?u==="body"||u==="textarea"&&y===""||da(l,y):(typeof y=="number"||typeof y=="bigint")&&u!=="body"&&da(l,""+y);break;case"className":is(l,"class",y);break;case"tabIndex":is(l,"tabindex",y);break;case"dir":case"role":case"viewBox":case"width":case"height":is(l,h,y);break;case"style":Mf(l,y,S);break;case"data":if(u!=="object"){is(l,"data",y);break}case"src":case"href":if(y===""&&(u!=="a"||h!=="href")){l.removeAttribute(h);break}if(y==null||typeof y=="function"||typeof y=="symbol"||typeof y=="boolean"){l.removeAttribute(h);break}y=_u(""+y),l.setAttribute(h,y);break;case"action":case"formAction":if(typeof y=="function"){l.setAttribute(h,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof S=="function"&&(h==="formAction"?(u!=="input"&&pn(l,u,"name",_.name,_,null),pn(l,u,"formEncType",_.formEncType,_,null),pn(l,u,"formMethod",_.formMethod,_,null),pn(l,u,"formTarget",_.formTarget,_,null)):(pn(l,u,"encType",_.encType,_,null),pn(l,u,"method",_.method,_,null),pn(l,u,"target",_.target,_,null)));if(y==null||typeof y=="symbol"||typeof y=="boolean"){l.removeAttribute(h);break}y=_u(""+y),l.setAttribute(h,y);break;case"onClick":y!=null&&(l.onclick=vg);break;case"onScroll":y!=null&&Rt("scroll",l);break;case"onScrollEnd":y!=null&&Rt("scrollend",l);break;case"dangerouslySetInnerHTML":if(y!=null){if(typeof y!="object"||!("__html"in y))throw Error(r(61));if(h=y.__html,h!=null){if(_.children!=null)throw Error(r(60));l.innerHTML=h}}break;case"multiple":l.multiple=y&&typeof y!="function"&&typeof y!="symbol";break;case"muted":l.muted=y&&typeof y!="function"&&typeof y!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(y==null||typeof y=="function"||typeof y=="boolean"||typeof y=="symbol"){l.removeAttribute("xlink:href");break}h=_u(""+y),l.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",h);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":y!=null&&typeof y!="function"&&typeof y!="symbol"?l.setAttribute(h,""+y):l.removeAttribute(h);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":y&&typeof y!="function"&&typeof y!="symbol"?l.setAttribute(h,""):l.removeAttribute(h);break;case"capture":case"download":y===!0?l.setAttribute(h,""):y!==!1&&y!=null&&typeof y!="function"&&typeof y!="symbol"?l.setAttribute(h,y):l.removeAttribute(h);break;case"cols":case"rows":case"size":case"span":y!=null&&typeof y!="function"&&typeof y!="symbol"&&!isNaN(y)&&1<=y?l.setAttribute(h,y):l.removeAttribute(h);break;case"rowSpan":case"start":y==null||typeof y=="function"||typeof y=="symbol"||isNaN(y)?l.removeAttribute(h):l.setAttribute(h,y);break;case"popover":Rt("beforetoggle",l),Rt("toggle",l),Fo(l,"popover",y);break;case"xlinkActuate":Kr(l,"http://www.w3.org/1999/xlink","xlink:actuate",y);break;case"xlinkArcrole":Kr(l,"http://www.w3.org/1999/xlink","xlink:arcrole",y);break;case"xlinkRole":Kr(l,"http://www.w3.org/1999/xlink","xlink:role",y);break;case"xlinkShow":Kr(l,"http://www.w3.org/1999/xlink","xlink:show",y);break;case"xlinkTitle":Kr(l,"http://www.w3.org/1999/xlink","xlink:title",y);break;case"xlinkType":Kr(l,"http://www.w3.org/1999/xlink","xlink:type",y);break;case"xmlBase":Kr(l,"http://www.w3.org/XML/1998/namespace","xml:base",y);break;case"xmlLang":Kr(l,"http://www.w3.org/XML/1998/namespace","xml:lang",y);break;case"xmlSpace":Kr(l,"http://www.w3.org/XML/1998/namespace","xml:space",y);break;case"is":Fo(l,"is",y);break;case"innerText":case"textContent":break;default:(!(2<h.length)||h[0]!=="o"&&h[0]!=="O"||h[1]!=="n"&&h[1]!=="N")&&(h=Uy.get(h)||h,Fo(l,h,y))}}function vx(l,u,h,y,_,S){switch(h){case"style":Mf(l,y,S);break;case"dangerouslySetInnerHTML":if(y!=null){if(typeof y!="object"||!("__html"in y))throw Error(r(61));if(h=y.__html,h!=null){if(_.children!=null)throw Error(r(60));l.innerHTML=h}}break;case"children":typeof y=="string"?da(l,y):(typeof y=="number"||typeof y=="bigint")&&da(l,""+y);break;case"onScroll":y!=null&&Rt("scroll",l);break;case"onScrollEnd":y!=null&&Rt("scrollend",l);break;case"onClick":y!=null&&(l.onclick=vg);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!yu.hasOwnProperty(h))e:{if(h[0]==="o"&&h[1]==="n"&&(_=h.endsWith("Capture"),u=h.slice(2,_?h.length-7:void 0),S=l[cr]||null,S=S!=null?S[h]:null,typeof S=="function"&&l.removeEventListener(u,S,_),typeof y=="function")){typeof S!="function"&&S!==null&&(h in l?l[h]=null:l.hasAttribute(h)&&l.removeAttribute(h)),l.addEventListener(u,y,_);break e}h in l?l[h]=y:y===!0?l.setAttribute(h,""):Fo(l,h,y)}}}function ei(l,u,h){switch(u){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Rt("error",l),Rt("load",l);var y=!1,_=!1,S;for(S in h)if(h.hasOwnProperty(S)){var U=h[S];if(U!=null)switch(S){case"src":y=!0;break;case"srcSet":_=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,u));default:pn(l,u,S,U,h,null)}}_&&pn(l,u,"srcSet",h.srcSet,h,null),y&&pn(l,u,"src",h.src,h,null);return;case"input":Rt("invalid",l);var z=S=U=_=null,Q=null,le=null;for(y in h)if(h.hasOwnProperty(y)){var Ce=h[y];if(Ce!=null)switch(y){case"name":_=Ce;break;case"type":U=Ce;break;case"checked":Q=Ce;break;case"defaultChecked":le=Ce;break;case"value":S=Ce;break;case"defaultValue":z=Ce;break;case"children":case"dangerouslySetInnerHTML":if(Ce!=null)throw Error(r(137,u));break;default:pn(l,u,y,Ce,h,null)}}rc(l,S,z,Q,le,U,_,!1),bu(l);return;case"select":Rt("invalid",l),y=U=S=null;for(_ in h)if(h.hasOwnProperty(_)&&(z=h[_],z!=null))switch(_){case"value":S=z;break;case"defaultValue":U=z;break;case"multiple":y=z;default:pn(l,u,_,z,h,null)}u=S,h=U,l.multiple=!!y,u!=null?Ys(l,!!y,u,!1):h!=null&&Ys(l,!!y,h,!0);return;case"textarea":Rt("invalid",l),S=_=y=null;for(U in h)if(h.hasOwnProperty(U)&&(z=h[U],z!=null))switch(U){case"value":y=z;break;case"defaultValue":_=z;break;case"children":S=z;break;case"dangerouslySetInnerHTML":if(z!=null)throw Error(r(91));break;default:pn(l,u,U,z,h,null)}ic(l,y,_,S),bu(l);return;case"option":for(Q in h)if(h.hasOwnProperty(Q)&&(y=h[Q],y!=null))switch(Q){case"selected":l.selected=y&&typeof y!="function"&&typeof y!="symbol";break;default:pn(l,u,Q,y,h,null)}return;case"dialog":Rt("beforetoggle",l),Rt("toggle",l),Rt("cancel",l),Rt("close",l);break;case"iframe":case"object":Rt("load",l);break;case"video":case"audio":for(y=0;y<gh.length;y++)Rt(gh[y],l);break;case"image":Rt("error",l),Rt("load",l);break;case"details":Rt("toggle",l);break;case"embed":case"source":case"link":Rt("error",l),Rt("load",l);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(le in h)if(h.hasOwnProperty(le)&&(y=h[le],y!=null))switch(le){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,u));default:pn(l,u,le,y,h,null)}return;default:if(Of(u)){for(Ce in h)h.hasOwnProperty(Ce)&&(y=h[Ce],y!==void 0&&vx(l,u,Ce,y,h,void 0));return}}for(z in h)h.hasOwnProperty(z)&&(y=h[z],y!=null&&pn(l,u,z,y,h,null))}function Y6(l,u,h,y){switch(u){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var _=null,S=null,U=null,z=null,Q=null,le=null,Ce=null;for(he in h){var Ie=h[he];if(h.hasOwnProperty(he)&&Ie!=null)switch(he){case"checked":break;case"value":break;case"defaultValue":Q=Ie;default:y.hasOwnProperty(he)||pn(l,u,he,null,y,Ie)}}for(var de in y){var he=y[de];if(Ie=h[de],y.hasOwnProperty(de)&&(he!=null||Ie!=null))switch(de){case"type":S=he;break;case"name":_=he;break;case"checked":le=he;break;case"defaultChecked":Ce=he;break;case"value":U=he;break;case"defaultValue":z=he;break;case"children":case"dangerouslySetInnerHTML":if(he!=null)throw Error(r(137,u));break;default:he!==Ie&&pn(l,u,de,he,y,Ie)}}Yi(l,U,z,Q,le,Ce,S,_);return;case"select":he=U=z=de=null;for(S in h)if(Q=h[S],h.hasOwnProperty(S)&&Q!=null)switch(S){case"value":break;case"multiple":he=Q;default:y.hasOwnProperty(S)||pn(l,u,S,null,y,Q)}for(_ in y)if(S=y[_],Q=h[_],y.hasOwnProperty(_)&&(S!=null||Q!=null))switch(_){case"value":de=S;break;case"defaultValue":z=S;break;case"multiple":U=S;default:S!==Q&&pn(l,u,_,S,y,Q)}u=z,h=U,y=he,de!=null?Ys(l,!!h,de,!1):!!y!=!!h&&(u!=null?Ys(l,!!h,u,!0):Ys(l,!!h,h?[]:"",!1));return;case"textarea":he=de=null;for(z in h)if(_=h[z],h.hasOwnProperty(z)&&_!=null&&!y.hasOwnProperty(z))switch(z){case"value":break;case"children":break;default:pn(l,u,z,null,y,_)}for(U in y)if(_=y[U],S=h[U],y.hasOwnProperty(U)&&(_!=null||S!=null))switch(U){case"value":de=_;break;case"defaultValue":he=_;break;case"children":break;case"dangerouslySetInnerHTML":if(_!=null)throw Error(r(91));break;default:_!==S&&pn(l,u,U,_,y,S)}fn(l,de,he);return;case"option":for(var ut in h)if(de=h[ut],h.hasOwnProperty(ut)&&de!=null&&!y.hasOwnProperty(ut))switch(ut){case"selected":l.selected=!1;break;default:pn(l,u,ut,null,y,de)}for(Q in y)if(de=y[Q],he=h[Q],y.hasOwnProperty(Q)&&de!==he&&(de!=null||he!=null))switch(Q){case"selected":l.selected=de&&typeof de!="function"&&typeof de!="symbol";break;default:pn(l,u,Q,de,y,he)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var st in h)de=h[st],h.hasOwnProperty(st)&&de!=null&&!y.hasOwnProperty(st)&&pn(l,u,st,null,y,de);for(le in y)if(de=y[le],he=h[le],y.hasOwnProperty(le)&&de!==he&&(de!=null||he!=null))switch(le){case"children":case"dangerouslySetInnerHTML":if(de!=null)throw Error(r(137,u));break;default:pn(l,u,le,de,y,he)}return;default:if(Of(u)){for(var gn in h)de=h[gn],h.hasOwnProperty(gn)&&de!==void 0&&!y.hasOwnProperty(gn)&&vx(l,u,gn,void 0,y,de);for(Ce in y)de=y[Ce],he=h[Ce],!y.hasOwnProperty(Ce)||de===he||de===void 0&&he===void 0||vx(l,u,Ce,de,y,he);return}}for(var re in h)de=h[re],h.hasOwnProperty(re)&&de!=null&&!y.hasOwnProperty(re)&&pn(l,u,re,null,y,de);for(Ie in y)de=y[Ie],he=h[Ie],!y.hasOwnProperty(Ie)||de===he||de==null&&he==null||pn(l,u,Ie,de,y,he)}var xx=null,wx=null;function xg(l){return l.nodeType===9?l:l.ownerDocument}function cC(l){switch(l){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function uC(l,u){if(l===0)switch(u){case"svg":return 1;case"math":return 2;default:return 0}return l===1&&u==="foreignObject"?0:l}function bx(l,u){return l==="textarea"||l==="noscript"||typeof u.children=="string"||typeof u.children=="number"||typeof u.children=="bigint"||typeof u.dangerouslySetInnerHTML=="object"&&u.dangerouslySetInnerHTML!==null&&u.dangerouslySetInnerHTML.__html!=null}var _x=null;function q6(){var l=window.event;return l&&l.type==="popstate"?l===_x?!1:(_x=l,!0):(_x=null,!1)}var dC=typeof setTimeout=="function"?setTimeout:void 0,X6=typeof clearTimeout=="function"?clearTimeout:void 0,fC=typeof Promise=="function"?Promise:void 0,K6=typeof queueMicrotask=="function"?queueMicrotask:typeof fC<"u"?function(l){return fC.resolve(null).then(l).catch(Q6)}:dC;function Q6(l){setTimeout(function(){throw l})}function nl(l){return l==="head"}function hC(l,u){var h=u,y=0,_=0;do{var S=h.nextSibling;if(l.removeChild(h),S&&S.nodeType===8)if(h=S.data,h==="/$"){if(0<y&&8>y){h=y;var U=l.ownerDocument;if(h&1&&yh(U.documentElement),h&2&&yh(U.body),h&4)for(h=U.head,yh(h),U=h.firstChild;U;){var z=U.nextSibling,Q=U.nodeName;U[Jl]||Q==="SCRIPT"||Q==="STYLE"||Q==="LINK"&&U.rel.toLowerCase()==="stylesheet"||h.removeChild(U),U=z}}if(_===0){l.removeChild(S),Sh(u);return}_--}else h==="$"||h==="$?"||h==="$!"?_++:y=h.charCodeAt(0)-48;else y=0;h=S}while(h);Sh(u)}function Ax(l){var u=l.firstChild;for(u&&u.nodeType===10&&(u=u.nextSibling);u;){var h=u;switch(u=u.nextSibling,h.nodeName){case"HTML":case"HEAD":case"BODY":Ax(h),Bo(h);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(h.rel.toLowerCase()==="stylesheet")continue}l.removeChild(h)}}function Z6(l,u,h,y){for(;l.nodeType===1;){var _=h;if(l.nodeName.toLowerCase()!==u.toLowerCase()){if(!y&&(l.nodeName!=="INPUT"||l.type!=="hidden"))break}else if(y){if(!l[Jl])switch(u){case"meta":if(!l.hasAttribute("itemprop"))break;return l;case"link":if(S=l.getAttribute("rel"),S==="stylesheet"&&l.hasAttribute("data-precedence"))break;if(S!==_.rel||l.getAttribute("href")!==(_.href==null||_.href===""?null:_.href)||l.getAttribute("crossorigin")!==(_.crossOrigin==null?null:_.crossOrigin)||l.getAttribute("title")!==(_.title==null?null:_.title))break;return l;case"style":if(l.hasAttribute("data-precedence"))break;return l;case"script":if(S=l.getAttribute("src"),(S!==(_.src==null?null:_.src)||l.getAttribute("type")!==(_.type==null?null:_.type)||l.getAttribute("crossorigin")!==(_.crossOrigin==null?null:_.crossOrigin))&&S&&l.hasAttribute("async")&&!l.hasAttribute("itemprop"))break;return l;default:return l}}else if(u==="input"&&l.type==="hidden"){var S=_.name==null?null:""+_.name;if(_.type==="hidden"&&l.getAttribute("name")===S)return l}else return l;if(l=Fa(l.nextSibling),l===null)break}return null}function J6(l,u,h){if(u==="")return null;for(;l.nodeType!==3;)if((l.nodeType!==1||l.nodeName!=="INPUT"||l.type!=="hidden")&&!h||(l=Fa(l.nextSibling),l===null))return null;return l}function Ex(l){return l.data==="$!"||l.data==="$?"&&l.ownerDocument.readyState==="complete"}function eN(l,u){var h=l.ownerDocument;if(l.data!=="$?"||h.readyState==="complete")u();else{var y=function(){u(),h.removeEventListener("DOMContentLoaded",y)};h.addEventListener("DOMContentLoaded",y),l._reactRetry=y}}function Fa(l){for(;l!=null;l=l.nextSibling){var u=l.nodeType;if(u===1||u===3)break;if(u===8){if(u=l.data,u==="$"||u==="$!"||u==="$?"||u==="F!"||u==="F")break;if(u==="/$")return null}}return l}var Sx=null;function pC(l){l=l.previousSibling;for(var u=0;l;){if(l.nodeType===8){var h=l.data;if(h==="$"||h==="$!"||h==="$?"){if(u===0)return l;u--}else h==="/$"&&u++}l=l.previousSibling}return null}function gC(l,u,h){switch(u=xg(h),l){case"html":if(l=u.documentElement,!l)throw Error(r(452));return l;case"head":if(l=u.head,!l)throw Error(r(453));return l;case"body":if(l=u.body,!l)throw Error(r(454));return l;default:throw Error(r(451))}}function yh(l){for(var u=l.attributes;u.length;)l.removeAttributeNode(u[0]);Bo(l)}var ba=new Map,mC=new Set;function wg(l){return typeof l.getRootNode=="function"?l.getRootNode():l.nodeType===9?l:l.ownerDocument}var ho=W.d;W.d={f:tN,r:nN,D:rN,C:iN,L:aN,m:sN,X:lN,S:oN,M:cN};function tN(){var l=ho.f(),u=dg();return l||u}function nN(l){var u=ns(l);u!==null&&u.tag===5&&u.type==="form"?LE(u):ho.r(l)}var nd=typeof document>"u"?null:document;function yC(l,u,h){var y=nd;if(y&&typeof u=="string"&&u){var _=ur(u);_='link[rel="'+l+'"][href="'+_+'"]',typeof h=="string"&&(_+='[crossorigin="'+h+'"]'),mC.has(_)||(mC.add(_),l={rel:l,crossOrigin:h,href:u},y.querySelector(_)===null&&(u=y.createElement("link"),ei(u,"link",l),Jn(u),y.head.appendChild(u)))}}function rN(l){ho.D(l),yC("dns-prefetch",l,null)}function iN(l,u){ho.C(l,u),yC("preconnect",l,u)}function aN(l,u,h){ho.L(l,u,h);var y=nd;if(y&&l&&u){var _='link[rel="preload"][as="'+ur(u)+'"]';u==="image"&&h&&h.imageSrcSet?(_+='[imagesrcset="'+ur(h.imageSrcSet)+'"]',typeof h.imageSizes=="string"&&(_+='[imagesizes="'+ur(h.imageSizes)+'"]')):_+='[href="'+ur(l)+'"]';var S=_;switch(u){case"style":S=rd(l);break;case"script":S=id(l)}ba.has(S)||(l=f({rel:"preload",href:u==="image"&&h&&h.imageSrcSet?void 0:l,as:u},h),ba.set(S,l),y.querySelector(_)!==null||u==="style"&&y.querySelector(vh(S))||u==="script"&&y.querySelector(xh(S))||(u=y.createElement("link"),ei(u,"link",l),Jn(u),y.head.appendChild(u)))}}function sN(l,u){ho.m(l,u);var h=nd;if(h&&l){var y=u&&typeof u.as=="string"?u.as:"script",_='link[rel="modulepreload"][as="'+ur(y)+'"][href="'+ur(l)+'"]',S=_;switch(y){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":S=id(l)}if(!ba.has(S)&&(l=f({rel:"modulepreload",href:l},u),ba.set(S,l),h.querySelector(_)===null)){switch(y){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(h.querySelector(xh(S)))return}y=h.createElement("link"),ei(y,"link",l),Jn(y),h.head.appendChild(y)}}}function oN(l,u,h){ho.S(l,u,h);var y=nd;if(y&&l){var _=_i(y).hoistableStyles,S=rd(l);u=u||"default";var U=_.get(S);if(!U){var z={loading:0,preload:null};if(U=y.querySelector(vh(S)))z.loading=5;else{l=f({rel:"stylesheet",href:l,"data-precedence":u},h),(h=ba.get(S))&&Cx(l,h);var Q=U=y.createElement("link");Jn(Q),ei(Q,"link",l),Q._p=new Promise(function(le,Ce){Q.onload=le,Q.onerror=Ce}),Q.addEventListener("load",function(){z.loading|=1}),Q.addEventListener("error",function(){z.loading|=2}),z.loading|=4,bg(U,u,y)}U={type:"stylesheet",instance:U,count:1,state:z},_.set(S,U)}}}function lN(l,u){ho.X(l,u);var h=nd;if(h&&l){var y=_i(h).hoistableScripts,_=id(l),S=y.get(_);S||(S=h.querySelector(xh(_)),S||(l=f({src:l,async:!0},u),(u=ba.get(_))&&Tx(l,u),S=h.createElement("script"),Jn(S),ei(S,"link",l),h.head.appendChild(S)),S={type:"script",instance:S,count:1,state:null},y.set(_,S))}}function cN(l,u){ho.M(l,u);var h=nd;if(h&&l){var y=_i(h).hoistableScripts,_=id(l),S=y.get(_);S||(S=h.querySelector(xh(_)),S||(l=f({src:l,async:!0,type:"module"},u),(u=ba.get(_))&&Tx(l,u),S=h.createElement("script"),Jn(S),ei(S,"link",l),h.head.appendChild(S)),S={type:"script",instance:S,count:1,state:null},y.set(_,S))}}function vC(l,u,h,y){var _=(_=Se.current)?wg(_):null;if(!_)throw Error(r(446));switch(l){case"meta":case"title":return null;case"style":return typeof h.precedence=="string"&&typeof h.href=="string"?(u=rd(h.href),h=_i(_).hoistableStyles,y=h.get(u),y||(y={type:"style",instance:null,count:0,state:null},h.set(u,y)),y):{type:"void",instance:null,count:0,state:null};case"link":if(h.rel==="stylesheet"&&typeof h.href=="string"&&typeof h.precedence=="string"){l=rd(h.href);var S=_i(_).hoistableStyles,U=S.get(l);if(U||(_=_.ownerDocument||_,U={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},S.set(l,U),(S=_.querySelector(vh(l)))&&!S._p&&(U.instance=S,U.state.loading=5),ba.has(l)||(h={rel:"preload",as:"style",href:h.href,crossOrigin:h.crossOrigin,integrity:h.integrity,media:h.media,hrefLang:h.hrefLang,referrerPolicy:h.referrerPolicy},ba.set(l,h),S||uN(_,l,h,U.state))),u&&y===null)throw Error(r(528,""));return U}if(u&&y!==null)throw Error(r(529,""));return null;case"script":return u=h.async,h=h.src,typeof h=="string"&&u&&typeof u!="function"&&typeof u!="symbol"?(u=id(h),h=_i(_).hoistableScripts,y=h.get(u),y||(y={type:"script",instance:null,count:0,state:null},h.set(u,y)),y):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,l))}}function rd(l){return'href="'+ur(l)+'"'}function vh(l){return'link[rel="stylesheet"]['+l+"]"}function xC(l){return f({},l,{"data-precedence":l.precedence,precedence:null})}function uN(l,u,h,y){l.querySelector('link[rel="preload"][as="style"]['+u+"]")?y.loading=1:(u=l.createElement("link"),y.preload=u,u.addEventListener("load",function(){return y.loading|=1}),u.addEventListener("error",function(){return y.loading|=2}),ei(u,"link",h),Jn(u),l.head.appendChild(u))}function id(l){return'[src="'+ur(l)+'"]'}function xh(l){return"script[async]"+l}function wC(l,u,h){if(u.count++,u.instance===null)switch(u.type){case"style":var y=l.querySelector('style[data-href~="'+ur(h.href)+'"]');if(y)return u.instance=y,Jn(y),y;var _=f({},h,{"data-href":h.href,"data-precedence":h.precedence,href:null,precedence:null});return y=(l.ownerDocument||l).createElement("style"),Jn(y),ei(y,"style",_),bg(y,h.precedence,l),u.instance=y;case"stylesheet":_=rd(h.href);var S=l.querySelector(vh(_));if(S)return u.state.loading|=4,u.instance=S,Jn(S),S;y=xC(h),(_=ba.get(_))&&Cx(y,_),S=(l.ownerDocument||l).createElement("link"),Jn(S);var U=S;return U._p=new Promise(function(z,Q){U.onload=z,U.onerror=Q}),ei(S,"link",y),u.state.loading|=4,bg(S,h.precedence,l),u.instance=S;case"script":return S=id(h.src),(_=l.querySelector(xh(S)))?(u.instance=_,Jn(_),_):(y=h,(_=ba.get(S))&&(y=f({},h),Tx(y,_)),l=l.ownerDocument||l,_=l.createElement("script"),Jn(_),ei(_,"link",y),l.head.appendChild(_),u.instance=_);case"void":return null;default:throw Error(r(443,u.type))}else u.type==="stylesheet"&&(u.state.loading&4)===0&&(y=u.instance,u.state.loading|=4,bg(y,h.precedence,l));return u.instance}function bg(l,u,h){for(var y=h.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),_=y.length?y[y.length-1]:null,S=_,U=0;U<y.length;U++){var z=y[U];if(z.dataset.precedence===u)S=z;else if(S!==_)break}S?S.parentNode.insertBefore(l,S.nextSibling):(u=h.nodeType===9?h.head:h,u.insertBefore(l,u.firstChild))}function Cx(l,u){l.crossOrigin==null&&(l.crossOrigin=u.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=u.referrerPolicy),l.title==null&&(l.title=u.title)}function Tx(l,u){l.crossOrigin==null&&(l.crossOrigin=u.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=u.referrerPolicy),l.integrity==null&&(l.integrity=u.integrity)}var _g=null;function bC(l,u,h){if(_g===null){var y=new Map,_=_g=new Map;_.set(h,y)}else _=_g,y=_.get(h),y||(y=new Map,_.set(h,y));if(y.has(l))return y;for(y.set(l,null),h=h.getElementsByTagName(l),_=0;_<h.length;_++){var S=h[_];if(!(S[Jl]||S[vr]||l==="link"&&S.getAttribute("rel")==="stylesheet")&&S.namespaceURI!=="http://www.w3.org/2000/svg"){var U=S.getAttribute(u)||"";U=l+U;var z=y.get(U);z?z.push(S):y.set(U,[S])}}return y}function _C(l,u,h){l=l.ownerDocument||l,l.head.insertBefore(h,u==="title"?l.querySelector("head > title"):null)}function dN(l,u,h){if(h===1||u.itemProp!=null)return!1;switch(l){case"meta":case"title":return!0;case"style":if(typeof u.precedence!="string"||typeof u.href!="string"||u.href==="")break;return!0;case"link":if(typeof u.rel!="string"||typeof u.href!="string"||u.href===""||u.onLoad||u.onError)break;switch(u.rel){case"stylesheet":return l=u.disabled,typeof u.precedence=="string"&&l==null;default:return!0}case"script":if(u.async&&typeof u.async!="function"&&typeof u.async!="symbol"&&!u.onLoad&&!u.onError&&u.src&&typeof u.src=="string")return!0}return!1}function AC(l){return!(l.type==="stylesheet"&&(l.state.loading&3)===0)}var wh=null;function fN(){}function hN(l,u,h){if(wh===null)throw Error(r(475));var y=wh;if(u.type==="stylesheet"&&(typeof h.media!="string"||matchMedia(h.media).matches!==!1)&&(u.state.loading&4)===0){if(u.instance===null){var _=rd(h.href),S=l.querySelector(vh(_));if(S){l=S._p,l!==null&&typeof l=="object"&&typeof l.then=="function"&&(y.count++,y=Ag.bind(y),l.then(y,y)),u.state.loading|=4,u.instance=S,Jn(S);return}S=l.ownerDocument||l,h=xC(h),(_=ba.get(_))&&Cx(h,_),S=S.createElement("link"),Jn(S);var U=S;U._p=new Promise(function(z,Q){U.onload=z,U.onerror=Q}),ei(S,"link",h),u.instance=S}y.stylesheets===null&&(y.stylesheets=new Map),y.stylesheets.set(u,l),(l=u.state.preload)&&(u.state.loading&3)===0&&(y.count++,u=Ag.bind(y),l.addEventListener("load",u),l.addEventListener("error",u))}}function pN(){if(wh===null)throw Error(r(475));var l=wh;return l.stylesheets&&l.count===0&&Ix(l,l.stylesheets),0<l.count?function(u){var h=setTimeout(function(){if(l.stylesheets&&Ix(l,l.stylesheets),l.unsuspend){var y=l.unsuspend;l.unsuspend=null,y()}},6e4);return l.unsuspend=u,function(){l.unsuspend=null,clearTimeout(h)}}:null}function Ag(){if(this.count--,this.count===0){if(this.stylesheets)Ix(this,this.stylesheets);else if(this.unsuspend){var l=this.unsuspend;this.unsuspend=null,l()}}}var Eg=null;function Ix(l,u){l.stylesheets=null,l.unsuspend!==null&&(l.count++,Eg=new Map,u.forEach(gN,l),Eg=null,Ag.call(l))}function gN(l,u){if(!(u.state.loading&4)){var h=Eg.get(l);if(h)var y=h.get(null);else{h=new Map,Eg.set(l,h);for(var _=l.querySelectorAll("link[data-precedence],style[data-precedence]"),S=0;S<_.length;S++){var U=_[S];(U.nodeName==="LINK"||U.getAttribute("media")!=="not all")&&(h.set(U.dataset.precedence,U),y=U)}y&&h.set(null,y)}_=u.instance,U=_.getAttribute("data-precedence"),S=h.get(U)||y,S===y&&h.set(null,_),h.set(U,_),this.count++,y=Ag.bind(this),_.addEventListener("load",y),_.addEventListener("error",y),S?S.parentNode.insertBefore(_,S.nextSibling):(l=l.nodeType===9?l.head:l,l.insertBefore(_,l.firstChild)),u.state.loading|=4}}var bh={$$typeof:T,Provider:null,Consumer:null,_currentValue:K,_currentValue2:K,_threadCount:0};function mN(l,u,h,y,_,S,U,z){this.tag=1,this.containerInfo=l,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=bi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=bi(0),this.hiddenUpdates=bi(null),this.identifierPrefix=y,this.onUncaughtError=_,this.onCaughtError=S,this.onRecoverableError=U,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=z,this.incompleteTransitions=new Map}function EC(l,u,h,y,_,S,U,z,Q,le,Ce,Ie){return l=new mN(l,u,h,U,z,Q,le,Ie),u=1,S===!0&&(u|=24),S=Xi(3,null,null,u),l.current=S,S.stateNode=l,u=cv(),u.refCount++,l.pooledCache=u,u.refCount++,S.memoizedState={element:y,isDehydrated:h,cache:u},hv(S),l}function SC(l){return l?(l=Nu,l):Nu}function CC(l,u,h,y,_,S){_=SC(_),y.context===null?y.context=_:y.pendingContext=_,y=zo(u),y.payload={element:h},S=S===void 0?null:S,S!==null&&(y.callback=S),h=$o(l,y,u),h!==null&&(ea(h,l,u),Qf(h,l,u))}function TC(l,u){if(l=l.memoizedState,l!==null&&l.dehydrated!==null){var h=l.retryLane;l.retryLane=h!==0&&h<u?h:u}}function Dx(l,u){TC(l,u),(l=l.alternate)&&TC(l,u)}function IC(l){if(l.tag===13){var u=ku(l,67108864);u!==null&&ea(u,l,67108864),Dx(l,67108864)}}var Sg=!0;function yN(l,u,h,y){var _=G.T;G.T=null;var S=W.p;try{W.p=2,Rx(l,u,h,y)}finally{W.p=S,G.T=_}}function vN(l,u,h,y){var _=G.T;G.T=null;var S=W.p;try{W.p=8,Rx(l,u,h,y)}finally{W.p=S,G.T=_}}function Rx(l,u,h,y){if(Sg){var _=Mx(y);if(_===null)yx(l,u,y,Cg,h),RC(l,y);else if(wN(_,l,u,h,y))y.stopPropagation();else if(RC(l,y),u&4&&-1<xN.indexOf(l)){for(;_!==null;){var S=ns(_);if(S!==null)switch(S.tag){case 3:if(S=S.stateNode,S.current.memoizedState.isDehydrated){var U=qt(S.pendingLanes);if(U!==0){var z=S;for(z.pendingLanes|=2,z.entangledLanes|=2;U;){var Q=1<<31-Qe(U);z.entanglements[1]|=Q,U&=~Q}ms(S),(an&6)===0&&(cg=Re()+500,ph(0))}}break;case 13:z=ku(S,2),z!==null&&ea(z,S,2),dg(),Dx(S,2)}if(S=Mx(y),S===null&&yx(l,u,y,Cg,h),S===_)break;_=S}_!==null&&y.stopPropagation()}else yx(l,u,y,null,h)}}function Mx(l){return l=fa(l),Ox(l)}var Cg=null;function Ox(l){if(Cg=null,l=$s(l),l!==null){var u=a(l);if(u===null)l=null;else{var h=u.tag;if(h===13){if(l=s(u),l!==null)return l;l=null}else if(h===3){if(u.stateNode.current.memoizedState.isDehydrated)return u.tag===3?u.stateNode.containerInfo:null;l=null}else u!==l&&(l=null)}}return Cg=l,null}function DC(l){switch(l){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(qe()){case We:return 2;case Me:return 8;case Ne:case ft:return 32;case _t:return 268435456;default:return 32}default:return 32}}var Px=!1,rl=null,il=null,al=null,_h=new Map,Ah=new Map,sl=[],xN="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function RC(l,u){switch(l){case"focusin":case"focusout":rl=null;break;case"dragenter":case"dragleave":il=null;break;case"mouseover":case"mouseout":al=null;break;case"pointerover":case"pointerout":_h.delete(u.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ah.delete(u.pointerId)}}function Eh(l,u,h,y,_,S){return l===null||l.nativeEvent!==S?(l={blockedOn:u,domEventName:h,eventSystemFlags:y,nativeEvent:S,targetContainers:[_]},u!==null&&(u=ns(u),u!==null&&IC(u)),l):(l.eventSystemFlags|=y,u=l.targetContainers,_!==null&&u.indexOf(_)===-1&&u.push(_),l)}function wN(l,u,h,y,_){switch(u){case"focusin":return rl=Eh(rl,l,u,h,y,_),!0;case"dragenter":return il=Eh(il,l,u,h,y,_),!0;case"mouseover":return al=Eh(al,l,u,h,y,_),!0;case"pointerover":var S=_.pointerId;return _h.set(S,Eh(_h.get(S)||null,l,u,h,y,_)),!0;case"gotpointercapture":return S=_.pointerId,Ah.set(S,Eh(Ah.get(S)||null,l,u,h,y,_)),!0}return!1}function MC(l){var u=$s(l.target);if(u!==null){var h=a(u);if(h!==null){if(u=h.tag,u===13){if(u=s(h),u!==null){l.blockedOn=u,Zl(l.priority,function(){if(h.tag===13){var y=Ji();y=zs(y);var _=ku(h,y);_!==null&&ea(_,h,y),Dx(h,y)}});return}}else if(u===3&&h.stateNode.current.memoizedState.isDehydrated){l.blockedOn=h.tag===3?h.stateNode.containerInfo:null;return}}}l.blockedOn=null}function Tg(l){if(l.blockedOn!==null)return!1;for(var u=l.targetContainers;0<u.length;){var h=Mx(l.nativeEvent);if(h===null){h=l.nativeEvent;var y=new h.constructor(h.type,h);qs=y,h.target.dispatchEvent(y),qs=null}else return u=ns(h),u!==null&&IC(u),l.blockedOn=h,!1;u.shift()}return!0}function OC(l,u,h){Tg(l)&&h.delete(u)}function bN(){Px=!1,rl!==null&&Tg(rl)&&(rl=null),il!==null&&Tg(il)&&(il=null),al!==null&&Tg(al)&&(al=null),_h.forEach(OC),Ah.forEach(OC)}function Ig(l,u){l.blockedOn===u&&(l.blockedOn=null,Px||(Px=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,bN)))}var Dg=null;function PC(l){Dg!==l&&(Dg=l,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Dg===l&&(Dg=null);for(var u=0;u<l.length;u+=3){var h=l[u],y=l[u+1],_=l[u+2];if(typeof y!="function"){if(Ox(y||h)===null)continue;break}var S=ns(h);S!==null&&(l.splice(u,3),u-=3,Ov(S,{pending:!0,data:_,method:h.method,action:y},y,_))}}))}function Sh(l){function u(Q){return Ig(Q,l)}rl!==null&&Ig(rl,l),il!==null&&Ig(il,l),al!==null&&Ig(al,l),_h.forEach(u),Ah.forEach(u);for(var h=0;h<sl.length;h++){var y=sl[h];y.blockedOn===l&&(y.blockedOn=null)}for(;0<sl.length&&(h=sl[0],h.blockedOn===null);)MC(h),h.blockedOn===null&&sl.shift();if(h=(l.ownerDocument||l).$$reactFormReplay,h!=null)for(y=0;y<h.length;y+=3){var _=h[y],S=h[y+1],U=_[cr]||null;if(typeof S=="function")U||PC(h);else if(U){var z=null;if(S&&S.hasAttribute("formAction")){if(_=S,U=S[cr]||null)z=U.formAction;else if(Ox(_)!==null)continue}else z=U.action;typeof z=="function"?h[y+1]=z:(h.splice(y,3),y-=3),PC(h)}}}function kx(l){this._internalRoot=l}Rg.prototype.render=kx.prototype.render=function(l){var u=this._internalRoot;if(u===null)throw Error(r(409));var h=u.current,y=Ji();CC(h,y,l,u,null,null)},Rg.prototype.unmount=kx.prototype.unmount=function(){var l=this._internalRoot;if(l!==null){this._internalRoot=null;var u=l.containerInfo;CC(l.current,2,null,l,null,null),dg(),u[ua]=null}};function Rg(l){this._internalRoot=l}Rg.prototype.unstable_scheduleHydration=function(l){if(l){var u=lr();l={blockedOn:null,target:l,priority:u};for(var h=0;h<sl.length&&u!==0&&u<sl[h].priority;h++);sl.splice(h,0,l),h===0&&MC(l)}};var kC=e.version;if(kC!=="19.1.0")throw Error(r(527,kC,"19.1.0"));W.findDOMNode=function(l){var u=l._reactInternals;if(u===void 0)throw typeof l.render=="function"?Error(r(188)):(l=Object.keys(l).join(","),Error(r(268,l)));return l=c(u),l=l!==null?d(l):null,l=l===null?null:l.stateNode,l};var _N={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:G,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Mg=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Mg.isDisabled&&Mg.supportsFiber)try{rt=Mg.inject(_N),at=Mg}catch{}}return Ch.createRoot=function(l,u){if(!i(l))throw Error(r(299));var h=!1,y="",_=KE,S=QE,U=ZE,z=null;return u!=null&&(u.unstable_strictMode===!0&&(h=!0),u.identifierPrefix!==void 0&&(y=u.identifierPrefix),u.onUncaughtError!==void 0&&(_=u.onUncaughtError),u.onCaughtError!==void 0&&(S=u.onCaughtError),u.onRecoverableError!==void 0&&(U=u.onRecoverableError),u.unstable_transitionCallbacks!==void 0&&(z=u.unstable_transitionCallbacks)),u=EC(l,1,!1,null,null,h,y,_,S,U,z,null),l[ua]=u.current,mx(l),new kx(u)},Ch.hydrateRoot=function(l,u,h){if(!i(l))throw Error(r(299));var y=!1,_="",S=KE,U=QE,z=ZE,Q=null,le=null;return h!=null&&(h.unstable_strictMode===!0&&(y=!0),h.identifierPrefix!==void 0&&(_=h.identifierPrefix),h.onUncaughtError!==void 0&&(S=h.onUncaughtError),h.onCaughtError!==void 0&&(U=h.onCaughtError),h.onRecoverableError!==void 0&&(z=h.onRecoverableError),h.unstable_transitionCallbacks!==void 0&&(Q=h.unstable_transitionCallbacks),h.formState!==void 0&&(le=h.formState)),u=EC(l,1,!0,u,h??null,y,_,S,U,z,Q,le),u.context=SC(null),h=u.current,y=Ji(),y=zs(y),_=zo(y),_.callback=null,$o(h,_,y),h=y,u.current.lanes=h,or(u,h),ms(u),l[ua]=u.current,mx(l),new Rg(u)},Ch.version="19.1.0",Ch}var zC;function x5(){if(zC)return Lx.exports;zC=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Lx.exports=v5(),Lx.exports}var w5=x5();const b5=()=>{};var $C={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wR=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},_5=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const a=n[t++];e[r++]=String.fromCharCode((i&31)<<6|a&63)}else if(i>239&&i<365){const a=n[t++],s=n[t++],o=n[t++],c=((i&7)<<18|(a&63)<<12|(s&63)<<6|o&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const a=n[t++],s=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(a&63)<<6|s&63)}}return e.join("")},bR={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){const a=n[i],s=i+1<n.length,o=s?n[i+1]:0,c=i+2<n.length,d=c?n[i+2]:0,f=a>>2,p=(a&3)<<4|o>>4;let g=(o&15)<<2|d>>6,m=d&63;c||(m=64,s||(g=64)),r.push(t[f],t[p],t[g],t[m])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(wR(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):_5(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){const a=t[n.charAt(i++)],o=i<n.length?t[n.charAt(i)]:0;++i;const d=i<n.length?t[n.charAt(i)]:64;++i;const p=i<n.length?t[n.charAt(i)]:64;if(++i,a==null||o==null||d==null||p==null)throw new A5;const g=a<<2|o>>4;if(r.push(g),d!==64){const m=o<<4&240|d>>2;if(r.push(m),p!==64){const x=d<<6&192|p;r.push(x)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class A5 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const E5=function(n){const e=wR(n);return bR.encodeByteArray(e,!0)},Cm=function(n){return E5(n).replace(/\./g,"")},_R=function(n){try{return bR.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S5(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C5=()=>S5().__FIREBASE_DEFAULTS__,T5=()=>{if(typeof process>"u"||typeof $C>"u")return;const n=$C.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},I5=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&_R(n[1]);return e&&JSON.parse(e)},P1=()=>{try{return b5()||C5()||T5()||I5()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},AR=n=>{var e,t;return(t=(e=P1())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},D5=n=>{const e=AR(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},ER=()=>{var n;return(n=P1())===null||n===void 0?void 0:n.config},SR=n=>{var e;return(e=P1())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R5{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cf(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function CR(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M5(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,a=n.sub||n.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Cm(JSON.stringify(t)),Cm(JSON.stringify(s)),""].join(".")}const r0={};function O5(){const n={prod:[],emulator:[]};for(const e of Object.keys(r0))r0[e]?n.emulator.push(e):n.prod.push(e);return n}function P5(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let GC=!1;function TR(n,e){if(typeof window>"u"||typeof document>"u"||!cf(window.location.host)||r0[n]===e||r0[n]||GC)return;r0[n]=e;function t(g){return`__firebase__banner__${g}`}const r="__firebase__banner",a=O5().prod.length>0;function s(){const g=document.getElementById(r);g&&g.remove()}function o(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function c(g,m){g.setAttribute("width","24"),g.setAttribute("id",m),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function d(){const g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{GC=!0,s()},g}function f(g,m){g.setAttribute("id",m),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function p(){const g=P5(r),m=t("text"),x=document.getElementById(m)||document.createElement("span"),b=t("learnmore"),A=document.getElementById(b)||document.createElement("a"),E=t("preprendIcon"),C=document.getElementById(E)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){const T=g.element;o(T),f(A,b);const D=d();c(C,E),T.append(C,x,A,D),document.body.appendChild(T)}a?(x.innerText="Preview backend disconnected.",C.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(C.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,x.innerText="Preview backend running in this workspace."),x.setAttribute("id",m)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xi(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function k5(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(xi())}function N5(){var n;const e=(n=P1())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function L5(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function B5(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function F5(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function V5(){const n=xi();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function j5(){return!N5()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function U5(){try{return typeof indexedDB=="object"}catch{return!1}}function H5(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var a;e(((a=i.error)===null||a===void 0?void 0:a.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z5="FirebaseError";class Mo extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=z5,Object.setPrototypeOf(this,Mo.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,L0.prototype.create)}}class L0{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},i=`${this.service}/${e}`,a=this.errors[e],s=a?$5(a,r):"Error",o=`${this.serviceName}: ${s} (${i}).`;return new Mo(i,o,r)}}function $5(n,e){return n.replace(G5,(t,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const G5=/\{\$([^}]+)}/g;function W5(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Xc(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const i of t){if(!r.includes(i))return!1;const a=n[i],s=e[i];if(WC(a)&&WC(s)){if(!Xc(a,s))return!1}else if(a!==s)return!1}for(const i of r)if(!t.includes(i))return!1;return!0}function WC(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B0(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Hh(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,a]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(a)}}),e}function zh(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function Y5(n,e){const t=new q5(n,e);return t.subscribe.bind(t)}class q5{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");X5(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=Vx),i.error===void 0&&(i.error=Vx),i.complete===void 0&&(i.complete=Vx);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function X5(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Vx(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ar(n){return n&&n._delegate?n._delegate:n}class Kc{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pc="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K5{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new R5;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(a){if(i)return null;throw a}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Z5(e))try{this.getOrInitializeService({instanceIdentifier:Pc})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const a=this.getOrInitializeService({instanceIdentifier:i});r.resolve(a)}catch{}}}}clearInstance(e=Pc){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Pc){return this.instances.has(e)}getOptions(e=Pc){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[a,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(a);r===o&&s.resolve(i)}return i}onInit(e,t){var r;const i=this.normalizeInstanceIdentifier(t),a=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;a.add(e),this.onInitCallbacks.set(i,a);const s=this.instances.get(i);return s&&e(s,i),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Q5(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Pc){return this.component?this.component.multipleInstances?e:Pc:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Q5(n){return n===Pc?void 0:n}function Z5(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J5{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new K5(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Pt;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Pt||(Pt={}));const e9={debug:Pt.DEBUG,verbose:Pt.VERBOSE,info:Pt.INFO,warn:Pt.WARN,error:Pt.ERROR,silent:Pt.SILENT},t9=Pt.INFO,n9={[Pt.DEBUG]:"log",[Pt.VERBOSE]:"log",[Pt.INFO]:"info",[Pt.WARN]:"warn",[Pt.ERROR]:"error"},r9=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),i=n9[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class eb{constructor(e){this.name=e,this._logLevel=t9,this._logHandler=r9,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Pt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?e9[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Pt.DEBUG,...e),this._logHandler(this,Pt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Pt.VERBOSE,...e),this._logHandler(this,Pt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Pt.INFO,...e),this._logHandler(this,Pt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Pt.WARN,...e),this._logHandler(this,Pt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Pt.ERROR,...e),this._logHandler(this,Pt.ERROR,...e)}}const i9=(n,e)=>e.some(t=>n instanceof t);let YC,qC;function a9(){return YC||(YC=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function s9(){return qC||(qC=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const IR=new WeakMap,B2=new WeakMap,DR=new WeakMap,jx=new WeakMap,tb=new WeakMap;function o9(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",a),n.removeEventListener("error",s)},a=()=>{t(Cl(n.result)),i()},s=()=>{r(n.error),i()};n.addEventListener("success",a),n.addEventListener("error",s)});return e.then(t=>{t instanceof IDBCursor&&IR.set(t,n)}).catch(()=>{}),tb.set(e,n),e}function l9(n){if(B2.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",a),n.removeEventListener("error",s),n.removeEventListener("abort",s)},a=()=>{t(),i()},s=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",a),n.addEventListener("error",s),n.addEventListener("abort",s)});B2.set(n,e)}let F2={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return B2.get(n);if(e==="objectStoreNames")return n.objectStoreNames||DR.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Cl(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function c9(n){F2=n(F2)}function u9(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(Ux(this),e,...t);return DR.set(r,e.sort?e.sort():[e]),Cl(r)}:s9().includes(n)?function(...e){return n.apply(Ux(this),e),Cl(IR.get(this))}:function(...e){return Cl(n.apply(Ux(this),e))}}function d9(n){return typeof n=="function"?u9(n):(n instanceof IDBTransaction&&l9(n),i9(n,a9())?new Proxy(n,F2):n)}function Cl(n){if(n instanceof IDBRequest)return o9(n);if(jx.has(n))return jx.get(n);const e=d9(n);return e!==n&&(jx.set(n,e),tb.set(e,n)),e}const Ux=n=>tb.get(n);function f9(n,e,{blocked:t,upgrade:r,blocking:i,terminated:a}={}){const s=indexedDB.open(n,e),o=Cl(s);return r&&s.addEventListener("upgradeneeded",c=>{r(Cl(s.result),c.oldVersion,c.newVersion,Cl(s.transaction),c)}),t&&s.addEventListener("blocked",c=>t(c.oldVersion,c.newVersion,c)),o.then(c=>{a&&c.addEventListener("close",()=>a()),i&&c.addEventListener("versionchange",d=>i(d.oldVersion,d.newVersion,d))}).catch(()=>{}),o}const h9=["get","getKey","getAll","getAllKeys","count"],p9=["put","add","delete","clear"],Hx=new Map;function XC(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Hx.get(e))return Hx.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=p9.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||h9.includes(t)))return;const a=async function(s,...o){const c=this.transaction(s,i?"readwrite":"readonly");let d=c.store;return r&&(d=d.index(o.shift())),(await Promise.all([d[t](...o),i&&c.done]))[0]};return Hx.set(e,a),a}c9(n=>({...n,get:(e,t,r)=>XC(e,t)||n.get(e,t,r),has:(e,t)=>!!XC(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g9{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(m9(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function m9(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const V2="@firebase/app",KC="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _o=new eb("@firebase/app"),y9="@firebase/app-compat",v9="@firebase/analytics-compat",x9="@firebase/analytics",w9="@firebase/app-check-compat",b9="@firebase/app-check",_9="@firebase/auth",A9="@firebase/auth-compat",E9="@firebase/database",S9="@firebase/data-connect",C9="@firebase/database-compat",T9="@firebase/functions",I9="@firebase/functions-compat",D9="@firebase/installations",R9="@firebase/installations-compat",M9="@firebase/messaging",O9="@firebase/messaging-compat",P9="@firebase/performance",k9="@firebase/performance-compat",N9="@firebase/remote-config",L9="@firebase/remote-config-compat",B9="@firebase/storage",F9="@firebase/storage-compat",V9="@firebase/firestore",j9="@firebase/ai",U9="@firebase/firestore-compat",H9="firebase",z9="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j2="[DEFAULT]",$9={[V2]:"fire-core",[y9]:"fire-core-compat",[x9]:"fire-analytics",[v9]:"fire-analytics-compat",[b9]:"fire-app-check",[w9]:"fire-app-check-compat",[_9]:"fire-auth",[A9]:"fire-auth-compat",[E9]:"fire-rtdb",[S9]:"fire-data-connect",[C9]:"fire-rtdb-compat",[T9]:"fire-fn",[I9]:"fire-fn-compat",[D9]:"fire-iid",[R9]:"fire-iid-compat",[M9]:"fire-fcm",[O9]:"fire-fcm-compat",[P9]:"fire-perf",[k9]:"fire-perf-compat",[N9]:"fire-rc",[L9]:"fire-rc-compat",[B9]:"fire-gcs",[F9]:"fire-gcs-compat",[V9]:"fire-fst",[U9]:"fire-fst-compat",[j9]:"fire-vertex","fire-js":"fire-js",[H9]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tm=new Map,G9=new Map,U2=new Map;function QC(n,e){try{n.container.addComponent(e)}catch(t){_o.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function zd(n){const e=n.name;if(U2.has(e))return _o.debug(`There were multiple attempts to register component ${e}.`),!1;U2.set(e,n);for(const t of Tm.values())QC(t,n);for(const t of G9.values())QC(t,n);return!0}function nb(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Sa(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W9={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Tl=new L0("app","Firebase",W9);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y9{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Kc("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Tl.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uf=z9;function RR(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r=Object.assign({name:j2,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw Tl.create("bad-app-name",{appName:String(i)});if(t||(t=ER()),!t)throw Tl.create("no-options");const a=Tm.get(i);if(a){if(Xc(t,a.options)&&Xc(r,a.config))return a;throw Tl.create("duplicate-app",{appName:i})}const s=new J5(i);for(const c of U2.values())s.addComponent(c);const o=new Y9(t,r,s);return Tm.set(i,o),o}function MR(n=j2){const e=Tm.get(n);if(!e&&n===j2&&ER())return RR();if(!e)throw Tl.create("no-app",{appName:n});return e}function Il(n,e,t){var r;let i=(r=$9[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);const a=i.match(/\s|\//),s=e.match(/\s|\//);if(a||s){const o=[`Unable to register library "${i}" with version "${e}":`];a&&o.push(`library name "${i}" contains illegal characters (whitespace or "/")`),a&&s&&o.push("and"),s&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),_o.warn(o.join(" "));return}zd(new Kc(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q9="firebase-heartbeat-database",X9=1,f0="firebase-heartbeat-store";let zx=null;function OR(){return zx||(zx=f9(q9,X9,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(f0)}catch(t){console.warn(t)}}}}).catch(n=>{throw Tl.create("idb-open",{originalErrorMessage:n.message})})),zx}async function K9(n){try{const t=(await OR()).transaction(f0),r=await t.objectStore(f0).get(PR(n));return await t.done,r}catch(e){if(e instanceof Mo)_o.warn(e.message);else{const t=Tl.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});_o.warn(t.message)}}}async function ZC(n,e){try{const r=(await OR()).transaction(f0,"readwrite");await r.objectStore(f0).put(e,PR(n)),await r.done}catch(t){if(t instanceof Mo)_o.warn(t.message);else{const r=Tl.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});_o.warn(r.message)}}}function PR(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q9=1024,Z9=30;class J9{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new t7(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=JC();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(s=>s.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:i}),this._heartbeatsCache.heartbeats.length>Z9){const s=n7(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){_o.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=JC(),{heartbeatsToSend:r,unsentEntries:i}=e7(this._heartbeatsCache.heartbeats),a=Cm(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(t){return _o.warn(t),""}}}function JC(){return new Date().toISOString().substring(0,10)}function e7(n,e=Q9){const t=[];let r=n.slice();for(const i of n){const a=t.find(s=>s.agent===i.agent);if(a){if(a.dates.push(i.date),eT(t)>e){a.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),eT(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class t7{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return U5()?H5().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await K9(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return ZC(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return ZC(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function eT(n){return Cm(JSON.stringify({version:2,heartbeats:n})).length}function n7(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r7(n){zd(new Kc("platform-logger",e=>new g9(e),"PRIVATE")),zd(new Kc("heartbeat",e=>new J9(e),"PRIVATE")),Il(V2,KC,n),Il(V2,KC,"esm2017"),Il("fire-js","")}r7("");function rb(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function kR(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const i7=kR,NR=new L0("auth","Firebase",kR());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Im=new eb("@firebase/auth");function a7(n,...e){Im.logLevel<=Pt.WARN&&Im.warn(`Auth (${uf}): ${n}`,...e)}function cm(n,...e){Im.logLevel<=Pt.ERROR&&Im.error(`Auth (${uf}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ka(n,...e){throw ib(n,...e)}function Is(n,...e){return ib(n,...e)}function LR(n,e,t){const r=Object.assign(Object.assign({},i7()),{[e]:t});return new L0("auth","Firebase",r).create(e,{appName:n.name})}function wo(n){return LR(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function ib(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return NR.create(n,...e)}function ct(n,e,...t){if(!n)throw ib(e,...t)}function po(n){const e="INTERNAL ASSERTION FAILED: "+n;throw cm(e),new Error(e)}function Ao(n,e){n||po(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H2(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function s7(){return tT()==="http:"||tT()==="https:"}function tT(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o7(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(s7()||B5()||"connection"in navigator)?navigator.onLine:!0}function l7(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F0{constructor(e,t){this.shortDelay=e,this.longDelay=t,Ao(t>e,"Short delay should be less than long delay!"),this.isMobile=k5()||F5()}get(){return o7()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ab(n,e){Ao(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BR{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;po("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;po("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;po("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c7={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u7=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],d7=new F0(3e4,6e4);function zl(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function $l(n,e,t,r,i={}){return FR(n,i,async()=>{let a={},s={};r&&(e==="GET"?s=r:a={body:JSON.stringify(r)});const o=B0(Object.assign({key:n.config.apiKey},s)).slice(1),c=await n._getAdditionalHeaders();c["Content-Type"]="application/json",n.languageCode&&(c["X-Firebase-Locale"]=n.languageCode);const d=Object.assign({method:e,headers:c},a);return L5()||(d.referrerPolicy="no-referrer"),n.emulatorConfig&&cf(n.emulatorConfig.host)&&(d.credentials="include"),BR.fetch()(await VR(n,n.config.apiHost,t,o),d)})}async function FR(n,e,t){n._canInitEmulator=!1;const r=Object.assign(Object.assign({},c7),e);try{const i=new h7(n),a=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();const s=await a.json();if("needConfirmation"in s)throw kg(n,"account-exists-with-different-credential",s);if(a.ok&&!("errorMessage"in s))return s;{const o=a.ok?s.errorMessage:s.error.message,[c,d]=o.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw kg(n,"credential-already-in-use",s);if(c==="EMAIL_EXISTS")throw kg(n,"email-already-in-use",s);if(c==="USER_DISABLED")throw kg(n,"user-disabled",s);const f=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw LR(n,f,d);Ka(n,f)}}catch(i){if(i instanceof Mo)throw i;Ka(n,"network-request-failed",{message:String(i)})}}async function V0(n,e,t,r,i={}){const a=await $l(n,e,t,r,i);return"mfaPendingCredential"in a&&Ka(n,"multi-factor-auth-required",{_serverResponse:a}),a}async function VR(n,e,t,r){const i=`${e}${t}?${r}`,a=n,s=a.config.emulator?ab(n.config,i):`${n.config.apiScheme}://${i}`;return u7.includes(t)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(s).toString():s}function f7(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class h7{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Is(this.auth,"network-request-failed")),d7.get())})}}function kg(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const i=Is(n,e,r);return i.customData._tokenResponse=t,i}function nT(n){return n!==void 0&&n.enterprise!==void 0}class p7{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return f7(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function g7(n,e){return $l(n,"GET","/v2/recaptchaConfig",zl(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function m7(n,e){return $l(n,"POST","/v1/accounts:delete",e)}async function Dm(n,e){return $l(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i0(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function y7(n,e=!1){const t=ar(n),r=await t.getIdToken(e),i=sb(r);ct(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const a=typeof i.firebase=="object"?i.firebase:void 0,s=a==null?void 0:a.sign_in_provider;return{claims:i,token:r,authTime:i0($x(i.auth_time)),issuedAtTime:i0($x(i.iat)),expirationTime:i0($x(i.exp)),signInProvider:s||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function $x(n){return Number(n)*1e3}function sb(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return cm("JWT malformed, contained fewer than 3 sections"),null;try{const i=_R(t);return i?JSON.parse(i):(cm("Failed to decode base64 JWT payload"),null)}catch(i){return cm("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function rT(n){const e=sb(n);return ct(e,"internal-error"),ct(typeof e.exp<"u","internal-error"),ct(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function h0(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof Mo&&v7(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function v7({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x7{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z2{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=i0(this.lastLoginAt),this.creationTime=i0(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Rm(n){var e;const t=n.auth,r=await n.getIdToken(),i=await h0(n,Dm(t,{idToken:r}));ct(i==null?void 0:i.users.length,t,"internal-error");const a=i.users[0];n._notifyReloadListener(a);const s=!((e=a.providerUserInfo)===null||e===void 0)&&e.length?jR(a.providerUserInfo):[],o=b7(n.providerData,s),c=n.isAnonymous,d=!(n.email&&a.passwordHash)&&!(o!=null&&o.length),f=c?d:!1,p={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:o,metadata:new z2(a.createdAt,a.lastLoginAt),isAnonymous:f};Object.assign(n,p)}async function w7(n){const e=ar(n);await Rm(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function b7(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function jR(n){return n.map(e=>{var{providerId:t}=e,r=rb(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _7(n,e){const t=await FR(n,{},async()=>{const r=B0({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:a}=n.config,s=await VR(n,i,"/v1/token",`key=${a}`),o=await n._getAdditionalHeaders();o["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:o,body:r};return n.emulatorConfig&&cf(n.emulatorConfig.host)&&(c.credentials="include"),BR.fetch()(s,c)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function A7(n,e){return $l(n,"POST","/v2/accounts:revokeToken",zl(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Md{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ct(e.idToken,"internal-error"),ct(typeof e.idToken<"u","internal-error"),ct(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):rT(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){ct(e.length!==0,"internal-error");const t=rT(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(ct(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:i,expiresIn:a}=await _7(e,t);this.updateTokensAndExpiration(r,i,Number(a))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:i,expirationTime:a}=t,s=new Md;return r&&(ct(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(ct(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),a&&(ct(typeof a=="number","internal-error",{appName:e}),s.expirationTime=a),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Md,this.toJSON())}_performRefresh(){return po("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cl(n,e){ct(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class qa{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,a=rb(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new x7(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new z2(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const t=await h0(this,this.stsTokenManager.getToken(this.auth,e));return ct(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return y7(this,e)}reload(){return w7(this)}_assign(e){this!==e&&(ct(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new qa(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){ct(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await Rm(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Sa(this.auth.app))return Promise.reject(wo(this.auth));const e=await this.getIdToken();return await h0(this,m7(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,a,s,o,c,d,f;const p=(r=t.displayName)!==null&&r!==void 0?r:void 0,g=(i=t.email)!==null&&i!==void 0?i:void 0,m=(a=t.phoneNumber)!==null&&a!==void 0?a:void 0,x=(s=t.photoURL)!==null&&s!==void 0?s:void 0,b=(o=t.tenantId)!==null&&o!==void 0?o:void 0,A=(c=t._redirectEventId)!==null&&c!==void 0?c:void 0,E=(d=t.createdAt)!==null&&d!==void 0?d:void 0,C=(f=t.lastLoginAt)!==null&&f!==void 0?f:void 0,{uid:T,emailVerified:D,isAnonymous:k,providerData:B,stsTokenManager:O}=t;ct(T&&O,e,"internal-error");const I=Md.fromJSON(this.name,O);ct(typeof T=="string",e,"internal-error"),cl(p,e.name),cl(g,e.name),ct(typeof D=="boolean",e,"internal-error"),ct(typeof k=="boolean",e,"internal-error"),cl(m,e.name),cl(x,e.name),cl(b,e.name),cl(A,e.name),cl(E,e.name),cl(C,e.name);const R=new qa({uid:T,auth:e,email:g,emailVerified:D,displayName:p,isAnonymous:k,photoURL:x,phoneNumber:m,tenantId:b,stsTokenManager:I,createdAt:E,lastLoginAt:C});return B&&Array.isArray(B)&&(R.providerData=B.map(F=>Object.assign({},F))),A&&(R._redirectEventId=A),R}static async _fromIdTokenResponse(e,t,r=!1){const i=new Md;i.updateFromServerResponse(t);const a=new qa({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Rm(a),a}static async _fromGetAccountInfoResponse(e,t,r){const i=t.users[0];ct(i.localId!==void 0,"internal-error");const a=i.providerUserInfo!==void 0?jR(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!(a!=null&&a.length),o=new Md;o.updateFromIdToken(r);const c=new qa({uid:i.localId,auth:e,stsTokenManager:o,isAnonymous:s}),d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new z2(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(a!=null&&a.length)};return Object.assign(c,d),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iT=new Map;function go(n){Ao(n instanceof Function,"Expected a class definition");let e=iT.get(n);return e?(Ao(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,iT.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UR{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}UR.type="NONE";const aT=UR;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function um(n,e,t){return`firebase:${n}:${e}:${t}`}class Od{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:i,name:a}=this.auth;this.fullUserKey=um(this.userKey,i.apiKey,a),this.fullPersistenceKey=um("persistence",i.apiKey,a),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Dm(this.auth,{idToken:e}).catch(()=>{});return t?qa._fromGetAccountInfoResponse(this.auth,t,e):null}return qa._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new Od(go(aT),e,r);const i=(await Promise.all(t.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let a=i[0]||go(aT);const s=um(r,e.config.apiKey,e.name);let o=null;for(const d of t)try{const f=await d._get(s);if(f){let p;if(typeof f=="string"){const g=await Dm(e,{idToken:f}).catch(()=>{});if(!g)break;p=await qa._fromGetAccountInfoResponse(e,g,f)}else p=qa._fromJSON(e,f);d!==a&&(o=p),a=d;break}}catch{}const c=i.filter(d=>d._shouldAllowMigration);return!a._shouldAllowMigration||!c.length?new Od(a,e,r):(a=c[0],o&&await a._set(s,o.toJSON()),await Promise.all(t.map(async d=>{if(d!==a)try{await d._remove(s)}catch{}})),new Od(a,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sT(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(GR(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(HR(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(YR(e))return"Blackberry";if(qR(e))return"Webos";if(zR(e))return"Safari";if((e.includes("chrome/")||$R(e))&&!e.includes("edge/"))return"Chrome";if(WR(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function HR(n=xi()){return/firefox\//i.test(n)}function zR(n=xi()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function $R(n=xi()){return/crios\//i.test(n)}function GR(n=xi()){return/iemobile/i.test(n)}function WR(n=xi()){return/android/i.test(n)}function YR(n=xi()){return/blackberry/i.test(n)}function qR(n=xi()){return/webos/i.test(n)}function ob(n=xi()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function E7(n=xi()){var e;return ob(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function S7(){return V5()&&document.documentMode===10}function XR(n=xi()){return ob(n)||WR(n)||qR(n)||YR(n)||/windows phone/i.test(n)||GR(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KR(n,e=[]){let t;switch(n){case"Browser":t=sT(xi());break;case"Worker":t=`${sT(xi())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${uf}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C7{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=a=>new Promise((s,o)=>{try{const c=e(a);s(c)}catch(c){o(c)}});r.onAbort=t,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function T7(n,e={}){return $l(n,"GET","/v2/passwordPolicy",zl(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I7=6;class D7{constructor(e){var t,r,i,a;const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=s.minPasswordLength)!==null&&t!==void 0?t:I7,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(a=e.forceUpgradeOnSignin)!==null&&a!==void 0?a:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,a,s,o;const c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(t=c.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(i=c.containsLowercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(a=c.containsUppercaseLetter)!==null&&a!==void 0?a:!0),c.isValid&&(c.isValid=(s=c.containsNumericCharacter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(o=c.containsNonAlphanumericCharacter)!==null&&o!==void 0?o:!0),c}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R7{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new oT(this),this.idTokenSubscription=new oT(this),this.beforeStateQueue=new C7(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=NR,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=go(t)),this._initializationPromise=this.queue(async()=>{var r,i,a;if(!this._deleted&&(this.persistenceManager=await Od.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((a=this.currentUser)===null||a===void 0?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Dm(this,{idToken:e}),r=await qa._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Sa(this.app)){const s=this.app.settings.authIdToken;return s?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(o,o))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const s=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,o=i==null?void 0:i._redirectEventId,c=await this.tryRedirectSignIn(e);(!s||s===o)&&(c!=null&&c.user)&&(i=c.user,a=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(i)}catch(s){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return ct(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Rm(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=l7()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Sa(this.app))return Promise.reject(wo(this));const t=e?ar(e):null;return t&&ct(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&ct(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Sa(this.app)?Promise.reject(wo(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Sa(this.app)?Promise.reject(wo(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(go(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await T7(this),t=new D7(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new L0("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await A7(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&go(e)||this._popupRedirectResolver;ct(t,this,"argument-error"),this.redirectPersistenceManager=await Od.create(this,[go(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};const a=typeof t=="function"?t:t.next.bind(t);let s=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(ct(o,this,"internal-error"),o.then(()=>{s||a(this.currentUser)}),typeof t=="function"){const c=e.addObserver(t,r,i);return()=>{s=!0,c()}}else{const c=e.addObserver(t);return()=>{s=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ct(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=KR(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){var e;if(Sa(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&a7(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function au(n){return ar(n)}class oT{constructor(e){this.auth=e,this.observer=null,this.addObserver=Y5(t=>this.observer=t)}get next(){return ct(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let k1={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function M7(n){k1=n}function QR(n){return k1.loadJS(n)}function O7(){return k1.recaptchaEnterpriseScript}function P7(){return k1.gapiScript}function k7(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class N7{constructor(){this.enterprise=new L7}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class L7{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const B7="recaptcha-enterprise",ZR="NO_RECAPTCHA";class F7{constructor(e){this.type=B7,this.auth=au(e)}async verify(e="verify",t=!1){async function r(a){if(!t){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(s,o)=>{g7(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)o(new Error("recaptcha Enterprise site key undefined"));else{const d=new p7(c);return a.tenantId==null?a._agentRecaptchaConfig=d:a._tenantRecaptchaConfigs[a.tenantId]=d,s(d.siteKey)}}).catch(c=>{o(c)})})}function i(a,s,o){const c=window.grecaptcha;nT(c)?c.enterprise.ready(()=>{c.enterprise.execute(a,{action:e}).then(d=>{s(d)}).catch(()=>{s(ZR)})}):o(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new N7().execute("siteKey",{action:"verify"}):new Promise((a,s)=>{r(this.auth).then(o=>{if(!t&&nT(window.grecaptcha))i(o,a,s);else{if(typeof window>"u"){s(new Error("RecaptchaVerifier is only supported in browser"));return}let c=O7();c.length!==0&&(c+=o),QR(c).then(()=>{i(o,a,s)}).catch(d=>{s(d)})}}).catch(o=>{s(o)})})}}async function lT(n,e,t,r=!1,i=!1){const a=new F7(n);let s;if(i)s=ZR;else try{s=await a.verify(t)}catch{s=await a.verify(t,!0)}const o=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in o){const c=o.phoneEnrollmentInfo.phoneNumber,d=o.phoneEnrollmentInfo.recaptchaToken;Object.assign(o,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:d,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in o){const c=o.phoneSignInInfo.recaptchaToken;Object.assign(o,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return o}return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function $2(n,e,t,r,i){var a;if(!((a=n._getRecaptchaConfig())===null||a===void 0)&&a.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await lT(n,e,t,t==="getOobCode");return r(n,s)}else return r(n,e).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await lT(n,e,t,t==="getOobCode");return r(n,o)}else return Promise.reject(s)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V7(n,e){const t=nb(n,"auth");if(t.isInitialized()){const i=t.getImmediate(),a=t.getOptions();if(Xc(a,e??{}))return i;Ka(i,"already-initialized")}return t.initialize({options:e})}function j7(n,e){const t=(e==null?void 0:e.persistence)||[],r=(Array.isArray(t)?t:[t]).map(go);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function U7(n,e,t){const r=au(n);ct(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,a=JR(e),{host:s,port:o}=H7(e),c=o===null?"":`:${o}`,d={url:`${a}//${s}${c}/`},f=Object.freeze({host:s,port:o,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){ct(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),ct(Xc(d,r.config.emulator)&&Xc(f,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=d,r.emulatorConfig=f,r.settings.appVerificationDisabledForTesting=!0,cf(s)?(CR(`${a}//${s}${c}`),TR("Auth",!0)):z7()}function JR(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function H7(n){const e=JR(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const a=i[1];return{host:a,port:cT(r.substr(a.length+1))}}else{const[a,s]=r.split(":");return{host:a,port:cT(s)}}}function cT(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function z7(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lb{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return po("not implemented")}_getIdTokenResponse(e){return po("not implemented")}_linkToIdToken(e,t){return po("not implemented")}_getReauthenticationResolver(e){return po("not implemented")}}async function $7(n,e){return $l(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function G7(n,e){return V0(n,"POST","/v1/accounts:signInWithPassword",zl(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function W7(n,e){return V0(n,"POST","/v1/accounts:signInWithEmailLink",zl(n,e))}async function Y7(n,e){return V0(n,"POST","/v1/accounts:signInWithEmailLink",zl(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p0 extends lb{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new p0(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new p0(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return $2(e,t,"signInWithPassword",G7);case"emailLink":return W7(e,{email:this._email,oobCode:this._password});default:Ka(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return $2(e,r,"signUpPassword",$7);case"emailLink":return Y7(e,{idToken:t,email:this._email,oobCode:this._password});default:Ka(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Pd(n,e){return V0(n,"POST","/v1/accounts:signInWithIdp",zl(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q7="http://localhost";class Qc extends lb{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Qc(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Ka("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=t,a=rb(t,["providerId","signInMethod"]);if(!r||!i)return null;const s=new Qc(r,i);return s.idToken=a.idToken||void 0,s.accessToken=a.accessToken||void 0,s.secret=a.secret,s.nonce=a.nonce,s.pendingToken=a.pendingToken||null,s}_getIdTokenResponse(e){const t=this.buildRequest();return Pd(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,Pd(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Pd(e,t)}buildRequest(){const e={requestUri:q7,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=B0(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X7(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function K7(n){const e=Hh(zh(n)).link,t=e?Hh(zh(e)).deep_link_id:null,r=Hh(zh(n)).deep_link_id;return(r?Hh(zh(r)).link:null)||r||t||e||n}class cb{constructor(e){var t,r,i,a,s,o;const c=Hh(zh(e)),d=(t=c.apiKey)!==null&&t!==void 0?t:null,f=(r=c.oobCode)!==null&&r!==void 0?r:null,p=X7((i=c.mode)!==null&&i!==void 0?i:null);ct(d&&f&&p,"argument-error"),this.apiKey=d,this.operation=p,this.code=f,this.continueUrl=(a=c.continueUrl)!==null&&a!==void 0?a:null,this.languageCode=(s=c.lang)!==null&&s!==void 0?s:null,this.tenantId=(o=c.tenantId)!==null&&o!==void 0?o:null}static parseLink(e){const t=K7(e);try{return new cb(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class df{constructor(){this.providerId=df.PROVIDER_ID}static credential(e,t){return p0._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=cb.parseLink(t);return ct(r,"argument-error"),p0._fromEmailAndCode(e,r.code,r.tenantId)}}df.PROVIDER_ID="password";df.EMAIL_PASSWORD_SIGN_IN_METHOD="password";df.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e4{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j0 extends e4{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vl extends j0{constructor(){super("facebook.com")}static credential(e){return Qc._fromParams({providerId:vl.PROVIDER_ID,signInMethod:vl.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return vl.credentialFromTaggedObject(e)}static credentialFromError(e){return vl.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return vl.credential(e.oauthAccessToken)}catch{return null}}}vl.FACEBOOK_SIGN_IN_METHOD="facebook.com";vl.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xl extends j0{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Qc._fromParams({providerId:xl.PROVIDER_ID,signInMethod:xl.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return xl.credentialFromTaggedObject(e)}static credentialFromError(e){return xl.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return xl.credential(t,r)}catch{return null}}}xl.GOOGLE_SIGN_IN_METHOD="google.com";xl.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wl extends j0{constructor(){super("github.com")}static credential(e){return Qc._fromParams({providerId:wl.PROVIDER_ID,signInMethod:wl.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return wl.credentialFromTaggedObject(e)}static credentialFromError(e){return wl.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return wl.credential(e.oauthAccessToken)}catch{return null}}}wl.GITHUB_SIGN_IN_METHOD="github.com";wl.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bl extends j0{constructor(){super("twitter.com")}static credential(e,t){return Qc._fromParams({providerId:bl.PROVIDER_ID,signInMethod:bl.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return bl.credentialFromTaggedObject(e)}static credentialFromError(e){return bl.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return bl.credential(t,r)}catch{return null}}}bl.TWITTER_SIGN_IN_METHOD="twitter.com";bl.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Q7(n,e){return V0(n,"POST","/v1/accounts:signUp",zl(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zc{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,i=!1){const a=await qa._fromIdTokenResponse(e,r,i),s=uT(r);return new Zc({user:a,providerId:s,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const i=uT(r);return new Zc({user:e,providerId:i,_tokenResponse:r,operationType:t})}}function uT(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mm extends Mo{constructor(e,t,r,i){var a;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Mm.prototype),this.customData={appName:e.name,tenantId:(a=e.tenantId)!==null&&a!==void 0?a:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new Mm(e,t,r,i)}}function t4(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?Mm._fromErrorAndOperation(n,a,e,r):a})}async function Z7(n,e,t=!1){const r=await h0(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Zc._forOperation(n,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function J7(n,e,t=!1){const{auth:r}=n;if(Sa(r.app))return Promise.reject(wo(r));const i="reauthenticate";try{const a=await h0(n,t4(r,i,e,n),t);ct(a.idToken,r,"internal-error");const s=sb(a.idToken);ct(s,r,"internal-error");const{sub:o}=s;return ct(n.uid===o,r,"user-mismatch"),Zc._forOperation(n,i,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&Ka(r,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function n4(n,e,t=!1){if(Sa(n.app))return Promise.reject(wo(n));const r="signIn",i=await t4(n,r,e),a=await Zc._fromIdTokenResponse(n,r,i);return t||await n._updateCurrentUser(a.user),a}async function eL(n,e){return n4(au(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function r4(n){const e=au(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function tL(n,e,t){if(Sa(n.app))return Promise.reject(wo(n));const r=au(n),s=await $2(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Q7).catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&r4(n),c}),o=await Zc._fromIdTokenResponse(r,"signIn",s);return await r._updateCurrentUser(o.user),o}function nL(n,e,t){return Sa(n.app)?Promise.reject(wo(n)):eL(ar(n),df.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&r4(n),r})}function rL(n,e,t,r){return ar(n).onIdTokenChanged(e,t,r)}function iL(n,e,t){return ar(n).beforeAuthStateChanged(e,t)}function aL(n,e,t,r){return ar(n).onAuthStateChanged(e,t,r)}const Om="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i4{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Om,"1"),this.storage.removeItem(Om),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sL=1e3,oL=10;class a4 extends i4{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=XR(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),i=this.localCache[t];r!==i&&e(t,i,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((s,o,c)=>{this.notifyListeners(s,c)});return}const r=e.key;t?this.detachListener():this.stopPolling();const i=()=>{const s=this.storage.getItem(r);!t&&this.localCache[r]===s||this.notifyListeners(r,s)},a=this.storage.getItem(r);S7()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,oL):i()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},sL)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}a4.type="LOCAL";const lL=a4;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s4 extends i4{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}s4.type="SESSION";const o4=s4;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cL(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N1{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(i=>i.isListeningto(e));if(t)return t;const r=new N1(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:i,data:a}=t.data,s=this.handlersMap[i];if(!(s!=null&&s.size))return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const o=Array.from(s).map(async d=>d(t.origin,a)),c=await cL(o);t.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:c})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}N1.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ub(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uL{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let a,s;return new Promise((o,c)=>{const d=ub("",20);i.port1.start();const f=setTimeout(()=>{c(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(p){const g=p;if(g.data.eventId===d)switch(g.data.status){case"ack":clearTimeout(f),a=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),o(g.data.response);break;default:clearTimeout(f),clearTimeout(a),c(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:d,data:t},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ds(){return window}function dL(n){Ds().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l4(){return typeof Ds().WorkerGlobalScope<"u"&&typeof Ds().importScripts=="function"}async function fL(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function hL(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function pL(){return l4()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c4="firebaseLocalStorageDb",gL=1,Pm="firebaseLocalStorage",u4="fbase_key";class U0{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function L1(n,e){return n.transaction([Pm],e?"readwrite":"readonly").objectStore(Pm)}function mL(){const n=indexedDB.deleteDatabase(c4);return new U0(n).toPromise()}function G2(){const n=indexedDB.open(c4,gL);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(Pm,{keyPath:u4})}catch(i){t(i)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(Pm)?e(r):(r.close(),await mL(),e(await G2()))})})}async function dT(n,e,t){const r=L1(n,!0).put({[u4]:e,value:t});return new U0(r).toPromise()}async function yL(n,e){const t=L1(n,!1).get(e),r=await new U0(t).toPromise();return r===void 0?null:r.value}function fT(n,e){const t=L1(n,!0).delete(e);return new U0(t).toPromise()}const vL=800,xL=3;class d4{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await G2(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>xL)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return l4()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=N1._getInstance(pL()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await fL(),!this.activeServiceWorker)return;this.sender=new uL(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((t=r[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||hL()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await G2();return await dT(e,Om,"1"),await fT(e,Om),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>dT(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>yL(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>fT(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const a=L1(i,!1).getAll();return new U0(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:a}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(a)&&(this.notifyListeners(i,a),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),vL)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}d4.type="LOCAL";const wL=d4;new F0(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bL(n,e){return e?go(e):(ct(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class db extends lb{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Pd(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Pd(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Pd(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function _L(n){return n4(n.auth,new db(n),n.bypassAuthState)}function AL(n){const{auth:e,user:t}=n;return ct(t,e,"internal-error"),J7(t,new db(n),n.bypassAuthState)}async function EL(n){const{auth:e,user:t}=n;return ct(t,e,"internal-error"),Z7(t,new db(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f4{constructor(e,t,r,i,a=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:i,tenantId:a,error:s,type:o}=e;if(s){this.reject(s);return}const c={auth:this.auth,requestUri:t,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(c))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return _L;case"linkViaPopup":case"linkViaRedirect":return EL;case"reauthViaPopup":case"reauthViaRedirect":return AL;default:Ka(this.auth,"internal-error")}}resolve(e){Ao(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ao(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SL=new F0(2e3,1e4);class wd extends f4{constructor(e,t,r,i,a){super(e,t,i,a),this.provider=r,this.authWindow=null,this.pollId=null,wd.currentPopupAction&&wd.currentPopupAction.cancel(),wd.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ct(e,this.auth,"internal-error"),e}async onExecution(){Ao(this.filter.length===1,"Popup operations only handle one event");const e=ub();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Is(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Is(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,wd.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if(!((r=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Is(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,SL.get())};e()}}wd.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CL="pendingRedirect",dm=new Map;class TL extends f4{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=dm.get(this.auth._key());if(!e){try{const r=await IL(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}dm.set(this.auth._key(),e)}return this.bypassAuthState||dm.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function IL(n,e){const t=ML(e),r=RL(n);if(!await r._isAvailable())return!1;const i=await r._get(t)==="true";return await r._remove(t),i}function DL(n,e){dm.set(n._key(),e)}function RL(n){return go(n._redirectPersistence)}function ML(n){return um(CL,n.config.apiKey,n.name)}async function OL(n,e,t=!1){if(Sa(n.app))return Promise.reject(wo(n));const r=au(n),i=bL(r,e),s=await new TL(r,i,t).execute();return s&&!t&&(delete s.user._redirectEventId,await r._persistUserIfCurrent(s.user),await r._setRedirectUser(null,e)),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PL=600*1e3;class kL{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!NL(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!h4(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(Is(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=PL&&this.cachedEventUids.clear(),this.cachedEventUids.has(hT(e))}saveEventToCache(e){this.cachedEventUids.add(hT(e)),this.lastProcessedEventTime=Date.now()}}function hT(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function h4({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function NL(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return h4(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LL(n,e={}){return $l(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BL=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,FL=/^https?/;async function VL(n){if(n.config.emulator)return;const{authorizedDomains:e}=await LL(n);for(const t of e)try{if(jL(t))return}catch{}Ka(n,"unauthorized-domain")}function jL(n){const e=H2(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const s=new URL(n);return s.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&s.hostname===r}if(!FL.test(t))return!1;if(BL.test(n))return r===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UL=new F0(3e4,6e4);function pT(){const n=Ds().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function HL(n){return new Promise((e,t)=>{var r,i,a;function s(){pT(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{pT(),t(Is(n,"network-request-failed"))},timeout:UL.get()})}if(!((i=(r=Ds().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((a=Ds().gapi)===null||a===void 0)&&a.load)s();else{const o=k7("iframefcb");return Ds()[o]=()=>{gapi.load?s():t(Is(n,"network-request-failed"))},QR(`${P7()}?onload=${o}`).catch(c=>t(c))}}).catch(e=>{throw fm=null,e})}let fm=null;function zL(n){return fm=fm||HL(n),fm}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $L=new F0(5e3,15e3),GL="__/auth/iframe",WL="emulator/auth/iframe",YL={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},qL=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function XL(n){const e=n.config;ct(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?ab(e,WL):`https://${n.config.authDomain}/${GL}`,r={apiKey:e.apiKey,appName:n.name,v:uf},i=qL.get(n.config.apiHost);i&&(r.eid=i);const a=n._getFrameworks();return a.length&&(r.fw=a.join(",")),`${t}?${B0(r).slice(1)}`}async function KL(n){const e=await zL(n),t=Ds().gapi;return ct(t,n,"internal-error"),e.open({where:document.body,url:XL(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:YL,dontclear:!0},r=>new Promise(async(i,a)=>{await r.restyle({setHideOnLeave:!1});const s=Is(n,"network-request-failed"),o=Ds().setTimeout(()=>{a(s)},$L.get());function c(){Ds().clearTimeout(o),i(r)}r.ping(c).then(c,()=>{a(s)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QL={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},ZL=500,JL=600,eB="_blank",tB="http://localhost";class gT{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function nB(n,e,t,r=ZL,i=JL){const a=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString();let o="";const c=Object.assign(Object.assign({},QL),{width:r.toString(),height:i.toString(),top:a,left:s}),d=xi().toLowerCase();t&&(o=$R(d)?eB:t),HR(d)&&(e=e||tB,c.scrollbars="yes");const f=Object.entries(c).reduce((g,[m,x])=>`${g}${m}=${x},`,"");if(E7(d)&&o!=="_self")return rB(e||"",o),new gT(null);const p=window.open(e||"",o,f);ct(p,n,"popup-blocked");try{p.focus()}catch{}return new gT(p)}function rB(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iB="__/auth/handler",aB="emulator/auth/handler",sB=encodeURIComponent("fac");async function mT(n,e,t,r,i,a){ct(n.config.authDomain,n,"auth-domain-config-required"),ct(n.config.apiKey,n,"invalid-api-key");const s={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:uf,eventId:i};if(e instanceof e4){e.setDefaultLanguage(n.languageCode),s.providerId=e.providerId||"",W5(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(const[f,p]of Object.entries({}))s[f]=p}if(e instanceof j0){const f=e.getScopes().filter(p=>p!=="");f.length>0&&(s.scopes=f.join(","))}n.tenantId&&(s.tid=n.tenantId);const o=s;for(const f of Object.keys(o))o[f]===void 0&&delete o[f];const c=await n._getAppCheckToken(),d=c?`#${sB}=${encodeURIComponent(c)}`:"";return`${oB(n)}?${B0(o).slice(1)}${d}`}function oB({config:n}){return n.emulator?ab(n,aB):`https://${n.authDomain}/${iB}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gx="webStorageSupport";class lB{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=o4,this._completeRedirectFn=OL,this._overrideRedirectResult=DL}async _openPopup(e,t,r,i){var a;Ao((a=this.eventManagers[e._key()])===null||a===void 0?void 0:a.manager,"_initialize() not called before _openPopup()");const s=await mT(e,t,r,H2(),i);return nB(e,s,ub())}async _openRedirect(e,t,r,i){await this._originValidation(e);const a=await mT(e,t,r,H2(),i);return dL(a),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:a}=this.eventManagers[t];return i?Promise.resolve(i):(Ao(a,"If manager is not set, promise should be"),a)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await KL(e),r=new kL(e);return t.register("authEvent",i=>(ct(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Gx,{type:Gx},i=>{var a;const s=(a=i==null?void 0:i[0])===null||a===void 0?void 0:a[Gx];s!==void 0&&t(!!s),Ka(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=VL(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return XR()||zR()||ob()}}const cB=lB;var yT="@firebase/auth",vT="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uB{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){ct(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dB(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function fB(n){zd(new Kc("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:s,authDomain:o}=r.options;ct(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:s,authDomain:o,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:KR(n)},d=new R7(r,i,a,c);return j7(d,t),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),zd(new Kc("auth-internal",e=>{const t=au(e.getProvider("auth").getImmediate());return(r=>new uB(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Il(yT,vT,dB(n)),Il(yT,vT,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hB=300,pB=SR("authIdTokenMaxAge")||hB;let xT=null;const gB=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>pB)return;const i=t==null?void 0:t.token;xT!==i&&(xT=i,await fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function mB(n=MR()){const e=nb(n,"auth");if(e.isInitialized())return e.getImmediate();const t=V7(n,{popupRedirectResolver:cB,persistence:[wL,lL,o4]}),r=SR("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(r,location.origin);if(location.origin===a.origin){const s=gB(a.toString());iL(t,s,()=>s(t.currentUser)),rL(t,o=>s(o))}}const i=AR("auth");return i&&U7(t,`http://${i}`),t}function yB(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}M7({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{const a=Is("internal-error");a.customData=i,t(a)},r.type="text/javascript",r.charset="UTF-8",yB().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});fB("Browser");var vB="firebase",xB="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Il(vB,xB,"app");var wT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Dl,p4;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(O,I){function R(){}R.prototype=I.prototype,O.D=I.prototype,O.prototype=new R,O.prototype.constructor=O,O.C=function(F,N,P){for(var V=Array(arguments.length-2),q=2;q<arguments.length;q++)V[q-2]=arguments[q];return I.prototype[N].apply(F,V)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(O,I,R){R||(R=0);var F=Array(16);if(typeof I=="string")for(var N=0;16>N;++N)F[N]=I.charCodeAt(R++)|I.charCodeAt(R++)<<8|I.charCodeAt(R++)<<16|I.charCodeAt(R++)<<24;else for(N=0;16>N;++N)F[N]=I[R++]|I[R++]<<8|I[R++]<<16|I[R++]<<24;I=O.g[0],R=O.g[1],N=O.g[2];var P=O.g[3],V=I+(P^R&(N^P))+F[0]+3614090360&4294967295;I=R+(V<<7&4294967295|V>>>25),V=P+(N^I&(R^N))+F[1]+3905402710&4294967295,P=I+(V<<12&4294967295|V>>>20),V=N+(R^P&(I^R))+F[2]+606105819&4294967295,N=P+(V<<17&4294967295|V>>>15),V=R+(I^N&(P^I))+F[3]+3250441966&4294967295,R=N+(V<<22&4294967295|V>>>10),V=I+(P^R&(N^P))+F[4]+4118548399&4294967295,I=R+(V<<7&4294967295|V>>>25),V=P+(N^I&(R^N))+F[5]+1200080426&4294967295,P=I+(V<<12&4294967295|V>>>20),V=N+(R^P&(I^R))+F[6]+2821735955&4294967295,N=P+(V<<17&4294967295|V>>>15),V=R+(I^N&(P^I))+F[7]+4249261313&4294967295,R=N+(V<<22&4294967295|V>>>10),V=I+(P^R&(N^P))+F[8]+1770035416&4294967295,I=R+(V<<7&4294967295|V>>>25),V=P+(N^I&(R^N))+F[9]+2336552879&4294967295,P=I+(V<<12&4294967295|V>>>20),V=N+(R^P&(I^R))+F[10]+4294925233&4294967295,N=P+(V<<17&4294967295|V>>>15),V=R+(I^N&(P^I))+F[11]+2304563134&4294967295,R=N+(V<<22&4294967295|V>>>10),V=I+(P^R&(N^P))+F[12]+1804603682&4294967295,I=R+(V<<7&4294967295|V>>>25),V=P+(N^I&(R^N))+F[13]+4254626195&4294967295,P=I+(V<<12&4294967295|V>>>20),V=N+(R^P&(I^R))+F[14]+2792965006&4294967295,N=P+(V<<17&4294967295|V>>>15),V=R+(I^N&(P^I))+F[15]+1236535329&4294967295,R=N+(V<<22&4294967295|V>>>10),V=I+(N^P&(R^N))+F[1]+4129170786&4294967295,I=R+(V<<5&4294967295|V>>>27),V=P+(R^N&(I^R))+F[6]+3225465664&4294967295,P=I+(V<<9&4294967295|V>>>23),V=N+(I^R&(P^I))+F[11]+643717713&4294967295,N=P+(V<<14&4294967295|V>>>18),V=R+(P^I&(N^P))+F[0]+3921069994&4294967295,R=N+(V<<20&4294967295|V>>>12),V=I+(N^P&(R^N))+F[5]+3593408605&4294967295,I=R+(V<<5&4294967295|V>>>27),V=P+(R^N&(I^R))+F[10]+38016083&4294967295,P=I+(V<<9&4294967295|V>>>23),V=N+(I^R&(P^I))+F[15]+3634488961&4294967295,N=P+(V<<14&4294967295|V>>>18),V=R+(P^I&(N^P))+F[4]+3889429448&4294967295,R=N+(V<<20&4294967295|V>>>12),V=I+(N^P&(R^N))+F[9]+568446438&4294967295,I=R+(V<<5&4294967295|V>>>27),V=P+(R^N&(I^R))+F[14]+3275163606&4294967295,P=I+(V<<9&4294967295|V>>>23),V=N+(I^R&(P^I))+F[3]+4107603335&4294967295,N=P+(V<<14&4294967295|V>>>18),V=R+(P^I&(N^P))+F[8]+1163531501&4294967295,R=N+(V<<20&4294967295|V>>>12),V=I+(N^P&(R^N))+F[13]+2850285829&4294967295,I=R+(V<<5&4294967295|V>>>27),V=P+(R^N&(I^R))+F[2]+4243563512&4294967295,P=I+(V<<9&4294967295|V>>>23),V=N+(I^R&(P^I))+F[7]+1735328473&4294967295,N=P+(V<<14&4294967295|V>>>18),V=R+(P^I&(N^P))+F[12]+2368359562&4294967295,R=N+(V<<20&4294967295|V>>>12),V=I+(R^N^P)+F[5]+4294588738&4294967295,I=R+(V<<4&4294967295|V>>>28),V=P+(I^R^N)+F[8]+2272392833&4294967295,P=I+(V<<11&4294967295|V>>>21),V=N+(P^I^R)+F[11]+1839030562&4294967295,N=P+(V<<16&4294967295|V>>>16),V=R+(N^P^I)+F[14]+4259657740&4294967295,R=N+(V<<23&4294967295|V>>>9),V=I+(R^N^P)+F[1]+2763975236&4294967295,I=R+(V<<4&4294967295|V>>>28),V=P+(I^R^N)+F[4]+1272893353&4294967295,P=I+(V<<11&4294967295|V>>>21),V=N+(P^I^R)+F[7]+4139469664&4294967295,N=P+(V<<16&4294967295|V>>>16),V=R+(N^P^I)+F[10]+3200236656&4294967295,R=N+(V<<23&4294967295|V>>>9),V=I+(R^N^P)+F[13]+681279174&4294967295,I=R+(V<<4&4294967295|V>>>28),V=P+(I^R^N)+F[0]+3936430074&4294967295,P=I+(V<<11&4294967295|V>>>21),V=N+(P^I^R)+F[3]+3572445317&4294967295,N=P+(V<<16&4294967295|V>>>16),V=R+(N^P^I)+F[6]+76029189&4294967295,R=N+(V<<23&4294967295|V>>>9),V=I+(R^N^P)+F[9]+3654602809&4294967295,I=R+(V<<4&4294967295|V>>>28),V=P+(I^R^N)+F[12]+3873151461&4294967295,P=I+(V<<11&4294967295|V>>>21),V=N+(P^I^R)+F[15]+530742520&4294967295,N=P+(V<<16&4294967295|V>>>16),V=R+(N^P^I)+F[2]+3299628645&4294967295,R=N+(V<<23&4294967295|V>>>9),V=I+(N^(R|~P))+F[0]+4096336452&4294967295,I=R+(V<<6&4294967295|V>>>26),V=P+(R^(I|~N))+F[7]+1126891415&4294967295,P=I+(V<<10&4294967295|V>>>22),V=N+(I^(P|~R))+F[14]+2878612391&4294967295,N=P+(V<<15&4294967295|V>>>17),V=R+(P^(N|~I))+F[5]+4237533241&4294967295,R=N+(V<<21&4294967295|V>>>11),V=I+(N^(R|~P))+F[12]+1700485571&4294967295,I=R+(V<<6&4294967295|V>>>26),V=P+(R^(I|~N))+F[3]+2399980690&4294967295,P=I+(V<<10&4294967295|V>>>22),V=N+(I^(P|~R))+F[10]+4293915773&4294967295,N=P+(V<<15&4294967295|V>>>17),V=R+(P^(N|~I))+F[1]+2240044497&4294967295,R=N+(V<<21&4294967295|V>>>11),V=I+(N^(R|~P))+F[8]+1873313359&4294967295,I=R+(V<<6&4294967295|V>>>26),V=P+(R^(I|~N))+F[15]+4264355552&4294967295,P=I+(V<<10&4294967295|V>>>22),V=N+(I^(P|~R))+F[6]+2734768916&4294967295,N=P+(V<<15&4294967295|V>>>17),V=R+(P^(N|~I))+F[13]+1309151649&4294967295,R=N+(V<<21&4294967295|V>>>11),V=I+(N^(R|~P))+F[4]+4149444226&4294967295,I=R+(V<<6&4294967295|V>>>26),V=P+(R^(I|~N))+F[11]+3174756917&4294967295,P=I+(V<<10&4294967295|V>>>22),V=N+(I^(P|~R))+F[2]+718787259&4294967295,N=P+(V<<15&4294967295|V>>>17),V=R+(P^(N|~I))+F[9]+3951481745&4294967295,O.g[0]=O.g[0]+I&4294967295,O.g[1]=O.g[1]+(N+(V<<21&4294967295|V>>>11))&4294967295,O.g[2]=O.g[2]+N&4294967295,O.g[3]=O.g[3]+P&4294967295}r.prototype.u=function(O,I){I===void 0&&(I=O.length);for(var R=I-this.blockSize,F=this.B,N=this.h,P=0;P<I;){if(N==0)for(;P<=R;)i(this,O,P),P+=this.blockSize;if(typeof O=="string"){for(;P<I;)if(F[N++]=O.charCodeAt(P++),N==this.blockSize){i(this,F),N=0;break}}else for(;P<I;)if(F[N++]=O[P++],N==this.blockSize){i(this,F),N=0;break}}this.h=N,this.o+=I},r.prototype.v=function(){var O=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);O[0]=128;for(var I=1;I<O.length-8;++I)O[I]=0;var R=8*this.o;for(I=O.length-8;I<O.length;++I)O[I]=R&255,R/=256;for(this.u(O),O=Array(16),I=R=0;4>I;++I)for(var F=0;32>F;F+=8)O[R++]=this.g[I]>>>F&255;return O};function a(O,I){var R=o;return Object.prototype.hasOwnProperty.call(R,O)?R[O]:R[O]=I(O)}function s(O,I){this.h=I;for(var R=[],F=!0,N=O.length-1;0<=N;N--){var P=O[N]|0;F&&P==I||(R[N]=P,F=!1)}this.g=R}var o={};function c(O){return-128<=O&&128>O?a(O,function(I){return new s([I|0],0>I?-1:0)}):new s([O|0],0>O?-1:0)}function d(O){if(isNaN(O)||!isFinite(O))return p;if(0>O)return A(d(-O));for(var I=[],R=1,F=0;O>=R;F++)I[F]=O/R|0,R*=4294967296;return new s(I,0)}function f(O,I){if(O.length==0)throw Error("number format error: empty string");if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(O.charAt(0)=="-")return A(f(O.substring(1),I));if(0<=O.indexOf("-"))throw Error('number format error: interior "-" character');for(var R=d(Math.pow(I,8)),F=p,N=0;N<O.length;N+=8){var P=Math.min(8,O.length-N),V=parseInt(O.substring(N,N+P),I);8>P?(P=d(Math.pow(I,P)),F=F.j(P).add(d(V))):(F=F.j(R),F=F.add(d(V)))}return F}var p=c(0),g=c(1),m=c(16777216);n=s.prototype,n.m=function(){if(b(this))return-A(this).m();for(var O=0,I=1,R=0;R<this.g.length;R++){var F=this.i(R);O+=(0<=F?F:4294967296+F)*I,I*=4294967296}return O},n.toString=function(O){if(O=O||10,2>O||36<O)throw Error("radix out of range: "+O);if(x(this))return"0";if(b(this))return"-"+A(this).toString(O);for(var I=d(Math.pow(O,6)),R=this,F="";;){var N=D(R,I).g;R=E(R,N.j(I));var P=((0<R.g.length?R.g[0]:R.h)>>>0).toString(O);if(R=N,x(R))return P+F;for(;6>P.length;)P="0"+P;F=P+F}},n.i=function(O){return 0>O?0:O<this.g.length?this.g[O]:this.h};function x(O){if(O.h!=0)return!1;for(var I=0;I<O.g.length;I++)if(O.g[I]!=0)return!1;return!0}function b(O){return O.h==-1}n.l=function(O){return O=E(this,O),b(O)?-1:x(O)?0:1};function A(O){for(var I=O.g.length,R=[],F=0;F<I;F++)R[F]=~O.g[F];return new s(R,~O.h).add(g)}n.abs=function(){return b(this)?A(this):this},n.add=function(O){for(var I=Math.max(this.g.length,O.g.length),R=[],F=0,N=0;N<=I;N++){var P=F+(this.i(N)&65535)+(O.i(N)&65535),V=(P>>>16)+(this.i(N)>>>16)+(O.i(N)>>>16);F=V>>>16,P&=65535,V&=65535,R[N]=V<<16|P}return new s(R,R[R.length-1]&-2147483648?-1:0)};function E(O,I){return O.add(A(I))}n.j=function(O){if(x(this)||x(O))return p;if(b(this))return b(O)?A(this).j(A(O)):A(A(this).j(O));if(b(O))return A(this.j(A(O)));if(0>this.l(m)&&0>O.l(m))return d(this.m()*O.m());for(var I=this.g.length+O.g.length,R=[],F=0;F<2*I;F++)R[F]=0;for(F=0;F<this.g.length;F++)for(var N=0;N<O.g.length;N++){var P=this.i(F)>>>16,V=this.i(F)&65535,q=O.i(N)>>>16,X=O.i(N)&65535;R[2*F+2*N]+=V*X,C(R,2*F+2*N),R[2*F+2*N+1]+=P*X,C(R,2*F+2*N+1),R[2*F+2*N+1]+=V*q,C(R,2*F+2*N+1),R[2*F+2*N+2]+=P*q,C(R,2*F+2*N+2)}for(F=0;F<I;F++)R[F]=R[2*F+1]<<16|R[2*F];for(F=I;F<2*I;F++)R[F]=0;return new s(R,0)};function C(O,I){for(;(O[I]&65535)!=O[I];)O[I+1]+=O[I]>>>16,O[I]&=65535,I++}function T(O,I){this.g=O,this.h=I}function D(O,I){if(x(I))throw Error("division by zero");if(x(O))return new T(p,p);if(b(O))return I=D(A(O),I),new T(A(I.g),A(I.h));if(b(I))return I=D(O,A(I)),new T(A(I.g),I.h);if(30<O.g.length){if(b(O)||b(I))throw Error("slowDivide_ only works with positive integers.");for(var R=g,F=I;0>=F.l(O);)R=k(R),F=k(F);var N=B(R,1),P=B(F,1);for(F=B(F,2),R=B(R,2);!x(F);){var V=P.add(F);0>=V.l(O)&&(N=N.add(R),P=V),F=B(F,1),R=B(R,1)}return I=E(O,N.j(I)),new T(N,I)}for(N=p;0<=O.l(I);){for(R=Math.max(1,Math.floor(O.m()/I.m())),F=Math.ceil(Math.log(R)/Math.LN2),F=48>=F?1:Math.pow(2,F-48),P=d(R),V=P.j(I);b(V)||0<V.l(O);)R-=F,P=d(R),V=P.j(I);x(P)&&(P=g),N=N.add(P),O=E(O,V)}return new T(N,O)}n.A=function(O){return D(this,O).h},n.and=function(O){for(var I=Math.max(this.g.length,O.g.length),R=[],F=0;F<I;F++)R[F]=this.i(F)&O.i(F);return new s(R,this.h&O.h)},n.or=function(O){for(var I=Math.max(this.g.length,O.g.length),R=[],F=0;F<I;F++)R[F]=this.i(F)|O.i(F);return new s(R,this.h|O.h)},n.xor=function(O){for(var I=Math.max(this.g.length,O.g.length),R=[],F=0;F<I;F++)R[F]=this.i(F)^O.i(F);return new s(R,this.h^O.h)};function k(O){for(var I=O.g.length+1,R=[],F=0;F<I;F++)R[F]=O.i(F)<<1|O.i(F-1)>>>31;return new s(R,O.h)}function B(O,I){var R=I>>5;I%=32;for(var F=O.g.length-R,N=[],P=0;P<F;P++)N[P]=0<I?O.i(P+R)>>>I|O.i(P+R+1)<<32-I:O.i(P+R);return new s(N,O.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,p4=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=d,s.fromString=f,Dl=s}).apply(typeof wT<"u"?wT:typeof self<"u"?self:typeof window<"u"?window:{});var Ng=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var g4,$h,m4,hm,W2,y4,v4,x4;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(w,L,j){return w==Array.prototype||w==Object.prototype||(w[L]=j.value),w};function t(w){w=[typeof globalThis=="object"&&globalThis,w,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ng=="object"&&Ng];for(var L=0;L<w.length;++L){var j=w[L];if(j&&j.Math==Math)return j}throw Error("Cannot find global object")}var r=t(this);function i(w,L){if(L)e:{var j=r;w=w.split(".");for(var $=0;$<w.length-1;$++){var se=w[$];if(!(se in j))break e;j=j[se]}w=w[w.length-1],$=j[w],L=L($),L!=$&&L!=null&&e(j,w,{configurable:!0,writable:!0,value:L})}}function a(w,L){w instanceof String&&(w+="");var j=0,$=!1,se={next:function(){if(!$&&j<w.length){var me=j++;return{value:L(me,w[me]),done:!1}}return $=!0,{done:!0,value:void 0}}};return se[Symbol.iterator]=function(){return se},se}i("Array.prototype.values",function(w){return w||function(){return a(this,function(L,j){return j})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var s=s||{},o=this||self;function c(w){var L=typeof w;return L=L!="object"?L:w?Array.isArray(w)?"array":L:"null",L=="array"||L=="object"&&typeof w.length=="number"}function d(w){var L=typeof w;return L=="object"&&w!=null||L=="function"}function f(w,L,j){return w.call.apply(w.bind,arguments)}function p(w,L,j){if(!w)throw Error();if(2<arguments.length){var $=Array.prototype.slice.call(arguments,2);return function(){var se=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(se,$),w.apply(L,se)}}return function(){return w.apply(L,arguments)}}function g(w,L,j){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:p,g.apply(null,arguments)}function m(w,L){var j=Array.prototype.slice.call(arguments,1);return function(){var $=j.slice();return $.push.apply($,arguments),w.apply(this,$)}}function x(w,L){function j(){}j.prototype=L.prototype,w.aa=L.prototype,w.prototype=new j,w.prototype.constructor=w,w.Qb=function($,se,me){for(var Le=Array(arguments.length-2),Lt=2;Lt<arguments.length;Lt++)Le[Lt-2]=arguments[Lt];return L.prototype[se].apply($,Le)}}function b(w){const L=w.length;if(0<L){const j=Array(L);for(let $=0;$<L;$++)j[$]=w[$];return j}return[]}function A(w,L){for(let j=1;j<arguments.length;j++){const $=arguments[j];if(c($)){const se=w.length||0,me=$.length||0;w.length=se+me;for(let Le=0;Le<me;Le++)w[se+Le]=$[Le]}else w.push($)}}class E{constructor(L,j){this.i=L,this.j=j,this.h=0,this.g=null}get(){let L;return 0<this.h?(this.h--,L=this.g,this.g=L.next,L.next=null):L=this.i(),L}}function C(w){return/^[\s\xa0]*$/.test(w)}function T(){var w=o.navigator;return w&&(w=w.userAgent)?w:""}function D(w){return D[" "](w),w}D[" "]=function(){};var k=T().indexOf("Gecko")!=-1&&!(T().toLowerCase().indexOf("webkit")!=-1&&T().indexOf("Edge")==-1)&&!(T().indexOf("Trident")!=-1||T().indexOf("MSIE")!=-1)&&T().indexOf("Edge")==-1;function B(w,L,j){for(const $ in w)L.call(j,w[$],$,w)}function O(w,L){for(const j in w)L.call(void 0,w[j],j,w)}function I(w){const L={};for(const j in w)L[j]=w[j];return L}const R="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function F(w,L){let j,$;for(let se=1;se<arguments.length;se++){$=arguments[se];for(j in $)w[j]=$[j];for(let me=0;me<R.length;me++)j=R[me],Object.prototype.hasOwnProperty.call($,j)&&(w[j]=$[j])}}function N(w){var L=1;w=w.split(":");const j=[];for(;0<L&&w.length;)j.push(w.shift()),L--;return w.length&&j.push(w.join(":")),j}function P(w){o.setTimeout(()=>{throw w},0)}function V(){var w=Z;let L=null;return w.g&&(L=w.g,w.g=w.g.next,w.g||(w.h=null),L.next=null),L}class q{constructor(){this.h=this.g=null}add(L,j){const $=X.get();$.set(L,j),this.h?this.h.next=$:this.g=$,this.h=$}}var X=new E(()=>new G,w=>w.reset());class G{constructor(){this.next=this.g=this.h=null}set(L,j){this.h=L,this.g=j,this.next=null}reset(){this.next=this.g=this.h=null}}let W,K=!1,Z=new q,fe=()=>{const w=o.Promise.resolve(void 0);W=()=>{w.then(ge)}};var ge=()=>{for(var w;w=V();){try{w.h.call(w.g)}catch(j){P(j)}var L=X;L.j(w),100>L.h&&(L.h++,w.next=L.g,L.g=w)}K=!1};function ve(){this.s=this.s,this.C=this.C}ve.prototype.s=!1,ve.prototype.ma=function(){this.s||(this.s=!0,this.N())},ve.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function be(w,L){this.type=w,this.g=this.target=L,this.defaultPrevented=!1}be.prototype.h=function(){this.defaultPrevented=!0};var Pe=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var w=!1,L=Object.defineProperty({},"passive",{get:function(){w=!0}});try{const j=()=>{};o.addEventListener("test",j,L),o.removeEventListener("test",j,L)}catch{}return w}();function ue(w,L){if(be.call(this,w?w.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,w){var j=this.type=w.type,$=w.changedTouches&&w.changedTouches.length?w.changedTouches[0]:null;if(this.target=w.target||w.srcElement,this.g=L,L=w.relatedTarget){if(k){e:{try{D(L.nodeName);var se=!0;break e}catch{}se=!1}se||(L=null)}}else j=="mouseover"?L=w.fromElement:j=="mouseout"&&(L=w.toElement);this.relatedTarget=L,$?(this.clientX=$.clientX!==void 0?$.clientX:$.pageX,this.clientY=$.clientY!==void 0?$.clientY:$.pageY,this.screenX=$.screenX||0,this.screenY=$.screenY||0):(this.clientX=w.clientX!==void 0?w.clientX:w.pageX,this.clientY=w.clientY!==void 0?w.clientY:w.pageY,this.screenX=w.screenX||0,this.screenY=w.screenY||0),this.button=w.button,this.key=w.key||"",this.ctrlKey=w.ctrlKey,this.altKey=w.altKey,this.shiftKey=w.shiftKey,this.metaKey=w.metaKey,this.pointerId=w.pointerId||0,this.pointerType=typeof w.pointerType=="string"?w.pointerType:Se[w.pointerType]||"",this.state=w.state,this.i=w,w.defaultPrevented&&ue.aa.h.call(this)}}x(ue,be);var Se={2:"touch",3:"pen",4:"mouse"};ue.prototype.h=function(){ue.aa.h.call(this);var w=this.i;w.preventDefault?w.preventDefault():w.returnValue=!1};var Ae="closure_listenable_"+(1e6*Math.random()|0),Fe=0;function ae(w,L,j,$,se){this.listener=w,this.proxy=null,this.src=L,this.type=j,this.capture=!!$,this.ha=se,this.key=++Fe,this.da=this.fa=!1}function ye(w){w.da=!0,w.listener=null,w.proxy=null,w.src=null,w.ha=null}function pe(w){this.src=w,this.g={},this.h=0}pe.prototype.add=function(w,L,j,$,se){var me=w.toString();w=this.g[me],w||(w=this.g[me]=[],this.h++);var Le=Ve(w,L,$,se);return-1<Le?(L=w[Le],j||(L.fa=!1)):(L=new ae(L,this.src,me,!!$,se),L.fa=j,w.push(L)),L};function ie(w,L){var j=L.type;if(j in w.g){var $=w.g[j],se=Array.prototype.indexOf.call($,L,void 0),me;(me=0<=se)&&Array.prototype.splice.call($,se,1),me&&(ye(L),w.g[j].length==0&&(delete w.g[j],w.h--))}}function Ve(w,L,j,$){for(var se=0;se<w.length;++se){var me=w[se];if(!me.da&&me.listener==L&&me.capture==!!j&&me.ha==$)return se}return-1}var we="closure_lm_"+(1e6*Math.random()|0),ze={};function Oe(w,L,j,$,se){if(Array.isArray(L)){for(var me=0;me<L.length;me++)Oe(w,L[me],j,$,se);return null}return j=Mn(j),w&&w[Ae]?w.K(L,j,d($)?!!$.capture:!1,se):Re(w,L,j,!1,$,se)}function Re(w,L,j,$,se,me){if(!L)throw Error("Invalid event type");var Le=d(se)?!!se.capture:!!se,Lt=_t(w);if(Lt||(w[we]=Lt=new pe(w)),j=Lt.add(L,j,$,Le,me),j.proxy)return j;if($=qe(),j.proxy=$,$.src=w,$.listener=j,w.addEventListener)Pe||(se=Le),se===void 0&&(se=!1),w.addEventListener(L.toString(),$,se);else if(w.attachEvent)w.attachEvent(Ne(L.toString()),$);else if(w.addListener&&w.removeListener)w.addListener($);else throw Error("addEventListener and attachEvent are unavailable.");return j}function qe(){function w(j){return L.call(w.src,w.listener,j)}const L=ft;return w}function We(w,L,j,$,se){if(Array.isArray(L))for(var me=0;me<L.length;me++)We(w,L[me],j,$,se);else $=d($)?!!$.capture:!!$,j=Mn(j),w&&w[Ae]?(w=w.i,L=String(L).toString(),L in w.g&&(me=w.g[L],j=Ve(me,j,$,se),-1<j&&(ye(me[j]),Array.prototype.splice.call(me,j,1),me.length==0&&(delete w.g[L],w.h--)))):w&&(w=_t(w))&&(L=w.g[L.toString()],w=-1,L&&(w=Ve(L,j,$,se)),(j=-1<w?L[w]:null)&&Me(j))}function Me(w){if(typeof w!="number"&&w&&!w.da){var L=w.src;if(L&&L[Ae])ie(L.i,w);else{var j=w.type,$=w.proxy;L.removeEventListener?L.removeEventListener(j,$,w.capture):L.detachEvent?L.detachEvent(Ne(j),$):L.addListener&&L.removeListener&&L.removeListener($),(j=_t(L))?(ie(j,w),j.h==0&&(j.src=null,L[we]=null)):ye(w)}}}function Ne(w){return w in ze?ze[w]:ze[w]="on"+w}function ft(w,L){if(w.da)w=!0;else{L=new ue(L,this);var j=w.listener,$=w.ha||w.src;w.fa&&Me(w),w=j.call($,L)}return w}function _t(w){return w=w[we],w instanceof pe?w:null}var xn="__closure_events_fn_"+(1e9*Math.random()>>>0);function Mn(w){return typeof w=="function"?w:(w[xn]||(w[xn]=function(L){return w.handleEvent(L)}),w[xn])}function rt(){ve.call(this),this.i=new pe(this),this.M=this,this.F=null}x(rt,ve),rt.prototype[Ae]=!0,rt.prototype.removeEventListener=function(w,L,j,$){We(this,w,L,j,$)};function at(w,L){var j,$=w.F;if($)for(j=[];$;$=$.F)j.push($);if(w=w.M,$=L.type||L,typeof L=="string")L=new be(L,w);else if(L instanceof be)L.target=L.target||w;else{var se=L;L=new be($,w),F(L,se)}if(se=!0,j)for(var me=j.length-1;0<=me;me--){var Le=L.g=j[me];se=Cn(Le,$,!0,L)&&se}if(Le=L.g=w,se=Cn(Le,$,!0,L)&&se,se=Cn(Le,$,!1,L)&&se,j)for(me=0;me<j.length;me++)Le=L.g=j[me],se=Cn(Le,$,!1,L)&&se}rt.prototype.N=function(){if(rt.aa.N.call(this),this.i){var w=this.i,L;for(L in w.g){for(var j=w.g[L],$=0;$<j.length;$++)ye(j[$]);delete w.g[L],w.h--}}this.F=null},rt.prototype.K=function(w,L,j,$){return this.i.add(String(w),L,!1,j,$)},rt.prototype.L=function(w,L,j,$){return this.i.add(String(w),L,!0,j,$)};function Cn(w,L,j,$){if(L=w.i.g[String(L)],!L)return!0;L=L.concat();for(var se=!0,me=0;me<L.length;++me){var Le=L[me];if(Le&&!Le.da&&Le.capture==j){var Lt=Le.listener,xr=Le.ha||Le.src;Le.fa&&ie(w.i,Le),se=Lt.call(xr,$)!==!1&&se}}return se&&!$.defaultPrevented}function Qe(w,L,j){if(typeof w=="function")j&&(w=g(w,j));else if(w&&typeof w.handleEvent=="function")w=g(w.handleEvent,w);else throw Error("Invalid listener argument");return 2147483647<Number(L)?-1:o.setTimeout(w,L||0)}function mt(w){w.g=Qe(()=>{w.g=null,w.i&&(w.i=!1,mt(w))},w.l);const L=w.h;w.h=null,w.m.apply(null,L)}class Nt extends ve{constructor(L,j){super(),this.m=L,this.l=j,this.h=null,this.i=!1,this.g=null}j(L){this.h=arguments,this.g?this.i=!0:mt(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function tn(w){ve.call(this),this.h=w,this.g={}}x(tn,ve);var An=[];function Tn(w){B(w.g,function(L,j){this.g.hasOwnProperty(j)&&Me(L)},w),w.g={}}tn.prototype.N=function(){tn.aa.N.call(this),Tn(this)},tn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var qt=o.JSON.stringify,qr=o.JSON.parse,yt=class{stringify(w){return o.JSON.stringify(w,void 0)}parse(w){return o.JSON.parse(w,void 0)}};function Vn(){}Vn.prototype.h=null;function Zn(w){return w.h||(w.h=w.i())}function Xr(){}var bi={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function or(){be.call(this,"d")}x(or,be);function Ql(){be.call(this,"c")}x(Ql,be);var ca={},mu=null;function zs(){return mu=mu||new rt}ca.La="serverreachability";function wn(w){be.call(this,ca.La,w)}x(wn,be);function lr(w){const L=zs();at(L,new wn(L))}ca.STAT_EVENT="statevent";function Zl(w,L){be.call(this,ca.STAT_EVENT,w),this.stat=L}x(Zl,be);function On(w){const L=zs();at(L,new Zl(L,w))}ca.Ma="timingevent";function vr(w,L){be.call(this,ca.Ma,w),this.size=L}x(vr,be);function cr(w,L){if(typeof w!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){w()},L)}function ua(){this.g=!0}ua.prototype.xa=function(){this.g=!1};function Cf(w,L,j,$,se,me){w.info(function(){if(w.g)if(me)for(var Le="",Lt=me.split("&"),xr=0;xr<Lt.length;xr++){var Bt=Lt[xr].split("=");if(1<Bt.length){var Nr=Bt[0];Bt=Bt[1];var wr=Nr.split("_");Le=2<=wr.length&&wr[1]=="type"?Le+(Nr+"="+Bt+"&"):Le+(Nr+"=redacted&")}}else Le=null;else Le=me;return"XMLHTTP REQ ("+$+") [attempt "+se+"]: "+L+`
`+j+`
`+Le})}function Fy(w,L,j,$,se,me,Le){w.info(function(){return"XMLHTTP RESP ("+$+") [ attempt "+se+"]: "+L+`
`+j+`
`+me+" "+Le})}function Lo(w,L,j,$){w.info(function(){return"XMLHTTP TEXT ("+L+"): "+Jl(w,j)+($?" "+$:"")})}function fp(w,L){w.info(function(){return"TIMEOUT: "+L})}ua.prototype.info=function(){};function Jl(w,L){if(!w.g)return L;if(!L)return null;try{var j=JSON.parse(L);if(j){for(w=0;w<j.length;w++)if(Array.isArray(j[w])){var $=j[w];if(!(2>$.length)){var se=$[1];if(Array.isArray(se)&&!(1>se.length)){var me=se[0];if(me!="noop"&&me!="stop"&&me!="close")for(var Le=1;Le<se.length;Le++)se[Le]=""}}}}return qt(j)}catch{return L}}var Bo={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},$s={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ns;function rs(){}x(rs,Vn),rs.prototype.g=function(){return new XMLHttpRequest},rs.prototype.i=function(){return{}},ns=new rs;function _i(w,L,j,$){this.j=w,this.i=L,this.l=j,this.R=$||1,this.U=new tn(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Jn}function Jn(){this.i=null,this.g="",this.h=!1}var Tf={},yu={};function ka(w,L,j){w.L=1,w.v=ic(Yi(L)),w.m=j,w.P=!0,Gs(w,null)}function Gs(w,L){w.F=Date.now(),ec(w),w.A=Yi(w.v);var j=w.A,$=w.R;Array.isArray($)||($=[String($)]),Pf(j.i,"t",$),w.C=0,j=w.j.J,w.h=new Jn,w.g=Ip(w.j,j?L:null,!w.m),0<w.O&&(w.M=new Nt(g(w.Y,w,w.g),w.O)),L=w.U,j=w.g,$=w.ca;var se="readystatechange";Array.isArray(se)||(se&&(An[0]=se.toString()),se=An);for(var me=0;me<se.length;me++){var Le=Oe(j,se[me],$||L.handleEvent,!1,L.h||L);if(!Le)break;L.g[Le.key]=Le}L=w.H?I(w.H):{},w.m?(w.u||(w.u="POST"),L["Content-Type"]="application/x-www-form-urlencoded",w.g.ea(w.A,w.u,w.m,L)):(w.u="GET",w.g.ea(w.A,w.u,null,L)),lr(),Cf(w.i,w.u,w.A,w.l,w.R,w.m)}_i.prototype.ca=function(w){w=w.target;const L=this.M;L&&pa(w)==3?L.j():this.Y(w)},_i.prototype.Y=function(w){try{if(w==this.g)e:{const wr=pa(this.g);var L=this.g.Ba();const Js=this.g.Z();if(!(3>wr)&&(wr!=3||this.g&&(this.h.h||this.g.oa()||wp(this.g)))){this.J||wr!=4||L==7||(L==8||0>=Js?lr(3):lr(2)),Fo(this);var j=this.g.Z();this.X=j;t:if(hp(this)){var $=wp(this.g);w="";var se=$.length,me=pa(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Kr(this),is(this);var Le="";break t}this.h.i=new o.TextDecoder}for(L=0;L<se;L++)this.h.h=!0,w+=this.h.i.decode($[L],{stream:!(me&&L==se-1)});$.length=0,this.h.g+=w,this.C=0,Le=this.h.g}else Le=this.g.oa();if(this.o=j==200,Fy(this.i,this.u,this.A,this.l,this.R,wr,j),this.o){if(this.T&&!this.K){t:{if(this.g){var Lt,xr=this.g;if((Lt=xr.g?xr.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!C(Lt)){var Bt=Lt;break t}}Bt=null}if(j=Bt)Lo(this.i,this.l,j,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,tc(this,j);else{this.o=!1,this.s=3,On(12),Kr(this),is(this);break e}}if(this.P){j=!0;let Qr;for(;!this.J&&this.C<Le.length;)if(Qr=pp(this,Le),Qr==yu){wr==4&&(this.s=4,On(14),j=!1),Lo(this.i,this.l,null,"[Incomplete Response]");break}else if(Qr==Tf){this.s=4,On(15),Lo(this.i,this.l,Le,"[Invalid Chunk]"),j=!1;break}else Lo(this.i,this.l,Qr,null),tc(this,Qr);if(hp(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),wr!=4||Le.length!=0||this.h.h||(this.s=1,On(16),j=!1),this.o=this.o&&j,!j)Lo(this.i,this.l,Le,"[Invalid Chunked Response]"),Kr(this),is(this);else if(0<Le.length&&!this.W){this.W=!0;var Nr=this.j;Nr.g==this&&Nr.ba&&!Nr.M&&(Nr.j.info("Great, no buffering proxy detected. Bytes received: "+Le.length),fc(Nr),Nr.M=!0,On(11))}}else Lo(this.i,this.l,Le,null),tc(this,Le);wr==4&&Kr(this),this.o&&!this.J&&(wr==4?Sp(this.j,this):(this.o=!1,ec(this)))}else zy(this.g),j==400&&0<Le.indexOf("Unknown SID")?(this.s=3,On(12)):(this.s=0,On(13)),Kr(this),is(this)}}}catch{}finally{}};function hp(w){return w.g?w.u=="GET"&&w.L!=2&&w.j.Ca:!1}function pp(w,L){var j=w.C,$=L.indexOf(`
`,j);return $==-1?yu:(j=Number(L.substring(j,$)),isNaN(j)?Tf:($+=1,$+j>L.length?yu:(L=L.slice($,$+j),w.C=$+j,L)))}_i.prototype.cancel=function(){this.J=!0,Kr(this)};function ec(w){w.S=Date.now()+w.I,gp(w,w.I)}function gp(w,L){if(w.B!=null)throw Error("WatchDog timer not null");w.B=cr(g(w.ba,w),L)}function Fo(w){w.B&&(o.clearTimeout(w.B),w.B=null)}_i.prototype.ba=function(){this.B=null;const w=Date.now();0<=w-this.S?(fp(this.i,this.A),this.L!=2&&(lr(),On(17)),Kr(this),this.s=2,is(this)):gp(this,this.S-w)};function is(w){w.j.G==0||w.J||Sp(w.j,w)}function Kr(w){Fo(w);var L=w.M;L&&typeof L.ma=="function"&&L.ma(),w.M=null,Tn(w.U),w.g&&(L=w.g,w.g=null,L.abort(),L.ma())}function tc(w,L){try{var j=w.j;if(j.G!=0&&(j.g==w||If(j.h,w))){if(!w.K&&If(j.h,w)&&j.G==3){try{var $=j.Da.g.parse(L)}catch{$=null}if(Array.isArray($)&&$.length==3){var se=$;if(se[0]==0){e:if(!j.u){if(j.g)if(j.g.F+3e3<w.F)Du(j),Tu(j);else break e;Ff(j),On(18)}}else j.za=se[1],0<j.za-j.T&&37500>se[2]&&j.F&&j.v==0&&!j.C&&(j.C=cr(g(j.Za,j),6e3));if(1>=xu(j.h)&&j.ca){try{j.ca()}catch{}j.ca=void 0}}else Zs(j,11)}else if((w.K||j.g==w)&&Du(j),!C(L))for(se=j.Da.g.parse(L),L=0;L<se.length;L++){let Bt=se[L];if(j.T=Bt[0],Bt=Bt[1],j.G==2)if(Bt[0]=="c"){j.K=Bt[1],j.ia=Bt[2];const Nr=Bt[3];Nr!=null&&(j.la=Nr,j.j.info("VER="+j.la));const wr=Bt[4];wr!=null&&(j.Aa=wr,j.j.info("SVER="+j.Aa));const Js=Bt[5];Js!=null&&typeof Js=="number"&&0<Js&&($=1.5*Js,j.L=$,j.j.info("backChannelRequestTimeoutMs_="+$)),$=j;const Qr=w.g;if(Qr){const ds=Qr.g?Qr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ds){var me=$.h;me.g||ds.indexOf("spdy")==-1&&ds.indexOf("quic")==-1&&ds.indexOf("h2")==-1||(me.j=me.l,me.g=new Set,me.h&&(wu(me,me.h),me.h=null))}if($.D){const jf=Qr.g?Qr.g.getResponseHeader("X-HTTP-Session-Id"):null;jf&&($.ya=jf,fn($.I,$.D,jf))}}j.G=3,j.l&&j.l.ua(),j.ba&&(j.R=Date.now()-w.F,j.j.info("Handshake RTT: "+j.R+"ms")),$=j;var Le=w;if($.qa=Tp($,$.J?$.ia:null,$.W),Le.K){Ai($.h,Le);var Lt=Le,xr=$.L;xr&&(Lt.I=xr),Lt.B&&(Fo(Lt),ec(Lt)),$.g=Le}else Ap($);0<j.i.length&&Iu(j)}else Bt[0]!="stop"&&Bt[0]!="close"||Zs(j,7);else j.G==3&&(Bt[0]=="stop"||Bt[0]=="close"?Bt[0]=="stop"?Zs(j,7):Lf(j):Bt[0]!="noop"&&j.l&&j.l.ta(Bt),j.v=0)}}lr(4)}catch{}}var mp=class{constructor(w,L){this.g=w,this.map=L}};function Ws(w){this.l=w||10,o.PerformanceNavigationTiming?(w=o.performance.getEntriesByType("navigation"),w=0<w.length&&(w[0].nextHopProtocol=="hq"||w[0].nextHopProtocol=="h2")):w=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=w?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function vu(w){return w.h?!0:w.g?w.g.size>=w.j:!1}function xu(w){return w.h?1:w.g?w.g.size:0}function If(w,L){return w.h?w.h==L:w.g?w.g.has(L):!1}function wu(w,L){w.g?w.g.add(L):w.h=L}function Ai(w,L){w.h&&w.h==L?w.h=null:w.g&&w.g.has(L)&&w.g.delete(L)}Ws.prototype.cancel=function(){if(this.i=Df(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const w of this.g.values())w.cancel();this.g.clear()}};function Df(w){if(w.h!=null)return w.i.concat(w.h.D);if(w.g!=null&&w.g.size!==0){let L=w.i;for(const j of w.g.values())L=L.concat(j.D);return L}return b(w.i)}function Vy(w){if(w.V&&typeof w.V=="function")return w.V();if(typeof Map<"u"&&w instanceof Map||typeof Set<"u"&&w instanceof Set)return Array.from(w.values());if(typeof w=="string")return w.split("");if(c(w)){for(var L=[],j=w.length,$=0;$<j;$++)L.push(w[$]);return L}L=[],j=0;for($ in w)L[j++]=w[$];return L}function bu(w){if(w.na&&typeof w.na=="function")return w.na();if(!w.V||typeof w.V!="function"){if(typeof Map<"u"&&w instanceof Map)return Array.from(w.keys());if(!(typeof Set<"u"&&w instanceof Set)){if(c(w)||typeof w=="string"){var L=[];w=w.length;for(var j=0;j<w;j++)L.push(j);return L}L=[],j=0;for(const $ in w)L[j++]=$;return L}}}function Rf(w,L){if(w.forEach&&typeof w.forEach=="function")w.forEach(L,void 0);else if(c(w)||typeof w=="string")Array.prototype.forEach.call(w,L,void 0);else for(var j=bu(w),$=Vy(w),se=$.length,me=0;me<se;me++)L.call(void 0,$[me],j&&j[me],w)}var nc=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function jy(w,L){if(w){w=w.split("&");for(var j=0;j<w.length;j++){var $=w[j].indexOf("="),se=null;if(0<=$){var me=w[j].substring(0,$);se=w[j].substring($+1)}else me=w[j];L(me,se?decodeURIComponent(se.replace(/\+/g," ")):"")}}}function ur(w){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,w instanceof ur){this.h=w.h,rc(this,w.j),this.o=w.o,this.g=w.g,Vo(this,w.s),this.l=w.l;var L=w.i,j=new qs;j.i=L.i,L.g&&(j.g=new Map(L.g),j.h=L.h),Ys(this,j),this.m=w.m}else w&&(L=String(w).match(nc))?(this.h=!1,rc(this,L[1]||"",!0),this.o=da(L[2]||""),this.g=da(L[3]||"",!0),Vo(this,L[4]),this.l=da(L[5]||"",!0),Ys(this,L[6]||"",!0),this.m=da(L[7]||"")):(this.h=!1,this.i=new qs(null,this.h))}ur.prototype.toString=function(){var w=[],L=this.j;L&&w.push(ac(L,Mf,!0),":");var j=this.g;return(j||L=="file")&&(w.push("//"),(L=this.o)&&w.push(ac(L,Mf,!0),"@"),w.push(encodeURIComponent(String(j)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),j=this.s,j!=null&&w.push(":",String(j))),(j=this.l)&&(this.g&&j.charAt(0)!="/"&&w.push("/"),w.push(ac(j,j.charAt(0)=="/"?Uy:Of,!0))),(j=this.i.toString())&&w.push("?",j),(j=this.m)&&w.push("#",ac(j,_u)),w.join("")};function Yi(w){return new ur(w)}function rc(w,L,j){w.j=j?da(L,!0):L,w.j&&(w.j=w.j.replace(/:$/,""))}function Vo(w,L){if(L){if(L=Number(L),isNaN(L)||0>L)throw Error("Bad port number "+L);w.s=L}else w.s=null}function Ys(w,L,j){L instanceof qs?(w.i=L,vp(w.i,w.h)):(j||(L=ac(L,Hy)),w.i=new qs(L,w.h))}function fn(w,L,j){w.i.set(L,j)}function ic(w){return fn(w,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),w}function da(w,L){return w?L?decodeURI(w.replace(/%25/g,"%2525")):decodeURIComponent(w):""}function ac(w,L,j){return typeof w=="string"?(w=encodeURI(w).replace(L,yp),j&&(w=w.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),w):null}function yp(w){return w=w.charCodeAt(0),"%"+(w>>4&15).toString(16)+(w&15).toString(16)}var Mf=/[#\/\?@]/g,Of=/[#\?:]/g,Uy=/[#\?]/g,Hy=/[#\?@]/g,_u=/#/g;function qs(w,L){this.h=this.g=null,this.i=w||null,this.j=!!L}function fa(w){w.g||(w.g=new Map,w.h=0,w.i&&jy(w.i,function(L,j){w.add(decodeURIComponent(L.replace(/\+/g," ")),j)}))}n=qs.prototype,n.add=function(w,L){fa(this),this.i=null,w=as(this,w);var j=this.g.get(w);return j||this.g.set(w,j=[]),j.push(L),this.h+=1,this};function Xs(w,L){fa(w),L=as(w,L),w.g.has(L)&&(w.i=null,w.h-=w.g.get(L).length,w.g.delete(L))}function Ks(w,L){return fa(w),L=as(w,L),w.g.has(L)}n.forEach=function(w,L){fa(this),this.g.forEach(function(j,$){j.forEach(function(se){w.call(L,se,$,this)},this)},this)},n.na=function(){fa(this);const w=Array.from(this.g.values()),L=Array.from(this.g.keys()),j=[];for(let $=0;$<L.length;$++){const se=w[$];for(let me=0;me<se.length;me++)j.push(L[$])}return j},n.V=function(w){fa(this);let L=[];if(typeof w=="string")Ks(this,w)&&(L=L.concat(this.g.get(as(this,w))));else{w=Array.from(this.g.values());for(let j=0;j<w.length;j++)L=L.concat(w[j])}return L},n.set=function(w,L){return fa(this),this.i=null,w=as(this,w),Ks(this,w)&&(this.h-=this.g.get(w).length),this.g.set(w,[L]),this.h+=1,this},n.get=function(w,L){return w?(w=this.V(w),0<w.length?String(w[0]):L):L};function Pf(w,L,j){Xs(w,L),0<j.length&&(w.i=null,w.g.set(as(w,L),b(j)),w.h+=j.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const w=[],L=Array.from(this.g.keys());for(var j=0;j<L.length;j++){var $=L[j];const me=encodeURIComponent(String($)),Le=this.V($);for($=0;$<Le.length;$++){var se=me;Le[$]!==""&&(se+="="+encodeURIComponent(String(Le[$]))),w.push(se)}}return this.i=w.join("&")};function as(w,L){return L=String(L),w.j&&(L=L.toLowerCase()),L}function vp(w,L){L&&!w.j&&(fa(w),w.i=null,w.g.forEach(function(j,$){var se=$.toLowerCase();$!=se&&(Xs(this,$),Pf(this,se,j))},w)),w.j=L}function sc(w,L){const j=new ua;if(o.Image){const $=new Image;$.onload=m(ha,j,"TestLoadImage: loaded",!0,L,$),$.onerror=m(ha,j,"TestLoadImage: error",!1,L,$),$.onabort=m(ha,j,"TestLoadImage: abort",!1,L,$),$.ontimeout=m(ha,j,"TestLoadImage: timeout",!1,L,$),o.setTimeout(function(){$.ontimeout&&$.ontimeout()},1e4),$.src=w}else L(!1)}function Na(w,L){const j=new ua,$=new AbortController,se=setTimeout(()=>{$.abort(),ha(j,"TestPingServer: timeout",!1,L)},1e4);fetch(w,{signal:$.signal}).then(me=>{clearTimeout(se),me.ok?ha(j,"TestPingServer: ok",!0,L):ha(j,"TestPingServer: server error",!1,L)}).catch(()=>{clearTimeout(se),ha(j,"TestPingServer: error",!1,L)})}function ha(w,L,j,$,se){try{se&&(se.onload=null,se.onerror=null,se.onabort=null,se.ontimeout=null),$(j)}catch{}}function oc(){this.g=new yt}function ss(w,L,j){const $=j||"";try{Rf(w,function(se,me){let Le=se;d(se)&&(Le=qt(se)),L.push($+me+"="+encodeURIComponent(Le))})}catch(se){throw L.push($+"type="+encodeURIComponent("_badmap")),se}}function jo(w){this.l=w.Ub||null,this.j=w.eb||!1}x(jo,Vn),jo.prototype.g=function(){return new Qs(this.l,this.j)},jo.prototype.i=function(w){return function(){return w}}({});function Qs(w,L){rt.call(this),this.D=w,this.o=L,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}x(Qs,rt),n=Qs.prototype,n.open=function(w,L){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=w,this.A=L,this.readyState=1,ls(this)},n.send=function(w){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const L={headers:this.u,method:this.B,credentials:this.m,cache:void 0};w&&(L.body=w),(this.D||o).fetch(new Request(this.A,L)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,os(this)),this.readyState=0},n.Sa=function(w){if(this.g&&(this.l=w,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=w.headers,this.readyState=2,ls(this)),this.g&&(this.readyState=3,ls(this),this.g)))if(this.responseType==="arraybuffer")w.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in w){if(this.j=w.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;kf(this)}else w.text().then(this.Ra.bind(this),this.ga.bind(this))};function kf(w){w.j.read().then(w.Pa.bind(w)).catch(w.ga.bind(w))}n.Pa=function(w){if(this.g){if(this.o&&w.value)this.response.push(w.value);else if(!this.o){var L=w.value?w.value:new Uint8Array(0);(L=this.v.decode(L,{stream:!w.done}))&&(this.response=this.responseText+=L)}w.done?os(this):ls(this),this.readyState==3&&kf(this)}},n.Ra=function(w){this.g&&(this.response=this.responseText=w,os(this))},n.Qa=function(w){this.g&&(this.response=w,os(this))},n.ga=function(){this.g&&os(this)};function os(w){w.readyState=4,w.l=null,w.j=null,w.v=null,ls(w)}n.setRequestHeader=function(w,L){this.u.append(w,L)},n.getResponseHeader=function(w){return this.h&&this.h.get(w.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const w=[],L=this.h.entries();for(var j=L.next();!j.done;)j=j.value,w.push(j[0]+": "+j[1]),j=L.next();return w.join(`\r
`)};function ls(w){w.onreadystatechange&&w.onreadystatechange.call(w)}Object.defineProperty(Qs.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(w){this.m=w?"include":"same-origin"}});function Nf(w){let L="";return B(w,function(j,$){L+=$,L+=":",L+=j,L+=`\r
`}),L}function kr(w,L,j){e:{for($ in j){var $=!1;break e}$=!0}$||(j=Nf(j),typeof w=="string"?j!=null&&encodeURIComponent(String(j)):fn(w,L,j))}function nn(w){rt.call(this),this.headers=new Map,this.o=w||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}x(nn,rt);var Au=/^https?$/i,lc=["POST","PUT"];n=nn.prototype,n.Ha=function(w){this.J=w},n.ea=function(w,L,j,$){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+w);L=L?L.toUpperCase():"GET",this.D=w,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ns.g(),this.v=this.o?Zn(this.o):Zn(ns),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(L,String(w),!0),this.B=!1}catch(me){xp(this,me);return}if(w=j||"",j=new Map(this.headers),$)if(Object.getPrototypeOf($)===Object.prototype)for(var se in $)j.set(se,$[se]);else if(typeof $.keys=="function"&&typeof $.get=="function")for(const me of $.keys())j.set(me,$.get(me));else throw Error("Unknown input type for opt_headers: "+String($));$=Array.from(j.keys()).find(me=>me.toLowerCase()=="content-type"),se=o.FormData&&w instanceof o.FormData,!(0<=Array.prototype.indexOf.call(lc,L,void 0))||$||se||j.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[me,Le]of j)this.g.setRequestHeader(me,Le);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{cc(this),this.u=!0,this.g.send(w),this.u=!1}catch(me){xp(this,me)}};function xp(w,L){w.h=!1,w.g&&(w.j=!0,w.g.abort(),w.j=!1),w.l=L,w.m=5,Eu(w),cs(w)}function Eu(w){w.A||(w.A=!0,at(w,"complete"),at(w,"error"))}n.abort=function(w){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=w||7,at(this,"complete"),at(this,"abort"),cs(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),cs(this,!0)),nn.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Su(this):this.bb())},n.bb=function(){Su(this)};function Su(w){if(w.h&&typeof s<"u"&&(!w.v[1]||pa(w)!=4||w.Z()!=2)){if(w.u&&pa(w)==4)Qe(w.Ea,0,w);else if(at(w,"readystatechange"),pa(w)==4){w.h=!1;try{const Le=w.Z();e:switch(Le){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var L=!0;break e;default:L=!1}var j;if(!(j=L)){var $;if($=Le===0){var se=String(w.D).match(nc)[1]||null;!se&&o.self&&o.self.location&&(se=o.self.location.protocol.slice(0,-1)),$=!Au.test(se?se.toLowerCase():"")}j=$}if(j)at(w,"complete"),at(w,"success");else{w.m=6;try{var me=2<pa(w)?w.g.statusText:""}catch{me=""}w.l=me+" ["+w.Z()+"]",Eu(w)}}finally{cs(w)}}}}function cs(w,L){if(w.g){cc(w);const j=w.g,$=w.v[0]?()=>{}:null;w.g=null,w.v=null,L||at(w,"ready");try{j.onreadystatechange=$}catch{}}}function cc(w){w.I&&(o.clearTimeout(w.I),w.I=null)}n.isActive=function(){return!!this.g};function pa(w){return w.g?w.g.readyState:0}n.Z=function(){try{return 2<pa(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(w){if(this.g){var L=this.g.responseText;return w&&L.indexOf(w)==0&&(L=L.substring(w.length)),qr(L)}};function wp(w){try{if(!w.g)return null;if("response"in w.g)return w.g.response;switch(w.H){case"":case"text":return w.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in w.g)return w.g.mozResponseArrayBuffer}return null}catch{return null}}function zy(w){const L={};w=(w.g&&2<=pa(w)&&w.g.getAllResponseHeaders()||"").split(`\r
`);for(let $=0;$<w.length;$++){if(C(w[$]))continue;var j=N(w[$]);const se=j[0];if(j=j[1],typeof j!="string")continue;j=j.trim();const me=L[se]||[];L[se]=me,me.push(j)}O(L,function($){return $.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function uc(w,L,j){return j&&j.internalChannelParams&&j.internalChannelParams[w]||L}function Cu(w){this.Aa=0,this.i=[],this.j=new ua,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=uc("failFast",!1,w),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=uc("baseRetryDelayMs",5e3,w),this.cb=uc("retryDelaySeedMs",1e4,w),this.Wa=uc("forwardChannelMaxRetries",2,w),this.wa=uc("forwardChannelRequestTimeoutMs",2e4,w),this.pa=w&&w.xmlHttpFactory||void 0,this.Xa=w&&w.Tb||void 0,this.Ca=w&&w.useFetchStreams||!1,this.L=void 0,this.J=w&&w.supportsCrossDomainXhr||!1,this.K="",this.h=new Ws(w&&w.concurrentRequestLimit),this.Da=new oc,this.P=w&&w.fastHandshake||!1,this.O=w&&w.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=w&&w.Rb||!1,w&&w.xa&&this.j.xa(),w&&w.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&w&&w.detectBufferingProxy||!1,this.ja=void 0,w&&w.longPollingTimeout&&0<w.longPollingTimeout&&(this.ja=w.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Cu.prototype,n.la=8,n.G=1,n.connect=function(w,L,j,$){On(0),this.W=w,this.H=L||{},j&&$!==void 0&&(this.H.OSID=j,this.H.OAID=$),this.F=this.X,this.I=Tp(this,null,this.W),Iu(this)};function Lf(w){if(bp(w),w.G==3){var L=w.U++,j=Yi(w.I);if(fn(j,"SID",w.K),fn(j,"RID",L),fn(j,"TYPE","terminate"),dc(w,j),L=new _i(w,w.j,L),L.L=2,L.v=ic(Yi(j)),j=!1,o.navigator&&o.navigator.sendBeacon)try{j=o.navigator.sendBeacon(L.v.toString(),"")}catch{}!j&&o.Image&&(new Image().src=L.v,j=!0),j||(L.g=Ip(L.j,null),L.g.ea(L.v)),L.F=Date.now(),ec(L)}Cp(w)}function Tu(w){w.g&&(fc(w),w.g.cancel(),w.g=null)}function bp(w){Tu(w),w.u&&(o.clearTimeout(w.u),w.u=null),Du(w),w.h.cancel(),w.s&&(typeof w.s=="number"&&o.clearTimeout(w.s),w.s=null)}function Iu(w){if(!vu(w.h)&&!w.s){w.s=!0;var L=w.Ga;W||fe(),K||(W(),K=!0),Z.add(L,w),w.B=0}}function $y(w,L){return xu(w.h)>=w.h.j-(w.s?1:0)?!1:w.s?(w.i=L.D.concat(w.i),!0):w.G==1||w.G==2||w.B>=(w.Va?0:w.Wa)?!1:(w.s=cr(g(w.Ga,w,L),Vf(w,w.B)),w.B++,!0)}n.Ga=function(w){if(this.s)if(this.s=null,this.G==1){if(!w){this.U=Math.floor(1e5*Math.random()),w=this.U++;const se=new _i(this,this.j,w);let me=this.o;if(this.S&&(me?(me=I(me),F(me,this.S)):me=this.S),this.m!==null||this.O||(se.H=me,me=null),this.P)e:{for(var L=0,j=0;j<this.i.length;j++){t:{var $=this.i[j];if("__data__"in $.map&&($=$.map.__data__,typeof $=="string")){$=$.length;break t}$=void 0}if($===void 0)break;if(L+=$,4096<L){L=j;break e}if(L===4096||j===this.i.length-1){L=j+1;break e}}L=1e3}else L=1e3;L=_p(this,se,L),j=Yi(this.I),fn(j,"RID",w),fn(j,"CVER",22),this.D&&fn(j,"X-HTTP-Session-Id",this.D),dc(this,j),me&&(this.O?L="headers="+encodeURIComponent(String(Nf(me)))+"&"+L:this.m&&kr(j,this.m,me)),wu(this.h,se),this.Ua&&fn(j,"TYPE","init"),this.P?(fn(j,"$req",L),fn(j,"SID","null"),se.T=!0,ka(se,j,null)):ka(se,j,L),this.G=2}}else this.G==3&&(w?Bf(this,w):this.i.length==0||vu(this.h)||Bf(this))};function Bf(w,L){var j;L?j=L.l:j=w.U++;const $=Yi(w.I);fn($,"SID",w.K),fn($,"RID",j),fn($,"AID",w.T),dc(w,$),w.m&&w.o&&kr($,w.m,w.o),j=new _i(w,w.j,j,w.B+1),w.m===null&&(j.H=w.o),L&&(w.i=L.D.concat(w.i)),L=_p(w,j,1e3),j.I=Math.round(.5*w.wa)+Math.round(.5*w.wa*Math.random()),wu(w.h,j),ka(j,$,L)}function dc(w,L){w.H&&B(w.H,function(j,$){fn(L,$,j)}),w.l&&Rf({},function(j,$){fn(L,$,j)})}function _p(w,L,j){j=Math.min(w.i.length,j);var $=w.l?g(w.l.Na,w.l,w):null;e:{var se=w.i;let me=-1;for(;;){const Le=["count="+j];me==-1?0<j?(me=se[0].g,Le.push("ofs="+me)):me=0:Le.push("ofs="+me);let Lt=!0;for(let xr=0;xr<j;xr++){let Bt=se[xr].g;const Nr=se[xr].map;if(Bt-=me,0>Bt)me=Math.max(0,se[xr].g-100),Lt=!1;else try{ss(Nr,Le,"req"+Bt+"_")}catch{$&&$(Nr)}}if(Lt){$=Le.join("&");break e}}}return w=w.i.splice(0,j),L.D=w,$}function Ap(w){if(!w.g&&!w.u){w.Y=1;var L=w.Fa;W||fe(),K||(W(),K=!0),Z.add(L,w),w.v=0}}function Ff(w){return w.g||w.u||3<=w.v?!1:(w.Y++,w.u=cr(g(w.Fa,w),Vf(w,w.v)),w.v++,!0)}n.Fa=function(){if(this.u=null,Ep(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var w=2*this.R;this.j.info("BP detection timer enabled: "+w),this.A=cr(g(this.ab,this),w)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,On(10),Tu(this),Ep(this))};function fc(w){w.A!=null&&(o.clearTimeout(w.A),w.A=null)}function Ep(w){w.g=new _i(w,w.j,"rpc",w.Y),w.m===null&&(w.g.H=w.o),w.g.O=0;var L=Yi(w.qa);fn(L,"RID","rpc"),fn(L,"SID",w.K),fn(L,"AID",w.T),fn(L,"CI",w.F?"0":"1"),!w.F&&w.ja&&fn(L,"TO",w.ja),fn(L,"TYPE","xmlhttp"),dc(w,L),w.m&&w.o&&kr(L,w.m,w.o),w.L&&(w.g.I=w.L);var j=w.g;w=w.ia,j.L=1,j.v=ic(Yi(L)),j.m=null,j.P=!0,Gs(j,w)}n.Za=function(){this.C!=null&&(this.C=null,Tu(this),Ff(this),On(19))};function Du(w){w.C!=null&&(o.clearTimeout(w.C),w.C=null)}function Sp(w,L){var j=null;if(w.g==L){Du(w),fc(w),w.g=null;var $=2}else if(If(w.h,L))j=L.D,Ai(w.h,L),$=1;else return;if(w.G!=0){if(L.o)if($==1){j=L.m?L.m.length:0,L=Date.now()-L.F;var se=w.B;$=zs(),at($,new vr($,j)),Iu(w)}else Ap(w);else if(se=L.s,se==3||se==0&&0<L.X||!($==1&&$y(w,L)||$==2&&Ff(w)))switch(j&&0<j.length&&(L=w.h,L.i=L.i.concat(j)),se){case 1:Zs(w,5);break;case 4:Zs(w,10);break;case 3:Zs(w,6);break;default:Zs(w,2)}}}function Vf(w,L){let j=w.Ta+Math.floor(Math.random()*w.cb);return w.isActive()||(j*=2),j*L}function Zs(w,L){if(w.j.info("Error code "+L),L==2){var j=g(w.fb,w),$=w.Xa;const se=!$;$=new ur($||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||rc($,"https"),ic($),se?sc($.toString(),j):Na($.toString(),j)}else On(2);w.G=0,w.l&&w.l.sa(L),Cp(w),bp(w)}n.fb=function(w){w?(this.j.info("Successfully pinged google.com"),On(2)):(this.j.info("Failed to ping google.com"),On(1))};function Cp(w){if(w.G=0,w.ka=[],w.l){const L=Df(w.h);(L.length!=0||w.i.length!=0)&&(A(w.ka,L),A(w.ka,w.i),w.h.i.length=0,b(w.i),w.i.length=0),w.l.ra()}}function Tp(w,L,j){var $=j instanceof ur?Yi(j):new ur(j);if($.g!="")L&&($.g=L+"."+$.g),Vo($,$.s);else{var se=o.location;$=se.protocol,L=L?L+"."+se.hostname:se.hostname,se=+se.port;var me=new ur(null);$&&rc(me,$),L&&(me.g=L),se&&Vo(me,se),j&&(me.l=j),$=me}return j=w.D,L=w.ya,j&&L&&fn($,j,L),fn($,"VER",w.la),dc(w,$),$}function Ip(w,L,j){if(L&&!w.J)throw Error("Can't create secondary domain capable XhrIo object.");return L=w.Ca&&!w.pa?new nn(new jo({eb:j})):new nn(w.pa),L.Ha(w.J),L}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Dp(){}n=Dp.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Ru(){}Ru.prototype.g=function(w,L){return new Ei(w,L)};function Ei(w,L){rt.call(this),this.g=new Cu(L),this.l=w,this.h=L&&L.messageUrlParams||null,w=L&&L.messageHeaders||null,L&&L.clientProtocolHeaderRequired&&(w?w["X-Client-Protocol"]="webchannel":w={"X-Client-Protocol":"webchannel"}),this.g.o=w,w=L&&L.initMessageHeaders||null,L&&L.messageContentType&&(w?w["X-WebChannel-Content-Type"]=L.messageContentType:w={"X-WebChannel-Content-Type":L.messageContentType}),L&&L.va&&(w?w["X-WebChannel-Client-Profile"]=L.va:w={"X-WebChannel-Client-Profile":L.va}),this.g.S=w,(w=L&&L.Sb)&&!C(w)&&(this.g.m=w),this.v=L&&L.supportsCrossDomainXhr||!1,this.u=L&&L.sendRawJson||!1,(L=L&&L.httpSessionIdParam)&&!C(L)&&(this.g.D=L,w=this.h,w!==null&&L in w&&(w=this.h,L in w&&delete w[L])),this.j=new us(this)}x(Ei,rt),Ei.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ei.prototype.close=function(){Lf(this.g)},Ei.prototype.o=function(w){var L=this.g;if(typeof w=="string"){var j={};j.__data__=w,w=j}else this.u&&(j={},j.__data__=qt(w),w=j);L.i.push(new mp(L.Ya++,w)),L.G==3&&Iu(L)},Ei.prototype.N=function(){this.g.l=null,delete this.j,Lf(this.g),delete this.g,Ei.aa.N.call(this)};function Rp(w){or.call(this),w.__headers__&&(this.headers=w.__headers__,this.statusCode=w.__status__,delete w.__headers__,delete w.__status__);var L=w.__sm__;if(L){e:{for(const j in L){w=j;break e}w=void 0}(this.i=w)&&(w=this.i,L=L!==null&&w in L?L[w]:void 0),this.data=L}else this.data=w}x(Rp,or);function Mp(){Ql.call(this),this.status=1}x(Mp,Ql);function us(w){this.g=w}x(us,Dp),us.prototype.ua=function(){at(this.g,"a")},us.prototype.ta=function(w){at(this.g,new Rp(w))},us.prototype.sa=function(w){at(this.g,new Mp)},us.prototype.ra=function(){at(this.g,"b")},Ru.prototype.createWebChannel=Ru.prototype.g,Ei.prototype.send=Ei.prototype.o,Ei.prototype.open=Ei.prototype.m,Ei.prototype.close=Ei.prototype.close,x4=function(){return new Ru},v4=function(){return zs()},y4=ca,W2={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Bo.NO_ERROR=0,Bo.TIMEOUT=8,Bo.HTTP_ERROR=6,hm=Bo,$s.COMPLETE="complete",m4=$s,Xr.EventType=bi,bi.OPEN="a",bi.CLOSE="b",bi.ERROR="c",bi.MESSAGE="d",rt.prototype.listen=rt.prototype.K,$h=Xr,nn.prototype.listenOnce=nn.prototype.L,nn.prototype.getLastError=nn.prototype.Ka,nn.prototype.getLastErrorCode=nn.prototype.Ba,nn.prototype.getStatus=nn.prototype.Z,nn.prototype.getResponseJson=nn.prototype.Oa,nn.prototype.getResponseText=nn.prototype.oa,nn.prototype.send=nn.prototype.ea,nn.prototype.setWithCredentials=nn.prototype.Ha,g4=nn}).apply(typeof Ng<"u"?Ng:typeof self<"u"?self:typeof window<"u"?window:{});const bT="@firebase/firestore",_T="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pi{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}pi.UNAUTHENTICATED=new pi(null),pi.GOOGLE_CREDENTIALS=new pi("google-credentials-uid"),pi.FIRST_PARTY=new pi("first-party-uid"),pi.MOCK_USER=new pi("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ff="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jc=new eb("@firebase/firestore");function pd(){return Jc.logLevel}function Ge(n,...e){if(Jc.logLevel<=Pt.DEBUG){const t=e.map(fb);Jc.debug(`Firestore (${ff}): ${n}`,...t)}}function Eo(n,...e){if(Jc.logLevel<=Pt.ERROR){const t=e.map(fb);Jc.error(`Firestore (${ff}): ${n}`,...t)}}function kl(n,...e){if(Jc.logLevel<=Pt.WARN){const t=e.map(fb);Jc.warn(`Firestore (${ff}): ${n}`,...t)}}function fb(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tt(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,w4(n,r,t)}function w4(n,e,t){let r=`FIRESTORE (${ff}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw Eo(r),new Error(r)}function Ht(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||w4(e,i,r)}function gt(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ee={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ue extends Mo{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rs{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b4{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class wB{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(pi.UNAUTHENTICATED))}shutdown(){}}class bB{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class _B{constructor(e){this.t=e,this.currentUser=pi.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Ht(this.o===void 0,42304);let r=this.i;const i=c=>this.i!==r?(r=this.i,t(c)):Promise.resolve();let a=new Rs;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new Rs,e.enqueueRetryable(()=>i(this.currentUser))};const s=()=>{const c=a;e.enqueueRetryable(async()=>{await c.promise,await i(this.currentUser)})},o=c=>{Ge("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(c=>o(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?o(c):(Ge("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Rs)}},0),s()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Ge("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ht(typeof r.accessToken=="string",31837,{l:r}),new b4(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ht(e===null||typeof e=="string",2055,{h:e}),new pi(e)}}class AB{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=pi.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class EB{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new AB(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(pi.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class AT{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class SB{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Sa(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Ht(this.o===void 0,3512);const r=a=>{a.error!=null&&Ge("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const s=a.token!==this.m;return this.m=a.token,Ge("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const i=a=>{Ge("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(a=>i(a)),setTimeout(()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?i(a):Ge("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new AT(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Ht(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new AT(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CB(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _4(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hb{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=CB(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<t&&(r+=e.charAt(i[a]%62))}return r}}function St(n,e){return n<e?-1:n>e?1:0}function Y2(n,e){let t=0;for(;t<n.length&&t<e.length;){const r=n.codePointAt(t),i=e.codePointAt(t);if(r!==i){if(r<128&&i<128)return St(r,i);{const a=_4(),s=TB(a.encode(ET(n,t)),a.encode(ET(e,t)));return s!==0?s:St(r,i)}}t+=r>65535?2:1}return St(n.length,e.length)}function ET(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function TB(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return St(n[t],e[t]);return St(n.length,e.length)}function $d(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ST="__name__";class vs{constructor(e,t,r){t===void 0?t=0:t>e.length&&tt(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&tt(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return vs.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof vs?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const a=vs.compareSegments(e.get(i),t.get(i));if(a!==0)return a}return St(e.length,t.length)}static compareSegments(e,t){const r=vs.isNumericId(e),i=vs.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?vs.extractNumericId(e).compare(vs.extractNumericId(t)):Y2(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Dl.fromString(e.substring(4,e.length-2))}}class un extends vs{construct(e,t,r){return new un(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Ue(Ee.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new un(t)}static emptyPath(){return new un([])}}const IB=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ii extends vs{construct(e,t,r){return new ii(e,t,r)}static isValidIdentifier(e){return IB.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ii.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===ST}static keyField(){return new ii([ST])}static fromServerFormat(e){const t=[];let r="",i=0;const a=()=>{if(r.length===0)throw new Ue(Ee.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let s=!1;for(;i<e.length;){const o=e[i];if(o==="\\"){if(i+1===e.length)throw new Ue(Ee.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new Ue(Ee.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else o==="`"?(s=!s,i++):o!=="."||s?(r+=o,i++):(a(),i++)}if(a(),s)throw new Ue(Ee.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ii(t)}static emptyPath(){return new ii([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Je{constructor(e){this.path=e}static fromPath(e){return new Je(un.fromString(e))}static fromName(e){return new Je(un.fromString(e).popFirst(5))}static empty(){return new Je(un.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&un.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return un.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Je(new un(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pb(n,e,t){if(!t)throw new Ue(Ee.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function DB(n,e,t,r){if(e===!0&&r===!0)throw new Ue(Ee.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function CT(n){if(!Je.isDocumentKey(n))throw new Ue(Ee.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function TT(n){if(Je.isDocumentKey(n))throw new Ue(Ee.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function A4(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function B1(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":tt(12329,{type:typeof n})}function si(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Ue(Ee.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=B1(n);throw new Ue(Ee.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function RB(n,e){if(e<=0)throw new Ue(Ee.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yr(n,e){const t={typeString:n};return e&&(t.value=e),t}function H0(n,e){if(!A4(n))throw new Ue(Ee.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const i=e[r].typeString,a="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}const s=n[r];if(i&&typeof s!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(a!==void 0&&s!==a.value){t=`Expected '${r}' field to equal '${a.value}'`;break}}if(t)throw new Ue(Ee.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IT=-62135596800,DT=1e6;class Rn{static now(){return Rn.fromMillis(Date.now())}static fromDate(e){return Rn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*DT);return new Rn(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ue(Ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ue(Ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<IT)throw new Ue(Ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ue(Ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/DT}_compareTo(e){return this.seconds===e.seconds?St(this.nanoseconds,e.nanoseconds):St(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Rn._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(H0(e,Rn._jsonSchema))return new Rn(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-IT;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Rn._jsonSchemaVersion="firestore/timestamp/1.0",Rn._jsonSchema={type:yr("string",Rn._jsonSchemaVersion),seconds:yr("number"),nanoseconds:yr("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lt{static fromTimestamp(e){return new lt(e)}static min(){return new lt(new Rn(0,0))}static max(){return new lt(new Rn(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g0=-1;function MB(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=lt.fromTimestamp(r===1e9?new Rn(t+1,0):new Rn(t,r));return new Nl(i,Je.empty(),e)}function OB(n){return new Nl(n.readTime,n.key,g0)}class Nl{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Nl(lt.min(),Je.empty(),g0)}static max(){return new Nl(lt.max(),Je.empty(),g0)}}function PB(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Je.comparator(n.documentKey,e.documentKey),t!==0?t:St(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kB="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class NB{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hf(n){if(n.code!==Ee.FAILED_PRECONDITION||n.message!==kB)throw n;Ge("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class De{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&tt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new De((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(t,a).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof De?t:De.resolve(t)}catch(t){return De.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):De.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):De.reject(t)}static resolve(e){return new De((t,r)=>{t(e)})}static reject(e){return new De((t,r)=>{r(e)})}static waitFor(e){return new De((t,r)=>{let i=0,a=0,s=!1;e.forEach(o=>{++i,o.next(()=>{++a,s&&a===i&&t()},c=>r(c))}),s=!0,a===i&&t()})}static or(e){let t=De.resolve(!1);for(const r of e)t=t.next(i=>i?De.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,a)=>{r.push(t.call(this,i,a))}),this.waitFor(r)}static mapArray(e,t){return new De((r,i)=>{const a=e.length,s=new Array(a);let o=0;for(let c=0;c<a;c++){const d=c;t(e[d]).next(f=>{s[d]=f,++o,o===a&&r(s)},f=>i(f))}})}static doWhile(e,t){return new De((r,i)=>{const a=()=>{e()===!0?t().next(()=>{a()},i):r()};a()})}}function LB(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function pf(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F1{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this._e(r),this.ae=r=>t.writeSequenceNumber(r))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}F1.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gb=-1;function z0(n){return n==null}function km(n){return n===0&&1/n==-1/0}function BB(n){return typeof n=="number"&&Number.isInteger(n)&&!km(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E4="";function FB(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=RT(e)),e=VB(n.get(t),e);return RT(e)}function VB(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const a=n.charAt(i);switch(a){case"\0":t+="";break;case E4:t+="";break;default:t+=a}}return t}function RT(n){return n+E4+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MT(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Gl(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function S4(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gn{constructor(e,t){this.comparator=e,this.root=t||ri.EMPTY}insert(e,t){return new Gn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ri.BLACK,null,null))}remove(e){return new Gn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ri.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Lg(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Lg(this.root,e,this.comparator,!1)}getReverseIterator(){return new Lg(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Lg(this.root,e,this.comparator,!0)}}class Lg{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,t&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ri{constructor(e,t,r,i,a){this.key=e,this.value=t,this.color=r??ri.RED,this.left=i??ri.EMPTY,this.right=a??ri.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,a){return new ri(e??this.key,t??this.value,r??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,t,r),null):a===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return ri.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return ri.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ri.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ri.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw tt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw tt(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw tt(27949);return e+(this.isRed()?0:1)}}ri.EMPTY=null,ri.RED=!0,ri.BLACK=!1;ri.EMPTY=new class{constructor(){this.size=0}get key(){throw tt(57766)}get value(){throw tt(16141)}get color(){throw tt(16727)}get left(){throw tt(29726)}get right(){throw tt(36894)}copy(e,t,r,i,a){return this}insert(e,t,r){return new ri(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Or{constructor(e){this.comparator=e,this.data=new Gn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new OT(this.data.getIterator())}getIteratorFrom(e){return new OT(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Or)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(this.comparator(i,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Or(this.comparator);return t.data=e,t}}class OT{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ra{constructor(e){this.fields=e,e.sort(ii.comparator)}static empty(){return new ra([])}unionWith(e){let t=new Or(ii.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new ra(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return $d(this.fields,e.fields,(t,r)=>t.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C4 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class li{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(i){try{return atob(i)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new C4("Invalid base64 string: "+a):a}}(e);return new li(t)}static fromUint8Array(e){const t=function(i){let a="";for(let s=0;s<i.length;++s)a+=String.fromCharCode(i[s]);return a}(e);return new li(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return St(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}li.EMPTY_BYTE_STRING=new li("");const jB=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ll(n){if(Ht(!!n,39018),typeof n=="string"){let e=0;const t=jB.exec(n);if(Ht(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:nr(n.seconds),nanos:nr(n.nanos)}}function nr(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Bl(n){return typeof n=="string"?li.fromBase64String(n):li.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T4="server_timestamp",I4="__type__",D4="__previous_value__",R4="__local_write_time__";function mb(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[I4])===null||t===void 0?void 0:t.stringValue)===T4}function V1(n){const e=n.mapValue.fields[D4];return mb(e)?V1(e):e}function m0(n){const e=Ll(n.mapValue.fields[R4].timestampValue);return new Rn(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UB{constructor(e,t,r,i,a,s,o,c,d,f){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.longPollingOptions=c,this.useFetchStreams=d,this.isUsingEmulator=f}}const Nm="(default)";class y0{constructor(e,t){this.projectId=e,this.database=t||Nm}static empty(){return new y0("","")}get isDefaultDatabase(){return this.database===Nm}isEqual(e){return e instanceof y0&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M4="__type__",HB="__max__",Bg={mapValue:{}},O4="__vector__",Lm="value";function Fl(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?mb(n)?4:$B(n)?9007199254740991:zB(n)?10:11:tt(28295,{value:n})}function Fs(n,e){if(n===e)return!0;const t=Fl(n);if(t!==Fl(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return m0(n).isEqual(m0(e));case 3:return function(i,a){if(typeof i.timestampValue=="string"&&typeof a.timestampValue=="string"&&i.timestampValue.length===a.timestampValue.length)return i.timestampValue===a.timestampValue;const s=Ll(i.timestampValue),o=Ll(a.timestampValue);return s.seconds===o.seconds&&s.nanos===o.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,a){return Bl(i.bytesValue).isEqual(Bl(a.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,a){return nr(i.geoPointValue.latitude)===nr(a.geoPointValue.latitude)&&nr(i.geoPointValue.longitude)===nr(a.geoPointValue.longitude)}(n,e);case 2:return function(i,a){if("integerValue"in i&&"integerValue"in a)return nr(i.integerValue)===nr(a.integerValue);if("doubleValue"in i&&"doubleValue"in a){const s=nr(i.doubleValue),o=nr(a.doubleValue);return s===o?km(s)===km(o):isNaN(s)&&isNaN(o)}return!1}(n,e);case 9:return $d(n.arrayValue.values||[],e.arrayValue.values||[],Fs);case 10:case 11:return function(i,a){const s=i.mapValue.fields||{},o=a.mapValue.fields||{};if(MT(s)!==MT(o))return!1;for(const c in s)if(s.hasOwnProperty(c)&&(o[c]===void 0||!Fs(s[c],o[c])))return!1;return!0}(n,e);default:return tt(52216,{left:n})}}function v0(n,e){return(n.values||[]).find(t=>Fs(t,e))!==void 0}function Gd(n,e){if(n===e)return 0;const t=Fl(n),r=Fl(e);if(t!==r)return St(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return St(n.booleanValue,e.booleanValue);case 2:return function(a,s){const o=nr(a.integerValue||a.doubleValue),c=nr(s.integerValue||s.doubleValue);return o<c?-1:o>c?1:o===c?0:isNaN(o)?isNaN(c)?0:-1:1}(n,e);case 3:return PT(n.timestampValue,e.timestampValue);case 4:return PT(m0(n),m0(e));case 5:return Y2(n.stringValue,e.stringValue);case 6:return function(a,s){const o=Bl(a),c=Bl(s);return o.compareTo(c)}(n.bytesValue,e.bytesValue);case 7:return function(a,s){const o=a.split("/"),c=s.split("/");for(let d=0;d<o.length&&d<c.length;d++){const f=St(o[d],c[d]);if(f!==0)return f}return St(o.length,c.length)}(n.referenceValue,e.referenceValue);case 8:return function(a,s){const o=St(nr(a.latitude),nr(s.latitude));return o!==0?o:St(nr(a.longitude),nr(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return kT(n.arrayValue,e.arrayValue);case 10:return function(a,s){var o,c,d,f;const p=a.fields||{},g=s.fields||{},m=(o=p[Lm])===null||o===void 0?void 0:o.arrayValue,x=(c=g[Lm])===null||c===void 0?void 0:c.arrayValue,b=St(((d=m==null?void 0:m.values)===null||d===void 0?void 0:d.length)||0,((f=x==null?void 0:x.values)===null||f===void 0?void 0:f.length)||0);return b!==0?b:kT(m,x)}(n.mapValue,e.mapValue);case 11:return function(a,s){if(a===Bg.mapValue&&s===Bg.mapValue)return 0;if(a===Bg.mapValue)return 1;if(s===Bg.mapValue)return-1;const o=a.fields||{},c=Object.keys(o),d=s.fields||{},f=Object.keys(d);c.sort(),f.sort();for(let p=0;p<c.length&&p<f.length;++p){const g=Y2(c[p],f[p]);if(g!==0)return g;const m=Gd(o[c[p]],d[f[p]]);if(m!==0)return m}return St(c.length,f.length)}(n.mapValue,e.mapValue);default:throw tt(23264,{le:t})}}function PT(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return St(n,e);const t=Ll(n),r=Ll(e),i=St(t.seconds,r.seconds);return i!==0?i:St(t.nanos,r.nanos)}function kT(n,e){const t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){const a=Gd(t[i],r[i]);if(a)return a}return St(t.length,r.length)}function Wd(n){return q2(n)}function q2(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=Ll(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return Bl(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return Je.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(const a of t.values||[])i?i=!1:r+=",",r+=q2(a);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let i="{",a=!0;for(const s of r)a?a=!1:i+=",",i+=`${s}:${q2(t.fields[s])}`;return i+"}"}(n.mapValue):tt(61005,{value:n})}function pm(n){switch(Fl(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=V1(n);return e?16+pm(e):16;case 5:return 2*n.stringValue.length;case 6:return Bl(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,a)=>i+pm(a),0)}(n.arrayValue);case 10:case 11:return function(r){let i=0;return Gl(r.fields,(a,s)=>{i+=a.length+pm(s)}),i}(n.mapValue);default:throw tt(13486,{value:n})}}function NT(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function X2(n){return!!n&&"integerValue"in n}function yb(n){return!!n&&"arrayValue"in n}function LT(n){return!!n&&"nullValue"in n}function BT(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function gm(n){return!!n&&"mapValue"in n}function zB(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[M4])===null||t===void 0?void 0:t.stringValue)===O4}function a0(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Gl(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=a0(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=a0(n.arrayValue.values[t]);return e}return Object.assign({},n)}function $B(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===HB}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ri{constructor(e){this.value=e}static empty(){return new Ri({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!gm(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=a0(t)}setAll(e){let t=ii.emptyPath(),r={},i=[];e.forEach((s,o)=>{if(!t.isImmediateParentOf(o)){const c=this.getFieldsMap(t);this.applyChanges(c,r,i),r={},i=[],t=o.popLast()}s?r[o.lastSegment()]=a0(s):i.push(o.lastSegment())});const a=this.getFieldsMap(t);this.applyChanges(a,r,i)}delete(e){const t=this.field(e.popLast());gm(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Fs(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];gm(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Gl(t,(i,a)=>e[i]=a);for(const i of r)delete e[i]}clone(){return new Ri(a0(this.value))}}function P4(n){const e=[];return Gl(n.fields,(t,r)=>{const i=new ii([t]);if(gm(r)){const a=P4(r.mapValue).fields;if(a.length===0)e.push(i);else for(const s of a)e.push(i.child(s))}else e.push(i)}),new ra(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hr{constructor(e,t,r,i,a,s,o){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=a,this.data=s,this.documentState=o}static newInvalidDocument(e){return new Hr(e,0,lt.min(),lt.min(),lt.min(),Ri.empty(),0)}static newFoundDocument(e,t,r,i){return new Hr(e,1,t,lt.min(),r,i,0)}static newNoDocument(e,t){return new Hr(e,2,t,lt.min(),lt.min(),Ri.empty(),0)}static newUnknownDocument(e,t){return new Hr(e,3,t,lt.min(),lt.min(),Ri.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(lt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ri.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ri.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=lt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Hr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Hr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bm{constructor(e,t){this.position=e,this.inclusive=t}}function FT(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const a=e[i],s=n.position[i];if(a.field.isKeyField()?r=Je.comparator(Je.fromName(s.referenceValue),t.key):r=Gd(s,t.data.field(a.field)),a.dir==="desc"&&(r*=-1),r!==0)break}return r}function VT(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Fs(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x0{constructor(e,t="asc"){this.field=e,this.dir=t}}function GB(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k4{}class gr extends k4{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new YB(e,t,r):t==="array-contains"?new KB(e,r):t==="in"?new QB(e,r):t==="not-in"?new ZB(e,r):t==="array-contains-any"?new JB(e,r):new gr(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new qB(e,r):new XB(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Gd(t,this.value)):t!==null&&Fl(this.value)===Fl(t)&&this.matchesComparison(Gd(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return tt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Qa extends k4{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new Qa(e,t)}matches(e){return N4(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function N4(n){return n.op==="and"}function L4(n){return WB(n)&&N4(n)}function WB(n){for(const e of n.filters)if(e instanceof Qa)return!1;return!0}function K2(n){if(n instanceof gr)return n.field.canonicalString()+n.op.toString()+Wd(n.value);if(L4(n))return n.filters.map(e=>K2(e)).join(",");{const e=n.filters.map(t=>K2(t)).join(",");return`${n.op}(${e})`}}function B4(n,e){return n instanceof gr?function(r,i){return i instanceof gr&&r.op===i.op&&r.field.isEqual(i.field)&&Fs(r.value,i.value)}(n,e):n instanceof Qa?function(r,i){return i instanceof Qa&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((a,s,o)=>a&&B4(s,i.filters[o]),!0):!1}(n,e):void tt(19439)}function F4(n){return n instanceof gr?function(t){return`${t.field.canonicalString()} ${t.op} ${Wd(t.value)}`}(n):n instanceof Qa?function(t){return t.op.toString()+" {"+t.getFilters().map(F4).join(" ,")+"}"}(n):"Filter"}class YB extends gr{constructor(e,t,r){super(e,t,r),this.key=Je.fromName(r.referenceValue)}matches(e){const t=Je.comparator(e.key,this.key);return this.matchesComparison(t)}}class qB extends gr{constructor(e,t){super(e,"in",t),this.keys=V4("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class XB extends gr{constructor(e,t){super(e,"not-in",t),this.keys=V4("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function V4(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>Je.fromName(r.referenceValue))}class KB extends gr{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return yb(t)&&v0(t.arrayValue,this.value)}}class QB extends gr{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&v0(this.value.arrayValue,t)}}class ZB extends gr{constructor(e,t){super(e,"not-in",t)}matches(e){if(v0(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!v0(this.value.arrayValue,t)}}class JB extends gr{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!yb(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>v0(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eF{constructor(e,t=null,r=[],i=[],a=null,s=null,o=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=s,this.endAt=o,this.Pe=null}}function jT(n,e=null,t=[],r=[],i=null,a=null,s=null){return new eF(n,e,t,r,i,a,s)}function vb(n){const e=gt(n);if(e.Pe===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>K2(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(a){return a.field.canonicalString()+a.dir}(r)).join(","),z0(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Wd(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Wd(r)).join(",")),e.Pe=t}return e.Pe}function xb(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!GB(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!B4(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!VT(n.startAt,e.startAt)&&VT(n.endAt,e.endAt)}function Q2(n){return Je.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class su{constructor(e,t=null,r=[],i=[],a=null,s="F",o=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=s,this.startAt=o,this.endAt=c,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function tF(n,e,t,r,i,a,s,o){return new su(n,e,t,r,i,a,s,o)}function j1(n){return new su(n)}function UT(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function j4(n){return n.collectionGroup!==null}function s0(n){const e=gt(n);if(e.Te===null){e.Te=[];const t=new Set;for(const a of e.explicitOrderBy)e.Te.push(a),t.add(a.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let o=new Or(ii.comparator);return s.filters.forEach(c=>{c.getFlattenedFilters().forEach(d=>{d.isInequality()&&(o=o.add(d.field))})}),o})(e).forEach(a=>{t.has(a.canonicalString())||a.isKeyField()||e.Te.push(new x0(a,r))}),t.has(ii.keyField().canonicalString())||e.Te.push(new x0(ii.keyField(),r))}return e.Te}function Ms(n){const e=gt(n);return e.Ie||(e.Ie=nF(e,s0(n))),e.Ie}function nF(n,e){if(n.limitType==="F")return jT(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{const a=i.dir==="desc"?"asc":"desc";return new x0(i.field,a)});const t=n.endAt?new Bm(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Bm(n.startAt.position,n.startAt.inclusive):null;return jT(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function Z2(n,e){const t=n.filters.concat([e]);return new su(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Fm(n,e,t){return new su(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function U1(n,e){return xb(Ms(n),Ms(e))&&n.limitType===e.limitType}function U4(n){return`${vb(Ms(n))}|lt:${n.limitType}`}function gd(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>F4(i)).join(", ")}]`),z0(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>Wd(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>Wd(i)).join(",")),`Target(${r})`}(Ms(n))}; limitType=${n.limitType})`}function H1(n,e){return e.isFoundDocument()&&function(r,i){const a=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(a):Je.isDocumentKey(r.path)?r.path.isEqual(a):r.path.isImmediateParentOf(a)}(n,e)&&function(r,i){for(const a of s0(r))if(!a.field.isKeyField()&&i.data.field(a.field)===null)return!1;return!0}(n,e)&&function(r,i){for(const a of r.filters)if(!a.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(s,o,c){const d=FT(s,o,c);return s.inclusive?d<=0:d<0}(r.startAt,s0(r),i)||r.endAt&&!function(s,o,c){const d=FT(s,o,c);return s.inclusive?d>=0:d>0}(r.endAt,s0(r),i))}(n,e)}function rF(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function H4(n){return(e,t)=>{let r=!1;for(const i of s0(n)){const a=iF(i,e,t);if(a!==0)return a;r=r||i.field.isKeyField()}return 0}}function iF(n,e,t){const r=n.field.isKeyField()?Je.comparator(e.key,t.key):function(a,s,o){const c=s.data.field(a),d=o.data.field(a);return c!==null&&d!==null?Gd(c,d):tt(42886)}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return tt(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ou{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[i,a]of r)if(this.equalsFn(i,e))return a}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Gl(this.inner,(t,r)=>{for(const[i,a]of r)e(i,a)})}isEmpty(){return S4(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aF=new Gn(Je.comparator);function So(){return aF}const z4=new Gn(Je.comparator);function Gh(...n){let e=z4;for(const t of n)e=e.insert(t.key,t);return e}function $4(n){let e=z4;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function jc(){return o0()}function G4(){return o0()}function o0(){return new ou(n=>n.toString(),(n,e)=>n.isEqual(e))}const sF=new Gn(Je.comparator),oF=new Or(Je.comparator);function kt(...n){let e=oF;for(const t of n)e=e.add(t);return e}const lF=new Or(St);function cF(){return lF}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wb(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:km(e)?"-0":e}}function W4(n){return{integerValue:""+n}}function uF(n,e){return BB(e)?W4(e):wb(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z1{constructor(){this._=void 0}}function dF(n,e,t){return n instanceof w0?function(i,a){const s={fields:{[I4]:{stringValue:T4},[R4]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return a&&mb(a)&&(a=V1(a)),a&&(s.fields[D4]=a),{mapValue:s}}(t,e):n instanceof b0?q4(n,e):n instanceof _0?X4(n,e):function(i,a){const s=Y4(i,a),o=HT(s)+HT(i.Ee);return X2(s)&&X2(i.Ee)?W4(o):wb(i.serializer,o)}(n,e)}function fF(n,e,t){return n instanceof b0?q4(n,e):n instanceof _0?X4(n,e):t}function Y4(n,e){return n instanceof Vm?function(r){return X2(r)||function(a){return!!a&&"doubleValue"in a}(r)}(e)?e:{integerValue:0}:null}class w0 extends z1{}class b0 extends z1{constructor(e){super(),this.elements=e}}function q4(n,e){const t=K4(e);for(const r of n.elements)t.some(i=>Fs(i,r))||t.push(r);return{arrayValue:{values:t}}}class _0 extends z1{constructor(e){super(),this.elements=e}}function X4(n,e){let t=K4(e);for(const r of n.elements)t=t.filter(i=>!Fs(i,r));return{arrayValue:{values:t}}}class Vm extends z1{constructor(e,t){super(),this.serializer=e,this.Ee=t}}function HT(n){return nr(n.integerValue||n.doubleValue)}function K4(n){return yb(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hF{constructor(e,t){this.field=e,this.transform=t}}function pF(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof b0&&i instanceof b0||r instanceof _0&&i instanceof _0?$d(r.elements,i.elements,Fs):r instanceof Vm&&i instanceof Vm?Fs(r.Ee,i.Ee):r instanceof w0&&i instanceof w0}(n.transform,e.transform)}class gF{constructor(e,t){this.version=e,this.transformResults=t}}class mr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new mr}static exists(e){return new mr(void 0,e)}static updateTime(e){return new mr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function mm(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class $1{}function Q4(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new G0(n.key,mr.none()):new $0(n.key,n.data,mr.none());{const t=n.data,r=Ri.empty();let i=new Or(ii.comparator);for(let a of e.fields)if(!i.has(a)){let s=t.field(a);s===null&&a.length>1&&(a=a.popLast(),s=t.field(a)),s===null?r.delete(a):r.set(a,s),i=i.add(a)}return new Wl(n.key,r,new ra(i.toArray()),mr.none())}}function mF(n,e,t){n instanceof $0?function(i,a,s){const o=i.value.clone(),c=$T(i.fieldTransforms,a,s.transformResults);o.setAll(c),a.convertToFoundDocument(s.version,o).setHasCommittedMutations()}(n,e,t):n instanceof Wl?function(i,a,s){if(!mm(i.precondition,a))return void a.convertToUnknownDocument(s.version);const o=$T(i.fieldTransforms,a,s.transformResults),c=a.data;c.setAll(Z4(i)),c.setAll(o),a.convertToFoundDocument(s.version,c).setHasCommittedMutations()}(n,e,t):function(i,a,s){a.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,t)}function l0(n,e,t,r){return n instanceof $0?function(a,s,o,c){if(!mm(a.precondition,s))return o;const d=a.value.clone(),f=GT(a.fieldTransforms,c,s);return d.setAll(f),s.convertToFoundDocument(s.version,d).setHasLocalMutations(),null}(n,e,t,r):n instanceof Wl?function(a,s,o,c){if(!mm(a.precondition,s))return o;const d=GT(a.fieldTransforms,c,s),f=s.data;return f.setAll(Z4(a)),f.setAll(d),s.convertToFoundDocument(s.version,f).setHasLocalMutations(),o===null?null:o.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(p=>p.field))}(n,e,t,r):function(a,s,o){return mm(a.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):o}(n,e,t)}function yF(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),a=Y4(r.transform,i||null);a!=null&&(t===null&&(t=Ri.empty()),t.set(r.field,a))}return t||null}function zT(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&$d(r,i,(a,s)=>pF(a,s))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class $0 extends $1{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Wl extends $1{constructor(e,t,r,i,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function Z4(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function $T(n,e,t){const r=new Map;Ht(n.length===t.length,32656,{Ae:t.length,Re:n.length});for(let i=0;i<t.length;i++){const a=n[i],s=a.transform,o=e.data.field(a.field);r.set(a.field,fF(s,o,t[i]))}return r}function GT(n,e,t){const r=new Map;for(const i of n){const a=i.transform,s=t.data.field(i.field);r.set(i.field,dF(a,s,e))}return r}class G0 extends $1{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class J4 extends $1{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vF{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&mF(a,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=l0(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=l0(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=G4();return this.mutations.forEach(i=>{const a=e.get(i.key),s=a.overlayedDocument;let o=this.applyToLocalView(s,a.mutatedFields);o=t.has(i.key)?null:o;const c=Q4(s,o);c!==null&&r.set(i.key,c),s.isValidDocument()||s.convertToNoDocument(lt.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),kt())}isEqual(e){return this.batchId===e.batchId&&$d(this.mutations,e.mutations,(t,r)=>zT(t,r))&&$d(this.baseMutations,e.baseMutations,(t,r)=>zT(t,r))}}class bb{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Ht(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let i=function(){return sF}();const a=e.mutations;for(let s=0;s<a.length;s++)i=i.insert(a[s].key,r[s].version);return new bb(e,t,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xF{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wF{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var pr,Vt;function eM(n){switch(n){case Ee.OK:return tt(64938);case Ee.CANCELLED:case Ee.UNKNOWN:case Ee.DEADLINE_EXCEEDED:case Ee.RESOURCE_EXHAUSTED:case Ee.INTERNAL:case Ee.UNAVAILABLE:case Ee.UNAUTHENTICATED:return!1;case Ee.INVALID_ARGUMENT:case Ee.NOT_FOUND:case Ee.ALREADY_EXISTS:case Ee.PERMISSION_DENIED:case Ee.FAILED_PRECONDITION:case Ee.ABORTED:case Ee.OUT_OF_RANGE:case Ee.UNIMPLEMENTED:case Ee.DATA_LOSS:return!0;default:return tt(15467,{code:n})}}function tM(n){if(n===void 0)return Eo("GRPC error has no .code"),Ee.UNKNOWN;switch(n){case pr.OK:return Ee.OK;case pr.CANCELLED:return Ee.CANCELLED;case pr.UNKNOWN:return Ee.UNKNOWN;case pr.DEADLINE_EXCEEDED:return Ee.DEADLINE_EXCEEDED;case pr.RESOURCE_EXHAUSTED:return Ee.RESOURCE_EXHAUSTED;case pr.INTERNAL:return Ee.INTERNAL;case pr.UNAVAILABLE:return Ee.UNAVAILABLE;case pr.UNAUTHENTICATED:return Ee.UNAUTHENTICATED;case pr.INVALID_ARGUMENT:return Ee.INVALID_ARGUMENT;case pr.NOT_FOUND:return Ee.NOT_FOUND;case pr.ALREADY_EXISTS:return Ee.ALREADY_EXISTS;case pr.PERMISSION_DENIED:return Ee.PERMISSION_DENIED;case pr.FAILED_PRECONDITION:return Ee.FAILED_PRECONDITION;case pr.ABORTED:return Ee.ABORTED;case pr.OUT_OF_RANGE:return Ee.OUT_OF_RANGE;case pr.UNIMPLEMENTED:return Ee.UNIMPLEMENTED;case pr.DATA_LOSS:return Ee.DATA_LOSS;default:return tt(39323,{code:n})}}(Vt=pr||(pr={}))[Vt.OK=0]="OK",Vt[Vt.CANCELLED=1]="CANCELLED",Vt[Vt.UNKNOWN=2]="UNKNOWN",Vt[Vt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Vt[Vt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Vt[Vt.NOT_FOUND=5]="NOT_FOUND",Vt[Vt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Vt[Vt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Vt[Vt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Vt[Vt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Vt[Vt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Vt[Vt.ABORTED=10]="ABORTED",Vt[Vt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Vt[Vt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Vt[Vt.INTERNAL=13]="INTERNAL",Vt[Vt.UNAVAILABLE=14]="UNAVAILABLE",Vt[Vt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bF=new Dl([4294967295,4294967295],0);function WT(n){const e=_4().encode(n),t=new p4;return t.update(e),new Uint8Array(t.digest())}function YT(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new Dl([t,r],0),new Dl([i,a],0)]}class _b{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Wh(`Invalid padding: ${t}`);if(r<0)throw new Wh(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Wh(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Wh(`Invalid padding when bitmap length is 0: ${t}`);this.fe=8*e.length-t,this.ge=Dl.fromNumber(this.fe)}pe(e,t,r){let i=e.add(t.multiply(Dl.fromNumber(r)));return i.compare(bF)===1&&(i=new Dl([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const t=WT(e),[r,i]=YT(t);for(let a=0;a<this.hashCount;a++){const s=this.pe(r,i,a);if(!this.ye(s))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),s=new _b(a,i,t);return r.forEach(o=>s.insert(o)),s}insert(e){if(this.fe===0)return;const t=WT(e),[r,i]=YT(t);for(let a=0;a<this.hashCount;a++){const s=this.pe(r,i,a);this.we(s)}}we(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class Wh extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G1{constructor(e,t,r,i,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,W0.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new G1(lt.min(),i,new Gn(St),So(),kt())}}class W0{constructor(e,t,r,i,a){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new W0(r,t,kt(),kt(),kt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ym{constructor(e,t,r,i){this.Se=e,this.removedTargetIds=t,this.key=r,this.be=i}}class nM{constructor(e,t){this.targetId=e,this.De=t}}class rM{constructor(e,t,r=li.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class qT{constructor(){this.ve=0,this.Ce=XT(),this.Fe=li.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=kt(),t=kt(),r=kt();return this.Ce.forEach((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:tt(38017,{changeType:a})}}),new W0(this.Fe,this.Me,e,t,r)}ke(){this.xe=!1,this.Ce=XT()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,Ht(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class _F{constructor(e){this.We=e,this.Ge=new Map,this.ze=So(),this.je=Fg(),this.Je=Fg(),this.He=new Gn(St)}Ye(e){for(const t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(const t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,t=>{const r=this.tt(t);switch(e.state){case 0:this.nt(t)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),r.Be(e.resumeToken));break;default:tt(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach((r,i)=>{this.nt(i)&&t(i)})}it(e){const t=e.targetId,r=e.De.count,i=this.st(t);if(i){const a=i.target;if(Q2(a))if(r===0){const s=new Je(a.path);this.Xe(t,s,Hr.newNoDocument(s,lt.min()))}else Ht(r===1,20013,{expectedCount:r});else{const s=this.ot(t);if(s!==r){const o=this._t(e),c=o?this.ut(o,e,s):1;if(c!==0){this.rt(t);const d=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(t,d)}}}}}_t(e){const t=e.De.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:a=0}=t;let s,o;try{s=Bl(r).toUint8Array()}catch(c){if(c instanceof C4)return kl("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{o=new _b(s,i,a)}catch(c){return kl(c instanceof Wh?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return o.fe===0?null:o}ut(e,t,r){return t.De.count===r-this.ht(e,t.targetId)?0:2}ht(e,t){const r=this.We.getRemoteKeysForTarget(t);let i=0;return r.forEach(a=>{const s=this.We.lt(),o=`projects/${s.projectId}/databases/${s.database}/documents/${a.path.canonicalString()}`;e.mightContain(o)||(this.Xe(t,a,null),i++)}),i}Pt(e){const t=new Map;this.Ge.forEach((a,s)=>{const o=this.st(s);if(o){if(a.current&&Q2(o.target)){const c=new Je(o.target.path);this.Tt(c).has(s)||this.It(s,c)||this.Xe(s,c,Hr.newNoDocument(c,e))}a.Ne&&(t.set(s,a.Le()),a.ke())}});let r=kt();this.Je.forEach((a,s)=>{let o=!0;s.forEachWhile(c=>{const d=this.st(c);return!d||d.purpose==="TargetPurposeLimboResolution"||(o=!1,!1)}),o&&(r=r.add(a))}),this.ze.forEach((a,s)=>s.setReadTime(e));const i=new G1(e,t,this.He,this.ze,r);return this.ze=So(),this.je=Fg(),this.Je=Fg(),this.He=new Gn(St),i}Ze(e,t){if(!this.nt(e))return;const r=this.It(e,t.key)?2:0;this.tt(e).qe(t.key,r),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,r){if(!this.nt(e))return;const i=this.tt(e);this.It(e,t)?i.qe(t,1):i.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),r&&(this.ze=this.ze.insert(t,r))}removeTarget(e){this.Ge.delete(e)}ot(e){const t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new qT,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new Or(St),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new Or(St),this.je=this.je.insert(e,t)),t}nt(e){const t=this.st(e)!==null;return t||Ge("WatchChangeAggregator","Detected inactive target",e),t}st(e){const t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new qT),this.We.getRemoteKeysForTarget(e).forEach(t=>{this.Xe(e,t,null)})}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}}function Fg(){return new Gn(Je.comparator)}function XT(){return new Gn(Je.comparator)}const AF={asc:"ASCENDING",desc:"DESCENDING"},EF={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},SF={and:"AND",or:"OR"};class CF{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function J2(n,e){return n.useProto3Json||z0(e)?e:{value:e}}function jm(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function iM(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function TF(n,e){return jm(n,e.toTimestamp())}function ia(n){return Ht(!!n,49232),lt.fromTimestamp(function(t){const r=Ll(t);return new Rn(r.seconds,r.nanos)}(n))}function Ab(n,e){return ew(n,e).canonicalString()}function ew(n,e){const t=function(i){return new un(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function aM(n){const e=un.fromString(n);return Ht(dM(e),10190,{key:e.toString()}),e}function Um(n,e){return Ab(n.databaseId,e.path)}function c0(n,e){const t=aM(e);if(t.get(1)!==n.databaseId.projectId)throw new Ue(Ee.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Ue(Ee.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Je(oM(t))}function sM(n,e){return Ab(n.databaseId,e)}function IF(n){const e=aM(n);return e.length===4?un.emptyPath():oM(e)}function tw(n){return new un(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function oM(n){return Ht(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function KT(n,e,t){return{name:Um(n,e),fields:t.value.mapValue.fields}}function DF(n,e){return"found"in e?function(r,i){Ht(!!i.found,43571),i.found.name,i.found.updateTime;const a=c0(r,i.found.name),s=ia(i.found.updateTime),o=i.found.createTime?ia(i.found.createTime):lt.min(),c=new Ri({mapValue:{fields:i.found.fields}});return Hr.newFoundDocument(a,s,o,c)}(n,e):"missing"in e?function(r,i){Ht(!!i.missing,3894),Ht(!!i.readTime,22933);const a=c0(r,i.missing),s=ia(i.readTime);return Hr.newNoDocument(a,s)}(n,e):tt(7234,{result:e})}function RF(n,e){let t;if("targetChange"in e){e.targetChange;const r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:tt(39313,{state:d})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],a=function(d,f){return d.useProto3Json?(Ht(f===void 0||typeof f=="string",58123),li.fromBase64String(f||"")):(Ht(f===void 0||f instanceof Buffer||f instanceof Uint8Array,16193),li.fromUint8Array(f||new Uint8Array))}(n,e.targetChange.resumeToken),s=e.targetChange.cause,o=s&&function(d){const f=d.code===void 0?Ee.UNKNOWN:tM(d.code);return new Ue(f,d.message||"")}(s);t=new rM(r,i,a,o||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=c0(n,r.document.name),a=ia(r.document.updateTime),s=r.document.createTime?ia(r.document.createTime):lt.min(),o=new Ri({mapValue:{fields:r.document.fields}}),c=Hr.newFoundDocument(i,a,s,o),d=r.targetIds||[],f=r.removedTargetIds||[];t=new ym(d,f,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=c0(n,r.document),a=r.readTime?ia(r.readTime):lt.min(),s=Hr.newNoDocument(i,a),o=r.removedTargetIds||[];t=new ym([],o,s.key,s)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=c0(n,r.document),a=r.removedTargetIds||[];t=new ym([],a,i,null)}else{if(!("filter"in e))return tt(11601,{At:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:a}=r,s=new wF(i,a),o=r.targetId;t=new nM(o,s)}}return t}function lM(n,e){let t;if(e instanceof $0)t={update:KT(n,e.key,e.value)};else if(e instanceof G0)t={delete:Um(n,e.key)};else if(e instanceof Wl)t={update:KT(n,e.key,e.data),updateMask:VF(e.fieldMask)};else{if(!(e instanceof J4))return tt(16599,{Rt:e.type});t={verify:Um(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(a,s){const o=s.transform;if(o instanceof w0)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof b0)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof _0)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof Vm)return{fieldPath:s.field.canonicalString(),increment:o.Ee};throw tt(20930,{transform:s.transform})}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,a){return a.updateTime!==void 0?{updateTime:TF(i,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:tt(27497)}(n,e.precondition)),t}function MF(n,e){return n&&n.length>0?(Ht(e!==void 0,14353),n.map(t=>function(i,a){let s=i.updateTime?ia(i.updateTime):ia(a);return s.isEqual(lt.min())&&(s=ia(a)),new gF(s,i.transformResults||[])}(t,e))):[]}function OF(n,e){return{documents:[sM(n,e.path)]}}function PF(n,e){const t={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=sM(n,i);const a=function(d){if(d.length!==0)return uM(Qa.create(d,"and"))}(e.filters);a&&(t.structuredQuery.where=a);const s=function(d){if(d.length!==0)return d.map(f=>function(g){return{field:md(g.field),direction:LF(g.dir)}}(f))}(e.orderBy);s&&(t.structuredQuery.orderBy=s);const o=J2(n,e.limit);return o!==null&&(t.structuredQuery.limit=o),e.startAt&&(t.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{Vt:t,parent:i}}function kF(n){let e=IF(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Ht(r===1,65062);const f=t.from[0];f.allDescendants?i=f.collectionId:e=e.child(f.collectionId)}let a=[];t.where&&(a=function(p){const g=cM(p);return g instanceof Qa&&L4(g)?g.getFilters():[g]}(t.where));let s=[];t.orderBy&&(s=function(p){return p.map(g=>function(x){return new x0(yd(x.field),function(A){switch(A){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(x.direction))}(g))}(t.orderBy));let o=null;t.limit&&(o=function(p){let g;return g=typeof p=="object"?p.value:p,z0(g)?null:g}(t.limit));let c=null;t.startAt&&(c=function(p){const g=!!p.before,m=p.values||[];return new Bm(m,g)}(t.startAt));let d=null;return t.endAt&&(d=function(p){const g=!p.before,m=p.values||[];return new Bm(m,g)}(t.endAt)),tF(e,i,s,a,o,"F",c,d)}function NF(n,e){const t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return tt(28987,{purpose:i})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function cM(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=yd(t.unaryFilter.field);return gr.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=yd(t.unaryFilter.field);return gr.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=yd(t.unaryFilter.field);return gr.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=yd(t.unaryFilter.field);return gr.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return tt(61313);default:return tt(60726)}}(n):n.fieldFilter!==void 0?function(t){return gr.create(yd(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return tt(58110);default:return tt(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return Qa.create(t.compositeFilter.filters.map(r=>cM(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return tt(1026)}}(t.compositeFilter.op))}(n):tt(30097,{filter:n})}function LF(n){return AF[n]}function BF(n){return EF[n]}function FF(n){return SF[n]}function md(n){return{fieldPath:n.canonicalString()}}function yd(n){return ii.fromServerFormat(n.fieldPath)}function uM(n){return n instanceof gr?function(t){if(t.op==="=="){if(BT(t.value))return{unaryFilter:{field:md(t.field),op:"IS_NAN"}};if(LT(t.value))return{unaryFilter:{field:md(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(BT(t.value))return{unaryFilter:{field:md(t.field),op:"IS_NOT_NAN"}};if(LT(t.value))return{unaryFilter:{field:md(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:md(t.field),op:BF(t.op),value:t.value}}}(n):n instanceof Qa?function(t){const r=t.getFilters().map(i=>uM(i));return r.length===1?r[0]:{compositeFilter:{op:FF(t.op),filters:r}}}(n):tt(54877,{filter:n})}function VF(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function dM(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _l{constructor(e,t,r,i,a=lt.min(),s=lt.min(),o=li.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o,this.expectedCount=c}withSequenceNumber(e){return new _l(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new _l(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new _l(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new _l(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jF{constructor(e){this.gt=e}}function UF(n){const e=kF({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Fm(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HF{constructor(){this.Dn=new zF}addToCollectionParentIndex(e,t){return this.Dn.add(t),De.resolve()}getCollectionParents(e,t){return De.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return De.resolve()}deleteFieldIndex(e,t){return De.resolve()}deleteAllFieldIndexes(e){return De.resolve()}createTargetIndexes(e,t){return De.resolve()}getDocumentsMatchingTarget(e,t){return De.resolve(null)}getIndexType(e,t){return De.resolve(0)}getFieldIndexes(e,t){return De.resolve([])}getNextCollectionGroupToUpdate(e){return De.resolve(null)}getMinOffset(e,t){return De.resolve(Nl.min())}getMinOffsetFromCollectionGroup(e,t){return De.resolve(Nl.min())}updateCollectionGroup(e,t,r){return De.resolve()}updateIndexEntries(e,t){return De.resolve()}}class zF{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Or(un.comparator),a=!i.has(r);return this.index[t]=i.add(r),a}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Or(un.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QT={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},fM=41943040;class Vi{static withCacheSize(e){return new Vi(e,Vi.DEFAULT_COLLECTION_PERCENTILE,Vi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Vi.DEFAULT_COLLECTION_PERCENTILE=10,Vi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Vi.DEFAULT=new Vi(fM,Vi.DEFAULT_COLLECTION_PERCENTILE,Vi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Vi.DISABLED=new Vi(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yd{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new Yd(0)}static ur(){return new Yd(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZT="LruGarbageCollector",$F=1048576;function JT([n,e],[t,r]){const i=St(n,t);return i===0?St(e,r):i}class GF{constructor(e){this.Tr=e,this.buffer=new Or(JT),this.Ir=0}dr(){return++this.Ir}Er(e){const t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();JT(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class WF{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){Ge(ZT,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){pf(t)?Ge(ZT,"Ignoring IndexedDB error during garbage collection: ",t):await hf(t)}await this.Rr(3e5)})}}class YF{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return De.resolve(F1.ue);const r=new GF(t);return this.Vr.forEachTarget(e,i=>r.Er(i.sequenceNumber)).next(()=>this.Vr.gr(e,i=>r.Er(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Vr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(Ge("LruGarbageCollector","Garbage collection skipped; disabled"),De.resolve(QT)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Ge("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),QT):this.pr(e,t))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let r,i,a,s,o,c,d;const f=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(Ge("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,s=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,o=Date.now(),this.removeTargets(e,r,t))).next(p=>(a=p,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(d=Date.now(),pd()<=Pt.DEBUG&&Ge("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-f}ms
	Determined least recently used ${i} in `+(o-s)+`ms
	Removed ${a} targets in `+(c-o)+`ms
	Removed ${p} documents in `+(d-c)+`ms
Total Duration: ${d-f}ms`),De.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:p})))}}function qF(n,e){return new YF(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XF{constructor(){this.changes=new ou(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Hr.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?De.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KF{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QF{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&l0(r.mutation,i,ra.empty(),Rn.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,kt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=kt()){const i=jc();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(a=>{let s=Gh();return a.forEach((o,c)=>{s=s.insert(o,c.overlayedDocument)}),s}))}getOverlayedDocuments(e,t){const r=jc();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,kt()))}populateOverlays(e,t,r){const i=[];return r.forEach(a=>{t.has(a)||i.push(a)}),this.documentOverlayCache.getOverlays(e,i).next(a=>{a.forEach((s,o)=>{t.set(s,o)})})}computeViews(e,t,r,i){let a=So();const s=o0(),o=function(){return o0()}();return t.forEach((c,d)=>{const f=r.get(d.key);i.has(d.key)&&(f===void 0||f.mutation instanceof Wl)?a=a.insert(d.key,d):f!==void 0?(s.set(d.key,f.mutation.getFieldMask()),l0(f.mutation,d,f.mutation.getFieldMask(),Rn.now())):s.set(d.key,ra.empty())}),this.recalculateAndSaveOverlays(e,a).next(c=>(c.forEach((d,f)=>s.set(d,f)),t.forEach((d,f)=>{var p;return o.set(d,new KF(f,(p=s.get(d))!==null&&p!==void 0?p:null))}),o))}recalculateAndSaveOverlays(e,t){const r=o0();let i=new Gn((s,o)=>s-o),a=kt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(s=>{for(const o of s)o.keys().forEach(c=>{const d=t.get(c);if(d===null)return;let f=r.get(c)||ra.empty();f=o.applyToLocalView(d,f),r.set(c,f);const p=(i.get(o.batchId)||kt()).add(c);i=i.insert(o.batchId,p)})}).next(()=>{const s=[],o=i.getReverseIterator();for(;o.hasNext();){const c=o.getNext(),d=c.key,f=c.value,p=G4();f.forEach(g=>{if(!a.has(g)){const m=Q4(t.get(g),r.get(g));m!==null&&p.set(g,m),a=a.add(g)}}),s.push(this.documentOverlayCache.saveOverlays(e,d,p))}return De.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(s){return Je.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):j4(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(a=>{const s=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-a.size):De.resolve(jc());let o=g0,c=a;return s.next(d=>De.forEach(d,(f,p)=>(o<p.largestBatchId&&(o=p.largestBatchId),a.get(f)?De.resolve():this.remoteDocumentCache.getEntry(e,f).next(g=>{c=c.insert(f,g)}))).next(()=>this.populateOverlays(e,d,a)).next(()=>this.computeViews(e,c,d,kt())).next(f=>({batchId:o,changes:$4(f)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Je(t)).next(r=>{let i=Gh();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const a=t.collectionGroup;let s=Gh();return this.indexManager.getCollectionParents(e,a).next(o=>De.forEach(o,c=>{const d=function(p,g){return new su(g,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(t,c.child(a));return this.getDocumentsMatchingCollectionQuery(e,d,r,i).next(f=>{f.forEach((p,g)=>{s=s.insert(p,g)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r,i){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(a=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,a,i))).next(s=>{a.forEach((c,d)=>{const f=d.getKey();s.get(f)===null&&(s=s.insert(f,Hr.newInvalidDocument(f)))});let o=Gh();return s.forEach((c,d)=>{const f=a.get(c);f!==void 0&&l0(f.mutation,d,ra.empty(),Rn.now()),H1(t,d)&&(o=o.insert(c,d))}),o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZF{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return De.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,function(i){return{id:i.id,version:i.version,createTime:ia(i.createTime)}}(t)),De.resolve()}getNamedQuery(e,t){return De.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,function(i){return{name:i.name,query:UF(i.bundledQuery),readTime:ia(i.readTime)}}(t)),De.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JF{constructor(){this.overlays=new Gn(Je.comparator),this.kr=new Map}getOverlay(e,t){return De.resolve(this.overlays.get(t))}getOverlays(e,t){const r=jc();return De.forEach(t,i=>this.getOverlay(e,i).next(a=>{a!==null&&r.set(i,a)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,a)=>{this.wt(e,t,a)}),De.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.kr.get(r);return i!==void 0&&(i.forEach(a=>this.overlays=this.overlays.remove(a)),this.kr.delete(r)),De.resolve()}getOverlaysForCollection(e,t,r){const i=jc(),a=t.length+1,s=new Je(t.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){const c=o.getNext().value,d=c.getKey();if(!t.isPrefixOf(d.path))break;d.path.length===a&&c.largestBatchId>r&&i.set(c.getKey(),c)}return De.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let a=new Gn((d,f)=>d-f);const s=this.overlays.getIterator();for(;s.hasNext();){const d=s.getNext().value;if(d.getKey().getCollectionGroup()===t&&d.largestBatchId>r){let f=a.get(d.largestBatchId);f===null&&(f=jc(),a=a.insert(d.largestBatchId,f)),f.set(d.getKey(),d)}}const o=jc(),c=a.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((d,f)=>o.set(d,f)),!(o.size()>=i)););return De.resolve(o)}wt(e,t,r){const i=this.overlays.get(r.key);if(i!==null){const s=this.kr.get(i.largestBatchId).delete(r.key);this.kr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new xF(t,r));let a=this.kr.get(t);a===void 0&&(a=kt(),this.kr.set(t,a)),this.kr.set(t,a.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eV{constructor(){this.sessionToken=li.EMPTY_BYTE_STRING}getSessionToken(e){return De.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,De.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eb{constructor(){this.qr=new Or(Ur.Qr),this.$r=new Or(Ur.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){const r=new Ur(e,t);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Wr(new Ur(e,t))}Gr(e,t){e.forEach(r=>this.removeReference(r,t))}zr(e){const t=new Je(new un([])),r=new Ur(t,e),i=new Ur(t,e+1),a=[];return this.$r.forEachInRange([r,i],s=>{this.Wr(s),a.push(s.key)}),a}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const t=new Je(new un([])),r=new Ur(t,e),i=new Ur(t,e+1);let a=kt();return this.$r.forEachInRange([r,i],s=>{a=a.add(s.key)}),a}containsKey(e){const t=new Ur(e,0),r=this.qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class Ur{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return Je.comparator(e.key,t.key)||St(e.Hr,t.Hr)}static Ur(e,t){return St(e.Hr,t.Hr)||Je.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tV{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new Or(Ur.Qr)}checkEmpty(e){return De.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){const a=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new vF(a,t,r,i);this.mutationQueue.push(s);for(const o of i)this.Yr=this.Yr.add(new Ur(o.key,a)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return De.resolve(s)}lookupMutationBatch(e,t){return De.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=this.Xr(r),a=i<0?0:i;return De.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return De.resolve(this.mutationQueue.length===0?gb:this.er-1)}getAllMutationBatches(e){return De.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Ur(t,0),i=new Ur(t,Number.POSITIVE_INFINITY),a=[];return this.Yr.forEachInRange([r,i],s=>{const o=this.Zr(s.Hr);a.push(o)}),De.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Or(St);return t.forEach(i=>{const a=new Ur(i,0),s=new Ur(i,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([a,s],o=>{r=r.add(o.Hr)})}),De.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let a=r;Je.isDocumentKey(a)||(a=a.child(""));const s=new Ur(new Je(a),0);let o=new Or(St);return this.Yr.forEachWhile(c=>{const d=c.key.path;return!!r.isPrefixOf(d)&&(d.length===i&&(o=o.add(c.Hr)),!0)},s),De.resolve(this.ei(o))}ei(e){const t=[];return e.forEach(r=>{const i=this.Zr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){Ht(this.ti(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return De.forEach(t.mutations,i=>{const a=new Ur(i.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Yr=r})}rr(e){}containsKey(e,t){const r=new Ur(t,0),i=this.Yr.firstAfterOrEqual(r);return De.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,De.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nV{constructor(e){this.ni=e,this.docs=function(){return new Gn(Je.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),a=i?i.size:0,s=this.ni(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return De.resolve(r?r.document.mutableCopy():Hr.newInvalidDocument(t))}getEntries(e,t){let r=So();return t.forEach(i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():Hr.newInvalidDocument(i))}),De.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let a=So();const s=t.path,o=new Je(s.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(o);for(;c.hasNext();){const{key:d,value:{document:f}}=c.getNext();if(!s.isPrefixOf(d.path))break;d.path.length>s.length+1||PB(OB(f),r)<=0||(i.has(f.key)||H1(t,f))&&(a=a.insert(f.key,f.mutableCopy()))}return De.resolve(a)}getAllFromCollectionGroup(e,t,r,i){tt(9500)}ri(e,t){return De.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new rV(this)}getSize(e){return De.resolve(this.size)}}class rV extends XF{constructor(e){super(),this.Or=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Or.addEntry(e,i)):this.Or.removeEntry(r)}),De.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iV{constructor(e){this.persistence=e,this.ii=new ou(t=>vb(t),xb),this.lastRemoteSnapshotVersion=lt.min(),this.highestTargetId=0,this.si=0,this.oi=new Eb,this.targetCount=0,this._i=Yd.ar()}forEachTarget(e,t){return this.ii.forEach((r,i)=>t(i)),De.resolve()}getLastRemoteSnapshotVersion(e){return De.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return De.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),De.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.si&&(this.si=t),De.resolve()}hr(e){this.ii.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this._i=new Yd(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,De.resolve()}updateTargetData(e,t){return this.hr(t),De.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,De.resolve()}removeTargets(e,t,r){let i=0;const a=[];return this.ii.forEach((s,o)=>{o.sequenceNumber<=t&&r.get(o.targetId)===null&&(this.ii.delete(s),a.push(this.removeMatchingKeysForTargetId(e,o.targetId)),i++)}),De.waitFor(a).next(()=>i)}getTargetCount(e){return De.resolve(this.targetCount)}getTargetData(e,t){const r=this.ii.get(t)||null;return De.resolve(r)}addMatchingKeys(e,t,r){return this.oi.Kr(t,r),De.resolve()}removeMatchingKeys(e,t,r){this.oi.Gr(t,r);const i=this.persistence.referenceDelegate,a=[];return i&&t.forEach(s=>{a.push(i.markPotentiallyOrphaned(e,s))}),De.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),De.resolve()}getMatchingKeysForTargetId(e,t){const r=this.oi.Jr(t);return De.resolve(r)}containsKey(e,t){return De.resolve(this.oi.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hM{constructor(e,t){this.ai={},this.overlays={},this.ui=new F1(0),this.ci=!1,this.ci=!0,this.li=new eV,this.referenceDelegate=e(this),this.hi=new iV(this),this.indexManager=new HF,this.remoteDocumentCache=function(i){return new nV(i)}(r=>this.referenceDelegate.Pi(r)),this.serializer=new jF(t),this.Ti=new ZF(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new JF,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ai[e.toKey()];return r||(r=new tV(t,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,r){Ge("MemoryPersistence","Starting transaction:",e);const i=new aV(this.ui.next());return this.referenceDelegate.Ii(),r(i).next(a=>this.referenceDelegate.di(i).next(()=>a)).toPromise().then(a=>(i.raiseOnCommittedEvent(),a))}Ei(e,t){return De.or(Object.values(this.ai).map(r=>()=>r.containsKey(e,t)))}}class aV extends NB{constructor(e){super(),this.currentSequenceNumber=e}}class Sb{constructor(e){this.persistence=e,this.Ai=new Eb,this.Ri=null}static Vi(e){return new Sb(e)}get mi(){if(this.Ri)return this.Ri;throw tt(60996)}addReference(e,t,r){return this.Ai.addReference(r,t),this.mi.delete(r.toString()),De.resolve()}removeReference(e,t,r){return this.Ai.removeReference(r,t),this.mi.add(r.toString()),De.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),De.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach(i=>this.mi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(a=>this.mi.add(a.toString()))}).next(()=>r.removeTargetData(e,t))}Ii(){this.Ri=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return De.forEach(this.mi,r=>{const i=Je.fromPath(r);return this.fi(e,i).next(a=>{a||t.removeEntry(i,lt.min())})}).next(()=>(this.Ri=null,t.apply(e)))}updateLimboDocument(e,t){return this.fi(e,t).next(r=>{r?this.mi.delete(t.toString()):this.mi.add(t.toString())})}Pi(e){return 0}fi(e,t){return De.or([()=>De.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class Hm{constructor(e,t){this.persistence=e,this.gi=new ou(r=>FB(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=qF(this,t)}static Vi(e,t){return new Hm(e,t)}Ii(){}di(e){return De.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){const t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}yr(e){let t=0;return this.gr(e,r=>{t++}).next(()=>t)}gr(e,t){return De.forEach(this.gi,(r,i)=>this.Sr(e,r,i).next(a=>a?De.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const i=this.persistence.getRemoteDocumentCache(),a=i.newChangeBuffer();return i.ri(e,s=>this.Sr(e,s,t).next(o=>{o||(r++,a.removeEntry(s,lt.min()))})).next(()=>a.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),De.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),De.resolve()}removeReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),De.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),De.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=pm(e.data.value)),t}Sr(e,t,r){return De.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const i=this.gi.get(t);return De.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cb{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Is=r,this.ds=i}static Es(e,t){let r=kt(),i=kt();for(const a of t.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new Cb(e,t.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sV{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oV{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=function(){return j5()?8:LB(xi())>0?6:4}()}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,r,i){const a={result:null};return this.ps(e,t).next(s=>{a.result=s}).next(()=>{if(!a.result)return this.ys(e,t,i,r).next(s=>{a.result=s})}).next(()=>{if(a.result)return;const s=new sV;return this.ws(e,t,s).next(o=>{if(a.result=o,this.Rs)return this.Ss(e,t,s,o.size)})}).next(()=>a.result)}Ss(e,t,r,i){return r.documentReadCount<this.Vs?(pd()<=Pt.DEBUG&&Ge("QueryEngine","SDK will not create cache indexes for query:",gd(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),De.resolve()):(pd()<=Pt.DEBUG&&Ge("QueryEngine","Query:",gd(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.fs*i?(pd()<=Pt.DEBUG&&Ge("QueryEngine","The SDK decides to create cache indexes for query:",gd(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ms(t))):De.resolve())}ps(e,t){if(UT(t))return De.resolve(null);let r=Ms(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=Fm(t,null,"F"),r=Ms(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(a=>{const s=kt(...a);return this.gs.getDocuments(e,s).next(o=>this.indexManager.getMinOffset(e,r).next(c=>{const d=this.bs(t,o);return this.Ds(t,d,s,c.readTime)?this.ps(e,Fm(t,null,"F")):this.vs(e,d,t,c)}))})))}ys(e,t,r,i){return UT(t)||i.isEqual(lt.min())?De.resolve(null):this.gs.getDocuments(e,r).next(a=>{const s=this.bs(t,a);return this.Ds(t,s,r,i)?De.resolve(null):(pd()<=Pt.DEBUG&&Ge("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),gd(t)),this.vs(e,s,t,MB(i,g0)).next(o=>o))})}bs(e,t){let r=new Or(H4(e));return t.forEach((i,a)=>{H1(e,a)&&(r=r.add(a))}),r}Ds(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const a=e.limitType==="F"?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}ws(e,t,r){return pd()<=Pt.DEBUG&&Ge("QueryEngine","Using full collection scan to execute query:",gd(t)),this.gs.getDocumentsMatchingQuery(e,t,Nl.min(),r)}vs(e,t,r,i){return this.gs.getDocumentsMatchingQuery(e,r,i).next(a=>(t.forEach(s=>{a=a.insert(s.key,s)}),a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tb="LocalStore",lV=3e8;class cV{constructor(e,t,r,i){this.persistence=e,this.Cs=t,this.serializer=i,this.Fs=new Gn(St),this.Ms=new ou(a=>vb(a),xb),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new QF(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Fs))}}function uV(n,e,t,r){return new cV(n,e,t,r)}async function pM(n,e){const t=gt(n);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(a=>(i=a,t.Ns(e),t.mutationQueue.getAllMutationBatches(r))).next(a=>{const s=[],o=[];let c=kt();for(const d of i){s.push(d.batchId);for(const f of d.mutations)c=c.add(f.key)}for(const d of a){o.push(d.batchId);for(const f of d.mutations)c=c.add(f.key)}return t.localDocuments.getDocuments(r,c).next(d=>({Bs:d,removedBatchIds:s,addedBatchIds:o}))})})}function dV(n,e){const t=gt(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),a=t.Os.newChangeBuffer({trackRemovals:!0});return function(o,c,d,f){const p=d.batch,g=p.keys();let m=De.resolve();return g.forEach(x=>{m=m.next(()=>f.getEntry(c,x)).next(b=>{const A=d.docVersions.get(x);Ht(A!==null,48541),b.version.compareTo(A)<0&&(p.applyToRemoteDocument(b,d),b.isValidDocument()&&(b.setReadTime(d.commitVersion),f.addEntry(b)))})}),m.next(()=>o.mutationQueue.removeMutationBatch(c,p))}(t,r,e,a).next(()=>a.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(o){let c=kt();for(let d=0;d<o.mutationResults.length;++d)o.mutationResults[d].transformResults.length>0&&(c=c.add(o.batch.mutations[d].key));return c}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function gM(n){const e=gt(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.hi.getLastRemoteSnapshotVersion(t))}function fV(n,e){const t=gt(n),r=e.snapshotVersion;let i=t.Fs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const s=t.Os.newChangeBuffer({trackRemovals:!0});i=t.Fs;const o=[];e.targetChanges.forEach((f,p)=>{const g=i.get(p);if(!g)return;o.push(t.hi.removeMatchingKeys(a,f.removedDocuments,p).next(()=>t.hi.addMatchingKeys(a,f.addedDocuments,p)));let m=g.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(p)!==null?m=m.withResumeToken(li.EMPTY_BYTE_STRING,lt.min()).withLastLimboFreeSnapshotVersion(lt.min()):f.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(f.resumeToken,r)),i=i.insert(p,m),function(b,A,E){return b.resumeToken.approximateByteSize()===0||A.snapshotVersion.toMicroseconds()-b.snapshotVersion.toMicroseconds()>=lV?!0:E.addedDocuments.size+E.modifiedDocuments.size+E.removedDocuments.size>0}(g,m,f)&&o.push(t.hi.updateTargetData(a,m))});let c=So(),d=kt();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&o.push(t.persistence.referenceDelegate.updateLimboDocument(a,f))}),o.push(hV(a,s,e.documentUpdates).next(f=>{c=f.Ls,d=f.ks})),!r.isEqual(lt.min())){const f=t.hi.getLastRemoteSnapshotVersion(a).next(p=>t.hi.setTargetsMetadata(a,a.currentSequenceNumber,r));o.push(f)}return De.waitFor(o).next(()=>s.apply(a)).next(()=>t.localDocuments.getLocalViewOfDocuments(a,c,d)).next(()=>c)}).then(a=>(t.Fs=i,a))}function hV(n,e,t){let r=kt(),i=kt();return t.forEach(a=>r=r.add(a)),e.getEntries(n,r).next(a=>{let s=So();return t.forEach((o,c)=>{const d=a.get(o);c.isFoundDocument()!==d.isFoundDocument()&&(i=i.add(o)),c.isNoDocument()&&c.version.isEqual(lt.min())?(e.removeEntry(o,c.readTime),s=s.insert(o,c)):!d.isValidDocument()||c.version.compareTo(d.version)>0||c.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(c),s=s.insert(o,c)):Ge(Tb,"Ignoring outdated watch update for ",o,". Current version:",d.version," Watch version:",c.version)}),{Ls:s,ks:i}})}function pV(n,e){const t=gt(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=gb),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function gV(n,e){const t=gt(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.hi.getTargetData(r,e).next(a=>a?(i=a,De.resolve(i)):t.hi.allocateTargetId(r).next(s=>(i=new _l(e,s,"TargetPurposeListen",r.currentSequenceNumber),t.hi.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.Fs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Fs=t.Fs.insert(r.targetId,r),t.Ms.set(e,r.targetId)),r})}async function nw(n,e,t){const r=gt(n),i=r.Fs.get(e),a=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",a,s=>r.persistence.referenceDelegate.removeTarget(s,i))}catch(s){if(!pf(s))throw s;Ge(Tb,`Failed to update sequence numbers for target ${e}: ${s}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(i.target)}function eI(n,e,t){const r=gt(n);let i=lt.min(),a=kt();return r.persistence.runTransaction("Execute query","readwrite",s=>function(c,d,f){const p=gt(c),g=p.Ms.get(f);return g!==void 0?De.resolve(p.Fs.get(g)):p.hi.getTargetData(d,f)}(r,s,Ms(e)).next(o=>{if(o)return i=o.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(s,o.targetId).next(c=>{a=c})}).next(()=>r.Cs.getDocumentsMatchingQuery(s,e,t?i:lt.min(),t?a:kt())).next(o=>(mV(r,rF(e),o),{documents:o,qs:a})))}function mV(n,e,t){let r=n.xs.get(e)||lt.min();t.forEach((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),n.xs.set(e,r)}class tI{constructor(){this.activeTargetIds=cF()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class yV{constructor(){this.Fo=new tI,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,r){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new tI,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vV{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nI="ConnectivityMonitor";class rI{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){Ge(nI,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){Ge(nI,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Vg=null;function rw(){return Vg===null?Vg=function(){return 268435456+Math.round(2147483648*Math.random())}():Vg++,"0x"+Vg.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wx="RestConnection",xV={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class wV{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.Ko=this.databaseId.database===Nm?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,t,r,i,a){const s=rw(),o=this.Go(e,t.toUriEncodedString());Ge(Wx,`Sending RPC '${e}' ${s}:`,o,r);const c={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(c,i,a);const{host:d}=new URL(o),f=cf(d);return this.jo(e,o,c,r,f).then(p=>(Ge(Wx,`Received RPC '${e}' ${s}: `,p),p),p=>{throw kl(Wx,`RPC '${e}' ${s} failed with error: `,p,"url: ",o,"request:",r),p})}Jo(e,t,r,i,a,s){return this.Wo(e,t,r,i,a)}zo(e,t,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ff}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,a)=>e[a]=i),r&&r.headers.forEach((i,a)=>e[a]=i)}Go(e,t){const r=xV[e];return`${this.$o}/v1/${t}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bV{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ui="WebChannelConnection";class _V extends wV{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,r,i,a){const s=rw();return new Promise((o,c)=>{const d=new g4;d.setWithCredentials(!0),d.listenOnce(m4.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case hm.NO_ERROR:const p=d.getResponseJson();Ge(ui,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(p)),o(p);break;case hm.TIMEOUT:Ge(ui,`RPC '${e}' ${s} timed out`),c(new Ue(Ee.DEADLINE_EXCEEDED,"Request time out"));break;case hm.HTTP_ERROR:const g=d.getStatus();if(Ge(ui,`RPC '${e}' ${s} failed with status:`,g,"response text:",d.getResponseText()),g>0){let m=d.getResponseJson();Array.isArray(m)&&(m=m[0]);const x=m==null?void 0:m.error;if(x&&x.status&&x.message){const b=function(E){const C=E.toLowerCase().replace(/_/g,"-");return Object.values(Ee).indexOf(C)>=0?C:Ee.UNKNOWN}(x.status);c(new Ue(b,x.message))}else c(new Ue(Ee.UNKNOWN,"Server responded with status "+d.getStatus()))}else c(new Ue(Ee.UNAVAILABLE,"Connection failed."));break;default:tt(9055,{c_:e,streamId:s,l_:d.getLastErrorCode(),h_:d.getLastError()})}}finally{Ge(ui,`RPC '${e}' ${s} completed.`)}});const f=JSON.stringify(i);Ge(ui,`RPC '${e}' ${s} sending request:`,i),d.send(t,"POST",f,r,15)})}P_(e,t,r){const i=rw(),a=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=x4(),o=v4(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(c.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(c.useFetchStreams=!0),this.zo(c.initMessageHeaders,t,r),c.encodeInitMessageHeaders=!0;const f=a.join("");Ge(ui,`Creating RPC '${e}' stream ${i}: ${f}`,c);const p=s.createWebChannel(f,c);this.T_(p);let g=!1,m=!1;const x=new bV({Ho:A=>{m?Ge(ui,`Not sending because RPC '${e}' stream ${i} is closed:`,A):(g||(Ge(ui,`Opening RPC '${e}' stream ${i} transport.`),p.open(),g=!0),Ge(ui,`RPC '${e}' stream ${i} sending:`,A),p.send(A))},Yo:()=>p.close()}),b=(A,E,C)=>{A.listen(E,T=>{try{C(T)}catch(D){setTimeout(()=>{throw D},0)}})};return b(p,$h.EventType.OPEN,()=>{m||(Ge(ui,`RPC '${e}' stream ${i} transport opened.`),x.s_())}),b(p,$h.EventType.CLOSE,()=>{m||(m=!0,Ge(ui,`RPC '${e}' stream ${i} transport closed`),x.__(),this.I_(p))}),b(p,$h.EventType.ERROR,A=>{m||(m=!0,kl(ui,`RPC '${e}' stream ${i} transport errored. Name:`,A.name,"Message:",A.message),x.__(new Ue(Ee.UNAVAILABLE,"The operation could not be completed")))}),b(p,$h.EventType.MESSAGE,A=>{var E;if(!m){const C=A.data[0];Ht(!!C,16349);const T=C,D=(T==null?void 0:T.error)||((E=T[0])===null||E===void 0?void 0:E.error);if(D){Ge(ui,`RPC '${e}' stream ${i} received error:`,D);const k=D.status;let B=function(R){const F=pr[R];if(F!==void 0)return tM(F)}(k),O=D.message;B===void 0&&(B=Ee.INTERNAL,O="Unknown error status: "+k+" with message "+D.message),m=!0,x.__(new Ue(B,O)),p.close()}else Ge(ui,`RPC '${e}' stream ${i} received:`,C),x.a_(C)}}),b(o,y4.STAT_EVENT,A=>{A.stat===W2.PROXY?Ge(ui,`RPC '${e}' stream ${i} detected buffering proxy`):A.stat===W2.NOPROXY&&Ge(ui,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{x.o_()},0),x}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(t=>t===e)}}function Yx(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W1(n){return new CF(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ib{constructor(e,t,r=1e3,i=1.5,a=6e4){this.Fi=e,this.timerId=t,this.d_=r,this.E_=i,this.A_=a,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const t=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),i=Math.max(0,t-r);i>0&&Ge("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,i,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iI="PersistentStream";class mM{constructor(e,t,r,i,a,s,o,c){this.Fi=e,this.w_=r,this.S_=i,this.connection=a,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=c,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new Ib(e,t)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():t&&t.code===Ee.RESOURCE_EXHAUSTED?(Eo(t.toString()),Eo("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===Ee.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(t)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.b_===t&&this.W_(r,i)},r=>{e(()=>{const i=new Ue(Ee.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(i)})})}W_(e,t){const r=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(i=>{r(()=>this.G_(i))}),this.stream.onMessage(i=>{r(()=>++this.C_==1?this.j_(i):this.onNext(i))})}O_(){this.state=5,this.F_.g_(async()=>{this.state=0,this.start()})}G_(e){return Ge(iI,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget(()=>this.b_===e?t():(Ge(iI,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class AV extends mM{constructor(e,t,r,i,a,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,s),this.serializer=a}z_(e,t){return this.connection.P_("Listen",e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const t=RF(this.serializer,e),r=function(a){if(!("targetChange"in a))return lt.min();const s=a.targetChange;return s.targetIds&&s.targetIds.length?lt.min():s.readTime?ia(s.readTime):lt.min()}(e);return this.listener.J_(t,r)}H_(e){const t={};t.database=tw(this.serializer),t.addTarget=function(a,s){let o;const c=s.target;if(o=Q2(c)?{documents:OF(a,c)}:{query:PF(a,c).Vt},o.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){o.resumeToken=iM(a,s.resumeToken);const d=J2(a,s.expectedCount);d!==null&&(o.expectedCount=d)}else if(s.snapshotVersion.compareTo(lt.min())>0){o.readTime=jm(a,s.snapshotVersion.toTimestamp());const d=J2(a,s.expectedCount);d!==null&&(o.expectedCount=d)}return o}(this.serializer,e);const r=NF(this.serializer,e);r&&(t.labels=r),this.k_(t)}Y_(e){const t={};t.database=tw(this.serializer),t.removeTarget=e,this.k_(t)}}class EV extends mM{constructor(e,t,r,i,a,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,s),this.serializer=a}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_("Write",e,t)}j_(e){return Ht(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ht(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){Ht(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const t=MF(e.writeResults,e.commitTime),r=ia(e.commitTime);return this.listener.ta(r,t)}na(){const e={};e.database=tw(this.serializer),this.k_(e)}X_(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>lM(this.serializer,r))};this.k_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SV{}class CV extends SV{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ra=!1}ia(){if(this.ra)throw new Ue(Ee.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,r,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,s])=>this.connection.Wo(e,ew(t,r),i,a,s)).catch(a=>{throw a.name==="FirebaseError"?(a.code===Ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Ue(Ee.UNKNOWN,a.toString())})}Jo(e,t,r,i,a){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Jo(e,ew(t,r),i,s,o,a)).catch(s=>{throw s.name==="FirebaseError"?(s.code===Ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Ue(Ee.UNKNOWN,s.toString())})}terminate(){this.ra=!0,this.connection.terminate()}}class TV{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(Eo(t),this._a=!1):Ge("OnlineStateTracker",t)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eu="RemoteStore";class IV{constructor(e,t,r,i,a){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=a,this.Ea.xo(s=>{r.enqueueAndForget(async()=>{lu(this)&&(Ge(eu,"Restarting streams for network reachability change."),await async function(c){const d=gt(c);d.Ia.add(4),await Y0(d),d.Aa.set("Unknown"),d.Ia.delete(4),await Y1(d)}(this))})}),this.Aa=new TV(r,i)}}async function Y1(n){if(lu(n))for(const e of n.da)await e(!0)}async function Y0(n){for(const e of n.da)await e(!1)}function yM(n,e){const t=gt(n);t.Ta.has(e.targetId)||(t.Ta.set(e.targetId,e),Ob(t)?Mb(t):gf(t).x_()&&Rb(t,e))}function Db(n,e){const t=gt(n),r=gf(t);t.Ta.delete(e),r.x_()&&vM(t,e),t.Ta.size===0&&(r.x_()?r.B_():lu(t)&&t.Aa.set("Unknown"))}function Rb(n,e){if(n.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(lt.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}gf(n).H_(e)}function vM(n,e){n.Ra.$e(e),gf(n).Y_(e)}function Mb(n){n.Ra=new _F({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.Ta.get(e)||null,lt:()=>n.datastore.serializer.databaseId}),gf(n).start(),n.Aa.aa()}function Ob(n){return lu(n)&&!gf(n).M_()&&n.Ta.size>0}function lu(n){return gt(n).Ia.size===0}function xM(n){n.Ra=void 0}async function DV(n){n.Aa.set("Online")}async function RV(n){n.Ta.forEach((e,t)=>{Rb(n,e)})}async function MV(n,e){xM(n),Ob(n)?(n.Aa.la(e),Mb(n)):n.Aa.set("Unknown")}async function OV(n,e,t){if(n.Aa.set("Online"),e instanceof rM&&e.state===2&&e.cause)try{await async function(i,a){const s=a.cause;for(const o of a.targetIds)i.Ta.has(o)&&(await i.remoteSyncer.rejectListen(o,s),i.Ta.delete(o),i.Ra.removeTarget(o))}(n,e)}catch(r){Ge(eu,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await zm(n,r)}else if(e instanceof ym?n.Ra.Ye(e):e instanceof nM?n.Ra.it(e):n.Ra.et(e),!t.isEqual(lt.min()))try{const r=await gM(n.localStore);t.compareTo(r)>=0&&await function(a,s){const o=a.Ra.Pt(s);return o.targetChanges.forEach((c,d)=>{if(c.resumeToken.approximateByteSize()>0){const f=a.Ta.get(d);f&&a.Ta.set(d,f.withResumeToken(c.resumeToken,s))}}),o.targetMismatches.forEach((c,d)=>{const f=a.Ta.get(c);if(!f)return;a.Ta.set(c,f.withResumeToken(li.EMPTY_BYTE_STRING,f.snapshotVersion)),vM(a,c);const p=new _l(f.target,c,d,f.sequenceNumber);Rb(a,p)}),a.remoteSyncer.applyRemoteEvent(o)}(n,t)}catch(r){Ge(eu,"Failed to raise snapshot:",r),await zm(n,r)}}async function zm(n,e,t){if(!pf(e))throw e;n.Ia.add(1),await Y0(n),n.Aa.set("Offline"),t||(t=()=>gM(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{Ge(eu,"Retrying IndexedDB access"),await t(),n.Ia.delete(1),await Y1(n)})}function wM(n,e){return e().catch(t=>zm(n,t,e))}async function q1(n){const e=gt(n),t=Vl(e);let r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:gb;for(;PV(e);)try{const i=await pV(e.localStore,r);if(i===null){e.Pa.length===0&&t.B_();break}r=i.batchId,kV(e,i)}catch(i){await zm(e,i)}bM(e)&&_M(e)}function PV(n){return lu(n)&&n.Pa.length<10}function kV(n,e){n.Pa.push(e);const t=Vl(n);t.x_()&&t.Z_&&t.X_(e.mutations)}function bM(n){return lu(n)&&!Vl(n).M_()&&n.Pa.length>0}function _M(n){Vl(n).start()}async function NV(n){Vl(n).na()}async function LV(n){const e=Vl(n);for(const t of n.Pa)e.X_(t.mutations)}async function BV(n,e,t){const r=n.Pa.shift(),i=bb.from(r,e,t);await wM(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),await q1(n)}async function FV(n,e){e&&Vl(n).Z_&&await async function(r,i){if(function(s){return eM(s)&&s!==Ee.ABORTED}(i.code)){const a=r.Pa.shift();Vl(r).N_(),await wM(r,()=>r.remoteSyncer.rejectFailedWrite(a.batchId,i)),await q1(r)}}(n,e),bM(n)&&_M(n)}async function aI(n,e){const t=gt(n);t.asyncQueue.verifyOperationInProgress(),Ge(eu,"RemoteStore received new credentials");const r=lu(t);t.Ia.add(3),await Y0(t),r&&t.Aa.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ia.delete(3),await Y1(t)}async function VV(n,e){const t=gt(n);e?(t.Ia.delete(2),await Y1(t)):e||(t.Ia.add(2),await Y0(t),t.Aa.set("Unknown"))}function gf(n){return n.Va||(n.Va=function(t,r,i){const a=gt(t);return a.ia(),new AV(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)}(n.datastore,n.asyncQueue,{Zo:DV.bind(null,n),e_:RV.bind(null,n),n_:MV.bind(null,n),J_:OV.bind(null,n)}),n.da.push(async e=>{e?(n.Va.N_(),Ob(n)?Mb(n):n.Aa.set("Unknown")):(await n.Va.stop(),xM(n))})),n.Va}function Vl(n){return n.ma||(n.ma=function(t,r,i){const a=gt(t);return a.ia(),new EV(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)}(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),e_:NV.bind(null,n),n_:FV.bind(null,n),ea:LV.bind(null,n),ta:BV.bind(null,n)}),n.da.push(async e=>{e?(n.ma.N_(),await q1(n)):(await n.ma.stop(),n.Pa.length>0&&(Ge(eu,`Stopping write stream with ${n.Pa.length} pending writes`),n.Pa=[]))})),n.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pb{constructor(e,t,r,i,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new Rs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,a){const s=Date.now()+r,o=new Pb(e,t,s,i,a);return o.start(r),o}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ue(Ee.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function kb(n,e){if(Eo("AsyncQueue",`${e}: ${n}`),pf(n))return new Ue(Ee.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kd{static emptySet(e){return new kd(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||Je.comparator(t.key,r.key):(t,r)=>Je.comparator(t.key,r.key),this.keyedMap=Gh(),this.sortedSet=new Gn(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof kd)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new kd;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sI{constructor(){this.fa=new Gn(Je.comparator)}track(e){const t=e.doc.key,r=this.fa.get(t);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(t,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(t):e.type===1&&r.type===2?this.fa=this.fa.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):tt(63341,{At:e,ga:r}):this.fa=this.fa.insert(t,e)}pa(){const e=[];return this.fa.inorderTraversal((t,r)=>{e.push(r)}),e}}class qd{constructor(e,t,r,i,a,s,o,c,d){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=c,this.hasCachedResults=d}static fromInitialDocuments(e,t,r,i,a){const s=[];return t.forEach(o=>{s.push({type:0,doc:o})}),new qd(e,t,kd.emptySet(t),s,r,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&U1(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jV{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}}class UV{constructor(){this.queries=oI(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(t,r){const i=gt(t),a=i.queries;i.queries=oI(),a.forEach((s,o)=>{for(const c of o.wa)c.onError(r)})})(this,new Ue(Ee.ABORTED,"Firestore shutting down"))}}function oI(){return new ou(n=>U4(n),U1)}async function Nb(n,e){const t=gt(n);let r=3;const i=e.query;let a=t.queries.get(i);a?!a.Sa()&&e.ba()&&(r=2):(a=new jV,r=e.ba()?0:1);try{switch(r){case 0:a.ya=await t.onListen(i,!0);break;case 1:a.ya=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(s){const o=kb(s,`Initialization of query '${gd(e.query)}' failed`);return void e.onError(o)}t.queries.set(i,a),a.wa.push(e),e.va(t.onlineState),a.ya&&e.Ca(a.ya)&&Bb(t)}async function Lb(n,e){const t=gt(n),r=e.query;let i=3;const a=t.queries.get(r);if(a){const s=a.wa.indexOf(e);s>=0&&(a.wa.splice(s,1),a.wa.length===0?i=e.ba()?0:1:!a.Sa()&&e.ba()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function HV(n,e){const t=gt(n);let r=!1;for(const i of e){const a=i.query,s=t.queries.get(a);if(s){for(const o of s.wa)o.Ca(i)&&(r=!0);s.ya=i}}r&&Bb(t)}function zV(n,e,t){const r=gt(n),i=r.queries.get(e);if(i)for(const a of i.wa)a.onError(t);r.queries.delete(e)}function Bb(n){n.Da.forEach(e=>{e.next()})}var iw,lI;(lI=iw||(iw={})).Fa="default",lI.Cache="cache";class Fb{constructor(e,t,r){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new qd(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){if(!e.fromCache||!this.ba())return!0;const r=t!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}La(e){e=qd.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==iw.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AM{constructor(e){this.key=e}}class EM{constructor(e){this.key=e}}class $V{constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=kt(),this.mutatedKeys=kt(),this.Xa=H4(e),this.eu=new kd(this.Xa)}get tu(){return this.Ha}nu(e,t){const r=t?t.ru:new sI,i=t?t.eu:this.eu;let a=t?t.mutatedKeys:this.mutatedKeys,s=i,o=!1;const c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,d=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((f,p)=>{const g=i.get(f),m=H1(this.query,p)?p:null,x=!!g&&this.mutatedKeys.has(g.key),b=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let A=!1;g&&m?g.data.isEqual(m.data)?x!==b&&(r.track({type:3,doc:m}),A=!0):this.iu(g,m)||(r.track({type:2,doc:m}),A=!0,(c&&this.Xa(m,c)>0||d&&this.Xa(m,d)<0)&&(o=!0)):!g&&m?(r.track({type:0,doc:m}),A=!0):g&&!m&&(r.track({type:1,doc:g}),A=!0,(c||d)&&(o=!0)),A&&(m?(s=s.add(m),a=b?a.add(f):a.delete(f)):(s=s.delete(f),a=a.delete(f)))}),this.query.limit!==null)for(;s.size>this.query.limit;){const f=this.query.limitType==="F"?s.last():s.first();s=s.delete(f.key),a=a.delete(f.key),r.track({type:1,doc:f})}return{eu:s,ru:r,Ds:o,mutatedKeys:a}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const a=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const s=e.ru.pa();s.sort((f,p)=>function(m,x){const b=A=>{switch(A){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return tt(20277,{At:A})}};return b(m)-b(x)}(f.type,p.type)||this.Xa(f.doc,p.doc)),this.su(r),i=i!=null&&i;const o=t&&!i?this.ou():[],c=this.Za.size===0&&this.current&&!i?1:0,d=c!==this.Ya;return this.Ya=c,s.length!==0||d?{snapshot:new qd(this.query,e.eu,a,s,e.mutatedKeys,c===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:o}:{_u:o}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new sI,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(t=>this.Ha=this.Ha.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ha=this.Ha.delete(t)),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=kt(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});const t=[];return e.forEach(r=>{this.Za.has(r)||t.push(new EM(r))}),this.Za.forEach(r=>{e.has(r)||t.push(new AM(r))}),t}uu(e){this.Ha=e.qs,this.Za=kt();const t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return qd.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const Vb="SyncEngine";class GV{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class WV{constructor(e){this.key=e,this.lu=!1}}class YV{constructor(e,t,r,i,a,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=s,this.hu={},this.Pu=new ou(o=>U4(o),U1),this.Tu=new Map,this.Iu=new Set,this.du=new Gn(Je.comparator),this.Eu=new Map,this.Au=new Eb,this.Ru={},this.Vu=new Map,this.mu=Yd.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function qV(n,e,t=!0){const r=RM(n);let i;const a=r.Pu.get(e);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),i=a.view.cu()):i=await SM(r,e,t,!0),i}async function XV(n,e){const t=RM(n);await SM(t,e,!0,!1)}async function SM(n,e,t,r){const i=await gV(n.localStore,Ms(e)),a=i.targetId,s=n.sharedClientState.addLocalQueryTarget(a,t);let o;return r&&(o=await KV(n,e,a,s==="current",i.resumeToken)),n.isPrimaryClient&&t&&yM(n.remoteStore,i),o}async function KV(n,e,t,r,i){n.gu=(p,g,m)=>async function(b,A,E,C){let T=A.view.nu(E);T.Ds&&(T=await eI(b.localStore,A.query,!1).then(({documents:O})=>A.view.nu(O,T)));const D=C&&C.targetChanges.get(A.targetId),k=C&&C.targetMismatches.get(A.targetId)!=null,B=A.view.applyChanges(T,b.isPrimaryClient,D,k);return uI(b,A.targetId,B._u),B.snapshot}(n,p,g,m);const a=await eI(n.localStore,e,!0),s=new $V(e,a.qs),o=s.nu(a.documents),c=W0.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),d=s.applyChanges(o,n.isPrimaryClient,c);uI(n,t,d._u);const f=new GV(e,t,s);return n.Pu.set(e,f),n.Tu.has(t)?n.Tu.get(t).push(e):n.Tu.set(t,[e]),d.snapshot}async function QV(n,e,t){const r=gt(n),i=r.Pu.get(e),a=r.Tu.get(i.targetId);if(a.length>1)return r.Tu.set(i.targetId,a.filter(s=>!U1(s,e))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await nw(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&Db(r.remoteStore,i.targetId),aw(r,i.targetId)}).catch(hf)):(aw(r,i.targetId),await nw(r.localStore,i.targetId,!0))}async function ZV(n,e){const t=gt(n),r=t.Pu.get(e),i=t.Tu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Db(t.remoteStore,r.targetId))}async function JV(n,e,t){const r=sj(n);try{const i=await function(s,o){const c=gt(s),d=Rn.now(),f=o.reduce((m,x)=>m.add(x.key),kt());let p,g;return c.persistence.runTransaction("Locally write mutations","readwrite",m=>{let x=So(),b=kt();return c.Os.getEntries(m,f).next(A=>{x=A,x.forEach((E,C)=>{C.isValidDocument()||(b=b.add(E))})}).next(()=>c.localDocuments.getOverlayedDocuments(m,x)).next(A=>{p=A;const E=[];for(const C of o){const T=yF(C,p.get(C.key).overlayedDocument);T!=null&&E.push(new Wl(C.key,T,P4(T.value.mapValue),mr.exists(!0)))}return c.mutationQueue.addMutationBatch(m,d,E,o)}).next(A=>{g=A;const E=A.applyToLocalDocumentSet(p,b);return c.documentOverlayCache.saveOverlays(m,A.batchId,E)})}).then(()=>({batchId:g.batchId,changes:$4(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,o,c){let d=s.Ru[s.currentUser.toKey()];d||(d=new Gn(St)),d=d.insert(o,c),s.Ru[s.currentUser.toKey()]=d}(r,i.batchId,t),await q0(r,i.changes),await q1(r.remoteStore)}catch(i){const a=kb(i,"Failed to persist write");t.reject(a)}}async function CM(n,e){const t=gt(n);try{const r=await fV(t.localStore,e);e.targetChanges.forEach((i,a)=>{const s=t.Eu.get(a);s&&(Ht(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?s.lu=!0:i.modifiedDocuments.size>0?Ht(s.lu,14607):i.removedDocuments.size>0&&(Ht(s.lu,42227),s.lu=!1))}),await q0(t,r,e)}catch(r){await hf(r)}}function cI(n,e,t){const r=gt(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const i=[];r.Pu.forEach((a,s)=>{const o=s.view.va(e);o.snapshot&&i.push(o.snapshot)}),function(s,o){const c=gt(s);c.onlineState=o;let d=!1;c.queries.forEach((f,p)=>{for(const g of p.wa)g.va(o)&&(d=!0)}),d&&Bb(c)}(r.eventManager,e),i.length&&r.hu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function ej(n,e,t){const r=gt(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Eu.get(e),a=i&&i.key;if(a){let s=new Gn(Je.comparator);s=s.insert(a,Hr.newNoDocument(a,lt.min()));const o=kt().add(a),c=new G1(lt.min(),new Map,new Gn(St),s,o);await CM(r,c),r.du=r.du.remove(a),r.Eu.delete(e),jb(r)}else await nw(r.localStore,e,!1).then(()=>aw(r,e,t)).catch(hf)}async function tj(n,e){const t=gt(n),r=e.batch.batchId;try{const i=await dV(t.localStore,e);IM(t,r,null),TM(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await q0(t,i)}catch(i){await hf(i)}}async function nj(n,e,t){const r=gt(n);try{const i=await function(s,o){const c=gt(s);return c.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let f;return c.mutationQueue.lookupMutationBatch(d,o).next(p=>(Ht(p!==null,37113),f=p.keys(),c.mutationQueue.removeMutationBatch(d,p))).next(()=>c.mutationQueue.performConsistencyCheck(d)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(d,f,o)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,f)).next(()=>c.localDocuments.getDocuments(d,f))})}(r.localStore,e);IM(r,e,t),TM(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await q0(r,i)}catch(i){await hf(i)}}function TM(n,e){(n.Vu.get(e)||[]).forEach(t=>{t.resolve()}),n.Vu.delete(e)}function IM(n,e,t){const r=gt(n);let i=r.Ru[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(t?a.reject(t):a.resolve(),i=i.remove(e)),r.Ru[r.currentUser.toKey()]=i}}function aw(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Tu.get(e))n.Pu.delete(r),t&&n.hu.pu(r,t);n.Tu.delete(e),n.isPrimaryClient&&n.Au.zr(e).forEach(r=>{n.Au.containsKey(r)||DM(n,r)})}function DM(n,e){n.Iu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(Db(n.remoteStore,t),n.du=n.du.remove(e),n.Eu.delete(t),jb(n))}function uI(n,e,t){for(const r of t)r instanceof AM?(n.Au.addReference(r.key,e),rj(n,r)):r instanceof EM?(Ge(Vb,"Document no longer in limbo: "+r.key),n.Au.removeReference(r.key,e),n.Au.containsKey(r.key)||DM(n,r.key)):tt(19791,{yu:r})}function rj(n,e){const t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Iu.has(r)||(Ge(Vb,"New document in limbo: "+t),n.Iu.add(r),jb(n))}function jb(n){for(;n.Iu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Iu.values().next().value;n.Iu.delete(e);const t=new Je(un.fromString(e)),r=n.mu.next();n.Eu.set(r,new WV(t)),n.du=n.du.insert(t,r),yM(n.remoteStore,new _l(Ms(j1(t.path)),r,"TargetPurposeLimboResolution",F1.ue))}}async function q0(n,e,t){const r=gt(n),i=[],a=[],s=[];r.Pu.isEmpty()||(r.Pu.forEach((o,c)=>{s.push(r.gu(c,e,t).then(d=>{var f;if((d||t)&&r.isPrimaryClient){const p=d?!d.fromCache:(f=t==null?void 0:t.targetChanges.get(c.targetId))===null||f===void 0?void 0:f.current;r.sharedClientState.updateQueryState(c.targetId,p?"current":"not-current")}if(d){i.push(d);const p=Cb.Es(c.targetId,d);a.push(p)}}))}),await Promise.all(s),r.hu.J_(i),await async function(c,d){const f=gt(c);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>De.forEach(d,g=>De.forEach(g.Is,m=>f.persistence.referenceDelegate.addReference(p,g.targetId,m)).next(()=>De.forEach(g.ds,m=>f.persistence.referenceDelegate.removeReference(p,g.targetId,m)))))}catch(p){if(!pf(p))throw p;Ge(Tb,"Failed to update sequence numbers: "+p)}for(const p of d){const g=p.targetId;if(!p.fromCache){const m=f.Fs.get(g),x=m.snapshotVersion,b=m.withLastLimboFreeSnapshotVersion(x);f.Fs=f.Fs.insert(g,b)}}}(r.localStore,a))}async function ij(n,e){const t=gt(n);if(!t.currentUser.isEqual(e)){Ge(Vb,"User change. New user:",e.toKey());const r=await pM(t.localStore,e);t.currentUser=e,function(a,s){a.Vu.forEach(o=>{o.forEach(c=>{c.reject(new Ue(Ee.CANCELLED,s))})}),a.Vu.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await q0(t,r.Bs)}}function aj(n,e){const t=gt(n),r=t.Eu.get(e);if(r&&r.lu)return kt().add(r.key);{let i=kt();const a=t.Tu.get(e);if(!a)return i;for(const s of a){const o=t.Pu.get(s);i=i.unionWith(o.view.tu)}return i}}function RM(n){const e=gt(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=CM.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=aj.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=ej.bind(null,e),e.hu.J_=HV.bind(null,e.eventManager),e.hu.pu=zV.bind(null,e.eventManager),e}function sj(n){const e=gt(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=tj.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=nj.bind(null,e),e}class $m{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=W1(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,t){return null}Fu(e,t){return null}vu(e){return uV(this.persistence,new oV,e.initialUser,this.serializer)}Du(e){return new hM(Sb.Vi,this.serializer)}bu(e){return new yV}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}$m.provider={build:()=>new $m};class oj extends $m{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){Ht(this.persistence.referenceDelegate instanceof Hm,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new WF(r,e.asyncQueue,t)}Du(e){const t=this.cacheSizeBytes!==void 0?Vi.withCacheSize(this.cacheSizeBytes):Vi.DEFAULT;return new hM(r=>Hm.Vi(r,t),this.serializer)}}class sw{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>cI(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=ij.bind(null,this.syncEngine),await VV(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new UV}()}createDatastore(e){const t=W1(e.databaseInfo.databaseId),r=function(a){return new _V(a)}(e.databaseInfo);return function(a,s,o,c){return new CV(a,s,o,c)}(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return function(r,i,a,s,o){return new IV(r,i,a,s,o)}(this.localStore,this.datastore,e.asyncQueue,t=>cI(this.syncEngine,t,0),function(){return rI.C()?new rI:new vV}())}createSyncEngine(e,t){return function(i,a,s,o,c,d,f){const p=new YV(i,a,s,o,c,d);return f&&(p.fu=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(i){const a=gt(i);Ge(eu,"RemoteStore shutting down."),a.Ia.add(5),await Y0(a),a.Ea.shutdown(),a.Aa.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}sw.provider={build:()=>new sw};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ub{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):Eo("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lj{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new Ue(Ee.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await async function(i,a){const s=gt(i),o={documents:a.map(p=>Um(s.serializer,p))},c=await s.Jo("BatchGetDocuments",s.serializer.databaseId,un.emptyPath(),o,a.length),d=new Map;c.forEach(p=>{const g=DF(s.serializer,p);d.set(g.key.toString(),g)});const f=[];return a.forEach(p=>{const g=d.get(p.toString());Ht(!!g,55234,{key:p}),f.push(g)}),f}(this.datastore,e);return t.forEach(r=>this.recordVersion(r)),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new G0(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach(t=>{e.delete(t.key.toString())}),e.forEach((t,r)=>{const i=Je.fromPath(r);this.mutations.push(new J4(i,this.precondition(i)))}),await async function(r,i){const a=gt(r),s={writes:i.map(o=>lM(a.serializer,o))};await a.Wo("Commit",a.serializer.databaseId,un.emptyPath(),s)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw tt(50498,{Wu:e.constructor.name});t=lt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Ue(Ee.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(lt.min())?mr.exists(!1):mr.updateTime(t):mr.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(lt.min()))throw new Ue(Ee.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return mr.updateTime(t)}return mr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cj{constructor(e,t,r,i,a){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=a,this.Gu=r.maxAttempts,this.F_=new Ib(this.asyncQueue,"transaction_retry")}zu(){this.Gu-=1,this.ju()}ju(){this.F_.g_(async()=>{const e=new lj(this.datastore),t=this.Ju(e);t&&t.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.Hu(i)}))}).catch(r=>{this.Hu(r)})})}Ju(e){try{const t=this.updateFunction(e);return!z0(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Hu(e){this.Gu>0&&this.Yu(e)?(this.Gu-=1,this.asyncQueue.enqueueAndForget(()=>(this.ju(),Promise.resolve()))):this.deferred.reject(e)}Yu(e){if(e.name==="FirebaseError"){const t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!eM(t)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jl="FirestoreClient";class uj{constructor(e,t,r,i,a){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=pi.UNAUTHENTICATED,this.clientId=hb.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(r,async s=>{Ge(jl,"Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(Ge(jl,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Rs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=kb(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function qx(n,e){n.asyncQueue.verifyOperationInProgress(),Ge(jl,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(async i=>{r.isEqual(i)||(await pM(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>{kl("Terminating Firestore due to IndexedDb database deletion"),n.terminate().then(()=>{Ge("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(i=>{kl("Terminating Firestore due to IndexedDb database deletion failed",i)})}),n._offlineComponents=e}async function dI(n,e){n.asyncQueue.verifyOperationInProgress();const t=await dj(n);Ge(jl,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>aI(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>aI(e.remoteStore,i)),n._onlineComponents=e}async function dj(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Ge(jl,"Using user provided OfflineComponentProvider");try{await qx(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(i){return i.name==="FirebaseError"?i.code===Ee.FAILED_PRECONDITION||i.code===Ee.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;kl("Error using user provided cache. Falling back to memory cache: "+t),await qx(n,new $m)}}else Ge(jl,"Using default OfflineComponentProvider"),await qx(n,new oj(void 0));return n._offlineComponents}async function Hb(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Ge(jl,"Using user provided OnlineComponentProvider"),await dI(n,n._uninitializedComponentsProvider._online)):(Ge(jl,"Using default OnlineComponentProvider"),await dI(n,new sw))),n._onlineComponents}function fj(n){return Hb(n).then(e=>e.syncEngine)}function hj(n){return Hb(n).then(e=>e.datastore)}async function Gm(n){const e=await Hb(n),t=e.eventManager;return t.onListen=qV.bind(null,e.syncEngine),t.onUnlisten=QV.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=XV.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=ZV.bind(null,e.syncEngine),t}function pj(n,e,t={}){const r=new Rs;return n.asyncQueue.enqueueAndForget(async()=>function(a,s,o,c,d){const f=new Ub({next:g=>{f.Ou(),s.enqueueAndForget(()=>Lb(a,p));const m=g.docs.has(o);!m&&g.fromCache?d.reject(new Ue(Ee.UNAVAILABLE,"Failed to get document because the client is offline.")):m&&g.fromCache&&c&&c.source==="server"?d.reject(new Ue(Ee.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(g)},error:g=>d.reject(g)}),p=new Fb(j1(o.path),f,{includeMetadataChanges:!0,ka:!0});return Nb(a,p)}(await Gm(n),n.asyncQueue,e,t,r)),r.promise}function gj(n,e,t={}){const r=new Rs;return n.asyncQueue.enqueueAndForget(async()=>function(a,s,o,c,d){const f=new Ub({next:g=>{f.Ou(),s.enqueueAndForget(()=>Lb(a,p)),g.fromCache&&c.source==="server"?d.reject(new Ue(Ee.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(g)},error:g=>d.reject(g)}),p=new Fb(o,f,{includeMetadataChanges:!0,ka:!0});return Nb(a,p)}(await Gm(n),n.asyncQueue,e,t,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MM(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fI=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OM="firestore.googleapis.com",hI=!0;class pI{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Ue(Ee.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=OM,this.ssl=hI}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:hI;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=fM;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<$F)throw new Ue(Ee.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}DB("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=MM((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new Ue(Ee.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new Ue(Ee.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new Ue(Ee.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class X0{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new pI({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ue(Ee.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ue(Ee.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new pI(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new wB;switch(r.type){case"firstParty":return new EB(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Ue(Ee.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=fI.get(t);r&&(Ge("ComponentProvider","Removing Datastore"),fI.delete(t),r.terminate())}(this),Promise.resolve()}}function mj(n,e,t,r={}){var i;n=si(n,X0);const a=cf(e),s=n._getSettings(),o=Object.assign(Object.assign({},s),{emulatorOptions:n._getEmulatorOptions()}),c=`${e}:${t}`;a&&(CR(`https://${c}`),TR("Firestore",!0)),s.host!==OM&&s.host!==c&&kl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const d=Object.assign(Object.assign({},s),{host:c,ssl:a,emulatorOptions:r});if(!Xc(d,o)&&(n._setSettings(d),r.mockUserToken)){let f,p;if(typeof r.mockUserToken=="string")f=r.mockUserToken,p=pi.MOCK_USER;else{f=M5(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);const g=r.mockUserToken.sub||r.mockUserToken.user_id;if(!g)throw new Ue(Ee.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new pi(g)}n._authCredentials=new bB(new b4(f,p))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hs{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Hs(this.firestore,e,this._query)}}class zn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Rl(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new zn(this.firestore,e,this._key)}toJSON(){return{type:zn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(H0(t,zn._jsonSchema))return new zn(e,r||null,new Je(un.fromString(t.referencePath)))}}zn._jsonSchemaVersion="firestore/documentReference/1.0",zn._jsonSchema={type:yr("string",zn._jsonSchemaVersion),referencePath:yr("string")};class Rl extends Hs{constructor(e,t,r){super(e,t,j1(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new zn(this.firestore,null,new Je(e))}withConverter(e){return new Rl(this.firestore,e,this._path)}}function $n(n,e,...t){if(n=ar(n),pb("collection","path",e),n instanceof X0){const r=un.fromString(e,...t);return TT(r),new Rl(n,null,r)}{if(!(n instanceof zn||n instanceof Rl))throw new Ue(Ee.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(un.fromString(e,...t));return TT(r),new Rl(n.firestore,null,r)}}function Al(n,e){if(n=si(n,X0),pb("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Ue(Ee.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Hs(n,null,function(r){return new su(un.emptyPath(),r)}(e))}function ji(n,e,...t){if(n=ar(n),arguments.length===1&&(e=hb.newId()),pb("doc","path",e),n instanceof X0){const r=un.fromString(e,...t);return CT(r),new zn(n,null,new Je(r))}{if(!(n instanceof zn||n instanceof Rl))throw new Ue(Ee.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(un.fromString(e,...t));return CT(r),new zn(n.firestore,n instanceof Rl?n.converter:null,new Je(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gI="AsyncQueue";class mI{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new Ib(this,"async_queue_retry"),this.oc=()=>{const r=Yx();r&&Ge(gI,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;const t=Yx();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const t=Yx();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});const t=new Rs;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!pf(e))throw e;Ge(gI,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(e){const t=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,Eo("INTERNAL UNHANDLED ERROR: ",yI(r)),r}).then(r=>(this.nc=!1,r))));return this._c=t,t}enqueueAfterDelay(e,t,r){this.ac(),this.sc.indexOf(e)>-1&&(t=0);const i=Pb.createAndSchedule(this,e,t,r,a=>this.lc(a));return this.ec.push(i),i}ac(){this.tc&&tt(47125,{hc:yI(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.ec)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){const t=this.ec.indexOf(e);this.ec.splice(t,1)}}function yI(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vI(n){return function(t,r){if(typeof t!="object"||t===null)return!1;const i=t;for(const a of r)if(a in i&&typeof i[a]=="function")return!0;return!1}(n,["next","error","complete"])}class Za extends X0{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new mI,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new mI(e),this._firestoreClient=void 0,await e}}}function yj(n,e){const t=typeof n=="object"?n:MR(),r=typeof n=="string"?n:Nm,i=nb(t,"firestore").getImmediate({identifier:r});if(!i._initialized){const a=D5("firestore");a&&mj(i,...a)}return i}function mf(n){if(n._terminated)throw new Ue(Ee.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||vj(n),n._firestoreClient}function vj(n){var e,t,r;const i=n._freezeSettings(),a=function(o,c,d,f){return new UB(o,c,d,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,MM(f.experimentalLongPollingOptions),f.useFetchStreams,f.isUsingEmulator)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new uj(n._authCredentials,n._appCheckCredentials,n._queue,a,n._componentsProvider&&function(o){const c=o==null?void 0:o._online.build();return{_offline:o==null?void 0:o._offline.build(c),_online:c}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ta{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ta(li.fromBase64String(e))}catch(t){throw new Ue(Ee.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new ta(li.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:ta._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(H0(e,ta._jsonSchema))return ta.fromBase64String(e.bytes)}}ta._jsonSchemaVersion="firestore/bytes/1.0",ta._jsonSchema={type:yr("string",ta._jsonSchemaVersion),bytes:yr("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yf{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Ue(Ee.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ii(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X1{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Os{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ue(Ee.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ue(Ee.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return St(this._lat,e._lat)||St(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Os._jsonSchemaVersion}}static fromJSON(e){if(H0(e,Os._jsonSchema))return new Os(e.latitude,e.longitude)}}Os._jsonSchemaVersion="firestore/geoPoint/1.0",Os._jsonSchema={type:yr("string",Os._jsonSchemaVersion),latitude:yr("number"),longitude:yr("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ps{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let a=0;a<r.length;++a)if(r[a]!==i[a])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Ps._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(H0(e,Ps._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new Ps(e.vectorValues);throw new Ue(Ee.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ps._jsonSchemaVersion="firestore/vectorValue/1.0",Ps._jsonSchema={type:yr("string",Ps._jsonSchemaVersion),vectorValues:yr("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xj=/^__.*__$/;class wj{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Wl(e,this.data,this.fieldMask,t,this.fieldTransforms):new $0(e,this.data,t,this.fieldTransforms)}}class PM{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Wl(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function kM(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw tt(40011,{Ec:n})}}class zb{constructor(e,t,r,i,a,s){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,a===void 0&&this.Ac(),this.fieldTransforms=a||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new zb(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Rc({path:r,mc:!1});return i.fc(e),i}gc(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Rc({path:r,mc:!1});return i.Ac(),i}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return Wm(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(kM(this.Ec)&&xj.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class bj{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||W1(e)}Dc(e,t,r,i=!1){return new zb({Ec:e,methodName:t,bc:r,path:ii.emptyPath(),mc:!1,Sc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function vf(n){const e=n._freezeSettings(),t=W1(n._databaseId);return new bj(n._databaseId,!!e.ignoreUndefinedProperties,t)}function K1(n,e,t,r,i,a={}){const s=n.Dc(a.merge||a.mergeFields?2:0,e,t,i);Yb("Data must be an object, but it was:",s,r);const o=NM(r,s);let c,d;if(a.merge)c=new ra(s.fieldMask),d=s.fieldTransforms;else if(a.mergeFields){const f=[];for(const p of a.mergeFields){const g=ow(e,p,t);if(!s.contains(g))throw new Ue(Ee.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);BM(f,g)||f.push(g)}c=new ra(f),d=s.fieldTransforms.filter(p=>c.covers(p.field))}else c=null,d=s.fieldTransforms;return new wj(new Ri(o),c,d)}class Q1 extends X1{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Q1}}class $b extends X1{_toFieldTransform(e){return new hF(e.path,new w0)}isEqual(e){return e instanceof $b}}function Gb(n,e,t,r){const i=n.Dc(1,e,t);Yb("Data must be an object, but it was:",i,r);const a=[],s=Ri.empty();Gl(r,(c,d)=>{const f=qb(e,c,t);d=ar(d);const p=i.gc(f);if(d instanceof Q1)a.push(f);else{const g=K0(d,p);g!=null&&(a.push(f),s.set(f,g))}});const o=new ra(a);return new PM(s,o,i.fieldTransforms)}function Wb(n,e,t,r,i,a){const s=n.Dc(1,e,t),o=[ow(e,r,t)],c=[i];if(a.length%2!=0)throw new Ue(Ee.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<a.length;g+=2)o.push(ow(e,a[g])),c.push(a[g+1]);const d=[],f=Ri.empty();for(let g=o.length-1;g>=0;--g)if(!BM(d,o[g])){const m=o[g];let x=c[g];x=ar(x);const b=s.gc(m);if(x instanceof Q1)d.push(m);else{const A=K0(x,b);A!=null&&(d.push(m),f.set(m,A))}}const p=new ra(d);return new PM(f,p,s.fieldTransforms)}function _j(n,e,t,r=!1){return K0(t,n.Dc(r?4:3,e))}function K0(n,e){if(LM(n=ar(n)))return Yb("Unsupported field value:",e,n),NM(n,e);if(n instanceof X1)return function(r,i){if(!kM(i.Ec))throw i.wc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.wc(`${r._methodName}() is not currently supported inside arrays`);const a=r._toFieldTransform(i);a&&i.fieldTransforms.push(a)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return function(r,i){const a=[];let s=0;for(const o of r){let c=K0(o,i.yc(s));c==null&&(c={nullValue:"NULL_VALUE"}),a.push(c),s++}return{arrayValue:{values:a}}}(n,e)}return function(r,i){if((r=ar(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return uF(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const a=Rn.fromDate(r);return{timestampValue:jm(i.serializer,a)}}if(r instanceof Rn){const a=new Rn(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:jm(i.serializer,a)}}if(r instanceof Os)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof ta)return{bytesValue:iM(i.serializer,r._byteString)};if(r instanceof zn){const a=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(a))throw i.wc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:Ab(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Ps)return function(s,o){return{mapValue:{fields:{[M4]:{stringValue:O4},[Lm]:{arrayValue:{values:s.toArray().map(d=>{if(typeof d!="number")throw o.wc("VectorValues must only contain numeric values.");return wb(o.serializer,d)})}}}}}}(r,i);throw i.wc(`Unsupported field value: ${B1(r)}`)}(n,e)}function NM(n,e){const t={};return S4(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Gl(n,(r,i)=>{const a=K0(i,e.Vc(r));a!=null&&(t[r]=a)}),{mapValue:{fields:t}}}function LM(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Rn||n instanceof Os||n instanceof ta||n instanceof zn||n instanceof X1||n instanceof Ps)}function Yb(n,e,t){if(!LM(t)||!A4(t)){const r=B1(t);throw r==="an object"?e.wc(n+" a custom object"):e.wc(n+" "+r)}}function ow(n,e,t){if((e=ar(e))instanceof yf)return e._internalPath;if(typeof e=="string")return qb(n,e);throw Wm("Field path arguments must be of type string or ",n,!1,void 0,t)}const Aj=new RegExp("[~\\*/\\[\\]]");function qb(n,e,t){if(e.search(Aj)>=0)throw Wm(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new yf(...e.split("."))._internalPath}catch{throw Wm(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Wm(n,e,t,r,i){const a=r&&!r.isEmpty(),s=i!==void 0;let o=`Function ${e}() called with invalid data`;t&&(o+=" (via `toFirestore()`)"),o+=". ";let c="";return(a||s)&&(c+=" (found",a&&(c+=` in field ${r}`),s&&(c+=` in document ${i}`),c+=")"),new Ue(Ee.INVALID_ARGUMENT,o+n+c)}function BM(n,e){return n.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ym{constructor(e,t,r,i,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new zn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Ej(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Z1("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class Ej extends Ym{data(){return super.data()}}function Z1(n,e){return typeof e=="string"?qb(n,e):e instanceof yf?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FM(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new Ue(Ee.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Xb{}class Kb extends Xb{}function Ln(n,e,...t){let r=[];e instanceof Xb&&r.push(e),r=r.concat(t),function(a){const s=a.filter(c=>c instanceof Qb).length,o=a.filter(c=>c instanceof J1).length;if(s>1||s>0&&o>0)throw new Ue(Ee.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class J1 extends Kb{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new J1(e,t,r)}_apply(e){const t=this._parse(e);return VM(e._query,t),new Hs(e.firestore,e.converter,Z2(e._query,t))}_parse(e){const t=vf(e.firestore);return function(a,s,o,c,d,f,p){let g;if(d.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new Ue(Ee.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){wI(p,f);const x=[];for(const b of p)x.push(xI(c,a,b));g={arrayValue:{values:x}}}else g=xI(c,a,p)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||wI(p,f),g=_j(o,s,p,f==="in"||f==="not-in");return gr.create(d,f,g)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function vn(n,e,t){const r=e,i=Z1("where",n);return J1._create(i,r,t)}class Qb extends Xb{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Qb(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:Qa.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(i,a){let s=i;const o=a.getFlattenedFilters();for(const c of o)VM(s,c),s=Z2(s,c)}(e._query,t),new Hs(e.firestore,e.converter,Z2(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Zb extends Kb{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Zb(e,t)}_apply(e){const t=function(i,a,s){if(i.startAt!==null)throw new Ue(Ee.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new Ue(Ee.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new x0(a,s)}(e._query,this._field,this._direction);return new Hs(e.firestore,e.converter,function(i,a){const s=i.explicitOrderBy.concat([a]);return new su(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}}function ey(n,e="asc"){const t=e,r=Z1("orderBy",n);return Zb._create(r,t)}class Jb extends Kb{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new Jb(e,t,r)}_apply(e){return new Hs(e.firestore,e.converter,Fm(e._query,this._limit,this._limitType))}}function qm(n){return RB("limit",n),Jb._create("limit",n,"F")}function xI(n,e,t){if(typeof(t=ar(t))=="string"){if(t==="")throw new Ue(Ee.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!j4(e)&&t.indexOf("/")!==-1)throw new Ue(Ee.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(un.fromString(t));if(!Je.isDocumentKey(r))throw new Ue(Ee.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return NT(n,new Je(r))}if(t instanceof zn)return NT(n,t._key);throw new Ue(Ee.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${B1(t)}.`)}function wI(n,e){if(!Array.isArray(n)||n.length===0)throw new Ue(Ee.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function VM(n,e){const t=function(i,a){for(const s of i)for(const o of s.getFlattenedFilters())if(a.indexOf(o.op)>=0)return o.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new Ue(Ee.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Ue(Ee.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class jM{convertValue(e,t="none"){switch(Fl(e)){case 0:return null;case 1:return e.booleanValue;case 2:return nr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Bl(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw tt(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Gl(e,(i,a)=>{r[i]=this.convertValue(a,t)}),r}convertVectorValue(e){var t,r,i;const a=(i=(r=(t=e.fields)===null||t===void 0?void 0:t[Lm].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>nr(s.doubleValue));return new Ps(a)}convertGeoPoint(e){return new Os(nr(e.latitude),nr(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=V1(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(m0(e));default:return null}}convertTimestamp(e){const t=Ll(e);return new Rn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=un.fromString(e);Ht(dM(r),9688,{name:e});const i=new y0(r.get(1),r.get(3)),a=new Je(r.popFirst(5));return i.isEqual(t)||Eo(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ty(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class Sj extends jM{constructor(e){super(),this.firestore=e}convertBytes(e){return new ta(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new zn(this.firestore,null,t)}}class bd{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ml extends Ym{constructor(e,t,r,i,a,s){super(e,t,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new vm(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(Z1("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Ue(Ee.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Ml._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Ml._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ml._jsonSchema={type:yr("string",Ml._jsonSchemaVersion),bundleSource:yr("string","DocumentSnapshot"),bundleName:yr("string"),bundle:yr("string")};class vm extends Ml{data(e={}){return super.data(e)}}class Gc{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new bd(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new vm(this._firestore,this._userDataWriter,r.key,r,new bd(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ue(Ee.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,a){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(o=>{const c=new vm(i._firestore,i._userDataWriter,o.doc.key,o.doc,new bd(i._snapshot.mutatedKeys.has(o.doc.key),i._snapshot.fromCache),i.query.converter);return o.doc,{type:"added",doc:c,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(o=>a||o.type!==3).map(o=>{const c=new vm(i._firestore,i._userDataWriter,o.doc.key,o.doc,new bd(i._snapshot.mutatedKeys.has(o.doc.key),i._snapshot.fromCache),i.query.converter);let d=-1,f=-1;return o.type!==0&&(d=s.indexOf(o.doc.key),s=s.delete(o.doc.key)),o.type!==1&&(s=s.add(o.doc),f=s.indexOf(o.doc.key)),{type:Cj(o.type),doc:c,oldIndex:d,newIndex:f}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Ue(Ee.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Gc._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=hb.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],i=[];return this.docs.forEach(a=>{a._document!==null&&(t.push(a._document),r.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),i.push(a.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function Cj(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return tt(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tj(n){n=si(n,zn);const e=si(n.firestore,Za);return pj(mf(e),n._key).then(t=>HM(e,n,t))}Gc._jsonSchemaVersion="firestore/querySnapshot/1.0",Gc._jsonSchema={type:yr("string",Gc._jsonSchemaVersion),bundleSource:yr("string","QuerySnapshot"),bundleName:yr("string"),bundle:yr("string")};class ny extends jM{constructor(e){super(),this.firestore=e}convertBytes(e){return new ta(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new zn(this.firestore,null,t)}}function Un(n){n=si(n,Hs);const e=si(n.firestore,Za),t=mf(e),r=new ny(e);return FM(n._query),gj(t,n._query).then(i=>new Gc(e,r,n,i))}function bI(n,e,t){n=si(n,zn);const r=si(n.firestore,Za),i=ty(n.converter,e,t);return Q0(r,[K1(vf(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,mr.none())])}function ry(n,e,t,...r){n=si(n,zn);const i=si(n.firestore,Za),a=vf(i);let s;return s=typeof(e=ar(e))=="string"||e instanceof yf?Wb(a,"updateDoc",n._key,e,t,r):Gb(a,"updateDoc",n._key,e),Q0(i,[s.toMutation(n._key,mr.exists(!0))])}function UM(n){return Q0(si(n.firestore,Za),[new G0(n._key,mr.none())])}function A0(n,e){const t=si(n.firestore,Za),r=ji(n),i=ty(n.converter,e);return Q0(t,[K1(vf(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,mr.exists(!1))]).then(()=>r)}function Ij(n,...e){var t,r,i;n=ar(n);let a={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||vI(e[s])||(a=e[s++]);const o={includeMetadataChanges:a.includeMetadataChanges,source:a.source};if(vI(e[s])){const p=e[s];e[s]=(t=p.next)===null||t===void 0?void 0:t.bind(p),e[s+1]=(r=p.error)===null||r===void 0?void 0:r.bind(p),e[s+2]=(i=p.complete)===null||i===void 0?void 0:i.bind(p)}let c,d,f;if(n instanceof zn)d=si(n.firestore,Za),f=j1(n._key.path),c={next:p=>{e[s]&&e[s](HM(d,n,p))},error:e[s+1],complete:e[s+2]};else{const p=si(n,Hs);d=si(p.firestore,Za),f=p._query;const g=new ny(d);c={next:m=>{e[s]&&e[s](new Gc(d,g,p,m))},error:e[s+1],complete:e[s+2]},FM(n._query)}return function(g,m,x,b){const A=new Ub(b),E=new Fb(m,A,x);return g.asyncQueue.enqueueAndForget(async()=>Nb(await Gm(g),E)),()=>{A.Ou(),g.asyncQueue.enqueueAndForget(async()=>Lb(await Gm(g),E))}}(mf(d),f,o,c)}function Q0(n,e){return function(r,i){const a=new Rs;return r.asyncQueue.enqueueAndForget(async()=>JV(await fj(r),i,a)),a.promise}(mf(n),e)}function HM(n,e,t){const r=t.docs.get(e._key),i=new ny(n);return new Ml(n,i,e._key,r,new bd(t.hasPendingWrites,t.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dj={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rj{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=vf(e)}set(e,t,r){this._verifyNotCommitted();const i=El(e,this._firestore),a=ty(i.converter,t,r),s=K1(this._dataReader,"WriteBatch.set",i._key,a,i.converter!==null,r);return this._mutations.push(s.toMutation(i._key,mr.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const a=El(e,this._firestore);let s;return s=typeof(t=ar(t))=="string"||t instanceof yf?Wb(this._dataReader,"WriteBatch.update",a._key,t,r,i):Gb(this._dataReader,"WriteBatch.update",a._key,t),this._mutations.push(s.toMutation(a._key,mr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=El(e,this._firestore);return this._mutations=this._mutations.concat(new G0(t._key,mr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ue(Ee.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function El(n,e){if((n=ar(n)).firestore!==e)throw new Ue(Ee.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mj{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=vf(e)}get(e){const t=El(e,this._firestore),r=new Sj(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||i.length!==1)return tt(24041);const a=i[0];if(a.isFoundDocument())return new Ym(this._firestore,r,a.key,a,t.converter);if(a.isNoDocument())return new Ym(this._firestore,r,t._key,null,t.converter);throw tt(18433,{doc:a})})}set(e,t,r){const i=El(e,this._firestore),a=ty(i.converter,t,r),s=K1(this._dataReader,"Transaction.set",i._key,a,i.converter!==null,r);return this._transaction.set(i._key,s),this}update(e,t,r,...i){const a=El(e,this._firestore);let s;return s=typeof(t=ar(t))=="string"||t instanceof yf?Wb(this._dataReader,"Transaction.update",a._key,t,r,i):Gb(this._dataReader,"Transaction.update",a._key,t),this._transaction.update(a._key,s),this}delete(e){const t=El(e,this._firestore);return this._transaction.delete(t._key),this}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oj extends Mj{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=El(e,this._firestore),r=new ny(this._firestore);return super.get(e).then(i=>new Ml(this._firestore,r,t._key,i._document,new bd(!1,!1),t.converter))}}function Pj(n,e,t){n=si(n,Za);const r=Object.assign(Object.assign({},Dj),t);return function(a){if(a.maxAttempts<1)throw new Ue(Ee.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(a,s,o){const c=new Rs;return a.asyncQueue.enqueueAndForget(async()=>{const d=await hj(a);new cj(a.asyncQueue,d,o,s,c).zu()}),c.promise}(mf(n),i=>e(new Oj(n,i)),r)}function Ir(){return new $b("serverTimestamp")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kj(n){return mf(n=si(n,Za)),new Rj(n,e=>Q0(n,e))}(function(e,t=!0){(function(i){ff=i})(uf),zd(new Kc("firestore",(r,{instanceIdentifier:i,options:a})=>{const s=r.getProvider("app").getImmediate(),o=new Za(new _B(r.getProvider("auth-internal")),new SB(s,r.getProvider("app-check-internal")),function(d,f){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new Ue(Ee.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new y0(d.options.projectId,f)}(s,i),s);return a=Object.assign({useFetchStreams:t},a),o._setSettings(a),o},"PUBLIC").setMultipleInstances(!0)),Il(bT,_T,e),Il(bT,_T,"esm2017")})();const Nj={apiKey:"AIzaSyBg60nFX2rmrW66n3lPeXRLTfMhjlgFrEE",authDomain:"project-01-bookmemo-prod.firebaseapp.com",projectId:"project-01-bookmemo-prod",storageBucket:"project-01-bookmemo-prod.firebasestorage.app",messagingSenderId:"414976225343",appId:"1:414976225343:web:31244d8c1ffe3b6f89088a"},zM=RR(Nj),e_=mB(zM),wt=yj(zM),$M=M.createContext();function Lj({children:n}){const[e,t]=M.useState(null),[r,i]=M.useState(!0);return M.useEffect(()=>{const a=aL(e_,s=>{t(s),i(!1)});return()=>a()},[]),v.jsx($M.Provider,{value:{user:e,loading:r},children:n})}function Qn(){return M.useContext($M)}function Bj(){const[n,e]=M.useState(""),[t,r]=M.useState(""),[i,a]=M.useState(""),[s,o]=M.useState(!1),c=Hl(),d=async f=>{if(f.preventDefault(),!s){o(!0),a("");try{await nL(e_,n,t),c("/")}catch(p){a(p.message)}finally{o(!1)}}};return v.jsxs(ne,{component:"form",onSubmit:d,sx:{maxWidth:400,mx:"auto",mt:8},children:[v.jsx(te,{variant:"h5",align:"center",gutterBottom:!0,"data-testid":"login-title",children:""}),v.jsx(ht,{label:"",type:"email",value:n,onChange:f=>e(f.target.value),fullWidth:!0,margin:"normal",required:!0,inputProps:{"data-testid":"login-email-input"}}),v.jsx(ht,{label:"",type:"password",value:t,onChange:f=>r(f.target.value),fullWidth:!0,margin:"normal",required:!0,inputProps:{"data-testid":"login-password-input"}}),i&&v.jsx(te,{color:"error",children:i}),v.jsx($e,{type:"submit",variant:"contained",fullWidth:!0,sx:{mt:2},"data-testid":"login-submit",disabled:s,children:s?"...":""})]})}function Fj(){const[n,e]=M.useState(""),[t,r]=M.useState(""),[i,a]=M.useState(""),[s,o]=M.useState(!1),c=async d=>{if(d.preventDefault(),!s){o(!0),a("");try{await tL(e_,n,t)}catch(f){a(f.message)}finally{o(!1)}}};return v.jsxs(ne,{component:"form",onSubmit:c,sx:{maxWidth:400,mx:"auto",mt:8},children:[v.jsx(te,{variant:"h5",align:"center",gutterBottom:!0,children:""}),v.jsx(ht,{label:"",type:"email",value:n,onChange:d=>e(d.target.value),fullWidth:!0,margin:"normal",required:!0}),v.jsx(ht,{label:"",type:"password",value:t,onChange:d=>r(d.target.value),fullWidth:!0,margin:"normal",required:!0}),i&&v.jsx(te,{color:"error",children:i}),v.jsx($e,{type:"submit",variant:"contained",fullWidth:!0,sx:{mt:2},disabled:s,children:s?"...":""})]})}const dt={TSUNDOKU:"tsundoku",READING:"reading",SUSPENDED:"suspended",RE_READING:"re-reading",FINISHED:"finished"},Xa={BOUGHT:"bought",BORROWED:"borrowed",GIFT:"gift",UNKNOWN:"unknown"},E0={[dt.TSUNDOKU]:"",[dt.READING]:"",[dt.SUSPENDED]:"",[dt.RE_READING]:"",[dt.FINISHED]:""},_I={[Xa.BOUGHT]:"",[Xa.BORROWED]:"",[Xa.GIFT]:"",[Xa.UNKNOWN]:""},lw={[dt.TSUNDOKU]:"default",[dt.READING]:"primary",[dt.SUSPENDED]:"warning",[dt.RE_READING]:"secondary",[dt.FINISHED]:"success"},Sr=dt.TSUNDOKU,t_=[dt.TSUNDOKU,dt.READING,dt.SUSPENDED,dt.RE_READING,dt.FINISHED],Vj=[Xa.BOUGHT,Xa.BORROWED,Xa.GIFT,Xa.UNKNOWN],yn={ALL:"all",TSUNDOKU:dt.TSUNDOKU,READING_GROUP:"reading-group",READING:dt.READING,SUSPENDED:dt.SUSPENDED,RE_READING:dt.RE_READING,FINISHED:dt.FINISHED},vd={[yn.ALL]:"",[yn.TSUNDOKU]:"",[yn.READING_GROUP]:"",[yn.READING]:"",[yn.SUSPENDED]:"",[yn.RE_READING]:"",[yn.FINISHED]:""},Xm=n=>t_.includes(n),Vs=n=>E0[n]||E0[Sr],xs=n=>lw[n]||lw[Sr],GM=n=>_I[n]||_I[Xa.UNKNOWN];function Ss({position:n="top-left",size:e=24}){const t={"top-left":{top:0,left:0,transform:"rotate(0deg)"},"top-right":{top:0,right:0,transform:"rotate(90deg)"},"bottom-left":{bottom:0,left:0,transform:"rotate(-90deg)"},"bottom-right":{bottom:0,right:0,transform:"rotate(180deg)"}};return v.jsx(ne,{sx:{position:"absolute",...t[n],width:e,height:e,opacity:.4,pointerEvents:"none",zIndex:2},"aria-hidden":"true",children:v.jsxs("svg",{width:e,height:e,viewBox:"0 0 24 24",children:[v.jsx("path",{d:"M 0 0 L 24 0 L 24 4 L 4 4 L 4 24 L 0 24 Z",fill:"rgba(184, 134, 11, 0.4)",stroke:"rgba(139, 69, 19, 0.5)",strokeWidth:"0.5"}),v.jsx("path",{d:"M 2 2 L 22 2 L 22 6 L 6 6 L 6 22 L 2 22 Z",fill:"none",stroke:"rgba(184, 134, 11, 0.3)",strokeWidth:"0.3"})]})})}function jj({book:n,onClick:e,testId:t}){return v.jsxs(kn,{sx:{cursor:"pointer",height:"100%",display:"flex",flexDirection:"column",minHeight:{xs:"140px",sm:"160px"},backgroundColor:"rgba(255, 255, 255, 0.75)",backdropFilter:"blur(20px) saturate(180%)",border:"2px solid rgba(139, 69, 19, 0.2)",borderRadius:3,boxShadow:`
          0 8px 32px rgba(0, 0, 0, 0.12),
          0 2px 8px rgba(0, 0, 0, 0.08),
          inset 0 1px 0 rgba(255, 255, 255, 0.5)
        `,position:"relative",overflow:"visible",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)","&:hover":{transform:"translateY(-4px)",boxShadow:`
            0 12px 40px rgba(0, 0, 0, 0.16),
            0 4px 12px rgba(0, 0, 0, 0.12),
            inset 0 1px 0 rgba(255, 255, 255, 0.6)
          `,borderColor:"rgba(139, 69, 19, 0.3)"},"&::before":{content:'""',position:"absolute",top:8,left:8,right:8,bottom:8,border:"1px solid rgba(139, 69, 19, 0.1)",borderRadius:2,pointerEvents:"none",zIndex:0},"&::after":{content:'""',position:"absolute",top:0,left:"50%",width:1,height:"100%",background:"linear-gradient(to bottom, transparent, rgba(139, 69, 19, 0.1), transparent)",pointerEvents:"none",zIndex:0}},onClick:e,"data-testid":t||`book-card-${n.id}`,children:[v.jsx(Ss,{position:"top-left",size:20}),v.jsx(Ss,{position:"top-right",size:20}),v.jsx(Nn,{sx:{flex:1,display:"flex",flexDirection:"column",p:{xs:1.5,sm:2},position:"relative",zIndex:1,"&:last-child":{pb:{xs:1.5,sm:2}}},children:v.jsxs(ne,{sx:{display:"flex",alignItems:"flex-start",gap:{xs:1.5,sm:2},height:"100%"},children:[n.coverImageUrl&&v.jsx(aR,{component:"img",sx:{width:{xs:50,sm:60},height:{xs:70,sm:80},objectFit:"cover",flexShrink:0,borderRadius:1},image:n.coverImageUrl,alt:n.title}),v.jsxs(ne,{sx:{flex:1,minWidth:0,display:"flex",flexDirection:"column",height:"100%"},children:[v.jsx(te,{variant:"h6",component:"h3",gutterBottom:!0,sx:{fontSize:{xs:"0.9rem",sm:"1rem",md:"1.1rem"},lineHeight:1.2,fontWeight:600,mb:.5,overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical"},children:n.title||""}),v.jsx(te,{variant:"body2",color:"text.secondary",sx:{fontSize:{xs:"0.75rem",sm:"0.8rem",md:"0.9rem"},mb:.5,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:n.author||""}),v.jsx(ne,{sx:{mb:1},children:v.jsx(dn,{label:Vs(n.status||Sr),color:xs(n.status||Sr),size:"small",sx:{fontSize:{xs:"0.65rem",sm:"0.7rem",md:"0.75rem"},height:{xs:"18px",sm:"20px",md:"22px"},"& .MuiChip-label":{px:{xs:.5,sm:.75}}}})}),(n.publisher||n.publishedDate)&&v.jsxs(te,{variant:"body2",color:"text.secondary",sx:{fontSize:{xs:"0.7rem",sm:"0.75rem",md:"0.8rem"},mb:1,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:[n.publisher," ",n.publisher&&n.publishedDate&&""," ",n.publishedDate]}),v.jsx(ne,{sx:{minHeight:{xs:"32px",sm:"36px"},mb:1,display:"flex",flexWrap:"wrap",gap:.5},children:n.tags&&n.tags.length>0?n.tags.slice(0,3).map((r,i)=>v.jsx(dn,{label:r,size:"small",variant:"outlined",sx:{fontSize:{xs:"0.65rem",sm:"0.7rem",md:"0.75rem"},height:{xs:"18px",sm:"20px",md:"22px"},"& .MuiChip-label":{px:{xs:.5,sm:.75}}}},i)):v.jsx(te,{variant:"caption",color:"text.secondary",sx:{fontSize:{xs:"0.65rem",sm:"0.7rem",md:"0.75rem"},alignSelf:"center"},children:""})}),v.jsxs(te,{variant:"caption",color:"text.secondary",sx:{mt:"auto",fontSize:{xs:"0.65rem",sm:"0.7rem",md:"0.75rem"},fontWeight:500},children:[": ",Vs(n.status||Sr)]})]})]})})]})}var Uj={};const cw=()=>typeof process<"u"&&Uj?!0:typeof window<"u"&&window.location?window.location.hostname!=="localhost"&&window.location.hostname!=="127.0.0.1":!1,Hj=()=>cw()?"/project-01-bookmemo":"",Li=n=>{const e=Hj(),t=n.startsWith("/")?n:`/${n}`;return`${e}${t}`},Cs={MANIFEST:()=>Li("/manifest.webmanifest"),SW_JS:()=>Li("/sw.js"),VITE_SVG:()=>Li("/vite.svg"),PAPER_TEXTURE:()=>Li("/paper-texture.jpg"),NOISE_TEXTURE:()=>Li("/noise.svg"),LIBRARY_PATTERN:()=>Li("/library-pattern.svg"),LIBRARY_BACKGROUND:()=>Li("/library-background.jpg"),ICON_192:()=>Li("/icons/icon-192x192.png"),ICON_512:()=>Li("/icons/icon-512x512.png"),APPLE_TOUCH_ICON:()=>Li("/icons/apple-touch-icon.png"),APPLE_TOUCH_ICON_512:()=>Li("/icons/apple-touch-icon-512x512.png"),ROOT:()=>Li("/"),ADD:()=>Li("/add"),SEARCH:()=>Li("/search"),IS_PRODUCTION:cw,IS_DEVELOPMENT:()=>!cw()},iy=({title:n,subtitle:e,children:t})=>v.jsx(qn,{elevation:0,"data-testid":"page-header",sx:{p:0,borderRadius:{xs:16,sm:20},mb:3,position:"relative",overflow:"hidden",backgroundColor:"rgba(255, 255, 255, 0.7)",backdropFilter:"blur(24px) saturate(180%)",border:"3px solid rgba(139, 69, 19, 0.25)",backgroundImage:[`url("${Cs.PAPER_TEXTURE()}")`,"linear-gradient(135deg, rgba(255, 255, 255, 0.7), rgba(255, 255, 255, 0.5))"],backgroundBlendMode:"overlay",backgroundSize:"200% 200%, cover",backgroundPosition:"0 0, center",boxShadow:`
          0 18px 50px rgba(15, 23, 42, 0.15),
          0 4px 12px rgba(0, 0, 0, 0.1),
          inset 0 1px 0 rgba(255, 255, 255, 0.6)
        `,"&::before":{content:'""',position:"absolute",top:0,left:0,right:0,bottom:0,background:`
            linear-gradient(135deg, rgba(184, 134, 11, 0.15) 0%, transparent 30%),
            linear-gradient(225deg, rgba(184, 134, 11, 0.15) 0%, transparent 30%),
            linear-gradient(45deg, transparent 0%, rgba(184, 134, 11, 0.08) 50%, transparent 100%),
            linear-gradient(315deg, transparent 0%, rgba(184, 134, 11, 0.08) 50%, transparent 100%)
          `,pointerEvents:"none",zIndex:0},"&::after":{content:'""',position:"absolute",top:"50%",left:"10%",right:"10%",height:2,background:"linear-gradient(90deg, transparent, rgba(139, 69, 19, 0.3), transparent)",transform:"translateY(-50%)",pointerEvents:"none",zIndex:0}},children:v.jsxs(ne,{sx:{p:{xs:2,sm:3,md:4},textAlign:"center",color:"text.primary",position:"relative",zIndex:1},children:[v.jsx(te,{variant:"h4",component:"h1","data-testid":"page-header-title",sx:{fontWeight:700,fontSize:{xs:"1.5rem",sm:"2rem",md:"2.5rem"},mb:e?1:0,color:"rgba(15, 23, 42, 0.92)",letterSpacing:"-0.02em"},children:n}),e&&v.jsx(te,{variant:"body1","data-testid":"page-header-subtitle",sx:{opacity:.92,fontSize:{xs:"0.9rem",sm:"1rem"},color:"rgba(51, 65, 85, 0.92)"},children:e}),t&&v.jsx(ne,{sx:{mt:2},children:t})]})}),zj=sR`
  0%, 80%, 100% {
    transform: scale(0.6);
    opacity: 0.5;
  }
  40% {
    transform: scale(1.1);
    opacity: 1;
  }
`,$j=sR`
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
`;function Yl({variant:n="inline",message:e,size:t="medium","data-testid":r="loading-indicator"}){const i=n==="fullPage",a=i?12:t==="small"?8:10,s=i?10:t==="small"?6:8,o={display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:i?2:1.5,animation:`${$j} 0.25s ease-out`,...i&&{minHeight:"50vh",width:"100%",py:4},...!i&&{padding:3}},c={display:"flex",alignItems:"center",justifyContent:"center",gap:s},d=f=>({width:a,height:a,borderRadius:"50%",bgcolor:"primary.main",animation:`${zj} 1.2s ease-in-out ${f} infinite both`,boxShadow:"0 2px 8px rgba(25, 118, 210, 0.35)"});return v.jsxs(ne,{"data-testid":r,sx:o,children:[v.jsxs(ne,{sx:c,children:[v.jsx(ne,{sx:d(0)}),v.jsx(ne,{sx:d(.15)}),v.jsx(ne,{sx:d(.3)})]}),e&&v.jsx(te,{variant:i?"body1":"body2",color:"text.secondary",sx:{fontWeight:500},children:e})]})}const Wr=yi.createContext({setGlobalError:()=>{}}),Gj=({open:n,message:e,onClose:t})=>v.jsxs(zi,{open:n,onClose:t,maxWidth:"xs",fullWidth:!0,disableEscapeKeyDown:!1,disableBackdropClick:!1,children:[v.jsx(aa,{sx:{color:"error.main",fontWeight:"bold"},children:""}),v.jsx($i,{children:v.jsx(vi,{severity:"error",sx:{mb:2},children:e})}),v.jsx(Gi,{sx:{justifyContent:"center",pb:2},children:v.jsx($e,{onClick:t,color:"error",variant:"contained",autoFocus:!0,children:""})})]}),Wj=({children:n})=>{const[e,t]=M.useState(null),r=a=>{t(a)},i=()=>{t(null)};return v.jsxs(Wr.Provider,{value:{setGlobalError:r},children:[n,e&&v.jsx(Gj,{open:!!e,message:e,onClose:i})]})};function Yh(n){return n?(t=>t.replace(/[---]/g,r=>String.fromCharCode(r.charCodeAt(0)-65248)))(String(n)).toLowerCase():""}function Yj(n,e,t){return Array.isArray(n)?n.filter(i=>{if(e!==yn.ALL){const s=i.status||Sr;if(e===yn.READING_GROUP){if(![dt.READING,dt.RE_READING].includes(s))return!1}else if(s!==e)return!1}if(!t||!String(t).trim())return!0;const a=Yh(t);return i.title&&Yh(i.title).includes(a)||i.author&&Yh(i.author).includes(a)||Array.isArray(i.tags)&&i.tags.some(s=>Yh(s).includes(a))}):[]}function qj(n,e){const t=Array.isArray(n)?n:[],r=t.length,i=a=>t.filter(s=>(s.status||Sr)===a).length;return{total:r,tsundoku:i(dt.TSUNDOKU),reading:i(dt.READING),reReading:i(dt.RE_READING),finished:i(dt.FINISHED),filtered:Array.isArray(e)?e.length:0}}const Xj=()=>{try{if(typeof yi>"u"||!yi.useState)return{allBooks:[],filteredBooks:[],stats:{total:0,tsundoku:0,reading:0,reReading:0,finished:0,filtered:0},loading:!1,error:null,filter:yn.READING,searchText:"",fetchBooks:async()=>{},handleFilterChange:()=>{},handleSearchChange:()=>{},clearSearch:()=>{},clearFilter:()=>{},normalizeTag:()=>""}}catch(D){return console.warn("React context not available in useBookList:",D),{allBooks:[],filteredBooks:[],stats:{total:0,reading:0,finished:0,filtered:0},loading:!1,error:null,filter:"reading",searchText:"",fetchBooks:async()=>{},handleFilterChange:()=>{},handleSearchChange:()=>{},clearSearch:()=>{},clearFilter:()=>{},normalizeTag:()=>""}}const{user:n}=Qn(),e=M.useContext(Wr),t=(e==null?void 0:e.setGlobalError)||(()=>{}),[r,i]=M.useState([]),[a,s]=M.useState(!0),[o,c]=M.useState(null),[d,f]=M.useState(yn.READING_GROUP),[p,g]=M.useState(""),m=M.useCallback(async()=>{if(!n){i([]),s(!1);return}try{s(!0),c(null);const D=Ln($n(wt,"books"),vn("userId","==",n.uid),ey("updatedAt","desc")),B=(await Un(D)).docs.map(O=>({id:O.id,...O.data()}));i(B)}catch(D){console.error("Error fetching books:",D),t(""),c("")}finally{s(!1)}},[n,t]),x=M.useCallback((D,k)=>{f(k)},[]),b=M.useCallback(D=>{g(D.target.value)},[]),A=M.useCallback(()=>{g("")},[]),E=M.useCallback(()=>{f(yn.READING_GROUP)},[]),C=Yj(r,d,p),T=qj(r,C);return M.useEffect(()=>{m()},[n==null?void 0:n.uid]),{allBooks:r,filteredBooks:C,stats:T,loading:a,error:o,filter:d,searchText:p,fetchBooks:m,handleFilterChange:x,handleSearchChange:b,clearSearch:A,clearFilter:E,normalizeTag:Yh}};function Kj(){const n=Hl(),{filteredBooks:e,loading:t,error:r,filter:i,searchText:a,handleFilterChange:s,handleSearchChange:o}=Xj(),c=d=>{n(`/book/${d}`)};return t?v.jsx(Yl,{variant:"fullPage",message:"...","data-testid":"book-list-loading"}):v.jsxs(ne,{sx:{maxWidth:1200,mx:"auto",pb:{xs:"72px",sm:"80px"}},children:[v.jsx(iy,{title:"",subtitle:"","data-testid":"book-list-header"}),v.jsxs(ne,{sx:{px:{xs:1.5,sm:2,md:0}},children:[v.jsx(ht,{label:"",value:a,onChange:o,fullWidth:!0,size:"small",sx:{mb:{xs:1.5,sm:2},"& .MuiOutlinedInput-root":{fontSize:{xs:"0.9rem",sm:"1rem"}}}}),v.jsx(ne,{sx:{borderBottom:1,borderColor:"divider",mb:{xs:1.5,sm:2},position:"sticky",top:0,zIndex:1100,backgroundColor:"background.paper"},"data-testid":"book-list-tabs-container",style:{position:"sticky",top:0,zIndex:1100},children:v.jsxs(D1,{value:i,onChange:s,variant:{xs:"scrollable",sm:"standard"},scrollButtons:"auto",allowScrollButtonsMobile:!0,centered:{sm:!0},sx:{"& .MuiTab-root":{fontSize:{xs:"0.8rem",sm:"0.9rem"},minHeight:{xs:"40px",sm:"48px"},minWidth:{xs:"60px",sm:"auto"},px:{xs:1,sm:2}},"& .MuiTabs-scrollButtons":{"&.Mui-disabled":{opacity:.3}}},children:[v.jsx(Ea,{label:vd[yn.ALL],value:yn.ALL}),v.jsx(Ea,{label:vd[yn.TSUNDOKU],value:yn.TSUNDOKU}),v.jsx(Ea,{label:vd[yn.READING_GROUP],value:yn.READING_GROUP}),v.jsx(Ea,{label:vd[yn.SUSPENDED],value:yn.SUSPENDED}),v.jsx(Ea,{label:vd[yn.FINISHED],value:yn.FINISHED})]})}),e.length===0?v.jsx(ne,{sx:{textAlign:"center",py:{xs:3,sm:4},px:{xs:2,sm:0}},children:v.jsx(te,{variant:"body1",color:"text.secondary",sx:{fontSize:{xs:"0.9rem",sm:"1rem"}},children:""})}):v.jsx(ne,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",sm:"repeat(2, 1fr)",md:"repeat(3, 1fr)",lg:"repeat(4, 1fr)"},gap:{xs:1.5,sm:2},dataTestid:"book-list-grid"},"data-testid":"book-list-grid",children:e.map(d=>v.jsx(ne,{"data-testid":`book-grid-item-${d.id}`,children:v.jsx(jj,{book:d,onClick:()=>c(d.id),testId:`book-list-card-${d.id}`})},d.id))})]})]})}const js=(n,e)=>{const[t,r]=M.useState([]),[i,a]=M.useState(!1),s=M.useCallback(async()=>{if(e!=null&&e.uid)try{a(!0);const d=n==="book"?"bookTagHistory":"memoTagHistory",f=Ln($n(wt,"users",e.uid,d),ey("updatedAt","desc")),p=await Un(f),g=[];p.forEach(m=>{const x=m.data();x.tag&&g.push(x.tag)}),r(g)}catch(d){throw console.error(":",d),d}finally{a(!1)}},[e==null?void 0:e.uid,n]),o=M.useCallback(async d=>{if(!(!(e!=null&&e.uid)||!d))try{const f=n==="book"?"bookTagHistory":"memoTagHistory",p=ji(wt,"users",e.uid,f,d);await bI(p,{tag:d,updatedAt:Ir()})}catch(f){throw console.error(":",f),f}},[e==null?void 0:e.uid,n]),c=M.useCallback(async d=>{if(!(!(e!=null&&e.uid)||!d||d.length===0))try{const f=d.map(p=>{const g=n==="book"?"bookTagHistory":"memoTagHistory",m=ji(wt,"users",e.uid,g,p);return bI(m,{tag:p,updatedAt:Ir()})});await Promise.all(f)}catch(f){throw console.error(":",f),f}},[e==null?void 0:e.uid,n]);return{tagOptions:t,loading:i,fetchTagHistory:s,saveTagToHistory:o,saveTagsToHistory:c}},Qj=()=>{const{user:n}=Qn(),e=M.useContext(Wr),t=(e==null?void 0:e.setGlobalError)||(()=>{}),[r,i]=M.useState(!1),[a,s]=M.useState(null),{saveTagsToHistory:o}=js("book",n),c=M.useCallback(async f=>{if(!n)throw new Error("");if(!f.title)throw new Error("");try{i(!0),s(null);let p=(f.tags||[]).filter(x=>x&&x.trim()!=="");f.inputTagValue&&!p.includes(f.inputTagValue.trim())&&(p=[...p,f.inputTagValue.trim()]),p=p.filter(x=>x&&x.trim()!=="");const g=await A0($n(wt,"books"),{userId:n.uid,isbn:f.isbn||"",title:f.title,author:f.author||"",publisher:f.publisher||"",publishedDate:f.publishedDate||"",coverImageUrl:f.coverImageUrl||"",tags:p,status:f.status||Sr,acquisitionType:f.acquisitionType||"unknown",createdAt:Ir(),updatedAt:Ir()});p.length>0&&await o(p);const m=f.status||Sr;if(m)try{const x=$n(wt,"books",g.id,"statusHistory");await A0(x,{status:m,previousStatus:null,changedAt:Ir(),changedBy:n.uid,notes:"",createdAt:Ir()})}catch(x){console.error("Error adding initial status history:",x)}return g.id}catch(p){console.error("Error adding book:",p);const g=": "+p.message;throw t(g),s(g),p}finally{i(!1)}},[n,t,o]),d=M.useCallback(()=>{s(null)},[]);return{addBook:c,loading:r,error:a,clearError:d}},Zj=()=>{const{user:n}=Qn(),e=M.useContext(Wr),t=(e==null?void 0:e.setGlobalError)||(()=>{}),[r,i]=M.useState(!1),[a,s]=M.useState(""),[o,c]=M.useState(!1),d=M.useCallback(async g=>{if(!g||!g.trim())return s("ISBN"),null;s(""),i(!0),c(!0);try{const m=g.trim(),b=(await VC.get(`https://api.openbd.jp/v1/get?isbn=${m}`)).data[0];let A="",E="",C="",T="",D="",k=[];if(b&&b.summary&&(A=b.summary.title||"",E=b.summary.author||"",C=b.summary.publisher||"",T=b.summary.pubdate||"",D=b.summary.cover||"",b.summary.subject&&k.push(b.summary.subject),b.summary.ndc&&k.push(b.summary.ndc)),!D||!A)try{const O=(await VC.get(`https://www.googleapis.com/books/v1/volumes?q=isbn:${m}`)).data;if(O.items&&O.items.length>0){const I=O.items[0].volumeInfo;A||(A=I.title||""),E||(E=I.authors?I.authors.join(", "):""),C||(C=I.publisher||""),T||(T=I.publishedDate||""),!D&&I.imageLinks&&(D=I.imageLinks.thumbnail||I.imageLinks.smallThumbnail||""),I.categories&&I.categories.length>0&&(k=[...k,...I.categories])}}catch(B){console.error("Failed to fetch from Google Books API",B)}return A?{isbn:m,title:A,author:E,publisher:C,publishedDate:T,coverImageUrl:D,tags:Array.from(new Set(k))}:(t(""),null)}catch{const x="";return t(x),s(x),null}finally{i(!1)}},[t]),f=M.useCallback(()=>{s(null)},[]),p=M.useCallback(()=>{c(!1),s(null)},[]);return{searchBookByIsbn:d,loading:r,error:a,searchPerformed:o,clearError:f,clearSearch:p}},WM=()=>{const{user:n}=Qn(),e=M.useContext(Wr),t=(e==null?void 0:e.setGlobalError)||(()=>{}),[r,i]=M.useState(!1),[a,s]=M.useState(null),[o,c]=M.useState(null),d=M.useCallback(async p=>{if(!n||!p||!p.trim())return s(null),null;i(!0),c(null),s(null);try{const g=$n(wt,"books"),m=Ln(g,vn("userId","==",n.uid),vn("isbn","==",p.trim())),x=await Un(m);if(x.empty)return s(null),null;{const b=x.docs[0],A={id:b.id,...b.data()};return s(A),A}}catch(g){console.error("Error checking book duplicate:",g);const m=": "+g.message;return c(m),t(m),null}finally{i(!1)}},[n,t]),f=M.useCallback(()=>{s(null),c(null),i(!1)},[]);return{isChecking:r,duplicateBook:a,error:o,checkDuplicate:d,resetDuplicateCheck:f}};var Jj={};const eU=()=>typeof jest<"u"?Jj.VITE_GOOGLE_BOOKS_API_KEY:"AIzaSyA4Zzn47v8NQiFSs-pwDxO8iqTZtdt0Df0",tU=()=>{const[n,e]=M.useState([]),[t,r]=M.useState(!1),[i,a]=M.useState(""),[s,o]=M.useState(null),[c,d]=M.useState([]),[f,p]=M.useState({author:"",publisher:"",yearFrom:"",yearTo:""}),g=M.useCallback(()=>{try{const N=localStorage.getItem("bookSearchHistory");if(N){const P=JSON.parse(N);d(Array.isArray(P)?P:[])}}catch(N){console.warn("Failed to load search history:",N),d([])}},[]),m=M.useCallback(N=>{try{localStorage.setItem("bookSearchHistory",JSON.stringify(N))}catch(P){console.warn("Failed to save search history:",P)}},[]),x=M.useCallback((N,P)=>{if(!N||N.trim().length<2)return;const V={query:N.trim(),searchType:P,timestamp:Date.now()};d(q=>{const X=q.filter(W=>!(W.query===V.query&&W.searchType===V.searchType)),G=[V,...X].slice(0,10);return m(G),G})},[m]),b=M.useCallback(N=>{d(P=>{const V=P.filter((q,X)=>X!==N);return m(V),V})},[m]),A=M.useCallback(()=>{d([]),m([])},[m]),E=M.useCallback(N=>!N||N.length===0?N:N.filter(P=>{if(f.author&&P.author&&!P.author.toLowerCase().includes(f.author.toLowerCase())||f.publisher&&P.publisher&&!P.publisher.toLowerCase().includes(f.publisher.toLowerCase()))return!1;if(f.yearFrom||f.yearTo){const V=P.publishedDate?parseInt(P.publishedDate.split("-")[0]):null;if(V){if(f.yearFrom&&V<parseInt(f.yearFrom)||f.yearTo&&V>parseInt(f.yearTo))return!1}else return!1}return!0}),[f]),C=M.useCallback(N=>{p(P=>({...P,...N}))},[]),T=M.useCallback(()=>{p({author:"",publisher:"",yearFrom:"",yearTo:""})},[]),D=M.useCallback((N,P)=>Array.isArray(N)?N.map((V,q)=>({id:`${P}-${q}`,source:P,title:V.title||"",author:V.author||"",publisher:V.publisher||"",publishedDate:V.publishedDate||"",isbn:V.isbn||"",coverImageUrl:V.coverImageUrl||"",description:V.description||"",confidence:P==="google"?.8:.6})):[],[]),k=M.useCallback(async(N,P)=>{try{let V;try{V=eU()}catch(W){console.error("Error accessing environment variables:",W),V=void 0}if(console.log("Google Books API Key check:",{hasApiKey:!!V,apiKeyLength:V?V.length:0,isJestEnvironment:typeof jest<"u",environment:typeof jest<"u"?"test":"browser"}),!V)return console.warn("Google Books API key is not configured, skipping Google Books search"),[];let q=N;P==="author"?q=`inauthor:${N}`:P==="publisher"?q=`inpublisher:${N}`:q=`intitle:${N}`;const X=await fetch(`https://www.googleapis.com/books/v1/volumes?q=${encodeURIComponent(q)}&key=${V}&maxResults=10`);if(!X.ok)throw new Error(`Google Books API error: ${X.status}`);const G=await X.json();return G.items?G.items.map(W=>{var ge,ve,be;const K=W.volumeInfo||{},Z=K.industryIdentifiers||[],fe=((ge=Z.find(Pe=>Pe.type==="ISBN_13"))==null?void 0:ge.identifier)||((ve=Z.find(Pe=>Pe.type==="ISBN_10"))==null?void 0:ve.identifier)||"";return{title:K.title||"",author:K.authors?K.authors.join(", "):"",publisher:K.publisher||"",publishedDate:K.publishedDate||"",isbn:fe,coverImageUrl:((be=K.imageLinks)==null?void 0:be.thumbnail)||"",description:K.description||""}}):[]}catch(V){throw console.error("Google Books API error:",V),V}},[]),B=M.useCallback(N=>{const P=N.message||N.toString();return P.includes("API key")||P.includes("API key is not configured")?"":P.includes("network")||P.includes("fetch")?"":P.includes("timeout")?"":P.includes("404")||P.includes("Not Found")?"":P.includes("429")||P.includes("Too Many Requests")?"":P.includes("500")||P.includes("Internal Server Error")?"":""},[]),O=M.useCallback(async(N,P="title")=>{if(!N||N.trim()===""){e([]);return}r(!0),a("..."),o(null),e([]);try{const V=[];let q=!1,X=null;try{a("Google Books..."),console.log("Trying Google Books API for query:",N);const W=await k(N,P);if(console.log("Google Books raw results:",W),W&&W.length>0){const K=D(W,"google");console.log("Google Books normalized results:",K),V.push(...K)}}catch(W){console.warn("Google Books API failed:",W),q=!0,X=W}a("..."),console.log("Search results:",V),console.log("Results length:",V.length);const G=V.sort((W,K)=>K.confidence-W.confidence);e(G),V.length>0&&x(N,P),q&&V.length===0?o(B(X)):V.length===0&&o(P==="title"?`

 : `:"")}catch(V){console.error("External book search error:",V),o(B(V))}finally{r(!1),a("")}},[B,x]),I=M.useCallback(()=>{e([]),o(null)},[]),R=M.useCallback(()=>{o(null)},[]),F=E(n);return{searchResults:n,filteredResults:F,loading:t,loadingStep:i,error:s,searchBooks:O,clearSearchResults:I,clearError:R,searchHistory:c,loadSearchHistory:g,addToSearchHistory:x,removeFromSearchHistory:b,clearSearchHistory:A,filters:f,updateFilters:C,clearFilters:T}},nU=({onBookSelect:n,onCancel:e})=>{const[t,r]=M.useState("title"),[i,a]=M.useState(""),[s,o]=M.useState("relevance"),[c,d]=M.useState(!1),[f,p]=M.useState({}),{searchResults:g,filteredResults:m,loading:x,loadingStep:b,error:A,searchBooks:E,clearSearchResults:C,clearError:T,searchHistory:D,loadSearchHistory:k,removeFromSearchHistory:B,clearSearchHistory:O,filters:I,updateFilters:R,clearFilters:F}=tU(),{checkDuplicate:N}=WM(),P=M.useCallback((Se,Ae)=>{Ae!==null&&(r(Ae),C())},[C]),V=M.useCallback(Se=>{a(Se.target.value),A&&T()},[A,T]),q=M.useCallback(async()=>{i.trim()&&(p({}),await E(i.trim(),t))},[i,t,E]),X=M.useCallback(async Se=>{if(!Se||Se.length===0)return;const Ae={};for(const Fe of Se)if(Fe.isbn)try{const ae=await N(Fe.isbn);ae&&(Ae[Fe.id]=ae)}catch(ae){console.error("Error checking duplicate for book:",Fe.title,ae)}p(Ae)},[N]),G=M.useCallback(Se=>{p({}),n(Se)},[n]),W=M.useCallback(()=>{C(),a(""),p({}),e()},[C,e]),K=M.useCallback((Se,Ae)=>{a(Se),r(Ae),d(!1),p({}),E(Se,Ae)},[E]),Z=M.useCallback(Se=>{B(Se)},[B]),fe=M.useCallback(()=>{O()},[O]),ge=M.useCallback(()=>{c||k(),d(!c)},[c,k]),ve=M.useCallback(Se=>{if(!Se||Se.length===0)return Se;const Ae=[...Se];switch(s){case"title":return Ae.sort((Fe,ae)=>Fe.title.localeCompare(ae.title,"ja"));case"author":return Ae.sort((Fe,ae)=>Fe.author.localeCompare(ae.author,"ja"));case"date":return Ae.sort((Fe,ae)=>{const ye=new Date(Fe.publishedDate||"1900-01-01");return new Date(ae.publishedDate||"1900-01-01")-ye});case"relevance":default:return Ae.sort((Fe,ae)=>ae.confidence-Fe.confidence)}},[s]);yi.useEffect(()=>{m&&m.length>0&&!x&&X(m)},[m,x]);const be=()=>{if(x)return v.jsxs(ne,{sx:{mt:2},children:[v.jsx(te,{variant:"subtitle2",sx:{mb:2,color:"primary.main",fontWeight:"bold",fontSize:{xs:"0.9rem",sm:"1rem"}},children:b||"..."}),[...Array(3)].map((Ae,Fe)=>v.jsx(kn,{sx:{mb:2},children:v.jsx(Nn,{children:v.jsxs(ne,{sx:{display:"flex",gap:2},children:[v.jsx(Uh,{variant:"rectangular",width:60,height:80}),v.jsxs(ne,{sx:{flex:1},children:[v.jsx(Uh,{variant:"text",width:"80%",height:24}),v.jsx(Uh,{variant:"text",width:"60%",height:20}),v.jsx(Uh,{variant:"text",width:"40%",height:16})]})]})})},Fe))]});if(A)return v.jsx(vi,{severity:"error",sx:{mt:2},action:v.jsx($e,{color:"inherit",size:"small",onClick:T,children:""}),children:A});if(g.length===0&&i.trim())return v.jsxs(ne,{sx:{mt:2,textAlign:"center",py:4},children:[v.jsxs(te,{variant:"body1",color:"text.secondary",children:["",i,""]}),v.jsx(te,{variant:"body2",color:"text.secondary",sx:{mt:1},children:""})]});if(g.length===0)return v.jsxs(ne,{sx:{mt:2,textAlign:"center",py:4},children:[v.jsx(te,{variant:"body1",color:"text.secondary",children:""}),D&&D.length>0&&v.jsx(ne,{sx:{mt:2},children:v.jsx($e,{variant:"outlined",startIcon:v.jsx(IN,{}),onClick:ge,size:"small",children:""})})]});const Se=ve(m||[]);return v.jsxs(ne,{sx:{mt:2},children:[v.jsxs(ne,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2,flexDirection:{xs:"column",sm:"row"},gap:{xs:1,sm:0}},children:[v.jsxs(te,{variant:"subtitle2",sx:{fontSize:{xs:"0.9rem",sm:"1rem"}},children:[" (",g.length,")"]}),v.jsxs(Mi,{size:"small",sx:{minWidth:120},children:[v.jsx(Ca,{children:""}),v.jsxs(Ya,{value:s,onChange:Ae=>o(Ae.target.value),label:"",children:[v.jsx(Zt,{value:"relevance",children:""}),v.jsx(Zt,{value:"title",children:""}),v.jsx(Zt,{value:"author",children:""}),v.jsx(Zt,{value:"date",children:""})]})]})]}),Se.map(Ae=>v.jsx(kn,{sx:{mb:2,cursor:"pointer","&:hover":{boxShadow:3}},onClick:()=>G(Ae),"data-testid":`search-result-${Ae.id}`,children:v.jsx(Nn,{children:v.jsxs(ne,{sx:{display:"flex",gap:2},children:[v.jsx(ne,{sx:{flexShrink:0},children:Ae.coverImageUrl?v.jsx(aR,{component:"img",image:Ae.coverImageUrl,alt:Ae.title,sx:{width:60,height:80,objectFit:"cover",borderRadius:1}}):v.jsx(ne,{sx:{width:60,height:80,bgcolor:"grey.200",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:1},children:v.jsx(te,{variant:"caption",color:"text.secondary",children:""})})}),v.jsxs(ne,{sx:{flex:1,minWidth:0},children:[v.jsx(te,{variant:"subtitle1",sx:{fontWeight:"bold",mb:.5,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",fontSize:{xs:"0.9rem",sm:"1rem"}},children:Ae.title}),v.jsx(te,{variant:"body2",color:"text.secondary",sx:{mb:.5},children:Ae.author}),v.jsxs(te,{variant:"body2",color:"text.secondary",sx:{mb:1},children:[Ae.publisher,Ae.publishedDate&&` - ${Ae.publishedDate}`]}),v.jsxs(ne,{sx:{display:"flex",gap:.5,flexWrap:"wrap",mb:{xs:1,sm:1.5}},children:[v.jsx(dn,{label:Ae.source==="google"?"Google Books":"OpenBD",size:"small",color:Ae.source==="google"?"primary":"secondary",variant:"outlined",sx:{fontSize:{xs:"0.7rem",sm:"0.8rem"}}}),Ae.isbn&&v.jsx(dn,{label:`ISBN: ${Ae.isbn}`,size:"small",variant:"outlined",sx:{fontSize:{xs:"0.7rem",sm:"0.8rem"}}})]})]}),v.jsx(ne,{sx:{flexShrink:0,alignSelf:"center",mt:{xs:1,sm:0}},children:f[Ae.id]?v.jsx($e,{variant:"outlined",size:"small",disabled:!0,"data-testid":`duplicate-book-${Ae.id}`,sx:{fontSize:{xs:"0.75rem",sm:"0.85rem"},minWidth:{xs:"100%",sm:"auto"},color:"text.secondary",borderColor:"text.secondary"},children:""}):v.jsx($e,{variant:"contained",size:"small",onClick:Fe=>{Fe.stopPropagation(),G(Ae)},"data-testid":`select-book-${Ae.id}`,sx:{fontSize:{xs:"0.75rem",sm:"0.85rem"},minWidth:{xs:"100%",sm:"auto"}},children:""})})]})})},Ae.id))]})},Pe=()=>g.length===0?null:v.jsxs(ne,{sx:{mt:2,p:2,bgcolor:"grey.50",borderRadius:1},children:[v.jsxs(ne,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[v.jsx(te,{variant:"subtitle2",color:"text.secondary",children:""}),v.jsx($e,{size:"small",onClick:F,disabled:!(I!=null&&I.author)&&!(I!=null&&I.publisher)&&!(I!=null&&I.yearFrom)&&!(I!=null&&I.yearTo),children:""})]}),v.jsxs(ne,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",sm:"1fr 1fr"},gap:2,mb:2},children:[v.jsx(ht,{label:"",value:(I==null?void 0:I.author)||"",onChange:Se=>R({author:Se.target.value}),size:"small",placeholder:"",sx:{fontSize:{xs:"0.8rem",sm:"0.9rem"}}}),v.jsx(ht,{label:"",value:(I==null?void 0:I.publisher)||"",onChange:Se=>R({publisher:Se.target.value}),size:"small",placeholder:"",sx:{fontSize:{xs:"0.8rem",sm:"0.9rem"}}}),v.jsx(ht,{label:"",type:"number",value:(I==null?void 0:I.yearFrom)||"",onChange:Se=>R({yearFrom:Se.target.value}),size:"small",placeholder:": 2020",sx:{fontSize:{xs:"0.8rem",sm:"0.9rem"}}}),v.jsx(ht,{label:"",type:"number",value:(I==null?void 0:I.yearTo)||"",onChange:Se=>R({yearTo:Se.target.value}),size:"small",placeholder:": 2024",sx:{fontSize:{xs:"0.8rem",sm:"0.9rem"}}})]}),v.jsxs(te,{variant:"caption",color:"text.secondary",children:[(m==null?void 0:m.length)||0,"",(g==null?void 0:g.length)||0,""]})]}),ue=()=>!c||!D||D.length===0?null:v.jsxs(ne,{sx:{mt:2},children:[v.jsxs(ne,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:1},children:[v.jsx(te,{variant:"subtitle2",color:"text.secondary",children:""}),v.jsxs(ne,{children:[v.jsx($e,{size:"small",onClick:fe,startIcon:v.jsx(lR,{}),sx:{mr:1},children:""}),v.jsx($e,{size:"small",onClick:()=>d(!1),children:""})]})]}),v.jsx(Qw,{sx:{bgcolor:"background.paper",borderRadius:1},children:D.map((Se,Ae)=>v.jsx(Zw,{sx:{px:1},secondaryAction:v.jsx($r,{edge:"end",onClick:()=>Z(Ae),size:"small",children:v.jsx(Em,{fontSize:"small"})}),children:v.jsx(TN,{onClick:()=>K(Se.query,Se.searchType),sx:{borderRadius:1},children:v.jsx(om,{primary:Se.query,secondary:`${Se.searchType==="title"?"":Se.searchType==="author"?"":""}`})})},`${Se.query}-${Se.timestamp}`))})]});return v.jsxs(ne,{sx:{p:{xs:1.5,sm:2},border:1,borderColor:"primary.main",borderRadius:1,bgcolor:"primary.50",mt:{xs:1.5,sm:2},maxWidth:"100%",overflow:"hidden"},"data-testid":"external-book-search",children:[v.jsx(te,{variant:"h6",sx:{mb:{xs:1.5,sm:2},fontSize:{xs:"1rem",sm:"1.25rem"}},children:" "}),v.jsx(ne,{sx:{mb:{xs:1.5,sm:2},display:"flex",justifyContent:"center"},children:v.jsxs(CN,{value:t,exclusive:!0,onChange:P,"aria-label":"search type",size:"small",children:[v.jsx(Nx,{value:"title","aria-label":"title","data-testid":"search-type-title",children:""}),v.jsx(Nx,{value:"author","aria-label":"author","data-testid":"search-type-author",children:""}),v.jsx(Nx,{value:"publisher","aria-label":"publisher","data-testid":"search-type-publisher",children:""})]})}),v.jsxs(ne,{sx:{display:"flex",gap:{xs:.5,sm:1},mb:{xs:1.5,sm:2},flexDirection:{xs:"column",sm:"row"}},children:[v.jsx(ht,{fullWidth:!0,placeholder:`${t==="title"?"":t==="author"?"":""}`,value:i,onChange:V,onKeyPress:Se=>{Se.key==="Enter"&&q()},"data-testid":"search-query-input",size:"small"}),v.jsx($e,{variant:"contained",onClick:q,disabled:!i.trim()||x,startIcon:x?v.jsx(oR,{size:16}):v.jsx(R1,{}),"data-testid":"search-button",sx:{fontSize:{xs:"0.8rem",sm:"0.9rem"},minWidth:{xs:"100%",sm:"auto"}},children:x?"...":""})]}),ue(),Pe(),be(),v.jsx(ne,{sx:{mt:{xs:2,sm:3},textAlign:"right"},children:v.jsx($e,{onClick:W,"data-testid":"cancel-button",sx:{fontSize:{xs:"0.8rem",sm:"0.9rem"}},children:" ISBN"})})]})};function rU({isbn:n="",onBookAdded:e}){const[t,r]=M.useState(n),[i,a]=M.useState(""),[s,o]=M.useState(""),[c,d]=M.useState(""),[f,p]=M.useState(""),[g,m]=M.useState(""),[x,b]=M.useState([]),[A,E]=M.useState(""),[C,T]=M.useState(dt.TSUNDOKU),[D,k]=M.useState(Xa.UNKNOWN),[B,O]=M.useState(!1),{user:I}=Qn(),{tagOptions:R,fetchTagHistory:F}=js("book",I),{addBook:N,loading:P,error:V}=Qj(),{searchBookByIsbn:q,loading:X,error:G}=Zj(),{duplicateBook:W,checkDuplicate:K,resetDuplicateCheck:Z}=WM();M.useEffect(()=>{F()},[F]),M.useEffect(()=>{n&&n!==t&&(console.log("[BookForm] useEffect: propsisbn:",n),r(n),n.trim()!==""&&(console.log("[BookForm] useEffect: ",n),fe(n)))},[n,t]);const fe=async ue=>{const Se=ue!==void 0?ue:t;if(!Se||!Se.trim())return;Z();const Ae=await q(Se);Ae&&(a(Ae.title),o(Ae.author),d(Ae.publisher),p(Ae.publishedDate),m(Ae.coverImageUrl),b(Ae.tags),await K(Se))},ge=async ue=>{if(ue.preventDefault(),!i)return;const Ae=await N({isbn:t,title:i,author:s,publisher:c,publishedDate:f,coverImageUrl:g,tags:x,inputTagValue:A,status:C,acquisitionType:D});Ae&&e(Ae)},ve=()=>{O(!B)},be=async ue=>{a(ue.title),o(ue.author),d(ue.publisher),p(ue.publishedDate),m(ue.coverImageUrl),r(ue.isbn),O(!1),ue.isbn&&await K(ue.isbn)},Pe=()=>{O(!1)};return v.jsxs(qn,{component:"form",onSubmit:ge,sx:{p:3,mt:{xs:1,sm:2}},role:"form","data-testid":"book-form",elevation:0,children:[v.jsxs(ne,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",sm:"1fr 1fr"},gap:{xs:1,sm:1.5}},children:[v.jsx(ne,{children:v.jsx(ht,{label:"ISBN",value:t,onChange:ue=>r(ue.target.value),fullWidth:!0,size:"small",placeholder:": 9784873119485",inputProps:{"data-testid":"book-isbn-input"}})}),v.jsx(ne,{children:v.jsx($e,{onClick:()=>fe(),variant:"outlined",disabled:X,sx:{mt:{xs:1,sm:0},height:{xs:"40px",sm:"56px"},fontSize:{xs:"0.8rem",sm:"0.9rem"}},fullWidth:!0,"data-testid":"book-fetch-button",children:X?"...":"ISBN"})})]}),v.jsxs(ne,{sx:{mt:1.5,textAlign:"center"},children:[v.jsx($e,{variant:"outlined",onClick:ve,startIcon:v.jsx("span",{children:""}),"data-testid":"external-search-button",sx:{fontSize:{xs:"0.8rem",sm:"0.9rem"},px:3,py:1},children:""}),v.jsx(te,{variant:"caption",color:"text.secondary",sx:{display:"block",mt:.5},children:"ISBN"})]}),B&&v.jsx(nU,{onBookSelect:be,onCancel:Pe}),g&&v.jsx(ne,{sx:{textAlign:"center",my:{xs:1.5,sm:2},px:{xs:1,sm:0}},children:v.jsx("img",{src:g,alt:"",style:{maxHeight:"120px",maxWidth:"100%",width:"auto",borderRadius:"4px"},"data-testid":"book-cover-image"})}),v.jsxs(ne,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",sm:"1fr 1fr"},gap:{xs:1,sm:1.5},mt:{xs:.5,sm:1}},children:[v.jsx(ne,{children:v.jsx(ht,{label:"",value:i,onChange:ue=>a(ue.target.value),fullWidth:!0,required:!0,size:"small",inputProps:{"data-testid":"book-title-input"}})}),v.jsx(ne,{children:v.jsx(ht,{label:"",value:s,onChange:ue=>o(ue.target.value),fullWidth:!0,size:"small",inputProps:{"data-testid":"book-author-input"}})}),v.jsx(ne,{children:v.jsx(ht,{label:"",value:c,onChange:ue=>d(ue.target.value),fullWidth:!0,size:"small",inputProps:{"data-testid":"book-publisher-input"}})}),v.jsx(ne,{children:v.jsx(ht,{label:"",value:f,onChange:ue=>p(ue.target.value),fullWidth:!0,size:"small",inputProps:{"data-testid":"book-publishdate-input"}})})]}),v.jsx(ne,{sx:{mt:{xs:1.5,sm:2}},children:v.jsx(Ns,{multiple:!0,freeSolo:!0,options:R,value:x,getOptionLabel:ue=>typeof ue=="string"?ue:ue.inputValue||ue.tag||"",onChange:(ue,Se)=>{const Ae=(Se||[]).map(Fe=>{if(typeof Fe=="string")return Fe;if(Fe&&typeof Fe=="object"){if("inputValue"in Fe&&Fe.inputValue)return Fe.inputValue;if("tag"in Fe&&Fe.tag)return Fe.tag}return""}).filter(Boolean);b(Ae)},inputValue:A,onInputChange:(ue,Se)=>E(Se),renderInput:ue=>v.jsx(ht,{...ue,label:"",fullWidth:!0,size:"small",placeholder:": ,,",inputProps:{...ue.inputProps,"data-testid":"book-tags-input",style:{fontSize:"0.9rem"}}}),sx:{"& .MuiChip-root":{fontSize:{xs:"0.75rem",sm:"0.8rem"},height:{xs:"24px",sm:"28px"}}}})}),v.jsx(ne,{sx:{mt:{xs:1.5,sm:2}},children:v.jsxs(Mi,{fullWidth:!0,size:"small",children:[v.jsx(Ca,{id:"book-status-label",children:""}),v.jsx(Ya,{labelId:"book-status-label",value:C,label:"",onChange:ue=>T(ue.target.value),"data-testid":"book-status-select",sx:{"& .MuiSelect-select":{fontSize:{xs:"0.9rem",sm:"1rem"}}},children:t_.map(ue=>v.jsx(Zt,{value:ue,children:Vs(ue)},ue))})]})}),v.jsx(ne,{sx:{mt:{xs:1.5,sm:2}},children:v.jsxs(Mi,{fullWidth:!0,size:"small",children:[v.jsx(Ca,{id:"book-acquisition-type-label",children:""}),v.jsx(Ya,{labelId:"book-acquisition-type-label",value:D,label:"",onChange:ue=>k(ue.target.value),"data-testid":"book-acquisition-type-select",sx:{"& .MuiSelect-select":{fontSize:{xs:"0.9rem",sm:"1rem"}}},children:Vj.map(ue=>v.jsx(Zt,{value:ue,children:GM(ue)},ue))})]})}),W&&v.jsxs(vi,{severity:"info",sx:{mt:{xs:1.5,sm:2},fontSize:{xs:"0.8rem",sm:"0.9rem"}},"data-testid":"duplicate-book-alert",children:[": ",W.title]}),(G||V)&&v.jsx(te,{color:"error",sx:{mt:{xs:1.5,sm:2},fontSize:{xs:"0.8rem",sm:"0.9rem"}},"data-testid":"book-form-error",children:G||V}),v.jsx($e,{type:"submit",variant:"contained",disabled:P||W,sx:{mt:{xs:2,sm:3},mb:{xs:"72px",sm:2},width:{xs:"100%",sm:"auto"},fontSize:{xs:"0.9rem",sm:"1rem"},py:{xs:1.5,sm:2}},"data-testid":"book-add-submit",children:P?"...":W?"":""})]})}function iU(n,e){var t=Object.setPrototypeOf;t?t(n,e):n.__proto__=e}function aU(n,e){e===void 0&&(e=n.constructor);var t=Error.captureStackTrace;t&&t(n,e)}var sU=function(){var n=function(t,r){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(i[s]=a[s])},n(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),oU=function(n){sU(e,n);function e(t,r){var i=this.constructor,a=n.call(this,t,r)||this;return Object.defineProperty(a,"name",{value:i.name,enumerable:!1,configurable:!0}),iU(a,i.prototype),aU(a),a}return e}(Error),lU=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Wi=function(n){lU(e,n);function e(t){t===void 0&&(t=void 0);var r=n.call(this,t)||this;return r.message=t,r}return e.prototype.getKind=function(){var t=this.constructor;return t.kind},e.kind="Exception",e}(oU),cU=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Ua=function(n){cU(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="ArgumentException",e}(Wi),uU=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),it=function(n){uU(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="IllegalArgumentException",e}(Wi),dU=function(){function n(e){if(this.binarizer=e,e===null)throw new it("Binarizer must be non-null.")}return n.prototype.getWidth=function(){return this.binarizer.getWidth()},n.prototype.getHeight=function(){return this.binarizer.getHeight()},n.prototype.getBlackRow=function(e,t){return this.binarizer.getBlackRow(e,t)},n.prototype.getBlackMatrix=function(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix},n.prototype.isCropSupported=function(){return this.binarizer.getLuminanceSource().isCropSupported()},n.prototype.crop=function(e,t,r,i){var a=this.binarizer.getLuminanceSource().crop(e,t,r,i);return new n(this.binarizer.createBinarizer(a))},n.prototype.isRotateSupported=function(){return this.binarizer.getLuminanceSource().isRotateSupported()},n.prototype.rotateCounterClockwise=function(){var e=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new n(this.binarizer.createBinarizer(e))},n.prototype.rotateCounterClockwise45=function(){var e=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new n(this.binarizer.createBinarizer(e))},n.prototype.toString=function(){try{return this.getBlackMatrix().toString()}catch{return""}},n}(),fU=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),zr=function(n){fU(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.getChecksumInstance=function(){return new e},e.kind="ChecksumException",e}(Wi),hU=function(){function n(e){this.source=e}return n.prototype.getLuminanceSource=function(){return this.source},n.prototype.getWidth=function(){return this.source.getWidth()},n.prototype.getHeight=function(){return this.source.getHeight()},n}(),Sn=function(){function n(){}return n.arraycopy=function(e,t,r,i,a){for(;a--;)r[i++]=e[t++]},n.currentTimeMillis=function(){return Date.now()},n}(),pU=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),n_=function(n){pU(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="IndexOutOfBoundsException",e}(Wi),gU=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),AI=function(n){gU(e,n);function e(t,r){t===void 0&&(t=void 0),r===void 0&&(r=void 0);var i=n.call(this,r)||this;return i.index=t,i.message=r,i}return e.kind="ArrayIndexOutOfBoundsException",e}(n_),mU=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Rr=function(){function n(){}return n.fill=function(e,t){for(var r=0,i=e.length;r<i;r++)e[r]=t},n.fillWithin=function(e,t,r,i){n.rangeCheck(e.length,t,r);for(var a=t;a<r;a++)e[a]=i},n.rangeCheck=function(e,t,r){if(t>r)throw new it("fromIndex("+t+") > toIndex("+r+")");if(t<0)throw new AI(t);if(r>e)throw new AI(r)},n.asList=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e},n.create=function(e,t,r){var i=Array.from({length:e});return i.map(function(a){return Array.from({length:t}).fill(r)})},n.createInt32Array=function(e,t,r){var i=Array.from({length:e});return i.map(function(a){return Int32Array.from({length:t}).fill(r)})},n.equals=function(e,t){if(!e||!t||!e.length||!t.length||e.length!==t.length)return!1;for(var r=0,i=e.length;r<i;r++)if(e[r]!==t[r])return!1;return!0},n.hashCode=function(e){var t,r;if(e===null)return 0;var i=1;try{for(var a=mU(e),s=a.next();!s.done;s=a.next()){var o=s.value;i=31*i+o}}catch(c){t={error:c}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}return i},n.fillUint8Array=function(e,t){for(var r=0;r!==e.length;r++)e[r]=t},n.copyOf=function(e,t){return e.slice(0,t)},n.copyOfUint8Array=function(e,t){if(e.length<=t){var r=new Uint8Array(t);return r.set(e),r}return e.slice(0,t)},n.copyOfRange=function(e,t,r){var i=r-t,a=new Int32Array(i);return Sn.arraycopy(e,t,a,0,i),a},n.binarySearch=function(e,t,r){r===void 0&&(r=n.numberComparator);for(var i=0,a=e.length-1;i<=a;){var s=a+i>>1,o=r(t,e[s]);if(o>0)i=s+1;else if(o<0)a=s-1;else return s}return-i-1},n.numberComparator=function(e,t){return e-t},n}(),It=function(){function n(){}return n.numberOfTrailingZeros=function(e){var t;if(e===0)return 32;var r=31;return t=e<<16,t!==0&&(r-=16,e=t),t=e<<8,t!==0&&(r-=8,e=t),t=e<<4,t!==0&&(r-=4,e=t),t=e<<2,t!==0&&(r-=2,e=t),r-(e<<1>>>31)},n.numberOfLeadingZeros=function(e){if(e===0)return 32;var t=1;return e>>>16||(t+=16,e<<=16),e>>>24||(t+=8,e<<=8),e>>>28||(t+=4,e<<=4),e>>>30||(t+=2,e<<=2),t-=e>>>31,t},n.toHexString=function(e){return e.toString(16)},n.toBinaryString=function(e){return String(parseInt(String(e),2))},n.bitCount=function(e){return e=e-(e>>>1&1431655765),e=(e&858993459)+(e>>>2&858993459),e=e+(e>>>4)&252645135,e=e+(e>>>8),e=e+(e>>>16),e&63},n.truncDivision=function(e,t){return Math.trunc(e/t)},n.parseInt=function(e,t){return t===void 0&&(t=void 0),parseInt(e,t)},n.MIN_VALUE_32_BITS=-2147483648,n.MAX_VALUE=Number.MAX_SAFE_INTEGER,n}(),Gr=function(){function n(e,t){e===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=e,t==null?this.bits=n.makeArray(e):this.bits=t)}return n.prototype.getSize=function(){return this.size},n.prototype.getSizeInBytes=function(){return Math.floor((this.size+7)/8)},n.prototype.ensureCapacity=function(e){if(e>this.bits.length*32){var t=n.makeArray(e);Sn.arraycopy(this.bits,0,t,0,this.bits.length),this.bits=t}},n.prototype.get=function(e){return(this.bits[Math.floor(e/32)]&1<<(e&31))!==0},n.prototype.set=function(e){this.bits[Math.floor(e/32)]|=1<<(e&31)},n.prototype.flip=function(e){this.bits[Math.floor(e/32)]^=1<<(e&31)},n.prototype.getNextSet=function(e){var t=this.size;if(e>=t)return t;var r=this.bits,i=Math.floor(e/32),a=r[i];a&=~((1<<(e&31))-1);for(var s=r.length;a===0;){if(++i===s)return t;a=r[i]}var o=i*32+It.numberOfTrailingZeros(a);return o>t?t:o},n.prototype.getNextUnset=function(e){var t=this.size;if(e>=t)return t;var r=this.bits,i=Math.floor(e/32),a=~r[i];a&=~((1<<(e&31))-1);for(var s=r.length;a===0;){if(++i===s)return t;a=~r[i]}var o=i*32+It.numberOfTrailingZeros(a);return o>t?t:o},n.prototype.setBulk=function(e,t){this.bits[Math.floor(e/32)]=t},n.prototype.setRange=function(e,t){if(t<e||e<0||t>this.size)throw new it;if(t!==e){t--;for(var r=Math.floor(e/32),i=Math.floor(t/32),a=this.bits,s=r;s<=i;s++){var o=s>r?0:e&31,c=s<i?31:t&31,d=(2<<c)-(1<<o);a[s]|=d}}},n.prototype.clear=function(){for(var e=this.bits.length,t=this.bits,r=0;r<e;r++)t[r]=0},n.prototype.isRange=function(e,t,r){if(t<e||e<0||t>this.size)throw new it;if(t===e)return!0;t--;for(var i=Math.floor(e/32),a=Math.floor(t/32),s=this.bits,o=i;o<=a;o++){var c=o>i?0:e&31,d=o<a?31:t&31,f=(2<<d)-(1<<c)&4294967295;if((s[o]&f)!==(r?f:0))return!1}return!0},n.prototype.appendBit=function(e){this.ensureCapacity(this.size+1),e&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++},n.prototype.appendBits=function(e,t){if(t<0||t>32)throw new it("Num bits must be between 0 and 32");this.ensureCapacity(this.size+t);for(var r=t;r>0;r--)this.appendBit((e>>r-1&1)===1)},n.prototype.appendBitArray=function(e){var t=e.size;this.ensureCapacity(this.size+t);for(var r=0;r<t;r++)this.appendBit(e.get(r))},n.prototype.xor=function(e){if(this.size!==e.size)throw new it("Sizes don't match");for(var t=this.bits,r=0,i=t.length;r<i;r++)t[r]^=e.bits[r]},n.prototype.toBytes=function(e,t,r,i){for(var a=0;a<i;a++){for(var s=0,o=0;o<8;o++)this.get(e)&&(s|=1<<7-o),e++;t[r+a]=s}},n.prototype.getBitArray=function(){return this.bits},n.prototype.reverse=function(){for(var e=new Int32Array(this.bits.length),t=Math.floor((this.size-1)/32),r=t+1,i=this.bits,a=0;a<r;a++){var s=i[a];s=s>>1&1431655765|(s&1431655765)<<1,s=s>>2&858993459|(s&858993459)<<2,s=s>>4&252645135|(s&252645135)<<4,s=s>>8&16711935|(s&16711935)<<8,s=s>>16&65535|(s&65535)<<16,e[t-a]=s}if(this.size!==r*32){for(var o=r*32-this.size,c=e[0]>>>o,a=1;a<r;a++){var d=e[a];c|=d<<32-o,e[a-1]=c,c=d>>>o}e[r-1]=c}this.bits=e},n.makeArray=function(e){return new Int32Array(Math.floor((e+31)/32))},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.size===t.size&&Rr.equals(this.bits,t.bits)},n.prototype.hashCode=function(){return 31*this.size+Rr.hashCode(this.bits)},n.prototype.toString=function(){for(var e="",t=0,r=this.size;t<r;t++)(t&7)===0&&(e+=" "),e+=this.get(t)?"X":".";return e},n.prototype.clone=function(){return new n(this.size,this.bits.slice())},n.prototype.toArray=function(){for(var e=[],t=0,r=this.size;t<r;t++)e.push(this.get(t));return e},n}(),uw;(function(n){n[n.OTHER=0]="OTHER",n[n.PURE_BARCODE=1]="PURE_BARCODE",n[n.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",n[n.TRY_HARDER=3]="TRY_HARDER",n[n.CHARACTER_SET=4]="CHARACTER_SET",n[n.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",n[n.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",n[n.ENABLE_CODE_39_EXTENDED_MODE=7]="ENABLE_CODE_39_EXTENDED_MODE",n[n.ASSUME_GS1=8]="ASSUME_GS1",n[n.RETURN_CODABAR_START_END=9]="RETURN_CODABAR_START_END",n[n.NEED_RESULT_POINT_CALLBACK=10]="NEED_RESULT_POINT_CALLBACK",n[n.ALLOWED_EAN_EXTENSIONS=11]="ALLOWED_EAN_EXTENSIONS"})(uw||(uw={}));const Bn=uw;var yU=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),je=function(n){yU(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.getFormatInstance=function(){return new e},e.kind="FormatException",e}(Wi),vU=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},on;(function(n){n[n.Cp437=0]="Cp437",n[n.ISO8859_1=1]="ISO8859_1",n[n.ISO8859_2=2]="ISO8859_2",n[n.ISO8859_3=3]="ISO8859_3",n[n.ISO8859_4=4]="ISO8859_4",n[n.ISO8859_5=5]="ISO8859_5",n[n.ISO8859_6=6]="ISO8859_6",n[n.ISO8859_7=7]="ISO8859_7",n[n.ISO8859_8=8]="ISO8859_8",n[n.ISO8859_9=9]="ISO8859_9",n[n.ISO8859_10=10]="ISO8859_10",n[n.ISO8859_11=11]="ISO8859_11",n[n.ISO8859_13=12]="ISO8859_13",n[n.ISO8859_14=13]="ISO8859_14",n[n.ISO8859_15=14]="ISO8859_15",n[n.ISO8859_16=15]="ISO8859_16",n[n.SJIS=16]="SJIS",n[n.Cp1250=17]="Cp1250",n[n.Cp1251=18]="Cp1251",n[n.Cp1252=19]="Cp1252",n[n.Cp1256=20]="Cp1256",n[n.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",n[n.UTF8=22]="UTF8",n[n.ASCII=23]="ASCII",n[n.Big5=24]="Big5",n[n.GB18030=25]="GB18030",n[n.EUC_KR=26]="EUC_KR"})(on||(on={}));var Dr=function(){function n(e,t,r){for(var i,a,s=[],o=3;o<arguments.length;o++)s[o-3]=arguments[o];this.valueIdentifier=e,this.name=r,typeof t=="number"?this.values=Int32Array.from([t]):this.values=t,this.otherEncodingNames=s,n.VALUE_IDENTIFIER_TO_ECI.set(e,this),n.NAME_TO_ECI.set(r,this);for(var c=this.values,d=0,f=c.length;d!==f;d++){var p=c[d];n.VALUES_TO_ECI.set(p,this)}try{for(var g=vU(s),m=g.next();!m.done;m=g.next()){var x=m.value;n.NAME_TO_ECI.set(x,this)}}catch(b){i={error:b}}finally{try{m&&!m.done&&(a=g.return)&&a.call(g)}finally{if(i)throw i.error}}}return n.prototype.getValueIdentifier=function(){return this.valueIdentifier},n.prototype.getName=function(){return this.name},n.prototype.getValue=function(){return this.values[0]},n.getCharacterSetECIByValue=function(e){if(e<0||e>=900)throw new je("incorect value");var t=n.VALUES_TO_ECI.get(e);if(t===void 0)throw new je("incorect value");return t},n.getCharacterSetECIByName=function(e){var t=n.NAME_TO_ECI.get(e);if(t===void 0)throw new je("incorect value");return t},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.getName()===t.getName()},n.VALUE_IDENTIFIER_TO_ECI=new Map,n.VALUES_TO_ECI=new Map,n.NAME_TO_ECI=new Map,n.Cp437=new n(on.Cp437,Int32Array.from([0,2]),"Cp437"),n.ISO8859_1=new n(on.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),n.ISO8859_2=new n(on.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),n.ISO8859_3=new n(on.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),n.ISO8859_4=new n(on.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),n.ISO8859_5=new n(on.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),n.ISO8859_6=new n(on.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),n.ISO8859_7=new n(on.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),n.ISO8859_8=new n(on.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),n.ISO8859_9=new n(on.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),n.ISO8859_10=new n(on.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),n.ISO8859_11=new n(on.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),n.ISO8859_13=new n(on.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),n.ISO8859_14=new n(on.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),n.ISO8859_15=new n(on.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),n.ISO8859_16=new n(on.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),n.SJIS=new n(on.SJIS,20,"SJIS","Shift_JIS"),n.Cp1250=new n(on.Cp1250,21,"Cp1250","windows-1250"),n.Cp1251=new n(on.Cp1251,22,"Cp1251","windows-1251"),n.Cp1252=new n(on.Cp1252,23,"Cp1252","windows-1252"),n.Cp1256=new n(on.Cp1256,24,"Cp1256","windows-1256"),n.UnicodeBigUnmarked=new n(on.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),n.UTF8=new n(on.UTF8,26,"UTF8","UTF-8"),n.ASCII=new n(on.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),n.Big5=new n(on.Big5,28,"Big5"),n.GB18030=new n(on.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),n.EUC_KR=new n(on.EUC_KR,30,"EUC_KR","EUC-KR"),n}(),xU=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),xm=function(n){xU(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="UnsupportedOperationException",e}(Wi),Ra=function(){function n(){}return n.decode=function(e,t){var r=this.encodingName(t);return this.customDecoder?this.customDecoder(e,r):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(r)?this.decodeFallback(e,r):new TextDecoder(r).decode(e)},n.shouldDecodeOnFallback=function(e){return!n.isBrowser()&&e==="ISO-8859-1"},n.encode=function(e,t){var r=this.encodingName(t);return this.customEncoder?this.customEncoder(e,r):typeof TextEncoder>"u"?this.encodeFallback(e):new TextEncoder().encode(e)},n.isBrowser=function(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"},n.encodingName=function(e){return typeof e=="string"?e:e.getName()},n.encodingCharacterSet=function(e){return e instanceof Dr?e:Dr.getCharacterSetECIByName(e)},n.decodeFallback=function(e,t){var r=this.encodingCharacterSet(t);if(n.isDecodeFallbackSupported(r)){for(var i="",a=0,s=e.length;a<s;a++){var o=e[a].toString(16);o.length<2&&(o="0"+o),i+="%"+o}return decodeURIComponent(i)}if(r.equals(Dr.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(e.buffer));throw new xm("Encoding "+this.encodingName(t)+" not supported by fallback.")},n.isDecodeFallbackSupported=function(e){return e.equals(Dr.UTF8)||e.equals(Dr.ISO8859_1)||e.equals(Dr.ASCII)},n.encodeFallback=function(e){for(var t=btoa(unescape(encodeURIComponent(e))),r=t.split(""),i=[],a=0;a<r.length;a++)i.push(r[a].charCodeAt(0));return new Uint8Array(i)},n}(),jt=function(){function n(){}return n.castAsNonUtf8Char=function(e,t){t===void 0&&(t=null);var r=t?t.getName():this.ISO88591;return Ra.decode(new Uint8Array([e]),r)},n.guessEncoding=function(e,t){if(t!=null&&t.get(Bn.CHARACTER_SET)!==void 0)return t.get(Bn.CHARACTER_SET).toString();for(var r=e.length,i=!0,a=!0,s=!0,o=0,c=0,d=0,f=0,p=0,g=0,m=0,x=0,b=0,A=0,E=0,C=e.length>3&&e[0]===239&&e[1]===187&&e[2]===191,T=0;T<r&&(i||a||s);T++){var D=e[T]&255;s&&(o>0?(D&128)===0?s=!1:o--:(D&128)!==0&&((D&64)===0?s=!1:(o++,(D&32)===0?c++:(o++,(D&16)===0?d++:(o++,(D&8)===0?f++:s=!1))))),i&&(D>127&&D<160?i=!1:D>159&&(D<192||D===215||D===247)&&E++),a&&(p>0?D<64||D===127||D>252?a=!1:p--:D===128||D===160||D>239?a=!1:D>160&&D<224?(g++,x=0,m++,m>b&&(b=m)):D>127?(p++,m=0,x++,x>A&&(A=x)):(m=0,x=0))}return s&&o>0&&(s=!1),a&&p>0&&(a=!1),s&&(C||c+d+f>0)?n.UTF8:a&&(n.ASSUME_SHIFT_JIS||b>=3||A>=3)?n.SHIFT_JIS:i&&a?b===2&&g===2||E*10>=r?n.SHIFT_JIS:n.ISO88591:i?n.ISO88591:a?n.SHIFT_JIS:s?n.UTF8:n.PLATFORM_DEFAULT_ENCODING},n.format=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var i=-1;function a(o,c,d,f,p,g){if(o==="%%")return"%";if(t[++i]!==void 0){o=f?parseInt(f.substr(1)):void 0;var m=p?parseInt(p.substr(1)):void 0,x;switch(g){case"s":x=t[i];break;case"c":x=t[i][0];break;case"f":x=parseFloat(t[i]).toFixed(o);break;case"p":x=parseFloat(t[i]).toPrecision(o);break;case"e":x=parseFloat(t[i]).toExponential(o);break;case"x":x=parseInt(t[i]).toString(m||16);break;case"d":x=parseFloat(parseInt(t[i],m||10).toPrecision(o)).toFixed(0);break}x=typeof x=="object"?JSON.stringify(x):(+x).toString(m);for(var b=parseInt(d),A=d&&d[0]+""=="0"?"0":" ";x.length<b;)x=c!==void 0?x+A:A+x;return x}}var s=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(s,a)},n.getBytes=function(e,t){return Ra.encode(e,t)},n.getCharCode=function(e,t){return t===void 0&&(t=0),e.charCodeAt(t)},n.getCharAt=function(e){return String.fromCharCode(e)},n.SHIFT_JIS=Dr.SJIS.getName(),n.GB2312="GB2312",n.ISO88591=Dr.ISO8859_1.getName(),n.EUC_JP="EUC_JP",n.UTF8=Dr.UTF8.getName(),n.PLATFORM_DEFAULT_ENCODING=n.UTF8,n.ASSUME_SHIFT_JIS=!1,n}(),Et=function(){function n(e){e===void 0&&(e=""),this.value=e}return n.prototype.enableDecoding=function(e){return this.encoding=e,this},n.prototype.append=function(e){return typeof e=="string"?this.value+=e.toString():this.encoding?this.value+=jt.castAsNonUtf8Char(e,this.encoding):this.value+=String.fromCharCode(e),this},n.prototype.appendChars=function(e,t,r){for(var i=t;t<t+r;i++)this.append(e[i]);return this},n.prototype.length=function(){return this.value.length},n.prototype.charAt=function(e){return this.value.charAt(e)},n.prototype.deleteCharAt=function(e){this.value=this.value.substr(0,e)+this.value.substring(e+1)},n.prototype.setCharAt=function(e,t){this.value=this.value.substr(0,e)+t+this.value.substr(e+1)},n.prototype.substring=function(e,t){return this.value.substring(e,t)},n.prototype.setLengthToZero=function(){this.value=""},n.prototype.toString=function(){return this.value},n.prototype.insert=function(e,t){this.value=this.value.substring(0,e)+t+this.value.substring(e)},n}(),Us=function(){function n(e,t,r,i){if(this.width=e,this.height=t,this.rowSize=r,this.bits=i,t==null&&(t=e),this.height=t,e<1||t<1)throw new it("Both dimensions must be greater than 0");r==null&&(r=Math.floor((e+31)/32)),this.rowSize=r,i==null&&(this.bits=new Int32Array(this.rowSize*this.height))}return n.parseFromBooleanArray=function(e){for(var t=e.length,r=e[0].length,i=new n(r,t),a=0;a<t;a++)for(var s=e[a],o=0;o<r;o++)s[o]&&i.set(o,a);return i},n.parseFromString=function(e,t,r){if(e===null)throw new it("stringRepresentation cannot be null");for(var i=new Array(e.length),a=0,s=0,o=-1,c=0,d=0;d<e.length;)if(e.charAt(d)===`
`||e.charAt(d)==="\r"){if(a>s){if(o===-1)o=a-s;else if(a-s!==o)throw new it("row lengths do not match");s=a,c++}d++}else if(e.substring(d,d+t.length)===t)d+=t.length,i[a]=!0,a++;else if(e.substring(d,d+r.length)===r)d+=r.length,i[a]=!1,a++;else throw new it("illegal character encountered: "+e.substring(d));if(a>s){if(o===-1)o=a-s;else if(a-s!==o)throw new it("row lengths do not match");c++}for(var f=new n(o,c),p=0;p<a;p++)i[p]&&f.set(Math.floor(p%o),Math.floor(p/o));return f},n.prototype.get=function(e,t){var r=t*this.rowSize+Math.floor(e/32);return(this.bits[r]>>>(e&31)&1)!==0},n.prototype.set=function(e,t){var r=t*this.rowSize+Math.floor(e/32);this.bits[r]|=1<<(e&31)&4294967295},n.prototype.unset=function(e,t){var r=t*this.rowSize+Math.floor(e/32);this.bits[r]&=~(1<<(e&31)&4294967295)},n.prototype.flip=function(e,t){var r=t*this.rowSize+Math.floor(e/32);this.bits[r]^=1<<(e&31)&4294967295},n.prototype.xor=function(e){if(this.width!==e.getWidth()||this.height!==e.getHeight()||this.rowSize!==e.getRowSize())throw new it("input matrix dimensions do not match");for(var t=new Gr(Math.floor(this.width/32)+1),r=this.rowSize,i=this.bits,a=0,s=this.height;a<s;a++)for(var o=a*r,c=e.getRow(a,t).getBitArray(),d=0;d<r;d++)i[o+d]^=c[d]},n.prototype.clear=function(){for(var e=this.bits,t=e.length,r=0;r<t;r++)e[r]=0},n.prototype.setRegion=function(e,t,r,i){if(t<0||e<0)throw new it("Left and top must be nonnegative");if(i<1||r<1)throw new it("Height and width must be at least 1");var a=e+r,s=t+i;if(s>this.height||a>this.width)throw new it("The region must fit inside the matrix");for(var o=this.rowSize,c=this.bits,d=t;d<s;d++)for(var f=d*o,p=e;p<a;p++)c[f+Math.floor(p/32)]|=1<<(p&31)&4294967295},n.prototype.getRow=function(e,t){t==null||t.getSize()<this.width?t=new Gr(this.width):t.clear();for(var r=this.rowSize,i=this.bits,a=e*r,s=0;s<r;s++)t.setBulk(s*32,i[a+s]);return t},n.prototype.setRow=function(e,t){Sn.arraycopy(t.getBitArray(),0,this.bits,e*this.rowSize,this.rowSize)},n.prototype.rotate180=function(){for(var e=this.getWidth(),t=this.getHeight(),r=new Gr(e),i=new Gr(e),a=0,s=Math.floor((t+1)/2);a<s;a++)r=this.getRow(a,r),i=this.getRow(t-1-a,i),r.reverse(),i.reverse(),this.setRow(a,i),this.setRow(t-1-a,r)},n.prototype.getEnclosingRectangle=function(){for(var e=this.width,t=this.height,r=this.rowSize,i=this.bits,a=e,s=t,o=-1,c=-1,d=0;d<t;d++)for(var f=0;f<r;f++){var p=i[d*r+f];if(p!==0){if(d<s&&(s=d),d>c&&(c=d),f*32<a){for(var g=0;(p<<31-g&4294967295)===0;)g++;f*32+g<a&&(a=f*32+g)}if(f*32+31>o){for(var g=31;!(p>>>g);)g--;f*32+g>o&&(o=f*32+g)}}}return o<a||c<s?null:Int32Array.from([a,s,o-a+1,c-s+1])},n.prototype.getTopLeftOnBit=function(){for(var e=this.rowSize,t=this.bits,r=0;r<t.length&&t[r]===0;)r++;if(r===t.length)return null;for(var i=r/e,a=r%e*32,s=t[r],o=0;(s<<31-o&4294967295)===0;)o++;return a+=o,Int32Array.from([a,i])},n.prototype.getBottomRightOnBit=function(){for(var e=this.rowSize,t=this.bits,r=t.length-1;r>=0&&t[r]===0;)r--;if(r<0)return null;for(var i=Math.floor(r/e),a=Math.floor(r%e)*32,s=t[r],o=31;!(s>>>o);)o--;return a+=o,Int32Array.from([a,i])},n.prototype.getWidth=function(){return this.width},n.prototype.getHeight=function(){return this.height},n.prototype.getRowSize=function(){return this.rowSize},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.width===t.width&&this.height===t.height&&this.rowSize===t.rowSize&&Rr.equals(this.bits,t.bits)},n.prototype.hashCode=function(){var e=this.width;return e=31*e+this.width,e=31*e+this.height,e=31*e+this.rowSize,e=31*e+Rr.hashCode(this.bits),e},n.prototype.toString=function(e,t,r){return e===void 0&&(e="X "),t===void 0&&(t="  "),r===void 0&&(r=`
`),this.buildToString(e,t,r)},n.prototype.buildToString=function(e,t,r){for(var i=new Et,a=0,s=this.height;a<s;a++){for(var o=0,c=this.width;o<c;o++)i.append(this.get(o,a)?e:t);i.append(r)}return i.toString()},n.prototype.clone=function(){return new n(this.width,this.height,this.rowSize,this.bits.slice())},n}(),wU=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),_e=function(n){wU(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.getNotFoundInstance=function(){return new e},e.kind="NotFoundException",e}(Wi),bU=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),_U=function(n){bU(e,n);function e(t){var r=n.call(this,t)||this;return r.luminances=e.EMPTY,r.buckets=new Int32Array(e.LUMINANCE_BUCKETS),r}return e.prototype.getBlackRow=function(t,r){var i=this.getLuminanceSource(),a=i.getWidth();r==null||r.getSize()<a?r=new Gr(a):r.clear(),this.initArrays(a);for(var s=i.getRow(t,this.luminances),o=this.buckets,c=0;c<a;c++)o[(s[c]&255)>>e.LUMINANCE_SHIFT]++;var d=e.estimateBlackPoint(o);if(a<3)for(var c=0;c<a;c++)(s[c]&255)<d&&r.set(c);else for(var f=s[0]&255,p=s[1]&255,c=1;c<a-1;c++){var g=s[c+1]&255;(p*4-f-g)/2<d&&r.set(c),f=p,p=g}return r},e.prototype.getBlackMatrix=function(){var t=this.getLuminanceSource(),r=t.getWidth(),i=t.getHeight(),a=new Us(r,i);this.initArrays(r);for(var s=this.buckets,o=1;o<5;o++)for(var c=Math.floor(i*o/5),d=t.getRow(c,this.luminances),f=Math.floor(r*4/5),p=Math.floor(r/5);p<f;p++){var g=d[p]&255;s[g>>e.LUMINANCE_SHIFT]++}for(var m=e.estimateBlackPoint(s),x=t.getMatrix(),o=0;o<i;o++)for(var b=o*r,p=0;p<r;p++){var g=x[b+p]&255;g<m&&a.set(p,o)}return a},e.prototype.createBinarizer=function(t){return new e(t)},e.prototype.initArrays=function(t){this.luminances.length<t&&(this.luminances=new Uint8ClampedArray(t));for(var r=this.buckets,i=0;i<e.LUMINANCE_BUCKETS;i++)r[i]=0},e.estimateBlackPoint=function(t){for(var r=t.length,i=0,a=0,s=0,o=0;o<r;o++)t[o]>s&&(a=o,s=t[o]),t[o]>i&&(i=t[o]);for(var c=0,d=0,o=0;o<r;o++){var f=o-a,p=t[o]*f*f;p>d&&(c=o,d=p)}if(a>c){var g=a;a=c,c=g}if(c-a<=r/16)throw new _e;for(var m=c-1,x=-1,o=c-1;o>a;o--){var b=o-a,p=b*b*(c-o)*(i-t[o]);p>x&&(m=o,x=p)}return m<<e.LUMINANCE_SHIFT},e.LUMINANCE_BITS=5,e.LUMINANCE_SHIFT=8-e.LUMINANCE_BITS,e.LUMINANCE_BUCKETS=1<<e.LUMINANCE_BITS,e.EMPTY=Uint8ClampedArray.from([0]),e}(hU),AU=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),EU=function(n){AU(e,n);function e(t){var r=n.call(this,t)||this;return r.matrix=null,r}return e.prototype.getBlackMatrix=function(){if(this.matrix!==null)return this.matrix;var t=this.getLuminanceSource(),r=t.getWidth(),i=t.getHeight();if(r>=e.MINIMUM_DIMENSION&&i>=e.MINIMUM_DIMENSION){var a=t.getMatrix(),s=r>>e.BLOCK_SIZE_POWER;(r&e.BLOCK_SIZE_MASK)!==0&&s++;var o=i>>e.BLOCK_SIZE_POWER;(i&e.BLOCK_SIZE_MASK)!==0&&o++;var c=e.calculateBlackPoints(a,s,o,r,i),d=new Us(r,i);e.calculateThresholdForBlock(a,s,o,r,i,c,d),this.matrix=d}else this.matrix=n.prototype.getBlackMatrix.call(this);return this.matrix},e.prototype.createBinarizer=function(t){return new e(t)},e.calculateThresholdForBlock=function(t,r,i,a,s,o,c){for(var d=s-e.BLOCK_SIZE,f=a-e.BLOCK_SIZE,p=0;p<i;p++){var g=p<<e.BLOCK_SIZE_POWER;g>d&&(g=d);for(var m=e.cap(p,2,i-3),x=0;x<r;x++){var b=x<<e.BLOCK_SIZE_POWER;b>f&&(b=f);for(var A=e.cap(x,2,r-3),E=0,C=-2;C<=2;C++){var T=o[m+C];E+=T[A-2]+T[A-1]+T[A]+T[A+1]+T[A+2]}var D=E/25;e.thresholdBlock(t,b,g,D,a,c)}}},e.cap=function(t,r,i){return t<r?r:t>i?i:t},e.thresholdBlock=function(t,r,i,a,s,o){for(var c=0,d=i*s+r;c<e.BLOCK_SIZE;c++,d+=s)for(var f=0;f<e.BLOCK_SIZE;f++)(t[d+f]&255)<=a&&o.set(r+f,i+c)},e.calculateBlackPoints=function(t,r,i,a,s){for(var o=s-e.BLOCK_SIZE,c=a-e.BLOCK_SIZE,d=new Array(i),f=0;f<i;f++){d[f]=new Int32Array(r);var p=f<<e.BLOCK_SIZE_POWER;p>o&&(p=o);for(var g=0;g<r;g++){var m=g<<e.BLOCK_SIZE_POWER;m>c&&(m=c);for(var x=0,b=255,A=0,E=0,C=p*a+m;E<e.BLOCK_SIZE;E++,C+=a){for(var T=0;T<e.BLOCK_SIZE;T++){var D=t[C+T]&255;x+=D,D<b&&(b=D),D>A&&(A=D)}if(A-b>e.MIN_DYNAMIC_RANGE)for(E++,C+=a;E<e.BLOCK_SIZE;E++,C+=a)for(var T=0;T<e.BLOCK_SIZE;T++)x+=t[C+T]&255}var k=x>>e.BLOCK_SIZE_POWER*2;if(A-b<=e.MIN_DYNAMIC_RANGE&&(k=b/2,f>0&&g>0)){var B=(d[f-1][g]+2*d[f][g-1]+d[f-1][g-1])/4;b<B&&(k=B)}d[f][g]=k}}return d},e.BLOCK_SIZE_POWER=3,e.BLOCK_SIZE=1<<e.BLOCK_SIZE_POWER,e.BLOCK_SIZE_MASK=e.BLOCK_SIZE-1,e.MINIMUM_DIMENSION=e.BLOCK_SIZE*5,e.MIN_DYNAMIC_RANGE=24,e}(_U),ay=function(){function n(e,t){this.width=e,this.height=t}return n.prototype.getWidth=function(){return this.width},n.prototype.getHeight=function(){return this.height},n.prototype.isCropSupported=function(){return!1},n.prototype.crop=function(e,t,r,i){throw new xm("This luminance source does not support cropping.")},n.prototype.isRotateSupported=function(){return!1},n.prototype.rotateCounterClockwise=function(){throw new xm("This luminance source does not support rotation by 90 degrees.")},n.prototype.rotateCounterClockwise45=function(){throw new xm("This luminance source does not support rotation by 45 degrees.")},n.prototype.toString=function(){for(var e=new Uint8ClampedArray(this.width),t=new Et,r=0;r<this.height;r++){for(var i=this.getRow(r,e),a=0;a<this.width;a++){var s=i[a]&255,o=void 0;s<64?o="#":s<128?o="+":s<192?o=".":o=" ",t.append(o)}t.append(`
`)}return t.toString()},n}(),SU=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),r_=function(n){SU(e,n);function e(t){var r=n.call(this,t.getWidth(),t.getHeight())||this;return r.delegate=t,r}return e.prototype.getRow=function(t,r){for(var i=this.delegate.getRow(t,r),a=this.getWidth(),s=0;s<a;s++)i[s]=255-(i[s]&255);return i},e.prototype.getMatrix=function(){for(var t=this.delegate.getMatrix(),r=this.getWidth()*this.getHeight(),i=new Uint8ClampedArray(r),a=0;a<r;a++)i[a]=255-(t[a]&255);return i},e.prototype.isCropSupported=function(){return this.delegate.isCropSupported()},e.prototype.crop=function(t,r,i,a){return new e(this.delegate.crop(t,r,i,a))},e.prototype.isRotateSupported=function(){return this.delegate.isRotateSupported()},e.prototype.invert=function(){return this.delegate},e.prototype.rotateCounterClockwise=function(){return new e(this.delegate.rotateCounterClockwise())},e.prototype.rotateCounterClockwise45=function(){return new e(this.delegate.rotateCounterClockwise45())},e}(ay),CU=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),TU=function(n){CU(e,n);function e(t,r){r===void 0&&(r=!1);var i=n.call(this,t.width,t.height)||this;return i.canvas=t,i.tempCanvasElement=null,i.buffer=e.makeBufferFromCanvasImageData(t,r),i}return e.makeBufferFromCanvasImageData=function(t,r){r===void 0&&(r=!1);var i=t.getContext("2d").getImageData(0,0,t.width,t.height);return e.toGrayscaleBuffer(i.data,t.width,t.height,r)},e.toGrayscaleBuffer=function(t,r,i,a){a===void 0&&(a=!1);var s=new Uint8ClampedArray(r*i);if(e.FRAME_INDEX=!e.FRAME_INDEX,e.FRAME_INDEX||!a)for(var o=0,c=0,d=t.length;o<d;o+=4,c++){var f=void 0,p=t[o+3];if(p===0)f=255;else{var g=t[o],m=t[o+1],x=t[o+2];f=306*g+601*m+117*x+512>>10}s[c]=f}else for(var o=0,c=0,b=t.length;o<b;o+=4,c++){var f=void 0,p=t[o+3];if(p===0)f=255;else{var g=t[o],m=t[o+1],x=t[o+2];f=306*g+601*m+117*x+512>>10}s[c]=255-f}return s},e.prototype.getRow=function(t,r){if(t<0||t>=this.getHeight())throw new it("Requested row is outside the image: "+t);var i=this.getWidth(),a=t*i;return r===null?r=this.buffer.slice(a,a+i):(r.length<i&&(r=new Uint8ClampedArray(i)),r.set(this.buffer.slice(a,a+i))),r},e.prototype.getMatrix=function(){return this.buffer},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(t,r,i,a){return n.prototype.crop.call(this,t,r,i,a),this},e.prototype.isRotateSupported=function(){return!0},e.prototype.rotateCounterClockwise=function(){return this.rotate(-90),this},e.prototype.rotateCounterClockwise45=function(){return this.rotate(-45),this},e.prototype.getTempCanvasElement=function(){if(this.tempCanvasElement===null){var t=this.canvas.ownerDocument.createElement("canvas");t.width=this.canvas.width,t.height=this.canvas.height,this.tempCanvasElement=t}return this.tempCanvasElement},e.prototype.rotate=function(t){var r=this.getTempCanvasElement(),i=r.getContext("2d"),a=t*e.DEGREE_TO_RADIANS,s=this.canvas.width,o=this.canvas.height,c=Math.ceil(Math.abs(Math.cos(a))*s+Math.abs(Math.sin(a))*o),d=Math.ceil(Math.abs(Math.sin(a))*s+Math.abs(Math.cos(a))*o);return r.width=c,r.height=d,i.translate(c/2,d/2),i.rotate(a),i.drawImage(this.canvas,s/-2,o/-2),this.buffer=e.makeBufferFromCanvasImageData(r),this},e.prototype.invert=function(){return new r_(this)},e.DEGREE_TO_RADIANS=Math.PI/180,e.FRAME_INDEX=!0,e}(ay),IU=function(){function n(e,t,r){this.deviceId=e,this.label=t,this.kind="videoinput",this.groupId=r||void 0}return n.prototype.toJSON=function(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}},n}(),Ci=function(n,e,t,r){function i(a){return a instanceof t?a:new t(function(s){s(a)})}return new(t||(t=Promise))(function(a,s){function o(f){try{d(r.next(f))}catch(p){s(p)}}function c(f){try{d(r.throw(f))}catch(p){s(p)}}function d(f){f.done?a(f.value):i(f.value).then(o,c)}d((r=r.apply(n,e||[])).next())})},Ti=function(n,e){var t={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,i,a,s;return s={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function o(d){return function(f){return c([d,f])}}function c(d){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,i&&(a=d[0]&2?i.return:d[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,d[1])).done)return a;switch(i=0,a&&(d=[d[0]&2,a.value]),d[0]){case 0:case 1:a=d;break;case 4:return t.label++,{value:d[1],done:!1};case 5:t.label++,i=d[1],d=[0];continue;case 7:d=t.ops.pop(),t.trys.pop();continue;default:if(a=t.trys,!(a=a.length>0&&a[a.length-1])&&(d[0]===6||d[0]===2)){t=0;continue}if(d[0]===3&&(!a||d[1]>a[0]&&d[1]<a[3])){t.label=d[1];break}if(d[0]===6&&t.label<a[1]){t.label=a[1],a=d;break}if(a&&t.label<a[2]){t.label=a[2],t.ops.push(d);break}a[2]&&t.ops.pop(),t.trys.pop();continue}d=e.call(n,t)}catch(f){d=[6,f],i=0}finally{r=a=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}},DU=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},xf=function(){function n(e,t,r){t===void 0&&(t=500),this.reader=e,this.timeBetweenScansMillis=t,this._hints=r,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}return Object.defineProperty(n.prototype,"hasNavigator",{get:function(){return typeof navigator<"u"},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isMediaDevicesSuported",{get:function(){return this.hasNavigator&&!!navigator.mediaDevices},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"canEnumerateDevices",{get:function(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"timeBetweenDecodingAttempts",{get:function(){return this._timeBetweenDecodingAttempts},set:function(e){this._timeBetweenDecodingAttempts=e<0?0:e},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"hints",{get:function(){return this._hints},set:function(e){this._hints=e||null},enumerable:!1,configurable:!0}),n.prototype.listVideoInputDevices=function(){return Ci(this,void 0,void 0,function(){var e,t,r,i,a,s,o,c,d,f,p,g;return Ti(this,function(m){switch(m.label){case 0:if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");return[4,navigator.mediaDevices.enumerateDevices()];case 1:e=m.sent(),t=[];try{for(r=DU(e),i=r.next();!i.done;i=r.next())a=i.value,s=a.kind==="video"?"videoinput":a.kind,s==="videoinput"&&(o=a.deviceId||a.id,c=a.label||"Video device "+(t.length+1),d=a.groupId,f={deviceId:o,label:c,kind:s,groupId:d},t.push(f))}catch(x){p={error:x}}finally{try{i&&!i.done&&(g=r.return)&&g.call(r)}finally{if(p)throw p.error}}return[2,t]}})})},n.prototype.getVideoInputDevices=function(){return Ci(this,void 0,void 0,function(){var e;return Ti(this,function(t){switch(t.label){case 0:return[4,this.listVideoInputDevices()];case 1:return e=t.sent(),[2,e.map(function(r){return new IU(r.deviceId,r.label)})]}})})},n.prototype.findDeviceById=function(e){return Ci(this,void 0,void 0,function(){var t;return Ti(this,function(r){switch(r.label){case 0:return[4,this.listVideoInputDevices()];case 1:return t=r.sent(),t?[2,t.find(function(i){return i.deviceId===e})]:[2,null]}})})},n.prototype.decodeFromInputVideoDevice=function(e,t){return Ci(this,void 0,void 0,function(){return Ti(this,function(r){switch(r.label){case 0:return[4,this.decodeOnceFromVideoDevice(e,t)];case 1:return[2,r.sent()]}})})},n.prototype.decodeOnceFromVideoDevice=function(e,t){return Ci(this,void 0,void 0,function(){var r,i;return Ti(this,function(a){switch(a.label){case 0:return this.reset(),e?r={deviceId:{exact:e}}:r={facingMode:"environment"},i={video:r},[4,this.decodeOnceFromConstraints(i,t)];case 1:return[2,a.sent()]}})})},n.prototype.decodeOnceFromConstraints=function(e,t){return Ci(this,void 0,void 0,function(){var r;return Ti(this,function(i){switch(i.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return r=i.sent(),[4,this.decodeOnceFromStream(r,t)];case 2:return[2,i.sent()]}})})},n.prototype.decodeOnceFromStream=function(e,t){return Ci(this,void 0,void 0,function(){var r,i;return Ti(this,function(a){switch(a.label){case 0:return this.reset(),[4,this.attachStreamToVideo(e,t)];case 1:return r=a.sent(),[4,this.decodeOnce(r)];case 2:return i=a.sent(),[2,i]}})})},n.prototype.decodeFromInputVideoDeviceContinuously=function(e,t,r){return Ci(this,void 0,void 0,function(){return Ti(this,function(i){switch(i.label){case 0:return[4,this.decodeFromVideoDevice(e,t,r)];case 1:return[2,i.sent()]}})})},n.prototype.decodeFromVideoDevice=function(e,t,r){return Ci(this,void 0,void 0,function(){var i,a;return Ti(this,function(s){switch(s.label){case 0:return e?i={deviceId:{exact:e}}:i={facingMode:"environment"},a={video:i},[4,this.decodeFromConstraints(a,t,r)];case 1:return[2,s.sent()]}})})},n.prototype.decodeFromConstraints=function(e,t,r){return Ci(this,void 0,void 0,function(){var i;return Ti(this,function(a){switch(a.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return i=a.sent(),[4,this.decodeFromStream(i,t,r)];case 2:return[2,a.sent()]}})})},n.prototype.decodeFromStream=function(e,t,r){return Ci(this,void 0,void 0,function(){var i;return Ti(this,function(a){switch(a.label){case 0:return this.reset(),[4,this.attachStreamToVideo(e,t)];case 1:return i=a.sent(),[4,this.decodeContinuously(i,r)];case 2:return[2,a.sent()]}})})},n.prototype.stopAsyncDecode=function(){this._stopAsyncDecode=!0},n.prototype.stopContinuousDecode=function(){this._stopContinuousDecode=!0},n.prototype.attachStreamToVideo=function(e,t){return Ci(this,void 0,void 0,function(){var r;return Ti(this,function(i){switch(i.label){case 0:return r=this.prepareVideoElement(t),this.addVideoSource(r,e),this.videoElement=r,this.stream=e,[4,this.playVideoOnLoadAsync(r)];case 1:return i.sent(),[2,r]}})})},n.prototype.playVideoOnLoadAsync=function(e){var t=this;return new Promise(function(r,i){return t.playVideoOnLoad(e,function(){return r()})})},n.prototype.playVideoOnLoad=function(e,t){var r=this;this.videoEndedListener=function(){return r.stopStreams()},this.videoCanPlayListener=function(){return r.tryPlayVideo(e)},e.addEventListener("ended",this.videoEndedListener),e.addEventListener("canplay",this.videoCanPlayListener),e.addEventListener("playing",t),this.tryPlayVideo(e)},n.prototype.isVideoPlaying=function(e){return e.currentTime>0&&!e.paused&&!e.ended&&e.readyState>2},n.prototype.tryPlayVideo=function(e){return Ci(this,void 0,void 0,function(){return Ti(this,function(t){switch(t.label){case 0:if(this.isVideoPlaying(e))return console.warn("Trying to play video that is already playing."),[2];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,e.play()];case 2:return t.sent(),[3,4];case 3:return t.sent(),console.warn("It was not possible to play the video."),[3,4];case 4:return[2]}})})},n.prototype.getMediaElement=function(e,t){var r=document.getElementById(e);if(!r)throw new Ua("element with id '"+e+"' not found");if(r.nodeName.toLowerCase()!==t.toLowerCase())throw new Ua("element with id '"+e+"' must be an "+t+" element");return r},n.prototype.decodeFromImage=function(e,t){if(!e&&!t)throw new Ua("either imageElement with a src set or an url must be provided");return t&&!e?this.decodeFromImageUrl(t):this.decodeFromImageElement(e)},n.prototype.decodeFromVideo=function(e,t){if(!e&&!t)throw new Ua("Either an element with a src set or an URL must be provided");return t&&!e?this.decodeFromVideoUrl(t):this.decodeFromVideoElement(e)},n.prototype.decodeFromVideoContinuously=function(e,t,r){if(e===void 0&&t===void 0)throw new Ua("Either an element with a src set or an URL must be provided");return t&&!e?this.decodeFromVideoUrlContinuously(t,r):this.decodeFromVideoElementContinuously(e,r)},n.prototype.decodeFromImageElement=function(e){if(!e)throw new Ua("An image element must be provided.");this.reset();var t=this.prepareImageElement(e);this.imageElement=t;var r;return this.isImageLoaded(t)?r=this.decodeOnce(t,!1,!0):r=this._decodeOnLoadImage(t),r},n.prototype.decodeFromVideoElement=function(e){var t=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideo(t)},n.prototype.decodeFromVideoElementContinuously=function(e,t){var r=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideoContinuously(r,t)},n.prototype._decodeFromVideoElementSetup=function(e){if(!e)throw new Ua("A video element must be provided.");this.reset();var t=this.prepareVideoElement(e);return this.videoElement=t,t},n.prototype.decodeFromImageUrl=function(e){if(!e)throw new Ua("An URL must be provided.");this.reset();var t=this.prepareImageElement();this.imageElement=t;var r=this._decodeOnLoadImage(t);return t.src=e,r},n.prototype.decodeFromVideoUrl=function(e){if(!e)throw new Ua("An URL must be provided.");this.reset();var t=this.prepareVideoElement(),r=this.decodeFromVideoElement(t);return t.src=e,r},n.prototype.decodeFromVideoUrlContinuously=function(e,t){if(!e)throw new Ua("An URL must be provided.");this.reset();var r=this.prepareVideoElement(),i=this.decodeFromVideoElementContinuously(r,t);return r.src=e,i},n.prototype._decodeOnLoadImage=function(e){var t=this;return new Promise(function(r,i){t.imageLoadedListener=function(){return t.decodeOnce(e,!1,!0).then(r,i)},e.addEventListener("load",t.imageLoadedListener)})},n.prototype._decodeOnLoadVideo=function(e){return Ci(this,void 0,void 0,function(){return Ti(this,function(t){switch(t.label){case 0:return[4,this.playVideoOnLoadAsync(e)];case 1:return t.sent(),[4,this.decodeOnce(e)];case 2:return[2,t.sent()]}})})},n.prototype._decodeOnLoadVideoContinuously=function(e,t){return Ci(this,void 0,void 0,function(){return Ti(this,function(r){switch(r.label){case 0:return[4,this.playVideoOnLoadAsync(e)];case 1:return r.sent(),this.decodeContinuously(e,t),[2]}})})},n.prototype.isImageLoaded=function(e){return!(!e.complete||e.naturalWidth===0)},n.prototype.prepareImageElement=function(e){var t;return typeof e>"u"&&(t=document.createElement("img"),t.width=200,t.height=200),typeof e=="string"&&(t=this.getMediaElement(e,"img")),e instanceof HTMLImageElement&&(t=e),t},n.prototype.prepareVideoElement=function(e){var t;return!e&&typeof document<"u"&&(t=document.createElement("video"),t.width=200,t.height=200),typeof e=="string"&&(t=this.getMediaElement(e,"video")),e instanceof HTMLVideoElement&&(t=e),t.setAttribute("autoplay","true"),t.setAttribute("muted","true"),t.setAttribute("playsinline","true"),t},n.prototype.decodeOnce=function(e,t,r){var i=this;t===void 0&&(t=!0),r===void 0&&(r=!0),this._stopAsyncDecode=!1;var a=function(s,o){if(i._stopAsyncDecode){o(new _e("Video stream has ended before any code could be detected.")),i._stopAsyncDecode=void 0;return}try{var c=i.decode(e);s(c)}catch(g){var d=t&&g instanceof _e,f=g instanceof zr||g instanceof je,p=f&&r;if(d||p)return setTimeout(a,i._timeBetweenDecodingAttempts,s,o);o(g)}};return new Promise(function(s,o){return a(s,o)})},n.prototype.decodeContinuously=function(e,t){var r=this;this._stopContinuousDecode=!1;var i=function(){if(r._stopContinuousDecode){r._stopContinuousDecode=void 0;return}try{var a=r.decode(e);t(a,null),setTimeout(i,r.timeBetweenScansMillis)}catch(c){t(null,c);var s=c instanceof zr||c instanceof je,o=c instanceof _e;(s||o)&&setTimeout(i,r._timeBetweenDecodingAttempts)}};i()},n.prototype.decode=function(e){var t=this.createBinaryBitmap(e);return this.decodeBitmap(t)},n.prototype.createBinaryBitmap=function(e){this.getCaptureCanvasContext(e);var t=!1;e instanceof HTMLVideoElement?(this.drawFrameOnCanvas(e),t=!0):this.drawImageOnCanvas(e);var r=this.getCaptureCanvas(e),i=new TU(r,t),a=new EU(i);return new dU(a)},n.prototype.getCaptureCanvasContext=function(e){if(!this.captureCanvasContext){var t=this.getCaptureCanvas(e),r=void 0;try{r=t.getContext("2d",{willReadFrequently:!0})}catch{r=t.getContext("2d")}this.captureCanvasContext=r}return this.captureCanvasContext},n.prototype.getCaptureCanvas=function(e){if(!this.captureCanvas){var t=this.createCaptureCanvas(e);this.captureCanvas=t}return this.captureCanvas},n.prototype.drawFrameOnCanvas=function(e,t,r){t===void 0&&(t={sx:0,sy:0,sWidth:e.videoWidth,sHeight:e.videoHeight,dx:0,dy:0,dWidth:e.videoWidth,dHeight:e.videoHeight}),r===void 0&&(r=this.captureCanvasContext),r.drawImage(e,t.sx,t.sy,t.sWidth,t.sHeight,t.dx,t.dy,t.dWidth,t.dHeight)},n.prototype.drawImageOnCanvas=function(e,t,r){t===void 0&&(t={sx:0,sy:0,sWidth:e.naturalWidth,sHeight:e.naturalHeight,dx:0,dy:0,dWidth:e.naturalWidth,dHeight:e.naturalHeight}),r===void 0&&(r=this.captureCanvasContext),r.drawImage(e,t.sx,t.sy,t.sWidth,t.sHeight,t.dx,t.dy,t.dWidth,t.dHeight)},n.prototype.decodeBitmap=function(e){return this.reader.decode(e,this._hints)},n.prototype.createCaptureCanvas=function(e){if(typeof document>"u")return this._destroyCaptureCanvas(),null;var t=document.createElement("canvas"),r,i;return typeof e<"u"&&(e instanceof HTMLVideoElement?(r=e.videoWidth,i=e.videoHeight):e instanceof HTMLImageElement&&(r=e.naturalWidth||e.width,i=e.naturalHeight||e.height)),t.style.width=r+"px",t.style.height=i+"px",t.width=r,t.height=i,t},n.prototype.stopStreams=function(){this.stream&&(this.stream.getVideoTracks().forEach(function(e){return e.stop()}),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()},n.prototype.reset=function(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()},n.prototype._destroyVideoElement=function(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)},n.prototype._destroyImageElement=function(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)},n.prototype._destroyCaptureCanvas=function(){this.captureCanvasContext=void 0,this.captureCanvas=void 0},n.prototype.addVideoSource=function(e,t){try{e.srcObject=t}catch{e.src=URL.createObjectURL(t)}},n.prototype.cleanVideoSource=function(e){try{e.srcObject=null}catch{e.src=""}this.videoElement.removeAttribute("src")},n}(),wi=function(){function n(e,t,r,i,a,s){r===void 0&&(r=t==null?0:8*t.length),s===void 0&&(s=Sn.currentTimeMillis()),this.text=e,this.rawBytes=t,this.numBits=r,this.resultPoints=i,this.format=a,this.timestamp=s,this.text=e,this.rawBytes=t,r==null?this.numBits=t==null?0:8*t.length:this.numBits=r,this.resultPoints=i,this.format=a,this.resultMetadata=null,s==null?this.timestamp=Sn.currentTimeMillis():this.timestamp=s}return n.prototype.getText=function(){return this.text},n.prototype.getRawBytes=function(){return this.rawBytes},n.prototype.getNumBits=function(){return this.numBits},n.prototype.getResultPoints=function(){return this.resultPoints},n.prototype.getBarcodeFormat=function(){return this.format},n.prototype.getResultMetadata=function(){return this.resultMetadata},n.prototype.putMetadata=function(e,t){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(e,t)},n.prototype.putAllMetadata=function(e){e!==null&&(this.resultMetadata===null?this.resultMetadata=e:this.resultMetadata=new Map(e))},n.prototype.addResultPoints=function(e){var t=this.resultPoints;if(t===null)this.resultPoints=e;else if(e!==null&&e.length>0){var r=new Array(t.length+e.length);Sn.arraycopy(t,0,r,0,t.length),Sn.arraycopy(e,0,r,t.length,e.length),this.resultPoints=r}},n.prototype.getTimestamp=function(){return this.timestamp},n.prototype.toString=function(){return this.text},n}(),dw;(function(n){n[n.AZTEC=0]="AZTEC",n[n.CODABAR=1]="CODABAR",n[n.CODE_39=2]="CODE_39",n[n.CODE_93=3]="CODE_93",n[n.CODE_128=4]="CODE_128",n[n.DATA_MATRIX=5]="DATA_MATRIX",n[n.EAN_8=6]="EAN_8",n[n.EAN_13=7]="EAN_13",n[n.ITF=8]="ITF",n[n.MAXICODE=9]="MAXICODE",n[n.PDF_417=10]="PDF_417",n[n.QR_CODE=11]="QR_CODE",n[n.RSS_14=12]="RSS_14",n[n.RSS_EXPANDED=13]="RSS_EXPANDED",n[n.UPC_A=14]="UPC_A",n[n.UPC_E=15]="UPC_E",n[n.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(dw||(dw={}));const et=dw;var fw;(function(n){n[n.OTHER=0]="OTHER",n[n.ORIENTATION=1]="ORIENTATION",n[n.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",n[n.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",n[n.ISSUE_NUMBER=4]="ISSUE_NUMBER",n[n.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",n[n.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",n[n.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",n[n.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",n[n.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",n[n.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(fw||(fw={}));const ai=fw;var sy=function(){function n(e,t,r,i,a,s){a===void 0&&(a=-1),s===void 0&&(s=-1),this.rawBytes=e,this.text=t,this.byteSegments=r,this.ecLevel=i,this.structuredAppendSequenceNumber=a,this.structuredAppendParity=s,this.numBits=e==null?0:8*e.length}return n.prototype.getRawBytes=function(){return this.rawBytes},n.prototype.getNumBits=function(){return this.numBits},n.prototype.setNumBits=function(e){this.numBits=e},n.prototype.getText=function(){return this.text},n.prototype.getByteSegments=function(){return this.byteSegments},n.prototype.getECLevel=function(){return this.ecLevel},n.prototype.getErrorsCorrected=function(){return this.errorsCorrected},n.prototype.setErrorsCorrected=function(e){this.errorsCorrected=e},n.prototype.getErasures=function(){return this.erasures},n.prototype.setErasures=function(e){this.erasures=e},n.prototype.getOther=function(){return this.other},n.prototype.setOther=function(e){this.other=e},n.prototype.hasStructuredAppend=function(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0},n.prototype.getStructuredAppendParity=function(){return this.structuredAppendParity},n.prototype.getStructuredAppendSequenceNumber=function(){return this.structuredAppendSequenceNumber},n}(),qh=function(){function n(){}return n.prototype.exp=function(e){return this.expTable[e]},n.prototype.log=function(e){if(e===0)throw new it;return this.logTable[e]},n.addOrSubtract=function(e,t){return e^t},n}(),Ol=function(){function n(e,t){if(t.length===0)throw new it;this.field=e;var r=t.length;if(r>1&&t[0]===0){for(var i=1;i<r&&t[i]===0;)i++;i===r?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(r-i),Sn.arraycopy(t,i,this.coefficients,0,this.coefficients.length))}else this.coefficients=t}return n.prototype.getCoefficients=function(){return this.coefficients},n.prototype.getDegree=function(){return this.coefficients.length-1},n.prototype.isZero=function(){return this.coefficients[0]===0},n.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},n.prototype.evaluateAt=function(e){if(e===0)return this.getCoefficient(0);var t=this.coefficients,r;if(e===1){r=0;for(var i=0,a=t.length;i!==a;i++){var s=t[i];r=qh.addOrSubtract(r,s)}return r}r=t[0];for(var o=t.length,c=this.field,i=1;i<o;i++)r=qh.addOrSubtract(c.multiply(e,r),t[i]);return r},n.prototype.addOrSubtract=function(e){if(!this.field.equals(e.field))throw new it("GenericGFPolys do not have same GenericGF field");if(this.isZero())return e;if(e.isZero())return this;var t=this.coefficients,r=e.coefficients;if(t.length>r.length){var i=t;t=r,r=i}var a=new Int32Array(r.length),s=r.length-t.length;Sn.arraycopy(r,0,a,0,s);for(var o=s;o<r.length;o++)a[o]=qh.addOrSubtract(t[o-s],r[o]);return new n(this.field,a)},n.prototype.multiply=function(e){if(!this.field.equals(e.field))throw new it("GenericGFPolys do not have same GenericGF field");if(this.isZero()||e.isZero())return this.field.getZero();for(var t=this.coefficients,r=t.length,i=e.coefficients,a=i.length,s=new Int32Array(r+a-1),o=this.field,c=0;c<r;c++)for(var d=t[c],f=0;f<a;f++)s[c+f]=qh.addOrSubtract(s[c+f],o.multiply(d,i[f]));return new n(o,s)},n.prototype.multiplyScalar=function(e){if(e===0)return this.field.getZero();if(e===1)return this;for(var t=this.coefficients.length,r=this.field,i=new Int32Array(t),a=this.coefficients,s=0;s<t;s++)i[s]=r.multiply(a[s],e);return new n(r,i)},n.prototype.multiplyByMonomial=function(e,t){if(e<0)throw new it;if(t===0)return this.field.getZero();for(var r=this.coefficients,i=r.length,a=new Int32Array(i+e),s=this.field,o=0;o<i;o++)a[o]=s.multiply(r[o],t);return new n(s,a)},n.prototype.divide=function(e){if(!this.field.equals(e.field))throw new it("GenericGFPolys do not have same GenericGF field");if(e.isZero())throw new it("Divide by 0");for(var t=this.field,r=t.getZero(),i=this,a=e.getCoefficient(e.getDegree()),s=t.inverse(a);i.getDegree()>=e.getDegree()&&!i.isZero();){var o=i.getDegree()-e.getDegree(),c=t.multiply(i.getCoefficient(i.getDegree()),s),d=e.multiplyByMonomial(o,c),f=t.buildMonomial(o,c);r=r.addOrSubtract(f),i=i.addOrSubtract(d)}return[r,i]},n.prototype.toString=function(){for(var e="",t=this.getDegree();t>=0;t--){var r=this.getCoefficient(t);if(r!==0){if(r<0?(e+=" - ",r=-r):e.length>0&&(e+=" + "),t===0||r!==1){var i=this.field.log(r);i===0?e+="1":i===1?e+="a":(e+="a^",e+=i)}t!==0&&(t===1?e+="x":(e+="x^",e+=t))}}return e},n}(),RU=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),YM=function(n){RU(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="ArithmeticException",e}(Wi),MU=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Ui=function(n){MU(e,n);function e(t,r,i){var a=n.call(this)||this;a.primitive=t,a.size=r,a.generatorBase=i;for(var s=new Int32Array(r),o=1,c=0;c<r;c++)s[c]=o,o*=2,o>=r&&(o^=t,o&=r-1);a.expTable=s;for(var d=new Int32Array(r),c=0;c<r-1;c++)d[s[c]]=c;return a.logTable=d,a.zero=new Ol(a,Int32Array.from([0])),a.one=new Ol(a,Int32Array.from([1])),a}return e.prototype.getZero=function(){return this.zero},e.prototype.getOne=function(){return this.one},e.prototype.buildMonomial=function(t,r){if(t<0)throw new it;if(r===0)return this.zero;var i=new Int32Array(t+1);return i[0]=r,new Ol(this,i)},e.prototype.inverse=function(t){if(t===0)throw new YM;return this.expTable[this.size-this.logTable[t]-1]},e.prototype.multiply=function(t,r){return t===0||r===0?0:this.expTable[(this.logTable[t]+this.logTable[r])%(this.size-1)]},e.prototype.getSize=function(){return this.size},e.prototype.getGeneratorBase=function(){return this.generatorBase},e.prototype.toString=function(){return"GF(0x"+It.toHexString(this.primitive)+","+this.size+")"},e.prototype.equals=function(t){return t===this},e.AZTEC_DATA_12=new e(4201,4096,1),e.AZTEC_DATA_10=new e(1033,1024,1),e.AZTEC_DATA_6=new e(67,64,1),e.AZTEC_PARAM=new e(19,16,1),e.QR_CODE_FIELD_256=new e(285,256,0),e.DATA_MATRIX_FIELD_256=new e(301,256,1),e.AZTEC_DATA_8=e.DATA_MATRIX_FIELD_256,e.MAXICODE_FIELD_64=e.AZTEC_DATA_6,e}(qh),OU=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),jg=function(n){OU(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="ReedSolomonException",e}(Wi),PU=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Z0=function(n){PU(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="IllegalStateException",e}(Wi),oy=function(){function n(e){this.field=e}return n.prototype.decode=function(e,t){for(var r=this.field,i=new Ol(r,e),a=new Int32Array(t),s=!0,o=0;o<t;o++){var c=i.evaluateAt(r.exp(o+r.getGeneratorBase()));a[a.length-1-o]=c,c!==0&&(s=!1)}if(!s)for(var d=new Ol(r,a),f=this.runEuclideanAlgorithm(r.buildMonomial(t,1),d,t),p=f[0],g=f[1],m=this.findErrorLocations(p),x=this.findErrorMagnitudes(g,m),o=0;o<m.length;o++){var b=e.length-1-r.log(m[o]);if(b<0)throw new jg("Bad error location");e[b]=Ui.addOrSubtract(e[b],x[o])}},n.prototype.runEuclideanAlgorithm=function(e,t,r){if(e.getDegree()<t.getDegree()){var i=e;e=t,t=i}for(var a=this.field,s=e,o=t,c=a.getZero(),d=a.getOne();o.getDegree()>=(r/2|0);){var f=s,p=c;if(s=o,c=d,s.isZero())throw new jg("r_{i-1} was zero");o=f;for(var g=a.getZero(),m=s.getCoefficient(s.getDegree()),x=a.inverse(m);o.getDegree()>=s.getDegree()&&!o.isZero();){var b=o.getDegree()-s.getDegree(),A=a.multiply(o.getCoefficient(o.getDegree()),x);g=g.addOrSubtract(a.buildMonomial(b,A)),o=o.addOrSubtract(s.multiplyByMonomial(b,A))}if(d=g.multiply(c).addOrSubtract(p),o.getDegree()>=s.getDegree())throw new Z0("Division algorithm failed to reduce polynomial?")}var E=d.getCoefficient(0);if(E===0)throw new jg("sigmaTilde(0) was zero");var C=a.inverse(E),T=d.multiplyScalar(C),D=o.multiplyScalar(C);return[T,D]},n.prototype.findErrorLocations=function(e){var t=e.getDegree();if(t===1)return Int32Array.from([e.getCoefficient(1)]);for(var r=new Int32Array(t),i=0,a=this.field,s=1;s<a.getSize()&&i<t;s++)e.evaluateAt(s)===0&&(r[i]=a.inverse(s),i++);if(i!==t)throw new jg("Error locator degree does not match number of roots");return r},n.prototype.findErrorMagnitudes=function(e,t){for(var r=t.length,i=new Int32Array(r),a=this.field,s=0;s<r;s++){for(var o=a.inverse(t[s]),c=1,d=0;d<r;d++)if(s!==d){var f=a.multiply(t[d],o),p=(f&1)===0?f|1:f&-2;c=a.multiply(c,p)}i[s]=a.multiply(e.evaluateAt(o),a.inverse(c)),a.getGeneratorBase()!==0&&(i[s]=a.multiply(i[s],o))}return i},n}(),ti;(function(n){n[n.UPPER=0]="UPPER",n[n.LOWER=1]="LOWER",n[n.MIXED=2]="MIXED",n[n.DIGIT=3]="DIGIT",n[n.PUNCT=4]="PUNCT",n[n.BINARY=5]="BINARY"})(ti||(ti={}));var EI=function(){function n(){}return n.prototype.decode=function(e){this.ddata=e;var t=e.getBits(),r=this.extractBits(t),i=this.correctBits(r),a=n.convertBoolArrayToByteArray(i),s=n.getEncodedData(i),o=new sy(a,s,null,null);return o.setNumBits(i.length),o},n.highLevelDecode=function(e){return this.getEncodedData(e)},n.getEncodedData=function(e){for(var t=e.length,r=ti.UPPER,i=ti.UPPER,a="",s=0;s<t;)if(i===ti.BINARY){if(t-s<5)break;var o=n.readCode(e,s,5);if(s+=5,o===0){if(t-s<11)break;o=n.readCode(e,s,11)+31,s+=11}for(var c=0;c<o;c++){if(t-s<8){s=t;break}var d=n.readCode(e,s,8);a+=jt.castAsNonUtf8Char(d),s+=8}i=r}else{var f=i===ti.DIGIT?4:5;if(t-s<f)break;var d=n.readCode(e,s,f);s+=f;var p=n.getCharacter(i,d);p.startsWith("CTRL_")?(r=i,i=n.getTable(p.charAt(5)),p.charAt(6)==="L"&&(r=i)):(a+=p,i=r)}return a},n.getTable=function(e){switch(e){case"L":return ti.LOWER;case"P":return ti.PUNCT;case"M":return ti.MIXED;case"D":return ti.DIGIT;case"B":return ti.BINARY;case"U":default:return ti.UPPER}},n.getCharacter=function(e,t){switch(e){case ti.UPPER:return n.UPPER_TABLE[t];case ti.LOWER:return n.LOWER_TABLE[t];case ti.MIXED:return n.MIXED_TABLE[t];case ti.PUNCT:return n.PUNCT_TABLE[t];case ti.DIGIT:return n.DIGIT_TABLE[t];default:throw new Z0("Bad table")}},n.prototype.correctBits=function(e){var t,r;this.ddata.getNbLayers()<=2?(r=6,t=Ui.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(r=8,t=Ui.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(r=10,t=Ui.AZTEC_DATA_10):(r=12,t=Ui.AZTEC_DATA_12);var i=this.ddata.getNbDatablocks(),a=e.length/r;if(a<i)throw new je;for(var s=e.length%r,o=new Int32Array(a),c=0;c<a;c++,s+=r)o[c]=n.readCode(e,s,r);try{var d=new oy(t);d.decode(o,a-i)}catch(A){throw new je(A)}for(var f=(1<<r)-1,p=0,c=0;c<i;c++){var g=o[c];if(g===0||g===f)throw new je;(g===1||g===f-1)&&p++}for(var m=new Array(i*r-p),x=0,c=0;c<i;c++){var g=o[c];if(g===1||g===f-1)m.fill(g>1,x,x+r-1),x+=r-1;else for(var b=r-1;b>=0;--b)m[x++]=(g&1<<b)!==0}return m},n.prototype.extractBits=function(e){var t=this.ddata.isCompact(),r=this.ddata.getNbLayers(),i=(t?11:14)+r*4,a=new Int32Array(i),s=new Array(this.totalBitsInLayer(r,t));if(t)for(var o=0;o<a.length;o++)a[o]=o;else for(var c=i+1+2*It.truncDivision(It.truncDivision(i,2)-1,15),d=i/2,f=It.truncDivision(c,2),o=0;o<d;o++){var p=o+It.truncDivision(o,15);a[d-o-1]=f-p-1,a[d+o]=f+p+1}for(var o=0,g=0;o<r;o++){for(var m=(r-o)*4+(t?9:12),x=o*2,b=i-1-x,A=0;A<m;A++)for(var E=A*2,C=0;C<2;C++)s[g+E+C]=e.get(a[x+C],a[x+A]),s[g+2*m+E+C]=e.get(a[x+A],a[b-C]),s[g+4*m+E+C]=e.get(a[b-C],a[b-A]),s[g+6*m+E+C]=e.get(a[b-A],a[x+C]);g+=m*8}return s},n.readCode=function(e,t,r){for(var i=0,a=t;a<t+r;a++)i<<=1,e[a]&&(i|=1);return i},n.readByte=function(e,t){var r=e.length-t;return r>=8?n.readCode(e,t,8):n.readCode(e,t,r)<<8-r},n.convertBoolArrayToByteArray=function(e){for(var t=new Uint8Array((e.length+7)/8),r=0;r<t.length;r++)t[r]=n.readByte(e,8*r);return t},n.prototype.totalBitsInLayer=function(e,t){return((t?88:112)+16*e)*e},n.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],n.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],n.MIXED_TABLE=["CTRL_PS"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~","","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],n.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],n.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"],n}(),Gt=function(){function n(){}return n.round=function(e){return isNaN(e)?0:e<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:e>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:e+(e<0?-.5:.5)|0},n.distance=function(e,t,r,i){var a=e-r,s=t-i;return Math.sqrt(a*a+s*s)},n.sum=function(e){for(var t=0,r=0,i=e.length;r!==i;r++){var a=e[r];t+=a}return t},n}(),hw=function(){function n(){}return n.floatToIntBits=function(e){return e},n.MAX_VALUE=Number.MAX_SAFE_INTEGER,n}(),Ke=function(){function n(e,t){this.x=e,this.y=t}return n.prototype.getX=function(){return this.x},n.prototype.getY=function(){return this.y},n.prototype.equals=function(e){if(e instanceof n){var t=e;return this.x===t.x&&this.y===t.y}return!1},n.prototype.hashCode=function(){return 31*hw.floatToIntBits(this.x)+hw.floatToIntBits(this.y)},n.prototype.toString=function(){return"("+this.x+","+this.y+")"},n.orderBestPatterns=function(e){var t=this.distance(e[0],e[1]),r=this.distance(e[1],e[2]),i=this.distance(e[0],e[2]),a,s,o;if(r>=t&&r>=i?(s=e[0],a=e[1],o=e[2]):i>=r&&i>=t?(s=e[1],a=e[0],o=e[2]):(s=e[2],a=e[0],o=e[1]),this.crossProductZ(a,s,o)<0){var c=a;a=o,o=c}e[0]=a,e[1]=s,e[2]=o},n.distance=function(e,t){return Gt.distance(e.x,e.y,t.x,t.y)},n.crossProductZ=function(e,t,r){var i=t.x,a=t.y;return(r.x-i)*(e.y-a)-(r.y-a)*(e.x-i)},n}(),i_=function(){function n(e,t){this.bits=e,this.points=t}return n.prototype.getBits=function(){return this.bits},n.prototype.getPoints=function(){return this.points},n}(),kU=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),NU=function(n){kU(e,n);function e(t,r,i,a,s){var o=n.call(this,t,r)||this;return o.compact=i,o.nbDatablocks=a,o.nbLayers=s,o}return e.prototype.getNbLayers=function(){return this.nbLayers},e.prototype.getNbDatablocks=function(){return this.nbDatablocks},e.prototype.isCompact=function(){return this.compact},e}(i_),pw=function(){function n(e,t,r,i){this.image=e,this.height=e.getHeight(),this.width=e.getWidth(),t==null&&(t=n.INIT_SIZE),r==null&&(r=e.getWidth()/2|0),i==null&&(i=e.getHeight()/2|0);var a=t/2|0;if(this.leftInit=r-a,this.rightInit=r+a,this.upInit=i-a,this.downInit=i+a,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new _e}return n.prototype.detect=function(){for(var e=this.leftInit,t=this.rightInit,r=this.upInit,i=this.downInit,a=!1,s=!0,o=!1,c=!1,d=!1,f=!1,p=!1,g=this.width,m=this.height;s;){s=!1;for(var x=!0;(x||!c)&&t<g;)x=this.containsBlackPoint(r,i,t,!1),x?(t++,s=!0,c=!0):c||t++;if(t>=g){a=!0;break}for(var b=!0;(b||!d)&&i<m;)b=this.containsBlackPoint(e,t,i,!0),b?(i++,s=!0,d=!0):d||i++;if(i>=m){a=!0;break}for(var A=!0;(A||!f)&&e>=0;)A=this.containsBlackPoint(r,i,e,!1),A?(e--,s=!0,f=!0):f||e--;if(e<0){a=!0;break}for(var E=!0;(E||!p)&&r>=0;)E=this.containsBlackPoint(e,t,r,!0),E?(r--,s=!0,p=!0):p||r--;if(r<0){a=!0;break}s&&(o=!0)}if(!a&&o){for(var C=t-e,T=null,D=1;T===null&&D<C;D++)T=this.getBlackPointOnSegment(e,i-D,e+D,i);if(T==null)throw new _e;for(var k=null,D=1;k===null&&D<C;D++)k=this.getBlackPointOnSegment(e,r+D,e+D,r);if(k==null)throw new _e;for(var B=null,D=1;B===null&&D<C;D++)B=this.getBlackPointOnSegment(t,r+D,t-D,r);if(B==null)throw new _e;for(var O=null,D=1;O===null&&D<C;D++)O=this.getBlackPointOnSegment(t,i-D,t-D,i);if(O==null)throw new _e;return this.centerEdges(O,T,B,k)}else throw new _e},n.prototype.getBlackPointOnSegment=function(e,t,r,i){for(var a=Gt.round(Gt.distance(e,t,r,i)),s=(r-e)/a,o=(i-t)/a,c=this.image,d=0;d<a;d++){var f=Gt.round(e+d*s),p=Gt.round(t+d*o);if(c.get(f,p))return new Ke(f,p)}return null},n.prototype.centerEdges=function(e,t,r,i){var a=e.getX(),s=e.getY(),o=t.getX(),c=t.getY(),d=r.getX(),f=r.getY(),p=i.getX(),g=i.getY(),m=n.CORR;return a<this.width/2?[new Ke(p-m,g+m),new Ke(o+m,c+m),new Ke(d-m,f-m),new Ke(a+m,s-m)]:[new Ke(p+m,g+m),new Ke(o+m,c-m),new Ke(d-m,f+m),new Ke(a-m,s-m)]},n.prototype.containsBlackPoint=function(e,t,r,i){var a=this.image;if(i){for(var s=e;s<=t;s++)if(a.get(s,r))return!0}else for(var o=e;o<=t;o++)if(a.get(r,o))return!0;return!1},n.INIT_SIZE=10,n.CORR=1,n}(),SI=function(){function n(){}return n.checkAndNudgePoints=function(e,t){for(var r=e.getWidth(),i=e.getHeight(),a=!0,s=0;s<t.length&&a;s+=2){var o=Math.floor(t[s]),c=Math.floor(t[s+1]);if(o<-1||o>r||c<-1||c>i)throw new _e;a=!1,o===-1?(t[s]=0,a=!0):o===r&&(t[s]=r-1,a=!0),c===-1?(t[s+1]=0,a=!0):c===i&&(t[s+1]=i-1,a=!0)}a=!0;for(var s=t.length-2;s>=0&&a;s-=2){var o=Math.floor(t[s]),c=Math.floor(t[s+1]);if(o<-1||o>r||c<-1||c>i)throw new _e;a=!1,o===-1?(t[s]=0,a=!0):o===r&&(t[s]=r-1,a=!0),c===-1?(t[s+1]=0,a=!0):c===i&&(t[s+1]=i-1,a=!0)}},n}(),qM=function(){function n(e,t,r,i,a,s,o,c,d){this.a11=e,this.a21=t,this.a31=r,this.a12=i,this.a22=a,this.a32=s,this.a13=o,this.a23=c,this.a33=d}return n.quadrilateralToQuadrilateral=function(e,t,r,i,a,s,o,c,d,f,p,g,m,x,b,A){var E=n.quadrilateralToSquare(e,t,r,i,a,s,o,c),C=n.squareToQuadrilateral(d,f,p,g,m,x,b,A);return C.times(E)},n.prototype.transformPoints=function(e){for(var t=e.length,r=this.a11,i=this.a12,a=this.a13,s=this.a21,o=this.a22,c=this.a23,d=this.a31,f=this.a32,p=this.a33,g=0;g<t;g+=2){var m=e[g],x=e[g+1],b=a*m+c*x+p;e[g]=(r*m+s*x+d)/b,e[g+1]=(i*m+o*x+f)/b}},n.prototype.transformPointsWithValues=function(e,t){for(var r=this.a11,i=this.a12,a=this.a13,s=this.a21,o=this.a22,c=this.a23,d=this.a31,f=this.a32,p=this.a33,g=e.length,m=0;m<g;m++){var x=e[m],b=t[m],A=a*x+c*b+p;e[m]=(r*x+s*b+d)/A,t[m]=(i*x+o*b+f)/A}},n.squareToQuadrilateral=function(e,t,r,i,a,s,o,c){var d=e-r+a-o,f=t-i+s-c;if(d===0&&f===0)return new n(r-e,a-r,e,i-t,s-i,t,0,0,1);var p=r-a,g=o-a,m=i-s,x=c-s,b=p*x-g*m,A=(d*x-g*f)/b,E=(p*f-d*m)/b;return new n(r-e+A*r,o-e+E*o,e,i-t+A*i,c-t+E*c,t,A,E,1)},n.quadrilateralToSquare=function(e,t,r,i,a,s,o,c){return n.squareToQuadrilateral(e,t,r,i,a,s,o,c).buildAdjoint()},n.prototype.buildAdjoint=function(){return new n(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)},n.prototype.times=function(e){return new n(this.a11*e.a11+this.a21*e.a12+this.a31*e.a13,this.a11*e.a21+this.a21*e.a22+this.a31*e.a23,this.a11*e.a31+this.a21*e.a32+this.a31*e.a33,this.a12*e.a11+this.a22*e.a12+this.a32*e.a13,this.a12*e.a21+this.a22*e.a22+this.a32*e.a23,this.a12*e.a31+this.a22*e.a32+this.a32*e.a33,this.a13*e.a11+this.a23*e.a12+this.a33*e.a13,this.a13*e.a21+this.a23*e.a22+this.a33*e.a23,this.a13*e.a31+this.a23*e.a32+this.a33*e.a33)},n}(),LU=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),BU=function(n){LU(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.sampleGrid=function(t,r,i,a,s,o,c,d,f,p,g,m,x,b,A,E,C,T,D){var k=qM.quadrilateralToQuadrilateral(a,s,o,c,d,f,p,g,m,x,b,A,E,C,T,D);return this.sampleGridWithTransform(t,r,i,k)},e.prototype.sampleGridWithTransform=function(t,r,i,a){if(r<=0||i<=0)throw new _e;for(var s=new Us(r,i),o=new Float32Array(2*r),c=0;c<i;c++){for(var d=o.length,f=c+.5,p=0;p<d;p+=2)o[p]=p/2+.5,o[p+1]=f;a.transformPoints(o),SI.checkAndNudgePoints(t,o);try{for(var p=0;p<d;p+=2)t.get(Math.floor(o[p]),Math.floor(o[p+1]))&&s.set(p/2,c)}catch{throw new _e}}return s},e}(SI),a_=function(){function n(){}return n.setGridSampler=function(e){n.gridSampler=e},n.getInstance=function(){return n.gridSampler},n.gridSampler=new BU,n}(),Bi=function(){function n(e,t){this.x=e,this.y=t}return n.prototype.toResultPoint=function(){return new Ke(this.getX(),this.getY())},n.prototype.getX=function(){return this.x},n.prototype.getY=function(){return this.y},n}(),FU=function(){function n(e){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=e}return n.prototype.detect=function(){return this.detectMirror(!1)},n.prototype.detectMirror=function(e){var t=this.getMatrixCenter(),r=this.getBullsEyeCorners(t);if(e){var i=r[0];r[0]=r[2],r[2]=i}this.extractParameters(r);var a=this.sampleGrid(this.image,r[this.shift%4],r[(this.shift+1)%4],r[(this.shift+2)%4],r[(this.shift+3)%4]),s=this.getMatrixCornerPoints(r);return new NU(a,s,this.compact,this.nbDataBlocks,this.nbLayers)},n.prototype.extractParameters=function(e){if(!this.isValidPoint(e[0])||!this.isValidPoint(e[1])||!this.isValidPoint(e[2])||!this.isValidPoint(e[3]))throw new _e;var t=2*this.nbCenterLayers,r=new Int32Array([this.sampleLine(e[0],e[1],t),this.sampleLine(e[1],e[2],t),this.sampleLine(e[2],e[3],t),this.sampleLine(e[3],e[0],t)]);this.shift=this.getRotation(r,t);for(var i=0,a=0;a<4;a++){var s=r[(this.shift+a)%4];this.compact?(i<<=7,i+=s>>1&127):(i<<=10,i+=(s>>2&992)+(s>>1&31))}var o=this.getCorrectedParameterData(i,this.compact);this.compact?(this.nbLayers=(o>>6)+1,this.nbDataBlocks=(o&63)+1):(this.nbLayers=(o>>11)+1,this.nbDataBlocks=(o&2047)+1)},n.prototype.getRotation=function(e,t){var r=0;e.forEach(function(a,s,o){var c=(a>>t-2<<1)+(a&1);r=(r<<3)+c}),r=((r&1)<<11)+(r>>1);for(var i=0;i<4;i++)if(It.bitCount(r^this.EXPECTED_CORNER_BITS[i])<=2)return i;throw new _e},n.prototype.getCorrectedParameterData=function(e,t){var r,i;t?(r=7,i=2):(r=10,i=4);for(var a=r-i,s=new Int32Array(r),o=r-1;o>=0;--o)s[o]=e&15,e>>=4;try{var c=new oy(Ui.AZTEC_PARAM);c.decode(s,a)}catch{throw new _e}for(var d=0,o=0;o<i;o++)d=(d<<4)+s[o];return d},n.prototype.getBullsEyeCorners=function(e){var t=e,r=e,i=e,a=e,s=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){var o=this.getFirstDifferent(t,s,1,-1),c=this.getFirstDifferent(r,s,1,1),d=this.getFirstDifferent(i,s,-1,1),f=this.getFirstDifferent(a,s,-1,-1);if(this.nbCenterLayers>2){var p=this.distancePoint(f,o)*this.nbCenterLayers/(this.distancePoint(a,t)*(this.nbCenterLayers+2));if(p<.75||p>1.25||!this.isWhiteOrBlackRectangle(o,c,d,f))break}t=o,r=c,i=d,a=f,s=!s}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new _e;this.compact=this.nbCenterLayers===5;var g=new Ke(t.getX()+.5,t.getY()-.5),m=new Ke(r.getX()+.5,r.getY()+.5),x=new Ke(i.getX()-.5,i.getY()+.5),b=new Ke(a.getX()-.5,a.getY()-.5);return this.expandSquare([g,m,x,b],2*this.nbCenterLayers-3,2*this.nbCenterLayers)},n.prototype.getMatrixCenter=function(){var e,t,r,i;try{var a=new pw(this.image).detect();e=a[0],t=a[1],r=a[2],i=a[3]}catch{var s=this.image.getWidth()/2,o=this.image.getHeight()/2;e=this.getFirstDifferent(new Bi(s+7,o-7),!1,1,-1).toResultPoint(),t=this.getFirstDifferent(new Bi(s+7,o+7),!1,1,1).toResultPoint(),r=this.getFirstDifferent(new Bi(s-7,o+7),!1,-1,1).toResultPoint(),i=this.getFirstDifferent(new Bi(s-7,o-7),!1,-1,-1).toResultPoint()}var c=Gt.round((e.getX()+i.getX()+t.getX()+r.getX())/4),d=Gt.round((e.getY()+i.getY()+t.getY()+r.getY())/4);try{var a=new pw(this.image,15,c,d).detect();e=a[0],t=a[1],r=a[2],i=a[3]}catch{e=this.getFirstDifferent(new Bi(c+7,d-7),!1,1,-1).toResultPoint(),t=this.getFirstDifferent(new Bi(c+7,d+7),!1,1,1).toResultPoint(),r=this.getFirstDifferent(new Bi(c-7,d+7),!1,-1,1).toResultPoint(),i=this.getFirstDifferent(new Bi(c-7,d-7),!1,-1,-1).toResultPoint()}return c=Gt.round((e.getX()+i.getX()+t.getX()+r.getX())/4),d=Gt.round((e.getY()+i.getY()+t.getY()+r.getY())/4),new Bi(c,d)},n.prototype.getMatrixCornerPoints=function(e){return this.expandSquare(e,2*this.nbCenterLayers,this.getDimension())},n.prototype.sampleGrid=function(e,t,r,i,a){var s=a_.getInstance(),o=this.getDimension(),c=o/2-this.nbCenterLayers,d=o/2+this.nbCenterLayers;return s.sampleGrid(e,o,o,c,c,d,c,d,d,c,d,t.getX(),t.getY(),r.getX(),r.getY(),i.getX(),i.getY(),a.getX(),a.getY())},n.prototype.sampleLine=function(e,t,r){for(var i=0,a=this.distanceResultPoint(e,t),s=a/r,o=e.getX(),c=e.getY(),d=s*(t.getX()-e.getX())/a,f=s*(t.getY()-e.getY())/a,p=0;p<r;p++)this.image.get(Gt.round(o+p*d),Gt.round(c+p*f))&&(i|=1<<r-p-1);return i},n.prototype.isWhiteOrBlackRectangle=function(e,t,r,i){var a=3;e=new Bi(e.getX()-a,e.getY()+a),t=new Bi(t.getX()-a,t.getY()-a),r=new Bi(r.getX()+a,r.getY()-a),i=new Bi(i.getX()+a,i.getY()+a);var s=this.getColor(i,e);if(s===0)return!1;var o=this.getColor(e,t);return o!==s||(o=this.getColor(t,r),o!==s)?!1:(o=this.getColor(r,i),o===s)},n.prototype.getColor=function(e,t){for(var r=this.distancePoint(e,t),i=(t.getX()-e.getX())/r,a=(t.getY()-e.getY())/r,s=0,o=e.getX(),c=e.getY(),d=this.image.get(e.getX(),e.getY()),f=Math.ceil(r),p=0;p<f;p++)o+=i,c+=a,this.image.get(Gt.round(o),Gt.round(c))!==d&&s++;var g=s/r;return g>.1&&g<.9?0:g<=.1===d?1:-1},n.prototype.getFirstDifferent=function(e,t,r,i){for(var a=e.getX()+r,s=e.getY()+i;this.isValid(a,s)&&this.image.get(a,s)===t;)a+=r,s+=i;for(a-=r,s-=i;this.isValid(a,s)&&this.image.get(a,s)===t;)a+=r;for(a-=r;this.isValid(a,s)&&this.image.get(a,s)===t;)s+=i;return s-=i,new Bi(a,s)},n.prototype.expandSquare=function(e,t,r){var i=r/(2*t),a=e[0].getX()-e[2].getX(),s=e[0].getY()-e[2].getY(),o=(e[0].getX()+e[2].getX())/2,c=(e[0].getY()+e[2].getY())/2,d=new Ke(o+i*a,c+i*s),f=new Ke(o-i*a,c-i*s);a=e[1].getX()-e[3].getX(),s=e[1].getY()-e[3].getY(),o=(e[1].getX()+e[3].getX())/2,c=(e[1].getY()+e[3].getY())/2;var p=new Ke(o+i*a,c+i*s),g=new Ke(o-i*a,c-i*s),m=[d,p,f,g];return m},n.prototype.isValid=function(e,t){return e>=0&&e<this.image.getWidth()&&t>0&&t<this.image.getHeight()},n.prototype.isValidPoint=function(e){var t=Gt.round(e.getX()),r=Gt.round(e.getY());return this.isValid(t,r)},n.prototype.distancePoint=function(e,t){return Gt.distance(e.getX(),e.getY(),t.getX(),t.getY())},n.prototype.distanceResultPoint=function(e,t){return Gt.distance(e.getX(),e.getY(),t.getX(),t.getY())},n.prototype.getDimension=function(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(It.truncDivision(this.nbLayers-4,8)+1)+15},n}(),gw=function(){function n(){}return n.prototype.decode=function(e,t){t===void 0&&(t=null);var r=null,i=new FU(e.getBlackMatrix()),a=null,s=null;try{var o=i.detectMirror(!1);a=o.getPoints(),this.reportFoundResultPoints(t,a),s=new EI().decode(o)}catch(p){r=p}if(s==null)try{var o=i.detectMirror(!0);a=o.getPoints(),this.reportFoundResultPoints(t,a),s=new EI().decode(o)}catch(p){throw r??p}var c=new wi(s.getText(),s.getRawBytes(),s.getNumBits(),a,et.AZTEC,Sn.currentTimeMillis()),d=s.getByteSegments();d!=null&&c.putMetadata(ai.BYTE_SEGMENTS,d);var f=s.getECLevel();return f!=null&&c.putMetadata(ai.ERROR_CORRECTION_LEVEL,f),c},n.prototype.reportFoundResultPoints=function(e,t){if(e!=null){var r=e.get(Bn.NEED_RESULT_POINT_CALLBACK);r!=null&&t.forEach(function(i,a,s){r.foundPossibleResultPoint(i)})}},n.prototype.reset=function(){},n}(),VU=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();(function(n){VU(e,n);function e(t){return t===void 0&&(t=500),n.call(this,new gw,t)||this}return e})(xf);var Mr=function(){function n(){}return n.prototype.decode=function(e,t){try{return this.doDecode(e,t)}catch{var r=t&&t.get(Bn.TRY_HARDER)===!0;if(r&&e.isRotateSupported()){var i=e.rotateCounterClockwise(),a=this.doDecode(i,t),s=a.getResultMetadata(),o=270;s!==null&&s.get(ai.ORIENTATION)===!0&&(o=o+s.get(ai.ORIENTATION)%360),a.putMetadata(ai.ORIENTATION,o);var c=a.getResultPoints();if(c!==null)for(var d=i.getHeight(),f=0;f<c.length;f++)c[f]=new Ke(d-c[f].getY()-1,c[f].getX());return a}else throw new _e}},n.prototype.reset=function(){},n.prototype.doDecode=function(e,t){var r=e.getWidth(),i=e.getHeight(),a=new Gr(r),s=t&&t.get(Bn.TRY_HARDER)===!0,o=Math.max(1,i>>(s?8:5)),c;s?c=i:c=15;for(var d=Math.trunc(i/2),f=0;f<c;f++){var p=Math.trunc((f+1)/2),g=(f&1)===0,m=d+o*(g?p:-p);if(m<0||m>=i)break;try{a=e.getBlackRow(m,a)}catch{continue}for(var x=function(C){if(C===1&&(a.reverse(),t&&t.get(Bn.NEED_RESULT_POINT_CALLBACK)===!0)){var T=new Map;t.forEach(function(B,O){return T.set(O,B)}),T.delete(Bn.NEED_RESULT_POINT_CALLBACK),t=T}try{var D=b.decodeRow(m,a,t);if(C===1){D.putMetadata(ai.ORIENTATION,180);var k=D.getResultPoints();k!==null&&(k[0]=new Ke(r-k[0].getX()-1,k[0].getY()),k[1]=new Ke(r-k[1].getX()-1,k[1].getY()))}return{value:D}}catch{}},b=this,A=0;A<2;A++){var E=x(A);if(typeof E=="object")return E.value}}throw new _e},n.recordPattern=function(e,t,r){for(var i=r.length,a=0;a<i;a++)r[a]=0;var s=e.getSize();if(t>=s)throw new _e;for(var o=!e.get(t),c=0,d=t;d<s;){if(e.get(d)!==o)r[c]++;else{if(++c===i)break;r[c]=1,o=!o}d++}if(!(c===i||c===i-1&&d===s))throw new _e},n.recordPatternInReverse=function(e,t,r){for(var i=r.length,a=e.get(t);t>0&&i>=0;)e.get(--t)!==a&&(i--,a=!a);if(i>=0)throw new _e;n.recordPattern(e,t+1,r)},n.patternMatchVariance=function(e,t,r){for(var i=e.length,a=0,s=0,o=0;o<i;o++)a+=e[o],s+=t[o];if(a<s)return Number.POSITIVE_INFINITY;var c=a/s;r*=c;for(var d=0,f=0;f<i;f++){var p=e[f],g=t[f]*c,m=p>g?p-g:g-p;if(m>r)return Number.POSITIVE_INFINITY;d+=m}return d/a},n}(),jU=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),CI=function(n){jU(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.findStartPattern=function(t){for(var r=t.getSize(),i=t.getNextSet(0),a=0,s=Int32Array.from([0,0,0,0,0,0]),o=i,c=!1,d=6,f=i;f<r;f++)if(t.get(f)!==c)s[a]++;else{if(a===d-1){for(var p=e.MAX_AVG_VARIANCE,g=-1,m=e.CODE_START_A;m<=e.CODE_START_C;m++){var x=Mr.patternMatchVariance(s,e.CODE_PATTERNS[m],e.MAX_INDIVIDUAL_VARIANCE);x<p&&(p=x,g=m)}if(g>=0&&t.isRange(Math.max(0,o-(f-o)/2),o,!1))return Int32Array.from([o,f,g]);o+=s[0]+s[1],s=s.slice(2,s.length),s[a-1]=0,s[a]=0,a--}else a++;s[a]=1,c=!c}throw new _e},e.decodeCode=function(t,r,i){Mr.recordPattern(t,i,r);for(var a=e.MAX_AVG_VARIANCE,s=-1,o=0;o<e.CODE_PATTERNS.length;o++){var c=e.CODE_PATTERNS[o],d=this.patternMatchVariance(r,c,e.MAX_INDIVIDUAL_VARIANCE);d<a&&(a=d,s=o)}if(s>=0)return s;throw new _e},e.prototype.decodeRow=function(t,r,i){var a=i&&i.get(Bn.ASSUME_GS1)===!0,s=e.findStartPattern(r),o=s[2],c=0,d=new Uint8Array(20);d[c++]=o;var f;switch(o){case e.CODE_START_A:f=e.CODE_CODE_A;break;case e.CODE_START_B:f=e.CODE_CODE_B;break;case e.CODE_START_C:f=e.CODE_CODE_C;break;default:throw new je}for(var p=!1,g=!1,m="",x=s[0],b=s[1],A=Int32Array.from([0,0,0,0,0,0]),E=0,C=0,T=o,D=0,k=!0,B=!1,O=!1;!p;){var I=g;switch(g=!1,E=C,C=e.decodeCode(r,A,b),d[c++]=C,C!==e.CODE_STOP&&(k=!0),C!==e.CODE_STOP&&(D++,T+=D*C),x=b,b+=A.reduce(function(W,K){return W+K},0),C){case e.CODE_START_A:case e.CODE_START_B:case e.CODE_START_C:throw new je}switch(f){case e.CODE_CODE_A:if(C<64)O===B?m+=String.fromCharCode(32+C):m+=String.fromCharCode(32+C+128),O=!1;else if(C<96)O===B?m+=String.fromCharCode(C-64):m+=String.fromCharCode(C+64),O=!1;else switch(C!==e.CODE_STOP&&(k=!1),C){case e.CODE_FNC_1:a&&(m.length===0?m+="]C1":m+="");break;case e.CODE_FNC_2:case e.CODE_FNC_3:break;case e.CODE_FNC_4_A:!B&&O?(B=!0,O=!1):B&&O?(B=!1,O=!1):O=!0;break;case e.CODE_SHIFT:g=!0,f=e.CODE_CODE_B;break;case e.CODE_CODE_B:f=e.CODE_CODE_B;break;case e.CODE_CODE_C:f=e.CODE_CODE_C;break;case e.CODE_STOP:p=!0;break}break;case e.CODE_CODE_B:if(C<96)O===B?m+=String.fromCharCode(32+C):m+=String.fromCharCode(32+C+128),O=!1;else switch(C!==e.CODE_STOP&&(k=!1),C){case e.CODE_FNC_1:a&&(m.length===0?m+="]C1":m+="");break;case e.CODE_FNC_2:case e.CODE_FNC_3:break;case e.CODE_FNC_4_B:!B&&O?(B=!0,O=!1):B&&O?(B=!1,O=!1):O=!0;break;case e.CODE_SHIFT:g=!0,f=e.CODE_CODE_A;break;case e.CODE_CODE_A:f=e.CODE_CODE_A;break;case e.CODE_CODE_C:f=e.CODE_CODE_C;break;case e.CODE_STOP:p=!0;break}break;case e.CODE_CODE_C:if(C<100)C<10&&(m+="0"),m+=C;else switch(C!==e.CODE_STOP&&(k=!1),C){case e.CODE_FNC_1:a&&(m.length===0?m+="]C1":m+="");break;case e.CODE_CODE_A:f=e.CODE_CODE_A;break;case e.CODE_CODE_B:f=e.CODE_CODE_B;break;case e.CODE_STOP:p=!0;break}break}I&&(f=f===e.CODE_CODE_A?e.CODE_CODE_B:e.CODE_CODE_A)}var R=b-x;if(b=r.getNextUnset(b),!r.isRange(b,Math.min(r.getSize(),b+(b-x)/2),!1))throw new _e;if(T-=D*E,T%103!==E)throw new zr;var F=m.length;if(F===0)throw new _e;F>0&&k&&(f===e.CODE_CODE_C?m=m.substring(0,F-2):m=m.substring(0,F-1));for(var N=(s[1]+s[0])/2,P=x+R/2,V=d.length,q=new Uint8Array(V),X=0;X<V;X++)q[X]=d[X];var G=[new Ke(N,t),new Ke(P,t)];return new wi(m,q,0,G,et.CODE_128,new Date().getTime())},e.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],e.MAX_AVG_VARIANCE=.25,e.MAX_INDIVIDUAL_VARIANCE=.7,e.CODE_SHIFT=98,e.CODE_CODE_C=99,e.CODE_CODE_B=100,e.CODE_CODE_A=101,e.CODE_FNC_1=102,e.CODE_FNC_2=97,e.CODE_FNC_3=96,e.CODE_FNC_4_A=101,e.CODE_FNC_4_B=100,e.CODE_START_A=103,e.CODE_START_B=104,e.CODE_START_C=105,e.CODE_STOP=106,e}(Mr),UU=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Xx=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},TI=function(n){UU(e,n);function e(t,r){t===void 0&&(t=!1),r===void 0&&(r=!1);var i=n.call(this)||this;return i.usingCheckDigit=t,i.extendedMode=r,i.decodeRowResult="",i.counters=new Int32Array(9),i}return e.prototype.decodeRow=function(t,r,i){var a,s,o,c,d=this.counters;d.fill(0),this.decodeRowResult="";var f=e.findAsteriskPattern(r,d),p=r.getNextSet(f[1]),g=r.getSize(),m,x;do{e.recordPattern(r,p,d);var b=e.toNarrowWidePattern(d);if(b<0)throw new _e;m=e.patternToChar(b),this.decodeRowResult+=m,x=p;try{for(var A=(a=void 0,Xx(d)),E=A.next();!E.done;E=A.next()){var C=E.value;p+=C}}catch(V){a={error:V}}finally{try{E&&!E.done&&(s=A.return)&&s.call(A)}finally{if(a)throw a.error}}p=r.getNextSet(p)}while(m!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var T=0;try{for(var D=Xx(d),k=D.next();!k.done;k=D.next()){var C=k.value;T+=C}}catch(V){o={error:V}}finally{try{k&&!k.done&&(c=D.return)&&c.call(D)}finally{if(o)throw o.error}}var B=p-x-T;if(p!==g&&B*2<T)throw new _e;if(this.usingCheckDigit){for(var O=this.decodeRowResult.length-1,I=0,R=0;R<O;R++)I+=e.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(R));if(this.decodeRowResult.charAt(O)!==e.ALPHABET_STRING.charAt(I%43))throw new zr;this.decodeRowResult=this.decodeRowResult.substring(0,O)}if(this.decodeRowResult.length===0)throw new _e;var F;this.extendedMode?F=e.decodeExtended(this.decodeRowResult):F=this.decodeRowResult;var N=(f[1]+f[0])/2,P=x+T/2;return new wi(F,null,0,[new Ke(N,t),new Ke(P,t)],et.CODE_39,new Date().getTime())},e.findAsteriskPattern=function(t,r){for(var i=t.getSize(),a=t.getNextSet(0),s=0,o=a,c=!1,d=r.length,f=a;f<i;f++)if(t.get(f)!==c)r[s]++;else{if(s===d-1){if(this.toNarrowWidePattern(r)===e.ASTERISK_ENCODING&&t.isRange(Math.max(0,o-Math.floor((f-o)/2)),o,!1))return[o,f];o+=r[0]+r[1],r.copyWithin(0,2,2+s-1),r[s-1]=0,r[s]=0,s--}else s++;r[s]=1,c=!c}throw new _e},e.toNarrowWidePattern=function(t){var r,i,a=t.length,s=0,o;do{var c=2147483647;try{for(var d=(r=void 0,Xx(t)),f=d.next();!f.done;f=d.next()){var p=f.value;p<c&&p>s&&(c=p)}}catch(b){r={error:b}}finally{try{f&&!f.done&&(i=d.return)&&i.call(d)}finally{if(r)throw r.error}}s=c,o=0;for(var g=0,m=0,x=0;x<a;x++){var p=t[x];p>s&&(m|=1<<a-1-x,o++,g+=p)}if(o===3){for(var x=0;x<a&&o>0;x++){var p=t[x];if(p>s&&(o--,p*2>=g))return-1}return m}}while(o>3);return-1},e.patternToChar=function(t){for(var r=0;r<e.CHARACTER_ENCODINGS.length;r++)if(e.CHARACTER_ENCODINGS[r]===t)return e.ALPHABET_STRING.charAt(r);if(t===e.ASTERISK_ENCODING)return"*";throw new _e},e.decodeExtended=function(t){for(var r=t.length,i="",a=0;a<r;a++){var s=t.charAt(a);if(s==="+"||s==="$"||s==="%"||s==="/"){var o=t.charAt(a+1),c="\0";switch(s){case"+":if(o>="A"&&o<="Z")c=String.fromCharCode(o.charCodeAt(0)+32);else throw new je;break;case"$":if(o>="A"&&o<="Z")c=String.fromCharCode(o.charCodeAt(0)-64);else throw new je;break;case"%":if(o>="A"&&o<="E")c=String.fromCharCode(o.charCodeAt(0)-38);else if(o>="F"&&o<="J")c=String.fromCharCode(o.charCodeAt(0)-11);else if(o>="K"&&o<="O")c=String.fromCharCode(o.charCodeAt(0)+16);else if(o>="P"&&o<="T")c=String.fromCharCode(o.charCodeAt(0)+43);else if(o==="U")c="\0";else if(o==="V")c="@";else if(o==="W")c="`";else if(o==="X"||o==="Y"||o==="Z")c="";else throw new je;break;case"/":if(o>="A"&&o<="O")c=String.fromCharCode(o.charCodeAt(0)-32);else if(o==="Z")c=":";else throw new je;break}i+=c,a++}else i+=s}return i},e.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",e.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],e.ASTERISK_ENCODING=148,e}(Mr),HU=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Kx=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},II=function(n){HU(e,n);function e(){var t=n.call(this)||this;return t.decodeRowResult="",t.counters=new Int32Array(6),t}return e.prototype.decodeRow=function(t,r,i){var a,s,o,c,d=this.findAsteriskPattern(r),f=r.getNextSet(d[1]),p=r.getSize(),g=this.counters;g.fill(0),this.decodeRowResult="";var m,x;do{e.recordPattern(r,f,g);var b=this.toPattern(g);if(b<0)throw new _e;m=this.patternToChar(b),this.decodeRowResult+=m,x=f;try{for(var A=(a=void 0,Kx(g)),E=A.next();!E.done;E=A.next()){var C=E.value;f+=C}}catch(R){a={error:R}}finally{try{E&&!E.done&&(s=A.return)&&s.call(A)}finally{if(a)throw a.error}}f=r.getNextSet(f)}while(m!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var T=0;try{for(var D=Kx(g),k=D.next();!k.done;k=D.next()){var C=k.value;T+=C}}catch(R){o={error:R}}finally{try{k&&!k.done&&(c=D.return)&&c.call(D)}finally{if(o)throw o.error}}if(f===p||!r.get(f))throw new _e;if(this.decodeRowResult.length<2)throw new _e;this.checkChecksums(this.decodeRowResult),this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-2);var B=this.decodeExtended(this.decodeRowResult),O=(d[1]+d[0])/2,I=x+T/2;return new wi(B,null,0,[new Ke(O,t),new Ke(I,t)],et.CODE_93,new Date().getTime())},e.prototype.findAsteriskPattern=function(t){var r=t.getSize(),i=t.getNextSet(0);this.counters.fill(0);for(var a=this.counters,s=i,o=!1,c=a.length,d=0,f=i;f<r;f++)if(t.get(f)!==o)a[d]++;else{if(d===c-1){if(this.toPattern(a)===e.ASTERISK_ENCODING)return new Int32Array([s,f]);s+=a[0]+a[1],a.copyWithin(0,2,2+d-1),a[d-1]=0,a[d]=0,d--}else d++;a[d]=1,o=!o}throw new _e},e.prototype.toPattern=function(t){var r,i,a=0;try{for(var s=Kx(t),o=s.next();!o.done;o=s.next()){var c=o.value;a+=c}}catch(x){r={error:x}}finally{try{o&&!o.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}for(var d=0,f=t.length,p=0;p<f;p++){var g=Math.round(t[p]*9/a);if(g<1||g>4)return-1;if((p&1)===0)for(var m=0;m<g;m++)d=d<<1|1;else d<<=g}return d},e.prototype.patternToChar=function(t){for(var r=0;r<e.CHARACTER_ENCODINGS.length;r++)if(e.CHARACTER_ENCODINGS[r]===t)return e.ALPHABET_STRING.charAt(r);throw new _e},e.prototype.decodeExtended=function(t){for(var r=t.length,i="",a=0;a<r;a++){var s=t.charAt(a);if(s>="a"&&s<="d"){if(a>=r-1)throw new je;var o=t.charAt(a+1),c="\0";switch(s){case"d":if(o>="A"&&o<="Z")c=String.fromCharCode(o.charCodeAt(0)+32);else throw new je;break;case"a":if(o>="A"&&o<="Z")c=String.fromCharCode(o.charCodeAt(0)-64);else throw new je;break;case"b":if(o>="A"&&o<="E")c=String.fromCharCode(o.charCodeAt(0)-38);else if(o>="F"&&o<="J")c=String.fromCharCode(o.charCodeAt(0)-11);else if(o>="K"&&o<="O")c=String.fromCharCode(o.charCodeAt(0)+16);else if(o>="P"&&o<="T")c=String.fromCharCode(o.charCodeAt(0)+43);else if(o==="U")c="\0";else if(o==="V")c="@";else if(o==="W")c="`";else if(o>="X"&&o<="Z")c="";else throw new je;break;case"c":if(o>="A"&&o<="O")c=String.fromCharCode(o.charCodeAt(0)-32);else if(o==="Z")c=":";else throw new je;break}i+=c,a++}else i+=s}return i},e.prototype.checkChecksums=function(t){var r=t.length;this.checkOneChecksum(t,r-2,20),this.checkOneChecksum(t,r-1,15)},e.prototype.checkOneChecksum=function(t,r,i){for(var a=1,s=0,o=r-1;o>=0;o--)s+=a*e.ALPHABET_STRING.indexOf(t.charAt(o)),++a>i&&(a=1);if(t.charAt(r)!==e.ALPHABET_STRING[s%47])throw new zr},e.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%abcd*",e.CHARACTER_ENCODINGS=[276,328,324,322,296,292,290,336,274,266,424,420,418,404,402,394,360,356,354,308,282,344,332,326,300,278,436,434,428,422,406,410,364,358,310,314,302,468,466,458,366,374,430,294,474,470,306,350],e.ASTERISK_ENCODING=e.CHARACTER_ENCODINGS[47],e}(Mr),zU=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),$U=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},DI=function(n){zU(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.narrowLineWidth=-1,t}return e.prototype.decodeRow=function(t,r,i){var a,s,o=this.decodeStart(r),c=this.decodeEnd(r),d=new Et;e.decodeMiddle(r,o[1],c[0],d);var f=d.toString(),p=null;i!=null&&(p=i.get(Bn.ALLOWED_LENGTHS)),p==null&&(p=e.DEFAULT_ALLOWED_LENGTHS);var g=f.length,m=!1,x=0;try{for(var b=$U(p),A=b.next();!A.done;A=b.next()){var E=A.value;if(g===E){m=!0;break}E>x&&(x=E)}}catch(D){a={error:D}}finally{try{A&&!A.done&&(s=b.return)&&s.call(b)}finally{if(a)throw a.error}}if(!m&&g>x&&(m=!0),!m)throw new je;var C=[new Ke(o[1],t),new Ke(c[0],t)],T=new wi(f,null,0,C,et.ITF,new Date().getTime());return T},e.decodeMiddle=function(t,r,i,a){var s=new Int32Array(10),o=new Int32Array(5),c=new Int32Array(5);for(s.fill(0),o.fill(0),c.fill(0);r<i;){Mr.recordPattern(t,r,s);for(var d=0;d<5;d++){var f=2*d;o[d]=s[f],c[d]=s[f+1]}var p=e.decodeDigit(o);a.append(p.toString()),p=this.decodeDigit(c),a.append(p.toString()),s.forEach(function(g){r+=g})}},e.prototype.decodeStart=function(t){var r=e.skipWhiteSpace(t),i=e.findGuardPattern(t,r,e.START_PATTERN);return this.narrowLineWidth=(i[1]-i[0])/4,this.validateQuietZone(t,i[0]),i},e.prototype.validateQuietZone=function(t,r){var i=this.narrowLineWidth*10;i=i<r?i:r;for(var a=r-1;i>0&&a>=0&&!t.get(a);a--)i--;if(i!==0)throw new _e},e.skipWhiteSpace=function(t){var r=t.getSize(),i=t.getNextSet(0);if(i===r)throw new _e;return i},e.prototype.decodeEnd=function(t){t.reverse();try{var r=e.skipWhiteSpace(t),i=void 0;try{i=e.findGuardPattern(t,r,e.END_PATTERN_REVERSED[0])}catch(s){s instanceof _e&&(i=e.findGuardPattern(t,r,e.END_PATTERN_REVERSED[1]))}this.validateQuietZone(t,i[0]);var a=i[0];return i[0]=t.getSize()-i[1],i[1]=t.getSize()-a,i}finally{t.reverse()}},e.findGuardPattern=function(t,r,i){var a=i.length,s=new Int32Array(a),o=t.getSize(),c=!1,d=0,f=r;s.fill(0);for(var p=r;p<o;p++)if(t.get(p)!==c)s[d]++;else{if(d===a-1){if(Mr.patternMatchVariance(s,i,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return[f,p];f+=s[0]+s[1],Sn.arraycopy(s,2,s,0,d-1),s[d-1]=0,s[d]=0,d--}else d++;s[d]=1,c=!c}throw new _e},e.decodeDigit=function(t){for(var r=e.MAX_AVG_VARIANCE,i=-1,a=e.PATTERNS.length,s=0;s<a;s++){var o=e.PATTERNS[s],c=Mr.patternMatchVariance(t,o,e.MAX_INDIVIDUAL_VARIANCE);c<r?(r=c,i=s):c===r&&(i=-1)}if(i>=0)return i%10;throw new _e},e.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],e.MAX_AVG_VARIANCE=.38,e.MAX_INDIVIDUAL_VARIANCE=.5,e.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],e.START_PATTERN=Int32Array.from([1,1,1,1]),e.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])],e}(Mr),GU=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Xd=function(n){GU(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.decodeRowStringBuffer="",t}return e.findStartGuardPattern=function(t){for(var r=!1,i,a=0,s=Int32Array.from([0,0,0]);!r;){s=Int32Array.from([0,0,0]),i=e.findGuardPattern(t,a,!1,this.START_END_PATTERN,s);var o=i[0];a=i[1];var c=o-(a-o);c>=0&&(r=t.isRange(c,o,!1))}return i},e.checkChecksum=function(t){return e.checkStandardUPCEANChecksum(t)},e.checkStandardUPCEANChecksum=function(t){var r=t.length;if(r===0)return!1;var i=parseInt(t.charAt(r-1),10);return e.getStandardUPCEANChecksum(t.substring(0,r-1))===i},e.getStandardUPCEANChecksum=function(t){for(var r=t.length,i=0,a=r-1;a>=0;a-=2){var s=t.charAt(a).charCodeAt(0)-48;if(s<0||s>9)throw new je;i+=s}i*=3;for(var a=r-2;a>=0;a-=2){var s=t.charAt(a).charCodeAt(0)-48;if(s<0||s>9)throw new je;i+=s}return(1e3-i)%10},e.decodeEnd=function(t,r){return e.findGuardPattern(t,r,!1,e.START_END_PATTERN,new Int32Array(e.START_END_PATTERN.length).fill(0))},e.findGuardPatternWithoutCounters=function(t,r,i,a){return this.findGuardPattern(t,r,i,a,new Int32Array(a.length))},e.findGuardPattern=function(t,r,i,a,s){var o=t.getSize();r=i?t.getNextUnset(r):t.getNextSet(r);for(var c=0,d=r,f=a.length,p=i,g=r;g<o;g++)if(t.get(g)!==p)s[c]++;else{if(c===f-1){if(Mr.patternMatchVariance(s,a,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return Int32Array.from([d,g]);d+=s[0]+s[1];for(var m=s.slice(2,s.length),x=0;x<c-1;x++)s[x]=m[x];s[c-1]=0,s[c]=0,c--}else c++;s[c]=1,p=!p}throw new _e},e.decodeDigit=function(t,r,i,a){this.recordPattern(t,i,r);for(var s=this.MAX_AVG_VARIANCE,o=-1,c=a.length,d=0;d<c;d++){var f=a[d],p=Mr.patternMatchVariance(r,f,e.MAX_INDIVIDUAL_VARIANCE);p<s&&(s=p,o=d)}if(o>=0)return o;throw new _e},e.MAX_AVG_VARIANCE=.48,e.MAX_INDIVIDUAL_VARIANCE=.7,e.START_END_PATTERN=Int32Array.from([1,1,1]),e.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),e.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),e.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])],e}(Mr),WU=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},YU=function(){function n(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return n.prototype.decodeRow=function(e,t,r){var i=this.decodeRowStringBuffer,a=this.decodeMiddle(t,r,i),s=i.toString(),o=n.parseExtensionString(s),c=[new Ke((r[0]+r[1])/2,e),new Ke(a,e)],d=new wi(s,null,0,c,et.UPC_EAN_EXTENSION,new Date().getTime());return o!=null&&d.putAllMetadata(o),d},n.prototype.decodeMiddle=function(e,t,r){var i,a,s=this.decodeMiddleCounters;s[0]=0,s[1]=0,s[2]=0,s[3]=0;for(var o=e.getSize(),c=t[1],d=0,f=0;f<5&&c<o;f++){var p=Xd.decodeDigit(e,s,c,Xd.L_AND_G_PATTERNS);r+=String.fromCharCode(48+p%10);try{for(var g=(i=void 0,WU(s)),m=g.next();!m.done;m=g.next()){var x=m.value;c+=x}}catch(A){i={error:A}}finally{try{m&&!m.done&&(a=g.return)&&a.call(g)}finally{if(i)throw i.error}}p>=10&&(d|=1<<4-f),f!==4&&(c=e.getNextSet(c),c=e.getNextUnset(c))}if(r.length!==5)throw new _e;var b=this.determineCheckDigit(d);if(n.extensionChecksum(r.toString())!==b)throw new _e;return c},n.extensionChecksum=function(e){for(var t=e.length,r=0,i=t-2;i>=0;i-=2)r+=e.charAt(i).charCodeAt(0)-48;r*=3;for(var i=t-1;i>=0;i-=2)r+=e.charAt(i).charCodeAt(0)-48;return r*=3,r%10},n.prototype.determineCheckDigit=function(e){for(var t=0;t<10;t++)if(e===this.CHECK_DIGIT_ENCODINGS[t])return t;throw new _e},n.parseExtensionString=function(e){if(e.length!==5)return null;var t=n.parseExtension5String(e);return t==null?null:new Map([[ai.SUGGESTED_PRICE,t]])},n.parseExtension5String=function(e){var t;switch(e.charAt(0)){case"0":t="";break;case"5":t="$";break;case"9":switch(e){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}t="";break;default:t="";break}var r=parseInt(e.substring(1)),i=(r/100).toString(),a=r%100,s=a<10?"0"+a:a.toString();return t+i+"."+s},n}(),qU=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},XU=function(){function n(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return n.prototype.decodeRow=function(e,t,r){var i=this.decodeRowStringBuffer,a=this.decodeMiddle(t,r,i),s=i.toString(),o=n.parseExtensionString(s),c=[new Ke((r[0]+r[1])/2,e),new Ke(a,e)],d=new wi(s,null,0,c,et.UPC_EAN_EXTENSION,new Date().getTime());return o!=null&&d.putAllMetadata(o),d},n.prototype.decodeMiddle=function(e,t,r){var i,a,s=this.decodeMiddleCounters;s[0]=0,s[1]=0,s[2]=0,s[3]=0;for(var o=e.getSize(),c=t[1],d=0,f=0;f<2&&c<o;f++){var p=Xd.decodeDigit(e,s,c,Xd.L_AND_G_PATTERNS);r+=String.fromCharCode(48+p%10);try{for(var g=(i=void 0,qU(s)),m=g.next();!m.done;m=g.next()){var x=m.value;c+=x}}catch(b){i={error:b}}finally{try{m&&!m.done&&(a=g.return)&&a.call(g)}finally{if(i)throw i.error}}p>=10&&(d|=1<<1-f),f!==1&&(c=e.getNextSet(c),c=e.getNextUnset(c))}if(r.length!==2)throw new _e;if(parseInt(r.toString())%4!==d)throw new _e;return c},n.parseExtensionString=function(e){return e.length!==2?null:new Map([[ai.ISSUE_NUMBER,parseInt(e)]])},n}(),KU=function(){function n(){}return n.decodeRow=function(e,t,r){var i=Xd.findGuardPattern(t,r,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{var a=new YU;return a.decodeRow(e,t,i)}catch{var s=new XU;return s.decodeRow(e,t,i)}},n.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]),n}(),QU=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Cr=function(n){QU(e,n);function e(){var t=n.call(this)||this;t.decodeRowStringBuffer="",e.L_AND_G_PATTERNS=e.L_PATTERNS.map(function(o){return Int32Array.from(o)});for(var r=10;r<20;r++){for(var i=e.L_PATTERNS[r-10],a=new Int32Array(i.length),s=0;s<i.length;s++)a[s]=i[i.length-s-1];e.L_AND_G_PATTERNS[r]=a}return t}return e.prototype.decodeRow=function(t,r,i){var a=e.findStartGuardPattern(r),s=i==null?null:i.get(Bn.NEED_RESULT_POINT_CALLBACK);if(s!=null){var o=new Ke((a[0]+a[1])/2,t);s.foundPossibleResultPoint(o)}var c=this.decodeMiddle(r,a,this.decodeRowStringBuffer),d=c.rowOffset,f=c.resultString;if(s!=null){var p=new Ke(d,t);s.foundPossibleResultPoint(p)}var g=e.decodeEnd(r,d);if(s!=null){var m=new Ke((g[0]+g[1])/2,t);s.foundPossibleResultPoint(m)}var x=g[1],b=x+(x-g[0]);if(b>=r.getSize()||!r.isRange(x,b,!1))throw new _e;var A=f.toString();if(A.length<8)throw new je;if(!e.checkChecksum(A))throw new zr;var E=(a[1]+a[0])/2,C=(g[1]+g[0])/2,T=this.getBarcodeFormat(),D=[new Ke(E,t),new Ke(C,t)],k=new wi(A,null,0,D,T,new Date().getTime()),B=0;try{var O=KU.decodeRow(t,r,g[1]);k.putMetadata(ai.UPC_EAN_EXTENSION,O.getText()),k.putAllMetadata(O.getResultMetadata()),k.addResultPoints(O.getResultPoints()),B=O.getText().length}catch{}var I=i==null?null:i.get(Bn.ALLOWED_EAN_EXTENSIONS);if(I!=null){var R=!1;for(var F in I)if(B.toString()===F){R=!0;break}if(!R)throw new _e}return T===et.EAN_13||et.UPC_A,k},e.checkChecksum=function(t){return e.checkStandardUPCEANChecksum(t)},e.checkStandardUPCEANChecksum=function(t){var r=t.length;if(r===0)return!1;var i=parseInt(t.charAt(r-1),10);return e.getStandardUPCEANChecksum(t.substring(0,r-1))===i},e.getStandardUPCEANChecksum=function(t){for(var r=t.length,i=0,a=r-1;a>=0;a-=2){var s=t.charAt(a).charCodeAt(0)-48;if(s<0||s>9)throw new je;i+=s}i*=3;for(var a=r-2;a>=0;a-=2){var s=t.charAt(a).charCodeAt(0)-48;if(s<0||s>9)throw new je;i+=s}return(1e3-i)%10},e.decodeEnd=function(t,r){return e.findGuardPattern(t,r,!1,e.START_END_PATTERN,new Int32Array(e.START_END_PATTERN.length).fill(0))},e}(Xd),ZU=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),RI=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},mw=function(n){ZU(e,n);function e(){var t=n.call(this)||this;return t.decodeMiddleCounters=Int32Array.from([0,0,0,0]),t}return e.prototype.decodeMiddle=function(t,r,i){var a,s,o,c,d=this.decodeMiddleCounters;d[0]=0,d[1]=0,d[2]=0,d[3]=0;for(var f=t.getSize(),p=r[1],g=0,m=0;m<6&&p<f;m++){var x=Cr.decodeDigit(t,d,p,Cr.L_AND_G_PATTERNS);i+=String.fromCharCode(48+x%10);try{for(var b=(a=void 0,RI(d)),A=b.next();!A.done;A=b.next()){var E=A.value;p+=E}}catch(k){a={error:k}}finally{try{A&&!A.done&&(s=b.return)&&s.call(b)}finally{if(a)throw a.error}}x>=10&&(g|=1<<5-m)}i=e.determineFirstDigit(i,g);var C=Cr.findGuardPattern(t,p,!0,Cr.MIDDLE_PATTERN,new Int32Array(Cr.MIDDLE_PATTERN.length).fill(0));p=C[1];for(var m=0;m<6&&p<f;m++){var x=Cr.decodeDigit(t,d,p,Cr.L_PATTERNS);i+=String.fromCharCode(48+x);try{for(var T=(o=void 0,RI(d)),D=T.next();!D.done;D=T.next()){var E=D.value;p+=E}}catch(O){o={error:O}}finally{try{D&&!D.done&&(c=T.return)&&c.call(T)}finally{if(o)throw o.error}}}return{rowOffset:p,resultString:i}},e.prototype.getBarcodeFormat=function(){return et.EAN_13},e.determineFirstDigit=function(t,r){for(var i=0;i<10;i++)if(r===this.FIRST_DIGIT_ENCODINGS[i])return t=String.fromCharCode(48+i)+t,t;throw new _e},e.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26],e}(Cr),JU=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),MI=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},OI=function(n){JU(e,n);function e(){var t=n.call(this)||this;return t.decodeMiddleCounters=Int32Array.from([0,0,0,0]),t}return e.prototype.decodeMiddle=function(t,r,i){var a,s,o,c,d=this.decodeMiddleCounters;d[0]=0,d[1]=0,d[2]=0,d[3]=0;for(var f=t.getSize(),p=r[1],g=0;g<4&&p<f;g++){var m=Cr.decodeDigit(t,d,p,Cr.L_PATTERNS);i+=String.fromCharCode(48+m);try{for(var x=(a=void 0,MI(d)),b=x.next();!b.done;b=x.next()){var A=b.value;p+=A}}catch(D){a={error:D}}finally{try{b&&!b.done&&(s=x.return)&&s.call(x)}finally{if(a)throw a.error}}}var E=Cr.findGuardPattern(t,p,!0,Cr.MIDDLE_PATTERN,new Int32Array(Cr.MIDDLE_PATTERN.length).fill(0));p=E[1];for(var g=0;g<4&&p<f;g++){var m=Cr.decodeDigit(t,d,p,Cr.L_PATTERNS);i+=String.fromCharCode(48+m);try{for(var C=(o=void 0,MI(d)),T=C.next();!T.done;T=C.next()){var A=T.value;p+=A}}catch(B){o={error:B}}finally{try{T&&!T.done&&(c=C.return)&&c.call(C)}finally{if(o)throw o.error}}}return{rowOffset:p,resultString:i}},e.prototype.getBarcodeFormat=function(){return et.EAN_8},e}(Cr),eH=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),PI=function(n){eH(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.ean13Reader=new mw,t}return e.prototype.getBarcodeFormat=function(){return et.UPC_A},e.prototype.decode=function(t,r){return this.maybeReturnResult(this.ean13Reader.decode(t))},e.prototype.decodeRow=function(t,r,i){return this.maybeReturnResult(this.ean13Reader.decodeRow(t,r,i))},e.prototype.decodeMiddle=function(t,r,i){return this.ean13Reader.decodeMiddle(t,r,i)},e.prototype.maybeReturnResult=function(t){var r=t.getText();if(r.charAt(0)==="0"){var i=new wi(r.substring(1),null,null,t.getResultPoints(),et.UPC_A);return t.getResultMetadata()!=null&&i.putAllMetadata(t.getResultMetadata()),i}else throw new _e},e.prototype.reset=function(){this.ean13Reader.reset()},e}(Cr),tH=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),nH=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},kI=function(n){tH(e,n);function e(){var t=n.call(this)||this;return t.decodeMiddleCounters=new Int32Array(4),t}return e.prototype.decodeMiddle=function(t,r,i){var a,s,o=this.decodeMiddleCounters.map(function(A){return A});o[0]=0,o[1]=0,o[2]=0,o[3]=0;for(var c=t.getSize(),d=r[1],f=0,p=0;p<6&&d<c;p++){var g=e.decodeDigit(t,o,d,e.L_AND_G_PATTERNS);i+=String.fromCharCode(48+g%10);try{for(var m=(a=void 0,nH(o)),x=m.next();!x.done;x=m.next()){var b=x.value;d+=b}}catch(A){a={error:A}}finally{try{x&&!x.done&&(s=m.return)&&s.call(m)}finally{if(a)throw a.error}}g>=10&&(f|=1<<5-p)}return e.determineNumSysAndCheckDigit(new Et(i),f),d},e.prototype.decodeEnd=function(t,r){return e.findGuardPatternWithoutCounters(t,r,!0,e.MIDDLE_END_PATTERN)},e.prototype.checkChecksum=function(t){return Cr.checkChecksum(e.convertUPCEtoUPCA(t))},e.determineNumSysAndCheckDigit=function(t,r){for(var i=0;i<=1;i++)for(var a=0;a<10;a++)if(r===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[i][a]){t.insert(0,"0"+i),t.append("0"+a);return}throw _e.getNotFoundInstance()},e.prototype.getBarcodeFormat=function(){return et.UPC_E},e.convertUPCEtoUPCA=function(t){var r=t.slice(1,7).split("").map(function(s){return s.charCodeAt(0)}),i=new Et;i.append(t.charAt(0));var a=r[5];switch(a){case 0:case 1:case 2:i.appendChars(r,0,2),i.append(a),i.append("0000"),i.appendChars(r,2,3);break;case 3:i.appendChars(r,0,3),i.append("00000"),i.appendChars(r,3,2);break;case 4:i.appendChars(r,0,4),i.append("00000"),i.append(r[4]);break;default:i.appendChars(r,0,5),i.append("0000"),i.append(a);break}return t.length>=8&&i.append(t.charAt(7)),i.toString()},e.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),e.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,1])],e}(Cr),rH=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),NI=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Qx=function(n){rH(e,n);function e(t){var r=n.call(this)||this,i=t==null?null:t.get(Bn.POSSIBLE_FORMATS),a=[];return i!=null&&(i.indexOf(et.EAN_13)>-1&&a.push(new mw),i.indexOf(et.UPC_A)>-1&&a.push(new PI),i.indexOf(et.EAN_8)>-1&&a.push(new OI),i.indexOf(et.UPC_E)>-1&&a.push(new kI)),a.length===0&&(a.push(new mw),a.push(new PI),a.push(new OI),a.push(new kI)),r.readers=a,r}return e.prototype.decodeRow=function(t,r,i){var a,s;try{for(var o=NI(this.readers),c=o.next();!c.done;c=o.next()){var d=c.value;try{var f=d.decodeRow(t,r,i),p=f.getBarcodeFormat()===et.EAN_13&&f.getText().charAt(0)==="0",g=i==null?null:i.get(Bn.POSSIBLE_FORMATS),m=g==null||g.includes(et.UPC_A);if(p&&m){var x=f.getRawBytes(),b=new wi(f.getText().substring(1),x,x?x.length:null,f.getResultPoints(),et.UPC_A);return b.putAllMetadata(f.getResultMetadata()),b}return f}catch{}}}catch(A){a={error:A}}finally{try{c&&!c.done&&(s=o.return)&&s.call(o)}finally{if(a)throw a.error}}throw new _e},e.prototype.reset=function(){var t,r;try{for(var i=NI(this.readers),a=i.next();!a.done;a=i.next()){var s=a.value;s.reset()}}catch(o){t={error:o}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}},e}(Mr),iH=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),aH=function(n){iH(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.CODA_BAR_CHAR_SET={nnnnnww:"0",nnnnwwn:"1",nnnwnnw:"2",wwnnnnn:"3",nnwnnwn:"4",wnnnnwn:"5",nwnnnnw:"6",nwnnwnn:"7",nwwnnnn:"8",wnnwnnn:"9",nnnwwnn:"-",nnwwnnn:"$",wnnnwnw:":",wnwnnnw:"/",wnwnwnn:".",nnwwwww:"+",nnwwnwn:"A",nwnwnnw:"B",nnnwnww:"C",nnnwwwn:"D"},t}return e.prototype.decodeRow=function(t,r,i){var a=this.getValidRowData(r);if(!a)throw new _e;var s=this.codaBarDecodeRow(a.row);if(!s)throw new _e;return new wi(s,null,0,[new Ke(a.left,t),new Ke(a.right,t)],et.CODABAR,new Date().getTime())},e.prototype.getValidRowData=function(t){var r=t.toArray(),i=r.indexOf(!0);if(i===-1)return null;var a=r.lastIndexOf(!0);if(a<=i)return null;r=r.slice(i,a+1);for(var s=[],o=r[0],c=1,d=1;d<r.length;d++)r[d]===o?c++:(o=r[d],s.push(c),c=1);return s.push(c),s.length<23&&(s.length+1)%8!==0?null:{row:s,left:i,right:a}},e.prototype.codaBarDecodeRow=function(t){for(var r=[],i=Math.ceil(t.reduce(function(c,d){return(c+d)/2},0));t.length>0;){var a=t.splice(0,8).splice(0,7),s=a.map(function(c){return c<i?"n":"w"}).join("");if(this.CODA_BAR_CHAR_SET[s]===void 0)return null;r.push(this.CODA_BAR_CHAR_SET[s])}var o=r.join("");return this.validCodaBarString(o)?o:null},e.prototype.validCodaBarString=function(t){var r=/^[A-D].{1,}[A-D]$/;return r.test(t)},e}(Mr),sH=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),oH=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},kc=function(n){sH(e,n);function e(){var t=n.call(this)||this;return t.decodeFinderCounters=new Int32Array(4),t.dataCharacterCounters=new Int32Array(8),t.oddRoundingErrors=new Array(4),t.evenRoundingErrors=new Array(4),t.oddCounts=new Array(t.dataCharacterCounters.length/2),t.evenCounts=new Array(t.dataCharacterCounters.length/2),t}return e.prototype.getDecodeFinderCounters=function(){return this.decodeFinderCounters},e.prototype.getDataCharacterCounters=function(){return this.dataCharacterCounters},e.prototype.getOddRoundingErrors=function(){return this.oddRoundingErrors},e.prototype.getEvenRoundingErrors=function(){return this.evenRoundingErrors},e.prototype.getOddCounts=function(){return this.oddCounts},e.prototype.getEvenCounts=function(){return this.evenCounts},e.prototype.parseFinderValue=function(t,r){for(var i=0;i<r.length;i++)if(Mr.patternMatchVariance(t,r[i],e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return i;throw new _e},e.count=function(t){return Gt.sum(new Int32Array(t))},e.increment=function(t,r){for(var i=0,a=r[0],s=1;s<t.length;s++)r[s]>a&&(a=r[s],i=s);t[i]++},e.decrement=function(t,r){for(var i=0,a=r[0],s=1;s<t.length;s++)r[s]<a&&(a=r[s],i=s);t[i]--},e.isFinderPattern=function(t){var r,i,a=t[0]+t[1],s=a+t[2]+t[3],o=a/s;if(o>=e.MIN_FINDER_PATTERN_RATIO&&o<=e.MAX_FINDER_PATTERN_RATIO){var c=Number.MAX_SAFE_INTEGER,d=Number.MIN_SAFE_INTEGER;try{for(var f=oH(t),p=f.next();!p.done;p=f.next()){var g=p.value;g>d&&(d=g),g<c&&(c=g)}}catch(m){r={error:m}}finally{try{p&&!p.done&&(i=f.return)&&i.call(f)}finally{if(r)throw r.error}}return d<10*c}return!1},e.MAX_AVG_VARIANCE=.2,e.MAX_INDIVIDUAL_VARIANCE=.45,e.MIN_FINDER_PATTERN_RATIO=9.5/12,e.MAX_FINDER_PATTERN_RATIO=12.5/14,e}(Mr),Km=function(){function n(e,t){this.value=e,this.checksumPortion=t}return n.prototype.getValue=function(){return this.value},n.prototype.getChecksumPortion=function(){return this.checksumPortion},n.prototype.toString=function(){return this.value+"("+this.checksumPortion+")"},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.value===t.value&&this.checksumPortion===t.checksumPortion},n.prototype.hashCode=function(){return this.value^this.checksumPortion},n}(),XM=function(){function n(e,t,r,i,a){this.value=e,this.startEnd=t,this.value=e,this.startEnd=t,this.resultPoints=new Array,this.resultPoints.push(new Ke(r,a)),this.resultPoints.push(new Ke(i,a))}return n.prototype.getValue=function(){return this.value},n.prototype.getStartEnd=function(){return this.startEnd},n.prototype.getResultPoints=function(){return this.resultPoints},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.value===t.value},n.prototype.hashCode=function(){return this.value},n}(),lH=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},_d=function(){function n(){}return n.getRSSvalue=function(e,t,r){var i,a,s=0;try{for(var o=lH(e),c=o.next();!c.done;c=o.next()){var d=c.value;s+=d}}catch(C){i={error:C}}finally{try{c&&!c.done&&(a=o.return)&&a.call(o)}finally{if(i)throw i.error}}for(var f=0,p=0,g=e.length,m=0;m<g-1;m++){var x=void 0;for(x=1,p|=1<<m;x<e[m];x++,p&=~(1<<m)){var b=n.combins(s-x-1,g-m-2);if(r&&p===0&&s-x-(g-m-1)>=g-m-1&&(b-=n.combins(s-x-(g-m),g-m-2)),g-m-1>1){for(var A=0,E=s-x-(g-m-2);E>t;E--)A+=n.combins(s-x-E-1,g-m-3);b-=A*(g-1-m)}else s-x>t&&b--;f+=b}s-=x}return f},n.combins=function(e,t){var r,i;e-t>t?(i=t,r=e-t):(i=e-t,r=t);for(var a=1,s=1,o=e;o>r;o--)a*=o,s<=i&&(a/=s,s++);for(;s<=i;)a/=s,s++;return a},n}(),cH=function(){function n(){}return n.buildBitArray=function(e){var t=e.length*2-1;e[e.length-1].getRightChar()==null&&(t-=1);for(var r=12*t,i=new Gr(r),a=0,s=e[0],o=s.getRightChar().getValue(),c=11;c>=0;--c)(o&1<<c)!==0&&i.set(a),a++;for(var c=1;c<e.length;++c){for(var d=e[c],f=d.getLeftChar().getValue(),p=11;p>=0;--p)(f&1<<p)!==0&&i.set(a),a++;if(d.getRightChar()!==null)for(var g=d.getRightChar().getValue(),p=11;p>=0;--p)(g&1<<p)!==0&&i.set(a),a++}return i},n}(),Ic=function(){function n(e,t){t?this.decodedInformation=null:(this.finished=e,this.decodedInformation=t)}return n.prototype.getDecodedInformation=function(){return this.decodedInformation},n.prototype.isFinished=function(){return this.finished},n}(),s_=function(){function n(e){this.newPosition=e}return n.prototype.getNewPosition=function(){return this.newPosition},n}(),uH=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Va=function(n){uH(e,n);function e(t,r){var i=n.call(this,t)||this;return i.value=r,i}return e.prototype.getValue=function(){return this.value},e.prototype.isFNC1=function(){return this.value===e.FNC1},e.FNC1="$",e}(s_),dH=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Dc=function(n){dH(e,n);function e(t,r,i){var a=n.call(this,t)||this;return i?(a.remaining=!0,a.remainingValue=a.remainingValue):(a.remaining=!1,a.remainingValue=0),a.newString=r,a}return e.prototype.getNewString=function(){return this.newString},e.prototype.isRemaining=function(){return this.remaining},e.prototype.getRemainingValue=function(){return this.remainingValue},e}(s_),fH=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),ad=function(n){fH(e,n);function e(t,r,i){var a=n.call(this,t)||this;if(r<0||r>10||i<0||i>10)throw new je;return a.firstDigit=r,a.secondDigit=i,a}return e.prototype.getFirstDigit=function(){return this.firstDigit},e.prototype.getSecondDigit=function(){return this.secondDigit},e.prototype.getValue=function(){return this.firstDigit*10+this.secondDigit},e.prototype.isFirstDigitFNC1=function(){return this.firstDigit===e.FNC1},e.prototype.isSecondDigitFNC1=function(){return this.secondDigit===e.FNC1},e.prototype.isAnyFNC1=function(){return this.firstDigit===e.FNC1||this.secondDigit===e.FNC1},e.FNC1=10,e}(s_),Ug=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},hH=function(){function n(){}return n.parseFieldsInGeneralPurpose=function(e){var t,r,i,a,s,o,c,d;if(!e)return null;if(e.length<2)throw new _e;var f=e.substring(0,2);try{for(var p=Ug(n.TWO_DIGIT_DATA_LENGTH),g=p.next();!g.done;g=p.next()){var m=g.value;if(m[0]===f)return m[1]===n.VARIABLE_LENGTH?n.processVariableAI(2,m[2],e):n.processFixedAI(2,m[1],e)}}catch(B){t={error:B}}finally{try{g&&!g.done&&(r=p.return)&&r.call(p)}finally{if(t)throw t.error}}if(e.length<3)throw new _e;var x=e.substring(0,3);try{for(var b=Ug(n.THREE_DIGIT_DATA_LENGTH),A=b.next();!A.done;A=b.next()){var m=A.value;if(m[0]===x)return m[1]===n.VARIABLE_LENGTH?n.processVariableAI(3,m[2],e):n.processFixedAI(3,m[1],e)}}catch(B){i={error:B}}finally{try{A&&!A.done&&(a=b.return)&&a.call(b)}finally{if(i)throw i.error}}try{for(var E=Ug(n.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH),C=E.next();!C.done;C=E.next()){var m=C.value;if(m[0]===x)return m[1]===n.VARIABLE_LENGTH?n.processVariableAI(4,m[2],e):n.processFixedAI(4,m[1],e)}}catch(B){s={error:B}}finally{try{C&&!C.done&&(o=E.return)&&o.call(E)}finally{if(s)throw s.error}}if(e.length<4)throw new _e;var T=e.substring(0,4);try{for(var D=Ug(n.FOUR_DIGIT_DATA_LENGTH),k=D.next();!k.done;k=D.next()){var m=k.value;if(m[0]===T)return m[1]===n.VARIABLE_LENGTH?n.processVariableAI(4,m[2],e):n.processFixedAI(4,m[1],e)}}catch(B){c={error:B}}finally{try{k&&!k.done&&(d=D.return)&&d.call(D)}finally{if(c)throw c.error}}throw new _e},n.processFixedAI=function(e,t,r){if(r.length<e)throw new _e;var i=r.substring(0,e);if(r.length<e+t)throw new _e;var a=r.substring(e,e+t),s=r.substring(e+t),o="("+i+")"+a,c=n.parseFieldsInGeneralPurpose(s);return c==null?o:o+c},n.processVariableAI=function(e,t,r){var i=r.substring(0,e),a;r.length<e+t?a=r.length:a=e+t;var s=r.substring(e,a),o=r.substring(a),c="("+i+")"+s,d=n.parseFieldsInGeneralPurpose(o);return d==null?c:c+d},n.VARIABLE_LENGTH=[],n.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",n.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",n.VARIABLE_LENGTH,20],["22",n.VARIABLE_LENGTH,29],["30",n.VARIABLE_LENGTH,8],["37",n.VARIABLE_LENGTH,8],["90",n.VARIABLE_LENGTH,30],["91",n.VARIABLE_LENGTH,30],["92",n.VARIABLE_LENGTH,30],["93",n.VARIABLE_LENGTH,30],["94",n.VARIABLE_LENGTH,30],["95",n.VARIABLE_LENGTH,30],["96",n.VARIABLE_LENGTH,30],["97",n.VARIABLE_LENGTH,3],["98",n.VARIABLE_LENGTH,30],["99",n.VARIABLE_LENGTH,30]],n.THREE_DIGIT_DATA_LENGTH=[["240",n.VARIABLE_LENGTH,30],["241",n.VARIABLE_LENGTH,30],["242",n.VARIABLE_LENGTH,6],["250",n.VARIABLE_LENGTH,30],["251",n.VARIABLE_LENGTH,30],["253",n.VARIABLE_LENGTH,17],["254",n.VARIABLE_LENGTH,20],["400",n.VARIABLE_LENGTH,30],["401",n.VARIABLE_LENGTH,30],["402",17],["403",n.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",n.VARIABLE_LENGTH,20],["421",n.VARIABLE_LENGTH,15],["422",3],["423",n.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],n.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",n.VARIABLE_LENGTH,15],["391",n.VARIABLE_LENGTH,18],["392",n.VARIABLE_LENGTH,15],["393",n.VARIABLE_LENGTH,18],["703",n.VARIABLE_LENGTH,30]],n.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",n.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",n.VARIABLE_LENGTH,20],["8003",n.VARIABLE_LENGTH,30],["8004",n.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",n.VARIABLE_LENGTH,30],["8008",n.VARIABLE_LENGTH,12],["8018",18],["8020",n.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",n.VARIABLE_LENGTH,70],["8200",n.VARIABLE_LENGTH,70]],n}(),wm=function(){function n(e){this.buffer=new Et,this.information=e}return n.prototype.decodeAllCodes=function(e,t){var r=t,i=null;do{var a=this.decodeGeneralPurposeField(r,i),s=hH.parseFieldsInGeneralPurpose(a.getNewString());if(s!=null&&e.append(s),a.isRemaining()?i=""+a.getRemainingValue():i=null,r===a.getNewPosition())break;r=a.getNewPosition()}while(!0);return e.toString()},n.prototype.isStillNumeric=function(e){if(e+7>this.information.getSize())return e+4<=this.information.getSize();for(var t=e;t<e+3;++t)if(this.information.get(t))return!0;return this.information.get(e+3)},n.prototype.decodeNumeric=function(e){if(e+7>this.information.getSize()){var t=this.extractNumericValueFromBitArray(e,4);return t===0?new ad(this.information.getSize(),ad.FNC1,ad.FNC1):new ad(this.information.getSize(),t-1,ad.FNC1)}var r=this.extractNumericValueFromBitArray(e,7),i=(r-8)/11,a=(r-8)%11;return new ad(e+7,i,a)},n.prototype.extractNumericValueFromBitArray=function(e,t){return n.extractNumericValueFromBitArray(this.information,e,t)},n.extractNumericValueFromBitArray=function(e,t,r){for(var i=0,a=0;a<r;++a)e.get(t+a)&&(i|=1<<r-a-1);return i},n.prototype.decodeGeneralPurposeField=function(e,t){this.buffer.setLengthToZero(),t!=null&&this.buffer.append(t),this.current.setPosition(e);var r=this.parseBlocks();return r!=null&&r.isRemaining()?new Dc(this.current.getPosition(),this.buffer.toString(),r.getRemainingValue()):new Dc(this.current.getPosition(),this.buffer.toString())},n.prototype.parseBlocks=function(){var e,t;do{var r=this.current.getPosition();this.current.isAlpha()?(t=this.parseAlphaBlock(),e=t.isFinished()):this.current.isIsoIec646()?(t=this.parseIsoIec646Block(),e=t.isFinished()):(t=this.parseNumericBlock(),e=t.isFinished());var i=r!==this.current.getPosition();if(!i&&!e)break}while(!e);return t.getDecodedInformation()},n.prototype.parseNumericBlock=function(){for(;this.isStillNumeric(this.current.getPosition());){var e=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFirstDigitFNC1()){var t=void 0;return e.isSecondDigitFNC1()?t=new Dc(this.current.getPosition(),this.buffer.toString()):t=new Dc(this.current.getPosition(),this.buffer.toString(),e.getSecondDigit()),new Ic(!0,t)}if(this.buffer.append(e.getFirstDigit()),e.isSecondDigitFNC1()){var t=new Dc(this.current.getPosition(),this.buffer.toString());return new Ic(!0,t)}this.buffer.append(e.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new Ic(!1)},n.prototype.parseIsoIec646Block=function(){for(;this.isStillIsoIec646(this.current.getPosition());){var e=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){var t=new Dc(this.current.getPosition(),this.buffer.toString());return new Ic(!0,t)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new Ic(!1)},n.prototype.parseAlphaBlock=function(){for(;this.isStillAlpha(this.current.getPosition());){var e=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){var t=new Dc(this.current.getPosition(),this.buffer.toString());return new Ic(!0,t)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new Ic(!1)},n.prototype.isStillIsoIec646=function(e){if(e+5>this.information.getSize())return!1;var t=this.extractNumericValueFromBitArray(e,5);if(t>=5&&t<16)return!0;if(e+7>this.information.getSize())return!1;var r=this.extractNumericValueFromBitArray(e,7);if(r>=64&&r<116)return!0;if(e+8>this.information.getSize())return!1;var i=this.extractNumericValueFromBitArray(e,8);return i>=232&&i<253},n.prototype.decodeIsoIec646=function(e){var t=this.extractNumericValueFromBitArray(e,5);if(t===15)return new Va(e+5,Va.FNC1);if(t>=5&&t<15)return new Va(e+5,"0"+(t-5));var r=this.extractNumericValueFromBitArray(e,7);if(r>=64&&r<90)return new Va(e+7,""+(r+1));if(r>=90&&r<116)return new Va(e+7,""+(r+7));var i=this.extractNumericValueFromBitArray(e,8),a;switch(i){case 232:a="!";break;case 233:a='"';break;case 234:a="%";break;case 235:a="&";break;case 236:a="'";break;case 237:a="(";break;case 238:a=")";break;case 239:a="*";break;case 240:a="+";break;case 241:a=",";break;case 242:a="-";break;case 243:a=".";break;case 244:a="/";break;case 245:a=":";break;case 246:a=";";break;case 247:a="<";break;case 248:a="=";break;case 249:a=">";break;case 250:a="?";break;case 251:a="_";break;case 252:a=" ";break;default:throw new je}return new Va(e+8,a)},n.prototype.isStillAlpha=function(e){if(e+5>this.information.getSize())return!1;var t=this.extractNumericValueFromBitArray(e,5);if(t>=5&&t<16)return!0;if(e+6>this.information.getSize())return!1;var r=this.extractNumericValueFromBitArray(e,6);return r>=16&&r<63},n.prototype.decodeAlphanumeric=function(e){var t=this.extractNumericValueFromBitArray(e,5);if(t===15)return new Va(e+5,Va.FNC1);if(t>=5&&t<15)return new Va(e+5,"0"+(t-5));var r=this.extractNumericValueFromBitArray(e,6);if(r>=32&&r<58)return new Va(e+6,""+(r+33));var i;switch(r){case 58:i="*";break;case 59:i=",";break;case 60:i="-";break;case 61:i=".";break;case 62:i="/";break;default:throw new Z0("Decoding invalid alphanumeric value: "+r)}return new Va(e+6,i)},n.prototype.isAlphaTo646ToAlphaLatch=function(e){if(e+1>this.information.getSize())return!1;for(var t=0;t<5&&t+e<this.information.getSize();++t)if(t===2){if(!this.information.get(e+2))return!1}else if(this.information.get(e+t))return!1;return!0},n.prototype.isAlphaOr646ToNumericLatch=function(e){if(e+3>this.information.getSize())return!1;for(var t=e;t<e+3;++t)if(this.information.get(t))return!1;return!0},n.prototype.isNumericToAlphaNumericLatch=function(e){if(e+1>this.information.getSize())return!1;for(var t=0;t<4&&t+e<this.information.getSize();++t)if(this.information.get(e+t))return!1;return!0},n}(),KM=function(){function n(e){this.information=e,this.generalDecoder=new wm(e)}return n.prototype.getInformation=function(){return this.information},n.prototype.getGeneralDecoder=function(){return this.generalDecoder},n}(),pH=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),$a=function(n){pH(e,n);function e(t){return n.call(this,t)||this}return e.prototype.encodeCompressedGtin=function(t,r){t.append("(01)");var i=t.length();t.append("9"),this.encodeCompressedGtinWithoutAI(t,r,i)},e.prototype.encodeCompressedGtinWithoutAI=function(t,r,i){for(var a=0;a<4;++a){var s=this.getGeneralDecoder().extractNumericValueFromBitArray(r+10*a,10);s/100===0&&t.append("0"),s/10===0&&t.append("0"),t.append(s)}e.appendCheckDigit(t,i)},e.appendCheckDigit=function(t,r){for(var i=0,a=0;a<13;a++){var s=t.charAt(a+r).charCodeAt(0)-48;i+=(a&1)===0?3*s:s}i=10-i%10,i===10&&(i=0),t.append(i)},e.GTIN_SIZE=40,e}(KM),gH=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),mH=function(n){gH(e,n);function e(t){return n.call(this,t)||this}return e.prototype.parseInformation=function(){var t=new Et;t.append("(01)");var r=t.length(),i=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE,4);return t.append(i),this.encodeCompressedGtinWithoutAI(t,e.HEADER_SIZE+4,r),this.getGeneralDecoder().decodeAllCodes(t,e.HEADER_SIZE+44)},e.HEADER_SIZE=4,e}($a),yH=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),vH=function(n){yH(e,n);function e(t){return n.call(this,t)||this}return e.prototype.parseInformation=function(){var t=new Et;return this.getGeneralDecoder().decodeAllCodes(t,e.HEADER_SIZE)},e.HEADER_SIZE=5,e}(KM),xH=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),bm=function(n){xH(e,n);function e(t){return n.call(this,t)||this}return e.prototype.encodeCompressedWeight=function(t,r,i){var a=this.getGeneralDecoder().extractNumericValueFromBitArray(r,i);this.addWeightCode(t,a);for(var s=this.checkWeight(a),o=1e5,c=0;c<5;++c)s/o===0&&t.append("0"),o/=10;t.append(s)},e}($a),wH=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),QM=function(n){wH(e,n);function e(t){return n.call(this,t)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()!==e.HEADER_SIZE+bm.GTIN_SIZE+e.WEIGHT_SIZE)throw new _e;var t=new Et;return this.encodeCompressedGtin(t,e.HEADER_SIZE),this.encodeCompressedWeight(t,e.HEADER_SIZE+bm.GTIN_SIZE,e.WEIGHT_SIZE),t.toString()},e.HEADER_SIZE=5,e.WEIGHT_SIZE=15,e}(bm),bH=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),_H=function(n){bH(e,n);function e(t){return n.call(this,t)||this}return e.prototype.addWeightCode=function(t,r){t.append("(3103)")},e.prototype.checkWeight=function(t){return t},e}(QM),AH=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),EH=function(n){AH(e,n);function e(t){return n.call(this,t)||this}return e.prototype.addWeightCode=function(t,r){r<1e4?t.append("(3202)"):t.append("(3203)")},e.prototype.checkWeight=function(t){return t<1e4?t:t-1e4},e}(QM),SH=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),CH=function(n){SH(e,n);function e(t){return n.call(this,t)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()<e.HEADER_SIZE+$a.GTIN_SIZE)throw new _e;var t=new Et;this.encodeCompressedGtin(t,e.HEADER_SIZE);var r=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+$a.GTIN_SIZE,e.LAST_DIGIT_SIZE);t.append("(392"),t.append(r),t.append(")");var i=this.getGeneralDecoder().decodeGeneralPurposeField(e.HEADER_SIZE+$a.GTIN_SIZE+e.LAST_DIGIT_SIZE,null);return t.append(i.getNewString()),t.toString()},e.HEADER_SIZE=8,e.LAST_DIGIT_SIZE=2,e}($a),TH=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),IH=function(n){TH(e,n);function e(t){return n.call(this,t)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()<e.HEADER_SIZE+$a.GTIN_SIZE)throw new _e;var t=new Et;this.encodeCompressedGtin(t,e.HEADER_SIZE);var r=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+$a.GTIN_SIZE,e.LAST_DIGIT_SIZE);t.append("(393"),t.append(r),t.append(")");var i=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+$a.GTIN_SIZE+e.LAST_DIGIT_SIZE,e.FIRST_THREE_DIGITS_SIZE);i/100===0&&t.append("0"),i/10===0&&t.append("0"),t.append(i);var a=this.getGeneralDecoder().decodeGeneralPurposeField(e.HEADER_SIZE+$a.GTIN_SIZE+e.LAST_DIGIT_SIZE+e.FIRST_THREE_DIGITS_SIZE,null);return t.append(a.getNewString()),t.toString()},e.HEADER_SIZE=8,e.LAST_DIGIT_SIZE=2,e.FIRST_THREE_DIGITS_SIZE=10,e}($a),DH=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),ul=function(n){DH(e,n);function e(t,r,i){var a=n.call(this,t)||this;return a.dateCode=i,a.firstAIdigits=r,a}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()!==e.HEADER_SIZE+e.GTIN_SIZE+e.WEIGHT_SIZE+e.DATE_SIZE)throw new _e;var t=new Et;return this.encodeCompressedGtin(t,e.HEADER_SIZE),this.encodeCompressedWeight(t,e.HEADER_SIZE+e.GTIN_SIZE,e.WEIGHT_SIZE),this.encodeCompressedDate(t,e.HEADER_SIZE+e.GTIN_SIZE+e.WEIGHT_SIZE),t.toString()},e.prototype.encodeCompressedDate=function(t,r){var i=this.getGeneralDecoder().extractNumericValueFromBitArray(r,e.DATE_SIZE);if(i!==38400){t.append("("),t.append(this.dateCode),t.append(")");var a=i%32;i/=32;var s=i%12+1;i/=12;var o=i;o/10===0&&t.append("0"),t.append(o),s/10===0&&t.append("0"),t.append(s),a/10===0&&t.append("0"),t.append(a)}},e.prototype.addWeightCode=function(t,r){t.append("("),t.append(this.firstAIdigits),t.append(r/1e5),t.append(")")},e.prototype.checkWeight=function(t){return t%1e5},e.HEADER_SIZE=8,e.WEIGHT_SIZE=20,e.DATE_SIZE=16,e}(bm);function RH(n){try{if(n.get(1))return new mH(n);if(!n.get(2))return new vH(n);var e=wm.extractNumericValueFromBitArray(n,1,4);switch(e){case 4:return new _H(n);case 5:return new EH(n)}var t=wm.extractNumericValueFromBitArray(n,1,5);switch(t){case 12:return new CH(n);case 13:return new IH(n)}var r=wm.extractNumericValueFromBitArray(n,1,7);switch(r){case 56:return new ul(n,"310","11");case 57:return new ul(n,"320","11");case 58:return new ul(n,"310","13");case 59:return new ul(n,"320","13");case 60:return new ul(n,"310","15");case 61:return new ul(n,"320","15");case 62:return new ul(n,"310","17");case 63:return new ul(n,"320","17")}}catch(i){throw console.log(i),new Z0("unknown decoder: "+n)}}var LI=function(){function n(e,t,r,i){this.leftchar=e,this.rightchar=t,this.finderpattern=r,this.maybeLast=i}return n.prototype.mayBeLast=function(){return this.maybeLast},n.prototype.getLeftChar=function(){return this.leftchar},n.prototype.getRightChar=function(){return this.rightchar},n.prototype.getFinderPattern=function(){return this.finderpattern},n.prototype.mustBeLast=function(){return this.rightchar==null},n.prototype.toString=function(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"},n.equals=function(e,t){return e instanceof n?n.equalsOrNull(e.leftchar,t.leftchar)&&n.equalsOrNull(e.rightchar,t.rightchar)&&n.equalsOrNull(e.finderpattern,t.finderpattern):!1},n.equalsOrNull=function(e,t){return e===null?t===null:n.equals(e,t)},n.prototype.hashCode=function(){var e=this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue();return e},n}(),MH=function(){function n(e,t,r){this.pairs=e,this.rowNumber=t,this.wasReversed=r}return n.prototype.getPairs=function(){return this.pairs},n.prototype.getRowNumber=function(){return this.rowNumber},n.prototype.isReversed=function(){return this.wasReversed},n.prototype.isEquivalent=function(e){return this.checkEqualitity(this,e)},n.prototype.toString=function(){return"{ "+this.pairs+" }"},n.prototype.equals=function(e,t){return e instanceof n?this.checkEqualitity(e,t)&&e.wasReversed===t.wasReversed:!1},n.prototype.checkEqualitity=function(e,t){if(!(!e||!t)){var r;return e.forEach(function(i,a){t.forEach(function(s){i.getLeftChar().getValue()===s.getLeftChar().getValue()&&i.getRightChar().getValue()===s.getRightChar().getValue()&&i.getFinderPatter().getValue()===s.getFinderPatter().getValue()&&(r=!0)})}),r}},n}(),OH=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),dl=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},PH=function(n){OH(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.pairs=new Array(e.MAX_PAIRS),t.rows=new Array,t.startEnd=[2],t}return e.prototype.decodeRow=function(t,r,i){this.pairs.length=0,this.startFromEven=!1;try{return e.constructResult(this.decodeRow2pairs(t,r))}catch{}return this.pairs.length=0,this.startFromEven=!0,e.constructResult(this.decodeRow2pairs(t,r))},e.prototype.reset=function(){this.pairs.length=0,this.rows.length=0},e.prototype.decodeRow2pairs=function(t,r){for(var i=!1;!i;)try{this.pairs.push(this.retrieveNextPair(r,this.pairs,t))}catch(o){if(o instanceof _e){if(!this.pairs.length)throw new _e;i=!0}}if(this.checkChecksum())return this.pairs;var a;if(this.rows.length?a=!0:a=!1,this.storeRow(t,!1),a){var s=this.checkRowsBoolean(!1);if(s!=null||(s=this.checkRowsBoolean(!0),s!=null))return s}throw new _e},e.prototype.checkRowsBoolean=function(t){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,t&&(this.rows=this.rows.reverse());var r=null;try{r=this.checkRows(new Array,0)}catch(i){console.log(i)}return t&&(this.rows=this.rows.reverse()),r},e.prototype.checkRows=function(t,r){for(var i,a,s=r;s<this.rows.length;s++){var o=this.rows[s];this.pairs.length=0;try{for(var c=(i=void 0,dl(t)),d=c.next();!d.done;d=c.next()){var f=d.value;this.pairs.push(f.getPairs())}}catch(g){i={error:g}}finally{try{d&&!d.done&&(a=c.return)&&a.call(c)}finally{if(i)throw i.error}}if(this.pairs.push(o.getPairs()),!!e.isValidSequence(this.pairs)){if(this.checkChecksum())return this.pairs;var p=new Array(t);p.push(o);try{return this.checkRows(p,s+1)}catch(g){console.log(g)}}}throw new _e},e.isValidSequence=function(t){var r,i;try{for(var a=dl(e.FINDER_PATTERN_SEQUENCES),s=a.next();!s.done;s=a.next()){var o=s.value;if(!(t.length>o.length)){for(var c=!0,d=0;d<t.length;d++)if(t[d].getFinderPattern().getValue()!==o[d]){c=!1;break}if(c)return!0}}}catch(f){r={error:f}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}return!1},e.prototype.storeRow=function(t,r){for(var i=0,a=!1,s=!1;i<this.rows.length;){var o=this.rows[i];if(o.getRowNumber()>t){s=o.isEquivalent(this.pairs);break}a=o.isEquivalent(this.pairs),i++}s||a||e.isPartialRow(this.pairs,this.rows)||(this.rows.push(i,new MH(this.pairs,t,r)),this.removePartialRows(this.pairs,this.rows))},e.prototype.removePartialRows=function(t,r){var i,a,s,o,c,d;try{for(var f=dl(r),p=f.next();!p.done;p=f.next()){var g=p.value;if(g.getPairs().length!==t.length){var m=!0;try{for(var x=(s=void 0,dl(g.getPairs())),b=x.next();!b.done;b=x.next()){var A=b.value,E=!1;try{for(var C=(c=void 0,dl(t)),T=C.next();!T.done;T=C.next()){var D=T.value;if(LI.equals(A,D)){E=!0;break}}}catch(k){c={error:k}}finally{try{T&&!T.done&&(d=C.return)&&d.call(C)}finally{if(c)throw c.error}}E||(m=!1)}}catch(k){s={error:k}}finally{try{b&&!b.done&&(o=x.return)&&o.call(x)}finally{if(s)throw s.error}}}}}catch(k){i={error:k}}finally{try{p&&!p.done&&(a=f.return)&&a.call(f)}finally{if(i)throw i.error}}},e.isPartialRow=function(t,r){var i,a,s,o,c,d;try{for(var f=dl(r),p=f.next();!p.done;p=f.next()){var g=p.value,m=!0;try{for(var x=(s=void 0,dl(t)),b=x.next();!b.done;b=x.next()){var A=b.value,E=!1;try{for(var C=(c=void 0,dl(g.getPairs())),T=C.next();!T.done;T=C.next()){var D=T.value;if(A.equals(D)){E=!0;break}}}catch(k){c={error:k}}finally{try{T&&!T.done&&(d=C.return)&&d.call(C)}finally{if(c)throw c.error}}if(!E){m=!1;break}}}catch(k){s={error:k}}finally{try{b&&!b.done&&(o=x.return)&&o.call(x)}finally{if(s)throw s.error}}if(m)return!0}}catch(k){i={error:k}}finally{try{p&&!p.done&&(a=f.return)&&a.call(f)}finally{if(i)throw i.error}}return!1},e.prototype.getRows=function(){return this.rows},e.constructResult=function(t){var r=cH.buildBitArray(t),i=RH(r),a=i.parseInformation(),s=t[0].getFinderPattern().getResultPoints(),o=t[t.length-1].getFinderPattern().getResultPoints(),c=[s[0],s[1],o[0],o[1]];return new wi(a,null,null,c,et.RSS_EXPANDED,null)},e.prototype.checkChecksum=function(){var t=this.pairs.get(0),r=t.getLeftChar(),i=t.getRightChar();if(i===null)return!1;for(var a=i.getChecksumPortion(),s=2,o=1;o<this.pairs.size();++o){var c=this.pairs.get(o);a+=c.getLeftChar().getChecksumPortion(),s++;var d=c.getRightChar();d!=null&&(a+=d.getChecksumPortion(),s++)}a%=211;var f=211*(s-4)+a;return f===r.getValue()},e.getNextSecondBar=function(t,r){var i;return t.get(r)?(i=t.getNextUnset(r),i=t.getNextSet(i)):(i=t.getNextSet(r),i=t.getNextUnset(i)),i},e.prototype.retrieveNextPair=function(t,r,i){var a=r.length%2===0;this.startFromEven&&(a=!a);var s,o=!0,c=-1;do this.findNextPair(t,r,c),s=this.parseFoundFinderPattern(t,i,a),s===null?c=e.getNextSecondBar(t,this.startEnd[0]):o=!1;while(o);var d=this.decodeDataCharacter(t,s,a,!0);if(!this.isEmptyPair(r)&&r[r.length-1].mustBeLast())throw new _e;var f;try{f=this.decodeDataCharacter(t,s,a,!1)}catch(p){f=null,console.log(p)}return new LI(d,f,s,!0)},e.prototype.isEmptyPair=function(t){return t.length===0},e.prototype.findNextPair=function(t,r,i){var a=this.getDecodeFinderCounters();a[0]=0,a[1]=0,a[2]=0,a[3]=0;var s=t.getSize(),o;if(i>=0)o=i;else if(this.isEmptyPair(r))o=0;else{var c=r[r.length-1];o=c.getFinderPattern().getStartEnd()[1]}var d=r.length%2!==0;this.startFromEven&&(d=!d);for(var f=!1;o<s&&(f=!t.get(o),!!f);)o++;for(var p=0,g=o,m=o;m<s;m++)if(t.get(m)!==f)a[p]++;else{if(p===3){if(d&&e.reverseCounters(a),e.isFinderPattern(a)){this.startEnd[0]=g,this.startEnd[1]=m;return}d&&e.reverseCounters(a),g+=a[0]+a[1],a[0]=a[2],a[1]=a[3],a[2]=0,a[3]=0,p--}else p++;a[p]=1,f=!f}throw new _e},e.reverseCounters=function(t){for(var r=t.length,i=0;i<r/2;++i){var a=t[i];t[i]=t[r-i-1],t[r-i-1]=a}},e.prototype.parseFoundFinderPattern=function(t,r,i){var a,s,o;if(i){for(var c=this.startEnd[0]-1;c>=0&&!t.get(c);)c--;c++,a=this.startEnd[0]-c,s=c,o=this.startEnd[1]}else s=this.startEnd[0],o=t.getNextUnset(this.startEnd[1]+1),a=o-this.startEnd[1];var d=this.getDecodeFinderCounters();Sn.arraycopy(d,0,d,1,d.length-1),d[0]=a;var f;try{f=this.parseFinderValue(d,e.FINDER_PATTERNS)}catch{return null}return new XM(f,[s,o],s,o,r)},e.prototype.decodeDataCharacter=function(t,r,i,a){for(var s=this.getDataCharacterCounters(),o=0;o<s.length;o++)s[o]=0;if(a)e.recordPatternInReverse(t,r.getStartEnd()[0],s);else{e.recordPattern(t,r.getStartEnd()[1],s);for(var c=0,d=s.length-1;c<d;c++,d--){var f=s[c];s[c]=s[d],s[d]=f}}var p=17,g=Gt.sum(new Int32Array(s))/p,m=(r.getStartEnd()[1]-r.getStartEnd()[0])/15;if(Math.abs(g-m)/m>.3)throw new _e;for(var x=this.getOddCounts(),b=this.getEvenCounts(),A=this.getOddRoundingErrors(),E=this.getEvenRoundingErrors(),c=0;c<s.length;c++){var C=1*s[c]/g,T=C+.5;if(T<1){if(C<.3)throw new _e;T=1}else if(T>8){if(C>8.7)throw new _e;T=8}var D=c/2;(c&1)===0?(x[D]=T,A[D]=C-T):(b[D]=T,E[D]=C-T)}this.adjustOddEvenCounts(p);for(var k=4*r.getValue()+(i?0:2)+(a?0:1)-1,B=0,O=0,c=x.length-1;c>=0;c--){if(e.isNotA1left(r,i,a)){var I=e.WEIGHTS[k][2*c];O+=x[c]*I}B+=x[c]}for(var R=0,c=b.length-1;c>=0;c--)if(e.isNotA1left(r,i,a)){var I=e.WEIGHTS[k][2*c+1];R+=b[c]*I}var F=O+R;if((B&1)!==0||B>13||B<4)throw new _e;var N=(13-B)/2,P=e.SYMBOL_WIDEST[N],V=9-P,q=_d.getRSSvalue(x,P,!0),X=_d.getRSSvalue(b,V,!1),G=e.EVEN_TOTAL_SUBSET[N],W=e.GSUM[N],K=q*G+X+W;return new Km(K,F)},e.isNotA1left=function(t,r,i){return!(t.getValue()===0&&r&&i)},e.prototype.adjustOddEvenCounts=function(t){var r=Gt.sum(new Int32Array(this.getOddCounts())),i=Gt.sum(new Int32Array(this.getEvenCounts())),a=!1,s=!1;r>13?s=!0:r<4&&(a=!0);var o=!1,c=!1;i>13?c=!0:i<4&&(o=!0);var d=r+i-t,f=(r&1)===1,p=(i&1)===0;if(d===1)if(f){if(p)throw new _e;s=!0}else{if(!p)throw new _e;c=!0}else if(d===-1)if(f){if(p)throw new _e;a=!0}else{if(!p)throw new _e;o=!0}else if(d===0){if(f){if(!p)throw new _e;r<i?(a=!0,c=!0):(s=!0,o=!0)}else if(p)throw new _e}else throw new _e;if(a){if(s)throw new _e;e.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(s&&e.decrement(this.getOddCounts(),this.getOddRoundingErrors()),o){if(c)throw new _e;e.increment(this.getEvenCounts(),this.getOddRoundingErrors())}c&&e.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},e.SYMBOL_WIDEST=[7,5,4,3,1],e.EVEN_TOTAL_SUBSET=[4,20,52,104,204],e.GSUM=[0,348,1388,2948,3988],e.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],e.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],e.FINDER_PAT_A=0,e.FINDER_PAT_B=1,e.FINDER_PAT_C=2,e.FINDER_PAT_D=3,e.FINDER_PAT_E=4,e.FINDER_PAT_F=5,e.FINDER_PATTERN_SEQUENCES=[[e.FINDER_PAT_A,e.FINDER_PAT_A],[e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B],[e.FINDER_PAT_A,e.FINDER_PAT_C,e.FINDER_PAT_B,e.FINDER_PAT_D],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_C],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_D,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_D],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_E],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F]],e.MAX_PAIRS=11,e}(kc),kH=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),NH=function(n){kH(e,n);function e(t,r,i){var a=n.call(this,t,r)||this;return a.count=0,a.finderPattern=i,a}return e.prototype.getFinderPattern=function(){return this.finderPattern},e.prototype.getCount=function(){return this.count},e.prototype.incrementCount=function(){this.count++},e}(Km),LH=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Zx=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},BI=function(n){LH(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.possibleLeftPairs=[],t.possibleRightPairs=[],t}return e.prototype.decodeRow=function(t,r,i){var a,s,o,c,d=this.decodePair(r,!1,t,i);e.addOrTally(this.possibleLeftPairs,d),r.reverse();var f=this.decodePair(r,!0,t,i);e.addOrTally(this.possibleRightPairs,f),r.reverse();try{for(var p=Zx(this.possibleLeftPairs),g=p.next();!g.done;g=p.next()){var m=g.value;if(m.getCount()>1)try{for(var x=(o=void 0,Zx(this.possibleRightPairs)),b=x.next();!b.done;b=x.next()){var A=b.value;if(A.getCount()>1&&e.checkChecksum(m,A))return e.constructResult(m,A)}}catch(E){o={error:E}}finally{try{b&&!b.done&&(c=x.return)&&c.call(x)}finally{if(o)throw o.error}}}}catch(E){a={error:E}}finally{try{g&&!g.done&&(s=p.return)&&s.call(p)}finally{if(a)throw a.error}}throw new _e},e.addOrTally=function(t,r){var i,a;if(r!=null){var s=!1;try{for(var o=Zx(t),c=o.next();!c.done;c=o.next()){var d=c.value;if(d.getValue()===r.getValue()){d.incrementCount(),s=!0;break}}}catch(f){i={error:f}}finally{try{c&&!c.done&&(a=o.return)&&a.call(o)}finally{if(i)throw i.error}}s||t.push(r)}},e.prototype.reset=function(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0},e.constructResult=function(t,r){for(var i=4537077*t.getValue()+r.getValue(),a=new String(i).toString(),s=new Et,o=13-a.length;o>0;o--)s.append("0");s.append(a);for(var c=0,o=0;o<13;o++){var d=s.charAt(o).charCodeAt(0)-48;c+=(o&1)===0?3*d:d}c=10-c%10,c===10&&(c=0),s.append(c.toString());var f=t.getFinderPattern().getResultPoints(),p=r.getFinderPattern().getResultPoints();return new wi(s.toString(),null,0,[f[0],f[1],p[0],p[1]],et.RSS_14,new Date().getTime())},e.checkChecksum=function(t,r){var i=(t.getChecksumPortion()+16*r.getChecksumPortion())%79,a=9*t.getFinderPattern().getValue()+r.getFinderPattern().getValue();return a>72&&a--,a>8&&a--,i===a},e.prototype.decodePair=function(t,r,i,a){try{var s=this.findFinderPattern(t,r),o=this.parseFoundFinderPattern(t,i,r,s),c=a==null?null:a.get(Bn.NEED_RESULT_POINT_CALLBACK);if(c!=null){var d=(s[0]+s[1])/2;r&&(d=t.getSize()-1-d),c.foundPossibleResultPoint(new Ke(d,i))}var f=this.decodeDataCharacter(t,o,!0),p=this.decodeDataCharacter(t,o,!1);return new NH(1597*f.getValue()+p.getValue(),f.getChecksumPortion()+4*p.getChecksumPortion(),o)}catch{return null}},e.prototype.decodeDataCharacter=function(t,r,i){for(var a=this.getDataCharacterCounters(),s=0;s<a.length;s++)a[s]=0;if(i)Mr.recordPatternInReverse(t,r.getStartEnd()[0],a);else{Mr.recordPattern(t,r.getStartEnd()[1]+1,a);for(var o=0,c=a.length-1;o<c;o++,c--){var d=a[o];a[o]=a[c],a[c]=d}}for(var f=i?16:15,p=Gt.sum(new Int32Array(a))/f,g=this.getOddCounts(),m=this.getEvenCounts(),x=this.getOddRoundingErrors(),b=this.getEvenRoundingErrors(),o=0;o<a.length;o++){var A=a[o]/p,E=Math.floor(A+.5);E<1?E=1:E>8&&(E=8);var C=Math.floor(o/2);(o&1)===0?(g[C]=E,x[C]=A-E):(m[C]=E,b[C]=A-E)}this.adjustOddEvenCounts(i,f);for(var T=0,D=0,o=g.length-1;o>=0;o--)D*=9,D+=g[o],T+=g[o];for(var k=0,B=0,o=m.length-1;o>=0;o--)k*=9,k+=m[o],B+=m[o];var O=D+3*k;if(i){if((T&1)!==0||T>12||T<4)throw new _e;var I=(12-T)/2,R=e.OUTSIDE_ODD_WIDEST[I],F=9-R,N=_d.getRSSvalue(g,R,!1),P=_d.getRSSvalue(m,F,!0),V=e.OUTSIDE_EVEN_TOTAL_SUBSET[I],q=e.OUTSIDE_GSUM[I];return new Km(N*V+P+q,O)}else{if((B&1)!==0||B>10||B<4)throw new _e;var I=(10-B)/2,R=e.INSIDE_ODD_WIDEST[I],F=9-R,N=_d.getRSSvalue(g,R,!0),P=_d.getRSSvalue(m,F,!1),X=e.INSIDE_ODD_TOTAL_SUBSET[I],q=e.INSIDE_GSUM[I];return new Km(P*X+N+q,O)}},e.prototype.findFinderPattern=function(t,r){var i=this.getDecodeFinderCounters();i[0]=0,i[1]=0,i[2]=0,i[3]=0;for(var a=t.getSize(),s=!1,o=0;o<a&&(s=!t.get(o),r!==s);)o++;for(var c=0,d=o,f=o;f<a;f++)if(t.get(f)!==s)i[c]++;else{if(c===3){if(kc.isFinderPattern(i))return[d,f];d+=i[0]+i[1],i[0]=i[2],i[1]=i[3],i[2]=0,i[3]=0,c--}else c++;i[c]=1,s=!s}throw new _e},e.prototype.parseFoundFinderPattern=function(t,r,i,a){for(var s=t.get(a[0]),o=a[0]-1;o>=0&&s!==t.get(o);)o--;o++;var c=a[0]-o,d=this.getDecodeFinderCounters(),f=new Int32Array(d.length);Sn.arraycopy(d,0,f,1,d.length-1),f[0]=c;var p=this.parseFinderValue(f,e.FINDER_PATTERNS),g=o,m=a[1];return i&&(g=t.getSize()-1-g,m=t.getSize()-1-m),new XM(p,[o,a[1]],g,m,r)},e.prototype.adjustOddEvenCounts=function(t,r){var i=Gt.sum(new Int32Array(this.getOddCounts())),a=Gt.sum(new Int32Array(this.getEvenCounts())),s=!1,o=!1,c=!1,d=!1;t?(i>12?o=!0:i<4&&(s=!0),a>12?d=!0:a<4&&(c=!0)):(i>11?o=!0:i<5&&(s=!0),a>10?d=!0:a<4&&(c=!0));var f=i+a-r,p=(i&1)===(t?1:0),g=(a&1)===1;if(f===1)if(p){if(g)throw new _e;o=!0}else{if(!g)throw new _e;d=!0}else if(f===-1)if(p){if(g)throw new _e;s=!0}else{if(!g)throw new _e;c=!0}else if(f===0){if(p){if(!g)throw new _e;i<a?(s=!0,d=!0):(o=!0,c=!0)}else if(g)throw new _e}else throw new _e;if(s){if(o)throw new _e;kc.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(o&&kc.decrement(this.getOddCounts(),this.getOddRoundingErrors()),c){if(d)throw new _e;kc.increment(this.getEvenCounts(),this.getOddRoundingErrors())}d&&kc.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},e.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],e.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],e.OUTSIDE_GSUM=[0,161,961,2015,2715],e.INSIDE_GSUM=[0,336,1036,1516],e.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],e.INSIDE_ODD_WIDEST=[2,4,6,8],e.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])],e}(kc),BH=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Xh=function(n){BH(e,n);function e(t){var r=n.call(this)||this;r.readers=[];var i=t?t.get(Bn.POSSIBLE_FORMATS):null,a=t&&t.get(Bn.ASSUME_CODE_39_CHECK_DIGIT)!==void 0,s=t&&t.get(Bn.ENABLE_CODE_39_EXTENDED_MODE)!==void 0;return i&&((i.includes(et.EAN_13)||i.includes(et.UPC_A)||i.includes(et.EAN_8)||i.includes(et.UPC_E))&&r.readers.push(new Qx(t)),i.includes(et.CODE_39)&&r.readers.push(new TI(a,s)),i.includes(et.CODE_93)&&r.readers.push(new II),i.includes(et.CODE_128)&&r.readers.push(new CI),i.includes(et.ITF)&&r.readers.push(new DI),i.includes(et.CODABAR)&&r.readers.push(new aH),i.includes(et.RSS_14)&&r.readers.push(new BI),i.includes(et.RSS_EXPANDED)&&(console.warn("RSS Expanded reader IS NOT ready for production yet! use at your own risk."),r.readers.push(new PH))),r.readers.length===0&&(r.readers.push(new Qx(t)),r.readers.push(new TI),r.readers.push(new II),r.readers.push(new Qx(t)),r.readers.push(new CI),r.readers.push(new DI),r.readers.push(new BI)),r}return e.prototype.decodeRow=function(t,r,i){for(var a=0;a<this.readers.length;a++)try{return this.readers[a].decodeRow(t,r,i)}catch{}throw new _e},e.prototype.reset=function(){this.readers.forEach(function(t){return t.reset()})},e}(Mr),FH=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();(function(n){FH(e,n);function e(t,r){return t===void 0&&(t=500),n.call(this,new Xh(r),t,r)||this}return e})(xf);var FI=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},rn=function(){function n(e,t,r){this.ecCodewords=e,this.ecBlocks=[t],r&&this.ecBlocks.push(r)}return n.prototype.getECCodewords=function(){return this.ecCodewords},n.prototype.getECBlocks=function(){return this.ecBlocks},n}(),Kt=function(){function n(e,t){this.count=e,this.dataCodewords=t}return n.prototype.getCount=function(){return this.count},n.prototype.getDataCodewords=function(){return this.dataCodewords},n}(),VH=function(){function n(e,t,r,i,a,s){var o,c;this.versionNumber=e,this.symbolSizeRows=t,this.symbolSizeColumns=r,this.dataRegionSizeRows=i,this.dataRegionSizeColumns=a,this.ecBlocks=s;var d=0,f=s.getECCodewords(),p=s.getECBlocks();try{for(var g=FI(p),m=g.next();!m.done;m=g.next()){var x=m.value;d+=x.getCount()*(x.getDataCodewords()+f)}}catch(b){o={error:b}}finally{try{m&&!m.done&&(c=g.return)&&c.call(g)}finally{if(o)throw o.error}}this.totalCodewords=d}return n.prototype.getVersionNumber=function(){return this.versionNumber},n.prototype.getSymbolSizeRows=function(){return this.symbolSizeRows},n.prototype.getSymbolSizeColumns=function(){return this.symbolSizeColumns},n.prototype.getDataRegionSizeRows=function(){return this.dataRegionSizeRows},n.prototype.getDataRegionSizeColumns=function(){return this.dataRegionSizeColumns},n.prototype.getTotalCodewords=function(){return this.totalCodewords},n.prototype.getECBlocks=function(){return this.ecBlocks},n.getVersionForDimensions=function(e,t){var r,i;if((e&1)!==0||(t&1)!==0)throw new je;try{for(var a=FI(n.VERSIONS),s=a.next();!s.done;s=a.next()){var o=s.value;if(o.symbolSizeRows===e&&o.symbolSizeColumns===t)return o}}catch(c){r={error:c}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}throw new je},n.prototype.toString=function(){return""+this.versionNumber},n.buildVersions=function(){return[new n(1,10,10,8,8,new rn(5,new Kt(1,3))),new n(2,12,12,10,10,new rn(7,new Kt(1,5))),new n(3,14,14,12,12,new rn(10,new Kt(1,8))),new n(4,16,16,14,14,new rn(12,new Kt(1,12))),new n(5,18,18,16,16,new rn(14,new Kt(1,18))),new n(6,20,20,18,18,new rn(18,new Kt(1,22))),new n(7,22,22,20,20,new rn(20,new Kt(1,30))),new n(8,24,24,22,22,new rn(24,new Kt(1,36))),new n(9,26,26,24,24,new rn(28,new Kt(1,44))),new n(10,32,32,14,14,new rn(36,new Kt(1,62))),new n(11,36,36,16,16,new rn(42,new Kt(1,86))),new n(12,40,40,18,18,new rn(48,new Kt(1,114))),new n(13,44,44,20,20,new rn(56,new Kt(1,144))),new n(14,48,48,22,22,new rn(68,new Kt(1,174))),new n(15,52,52,24,24,new rn(42,new Kt(2,102))),new n(16,64,64,14,14,new rn(56,new Kt(2,140))),new n(17,72,72,16,16,new rn(36,new Kt(4,92))),new n(18,80,80,18,18,new rn(48,new Kt(4,114))),new n(19,88,88,20,20,new rn(56,new Kt(4,144))),new n(20,96,96,22,22,new rn(68,new Kt(4,174))),new n(21,104,104,24,24,new rn(56,new Kt(6,136))),new n(22,120,120,18,18,new rn(68,new Kt(6,175))),new n(23,132,132,20,20,new rn(62,new Kt(8,163))),new n(24,144,144,22,22,new rn(62,new Kt(8,156),new Kt(2,155))),new n(25,8,18,6,16,new rn(7,new Kt(1,5))),new n(26,8,32,6,14,new rn(11,new Kt(1,10))),new n(27,12,26,10,24,new rn(14,new Kt(1,16))),new n(28,12,36,10,16,new rn(18,new Kt(1,22))),new n(29,16,36,14,16,new rn(24,new Kt(1,32))),new n(30,16,48,14,22,new rn(28,new Kt(1,49)))]},n.VERSIONS=n.buildVersions(),n}(),jH=function(){function n(e){var t=e.getHeight();if(t<8||t>144||(t&1)!==0)throw new je;this.version=n.readVersion(e),this.mappingBitMatrix=this.extractDataRegion(e),this.readMappingMatrix=new Us(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}return n.prototype.getVersion=function(){return this.version},n.readVersion=function(e){var t=e.getHeight(),r=e.getWidth();return VH.getVersionForDimensions(t,r)},n.prototype.readCodewords=function(){var e=new Int8Array(this.version.getTotalCodewords()),t=0,r=4,i=0,a=this.mappingBitMatrix.getHeight(),s=this.mappingBitMatrix.getWidth(),o=!1,c=!1,d=!1,f=!1;do if(r===a&&i===0&&!o)e[t++]=this.readCorner1(a,s)&255,r-=2,i+=2,o=!0;else if(r===a-2&&i===0&&(s&3)!==0&&!c)e[t++]=this.readCorner2(a,s)&255,r-=2,i+=2,c=!0;else if(r===a+4&&i===2&&(s&7)===0&&!d)e[t++]=this.readCorner3(a,s)&255,r-=2,i+=2,d=!0;else if(r===a-2&&i===0&&(s&7)===4&&!f)e[t++]=this.readCorner4(a,s)&255,r-=2,i+=2,f=!0;else{do r<a&&i>=0&&!this.readMappingMatrix.get(i,r)&&(e[t++]=this.readUtah(r,i,a,s)&255),r-=2,i+=2;while(r>=0&&i<s);r+=1,i+=3;do r>=0&&i<s&&!this.readMappingMatrix.get(i,r)&&(e[t++]=this.readUtah(r,i,a,s)&255),r+=2,i-=2;while(r<a&&i>=0);r+=3,i+=1}while(r<a||i<s);if(t!==this.version.getTotalCodewords())throw new je;return e},n.prototype.readModule=function(e,t,r,i){return e<0&&(e+=r,t+=4-(r+4&7)),t<0&&(t+=i,e+=4-(i+4&7)),this.readMappingMatrix.set(t,e),this.mappingBitMatrix.get(t,e)},n.prototype.readUtah=function(e,t,r,i){var a=0;return this.readModule(e-2,t-2,r,i)&&(a|=1),a<<=1,this.readModule(e-2,t-1,r,i)&&(a|=1),a<<=1,this.readModule(e-1,t-2,r,i)&&(a|=1),a<<=1,this.readModule(e-1,t-1,r,i)&&(a|=1),a<<=1,this.readModule(e-1,t,r,i)&&(a|=1),a<<=1,this.readModule(e,t-2,r,i)&&(a|=1),a<<=1,this.readModule(e,t-1,r,i)&&(a|=1),a<<=1,this.readModule(e,t,r,i)&&(a|=1),a},n.prototype.readCorner1=function(e,t){var r=0;return this.readModule(e-1,0,e,t)&&(r|=1),r<<=1,this.readModule(e-1,1,e,t)&&(r|=1),r<<=1,this.readModule(e-1,2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-1,e,t)&&(r|=1),r<<=1,this.readModule(1,t-1,e,t)&&(r|=1),r<<=1,this.readModule(2,t-1,e,t)&&(r|=1),r<<=1,this.readModule(3,t-1,e,t)&&(r|=1),r},n.prototype.readCorner2=function(e,t){var r=0;return this.readModule(e-3,0,e,t)&&(r|=1),r<<=1,this.readModule(e-2,0,e,t)&&(r|=1),r<<=1,this.readModule(e-1,0,e,t)&&(r|=1),r<<=1,this.readModule(0,t-4,e,t)&&(r|=1),r<<=1,this.readModule(0,t-3,e,t)&&(r|=1),r<<=1,this.readModule(0,t-2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-1,e,t)&&(r|=1),r<<=1,this.readModule(1,t-1,e,t)&&(r|=1),r},n.prototype.readCorner3=function(e,t){var r=0;return this.readModule(e-1,0,e,t)&&(r|=1),r<<=1,this.readModule(e-1,t-1,e,t)&&(r|=1),r<<=1,this.readModule(0,t-3,e,t)&&(r|=1),r<<=1,this.readModule(0,t-2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-1,e,t)&&(r|=1),r<<=1,this.readModule(1,t-3,e,t)&&(r|=1),r<<=1,this.readModule(1,t-2,e,t)&&(r|=1),r<<=1,this.readModule(1,t-1,e,t)&&(r|=1),r},n.prototype.readCorner4=function(e,t){var r=0;return this.readModule(e-3,0,e,t)&&(r|=1),r<<=1,this.readModule(e-2,0,e,t)&&(r|=1),r<<=1,this.readModule(e-1,0,e,t)&&(r|=1),r<<=1,this.readModule(0,t-2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-1,e,t)&&(r|=1),r<<=1,this.readModule(1,t-1,e,t)&&(r|=1),r<<=1,this.readModule(2,t-1,e,t)&&(r|=1),r<<=1,this.readModule(3,t-1,e,t)&&(r|=1),r},n.prototype.extractDataRegion=function(e){var t=this.version.getSymbolSizeRows(),r=this.version.getSymbolSizeColumns();if(e.getHeight()!==t)throw new it("Dimension of bitMatrix must match the version size");for(var i=this.version.getDataRegionSizeRows(),a=this.version.getDataRegionSizeColumns(),s=t/i|0,o=r/a|0,c=s*i,d=o*a,f=new Us(d,c),p=0;p<s;++p)for(var g=p*i,m=0;m<o;++m)for(var x=m*a,b=0;b<i;++b)for(var A=p*(i+2)+1+b,E=g+b,C=0;C<a;++C){var T=m*(a+2)+1+C;if(e.get(T,A)){var D=x+C;f.set(D,E)}}return f},n}(),VI=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},UH=function(){function n(e,t){this.numDataCodewords=e,this.codewords=t}return n.getDataBlocks=function(e,t){var r,i,a,s,o=t.getECBlocks(),c=0,d=o.getECBlocks();try{for(var f=VI(d),p=f.next();!p.done;p=f.next()){var g=p.value;c+=g.getCount()}}catch(q){r={error:q}}finally{try{p&&!p.done&&(i=f.return)&&i.call(f)}finally{if(r)throw r.error}}var m=new Array(c),x=0;try{for(var b=VI(d),A=b.next();!A.done;A=b.next())for(var g=A.value,E=0;E<g.getCount();E++){var C=g.getDataCodewords(),T=o.getECCodewords()+C;m[x++]=new n(C,new Uint8Array(T))}}catch(q){a={error:q}}finally{try{A&&!A.done&&(s=b.return)&&s.call(b)}finally{if(a)throw a.error}}for(var D=m[0].codewords.length,k=D-o.getECCodewords(),B=k-1,O=0,E=0;E<B;E++)for(var I=0;I<x;I++)m[I].codewords[E]=e[O++];for(var R=t.getVersionNumber()===24,F=R?8:x,I=0;I<F;I++)m[I].codewords[k-1]=e[O++];for(var N=m[0].codewords.length,E=k;E<N;E++)for(var I=0;I<x;I++){var P=R?(I+8)%x:I,V=R&&P>7?E-1:E;m[P].codewords[V]=e[O++]}if(O!==e.length)throw new it;return m},n.prototype.getNumDataCodewords=function(){return this.numDataCodewords},n.prototype.getCodewords=function(){return this.codewords},n}(),ZM=function(){function n(e){this.bytes=e,this.byteOffset=0,this.bitOffset=0}return n.prototype.getBitOffset=function(){return this.bitOffset},n.prototype.getByteOffset=function(){return this.byteOffset},n.prototype.readBits=function(e){if(e<1||e>32||e>this.available())throw new it(""+e);var t=0,r=this.bitOffset,i=this.byteOffset,a=this.bytes;if(r>0){var s=8-r,o=e<s?e:s,c=s-o,d=255>>8-o<<c;t=(a[i]&d)>>c,e-=o,r+=o,r===8&&(r=0,i++)}if(e>0){for(;e>=8;)t=t<<8|a[i]&255,i++,e-=8;if(e>0){var c=8-e,d=255>>c<<c;t=t<<e|(a[i]&d)>>c,r+=e}}return this.bitOffset=r,this.byteOffset=i,t},n.prototype.available=function(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset},n}(),Ar;(function(n){n[n.PAD_ENCODE=0]="PAD_ENCODE",n[n.ASCII_ENCODE=1]="ASCII_ENCODE",n[n.C40_ENCODE=2]="C40_ENCODE",n[n.TEXT_ENCODE=3]="TEXT_ENCODE",n[n.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",n[n.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",n[n.BASE256_ENCODE=6]="BASE256_ENCODE"})(Ar||(Ar={}));var HH=function(){function n(){}return n.decode=function(e){var t=new ZM(e),r=new Et,i=new Et,a=new Array,s=Ar.ASCII_ENCODE;do if(s===Ar.ASCII_ENCODE)s=this.decodeAsciiSegment(t,r,i);else{switch(s){case Ar.C40_ENCODE:this.decodeC40Segment(t,r);break;case Ar.TEXT_ENCODE:this.decodeTextSegment(t,r);break;case Ar.ANSIX12_ENCODE:this.decodeAnsiX12Segment(t,r);break;case Ar.EDIFACT_ENCODE:this.decodeEdifactSegment(t,r);break;case Ar.BASE256_ENCODE:this.decodeBase256Segment(t,r,a);break;default:throw new je}s=Ar.ASCII_ENCODE}while(s!==Ar.PAD_ENCODE&&t.available()>0);return i.length()>0&&r.append(i.toString()),new sy(e,r.toString(),a.length===0?null:a,null)},n.decodeAsciiSegment=function(e,t,r){var i=!1;do{var a=e.readBits(8);if(a===0)throw new je;if(a<=128)return i&&(a+=128),t.append(String.fromCharCode(a-1)),Ar.ASCII_ENCODE;if(a===129)return Ar.PAD_ENCODE;if(a<=229){var s=a-130;s<10&&t.append("0"),t.append(""+s)}else switch(a){case 230:return Ar.C40_ENCODE;case 231:return Ar.BASE256_ENCODE;case 232:t.append("");break;case 233:case 234:break;case 235:i=!0;break;case 236:t.append("[)>05"),r.insert(0,"");break;case 237:t.append("[)>06"),r.insert(0,"");break;case 238:return Ar.ANSIX12_ENCODE;case 239:return Ar.TEXT_ENCODE;case 240:return Ar.EDIFACT_ENCODE;case 241:break;default:if(a!==254||e.available()!==0)throw new je;break}}while(e.available()>0);return Ar.ASCII_ENCODE},n.decodeC40Segment=function(e,t){var r=!1,i=[],a=0;do{if(e.available()===8)return;var s=e.readBits(8);if(s===254)return;this.parseTwoBytes(s,e.readBits(8),i);for(var o=0;o<3;o++){var c=i[o];switch(a){case 0:if(c<3)a=c+1;else if(c<this.C40_BASIC_SET_CHARS.length){var d=this.C40_BASIC_SET_CHARS[c];r?(t.append(String.fromCharCode(d.charCodeAt(0)+128)),r=!1):t.append(d)}else throw new je;break;case 1:r?(t.append(String.fromCharCode(c+128)),r=!1):t.append(String.fromCharCode(c)),a=0;break;case 2:if(c<this.C40_SHIFT2_SET_CHARS.length){var d=this.C40_SHIFT2_SET_CHARS[c];r?(t.append(String.fromCharCode(d.charCodeAt(0)+128)),r=!1):t.append(d)}else switch(c){case 27:t.append("");break;case 30:r=!0;break;default:throw new je}a=0;break;case 3:r?(t.append(String.fromCharCode(c+224)),r=!1):t.append(String.fromCharCode(c+96)),a=0;break;default:throw new je}}}while(e.available()>0)},n.decodeTextSegment=function(e,t){var r=!1,i=[],a=0;do{if(e.available()===8)return;var s=e.readBits(8);if(s===254)return;this.parseTwoBytes(s,e.readBits(8),i);for(var o=0;o<3;o++){var c=i[o];switch(a){case 0:if(c<3)a=c+1;else if(c<this.TEXT_BASIC_SET_CHARS.length){var d=this.TEXT_BASIC_SET_CHARS[c];r?(t.append(String.fromCharCode(d.charCodeAt(0)+128)),r=!1):t.append(d)}else throw new je;break;case 1:r?(t.append(String.fromCharCode(c+128)),r=!1):t.append(String.fromCharCode(c)),a=0;break;case 2:if(c<this.TEXT_SHIFT2_SET_CHARS.length){var d=this.TEXT_SHIFT2_SET_CHARS[c];r?(t.append(String.fromCharCode(d.charCodeAt(0)+128)),r=!1):t.append(d)}else switch(c){case 27:t.append("");break;case 30:r=!0;break;default:throw new je}a=0;break;case 3:if(c<this.TEXT_SHIFT3_SET_CHARS.length){var d=this.TEXT_SHIFT3_SET_CHARS[c];r?(t.append(String.fromCharCode(d.charCodeAt(0)+128)),r=!1):t.append(d),a=0}else throw new je;break;default:throw new je}}}while(e.available()>0)},n.decodeAnsiX12Segment=function(e,t){var r=[];do{if(e.available()===8)return;var i=e.readBits(8);if(i===254)return;this.parseTwoBytes(i,e.readBits(8),r);for(var a=0;a<3;a++){var s=r[a];switch(s){case 0:t.append("\r");break;case 1:t.append("*");break;case 2:t.append(">");break;case 3:t.append(" ");break;default:if(s<14)t.append(String.fromCharCode(s+44));else if(s<40)t.append(String.fromCharCode(s+51));else throw new je;break}}}while(e.available()>0)},n.parseTwoBytes=function(e,t,r){var i=(e<<8)+t-1,a=Math.floor(i/1600);r[0]=a,i-=a*1600,a=Math.floor(i/40),r[1]=a,r[2]=i-a*40},n.decodeEdifactSegment=function(e,t){do{if(e.available()<=16)return;for(var r=0;r<4;r++){var i=e.readBits(6);if(i===31){var a=8-e.getBitOffset();a!==8&&e.readBits(a);return}(i&32)===0&&(i|=64),t.append(String.fromCharCode(i))}}while(e.available()>0)},n.decodeBase256Segment=function(e,t,r){var i=1+e.getByteOffset(),a=this.unrandomize255State(e.readBits(8),i++),s;if(a===0?s=e.available()/8|0:a<250?s=a:s=250*(a-249)+this.unrandomize255State(e.readBits(8),i++),s<0)throw new je;for(var o=new Uint8Array(s),c=0;c<s;c++){if(e.available()<8)throw new je;o[c]=this.unrandomize255State(e.readBits(8),i++)}r.push(o);try{t.append(Ra.decode(o,jt.ISO88591))}catch(d){throw new Z0("Platform does not support required encoding: "+d.message)}},n.unrandomize255State=function(e,t){var r=149*t%255+1,i=e-r;return i>=0?i:i+256},n.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],n.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],n.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],n.TEXT_SHIFT2_SET_CHARS=n.C40_SHIFT2_SET_CHARS,n.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""],n}(),zH=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},$H=function(){function n(){this.rsDecoder=new oy(Ui.DATA_MATRIX_FIELD_256)}return n.prototype.decode=function(e){var t,r,i=new jH(e),a=i.getVersion(),s=i.readCodewords(),o=UH.getDataBlocks(s,a),c=0;try{for(var d=zH(o),f=d.next();!f.done;f=d.next()){var p=f.value;c+=p.getNumDataCodewords()}}catch(T){t={error:T}}finally{try{f&&!f.done&&(r=d.return)&&r.call(d)}finally{if(t)throw t.error}}for(var g=new Uint8Array(c),m=o.length,x=0;x<m;x++){var b=o[x],A=b.getCodewords(),E=b.getNumDataCodewords();this.correctErrors(A,E);for(var C=0;C<E;C++)g[C*m+x]=A[C]}return HH.decode(g)},n.prototype.correctErrors=function(e,t){var r=new Int32Array(e);try{this.rsDecoder.decode(r,e.length-t)}catch{throw new zr}for(var i=0;i<t;i++)e[i]=r[i]},n}(),GH=function(){function n(e){this.image=e,this.rectangleDetector=new pw(this.image)}return n.prototype.detect=function(){var e=this.rectangleDetector.detect(),t=this.detectSolid1(e);if(t=this.detectSolid2(t),t[3]=this.correctTopRight(t),!t[3])throw new _e;t=this.shiftToModuleCenter(t);var r=t[0],i=t[1],a=t[2],s=t[3],o=this.transitionsBetween(r,s)+1,c=this.transitionsBetween(a,s)+1;(o&1)===1&&(o+=1),(c&1)===1&&(c+=1),4*o<7*c&&4*c<7*o&&(o=c=Math.max(o,c));var d=n.sampleGrid(this.image,r,i,a,s,o,c);return new i_(d,[r,i,a,s])},n.shiftPoint=function(e,t,r){var i=(t.getX()-e.getX())/(r+1),a=(t.getY()-e.getY())/(r+1);return new Ke(e.getX()+i,e.getY()+a)},n.moveAway=function(e,t,r){var i=e.getX(),a=e.getY();return i<t?i-=1:i+=1,a<r?a-=1:a+=1,new Ke(i,a)},n.prototype.detectSolid1=function(e){var t=e[0],r=e[1],i=e[3],a=e[2],s=this.transitionsBetween(t,r),o=this.transitionsBetween(r,i),c=this.transitionsBetween(i,a),d=this.transitionsBetween(a,t),f=s,p=[a,t,r,i];return f>o&&(f=o,p[0]=t,p[1]=r,p[2]=i,p[3]=a),f>c&&(f=c,p[0]=r,p[1]=i,p[2]=a,p[3]=t),f>d&&(p[0]=i,p[1]=a,p[2]=t,p[3]=r),p},n.prototype.detectSolid2=function(e){var t=e[0],r=e[1],i=e[2],a=e[3],s=this.transitionsBetween(t,a),o=n.shiftPoint(r,i,(s+1)*4),c=n.shiftPoint(i,r,(s+1)*4),d=this.transitionsBetween(o,t),f=this.transitionsBetween(c,a);return d<f?(e[0]=t,e[1]=r,e[2]=i,e[3]=a):(e[0]=r,e[1]=i,e[2]=a,e[3]=t),e},n.prototype.correctTopRight=function(e){var t=e[0],r=e[1],i=e[2],a=e[3],s=this.transitionsBetween(t,a),o=this.transitionsBetween(r,a),c=n.shiftPoint(t,r,(o+1)*4),d=n.shiftPoint(i,r,(s+1)*4);s=this.transitionsBetween(c,a),o=this.transitionsBetween(d,a);var f=new Ke(a.getX()+(i.getX()-r.getX())/(s+1),a.getY()+(i.getY()-r.getY())/(s+1)),p=new Ke(a.getX()+(t.getX()-r.getX())/(o+1),a.getY()+(t.getY()-r.getY())/(o+1));if(!this.isValid(f))return this.isValid(p)?p:null;if(!this.isValid(p))return f;var g=this.transitionsBetween(c,f)+this.transitionsBetween(d,f),m=this.transitionsBetween(c,p)+this.transitionsBetween(d,p);return g>m?f:p},n.prototype.shiftToModuleCenter=function(e){var t=e[0],r=e[1],i=e[2],a=e[3],s=this.transitionsBetween(t,a)+1,o=this.transitionsBetween(i,a)+1,c=n.shiftPoint(t,r,o*4),d=n.shiftPoint(i,r,s*4);s=this.transitionsBetween(c,a)+1,o=this.transitionsBetween(d,a)+1,(s&1)===1&&(s+=1),(o&1)===1&&(o+=1);var f=(t.getX()+r.getX()+i.getX()+a.getX())/4,p=(t.getY()+r.getY()+i.getY()+a.getY())/4;t=n.moveAway(t,f,p),r=n.moveAway(r,f,p),i=n.moveAway(i,f,p),a=n.moveAway(a,f,p);var g,m;return c=n.shiftPoint(t,r,o*4),c=n.shiftPoint(c,a,s*4),g=n.shiftPoint(r,t,o*4),g=n.shiftPoint(g,i,s*4),d=n.shiftPoint(i,a,o*4),d=n.shiftPoint(d,r,s*4),m=n.shiftPoint(a,i,o*4),m=n.shiftPoint(m,t,s*4),[c,g,d,m]},n.prototype.isValid=function(e){return e.getX()>=0&&e.getX()<this.image.getWidth()&&e.getY()>0&&e.getY()<this.image.getHeight()},n.sampleGrid=function(e,t,r,i,a,s,o){var c=a_.getInstance();return c.sampleGrid(e,s,o,.5,.5,s-.5,.5,s-.5,o-.5,.5,o-.5,t.getX(),t.getY(),a.getX(),a.getY(),i.getX(),i.getY(),r.getX(),r.getY())},n.prototype.transitionsBetween=function(e,t){var r=Math.trunc(e.getX()),i=Math.trunc(e.getY()),a=Math.trunc(t.getX()),s=Math.trunc(t.getY()),o=Math.abs(s-i)>Math.abs(a-r);if(o){var c=r;r=i,i=c,c=a,a=s,s=c}for(var d=Math.abs(a-r),f=Math.abs(s-i),p=-d/2,g=i<s?1:-1,m=r<a?1:-1,x=0,b=this.image.get(o?i:r,o?r:i),A=r,E=i;A!==a;A+=m){var C=this.image.get(o?E:A,o?A:E);if(C!==b&&(x++,b=C),p+=f,p>0){if(E===s)break;E+=g,p-=d}}return x},n}(),yw=function(){function n(){this.decoder=new $H}return n.prototype.decode=function(e,t){t===void 0&&(t=null);var r,i;if(t!=null&&t.has(Bn.PURE_BARCODE)){var a=n.extractPureBits(e.getBlackMatrix());r=this.decoder.decode(a),i=n.NO_POINTS}else{var s=new GH(e.getBlackMatrix()).detect();r=this.decoder.decode(s.getBits()),i=s.getPoints()}var o=r.getRawBytes(),c=new wi(r.getText(),o,8*o.length,i,et.DATA_MATRIX,Sn.currentTimeMillis()),d=r.getByteSegments();d!=null&&c.putMetadata(ai.BYTE_SEGMENTS,d);var f=r.getECLevel();return f!=null&&c.putMetadata(ai.ERROR_CORRECTION_LEVEL,f),c},n.prototype.reset=function(){},n.extractPureBits=function(e){var t=e.getTopLeftOnBit(),r=e.getBottomRightOnBit();if(t==null||r==null)throw new _e;var i=this.moduleSize(t,e),a=t[1],s=r[1],o=t[0],c=r[0],d=(c-o+1)/i,f=(s-a+1)/i;if(d<=0||f<=0)throw new _e;var p=i/2;a+=p,o+=p;for(var g=new Us(d,f),m=0;m<f;m++)for(var x=a+m*i,b=0;b<d;b++)e.get(o+b*i,x)&&g.set(b,m);return g},n.moduleSize=function(e,t){for(var r=t.getWidth(),i=e[0],a=e[1];i<r&&t.get(i,a);)i++;if(i===r)throw new _e;var s=i-e[0];if(s===0)throw new _e;return s},n.NO_POINTS=[],n}(),WH=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();(function(n){WH(e,n);function e(t){return t===void 0&&(t=500),n.call(this,new yw,t)||this}return e})(xf);var Ad;(function(n){n[n.L=0]="L",n[n.M=1]="M",n[n.Q=2]="Q",n[n.H=3]="H"})(Ad||(Ad={}));var YH=function(){function n(e,t,r){this.value=e,this.stringValue=t,this.bits=r,n.FOR_BITS.set(r,this),n.FOR_VALUE.set(e,this)}return n.prototype.getValue=function(){return this.value},n.prototype.getBits=function(){return this.bits},n.fromString=function(e){switch(e){case"L":return n.L;case"M":return n.M;case"Q":return n.Q;case"H":return n.H;default:throw new Ua(e+"not available")}},n.prototype.toString=function(){return this.stringValue},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.value===t.value},n.forBits=function(e){if(e<0||e>=n.FOR_BITS.size)throw new it;return n.FOR_BITS.get(e)},n.FOR_BITS=new Map,n.FOR_VALUE=new Map,n.L=new n(Ad.L,"L",1),n.M=new n(Ad.M,"M",0),n.Q=new n(Ad.Q,"Q",3),n.H=new n(Ad.H,"H",2),n}(),qH=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},JM=function(){function n(e){this.errorCorrectionLevel=YH.forBits(e>>3&3),this.dataMask=e&7}return n.numBitsDiffering=function(e,t){return It.bitCount(e^t)},n.decodeFormatInformation=function(e,t){var r=n.doDecodeFormatInformation(e,t);return r!==null?r:n.doDecodeFormatInformation(e^n.FORMAT_INFO_MASK_QR,t^n.FORMAT_INFO_MASK_QR)},n.doDecodeFormatInformation=function(e,t){var r,i,a=Number.MAX_SAFE_INTEGER,s=0;try{for(var o=qH(n.FORMAT_INFO_DECODE_LOOKUP),c=o.next();!c.done;c=o.next()){var d=c.value,f=d[0];if(f===e||f===t)return new n(d[1]);var p=n.numBitsDiffering(e,f);p<a&&(s=d[1],a=p),e!==t&&(p=n.numBitsDiffering(t,f),p<a&&(s=d[1],a=p))}}catch(g){r={error:g}}finally{try{c&&!c.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}return a<=3?new n(s):null},n.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},n.prototype.getDataMask=function(){return this.dataMask},n.prototype.hashCode=function(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.errorCorrectionLevel===t.errorCorrectionLevel&&this.dataMask===t.dataMask},n.FORMAT_INFO_MASK_QR=21522,n.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])],n}(),XH=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ce=function(){function n(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this.ecCodewordsPerBlock=e,this.ecBlocks=t}return n.prototype.getECCodewordsPerBlock=function(){return this.ecCodewordsPerBlock},n.prototype.getNumBlocks=function(){var e,t,r=0,i=this.ecBlocks;try{for(var a=XH(i),s=a.next();!s.done;s=a.next()){var o=s.value;r+=o.getCount()}}catch(c){e={error:c}}finally{try{s&&!s.done&&(t=a.return)&&t.call(a)}finally{if(e)throw e.error}}return r},n.prototype.getTotalECCodewords=function(){return this.ecCodewordsPerBlock*this.getNumBlocks()},n.prototype.getECBlocks=function(){return this.ecBlocks},n}(),Y=function(){function n(e,t){this.count=e,this.dataCodewords=t}return n.prototype.getCount=function(){return this.count},n.prototype.getDataCodewords=function(){return this.dataCodewords},n}(),KH=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Wc=function(){function n(e,t){for(var r,i,a=[],s=2;s<arguments.length;s++)a[s-2]=arguments[s];this.versionNumber=e,this.alignmentPatternCenters=t,this.ecBlocks=a;var o=0,c=a[0].getECCodewordsPerBlock(),d=a[0].getECBlocks();try{for(var f=KH(d),p=f.next();!p.done;p=f.next()){var g=p.value;o+=g.getCount()*(g.getDataCodewords()+c)}}catch(m){r={error:m}}finally{try{p&&!p.done&&(i=f.return)&&i.call(f)}finally{if(r)throw r.error}}this.totalCodewords=o}return n.prototype.getVersionNumber=function(){return this.versionNumber},n.prototype.getAlignmentPatternCenters=function(){return this.alignmentPatternCenters},n.prototype.getTotalCodewords=function(){return this.totalCodewords},n.prototype.getDimensionForVersion=function(){return 17+4*this.versionNumber},n.prototype.getECBlocksForLevel=function(e){return this.ecBlocks[e.getValue()]},n.getProvisionalVersionForDimension=function(e){if(e%4!==1)throw new je;try{return this.getVersionForNumber((e-17)/4)}catch{throw new je}},n.getVersionForNumber=function(e){if(e<1||e>40)throw new it;return n.VERSIONS[e-1]},n.decodeVersionInformation=function(e){for(var t=Number.MAX_SAFE_INTEGER,r=0,i=0;i<n.VERSION_DECODE_INFO.length;i++){var a=n.VERSION_DECODE_INFO[i];if(a===e)return n.getVersionForNumber(i+7);var s=JM.numBitsDiffering(e,a);s<t&&(r=i+7,t=s)}return t<=3?n.getVersionForNumber(r):null},n.prototype.buildFunctionPattern=function(){var e=this.getDimensionForVersion(),t=new Us(e);t.setRegion(0,0,9,9),t.setRegion(e-8,0,8,9),t.setRegion(0,e-8,9,8);for(var r=this.alignmentPatternCenters.length,i=0;i<r;i++)for(var a=this.alignmentPatternCenters[i]-2,s=0;s<r;s++)i===0&&(s===0||s===r-1)||i===r-1&&s===0||t.setRegion(this.alignmentPatternCenters[s]-2,a,5,5);return t.setRegion(6,9,1,e-17),t.setRegion(9,6,e-17,1),this.versionNumber>6&&(t.setRegion(e-11,0,3,6),t.setRegion(0,e-11,6,3)),t},n.prototype.toString=function(){return""+this.versionNumber},n.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),n.VERSIONS=[new n(1,new Int32Array(0),new ce(7,new Y(1,19)),new ce(10,new Y(1,16)),new ce(13,new Y(1,13)),new ce(17,new Y(1,9))),new n(2,Int32Array.from([6,18]),new ce(10,new Y(1,34)),new ce(16,new Y(1,28)),new ce(22,new Y(1,22)),new ce(28,new Y(1,16))),new n(3,Int32Array.from([6,22]),new ce(15,new Y(1,55)),new ce(26,new Y(1,44)),new ce(18,new Y(2,17)),new ce(22,new Y(2,13))),new n(4,Int32Array.from([6,26]),new ce(20,new Y(1,80)),new ce(18,new Y(2,32)),new ce(26,new Y(2,24)),new ce(16,new Y(4,9))),new n(5,Int32Array.from([6,30]),new ce(26,new Y(1,108)),new ce(24,new Y(2,43)),new ce(18,new Y(2,15),new Y(2,16)),new ce(22,new Y(2,11),new Y(2,12))),new n(6,Int32Array.from([6,34]),new ce(18,new Y(2,68)),new ce(16,new Y(4,27)),new ce(24,new Y(4,19)),new ce(28,new Y(4,15))),new n(7,Int32Array.from([6,22,38]),new ce(20,new Y(2,78)),new ce(18,new Y(4,31)),new ce(18,new Y(2,14),new Y(4,15)),new ce(26,new Y(4,13),new Y(1,14))),new n(8,Int32Array.from([6,24,42]),new ce(24,new Y(2,97)),new ce(22,new Y(2,38),new Y(2,39)),new ce(22,new Y(4,18),new Y(2,19)),new ce(26,new Y(4,14),new Y(2,15))),new n(9,Int32Array.from([6,26,46]),new ce(30,new Y(2,116)),new ce(22,new Y(3,36),new Y(2,37)),new ce(20,new Y(4,16),new Y(4,17)),new ce(24,new Y(4,12),new Y(4,13))),new n(10,Int32Array.from([6,28,50]),new ce(18,new Y(2,68),new Y(2,69)),new ce(26,new Y(4,43),new Y(1,44)),new ce(24,new Y(6,19),new Y(2,20)),new ce(28,new Y(6,15),new Y(2,16))),new n(11,Int32Array.from([6,30,54]),new ce(20,new Y(4,81)),new ce(30,new Y(1,50),new Y(4,51)),new ce(28,new Y(4,22),new Y(4,23)),new ce(24,new Y(3,12),new Y(8,13))),new n(12,Int32Array.from([6,32,58]),new ce(24,new Y(2,92),new Y(2,93)),new ce(22,new Y(6,36),new Y(2,37)),new ce(26,new Y(4,20),new Y(6,21)),new ce(28,new Y(7,14),new Y(4,15))),new n(13,Int32Array.from([6,34,62]),new ce(26,new Y(4,107)),new ce(22,new Y(8,37),new Y(1,38)),new ce(24,new Y(8,20),new Y(4,21)),new ce(22,new Y(12,11),new Y(4,12))),new n(14,Int32Array.from([6,26,46,66]),new ce(30,new Y(3,115),new Y(1,116)),new ce(24,new Y(4,40),new Y(5,41)),new ce(20,new Y(11,16),new Y(5,17)),new ce(24,new Y(11,12),new Y(5,13))),new n(15,Int32Array.from([6,26,48,70]),new ce(22,new Y(5,87),new Y(1,88)),new ce(24,new Y(5,41),new Y(5,42)),new ce(30,new Y(5,24),new Y(7,25)),new ce(24,new Y(11,12),new Y(7,13))),new n(16,Int32Array.from([6,26,50,74]),new ce(24,new Y(5,98),new Y(1,99)),new ce(28,new Y(7,45),new Y(3,46)),new ce(24,new Y(15,19),new Y(2,20)),new ce(30,new Y(3,15),new Y(13,16))),new n(17,Int32Array.from([6,30,54,78]),new ce(28,new Y(1,107),new Y(5,108)),new ce(28,new Y(10,46),new Y(1,47)),new ce(28,new Y(1,22),new Y(15,23)),new ce(28,new Y(2,14),new Y(17,15))),new n(18,Int32Array.from([6,30,56,82]),new ce(30,new Y(5,120),new Y(1,121)),new ce(26,new Y(9,43),new Y(4,44)),new ce(28,new Y(17,22),new Y(1,23)),new ce(28,new Y(2,14),new Y(19,15))),new n(19,Int32Array.from([6,30,58,86]),new ce(28,new Y(3,113),new Y(4,114)),new ce(26,new Y(3,44),new Y(11,45)),new ce(26,new Y(17,21),new Y(4,22)),new ce(26,new Y(9,13),new Y(16,14))),new n(20,Int32Array.from([6,34,62,90]),new ce(28,new Y(3,107),new Y(5,108)),new ce(26,new Y(3,41),new Y(13,42)),new ce(30,new Y(15,24),new Y(5,25)),new ce(28,new Y(15,15),new Y(10,16))),new n(21,Int32Array.from([6,28,50,72,94]),new ce(28,new Y(4,116),new Y(4,117)),new ce(26,new Y(17,42)),new ce(28,new Y(17,22),new Y(6,23)),new ce(30,new Y(19,16),new Y(6,17))),new n(22,Int32Array.from([6,26,50,74,98]),new ce(28,new Y(2,111),new Y(7,112)),new ce(28,new Y(17,46)),new ce(30,new Y(7,24),new Y(16,25)),new ce(24,new Y(34,13))),new n(23,Int32Array.from([6,30,54,78,102]),new ce(30,new Y(4,121),new Y(5,122)),new ce(28,new Y(4,47),new Y(14,48)),new ce(30,new Y(11,24),new Y(14,25)),new ce(30,new Y(16,15),new Y(14,16))),new n(24,Int32Array.from([6,28,54,80,106]),new ce(30,new Y(6,117),new Y(4,118)),new ce(28,new Y(6,45),new Y(14,46)),new ce(30,new Y(11,24),new Y(16,25)),new ce(30,new Y(30,16),new Y(2,17))),new n(25,Int32Array.from([6,32,58,84,110]),new ce(26,new Y(8,106),new Y(4,107)),new ce(28,new Y(8,47),new Y(13,48)),new ce(30,new Y(7,24),new Y(22,25)),new ce(30,new Y(22,15),new Y(13,16))),new n(26,Int32Array.from([6,30,58,86,114]),new ce(28,new Y(10,114),new Y(2,115)),new ce(28,new Y(19,46),new Y(4,47)),new ce(28,new Y(28,22),new Y(6,23)),new ce(30,new Y(33,16),new Y(4,17))),new n(27,Int32Array.from([6,34,62,90,118]),new ce(30,new Y(8,122),new Y(4,123)),new ce(28,new Y(22,45),new Y(3,46)),new ce(30,new Y(8,23),new Y(26,24)),new ce(30,new Y(12,15),new Y(28,16))),new n(28,Int32Array.from([6,26,50,74,98,122]),new ce(30,new Y(3,117),new Y(10,118)),new ce(28,new Y(3,45),new Y(23,46)),new ce(30,new Y(4,24),new Y(31,25)),new ce(30,new Y(11,15),new Y(31,16))),new n(29,Int32Array.from([6,30,54,78,102,126]),new ce(30,new Y(7,116),new Y(7,117)),new ce(28,new Y(21,45),new Y(7,46)),new ce(30,new Y(1,23),new Y(37,24)),new ce(30,new Y(19,15),new Y(26,16))),new n(30,Int32Array.from([6,26,52,78,104,130]),new ce(30,new Y(5,115),new Y(10,116)),new ce(28,new Y(19,47),new Y(10,48)),new ce(30,new Y(15,24),new Y(25,25)),new ce(30,new Y(23,15),new Y(25,16))),new n(31,Int32Array.from([6,30,56,82,108,134]),new ce(30,new Y(13,115),new Y(3,116)),new ce(28,new Y(2,46),new Y(29,47)),new ce(30,new Y(42,24),new Y(1,25)),new ce(30,new Y(23,15),new Y(28,16))),new n(32,Int32Array.from([6,34,60,86,112,138]),new ce(30,new Y(17,115)),new ce(28,new Y(10,46),new Y(23,47)),new ce(30,new Y(10,24),new Y(35,25)),new ce(30,new Y(19,15),new Y(35,16))),new n(33,Int32Array.from([6,30,58,86,114,142]),new ce(30,new Y(17,115),new Y(1,116)),new ce(28,new Y(14,46),new Y(21,47)),new ce(30,new Y(29,24),new Y(19,25)),new ce(30,new Y(11,15),new Y(46,16))),new n(34,Int32Array.from([6,34,62,90,118,146]),new ce(30,new Y(13,115),new Y(6,116)),new ce(28,new Y(14,46),new Y(23,47)),new ce(30,new Y(44,24),new Y(7,25)),new ce(30,new Y(59,16),new Y(1,17))),new n(35,Int32Array.from([6,30,54,78,102,126,150]),new ce(30,new Y(12,121),new Y(7,122)),new ce(28,new Y(12,47),new Y(26,48)),new ce(30,new Y(39,24),new Y(14,25)),new ce(30,new Y(22,15),new Y(41,16))),new n(36,Int32Array.from([6,24,50,76,102,128,154]),new ce(30,new Y(6,121),new Y(14,122)),new ce(28,new Y(6,47),new Y(34,48)),new ce(30,new Y(46,24),new Y(10,25)),new ce(30,new Y(2,15),new Y(64,16))),new n(37,Int32Array.from([6,28,54,80,106,132,158]),new ce(30,new Y(17,122),new Y(4,123)),new ce(28,new Y(29,46),new Y(14,47)),new ce(30,new Y(49,24),new Y(10,25)),new ce(30,new Y(24,15),new Y(46,16))),new n(38,Int32Array.from([6,32,58,84,110,136,162]),new ce(30,new Y(4,122),new Y(18,123)),new ce(28,new Y(13,46),new Y(32,47)),new ce(30,new Y(48,24),new Y(14,25)),new ce(30,new Y(42,15),new Y(32,16))),new n(39,Int32Array.from([6,26,54,82,110,138,166]),new ce(30,new Y(20,117),new Y(4,118)),new ce(28,new Y(40,47),new Y(7,48)),new ce(30,new Y(43,24),new Y(22,25)),new ce(30,new Y(10,15),new Y(67,16))),new n(40,Int32Array.from([6,30,58,86,114,142,170]),new ce(30,new Y(19,118),new Y(6,119)),new ce(28,new Y(18,47),new Y(31,48)),new ce(30,new Y(34,24),new Y(34,25)),new ce(30,new Y(20,15),new Y(61,16)))],n}(),Vr;(function(n){n[n.DATA_MASK_000=0]="DATA_MASK_000",n[n.DATA_MASK_001=1]="DATA_MASK_001",n[n.DATA_MASK_010=2]="DATA_MASK_010",n[n.DATA_MASK_011=3]="DATA_MASK_011",n[n.DATA_MASK_100=4]="DATA_MASK_100",n[n.DATA_MASK_101=5]="DATA_MASK_101",n[n.DATA_MASK_110=6]="DATA_MASK_110",n[n.DATA_MASK_111=7]="DATA_MASK_111"})(Vr||(Vr={}));var jI=function(){function n(e,t){this.value=e,this.isMasked=t}return n.prototype.unmaskBitMatrix=function(e,t){for(var r=0;r<t;r++)for(var i=0;i<t;i++)this.isMasked(r,i)&&e.flip(i,r)},n.values=new Map([[Vr.DATA_MASK_000,new n(Vr.DATA_MASK_000,function(e,t){return(e+t&1)===0})],[Vr.DATA_MASK_001,new n(Vr.DATA_MASK_001,function(e,t){return(e&1)===0})],[Vr.DATA_MASK_010,new n(Vr.DATA_MASK_010,function(e,t){return t%3===0})],[Vr.DATA_MASK_011,new n(Vr.DATA_MASK_011,function(e,t){return(e+t)%3===0})],[Vr.DATA_MASK_100,new n(Vr.DATA_MASK_100,function(e,t){return(Math.floor(e/2)+Math.floor(t/3)&1)===0})],[Vr.DATA_MASK_101,new n(Vr.DATA_MASK_101,function(e,t){return e*t%6===0})],[Vr.DATA_MASK_110,new n(Vr.DATA_MASK_110,function(e,t){return e*t%6<3})],[Vr.DATA_MASK_111,new n(Vr.DATA_MASK_111,function(e,t){return(e+t+e*t%3&1)===0})]]),n}(),QH=function(){function n(e){var t=e.getHeight();if(t<21||(t&3)!==1)throw new je;this.bitMatrix=e}return n.prototype.readFormatInformation=function(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;for(var e=0,t=0;t<6;t++)e=this.copyBit(t,8,e);e=this.copyBit(7,8,e),e=this.copyBit(8,8,e),e=this.copyBit(8,7,e);for(var r=5;r>=0;r--)e=this.copyBit(8,r,e);for(var i=this.bitMatrix.getHeight(),a=0,s=i-7,r=i-1;r>=s;r--)a=this.copyBit(8,r,a);for(var t=i-8;t<i;t++)a=this.copyBit(t,8,a);if(this.parsedFormatInfo=JM.decodeFormatInformation(e,a),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new je},n.prototype.readVersion=function(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;var e=this.bitMatrix.getHeight(),t=Math.floor((e-17)/4);if(t<=6)return Wc.getVersionForNumber(t);for(var r=0,i=e-11,a=5;a>=0;a--)for(var s=e-9;s>=i;s--)r=this.copyBit(s,a,r);var o=Wc.decodeVersionInformation(r);if(o!==null&&o.getDimensionForVersion()===e)return this.parsedVersion=o,o;r=0;for(var s=5;s>=0;s--)for(var a=e-9;a>=i;a--)r=this.copyBit(s,a,r);if(o=Wc.decodeVersionInformation(r),o!==null&&o.getDimensionForVersion()===e)return this.parsedVersion=o,o;throw new je},n.prototype.copyBit=function(e,t,r){var i=this.isMirror?this.bitMatrix.get(t,e):this.bitMatrix.get(e,t);return i?r<<1|1:r<<1},n.prototype.readCodewords=function(){var e=this.readFormatInformation(),t=this.readVersion(),r=jI.values.get(e.getDataMask()),i=this.bitMatrix.getHeight();r.unmaskBitMatrix(this.bitMatrix,i);for(var a=t.buildFunctionPattern(),s=!0,o=new Uint8Array(t.getTotalCodewords()),c=0,d=0,f=0,p=i-1;p>0;p-=2){p===6&&p--;for(var g=0;g<i;g++)for(var m=s?i-1-g:g,x=0;x<2;x++)a.get(p-x,m)||(f++,d<<=1,this.bitMatrix.get(p-x,m)&&(d|=1),f===8&&(o[c++]=d,f=0,d=0));s=!s}if(c!==t.getTotalCodewords())throw new je;return o},n.prototype.remask=function(){if(this.parsedFormatInfo!==null){var e=jI.values.get(this.parsedFormatInfo.getDataMask()),t=this.bitMatrix.getHeight();e.unmaskBitMatrix(this.bitMatrix,t)}},n.prototype.setMirror=function(e){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=e},n.prototype.mirror=function(){for(var e=this.bitMatrix,t=0,r=e.getWidth();t<r;t++)for(var i=t+1,a=e.getHeight();i<a;i++)e.get(t,i)!==e.get(i,t)&&(e.flip(i,t),e.flip(t,i))},n}(),UI=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ZH=function(){function n(e,t){this.numDataCodewords=e,this.codewords=t}return n.getDataBlocks=function(e,t,r){var i,a,s,o;if(e.length!==t.getTotalCodewords())throw new it;var c=t.getECBlocksForLevel(r),d=0,f=c.getECBlocks();try{for(var p=UI(f),g=p.next();!g.done;g=p.next()){var m=g.value;d+=m.getCount()}}catch(V){i={error:V}}finally{try{g&&!g.done&&(a=p.return)&&a.call(p)}finally{if(i)throw i.error}}var x=new Array(d),b=0;try{for(var A=UI(f),E=A.next();!E.done;E=A.next())for(var m=E.value,C=0;C<m.getCount();C++){var T=m.getDataCodewords(),D=c.getECCodewordsPerBlock()+T;x[b++]=new n(T,new Uint8Array(D))}}catch(V){s={error:V}}finally{try{E&&!E.done&&(o=A.return)&&o.call(A)}finally{if(s)throw s.error}}for(var k=x[0].codewords.length,B=x.length-1;B>=0;){var O=x[B].codewords.length;if(O===k)break;B--}B++;for(var I=k-c.getECCodewordsPerBlock(),R=0,C=0;C<I;C++)for(var F=0;F<b;F++)x[F].codewords[C]=e[R++];for(var F=B;F<b;F++)x[F].codewords[I]=e[R++];for(var N=x[0].codewords.length,C=I;C<N;C++)for(var F=0;F<b;F++){var P=F<B?C:C+1;x[F].codewords[P]=e[R++]}return x},n.prototype.getNumDataCodewords=function(){return this.numDataCodewords},n.prototype.getCodewords=function(){return this.codewords},n}(),Aa;(function(n){n[n.TERMINATOR=0]="TERMINATOR",n[n.NUMERIC=1]="NUMERIC",n[n.ALPHANUMERIC=2]="ALPHANUMERIC",n[n.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",n[n.BYTE=4]="BYTE",n[n.ECI=5]="ECI",n[n.KANJI=6]="KANJI",n[n.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",n[n.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",n[n.HANZI=9]="HANZI"})(Aa||(Aa={}));var Dn=function(){function n(e,t,r,i){this.value=e,this.stringValue=t,this.characterCountBitsForVersions=r,this.bits=i,n.FOR_BITS.set(i,this),n.FOR_VALUE.set(e,this)}return n.forBits=function(e){var t=n.FOR_BITS.get(e);if(t===void 0)throw new it;return t},n.prototype.getCharacterCountBits=function(e){var t=e.getVersionNumber(),r;return t<=9?r=0:t<=26?r=1:r=2,this.characterCountBitsForVersions[r]},n.prototype.getValue=function(){return this.value},n.prototype.getBits=function(){return this.bits},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.value===t.value},n.prototype.toString=function(){return this.stringValue},n.FOR_BITS=new Map,n.FOR_VALUE=new Map,n.TERMINATOR=new n(Aa.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),n.NUMERIC=new n(Aa.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),n.ALPHANUMERIC=new n(Aa.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),n.STRUCTURED_APPEND=new n(Aa.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),n.BYTE=new n(Aa.BYTE,"BYTE",Int32Array.from([8,16,16]),4),n.ECI=new n(Aa.ECI,"ECI",Int32Array.from([0,0,0]),7),n.KANJI=new n(Aa.KANJI,"KANJI",Int32Array.from([8,10,12]),8),n.FNC1_FIRST_POSITION=new n(Aa.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),n.FNC1_SECOND_POSITION=new n(Aa.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),n.HANZI=new n(Aa.HANZI,"HANZI",Int32Array.from([8,10,12]),13),n}(),JH=function(){function n(){}return n.decode=function(e,t,r,i){var a=new ZM(e),s=new Et,o=new Array,c=-1,d=-1;try{var f=null,p=!1,g=void 0;do{if(a.available()<4)g=Dn.TERMINATOR;else{var m=a.readBits(4);g=Dn.forBits(m)}switch(g){case Dn.TERMINATOR:break;case Dn.FNC1_FIRST_POSITION:case Dn.FNC1_SECOND_POSITION:p=!0;break;case Dn.STRUCTURED_APPEND:if(a.available()<16)throw new je;c=a.readBits(8),d=a.readBits(8);break;case Dn.ECI:var x=n.parseECIValue(a);if(f=Dr.getCharacterSetECIByValue(x),f===null)throw new je;break;case Dn.HANZI:var b=a.readBits(4),A=a.readBits(g.getCharacterCountBits(t));b===n.GB2312_SUBSET&&n.decodeHanziSegment(a,s,A);break;default:var E=a.readBits(g.getCharacterCountBits(t));switch(g){case Dn.NUMERIC:n.decodeNumericSegment(a,s,E);break;case Dn.ALPHANUMERIC:n.decodeAlphanumericSegment(a,s,E,p);break;case Dn.BYTE:n.decodeByteSegment(a,s,E,f,o,i);break;case Dn.KANJI:n.decodeKanjiSegment(a,s,E);break;default:throw new je}break}}while(g!==Dn.TERMINATOR)}catch{throw new je}return new sy(e,s.toString(),o.length===0?null:o,r===null?null:r.toString(),c,d)},n.decodeHanziSegment=function(e,t,r){if(r*13>e.available())throw new je;for(var i=new Uint8Array(2*r),a=0;r>0;){var s=e.readBits(13),o=s/96<<8&4294967295|s%96;o<959?o+=41377:o+=42657,i[a]=o>>8&255,i[a+1]=o&255,a+=2,r--}try{t.append(Ra.decode(i,jt.GB2312))}catch(c){throw new je(c)}},n.decodeKanjiSegment=function(e,t,r){if(r*13>e.available())throw new je;for(var i=new Uint8Array(2*r),a=0;r>0;){var s=e.readBits(13),o=s/192<<8&4294967295|s%192;o<7936?o+=33088:o+=49472,i[a]=o>>8,i[a+1]=o,a+=2,r--}try{t.append(Ra.decode(i,jt.SHIFT_JIS))}catch(c){throw new je(c)}},n.decodeByteSegment=function(e,t,r,i,a,s){if(8*r>e.available())throw new je;for(var o=new Uint8Array(r),c=0;c<r;c++)o[c]=e.readBits(8);var d;i===null?d=jt.guessEncoding(o,s):d=i.getName();try{t.append(Ra.decode(o,d))}catch(f){throw new je(f)}a.push(o)},n.toAlphaNumericChar=function(e){if(e>=n.ALPHANUMERIC_CHARS.length)throw new je;return n.ALPHANUMERIC_CHARS[e]},n.decodeAlphanumericSegment=function(e,t,r,i){for(var a=t.length();r>1;){if(e.available()<11)throw new je;var s=e.readBits(11);t.append(n.toAlphaNumericChar(Math.floor(s/45))),t.append(n.toAlphaNumericChar(s%45)),r-=2}if(r===1){if(e.available()<6)throw new je;t.append(n.toAlphaNumericChar(e.readBits(6)))}if(i)for(var o=a;o<t.length();o++)t.charAt(o)==="%"&&(o<t.length()-1&&t.charAt(o+1)==="%"?t.deleteCharAt(o+1):t.setCharAt(o,""))},n.decodeNumericSegment=function(e,t,r){for(;r>=3;){if(e.available()<10)throw new je;var i=e.readBits(10);if(i>=1e3)throw new je;t.append(n.toAlphaNumericChar(Math.floor(i/100))),t.append(n.toAlphaNumericChar(Math.floor(i/10)%10)),t.append(n.toAlphaNumericChar(i%10)),r-=3}if(r===2){if(e.available()<7)throw new je;var a=e.readBits(7);if(a>=100)throw new je;t.append(n.toAlphaNumericChar(Math.floor(a/10))),t.append(n.toAlphaNumericChar(a%10))}else if(r===1){if(e.available()<4)throw new je;var s=e.readBits(4);if(s>=10)throw new je;t.append(n.toAlphaNumericChar(s))}},n.parseECIValue=function(e){var t=e.readBits(8);if((t&128)===0)return t&127;if((t&192)===128){var r=e.readBits(8);return(t&63)<<8&4294967295|r}if((t&224)===192){var i=e.readBits(16);return(t&31)<<16&4294967295|i}throw new je},n.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",n.GB2312_SUBSET=1,n}(),eO=function(){function n(e){this.mirrored=e}return n.prototype.isMirrored=function(){return this.mirrored},n.prototype.applyMirroredCorrection=function(e){if(!(!this.mirrored||e===null||e.length<3)){var t=e[0];e[0]=e[2],e[2]=t}},n}(),HI=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ez=function(){function n(){this.rsDecoder=new oy(Ui.QR_CODE_FIELD_256)}return n.prototype.decodeBooleanArray=function(e,t){return this.decodeBitMatrix(Us.parseFromBooleanArray(e),t)},n.prototype.decodeBitMatrix=function(e,t){var r=new QH(e),i=null;try{return this.decodeBitMatrixParser(r,t)}catch(s){i=s}try{r.remask(),r.setMirror(!0),r.readVersion(),r.readFormatInformation(),r.mirror();var a=this.decodeBitMatrixParser(r,t);return a.setOther(new eO(!0)),a}catch(s){throw i!==null?i:s}},n.prototype.decodeBitMatrixParser=function(e,t){var r,i,a,s,o=e.readVersion(),c=e.readFormatInformation().getErrorCorrectionLevel(),d=e.readCodewords(),f=ZH.getDataBlocks(d,o,c),p=0;try{for(var g=HI(f),m=g.next();!m.done;m=g.next()){var x=m.value;p+=x.getNumDataCodewords()}}catch(B){r={error:B}}finally{try{m&&!m.done&&(i=g.return)&&i.call(g)}finally{if(r)throw r.error}}var b=new Uint8Array(p),A=0;try{for(var E=HI(f),C=E.next();!C.done;C=E.next()){var x=C.value,T=x.getCodewords(),D=x.getNumDataCodewords();this.correctErrors(T,D);for(var k=0;k<D;k++)b[A++]=T[k]}}catch(B){a={error:B}}finally{try{C&&!C.done&&(s=E.return)&&s.call(E)}finally{if(a)throw a.error}}return JH.decode(b,o,c,t)},n.prototype.correctErrors=function(e,t){var r=new Int32Array(e);try{this.rsDecoder.decode(r,e.length-t)}catch{throw new zr}for(var i=0;i<t;i++)e[i]=r[i]},n}(),tz=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),nz=function(n){tz(e,n);function e(t,r,i){var a=n.call(this,t,r)||this;return a.estimatedModuleSize=i,a}return e.prototype.aboutEquals=function(t,r,i){if(Math.abs(r-this.getY())<=t&&Math.abs(i-this.getX())<=t){var a=Math.abs(t-this.estimatedModuleSize);return a<=1||a<=this.estimatedModuleSize}return!1},e.prototype.combineEstimate=function(t,r,i){var a=(this.getX()+r)/2,s=(this.getY()+t)/2,o=(this.estimatedModuleSize+i)/2;return new e(a,s,o)},e}(Ke),rz=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},iz=function(){function n(e,t,r,i,a,s,o){this.image=e,this.startX=t,this.startY=r,this.width=i,this.height=a,this.moduleSize=s,this.resultPointCallback=o,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}return n.prototype.find=function(){for(var e=this.startX,t=this.height,r=this.width,i=e+r,a=this.startY+t/2,s=new Int32Array(3),o=this.image,c=0;c<t;c++){var d=a+((c&1)===0?Math.floor((c+1)/2):-Math.floor((c+1)/2));s[0]=0,s[1]=0,s[2]=0;for(var f=e;f<i&&!o.get(f,d);)f++;for(var p=0;f<i;){if(o.get(f,d))if(p===1)s[1]++;else if(p===2){if(this.foundPatternCross(s)){var g=this.handlePossibleCenter(s,d,f);if(g!==null)return g}s[0]=s[2],s[1]=1,s[2]=0,p=1}else s[++p]++;else p===1&&p++,s[p]++;f++}if(this.foundPatternCross(s)){var g=this.handlePossibleCenter(s,d,i);if(g!==null)return g}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new _e},n.centerFromEnd=function(e,t){return t-e[2]-e[1]/2},n.prototype.foundPatternCross=function(e){for(var t=this.moduleSize,r=t/2,i=0;i<3;i++)if(Math.abs(t-e[i])>=r)return!1;return!0},n.prototype.crossCheckVertical=function(e,t,r,i){var a=this.image,s=a.getHeight(),o=this.crossCheckStateCount;o[0]=0,o[1]=0,o[2]=0;for(var c=e;c>=0&&a.get(t,c)&&o[1]<=r;)o[1]++,c--;if(c<0||o[1]>r)return NaN;for(;c>=0&&!a.get(t,c)&&o[0]<=r;)o[0]++,c--;if(o[0]>r)return NaN;for(c=e+1;c<s&&a.get(t,c)&&o[1]<=r;)o[1]++,c++;if(c===s||o[1]>r)return NaN;for(;c<s&&!a.get(t,c)&&o[2]<=r;)o[2]++,c++;if(o[2]>r)return NaN;var d=o[0]+o[1]+o[2];return 5*Math.abs(d-i)>=2*i?NaN:this.foundPatternCross(o)?n.centerFromEnd(o,c):NaN},n.prototype.handlePossibleCenter=function(e,t,r){var i,a,s=e[0]+e[1]+e[2],o=n.centerFromEnd(e,r),c=this.crossCheckVertical(t,o,2*e[1],s);if(!isNaN(c)){var d=(e[0]+e[1]+e[2])/3;try{for(var f=rz(this.possibleCenters),p=f.next();!p.done;p=f.next()){var g=p.value;if(g.aboutEquals(d,c,o))return g.combineEstimate(c,o,d)}}catch(x){i={error:x}}finally{try{p&&!p.done&&(a=f.return)&&a.call(f)}finally{if(i)throw i.error}}var m=new nz(o,c,d);this.possibleCenters.push(m),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(m)}return null},n}(),az=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),sz=function(n){az(e,n);function e(t,r,i,a){var s=n.call(this,t,r)||this;return s.estimatedModuleSize=i,s.count=a,a===void 0&&(s.count=1),s}return e.prototype.getEstimatedModuleSize=function(){return this.estimatedModuleSize},e.prototype.getCount=function(){return this.count},e.prototype.aboutEquals=function(t,r,i){if(Math.abs(r-this.getY())<=t&&Math.abs(i-this.getX())<=t){var a=Math.abs(t-this.estimatedModuleSize);return a<=1||a<=this.estimatedModuleSize}return!1},e.prototype.combineEstimate=function(t,r,i){var a=this.count+1,s=(this.count*this.getX()+r)/a,o=(this.count*this.getY()+t)/a,c=(this.count*this.estimatedModuleSize+i)/a;return new e(s,o,c,a)},e}(Ke),oz=function(){function n(e){this.bottomLeft=e[0],this.topLeft=e[1],this.topRight=e[2]}return n.prototype.getBottomLeft=function(){return this.bottomLeft},n.prototype.getTopLeft=function(){return this.topLeft},n.prototype.getTopRight=function(){return this.topRight},n}(),Th=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},lz=function(){function n(e,t){this.image=e,this.resultPointCallback=t,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=t}return n.prototype.getImage=function(){return this.image},n.prototype.getPossibleCenters=function(){return this.possibleCenters},n.prototype.find=function(e){var t=e!=null&&e.get(Bn.TRY_HARDER)!==void 0,r=e!=null&&e.get(Bn.PURE_BARCODE)!==void 0,i=this.image,a=i.getHeight(),s=i.getWidth(),o=Math.floor(3*a/(4*n.MAX_MODULES));(o<n.MIN_SKIP||t)&&(o=n.MIN_SKIP);for(var c=!1,d=new Int32Array(5),f=o-1;f<a&&!c;f+=o){d[0]=0,d[1]=0,d[2]=0,d[3]=0,d[4]=0;for(var p=0,g=0;g<s;g++)if(i.get(g,f))(p&1)===1&&p++,d[p]++;else if((p&1)===0)if(p===4)if(n.foundPatternCross(d)){var m=this.handlePossibleCenter(d,f,g,r);if(m===!0)if(o=2,this.hasSkipped===!0)c=this.haveMultiplyConfirmedCenters();else{var x=this.findRowSkip();x>d[2]&&(f+=x-d[2]-o,g=s-1)}else{d[0]=d[2],d[1]=d[3],d[2]=d[4],d[3]=1,d[4]=0,p=3;continue}p=0,d[0]=0,d[1]=0,d[2]=0,d[3]=0,d[4]=0}else d[0]=d[2],d[1]=d[3],d[2]=d[4],d[3]=1,d[4]=0,p=3;else d[++p]++;else d[p]++;if(n.foundPatternCross(d)){var m=this.handlePossibleCenter(d,f,s,r);m===!0&&(o=d[0],this.hasSkipped&&(c=this.haveMultiplyConfirmedCenters()))}}var b=this.selectBestPatterns();return Ke.orderBestPatterns(b),new oz(b)},n.centerFromEnd=function(e,t){return t-e[4]-e[3]-e[2]/2},n.foundPatternCross=function(e){for(var t=0,r=0;r<5;r++){var i=e[r];if(i===0)return!1;t+=i}if(t<7)return!1;var a=t/7,s=a/2;return Math.abs(a-e[0])<s&&Math.abs(a-e[1])<s&&Math.abs(3*a-e[2])<3*s&&Math.abs(a-e[3])<s&&Math.abs(a-e[4])<s},n.prototype.getCrossCheckStateCount=function(){var e=this.crossCheckStateCount;return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e},n.prototype.crossCheckDiagonal=function(e,t,r,i){for(var a=this.getCrossCheckStateCount(),s=0,o=this.image;e>=s&&t>=s&&o.get(t-s,e-s);)a[2]++,s++;if(e<s||t<s)return!1;for(;e>=s&&t>=s&&!o.get(t-s,e-s)&&a[1]<=r;)a[1]++,s++;if(e<s||t<s||a[1]>r)return!1;for(;e>=s&&t>=s&&o.get(t-s,e-s)&&a[0]<=r;)a[0]++,s++;if(a[0]>r)return!1;var c=o.getHeight(),d=o.getWidth();for(s=1;e+s<c&&t+s<d&&o.get(t+s,e+s);)a[2]++,s++;if(e+s>=c||t+s>=d)return!1;for(;e+s<c&&t+s<d&&!o.get(t+s,e+s)&&a[3]<r;)a[3]++,s++;if(e+s>=c||t+s>=d||a[3]>=r)return!1;for(;e+s<c&&t+s<d&&o.get(t+s,e+s)&&a[4]<r;)a[4]++,s++;if(a[4]>=r)return!1;var f=a[0]+a[1]+a[2]+a[3]+a[4];return Math.abs(f-i)<2*i&&n.foundPatternCross(a)},n.prototype.crossCheckVertical=function(e,t,r,i){for(var a=this.image,s=a.getHeight(),o=this.getCrossCheckStateCount(),c=e;c>=0&&a.get(t,c);)o[2]++,c--;if(c<0)return NaN;for(;c>=0&&!a.get(t,c)&&o[1]<=r;)o[1]++,c--;if(c<0||o[1]>r)return NaN;for(;c>=0&&a.get(t,c)&&o[0]<=r;)o[0]++,c--;if(o[0]>r)return NaN;for(c=e+1;c<s&&a.get(t,c);)o[2]++,c++;if(c===s)return NaN;for(;c<s&&!a.get(t,c)&&o[3]<r;)o[3]++,c++;if(c===s||o[3]>=r)return NaN;for(;c<s&&a.get(t,c)&&o[4]<r;)o[4]++,c++;if(o[4]>=r)return NaN;var d=o[0]+o[1]+o[2]+o[3]+o[4];return 5*Math.abs(d-i)>=2*i?NaN:n.foundPatternCross(o)?n.centerFromEnd(o,c):NaN},n.prototype.crossCheckHorizontal=function(e,t,r,i){for(var a=this.image,s=a.getWidth(),o=this.getCrossCheckStateCount(),c=e;c>=0&&a.get(c,t);)o[2]++,c--;if(c<0)return NaN;for(;c>=0&&!a.get(c,t)&&o[1]<=r;)o[1]++,c--;if(c<0||o[1]>r)return NaN;for(;c>=0&&a.get(c,t)&&o[0]<=r;)o[0]++,c--;if(o[0]>r)return NaN;for(c=e+1;c<s&&a.get(c,t);)o[2]++,c++;if(c===s)return NaN;for(;c<s&&!a.get(c,t)&&o[3]<r;)o[3]++,c++;if(c===s||o[3]>=r)return NaN;for(;c<s&&a.get(c,t)&&o[4]<r;)o[4]++,c++;if(o[4]>=r)return NaN;var d=o[0]+o[1]+o[2]+o[3]+o[4];return 5*Math.abs(d-i)>=i?NaN:n.foundPatternCross(o)?n.centerFromEnd(o,c):NaN},n.prototype.handlePossibleCenter=function(e,t,r,i){var a=e[0]+e[1]+e[2]+e[3]+e[4],s=n.centerFromEnd(e,r),o=this.crossCheckVertical(t,Math.floor(s),e[2],a);if(!isNaN(o)&&(s=this.crossCheckHorizontal(Math.floor(s),Math.floor(o),e[2],a),!isNaN(s)&&(!i||this.crossCheckDiagonal(Math.floor(o),Math.floor(s),e[2],a)))){for(var c=a/7,d=!1,f=this.possibleCenters,p=0,g=f.length;p<g;p++){var m=f[p];if(m.aboutEquals(c,o,s)){f[p]=m.combineEstimate(o,s,c),d=!0;break}}if(!d){var x=new sz(s,o,c);f.push(x),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(x)}return!0}return!1},n.prototype.findRowSkip=function(){var e,t,r=this.possibleCenters.length;if(r<=1)return 0;var i=null;try{for(var a=Th(this.possibleCenters),s=a.next();!s.done;s=a.next()){var o=s.value;if(o.getCount()>=n.CENTER_QUORUM)if(i==null)i=o;else return this.hasSkipped=!0,Math.floor((Math.abs(i.getX()-o.getX())-Math.abs(i.getY()-o.getY()))/2)}}catch(c){e={error:c}}finally{try{s&&!s.done&&(t=a.return)&&t.call(a)}finally{if(e)throw e.error}}return 0},n.prototype.haveMultiplyConfirmedCenters=function(){var e,t,r,i,a=0,s=0,o=this.possibleCenters.length;try{for(var c=Th(this.possibleCenters),d=c.next();!d.done;d=c.next()){var f=d.value;f.getCount()>=n.CENTER_QUORUM&&(a++,s+=f.getEstimatedModuleSize())}}catch(b){e={error:b}}finally{try{d&&!d.done&&(t=c.return)&&t.call(c)}finally{if(e)throw e.error}}if(a<3)return!1;var p=s/o,g=0;try{for(var m=Th(this.possibleCenters),x=m.next();!x.done;x=m.next()){var f=x.value;g+=Math.abs(f.getEstimatedModuleSize()-p)}}catch(b){r={error:b}}finally{try{x&&!x.done&&(i=m.return)&&i.call(m)}finally{if(r)throw r.error}}return g<=.05*s},n.prototype.selectBestPatterns=function(){var e,t,r,i,a=this.possibleCenters.length;if(a<3)throw new _e;var s=this.possibleCenters,o;if(a>3){var c=0,d=0;try{for(var f=Th(this.possibleCenters),p=f.next();!p.done;p=f.next()){var g=p.value,m=g.getEstimatedModuleSize();c+=m,d+=m*m}}catch(k){e={error:k}}finally{try{p&&!p.done&&(t=f.return)&&t.call(f)}finally{if(e)throw e.error}}o=c/a;var x=Math.sqrt(d/a-o*o);s.sort(function(k,B){var O=Math.abs(B.getEstimatedModuleSize()-o),I=Math.abs(k.getEstimatedModuleSize()-o);return O<I?-1:O>I?1:0});for(var b=Math.max(.2*o,x),A=0;A<s.length&&s.length>3;A++){var E=s[A];Math.abs(E.getEstimatedModuleSize()-o)>b&&(s.splice(A,1),A--)}}if(s.length>3){var c=0;try{for(var C=Th(s),T=C.next();!T.done;T=C.next()){var D=T.value;c+=D.getEstimatedModuleSize()}}catch(B){r={error:B}}finally{try{T&&!T.done&&(i=C.return)&&i.call(C)}finally{if(r)throw r.error}}o=c/s.length,s.sort(function(B,O){if(O.getCount()===B.getCount()){var I=Math.abs(O.getEstimatedModuleSize()-o),R=Math.abs(B.getEstimatedModuleSize()-o);return I<R?1:I>R?-1:0}else return O.getCount()-B.getCount()}),s.splice(3)}return[s[0],s[1],s[2]]},n.CENTER_QUORUM=2,n.MIN_SKIP=3,n.MAX_MODULES=57,n}(),cz=function(){function n(e){this.image=e}return n.prototype.getImage=function(){return this.image},n.prototype.getResultPointCallback=function(){return this.resultPointCallback},n.prototype.detect=function(e){this.resultPointCallback=e==null?null:e.get(Bn.NEED_RESULT_POINT_CALLBACK);var t=new lz(this.image,this.resultPointCallback),r=t.find(e);return this.processFinderPatternInfo(r)},n.prototype.processFinderPatternInfo=function(e){var t=e.getTopLeft(),r=e.getTopRight(),i=e.getBottomLeft(),a=this.calculateModuleSize(t,r,i);if(a<1)throw new _e("No pattern found in proccess finder.");var s=n.computeDimension(t,r,i,a),o=Wc.getProvisionalVersionForDimension(s),c=o.getDimensionForVersion()-7,d=null;if(o.getAlignmentPatternCenters().length>0)for(var f=r.getX()-t.getX()+i.getX(),p=r.getY()-t.getY()+i.getY(),g=1-3/c,m=Math.floor(t.getX()+g*(f-t.getX())),x=Math.floor(t.getY()+g*(p-t.getY())),b=4;b<=16;b<<=1)try{d=this.findAlignmentInRegion(a,m,x,b);break}catch(T){if(!(T instanceof _e))throw T}var A=n.createTransform(t,r,i,d,s),E=n.sampleGrid(this.image,A,s),C;return d===null?C=[i,t,r]:C=[i,t,r,d],new i_(E,C)},n.createTransform=function(e,t,r,i,a){var s=a-3.5,o,c,d,f;return i!==null?(o=i.getX(),c=i.getY(),d=s-3,f=d):(o=t.getX()-e.getX()+r.getX(),c=t.getY()-e.getY()+r.getY(),d=s,f=s),qM.quadrilateralToQuadrilateral(3.5,3.5,s,3.5,d,f,3.5,s,e.getX(),e.getY(),t.getX(),t.getY(),o,c,r.getX(),r.getY())},n.sampleGrid=function(e,t,r){var i=a_.getInstance();return i.sampleGridWithTransform(e,r,r,t)},n.computeDimension=function(e,t,r,i){var a=Gt.round(Ke.distance(e,t)/i),s=Gt.round(Ke.distance(e,r)/i),o=Math.floor((a+s)/2)+7;switch(o&3){case 0:o++;break;case 2:o--;break;case 3:throw new _e("Dimensions could be not found.")}return o},n.prototype.calculateModuleSize=function(e,t,r){return(this.calculateModuleSizeOneWay(e,t)+this.calculateModuleSizeOneWay(e,r))/2},n.prototype.calculateModuleSizeOneWay=function(e,t){var r=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(e.getX()),Math.floor(e.getY()),Math.floor(t.getX()),Math.floor(t.getY())),i=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(t.getX()),Math.floor(t.getY()),Math.floor(e.getX()),Math.floor(e.getY()));return isNaN(r)?i/7:isNaN(i)?r/7:(r+i)/14},n.prototype.sizeOfBlackWhiteBlackRunBothWays=function(e,t,r,i){var a=this.sizeOfBlackWhiteBlackRun(e,t,r,i),s=1,o=e-(r-e);o<0?(s=e/(e-o),o=0):o>=this.image.getWidth()&&(s=(this.image.getWidth()-1-e)/(o-e),o=this.image.getWidth()-1);var c=Math.floor(t-(i-t)*s);return s=1,c<0?(s=t/(t-c),c=0):c>=this.image.getHeight()&&(s=(this.image.getHeight()-1-t)/(c-t),c=this.image.getHeight()-1),o=Math.floor(e+(o-e)*s),a+=this.sizeOfBlackWhiteBlackRun(e,t,o,c),a-1},n.prototype.sizeOfBlackWhiteBlackRun=function(e,t,r,i){var a=Math.abs(i-t)>Math.abs(r-e);if(a){var s=e;e=t,t=s,s=r,r=i,i=s}for(var o=Math.abs(r-e),c=Math.abs(i-t),d=-o/2,f=e<r?1:-1,p=t<i?1:-1,g=0,m=r+f,x=e,b=t;x!==m;x+=f){var A=a?b:x,E=a?x:b;if(g===1===this.image.get(A,E)){if(g===2)return Gt.distance(x,b,e,t);g++}if(d+=c,d>0){if(b===i)break;b+=p,d-=o}}return g===2?Gt.distance(r+f,i,e,t):NaN},n.prototype.findAlignmentInRegion=function(e,t,r,i){var a=Math.floor(i*e),s=Math.max(0,t-a),o=Math.min(this.image.getWidth()-1,t+a);if(o-s<e*3)throw new _e("Alignment top exceeds estimated module size.");var c=Math.max(0,r-a),d=Math.min(this.image.getHeight()-1,r+a);if(d-c<e*3)throw new _e("Alignment bottom exceeds estimated module size.");var f=new iz(this.image,s,c,o-s,d-c,e,this.resultPointCallback);return f.find()},n}(),vw=function(){function n(){this.decoder=new ez}return n.prototype.getDecoder=function(){return this.decoder},n.prototype.decode=function(e,t){var r,i;if(t!=null&&t.get(Bn.PURE_BARCODE)!==void 0){var a=n.extractPureBits(e.getBlackMatrix());r=this.decoder.decodeBitMatrix(a,t),i=n.NO_POINTS}else{var s=new cz(e.getBlackMatrix()).detect(t);r=this.decoder.decodeBitMatrix(s.getBits(),t),i=s.getPoints()}r.getOther()instanceof eO&&r.getOther().applyMirroredCorrection(i);var o=new wi(r.getText(),r.getRawBytes(),void 0,i,et.QR_CODE,void 0),c=r.getByteSegments();c!==null&&o.putMetadata(ai.BYTE_SEGMENTS,c);var d=r.getECLevel();return d!==null&&o.putMetadata(ai.ERROR_CORRECTION_LEVEL,d),r.hasStructuredAppend()&&(o.putMetadata(ai.STRUCTURED_APPEND_SEQUENCE,r.getStructuredAppendSequenceNumber()),o.putMetadata(ai.STRUCTURED_APPEND_PARITY,r.getStructuredAppendParity())),o},n.prototype.reset=function(){},n.extractPureBits=function(e){var t=e.getTopLeftOnBit(),r=e.getBottomRightOnBit();if(t===null||r===null)throw new _e;var i=this.moduleSize(t,e),a=t[1],s=r[1],o=t[0],c=r[0];if(o>=c||a>=s)throw new _e;if(s-a!==c-o&&(c=o+(s-a),c>=e.getWidth()))throw new _e;var d=Math.round((c-o+1)/i),f=Math.round((s-a+1)/i);if(d<=0||f<=0)throw new _e;if(f!==d)throw new _e;var p=Math.floor(i/2);a+=p,o+=p;var g=o+Math.floor((d-1)*i)-c;if(g>0){if(g>p)throw new _e;o-=g}var m=a+Math.floor((f-1)*i)-s;if(m>0){if(m>p)throw new _e;a-=m}for(var x=new Us(d,f),b=0;b<f;b++)for(var A=a+Math.floor(b*i),E=0;E<d;E++)e.get(o+Math.floor(E*i),A)&&x.set(E,b);return x},n.moduleSize=function(e,t){for(var r=t.getHeight(),i=t.getWidth(),a=e[0],s=e[1],o=!0,c=0;a<i&&s<r;){if(o!==t.get(a,s)){if(++c===5)break;o=!o}a++,s++}if(a===i||s===r)throw new _e;return(a-e[0])/7},n.NO_POINTS=new Array,n}(),uz=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},zt=function(){function n(){}return n.prototype.PDF417Common=function(){},n.getBitCountSum=function(e){return Gt.sum(e)},n.toIntArray=function(e){var t,r;if(e==null||!e.length)return n.EMPTY_INT_ARRAY;var i=new Int32Array(e.length),a=0;try{for(var s=uz(e),o=s.next();!o.done;o=s.next()){var c=o.value;i[a++]=c}}catch(d){t={error:d}}finally{try{o&&!o.done&&(r=s.return)&&r.call(s)}finally{if(t)throw t.error}}return i},n.getCodeword=function(e){var t=Rr.binarySearch(n.SYMBOL_TABLE,e&262143);return t<0?-1:(n.CODEWORD_TABLE[t]-1)%n.NUMBER_OF_CODEWORDS},n.NUMBER_OF_CODEWORDS=929,n.MAX_CODEWORDS_IN_BARCODE=n.NUMBER_OF_CODEWORDS-1,n.MIN_ROWS_IN_BARCODE=3,n.MAX_ROWS_IN_BARCODE=90,n.MODULES_IN_CODEWORD=17,n.MODULES_IN_STOP_PATTERN=18,n.BARS_IN_MODULE=8,n.EMPTY_INT_ARRAY=new Int32Array([]),n.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),n.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]),n}(),dz=function(){function n(e,t){this.bits=e,this.points=t}return n.prototype.getBits=function(){return this.bits},n.prototype.getPoints=function(){return this.points},n}(),fz=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},hz=function(){function n(){}return n.detectMultiple=function(e,t,r){var i=e.getBlackMatrix(),a=n.detect(r,i);return a.length||(i=i.clone(),i.rotate180(),a=n.detect(r,i)),new dz(i,a)},n.detect=function(e,t){for(var r,i,a=new Array,s=0,o=0,c=!1;s<t.getHeight();){var d=n.findVertices(t,s,o);if(d[0]==null&&d[3]==null){if(!c)break;c=!1,o=0;try{for(var f=(r=void 0,fz(a)),p=f.next();!p.done;p=f.next()){var g=p.value;g[1]!=null&&(s=Math.trunc(Math.max(s,g[1].getY()))),g[3]!=null&&(s=Math.max(s,Math.trunc(g[3].getY())))}}catch(m){r={error:m}}finally{try{p&&!p.done&&(i=f.return)&&i.call(f)}finally{if(r)throw r.error}}s+=n.ROW_STEP;continue}if(c=!0,a.push(d),!e)break;d[2]!=null?(o=Math.trunc(d[2].getX()),s=Math.trunc(d[2].getY())):(o=Math.trunc(d[4].getX()),s=Math.trunc(d[4].getY()))}return a},n.findVertices=function(e,t,r){var i=e.getHeight(),a=e.getWidth(),s=new Array(8);return n.copyToResult(s,n.findRowsWithPattern(e,i,a,t,r,n.START_PATTERN),n.INDEXES_START_PATTERN),s[4]!=null&&(r=Math.trunc(s[4].getX()),t=Math.trunc(s[4].getY())),n.copyToResult(s,n.findRowsWithPattern(e,i,a,t,r,n.STOP_PATTERN),n.INDEXES_STOP_PATTERN),s},n.copyToResult=function(e,t,r){for(var i=0;i<r.length;i++)e[r[i]]=t[i]},n.findRowsWithPattern=function(e,t,r,i,a,s){for(var o=new Array(4),c=!1,d=new Int32Array(s.length);i<t;i+=n.ROW_STEP){var f=n.findGuardPattern(e,a,i,r,!1,s,d);if(f!=null){for(;i>0;){var p=n.findGuardPattern(e,a,--i,r,!1,s,d);if(p!=null)f=p;else{i++;break}}o[0]=new Ke(f[0],i),o[1]=new Ke(f[1],i),c=!0;break}}var g=i+1;if(c){for(var m=0,p=Int32Array.from([Math.trunc(o[0].getX()),Math.trunc(o[1].getX())]);g<t;g++){var f=n.findGuardPattern(e,p[0],g,r,!1,s,d);if(f!=null&&Math.abs(p[0]-f[0])<n.MAX_PATTERN_DRIFT&&Math.abs(p[1]-f[1])<n.MAX_PATTERN_DRIFT)p=f,m=0;else{if(m>n.SKIPPED_ROW_COUNT_MAX)break;m++}}g-=m+1,o[2]=new Ke(p[0],g),o[3]=new Ke(p[1],g)}return g-i<n.BARCODE_MIN_HEIGHT&&Rr.fill(o,null),o},n.findGuardPattern=function(e,t,r,i,a,s,o){Rr.fillWithin(o,0,o.length,0);for(var c=t,d=0;e.get(c,r)&&c>0&&d++<n.MAX_PIXEL_DRIFT;)c--;for(var f=c,p=0,g=s.length,m=a;f<i;f++){var x=e.get(f,r);if(x!==m)o[p]++;else{if(p===g-1){if(n.patternMatchVariance(o,s,n.MAX_INDIVIDUAL_VARIANCE)<n.MAX_AVG_VARIANCE)return new Int32Array([c,f]);c+=o[0]+o[1],Sn.arraycopy(o,2,o,0,p-1),o[p-1]=0,o[p]=0,p--}else p++;o[p]=1,m=!m}}return p===g-1&&n.patternMatchVariance(o,s,n.MAX_INDIVIDUAL_VARIANCE)<n.MAX_AVG_VARIANCE?new Int32Array([c,f-1]):null},n.patternMatchVariance=function(e,t,r){for(var i=e.length,a=0,s=0,o=0;o<i;o++)a+=e[o],s+=t[o];if(a<s)return 1/0;var c=a/s;r*=c;for(var d=0,f=0;f<i;f++){var p=e[f],g=t[f]*c,m=p>g?p-g:g-p;if(m>r)return 1/0;d+=m}return d/a},n.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),n.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),n.MAX_AVG_VARIANCE=.42,n.MAX_INDIVIDUAL_VARIANCE=.8,n.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),n.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),n.MAX_PIXEL_DRIFT=3,n.MAX_PATTERN_DRIFT=5,n.SKIPPED_ROW_COUNT_MAX=25,n.ROW_STEP=5,n.BARCODE_MIN_HEIGHT=10,n}(),pz=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Uc=function(){function n(e,t){if(t.length===0)throw new it;this.field=e;var r=t.length;if(r>1&&t[0]===0){for(var i=1;i<r&&t[i]===0;)i++;i===r?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(r-i),Sn.arraycopy(t,i,this.coefficients,0,this.coefficients.length))}else this.coefficients=t}return n.prototype.getCoefficients=function(){return this.coefficients},n.prototype.getDegree=function(){return this.coefficients.length-1},n.prototype.isZero=function(){return this.coefficients[0]===0},n.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},n.prototype.evaluateAt=function(e){var t,r;if(e===0)return this.getCoefficient(0);if(e===1){var i=0;try{for(var a=pz(this.coefficients),s=a.next();!s.done;s=a.next()){var o=s.value;i=this.field.add(i,o)}}catch(p){t={error:p}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}return i}for(var c=this.coefficients[0],d=this.coefficients.length,f=1;f<d;f++)c=this.field.add(this.field.multiply(e,c),this.coefficients[f]);return c},n.prototype.add=function(e){if(!this.field.equals(e.field))throw new it("ModulusPolys do not have same ModulusGF field");if(this.isZero())return e;if(e.isZero())return this;var t=this.coefficients,r=e.coefficients;if(t.length>r.length){var i=t;t=r,r=i}var a=new Int32Array(r.length),s=r.length-t.length;Sn.arraycopy(r,0,a,0,s);for(var o=s;o<r.length;o++)a[o]=this.field.add(t[o-s],r[o]);return new n(this.field,a)},n.prototype.subtract=function(e){if(!this.field.equals(e.field))throw new it("ModulusPolys do not have same ModulusGF field");return e.isZero()?this:this.add(e.negative())},n.prototype.multiply=function(e){return e instanceof n?this.multiplyOther(e):this.multiplyScalar(e)},n.prototype.multiplyOther=function(e){if(!this.field.equals(e.field))throw new it("ModulusPolys do not have same ModulusGF field");if(this.isZero()||e.isZero())return new n(this.field,new Int32Array([0]));for(var t=this.coefficients,r=t.length,i=e.coefficients,a=i.length,s=new Int32Array(r+a-1),o=0;o<r;o++)for(var c=t[o],d=0;d<a;d++)s[o+d]=this.field.add(s[o+d],this.field.multiply(c,i[d]));return new n(this.field,s)},n.prototype.negative=function(){for(var e=this.coefficients.length,t=new Int32Array(e),r=0;r<e;r++)t[r]=this.field.subtract(0,this.coefficients[r]);return new n(this.field,t)},n.prototype.multiplyScalar=function(e){if(e===0)return new n(this.field,new Int32Array([0]));if(e===1)return this;for(var t=this.coefficients.length,r=new Int32Array(t),i=0;i<t;i++)r[i]=this.field.multiply(this.coefficients[i],e);return new n(this.field,r)},n.prototype.multiplyByMonomial=function(e,t){if(e<0)throw new it;if(t===0)return new n(this.field,new Int32Array([0]));for(var r=this.coefficients.length,i=new Int32Array(r+e),a=0;a<r;a++)i[a]=this.field.multiply(this.coefficients[a],t);return new n(this.field,i)},n.prototype.toString=function(){for(var e=new Et,t=this.getDegree();t>=0;t--){var r=this.getCoefficient(t);r!==0&&(r<0?(e.append(" - "),r=-r):e.length()>0&&e.append(" + "),(t===0||r!==1)&&e.append(r),t!==0&&(t===1?e.append("x"):(e.append("x^"),e.append(t))))}return e.toString()},n}(),gz=function(){function n(){}return n.prototype.add=function(e,t){return(e+t)%this.modulus},n.prototype.subtract=function(e,t){return(this.modulus+e-t)%this.modulus},n.prototype.exp=function(e){return this.expTable[e]},n.prototype.log=function(e){if(e===0)throw new it;return this.logTable[e]},n.prototype.inverse=function(e){if(e===0)throw new YM;return this.expTable[this.modulus-this.logTable[e]-1]},n.prototype.multiply=function(e,t){return e===0||t===0?0:this.expTable[(this.logTable[e]+this.logTable[t])%(this.modulus-1)]},n.prototype.getSize=function(){return this.modulus},n.prototype.equals=function(e){return e===this},n}(),mz=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),yz=function(n){mz(e,n);function e(t,r){var i=n.call(this)||this;i.modulus=t,i.expTable=new Int32Array(t),i.logTable=new Int32Array(t);for(var a=1,s=0;s<t;s++)i.expTable[s]=a,a=a*r%t;for(var s=0;s<t-1;s++)i.logTable[i.expTable[s]]=s;return i.zero=new Uc(i,new Int32Array([0])),i.one=new Uc(i,new Int32Array([1])),i}return e.prototype.getZero=function(){return this.zero},e.prototype.getOne=function(){return this.one},e.prototype.buildMonomial=function(t,r){if(t<0)throw new it;if(r===0)return this.zero;var i=new Int32Array(t+1);return i[0]=r,new Uc(this,i)},e.PDF417_GF=new e(zt.NUMBER_OF_CODEWORDS,3),e}(gz),vz=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},xz=function(){function n(){this.field=yz.PDF417_GF}return n.prototype.decode=function(e,t,r){for(var i,a,s=new Uc(this.field,e),o=new Int32Array(t),c=!1,d=t;d>0;d--){var f=s.evaluateAt(this.field.exp(d));o[t-d]=f,f!==0&&(c=!0)}if(!c)return 0;var p=this.field.getOne();if(r!=null)try{for(var g=vz(r),m=g.next();!m.done;m=g.next()){var x=m.value,b=this.field.exp(e.length-1-x),A=new Uc(this.field,new Int32Array([this.field.subtract(0,b),1]));p=p.multiply(A)}}catch(I){i={error:I}}finally{try{m&&!m.done&&(a=g.return)&&a.call(g)}finally{if(i)throw i.error}}for(var E=new Uc(this.field,o),C=this.runEuclideanAlgorithm(this.field.buildMonomial(t,1),E,t),T=C[0],D=C[1],k=this.findErrorLocations(T),B=this.findErrorMagnitudes(D,T,k),d=0;d<k.length;d++){var O=e.length-1-this.field.log(k[d]);if(O<0)throw zr.getChecksumInstance();e[O]=this.field.subtract(e[O],B[d])}return k.length},n.prototype.runEuclideanAlgorithm=function(e,t,r){if(e.getDegree()<t.getDegree()){var i=e;e=t,t=i}for(var a=e,s=t,o=this.field.getZero(),c=this.field.getOne();s.getDegree()>=Math.round(r/2);){var d=a,f=o;if(a=s,o=c,a.isZero())throw zr.getChecksumInstance();s=d;for(var p=this.field.getZero(),g=a.getCoefficient(a.getDegree()),m=this.field.inverse(g);s.getDegree()>=a.getDegree()&&!s.isZero();){var x=s.getDegree()-a.getDegree(),b=this.field.multiply(s.getCoefficient(s.getDegree()),m);p=p.add(this.field.buildMonomial(x,b)),s=s.subtract(a.multiplyByMonomial(x,b))}c=p.multiply(o).subtract(f).negative()}var A=c.getCoefficient(0);if(A===0)throw zr.getChecksumInstance();var E=this.field.inverse(A),C=c.multiply(E),T=s.multiply(E);return[C,T]},n.prototype.findErrorLocations=function(e){for(var t=e.getDegree(),r=new Int32Array(t),i=0,a=1;a<this.field.getSize()&&i<t;a++)e.evaluateAt(a)===0&&(r[i]=this.field.inverse(a),i++);if(i!==t)throw zr.getChecksumInstance();return r},n.prototype.findErrorMagnitudes=function(e,t,r){for(var i=t.getDegree(),a=new Int32Array(i),s=1;s<=i;s++)a[i-s]=this.field.multiply(s,t.getCoefficient(s));for(var o=new Uc(this.field,a),c=r.length,d=new Int32Array(c),s=0;s<c;s++){var f=this.field.inverse(r[s]),p=this.field.subtract(0,e.evaluateAt(f)),g=this.field.inverse(o.evaluateAt(f));d[s]=this.field.multiply(p,g)}return d},n}(),xw=function(){function n(e,t,r,i,a){e instanceof n?this.constructor_2(e):this.constructor_1(e,t,r,i,a)}return n.prototype.constructor_1=function(e,t,r,i,a){var s=t==null||r==null,o=i==null||a==null;if(s&&o)throw new _e;s?(t=new Ke(0,i.getY()),r=new Ke(0,a.getY())):o&&(i=new Ke(e.getWidth()-1,t.getY()),a=new Ke(e.getWidth()-1,r.getY())),this.image=e,this.topLeft=t,this.bottomLeft=r,this.topRight=i,this.bottomRight=a,this.minX=Math.trunc(Math.min(t.getX(),r.getX())),this.maxX=Math.trunc(Math.max(i.getX(),a.getX())),this.minY=Math.trunc(Math.min(t.getY(),i.getY())),this.maxY=Math.trunc(Math.max(r.getY(),a.getY()))},n.prototype.constructor_2=function(e){this.image=e.image,this.topLeft=e.getTopLeft(),this.bottomLeft=e.getBottomLeft(),this.topRight=e.getTopRight(),this.bottomRight=e.getBottomRight(),this.minX=e.getMinX(),this.maxX=e.getMaxX(),this.minY=e.getMinY(),this.maxY=e.getMaxY()},n.merge=function(e,t){return e==null?t:t==null?e:new n(e.image,e.topLeft,e.bottomLeft,t.topRight,t.bottomRight)},n.prototype.addMissingRows=function(e,t,r){var i=this.topLeft,a=this.bottomLeft,s=this.topRight,o=this.bottomRight;if(e>0){var c=r?this.topLeft:this.topRight,d=Math.trunc(c.getY()-e);d<0&&(d=0);var f=new Ke(c.getX(),d);r?i=f:s=f}if(t>0){var p=r?this.bottomLeft:this.bottomRight,g=Math.trunc(p.getY()+t);g>=this.image.getHeight()&&(g=this.image.getHeight()-1);var m=new Ke(p.getX(),g);r?a=m:o=m}return new n(this.image,i,a,s,o)},n.prototype.getMinX=function(){return this.minX},n.prototype.getMaxX=function(){return this.maxX},n.prototype.getMinY=function(){return this.minY},n.prototype.getMaxY=function(){return this.maxY},n.prototype.getTopLeft=function(){return this.topLeft},n.prototype.getTopRight=function(){return this.topRight},n.prototype.getBottomLeft=function(){return this.bottomLeft},n.prototype.getBottomRight=function(){return this.bottomRight},n}(),wz=function(){function n(e,t,r,i){this.columnCount=e,this.errorCorrectionLevel=i,this.rowCountUpperPart=t,this.rowCountLowerPart=r,this.rowCount=t+r}return n.prototype.getColumnCount=function(){return this.columnCount},n.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},n.prototype.getRowCount=function(){return this.rowCount},n.prototype.getRowCountUpperPart=function(){return this.rowCountUpperPart},n.prototype.getRowCountLowerPart=function(){return this.rowCountLowerPart},n}(),o_=function(){function n(){this.buffer=""}return n.form=function(e,t){var r=-1;function i(s,o,c,d,f,p){if(s==="%%")return"%";if(t[++r]!==void 0){s=d?parseInt(d.substr(1)):void 0;var g=f?parseInt(f.substr(1)):void 0,m;switch(p){case"s":m=t[r];break;case"c":m=t[r][0];break;case"f":m=parseFloat(t[r]).toFixed(s);break;case"p":m=parseFloat(t[r]).toPrecision(s);break;case"e":m=parseFloat(t[r]).toExponential(s);break;case"x":m=parseInt(t[r]).toString(g||16);break;case"d":m=parseFloat(parseInt(t[r],g||10).toPrecision(s)).toFixed(0);break}m=typeof m=="object"?JSON.stringify(m):(+m).toString(g);for(var x=parseInt(c),b=c&&c[0]+""=="0"?"0":" ";m.length<x;)m=o!==void 0?m+b:b+m;return m}}var a=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(a,i)},n.prototype.format=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this.buffer+=n.form(e,t)},n.prototype.toString=function(){return this.buffer},n}(),bz=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},tO=function(){function n(e){this.boundingBox=new xw(e),this.codewords=new Array(e.getMaxY()-e.getMinY()+1)}return n.prototype.getCodewordNearby=function(e){var t=this.getCodeword(e);if(t!=null)return t;for(var r=1;r<n.MAX_NEARBY_DISTANCE;r++){var i=this.imageRowToCodewordIndex(e)-r;if(i>=0&&(t=this.codewords[i],t!=null)||(i=this.imageRowToCodewordIndex(e)+r,i<this.codewords.length&&(t=this.codewords[i],t!=null)))return t}return null},n.prototype.imageRowToCodewordIndex=function(e){return e-this.boundingBox.getMinY()},n.prototype.setCodeword=function(e,t){this.codewords[this.imageRowToCodewordIndex(e)]=t},n.prototype.getCodeword=function(e){return this.codewords[this.imageRowToCodewordIndex(e)]},n.prototype.getBoundingBox=function(){return this.boundingBox},n.prototype.getCodewords=function(){return this.codewords},n.prototype.toString=function(){var e,t,r=new o_,i=0;try{for(var a=bz(this.codewords),s=a.next();!s.done;s=a.next()){var o=s.value;if(o==null){r.format("%3d:    |   %n",i++);continue}r.format("%3d: %3d|%3d%n",i++,o.getRowNumber(),o.getValue())}}catch(c){e={error:c}}finally{try{s&&!s.done&&(t=a.return)&&t.call(a)}finally{if(e)throw e.error}}return r.toString()},n.MAX_NEARBY_DISTANCE=5,n}(),_z=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Az=function(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,a=[],s;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(o){s={error:o}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(s)throw s.error}}return a},Kh=function(){function n(){this.values=new Map}return n.prototype.setValue=function(e){e=Math.trunc(e);var t=this.values.get(e);t==null&&(t=0),t++,this.values.set(e,t)},n.prototype.getValue=function(){var e,t,r=-1,i=new Array,a=function(p,g){var m={getKey:function(){return p},getValue:function(){return g}};m.getValue()>r?(r=m.getValue(),i=[],i.push(m.getKey())):m.getValue()===r&&i.push(m.getKey())};try{for(var s=_z(this.values.entries()),o=s.next();!o.done;o=s.next()){var c=Az(o.value,2),d=c[0],f=c[1];a(d,f)}}catch(p){e={error:p}}finally{try{o&&!o.done&&(t=s.return)&&t.call(s)}finally{if(e)throw e.error}}return zt.toIntArray(i)},n.prototype.getConfidence=function(e){return this.values.get(e)},n}(),Ez=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Jx=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},zI=function(n){Ez(e,n);function e(t,r){var i=n.call(this,t)||this;return i._isLeft=r,i}return e.prototype.setRowNumbers=function(){var t,r;try{for(var i=Jx(this.getCodewords()),a=i.next();!a.done;a=i.next()){var s=a.value;s!=null&&s.setRowNumberAsRowIndicatorColumn()}}catch(o){t={error:o}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}},e.prototype.adjustCompleteIndicatorColumnRowNumbers=function(t){var r=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(r,t);for(var i=this.getBoundingBox(),a=this._isLeft?i.getTopLeft():i.getTopRight(),s=this._isLeft?i.getBottomLeft():i.getBottomRight(),o=this.imageRowToCodewordIndex(Math.trunc(a.getY())),c=this.imageRowToCodewordIndex(Math.trunc(s.getY())),d=-1,f=1,p=0,g=o;g<c;g++)if(r[g]!=null){var m=r[g],x=m.getRowNumber()-d;if(x===0)p++;else if(x===1)f=Math.max(f,p),p=1,d=m.getRowNumber();else if(x<0||m.getRowNumber()>=t.getRowCount()||x>g)r[g]=null;else{var b=void 0;f>2?b=(f-2)*x:b=x;for(var A=b>=g,E=1;E<=b&&!A;E++)A=r[g-E]!=null;A?r[g]=null:(d=m.getRowNumber(),p=1)}}},e.prototype.getRowHeights=function(){var t,r,i=this.getBarcodeMetadata();if(i==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(i);var a=new Int32Array(i.getRowCount());try{for(var s=Jx(this.getCodewords()),o=s.next();!o.done;o=s.next()){var c=o.value;if(c!=null){var d=c.getRowNumber();if(d>=a.length)continue;a[d]++}}}catch(f){t={error:f}}finally{try{o&&!o.done&&(r=s.return)&&r.call(s)}finally{if(t)throw t.error}}return a},e.prototype.adjustIncompleteIndicatorColumnRowNumbers=function(t){for(var r=this.getBoundingBox(),i=this._isLeft?r.getTopLeft():r.getTopRight(),a=this._isLeft?r.getBottomLeft():r.getBottomRight(),s=this.imageRowToCodewordIndex(Math.trunc(i.getY())),o=this.imageRowToCodewordIndex(Math.trunc(a.getY())),c=this.getCodewords(),d=-1,f=s;f<o;f++)if(c[f]!=null){var p=c[f];p.setRowNumberAsRowIndicatorColumn();var g=p.getRowNumber()-d;g===0||(g===1?d=p.getRowNumber():p.getRowNumber()>=t.getRowCount()?c[f]=null:d=p.getRowNumber())}},e.prototype.getBarcodeMetadata=function(){var t,r,i=this.getCodewords(),a=new Kh,s=new Kh,o=new Kh,c=new Kh;try{for(var d=Jx(i),f=d.next();!f.done;f=d.next()){var p=f.value;if(p!=null){p.setRowNumberAsRowIndicatorColumn();var g=p.getValue()%30,m=p.getRowNumber();switch(this._isLeft||(m+=2),m%3){case 0:s.setValue(g*3+1);break;case 1:c.setValue(g/3),o.setValue(g%3);break;case 2:a.setValue(g+1);break}}}}catch(b){t={error:b}}finally{try{f&&!f.done&&(r=d.return)&&r.call(d)}finally{if(t)throw t.error}}if(a.getValue().length===0||s.getValue().length===0||o.getValue().length===0||c.getValue().length===0||a.getValue()[0]<1||s.getValue()[0]+o.getValue()[0]<zt.MIN_ROWS_IN_BARCODE||s.getValue()[0]+o.getValue()[0]>zt.MAX_ROWS_IN_BARCODE)return null;var x=new wz(a.getValue()[0],s.getValue()[0],o.getValue()[0],c.getValue()[0]);return this.removeIncorrectCodewords(i,x),x},e.prototype.removeIncorrectCodewords=function(t,r){for(var i=0;i<t.length;i++){var a=t[i];if(t[i]!=null){var s=a.getValue()%30,o=a.getRowNumber();if(o>r.getRowCount()){t[i]=null;continue}switch(this._isLeft||(o+=2),o%3){case 0:s*3+1!==r.getRowCountUpperPart()&&(t[i]=null);break;case 1:(Math.trunc(s/3)!==r.getErrorCorrectionLevel()||s%3!==r.getRowCountLowerPart())&&(t[i]=null);break;case 2:s+1!==r.getColumnCount()&&(t[i]=null);break}}}},e.prototype.isLeft=function(){return this._isLeft},e.prototype.toString=function(){return"IsLeft: "+this._isLeft+`
`+n.prototype.toString.call(this)},e}(tO),Sz=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Cz=function(){function n(e,t){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=e,this.barcodeColumnCount=e.getColumnCount(),this.boundingBox=t,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}return n.prototype.getDetectionResultColumns=function(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);var e=zt.MAX_CODEWORDS_IN_BARCODE,t;do t=e,e=this.adjustRowNumbersAndGetCount();while(e>0&&e<t);return this.detectionResultColumns},n.prototype.adjustIndicatorColumnRowNumbers=function(e){e!=null&&e.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)},n.prototype.adjustRowNumbersAndGetCount=function(){var e=this.adjustRowNumbersByRow();if(e===0)return 0;for(var t=1;t<this.barcodeColumnCount+1;t++)for(var r=this.detectionResultColumns[t].getCodewords(),i=0;i<r.length;i++)r[i]!=null&&(r[i].hasValidRowNumber()||this.adjustRowNumbers(t,i,r));return e},n.prototype.adjustRowNumbersByRow=function(){this.adjustRowNumbersFromBothRI();var e=this.adjustRowNumbersFromLRI();return e+this.adjustRowNumbersFromRRI()},n.prototype.adjustRowNumbersFromBothRI=function(){if(!(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)){for(var e=this.detectionResultColumns[0].getCodewords(),t=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),r=0;r<e.length;r++)if(e[r]!=null&&t[r]!=null&&e[r].getRowNumber()===t[r].getRowNumber())for(var i=1;i<=this.barcodeColumnCount;i++){var a=this.detectionResultColumns[i].getCodewords()[r];a!=null&&(a.setRowNumber(e[r].getRowNumber()),a.hasValidRowNumber()||(this.detectionResultColumns[i].getCodewords()[r]=null))}}},n.prototype.adjustRowNumbersFromRRI=function(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;for(var e=0,t=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),r=0;r<t.length;r++)if(t[r]!=null)for(var i=t[r].getRowNumber(),a=0,s=this.barcodeColumnCount+1;s>0&&a<this.ADJUST_ROW_NUMBER_SKIP;s--){var o=this.detectionResultColumns[s].getCodewords()[r];o!=null&&(a=n.adjustRowNumberIfValid(i,a,o),o.hasValidRowNumber()||e++)}return e},n.prototype.adjustRowNumbersFromLRI=function(){if(this.detectionResultColumns[0]==null)return 0;for(var e=0,t=this.detectionResultColumns[0].getCodewords(),r=0;r<t.length;r++)if(t[r]!=null)for(var i=t[r].getRowNumber(),a=0,s=1;s<this.barcodeColumnCount+1&&a<this.ADJUST_ROW_NUMBER_SKIP;s++){var o=this.detectionResultColumns[s].getCodewords()[r];o!=null&&(a=n.adjustRowNumberIfValid(i,a,o),o.hasValidRowNumber()||e++)}return e},n.adjustRowNumberIfValid=function(e,t,r){return r==null||r.hasValidRowNumber()||(r.isValidRowNumber(e)?(r.setRowNumber(e),t=0):++t),t},n.prototype.adjustRowNumbers=function(e,t,r){var i,a;if(this.detectionResultColumns[e-1]!=null){var s=r[t],o=this.detectionResultColumns[e-1].getCodewords(),c=o;this.detectionResultColumns[e+1]!=null&&(c=this.detectionResultColumns[e+1].getCodewords());var d=new Array(14);d[2]=o[t],d[3]=c[t],t>0&&(d[0]=r[t-1],d[4]=o[t-1],d[5]=c[t-1]),t>1&&(d[8]=r[t-2],d[10]=o[t-2],d[11]=c[t-2]),t<r.length-1&&(d[1]=r[t+1],d[6]=o[t+1],d[7]=c[t+1]),t<r.length-2&&(d[9]=r[t+2],d[12]=o[t+2],d[13]=c[t+2]);try{for(var f=Sz(d),p=f.next();!p.done;p=f.next()){var g=p.value;if(n.adjustRowNumber(s,g))return}}catch(m){i={error:m}}finally{try{p&&!p.done&&(a=f.return)&&a.call(f)}finally{if(i)throw i.error}}}},n.adjustRowNumber=function(e,t){return t==null?!1:t.hasValidRowNumber()&&t.getBucket()===e.getBucket()?(e.setRowNumber(t.getRowNumber()),!0):!1},n.prototype.getBarcodeColumnCount=function(){return this.barcodeColumnCount},n.prototype.getBarcodeRowCount=function(){return this.barcodeMetadata.getRowCount()},n.prototype.getBarcodeECLevel=function(){return this.barcodeMetadata.getErrorCorrectionLevel()},n.prototype.setBoundingBox=function(e){this.boundingBox=e},n.prototype.getBoundingBox=function(){return this.boundingBox},n.prototype.setDetectionResultColumn=function(e,t){this.detectionResultColumns[e]=t},n.prototype.getDetectionResultColumn=function(e){return this.detectionResultColumns[e]},n.prototype.toString=function(){var e=this.detectionResultColumns[0];e==null&&(e=this.detectionResultColumns[this.barcodeColumnCount+1]);for(var t=new o_,r=0;r<e.getCodewords().length;r++){t.format("CW %3d:",r);for(var i=0;i<this.barcodeColumnCount+2;i++){if(this.detectionResultColumns[i]==null){t.format("    |   ");continue}var a=this.detectionResultColumns[i].getCodewords()[r];if(a==null){t.format("    |   ");continue}t.format(" %3d|%3d",a.getRowNumber(),a.getValue())}t.format("%n")}return t.toString()},n}(),Tz=function(){function n(e,t,r,i){this.rowNumber=n.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(e),this.endX=Math.trunc(t),this.bucket=Math.trunc(r),this.value=Math.trunc(i)}return n.prototype.hasValidRowNumber=function(){return this.isValidRowNumber(this.rowNumber)},n.prototype.isValidRowNumber=function(e){return e!==n.BARCODE_ROW_UNKNOWN&&this.bucket===e%3*3},n.prototype.setRowNumberAsRowIndicatorColumn=function(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))},n.prototype.getWidth=function(){return this.endX-this.startX},n.prototype.getStartX=function(){return this.startX},n.prototype.getEndX=function(){return this.endX},n.prototype.getBucket=function(){return this.bucket},n.prototype.getValue=function(){return this.value},n.prototype.getRowNumber=function(){return this.rowNumber},n.prototype.setRowNumber=function(e){this.rowNumber=e},n.prototype.toString=function(){return this.rowNumber+"|"+this.value},n.BARCODE_ROW_UNKNOWN=-1,n}(),Iz=function(){function n(){}return n.initialize=function(){for(var e=0;e<zt.SYMBOL_TABLE.length;e++)for(var t=zt.SYMBOL_TABLE[e],r=t&1,i=0;i<zt.BARS_IN_MODULE;i++){for(var a=0;(t&1)===r;)a+=1,t>>=1;r=t&1,n.RATIOS_TABLE[e]||(n.RATIOS_TABLE[e]=new Array(zt.BARS_IN_MODULE)),n.RATIOS_TABLE[e][zt.BARS_IN_MODULE-i-1]=Math.fround(a/zt.MODULES_IN_CODEWORD)}this.bSymbolTableReady=!0},n.getDecodedValue=function(e){var t=n.getDecodedCodewordValue(n.sampleBitCounts(e));return t!==-1?t:n.getClosestDecodedValue(e)},n.sampleBitCounts=function(e){for(var t=Gt.sum(e),r=new Int32Array(zt.BARS_IN_MODULE),i=0,a=0,s=0;s<zt.MODULES_IN_CODEWORD;s++){var o=t/(2*zt.MODULES_IN_CODEWORD)+s*t/zt.MODULES_IN_CODEWORD;a+e[i]<=o&&(a+=e[i],i++),r[i]++}return r},n.getDecodedCodewordValue=function(e){var t=n.getBitValue(e);return zt.getCodeword(t)===-1?-1:t},n.getBitValue=function(e){for(var t=0,r=0;r<e.length;r++)for(var i=0;i<e[r];i++)t=t<<1|(r%2===0?1:0);return Math.trunc(t)},n.getClosestDecodedValue=function(e){var t=Gt.sum(e),r=new Array(zt.BARS_IN_MODULE);if(t>1)for(var i=0;i<r.length;i++)r[i]=Math.fround(e[i]/t);var a=hw.MAX_VALUE,s=-1;this.bSymbolTableReady||n.initialize();for(var o=0;o<n.RATIOS_TABLE.length;o++){for(var c=0,d=n.RATIOS_TABLE[o],f=0;f<zt.BARS_IN_MODULE;f++){var p=Math.fround(d[f]-r[f]);if(c+=Math.fround(p*p),c>=a)break}c<a&&(a=c,s=zt.SYMBOL_TABLE[o])}return s},n.bSymbolTableReady=!1,n.RATIOS_TABLE=new Array(zt.SYMBOL_TABLE.length).map(function(e){return new Array(zt.BARS_IN_MODULE)}),n}(),Dz=function(){function n(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}return n.prototype.getSegmentIndex=function(){return this.segmentIndex},n.prototype.setSegmentIndex=function(e){this.segmentIndex=e},n.prototype.getFileId=function(){return this.fileId},n.prototype.setFileId=function(e){this.fileId=e},n.prototype.getOptionalData=function(){return this.optionalData},n.prototype.setOptionalData=function(e){this.optionalData=e},n.prototype.isLastSegment=function(){return this.lastSegment},n.prototype.setLastSegment=function(e){this.lastSegment=e},n.prototype.getSegmentCount=function(){return this.segmentCount},n.prototype.setSegmentCount=function(e){this.segmentCount=e},n.prototype.getSender=function(){return this.sender||null},n.prototype.setSender=function(e){this.sender=e},n.prototype.getAddressee=function(){return this.addressee||null},n.prototype.setAddressee=function(e){this.addressee=e},n.prototype.getFileName=function(){return this.fileName},n.prototype.setFileName=function(e){this.fileName=e},n.prototype.getFileSize=function(){return this.fileSize},n.prototype.setFileSize=function(e){this.fileSize=e},n.prototype.getChecksum=function(){return this.checksum},n.prototype.setChecksum=function(e){this.checksum=e},n.prototype.getTimestamp=function(){return this.timestamp},n.prototype.setTimestamp=function(e){this.timestamp=e},n}(),$I=function(){function n(){}return n.parseLong=function(e,t){return t===void 0&&(t=void 0),parseInt(e,t)},n}(),Rz=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Mz=function(n){Rz(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="NullPointerException",e}(Wi),Oz=function(){function n(){}return n.prototype.writeBytes=function(e){this.writeBytesOffset(e,0,e.length)},n.prototype.writeBytesOffset=function(e,t,r){if(e==null)throw new Mz;if(t<0||t>e.length||r<0||t+r>e.length||t+r<0)throw new n_;if(r===0)return;for(var i=0;i<r;i++)this.write(e[t+i])},n.prototype.flush=function(){},n.prototype.close=function(){},n}(),Pz=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),kz=function(n){Pz(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e}(Wi),Nz=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Lz=function(n){Nz(e,n);function e(t){t===void 0&&(t=32);var r=n.call(this)||this;if(r.count=0,t<0)throw new it("Negative initial size: "+t);return r.buf=new Uint8Array(t),r}return e.prototype.ensureCapacity=function(t){t-this.buf.length>0&&this.grow(t)},e.prototype.grow=function(t){var r=this.buf.length,i=r<<1;if(i-t<0&&(i=t),i<0){if(t<0)throw new kz;i=It.MAX_VALUE}this.buf=Rr.copyOfUint8Array(this.buf,i)},e.prototype.write=function(t){this.ensureCapacity(this.count+1),this.buf[this.count]=t,this.count+=1},e.prototype.writeBytesOffset=function(t,r,i){if(r<0||r>t.length||i<0||r+i-t.length>0)throw new n_;this.ensureCapacity(this.count+i),Sn.arraycopy(t,r,this.buf,this.count,i),this.count+=i},e.prototype.writeTo=function(t){t.writeBytesOffset(this.buf,0,this.count)},e.prototype.reset=function(){this.count=0},e.prototype.toByteArray=function(){return Rr.copyOfUint8Array(this.buf,this.count)},e.prototype.size=function(){return this.count},e.prototype.toString=function(t){return t?typeof t=="string"?this.toString_string(t):this.toString_number(t):this.toString_void()},e.prototype.toString_void=function(){return new String(this.buf).toString()},e.prototype.toString_string=function(t){return new String(this.buf).toString()},e.prototype.toString_number=function(t){return new String(this.buf).toString()},e.prototype.close=function(){},e}(Oz),mn;(function(n){n[n.ALPHA=0]="ALPHA",n[n.LOWER=1]="LOWER",n[n.MIXED=2]="MIXED",n[n.PUNCT=3]="PUNCT",n[n.ALPHA_SHIFT=4]="ALPHA_SHIFT",n[n.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(mn||(mn={}));function nO(){if(typeof window<"u")return window.BigInt||null;if(typeof global<"u")return global.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}var Hg;function ml(n){if(typeof Hg>"u"&&(Hg=nO()),Hg===null)throw new Error("BigInt is not supported!");return Hg(n)}function Bz(){var n=[];n[0]=ml(1);var e=ml(900);n[1]=e;for(var t=2;t<16;t++)n[t]=n[t-1]*e;return n}var Fz=function(){function n(){}return n.decode=function(e,t){var r=new Et(""),i=Dr.ISO8859_1;r.enableDecoding(i);for(var a=1,s=e[a++],o=new Dz;a<e[0];){switch(s){case n.TEXT_COMPACTION_MODE_LATCH:a=n.textCompaction(e,a,r);break;case n.BYTE_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:a=n.byteCompaction(s,e,i,a,r);break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r.append(e[a++]);break;case n.NUMERIC_COMPACTION_MODE_LATCH:a=n.numericCompaction(e,a,r);break;case n.ECI_CHARSET:Dr.getCharacterSetECIByValue(e[a++]);break;case n.ECI_GENERAL_PURPOSE:a+=2;break;case n.ECI_USER_DEFINED:a++;break;case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:a=n.decodeMacroBlock(e,a,o);break;case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:throw new je;default:a--,a=n.textCompaction(e,a,r);break}if(a<e.length)s=e[a++];else throw je.getFormatInstance()}if(r.length()===0)throw je.getFormatInstance();var c=new sy(null,r.toString(),null,t);return c.setOther(o),c},n.decodeMacroBlock=function(e,t,r){if(t+n.NUMBER_OF_SEQUENCE_CODEWORDS>e[0])throw je.getFormatInstance();for(var i=new Int32Array(n.NUMBER_OF_SEQUENCE_CODEWORDS),a=0;a<n.NUMBER_OF_SEQUENCE_CODEWORDS;a++,t++)i[a]=e[t];r.setSegmentIndex(It.parseInt(n.decodeBase900toBase10(i,n.NUMBER_OF_SEQUENCE_CODEWORDS)));var s=new Et;t=n.textCompaction(e,t,s),r.setFileId(s.toString());var o=-1;for(e[t]===n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(o=t+1);t<e[0];)switch(e[t]){case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(t++,e[t]){case n.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:var c=new Et;t=n.textCompaction(e,t+1,c),r.setFileName(c.toString());break;case n.MACRO_PDF417_OPTIONAL_FIELD_SENDER:var d=new Et;t=n.textCompaction(e,t+1,d),r.setSender(d.toString());break;case n.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:var f=new Et;t=n.textCompaction(e,t+1,f),r.setAddressee(f.toString());break;case n.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:var p=new Et;t=n.numericCompaction(e,t+1,p),r.setSegmentCount(It.parseInt(p.toString()));break;case n.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:var g=new Et;t=n.numericCompaction(e,t+1,g),r.setTimestamp($I.parseLong(g.toString()));break;case n.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:var m=new Et;t=n.numericCompaction(e,t+1,m),r.setChecksum(It.parseInt(m.toString()));break;case n.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:var x=new Et;t=n.numericCompaction(e,t+1,x),r.setFileSize($I.parseLong(x.toString()));break;default:throw je.getFormatInstance()}break;case n.MACRO_PDF417_TERMINATOR:t++,r.setLastSegment(!0);break;default:throw je.getFormatInstance()}if(o!==-1){var b=t-o;r.isLastSegment()&&b--,r.setOptionalData(Rr.copyOfRange(e,o,o+b))}return t},n.textCompaction=function(e,t,r){for(var i=new Int32Array((e[0]-t)*2),a=new Int32Array((e[0]-t)*2),s=0,o=!1;t<e[0]&&!o;){var c=e[t++];if(c<n.TEXT_COMPACTION_MODE_LATCH)i[s]=c/30,i[s+1]=c%30,s+=2;else switch(c){case n.TEXT_COMPACTION_MODE_LATCH:i[s++]=n.TEXT_COMPACTION_MODE_LATCH;break;case n.BYTE_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:case n.NUMERIC_COMPACTION_MODE_LATCH:case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:t--,o=!0;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i[s]=n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,c=e[t++],a[s]=c,s++;break}}return n.decodeTextCompaction(i,a,s,r),t},n.decodeTextCompaction=function(e,t,r,i){for(var a=mn.ALPHA,s=mn.ALPHA,o=0;o<r;){var c=e[o],d="";switch(a){case mn.ALPHA:if(c<26)d=String.fromCharCode(65+c);else switch(c){case 26:d=" ";break;case n.LL:a=mn.LOWER;break;case n.ML:a=mn.MIXED;break;case n.PS:s=a,a=mn.PUNCT_SHIFT;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[o]);break;case n.TEXT_COMPACTION_MODE_LATCH:a=mn.ALPHA;break}break;case mn.LOWER:if(c<26)d=String.fromCharCode(97+c);else switch(c){case 26:d=" ";break;case n.AS:s=a,a=mn.ALPHA_SHIFT;break;case n.ML:a=mn.MIXED;break;case n.PS:s=a,a=mn.PUNCT_SHIFT;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[o]);break;case n.TEXT_COMPACTION_MODE_LATCH:a=mn.ALPHA;break}break;case mn.MIXED:if(c<n.PL)d=n.MIXED_CHARS[c];else switch(c){case n.PL:a=mn.PUNCT;break;case 26:d=" ";break;case n.LL:a=mn.LOWER;break;case n.AL:a=mn.ALPHA;break;case n.PS:s=a,a=mn.PUNCT_SHIFT;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[o]);break;case n.TEXT_COMPACTION_MODE_LATCH:a=mn.ALPHA;break}break;case mn.PUNCT:if(c<n.PAL)d=n.PUNCT_CHARS[c];else switch(c){case n.PAL:a=mn.ALPHA;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[o]);break;case n.TEXT_COMPACTION_MODE_LATCH:a=mn.ALPHA;break}break;case mn.ALPHA_SHIFT:if(a=s,c<26)d=String.fromCharCode(65+c);else switch(c){case 26:d=" ";break;case n.TEXT_COMPACTION_MODE_LATCH:a=mn.ALPHA;break}break;case mn.PUNCT_SHIFT:if(a=s,c<n.PAL)d=n.PUNCT_CHARS[c];else switch(c){case n.PAL:a=mn.ALPHA;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[o]);break;case n.TEXT_COMPACTION_MODE_LATCH:a=mn.ALPHA;break}break}d!==""&&i.append(d),o++}},n.byteCompaction=function(e,t,r,i,a){var s=new Lz,o=0,c=0,d=!1;switch(e){case n.BYTE_COMPACTION_MODE_LATCH:for(var f=new Int32Array(6),p=t[i++];i<t[0]&&!d;)switch(f[o++]=p,c=900*c+p,p=t[i++],p){case n.TEXT_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH:case n.NUMERIC_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:i--,d=!0;break;default:if(o%5===0&&o>0){for(var g=0;g<6;++g)s.write(Number(ml(c)>>ml(8*(5-g))));c=0,o=0}break}i===t[0]&&p<n.TEXT_COMPACTION_MODE_LATCH&&(f[o++]=p);for(var m=0;m<o;m++)s.write(f[m]);break;case n.BYTE_COMPACTION_MODE_LATCH_6:for(;i<t[0]&&!d;){var x=t[i++];if(x<n.TEXT_COMPACTION_MODE_LATCH)o++,c=900*c+x;else switch(x){case n.TEXT_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH:case n.NUMERIC_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:i--,d=!0;break}if(o%5===0&&o>0){for(var g=0;g<6;++g)s.write(Number(ml(c)>>ml(8*(5-g))));c=0,o=0}}break}return a.append(Ra.decode(s.toByteArray(),r)),i},n.numericCompaction=function(e,t,r){for(var i=0,a=!1,s=new Int32Array(n.MAX_NUMERIC_CODEWORDS);t<e[0]&&!a;){var o=e[t++];if(t===e[0]&&(a=!0),o<n.TEXT_COMPACTION_MODE_LATCH)s[i]=o,i++;else switch(o){case n.TEXT_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:t--,a=!0;break}(i%n.MAX_NUMERIC_CODEWORDS===0||o===n.NUMERIC_COMPACTION_MODE_LATCH||a)&&i>0&&(r.append(n.decodeBase900toBase10(s,i)),i=0)}return t},n.decodeBase900toBase10=function(e,t){for(var r=ml(0),i=0;i<t;i++)r+=n.EXP900[t-i-1]*ml(e[i]);var a=r.toString();if(a.charAt(0)!=="1")throw new je;return a.substring(1)},n.TEXT_COMPACTION_MODE_LATCH=900,n.BYTE_COMPACTION_MODE_LATCH=901,n.NUMERIC_COMPACTION_MODE_LATCH=902,n.BYTE_COMPACTION_MODE_LATCH_6=924,n.ECI_USER_DEFINED=925,n.ECI_GENERAL_PURPOSE=926,n.ECI_CHARSET=927,n.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,n.MACRO_PDF417_TERMINATOR=922,n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,n.MAX_NUMERIC_CODEWORDS=15,n.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,n.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,n.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,n.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,n.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,n.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,n.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,n.PL=25,n.LL=27,n.AS=27,n.ML=28,n.AL=28,n.PS=29,n.PAL=29,n.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,n.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",n.EXP900=nO()?Bz():[],n.NUMBER_OF_SEQUENCE_CODEWORDS=2,n}(),Ih=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Vz=function(){function n(){}return n.decode=function(e,t,r,i,a,s,o){for(var c=new xw(e,t,r,i,a),d=null,f=null,p,g=!0;;g=!1){if(t!=null&&(d=n.getRowIndicatorColumn(e,c,t,!0,s,o)),i!=null&&(f=n.getRowIndicatorColumn(e,c,i,!1,s,o)),p=n.merge(d,f),p==null)throw _e.getNotFoundInstance();var m=p.getBoundingBox();if(g&&m!=null&&(m.getMinY()<c.getMinY()||m.getMaxY()>c.getMaxY()))c=m;else break}p.setBoundingBox(c);var x=p.getBarcodeColumnCount()+1;p.setDetectionResultColumn(0,d),p.setDetectionResultColumn(x,f);for(var b=d!=null,A=1;A<=x;A++){var E=b?A:x-A;if(p.getDetectionResultColumn(E)===void 0){var C=void 0;E===0||E===x?C=new zI(c,E===0):C=new tO(c),p.setDetectionResultColumn(E,C);for(var T=-1,D=T,k=c.getMinY();k<=c.getMaxY();k++){if(T=n.getStartColumn(p,E,k,b),T<0||T>c.getMaxX()){if(D===-1)continue;T=D}var B=n.detectCodeword(e,c.getMinX(),c.getMaxX(),b,T,k,s,o);B!=null&&(C.setCodeword(k,B),D=T,s=Math.min(s,B.getWidth()),o=Math.max(o,B.getWidth()))}}}return n.createDecoderResult(p)},n.merge=function(e,t){if(e==null&&t==null)return null;var r=n.getBarcodeMetadata(e,t);if(r==null)return null;var i=xw.merge(n.adjustBoundingBox(e),n.adjustBoundingBox(t));return new Cz(r,i)},n.adjustBoundingBox=function(e){var t,r;if(e==null)return null;var i=e.getRowHeights();if(i==null)return null;var a=n.getMax(i),s=0;try{for(var o=Ih(i),c=o.next();!c.done;c=o.next()){var d=c.value;if(s+=a-d,d>0)break}}catch(m){t={error:m}}finally{try{c&&!c.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}for(var f=e.getCodewords(),p=0;s>0&&f[p]==null;p++)s--;for(var g=0,p=i.length-1;p>=0&&(g+=a-i[p],!(i[p]>0));p--);for(var p=f.length-1;g>0&&f[p]==null;p--)g--;return e.getBoundingBox().addMissingRows(s,g,e.isLeft())},n.getMax=function(e){var t,r,i=-1;try{for(var a=Ih(e),s=a.next();!s.done;s=a.next()){var o=s.value;i=Math.max(i,o)}}catch(c){t={error:c}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}return i},n.getBarcodeMetadata=function(e,t){var r;if(e==null||(r=e.getBarcodeMetadata())==null)return t==null?null:t.getBarcodeMetadata();var i;return t==null||(i=t.getBarcodeMetadata())==null?r:r.getColumnCount()!==i.getColumnCount()&&r.getErrorCorrectionLevel()!==i.getErrorCorrectionLevel()&&r.getRowCount()!==i.getRowCount()?null:r},n.getRowIndicatorColumn=function(e,t,r,i,a,s){for(var o=new zI(t,i),c=0;c<2;c++)for(var d=c===0?1:-1,f=Math.trunc(Math.trunc(r.getX())),p=Math.trunc(Math.trunc(r.getY()));p<=t.getMaxY()&&p>=t.getMinY();p+=d){var g=n.detectCodeword(e,0,e.getWidth(),i,f,p,a,s);g!=null&&(o.setCodeword(p,g),i?f=g.getStartX():f=g.getEndX())}return o},n.adjustCodewordCount=function(e,t){var r=t[0][1],i=r.getValue(),a=e.getBarcodeColumnCount()*e.getBarcodeRowCount()-n.getNumberOfECCodeWords(e.getBarcodeECLevel());if(i.length===0){if(a<1||a>zt.MAX_CODEWORDS_IN_BARCODE)throw _e.getNotFoundInstance();r.setValue(a)}else i[0]!==a&&r.setValue(a)},n.createDecoderResult=function(e){var t=n.createBarcodeMatrix(e);n.adjustCodewordCount(e,t);for(var r=new Array,i=new Int32Array(e.getBarcodeRowCount()*e.getBarcodeColumnCount()),a=[],s=new Array,o=0;o<e.getBarcodeRowCount();o++)for(var c=0;c<e.getBarcodeColumnCount();c++){var d=t[o][c+1].getValue(),f=o*e.getBarcodeColumnCount()+c;d.length===0?r.push(f):d.length===1?i[f]=d[0]:(s.push(f),a.push(d))}for(var p=new Array(a.length),g=0;g<p.length;g++)p[g]=a[g];return n.createDecoderResultFromAmbiguousValues(e.getBarcodeECLevel(),i,zt.toIntArray(r),zt.toIntArray(s),p)},n.createDecoderResultFromAmbiguousValues=function(e,t,r,i,a){for(var s=new Int32Array(i.length),o=100;o-- >0;){for(var c=0;c<s.length;c++)t[i[c]]=a[c][s[c]];try{return n.decodeCodewords(t,e,r)}catch(f){var d=f instanceof zr;if(!d)throw f}if(s.length===0)throw zr.getChecksumInstance();for(var c=0;c<s.length;c++)if(s[c]<a[c].length-1){s[c]++;break}else if(s[c]=0,c===s.length-1)throw zr.getChecksumInstance()}throw zr.getChecksumInstance()},n.createBarcodeMatrix=function(e){for(var t,r,i,a,s=Array.from({length:e.getBarcodeRowCount()},function(){return new Array(e.getBarcodeColumnCount()+2)}),o=0;o<s.length;o++)for(var c=0;c<s[o].length;c++)s[o][c]=new Kh;var d=0;try{for(var f=Ih(e.getDetectionResultColumns()),p=f.next();!p.done;p=f.next()){var g=p.value;if(g!=null)try{for(var m=(i=void 0,Ih(g.getCodewords())),x=m.next();!x.done;x=m.next()){var b=x.value;if(b!=null){var A=b.getRowNumber();if(A>=0){if(A>=s.length)continue;s[A][d].setValue(b.getValue())}}}}catch(E){i={error:E}}finally{try{x&&!x.done&&(a=m.return)&&a.call(m)}finally{if(i)throw i.error}}d++}}catch(E){t={error:E}}finally{try{p&&!p.done&&(r=f.return)&&r.call(f)}finally{if(t)throw t.error}}return s},n.isValidBarcodeColumn=function(e,t){return t>=0&&t<=e.getBarcodeColumnCount()+1},n.getStartColumn=function(e,t,r,i){var a,s,o=i?1:-1,c=null;if(n.isValidBarcodeColumn(e,t-o)&&(c=e.getDetectionResultColumn(t-o).getCodeword(r)),c!=null)return i?c.getEndX():c.getStartX();if(c=e.getDetectionResultColumn(t).getCodewordNearby(r),c!=null)return i?c.getStartX():c.getEndX();if(n.isValidBarcodeColumn(e,t-o)&&(c=e.getDetectionResultColumn(t-o).getCodewordNearby(r)),c!=null)return i?c.getEndX():c.getStartX();for(var d=0;n.isValidBarcodeColumn(e,t-o);){t-=o;try{for(var f=(a=void 0,Ih(e.getDetectionResultColumn(t).getCodewords())),p=f.next();!p.done;p=f.next()){var g=p.value;if(g!=null)return(i?g.getEndX():g.getStartX())+o*d*(g.getEndX()-g.getStartX())}}catch(m){a={error:m}}finally{try{p&&!p.done&&(s=f.return)&&s.call(f)}finally{if(a)throw a.error}}d++}return i?e.getBoundingBox().getMinX():e.getBoundingBox().getMaxX()},n.detectCodeword=function(e,t,r,i,a,s,o,c){a=n.adjustCodewordStartColumn(e,t,r,i,a,s);var d=n.getModuleBitCount(e,t,r,i,a,s);if(d==null)return null;var f,p=Gt.sum(d);if(i)f=a+p;else{for(var g=0;g<d.length/2;g++){var m=d[g];d[g]=d[d.length-1-g],d[d.length-1-g]=m}f=a,a=f-p}if(!n.checkCodewordSkew(p,o,c))return null;var x=Iz.getDecodedValue(d),b=zt.getCodeword(x);return b===-1?null:new Tz(a,f,n.getCodewordBucketNumber(x),b)},n.getModuleBitCount=function(e,t,r,i,a,s){for(var o=a,c=new Int32Array(8),d=0,f=i?1:-1,p=i;(i?o<r:o>=t)&&d<c.length;)e.get(o,s)===p?(c[d]++,o+=f):(d++,p=!p);return d===c.length||o===(i?r:t)&&d===c.length-1?c:null},n.getNumberOfECCodeWords=function(e){return 2<<e},n.adjustCodewordStartColumn=function(e,t,r,i,a,s){for(var o=a,c=i?-1:1,d=0;d<2;d++){for(;(i?o>=t:o<r)&&i===e.get(o,s);){if(Math.abs(a-o)>n.CODEWORD_SKEW_SIZE)return a;o+=c}c=-c,i=!i}return o},n.checkCodewordSkew=function(e,t,r){return t-n.CODEWORD_SKEW_SIZE<=e&&e<=r+n.CODEWORD_SKEW_SIZE},n.decodeCodewords=function(e,t,r){if(e.length===0)throw je.getFormatInstance();var i=1<<t+1,a=n.correctErrors(e,r,i);n.verifyCodewordCount(e,i);var s=Fz.decode(e,""+t);return s.setErrorsCorrected(a),s.setErasures(r.length),s},n.correctErrors=function(e,t,r){if(t!=null&&t.length>r/2+n.MAX_ERRORS||r<0||r>n.MAX_EC_CODEWORDS)throw zr.getChecksumInstance();return n.errorCorrection.decode(e,r,t)},n.verifyCodewordCount=function(e,t){if(e.length<4)throw je.getFormatInstance();var r=e[0];if(r>e.length)throw je.getFormatInstance();if(r===0)if(t<e.length)e[0]=e.length-t;else throw je.getFormatInstance()},n.getBitCountForCodeword=function(e){for(var t=new Int32Array(8),r=0,i=t.length-1;!((e&1)!==r&&(r=e&1,i--,i<0));)t[i]++,e>>=1;return t},n.getCodewordBucketNumber=function(e){return e instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(e):this.getCodewordBucketNumber_number(e)},n.getCodewordBucketNumber_number=function(e){return n.getCodewordBucketNumber(n.getBitCountForCodeword(e))},n.getCodewordBucketNumber_Int32Array=function(e){return(e[0]-e[2]+e[4]-e[6]+9)%9},n.toString=function(e){for(var t=new o_,r=0;r<e.length;r++){t.format("Row %2d: ",r);for(var i=0;i<e[r].length;i++){var a=e[r][i];a.getValue().length===0?t.format("        ",null):t.format("%4d(%2d)",a.getValue()[0],a.getConfidence(a.getValue()[0]))}t.format("%n")}return t.toString()},n.CODEWORD_SKEW_SIZE=2,n.MAX_ERRORS=3,n.MAX_EC_CODEWORDS=512,n.errorCorrection=new xz,n}(),jz=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ww=function(){function n(){}return n.prototype.decode=function(e,t){t===void 0&&(t=null);var r=n.decode(e,t,!1);if(r==null||r.length===0||r[0]==null)throw _e.getNotFoundInstance();return r[0]},n.prototype.decodeMultiple=function(e,t){t===void 0&&(t=null);try{return n.decode(e,t,!0)}catch(r){throw r instanceof je||r instanceof zr?_e.getNotFoundInstance():r}},n.decode=function(e,t,r){var i,a,s=new Array,o=hz.detectMultiple(e,t,r);try{for(var c=jz(o.getPoints()),d=c.next();!d.done;d=c.next()){var f=d.value,p=Vz.decode(o.getBits(),f[4],f[5],f[6],f[7],n.getMinCodewordWidth(f),n.getMaxCodewordWidth(f)),g=new wi(p.getText(),p.getRawBytes(),void 0,f,et.PDF_417);g.putMetadata(ai.ERROR_CORRECTION_LEVEL,p.getECLevel());var m=p.getOther();m!=null&&g.putMetadata(ai.PDF417_EXTRA_METADATA,m),s.push(g)}}catch(x){i={error:x}}finally{try{d&&!d.done&&(a=c.return)&&a.call(c)}finally{if(i)throw i.error}}return s.map(function(x){return x})},n.getMaxWidth=function(e,t){return e==null||t==null?0:Math.trunc(Math.abs(e.getX()-t.getX()))},n.getMinWidth=function(e,t){return e==null||t==null?It.MAX_VALUE:Math.trunc(Math.abs(e.getX()-t.getX()))},n.getMaxCodewordWidth=function(e){return Math.floor(Math.max(Math.max(n.getMaxWidth(e[0],e[4]),n.getMaxWidth(e[6],e[2])*zt.MODULES_IN_CODEWORD/zt.MODULES_IN_STOP_PATTERN),Math.max(n.getMaxWidth(e[1],e[5]),n.getMaxWidth(e[7],e[3])*zt.MODULES_IN_CODEWORD/zt.MODULES_IN_STOP_PATTERN)))},n.getMinCodewordWidth=function(e){return Math.floor(Math.min(Math.min(n.getMinWidth(e[0],e[4]),n.getMinWidth(e[6],e[2])*zt.MODULES_IN_CODEWORD/zt.MODULES_IN_STOP_PATTERN),Math.min(n.getMinWidth(e[1],e[5]),n.getMinWidth(e[7],e[3])*zt.MODULES_IN_CODEWORD/zt.MODULES_IN_STOP_PATTERN)))},n.prototype.reset=function(){},n}(),Uz=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),GI=function(n){Uz(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="ReaderException",e}(Wi),WI=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Hz=function(){function n(){}return n.prototype.decode=function(e,t){return this.setHints(t),this.decodeInternal(e)},n.prototype.decodeWithState=function(e){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(e)},n.prototype.setHints=function(e){this.hints=e;var t=e!=null&&e.get(Bn.TRY_HARDER)!==void 0,r=e==null?null:e.get(Bn.POSSIBLE_FORMATS),i=new Array;if(r!=null){var a=r.some(function(s){return s===et.UPC_A||s===et.UPC_E||s===et.EAN_13||s===et.EAN_8||s===et.CODABAR||s===et.CODE_39||s===et.CODE_93||s===et.CODE_128||s===et.ITF||s===et.RSS_14||s===et.RSS_EXPANDED});a&&!t&&i.push(new Xh(e)),r.includes(et.QR_CODE)&&i.push(new vw),r.includes(et.DATA_MATRIX)&&i.push(new yw),r.includes(et.AZTEC)&&i.push(new gw),r.includes(et.PDF_417)&&i.push(new ww),a&&t&&i.push(new Xh(e))}i.length===0&&(t||i.push(new Xh(e)),i.push(new vw),i.push(new yw),i.push(new gw),i.push(new ww),t&&i.push(new Xh(e))),this.readers=i},n.prototype.reset=function(){var e,t;if(this.readers!==null)try{for(var r=WI(this.readers),i=r.next();!i.done;i=r.next()){var a=i.value;a.reset()}}catch(s){e={error:s}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}},n.prototype.decodeInternal=function(e){var t,r;if(this.readers===null)throw new GI("No readers where selected, nothing can be read.");try{for(var i=WI(this.readers),a=i.next();!a.done;a=i.next()){var s=a.value;try{return s.decode(e,this.hints)}catch(o){if(o instanceof GI)continue}}}catch(o){t={error:o}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}throw new _e("No MultiFormat Readers were able to detect the code.")},n}(),zz=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),$z=function(n){zz(e,n);function e(t,r){t===void 0&&(t=null),r===void 0&&(r=500);var i=this,a=new Hz;return a.setHints(t),i=n.call(this,a,r)||this,i}return e.prototype.decodeBitmap=function(t){return this.reader.decodeWithState(t)},e}(xf),Gz=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();(function(n){Gz(e,n);function e(t){return t===void 0&&(t=500),n.call(this,new ww,t)||this}return e})(xf);var Wz=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();(function(n){Wz(e,n);function e(t){return t===void 0&&(t=500),n.call(this,new vw,t)||this}return e})(xf);var bw;(function(n){n[n.ERROR_CORRECTION=0]="ERROR_CORRECTION",n[n.CHARACTER_SET=1]="CHARACTER_SET",n[n.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",n[n.DATA_MATRIX_COMPACT=3]="DATA_MATRIX_COMPACT",n[n.MIN_SIZE=4]="MIN_SIZE",n[n.MAX_SIZE=5]="MAX_SIZE",n[n.MARGIN=6]="MARGIN",n[n.PDF417_COMPACT=7]="PDF417_COMPACT",n[n.PDF417_COMPACTION=8]="PDF417_COMPACTION",n[n.PDF417_DIMENSIONS=9]="PDF417_DIMENSIONS",n[n.AZTEC_LAYERS=10]="AZTEC_LAYERS",n[n.QR_VERSION=11]="QR_VERSION",n[n.GS1_FORMAT=12]="GS1_FORMAT",n[n.FORCE_C40=13]="FORCE_C40"})(bw||(bw={}));const zg=bw;var rO=function(){function n(e){this.field=e,this.cachedGenerators=[],this.cachedGenerators.push(new Ol(e,Int32Array.from([1])))}return n.prototype.buildGenerator=function(e){var t=this.cachedGenerators;if(e>=t.length)for(var r=t[t.length-1],i=this.field,a=t.length;a<=e;a++){var s=r.multiply(new Ol(i,Int32Array.from([1,i.exp(a-1+i.getGeneratorBase())])));t.push(s),r=s}return t[e]},n.prototype.encode=function(e,t){if(t===0)throw new it("No error correction bytes");var r=e.length-t;if(r<=0)throw new it("No data bytes provided");var i=this.buildGenerator(t),a=new Int32Array(r);Sn.arraycopy(e,0,a,0,r);var s=new Ol(this.field,a);s=s.multiplyByMonomial(t,1);for(var o=s.divide(i)[1],c=o.getCoefficients(),d=t-c.length,f=0;f<d;f++)e[r+f]=0;Sn.arraycopy(c,0,e,r+d,c.length)},n}(),Qh=function(){function n(){}return n.applyMaskPenaltyRule1=function(e){return n.applyMaskPenaltyRule1Internal(e,!0)+n.applyMaskPenaltyRule1Internal(e,!1)},n.applyMaskPenaltyRule2=function(e){for(var t=0,r=e.getArray(),i=e.getWidth(),a=e.getHeight(),s=0;s<a-1;s++)for(var o=r[s],c=0;c<i-1;c++){var d=o[c];d===o[c+1]&&d===r[s+1][c]&&d===r[s+1][c+1]&&t++}return n.N2*t},n.applyMaskPenaltyRule3=function(e){for(var t=0,r=e.getArray(),i=e.getWidth(),a=e.getHeight(),s=0;s<a;s++)for(var o=0;o<i;o++){var c=r[s];o+6<i&&c[o]===1&&c[o+1]===0&&c[o+2]===1&&c[o+3]===1&&c[o+4]===1&&c[o+5]===0&&c[o+6]===1&&(n.isWhiteHorizontal(c,o-4,o)||n.isWhiteHorizontal(c,o+7,o+11))&&t++,s+6<a&&r[s][o]===1&&r[s+1][o]===0&&r[s+2][o]===1&&r[s+3][o]===1&&r[s+4][o]===1&&r[s+5][o]===0&&r[s+6][o]===1&&(n.isWhiteVertical(r,o,s-4,s)||n.isWhiteVertical(r,o,s+7,s+11))&&t++}return t*n.N3},n.isWhiteHorizontal=function(e,t,r){t=Math.max(t,0),r=Math.min(r,e.length);for(var i=t;i<r;i++)if(e[i]===1)return!1;return!0},n.isWhiteVertical=function(e,t,r,i){r=Math.max(r,0),i=Math.min(i,e.length);for(var a=r;a<i;a++)if(e[a][t]===1)return!1;return!0},n.applyMaskPenaltyRule4=function(e){for(var t=0,r=e.getArray(),i=e.getWidth(),a=e.getHeight(),s=0;s<a;s++)for(var o=r[s],c=0;c<i;c++)o[c]===1&&t++;var d=e.getHeight()*e.getWidth(),f=Math.floor(Math.abs(t*2-d)*10/d);return f*n.N4},n.getDataMaskBit=function(e,t,r){var i,a;switch(e){case 0:i=r+t&1;break;case 1:i=r&1;break;case 2:i=t%3;break;case 3:i=(r+t)%3;break;case 4:i=Math.floor(r/2)+Math.floor(t/3)&1;break;case 5:a=r*t,i=(a&1)+a%3;break;case 6:a=r*t,i=(a&1)+a%3&1;break;case 7:a=r*t,i=a%3+(r+t&1)&1;break;default:throw new it("Invalid mask pattern: "+e)}return i===0},n.applyMaskPenaltyRule1Internal=function(e,t){for(var r=0,i=t?e.getHeight():e.getWidth(),a=t?e.getWidth():e.getHeight(),s=e.getArray(),o=0;o<i;o++){for(var c=0,d=-1,f=0;f<a;f++){var p=t?s[o][f]:s[f][o];p===d?c++:(c>=5&&(r+=n.N1+(c-5)),c=1,d=p)}c>=5&&(r+=n.N1+(c-5))}return r},n.N1=3,n.N2=3,n.N3=40,n.N4=10,n}(),Yz=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},qz=function(){function n(e,t){this.width=e,this.height=t;for(var r=new Array(t),i=0;i!==t;i++)r[i]=new Uint8Array(e);this.bytes=r}return n.prototype.getHeight=function(){return this.height},n.prototype.getWidth=function(){return this.width},n.prototype.get=function(e,t){return this.bytes[t][e]},n.prototype.getArray=function(){return this.bytes},n.prototype.setNumber=function(e,t,r){this.bytes[t][e]=r},n.prototype.setBoolean=function(e,t,r){this.bytes[t][e]=r?1:0},n.prototype.clear=function(e){var t,r;try{for(var i=Yz(this.bytes),a=i.next();!a.done;a=i.next()){var s=a.value;Rr.fill(s,e)}}catch(o){t={error:o}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;if(this.width!==t.width||this.height!==t.height)return!1;for(var r=0,i=this.height;r<i;++r)for(var a=this.bytes[r],s=t.bytes[r],o=0,c=this.width;o<c;++o)if(a[o]!==s[o])return!1;return!0},n.prototype.toString=function(){for(var e=new Et,t=0,r=this.height;t<r;++t){for(var i=this.bytes[t],a=0,s=this.width;a<s;++a)switch(i[a]){case 0:e.append(" 0");break;case 1:e.append(" 1");break;default:e.append("  ");break}e.append(`
`)}return e.toString()},n}(),_w=function(){function n(){this.maskPattern=-1}return n.prototype.getMode=function(){return this.mode},n.prototype.getECLevel=function(){return this.ecLevel},n.prototype.getVersion=function(){return this.version},n.prototype.getMaskPattern=function(){return this.maskPattern},n.prototype.getMatrix=function(){return this.matrix},n.prototype.toString=function(){var e=new Et;return e.append(`<<
`),e.append(" mode: "),e.append(this.mode?this.mode.toString():"null"),e.append(`
 ecLevel: `),e.append(this.ecLevel?this.ecLevel.toString():"null"),e.append(`
 version: `),e.append(this.version?this.version.toString():"null"),e.append(`
 maskPattern: `),e.append(this.maskPattern.toString()),this.matrix?(e.append(`
 matrix:
`),e.append(this.matrix.toString())):e.append(`
 matrix: null
`),e.append(`>>
`),e.toString()},n.prototype.setMode=function(e){this.mode=e},n.prototype.setECLevel=function(e){this.ecLevel=e},n.prototype.setVersion=function(e){this.version=e},n.prototype.setMaskPattern=function(e){this.maskPattern=e},n.prototype.setMatrix=function(e){this.matrix=e},n.isValidMaskPattern=function(e){return e>=0&&e<n.NUM_MASK_PATTERNS},n.NUM_MASK_PATTERNS=8,n}(),Xz=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),In=function(n){Xz(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="WriterException",e}(Wi),YI=function(){function n(){}return n.clearMatrix=function(e){e.clear(255)},n.buildMatrix=function(e,t,r,i,a){n.clearMatrix(a),n.embedBasicPatterns(r,a),n.embedTypeInfo(t,i,a),n.maybeEmbedVersionInfo(r,a),n.embedDataBits(e,i,a)},n.embedBasicPatterns=function(e,t){n.embedPositionDetectionPatternsAndSeparators(t),n.embedDarkDotAtLeftBottomCorner(t),n.maybeEmbedPositionAdjustmentPatterns(e,t),n.embedTimingPatterns(t)},n.embedTypeInfo=function(e,t,r){var i=new Gr;n.makeTypeInfoBits(e,t,i);for(var a=0,s=i.getSize();a<s;++a){var o=i.get(i.getSize()-1-a),c=n.TYPE_INFO_COORDINATES[a],d=c[0],f=c[1];if(r.setBoolean(d,f,o),a<8){var p=r.getWidth()-a-1,g=8;r.setBoolean(p,g,o)}else{var p=8,g=r.getHeight()-7+(a-8);r.setBoolean(p,g,o)}}},n.maybeEmbedVersionInfo=function(e,t){if(!(e.getVersionNumber()<7)){var r=new Gr;n.makeVersionInfoBits(e,r);for(var i=17,a=0;a<6;++a)for(var s=0;s<3;++s){var o=r.get(i);i--,t.setBoolean(a,t.getHeight()-11+s,o),t.setBoolean(t.getHeight()-11+s,a,o)}}},n.embedDataBits=function(e,t,r){for(var i=0,a=-1,s=r.getWidth()-1,o=r.getHeight()-1;s>0;){for(s===6&&(s-=1);o>=0&&o<r.getHeight();){for(var c=0;c<2;++c){var d=s-c;if(n.isEmpty(r.get(d,o))){var f=void 0;i<e.getSize()?(f=e.get(i),++i):f=!1,t!==255&&Qh.getDataMaskBit(t,d,o)&&(f=!f),r.setBoolean(d,o,f)}}o+=a}a=-a,o+=a,s-=2}if(i!==e.getSize())throw new In("Not all bits consumed: "+i+"/"+e.getSize())},n.findMSBSet=function(e){return 32-It.numberOfLeadingZeros(e)},n.calculateBCHCode=function(e,t){if(t===0)throw new it("0 polynomial");var r=n.findMSBSet(t);for(e<<=r-1;n.findMSBSet(e)>=r;)e^=t<<n.findMSBSet(e)-r;return e},n.makeTypeInfoBits=function(e,t,r){if(!_w.isValidMaskPattern(t))throw new In("Invalid mask pattern");var i=e.getBits()<<3|t;r.appendBits(i,5);var a=n.calculateBCHCode(i,n.TYPE_INFO_POLY);r.appendBits(a,10);var s=new Gr;if(s.appendBits(n.TYPE_INFO_MASK_PATTERN,15),r.xor(s),r.getSize()!==15)throw new In("should not happen but we got: "+r.getSize())},n.makeVersionInfoBits=function(e,t){t.appendBits(e.getVersionNumber(),6);var r=n.calculateBCHCode(e.getVersionNumber(),n.VERSION_INFO_POLY);if(t.appendBits(r,12),t.getSize()!==18)throw new In("should not happen but we got: "+t.getSize())},n.isEmpty=function(e){return e===255},n.embedTimingPatterns=function(e){for(var t=8;t<e.getWidth()-8;++t){var r=(t+1)%2;n.isEmpty(e.get(t,6))&&e.setNumber(t,6,r),n.isEmpty(e.get(6,t))&&e.setNumber(6,t,r)}},n.embedDarkDotAtLeftBottomCorner=function(e){if(e.get(8,e.getHeight()-8)===0)throw new In;e.setNumber(8,e.getHeight()-8,1)},n.embedHorizontalSeparationPattern=function(e,t,r){for(var i=0;i<8;++i){if(!n.isEmpty(r.get(e+i,t)))throw new In;r.setNumber(e+i,t,0)}},n.embedVerticalSeparationPattern=function(e,t,r){for(var i=0;i<7;++i){if(!n.isEmpty(r.get(e,t+i)))throw new In;r.setNumber(e,t+i,0)}},n.embedPositionAdjustmentPattern=function(e,t,r){for(var i=0;i<5;++i)for(var a=n.POSITION_ADJUSTMENT_PATTERN[i],s=0;s<5;++s)r.setNumber(e+s,t+i,a[s])},n.embedPositionDetectionPattern=function(e,t,r){for(var i=0;i<7;++i)for(var a=n.POSITION_DETECTION_PATTERN[i],s=0;s<7;++s)r.setNumber(e+s,t+i,a[s])},n.embedPositionDetectionPatternsAndSeparators=function(e){var t=n.POSITION_DETECTION_PATTERN[0].length;n.embedPositionDetectionPattern(0,0,e),n.embedPositionDetectionPattern(e.getWidth()-t,0,e),n.embedPositionDetectionPattern(0,e.getWidth()-t,e);var r=8;n.embedHorizontalSeparationPattern(0,r-1,e),n.embedHorizontalSeparationPattern(e.getWidth()-r,r-1,e),n.embedHorizontalSeparationPattern(0,e.getWidth()-r,e);var i=7;n.embedVerticalSeparationPattern(i,0,e),n.embedVerticalSeparationPattern(e.getHeight()-i-1,0,e),n.embedVerticalSeparationPattern(i,e.getHeight()-i,e)},n.maybeEmbedPositionAdjustmentPatterns=function(e,t){if(!(e.getVersionNumber()<2))for(var r=e.getVersionNumber()-1,i=n.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[r],a=0,s=i.length;a!==s;a++){var o=i[a];if(o>=0)for(var c=0;c!==s;c++){var d=i[c];d>=0&&n.isEmpty(t.get(d,o))&&n.embedPositionAdjustmentPattern(d-2,o-2,t)}}},n.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),n.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),n.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),n.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),n.VERSION_INFO_POLY=7973,n.TYPE_INFO_POLY=1335,n.TYPE_INFO_MASK_PATTERN=21522,n}(),Kz=function(){function n(e,t){this.dataBytes=e,this.errorCorrectionBytes=t}return n.prototype.getDataBytes=function(){return this.dataBytes},n.prototype.getErrorCorrectionBytes=function(){return this.errorCorrectionBytes},n}(),qI=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};(function(){function n(){}return n.calculateMaskPenalty=function(e){return Qh.applyMaskPenaltyRule1(e)+Qh.applyMaskPenaltyRule2(e)+Qh.applyMaskPenaltyRule3(e)+Qh.applyMaskPenaltyRule4(e)},n.encode=function(e,t,r){r===void 0&&(r=null);var i=n.DEFAULT_BYTE_MODE_ENCODING,a=r!==null&&r.get(zg.CHARACTER_SET)!==void 0;a&&(i=r.get(zg.CHARACTER_SET).toString());var s=this.chooseMode(e,i),o=new Gr;if(s===Dn.BYTE&&(a||n.DEFAULT_BYTE_MODE_ENCODING!==i)){var c=Dr.getCharacterSetECIByName(i);c!==void 0&&this.appendECI(c,o)}this.appendModeInfo(s,o);var d=new Gr;this.appendBytes(e,s,d,i);var f;if(r!==null&&r.get(zg.QR_VERSION)!==void 0){var p=Number.parseInt(r.get(zg.QR_VERSION).toString(),10);f=Wc.getVersionForNumber(p);var g=this.calculateBitsNeeded(s,o,d,f);if(!this.willFit(g,f,t))throw new In("Data too big for requested version")}else f=this.recommendVersion(t,s,o,d);var m=new Gr;m.appendBitArray(o);var x=s===Dn.BYTE?d.getSizeInBytes():e.length;this.appendLengthInfo(x,f,s,m),m.appendBitArray(d);var b=f.getECBlocksForLevel(t),A=f.getTotalCodewords()-b.getTotalECCodewords();this.terminateBits(A,m);var E=this.interleaveWithECBytes(m,f.getTotalCodewords(),A,b.getNumBlocks()),C=new _w;C.setECLevel(t),C.setMode(s),C.setVersion(f);var T=f.getDimensionForVersion(),D=new qz(T,T),k=this.chooseMaskPattern(E,t,f,D);return C.setMaskPattern(k),YI.buildMatrix(E,t,f,k,D),C.setMatrix(D),C},n.recommendVersion=function(e,t,r,i){var a=this.calculateBitsNeeded(t,r,i,Wc.getVersionForNumber(1)),s=this.chooseVersion(a,e),o=this.calculateBitsNeeded(t,r,i,s);return this.chooseVersion(o,e)},n.calculateBitsNeeded=function(e,t,r,i){return t.getSize()+e.getCharacterCountBits(i)+r.getSize()},n.getAlphanumericCode=function(e){return e<n.ALPHANUMERIC_TABLE.length?n.ALPHANUMERIC_TABLE[e]:-1},n.chooseMode=function(e,t){if(t===void 0&&(t=null),Dr.SJIS.getName()===t&&this.isOnlyDoubleByteKanji(e))return Dn.KANJI;for(var r=!1,i=!1,a=0,s=e.length;a<s;++a){var o=e.charAt(a);if(n.isDigit(o))r=!0;else if(this.getAlphanumericCode(o.charCodeAt(0))!==-1)i=!0;else return Dn.BYTE}return i?Dn.ALPHANUMERIC:r?Dn.NUMERIC:Dn.BYTE},n.isOnlyDoubleByteKanji=function(e){var t;try{t=Ra.encode(e,Dr.SJIS)}catch{return!1}var r=t.length;if(r%2!==0)return!1;for(var i=0;i<r;i+=2){var a=t[i]&255;if((a<129||a>159)&&(a<224||a>235))return!1}return!0},n.chooseMaskPattern=function(e,t,r,i){for(var a=Number.MAX_SAFE_INTEGER,s=-1,o=0;o<_w.NUM_MASK_PATTERNS;o++){YI.buildMatrix(e,t,r,o,i);var c=this.calculateMaskPenalty(i);c<a&&(a=c,s=o)}return s},n.chooseVersion=function(e,t){for(var r=1;r<=40;r++){var i=Wc.getVersionForNumber(r);if(n.willFit(e,i,t))return i}throw new In("Data too big")},n.willFit=function(e,t,r){var i=t.getTotalCodewords(),a=t.getECBlocksForLevel(r),s=a.getTotalECCodewords(),o=i-s,c=(e+7)/8;return o>=c},n.terminateBits=function(e,t){var r=e*8;if(t.getSize()>r)throw new In("data bits cannot fit in the QR Code"+t.getSize()+" > "+r);for(var i=0;i<4&&t.getSize()<r;++i)t.appendBit(!1);var a=t.getSize()&7;if(a>0)for(var i=a;i<8;i++)t.appendBit(!1);for(var s=e-t.getSizeInBytes(),i=0;i<s;++i)t.appendBits((i&1)===0?236:17,8);if(t.getSize()!==r)throw new In("Bits size does not equal capacity")},n.getNumDataBytesAndNumECBytesForBlockID=function(e,t,r,i,a,s){if(i>=r)throw new In("Block ID too large");var o=e%r,c=r-o,d=Math.floor(e/r),f=d+1,p=Math.floor(t/r),g=p+1,m=d-p,x=f-g;if(m!==x)throw new In("EC bytes mismatch");if(r!==c+o)throw new In("RS blocks mismatch");if(e!==(p+m)*c+(g+x)*o)throw new In("Total bytes mismatch");i<c?(a[0]=p,s[0]=m):(a[0]=g,s[0]=x)},n.interleaveWithECBytes=function(e,t,r,i){var a,s,o,c;if(e.getSizeInBytes()!==r)throw new In("Number of bits and data bytes does not match");for(var d=0,f=0,p=0,g=new Array,m=0;m<i;++m){var x=new Int32Array(1),b=new Int32Array(1);n.getNumDataBytesAndNumECBytesForBlockID(t,r,i,m,x,b);var A=x[0],E=new Uint8Array(A);e.toBytes(8*d,E,0,A);var C=n.generateECBytes(E,b[0]);g.push(new Kz(E,C)),f=Math.max(f,A),p=Math.max(p,C.length),d+=x[0]}if(r!==d)throw new In("Data bytes does not match offset");for(var T=new Gr,m=0;m<f;++m)try{for(var D=(a=void 0,qI(g)),k=D.next();!k.done;k=D.next()){var B=k.value,E=B.getDataBytes();m<E.length&&T.appendBits(E[m],8)}}catch(F){a={error:F}}finally{try{k&&!k.done&&(s=D.return)&&s.call(D)}finally{if(a)throw a.error}}for(var m=0;m<p;++m)try{for(var O=(o=void 0,qI(g)),I=O.next();!I.done;I=O.next()){var B=I.value,C=B.getErrorCorrectionBytes();m<C.length&&T.appendBits(C[m],8)}}catch(F){o={error:F}}finally{try{I&&!I.done&&(c=O.return)&&c.call(O)}finally{if(o)throw o.error}}if(t!==T.getSizeInBytes())throw new In("Interleaving error: "+t+" and "+T.getSizeInBytes()+" differ.");return T},n.generateECBytes=function(e,t){for(var r=e.length,i=new Int32Array(r+t),a=0;a<r;a++)i[a]=e[a]&255;new rO(Ui.QR_CODE_FIELD_256).encode(i,t);for(var s=new Uint8Array(t),a=0;a<t;a++)s[a]=i[r+a];return s},n.appendModeInfo=function(e,t){t.appendBits(e.getBits(),4)},n.appendLengthInfo=function(e,t,r,i){var a=r.getCharacterCountBits(t);if(e>=1<<a)throw new In(e+" is bigger than "+((1<<a)-1));i.appendBits(e,a)},n.appendBytes=function(e,t,r,i){switch(t){case Dn.NUMERIC:n.appendNumericBytes(e,r);break;case Dn.ALPHANUMERIC:n.appendAlphanumericBytes(e,r);break;case Dn.BYTE:n.append8BitBytes(e,r,i);break;case Dn.KANJI:n.appendKanjiBytes(e,r);break;default:throw new In("Invalid mode: "+t)}},n.getDigit=function(e){return e.charCodeAt(0)-48},n.isDigit=function(e){var t=n.getDigit(e);return t>=0&&t<=9},n.appendNumericBytes=function(e,t){for(var r=e.length,i=0;i<r;){var a=n.getDigit(e.charAt(i));if(i+2<r){var s=n.getDigit(e.charAt(i+1)),o=n.getDigit(e.charAt(i+2));t.appendBits(a*100+s*10+o,10),i+=3}else if(i+1<r){var s=n.getDigit(e.charAt(i+1));t.appendBits(a*10+s,7),i+=2}else t.appendBits(a,4),i++}},n.appendAlphanumericBytes=function(e,t){for(var r=e.length,i=0;i<r;){var a=n.getAlphanumericCode(e.charCodeAt(i));if(a===-1)throw new In;if(i+1<r){var s=n.getAlphanumericCode(e.charCodeAt(i+1));if(s===-1)throw new In;t.appendBits(a*45+s,11),i+=2}else t.appendBits(a,6),i++}},n.append8BitBytes=function(e,t,r){var i;try{i=Ra.encode(e,r)}catch(c){throw new In(c)}for(var a=0,s=i.length;a!==s;a++){var o=i[a];t.appendBits(o,8)}},n.appendKanjiBytes=function(e,t){var r;try{r=Ra.encode(e,Dr.SJIS)}catch(p){throw new In(p)}for(var i=r.length,a=0;a<i;a+=2){var s=r[a]&255,o=r[a+1]&255,c=s<<8&4294967295|o,d=-1;if(c>=33088&&c<=40956?d=c-33088:c>=57408&&c<=60351&&(d=c-49472),d===-1)throw new In("Invalid byte sequence");var f=(d>>8)*192+(d&255);t.appendBits(f,13)}},n.appendECI=function(e,t){t.appendBits(Dn.ECI.getBits(),4),t.appendBits(e.getValue(),8)},n.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),n.DEFAULT_BYTE_MODE_ENCODING=Dr.UTF8.getName(),n})();var Qz=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();(function(n){Qz(e,n);function e(t,r,i,a,s,o,c,d){var f=n.call(this,o,c)||this;if(f.yuvData=t,f.dataWidth=r,f.dataHeight=i,f.left=a,f.top=s,a+o>r||s+c>i)throw new it("Crop rectangle does not fit within image data.");return d&&f.reverseHorizontal(o,c),f}return e.prototype.getRow=function(t,r){if(t<0||t>=this.getHeight())throw new it("Requested row is outside the image: "+t);var i=this.getWidth();(r==null||r.length<i)&&(r=new Uint8ClampedArray(i));var a=(t+this.top)*this.dataWidth+this.left;return Sn.arraycopy(this.yuvData,a,r,0,i),r},e.prototype.getMatrix=function(){var t=this.getWidth(),r=this.getHeight();if(t===this.dataWidth&&r===this.dataHeight)return this.yuvData;var i=t*r,a=new Uint8ClampedArray(i),s=this.top*this.dataWidth+this.left;if(t===this.dataWidth)return Sn.arraycopy(this.yuvData,s,a,0,i),a;for(var o=0;o<r;o++){var c=o*t;Sn.arraycopy(this.yuvData,s,a,c,t),s+=this.dataWidth}return a},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(t,r,i,a){return new e(this.yuvData,this.dataWidth,this.dataHeight,this.left+t,this.top+r,i,a,!1)},e.prototype.renderThumbnail=function(){for(var t=this.getWidth()/e.THUMBNAIL_SCALE_FACTOR,r=this.getHeight()/e.THUMBNAIL_SCALE_FACTOR,i=new Int32Array(t*r),a=this.yuvData,s=this.top*this.dataWidth+this.left,o=0;o<r;o++){for(var c=o*t,d=0;d<t;d++){var f=a[s+d*e.THUMBNAIL_SCALE_FACTOR]&255;i[c+d]=4278190080|f*65793}s+=this.dataWidth*e.THUMBNAIL_SCALE_FACTOR}return i},e.prototype.getThumbnailWidth=function(){return this.getWidth()/e.THUMBNAIL_SCALE_FACTOR},e.prototype.getThumbnailHeight=function(){return this.getHeight()/e.THUMBNAIL_SCALE_FACTOR},e.prototype.reverseHorizontal=function(t,r){for(var i=this.yuvData,a=0,s=this.top*this.dataWidth+this.left;a<r;a++,s+=this.dataWidth)for(var o=s+t/2,c=s,d=s+t-1;c<o;c++,d--){var f=i[c];i[c]=i[d],i[d]=f}},e.prototype.invert=function(){return new r_(this)},e.THUMBNAIL_SCALE_FACTOR=2,e})(ay);var Zz=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();(function(n){Zz(e,n);function e(t,r,i,a,s,o,c){var d=n.call(this,r,i)||this;if(d.dataWidth=a,d.dataHeight=s,d.left=o,d.top=c,t.BYTES_PER_ELEMENT===4){for(var f=r*i,p=new Uint8ClampedArray(f),g=0;g<f;g++){var m=t[g],x=m>>16&255,b=m>>7&510,A=m&255;p[g]=(x+b+A)/4&255}d.luminances=p}else d.luminances=t;if(a===void 0&&(d.dataWidth=r),s===void 0&&(d.dataHeight=i),o===void 0&&(d.left=0),c===void 0&&(d.top=0),d.left+r>d.dataWidth||d.top+i>d.dataHeight)throw new it("Crop rectangle does not fit within image data.");return d}return e.prototype.getRow=function(t,r){if(t<0||t>=this.getHeight())throw new it("Requested row is outside the image: "+t);var i=this.getWidth();(r==null||r.length<i)&&(r=new Uint8ClampedArray(i));var a=(t+this.top)*this.dataWidth+this.left;return Sn.arraycopy(this.luminances,a,r,0,i),r},e.prototype.getMatrix=function(){var t=this.getWidth(),r=this.getHeight();if(t===this.dataWidth&&r===this.dataHeight)return this.luminances;var i=t*r,a=new Uint8ClampedArray(i),s=this.top*this.dataWidth+this.left;if(t===this.dataWidth)return Sn.arraycopy(this.luminances,s,a,0,i),a;for(var o=0;o<r;o++){var c=o*t;Sn.arraycopy(this.luminances,s,a,c,t),s+=this.dataWidth}return a},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(t,r,i,a){return new e(this.luminances,i,a,this.dataWidth,this.dataHeight,this.left+t,this.top+r)},e.prototype.invert=function(){return new r_(this)},e})(ay);var Jz=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),e$=function(n){Jz(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.forName=function(t){return this.getCharacterSetECIByName(t)},e}(Dr),t$=function(){function n(){}return n.ISO_8859_1=Dr.ISO8859_1,n}(),Aw,n$=301,r$=function(n,e){for(var t=1,r=0;r<255;r++)e[r]=t,n[t]=r,t*=2,t>=256&&(t^=n$);return{LOG:n,ALOG:e}};Aw=r$([],[]),Aw.LOG;Aw.ALOG;var XI;(function(n){n[n.FORCE_NONE=0]="FORCE_NONE",n[n.FORCE_SQUARE=1]="FORCE_SQUARE",n[n.FORCE_RECTANGLE=2]="FORCE_RECTANGLE"})(XI||(XI={}));var KI=129,iO=230,i$=231,a$=235,s$=236,o$=237,l$=238,c$=239,u$=240,e2=254,d$=254,QI="[)>05",ZI="[)>06",JI="",ln=0,ni=1,Di=2,Er=3,jr=4,hi=5,f$=function(){function n(){}return n.prototype.getEncodingMode=function(){return ln},n.prototype.encode=function(e){var t=Ga.determineConsecutiveDigitCount(e.getMessage(),e.pos);if(t>=2)e.writeCodeword(this.encodeASCIIDigits(e.getMessage().charCodeAt(e.pos),e.getMessage().charCodeAt(e.pos+1))),e.pos+=2;else{var r=e.getCurrentChar(),i=Ga.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(i!==this.getEncodingMode())switch(i){case hi:e.writeCodeword(i$),e.signalEncoderChange(hi);return;case ni:e.writeCodeword(iO),e.signalEncoderChange(ni);return;case Er:e.writeCodeword(l$),e.signalEncoderChange(Er);break;case Di:e.writeCodeword(c$),e.signalEncoderChange(Di);break;case jr:e.writeCodeword(u$),e.signalEncoderChange(jr);break;default:throw new Error("Illegal mode: "+i)}else Ga.isExtendedASCII(r)?(e.writeCodeword(a$),e.writeCodeword(r-128+1),e.pos++):(e.writeCodeword(r+1),e.pos++)}},n.prototype.encodeASCIIDigits=function(e,t){if(Ga.isDigit(e)&&Ga.isDigit(t)){var r=(e-48)*10+(t-48);return r+130}throw new Error("not digits: "+e+t)},n}(),h$=function(){function n(){}return n.prototype.getEncodingMode=function(){return hi},n.prototype.encode=function(e){var t=new Et;for(t.append(0);e.hasMoreCharacters();){var r=e.getCurrentChar();t.append(r),e.pos++;var i=Ga.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(i!==this.getEncodingMode()){e.signalEncoderChange(ln);break}}var a=t.length()-1,s=1,o=e.getCodewordCount()+a+s;e.updateSymbolInfo(o);var c=e.getSymbolInfo().getDataCapacity()-o>0;if(e.hasMoreCharacters()||c)if(a<=249)t.setCharAt(0,jt.getCharAt(a));else if(a<=1555)t.setCharAt(0,jt.getCharAt(Math.floor(a/250)+249)),t.insert(1,jt.getCharAt(a%250));else throw new Error("Message length not in valid ranges: "+a);for(var d=0,r=t.length();d<r;d++)e.writeCodeword(this.randomize255State(t.charAt(d).charCodeAt(0),e.getCodewordCount()+1))},n.prototype.randomize255State=function(e,t){var r=149*t%255+1,i=e+r;return i<=255?i:i-256},n}(),l_=function(){function n(){}return n.prototype.getEncodingMode=function(){return ni},n.prototype.encodeMaximal=function(e){for(var t=new Et,r=0,i=e.pos,a=0;e.hasMoreCharacters();){var s=e.getCurrentChar();e.pos++,r=this.encodeChar(s,t),t.length()%3===0&&(i=e.pos,a=t.length())}if(a!==t.length()){var o=Math.floor(t.length()/3*2),c=Math.floor(e.getCodewordCount()+o+1);e.updateSymbolInfo(c);var d=e.getSymbolInfo().getDataCapacity()-c,f=Math.floor(t.length()%3);(f===2&&d!==2||f===1&&(r>3||d!==1))&&(e.pos=i)}t.length()>0&&e.writeCodeword(iO),this.handleEOD(e,t)},n.prototype.encode=function(e){for(var t=new Et;e.hasMoreCharacters();){var r=e.getCurrentChar();e.pos++;var i=this.encodeChar(r,t),a=Math.floor(t.length()/3)*2,s=e.getCodewordCount()+a;e.updateSymbolInfo(s);var o=e.getSymbolInfo().getDataCapacity()-s;if(!e.hasMoreCharacters()){var c=new Et;for(t.length()%3===2&&o!==2&&(i=this.backtrackOneCharacter(e,t,c,i));t.length()%3===1&&(i>3||o!==1);)i=this.backtrackOneCharacter(e,t,c,i);break}var d=t.length();if(d%3===0){var f=Ga.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(f!==this.getEncodingMode()){e.signalEncoderChange(ln);break}}}this.handleEOD(e,t)},n.prototype.backtrackOneCharacter=function(e,t,r,i){var a=t.length(),s=t.toString().substring(0,a-i);t.setLengthToZero(),t.append(s),e.pos--;var o=e.getCurrentChar();return i=this.encodeChar(o,r),e.resetSymbolInfo(),i},n.prototype.writeNextTriplet=function(e,t){e.writeCodewords(this.encodeToCodewords(t.toString()));var r=t.toString().substring(3);t.setLengthToZero(),t.append(r)},n.prototype.handleEOD=function(e,t){var r=Math.floor(t.length()/3*2),i=t.length()%3,a=e.getCodewordCount()+r;e.updateSymbolInfo(a);var s=e.getSymbolInfo().getDataCapacity()-a;if(i===2){for(t.append("\0");t.length()>=3;)this.writeNextTriplet(e,t);e.hasMoreCharacters()&&e.writeCodeword(e2)}else if(s===1&&i===1){for(;t.length()>=3;)this.writeNextTriplet(e,t);e.hasMoreCharacters()&&e.writeCodeword(e2),e.pos--}else if(i===0){for(;t.length()>=3;)this.writeNextTriplet(e,t);(s>0||e.hasMoreCharacters())&&e.writeCodeword(e2)}else throw new Error("Unexpected case. Please report!");e.signalEncoderChange(ln)},n.prototype.encodeChar=function(e,t){if(e===32)return t.append(3),1;if(e>=48&&e<=57)return t.append(e-48+4),1;if(e>=65&&e<=90)return t.append(e-65+14),1;if(e<32)return t.append(0),t.append(e),2;if(e<=47)return t.append(1),t.append(e-33),2;if(e<=64)return t.append(1),t.append(e-58+15),2;if(e<=95)return t.append(1),t.append(e-91+22),2;if(e<=127)return t.append(2),t.append(e-96),2;t.append("1");var r=2;return r+=this.encodeChar(e-128,t),r},n.prototype.encodeToCodewords=function(e){var t=1600*e.charCodeAt(0)+40*e.charCodeAt(1)+e.charCodeAt(2)+1,r=t/256,i=t%256,a=new Et;return a.append(r),a.append(i),a.toString()},n}(),p$=function(){function n(){}return n.prototype.getEncodingMode=function(){return jr},n.prototype.encode=function(e){for(var t=new Et;e.hasMoreCharacters();){var r=e.getCurrentChar();this.encodeChar(r,t),e.pos++;var i=t.length();if(i>=4){e.writeCodewords(this.encodeToCodewords(t.toString()));var a=t.toString().substring(4);t.setLengthToZero(),t.append(a);var s=Ga.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(s!==this.getEncodingMode()){e.signalEncoderChange(ln);break}}}t.append(jt.getCharAt(31)),this.handleEOD(e,t)},n.prototype.handleEOD=function(e,t){try{var r=t.length();if(r===0)return;if(r===1){e.updateSymbolInfo();var i=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount(),a=e.getRemainingCharacters();if(a>i&&(e.updateSymbolInfo(e.getCodewordCount()+1),i=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount()),a<=i&&i<=2)return}if(r>4)throw new Error("Count must not exceed 4");var s=r-1,o=this.encodeToCodewords(t.toString()),c=!e.hasMoreCharacters(),d=c&&s<=2;if(s<=2){e.updateSymbolInfo(e.getCodewordCount()+s);var i=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount();i>=3&&(d=!1,e.updateSymbolInfo(e.getCodewordCount()+o.length))}d?(e.resetSymbolInfo(),e.pos-=s):e.writeCodewords(o)}finally{e.signalEncoderChange(ln)}},n.prototype.encodeChar=function(e,t){e>=32&&e<=63?t.append(e):e>=64&&e<=94?t.append(jt.getCharAt(e-64)):Ga.illegalCharacter(jt.getCharAt(e))},n.prototype.encodeToCodewords=function(e){var t=e.length;if(t===0)throw new Error("StringBuilder must not be empty");var r=e.charAt(0).charCodeAt(0),i=t>=2?e.charAt(1).charCodeAt(0):0,a=t>=3?e.charAt(2).charCodeAt(0):0,s=t>=4?e.charAt(3).charCodeAt(0):0,o=(r<<18)+(i<<12)+(a<<6)+s,c=o>>16&255,d=o>>8&255,f=o&255,p=new Et;return p.append(c),t>=2&&p.append(d),t>=3&&p.append(f),p.toString()},n}(),g$=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),m$=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Qt=function(){function n(e,t,r,i,a,s,o,c){o===void 0&&(o=0),c===void 0&&(c=0),this.rectangular=e,this.dataCapacity=t,this.errorCodewords=r,this.matrixWidth=i,this.matrixHeight=a,this.dataRegions=s,this.rsBlockData=o,this.rsBlockError=c}return n.lookup=function(e,t,r,i,a){var s,o;t===void 0&&(t=0),r===void 0&&(r=null),i===void 0&&(i=null),a===void 0&&(a=!0);try{for(var c=m$(v$),d=c.next();!d.done;d=c.next()){var f=d.value;if(!(t===1&&f.rectangular)&&!(t===2&&!f.rectangular)&&!(r!=null&&(f.getSymbolWidth()<r.getWidth()||f.getSymbolHeight()<r.getHeight()))&&!(i!=null&&(f.getSymbolWidth()>i.getWidth()||f.getSymbolHeight()>i.getHeight()))&&e<=f.dataCapacity)return f}}catch(p){s={error:p}}finally{try{d&&!d.done&&(o=c.return)&&o.call(c)}finally{if(s)throw s.error}}if(a)throw new Error("Can't find a symbol arrangement that matches the message. Data codewords: "+e);return null},n.prototype.getHorizontalDataRegions=function(){switch(this.dataRegions){case 1:return 1;case 2:case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},n.prototype.getVerticalDataRegions=function(){switch(this.dataRegions){case 1:case 2:return 1;case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},n.prototype.getSymbolDataWidth=function(){return this.getHorizontalDataRegions()*this.matrixWidth},n.prototype.getSymbolDataHeight=function(){return this.getVerticalDataRegions()*this.matrixHeight},n.prototype.getSymbolWidth=function(){return this.getSymbolDataWidth()+this.getHorizontalDataRegions()*2},n.prototype.getSymbolHeight=function(){return this.getSymbolDataHeight()+this.getVerticalDataRegions()*2},n.prototype.getCodewordCount=function(){return this.dataCapacity+this.errorCodewords},n.prototype.getInterleavedBlockCount=function(){return this.rsBlockData?this.dataCapacity/this.rsBlockData:1},n.prototype.getDataCapacity=function(){return this.dataCapacity},n.prototype.getErrorCodewords=function(){return this.errorCodewords},n.prototype.getDataLengthForInterleavedBlock=function(e){return this.rsBlockData},n.prototype.getErrorLengthForInterleavedBlock=function(e){return this.rsBlockError},n}(),y$=function(n){g$(e,n);function e(){return n.call(this,!1,1558,620,22,22,36,-1,62)||this}return e.prototype.getInterleavedBlockCount=function(){return 10},e.prototype.getDataLengthForInterleavedBlock=function(t){return t<=8?156:155},e}(Qt),v$=[new Qt(!1,3,5,8,8,1),new Qt(!1,5,7,10,10,1),new Qt(!0,5,7,16,6,1),new Qt(!1,8,10,12,12,1),new Qt(!0,10,11,14,6,2),new Qt(!1,12,12,14,14,1),new Qt(!0,16,14,24,10,1),new Qt(!1,18,14,16,16,1),new Qt(!1,22,18,18,18,1),new Qt(!0,22,18,16,10,2),new Qt(!1,30,20,20,20,1),new Qt(!0,32,24,16,14,2),new Qt(!1,36,24,22,22,1),new Qt(!1,44,28,24,24,1),new Qt(!0,49,28,22,14,2),new Qt(!1,62,36,14,14,4),new Qt(!1,86,42,16,16,4),new Qt(!1,114,48,18,18,4),new Qt(!1,144,56,20,20,4),new Qt(!1,174,68,22,22,4),new Qt(!1,204,84,24,24,4,102,42),new Qt(!1,280,112,14,14,16,140,56),new Qt(!1,368,144,16,16,16,92,36),new Qt(!1,456,192,18,18,16,114,48),new Qt(!1,576,224,20,20,16,144,56),new Qt(!1,696,272,22,22,16,174,68),new Qt(!1,816,336,24,24,16,136,56),new Qt(!1,1050,408,18,18,36,175,68),new Qt(!1,1304,496,20,20,36,163,62),new y$],x$=function(){function n(e){this.msg=e,this.pos=0,this.skipAtEnd=0;for(var t=e.split("").map(function(o){return o.charCodeAt(0)}),r=new Et,i=0,a=t.length;i<a;i++){var s=String.fromCharCode(t[i]&255);if(s==="?"&&e.charAt(i)!=="?")throw new Error("Message contains characters outside ISO-8859-1 encoding.");r.append(s)}this.msg=r.toString(),this.shape=0,this.codewords=new Et,this.newEncoding=-1}return n.prototype.setSymbolShape=function(e){this.shape=e},n.prototype.setSizeConstraints=function(e,t){this.minSize=e,this.maxSize=t},n.prototype.getMessage=function(){return this.msg},n.prototype.setSkipAtEnd=function(e){this.skipAtEnd=e},n.prototype.getCurrentChar=function(){return this.msg.charCodeAt(this.pos)},n.prototype.getCurrent=function(){return this.msg.charCodeAt(this.pos)},n.prototype.getCodewords=function(){return this.codewords},n.prototype.writeCodewords=function(e){this.codewords.append(e)},n.prototype.writeCodeword=function(e){this.codewords.append(e)},n.prototype.getCodewordCount=function(){return this.codewords.length()},n.prototype.getNewEncoding=function(){return this.newEncoding},n.prototype.signalEncoderChange=function(e){this.newEncoding=e},n.prototype.resetEncoderSignal=function(){this.newEncoding=-1},n.prototype.hasMoreCharacters=function(){return this.pos<this.getTotalMessageCharCount()},n.prototype.getTotalMessageCharCount=function(){return this.msg.length-this.skipAtEnd},n.prototype.getRemainingCharacters=function(){return this.getTotalMessageCharCount()-this.pos},n.prototype.getSymbolInfo=function(){return this.symbolInfo},n.prototype.updateSymbolInfo=function(e){e===void 0&&(e=this.getCodewordCount()),(this.symbolInfo==null||e>this.symbolInfo.getDataCapacity())&&(this.symbolInfo=Qt.lookup(e,this.shape,this.minSize,this.maxSize,!0))},n.prototype.resetSymbolInfo=function(){this.symbolInfo=null},n}(),w$=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),b$=function(n){w$(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getEncodingMode=function(){return Er},e.prototype.encode=function(t){for(var r=new Et;t.hasMoreCharacters();){var i=t.getCurrentChar();t.pos++,this.encodeChar(i,r);var a=r.length();if(a%3===0){this.writeNextTriplet(t,r);var s=Ga.lookAheadTest(t.getMessage(),t.pos,this.getEncodingMode());if(s!==this.getEncodingMode()){t.signalEncoderChange(ln);break}}}this.handleEOD(t,r)},e.prototype.encodeChar=function(t,r){switch(t){case 13:r.append(0);break;case 42:r.append(1);break;case 62:r.append(2);break;case 32:r.append(3);break;default:t>=48&&t<=57?r.append(t-48+4):t>=65&&t<=90?r.append(t-65+14):Ga.illegalCharacter(jt.getCharAt(t));break}return 1},e.prototype.handleEOD=function(t,r){t.updateSymbolInfo();var i=t.getSymbolInfo().getDataCapacity()-t.getCodewordCount(),a=r.length();t.pos-=a,(t.getRemainingCharacters()>1||i>1||t.getRemainingCharacters()!==i)&&t.writeCodeword(d$),t.getNewEncoding()<0&&t.signalEncoderChange(ln)},e}(l_),_$=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),A$=function(n){_$(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getEncodingMode=function(){return Di},e.prototype.encodeChar=function(t,r){if(t===32)return r.append(3),1;if(t>=48&&t<=57)return r.append(t-48+4),1;if(t>=97&&t<=122)return r.append(t-97+14),1;if(t<32)return r.append(0),r.append(t),2;if(t<=47)return r.append(1),r.append(t-33),2;if(t<=64)return r.append(1),r.append(t-58+15),2;if(t>=91&&t<=95)return r.append(1),r.append(t-91+22),2;if(t===96)return r.append(2),r.append(0),2;if(t<=90)return r.append(2),r.append(t-65+1),2;if(t<=127)return r.append(2),r.append(t-123+27),2;r.append("1");var i=2;return i+=this.encodeChar(t-128,r),i},e}(l_),Ga=function(){function n(){}return n.randomize253State=function(e){var t=149*e%253+1,r=KI+t;return r<=254?r:r-254},n.encodeHighLevel=function(e,t,r,i,a){t===void 0&&(t=0),r===void 0&&(r=null),i===void 0&&(i=null),a===void 0&&(a=!1);var s=new l_,o=[new f$,s,new A$,new b$,new p$,new h$],c=new x$(e);c.setSymbolShape(t),c.setSizeConstraints(r,i),e.startsWith(QI)&&e.endsWith(JI)?(c.writeCodeword(s$),c.setSkipAtEnd(2),c.pos+=QI.length):e.startsWith(ZI)&&e.endsWith(JI)&&(c.writeCodeword(o$),c.setSkipAtEnd(2),c.pos+=ZI.length);var d=ln;for(a&&(s.encodeMaximal(c),d=c.getNewEncoding(),c.resetEncoderSignal());c.hasMoreCharacters();)o[d].encode(c),c.getNewEncoding()>=0&&(d=c.getNewEncoding(),c.resetEncoderSignal());var f=c.getCodewordCount();c.updateSymbolInfo();var p=c.getSymbolInfo().getDataCapacity();f<p&&d!==ln&&d!==hi&&d!==jr&&c.writeCodeword("");var g=c.getCodewords();for(g.length()<p&&g.append(KI);g.length()<p;)g.append(this.randomize253State(g.length()+1));return c.getCodewords().toString()},n.lookAheadTest=function(e,t,r){var i=this.lookAheadTestIntern(e,t,r);if(r===Er&&i===Er){for(var a=Math.min(t+3,e.length),s=t;s<a;s++)if(!this.isNativeX12(e.charCodeAt(s)))return ln}else if(r===jr&&i===jr){for(var a=Math.min(t+4,e.length),s=t;s<a;s++)if(!this.isNativeEDIFACT(e.charCodeAt(s)))return ln}return i},n.lookAheadTestIntern=function(e,t,r){if(t>=e.length)return r;var i;r===ln?i=[0,1,1,1,1,1.25]:(i=[1,2,2,2,2,2.25],i[r]=0);for(var a=0,s=new Uint8Array(6),o=[];;){if(t+a===e.length){Rr.fill(s,0),Rr.fill(o,0);var c=this.findMinimums(i,o,It.MAX_VALUE,s),d=this.getMinimumCount(s);if(o[ln]===c)return ln;if(d===1){if(s[hi]>0)return hi;if(s[jr]>0)return jr;if(s[Di]>0)return Di;if(s[Er]>0)return Er}return ni}var f=e.charCodeAt(t+a);if(a++,this.isDigit(f)?i[ln]+=.5:this.isExtendedASCII(f)?(i[ln]=Math.ceil(i[ln]),i[ln]+=2):(i[ln]=Math.ceil(i[ln]),i[ln]++),this.isNativeC40(f)?i[ni]+=2/3:this.isExtendedASCII(f)?i[ni]+=8/3:i[ni]+=4/3,this.isNativeText(f)?i[Di]+=2/3:this.isExtendedASCII(f)?i[Di]+=8/3:i[Di]+=4/3,this.isNativeX12(f)?i[Er]+=2/3:this.isExtendedASCII(f)?i[Er]+=13/3:i[Er]+=10/3,this.isNativeEDIFACT(f)?i[jr]+=3/4:this.isExtendedASCII(f)?i[jr]+=17/4:i[jr]+=13/4,this.isSpecialB256(f)?i[hi]+=4:i[hi]++,a>=4){if(Rr.fill(s,0),Rr.fill(o,0),this.findMinimums(i,o,It.MAX_VALUE,s),o[ln]<this.min(o[hi],o[ni],o[Di],o[Er],o[jr]))return ln;if(o[hi]<o[ln]||o[hi]+1<this.min(o[ni],o[Di],o[Er],o[jr]))return hi;if(o[jr]+1<this.min(o[hi],o[ni],o[Di],o[Er],o[ln]))return jr;if(o[Di]+1<this.min(o[hi],o[ni],o[jr],o[Er],o[ln]))return Di;if(o[Er]+1<this.min(o[hi],o[ni],o[jr],o[Di],o[ln]))return Er;if(o[ni]+1<this.min(o[ln],o[hi],o[jr],o[Di])){if(o[ni]<o[Er])return ni;if(o[ni]===o[Er]){for(var p=t+a+1;p<e.length;){var g=e.charCodeAt(p);if(this.isX12TermSep(g))return Er;if(!this.isNativeX12(g))break;p++}return ni}}}}},n.min=function(e,t,r,i,a){var s=Math.min(e,Math.min(t,Math.min(r,i)));return a===void 0?s:Math.min(s,a)},n.findMinimums=function(e,t,r,i){for(var a=0;a<6;a++){var s=t[a]=Math.ceil(e[a]);r>s&&(r=s,Rr.fill(i,0)),r===s&&(i[a]=i[a]+1)}return r},n.getMinimumCount=function(e){for(var t=0,r=0;r<6;r++)t+=e[r];return t||0},n.isDigit=function(e){return e>=48&&e<=57},n.isExtendedASCII=function(e){return e>=128&&e<=255},n.isNativeC40=function(e){return e===32||e>=48&&e<=57||e>=65&&e<=90},n.isNativeText=function(e){return e===32||e>=48&&e<=57||e>=97&&e<=122},n.isNativeX12=function(e){return this.isX12TermSep(e)||e===32||e>=48&&e<=57||e>=65&&e<=90},n.isX12TermSep=function(e){return e===13||e===42||e===62},n.isNativeEDIFACT=function(e){return e>=32&&e<=94},n.isSpecialB256=function(e){return!1},n.determineConsecutiveDigitCount=function(e,t){t===void 0&&(t=0);for(var r=e.length,i=t;i<r&&this.isDigit(e.charCodeAt(i));)i++;return i-t},n.illegalCharacter=function(e){var t=It.toHexString(e.charCodeAt(0));throw t="0000".substring(0,4-t.length)+t,new Error("Illegal character: "+e+" (0x"+t+")")},n}(),t2=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},eD=function(){function n(e){this.charset=e,this.name=e.name}return n.prototype.canEncode=function(e){try{return Ra.encode(e,this.charset)!=null}catch{return!1}},n}(),E$=function(){function n(e,t,r){var i,a,s,o,c,d;this.ENCODERS=["IBM437","ISO-8859-2","ISO-8859-3","ISO-8859-4","ISO-8859-5","ISO-8859-6","ISO-8859-7","ISO-8859-8","ISO-8859-9","ISO-8859-10","ISO-8859-11","ISO-8859-13","ISO-8859-14","ISO-8859-15","ISO-8859-16","windows-1250","windows-1251","windows-1252","windows-1256","Shift_JIS"].map(function(R){return new eD(e$.forName(R))}),this.encoders=[];var f=[];f.push(new eD(t$.ISO_8859_1));for(var p=t!=null&&t.name.startsWith("UTF"),g=0;g<e.length;g++){var m=!1;try{for(var x=(i=void 0,t2(f)),b=x.next();!b.done;b=x.next()){var A=b.value,E=e.charAt(g),C=E.charCodeAt(0);if(C===r||A.canEncode(E)){m=!0;break}}}catch(R){i={error:R}}finally{try{b&&!b.done&&(a=x.return)&&a.call(x)}finally{if(i)throw i.error}}if(!m)try{for(var T=(s=void 0,t2(this.ENCODERS)),D=T.next();!D.done;D=T.next()){var A=D.value;if(A.canEncode(e.charAt(g))){f.push(A),m=!0;break}}}catch(R){s={error:R}}finally{try{D&&!D.done&&(o=T.return)&&o.call(T)}finally{if(s)throw s.error}}m||(p=!0)}if(f.length===1&&!p)this.encoders=[f[0]];else{this.encoders=[];var k=0;try{for(var B=t2(f),O=B.next();!O.done;O=B.next()){var A=O.value;this.encoders[k++]=A}}catch(R){c={error:R}}finally{try{O&&!O.done&&(d=B.return)&&d.call(B)}finally{if(c)throw c.error}}}var I=-1;if(t!=null){for(var g=0;g<this.encoders.length;g++)if(this.encoders[g]!=null&&t.name===this.encoders[g].name){I=g;break}}this.priorityEncoderIndex=I}return n.prototype.length=function(){return this.encoders.length},n.prototype.getCharsetName=function(e){if(!(e<this.length()))throw new Error("index must be less than length");return this.encoders[e].name},n.prototype.getCharset=function(e){if(!(e<this.length()))throw new Error("index must be less than length");return this.encoders[e].charset},n.prototype.getECIValue=function(e){return this.encoders[e].charset.getValueIdentifier()},n.prototype.getPriorityEncoderIndex=function(){return this.priorityEncoderIndex},n.prototype.canEncode=function(e,t){if(!(t<this.length()))throw new Error("index must be less than length");return!0},n.prototype.encode=function(e,t){if(!(t<this.length()))throw new Error("index must be less than length");return Ra.encode(jt.getCharAt(e),this.encoders[t].name)},n}(),S$=3,C$=function(){function n(e,t,r){this.fnc1=r;var i=new E$(e,t,r);if(i.length()===1)for(var a=0;a<this.bytes.length;a++){var s=e.charAt(a).charCodeAt(0);this.bytes[a]=s===r?1e3:s}else this.bytes=this.encodeMinimally(e,i,r)}return n.prototype.getFNC1Character=function(){return this.fnc1},n.prototype.length=function(){return this.bytes.length},n.prototype.haveNCharacters=function(e,t){if(e+t-1>=this.bytes.length)return!1;for(var r=0;r<t;r++)if(this.isECI(e+r))return!1;return!0},n.prototype.charAt=function(e){if(e<0||e>=this.length())throw new Error(""+e);if(this.isECI(e))throw new Error("value at "+e+" is not a character but an ECI");return this.isFNC1(e)?this.fnc1:this.bytes[e]},n.prototype.subSequence=function(e,t){if(e<0||e>t||t>this.length())throw new Error(""+e);for(var r=new Et,i=e;i<t;i++){if(this.isECI(i))throw new Error("value at "+i+" is not a character but an ECI");r.append(this.charAt(i))}return r.toString()},n.prototype.isECI=function(e){if(e<0||e>=this.length())throw new Error(""+e);return this.bytes[e]>255&&this.bytes[e]<=999},n.prototype.isFNC1=function(e){if(e<0||e>=this.length())throw new Error(""+e);return this.bytes[e]===1e3},n.prototype.getECIValue=function(e){if(e<0||e>=this.length())throw new Error(""+e);if(!this.isECI(e))throw new Error("value at "+e+" is not an ECI but a character");return this.bytes[e]-256},n.prototype.addEdge=function(e,t,r){(e[t][r.encoderIndex]==null||e[t][r.encoderIndex].cachedTotalSize>r.cachedTotalSize)&&(e[t][r.encoderIndex]=r)},n.prototype.addEdges=function(e,t,r,i,a,s){var o=e.charAt(i).charCodeAt(0),c=0,d=t.length();t.getPriorityEncoderIndex()>=0&&(o===s||t.canEncode(o,t.getPriorityEncoderIndex()))&&(c=t.getPriorityEncoderIndex(),d=c+1);for(var f=c;f<d;f++)(o===s||t.canEncode(o,f))&&this.addEdge(r,i+1,new tD(o,t,f,a,s))},n.prototype.encodeMinimally=function(e,t,r){var i=e.length,a=new tD[i+1][t.length()];this.addEdges(e,t,a,0,null,r);for(var s=1;s<=i;s++){for(var o=0;o<t.length();o++)a[s][o]!=null&&s<i&&this.addEdges(e,t,a,s,a[s][o],r);for(var o=0;o<t.length();o++)a[s-1][o]=null}for(var c=-1,d=It.MAX_VALUE,o=0;o<t.length();o++)if(a[i][o]!=null){var f=a[i][o];f.cachedTotalSize<d&&(d=f.cachedTotalSize,c=o)}if(c<0)throw new Error('Failed to encode "'+e+'"');for(var p=[],g=a[i][c];g!=null;){if(g.isFNC1())p.unshift(1e3);else for(var m=t.encode(g.c,g.encoderIndex),s=m.length-1;s>=0;s--)p.unshift(m[s]&255);var x=g.previous===null?0:g.previous.encoderIndex;x!==g.encoderIndex&&p.unshift(256+t.getECIValue(g.encoderIndex)),g=g.previous}for(var b=[],s=0;s<b.length;s++)b[s]=p[s];return b},n}(),tD=function(){function n(e,t,r,i,a){this.c=e,this.encoderSet=t,this.encoderIndex=r,this.previous=i,this.fnc1=a,this.c=e===a?1e3:e;var s=this.isFNC1()?1:t.encode(e,r).length,o=i===null?0:i.encoderIndex;o!==r&&(s+=S$),i!=null&&(s+=i.cachedTotalSize),this.cachedTotalSize=s}return n.prototype.isFNC1=function(){return this.c===1e3},n}(),T$=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();var nD;(function(n){n[n.ASCII=0]="ASCII",n[n.C40=1]="C40",n[n.TEXT=2]="TEXT",n[n.X12=3]="X12",n[n.EDF=4]="EDF",n[n.B256=5]="B256"})(nD||(nD={}));(function(n){T$(e,n);function e(t,r,i,a,s){var o=n.call(this,t,r,i)||this;return o.shape=a,o.macroId=s,o}return e.prototype.getMacroId=function(){return this.macroId},e.prototype.getShapeHint=function(){return this.shape},e})(C$);var I$=function(){function n(){}return n.prototype.isCompact=function(){return this.compact},n.prototype.setCompact=function(e){this.compact=e},n.prototype.getSize=function(){return this.size},n.prototype.setSize=function(e){this.size=e},n.prototype.getLayers=function(){return this.layers},n.prototype.setLayers=function(e){this.layers=e},n.prototype.getCodeWords=function(){return this.codeWords},n.prototype.setCodeWords=function(e){this.codeWords=e},n.prototype.getMatrix=function(){return this.matrix},n.prototype.setMatrix=function(e){this.matrix=e},n}(),rD=function(){function n(){}return n.singletonList=function(e){return[e]},n.min=function(e,t){return e.sort(t)[0]},n}(),D$=function(){function n(e){this.previous=e}return n.prototype.getPrevious=function(){return this.previous},n}(),R$=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),c_=function(n){R$(e,n);function e(t,r,i){var a=n.call(this,t)||this;return a.value=r,a.bitCount=i,a}return e.prototype.appendTo=function(t,r){t.appendBits(this.value,this.bitCount)},e.prototype.add=function(t,r){return new e(this,t,r)},e.prototype.addBinaryShift=function(t,r){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new e(this,t,r)},e.prototype.toString=function(){var t=this.value&(1<<this.bitCount)-1;return t|=1<<this.bitCount,"<"+It.toBinaryString(t|1<<this.bitCount).substring(1)+">"},e}(D$),M$=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),O$=function(n){M$(e,n);function e(t,r,i){var a=n.call(this,t,0,0)||this;return a.binaryShiftStart=r,a.binaryShiftByteCount=i,a}return e.prototype.appendTo=function(t,r){for(var i=0;i<this.binaryShiftByteCount;i++)(i===0||i===31&&this.binaryShiftByteCount<=62)&&(t.appendBits(31,5),this.binaryShiftByteCount>62?t.appendBits(this.binaryShiftByteCount-31,16):i===0?t.appendBits(Math.min(this.binaryShiftByteCount,31),5):t.appendBits(this.binaryShiftByteCount-31,5)),t.appendBits(r[this.binaryShiftStart+i],8)},e.prototype.addBinaryShift=function(t,r){return new e(this,t,r)},e.prototype.toString=function(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"},e}(c_);function P$(n,e,t){return new O$(n,e,t)}function Dh(n,e,t){return new c_(n,e,t)}var k$=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],Pl=0,Qm=1,Ta=2,aO=3,Ts=4,N$=new c_(null,0,0),n2=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])],L$=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};function B$(n){var e,t;try{for(var r=L$(n),i=r.next();!i.done;i=r.next()){var a=i.value;Rr.fill(a,-1)}}catch(s){e={error:s}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}return n[Pl][Ts]=0,n[Qm][Ts]=0,n[Qm][Pl]=28,n[aO][Ts]=0,n[Ta][Ts]=0,n[Ta][Pl]=15,n}var sO=B$(Rr.createInt32Array(6,6)),F$=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},V$=function(){function n(e,t,r,i){this.token=e,this.mode=t,this.binaryShiftByteCount=r,this.bitCount=i}return n.prototype.getMode=function(){return this.mode},n.prototype.getToken=function(){return this.token},n.prototype.getBinaryShiftByteCount=function(){return this.binaryShiftByteCount},n.prototype.getBitCount=function(){return this.bitCount},n.prototype.latchAndAppend=function(e,t){var r=this.bitCount,i=this.token;if(e!==this.mode){var a=n2[this.mode][e];i=Dh(i,a&65535,a>>16),r+=a>>16}var s=e===Ta?4:5;return i=Dh(i,t,s),new n(i,e,0,r+s)},n.prototype.shiftAndAppend=function(e,t){var r=this.token,i=this.mode===Ta?4:5;return r=Dh(r,sO[this.mode][e],i),r=Dh(r,t,5),new n(r,this.mode,0,this.bitCount+i+5)},n.prototype.addBinaryShiftChar=function(e){var t=this.token,r=this.mode,i=this.bitCount;if(this.mode===Ts||this.mode===Ta){var a=n2[r][Pl];t=Dh(t,a&65535,a>>16),i+=a>>16,r=Pl}var s=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,o=new n(t,r,this.binaryShiftByteCount+1,i+s);return o.binaryShiftByteCount===2078&&(o=o.endBinaryShift(e+1)),o},n.prototype.endBinaryShift=function(e){if(this.binaryShiftByteCount===0)return this;var t=this.token;return t=P$(t,e-this.binaryShiftByteCount,this.binaryShiftByteCount),new n(t,this.mode,0,this.bitCount)},n.prototype.isBetterThanOrEqualTo=function(e){var t=this.bitCount+(n2[this.mode][e.mode]>>16);return this.binaryShiftByteCount<e.binaryShiftByteCount?t+=n.calculateBinaryShiftCost(e)-n.calculateBinaryShiftCost(this):this.binaryShiftByteCount>e.binaryShiftByteCount&&e.binaryShiftByteCount>0&&(t+=10),t<=e.bitCount},n.prototype.toBitArray=function(e){for(var t,r,i=[],a=this.endBinaryShift(e.length).token;a!==null;a=a.getPrevious())i.unshift(a);var s=new Gr;try{for(var o=F$(i),c=o.next();!c.done;c=o.next()){var d=c.value;d.appendTo(s,e)}}catch(f){t={error:f}}finally{try{c&&!c.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}return s},n.prototype.toString=function(){return jt.format("%s bits=%d bytes=%d",k$[this.mode],this.bitCount,this.binaryShiftByteCount)},n.calculateBinaryShiftCost=function(e){return e.binaryShiftByteCount>62?21:e.binaryShiftByteCount>31?20:e.binaryShiftByteCount>0?10:0},n.INITIAL_STATE=new n(N$,Pl,0,0),n}();function j$(n){var e=jt.getCharCode(" "),t=jt.getCharCode("."),r=jt.getCharCode(",");n[Pl][e]=1;for(var i=jt.getCharCode("Z"),a=jt.getCharCode("A"),s=a;s<=i;s++)n[Pl][s]=s-a+2;n[Qm][e]=1;for(var o=jt.getCharCode("z"),c=jt.getCharCode("a"),s=c;s<=o;s++)n[Qm][s]=s-c+2;n[Ta][e]=1;for(var d=jt.getCharCode("9"),f=jt.getCharCode("0"),s=f;s<=d;s++)n[Ta][s]=s-f+2;n[Ta][r]=12,n[Ta][t]=13;for(var p=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""],g=0;g<p.length;g++)n[aO][jt.getCharCode(p[g])]=g;for(var m=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"],g=0;g<m.length;g++)jt.getCharCode(m[g])>0&&(n[Ts][jt.getCharCode(m[g])]=g);return n}var r2=j$(Rr.createInt32Array(5,256)),$g=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},U$=function(){function n(e){this.text=e}return n.prototype.encode=function(){for(var e=jt.getCharCode(" "),t=jt.getCharCode(`
`),r=rD.singletonList(V$.INITIAL_STATE),i=0;i<this.text.length;i++){var a=void 0,s=i+1<this.text.length?this.text[i+1]:0;switch(this.text[i]){case jt.getCharCode("\r"):a=s===t?2:0;break;case jt.getCharCode("."):a=s===e?3:0;break;case jt.getCharCode(","):a=s===e?4:0;break;case jt.getCharCode(":"):a=s===e?5:0;break;default:a=0}a>0?(r=n.updateStateListForPair(r,i,a),i++):r=this.updateStateListForChar(r,i)}var o=rD.min(r,function(c,d){return c.getBitCount()-d.getBitCount()});return o.toBitArray(this.text)},n.prototype.updateStateListForChar=function(e,t){var r,i,a=[];try{for(var s=$g(e),o=s.next();!o.done;o=s.next()){var c=o.value;this.updateStateForChar(c,t,a)}}catch(d){r={error:d}}finally{try{o&&!o.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}return n.simplifyStates(a)},n.prototype.updateStateForChar=function(e,t,r){for(var i=this.text[t]&255,a=r2[e.getMode()][i]>0,s=null,o=0;o<=Ts;o++){var c=r2[o][i];if(c>0){if(s==null&&(s=e.endBinaryShift(t)),!a||o===e.getMode()||o===Ta){var d=s.latchAndAppend(o,c);r.push(d)}if(!a&&sO[e.getMode()][o]>=0){var f=s.shiftAndAppend(o,c);r.push(f)}}}if(e.getBinaryShiftByteCount()>0||r2[e.getMode()][i]===0){var p=e.addBinaryShiftChar(t);r.push(p)}},n.updateStateListForPair=function(e,t,r){var i,a,s=[];try{for(var o=$g(e),c=o.next();!c.done;c=o.next()){var d=c.value;this.updateStateForPair(d,t,r,s)}}catch(f){i={error:f}}finally{try{c&&!c.done&&(a=o.return)&&a.call(o)}finally{if(i)throw i.error}}return this.simplifyStates(s)},n.updateStateForPair=function(e,t,r,i){var a=e.endBinaryShift(t);if(i.push(a.latchAndAppend(Ts,r)),e.getMode()!==Ts&&i.push(a.shiftAndAppend(Ts,r)),r===3||r===4){var s=a.latchAndAppend(Ta,16-r).latchAndAppend(Ta,1);i.push(s)}if(e.getBinaryShiftByteCount()>0){var o=e.addBinaryShiftChar(t).addBinaryShiftChar(t+1);i.push(o)}},n.simplifyStates=function(e){var t,r,i,a,s=[];try{for(var o=$g(e),c=o.next();!c.done;c=o.next()){var d=c.value,f=!0,p=function(A){if(A.isBetterThanOrEqualTo(d))return f=!1,"break";d.isBetterThanOrEqualTo(A)&&(s=s.filter(function(E){return E!==A}))};try{for(var g=(i=void 0,$g(s)),m=g.next();!m.done;m=g.next()){var x=m.value,b=p(x);if(b==="break")break}}catch(A){i={error:A}}finally{try{m&&!m.done&&(a=g.return)&&a.call(g)}finally{if(i)throw i.error}}f&&s.push(d)}}catch(A){t={error:A}}finally{try{c&&!c.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}return s},n}(),H$=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};(function(){function n(){}return n.encodeBytes=function(e){return n.encode(e,n.DEFAULT_EC_PERCENT,n.DEFAULT_AZTEC_LAYERS)},n.encode=function(e,t,r){var i=new U$(e).encode(),a=It.truncDivision(i.getSize()*t,100)+11,s=i.getSize()+a,o,c,d,f,p;if(r!==n.DEFAULT_AZTEC_LAYERS){if(o=r<0,c=Math.abs(r),c>(o?n.MAX_NB_BITS_COMPACT:n.MAX_NB_BITS))throw new it(jt.format("Illegal value %s for layers",r));d=n.totalBitsInLayer(c,o),f=n.WORD_SIZE[c];var g=d-d%f;if(p=n.stuffBits(i,f),p.getSize()+a>g)throw new it("Data to large for user specified layer");if(o&&p.getSize()>f*64)throw new it("Data to large for user specified layer")}else{f=0,p=null;for(var m=0;;m++){if(m>n.MAX_NB_BITS)throw new it("Data too large for an Aztec code");if(o=m<=3,c=o?m+1:m,d=n.totalBitsInLayer(c,o),!(s>d)){(p==null||f!==n.WORD_SIZE[c])&&(f=n.WORD_SIZE[c],p=n.stuffBits(i,f));var g=d-d%f;if(!(o&&p.getSize()>f*64)&&p.getSize()+a<=g)break}}}var x=n.generateCheckWords(p,d,f),b=p.getSize()/f,A=n.generateModeMessage(o,c,b),E=(o?11:14)+c*4,C=new Int32Array(E),T;if(o){T=E;for(var m=0;m<C.length;m++)C[m]=m}else{T=E+1+2*It.truncDivision(It.truncDivision(E,2)-1,15);for(var D=It.truncDivision(E,2),k=It.truncDivision(T,2),m=0;m<D;m++){var B=m+It.truncDivision(m,15);C[D-m-1]=k-B-1,C[D+m]=k+B+1}}for(var O=new Us(T),m=0,I=0;m<c;m++){for(var R=(c-m)*4+(o?9:12),F=0;F<R;F++)for(var N=F*2,P=0;P<2;P++)x.get(I+N+P)&&O.set(C[m*2+P],C[m*2+F]),x.get(I+R*2+N+P)&&O.set(C[m*2+F],C[E-1-m*2-P]),x.get(I+R*4+N+P)&&O.set(C[E-1-m*2-P],C[E-1-m*2-F]),x.get(I+R*6+N+P)&&O.set(C[E-1-m*2-F],C[m*2+P]);I+=R*8}if(n.drawModeMessage(O,o,T,A),o)n.drawBullsEye(O,It.truncDivision(T,2),5);else{n.drawBullsEye(O,It.truncDivision(T,2),7);for(var m=0,F=0;m<It.truncDivision(E,2)-1;m+=15,F+=16)for(var P=It.truncDivision(T,2)&1;P<T;P+=2)O.set(It.truncDivision(T,2)-F,P),O.set(It.truncDivision(T,2)+F,P),O.set(P,It.truncDivision(T,2)-F),O.set(P,It.truncDivision(T,2)+F)}var V=new I$;return V.setCompact(o),V.setSize(T),V.setLayers(c),V.setCodeWords(b),V.setMatrix(O),V},n.drawBullsEye=function(e,t,r){for(var i=0;i<r;i+=2)for(var a=t-i;a<=t+i;a++)e.set(a,t-i),e.set(a,t+i),e.set(t-i,a),e.set(t+i,a);e.set(t-r,t-r),e.set(t-r+1,t-r),e.set(t-r,t-r+1),e.set(t+r,t-r),e.set(t+r,t-r+1),e.set(t+r,t+r-1)},n.generateModeMessage=function(e,t,r){var i=new Gr;return e?(i.appendBits(t-1,2),i.appendBits(r-1,6),i=n.generateCheckWords(i,28,4)):(i.appendBits(t-1,5),i.appendBits(r-1,11),i=n.generateCheckWords(i,40,4)),i},n.drawModeMessage=function(e,t,r,i){var a=It.truncDivision(r,2);if(t)for(var s=0;s<7;s++){var o=a-3+s;i.get(s)&&e.set(o,a-5),i.get(s+7)&&e.set(a+5,o),i.get(20-s)&&e.set(o,a+5),i.get(27-s)&&e.set(a-5,o)}else for(var s=0;s<10;s++){var o=a-5+s+It.truncDivision(s,5);i.get(s)&&e.set(o,a-7),i.get(s+10)&&e.set(a+7,o),i.get(29-s)&&e.set(o,a+7),i.get(39-s)&&e.set(a-7,o)}},n.generateCheckWords=function(e,t,r){var i,a,s=e.getSize()/r,o=new rO(n.getGF(r)),c=It.truncDivision(t,r),d=n.bitsToWords(e,r,c);o.encode(d,c-s);var f=t%r,p=new Gr;p.appendBits(0,f);try{for(var g=H$(Array.from(d)),m=g.next();!m.done;m=g.next()){var x=m.value;p.appendBits(x,r)}}catch(b){i={error:b}}finally{try{m&&!m.done&&(a=g.return)&&a.call(g)}finally{if(i)throw i.error}}return p},n.bitsToWords=function(e,t,r){var i=new Int32Array(r),a,s;for(a=0,s=e.getSize()/t;a<s;a++){for(var o=0,c=0;c<t;c++)o|=e.get(a*t+c)?1<<t-c-1:0;i[a]=o}return i},n.getGF=function(e){switch(e){case 4:return Ui.AZTEC_PARAM;case 6:return Ui.AZTEC_DATA_6;case 8:return Ui.AZTEC_DATA_8;case 10:return Ui.AZTEC_DATA_10;case 12:return Ui.AZTEC_DATA_12;default:throw new it("Unsupported word size "+e)}},n.stuffBits=function(e,t){for(var r=new Gr,i=e.getSize(),a=(1<<t)-2,s=0;s<i;s+=t){for(var o=0,c=0;c<t;c++)(s+c>=i||e.get(s+c))&&(o|=1<<t-1-c);(o&a)===a?(r.appendBits(o&a,t),s--):(o&a)===0?(r.appendBits(o|1,t),s--):r.appendBits(o,t)}return r},n.totalBitsInLayer=function(e,t){return((t?88:112)+16*e)*e},n.DEFAULT_EC_PERCENT=33,n.DEFAULT_AZTEC_LAYERS=0,n.MAX_NB_BITS=32,n.MAX_NB_BITS_COMPACT=4,n.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]),n})();const z$=({onDetected:n,onError:e})=>{const t=M.useRef(null),r=M.useRef(new $z),i=M.useRef(!1);return M.useEffect(()=>{const a=t.current;let s;const o=()=>{a.play().catch(f=>console.error("play() failed:",f))},c=()=>{a.videoWidth===0||a.videoHeight===0||i.current||(i.current=!0,r.current.decodeFromStream(s,a,(f,p)=>{f&&(r.current.reset(),n(f.getText())),p&&!(p instanceof _e)&&(r.current.reset(),e(p.message||""))}))};return(async()=>{if(a)try{s=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment",aspectRatio:.5}}),a.srcObject=s,a.muted=!0,a.addEventListener("loadedmetadata",o),a.addEventListener("playing",c)}catch(f){const p=`
: ${f&&f.message?f.message:""}`;console.log("[BarcodeScanner] onError",p),e(p)}})(),()=>{if(r.current.reset(),i.current=!1,a){a.removeEventListener("loadedmetadata",o),a.removeEventListener("playing",c);const f=a.srcObject;f&&f.getTracks().forEach(g=>g.stop()),a.srcObject=null}}},[n,e]),v.jsx(ne,{"data-testid":"barcode-scanner-container",children:v.jsx("video",{ref:t,style:{width:"100%",height:"auto",border:"1px solid gray"},autoPlay:!0,muted:!0,playsInline:!0,"data-testid":"barcode-scanner-video"})})},$$={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"90%",maxWidth:400,bgcolor:"background.paper",border:"2px solid #000",boxShadow:24,p:4},G$=({onScan:n,onScanError:e})=>{const[t,r]=M.useState(!1),{setGlobalError:i}=M.useContext(Wr)||{setGlobalError:()=>{}},a=o=>{n(o),r(!1)},s=o=>{i(o),r(!1)};return v.jsxs(v.Fragment,{children:[v.jsx($e,{variant:"outlined",startIcon:v.jsx(DN,{}),onClick:()=>r(!0),sx:{mt:2,mb:2},fullWidth:!0,"data-testid":"barcode-scan-button",children:""}),v.jsx(RN,{open:t,onClose:()=>r(!1),"aria-labelledby":"scanner-modal-title","data-testid":"barcode-scan-modal",children:v.jsxs(ne,{sx:$$,children:[v.jsxs(ne,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[v.jsx(te,{id:"scanner-modal-title",variant:"h6",component:"h2",children:""}),v.jsx($r,{onClick:()=>r(!1),children:v.jsx(te,{variant:"h6",children:""})})]}),v.jsx(z$,{onDetected:a,onError:s,"data-testid":"barcode-scanner"})]})})]})};function W$(){const[n,e]=M.useState(""),t=Hl(),r=a=>{console.log("[BookAdd] handleScanDetected :",a),e(a)},i=a=>{t(`/book/${a}`)};return v.jsxs(ne,{sx:{maxWidth:500,mx:"auto",pb:{xs:"72px",sm:"80px"}},children:[v.jsx(iy,{title:"",subtitle:"","data-testid":"book-add-header"}),v.jsxs(ne,{sx:{px:{xs:1.5,sm:2,md:0}},children:[v.jsx(G$,{onScan:r,onScanError:a=>console.error(a)}),v.jsx(rU,{isbn:n,onBookAdded:i})]})]})}const yl={NONE:0,ONE:1,TWO:2,THREE:3,FOUR:4,FIVE:5},na=yl.NONE,Y$=n=>n!=null&&n>yl.NONE,Zh=n=>(n==null?void 0:n.rating)||na,iD=n=>Y$(n)?n:0,Zm=n=>{const e={[yl.NONE]:"",[yl.ONE]:"",[yl.TWO]:"",[yl.THREE]:"",[yl.FOUR]:"",[yl.FIVE]:""};return e[n]||e[na]},u_="lastSearchResults",d_="lastSearchTimestamp",q$=1800*1e3,X$=n=>{try{sessionStorage.setItem(u_,JSON.stringify(n)),sessionStorage.setItem(d_,Date.now().toString()),console.log("[searchStorage] Saved search results to sessionStorage:",n.length)}catch(e){console.warn("[searchStorage] Failed to save search results to sessionStorage:",e)}},K$=()=>{try{const n=sessionStorage.getItem(u_),e=sessionStorage.getItem(d_);if(!n||!e)return null;if(Date.now()-parseInt(e,10)>=q$)return f_(),console.log("[searchStorage] Expired search results removed"),null;const i=JSON.parse(n);return console.log("[searchStorage] Restored search results from sessionStorage:",i.length),i}catch(n){return console.warn("[searchStorage] Failed to restore search results from sessionStorage:",n),null}},f_=()=>{sessionStorage.removeItem(u_),sessionStorage.removeItem(d_)},h_=n=>{const{user:e}=Qn(),t=M.useContext(Wr),r=(t==null?void 0:t.setGlobalError)||(()=>{}),[i,a]=M.useState([]),[s,o]=M.useState(!0),[c,d]=M.useState(null),{saveTagsToHistory:f}=js("memo",e),p=M.useCallback(async()=>{if(!e||!n){a([]),o(!1);return}try{o(!0),d(null);const A=$n(wt,"books",n,"memos"),E=Ln(A,ey("createdAt","desc")),D=(await Un(E)).docs.map(k=>({id:k.id,...k.data(),rating:k.data().rating||na})).sort((k,B)=>{var R,F,N,P;const O=iD(k.rating),I=iD(B.rating);return O!==I?I-O:new Date(((F=(R=B.createdAt)==null?void 0:R.toDate)==null?void 0:F.call(R))||B.createdAt||0)-new Date(((P=(N=k.createdAt)==null?void 0:N.toDate)==null?void 0:P.call(N))||k.createdAt||0)});a(D)}catch(A){console.error("Error fetching memos:",A),r(""),d("")}finally{o(!1)}},[e==null?void 0:e.uid,n]),g=M.useCallback(async A=>{if(!e||!n)throw new Error("ID");try{const E=$n(wt,"books",n,"memos"),C=await A0(E,{...A,userId:e.uid,createdAt:Ir(),updatedAt:Ir()}),T={id:C.id,...A,userId:e.uid,createdAt:new Date,updatedAt:new Date};return a(D=>[T,...D]),C.id}catch(E){throw console.error("Error adding memo:",E),r(""),E}},[e==null?void 0:e.uid,n]),m=M.useCallback(async(A,E)=>{if(!e||!n||!A)throw new Error("IDID");try{const C=ji(wt,"books",n,"memos",A);return await ry(C,{...E,userId:e.uid,updatedAt:Ir()}),a(T=>T.map(k=>k.id===A?{...k,...E,userId:e.uid,updatedAt:new Date}:k)),!0}catch(C){throw console.error("Error updating memo:",C),r(""),C}},[e==null?void 0:e.uid,n]),x=M.useCallback(async A=>{if(!e||!n||!A)throw new Error("IDID");try{const E=ji(wt,"books",n,"memos",A);return await UM(E),a(C=>C.filter(T=>T.id!==A)),!0}catch(E){throw console.error("Error deleting memo:",E),r(""),E}},[e==null?void 0:e.uid,n]),b=M.useCallback(async({memoId:A,targetBookId:E})=>{var C;if(!e||!n)throw new Error("ID");if(!A)throw new Error("ID");if(!E)throw new Error("ID");if(E===n)throw new Error("");try{const T=await Pj(wt,async D=>{const k=ji(wt,"books",n,"memos",A),B=await D.get(k);if(!B.exists())throw new Error("");const O=B.data(),I=ji(wt,"books",E);if(!(await D.get(I)).exists())throw new Error("");const F=$n(wt,"books",E,"memos"),N=ji(F);D.set(N,{...O,userId:e.uid,createdAt:O.createdAt||Ir(),updatedAt:Ir()}),D.delete(k);const P=ji(wt,"books",n);return D.update(P,{updatedAt:Ir()}),D.update(I,{updatedAt:Ir()}),{memoData:O,newMemoId:N.id}});return a(D=>D.filter(k=>k.id!==A)),Array.isArray((C=T.memoData)==null?void 0:C.tags)&&T.memoData.tags.length>0&&await f(T.memoData.tags),f_(),T.newMemoId}catch(T){throw console.error("Error moving memo:",T),r(""),T}},[e==null?void 0:e.uid,n,f,r]);return M.useEffect(()=>{p()},[p]),{memos:i,loading:s,error:c,fetchMemos:p,addMemo:g,updateMemo:m,deleteMemo:x,moveMemo:b}},aD=n=>{try{const e=n&&typeof n.toDate=="function"?n.toDate():n instanceof Date?n:null;if(!e)return"";const t=e.getFullYear(),r=e.getMonth()+1,i=e.getDate();return`${t}/${r}/${i}`}catch{return""}},Q$=({memo:n,onEdit:e,onDelete:t,onClick:r})=>{const i=M1("(max-width:600px)"),[a,s]=M.useState(!1),d=(n.text?n.text.split(`
`):[]).slice(0,2).join(`
`),f=n.createdAt&&n.createdAt.toDate?n.createdAt.toDate():null,p=x=>{x&&x.stopPropagation(),s(!1),typeof e=="function"&&e(n,!0)},g=x=>{x&&x.stopPropagation(),s(!1),t(n.id)},m=f5({onSwipedLeft:()=>s(!0),onSwipedRight:()=>s(!1),preventDefaultTouchmoveEvent:!0,trackMouse:!0});return i?v.jsxs(ne,{position:"relative",...m,"data-allow-local-swipe":!0,sx:{mb:2},children:[v.jsxs(kn,{"data-testid":"memo-card",sx:{position:"relative",maxWidth:"100%",mx:"auto",cursor:r?"pointer":"default",backgroundColor:"rgba(255, 255, 255, 0.75)",backdropFilter:"blur(20px) saturate(180%)",border:"2px solid rgba(139, 69, 19, 0.2)",borderRadius:3,boxShadow:`
              0 8px 32px rgba(0, 0, 0, 0.12),
              0 2px 8px rgba(0, 0, 0, 0.08),
              inset 0 1px 0 rgba(255, 255, 255, 0.5)
            `,overflow:"visible",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",transform:a?"translateX(-100px)":"none","&:hover":{transform:a?"translateX(-100px)":"translateY(-2px)",boxShadow:`
                0 12px 40px rgba(0, 0, 0, 0.16),
                0 4px 12px rgba(0, 0, 0, 0.12),
                inset 0 1px 0 rgba(255, 255, 255, 0.6)
              `,borderColor:"rgba(139, 69, 19, 0.3)"},"&::before":{content:'""',position:"absolute",top:8,left:8,right:8,bottom:8,border:"1px solid rgba(139, 69, 19, 0.1)",borderRadius:2,pointerEvents:"none",zIndex:0},"&::after":{content:'""',position:"absolute",top:0,left:"50%",width:1,height:"100%",background:"linear-gradient(to bottom, transparent, rgba(139, 69, 19, 0.1), transparent)",pointerEvents:"none",zIndex:0}},onClick:r?()=>r(n,!1):void 0,children:[v.jsx(Ss,{position:"top-left",size:20}),v.jsx(Ss,{position:"top-right",size:20}),v.jsxs(Nn,{sx:{pb:.5,minHeight:48,maxHeight:80,overflow:"hidden",position:"relative",zIndex:1},children:[v.jsx(te,{variant:"body1",sx:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",lineHeight:1.2},children:d}),n.comment&&v.jsx(te,{variant:"body2",color:"text.secondary",sx:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",lineHeight:1.2,mt:.25},children:n.comment}),Zh(n)>0&&v.jsx(Ud,{value:Zh(n),readOnly:!0,size:"small",sx:{mt:.25,mb:.25}})]}),v.jsx(NC,{sx:{justifyContent:"space-between",alignItems:"center",py:0},children:v.jsxs(Ls,{direction:"row",spacing:1,alignItems:"center",children:[n.page&&v.jsxs(te,{variant:"caption",children:["p.",n.page]}),f&&v.jsx(te,{variant:"caption",color:"text.secondary",children:aD(f)}),Array.isArray(n.tags)&&n.tags.map((x,b)=>v.jsx(dn,{label:x,size:"small",color:"secondary"},b))]})})]}),a&&v.jsxs(ne,{position:"absolute",top:0,right:0,height:"100%",display:"flex",flexDirection:"column",justifyContent:"center",zIndex:2,sx:{p:1,gap:1},children:[v.jsx($r,{onClick:p,sx:{bgcolor:"primary.main",color:"white",mb:1},size:"large",children:v.jsx(Sm,{})}),v.jsx($r,{onClick:g,sx:{bgcolor:"error.main",color:"white"},size:"large",children:v.jsx(Em,{})})]})]}):v.jsxs(kn,{"data-testid":"memo-card",sx:{position:"relative",maxWidth:"100%",mx:"auto",cursor:r?"pointer":"default",backgroundColor:"rgba(255, 255, 255, 0.75)",backdropFilter:"blur(20px) saturate(180%)",border:"2px solid rgba(139, 69, 19, 0.2)",borderRadius:3,boxShadow:`
          0 8px 32px rgba(0, 0, 0, 0.12),
          0 2px 8px rgba(0, 0, 0, 0.08),
          inset 0 1px 0 rgba(255, 255, 255, 0.5)
        `,overflow:"visible",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)","&:hover":{transform:"translateY(-4px)",boxShadow:`
            0 12px 40px rgba(0, 0, 0, 0.16),
            0 4px 12px rgba(0, 0, 0, 0.12),
            inset 0 1px 0 rgba(255, 255, 255, 0.6)
          `,borderColor:"rgba(139, 69, 19, 0.3)"},"&::before":{content:'""',position:"absolute",top:8,left:8,right:8,bottom:8,border:"1px solid rgba(139, 69, 19, 0.1)",borderRadius:2,pointerEvents:"none",zIndex:0},"&::after":{content:'""',position:"absolute",top:0,left:"50%",width:1,height:"100%",background:"linear-gradient(to bottom, transparent, rgba(139, 69, 19, 0.1), transparent)",pointerEvents:"none",zIndex:0}},onClick:r?()=>r(n,!1):void 0,children:[v.jsx(Ss,{position:"top-left",size:20}),v.jsx(Ss,{position:"top-right",size:20}),v.jsxs(Nn,{sx:{pb:1,minHeight:{xs:48,sm:64},maxHeight:{xs:72,sm:88},overflow:"hidden",position:"relative",zIndex:1},children:[v.jsx(te,{variant:"body1",sx:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:d}),n.comment&&v.jsx(te,{variant:"body2",color:"text.secondary",sx:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:n.comment}),Zh(n)>0&&v.jsx(Ud,{value:Zh(n),readOnly:!0,size:"small",sx:{mt:.5}})]}),v.jsxs(NC,{sx:{justifyContent:"space-between",alignItems:"center",py:0},children:[v.jsxs(Ls,{direction:"row",spacing:1,alignItems:"center",children:[n.page&&v.jsxs(te,{variant:"caption",children:["p.",n.page]}),f&&v.jsx(te,{variant:"caption",color:"text.secondary",children:aD(f)}),Array.isArray(n.tags)&&n.tags.map((x,b)=>v.jsx(dn,{label:x,size:"small",color:"secondary"},b))]}),v.jsxs(ne,{sx:{display:{xs:"none",sm:"flex"}},children:[v.jsx($r,{"aria-label":"edit",onClick:p,size:"small","data-testid":"memo-edit-button",children:v.jsx(Sm,{fontSize:"small"})}),v.jsx($r,{"aria-label":"delete",onClick:g,size:"small","data-testid":"memo-delete-button",children:v.jsx(Em,{fontSize:"small"})})]})]})]})},Z$=()=>{const{user:n}=Qn(),e=M.useContext(Wr),t=(e==null?void 0:e.setGlobalError)||(()=>{}),[r,i]=M.useState([]),[a,s]=M.useState(!1),[o,c]=M.useState(null),d=M.useCallback(async()=>{if(!(n!=null&&n.uid)){i([]),s(!1);return}try{s(!0),c(null);const p=Ln($n(wt,"books"),vn("userId","==",n.uid)),x=(await Un(p)).docs.map(b=>{const A=b.data()||{};return{id:b.id,title:A.title||"",titleLower:(A.title||"").toLocaleLowerCase(),author:A.author||"",status:A.status||"",updatedAt:A.updatedAt||null,coverImageUrl:A.coverImageUrl||""}}).sort((b,A)=>{var E,C;return b.titleLower===A.titleLower?(((E=b.updatedAt)==null?void 0:E.seconds)||0)<(((C=A.updatedAt)==null?void 0:C.seconds)||0)?1:-1:b.titleLower.localeCompare(A.titleLower)});i(x)}catch(p){console.error("Error fetching books for lookup:",p),t(""),c(""),i([])}finally{s(!1)}},[n==null?void 0:n.uid,t]);return M.useEffect(()=>{d()},[d]),{books:M.useMemo(()=>r.map(p=>({id:p.id,title:p.title,author:p.author,status:p.status,updatedAt:p.updatedAt,coverImageUrl:p.coverImageUrl})),[r]),loading:a,error:o,refresh:d}},J$=n=>{if(!n)return"";try{const e=typeof n.toDate=="function"?n.toDate():n instanceof Date?n:null;if(!e)return"";const t=e.getFullYear(),r=String(e.getMonth()+1).padStart(2,"0"),i=String(e.getDate()).padStart(2,"0"),a=String(e.getHours()).padStart(2,"0"),s=String(e.getMinutes()).padStart(2,"0");return`${t}/${r}/${i} ${a}:${s}`}catch{return""}},eG=n=>{if(!n)return"";const e=n.text||n.comment||"";if(!e)return"";const t=e.trim().replace(/\s+/g," ");return t.length<=80?t:`${t.slice(0,77)}`},tG=({open:n,memo:e,currentBookId:t,onClose:r,onMove:i,onSuccess:a})=>{const{books:s,loading:o,error:c,refresh:d}=Z$(),[f,p]=M.useState(""),[g,m]=M.useState(null),[x,b]=M.useState("idle"),[A,E]=M.useState(!1),C=M.useMemo(()=>s.find(k=>k.id===f)||null,[s,f]);M.useEffect(()=>{n||(p(""),m(null),b("idle"),E(!1))},[n]),M.useEffect(()=>{c&&p("")},[c]);const T=async k=>{if(k.preventDefault(),m(null),b("idle"),!C){m(""),b("required");return}if(C.id===t){m(""),b("same-book");return}if(!(e!=null&&e.id)){m(""),b("invalid-memo");return}try{E(!0),await(i==null?void 0:i({memoId:e.id,targetBookId:C.id})),a==null||a(C.id),r==null||r()}catch(B){console.error("Failed to move memo:",B),m(""),b("submit-error")}finally{E(!1)}},D=k=>{if(!(k!=null&&k.status))return null;const B=E0[k.status]||"",O=lw[k.status]||"default";return v.jsx(dn,{size:"small",label:B,color:O,sx:{ml:1},"data-testid":"memo-move-book-status-chip"})};return v.jsxs(zi,{open:n,onClose:A?void 0:r,maxWidth:"sm",fullWidth:!0,"data-testid":"memo-move-dialog",children:[v.jsx(aa,{children:""}),v.jsx($i,{dividers:!0,children:v.jsxs(Ls,{spacing:2,children:[e&&v.jsxs(ne,{sx:{border:k=>`1px solid ${k.palette.divider}`,borderRadius:1,p:2,backgroundColor:k=>k.palette.action.hover},"data-testid":"memo-move-summary",children:[v.jsx(te,{variant:"subtitle2",gutterBottom:!0,"data-testid":"memo-move-summary-label",children:""}),e.text&&v.jsx(te,{variant:"body2",sx:{whiteSpace:"pre-line",mb:e.comment?1:0},children:eG(e)}),e.comment&&v.jsx(te,{variant:"body2",color:"text.secondary",sx:{whiteSpace:"pre-line"},children:e.comment}),e.createdAt&&v.jsxs(te,{variant:"caption",color:"text.secondary",sx:{display:"block",mt:1},children:[": ",J$(e.createdAt)]})]}),v.jsx(te,{variant:"body2",color:"text.secondary","data-testid":"memo-move-instruction",children:""}),v.jsx(Sl,{}),c&&v.jsx(vi,{severity:"error","data-testid":"memo-move-fetch-error",action:v.jsx($e,{color:"inherit",size:"small",onClick:d,"data-testid":"memo-move-refresh-button",children:""}),children:""}),o?v.jsx(Yl,{variant:"inline",message:"...","data-testid":"memo-move-loading"}):v.jsx("form",{onSubmit:T,"data-testid":"memo-move-form",children:v.jsx(Ns,{options:s,value:C,onChange:(k,B)=>{const O=(B==null?void 0:B.id)||"";if(p(O),!O){m(null),b("idle");return}if(O===t){m(""),b("same-book");return}m(null),b("idle")},getOptionLabel:k=>(k==null?void 0:k.title)||"",noOptionsText:"",renderOption:(k,B)=>M.createElement(ne,{component:"li",...k,key:B.id,"data-testid":`memo-move-option-${B.id}`},v.jsxs(Ls,{spacing:.5,sx:{width:"100%"},children:[v.jsxs(ne,{sx:{display:"flex",alignItems:"center"},children:[v.jsx(te,{variant:"subtitle2",children:B.title||""}),D(B)]}),B.author&&v.jsx(te,{variant:"body2",color:"text.secondary",children:B.author})]})),renderInput:k=>v.jsx(ht,{...k,"data-testid":"memo-move-book-textfield",label:"",placeholder:"",error:!!g,helperText:g||(s.length===0?"":""),inputProps:{...k.inputProps,"data-testid":"memo-move-book-input"},FormHelperTextProps:{...k.FormHelperTextProps??{},"data-testid":"memo-move-helper-text","data-state":x}}),disabled:A||s.length===0,"data-testid":"memo-move-book-autocomplete"})})]})}),v.jsxs(Gi,{children:[v.jsx($e,{onClick:r,disabled:A,"data-testid":"memo-move-cancel-button",children:""}),v.jsx($e,{onClick:T,variant:"contained",disabled:A||!C||C.id===t||s.length===0,"data-testid":"memo-move-submit-button",children:A?"...":""})]})]})},nG=n=>{try{const e=n&&typeof n.toDate=="function"?n.toDate():n instanceof Date?n:null;if(!e)return"";const t=e.getFullYear(),r=e.getMonth()+1,i=e.getDate(),a=e.getHours(),s=String(e.getMinutes()).padStart(2,"0"),o=String(e.getSeconds()).padStart(2,"0");return`${t}/${r}/${i} ${a}:${s}:${o}`}catch{return""}},oO=({open:n,memo:e,bookId:t,onClose:r,onUpdate:i,onDelete:a,onMove:s,editMode:o=!1})=>{const{setGlobalError:c}=M.useContext(Wr),{updateMemo:d,deleteMemo:f,moveMemo:p}=h_(t),[g,m]=M.useState(o?"edit":"view"),[x,b]=M.useState(null),[A,E]=M.useState(!1),[C,T]=M.useState(""),[D,k]=M.useState(!1);yi.useEffect(()=>{e&&(b({...e,rating:Zh(e)}),m(o?"edit":"view"),E(!1),T(""),k(!1))},[e,o]);const B=()=>{b(null),m("view"),E(!1),T(""),k(!1),typeof r=="function"&&r()},O=async N=>{if(N.preventDefault(),!x||!x.text.trim())return;let P=x.tags||[];C&&!P.includes(C)&&(P=[...P,C]);try{await d(x.id,{text:x.text,comment:x.comment,page:Number(x.page)||null,tags:P,rating:x.rating||na}),B(),i&&i()}catch(V){console.error("Error updating memo: ",V),c("")}},I=async N=>{try{await f(N),B(),a&&a()}catch(P){console.error("Error deleting memo: ",P),c("")}},R=async({memoId:N,targetBookId:P})=>p({memoId:N,targetBookId:P}),F=N=>{typeof s=="function"&&s(N),typeof i=="function"&&i(),B()};return e?v.jsxs(v.Fragment,{children:[v.jsxs(zi,{open:n,onClose:B,maxWidth:"sm",fullWidth:!0,"data-testid":"memo-detail-dialog",children:[v.jsx(aa,{"data-testid":"memo-detail-title","data-testid-title":"",children:""}),v.jsx($i,{children:g==="view"?v.jsxs(v.Fragment,{children:[v.jsx(te,{variant:"body1",sx:{whiteSpace:"pre-line",mb:2},"data-testid":"memo-detail-text",children:x==null?void 0:x.text}),(x==null?void 0:x.comment)&&v.jsx(te,{variant:"body2",color:"text.secondary",sx:{mb:1},"data-testid":"memo-detail-comment",children:x.comment}),(x==null?void 0:x.rating)!=null&&v.jsxs(ne,{sx:{mb:1},children:[x.rating>0&&v.jsx(Ud,{value:x.rating,readOnly:!0,size:"small",sx:{mb:.5}}),v.jsx(te,{variant:"caption",color:"text.secondary",sx:{display:"block"},"data-testid":"memo-detail-rating-description",children:Zm(x.rating||na)})]}),v.jsx(Ls,{direction:"row",spacing:1,sx:{mb:1,flexWrap:"wrap"},"data-testid":"memo-detail-tags",children:Array.isArray(x==null?void 0:x.tags)&&x.tags.map((N,P)=>v.jsx(dn,{label:N,size:"small",color:"secondary"},P))}),(x==null?void 0:x.page)&&v.jsxs(te,{variant:"caption",sx:{display:"block",mb:1},"data-testid":"memo-detail-page",children:["p. ",x.page]}),(x==null?void 0:x.createdAt)&&v.jsx(te,{variant:"caption",color:"text.secondary",sx:{display:"block",mb:1},"data-testid":"memo-detail-created-at",children:nG(x.createdAt)})]}):v.jsxs(ne,{component:"form",onSubmit:O,sx:{mt:1},children:[v.jsx(ht,{label:"",fullWidth:!0,multiline:!0,rows:4,value:(x==null?void 0:x.text)||"",onChange:N=>b({...x,text:N.target.value}),margin:"normal",required:!0,inputProps:{"data-testid":"memo-text-input"}}),v.jsx(ht,{label:"",fullWidth:!0,multiline:!0,rows:2,value:(x==null?void 0:x.comment)||"",onChange:N=>b({...x,comment:N.target.value}),margin:"normal",inputProps:{"data-testid":"memo-comment-input"}}),v.jsx(ht,{label:"",type:"number",value:(x==null?void 0:x.page)||"",onChange:N=>b({...x,page:N.target.value}),margin:"normal",sx:{mr:2},inputProps:{"data-testid":"memo-page-input"}}),v.jsxs(Mi,{margin:"normal",fullWidth:!0,children:[v.jsx(L2,{component:"legend",children:""}),v.jsx(Ud,{value:(x==null?void 0:x.rating)||na,onChange:(N,P)=>{b({...x,rating:P||na})},size:"large",sx:{mt:1},"data-testid":"memo-rating-input"}),v.jsx(te,{variant:"caption",color:"text.secondary",sx:{mt:1,display:"block"},children:Zm((x==null?void 0:x.rating)||na)})]}),v.jsx(Ns,{multiple:!0,freeSolo:!0,options:[],value:(x==null?void 0:x.tags)||[],getOptionLabel:N=>typeof N=="string"?N:N.inputValue||N.tag||"",onChange:(N,P)=>{const V=(P||[]).map(q=>{if(typeof q=="string")return q;if(q&&typeof q=="object"){if("inputValue"in q&&q.inputValue)return q.inputValue;if("tag"in q&&q.tag)return q.tag}return""}).filter(Boolean);b({...x,tags:V})},inputValue:C,onInputChange:(N,P)=>T(P),renderInput:N=>v.jsx(ht,{...N,label:"",margin:"normal",fullWidth:!0,placeholder:": ,,",inputProps:{...N.inputProps,"data-testid":"memo-tags-input"}})})]})}),v.jsx(Gi,{children:g==="view"?v.jsxs(v.Fragment,{children:[v.jsx($e,{onClick:()=>k(!0),"data-testid":"memo-move-button",children:""}),v.jsx($e,{onClick:()=>m("edit"),"data-testid":"memo-edit-button",children:""}),v.jsx($e,{onClick:()=>E(!0),color:"error","data-testid":"memo-delete-button",children:""}),v.jsx($e,{onClick:B,"data-testid":"memo-close-button",children:""})]}):v.jsxs(v.Fragment,{children:[v.jsx($e,{onClick:()=>m("view"),"data-testid":"memo-cancel-button",children:""}),v.jsx($e,{onClick:O,variant:"contained","data-testid":"memo-update-button",children:""})]})})]}),v.jsxs(zi,{open:A,onClose:()=>E(!1),"data-testid":"memo-delete-dialog",children:[v.jsx(aa,{"data-testid":"memo-delete-confirm-title",children:""}),v.jsx($i,{children:v.jsx(te,{children:""})}),v.jsxs(Gi,{children:[v.jsx($e,{onClick:()=>E(!1),"data-testid":"memo-delete-cancel-button",children:""}),v.jsx($e,{onClick:()=>{I(x==null?void 0:x.id)},color:"error",variant:"contained","data-testid":"memo-delete-confirm-button",children:""})]})]}),v.jsx(tG,{open:D,memo:x,currentBookId:t,onClose:()=>k(!1),onMove:R,onSuccess:F})]}):null},rG=({bookId:n,onMemoUpdated:e})=>{const{setGlobalError:t}=M.useContext(Wr),{memos:r,loading:i,deleteMemo:a}=h_(n),[s,o]=M.useState(null),[c,d]=M.useState(!1),[f,p]=M.useState(!1),[g,m]=M.useState(null),[x,b]=M.useState(!1),A=(B,O=!1)=>{o(B),b(O),d(!0)},E=B=>{const O=r.find(I=>I.id===B);O&&(m(O),p(!0))},C=async()=>{if(g)try{await a(g.id),p(!1),m(null)}catch(B){console.error("Error deleting memo:",B),t("")}},T=()=>{o(null),d(!1)},D=()=>{p(!1),m(null)},k=()=>{e&&e()};return i?v.jsx(te,{children:"..."}):r.length===0?v.jsx(te,{children:""}):v.jsxs(v.Fragment,{children:[v.jsx(ne,{sx:{display:"flex",flexDirection:"column",gap:2},children:r.map(B=>v.jsx(Q$,{memo:B,onEdit:(O,I)=>A(O,I),onDelete:E,onClick:O=>A(O,!1)},B.id))}),v.jsx(oO,{open:c,memo:s,bookId:n,onClose:T,onUpdate:k,onDelete:k,editMode:x}),v.jsxs(zi,{open:f,onClose:D,"data-testid":"memo-delete-dialog",children:[v.jsx(aa,{"data-testid":"memo-delete-confirm-title",children:""}),v.jsx($i,{children:v.jsx(te,{children:""})}),v.jsxs(Gi,{children:[v.jsx($e,{onClick:D,"data-testid":"memo-delete-cancel-button",children:""}),v.jsx($e,{onClick:C,color:"error",variant:"contained","data-testid":"memo-delete-confirm-button",children:""})]})]})]})},sD=({onTextDetected:n,disabled:e=!1})=>{const[t,r]=M.useState(!1),[i,a]=M.useState(null),s=async()=>{r(!0),a(null);try{if(navigator.clipboard&&navigator.clipboard.readText){const c=await navigator.clipboard.readText();c&&c.trim()?(console.log("[CameraPasteOCR] :",c),n(c.trim())):a("")}else a("")}catch(c){console.error("[CameraPasteOCR] :",c),a("")}finally{r(!1)}},o=()=>{a(null)};return v.jsxs(v.Fragment,{children:[v.jsx($e,{variant:"outlined",startIcon:v.jsx(MN,{}),onClick:s,disabled:e||t,fullWidth:!0,sx:{mt:1,mb:1,height:{xs:"40px",sm:"48px"},fontSize:{xs:"0.8rem",sm:"0.9rem"}},"data-testid":"camera-paste-ocr-button",children:t?"...":""}),v.jsx(Bc,{open:!!i,autoHideDuration:6e3,onClose:o,anchorOrigin:{vertical:"bottom",horizontal:"center"},children:v.jsx(vi,{onClose:o,severity:"error","data-testid":"camera-paste-ocr-error",children:i})})]})};var oD={};const mi={ERROR:0,WARN:1,INFO:2,DEBUG:3},iG=()=>{let n,e=!1;try{if(typeof window<"u"){const t=window.__VITE_ENV__||{};n=t.VITE_LOG_LEVEL,e=t.PROD}}catch{}return typeof process<"u"&&oD&&(n||(n=oD.VITE_LOG_LEVEL),e||(e=!0)),n&&mi[n.toUpperCase()]!==void 0?mi[n.toUpperCase()]:e?mi.WARN:mi.DEBUG},aG=iG(),hr={AUTH:" AUTH",BOOK:" BOOK",MEMO:" MEMO",STATUS:" STATUS",FIREBASE:" FIREBASE"},sG=(n,e,t,r=null)=>{const i=new Date().toISOString();let s=`${{[mi.ERROR]:"",[mi.WARN]:"",[mi.INFO]:"",[mi.DEBUG]:""}[n]||""} ${e} [${i}] ${t}`;return r!=null&&(s+=`
  Data: ${JSON.stringify(r,null,2)}`),s},Gg=(n,e,t,r=null)=>{if(n>aG)return;const i=sG(n,e,t,r);switch(n){case mi.ERROR:console.error(i);break;case mi.WARN:console.warn(i);break;case mi.INFO:console.info(i);break;case mi.DEBUG:console.log(i);break;default:console.log(i)}},vt={error:(n,e,t)=>Gg(mi.ERROR,n,e,t),warn:(n,e,t)=>Gg(mi.WARN,n,e,t),info:(n,e,t)=>Gg(mi.INFO,n,e,t),debug:(n,e,t)=>Gg(mi.DEBUG,n,e,t),auth:{error:(n,e)=>vt.error(hr.AUTH,n,e),warn:(n,e)=>vt.warn(hr.AUTH,n,e),info:(n,e)=>vt.info(hr.AUTH,n,e),debug:(n,e)=>vt.debug(hr.AUTH,n,e)},book:{error:(n,e)=>vt.error(hr.BOOK,n,e),warn:(n,e)=>vt.warn(hr.BOOK,n,e),info:(n,e)=>vt.info(hr.BOOK,n,e),debug:(n,e)=>vt.debug(hr.BOOK,n,e)},memo:{error:(n,e)=>vt.error(hr.MEMO,n,e),warn:(n,e)=>vt.warn(hr.MEMO,n,e),info:(n,e)=>vt.info(hr.MEMO,n,e),debug:(n,e)=>vt.debug(hr.MEMO,n,e)},status:{error:(n,e)=>vt.error(hr.STATUS,n,e),warn:(n,e)=>vt.warn(hr.STATUS,n,e),info:(n,e)=>vt.info(hr.STATUS,n,e),debug:(n,e)=>vt.debug(hr.STATUS,n,e)},firebase:{error:(n,e)=>vt.error(hr.FIREBASE,n,e),warn:(n,e)=>vt.warn(hr.FIREBASE,n,e),info:(n,e)=>vt.info(hr.FIREBASE,n,e),debug:(n,e)=>vt.debug(hr.FIREBASE,n,e)}},oG=({bookId:n,bookTags:e=[],onMemoAdded:t,onClose:r})=>{const{user:i}=Qn(),{setGlobalError:a}=M.useContext(Wr),{addMemo:s}=h_(n),[o,c]=M.useState(""),[d,f]=M.useState(""),[p,g]=M.useState(""),[m,x]=M.useState([]),[b,A]=M.useState(""),[E,C]=M.useState(na),[T,D]=M.useState(!1),{tagOptions:k,fetchTagHistory:B,saveTagsToHistory:O}=js("memo",i);M.useEffect(()=>{B()},[B]);const I=async P=>{if(P.preventDefault(),!o.trim()||T)return;D(!0),vt.memo.debug("handleSubmit",{text:o,comment:d,page:p,tags:m});let V=m;b&&!m.includes(b)&&(V=[...m,b]),vt.memo.debug("",V);try{vt.memo.debug("addMemo");const q=await s({text:o,comment:d,page:Number(p)||null,tags:V,rating:E||na});vt.memo.info("addMemo",{memoId:q}),await O(V),vt.memo.debug(""),c(""),f(""),g(""),x([]),A(""),C(na),vt.memo.debug(""),t&&(vt.memo.debug("onMemoAdded"),t())}catch(q){vt.memo.error("Error adding memo",q),a("")}finally{D(!1)}},R=()=>{r&&r()},F=P=>{vt.memo.info("OCR",{detectedText:P}),c(P)};return r?v.jsxs(v.Fragment,{children:[v.jsx(aa,{"data-testid":"memo-add-dialog-title",children:""}),v.jsx($i,{children:v.jsxs(ne,{component:"form",onSubmit:I,sx:{mt:1},"data-testid":"memo-add-form",children:[v.jsx(ht,{label:"",fullWidth:!0,multiline:!0,rows:3,value:o,onChange:P=>c(P.target.value),required:!0,inputProps:{"data-testid":"memo-text-input"}}),v.jsx(sD,{onTextDetected:F}),v.jsx(ht,{label:"",fullWidth:!0,multiline:!0,rows:2,value:d,onChange:P=>f(P.target.value),inputProps:{"data-testid":"memo-comment-input"}}),v.jsx(ht,{label:"",type:"number",value:p,onChange:P=>g(P.target.value),sx:{mr:2,width:{xs:"100%",sm:"auto"}},inputProps:{"data-testid":"memo-page-input"}}),v.jsxs(Mi,{margin:"normal",fullWidth:!0,children:[v.jsx(L2,{component:"legend",children:""}),v.jsx(Ud,{value:E,onChange:(P,V)=>{C(V||na)},size:"large",sx:{mt:1},"data-testid":"memo-rating-input"}),v.jsx(te,{variant:"caption",color:"text.secondary",sx:{mt:1,display:"block"},"data-testid":"memo-rating-description",children:Zm(E)})]}),v.jsx(Ns,{multiple:!0,freeSolo:!0,options:k,value:m,getOptionLabel:P=>typeof P=="string"?P:P.inputValue||P.tag||"",onChange:async(P,V)=>{const q=(V||[]).map(X=>{if(typeof X=="string")return X;if(X&&typeof X=="object"){if("inputValue"in X&&X.inputValue)return X.inputValue;if("tag"in X&&X.tag)return X.tag}return""}).filter(Boolean);x(q),await O(q)},inputValue:b,onInputChange:(P,V)=>A(V),renderInput:P=>v.jsx(ht,{...P,label:"",fullWidth:!0,placeholder:": ,,",inputProps:{...P.inputProps,"data-testid":"memo-tags-input"}})})]})}),v.jsxs(Gi,{children:[v.jsx($e,{onClick:R,"data-testid":"memo-add-cancel",disabled:T,children:""}),v.jsx($e,{onClick:I,variant:"contained","data-testid":"memo-add-submit",disabled:T,children:T?"...":""})]})]}):v.jsxs(ne,{component:"form",onSubmit:I,sx:{mt:1},"data-testid":"memo-add-form",children:[v.jsx(ht,{label:"",fullWidth:!0,multiline:!0,rows:3,value:o,onChange:P=>c(P.target.value),required:!0,inputProps:{"data-testid":"memo-text-input"}}),v.jsx(sD,{onTextDetected:F}),v.jsx(ht,{label:"",fullWidth:!0,multiline:!0,rows:2,value:d,onChange:P=>f(P.target.value),inputProps:{"data-testid":"memo-comment-input"}}),v.jsx(ht,{label:"",type:"number",value:p,onChange:P=>g(P.target.value),sx:{mr:2,width:{xs:"100%",sm:"auto"}},inputProps:{"data-testid":"memo-page-input"}}),v.jsxs(Mi,{margin:"normal",fullWidth:!0,children:[v.jsx(L2,{component:"legend",children:""}),v.jsx(Ud,{value:E,onChange:(P,V)=>{C(V||na)},size:"large",sx:{mt:1},"data-testid":"memo-rating-input"}),v.jsx(te,{variant:"caption",color:"text.secondary",sx:{mt:1,display:"block"},"data-testid":"memo-rating-description",children:Zm(E)})]}),v.jsx(Ns,{multiple:!0,freeSolo:!0,options:k,value:m,getOptionLabel:P=>typeof P=="string"?P:P.inputValue||P.tag||"",onChange:async(P,V)=>{const q=(V||[]).map(X=>{if(typeof X=="string")return X;if(X&&typeof X=="object"){if("inputValue"in X&&X.inputValue)return X.inputValue;if("tag"in X&&X.tag)return X.tag}return""}).filter(Boolean);x(q),await O(q)},inputValue:b,onInputChange:(P,V)=>A(V),renderInput:P=>v.jsx(ht,{...P,label:"",fullWidth:!0,placeholder:": ,,",inputProps:{...P.inputProps,"data-testid":"memo-tags-input"}})}),v.jsx($e,{type:"submit",variant:"contained",disabled:T,sx:{mt:2,mb:{xs:8,sm:2},width:{xs:"100%",sm:"auto"}},"data-testid":"memo-add-submit",children:T?"...":""})]})};function lD(n){if(!n)return null;if(typeof n.toDate=="function")return n.toDate();try{return new Date(n)}catch{return null}}function lG(n){if(!Array.isArray(n)||n.length===0)return{};const e=n.find(a=>(a==null?void 0:a.status)===dt.READING||(a==null?void 0:a.status)===dt.RE_READING),t=n.find(a=>(a==null?void 0:a.status)===dt.FINISHED),r=n.find(a=>(a==null?void 0:a.status)===dt.RE_READING),i={};return e!=null&&e.changedAt&&(i.readingStartedAt=e.changedAt),t!=null&&t.changedAt&&(i.finishedAt=t.changedAt),r!=null&&r.changedAt&&(i.reReadingStartedAt=r.changedAt),i}function cG(n){var e;return!Array.isArray(n)||n.length===0?null:((e=n[0])==null?void 0:e.status)??null}function uG(n){if(!n)return null;const{readingStartedAt:e,finishedAt:t}=n;if(!e||!t)return null;const r=lD(e),i=lD(t);if(!r||!i)return null;const a=Math.abs(i-r);return Math.ceil(a/(1e3*60*60*24))}const p_=n=>{const{user:e}=Qn(),t=M.useContext(Wr),r=(t==null?void 0:t.setGlobalError)||(()=>{}),[i,a]=M.useState([]),[s,o]=M.useState(!0),[c,d]=M.useState(null),f=M.useCallback(()=>{if(!e||!n)return vt.status.debug("No user or bookId",{user:!!e,bookId:n}),o(!1),()=>{};try{vt.status.debug("Setting up listener for bookId",{bookId:n}),o(!0),d(null);const E=$n(wt,"books",n,"statusHistory"),C=Ln(E);return Ij(C,D=>{vt.status.debug("Snapshot received",{size:D.size,empty:D.empty,bookId:n});const k=D.docs.map(B=>({id:B.id,...B.data()}));k.sort((B,O)=>{var F,N;const I=(F=B.changedAt)!=null&&F.toDate?B.changedAt.toDate():new Date(B.changedAt||0);return((N=O.changedAt)!=null&&N.toDate?O.changedAt.toDate():new Date(O.changedAt||0))-I}),a(k),o(!1)},D=>{if(vt.status.error("Error fetching status history",D),vt.status.error("Error details",{code:D.code,message:D.message,bookId:n,userId:e.uid}),D.code==="permission-denied"){vt.status.warn("Permission denied for statusHistory, treating as empty history"),a([]),o(!1);return}r(""),d(""),o(!1)})}catch(E){return vt.status.error("Error setting up status history listener",E),r(""),d(""),o(!1),()=>{}}},[n,e,r]),p=M.useCallback(async(E,C,T=null)=>{if(!e||!n||!Xm(E))throw new Error("");try{const D=$n(wt,"books",n,"statusHistory"),k={status:E,previousStatus:C||null,changedAt:Ir(),changedBy:e.uid,notes:T||null,createdAt:Ir()};return(await A0(D,k)).id}catch(D){throw vt.status.error("Error adding status history",D),r(""),D}},[n,e,r]),g=M.useCallback(()=>i.length?lG(i):{},[i]),m=M.useCallback(()=>cG(i),[i]),x=M.useCallback(()=>uG(g()),[g]),b=M.useCallback(async(E,C,T)=>{if(!e||!n){vt.status.debug("No user or bookId for manual history addition",{user:!!e,bookId:n});return}if(!Xm(C))throw new Error("Invalid status");try{vt.status.info("Adding manual status history",{bookId:n,date:E,status:C,previousStatus:T,userId:e.uid});const D=$n(wt,"books",n,"statusHistory"),k={status:C,previousStatus:T||"",changedAt:E,userId:e.uid};await A0(D,k),vt.status.info("Manual status history added successfully")}catch(D){throw vt.status.error("Error adding manual status history",D),r(""),D}},[e,n,r]),A=i.length>0?i[0]:null;return M.useEffect(()=>f(),[n,e]),{history:i,loading:s,error:c,addStatusHistory:p,addManualStatusHistory:b,latestHistory:A,getImportantDates:g,getCurrentStatus:m,getReadingDuration:x,refetch:f}},dG=({book:n,bookId:e,onStatusChange:t})=>{const r=M.useContext(Wr),i=(r==null?void 0:r.setGlobalError)||(()=>{}),{addStatusHistory:a}=p_(e),[s,o]=M.useState(!1),[c,d]=M.useState(null),f=async x=>{if(!n||!Xm(x))return;o(!0),d(null);const b=ji(wt,"books",e),A=n.status||Sr;try{const E={status:x,updatedAt:Ir()};x===dt.FINISHED&&(E.finishedAt=Ir()),await ry(b,E);try{await a(x,A)}catch(C){console.error("Error adding status history:",C)}t(x)}catch(E){console.error("Error updating status:",E),i("")}finally{o(!1)}},p=x=>{d(x.currentTarget)},g=()=>{d(null)};if(!n)return null;const m=n.status||Sr;return v.jsxs(ne,{sx:{display:"flex",alignItems:"center",gap:1},children:[v.jsx(dn,{label:Vs(m),color:xs(m),"data-testid":"book-status-chip"}),v.jsx($e,{onClick:p,variant:"outlined",disabled:s,endIcon:v.jsx(ON,{}),"data-testid":"book-status-change-button",children:s?"...":""}),v.jsx(cR,{anchorEl:c,open:!!c,onClose:g,"data-testid":"book-status-menu",children:t_.map(x=>v.jsx(Zt,{onClick:()=>f(x),disabled:x===m,"data-testid":`status-menu-item-${x}`,children:Vs(x)},x))})]})},fG=(n,e="google")=>{const t=encodeURIComponent(n),r={google:`https://www.google.com/search?q=${t}`,amazon:`https://www.amazon.co.jp/s?k=${t}`,rakuten:`https://books.rakuten.co.jp/rb/Search?qt=${t}`};return r[e]||r.google};function hG(n={}){const{showSnackbar:e,enableExternalSearch:t=!0}=n,[r,i]=M.useState(null),[a,s]=M.useState(""),[o,c]=M.useState(null),d=(x,b,A=null)=>{x.preventDefault(),x.stopPropagation(),console.log("[useTextCopyMenu] handleClick called",{text:b,currentTarget:x.currentTarget}),i(x.currentTarget),s(b),c(A)},f=(x,b,A=null)=>{x.preventDefault(),x.stopPropagation(),console.log("[useTextCopyMenu] handleContextMenu called",{text:b,currentTarget:x.currentTarget}),i(x.currentTarget),s(b),c(A)},p=()=>{i(null)};return{handleClick:d,handleContextMenu:f,menuProps:{anchorEl:r,open:!!r,onClose:p},handleCopy:async()=>{try{await navigator.clipboard.writeText(a),e&&e("","success"),p()}catch(x){console.error(":",x),e&&e("","error")}},handleExternalSearch:x=>{if(!t)return;let b=a;o!=null&&o.author&&a===o.title&&(b=`${a} ${o.author}`);const A=fG(b,x);window.open(A,"_blank","noopener,noreferrer"),p()},selectedText:a}}const pG=({book:n,bookId:e,onStatusChange:t,onEdit:r})=>{const[i,a]=yi.useState({open:!1,message:"",severity:"success"}),s=(g,m="success")=>{a({open:!0,message:g,severity:m})},{handleClick:o,handleContextMenu:c,menuProps:d,handleCopy:f,handleExternalSearch:p}=hG({showSnackbar:s});return n?v.jsxs(v.Fragment,{children:[v.jsxs(ne,{"data-testid":"book-info",children:[v.jsx(ne,{sx:{display:"flex",justifyContent:"center",alignItems:"center",mb:2},children:v.jsx(dG,{book:n,bookId:e,onStatusChange:t})}),v.jsx(ne,{sx:{textAlign:"left",mb:2},"data-testid":"book-cover-section",children:n.coverImageUrl?v.jsx("img",{src:n.coverImageUrl,alt:`${n.title}`,style:{maxHeight:"250px",width:"auto"},"data-testid":"book-cover-image"}):v.jsx(ne,{sx:{border:"1px dashed grey",height:250,width:167,display:"flex",alignItems:"center",justifyContent:"center",mx:"auto"},"data-testid":"book-cover-placeholder",children:v.jsx(te,{variant:"body1",color:"text.secondary",children:""})})}),v.jsxs(ne,{sx:{mb:2},"data-testid":"book-details",children:[v.jsx(te,{variant:"h4",gutterBottom:!0,sx:{wordBreak:"break-word",cursor:"pointer",userSelect:"none","&:hover":{opacity:.8}},onClick:g=>o(g,n.title,n),onContextMenu:g=>c(g,n.title,n),"data-testid":"book-title",children:n.title}),v.jsx(te,{variant:"h6",color:"text.secondary",gutterBottom:!0,sx:{cursor:"pointer",userSelect:"none","&:hover":{opacity:.8}},onClick:g=>o(g,n.author,n),onContextMenu:g=>c(g,n.author,n),"data-testid":"book-author",children:n.author}),n.publisher&&v.jsxs(te,{variant:"body1",color:"text.secondary",gutterBottom:!0,sx:{cursor:"pointer",userSelect:"none","&:hover":{opacity:.8}},onClick:g=>o(g,n.publisher,n),onContextMenu:g=>c(g,n.publisher,n),"data-testid":"book-publisher",children:[": ",n.publisher]}),n.publishedDate&&v.jsxs(te,{variant:"body1",color:"text.secondary",gutterBottom:!0,"data-testid":"book-published-date",children:[": ",n.publishedDate]}),n.isbn&&v.jsxs(te,{variant:"body1",color:"text.secondary",gutterBottom:!0,"data-testid":"book-isbn",children:["ISBN: ",n.isbn]}),n.acquisitionType&&n.acquisitionType!==Xa.UNKNOWN&&v.jsx(ne,{sx:{mb:1},children:v.jsx(dn,{label:`: ${GM(n.acquisitionType)}`,color:"primary",variant:"outlined",size:"small","data-testid":"book-acquisition-type"})})]})]}),v.jsxs(cR,{...d,"data-testid":"text-copy-menu",children:[v.jsxs(Zt,{onClick:f,"data-testid":"text-copy-menu-copy",children:[v.jsx(lm,{children:v.jsx(PN,{fontSize:"small"})}),v.jsx(om,{children:""})]}),v.jsxs(Zt,{onClick:()=>p("google"),"data-testid":"text-copy-menu-google",children:[v.jsx(lm,{children:v.jsx(R1,{fontSize:"small"})}),v.jsx(om,{children:"Google"})]}),v.jsxs(Zt,{onClick:()=>p("amazon"),"data-testid":"text-copy-menu-amazon",children:[v.jsx(lm,{children:v.jsx(kN,{fontSize:"small"})}),v.jsx(om,{children:"Amazon"})]})]}),v.jsx(Bc,{open:i.open,autoHideDuration:3e3,onClose:()=>a({...i,open:!1}),anchorOrigin:{vertical:"bottom",horizontal:"center"},"data-testid":"text-copy-snackbar",children:v.jsx(vi,{onClose:()=>a({...i,open:!1}),severity:i.severity,sx:{width:"100%"},"data-testid":"text-copy-alert",children:i.message})})]}):null},gG=n=>n?n.replace(/[^0-9Xx]/g,"").toUpperCase():"",mG=({open:n,book:e,onClose:t,onSave:r})=>{const[i,a]=M.useState(""),[s,o]=M.useState(""),[c,d]=M.useState(""),[f,p]=M.useState(""),[g,m]=M.useState(""),[x,b]=M.useState(!1),[A,E]=M.useState(!1),[C,T]=M.useState(null),D=M.useMemo(()=>!!(e!=null&&e.isbn),[e==null?void 0:e.isbn]);M.useEffect(()=>{n&&e&&(a(e.title||""),o(e.author||""),d(e.publisher||""),p(e.publishedDate||""),m(e.coverImageUrl||""),T(null),b(!1),E(!1)),n||(T(null),b(!1),E(!1))},[n,e]);const k=()=>{x||t==null||t()},B=()=>{const I=gG(e==null?void 0:e.isbn);if(!I){T("ISBN");return}const R=`https://cover.openbd.jp/${I}.jpg`;E(!0),T(null);const F=new Image;F.onload=()=>{m(R),E(!1),T(null)},F.onerror=()=>{E(!1),T("openBD")},F.src=R},O=async I=>{I.preventDefault();const R=i.trim();if(!R){T("");return}b(!0),T(null);try{await(r==null?void 0:r({title:R,author:s.trim(),publisher:c.trim(),publishedDate:f.trim(),coverImageUrl:g.trim()})),t==null||t()}catch(F){console.error("Failed to update book:",F),T(""),b(!1)}};return v.jsxs(zi,{open:n,onClose:k,maxWidth:"sm",fullWidth:!0,"data-testid":"book-edit-dialog",children:[v.jsx(aa,{"data-testid":"book-edit-dialog-title",children:""}),v.jsx($i,{dividers:!0,children:v.jsx(ne,{component:"form",onSubmit:O,id:"book-edit-form",noValidate:!0,children:v.jsxs(Ls,{spacing:2,children:[(e==null?void 0:e.isbn)&&v.jsx(ne,{children:v.jsxs(te,{variant:"body2",color:"text.secondary","data-testid":"book-edit-isbn",children:["ISBN: ",e.isbn]})}),v.jsx(ht,{label:"",value:i,onChange:I=>a(I.target.value),required:!0,fullWidth:!0,size:"small",inputProps:{"data-testid":"book-edit-title-input"}}),v.jsx(ht,{label:"",value:s,onChange:I=>o(I.target.value),fullWidth:!0,size:"small",inputProps:{"data-testid":"book-edit-author-input"}}),v.jsx(ht,{label:"",value:c,onChange:I=>d(I.target.value),fullWidth:!0,size:"small",inputProps:{"data-testid":"book-edit-publisher-input"}}),v.jsx(ht,{label:"",value:f,onChange:I=>p(I.target.value),fullWidth:!0,size:"small",inputProps:{"data-testid":"book-edit-published-date-input"}}),v.jsx(ht,{label:"URL",value:g,onChange:I=>m(I.target.value),fullWidth:!0,size:"small",inputProps:{"data-testid":"book-edit-cover-url-input"}}),v.jsxs(Ls,{direction:"row",spacing:1,children:[v.jsx($e,{variant:"outlined",onClick:B,disabled:!D||x||A,"data-testid":"book-edit-fetch-cover-button",children:A?"...":"openBD"}),v.jsx($e,{variant:"outlined",onClick:()=>{m(""),T(null)},disabled:x||A,"data-testid":"book-edit-clear-cover-button",children:""})]}),g&&v.jsx(ne,{sx:{textAlign:"center",mt:1},children:v.jsx("img",{src:g,alt:"",style:{maxHeight:180,borderRadius:4},"data-testid":"book-edit-cover-preview"})}),C&&v.jsx(vi,{severity:"error","data-testid":"book-edit-error",children:C})]})})}),v.jsxs(Gi,{children:[v.jsx($e,{onClick:k,disabled:x,"data-testid":"book-edit-cancel",children:""}),v.jsx($e,{type:"submit",form:"book-edit-form",variant:"contained",disabled:x,"data-testid":"book-edit-save",children:x?"...":""})]})]})},yG=({book:n,bookId:e,onTagsChange:t})=>{const{user:r}=Qn(),i=M.useContext(Wr),a=(i==null?void 0:i.setGlobalError)||(()=>{}),[s,o]=M.useState(!1),[c,d]=M.useState([]),{tagOptions:f,fetchTagHistory:p,saveTagsToHistory:g}=js("book",r);M.useEffect(()=>{p()},[p]);const m=()=>{d(n.tags||[]),o(!0)},x=async()=>{if(n)try{const b=ji(wt,"books",e);await ry(b,{tags:c,updatedAt:Ir()}),await g(c),t(c),o(!1)}catch(b){console.error("Error updating tags:",b),a("")}};return n?v.jsxs(ne,{sx:{mb:2},children:[v.jsxs(ne,{sx:{display:"flex",alignItems:"center",gap:1,mb:1},children:[v.jsx(te,{variant:"h6",children:":"}),v.jsx($r,{onClick:m,size:"small","data-testid":"edit-tags-button",children:v.jsx(Sm,{})})]}),v.jsx(ne,{sx:{display:"flex",flexWrap:"wrap",gap:1},children:(n.tags||[]).map((b,A)=>v.jsx(dn,{label:b,size:"small"},A))}),v.jsxs(zi,{open:s,onClose:()=>o(!1),maxWidth:"sm",fullWidth:!0,children:[v.jsx(aa,{children:""}),v.jsx($i,{children:v.jsx(Ns,{multiple:!0,freeSolo:!0,options:f,value:c,onChange:(b,A)=>d(A),renderInput:b=>v.jsx(ht,{...b,label:"",placeholder:"",fullWidth:!0,margin:"normal"}),renderTags:(b,A)=>b.map((E,C)=>M.createElement(dn,{...A({index:C}),key:C,label:E,size:"small"}))})}),v.jsxs(Gi,{children:[v.jsx($e,{onClick:()=>o(!1),children:""}),v.jsx($e,{onClick:x,variant:"contained","data-testid":"save-tags-button",children:""})]})]})]}):null},vG=n=>({components:{MuiLocalizationProvider:{defaultProps:{localeText:H({},n)}}}}),lO={previousMonth:"Previous month",nextMonth:"Next month",openPreviousView:"Open previous view",openNextView:"Open next view",calendarViewSwitchingButtonAriaLabel:n=>n==="year"?"year view is open, switch to calendar view":"calendar view is open, switch to year view",start:"Start",end:"End",startDate:"Start date",startTime:"Start time",endDate:"End date",endTime:"End time",cancelButtonLabel:"Cancel",clearButtonLabel:"Clear",okButtonLabel:"OK",todayButtonLabel:"Today",nextStepButtonLabel:"Next",datePickerToolbarTitle:"Select date",dateTimePickerToolbarTitle:"Select date & time",timePickerToolbarTitle:"Select time",dateRangePickerToolbarTitle:"Select date range",timeRangePickerToolbarTitle:"Select time range",clockLabelText:(n,e)=>`Select ${n}. ${e?`Selected time is ${e}`:"No time selected"}`,hoursClockNumberText:n=>`${n} hours`,minutesClockNumberText:n=>`${n} minutes`,secondsClockNumberText:n=>`${n} seconds`,selectViewText:n=>`Select ${n}`,calendarWeekNumberHeaderLabel:"Week number",calendarWeekNumberHeaderText:"#",calendarWeekNumberAriaLabelText:n=>`Week ${n}`,calendarWeekNumberText:n=>`${n}`,openDatePickerDialogue:n=>n?`Choose date, selected date is ${n}`:"Choose date",openTimePickerDialogue:n=>n?`Choose time, selected time is ${n}`:"Choose time",openRangePickerDialogue:n=>n?`Choose range, selected range is ${n}`:"Choose range",fieldClearLabel:"Clear",timeTableLabel:"pick time",dateTableLabel:"pick date",fieldYearPlaceholder:n=>"Y".repeat(n.digitAmount),fieldMonthPlaceholder:n=>n.contentType==="letter"?"MMMM":"MM",fieldDayPlaceholder:()=>"DD",fieldWeekDayPlaceholder:n=>n.contentType==="letter"?"EEEE":"EE",fieldHoursPlaceholder:()=>"hh",fieldMinutesPlaceholder:()=>"mm",fieldSecondsPlaceholder:()=>"ss",fieldMeridiemPlaceholder:()=>"aa",year:"Year",month:"Month",day:"Day",weekDay:"Week day",hours:"Hours",minutes:"Minutes",seconds:"Seconds",meridiem:"Meridiem",empty:"Empty"},xG=lO;vG(lO);const wG=["localeText"],Ew=M.createContext(null),cO=function(e){const{localeText:t}=e,r=Be(e,wG),{adapter:i,localeText:a}=M.useContext(Ew)??{adapter:void 0,localeText:void 0},s=bt({props:r,name:"MuiLocalizationProvider"}),{children:o,dateAdapter:c,dateFormats:d,dateLibInstance:f,adapterLocale:p,localeText:g}=s,m=M.useMemo(()=>H({},g,a,t),[g,a,t]),x=M.useMemo(()=>{if(!c)return i||null;const E=new c({locale:p,formats:d,instance:f});if(!E.isMUIAdapter)throw new Error(["MUI X: The date adapter should be imported from `@mui/x-date-pickers` or `@mui/x-date-pickers-pro`, not from `@date-io`","For example, `import { AdapterDayjs } from '@mui/x-date-pickers/AdapterDayjs'` instead of `import AdapterDayjs from '@date-io/dayjs'`","More information on the installation documentation: https://mui.com/x/react-date-pickers/quickstart/#installation"].join(`
`));return E},[c,p,d,f,i]),b=M.useMemo(()=>x?{minDate:x.date("1900-01-01T00:00:00.000"),maxDate:x.date("2099-12-31T00:00:00.000")}:null,[x]),A=M.useMemo(()=>({utils:x,adapter:x,defaultDates:b,localeText:m}),[b,x,m]);return v.jsx(Ew.Provider,{value:A,children:o})},g_=()=>{const n=M.useContext(Ew);if(n===null)throw new Error(["MUI X: Can not find the date and time pickers localization context.","It looks like you forgot to wrap your component in LocalizationProvider.","This can also happen if you are bundling multiple versions of the `@mui/x-date-pickers` package"].join(`
`));if(n.adapter===null)throw new Error(["MUI X: Can not find the date and time pickers adapter from its localization context.","It looks like you forgot to pass a `dateAdapter` to your LocalizationProvider."].join(`
`));const e=M.useMemo(()=>H({},xG,n.localeText),[n.localeText]);return M.useMemo(()=>H({},n,{localeText:e}),[n,e])},Yt=()=>g_().adapter,Ja=()=>g_().localeText,Sw=["disablePast","disableFuture","minDate","maxDate","shouldDisableDate","shouldDisableMonth","shouldDisableYear"],Cw=["disablePast","disableFuture","minTime","maxTime","shouldDisableTime","minutesStep","ampm","disableIgnoringDatePartForTimeValidation"],uO=["minDateTime","maxDateTime"],bG=[...Sw,...Cw,...uO],dO=n=>bG.reduce((e,t)=>(n.hasOwnProperty(t)&&(e[t]=n[t]),e),{}),_G=["value","defaultValue","referenceDate","format","formatDensity","onChange","timezone","onError","shouldRespectLeadingZeros","selectedSections","onSelectedSectionsChange","unstableFieldRef","unstableStartFieldRef","unstableEndFieldRef","enableAccessibleFieldDOMStructure","disabled","readOnly","dateSeparator","autoFocus","focused"],fO=(n,e)=>M.useMemo(()=>{const t=H({},n),r={},i=a=>{t.hasOwnProperty(a)&&(r[a]=t[a],delete t[a])};return _G.forEach(i),e==="date"?Sw.forEach(i):e==="time"?Cw.forEach(i):e==="date-time"&&(Sw.forEach(i),Cw.forEach(i),uO.forEach(i)),{forwardedProps:t,internalProps:r}},[n,e]),ws=(n,e)=>n.length!==e.length?!1:e.every(t=>n.includes(t)),AG=({openTo:n,defaultOpenTo:e,views:t,defaultViews:r})=>{const i=t??r;let a;if(n!=null)a=n;else if(i.includes(e))a=e;else if(i.length>0)a=i[0];else throw new Error("MUI X: The `views` prop must contain at least one view.");return{views:i,openTo:a}},Jm=(n,e,t)=>{let r=e;return r=n.setHours(r,n.getHours(t)),r=n.setMinutes(r,n.getMinutes(t)),r=n.setSeconds(r,n.getSeconds(t)),r=n.setMilliseconds(r,n.getMilliseconds(t)),r},S0=({date:n,disableFuture:e,disablePast:t,maxDate:r,minDate:i,isDateDisabled:a,adapter:s,timezone:o})=>{const c=Jm(s,s.date(void 0,o),n);t&&s.isBefore(i,c)&&(i=c),e&&s.isAfter(r,c)&&(r=c);let d=n,f=n;for(s.isBefore(n,i)&&(d=i,f=null),s.isAfter(n,r)&&(f&&(f=r),d=null);d||f;){if(d&&s.isAfter(d,r)&&(d=null),f&&s.isBefore(f,i)&&(f=null),d){if(!a(d))return d;d=s.addDays(d,1)}if(f){if(!a(f))return f;f=s.addDays(f,-1)}}return null},EG=(n,e)=>n.isValid(e)?e:null,e1=(n,e,t)=>e==null||!n.isValid(e)?t:e,SG=(n,e,t)=>!n.isValid(e)&&e!=null&&!n.isValid(t)&&t!=null?!0:n.isEqual(e,t),m_=(n,e)=>{const r=[n.startOfYear(e)];for(;r.length<12;){const i=r[r.length-1];r.push(n.addMonths(i,1))}return r},y_=(n,e,t)=>t==="date"?n.startOfDay(n.date(void 0,e)):n.date(void 0,e),u0=(n,e)=>{const t=n.setHours(n.date(),e==="am"?2:14);return n.format(t,"meridiem")},hO=["year","month","day"],Kd=n=>hO.includes(n),cD=(n,{format:e,views:t},r)=>{if(e!=null)return e;const i=n.formats;return ws(t,["year"])?i.year:ws(t,["month"])?i.month:ws(t,["day"])?i.dayOfMonth:ws(t,["month","year"])?`${i.month} ${i.year}`:ws(t,["day","month"])?`${i.month} ${i.dayOfMonth}`:i.keyboardDate},CG=(n,e)=>{const t=n.startOfWeek(e);return[0,1,2,3,4,5,6].map(r=>n.addDays(t,r))},pO=(n,e)=>{const t=n.formatTokenMap[e];if(t==null)throw new Error([`MUI X: The token "${e}" is not supported by the Date and Time Pickers.`,"Please try using another token or open an issue on https://github.com/mui/mui-x/issues/new/choose if you think it should be supported."].join(`
`));return typeof t=="string"?{type:t,contentType:t==="meridiem"?"letter":"digit",maxLength:void 0}:{type:t.sectionType,contentType:t.contentType,maxLength:t.maxLength}},ly=(n,e)=>{const t=[],r=n.date(void 0,"default"),i=n.startOfWeek(r),a=n.endOfWeek(r);let s=i;for(;n.isBefore(s,a);)t.push(s),s=n.addDays(s,1);return t.map(o=>n.formatByString(o,e))},gO=(n,e,t,r)=>{switch(t){case"month":return m_(n,n.date(void 0,e)).map(i=>n.formatByString(i,r));case"weekDay":return ly(n,r);case"meridiem":{const i=n.date(void 0,e);return[n.startOfDay(i),n.endOfDay(i)].map(a=>n.formatByString(a,r))}default:return[]}},uD="s",TG=["0","1","2","3","4","5","6","7","8","9"],IG=n=>{const e=n.date(void 0);return n.formatByString(n.setSeconds(e,0),uD)==="0"?TG:Array.from({length:10}).map((r,i)=>n.formatByString(n.setSeconds(e,i),uD))},tu=(n,e)=>{if(e[0]==="0")return n;const t=[];let r="";for(let i=0;i<n.length;i+=1){r+=n[i];const a=e.indexOf(r);a>-1&&(t.push(a.toString()),r="")}return t.join("")},v_=(n,e)=>e[0]==="0"?n:n.split("").map(t=>e[Number(t)]).join(""),dD=(n,e)=>{const t=tu(n,e);return t!==" "&&!Number.isNaN(Number(t))},x_=(n,e)=>Number(n).toString().padStart(e,"0"),mO=(n,e,t,r,i)=>{if(i.type==="day"&&i.contentType==="digit-with-letter"){const s=n.setDate(t.longestMonth,e);return n.formatByString(s,i.format)}let a=e.toString();return i.hasLeadingZerosInInput&&(a=x_(a,i.maxLength)),v_(a,r)},w_=(n,e,t)=>{let r=n.value||n.placeholder;const i=e==="non-input"?n.hasLeadingZerosInFormat:n.hasLeadingZerosInInput;return e==="non-input"&&n.hasLeadingZerosInInput&&!n.hasLeadingZerosInFormat&&(r=Number(tu(r,t)).toString()),["input-rtl","input-ltr"].includes(e)&&n.contentType==="digit"&&!i&&r.length===1&&(r=`${r}`),e==="input-rtl"&&(r=`${r}`),r},fD=(n,e,t,r)=>n.formatByString(n.parse(e,t),r),DG=(n,e)=>n.formatByString(n.date(void 0,"system"),e).length===4,yO=(n,e,t,r)=>{if(e!=="digit")return!1;const i=n.date(void 0,"default");switch(t){case"year":return n.lib==="dayjs"&&r==="YY"?!0:n.formatByString(n.setYear(i,1),r).startsWith("0");case"month":return n.formatByString(n.startOfYear(i),r).length>1;case"day":return n.formatByString(n.startOfMonth(i),r).length>1;case"weekDay":return n.formatByString(n.startOfWeek(i),r).length>1;case"hours":return n.formatByString(n.setHours(i,1),r).length>1;case"minutes":return n.formatByString(n.setMinutes(i,1),r).length>1;case"seconds":return n.formatByString(n.setSeconds(i,1),r).length>1;default:throw new Error("Invalid section type")}},RG=(n,e,t)=>{const r=e.some(c=>c.type==="day"),i=[],a=[];for(let c=0;c<e.length;c+=1){const d=e[c];r&&d.type==="weekDay"||(i.push(d.format),a.push(w_(d,"non-input",t)))}const s=i.join(" "),o=a.join(" ");return n.parse(o,s)},MG=n=>n.map(e=>`${e.startSeparator}${e.value||e.placeholder}${e.endSeparator}`).join(""),OG=(n,e,t)=>{const i=n.map(a=>{const s=w_(a,t?"input-rtl":"input-ltr",e);return`${a.startSeparator}${s}${a.endSeparator}`}).join("");return t?`${i}`:i},PG=(n,e,t)=>{const r=n.date(void 0,t),i=n.endOfYear(r),a=n.endOfDay(r),{maxDaysInMonth:s,longestMonth:o}=m_(n,r).reduce((c,d)=>{const f=n.getDaysInMonth(d);return f>c.maxDaysInMonth?{maxDaysInMonth:f,longestMonth:d}:c},{maxDaysInMonth:0,longestMonth:null});return{year:({format:c})=>({minimum:0,maximum:DG(n,c)?9999:99}),month:()=>({minimum:1,maximum:n.getMonth(i)+1}),day:({currentDate:c})=>({minimum:1,maximum:n.isValid(c)?n.getDaysInMonth(c):s,longestMonth:o}),weekDay:({format:c,contentType:d})=>{if(d==="digit"){const f=ly(n,c).map(Number);return{minimum:Math.min(...f),maximum:Math.max(...f)}}return{minimum:1,maximum:7}},hours:({format:c})=>{const d=n.getHours(a);return tu(n.formatByString(n.endOfDay(r),c),e)!==d.toString()?{minimum:1,maximum:Number(tu(n.formatByString(n.startOfDay(r),c),e))}:{minimum:0,maximum:d}},minutes:()=>({minimum:0,maximum:n.getMinutes(a)}),seconds:()=>({minimum:0,maximum:n.getSeconds(a)}),meridiem:()=>({minimum:0,maximum:1}),empty:()=>({minimum:0,maximum:0})}},kG=(n,e,t,r)=>{switch(e.type){case"year":return n.setYear(r,n.getYear(t));case"month":return n.setMonth(r,n.getMonth(t));case"weekDay":{let i=n.formatByString(t,e.format);e.hasLeadingZerosInInput&&(i=x_(i,e.maxLength));const a=ly(n,e.format),s=a.indexOf(i),c=a.indexOf(e.value)-s;return n.addDays(t,c)}case"day":return n.setDate(r,n.getDate(t));case"meridiem":{const i=n.getHours(t)<12,a=n.getHours(r);return i&&a>=12?n.addHours(r,-12):!i&&a<12?n.addHours(r,12):r}case"hours":return n.setHours(r,n.getHours(t));case"minutes":return n.setMinutes(r,n.getMinutes(t));case"seconds":return n.setSeconds(r,n.getSeconds(t));default:return r}},hD={year:1,month:2,day:3,weekDay:4,hours:5,minutes:6,seconds:7,meridiem:8,empty:9},pD=(n,e,t,r,i)=>[...t].sort((a,s)=>hD[a.type]-hD[s.type]).reduce((a,s)=>!i||s.modified?kG(n,s,e,a):a,r),NG=()=>navigator.userAgent.toLowerCase().includes("android"),LG=(n,e)=>{const t={};if(!e)return n.forEach((c,d)=>{const f=d===0?null:d-1,p=d===n.length-1?null:d+1;t[d]={leftIndex:f,rightIndex:p}}),{neighbors:t,startIndex:0,endIndex:n.length-1};const r={},i={};let a=0,s=0,o=n.length-1;for(;o>=0;){s=n.findIndex((c,d)=>{var f;return d>=a&&((f=c.endSeparator)==null?void 0:f.includes(" "))&&c.endSeparator!==" / "}),s===-1&&(s=n.length-1);for(let c=s;c>=a;c-=1)i[c]=o,r[o]=c,o-=1;a=s+1}return n.forEach((c,d)=>{const f=i[d],p=f===0?null:r[f-1],g=f===n.length-1?null:r[f+1];t[d]={leftIndex:p,rightIndex:g}}),{neighbors:t,startIndex:r[0],endIndex:r[n.length-1]}},Tw=(n,e)=>{if(n==null)return null;if(n==="all")return"all";if(typeof n=="string"){const t=e.findIndex(r=>r.type===n);return t===-1?null:t}return n},BG=({adapter:n,format:e})=>{let t=10,r=e,i=n.expandFormat(e);for(;i!==r;)if(r=i,i=n.expandFormat(r),t-=1,t<0)throw new Error("MUI X: The format expansion seems to be in an infinite loop. Please open an issue with the format passed to the component.");return i},FG=({adapter:n,expandedFormat:e})=>{const t=[],{start:r,end:i}=n.escapedCharacters,a=new RegExp(`(\\${r}[^\\${i}]*\\${i})+`,"g");let s=null;for(;s=a.exec(e);)t.push({start:s.index,end:a.lastIndex-1});return t},VG=(n,e,t,r)=>{switch(t.type){case"year":return e.fieldYearPlaceholder({digitAmount:n.formatByString(n.date(void 0,"default"),r).length,format:r});case"month":return e.fieldMonthPlaceholder({contentType:t.contentType,format:r});case"day":return e.fieldDayPlaceholder({format:r});case"weekDay":return e.fieldWeekDayPlaceholder({contentType:t.contentType,format:r});case"hours":return e.fieldHoursPlaceholder({format:r});case"minutes":return e.fieldMinutesPlaceholder({format:r});case"seconds":return e.fieldSecondsPlaceholder({format:r});case"meridiem":return e.fieldMeridiemPlaceholder({format:r});default:return r}},jG=({adapter:n,date:e,shouldRespectLeadingZeros:t,localeText:r,localizedDigits:i,now:a,token:s,startSeparator:o})=>{if(s==="")throw new Error("MUI X: Should not call `commitToken` with an empty token");const c=pO(n,s),d=yO(n,c.contentType,c.type,s),f=t?d:c.contentType==="digit",p=n.isValid(e);let g=p?n.formatByString(e,s):"",m=null;if(f)if(d)m=g===""?n.formatByString(a,s).length:g.length;else{if(c.maxLength==null)throw new Error(`MUI X: The token ${s} should have a 'maxLength' property on it's adapter`);m=c.maxLength,p&&(g=v_(x_(tu(g,i),m),i))}return H({},c,{format:s,maxLength:m,value:g,placeholder:VG(n,r,c,s),hasLeadingZerosInFormat:d,hasLeadingZerosInInput:f,startSeparator:o,endSeparator:"",modified:!1})},UG=n=>{var m;const{adapter:e,expandedFormat:t,escapedParts:r}=n,i=e.date(void 0),a=[];let s="";const o=Object.keys(e.formatTokenMap).sort((x,b)=>b.length-x.length),c=/^([a-zA-Z]+)/,d=new RegExp(`^(${o.join("|")})*$`),f=new RegExp(`^(${o.join("|")})`),p=x=>r.find(b=>b.start<=x&&b.end>=x);let g=0;for(;g<t.length;){const x=p(g),b=x!=null,A=(m=c.exec(t.slice(g)))==null?void 0:m[1];if(!b&&A!=null&&d.test(A)){let E=A;for(;E.length>0;){const C=f.exec(E)[1];E=E.slice(C.length),a.push(jG(H({},n,{now:i,token:C,startSeparator:s}))),s=""}g+=A.length}else{const E=t[g];b&&(x==null?void 0:x.start)===g||(x==null?void 0:x.end)===g||(a.length===0?s+=E:(a[a.length-1].endSeparator+=E,a[a.length-1].isEndFormatSeparator=!0)),g+=1}}return a.length===0&&s.length>0&&a.push({type:"empty",contentType:"letter",maxLength:null,format:"",value:"",placeholder:"",hasLeadingZerosInFormat:!1,hasLeadingZerosInInput:!1,startSeparator:s,endSeparator:"",modified:!1}),a},HG=({isRtl:n,formatDensity:e,sections:t})=>t.map(r=>{const i=a=>{let s=a;return n&&s!==null&&s.includes(" ")&&(s=`${s}`),e==="spacious"&&["/",".","-"].includes(s)&&(s=` ${s} `),s};return r.startSeparator=i(r.startSeparator),r.endSeparator=i(r.endSeparator),r}),gD=n=>{let e=BG(n);n.isRtl&&n.enableAccessibleFieldDOMStructure&&(e=e.split(" ").reverse().join(" "));const t=FG(H({},n,{expandedFormat:e})),r=UG(H({},n,{expandedFormat:e,escapedParts:t}));return HG(H({},n,{sections:r}))},b_=M.createContext(null),ql=()=>{const n=M.useContext(b_);if(n==null)throw new Error("MUI X: The `usePickerContext` hook can only be called inside the context of a Picker component");return n},__=()=>M.useContext(b_),vO=M.createContext(()=>!0);function zG(){return M.useContext(vO)}const xO=M.createContext(null);function wO(){return M.useContext(xO)}const bO=M.createContext(null),_O=M.createContext({ownerState:{isPickerDisabled:!1,isPickerReadOnly:!1,isPickerValueEmpty:!1,isPickerOpen:!1,pickerVariant:"desktop",pickerOrientation:"portrait"},rootRefObject:{current:null},labelId:void 0,dismissViews:()=>{},hasUIView:!0,getCurrentViewMode:()=>"UI",triggerElement:null,viewContainerRole:null,defaultActionBarActions:[],onPopperExited:void 0});function AO(n){const{contextValue:e,actionsContextValue:t,privateContextValue:r,fieldPrivateContextValue:i,isValidContextValue:a,localeText:s,children:o}=n;return v.jsx(b_.Provider,{value:e,children:v.jsx(bO.Provider,{value:t,children:v.jsx(_O.Provider,{value:r,children:v.jsx(xO.Provider,{value:i,children:v.jsx(vO.Provider,{value:a,children:v.jsx(cO,{localeText:s,children:o})})})})})})}const $G=()=>{const n=M.useContext(bO);if(n==null)throw new Error(["MUI X: The `usePickerActionsContext` can only be called in fields that are used as a slot of a Picker component"].join(`
`));return n},EO=()=>g_().defaultDates,wf=n=>{const e=Yt(),t=M.useRef(void 0);return t.current===void 0&&(t.current=e.date(void 0,n)),t.current},GG=Ul(v.jsx("path",{d:"M7 10l5 5 5-5z"})),WG=Ul(v.jsx("path",{d:"M15.41 16.59L10.83 12l4.58-4.59L14 6l-6 6 6 6 1.41-1.41z"})),YG=Ul(v.jsx("path",{d:"M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z"})),qG=Ul(v.jsx("path",{d:"M17 12h-5v5h5v-5zM16 1v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2h-1V1h-2zm3 18H5V8h14v11z"}));Ul(v.jsxs(M.Fragment,{children:[v.jsx("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),v.jsx("path",{d:"M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"})]}));const XG=Ul(v.jsx("path",{d:"M9 11H7v2h2v-2zm4 0h-2v2h2v-2zm4 0h-2v2h2v-2zm2-7h-1V2h-2v2H8V2H6v2H5c-1.11 0-1.99.9-1.99 2L3 20c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 16H5V9h14v11z"})),KG=Ul(v.jsxs(M.Fragment,{children:[v.jsx("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),v.jsx("path",{d:"M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"})]})),QG=Ul(v.jsx("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}));function ZG(n){return Mt("MuiPickersArrowSwitcher",n)}Ot("MuiPickersArrowSwitcher",["root","spacer","button","previousIconButton","nextIconButton","leftArrowIcon","rightArrowIcon"]);const sr=()=>M.useContext(_O),JG=["children","className","slots","slotProps","isNextDisabled","isNextHidden","onGoToNext","nextLabel","isPreviousDisabled","isPreviousHidden","onGoToPrevious","previousLabel","labelId","classes"],eW=["ownerState"],tW=["ownerState"],nW=ke("div",{name:"MuiPickersArrowSwitcher",slot:"Root"})({display:"flex"}),rW=ke("div",{name:"MuiPickersArrowSwitcher",slot:"Spacer"})(({theme:n})=>({width:n.spacing(3)})),mD=ke($r,{name:"MuiPickersArrowSwitcher",slot:"Button"})({variants:[{props:{isButtonHidden:!0},style:{visibility:"hidden"}}]}),iW=n=>xt({root:["root"],spacer:["spacer"],button:["button"],previousIconButton:["previousIconButton"],nextIconButton:["nextIconButton"],leftArrowIcon:["leftArrowIcon"],rightArrowIcon:["rightArrowIcon"]},ZG,n),aW=M.forwardRef(function(e,t){const r=Ma(),i=bt({props:e,name:"MuiPickersArrowSwitcher"}),{children:a,className:s,slots:o,slotProps:c,isNextDisabled:d,isNextHidden:f,onGoToNext:p,nextLabel:g,isPreviousDisabled:m,isPreviousHidden:x,onGoToPrevious:b,previousLabel:A,labelId:E,classes:C}=i,T=Be(i,JG),{ownerState:D}=sr(),k=iW(C),B={isDisabled:d,isHidden:f,goTo:p,label:g},O={isDisabled:m,isHidden:x,goTo:b,label:A},I=(o==null?void 0:o.previousIconButton)??mD,R=Ct({elementType:I,externalSlotProps:c==null?void 0:c.previousIconButton,additionalProps:{size:"medium",title:O.label,"aria-label":O.label,disabled:O.isDisabled,edge:"end",onClick:O.goTo},ownerState:H({},D,{isButtonHidden:O.isHidden??!1}),className:Ut(k.button,k.previousIconButton)}),F=(o==null?void 0:o.nextIconButton)??mD,N=Ct({elementType:F,externalSlotProps:c==null?void 0:c.nextIconButton,additionalProps:{size:"medium",title:B.label,"aria-label":B.label,disabled:B.isDisabled,edge:"start",onClick:B.goTo},ownerState:H({},D,{isButtonHidden:B.isHidden??!1}),className:Ut(k.button,k.nextIconButton)}),P=(o==null?void 0:o.leftArrowIcon)??WG,V=Ct({elementType:P,externalSlotProps:c==null?void 0:c.leftArrowIcon,additionalProps:{fontSize:"inherit"},ownerState:D,className:k.leftArrowIcon}),q=Be(V,eW),X=(o==null?void 0:o.rightArrowIcon)??YG,G=Ct({elementType:X,externalSlotProps:c==null?void 0:c.rightArrowIcon,additionalProps:{fontSize:"inherit"},ownerState:D,className:k.rightArrowIcon}),W=Be(G,tW);return v.jsxs(nW,H({ref:t,className:Ut(k.root,s),ownerState:D},T,{children:[v.jsx(I,H({},R,{children:r?v.jsx(X,H({},W)):v.jsx(P,H({},q))})),a?v.jsx(te,{variant:"subtitle1",component:"span",id:E,children:a}):v.jsx(rW,{className:k.spacer,ownerState:D}),v.jsx(F,H({},N,{children:r?v.jsx(P,H({},q)):v.jsx(X,H({},W))}))]}))}),SO=["hours","minutes","seconds"],sW=["hours","minutes","seconds","meridiem"],C0=n=>SO.includes(n),Ed=n=>sW.includes(n),oW=(n,e)=>n?e.getHours(n)>=12?"pm":"am":null,Iw=(n,e,t)=>t&&(n>=12?"pm":"am")!==e?e==="am"?n-12:n+12:n,lW=(n,e,t,r)=>{const i=Iw(r.getHours(n),e,t);return r.setHours(n,i)},yD=(n,e)=>e.getHours(n)*3600+e.getMinutes(n)*60+e.getSeconds(n),cy=(n,e)=>(t,r)=>n?e.isAfter(t,r):yD(t,e)>yD(r,e),vD=(n,{format:e,views:t,ampm:r})=>{if(e!=null)return e;const i=n.formats;return ws(t,["hours"])?r?`${i.hours12h} ${i.meridiem}`:i.hours24h:ws(t,["minutes"])?i.minutes:ws(t,["seconds"])?i.seconds:ws(t,["minutes","seconds"])?`${i.minutes}:${i.seconds}`:ws(t,["hours","minutes","seconds"])?r?`${i.hours12h}:${i.minutes}:${i.seconds} ${i.meridiem}`:`${i.hours24h}:${i.minutes}:${i.seconds}`:r?`${i.hours12h}:${i.minutes} ${i.meridiem}`:`${i.hours24h}:${i.minutes}`},CO={hasNextStep:!1,hasSeveralSteps:!1,goToNextStep:()=>{},areViewsInSameStep:()=>!0};function cW(n){const{steps:e,isViewMatchingStep:t,onStepChange:r}=n;return i=>{if(e==null)return CO;const a=e.findIndex(o=>t(i.view,o)),s=a===-1||a===e.length-1?null:e[a+1];return{hasNextStep:s!=null,hasSeveralSteps:e.length>1,goToNextStep:()=>{s!=null&&r(H({},i,{step:s}))},areViewsInSameStep:(o,c)=>{const d=e.find(p=>t(o,p)),f=e.find(p=>t(c,p));return d===f}}}}function uy({onChange:n,onViewChange:e,openTo:t,view:r,views:i,autoFocus:a,focusedView:s,onFocusedViewChange:o,getStepNavigation:c}){const d=M.useRef(t),f=M.useRef(i),p=M.useRef(i.includes(t)?t:i[0]),[g,m]=Hd({name:"useViews",state:"view",controlled:r,default:p.current}),x=M.useRef(a?g:null),[b,A]=Hd({name:"useViews",state:"focusedView",controlled:s,default:x.current}),E=c?c({setView:m,view:g,defaultView:p.current,views:i}):CO;M.useEffect(()=>{(d.current&&d.current!==t||f.current&&f.current.some(R=>!i.includes(R)))&&(m(i.includes(t)?t:i[0]),f.current=i,d.current=t)},[t,m,g,i]);const C=i.indexOf(g),T=i[C-1]??null,D=i[C+1]??null,k=He((R,F)=>{A(F?R:N=>R===N?null:N),o==null||o(R,F)}),B=He(R=>{k(R,!0),R!==g&&(m(R),e&&e(R))}),O=He(()=>{D&&B(D)}),I=He((R,F,N)=>{const P=F==="finish",V=N?i.indexOf(N)<i.length-1:!!D;n(R,P&&V?"partial":F,N);let X=null;if(N!=null&&N!==g?X=N:P&&(X=g),X==null)return;const G=i[i.indexOf(X)+1];G==null||!E.areViewsInSameStep(X,G)||B(G)});return H({},E,{view:g,setView:B,focusedView:b,setFocusedView:k,nextView:D,previousView:T,defaultView:i.includes(t)?t:i[0],goToNextView:O,setValueAndGoToNextView:I})}function uW(n,{disableFuture:e,maxDate:t,timezone:r}){const i=Yt();return M.useMemo(()=>{const a=i.date(void 0,r),s=i.startOfMonth(e&&i.isBefore(a,t)?a:t);return!i.isAfter(s,n)},[e,t,n,i,r])}function dW(n,{disablePast:e,minDate:t,timezone:r}){const i=Yt();return M.useMemo(()=>{const a=i.date(void 0,r),s=i.startOfMonth(e&&i.isAfter(a,t)?a:t);return!i.isBefore(s,n)},[e,t,n,i,r])}function TO(n,e,t,r){const i=Yt(),a=M.useMemo(()=>i.isValid(n)?n:null,[i,n]),s=oW(a,i),o=M.useCallback(c=>{const d=a==null?null:lW(a,c,!!e,i);t(d,r??"partial")},[e,a,t,r,i]);return{meridiemMode:s,handleMeridiemChange:o}}const T0=36,dy=2,Qd=320,fW=280,Zd=336,IO=232,Jh=48,A_=ke("div")({overflow:"hidden",width:Qd,maxHeight:Zd,display:"flex",flexDirection:"column",margin:"0 auto"}),cu=({name:n,timezone:e,value:t,defaultValue:r,referenceDate:i,onChange:a,valueManager:s})=>{const o=Yt(),[c,d]=Hd({name:n,state:"value",controlled:t,default:r??s.emptyValue}),f=M.useMemo(()=>s.getTimezone(o,c),[o,s,c]),p=He(b=>f==null?b:s.setTimezone(o,f,b)),g=M.useMemo(()=>e||f||(i?o.getTimezone(Array.isArray(i)?i[0]:i):"default"),[e,f,i,o]),m=M.useMemo(()=>s.setTimezone(o,g,c),[s,o,g,c]),x=He((b,...A)=>{const E=p(b);d(E),a==null||a(E,...A)});return{value:m,handleValueChange:x,timezone:g}},za={year:1,month:2,day:3,hours:4,minutes:5,seconds:6,milliseconds:7},hW=n=>Math.max(...n.map(e=>za[e.type]??1)),Rh=(n,e,t)=>{if(e===za.year)return n.startOfYear(t);if(e===za.month)return n.startOfMonth(t);if(e===za.day)return n.startOfDay(t);let r=t;return e<za.minutes&&(r=n.setMinutes(r,0)),e<za.seconds&&(r=n.setSeconds(r,0)),e<za.milliseconds&&(r=n.setMilliseconds(r,0)),r},pW=({props:n,adapter:e,granularity:t,timezone:r,getTodayDate:i})=>{let a=i?i():Rh(e,t,y_(e,r));n.minDate!=null&&e.isAfterDay(n.minDate,a)&&(a=Rh(e,t,n.minDate)),n.maxDate!=null&&e.isBeforeDay(n.maxDate,a)&&(a=Rh(e,t,n.maxDate));const s=cy(n.disableIgnoringDatePartForTimeValidation??!1,e);return n.minTime!=null&&s(n.minTime,a)&&(a=Rh(e,t,n.disableIgnoringDatePartForTimeValidation?n.minTime:Jm(e,a,n.minTime))),n.maxTime!=null&&s(a,n.maxTime)&&(a=Rh(e,t,n.disableIgnoringDatePartForTimeValidation?n.maxTime:Jm(e,a,n.maxTime))),a},gW=["value","referenceDate"],Oi={emptyValue:null,getTodayValue:y_,getInitialReferenceValue:n=>{let{value:e,referenceDate:t}=n,r=Be(n,gW);return r.adapter.isValid(e)?e:t??pW(r)},cleanValue:EG,areValuesEqual:SG,isSameError:(n,e)=>n===e,hasError:n=>n!=null,defaultErrorState:null,getTimezone:(n,e)=>n.isValid(e)?n.getTimezone(e):null,setTimezone:(n,e,t)=>t==null?null:n.setTimezone(t,e)},mW={updateReferenceValue:(n,e,t)=>n.isValid(e)?e:t,getSectionsFromValue:(n,e)=>e(n),getV7HiddenInputValueFromSections:MG,getV6InputValueFromSections:OG,parseValueStr:(n,e,t)=>t(n.trim(),e),getDateFromSection:n=>n,getDateSectionsFromValue:n=>n,updateDateInValue:(n,e,t)=>t,clearDateSections:n=>n.map(e=>H({},e,{value:""}))},DO=({value:n,referenceDate:e,adapter:t,props:r,timezone:i})=>{const a=M.useMemo(()=>Oi.getInitialReferenceValue({value:n,adapter:t,props:r,referenceDate:e,granularity:za.day,timezone:i,getTodayDate:()=>y_(t,i,"date")}),[e,i]);return n??a};function yW(n){return Mt("MuiDigitalClock",n)}const Dw=Ot("MuiDigitalClock",["root","list","item"]);function vW(n,e){return Array.isArray(e)?e.every(t=>n.indexOf(t)!==-1):n.indexOf(e)!==-1}const xW=n=>{setTimeout(n,0)},RO=(n=document)=>{const e=n.activeElement;return e?e.shadowRoot?RO(e.shadowRoot):e:null},gi=n=>RO(n0(n)),t1=n=>Array.from(n.children).indexOf(gi(n)),wW="@media (pointer: fine)";function bW(...n){return n.reduce((e,t)=>(Array.isArray(t)?e.push(...t):t!=null&&e.push(t),e),[])}const _W=["ampm","timeStep","autoFocus","slots","slotProps","value","defaultValue","referenceDate","disableIgnoringDatePartForTimeValidation","maxTime","minTime","disableFuture","disablePast","minutesStep","shouldDisableTime","onChange","view","openTo","onViewChange","focusedView","onFocusedViewChange","className","classes","disabled","readOnly","views","skipDisabled","timezone"],AW=n=>xt({root:["root"],list:["list"],item:["item"]},yW,n),EW=ke(A_,{name:"MuiDigitalClock",slot:"Root"})({overflowY:"auto",width:"100%",scrollbarWidth:"thin","@media (prefers-reduced-motion: no-preference)":{scrollBehavior:"auto"},maxHeight:IO,variants:[{props:{hasDigitalClockAlreadyBeenRendered:!0},style:{"@media (prefers-reduced-motion: no-preference)":{scrollBehavior:"smooth"}}}]}),SW=ke(uR,{name:"MuiDigitalClock",slot:"List"})({padding:0}),CW=ke(Zt,{name:"MuiDigitalClock",slot:"Item",shouldForwardProp:n=>n!=="itemValue"&&n!=="formattedValue"})(({theme:n})=>({padding:"8px 16px",margin:"2px 4px","&:first-of-type":{marginTop:4},"&:hover":{backgroundColor:n.vars?`rgba(${n.vars.palette.primary.mainChannel} / ${n.vars.palette.action.hoverOpacity})`:Bs(n.palette.primary.main,n.palette.action.hoverOpacity)},"&.Mui-selected":{backgroundColor:(n.vars||n).palette.primary.main,color:(n.vars||n).palette.primary.contrastText,"&:focus-visible, &:hover":{backgroundColor:(n.vars||n).palette.primary.dark}},"&.Mui-focusVisible":{backgroundColor:n.vars?`rgba(${n.vars.palette.primary.mainChannel} / ${n.vars.palette.action.focusOpacity})`:Bs(n.palette.primary.main,n.palette.action.focusOpacity)}})),TW=M.forwardRef(function(e,t){const r=Yt(),i=M.useRef(null),a=oi(t,i),s=M.useRef(null),o=bt({props:e,name:"MuiDigitalClock"}),{ampm:c=r.is12HourCycleInCurrentLocale(),timeStep:d=30,autoFocus:f,slots:p,slotProps:g,value:m,defaultValue:x,referenceDate:b,disableIgnoringDatePartForTimeValidation:A=!1,maxTime:E,minTime:C,disableFuture:T,disablePast:D,minutesStep:k=1,shouldDisableTime:B,onChange:O,view:I,openTo:R,onViewChange:F,focusedView:N,onFocusedViewChange:P,className:V,classes:q,disabled:X,readOnly:G,views:W=["hours"],skipDisabled:K=!1,timezone:Z}=o,fe=Be(o,_W),{value:ge,handleValueChange:ve,timezone:be}=cu({name:"DigitalClock",timezone:Z,value:m,defaultValue:x,referenceDate:b,onChange:O,valueManager:Oi}),Pe=Ja(),ue=wf(be),{ownerState:Se}=sr(),Ae=H({},Se,{hasDigitalClockAlreadyBeenRendered:!!i.current}),Fe=AW(q),ae=(p==null?void 0:p.digitalClockItem)??CW,ye=Ct({elementType:ae,externalSlotProps:g==null?void 0:g.digitalClockItem,ownerState:Ae,className:Fe.item}),pe=DO({value:ge,referenceDate:b,adapter:r,props:o,timezone:be}),ie=He(We=>ve(We,"finish","hours")),{setValueAndGoToNextView:Ve}=uy({view:I,views:W,openTo:R,onViewChange:F,onChange:ie,focusedView:N,onFocusedViewChange:P}),we=He(We=>{Ve(We,"finish")});Xn(()=>{if(i.current===null)return;const We=i.current.querySelector('[role="listbox"] [role="option"][tabindex="0"], [role="listbox"] [role="option"][aria-selected="true"]');if(!We)return;const Me=We.offsetTop;(f||N)&&We.focus(),i.current.scrollTop=Me-4});const ze=M.useCallback(We=>{const Me=cy(A,r),Ne=()=>!(C&&Me(C,We)||E&&Me(We,E)||T&&Me(We,ue)||D&&Me(ue,We)),ft=()=>r.getMinutes(We)%k!==0?!1:B?!B(We,"hours"):!0;return!Ne()||!ft()},[A,r,C,E,T,ue,D,k,B]),Oe=M.useMemo(()=>{const We=[];let Ne=r.startOfDay(pe);for(;r.isSameDay(pe,Ne);)We.push(Ne),Ne=r.addMinutes(Ne,d);return We},[pe,d,r]),Re=Oe.findIndex(We=>r.isEqual(We,pe)),qe=We=>{switch(We.key){case"PageUp":{const Me=t1(s.current)-5,Ne=s.current.children,ft=Math.max(0,Me),_t=Ne[ft];_t&&_t.focus(),We.preventDefault();break}case"PageDown":{const Me=t1(s.current)+5,Ne=s.current.children,ft=Math.min(Ne.length-1,Me),_t=Ne[ft];_t&&_t.focus(),We.preventDefault();break}}};return v.jsx(EW,H({ref:a,className:Ut(Fe.root,V),ownerState:Ae},fe,{children:v.jsx(SW,{ref:s,role:"listbox","aria-label":Pe.timePickerToolbarTitle,className:Fe.list,onKeyDown:qe,children:Oe.map((We,Me)=>{const Ne=ze(We);if(K&&Ne)return null;const ft=r.isEqual(We,ge),_t=r.format(We,c?"fullTime12h":"fullTime24h"),Mn=Re===Me||Re===-1&&Me===0?0:-1;return v.jsx(ae,H({onClick:()=>!G&&we(We),selected:ft,disabled:X||Ne,disableRipple:G,role:"option","aria-disabled":G,"aria-selected":ft,tabIndex:Mn,itemValue:We,formattedValue:_t},ye,{children:_t}),`${We.valueOf()}-${_t}`)})})}))});function IW(n){return Mt("MuiMultiSectionDigitalClock",n)}const Rw=Ot("MuiMultiSectionDigitalClock",["root"]);function DW(n){return Mt("MuiMultiSectionDigitalClockSection",n)}const Mw=Ot("MuiMultiSectionDigitalClockSection",["root","item"]),RW=["autoFocus","onChange","className","classes","disabled","readOnly","items","active","slots","slotProps","skipDisabled"],MW=n=>xt({root:["root"],item:["item"]},DW,n),OW=ke(uR,{name:"MuiMultiSectionDigitalClockSection",slot:"Root"})(({theme:n})=>({maxHeight:IO,width:56,padding:0,overflow:"hidden",scrollbarWidth:"thin","@media (prefers-reduced-motion: no-preference)":{scrollBehavior:"auto"},"@media (pointer: fine)":{"&:hover":{overflowY:"auto"}},"@media (pointer: none), (pointer: coarse)":{overflowY:"auto"},"&:not(:first-of-type)":{borderLeft:`1px solid ${(n.vars||n).palette.divider}`},variants:[{props:{hasDigitalClockAlreadyBeenRendered:!0},style:{"@media (prefers-reduced-motion: no-preference)":{scrollBehavior:"smooth"}}}]})),PW=ke(Zt,{name:"MuiMultiSectionDigitalClockSection",slot:"Item"})(({theme:n})=>({padding:8,margin:"2px 4px",width:Jh,justifyContent:"center","&:first-of-type":{marginTop:4},"&:hover":{backgroundColor:n.vars?`rgba(${n.vars.palette.primary.mainChannel} / ${n.vars.palette.action.hoverOpacity})`:Bs(n.palette.primary.main,n.palette.action.hoverOpacity)},"&.Mui-selected":{backgroundColor:(n.vars||n).palette.primary.main,color:(n.vars||n).palette.primary.contrastText,"&:focus-visible, &:hover":{backgroundColor:(n.vars||n).palette.primary.dark}},"&.Mui-focusVisible":{backgroundColor:n.vars?`rgba(${n.vars.palette.primary.mainChannel} / ${n.vars.palette.action.focusOpacity})`:Bs(n.palette.primary.main,n.palette.action.focusOpacity)}})),kW=M.forwardRef(function(e,t){const r=M.useRef(null),i=oi(t,r),a=M.useRef(null),s=bt({props:e,name:"MuiMultiSectionDigitalClockSection"}),{autoFocus:o,onChange:c,className:d,classes:f,disabled:p,readOnly:g,items:m,active:x,slots:b,slotProps:A,skipDisabled:E}=s,C=Be(s,RW),{ownerState:T}=sr(),D=H({},T,{hasDigitalClockAlreadyBeenRendered:!!r.current}),k=MW(f),B=(b==null?void 0:b.digitalClockSectionItem)??PW;Xn(()=>{if(r.current===null)return;const R=r.current.querySelector('[role="option"][tabindex="0"], [role="option"][aria-selected="true"]');if(x&&o&&R&&R.focus(),!R||a.current===R)return;a.current=R;const F=R.offsetTop,N=R.offsetHeight,P=r.current.clientHeight,V=r.current.scrollHeight,q=F-P/2+N/2,X=V-P,G=Math.min(q,X);r.current.scrollTop=Math.max(0,G)});const O=m.findIndex(R=>R.isFocused(R.value)),I=R=>{switch(R.key){case"PageUp":{const F=t1(r.current)-5,N=r.current.children,P=Math.max(0,F),V=N[P];V&&V.focus(),R.preventDefault();break}case"PageDown":{const F=t1(r.current)+5,N=r.current.children,P=Math.min(N.length-1,F),V=N[P];V&&V.focus(),R.preventDefault();break}}};return v.jsx(OW,H({ref:i,className:Ut(k.root,d),ownerState:D,autoFocusItem:o&&x,role:"listbox",onKeyDown:I},C,{children:m.map((R,F)=>{var X;const N=(X=R.isDisabled)==null?void 0:X.call(R,R.value),P=p||N;if(E&&P)return null;const V=R.isSelected(R.value),q=O===F||O===-1&&F===0?0:-1;return v.jsx(B,H({onClick:()=>!g&&c(R.value),selected:V,disabled:P,disableRipple:g,role:"option","aria-disabled":g||P||void 0,"aria-label":R.ariaLabel,"aria-selected":V,tabIndex:q,className:k.item},A==null?void 0:A.digitalClockSectionItem,{children:R.label}),R.label)})}))}),NW=({now:n,value:e,adapter:t,ampm:r,isDisabled:i,resolveAriaLabel:a,timeStep:s,valueOrReferenceDate:o})=>{const c=e?t.getHours(e):null,d=[],f=(m,x)=>{const b=x??c;return b===null?!1:r?m===12?b===12||b===0:b===m||b-12===m:b===m},p=m=>f(m,t.getHours(o)),g=r?11:23;for(let m=0;m<=g;m+=s){let x=t.format(t.setHours(n,m),r?"hours12h":"hours24h");const b=a(parseInt(x,10).toString());x=t.formatNumber(x),d.push({value:m,label:x,isSelected:f,isDisabled:i,isFocused:p,ariaLabel:b})}return d},xD=({value:n,adapter:e,isDisabled:t,timeStep:r,resolveLabel:i,resolveAriaLabel:a,hasValue:s=!0})=>{const o=d=>n===null?!1:s&&n===d,c=d=>n===d;return[...Array.from({length:Math.ceil(60/r)},(d,f)=>{const p=r*f;return{value:p,label:e.formatNumber(i(p)),isDisabled:t,isSelected:o,isFocused:c,ariaLabel:a(p.toString())}})]},LW=["ampm","timeSteps","autoFocus","slots","slotProps","value","defaultValue","referenceDate","disableIgnoringDatePartForTimeValidation","maxTime","minTime","disableFuture","disablePast","minutesStep","shouldDisableTime","onChange","view","views","openTo","onViewChange","focusedView","onFocusedViewChange","className","classes","disabled","readOnly","skipDisabled","timezone"],BW=n=>xt({root:["root"]},IW,n),FW=ke(A_,{name:"MuiMultiSectionDigitalClock",slot:"Root"})(({theme:n})=>({flexDirection:"row",width:"100%",borderBottom:`1px solid ${(n.vars||n).palette.divider}`})),VW=M.forwardRef(function(e,t){const r=Yt(),i=Ma(),a=bt({props:e,name:"MuiMultiSectionDigitalClock"}),{ampm:s=r.is12HourCycleInCurrentLocale(),timeSteps:o,autoFocus:c,slots:d,slotProps:f,value:p,defaultValue:g,referenceDate:m,disableIgnoringDatePartForTimeValidation:x=!1,maxTime:b,minTime:A,disableFuture:E,disablePast:C,minutesStep:T=1,shouldDisableTime:D,onChange:k,view:B,views:O=["hours","minutes"],openTo:I,onViewChange:R,focusedView:F,onFocusedViewChange:N,className:P,classes:V,disabled:q,readOnly:X,skipDisabled:G=!1,timezone:W}=a,K=Be(a,LW),{value:Z,handleValueChange:fe,timezone:ge}=cu({name:"MultiSectionDigitalClock",timezone:W,value:p,defaultValue:g,referenceDate:m,onChange:k,valueManager:Oi}),ve=Ja(),be=wf(ge),Pe=M.useMemo(()=>H({hours:1,minutes:5,seconds:5},o),[o]),ue=DO({value:Z,referenceDate:m,adapter:r,props:a,timezone:ge}),Se=He((Me,Ne,ft)=>fe(Me,Ne,ft)),Ae=M.useMemo(()=>!s||!O.includes("hours")||O.includes("meridiem")?O:[...O,"meridiem"],[s,O]),{view:Fe,setValueAndGoToNextView:ae,focusedView:ye}=uy({view:B,views:Ae,openTo:I,onViewChange:R,onChange:Se,focusedView:F,onFocusedViewChange:N}),pe=He(Me=>{ae(Me,"finish","meridiem")}),{meridiemMode:ie,handleMeridiemChange:Ve}=TO(ue,s,pe,"finish"),we=M.useCallback((Me,Ne)=>{const ft=cy(x,r),_t=Ne==="hours"||Ne==="minutes"&&Ae.includes("seconds"),xn=({start:rt,end:at})=>!(A&&ft(A,at)||b&&ft(rt,b)||E&&ft(rt,be)||C&&ft(be,_t?at:rt)),Mn=(rt,at=1)=>{if(rt%at!==0)return!1;if(D)switch(Ne){case"hours":return!D(r.setHours(ue,rt),"hours");case"minutes":return!D(r.setMinutes(ue,rt),"minutes");case"seconds":return!D(r.setSeconds(ue,rt),"seconds");default:return!1}return!0};switch(Ne){case"hours":{const rt=Iw(Me,ie,s),at=r.setHours(ue,rt);if(r.getHours(at)!==rt)return!0;const Cn=r.setSeconds(r.setMinutes(at,0),0),Qe=r.setSeconds(r.setMinutes(at,59),59);return!xn({start:Cn,end:Qe})||!Mn(rt)}case"minutes":{const rt=r.setMinutes(ue,Me),at=r.setSeconds(rt,0),Cn=r.setSeconds(rt,59);return!xn({start:at,end:Cn})||!Mn(Me,T)}case"seconds":{const rt=r.setSeconds(ue,Me);return!xn({start:rt,end:rt})||!Mn(Me)}default:throw new Error("not supported")}},[s,ue,x,b,ie,A,T,D,r,E,C,be,Ae]),ze=M.useCallback(Me=>{switch(Me){case"hours":return{onChange:Ne=>{const ft=Iw(Ne,ie,s);ae(r.setHours(ue,ft),"finish","hours")},items:NW({now:be,value:Z,ampm:s,adapter:r,isDisabled:Ne=>we(Ne,"hours"),timeStep:Pe.hours,resolveAriaLabel:ve.hoursClockNumberText,valueOrReferenceDate:ue})};case"minutes":return{onChange:Ne=>{ae(r.setMinutes(ue,Ne),"finish","minutes")},items:xD({value:r.getMinutes(ue),adapter:r,isDisabled:Ne=>we(Ne,"minutes"),resolveLabel:Ne=>r.format(r.setMinutes(be,Ne),"minutes"),timeStep:Pe.minutes,hasValue:!!Z,resolveAriaLabel:ve.minutesClockNumberText})};case"seconds":return{onChange:Ne=>{ae(r.setSeconds(ue,Ne),"finish","seconds")},items:xD({value:r.getSeconds(ue),adapter:r,isDisabled:Ne=>we(Ne,"seconds"),resolveLabel:Ne=>r.format(r.setSeconds(be,Ne),"seconds"),timeStep:Pe.seconds,hasValue:!!Z,resolveAriaLabel:ve.secondsClockNumberText})};case"meridiem":{const Ne=u0(r,"am"),ft=u0(r,"pm");return{onChange:Ve,items:[{value:"am",label:Ne,isSelected:()=>!!Z&&ie==="am",isFocused:()=>!!ue&&ie==="am",ariaLabel:Ne},{value:"pm",label:ft,isSelected:()=>!!Z&&ie==="pm",isFocused:()=>!!ue&&ie==="pm",ariaLabel:ft}]}}default:throw new Error(`Unknown view: ${Me} found.`)}},[be,Z,s,r,Pe.hours,Pe.minutes,Pe.seconds,ve.hoursClockNumberText,ve.minutesClockNumberText,ve.secondsClockNumberText,ie,ae,ue,we,Ve]),Oe=M.useMemo(()=>{if(!i)return Ae;const Me=Ae.filter(Ne=>Ne!=="meridiem");return Me.reverse(),Ae.includes("meridiem")&&Me.push("meridiem"),Me},[i,Ae]),Re=M.useMemo(()=>Ae.reduce((Me,Ne)=>H({},Me,{[Ne]:ze(Ne)}),{}),[Ae,ze]),{ownerState:qe}=sr(),We=BW(V);return v.jsx(FW,H({ref:t,className:Ut(We.root,P),ownerState:qe,role:"group"},K,{children:Oe.map(Me=>v.jsx(kW,{items:Re[Me].items,onChange:Re[Me].onChange,active:Fe===Me,autoFocus:c||ye===Me,disabled:q,readOnly:X,slots:d,slotProps:f,skipDisabled:G,"aria-label":ve.selectViewText(Me)},Me))}))});function jW(n){return Mt("MuiPickersDay",n)}const Rc=Ot("MuiPickersDay",["root","dayWithMargin","dayOutsideMonth","hiddenDaySpacingFiller","today","selected","disabled"]);function MO(n){const{disabled:e,selected:t,today:r,outsideCurrentMonth:i,day:a,disableMargin:s,disableHighlightToday:o,showDaysOutsideCurrentMonth:c}=n,d=Yt(),{ownerState:f}=sr();return M.useMemo(()=>H({},f,{day:a,isDaySelected:t??!1,isDayDisabled:e??!1,isDayCurrent:r??!1,isDayOutsideMonth:i??!1,isDayStartOfWeek:d.isSameDay(a,d.startOfWeek(a)),isDayEndOfWeek:d.isSameDay(a,d.endOfWeek(a)),disableMargin:s??!1,disableHighlightToday:o??!1,showDaysOutsideCurrentMonth:c??!1}),[d,f,a,t,e,r,i,s,o,c])}const UW=["autoFocus","className","classes","hidden","isAnimating","onClick","onDaySelect","onFocus","onBlur","onKeyDown","onMouseDown","onMouseEnter","children","isFirstVisibleCell","isLastVisibleCell","day","selected","disabled","today","outsideCurrentMonth","disableMargin","disableHighlightToday","showDaysOutsideCurrentMonth"],HW=(n,e)=>{const{isDaySelected:t,isDayDisabled:r,isDayCurrent:i,isDayOutsideMonth:a,disableMargin:s,disableHighlightToday:o,showDaysOutsideCurrentMonth:c}=e,d=a&&!c;return xt({root:["root",t&&!d&&"selected",r&&"disabled",!s&&"dayWithMargin",!o&&i&&"today",a&&c&&"dayOutsideMonth",d&&"hiddenDaySpacingFiller"],hiddenDaySpacingFiller:["hiddenDaySpacingFiller"]},jW,n)},OO=({theme:n})=>H({},n.typography.caption,{width:T0,height:T0,borderRadius:"50%",padding:0,backgroundColor:"transparent",transition:n.transitions.create("background-color",{duration:n.transitions.duration.short}),color:(n.vars||n).palette.text.primary,"@media (pointer: fine)":{"&:hover":{backgroundColor:n.vars?`rgba(${n.vars.palette.primary.mainChannel} / ${n.vars.palette.action.hoverOpacity})`:Bs(n.palette.primary.main,n.palette.action.hoverOpacity)}},"&:focus":{backgroundColor:n.vars?`rgba(${n.vars.palette.primary.mainChannel} / ${n.vars.palette.action.focusOpacity})`:Bs(n.palette.primary.main,n.palette.action.focusOpacity),[`&.${Rc.selected}`]:{willChange:"background-color",backgroundColor:(n.vars||n).palette.primary.dark}},[`&.${Rc.selected}`]:{color:(n.vars||n).palette.primary.contrastText,backgroundColor:(n.vars||n).palette.primary.main,fontWeight:n.typography.fontWeightMedium,"&:hover":{willChange:"background-color",backgroundColor:(n.vars||n).palette.primary.dark}},[`&.${Rc.disabled}:not(.${Rc.selected})`]:{color:(n.vars||n).palette.text.disabled},[`&.${Rc.disabled}&.${Rc.selected}`]:{opacity:.6},variants:[{props:{disableMargin:!1},style:{margin:`0 ${dy}px`}},{props:{isDayOutsideMonth:!0,showDaysOutsideCurrentMonth:!0},style:{color:(n.vars||n).palette.text.secondary}},{props:{disableHighlightToday:!1,isDayCurrent:!0},style:{[`&:not(.${Rc.selected})`]:{border:`1px solid ${(n.vars||n).palette.text.secondary}`}}}]}),PO=(n,e)=>{const{ownerState:t}=n;return[e.root,!t.disableMargin&&e.dayWithMargin,!t.disableHighlightToday&&t.isDayCurrent&&e.today,!t.isDayOutsideMonth&&t.showDaysOutsideCurrentMonth&&e.dayOutsideMonth,t.isDayOutsideMonth&&!t.showDaysOutsideCurrentMonth&&e.hiddenDaySpacingFiller]},zW=ke(NN,{name:"MuiPickersDay",slot:"Root",overridesResolver:PO})(OO),$W=ke("div",{name:"MuiPickersDay",slot:"Root",overridesResolver:PO})(({theme:n})=>H({},OO({theme:n}),{opacity:0,pointerEvents:"none"})),Mh=()=>{},GW=M.forwardRef(function(e,t){const r=bt({props:e,name:"MuiPickersDay"}),{autoFocus:i=!1,className:a,classes:s,isAnimating:o,onClick:c,onDaySelect:d,onFocus:f=Mh,onBlur:p=Mh,onKeyDown:g=Mh,onMouseDown:m=Mh,onMouseEnter:x=Mh,children:b,day:A,selected:E,disabled:C,today:T,outsideCurrentMonth:D,disableMargin:k,disableHighlightToday:B,showDaysOutsideCurrentMonth:O}=r,I=Be(r,UW),R=MO({day:A,selected:E,disabled:C,today:T,outsideCurrentMonth:D,disableMargin:k,disableHighlightToday:B,showDaysOutsideCurrentMonth:O}),F=HW(s,R),N=Yt(),P=M.useRef(null),V=oi(P,t);Xn(()=>{i&&!C&&!o&&!D&&P.current.focus()},[i,C,o,D]);const q=G=>{m(G),D&&G.preventDefault()},X=G=>{G.defaultMuiPrevented=!0,C||d(A),D&&G.currentTarget.focus(),c&&c(G)};return D&&!O?v.jsx($W,{className:Ut(F.root,F.hiddenDaySpacingFiller,a),ownerState:R,role:I.role}):v.jsx(zW,H({className:Ut(F.root,a),ref:V,centerRipple:!0,disabled:C,tabIndex:E?0:-1,onKeyDown:G=>g(G,A),onFocus:G=>f(G,A),onBlur:G=>p(G,A),onMouseEnter:G=>x(G,A),onClick:X,onMouseDown:q},I,{ownerState:R,children:b??N.format(A,"dayOfMonth")}))}),WW=M.memo(GW),sd=n=>n.saveQuery!=null,kO=({stateResponse:{localizedDigits:n,sectionsValueBoundaries:e,state:t,timezone:r,setCharacterQuery:i,setTempAndroidValueStr:a,updateSectionValue:s}})=>{const o=Yt(),c=({keyPressed:p,sectionIndex:g},m,x)=>{const b=p.toLowerCase(),A=t.sections[g];if(t.characterQuery!=null&&(!x||x(t.characterQuery.value))&&t.characterQuery.sectionIndex===g){const C=`${t.characterQuery.value}${b}`,T=m(C,A);if(!sd(T))return i({sectionIndex:g,value:C,sectionType:A.type}),T}const E=m(b,A);return sd(E)&&!E.saveQuery?(i(null),null):(i({sectionIndex:g,value:b,sectionType:A.type}),sd(E)?null:E)},d=p=>{const g=(b,A,E)=>{const C=A.filter(T=>T.toLowerCase().startsWith(E));return C.length===0?{saveQuery:!1}:{sectionValue:C[0],shouldGoToNextSection:C.length===1}},m=(b,A,E,C)=>{const T=D=>gO(o,r,A.type,D);if(A.contentType==="letter")return g(A.format,T(A.format),b);if(E&&C!=null&&pO(o,E).contentType==="letter"){const D=T(E),k=g(E,D,b);return sd(k)?{saveQuery:!1}:H({},k,{sectionValue:C(k.sectionValue,D)})}return{saveQuery:!1}};return c(p,(b,A)=>{switch(A.type){case"month":{const E=C=>fD(o,C,o.formats.month,A.format);return m(b,A,o.formats.month,E)}case"weekDay":{const E=(C,T)=>T.indexOf(C).toString();return m(b,A,o.formats.weekday,E)}case"meridiem":return m(b,A);default:return{saveQuery:!1}}})},f=p=>{const g=({queryValue:x,skipIfBelowMinimum:b,section:A})=>{const E=tu(x,n),C=Number(E),T=e[A.type]({currentDate:null,format:A.format,contentType:A.contentType});if(C>T.maximum)return{saveQuery:!1};if(b&&C<T.minimum)return{saveQuery:!0};const D=C*10>T.maximum||E.length===T.maximum.toString().length;return{sectionValue:mO(o,C,T,n,A),shouldGoToNextSection:D}};return c(p,(x,b)=>{if(b.contentType==="digit"||b.contentType==="digit-with-letter")return g({queryValue:x,skipIfBelowMinimum:!1,section:b});if(b.type==="month"){yO(o,"digit","month","MM");const A=g({queryValue:x,skipIfBelowMinimum:!0,section:{type:b.type,format:"MM",hasLeadingZerosInInput:!0,contentType:"digit",maxLength:2}});if(sd(A))return A;const E=fD(o,A.sectionValue,"MM",b.format);return H({},A,{sectionValue:E})}if(b.type==="weekDay"){const A=g({queryValue:x,skipIfBelowMinimum:!0,section:b});if(sd(A))return A;const E=ly(o,b.format)[Number(A.sectionValue)-1];return H({},A,{sectionValue:E})}return{saveQuery:!1}},x=>dD(x,n))};return He(p=>{const g=t.sections[p.sectionIndex],x=dD(p.keyPressed,n)?f(H({},p,{keyPressed:v_(p.keyPressed,n)})):d(p);if(x==null){a(null);return}s({section:g,newSectionValue:x.sectionValue,shouldGoToNextSection:x.shouldGoToNextSection})})},E_=({props:n,value:e,timezone:t,adapter:r})=>{if(e===null)return null;const{shouldDisableDate:i,shouldDisableMonth:a,shouldDisableYear:s,disablePast:o,disableFuture:c,minDate:d,maxDate:f}=n,p=r.date(void 0,t);switch(!0){case!r.isValid(e):return"invalidDate";case!!(i&&i(e)):return"shouldDisableDate";case!!(a&&a(e)):return"shouldDisableMonth";case!!(s&&s(e)):return"shouldDisableYear";case!!(c&&r.isAfterDay(e,p)):return"disableFuture";case!!(o&&r.isBeforeDay(e,p)):return"disablePast";case!!(d&&r.isBeforeDay(e,d)):return"minDate";case!!(f&&r.isAfterDay(e,f)):return"maxDate";default:return null}};E_.valueManager=Oi;const NO=({adapter:n,value:e,timezone:t,props:r})=>{if(e===null)return null;const{minTime:i,maxTime:a,minutesStep:s,shouldDisableTime:o,disableIgnoringDatePartForTimeValidation:c=!1,disablePast:d,disableFuture:f}=r,p=n.date(void 0,t),g=cy(c,n);switch(!0){case!n.isValid(e):return"invalidDate";case!!(i&&g(i,e)):return"minTime";case!!(a&&g(e,a)):return"maxTime";case!!(f&&n.isAfter(e,p)):return"disableFuture";case!!(d&&n.isBefore(e,p)):return"disablePast";case!!(o&&o(e,"hours")):return"shouldDisableTime-hours";case!!(o&&o(e,"minutes")):return"shouldDisableTime-minutes";case!!(o&&o(e,"seconds")):return"shouldDisableTime-seconds";case!!(s&&n.getMinutes(e)%s!==0):return"minutesStep";default:return null}};NO.valueManager=Oi;const fy=({adapter:n,value:e,timezone:t,props:r})=>{const i=E_({adapter:n,value:e,timezone:t,props:r});return i!==null?i:NO({adapter:n,value:e,timezone:t,props:r})};fy.valueManager=Oi;function LO(n){const{props:e,validator:t,value:r,timezone:i,onError:a}=n,s=Yt(),o=M.useRef(t.valueManager.defaultErrorState),c=t({adapter:s,value:r,timezone:i,props:e}),d=t.valueManager.hasError(c);M.useEffect(()=>{a&&!t.valueManager.isSameError(c,o.current)&&a(c,r),o.current=c},[t,a,c,r]);const f=He(p=>t({adapter:s,value:p,timezone:i,props:e}));return{validationError:c,hasValidationError:d,getValidationErrorForNewValue:f}}const YW=5e3,BO=n=>{var Oe;const e=Yt(),t=Ja(),r=Ma(),{manager:{validator:i,valueType:a,internal_valueManager:s,internal_fieldValueManager:o},internalPropsWithDefaults:c,internalPropsWithDefaults:{value:d,defaultValue:f,referenceDate:p,onChange:g,format:m,formatDensity:x="dense",selectedSections:b,onSelectedSectionsChange:A,shouldRespectLeadingZeros:E=!1,timezone:C,enableAccessibleFieldDOMStructure:T=!0},forwardedProps:{error:D}}=n,{value:k,handleValueChange:B,timezone:O}=cu({name:"a field component",timezone:C,value:d,defaultValue:f,referenceDate:p,onChange:g,valueManager:s}),I=M.useRef(k);M.useEffect(()=>{I.current=k},[k]);const{hasValidationError:R}=LO({props:c,validator:i,timezone:O,value:k,onError:c.onError}),F=M.useMemo(()=>D!==void 0?D:R,[R,D]),N=M.useMemo(()=>IG(e),[e]),P=M.useMemo(()=>PG(e,N,O),[e,N,O]),V=M.useCallback(Re=>o.getSectionsFromValue(Re,qe=>gD({adapter:e,localeText:t,localizedDigits:N,format:m,date:qe,formatDensity:x,shouldRespectLeadingZeros:E,enableAccessibleFieldDOMStructure:T,isRtl:r})),[o,m,t,N,r,E,e,x,T]),[q,X]=M.useState(()=>{const Re=V(k),qe={sections:Re,lastExternalValue:k,lastSectionsDependencies:{format:m,isRtl:r,locale:e.locale},tempValueStrAndroid:null,characterQuery:null},We=hW(Re),Me=s.getInitialReferenceValue({referenceDate:p,value:k,adapter:e,props:c,granularity:We,timezone:O});return H({},qe,{referenceValue:Me})}),[G,W]=Hd({controlled:b,default:null,name:"useField",state:"selectedSections"}),K=Re=>{W(Re),A==null||A(Re)},Z=M.useMemo(()=>Tw(G,q.sections),[G,q.sections]),fe=Z==="all"?0:Z,ge=M.useMemo(()=>LG(q.sections,r&&!T),[q.sections,r,T]),ve=M.useMemo(()=>q.sections.every(Re=>Re.value===""),[q.sections]),be=Re=>{const qe={validationError:i({adapter:e,value:Re,timezone:O,props:c})};B(Re,qe)},Pe=(Re,qe)=>{const We=[...q.sections];return We[Re]=H({},We[Re],{value:qe,modified:!0}),We},ue=M.useRef(null),Se=Rd(),Ae=Re=>{fe!=null&&(ue.current={sectionIndex:fe,value:Re},Se.start(0,()=>{ue.current=null}))},Fe=()=>{s.areValuesEqual(e,k,s.emptyValue)?X(Re=>H({},Re,{sections:Re.sections.map(qe=>H({},qe,{value:""})),tempValueStrAndroid:null,characterQuery:null})):(X(Re=>H({},Re,{characterQuery:null})),be(s.emptyValue))},ae=()=>{if(fe==null)return;const Re=q.sections[fe];Re.value!==""&&(Ae(""),o.getDateFromSection(k,Re)===null?X(qe=>H({},qe,{sections:Pe(fe,""),tempValueStrAndroid:null,characterQuery:null})):(X(qe=>H({},qe,{characterQuery:null})),be(o.updateDateInValue(k,Re,null))))},ye=Re=>{const qe=(Me,Ne)=>{const ft=e.parse(Me,m);if(!e.isValid(ft))return null;const _t=gD({adapter:e,localeText:t,localizedDigits:N,format:m,date:ft,formatDensity:x,shouldRespectLeadingZeros:E,enableAccessibleFieldDOMStructure:T,isRtl:r});return pD(e,ft,_t,Ne,!1)},We=o.parseValueStr(Re,q.referenceValue,qe);be(We)},pe=Rd(),ie=({section:Re,newSectionValue:qe,shouldGoToNextSection:We})=>{Se.clear(),pe.clear();const Me=o.getDateFromSection(k,Re);We&&fe<q.sections.length-1&&K(fe+1);const Ne=Pe(fe,qe),ft=o.getDateSectionsFromValue(Ne,Re),_t=RG(e,ft,N);if(e.isValid(_t)){const xn=pD(e,_t,ft,o.getDateFromSection(q.referenceValue,Re),!0);return Me==null&&pe.start(0,()=>{I.current===k&&X(Mn=>H({},Mn,{sections:o.clearDateSections(q.sections,Re),tempValueStrAndroid:null}))}),be(o.updateDateInValue(k,Re,xn))}return ft.every(xn=>xn.value!=="")&&(Me==null||e.isValid(Me))?(Ae(qe),be(o.updateDateInValue(k,Re,_t))):Me!=null?(Ae(qe),be(o.updateDateInValue(k,Re,null))):X(xn=>H({},xn,{sections:Ne,tempValueStrAndroid:null}))},Ve=Re=>X(qe=>H({},qe,{tempValueStrAndroid:Re})),we=He(Re=>{X(qe=>H({},qe,{characterQuery:Re}))});if(k!==q.lastExternalValue){let Re;ue.current!=null&&!e.isValid(o.getDateFromSection(k,q.sections[ue.current.sectionIndex]))?Re=Pe(ue.current.sectionIndex,ue.current.value):Re=V(k),X(qe=>H({},qe,{lastExternalValue:k,sections:Re,sectionsDependencies:{format:m,isRtl:r,locale:e.locale},referenceValue:o.updateReferenceValue(e,k,qe.referenceValue),tempValueStrAndroid:null}))}if(r!==q.lastSectionsDependencies.isRtl||m!==q.lastSectionsDependencies.format||e.locale!==q.lastSectionsDependencies.locale){const Re=V(k);X(qe=>H({},qe,{lastSectionsDependencies:{format:m,isRtl:r,locale:e.locale},sections:Re,tempValueStrAndroid:null,characterQuery:null}))}q.characterQuery!=null&&!F&&fe==null&&we(null),q.characterQuery!=null&&((Oe=q.sections[q.characterQuery.sectionIndex])==null?void 0:Oe.type)!==q.characterQuery.sectionType&&we(null),M.useEffect(()=>{ue.current!=null&&(ue.current=null)});const ze=Rd();return M.useEffect(()=>(q.characterQuery!=null&&ze.start(YW,()=>we(null)),()=>{}),[q.characterQuery,we,ze]),M.useEffect(()=>{q.tempValueStrAndroid!=null&&fe!=null&&ae()},[q.sections]),{activeSectionIndex:fe,areAllSectionsEmpty:ve,error:F,localizedDigits:N,parsedSelectedSections:Z,sectionOrder:ge,sectionsValueBoundaries:P,state:q,timezone:O,value:k,clearValue:Fe,clearActiveSection:ae,setCharacterQuery:we,setSelectedSections:K,setTempAndroidValueStr:Ve,updateSectionValue:ie,updateValueFromValueStr:ye,getSectionsFromValue:V}};function FO(n){const{manager:{internal_useApplyDefaultValuesToFieldInternalProps:e},internalProps:t,skipContextFieldRefAssignment:r}=n,i=__(),a=wO(),s=oi(t.unstableFieldRef,r?null:a==null?void 0:a.fieldRef),o=i==null?void 0:i.setValue,c=M.useCallback((f,p)=>o==null?void 0:o(f,{validationError:p.validationError,shouldClose:!1}),[o]),d=M.useMemo(()=>a!=null&&i!=null?H({value:i.value,onChange:c,timezone:i.timezone,disabled:i.disabled,readOnly:i.readOnly,autoFocus:i.autoFocus&&!i.open,focused:i.open?!0:void 0,format:i.fieldFormat,formatDensity:a.formatDensity,enableAccessibleFieldDOMStructure:a.enableAccessibleFieldDOMStructure,selectedSections:a.selectedSections,onSelectedSectionsChange:a.onSelectedSectionsChange,unstableFieldRef:s},t):t,[i,a,t,c,s]);return e(d)}function S_(n){const{focused:e,domGetters:t,stateResponse:{parsedSelectedSections:r,state:i}}=n;if(!t.isReady())return;const a=n0(t.getRoot()).getSelection();if(!a)return;if(r==null){a.rangeCount>0&&a.getRangeAt(0).startContainer instanceof Node&&t.getRoot().contains(a.getRangeAt(0).startContainer)&&a.removeAllRanges(),e&&t.getRoot().blur();return}if(!t.getRoot().contains(gi(t.getRoot())))return;const s=new window.Range;let o;r==="all"?o=t.getRoot():i.sections[r].type==="empty"?o=t.getSectionContainer(r):o=t.getSectionContent(r),s.selectNodeContents(o),o.focus(),a.removeAllRanges(),a.addRange(s)}function VO(n){const e=Yt(),{manager:{internal_fieldValueManager:t},internalPropsWithDefaults:{minutesStep:r,disabled:i,readOnly:a},stateResponse:{state:s,value:o,activeSectionIndex:c,parsedSelectedSections:d,sectionsValueBoundaries:f,localizedDigits:p,timezone:g,sectionOrder:m,clearValue:x,clearActiveSection:b,setSelectedSections:A,updateSectionValue:E}}=n;return He(C=>{if(!i)switch(!0){case((C.ctrlKey||C.metaKey)&&String.fromCharCode(C.keyCode)==="A"&&!C.shiftKey&&!C.altKey):{C.preventDefault(),A("all");break}case C.key==="ArrowRight":{if(C.preventDefault(),d==null)A(m.startIndex);else if(d==="all")A(m.endIndex);else{const T=m.neighbors[d].rightIndex;T!==null&&A(T)}break}case C.key==="ArrowLeft":{if(C.preventDefault(),d==null)A(m.endIndex);else if(d==="all")A(m.startIndex);else{const T=m.neighbors[d].leftIndex;T!==null&&A(T)}break}case C.key==="Delete":{if(C.preventDefault(),a)break;d==null||d==="all"?x():b();break}case["ArrowUp","ArrowDown","Home","End","PageUp","PageDown"].includes(C.key):{if(C.preventDefault(),a||c==null)break;d==="all"&&A(c);const T=s.sections[c],D=XW(e,g,T,C.key,f,p,t.getDateFromSection(o,T),{minutesStep:r});E({section:T,newSectionValue:D,shouldGoToNextSection:!1});break}}})}function qW(n){switch(n){case"ArrowUp":return 1;case"ArrowDown":return-1;case"PageUp":return 5;case"PageDown":return-5;default:return 0}}function XW(n,e,t,r,i,a,s,o){const c=qW(r),d=r==="Home",f=r==="End",p=t.value===""||d||f,g=()=>{const x=i[t.type]({currentDate:s,format:t.format,contentType:t.contentType}),b=C=>mO(n,C,x,a,t),A=t.type==="minutes"&&(o!=null&&o.minutesStep)?o.minutesStep:1;let E;if(p){if(t.type==="year"&&!f&&!d)return n.formatByString(n.date(void 0,e),t.format);c>0||d?E=x.minimum:E=x.maximum}else E=parseInt(tu(t.value,a),10)+c*A;return E%A!==0&&((c<0||d)&&(E+=A-(A+E)%A),(c>0||f)&&(E-=E%A)),E>x.maximum?b(x.minimum+(E-x.maximum-1)%(x.maximum-x.minimum+1)):E<x.minimum?b(x.maximum-(x.minimum-E-1)%(x.maximum-x.minimum+1)):b(E)},m=()=>{const x=gO(n,e,t.type,t.format);if(x.length===0)return t.value;if(p)return c>0||d?x[0]:x[x.length-1];const E=((x.indexOf(t.value)+c)%x.length+x.length)%x.length;return x[E]};return t.contentType==="digit"||t.contentType==="digit-with-letter"?g():m()}function KW(n){const{manager:e,focused:t,setFocused:r,domGetters:i,stateResponse:a,applyCharacterEditing:s,internalPropsWithDefaults:o,stateResponse:{parsedSelectedSections:c,sectionOrder:d,state:f,clearValue:p,setCharacterQuery:g,setSelectedSections:m,updateValueFromValueStr:x},internalPropsWithDefaults:{disabled:b=!1,readOnly:A=!1}}=n,E=VO({manager:e,internalPropsWithDefaults:o,stateResponse:a}),C=Rd(),T=He(I=>{b||!i.isReady()||(r(!0),c==="all"?C.start(0,()=>{const R=document.getSelection().getRangeAt(0).startOffset;if(R===0){m(d.startIndex);return}let F=0,N=0;for(;N<R&&F<f.sections.length;){const P=f.sections[F];F+=1,N+=`${P.startSeparator}${P.value||P.placeholder}${P.endSeparator}`.length}m(F-1)}):t?i.getRoot().contains(I.target)||m(d.startIndex):(r(!0),m(d.startIndex)))}),D=He(I=>{if(!i.isReady()||c!=="all")return;const F=I.target.textContent??"";i.getRoot().innerHTML=f.sections.map(N=>`${N.startSeparator}${N.value||N.placeholder}${N.endSeparator}`).join(""),S_({focused:t,domGetters:i,stateResponse:a}),F.length===0||F.charCodeAt(0)===10?(p(),m("all")):F.length>1?x(F):(c==="all"&&m(0),s({keyPressed:F,sectionIndex:0}))}),k=He(I=>{if(A||c!=="all"){I.preventDefault();return}const R=I.clipboardData.getData("text");I.preventDefault(),g(null),x(R)}),B=He(()=>{if(t||b||!i.isReady())return;const I=gi(i.getRoot());r(!0),i.getSectionIndexFromDOMElement(I)!=null||m(d.startIndex)}),O=He(()=>{setTimeout(()=>{if(!i.isReady())return;const I=gi(i.getRoot());!i.getRoot().contains(I)&&(r(!1),m(null))})});return{onKeyDown:E,onBlur:O,onFocus:B,onClick:T,onPaste:k,onInput:D,contentEditable:c==="all",tabIndex:c===0?-1:0}}function QW(n){const{manager:{internal_fieldValueManager:e},stateResponse:{areAllSectionsEmpty:t,state:r,updateValueFromValueStr:i}}=n,a=He(o=>{i(o.target.value)});return{value:M.useMemo(()=>t?"":e.getV7HiddenInputValueFromSections(r.sections),[t,r.sections,e]),onChange:a}}function ZW(n){const{stateResponse:{setSelectedSections:e},internalPropsWithDefaults:{disabled:t=!1}}=n,r=M.useCallback(i=>a=>{t||a.isDefaultPrevented()||e(i)},[t,e]);return M.useCallback(i=>({"data-sectionindex":i,onClick:r(i)}),[r])}function JW(n){const e=Yt(),t=Ja(),{focused:r,domGetters:i,stateResponse:a,applyCharacterEditing:s,manager:{internal_fieldValueManager:o},stateResponse:{parsedSelectedSections:c,sectionsValueBoundaries:d,state:f,value:p,clearActiveSection:g,setCharacterQuery:m,setSelectedSections:x,updateSectionValue:b,updateValueFromValueStr:A},internalPropsWithDefaults:{disabled:E=!1,readOnly:C=!1}}=n,T=c==="all",D=!T&&!E&&!C,k=He(N=>{if(!i.isReady())return;const P=f.sections[N];i.getSectionContent(N).innerHTML=P.value||P.placeholder,S_({focused:r,domGetters:i,stateResponse:a})}),B=He(N=>{if(!i.isReady())return;const P=N.target,V=P.textContent??"",q=i.getSectionIndexFromDOMElement(P),X=f.sections[q];if(C){k(q);return}if(V.length===0){if(X.value===""){k(q);return}const G=N.nativeEvent.inputType;if(G==="insertParagraph"||G==="insertLineBreak"){k(q);return}k(q),g();return}s({keyPressed:V,sectionIndex:q}),k(q)}),O=He(N=>{N.preventDefault()}),I=He(N=>{if(N.preventDefault(),C||E||typeof c!="number")return;const P=f.sections[c],V=N.clipboardData.getData("text"),q=/^[a-zA-Z]+$/.test(V),X=/^[0-9]+$/.test(V),G=/^(([a-zA-Z]+)|)([0-9]+)(([a-zA-Z]+)|)$/.test(V);P.contentType==="letter"&&q||P.contentType==="digit"&&X||P.contentType==="digit-with-letter"&&G?(m(null),b({section:P,newSectionValue:V,shouldGoToNextSection:!0})):!q&&!X&&(m(null),A(V))}),R=He(N=>{N.preventDefault(),N.dataTransfer.dropEffect="none"}),F=M.useCallback(N=>()=>{E||x(N)},[E,x]);return M.useCallback((N,P)=>{const V=d[N.type]({currentDate:o.getDateFromSection(p,N),contentType:N.contentType,format:N.format});return{onInput:B,onPaste:I,onMouseUp:O,onDragOver:R,onFocus:F(P),"aria-readonly":C,"aria-valuenow":tY(N,e),"aria-valuemin":V.minimum,"aria-valuemax":V.maximum,"aria-valuetext":N.value?eY(N,e):t.empty,"aria-label":t[N.type],"aria-disabled":E,tabIndex:T||P>0?-1:0,contentEditable:!T&&!E&&!C,role:"spinbutton","data-range-position":N.dateName||void 0,spellCheck:D?!1:void 0,autoCapitalize:D?"off":void 0,autoCorrect:D?"off":void 0,children:N.value||N.placeholder,inputMode:N.contentType==="letter"?"text":"numeric"}},[d,T,E,C,D,t,e,B,I,O,R,F,o,p])}function eY(n,e){if(n.value)switch(n.type){case"month":{if(n.contentType==="digit"){const r=e.setMonth(e.date(),Number(n.value)-1);return e.isValid(r)?e.format(r,"month"):""}const t=e.parse(n.value,n.format);return t&&e.isValid(t)?e.format(t,"month"):void 0}case"day":if(n.contentType==="digit"){const t=e.setDate(e.startOfYear(e.date()),Number(n.value));return e.isValid(t)?e.format(t,"dayOfMonthFull"):""}return n.value;case"weekDay":return;default:return}}function tY(n,e){if(n.value)switch(n.type){case"weekDay":return n.contentType==="letter"?void 0:Number(n.value);case"meridiem":{const t=e.parse(`01:00 ${n.value}`,`${e.formats.hours12h}:${e.formats.minutes} ${n.format}`);return t?e.getHours(t)>=12?1:0:void 0}case"day":return n.contentType==="digit-with-letter"?parseInt(n.value,10):Number(n.value);case"month":{if(n.contentType==="digit")return Number(n.value);const t=e.parse(n.value,n.format);return t?e.getMonth(t)+1:void 0}default:return n.contentType!=="letter"?Number(n.value):void 0}}const nY=n=>{const{props:e,manager:t,skipContextFieldRefAssignment:r,manager:{valueType:i,internal_useOpenPickerButtonAriaLabel:a}}=n,{internalProps:s,forwardedProps:o}=fO(e,i),c=FO({manager:t,internalProps:s,skipContextFieldRefAssignment:r}),{sectionListRef:d,onBlur:f,onClick:p,onFocus:g,onInput:m,onPaste:x,onKeyDown:b,onClear:A,clearable:E}=o,{disabled:C=!1,readOnly:T=!1,autoFocus:D=!1,focused:k,unstableFieldRef:B}=c,O=M.useRef(null),I=oi(d,O),R=M.useMemo(()=>({isReady:()=>O.current!=null,getRoot:()=>O.current.getRoot(),getSectionContainer:Oe=>O.current.getSectionContainer(Oe),getSectionContent:Oe=>O.current.getSectionContent(Oe),getSectionIndexFromDOMElement:Oe=>O.current.getSectionIndexFromDOMElement(Oe)}),[O]),F=BO({manager:t,internalPropsWithDefaults:c,forwardedProps:o}),{areAllSectionsEmpty:N,error:P,parsedSelectedSections:V,sectionOrder:q,state:X,value:G,clearValue:W,setSelectedSections:K}=F,Z=kO({stateResponse:F}),fe=a(G),[ge,ve]=M.useState(!1);function be(Oe=0){if(C||!O.current||wD(O)!=null)return;const Re=Tw(Oe,X.sections);ve(!0),O.current.getSectionContent(Re).focus()}const Pe=KW({manager:t,internalPropsWithDefaults:c,stateResponse:F,applyCharacterEditing:Z,focused:ge,setFocused:ve,domGetters:R}),ue=QW({manager:t,stateResponse:F}),Se=ZW({stateResponse:F,internalPropsWithDefaults:c}),Ae=JW({manager:t,stateResponse:F,applyCharacterEditing:Z,internalPropsWithDefaults:c,domGetters:R,focused:ge}),Fe=He(Oe=>{b==null||b(Oe),Pe.onKeyDown(Oe)}),ae=He(Oe=>{f==null||f(Oe),Pe.onBlur(Oe)}),ye=He(Oe=>{g==null||g(Oe),Pe.onFocus(Oe)}),pe=He(Oe=>{Oe.isDefaultPrevented()||(p==null||p(Oe),Pe.onClick(Oe))}),ie=He(Oe=>{x==null||x(Oe),Pe.onPaste(Oe)}),Ve=He(Oe=>{m==null||m(Oe),Pe.onInput(Oe)}),we=He((Oe,...Re)=>{Oe.preventDefault(),A==null||A(Oe,...Re),W(),bD(O)?K(q.startIndex):be(0)}),ze=M.useMemo(()=>X.sections.map((Oe,Re)=>{const qe=Ae(Oe,Re);return{container:Se(Re),content:Ae(Oe,Re),before:{children:Oe.startSeparator},after:{children:Oe.endSeparator,"data-range-position":Oe.isEndFormatSeparator?qe["data-range-position"]:void 0}}}),[X.sections,Se,Ae]);return M.useEffect(()=>{if(O.current==null)throw new Error(["MUI X: The `sectionListRef` prop has not been initialized by `PickersSectionList`","You probably tried to pass a component to the `textField` slot that contains an `<input />` element instead of a `PickersSectionList`.","","If you want to keep using an `<input />` HTML element for the editing, please add the `enableAccessibleFieldDOMStructure={false}` prop to your Picker or Field component:","","<DatePicker enableAccessibleFieldDOMStructure={false} slots={{ textField: MyCustomTextField }} />","","Learn more about the field accessible DOM structure on the MUI documentation: https://mui.com/x/react-date-pickers/fields/#fields-to-edit-a-single-element"].join(`
`));D&&!C&&O.current&&O.current.getSectionContent(q.startIndex).focus()},[]),Xn(()=>{if(!(!ge||!O.current)){if(V==="all")O.current.getRoot().focus();else if(typeof V=="number"){const Oe=O.current.getSectionContent(V);Oe&&Oe.focus()}}},[V,ge]),Xn(()=>{S_({focused:ge,domGetters:R,stateResponse:F})}),M.useImperativeHandle(B,()=>({getSections:()=>X.sections,getActiveSectionIndex:()=>wD(O),setSelectedSections:Oe=>{if(C||!O.current)return;const Re=Tw(Oe,X.sections);ve((Re==="all"?0:Re)!==null),K(Oe)},focusField:be,isFieldFocused:()=>bD(O)})),H({},o,Pe,{onBlur:ae,onClick:pe,onFocus:ye,onInput:Ve,onPaste:ie,onKeyDown:Fe,onClear:we},ue,{error:P,clearable:!!(E&&!N&&!T&&!C),focused:k??ge,sectionListRef:I,enableAccessibleFieldDOMStructure:!0,elements:ze,areAllSectionsEmpty:N,disabled:C,readOnly:T,autoFocus:D,openPickerAriaLabel:fe})};function wD(n){var t;const e=gi((t=n.current)==null?void 0:t.getRoot());return!e||!n.current||!n.current.getRoot().contains(e)?null:n.current.getSectionIndexFromDOMElement(e)}function bD(n){var t;const e=gi((t=n.current)==null?void 0:t.getRoot());return!!n.current&&n.current.getRoot().contains(e)}const Sd=n=>n.replace(/[\u2066\u2067\u2068\u2069]/g,""),rY=(n,e,t)=>{let r=0,i=t?1:0;const a=[];for(let s=0;s<n.length;s+=1){const o=n[s],c=w_(o,t?"input-rtl":"input-ltr",e),d=`${o.startSeparator}${c}${o.endSeparator}`,f=Sd(d).length,p=d.length,g=Sd(c),m=i+(g===""?0:c.indexOf(g[0]))+o.startSeparator.length,x=m+g.length;a.push(H({},o,{start:r,end:r+f,startInInput:m,endInInput:x})),r+=f,i+=p}return a},iY=n=>{const e=Ma(),t=Rd(),r=Rd(),{props:i,manager:a,skipContextFieldRefAssignment:s,manager:{valueType:o,internal_valueManager:c,internal_fieldValueManager:d,internal_useOpenPickerButtonAriaLabel:f}}=n,{internalProps:p,forwardedProps:g}=fO(i,o),m=FO({manager:a,internalProps:p,skipContextFieldRefAssignment:s}),{onFocus:x,onClick:b,onPaste:A,onBlur:E,onKeyDown:C,onClear:T,clearable:D,inputRef:k,placeholder:B}=g,{readOnly:O=!1,disabled:I=!1,autoFocus:R=!1,focused:F,unstableFieldRef:N}=m,P=M.useRef(null),V=oi(k,P),q=BO({manager:a,internalPropsWithDefaults:m,forwardedProps:g}),{activeSectionIndex:X,areAllSectionsEmpty:G,error:W,localizedDigits:K,parsedSelectedSections:Z,sectionOrder:fe,state:ge,value:ve,clearValue:be,clearActiveSection:Pe,setCharacterQuery:ue,setSelectedSections:Se,setTempAndroidValueStr:Ae,updateSectionValue:Fe,updateValueFromValueStr:ae,getSectionsFromValue:ye}=q,pe=kO({stateResponse:q}),ie=f(ve),Ve=M.useMemo(()=>rY(ge.sections,K,e),[ge.sections,K,e]);function we(){const Qe=P.current.selectionStart??0;let mt;Qe<=Ve[0].startInInput||Qe>=Ve[Ve.length-1].endInInput?mt=1:mt=Ve.findIndex(tn=>tn.startInInput-tn.startSeparator.length>Qe);const Nt=mt===-1?Ve.length-1:mt-1;Se(Nt)}function ze(Qe=0){var mt;gi(P.current)!==P.current&&((mt=P.current)==null||mt.focus(),Se(Qe))}const Oe=He(Qe=>{x==null||x(Qe);const mt=P.current;t.start(0,()=>{!mt||mt!==P.current||X==null&&(mt.value.length&&Number(mt.selectionEnd)-Number(mt.selectionStart)===mt.value.length?Se("all"):we())})}),Re=He((Qe,...mt)=>{Qe.isDefaultPrevented()||(b==null||b(Qe,...mt),we())}),qe=He(Qe=>{if(A==null||A(Qe),Qe.preventDefault(),O||I)return;const mt=Qe.clipboardData.getData("text");if(typeof Z=="number"){const Nt=ge.sections[Z],tn=/^[a-zA-Z]+$/.test(mt),An=/^[0-9]+$/.test(mt),Tn=/^(([a-zA-Z]+)|)([0-9]+)(([a-zA-Z]+)|)$/.test(mt);if(Nt.contentType==="letter"&&tn||Nt.contentType==="digit"&&An||Nt.contentType==="digit-with-letter"&&Tn){ue(null),Fe({section:Nt,newSectionValue:mt,shouldGoToNextSection:!0});return}if(tn||An)return}ue(null),ae(mt)}),We=He(Qe=>{E==null||E(Qe),Se(null)}),Me=He(Qe=>{if(O)return;const mt=Qe.target.value;if(mt===""){be();return}const Nt=Qe.nativeEvent.data,tn=Nt&&Nt.length>1,An=tn?Nt:mt,Tn=Sd(An);if(Z==="all"&&Se(X),X==null||tn){ae(tn?Nt:Tn);return}let qt;if(Z==="all"&&Tn.length===1)qt=Tn;else{const qr=Sd(d.getV6InputValueFromSections(Ve,K,e));let yt=-1,Vn=-1;for(let or=0;or<qr.length;or+=1)yt===-1&&qr[or]!==Tn[or]&&(yt=or),Vn===-1&&qr[qr.length-or-1]!==Tn[Tn.length-or-1]&&(Vn=or);const Zn=Ve[X];if(yt<Zn.start||qr.length-Vn-1>Zn.end)return;const bi=Tn.length-qr.length+Zn.end-Sd(Zn.endSeparator||"").length;qt=Tn.slice(Zn.start+Sd(Zn.startSeparator||"").length,bi)}if(qt.length===0){NG()&&Ae(An),Pe();return}pe({keyPressed:qt,sectionIndex:X})}),Ne=He((Qe,...mt)=>{Qe.preventDefault(),T==null||T(Qe,...mt),be(),_D(P)?Se(fe.startIndex):ze(0)}),ft=VO({manager:a,internalPropsWithDefaults:m,stateResponse:q}),_t=He(Qe=>{C==null||C(Qe),ft(Qe)}),xn=M.useMemo(()=>B!==void 0?B:d.getV6InputValueFromSections(ye(c.emptyValue),K,e),[B,d,ye,c.emptyValue,K,e]),Mn=M.useMemo(()=>ge.tempValueStrAndroid??d.getV6InputValueFromSections(ge.sections,K,e),[ge.sections,d,ge.tempValueStrAndroid,K,e]);M.useEffect(()=>{P.current&&P.current===gi(P.current)&&Se("all")},[]),Xn(()=>{function Qe(){if(!P.current)return;if(Z==null){P.current.scrollLeft&&(P.current.scrollLeft=0);return}if(P.current!==gi(P.current))return;const mt=P.current.scrollTop;if(Z==="all")P.current.select();else{const Nt=Ve[Z],tn=Nt.type==="empty"?Nt.startInInput-Nt.startSeparator.length:Nt.startInInput,An=Nt.type==="empty"?Nt.endInInput+Nt.endSeparator.length:Nt.endInInput;(tn!==P.current.selectionStart||An!==P.current.selectionEnd)&&P.current===gi(P.current)&&P.current.setSelectionRange(tn,An),r.start(0,()=>{P.current&&P.current===gi(P.current)&&P.current.selectionStart===P.current.selectionEnd&&(P.current.selectionStart!==tn||P.current.selectionEnd!==An)&&Qe()})}P.current.scrollTop=mt}Qe()});const rt=M.useMemo(()=>X==null||ge.sections[X].contentType==="letter"?"text":"numeric",[X,ge.sections]),Cn=!(P.current&&P.current===gi(P.current))&&G;return M.useImperativeHandle(N,()=>({getSections:()=>ge.sections,getActiveSectionIndex:()=>{const Qe=P.current.selectionStart??0,mt=P.current.selectionEnd??0;if(Qe===0&&mt===0)return null;const Nt=Qe<=Ve[0].startInInput?1:Ve.findIndex(tn=>tn.startInInput-tn.startSeparator.length>Qe);return Nt===-1?Ve.length-1:Nt-1},setSelectedSections:Qe=>Se(Qe),focusField:ze,isFieldFocused:()=>_D(P)})),H({},g,{error:W,clearable:!!(D&&!G&&!O&&!I),onBlur:We,onClick:Re,onFocus:Oe,onPaste:qe,onKeyDown:_t,onClear:Ne,inputRef:V,enableAccessibleFieldDOMStructure:!1,placeholder:xn,inputMode:rt,autoComplete:"off",value:Cn?"":Mn,onChange:Me,focused:F,disabled:I,readOnly:O,autoFocus:R,openPickerAriaLabel:ie})};function _D(n){return n.current===gi(n.current)}const aY=n=>{const e=wO();return(n.props.enableAccessibleFieldDOMStructure??(e==null?void 0:e.enableAccessibleFieldDOMStructure)??!0?nY:iY)(n)};function C_(n){const e=Yt(),t=EO();return M.useMemo(()=>({disablePast:n.disablePast??!1,disableFuture:n.disableFuture??!1,minDate:e1(e,n.minDate,t.minDate),maxDate:e1(e,n.maxDate,t.maxDate)}),[n.minDate,n.maxDate,n.disableFuture,n.disablePast,e,t])}function sY(n={}){const{enableAccessibleFieldDOMStructure:e=!0}=n;return M.useMemo(()=>({valueType:"date-time",validator:fy,internal_valueManager:Oi,internal_fieldValueManager:mW,internal_enableAccessibleFieldDOMStructure:e,internal_useApplyDefaultValuesToFieldInternalProps:lY,internal_useOpenPickerButtonAriaLabel:oY}),[e])}function oY(n){const e=Yt(),t=Ja();return M.useMemo(()=>{const r=e.isValid(n)?e.format(n,"fullDate"):null;return t.openDatePickerDialogue(r)},[n,t,e])}function lY(n){const e=Yt(),t=jO(n),r=M.useMemo(()=>n.ampm??e.is12HourCycleInCurrentLocale(),[n.ampm,e]);return M.useMemo(()=>H({},n,t,{format:n.format??(r?e.formats.keyboardDateTime12h:e.formats.keyboardDateTime24h)}),[n,t,r,e])}function jO(n){const e=Yt(),t=EO();return M.useMemo(()=>({disablePast:n.disablePast??!1,disableFuture:n.disableFuture??!1,disableIgnoringDatePartForTimeValidation:!!n.minDateTime||!!n.maxDateTime||!!n.disableFuture||!!n.disablePast,minDate:e1(e,n.minDateTime??n.minDate,t.minDate),maxDate:e1(e,n.maxDateTime??n.maxDate,t.maxDate),minTime:n.minDateTime??n.minTime,maxTime:n.maxDateTime??n.maxTime}),[n.minDateTime,n.maxDateTime,n.minTime,n.maxTime,n.minDate,n.maxDate,n.disableFuture,n.disablePast,e,t])}function T_(n){const{ownerState:e}=sr(),t=Ma();return M.useMemo(()=>H({},e,{isFieldDisabled:n.disabled??!1,isFieldReadOnly:n.readOnly??!1,isFieldRequired:n.required??!1,fieldDirection:t?"rtl":"ltr"}),[e,n.disabled,n.readOnly,n.required,t])}function cY(n){return Mt("MuiPickersTextField",n)}Ot("MuiPickersTextField",["root","focused","disabled","error","required"]);function uY(n){return Mt("MuiPickersInputBase",n)}const Nd=Ot("MuiPickersInputBase",["root","focused","disabled","error","notchedOutline","sectionContent","sectionBefore","sectionAfter","adornedStart","adornedEnd","input","inputSizeSmall","activeBar"]);function dY(n){return Mt("MuiPickersSectionList",n)}const Oh=Ot("MuiPickersSectionList",["root","section","sectionContent"]),fY=["slots","slotProps","elements","sectionListRef","classes"],UO=ke("div",{name:"MuiPickersSectionList",slot:"Root"})({direction:"ltr /*! @noflip */",outline:"none"}),HO=ke("span",{name:"MuiPickersSectionList",slot:"Section"})({}),zO=ke("span",{name:"MuiPickersSectionList",slot:"SectionSeparator"})({whiteSpace:"pre"}),$O=ke("span",{name:"MuiPickersSectionList",slot:"SectionContent"})({outline:"none"}),hY=n=>xt({root:["root"],section:["section"],sectionContent:["sectionContent"]},dY,n);function pY(n){const{slots:e,slotProps:t,element:r,classes:i}=n,{ownerState:a}=sr(),s=(e==null?void 0:e.section)??HO,o=Ct({elementType:s,externalSlotProps:t==null?void 0:t.section,externalForwardedProps:r.container,className:i.section,ownerState:a}),c=(e==null?void 0:e.sectionContent)??$O,d=Ct({elementType:c,externalSlotProps:t==null?void 0:t.sectionContent,externalForwardedProps:r.content,additionalProps:{suppressContentEditableWarning:!0},className:i.sectionContent,ownerState:a}),f=(e==null?void 0:e.sectionSeparator)??zO,p=Ct({elementType:f,externalSlotProps:t==null?void 0:t.sectionSeparator,externalForwardedProps:r.before,ownerState:H({},a,{separatorPosition:"before"})}),g=Ct({elementType:f,externalSlotProps:t==null?void 0:t.sectionSeparator,externalForwardedProps:r.after,ownerState:H({},a,{separatorPosition:"after"})});return v.jsxs(s,H({},o,{children:[v.jsx(f,H({},p)),v.jsx(c,H({},d)),v.jsx(f,H({},g))]}))}const gY=M.forwardRef(function(e,t){const r=bt({props:e,name:"MuiPickersSectionList"}),{slots:i,slotProps:a,elements:s,sectionListRef:o,classes:c}=r,d=Be(r,fY),f=hY(c),{ownerState:p}=sr(),g=M.useRef(null),m=oi(t,g),x=E=>{if(!g.current)throw new Error(`MUI X: Cannot call sectionListRef.${E} before the mount of the component.`);return g.current};M.useImperativeHandle(o,()=>({getRoot(){return x("getRoot")},getSectionContainer(E){return x("getSectionContainer").querySelector(`.${Oh.section}[data-sectionindex="${E}"]`)},getSectionContent(E){return x("getSectionContent").querySelector(`.${Oh.section}[data-sectionindex="${E}"] .${Oh.sectionContent}`)},getSectionIndexFromDOMElement(E){const C=x("getSectionIndexFromDOMElement");if(E==null||!C.contains(E))return null;let T=null;return E.classList.contains(Oh.section)?T=E:E.classList.contains(Oh.sectionContent)&&(T=E.parentElement),T==null?null:Number(T.dataset.sectionindex)}}));const b=(i==null?void 0:i.root)??UO,A=Ct({elementType:b,externalSlotProps:a==null?void 0:a.root,externalForwardedProps:d,additionalProps:{ref:m,suppressContentEditableWarning:!0},className:f.root,ownerState:p});return v.jsx(b,H({},A,{children:A.contentEditable?s.map(({content:E,before:C,after:T})=>`${C.children}${E.children}${T.children}`).join(""):v.jsx(M.Fragment,{children:s.map((E,C)=>v.jsx(pY,{slots:i,slotProps:a,element:E,classes:f},C))})}))}),GO=M.createContext(null),hy=()=>{const n=M.useContext(GO);if(n==null)throw new Error(["MUI X: The `usePickerTextFieldOwnerState` can only be called in components that are used inside a PickerTextField component"].join(`
`));return n},mY=["elements","areAllSectionsEmpty","defaultValue","label","value","onChange","id","autoFocus","endAdornment","startAdornment","renderSuffix","slots","slotProps","contentEditable","tabIndex","onInput","onPaste","onKeyDown","fullWidth","name","readOnly","inputProps","inputRef","sectionListRef","onFocus","onBlur","classes","ownerState"],yY=n=>Math.round(n*1e5)/1e5,py=ke("div",{name:"MuiPickersInputBase",slot:"Root"})(({theme:n})=>H({},n.typography.body1,{color:(n.vars||n).palette.text.primary,cursor:"text",padding:0,display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",boxSizing:"border-box",letterSpacing:`${yY(.15/16)}em`,variants:[{props:{isInputInFullWidth:!0},style:{width:"100%"}}]})),I_=ke(UO,{name:"MuiPickersInputBase",slot:"SectionsContainer"})(({theme:n})=>({padding:"4px 0 5px",fontFamily:n.typography.fontFamily,fontSize:"inherit",lineHeight:"1.4375em",flexGrow:1,outline:"none",display:"flex",flexWrap:"nowrap",overflow:"hidden",letterSpacing:"inherit",width:"182px",variants:[{props:{fieldDirection:"rtl"},style:{justifyContent:"end"}},{props:{inputSize:"small"},style:{paddingTop:1}},{props:{hasStartAdornment:!1,isFieldFocused:!1,isFieldValueEmpty:!0},style:{color:"currentColor",opacity:0}},{props:{hasStartAdornment:!1,isFieldFocused:!1,isFieldValueEmpty:!0,inputHasLabel:!1},style:n.vars?{opacity:n.vars.opacity.inputPlaceholder}:{opacity:n.palette.mode==="light"?.42:.5}},{props:{hasStartAdornment:!1,isFieldFocused:!1,isFieldValueEmpty:!0,inputHasLabel:!0,isLabelShrunk:!0},style:n.vars?{opacity:n.vars.opacity.inputPlaceholder}:{opacity:n.palette.mode==="light"?.42:.5}}]})),vY=ke(HO,{name:"MuiPickersInputBase",slot:"Section"})(({theme:n})=>({fontFamily:n.typography.fontFamily,fontSize:"inherit",letterSpacing:"inherit",lineHeight:"1.4375em",display:"inline-block",whiteSpace:"nowrap"})),xY=ke($O,{name:"MuiPickersInputBase",slot:"SectionContent",overridesResolver:(n,e)=>e.content})(({theme:n})=>({fontFamily:n.typography.fontFamily,lineHeight:"1.4375em",letterSpacing:"inherit",width:"fit-content",outline:"none"})),wY=ke(zO,{name:"MuiPickersInputBase",slot:"Separator"})(()=>({whiteSpace:"pre",letterSpacing:"inherit"})),bY=ke("input",{name:"MuiPickersInputBase",slot:"Input",overridesResolver:(n,e)=>e.hiddenInput})(H({},BN)),_Y=ke("div",{name:"MuiPickersInputBase",slot:"ActiveBar"})(({theme:n,ownerState:e})=>({display:"none",position:"absolute",height:2,bottom:2,borderTopLeftRadius:2,borderTopRightRadius:2,transition:n.transitions.create(["width","left"],{duration:n.transitions.duration.shortest}),backgroundColor:(n.vars||n).palette.primary.main,'[data-active-range-position="start"] &, [data-active-range-position="end"] &':{display:"block"},'[data-active-range-position="start"] &':{left:e.sectionOffsets[0]},'[data-active-range-position="end"] &':{left:e.sectionOffsets[1]}})),AY=(n,e)=>{const{isFieldFocused:t,isFieldDisabled:r,isFieldReadOnly:i,hasFieldError:a,inputSize:s,isInputInFullWidth:o,inputColor:c,hasStartAdornment:d,hasEndAdornment:f}=e,p={root:["root",t&&!r&&"focused",r&&"disabled",i&&"readOnly",a&&"error",o&&"fullWidth",`color${LN(c)}`,s==="small"&&"inputSizeSmall",d&&"adornedStart",f&&"adornedEnd"],notchedOutline:["notchedOutline"],input:["input"],sectionsContainer:["sectionsContainer"],sectionContent:["sectionContent"],sectionBefore:["sectionBefore"],sectionAfter:["sectionAfter"],activeBar:["activeBar"]};return xt(p,uY,n)};function AD(n,e,t,r){var i;if(n.content.id){const a=(i=e.current)==null?void 0:i.querySelectorAll(`[data-sectionindex="${t}"] [data-range-position="${r}"]`);if(a)return Array.from(a).reduce((s,o)=>s+o.offsetWidth,0)}return 0}function EY(n,e){var i,a,s,o,c;let t=0;if(((i=e.current)==null?void 0:i.getAttribute("data-active-range-position"))==="end")for(let d=n.length-1;d>=n.length/2;d-=1)t+=AD(n[d],e,d,"end");else for(let d=0;d<n.length/2;d+=1)t+=AD(n[d],e,d,"start");return{activeBarWidth:t,sectionOffsets:[((s=(a=e.current)==null?void 0:a.querySelector('[data-sectionindex="0"]'))==null?void 0:s.offsetLeft)||0,((c=(o=e.current)==null?void 0:o.querySelector(`[data-sectionindex="${n.length/2}"]`))==null?void 0:c.offsetLeft)||0]}}const D_=M.forwardRef(function(e,t){const r=bt({props:e,name:"MuiPickersInputBase"}),{elements:i,areAllSectionsEmpty:a,value:s,onChange:o,id:c,endAdornment:d,startAdornment:f,renderSuffix:p,slots:g,slotProps:m,contentEditable:x,tabIndex:b,onInput:A,onPaste:E,onKeyDown:C,name:T,readOnly:D,inputProps:k,inputRef:B,sectionListRef:O,onFocus:I,onBlur:R,classes:F,ownerState:N}=r,P=Be(r,mY),V=hy(),q=M.useRef(null),X=M.useRef(null),G=M.useRef([]),W=oi(t,q),K=oi(k==null?void 0:k.ref,B),Z=dR();if(!Z)throw new Error("MUI X: PickersInputBase should always be used inside a PickersTextField component");const fe=N??V,ge=ye=>{var pe;(pe=Z.onFocus)==null||pe.call(Z,ye),I==null||I(ye)},ve=ye=>{ge(ye)},be=ye=>{var pe,ie;if(C==null||C(ye),ye.key==="Enter"&&!ye.defaultMuiPrevented){if((pe=q.current)!=null&&pe.dataset.multiInput)return;const Ve=(ie=q.current)==null?void 0:ie.closest("form"),we=Ve==null?void 0:Ve.querySelector('[type="submit"]');if(!Ve||!we)return;ye.preventDefault(),Ve.requestSubmit(we)}},Pe=ye=>{var pe;(pe=Z.onBlur)==null||pe.call(Z,ye),R==null||R(ye)};M.useEffect(()=>{Z&&Z.setAdornedStart(!!f)},[Z,f]),M.useEffect(()=>{Z&&(a?Z.onEmpty():Z.onFilled())},[Z,a]);const ue=AY(F,fe),Se=(g==null?void 0:g.root)||py,Ae=Ct({elementType:Se,externalSlotProps:m==null?void 0:m.root,externalForwardedProps:P,additionalProps:{"aria-invalid":Z.error,ref:W},className:ue.root,ownerState:fe}),Fe=(g==null?void 0:g.input)||I_,ae=i.some(ye=>ye.content["data-range-position"]!==void 0);return M.useEffect(()=>{if(!ae||!fe.isPickerOpen)return;const{activeBarWidth:ye,sectionOffsets:pe}=EY(i,q);G.current=[pe[0],pe[1]],X.current&&(X.current.style.width=`${ye}px`)},[i,ae,fe.isPickerOpen]),v.jsxs(Se,H({},Ae,{children:[f,v.jsx(gY,{sectionListRef:O,elements:i,contentEditable:x,tabIndex:b,className:ue.sectionsContainer,onFocus:ge,onBlur:Pe,onInput:A,onPaste:E,onKeyDown:be,slots:{root:Fe,section:vY,sectionContent:xY,sectionSeparator:wY},slotProps:{root:H({},m==null?void 0:m.input,{ownerState:fe}),sectionContent:{className:Nd.sectionContent},sectionSeparator:({separatorPosition:ye})=>({className:ye==="before"?Nd.sectionBefore:Nd.sectionAfter})}}),d,p?p(H({},Z)):null,v.jsx(bY,H({name:T,className:ue.input,value:s,onChange:o,id:c,"aria-hidden":"true",tabIndex:-1,readOnly:D,required:Z.required,disabled:Z.disabled,onFocus:ve},k,{ref:K})),ae&&v.jsx(_Y,{className:ue.activeBar,ref:X,ownerState:{sectionOffsets:G.current}})]}))});function SY(n){return Mt("MuiPickersOutlinedInput",n)}const ja=H({},Nd,Ot("MuiPickersOutlinedInput",["root","notchedOutline","input"])),CY=["children","className","label","notched","shrink"],TY=ke("fieldset",{name:"MuiPickersOutlinedInput",slot:"NotchedOutline"})(({theme:n})=>{const e=n.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{textAlign:"left",position:"absolute",bottom:0,right:0,top:-5,left:0,margin:0,padding:"0 8px",pointerEvents:"none",borderRadius:"inherit",borderStyle:"solid",borderWidth:1,overflow:"hidden",minWidth:"0%",borderColor:n.vars?`rgba(${n.vars.palette.common.onBackgroundChannel} / 0.23)`:e}}),ED=ke("span")(({theme:n})=>({fontFamily:n.typography.fontFamily,fontSize:"inherit"})),IY=ke("legend",{shouldForwardProp:n=>Oa(n)&&n!=="notched"})(({theme:n})=>({float:"unset",width:"auto",overflow:"hidden",variants:[{props:{inputHasLabel:!1},style:{padding:0,lineHeight:"11px",transition:n.transitions.create("width",{duration:150,easing:n.transitions.easing.easeOut})}},{props:{inputHasLabel:!0},style:{display:"block",padding:0,height:11,fontSize:"0.75em",visibility:"hidden",maxWidth:.01,transition:n.transitions.create("max-width",{duration:50,easing:n.transitions.easing.easeOut}),whiteSpace:"nowrap","& > span":{paddingLeft:5,paddingRight:5,display:"inline-block",opacity:0,visibility:"visible"}}},{props:{inputHasLabel:!0,notched:!0},style:{maxWidth:"100%",transition:n.transitions.create("max-width",{duration:100,easing:n.transitions.easing.easeOut,delay:50})}}]}));function DY(n){const{className:e,label:t,notched:r}=n,i=Be(n,CY),a=hy();return v.jsx(TY,H({"aria-hidden":!0,className:e},i,{ownerState:a,children:v.jsx(IY,{ownerState:a,notched:r,children:t?v.jsx(ED,{children:t}):v.jsx(ED,{className:"notranslate",children:""})})}))}const RY=["label","autoFocus","ownerState","classes","notched"],MY=ke(py,{name:"MuiPickersOutlinedInput",slot:"Root"})(({theme:n})=>{const e=n.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{padding:"0 14px",borderRadius:(n.vars||n).shape.borderRadius,[`&:hover .${ja.notchedOutline}`]:{borderColor:(n.vars||n).palette.text.primary},"@media (hover: none)":{[`&:hover .${ja.notchedOutline}`]:{borderColor:n.vars?`rgba(${n.vars.palette.common.onBackgroundChannel} / 0.23)`:e}},[`&.${ja.focused} .${ja.notchedOutline}`]:{borderStyle:"solid",borderWidth:2},[`&.${ja.disabled}`]:{[`& .${ja.notchedOutline}`]:{borderColor:(n.vars||n).palette.action.disabled},"*":{color:(n.vars||n).palette.action.disabled}},[`&.${ja.error} .${ja.notchedOutline}`]:{borderColor:(n.vars||n).palette.error.main},variants:Object.keys((n.vars??n).palette).filter(t=>{var r;return((r=(n.vars??n).palette[t])==null?void 0:r.main)??!1}).map(t=>({props:{inputColor:t},style:{[`&.${ja.focused}:not(.${ja.error}) .${ja.notchedOutline}`]:{borderColor:(n.vars||n).palette[t].main}}}))}}),OY=ke(I_,{name:"MuiPickersOutlinedInput",slot:"SectionsContainer"})({padding:"16.5px 0",variants:[{props:{inputSize:"small"},style:{padding:"8.5px 0"}}]}),PY=n=>{const t=xt({root:["root"],notchedOutline:["notchedOutline"],input:["input"]},SY,n);return H({},n,t)},WO=M.forwardRef(function(e,t){const r=bt({props:e,name:"MuiPickersOutlinedInput"}),{label:i,classes:a,notched:s}=r,o=Be(r,RY),c=dR(),d=PY(a);return v.jsx(D_,H({slots:{root:MY,input:OY},renderSuffix:f=>v.jsx(DY,{shrink:!!(s||f.adornedStart||f.focused||f.filled),notched:!!(s||f.adornedStart||f.focused||f.filled),className:d.notchedOutline,label:i!=null&&i!==""&&(c!=null&&c.required)?v.jsxs(M.Fragment,{children:[i,"","*"]}):i})},o,{label:i,classes:d,ref:t}))});WO.muiName="Input";function kY(n){return Mt("MuiPickersFilledInput",n)}const Mc=H({},Nd,Ot("MuiPickersFilledInput",["root","underline","input"])),NY=["label","autoFocus","disableUnderline","hiddenLabel","classes"],LY=ke(py,{name:"MuiPickersFilledInput",slot:"Root",shouldForwardProp:n=>Oa(n)&&n!=="disableUnderline"})(({theme:n})=>{const e=n.palette.mode==="light",t=e?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)",r=e?"rgba(0, 0, 0, 0.06)":"rgba(255, 255, 255, 0.09)",i=e?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.13)",a=e?"rgba(0, 0, 0, 0.12)":"rgba(255, 255, 255, 0.12)";return{backgroundColor:n.vars?n.vars.palette.FilledInput.bg:r,borderTopLeftRadius:(n.vars||n).shape.borderRadius,borderTopRightRadius:(n.vars||n).shape.borderRadius,transition:n.transitions.create("background-color",{duration:n.transitions.duration.shorter,easing:n.transitions.easing.easeOut}),"&:hover":{backgroundColor:n.vars?n.vars.palette.FilledInput.hoverBg:i,"@media (hover: none)":{backgroundColor:n.vars?n.vars.palette.FilledInput.bg:r}},[`&.${Mc.focused}`]:{backgroundColor:n.vars?n.vars.palette.FilledInput.bg:r},[`&.${Mc.disabled}`]:{backgroundColor:n.vars?n.vars.palette.FilledInput.disabledBg:a},variants:[...Object.keys((n.vars??n).palette).filter(s=>(n.vars??n).palette[s].main).map(s=>{var o;return{props:{inputColor:s,disableUnderline:!1},style:{"&::after":{borderBottom:`2px solid ${(o=(n.vars||n).palette[s])==null?void 0:o.main}`}}}}),{props:{disableUnderline:!1},style:{"&::after":{left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:n.transitions.create("transform",{duration:n.transitions.duration.shorter,easing:n.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${Mc.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${Mc.error}`]:{"&:before, &:after":{borderBottomColor:(n.vars||n).palette.error.main}},"&::before":{borderBottom:`1px solid ${n.vars?`rgba(${n.vars.palette.common.onBackgroundChannel} / ${n.vars.opacity.inputUnderline})`:t}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:n.transitions.create("border-bottom-color",{duration:n.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${Mc.disabled}, .${Mc.error}):before`]:{borderBottom:`1px solid ${(n.vars||n).palette.text.primary}`},[`&.${Mc.disabled}:before`]:{borderBottomStyle:"dotted"}}},{props:{hasStartAdornment:!0},style:{paddingLeft:12}},{props:{hasEndAdornment:!0},style:{paddingRight:12}}]}}),BY=ke(I_,{name:"MuiPickersFilledInput",slot:"sectionsContainer",shouldForwardProp:n=>Oa(n)&&n!=="hiddenLabel"})({paddingTop:25,paddingRight:12,paddingBottom:8,paddingLeft:12,variants:[{props:{inputSize:"small"},style:{paddingTop:21,paddingBottom:4}},{props:{hasStartAdornment:!0},style:{paddingLeft:0}},{props:{hasEndAdornment:!0},style:{paddingRight:0}},{props:{hiddenLabel:!0},style:{paddingTop:16,paddingBottom:17}},{props:{hiddenLabel:!0,inputSize:"small"},style:{paddingTop:8,paddingBottom:9}}]}),FY=(n,e)=>{const{inputHasUnderline:t}=e,i=xt({root:["root",t&&"underline"],input:["input"]},kY,n);return H({},n,i)},YO=M.forwardRef(function(e,t){const r=bt({props:e,name:"MuiPickersFilledInput"}),{label:i,disableUnderline:a=!1,hiddenLabel:s=!1,classes:o}=r,c=Be(r,NY),d=hy(),f=H({},d,{inputHasUnderline:!a}),p=FY(o,f);return v.jsx(D_,H({slots:{root:LY,input:BY},slotProps:{root:{disableUnderline:a},input:{hiddenLabel:s}}},c,{label:i,classes:p,ref:t,ownerState:f}))});YO.muiName="Input";function VY(n){return Mt("MuiPickersFilledInput",n)}const Ph=H({},Nd,Ot("MuiPickersInput",["root","underline","input"])),jY=["label","autoFocus","disableUnderline","ownerState","classes"],UY=ke(py,{name:"MuiPickersInput",slot:"Root",shouldForwardProp:n=>Oa(n)&&n!=="disableUnderline"})(({theme:n})=>{let t=n.palette.mode==="light"?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return n.vars&&(t=`rgba(${n.vars.palette.common.onBackgroundChannel} / ${n.vars.opacity.inputUnderline})`),{"label + &":{marginTop:16},variants:[...Object.keys((n.vars??n).palette).filter(r=>(n.vars??n).palette[r].main).map(r=>({props:{inputColor:r,inputHasUnderline:!0},style:{"&::after":{borderBottom:`2px solid ${(n.vars||n).palette[r].main}`}}})),{props:{inputHasUnderline:!0},style:{"&::after":{background:"red",left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:n.transitions.create("transform",{duration:n.transitions.duration.shorter,easing:n.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${Ph.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${Ph.error}`]:{"&:before, &:after":{borderBottomColor:(n.vars||n).palette.error.main}},"&::before":{borderBottom:`1px solid ${t}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:n.transitions.create("border-bottom-color",{duration:n.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${Ph.disabled}, .${Ph.error}):before`]:{borderBottom:`2px solid ${(n.vars||n).palette.text.primary}`,"@media (hover: none)":{borderBottom:`1px solid ${t}`}},[`&.${Ph.disabled}:before`]:{borderBottomStyle:"dotted"}}}]}}),HY=(n,e)=>{const{inputHasUnderline:t}=e,i=xt({root:["root",!t&&"underline"],input:["input"]},VY,n);return H({},n,i)},qO=M.forwardRef(function(e,t){const r=bt({props:e,name:"MuiPickersInput"}),{label:i,disableUnderline:a=!1,classes:s}=r,o=Be(r,jY),c=hy(),d=H({},c,{inputHasUnderline:!a}),f=HY(s,d);return v.jsx(D_,H({slots:{root:UY},slotProps:{root:{disableUnderline:a}}},o,{ownerState:d,label:i,classes:f,ref:t}))});qO.muiName="Input";const zY=["onFocus","onBlur","className","classes","color","disabled","error","variant","required","hiddenLabel","InputProps","inputProps","inputRef","sectionListRef","elements","areAllSectionsEmpty","onClick","onKeyDown","onKeyUp","onPaste","onInput","endAdornment","startAdornment","tabIndex","contentEditable","focused","value","onChange","fullWidth","id","name","helperText","FormHelperTextProps","label","InputLabelProps","data-active-range-position"],$Y={standard:qO,filled:YO,outlined:WO},GY=ke(Mi,{name:"MuiPickersTextField",slot:"Root"})({maxWidth:"100%"}),WY=(n,e)=>{const{isFieldFocused:t,isFieldDisabled:r,isFieldRequired:i}=e;return xt({root:["root",t&&!r&&"focused",r&&"disabled",i&&"required"]},cY,n)},XO=M.forwardRef(function(e,t){const r=bt({props:e,name:"MuiPickersTextField"}),{onFocus:i,onBlur:a,className:s,classes:o,color:c="primary",disabled:d=!1,error:f=!1,variant:p="outlined",required:g=!1,hiddenLabel:m=!1,InputProps:x,inputProps:b,inputRef:A,sectionListRef:E,elements:C,areAllSectionsEmpty:T,onClick:D,onKeyDown:k,onKeyUp:B,onPaste:O,onInput:I,endAdornment:R,startAdornment:F,tabIndex:N,contentEditable:P,focused:V,value:q,onChange:X,fullWidth:G,id:W,name:K,helperText:Z,FormHelperTextProps:fe,label:ge,InputLabelProps:ve,"data-active-range-position":be}=r,Pe=Be(r,zY),ue=M.useRef(null),Se=oi(t,ue),Ae=N0(W),Fe=Z&&Ae?`${Ae}-helper-text`:void 0,ae=ge&&Ae?`${Ae}-label`:void 0,ye=T_({disabled:r.disabled,required:r.required,readOnly:x==null?void 0:x.readOnly}),pe=M.useMemo(()=>H({},ye,{isFieldValueEmpty:T,isFieldFocused:V??!1,hasFieldError:f??!1,inputSize:r.size??"medium",inputColor:c??"primary",isInputInFullWidth:G??!1,hasStartAdornment:!!(F??(x==null?void 0:x.startAdornment)),hasEndAdornment:!!(R??(x==null?void 0:x.endAdornment)),inputHasLabel:!!ge,isLabelShrunk:!!(ve!=null&&ve.shrink)}),[ye,T,V,f,r.size,c,G,F,R,x==null?void 0:x.startAdornment,x==null?void 0:x.endAdornment,ge,ve==null?void 0:ve.shrink]),ie=WY(o,pe),Ve=$Y[p],we={};return p==="outlined"?(ve&&typeof ve.shrink<"u"&&(we.notched=ve.shrink),we.label=ge):p==="filled"&&(we.hiddenLabel=m),v.jsx(GO.Provider,{value:pe,children:v.jsxs(GY,H({className:Ut(ie.root,s),ref:Se,focused:V,disabled:d,variant:p,error:f,color:c,fullWidth:G,required:g,ownerState:pe},Pe,{children:[ge!=null&&ge!==""&&v.jsx(Ca,H({htmlFor:Ae,id:ae},ve,{children:ge})),v.jsx(Ve,H({elements:C,areAllSectionsEmpty:T,onClick:D,onKeyDown:k,onKeyUp:B,onInput:I,onPaste:O,onFocus:i,onBlur:a,endAdornment:R,startAdornment:F,tabIndex:N,contentEditable:P,value:q,onChange:X,id:Ae,fullWidth:G,inputProps:b,inputRef:A,sectionListRef:E,label:ge,name:K,role:"group","aria-labelledby":ae,"aria-describedby":Fe,"aria-live":Fe?"polite":void 0,"data-active-range-position":be},we,x)),Z&&v.jsx(FN,H({id:Fe},fe,{children:Z}))]}))})}),YY=["enableAccessibleFieldDOMStructure"],qY=["InputProps","readOnly","onClear","clearable","clearButtonPosition","openPickerButtonPosition","openPickerAriaLabel"],XY=["onPaste","onKeyDown","inputMode","readOnly","InputProps","inputProps","inputRef","onClear","clearable","clearButtonPosition","openPickerButtonPosition","openPickerAriaLabel"],KY=["ownerState"],QY=["ownerState"],ZY=["ownerState"],JY=["ownerState"],eq=["InputProps","inputProps"],i2=()=>{},tq=n=>{var C,T,D,k,B,O,I,R,F;let{enableAccessibleFieldDOMStructure:e}=n,t=Be(n,YY);if(e){const{InputProps:N,readOnly:P,onClear:V,clearable:q,clearButtonPosition:X,openPickerButtonPosition:G,openPickerAriaLabel:W}=t,K=Be(t,qY),Z=Fc>=6&&((C=K==null?void 0:K.slotProps)!=null&&C.input)?d0((T=K==null?void 0:K.slotProps)==null?void 0:T.input,N):i2;return{clearable:q,onClear:V,clearButtonPosition:X,openPickerButtonPosition:G,openPickerAriaLabel:W,textFieldProps:H({},K,Fc>=6&&((D=K==null?void 0:K.slotProps)!=null&&D.input)?{slotProps:H({},K==null?void 0:K.slotProps,{input:fe=>H({},xo(Z,fe),{readOnly:P})})}:{InputProps:H({},N??{},{readOnly:P})})}}const{onPaste:r,onKeyDown:i,inputMode:a,readOnly:s,InputProps:o,inputProps:c,inputRef:d,onClear:f,clearable:p,clearButtonPosition:g,openPickerButtonPosition:m,openPickerAriaLabel:x}=t,b=Be(t,XY),A=Fc>=6&&((k=b==null?void 0:b.slotProps)!=null&&k.input)?d0((B=b==null?void 0:b.slotProps)==null?void 0:B.input,o):i2,E=Fc>=6&&((O=b==null?void 0:b.slotProps)!=null&&O.htmlInput)?d0((I=b==null?void 0:b.slotProps)==null?void 0:I.htmlInput,c):i2;return{clearable:p,onClear:f,clearButtonPosition:g,openPickerButtonPosition:m,openPickerAriaLabel:x,textFieldProps:H({},b,Fc>=6&&((R=b==null?void 0:b.slotProps)!=null&&R.input||(F=b==null?void 0:b.slotProps)!=null&&F.htmlInput)?{slotProps:H({},b==null?void 0:b.slotProps,{input:N=>H({},xo(A,N),{readOnly:s}),htmlInput:N=>H({},xo(E,N),{inputMode:a,onPaste:r,onKeyDown:i,ref:d})})}:{InputProps:H({},o??{},{readOnly:s}),inputProps:H({},c??{},{inputMode:a,onPaste:r,onKeyDown:i,ref:d})})}},R_=M.createContext({slots:{},slotProps:{},inputRef:void 0});function nq(n){var fe,ge,ve;const{fieldResponse:e,defaultOpenPickerIcon:t}=n,r=Ja(),i=__(),a=M.useContext(R_),{textFieldProps:s,onClear:o,clearable:c,openPickerAriaLabel:d,clearButtonPosition:f="end",openPickerButtonPosition:p="end"}=tq(e),g=T_(s),m=He(be=>{be.preventDefault(),i==null||i.setOpen(Pe=>!Pe)}),x=i?i.triggerStatus:"hidden",b=c?f:null,A=x!=="hidden"?p:null,E=a.slots.textField??(e.enableAccessibleFieldDOMStructure===!1?ht:XO),C=a.slots.inputAdornment??VN,T=Ct({elementType:C,externalSlotProps:a.slotProps.inputAdornment,additionalProps:{position:"start"},ownerState:H({},g,{position:"start"})}),D=Be(T,KY),k=Ct({elementType:C,externalSlotProps:a.slotProps.inputAdornment,additionalProps:{position:"end"},ownerState:H({},g,{position:"end"})}),B=Be(k,QY),O=a.slots.openPickerButton??$r,I=Ct({elementType:O,externalSlotProps:a.slotProps.openPickerButton,additionalProps:{disabled:x==="disabled",onClick:m,"aria-label":d,edge:s.variant!=="standard"?A:!1},ownerState:g}),R=Be(I,ZY),F=a.slots.openPickerIcon??t,N=Ct({elementType:F,externalSlotProps:a.slotProps.openPickerIcon,ownerState:g}),P=a.slots.clearButton??$r,V=Ct({elementType:P,externalSlotProps:a.slotProps.clearButton,className:"clearButton",additionalProps:{title:r.fieldClearLabel,tabIndex:-1,onClick:o,disabled:e.disabled||e.readOnly,edge:s.variant!=="standard"&&b!==A?b:!1},ownerState:g}),q=Be(V,JY),X=a.slots.clearIcon??QG,G=Ct({elementType:X,externalSlotProps:a.slotProps.clearIcon,additionalProps:{fontSize:"small"},ownerState:g});s.ref=oi(s.ref,i==null?void 0:i.rootRef);const W={},K=xo((Fc>=6&&((fe=s==null?void 0:s.slotProps)==null?void 0:fe.input))??s.InputProps,g);i&&(W.ref=i.triggerRef),!(K!=null&&K.startAdornment)&&(b==="start"||A==="start")&&(W.startAdornment=v.jsxs(C,H({},D,{children:[A==="start"&&v.jsx(O,H({},R,{children:v.jsx(F,H({},N))})),b==="start"&&v.jsx(P,H({},q,{children:v.jsx(X,H({},G))}))]}))),!(K!=null&&K.endAdornment)&&(b==="end"||A==="end")&&(W.endAdornment=v.jsxs(C,H({},B,{children:[b==="end"&&v.jsx(P,H({},q,{children:v.jsx(X,H({},G))})),A==="end"&&v.jsx(O,H({},R,{children:v.jsx(F,H({},N))}))]}))),!(W!=null&&W.endAdornment)&&!(W!=null&&W.startAdornment)&&a.slots.inputAdornment&&(W.endAdornment=v.jsx(C,H({},B))),b!=null&&(s.sx=[{"& .clearButton":{opacity:1},"@media (pointer: fine)":{"& .clearButton":{opacity:0},"&:hover, &:focus-within":{".clearButton":{opacity:1}}}},...Array.isArray(s.sx)?s.sx:[s.sx]]);const Z=Fc>=6&&((ge=s==null?void 0:s.slotProps)!=null&&ge.input)?xo(d0(K,W),g):H({},K,W);return(ve=s==null?void 0:s.slotProps)==null||delete ve.input,e.enableAccessibleFieldDOMStructure&&(s==null||delete s.slotProps),v.jsx(E,H({},s,{InputProps:Z}))}function d0(n,e){return n?e?t=>H({},xo(e,t),xo(n,t)):n:e}function rq(n){const{ref:e,externalForwardedProps:t,slotProps:r}=n,i=M.useContext(R_),a=__(),s=T_(t),{InputProps:o,inputProps:c}=t,d=Be(t,eq),f=Ct({elementType:XO,externalSlotProps:d0(i.slotProps.textField,r==null?void 0:r.textField),externalForwardedProps:d,additionalProps:{ref:e,sx:a==null?void 0:a.rootSx,label:a==null?void 0:a.label,name:a==null?void 0:a.name,className:a==null?void 0:a.rootClassName,inputRef:i.inputRef},ownerState:s});return f.inputProps=H({},c,f.inputProps),f.InputProps=H({},o,f.InputProps),f}function iq(n){const{slots:e={},slotProps:t={},inputRef:r,children:i}=n,a=M.useMemo(()=>({inputRef:r,slots:{openPickerButton:e.openPickerButton,openPickerIcon:e.openPickerIcon,textField:e.textField,inputAdornment:e.inputAdornment,clearIcon:e.clearIcon,clearButton:e.clearButton},slotProps:{openPickerButton:t.openPickerButton,openPickerIcon:t.openPickerIcon,textField:t.textField,inputAdornment:t.inputAdornment,clearIcon:t.clearIcon,clearButton:t.clearButton}}),[r,e.openPickerButton,e.openPickerIcon,e.textField,e.inputAdornment,e.clearIcon,e.clearButton,t.openPickerButton,t.openPickerIcon,t.textField,t.inputAdornment,t.clearIcon,t.clearButton]);return v.jsx(R_.Provider,{value:a,children:i})}const aq=n=>{const e=sY(n);return aY({manager:e,props:n})},sq=["slots","slotProps"],KO=M.forwardRef(function(e,t){const r=bt({props:e,name:"MuiDateTimeField"}),{slots:i,slotProps:a}=r,s=Be(r,sq),o=rq({slotProps:a,ref:t,externalForwardedProps:s}),c=aq(o);return v.jsx(iq,{slots:i,slotProps:a,inputRef:s.inputRef,children:v.jsx(nq,{fieldResponse:c,defaultOpenPickerIcon:qG})})}),QO=({shouldDisableDate:n,shouldDisableMonth:e,shouldDisableYear:t,minDate:r,maxDate:i,disableFuture:a,disablePast:s,timezone:o})=>{const c=Yt();return M.useCallback(d=>E_({adapter:c,value:d,timezone:o,props:{shouldDisableDate:n,shouldDisableMonth:e,shouldDisableYear:t,minDate:r,maxDate:i,disableFuture:a,disablePast:s}})!==null,[c,n,e,t,r,i,a,s,o])},oq=(n,e)=>(t,r)=>{switch(r.type){case"setVisibleDate":return H({},t,{slideDirection:r.direction,currentMonth:r.month,isMonthSwitchingAnimating:!e.isSameMonth(r.month,t.currentMonth)&&!n&&!r.skipAnimation,focusedDay:r.focusedDay});case"changeMonthTimezone":{const i=r.newTimezone;if(e.getTimezone(t.currentMonth)===i)return t;let a=e.setTimezone(t.currentMonth,i);return e.getMonth(a)!==e.getMonth(t.currentMonth)&&(a=e.setMonth(a,e.getMonth(t.currentMonth))),H({},t,{currentMonth:a})}case"finishMonthSwitchingAnimation":return H({},t,{isMonthSwitchingAnimating:!1});default:throw new Error("missing support")}},lq=n=>{const{value:e,referenceDate:t,disableFuture:r,disablePast:i,maxDate:a,minDate:s,onMonthChange:o,onYearChange:c,reduceAnimations:d,shouldDisableDate:f,timezone:p,getCurrentMonthFromVisibleDate:g}=n,m=Yt(),x=M.useRef(oq(!!d,m)).current,b=M.useMemo(()=>Oi.getInitialReferenceValue({value:e,adapter:m,timezone:p,props:n,referenceDate:t,granularity:za.day}),[t,p]),[A,E]=M.useReducer(x,{isMonthSwitchingAnimating:!1,focusedDay:b,currentMonth:m.startOfMonth(b),slideDirection:"left"}),C=QO({shouldDisableDate:f,minDate:s,maxDate:a,disableFuture:r,disablePast:i,timezone:p});M.useEffect(()=>{E({type:"changeMonthTimezone",newTimezone:m.getTimezone(b)})},[b,m]);const T=He(({target:k,reason:B})=>{if(B==="cell-interaction"&&A.focusedDay!=null&&m.isSameDay(k,A.focusedDay))return;const O=B==="cell-interaction";let I,R;if(B==="cell-interaction")I=g(k,A.currentMonth),R=k;else if(I=m.isSameMonth(k,A.currentMonth)?A.currentMonth:m.startOfMonth(k),R=k,C(R)){const P=m.startOfMonth(k),V=m.endOfMonth(k);R=S0({adapter:m,date:R,minDate:m.isBefore(s,P)?P:s,maxDate:m.isAfter(a,V)?V:a,disablePast:i,disableFuture:r,isDateDisabled:C,timezone:p})}const F=!m.isSameMonth(A.currentMonth,I),N=!m.isSameYear(A.currentMonth,I);F&&(o==null||o(I)),N&&(c==null||c(m.startOfYear(I))),E({type:"setVisibleDate",month:I,direction:m.isAfterDay(I,A.currentMonth)?"left":"right",focusedDay:A.focusedDay!=null&&R!=null&&m.isSameDay(R,A.focusedDay)?A.focusedDay:R,skipAnimation:O})}),D=M.useCallback(()=>{E({type:"finishMonthSwitchingAnimation"})},[]);return{referenceDate:b,calendarState:A,setVisibleDate:T,isDateDisabled:C,onMonthSwitchingAnimationEnd:D}},cq=n=>Mt("MuiPickersFadeTransitionGroup",n);Ot("MuiPickersFadeTransitionGroup",["root"]);const uq=["children"],dq=n=>xt({root:["root"]},cq,n),fq=ke(fR,{name:"MuiPickersFadeTransitionGroup",slot:"Root"})({display:"block",position:"relative"});function ZO(n){const e=bt({props:n,name:"MuiPickersFadeTransitionGroup"}),{className:t,reduceAnimations:r,transKey:i,classes:a}=e,{children:s}=e,o=Be(e,uq),c=dq(a),d=ru();return r?s:v.jsx(fq,{className:Ut(c.root,t),ownerState:o,children:v.jsx(O1,{appear:!1,mountOnEnter:!0,unmountOnExit:!0,timeout:{appear:d.transitions.duration.enteringScreen,enter:d.transitions.duration.enteringScreen,exit:0},children:s},i)})}const hq=n=>Mt("MuiPickersSlideTransition",n),_a=Ot("MuiPickersSlideTransition",["root","slideEnter-left","slideEnter-right","slideEnterActive","slideExit","slideExitActiveLeft-left","slideExitActiveLeft-right"]),pq=["children","className","reduceAnimations","slideDirection","transKey","classes"],gq=(n,e)=>{const{slideDirection:t}=e,r={root:["root"],exit:["slideExit"],enterActive:["slideEnterActive"],enter:[`slideEnter-${t}`],exitActive:[`slideExitActiveLeft-${t}`]};return xt(r,hq,n)},mq=ke(fR,{name:"MuiPickersSlideTransition",slot:"Root",overridesResolver:(n,e)=>[e.root,{[`.${_a["slideEnter-left"]}`]:e["slideEnter-left"]},{[`.${_a["slideEnter-right"]}`]:e["slideEnter-right"]},{[`.${_a.slideEnterActive}`]:e.slideEnterActive},{[`.${_a.slideExit}`]:e.slideExit},{[`.${_a["slideExitActiveLeft-left"]}`]:e["slideExitActiveLeft-left"]},{[`.${_a["slideExitActiveLeft-right"]}`]:e["slideExitActiveLeft-right"]}]})(({theme:n})=>{const e=n.transitions.create("transform",{duration:n.transitions.duration.complex,easing:"cubic-bezier(0.35, 0.8, 0.4, 1)"});return{display:"block",position:"relative",overflowX:"hidden","& > *":{position:"absolute",top:0,right:0,left:0},[`& .${_a["slideEnter-left"]}`]:{willChange:"transform",transform:"translate(100%)",zIndex:1},[`& .${_a["slideEnter-right"]}`]:{willChange:"transform",transform:"translate(-100%)",zIndex:1},[`& .${_a.slideEnterActive}`]:{transform:"translate(0%)",transition:e},[`& .${_a.slideExit}`]:{transform:"translate(0%)"},[`& .${_a["slideExitActiveLeft-left"]}`]:{willChange:"transform",transform:"translate(-100%)",transition:e,zIndex:0},[`& .${_a["slideExitActiveLeft-right"]}`]:{willChange:"transform",transform:"translate(100%)",transition:e,zIndex:0}}});function yq(n){const e=bt({props:n,name:"MuiPickersSlideTransition"}),{children:t,className:r,reduceAnimations:i,slideDirection:a,transKey:s,classes:o}=e,c=Be(e,pq),{ownerState:d}=sr(),f=H({},d,{slideDirection:a}),p=gq(o,f),g=ru();if(i)return v.jsx("div",{className:Ut(p.root,r),children:t});const m={exit:p.exit,enterActive:p.enterActive,enter:p.enter,exitActive:p.exitActive};return v.jsx(mq,{className:Ut(p.root,r),childFactory:x=>M.cloneElement(x,{classNames:m}),role:"presentation",ownerState:f,children:v.jsx(jN,H({mountOnEnter:!0,unmountOnExit:!0,timeout:g.transitions.duration.complex,classNames:m},c,{children:t}),s)})}const vq=n=>Mt("MuiDayCalendar",n);Ot("MuiDayCalendar",["root","header","weekDayLabel","loadingContainer","slideTransition","monthContainer","weekContainer","weekNumberLabel","weekNumber"]);const xq=["parentProps","day","focusedDay","selectedDays","isDateDisabled","currentMonthNumber","isViewFocused"],wq=["ownerState"],bq=n=>xt({root:["root"],header:["header"],weekDayLabel:["weekDayLabel"],loadingContainer:["loadingContainer"],slideTransition:["slideTransition"],monthContainer:["monthContainer"],weekContainer:["weekContainer"],weekNumberLabel:["weekNumberLabel"],weekNumber:["weekNumber"]},vq,n),JO=(T0+dy*2)*6,_q=ke("div",{name:"MuiDayCalendar",slot:"Root"})({}),Aq=ke("div",{name:"MuiDayCalendar",slot:"Header"})({display:"flex",justifyContent:"center",alignItems:"center"}),Eq=ke(te,{name:"MuiDayCalendar",slot:"WeekDayLabel"})(({theme:n})=>({width:36,height:40,margin:"0 2px",textAlign:"center",display:"flex",justifyContent:"center",alignItems:"center",color:(n.vars||n).palette.text.secondary})),Sq=ke(te,{name:"MuiDayCalendar",slot:"WeekNumberLabel"})(({theme:n})=>({width:36,height:40,margin:"0 2px",textAlign:"center",display:"flex",justifyContent:"center",alignItems:"center",color:(n.vars||n).palette.text.disabled})),Cq=ke(te,{name:"MuiDayCalendar",slot:"WeekNumber"})(({theme:n})=>H({},n.typography.caption,{width:T0,height:T0,padding:0,margin:`0 ${dy}px`,color:(n.vars||n).palette.text.disabled,fontSize:"0.75rem",alignItems:"center",justifyContent:"center",display:"inline-flex"})),Tq=ke("div",{name:"MuiDayCalendar",slot:"LoadingContainer"})({display:"flex",justifyContent:"center",alignItems:"center",minHeight:JO}),Iq=ke(yq,{name:"MuiDayCalendar",slot:"SlideTransition"})({minHeight:JO}),Dq=ke("div",{name:"MuiDayCalendar",slot:"MonthContainer"})({overflow:"hidden"}),Rq=ke("div",{name:"MuiDayCalendar",slot:"WeekContainer"})({margin:`${dy}px 0`,display:"flex",justifyContent:"center"});function Mq(n){let{parentProps:e,day:t,focusedDay:r,selectedDays:i,isDateDisabled:a,currentMonthNumber:s,isViewFocused:o}=n,c=Be(n,xq);const{disabled:d,disableHighlightToday:f,isMonthSwitchingAnimating:p,showDaysOutsideCurrentMonth:g,slots:m,slotProps:x,timezone:b}=e,A=Yt(),E=wf(b),C=r!=null&&A.isSameDay(t,r),T=o&&C,D=i.some(q=>A.isSameDay(q,t)),k=A.isSameDay(t,E),B=M.useMemo(()=>d||a(t),[d,a,t]),O=M.useMemo(()=>A.getMonth(t)!==s,[A,t,s]),I=MO({day:t,selected:D,disabled:B,today:k,outsideCurrentMonth:O,disableMargin:void 0,disableHighlightToday:f,showDaysOutsideCurrentMonth:g}),R=(m==null?void 0:m.day)??WW,F=Ct({elementType:R,externalSlotProps:x==null?void 0:x.day,additionalProps:H({disableHighlightToday:f,showDaysOutsideCurrentMonth:g,role:"gridcell",isAnimating:p,"data-timestamp":A.toJsDate(t).valueOf()},c),ownerState:H({},I,{day:t,isDayDisabled:B,isDaySelected:D})}),N=Be(F,wq),P=M.useMemo(()=>{const q=A.startOfMonth(A.setMonth(t,s));return g?A.isSameDay(t,A.startOfWeek(q)):A.isSameDay(t,q)},[s,t,g,A]),V=M.useMemo(()=>{const q=A.endOfMonth(A.setMonth(t,s));return g?A.isSameDay(t,A.endOfWeek(q)):A.isSameDay(t,q)},[s,t,g,A]);return v.jsx(R,H({},N,{day:t,disabled:B,autoFocus:!O&&T,today:k,outsideCurrentMonth:O,isFirstVisibleCell:P,isLastVisibleCell:V,selected:D,tabIndex:C?0:-1,"aria-selected":D,"aria-current":k?"date":void 0}))}function Oq(n){const e=bt({props:n,name:"MuiDayCalendar"}),t=Yt(),{onFocusedDayChange:r,className:i,classes:a,currentMonth:s,selectedDays:o,focusedDay:c,loading:d,onSelectedDaysChange:f,onMonthSwitchingAnimationEnd:p,readOnly:g,reduceAnimations:m,renderLoading:x=()=>v.jsx("span",{children:"..."}),slideDirection:b,TransitionProps:A,disablePast:E,disableFuture:C,minDate:T,maxDate:D,shouldDisableDate:k,shouldDisableMonth:B,shouldDisableYear:O,dayOfWeekFormatter:I=pe=>t.format(pe,"weekdayShort").charAt(0).toUpperCase(),hasFocus:R,onFocusedViewChange:F,gridLabelId:N,displayWeekNumber:P,fixedWeekNumber:V,timezone:q}=e,X=wf(q),G=bq(a),W=Ma(),K=QO({shouldDisableDate:k,shouldDisableMonth:B,shouldDisableYear:O,minDate:T,maxDate:D,disablePast:E,disableFuture:C,timezone:q}),Z=Ja(),fe=He(pe=>{g||f(pe)}),ge=pe=>{K(pe)||(r(pe),F==null||F(!0))},ve=He((pe,ie)=>{switch(pe.key){case"ArrowUp":ge(t.addDays(ie,-7)),pe.preventDefault();break;case"ArrowDown":ge(t.addDays(ie,7)),pe.preventDefault();break;case"ArrowLeft":{const Ve=t.addDays(ie,W?1:-1),we=t.addMonths(ie,W?1:-1),ze=S0({adapter:t,date:Ve,minDate:W?Ve:t.startOfMonth(we),maxDate:W?t.endOfMonth(we):Ve,isDateDisabled:K,timezone:q});ge(ze||Ve),pe.preventDefault();break}case"ArrowRight":{const Ve=t.addDays(ie,W?-1:1),we=t.addMonths(ie,W?-1:1),ze=S0({adapter:t,date:Ve,minDate:W?t.startOfMonth(we):Ve,maxDate:W?Ve:t.endOfMonth(we),isDateDisabled:K,timezone:q});ge(ze||Ve),pe.preventDefault();break}case"Home":ge(t.startOfWeek(ie)),pe.preventDefault();break;case"End":ge(t.endOfWeek(ie)),pe.preventDefault();break;case"PageUp":ge(t.addMonths(ie,1)),pe.preventDefault();break;case"PageDown":ge(t.addMonths(ie,-1)),pe.preventDefault();break}}),be=He((pe,ie)=>ge(ie)),Pe=He((pe,ie)=>{c!=null&&t.isSameDay(c,ie)&&(F==null||F(!1))}),ue=t.getMonth(s),Se=t.getYear(s),Ae=M.useMemo(()=>o.filter(pe=>!!pe).map(pe=>t.startOfDay(pe)),[t,o]),Fe=`${Se}-${ue}`,ae=M.useMemo(()=>M.createRef(),[Fe]),ye=M.useMemo(()=>{const pe=t.getWeekArray(s);let ie=t.addMonths(s,1);for(;V&&pe.length<V;){const Ve=t.getWeekArray(ie),we=t.isSameDay(pe[pe.length-1][0],Ve[0][0]);Ve.slice(we?1:0).forEach(ze=>{pe.length<V&&pe.push(ze)}),ie=t.addMonths(ie,1)}return pe},[s,V,t]);return v.jsxs(_q,{role:"grid","aria-labelledby":N,className:G.root,children:[v.jsxs(Aq,{role:"row",className:G.header,children:[P&&v.jsx(Sq,{variant:"caption",role:"columnheader","aria-label":Z.calendarWeekNumberHeaderLabel,className:G.weekNumberLabel,children:Z.calendarWeekNumberHeaderText}),CG(t,X).map((pe,ie)=>v.jsx(Eq,{variant:"caption",role:"columnheader","aria-label":t.format(pe,"weekday"),className:G.weekDayLabel,children:I(pe)},ie.toString()))]}),d?v.jsx(Tq,{className:G.loadingContainer,children:x()}):v.jsx(Iq,H({transKey:Fe,onExited:p,reduceAnimations:m,slideDirection:b,className:Ut(i,G.slideTransition)},A,{nodeRef:ae,children:v.jsx(Dq,{ref:ae,role:"rowgroup",className:G.monthContainer,children:ye.map((pe,ie)=>v.jsxs(Rq,{role:"row",className:G.weekContainer,"aria-rowindex":ie+1,children:[P&&v.jsx(Cq,{className:G.weekNumber,role:"rowheader","aria-label":Z.calendarWeekNumberAriaLabelText(t.getWeekNumber(pe[0])),children:Z.calendarWeekNumberText(t.getWeekNumber(pe[0]))}),pe.map((Ve,we)=>v.jsx(Mq,{parentProps:e,day:Ve,selectedDays:Ae,isViewFocused:R,focusedDay:c,onKeyDown:ve,onFocus:be,onBlur:Pe,onDaySelect:fe,isDateDisabled:K,currentMonthNumber:ue,"aria-colindex":we+1},Ve.toString()))]},`week-${pe[0]}`))})}))]})}function eP(n){return Mt("MuiMonthCalendar",n)}const Wg=Ot("MuiMonthCalendar",["root","button","disabled","selected"]),Pq=["autoFocus","classes","disabled","selected","value","onClick","onKeyDown","onFocus","onBlur","slots","slotProps"],kq=(n,e)=>{const t={button:["button",e.isMonthDisabled&&"disabled",e.isMonthSelected&&"selected"]};return xt(t,eP,n)},Nq=ke("button",{name:"MuiMonthCalendar",slot:"Button",overridesResolver:(n,e)=>[e.button,{[`&.${Wg.disabled}`]:e.disabled},{[`&.${Wg.selected}`]:e.selected}]})(({theme:n})=>H({color:"unset",backgroundColor:"transparent",border:0,outline:0},n.typography.subtitle1,{height:36,width:72,borderRadius:18,cursor:"pointer","&:focus":{backgroundColor:n.vars?`rgba(${n.vars.palette.action.activeChannel} / ${n.vars.palette.action.hoverOpacity})`:Bs(n.palette.action.active,n.palette.action.hoverOpacity)},"&:hover":{backgroundColor:n.vars?`rgba(${n.vars.palette.action.activeChannel} / ${n.vars.palette.action.hoverOpacity})`:Bs(n.palette.action.active,n.palette.action.hoverOpacity)},"&:disabled":{cursor:"auto",pointerEvents:"none"},[`&.${Wg.disabled}`]:{color:(n.vars||n).palette.text.secondary},[`&.${Wg.selected}`]:{color:(n.vars||n).palette.primary.contrastText,backgroundColor:(n.vars||n).palette.primary.main,"&:focus, &:hover":{backgroundColor:(n.vars||n).palette.primary.dark}}})),Lq=M.memo(function(e){const{autoFocus:t,classes:r,disabled:i,selected:a,value:s,onClick:o,onKeyDown:c,onFocus:d,onBlur:f,slots:p,slotProps:g}=e,m=Be(e,Pq),x=M.useRef(null),{ownerState:b}=sr(),A=H({},b,{isMonthDisabled:i,isMonthSelected:a}),E=kq(r,A);Xn(()=>{var D;t&&((D=x.current)==null||D.focus())},[t]);const C=(p==null?void 0:p.monthButton)??Nq,T=Ct({elementType:C,externalSlotProps:g==null?void 0:g.monthButton,externalForwardedProps:m,additionalProps:{disabled:i,ref:x,type:"button",role:"radio","aria-checked":a,onClick:D=>o(D,s),onKeyDown:D=>c(D,s),onFocus:D=>d(D,s),onBlur:D=>f(D,s)},ownerState:A,className:E.button});return v.jsx(C,H({},T))}),Bq=["autoFocus","className","currentMonth","classes","value","defaultValue","referenceDate","disabled","disableFuture","disablePast","maxDate","minDate","onChange","shouldDisableMonth","readOnly","disableHighlightToday","onMonthFocus","hasFocus","onFocusedViewChange","monthsPerRow","timezone","gridLabelId","slots","slotProps"],Fq=n=>xt({root:["root"]},eP,n);function Vq(n,e){const t=bt({props:n,name:e}),r=C_(t);return H({},t,r,{monthsPerRow:t.monthsPerRow??3})}const SD=(n,e,t,r,i)=>!!(n===e&&r&&i.isSameYear(t,r)),jq=ke("div",{name:"MuiMonthCalendar",slot:"Root",shouldForwardProp:n=>Oa(n)&&n!=="monthsPerRow"})({display:"flex",flexWrap:"wrap",justifyContent:"space-evenly",rowGap:16,padding:"8px 0",width:Qd,boxSizing:"border-box",variants:[{props:{monthsPerRow:3},style:{columnGap:24}},{props:{monthsPerRow:4},style:{columnGap:0}}]}),Uq=M.forwardRef(function(e,t){const r=Vq(e,"MuiMonthCalendar"),{autoFocus:i,className:a,currentMonth:s,classes:o,value:c,defaultValue:d,referenceDate:f,disabled:p,disableFuture:g,disablePast:m,maxDate:x,minDate:b,onChange:A,shouldDisableMonth:E,readOnly:C,onMonthFocus:T,hasFocus:D,onFocusedViewChange:k,monthsPerRow:B,timezone:O,gridLabelId:I,slots:R,slotProps:F}=r,N=Be(r,Bq),{value:P,handleValueChange:V,timezone:q}=cu({name:"MonthCalendar",timezone:O,value:c,defaultValue:d,referenceDate:f,onChange:A,valueManager:Oi}),X=wf(q),G=Ma(),W=Yt(),{ownerState:K}=sr(),Z=M.useMemo(()=>Oi.getInitialReferenceValue({value:P,adapter:W,props:r,timezone:q,referenceDate:f,granularity:za.month}),[]),fe=Fq(o),ge=M.useMemo(()=>W.getMonth(X),[W,X]),ve=M.useMemo(()=>P!=null?W.getMonth(P):null,[P,W]),[be,Pe]=M.useState(()=>ve||W.getMonth(Z)),[ue,Se]=Hd({name:"MonthCalendar",state:"hasFocus",controlled:D,default:i??!1}),Ae=He(we=>{Se(we),k&&k(we)}),Fe=M.useCallback(we=>{const ze=W.startOfMonth(m&&W.isAfter(X,b)?X:b),Oe=W.startOfMonth(g&&W.isBefore(X,x)?X:x),Re=W.startOfMonth(we);return W.isBefore(Re,ze)||W.isAfter(Re,Oe)?!0:E?E(Re):!1},[g,m,x,b,X,E,W]),ae=He((we,ze)=>{if(C)return;const Oe=P&&s&&!W.isSameYear(P,s)?W.setYear(P,W.getYear(s)):P,Re=W.setMonth(Oe??Z,ze);V(Re)}),ye=He(we=>{Fe(W.setMonth(P??s??Z,we))||(Pe(we),Ae(!0),T&&T(we))});M.useEffect(()=>{Pe(we=>ve!==null&&we!==ve?ve:we)},[ve]);const pe=He((we,ze)=>{switch(we.key){case"ArrowUp":ye((12+ze-3)%12),we.preventDefault();break;case"ArrowDown":ye((12+ze+3)%12),we.preventDefault();break;case"ArrowLeft":ye((12+ze+(G?1:-1))%12),we.preventDefault();break;case"ArrowRight":ye((12+ze+(G?-1:1))%12),we.preventDefault();break}}),ie=He((we,ze)=>{ye(ze)}),Ve=He((we,ze)=>{be===ze&&Ae(!1)});return v.jsx(jq,H({ref:t,className:Ut(fe.root,a),ownerState:K,role:"radiogroup","aria-labelledby":I,monthsPerRow:B},N,{children:m_(W,s??P??Z).map(we=>{const ze=W.getMonth(we),Oe=W.format(we,"monthShort"),Re=W.format(we,"month"),qe=SD(ze,ve,we,P,W),We=p||Fe(we);return v.jsx(Lq,{selected:qe,value:ze,onClick:ae,onKeyDown:pe,autoFocus:ue&&ze===be,disabled:We,tabIndex:ze===be&&!We?0:-1,onFocus:ie,onBlur:Ve,"aria-current":SD(ze,ge,we,X,W)?"date":void 0,"aria-label":Re,slots:R,slotProps:F,classes:o,children:Oe},Oe)})}))});function tP(n){return Mt("MuiYearCalendar",n)}const Yg=Ot("MuiYearCalendar",["root","button","disabled","selected"]),Hq=["autoFocus","classes","disabled","selected","value","onClick","onKeyDown","onFocus","onBlur","slots","slotProps"],zq=(n,e)=>{const t={button:["button",e.isYearDisabled&&"disabled",e.isYearSelected&&"selected"]};return xt(t,tP,n)},$q=ke("button",{name:"MuiYearCalendar",slot:"Button",overridesResolver:(n,e)=>[e.button,{[`&.${Yg.disabled}`]:e.disabled},{[`&.${Yg.selected}`]:e.selected}]})(({theme:n})=>H({color:"unset",backgroundColor:"transparent",border:0,outline:0},n.typography.subtitle1,{height:36,width:72,borderRadius:18,cursor:"pointer","&:focus":{backgroundColor:n.vars?`rgba(${n.vars.palette.action.activeChannel} / ${n.vars.palette.action.focusOpacity})`:Bs(n.palette.action.active,n.palette.action.focusOpacity)},"&:hover":{backgroundColor:n.vars?`rgba(${n.vars.palette.action.activeChannel} / ${n.vars.palette.action.hoverOpacity})`:Bs(n.palette.action.active,n.palette.action.hoverOpacity)},"&:disabled":{cursor:"auto",pointerEvents:"none"},[`&.${Yg.disabled}`]:{color:(n.vars||n).palette.text.secondary},[`&.${Yg.selected}`]:{color:(n.vars||n).palette.primary.contrastText,backgroundColor:(n.vars||n).palette.primary.main,"&:focus, &:hover":{backgroundColor:(n.vars||n).palette.primary.dark}}})),Gq=M.memo(function(e){const{autoFocus:t,classes:r,disabled:i,selected:a,value:s,onClick:o,onKeyDown:c,onFocus:d,onBlur:f,slots:p,slotProps:g}=e,m=Be(e,Hq),x=M.useRef(null),{ownerState:b}=sr(),A=H({},b,{isYearDisabled:i,isYearSelected:a}),E=zq(r,A);Xn(()=>{var D;t&&((D=x.current)==null||D.focus())},[t]);const C=(p==null?void 0:p.yearButton)??$q,T=Ct({elementType:C,externalSlotProps:g==null?void 0:g.yearButton,externalForwardedProps:m,additionalProps:{disabled:i,ref:x,type:"button",role:"radio","aria-checked":a,onClick:D=>o(D,s),onKeyDown:D=>c(D,s),onFocus:D=>d(D,s),onBlur:D=>f(D,s)},ownerState:A,className:E.button});return v.jsx(C,H({},T))}),Wq=["autoFocus","className","classes","value","defaultValue","referenceDate","disabled","disableFuture","disablePast","maxDate","minDate","onChange","readOnly","shouldDisableYear","disableHighlightToday","onYearFocus","hasFocus","onFocusedViewChange","yearsOrder","yearsPerRow","timezone","gridLabelId","slots","slotProps"],Yq=n=>xt({root:["root"]},tP,n);function qq(n,e){const t=bt({props:n,name:e}),r=C_(t);return H({},t,r,{yearsPerRow:t.yearsPerRow??3,yearsOrder:t.yearsOrder??"asc"})}const Xq=ke("div",{name:"MuiYearCalendar",slot:"Root",shouldForwardProp:n=>Oa(n)&&n!=="yearsPerRow"})({display:"flex",flexWrap:"wrap",justifyContent:"space-evenly",rowGap:12,padding:"6px 0",overflowY:"auto",height:"100%",width:Qd,maxHeight:fW,boxSizing:"border-box",position:"relative",variants:[{props:{yearsPerRow:3},style:{columnGap:24}},{props:{yearsPerRow:4},style:{columnGap:0,padding:"0 2px"}}]}),Kq=ke("div",{name:"MuiYearCalendar",slot:"ButtonFiller"})({height:36,width:72}),Qq=M.forwardRef(function(e,t){const r=qq(e,"MuiYearCalendar"),{autoFocus:i,className:a,classes:s,value:o,defaultValue:c,referenceDate:d,disabled:f,disableFuture:p,disablePast:g,maxDate:m,minDate:x,onChange:b,readOnly:A,shouldDisableYear:E,onYearFocus:C,hasFocus:T,onFocusedViewChange:D,yearsOrder:k,yearsPerRow:B,timezone:O,gridLabelId:I,slots:R,slotProps:F}=r,N=Be(r,Wq),{value:P,handleValueChange:V,timezone:q}=cu({name:"YearCalendar",timezone:O,value:o,defaultValue:c,referenceDate:d,onChange:b,valueManager:Oi}),X=wf(q),G=Ma(),W=Yt(),{ownerState:K}=sr(),Z=M.useMemo(()=>Oi.getInitialReferenceValue({value:P,adapter:W,props:r,timezone:q,referenceDate:d,granularity:za.year}),[]),fe=Yq(s),ge=M.useMemo(()=>W.getYear(X),[W,X]),ve=M.useMemo(()=>P!=null?W.getYear(P):null,[P,W]),[be,Pe]=M.useState(()=>ve||W.getYear(Z)),[ue,Se]=Hd({name:"YearCalendar",state:"hasFocus",controlled:T,default:i??!1}),Ae=He(Me=>{Se(Me),D&&D(Me)}),Fe=M.useCallback(Me=>{if(g&&W.isBeforeYear(Me,X)||p&&W.isAfterYear(Me,X)||x&&W.isBeforeYear(Me,x)||m&&W.isAfterYear(Me,m))return!0;if(!E)return!1;const Ne=W.startOfYear(Me);return E(Ne)},[p,g,m,x,X,E,W]),ae=He((Me,Ne)=>{if(A)return;const ft=W.setYear(P??Z,Ne);V(ft)}),ye=He(Me=>{Fe(W.setYear(P??Z,Me))||(Pe(Me),Ae(!0),C==null||C(Me))});M.useEffect(()=>{Pe(Me=>ve!==null&&Me!==ve?ve:Me)},[ve]);const pe=k!=="desc"?B*1:B*-1,ie=G&&k==="asc"||!G&&k==="desc"?-1:1,Ve=He((Me,Ne)=>{switch(Me.key){case"ArrowUp":ye(Ne-pe),Me.preventDefault();break;case"ArrowDown":ye(Ne+pe),Me.preventDefault();break;case"ArrowLeft":ye(Ne-ie),Me.preventDefault();break;case"ArrowRight":ye(Ne+ie),Me.preventDefault();break}}),we=He((Me,Ne)=>{ye(Ne)}),ze=He((Me,Ne)=>{be===Ne&&Ae(!1)}),Oe=M.useRef(null),Re=oi(t,Oe);M.useEffect(()=>{if(i||Oe.current===null)return;const Me=Oe.current.querySelector('[tabindex="0"]');if(!Me)return;const Ne=Me.offsetHeight,ft=Me.offsetTop,_t=Oe.current.clientHeight,xn=Oe.current.scrollTop,Mn=ft+Ne;Ne>_t||ft<xn||(Oe.current.scrollTop=Mn-_t/2-Ne/2)},[i]);const qe=W.getYearRange([x,m]);k==="desc"&&qe.reverse();let We=B-qe.length%B;return We===B&&(We=0),v.jsxs(Xq,H({ref:Re,className:Ut(fe.root,a),ownerState:K,role:"radiogroup","aria-labelledby":I,yearsPerRow:B},N,{children:[qe.map(Me=>{const Ne=W.getYear(Me),ft=Ne===ve,_t=f||Fe(Me);return v.jsx(Gq,{selected:ft,value:Ne,onClick:ae,onKeyDown:Ve,autoFocus:ue&&Ne===be,disabled:_t,tabIndex:Ne===be&&!_t?0:-1,onFocus:we,onBlur:ze,"aria-current":ge===Ne?"date":void 0,slots:R,slotProps:F,classes:s,children:W.format(Me,"year")},W.format(Me,"year"))}),Array.from({length:We},(Me,Ne)=>v.jsx(Kq,{},Ne))]}))}),Zq=n=>Mt("MuiPickersCalendarHeader",n),Jq=Ot("MuiPickersCalendarHeader",["root","labelContainer","label","switchViewButton","switchViewIcon"]),eX=["slots","slotProps","currentMonth","disabled","disableFuture","disablePast","maxDate","minDate","onMonthChange","onViewChange","view","reduceAnimations","views","labelId","className","classes","timezone","format"],tX=["ownerState"],nX=n=>xt({root:["root"],labelContainer:["labelContainer"],label:["label"],switchViewButton:["switchViewButton"],switchViewIcon:["switchViewIcon"]},Zq,n),rX=ke("div",{name:"MuiPickersCalendarHeader",slot:"Root"})({display:"flex",alignItems:"center",marginTop:12,marginBottom:4,paddingLeft:24,paddingRight:12,maxHeight:40,minHeight:40}),iX=ke("div",{name:"MuiPickersCalendarHeader",slot:"LabelContainer"})(({theme:n})=>H({display:"flex",overflow:"hidden",alignItems:"center",cursor:"pointer",marginRight:"auto"},n.typography.body1,{fontWeight:n.typography.fontWeightMedium})),aX=ke("div",{name:"MuiPickersCalendarHeader",slot:"Label"})({marginRight:6}),sX=ke($r,{name:"MuiPickersCalendarHeader",slot:"SwitchViewButton"})({marginRight:"auto",variants:[{props:{view:"year"},style:{[`.${Jq.switchViewIcon}`]:{transform:"rotate(180deg)"}}}]}),oX=ke(GG,{name:"MuiPickersCalendarHeader",slot:"SwitchViewIcon"})(({theme:n})=>({willChange:"transform",transition:n.transitions.create("transform"),transform:"rotate(0deg)"})),lX=M.forwardRef(function(e,t){const r=Ja(),i=Yt(),a=bt({props:e,name:"MuiPickersCalendarHeader"}),{slots:s,slotProps:o,currentMonth:c,disabled:d,disableFuture:f,disablePast:p,maxDate:g,minDate:m,onMonthChange:x,onViewChange:b,view:A,reduceAnimations:E,views:C,labelId:T,className:D,classes:k,timezone:B,format:O=`${i.formats.month} ${i.formats.year}`}=a,I=Be(a,eX),{ownerState:R}=sr(),F=nX(k),N=(s==null?void 0:s.switchViewButton)??sX,P=Ct({elementType:N,externalSlotProps:o==null?void 0:o.switchViewButton,additionalProps:{size:"small","aria-label":r.calendarViewSwitchingButtonAriaLabel(A)},ownerState:H({},R,{view:A}),className:F.switchViewButton}),V=(s==null?void 0:s.switchViewIcon)??oX,q=Ct({elementType:V,externalSlotProps:o==null?void 0:o.switchViewIcon,ownerState:R,className:F.switchViewIcon}),X=Be(q,tX),G=()=>x(i.addMonths(c,1)),W=()=>x(i.addMonths(c,-1)),K=uW(c,{disableFuture:f,maxDate:g,timezone:B}),Z=dW(c,{disablePast:p,minDate:m,timezone:B}),fe=()=>{if(!(C.length===1||!b||d))if(C.length===2)b(C.find(ve=>ve!==A)||C[0]);else{const ve=C.indexOf(A)!==0?0:1;b(C[ve])}};if(C.length===1&&C[0]==="year")return null;const ge=i.formatByString(c,O);return v.jsxs(rX,H({},I,{ownerState:R,className:Ut(F.root,D),ref:t,children:[v.jsxs(iX,{role:"presentation",onClick:fe,ownerState:R,"aria-live":"polite",className:F.labelContainer,children:[v.jsx(ZO,{reduceAnimations:E,transKey:ge,children:v.jsx(aX,{id:T,ownerState:R,className:F.label,children:ge})}),C.length>1&&!d&&v.jsx(N,H({},P,{children:v.jsx(V,H({},X))}))]}),v.jsx(O1,{in:A==="day",appear:!E,enter:!E,children:v.jsx(aW,{slots:s,slotProps:o,onGoToPrevious:W,isPreviousDisabled:Z,previousLabel:r.previousMonth,onGoToNext:G,isNextDisabled:K,nextLabel:r.nextMonth})})]}))}),cX="@media (prefers-reduced-motion: reduce)",Ld=typeof navigator<"u"&&navigator.userAgent.match(/android\s(\d+)|OS\s(\d+)/i),CD=Ld&&Ld[1]?parseInt(Ld[1],10):null,TD=Ld&&Ld[2]?parseInt(Ld[2],10):null,uX=CD&&CD<10||TD&&TD<13||!1;function nP(n){const e=M1(cX,{defaultMatches:!1});return n??(e||uX)}const dX=n=>Mt("MuiDateCalendar",n);Ot("MuiDateCalendar",["root","viewTransitionContainer"]);const fX=["autoFocus","onViewChange","value","defaultValue","referenceDate","disableFuture","disablePast","onChange","onYearChange","onMonthChange","reduceAnimations","shouldDisableDate","shouldDisableMonth","shouldDisableYear","view","views","openTo","className","classes","disabled","readOnly","minDate","maxDate","disableHighlightToday","focusedView","onFocusedViewChange","showDaysOutsideCurrentMonth","fixedWeekNumber","dayOfWeekFormatter","slots","slotProps","loading","renderLoading","displayWeekNumber","yearsOrder","yearsPerRow","monthsPerRow","timezone"],hX=n=>xt({root:["root"],viewTransitionContainer:["viewTransitionContainer"]},dX,n);function pX(n,e){const t=bt({props:n,name:e}),r=nP(t.reduceAnimations),i=C_(t);return H({},t,i,{loading:t.loading??!1,openTo:t.openTo??"day",views:t.views??["year","day"],reduceAnimations:r,renderLoading:t.renderLoading??(()=>v.jsx("span",{children:"..."}))})}const gX=ke(A_,{name:"MuiDateCalendar",slot:"Root"})({display:"flex",flexDirection:"column",height:Zd}),mX=ke(ZO,{name:"MuiDateCalendar",slot:"ViewTransitionContainer"})({}),yX=M.forwardRef(function(e,t){const r=Yt(),{ownerState:i}=sr(),a=N0(),s=pX(e,"MuiDateCalendar"),{autoFocus:o,onViewChange:c,value:d,defaultValue:f,referenceDate:p,disableFuture:g,disablePast:m,onChange:x,onMonthChange:b,reduceAnimations:A,shouldDisableDate:E,shouldDisableMonth:C,shouldDisableYear:T,view:D,views:k,openTo:B,className:O,classes:I,disabled:R,readOnly:F,minDate:N,maxDate:P,disableHighlightToday:V,focusedView:q,onFocusedViewChange:X,showDaysOutsideCurrentMonth:G,fixedWeekNumber:W,dayOfWeekFormatter:K,slots:Z,slotProps:fe,loading:ge,renderLoading:ve,displayWeekNumber:be,yearsOrder:Pe,yearsPerRow:ue,monthsPerRow:Se,timezone:Ae}=s,Fe=Be(s,fX),{value:ae,handleValueChange:ye,timezone:pe}=cu({name:"DateCalendar",timezone:Ae,value:d,defaultValue:f,referenceDate:p,onChange:x,valueManager:Oi}),{view:ie,setView:Ve,focusedView:we,setFocusedView:ze,goToNextView:Oe,setValueAndGoToNextView:Re}=uy({view:D,views:k,openTo:B,onChange:ye,onViewChange:c,autoFocus:o,focusedView:q,onFocusedViewChange:X}),{referenceDate:qe,calendarState:We,setVisibleDate:Me,isDateDisabled:Ne,onMonthSwitchingAnimationEnd:ft}=lq({value:ae,referenceDate:p,reduceAnimations:A,onMonthChange:b,minDate:N,maxDate:P,shouldDisableDate:E,disablePast:m,disableFuture:g,timezone:pe,getCurrentMonthFromVisibleDate:(yt,Vn)=>r.isSameMonth(yt,Vn)?Vn:r.startOfMonth(yt)}),_t=R&&ae||N,xn=R&&ae||P,Mn=`${a}-grid-label`,rt=we!==null,at=(Z==null?void 0:Z.calendarHeader)??lX,Cn=Ct({elementType:at,externalSlotProps:fe==null?void 0:fe.calendarHeader,additionalProps:{views:k,view:ie,currentMonth:We.currentMonth,onViewChange:Ve,onMonthChange:yt=>Me({target:yt,reason:"header-navigation"}),minDate:_t,maxDate:xn,disabled:R,disablePast:m,disableFuture:g,reduceAnimations:A,timezone:pe,labelId:Mn},ownerState:i}),Qe=He(yt=>{const Vn=r.startOfMonth(yt),Zn=r.endOfMonth(yt),Xr=Ne(yt)?S0({adapter:r,date:yt,minDate:r.isBefore(N,Vn)?Vn:N,maxDate:r.isAfter(P,Zn)?Zn:P,disablePast:m,disableFuture:g,isDateDisabled:Ne,timezone:pe}):yt;Xr?(Re(Xr,"finish"),Me({target:Xr,reason:"cell-interaction"})):(Oe(),Me({target:Vn,reason:"cell-interaction"}))}),mt=He(yt=>{const Vn=r.startOfYear(yt),Zn=r.endOfYear(yt),Xr=Ne(yt)?S0({adapter:r,date:yt,minDate:r.isBefore(N,Vn)?Vn:N,maxDate:r.isAfter(P,Zn)?Zn:P,disablePast:m,disableFuture:g,isDateDisabled:Ne,timezone:pe}):yt;Xr?(Re(Xr,"finish"),Me({target:Xr,reason:"cell-interaction"})):(Oe(),Me({target:Vn,reason:"cell-interaction"}))}),Nt=He(yt=>ye(yt&&Jm(r,yt,ae??qe),"finish",ie));M.useEffect(()=>{r.isValid(ae)&&Me({target:ae,reason:"controlled-value-change"})},[ae]);const tn=hX(I),An={disablePast:m,disableFuture:g,maxDate:P,minDate:N},Tn={disableHighlightToday:V,readOnly:F,disabled:R,timezone:pe,gridLabelId:Mn,slots:Z,slotProps:fe},qt=M.useRef(ie);M.useEffect(()=>{qt.current!==ie&&(we===qt.current&&ze(ie,!0),qt.current=ie)},[we,ze,ie]);const qr=M.useMemo(()=>[ae],[ae]);return v.jsxs(gX,H({ref:t,className:Ut(tn.root,O),ownerState:i},Fe,{children:[v.jsx(at,H({},Cn,{slots:Z,slotProps:fe})),v.jsx(mX,{reduceAnimations:A,className:tn.viewTransitionContainer,transKey:ie,ownerState:i,children:v.jsxs("div",{children:[ie==="year"&&v.jsx(Qq,H({},An,Tn,{value:ae,onChange:mt,shouldDisableYear:T,hasFocus:rt,onFocusedViewChange:yt=>ze("year",yt),yearsOrder:Pe,yearsPerRow:ue,referenceDate:qe})),ie==="month"&&v.jsx(Uq,H({},An,Tn,{currentMonth:We.currentMonth,hasFocus:rt,className:O,value:ae,onChange:Qe,shouldDisableMonth:C,onFocusedViewChange:yt=>ze("month",yt),monthsPerRow:Se,referenceDate:qe})),ie==="day"&&v.jsx(Oq,H({},We,An,Tn,{onMonthSwitchingAnimationEnd:ft,hasFocus:rt,onFocusedDayChange:yt=>Me({target:yt,reason:"cell-interaction"}),reduceAnimations:A,selectedDays:qr,onSelectedDaysChange:Nt,shouldDisableDate:E,shouldDisableMonth:C,shouldDisableYear:T,onFocusedViewChange:yt=>ze("day",yt),showDaysOutsideCurrentMonth:G,fixedWeekNumber:W,dayOfWeekFormatter:K,displayWeekNumber:be,loading:ge,renderLoading:ve}))]})})]}))});function rP(n){return Mt("MuiPickersToolbar",n)}const vX=Ot("MuiPickersToolbar",["root","title","content"]);function iP(){const{ownerState:n}=sr(),e=Ma();return M.useMemo(()=>H({},n,{toolbarDirection:e?"rtl":"ltr"}),[n,e])}const xX=["children","className","classes","toolbarTitle","hidden","titleId","classes","landscapeDirection"],wX=n=>xt({root:["root"],title:["title"],content:["content"]},rP,n),bX=ke("div",{name:"MuiPickersToolbar",slot:"Root"})(({theme:n})=>({display:"flex",flexDirection:"column",alignItems:"flex-start",justifyContent:"space-between",padding:n.spacing(2,3),variants:[{props:{pickerOrientation:"landscape"},style:{height:"auto",maxWidth:160,padding:16,justifyContent:"flex-start",flexWrap:"wrap"}}]})),_X=ke("div",{name:"MuiPickersToolbar",slot:"Content",shouldForwardProp:n=>Oa(n)&&n!=="landscapeDirection"})({display:"flex",flexWrap:"wrap",width:"100%",flex:1,justifyContent:"space-between",alignItems:"center",flexDirection:"row",variants:[{props:{pickerOrientation:"landscape"},style:{justifyContent:"flex-start",alignItems:"flex-start",flexDirection:"column"}},{props:{pickerOrientation:"landscape",landscapeDirection:"row"},style:{flexDirection:"row"}}]}),AX=M.forwardRef(function(e,t){const r=bt({props:e,name:"MuiPickersToolbar"}),{children:i,className:a,classes:s,toolbarTitle:o,hidden:c,titleId:d,landscapeDirection:f}=r,p=Be(r,xX),g=iP(),m=wX(s);return c?null:v.jsxs(bX,H({ref:t,className:Ut(m.root,a),ownerState:g},p,{children:[v.jsx(te,{color:"text.secondary",variant:"overline",id:d,className:m.title,children:o}),v.jsx(_X,{className:m.content,ownerState:g,landscapeDirection:f,children:i})]}))});function EX(n){return Mt("MuiPickerPopper",n)}Ot("MuiPickerPopper",["root","paper"]);const SX=["PaperComponent","ownerState","children","paperSlotProps","paperClasses","onPaperClick","onPaperTouchStart"],CX=n=>xt({root:["root"],paper:["paper"]},EX,n),TX=ke(hR,{name:"MuiPickerPopper",slot:"Root"})(({theme:n})=>({zIndex:n.zIndex.modal})),IX=ke(qn,{name:"MuiPickerPopper",slot:"Paper"})({outline:0,transformOrigin:"top center",variants:[{props:({popperPlacement:n})=>new Set(["top","top-start","top-end"]).has(n),style:{transformOrigin:"bottom center"}}]});function DX(n,e){return e.documentElement.clientWidth<n.clientX||e.documentElement.clientHeight<n.clientY}function RX(n,e){const t=M.useRef(!1),r=M.useRef(!1),i=M.useRef(null),a=M.useRef(!1);M.useEffect(()=>{if(!n)return;function c(){a.current=!0}return document.addEventListener("mousedown",c,!0),document.addEventListener("touchstart",c,!0),()=>{document.removeEventListener("mousedown",c,!0),document.removeEventListener("touchstart",c,!0),a.current=!1}},[n]);const s=He(c=>{if(!a.current)return;const d=r.current;r.current=!1;const f=n0(i.current);if(!i.current||"clientX"in c&&DX(c,f))return;if(t.current){t.current=!1;return}let p;c.composedPath?p=c.composedPath().indexOf(i.current)>-1:p=!f.documentElement.contains(c.target)||i.current.contains(c.target),!p&&!d&&e(c)}),o=c=>{c.defaultMuiPrevented||(r.current=!0)};return M.useEffect(()=>{if(n){const c=n0(i.current),d=()=>{t.current=!0};return c.addEventListener("touchstart",s),c.addEventListener("touchmove",d),()=>{c.removeEventListener("touchstart",s),c.removeEventListener("touchmove",d)}}},[n,s]),M.useEffect(()=>{if(n){const c=n0(i.current);return c.addEventListener("click",s),()=>{c.removeEventListener("click",s),r.current=!1}}},[n,s]),[i,o,o]}const MX=M.forwardRef((n,e)=>{const{PaperComponent:t,ownerState:r,children:i,paperSlotProps:a,paperClasses:s,onPaperClick:o,onPaperTouchStart:c}=n,d=Be(n,SX),f=Ct({elementType:t,externalSlotProps:a,additionalProps:{tabIndex:-1,elevation:8,ref:e},className:s,ownerState:r});return v.jsx(t,H({},d,f,{onClick:p=>{var g;o(p),(g=f.onClick)==null||g.call(f,p)},onTouchStart:p=>{var g;c(p),(g=f.onTouchStart)==null||g.call(f,p)},ownerState:r,children:i}))});function OX(n){const e=bt({props:n,name:"MuiPickerPopper"}),{children:t,placement:r="bottom-start",slots:i,slotProps:a,classes:s}=e,{open:o,popupRef:c,reduceAnimations:d}=ql(),{ownerState:f,rootRefObject:p}=sr(),{dismissViews:g,getCurrentViewMode:m,onPopperExited:x,triggerElement:b,viewContainerRole:A}=sr();M.useEffect(()=>{function W(K){o&&K.key==="Escape"&&g()}return document.addEventListener("keydown",W),()=>{document.removeEventListener("keydown",W)}},[g,o]);const E=M.useRef(null);M.useEffect(()=>{A==="tooltip"||m()==="field"||(o?E.current=gi(p.current):E.current&&E.current instanceof HTMLElement&&setTimeout(()=>{E.current instanceof HTMLElement&&E.current.focus()}))},[o,A,m,p]);const C=CX(s),T=He(()=>{A==="tooltip"?xW(()=>{var W,K;(W=p.current)!=null&&W.contains(gi(p.current))||(K=c.current)!=null&&K.contains(gi(c.current))||g()}):g()}),[D,k,B]=RX(o,T),O=M.useRef(null),I=oi(O,c),R=oi(I,D),F=W=>{W.key==="Escape"&&(W.stopPropagation(),g())},N=(i==null?void 0:i.desktopTransition)??d?O1:UN,P=(i==null?void 0:i.desktopTrapFocus)??HN,V=(i==null?void 0:i.desktopPaper)??IX,q=(i==null?void 0:i.popper)??TX,X=Ct({elementType:q,externalSlotProps:a==null?void 0:a.popper,additionalProps:{transition:!0,role:A??void 0,open:o,placement:r,anchorEl:b,onKeyDown:F},className:C.root,ownerState:f}),G=M.useMemo(()=>H({},f,{popperPlacement:X.placement}),[f,X.placement]);return v.jsx(q,H({},X,{children:({TransitionProps:W})=>v.jsx(P,H({open:o,disableAutoFocus:!0,disableRestoreFocus:!0,disableEnforceFocus:A==="tooltip",isEnabled:()=>!0},a==null?void 0:a.desktopTrapFocus,{children:v.jsx(N,H({},W,a==null?void 0:a.desktopTransition,{onExited:K=>{var Z,fe,ge;x==null||x(),(fe=(Z=a==null?void 0:a.desktopTransition)==null?void 0:Z.onExited)==null||fe.call(Z,K),(ge=W==null?void 0:W.onExited)==null||ge.call(W)},children:v.jsx(MX,{PaperComponent:V,ownerState:G,ref:R,onPaperClick:k,onPaperTouchStart:B,paperClasses:C.paper,paperSlotProps:a==null?void 0:a.desktopPaper,children:t})}))}))}))}function ID(){return typeof window>"u"?"portrait":window.screen&&window.screen.orientation&&window.screen.orientation.angle?Math.abs(window.screen.orientation.angle)===90?"landscape":"portrait":window.orientation&&Math.abs(Number(window.orientation))===90?"landscape":"portrait"}function PX(n,e){const[t,r]=M.useState(ID);return Xn(()=>{const i=()=>{r(ID())};return window.addEventListener("orientationchange",i),()=>{window.removeEventListener("orientationchange",i)}},[]),vW(n,["hours","minutes","seconds"])?"portrait":e??t}function kX(n){const{props:e,valueManager:t,validator:r}=n,{value:i,defaultValue:a,onChange:s,referenceDate:o,timezone:c,onAccept:d,closeOnSelect:f,open:p,onOpen:g,onClose:m}=e,{current:x}=M.useRef(a),{current:b}=M.useRef(i!==void 0),{current:A}=M.useRef(p!==void 0),E=Yt(),{timezone:C,value:T,handleValueChange:D}=cu({name:"a picker component",timezone:c,value:i,defaultValue:x,referenceDate:o,onChange:s,valueManager:t}),[k,B]=M.useState(()=>({open:!1,lastExternalValue:T,clockShallowValue:void 0,lastCommittedValue:T,hasBeenModifiedSinceMount:!1})),{getValidationErrorForNewValue:O}=LO({props:e,validator:r,timezone:C,value:T,onError:e.onError}),I=He(P=>{const V=typeof P=="function"?P(k.open):P;A||B(q=>H({},q,{open:V})),V&&g&&g(),V||m==null||m()}),R=He((P,V)=>{const{changeImportance:q="accept",skipPublicationIfPristine:X=!1,validationError:G,shortcut:W,shouldClose:K=q==="accept"}=V??{};let Z,fe;!X&&!b&&!k.hasBeenModifiedSinceMount?(Z=!0,fe=q==="accept"):(Z=!t.areValuesEqual(E,P,T),fe=q==="accept"&&!t.areValuesEqual(E,P,k.lastCommittedValue)),B(be=>H({},be,{clockShallowValue:Z?void 0:be.clockShallowValue,lastCommittedValue:fe?P:be.lastCommittedValue,hasBeenModifiedSinceMount:!0}));let ge=null;const ve=()=>(ge||(ge={validationError:G??O(P)},W&&(ge.shortcut=W)),ge);Z&&D(P,ve()),fe&&d&&d(P,ve()),K&&I(!1)});T!==k.lastExternalValue&&B(P=>H({},P,{lastExternalValue:T,clockShallowValue:void 0,hasBeenModifiedSinceMount:!0}));const F=He((P,V="partial")=>{if(V==="shallow"){B(q=>H({},q,{clockShallowValue:P,hasBeenModifiedSinceMount:!0}));return}R(P,{changeImportance:V==="finish"&&f?"accept":"set"})});M.useEffect(()=>{if(A){if(p===void 0)throw new Error("You must not mix controlling and uncontrolled mode for `open` prop");B(P=>H({},P,{open:p}))}},[A,p]);const N=M.useMemo(()=>t.cleanValue(E,k.clockShallowValue===void 0?T:k.clockShallowValue),[E,t,k.clockShallowValue,T]);return{timezone:C,state:k,setValue:R,setValueFromView:F,setOpen:I,value:T,viewValue:N}}const NX=["className","sx"],aP=({ref:n,props:e,valueManager:t,valueType:r,variant:i,validator:a,onPopperExited:s,autoFocusView:o,rendererInterceptor:c,localeText:d,viewContainerRole:f,getStepNavigation:p})=>{const{views:g,view:m,openTo:x,onViewChange:b,viewRenderers:A,reduceAnimations:E,orientation:C,disableOpenPicker:T,closeOnSelect:D,disabled:k,readOnly:B,formatDensity:O,enableAccessibleFieldDOMStructure:I,selectedSections:R,onSelectedSectionsChange:F,format:N,label:P,autoFocus:V,name:q}=e,{className:X,sx:G}=e,W=Be(e,NX),K=N0(),Z=Yt(),fe=nP(E),ge=PX(g,C),{current:ve}=M.useRef(x??null),[be,Pe]=M.useState(null),ue=M.useRef(null),Se=M.useRef(null),Ae=M.useRef(null),Fe=oi(n,Ae),{timezone:ae,state:ye,setOpen:pe,setValue:ie,setValueFromView:Ve,value:we,viewValue:ze}=kX({props:e,valueManager:t,validator:a}),{view:Oe,setView:Re,defaultView:qe,focusedView:We,setFocusedView:Me,setValueAndGoToNextView:Ne,goToNextStep:ft,hasNextStep:_t,hasSeveralSteps:xn}=uy({view:m,views:g,openTo:x,onChange:Ve,onViewChange:b,autoFocus:o,getStepNavigation:p}),Mn=He(()=>ie(t.emptyValue)),rt=He(()=>ie(t.getTodayValue(Z,ae,r))),at=He(()=>ie(we)),Cn=He(()=>ie(ye.lastCommittedValue,{skipPublicationIfPristine:!0})),Qe=He(()=>{ie(we,{skipPublicationIfPristine:!0})}),{hasUIView:mt,viewModeLookup:Nt,timeViewsCount:tn}=M.useMemo(()=>g.reduce((wn,lr)=>{const Zl=A[lr]==null?"field":"UI";return wn.viewModeLookup[lr]=Zl,Zl==="UI"&&(wn.hasUIView=!0,C0(lr)&&(wn.timeViewsCount+=1)),wn},{hasUIView:!1,viewModeLookup:{},timeViewsCount:0}),[A,g]),An=Nt[Oe],Tn=He(()=>An),[qt,qr]=M.useState(An==="UI"?Oe:null);qt!==Oe&&Nt[Oe]==="UI"&&qr(Oe),Xn(()=>{An==="field"&&ye.open&&(pe(!1),setTimeout(()=>{var wn,lr;(wn=Se==null?void 0:Se.current)==null||wn.setSelectedSections(Oe),(lr=Se==null?void 0:Se.current)==null||lr.focusField(Oe)}))},[Oe]),Xn(()=>{if(!ye.open)return;let wn=Oe;An==="field"&&qt!=null&&(wn=qt),wn!==qe&&Nt[wn]==="UI"&&Nt[qe]==="UI"&&(wn=qe),wn!==Oe&&Re(wn),Me(wn,!0)},[ye.open]);const yt=M.useMemo(()=>({isPickerValueEmpty:t.areValuesEqual(Z,we,t.emptyValue),isPickerOpen:ye.open,isPickerDisabled:e.disabled??!1,isPickerReadOnly:e.readOnly??!1,pickerOrientation:ge,pickerVariant:i}),[Z,t,we,ye.open,ge,i,e.disabled,e.readOnly]),Vn=M.useMemo(()=>T||!mt?"hidden":k||B?"disabled":"enabled",[T,mt,k,B]),Zn=He(ft),Xr=M.useMemo(()=>D&&!xn?[]:["cancel","nextOrAccept"],[D,xn]),bi=M.useMemo(()=>({setValue:ie,setOpen:pe,clearValue:Mn,setValueToToday:rt,acceptValueChanges:at,cancelValueChanges:Cn,setView:Re,goToNextStep:Zn}),[ie,pe,Mn,rt,at,Cn,Re,Zn]),or=M.useMemo(()=>H({},bi,{value:we,timezone:ae,open:ye.open,views:g,view:qt,initialView:ve,disabled:k??!1,readOnly:B??!1,autoFocus:V??!1,variant:i,orientation:ge,popupRef:ue,reduceAnimations:fe,triggerRef:Pe,triggerStatus:Vn,hasNextStep:_t,fieldFormat:N??"",name:q,label:P,rootSx:G,rootRef:Fe,rootClassName:X}),[bi,we,Fe,i,ge,fe,k,B,N,X,q,P,G,Vn,_t,ae,ye.open,qt,g,ve,V]),Ql=M.useMemo(()=>({dismissViews:Qe,ownerState:yt,hasUIView:mt,getCurrentViewMode:Tn,rootRefObject:Ae,labelId:K,triggerElement:be,viewContainerRole:f,defaultActionBarActions:Xr,onPopperExited:s}),[Qe,yt,mt,Tn,K,be,f,Xr,s]),ca=M.useMemo(()=>({formatDensity:O,enableAccessibleFieldDOMStructure:I,selectedSections:R,onSelectedSectionsChange:F,fieldRef:Se}),[O,I,R,F,Se]);return{providerProps:{localeText:d,contextValue:or,privateContextValue:Ql,actionsContextValue:bi,fieldPrivateContextValue:ca,isValidContextValue:wn=>{const lr=a({adapter:Z,value:wn,timezone:ae,props:e});return!t.hasError(lr)}},renderCurrentView:()=>{if(qt==null)return null;const wn=A[qt];if(wn==null)return null;const lr=H({},W,{views:g,timezone:ae,value:ze,onChange:Ne,view:qt,onViewChange:Re,showViewSwitcher:tn>1,timeViewsCount:tn},f==="tooltip"?{focusedView:null,onFocusedViewChange:()=>{}}:{focusedView:We,onFocusedViewChange:Me});return c?v.jsx(c,{viewRenderers:A,popperView:qt,rendererProps:lr}):wn(lr)},ownerState:yt}};function sP(n){return Mt("MuiPickersLayout",n)}const Ha=Ot("MuiPickersLayout",["root","landscape","contentWrapper","toolbar","actionBar","tabs","shortcuts"]),LX=["actions"],BX=ke(Gi,{name:"MuiPickersLayout",slot:"ActionBar"})({});function FX(n){const{actions:e}=n,t=Be(n,LX),r=Ja(),{clearValue:i,setValueToToday:a,acceptValueChanges:s,cancelValueChanges:o,goToNextStep:c,hasNextStep:d}=ql();if(e==null||e.length===0)return null;const f=e==null?void 0:e.map(p=>{switch(p){case"clear":return v.jsx($e,{onClick:i,children:r.clearButtonLabel},p);case"cancel":return v.jsx($e,{onClick:o,children:r.cancelButtonLabel},p);case"accept":return v.jsx($e,{onClick:s,children:r.okButtonLabel},p);case"today":return v.jsx($e,{onClick:a,children:r.todayButtonLabel},p);case"next":return v.jsx($e,{onClick:c,children:r.nextStepButtonLabel},p);case"nextOrAccept":return d?v.jsx($e,{onClick:c,children:r.nextStepButtonLabel},p):v.jsx($e,{onClick:s,children:r.okButtonLabel},p);default:return null}});return v.jsx(BX,H({},t,{children:f}))}const VX=M.memo(FX),jX=["items","changeImportance"],UX=["getValue"],HX=ke(Qw,{name:"MuiPickersLayout",slot:"Shortcuts"})({});function zX(n){const{items:e,changeImportance:t="accept"}=n,r=Be(n,jX),{setValue:i}=$G(),a=zG();if(e==null||e.length===0)return null;const s=e.map(o=>{let{getValue:c}=o,d=Be(o,UX);const f=c({isValid:a});return H({},d,{label:d.label,onClick:()=>{i(f,{changeImportance:t,shortcut:d})},disabled:!a(f)})});return v.jsx(HX,H({dense:!0,sx:[{maxHeight:Zd,maxWidth:200,overflow:"auto"},...Array.isArray(r.sx)?r.sx:[r.sx]]},r,{children:s.map(o=>v.jsx(Zw,{children:v.jsx(dn,H({},o))},o.id??o.label))}))}const $X=["ownerState"];function GX(n){return n.view!==null}const WX=(n,e)=>{const{pickerOrientation:t}=e;return xt({root:["root",t==="landscape"&&"landscape"],contentWrapper:["contentWrapper"],toolbar:["toolbar"],actionBar:["actionBar"],tabs:["tabs"],landscape:["landscape"],shortcuts:["shortcuts"]},sP,n)},oP=n=>{const{ownerState:e,defaultActionBarActions:t}=sr(),{view:r}=ql(),i=Ma(),{children:a,slots:s,slotProps:o,classes:c}=n,d=M.useMemo(()=>H({},e,{layoutDirection:i?"rtl":"ltr",hasShortcuts:!1}),[e,i]),f=WX(c,d),p=(s==null?void 0:s.actionBar)??VX,g=Ct({elementType:p,externalSlotProps:o==null?void 0:o.actionBar,additionalProps:{actions:t},className:f.actionBar,ownerState:d}),m=Be(g,$X),x=v.jsx(p,H({},m)),b=s==null?void 0:s.toolbar,A=Ct({elementType:b,externalSlotProps:o==null?void 0:o.toolbar,className:f.toolbar,ownerState:d}),E=GX(A)&&b?v.jsx(b,H({},A)):null,C=a,T=s==null?void 0:s.tabs,D=r&&T?v.jsx(T,H({className:f.tabs},o==null?void 0:o.tabs)):null,k=(s==null?void 0:s.shortcuts)??zX,B=Ct({elementType:k,externalSlotProps:o==null?void 0:o.shortcuts,className:f.shortcuts,ownerState:d}),O=Array.isArray(B==null?void 0:B.items)&&B.items.length>0,I=r&&k?v.jsx(k,H({},B)):null;return{toolbar:E,content:C,tabs:D,actionBar:x,shortcuts:I,ownerState:H({},d,{hasShortcuts:O})}},YX=(n,e)=>{const{pickerOrientation:t}=e;return xt({root:["root",t==="landscape"&&"landscape"],contentWrapper:["contentWrapper"]},sP,n)},lP=ke("div",{name:"MuiPickersLayout",slot:"Root"})({display:"grid",gridAutoColumns:"max-content auto max-content",gridAutoRows:"max-content auto max-content",[`& .${Ha.actionBar}`]:{gridColumn:"1 / 4",gridRow:3},variants:[{props:{pickerOrientation:"landscape",hasShortcuts:!1},style:{[`& .${Ha.toolbar}`]:{gridColumn:1,gridRow:"1 / 3"}}},{props:{pickerOrientation:"landscape",hasShortcuts:!0},style:{[`& .${Ha.toolbar}`]:{gridColumn:"2 / 4",gridRow:1,maxWidth:"max-content"},[`& .${Ha.shortcuts}`]:{gridColumn:1,gridRow:2}}},{props:{pickerOrientation:"portrait"},style:{[`& .${Ha.toolbar}`]:{gridColumn:"2 / 4",gridRow:1},[`& .${Ha.shortcuts}`]:{gridColumn:1,gridRow:"2 / 3"}}},{props:{hasShortcuts:!0,layoutDirection:"rtl"},style:{[`& .${Ha.shortcuts}`]:{gridColumn:4}}}]}),cP=ke("div",{name:"MuiPickersLayout",slot:"ContentWrapper"})({gridColumn:"2 / 4",gridRow:2,display:"flex",flexDirection:"column"}),uP=M.forwardRef(function(e,t){const r=bt({props:e,name:"MuiPickersLayout"}),{toolbar:i,content:a,tabs:s,actionBar:o,shortcuts:c,ownerState:d}=oP(r),{orientation:f,variant:p}=ql(),{sx:g,className:m,classes:x}=r,b=YX(x,d);return v.jsxs(lP,{ref:t,sx:g,className:Ut(b.root,m),ownerState:d,children:[f==="landscape"?c:i,f==="landscape"?i:c,v.jsx(cP,{className:b.contentWrapper,ownerState:d,children:p==="desktop"?v.jsxs(M.Fragment,{children:[a,s]}):v.jsxs(M.Fragment,{children:[s,a]})}),o]})});function dP(n){const{steps:e}=n;return cW({steps:e,isViewMatchingStep:(t,r)=>r.views==null||r.views.includes(t),onStepChange:({step:t,defaultView:r,setView:i,view:a,views:s})=>{const o=t.views==null?r:t.views.find(c=>s.includes(c));o!==a&&i(o)}})}const qX=["props","steps"],XX=["ownerState"],KX=n=>{var B;let{props:e,steps:t}=n,r=Be(n,qX);const{slots:i,slotProps:a,label:s,inputRef:o,localeText:c}=e,d=dP({steps:t}),{providerProps:f,renderCurrentView:p,ownerState:g}=aP(H({},r,{props:e,localeText:c,autoFocusView:!0,viewContainerRole:"dialog",variant:"desktop",getStepNavigation:d})),m=f.privateContextValue.labelId,x=((B=a==null?void 0:a.toolbar)==null?void 0:B.hidden)??!1,b=i.field,A=Ct({elementType:b,externalSlotProps:a==null?void 0:a.field,additionalProps:H({},x&&{id:m}),ownerState:g}),E=Be(A,XX),C=i.layout??uP;let T=m;x&&(s?T=`${m}-label`:T=void 0);const D=H({},a,{toolbar:H({},a==null?void 0:a.toolbar,{titleId:m}),popper:H({"aria-labelledby":T},a==null?void 0:a.popper)});return{renderPicker:()=>v.jsxs(AO,H({},f,{children:[v.jsx(b,H({},E,{slots:i,slotProps:D,inputRef:o})),v.jsx(OX,{slots:i,slotProps:D,children:v.jsx(C,H({},D==null?void 0:D.layout,{slots:i,slotProps:D,children:p()}))})]}))}},Bd=({view:n,onViewChange:e,views:t,focusedView:r,onFocusedViewChange:i,value:a,defaultValue:s,referenceDate:o,onChange:c,className:d,classes:f,disableFuture:p,disablePast:g,minDate:m,maxDate:x,shouldDisableDate:b,shouldDisableMonth:A,shouldDisableYear:E,reduceAnimations:C,onMonthChange:T,monthsPerRow:D,onYearChange:k,yearsOrder:B,yearsPerRow:O,slots:I,slotProps:R,loading:F,renderLoading:N,disableHighlightToday:P,readOnly:V,disabled:q,showDaysOutsideCurrentMonth:X,dayOfWeekFormatter:G,sx:W,autoFocus:K,fixedWeekNumber:Z,displayWeekNumber:fe,timezone:ge})=>v.jsx(yX,{view:n,onViewChange:e,views:t.filter(Kd),focusedView:r&&Kd(r)?r:null,onFocusedViewChange:i,value:a,defaultValue:s,referenceDate:o,onChange:c,className:d,classes:f,disableFuture:p,disablePast:g,minDate:m,maxDate:x,shouldDisableDate:b,shouldDisableMonth:A,shouldDisableYear:E,reduceAnimations:C,onMonthChange:T,monthsPerRow:D,onYearChange:k,yearsOrder:B,yearsPerRow:O,slots:I,slotProps:R,loading:F,renderLoading:N,disableHighlightToday:P,readOnly:V,disabled:q,showDaysOutsideCurrentMonth:X,dayOfWeekFormatter:G,sx:W,autoFocus:K,fixedWeekNumber:Z,displayWeekNumber:fe,timezone:ge}),QX=ke(zi)({[`& .${LC.container}`]:{outline:0},[`& .${LC.paper}`]:{outline:0,minWidth:Qd}}),ZX=ke($i)({"&:first-of-type":{padding:0}});function JX(n){const{children:e,slots:t,slotProps:r}=n,{open:i}=ql(),{dismissViews:a,onPopperExited:s}=sr(),o=(t==null?void 0:t.dialog)??QX,c=(t==null?void 0:t.mobileTransition)??O1;return v.jsx(o,H({open:i,onClose:()=>{a(),s==null||s()}},r==null?void 0:r.dialog,{TransitionComponent:c,TransitionProps:r==null?void 0:r.mobileTransition,PaperComponent:t==null?void 0:t.mobilePaper,PaperProps:r==null?void 0:r.mobilePaper,children:v.jsx(ZX,{children:e})}))}const eK=["props","steps"],tK=["ownerState"],nK=n=>{var B;let{props:e,steps:t}=n,r=Be(n,eK);const{slots:i,slotProps:a,label:s,inputRef:o,localeText:c}=e,d=dP({steps:t}),{providerProps:f,renderCurrentView:p,ownerState:g}=aP(H({},r,{props:e,localeText:c,autoFocusView:!0,viewContainerRole:"dialog",variant:"mobile",getStepNavigation:d})),m=f.privateContextValue.labelId,x=((B=a==null?void 0:a.toolbar)==null?void 0:B.hidden)??!1,b=i.field,A=Ct({elementType:b,externalSlotProps:a==null?void 0:a.field,additionalProps:H({},x&&{id:m}),ownerState:g}),E=Be(A,tK),C=i.layout??uP;let T=m;x&&(s?T=`${m}-label`:T=void 0);const D=H({},a,{toolbar:H({},a==null?void 0:a.toolbar,{titleId:m}),mobilePaper:H({"aria-labelledby":T},a==null?void 0:a.mobilePaper)});return{renderPicker:()=>v.jsxs(AO,H({},f,{children:[v.jsx(b,H({},E,{slots:i,slotProps:D,inputRef:o})),v.jsx(JX,{slots:i,slotProps:D,children:v.jsx(C,H({},D==null?void 0:D.layout,{slots:i,slotProps:D,children:p()}))})]}))}};function rK(n){return Mt("MuiPickersToolbarText",n)}const iK=Ot("MuiPickersToolbarText",["root"]),aK=["className","classes","selected","value"],sK=n=>xt({root:["root"]},rK,n),oK=ke(te,{name:"MuiPickersToolbarText",slot:"Root"})(({theme:n})=>({transition:n.transitions.create("color"),color:(n.vars||n).palette.text.secondary,"&[data-selected]":{color:(n.vars||n).palette.text.primary}})),fP=M.forwardRef(function(e,t){const r=bt({props:e,name:"MuiPickersToolbarText"}),{className:i,classes:a,selected:s,value:o}=r,c=Be(r,aK),d=sK(a);return v.jsx(oK,H({ref:t,className:Ut(d.root,i),component:"span",ownerState:r},s&&{"data-selected":!0},c,{children:o}))}),lK=["align","className","classes","selected","typographyClassName","value","variant","width"],cK=n=>xt({root:["root"]},rP,n),uK=ke($e,{name:"MuiPickersToolbarButton",slot:"Root"})({padding:0,minWidth:16,textTransform:"none"}),fl=M.forwardRef(function(e,t){const r=bt({props:e,name:"MuiPickersToolbarButton"}),{align:i,className:a,classes:s,selected:o,typographyClassName:c,value:d,variant:f,width:p}=r,g=Be(r,lK),m=cK(s);return v.jsx(uK,H({variant:"text",ref:t,className:Ut(m.root,a),ownerState:r},p?{sx:{width:p}}:{},g,{children:v.jsx(fP,{align:i,className:c,variant:f,value:d,selected:o})}))}),hP=({view:n,onViewChange:e,focusedView:t,onFocusedViewChange:r,views:i,value:a,defaultValue:s,referenceDate:o,onChange:c,className:d,classes:f,disableFuture:p,disablePast:g,minTime:m,maxTime:x,shouldDisableTime:b,minutesStep:A,ampm:E,slots:C,slotProps:T,readOnly:D,disabled:k,sx:B,autoFocus:O,disableIgnoringDatePartForTimeValidation:I,timeSteps:R,skipDisabled:F,timezone:N})=>v.jsx(TW,{view:n,onViewChange:e,focusedView:t&&C0(t)?t:null,onFocusedViewChange:r,views:i.filter(C0),value:a,defaultValue:s,referenceDate:o,onChange:c,className:d,classes:f,disableFuture:p,disablePast:g,minTime:m,maxTime:x,shouldDisableTime:b,minutesStep:A,ampm:E,slots:C,slotProps:T,readOnly:D,disabled:k,sx:B,autoFocus:O,disableIgnoringDatePartForTimeValidation:I,timeStep:R==null?void 0:R.minutes,skipDisabled:F,timezone:N}),n1=({view:n,onViewChange:e,focusedView:t,onFocusedViewChange:r,views:i,value:a,defaultValue:s,referenceDate:o,onChange:c,className:d,classes:f,disableFuture:p,disablePast:g,minTime:m,maxTime:x,shouldDisableTime:b,minutesStep:A,ampm:E,slots:C,slotProps:T,readOnly:D,disabled:k,sx:B,autoFocus:O,disableIgnoringDatePartForTimeValidation:I,timeSteps:R,skipDisabled:F,timezone:N})=>v.jsx(VW,{view:n,onViewChange:e,focusedView:t&&Ed(t)?t:null,onFocusedViewChange:r,views:i.filter(C0),value:a,defaultValue:s,referenceDate:o,onChange:c,className:d,classes:f,disableFuture:p,disablePast:g,minTime:m,maxTime:x,shouldDisableTime:b,minutesStep:A,ampm:E,slots:C,slotProps:T,readOnly:D,disabled:k,sx:B,autoFocus:O,disableIgnoringDatePartForTimeValidation:I,timeSteps:R,skipDisabled:F,timezone:N}),dK=["views","format"],pP=(n,e,t)=>{let{views:r,format:i}=e,a=Be(e,dK);if(i)return i;const s=[],o=[];if(r.forEach(f=>{C0(f)?o.push(f):Kd(f)&&s.push(f)}),o.length===0)return cD(n,H({views:s},a));if(s.length===0)return vD(n,H({views:o},a));const c=vD(n,H({views:o},a));return`${cD(n,H({views:s},a))} ${c}`},fK=(n,e,t)=>t?e.filter(r=>!Ed(r)||r==="hours"):n?[...e,"meridiem"]:e,hK=(n,e)=>1440/((n.hours??1)*(n.minutes??5))<=e;function pK({thresholdToRenderTimeInASingleColumn:n,ampm:e,timeSteps:t,views:r}){const i=n??24,a=H({hours:1,minutes:5,seconds:5},t),s=hK(a,i);return{thresholdToRenderTimeInASingleColumn:i,timeSteps:a,shouldRenderTimeInASingleColumn:s,views:fK(e,r,s)}}function gK(n){return Mt("MuiDateTimePickerTabs",n)}Ot("MuiDateTimePickerTabs",["root"]);const mK=n=>Kd(n)?"date":"time",yK=n=>n==="date"?"day":"hours",vK=n=>xt({root:["root"]},gK,n),xK=ke(D1,{name:"MuiDateTimePickerTabs",slot:"Root"})(({theme:n})=>({boxShadow:`0 -1px 0 0 inset ${(n.vars||n).palette.divider}`,"&:last-child":{boxShadow:`0 1px 0 0 inset ${(n.vars||n).palette.divider}`,[`& .${zN.indicator}`]:{bottom:"auto",top:0}}})),wK=function(e){const t=bt({props:e,name:"MuiDateTimePickerTabs"}),{dateIcon:r=v.jsx(XG,{}),timeIcon:i=v.jsx(KG,{}),hidden:a=typeof window>"u"||window.innerHeight<667,className:s,classes:o,sx:c}=t,d=Ja(),{ownerState:f}=sr(),{view:p,setView:g}=ql(),m=vK(o),x=(b,A)=>{g(yK(A))};return a?null:v.jsxs(xK,{ownerState:f,variant:"fullWidth",value:mK(p),onChange:x,className:Ut(s,m.root),sx:c,children:[v.jsx(Ea,{value:"date","aria-label":d.dateTableLabel,icon:v.jsx(M.Fragment,{children:r})}),v.jsx(Ea,{value:"time","aria-label":d.timeTableLabel,icon:v.jsx(M.Fragment,{children:i})})]})};function bK(n){return Mt("MuiDateTimePickerToolbar",n)}const a2=Ot("MuiDateTimePickerToolbar",["root","dateContainer","timeContainer","timeDigitsContainer","separator","timeLabelReverse","ampmSelection","ampmLandscape","ampmLabel"]),_K=["ampm","ampmInClock","toolbarFormat","toolbarPlaceholder","toolbarTitle","className","classes"],AK=(n,e)=>{const{pickerOrientation:t,toolbarDirection:r}=e;return xt({root:["root"],dateContainer:["dateContainer"],timeContainer:["timeContainer",r==="rtl"&&"timeLabelReverse"],timeDigitsContainer:["timeDigitsContainer",r==="rtl"&&"timeLabelReverse"],separator:["separator"],ampmSelection:["ampmSelection",t==="landscape"&&"ampmLandscape"],ampmLabel:["ampmLabel"]},bK,n)},EK=ke(AX,{name:"MuiDateTimePickerToolbar",slot:"Root",shouldForwardProp:n=>Oa(n)&&n!=="toolbarVariant"})(({theme:n})=>({paddingLeft:16,paddingRight:16,justifyContent:"space-around",position:"relative",variants:[{props:{toolbarVariant:"desktop"},style:{borderBottom:`1px solid ${(n.vars||n).palette.divider}`,[`& .${vX.content} .${iK.root}[data-selected]`]:{color:(n.vars||n).palette.primary.main,fontWeight:n.typography.fontWeightBold}}},{props:{toolbarVariant:"desktop",pickerOrientation:"landscape"},style:{borderRight:`1px solid ${(n.vars||n).palette.divider}`}},{props:{toolbarVariant:"desktop",pickerOrientation:"portrait"},style:{paddingLeft:24,paddingRight:0}}]})),SK=ke("div",{name:"MuiDateTimePickerToolbar",slot:"DateContainer"})({display:"flex",flexDirection:"column",alignItems:"flex-start"}),CK=ke("div",{name:"MuiDateTimePickerToolbar",slot:"TimeContainer",shouldForwardProp:n=>Oa(n)&&n!=="toolbarVariant"})({display:"flex",flexDirection:"row",variants:[{props:{toolbarDirection:"rtl"},style:{flexDirection:"row-reverse"}},{props:{toolbarVariant:"desktop",pickerOrientation:"portrait"},style:{gap:9,marginRight:4,alignSelf:"flex-end"}},{props:({pickerOrientation:n,toolbarVariant:e})=>n==="landscape"&&e!=="desktop",style:{flexDirection:"column"}},{props:({pickerOrientation:n,toolbarVariant:e,toolbarDirection:t})=>n==="landscape"&&e!=="desktop"&&t==="rtl",style:{flexDirection:"column-reverse"}}]}),TK=ke("div",{name:"MuiDateTimePickerToolbar",slot:"TimeDigitsContainer",shouldForwardProp:n=>Oa(n)&&n!=="toolbarVariant"})({display:"flex",variants:[{props:{toolbarDirection:"rtl"},style:{flexDirection:"row-reverse"}},{props:{toolbarVariant:"desktop"},style:{gap:1.5}}]}),DD=ke(fP,{name:"MuiDateTimePickerToolbar",slot:"Separator",shouldForwardProp:n=>Oa(n)&&n!=="toolbarVariant"})({margin:"0 4px 0 2px",cursor:"default",variants:[{props:{toolbarVariant:"desktop"},style:{margin:0}}]}),IK=ke("div",{name:"MuiDateTimePickerToolbar",slot:"AmPmSelection",overridesResolver:(n,e)=>[{[`.${a2.ampmLabel}`]:e.ampmLabel},{[`&.${a2.ampmLandscape}`]:e.ampmLandscape},e.ampmSelection]})({display:"flex",flexDirection:"column",marginRight:"auto",marginLeft:12,[`& .${a2.ampmLabel}`]:{fontSize:17},variants:[{props:{pickerOrientation:"landscape"},style:{margin:"4px 0 auto",flexDirection:"row",justifyContent:"space-around",width:"100%"}}]}),DK=M.createContext(null);function RK(n){const e=bt({props:n,name:"MuiDateTimePickerToolbar"}),{ampm:t,ampmInClock:r,toolbarFormat:i,toolbarPlaceholder:a="",toolbarTitle:s,className:o,classes:c}=e,d=Be(e,_K),{value:f,setValue:p,disabled:g,readOnly:m,variant:x,orientation:b,view:A,setView:E,views:C}=ql(),T=Ja(),D=iP(),k=AK(c,D),B=Yt(),O=M.useContext(DK),I=O?O.value:f,R=O?O.setValue:p,F=O?O.view:A,N=O?O.setView:E,{meridiemMode:P,handleMeridiemChange:V}=TO(I,t,fe=>R(fe,{changeImportance:"set"})),q=O!=null&&O.forceDesktopVariant?"desktop":x,X=q==="desktop",G=!!(t&&!r),W=s??T.dateTimePickerToolbarTitle,K=M.useMemo(()=>B.isValid(I)?i?B.formatByString(I,i):B.format(I,"shortDate"):a,[I,i,a,B]),Z=(fe,ge)=>B.isValid(I)?B.format(I,fe):ge;return v.jsxs(EK,H({className:Ut(k.root,o),toolbarTitle:W,toolbarVariant:q},d,{ownerState:D,children:[v.jsxs(SK,{className:k.dateContainer,ownerState:D,children:[C.includes("year")&&v.jsx(fl,{tabIndex:-1,variant:"subtitle1",onClick:()=>N("year"),selected:F==="year",value:Z("year","")}),C.includes("day")&&v.jsx(fl,{tabIndex:-1,variant:X?"h5":"h4",onClick:()=>N("day"),selected:F==="day",value:K})]}),v.jsxs(CK,{className:k.timeContainer,ownerState:D,toolbarVariant:q,children:[v.jsxs(TK,{className:k.timeDigitsContainer,ownerState:D,toolbarVariant:q,children:[C.includes("hours")&&v.jsxs(M.Fragment,{children:[v.jsx(fl,{variant:X?"h5":"h3",width:X&&b==="portrait"?Jh:void 0,onClick:()=>N("hours"),selected:F==="hours",value:Z(t?"hours12h":"hours24h","--")}),v.jsx(DD,{variant:X?"h5":"h3",value:":",className:k.separator,ownerState:D,toolbarVariant:q}),v.jsx(fl,{variant:X?"h5":"h3",width:X&&b==="portrait"?Jh:void 0,onClick:()=>N("minutes"),selected:F==="minutes"||!C.includes("minutes")&&F==="hours",value:Z("minutes","--"),disabled:!C.includes("minutes")})]}),C.includes("seconds")&&v.jsxs(M.Fragment,{children:[v.jsx(DD,{variant:X?"h5":"h3",value:":",className:k.separator,ownerState:D,toolbarVariant:q}),v.jsx(fl,{variant:X?"h5":"h3",width:X&&b==="portrait"?Jh:void 0,onClick:()=>N("seconds"),selected:F==="seconds",value:Z("seconds","--")})]})]}),G&&!X&&v.jsxs(IK,{className:k.ampmSelection,ownerState:D,children:[v.jsx(fl,{variant:"subtitle2",selected:P==="am",typographyClassName:k.ampmLabel,value:u0(B,"am"),onClick:m?void 0:()=>V("am"),disabled:g}),v.jsx(fl,{variant:"subtitle2",selected:P==="pm",typographyClassName:k.ampmLabel,value:u0(B,"pm"),onClick:m?void 0:()=>V("pm"),disabled:g})]}),t&&X&&v.jsx(fl,{variant:"h5",onClick:()=>N("meridiem"),selected:F==="meridiem",value:I&&P?u0(B,P):"--",width:Jh})]})]}))}function gP(n,e){var m;const t=Yt(),r=bt({props:n,name:e}),i=jO(r),a=r.ampm??t.is12HourCycleInCurrentLocale(),s=M.useMemo(()=>{var x;return((x=r.localeText)==null?void 0:x.toolbarTitle)==null?r.localeText:H({},r.localeText,{dateTimePickerToolbarTitle:r.localeText.toolbarTitle})},[r.localeText]),{openTo:o,views:c}=AG({views:r.views,openTo:r.openTo,defaultViews:["year","day","hours","minutes"],defaultOpenTo:"day"}),{shouldRenderTimeInASingleColumn:d,thresholdToRenderTimeInASingleColumn:f,views:p,timeSteps:g}=pK({thresholdToRenderTimeInASingleColumn:r.thresholdToRenderTimeInASingleColumn,ampm:a,timeSteps:r.timeSteps,views:c});return H({},r,i,{timeSteps:g,openTo:o,shouldRenderTimeInASingleColumn:d,thresholdToRenderTimeInASingleColumn:f,views:p,ampm:a,localeText:s,orientation:r.orientation??"portrait",slots:H({toolbar:RK,tabs:wK},r.slots),slotProps:H({},r.slotProps,{toolbar:H({ampm:a},(m=r.slotProps)==null?void 0:m.toolbar)})})}const MK=M.forwardRef(function(e,t){var x;const{toolbar:r,tabs:i,content:a,actionBar:s,shortcuts:o,ownerState:c}=oP(e),{orientation:d}=ql(),{sx:f,className:p,classes:g}=e,m=s&&(((x=s.props.actions)==null?void 0:x.length)??0)>0;return v.jsxs(lP,{ref:t,className:Ut(Ha.root,g==null?void 0:g.root,p),sx:[{[`& .${Ha.tabs}`]:{gridRow:4,gridColumn:"1 / 4"},[`& .${Ha.actionBar}`]:{gridRow:5}},...Array.isArray(f)?f:[f]],ownerState:c,children:[d==="landscape"?o:r,d==="landscape"?r:o,v.jsxs(cP,{className:Ut(Ha.contentWrapper,g==null?void 0:g.contentWrapper),ownerState:c,sx:{display:"grid"},children:[a,i,m&&v.jsx(Sl,{sx:{gridRow:3,gridColumn:"1 / 4"}})]}),s]})}),OK=["openTo","focusedView","timeViewsCount"],PK=function(e){var m,x;const{viewRenderers:t,popperView:r,rendererProps:i}=e,{openTo:a,focusedView:s,timeViewsCount:o}=i,c=Be(i,OK),d=H({},c,{autoFocus:!1,focusedView:null,sx:[{[`&.${Rw.root}`]:{borderBottom:0},[`&.${Rw.root}, .${Mw.root}, &.${Dw.root}`]:{maxHeight:Zd}}]}),f=Ed(r),p=f?"day":r,g=f?r:"hours";return v.jsxs(M.Fragment,{children:[(m=t[p])==null?void 0:m.call(t,H({},i,{view:f?"day":r,focusedView:s&&Kd(s)?s:null,views:i.views.filter(Kd),sx:[{gridColumn:1},...d.sx]})),o>0&&v.jsxs(M.Fragment,{children:[v.jsx(Sl,{orientation:"vertical",sx:{gridColumn:2}}),(x=t[g])==null?void 0:x.call(t,H({},d,{view:f?r:"hours",focusedView:s&&Ed(s)?s:null,openTo:Ed(a)?a:"hours",views:i.views.filter(Ed),sx:[{gridColumn:3},...d.sx]}))]})]})},mP=M.forwardRef(function(e,t){var g,m,x;const r=Yt(),i=gP(e,"MuiDesktopDateTimePicker"),a=i.shouldRenderTimeInASingleColumn?hP:n1,s=H({day:Bd,month:Bd,year:Bd,hours:a,minutes:a,seconds:a,meridiem:a},i.viewRenderers),o=i.ampmInClock??!0,d=((g=s.hours)==null?void 0:g.name)===n1.name?i.views:i.views.filter(b=>b!=="meridiem"),f=H({},i,{viewRenderers:s,format:pP(r,i),views:d,yearsPerRow:i.yearsPerRow??4,ampmInClock:o,slots:H({field:KO,layout:MK},i.slots),slotProps:H({},i.slotProps,{field:b=>{var A;return H({},xo((A=i.slotProps)==null?void 0:A.field,b),dO(i))},toolbar:H({hidden:!0,ampmInClock:o},(m=i.slotProps)==null?void 0:m.toolbar),tabs:H({hidden:!0},(x=i.slotProps)==null?void 0:x.tabs)})}),{renderPicker:p}=KX({ref:t,props:f,valueManager:Oi,valueType:"date-time",validator:fy,rendererInterceptor:PK,steps:null});return p()});mP.propTypes={ampm:ee.bool,ampmInClock:ee.bool,autoFocus:ee.bool,className:ee.string,closeOnSelect:ee.bool,dayOfWeekFormatter:ee.func,defaultValue:ee.object,disabled:ee.bool,disableFuture:ee.bool,disableHighlightToday:ee.bool,disableIgnoringDatePartForTimeValidation:ee.bool,disableOpenPicker:ee.bool,disablePast:ee.bool,displayWeekNumber:ee.bool,enableAccessibleFieldDOMStructure:ee.any,fixedWeekNumber:ee.number,format:ee.string,formatDensity:ee.oneOf(["dense","spacious"]),inputRef:pR,label:ee.node,loading:ee.bool,localeText:ee.object,maxDate:ee.object,maxDateTime:ee.object,maxTime:ee.object,minDate:ee.object,minDateTime:ee.object,minTime:ee.object,minutesStep:ee.number,monthsPerRow:ee.oneOf([3,4]),name:ee.string,onAccept:ee.func,onChange:ee.func,onClose:ee.func,onError:ee.func,onMonthChange:ee.func,onOpen:ee.func,onSelectedSectionsChange:ee.func,onViewChange:ee.func,onYearChange:ee.func,open:ee.bool,openTo:ee.oneOf(["day","hours","meridiem","minutes","month","seconds","year"]),orientation:ee.oneOf(["landscape","portrait"]),readOnly:ee.bool,reduceAnimations:ee.bool,referenceDate:ee.object,renderLoading:ee.func,selectedSections:ee.oneOfType([ee.oneOf(["all","day","empty","hours","meridiem","minutes","month","seconds","weekDay","year"]),ee.number]),shouldDisableDate:ee.func,shouldDisableMonth:ee.func,shouldDisableTime:ee.func,shouldDisableYear:ee.func,showDaysOutsideCurrentMonth:ee.bool,skipDisabled:ee.bool,slotProps:ee.object,slots:ee.object,sx:ee.oneOfType([ee.arrayOf(ee.oneOfType([ee.func,ee.object,ee.bool])),ee.func,ee.object]),thresholdToRenderTimeInASingleColumn:ee.number,timeSteps:ee.shape({hours:ee.number,minutes:ee.number,seconds:ee.number}),timezone:ee.string,value:ee.object,view:ee.oneOf(["day","hours","meridiem","minutes","month","seconds","year"]),viewRenderers:ee.shape({day:ee.func,hours:ee.func,meridiem:ee.func,minutes:ee.func,month:ee.func,seconds:ee.func,year:ee.func}),views:ee.arrayOf(ee.oneOf(["day","hours","minutes","month","seconds","year"]).isRequired),yearsOrder:ee.oneOf(["asc","desc"]),yearsPerRow:ee.oneOf([3,4])};const kK=[{views:hO},{views:SO}],yP=M.forwardRef(function(e,t){var g,m,x,b,A,E;const r=Yt(),i=gP(e,"MuiMobileDateTimePicker"),a=i.shouldRenderTimeInASingleColumn?hP:n1,s=H({day:Bd,month:Bd,year:Bd,hours:a,minutes:a,seconds:a,meridiem:a},i.viewRenderers),o=i.ampmInClock??!1,d=((g=s.hours)==null?void 0:g.name)===n1.name?i.views:i.views.filter(C=>C!=="meridiem"),f=H({},i,{viewRenderers:s,format:pP(r,i),views:d,ampmInClock:o,slots:H({field:KO},i.slots),slotProps:H({},i.slotProps,{field:C=>{var T;return H({},xo((T=i.slotProps)==null?void 0:T.field,C),dO(i))},toolbar:H({hidden:!1,ampmInClock:o},(m=i.slotProps)==null?void 0:m.toolbar),tabs:H({hidden:!1},(x=i.slotProps)==null?void 0:x.tabs),layout:H({},(b=i.slotProps)==null?void 0:b.layout,{sx:bW([{[`& .${Rw.root}`]:{width:Qd},[`& .${Mw.root}`]:{flex:1,maxHeight:Zd-1,[`.${Mw.item}`]:{width:"auto"}},[`& .${Dw.root}`]:{width:Qd,maxHeight:Zd,flex:1,[`.${Dw.item}`]:{justifyContent:"center"}}}],(E=(A=i.slotProps)==null?void 0:A.layout)==null?void 0:E.sx)})})}),{renderPicker:p}=nK({ref:t,props:f,valueManager:Oi,valueType:"date-time",validator:fy,steps:kK});return p()});yP.propTypes={ampm:ee.bool,ampmInClock:ee.bool,autoFocus:ee.bool,className:ee.string,closeOnSelect:ee.bool,dayOfWeekFormatter:ee.func,defaultValue:ee.object,disabled:ee.bool,disableFuture:ee.bool,disableHighlightToday:ee.bool,disableIgnoringDatePartForTimeValidation:ee.bool,disableOpenPicker:ee.bool,disablePast:ee.bool,displayWeekNumber:ee.bool,enableAccessibleFieldDOMStructure:ee.any,fixedWeekNumber:ee.number,format:ee.string,formatDensity:ee.oneOf(["dense","spacious"]),inputRef:pR,label:ee.node,loading:ee.bool,localeText:ee.object,maxDate:ee.object,maxDateTime:ee.object,maxTime:ee.object,minDate:ee.object,minDateTime:ee.object,minTime:ee.object,minutesStep:ee.number,monthsPerRow:ee.oneOf([3,4]),name:ee.string,onAccept:ee.func,onChange:ee.func,onClose:ee.func,onError:ee.func,onMonthChange:ee.func,onOpen:ee.func,onSelectedSectionsChange:ee.func,onViewChange:ee.func,onYearChange:ee.func,open:ee.bool,openTo:ee.oneOf(["day","hours","meridiem","minutes","month","seconds","year"]),orientation:ee.oneOf(["landscape","portrait"]),readOnly:ee.bool,reduceAnimations:ee.bool,referenceDate:ee.object,renderLoading:ee.func,selectedSections:ee.oneOfType([ee.oneOf(["all","day","empty","hours","meridiem","minutes","month","seconds","weekDay","year"]),ee.number]),shouldDisableDate:ee.func,shouldDisableMonth:ee.func,shouldDisableTime:ee.func,shouldDisableYear:ee.func,showDaysOutsideCurrentMonth:ee.bool,skipDisabled:ee.bool,slotProps:ee.object,slots:ee.object,sx:ee.oneOfType([ee.arrayOf(ee.oneOfType([ee.func,ee.object,ee.bool])),ee.func,ee.object]),thresholdToRenderTimeInASingleColumn:ee.number,timeSteps:ee.shape({hours:ee.number,minutes:ee.number,seconds:ee.number}),timezone:ee.string,value:ee.object,view:ee.oneOf(["day","hours","meridiem","minutes","month","seconds","year"]),viewRenderers:ee.shape({day:ee.func,hours:ee.func,meridiem:ee.func,minutes:ee.func,month:ee.func,seconds:ee.func,year:ee.func}),views:ee.arrayOf(ee.oneOf(["day","hours","minutes","month","seconds","year"]).isRequired),yearsOrder:ee.oneOf(["asc","desc"]),yearsPerRow:ee.oneOf([3,4])};const NK=["desktopModeMediaQuery"],LK=M.forwardRef(function(e,t){const r=bt({props:e,name:"MuiDateTimePicker"}),{desktopModeMediaQuery:i=wW}=r,a=Be(r,NK);return M1(i,{defaultMatches:!0})?v.jsx(mP,H({ref:t},a)):v.jsx(yP,H({ref:t},a))}),vP=6048e5,BK=864e5,xP=6e4,wP=36e5,FK=1e3,RD=Symbol.for("constructDateFrom");function Fn(n,e){return typeof n=="function"?n(e):n&&typeof n=="object"&&RD in n?n[RD](e):n instanceof Date?new n.constructor(e):new Date(e)}function nt(n,e){return Fn(e||n,n)}function gy(n,e,t){const r=nt(n,t==null?void 0:t.in);return isNaN(e)?Fn((t==null?void 0:t.in)||n,NaN):(e&&r.setDate(r.getDate()+e),r)}function bP(n,e,t){return Fn(n,+nt(n)+e)}function VK(n,e,t){return bP(n,e*1e3)}function jK(n,e,t){const r=nt(n,t==null?void 0:t.in);return r.setTime(r.getTime()+e*xP),r}function UK(n,e,t){return bP(n,e*wP)}function HK(n,e,t){return gy(n,e*7,t)}function _P(n,e,t){const r=nt(n,t==null?void 0:t.in);if(isNaN(e))return Fn(n,NaN);if(!e)return r;const i=r.getDate(),a=Fn(n,r.getTime());a.setMonth(r.getMonth()+e+1,0);const s=a.getDate();return i>=s?a:(r.setFullYear(a.getFullYear(),a.getMonth(),i),r)}function zK(n,e,t){return _P(n,e*12,t)}function MD(n,e){const t=nt(n,e==null?void 0:e.in);return t.setHours(23,59,59,999),t}let $K={};function uu(){return $K}function GK(n,e){var o,c,d,f;const t=uu(),r=(e==null?void 0:e.weekStartsOn)??((c=(o=e==null?void 0:e.locale)==null?void 0:o.options)==null?void 0:c.weekStartsOn)??t.weekStartsOn??((f=(d=t.locale)==null?void 0:d.options)==null?void 0:f.weekStartsOn)??0,i=nt(n,e==null?void 0:e.in),a=i.getDay(),s=(a<r?-7:0)+6-(a-r);return i.setDate(i.getDate()+s),i.setHours(23,59,59,999),i}function OD(n,e){const t=nt(n,e==null?void 0:e.in),r=t.getFullYear();return t.setFullYear(r+1,0,0),t.setHours(23,59,59,999),t}const WK={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},YK=(n,e,t)=>{let r;const i=WK[n];return typeof i=="string"?r=i:e===1?r=i.one:r=i.other.replace("{{count}}",e.toString()),t!=null&&t.addSuffix?t.comparison&&t.comparison>0?"in "+r:r+" ago":r};function Fd(n){return(e={})=>{const t=e.width?String(e.width):n.defaultWidth;return n.formats[t]||n.formats[n.defaultWidth]}}const qK={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},XK={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},KK={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},QK={date:Fd({formats:qK,defaultWidth:"full"}),time:Fd({formats:XK,defaultWidth:"full"}),dateTime:Fd({formats:KK,defaultWidth:"full"})},ZK={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},JK=(n,e,t,r)=>ZK[n];function bs(n){return(e,t)=>{const r=t!=null&&t.context?String(t.context):"standalone";let i;if(r==="formatting"&&n.formattingValues){const s=n.defaultFormattingWidth||n.defaultWidth,o=t!=null&&t.width?String(t.width):s;i=n.formattingValues[o]||n.formattingValues[s]}else{const s=n.defaultWidth,o=t!=null&&t.width?String(t.width):n.defaultWidth;i=n.values[o]||n.values[s]}const a=n.argumentCallback?n.argumentCallback(e):e;return i[a]}}const eQ={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},tQ={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},nQ={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},rQ={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},iQ={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},aQ={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},sQ=(n,e)=>{const t=Number(n),r=t%100;if(r>20||r<10)switch(r%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd"}return t+"th"},oQ={ordinalNumber:sQ,era:bs({values:eQ,defaultWidth:"wide"}),quarter:bs({values:tQ,defaultWidth:"wide",argumentCallback:n=>n-1}),month:bs({values:nQ,defaultWidth:"wide"}),day:bs({values:rQ,defaultWidth:"wide"}),dayPeriod:bs({values:iQ,defaultWidth:"wide",formattingValues:aQ,defaultFormattingWidth:"wide"})};function _s(n){return(e,t={})=>{const r=t.width,i=r&&n.matchPatterns[r]||n.matchPatterns[n.defaultMatchWidth],a=e.match(i);if(!a)return null;const s=a[0],o=r&&n.parsePatterns[r]||n.parsePatterns[n.defaultParseWidth],c=Array.isArray(o)?cQ(o,p=>p.test(s)):lQ(o,p=>p.test(s));let d;d=n.valueCallback?n.valueCallback(c):c,d=t.valueCallback?t.valueCallback(d):d;const f=e.slice(s.length);return{value:d,rest:f}}}function lQ(n,e){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)&&e(n[t]))return t}function cQ(n,e){for(let t=0;t<n.length;t++)if(e(n[t]))return t}function AP(n){return(e,t={})=>{const r=e.match(n.matchPattern);if(!r)return null;const i=r[0],a=e.match(n.parsePattern);if(!a)return null;let s=n.valueCallback?n.valueCallback(a[0]):a[0];s=t.valueCallback?t.valueCallback(s):s;const o=e.slice(i.length);return{value:s,rest:o}}}const uQ=/^(\d+)(th|st|nd|rd)?/i,dQ=/\d+/i,fQ={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},hQ={any:[/^b/i,/^(a|c)/i]},pQ={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},gQ={any:[/1/i,/2/i,/3/i,/4/i]},mQ={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},yQ={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},vQ={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},xQ={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},wQ={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},bQ={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},_Q={ordinalNumber:AP({matchPattern:uQ,parsePattern:dQ,valueCallback:n=>parseInt(n,10)}),era:_s({matchPatterns:fQ,defaultMatchWidth:"wide",parsePatterns:hQ,defaultParseWidth:"any"}),quarter:_s({matchPatterns:pQ,defaultMatchWidth:"wide",parsePatterns:gQ,defaultParseWidth:"any",valueCallback:n=>n+1}),month:_s({matchPatterns:mQ,defaultMatchWidth:"wide",parsePatterns:yQ,defaultParseWidth:"any"}),day:_s({matchPatterns:vQ,defaultMatchWidth:"wide",parsePatterns:xQ,defaultParseWidth:"any"}),dayPeriod:_s({matchPatterns:wQ,defaultMatchWidth:"any",parsePatterns:bQ,defaultParseWidth:"any"})},M_={code:"en-US",formatDistance:YK,formatLong:QK,formatRelative:JK,localize:oQ,match:_Q,options:{weekStartsOn:0,firstWeekContainsDate:1}};function r1(n){const e=nt(n),t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),+n-+t}function J0(n,...e){const t=Fn.bind(null,e.find(r=>typeof r=="object"));return e.map(t)}function I0(n,e){const t=nt(n,e==null?void 0:e.in);return t.setHours(0,0,0,0),t}function AQ(n,e,t){const[r,i]=J0(t==null?void 0:t.in,n,e),a=I0(r),s=I0(i),o=+a-r1(a),c=+s-r1(s);return Math.round((o-c)/BK)}function EP(n,e){const t=nt(n,e==null?void 0:e.in);return t.setFullYear(t.getFullYear(),0,1),t.setHours(0,0,0,0),t}function EQ(n,e){const t=nt(n,e==null?void 0:e.in);return AQ(t,EP(t))+1}function Co(n,e){var o,c,d,f;const t=uu(),r=(e==null?void 0:e.weekStartsOn)??((c=(o=e==null?void 0:e.locale)==null?void 0:o.options)==null?void 0:c.weekStartsOn)??t.weekStartsOn??((f=(d=t.locale)==null?void 0:d.options)==null?void 0:f.weekStartsOn)??0,i=nt(n,e==null?void 0:e.in),a=i.getDay(),s=(a<r?7:0)+a-r;return i.setDate(i.getDate()-s),i.setHours(0,0,0,0),i}function Jd(n,e){return Co(n,{...e,weekStartsOn:1})}function SP(n,e){const t=nt(n,e==null?void 0:e.in),r=t.getFullYear(),i=Fn(t,0);i.setFullYear(r+1,0,4),i.setHours(0,0,0,0);const a=Jd(i),s=Fn(t,0);s.setFullYear(r,0,4),s.setHours(0,0,0,0);const o=Jd(s);return t.getTime()>=a.getTime()?r+1:t.getTime()>=o.getTime()?r:r-1}function SQ(n,e){const t=SP(n,e),r=Fn(n,0);return r.setFullYear(t,0,4),r.setHours(0,0,0,0),Jd(r)}function CP(n,e){const t=nt(n,e==null?void 0:e.in),r=+Jd(t)-+SQ(t);return Math.round(r/vP)+1}function O_(n,e){var f,p,g,m;const t=nt(n,e==null?void 0:e.in),r=t.getFullYear(),i=uu(),a=(e==null?void 0:e.firstWeekContainsDate)??((p=(f=e==null?void 0:e.locale)==null?void 0:f.options)==null?void 0:p.firstWeekContainsDate)??i.firstWeekContainsDate??((m=(g=i.locale)==null?void 0:g.options)==null?void 0:m.firstWeekContainsDate)??1,s=Fn((e==null?void 0:e.in)||n,0);s.setFullYear(r+1,0,a),s.setHours(0,0,0,0);const o=Co(s,e),c=Fn((e==null?void 0:e.in)||n,0);c.setFullYear(r,0,a),c.setHours(0,0,0,0);const d=Co(c,e);return+t>=+o?r+1:+t>=+d?r:r-1}function CQ(n,e){var o,c,d,f;const t=uu(),r=(e==null?void 0:e.firstWeekContainsDate)??((c=(o=e==null?void 0:e.locale)==null?void 0:o.options)==null?void 0:c.firstWeekContainsDate)??t.firstWeekContainsDate??((f=(d=t.locale)==null?void 0:d.options)==null?void 0:f.firstWeekContainsDate)??1,i=O_(n,e),a=Fn((e==null?void 0:e.in)||n,0);return a.setFullYear(i,0,r),a.setHours(0,0,0,0),Co(a,e)}function P_(n,e){const t=nt(n,e==null?void 0:e.in),r=+Co(t,e)-+CQ(t,e);return Math.round(r/vP)+1}function cn(n,e){const t=n<0?"-":"",r=Math.abs(n).toString().padStart(e,"0");return t+r}const hl={y(n,e){const t=n.getFullYear(),r=t>0?t:1-t;return cn(e==="yy"?r%100:r,e.length)},M(n,e){const t=n.getMonth();return e==="M"?String(t+1):cn(t+1,2)},d(n,e){return cn(n.getDate(),e.length)},a(n,e){const t=n.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.toUpperCase();case"aaa":return t;case"aaaaa":return t[0];case"aaaa":default:return t==="am"?"a.m.":"p.m."}},h(n,e){return cn(n.getHours()%12||12,e.length)},H(n,e){return cn(n.getHours(),e.length)},m(n,e){return cn(n.getMinutes(),e.length)},s(n,e){return cn(n.getSeconds(),e.length)},S(n,e){const t=e.length,r=n.getMilliseconds(),i=Math.trunc(r*Math.pow(10,t-3));return cn(i,e.length)}},od={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},PD={G:function(n,e,t){const r=n.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return t.era(r,{width:"abbreviated"});case"GGGGG":return t.era(r,{width:"narrow"});case"GGGG":default:return t.era(r,{width:"wide"})}},y:function(n,e,t){if(e==="yo"){const r=n.getFullYear(),i=r>0?r:1-r;return t.ordinalNumber(i,{unit:"year"})}return hl.y(n,e)},Y:function(n,e,t,r){const i=O_(n,r),a=i>0?i:1-i;if(e==="YY"){const s=a%100;return cn(s,2)}return e==="Yo"?t.ordinalNumber(a,{unit:"year"}):cn(a,e.length)},R:function(n,e){const t=SP(n);return cn(t,e.length)},u:function(n,e){const t=n.getFullYear();return cn(t,e.length)},Q:function(n,e,t){const r=Math.ceil((n.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return cn(r,2);case"Qo":return t.ordinalNumber(r,{unit:"quarter"});case"QQQ":return t.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return t.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return t.quarter(r,{width:"wide",context:"formatting"})}},q:function(n,e,t){const r=Math.ceil((n.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return cn(r,2);case"qo":return t.ordinalNumber(r,{unit:"quarter"});case"qqq":return t.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return t.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return t.quarter(r,{width:"wide",context:"standalone"})}},M:function(n,e,t){const r=n.getMonth();switch(e){case"M":case"MM":return hl.M(n,e);case"Mo":return t.ordinalNumber(r+1,{unit:"month"});case"MMM":return t.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return t.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return t.month(r,{width:"wide",context:"formatting"})}},L:function(n,e,t){const r=n.getMonth();switch(e){case"L":return String(r+1);case"LL":return cn(r+1,2);case"Lo":return t.ordinalNumber(r+1,{unit:"month"});case"LLL":return t.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return t.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return t.month(r,{width:"wide",context:"standalone"})}},w:function(n,e,t,r){const i=P_(n,r);return e==="wo"?t.ordinalNumber(i,{unit:"week"}):cn(i,e.length)},I:function(n,e,t){const r=CP(n);return e==="Io"?t.ordinalNumber(r,{unit:"week"}):cn(r,e.length)},d:function(n,e,t){return e==="do"?t.ordinalNumber(n.getDate(),{unit:"date"}):hl.d(n,e)},D:function(n,e,t){const r=EQ(n);return e==="Do"?t.ordinalNumber(r,{unit:"dayOfYear"}):cn(r,e.length)},E:function(n,e,t){const r=n.getDay();switch(e){case"E":case"EE":case"EEE":return t.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return t.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return t.day(r,{width:"short",context:"formatting"});case"EEEE":default:return t.day(r,{width:"wide",context:"formatting"})}},e:function(n,e,t,r){const i=n.getDay(),a=(i-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(a);case"ee":return cn(a,2);case"eo":return t.ordinalNumber(a,{unit:"day"});case"eee":return t.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return t.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return t.day(i,{width:"short",context:"formatting"});case"eeee":default:return t.day(i,{width:"wide",context:"formatting"})}},c:function(n,e,t,r){const i=n.getDay(),a=(i-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(a);case"cc":return cn(a,e.length);case"co":return t.ordinalNumber(a,{unit:"day"});case"ccc":return t.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return t.day(i,{width:"narrow",context:"standalone"});case"cccccc":return t.day(i,{width:"short",context:"standalone"});case"cccc":default:return t.day(i,{width:"wide",context:"standalone"})}},i:function(n,e,t){const r=n.getDay(),i=r===0?7:r;switch(e){case"i":return String(i);case"ii":return cn(i,e.length);case"io":return t.ordinalNumber(i,{unit:"day"});case"iii":return t.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return t.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return t.day(r,{width:"short",context:"formatting"});case"iiii":default:return t.day(r,{width:"wide",context:"formatting"})}},a:function(n,e,t){const i=n.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return t.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return t.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(n,e,t){const r=n.getHours();let i;switch(r===12?i=od.noon:r===0?i=od.midnight:i=r/12>=1?"pm":"am",e){case"b":case"bb":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return t.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return t.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(n,e,t){const r=n.getHours();let i;switch(r>=17?i=od.evening:r>=12?i=od.afternoon:r>=4?i=od.morning:i=od.night,e){case"B":case"BB":case"BBB":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return t.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return t.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(n,e,t){if(e==="ho"){let r=n.getHours()%12;return r===0&&(r=12),t.ordinalNumber(r,{unit:"hour"})}return hl.h(n,e)},H:function(n,e,t){return e==="Ho"?t.ordinalNumber(n.getHours(),{unit:"hour"}):hl.H(n,e)},K:function(n,e,t){const r=n.getHours()%12;return e==="Ko"?t.ordinalNumber(r,{unit:"hour"}):cn(r,e.length)},k:function(n,e,t){let r=n.getHours();return r===0&&(r=24),e==="ko"?t.ordinalNumber(r,{unit:"hour"}):cn(r,e.length)},m:function(n,e,t){return e==="mo"?t.ordinalNumber(n.getMinutes(),{unit:"minute"}):hl.m(n,e)},s:function(n,e,t){return e==="so"?t.ordinalNumber(n.getSeconds(),{unit:"second"}):hl.s(n,e)},S:function(n,e){return hl.S(n,e)},X:function(n,e,t){const r=n.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return ND(r);case"XXXX":case"XX":return Nc(r);case"XXXXX":case"XXX":default:return Nc(r,":")}},x:function(n,e,t){const r=n.getTimezoneOffset();switch(e){case"x":return ND(r);case"xxxx":case"xx":return Nc(r);case"xxxxx":case"xxx":default:return Nc(r,":")}},O:function(n,e,t){const r=n.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+kD(r,":");case"OOOO":default:return"GMT"+Nc(r,":")}},z:function(n,e,t){const r=n.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+kD(r,":");case"zzzz":default:return"GMT"+Nc(r,":")}},t:function(n,e,t){const r=Math.trunc(+n/1e3);return cn(r,e.length)},T:function(n,e,t){return cn(+n,e.length)}};function kD(n,e=""){const t=n>0?"-":"+",r=Math.abs(n),i=Math.trunc(r/60),a=r%60;return a===0?t+String(i):t+String(i)+e+cn(a,2)}function ND(n,e){return n%60===0?(n>0?"-":"+")+cn(Math.abs(n)/60,2):Nc(n,e)}function Nc(n,e=""){const t=n>0?"-":"+",r=Math.abs(n),i=cn(Math.trunc(r/60),2),a=cn(r%60,2);return t+i+e+a}const LD=(n,e)=>{switch(n){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},TP=(n,e)=>{switch(n){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},TQ=(n,e)=>{const t=n.match(/(P+)(p+)?/)||[],r=t[1],i=t[2];if(!i)return LD(n,e);let a;switch(r){case"P":a=e.dateTime({width:"short"});break;case"PP":a=e.dateTime({width:"medium"});break;case"PPP":a=e.dateTime({width:"long"});break;case"PPPP":default:a=e.dateTime({width:"full"});break}return a.replace("{{date}}",LD(r,e)).replace("{{time}}",TP(i,e))},i1={p:TP,P:TQ},IQ=/^D+$/,DQ=/^Y+$/,RQ=["D","DD","YY","YYYY"];function IP(n){return IQ.test(n)}function DP(n){return DQ.test(n)}function Ow(n,e,t){const r=MQ(n,e,t);if(console.warn(r),RQ.includes(n))throw new RangeError(r)}function MQ(n,e,t){const r=n[0]==="Y"?"years":"days of the month";return`Use \`${n.toLowerCase()}\` instead of \`${n}\` (in \`${e}\`) for formatting ${r} to the input \`${t}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}function OQ(n){return n instanceof Date||typeof n=="object"&&Object.prototype.toString.call(n)==="[object Date]"}function RP(n){return!(!OQ(n)&&typeof n!="number"||isNaN(+nt(n)))}const PQ=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,kQ=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,NQ=/^'([^]*?)'?$/,LQ=/''/g,BQ=/[a-zA-Z]/;function FQ(n,e,t){var f,p,g,m,x,b,A,E;const r=uu(),i=(t==null?void 0:t.locale)??r.locale??M_,a=(t==null?void 0:t.firstWeekContainsDate)??((p=(f=t==null?void 0:t.locale)==null?void 0:f.options)==null?void 0:p.firstWeekContainsDate)??r.firstWeekContainsDate??((m=(g=r.locale)==null?void 0:g.options)==null?void 0:m.firstWeekContainsDate)??1,s=(t==null?void 0:t.weekStartsOn)??((b=(x=t==null?void 0:t.locale)==null?void 0:x.options)==null?void 0:b.weekStartsOn)??r.weekStartsOn??((E=(A=r.locale)==null?void 0:A.options)==null?void 0:E.weekStartsOn)??0,o=nt(n,t==null?void 0:t.in);if(!RP(o))throw new RangeError("Invalid time value");let c=e.match(kQ).map(C=>{const T=C[0];if(T==="p"||T==="P"){const D=i1[T];return D(C,i.formatLong)}return C}).join("").match(PQ).map(C=>{if(C==="''")return{isToken:!1,value:"'"};const T=C[0];if(T==="'")return{isToken:!1,value:VQ(C)};if(PD[T])return{isToken:!0,value:C};if(T.match(BQ))throw new RangeError("Format string contains an unescaped latin alphabet character `"+T+"`");return{isToken:!1,value:C}});i.localize.preprocessor&&(c=i.localize.preprocessor(o,c));const d={firstWeekContainsDate:a,weekStartsOn:s,locale:i};return c.map(C=>{if(!C.isToken)return C.value;const T=C.value;(!(t!=null&&t.useAdditionalWeekYearTokens)&&DP(T)||!(t!=null&&t.useAdditionalDayOfYearTokens)&&IP(T))&&Ow(T,e,String(n));const D=PD[T[0]];return D(o,T,i.localize,d)}).join("")}function VQ(n){const e=n.match(NQ);return e?e[1].replace(LQ,"'"):n}function jQ(n,e){return nt(n,e==null?void 0:e.in).getDate()}function MP(n,e){const t=nt(n,e==null?void 0:e.in),r=t.getFullYear(),i=t.getMonth(),a=Fn(t,0);return a.setFullYear(r,i+1,0),a.setHours(0,0,0,0),a.getDate()}function UQ(n,e){return nt(n,e==null?void 0:e.in).getHours()}function HQ(n,e){return nt(n,e==null?void 0:e.in).getMinutes()}function zQ(n,e){return nt(n,e==null?void 0:e.in).getMonth()}function $Q(n){return nt(n).getSeconds()}function GQ(n){return nt(n).getMilliseconds()}function WQ(n,e){return nt(n,e==null?void 0:e.in).getFullYear()}function s2(n,e){return+nt(n)>+nt(e)}function o2(n,e){return+nt(n)<+nt(e)}function YQ(n,e){return+nt(n)==+nt(e)}function qQ(n,e,t){const[r,i]=J0(t==null?void 0:t.in,n,e);return+I0(r)==+I0(i)}function XQ(n,e,t){const[r,i]=J0(t==null?void 0:t.in,n,e);return r.getFullYear()===i.getFullYear()}function KQ(n,e,t){const[r,i]=J0(t==null?void 0:t.in,n,e);return r.getFullYear()===i.getFullYear()&&r.getMonth()===i.getMonth()}function BD(n,e){const t=nt(n,e==null?void 0:e.in);return t.setMinutes(0,0,0),t}function QQ(n,e,t){const[r,i]=J0(t==null?void 0:t.in,n,e);return+BD(r)==+BD(i)}function ZQ(){return Object.assign({},uu())}function JQ(n,e){const t=eZ(e)?new e(0):Fn(e,0);return t.setFullYear(n.getFullYear(),n.getMonth(),n.getDate()),t.setHours(n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds()),t}function eZ(n){var e;return typeof n=="function"&&((e=n.prototype)==null?void 0:e.constructor)===n}const tZ=10;class OP{constructor(){xe(this,"subPriority",0)}validate(e,t){return!0}}class nZ extends OP{constructor(e,t,r,i,a){super(),this.value=e,this.validateValue=t,this.setValue=r,this.priority=i,a&&(this.subPriority=a)}validate(e,t){return this.validateValue(e,this.value,t)}set(e,t,r){return this.setValue(e,t,this.value,r)}}class rZ extends OP{constructor(t,r){super();xe(this,"priority",tZ);xe(this,"subPriority",-1);this.context=t||(i=>Fn(r,i))}set(t,r){return r.timestampIsSet?t:Fn(t,JQ(t,this.context))}}class en{run(e,t,r,i){const a=this.parse(e,t,r,i);return a?{setter:new nZ(a.value,this.validate,this.set,this.priority,this.subPriority),rest:a.rest}:null}validate(e,t,r){return!0}}class iZ extends en{constructor(){super(...arguments);xe(this,"priority",140);xe(this,"incompatibleTokens",["R","u","t","T"])}parse(t,r,i){switch(r){case"G":case"GG":case"GGG":return i.era(t,{width:"abbreviated"})||i.era(t,{width:"narrow"});case"GGGGG":return i.era(t,{width:"narrow"});case"GGGG":default:return i.era(t,{width:"wide"})||i.era(t,{width:"abbreviated"})||i.era(t,{width:"narrow"})}}set(t,r,i){return r.era=i,t.setFullYear(i,0,1),t.setHours(0,0,0,0),t}}const rr={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},As={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function ir(n,e){return n&&{value:e(n.value),rest:n.rest}}function Hn(n,e){const t=e.match(n);return t?{value:parseInt(t[0],10),rest:e.slice(t[0].length)}:null}function Es(n,e){const t=e.match(n);if(!t)return null;if(t[0]==="Z")return{value:0,rest:e.slice(1)};const r=t[1]==="+"?1:-1,i=t[2]?parseInt(t[2],10):0,a=t[3]?parseInt(t[3],10):0,s=t[5]?parseInt(t[5],10):0;return{value:r*(i*wP+a*xP+s*FK),rest:e.slice(t[0].length)}}function PP(n){return Hn(rr.anyDigitsSigned,n)}function Kn(n,e){switch(n){case 1:return Hn(rr.singleDigit,e);case 2:return Hn(rr.twoDigits,e);case 3:return Hn(rr.threeDigits,e);case 4:return Hn(rr.fourDigits,e);default:return Hn(new RegExp("^\\d{1,"+n+"}"),e)}}function a1(n,e){switch(n){case 1:return Hn(rr.singleDigitSigned,e);case 2:return Hn(rr.twoDigitsSigned,e);case 3:return Hn(rr.threeDigitsSigned,e);case 4:return Hn(rr.fourDigitsSigned,e);default:return Hn(new RegExp("^-?\\d{1,"+n+"}"),e)}}function k_(n){switch(n){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function kP(n,e){const t=e>0,r=t?e:1-e;let i;if(r<=50)i=n||100;else{const a=r+50,s=Math.trunc(a/100)*100,o=n>=a%100;i=n+s-(o?100:0)}return t?i:1-i}function NP(n){return n%400===0||n%4===0&&n%100!==0}class aZ extends en{constructor(){super(...arguments);xe(this,"priority",130);xe(this,"incompatibleTokens",["Y","R","u","w","I","i","e","c","t","T"])}parse(t,r,i){const a=s=>({year:s,isTwoDigitYear:r==="yy"});switch(r){case"y":return ir(Kn(4,t),a);case"yo":return ir(i.ordinalNumber(t,{unit:"year"}),a);default:return ir(Kn(r.length,t),a)}}validate(t,r){return r.isTwoDigitYear||r.year>0}set(t,r,i){const a=t.getFullYear();if(i.isTwoDigitYear){const o=kP(i.year,a);return t.setFullYear(o,0,1),t.setHours(0,0,0,0),t}const s=!("era"in r)||r.era===1?i.year:1-i.year;return t.setFullYear(s,0,1),t.setHours(0,0,0,0),t}}class sZ extends en{constructor(){super(...arguments);xe(this,"priority",130);xe(this,"incompatibleTokens",["y","R","u","Q","q","M","L","I","d","D","i","t","T"])}parse(t,r,i){const a=s=>({year:s,isTwoDigitYear:r==="YY"});switch(r){case"Y":return ir(Kn(4,t),a);case"Yo":return ir(i.ordinalNumber(t,{unit:"year"}),a);default:return ir(Kn(r.length,t),a)}}validate(t,r){return r.isTwoDigitYear||r.year>0}set(t,r,i,a){const s=O_(t,a);if(i.isTwoDigitYear){const c=kP(i.year,s);return t.setFullYear(c,0,a.firstWeekContainsDate),t.setHours(0,0,0,0),Co(t,a)}const o=!("era"in r)||r.era===1?i.year:1-i.year;return t.setFullYear(o,0,a.firstWeekContainsDate),t.setHours(0,0,0,0),Co(t,a)}}class oZ extends en{constructor(){super(...arguments);xe(this,"priority",130);xe(this,"incompatibleTokens",["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"])}parse(t,r){return a1(r==="R"?4:r.length,t)}set(t,r,i){const a=Fn(t,0);return a.setFullYear(i,0,4),a.setHours(0,0,0,0),Jd(a)}}class lZ extends en{constructor(){super(...arguments);xe(this,"priority",130);xe(this,"incompatibleTokens",["G","y","Y","R","w","I","i","e","c","t","T"])}parse(t,r){return a1(r==="u"?4:r.length,t)}set(t,r,i){return t.setFullYear(i,0,1),t.setHours(0,0,0,0),t}}class cZ extends en{constructor(){super(...arguments);xe(this,"priority",120);xe(this,"incompatibleTokens",["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"])}parse(t,r,i){switch(r){case"Q":case"QQ":return Kn(r.length,t);case"Qo":return i.ordinalNumber(t,{unit:"quarter"});case"QQQ":return i.quarter(t,{width:"abbreviated",context:"formatting"})||i.quarter(t,{width:"narrow",context:"formatting"});case"QQQQQ":return i.quarter(t,{width:"narrow",context:"formatting"});case"QQQQ":default:return i.quarter(t,{width:"wide",context:"formatting"})||i.quarter(t,{width:"abbreviated",context:"formatting"})||i.quarter(t,{width:"narrow",context:"formatting"})}}validate(t,r){return r>=1&&r<=4}set(t,r,i){return t.setMonth((i-1)*3,1),t.setHours(0,0,0,0),t}}class uZ extends en{constructor(){super(...arguments);xe(this,"priority",120);xe(this,"incompatibleTokens",["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"])}parse(t,r,i){switch(r){case"q":case"qq":return Kn(r.length,t);case"qo":return i.ordinalNumber(t,{unit:"quarter"});case"qqq":return i.quarter(t,{width:"abbreviated",context:"standalone"})||i.quarter(t,{width:"narrow",context:"standalone"});case"qqqqq":return i.quarter(t,{width:"narrow",context:"standalone"});case"qqqq":default:return i.quarter(t,{width:"wide",context:"standalone"})||i.quarter(t,{width:"abbreviated",context:"standalone"})||i.quarter(t,{width:"narrow",context:"standalone"})}}validate(t,r){return r>=1&&r<=4}set(t,r,i){return t.setMonth((i-1)*3,1),t.setHours(0,0,0,0),t}}class dZ extends en{constructor(){super(...arguments);xe(this,"incompatibleTokens",["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]);xe(this,"priority",110)}parse(t,r,i){const a=s=>s-1;switch(r){case"M":return ir(Hn(rr.month,t),a);case"MM":return ir(Kn(2,t),a);case"Mo":return ir(i.ordinalNumber(t,{unit:"month"}),a);case"MMM":return i.month(t,{width:"abbreviated",context:"formatting"})||i.month(t,{width:"narrow",context:"formatting"});case"MMMMM":return i.month(t,{width:"narrow",context:"formatting"});case"MMMM":default:return i.month(t,{width:"wide",context:"formatting"})||i.month(t,{width:"abbreviated",context:"formatting"})||i.month(t,{width:"narrow",context:"formatting"})}}validate(t,r){return r>=0&&r<=11}set(t,r,i){return t.setMonth(i,1),t.setHours(0,0,0,0),t}}class fZ extends en{constructor(){super(...arguments);xe(this,"priority",110);xe(this,"incompatibleTokens",["Y","R","q","Q","M","w","I","D","i","e","c","t","T"])}parse(t,r,i){const a=s=>s-1;switch(r){case"L":return ir(Hn(rr.month,t),a);case"LL":return ir(Kn(2,t),a);case"Lo":return ir(i.ordinalNumber(t,{unit:"month"}),a);case"LLL":return i.month(t,{width:"abbreviated",context:"standalone"})||i.month(t,{width:"narrow",context:"standalone"});case"LLLLL":return i.month(t,{width:"narrow",context:"standalone"});case"LLLL":default:return i.month(t,{width:"wide",context:"standalone"})||i.month(t,{width:"abbreviated",context:"standalone"})||i.month(t,{width:"narrow",context:"standalone"})}}validate(t,r){return r>=0&&r<=11}set(t,r,i){return t.setMonth(i,1),t.setHours(0,0,0,0),t}}function hZ(n,e,t){const r=nt(n,t==null?void 0:t.in),i=P_(r,t)-e;return r.setDate(r.getDate()-i*7),nt(r,t==null?void 0:t.in)}class pZ extends en{constructor(){super(...arguments);xe(this,"priority",100);xe(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","i","t","T"])}parse(t,r,i){switch(r){case"w":return Hn(rr.week,t);case"wo":return i.ordinalNumber(t,{unit:"week"});default:return Kn(r.length,t)}}validate(t,r){return r>=1&&r<=53}set(t,r,i,a){return Co(hZ(t,i,a),a)}}function gZ(n,e,t){const r=nt(n,t==null?void 0:t.in),i=CP(r,t)-e;return r.setDate(r.getDate()-i*7),r}class mZ extends en{constructor(){super(...arguments);xe(this,"priority",100);xe(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"])}parse(t,r,i){switch(r){case"I":return Hn(rr.week,t);case"Io":return i.ordinalNumber(t,{unit:"week"});default:return Kn(r.length,t)}}validate(t,r){return r>=1&&r<=53}set(t,r,i){return Jd(gZ(t,i))}}const yZ=[31,28,31,30,31,30,31,31,30,31,30,31],vZ=[31,29,31,30,31,30,31,31,30,31,30,31];class xZ extends en{constructor(){super(...arguments);xe(this,"priority",90);xe(this,"subPriority",1);xe(this,"incompatibleTokens",["Y","R","q","Q","w","I","D","i","e","c","t","T"])}parse(t,r,i){switch(r){case"d":return Hn(rr.date,t);case"do":return i.ordinalNumber(t,{unit:"date"});default:return Kn(r.length,t)}}validate(t,r){const i=t.getFullYear(),a=NP(i),s=t.getMonth();return a?r>=1&&r<=vZ[s]:r>=1&&r<=yZ[s]}set(t,r,i){return t.setDate(i),t.setHours(0,0,0,0),t}}class wZ extends en{constructor(){super(...arguments);xe(this,"priority",90);xe(this,"subpriority",1);xe(this,"incompatibleTokens",["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"])}parse(t,r,i){switch(r){case"D":case"DD":return Hn(rr.dayOfYear,t);case"Do":return i.ordinalNumber(t,{unit:"date"});default:return Kn(r.length,t)}}validate(t,r){const i=t.getFullYear();return NP(i)?r>=1&&r<=366:r>=1&&r<=365}set(t,r,i){return t.setMonth(0,i),t.setHours(0,0,0,0),t}}function N_(n,e,t){var p,g,m,x;const r=uu(),i=(t==null?void 0:t.weekStartsOn)??((g=(p=t==null?void 0:t.locale)==null?void 0:p.options)==null?void 0:g.weekStartsOn)??r.weekStartsOn??((x=(m=r.locale)==null?void 0:m.options)==null?void 0:x.weekStartsOn)??0,a=nt(n,t==null?void 0:t.in),s=a.getDay(),c=(e%7+7)%7,d=7-i,f=e<0||e>6?e-(s+d)%7:(c+d)%7-(s+d)%7;return gy(a,f,t)}class bZ extends en{constructor(){super(...arguments);xe(this,"priority",90);xe(this,"incompatibleTokens",["D","i","e","c","t","T"])}parse(t,r,i){switch(r){case"E":case"EE":case"EEE":return i.day(t,{width:"abbreviated",context:"formatting"})||i.day(t,{width:"short",context:"formatting"})||i.day(t,{width:"narrow",context:"formatting"});case"EEEEE":return i.day(t,{width:"narrow",context:"formatting"});case"EEEEEE":return i.day(t,{width:"short",context:"formatting"})||i.day(t,{width:"narrow",context:"formatting"});case"EEEE":default:return i.day(t,{width:"wide",context:"formatting"})||i.day(t,{width:"abbreviated",context:"formatting"})||i.day(t,{width:"short",context:"formatting"})||i.day(t,{width:"narrow",context:"formatting"})}}validate(t,r){return r>=0&&r<=6}set(t,r,i,a){return t=N_(t,i,a),t.setHours(0,0,0,0),t}}class _Z extends en{constructor(){super(...arguments);xe(this,"priority",90);xe(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"])}parse(t,r,i,a){const s=o=>{const c=Math.floor((o-1)/7)*7;return(o+a.weekStartsOn+6)%7+c};switch(r){case"e":case"ee":return ir(Kn(r.length,t),s);case"eo":return ir(i.ordinalNumber(t,{unit:"day"}),s);case"eee":return i.day(t,{width:"abbreviated",context:"formatting"})||i.day(t,{width:"short",context:"formatting"})||i.day(t,{width:"narrow",context:"formatting"});case"eeeee":return i.day(t,{width:"narrow",context:"formatting"});case"eeeeee":return i.day(t,{width:"short",context:"formatting"})||i.day(t,{width:"narrow",context:"formatting"});case"eeee":default:return i.day(t,{width:"wide",context:"formatting"})||i.day(t,{width:"abbreviated",context:"formatting"})||i.day(t,{width:"short",context:"formatting"})||i.day(t,{width:"narrow",context:"formatting"})}}validate(t,r){return r>=0&&r<=6}set(t,r,i,a){return t=N_(t,i,a),t.setHours(0,0,0,0),t}}class AZ extends en{constructor(){super(...arguments);xe(this,"priority",90);xe(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"])}parse(t,r,i,a){const s=o=>{const c=Math.floor((o-1)/7)*7;return(o+a.weekStartsOn+6)%7+c};switch(r){case"c":case"cc":return ir(Kn(r.length,t),s);case"co":return ir(i.ordinalNumber(t,{unit:"day"}),s);case"ccc":return i.day(t,{width:"abbreviated",context:"standalone"})||i.day(t,{width:"short",context:"standalone"})||i.day(t,{width:"narrow",context:"standalone"});case"ccccc":return i.day(t,{width:"narrow",context:"standalone"});case"cccccc":return i.day(t,{width:"short",context:"standalone"})||i.day(t,{width:"narrow",context:"standalone"});case"cccc":default:return i.day(t,{width:"wide",context:"standalone"})||i.day(t,{width:"abbreviated",context:"standalone"})||i.day(t,{width:"short",context:"standalone"})||i.day(t,{width:"narrow",context:"standalone"})}}validate(t,r){return r>=0&&r<=6}set(t,r,i,a){return t=N_(t,i,a),t.setHours(0,0,0,0),t}}function EZ(n,e){const t=nt(n,e==null?void 0:e.in).getDay();return t===0?7:t}function SZ(n,e,t){const r=nt(n,t==null?void 0:t.in),i=EZ(r,t),a=e-i;return gy(r,a,t)}class CZ extends en{constructor(){super(...arguments);xe(this,"priority",90);xe(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"])}parse(t,r,i){const a=s=>s===0?7:s;switch(r){case"i":case"ii":return Kn(r.length,t);case"io":return i.ordinalNumber(t,{unit:"day"});case"iii":return ir(i.day(t,{width:"abbreviated",context:"formatting"})||i.day(t,{width:"short",context:"formatting"})||i.day(t,{width:"narrow",context:"formatting"}),a);case"iiiii":return ir(i.day(t,{width:"narrow",context:"formatting"}),a);case"iiiiii":return ir(i.day(t,{width:"short",context:"formatting"})||i.day(t,{width:"narrow",context:"formatting"}),a);case"iiii":default:return ir(i.day(t,{width:"wide",context:"formatting"})||i.day(t,{width:"abbreviated",context:"formatting"})||i.day(t,{width:"short",context:"formatting"})||i.day(t,{width:"narrow",context:"formatting"}),a)}}validate(t,r){return r>=1&&r<=7}set(t,r,i){return t=SZ(t,i),t.setHours(0,0,0,0),t}}class TZ extends en{constructor(){super(...arguments);xe(this,"priority",80);xe(this,"incompatibleTokens",["b","B","H","k","t","T"])}parse(t,r,i){switch(r){case"a":case"aa":case"aaa":return i.dayPeriod(t,{width:"abbreviated",context:"formatting"})||i.dayPeriod(t,{width:"narrow",context:"formatting"});case"aaaaa":return i.dayPeriod(t,{width:"narrow",context:"formatting"});case"aaaa":default:return i.dayPeriod(t,{width:"wide",context:"formatting"})||i.dayPeriod(t,{width:"abbreviated",context:"formatting"})||i.dayPeriod(t,{width:"narrow",context:"formatting"})}}set(t,r,i){return t.setHours(k_(i),0,0,0),t}}class IZ extends en{constructor(){super(...arguments);xe(this,"priority",80);xe(this,"incompatibleTokens",["a","B","H","k","t","T"])}parse(t,r,i){switch(r){case"b":case"bb":case"bbb":return i.dayPeriod(t,{width:"abbreviated",context:"formatting"})||i.dayPeriod(t,{width:"narrow",context:"formatting"});case"bbbbb":return i.dayPeriod(t,{width:"narrow",context:"formatting"});case"bbbb":default:return i.dayPeriod(t,{width:"wide",context:"formatting"})||i.dayPeriod(t,{width:"abbreviated",context:"formatting"})||i.dayPeriod(t,{width:"narrow",context:"formatting"})}}set(t,r,i){return t.setHours(k_(i),0,0,0),t}}class DZ extends en{constructor(){super(...arguments);xe(this,"priority",80);xe(this,"incompatibleTokens",["a","b","t","T"])}parse(t,r,i){switch(r){case"B":case"BB":case"BBB":return i.dayPeriod(t,{width:"abbreviated",context:"formatting"})||i.dayPeriod(t,{width:"narrow",context:"formatting"});case"BBBBB":return i.dayPeriod(t,{width:"narrow",context:"formatting"});case"BBBB":default:return i.dayPeriod(t,{width:"wide",context:"formatting"})||i.dayPeriod(t,{width:"abbreviated",context:"formatting"})||i.dayPeriod(t,{width:"narrow",context:"formatting"})}}set(t,r,i){return t.setHours(k_(i),0,0,0),t}}class RZ extends en{constructor(){super(...arguments);xe(this,"priority",70);xe(this,"incompatibleTokens",["H","K","k","t","T"])}parse(t,r,i){switch(r){case"h":return Hn(rr.hour12h,t);case"ho":return i.ordinalNumber(t,{unit:"hour"});default:return Kn(r.length,t)}}validate(t,r){return r>=1&&r<=12}set(t,r,i){const a=t.getHours()>=12;return a&&i<12?t.setHours(i+12,0,0,0):!a&&i===12?t.setHours(0,0,0,0):t.setHours(i,0,0,0),t}}class MZ extends en{constructor(){super(...arguments);xe(this,"priority",70);xe(this,"incompatibleTokens",["a","b","h","K","k","t","T"])}parse(t,r,i){switch(r){case"H":return Hn(rr.hour23h,t);case"Ho":return i.ordinalNumber(t,{unit:"hour"});default:return Kn(r.length,t)}}validate(t,r){return r>=0&&r<=23}set(t,r,i){return t.setHours(i,0,0,0),t}}class OZ extends en{constructor(){super(...arguments);xe(this,"priority",70);xe(this,"incompatibleTokens",["h","H","k","t","T"])}parse(t,r,i){switch(r){case"K":return Hn(rr.hour11h,t);case"Ko":return i.ordinalNumber(t,{unit:"hour"});default:return Kn(r.length,t)}}validate(t,r){return r>=0&&r<=11}set(t,r,i){return t.getHours()>=12&&i<12?t.setHours(i+12,0,0,0):t.setHours(i,0,0,0),t}}class PZ extends en{constructor(){super(...arguments);xe(this,"priority",70);xe(this,"incompatibleTokens",["a","b","h","H","K","t","T"])}parse(t,r,i){switch(r){case"k":return Hn(rr.hour24h,t);case"ko":return i.ordinalNumber(t,{unit:"hour"});default:return Kn(r.length,t)}}validate(t,r){return r>=1&&r<=24}set(t,r,i){const a=i<=24?i%24:i;return t.setHours(a,0,0,0),t}}class kZ extends en{constructor(){super(...arguments);xe(this,"priority",60);xe(this,"incompatibleTokens",["t","T"])}parse(t,r,i){switch(r){case"m":return Hn(rr.minute,t);case"mo":return i.ordinalNumber(t,{unit:"minute"});default:return Kn(r.length,t)}}validate(t,r){return r>=0&&r<=59}set(t,r,i){return t.setMinutes(i,0,0),t}}class NZ extends en{constructor(){super(...arguments);xe(this,"priority",50);xe(this,"incompatibleTokens",["t","T"])}parse(t,r,i){switch(r){case"s":return Hn(rr.second,t);case"so":return i.ordinalNumber(t,{unit:"second"});default:return Kn(r.length,t)}}validate(t,r){return r>=0&&r<=59}set(t,r,i){return t.setSeconds(i,0),t}}class LZ extends en{constructor(){super(...arguments);xe(this,"priority",30);xe(this,"incompatibleTokens",["t","T"])}parse(t,r){const i=a=>Math.trunc(a*Math.pow(10,-r.length+3));return ir(Kn(r.length,t),i)}set(t,r,i){return t.setMilliseconds(i),t}}class BZ extends en{constructor(){super(...arguments);xe(this,"priority",10);xe(this,"incompatibleTokens",["t","T","x"])}parse(t,r){switch(r){case"X":return Es(As.basicOptionalMinutes,t);case"XX":return Es(As.basic,t);case"XXXX":return Es(As.basicOptionalSeconds,t);case"XXXXX":return Es(As.extendedOptionalSeconds,t);case"XXX":default:return Es(As.extended,t)}}set(t,r,i){return r.timestampIsSet?t:Fn(t,t.getTime()-r1(t)-i)}}class FZ extends en{constructor(){super(...arguments);xe(this,"priority",10);xe(this,"incompatibleTokens",["t","T","X"])}parse(t,r){switch(r){case"x":return Es(As.basicOptionalMinutes,t);case"xx":return Es(As.basic,t);case"xxxx":return Es(As.basicOptionalSeconds,t);case"xxxxx":return Es(As.extendedOptionalSeconds,t);case"xxx":default:return Es(As.extended,t)}}set(t,r,i){return r.timestampIsSet?t:Fn(t,t.getTime()-r1(t)-i)}}class VZ extends en{constructor(){super(...arguments);xe(this,"priority",40);xe(this,"incompatibleTokens","*")}parse(t){return PP(t)}set(t,r,i){return[Fn(t,i*1e3),{timestampIsSet:!0}]}}class jZ extends en{constructor(){super(...arguments);xe(this,"priority",20);xe(this,"incompatibleTokens","*")}parse(t){return PP(t)}set(t,r,i){return[Fn(t,i),{timestampIsSet:!0}]}}const UZ={G:new iZ,y:new aZ,Y:new sZ,R:new oZ,u:new lZ,Q:new cZ,q:new uZ,M:new dZ,L:new fZ,w:new pZ,I:new mZ,d:new xZ,D:new wZ,E:new bZ,e:new _Z,c:new AZ,i:new CZ,a:new TZ,b:new IZ,B:new DZ,h:new RZ,H:new MZ,K:new OZ,k:new PZ,m:new kZ,s:new NZ,S:new LZ,X:new BZ,x:new FZ,t:new VZ,T:new jZ},HZ=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,zZ=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,$Z=/^'([^]*?)'?$/,GZ=/''/g,WZ=/\S/,YZ=/[a-zA-Z]/;function qZ(n,e,t,r){var A,E,C,T,D,k,B,O;const i=()=>Fn((r==null?void 0:r.in)||t,NaN),a=ZQ(),s=(r==null?void 0:r.locale)??a.locale??M_,o=(r==null?void 0:r.firstWeekContainsDate)??((E=(A=r==null?void 0:r.locale)==null?void 0:A.options)==null?void 0:E.firstWeekContainsDate)??a.firstWeekContainsDate??((T=(C=a.locale)==null?void 0:C.options)==null?void 0:T.firstWeekContainsDate)??1,c=(r==null?void 0:r.weekStartsOn)??((k=(D=r==null?void 0:r.locale)==null?void 0:D.options)==null?void 0:k.weekStartsOn)??a.weekStartsOn??((O=(B=a.locale)==null?void 0:B.options)==null?void 0:O.weekStartsOn)??0;if(!e)return n?i():nt(t,r==null?void 0:r.in);const d={firstWeekContainsDate:o,weekStartsOn:c,locale:s},f=[new rZ(r==null?void 0:r.in,t)],p=e.match(zZ).map(I=>{const R=I[0];if(R in i1){const F=i1[R];return F(I,s.formatLong)}return I}).join("").match(HZ),g=[];for(let I of p){!(r!=null&&r.useAdditionalWeekYearTokens)&&DP(I)&&Ow(I,e,n),!(r!=null&&r.useAdditionalDayOfYearTokens)&&IP(I)&&Ow(I,e,n);const R=I[0],F=UZ[R];if(F){const{incompatibleTokens:N}=F;if(Array.isArray(N)){const V=g.find(q=>N.includes(q.token)||q.token===R);if(V)throw new RangeError(`The format string mustn't contain \`${V.fullToken}\` and \`${I}\` at the same time`)}else if(F.incompatibleTokens==="*"&&g.length>0)throw new RangeError(`The format string mustn't contain \`${I}\` and any other token at the same time`);g.push({token:R,fullToken:I});const P=F.run(n,I,s.match,d);if(!P)return i();f.push(P.setter),n=P.rest}else{if(R.match(YZ))throw new RangeError("Format string contains an unescaped latin alphabet character `"+R+"`");if(I==="''"?I="'":R==="'"&&(I=XZ(I)),n.indexOf(I)===0)n=n.slice(I.length);else return i()}}if(n.length>0&&WZ.test(n))return i();const m=f.map(I=>I.priority).sort((I,R)=>R-I).filter((I,R,F)=>F.indexOf(I)===R).map(I=>f.filter(R=>R.priority===I).sort((R,F)=>F.subPriority-R.subPriority)).map(I=>I[0]);let x=nt(t,r==null?void 0:r.in);if(isNaN(+x))return i();const b={};for(const I of m){if(!I.validate(x,d))return i();const R=I.set(x,b,d);Array.isArray(R)?(x=R[0],Object.assign(b,R[1])):x=R}return x}function XZ(n){return n.match($Z)[1].replace(GZ,"'")}function KZ(n,e,t){const r=nt(n,t==null?void 0:t.in);return r.setDate(e),r}function QZ(n,e,t){const r=nt(n,t==null?void 0:t.in);return r.setHours(e),r}function ZZ(n,e,t){const r=nt(n,t==null?void 0:t.in);return r.setMinutes(e),r}function JZ(n,e,t){const r=nt(n,t==null?void 0:t.in),i=r.getFullYear(),a=r.getDate(),s=Fn(n,0);s.setFullYear(i,e,15),s.setHours(0,0,0,0);const o=MP(s);return r.setMonth(e,Math.min(a,o)),r}function eJ(n,e,t){const r=nt(n,t==null?void 0:t.in);return r.setSeconds(e),r}function tJ(n,e,t){const r=nt(n,t==null?void 0:t.in);return r.setMilliseconds(e),r}function nJ(n,e,t){const r=nt(n,t==null?void 0:t.in);return isNaN(+r)?Fn(n,NaN):(r.setFullYear(e),r)}function rJ(n,e){const t=nt(n,e==null?void 0:e.in);return t.setDate(1),t.setHours(0,0,0,0),t}function iJ(n,e){const t=nt(n,e==null?void 0:e.in),r=t.getMonth();return t.setFullYear(t.getFullYear(),r+1,0),t.setHours(23,59,59,999),t}function aJ(n,e,t){const r=+nt(n,t==null?void 0:t.in),[i,a]=[+nt(e.start,t==null?void 0:t.in),+nt(e.end,t==null?void 0:t.in)].sort((s,o)=>s-o);return r>=i&&r<=a}const sJ={y:{sectionType:"year",contentType:"digit",maxLength:4},yy:"year",yyy:{sectionType:"year",contentType:"digit",maxLength:4},yyyy:"year",M:{sectionType:"month",contentType:"digit",maxLength:2},MM:"month",MMMM:{sectionType:"month",contentType:"letter"},MMM:{sectionType:"month",contentType:"letter"},L:{sectionType:"month",contentType:"digit",maxLength:2},LL:"month",LLL:{sectionType:"month",contentType:"letter"},LLLL:{sectionType:"month",contentType:"letter"},d:{sectionType:"day",contentType:"digit",maxLength:2},dd:"day",do:{sectionType:"day",contentType:"digit-with-letter"},E:{sectionType:"weekDay",contentType:"letter"},EE:{sectionType:"weekDay",contentType:"letter"},EEE:{sectionType:"weekDay",contentType:"letter"},EEEE:{sectionType:"weekDay",contentType:"letter"},EEEEE:{sectionType:"weekDay",contentType:"letter"},i:{sectionType:"weekDay",contentType:"digit",maxLength:1},ii:"weekDay",iii:{sectionType:"weekDay",contentType:"letter"},iiii:{sectionType:"weekDay",contentType:"letter"},e:{sectionType:"weekDay",contentType:"digit",maxLength:1},ee:"weekDay",eee:{sectionType:"weekDay",contentType:"letter"},eeee:{sectionType:"weekDay",contentType:"letter"},eeeee:{sectionType:"weekDay",contentType:"letter"},eeeeee:{sectionType:"weekDay",contentType:"letter"},c:{sectionType:"weekDay",contentType:"digit",maxLength:1},cc:"weekDay",ccc:{sectionType:"weekDay",contentType:"letter"},cccc:{sectionType:"weekDay",contentType:"letter"},ccccc:{sectionType:"weekDay",contentType:"letter"},cccccc:{sectionType:"weekDay",contentType:"letter"},a:"meridiem",aa:"meridiem",aaa:"meridiem",H:{sectionType:"hours",contentType:"digit",maxLength:2},HH:"hours",h:{sectionType:"hours",contentType:"digit",maxLength:2},hh:"hours",m:{sectionType:"minutes",contentType:"digit",maxLength:2},mm:"minutes",s:{sectionType:"seconds",contentType:"digit",maxLength:2},ss:"seconds"},oJ={year:"yyyy",month:"LLLL",monthShort:"MMM",dayOfMonth:"d",dayOfMonthFull:"do",weekday:"EEEE",weekdayShort:"EEEEEE",hours24h:"HH",hours12h:"hh",meridiem:"aa",minutes:"mm",seconds:"ss",fullDate:"PP",keyboardDate:"P",shortDate:"MMM d",normalDate:"d MMMM",normalDateWithWeekday:"EEE, MMM d",fullTime12h:"hh:mm aa",fullTime24h:"HH:mm",keyboardDateTime12h:"P hh:mm aa",keyboardDateTime24h:"P HH:mm"};class lJ{constructor(e){xe(this,"isMUIAdapter",!0);xe(this,"isTimezoneCompatible",!1);xe(this,"formatTokenMap",sJ);xe(this,"escapedCharacters",{start:"'",end:"'"});xe(this,"date",e=>typeof e>"u"?new Date:e===null?null:new Date(e));xe(this,"getInvalidDate",()=>new Date("Invalid Date"));xe(this,"getTimezone",()=>"default");xe(this,"setTimezone",e=>e);xe(this,"toJsDate",e=>e);xe(this,"getCurrentLocaleCode",()=>this.locale.code);xe(this,"is12HourCycleInCurrentLocale",()=>/a/.test(this.locale.formatLong.time({width:"short"})));xe(this,"expandFormat",e=>{const t=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g;return e.match(t).map(r=>{const i=r[0];if(i==="p"||i==="P"){const a=this.longFormatters[i];return a(r,this.locale.formatLong)}return r}).join("")});xe(this,"formatNumber",e=>e);xe(this,"getDayOfWeek",e=>e.getDay()+1);const{locale:t,formats:r,longFormatters:i,lib:a}=e;this.locale=t,this.formats=H({},oJ,r),this.longFormatters=i,this.lib=a||"date-fns"}}class cJ extends lJ{constructor({locale:t,formats:r}={}){super({locale:t??M_,formats:r,longFormatters:i1});xe(this,"parse",(t,r)=>t===""?null:qZ(t,r,new Date,{locale:this.locale}));xe(this,"isValid",t=>t==null?!1:RP(t));xe(this,"format",(t,r)=>this.formatByString(t,this.formats[r]));xe(this,"formatByString",(t,r)=>FQ(t,r,{locale:this.locale}));xe(this,"isEqual",(t,r)=>t===null&&r===null?!0:t===null||r===null?!1:YQ(t,r));xe(this,"isSameYear",(t,r)=>XQ(t,r));xe(this,"isSameMonth",(t,r)=>KQ(t,r));xe(this,"isSameDay",(t,r)=>qQ(t,r));xe(this,"isSameHour",(t,r)=>QQ(t,r));xe(this,"isAfter",(t,r)=>s2(t,r));xe(this,"isAfterYear",(t,r)=>s2(t,OD(r)));xe(this,"isAfterDay",(t,r)=>s2(t,MD(r)));xe(this,"isBefore",(t,r)=>o2(t,r));xe(this,"isBeforeYear",(t,r)=>o2(t,this.startOfYear(r)));xe(this,"isBeforeDay",(t,r)=>o2(t,this.startOfDay(r)));xe(this,"isWithinRange",(t,[r,i])=>aJ(t,{start:r,end:i}));xe(this,"startOfYear",t=>EP(t));xe(this,"startOfMonth",t=>rJ(t));xe(this,"startOfWeek",t=>Co(t,{locale:this.locale}));xe(this,"startOfDay",t=>I0(t));xe(this,"endOfYear",t=>OD(t));xe(this,"endOfMonth",t=>iJ(t));xe(this,"endOfWeek",t=>GK(t,{locale:this.locale}));xe(this,"endOfDay",t=>MD(t));xe(this,"addYears",(t,r)=>zK(t,r));xe(this,"addMonths",(t,r)=>_P(t,r));xe(this,"addWeeks",(t,r)=>HK(t,r));xe(this,"addDays",(t,r)=>gy(t,r));xe(this,"addHours",(t,r)=>UK(t,r));xe(this,"addMinutes",(t,r)=>jK(t,r));xe(this,"addSeconds",(t,r)=>VK(t,r));xe(this,"getYear",t=>WQ(t));xe(this,"getMonth",t=>zQ(t));xe(this,"getDate",t=>jQ(t));xe(this,"getHours",t=>UQ(t));xe(this,"getMinutes",t=>HQ(t));xe(this,"getSeconds",t=>$Q(t));xe(this,"getMilliseconds",t=>GQ(t));xe(this,"setYear",(t,r)=>nJ(t,r));xe(this,"setMonth",(t,r)=>JZ(t,r));xe(this,"setDate",(t,r)=>KZ(t,r));xe(this,"setHours",(t,r)=>QZ(t,r));xe(this,"setMinutes",(t,r)=>ZZ(t,r));xe(this,"setSeconds",(t,r)=>eJ(t,r));xe(this,"setMilliseconds",(t,r)=>tJ(t,r));xe(this,"getDaysInMonth",t=>MP(t));xe(this,"getWeekArray",t=>{const r=this.startOfWeek(this.startOfMonth(t)),i=this.endOfWeek(this.endOfMonth(t));let a=0,s=r;const o=[];for(;this.isBefore(s,i);){const c=Math.floor(a/7);o[c]=o[c]||[],o[c].push(s),s=this.addDays(s,1),a+=1}return o});xe(this,"getWeekNumber",t=>P_(t,{locale:this.locale}));xe(this,"getYearRange",([t,r])=>{const i=this.startOfYear(t),a=this.endOfYear(r),s=[];let o=i;for(;this.isBefore(o,a);)s.push(o),o=this.addYears(o,1);return s})}}const uJ={lessThanXSeconds:{one:"1",other:"{{count}}",oneWithSuffix:"1",otherWithSuffix:"{{count}}"},xSeconds:{one:"1",other:"{{count}}"},halfAMinute:"30",lessThanXMinutes:{one:"1",other:"{{count}}",oneWithSuffix:"1",otherWithSuffix:"{{count}}"},xMinutes:{one:"1",other:"{{count}}"},aboutXHours:{one:"1",other:"{{count}}"},xHours:{one:"1",other:"{{count}}"},xDays:{one:"1",other:"{{count}}"},aboutXWeeks:{one:"1",other:"{{count}}"},xWeeks:{one:"1",other:"{{count}}"},aboutXMonths:{one:"1",other:"{{count}}"},xMonths:{one:"1",other:"{{count}}"},aboutXYears:{one:"1",other:"{{count}}"},xYears:{one:"1",other:"{{count}}"},overXYears:{one:"1",other:"{{count}}"},almostXYears:{one:"1",other:"{{count}}"}},dJ=(n,e,t)=>{t=t||{};let r;const i=uJ[n];return typeof i=="string"?r=i:e===1?t.addSuffix&&i.oneWithSuffix?r=i.oneWithSuffix:r=i.one:t.addSuffix&&i.otherWithSuffix?r=i.otherWithSuffix.replace("{{count}}",String(e)):r=i.other.replace("{{count}}",String(e)),t.addSuffix?t.comparison&&t.comparison>0?r+"":r+"":r},fJ={full:"yMdEEEE",long:"yMd",medium:"y/MM/dd",short:"y/MM/dd"},hJ={full:"Hmmss zzzz",long:"H:mm:ss z",medium:"H:mm:ss",short:"H:mm"},pJ={full:"{{date}} {{time}}",long:"{{date}} {{time}}",medium:"{{date}} {{time}}",short:"{{date}} {{time}}"},gJ={date:Fd({formats:fJ,defaultWidth:"full"}),time:Fd({formats:hJ,defaultWidth:"full"}),dateTime:Fd({formats:pJ,defaultWidth:"full"})},mJ={lastWeek:"eeeep",yesterday:"p",today:"p",tomorrow:"p",nextWeek:"eeeep",other:"P"},yJ=(n,e,t,r)=>mJ[n],vJ={narrow:["BC","AC"],abbreviated:["",""],wide:["",""]},xJ={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1","2","3","4"]},wJ={narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],abbreviated:["1","2","3","4","5","6","7","8","9","10","11","12"],wide:["1","2","3","4","5","6","7","8","9","10","11","12"]},bJ={narrow:["","","","","","",""],short:["","","","","","",""],abbreviated:["","","","","","",""],wide:["","","","","","",""]},_J={narrow:{am:"",pm:"",midnight:"",noon:"",morning:"",afternoon:"",evening:"",night:""},abbreviated:{am:"",pm:"",midnight:"",noon:"",morning:"",afternoon:"",evening:"",night:""},wide:{am:"",pm:"",midnight:"",noon:"",morning:"",afternoon:"",evening:"",night:""}},AJ={narrow:{am:"",pm:"",midnight:"",noon:"",morning:"",afternoon:"",evening:"",night:""},abbreviated:{am:"",pm:"",midnight:"",noon:"",morning:"",afternoon:"",evening:"",night:""},wide:{am:"",pm:"",midnight:"",noon:"",morning:"",afternoon:"",evening:"",night:""}},EJ=(n,e)=>{const t=Number(n);switch(String(e==null?void 0:e.unit)){case"year":return`${t}`;case"quarter":return`${t}`;case"month":return`${t}`;case"week":return`${t}`;case"date":return`${t}`;case"hour":return`${t}`;case"minute":return`${t}`;case"second":return`${t}`;default:return`${t}`}},SJ={ordinalNumber:EJ,era:bs({values:vJ,defaultWidth:"wide"}),quarter:bs({values:xJ,defaultWidth:"wide",argumentCallback:n=>Number(n)-1}),month:bs({values:wJ,defaultWidth:"wide"}),day:bs({values:bJ,defaultWidth:"wide"}),dayPeriod:bs({values:_J,defaultWidth:"wide",formattingValues:AJ,defaultFormattingWidth:"wide"})},CJ=/^?\d+(|||||||)?/i,TJ=/\d+/i,IJ={narrow:/^(B\.?C\.?|A\.?D\.?)/i,abbreviated:/^([]|)/i,wide:/^([]|)/i},DJ={narrow:[/^B/i,/^A/i],any:[/^()/i,/^(|)/i]},RJ={narrow:/^[1234]/i,abbreviated:/^Q[1234]/i,wide:/^[1234]/i},MJ={any:[/(1||)/i,/(2||)/i,/(3||)/i,/(4||)/i]},OJ={narrow:/^([123456789]|1[012])/,abbreviated:/^([123456789]|1[012])/i,wide:/^([123456789]|1[012])/i},PJ={any:[/^1\D/,/^2/,/^3/,/^4/,/^5/,/^6/,/^7/,/^8/,/^9/,/^10/,/^11/,/^12/]},kJ={narrow:/^[]/,short:/^[]/,abbreviated:/^[]/,wide:/^[]/},NJ={any:[/^/,/^/,/^/,/^/,/^/,/^/,/^/]},LJ={any:/^(AM|PM|||||||)/i},BJ={any:{am:/^(A|)/i,pm:/^(P|)/i,midnight:/^|/i,noon:/^/i,morning:/^/i,afternoon:/^/i,evening:/^/i,night:/^/i}},FJ={ordinalNumber:AP({matchPattern:CJ,parsePattern:TJ,valueCallback:function(n){return parseInt(n,10)}}),era:_s({matchPatterns:IJ,defaultMatchWidth:"wide",parsePatterns:DJ,defaultParseWidth:"any"}),quarter:_s({matchPatterns:RJ,defaultMatchWidth:"wide",parsePatterns:MJ,defaultParseWidth:"any",valueCallback:n=>n+1}),month:_s({matchPatterns:OJ,defaultMatchWidth:"wide",parsePatterns:PJ,defaultParseWidth:"any"}),day:_s({matchPatterns:kJ,defaultMatchWidth:"wide",parsePatterns:NJ,defaultParseWidth:"any"}),dayPeriod:_s({matchPatterns:LJ,defaultMatchWidth:"any",parsePatterns:BJ,defaultParseWidth:"any"})},VJ={code:"ja",formatDistance:dJ,formatLong:gJ,formatRelative:yJ,localize:SJ,match:FJ,options:{weekStartsOn:0,firstWeekContainsDate:1}};function jJ(){return{validate:M.useCallback((e,t,r,i=[])=>{if(!e)throw new Error("");if(e>new Date)throw new Error("");if(!Xm(t))throw new Error("");if((i||[]).some(o=>{var d;const c=(d=o==null?void 0:o.changedAt)!=null&&d.toDate?o.changedAt.toDate():o!=null&&o.changedAt?new Date(o.changedAt):null;return c?Math.abs(c-e)<6e4:!1}))throw new Error("")},[])}}const UJ=({open:n,onClose:e,onAdd:t,bookId:r,existingHistory:i=[],currentBookStatus:a=null})=>{const[s,o]=M.useState(new Date),[c,d]=M.useState(dt.READING),[f,p]=M.useState(""),[g,m]=M.useState(!1),[x,b]=M.useState(""),{validate:A}=jJ(),E=()=>Object.values(dt).filter(D=>D!==c);yi.useEffect(()=>{f===c&&p("")},[c,f]),yi.useEffect(()=>{n&&p(a&&a!==c?a:"")},[n,a,c]);const C=async()=>{b(""),m(!0);try{A(s,c,f,i),await t(s,c,f,i),T()}catch(D){b(D.message)}finally{m(!1)}},T=()=>{o(new Date),d(dt.READING),p(""),b(""),m(!1),e()};return v.jsx(cO,{dateAdapter:cJ,adapterLocale:VJ,children:v.jsxs(zi,{open:n,onClose:T,maxWidth:"sm",fullWidth:!0,children:[v.jsx(aa,{children:" "}),v.jsx($i,{children:v.jsxs(ne,{sx:{display:"flex",flexDirection:"column",gap:2,mt:1},children:[v.jsx(LK,{label:"",value:s,onChange:D=>o(D),maxDateTime:new Date,slotProps:{textField:{fullWidth:!0}}}),v.jsxs(Mi,{fullWidth:!0,children:[v.jsx(Ca,{children:""}),v.jsx(Ya,{value:c,onChange:D=>d(D.target.value),label:"",children:Object.entries(E0).map(([D,k])=>v.jsx(Zt,{value:D,children:k},D))})]}),v.jsxs(Mi,{fullWidth:!0,children:[v.jsx(Ca,{children:""}),v.jsxs(Ya,{value:f,onChange:D=>p(D.target.value),label:"",children:[v.jsx(Zt,{value:"",children:v.jsx("em",{children:""})}),E().map(D=>v.jsx(Zt,{value:D,children:E0[D]},D))]})]}),x&&v.jsx(te,{color:"error",variant:"body2",children:x})]})}),v.jsxs(Gi,{children:[v.jsx($e,{onClick:T,disabled:g,children:""}),v.jsx($e,{onClick:C,variant:"contained",disabled:g,children:g?"...":""})]})]})})},HJ=({history:n=[],loading:e=!1,error:t=null,importantDates:r={},readingDuration:i=null,showAddButton:a=!1,bookId:s=null,onAddHistory:o=null,currentBookStatus:c=null})=>{const[d,f]=M.useState(!1),p=async(b,A,E,C)=>{o&&await o(b,A,E,C)},g=b=>{switch(b){case dt.TSUNDOKU:return v.jsx(BC,{});case dt.READING:return v.jsx(YN,{});case dt.RE_READING:return v.jsx(WN,{});case dt.FINISHED:return v.jsx(GN,{});default:return v.jsx(BC,{})}},m=b=>b?(b.toDate?b.toDate():new Date(b)).toLocaleDateString("ja-JP",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"",x=()=>!r||Object.keys(r).length===0?null:v.jsxs(ne,{sx:{mb:3},children:[v.jsx(te,{variant:"h6",gutterBottom:!0,children:""}),v.jsxs(qn,{sx:{p:2,mb:2},children:[r.readingStartedAt&&v.jsxs(ne,{sx:{mb:1},children:[v.jsx(te,{variant:"body2",color:"text.secondary",children:""}),v.jsx(te,{variant:"body1",children:m(r.readingStartedAt)})]}),r.reReadingStartedAt&&v.jsxs(ne,{sx:{mb:1},children:[v.jsx(te,{variant:"body2",color:"text.secondary",children:""}),v.jsx(te,{variant:"body1",children:m(r.reReadingStartedAt)})]}),r.finishedAt&&v.jsxs(ne,{sx:{mb:1},children:[v.jsx(te,{variant:"body2",color:"text.secondary",children:""}),v.jsx(te,{variant:"body1",children:m(r.finishedAt)})]}),i&&v.jsxs(ne,{children:[v.jsx(te,{variant:"body2",color:"text.secondary",children:""}),v.jsxs(te,{variant:"body1",children:[i,""]})]})]})]});return e?v.jsx(Yl,{variant:"inline",message:"...","data-testid":"status-history-loading"}):t?v.jsx(ne,{sx:{p:2},children:v.jsxs(te,{color:"error",children:[": ",t]})}):v.jsxs(ne,{sx:{p:2},children:[x(),v.jsxs(ne,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[v.jsx(te,{variant:"h6",children:""}),a&&v.jsx($e,{variant:"outlined",size:"small",startIcon:v.jsx(gR,{}),onClick:()=>f(!0),"data-testid":"add-history-button",children:""})]}),(!n||n.length===0)&&v.jsxs(ne,{sx:{textAlign:"center",py:4},children:[v.jsx(te,{variant:"body1",color:"text.secondary",gutterBottom:!0,children:""}),v.jsx(te,{variant:"body2",color:"text.secondary",children:""})]}),v.jsx(Qw,{children:(n||[]).map((b,A)=>v.jsxs(Zw,{sx:{flexDirection:"column",alignItems:"flex-start"},children:[v.jsxs(ne,{sx:{display:"flex",alignItems:"center",gap:1,mb:1,width:"100%"},children:[v.jsx(lm,{sx:{minWidth:"auto"},children:v.jsx($N,{sx:{bgcolor:xs(b.status)==="primary"?"primary.main":xs(b.status)==="secondary"?"secondary.main":xs(b.status)==="success"?"success.main":"default",width:32,height:32},children:g(b.status)})}),v.jsxs(ne,{sx:{flexGrow:1},children:[v.jsxs(ne,{sx:{display:"flex",alignItems:"center",gap:1,mb:1},children:[v.jsx(dn,{label:Vs(b.status),color:xs(b.status),size:"small"}),b.previousStatus&&v.jsxs(v.Fragment,{children:[v.jsx(te,{variant:"body2",color:"text.secondary",children:""}),v.jsx(dn,{label:Vs(b.previousStatus),color:xs(b.previousStatus),size:"small",variant:"outlined"})]})]}),v.jsx(te,{variant:"body2",color:"text.secondary",children:m(b.changedAt)}),b.notes&&v.jsx(te,{variant:"body2",color:"text.secondary",sx:{mt:1},children:b.notes})]})]}),A<n.length-1&&v.jsx(Sl,{sx:{width:"100%",mt:1}})]},b.id))}),a&&v.jsx(UJ,{open:d,onClose:()=>f(!1),onAdd:p,bookId:s,existingHistory:n,currentBookStatus:c})]})},zJ=({bookId:n})=>{const{latestHistory:e,loading:t,error:r}=p_(n);if(t)return v.jsxs(qn,{sx:{p:2,mb:2},children:[v.jsx(te,{variant:"h6",gutterBottom:!0,children:" "}),v.jsx(Uh,{variant:"rectangular",height:40})]});if(r)return v.jsxs(qn,{sx:{p:2,mb:2},children:[v.jsx(te,{variant:"h6",gutterBottom:!0,children:" "}),v.jsx(te,{color:"error",children:""})]});if(!e)return v.jsxs(qn,{sx:{p:2,mb:2},children:[v.jsx(te,{variant:"h6",gutterBottom:!0,children:" "}),v.jsx(te,{color:"text.secondary",children:""})]});const i=a=>a?(a.toDate?a.toDate():new Date(a)).toLocaleDateString("ja-JP",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}):"";return v.jsxs(qn,{sx:{p:2,mb:2},children:[v.jsx(te,{variant:"h6",gutterBottom:!0,children:" "}),v.jsxs(ne,{sx:{display:"flex",alignItems:"center",gap:1,flexWrap:"wrap"},children:[v.jsx(te,{variant:"body2",color:"text.secondary",children:i(e.changedAt)}),v.jsx(dn,{label:Vs(e.status),color:xs(e.status),size:"small"}),e.previousStatus&&v.jsxs(v.Fragment,{children:[v.jsx(te,{variant:"body2",color:"text.secondary",children:""}),v.jsx(dn,{label:Vs(e.previousStatus),color:xs(e.previousStatus),size:"small",variant:"outlined"})]})]})]})},$J=n=>{const{user:e}=Qn(),t=M.useContext(Wr),r=(t==null?void 0:t.setGlobalError)||(()=>{}),[i,a]=M.useState(null),[s,o]=M.useState(!0),[c,d]=M.useState(null),f=M.useCallback(async()=>{if(!e||!n){o(!1);return}try{o(!0),d(null);const b=ji(wt,"books",n),A=await Tj(b);A.exists()&&A.data().userId===e.uid?a({id:A.id,...A.data()}):(console.error("No such document or access denied!"),r(""),a(null),d(""))}catch(b){console.error("Error fetching document:",b),r(""),d("")}finally{o(!1)}},[n,e]),p=M.useCallback(async b=>{if(!e||!n)throw new Error("ID");try{const A=ji(wt,"books",n);return await ry(A,{...b,updatedAt:Ir()}),a(E=>({...E,...b})),!0}catch(A){throw console.error("Error updating book:",A),r(""),A}},[n,e]),g=M.useCallback(async b=>await p({status:b}),[p]),m=M.useCallback(async b=>await p({tags:b}),[p]),x=M.useCallback(async()=>{if(!e||!n)throw new Error("ID");try{const b=$n(wt,"books",n,"memos");if(!(await Un(b)).empty){const C="";throw r(C),new Error(C)}const E=ji(wt,"books",n);return await UM(E),a(null),!0}catch(b){throw console.error("Error deleting book:",b),b.message.includes("")||r(""),b}},[n,e,r]);return M.useEffect(()=>{f()},[f]),{book:i,loading:s,error:c,fetchBook:f,updateBook:p,updateBookStatus:g,updateBookTags:m,deleteBook:x}},qg=n=>n&&typeof n.toDate=="function"?n.toDate():n instanceof Date?n:new Date(n),GJ=(n,e,t)=>({handleAddManualHistory:M.useCallback(async(i,a,s,o=[])=>{try{await e(i,a,s),vt.status.info("Manual history added successfully");const c=[...o],d={status:a,previousStatus:s,changedAt:i};c.push(d),c.sort((p,g)=>qg(g.changedAt)-qg(p.changedAt));const f=c.length>0&&qg(c[0].changedAt).getTime()===qg(i).getTime();if(!n)return;f&&a!==n.status&&await t(a)}catch(c){throw vt.status.error("Failed to add manual history",c),c}},[n,e,t])}),LP=()=>{const n=Hl(),e=iu(),t=M.useCallback(()=>{const{returnPath:a,searchState:s}=e.state||{};a&&s?n(a,{state:{restoreSearch:s}}):n(-1)},[n,e.state]),r=M.useCallback(()=>{n(1)},[n]),i=M.useCallback(a=>{console.log("Restoring search state:",a)},[]);return{handleBack:t,handleForward:r,restoreSearchState:i,location:e}},WJ=()=>{const{id:n}=h5();iu();const e=Hl(),{book:t,loading:r,error:i,updateBook:a,updateBookStatus:s,updateBookTags:o,deleteBook:c}=$J(n),{history:d,loading:f,error:p,addManualStatusHistory:g,getImportantDates:m,getReadingDuration:x}=p_(n),{handleAddManualHistory:b}=GJ(t,g,s);LP();const[A,E]=M.useState(0),[C,T]=M.useState(!1),[D,k]=M.useState(!1),[B,O]=M.useState(!1),[I,R]=M.useState(0),F=ue=>{s(ue)},N=ue=>{o(ue)},P=()=>{E(ue=>ue+1),T(!1)},V=()=>{E(ue=>ue+1)},q=()=>{T(!0)},X=()=>{T(!1)},G=()=>{k(!0)},W=()=>{k(!1)},K=async ue=>{await a(ue)},Z=()=>{O(!0)},fe=()=>{O(!1)},ge=async()=>{try{await c(),e("/")}catch(ue){console.error(":",ue)}finally{O(!1)}},ve=(ue,Se)=>{R(Se)},be=()=>{switch(I){case 0:return v.jsxs(v.Fragment,{children:[v.jsx(te,{variant:"h5",gutterBottom:!0,sx:{mb:{xs:1,sm:2}},"data-testid":"memo-list-title",children:""}),v.jsx(rG,{bookId:t.id,onMemoUpdated:V},A)]});case 1:return v.jsx(HJ,{history:d,loading:f,error:p,importantDates:m(),readingDuration:x(),showAddButton:!0,bookId:n,onAddHistory:b,currentBookStatus:t==null?void 0:t.status});default:return null}};if(r)return v.jsx(Yl,{variant:"fullPage",message:"...","data-testid":"book-detail-loading"});if(i)return console.error(" BookDetail error:",i),v.jsxs("div",{"data-testid":"book-detail-error",children:[": ",i]});if(!t)return console.warn(" BookDetail: Book not found for ID:",n),v.jsx("div",{"data-testid":"book-detail-not-found",children:""});const Pe={position:"relative",overflow:"visible",backgroundColor:"rgba(255, 255, 255, 0.75)",backdropFilter:"blur(20px) saturate(180%)",border:"2px solid rgba(139, 69, 19, 0.2)",borderRadius:3,boxShadow:`
      0 8px 32px rgba(0, 0, 0, 0.12),
      0 2px 8px rgba(0, 0, 0, 0.08),
      inset 0 1px 0 rgba(255, 255, 255, 0.5)
    `,"&::before":{content:'""',position:"absolute",top:8,left:8,right:8,bottom:8,border:"1px solid rgba(139, 69, 19, 0.1)",borderRadius:2,pointerEvents:"none",zIndex:0},"&::after":{content:'""',position:"absolute",top:0,left:"50%",width:1,height:"100%",background:"linear-gradient(to bottom, transparent, rgba(139, 69, 19, 0.1), transparent)",pointerEvents:"none",zIndex:0}};return v.jsxs(ne,{sx:{maxWidth:800,mx:"auto",mt:{xs:2,sm:4},pb:"80px",px:{xs:2,sm:0}},"data-testid":"book-detail",children:[v.jsxs(qn,{sx:Pe,children:[v.jsx(Ss,{position:"top-left",size:20}),v.jsx(Ss,{position:"top-right",size:20}),v.jsxs(ne,{sx:{position:"relative",zIndex:1,p:{xs:2,sm:3}},children:[v.jsx(pG,{book:t,bookId:n,onStatusChange:F,onEdit:G}),v.jsx(zJ,{bookId:n}),v.jsx(yG,{book:t,bookId:n,onTagsChange:N}),v.jsx(ne,{sx:{textAlign:"left",mt:2,mb:2},children:v.jsxs(Ls,{direction:"row",spacing:1,children:[v.jsx($e,{variant:"outlined",color:"primary",size:"small",startIcon:v.jsx(Sm,{}),onClick:G,"data-testid":"book-edit-button",children:""}),v.jsx($e,{variant:"outlined",color:"error",size:"small",startIcon:v.jsx(Em,{}),onClick:Z,"data-testid":"book-delete-button",children:""})]})}),v.jsx(Sl,{sx:{my:{xs:1,sm:2}}}),v.jsx(ne,{sx:{borderBottom:1,borderColor:"divider",mb:2},children:v.jsxs(D1,{value:I,onChange:ve,"aria-label":"book detail tabs","data-testid":"book-detail-tabs",children:[v.jsx(Ea,{label:"","data-testid":"memo-list-tab"}),v.jsx(Ea,{label:"","data-testid":"status-history-tab"})]})}),be()]})]}),v.jsx(qN,{color:"primary","aria-label":"",sx:{position:"fixed",bottom:{xs:72,sm:16},right:{xs:16,sm:16}},onClick:q,"data-testid":"memo-add-fab",children:v.jsx(gR,{})}),v.jsx(zi,{open:C,onClose:X,maxWidth:"sm",fullWidth:!0,"data-testid":"memo-add-dialog",children:v.jsx(oG,{bookId:t.id,bookTags:t.tags||[],onMemoAdded:P,onClose:X})}),v.jsx(mG,{open:D,book:t,onClose:W,onSave:K}),v.jsxs(zi,{open:B,onClose:fe,"data-testid":"book-delete-dialog",children:[v.jsx(aa,{"data-testid":"book-delete-confirm-title",children:""}),v.jsxs($i,{children:[v.jsx(te,{children:""}),v.jsx(te,{variant:"body2",color:"text.secondary",sx:{mt:1},children:""})]}),v.jsxs(Gi,{children:[v.jsx($e,{onClick:fe,"data-testid":"book-delete-cancel-button",children:""}),v.jsx($e,{onClick:ge,color:"error",variant:"contained","data-testid":"book-delete-confirm-button",children:""})]})]})]})};function l2({children:n,value:e,index:t,...r}){return v.jsx("div",{role:"tabpanel",hidden:e!==t,id:`tabpanel-${t}`,"aria-labelledby":`tab-${t}`,...r,children:e===t&&v.jsx(ne,{sx:{p:3},children:n})})}const YJ=n=>{const[e,t]=M.useState({}),[r,i]=M.useState(!1),[a,s]=M.useState(null),o=M.useCallback(async()=>{if(n!=null&&n.uid)try{i(!0),s(null),console.log("useTagStats: , userId:",n.uid);const[p,g]=await Promise.all([Un(Ln($n(wt,"books"),vn("userId","==",n.uid))),Un(Ln(Al(wt,"memos"),vn("userId","==",n.uid)))]);console.log("useTagStats: , :",p.size,":",g.size);const m={};p.forEach(x=>{const b=x.data();console.log("useTagStats: :",{id:x.id,title:b.title,tags:b.tags}),b.tags&&Array.isArray(b.tags)&&b.tags.forEach(A=>{var C,T;m[A]||(m[A]={bookCount:0,memoCount:0,lastUsed:null}),m[A].bookCount++;const E=((T=(C=b.updatedAt)==null?void 0:C.toDate)==null?void 0:T.call(C))||new Date;(!m[A].lastUsed||E>m[A].lastUsed)&&(m[A].lastUsed=E)})}),console.log("useTagStats: "),g.forEach(x=>{var A,E;const b=x.data();console.log("useTagStats: :",{id:x.id,bookId:(A=x.ref.parent.parent)==null?void 0:A.id,tags:b.tags,text:((E=b.text)==null?void 0:E.substring(0,30))+"..."}),b.tags&&Array.isArray(b.tags)&&b.tags.forEach(C=>{var D,k;m[C]||(m[C]={bookCount:0,memoCount:0,lastUsed:null}),m[C].memoCount++;const T=((k=(D=b.updatedAt)==null?void 0:D.toDate)==null?void 0:k.call(D))||new Date;(!m[C].lastUsed||T>m[C].lastUsed)&&(m[C].lastUsed=T)})}),console.log("useTagStats: , :",m),t(m),console.log("useTagStats: ")}catch(p){console.error(":",p),s(p)}finally{i(!1)}},[n==null?void 0:n.uid]),c=M.useCallback((p="count",g="desc")=>Object.entries(e).map(([x,b])=>({tag:x,...b,totalCount:b.bookCount+b.memoCount,type:b.bookCount>0&&b.memoCount>0?"both":b.bookCount>0?"book":"memo"})).sort((x,b)=>{let A=0;switch(p){case"count":A=b.totalCount-x.totalCount;break;case"name":A=x.tag.localeCompare(b.tag,"ja");break;case"lastUsed":A=(b.lastUsed||0)-(x.lastUsed||0);break;default:A=b.totalCount-x.totalCount}return g==="asc"?-A:A}),[e]),d=M.useCallback(p=>e[p]||null,[e]),f=M.useCallback(()=>{t({}),s(null)},[]);return M.useEffect(()=>{n!=null&&n.uid?o():f()},[n==null?void 0:n.uid,o,f]),{tagStats:e,loading:r,error:a,fetchTagStats:o,getSortedTagStats:c,getTagStat:d,clearStats:f}};function pl(n){var e,t;if(n==null)return"";try{return(((t=(e=String(n)).normalize)==null?void 0:t.call(e,"NFKC"))??String(n)).trim().replace(/\s+/g," ").toLowerCase()}catch{return String(n).trim().toLowerCase()}}function qJ(){const{user:n}=Qn(),e=M.useContext(Wr),t=(e==null?void 0:e.setGlobalError)||(()=>{}),[r,i]=M.useState(!1),a=async(f,p)=>{for(let m=0;m<f.length;m+=450){const x=f.slice(m,m+450),b=kj(wt);x.forEach(A=>p(b,A)),await b.commit()}},s=M.useCallback(async(f,p)=>{if(!(n!=null&&n.uid))throw new Error("");const g=pl(f),m=pl(p);if(!g||!m)throw new Error("");if(g===m)return{booksUpdated:0,memosUpdated:0};i(!0);try{const x=Ln($n(wt,"books"),vn("userId","==",n.uid)),b=await Un(x),A=[];b.forEach(D=>{const k=D.data(),B=Array.isArray(k.tags)?k.tags:[];if(B.includes(g)){const O=Array.from(new Set(B.map(I=>I===g?m:I)));A.push({ref:D.ref,tags:O})}});const E=Ln(Al(wt,"memos"),vn("userId","==",n.uid)),C=await Un(E),T=[];return C.forEach(D=>{const k=D.data(),B=Array.isArray(k.tags)?k.tags:[];if(B.includes(g)){const O=Array.from(new Set(B.map(I=>I===g?m:I)));T.push({ref:D.ref,tags:O})}}),await a(A,(D,k)=>{D.update(k.ref,{tags:k.tags})}),await a(T,(D,k)=>{D.update(k.ref,{tags:k.tags})}),{booksUpdated:A.length,memosUpdated:T.length}}catch(x){throw console.error(":",x),t(""),x}finally{i(!1)}},[n==null?void 0:n.uid]),o=M.useCallback(async f=>{if(!(n!=null&&n.uid))throw new Error("");const p=pl(f);if(!p)throw new Error("");i(!0);try{const g=Ln($n(wt,"books"),vn("userId","==",n.uid)),m=await Un(g),x=[];m.forEach(C=>{const T=C.data(),D=Array.isArray(T.tags)?T.tags:[];if(D.includes(p)){const k=D.filter(B=>B!==p);x.push({ref:C.ref,tags:k})}});const b=Ln(Al(wt,"memos"),vn("userId","==",n.uid)),A=await Un(b),E=[];return A.forEach(C=>{const T=C.data(),D=Array.isArray(T.tags)?T.tags:[];if(D.includes(p)){const k=D.filter(B=>B!==p);E.push({ref:C.ref,tags:k})}}),await a(x,(C,T)=>{C.update(T.ref,{tags:T.tags})}),await a(E,(C,T)=>{C.update(T.ref,{tags:T.tags})}),{booksUpdated:x.length,memosUpdated:E.length}}catch(g){throw console.error(":",g),t(""),g}finally{i(!1)}},[n==null?void 0:n.uid]),c=M.useCallback(async f=>{if(!(n!=null&&n.uid))throw new Error("");const p=new Set((Array.isArray(f)?f:String(f||"").split(",")).map(g=>pl(g)).filter(g=>!!g));if(p.size===0)throw new Error("");i(!0);try{const g=Ln($n(wt,"books"),vn("userId","==",n.uid)),m=await Un(g),x=[];m.forEach(C=>{const T=C.data(),D=Array.isArray(T.tags)?T.tags:[],k=D.filter(B=>!p.has(pl(B)));k.length!==D.length&&x.push({ref:C.ref,tags:k})});const b=Ln(Al(wt,"memos"),vn("userId","==",n.uid)),A=await Un(b),E=[];return A.forEach(C=>{const T=C.data(),D=Array.isArray(T.tags)?T.tags:[],k=D.filter(B=>!p.has(pl(B)));k.length!==D.length&&E.push({ref:C.ref,tags:k})}),await a(x,(C,T)=>{C.update(T.ref,{tags:T.tags})}),await a(E,(C,T)=>{C.update(T.ref,{tags:T.tags})}),{booksUpdated:x.length,memosUpdated:E.length}}catch(g){throw console.error(":",g),t(""),g}finally{i(!1)}},[n==null?void 0:n.uid]),d=M.useCallback(async(f,p)=>{if(!(n!=null&&n.uid))throw new Error("");const g=pl(p),m=Array.from(new Set(String(f||"").split(",").map(x=>pl(x)).filter(x=>!!x)));if(!g||m.length===0)throw new Error("");if(m.includes(g))throw new Error("");i(!0);try{const x=Ln($n(wt,"books"),vn("userId","==",n.uid)),b=await Un(x),A=[];b.forEach(D=>{const k=D.data(),B=Array.isArray(k.tags)?k.tags:[];if(B.some(I=>m.includes(I))){const I=B.filter(F=>!m.includes(F)),R=Array.from(new Set([...I,g]));R.join("|")!==B.join("|")&&A.push({ref:D.ref,tags:R})}});const E=Ln(Al(wt,"memos"),vn("userId","==",n.uid)),C=await Un(E),T=[];return C.forEach(D=>{const k=D.data(),B=Array.isArray(k.tags)?k.tags:[];if(B.some(I=>m.includes(I))){const I=B.filter(F=>!m.includes(F)),R=Array.from(new Set([...I,g]));R.join("|")!==B.join("|")&&T.push({ref:D.ref,tags:R})}}),await a(A,(D,k)=>{D.update(k.ref,{tags:k.tags})}),await a(T,(D,k)=>{D.update(k.ref,{tags:k.tags})}),{booksUpdated:A.length,memosUpdated:T.length}}catch(x){throw console.error(":",x),t(""),x}finally{i(!1)}},[n==null?void 0:n.uid]);return{loading:r,renameTag:s,deleteTag:o,deleteTags:c,mergeTags:d}}function XJ({open:n,tag:e,onClose:t,onRename:r,onDelete:i,onMerge:a,busy:s=!1}){const[o,c]=M.useState(e||""),[d,f]=M.useState(""),[p,g]=M.useState(""),m=()=>{c(e||""),t==null||t()};return v.jsxs(zi,{open:n,onClose:m,maxWidth:"xs",fullWidth:!0,children:[v.jsx(aa,{children:""}),v.jsxs($i,{children:[v.jsx(te,{variant:"body2",color:"text.secondary",sx:{mb:1},children:""}),v.jsx(ht,{autoFocus:!0,fullWidth:!0,label:"",value:o,onChange:x=>c(x.target.value),disabled:s}),v.jsxs(ne,{sx:{mt:2},children:[v.jsx(te,{variant:"body2",color:"text.secondary",sx:{mb:1},children:""}),v.jsx(ht,{fullWidth:!0,label:"",value:d,onChange:x=>f(x.target.value),disabled:s}),v.jsx(ht,{fullWidth:!0,label:"",value:p,onChange:x=>g(x.target.value),disabled:s,sx:{mt:1}})]})]}),v.jsxs(Gi,{children:[v.jsx($e,{onClick:()=>i==null?void 0:i(e),color:"error",disabled:s,"data-testid":"tag-delete-button",children:""}),v.jsx($e,{onClick:m,disabled:s,children:""}),v.jsx($e,{onClick:()=>r==null?void 0:r(e,o),variant:"contained",disabled:s,"data-testid":"tag-rename-button",children:""}),v.jsx($e,{onClick:()=>a==null?void 0:a(p,d),variant:"outlined",disabled:s,"data-testid":"tag-merge-button",children:""})]})]})}function KJ({open:n,onClose:e,onConfirm:t,busy:r=!1}){const{user:i}=Qn(),{tagOptions:a,fetchTagHistory:s}=js("book",i),{tagOptions:o,fetchTagHistory:c}=js("memo",i),[d,f]=M.useState([]),[p,g]=M.useState("");M.useEffect(()=>{n&&i&&(s(),c())},[n,i,s,c]),M.useEffect(()=>{n||(f([]),g(""))},[n]);const m=M.useMemo(()=>{const x=new Set([...a||[],...o||[]]);return Array.from(x).sort((b,A)=>b.localeCompare(A,"ja"))},[a,o]);return v.jsxs(zi,{open:n,onClose:e,maxWidth:"sm",fullWidth:!0,children:[v.jsx(aa,{children:""}),v.jsxs($i,{children:[v.jsx(te,{variant:"body2",color:"text.secondary",sx:{mb:2},children:""}),v.jsx(Ns,{multiple:!0,freeSolo:!0,options:m,value:d,inputValue:p,onInputChange:(x,b)=>g(b),onChange:(x,b)=>f(b),renderTags:(x,b)=>x.map((A,E)=>{const{key:C,...T}=b({index:E});return v.jsx(dn,{label:A,...T,color:"error",variant:"outlined"},C)}),renderInput:x=>v.jsx(ht,{...x,label:"",placeholder:"...",fullWidth:!0,"data-testid":"bulk-delete-tags-input"}),"data-testid":"bulk-delete-tags-autocomplete"}),!!d.length&&v.jsx(ne,{sx:{mt:1},children:v.jsxs(te,{variant:"caption",color:"text.secondary",children:[": ",d.join(", ")]})})]}),v.jsxs(Gi,{children:[v.jsx($e,{onClick:e,disabled:r,children:""}),v.jsx($e,{onClick:()=>t==null?void 0:t(d),color:"error",variant:"contained",disabled:r||d.length===0,"data-testid":"bulk-delete-confirm",children:""})]})]})}function QJ({open:n,onClose:e,onConfirm:t,busy:r=!1}){const{user:i}=Qn(),{tagOptions:a,fetchTagHistory:s}=js("book",i),{tagOptions:o,fetchTagHistory:c}=js("memo",i),[d,f]=M.useState(""),[p,g]=M.useState([]),[m,x]=M.useState("");M.useEffect(()=>{n&&i&&(s(),c())},[n,i,s,c]),M.useEffect(()=>{n||(f(""),g([]),x(""))},[n]);const b=M.useMemo(()=>{const E=new Set([...a||[],...o||[]]);return Array.from(E).sort((C,T)=>C.localeCompare(T,"ja"))},[a,o]),A=d.trim().length>0&&p.length>0;return v.jsxs(zi,{open:n,onClose:e,maxWidth:"sm",fullWidth:!0,children:[v.jsx(aa,{children:""}),v.jsxs($i,{children:[v.jsx(te,{variant:"body2",color:"text.secondary",sx:{mb:2},children:""}),v.jsxs(ne,{sx:{mb:2},children:[v.jsx(te,{variant:"subtitle2",sx:{mb:1},children:""}),v.jsx(Ns,{freeSolo:!0,options:b,value:d,inputValue:m,onInputChange:(E,C)=>x(C),onChange:(E,C)=>f(C||m),renderInput:E=>v.jsx(ht,{...E,label:"",placeholder:"",fullWidth:!0}),"data-testid":"bulk-merge-canonical"})]}),v.jsxs(ne,{children:[v.jsx(te,{variant:"subtitle2",sx:{mb:1},children:""}),v.jsx(Ns,{multiple:!0,freeSolo:!0,options:b,value:p,onChange:(E,C)=>g(C),renderTags:(E,C)=>E.map((T,D)=>{const{key:k,...B}=C({index:D});return v.jsx(dn,{label:T,...B,color:"primary",variant:"outlined"},k)}),renderInput:E=>v.jsx(ht,{...E,label:"",placeholder:"...",fullWidth:!0}),"data-testid":"bulk-merge-aliases"})]})]}),v.jsxs(Gi,{children:[v.jsx($e,{onClick:e,disabled:r,children:""}),v.jsx($e,{onClick:()=>t==null?void 0:t(p,d||m),variant:"contained",disabled:r||!A,"data-testid":"bulk-merge-confirm",children:""})]})]})}function ZJ({onTagClick:n}){const{user:e}=Qn(),{tagStats:t,loading:r,error:i,getSortedTagStats:a,fetchTagStats:s}=YJ(e),{loading:o,renameTag:c,deleteTag:d,deleteTags:f,mergeTags:p}=qJ(),[g,m]=M.useState("count"),[x,b]=M.useState("desc"),[A,E]=M.useState(!1),[C,T]=M.useState(""),[D,k]=M.useState(!1),[B,O]=M.useState(!1),I=a(g,x),R=Object.keys(t).length,F=Object.values(t).reduce((P,V)=>P+V.bookCount,0),N=Object.values(t).reduce((P,V)=>P+V.memoCount,0);return r?v.jsx(Yl,{variant:"inline",message:"...","data-testid":"tag-stats-loading"}):i?v.jsx(ne,{sx:{p:2},children:v.jsxs(vi,{severity:"error",children:[": ",i.message]})}):R===0?v.jsx(ne,{sx:{p:3},children:v.jsx(vi,{severity:"info",children:""})}):v.jsxs(ne,{children:[v.jsxs(qn,{sx:{p:2,mb:3},children:[v.jsx(te,{variant:"h6",gutterBottom:!0,children:""}),v.jsxs(ne,{sx:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:2},children:[v.jsxs(ne,{sx:{textAlign:"center"},children:[v.jsx(te,{variant:"h4",color:"primary",children:R}),v.jsx(te,{variant:"body2",color:"text.secondary",children:""})]}),v.jsxs(ne,{sx:{textAlign:"center"},children:[v.jsx(te,{variant:"h4",color:"secondary",children:F}),v.jsx(te,{variant:"body2",color:"text.secondary",children:""})]}),v.jsxs(ne,{sx:{textAlign:"center"},children:[v.jsx(te,{variant:"h4",color:"info.main",children:N}),v.jsx(te,{variant:"body2",color:"text.secondary",children:""})]})]})]}),v.jsxs(qn,{sx:{p:2,mb:2,display:"flex",gap:2,alignItems:"center",flexWrap:"wrap"},children:[v.jsxs(te,{variant:"h6",children:[" (",R,")"]}),v.jsx(dn,{label:"",size:"small",color:"error",variant:"outlined",onClick:()=>k(!0),"data-testid":"open-bulk-delete"}),v.jsx(dn,{label:"",size:"small",color:"primary",variant:"outlined",onClick:()=>O(!0),"data-testid":"open-bulk-merge"}),v.jsxs(Mi,{size:"small",sx:{minWidth:120},children:[v.jsx(Ca,{children:""}),v.jsxs(Ya,{value:g,label:"",onChange:P=>m(P.target.value),children:[v.jsx(Zt,{value:"count",children:""}),v.jsx(Zt,{value:"name",children:""}),v.jsx(Zt,{value:"lastUsed",children:""})]})]}),v.jsxs(Mi,{size:"small",sx:{minWidth:100},children:[v.jsx(Ca,{children:""}),v.jsxs(Ya,{value:x,label:"",onChange:P=>b(P.target.value),children:[v.jsx(Zt,{value:"desc",children:""}),v.jsx(Zt,{value:"asc",children:""})]})]})]}),v.jsx(ne,{className:"tag-stats-grid",children:I.map(P=>v.jsx(kn,{"data-testid":`tag-stat-card-${P.tag}`,onClick:()=>n==null?void 0:n(P.tag),className:"tag-stat-card",children:v.jsxs(Nn,{children:[v.jsxs(ne,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",mb:1},children:[v.jsx(te,{variant:"h6",component:"div",sx:{wordBreak:"break-all"},children:P.tag}),v.jsx(dn,{label:P.type,size:"small",color:P.type==="both"?"primary":P.type==="book"?"secondary":"info",variant:"outlined"})]}),v.jsxs(ne,{sx:{display:"flex",justifyContent:"space-between",mb:1},children:[v.jsxs(te,{variant:"body2",color:"text.secondary",children:[": ",P.bookCount,""]}),v.jsxs(te,{variant:"body2",color:"text.secondary",children:[": ",P.memoCount,""]})]}),v.jsxs(ne,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[v.jsxs(te,{variant:"body2",color:"primary",sx:{fontWeight:"bold"},children:[": ",P.totalCount,""]}),v.jsx(ne,{sx:{display:"flex",gap:1},children:v.jsx(dn,{size:"small",label:"",onClick:V=>{V.stopPropagation(),T(P.tag),E(!0)},clickable:!0,color:"primary",variant:"outlined","data-testid":`tag-edit-${P.tag}`})})]}),P.lastUsed&&v.jsxs(te,{variant:"caption",color:"text.secondary",sx:{display:"block",mt:1},children:[": ",P.lastUsed.toLocaleDateString("ja-JP")]})]})},P.tag))}),v.jsx(XJ,{open:A,tag:C,busy:o,onClose:()=>E(!1),onRename:async(P,V)=>{await c(P,V),await s(),E(!1)},onDelete:async P=>{await d(P),await s(),E(!1)},onMerge:async(P,V)=>{await p(P,V),await s(),E(!1)}}),v.jsx(KJ,{open:D,onClose:()=>k(!1),busy:o,onConfirm:async P=>{!P||P.length===0||(await f(P),await s(),k(!1))}}),v.jsx(QJ,{open:B,onClose:()=>O(!1),busy:o,onConfirm:async(P,V)=>{!P||P.length===0||!V||(await p(P.join(","),V),await s(),O(!1))}})]})}function JJ({value:n,onChange:e}){const[t,r]=M.useState((n==null?void 0:n.type)||"none"),[i,a]=M.useState((n==null?void 0:n.year)||new Date().getFullYear()),[s,o]=M.useState((n==null?void 0:n.month)||1),[c,d]=M.useState((n==null?void 0:n.quarter)||1),[f,p]=M.useState((n==null?void 0:n.startDate)||""),[g,m]=M.useState((n==null?void 0:n.endDate)||""),x=D=>{const k=D.target.value;r(k);let B={type:k};switch(k){case"year":B.year=i;break;case"month":B.year=i,B.month=s;break;case"quarter":B.year=i,B.quarter=c;break;case"custom":B.startDate=f,B.endDate=g;break}e==null||e(B)},b=D=>{const k=D.target.value;a(k),e==null||e({...n,year:k})},A=D=>{const k=D.target.value;o(k),e==null||e({...n,month:k})},E=D=>{const k=D.target.value;d(k),e==null||e({...n,quarter:k})},C=D=>{const k=D.target.value;p(k),e==null||e({...n,startDate:k})},T=D=>{const k=D.target.value;m(k),e==null||e({...n,endDate:k})};return v.jsxs(ne,{children:[v.jsx(te,{variant:"subtitle2",gutterBottom:!0,children:""}),v.jsxs(qn,{sx:{p:2},children:[v.jsxs(Mi,{fullWidth:!0,margin:"normal",children:[v.jsx(Ca,{children:""}),v.jsxs(Ya,{value:t,onChange:x,label:"","data-testid":"date-range-type-select",children:[v.jsx(Zt,{value:"none",children:""}),v.jsx(Zt,{value:"year",children:""}),v.jsx(Zt,{value:"month",children:""}),v.jsx(Zt,{value:"quarter",children:""}),v.jsx(Zt,{value:"custom",children:""})]})]}),(t==="year"||t==="month"||t==="quarter")&&v.jsxs(Mi,{fullWidth:!0,margin:"normal",children:[v.jsx(Ca,{children:""}),v.jsx(Ya,{value:i,onChange:b,label:"","data-testid":"year-select",children:Array.from({length:10},(D,k)=>new Date().getFullYear()-k).map(D=>v.jsxs(Zt,{value:D,children:[D,""]},D))})]}),t==="month"&&v.jsxs(Mi,{fullWidth:!0,margin:"normal",children:[v.jsx(Ca,{children:""}),v.jsx(Ya,{value:s,onChange:A,label:"","data-testid":"month-select",children:Array.from({length:12},(D,k)=>k+1).map(D=>v.jsxs(Zt,{value:D,children:[D,""]},D))})]}),t==="quarter"&&v.jsxs(Mi,{fullWidth:!0,margin:"normal",children:[v.jsx(Ca,{children:""}),v.jsxs(Ya,{value:c,onChange:E,label:"","data-testid":"quarter-select",children:[v.jsx(Zt,{value:1,children:"11-3"}),v.jsx(Zt,{value:2,children:"24-6"}),v.jsx(Zt,{value:3,children:"37-9"}),v.jsx(Zt,{value:4,children:"410-12"})]})]}),t==="custom"&&v.jsxs(ne,{sx:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:2,mt:1},"data-testid":"custom-date-range-grid",children:[v.jsx(ne,{"data-testid":"start-date-grid-item",children:v.jsx(ht,{label:"",type:"date",value:f,onChange:C,fullWidth:!0,InputLabelProps:{shrink:!0},inputProps:{"data-testid":"start-date-input"}})}),v.jsx(ne,{"data-testid":"end-date-grid-item",children:v.jsx(ht,{label:"",type:"date",value:g,onChange:T,fullWidth:!0,InputLabelProps:{shrink:!0},inputProps:{"data-testid":"end-date-input"}})})]}),t!=="none"&&v.jsxs(te,{variant:"body2",color:"text.secondary",sx:{mt:1},children:[t==="year"&&`${i}`,t==="month"&&`${i}${s}`,t==="quarter"&&`${i}${c}`,t==="custom"&&""]})]})]})}function eee({selectedTags:n=[],onTagsChange:e,type:t="book"}){const{user:r}=Qn(),{tagOptions:i,loading:a,fetchTagHistory:s}=js(t,r),[o,c]=M.useState("");M.useEffect(()=>{r&&s()},[r,s]);const d=(g,m)=>{if(m&&!n.includes(m)){const x=[...n,m];e==null||e(x),c("")}},f=g=>{const m=n.filter(x=>x!==g);e==null||e(m)},p=(g,m)=>{c(m)};return v.jsxs(ne,{children:[v.jsx(te,{variant:"subtitle2",gutterBottom:!0,children:""}),v.jsxs(qn,{sx:{p:2},children:[v.jsx(Ns,{freeSolo:!0,multiple:!0,options:i||[],value:n,inputValue:o,onInputChange:p,onChange:d,renderTags:(g,m)=>g.map((x,b)=>{const{key:A,...E}=m({index:b});return v.jsx(dn,{label:x,...E,onDelete:()=>f(x),color:"primary",variant:"outlined","data-testid":`selected-tag-${x}`},A)}),renderInput:g=>v.jsx(ht,{...g,label:"",placeholder:"...",fullWidth:!0,"data-testid":"tag-search-input"}),loading:a,noOptionsText:"","data-testid":"tag-autocomplete"}),v.jsx(te,{variant:"body2",color:"text.secondary",sx:{mt:1},children:n.length>0?`: ${n.join(", ")}`:""})]})]})}function tee({searchConditions:n,onSearchConditionsChange:e,onSearch:t}){const[r,i]=M.useState(yn.ALL),a=f=>{e==null||e({...n,text:f.target.value})},s=(f,p)=>{i(p),e==null||e({...n,status:p})},o=f=>{e==null||e({...n,dateRange:f})},c=f=>{e==null||e({...n,selectedTags:f})},d=()=>{t==null||t(n)};return v.jsxs(ne,{children:[v.jsxs(qn,{sx:{p:2,mb:2},children:[v.jsx(te,{variant:"h6",gutterBottom:!0,"data-testid":"advanced-search-title",children:""}),v.jsx(ht,{label:"",value:(n==null?void 0:n.text)||"",onChange:a,fullWidth:!0,margin:"normal",placeholder:"","data-testid":"text-search-field"}),v.jsxs(ne,{sx:{mt:2},children:[v.jsx(te,{variant:"subtitle2",gutterBottom:!0,"data-testid":"status-filter-label",children:""}),v.jsx(ne,{sx:{display:"flex",gap:1,flexWrap:"wrap"},children:[yn.ALL,yn.TSUNDOKU,yn.READING_GROUP,yn.SUSPENDED,yn.FINISHED].map(f=>v.jsx($e,{variant:r===f?"contained":"outlined",size:"small",onClick:()=>s(null,f),"data-testid":`status-filter-${f}`,children:vd[f]},f))})]}),v.jsx(ne,{sx:{mt:2},children:v.jsx(JJ,{dateRange:(n==null?void 0:n.dateRange)||{type:"none"},onDateRangeChange:o})}),v.jsx(ne,{sx:{mt:2},children:v.jsx(eee,{selectedTags:(n==null?void 0:n.selectedTags)||[],onTagsChange:c,type:"book"})})]}),v.jsx(ne,{sx:{display:"flex",justifyContent:"center"},children:v.jsx($e,{variant:"contained",onClick:d,"data-testid":"search-button",children:""})})]})}function my({results:n=[],loading:e=!1,searchQuery:t="",onResultClick:r}){const{user:i}=Qn(),a=Hl(),o=r||((g,m,x)=>{g==="book"?a(`/book/${m}`):g==="memo"&&a(`/book/${m}?memo=${x}`)});if(e)return v.jsx(Yl,{variant:"inline",message:"...","data-testid":"search-results-loading"});if(!n||n.length===0)return v.jsx(ne,{sx:{p:3},children:v.jsx(vi,{severity:"info","data-testid":"search-results-empty-message",children:t?`${t}`:""})});const c=n.filter(g=>g.type==="book"),d=n.filter(g=>g.type==="memo"),f=g=>v.jsx(kn,{sx:{cursor:"pointer",height:"100%",display:"flex",flexDirection:"column",backgroundColor:"rgba(255, 255, 255, 0.78)",backdropFilter:"blur(20px) saturate(180%)",border:"2px solid rgba(123, 104, 238, 0.25)",borderRadius:2,boxShadow:`
          0 6px 24px rgba(0, 0, 0, 0.1),
          0 2px 8px rgba(123, 104, 238, 0.08),
          inset 0 1px 0 rgba(255, 255, 255, 0.6)
        `,position:"relative",overflow:"visible",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)","&:hover":{transform:"translateY(-3px)",boxShadow:`
            0 10px 32px rgba(0, 0, 0, 0.12),
            0 4px 12px rgba(123, 104, 238, 0.12),
            inset 0 1px 0 rgba(255, 255, 255, 0.65)
          `,borderColor:"rgba(123, 104, 238, 0.4)"},"&::before":{content:'""',position:"absolute",top:6,left:6,right:6,bottom:6,border:"1px solid rgba(123, 104, 238, 0.12)",borderRadius:1.5,pointerEvents:"none",zIndex:0}},onClick:()=>o("memo",g.bookId,g.id),"data-testid":`memo-result-${g.id}`,children:v.jsxs(Nn,{sx:{flexGrow:1,display:"flex",flexDirection:"column",position:"relative",zIndex:1},children:[v.jsx(ne,{sx:{mb:2},children:v.jsxs(te,{variant:"h6",component:"h3",gutterBottom:!0,sx:{fontWeight:"bold",display:"flex",alignItems:"center",gap:1},children:[v.jsx("span",{children:""}),v.jsxs("span",{children:[g.bookTitle||""," - ",g.page||""]})]})}),g.text&&v.jsx(ne,{sx:{mb:2,flexGrow:1},children:v.jsx(te,{variant:"body2",sx:{backgroundColor:"grey.50",p:1,borderRadius:1,border:"1px solid",borderColor:"grey.200",fontStyle:"italic"},children:g.text.length>120?`${g.text.substring(0,120)}...`:g.text})}),g.comment&&v.jsx(ne,{sx:{mb:2},children:v.jsxs(te,{variant:"body2",sx:{backgroundColor:"primary.50",p:1,borderRadius:1,border:"1px solid",borderColor:"primary.200"},children:[" ",g.comment.length>100?`${g.comment.substring(0,100)}...`:g.comment]})}),g.tags&&g.tags.length>0&&v.jsx(ne,{sx:{mb:2},children:v.jsx(ne,{sx:{display:"flex",gap:.5,flexWrap:"wrap"},children:g.tags.map((m,x)=>v.jsx(dn,{label:m,size:"small",variant:"outlined",sx:{fontSize:"0.75rem"}},x))})}),v.jsx(ne,{sx:{mt:"auto"},children:v.jsxs(te,{variant:"caption",color:"text.secondary",children:[": ",g.createdAt?typeof g.createdAt.toDate=="function"?new Date(g.createdAt.toDate()).toLocaleDateString("ja-JP"):new Date(g.createdAt).toLocaleDateString("ja-JP"):""]})})]})},g.id),p=g=>v.jsxs(kn,{sx:{cursor:"pointer",height:"100%",display:"flex",flexDirection:"column",backgroundColor:"rgba(255, 255, 255, 0.75)",backdropFilter:"blur(20px) saturate(180%)",border:"2px solid rgba(139, 69, 19, 0.2)",borderRadius:3,boxShadow:`
          0 8px 32px rgba(0, 0, 0, 0.12),
          0 2px 8px rgba(0, 0, 0, 0.08),
          inset 0 1px 0 rgba(255, 255, 255, 0.5)
        `,position:"relative",overflow:"visible",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)","&:hover":{transform:"translateY(-4px)",boxShadow:`
            0 12px 40px rgba(0, 0, 0, 0.16),
            0 4px 12px rgba(0, 0, 0, 0.12),
            inset 0 1px 0 rgba(255, 255, 255, 0.6)
          `,borderColor:"rgba(139, 69, 19, 0.3)"},"&::before":{content:'""',position:"absolute",top:8,left:8,right:8,bottom:8,border:"1px solid rgba(139, 69, 19, 0.1)",borderRadius:2,pointerEvents:"none",zIndex:0},"&::after":{content:'""',position:"absolute",top:0,left:"50%",width:1,height:"100%",background:"linear-gradient(to bottom, transparent, rgba(139, 69, 19, 0.1), transparent)",pointerEvents:"none",zIndex:0}},onClick:()=>o("book",g.id),"data-testid":`book-result-${g.id}`,children:[v.jsx(Ss,{position:"top-left",size:20}),v.jsx(Ss,{position:"top-right",size:20}),v.jsxs(Nn,{sx:{flexGrow:1,display:"flex",flexDirection:"column",position:"relative",zIndex:1},children:[v.jsx(ne,{sx:{mb:2},children:v.jsxs(te,{variant:"h6",component:"h3",gutterBottom:!0,sx:{fontWeight:"bold",display:"flex",alignItems:"center",gap:1},children:[v.jsx("span",{children:""}),v.jsx("span",{children:g.title})]})}),v.jsxs(ne,{sx:{mb:2},children:[v.jsx(te,{variant:"body2",color:"text.secondary",sx:{mb:1},children:g.author||""}),v.jsx(dn,{label:Vs(g.status),size:"small",color:xs(g.status),sx:{fontSize:"0.75rem"}})]}),g.tags&&g.tags.length>0&&v.jsx(ne,{sx:{mb:2},children:v.jsx(ne,{sx:{display:"flex",gap:.5,flexWrap:"wrap"},children:g.tags.map((m,x)=>v.jsx(dn,{label:m,size:"small",variant:"outlined",sx:{fontSize:"0.75rem"}},x))})}),v.jsx(ne,{sx:{mt:"auto"},children:v.jsxs(te,{variant:"caption",color:"text.secondary",children:[": ",g.updatedAt?typeof g.updatedAt.toDate=="function"?new Date(g.updatedAt.toDate()).toLocaleDateString("ja-JP"):new Date(g.updatedAt).toLocaleDateString("ja-JP"):""]})})]})]},g.id);return v.jsxs(ne,{children:[v.jsxs(qn,{sx:{p:2,mb:2},children:[v.jsxs(te,{variant:"h6",gutterBottom:!0,children:[" (",n.length,")"]}),v.jsxs(te,{variant:"body2",color:"text.secondary",children:[" : ",c.length,",  : ",d.length,""]})]}),v.jsx(ne,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",sm:"1fr 1fr",md:"repeat(3, 1fr)"},gap:2},children:n.map(g=>v.jsx(ne,{children:g.type==="book"?p(g):f(g)},`${g.type}-${g.id}`))})]})}my.propTypes={results:ee.arrayOf(ee.shape({id:ee.string.isRequired,type:ee.oneOf(["book","memo"]).isRequired,title:ee.string,author:ee.string,status:ee.string,tags:ee.arrayOf(ee.string),updatedAt:ee.oneOfType([ee.object,ee.string,ee.instanceOf(Date)]),bookId:ee.string,bookTitle:ee.string,text:ee.string,comment:ee.string,page:ee.number,createdAt:ee.oneOfType([ee.object,ee.string,ee.instanceOf(Date)])})),loading:ee.bool,searchQuery:ee.string,onResultClick:ee.func.isRequired};my.defaultProps={results:[],loading:!1,searchQuery:""};const yy={MIN_SEARCH_LENGTH:2,CACHE_KEY:"fullTextSearchCache",CACHE_MAX_ITEMS:100,CACHE_EXPIRY_MS:1440*60*1e3,RATE_LIMIT_MS:5e3,ERROR_MESSAGES:{TOO_SHORT:n=>`${n}`,RATE_LIMITED:n=>`${n}`,SEARCH_FAILED:""},PLACEHOLDER:"",DESCRIPTION:"2"};function nee(){const{CACHE_KEY:n,CACHE_MAX_ITEMS:e,CACHE_EXPIRY_MS:t}=yy,r=M.useCallback(()=>{try{const p=localStorage.getItem(n);return p?JSON.parse(p):{}}catch(p){return console.error(":",p),{}}},[n]),[i,a]=M.useState(r),s=M.useCallback(p=>p.toLowerCase().trim(),[]),o=M.useCallback(p=>{const g=s(p);console.log(" :",{searchText:p,key:g,cacheKeys:Object.keys(i)});const m=i[g];return m?Date.now()-m.timestamp>t?(console.log(" :",g),null):(console.log(" :",g),m.data):(console.log(" :",g),null)},[i,s,t]),c=M.useCallback((p,g)=>{const m=s(p),x=Date.now();console.log(" :",{searchText:p,key:m,resultsCount:(g==null?void 0:g.length)||0});let b={...i};if(Object.keys(b).length>=e&&!b[m]){const A=Object.keys(b).sort((E,C)=>b[E].timestamp-b[C].timestamp)[0];console.log(" :",A),delete b[A]}b[m]={data:g,timestamp:x},a(b);try{localStorage.setItem(n,JSON.stringify(b)),console.log(" :",{key:m,cacheSize:Object.keys(b).length})}catch(A){console.error(":",A)}},[i,s,n,e]),d=M.useCallback(()=>{a({});try{localStorage.removeItem(n)}catch(p){console.error(":",p)}},[n]),f=M.useCallback(()=>{const p=Date.now(),g=Object.entries(i);return{totalItems:g.length,validItems:g.filter(([,m])=>p-m.timestamp<=t).length,maxItems:e,expiryMs:t}},[i,e,t]);return{getCached:o,setCached:c,clearCache:d,getCacheStats:f}}function ree(){const{RATE_LIMIT_MS:n,ERROR_MESSAGES:e}=yy,[t,r]=M.useState({}),i=M.useCallback(d=>d.toLowerCase().trim(),[]),a=M.useCallback(d=>{const f=i(d),p=Date.now(),g=t[f]||0,m=p-g;if(m<n){const x=n-m,b=Math.ceil(x/1e3);return{allowed:!1,remainingMs:x,error:e.RATE_LIMITED(b)}}return{allowed:!0,remainingMs:0,error:null}},[t,i,n,e]),s=M.useCallback(d=>{const f=i(d),p=Date.now();r(g=>({...g,[f]:p}))},[i]),o=M.useCallback(d=>{if(d){const f=i(d);r(p=>{const g={...p};return delete g[f],g})}else r({})},[i]),c=M.useCallback(d=>{const f=i(d),p=Date.now(),g=t[f]||0,m=p-g;return m<n?n-m:0},[t,i,n]);return{checkRateLimit:a,recordSearch:s,resetRateLimit:o,getRemainingTime:c}}function iee(n){const e=new Date;let t=null,r=null;if(!n||!n.type||n.type==="none")return{startDate:t,endDate:r};switch(n.type){case"year":n.year&&(t=new Date(n.year,0,1),r=new Date(n.year,11,31,23,59,59));break;case"month":n.year&&n.month&&(t=new Date(n.year,n.month-1,1),r=new Date(n.year,n.month,0,23,59,59));break;case"quarter":if(n.year&&n.quarter){const i=(n.quarter-1)*3;t=new Date(n.year,i,1),r=new Date(n.year,i+3,0,23,59,59)}break;case"custom":n.startDate&&(t=new Date(n.startDate)),n.endDate&&(r=new Date(n.endDate),r.setHours(23,59,59));break;case"recent":n.months&&(t=new Date(e.getFullYear(),e.getMonth()-n.months,e.getDate()),r=e);break}return{startDate:t,endDate:r}}function aee(n,e,t,r=50){if(!e)return[];const{status:i,dateRange:a,selectedTags:s}=t||{},o=[],c=[vn("userId","==",e.uid)];if(i&&i!=="all"&&c.push(vn("status","==",i)),a&&a.type!=="none"){const{startDate:p,endDate:g}=iee(a);p&&c.push(vn("updatedAt",">=",p)),g&&c.push(vn("updatedAt","<=",g))}s&&s.length>0&&Array.isArray(s)&&!s.some(p=>Array.isArray(p))&&c.push(vn("tags","array-contains-any",s));const d=Ln($n(n,"books"),...c,ey("updatedAt","desc"),qm(r));o.push({type:"book",query:d});const f=Ln(Al(n,"memos"),vn("userId","==",e.uid),qm(r*3));return o.push({type:"memo",query:f}),o}async function see({db:n,user:e,queries:t,resultLimit:r=50}){var a,s;const i=[];for(const{type:o,query:c}of t)try{const d=await Un(c);if(o==="memo")for(const f of d.docs){const p=f.data(),g=(a=f.ref.parent.parent)==null?void 0:a.id;let m="";if(g)try{const x=await Un(Ln($n(n,"books"),vn("__name__","==",g),vn("userId","==",e.uid)));x.empty||(m=x.docs[0].data().title||"")}catch{}i.push({id:f.id,type:o,bookId:g,bookTitle:m,...p})}else d.forEach(f=>{const p=f.data();i.push({id:f.id,type:o,...p})})}catch(d){const f=String((d==null?void 0:d.message)||"");if(d.code==="failed-precondition"||f.includes("index")||f.includes("array-contains-any"))if(o==="memo"){const p=Ln(Al(n,"memos"),vn("userId","==",e.uid),qm(r*2)),g=await Un(p);for(const m of g.docs){const x=m.data(),b=(s=m.ref.parent.parent)==null?void 0:s.id;let A="";if(b)try{const E=await Un(Ln($n(n,"books"),vn("__name__","==",b),vn("userId","==",e.uid)));E.empty||(A=E.docs[0].data().title||"")}catch{}i.push({id:m.id,type:o,bookId:b,bookTitle:A,...x})}}else{const p=Ln($n(n,"books"),vn("userId","==",e.uid),qm(r*2));(await Un(p)).forEach(m=>{const x=m.data();i.push({id:m.id,type:o,...x})})}else throw d}return i}function oee(n,e){if(!e)return n;const t=String(e).toLowerCase();return(n||[]).filter(r=>r.type==="book"?r.title&&String(r.title).toLowerCase().includes(t)||r.author&&String(r.author).toLowerCase().includes(t)||r.tags&&Array.isArray(r.tags)&&r.tags.some(i=>String(i).toLowerCase().includes(t)):r.type==="memo"?r.text&&String(r.text).toLowerCase().includes(t)||r.comment&&String(r.comment).toLowerCase().includes(t)||r.tags&&Array.isArray(r.tags)&&r.tags.some(i=>String(i).toLowerCase().includes(t)):!1)}function lee(n,e){if(!e||e.length===0)return n;const t=i=>{if(!Array.isArray(i))return[];const a=[],s=o=>{Array.isArray(o)?o.forEach(s):typeof o=="string"&&o.trim()&&a.push(o.toLowerCase().trim())};return i.forEach(s),a},r=t(e);return(n||[]).filter(i=>!i.tags||!Array.isArray(i.tags)?!1:t(i.tags).some(s=>r.includes(s)))}function cee(n,e){if(!e)return n;const t=String(e).toLowerCase();return(n||[]).filter(r=>r.text&&String(r.text).toLowerCase().includes(t)||r.comment&&String(r.comment).toLowerCase().includes(t))}function uee(n,e="updatedAt",t="desc"){const r=[...n||[]];return r.sort((i,a)=>{let s=i[e],o=a[e];return(e==="updatedAt"||e==="createdAt")&&(s=s!=null&&s.toDate?s.toDate():s?new Date(s):new Date(0),o=o!=null&&o.toDate?o.toDate():o?new Date(o):new Date(0)),typeof s=="string"&&typeof o=="string"&&(s=s.toLowerCase(),o=o.toLowerCase()),t==="asc"?s>o?1:-1:s<o?1:-1}),r}function dee(n,e={}){const{text:t,selectedTags:r,memoContent:i,sortBy:a="updatedAt",sortOrder:s="desc"}=e;let o=oee(n,t);if(r&&r.length>0&&(o=lee(o,r)),i){const c=o.filter(f=>f.type==="book"),d=cee(o.filter(f=>f.type==="memo"),i);o=[...c,...d]}return uee(o,a,s)}function BP(n={}){const{user:e}=Qn(),[t,r]=M.useState([]),[i,a]=M.useState(!1),[s,o]=M.useState(null),{limit:c=50}=n;M.useEffect(()=>{if(!e)return;const g=K$();g&&r(g)},[e]);const d=M.useCallback(g=>aee(wt,e,g,c),[e,c]),f=M.useCallback(async g=>{if(!e){o("");return}a(!0),o(null);try{console.log(":",g);const m=d(g),x=await see({db:wt,user:e,queries:m,resultLimit:c});console.log(", :",x.length),console.log(":",{books:x.filter(A=>A.type==="book").length,memos:x.filter(A=>A.type==="memo").length});const b=dee(x,g);r(b),X$(b)}catch(m){console.error(":",m),o("")}finally{a(!1)}},[e,d]),p=M.useCallback(()=>{r([]),o(null),f_()},[]);return{results:t,loading:i,error:s,executeSearch:f,clearResults:p,setResults:r}}function fee(){const{MIN_SEARCH_LENGTH:n,ERROR_MESSAGES:e}=yy,[t,r]=M.useState(""),[i,a]=M.useState(""),{getCached:s,setCached:o,clearCache:c,getCacheStats:d}=nee(),{checkRateLimit:f,recordSearch:p,resetRateLimit:g}=ree(),{executeSearch:m,results:x,loading:b}=BP(),[A,E]=M.useState(null),C=M.useRef(!1),T=M.useRef(""),D=M.useCallback(F=>F.trim().length<n?{valid:!1,error:e.TOO_SHORT(n)}:{valid:!0,error:null},[n,e]),k=M.useCallback(async()=>{const F=D(t);if(!F.valid){a(F.error);return}a("");const N=s(t);if(N){console.log(" :",t),E(N);return}const P=f(t);if(!P.allowed){a(P.error);return}try{console.log(" Firebase:",t),C.current=!0,T.current=t,E(null),await m({text:t,status:"all",dateRange:{type:"none"},selectedTags:[],sortBy:"updatedAt",sortOrder:"desc"})}catch(V){console.error(":",V),a(e.SEARCH_FAILED),C.current=!1}},[t,D,f,s,m,o,p,e]),B=M.useCallback(F=>{r(F),i&&a("")},[i]),O=M.useCallback(()=>{E(null),r(""),a("")},[]),I=M.useCallback(()=>{c(),E(null)},[c]);return M.useEffect(()=>{if(C.current&&x&&x.length>=0&&!b){const F=T.current;console.log(" Firebase:",F,"resultsCount:",x.length),o(F,x),p(F),C.current=!1}},[x,b,o,p]),{searchText:t,error:i,loading:b,results:A||x,handleSearch:k,handleSearchTextChange:B,clearResults:O,clearCache:I,validateSearchText:D,getCacheStats:d,resetRateLimit:g,canSearch:t.trim().length>=n&&!b}}function FP(n){const e=Hl(),t=iu(),[r,i]=M.useState(!1),[a,s]=M.useState(null),[o,c]=M.useState(null),d=M.useCallback((g,m,x)=>{if(g==="book"){const b=t.pathname;e(`/book/${m}`,{state:{returnPath:b,searchState:{results:n}}})}else if(g==="memo"){const b=n.find(A=>A.type==="memo"&&A.id===x);b?(s(b),c(m),i(!0)):(console.warn("[useSearchResultHandler] Memo not found in results, navigating to book page"),e(`/book/${m}?memo=${x}`))}},[e,t.pathname,n]),f=M.useCallback(()=>{i(!1),s(null),c(null)},[]),p=M.useCallback(()=>v.jsx(oO,{open:r,memo:a,bookId:o,onClose:f,onUpdate:f,onDelete:f}),[r,a,o,f]);return{handleResultClick:d,memoDialogOpen:r,selectedMemo:a,selectedMemoBookId:o,closeMemoDialog:f,MemoDialog:p}}function hee(){const{searchText:n,error:e,loading:t,results:r,handleSearch:i,handleSearchTextChange:a,clearResults:s,clearCache:o,getCacheStats:c,canSearch:d}=fee(),{handleResultClick:f,MemoDialog:p}=FP(r),{PLACEHOLDER:g,DESCRIPTION:m}=yy,x=A=>{A.key==="Enter"&&d&&i()},b=c();return v.jsxs(ne,{"data-testid":"full-text-search",children:[v.jsxs(qn,{sx:{p:3,mb:3},children:[v.jsx(te,{variant:"body2",color:"text.secondary",sx:{mb:2},"data-testid":"full-text-search-description",children:m}),v.jsxs(ne,{sx:{display:"flex",gap:1,mb:2},children:[v.jsx(ht,{fullWidth:!0,label:"",placeholder:g,value:n,onChange:A=>a(A.target.value),onKeyPress:x,error:!!e,helperText:e,autoFocus:!0,disabled:t,"data-testid":"full-text-search-input",InputProps:{endAdornment:n&&v.jsx($r,{size:"small",onClick:s,"data-testid":"full-text-search-clear-input",children:v.jsx(lR,{fontSize:"small"})})}}),v.jsx($e,{variant:"contained",onClick:i,disabled:!d,startIcon:t?v.jsx(oR,{size:20}):v.jsx(R1,{}),"data-testid":"full-text-search-button",sx:{minWidth:100},children:t?"...":""})]}),b.totalItems>0&&v.jsxs(ne,{sx:{display:"flex",alignItems:"center",gap:1},children:[v.jsxs(te,{variant:"caption",color:"text.secondary","data-testid":"full-text-search-cache-info",children:[": ",b.validItems,"/",b.maxItems," "]}),v.jsx(XN,{title:"",children:v.jsx($r,{size:"small",onClick:o,"data-testid":"full-text-search-clear-cache",children:v.jsx(KN,{fontSize:"small"})})})]})]}),!t&&r&&r.length>0&&v.jsx(ne,{"data-testid":"full-text-search-results",children:v.jsx(my,{results:r,onResultClick:f})}),!t&&r&&r.length===0&&v.jsx(vi,{severity:"info","data-testid":"full-text-search-no-results",children:""}),!t&&!r&&!e&&v.jsx(vi,{severity:"info","data-testid":"full-text-search-initial",children:""}),v.jsx(p,{})]})}function pee(){const{user:n}=Qn(),e=iu(),[t,r]=M.useState(0),[i,a]=M.useState({text:"",status:"all",dateRange:{type:"none"},selectedTags:[],sortBy:"updatedAt",sortOrder:"desc"}),{results:s,loading:o,error:c,executeSearch:d,clearResults:f,setResults:p}=BP(),{handleResultClick:g,MemoDialog:m}=FP(s);M.useEffect(()=>{var D;const T=(D=e.state)==null?void 0:D.restoreSearch;T!=null&&T.results&&(console.log("[TagSearch] Restoring search state:",T),p(T.results))},[e.state,p]);const x=(T,D)=>{r(D)},b=T=>{a(T)},A=T=>{console.log(":",T),d(T)},E=()=>{f(),a({text:"",status:"all",dateRange:{type:"none"},selectedTags:[],sortBy:"updatedAt",sortOrder:"desc"})},C=T=>{console.log(":",T);const D={...i,selectedTags:[T],text:""};a(D),r(1),d(D)};return n?v.jsxs(ne,{sx:{maxWidth:1e3,mx:"auto",mb:4,pb:"56px"},children:[v.jsx(iy,{title:"",subtitle:""}),v.jsxs(ne,{sx:{px:{xs:1.5,sm:2,md:0}},children:[v.jsx(ne,{sx:{borderBottom:1,borderColor:"divider",mb:2,position:"sticky",top:0,zIndex:1100,backgroundColor:"background.paper"},"data-testid":"tag-search-tabs-container",style:{position:"sticky",top:0,zIndex:1100},children:v.jsxs(D1,{value:t,onChange:x,centered:!0,"data-testid":"tag-search-tabs",children:[v.jsx(Ea,{label:"",id:"tag-search-tab-0","aria-controls":"tag-search-tabpanel-0","data-testid":"full-text-search-tab"}),v.jsx(Ea,{label:"",id:"tag-search-tab-1","aria-controls":"tag-search-tabpanel-1","data-testid":"advanced-search-tab"}),v.jsx(Ea,{label:"",id:"tag-search-tab-2","aria-controls":"tag-search-tabpanel-2","data-testid":"tag-management-tab"})]})}),v.jsx(l2,{value:t,index:0,"data-testid":"full-text-search-tab-panel",children:v.jsx(gee,{})}),v.jsx(l2,{value:t,index:1,"data-testid":"advanced-search-tab-panel",children:v.jsx(mee,{searchConditions:i,onSearchConditionsChange:b,onSearch:A,results:s,loading:o,error:c,onResultClick:g,onClearSearch:E})}),v.jsx(l2,{value:t,index:2,"data-testid":"tag-management-tab-panel",children:v.jsx(yee,{onTagClick:C})}),v.jsx(m,{})]})]}):v.jsx(ne,{sx:{maxWidth:600,mx:"auto",mt:4,p:2},children:v.jsx(te,{variant:"h6",color:"error",children:""})})}function gee(){return v.jsxs(ne,{children:[v.jsxs(qn,{sx:{p:2,mb:3},children:[v.jsx(te,{variant:"h5",gutterBottom:!0,children:""}),v.jsx(te,{variant:"body2",color:"text.secondary",children:""})]}),v.jsx(hee,{})]})}function mee({searchConditions:n,onSearchConditionsChange:e,onSearch:t,results:r,loading:i,error:a,onResultClick:s,onClearSearch:o}){return v.jsxs(ne,{children:[v.jsxs(qn,{sx:{p:2,mb:3},children:[v.jsx(te,{variant:"h5",gutterBottom:!0,children:""}),v.jsx(te,{variant:"body2",color:"text.secondary",children:""})]}),v.jsx(tee,{searchConditions:n,onSearchConditionsChange:e,onSearch:t}),a&&v.jsx(ne,{sx:{mt:2},children:v.jsx(vi,{severity:"error",children:a})}),(r.length>0||i)&&v.jsx(ne,{sx:{mt:4},children:v.jsx(my,{results:r,loading:i,searchQuery:n.text,onResultClick:s})}),r.length>0&&!i&&v.jsx(qn,{sx:{p:1.5,mt:2,textAlign:"center"},children:v.jsx(te,{variant:"body2",color:"primary",sx:{cursor:"pointer",textDecoration:"underline"},onClick:o,children:""})})]})}function yee({onTagClick:n}){return v.jsxs(ne,{children:[v.jsxs(qn,{sx:{p:2,mb:3},children:[v.jsx(te,{variant:"h5",gutterBottom:!0,children:""}),v.jsx(te,{variant:"body2",color:"text.secondary",children:""})]}),v.jsx(ZJ,{onTagClick:n})]})}function Xg(n,e,t=1){if(!e)return;const r=n.get(e)||0;n.set(e,r+t)}function vee(){const{user:n}=Qn(),e=M.useContext(Wr),t=(e==null?void 0:e.setGlobalError)||(()=>{}),[r,i]=M.useState(!0),[a,s]=M.useState(null),[o,c]=M.useState([]),[d,f]=M.useState([]);M.useEffect(()=>{let T=!1;async function D(){if(!n){c([]),f([]),i(!1);return}i(!0),s(null);try{const k=Ln($n(wt,"books"),vn("userId","==",n.uid)),O=(await Un(k)).docs.map(N=>({id:N.id,...N.data()})),I=Ln(Al(wt,"memos"),vn("userId","==",n.uid)),F=(await Un(I)).docs.map(N=>({id:N.id,...N.data()}));T||(c(O),f(F))}catch(k){console.error("Failed to load stats:",k),T||(s(""),t(""))}finally{T||i(!1)}}return D(),()=>{T=!0}},[n]);const p=M.useMemo(()=>{const T=o.length,D=o.filter(I=>(I.status||Sr)===dt.TSUNDOKU).length,k=o.filter(I=>(I.status||Sr)===dt.READING).length,B=o.filter(I=>(I.status||Sr)===dt.RE_READING).length,O=o.filter(I=>(I.status||Sr)===dt.FINISHED).length;return{totalBooks:T,tsundokuBooks:D,readingBooks:k,reReadingBooks:B,finishedBooks:O}},[o]),g=M.useMemo(()=>{const T=o.filter(O=>(O.status||Sr)===dt.TSUNDOKU).length,D=o.filter(O=>(O.status||Sr)===dt.READING).length,k=o.filter(O=>(O.status||Sr)===dt.RE_READING).length,B=o.filter(O=>(O.status||Sr)===dt.FINISHED).length;return{tsundoku:T,reading:D,reReading:k,finished:B}},[o]),m=M.useMemo(()=>{const T=new Map,D=new Map;for(const O of o){const I=Array.isArray(O.tags)?O.tags:[];for(const R of I)Xg(T,String(R).trim())}for(const O of d){const I=Array.isArray(O.tags)?O.tags:[];for(const R of I)Xg(D,String(R).trim())}const k=new Set([...T.keys(),...D.keys()]),B=[];for(const O of k){const I=T.get(O)||0,R=D.get(O)||0;B.push({tag:O,bookCount:I,memoCount:R,totalCount:I+R})}return B.sort((O,I)=>I.totalCount-O.totalCount||O.tag.localeCompare(I.tag)),B},[o,d]),x=M.useMemo(()=>{var B;const T=new Date,D=[],k=new Map;for(let O=11;O>=0;O-=1){const I=new Date(T.getFullYear(),T.getMonth()-O,1),R=`${I.getFullYear()}-${String(I.getMonth()+1).padStart(2,"0")}`;k.set(R,D.length),D.push({key:R,year:I.getFullYear(),month:I.getMonth()+1,count:0})}for(const O of o){const I=O.status||"reading",R=O.finishedAt||O.updatedAt||O.createdAt;if(!R||I!=="finished")continue;const F=typeof(R==null?void 0:R.toDate)=="function"?R.toDate():new Date(R);if(Number.isNaN((B=F==null?void 0:F.getTime)==null?void 0:B.call(F)))continue;const N=`${F.getFullYear()}-${String(F.getMonth()+1).padStart(2,"0")}`;if(!k.has(N))continue;const P=k.get(N);D[P].count+=1}return D},[o]),b=M.useMemo(()=>{var B;const T=new Date,D=[],k=new Map;for(let O=11;O>=0;O-=1){const I=new Date(T.getFullYear(),T.getMonth()-O,1),R=`${I.getFullYear()}-${String(I.getMonth()+1).padStart(2,"0")}`;k.set(R,D.length),D.push({key:R,year:I.getFullYear(),month:I.getMonth()+1,count:0})}for(const O of o){const I=O.createdAt||O.updatedAt||O.finishedAt;if(!I)continue;const R=typeof(I==null?void 0:I.toDate)=="function"?I.toDate():new Date(I);if(Number.isNaN((B=R==null?void 0:R.getTime)==null?void 0:B.call(R)))continue;const F=`${R.getFullYear()}-${String(R.getMonth()+1).padStart(2,"0")}`;if(!k.has(F))continue;const N=k.get(F);D[N].count+=1}return D},[o]),A=M.useMemo(()=>{var B;const T=new Date,D=[],k=new Map;for(let O=11;O>=0;O-=1){const I=new Date(T.getFullYear(),T.getMonth()-O,1),R=`${I.getFullYear()}-${String(I.getMonth()+1).padStart(2,"0")}`;k.set(R,D.length),D.push({key:R,year:I.getFullYear(),month:I.getMonth()+1,count:0})}for(const O of d){const I=O.createdAt||O.updatedAt;if(!I)continue;const R=typeof(I==null?void 0:I.toDate)=="function"?I.toDate():new Date(I);if(Number.isNaN((B=R==null?void 0:R.getTime)==null?void 0:B.call(R)))continue;const F=`${R.getFullYear()}-${String(R.getMonth()+1).padStart(2,"0")}`;if(!k.has(F))continue;const N=k.get(F);D[N].count+=1}return D},[d]),E=M.useMemo(()=>{const T=new Map;for(const k of o){const B=(k.author||"").toString().trim();B&&Xg(T,B)}const D=[...T.entries()].map(([k,B])=>({author:k,total:B}));return D.sort((k,B)=>B.total-k.total||k.author.localeCompare(B.author)),D},[o]),C=M.useMemo(()=>{const T=new Map;for(const k of o){const B=(k.publisher||"").toString().trim();B&&Xg(T,B)}const D=[...T.entries()].map(([k,B])=>({publisher:k,total:B}));return D.sort((k,B)=>B.total-k.total||k.publisher.localeCompare(B.publisher)),D},[o]);return{loading:r,error:a,summary:p,tagStats:m,monthlyFinished:x,monthlyAddedBooks:b,monthlyMemos:A,topAuthors:E,topPublishers:C,statusDistribution:g}}const L_="DEFAULT_X_AXIS_KEY",B_="DEFAULT_Y_AXIS_KEY",xee={top:20,bottom:20,left:20,right:20},wee=45,bee=25,VP=20;class _ee{constructor(e){this.value=void 0,this.listeners=void 0,this.subscribe=t=>(this.listeners.add(t),()=>{this.listeners.delete(t)}),this.getSnapshot=()=>this.value,this.update=t=>{const r=t(this.value);r!==this.value&&(this.value=r,this.listeners.forEach(i=>i(r)))},this.value=e,this.listeners=new Set}}const vy=({params:n,store:e})=>{M.useEffect(()=>{e.update(r=>H({},r,{animation:H({},r.animation,{skip:n.skipAnimation})}))},[e,n.skipAnimation]);const t=M.useCallback(()=>{let r=!1;return e.update(i=>H({},i,{animation:H({},i.animation,{skipAnimationRequests:i.animation.skipAnimationRequests+1})})),()=>{r||(r=!0,e.update(i=>H({},i,{animation:H({},i.animation,{skipAnimationRequests:i.animation.skipAnimationRequests-1})})))}},[e]);return Xn(()=>{if(typeof window>"u"||!(window!=null&&window.matchMedia))return;let i;const a=o=>{o.matches?i=t():i==null||i()},s=window.matchMedia("(prefers-reduced-motion)");return a(s),s.addEventListener("change",a),()=>{s.removeEventListener("change",a)}},[t,e]),{instance:{disableAnimation:t}}};vy.params={skipAnimation:!0};vy.getDefaultizedParams=({params:n})=>H({},n,{skipAnimation:n.skipAnimation??!1});vy.getInitialState=({skipAnimation:n})=>({animation:{skip:n,skipAnimationRequests:0}});var s1=Symbol("NOT_FOUND");function Aee(n,e=`expected a function, instead received ${typeof n}`){if(typeof n!="function")throw new TypeError(e)}function Eee(n,e=`expected an object, instead received ${typeof n}`){if(typeof n!="object")throw new TypeError(e)}function See(n,e="expected all items to be functions, instead received the following types: "){if(!n.every(t=>typeof t=="function")){const t=n.map(r=>typeof r=="function"?`function ${r.name||"unnamed"}()`:typeof r).join(", ");throw new TypeError(`${e}[${t}]`)}}var FD=n=>Array.isArray(n)?n:[n];function Cee(n){const e=Array.isArray(n[0])?n[0]:n;return See(e,"createSelector expects all input-selectors to be functions, but received the following types: "),e}function Tee(n,e){const t=[],{length:r}=n;for(let i=0;i<r;i++)t.push(n[i].apply(null,e));return t}function Iee(n){let e;return{get(t){return e&&n(e.key,t)?e.value:s1},put(t,r){e={key:t,value:r}},getEntries(){return e?[e]:[]},clear(){e=void 0}}}function Dee(n,e){let t=[];function r(o){const c=t.findIndex(d=>e(o,d.key));if(c>-1){const d=t[c];return c>0&&(t.splice(c,1),t.unshift(d)),d.value}return s1}function i(o,c){r(o)===s1&&(t.unshift({key:o,value:c}),t.length>n&&t.pop())}function a(){return t}function s(){t=[]}return{get:r,put:i,getEntries:a,clear:s}}var Ree=(n,e)=>n===e;function Mee(n){return function(t,r){if(t===null||r===null||t.length!==r.length)return!1;const{length:i}=t;for(let a=0;a<i;a++)if(!n(t[a],r[a]))return!1;return!0}}function Oee(n,e){const t=typeof e=="object"?e:{equalityCheck:e},{equalityCheck:r=Ree,maxSize:i=1,resultEqualityCheck:a}=t,s=Mee(r);let o=0;const c=i<=1?Iee(s):Dee(i,s);function d(){let f=c.get(arguments);if(f===s1){if(f=n.apply(null,arguments),o++,a){const g=c.getEntries().find(m=>a(m.value,f));g&&(f=g.value,o!==0&&o--)}c.put(arguments,f)}return f}return d.clearCache=()=>{c.clear(),d.resetResultsCount()},d.resultsCount=()=>o,d.resetResultsCount=()=>{o=0},d}var Pee=class{constructor(n){this.value=n}deref(){return this.value}},kee=typeof WeakRef<"u"?WeakRef:Pee,Nee=0,VD=1;function Kg(){return{s:Nee,v:void 0,o:null,p:null}}function jP(n,e={}){let t=Kg();const{resultEqualityCheck:r}=e;let i,a=0;function s(){var p;let o=t;const{length:c}=arguments;for(let g=0,m=c;g<m;g++){const x=arguments[g];if(typeof x=="function"||typeof x=="object"&&x!==null){let b=o.o;b===null&&(o.o=b=new WeakMap);const A=b.get(x);A===void 0?(o=Kg(),b.set(x,o)):o=A}else{let b=o.p;b===null&&(o.p=b=new Map);const A=b.get(x);A===void 0?(o=Kg(),b.set(x,o)):o=A}}const d=o;let f;if(o.s===VD)f=o.v;else if(f=n.apply(null,arguments),a++,r){const g=((p=i==null?void 0:i.deref)==null?void 0:p.call(i))??i;g!=null&&r(g,f)&&(f=g,a!==0&&a--),i=typeof f=="object"&&f!==null||typeof f=="function"?new kee(f):f}return d.s=VD,d.v=f,f}return s.clearCache=()=>{t=Kg(),s.resetResultsCount()},s.resultsCount=()=>a,s.resetResultsCount=()=>{a=0},s}function UP(n,...e){const t=typeof n=="function"?{memoize:n,memoizeOptions:e}:n,r=(...i)=>{let a=0,s=0,o,c={},d=i.pop();typeof d=="object"&&(c=d,d=i.pop()),Aee(d,`createSelector expects an output function after the inputs, but received: [${typeof d}]`);const f={...t,...c},{memoize:p,memoizeOptions:g=[],argsMemoize:m=jP,argsMemoizeOptions:x=[]}=f,b=FD(g),A=FD(x),E=Cee(i),C=p(function(){return a++,d.apply(null,arguments)},...b),T=m(function(){s++;const k=Tee(E,arguments);return o=C.apply(null,k),o},...A);return Object.assign(T,{resultFunc:d,memoizedResultFunc:C,dependencies:E,dependencyRecomputations:()=>s,resetDependencyRecomputations:()=>{s=0},lastResult:()=>o,recomputations:()=>a,resetRecomputations:()=>{a=0},memoize:p,argsMemoize:m})};return Object.assign(r,{withTypes:()=>r}),r}var Lee=UP(jP),Bee=Object.assign((n,e=Lee)=>{Eee(n,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof n}`);const t=Object.keys(n),r=t.map(a=>n[a]);return e(r,(...a)=>a.reduce((s,o,c)=>(s[t[c]]=o,s),{}))},{withTypes:()=>Bee});const Fee=UP({memoize:Oee,memoizeOptions:{maxSize:1,equalityCheck:Object.is}}),jD=new WeakMap,Ye=(...n)=>(t,...r)=>{const i=t.cacheKey;let a=jD.get(i);a||(a=new Map,jD.set(i,a));const s=a.get(n);if(s)return s(t,...r);const o=Fee(...n);return a.set(n,o),o(t,...r)},Vee=n=>n.animation,jee=Ye([Vee],n=>n.skip||n.skipAnimationRequests>0);var c2={exports:{}},u2={},d2={exports:{}},f2={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var UD;function Uee(){if(UD)return f2;UD=1;var n=Jw();function e(p,g){return p===g&&(p!==0||1/p===1/g)||p!==p&&g!==g}var t=typeof Object.is=="function"?Object.is:e,r=n.useState,i=n.useEffect,a=n.useLayoutEffect,s=n.useDebugValue;function o(p,g){var m=g(),x=r({inst:{value:m,getSnapshot:g}}),b=x[0].inst,A=x[1];return a(function(){b.value=m,b.getSnapshot=g,c(b)&&A({inst:b})},[p,m,g]),i(function(){return c(b)&&A({inst:b}),p(function(){c(b)&&A({inst:b})})},[p]),s(m),m}function c(p){var g=p.getSnapshot;p=p.value;try{var m=g();return!t(p,m)}catch{return!0}}function d(p,g){return g()}var f=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?d:o;return f2.useSyncExternalStore=n.useSyncExternalStore!==void 0?n.useSyncExternalStore:f,f2}var HD;function Hee(){return HD||(HD=1,d2.exports=Uee()),d2.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zD;function zee(){if(zD)return u2;zD=1;var n=Jw(),e=Hee();function t(d,f){return d===f&&(d!==0||1/d===1/f)||d!==d&&f!==f}var r=typeof Object.is=="function"?Object.is:t,i=e.useSyncExternalStore,a=n.useRef,s=n.useEffect,o=n.useMemo,c=n.useDebugValue;return u2.useSyncExternalStoreWithSelector=function(d,f,p,g,m){var x=a(null);if(x.current===null){var b={hasValue:!1,value:null};x.current=b}else b=x.current;x=o(function(){function E(B){if(!C){if(C=!0,T=B,B=g(B),m!==void 0&&b.hasValue){var O=b.value;if(m(O,B))return D=O}return D=B}if(O=D,r(T,B))return O;var I=g(B);return m!==void 0&&m(O,I)?(T=B,O):(T=B,D=I)}var C=!1,T,D,k=p===void 0?null:p;return[function(){return E(f())},k===null?void 0:function(){return E(k())}]},[f,p,g,m]);var A=i(d,x[0],x[1]);return s(function(){b.hasValue=!0,b.value=A},[A]),c(A),A},u2}var $D;function $ee(){return $D||($D=1,c2.exports=zee()),c2.exports}var Gee=$ee();const Wee=Object.is,pt=(n,e,t=[],r=Wee)=>{const i=a=>e(a,...t);return Gee.useSyncExternalStoreWithSelector(n.subscribe,n.getSnapshot,n.getSnapshot,i,r)},du=n=>{var e;return(e=n.cartesianAxis)==null?void 0:e.x},bf=n=>{var e;return(e=n.cartesianAxis)==null?void 0:e.y},Yee=Ye([bf],n=>(n??[]).reduce((e,t)=>{var r;return t.position==="left"?e+(t.width||0)+((r=t.zoom)!=null&&r.slider.enabled?t.zoom.slider.size:0):e},0)),qee=Ye([bf],n=>(n??[]).reduce((e,t)=>{var r;return t.position==="right"?e+(t.width||0)+((r=t.zoom)!=null&&r.slider.enabled?t.zoom.slider.size:0):e},0)),Xee=Ye([du],n=>(n??[]).reduce((e,t)=>{var r;return t.position==="top"?e+(t.height||0)+((r=t.zoom)!=null&&r.slider.enabled?t.zoom.slider.size:0):e},0)),Kee=Ye([du],n=>(n??[]).reduce((e,t)=>{var r;return t.position==="bottom"?e+(t.height||0)+((r=t.zoom)!=null&&r.slider.enabled?t.zoom.slider.size:0):e},0)),Qee=n=>n.dimensions,HP=n=>n.dimensions.width,zP=n=>n.dimensions.height,Zee=n=>n.dimensions.margin.top,Jee=n=>n.dimensions.margin.right,ete=n=>n.dimensions.margin.bottom,tte=n=>n.dimensions.margin.left,Oo=Ye([HP,zP,Zee,Jee,ete,tte,Xee,qee,Kee,Yee],(n,e,t,r,i,a,s,o,c,d)=>({width:n-a-r-d-o,left:a+d,right:r+o,height:e-t-i-s-c,top:t+s,bottom:i+c})),$P=Ye([Qee],n=>({width:n.propsWidth,height:n.propsHeight})),nte=Ye([HP,zP],(n,e)=>({width:n,height:e}));function GP(n,e){return typeof n=="number"?{top:n,bottom:n,left:n,right:n}:e?H({},e,n):n}const rte=10,xy=({params:n,store:e,svgRef:t})=>{const r=n.width!==void 0&&n.height!==void 0,i=M.useRef({displayError:!1,initialCompute:!0,computeRun:0}),[a,s]=M.useState(0),[o,c]=M.useState(0),d=M.useCallback(()=>{const x=t==null?void 0:t.current;if(!x)return{};const A=QN(x).getComputedStyle(x),E=Math.floor(parseFloat(A.height))||0,C=Math.floor(parseFloat(A.width))||0;return e.update(T=>T.dimensions.width===C&&T.dimensions.height===E?T:H({},T,{dimensions:{margin:{top:n.margin.top,right:n.margin.right,bottom:n.margin.bottom,left:n.margin.left},width:n.width??C,height:n.height??E,propsWidth:n.width,propsHeight:n.height}})),{height:E,width:C}},[e,t,n.height,n.width,n.margin.left,n.margin.right,n.margin.top,n.margin.bottom]);M.useEffect(()=>{e.update(x=>{const b=n.width??x.dimensions.width,A=n.height??x.dimensions.height;return H({},x,{dimensions:{margin:{top:n.margin.top,right:n.margin.right,bottom:n.margin.bottom,left:n.margin.left},width:b,height:A,propsHeight:n.height,propsWidth:n.width}})})},[e,n.height,n.width,n.margin.left,n.margin.right,n.margin.top,n.margin.bottom]),M.useEffect(()=>{i.current.displayError=!0},[]),Xn(()=>{if(r||!i.current.initialCompute||i.current.computeRun>rte)return;const x=d();x.width!==a||x.height!==o?(i.current.computeRun+=1,x.width!==void 0&&s(x.width),x.height!==void 0&&c(x.height)):i.current.initialCompute&&(i.current.initialCompute=!1)},[o,a,d,r]),Xn(()=>{if(r)return()=>{};d();const x=t.current;if(typeof ResizeObserver>"u")return()=>{};let b;const A=new ResizeObserver(()=>{b=requestAnimationFrame(()=>{d()})});return x&&A.observe(x),()=>{b&&cancelAnimationFrame(b),x&&A.unobserve(x)}},[d,r,t]);const f=pt(e,Oo),p=M.useCallback(x=>x>=f.left-1&&x<=f.left+f.width,[f.left,f.width]),g=M.useCallback(x=>x>=f.top-1&&x<=f.top+f.height,[f.height,f.top]);return{instance:{isPointInside:M.useCallback((x,b,A)=>A&&"closest"in A&&A.closest("[data-drawing-container]")?!0:p(x)&&g(b),[p,g]),isXInside:p,isYInside:g}}};xy.params={width:!0,height:!0,margin:!0};xy.getDefaultizedParams=({params:n})=>H({},n,{margin:GP(n.margin,xee)});xy.getInitialState=({width:n,height:e,margin:t})=>({dimensions:{margin:t,width:n??0,height:e??0,propsWidth:n,propsHeight:e}});const F_=({params:n,store:e})=>(Xn(()=>{e.update(t=>H({},t,{experimentalFeatures:n.experimentalFeatures}))},[e,n.experimentalFeatures]),{});F_.params={experimentalFeatures:!0};F_.getInitialState=({experimentalFeatures:n})=>({experimentalFeatures:n});const ite=n=>n.experimentalFeatures,WP=Ye([ite],n=>!!(n!=null&&n.preferStrictDomainInLineCharts));let GD=0;const ate=()=>(GD+=1,`mui-chart-${GD}`),V_=({params:n,store:e})=>(M.useEffect(()=>{e.update(t=>n.id===void 0||n.id===t.id.providedChartId&&t.id.chartId!==void 0?t:H({},t,{id:H({},t.id,{chartId:n.id??ate()})}))},[e,n.id]),{});V_.params={id:!0};V_.getInitialState=({id:n})=>({id:{chartId:n,providedChartId:n}});const ste=n=>n.id,ote=Ye([ste],n=>n.chartId),lte=["#4254FB","#FFB422","#FA4F58","#0DBEFF","#22BF75","#FA83B4","#FF7511"],cte=["#495AFB","#FFC758","#F35865","#30C8FF","#44CE8D","#F286B3","#FF8C39"],YP=n=>n==="dark"?cte:lte,qP=({series:n,colors:e,seriesConfig:t,dataset:r})=>{const i={};n.forEach((s,o)=>{var f;const c=t[s.type].getSeriesWithDefaultValues(s,o,e),d=c.id;if(i[s.type]===void 0&&(i[s.type]={series:{},seriesOrder:[]}),((f=i[s.type])==null?void 0:f.series[d])!==void 0)throw new Error(`MUI X Charts: series' id "${d}" is not unique.`);i[s.type].series[d]=c,i[s.type].seriesOrder.push(d)});const a={};return Object.keys(t).forEach(s=>{var c,d;const o=i[s];o!==void 0&&(a[s]=((d=(c=t[s])==null?void 0:c.seriesProcessor)==null?void 0:d.call(c,o,r))??i[s])}),a},wy=({params:n,store:e,seriesConfig:t})=>{const{series:r,dataset:i,theme:a,colors:s}=n,o=M.useRef(!0);return M.useEffect(()=>{if(o.current){o.current=!1;return}e.update(c=>H({},c,{series:H({},c.series,{processedSeries:qP({series:r,colors:typeof s=="function"?s(a):s,seriesConfig:t,dataset:i})})}))},[s,i,r,a,t,e]),{}};wy.params={dataset:!0,series:!0,colors:!0,theme:!0};const ute=[];wy.getDefaultizedParams=({params:n})=>{var e;return H({},n,{series:(e=n.series)!=null&&e.length?n.series:ute,colors:n.colors??YP,theme:n.theme??"light"})};wy.getInitialState=({series:n=[],colors:e,theme:t,dataset:r},i,a)=>({series:{seriesConfig:a,processedSeries:qP({series:n,colors:typeof e=="function"?e(t):e,seriesConfig:a,dataset:r})}});const XP=n=>n.series,es=Ye([XP],n=>n.processedSeries),Po=Ye([XP],n=>n.seriesConfig),dte={abort:!0,animationcancel:!0,animationend:!0,animationiteration:!0,animationstart:!0,auxclick:!0,beforeinput:!0,beforetoggle:!0,blur:!0,cancel:!0,canplay:!0,canplaythrough:!0,change:!0,click:!0,close:!0,compositionend:!0,compositionstart:!0,compositionupdate:!0,contextlost:!0,contextmenu:!0,contextrestored:!0,copy:!0,cuechange:!0,cut:!0,dblclick:!0,drag:!0,dragend:!0,dragenter:!0,dragleave:!0,dragover:!0,dragstart:!0,drop:!0,durationchange:!0,emptied:!0,ended:!0,error:!0,focus:!0,focusin:!0,focusout:!0,formdata:!0,gotpointercapture:!0,input:!0,invalid:!0,keydown:!0,keypress:!0,keyup:!0,load:!0,loadeddata:!0,loadedmetadata:!0,loadstart:!0,lostpointercapture:!0,mousedown:!0,mouseenter:!0,mouseleave:!0,mousemove:!0,mouseout:!0,mouseover:!0,mouseup:!0,paste:!0,pause:!0,play:!0,playing:!0,pointercancel:!0,pointerdown:!0,pointerenter:!0,pointerleave:!0,pointermove:!0,pointerout:!0,pointerover:!0,pointerup:!0,progress:!0,ratechange:!0,reset:!0,resize:!0,scroll:!0,scrollend:!0,securitypolicyviolation:!0,seeked:!0,seeking:!0,select:!0,selectionchange:!0,selectstart:!0,slotchange:!0,stalled:!0,submit:!0,suspend:!0,timeupdate:!0,toggle:!0,touchcancel:!0,touchend:!0,touchmove:!0,touchstart:!0,transitioncancel:!0,transitionend:!0,transitionrun:!0,transitionstart:!0,volumechange:!0,waiting:!0,webkitanimationend:!0,webkitanimationiteration:!0,webkitanimationstart:!0,webkittransitionend:!0,wheel:!0,beforematch:!0,pointerrawupdate:!0};class KP{constructor(e){if(this.name=void 0,this.preventDefault=void 0,this.stopPropagation=void 0,this.preventIf=void 0,this.requiredKeys=void 0,this.keyboardManager=void 0,this.pointerMode=void 0,this.customData={},this.pointerManager=void 0,this.gesturesRegistry=void 0,this.element=void 0,this.state=void 0,this.isSinglePhase=void 0,this.eventType=void 0,this.optionsType=void 0,this.mutableOptionsType=void 0,this.mutableStateType=void 0,!e||!e.name)throw new Error("Gesture must be initialized with a valid name.");if(e.name in dte)throw new Error(`Gesture can't be created with a native event name. Tried to use "${e.name}". Please use a custom name instead.`);this.name=e.name,this.preventDefault=e.preventDefault??!1,this.stopPropagation=e.stopPropagation??!1,this.preventIf=e.preventIf??[],this.requiredKeys=e.requiredKeys??[],this.pointerMode=e.pointerMode??[]}init(e,t,r,i){this.element=e,this.pointerManager=t,this.gesturesRegistry=r,this.keyboardManager=i;const a=`${this.name}ChangeOptions`;this.element.addEventListener(a,this.handleOptionsChange.bind(this));const s=`${this.name}ChangeState`;this.element.addEventListener(s,this.handleStateChange.bind(this))}handleOptionsChange(e){e&&e.detail&&this.updateOptions(e.detail)}updateOptions(e){this.preventDefault=e.preventDefault??this.preventDefault,this.stopPropagation=e.stopPropagation??this.stopPropagation,this.preventIf=e.preventIf??this.preventIf,this.requiredKeys=e.requiredKeys??this.requiredKeys,this.pointerMode=e.pointerMode??this.pointerMode}handleStateChange(e){e&&e.detail&&this.updateState(e.detail)}updateState(e){Object.assign(this.state,e)}getTargetElement(e){return this.isActive||this.element===e.target||"contains"in this.element&&this.element.contains(e.target)||"getRootNode"in this.element&&this.element.getRootNode()instanceof ShadowRoot&&e.composedPath().includes(this.element)?this.element:null}set isActive(e){e?this.gesturesRegistry.registerActiveGesture(this.element,this):this.gesturesRegistry.unregisterActiveGesture(this.element,this)}get isActive(){return this.gesturesRegistry.isGestureActive(this.element,this)??!1}shouldPreventGesture(e){if(!this.keyboardManager.areKeysPressed(this.requiredKeys))return!0;if(this.preventIf.length===0)return!1;const t=this.gesturesRegistry.getActiveGestures(e);return this.preventIf.some(r=>t[r])}isPointerTypeAllowed(e){return!this.pointerMode||this.pointerMode.length===0?!0:this.pointerMode.includes(e)}destroy(){const e=`${this.name}ChangeOptions`;this.element.removeEventListener(e,this.handleOptionsChange.bind(this));const t=`${this.name}ChangeState`;this.element.removeEventListener(t,this.handleStateChange.bind(this))}}class fte{constructor(){this.activeGestures=new Map}registerActiveGesture(e,t){this.activeGestures.has(e)||this.activeGestures.set(e,new Set);const r=this.activeGestures.get(e),i={gesture:t,element:e};r.add(i)}unregisterActiveGesture(e,t){const r=this.activeGestures.get(e);r&&(r.forEach(i=>{i.gesture===t&&r.delete(i)}),r.size===0&&this.activeGestures.delete(e))}getActiveGestures(e){const t=this.activeGestures.get(e);return t?Array.from(t).reduce((r,i)=>(r[i.gesture.name]=!0,r),{}):{}}isGestureActive(e,t){const r=this.activeGestures.get(e);return r?Array.from(r).some(i=>i.gesture===t):!1}destroy(){this.activeGestures.clear()}unregisterElement(e){this.activeGestures.delete(e)}}class hte{constructor(){this.pressedKeys=new Set,this.handleKeyDown=e=>{this.pressedKeys.add(e.key)},this.handleKeyUp=e=>{this.pressedKeys.delete(e.key)},this.clearKeys=()=>{this.pressedKeys.clear()},this.initialize()}initialize(){typeof window>"u"||(window.addEventListener("keydown",this.handleKeyDown),window.addEventListener("keyup",this.handleKeyUp),window.addEventListener("blur",this.clearKeys))}areKeysPressed(e){return!e||e.length===0?!0:e.every(t=>t==="ControlOrMeta"?this.pressedKeys.has("Control")||this.pressedKeys.has("Meta"):this.pressedKeys.has(t))}destroy(){typeof window<"u"&&(window.removeEventListener("keydown",this.handleKeyDown),window.removeEventListener("keyup",this.handleKeyUp),window.removeEventListener("blur",this.clearKeys)),this.clearKeys()}}class pte{constructor(e){this.root=void 0,this.touchAction=void 0,this.passive=void 0,this.preventEventInterruption=!0,this.pointers=new Map,this.gestureHandlers=new Set,this.handleInterruptEvents=t=>{if(this.preventEventInterruption&&"pointerType"in t&&t.pointerType==="touch"){t.preventDefault();return}const r=new PointerEvent("forceCancel",{bubbles:!1,cancelable:!1}),i=this.pointers.values().next().value;if(this.pointers.size>0&&i){Object.defineProperties(r,{clientX:{value:i.clientX},clientY:{value:i.clientY},pointerId:{value:i.pointerId},pointerType:{value:i.pointerType}});for(const[a,s]of this.pointers.entries()){const o=H({},s,{type:"forceCancel"});this.pointers.set(a,o)}}this.notifyHandlers(r),this.pointers.clear()},this.handlePointerEvent=t=>{const{type:r,pointerId:i}=t;if(r==="pointerdown"||r==="pointermove")this.pointers.set(i,this.createPointerData(t));else if(r==="pointerup"||r==="pointercancel"||r==="forceCancel"){this.pointers.set(i,this.createPointerData(t)),this.notifyHandlers(t),this.pointers.delete(i);return}this.notifyHandlers(t)},this.root=e.root??document.getRootNode({composed:!0}),this.touchAction=e.touchAction||"auto",this.passive=e.passive??!1,this.preventEventInterruption=e.preventEventInterruption??!1,this.setupEventListeners()}registerGestureHandler(e){return this.gestureHandlers.add(e),()=>{this.gestureHandlers.delete(e)}}getPointers(){return new Map(this.pointers)}setupEventListeners(){this.touchAction!=="auto"&&(this.root.style.touchAction=this.touchAction),this.root.addEventListener("pointerdown",this.handlePointerEvent,{passive:this.passive}),this.root.addEventListener("pointermove",this.handlePointerEvent,{passive:this.passive}),this.root.addEventListener("pointerup",this.handlePointerEvent,{passive:this.passive}),this.root.addEventListener("pointercancel",this.handlePointerEvent,{passive:this.passive}),this.root.addEventListener("forceCancel",this.handlePointerEvent,{passive:this.passive}),this.root.addEventListener("blur",this.handleInterruptEvents),this.root.addEventListener("contextmenu",this.handleInterruptEvents)}notifyHandlers(e){this.gestureHandlers.forEach(t=>t(this.pointers,e))}createPointerData(e){return{pointerId:e.pointerId,clientX:e.clientX,clientY:e.clientY,pageX:e.pageX,pageY:e.pageY,target:e.target,timeStamp:e.timeStamp,type:e.type,isPrimary:e.isPrimary,pressure:e.pressure,width:e.width,height:e.height,pointerType:e.pointerType,srcEvent:e}}destroy(){this.root.removeEventListener("pointerdown",this.handlePointerEvent),this.root.removeEventListener("pointermove",this.handlePointerEvent),this.root.removeEventListener("pointerup",this.handlePointerEvent),this.root.removeEventListener("pointercancel",this.handlePointerEvent),this.root.removeEventListener("forceCancel",this.handlePointerEvent),this.root.removeEventListener("blur",this.handleInterruptEvents),this.root.removeEventListener("contextmenu",this.handleInterruptEvents),this.pointers.clear(),this.gestureHandlers.clear()}}class gte{constructor(e){this.gestureTemplates=new Map,this.elementGestureMap=new Map,this.activeGesturesRegistry=new fte,this.pointerManager=void 0,this.keyboardManager=new hte,this.pointerManager=new pte({root:e.root,touchAction:e.touchAction,passive:e.passive}),e.gestures&&e.gestures.length>0&&e.gestures.forEach(t=>{this.addGestureTemplate(t)})}addGestureTemplate(e){this.gestureTemplates.has(e.name)&&console.warn(`Gesture template with name "${e.name}" already exists. It will be overwritten.`),this.gestureTemplates.set(e.name,e)}setGestureOptions(e,t,r){const i=this.elementGestureMap.get(t);if(!i||!i.has(e)){console.error(`Gesture "${e}" not found on the provided element.`);return}const a=new CustomEvent(`${e}ChangeOptions`,{detail:r,bubbles:!1,cancelable:!1,composed:!1});t.dispatchEvent(a)}setGestureState(e,t,r){const i=this.elementGestureMap.get(t);if(!i||!i.has(e)){console.error(`Gesture "${e}" not found on the provided element.`);return}const a=new CustomEvent(`${e}ChangeState`,{detail:r,bubbles:!1,cancelable:!1,composed:!1});t.dispatchEvent(a)}registerElement(e,t,r){return Array.isArray(e)||(e=[e]),e.forEach(i=>{const a=r==null?void 0:r[i];this.registerSingleGesture(i,t,a)}),t}registerSingleGesture(e,t,r){const i=this.gestureTemplates.get(e);if(!i)return console.error(`Gesture template "${e}" not found.`),!1;this.elementGestureMap.has(t)||this.elementGestureMap.set(t,new Map);const a=this.elementGestureMap.get(t);a.has(e)&&(console.warn(`Element already has gesture "${e}" registered. It will be replaced.`),this.unregisterElement(e,t));const s=i.clone(r);return s.init(t,this.pointerManager,this.activeGesturesRegistry,this.keyboardManager),a.set(e,s),!0}unregisterElement(e,t){const r=this.elementGestureMap.get(t);return!r||!r.has(e)?!1:(r.get(e).destroy(),r.delete(e),this.activeGesturesRegistry.unregisterElement(t),r.size===0&&this.elementGestureMap.delete(t),!0)}unregisterAllGestures(e){const t=this.elementGestureMap.get(e);if(t){for(const[,r]of t)r.destroy(),this.activeGesturesRegistry.unregisterElement(e);this.elementGestureMap.delete(e)}}destroy(){for(const[e]of this.elementGestureMap)this.unregisterAllGestures(e);this.gestureTemplates.clear(),this.elementGestureMap.clear(),this.activeGesturesRegistry.destroy(),this.keyboardManager.destroy(),this.pointerManager.destroy()}}class ep extends KP{constructor(e){super(e),this.unregisterHandler=null,this.originalTarget=null,this.optionsType=void 0,this.mutableOptionsType=void 0,this.minPointers=void 0,this.maxPointers=void 0,this.minPointers=e.minPointers??1,this.maxPointers=e.maxPointers??1/0}init(e,t,r,i){super.init(e,t,r,i),this.unregisterHandler=this.pointerManager.registerGestureHandler(this.handlePointerEvent.bind(this))}updateOptions(e){super.updateOptions(e),this.minPointers=e.minPointers??this.minPointers,this.maxPointers=e.maxPointers??this.maxPointers}getRelevantPointers(e,t){return e.filter(r=>this.isPointerTypeAllowed(r.pointerType)&&(t===r.target||r.target===this.originalTarget||t===this.originalTarget||"contains"in t&&t.contains(r.target))||"getRootNode"in t&&t.getRootNode()instanceof ShadowRoot&&r.srcEvent.composedPath().includes(t))}destroy(){this.unregisterHandler&&(this.unregisterHandler(),this.unregisterHandler=null),super.destroy()}}function mte(n,e){const t=e.x-n.x,r=e.y-n.y;return Math.sqrt(t*t+r*r)}function h2(n){if(n.length<2)return 0;let e=0,t=0;for(let r=0;r<n.length;r+=1)for(let i=r+1;i<n.length;i+=1)e+=mte({x:n[r].clientX,y:n[r].clientY},{x:n[i].clientX,y:n[i].clientY}),t+=1;return t>0?e/t:0}function To(n){if(n.length===0)return{x:0,y:0};const e=n.reduce((t,r)=>(t.x+=r.clientX,t.y+=r.clientY,t),{x:0,y:0});return{x:e.x/n.length,y:e.y/n.length}}function _f(n,e){return`${n}${e==="ongoing"?"":e.charAt(0).toUpperCase()+e.slice(1)}`}const Qg=1e-5,gl=1e-5,WD=.15;function yte(n,e){const t=e.x-n.x,r=e.y-n.y,i={vertical:null,horizontal:null,mainAxis:null},a=vte(e,n),s=Math.abs(t)>Math.abs(r)?"horizontal":"vertical",o=a||s==="horizontal"?Qg:WD,c=a?Qg:s==="horizontal"?WD:Qg;return Math.abs(t)>o&&(i.horizontal=t>0?"right":"left"),Math.abs(r)>c&&(i.vertical=r>0?"down":"up"),i.mainAxis=a?"diagonal":s,i}function vte(n,e){const t=e.x-n.x,r=e.y-n.y,i=Math.atan2(r,t)*180/Math.PI;return i>=-45+gl&&i<=-22.5+gl||i>=22.5+gl&&i<=45+gl||i>=135+gl&&i<=157.5+gl||i>=-157.5+gl&&i<=-135+gl}function xte(n,e){if(!n.vertical&&!n.horizontal)return!1;if(e.length===0)return!0;const t=n.vertical===null||e.includes(n.vertical),r=n.horizontal===null||e.includes(n.horizontal);return t&&r}const YD=0,wte=n=>n>YD?1:n<-YD?-1:0;class j_ extends ep{constructor(e){super(e),this.state={lastPosition:null},this.isSinglePhase=void 0,this.eventType=void 0,this.optionsType=void 0,this.mutableOptionsType=void 0,this.mutableStateType=void 0,this.threshold=void 0,this.handleElementEnterBound=void 0,this.handleElementLeaveBound=void 0,this.handleElementEnterBound=this.handleElementEnter.bind(this),this.handleElementLeaveBound=this.handleElementLeave.bind(this),this.threshold=e.threshold||0}clone(e){return new j_(H({name:this.name,preventDefault:this.preventDefault,stopPropagation:this.stopPropagation,threshold:this.threshold,minPointers:this.minPointers,maxPointers:this.maxPointers,requiredKeys:[...this.requiredKeys],pointerMode:[...this.pointerMode],preventIf:[...this.preventIf]},e))}init(e,t,r,i){super.init(e,t,r,i),this.element.addEventListener("pointerenter",this.handleElementEnterBound),this.element.addEventListener("pointerleave",this.handleElementLeaveBound)}destroy(){this.element.removeEventListener("pointerenter",this.handleElementEnterBound),this.element.removeEventListener("pointerleave",this.handleElementLeaveBound),this.resetState(),super.destroy()}updateOptions(e){super.updateOptions(e)}resetState(){this.isActive=!1,this.state={lastPosition:null}}handleElementEnter(e){if(e.pointerType!=="mouse"&&e.pointerType!=="pen")return;const t=this.pointerManager.getPointers()||new Map,r=Array.from(t.values());if(r.length>=this.minPointers&&r.length<=this.maxPointers){this.isActive=!0;const i={x:e.clientX,y:e.clientY};this.state.lastPosition=i,this.emitMoveEvent(this.element,"start",r,e),this.emitMoveEvent(this.element,"ongoing",r,e)}}handleElementLeave(e){if(e.pointerType!=="mouse"&&e.pointerType!=="pen"||!this.isActive)return;const t=this.pointerManager.getPointers()||new Map,r=Array.from(t.values());this.emitMoveEvent(this.element,"end",r,e),this.resetState()}handlePointerEvent(e,t){if(t.type!=="pointermove"||t.pointerType!=="mouse"&&t.pointerType!=="pen")return;this.preventDefault&&t.preventDefault(),this.stopPropagation&&t.stopPropagation();const r=Array.from(e.values()),i=this.getTargetElement(t);if(!i||r.length<this.minPointers||r.length>this.maxPointers)return;if(this.shouldPreventGesture(i)){if(!this.isActive)return;this.resetState(),this.emitMoveEvent(i,"end",r,t);return}const a={x:t.clientX,y:t.clientY};this.state.lastPosition=a,this.isActive||(this.isActive=!0,this.emitMoveEvent(i,"start",r,t)),this.emitMoveEvent(i,"ongoing",r,t)}emitMoveEvent(e,t,r,i){const a=this.state.lastPosition||To(r),s=this.gesturesRegistry.getActiveGestures(e),o={gestureName:this.name,centroid:a,target:i.target,srcEvent:i,phase:t,pointers:r,timeStamp:i.timeStamp,activeGestures:s,customData:this.customData},c=_f(this.name,t),d=new CustomEvent(c,{bubbles:!0,cancelable:!0,composed:!0,detail:o});e.dispatchEvent(d)}}class U_ extends ep{constructor(e){super(e),this.state={startPointers:new Map,startCentroid:null,lastCentroid:null,movementThresholdReached:!1,totalDeltaX:0,totalDeltaY:0,activeDeltaX:0,activeDeltaY:0,lastDirection:{vertical:null,horizontal:null,mainAxis:null},lastDeltas:null},this.isSinglePhase=void 0,this.eventType=void 0,this.optionsType=void 0,this.mutableOptionsType=void 0,this.mutableStateType=void 0,this.threshold=void 0,this.direction=void 0,this.direction=e.direction||["up","down","left","right"],this.threshold=e.threshold||0}clone(e){return new U_(H({name:this.name,preventDefault:this.preventDefault,stopPropagation:this.stopPropagation,threshold:this.threshold,minPointers:this.minPointers,maxPointers:this.maxPointers,direction:[...this.direction],requiredKeys:[...this.requiredKeys],pointerMode:[...this.pointerMode],preventIf:[...this.preventIf]},e))}destroy(){this.resetState(),super.destroy()}updateOptions(e){super.updateOptions(e),this.direction=e.direction||this.direction}resetState(){this.isActive=!1,this.state=H({},this.state,{startPointers:new Map,startCentroid:null,lastCentroid:null,lastDeltas:null,activeDeltaX:0,activeDeltaY:0,movementThresholdReached:!1,lastDirection:{vertical:null,horizontal:null,mainAxis:null}})}handlePointerEvent(e,t){const r=Array.from(e.values());if(t.type==="forceCancel"){this.cancel(t.target,r,t);return}const i=this.getTargetElement(t);if(!i)return;if(this.shouldPreventGesture(i)){this.cancel(i,r,t);return}const a=this.getRelevantPointers(r,i);if(a.length<this.minPointers||a.length>this.maxPointers){this.cancel(i,a,t);return}switch(t.type){case"pointerdown":!this.isActive&&!this.state.startCentroid&&(a.forEach(s=>{this.state.startPointers.set(s.pointerId,s)}),this.originalTarget=i,this.state.startCentroid=To(a),this.state.lastCentroid=H({},this.state.startCentroid));break;case"pointermove":if(this.state.startCentroid&&a.length>=this.minPointers){const s=To(a),o=s.x-this.state.startCentroid.x,c=s.y-this.state.startCentroid.y,d=Math.sqrt(o*o+c*c),f=yte(this.state.lastCentroid??this.state.startCentroid,s),p=this.state.lastCentroid?s.x-this.state.lastCentroid.x:0,g=this.state.lastCentroid?s.y-this.state.lastCentroid.y:0;!this.state.movementThresholdReached&&d>=this.threshold&&xte(f,this.direction)?(this.state.movementThresholdReached=!0,this.isActive=!0,this.state.lastDeltas={x:p,y:g},this.state.totalDeltaX+=p,this.state.totalDeltaY+=g,this.state.activeDeltaX+=p,this.state.activeDeltaY+=g,this.emitPanEvent(i,"start",a,t,s),this.emitPanEvent(i,"ongoing",a,t,s)):this.state.movementThresholdReached&&this.isActive&&(this.state.lastDeltas={x:p,y:g},this.state.totalDeltaX+=p,this.state.totalDeltaY+=g,this.state.activeDeltaX+=p,this.state.activeDeltaY+=g,this.emitPanEvent(i,"ongoing",a,t,s)),this.state.lastCentroid=s,this.state.lastDirection=f}break;case"pointerup":case"pointercancel":case"forceCancel":if(this.isActive&&this.state.movementThresholdReached){if(a.filter(s=>s.type!=="pointerup"&&s.type!=="pointercancel").length<this.minPointers){const s=this.state.lastCentroid||this.state.startCentroid;t.type==="pointercancel"&&this.emitPanEvent(i,"cancel",a,t,s),this.emitPanEvent(i,"end",a,t,s),this.resetState()}}else this.resetState();break}}emitPanEvent(e,t,r,i,a){var E,C;if(!this.state.startCentroid)return;const s=((E=this.state.lastDeltas)==null?void 0:E.x)??0,o=((C=this.state.lastDeltas)==null?void 0:C.y)??0,c=this.state.startPointers.values().next().value,d=c?(i.timeStamp-c.timeStamp)/1e3:0,f=d>0?s/d:0,p=d>0?o/d:0,g=Math.sqrt(f*f+p*p),m=this.gesturesRegistry.getActiveGestures(e),x={gestureName:this.name,initialCentroid:this.state.startCentroid,centroid:a,target:i.target,srcEvent:i,phase:t,pointers:r,timeStamp:i.timeStamp,deltaX:s,deltaY:o,direction:this.state.lastDirection,velocityX:f,velocityY:p,velocity:g,totalDeltaX:this.state.totalDeltaX,totalDeltaY:this.state.totalDeltaY,activeDeltaX:this.state.activeDeltaX,activeDeltaY:this.state.activeDeltaY,activeGestures:m,customData:this.customData},b=_f(this.name,t),A=new CustomEvent(b,{bubbles:!0,cancelable:!0,composed:!0,detail:x});e.dispatchEvent(A),this.preventDefault&&i.preventDefault(),this.stopPropagation&&i.stopPropagation()}cancel(e,t,r){if(this.isActive){const i=e??this.element;this.emitPanEvent(i,"cancel",t,r,this.state.lastCentroid),this.emitPanEvent(i,"end",t,r,this.state.lastCentroid)}this.resetState()}}class H_ extends ep{constructor(e){super(H({},e,{minPointers:e.minPointers??2})),this.state={startDistance:0,lastDistance:0,lastScale:1,lastTime:0,velocity:0,totalScale:1,deltaScale:0},this.isSinglePhase=void 0,this.eventType=void 0,this.optionsType=void 0,this.mutableOptionsType=void 0,this.mutableStateType=void 0,this.threshold=void 0,this.threshold=e.threshold??0}clone(e){return new H_(H({name:this.name,preventDefault:this.preventDefault,stopPropagation:this.stopPropagation,threshold:this.threshold,minPointers:this.minPointers,maxPointers:this.maxPointers,requiredKeys:[...this.requiredKeys],pointerMode:[...this.pointerMode],preventIf:[...this.preventIf]},e))}destroy(){this.resetState(),super.destroy()}updateOptions(e){super.updateOptions(e)}resetState(){this.isActive=!1,this.state=H({},this.state,{startDistance:0,lastDistance:0,lastScale:1,lastTime:0,velocity:0,deltaScale:0})}handlePointerEvent(e,t){const r=Array.from(e.values()),i=this.getTargetElement(t);if(!i)return;if(this.shouldPreventGesture(i)){this.isActive&&(this.emitPinchEvent(i,"cancel",r,t),this.resetState());return}const a=this.getRelevantPointers(r,i);switch(t.type){case"pointerdown":if(a.length>=2&&!this.isActive){const s=h2(a);this.state.startDistance=s,this.state.lastDistance=s,this.state.lastTime=t.timeStamp,this.originalTarget=i}break;case"pointermove":if(this.state.startDistance&&a.length>=this.minPointers){const s=h2(a),o=Math.abs(s-this.state.lastDistance);if(o!==0&&o>=this.threshold){const c=this.state.startDistance?s/this.state.startDistance:1,d=c/this.state.lastScale;this.state.totalScale*=d;const f=(t.timeStamp-this.state.lastTime)/1e3;if(this.state.lastDistance){const g=(s-this.state.lastDistance)/f;this.state.velocity=Number.isNaN(g)?0:g}this.state.lastDistance=s,this.state.deltaScale=c-this.state.lastScale,this.state.lastScale=c,this.state.lastTime=t.timeStamp,this.isActive?this.emitPinchEvent(i,"ongoing",a,t):(this.isActive=!0,this.emitPinchEvent(i,"start",a,t),this.emitPinchEvent(i,"ongoing",a,t))}}break;case"pointerup":case"pointercancel":case"forceCancel":if(this.isActive){const s=a.filter(o=>o.type!=="pointerup"&&o.type!=="pointercancel");if(s.length<this.minPointers)t.type==="pointercancel"&&this.emitPinchEvent(i,"cancel",a,t),this.emitPinchEvent(i,"end",a,t),this.resetState();else if(s.length>=2){const o=h2(s);this.state.startDistance=o/this.state.lastScale}}break}}emitPinchEvent(e,t,r,i){const a=To(r),s=this.state.lastDistance,o=this.state.lastScale,c=this.gesturesRegistry.getActiveGestures(e),d={gestureName:this.name,centroid:a,target:i.target,srcEvent:i,phase:t,pointers:r,timeStamp:i.timeStamp,scale:o,deltaScale:this.state.deltaScale,totalScale:this.state.totalScale,distance:s,velocity:this.state.velocity,activeGestures:c,direction:wte(this.state.velocity),customData:this.customData};this.preventDefault&&i.preventDefault(),this.stopPropagation&&i.stopPropagation();const f=_f(this.name,t),p=new CustomEvent(f,{bubbles:!0,cancelable:!0,composed:!0,detail:d});e.dispatchEvent(p)}}class z_ extends ep{constructor(e){super(e),this.state={startCentroid:null,lastPosition:null,timerId:null,startTime:0,pressThresholdReached:!1},this.isSinglePhase=void 0,this.eventType=void 0,this.optionsType=void 0,this.mutableOptionsType=void 0,this.mutableStateType=void 0,this.duration=void 0,this.maxDistance=void 0,this.duration=e.duration??500,this.maxDistance=e.maxDistance??10}clone(e){return new z_(H({name:this.name,preventDefault:this.preventDefault,stopPropagation:this.stopPropagation,minPointers:this.minPointers,maxPointers:this.maxPointers,duration:this.duration,maxDistance:this.maxDistance,requiredKeys:[...this.requiredKeys],pointerMode:[...this.pointerMode],preventIf:[...this.preventIf]},e))}destroy(){this.clearPressTimer(),this.resetState(),super.destroy()}updateOptions(e){super.updateOptions(e),this.duration=e.duration??this.duration,this.maxDistance=e.maxDistance??this.maxDistance}resetState(){this.clearPressTimer(),this.isActive=!1,this.state=H({},this.state,{startCentroid:null,lastPosition:null,timerId:null,startTime:0,pressThresholdReached:!1})}clearPressTimer(){this.state.timerId!==null&&(clearTimeout(this.state.timerId),this.state.timerId=null)}handlePointerEvent(e,t){const r=Array.from(e.values());if(t.type==="forceCancel"){this.cancelPress(t.target,r,t);return}const i=this.getTargetElement(t);if(!i)return;if(this.shouldPreventGesture(i)){this.isActive&&this.cancelPress(i,r,t);return}const a=this.getRelevantPointers(r,i);if(a.length<this.minPointers||a.length>this.maxPointers){this.isActive&&this.cancelPress(i,a,t);return}switch(t.type){case"pointerdown":!this.isActive&&!this.state.startCentroid&&(this.state.startCentroid=To(a),this.state.lastPosition=H({},this.state.startCentroid),this.state.startTime=t.timeStamp,this.isActive=!0,this.originalTarget=i,this.clearPressTimer(),this.state.timerId=setTimeout(()=>{if(this.isActive&&this.state.startCentroid){this.state.pressThresholdReached=!0;const s=this.state.lastPosition;this.emitPressEvent(i,"start",a,t,s),this.emitPressEvent(i,"ongoing",a,t,s)}},this.duration));break;case"pointermove":if(this.isActive&&this.state.startCentroid){const s=To(a);this.state.lastPosition=s;const o=s.x-this.state.startCentroid.x,c=s.y-this.state.startCentroid.y;Math.sqrt(o*o+c*c)>this.maxDistance&&this.cancelPress(i,a,t)}break;case"pointerup":if(this.isActive){if(this.state.pressThresholdReached){const s=this.state.lastPosition||this.state.startCentroid;this.emitPressEvent(i,"end",a,t,s)}this.resetState()}break;case"pointercancel":case"forceCancel":this.cancelPress(i,a,t);break}}emitPressEvent(e,t,r,i,a){const s=this.gesturesRegistry.getActiveGestures(e),o=i.timeStamp-this.state.startTime,c={gestureName:this.name,centroid:a,target:i.target,srcEvent:i,phase:t,pointers:r,timeStamp:i.timeStamp,x:a.x,y:a.y,duration:o,activeGestures:s,customData:this.customData},d=_f(this.name,t),f=new CustomEvent(d,{bubbles:!0,cancelable:!0,composed:!0,detail:c});e.dispatchEvent(f),this.preventDefault&&i.preventDefault(),this.stopPropagation&&i.stopPropagation()}cancelPress(e,t,r){if(this.isActive&&this.state.pressThresholdReached){const i=this.state.lastPosition||this.state.startCentroid;this.emitPressEvent(e??this.element,"cancel",t,r,i),this.emitPressEvent(e??this.element,"end",t,r,i)}this.resetState()}}class $_ extends ep{constructor(e){super(e),this.state={startCentroid:null,currentTapCount:0,lastTapTime:0,lastPosition:null},this.isSinglePhase=void 0,this.eventType=void 0,this.optionsType=void 0,this.mutableOptionsType=void 0,this.mutableStateType=void 0,this.maxDistance=void 0,this.taps=void 0,this.maxDistance=e.maxDistance??10,this.taps=e.taps??1}clone(e){return new $_(H({name:this.name,preventDefault:this.preventDefault,stopPropagation:this.stopPropagation,minPointers:this.minPointers,maxPointers:this.maxPointers,maxDistance:this.maxDistance,taps:this.taps,requiredKeys:[...this.requiredKeys],pointerMode:[...this.pointerMode],preventIf:[...this.preventIf]},e))}destroy(){this.resetState(),super.destroy()}updateOptions(e){super.updateOptions(e),this.maxDistance=e.maxDistance??this.maxDistance,this.taps=e.taps??this.taps}resetState(){this.isActive=!1,this.state={startCentroid:null,currentTapCount:0,lastTapTime:0,lastPosition:null}}handlePointerEvent(e,t){const r=Array.from(e.values()),i=this.getTargetElement(t);if(!i)return;const a=this.getRelevantPointers(r,i);if(this.shouldPreventGesture(i)||a.length<this.minPointers||a.length>this.maxPointers){this.isActive&&this.cancelTap(i,a,t);return}switch(t.type){case"pointerdown":this.isActive||(this.state.startCentroid=To(a),this.state.lastPosition=H({},this.state.startCentroid),this.isActive=!0,this.originalTarget=i);break;case"pointermove":if(this.isActive&&this.state.startCentroid){const s=To(a);this.state.lastPosition=s;const o=s.x-this.state.startCentroid.x,c=s.y-this.state.startCentroid.y;Math.sqrt(o*o+c*c)>this.maxDistance&&this.cancelTap(i,a,t)}break;case"pointerup":if(this.isActive){this.state.currentTapCount+=1;const s=this.state.lastPosition||this.state.startCentroid;if(!s){this.cancelTap(i,a,t);return}this.state.currentTapCount>=this.taps?(this.fireTapEvent(i,a,t,s),this.resetState()):(this.state.lastTapTime=t.timeStamp,this.isActive=!1,this.state.startCentroid=null,setTimeout(()=>{this.state&&this.state.currentTapCount>0&&this.state.currentTapCount<this.taps&&(this.state.currentTapCount=0)},300))}break;case"pointercancel":case"forceCancel":this.cancelTap(i,a,t);break}}fireTapEvent(e,t,r,i){const a=this.gesturesRegistry.getActiveGestures(e),s={gestureName:this.name,centroid:i,target:r.target,srcEvent:r,phase:"end",pointers:t,timeStamp:r.timeStamp,x:i.x,y:i.y,tapCount:this.state.currentTapCount,activeGestures:a,customData:this.customData},o=new CustomEvent(this.name,{bubbles:!0,cancelable:!0,composed:!0,detail:s});e.dispatchEvent(o),this.preventDefault&&r.preventDefault(),this.stopPropagation&&r.stopPropagation()}cancelTap(e,t,r){if(this.state.startCentroid||this.state.lastPosition){const i=this.state.lastPosition||this.state.startCentroid,a=this.gesturesRegistry.getActiveGestures(e),s={gestureName:this.name,centroid:i,target:r.target,srcEvent:r,phase:"cancel",pointers:t,timeStamp:r.timeStamp,x:i.x,y:i.y,tapCount:this.state.currentTapCount,activeGestures:a,customData:this.customData},o=_f(this.name,"cancel"),c=new CustomEvent(o,{bubbles:!0,cancelable:!0,composed:!0,detail:s});e.dispatchEvent(c)}this.resetState()}}class G_ extends KP{constructor(e){super(e),this.state={totalDeltaX:0,totalDeltaY:0,totalDeltaZ:0},this.isSinglePhase=void 0,this.eventType=void 0,this.optionsType=void 0,this.mutableOptionsType=void 0,this.mutableStateType=void 0,this.sensitivity=void 0,this.max=void 0,this.min=void 0,this.initialDelta=void 0,this.invert=void 0,this.handleWheelEventBound=void 0,this.sensitivity=e.sensitivity??1,this.max=e.max??Number.MAX_SAFE_INTEGER,this.min=e.min??Number.MIN_SAFE_INTEGER,this.initialDelta=e.initialDelta??0,this.invert=e.invert??!1,this.state.totalDeltaX=this.initialDelta,this.state.totalDeltaY=this.initialDelta,this.state.totalDeltaZ=this.initialDelta,this.handleWheelEventBound=this.handleWheelEvent.bind(this)}clone(e){return new G_(H({name:this.name,preventDefault:this.preventDefault,stopPropagation:this.stopPropagation,sensitivity:this.sensitivity,max:this.max,min:this.min,initialDelta:this.initialDelta,invert:this.invert,requiredKeys:[...this.requiredKeys],pointerMode:[...this.pointerMode],preventIf:[...this.preventIf]},e))}init(e,t,r,i){super.init(e,t,r,i),this.element.addEventListener("wheel",this.handleWheelEventBound)}destroy(){this.element.removeEventListener("wheel",this.handleWheelEventBound),this.resetState(),super.destroy()}resetState(){this.isActive=!1,this.state={totalDeltaX:0,totalDeltaY:0,totalDeltaZ:0}}updateOptions(e){super.updateOptions(e),this.sensitivity=e.sensitivity??this.sensitivity,this.max=e.max??this.max,this.min=e.min??this.min,this.initialDelta=e.initialDelta??this.initialDelta,this.invert=e.invert??this.invert}handleWheelEvent(e){if(this.shouldPreventGesture(this.element))return;const t=this.pointerManager.getPointers()||new Map,r=Array.from(t.values());this.state.totalDeltaX+=e.deltaX*this.sensitivity*(this.invert?-1:1),this.state.totalDeltaY+=e.deltaY*this.sensitivity*(this.invert?-1:1),this.state.totalDeltaZ+=e.deltaZ*this.sensitivity*(this.invert?-1:1),["totalDeltaX","totalDeltaY","totalDeltaZ"].forEach(i=>{this.state[i]<this.min&&(this.state[i]=this.min),this.state[i]>this.max&&(this.state[i]=this.max)}),this.emitWheelEvent(r,e)}emitWheelEvent(e,t){const r=e.length>0?To(e):{x:t.clientX,y:t.clientY},i=this.gesturesRegistry.getActiveGestures(this.element),a={gestureName:this.name,centroid:r,target:t.target,srcEvent:t,phase:"ongoing",pointers:e,timeStamp:t.timeStamp,deltaX:t.deltaX*this.sensitivity*(this.invert?-1:1),deltaY:t.deltaY*this.sensitivity*(this.invert?-1:1),deltaZ:t.deltaZ*this.sensitivity*(this.invert?-1:1),deltaMode:t.deltaMode,totalDeltaX:this.state.totalDeltaX,totalDeltaY:this.state.totalDeltaY,totalDeltaZ:this.state.totalDeltaZ,activeGestures:i,customData:this.customData};this.preventDefault&&t.preventDefault(),this.stopPropagation&&t.stopPropagation();const s=_f(this.name,"ongoing"),o=new CustomEvent(s,{bubbles:!0,cancelable:!0,composed:!0,detail:a});this.element.dispatchEvent(o)}}const ld=n=>n.preventDefault(),W_=({svgRef:n})=>{M.useEffect(()=>{const t=n.current;if(!t)return;const r=new gte({gestures:[new U_({name:"pan",threshold:0,maxPointers:1}),new j_({name:"move",preventIf:["pan","pinch"]}),new H_({name:"pinch",threshold:5,preventIf:["pan"]}),new G_({name:"turnWheel",sensitivity:.01,initialDelta:1}),new $_({name:"tap",maxDistance:10,preventIf:["pan","pinch"]}),new z_({name:"quickPress",duration:50,maxDistance:10})]});return r.registerElement(["pan","move","pinch","turnWheel","tap","quickPress"],t),()=>{r.destroy()}},[n]);const e=M.useCallback((t,r,i)=>{const a=n.current;return a==null||a.addEventListener(t,r,i),{cleanup:()=>a==null?void 0:a.removeEventListener(t,r)}},[n]);return M.useEffect(()=>{const t=n.current;return t==null||t.addEventListener("gesturestart",ld),t==null||t.addEventListener("gesturechange",ld),t==null||t.addEventListener("gestureend",ld),()=>{t==null||t.removeEventListener("gesturestart",ld),t==null||t.removeEventListener("gesturechange",ld),t==null||t.removeEventListener("gestureend",ld)}},[n]),{instance:{addInteractionListener:e}}};W_.params={};W_.getInitialState=()=>({});const bte=[V_,F_,xy,wy,W_,vy],_te=["apiRef"],Ate=n=>{let{plugins:e}=n,t=Be(n.props,_te);const r={};e.forEach(s=>{Object.assign(r,s.params)});const i={};return Object.keys(t).forEach(s=>{const o=t[s];r[s]&&(i[s]=o)}),e.reduce((s,o)=>o.getDefaultizedParams?o.getDefaultizedParams({params:s}):s,i)};let qD=0;function Ete(n,e,t){const r=N0(),i=M.useMemo(()=>[...bte,...n],[n]),a=Ate({plugins:i,props:e});a.id=a.id??r;const o=M.useRef({}).current,c=Cte(e.apiRef),d=M.useRef(null),f=M.useRef(null),p=M.useRef(null);if(p.current==null){qD+=1;const x={cacheKey:{id:qD}};i.forEach(b=>{b.getInitialState&&Object.assign(x,b.getInitialState(a,x,t))}),p.current=new _ee(x)}const g=x=>{const b=x({instance:o,params:a,plugins:i,store:p.current,svgRef:f,chartRootRef:d,seriesConfig:t});b.publicAPI&&Object.assign(c.current,b.publicAPI),b.instance&&Object.assign(o,b.instance)};return i.forEach(g),{contextValue:M.useMemo(()=>({store:p.current,publicAPI:c.current,instance:o,svgRef:f,chartRootRef:d}),[o,c])}}function Ste(n){return n.current==null&&(n.current={}),n}function Cte(n){const e=M.useRef({});return n?Ste(n):e}const QP=M.createContext(null),ZP=()=>{},JP=4,ek=20+2*JP,Tte=40+2*JP,Ite="hover",Dte={top:5,bottom:5,left:5,right:5},Zg={minStart:0,maxEnd:100,step:5,minSpan:10,maxSpan:100,panning:!0,filterMode:"keep",slider:{enabled:!1,preview:!1,size:ek,showTooltip:Ite}},Y_=(n,e,t)=>{var r;if(n)return n===!0?H({axisId:e,axisDirection:t},Zg):H({axisId:e,axisDirection:t},Zg,n,{slider:H({},Zg.slider,{size:((r=n.slider)==null?void 0:r.preview)??Zg.slider.preview?Tte:ek},n.slider)})};function tk(n,e){const t={top:0,bottom:0,none:0};return(n&&n.length>0?n:[{id:L_,scaleType:"linear"}]).map((a,s)=>{var m;const o=a.dataKey,c=s===0?"bottom":"none",d=a.position??c,f=bee+(a.label?VP:0),p=a.id??`defaultized-x-axis-${s}`,g=H({offset:t[d]},a,{id:p,position:d,height:a.height??f,zoom:Y_(a.zoom,p,"x")});if(d!=="none"&&(t[d]+=g.height,(m=g.zoom)!=null&&m.slider.enabled&&(t[d]+=g.zoom.slider.size)),o===void 0||a.data!==void 0)return g;if(e===void 0)throw new Error("MUI X Charts: x-axis uses `dataKey` but no `dataset` is provided.");return H({},g,{data:e.map(x=>x[o])})})}function nk(n,e){const t={right:0,left:0,none:0};return(n&&n.length>0?n:[{id:B_,scaleType:"linear"}]).map((a,s)=>{var m;const o=a.dataKey,c=s===0?"left":"none",d=a.position??c,f=wee+(a.label?VP:0),p=a.id??`defaultized-y-axis-${s}`,g=H({offset:t[d]},a,{id:p,position:d,width:a.width??f,zoom:Y_(a.zoom,p,"y")});if(d!=="none"&&(t[d]+=g.width,(m=g.zoom)!=null&&m.slider.enabled&&(t[d]+=g.zoom.slider.size)),o===void 0||a.data!==void 0)return g;if(e===void 0)throw new Error("MUI X Charts: y-axis uses `dataKey` but no `dataset` is provided.");return H({},g,{data:e.map(x=>x[o])})})}function _m(n,e){return n==null||e==null?NaN:n<e?-1:n>e?1:n>=e?0:NaN}function Rte(n,e){return n==null||e==null?NaN:e<n?-1:e>n?1:e>=n?0:NaN}function q_(n){let e,t,r;n.length!==2?(e=_m,t=(o,c)=>_m(n(o),c),r=(o,c)=>n(o)-c):(e=n===_m||n===Rte?n:Mte,t=n,r=n);function i(o,c,d=0,f=o.length){if(d<f){if(e(c,c)!==0)return f;do{const p=d+f>>>1;t(o[p],c)<0?d=p+1:f=p}while(d<f)}return d}function a(o,c,d=0,f=o.length){if(d<f){if(e(c,c)!==0)return f;do{const p=d+f>>>1;t(o[p],c)<=0?d=p+1:f=p}while(d<f)}return d}function s(o,c,d=0,f=o.length){const p=i(o,c,d,f-1);return p>d&&r(o[p-1],c)>-r(o[p],c)?p-1:p}return{left:i,center:s,right:a}}function Mte(){return 0}function Ote(n){return n===null?NaN:+n}const Pte=q_(_m),rk=Pte.right;q_(Ote).center;class XD extends Map{constructor(e,t=Lte){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:t}}),e!=null)for(const[r,i]of e)this.set(r,i)}get(e){return super.get(KD(this,e))}has(e){return super.has(KD(this,e))}set(e,t){return super.set(kte(this,e),t)}delete(e){return super.delete(Nte(this,e))}}function KD({_intern:n,_key:e},t){const r=e(t);return n.has(r)?n.get(r):t}function kte({_intern:n,_key:e},t){const r=e(t);return n.has(r)?n.get(r):(n.set(r,t),t)}function Nte({_intern:n,_key:e},t){const r=e(t);return n.has(r)&&(t=n.get(r),n.delete(r)),t}function Lte(n){return n!==null&&typeof n=="object"?n.valueOf():n}const Bte=Math.sqrt(50),Fte=Math.sqrt(10),Vte=Math.sqrt(2);function o1(n,e,t){const r=(e-n)/Math.max(0,t),i=Math.floor(Math.log10(r)),a=r/Math.pow(10,i),s=a>=Bte?10:a>=Fte?5:a>=Vte?2:1;let o,c,d;return i<0?(d=Math.pow(10,-i)/s,o=Math.round(n*d),c=Math.round(e*d),o/d<n&&++o,c/d>e&&--c,d=-d):(d=Math.pow(10,i)*s,o=Math.round(n/d),c=Math.round(e/d),o*d<n&&++o,c*d>e&&--c),c<o&&.5<=t&&t<2?o1(n,e,t*2):[o,c,d]}function Pw(n,e,t){if(e=+e,n=+n,t=+t,!(t>0))return[];if(n===e)return[n];const r=e<n,[i,a,s]=r?o1(e,n,t):o1(n,e,t);if(!(a>=i))return[];const o=a-i+1,c=new Array(o);if(r)if(s<0)for(let d=0;d<o;++d)c[d]=(a-d)/-s;else for(let d=0;d<o;++d)c[d]=(a-d)*s;else if(s<0)for(let d=0;d<o;++d)c[d]=(i+d)/-s;else for(let d=0;d<o;++d)c[d]=(i+d)*s;return c}function kw(n,e,t){return e=+e,n=+n,t=+t,o1(n,e,t)[2]}function Nw(n,e,t){e=+e,n=+n,t=+t;const r=e<n,i=r?kw(e,n,t):kw(n,e,t);return(r?-1:1)*(i<0?1/-i:i)}function jte(n,e,t){n=+n,e=+e,t=(i=arguments.length)<2?(e=n,n=0,1):i<3?1:+t;for(var r=-1,i=Math.max(0,Math.ceil((e-n)/t))|0,a=new Array(i);++r<i;)a[r]=n+r*t;return a}function ko(n,e){switch(arguments.length){case 0:break;case 1:this.range(n);break;default:this.range(e).domain(n);break}return this}function Ute(n,e){switch(arguments.length){case 0:break;case 1:{typeof n=="function"?this.interpolator(n):this.range(n);break}default:{this.domain(n),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const QD=Symbol("implicit");function l1(){var n=new XD,e=[],t=[],r=QD;function i(a){let s=n.get(a);if(s===void 0){if(r!==QD)return r;n.set(a,s=e.push(a)-1)}return t[s%t.length]}return i.domain=function(a){if(!arguments.length)return e.slice();e=[],n=new XD;for(const s of a)n.has(s)||n.set(s,e.push(s)-1);return i},i.range=function(a){return arguments.length?(t=Array.from(a),i):t.slice()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return l1(e,t).unknown(r)},ko.apply(i,arguments),i}function by(){var n=l1().unknown(void 0),e=n.domain,t=n.range,r=0,i=1,a,s,o=!1,c=0,d=0,f=.5;delete n.unknown;function p(){var g=e().length,m=i<r,x=m?i:r,b=m?r:i;a=(b-x)/Math.max(1,g-c+d*2),o&&(a=Math.floor(a)),x+=(b-x-a*(g-c))*f,s=a*(1-c),o&&(x=Math.round(x),s=Math.round(s));var A=jte(g).map(function(E){return x+a*E});return t(m?A.reverse():A)}return n.domain=function(g){return arguments.length?(e(g),p()):e()},n.range=function(g){return arguments.length?([r,i]=g,r=+r,i=+i,p()):[r,i]},n.rangeRound=function(g){return[r,i]=g,r=+r,i=+i,o=!0,p()},n.bandwidth=function(){return s},n.step=function(){return a},n.round=function(g){return arguments.length?(o=!!g,p()):o},n.padding=function(g){return arguments.length?(c=Math.min(1,d=+g),p()):c},n.paddingInner=function(g){return arguments.length?(c=Math.min(1,g),p()):c},n.paddingOuter=function(g){return arguments.length?(d=+g,p()):d},n.align=function(g){return arguments.length?(f=Math.max(0,Math.min(1,g)),p()):f},n.copy=function(){return by(e(),[r,i]).round(o).paddingInner(c).paddingOuter(d).align(f)},ko.apply(p(),arguments)}function ik(n){var e=n.copy;return n.padding=n.paddingOuter,delete n.paddingInner,delete n.paddingOuter,n.copy=function(){return ik(e())},n}function ak(){return ik(by.apply(null,arguments).paddingInner(1))}function X_(n,e,t){n.prototype=e.prototype=t,t.constructor=n}function sk(n,e){var t=Object.create(n.prototype);for(var r in e)t[r]=e[r];return t}function tp(){}var D0=.7,c1=1/D0,Vd="\\s*([+-]?\\d+)\\s*",R0="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ks="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Hte=/^#([0-9a-f]{3,8})$/,zte=new RegExp(`^rgb\\(${Vd},${Vd},${Vd}\\)$`),$te=new RegExp(`^rgb\\(${ks},${ks},${ks}\\)$`),Gte=new RegExp(`^rgba\\(${Vd},${Vd},${Vd},${R0}\\)$`),Wte=new RegExp(`^rgba\\(${ks},${ks},${ks},${R0}\\)$`),Yte=new RegExp(`^hsl\\(${R0},${ks},${ks}\\)$`),qte=new RegExp(`^hsla\\(${R0},${ks},${ks},${R0}\\)$`),ZD={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};X_(tp,M0,{copy(n){return Object.assign(new this.constructor,this,n)},displayable(){return this.rgb().displayable()},hex:JD,formatHex:JD,formatHex8:Xte,formatHsl:Kte,formatRgb:e3,toString:e3});function JD(){return this.rgb().formatHex()}function Xte(){return this.rgb().formatHex8()}function Kte(){return ok(this).formatHsl()}function e3(){return this.rgb().formatRgb()}function M0(n){var e,t;return n=(n+"").trim().toLowerCase(),(e=Hte.exec(n))?(t=e[1].length,e=parseInt(e[1],16),t===6?t3(e):t===3?new Hi(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):t===8?Jg(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):t===4?Jg(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=zte.exec(n))?new Hi(e[1],e[2],e[3],1):(e=$te.exec(n))?new Hi(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=Gte.exec(n))?Jg(e[1],e[2],e[3],e[4]):(e=Wte.exec(n))?Jg(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=Yte.exec(n))?i3(e[1],e[2]/100,e[3]/100,1):(e=qte.exec(n))?i3(e[1],e[2]/100,e[3]/100,e[4]):ZD.hasOwnProperty(n)?t3(ZD[n]):n==="transparent"?new Hi(NaN,NaN,NaN,0):null}function t3(n){return new Hi(n>>16&255,n>>8&255,n&255,1)}function Jg(n,e,t,r){return r<=0&&(n=e=t=NaN),new Hi(n,e,t,r)}function Qte(n){return n instanceof tp||(n=M0(n)),n?(n=n.rgb(),new Hi(n.r,n.g,n.b,n.opacity)):new Hi}function Lw(n,e,t,r){return arguments.length===1?Qte(n):new Hi(n,e,t,r??1)}function Hi(n,e,t,r){this.r=+n,this.g=+e,this.b=+t,this.opacity=+r}X_(Hi,Lw,sk(tp,{brighter(n){return n=n==null?c1:Math.pow(c1,n),new Hi(this.r*n,this.g*n,this.b*n,this.opacity)},darker(n){return n=n==null?D0:Math.pow(D0,n),new Hi(this.r*n,this.g*n,this.b*n,this.opacity)},rgb(){return this},clamp(){return new Hi(Yc(this.r),Yc(this.g),Yc(this.b),u1(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:n3,formatHex:n3,formatHex8:Zte,formatRgb:r3,toString:r3}));function n3(){return`#${Hc(this.r)}${Hc(this.g)}${Hc(this.b)}`}function Zte(){return`#${Hc(this.r)}${Hc(this.g)}${Hc(this.b)}${Hc((isNaN(this.opacity)?1:this.opacity)*255)}`}function r3(){const n=u1(this.opacity);return`${n===1?"rgb(":"rgba("}${Yc(this.r)}, ${Yc(this.g)}, ${Yc(this.b)}${n===1?")":`, ${n})`}`}function u1(n){return isNaN(n)?1:Math.max(0,Math.min(1,n))}function Yc(n){return Math.max(0,Math.min(255,Math.round(n)||0))}function Hc(n){return n=Yc(n),(n<16?"0":"")+n.toString(16)}function i3(n,e,t,r){return r<=0?n=e=t=NaN:t<=0||t>=1?n=e=NaN:e<=0&&(n=NaN),new Wa(n,e,t,r)}function ok(n){if(n instanceof Wa)return new Wa(n.h,n.s,n.l,n.opacity);if(n instanceof tp||(n=M0(n)),!n)return new Wa;if(n instanceof Wa)return n;n=n.rgb();var e=n.r/255,t=n.g/255,r=n.b/255,i=Math.min(e,t,r),a=Math.max(e,t,r),s=NaN,o=a-i,c=(a+i)/2;return o?(e===a?s=(t-r)/o+(t<r)*6:t===a?s=(r-e)/o+2:s=(e-t)/o+4,o/=c<.5?a+i:2-a-i,s*=60):o=c>0&&c<1?0:s,new Wa(s,o,c,n.opacity)}function Jte(n,e,t,r){return arguments.length===1?ok(n):new Wa(n,e,t,r??1)}function Wa(n,e,t,r){this.h=+n,this.s=+e,this.l=+t,this.opacity=+r}X_(Wa,Jte,sk(tp,{brighter(n){return n=n==null?c1:Math.pow(c1,n),new Wa(this.h,this.s,this.l*n,this.opacity)},darker(n){return n=n==null?D0:Math.pow(D0,n),new Wa(this.h,this.s,this.l*n,this.opacity)},rgb(){var n=this.h%360+(this.h<0)*360,e=isNaN(n)||isNaN(this.s)?0:this.s,t=this.l,r=t+(t<.5?t:1-t)*e,i=2*t-r;return new Hi(p2(n>=240?n-240:n+120,i,r),p2(n,i,r),p2(n<120?n+240:n-120,i,r),this.opacity)},clamp(){return new Wa(a3(this.h),em(this.s),em(this.l),u1(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const n=u1(this.opacity);return`${n===1?"hsl(":"hsla("}${a3(this.h)}, ${em(this.s)*100}%, ${em(this.l)*100}%${n===1?")":`, ${n})`}`}}));function a3(n){return n=(n||0)%360,n<0?n+360:n}function em(n){return Math.max(0,Math.min(1,n||0))}function p2(n,e,t){return(n<60?e+(t-e)*n/60:n<180?t:n<240?e+(t-e)*(240-n)/60:e)*255}const K_=n=>()=>n;function ene(n,e){return function(t){return n+t*e}}function tne(n,e,t){return n=Math.pow(n,t),e=Math.pow(e,t)-n,t=1/t,function(r){return Math.pow(n+r*e,t)}}function nne(n){return(n=+n)==1?lk:function(e,t){return t-e?tne(e,t,n):K_(isNaN(e)?t:e)}}function lk(n,e){var t=e-n;return t?ene(n,t):K_(isNaN(n)?e:n)}const s3=function n(e){var t=nne(e);function r(i,a){var s=t((i=Lw(i)).r,(a=Lw(a)).r),o=t(i.g,a.g),c=t(i.b,a.b),d=lk(i.opacity,a.opacity);return function(f){return i.r=s(f),i.g=o(f),i.b=c(f),i.opacity=d(f),i+""}}return r.gamma=n,r}(1);function rne(n,e){e||(e=[]);var t=n?Math.min(e.length,n.length):0,r=e.slice(),i;return function(a){for(i=0;i<t;++i)r[i]=n[i]*(1-a)+e[i]*a;return r}}function ine(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function ane(n,e){var t=e?e.length:0,r=n?Math.min(t,n.length):0,i=new Array(r),a=new Array(t),s;for(s=0;s<r;++s)i[s]=_y(n[s],e[s]);for(;s<t;++s)a[s]=e[s];return function(o){for(s=0;s<r;++s)a[s]=i[s](o);return a}}function Q_(n,e){var t=new Date;return n=+n,e=+e,function(r){return t.setTime(n*(1-r)+e*r),t}}function Jt(n,e){return n=+n,e=+e,function(t){return n*(1-t)+e*t}}function sne(n,e){var t={},r={},i;(n===null||typeof n!="object")&&(n={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in n?t[i]=_y(n[i],e[i]):r[i]=e[i];return function(a){for(i in t)r[i]=t[i](a);return r}}var Bw=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,g2=new RegExp(Bw.source,"g");function one(n){return function(){return n}}function lne(n){return function(e){return n(e)+""}}function cne(n,e){var t=Bw.lastIndex=g2.lastIndex=0,r,i,a,s=-1,o=[],c=[];for(n=n+"",e=e+"";(r=Bw.exec(n))&&(i=g2.exec(e));)(a=i.index)>t&&(a=e.slice(t,a),o[s]?o[s]+=a:o[++s]=a),(r=r[0])===(i=i[0])?o[s]?o[s]+=i:o[++s]=i:(o[++s]=null,c.push({i:s,x:Jt(r,i)})),t=g2.lastIndex;return t<e.length&&(a=e.slice(t),o[s]?o[s]+=a:o[++s]=a),o.length<2?c[0]?lne(c[0].x):one(e):(e=c.length,function(d){for(var f=0,p;f<e;++f)o[(p=c[f]).i]=p.x(d);return o.join("")})}function _y(n,e){var t=typeof e,r;return e==null||t==="boolean"?K_(e):(t==="number"?Jt:t==="string"?(r=M0(e))?(e=r,s3):cne:e instanceof M0?s3:e instanceof Date?Q_:ine(e)?rne:Array.isArray(e)?ane:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?sne:Jt)(n,e)}function ck(n,e){return n=+n,e=+e,function(t){return Math.round(n*(1-t)+e*t)}}function une(n){return function(){return n}}function dne(n){return+n}var o3=[0,1];function Ia(n){return n}function Fw(n,e){return(e-=n=+n)?function(t){return(t-n)/e}:une(isNaN(e)?NaN:.5)}function fne(n,e){var t;return n>e&&(t=n,n=e,e=t),function(r){return Math.max(n,Math.min(e,r))}}function hne(n,e,t){var r=n[0],i=n[1],a=e[0],s=e[1];return i<r?(r=Fw(i,r),a=t(s,a)):(r=Fw(r,i),a=t(a,s)),function(o){return a(r(o))}}function pne(n,e,t){var r=Math.min(n.length,e.length)-1,i=new Array(r),a=new Array(r),s=-1;for(n[r]<n[0]&&(n=n.slice().reverse(),e=e.slice().reverse());++s<r;)i[s]=Fw(n[s],n[s+1]),a[s]=t(e[s],e[s+1]);return function(o){var c=rk(n,o,1,r)-1;return a[c](i[c](o))}}function np(n,e){return e.domain(n.domain()).range(n.range()).interpolate(n.interpolate()).clamp(n.clamp()).unknown(n.unknown())}function Ay(){var n=o3,e=o3,t=_y,r,i,a,s=Ia,o,c,d;function f(){var g=Math.min(n.length,e.length);return s!==Ia&&(s=fne(n[0],n[g-1])),o=g>2?pne:hne,c=d=null,p}function p(g){return g==null||isNaN(g=+g)?a:(c||(c=o(n.map(r),e,t)))(r(s(g)))}return p.invert=function(g){return s(i((d||(d=o(e,n.map(r),Jt)))(g)))},p.domain=function(g){return arguments.length?(n=Array.from(g,dne),f()):n.slice()},p.range=function(g){return arguments.length?(e=Array.from(g),f()):e.slice()},p.rangeRound=function(g){return e=Array.from(g),t=ck,f()},p.clamp=function(g){return arguments.length?(s=g?!0:Ia,f()):s!==Ia},p.interpolate=function(g){return arguments.length?(t=g,f()):t},p.unknown=function(g){return arguments.length?(a=g,p):a},function(g,m){return r=g,i=m,f()}}function uk(){return Ay()(Ia,Ia)}function gne(n){return Math.abs(n=Math.round(n))>=1e21?n.toLocaleString("en").replace(/,/g,""):n.toString(10)}function d1(n,e){if((t=(n=e?n.toExponential(e-1):n.toExponential()).indexOf("e"))<0)return null;var t,r=n.slice(0,t);return[r.length>1?r[0]+r.slice(2):r,+n.slice(t+1)]}function ef(n){return n=d1(Math.abs(n)),n?n[1]:NaN}function mne(n,e){return function(t,r){for(var i=t.length,a=[],s=0,o=n[0],c=0;i>0&&o>0&&(c+o+1>r&&(o=Math.max(1,r-c)),a.push(t.substring(i-=o,i+o)),!((c+=o+1)>r));)o=n[s=(s+1)%n.length];return a.reverse().join(e)}}function yne(n){return function(e){return e.replace(/[0-9]/g,function(t){return n[+t]})}}var vne=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function O0(n){if(!(e=vne.exec(n)))throw new Error("invalid format: "+n);var e;return new Z_({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}O0.prototype=Z_.prototype;function Z_(n){this.fill=n.fill===void 0?" ":n.fill+"",this.align=n.align===void 0?">":n.align+"",this.sign=n.sign===void 0?"-":n.sign+"",this.symbol=n.symbol===void 0?"":n.symbol+"",this.zero=!!n.zero,this.width=n.width===void 0?void 0:+n.width,this.comma=!!n.comma,this.precision=n.precision===void 0?void 0:+n.precision,this.trim=!!n.trim,this.type=n.type===void 0?"":n.type+""}Z_.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function xne(n){e:for(var e=n.length,t=1,r=-1,i;t<e;++t)switch(n[t]){case".":r=i=t;break;case"0":r===0&&(r=t),i=t;break;default:if(!+n[t])break e;r>0&&(r=0);break}return r>0?n.slice(0,r)+n.slice(i+1):n}var dk;function wne(n,e){var t=d1(n,e);if(!t)return n+"";var r=t[0],i=t[1],a=i-(dk=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,s=r.length;return a===s?r:a>s?r+new Array(a-s+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+d1(n,Math.max(0,e+a-1))[0]}function l3(n,e){var t=d1(n,e);if(!t)return n+"";var r=t[0],i=t[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const c3={"%":(n,e)=>(n*100).toFixed(e),b:n=>Math.round(n).toString(2),c:n=>n+"",d:gne,e:(n,e)=>n.toExponential(e),f:(n,e)=>n.toFixed(e),g:(n,e)=>n.toPrecision(e),o:n=>Math.round(n).toString(8),p:(n,e)=>l3(n*100,e),r:l3,s:wne,X:n=>Math.round(n).toString(16).toUpperCase(),x:n=>Math.round(n).toString(16)};function u3(n){return n}var d3=Array.prototype.map,f3=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function bne(n){var e=n.grouping===void 0||n.thousands===void 0?u3:mne(d3.call(n.grouping,Number),n.thousands+""),t=n.currency===void 0?"":n.currency[0]+"",r=n.currency===void 0?"":n.currency[1]+"",i=n.decimal===void 0?".":n.decimal+"",a=n.numerals===void 0?u3:yne(d3.call(n.numerals,String)),s=n.percent===void 0?"%":n.percent+"",o=n.minus===void 0?"":n.minus+"",c=n.nan===void 0?"NaN":n.nan+"";function d(p){p=O0(p);var g=p.fill,m=p.align,x=p.sign,b=p.symbol,A=p.zero,E=p.width,C=p.comma,T=p.precision,D=p.trim,k=p.type;k==="n"?(C=!0,k="g"):c3[k]||(T===void 0&&(T=12),D=!0,k="g"),(A||g==="0"&&m==="=")&&(A=!0,g="0",m="=");var B=b==="$"?t:b==="#"&&/[boxX]/.test(k)?"0"+k.toLowerCase():"",O=b==="$"?r:/[%p]/.test(k)?s:"",I=c3[k],R=/[defgprs%]/.test(k);T=T===void 0?6:/[gprs]/.test(k)?Math.max(1,Math.min(21,T)):Math.max(0,Math.min(20,T));function F(N){var P=B,V=O,q,X,G;if(k==="c")V=I(N)+V,N="";else{N=+N;var W=N<0||1/N<0;if(N=isNaN(N)?c:I(Math.abs(N),T),D&&(N=xne(N)),W&&+N==0&&x!=="+"&&(W=!1),P=(W?x==="("?x:o:x==="-"||x==="("?"":x)+P,V=(k==="s"?f3[8+dk/3]:"")+V+(W&&x==="("?")":""),R){for(q=-1,X=N.length;++q<X;)if(G=N.charCodeAt(q),48>G||G>57){V=(G===46?i+N.slice(q+1):N.slice(q))+V,N=N.slice(0,q);break}}}C&&!A&&(N=e(N,1/0));var K=P.length+N.length+V.length,Z=K<E?new Array(E-K+1).join(g):"";switch(C&&A&&(N=e(Z+N,Z.length?E-V.length:1/0),Z=""),m){case"<":N=P+N+V+Z;break;case"=":N=P+Z+N+V;break;case"^":N=Z.slice(0,K=Z.length>>1)+P+N+V+Z.slice(K);break;default:N=Z+P+N+V;break}return a(N)}return F.toString=function(){return p+""},F}function f(p,g){var m=d((p=O0(p),p.type="f",p)),x=Math.max(-8,Math.min(8,Math.floor(ef(g)/3)))*3,b=Math.pow(10,-x),A=f3[8+x/3];return function(E){return m(b*E)+A}}return{format:d,formatPrefix:f}}var tm,J_,fk;_ne({thousands:",",grouping:[3],currency:["$",""]});function _ne(n){return tm=bne(n),J_=tm.format,fk=tm.formatPrefix,tm}function Ane(n){return Math.max(0,-ef(Math.abs(n)))}function Ene(n,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(ef(e)/3)))*3-ef(Math.abs(n)))}function Sne(n,e){return n=Math.abs(n),e=Math.abs(e)-n,Math.max(0,ef(e)-ef(n))+1}function Cne(n,e,t,r){var i=Nw(n,e,t),a;switch(r=O0(r??",f"),r.type){case"s":{var s=Math.max(Math.abs(n),Math.abs(e));return r.precision==null&&!isNaN(a=Ene(i,s))&&(r.precision=a),fk(r,s)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(a=Sne(i,Math.max(Math.abs(n),Math.abs(e))))&&(r.precision=a-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(a=Ane(i))&&(r.precision=a-(r.type==="%")*2);break}}return J_(r)}function Ey(n){var e=n.domain;return n.ticks=function(t){var r=e();return Pw(r[0],r[r.length-1],t??10)},n.tickFormat=function(t,r){var i=e();return Cne(i[0],i[i.length-1],t??10,r)},n.nice=function(t){t==null&&(t=10);var r=e(),i=0,a=r.length-1,s=r[i],o=r[a],c,d,f=10;for(o<s&&(d=s,s=o,o=d,d=i,i=a,a=d);f-- >0;){if(d=kw(s,o,t),d===c)return r[i]=s,r[a]=o,e(r);if(d>0)s=Math.floor(s/d)*d,o=Math.ceil(o/d)*d;else if(d<0)s=Math.ceil(s*d)/d,o=Math.floor(o*d)/d;else break;c=d}return n},n}function eA(){var n=uk();return n.copy=function(){return np(n,eA())},ko.apply(n,arguments),Ey(n)}function hk(n,e){n=n.slice();var t=0,r=n.length-1,i=n[t],a=n[r],s;return a<i&&(s=t,t=r,r=s,s=i,i=a,a=s),n[t]=e.floor(i),n[r]=e.ceil(a),n}function h3(n){return Math.log(n)}function p3(n){return Math.exp(n)}function Tne(n){return-Math.log(-n)}function Ine(n){return-Math.exp(-n)}function Dne(n){return isFinite(n)?+("1e"+n):n<0?0:n}function Rne(n){return n===10?Dne:n===Math.E?Math.exp:e=>Math.pow(n,e)}function Mne(n){return n===Math.E?Math.log:n===10&&Math.log10||n===2&&Math.log2||(n=Math.log(n),e=>Math.log(e)/n)}function g3(n){return(e,t)=>-n(-e,t)}function One(n){const e=n(h3,p3),t=e.domain;let r=10,i,a;function s(){return i=Mne(r),a=Rne(r),t()[0]<0?(i=g3(i),a=g3(a),n(Tne,Ine)):n(h3,p3),e}return e.base=function(o){return arguments.length?(r=+o,s()):r},e.domain=function(o){return arguments.length?(t(o),s()):t()},e.ticks=o=>{const c=t();let d=c[0],f=c[c.length-1];const p=f<d;p&&([d,f]=[f,d]);let g=i(d),m=i(f),x,b;const A=o==null?10:+o;let E=[];if(!(r%1)&&m-g<A){if(g=Math.floor(g),m=Math.ceil(m),d>0){for(;g<=m;++g)for(x=1;x<r;++x)if(b=g<0?x/a(-g):x*a(g),!(b<d)){if(b>f)break;E.push(b)}}else for(;g<=m;++g)for(x=r-1;x>=1;--x)if(b=g>0?x/a(-g):x*a(g),!(b<d)){if(b>f)break;E.push(b)}E.length*2<A&&(E=Pw(d,f,A))}else E=Pw(g,m,Math.min(m-g,A)).map(a);return p?E.reverse():E},e.tickFormat=(o,c)=>{if(o==null&&(o=10),c==null&&(c=r===10?"s":","),typeof c!="function"&&(!(r%1)&&(c=O0(c)).precision==null&&(c.trim=!0),c=J_(c)),o===1/0)return c;const d=Math.max(1,r*o/e.ticks().length);return f=>{let p=f/a(Math.round(i(f)));return p*r<r-.5&&(p*=r),p<=d?c(f):""}},e.nice=()=>t(hk(t(),{floor:o=>a(Math.floor(i(o))),ceil:o=>a(Math.ceil(i(o)))})),e}function f1(){const n=One(Ay()).domain([1,10]);return n.copy=()=>np(n,f1()).base(n.base()),ko.apply(n,arguments),n}function m3(n){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/n))}}function y3(n){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*n}}function Pne(n){var e=1,t=n(m3(e),y3(e));return t.constant=function(r){return arguments.length?n(m3(e=+r),y3(e)):e},Ey(t)}function pk(){var n=Pne(Ay());return n.copy=function(){return np(n,pk()).constant(n.constant())},ko.apply(n,arguments)}function v3(n){return function(e){return e<0?-Math.pow(-e,n):Math.pow(e,n)}}function kne(n){return n<0?-Math.sqrt(-n):Math.sqrt(n)}function Nne(n){return n<0?-n*n:n*n}function Lne(n){var e=n(Ia,Ia),t=1;function r(){return t===1?n(Ia,Ia):t===.5?n(kne,Nne):n(v3(t),v3(1/t))}return e.exponent=function(i){return arguments.length?(t=+i,r()):t},Ey(e)}function tA(){var n=Lne(Ay());return n.copy=function(){return np(n,tA()).exponent(n.exponent())},ko.apply(n,arguments),n}function Bne(){return tA.apply(null,arguments).exponent(.5)}function gk(){var n=[.5],e=[0,1],t,r=1;function i(a){return a!=null&&a<=a?e[rk(n,a,0,r)]:t}return i.domain=function(a){return arguments.length?(n=Array.from(a),r=Math.min(n.length,e.length-1),i):n.slice()},i.range=function(a){return arguments.length?(e=Array.from(a),r=Math.min(n.length,e.length-1),i):e.slice()},i.invertExtent=function(a){var s=e.indexOf(a);return[n[s-1],n[s]]},i.unknown=function(a){return arguments.length?(t=a,i):t},i.copy=function(){return gk().domain(n).range(e).unknown(t)},ko.apply(i,arguments)}const m2=new Date,y2=new Date;function Pr(n,e,t,r){function i(a){return n(a=arguments.length===0?new Date:new Date(+a)),a}return i.floor=a=>(n(a=new Date(+a)),a),i.ceil=a=>(n(a=new Date(a-1)),e(a,1),n(a),a),i.round=a=>{const s=i(a),o=i.ceil(a);return a-s<o-a?s:o},i.offset=(a,s)=>(e(a=new Date(+a),s==null?1:Math.floor(s)),a),i.range=(a,s,o)=>{const c=[];if(a=i.ceil(a),o=o==null?1:Math.floor(o),!(a<s)||!(o>0))return c;let d;do c.push(d=new Date(+a)),e(a,o),n(a);while(d<a&&a<s);return c},i.filter=a=>Pr(s=>{if(s>=s)for(;n(s),!a(s);)s.setTime(s-1)},(s,o)=>{if(s>=s)if(o<0)for(;++o<=0;)for(;e(s,-1),!a(s););else for(;--o>=0;)for(;e(s,1),!a(s););}),t&&(i.count=(a,s)=>(m2.setTime(+a),y2.setTime(+s),n(m2),n(y2),Math.floor(t(m2,y2))),i.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?i.filter(r?s=>r(s)%a===0:s=>i.count(0,s)%a===0):i)),i}const h1=Pr(()=>{},(n,e)=>{n.setTime(+n+e)},(n,e)=>e-n);h1.every=n=>(n=Math.floor(n),!isFinite(n)||!(n>0)?null:n>1?Pr(e=>{e.setTime(Math.floor(e/n)*n)},(e,t)=>{e.setTime(+e+t*n)},(e,t)=>(t-e)/n):h1);h1.range;const mo=1e3,Da=mo*60,yo=Da*60,Io=yo*24,nA=Io*7,x3=Io*30,v2=Io*365,zc=Pr(n=>{n.setTime(n-n.getMilliseconds())},(n,e)=>{n.setTime(+n+e*mo)},(n,e)=>(e-n)/mo,n=>n.getUTCSeconds());zc.range;const rA=Pr(n=>{n.setTime(n-n.getMilliseconds()-n.getSeconds()*mo)},(n,e)=>{n.setTime(+n+e*Da)},(n,e)=>(e-n)/Da,n=>n.getMinutes());rA.range;const iA=Pr(n=>{n.setUTCSeconds(0,0)},(n,e)=>{n.setTime(+n+e*Da)},(n,e)=>(e-n)/Da,n=>n.getUTCMinutes());iA.range;const aA=Pr(n=>{n.setTime(n-n.getMilliseconds()-n.getSeconds()*mo-n.getMinutes()*Da)},(n,e)=>{n.setTime(+n+e*yo)},(n,e)=>(e-n)/yo,n=>n.getHours());aA.range;const sA=Pr(n=>{n.setUTCMinutes(0,0,0)},(n,e)=>{n.setTime(+n+e*yo)},(n,e)=>(e-n)/yo,n=>n.getUTCHours());sA.range;const rp=Pr(n=>n.setHours(0,0,0,0),(n,e)=>n.setDate(n.getDate()+e),(n,e)=>(e-n-(e.getTimezoneOffset()-n.getTimezoneOffset())*Da)/Io,n=>n.getDate()-1);rp.range;const Sy=Pr(n=>{n.setUTCHours(0,0,0,0)},(n,e)=>{n.setUTCDate(n.getUTCDate()+e)},(n,e)=>(e-n)/Io,n=>n.getUTCDate()-1);Sy.range;const mk=Pr(n=>{n.setUTCHours(0,0,0,0)},(n,e)=>{n.setUTCDate(n.getUTCDate()+e)},(n,e)=>(e-n)/Io,n=>Math.floor(n/Io));mk.range;function fu(n){return Pr(e=>{e.setDate(e.getDate()-(e.getDay()+7-n)%7),e.setHours(0,0,0,0)},(e,t)=>{e.setDate(e.getDate()+t*7)},(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Da)/nA)}const Cy=fu(0),p1=fu(1),Fne=fu(2),Vne=fu(3),tf=fu(4),jne=fu(5),Une=fu(6);Cy.range;p1.range;Fne.range;Vne.range;tf.range;jne.range;Une.range;function hu(n){return Pr(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-n)%7),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t*7)},(e,t)=>(t-e)/nA)}const Ty=hu(0),g1=hu(1),Hne=hu(2),zne=hu(3),nf=hu(4),$ne=hu(5),Gne=hu(6);Ty.range;g1.range;Hne.range;zne.range;nf.range;$ne.range;Gne.range;const oA=Pr(n=>{n.setDate(1),n.setHours(0,0,0,0)},(n,e)=>{n.setMonth(n.getMonth()+e)},(n,e)=>e.getMonth()-n.getMonth()+(e.getFullYear()-n.getFullYear())*12,n=>n.getMonth());oA.range;const lA=Pr(n=>{n.setUTCDate(1),n.setUTCHours(0,0,0,0)},(n,e)=>{n.setUTCMonth(n.getUTCMonth()+e)},(n,e)=>e.getUTCMonth()-n.getUTCMonth()+(e.getUTCFullYear()-n.getUTCFullYear())*12,n=>n.getUTCMonth());lA.range;const Do=Pr(n=>{n.setMonth(0,1),n.setHours(0,0,0,0)},(n,e)=>{n.setFullYear(n.getFullYear()+e)},(n,e)=>e.getFullYear()-n.getFullYear(),n=>n.getFullYear());Do.every=n=>!isFinite(n=Math.floor(n))||!(n>0)?null:Pr(e=>{e.setFullYear(Math.floor(e.getFullYear()/n)*n),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t*n)});Do.range;const Ro=Pr(n=>{n.setUTCMonth(0,1),n.setUTCHours(0,0,0,0)},(n,e)=>{n.setUTCFullYear(n.getUTCFullYear()+e)},(n,e)=>e.getUTCFullYear()-n.getUTCFullYear(),n=>n.getUTCFullYear());Ro.every=n=>!isFinite(n=Math.floor(n))||!(n>0)?null:Pr(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/n)*n),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t*n)});Ro.range;function yk(n,e,t,r,i,a){const s=[[zc,1,mo],[zc,5,5*mo],[zc,15,15*mo],[zc,30,30*mo],[a,1,Da],[a,5,5*Da],[a,15,15*Da],[a,30,30*Da],[i,1,yo],[i,3,3*yo],[i,6,6*yo],[i,12,12*yo],[r,1,Io],[r,2,2*Io],[t,1,nA],[e,1,x3],[e,3,3*x3],[n,1,v2]];function o(d,f,p){const g=f<d;g&&([d,f]=[f,d]);const m=p&&typeof p.range=="function"?p:c(d,f,p),x=m?m.range(d,+f+1):[];return g?x.reverse():x}function c(d,f,p){const g=Math.abs(f-d)/p,m=q_(([,,A])=>A).right(s,g);if(m===s.length)return n.every(Nw(d/v2,f/v2,p));if(m===0)return h1.every(Math.max(Nw(d,f,p),1));const[x,b]=s[g/s[m-1][2]<s[m][2]/g?m-1:m];return x.every(b)}return[o,c]}const[Wne,Yne]=yk(Ro,lA,Ty,mk,sA,iA),[qne,Xne]=yk(Do,oA,Cy,rp,aA,rA);function x2(n){if(0<=n.y&&n.y<100){var e=new Date(-1,n.m,n.d,n.H,n.M,n.S,n.L);return e.setFullYear(n.y),e}return new Date(n.y,n.m,n.d,n.H,n.M,n.S,n.L)}function w2(n){if(0<=n.y&&n.y<100){var e=new Date(Date.UTC(-1,n.m,n.d,n.H,n.M,n.S,n.L));return e.setUTCFullYear(n.y),e}return new Date(Date.UTC(n.y,n.m,n.d,n.H,n.M,n.S,n.L))}function kh(n,e,t){return{y:n,m:e,d:t,H:0,M:0,S:0,L:0}}function Kne(n){var e=n.dateTime,t=n.date,r=n.time,i=n.periods,a=n.days,s=n.shortDays,o=n.months,c=n.shortMonths,d=Nh(i),f=Lh(i),p=Nh(a),g=Lh(a),m=Nh(s),x=Lh(s),b=Nh(o),A=Lh(o),E=Nh(c),C=Lh(c),T={a:W,A:K,b:Z,B:fe,c:null,d:S3,e:S3,f:xre,g:Dre,G:Mre,H:mre,I:yre,j:vre,L:vk,m:wre,M:bre,p:ge,q:ve,Q:I3,s:D3,S:_re,u:Are,U:Ere,V:Sre,w:Cre,W:Tre,x:null,X:null,y:Ire,Y:Rre,Z:Ore,"%":T3},D={a:be,A:Pe,b:ue,B:Se,c:null,d:C3,e:C3,f:Lre,g:Wre,G:qre,H:Pre,I:kre,j:Nre,L:wk,m:Bre,M:Fre,p:Ae,q:Fe,Q:I3,s:D3,S:Vre,u:jre,U:Ure,V:Hre,w:zre,W:$re,x:null,X:null,y:Gre,Y:Yre,Z:Xre,"%":T3},k={a:F,A:N,b:P,B:V,c:q,d:A3,e:A3,f:fre,g:_3,G:b3,H:E3,I:E3,j:lre,L:dre,m:ore,M:cre,p:R,q:sre,Q:pre,s:gre,S:ure,u:tre,U:nre,V:rre,w:ere,W:ire,x:X,X:G,y:_3,Y:b3,Z:are,"%":hre};T.x=B(t,T),T.X=B(r,T),T.c=B(e,T),D.x=B(t,D),D.X=B(r,D),D.c=B(e,D);function B(ae,ye){return function(pe){var ie=[],Ve=-1,we=0,ze=ae.length,Oe,Re,qe;for(pe instanceof Date||(pe=new Date(+pe));++Ve<ze;)ae.charCodeAt(Ve)===37&&(ie.push(ae.slice(we,Ve)),(Re=w3[Oe=ae.charAt(++Ve)])!=null?Oe=ae.charAt(++Ve):Re=Oe==="e"?" ":"0",(qe=ye[Oe])&&(Oe=qe(pe,Re)),ie.push(Oe),we=Ve+1);return ie.push(ae.slice(we,Ve)),ie.join("")}}function O(ae,ye){return function(pe){var ie=kh(1900,void 0,1),Ve=I(ie,ae,pe+="",0),we,ze;if(Ve!=pe.length)return null;if("Q"in ie)return new Date(ie.Q);if("s"in ie)return new Date(ie.s*1e3+("L"in ie?ie.L:0));if(ye&&!("Z"in ie)&&(ie.Z=0),"p"in ie&&(ie.H=ie.H%12+ie.p*12),ie.m===void 0&&(ie.m="q"in ie?ie.q:0),"V"in ie){if(ie.V<1||ie.V>53)return null;"w"in ie||(ie.w=1),"Z"in ie?(we=w2(kh(ie.y,0,1)),ze=we.getUTCDay(),we=ze>4||ze===0?g1.ceil(we):g1(we),we=Sy.offset(we,(ie.V-1)*7),ie.y=we.getUTCFullYear(),ie.m=we.getUTCMonth(),ie.d=we.getUTCDate()+(ie.w+6)%7):(we=x2(kh(ie.y,0,1)),ze=we.getDay(),we=ze>4||ze===0?p1.ceil(we):p1(we),we=rp.offset(we,(ie.V-1)*7),ie.y=we.getFullYear(),ie.m=we.getMonth(),ie.d=we.getDate()+(ie.w+6)%7)}else("W"in ie||"U"in ie)&&("w"in ie||(ie.w="u"in ie?ie.u%7:"W"in ie?1:0),ze="Z"in ie?w2(kh(ie.y,0,1)).getUTCDay():x2(kh(ie.y,0,1)).getDay(),ie.m=0,ie.d="W"in ie?(ie.w+6)%7+ie.W*7-(ze+5)%7:ie.w+ie.U*7-(ze+6)%7);return"Z"in ie?(ie.H+=ie.Z/100|0,ie.M+=ie.Z%100,w2(ie)):x2(ie)}}function I(ae,ye,pe,ie){for(var Ve=0,we=ye.length,ze=pe.length,Oe,Re;Ve<we;){if(ie>=ze)return-1;if(Oe=ye.charCodeAt(Ve++),Oe===37){if(Oe=ye.charAt(Ve++),Re=k[Oe in w3?ye.charAt(Ve++):Oe],!Re||(ie=Re(ae,pe,ie))<0)return-1}else if(Oe!=pe.charCodeAt(ie++))return-1}return ie}function R(ae,ye,pe){var ie=d.exec(ye.slice(pe));return ie?(ae.p=f.get(ie[0].toLowerCase()),pe+ie[0].length):-1}function F(ae,ye,pe){var ie=m.exec(ye.slice(pe));return ie?(ae.w=x.get(ie[0].toLowerCase()),pe+ie[0].length):-1}function N(ae,ye,pe){var ie=p.exec(ye.slice(pe));return ie?(ae.w=g.get(ie[0].toLowerCase()),pe+ie[0].length):-1}function P(ae,ye,pe){var ie=E.exec(ye.slice(pe));return ie?(ae.m=C.get(ie[0].toLowerCase()),pe+ie[0].length):-1}function V(ae,ye,pe){var ie=b.exec(ye.slice(pe));return ie?(ae.m=A.get(ie[0].toLowerCase()),pe+ie[0].length):-1}function q(ae,ye,pe){return I(ae,e,ye,pe)}function X(ae,ye,pe){return I(ae,t,ye,pe)}function G(ae,ye,pe){return I(ae,r,ye,pe)}function W(ae){return s[ae.getDay()]}function K(ae){return a[ae.getDay()]}function Z(ae){return c[ae.getMonth()]}function fe(ae){return o[ae.getMonth()]}function ge(ae){return i[+(ae.getHours()>=12)]}function ve(ae){return 1+~~(ae.getMonth()/3)}function be(ae){return s[ae.getUTCDay()]}function Pe(ae){return a[ae.getUTCDay()]}function ue(ae){return c[ae.getUTCMonth()]}function Se(ae){return o[ae.getUTCMonth()]}function Ae(ae){return i[+(ae.getUTCHours()>=12)]}function Fe(ae){return 1+~~(ae.getUTCMonth()/3)}return{format:function(ae){var ye=B(ae+="",T);return ye.toString=function(){return ae},ye},parse:function(ae){var ye=O(ae+="",!1);return ye.toString=function(){return ae},ye},utcFormat:function(ae){var ye=B(ae+="",D);return ye.toString=function(){return ae},ye},utcParse:function(ae){var ye=O(ae+="",!0);return ye.toString=function(){return ae},ye}}}var w3={"-":"",_:" ",0:"0"},Yr=/^\s*\d+/,Qne=/^%/,Zne=/[\\^$*+?|[\]().{}]/g;function Wt(n,e,t){var r=n<0?"-":"",i=(r?-n:n)+"",a=i.length;return r+(a<t?new Array(t-a+1).join(e)+i:i)}function Jne(n){return n.replace(Zne,"\\$&")}function Nh(n){return new RegExp("^(?:"+n.map(Jne).join("|")+")","i")}function Lh(n){return new Map(n.map((e,t)=>[e.toLowerCase(),t]))}function ere(n,e,t){var r=Yr.exec(e.slice(t,t+1));return r?(n.w=+r[0],t+r[0].length):-1}function tre(n,e,t){var r=Yr.exec(e.slice(t,t+1));return r?(n.u=+r[0],t+r[0].length):-1}function nre(n,e,t){var r=Yr.exec(e.slice(t,t+2));return r?(n.U=+r[0],t+r[0].length):-1}function rre(n,e,t){var r=Yr.exec(e.slice(t,t+2));return r?(n.V=+r[0],t+r[0].length):-1}function ire(n,e,t){var r=Yr.exec(e.slice(t,t+2));return r?(n.W=+r[0],t+r[0].length):-1}function b3(n,e,t){var r=Yr.exec(e.slice(t,t+4));return r?(n.y=+r[0],t+r[0].length):-1}function _3(n,e,t){var r=Yr.exec(e.slice(t,t+2));return r?(n.y=+r[0]+(+r[0]>68?1900:2e3),t+r[0].length):-1}function are(n,e,t){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(t,t+6));return r?(n.Z=r[1]?0:-(r[2]+(r[3]||"00")),t+r[0].length):-1}function sre(n,e,t){var r=Yr.exec(e.slice(t,t+1));return r?(n.q=r[0]*3-3,t+r[0].length):-1}function ore(n,e,t){var r=Yr.exec(e.slice(t,t+2));return r?(n.m=r[0]-1,t+r[0].length):-1}function A3(n,e,t){var r=Yr.exec(e.slice(t,t+2));return r?(n.d=+r[0],t+r[0].length):-1}function lre(n,e,t){var r=Yr.exec(e.slice(t,t+3));return r?(n.m=0,n.d=+r[0],t+r[0].length):-1}function E3(n,e,t){var r=Yr.exec(e.slice(t,t+2));return r?(n.H=+r[0],t+r[0].length):-1}function cre(n,e,t){var r=Yr.exec(e.slice(t,t+2));return r?(n.M=+r[0],t+r[0].length):-1}function ure(n,e,t){var r=Yr.exec(e.slice(t,t+2));return r?(n.S=+r[0],t+r[0].length):-1}function dre(n,e,t){var r=Yr.exec(e.slice(t,t+3));return r?(n.L=+r[0],t+r[0].length):-1}function fre(n,e,t){var r=Yr.exec(e.slice(t,t+6));return r?(n.L=Math.floor(r[0]/1e3),t+r[0].length):-1}function hre(n,e,t){var r=Qne.exec(e.slice(t,t+1));return r?t+r[0].length:-1}function pre(n,e,t){var r=Yr.exec(e.slice(t));return r?(n.Q=+r[0],t+r[0].length):-1}function gre(n,e,t){var r=Yr.exec(e.slice(t));return r?(n.s=+r[0],t+r[0].length):-1}function S3(n,e){return Wt(n.getDate(),e,2)}function mre(n,e){return Wt(n.getHours(),e,2)}function yre(n,e){return Wt(n.getHours()%12||12,e,2)}function vre(n,e){return Wt(1+rp.count(Do(n),n),e,3)}function vk(n,e){return Wt(n.getMilliseconds(),e,3)}function xre(n,e){return vk(n,e)+"000"}function wre(n,e){return Wt(n.getMonth()+1,e,2)}function bre(n,e){return Wt(n.getMinutes(),e,2)}function _re(n,e){return Wt(n.getSeconds(),e,2)}function Are(n){var e=n.getDay();return e===0?7:e}function Ere(n,e){return Wt(Cy.count(Do(n)-1,n),e,2)}function xk(n){var e=n.getDay();return e>=4||e===0?tf(n):tf.ceil(n)}function Sre(n,e){return n=xk(n),Wt(tf.count(Do(n),n)+(Do(n).getDay()===4),e,2)}function Cre(n){return n.getDay()}function Tre(n,e){return Wt(p1.count(Do(n)-1,n),e,2)}function Ire(n,e){return Wt(n.getFullYear()%100,e,2)}function Dre(n,e){return n=xk(n),Wt(n.getFullYear()%100,e,2)}function Rre(n,e){return Wt(n.getFullYear()%1e4,e,4)}function Mre(n,e){var t=n.getDay();return n=t>=4||t===0?tf(n):tf.ceil(n),Wt(n.getFullYear()%1e4,e,4)}function Ore(n){var e=n.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+Wt(e/60|0,"0",2)+Wt(e%60,"0",2)}function C3(n,e){return Wt(n.getUTCDate(),e,2)}function Pre(n,e){return Wt(n.getUTCHours(),e,2)}function kre(n,e){return Wt(n.getUTCHours()%12||12,e,2)}function Nre(n,e){return Wt(1+Sy.count(Ro(n),n),e,3)}function wk(n,e){return Wt(n.getUTCMilliseconds(),e,3)}function Lre(n,e){return wk(n,e)+"000"}function Bre(n,e){return Wt(n.getUTCMonth()+1,e,2)}function Fre(n,e){return Wt(n.getUTCMinutes(),e,2)}function Vre(n,e){return Wt(n.getUTCSeconds(),e,2)}function jre(n){var e=n.getUTCDay();return e===0?7:e}function Ure(n,e){return Wt(Ty.count(Ro(n)-1,n),e,2)}function bk(n){var e=n.getUTCDay();return e>=4||e===0?nf(n):nf.ceil(n)}function Hre(n,e){return n=bk(n),Wt(nf.count(Ro(n),n)+(Ro(n).getUTCDay()===4),e,2)}function zre(n){return n.getUTCDay()}function $re(n,e){return Wt(g1.count(Ro(n)-1,n),e,2)}function Gre(n,e){return Wt(n.getUTCFullYear()%100,e,2)}function Wre(n,e){return n=bk(n),Wt(n.getUTCFullYear()%100,e,2)}function Yre(n,e){return Wt(n.getUTCFullYear()%1e4,e,4)}function qre(n,e){var t=n.getUTCDay();return n=t>=4||t===0?nf(n):nf.ceil(n),Wt(n.getUTCFullYear()%1e4,e,4)}function Xre(){return"+0000"}function T3(){return"%"}function I3(n){return+n}function D3(n){return Math.floor(+n/1e3)}var cd,_k,Ak;Kre({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Kre(n){return cd=Kne(n),_k=cd.format,cd.parse,Ak=cd.utcFormat,cd.utcParse,cd}function Qre(n){return new Date(n)}function Zre(n){return n instanceof Date?+n:+new Date(+n)}function cA(n,e,t,r,i,a,s,o,c,d){var f=uk(),p=f.invert,g=f.domain,m=d(".%L"),x=d(":%S"),b=d("%I:%M"),A=d("%I %p"),E=d("%a %d"),C=d("%b %d"),T=d("%B"),D=d("%Y");function k(B){return(c(B)<B?m:o(B)<B?x:s(B)<B?b:a(B)<B?A:r(B)<B?i(B)<B?E:C:t(B)<B?T:D)(B)}return f.invert=function(B){return new Date(p(B))},f.domain=function(B){return arguments.length?g(Array.from(B,Zre)):g().map(Qre)},f.ticks=function(B){var O=g();return n(O[0],O[O.length-1],B??10)},f.tickFormat=function(B,O){return O==null?k:d(O)},f.nice=function(B){var O=g();return(!B||typeof B.range!="function")&&(B=e(O[0],O[O.length-1],B??10)),B?g(hk(O,B)):f},f.copy=function(){return np(f,cA(n,e,t,r,i,a,s,o,c,d))},f}function Ek(){return ko.apply(cA(qne,Xne,Do,oA,Cy,rp,aA,rA,zc,_k).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function Jre(){return ko.apply(cA(Wne,Yne,Ro,lA,Ty,Sy,sA,iA,zc,Ak).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function eie(){var n=0,e=1,t,r,i,a,s=Ia,o=!1,c;function d(p){return p==null||isNaN(p=+p)?c:s(i===0?.5:(p=(a(p)-t)*i,o?Math.max(0,Math.min(1,p)):p))}d.domain=function(p){return arguments.length?([n,e]=p,t=a(n=+n),r=a(e=+e),i=t===r?0:1/(r-t),d):[n,e]},d.clamp=function(p){return arguments.length?(o=!!p,d):o},d.interpolator=function(p){return arguments.length?(s=p,d):s};function f(p){return function(g){var m,x;return arguments.length?([m,x]=g,s=p(m,x),d):[s(0),s(1)]}}return d.range=f(_y),d.rangeRound=f(ck),d.unknown=function(p){return arguments.length?(c=p,d):c},function(p){return a=p,t=p(n),r=p(e),i=t===r?0:1/(r-t),d}}function tie(n,e){return e.domain(n.domain()).interpolator(n.interpolator()).clamp(n.clamp()).unknown(n.unknown())}function Sk(){var n=Ey(eie()(Ia));return n.copy=function(){return tie(n,Sk())},Ute.apply(n,arguments)}function nie(n,e){return function(r,i){return i.location==="tick"?i.scale.tickFormat(n)(r):i.location==="zoom-slider-tooltip"?e.tickFormat(2)(r):`${r}`}}function m1(n){return n.scaleType==="band"}function uA(n){return n.scaleType==="point"}function rie(n){return n.scaleType==="symlog"}function iie(n){return n.type==="piecewise"?gk(n.thresholds,n.colors):Sk([n.min??0,n.max??100],n.color)}function rf(n){return n.values?l1(n.values,n.colors).unknown(n.unknownColor??null):l1(n.colors.map((e,t)=>t),n.colors).unknown(n.unknownColor??null)}function qc(n){return n.type==="ordinal"?rf(n):iie(n)}function Ck(n){const{tickMaxStep:e,tickMinStep:t,tickNumber:r,range:i,domain:a}=n,s=t===void 0?999:Math.floor(Math.abs(a[1]-a[0])/t),o=e===void 0?2:Math.ceil(Math.abs(a[1]-a[0])/e),c=r??Math.floor(Math.abs(i[1]-i[0])/50);return Math.min(s,Math.max(o,c))}function Tk(n,e){return e[1]-e[0]===0?1:n/((e[1]-e[0])/100)}function aie(n,e){const t=pk(n,e),r=t.ticks,{negativeScale:i,linearScale:a,positiveScale:s}=sie(t);return t.ticks=o=>{const c=r(o),d=t.constant();let f=0,p=0,g=0;c.forEach(x=>{x>-d&&x<d&&(p+=1),x<=-d&&(f+=1),x>=d&&(g+=1)});const m=[];if(f>0&&m.push(...i.ticks(f)),p>0){const x=a.ticks(p);m.at(-1)===x[0]?m.push(...x.slice(1)):m.push(...x)}if(g>0){const x=s.ticks(g);m.at(-1)===x[0]?m.push(...x.slice(1)):m.push(...x)}return m},t.tickFormat=(o=10,c)=>{const d=t.constant(),[f,p]=t.domain(),g=p-f,m=i.domain(),x=m[1]-m[0],A=(g===0?0:x/g)*o,E=a.domain(),C=E[1]-E[0],D=(g===0?0:C/g)*o,k=s.domain(),B=k[1]-k[0],I=(g===0?0:B/g)*o,R=i.tickFormat(A,c),F=a.tickFormat(D,c),N=s.tickFormat(I,c);return P=>(P.valueOf()<=-d?R:P.valueOf()>=d?N:F)(P)},t}function sie(n){const e=n.constant(),t=n.domain(),r=[t[0],Math.min(t[1],-e)],i=f1(r,n.range()),a=[Math.max(t[0],-e),Math.min(t[1],e)],s=eA(a,n.range()),o=[Math.max(t[0],e),t[1]],c=f1(o,n.range());return{negativeScale:i,linearScale:s,positiveScale:c}}function y1(n,e,t){switch(n){case"log":return f1(e,t);case"pow":return tA(e,t);case"sqrt":return Bne(e,t);case"time":return Ek(e,t);case"utc":return Jre(e,t);case"symlog":return aie(e,t);default:return eA(e,t)}}const v1=n=>(n==null?void 0:n[0])instanceof Date;function x1(n,e){const t=Ek(n.data,e);return(r,{location:i})=>i==="tick"?t.tickFormat(n.tickNumber)(r):`${r.toLocaleString()}`}const b2=(n,e)=>{const t=n[1]-n[0],r=e[1]-e[0],i=n[0]-e[0]*t/r,a=n[1]+(100-e[1])*t/r;return[i,a]};let R3,M3;class oie{constructor(){if(this.types=new Set,R3)throw new Error("You can only create one instance!");R3=this.types}addType(e){this.types.add(e)}getTypes(){return this.types}}class lie{constructor(){if(this.types=new Set,M3)throw new Error("You can only create one instance!");M3=this.types}addType(e){this.types.add(e)}getTypes(){return this.types}}const Iy=new oie;Iy.addType("bar");Iy.addType("line");Iy.addType("scatter");const Ik=new lie;Ik.addType("radar");function dA(n){return Iy.getTypes().has(n)}const cie=(n,e,t,r,i,a,s,o)=>{var x;const c=r==="x"?i[e].xExtremumGetter:i[e].yExtremumGetter,d=((x=s[e])==null?void 0:x.series)??{},[f,p]=(c==null?void 0:c({series:d,axis:t,axisIndex:a,isDefaultAxis:a===0,getFilters:o}))??[1/0,-1/0],[g,m]=n;return[Math.min(f,g),Math.max(p,m)]},Dk=(n,e,t,r,i,a)=>{const o=Object.keys(t).filter(dA).reduce((c,d)=>cie(c,d,n,e,t,r,i,a),[1/0,-1/0]);return Number.isNaN(o[0])||Number.isNaN(o[1])?[1/0,-1/0]:o},uie=(n,e,t,r)=>{const i=new Set;return Object.keys(e).filter(dA).forEach(s=>{var d,f,p;const o=((d=t[s])==null?void 0:d.series)??{},c=(p=(f=e[s]).axisTooltipGetter)==null?void 0:p.call(f,o);c!==void 0&&c.forEach(({axisId:g,direction:m})=>{m===n&&i.add(g??r)})}),i},die=(n,e,t,r)=>{var i;if(n.domainLimit!==void 0)return n.domainLimit;if(e==="x")for(const a of((i=r.line)==null?void 0:i.seriesOrder)??[]){const s=r.line.series[a];if(s.xAxisId===n.id||s.xAxisId===void 0&&t===0)return"strict"}return"nice"};function fie(n,e,t){const r=e==="x"?[n.left,n.left+n.width]:[n.top+n.height,n.top];return t.reverse?[r[1],r[0]]:r}const hie=.2,pie=.1;function Rk({drawingArea:n,formattedSeries:e,axis:t,seriesConfig:r,axisDirection:i,zoomMap:a,zoomOptions:s,getFilters:o,preferStrictDomainInLineCharts:c}){if(t===void 0)return{axis:{},axisIds:[]};const d=uie(i,r,e,t[0].id),f={};return t.forEach((p,g)=>{const m=p,x=s==null?void 0:s[m.id],b=a==null?void 0:a.get(m.id),A=b?[b.start,b.end]:[0,100],E=fie(n,i,m),[C,T]=Dk(m,i,r,g,e,b===void 0&&!x?o:void 0),D=!m.ignoreTooltip&&d.has(m.id),k=m.data??[];if(m1(m)){const W=m.categoryGapRatio??hie,K=m.barGapRatio??pie,Z=i==="y"?[E[1],E[0]]:E,fe=b2(Z,A);if(f[m.id]=H({offset:0,height:0,categoryGapRatio:W,barGapRatio:K,triggerTooltip:D},m,{data:k,scale:by(m.data,fe).paddingInner(W).paddingOuter(W/2),tickNumber:m.data.length,colorScale:m.colorMap&&(m.colorMap.type==="ordinal"?rf(H({values:m.data},m.colorMap)):qc(m.colorMap))}),v1(m.data)){const ge=x1(m,Z);f[m.id].valueFormatter=m.valueFormatter??ge}}if(uA(m)){const W=i==="y"?[...E].reverse():E,K=b2(W,A);if(f[m.id]=H({offset:0,height:0,triggerTooltip:D},m,{data:k,scale:ak(m.data,K),tickNumber:m.data.length,colorScale:m.colorMap&&(m.colorMap.type==="ordinal"?rf(H({values:m.data},m.colorMap)):qc(m.colorMap))}),v1(m.data)){const Z=x1(m,W);f[m.id].valueFormatter=m.valueFormatter??Z}}if(m.scaleType==="band"||m.scaleType==="point")return;const B=m.scaleType??"linear",O=c?die(m,i,g,e):m.domainLimit??"nice",I=[m.min??C,m.max??T];if(typeof O=="function"){const{min:W,max:K}=O(C,T);I[0]=W,I[1]=K}const R=Ck(H({},m,{range:E,domain:I})),F=Tk(R,A),N=b2(E,A),P=y1(B,I,N);rie(m)&&m.constant!=null&&P.constant(m.constant);const V=O==="nice"?P.nice(R):P,[q,X]=V.domain(),G=[m.min??q,m.max??X];f[m.id]=H({offset:0,height:0,triggerTooltip:D},m,{data:k,scaleType:B,scale:V.domain(G),tickNumber:F,colorScale:m.colorMap&&qc(m.colorMap),valueFormatter:m.valueFormatter??nie(F,y1(B,E.map(W=>P.invert(W)),E))})}),{axis:f,axisIds:t.map(({id:p})=>p)}}function gie(n){return n!=null}function Mk({zoomMap:n,zoomOptions:e,seriesConfig:t,formattedSeries:r,direction:i}){return(a,s)=>{const o=e[a.id];if(!o||o.filterMode!=="discard")return null;const c=n==null?void 0:n.get(a.id);if(c===void 0||c.start<=0&&c.end>=100)return null;const d=a.scaleType;return d==="point"||d==="band"?mie(a.data,c.start,c.end,i):yie(d,Dk(a,i,t,s,r),c.start,c.end,i,a.data)}}function mie(n,e,t,r){const i=(n==null?void 0:n.length)??0,a=Math.floor(e*i/100),s=Math.ceil(t*i/100);return function(c,d){return(c[r]??(n==null?void 0:n[d]))==null?!0:d>=a&&d<s}}function yie(n,e,t,r,i,a){let s,o;[s,o]=y1(n??"linear",e,[0,100]).nice().domain(),s=s instanceof Date?s.getTime():s,o=o instanceof Date?o.getTime():o;const c=s+t*(o-s)/100,d=s+r*(o-s)/100;return function(p,g){const m=p[i]??(a==null?void 0:a[g]);return m==null?!0:m>=c&&m<=d}}const vie=n=>({currentAxisId:e,seriesXAxisId:t,seriesYAxisId:r,isDefaultAxis:i})=>(a,s)=>{var d,f;return!(e===t?r:t)||i?((f=(d=Object.values(n??{}))[0])==null?void 0:f.call(d,a,s))??!0:[r,t].filter(p=>p!==e).map(p=>n[p??""]).filter(gie).every(p=>p(a,s))},O3=n=>(e=[])=>e.reduce((t,r)=>{const{zoom:i,id:a}=r,s=Y_(i,a,n);return s&&(t[a]=s),t},{}),xie=n=>{const e=new Map;return n.forEach(t=>{e.set(t.axisId,t)}),e},Ok=n=>n.zoom,Pk=Ye([Ok],n=>n==null?void 0:n.isInteracting),Dy=Ye([Ok],n=>(n==null?void 0:n.zoomData)&&xie(n==null?void 0:n.zoomData)),ip=Ye([du,bf],(n,e)=>H({},O3("x")(n),O3("y")(e)));Ye([ip,(n,e)=>e],(n,e)=>n[e]);const wie=Ye([Dy,ip,Po,es],(n,e,t,r)=>n&&e&&Mk({zoomMap:n,zoomOptions:e,seriesConfig:t,formattedSeries:r,direction:"x"})),bie=Ye([Dy,ip,Po,es],(n,e,t,r)=>n&&e&&Mk({zoomMap:n,zoomOptions:e,seriesConfig:t,formattedSeries:r,direction:"y"})),kk=Ye([wie,bie,du,bf],(n,e,t,r)=>{if(n===void 0||e===void 0)return;const i=t==null?void 0:t.reduce((s,o,c)=>{const d=n(o,c);return d!==null&&(s[o.id]=d),s},{}),a=r==null?void 0:r.reduce((s,o,c)=>{const d=e(o,c);return d!==null&&(s[o.id]=d),s},{});if(!(Object.keys(i??{}).length===0&&Object.keys(a??{}).length===0))return vie(H({},i,a))}),oa=Ye([du,Oo,es,Po,Dy,ip,kk,WP],(n,e,t,r,i,a,s,o)=>Rk({drawingArea:e,formattedSeries:t,axis:n,seriesConfig:r,axisDirection:"x",zoomMap:i,zoomOptions:a,getFilters:s,preferStrictDomainInLineCharts:o})),la=Ye([bf,Oo,es,Po,Dy,ip,kk,WP],(n,e,t,r,i,a,s,o)=>Rk({drawingArea:e,formattedSeries:t,axis:n,seriesConfig:r,axisDirection:"y",zoomMap:i,zoomOptions:a,getFilters:s,preferStrictDomainInLineCharts:o}));Ye([oa,la,(n,e)=>e],(n,e,t)=>(n==null?void 0:n.axis[t])??(e==null?void 0:e.axis[t]));Ye([du,bf,(n,e)=>e],(n,e,t)=>{const r=(n==null?void 0:n.find(i=>i.id===t))??(e==null?void 0:e.find(i=>i.id===t))??null;if(r)return r});function ts(n){return n.bandwidth!==void 0}function ud(n){return n instanceof Date?n.getTime():n}function af(n,e){const{scale:t,data:r,reverse:i}=n;if(!ts(t)){const s=t.invert(e);if(r===void 0)return-1;const o=ud(s);return r==null?void 0:r.findIndex((d,f)=>{const p=ud(d);return p>o&&(f===0||Math.abs(o-p)<=Math.abs(o-ud(r[f-1])))||p<=o&&(f===r.length-1||Math.abs(ud(s)-p)<Math.abs(ud(s)-ud(r[f+1])))})}const a=t.bandwidth()===0?Math.floor((e-Math.min(...t.range())+t.step()/2)/t.step()):Math.floor((e-Math.min(...t.range()))/t.step());return a<0||a>=r.length?-1:i?r.length-1-a:a}function P3(n,e,t){const{scale:r,data:i}=n;if(!ts(r)){const a=r.invert(e);return t<0?a:i[t]}return t<0||t>=i.length?null:i[t]}function Vw(n,e){const t=n.createSVGPoint();return t.x=e.clientX,t.y=e.clientY,t.matrixTransform(n.getScreenCTM().inverse())}const _ie=Object.is;function Nk(n,e){if(n===e)return!0;if(!(n instanceof Object)||!(e instanceof Object))return!1;let t=0,r=0;for(const i in n)if(t+=1,!_ie(n[i],e[i])||!(i in e))return!1;for(const i in e)r+=1;return t===r}const Af=({store:n})=>{const e=He(function(){n.update(s=>H({},s,{interaction:{pointer:null,item:null}}))}),t=He(function(s){n.update(o=>{const c=o.interaction.item;return s?c===null||Object.keys(s).some(d=>s[d]!==c[d])?o:H({},o,{interaction:H({},o.interaction,{item:null})}):c===null?o:H({},o,{interaction:H({},o.interaction,{item:null})})})}),r=He(function(s){n.update(o=>Nk(o.interaction.item,s)?o:H({},o,{interaction:H({},o.interaction,{item:s})}))}),i=He(function(s){n.update(o=>H({},o,{interaction:H({},o.interaction,{pointer:s})}))});return{instance:{cleanInteraction:e,setItemInteraction:r,removeItemInteraction:t,setPointerCoordinate:i}}};Af.getInitialState=()=>({interaction:{item:null,pointer:null}});Af.params={};const fA=n=>n.interaction,Aie=Ye([fA],n=>n!==void 0),Lk=Ye([fA],n=>(n==null?void 0:n.item)??null),Bk=Ye([fA],n=>(n==null?void 0:n.pointer)??null),ap=Ye([Bk],n=>n&&n.x),sp=Ye([Bk],n=>n&&n.y),Eie=Ye([Lk],n=>n!==null);function jd(n,e){if(n===e)return!0;if(n&&e&&typeof n=="object"&&typeof e=="object"){if(n.constructor!==e.constructor)return!1;if(Array.isArray(n)){const i=n.length;if(i!==e.length)return!1;for(let a=0;a<i;a+=1)if(!jd(n[a],e[a]))return!1;return!0}if(n instanceof Map&&e instanceof Map){if(n.size!==e.size)return!1;const i=Array.from(n.entries());for(let a=0;a<i.length;a+=1)if(!e.has(i[a][0]))return!1;for(let a=0;a<i.length;a+=1){const s=i[a];if(!jd(s[1],e.get(s[0])))return!1}return!0}if(n instanceof Set&&e instanceof Set){if(n.size!==e.size)return!1;const i=Array.from(n.entries());for(let a=0;a<i.length;a+=1)if(!e.has(i[a][0]))return!1;return!0}if(ArrayBuffer.isView(n)&&ArrayBuffer.isView(e)){const i=n.length;if(i!==e.length)return!1;for(let a=0;a<i;a+=1)if(n[a]!==e[a])return!1;return!0}if(n.constructor===RegExp)return n.source===e.source&&n.flags===e.flags;if(n.valueOf!==Object.prototype.valueOf)return n.valueOf()===e.valueOf();if(n.toString!==Object.prototype.toString)return n.toString()===e.toString();const t=Object.keys(n),r=t.length;if(r!==Object.keys(e).length)return!1;for(let i=0;i<r;i+=1)if(!Object.prototype.hasOwnProperty.call(e,t[i]))return!1;for(let i=0;i<r;i+=1){const a=t[i];if(!jd(n[a],e[a]))return!1}return!0}return n!==n&&e!==e}const Ry=(n,e)=>e;function jw(n,e,t=e.axisIds[0]){return Array.isArray(t)?t.map(r=>af(e.axis[r],n)):af(e.axis[t],n)}const Fk=(n,e,t)=>{if(n===null)return null;const r=jw(n,e,t);return r===-1?null:r},hA=Ye([ap,oa,Ry],Fk),pA=Ye([sp,la,Ry],Fk),Sie=Ye([ap,sp,oa,la],(n,e,t,r)=>[...n===null?[]:t.axisIds.map(i=>({axisId:i,dataIndex:jw(n,t,i)})),...e===null?[]:r.axisIds.map(i=>({axisId:i,dataIndex:jw(e,r,i)}))].filter(i=>i.dataIndex!==null&&i.dataIndex>=0));function Vk(n,e,t,r=e.axisIds[0]){return Array.isArray(r)?r.map((i,a)=>P3(e.axis[i],n,t[a])):P3(e.axis[r],n,t)}const Cie=Ye([ap,oa,hA,Ry],(n,e,t,r)=>n===null||t===null||e.axisIds.length===0?null:Vk(n,e,t,r)),Tie=Ye([sp,la,pA,Ry],(n,e,t,r)=>n===null||t===null||e.axisIds.length===0?null:Vk(n,e,t,r)),jk=Ye([ap,oa],(n,e)=>n===null?[]:e.axisIds.filter(t=>e.axis[t].triggerTooltip).map(t=>({axisId:t,dataIndex:af(e.axis[t],n)})).filter(({dataIndex:t})=>t>=0),{memoizeOptions:{resultEqualityCheck:jd}}),Uk=Ye([sp,la],(n,e)=>n===null?[]:e.axisIds.filter(t=>e.axis[t].triggerTooltip).map(t=>({axisId:t,dataIndex:af(e.axis[t],n)})).filter(({dataIndex:t})=>t>=0),{memoizeOptions:{resultEqualityCheck:jd}}),Iie=Ye([jk,Uk],(n,e)=>n.length>0||e.length>0),Die=()=>{};function Rie(n,e,t,r){const i=mR(Mie,{store:n,selector:e,skip:r}).current;i.effect=t,M.useEffect(i.onMount(r),[r])}function Mie(n){const{store:e,selector:t,skip:r}=n;let i=!1,a;const s=()=>{o.dispose??(o.dispose=e.subscribe(c=>{const d=t(c);o.effect(a,d),a=d}))},o={effect:Die,dispose:null,onMount:c=>()=>{if(!c)return i||(i=!0,a=t(e.value)),s(),()=>{var d;(d=o.dispose)==null||d.call(o),o.dispose=null}}};return r||(i=!0,a=t(e.value),s()),o}const Ef=({params:n,store:e,seriesConfig:t,svgRef:r,instance:i})=>{const{xAxis:a,yAxis:s,dataset:o,onHighlightedAxisChange:c}=n,d=pt(e,Oo),f=pt(e,es),p=pt(e,Aie),{axis:g,axisIds:m}=pt(e,oa),{axis:x,axisIds:b}=pt(e,la);ZP({controlled:n.highlightedAxis}),Xn(()=>{n.highlightedAxis!==void 0&&e.update(T=>T.controlledCartesianAxisHighlight===n.highlightedAxis?T:H({},T,{controlledCartesianAxisHighlight:n.highlightedAxis}))},[e,n.highlightedAxis]);const A=M.useRef(!0);M.useEffect(()=>{if(A.current){A.current=!1;return}e.update(T=>H({},T,{cartesianAxis:H({},T.cartesianAxis,{x:tk(a,o),y:nk(s,o)})}))},[t,d,a,s,o,e]);const E=m[0],C=b[0];return Rie(e,Sie,(T,D)=>{if(!Object.is(T,D)){if(T.length!==D.length){c(D);return}T!=null&&T.some(({axisId:k,dataIndex:B},O)=>D[O].axisId!==k||D[O].dataIndex!==B)&&c(D)}},!c),M.useEffect(()=>{const T=r.current;if(!p||!T||n.disableAxisListener)return()=>{};const D=i.addInteractionListener("moveEnd",N=>{var P;N.detail.activeGestures.pan||(P=i.cleanInteraction)==null||P.call(i)}),k=i.addInteractionListener("panEnd",N=>{var P;N.detail.activeGestures.move||(P=i.cleanInteraction)==null||P.call(i)}),B=i.addInteractionListener("quickPressEnd",N=>{var P;!N.detail.activeGestures.move&&!N.detail.activeGestures.pan&&((P=i.cleanInteraction)==null||P.call(i))}),O=N=>{var X,G;const P=N.detail.srcEvent,V=N.detail.target,q=Vw(T,P);if(N.detail.srcEvent.buttons>=1&&(V!=null&&V.hasPointerCapture(N.detail.srcEvent.pointerId))&&!(V!=null&&V.closest("[data-charts-zoom-slider]"))&&(V==null||V.releasePointerCapture(N.detail.srcEvent.pointerId)),!i.isPointInside(q.x,q.y,V)){(X=i.cleanInteraction)==null||X.call(i);return}(G=i.setPointerCoordinate)==null||G.call(i,q)},I=i.addInteractionListener("move",O),R=i.addInteractionListener("pan",O),F=i.addInteractionListener("quickPress",O);return()=>{I.cleanup(),D.cleanup(),R.cleanup(),k.cleanup(),F.cleanup(),B.cleanup()}},[r,e,g,E,x,C,i,n.disableAxisListener,p]),M.useEffect(()=>{const T=r.current,D=n.onAxisClick;if(T===null||!D)return()=>{};const k=i.addInteractionListener("tap",B=>{let O=null,I=!1;const R=Vw(T,B.detail.srcEvent),F=af(g[E],R.x);I=F!==-1,O=I?F:af(x[C],R.y);const N=I?m[0]:b[0];if(O==null||O===-1)return;const P=(I?g:x)[N].data[O],V={};Object.keys(f).filter(q=>["bar","line"].includes(q)).forEach(q=>{var X;(X=f[q])==null||X.seriesOrder.forEach(G=>{const W=f[q].series[G],K=W.xAxisId,Z=W.yAxisId,fe=I?K:Z;(fe===void 0||fe===N)&&(V[G]=W.data[O])})}),D(B.detail.srcEvent,{dataIndex:O,axisValue:P,seriesValues:V})});return()=>{k.cleanup()}},[n.onAxisClick,f,r,g,m,x,b,E,C,i]),{}};Ef.params={xAxis:!0,yAxis:!0,dataset:!0,onAxisClick:!0,disableAxisListener:!0,onHighlightedAxisChange:!0,highlightedAxis:!0};Ef.getDefaultizedParams=({params:n})=>H({},n,{colors:n.colors??YP,theme:n.theme??"light",defaultizedXAxis:tk(n.xAxis,n.dataset),defaultizedYAxis:nk(n.yAxis,n.dataset)});Ef.getInitialState=n=>H({cartesianAxis:{x:n.defaultizedXAxis,y:n.defaultizedYAxis}},n.highlightedAxis===void 0?{}:{controlledCartesianAxisHighlight:n.highlightedAxis});const Sf=n=>n.controlledCartesianAxisHighlight,Hk=(n,e,t)=>t!==void 0?t.filter(r=>e.axis[r.axisId]!==void 0).map(r=>r):n===null?[]:[{axisId:e.axisIds[0],dataIndex:n}];Ye([hA,oa,Sf],Hk);Ye([pA,la,Sf],Hk);const zk=(n,e,t,r)=>r!==void 0?r.map(i=>{var a,s;return H({},i,{value:(s=(a=t.axis[i.axisId])==null?void 0:a.data)==null?void 0:s[i.dataIndex]})}).filter(({value:i})=>i!==void 0):e===null?[]:[{axisId:t.axisIds[0],dataIndex:n,value:e}],Oie=Ye([hA,Cie,oa,Sf],zk),Pie=Ye([pA,Tie,la,Sf],zk),$k=(n,e)=>n===void 0?[e.axis[e.axisIds[0]]]:n.map(r=>e.axis[r.axisId]??null).filter(r=>r!==null);Ye([Sf,oa],$k);Ye([Sf,la],$k);function k3(n,e){return n.id!==void 0?n:H({id:e},n)}function N3(n){return n.colorMap?H({},n,{colorScale:n.colorMap.type==="ordinal"&&n.data?rf(H({values:n.data},n.colorMap)):qc(n.colorMap.type==="continuous"?H({min:n.min,max:n.max},n.colorMap):n.colorMap)}):n}function Gk(n,e){if(!n||n.length===0)return{axis:{},axisIds:[]};const t={},r=[];return n.forEach((i,a)=>{const s=i.dataKey,o=i.id??`defaultized-z-axis-${a}`;if(s===void 0||i.data!==void 0){t[o]=N3(k3(i,o)),r.push(o);return}if(e===void 0)throw new Error("MUI X Charts: z-axis uses `dataKey` but no `dataset` is provided.");t[o]=N3(k3(H({},i,{data:e.map(c=>c[s])}),o)),r.push(o)}),{axis:t,axisIds:r}}const op=({params:n,store:e})=>{const{zAxis:t,dataset:r}=n,i=M.useRef(!0);return M.useEffect(()=>{if(i.current){i.current=!1;return}e.update(a=>H({},a,{zAxis:Gk(t,r)}))},[t,r,e]),{}};op.params={zAxis:!0,dataset:!0};op.getInitialState=n=>({zAxis:Gk(n.zAxis,n.dataset)});const kie=n=>n,Nie=Ye([kie],n=>n.zAxis),pu=({store:n,params:e})=>{ZP({controlled:e.highlightedItem}),Xn(()=>{n.update(i=>i.highlight.item===e.highlightedItem?i:H({},i,{highlight:H({},i.highlight,{item:e.highlightedItem})}))},[n,e.highlightedItem]);const t=He(()=>{var i;(i=e.onHighlightChange)==null||i.call(e,null),n.update(a=>H({},a,{highlight:{item:null}}))}),r=He(i=>{var s;const a=n.getSnapshot().highlight.item;Nk(a,i)||((s=e.onHighlightChange)==null||s.call(e,i),n.update(o=>H({},o,{highlight:{item:i}})))});return{instance:{clearHighlight:t,setHighlight:r}}};pu.getDefaultizedParams=({params:n})=>H({},n,{highlightedItem:n.highlightedItem??null});pu.getInitialState=n=>({highlight:{item:n.highlightedItem}});pu.params={highlightedItem:!0,onHighlightChange:!0};function Wk(n){let e=1/0,t=-1/0;for(const r of n??[])r<e&&(e=r),r>t&&(t=r);return[e,t]}const L3=(n,e)=>e==="x"?{x:n,y:null}:{x:null,y:n},Yk=n=>{var s;const{axis:e,getFilters:t,isDefaultAxis:r}=n,i=t==null?void 0:t({currentAxisId:e.id,isDefaultAxis:r}),a=i?(s=e.data)==null?void 0:s.filter((o,c)=>i({x:null,y:null},c)):e.data;return Wk(a??[])},qk=n=>e=>{const{series:t,axis:r,getFilters:i,isDefaultAxis:a}=e;return Object.keys(t).filter(s=>{const o=n==="x"?t[s].xAxisId:t[s].yAxisId;return o===r.id||a&&o===void 0}).reduce((s,o)=>{const{stackedData:c}=t[o],d=i==null?void 0:i({currentAxisId:r.id,isDefaultAxis:a,seriesXAxisId:t[o].xAxisId,seriesYAxisId:t[o].yAxisId}),[f,p]=(c==null?void 0:c.reduce((g,m,x)=>d&&(!d(L3(m[0],n),x)||!d(L3(m[1],n),x))?g:[Math.min(...m,g[0]),Math.max(...m,g[1])],[1/0,-1/0]))??[1/0,-1/0];return[Math.min(f,s[0]),Math.max(p,s[1])]},[1/0,-1/0])},Lie=n=>Object.keys(n.series).some(t=>n.series[t].layout==="horizontal")?qk("x")(n):Yk(n),Bie=n=>Object.keys(n.series).some(t=>n.series[t].layout==="horizontal")?Yk(n):qk("y")(n);function Tr(n){return function(){return n}}const B3=Math.abs,di=Math.atan2,Oc=Math.cos,Fie=Math.max,_2=Math.min,ys=Math.sin,Cd=Math.sqrt,Fi=1e-12,P0=Math.PI,w1=P0/2,Am=2*P0;function Vie(n){return n>1?0:n<-1?P0:Math.acos(n)}function F3(n){return n>=1?w1:n<=-1?-w1:Math.asin(n)}const Uw=Math.PI,Hw=2*Uw,Lc=1e-6,jie=Hw-Lc;function Xk(n){this._+=n[0];for(let e=1,t=n.length;e<t;++e)this._+=arguments[e]+n[e]}function Uie(n){let e=Math.floor(n);if(!(e>=0))throw new Error(`invalid digits: ${n}`);if(e>15)return Xk;const t=10**e;return function(r){this._+=r[0];for(let i=1,a=r.length;i<a;++i)this._+=Math.round(arguments[i]*t)/t+r[i]}}let Hie=class{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?Xk:Uie(e)}moveTo(e,t){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,t){this._append`L${this._x1=+e},${this._y1=+t}`}quadraticCurveTo(e,t,r,i){this._append`Q${+e},${+t},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(e,t,r,i,a,s){this._append`C${+e},${+t},${+r},${+i},${this._x1=+a},${this._y1=+s}`}arcTo(e,t,r,i,a){if(e=+e,t=+t,r=+r,i=+i,a=+a,a<0)throw new Error(`negative radius: ${a}`);let s=this._x1,o=this._y1,c=r-e,d=i-t,f=s-e,p=o-t,g=f*f+p*p;if(this._x1===null)this._append`M${this._x1=e},${this._y1=t}`;else if(g>Lc)if(!(Math.abs(p*c-d*f)>Lc)||!a)this._append`L${this._x1=e},${this._y1=t}`;else{let m=r-s,x=i-o,b=c*c+d*d,A=m*m+x*x,E=Math.sqrt(b),C=Math.sqrt(g),T=a*Math.tan((Uw-Math.acos((b+g-A)/(2*E*C)))/2),D=T/C,k=T/E;Math.abs(D-1)>Lc&&this._append`L${e+D*f},${t+D*p}`,this._append`A${a},${a},0,0,${+(p*m>f*x)},${this._x1=e+k*c},${this._y1=t+k*d}`}}arc(e,t,r,i,a,s){if(e=+e,t=+t,r=+r,s=!!s,r<0)throw new Error(`negative radius: ${r}`);let o=r*Math.cos(i),c=r*Math.sin(i),d=e+o,f=t+c,p=1^s,g=s?i-a:a-i;this._x1===null?this._append`M${d},${f}`:(Math.abs(this._x1-d)>Lc||Math.abs(this._y1-f)>Lc)&&this._append`L${d},${f}`,r&&(g<0&&(g=g%Hw+Hw),g>jie?this._append`A${r},${r},0,1,${p},${e-o},${t-c}A${r},${r},0,1,${p},${this._x1=d},${this._y1=f}`:g>Lc&&this._append`A${r},${r},0,${+(g>=Uw)},${p},${this._x1=e+r*Math.cos(a)},${this._y1=t+r*Math.sin(a)}`)}rect(e,t,r,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}};function zie(n){let e=3;return n.digits=function(t){if(!arguments.length)return e;if(t==null)e=null;else{const r=Math.floor(t);if(!(r>=0))throw new RangeError(`invalid digits: ${t}`);e=r}return n},()=>new Hie(e)}function $ie(n){return n.innerRadius}function Gie(n){return n.outerRadius}function Wie(n){return n.startAngle}function Yie(n){return n.endAngle}function qie(n){return n&&n.padAngle}function Xie(n,e,t,r,i,a,s,o){var c=t-n,d=r-e,f=s-i,p=o-a,g=p*c-f*d;if(!(g*g<Fi))return g=(f*(e-a)-p*(n-i))/g,[n+g*c,e+g*d]}function nm(n,e,t,r,i,a,s){var o=n-t,c=e-r,d=(s?a:-a)/Cd(o*o+c*c),f=d*c,p=-d*o,g=n+f,m=e+p,x=t+f,b=r+p,A=(g+x)/2,E=(m+b)/2,C=x-g,T=b-m,D=C*C+T*T,k=i-a,B=g*b-x*m,O=(T<0?-1:1)*Cd(Fie(0,k*k*D-B*B)),I=(B*T-C*O)/D,R=(-B*C-T*O)/D,F=(B*T+C*O)/D,N=(-B*C+T*O)/D,P=I-A,V=R-E,q=F-A,X=N-E;return P*P+V*V>q*q+X*X&&(I=F,R=N),{cx:I,cy:R,x01:-f,y01:-p,x11:I*(i/k-1),y11:R*(i/k-1)}}function Kk(){var n=$ie,e=Gie,t=Tr(0),r=null,i=Wie,a=Yie,s=qie,o=null,c=zie(d);function d(){var f,p,g=+n.apply(this,arguments),m=+e.apply(this,arguments),x=i.apply(this,arguments)-w1,b=a.apply(this,arguments)-w1,A=B3(b-x),E=b>x;if(o||(o=f=c()),m<g&&(p=m,m=g,g=p),!(m>Fi))o.moveTo(0,0);else if(A>Am-Fi)o.moveTo(m*Oc(x),m*ys(x)),o.arc(0,0,m,x,b,!E),g>Fi&&(o.moveTo(g*Oc(b),g*ys(b)),o.arc(0,0,g,b,x,E));else{var C=x,T=b,D=x,k=b,B=A,O=A,I=s.apply(this,arguments)/2,R=I>Fi&&(r?+r.apply(this,arguments):Cd(g*g+m*m)),F=_2(B3(m-g)/2,+t.apply(this,arguments)),N=F,P=F,V,q;if(R>Fi){var X=F3(R/g*ys(I)),G=F3(R/m*ys(I));(B-=X*2)>Fi?(X*=E?1:-1,D+=X,k-=X):(B=0,D=k=(x+b)/2),(O-=G*2)>Fi?(G*=E?1:-1,C+=G,T-=G):(O=0,C=T=(x+b)/2)}var W=m*Oc(C),K=m*ys(C),Z=g*Oc(k),fe=g*ys(k);if(F>Fi){var ge=m*Oc(T),ve=m*ys(T),be=g*Oc(D),Pe=g*ys(D),ue;if(A<P0)if(ue=Xie(W,K,be,Pe,ge,ve,Z,fe)){var Se=W-ue[0],Ae=K-ue[1],Fe=ge-ue[0],ae=ve-ue[1],ye=1/ys(Vie((Se*Fe+Ae*ae)/(Cd(Se*Se+Ae*Ae)*Cd(Fe*Fe+ae*ae)))/2),pe=Cd(ue[0]*ue[0]+ue[1]*ue[1]);N=_2(F,(g-pe)/(ye-1)),P=_2(F,(m-pe)/(ye+1))}else N=P=0}O>Fi?P>Fi?(V=nm(be,Pe,W,K,m,P,E),q=nm(ge,ve,Z,fe,m,P,E),o.moveTo(V.cx+V.x01,V.cy+V.y01),P<F?o.arc(V.cx,V.cy,P,di(V.y01,V.x01),di(q.y01,q.x01),!E):(o.arc(V.cx,V.cy,P,di(V.y01,V.x01),di(V.y11,V.x11),!E),o.arc(0,0,m,di(V.cy+V.y11,V.cx+V.x11),di(q.cy+q.y11,q.cx+q.x11),!E),o.arc(q.cx,q.cy,P,di(q.y11,q.x11),di(q.y01,q.x01),!E))):(o.moveTo(W,K),o.arc(0,0,m,C,T,!E)):o.moveTo(W,K),!(g>Fi)||!(B>Fi)?o.lineTo(Z,fe):N>Fi?(V=nm(Z,fe,ge,ve,g,-N,E),q=nm(W,K,be,Pe,g,-N,E),o.lineTo(V.cx+V.x01,V.cy+V.y01),N<F?o.arc(V.cx,V.cy,N,di(V.y01,V.x01),di(q.y01,q.x01),!E):(o.arc(V.cx,V.cy,N,di(V.y01,V.x01),di(V.y11,V.x11),!E),o.arc(0,0,g,di(V.cy+V.y11,V.cx+V.x11),di(q.cy+q.y11,q.cx+q.x11),E),o.arc(q.cx,q.cy,N,di(q.y11,q.x11),di(q.y01,q.x01),!E))):o.arc(0,0,g,k,D,E)}if(o.closePath(),f)return o=null,f+""||null}return d.centroid=function(){var f=(+n.apply(this,arguments)+ +e.apply(this,arguments))/2,p=(+i.apply(this,arguments)+ +a.apply(this,arguments))/2-P0/2;return[Oc(p)*f,ys(p)*f]},d.innerRadius=function(f){return arguments.length?(n=typeof f=="function"?f:Tr(+f),d):n},d.outerRadius=function(f){return arguments.length?(e=typeof f=="function"?f:Tr(+f),d):e},d.cornerRadius=function(f){return arguments.length?(t=typeof f=="function"?f:Tr(+f),d):t},d.padRadius=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:Tr(+f),d):r},d.startAngle=function(f){return arguments.length?(i=typeof f=="function"?f:Tr(+f),d):i},d.endAngle=function(f){return arguments.length?(a=typeof f=="function"?f:Tr(+f),d):a},d.padAngle=function(f){return arguments.length?(s=typeof f=="function"?f:Tr(+f),d):s},d.context=function(f){return arguments.length?(o=f??null,d):o},d}function Qk(n){return typeof n=="object"&&"length"in n?n:Array.from(n)}function Kie(n,e){return e<n?-1:e>n?1:e>=n?0:NaN}function Qie(n){return n}function Zie(){var n=Qie,e=Kie,t=null,r=Tr(0),i=Tr(Am),a=Tr(0);function s(o){var c,d=(o=Qk(o)).length,f,p,g=0,m=new Array(d),x=new Array(d),b=+r.apply(this,arguments),A=Math.min(Am,Math.max(-Am,i.apply(this,arguments)-b)),E,C=Math.min(Math.abs(A)/d,a.apply(this,arguments)),T=C*(A<0?-1:1),D;for(c=0;c<d;++c)(D=x[m[c]=c]=+n(o[c],c,o))>0&&(g+=D);for(e!=null?m.sort(function(k,B){return e(x[k],x[B])}):t!=null&&m.sort(function(k,B){return t(o[k],o[B])}),c=0,p=g?(A-d*T)/g:0;c<d;++c,b=E)f=m[c],D=x[f],E=b+(D>0?D*p:0)+T,x[f]={data:o[f],index:c,value:D,startAngle:b,endAngle:E,padAngle:C};return x}return s.value=function(o){return arguments.length?(n=typeof o=="function"?o:Tr(+o),s):n},s.sortValues=function(o){return arguments.length?(e=o,t=null,s):e},s.sort=function(o){return arguments.length?(t=o,e=null,s):t},s.startAngle=function(o){return arguments.length?(r=typeof o=="function"?o:Tr(+o),s):r},s.endAngle=function(o){return arguments.length?(i=typeof o=="function"?o:Tr(+o),s):i},s.padAngle=function(o){return arguments.length?(a=typeof o=="function"?o:Tr(+o),s):a},s}function sf(n,e){if((s=n.length)>1)for(var t=1,r,i,a=n[e[0]],s,o=a.length;t<s;++t)for(i=a,a=n[e[t]],r=0;r<o;++r)a[r][1]+=a[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function of(n){for(var e=n.length,t=new Array(e);--e>=0;)t[e]=e;return t}function Jie(n,e){return n[e]}function eae(n){const e=[];return e.key=n,e}function Zk(){var n=Tr([]),e=of,t=sf,r=Jie;function i(a){var s=Array.from(n.apply(this,arguments),eae),o,c=s.length,d=-1,f;for(const p of a)for(o=0,++d;o<c;++o)(s[o][d]=[0,+r(p,s[o].key,d,a)]).data=p;for(o=0,f=Qk(e(s));o<c;++o)s[f[o]].index=o;return t(s,f),s}return i.keys=function(a){return arguments.length?(n=typeof a=="function"?a:Tr(Array.from(a)),i):n},i.value=function(a){return arguments.length?(r=typeof a=="function"?a:Tr(+a),i):r},i.order=function(a){return arguments.length?(e=a==null?of:typeof a=="function"?a:Tr(Array.from(a)),i):e},i.offset=function(a){return arguments.length?(t=a??sf,i):t},i}function tae(n,e){if((r=n.length)>0){for(var t,r,i=0,a=n[0].length,s;i<a;++i){for(s=t=0;t<r;++t)s+=n[t][i][1]||0;if(s)for(t=0;t<r;++t)n[t][i][1]/=s}sf(n,e)}}function nae(n,e){if((c=n.length)>0)for(var t,r=0,i,a,s,o,c,d=n[e[0]].length;r<d;++r)for(s=o=0,t=0;t<c;++t)(a=(i=n[e[t]][r])[1]-i[0])>0?(i[0]=s,i[1]=s+=a):a<0?(i[1]=o,i[0]=o+=a):(i[0]=0,i[1]=a)}function rae(n,e){if((i=n.length)>0){for(var t=0,r=n[e[0]],i,a=r.length;t<a;++t){for(var s=0,o=0;s<i;++s)o+=n[s][t][1]||0;r[t][1]+=r[t][0]=-o/2}sf(n,e)}}function iae(n,e){if(!(!((s=n.length)>0)||!((a=(i=n[e[0]]).length)>0))){for(var t=0,r=1,i,a,s;r<a;++r){for(var o=0,c=0,d=0;o<s;++o){for(var f=n[e[o]],p=f[r][1]||0,g=f[r-1][1]||0,m=(p-g)/2,x=0;x<o;++x){var b=n[e[x]],A=b[r][1]||0,E=b[r-1][1]||0;m+=A-E}c+=p,d+=m*p}i[r-1][1]+=i[r-1][0]=t,c&&(t-=d/c)}i[r-1][1]+=i[r-1][0]=t,sf(n,e)}}function Jk(n){var e=n.map(aae);return of(n).sort(function(t,r){return e[t]-e[r]})}function aae(n){for(var e=-1,t=0,r=n.length,i,a=-1/0;++e<r;)(i=+n[e][1])>a&&(a=i,t=e);return t}function e8(n){var e=n.map(t8);return of(n).sort(function(t,r){return e[t]-e[r]})}function t8(n){for(var e=0,t=-1,r=n.length,i;++t<r;)(i=+n[t][1])&&(e+=i);return e}function sae(n){return e8(n).reverse()}function oae(n){var e=n.length,t,r,i=n.map(t8),a=Jk(n),s=0,o=0,c=[],d=[];for(t=0;t<e;++t)r=a[t],s<o?(s+=i[r],c.push(r)):(o+=i[r],d.push(r));return d.reverse().concat(c)}function lae(n){return of(n).reverse()}const A2={appearance:Jk,ascending:e8,descending:sae,insideOut:oae,none:of,reverse:lae},E2={expand:tae,diverging:nae,none:sf,silhouette:rae,wiggle:iae},n8=n=>{const{series:e,seriesOrder:t,defaultStrategy:r}=n,i=[],a={};return t.forEach(s=>{const{stack:o,stackOrder:c,stackOffset:d}=e[s];o===void 0?i.push({ids:[s],stackingOrder:A2.none,stackingOffset:E2.none}):a[o]===void 0?(a[o]=i.length,i.push({ids:[s],stackingOrder:A2[c??(r==null?void 0:r.stackOrder)??"none"],stackingOffset:E2[d??(r==null?void 0:r.stackOffset)??"diverging"]})):(i[a[o]].ids.push(s),c!==void 0&&(i[a[o]].stackingOrder=A2[c]),d!==void 0&&(i[a[o]].stackingOffset=E2[d]))}),i},cae=n=>n==null?"":n.toLocaleString(),uae=(n,e)=>{const{seriesOrder:t,series:r}=n,i=n8(n),a=e??[];t.forEach(o=>{const c=r[o].data;if(c!==void 0)c.forEach((d,f)=>{a.length<=f?a.push({[o]:d}):a[f][o]=d});else if(e===void 0)throw new Error([`MUI X Charts: bar series with id='${o}' has no data.`,"Either provide a data property to the series or use the dataset prop."].join(`
`))});const s={};return i.forEach(o=>{const{ids:c,stackingOffset:d,stackingOrder:f}=o,p=Zk().keys(c.map(g=>{const m=r[g].dataKey;return r[g].data===void 0&&m!==void 0?m:g})).value((g,m)=>g[m]??0).order(f).offset(d)(a);c.forEach((g,m)=>{const x=r[g].dataKey;s[g]=H({layout:"vertical",labelMarkType:"square",minBarSize:0,valueFormatter:r[g].valueFormatter??cae},r[g],{data:x?e.map(b=>{const A=b[x];return typeof A!="number"?null:A}):r[g].data,stackedData:p[m].map(([b,A])=>[b,A])})})}),{seriesOrder:t,stackingGroups:i,series:s}};function sa(n,e){return typeof n=="function"?n(e):n}const dae=n=>{const{seriesOrder:e,series:t}=n;return e.reduce((r,i)=>{const a=sa(t[i].label,"legend");return a===void 0||r.push({markType:t[i].labelMarkType,id:i,seriesId:i,color:t[i].color,label:a}),r},[])},r8=(n,e,t)=>{const r=n.layout==="vertical",i=r?e==null?void 0:e.colorScale:t==null?void 0:t.colorScale,a=r?t==null?void 0:t.colorScale:e==null?void 0:e.colorScale,s=r?e==null?void 0:e.data:t==null?void 0:t.data;return a?o=>{if(o===void 0)return n.color;const c=n.data[o],d=c===null?n.color:a(c);return d===null?n.color:d}:i&&s?o=>{if(o===void 0)return n.color;const c=s[o],d=c===null?n.color:i(c);return d===null?n.color:d}:()=>n.color},fae=n=>{const{series:e,getColor:t,identifier:r}=n;if(!r||r.dataIndex===void 0)return null;const i=sa(e.label,"tooltip"),a=e.data[r.dataIndex];if(a==null)return null;const s=e.valueFormatter(a,{dataIndex:r.dataIndex});return{identifier:r,color:t(r.dataIndex),label:i,value:a,formattedValue:s,markType:e.labelMarkType}},hae=n=>Object.values(n).map(e=>e.layout==="horizontal"?{direction:"y",axisId:e.yAxisId}:{direction:"x",axisId:e.xAxisId}),pae=(n,e,t)=>H({id:n.id??`auto-generated-id-${e}`,color:t[e%t.length]},n),gae={seriesProcessor:uae,colorProcessor:r8,legendGetter:dae,tooltipGetter:fae,axisTooltipGetter:hae,xExtremumGetter:Lie,yExtremumGetter:Bie,getSeriesWithDefaultValues:pae},mae=n=>{const{series:e,axis:t,isDefaultAxis:r,getFilters:i}=n;let a=1/0,s=-1/0;for(const o in e){if(!Object.hasOwn(e,o))continue;const c=e[o].xAxisId;if(!(c===t.id||c===void 0&&r))continue;const d=i==null?void 0:i({currentAxisId:t.id,isDefaultAxis:r,seriesXAxisId:e[o].xAxisId,seriesYAxisId:e[o].yAxisId}),f=e[o].data??[];for(let p=0;p<f.length;p+=1){const g=f[p];d&&!d(g,p)||g.x!==null&&(g.x<a&&(a=g.x),g.x>s&&(s=g.x))}}return[a,s]},yae=n=>{const{series:e,axis:t,isDefaultAxis:r,getFilters:i}=n;let a=1/0,s=-1/0;for(const o in e){if(!Object.hasOwn(e,o))continue;const c=e[o].yAxisId;if(!(c===t.id||c===void 0&&r))continue;const d=i==null?void 0:i({currentAxisId:t.id,isDefaultAxis:r,seriesXAxisId:e[o].xAxisId,seriesYAxisId:e[o].yAxisId}),f=e[o].data??[];for(let p=0;p<f.length;p+=1){const g=f[p];d&&!d(g,p)||g.y!==null&&(g.y<a&&(a=g.y),g.y>s&&(s=g.y))}}return[a,s]},vae=({series:n,seriesOrder:e},t)=>({series:Object.fromEntries(Object.entries(n).map(([i,a])=>{const s=a==null?void 0:a.datasetKeys,o=["x","y","id"].filter(d=>typeof(s==null?void 0:s[d])!="string");if(a!=null&&a.datasetKeys&&o.length>0)throw new Error([`MUI X Charts: scatter series with id='${i}' has incomplete datasetKeys.`,`Properties ${o.map(d=>`"${d}"`).join(", ")} are missing.`].join(`
`));const c=s?(t==null?void 0:t.map(d=>({x:d[s.x]??null,y:d[s.y]??null,z:s.z&&d[s.z],id:s.id&&d[s.id]})))??[]:a.data??[];return[i,H({labelMarkType:"circle",markerSize:4},a,{preview:H({markerSize:1},a==null?void 0:a.preview),data:c,valueFormatter:a.valueFormatter??(d=>d&&`(${d.x}, ${d.y})`)})]})),seriesOrder:e}),xae=(n,e,t,r)=>{const i=r==null?void 0:r.colorScale,a=t==null?void 0:t.colorScale,s=e==null?void 0:e.colorScale;return i?o=>{var f,p;if(o===void 0)return n.color;if(((f=r==null?void 0:r.data)==null?void 0:f[o])!==void 0){const g=i((p=r==null?void 0:r.data)==null?void 0:p[o]);if(g!==null)return g}const c=n.data[o],d=c===null?n.color:i(c.z);return d===null?n.color:d}:a?o=>{if(o===void 0)return n.color;const c=n.data[o],d=c===null?n.color:a(c.y);return d===null?n.color:d}:s?o=>{if(o===void 0)return n.color;const c=n.data[o],d=c===null?n.color:s(c.x);return d===null?n.color:d}:()=>n.color},wae=n=>{const{seriesOrder:e,series:t}=n;return e.reduce((r,i)=>{const a=sa(t[i].label,"legend");return a===void 0||r.push({markType:t[i].labelMarkType,id:i,seriesId:i,color:t[i].color,label:a}),r},[])},bae=n=>{const{series:e,getColor:t,identifier:r}=n;if(!r||r.dataIndex===void 0)return null;const i=sa(e.label,"tooltip"),a=e.data[r.dataIndex],s=e.valueFormatter(a,{dataIndex:r.dataIndex});return{identifier:r,color:t(r.dataIndex),label:i,value:a,formattedValue:s,markType:e.labelMarkType}},_ae=(n,e,t)=>H({id:n.id??`auto-generated-id-${e}`,color:t[e%t.length]},n),Aae={seriesProcessor:vae,colorProcessor:xae,legendGetter:wae,tooltipGetter:bae,xExtremumGetter:mae,yExtremumGetter:yae,getSeriesWithDefaultValues:_ae},Eae=n=>{const{axis:e}=n;return Wk(e.data??[])};function Sae(n,e,t,r){return t.reduce((i,a,s)=>{if(e[s]===null)return i;const[o,c]=n(a);return r&&(!r({y:o,x:null},s)||!r({y:c,x:null},s))?i:[Math.min(o,c,i[0]),Math.max(o,c,i[1])]},[1/0,-1/0])}const Cae=n=>{const{series:e,axis:t,isDefaultAxis:r,getFilters:i}=n;return Object.keys(e).filter(a=>{const s=e[a].yAxisId;return s===t.id||r&&s===void 0}).reduce((a,s)=>{const{area:o,stackedData:c,data:d}=e[s],f=o!==void 0,p=i==null?void 0:i({currentAxisId:t.id,isDefaultAxis:r,seriesXAxisId:e[s].xAxisId,seriesYAxisId:e[s].yAxisId}),g=f&&t.scaleType!=="log"&&typeof e[s].baseline!="string"?A=>A:A=>[A[1],A[1]],m=Sae(g,d,c,p),[x,b]=m;return[Math.min(x,a[0]),Math.max(b,a[1])]},[1/0,-1/0])};function Tae(n,e){const t={};return Object.keys(n).forEach(r=>{t[r]=H({},n[r],{valueFormatter:n[r].valueFormatter??e})}),t}const Iae=(n,e)=>{const{seriesOrder:t,series:r}=n,i=n8(H({},n,{defaultStrategy:{stackOffset:"none"}})),a=e??[];t.forEach(o=>{const c=r[o].data;c!==void 0&&c.forEach((d,f)=>{a.length<=f?a.push({[o]:d}):a[f][o]=d})});const s={};return i.forEach(o=>{const{ids:c,stackingOrder:d,stackingOffset:f}=o,p=Zk().keys(c.map(g=>{const m=r[g].dataKey;return r[g].data===void 0&&m!==void 0?m:g})).value((g,m)=>g[m]??0).order(d).offset(f)(a);c.forEach((g,m)=>{const x=r[g].dataKey;s[g]=H({labelMarkType:"line"},r[g],{data:x?e.map(b=>{const A=b[x];return typeof A!="number"?null:A}):r[g].data,stackedData:p[m].map(([b,A])=>[b,A])})})}),{seriesOrder:t,stackingGroups:i,series:Tae(s,o=>o==null?"":o.toLocaleString())}},Dae=(n,e,t)=>{const r=t==null?void 0:t.colorScale,i=e==null?void 0:e.colorScale;return r?a=>{if(a===void 0)return n.color;const s=n.data[a],o=s===null?n.color:r(s);return o===null?n.color:o}:i?a=>{var c;if(a===void 0)return n.color;const s=(c=e.data)==null?void 0:c[a],o=s===null?n.color:i(s);return o===null?n.color:o}:()=>n.color},Rae=n=>{const{seriesOrder:e,series:t}=n;return e.reduce((r,i)=>{const a=sa(t[i].label,"legend");return a===void 0||r.push({markType:t[i].labelMarkType,id:i,seriesId:i,color:t[i].color,label:a}),r},[])},Mae=n=>{const{series:e,getColor:t,identifier:r}=n;if(!r||r.dataIndex===void 0)return null;const i=sa(e.label,"tooltip"),a=e.data[r.dataIndex],s=e.valueFormatter(a,{dataIndex:r.dataIndex});return{identifier:r,color:t(r.dataIndex),label:i,value:a,formattedValue:s,markType:e.labelMarkType}},Oae=n=>Object.values(n).map(e=>({direction:"x",axisId:e.xAxisId})),Pae=(n,e,t)=>H({id:n.id??`auto-generated-id-${e}`,color:t[e%t.length]},n),kae={colorProcessor:Dae,seriesProcessor:Iae,legendGetter:Rae,tooltipGetter:Mae,axisTooltipGetter:Oae,xExtremumGetter:Eae,yExtremumGetter:Cae,getSeriesWithDefaultValues:Pae},Nae=(n="none")=>{if(typeof n=="function")return n;switch(n){case"none":return null;case"desc":return(e,t)=>t-e;case"asc":return(e,t)=>e-t;default:return null}},Lae=n=>{const{seriesOrder:e,series:t}=n,r={};return e.forEach(i=>{const a=Zie().startAngle(2*Math.PI*(t[i].startAngle??0)/360).endAngle(2*Math.PI*(t[i].endAngle??360)/360).padAngle(2*Math.PI*(t[i].paddingAngle??0)/360).sortValues(Nae(t[i].sortingValues??"none"))(t[i].data.map(s=>s.value));r[i]=H({labelMarkType:"circle",valueFormatter:s=>s.value.toLocaleString()},t[i],{data:t[i].data.map((s,o)=>H({},s,{id:s.id??`auto-generated-pie-id-${i}-${o}`},a[o])).map((s,o)=>{var c,d;return H({labelMarkType:"circle"},s,{formattedValue:((d=(c=t[i]).valueFormatter)==null?void 0:d.call(c,H({},s,{label:sa(s.label,"arc")}),{dataIndex:o}))??s.value.toLocaleString()})})})}),{seriesOrder:e,series:r}},Bae=n=>e=>n.data[e].color,Fae=n=>{const{seriesOrder:e,series:t}=n;return e.reduce((r,i)=>(t[i].data.forEach((a,s)=>{const o=sa(a.label,"legend");o!==void 0&&r.push({markType:a.labelMarkType??t[i].labelMarkType,id:a.id??s,seriesId:i,color:a.color,label:o,itemId:a.id??s})}),r),[])},Vae=n=>{const{series:e,getColor:t,identifier:r}=n;if(!r||r.dataIndex===void 0)return null;const i=e.data[r.dataIndex];if(i==null)return null;const a=sa(i.label,"tooltip"),s=H({},i,{label:a}),o=e.valueFormatter(s,{dataIndex:r.dataIndex});return{identifier:r,color:t(r.dataIndex),label:a,value:s,formattedValue:o,markType:i.labelMarkType??e.labelMarkType}},jae=(n,e,t)=>H({id:n.id??`auto-generated-id-${e}`},n,{data:n.data.map((r,i)=>H({color:t[i%t.length]},r))}),Uae={colorProcessor:Bae,seriesProcessor:Lae,legendGetter:Fae,tooltipGetter:Vae,getSeriesWithDefaultValues:jae},Hae={bar:gae,scatter:Aae,line:kae,pie:Uae},zae=[op,Ef,Af,pu];function $ae(n){const{children:e,plugins:t=zae,pluginParams:r={},seriesConfig:i=Hae}=n,{contextValue:a}=Ete(t,r,i);return v.jsx(QP.Provider,{value:a,children:e})}const Xl=()=>{const n=M.useContext(QP);if(n==null)throw new Error(["MUI X Charts: Could not find the Chart context.","It looks like you rendered your component outside of a ChartDataProvider.","This can also happen if you are bundling multiple versions of the library."].join(`
`));return n};function _n(){const n=Xl();if(!n)throw new Error(["MUI X Charts: Could not find the charts context.","It looks like you rendered your component outside of a ChartContainer parent component."].join(`
`));return n.store}function Pa(){const n=_n();return pt(n,Oo)}function gA(){const n=_n();return pt(n,ote)}function mA(n){return Ik.getTypes().has(n)}const Gae=(n,e,t,r,i,a,s)=>{var m;const o=r==="rotation"?i[e].rotationExtremumGetter:i[e].radiusExtremumGetter,c=((m=s[e])==null?void 0:m.series)??{},[d,f]=(o==null?void 0:o({series:c,axis:t,axisIndex:a,isDefaultAxis:a===0}))??[1/0,-1/0],[p,g]=n;return[Math.min(d,p),Math.max(f,g)]},Wae=(n,e,t,r,i)=>{const s=Object.keys(t).filter(mA).reduce((o,c)=>Gae(o,c,n,e,t,r,i),[1/0,-1/0]);return Number.isNaN(s[0])||Number.isNaN(s[1])?[1/0,-1/0]:s},Td=(n,e)=>n===void 0?e:Math.PI*n/180,Yae=(n,e,t,r)=>{const i=new Set;return Object.keys(e).filter(mA).forEach(s=>{var d,f,p;const o=((d=t[s])==null?void 0:d.series)??{},c=(p=(f=e[s]).axisTooltipGetter)==null?void 0:p.call(f,o);c!==void 0&&c.forEach(({axisId:g,direction:m})=>{m===n&&i.add(g??r)})}),i};function qae(n,e,t){if(e==="rotation"){if(t.scaleType==="point"){const r=[Td(t.startAngle,0),Td(t.endAngle,2*Math.PI)],i=r[1]-r[0];return i>Math.PI*2-.1&&(r[1]-=i/t.data.length),r}return[Td(t.startAngle,0),Td(t.endAngle,2*Math.PI)]}return[0,Math.min(n.height,n.width)/2]}const Xae=.2,Kae=.1;function i8({drawingArea:n,formattedSeries:e,axis:t,seriesConfig:r,axisDirection:i}){if(t===void 0)return{axis:{},axisIds:[]};const a=Yae(i,r,e,t[0].id),s={};return t.forEach((o,c)=>{const d=o,f=qae(n,i,d),[p,g]=Wae(d,i,r,c,e),m=!d.ignoreTooltip&&a.has(d.id),x=d.data??[];if(m1(d)){const R=d.categoryGapRatio??Xae,F=d.barGapRatio??Kae;if(s[d.id]=H({offset:0,categoryGapRatio:R,barGapRatio:F,triggerTooltip:m},d,{data:x,scale:by(d.data,f).paddingInner(R).paddingOuter(R/2),tickNumber:d.data.length,colorScale:d.colorMap&&(d.colorMap.type==="ordinal"?rf(H({values:d.data},d.colorMap)):qc(d.colorMap))}),v1(d.data)){const N=x1(d,f);s[d.id].valueFormatter=d.valueFormatter??N}}if(uA(d)&&(s[d.id]=H({offset:0,triggerTooltip:m},d,{data:x,scale:ak(d.data,f),tickNumber:d.data.length,colorScale:d.colorMap&&(d.colorMap.type==="ordinal"?rf(H({values:d.data},d.colorMap)):qc(d.colorMap))}),v1(d.data))){const R=x1(d,f);s[d.id].valueFormatter=d.valueFormatter??R}if(d.scaleType==="band"||d.scaleType==="point")return;const b=d.scaleType??"linear",A=d.domainLimit??"nice",E=[d.min??p,d.max??g];if(typeof A=="function"){const{min:R,max:F}=A(p,g);E[0]=R,E[1]=F}const C=Ck(H({},d,{range:f,domain:E})),T=Tk(C,f),D=y1(b,E,f),k=A==="nice"?D.nice(C):D,[B,O]=k.domain(),I=[d.min??B,d.max??O];s[d.id]=H({offset:0,triggerTooltip:m},d,{data:x,scaleType:b,scale:k.domain(I),tickNumber:T,colorScale:d.colorMap&&qc(d.colorMap)})}),{axis:s,axisIds:t.map(({id:o})=>o)}}const a8=n=>n.polarAxis,s8=Ye([a8],n=>n==null?void 0:n.rotation),Qae=Ye([a8],n=>n==null?void 0:n.radius),gu=Ye([s8,Oo,es,Po],(n,e,t,r)=>i8({drawingArea:e,formattedSeries:t,axis:n,seriesConfig:r,axisDirection:"rotation"})),Zae=Ye([Qae,Oo,es,Po],(n,e,t,r)=>i8({drawingArea:e,formattedSeries:t,axis:n,seriesConfig:r,axisDirection:"radius"})),Jae=Ye([Oo],n=>({cx:n.left+n.width/2,cy:n.top+n.height/2})),ese=n=>(e,t)=>Math.atan2(e-n.cx,n.cy-t);function My(n){return(n%360+360)%360}const S2=2*Math.PI;function tse(n){return(n%S2+S2)%S2}function V3(n,e){const{scale:t,data:r,reverse:i}=n;if(!ts(t))throw new Error("MUI X Charts: getAxisValue is not implemented for polare continuous axes.");if(!r)return-1;const a=tse(e-Math.min(...t.range())),s=t.bandwidth()===0?Math.floor((a+t.step()/2)/t.step())%r.length:Math.floor(a/t.step());return s<0||s>=r.length?-1:i?r.length-1-s:s}function No(){const n=_n(),{axis:e,axisIds:t}=pt(n,oa);return{xAxis:e,xAxisIds:t}}function Kl(){const n=_n(),{axis:e,axisIds:t}=pt(n,la);return{yAxis:e,yAxisIds:t}}function nse(n){const e=_n(),{axis:t,axisIds:r}=pt(e,oa),i=r[0];return t[i]}function rse(n){const e=_n(),{axis:t,axisIds:r}=pt(e,la),i=r[0];return t[i]}function o8(){const n=_n(),{axis:e,axisIds:t}=pt(n,gu);return{rotationAxis:e,rotationAxisIds:t}}function ise(){const n=_n(),{axis:e,axisIds:t}=pt(n,Zae);return{radiusAxis:e,radiusAxisIds:t}}function ase(n){const e=_n(),{axis:t,axisIds:r}=pt(e,gu),i=r[0];return t[i]}function b1(n){return ts(n)?e=>(n(e)??0)+n.bandwidth()/2:e=>n(e)}function yA(){const n=_n(),{axis:e,axisIds:t}=pt(n,Nie)??{axis:{},axisIds:[]};return{zAxis:e,zAxisIds:t}}function vA(){const n=Xl();if(!n)throw new Error(["MUI X Charts: Could not find the svg ref context.","It looks like you rendered your component outside of a ChartContainer parent component."].join(`
`));return n.svgRef}function Oy(){const n=_n();return pt(n,es)}function sse(n,e){if(n===e)return!0;if(!Array.isArray(n)||!Array.isArray(e))return!1;let t=n.length;if(t!==e.length)return!1;for(;t--;)if(n[t]!==e[t])return!1;return!0}function l8(n){const e=Ye([es,(t,r)=>r],(t,r)=>{var a,s,o,c,d,f;if(!r||Array.isArray(r)&&r.length===0)return((s=(a=t[n])==null?void 0:a.seriesOrder)==null?void 0:s.map(p=>{var g;return(g=t[n])==null?void 0:g.series[p]}))??[];if(!Array.isArray(r))return(c=(o=t[n])==null?void 0:o.series)==null?void 0:c[r];const i=[];for(const p of r){const g=(f=(d=t[n])==null?void 0:d.series)==null?void 0:f[p];g&&i.push(g)}return i});return t=>{const r=_n();return pt(r,e,[t],sse)}}function c8(n){const e=Ye([es],t=>t[n]);return()=>{const t=_n();return pt(t,e)}}l8("pie");const ose=c8("pie");function lse(){return ose()}l8("bar");const cse=c8("bar");function use(){return cse()}function dse(){return!1}function u8(n,e){return!n||!e?dse:function(r){return r?n.highlight==="series"?r.seriesId===e.seriesId:n.highlight==="item"?r.dataIndex===e.dataIndex&&r.seriesId===e.seriesId:!1:!1}}function fse(){return!1}function d8(n,e){return!n||!e?fse:function(r){return r?n.fade==="series"?r.seriesId===e.seriesId&&r.dataIndex!==e.dataIndex:n.fade==="global"?r.seriesId!==e.seriesId||r.dataIndex!==e.dataIndex:!1:!1}}const hse=n=>n.highlight,pse=n=>n.series,gse=Ye([pse],n=>{const e=new Map;return Object.keys(n.processedSeries).forEach(t=>{var i;const r=n.processedSeries[t];(i=r==null?void 0:r.seriesOrder)==null||i.forEach(a=>{const s=r==null?void 0:r.series[a];e.set(a,s==null?void 0:s.highlightScope)})}),e}),lp=Ye([hse],function(e){return e.item}),Py=Ye([gse,lp],function(e,t){if(!t)return null;const r=e.get(t.seriesId);return r===void 0?null:r}),mse=Ye([Py,lp],u8),yse=Ye([Py,lp],d8),vse=Ye([Py,lp,(n,e)=>e],function(e,t,r){return u8(e,t)(r)}),xse=Ye([Py,lp,(n,e)=>e],function(e,t,r){return d8(e,t)(r)});function f8(n){const e=_n(),t=pt(e,vse,[n]),r=pt(e,xse,[n]);return{isHighlighted:t,isFaded:!t&&r}}function wse(){const n=_n(),e=pt(n,mse),t=pt(n,yse);return{isHighlighted:e,isFaded:t}}function bse(n,e){return Object.keys(n).flatMap(t=>{const r=e[t].legendGetter;return r===void 0?[]:r(n[t])})}function _se(){const n=Oy(),e=_n(),t=pt(e,Po);return{items:bse(n,t)}}function Ase(){const n=gA();return M.useCallback(e=>`${n}-gradient-${e}`,[n])}function Ese(){const n=gA();return M.useCallback(e=>`${n}-gradient-${e}-object-bound`,[n])}var C2,j3;function Sse(){if(j3)return C2;j3=1;var n=4,e=.001,t=1e-7,r=10,i=11,a=1/(i-1),s=typeof Float32Array=="function";function o(b,A){return 1-3*A+3*b}function c(b,A){return 3*A-6*b}function d(b){return 3*b}function f(b,A,E){return((o(A,E)*b+c(A,E))*b+d(A))*b}function p(b,A,E){return 3*o(A,E)*b*b+2*c(A,E)*b+d(A)}function g(b,A,E,C,T){var D,k,B=0;do k=A+(E-A)/2,D=f(k,C,T)-b,D>0?E=k:A=k;while(Math.abs(D)>t&&++B<r);return k}function m(b,A,E,C){for(var T=0;T<n;++T){var D=p(A,E,C);if(D===0)return A;var k=f(A,E,C)-b;A-=k/D}return A}function x(b){return b}return C2=function(A,E,C,T){if(!(0<=A&&A<=1&&0<=C&&C<=1))throw new Error("bezier x values must be in [0, 1] range");if(A===E&&C===T)return x;for(var D=s?new Float32Array(i):new Array(i),k=0;k<i;++k)D[k]=f(k*a,A,C);function B(O){for(var I=0,R=1,F=i-1;R!==F&&D[R]<=O;++R)I+=a;--R;var N=(O-D[R])/(D[R+1]-D[R]),P=I+N*a,V=p(P,A,C);return V>=e?m(O,P,A,C):V===0?P:g(O,I,I+a,A,C)}return function(I){return I===0?0:I===1?1:f(B(I),E,T)}},C2}var Cse=Sse();const Tse=d5(Cse),xA=300,h8="cubic-bezier(0.66, 0, 0.34, 1)",Ise=Tse(.66,0,.34,1);var lf=0,e0=0,Bh=0,p8=1e3,_1,t0,A1=0,nu=0,ky=0,k0=typeof performance=="object"&&performance.now?performance:Date,g8=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(n){setTimeout(n,17)};function wA(){return nu||(g8(Dse),nu=k0.now()+ky)}function Dse(){nu=0}function E1(){this._call=this._time=this._next=null}E1.prototype=m8.prototype={constructor:E1,restart:function(n,e,t){if(typeof n!="function")throw new TypeError("callback is not a function");t=(t==null?wA():+t)+(e==null?0:+e),!this._next&&t0!==this&&(t0?t0._next=this:_1=this,t0=this),this._call=n,this._time=t,$w()},stop:function(){this._call&&(this._call=null,this._time=1/0,$w())}};function m8(n,e,t){var r=new E1;return r.restart(n,e,t),r}function zw(){wA(),++lf;for(var n=_1,e;n;)(e=nu-n._time)>=0&&n._call.call(void 0,e),n=n._next;--lf}function U3(){nu=(A1=k0.now())+ky,lf=e0=0;try{zw()}finally{lf=0,Mse(),nu=0}}function Rse(){var n=k0.now(),e=n-A1;e>p8&&(ky-=e,A1=n)}function Mse(){for(var n,e=_1,t,r=1/0;e;)e._call?(r>e._time&&(r=e._time),n=e,e=e._next):(t=e._next,e._next=null,e=n?n._next=t:_1=t);t0=n,$w(r)}function $w(n){if(!lf){e0&&(e0=clearTimeout(e0));var e=n-nu;e>24?(n<1/0&&(e0=setTimeout(U3,n-k0.now()-ky)),Bh&&(Bh=clearInterval(Bh))):(Bh||(A1=k0.now(),Bh=setInterval(Rse,p8)),lf=1,g8(U3))}}function Ose(n,e,t){var r=new E1;return e=e==null?0:+e,r.restart(i=>{r.stop(),n(i+e)},e,t),r}class Pse{constructor(e,t,r){this.duration=void 0,this.elapsed=0,this.easingFn=void 0,this.timer=null,this.onTickCallback=void 0,this.duration=e,this.easingFn=t,this.onTickCallback=r,this.resume()}get running(){return this.timer!==null}timerCallback(e){this.elapsed=Math.min(e,this.duration);const t=this.duration===0?1:this.elapsed/this.duration,r=this.easingFn(t);this.onTickCallback(r),this.elapsed>=this.duration&&this.stop()}resume(){if(this.running||this.elapsed>=this.duration)return this;const e=wA()-this.elapsed;return this.timer=m8(t=>this.timerCallback(t),0,e),zw(),this}stop(){return this.running?(this.timer&&(this.timer.stop(),this.timer=null),this):this}finish(){return this.stop(),Ose(()=>this.timerCallback(this.duration)),zw(),this}}function kse(n,e){if(Object.is(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;const t=Object.keys(n),r=Object.keys(e);if(t.length!==r.length)return!1;for(let i=0;i<t.length;i+=1){const a=t[i];if(!Object.prototype.hasOwnProperty.call(e,a)||!Object.is(n[a],e[a]))return!1}return!0}function Nse(n,{createInterpolator:e,applyProps:t,skip:r,initialProps:i=n}){const a=M.useRef(i),s=M.useRef(null),o=M.useRef(null),c=M.useRef(n);Xn(()=>{c.current=n},[n]),Xn(()=>{var p;r&&((p=s.current)==null||p.finish(),s.current=null,o.current=null,a.current=n)},[n,r]);const d=M.useCallback(p=>{const g=a.current,m=e(g,n);s.current=new Pse(xA,Ise,x=>{const b=m(x);a.current=b,t(p,b)})},[t,e,n]);return M.useCallback(p=>{var m,x,b,A;if(p===null){(m=s.current)==null||m.stop();return}const g=o.current;if(g===p){if(kse(c.current,n)){(x=s.current)==null||x.resume();return}(b=s.current)==null||b.stop()}g&&((A=s.current)==null||A.stop()),o.current=p,(s.current||!r)&&d(p)},[d,n,r])}function cp(n,{createInterpolator:e,transformProps:t,applyProps:r,skip:i,initialProps:a=n,ref:s}){const o=t??(f=>f),c=Nse(n,{initialProps:a,createInterpolator:e,applyProps:(f,p)=>r(f,o(p)),skip:i});return H({},t(i?n:a),{ref:oi(c,s)})}function Lse(n,e){const t=Jt(n.x,e.x),r=Jt(n.y,e.y),i=Jt(n.width,e.width),a=Jt(n.height,e.height);return s=>({x:t(s),y:r(s),width:i(s),height:a(s)})}function Bse(n){const e={x:n.layout==="vertical"?n.x:n.xOrigin,y:n.layout==="vertical"?n.yOrigin:n.y,width:n.layout==="vertical"?n.width:0,height:n.layout==="vertical"?0:n.height};return cp({x:n.x,y:n.y,width:n.width,height:n.height},{createInterpolator:Lse,applyProps(t,r){t.setAttribute("x",r.x.toString()),t.setAttribute("y",r.y.toString()),t.setAttribute("width",r.width.toString()),t.setAttribute("height",r.height.toString())},transformProps:t=>t,initialProps:e,skip:n.skipAnimation,ref:n.ref})}function Fse(n,e){const t=Jt(n.x,e.x),r=Jt(n.y,e.y),i=Jt(n.width,e.width),a=Jt(n.height,e.height);return s=>({x:t(s),y:r(s),width:i(s),height:a(s)})}function Vse(n){const e={x:n.layout==="vertical"?n.x+n.width/2:n.xOrigin,y:n.layout==="vertical"?n.yOrigin:n.y+n.height/2,width:n.width,height:n.height},t={x:n.x+n.width/2,y:n.y+n.height/2,width:n.width,height:n.height};return cp(t,{createInterpolator:Fse,transformProps:r=>r,applyProps(r,i){r.setAttribute("x",i.x.toString()),r.setAttribute("y",i.y.toString()),r.setAttribute("width",i.width.toString()),r.setAttribute("height",i.height.toString())},initialProps:e,skip:n.skipAnimation,ref:n.ref})}function jse(n,e){const t=Jt(n.startAngle,e.startAngle),r=Jt(n.endAngle,e.endAngle),i=Jt(n.innerRadius,e.innerRadius),a=Jt(n.outerRadius,e.outerRadius),s=Jt(n.paddingAngle,e.paddingAngle),o=Jt(n.cornerRadius,e.cornerRadius);return c=>({startAngle:t(c),endAngle:r(c),innerRadius:i(c),outerRadius:a(c),paddingAngle:s(c),cornerRadius:o(c)})}function Use(n){const e={startAngle:(n.startAngle+n.endAngle)/2,endAngle:(n.startAngle+n.endAngle)/2,innerRadius:n.innerRadius,outerRadius:n.outerRadius,paddingAngle:n.paddingAngle,cornerRadius:n.cornerRadius};return cp({startAngle:n.startAngle,endAngle:n.endAngle,innerRadius:n.innerRadius,outerRadius:n.outerRadius,paddingAngle:n.paddingAngle,cornerRadius:n.cornerRadius},{createInterpolator:jse,transformProps:t=>({d:Kk().cornerRadius(t.cornerRadius)({padAngle:t.paddingAngle,innerRadius:t.innerRadius,outerRadius:t.outerRadius,startAngle:t.startAngle,endAngle:t.endAngle}),visibility:t.startAngle===t.endAngle?"hidden":"visible"}),applyProps(t,r){t.setAttribute("d",r.d),t.setAttribute("visibility",r.visibility)},initialProps:e,skip:n.skipAnimation,ref:n.ref})}function Hse(n,e){const t=Jt(n.startAngle,e.startAngle),r=Jt(n.endAngle,e.endAngle),i=Jt(n.innerRadius,e.innerRadius),a=Jt(n.outerRadius,e.outerRadius),s=Jt(n.paddingAngle,e.paddingAngle),o=Jt(n.cornerRadius,e.cornerRadius);return c=>({startAngle:t(c),endAngle:r(c),innerRadius:i(c),outerRadius:a(c),paddingAngle:s(c),cornerRadius:o(c)})}function zse(n){const e={startAngle:(n.startAngle+n.endAngle)/2,endAngle:(n.startAngle+n.endAngle)/2,innerRadius:n.arcLabelRadius??n.innerRadius,outerRadius:n.arcLabelRadius??n.outerRadius,paddingAngle:n.paddingAngle,cornerRadius:n.cornerRadius};return cp({startAngle:n.startAngle,endAngle:n.endAngle,innerRadius:(n==null?void 0:n.arcLabelRadius)??n.innerRadius,outerRadius:(n==null?void 0:n.arcLabelRadius)??n.outerRadius,paddingAngle:n.paddingAngle,cornerRadius:n.cornerRadius},{createInterpolator:Hse,transformProps:t=>{const[r,i]=Kk().cornerRadius(t.cornerRadius).centroid({padAngle:t.paddingAngle,startAngle:t.startAngle,endAngle:t.endAngle,innerRadius:t.innerRadius,outerRadius:t.outerRadius});return{x:r,y:i}},applyProps(t,{x:r,y:i}){t.setAttribute("x",r.toString()),t.setAttribute("y",i.toString())},initialProps:e,skip:n.skipAnimation,ref:n.ref})}function $se(){return Xl().chartRootRef}const Gse={"image/png":"PNG","image/jpeg":"JPEG","image/webp":"WebP"},Wse=n=>({components:{MuiChartsLocalizationProvider:{defaultProps:{localeText:H({},n)}}}}),y8={loading:"Loading data",noData:"No data to display",zoomIn:"Zoom in",zoomOut:"Zoom out",toolbarExport:"Export",toolbarExportPrint:"Print",toolbarExportImage:n=>`Export as ${Gse[n]??n}`},Yse=y8;Wse(y8);const qse=["localeText"],Gw=M.createContext(null);function Xse(n){const{localeText:e}=n,t=Be(n,qse),{localeText:r}=M.useContext(Gw)??{localeText:void 0},i=bt({props:t,name:"MuiChartsLocalizationProvider"}),{children:a,localeText:s}=i,o=M.useMemo(()=>H({},Yse,s,r,e),[s,r,e]),c=M.useMemo(()=>({localeText:o}),[o]);return v.jsx(Gw.Provider,{value:c,children:a})}const v8=()=>{const n=M.useContext(Gw);if(n===null)throw new Error(["MUI X Charts: Can not find the charts localization context.","It looks like you forgot to wrap your component in ChartsLocalizationProvider.","This can also happen if you are bundling multiple versions of the `@mui/x-charts` package"].join(`
`));return n};function Kse(n){const{id:e,offset:t}=n,{left:r,top:i,width:a,height:s}=Pa(),o=H({top:0,right:0,bottom:0,left:0},t);return v.jsx("clipPath",{id:e,children:v.jsx("rect",{x:r-o.left,y:i-o.top,width:a+o.left+o.right,height:s+o.top+o.bottom})})}function Qse(){return typeof window>"u"}const rm=new Map,Zse=2e3,Jse={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},eoe=["minWidth","maxWidth","width","minHeight","maxHeight","height","top","left","fontSize","padding","margin","paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom"],H3="mui_measurement_span";function x8(n,e){return eoe.indexOf(n)>=0&&e===+e?`${e}px`:e}function w8(n){return n.split("").reduce((r,i)=>i===i.toUpperCase()?[...r,"-",i.toLowerCase()]:[...r,i],[]).join("")}const toe=n=>Object.keys(n).sort().reduce((e,t)=>`${e}${w8(t)}:${x8(t,n[t])};`,"");let T2;const up=(n,e={})=>{if(n==null||Qse())return{width:0,height:0};const t=`${n}`,r=toe(e),i=`${t}-${r}`,a=rm.get(i);if(a)return a;try{let s=document.getElementById(H3);s===null&&(s=document.createElement("span"),s.setAttribute("id",H3),s.setAttribute("aria-hidden","true"),document.body.appendChild(s));const o=H({},Jse,e);Object.keys(o).map(f=>(s.style[w8(f)]=x8(f,o[f]),f)),s.textContent=t;const c=s.getBoundingClientRect(),d={width:c.width,height:c.height};return rm.set(i,d),rm.size+1>Zse&&rm.clear(),T2&&clearTimeout(T2),T2=setTimeout(()=>{s.textContent=""},0),d}catch{return{width:0,height:0}}};function b8({style:n,needsComputation:e,text:t}){return t.split(`
`).map(r=>H({text:r},e?up(r,n):{width:0,height:0}))}function bA(){const[n,e]=M.useState(typeof window<"u"||!1);return M.useEffect(()=>{e(!0)},[]),n}const noe=["x","y","style","text","ownerState"],roe=["angle","textAnchor","dominantBaseline"];function S1(n){const{x:e,y:t,style:r,text:i}=n,a=Be(n,noe),s=r??{},{angle:o,textAnchor:c,dominantBaseline:d}=s,f=Be(s,roe),p=bA(),g=M.useMemo(()=>b8({style:f,needsComputation:p&&i.includes(`
`),text:i}),[f,i,p]);let m;switch(d){case"hanging":case"text-before-edge":m=0;break;case"central":m=(g.length-1)/2*-g[0].height;break;default:m=(g.length-1)*-g[0].height;break}return v.jsx("text",H({},a,{transform:o?`rotate(${o}, ${e}, ${t})`:void 0,x:e,y:t,textAnchor:c,dominantBaseline:d,style:f,children:g.map((x,b)=>v.jsx("tspan",{x:e,dy:`${b===0?m:g[0].height}px`,dominantBaseline:d,children:x.text},b))}))}function _A(n){return typeof n=="number"&&!Number.isFinite(n)}const I2={start:0,extremities:0,end:1,middle:.5};function ioe(n){const{scale:e,tickNumber:t,valueFormatter:r,tickInterval:i,tickPlacement:a="extremities",tickLabelPlacement:s,isInside:o}=n;if(ts(e)){const g=e.domain(),m=s??"middle";return e.bandwidth()>0?[...(typeof i=="function"&&g.filter(i)||typeof i=="object"&&i||g).map(A=>{const E=`${A}`;return{value:A,formattedValue:(r==null?void 0:r(A,{location:"tick",scale:e,tickNumber:t,defaultTickLabel:E}))??E,offset:e(A)-(e.step()-e.bandwidth())/2+I2[a]*e.step(),labelOffset:m==="tick"?0:e.step()*(I2[m]-I2[a])}}),...a==="extremities"?[{formattedValue:void 0,offset:e.range()[1],labelOffset:0}]:[]]:(typeof i=="function"&&g.filter(i)||typeof i=="object"&&i||g).map(b=>{const A=`${b}`;return{value:b,formattedValue:(r==null?void 0:r(b,{location:"tick",scale:e,tickNumber:t,defaultTickLabel:A}))??A,offset:e(b),labelOffset:0}})}if(e.domain().some(_A))return[];const d=s,f=typeof i=="object"?i:e.ticks(t),p=[];for(let g=0;g<f.length;g+=1){const m=f[g],x=e(m);if(o(x)){const b=e.tickFormat(t)(m);p.push({value:m,formattedValue:(r==null?void 0:r(m,{location:"tick",scale:e,tickNumber:t,defaultTickLabel:b}))??b,offset:x,labelOffset:d==="middle"?e(f[g-1]??0)-(x+e(f[g-1]??0))/2:0})}}return p}function Ny(n){const{scale:e,tickNumber:t,valueFormatter:r,tickInterval:i,tickPlacement:a="extremities",tickLabelPlacement:s,direction:o}=n,{instance:c}=Xl(),d=o==="x"?c.isXInside:c.isYInside;return M.useMemo(()=>ioe({scale:e,tickNumber:t,tickPlacement:a,tickInterval:i,tickLabelPlacement:s,valueFormatter:r,isInside:d}),[e,t,a,i,s,r,d])}function aoe(n=!1){const[e,t]=M.useState(!1);return Xn(()=>{n||t(!0)},[n]),M.useEffect(()=>{n&&t(!0)},[n]),e}const _8=typeof window<"u"&&"Intl"in window&&"Segmenter"in Intl?new Intl.Segmenter(void 0,{granularity:"grapheme"}):null;function soe(n){return n.length}function ooe(n){const e=_8.segment(n);let t=0;for(const r of e)t+=1;return t}const loe=_8?ooe:soe;function coe(n){return n*(Math.PI/180)}const A8=typeof window<"u"&&"Intl"in window&&"Segmenter"in Intl?new Intl.Segmenter(void 0,{granularity:"grapheme"}):null;function uoe(n,e){return n.slice(0,e)}function doe(n,e){const t=A8.segment(n);let r="",i=0;for(const a of t)if(r+=a.segment,i+=1,i>=e)break;return r}const foe=A8?doe:uoe,z3="";function E8(n,e){const{width:t,height:r,measureText:i}=e,a=coe(e.angle),s=i(n),o=Math.abs(s.width*Math.cos(a))+Math.abs(s.height*Math.sin(a)),c=Math.abs(s.width*Math.sin(a))+Math.abs(s.height*Math.cos(a));return o<=t&&c<=r}function S8(n,e){if(e(n))return n;let t=n,r=1,i=1/2;const a=loe(n);let s=a,o=a,c=null;do{if(o=s,s=Math.floor(a*i),s===0)break;t=foe(n,s).trim();const d=e(t+z3);r+=1,d?(c=t,i+=1/2**r):i-=1/2**r}while(Math.abs(s-o)!==1);return c?c+z3:""}function hoe(n,e,t,r,i){const a=new Map,s=My((i==null?void 0:i.angle)??0);let o=1,c=1;(i==null?void 0:i.textAnchor)==="start"?(o=1/0,c=1):(i==null?void 0:i.textAnchor)==="end"?(o=1,c=1/0):(o=2,c=2),s>90&&s<270&&([o,c]=[c,o]),r&&([o,c]=[c,o]);for(const d of n)if(d.formattedValue){const f=Math.min((d.offset+d.labelOffset)*o,(e.left+e.width+e.right-d.offset-d.labelOffset)*c),p=g=>E8(g,{width:f,height:t,angle:s,measureText:m=>up(m,i)});a.set(d,S8(d.formattedValue.toString(),p))}return a}const $3=5;function poe(n,e,t=0){const r=Math.min(Math.abs(t)%180,Math.abs(Math.abs(t)%180-180)%180);if(r<$3)return n;if(r>90-$3)return e;const i=Td(r),a=Math.atan2(e,n);return i<a?n/Math.cos(i):e/Math.sin(i)}function goe(n,{tickLabelStyle:e,tickLabelInterval:t,tickLabelMinGap:r,reverse:i,isMounted:a,isXInside:s}){const o=f=>{if(!a||f.formattedValue===void 0)return{width:0,height:0};const p=b8({style:e,needsComputation:!0,text:f.formattedValue});return{width:Math.max(...p.map(g=>g.width)),height:Math.max(p.length*p[0].height)}};if(typeof t=="function")return new Set(n.filter((f,p)=>t(f.value,p)));let c=0;const d=i?-1:1;return new Set(n.filter((f,p)=>{const{offset:g,labelOffset:m}=f,x=g+m;if(p>0&&d*x<d*(c+r)||!s(x))return!1;const{width:b,height:A}=o(f),E=poe(b,A,e==null?void 0:e.angle),C=x-d*E/2;return p>0&&d*C<d*(c+r)?!1:(c=x+d*E/2,!0)}))}function C8(n){return Mt("MuiChartsAxis",n)}const im=Ot("MuiChartsAxis",["root","line","tickContainer","tick","tickLabel","label","directionX","directionY","top","bottom","left","right","id"]),T8=ke("g",{name:"MuiChartsAxis",slot:"Root"})(({theme:n})=>({[`& .${im.tickLabel}`]:H({},n.typography.caption,{fill:(n.vars||n).palette.text.primary}),[`& .${im.label}`]:{fill:(n.vars||n).palette.text.primary},[`& .${im.line}`]:{stroke:(n.vars||n).palette.text.primary,shapeRendering:"crispEdges",strokeWidth:1},[`& .${im.tick}`]:{stroke:(n.vars||n).palette.text.primary,shapeRendering:"crispEdges"}})),moe=n=>{const{classes:e,position:t,id:r}=n,i={root:["root","directionX",t,`id-${r}`],line:["line"],tickContainer:["tickContainer"],tick:["tick"],tickLabel:["tickLabel"],label:["label"]};return xt(i,C8,e)},Ww=3,yoe=4,I8=ke(T8,{name:"MuiChartsXAxis",slot:"Root"})({}),voe={disableLine:!1,disableTicks:!1,tickSize:6,tickLabelMinGap:4};function D8(n){const e=My(n);return e<=30||e>=330||e<=210&&e>=150?"middle":e<=180?"end":"start"}function R8(n){const e=My(n);return e<=30||e>=330?"hanging":e<=210&&e>=150?"auto":"central"}function M8(n){switch(n){case"start":return"end";case"end":return"start";default:return n}}const xoe=["scale","tickNumber","reverse"],O8=n=>{const{xAxis:e,xAxisIds:t}=No(),r=e[n.axisId??t[0]],{scale:i,tickNumber:a,reverse:s}=r,o=Be(r,xoe),c=bt({props:H({},o,n),name:"MuiChartsXAxis"}),d=H({},voe,c),{position:f,tickLabelStyle:p,labelStyle:g,slots:m,slotProps:x}=d,b=ru(),A=Ma(),E=moe(d),C=f==="bottom"?1:-1,T=(m==null?void 0:m.axisLine)??"line",D=(m==null?void 0:m.axisTick)??"line",k=(m==null?void 0:m.axisTickLabel)??S1,B=(m==null?void 0:m.axisLabel)??S1,O=D8((f==="bottom"?0:180)-((p==null?void 0:p.angle)??0)),I=R8((f==="bottom"?0:180)-((p==null?void 0:p.angle)??0)),R=Ct({elementType:k,externalSlotProps:x==null?void 0:x.axisTickLabel,additionalProps:{style:H({},b.typography.caption,{fontSize:12,lineHeight:1.25,textAnchor:A?M8(O):O,dominantBaseline:I},p)},className:E.tickLabel,ownerState:{}}),F=Ct({elementType:B,externalSlotProps:x==null?void 0:x.axisLabel,additionalProps:{style:H({},b.typography.body1,{lineHeight:1,fontSize:14,textAnchor:"middle",dominantBaseline:f==="bottom"?"text-after-edge":"text-before-edge"},g)},ownerState:{}}),N=i.domain(),P=ts(i),V=P&&N.length===0||!P&&N.some(_A)||f==="none";return{xScale:i,defaultizedProps:d,tickNumber:a,positionSign:C,skipAxisRendering:V,classes:E,Line:T,Tick:D,TickLabel:k,Label:B,axisTickLabelProps:R,axisLabelProps:F,reverse:s,isRtl:A}};function woe(n){const{xScale:e,defaultizedProps:t,tickNumber:r,positionSign:i,skipAxisRendering:a,classes:s,Line:o,Tick:c,TickLabel:d,Label:f,axisTickLabelProps:p,axisLabelProps:g,reverse:m,isRtl:x}=O8(n),b=aoe(),{position:A,disableLine:E,disableTicks:C,label:T,tickSize:D,valueFormatter:k,slotProps:B,tickInterval:O,tickLabelInterval:I,tickPlacement:R,tickLabelPlacement:F,tickLabelMinGap:N,sx:P,offset:V,height:q}=t,X=Pa(),{left:G,top:W,width:K,height:Z}=X,{instance:fe}=Xl(),ge=bA(),ve=C?4:D,be=Ny({scale:e,tickNumber:r,valueFormatter:k,tickInterval:O,tickPlacement:R,tickLabelPlacement:F,direction:"x"}),Pe=goe(be,{tickLabelStyle:p.style,tickLabelInterval:I,tickLabelMinGap:N,reverse:m,isMounted:b,isXInside:fe.isXInside});if(a)return null;const ue=T?up(T,g.style).height:0,Se={x:G+K/2,y:i*q},Ae=Math.max(0,q-(T?ue+yoe:0)-ve-Ww),Fe=ge?hoe(Pe,X,Ae,x,p.style):new Map(Array.from(Pe).map(ae=>[ae,ae.formattedValue]));return v.jsxs(I8,{transform:`translate(0, ${A==="bottom"?W+Z+V:W-V})`,className:s.root,sx:P,children:[!E&&v.jsx(o,H({x1:G,x2:G+K,className:s.line},B==null?void 0:B.axisLine)),be.map((ae,ye)=>{const{offset:pe,labelOffset:ie}=ae,Ve=ie??0,we=i*(ve+Ww),ze=fe.isXInside(pe),Oe=Fe.get(ae),Re=Pe.has(ae);return v.jsxs("g",{transform:`translate(${pe}, 0)`,className:s.tickContainer,children:[!C&&ze&&v.jsx(c,H({y2:i*ve,className:s.tick},B==null?void 0:B.axisTick)),Oe!==void 0&&Re&&v.jsx(d,H({x:Ve,y:we},p,{text:Oe}))]},ye)}),T&&v.jsx("g",{className:s.label,children:v.jsx(f,H({},Se,g,{text:T}))})]})}const Fh={start:0,extremities:0,end:1,middle:.5,tick:0};function boe(n){const{scale:e,tickInterval:t,tickLabelPlacement:r="middle",tickPlacement:i="extremities",groups:a}=n;return M.useMemo(()=>{const s=e.domain(),o=typeof t=="function"&&s.filter(t)||typeof t=="object"&&t||s;if(e.bandwidth()>0){const c=G3(o,a,i,r,e);return c[0]&&(c[0].ignoreTick=!0),[{formattedValue:void 0,offset:e.range()[0],labelOffset:0,groupIndex:a.length-1},...c,{formattedValue:void 0,offset:e.range()[1],labelOffset:0,groupIndex:a.length-1}]}return G3(o,a,i,r,e)},[e,t,a,i,r])}function G3(n,e,t,r,i){const a=[],s=new Map;let o=0;for(let c=0;c<e.length;c+=1)for(let d=0;d<n.length;d+=1){const f=n[d],p=e[c].getValue(f,d),g=a[a.length-1];if((g==null?void 0:g.value)!==p||(g==null?void 0:g.groupIndex)!==c){o=1;const x=ts(i)?i(f)-(i.step()-i.bandwidth())/2+Fh[t]*i.step():i(f),b=i.step()*o*(Fh[r]-Fh[t]);a.push({value:p,formattedValue:`${p}`,offset:x,groupIndex:c,dataIndex:d,ignoreTick:!1,labelOffset:b}),s.has(d)||s.set(d,new Set);const A=s.get(d);for(const E of A.values())a[E].ignoreTick=!0;A.add(a.length-1)}else{o+=1;const x=i.step()*o*(Fh[r]-Fh[t]);g.labelOffset=x}}return a}const W3={tickSize:6},_oe=(n,e,t)=>{const r=n[e]??{},i=t??W3.tickSize,a=i*e*2+i;return H({},W3,r,{tickSize:r.tickSize??a})};function Aoe(n){const{xScale:e,defaultizedProps:t,positionSign:r,skipAxisRendering:i,classes:a,Line:s,Tick:o,TickLabel:c,Label:d,axisTickLabelProps:f,axisLabelProps:p}=O8(n);if(!ts(e))throw new Error("MUI X Charts: ChartsGroupedXAxis only supports the `band` and `point` scale types.");const{position:g,disableLine:m,disableTicks:x,label:b,tickSize:A,valueFormatter:E,slotProps:C,tickInterval:T,tickPlacement:D,tickLabelPlacement:k,sx:B,offset:O,height:I}=t,R=t.groups,F=Pa(),{left:N,top:P,width:V,height:q}=F,{instance:X}=Xl(),G={x:N+V/2,y:r*I},W=boe({scale:e,tickInterval:T,tickPlacement:D,tickLabelPlacement:k,groups:R});return i?null:v.jsxs(I8,{transform:`translate(0, ${g==="bottom"?P+q+O:P-O})`,className:a.root,sx:B,children:[!m&&v.jsx(s,H({x1:N,x2:N+V,className:a.line},C==null?void 0:C.axisLine)),W.map((K,Z)=>{const{offset:fe,labelOffset:ge}=K,ve=ge??0,be=X.isXInside(fe),Pe=K.formattedValue,ue=K.ignoreTick??!1,Se=K.groupIndex??0,Ae=_oe(R,Se,A),Fe=r*Ae.tickSize,ae=r*(Ae.tickSize+Ww);return v.jsxs("g",{transform:`translate(${fe}, 0)`,className:a.tickContainer,"data-group-index":Se,children:[!x&&!ue&&be&&v.jsx(o,H({y2:Fe,className:a.tick},C==null?void 0:C.axisTick)),Pe!==void 0&&v.jsx(c,H({x:ve,y:ae},f,{text:Pe}))]},Z)}),b&&v.jsx("g",{className:a.label,children:v.jsx(d,H({},G,p,{text:b}))})]})}function Eoe(n){const{xAxis:e,xAxisIds:t}=No(),r=e[n.axisId??t[0]];return"groups"in r&&Array.isArray(r.groups)?v.jsx(Aoe,H({},n)):v.jsx(woe,H({},n))}function Soe(n,e,t,r,i){const a=new Map,s=My((i==null?void 0:i.angle)??0);let o=1,c=1;(i==null?void 0:i.textAnchor)==="start"?(o=1/0,c=1):(i==null?void 0:i.textAnchor)==="end"?(o=1,c=1/0):(o=2,c=2),s>180&&([o,c]=[c,o]),r&&([o,c]=[c,o]);for(const d of n)if(d.formattedValue){const f=Math.min((d.offset+d.labelOffset)*o,(e.top+e.height+e.bottom-d.offset-d.labelOffset)*c),p=g=>E8(g,{width:t,height:f,angle:s,measureText:m=>up(m,i)});a.set(d,S8(d.formattedValue.toString(),p))}return a}const Coe=["scale","tickNumber"],Toe=n=>{const{classes:e,position:t,id:r}=n,i={root:["root","directionY",t,`id-${r}`],line:["line"],tickContainer:["tickContainer"],tick:["tick"],tickLabel:["tickLabel"],label:["label"]};return xt(i,C8,e)},Y3=2,Ioe=2,Doe=ke(T8,{name:"MuiChartsYAxis",slot:"Root"})({}),Roe={disableLine:!1,disableTicks:!1,tickSize:6};function Moe(n){const{yAxisIds:e,yAxis:t}=Kl(),r=t[n.axisId??e[0]],{scale:i,tickNumber:a}=r,s=Be(r,Coe),o=bt({props:H({},s,n),name:"MuiChartsYAxis"}),c=H({},Roe,o),{position:d,disableLine:f,disableTicks:p,label:g,labelStyle:m,tickLabelStyle:x,tickSize:b,valueFormatter:A,slots:E,slotProps:C,tickPlacement:T,tickLabelPlacement:D,tickInterval:k,tickLabelInterval:B,sx:O,offset:I,width:R}=c,F=ru(),N=Ma(),P=bA(),V=Toe(c),{instance:q}=Xl(),X=Pa(),{left:G,top:W,width:K,height:Z}=X,fe=p?4:b,ge=Ny({scale:i,tickNumber:a,valueFormatter:A,tickPlacement:T,tickLabelPlacement:D,tickInterval:k,direction:"y"}),ve=d==="right"?1:-1,be=typeof(x==null?void 0:x.fontSize)=="number"?x.fontSize:12,Pe=(E==null?void 0:E.axisLine)??"line",ue=(E==null?void 0:E.axisTick)??"line",Se=(E==null?void 0:E.axisTickLabel)??S1,Ae=(E==null?void 0:E.axisLabel)??S1,Fe=D8((d==="right"?-90:90)-((x==null?void 0:x.angle)??0)),ae=R8((d==="right"?-90:90)-((x==null?void 0:x.angle)??0)),ye=Ct({elementType:Se,externalSlotProps:C==null?void 0:C.axisTickLabel,additionalProps:{style:H({},F.typography.caption,{fontSize:be,textAnchor:N?M8(Fe):Fe,dominantBaseline:ae},x)},className:V.tickLabel,ownerState:{}}),pe=Ct({elementType:Ae,externalSlotProps:C==null?void 0:C.axisLabel,additionalProps:{style:H({},F.typography.body1,{lineHeight:1,fontSize:14,angle:ve*90,textAnchor:"middle",dominantBaseline:"text-before-edge"},m)},ownerState:{}}),ie=Ct({elementType:Pe,externalSlotProps:C==null?void 0:C.axisLine,additionalProps:{strokeLinecap:"square"},ownerState:{}}),Ve=i.domain(),we=ts(i);if(we&&Ve.length===0||!we&&Ve.some(_A)||d==="none")return null;const ze={x:ve*R,y:W+Z/2},Oe=Math.max(0,R-(g?up(g,pe.style).height+Ioe:0)-fe-Y3),Re=P?Soe(ge,X,Oe,N,ye.style):new Map(Array.from(ge).map(qe=>[qe,qe.formattedValue]));return v.jsxs(Doe,{transform:`translate(${d==="right"?G+K+I:G-I}, 0)`,className:V.root,sx:O,children:[!f&&v.jsx(Pe,H({y1:W,y2:W+Z,className:V.line},ie)),ge.map((qe,We)=>{const{offset:Me,labelOffset:Ne,value:ft}=qe,_t=ve*(fe+Y3),xn=Ne,Mn=typeof B=="function"&&!(B!=null&&B(ft,We)),rt=q.isYInside(Me),at=Re.get(qe);return rt?v.jsxs("g",{transform:`translate(0, ${Me})`,className:V.tickContainer,children:[!p&&v.jsx(ue,H({x2:ve*fe,className:V.tick},C==null?void 0:C.axisTick)),at!==void 0&&!Mn&&v.jsx(Se,H({x:_t,y:xn,text:at},ye))]},We):null}),g&&P&&v.jsx("g",{className:V.label,children:v.jsx(Ae,H({},ze,pe,{text:g}))})]})}function Ooe(n){const{slots:e,slotProps:t}=n,{xAxisIds:r,xAxis:i}=No(),{yAxisIds:a,yAxis:s}=Kl();return v.jsxs(M.Fragment,{children:[r.map(o=>!i[o].position||i[o].position==="none"?null:v.jsx(Eoe,{slots:e,slotProps:t,axisId:o},o)),a.map(o=>!s[o].position||s[o].position==="none"?null:v.jsx(Moe,{slots:e,slotProps:t,axisId:o},o))]})}function Poe(n){return Mt("MuiChartsGrid",n)}const q3=Ot("MuiChartsGrid",["root","line","horizontalLine","verticalLine"]),koe=ke("g",{name:"MuiChartsGrid",slot:"Root",overridesResolver:(n,e)=>[{[`&.${q3.verticalLine}`]:e.verticalLine},{[`&.${q3.horizontalLine}`]:e.horizontalLine},e.root]})({}),P8=ke("line",{name:"MuiChartsGrid",slot:"Line"})(({theme:n})=>({stroke:(n.vars||n).palette.divider,shapeRendering:"crispEdges",strokeWidth:1}));function Noe(n){const{axis:e,start:t,end:r,classes:i}=n,{scale:a,tickNumber:s,tickInterval:o}=e,c=Ny({scale:a,tickNumber:s,tickInterval:o,direction:"x"});return v.jsx(M.Fragment,{children:c.map(({value:d,offset:f})=>{var p;return v.jsx(P8,{y1:t,y2:r,x1:f,x2:f,className:i.verticalLine},`vertical-${((p=d==null?void 0:d.getTime)==null?void 0:p.call(d))??d}`)})})}function Loe(n){const{axis:e,start:t,end:r,classes:i}=n,{scale:a,tickNumber:s,tickInterval:o}=e,c=Ny({scale:a,tickNumber:s,tickInterval:o,direction:"y"});return v.jsx(M.Fragment,{children:c.map(({value:d,offset:f})=>{var p;return v.jsx(P8,{y1:f,y2:f,x1:t,x2:r,className:i.horizontalLine},`horizontal-${((p=d==null?void 0:d.getTime)==null?void 0:p.call(d))??d}`)})})}const Boe=["vertical","horizontal"],Foe=({classes:n})=>xt({root:["root"],verticalLine:["line","verticalLine"],horizontalLine:["line","horizontalLine"]},Poe,n);function Voe(n){const e=bt({props:n,name:"MuiChartsGrid"}),t=Pa(),{vertical:r,horizontal:i}=e,a=Be(e,Boe),{xAxis:s,xAxisIds:o}=No(),{yAxis:c,yAxisIds:d}=Kl(),f=Foe(e),p=c[d[0]],g=s[o[0]];return v.jsxs(koe,H({},a,{className:f.root,children:[r&&v.jsx(Noe,{axis:g,start:t.top,end:t.height+t.top,classes:f}),i&&v.jsx(Loe,{axis:p,start:t.left,end:t.width+t.left,classes:f})]}))}function joe(n){return Mt("MuiChartsTooltip",n)}const xd=Ot("MuiChartsTooltip",["root","paper","table","row","cell","mark","markContainer","labelCell","valueCell","axisValueCell"]),Ly=n=>xt({root:["root"],paper:["paper"],table:["table"],row:["row"],cell:["cell"],mark:["mark"],markContainer:["markContainer"],labelCell:["labelCell"],valueCell:["valueCell"],axisValueCell:["axisValueCell"]},joe,n);function Uoe(){var B,O,I;const n=_n(),e=pt(n,Lk),t=pt(n,Po),r=Oy(),{xAxis:i,xAxisIds:a}=No(),{yAxis:s,yAxisIds:o}=Kl(),{zAxis:c,zAxisIds:d}=yA(),{rotationAxis:f,rotationAxisIds:p}=o8(),{radiusAxis:g,radiusAxisIds:m}=ise(),x=r.xAxisId??a[0],b=r.yAxisId??o[0],A=r.zAxisId??d[0],E=r.rotationAxisId??p[0],C=r.radiusAxisId??m[0];if(!e)return null;const T=(B=r[e.type])==null?void 0:B.series[e.seriesId];if(!T)return null;const D=((I=(O=t[T.type]).colorProcessor)==null?void 0:I.call(O,T,x&&i[x],b&&s[b],A&&c[A]))??(()=>""),k={};return x!==void 0&&(k.x=i[x]),b!==void 0&&(k.y=s[b]),E!==void 0&&(k.rotation=f[E]),C!==void 0&&(k.radius=g[C]),t[T.type].tooltipGetter({series:T,axesConfig:k,getColor:D,identifier:e})}const Yw=ke("div",{name:"MuiChartsTooltip",slot:"Container",overridesResolver:(n,e)=>e.paper})(({theme:n})=>{var e;return{backgroundColor:(n.vars||n).palette.background.paper,color:(n.vars||n).palette.text.primary,borderRadius:(e=(n.vars||n).shape)==null?void 0:e.borderRadius,border:`solid ${(n.vars||n).palette.divider} 1px`}}),qw=ke("table",{name:"MuiChartsTooltip",slot:"Table"})(({theme:n})=>({borderSpacing:0,[`& .${xd.markContainer}`]:{display:"inline-block",width:`calc(20px + ${n.spacing(1.5)})`,verticalAlign:"middle"},"& caption":{borderBottom:`solid ${(n.vars||n).palette.divider} 1px`,padding:n.spacing(.5,1.5),textAlign:"start",whiteSpace:"nowrap","& span":{marginRight:n.spacing(1.5)}}})),Xw=ke("tr",{name:"MuiChartsTooltip",slot:"Row"})(({theme:n})=>({"tr:first-of-type& td":{paddingTop:n.spacing(.5)},"tr:last-of-type& td":{paddingBottom:n.spacing(.5)}})),Id=ke(te,{name:"MuiChartsTooltip",slot:"Cell"})(({theme:n})=>({verticalAlign:"middle",color:(n.vars||n).palette.text.secondary,textAlign:"start",[`&.${xd.cell}`]:{paddingLeft:n.spacing(1),paddingRight:n.spacing(1)},[`&.${xd.labelCell}`]:{fontWeight:n.typography.fontWeightRegular},[`&.${xd.valueCell}, &.${xd.axisValueCell}`]:{color:(n.vars||n).palette.text.primary,fontWeight:n.typography.fontWeightMedium},[`&.${xd.valueCell}`]:{paddingLeft:n.spacing(1.5),paddingRight:n.spacing(1.5)},"td:first-of-type&, th:first-of-type&":{paddingLeft:n.spacing(1.5)},"td:last-of-type&, th:last-of-type&":{paddingRight:n.spacing(1.5)}}));function Hoe(n){return Mt("MuiChartsLabelMark",n)}const dd=Ot("MuiChartsLabelMark",["root","line","square","circle","mask","fill"]),zoe=n=>{const{type:e}=n;return xt({root:typeof e=="function"?["root"]:["root",e],mask:["mask"],fill:["fill"]},Hoe,n.classes)},k8=(n,e,t)=>M.forwardRef(function(i,a){var g;const s=bt({props:i,name:n}),o=typeof e.defaultProps=="function"?e.defaultProps(s):e.defaultProps??{},c=yR(o,s),d=ru(),f=(g=e.classesResolver)==null?void 0:g.call(e,c,d),p=M.forwardRef(t);return v.jsx(p,H({},c,{classes:f,ref:a}))}),$oe=["type","color","className","classes"],Goe=ke("div",{name:"MuiChartsLabelMark",slot:"Root"})(()=>({display:"flex",width:14,height:14,[`&.${dd.line}`]:{width:16,height:"unset",alignItems:"center",[`.${dd.mask}`]:{height:4,width:"100%",borderRadius:1,overflow:"hidden"}},[`&.${dd.square}`]:{height:13,width:13,borderRadius:2,overflow:"hidden"},[`&.${dd.circle}`]:{height:15,width:15},svg:{display:"block"},[`& .${dd.mask} > *`]:{height:"100%",width:"100%"},[`& .${dd.mask}`]:{height:"100%",width:"100%"}})),C1=k8("MuiChartsLabelMark",{defaultProps:{type:"square"},classesResolver:zoe},function(e,t){const{type:r,color:i,className:a,classes:s}=e,o=Be(e,$oe),c=r;return v.jsx(Goe,H({className:Ut(s==null?void 0:s.root,a),ownerState:e,"aria-hidden":"true",ref:t},o,{children:v.jsx("div",{className:s==null?void 0:s.mask,children:typeof c=="function"?v.jsx(c,{className:s==null?void 0:s.fill,color:i}):v.jsx("svg",{viewBox:"0 0 24 24",preserveAspectRatio:r==="line"?"none":void 0,children:r==="circle"?v.jsx("circle",{className:s==null?void 0:s.fill,r:"12",cx:"12",cy:"12",fill:i}):v.jsx("rect",{className:s==null?void 0:s.fill,width:"24",height:"24",fill:i})})})}))});function Woe(n){const{classes:e,sx:t}=n,r=Uoe(),i=Ly(e);if(!r)return null;if("values"in r){const{label:d,color:f,markType:p}=r;return v.jsx(Yw,{sx:t,className:i.paper,children:v.jsxs(qw,{className:i.table,children:[v.jsxs(te,{component:"caption",children:[v.jsx("div",{className:i.markContainer,children:v.jsx(C1,{type:p,color:f,className:i.mark})}),d]}),v.jsx("tbody",{children:r.values.map(({formattedValue:g,label:m})=>v.jsxs(Xw,{className:i.row,children:[v.jsx(Id,{className:Ut(i.labelCell,i.cell),component:"th",children:m}),v.jsx(Id,{className:Ut(i.valueCell,i.cell),component:"td",children:g})]},m))})]})})}const{color:a,label:s,formattedValue:o,markType:c}=r;return v.jsx(Yw,{sx:t,className:i.paper,children:v.jsx(qw,{className:i.table,children:v.jsx("tbody",{children:v.jsxs(Xw,{className:i.row,children:[v.jsxs(Id,{className:Ut(i.labelCell,i.cell),component:"th",children:[v.jsx("div",{className:i.markContainer,children:v.jsx(C1,{type:c,color:a,className:i.mark})}),s]}),v.jsx(Id,{className:Ut(i.valueCell,i.cell),component:"td",children:o})]})})})})}function Yoe(n){const e=_n(),t=pt(e,Po);return M.useMemo(()=>{const i={};return Object.keys(t).forEach(a=>{i[a]=t[a].colorProcessor}),i},[t])}function qoe(){const n=vA(),[e,t]=M.useState(null);return M.useEffect(()=>{const r=n.current;if(r===null)return()=>{};const i=s=>{s.pointerType!=="mouse"&&t(null)},a=s=>{t({pointerType:s.pointerType})};return r.addEventListener("pointerenter",a),r.addEventListener("pointerup",i),()=>{r.removeEventListener("pointerenter",a),r.removeEventListener("pointerup",i)}},[n]),e}function Xoe(n){return n instanceof Date?n.toUTCString():n.toLocaleString()}const Koe="@media (pointer: fine)",Qoe=()=>M1(Koe,{defaultMatches:!0}),N8=(n,e)=>e,L8=(n,e)=>e;function B8(n,e,t){return Array.isArray(t)?t.map(r=>V3(e.axis[r],n)):V3(e.axis[t],n)}const F8=Ye([ap,sp,Jae],(n,e,t)=>n===null||e===null?null:ese(t)(n,e)),Zoe=Ye([F8,gu,N8],(n,e,t=e.axisIds[0])=>n===null?null:B8(n,e,t)),V8=Ye([F8,gu,L8],(n,e,t=e.axisIds)=>n===null?null:B8(n,e,t));Ye([gu,Zoe,N8],(n,e,t=n.axisIds[0])=>{var i;if(e===null||e===-1||n.axisIds.length===0)return null;const r=(i=n.axis[t])==null?void 0:i.data;return r?r[e]:null});Ye([gu,V8,L8],(n,e,t=n.axisIds)=>e===null?null:t.map((r,i)=>{var s;const a=e[i];return a===-1?null:(s=n.axis[r].data)==null?void 0:s[a]}));const j8=Ye([V8,gu],(n,e)=>n===null?[]:e.axisIds.map((t,r)=>({axisId:t,dataIndex:n[r]})).filter(({axisId:t,dataIndex:r})=>e.axis[t].triggerTooltip&&r>=0),{memoizeOptions:{resultEqualityCheck:jd}});Ye([],()=>[]);const Joe=Ye([j8],n=>n.length>0);function D2(n,e,t){var s;const r=((s=n.data)==null?void 0:s[e])??null,a=(n.valueFormatter??(o=>n.scaleType==="utc"?Xoe(o):o.toLocaleString()))(r,{location:"tooltip",scale:n.scale});return{axisDirection:t,axisId:n.id,mainAxis:n,dataIndex:e,axisValue:r,axisFormattedValue:a,seriesItems:[]}}function ele(n={}){const{multipleAxes:e,directions:t}=n,r=nse(),i=rse(),a=ase(),s=_n(),o=pt(s,jk),c=pt(s,Uk),d=pt(s,j8),f=Oy(),{xAxis:p}=No(),{yAxis:g}=Kl(),{zAxis:m,zAxisIds:x}=yA(),{rotationAxis:b}=o8(),A=Yoe();if(o.length===0&&c.length===0&&d.length===0)return null;const E=[];return(t===void 0||t.includes("x"))&&o.forEach(({axisId:C,dataIndex:T})=>{!e&&E.length>1||E.push(D2(p[C],T,"x"))}),(t===void 0||t.includes("y"))&&c.forEach(({axisId:C,dataIndex:T})=>{!e&&E.length>1||E.push(D2(g[C],T,"y"))}),(t===void 0||t.includes("rotation"))&&d.forEach(({axisId:C,dataIndex:T})=>{!e&&E.length>1||E.push(D2(b[C],T,"rotation"))}),Object.keys(f).filter(dA).forEach(C=>{const T=f[C];return T?T.seriesOrder.forEach(D=>{var R;const k=T.series[D],B=k.xAxisId??r.id,O=k.yAxisId??i.id,I=E.findIndex(({axisDirection:F,axisId:N})=>F==="x"&&N===B||F==="y"&&N===O);if(I>=0){const F="zAxisId"in k?k.zAxisId:x[0],{dataIndex:N}=E[I],P=((R=A[C])==null?void 0:R.call(A,k,p[B],g[O],F?m[F]:void 0)(N))??"",V=k.data[N]??null,q=k.valueFormatter(V,{dataIndex:N}),X=sa(k.label,"tooltip")??null;E[I].seriesItems.push({seriesId:D,color:P,value:V,formattedValue:q,formattedLabel:X,markType:k.labelMarkType})}}):[]}),Object.keys(f).filter(mA).forEach(C=>{const T=f[C];return T?T.seriesOrder.forEach(D=>{var I;const k=T.series[D],B=k.rotationAxisId??(a==null?void 0:a.id),O=E.findIndex(({axisDirection:R,axisId:F})=>R==="rotation"&&F===B);if(O>=0){const{dataIndex:R}=E[O],F=((I=A[C])==null?void 0:I.call(A,k)(R))??"",N=k.data[R]??null,P=k.valueFormatter(N,{dataIndex:R}),V=sa(k.label,"tooltip")??null;E[O].seriesItems.push({seriesId:D,color:F,value:N,formattedValue:P,formattedLabel:V,markType:k.labelMarkType})}}):[]}),e?E:E.length===0?E[0]:null}function tle(n){return ele(H({},n,{multipleAxes:!0}))}function nle(n){const e=Ly(n.classes),t=tle();return t===null?null:v.jsx(Yw,{sx:n.sx,className:e.paper,children:t.map(({axisId:r,mainAxis:i,axisValue:a,axisFormattedValue:s,seriesItems:o})=>v.jsxs(qw,{className:e.table,children:[a!=null&&!i.hideTooltip&&v.jsx(te,{component:"caption",children:s}),v.jsx("tbody",{children:o.map(({seriesId:c,color:d,formattedValue:f,formattedLabel:p,markType:g})=>f==null?null:v.jsxs(Xw,{className:e.row,children:[v.jsxs(Id,{className:Ut(e.labelCell,e.cell),component:"th",children:[v.jsx("div",{className:e.markContainer,children:v.jsx(C1,{type:g,color:d,className:e.mark})}),p||null]}),v.jsx(Id,{className:Ut(e.valueCell,e.cell),component:"td",children:f})]},c))})]},r))})}function rle(n){let e,t;const r=()=>{t=null,n(...e)};function i(...a){e=a,t||(t=requestAnimationFrame(r))}return i.clear=()=>{t&&(cancelAnimationFrame(t),t=null)},i}function ile(){const n=_n(),e=pt(n,s8),t=pt(n,du);return e!==void 0?"polar":t!==void 0?"cartesian":"none"}const ale=["trigger","classes","children"],sle=()=>!1,ole=ke(hR,{name:"MuiChartsTooltip",slot:"Root"})(({theme:n})=>({pointerEvents:"none",zIndex:n.zIndex.modal}));function lle(n){const e=bt({props:n,name:"MuiChartsTooltipContainer"}),{trigger:t="axis",classes:r,children:i}=e,a=Be(e,ale),s=vA(),o=Ly(r),c=qoe(),d=Qoe(),f=M.useRef(null),p=mR(()=>({x:0,y:0})),g=ile(),m=_n(),x=pt(m,t==="axis"?g==="polar"&&Joe||g==="cartesian"&&Iie||sle:Eie);M.useEffect(()=>{const T=s.current;if(T===null)return()=>{};const D=rle(()=>{var B;return(B=f.current)==null?void 0:B.update()}),k=B=>{p.current={x:B.clientX,y:B.clientY},D()};return T.addEventListener("pointerdown",k),T.addEventListener("pointermove",k),()=>{T.removeEventListener("pointerdown",k),T.removeEventListener("pointermove",k),D.clear()}},[s,p]);const b=M.useMemo(()=>({getBoundingClientRect:()=>({x:p.current.x,y:p.current.y,top:p.current.y,left:p.current.x,right:p.current.x,bottom:p.current.y,width:0,height:0,toJSON:()=>""})}),[p]),A=(c==null?void 0:c.pointerType)==="mouse"||d,E=(c==null?void 0:c.pointerType)==="touch"||!d,C=M.useMemo(()=>[{name:"offset",options:{offset:()=>E?[0,64]:[0,8]}},...A?[]:[{name:"flip",options:{fallbackPlacements:["top-end","top-start","bottom-end","bottom"]}}]],[A,E]);return t==="none"?null:v.jsx(ZN,{children:x&&v.jsx(ole,H({className:o==null?void 0:o.root,open:x,placement:A?"right-start":"top",popperRef:f,anchorEl:b,modifiers:C},a,{children:i}))})}function U8(n){const{classes:e,trigger:t="axis"}=n,r=Ly(e);return v.jsx(lle,H({},n,{classes:e,children:t==="axis"?v.jsx(nle,{classes:r}):v.jsx(Woe,{classes:r})}))}function cle(n){return Mt("MuiChartsLabel",n)}Ot("MuiChartsLabel",["root"]);const ule=n=>xt({root:["root"]},cle,n.classes),dle=["children","className","classes"],fle=k8("MuiChartsLabel",{classesResolver:ule},function(e,t){const{children:r,className:i,classes:a}=e,s=Be(e,dle);return v.jsx("span",H({className:Ut(a==null?void 0:a.root,i),ref:t},s,{children:r}))}),hle=n=>({type:"series",color:n.color,label:n.label,seriesId:n.seriesId,itemId:n.itemId});function ple(n){return Mt("MuiChartsLegend",n)}const gle=n=>{const{classes:e,direction:t}=n;return xt({root:["root",t],item:["item"],mark:["mark"],label:["label"],series:["series"]},ple,e)},X3=Ot("MuiChartsLegend",["root","item","series","mark","label","vertical","horizontal"]),mle=["slots","slotProps"],yle=["ownerState"],vle=(n,e,t,r)=>{function i(a,s){var k;const o=bt({props:a,name:n}),c=typeof t.defaultProps=="function"?t.defaultProps(o):t.defaultProps??{},d=yR(c,o),f=d,{slots:p,slotProps:g}=f,m=Be(f,mle),x=ru(),b=(k=t.classesResolver)==null?void 0:k.call(t,d,x),A=(p==null?void 0:p[e])??r,E=t.propagateSlots&&!(p!=null&&p[e]),C=Ct({elementType:A,externalSlotProps:g==null?void 0:g[e],additionalProps:H({},m,{classes:b},E&&{slots:p,slotProps:g}),ownerState:{}}),T=Be(C,yle),D=H({},T);for(const B of t.omitProps??[])delete D[B];return v.jsx(A,H({},D,{ref:s}))}return M.forwardRef(i)},xle=["direction","onItemClick","className","classes"],wle=ke("ul",{name:"MuiChartsLegend",slot:"Root"})(({ownerState:n,theme:e})=>H({},e.typography.caption,{color:(e.vars||e).palette.text.primary,lineHeight:"100%",display:"flex",flexDirection:n.direction==="vertical"?"column":"row",alignItems:n.direction==="vertical"?void 0:"center",flexShrink:0,gap:e.spacing(2),listStyleType:"none",paddingInlineStart:0,marginBlock:e.spacing(1),marginInline:e.spacing(1),flexWrap:"wrap",li:{display:n.direction==="horizontal"?"inline-flex":void 0},[`button.${X3.series}`]:{background:"none",border:"none",padding:0,fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",letterSpacing:"inherit",color:"inherit"},[`& .${X3.series}`]:{display:n.direction==="vertical"?"flex":"inline-flex",alignItems:"center",gap:e.spacing(1)}})),H8=vle("MuiChartsLegend","legend",{defaultProps:{direction:"horizontal"},omitProps:["position"],classesResolver:gle},M.forwardRef(function(e,t){const r=_se(),{onItemClick:i,className:a,classes:s}=e,o=Be(e,xle);if(r.items.length===0)return null;const c=i?"button":"div";return v.jsx(wle,H({className:Ut(s==null?void 0:s.root,a),ref:t},o,{ownerState:e,children:r.items.map((d,f)=>v.jsx("li",{className:s==null?void 0:s.item,"data-series":d.id,children:v.jsxs(c,{className:s==null?void 0:s.series,role:i?"button":void 0,type:i?"button":void 0,onClick:i?p=>i(p,hle(d),f):void 0,children:[v.jsx(C1,{className:s==null?void 0:s.mark,color:d.color,type:d.markType}),v.jsx(fle,{className:s==null?void 0:s.label,children:d.label})]})},d.id))}))}));function ble(n){return Mt("MuiChartsAxisHighlight",n)}Ot("MuiChartsAxisHighlight",["root"]);const T1=ke("path",{name:"MuiChartsAxisHighlight",slot:"Root"})(({theme:n})=>({pointerEvents:"none",variants:[{props:{axisHighlight:"band"},style:H({fill:"white",fillOpacity:.1},n.applyStyles("light",{fill:"gray"}))},{props:{axisHighlight:"line"},style:H({strokeDasharray:"5 2",stroke:"#ffffff"},n.applyStyles("light",{stroke:"#000000"}))}]}));function _le(n){const{type:e,classes:t}=n,{left:r,width:i}=Pa(),a=_n(),s=pt(a,Pie),o=pt(a,la);return s.length===0?null:s.map(({axisId:c,value:d})=>{const p=o.axis[c].scale,g=b1(p),m=e==="band"&&d!==null&&ts(p);return v.jsxs(M.Fragment,{children:[m&&p(d)!==void 0&&v.jsx(T1,{d:`M ${r} ${p(d)-(p.step()-p.bandwidth())/2} l 0 ${p.step()} l ${i} 0 l 0 ${-p.step()} Z`,className:t.root,ownerState:{axisHighlight:"band"}}),e==="line"&&d!==null&&v.jsx(T1,{d:`M ${r} ${g(d)} L ${r+i} ${g(d)}`,className:t.root,ownerState:{axisHighlight:"line"}})]},`${c}-${d}`)})}function Ale(n){const{type:e,classes:t}=n,{top:r,height:i}=Pa(),a=_n(),s=pt(a,Oie),o=pt(a,oa);return s.length===0?null:s.map(({axisId:c,value:d})=>{const p=o.axis[c].scale,g=b1(p),m=e==="band"&&d!==null&&ts(p);return v.jsxs(M.Fragment,{children:[m&&p(d)!==void 0&&v.jsx(T1,{d:`M ${p(d)-(p.step()-p.bandwidth())/2} ${r} l ${p.step()} 0 l 0 ${i} l ${-p.step()} 0 Z`,className:t.root,ownerState:{axisHighlight:"band"}}),e==="line"&&d!==null&&v.jsx(T1,{d:`M ${g(d)} ${r} L ${g(d)} ${r+i}`,className:t.root,ownerState:{axisHighlight:"line"}})]},`${c}-${d}`)})}const Ele=()=>xt({root:["root"]},ble);function Sle(n){const{x:e,y:t}=n,r=Ele();return v.jsxs(M.Fragment,{children:[e&&v.jsx(Ale,{type:e,classes:r}),t&&v.jsx(_le,{type:t,classes:r})]})}function Cle(n){return Mt("MuiBarElement",n)}const Tle=Ot("MuiBarElement",["root","highlighted","faded","series"]),Ile=n=>{const{classes:e,id:t,isHighlighted:r,isFaded:i}=n,a={root:["root",`series-${t}`,r&&"highlighted",i&&"faded"]};return xt(a,Cle,e)};function Dle(n){"hasPointerCapture"in n.currentTarget&&n.currentTarget.hasPointerCapture(n.pointerId)&&n.currentTarget.releasePointerCapture(n.pointerId)}const z8=(n,e)=>{const{instance:t}=Xl(),r=M.useRef(!1),i=M.useCallback(()=>{r.current=!0,t.setItemInteraction({type:n.type,seriesId:n.seriesId,dataIndex:n.dataIndex}),t.setHighlight({seriesId:n.seriesId,dataIndex:n.dataIndex})},[t,n.type,n.seriesId,n.dataIndex]),a=M.useCallback(()=>{r.current=!1,t.removeItemInteraction({type:n.type,seriesId:n.seriesId,dataIndex:n.dataIndex}),t.clearHighlight()},[t,n.type,n.seriesId,n.dataIndex]);return M.useEffect(()=>()=>{r.current&&a()},[a]),{onPointerEnter:i,onPointerLeave:a,onPointerDown:Dle}},Rle=["ownerState","skipAnimation","id","dataIndex","xOrigin","yOrigin"];function Mle(n){const{ownerState:e}=n,t=Be(n,Rle),r=Bse(n);return v.jsx("rect",H({},t,{filter:e.isHighlighted?"brightness(120%)":void 0,opacity:e.isFaded?.3:1,"data-highlighted":e.isHighlighted||void 0,"data-faded":e.isFaded||void 0},r))}const Ole=["id","dataIndex","classes","color","slots","slotProps","style","onClick","skipAnimation","layout","x","xOrigin","y","yOrigin","width","height"];function Ple(n){const{id:e,dataIndex:t,classes:r,color:i,slots:a,slotProps:s,style:o,onClick:c,skipAnimation:d,layout:f,x:p,xOrigin:g,y:m,yOrigin:x,width:b,height:A}=n,E=Be(n,Ole),C=z8({type:"bar",seriesId:e,dataIndex:t}),{isFaded:T,isHighlighted:D}=f8({seriesId:e,dataIndex:t}),k={id:e,dataIndex:t,classes:r,color:i,isFaded:T,isHighlighted:D},B=Ile(k),O=(a==null?void 0:a.bar)??Mle,I=Ct({elementType:O,externalSlotProps:s==null?void 0:s.bar,externalForwardedProps:E,additionalProps:H({},C,{id:e,dataIndex:t,color:i,x:p,xOrigin:g,y:m,yOrigin:x,width:b,height:A,style:o,onClick:c,cursor:c?"pointer":"unset",stroke:"none",fill:i,skipAnimation:d,layout:f}),className:B.root,ownerState:k});return v.jsx(O,H({},I))}function kle(n,e){const t=Jt(n.x,e.x),r=Jt(n.y,e.y),i=Jt(n.width,e.width),a=Jt(n.height,e.height),s=Jt(n.borderRadius,e.borderRadius);return o=>({x:t(o),y:r(o),width:i(o),height:a(o),borderRadius:s(o)})}function Nle(n){const e={x:n.layout==="vertical"?n.x:n.xOrigin,y:n.layout==="vertical"?n.yOrigin:n.y,width:n.layout==="vertical"?n.width:0,height:n.layout==="vertical"?0:n.height,borderRadius:n.borderRadius};return cp({x:n.x,y:n.y,width:n.width,height:n.height,borderRadius:n.borderRadius},{createInterpolator:kle,transformProps:t=>({d:Ble(n.hasNegative,n.hasPositive,n.layout,t.x,t.y,t.width,t.height,n.xOrigin,n.yOrigin,t.borderRadius)}),applyProps(t,{d:r}){r&&t.setAttribute("d",r)},initialProps:e,skip:n.skipAnimation,ref:n.ref})}function Lle(n){const{maskId:e,x:t,y:r,width:i,height:a,skipAnimation:s}=n,{ref:o,d:c}=Nle({layout:n.layout??"vertical",hasNegative:n.hasNegative,hasPositive:n.hasPositive,xOrigin:n.xOrigin,yOrigin:n.yOrigin,x:t,y:r,width:i,height:a,borderRadius:n.borderRadius??0,skipAnimation:s});return!n.borderRadius||n.borderRadius<=0?null:v.jsx("clipPath",{id:e,children:v.jsx("path",{ref:o,d:c})})}function Ble(n,e,t,r,i,a,s,o,c,d){if(t==="vertical"){if(e&&n){const p=Math.min(d,a/2,s/2);return`M${r},${i+s/2} v${-(s/2-p)} a${p},${p} 0 0 1 ${p},${-p} h${a-p*2} a${p},${p} 0 0 1 ${p},${p} v${s-2*p} a${p},${p} 0 0 1 ${-p},${p} h${-(a-p*2)} a${p},${p} 0 0 1 ${-p},${-p} v${-(s/2-p)}`}const f=Math.min(d,a/2);if(e)return`M${r},${Math.max(c,i+f)} v${Math.min(0,-(c-i-f))} a${f},${f} 0 0 1 ${f},${-f} h${a-f*2} a${f},${f} 0 0 1 ${f},${f} v${Math.max(0,c-i-f)} Z`;if(n)return`M${r},${Math.min(c,i+s-f)} v${Math.max(0,s-f)} a${f},${f} 0 0 0 ${f},${f} h${a-f*2} a${f},${f} 0 0 0 ${f},${-f} v${-Math.max(0,s-f)} Z`}if(t==="horizontal"){if(e&&n){const p=Math.min(d,a/2,s/2);return`M${r+a/2},${i} h${a/2-p} a${p},${p} 0 0 1 ${p},${p} v${s-p*2} a${p},${p} 0 0 1 ${-p},${p} h${-(a-2*p)} a${p},${p} 0 0 1 ${-p},${-p} v${-(s-p*2)} a${p},${p} 0 0 1 ${p},${-p} h${a/2-p}`}const f=Math.min(d,s/2);if(e)return`M${Math.min(o,r-f)},${i} h${a} a${f},${f} 0 0 1 ${f},${f} v${s-f*2} a${f},${f} 0 0 1 ${-f},${f} h${-a} Z`;if(n)return`M${Math.max(o,r+a+f)},${i} h${-a} a${f},${f} 0 0 0 ${-f},${f} v${s-f*2} a${f},${f} 0 0 0 ${f},${f} h${a} Z`}}function Fle(n){return Mt("MuiBarLabel",n)}const R2=Ot("MuiBarLabel",["root","highlighted","faded","animate"]),Vle=n=>{const{classes:e,seriesId:t,isFaded:r,isHighlighted:i,skipAnimation:a}=n,s={root:["root",`series-${t}`,i&&"highlighted",r&&"faded",!a&&"animate"]};return xt(s,Fle,e)},jle=n=>{const{barLabel:e,value:t,dataIndex:r,seriesId:i,height:a,width:s}=n;return e==="value"?t?t==null?void 0:t.toString():null:e({seriesId:i,dataIndex:r,value:t},{bar:{height:a,width:s}})},Ule=["seriesId","dataIndex","color","isFaded","isHighlighted","classes","skipAnimation","layout","xOrigin","yOrigin"],Hle=ke("text",{name:"MuiBarLabel",slot:"Root",overridesResolver:(n,e)=>[{[`&.${R2.faded}`]:e.faded},{[`&.${R2.highlighted}`]:e.highlighted},e.root]})(({theme:n})=>{var e,t,r,i;return H({},(e=n==null?void 0:n.typography)==null?void 0:e.body2,{stroke:"none",fill:(i=(r=(t=n.vars||n)==null?void 0:t.palette)==null?void 0:r.text)==null?void 0:i.primary,transition:"opacity 0.2s ease-in, fill 0.2s ease-in",textAnchor:"middle",dominantBaseline:"central",pointerEvents:"none",opacity:1,[`&.${R2.faded}`]:{opacity:.3}})});function zle(n){const e=bt({props:n,name:"MuiBarLabel"}),t=Be(e,Ule),r=Vse(e);return v.jsx(Hle,H({},t,r))}const $le=["seriesId","classes","color","dataIndex","barLabel","slots","slotProps","xOrigin","yOrigin","x","y","width","height","value","skipAnimation","layout"],Gle=["ownerState"];function Wle(n){const{seriesId:e,classes:t,color:r,dataIndex:i,barLabel:a,slots:s,slotProps:o,xOrigin:c,yOrigin:d,x:f,y:p,width:g,height:m,value:x,skipAnimation:b,layout:A}=n,E=Be(n,$le),{isFaded:C,isHighlighted:T}=f8({seriesId:e,dataIndex:i}),D={seriesId:e,classes:t,color:r,isFaded:C,isHighlighted:T,dataIndex:i,skipAnimation:b,layout:A},k=Vle(D),B=(s==null?void 0:s.barLabel)??zle,O=Ct({elementType:B,externalSlotProps:o==null?void 0:o.barLabel,additionalProps:H({},E,{xOrigin:c,yOrigin:d,x:f,y:p,width:g,height:m,className:k.root}),ownerState:D}),{ownerState:I}=O,R=Be(O,Gle);if(!a)return null;const F=jle({barLabel:a,value:x,dataIndex:i,seriesId:e,height:m,width:g});return F?v.jsx(B,H({},R,I,{children:F})):null}function Yle(n){return Mt("MuiBar",n)}Ot("MuiBar",["root","series","seriesLabels"]);const $8=n=>xt({root:["root"],series:["series"],seriesLabels:["seriesLabels"]},Yle,n),qle=["bars","skipAnimation"];function Xle(n){const{bars:e,skipAnimation:t}=n,r=Be(n,qle),i=$8();return v.jsx(M.Fragment,{children:e.flatMap(({seriesId:a,data:s})=>v.jsx("g",{className:i.seriesLabels,"data-series":a,children:s.map(({xOrigin:o,yOrigin:c,x:d,y:f,dataIndex:p,color:g,value:m,width:x,height:b,layout:A})=>v.jsx(Wle,H({seriesId:a,dataIndex:p,value:m,color:g,xOrigin:o,yOrigin:c,x:d,y:f,width:x,height:b,skipAnimation:t??!1,layout:A??"vertical"},r),p))},a))})}function G8(n){const e=_n(),t=pt(e,jee);return n||t}function Kle(){const n=_n();return pt(n,Pk)}const M2=(n,e)=>{const t=`${n}-axis`,r=`${n}Axis`;return e===(n==="x"?L_:B_)?`The first \`${r}\``:`The ${t} with id "${e}"`};function Qle(n,e,t,r,i,a,s){const o=i[r],c=s[a],d=n?o:c,f=n?c:o,p=n?r:a,g=n?a:r,m=n?"x":"y",x=n?"y":"x";if(!m1(d))throw new Error(`MUI X Charts: ${M2(m,p)} should be of type "band" to display the bar series of id "${e}".`);if(d.data===void 0)throw new Error(`MUI X Charts: ${M2(m,p)} should have data property.`);if(m1(f)||uA(f))throw new Error(`MUI X Charts: ${M2(x,g)} should be a continuous type to display the bar series of id "${e}".`)}function Zle(n,e,t){const r=use()??{series:{},stackingGroups:[]},i=No().xAxisIds[0],a=Kl().yAxisIds[0],s=gA(),{series:o,stackingGroups:c}=r,d={};return{completedData:c.flatMap(({ids:p},g)=>{const m=n.left,x=n.left+n.width,b=n.top,A=n.top+n.height;return p.map(E=>{const C=o[E].xAxisId??i,T=o[E].yAxisId??a,D=e[C],k=t[T],B=o[E].layout==="vertical";Qle(B,E,o[E],C,e,T,t);const O=B?D:k,I=D.scale,R=k.scale,F=r8(o[E],e[C],t[T]),N=O.scale.bandwidth(),{barWidth:P,offset:V}=Jle({bandWidth:N,numberOfGroups:c.length,gapRatio:O.barGapRatio}),q=g*(P+V),{stackedData:X,data:G,layout:W,minBarSize:K}=o[E],Z=O.data.map((fe,ge)=>{if(G[ge]==null)return null;const be=X[ge].map(pe=>B?R(pe):I(pe)),Pe=Math.round(Math.min(...be)),ue=Math.round(Math.max(...be)),Se=o[E].stack,{barSize:Ae,startCoordinate:Fe}=ece(B,Pe,ue,G[ge],K),ae={seriesId:E,dataIndex:ge,layout:W,x:B?I(fe)+q:Fe,y:B?Fe:R(fe)+q,xOrigin:I(0)??0,yOrigin:R(0)??0,height:B?Ae:P,width:B?P:Ae,color:F(ge),value:G[ge],maskId:`${s}_${Se||E}_${g}_${ge}`};if(ae.x>x||ae.x+ae.width<m||ae.y>A||ae.y+ae.height<b)return null;d[ae.maskId]||(d[ae.maskId]={id:ae.maskId,width:0,height:0,hasNegative:!1,hasPositive:!1,layout:ae.layout,xOrigin:I(0),yOrigin:R(0),x:0,y:0});const ye=d[ae.maskId];return ye.width=ae.layout==="vertical"?ae.width:ye.width+ae.width,ye.height=ae.layout==="vertical"?ye.height+ae.height:ae.height,ye.x=Math.min(ye.x===0?1/0:ye.x,ae.x),ye.y=Math.min(ye.y===0?1/0:ye.y,ae.y),ye.hasNegative=ye.hasNegative||(ae.value??0)<0,ye.hasPositive=ye.hasPositive||(ae.value??0)>0,ae}).filter(fe=>fe!==null);return{seriesId:E,data:Z}})}),masksData:Object.values(d)}}function Jle({bandWidth:n,numberOfGroups:e,gapRatio:t}){if(t===0)return{barWidth:n/e,offset:0};const r=n/(e+(e-1)*t),i=t*r;return{barWidth:r,offset:i}}function ece(n,e,t,r,i){if(r===0||r==null)return{barSize:0,startCoordinate:e};const a=t-e<i,s=a?i:t-e,o=n&&r>=0,c=!n&&r<0;return a&&(o||c)?{barSize:s,startCoordinate:t-s}:{barSize:s,startCoordinate:e}}const tce=["skipAnimation","onItemClick","borderRadius","barLabel"],nce=ke("g",{name:"MuiBarPlot",slot:"Root"})({[`& .${Tle.root}`]:{transition:"opacity 0.2s ease-in, fill 0.2s ease-in"}});function rce(n){const{skipAnimation:e,onItemClick:t,borderRadius:r,barLabel:i}=n,a=Be(n,tce),s=Kle(),o=G8(s||e),{xAxis:c}=No(),{yAxis:d}=Kl(),{completedData:f,masksData:p}=Zle(Pa(),c,d),g=!r||r<=0,m=$8();return v.jsxs(nce,{className:m.root,children:[!g&&p.map(({id:x,x:b,y:A,xOrigin:E,yOrigin:C,width:T,height:D,hasPositive:k,hasNegative:B,layout:O})=>v.jsx(Lle,{maskId:x,borderRadius:r,hasNegative:B,hasPositive:k,layout:O,x:b,y:A,xOrigin:E,yOrigin:C,width:T,height:D,skipAnimation:o??!1},x)),f.map(({seriesId:x,data:b})=>v.jsx("g",{"data-series":x,className:m.series,children:b.map(({dataIndex:A,color:E,maskId:C,layout:T,x:D,xOrigin:k,y:B,yOrigin:O,width:I,height:R})=>{const F=v.jsx(Ple,H({id:x,dataIndex:A,color:E,skipAnimation:o??!1,layout:T??"vertical",x:D,xOrigin:k,y:B,yOrigin:O,width:I,height:R},a,{onClick:t&&(N=>{t(N,{type:"bar",seriesId:x,dataIndex:A})})}),A);return g?F:v.jsx("g",{clipPath:`url(#${C})`,children:F},A)})},x)),i&&v.jsx(Xle,H({bars:f,skipAnimation:o,barLabel:i},a))]})}const ice=["message"],ace=ke("text")(({theme:n})=>H({},n.typography.body2,{stroke:"none",fill:(n.vars||n).palette.text.primary,shapeRendering:"crispEdges",textAnchor:"middle",dominantBaseline:"middle"}));function sce(n){const{message:e}=n,t=Be(n,ice),{top:r,left:i,height:a,width:s}=Pa(),{localeText:o}=v8();return v.jsx(ace,H({x:i+s/2,y:r+a/2},t,{children:e??o.loading}))}const oce=["message"],lce=ke("text")(({theme:n})=>H({},n.typography.body2,{stroke:"none",fill:(n.vars||n).palette.text.primary,shapeRendering:"crispEdges",textAnchor:"middle",dominantBaseline:"middle"}));function cce(n){const{message:e}=n,t=Be(n,oce),{top:r,left:i,height:a,width:s}=Pa(),{localeText:o}=v8();return v.jsx(lce,H({x:i+s/2,y:r+a/2},t,{children:e??o.noData}))}function uce(){const n=Oy();return Object.values(n).every(e=>{if(!e)return!0;const{series:t,seriesOrder:r}=e;return r.every(i=>t[i].data.length===0)})}function W8(n){var t,r,i,a;const e=uce();if(n.loading){const s=((t=n.slots)==null?void 0:t.loadingOverlay)??sce;return v.jsx(s,H({},(r=n.slotProps)==null?void 0:r.loadingOverlay))}if(e){const s=((i=n.slots)==null?void 0:i.noDataOverlay)??cce;return v.jsx(s,H({},(a=n.slotProps)==null?void 0:a.noDataOverlay))}return null}const dce=[op,Ef,Af,pu],fce=["xAxis","yAxis","series","width","height","margin","colors","dataset","sx","axisHighlight","grid","children","slots","slotProps","skipAnimation","loading","layout","onItemClick","highlightedItem","onHighlightChange","borderRadius","barLabel","className","hideLegend","showToolbar"],hce=n=>{var ae,ye,pe,ie,Ve;const{xAxis:e,yAxis:t,series:r,width:i,height:a,margin:s,colors:o,dataset:c,sx:d,axisHighlight:f,grid:p,children:g,slots:m,slotProps:x,skipAnimation:b,loading:A,layout:E,onItemClick:C,highlightedItem:T,onHighlightChange:D,borderRadius:k,barLabel:B,className:O}=n,I=Be(n,fce),F=`${N0()}-clip-path`,N=E==="horizontal"||E===void 0&&r.some(we=>we.layout==="horizontal"),P=M.useMemo(()=>[{id:L_,scaleType:"band",data:Array.from({length:Math.max(...r.map(we=>(we.data??c??[]).length))},(we,ze)=>ze)}],[c,r]),V=M.useMemo(()=>[{id:B_,scaleType:"band",data:Array.from({length:Math.max(...r.map(we=>(we.data??c??[]).length))},(we,ze)=>ze)}],[c,r]),q=M.useMemo(()=>r.map(we=>H({type:"bar"},we,{layout:N?"horizontal":"vertical"})),[N,r]),X=N?void 0:P,G=M.useMemo(()=>e?N?e:e.map(we=>H({scaleType:"band"},we)):X,[X,N,e]),W=N?V:void 0,K=M.useMemo(()=>t?N?t.map(we=>H({scaleType:"band"},we)):t:W,[W,N,t]),Z=H({},I,{series:q,width:i,height:a,margin:s,colors:o,dataset:c,xAxis:G,yAxis:K,highlightedItem:T,onHighlightChange:D,disableAxisListener:((ae=x==null?void 0:x.tooltip)==null?void 0:ae.trigger)!=="axis"&&(f==null?void 0:f.x)==="none"&&(f==null?void 0:f.y)==="none",className:O,skipAnimation:b,plugins:dce}),fe={onItemClick:C,slots:m,slotProps:x,borderRadius:k,barLabel:B},ge={vertical:p==null?void 0:p.vertical,horizontal:p==null?void 0:p.horizontal},ve={clipPath:`url(#${F})`},be={id:F},Pe={slots:m,slotProps:x,loading:A},ue={slots:m,slotProps:x},Se=H({},N?{y:"band"}:{x:"band"},f),Ae={slots:m,slotProps:x};return{chartsWrapperProps:{sx:d,legendPosition:(pe=(ye=n.slotProps)==null?void 0:ye.legend)==null?void 0:pe.position,legendDirection:(Ve=(ie=n.slotProps)==null?void 0:ie.legend)==null?void 0:Ve.direction},chartContainerProps:Z,barPlotProps:fe,gridProps:ge,clipPathProps:be,clipPathGroupProps:ve,overlayProps:Pe,chartsAxisProps:ue,axisHighlightProps:Se,legendProps:Ae,children:g}},pce={baseButton:$e,baseIconButton:$r},gce={},mce=H({},pce,gce),yce=M.createContext(null);function vce(n){const{slots:e,slotProps:t={},defaultSlots:r,children:i}=n,a=M.useMemo(()=>({slots:H({},r,e),slotProps:t}),[r,e,t]);return v.jsx(yce.Provider,{value:a,children:i})}const bo=11102230246251565e-32,fi=134217729,xce=(3+8*bo)*bo;function O2(n,e,t,r,i){let a,s,o,c,d=e[0],f=r[0],p=0,g=0;f>d==f>-d?(a=d,d=e[++p]):(a=f,f=r[++g]);let m=0;if(p<n&&g<t)for(f>d==f>-d?(s=d+a,o=a-(s-d),d=e[++p]):(s=f+a,o=a-(s-f),f=r[++g]),a=s,o!==0&&(i[m++]=o);p<n&&g<t;)f>d==f>-d?(s=a+d,c=s-a,o=a-(s-c)+(d-c),d=e[++p]):(s=a+f,c=s-a,o=a-(s-c)+(f-c),f=r[++g]),a=s,o!==0&&(i[m++]=o);for(;p<n;)s=a+d,c=s-a,o=a-(s-c)+(d-c),d=e[++p],a=s,o!==0&&(i[m++]=o);for(;g<t;)s=a+f,c=s-a,o=a-(s-c)+(f-c),f=r[++g],a=s,o!==0&&(i[m++]=o);return(a!==0||m===0)&&(i[m++]=a),m}function wce(n,e){let t=e[0];for(let r=1;r<n;r++)t+=e[r];return t}function dp(n){return new Float64Array(n)}const bce=(3+16*bo)*bo,_ce=(2+12*bo)*bo,Ace=(9+64*bo)*bo*bo,fd=dp(4),K3=dp(8),Q3=dp(12),Z3=dp(16),Ii=dp(4);function Ece(n,e,t,r,i,a,s){let o,c,d,f,p,g,m,x,b,A,E,C,T,D,k,B,O,I;const R=n-i,F=t-i,N=e-a,P=r-a;D=R*P,g=fi*R,m=g-(g-R),x=R-m,g=fi*P,b=g-(g-P),A=P-b,k=x*A-(D-m*b-x*b-m*A),B=N*F,g=fi*N,m=g-(g-N),x=N-m,g=fi*F,b=g-(g-F),A=F-b,O=x*A-(B-m*b-x*b-m*A),E=k-O,p=k-E,fd[0]=k-(E+p)+(p-O),C=D+E,p=C-D,T=D-(C-p)+(E-p),E=T-B,p=T-E,fd[1]=T-(E+p)+(p-B),I=C+E,p=I-C,fd[2]=C-(I-p)+(E-p),fd[3]=I;let V=wce(4,fd),q=_ce*s;if(V>=q||-V>=q||(p=n-R,o=n-(R+p)+(p-i),p=t-F,d=t-(F+p)+(p-i),p=e-N,c=e-(N+p)+(p-a),p=r-P,f=r-(P+p)+(p-a),o===0&&c===0&&d===0&&f===0)||(q=Ace*s+xce*Math.abs(V),V+=R*f+P*o-(N*d+F*c),V>=q||-V>=q))return V;D=o*P,g=fi*o,m=g-(g-o),x=o-m,g=fi*P,b=g-(g-P),A=P-b,k=x*A-(D-m*b-x*b-m*A),B=c*F,g=fi*c,m=g-(g-c),x=c-m,g=fi*F,b=g-(g-F),A=F-b,O=x*A-(B-m*b-x*b-m*A),E=k-O,p=k-E,Ii[0]=k-(E+p)+(p-O),C=D+E,p=C-D,T=D-(C-p)+(E-p),E=T-B,p=T-E,Ii[1]=T-(E+p)+(p-B),I=C+E,p=I-C,Ii[2]=C-(I-p)+(E-p),Ii[3]=I;const X=O2(4,fd,4,Ii,K3);D=R*f,g=fi*R,m=g-(g-R),x=R-m,g=fi*f,b=g-(g-f),A=f-b,k=x*A-(D-m*b-x*b-m*A),B=N*d,g=fi*N,m=g-(g-N),x=N-m,g=fi*d,b=g-(g-d),A=d-b,O=x*A-(B-m*b-x*b-m*A),E=k-O,p=k-E,Ii[0]=k-(E+p)+(p-O),C=D+E,p=C-D,T=D-(C-p)+(E-p),E=T-B,p=T-E,Ii[1]=T-(E+p)+(p-B),I=C+E,p=I-C,Ii[2]=C-(I-p)+(E-p),Ii[3]=I;const G=O2(X,K3,4,Ii,Q3);D=o*f,g=fi*o,m=g-(g-o),x=o-m,g=fi*f,b=g-(g-f),A=f-b,k=x*A-(D-m*b-x*b-m*A),B=c*d,g=fi*c,m=g-(g-c),x=c-m,g=fi*d,b=g-(g-d),A=d-b,O=x*A-(B-m*b-x*b-m*A),E=k-O,p=k-E,Ii[0]=k-(E+p)+(p-O),C=D+E,p=C-D,T=D-(C-p)+(E-p),E=T-B,p=T-E,Ii[1]=T-(E+p)+(p-B),I=C+E,p=I-C,Ii[2]=C-(I-p)+(E-p),Ii[3]=I;const W=O2(G,Q3,4,Ii,Z3);return Z3[W-1]}function am(n,e,t,r,i,a){const s=(e-a)*(t-i),o=(n-i)*(r-a),c=s-o,d=Math.abs(s+o);return Math.abs(c)>=bce*d?c:-Ece(n,e,t,r,i,a,d)}const J3=Math.pow(2,-52),sm=new Uint32Array(512);class I1{static from(e,t=Dce,r=Rce){const i=e.length,a=new Float64Array(i*2);for(let s=0;s<i;s++){const o=e[s];a[2*s]=t(o),a[2*s+1]=r(o)}return new I1(a)}constructor(e){const t=e.length>>1;if(t>0&&typeof e[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=e;const r=Math.max(2*t-5,0);this._triangles=new Uint32Array(r*3),this._halfedges=new Int32Array(r*3),this._hashSize=Math.ceil(Math.sqrt(t)),this._hullPrev=new Uint32Array(t),this._hullNext=new Uint32Array(t),this._hullTri=new Uint32Array(t),this._hullHash=new Int32Array(this._hashSize),this._ids=new Uint32Array(t),this._dists=new Float64Array(t),this.update()}update(){const{coords:e,_hullPrev:t,_hullNext:r,_hullTri:i,_hullHash:a}=this,s=e.length>>1;let o=1/0,c=1/0,d=-1/0,f=-1/0;for(let R=0;R<s;R++){const F=e[2*R],N=e[2*R+1];F<o&&(o=F),N<c&&(c=N),F>d&&(d=F),N>f&&(f=N),this._ids[R]=R}const p=(o+d)/2,g=(c+f)/2;let m,x,b;for(let R=0,F=1/0;R<s;R++){const N=P2(p,g,e[2*R],e[2*R+1]);N<F&&(m=R,F=N)}const A=e[2*m],E=e[2*m+1];for(let R=0,F=1/0;R<s;R++){if(R===m)continue;const N=P2(A,E,e[2*R],e[2*R+1]);N<F&&N>0&&(x=R,F=N)}let C=e[2*x],T=e[2*x+1],D=1/0;for(let R=0;R<s;R++){if(R===m||R===x)continue;const F=Tce(A,E,C,T,e[2*R],e[2*R+1]);F<D&&(b=R,D=F)}let k=e[2*b],B=e[2*b+1];if(D===1/0){for(let N=0;N<s;N++)this._dists[N]=e[2*N]-e[0]||e[2*N+1]-e[1];Dd(this._ids,this._dists,0,s-1);const R=new Uint32Array(s);let F=0;for(let N=0,P=-1/0;N<s;N++){const V=this._ids[N],q=this._dists[V];q>P&&(R[F++]=V,P=q)}this.hull=R.subarray(0,F),this.triangles=new Uint32Array(0),this.halfedges=new Uint32Array(0);return}if(am(A,E,C,T,k,B)<0){const R=x,F=C,N=T;x=b,C=k,T=B,b=R,k=F,B=N}const O=Ice(A,E,C,T,k,B);this._cx=O.x,this._cy=O.y;for(let R=0;R<s;R++)this._dists[R]=P2(e[2*R],e[2*R+1],O.x,O.y);Dd(this._ids,this._dists,0,s-1),this._hullStart=m;let I=3;r[m]=t[b]=x,r[x]=t[m]=b,r[b]=t[x]=m,i[m]=0,i[x]=1,i[b]=2,a.fill(-1),a[this._hashKey(A,E)]=m,a[this._hashKey(C,T)]=x,a[this._hashKey(k,B)]=b,this.trianglesLen=0,this._addTriangle(m,x,b,-1,-1,-1);for(let R=0,F,N;R<this._ids.length;R++){const P=this._ids[R],V=e[2*P],q=e[2*P+1];if(R>0&&Math.abs(V-F)<=J3&&Math.abs(q-N)<=J3||(F=V,N=q,P===m||P===x||P===b))continue;let X=0;for(let fe=0,ge=this._hashKey(V,q);fe<this._hashSize&&(X=a[(ge+fe)%this._hashSize],!(X!==-1&&X!==r[X]));fe++);X=t[X];let G=X,W;for(;W=r[G],am(V,q,e[2*G],e[2*G+1],e[2*W],e[2*W+1])>=0;)if(G=W,G===X){G=-1;break}if(G===-1)continue;let K=this._addTriangle(G,P,r[G],-1,-1,i[G]);i[P]=this._legalize(K+2),i[G]=K,I++;let Z=r[G];for(;W=r[Z],am(V,q,e[2*Z],e[2*Z+1],e[2*W],e[2*W+1])<0;)K=this._addTriangle(Z,P,W,i[P],-1,i[Z]),i[P]=this._legalize(K+2),r[Z]=Z,I--,Z=W;if(G===X)for(;W=t[G],am(V,q,e[2*W],e[2*W+1],e[2*G],e[2*G+1])<0;)K=this._addTriangle(W,P,G,-1,i[G],i[W]),this._legalize(K+2),i[W]=K,r[G]=G,I--,G=W;this._hullStart=t[P]=G,r[G]=t[Z]=P,r[P]=Z,a[this._hashKey(V,q)]=P,a[this._hashKey(e[2*G],e[2*G+1])]=G}this.hull=new Uint32Array(I);for(let R=0,F=this._hullStart;R<I;R++)this.hull[R]=F,F=r[F];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(e,t){return Math.floor(Sce(e-this._cx,t-this._cy)*this._hashSize)%this._hashSize}_legalize(e){const{_triangles:t,_halfedges:r,coords:i}=this;let a=0,s=0;for(;;){const o=r[e],c=e-e%3;if(s=c+(e+2)%3,o===-1){if(a===0)break;e=sm[--a];continue}const d=o-o%3,f=c+(e+1)%3,p=d+(o+2)%3,g=t[s],m=t[e],x=t[f],b=t[p];if(Cce(i[2*g],i[2*g+1],i[2*m],i[2*m+1],i[2*x],i[2*x+1],i[2*b],i[2*b+1])){t[e]=b,t[o]=g;const E=r[p];if(E===-1){let T=this._hullStart;do{if(this._hullTri[T]===p){this._hullTri[T]=e;break}T=this._hullPrev[T]}while(T!==this._hullStart)}this._link(e,E),this._link(o,r[s]),this._link(s,p);const C=d+(o+1)%3;a<sm.length&&(sm[a++]=C)}else{if(a===0)break;e=sm[--a]}}return s}_link(e,t){this._halfedges[e]=t,t!==-1&&(this._halfedges[t]=e)}_addTriangle(e,t,r,i,a,s){const o=this.trianglesLen;return this._triangles[o]=e,this._triangles[o+1]=t,this._triangles[o+2]=r,this._link(o,i),this._link(o+1,a),this._link(o+2,s),this.trianglesLen+=3,o}}function Sce(n,e){const t=n/(Math.abs(n)+Math.abs(e));return(e>0?3-t:1+t)/4}function P2(n,e,t,r){const i=n-t,a=e-r;return i*i+a*a}function Cce(n,e,t,r,i,a,s,o){const c=n-s,d=e-o,f=t-s,p=r-o,g=i-s,m=a-o,x=c*c+d*d,b=f*f+p*p,A=g*g+m*m;return c*(p*A-b*m)-d*(f*A-b*g)+x*(f*m-p*g)<0}function Tce(n,e,t,r,i,a){const s=t-n,o=r-e,c=i-n,d=a-e,f=s*s+o*o,p=c*c+d*d,g=.5/(s*d-o*c),m=(d*f-o*p)*g,x=(s*p-c*f)*g;return m*m+x*x}function Ice(n,e,t,r,i,a){const s=t-n,o=r-e,c=i-n,d=a-e,f=s*s+o*o,p=c*c+d*d,g=.5/(s*d-o*c),m=n+(d*f-o*p)*g,x=e+(s*p-c*f)*g;return{x:m,y:x}}function Dd(n,e,t,r){if(r-t<=20)for(let i=t+1;i<=r;i++){const a=n[i],s=e[a];let o=i-1;for(;o>=t&&e[n[o]]>s;)n[o+1]=n[o--];n[o+1]=a}else{const i=t+r>>1;let a=t+1,s=r;Vh(n,i,a),e[n[t]]>e[n[r]]&&Vh(n,t,r),e[n[a]]>e[n[r]]&&Vh(n,a,r),e[n[t]]>e[n[a]]&&Vh(n,t,a);const o=n[a],c=e[o];for(;;){do a++;while(e[n[a]]<c);do s--;while(e[n[s]]>c);if(s<a)break;Vh(n,a,s)}n[t+1]=n[s],n[s]=o,r-a+1>=s-t?(Dd(n,e,a,r),Dd(n,e,t,s-1)):(Dd(n,e,t,s-1),Dd(n,e,a,r))}}function Vh(n,e,t){const r=n[e];n[e]=n[t],n[t]=r}function Dce(n){return n[0]}function Rce(n){return n[1]}const eR=1e-6;class $c{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(e,t){this._+=`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(e,t){this._+=`L${this._x1=+e},${this._y1=+t}`}arc(e,t,r){e=+e,t=+t,r=+r;const i=e+r,a=t;if(r<0)throw new Error("negative radius");this._x1===null?this._+=`M${i},${a}`:(Math.abs(this._x1-i)>eR||Math.abs(this._y1-a)>eR)&&(this._+="L"+i+","+a),r&&(this._+=`A${r},${r},0,1,1,${e-r},${t}A${r},${r},0,1,1,${this._x1=i},${this._y1=a}`)}rect(e,t,r,i){this._+=`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}h${+r}v${+i}h${-r}Z`}value(){return this._||null}}class Kw{constructor(){this._=[]}moveTo(e,t){this._.push([e,t])}closePath(){this._.push(this._[0].slice())}lineTo(e,t){this._.push([e,t])}value(){return this._.length?this._:null}}class Mce{constructor(e,[t,r,i,a]=[0,0,960,500]){if(!((i=+i)>=(t=+t))||!((a=+a)>=(r=+r)))throw new Error("invalid bounds");this.delaunay=e,this._circumcenters=new Float64Array(e.points.length*2),this.vectors=new Float64Array(e.points.length*2),this.xmax=i,this.xmin=t,this.ymax=a,this.ymin=r,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:e,hull:t,triangles:r},vectors:i}=this;let a,s;const o=this.circumcenters=this._circumcenters.subarray(0,r.length/3*2);for(let b=0,A=0,E=r.length,C,T;b<E;b+=3,A+=2){const D=r[b]*2,k=r[b+1]*2,B=r[b+2]*2,O=e[D],I=e[D+1],R=e[k],F=e[k+1],N=e[B],P=e[B+1],V=R-O,q=F-I,X=N-O,G=P-I,W=(V*G-q*X)*2;if(Math.abs(W)<1e-9){if(a===void 0){a=s=0;for(const Z of t)a+=e[Z*2],s+=e[Z*2+1];a/=t.length,s/=t.length}const K=1e9*Math.sign((a-O)*G-(s-I)*X);C=(O+N)/2-K*G,T=(I+P)/2+K*X}else{const K=1/W,Z=V*V+q*q,fe=X*X+G*G;C=O+(G*Z-q*fe)*K,T=I+(V*fe-X*Z)*K}o[A]=C,o[A+1]=T}let c=t[t.length-1],d,f=c*4,p,g=e[2*c],m,x=e[2*c+1];i.fill(0);for(let b=0;b<t.length;++b)c=t[b],d=f,p=g,m=x,f=c*4,g=e[2*c],x=e[2*c+1],i[d+2]=i[f]=m-x,i[d+3]=i[f+1]=g-p}render(e){const t=e==null?e=new $c:void 0,{delaunay:{halfedges:r,inedges:i,hull:a},circumcenters:s,vectors:o}=this;if(a.length<=1)return null;for(let f=0,p=r.length;f<p;++f){const g=r[f];if(g<f)continue;const m=Math.floor(f/3)*2,x=Math.floor(g/3)*2,b=s[m],A=s[m+1],E=s[x],C=s[x+1];this._renderSegment(b,A,E,C,e)}let c,d=a[a.length-1];for(let f=0;f<a.length;++f){c=d,d=a[f];const p=Math.floor(i[d]/3)*2,g=s[p],m=s[p+1],x=c*4,b=this._project(g,m,o[x+2],o[x+3]);b&&this._renderSegment(g,m,b[0],b[1],e)}return t&&t.value()}renderBounds(e){const t=e==null?e=new $c:void 0;return e.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),t&&t.value()}renderCell(e,t){const r=t==null?t=new $c:void 0,i=this._clip(e);if(i===null||!i.length)return;t.moveTo(i[0],i[1]);let a=i.length;for(;i[0]===i[a-2]&&i[1]===i[a-1]&&a>1;)a-=2;for(let s=2;s<a;s+=2)(i[s]!==i[s-2]||i[s+1]!==i[s-1])&&t.lineTo(i[s],i[s+1]);return t.closePath(),r&&r.value()}*cellPolygons(){const{delaunay:{points:e}}=this;for(let t=0,r=e.length/2;t<r;++t){const i=this.cellPolygon(t);i&&(i.index=t,yield i)}}cellPolygon(e){const t=new Kw;return this.renderCell(e,t),t.value()}_renderSegment(e,t,r,i,a){let s;const o=this._regioncode(e,t),c=this._regioncode(r,i);o===0&&c===0?(a.moveTo(e,t),a.lineTo(r,i)):(s=this._clipSegment(e,t,r,i,o,c))&&(a.moveTo(s[0],s[1]),a.lineTo(s[2],s[3]))}contains(e,t,r){return t=+t,t!==t||(r=+r,r!==r)?!1:this.delaunay._step(e,t,r)===e}*neighbors(e){const t=this._clip(e);if(t)for(const r of this.delaunay.neighbors(e)){const i=this._clip(r);if(i){e:for(let a=0,s=t.length;a<s;a+=2)for(let o=0,c=i.length;o<c;o+=2)if(t[a]===i[o]&&t[a+1]===i[o+1]&&t[(a+2)%s]===i[(o+c-2)%c]&&t[(a+3)%s]===i[(o+c-1)%c]){yield r;break e}}}}_cell(e){const{circumcenters:t,delaunay:{inedges:r,halfedges:i,triangles:a}}=this,s=r[e];if(s===-1)return null;const o=[];let c=s;do{const d=Math.floor(c/3);if(o.push(t[d*2],t[d*2+1]),c=c%3===2?c-2:c+1,a[c]!==e)break;c=i[c]}while(c!==s&&c!==-1);return o}_clip(e){if(e===0&&this.delaunay.hull.length===1)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const t=this._cell(e);if(t===null)return null;const{vectors:r}=this,i=e*4;return this._simplify(r[i]||r[i+1]?this._clipInfinite(e,t,r[i],r[i+1],r[i+2],r[i+3]):this._clipFinite(e,t))}_clipFinite(e,t){const r=t.length;let i=null,a,s,o=t[r-2],c=t[r-1],d,f=this._regioncode(o,c),p,g=0;for(let m=0;m<r;m+=2)if(a=o,s=c,o=t[m],c=t[m+1],d=f,f=this._regioncode(o,c),d===0&&f===0)p=g,g=0,i?i.push(o,c):i=[o,c];else{let x,b,A,E,C;if(d===0){if((x=this._clipSegment(a,s,o,c,d,f))===null)continue;[b,A,E,C]=x}else{if((x=this._clipSegment(o,c,a,s,f,d))===null)continue;[E,C,b,A]=x,p=g,g=this._edgecode(b,A),p&&g&&this._edge(e,p,g,i,i.length),i?i.push(b,A):i=[b,A]}p=g,g=this._edgecode(E,C),p&&g&&this._edge(e,p,g,i,i.length),i?i.push(E,C):i=[E,C]}if(i)p=g,g=this._edgecode(i[0],i[1]),p&&g&&this._edge(e,p,g,i,i.length);else if(this.contains(e,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return i}_clipSegment(e,t,r,i,a,s){const o=a<s;for(o&&([e,t,r,i,a,s]=[r,i,e,t,s,a]);;){if(a===0&&s===0)return o?[r,i,e,t]:[e,t,r,i];if(a&s)return null;let c,d,f=a||s;f&8?(c=e+(r-e)*(this.ymax-t)/(i-t),d=this.ymax):f&4?(c=e+(r-e)*(this.ymin-t)/(i-t),d=this.ymin):f&2?(d=t+(i-t)*(this.xmax-e)/(r-e),c=this.xmax):(d=t+(i-t)*(this.xmin-e)/(r-e),c=this.xmin),a?(e=c,t=d,a=this._regioncode(e,t)):(r=c,i=d,s=this._regioncode(r,i))}}_clipInfinite(e,t,r,i,a,s){let o=Array.from(t),c;if((c=this._project(o[0],o[1],r,i))&&o.unshift(c[0],c[1]),(c=this._project(o[o.length-2],o[o.length-1],a,s))&&o.push(c[0],c[1]),o=this._clipFinite(e,o))for(let d=0,f=o.length,p,g=this._edgecode(o[f-2],o[f-1]);d<f;d+=2)p=g,g=this._edgecode(o[d],o[d+1]),p&&g&&(d=this._edge(e,p,g,o,d),f=o.length);else this.contains(e,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(o=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return o}_edge(e,t,r,i,a){for(;t!==r;){let s,o;switch(t){case 5:t=4;continue;case 4:t=6,s=this.xmax,o=this.ymin;break;case 6:t=2;continue;case 2:t=10,s=this.xmax,o=this.ymax;break;case 10:t=8;continue;case 8:t=9,s=this.xmin,o=this.ymax;break;case 9:t=1;continue;case 1:t=5,s=this.xmin,o=this.ymin;break}(i[a]!==s||i[a+1]!==o)&&this.contains(e,s,o)&&(i.splice(a,0,s,o),a+=2)}return a}_project(e,t,r,i){let a=1/0,s,o,c;if(i<0){if(t<=this.ymin)return null;(s=(this.ymin-t)/i)<a&&(c=this.ymin,o=e+(a=s)*r)}else if(i>0){if(t>=this.ymax)return null;(s=(this.ymax-t)/i)<a&&(c=this.ymax,o=e+(a=s)*r)}if(r>0){if(e>=this.xmax)return null;(s=(this.xmax-e)/r)<a&&(o=this.xmax,c=t+(a=s)*i)}else if(r<0){if(e<=this.xmin)return null;(s=(this.xmin-e)/r)<a&&(o=this.xmin,c=t+(a=s)*i)}return[o,c]}_edgecode(e,t){return(e===this.xmin?1:e===this.xmax?2:0)|(t===this.ymin?4:t===this.ymax?8:0)}_regioncode(e,t){return(e<this.xmin?1:e>this.xmax?2:0)|(t<this.ymin?4:t>this.ymax?8:0)}_simplify(e){if(e&&e.length>4){for(let t=0;t<e.length;t+=2){const r=(t+2)%e.length,i=(t+4)%e.length;(e[t]===e[r]&&e[r]===e[i]||e[t+1]===e[r+1]&&e[r+1]===e[i+1])&&(e.splice(r,2),t-=2)}e.length||(e=null)}return e}}const Oce=2*Math.PI,hd=Math.pow;function Pce(n){return n[0]}function kce(n){return n[1]}function Nce(n){const{triangles:e,coords:t}=n;for(let r=0;r<e.length;r+=3){const i=2*e[r],a=2*e[r+1],s=2*e[r+2];if((t[s]-t[i])*(t[a+1]-t[i+1])-(t[a]-t[i])*(t[s+1]-t[i+1])>1e-10)return!1}return!0}function Lce(n,e,t){return[n+Math.sin(n+e)*t,e+Math.cos(n-e)*t]}class AA{static from(e,t=Pce,r=kce,i){return new AA("length"in e?Bce(e,t,r,i):Float64Array.from(Fce(e,t,r,i)))}constructor(e){this._delaunator=new I1(e),this.inedges=new Int32Array(e.length/2),this._hullIndex=new Int32Array(e.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const e=this._delaunator,t=this.points;if(e.hull&&e.hull.length>2&&Nce(e)){this.collinear=Int32Array.from({length:t.length/2},(g,m)=>m).sort((g,m)=>t[2*g]-t[2*m]||t[2*g+1]-t[2*m+1]);const c=this.collinear[0],d=this.collinear[this.collinear.length-1],f=[t[2*c],t[2*c+1],t[2*d],t[2*d+1]],p=1e-8*Math.hypot(f[3]-f[1],f[2]-f[0]);for(let g=0,m=t.length/2;g<m;++g){const x=Lce(t[2*g],t[2*g+1],p);t[2*g]=x[0],t[2*g+1]=x[1]}this._delaunator=new I1(t)}else delete this.collinear;const r=this.halfedges=this._delaunator.halfedges,i=this.hull=this._delaunator.hull,a=this.triangles=this._delaunator.triangles,s=this.inedges.fill(-1),o=this._hullIndex.fill(-1);for(let c=0,d=r.length;c<d;++c){const f=a[c%3===2?c-2:c+1];(r[c]===-1||s[f]===-1)&&(s[f]=c)}for(let c=0,d=i.length;c<d;++c)o[i[c]]=c;i.length<=2&&i.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=i[0],s[i[0]]=1,i.length===2&&(s[i[1]]=0,this.triangles[1]=i[1],this.triangles[2]=i[1]))}voronoi(e){return new Mce(this,e)}*neighbors(e){const{inedges:t,hull:r,_hullIndex:i,halfedges:a,triangles:s,collinear:o}=this;if(o){const p=o.indexOf(e);p>0&&(yield o[p-1]),p<o.length-1&&(yield o[p+1]);return}const c=t[e];if(c===-1)return;let d=c,f=-1;do{if(yield f=s[d],d=d%3===2?d-2:d+1,s[d]!==e)return;if(d=a[d],d===-1){const p=r[(i[e]+1)%r.length];p!==f&&(yield p);return}}while(d!==c)}find(e,t,r=0){if(e=+e,e!==e||(t=+t,t!==t))return-1;const i=r;let a;for(;(a=this._step(r,e,t))>=0&&a!==r&&a!==i;)r=a;return a}_step(e,t,r){const{inedges:i,hull:a,_hullIndex:s,halfedges:o,triangles:c,points:d}=this;if(i[e]===-1||!d.length)return(e+1)%(d.length>>1);let f=e,p=hd(t-d[e*2],2)+hd(r-d[e*2+1],2);const g=i[e];let m=g;do{let x=c[m];const b=hd(t-d[x*2],2)+hd(r-d[x*2+1],2);if(b<p&&(p=b,f=x),m=m%3===2?m-2:m+1,c[m]!==e)break;if(m=o[m],m===-1){if(m=a[(s[e]+1)%a.length],m!==x&&hd(t-d[m*2],2)+hd(r-d[m*2+1],2)<p)return m;break}}while(m!==g);return f}render(e){const t=e==null?e=new $c:void 0,{points:r,halfedges:i,triangles:a}=this;for(let s=0,o=i.length;s<o;++s){const c=i[s];if(c<s)continue;const d=a[s]*2,f=a[c]*2;e.moveTo(r[d],r[d+1]),e.lineTo(r[f],r[f+1])}return this.renderHull(e),t&&t.value()}renderPoints(e,t){t===void 0&&(!e||typeof e.moveTo!="function")&&(t=e,e=null),t=t==null?2:+t;const r=e==null?e=new $c:void 0,{points:i}=this;for(let a=0,s=i.length;a<s;a+=2){const o=i[a],c=i[a+1];e.moveTo(o+t,c),e.arc(o,c,t,0,Oce)}return r&&r.value()}renderHull(e){const t=e==null?e=new $c:void 0,{hull:r,points:i}=this,a=r[0]*2,s=r.length;e.moveTo(i[a],i[a+1]);for(let o=1;o<s;++o){const c=2*r[o];e.lineTo(i[c],i[c+1])}return e.closePath(),t&&t.value()}hullPolygon(){const e=new Kw;return this.renderHull(e),e.value()}renderTriangle(e,t){const r=t==null?t=new $c:void 0,{points:i,triangles:a}=this,s=a[e*=3]*2,o=a[e+1]*2,c=a[e+2]*2;return t.moveTo(i[s],i[s+1]),t.lineTo(i[o],i[o+1]),t.lineTo(i[c],i[c+1]),t.closePath(),r&&r.value()}*trianglePolygons(){const{triangles:e}=this;for(let t=0,r=e.length/3;t<r;++t)yield this.trianglePolygon(t)}trianglePolygon(e){const t=new Kw;return this.renderTriangle(e,t),t.value()}}function Bce(n,e,t,r){const i=n.length,a=new Float64Array(i*2);for(let s=0;s<i;++s){const o=n[s];a[s*2]=e.call(r,o,s,n),a[s*2+1]=t.call(r,o,s,n)}return a}function*Fce(n,e,t,r){let i=0;for(const a of n)yield e.call(r,a,i,n),yield t.call(r,a,i,n),++i}const By=({svgRef:n,params:e,store:t,instance:r})=>{var B;const{disableVoronoi:i,voronoiMaxRadius:a,onItemClick:s}=e,o=pt(t,Oo),{axis:c,axisIds:d}=pt(t,oa),{axis:f,axisIds:p}=pt(t,la),g=pt(t,Pk),{series:m,seriesOrder:x}=((B=pt(t,es))==null?void 0:B.scatter)??{},b=M.useRef({}),A=M.useRef(void 0),E=M.useRef(void 0),C=d[0],T=p[0];Xn(()=>{t.update(O=>O.voronoi.isVoronoiEnabled===!i?O:H({},O,{voronoi:{isVoronoiEnabled:!i}}))},[t,i]),Xn(()=>{if(g||x===void 0||m===void 0||i)return;b.current={};let O=[];x.forEach(I=>{const{data:R,xAxisId:F,yAxisId:N}=m[I],P=c[F??C].scale,V=f[N??T].scale,q=b1(P),X=b1(V),G=[],W=[];for(let K=0;K<R.length;K+=1){const{x:Z,y:fe}=R[K],ge=q(Z),ve=X(fe);r.isPointInside(ge,ve)&&(G.push(ge),G.push(ve),W.push(K))}b.current[I]={seriesId:I,seriesIndexes:W,startIndex:O.length,endIndex:O.length+G.length},O=O.concat(G)}),A.current=new AA(O),E.current=void 0},[g,C,T,m,x,c,f,o,r,i]),M.useEffect(()=>{if(n.current===null||i)return;const O=n.current;function I(W){const K=Vw(O,W);if(!r.isPointInside(K.x,K.y))return E.current=void 0,"outside-chart";if(!A.current)return"no-point-found";const Z=A.current.find(K.x,K.y,E.current);if(Z===void 0)return"no-point-found";E.current=Z;const fe=Object.values(b.current).find(be=>2*Z>=be.startIndex&&2*Z<be.endIndex);if(fe===void 0)return"no-point-found";const ge=(2*Z-b.current[fe.seriesId].startIndex)/2,ve=b.current[fe.seriesId].seriesIndexes[ge];if(a!==void 0){const be=A.current.points[2*Z],Pe=A.current.points[2*Z+1];if((be-K.x)**2+(Pe-K.y)**2>a**2)return"outside-voronoi-max-radius"}return{seriesId:fe.seriesId,dataIndex:ve}}const R=r.addInteractionListener("moveEnd",W=>{var K,Z;W.detail.activeGestures.pan||((K=r.cleanInteraction)==null||K.call(r),(Z=r.clearHighlight)==null||Z.call(r))}),F=r.addInteractionListener("panEnd",W=>{var K,Z;W.detail.activeGestures.move||((K=r.cleanInteraction)==null||K.call(r),(Z=r.clearHighlight)==null||Z.call(r))}),N=r.addInteractionListener("quickPressEnd",W=>{var K,Z;!W.detail.activeGestures.move&&!W.detail.activeGestures.pan&&((K=r.cleanInteraction)==null||K.call(r),(Z=r.clearHighlight)==null||Z.call(r))}),P=W=>{var ge,ve,be,Pe,ue,Se;const K=I(W.detail.srcEvent);if(K==="outside-chart"){(ge=r.cleanInteraction)==null||ge.call(r),(ve=r.clearHighlight)==null||ve.call(r);return}if(K==="outside-voronoi-max-radius"||K==="no-point-found"){(be=r.removeItemInteraction)==null||be.call(r),(Pe=r.clearHighlight)==null||Pe.call(r);return}const{seriesId:Z,dataIndex:fe}=K;(ue=r.setItemInteraction)==null||ue.call(r,{type:"scatter",seriesId:Z,dataIndex:fe}),(Se=r.setHighlight)==null||Se.call(r,{seriesId:Z,dataIndex:fe})},V=r.addInteractionListener("tap",W=>{const K=I(W.detail.srcEvent);if(typeof K!="string"&&s){const{seriesId:Z,dataIndex:fe}=K;s(W.detail.srcEvent,{type:"scatter",seriesId:Z,dataIndex:fe})}}),q=r.addInteractionListener("move",P),X=r.addInteractionListener("pan",P),G=r.addInteractionListener("quickPress",P);return()=>{V.cleanup(),q.cleanup(),R.cleanup(),X.cleanup(),F.cleanup(),G.cleanup(),N.cleanup()}},[n,f,c,a,s,i,o,r]);const D=He(()=>{t.update(O=>H({},O,{voronoi:H({},O.voronoi,{isVoronoiEnabled:!0})}))}),k=He(()=>{t.update(O=>H({},O,{voronoi:H({},O.voronoi,{isVoronoiEnabled:!1})}))});return{instance:{enableVoronoi:D,disableVoronoi:k}}};By.getDefaultizedParams=({params:n})=>H({},n,{disableVoronoi:n.disableVoronoi??!n.series.some(e=>e.type==="scatter")});By.getInitialState=n=>({voronoi:{isVoronoiEnabled:!n.disableVoronoi}});By.params={disableVoronoi:!0,voronoiMaxRadius:!0,onItemClick:!0};const Y8=[op,Ef,Af,pu,By],Vce=["children","localeText","plugins","seriesConfig","slots","slotProps"],jce=n=>{const e=bt({props:n,name:"MuiChartDataProvider"}),{children:t,localeText:r,plugins:i=Y8,seriesConfig:a,slots:s,slotProps:o}=e,c=Be(e,Vce),d=ru(),f={plugins:i,seriesConfig:a,pluginParams:H({theme:d.palette.mode},c)};return{children:t,localeText:r,chartProviderProps:f,slots:s,slotProps:o}};function q8(n){const{children:e,localeText:t,chartProviderProps:r,slots:i,slotProps:a}=jce(n);return v.jsx($ae,H({},r,{children:v.jsx(Xse,{localeText:t,children:v.jsx(vce,{slots:i,slotProps:a,defaultSlots:mce,children:e})})}))}function tR(n){const{isReversed:e,gradientId:t,size:r,direction:i,scale:a,colorMap:s}=n;return r<=0?null:v.jsx("linearGradient",{id:t,x1:"0",x2:"0",y1:"0",y2:"0",[`${i}${e?1:2}`]:`${r}px`,gradientUnits:"userSpaceOnUse",children:s.thresholds.map((o,c)=>{const d=a(o);if(d===void 0)return null;const f=e?1-d/r:d/r;return Number.isNaN(f)?null:v.jsxs(M.Fragment,{children:[v.jsx("stop",{offset:f,stopColor:s.colors[c],stopOpacity:1}),v.jsx("stop",{offset:f,stopColor:s.colors[c+1],stopOpacity:1})]},o.toString()+c)})})}const Uce=10;function nR(n){const{gradientUnits:e,isReversed:t,gradientId:r,size:i,direction:a,scale:s,colorScale:o,colorMap:c}=n,d=[c.min??0,c.max??100],f=d.map(s).filter(x=>x!==void 0);if(f.length!==2)return null;const p=typeof d[0]=="number"?Jt(d[0],d[1]):Q_(d[0],d[1]),g=Math.round((Math.max(...f)-Math.min(...f))/Uce),m=`${d[0]}-${d[1]}-`;return v.jsx("linearGradient",{id:r,x1:"0",x2:"0",y1:"0",y2:"0",[`${a}${t?1:2}`]:e==="objectBoundingBox"?1:`${i}px`,gradientUnits:e??"userSpaceOnUse",children:Array.from({length:g+1},(x,b)=>{const A=p(b/g);if(A===void 0)return null;const E=s(A);if(E===void 0)return null;const C=t?1-E/i:E/i,T=o(A);return T===null?null:v.jsx("stop",{offset:C,stopColor:T,stopOpacity:1},m+b)})})}const Hce=10,zce=n=>n?{x1:"1",x2:"0",y1:"0",y2:"0"}:{x1:"0",x2:"1",y1:"0",y2:"0"};function k2(n){const{isReversed:e,gradientId:t,colorScale:r,colorMap:i}=n,a=[i.min??0,i.max??100],s=typeof a[0]=="number"?Jt(a[0],a[1]):Q_(a[0],a[1]),o=Hce,c=`${a[0]}-${a[1]}-`;return v.jsx("linearGradient",H({id:t},zce(e),{gradientUnits:"objectBoundingBox",children:Array.from({length:o+1},(d,f)=>{const p=f/o,g=s(p);if(g===void 0)return null;const m=r(g);return m===null?null:v.jsx("stop",{offset:p,stopColor:m,stopOpacity:1},c+f)})}))}function $ce(){const{top:n,height:e,bottom:t,left:r,width:i,right:a}=Pa(),s=n+e+t,o=r+i+a,c=Ase(),d=Ese(),{xAxis:f,xAxisIds:p}=No(),{yAxis:g,yAxisIds:m}=Kl(),{zAxis:x,zAxisIds:b}=yA(),A=m.filter(T=>g[T].colorMap!==void 0),E=p.filter(T=>f[T].colorMap!==void 0),C=b.filter(T=>x[T].colorMap!==void 0);return A.length===0&&E.length===0&&C.length===0?null:v.jsxs("defs",{children:[A.map(T=>{const D=c(T),k=d(T),{colorMap:B,scale:O,colorScale:I,reverse:R}=g[T];return(B==null?void 0:B.type)==="piecewise"?v.jsx(tR,{isReversed:!R,scale:O,colorMap:B,size:s,gradientId:D,direction:"y"},D):(B==null?void 0:B.type)==="continuous"?v.jsxs(M.Fragment,{children:[v.jsx(nR,{isReversed:!R,scale:O,colorScale:I,colorMap:B,size:s,gradientId:D,direction:"y"}),v.jsx(k2,{isReversed:R,colorScale:I,colorMap:B,gradientId:k})]},D):null}),E.map(T=>{const D=c(T),k=d(T),{colorMap:B,scale:O,reverse:I,colorScale:R}=f[T];return(B==null?void 0:B.type)==="piecewise"?v.jsx(tR,{isReversed:I,scale:O,colorMap:B,size:o,gradientId:D,direction:"x"},D):(B==null?void 0:B.type)==="continuous"?v.jsxs(M.Fragment,{children:[v.jsx(nR,{isReversed:I,scale:O,colorScale:R,colorMap:B,size:o,gradientId:D,direction:"x"}),v.jsx(k2,{isReversed:I,colorScale:R,colorMap:B,gradientId:k})]},D):null}),C.map(T=>{const D=d(T),{colorMap:k,colorScale:B}=x[T];return(k==null?void 0:k.type)==="continuous"?v.jsx(k2,{colorScale:B,colorMap:k,gradientId:D},D):null})]})}const Gce=["children","className","title","desc"],Wce=ke("svg",{name:"MuiChartsSurface",slot:"Root"})(({ownerState:n})=>({width:n.width??"100%",height:n.height??"100%",display:"flex",position:"relative",flexDirection:"column",alignItems:"center",justifyContent:"center",overflow:"hidden",touchAction:"pan-y",userSelect:"none"})),X8=M.forwardRef(function(e,t){const r=_n(),{width:i,height:a}=pt(r,nte),{width:s,height:o}=pt(r,$P),c=vA(),d=oi(c,t),f=bt({props:e,name:"MuiChartsSurface"}),{children:p,className:g,title:m,desc:x}=f,b=Be(f,Gce),A=a>0&&i>0;return v.jsxs(Wce,H({ownerState:{width:s,height:o},viewBox:`0 0 ${i} ${a}`,className:g},b,{ref:d,children:[m&&v.jsx("title",{children:m}),x&&v.jsx("desc",{children:x}),v.jsx($ce,{}),A&&p]}))}),Yce=["width","height","margin","children","series","colors","dataset","desc","onAxisClick","highlightedAxis","onHighlightedAxisChange","disableVoronoi","voronoiMaxRadius","onItemClick","disableAxisListener","highlightedItem","onHighlightChange","sx","title","xAxis","yAxis","zAxis","rotationAxis","radiusAxis","skipAnimation","seriesConfig","plugins","localeText","slots","slotProps","experimentalFeatures"],K8=(n,e)=>{const t=n,{width:r,height:i,margin:a,children:s,series:o,colors:c,dataset:d,desc:f,onAxisClick:p,highlightedAxis:g,onHighlightedAxisChange:m,disableVoronoi:x,voronoiMaxRadius:b,onItemClick:A,disableAxisListener:E,highlightedItem:C,onHighlightChange:T,sx:D,title:k,xAxis:B,yAxis:O,zAxis:I,rotationAxis:R,radiusAxis:F,skipAnimation:N,seriesConfig:P,plugins:V,localeText:q,slots:X,slotProps:G,experimentalFeatures:W}=t,K=Be(t,Yce),Z=H({title:k,desc:f,sx:D,ref:e},K);return{chartDataProviderProps:{margin:a,series:o,colors:c,dataset:d,disableAxisListener:E,highlightedItem:C,onHighlightChange:T,onAxisClick:p,highlightedAxis:g,onHighlightedAxisChange:m,disableVoronoi:x,voronoiMaxRadius:b,onItemClick:A,xAxis:B,yAxis:O,zAxis:I,rotationAxis:R,radiusAxis:F,skipAnimation:N,width:r,height:i,localeText:q,seriesConfig:P,experimentalFeatures:W,plugins:V??Y8,slots:X,slotProps:G},chartsSurfaceProps:Z,children:s}},qce=(n,e)=>n==="vertical"?(e==null?void 0:e.horizontal)==="start"?"row":"row-reverse":(e==null?void 0:e.vertical)==="bottom"?"column-reverse":"column",Xce=(n,e)=>{if(n==="vertical"){if((e==null?void 0:e.vertical)==="top")return"flex-start";if((e==null?void 0:e.vertical)==="bottom")return"flex-end"}if(n==="horizontal"){if((e==null?void 0:e.horizontal)==="start")return"flex-start";if((e==null?void 0:e.horizontal)==="end")return"flex-end"}return"center"},Kce=ke("div",{name:"MuiChartsWrapper",slot:"Root",shouldForwardProp:n=>Oa(n)&&n!=="extendVertically"})(({ownerState:n})=>({display:"flex",flexDirection:qce(n.legendDirection,n.legendPosition),flex:1,justifyContent:"center",alignItems:Xce(n.legendDirection,n.legendPosition),variants:[{props:{extendVertically:!0},style:{height:"100%"}}]}));function Q8(n){const{children:e,sx:t,extendVertically:r}=n,i=$se(),a=_n(),{height:s}=pt(a,$P);return v.jsx(Kce,{ref:i,ownerState:n,sx:t,extendVertically:r??s===void 0,children:e})}const N2=M.forwardRef(function(e,t){var T,D,k,B;const r=bt({props:e,name:"MuiBarChart"}),{chartsWrapperProps:i,chartContainerProps:a,barPlotProps:s,gridProps:o,clipPathProps:c,clipPathGroupProps:d,overlayProps:f,chartsAxisProps:p,axisHighlightProps:g,legendProps:m,children:x}=hce(r),{chartDataProviderProps:b,chartsSurfaceProps:A}=K8(a,t),E=((T=r.slots)==null?void 0:T.tooltip)??U8,C=(D=r.slots)==null?void 0:D.toolbar;return v.jsx(q8,H({},b,{children:v.jsxs(Q8,H({},i,{children:[r.showToolbar&&C?v.jsx(C,H({},(k=r.slotProps)==null?void 0:k.toolbar)):null,!r.hideLegend&&v.jsx(H8,H({},m)),v.jsxs(X8,H({},A,{children:[v.jsx(Voe,H({},o)),v.jsxs("g",H({},d,{children:[v.jsx(rce,H({},s)),v.jsx(W8,H({},f)),v.jsx(Sle,H({},g))]})),v.jsx(Ooe,H({},p)),v.jsx(Kse,H({},c)),x]})),!r.loading&&v.jsx(E,H({},(B=r.slotProps)==null?void 0:B.tooltip))]}))}))}),Qce=["classes","color","dataIndex","id","isFaded","isHighlighted","onClick","cornerRadius","startAngle","endAngle","innerRadius","outerRadius","paddingAngle","skipAnimation"];function Zce(n){return Mt("MuiPieArc",n)}Ot("MuiPieArc",["root","highlighted","faded","series"]);const Jce=n=>{const{classes:e,id:t,isFaded:r,isHighlighted:i,dataIndex:a}=n,s={root:["root",`series-${t}`,`data-index-${a}`,i&&"highlighted",r&&"faded"]};return xt(s,Zce,e)},eue=ke("path",{name:"MuiPieArc",slot:"Root",overridesResolver:(n,e)=>e.arc})(({theme:n})=>({stroke:(n.vars||n).palette.background.paper,transitionProperty:"opacity, fill, filter",transitionDuration:`${xA}ms`,transitionTimingFunction:h8})),tue=M.forwardRef(function(e,t){const{classes:r,color:i,dataIndex:a,id:s,isFaded:o,isHighlighted:c,onClick:d,cornerRadius:f,startAngle:p,endAngle:g,innerRadius:m,outerRadius:x,paddingAngle:b,skipAnimation:A}=e,E=Be(e,Qce),C={id:s,dataIndex:a,classes:r,color:i,isFaded:o,isHighlighted:c},T=Jce(C),D=z8({type:"pie",seriesId:s,dataIndex:a}),k=Use({cornerRadius:f,startAngle:p,endAngle:g,innerRadius:m,outerRadius:x,paddingAngle:b,skipAnimation:A,ref:t});return v.jsx(eue,H({onClick:d,cursor:d?"pointer":"unset",ownerState:C,className:T.root,fill:C.color,opacity:C.isFaded?.3:1,filter:C.isHighlighted?"brightness(120%)":"none",strokeWidth:1,strokeLinejoin:"round","data-highlighted":C.isHighlighted||void 0,"data-faded":C.isFaded||void 0},E,D,k))});function Z8(n){const{id:e,data:t,faded:r,highlighted:i,paddingAngle:a=0,innerRadius:s=0,arcLabelRadius:o,outerRadius:c,cornerRadius:d=0}=n,{isFaded:f,isHighlighted:p}=wse();return M.useMemo(()=>t.map((m,x)=>{const b={seriesId:e,dataIndex:x},A=p(b),E=!A&&f(b),C=H({additionalRadius:0},E&&r||A&&i||{}),T=Math.max(0,Td(C.paddingAngle??a)),D=Math.max(0,C.innerRadius??s),k=Math.max(0,C.outerRadius??c+C.additionalRadius),B=C.cornerRadius??d,O=C.arcLabelRadius??o??(D+k)/2;return H({},m,C,{dataIndex:x,isFaded:E,isHighlighted:A,paddingAngle:T,innerRadius:D,outerRadius:k,cornerRadius:B,arcLabelRadius:O})}),[d,s,c,a,o,t,r,i,f,p,e])}const nue=["slots","slotProps","innerRadius","outerRadius","cornerRadius","paddingAngle","id","highlighted","faded","data","onItemClick","skipAnimation"];function rue(n){const{slots:e,slotProps:t,innerRadius:r=0,outerRadius:i,cornerRadius:a=0,paddingAngle:s=0,id:o,highlighted:c,faded:d={additionalRadius:-5},data:f,onItemClick:p,skipAnimation:g}=n,m=Be(n,nue),x=Z8({innerRadius:r,outerRadius:i,cornerRadius:a,paddingAngle:s,id:o,highlighted:c,faded:d,data:f});if(f.length===0)return null;const b=(e==null?void 0:e.pieArc)??tue;return v.jsx("g",H({},m,{children:x.map((A,E)=>v.jsx(b,H({startAngle:A.startAngle,endAngle:A.endAngle,paddingAngle:A.paddingAngle,innerRadius:A.innerRadius,outerRadius:A.outerRadius,cornerRadius:A.cornerRadius,skipAnimation:g??!1,id:o,color:A.color,dataIndex:E,isFaded:A.isFaded,isHighlighted:A.isHighlighted,onClick:p&&(C=>{p(C,{type:"pie",seriesId:o,dataIndex:E},A)})},t==null?void 0:t.pieArc),A.dataIndex))}))}const iue=["id","classes","color","startAngle","endAngle","paddingAngle","arcLabelRadius","innerRadius","outerRadius","cornerRadius","formattedArcLabel","isHighlighted","isFaded","style","skipAnimation"];function aue(n){return Mt("MuiPieArcLabel",n)}const sue=Ot("MuiPieArcLabel",["root","highlighted","faded","animate","series"]),oue=n=>{const{classes:e,id:t,isFaded:r,isHighlighted:i,skipAnimation:a}=n,s={root:["root",`series-${t}`,i&&"highlighted",r&&"faded",!a&&"animate"]};return xt(s,aue,e)},lue=ke("text",{name:"MuiPieArcLabel",slot:"Root"})(({theme:n})=>({fill:(n.vars||n).palette.text.primary,textAnchor:"middle",dominantBaseline:"middle",pointerEvents:"none",animationName:"animate-opacity",animationDuration:"0s",animationTimingFunction:h8,[`&.${sue.animate}`]:{animationDuration:`${xA}ms`},"@keyframes animate-opacity":{from:{opacity:0}}})),cue=M.forwardRef(function(e,t){const{id:r,classes:i,color:a,startAngle:s,endAngle:o,paddingAngle:c,arcLabelRadius:d,cornerRadius:f,formattedArcLabel:p,isHighlighted:g,isFaded:m,skipAnimation:x}=e,b=Be(e,iue),E=oue({id:r,classes:i,isFaded:m,isHighlighted:g,skipAnimation:x}),C=zse({cornerRadius:f,startAngle:s,endAngle:o,innerRadius:d,outerRadius:d,paddingAngle:c,skipAnimation:x,ref:t});return v.jsx(lue,H({className:E.root},b,C,{children:p}))}),uue=["arcLabel","arcLabelMinAngle","arcLabelRadius","cornerRadius","data","faded","highlighted","id","innerRadius","outerRadius","paddingAngle","skipAnimation","slotProps","slots"],due=180/Math.PI;function fue(n,e,t){var i;if(!n||(t.endAngle-t.startAngle)*due<e)return null;switch(n){case"label":return sa(t.label,"arc");case"value":return(i=t.value)==null?void 0:i.toString();case"formattedValue":return t.formattedValue;default:return n(H({},t,{label:sa(t.label,"arc")}))}}function hue(n){const{arcLabel:e,arcLabelMinAngle:t=0,arcLabelRadius:r,cornerRadius:i=0,data:a,faded:s={additionalRadius:-5},highlighted:o,id:c,innerRadius:d,outerRadius:f,paddingAngle:p=0,skipAnimation:g,slotProps:m,slots:x}=n,b=Be(n,uue),A=Z8({innerRadius:d,outerRadius:f,arcLabelRadius:r,cornerRadius:i,paddingAngle:p,id:c,highlighted:o,faded:s,data:a});if(a.length===0)return null;const E=(x==null?void 0:x.pieArcLabel)??cue;return v.jsx("g",H({},b,{children:A.map(C=>v.jsx(E,H({startAngle:C.startAngle,endAngle:C.endAngle,paddingAngle:C.paddingAngle,innerRadius:C.innerRadius,outerRadius:C.outerRadius,arcLabelRadius:C.arcLabelRadius,cornerRadius:C.cornerRadius,id:c,color:C.color,isFaded:C.isFaded,isHighlighted:C.isHighlighted,formattedArcLabel:fue(e,t,C),skipAnimation:g??!1},m==null?void 0:m.pieArcLabel),C.id??C.dataIndex))}))}function Vc(n,e){if(typeof n=="number")return n;if(n==="100%")return e;if(n.endsWith("%")){const t=Number.parseFloat(n.slice(0,n.length-1));if(!Number.isNaN(t))return t*e/100}if(n.endsWith("px")){const t=Number.parseFloat(n.slice(0,n.length-2));if(!Number.isNaN(t))return t}throw new Error(`MUI X Charts: Received an unknown value "${n}". It should be a number, or a string with a percentage value.`)}function rR(n,e){const{height:t,width:r}=e,{cx:i,cy:a}=n,s=Math.min(r,t)/2,o=Vc(i??"50%",r),c=Vc(a??"50%",t);return{cx:o,cy:c,availableRadius:s}}function pue(n){return Mt("MuiPieChart",n)}Ot("MuiPieChart",["root","series","seriesLabels"]);const gue=n=>xt({root:["root"],series:["series"],seriesLabels:["seriesLabels"]},pue,n);function mue(n){const{skipAnimation:e,slots:t,slotProps:r,onItemClick:i}=n,a=lse(),{left:s,top:o,width:c,height:d}=Pa(),f=G8(e),p=gue();if(a===void 0)return null;const{series:g,seriesOrder:m}=a;return v.jsxs("g",{children:[m.map(x=>{const{innerRadius:b,outerRadius:A,cornerRadius:E,paddingAngle:C,data:T,cx:D,cy:k,highlighted:B,faded:O}=g[x],{cx:I,cy:R,availableRadius:F}=rR({cx:D,cy:k},{width:c,height:d}),N=Vc(A??F,F),P=Vc(b??0,F);return v.jsx("g",{className:p.series,transform:`translate(${s+I}, ${o+R})`,"data-series":x,children:v.jsx(rue,{innerRadius:P,outerRadius:N,cornerRadius:E,paddingAngle:C,id:x,data:T,skipAnimation:f,highlighted:B,faded:O,onItemClick:i,slots:t,slotProps:r})},x)}),m.map(x=>{const{innerRadius:b,outerRadius:A,arcLabelRadius:E,cornerRadius:C,paddingAngle:T,arcLabel:D,arcLabelMinAngle:k,data:B,cx:O,cy:I}=g[x],{cx:R,cy:F,availableRadius:N}=rR({cx:O,cy:I},{width:c,height:d}),P=Vc(A??N,N),V=Vc(b??0,N),q=E===void 0?(P+V)/2:Vc(E,N);return v.jsx("g",{className:p.seriesLabels,transform:`translate(${s+R}, ${o+F})`,"data-series":x,children:v.jsx(hue,{innerRadius:V,outerRadius:P??N,arcLabelRadius:q,cornerRadius:C,paddingAngle:T,id:x,data:B,skipAnimation:f,arcLabel:D,arcLabelMinAngle:k,slots:t,slotProps:r})},x)})]})}const yue=[Af,pu],vue=["series","width","height","margin","colors","sx","skipAnimation","hideLegend","children","slots","slotProps","onItemClick","loading","highlightedItem","onHighlightChange","className","showToolbar"],iR=M.forwardRef(function(e,t){var N,P,V,q,X,G,W,K;const r=bt({props:e,name:"MuiPieChart"}),{series:i,width:a,height:s,margin:o,colors:c,sx:d,skipAnimation:f,hideLegend:p,children:g,slots:m,slotProps:x,onItemClick:b,loading:A,highlightedItem:E,onHighlightChange:C,className:T,showToolbar:D}=r,k=Be(r,vue),B=GP(o,Dte),{chartDataProviderProps:O,chartsSurfaceProps:I}=K8(H({},k,{series:i.map(Z=>H({type:"pie"},Z)),width:a,height:s,margin:B,colors:c,highlightedItem:E,onHighlightChange:C,className:T,skipAnimation:f,plugins:yue}),t),R=(m==null?void 0:m.tooltip)??U8,F=(N=r.slots)==null?void 0:N.toolbar;return v.jsx(q8,H({},O,{children:v.jsxs(Q8,{legendPosition:(V=(P=r.slotProps)==null?void 0:P.legend)==null?void 0:V.position,legendDirection:((X=(q=r==null?void 0:r.slotProps)==null?void 0:q.legend)==null?void 0:X.direction)??"vertical",sx:d,children:[D&&F?v.jsx(F,H({},(G=r.slotProps)==null?void 0:G.toolbar)):null,!p&&v.jsx(H8,{direction:((K=(W=r==null?void 0:r.slotProps)==null?void 0:W.legend)==null?void 0:K.direction)??"vertical",slots:m,slotProps:x}),v.jsxs(X8,H({},I,{children:[v.jsx(mue,{slots:m,slotProps:x,onItemClick:b}),v.jsx(W8,{loading:A,slots:m,slotProps:x}),g]})),!A&&v.jsx(R,H({trigger:"item"},x==null?void 0:x.tooltip))]})}))});function xue(){const{loading:n,error:e,summary:t,tagStats:r,monthlyFinished:i,monthlyAddedBooks:a,monthlyMemos:s,topAuthors:o,topPublishers:c,statusDistribution:d}=vee(),f=t&&(t.totalBooks>0||t.finishedBooks>0||t.readingBooks>0||t.tsundokuBooks>0||t.reReadingBooks>0);return v.jsxs(ne,{sx:{maxWidth:1200,mx:"auto",mb:10},children:[v.jsx(iy,{title:"",subtitle:""}),v.jsxs(ne,{sx:{p:2},children:[n&&v.jsx(Yl,{variant:"inline",message:"...","data-testid":"stats-loading"}),e&&v.jsx(te,{color:"error",sx:{mb:2},children:e}),!n&&!e&&!f&&v.jsx(kn,{sx:{mb:2},children:v.jsxs(Nn,{sx:{textAlign:"center",py:4},children:[v.jsx(te,{variant:"h6",color:"text.secondary",gutterBottom:!0,children:" "}),v.jsx(te,{variant:"body2",color:"text.secondary",children:""})]})}),f&&v.jsxs(v.Fragment,{children:[v.jsxs(ne,{sx:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:{xs:1,sm:2},width:"100%",mb:2,"@media (max-width: 480px)":{gap:.75}},children:[v.jsx(kn,{"data-testid":"stats-total-books",sx:{transition:"transform 0.2s ease-in-out","&:hover":{transform:"translateY(-2px)"}},children:v.jsxs(Nn,{children:[v.jsx(te,{variant:"h6",children:""}),v.jsx(te,{variant:"h4",sx:{fontWeight:"bold"},children:(t==null?void 0:t.totalBooks)??"-"})]})}),v.jsx(kn,{"data-testid":"stats-tsundoku-books",sx:{transition:"transform 0.2s ease-in-out","&:hover":{transform:"translateY(-2px)"}},children:v.jsxs(Nn,{children:[v.jsx(te,{variant:"h6",children:""}),v.jsx(te,{variant:"h4",sx:{fontWeight:"bold"},children:(t==null?void 0:t.tsundokuBooks)??"-"})]})}),v.jsx(kn,{"data-testid":"stats-reading-books",sx:{transition:"transform 0.2s ease-in-out","&:hover":{transform:"translateY(-2px)"}},children:v.jsxs(Nn,{children:[v.jsx(te,{variant:"h6",children:""}),v.jsx(te,{variant:"h4",sx:{fontWeight:"bold"},children:(t==null?void 0:t.readingBooks)??"-"})]})}),v.jsx(kn,{"data-testid":"stats-rereading-books",sx:{transition:"transform 0.2s ease-in-out","&:hover":{transform:"translateY(-2px)"}},children:v.jsxs(Nn,{children:[v.jsx(te,{variant:"h6",children:""}),v.jsx(te,{variant:"h4",sx:{fontWeight:"bold"},children:(t==null?void 0:t.reReadingBooks)??"-"})]})}),v.jsx(kn,{"data-testid":"stats-finished-books",sx:{transition:"transform 0.2s ease-in-out","&:hover":{transform:"translateY(-2px)"}},children:v.jsxs(Nn,{children:[v.jsx(te,{variant:"h6",children:""}),v.jsx(te,{variant:"h4",sx:{fontWeight:"bold"},children:(t==null?void 0:t.finishedBooks)??"-"})]})})]}),!!t&&v.jsx(kn,{sx:{mb:2},"data-testid":"chart-status-pie",children:v.jsxs(Nn,{children:[v.jsx(te,{variant:"h6",sx:{mb:1},children:""}),v.jsx(iR,{height:220,series:[{data:[{id:"tsundoku",label:"",value:(d==null?void 0:d.tsundoku)??0},{id:"reading",label:"",value:(d==null?void 0:d.reading)??0},{id:"reReading",label:"",value:(d==null?void 0:d.reReading)??0},{id:"finished",label:"",value:(d==null?void 0:d.finished)??0}],innerRadius:30,paddingAngle:2}]})]})}),v.jsx(Sl,{sx:{my:2}}),v.jsx(kn,{sx:{mb:2},"data-testid":"chart-monthly-finished",children:v.jsxs(Nn,{children:[v.jsx(te,{variant:"h6",sx:{mb:1},children:"12"}),v.jsx(N2,{xAxis:[{scaleType:"band",data:(i??[]).map(p=>p.key)}],series:[{data:(i??[]).map(p=>p.count),label:""}],height:260})]})}),v.jsxs(ne,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",md:"1fr 1fr"},gap:2,mb:2},children:[v.jsx(kn,{"data-testid":"chart-monthly-added",children:v.jsxs(Nn,{children:[v.jsx(te,{variant:"subtitle1",sx:{mb:1},children:"12"}),v.jsx(N2,{xAxis:[{scaleType:"band",data:(a??[]).map(p=>p.key)}],series:[{data:(a??[]).map(p=>p.count),label:"",color:"#42a5f5"}],height:220})]})}),v.jsx(kn,{"data-testid":"chart-monthly-memos",children:v.jsxs(Nn,{children:[v.jsx(te,{variant:"subtitle1",sx:{mb:1},children:"12"}),v.jsx(N2,{xAxis:[{scaleType:"band",data:(s??[]).map(p=>p.key)}],series:[{data:(s??[]).map(p=>p.count),label:"",color:"#9c27b0"}],height:220})]})})]}),v.jsx(Sl,{sx:{my:2}}),!!(r!=null&&r.length)&&v.jsx(kn,{sx:{mb:2},"data-testid":"chart-tag-pie",children:v.jsxs(Nn,{children:[v.jsx(te,{variant:"h6",sx:{mb:1},children:""}),v.jsx(iR,{height:260,series:[{data:r.slice(0,6).map(p=>({id:p.tag,label:p.tag,value:p.totalCount})),innerRadius:40,paddingAngle:2}]})]})}),v.jsxs(ne,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",sm:"1fr 1fr"},gap:2},children:[((r==null?void 0:r.slice(0,10))??[]).map(p=>v.jsx(ne,{children:v.jsx(kn,{"data-testid":`tag-stat-${p.tag}`,children:v.jsxs(Nn,{children:[v.jsx(te,{variant:"subtitle1",sx:{fontWeight:600},children:p.tag}),v.jsxs(te,{variant:"body2",color:"text.secondary",children:[": ",p.bookCount," / : ",p.memoCount," / : ",p.totalCount]})]})})},p.tag)),(!r||r.length===0)&&!n&&v.jsx(ne,{children:v.jsx(te,{variant:"body2",color:"text.secondary",children:""})})]}),v.jsx(Sl,{sx:{my:2}}),v.jsxs(qn,{sx:{p:2,mb:2},children:[v.jsx(te,{variant:"h6",sx:{mb:2},children:""}),v.jsxs(ne,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",sm:"1fr 1fr"},gap:2},children:[((o==null?void 0:o.slice(0,10))??[]).map(p=>v.jsx(ne,{children:v.jsx(kn,{"data-testid":`author-top-${p.author}`,children:v.jsxs(Nn,{children:[v.jsx(te,{variant:"subtitle1",sx:{fontWeight:600},children:p.author}),v.jsxs(te,{variant:"body2",color:"text.secondary",children:[": ",p.total]})]})})},p.author)),(!o||o.length===0)&&!n&&v.jsx(ne,{children:v.jsx(te,{variant:"body2",color:"text.secondary",children:""})})]})]}),v.jsxs(qn,{sx:{p:2},children:[v.jsx(te,{variant:"h6",sx:{mb:2},children:""}),v.jsxs(ne,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",sm:"1fr 1fr"},gap:2},children:[((c==null?void 0:c.slice(0,10))??[]).map(p=>v.jsx(ne,{children:v.jsx(kn,{"data-testid":`publisher-top-${p.publisher}`,children:v.jsxs(Nn,{children:[v.jsx(te,{variant:"subtitle1",sx:{fontWeight:600},children:p.publisher}),v.jsxs(te,{variant:"body2",color:"text.secondary",children:[": ",p.total]})]})})},p.publisher)),(!c||c.length===0)&&!n&&v.jsx(ne,{children:v.jsx(te,{variant:"body2",color:"text.secondary",children:""})})]})]})]})]})]})}const EA=()=>{try{if(typeof yi>"u"||!yi.useState)return{isOnline:!0,isInstallable:!1,isInstalled:!1,swRegistration:null,userEngagement:0,lastVisitTime:null,shouldShowInstallPrompt:!1,shouldShowManualInstallGuide:!1,registerServiceWorker:async()=>null,installApp:async()=>{},requestNotificationPermission:async()=>"denied",sendNotification:()=>null,checkForUpdates:async()=>{},clearCache:async()=>{},reloadApp:()=>{},recordInstallPromptDismiss:()=>{}}}catch(R){return console.warn("React context not available in usePWA:",R),{isOnline:!0,isInstallable:!1,isInstalled:!1,swRegistration:null,userEngagement:0,lastVisitTime:null,shouldShowInstallPrompt:!1,shouldShowManualInstallGuide:!1,registerServiceWorker:async()=>null,installApp:async()=>{},requestNotificationPermission:async()=>"denied",sendNotification:()=>null,checkForUpdates:async()=>{},clearCache:async()=>{},reloadApp:()=>{},recordInstallPromptDismiss:()=>{}}}if(!(typeof window<"u"&&typeof navigator<"u"&&"serviceWorker"in navigator&&"PushManager"in window&&!Cs.IS_DEVELOPMENT()))return{isOnline:!0,isInstallable:!1,isInstalled:!1,swRegistration:null,userEngagement:0,lastVisitTime:null,shouldShowInstallPrompt:!1,shouldShowManualInstallGuide:!1,registerServiceWorker:async()=>null,installApp:async()=>{},requestNotificationPermission:async()=>"denied",sendNotification:()=>null,checkForUpdates:async()=>{},clearCache:async()=>{},reloadApp:()=>{},recordInstallPromptDismiss:()=>{}};const[e,t]=M.useState(navigator.onLine),[r,i]=M.useState(null),[a,s]=M.useState(null),[o,c]=M.useState(!1),[d,f]=M.useState(!1),[p,g]=M.useState(0),[m,x]=M.useState(null);M.useEffect(()=>{const R=()=>t(!0),F=()=>t(!1);return window.addEventListener("online",R),window.addEventListener("offline",F),()=>{window.removeEventListener("online",R),window.removeEventListener("offline",F)}},[]),M.useEffect(()=>{if(typeof window>"u")return;const R=()=>{g(N=>N+1)},F=["click","scroll","keydown","touchstart"];return F.forEach(N=>{window.addEventListener(N,R,{passive:!0})}),()=>{F.forEach(N=>{window.removeEventListener(N,R)})}},[]),M.useEffect(()=>{if(typeof localStorage>"u")return;const R=Date.now(),F=localStorage.getItem("bookmemo_last_visit");if(F){if(R-parseInt(F)>1440*60*1e3){const P=parseInt(localStorage.getItem("bookmemo_visit_count")||"0")+1;localStorage.setItem("bookmemo_visit_count",P.toString())}}else localStorage.setItem("bookmemo_visit_count","1");localStorage.setItem("bookmemo_last_visit",R.toString()),x(R)},[]);const b=M.useCallback(async()=>{if(Cs.IS_DEVELOPMENT())return console.log("Service Worker registration skipped in development environment"),null;try{const R=Cs.SW_JS(),F=await navigator.serviceWorker.register(R);return i(F),console.log("Service Worker registered:",F),F.addEventListener("updatefound",()=>{const N=F.installing;N&&N.addEventListener("statechange",()=>{N.state==="installed"&&navigator.serviceWorker.controller&&console.log("New Service Worker available")})}),F}catch(R){return console.error("Service Worker registration failed:",R),console.warn("Service Worker registration failed, but app will continue without PWA features"),null}},[]);M.useEffect(()=>{if(typeof window>"u"||typeof localStorage>"u")return;const R=P=>{P.preventDefault(),s(P),c(!0)},F=()=>{f(!0),c(!1),s(null),console.log("PWA was installed"),localStorage.setItem("bookmemo_installed","true"),localStorage.setItem("bookmemo_install_date",Date.now().toString())};return window.addEventListener("beforeinstallprompt",R),window.addEventListener("appinstalled",F),localStorage.getItem("bookmemo_installed")==="true"&&(f(!0),c(!1)),()=>{window.removeEventListener("beforeinstallprompt",R),window.removeEventListener("appinstalled",F)}},[]);const A=M.useCallback(async()=>{if(a){a.prompt();const{outcome:R}=await a.userChoice;console.log(R==="accepted"?"User accepted the install prompt":"User dismissed the install prompt"),s(null),c(!1)}},[a]),E=M.useCallback(()=>{if(d||!o)return!1;const R=parseInt(localStorage.getItem("bookmemo_visit_count")||"0"),F=parseInt(localStorage.getItem("bookmemo_dismiss_count")||"0");return R>=1&&p>=5&&F<3},[d,o,p]),C=M.useCallback(()=>{if(d)return!1;const R=/iPad|iPhone|iPod/.test(navigator.userAgent),F=/Safari/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent);return R&&F},[d]),T=M.useCallback(()=>{if(typeof localStorage>"u")return;const R=parseInt(localStorage.getItem("bookmemo_dismiss_count")||"0")+1;localStorage.setItem("bookmemo_dismiss_count",R.toString())},[]),D=M.useCallback(async()=>{if(typeof window>"u"||!("Notification"in window))return"denied";try{return await Notification.requestPermission()}catch(R){return console.warn("Notification permission request failed:",R),"denied"}},[]),k=M.useCallback((R,F={})=>{if(typeof window>"u"||!("Notification"in window)||Notification.permission!=="granted")return null;try{const N=Cs.ICON_192();return new Notification(R,{icon:N,badge:N,...F})}catch(N){return console.warn("Notification send failed:",N),null}},[]),B=M.useCallback(async()=>{r&&await r.update()},[r]),O=M.useCallback(async()=>{if(!(typeof window>"u"||!("caches"in window)))try{const R=await caches.keys();await Promise.all(R.map(F=>caches.delete(F)))}catch(R){console.warn("Cache clear failed:",R)}},[]),I=M.useCallback(()=>{window.location.reload()},[]);return{isOnline:e,isInstallable:o,isInstalled:d,swRegistration:r,userEngagement:p,lastVisitTime:m,shouldShowInstallPrompt:E(),shouldShowManualInstallGuide:C(),registerServiceWorker:b,installApp:A,requestNotificationPermission:D,sendNotification:k,checkForUpdates:B,clearCache:O,reloadApp:I,recordInstallPromptDismiss:T}},wue=()=>{if(!(typeof window<"u"&&"serviceWorker"in navigator&&"PushManager"in window))return null;try{const{isOnline:e,isInstallable:t,isInstalled:r,installApp:i,shouldShowInstallPrompt:a,shouldShowManualInstallGuide:s,recordInstallPromptDismiss:o}=EA(),[c,d]=M.useState(!1),[f,p]=M.useState(!1),[g,m]=M.useState(!1),[x,b]=M.useState(!1);M.useEffect(()=>{p(!e)},[e]);const A=async()=>{try{await i(),d(!1),m(!1)}catch(B){console.error("Installation failed:",B)}},E=()=>{d(!1),o&&o()},C=()=>{m(!1),o&&o()},T=()=>{p(!1)},D=()=>{b(!1),o&&o()},k=[{icon:v.jsx(JN,{}),title:"",description:""},{icon:v.jsx(e5,{}),title:"",description:""},{icon:v.jsx(t5,{}),title:"",description:""}];return v.jsxs(v.Fragment,{children:[v.jsx(Bc,{open:c,anchorOrigin:{vertical:"bottom",horizontal:"center"},sx:{mb:8},children:v.jsx(vi,{severity:"info",action:v.jsxs(ne,{sx:{display:"flex",alignItems:"center",gap:1},children:[v.jsx($e,{color:"inherit",size:"small",startIcon:v.jsx(FC,{}),onClick:A,"data-testid":"pwa-install-button",variant:"contained",sx:{backgroundColor:"primary.main",color:"white","&:hover":{backgroundColor:"primary.dark"}},children:""}),v.jsx($r,{"aria-label":"close",color:"inherit",size:"small",onClick:E,children:v.jsx(Og,{fontSize:"inherit"})})]}),sx:{width:"100%"},children:v.jsx(te,{variant:"body2",children:"BookMemo"})})}),v.jsx(Bc,{open:g,anchorOrigin:{vertical:"bottom",horizontal:"center"},sx:{mb:8,width:"100%",maxWidth:"600px"},children:v.jsx(kn,{sx:{width:"100%",boxShadow:3},children:v.jsxs(Nn,{sx:{p:2},children:[v.jsxs(ne,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",mb:2},children:[v.jsx(te,{variant:"h6",component:"h2",sx:{fontWeight:"bold"},children:" BookMemo"}),v.jsx($r,{size:"small",onClick:C,sx:{mt:-.5},children:v.jsx(Og,{})})]}),v.jsx(te,{variant:"body2",sx:{mb:2,color:"text.secondary"},children:""}),v.jsx(Ls,{direction:"row",spacing:1,sx:{mb:2,flexWrap:"wrap",gap:1},children:k.map((B,O)=>v.jsx(dn,{icon:B.icon,label:B.title,size:"small",variant:"outlined",sx:{fontSize:"0.75rem"}},O))}),v.jsxs(ne,{sx:{display:"flex",gap:1,justifyContent:"flex-end"},children:[v.jsx($e,{variant:"outlined",size:"small",onClick:C,children:""}),v.jsx($e,{variant:"contained",size:"small",startIcon:v.jsx(FC,{}),onClick:A,sx:{backgroundColor:"primary.main","&:hover":{backgroundColor:"primary.dark"}},children:""})]})]})})}),v.jsx(Bc,{open:f,anchorOrigin:{vertical:"top",horizontal:"center"},children:v.jsx(vi,{severity:"warning",icon:v.jsx(n5,{}),action:v.jsx($r,{"aria-label":"close",color:"inherit",size:"small",onClick:T,children:v.jsx(Og,{fontSize:"inherit"})}),sx:{width:"100%"},"data-testid":"pwa-offline-alert",children:v.jsx(te,{variant:"body2",children:""})})}),v.jsx(Bc,{open:e&&f,anchorOrigin:{vertical:"top",horizontal:"center"},autoHideDuration:3e3,onClose:T,children:v.jsx(vi,{severity:"success",icon:v.jsx(r5,{}),sx:{width:"100%"},children:v.jsx(te,{variant:"body2",children:""})})}),v.jsx(Bc,{open:x,anchorOrigin:{vertical:"bottom",horizontal:"center"},sx:{mb:8,width:"100%",maxWidth:"600px"},children:v.jsx(kn,{sx:{width:"100%",boxShadow:3},children:v.jsxs(Nn,{sx:{p:2},children:[v.jsxs(ne,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",mb:2},children:[v.jsx(te,{variant:"h6",component:"h2",sx:{fontWeight:"bold"},children:" BookMemo"}),v.jsx($r,{size:"small",onClick:D,sx:{mt:-.5},children:v.jsx(Og,{})})]}),v.jsx(te,{variant:"body2",sx:{mb:2,color:"text.secondary"},children:"iPhoneBookMemo"}),v.jsxs(ne,{sx:{mb:2},children:[v.jsx(te,{variant:"body2",sx:{fontWeight:"bold",mb:1},children:"1. "}),v.jsx(te,{variant:"body2",sx:{mb:1,pl:2},children:"Safari"}),v.jsx(te,{variant:"body2",sx:{fontWeight:"bold",mb:1},children:"2. "}),v.jsx(te,{variant:"body2",sx:{mb:1,pl:2},children:""}),v.jsx(te,{variant:"body2",sx:{fontWeight:"bold",mb:1},children:"3. "}),v.jsx(te,{variant:"body2",sx:{pl:2},children:""})]}),v.jsx(Ls,{direction:"row",spacing:1,sx:{mb:2,flexWrap:"wrap",gap:1},children:k.map((B,O)=>v.jsx(dn,{icon:B.icon,label:B.title,size:"small",variant:"outlined",sx:{fontSize:"0.75rem"}},O))}),v.jsxs(ne,{sx:{display:"flex",gap:1,justifyContent:"flex-end"},children:[v.jsx($e,{variant:"outlined",size:"small",onClick:D,children:""}),v.jsx($e,{variant:"contained",size:"small",onClick:D,sx:{backgroundColor:"primary.main","&:hover":{backgroundColor:"primary.dark"}},children:""})]})]})})})]})}catch(e){return console.warn("PWA hook error in PWAInstallPrompt, skipping PWA features:",e),null}},bue=()=>{try{return!(typeof yi>"u"||!yi.useState||!yi.useContext||typeof window>"u"||typeof navigator>"u")}catch(n){return console.warn("React context check failed:",n),!1}},_ue=n=>function(t){const[r,i]=yi.useState(!1),[a,s]=yi.useState(0),o=20,c=50;return yi.useEffect(()=>{const d=()=>{if(bue()){i(!0);return}a<o?(s(f=>f+1),setTimeout(d,c)):(console.warn("React context initialization timeout, proceeding with fallback"),i(!0))};d()},[a]),r?v.jsx(n,{...t}):v.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",fontSize:"1rem",color:"#666"},children:"..."})},J8=i5({palette:{mode:"light",background:{default:"#eef2ff",paper:"#ffffff"},primary:{main:"#1976d2"},secondary:{main:"#f50057"},success:{main:"#2e7d32",light:"#4caf50",dark:"#1b5e20"},warning:{main:"#ed6c02",light:"#ff9800",dark:"#e65100"},info:{main:"#0288d1",light:"#03a9f4",dark:"#01579b"},error:{main:"#d32f2f",light:"#ef5350",dark:"#c62828"},text:{primary:"#222"},custom:{pageHeader:{brown:{dark:"#8B4513",medium:"#A0522D",light:"#CD853F"},text:{title:"#FFF8DC",subtitle:"#F5F5DC"}}}},typography:{fontFamily:"Segoe UI, Helvetica Neue, Arial, sans-serif",h1:{fontSize:"1.8rem","@media (min-width:600px)":{fontSize:"2.5rem"}},h2:{fontSize:"1.5rem","@media (min-width:600px)":{fontSize:"2rem"}},h3:{fontSize:"1.3rem","@media (min-width:600px)":{fontSize:"1.6rem"}},h4:{fontSize:"1.1rem","@media (min-width:600px)":{fontSize:"1.4rem"}},h5:{fontSize:"1rem","@media (min-width:600px)":{fontSize:"1.2rem"}},h6:{fontSize:"0.9rem","@media (min-width:600px)":{fontSize:"1.1rem"}},body1:{fontSize:"0.9rem","@media (min-width:600px)":{fontSize:"1rem"}},body2:{fontSize:"0.8rem","@media (min-width:600px)":{fontSize:"0.9rem"}},caption:{fontSize:"0.7rem","@media (min-width:600px)":{fontSize:"0.8rem"}}},components:{MuiCssBaseline:{styleOverrides:{"#app-scroll-container":{position:"relative",backgroundColor:"#eef2ff",backgroundImage:"var(--bm-library-image), var(--bm-library-bg)",backgroundBlendMode:"normal, overlay",backgroundRepeat:"no-repeat, repeat",backgroundSize:"cover, 320px 320px",backgroundPosition:"center center, 0 var(--bg-offset, 0px)",backgroundAttachment:"fixed, fixed",minHeight:"100vh",width:"100%","&::before":{content:'""',position:"fixed",inset:0,background:`linear-gradient(
              180deg,
              rgba(245, 247, 250, 0.3) 0%,
              rgba(139, 69, 19, 0.1) 50%,
              rgba(15, 23, 42, 0.2) 100%
            )`,pointerEvents:"none",zIndex:0},"& > *":{position:"relative",zIndex:1}}}},MuiTextField:{styleOverrides:{root:{marginBottom:"8px","@media (min-width:600px)":{marginBottom:"16px"},"& .MuiInputBase-root":{fontSize:"0.9rem","@media (min-width:600px)":{fontSize:"1rem"},backgroundColor:"#ffffff"}}},defaultProps:{size:"small",margin:"dense"}},MuiButton:{styleOverrides:{root:{fontSize:"0.9rem",padding:"8px 16px","@media (min-width:600px)":{fontSize:"1rem",padding:"10px 20px"}}},defaultProps:{size:"medium"}},MuiCard:{styleOverrides:{root:{height:"100%",display:"flex",flexDirection:"column",marginBottom:"8px","@media (min-width:600px)":{marginBottom:"16px"},borderRadius:16,border:"1px solid rgba(15, 23, 42, 0.08)",backgroundColor:"rgba(255, 255, 255, 0.72)",backdropFilter:"saturate(140%) blur(10px)",boxShadow:"0 10px 28px rgba(15, 23, 42, 0.08)",transition:"box-shadow 160ms ease, transform 160ms ease","&:hover":{boxShadow:"0 16px 36px rgba(15, 23, 42, 0.12)"}}}},MuiCardContent:{styleOverrides:{root:{flex:1,display:"flex",flexDirection:"column",padding:"12px","@media (min-width:600px)":{padding:"16px"},"&:last-child":{paddingBottom:"12px","@media (min-width:600px)":{paddingBottom:"16px"}}}}},MuiPaper:{styleOverrides:{root:{padding:"12px","@media (min-width:600px)":{padding:"16px"},borderRadius:16,border:"1px solid rgba(15, 23, 42, 0.08)",backgroundColor:"rgba(255, 255, 255, 0.72)",backdropFilter:"saturate(140%) blur(10px)",boxShadow:"0 10px 28px rgba(15, 23, 42, 0.08)"}}},MuiMenu:{styleOverrides:{paper:{borderRadius:12,border:"1px solid rgba(15, 23, 42, 0.12)",backgroundColor:"rgba(255, 255, 255, 0.98)",backdropFilter:"none",boxShadow:"0 14px 40px rgba(15, 23, 42, 0.18)",padding:0}}},MuiPopover:{styleOverrides:{paper:{borderRadius:12,border:"1px solid rgba(15, 23, 42, 0.12)",backgroundColor:"rgba(255, 255, 255, 0.98)",backdropFilter:"none",boxShadow:"0 14px 40px rgba(15, 23, 42, 0.18)",padding:0}}},MuiAutocomplete:{styleOverrides:{root:{marginBottom:"8px","@media (min-width:600px)":{marginBottom:"16px"}}}},MuiChip:{styleOverrides:{root:{fontSize:"0.8rem",height:"24px","@media (min-width:600px)":{fontSize:"0.9rem",height:"32px"}}}},MuiDialog:{styleOverrides:{paper:{margin:"16px",width:"calc(100% - 32px)",maxWidth:"400px","@media (min-width:600px)":{margin:"32px",width:"calc(100% - 64px)",maxWidth:"600px"},borderRadius:16,border:"1px solid rgba(15, 23, 42, 0.12)",backgroundColor:"#ffffff",backdropFilter:"none",boxShadow:"0 20px 60px rgba(15, 23, 42, 0.22)",padding:0}}},MuiBottomNavigation:{styleOverrides:{root:{height:"56px","@media (min-width:600px)":{height:"64px"}}}},MuiBottomNavigationAction:{styleOverrides:{root:{fontSize:"0.7rem","@media (min-width:600px)":{fontSize:"0.8rem"}}}},MuiAlert:{styleOverrides:{root:{backgroundColor:"rgba(255, 255, 255, 0.85)",backdropFilter:"blur(8px) saturate(140%)"}}}},breakpoints:{values:{xs:0,sm:600,md:900,lg:1200,xl:1536}},spacing:n=>`${4*n}px`}),vo={saveError:(n,e="")=>{try{const t={timestamp:new Date().toISOString(),error:(n==null?void 0:n.message)||(n==null?void 0:n.toString())||"Unknown error",stack:(n==null?void 0:n.stack)||"",context:e,url:typeof window<"u"?window.location.href:"",userAgent:typeof navigator<"u"?navigator.userAgent:""},r=JSON.parse(localStorage.getItem("bookmemo_error_logs")||"[]");return r.push(t),r.length>10&&r.splice(0,r.length-10),localStorage.setItem("bookmemo_error_logs",JSON.stringify(r)),console.error(" PERSISTENT ERROR LOG:",t),t}catch(t){console.error("Error saving error log:",t)}},getErrors:()=>{try{return JSON.parse(localStorage.getItem("bookmemo_error_logs")||"[]")}catch{return[]}},clearErrors:()=>{localStorage.removeItem("bookmemo_error_logs")}},Aue=()=>{typeof window>"u"||(window.addEventListener("error",n=>{vo.saveError(n.error,"Global Error Handler")}),window.addEventListener("unhandledrejection",n=>{vo.saveError(n.reason,"Unhandled Promise Rejection")}),window.addEventListener("beforeunload",()=>{vo.getErrors().length>0&&console.log(" Error logs available in localStorage: bookmemo_error_logs")}))};function Eue({containerId:n="app-scroll-container",cssVarName:e="--bg-offset",factor:t=.45}={}){M.useEffect(()=>{const r=document.getElementById(n);if(!r)return;const i=typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-reduced-motion: reduce)").matches;let a=0;const s=()=>{a||(a=window.requestAnimationFrame(()=>{a=0;const o=r.scrollTop||0,c=i?0:Math.round(o*t);r.style.setProperty(e,`${c}px`)}))};return s(),r.addEventListener("scroll",s,{passive:!0}),()=>{r.removeEventListener("scroll",s),a&&window.cancelAnimationFrame(a)}},[n,e,t])}function jh({children:n}){const{user:e,loading:t}=Qn(),r=iu();return M.useEffect(()=>{!t&&!e&&console.warn(" Authentication required for:",r.pathname)},[e,t,r.pathname]),t?v.jsx(Yl,{variant:"fullPage",message:"...","data-testid":"auth-loading"}):e?n:(console.warn(" Unauthenticated access attempt, redirecting to login"),v.jsx(xR,{to:"/login"}))}function Sue(){const n=Hl(),e=iu(),[t,r]=M.useState(0);return M.useEffect(()=>{e.pathname.startsWith("/add")?r(1):e.pathname.startsWith("/tags")?r(2):e.pathname.startsWith("/stats")?r(3):r(0)},[e.pathname]),v.jsxs(s5,{value:t,onChange:(i,a)=>{r(a),a===0&&n("/"),a===1&&n("/add"),a===2&&n("/tags"),a===3&&n("/stats")},showLabels:!0,sx:{position:"fixed",bottom:0,left:0,right:0,zIndex:1e3,backgroundColor:"background.paper",borderTop:1,borderColor:"divider",height:{xs:"64px",sm:"72px"},"& .MuiBottomNavigationAction-root":{minWidth:{xs:"60px",sm:"80px"},padding:{xs:"6px 4px",sm:"8px 6px"}},"& .MuiBottomNavigationAction-label":{fontSize:{xs:"0.7rem",sm:"0.8rem"},marginTop:{xs:"2px",sm:"4px"}},"& .MuiBottomNavigationAction-iconOnly":{fontSize:{xs:"1.5rem",sm:"1.75rem"}}},children:[v.jsx(Pg,{label:"",icon:v.jsx(o5,{}),"data-testid":"bottom-nav-list",sx:{"&.Mui-selected":{color:"primary.main"}}}),v.jsx(Pg,{label:"",icon:v.jsx(l5,{}),"data-testid":"bottom-nav-add",sx:{"&.Mui-selected":{color:"primary.main"}}}),v.jsx(Pg,{label:"",icon:v.jsx(R1,{}),"data-testid":"bottom-nav-search",sx:{"&.Mui-selected":{color:"primary.main"}}}),v.jsx(Pg,{label:"",icon:v.jsx(c5,{}),"data-testid":"bottom-nav-stats",sx:{"&.Mui-selected":{color:"primary.main"}}})]})}function Cue(){const n=iu(),{user:e}=Qn(),{setGlobalError:t}=M.useContext(Wr),{isStandalone:r}=EA(),{handleBack:i,handleForward:a}=LP(),s=n.pathname.startsWith("/login")||n.pathname.startsWith("/signup")||!e;return M.useEffect(()=>{if(!r)return;let o=0,c=0,d=0,f=0,p=!1;const g=100,m=A=>{o=A.changedTouches[0].screenX,d=A.changedTouches[0].screenY;const E=document.elementFromPoint(o,d);p=(E==null?void 0:E.closest("[data-allow-local-swipe]"))!==null},x=A=>{c=A.changedTouches[0].screenX,f=A.changedTouches[0].screenY,b()},b=()=>{const A=c-o,E=Math.abs(f-d),C=g;p||Math.abs(A)>C&&Math.abs(A)>E&&(A>0?i():a())};return document.addEventListener("touchstart",m,{passive:!0}),document.addEventListener("touchend",x,{passive:!0}),()=>{document.removeEventListener("touchstart",m),document.removeEventListener("touchend",x)}},[r,i,a]),M.useEffect(()=>{Aue()},[]),M.useEffect(()=>{const o=document.getElementById("app-scroll-container");o&&o.scrollTo(0,0)},[n.pathname]),Eue({factor:.45}),M.useEffect(()=>{const o=p=>{console.error("Global error caught:",p.error),vo.saveError(p.error,"AppRoutes Global Error"),p.error&&p.error.message&&p.error.message.includes("404")?t&&t(""):t&&t("")},c=p=>{console.error("Unhandled promise rejection:",p.reason),vo.saveError(p.reason,"AppRoutes Unhandled Promise Rejection"),p.reason&&p.reason.message&&(p.reason.message.includes("404")||p.reason.message.includes("Failed to fetch")),t&&t("")},d=p=>{p.target&&p.target.src&&(console.error("Resource loading error:",p.target.src),vo.saveError(new Error(`Resource loading failed: ${p.target.src}`),"AppRoutes Resource Error"),(p.target.src.includes("sw.js")||p.target.src.includes("manifest.webmanifest"))&&t&&t(""))},f=p=>{p.target&&p.target.src&&p.target.src.includes("404")&&(console.error("404 Error detected:",p.target.src),vo.saveError(new Error(`404 Error: ${p.target.src} - SPA routing issue detected`),"AppRoutes 404 Error"),t&&t("SPA"))};return window.addEventListener("error",f,!0),window.addEventListener("error",o),window.addEventListener("unhandledrejection",c),window.addEventListener("error",d,!0),()=>{window.removeEventListener("error",o),window.removeEventListener("unhandledrejection",c),window.removeEventListener("error",d,!0)}},[t]),v.jsxs(v.Fragment,{children:[v.jsx(ne,{id:"app-scroll-container",sx:{height:"100vh",overflowY:"auto",WebkitOverflowScrolling:"touch",pb:s?0:{xs:"64px",sm:"72px"},"--bm-noise-bg":`url("${Cs.NOISE_TEXTURE()}")`,"--bm-library-bg":`url("${Cs.LIBRARY_PATTERN()}")`,"--bm-library-image":`url("${Cs.LIBRARY_BACKGROUND()}")`},children:v.jsxs(g5,{children:[v.jsx(ll,{path:"/login",element:v.jsx(Bj,{})}),v.jsx(ll,{path:"/signup",element:v.jsx(Fj,{})}),v.jsx(ll,{path:"/",element:v.jsx(jh,{children:v.jsx(Kj,{})})}),v.jsx(ll,{path:"/add",element:v.jsx(jh,{children:v.jsx(W$,{})})}),v.jsx(ll,{path:"/book/:id",element:v.jsx(jh,{children:v.jsx(WJ,{})})}),v.jsx(ll,{path:"/tags",element:v.jsx(jh,{children:v.jsx(pee,{})})}),v.jsx(ll,{path:"/stats",element:v.jsx(jh,{children:v.jsx(xue,{})})}),v.jsx(ll,{path:"*",element:v.jsx(xR,{to:"/"})})]})}),!s&&v.jsx(Sue,{})]})}function Tue(){return v.jsx(Lj,{children:v.jsx(Wj,{children:v.jsx(p5,{children:v.jsxs(vR,{theme:J8,children:[v.jsx(a5,{}),v.jsx(Iue,{}),v.jsx(Cue,{}),typeof window<"u"&&"serviceWorker"in navigator&&!Cs.IS_DEVELOPMENT()&&v.jsx(wue,{})]})})})})}function Iue(){if(Cs.IS_DEVELOPMENT()||!("serviceWorker"in navigator&&"PushManager"in window))return null;try{const{registerServiceWorker:e}=EA();return M.useEffect(()=>{e().catch(t=>{console.warn("Service Worker registration failed in PWAProvider:",t),vo.saveError(t,"PWAProvider Service Worker Registration")})},[e]),null}catch(e){return console.warn("PWA hook error, skipping PWA initialization:",e),vo.saveError(e,"PWAProvider Hook Error"),null}}const Due=_ue(Tue);w5.createRoot(document.getElementById("root")).render(v.jsx(M.StrictMode,{children:v.jsx(vR,{theme:J8,children:v.jsx(Due,{})})}));

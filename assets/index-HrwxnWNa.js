import{r as H,j as A,B as ot,T as st,a as oe,b as qt,C as gn,c as pn,d as eD,e as Dn,P as Ic,R as Kr,D as ma,f as va,g as ya,A as co,h as xa,i as SE,I as Xr,k as M1,l as pC,m as _h,n as is,o as hy,M as nD,u as mC,p as TE,S as Ch,E as dy,q as CE,s as rD,t as m1,F as iD,v as aD,w as xx,x as Ku,y as Zu,z as Qu,G as cr,_ as W,H as Vi,J as sD,K as xe,L as vC,N as oo,O as yC,Q as xC,U as Ei,V as Jr,W as ti,X as ln,Y as Lr,Z as qh,$ as _C,a0 as fo,a1 as AC,a2 as Ka,a3 as oD,a4 as lD,a5 as uD,a6 as cD,a7 as fD,a8 as hD,a9 as Yf,aa as $0,ab as dD,ac as gD,ad as wC,ae as EC,af as pD,ag as mD,ah as Kf,ai as vD,aj as yD,ak as xD,al as _D,am as AD}from"./mui-vendor-BOiu8i3Y.js";import{r as _x,a as wD,g as ED}from"./react-vendor-DJG_os-6.js";import{u as Wh,a as IE,b as bC,c as bD,d as Eg,B as SD,R as TD,e as Ya,N as SC}from"./utils-vendor-DNDUP6Rx.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function e(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=e(i);fetch(i.href,a)}})();var pv={exports:{}},Zf={},mv={exports:{}},vv={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var RE;function CD(){return RE||(RE=1,function(n){function t(q,Z){var it=q.length;q.push(Z);t:for(;0<it;){var pt=it-1>>>1,_t=q[pt];if(0<i(_t,Z))q[pt]=Z,q[it]=_t,it=pt;else break t}}function e(q){return q.length===0?null:q[0]}function r(q){if(q.length===0)return null;var Z=q[0],it=q.pop();if(it!==Z){q[0]=it;t:for(var pt=0,_t=q.length,Mt=_t>>>1;pt<Mt;){var It=2*(pt+1)-1,wt=q[It],zt=It+1,$t=q[zt];if(0>i(wt,it))zt<_t&&0>i($t,wt)?(q[pt]=$t,q[zt]=it,pt=zt):(q[pt]=wt,q[It]=it,pt=It);else if(zt<_t&&0>i($t,it))q[pt]=$t,q[zt]=it,pt=zt;else break t}}return Z}function i(q,Z){var it=q.sortIndex-Z.sortIndex;return it!==0?it:q.id-Z.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var s=Date,l=s.now();n.unstable_now=function(){return s.now()-l}}var c=[],f=[],d=1,g=null,m=3,v=!1,_=!1,w=!1,b=!1,S=typeof setTimeout=="function"?setTimeout:null,C=typeof clearTimeout=="function"?clearTimeout:null,I=typeof setImmediate<"u"?setImmediate:null;function M(q){for(var Z=e(f);Z!==null;){if(Z.callback===null)r(f);else if(Z.startTime<=q)r(f),Z.sortIndex=Z.expirationTime,t(c,Z);else break;Z=e(f)}}function N(q){if(w=!1,M(q),!_)if(e(c)!==null)_=!0,k||(k=!0,U());else{var Z=e(f);Z!==null&&vt(N,Z.startTime-q)}}var k=!1,O=-1,R=5,D=-1;function L(){return b?!0:!(n.unstable_now()-D<R)}function F(){if(b=!1,k){var q=n.unstable_now();D=q;var Z=!0;try{t:{_=!1,w&&(w=!1,C(O),O=-1),v=!0;var it=m;try{e:{for(M(q),g=e(c);g!==null&&!(g.expirationTime>q&&L());){var pt=g.callback;if(typeof pt=="function"){g.callback=null,m=g.priorityLevel;var _t=pt(g.expirationTime<=q);if(q=n.unstable_now(),typeof _t=="function"){g.callback=_t,M(q),Z=!0;break e}g===e(c)&&r(c),M(q)}else r(c);g=e(c)}if(g!==null)Z=!0;else{var Mt=e(f);Mt!==null&&vt(N,Mt.startTime-q),Z=!1}}break t}finally{g=null,m=it,v=!1}Z=void 0}}finally{Z?U():k=!1}}}var U;if(typeof I=="function")U=function(){I(F)};else if(typeof MessageChannel<"u"){var B=new MessageChannel,rt=B.port2;B.port1.onmessage=F,U=function(){rt.postMessage(null)}}else U=function(){S(F,0)};function vt(q,Z){O=S(function(){q(n.unstable_now())},Z)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(q){q.callback=null},n.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<q?Math.floor(1e3/q):5},n.unstable_getCurrentPriorityLevel=function(){return m},n.unstable_next=function(q){switch(m){case 1:case 2:case 3:var Z=3;break;default:Z=m}var it=m;m=Z;try{return q()}finally{m=it}},n.unstable_requestPaint=function(){b=!0},n.unstable_runWithPriority=function(q,Z){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var it=m;m=q;try{return Z()}finally{m=it}},n.unstable_scheduleCallback=function(q,Z,it){var pt=n.unstable_now();switch(typeof it=="object"&&it!==null?(it=it.delay,it=typeof it=="number"&&0<it?pt+it:pt):it=pt,q){case 1:var _t=-1;break;case 2:_t=250;break;case 5:_t=1073741823;break;case 4:_t=1e4;break;default:_t=5e3}return _t=it+_t,q={id:d++,callback:Z,priorityLevel:q,startTime:it,expirationTime:_t,sortIndex:-1},it>pt?(q.sortIndex=it,t(f,q),e(c)===null&&q===e(f)&&(w?(C(O),O=-1):w=!0,vt(N,it-pt))):(q.sortIndex=_t,t(c,q),_||v||(_=!0,k||(k=!0,U()))),q},n.unstable_shouldYield=L,n.unstable_wrapCallback=function(q){var Z=m;return function(){var it=m;m=Z;try{return q.apply(this,arguments)}finally{m=it}}}}(vv)),vv}var DE;function ID(){return DE||(DE=1,mv.exports=CD()),mv.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var OE;function RD(){if(OE)return Zf;OE=1;var n=ID(),t=_x(),e=wD();function r(o){var u="https://react.dev/errors/"+o;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var h=2;h<arguments.length;h++)u+="&args[]="+encodeURIComponent(arguments[h])}return"Minified React error #"+o+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function a(o){var u=o,h=o;if(o.alternate)for(;u.return;)u=u.return;else{o=u;do u=o,(u.flags&4098)!==0&&(h=u.return),o=u.return;while(o)}return u.tag===3?h:null}function s(o){if(o.tag===13){var u=o.memoizedState;if(u===null&&(o=o.alternate,o!==null&&(u=o.memoizedState)),u!==null)return u.dehydrated}return null}function l(o){if(a(o)!==o)throw Error(r(188))}function c(o){var u=o.alternate;if(!u){if(u=a(o),u===null)throw Error(r(188));return u!==o?null:o}for(var h=o,p=u;;){var x=h.return;if(x===null)break;var E=x.alternate;if(E===null){if(p=x.return,p!==null){h=p;continue}break}if(x.child===E.child){for(E=x.child;E;){if(E===h)return l(x),o;if(E===p)return l(x),u;E=E.sibling}throw Error(r(188))}if(h.return!==p.return)h=x,p=E;else{for(var V=!1,j=x.child;j;){if(j===h){V=!0,h=x,p=E;break}if(j===p){V=!0,p=x,h=E;break}j=j.sibling}if(!V){for(j=E.child;j;){if(j===h){V=!0,h=E,p=x;break}if(j===p){V=!0,p=E,h=x;break}j=j.sibling}if(!V)throw Error(r(189))}}if(h.alternate!==p)throw Error(r(190))}if(h.tag!==3)throw Error(r(188));return h.stateNode.current===h?o:u}function f(o){var u=o.tag;if(u===5||u===26||u===27||u===6)return o;for(o=o.child;o!==null;){if(u=f(o),u!==null)return u;o=o.sibling}return null}var d=Object.assign,g=Symbol.for("react.element"),m=Symbol.for("react.transitional.element"),v=Symbol.for("react.portal"),_=Symbol.for("react.fragment"),w=Symbol.for("react.strict_mode"),b=Symbol.for("react.profiler"),S=Symbol.for("react.provider"),C=Symbol.for("react.consumer"),I=Symbol.for("react.context"),M=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),k=Symbol.for("react.suspense_list"),O=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),D=Symbol.for("react.activity"),L=Symbol.for("react.memo_cache_sentinel"),F=Symbol.iterator;function U(o){return o===null||typeof o!="object"?null:(o=F&&o[F]||o["@@iterator"],typeof o=="function"?o:null)}var B=Symbol.for("react.client.reference");function rt(o){if(o==null)return null;if(typeof o=="function")return o.$$typeof===B?null:o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case _:return"Fragment";case b:return"Profiler";case w:return"StrictMode";case N:return"Suspense";case k:return"SuspenseList";case D:return"Activity"}if(typeof o=="object")switch(o.$$typeof){case v:return"Portal";case I:return(o.displayName||"Context")+".Provider";case C:return(o._context.displayName||"Context")+".Consumer";case M:var u=o.render;return o=o.displayName,o||(o=u.displayName||u.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case O:return u=o.displayName||null,u!==null?u:rt(o.type)||"Memo";case R:u=o._payload,o=o._init;try{return rt(o(u))}catch{}}return null}var vt=Array.isArray,q=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Z=e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,it={pending:!1,data:null,method:null,action:null},pt=[],_t=-1;function Mt(o){return{current:o}}function It(o){0>_t||(o.current=pt[_t],pt[_t]=null,_t--)}function wt(o,u){_t++,pt[_t]=o.current,o.current=u}var zt=Mt(null),$t=Mt(null),ge=Mt(null),Ie=Mt(null);function Ye(o,u){switch(wt(ge,u),wt($t,o),wt(zt,null),u.nodeType){case 9:case 11:o=(o=u.documentElement)&&(o=o.namespaceURI)?Jw(o):0;break;default:if(o=u.tagName,u=u.namespaceURI)u=Jw(u),o=tE(u,o);else switch(o){case"svg":o=1;break;case"math":o=2;break;default:o=0}}It(zt),wt(zt,o)}function ht(){It(zt),It($t),It(ge)}function Et(o){o.memoizedState!==null&&wt(Ie,o);var u=zt.current,h=tE(u,o.type);u!==h&&(wt($t,o),wt(zt,h))}function Rt(o){$t.current===o&&(It(zt),It($t)),Ie.current===o&&(It(Ie),Gf._currentValue=it)}var mt=Object.prototype.hasOwnProperty,_e=n.unstable_scheduleCallback,Nt=n.unstable_cancelCallback,Pe=n.unstable_shouldYield,Ke=n.unstable_requestPaint,Ge=n.unstable_now,ri=n.unstable_getCurrentPriorityLevel,As=n.unstable_ImmediatePriority,wa=n.unstable_UserBlockingPriority,Ea=n.unstable_NormalPriority,zc=n.unstable_LowPriority,ws=n.unstable_IdlePriority,Po=n.log,ql=n.unstable_setDisableYieldValue,$e=null,ue=null;function Vr(o){if(typeof Po=="function"&&ql(o),ue&&typeof ue.setStrictMode=="function")try{ue.setStrictMode($e,o)}catch{}}var ir=Math.clz32?Math.clz32:ko,Ed=Math.log,vp=Math.LN2;function ko(o){return o>>>=0,o===0?32:31-(Ed(o)/vp|0)|0}var Lo=256,Bo=4194304;function Si(o){var u=o&42;if(u!==0)return u;switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return o&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return o}}function Wl(o,u,h){var p=o.pendingLanes;if(p===0)return 0;var x=0,E=o.suspendedLanes,V=o.pingedLanes;o=o.warmLanes;var j=p&134217727;return j!==0?(p=j&~E,p!==0?x=Si(p):(V&=j,V!==0?x=Si(V):h||(h=j&~o,h!==0&&(x=Si(h))))):(j=p&~E,j!==0?x=Si(j):V!==0?x=Si(V):h||(h=p&~o,h!==0&&(x=Si(h)))),x===0?0:u!==0&&u!==x&&(u&E)===0&&(E=x&-x,h=u&-u,E>=h||E===32&&(h&4194048)!==0)?u:x}function Vo(o,u){return(o.pendingLanes&~(o.suspendedLanes&~o.pingedLanes)&u)===0}function Hc(o,u){switch(o){case 1:case 2:case 4:case 8:case 64:return u+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Gc(){var o=Lo;return Lo<<=1,(Lo&4194048)===0&&(Lo=256),o}function $c(){var o=Bo;return Bo<<=1,(Bo&62914560)===0&&(Bo=4194304),o}function ba(o){for(var u=[],h=0;31>h;h++)u.push(o);return u}function Sa(o,u){o.pendingLanes|=u,u!==268435456&&(o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0)}function qc(o,u,h,p,x,E){var V=o.pendingLanes;o.pendingLanes=h,o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0,o.expiredLanes&=h,o.entangledLanes&=h,o.errorRecoveryDisabledLanes&=h,o.shellSuspendCounter=0;var j=o.entanglements,$=o.expirationTimes,J=o.hiddenUpdates;for(h=V&~h;0<h;){var ut=31-ir(h),dt=1<<ut;j[ut]=0,$[ut]=-1;var et=J[ut];if(et!==null)for(J[ut]=null,ut=0;ut<et.length;ut++){var nt=et[ut];nt!==null&&(nt.lane&=-536870913)}h&=~dt}p!==0&&Hi(o,p,0),E!==0&&x===0&&o.tag!==0&&(o.suspendedLanes|=E&~(V&~u))}function Hi(o,u,h){o.pendingLanes|=u,o.suspendedLanes&=~u;var p=31-ir(u);o.entangledLanes|=u,o.entanglements[p]=o.entanglements[p]|1073741824|h&4194090}function Wc(o,u){var h=o.entangledLanes|=u;for(o=o.entanglements;h;){var p=31-ir(h),x=1<<p;x&u|o[p]&u&&(o[p]|=u),h&=~x}}function Es(o){switch(o){case 2:o=1;break;case 8:o=4;break;case 32:o=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:o=128;break;case 268435456:o=134217728;break;default:o=0}return o}function Xl(o){return o&=-o,2<o?8<o?(o&134217727)!==0?32:268435456:8:2}function bs(){var o=Z.p;return o!==0?o:(o=window.event,o===void 0?32:xE(o.type))}function bd(o,u){var h=Z.p;try{return Z.p=o,u()}finally{Z.p=h}}var qe=Math.random().toString(36).slice(2),xn="__reactFiber$"+qe,un="__reactProps$"+qe,ii="__reactContainer$"+qe,Xc="__reactEvents$"+qe,yp="__reactListeners$"+qe,Ss="__reactHandles$"+qe,Sd="__reactResources$"+qe,Fo="__reactMarker$"+qe;function Ts(o){delete o[xn],delete o[un],delete o[Xc],delete o[yp],delete o[Ss]}function Ta(o){var u=o[xn];if(u)return u;for(var h=o.parentNode;h;){if(u=h[ii]||h[xn]){if(h=u.alternate,u.child!==null||h!==null&&h.child!==null)for(o=iE(o);o!==null;){if(h=o[xn])return h;o=iE(o)}return u}o=h,h=o.parentNode}return null}function Gi(o){if(o=o[xn]||o[ii]){var u=o.tag;if(u===5||u===6||u===13||u===26||u===27||u===3)return o}return null}function $i(o){var u=o.tag;if(u===5||u===26||u===27||u===6)return o.stateNode;throw Error(r(33))}function mr(o){var u=o[Sd];return u||(u=o[Sd]={hoistableStyles:new Map,hoistableScripts:new Map}),u}function en(o){o[Fo]=!0}var Yc=new Set,Yl={};function Ti(o,u){Ca(o,u),Ca(o+"Capture",u)}function Ca(o,u){for(Yl[o]=u,o=0;o<u.length;o++)Yc.add(u[o])}var Td=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Cd={},Uo={};function Id(o){return mt.call(Uo,o)?!0:mt.call(Cd,o)?!1:Td.test(o)?Uo[o]=!0:(Cd[o]=!0,!1)}function Cs(o,u,h){if(Id(u))if(h===null)o.removeAttribute(u);else{switch(typeof h){case"undefined":case"function":case"symbol":o.removeAttribute(u);return;case"boolean":var p=u.toLowerCase().slice(0,5);if(p!=="data-"&&p!=="aria-"){o.removeAttribute(u);return}}o.setAttribute(u,""+h)}}function qi(o,u,h){if(h===null)o.removeAttribute(u);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(u);return}o.setAttribute(u,""+h)}}function Wn(o,u,h,p){if(p===null)o.removeAttribute(h);else{switch(typeof p){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(h);return}o.setAttributeNS(u,h,""+p)}}var jo,Rd;function Ia(o){if(jo===void 0)try{throw Error()}catch(h){var u=h.stack.trim().match(/\n( *(at )?)/);jo=u&&u[1]||"",Rd=-1<h.stack.indexOf(`
    at`)?" (<anonymous>)":-1<h.stack.indexOf("@")?"@unknown:0:0":""}return`
`+jo+o+Rd}var Kl=!1;function Zl(o,u){if(!o||Kl)return"";Kl=!0;var h=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var p={DetermineComponentFrameRoot:function(){try{if(u){var dt=function(){throw Error()};if(Object.defineProperty(dt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(dt,[])}catch(nt){var et=nt}Reflect.construct(o,[],dt)}else{try{dt.call()}catch(nt){et=nt}o.call(dt.prototype)}}else{try{throw Error()}catch(nt){et=nt}(dt=o())&&typeof dt.catch=="function"&&dt.catch(function(){})}}catch(nt){if(nt&&et&&typeof nt.stack=="string")return[nt.stack,et.stack]}return[null,null]}};p.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var x=Object.getOwnPropertyDescriptor(p.DetermineComponentFrameRoot,"name");x&&x.configurable&&Object.defineProperty(p.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var E=p.DetermineComponentFrameRoot(),V=E[0],j=E[1];if(V&&j){var $=V.split(`
`),J=j.split(`
`);for(x=p=0;p<$.length&&!$[p].includes("DetermineComponentFrameRoot");)p++;for(;x<J.length&&!J[x].includes("DetermineComponentFrameRoot");)x++;if(p===$.length||x===J.length)for(p=$.length-1,x=J.length-1;1<=p&&0<=x&&$[p]!==J[x];)x--;for(;1<=p&&0<=x;p--,x--)if($[p]!==J[x]){if(p!==1||x!==1)do if(p--,x--,0>x||$[p]!==J[x]){var ut=`
`+$[p].replace(" at new "," at ");return o.displayName&&ut.includes("<anonymous>")&&(ut=ut.replace("<anonymous>",o.displayName)),ut}while(1<=p&&0<=x);break}}}finally{Kl=!1,Error.prepareStackTrace=h}return(h=o?o.displayName||o.name:"")?Ia(h):""}function Kc(o){switch(o.tag){case 26:case 27:case 5:return Ia(o.type);case 16:return Ia("Lazy");case 13:return Ia("Suspense");case 19:return Ia("SuspenseList");case 0:case 15:return Zl(o.type,!1);case 11:return Zl(o.type.render,!1);case 1:return Zl(o.type,!0);case 31:return Ia("Activity");default:return""}}function Ql(o){try{var u="";do u+=Kc(o),o=o.return;while(o);return u}catch(h){return`
Error generating stack: `+h.message+`
`+h.stack}}function vr(o){switch(typeof o){case"bigint":case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function Zc(o){var u=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(u==="checkbox"||u==="radio")}function xp(o){var u=Zc(o)?"checked":"value",h=Object.getOwnPropertyDescriptor(o.constructor.prototype,u),p=""+o[u];if(!o.hasOwnProperty(u)&&typeof h<"u"&&typeof h.get=="function"&&typeof h.set=="function"){var x=h.get,E=h.set;return Object.defineProperty(o,u,{configurable:!0,get:function(){return x.call(this)},set:function(V){p=""+V,E.call(this,V)}}),Object.defineProperty(o,u,{enumerable:h.enumerable}),{getValue:function(){return p},setValue:function(V){p=""+V},stopTracking:function(){o._valueTracker=null,delete o[u]}}}}function Jl(o){o._valueTracker||(o._valueTracker=xp(o))}function Qc(o){if(!o)return!1;var u=o._valueTracker;if(!u)return!0;var h=u.getValue(),p="";return o&&(p=Zc(o)?o.checked?"true":"false":o.value),o=p,o!==h?(u.setValue(o),!0):!1}function zo(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}var _p=/[\n"\\]/g;function cn(o){return o.replace(_p,function(u){return"\\"+u.charCodeAt(0).toString(16)+" "})}function Fr(o,u,h,p,x,E,V,j){o.name="",V!=null&&typeof V!="function"&&typeof V!="symbol"&&typeof V!="boolean"?o.type=V:o.removeAttribute("type"),u!=null?V==="number"?(u===0&&o.value===""||o.value!=u)&&(o.value=""+vr(u)):o.value!==""+vr(u)&&(o.value=""+vr(u)):V!=="submit"&&V!=="reset"||o.removeAttribute("value"),u!=null?Is(o,V,vr(u)):h!=null?Is(o,V,vr(h)):p!=null&&o.removeAttribute("value"),x==null&&E!=null&&(o.defaultChecked=!!E),x!=null&&(o.checked=x&&typeof x!="function"&&typeof x!="symbol"),j!=null&&typeof j!="function"&&typeof j!="symbol"&&typeof j!="boolean"?o.name=""+vr(j):o.removeAttribute("name")}function Ho(o,u,h,p,x,E,V,j){if(E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(o.type=E),u!=null||h!=null){if(!(E!=="submit"&&E!=="reset"||u!=null))return;h=h!=null?""+vr(h):"",u=u!=null?""+vr(u):h,j||u===o.value||(o.value=u),o.defaultValue=u}p=p??x,p=typeof p!="function"&&typeof p!="symbol"&&!!p,o.checked=j?o.checked:!!p,o.defaultChecked=!!p,V!=null&&typeof V!="function"&&typeof V!="symbol"&&typeof V!="boolean"&&(o.name=V)}function Is(o,u,h){u==="number"&&zo(o.ownerDocument)===o||o.defaultValue===""+h||(o.defaultValue=""+h)}function Ra(o,u,h,p){if(o=o.options,u){u={};for(var x=0;x<h.length;x++)u["$"+h[x]]=!0;for(h=0;h<o.length;h++)x=u.hasOwnProperty("$"+o[h].value),o[h].selected!==x&&(o[h].selected=x),x&&p&&(o[h].defaultSelected=!0)}else{for(h=""+vr(h),u=null,x=0;x<o.length;x++){if(o[x].value===h){o[x].selected=!0,p&&(o[x].defaultSelected=!0);return}u!==null||o[x].disabled||(u=o[x])}u!==null&&(u.selected=!0)}}function Re(o,u,h){if(u!=null&&(u=""+vr(u),u!==o.value&&(o.value=u),h==null)){o.defaultValue!==u&&(o.defaultValue=u);return}o.defaultValue=h!=null?""+vr(h):""}function Go(o,u,h,p){if(u==null){if(p!=null){if(h!=null)throw Error(r(92));if(vt(p)){if(1<p.length)throw Error(r(93));p=p[0]}h=p}h==null&&(h=""),u=h}h=vr(u),o.defaultValue=h,p=o.textContent,p===h&&p!==""&&p!==null&&(o.value=p)}function ai(o,u){if(u){var h=o.firstChild;if(h&&h===o.lastChild&&h.nodeType===3){h.nodeValue=u;return}}o.textContent=u}var $o=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Dd(o,u,h){var p=u.indexOf("--")===0;h==null||typeof h=="boolean"||h===""?p?o.setProperty(u,""):u==="float"?o.cssFloat="":o[u]="":p?o.setProperty(u,h):typeof h!="number"||h===0||$o.has(u)?u==="float"?o.cssFloat=h:o[u]=(""+h).trim():o[u]=h+"px"}function Jc(o,u,h){if(u!=null&&typeof u!="object")throw Error(r(62));if(o=o.style,h!=null){for(var p in h)!h.hasOwnProperty(p)||u!=null&&u.hasOwnProperty(p)||(p.indexOf("--")===0?o.setProperty(p,""):p==="float"?o.cssFloat="":o[p]="");for(var x in u)p=u[x],u.hasOwnProperty(x)&&h[x]!==p&&Dd(o,x,p)}else for(var E in u)u.hasOwnProperty(E)&&Dd(o,E,u[E])}function tf(o){if(o.indexOf("-")===-1)return!1;switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ap=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),wp=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function tu(o){return wp.test(""+o)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":o}var Da=null;function si(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var Oa=null,Ma=null;function ef(o){var u=Gi(o);if(u&&(o=u.stateNode)){var h=o[un]||null;t:switch(o=u.stateNode,u.type){case"input":if(Fr(o,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name),u=h.name,h.type==="radio"&&u!=null){for(h=o;h.parentNode;)h=h.parentNode;for(h=h.querySelectorAll('input[name="'+cn(""+u)+'"][type="radio"]'),u=0;u<h.length;u++){var p=h[u];if(p!==o&&p.form===o.form){var x=p[un]||null;if(!x)throw Error(r(90));Fr(p,x.value,x.defaultValue,x.defaultValue,x.checked,x.defaultChecked,x.type,x.name)}}for(u=0;u<h.length;u++)p=h[u],p.form===o.form&&Qc(p)}break t;case"textarea":Re(o,h.value,h.defaultValue);break t;case"select":u=h.value,u!=null&&Ra(o,!!h.multiple,u,!1)}}}var Wi=!1;function Od(o,u,h){if(Wi)return o(u,h);Wi=!0;try{var p=o(u);return p}finally{if(Wi=!1,(Oa!==null||Ma!==null)&&(b0(),Oa&&(u=Oa,o=Ma,Ma=Oa=null,ef(u),o)))for(u=0;u<o.length;u++)ef(o[u])}}function qo(o,u){var h=o.stateNode;if(h===null)return null;var p=h[un]||null;if(p===null)return null;h=p[u];t:switch(u){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(p=!p.disabled)||(o=o.type,p=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!p;break t;default:o=!1}if(o)return null;if(h&&typeof h!="function")throw Error(r(231,u,typeof h));return h}var Ci=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),oi=!1;if(Ci)try{var Wo={};Object.defineProperty(Wo,"passive",{get:function(){oi=!0}}),window.addEventListener("test",Wo,Wo),window.removeEventListener("test",Wo,Wo)}catch{oi=!1}var Xi=null,Rs=null,Na=null;function nf(){if(Na)return Na;var o,u=Rs,h=u.length,p,x="value"in Xi?Xi.value:Xi.textContent,E=x.length;for(o=0;o<h&&u[o]===x[o];o++);var V=h-o;for(p=1;p<=V&&u[h-p]===x[E-p];p++);return Na=x.slice(o,1<p?1-p:void 0)}function Yi(o){var u=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&u===13&&(o=13)):o=u,o===10&&(o=13),32<=o||o===13?o:0}function Ki(){return!0}function rf(){return!1}function Ln(o){function u(h,p,x,E,V){this._reactName=h,this._targetInst=x,this.type=p,this.nativeEvent=E,this.target=V,this.currentTarget=null;for(var j in o)o.hasOwnProperty(j)&&(h=o[j],this[j]=h?h(E):E[j]);return this.isDefaultPrevented=(E.defaultPrevented!=null?E.defaultPrevented:E.returnValue===!1)?Ki:rf,this.isPropagationStopped=rf,this}return d(u.prototype,{preventDefault:function(){this.defaultPrevented=!0;var h=this.nativeEvent;h&&(h.preventDefault?h.preventDefault():typeof h.returnValue!="unknown"&&(h.returnValue=!1),this.isDefaultPrevented=Ki)},stopPropagation:function(){var h=this.nativeEvent;h&&(h.stopPropagation?h.stopPropagation():typeof h.cancelBubble!="unknown"&&(h.cancelBubble=!0),this.isPropagationStopped=Ki)},persist:function(){},isPersistent:Ki}),u}var Ae={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},eu=Ln(Ae),Xo=d({},Ae,{view:0,detail:0}),Md=Ln(Xo),nu,ru,Zi,Yo=d({},Xo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Qo,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==Zi&&(Zi&&o.type==="mousemove"?(nu=o.screenX-Zi.screenX,ru=o.screenY-Zi.screenY):ru=nu=0,Zi=o),nu)},movementY:function(o){return"movementY"in o?o.movementY:ru}}),li=Ln(Yo),Nd=d({},Yo,{dataTransfer:0}),Ep=Ln(Nd),Ko=d({},Xo,{relatedTarget:0}),iu=Ln(Ko),af=d({},Ae,{animationName:0,elapsedTime:0,pseudoElement:0}),au=Ln(af),Pd=d({},Ae,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),su=Ln(Pd),bp=d({},Ae,{data:0}),sf=Ln(bp),Zo={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},kd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ld={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function of(o){var u=this.nativeEvent;return u.getModifierState?u.getModifierState(o):(o=Ld[o])?!!u[o]:!1}function Qo(){return of}var Bd=d({},Xo,{key:function(o){if(o.key){var u=Zo[o.key]||o.key;if(u!=="Unidentified")return u}return o.type==="keypress"?(o=Yi(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?kd[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Qo,charCode:function(o){return o.type==="keypress"?Yi(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?Yi(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),ou=Ln(Bd),Vd=d({},Yo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),lf=Ln(Vd),Pa=d({},Xo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Qo}),Fd=Ln(Pa),Ud=d({},Ae,{propertyName:0,elapsedTime:0,pseudoElement:0}),jd=Ln(Ud),zd=d({},Yo,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),lu=Ln(zd),yr=d({},Ae,{newState:0,oldState:0}),Hd=Ln(yr),Gd=[9,13,27,32],Qi=Ci&&"CompositionEvent"in window,y=null;Ci&&"documentMode"in document&&(y=document.documentMode);var T=Ci&&"TextEvent"in window&&!y,P=Ci&&(!Qi||y&&8<y&&11>=y),z=" ",K=!1;function at(o,u){switch(o){case"keyup":return Gd.indexOf(u.keyCode)!==-1;case"keydown":return u.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function yt(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var ne=!1;function _n(o,u){switch(o){case"compositionend":return yt(u);case"keypress":return u.which!==32?null:(K=!0,z);case"textInput":return o=u.data,o===z&&K?null:o;default:return null}}function re(o,u){if(ne)return o==="compositionend"||!Qi&&at(o,u)?(o=nf(),Na=Rs=Xi=null,ne=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(u.ctrlKey||u.altKey||u.metaKey)||u.ctrlKey&&u.altKey){if(u.char&&1<u.char.length)return u.char;if(u.which)return String.fromCharCode(u.which)}return null;case"compositionend":return P&&u.locale!=="ko"?null:u.data;default:return null}}var Bn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function An(o){var u=o&&o.nodeName&&o.nodeName.toLowerCase();return u==="input"?!!Bn[o.type]:u==="textarea"}function ka(o,u,h,p){Oa?Ma?Ma.push(p):Ma=[p]:Oa=p,u=D0(u,"onChange"),0<u.length&&(h=new eu("onChange","change",null,h,p),o.push({event:h,listeners:u}))}var Xn=null,Ji=null;function uf(o){Xw(o,0)}function $d(o){var u=$i(o);if(Qc(u))return o}function p_(o,u){if(o==="change")return u}var m_=!1;if(Ci){var Sp;if(Ci){var Tp="oninput"in document;if(!Tp){var v_=document.createElement("div");v_.setAttribute("oninput","return;"),Tp=typeof v_.oninput=="function"}Sp=Tp}else Sp=!1;m_=Sp&&(!document.documentMode||9<document.documentMode)}function y_(){Xn&&(Xn.detachEvent("onpropertychange",x_),Ji=Xn=null)}function x_(o){if(o.propertyName==="value"&&$d(Ji)){var u=[];ka(u,Ji,o,si(o)),Od(uf,u)}}function O8(o,u,h){o==="focusin"?(y_(),Xn=u,Ji=h,Xn.attachEvent("onpropertychange",x_)):o==="focusout"&&y_()}function M8(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return $d(Ji)}function N8(o,u){if(o==="click")return $d(u)}function P8(o,u){if(o==="input"||o==="change")return $d(u)}function k8(o,u){return o===u&&(o!==0||1/o===1/u)||o!==o&&u!==u}var Ur=typeof Object.is=="function"?Object.is:k8;function cf(o,u){if(Ur(o,u))return!0;if(typeof o!="object"||o===null||typeof u!="object"||u===null)return!1;var h=Object.keys(o),p=Object.keys(u);if(h.length!==p.length)return!1;for(p=0;p<h.length;p++){var x=h[p];if(!mt.call(u,x)||!Ur(o[x],u[x]))return!1}return!0}function __(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function A_(o,u){var h=__(o);o=0;for(var p;h;){if(h.nodeType===3){if(p=o+h.textContent.length,o<=u&&p>=u)return{node:h,offset:u-o};o=p}t:{for(;h;){if(h.nextSibling){h=h.nextSibling;break t}h=h.parentNode}h=void 0}h=__(h)}}function w_(o,u){return o&&u?o===u?!0:o&&o.nodeType===3?!1:u&&u.nodeType===3?w_(o,u.parentNode):"contains"in o?o.contains(u):o.compareDocumentPosition?!!(o.compareDocumentPosition(u)&16):!1:!1}function E_(o){o=o!=null&&o.ownerDocument!=null&&o.ownerDocument.defaultView!=null?o.ownerDocument.defaultView:window;for(var u=zo(o.document);u instanceof o.HTMLIFrameElement;){try{var h=typeof u.contentWindow.location.href=="string"}catch{h=!1}if(h)o=u.contentWindow;else break;u=zo(o.document)}return u}function Cp(o){var u=o&&o.nodeName&&o.nodeName.toLowerCase();return u&&(u==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||u==="textarea"||o.contentEditable==="true")}var L8=Ci&&"documentMode"in document&&11>=document.documentMode,uu=null,Ip=null,ff=null,Rp=!1;function b_(o,u,h){var p=h.window===h?h.document:h.nodeType===9?h:h.ownerDocument;Rp||uu==null||uu!==zo(p)||(p=uu,"selectionStart"in p&&Cp(p)?p={start:p.selectionStart,end:p.selectionEnd}:(p=(p.ownerDocument&&p.ownerDocument.defaultView||window).getSelection(),p={anchorNode:p.anchorNode,anchorOffset:p.anchorOffset,focusNode:p.focusNode,focusOffset:p.focusOffset}),ff&&cf(ff,p)||(ff=p,p=D0(Ip,"onSelect"),0<p.length&&(u=new eu("onSelect","select",null,u,h),o.push({event:u,listeners:p}),u.target=uu)))}function Jo(o,u){var h={};return h[o.toLowerCase()]=u.toLowerCase(),h["Webkit"+o]="webkit"+u,h["Moz"+o]="moz"+u,h}var cu={animationend:Jo("Animation","AnimationEnd"),animationiteration:Jo("Animation","AnimationIteration"),animationstart:Jo("Animation","AnimationStart"),transitionrun:Jo("Transition","TransitionRun"),transitionstart:Jo("Transition","TransitionStart"),transitioncancel:Jo("Transition","TransitionCancel"),transitionend:Jo("Transition","TransitionEnd")},Dp={},S_={};Ci&&(S_=document.createElement("div").style,"AnimationEvent"in window||(delete cu.animationend.animation,delete cu.animationiteration.animation,delete cu.animationstart.animation),"TransitionEvent"in window||delete cu.transitionend.transition);function tl(o){if(Dp[o])return Dp[o];if(!cu[o])return o;var u=cu[o],h;for(h in u)if(u.hasOwnProperty(h)&&h in S_)return Dp[o]=u[h];return o}var T_=tl("animationend"),C_=tl("animationiteration"),I_=tl("animationstart"),B8=tl("transitionrun"),V8=tl("transitionstart"),F8=tl("transitioncancel"),R_=tl("transitionend"),D_=new Map,Op="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Op.push("scrollEnd");function Ii(o,u){D_.set(o,u),Ti(u,[o])}var O_=new WeakMap;function ui(o,u){if(typeof o=="object"&&o!==null){var h=O_.get(o);return h!==void 0?h:(u={value:o,source:u,stack:Ql(u)},O_.set(o,u),u)}return{value:o,source:u,stack:Ql(u)}}var ci=[],fu=0,Mp=0;function qd(){for(var o=fu,u=Mp=fu=0;u<o;){var h=ci[u];ci[u++]=null;var p=ci[u];ci[u++]=null;var x=ci[u];ci[u++]=null;var E=ci[u];if(ci[u++]=null,p!==null&&x!==null){var V=p.pending;V===null?x.next=x:(x.next=V.next,V.next=x),p.pending=x}E!==0&&M_(h,x,E)}}function Wd(o,u,h,p){ci[fu++]=o,ci[fu++]=u,ci[fu++]=h,ci[fu++]=p,Mp|=p,o.lanes|=p,o=o.alternate,o!==null&&(o.lanes|=p)}function Np(o,u,h,p){return Wd(o,u,h,p),Xd(o)}function hu(o,u){return Wd(o,null,null,u),Xd(o)}function M_(o,u,h){o.lanes|=h;var p=o.alternate;p!==null&&(p.lanes|=h);for(var x=!1,E=o.return;E!==null;)E.childLanes|=h,p=E.alternate,p!==null&&(p.childLanes|=h),E.tag===22&&(o=E.stateNode,o===null||o._visibility&1||(x=!0)),o=E,E=E.return;return o.tag===3?(E=o.stateNode,x&&u!==null&&(x=31-ir(h),o=E.hiddenUpdates,p=o[x],p===null?o[x]=[u]:p.push(u),u.lane=h|536870912),E):null}function Xd(o){if(50<Lf)throw Lf=0,Fm=null,Error(r(185));for(var u=o.return;u!==null;)o=u,u=o.return;return o.tag===3?o.stateNode:null}var du={};function U8(o,u,h,p){this.tag=o,this.key=h,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=u,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=p,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function jr(o,u,h,p){return new U8(o,u,h,p)}function Pp(o){return o=o.prototype,!(!o||!o.isReactComponent)}function La(o,u){var h=o.alternate;return h===null?(h=jr(o.tag,u,o.key,o.mode),h.elementType=o.elementType,h.type=o.type,h.stateNode=o.stateNode,h.alternate=o,o.alternate=h):(h.pendingProps=u,h.type=o.type,h.flags=0,h.subtreeFlags=0,h.deletions=null),h.flags=o.flags&65011712,h.childLanes=o.childLanes,h.lanes=o.lanes,h.child=o.child,h.memoizedProps=o.memoizedProps,h.memoizedState=o.memoizedState,h.updateQueue=o.updateQueue,u=o.dependencies,h.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext},h.sibling=o.sibling,h.index=o.index,h.ref=o.ref,h.refCleanup=o.refCleanup,h}function N_(o,u){o.flags&=65011714;var h=o.alternate;return h===null?(o.childLanes=0,o.lanes=u,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=h.childLanes,o.lanes=h.lanes,o.child=h.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=h.memoizedProps,o.memoizedState=h.memoizedState,o.updateQueue=h.updateQueue,o.type=h.type,u=h.dependencies,o.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext}),o}function Yd(o,u,h,p,x,E){var V=0;if(p=o,typeof o=="function")Pp(o)&&(V=1);else if(typeof o=="string")V=z6(o,h,zt.current)?26:o==="html"||o==="head"||o==="body"?27:5;else t:switch(o){case D:return o=jr(31,h,u,x),o.elementType=D,o.lanes=E,o;case _:return el(h.children,x,E,u);case w:V=8,x|=24;break;case b:return o=jr(12,h,u,x|2),o.elementType=b,o.lanes=E,o;case N:return o=jr(13,h,u,x),o.elementType=N,o.lanes=E,o;case k:return o=jr(19,h,u,x),o.elementType=k,o.lanes=E,o;default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case S:case I:V=10;break t;case C:V=9;break t;case M:V=11;break t;case O:V=14;break t;case R:V=16,p=null;break t}V=29,h=Error(r(130,o===null?"null":typeof o,"")),p=null}return u=jr(V,h,u,x),u.elementType=o,u.type=p,u.lanes=E,u}function el(o,u,h,p){return o=jr(7,o,p,u),o.lanes=h,o}function kp(o,u,h){return o=jr(6,o,null,u),o.lanes=h,o}function Lp(o,u,h){return u=jr(4,o.children!==null?o.children:[],o.key,u),u.lanes=h,u.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},u}var gu=[],pu=0,Kd=null,Zd=0,fi=[],hi=0,nl=null,Ba=1,Va="";function rl(o,u){gu[pu++]=Zd,gu[pu++]=Kd,Kd=o,Zd=u}function P_(o,u,h){fi[hi++]=Ba,fi[hi++]=Va,fi[hi++]=nl,nl=o;var p=Ba;o=Va;var x=32-ir(p)-1;p&=~(1<<x),h+=1;var E=32-ir(u)+x;if(30<E){var V=x-x%5;E=(p&(1<<V)-1).toString(32),p>>=V,x-=V,Ba=1<<32-ir(u)+x|h<<x|p,Va=E+o}else Ba=1<<E|h<<x|p,Va=o}function Bp(o){o.return!==null&&(rl(o,1),P_(o,1,0))}function Vp(o){for(;o===Kd;)Kd=gu[--pu],gu[pu]=null,Zd=gu[--pu],gu[pu]=null;for(;o===nl;)nl=fi[--hi],fi[hi]=null,Va=fi[--hi],fi[hi]=null,Ba=fi[--hi],fi[hi]=null}var xr=null,Je=null,pe=!1,il=null,ta=!1,Fp=Error(r(519));function al(o){var u=Error(r(418,""));throw gf(ui(u,o)),Fp}function k_(o){var u=o.stateNode,h=o.type,p=o.memoizedProps;switch(u[xn]=o,u[un]=p,h){case"dialog":Jt("cancel",u),Jt("close",u);break;case"iframe":case"object":case"embed":Jt("load",u);break;case"video":case"audio":for(h=0;h<Vf.length;h++)Jt(Vf[h],u);break;case"source":Jt("error",u);break;case"img":case"image":case"link":Jt("error",u),Jt("load",u);break;case"details":Jt("toggle",u);break;case"input":Jt("invalid",u),Ho(u,p.value,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name,!0),Jl(u);break;case"select":Jt("invalid",u);break;case"textarea":Jt("invalid",u),Go(u,p.value,p.defaultValue,p.children),Jl(u)}h=p.children,typeof h!="string"&&typeof h!="number"&&typeof h!="bigint"||u.textContent===""+h||p.suppressHydrationWarning===!0||Qw(u.textContent,h)?(p.popover!=null&&(Jt("beforetoggle",u),Jt("toggle",u)),p.onScroll!=null&&Jt("scroll",u),p.onScrollEnd!=null&&Jt("scrollend",u),p.onClick!=null&&(u.onclick=O0),u=!0):u=!1,u||al(o)}function L_(o){for(xr=o.return;xr;)switch(xr.tag){case 5:case 13:ta=!1;return;case 27:case 3:ta=!0;return;default:xr=xr.return}}function hf(o){if(o!==xr)return!1;if(!pe)return L_(o),pe=!0,!1;var u=o.tag,h;if((h=u!==3&&u!==27)&&((h=u===5)&&(h=o.type,h=!(h!=="form"&&h!=="button")||ev(o.type,o.memoizedProps)),h=!h),h&&Je&&al(o),L_(o),u===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(r(317));t:{for(o=o.nextSibling,u=0;o;){if(o.nodeType===8)if(h=o.data,h==="/$"){if(u===0){Je=Di(o.nextSibling);break t}u--}else h!=="$"&&h!=="$!"&&h!=="$?"||u++;o=o.nextSibling}Je=null}}else u===27?(u=Je,$s(o.type)?(o=av,av=null,Je=o):Je=u):Je=xr?Di(o.stateNode.nextSibling):null;return!0}function df(){Je=xr=null,pe=!1}function B_(){var o=il;return o!==null&&(Rr===null?Rr=o:Rr.push.apply(Rr,o),il=null),o}function gf(o){il===null?il=[o]:il.push(o)}var Up=Mt(null),sl=null,Fa=null;function Ds(o,u,h){wt(Up,u._currentValue),u._currentValue=h}function Ua(o){o._currentValue=Up.current,It(Up)}function jp(o,u,h){for(;o!==null;){var p=o.alternate;if((o.childLanes&u)!==u?(o.childLanes|=u,p!==null&&(p.childLanes|=u)):p!==null&&(p.childLanes&u)!==u&&(p.childLanes|=u),o===h)break;o=o.return}}function zp(o,u,h,p){var x=o.child;for(x!==null&&(x.return=o);x!==null;){var E=x.dependencies;if(E!==null){var V=x.child;E=E.firstContext;t:for(;E!==null;){var j=E;E=x;for(var $=0;$<u.length;$++)if(j.context===u[$]){E.lanes|=h,j=E.alternate,j!==null&&(j.lanes|=h),jp(E.return,h,o),p||(V=null);break t}E=j.next}}else if(x.tag===18){if(V=x.return,V===null)throw Error(r(341));V.lanes|=h,E=V.alternate,E!==null&&(E.lanes|=h),jp(V,h,o),V=null}else V=x.child;if(V!==null)V.return=x;else for(V=x;V!==null;){if(V===o){V=null;break}if(x=V.sibling,x!==null){x.return=V.return,V=x;break}V=V.return}x=V}}function pf(o,u,h,p){o=null;for(var x=u,E=!1;x!==null;){if(!E){if((x.flags&524288)!==0)E=!0;else if((x.flags&262144)!==0)break}if(x.tag===10){var V=x.alternate;if(V===null)throw Error(r(387));if(V=V.memoizedProps,V!==null){var j=x.type;Ur(x.pendingProps.value,V.value)||(o!==null?o.push(j):o=[j])}}else if(x===Ie.current){if(V=x.alternate,V===null)throw Error(r(387));V.memoizedState.memoizedState!==x.memoizedState.memoizedState&&(o!==null?o.push(Gf):o=[Gf])}x=x.return}o!==null&&zp(u,o,h,p),u.flags|=262144}function Qd(o){for(o=o.firstContext;o!==null;){if(!Ur(o.context._currentValue,o.memoizedValue))return!0;o=o.next}return!1}function ol(o){sl=o,Fa=null,o=o.dependencies,o!==null&&(o.firstContext=null)}function ar(o){return V_(sl,o)}function Jd(o,u){return sl===null&&ol(o),V_(o,u)}function V_(o,u){var h=u._currentValue;if(u={context:u,memoizedValue:h,next:null},Fa===null){if(o===null)throw Error(r(308));Fa=u,o.dependencies={lanes:0,firstContext:u},o.flags|=524288}else Fa=Fa.next=u;return h}var j8=typeof AbortController<"u"?AbortController:function(){var o=[],u=this.signal={aborted:!1,addEventListener:function(h,p){o.push(p)}};this.abort=function(){u.aborted=!0,o.forEach(function(h){return h()})}},z8=n.unstable_scheduleCallback,H8=n.unstable_NormalPriority,wn={$$typeof:I,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Hp(){return{controller:new j8,data:new Map,refCount:0}}function mf(o){o.refCount--,o.refCount===0&&z8(H8,function(){o.controller.abort()})}var vf=null,Gp=0,mu=0,vu=null;function G8(o,u){if(vf===null){var h=vf=[];Gp=0,mu=qm(),vu={status:"pending",value:void 0,then:function(p){h.push(p)}}}return Gp++,u.then(F_,F_),u}function F_(){if(--Gp===0&&vf!==null){vu!==null&&(vu.status="fulfilled");var o=vf;vf=null,mu=0,vu=null;for(var u=0;u<o.length;u++)(0,o[u])()}}function $8(o,u){var h=[],p={status:"pending",value:null,reason:null,then:function(x){h.push(x)}};return o.then(function(){p.status="fulfilled",p.value=u;for(var x=0;x<h.length;x++)(0,h[x])(u)},function(x){for(p.status="rejected",p.reason=x,x=0;x<h.length;x++)(0,h[x])(void 0)}),p}var U_=q.S;q.S=function(o,u){typeof u=="object"&&u!==null&&typeof u.then=="function"&&G8(o,u),U_!==null&&U_(o,u)};var ll=Mt(null);function $p(){var o=ll.current;return o!==null?o:Ve.pooledCache}function t0(o,u){u===null?wt(ll,ll.current):wt(ll,u.pool)}function j_(){var o=$p();return o===null?null:{parent:wn._currentValue,pool:o}}var yf=Error(r(460)),z_=Error(r(474)),e0=Error(r(542)),qp={then:function(){}};function H_(o){return o=o.status,o==="fulfilled"||o==="rejected"}function n0(){}function G_(o,u,h){switch(h=o[h],h===void 0?o.push(u):h!==u&&(u.then(n0,n0),u=h),u.status){case"fulfilled":return u.value;case"rejected":throw o=u.reason,q_(o),o;default:if(typeof u.status=="string")u.then(n0,n0);else{if(o=Ve,o!==null&&100<o.shellSuspendCounter)throw Error(r(482));o=u,o.status="pending",o.then(function(p){if(u.status==="pending"){var x=u;x.status="fulfilled",x.value=p}},function(p){if(u.status==="pending"){var x=u;x.status="rejected",x.reason=p}})}switch(u.status){case"fulfilled":return u.value;case"rejected":throw o=u.reason,q_(o),o}throw xf=u,yf}}var xf=null;function $_(){if(xf===null)throw Error(r(459));var o=xf;return xf=null,o}function q_(o){if(o===yf||o===e0)throw Error(r(483))}var Os=!1;function Wp(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Xp(o,u){o=o.updateQueue,u.updateQueue===o&&(u.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,callbacks:null})}function Ms(o){return{lane:o,tag:0,payload:null,callback:null,next:null}}function Ns(o,u,h){var p=o.updateQueue;if(p===null)return null;if(p=p.shared,(be&2)!==0){var x=p.pending;return x===null?u.next=u:(u.next=x.next,x.next=u),p.pending=u,u=Xd(o),M_(o,null,h),u}return Wd(o,p,u,h),Xd(o)}function _f(o,u,h){if(u=u.updateQueue,u!==null&&(u=u.shared,(h&4194048)!==0)){var p=u.lanes;p&=o.pendingLanes,h|=p,u.lanes=h,Wc(o,h)}}function Yp(o,u){var h=o.updateQueue,p=o.alternate;if(p!==null&&(p=p.updateQueue,h===p)){var x=null,E=null;if(h=h.firstBaseUpdate,h!==null){do{var V={lane:h.lane,tag:h.tag,payload:h.payload,callback:null,next:null};E===null?x=E=V:E=E.next=V,h=h.next}while(h!==null);E===null?x=E=u:E=E.next=u}else x=E=u;h={baseState:p.baseState,firstBaseUpdate:x,lastBaseUpdate:E,shared:p.shared,callbacks:p.callbacks},o.updateQueue=h;return}o=h.lastBaseUpdate,o===null?h.firstBaseUpdate=u:o.next=u,h.lastBaseUpdate=u}var Kp=!1;function Af(){if(Kp){var o=vu;if(o!==null)throw o}}function wf(o,u,h,p){Kp=!1;var x=o.updateQueue;Os=!1;var E=x.firstBaseUpdate,V=x.lastBaseUpdate,j=x.shared.pending;if(j!==null){x.shared.pending=null;var $=j,J=$.next;$.next=null,V===null?E=J:V.next=J,V=$;var ut=o.alternate;ut!==null&&(ut=ut.updateQueue,j=ut.lastBaseUpdate,j!==V&&(j===null?ut.firstBaseUpdate=J:j.next=J,ut.lastBaseUpdate=$))}if(E!==null){var dt=x.baseState;V=0,ut=J=$=null,j=E;do{var et=j.lane&-536870913,nt=et!==j.lane;if(nt?(ie&et)===et:(p&et)===et){et!==0&&et===mu&&(Kp=!0),ut!==null&&(ut=ut.next={lane:0,tag:j.tag,payload:j.payload,callback:null,next:null});t:{var Ut=o,Lt=j;et=u;var Me=h;switch(Lt.tag){case 1:if(Ut=Lt.payload,typeof Ut=="function"){dt=Ut.call(Me,dt,et);break t}dt=Ut;break t;case 3:Ut.flags=Ut.flags&-65537|128;case 0:if(Ut=Lt.payload,et=typeof Ut=="function"?Ut.call(Me,dt,et):Ut,et==null)break t;dt=d({},dt,et);break t;case 2:Os=!0}}et=j.callback,et!==null&&(o.flags|=64,nt&&(o.flags|=8192),nt=x.callbacks,nt===null?x.callbacks=[et]:nt.push(et))}else nt={lane:et,tag:j.tag,payload:j.payload,callback:j.callback,next:null},ut===null?(J=ut=nt,$=dt):ut=ut.next=nt,V|=et;if(j=j.next,j===null){if(j=x.shared.pending,j===null)break;nt=j,j=nt.next,nt.next=null,x.lastBaseUpdate=nt,x.shared.pending=null}}while(!0);ut===null&&($=dt),x.baseState=$,x.firstBaseUpdate=J,x.lastBaseUpdate=ut,E===null&&(x.shared.lanes=0),js|=V,o.lanes=V,o.memoizedState=dt}}function W_(o,u){if(typeof o!="function")throw Error(r(191,o));o.call(u)}function X_(o,u){var h=o.callbacks;if(h!==null)for(o.callbacks=null,o=0;o<h.length;o++)W_(h[o],u)}var yu=Mt(null),r0=Mt(0);function Y_(o,u){o=Wa,wt(r0,o),wt(yu,u),Wa=o|u.baseLanes}function Zp(){wt(r0,Wa),wt(yu,yu.current)}function Qp(){Wa=r0.current,It(yu),It(r0)}var Ps=0,Wt=null,De=null,fn=null,i0=!1,xu=!1,ul=!1,a0=0,Ef=0,_u=null,q8=0;function nn(){throw Error(r(321))}function Jp(o,u){if(u===null)return!1;for(var h=0;h<u.length&&h<o.length;h++)if(!Ur(o[h],u[h]))return!1;return!0}function tm(o,u,h,p,x,E){return Ps=E,Wt=u,u.memoizedState=null,u.updateQueue=null,u.lanes=0,q.H=o===null||o.memoizedState===null?MA:NA,ul=!1,E=h(p,x),ul=!1,xu&&(E=Z_(u,h,p,x)),K_(o),E}function K_(o){q.H=f0;var u=De!==null&&De.next!==null;if(Ps=0,fn=De=Wt=null,i0=!1,Ef=0,_u=null,u)throw Error(r(300));o===null||Vn||(o=o.dependencies,o!==null&&Qd(o)&&(Vn=!0))}function Z_(o,u,h,p){Wt=o;var x=0;do{if(xu&&(_u=null),Ef=0,xu=!1,25<=x)throw Error(r(301));if(x+=1,fn=De=null,o.updateQueue!=null){var E=o.updateQueue;E.lastEffect=null,E.events=null,E.stores=null,E.memoCache!=null&&(E.memoCache.index=0)}q.H=J8,E=u(h,p)}while(xu);return E}function W8(){var o=q.H,u=o.useState()[0];return u=typeof u.then=="function"?bf(u):u,o=o.useState()[0],(De!==null?De.memoizedState:null)!==o&&(Wt.flags|=1024),u}function em(){var o=a0!==0;return a0=0,o}function nm(o,u,h){u.updateQueue=o.updateQueue,u.flags&=-2053,o.lanes&=~h}function rm(o){if(i0){for(o=o.memoizedState;o!==null;){var u=o.queue;u!==null&&(u.pending=null),o=o.next}i0=!1}Ps=0,fn=De=Wt=null,xu=!1,Ef=a0=0,_u=null}function Cr(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return fn===null?Wt.memoizedState=fn=o:fn=fn.next=o,fn}function hn(){if(De===null){var o=Wt.alternate;o=o!==null?o.memoizedState:null}else o=De.next;var u=fn===null?Wt.memoizedState:fn.next;if(u!==null)fn=u,De=o;else{if(o===null)throw Wt.alternate===null?Error(r(467)):Error(r(310));De=o,o={memoizedState:De.memoizedState,baseState:De.baseState,baseQueue:De.baseQueue,queue:De.queue,next:null},fn===null?Wt.memoizedState=fn=o:fn=fn.next=o}return fn}function im(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function bf(o){var u=Ef;return Ef+=1,_u===null&&(_u=[]),o=G_(_u,o,u),u=Wt,(fn===null?u.memoizedState:fn.next)===null&&(u=u.alternate,q.H=u===null||u.memoizedState===null?MA:NA),o}function s0(o){if(o!==null&&typeof o=="object"){if(typeof o.then=="function")return bf(o);if(o.$$typeof===I)return ar(o)}throw Error(r(438,String(o)))}function am(o){var u=null,h=Wt.updateQueue;if(h!==null&&(u=h.memoCache),u==null){var p=Wt.alternate;p!==null&&(p=p.updateQueue,p!==null&&(p=p.memoCache,p!=null&&(u={data:p.data.map(function(x){return x.slice()}),index:0})))}if(u==null&&(u={data:[],index:0}),h===null&&(h=im(),Wt.updateQueue=h),h.memoCache=u,h=u.data[u.index],h===void 0)for(h=u.data[u.index]=Array(o),p=0;p<o;p++)h[p]=L;return u.index++,h}function ja(o,u){return typeof u=="function"?u(o):u}function o0(o){var u=hn();return sm(u,De,o)}function sm(o,u,h){var p=o.queue;if(p===null)throw Error(r(311));p.lastRenderedReducer=h;var x=o.baseQueue,E=p.pending;if(E!==null){if(x!==null){var V=x.next;x.next=E.next,E.next=V}u.baseQueue=x=E,p.pending=null}if(E=o.baseState,x===null)o.memoizedState=E;else{u=x.next;var j=V=null,$=null,J=u,ut=!1;do{var dt=J.lane&-536870913;if(dt!==J.lane?(ie&dt)===dt:(Ps&dt)===dt){var et=J.revertLane;if(et===0)$!==null&&($=$.next={lane:0,revertLane:0,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null}),dt===mu&&(ut=!0);else if((Ps&et)===et){J=J.next,et===mu&&(ut=!0);continue}else dt={lane:0,revertLane:J.revertLane,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null},$===null?(j=$=dt,V=E):$=$.next=dt,Wt.lanes|=et,js|=et;dt=J.action,ul&&h(E,dt),E=J.hasEagerState?J.eagerState:h(E,dt)}else et={lane:dt,revertLane:J.revertLane,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null},$===null?(j=$=et,V=E):$=$.next=et,Wt.lanes|=dt,js|=dt;J=J.next}while(J!==null&&J!==u);if($===null?V=E:$.next=j,!Ur(E,o.memoizedState)&&(Vn=!0,ut&&(h=vu,h!==null)))throw h;o.memoizedState=E,o.baseState=V,o.baseQueue=$,p.lastRenderedState=E}return x===null&&(p.lanes=0),[o.memoizedState,p.dispatch]}function om(o){var u=hn(),h=u.queue;if(h===null)throw Error(r(311));h.lastRenderedReducer=o;var p=h.dispatch,x=h.pending,E=u.memoizedState;if(x!==null){h.pending=null;var V=x=x.next;do E=o(E,V.action),V=V.next;while(V!==x);Ur(E,u.memoizedState)||(Vn=!0),u.memoizedState=E,u.baseQueue===null&&(u.baseState=E),h.lastRenderedState=E}return[E,p]}function Q_(o,u,h){var p=Wt,x=hn(),E=pe;if(E){if(h===void 0)throw Error(r(407));h=h()}else h=u();var V=!Ur((De||x).memoizedState,h);V&&(x.memoizedState=h,Vn=!0),x=x.queue;var j=eA.bind(null,p,x,o);if(Sf(2048,8,j,[o]),x.getSnapshot!==u||V||fn!==null&&fn.memoizedState.tag&1){if(p.flags|=2048,Au(9,l0(),tA.bind(null,p,x,h,u),null),Ve===null)throw Error(r(349));E||(Ps&124)!==0||J_(p,u,h)}return h}function J_(o,u,h){o.flags|=16384,o={getSnapshot:u,value:h},u=Wt.updateQueue,u===null?(u=im(),Wt.updateQueue=u,u.stores=[o]):(h=u.stores,h===null?u.stores=[o]:h.push(o))}function tA(o,u,h,p){u.value=h,u.getSnapshot=p,nA(u)&&rA(o)}function eA(o,u,h){return h(function(){nA(u)&&rA(o)})}function nA(o){var u=o.getSnapshot;o=o.value;try{var h=u();return!Ur(o,h)}catch{return!0}}function rA(o){var u=hu(o,2);u!==null&&qr(u,o,2)}function lm(o){var u=Cr();if(typeof o=="function"){var h=o;if(o=h(),ul){Vr(!0);try{h()}finally{Vr(!1)}}}return u.memoizedState=u.baseState=o,u.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ja,lastRenderedState:o},u}function iA(o,u,h,p){return o.baseState=h,sm(o,De,typeof p=="function"?p:ja)}function X8(o,u,h,p,x){if(c0(o))throw Error(r(485));if(o=u.action,o!==null){var E={payload:x,action:o,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(V){E.listeners.push(V)}};q.T!==null?h(!0):E.isTransition=!1,p(E),h=u.pending,h===null?(E.next=u.pending=E,aA(u,E)):(E.next=h.next,u.pending=h.next=E)}}function aA(o,u){var h=u.action,p=u.payload,x=o.state;if(u.isTransition){var E=q.T,V={};q.T=V;try{var j=h(x,p),$=q.S;$!==null&&$(V,j),sA(o,u,j)}catch(J){um(o,u,J)}finally{q.T=E}}else try{E=h(x,p),sA(o,u,E)}catch(J){um(o,u,J)}}function sA(o,u,h){h!==null&&typeof h=="object"&&typeof h.then=="function"?h.then(function(p){oA(o,u,p)},function(p){return um(o,u,p)}):oA(o,u,h)}function oA(o,u,h){u.status="fulfilled",u.value=h,lA(u),o.state=h,u=o.pending,u!==null&&(h=u.next,h===u?o.pending=null:(h=h.next,u.next=h,aA(o,h)))}function um(o,u,h){var p=o.pending;if(o.pending=null,p!==null){p=p.next;do u.status="rejected",u.reason=h,lA(u),u=u.next;while(u!==p)}o.action=null}function lA(o){o=o.listeners;for(var u=0;u<o.length;u++)(0,o[u])()}function uA(o,u){return u}function cA(o,u){if(pe){var h=Ve.formState;if(h!==null){t:{var p=Wt;if(pe){if(Je){e:{for(var x=Je,E=ta;x.nodeType!==8;){if(!E){x=null;break e}if(x=Di(x.nextSibling),x===null){x=null;break e}}E=x.data,x=E==="F!"||E==="F"?x:null}if(x){Je=Di(x.nextSibling),p=x.data==="F!";break t}}al(p)}p=!1}p&&(u=h[0])}}return h=Cr(),h.memoizedState=h.baseState=u,p={pending:null,lanes:0,dispatch:null,lastRenderedReducer:uA,lastRenderedState:u},h.queue=p,h=RA.bind(null,Wt,p),p.dispatch=h,p=lm(!1),E=gm.bind(null,Wt,!1,p.queue),p=Cr(),x={state:u,dispatch:null,action:o,pending:null},p.queue=x,h=X8.bind(null,Wt,x,E,h),x.dispatch=h,p.memoizedState=o,[u,h,!1]}function fA(o){var u=hn();return hA(u,De,o)}function hA(o,u,h){if(u=sm(o,u,uA)[0],o=o0(ja)[0],typeof u=="object"&&u!==null&&typeof u.then=="function")try{var p=bf(u)}catch(V){throw V===yf?e0:V}else p=u;u=hn();var x=u.queue,E=x.dispatch;return h!==u.memoizedState&&(Wt.flags|=2048,Au(9,l0(),Y8.bind(null,x,h),null)),[p,E,o]}function Y8(o,u){o.action=u}function dA(o){var u=hn(),h=De;if(h!==null)return hA(u,h,o);hn(),u=u.memoizedState,h=hn();var p=h.queue.dispatch;return h.memoizedState=o,[u,p,!1]}function Au(o,u,h,p){return o={tag:o,create:h,deps:p,inst:u,next:null},u=Wt.updateQueue,u===null&&(u=im(),Wt.updateQueue=u),h=u.lastEffect,h===null?u.lastEffect=o.next=o:(p=h.next,h.next=o,o.next=p,u.lastEffect=o),o}function l0(){return{destroy:void 0,resource:void 0}}function gA(){return hn().memoizedState}function u0(o,u,h,p){var x=Cr();p=p===void 0?null:p,Wt.flags|=o,x.memoizedState=Au(1|u,l0(),h,p)}function Sf(o,u,h,p){var x=hn();p=p===void 0?null:p;var E=x.memoizedState.inst;De!==null&&p!==null&&Jp(p,De.memoizedState.deps)?x.memoizedState=Au(u,E,h,p):(Wt.flags|=o,x.memoizedState=Au(1|u,E,h,p))}function pA(o,u){u0(8390656,8,o,u)}function mA(o,u){Sf(2048,8,o,u)}function vA(o,u){return Sf(4,2,o,u)}function yA(o,u){return Sf(4,4,o,u)}function xA(o,u){if(typeof u=="function"){o=o();var h=u(o);return function(){typeof h=="function"?h():u(null)}}if(u!=null)return o=o(),u.current=o,function(){u.current=null}}function _A(o,u,h){h=h!=null?h.concat([o]):null,Sf(4,4,xA.bind(null,u,o),h)}function cm(){}function AA(o,u){var h=hn();u=u===void 0?null:u;var p=h.memoizedState;return u!==null&&Jp(u,p[1])?p[0]:(h.memoizedState=[o,u],o)}function wA(o,u){var h=hn();u=u===void 0?null:u;var p=h.memoizedState;if(u!==null&&Jp(u,p[1]))return p[0];if(p=o(),ul){Vr(!0);try{o()}finally{Vr(!1)}}return h.memoizedState=[p,u],p}function fm(o,u,h){return h===void 0||(Ps&1073741824)!==0?o.memoizedState=u:(o.memoizedState=h,o=Sw(),Wt.lanes|=o,js|=o,h)}function EA(o,u,h,p){return Ur(h,u)?h:yu.current!==null?(o=fm(o,h,p),Ur(o,u)||(Vn=!0),o):(Ps&42)===0?(Vn=!0,o.memoizedState=h):(o=Sw(),Wt.lanes|=o,js|=o,u)}function bA(o,u,h,p,x){var E=Z.p;Z.p=E!==0&&8>E?E:8;var V=q.T,j={};q.T=j,gm(o,!1,u,h);try{var $=x(),J=q.S;if(J!==null&&J(j,$),$!==null&&typeof $=="object"&&typeof $.then=="function"){var ut=$8($,p);Tf(o,u,ut,$r(o))}else Tf(o,u,p,$r(o))}catch(dt){Tf(o,u,{then:function(){},status:"rejected",reason:dt},$r())}finally{Z.p=E,q.T=V}}function K8(){}function hm(o,u,h,p){if(o.tag!==5)throw Error(r(476));var x=SA(o).queue;bA(o,x,u,it,h===null?K8:function(){return TA(o),h(p)})}function SA(o){var u=o.memoizedState;if(u!==null)return u;u={memoizedState:it,baseState:it,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ja,lastRenderedState:it},next:null};var h={};return u.next={memoizedState:h,baseState:h,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ja,lastRenderedState:h},next:null},o.memoizedState=u,o=o.alternate,o!==null&&(o.memoizedState=u),u}function TA(o){var u=SA(o).next.queue;Tf(o,u,{},$r())}function dm(){return ar(Gf)}function CA(){return hn().memoizedState}function IA(){return hn().memoizedState}function Z8(o){for(var u=o.return;u!==null;){switch(u.tag){case 24:case 3:var h=$r();o=Ms(h);var p=Ns(u,o,h);p!==null&&(qr(p,u,h),_f(p,u,h)),u={cache:Hp()},o.payload=u;return}u=u.return}}function Q8(o,u,h){var p=$r();h={lane:p,revertLane:0,action:h,hasEagerState:!1,eagerState:null,next:null},c0(o)?DA(u,h):(h=Np(o,u,h,p),h!==null&&(qr(h,o,p),OA(h,u,p)))}function RA(o,u,h){var p=$r();Tf(o,u,h,p)}function Tf(o,u,h,p){var x={lane:p,revertLane:0,action:h,hasEagerState:!1,eagerState:null,next:null};if(c0(o))DA(u,x);else{var E=o.alternate;if(o.lanes===0&&(E===null||E.lanes===0)&&(E=u.lastRenderedReducer,E!==null))try{var V=u.lastRenderedState,j=E(V,h);if(x.hasEagerState=!0,x.eagerState=j,Ur(j,V))return Wd(o,u,x,0),Ve===null&&qd(),!1}catch{}finally{}if(h=Np(o,u,x,p),h!==null)return qr(h,o,p),OA(h,u,p),!0}return!1}function gm(o,u,h,p){if(p={lane:2,revertLane:qm(),action:p,hasEagerState:!1,eagerState:null,next:null},c0(o)){if(u)throw Error(r(479))}else u=Np(o,h,p,2),u!==null&&qr(u,o,2)}function c0(o){var u=o.alternate;return o===Wt||u!==null&&u===Wt}function DA(o,u){xu=i0=!0;var h=o.pending;h===null?u.next=u:(u.next=h.next,h.next=u),o.pending=u}function OA(o,u,h){if((h&4194048)!==0){var p=u.lanes;p&=o.pendingLanes,h|=p,u.lanes=h,Wc(o,h)}}var f0={readContext:ar,use:s0,useCallback:nn,useContext:nn,useEffect:nn,useImperativeHandle:nn,useLayoutEffect:nn,useInsertionEffect:nn,useMemo:nn,useReducer:nn,useRef:nn,useState:nn,useDebugValue:nn,useDeferredValue:nn,useTransition:nn,useSyncExternalStore:nn,useId:nn,useHostTransitionStatus:nn,useFormState:nn,useActionState:nn,useOptimistic:nn,useMemoCache:nn,useCacheRefresh:nn},MA={readContext:ar,use:s0,useCallback:function(o,u){return Cr().memoizedState=[o,u===void 0?null:u],o},useContext:ar,useEffect:pA,useImperativeHandle:function(o,u,h){h=h!=null?h.concat([o]):null,u0(4194308,4,xA.bind(null,u,o),h)},useLayoutEffect:function(o,u){return u0(4194308,4,o,u)},useInsertionEffect:function(o,u){u0(4,2,o,u)},useMemo:function(o,u){var h=Cr();u=u===void 0?null:u;var p=o();if(ul){Vr(!0);try{o()}finally{Vr(!1)}}return h.memoizedState=[p,u],p},useReducer:function(o,u,h){var p=Cr();if(h!==void 0){var x=h(u);if(ul){Vr(!0);try{h(u)}finally{Vr(!1)}}}else x=u;return p.memoizedState=p.baseState=x,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:x},p.queue=o,o=o.dispatch=Q8.bind(null,Wt,o),[p.memoizedState,o]},useRef:function(o){var u=Cr();return o={current:o},u.memoizedState=o},useState:function(o){o=lm(o);var u=o.queue,h=RA.bind(null,Wt,u);return u.dispatch=h,[o.memoizedState,h]},useDebugValue:cm,useDeferredValue:function(o,u){var h=Cr();return fm(h,o,u)},useTransition:function(){var o=lm(!1);return o=bA.bind(null,Wt,o.queue,!0,!1),Cr().memoizedState=o,[!1,o]},useSyncExternalStore:function(o,u,h){var p=Wt,x=Cr();if(pe){if(h===void 0)throw Error(r(407));h=h()}else{if(h=u(),Ve===null)throw Error(r(349));(ie&124)!==0||J_(p,u,h)}x.memoizedState=h;var E={value:h,getSnapshot:u};return x.queue=E,pA(eA.bind(null,p,E,o),[o]),p.flags|=2048,Au(9,l0(),tA.bind(null,p,E,h,u),null),h},useId:function(){var o=Cr(),u=Ve.identifierPrefix;if(pe){var h=Va,p=Ba;h=(p&~(1<<32-ir(p)-1)).toString(32)+h,u="«"+u+"R"+h,h=a0++,0<h&&(u+="H"+h.toString(32)),u+="»"}else h=q8++,u="«"+u+"r"+h.toString(32)+"»";return o.memoizedState=u},useHostTransitionStatus:dm,useFormState:cA,useActionState:cA,useOptimistic:function(o){var u=Cr();u.memoizedState=u.baseState=o;var h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return u.queue=h,u=gm.bind(null,Wt,!0,h),h.dispatch=u,[o,u]},useMemoCache:am,useCacheRefresh:function(){return Cr().memoizedState=Z8.bind(null,Wt)}},NA={readContext:ar,use:s0,useCallback:AA,useContext:ar,useEffect:mA,useImperativeHandle:_A,useInsertionEffect:vA,useLayoutEffect:yA,useMemo:wA,useReducer:o0,useRef:gA,useState:function(){return o0(ja)},useDebugValue:cm,useDeferredValue:function(o,u){var h=hn();return EA(h,De.memoizedState,o,u)},useTransition:function(){var o=o0(ja)[0],u=hn().memoizedState;return[typeof o=="boolean"?o:bf(o),u]},useSyncExternalStore:Q_,useId:CA,useHostTransitionStatus:dm,useFormState:fA,useActionState:fA,useOptimistic:function(o,u){var h=hn();return iA(h,De,o,u)},useMemoCache:am,useCacheRefresh:IA},J8={readContext:ar,use:s0,useCallback:AA,useContext:ar,useEffect:mA,useImperativeHandle:_A,useInsertionEffect:vA,useLayoutEffect:yA,useMemo:wA,useReducer:om,useRef:gA,useState:function(){return om(ja)},useDebugValue:cm,useDeferredValue:function(o,u){var h=hn();return De===null?fm(h,o,u):EA(h,De.memoizedState,o,u)},useTransition:function(){var o=om(ja)[0],u=hn().memoizedState;return[typeof o=="boolean"?o:bf(o),u]},useSyncExternalStore:Q_,useId:CA,useHostTransitionStatus:dm,useFormState:dA,useActionState:dA,useOptimistic:function(o,u){var h=hn();return De!==null?iA(h,De,o,u):(h.baseState=o,[o,h.queue.dispatch])},useMemoCache:am,useCacheRefresh:IA},wu=null,Cf=0;function h0(o){var u=Cf;return Cf+=1,wu===null&&(wu=[]),G_(wu,o,u)}function If(o,u){u=u.props.ref,o.ref=u!==void 0?u:null}function d0(o,u){throw u.$$typeof===g?Error(r(525)):(o=Object.prototype.toString.call(u),Error(r(31,o==="[object Object]"?"object with keys {"+Object.keys(u).join(", ")+"}":o)))}function PA(o){var u=o._init;return u(o._payload)}function kA(o){function u(Y,X){if(o){var Q=Y.deletions;Q===null?(Y.deletions=[X],Y.flags|=16):Q.push(X)}}function h(Y,X){if(!o)return null;for(;X!==null;)u(Y,X),X=X.sibling;return null}function p(Y){for(var X=new Map;Y!==null;)Y.key!==null?X.set(Y.key,Y):X.set(Y.index,Y),Y=Y.sibling;return X}function x(Y,X){return Y=La(Y,X),Y.index=0,Y.sibling=null,Y}function E(Y,X,Q){return Y.index=Q,o?(Q=Y.alternate,Q!==null?(Q=Q.index,Q<X?(Y.flags|=67108866,X):Q):(Y.flags|=67108866,X)):(Y.flags|=1048576,X)}function V(Y){return o&&Y.alternate===null&&(Y.flags|=67108866),Y}function j(Y,X,Q,ft){return X===null||X.tag!==6?(X=kp(Q,Y.mode,ft),X.return=Y,X):(X=x(X,Q),X.return=Y,X)}function $(Y,X,Q,ft){var Tt=Q.type;return Tt===_?ut(Y,X,Q.props.children,ft,Q.key):X!==null&&(X.elementType===Tt||typeof Tt=="object"&&Tt!==null&&Tt.$$typeof===R&&PA(Tt)===X.type)?(X=x(X,Q.props),If(X,Q),X.return=Y,X):(X=Yd(Q.type,Q.key,Q.props,null,Y.mode,ft),If(X,Q),X.return=Y,X)}function J(Y,X,Q,ft){return X===null||X.tag!==4||X.stateNode.containerInfo!==Q.containerInfo||X.stateNode.implementation!==Q.implementation?(X=Lp(Q,Y.mode,ft),X.return=Y,X):(X=x(X,Q.children||[]),X.return=Y,X)}function ut(Y,X,Q,ft,Tt){return X===null||X.tag!==7?(X=el(Q,Y.mode,ft,Tt),X.return=Y,X):(X=x(X,Q),X.return=Y,X)}function dt(Y,X,Q){if(typeof X=="string"&&X!==""||typeof X=="number"||typeof X=="bigint")return X=kp(""+X,Y.mode,Q),X.return=Y,X;if(typeof X=="object"&&X!==null){switch(X.$$typeof){case m:return Q=Yd(X.type,X.key,X.props,null,Y.mode,Q),If(Q,X),Q.return=Y,Q;case v:return X=Lp(X,Y.mode,Q),X.return=Y,X;case R:var ft=X._init;return X=ft(X._payload),dt(Y,X,Q)}if(vt(X)||U(X))return X=el(X,Y.mode,Q,null),X.return=Y,X;if(typeof X.then=="function")return dt(Y,h0(X),Q);if(X.$$typeof===I)return dt(Y,Jd(Y,X),Q);d0(Y,X)}return null}function et(Y,X,Q,ft){var Tt=X!==null?X.key:null;if(typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint")return Tt!==null?null:j(Y,X,""+Q,ft);if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case m:return Q.key===Tt?$(Y,X,Q,ft):null;case v:return Q.key===Tt?J(Y,X,Q,ft):null;case R:return Tt=Q._init,Q=Tt(Q._payload),et(Y,X,Q,ft)}if(vt(Q)||U(Q))return Tt!==null?null:ut(Y,X,Q,ft,null);if(typeof Q.then=="function")return et(Y,X,h0(Q),ft);if(Q.$$typeof===I)return et(Y,X,Jd(Y,Q),ft);d0(Y,Q)}return null}function nt(Y,X,Q,ft,Tt){if(typeof ft=="string"&&ft!==""||typeof ft=="number"||typeof ft=="bigint")return Y=Y.get(Q)||null,j(X,Y,""+ft,Tt);if(typeof ft=="object"&&ft!==null){switch(ft.$$typeof){case m:return Y=Y.get(ft.key===null?Q:ft.key)||null,$(X,Y,ft,Tt);case v:return Y=Y.get(ft.key===null?Q:ft.key)||null,J(X,Y,ft,Tt);case R:var Kt=ft._init;return ft=Kt(ft._payload),nt(Y,X,Q,ft,Tt)}if(vt(ft)||U(ft))return Y=Y.get(Q)||null,ut(X,Y,ft,Tt,null);if(typeof ft.then=="function")return nt(Y,X,Q,h0(ft),Tt);if(ft.$$typeof===I)return nt(Y,X,Q,Jd(X,ft),Tt);d0(X,ft)}return null}function Ut(Y,X,Q,ft){for(var Tt=null,Kt=null,Dt=X,Bt=X=0,Un=null;Dt!==null&&Bt<Q.length;Bt++){Dt.index>Bt?(Un=Dt,Dt=null):Un=Dt.sibling;var ce=et(Y,Dt,Q[Bt],ft);if(ce===null){Dt===null&&(Dt=Un);break}o&&Dt&&ce.alternate===null&&u(Y,Dt),X=E(ce,X,Bt),Kt===null?Tt=ce:Kt.sibling=ce,Kt=ce,Dt=Un}if(Bt===Q.length)return h(Y,Dt),pe&&rl(Y,Bt),Tt;if(Dt===null){for(;Bt<Q.length;Bt++)Dt=dt(Y,Q[Bt],ft),Dt!==null&&(X=E(Dt,X,Bt),Kt===null?Tt=Dt:Kt.sibling=Dt,Kt=Dt);return pe&&rl(Y,Bt),Tt}for(Dt=p(Dt);Bt<Q.length;Bt++)Un=nt(Dt,Y,Bt,Q[Bt],ft),Un!==null&&(o&&Un.alternate!==null&&Dt.delete(Un.key===null?Bt:Un.key),X=E(Un,X,Bt),Kt===null?Tt=Un:Kt.sibling=Un,Kt=Un);return o&&Dt.forEach(function(Ks){return u(Y,Ks)}),pe&&rl(Y,Bt),Tt}function Lt(Y,X,Q,ft){if(Q==null)throw Error(r(151));for(var Tt=null,Kt=null,Dt=X,Bt=X=0,Un=null,ce=Q.next();Dt!==null&&!ce.done;Bt++,ce=Q.next()){Dt.index>Bt?(Un=Dt,Dt=null):Un=Dt.sibling;var Ks=et(Y,Dt,ce.value,ft);if(Ks===null){Dt===null&&(Dt=Un);break}o&&Dt&&Ks.alternate===null&&u(Y,Dt),X=E(Ks,X,Bt),Kt===null?Tt=Ks:Kt.sibling=Ks,Kt=Ks,Dt=Un}if(ce.done)return h(Y,Dt),pe&&rl(Y,Bt),Tt;if(Dt===null){for(;!ce.done;Bt++,ce=Q.next())ce=dt(Y,ce.value,ft),ce!==null&&(X=E(ce,X,Bt),Kt===null?Tt=ce:Kt.sibling=ce,Kt=ce);return pe&&rl(Y,Bt),Tt}for(Dt=p(Dt);!ce.done;Bt++,ce=Q.next())ce=nt(Dt,Y,Bt,ce.value,ft),ce!==null&&(o&&ce.alternate!==null&&Dt.delete(ce.key===null?Bt:ce.key),X=E(ce,X,Bt),Kt===null?Tt=ce:Kt.sibling=ce,Kt=ce);return o&&Dt.forEach(function(tD){return u(Y,tD)}),pe&&rl(Y,Bt),Tt}function Me(Y,X,Q,ft){if(typeof Q=="object"&&Q!==null&&Q.type===_&&Q.key===null&&(Q=Q.props.children),typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case m:t:{for(var Tt=Q.key;X!==null;){if(X.key===Tt){if(Tt=Q.type,Tt===_){if(X.tag===7){h(Y,X.sibling),ft=x(X,Q.props.children),ft.return=Y,Y=ft;break t}}else if(X.elementType===Tt||typeof Tt=="object"&&Tt!==null&&Tt.$$typeof===R&&PA(Tt)===X.type){h(Y,X.sibling),ft=x(X,Q.props),If(ft,Q),ft.return=Y,Y=ft;break t}h(Y,X);break}else u(Y,X);X=X.sibling}Q.type===_?(ft=el(Q.props.children,Y.mode,ft,Q.key),ft.return=Y,Y=ft):(ft=Yd(Q.type,Q.key,Q.props,null,Y.mode,ft),If(ft,Q),ft.return=Y,Y=ft)}return V(Y);case v:t:{for(Tt=Q.key;X!==null;){if(X.key===Tt)if(X.tag===4&&X.stateNode.containerInfo===Q.containerInfo&&X.stateNode.implementation===Q.implementation){h(Y,X.sibling),ft=x(X,Q.children||[]),ft.return=Y,Y=ft;break t}else{h(Y,X);break}else u(Y,X);X=X.sibling}ft=Lp(Q,Y.mode,ft),ft.return=Y,Y=ft}return V(Y);case R:return Tt=Q._init,Q=Tt(Q._payload),Me(Y,X,Q,ft)}if(vt(Q))return Ut(Y,X,Q,ft);if(U(Q)){if(Tt=U(Q),typeof Tt!="function")throw Error(r(150));return Q=Tt.call(Q),Lt(Y,X,Q,ft)}if(typeof Q.then=="function")return Me(Y,X,h0(Q),ft);if(Q.$$typeof===I)return Me(Y,X,Jd(Y,Q),ft);d0(Y,Q)}return typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint"?(Q=""+Q,X!==null&&X.tag===6?(h(Y,X.sibling),ft=x(X,Q),ft.return=Y,Y=ft):(h(Y,X),ft=kp(Q,Y.mode,ft),ft.return=Y,Y=ft),V(Y)):h(Y,X)}return function(Y,X,Q,ft){try{Cf=0;var Tt=Me(Y,X,Q,ft);return wu=null,Tt}catch(Dt){if(Dt===yf||Dt===e0)throw Dt;var Kt=jr(29,Dt,null,Y.mode);return Kt.lanes=ft,Kt.return=Y,Kt}finally{}}}var Eu=kA(!0),LA=kA(!1),di=Mt(null),ea=null;function ks(o){var u=o.alternate;wt(En,En.current&1),wt(di,o),ea===null&&(u===null||yu.current!==null||u.memoizedState!==null)&&(ea=o)}function BA(o){if(o.tag===22){if(wt(En,En.current),wt(di,o),ea===null){var u=o.alternate;u!==null&&u.memoizedState!==null&&(ea=o)}}else Ls()}function Ls(){wt(En,En.current),wt(di,di.current)}function za(o){It(di),ea===o&&(ea=null),It(En)}var En=Mt(0);function g0(o){for(var u=o;u!==null;){if(u.tag===13){var h=u.memoizedState;if(h!==null&&(h=h.dehydrated,h===null||h.data==="$?"||iv(h)))return u}else if(u.tag===19&&u.memoizedProps.revealOrder!==void 0){if((u.flags&128)!==0)return u}else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===o)break;for(;u.sibling===null;){if(u.return===null||u.return===o)return null;u=u.return}u.sibling.return=u.return,u=u.sibling}return null}function pm(o,u,h,p){u=o.memoizedState,h=h(p,u),h=h==null?u:d({},u,h),o.memoizedState=h,o.lanes===0&&(o.updateQueue.baseState=h)}var mm={enqueueSetState:function(o,u,h){o=o._reactInternals;var p=$r(),x=Ms(p);x.payload=u,h!=null&&(x.callback=h),u=Ns(o,x,p),u!==null&&(qr(u,o,p),_f(u,o,p))},enqueueReplaceState:function(o,u,h){o=o._reactInternals;var p=$r(),x=Ms(p);x.tag=1,x.payload=u,h!=null&&(x.callback=h),u=Ns(o,x,p),u!==null&&(qr(u,o,p),_f(u,o,p))},enqueueForceUpdate:function(o,u){o=o._reactInternals;var h=$r(),p=Ms(h);p.tag=2,u!=null&&(p.callback=u),u=Ns(o,p,h),u!==null&&(qr(u,o,h),_f(u,o,h))}};function VA(o,u,h,p,x,E,V){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(p,E,V):u.prototype&&u.prototype.isPureReactComponent?!cf(h,p)||!cf(x,E):!0}function FA(o,u,h,p){o=u.state,typeof u.componentWillReceiveProps=="function"&&u.componentWillReceiveProps(h,p),typeof u.UNSAFE_componentWillReceiveProps=="function"&&u.UNSAFE_componentWillReceiveProps(h,p),u.state!==o&&mm.enqueueReplaceState(u,u.state,null)}function cl(o,u){var h=u;if("ref"in u){h={};for(var p in u)p!=="ref"&&(h[p]=u[p])}if(o=o.defaultProps){h===u&&(h=d({},h));for(var x in o)h[x]===void 0&&(h[x]=o[x])}return h}var p0=typeof reportError=="function"?reportError:function(o){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var u=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof o=="object"&&o!==null&&typeof o.message=="string"?String(o.message):String(o),error:o});if(!window.dispatchEvent(u))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",o);return}console.error(o)};function UA(o){p0(o)}function jA(o){console.error(o)}function zA(o){p0(o)}function m0(o,u){try{var h=o.onUncaughtError;h(u.value,{componentStack:u.stack})}catch(p){setTimeout(function(){throw p})}}function HA(o,u,h){try{var p=o.onCaughtError;p(h.value,{componentStack:h.stack,errorBoundary:u.tag===1?u.stateNode:null})}catch(x){setTimeout(function(){throw x})}}function vm(o,u,h){return h=Ms(h),h.tag=3,h.payload={element:null},h.callback=function(){m0(o,u)},h}function GA(o){return o=Ms(o),o.tag=3,o}function $A(o,u,h,p){var x=h.type.getDerivedStateFromError;if(typeof x=="function"){var E=p.value;o.payload=function(){return x(E)},o.callback=function(){HA(u,h,p)}}var V=h.stateNode;V!==null&&typeof V.componentDidCatch=="function"&&(o.callback=function(){HA(u,h,p),typeof x!="function"&&(zs===null?zs=new Set([this]):zs.add(this));var j=p.stack;this.componentDidCatch(p.value,{componentStack:j!==null?j:""})})}function t6(o,u,h,p,x){if(h.flags|=32768,p!==null&&typeof p=="object"&&typeof p.then=="function"){if(u=h.alternate,u!==null&&pf(u,h,x,!0),h=di.current,h!==null){switch(h.tag){case 13:return ea===null?jm():h.alternate===null&&tn===0&&(tn=3),h.flags&=-257,h.flags|=65536,h.lanes=x,p===qp?h.flags|=16384:(u=h.updateQueue,u===null?h.updateQueue=new Set([p]):u.add(p),Hm(o,p,x)),!1;case 22:return h.flags|=65536,p===qp?h.flags|=16384:(u=h.updateQueue,u===null?(u={transitions:null,markerInstances:null,retryQueue:new Set([p])},h.updateQueue=u):(h=u.retryQueue,h===null?u.retryQueue=new Set([p]):h.add(p)),Hm(o,p,x)),!1}throw Error(r(435,h.tag))}return Hm(o,p,x),jm(),!1}if(pe)return u=di.current,u!==null?((u.flags&65536)===0&&(u.flags|=256),u.flags|=65536,u.lanes=x,p!==Fp&&(o=Error(r(422),{cause:p}),gf(ui(o,h)))):(p!==Fp&&(u=Error(r(423),{cause:p}),gf(ui(u,h))),o=o.current.alternate,o.flags|=65536,x&=-x,o.lanes|=x,p=ui(p,h),x=vm(o.stateNode,p,x),Yp(o,x),tn!==4&&(tn=2)),!1;var E=Error(r(520),{cause:p});if(E=ui(E,h),kf===null?kf=[E]:kf.push(E),tn!==4&&(tn=2),u===null)return!0;p=ui(p,h),h=u;do{switch(h.tag){case 3:return h.flags|=65536,o=x&-x,h.lanes|=o,o=vm(h.stateNode,p,o),Yp(h,o),!1;case 1:if(u=h.type,E=h.stateNode,(h.flags&128)===0&&(typeof u.getDerivedStateFromError=="function"||E!==null&&typeof E.componentDidCatch=="function"&&(zs===null||!zs.has(E))))return h.flags|=65536,x&=-x,h.lanes|=x,x=GA(x),$A(x,o,h,p),Yp(h,x),!1}h=h.return}while(h!==null);return!1}var qA=Error(r(461)),Vn=!1;function Yn(o,u,h,p){u.child=o===null?LA(u,null,h,p):Eu(u,o.child,h,p)}function WA(o,u,h,p,x){h=h.render;var E=u.ref;if("ref"in p){var V={};for(var j in p)j!=="ref"&&(V[j]=p[j])}else V=p;return ol(u),p=tm(o,u,h,V,E,x),j=em(),o!==null&&!Vn?(nm(o,u,x),Ha(o,u,x)):(pe&&j&&Bp(u),u.flags|=1,Yn(o,u,p,x),u.child)}function XA(o,u,h,p,x){if(o===null){var E=h.type;return typeof E=="function"&&!Pp(E)&&E.defaultProps===void 0&&h.compare===null?(u.tag=15,u.type=E,YA(o,u,E,p,x)):(o=Yd(h.type,null,p,u,u.mode,x),o.ref=u.ref,o.return=u,u.child=o)}if(E=o.child,!Sm(o,x)){var V=E.memoizedProps;if(h=h.compare,h=h!==null?h:cf,h(V,p)&&o.ref===u.ref)return Ha(o,u,x)}return u.flags|=1,o=La(E,p),o.ref=u.ref,o.return=u,u.child=o}function YA(o,u,h,p,x){if(o!==null){var E=o.memoizedProps;if(cf(E,p)&&o.ref===u.ref)if(Vn=!1,u.pendingProps=p=E,Sm(o,x))(o.flags&131072)!==0&&(Vn=!0);else return u.lanes=o.lanes,Ha(o,u,x)}return ym(o,u,h,p,x)}function KA(o,u,h){var p=u.pendingProps,x=p.children,E=o!==null?o.memoizedState:null;if(p.mode==="hidden"){if((u.flags&128)!==0){if(p=E!==null?E.baseLanes|h:h,o!==null){for(x=u.child=o.child,E=0;x!==null;)E=E|x.lanes|x.childLanes,x=x.sibling;u.childLanes=E&~p}else u.childLanes=0,u.child=null;return ZA(o,u,p,h)}if((h&536870912)!==0)u.memoizedState={baseLanes:0,cachePool:null},o!==null&&t0(u,E!==null?E.cachePool:null),E!==null?Y_(u,E):Zp(),BA(u);else return u.lanes=u.childLanes=536870912,ZA(o,u,E!==null?E.baseLanes|h:h,h)}else E!==null?(t0(u,E.cachePool),Y_(u,E),Ls(),u.memoizedState=null):(o!==null&&t0(u,null),Zp(),Ls());return Yn(o,u,x,h),u.child}function ZA(o,u,h,p){var x=$p();return x=x===null?null:{parent:wn._currentValue,pool:x},u.memoizedState={baseLanes:h,cachePool:x},o!==null&&t0(u,null),Zp(),BA(u),o!==null&&pf(o,u,p,!0),null}function v0(o,u){var h=u.ref;if(h===null)o!==null&&o.ref!==null&&(u.flags|=4194816);else{if(typeof h!="function"&&typeof h!="object")throw Error(r(284));(o===null||o.ref!==h)&&(u.flags|=4194816)}}function ym(o,u,h,p,x){return ol(u),h=tm(o,u,h,p,void 0,x),p=em(),o!==null&&!Vn?(nm(o,u,x),Ha(o,u,x)):(pe&&p&&Bp(u),u.flags|=1,Yn(o,u,h,x),u.child)}function QA(o,u,h,p,x,E){return ol(u),u.updateQueue=null,h=Z_(u,p,h,x),K_(o),p=em(),o!==null&&!Vn?(nm(o,u,E),Ha(o,u,E)):(pe&&p&&Bp(u),u.flags|=1,Yn(o,u,h,E),u.child)}function JA(o,u,h,p,x){if(ol(u),u.stateNode===null){var E=du,V=h.contextType;typeof V=="object"&&V!==null&&(E=ar(V)),E=new h(p,E),u.memoizedState=E.state!==null&&E.state!==void 0?E.state:null,E.updater=mm,u.stateNode=E,E._reactInternals=u,E=u.stateNode,E.props=p,E.state=u.memoizedState,E.refs={},Wp(u),V=h.contextType,E.context=typeof V=="object"&&V!==null?ar(V):du,E.state=u.memoizedState,V=h.getDerivedStateFromProps,typeof V=="function"&&(pm(u,h,V,p),E.state=u.memoizedState),typeof h.getDerivedStateFromProps=="function"||typeof E.getSnapshotBeforeUpdate=="function"||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(V=E.state,typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount(),V!==E.state&&mm.enqueueReplaceState(E,E.state,null),wf(u,p,E,x),Af(),E.state=u.memoizedState),typeof E.componentDidMount=="function"&&(u.flags|=4194308),p=!0}else if(o===null){E=u.stateNode;var j=u.memoizedProps,$=cl(h,j);E.props=$;var J=E.context,ut=h.contextType;V=du,typeof ut=="object"&&ut!==null&&(V=ar(ut));var dt=h.getDerivedStateFromProps;ut=typeof dt=="function"||typeof E.getSnapshotBeforeUpdate=="function",j=u.pendingProps!==j,ut||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(j||J!==V)&&FA(u,E,p,V),Os=!1;var et=u.memoizedState;E.state=et,wf(u,p,E,x),Af(),J=u.memoizedState,j||et!==J||Os?(typeof dt=="function"&&(pm(u,h,dt,p),J=u.memoizedState),($=Os||VA(u,h,$,p,et,J,V))?(ut||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount()),typeof E.componentDidMount=="function"&&(u.flags|=4194308)):(typeof E.componentDidMount=="function"&&(u.flags|=4194308),u.memoizedProps=p,u.memoizedState=J),E.props=p,E.state=J,E.context=V,p=$):(typeof E.componentDidMount=="function"&&(u.flags|=4194308),p=!1)}else{E=u.stateNode,Xp(o,u),V=u.memoizedProps,ut=cl(h,V),E.props=ut,dt=u.pendingProps,et=E.context,J=h.contextType,$=du,typeof J=="object"&&J!==null&&($=ar(J)),j=h.getDerivedStateFromProps,(J=typeof j=="function"||typeof E.getSnapshotBeforeUpdate=="function")||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(V!==dt||et!==$)&&FA(u,E,p,$),Os=!1,et=u.memoizedState,E.state=et,wf(u,p,E,x),Af();var nt=u.memoizedState;V!==dt||et!==nt||Os||o!==null&&o.dependencies!==null&&Qd(o.dependencies)?(typeof j=="function"&&(pm(u,h,j,p),nt=u.memoizedState),(ut=Os||VA(u,h,ut,p,et,nt,$)||o!==null&&o.dependencies!==null&&Qd(o.dependencies))?(J||typeof E.UNSAFE_componentWillUpdate!="function"&&typeof E.componentWillUpdate!="function"||(typeof E.componentWillUpdate=="function"&&E.componentWillUpdate(p,nt,$),typeof E.UNSAFE_componentWillUpdate=="function"&&E.UNSAFE_componentWillUpdate(p,nt,$)),typeof E.componentDidUpdate=="function"&&(u.flags|=4),typeof E.getSnapshotBeforeUpdate=="function"&&(u.flags|=1024)):(typeof E.componentDidUpdate!="function"||V===o.memoizedProps&&et===o.memoizedState||(u.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||V===o.memoizedProps&&et===o.memoizedState||(u.flags|=1024),u.memoizedProps=p,u.memoizedState=nt),E.props=p,E.state=nt,E.context=$,p=ut):(typeof E.componentDidUpdate!="function"||V===o.memoizedProps&&et===o.memoizedState||(u.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||V===o.memoizedProps&&et===o.memoizedState||(u.flags|=1024),p=!1)}return E=p,v0(o,u),p=(u.flags&128)!==0,E||p?(E=u.stateNode,h=p&&typeof h.getDerivedStateFromError!="function"?null:E.render(),u.flags|=1,o!==null&&p?(u.child=Eu(u,o.child,null,x),u.child=Eu(u,null,h,x)):Yn(o,u,h,x),u.memoizedState=E.state,o=u.child):o=Ha(o,u,x),o}function tw(o,u,h,p){return df(),u.flags|=256,Yn(o,u,h,p),u.child}var xm={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function _m(o){return{baseLanes:o,cachePool:j_()}}function Am(o,u,h){return o=o!==null?o.childLanes&~h:0,u&&(o|=gi),o}function ew(o,u,h){var p=u.pendingProps,x=!1,E=(u.flags&128)!==0,V;if((V=E)||(V=o!==null&&o.memoizedState===null?!1:(En.current&2)!==0),V&&(x=!0,u.flags&=-129),V=(u.flags&32)!==0,u.flags&=-33,o===null){if(pe){if(x?ks(u):Ls(),pe){var j=Je,$;if($=j){t:{for($=j,j=ta;$.nodeType!==8;){if(!j){j=null;break t}if($=Di($.nextSibling),$===null){j=null;break t}}j=$}j!==null?(u.memoizedState={dehydrated:j,treeContext:nl!==null?{id:Ba,overflow:Va}:null,retryLane:536870912,hydrationErrors:null},$=jr(18,null,null,0),$.stateNode=j,$.return=u,u.child=$,xr=u,Je=null,$=!0):$=!1}$||al(u)}if(j=u.memoizedState,j!==null&&(j=j.dehydrated,j!==null))return iv(j)?u.lanes=32:u.lanes=536870912,null;za(u)}return j=p.children,p=p.fallback,x?(Ls(),x=u.mode,j=y0({mode:"hidden",children:j},x),p=el(p,x,h,null),j.return=u,p.return=u,j.sibling=p,u.child=j,x=u.child,x.memoizedState=_m(h),x.childLanes=Am(o,V,h),u.memoizedState=xm,p):(ks(u),wm(u,j))}if($=o.memoizedState,$!==null&&(j=$.dehydrated,j!==null)){if(E)u.flags&256?(ks(u),u.flags&=-257,u=Em(o,u,h)):u.memoizedState!==null?(Ls(),u.child=o.child,u.flags|=128,u=null):(Ls(),x=p.fallback,j=u.mode,p=y0({mode:"visible",children:p.children},j),x=el(x,j,h,null),x.flags|=2,p.return=u,x.return=u,p.sibling=x,u.child=p,Eu(u,o.child,null,h),p=u.child,p.memoizedState=_m(h),p.childLanes=Am(o,V,h),u.memoizedState=xm,u=x);else if(ks(u),iv(j)){if(V=j.nextSibling&&j.nextSibling.dataset,V)var J=V.dgst;V=J,p=Error(r(419)),p.stack="",p.digest=V,gf({value:p,source:null,stack:null}),u=Em(o,u,h)}else if(Vn||pf(o,u,h,!1),V=(h&o.childLanes)!==0,Vn||V){if(V=Ve,V!==null&&(p=h&-h,p=(p&42)!==0?1:Es(p),p=(p&(V.suspendedLanes|h))!==0?0:p,p!==0&&p!==$.retryLane))throw $.retryLane=p,hu(o,p),qr(V,o,p),qA;j.data==="$?"||jm(),u=Em(o,u,h)}else j.data==="$?"?(u.flags|=192,u.child=o.child,u=null):(o=$.treeContext,Je=Di(j.nextSibling),xr=u,pe=!0,il=null,ta=!1,o!==null&&(fi[hi++]=Ba,fi[hi++]=Va,fi[hi++]=nl,Ba=o.id,Va=o.overflow,nl=u),u=wm(u,p.children),u.flags|=4096);return u}return x?(Ls(),x=p.fallback,j=u.mode,$=o.child,J=$.sibling,p=La($,{mode:"hidden",children:p.children}),p.subtreeFlags=$.subtreeFlags&65011712,J!==null?x=La(J,x):(x=el(x,j,h,null),x.flags|=2),x.return=u,p.return=u,p.sibling=x,u.child=p,p=x,x=u.child,j=o.child.memoizedState,j===null?j=_m(h):($=j.cachePool,$!==null?(J=wn._currentValue,$=$.parent!==J?{parent:J,pool:J}:$):$=j_(),j={baseLanes:j.baseLanes|h,cachePool:$}),x.memoizedState=j,x.childLanes=Am(o,V,h),u.memoizedState=xm,p):(ks(u),h=o.child,o=h.sibling,h=La(h,{mode:"visible",children:p.children}),h.return=u,h.sibling=null,o!==null&&(V=u.deletions,V===null?(u.deletions=[o],u.flags|=16):V.push(o)),u.child=h,u.memoizedState=null,h)}function wm(o,u){return u=y0({mode:"visible",children:u},o.mode),u.return=o,o.child=u}function y0(o,u){return o=jr(22,o,null,u),o.lanes=0,o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},o}function Em(o,u,h){return Eu(u,o.child,null,h),o=wm(u,u.pendingProps.children),o.flags|=2,u.memoizedState=null,o}function nw(o,u,h){o.lanes|=u;var p=o.alternate;p!==null&&(p.lanes|=u),jp(o.return,u,h)}function bm(o,u,h,p,x){var E=o.memoizedState;E===null?o.memoizedState={isBackwards:u,rendering:null,renderingStartTime:0,last:p,tail:h,tailMode:x}:(E.isBackwards=u,E.rendering=null,E.renderingStartTime=0,E.last=p,E.tail=h,E.tailMode=x)}function rw(o,u,h){var p=u.pendingProps,x=p.revealOrder,E=p.tail;if(Yn(o,u,p.children,h),p=En.current,(p&2)!==0)p=p&1|2,u.flags|=128;else{if(o!==null&&(o.flags&128)!==0)t:for(o=u.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&nw(o,h,u);else if(o.tag===19)nw(o,h,u);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===u)break t;for(;o.sibling===null;){if(o.return===null||o.return===u)break t;o=o.return}o.sibling.return=o.return,o=o.sibling}p&=1}switch(wt(En,p),x){case"forwards":for(h=u.child,x=null;h!==null;)o=h.alternate,o!==null&&g0(o)===null&&(x=h),h=h.sibling;h=x,h===null?(x=u.child,u.child=null):(x=h.sibling,h.sibling=null),bm(u,!1,x,h,E);break;case"backwards":for(h=null,x=u.child,u.child=null;x!==null;){if(o=x.alternate,o!==null&&g0(o)===null){u.child=x;break}o=x.sibling,x.sibling=h,h=x,x=o}bm(u,!0,h,null,E);break;case"together":bm(u,!1,null,null,void 0);break;default:u.memoizedState=null}return u.child}function Ha(o,u,h){if(o!==null&&(u.dependencies=o.dependencies),js|=u.lanes,(h&u.childLanes)===0)if(o!==null){if(pf(o,u,h,!1),(h&u.childLanes)===0)return null}else return null;if(o!==null&&u.child!==o.child)throw Error(r(153));if(u.child!==null){for(o=u.child,h=La(o,o.pendingProps),u.child=h,h.return=u;o.sibling!==null;)o=o.sibling,h=h.sibling=La(o,o.pendingProps),h.return=u;h.sibling=null}return u.child}function Sm(o,u){return(o.lanes&u)!==0?!0:(o=o.dependencies,!!(o!==null&&Qd(o)))}function e6(o,u,h){switch(u.tag){case 3:Ye(u,u.stateNode.containerInfo),Ds(u,wn,o.memoizedState.cache),df();break;case 27:case 5:Et(u);break;case 4:Ye(u,u.stateNode.containerInfo);break;case 10:Ds(u,u.type,u.memoizedProps.value);break;case 13:var p=u.memoizedState;if(p!==null)return p.dehydrated!==null?(ks(u),u.flags|=128,null):(h&u.child.childLanes)!==0?ew(o,u,h):(ks(u),o=Ha(o,u,h),o!==null?o.sibling:null);ks(u);break;case 19:var x=(o.flags&128)!==0;if(p=(h&u.childLanes)!==0,p||(pf(o,u,h,!1),p=(h&u.childLanes)!==0),x){if(p)return rw(o,u,h);u.flags|=128}if(x=u.memoizedState,x!==null&&(x.rendering=null,x.tail=null,x.lastEffect=null),wt(En,En.current),p)break;return null;case 22:case 23:return u.lanes=0,KA(o,u,h);case 24:Ds(u,wn,o.memoizedState.cache)}return Ha(o,u,h)}function iw(o,u,h){if(o!==null)if(o.memoizedProps!==u.pendingProps)Vn=!0;else{if(!Sm(o,h)&&(u.flags&128)===0)return Vn=!1,e6(o,u,h);Vn=(o.flags&131072)!==0}else Vn=!1,pe&&(u.flags&1048576)!==0&&P_(u,Zd,u.index);switch(u.lanes=0,u.tag){case 16:t:{o=u.pendingProps;var p=u.elementType,x=p._init;if(p=x(p._payload),u.type=p,typeof p=="function")Pp(p)?(o=cl(p,o),u.tag=1,u=JA(null,u,p,o,h)):(u.tag=0,u=ym(null,u,p,o,h));else{if(p!=null){if(x=p.$$typeof,x===M){u.tag=11,u=WA(null,u,p,o,h);break t}else if(x===O){u.tag=14,u=XA(null,u,p,o,h);break t}}throw u=rt(p)||p,Error(r(306,u,""))}}return u;case 0:return ym(o,u,u.type,u.pendingProps,h);case 1:return p=u.type,x=cl(p,u.pendingProps),JA(o,u,p,x,h);case 3:t:{if(Ye(u,u.stateNode.containerInfo),o===null)throw Error(r(387));p=u.pendingProps;var E=u.memoizedState;x=E.element,Xp(o,u),wf(u,p,null,h);var V=u.memoizedState;if(p=V.cache,Ds(u,wn,p),p!==E.cache&&zp(u,[wn],h,!0),Af(),p=V.element,E.isDehydrated)if(E={element:p,isDehydrated:!1,cache:V.cache},u.updateQueue.baseState=E,u.memoizedState=E,u.flags&256){u=tw(o,u,p,h);break t}else if(p!==x){x=ui(Error(r(424)),u),gf(x),u=tw(o,u,p,h);break t}else{switch(o=u.stateNode.containerInfo,o.nodeType){case 9:o=o.body;break;default:o=o.nodeName==="HTML"?o.ownerDocument.body:o}for(Je=Di(o.firstChild),xr=u,pe=!0,il=null,ta=!0,h=LA(u,null,p,h),u.child=h;h;)h.flags=h.flags&-3|4096,h=h.sibling}else{if(df(),p===x){u=Ha(o,u,h);break t}Yn(o,u,p,h)}u=u.child}return u;case 26:return v0(o,u),o===null?(h=lE(u.type,null,u.pendingProps,null))?u.memoizedState=h:pe||(h=u.type,o=u.pendingProps,p=M0(ge.current).createElement(h),p[xn]=u,p[un]=o,Zn(p,h,o),en(p),u.stateNode=p):u.memoizedState=lE(u.type,o.memoizedProps,u.pendingProps,o.memoizedState),null;case 27:return Et(u),o===null&&pe&&(p=u.stateNode=aE(u.type,u.pendingProps,ge.current),xr=u,ta=!0,x=Je,$s(u.type)?(av=x,Je=Di(p.firstChild)):Je=x),Yn(o,u,u.pendingProps.children,h),v0(o,u),o===null&&(u.flags|=4194304),u.child;case 5:return o===null&&pe&&((x=p=Je)&&(p=R6(p,u.type,u.pendingProps,ta),p!==null?(u.stateNode=p,xr=u,Je=Di(p.firstChild),ta=!1,x=!0):x=!1),x||al(u)),Et(u),x=u.type,E=u.pendingProps,V=o!==null?o.memoizedProps:null,p=E.children,ev(x,E)?p=null:V!==null&&ev(x,V)&&(u.flags|=32),u.memoizedState!==null&&(x=tm(o,u,W8,null,null,h),Gf._currentValue=x),v0(o,u),Yn(o,u,p,h),u.child;case 6:return o===null&&pe&&((o=h=Je)&&(h=D6(h,u.pendingProps,ta),h!==null?(u.stateNode=h,xr=u,Je=null,o=!0):o=!1),o||al(u)),null;case 13:return ew(o,u,h);case 4:return Ye(u,u.stateNode.containerInfo),p=u.pendingProps,o===null?u.child=Eu(u,null,p,h):Yn(o,u,p,h),u.child;case 11:return WA(o,u,u.type,u.pendingProps,h);case 7:return Yn(o,u,u.pendingProps,h),u.child;case 8:return Yn(o,u,u.pendingProps.children,h),u.child;case 12:return Yn(o,u,u.pendingProps.children,h),u.child;case 10:return p=u.pendingProps,Ds(u,u.type,p.value),Yn(o,u,p.children,h),u.child;case 9:return x=u.type._context,p=u.pendingProps.children,ol(u),x=ar(x),p=p(x),u.flags|=1,Yn(o,u,p,h),u.child;case 14:return XA(o,u,u.type,u.pendingProps,h);case 15:return YA(o,u,u.type,u.pendingProps,h);case 19:return rw(o,u,h);case 31:return p=u.pendingProps,h=u.mode,p={mode:p.mode,children:p.children},o===null?(h=y0(p,h),h.ref=u.ref,u.child=h,h.return=u,u=h):(h=La(o.child,p),h.ref=u.ref,u.child=h,h.return=u,u=h),u;case 22:return KA(o,u,h);case 24:return ol(u),p=ar(wn),o===null?(x=$p(),x===null&&(x=Ve,E=Hp(),x.pooledCache=E,E.refCount++,E!==null&&(x.pooledCacheLanes|=h),x=E),u.memoizedState={parent:p,cache:x},Wp(u),Ds(u,wn,x)):((o.lanes&h)!==0&&(Xp(o,u),wf(u,null,null,h),Af()),x=o.memoizedState,E=u.memoizedState,x.parent!==p?(x={parent:p,cache:p},u.memoizedState=x,u.lanes===0&&(u.memoizedState=u.updateQueue.baseState=x),Ds(u,wn,p)):(p=E.cache,Ds(u,wn,p),p!==x.cache&&zp(u,[wn],h,!0))),Yn(o,u,u.pendingProps.children,h),u.child;case 29:throw u.pendingProps}throw Error(r(156,u.tag))}function Ga(o){o.flags|=4}function aw(o,u){if(u.type!=="stylesheet"||(u.state.loading&4)!==0)o.flags&=-16777217;else if(o.flags|=16777216,!dE(u)){if(u=di.current,u!==null&&((ie&4194048)===ie?ea!==null:(ie&62914560)!==ie&&(ie&536870912)===0||u!==ea))throw xf=qp,z_;o.flags|=8192}}function x0(o,u){u!==null&&(o.flags|=4),o.flags&16384&&(u=o.tag!==22?$c():536870912,o.lanes|=u,Cu|=u)}function Rf(o,u){if(!pe)switch(o.tailMode){case"hidden":u=o.tail;for(var h=null;u!==null;)u.alternate!==null&&(h=u),u=u.sibling;h===null?o.tail=null:h.sibling=null;break;case"collapsed":h=o.tail;for(var p=null;h!==null;)h.alternate!==null&&(p=h),h=h.sibling;p===null?u||o.tail===null?o.tail=null:o.tail.sibling=null:p.sibling=null}}function Ze(o){var u=o.alternate!==null&&o.alternate.child===o.child,h=0,p=0;if(u)for(var x=o.child;x!==null;)h|=x.lanes|x.childLanes,p|=x.subtreeFlags&65011712,p|=x.flags&65011712,x.return=o,x=x.sibling;else for(x=o.child;x!==null;)h|=x.lanes|x.childLanes,p|=x.subtreeFlags,p|=x.flags,x.return=o,x=x.sibling;return o.subtreeFlags|=p,o.childLanes=h,u}function n6(o,u,h){var p=u.pendingProps;switch(Vp(u),u.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ze(u),null;case 1:return Ze(u),null;case 3:return h=u.stateNode,p=null,o!==null&&(p=o.memoizedState.cache),u.memoizedState.cache!==p&&(u.flags|=2048),Ua(wn),ht(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(o===null||o.child===null)&&(hf(u)?Ga(u):o===null||o.memoizedState.isDehydrated&&(u.flags&256)===0||(u.flags|=1024,B_())),Ze(u),null;case 26:return h=u.memoizedState,o===null?(Ga(u),h!==null?(Ze(u),aw(u,h)):(Ze(u),u.flags&=-16777217)):h?h!==o.memoizedState?(Ga(u),Ze(u),aw(u,h)):(Ze(u),u.flags&=-16777217):(o.memoizedProps!==p&&Ga(u),Ze(u),u.flags&=-16777217),null;case 27:Rt(u),h=ge.current;var x=u.type;if(o!==null&&u.stateNode!=null)o.memoizedProps!==p&&Ga(u);else{if(!p){if(u.stateNode===null)throw Error(r(166));return Ze(u),null}o=zt.current,hf(u)?k_(u):(o=aE(x,p,h),u.stateNode=o,Ga(u))}return Ze(u),null;case 5:if(Rt(u),h=u.type,o!==null&&u.stateNode!=null)o.memoizedProps!==p&&Ga(u);else{if(!p){if(u.stateNode===null)throw Error(r(166));return Ze(u),null}if(o=zt.current,hf(u))k_(u);else{switch(x=M0(ge.current),o){case 1:o=x.createElementNS("http://www.w3.org/2000/svg",h);break;case 2:o=x.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;default:switch(h){case"svg":o=x.createElementNS("http://www.w3.org/2000/svg",h);break;case"math":o=x.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;case"script":o=x.createElement("div"),o.innerHTML="<script><\/script>",o=o.removeChild(o.firstChild);break;case"select":o=typeof p.is=="string"?x.createElement("select",{is:p.is}):x.createElement("select"),p.multiple?o.multiple=!0:p.size&&(o.size=p.size);break;default:o=typeof p.is=="string"?x.createElement(h,{is:p.is}):x.createElement(h)}}o[xn]=u,o[un]=p;t:for(x=u.child;x!==null;){if(x.tag===5||x.tag===6)o.appendChild(x.stateNode);else if(x.tag!==4&&x.tag!==27&&x.child!==null){x.child.return=x,x=x.child;continue}if(x===u)break t;for(;x.sibling===null;){if(x.return===null||x.return===u)break t;x=x.return}x.sibling.return=x.return,x=x.sibling}u.stateNode=o;t:switch(Zn(o,h,p),h){case"button":case"input":case"select":case"textarea":o=!!p.autoFocus;break t;case"img":o=!0;break t;default:o=!1}o&&Ga(u)}}return Ze(u),u.flags&=-16777217,null;case 6:if(o&&u.stateNode!=null)o.memoizedProps!==p&&Ga(u);else{if(typeof p!="string"&&u.stateNode===null)throw Error(r(166));if(o=ge.current,hf(u)){if(o=u.stateNode,h=u.memoizedProps,p=null,x=xr,x!==null)switch(x.tag){case 27:case 5:p=x.memoizedProps}o[xn]=u,o=!!(o.nodeValue===h||p!==null&&p.suppressHydrationWarning===!0||Qw(o.nodeValue,h)),o||al(u)}else o=M0(o).createTextNode(p),o[xn]=u,u.stateNode=o}return Ze(u),null;case 13:if(p=u.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(x=hf(u),p!==null&&p.dehydrated!==null){if(o===null){if(!x)throw Error(r(318));if(x=u.memoizedState,x=x!==null?x.dehydrated:null,!x)throw Error(r(317));x[xn]=u}else df(),(u.flags&128)===0&&(u.memoizedState=null),u.flags|=4;Ze(u),x=!1}else x=B_(),o!==null&&o.memoizedState!==null&&(o.memoizedState.hydrationErrors=x),x=!0;if(!x)return u.flags&256?(za(u),u):(za(u),null)}if(za(u),(u.flags&128)!==0)return u.lanes=h,u;if(h=p!==null,o=o!==null&&o.memoizedState!==null,h){p=u.child,x=null,p.alternate!==null&&p.alternate.memoizedState!==null&&p.alternate.memoizedState.cachePool!==null&&(x=p.alternate.memoizedState.cachePool.pool);var E=null;p.memoizedState!==null&&p.memoizedState.cachePool!==null&&(E=p.memoizedState.cachePool.pool),E!==x&&(p.flags|=2048)}return h!==o&&h&&(u.child.flags|=8192),x0(u,u.updateQueue),Ze(u),null;case 4:return ht(),o===null&&Km(u.stateNode.containerInfo),Ze(u),null;case 10:return Ua(u.type),Ze(u),null;case 19:if(It(En),x=u.memoizedState,x===null)return Ze(u),null;if(p=(u.flags&128)!==0,E=x.rendering,E===null)if(p)Rf(x,!1);else{if(tn!==0||o!==null&&(o.flags&128)!==0)for(o=u.child;o!==null;){if(E=g0(o),E!==null){for(u.flags|=128,Rf(x,!1),o=E.updateQueue,u.updateQueue=o,x0(u,o),u.subtreeFlags=0,o=h,h=u.child;h!==null;)N_(h,o),h=h.sibling;return wt(En,En.current&1|2),u.child}o=o.sibling}x.tail!==null&&Ge()>w0&&(u.flags|=128,p=!0,Rf(x,!1),u.lanes=4194304)}else{if(!p)if(o=g0(E),o!==null){if(u.flags|=128,p=!0,o=o.updateQueue,u.updateQueue=o,x0(u,o),Rf(x,!0),x.tail===null&&x.tailMode==="hidden"&&!E.alternate&&!pe)return Ze(u),null}else 2*Ge()-x.renderingStartTime>w0&&h!==536870912&&(u.flags|=128,p=!0,Rf(x,!1),u.lanes=4194304);x.isBackwards?(E.sibling=u.child,u.child=E):(o=x.last,o!==null?o.sibling=E:u.child=E,x.last=E)}return x.tail!==null?(u=x.tail,x.rendering=u,x.tail=u.sibling,x.renderingStartTime=Ge(),u.sibling=null,o=En.current,wt(En,p?o&1|2:o&1),u):(Ze(u),null);case 22:case 23:return za(u),Qp(),p=u.memoizedState!==null,o!==null?o.memoizedState!==null!==p&&(u.flags|=8192):p&&(u.flags|=8192),p?(h&536870912)!==0&&(u.flags&128)===0&&(Ze(u),u.subtreeFlags&6&&(u.flags|=8192)):Ze(u),h=u.updateQueue,h!==null&&x0(u,h.retryQueue),h=null,o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(h=o.memoizedState.cachePool.pool),p=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(p=u.memoizedState.cachePool.pool),p!==h&&(u.flags|=2048),o!==null&&It(ll),null;case 24:return h=null,o!==null&&(h=o.memoizedState.cache),u.memoizedState.cache!==h&&(u.flags|=2048),Ua(wn),Ze(u),null;case 25:return null;case 30:return null}throw Error(r(156,u.tag))}function r6(o,u){switch(Vp(u),u.tag){case 1:return o=u.flags,o&65536?(u.flags=o&-65537|128,u):null;case 3:return Ua(wn),ht(),o=u.flags,(o&65536)!==0&&(o&128)===0?(u.flags=o&-65537|128,u):null;case 26:case 27:case 5:return Rt(u),null;case 13:if(za(u),o=u.memoizedState,o!==null&&o.dehydrated!==null){if(u.alternate===null)throw Error(r(340));df()}return o=u.flags,o&65536?(u.flags=o&-65537|128,u):null;case 19:return It(En),null;case 4:return ht(),null;case 10:return Ua(u.type),null;case 22:case 23:return za(u),Qp(),o!==null&&It(ll),o=u.flags,o&65536?(u.flags=o&-65537|128,u):null;case 24:return Ua(wn),null;case 25:return null;default:return null}}function sw(o,u){switch(Vp(u),u.tag){case 3:Ua(wn),ht();break;case 26:case 27:case 5:Rt(u);break;case 4:ht();break;case 13:za(u);break;case 19:It(En);break;case 10:Ua(u.type);break;case 22:case 23:za(u),Qp(),o!==null&&It(ll);break;case 24:Ua(wn)}}function Df(o,u){try{var h=u.updateQueue,p=h!==null?h.lastEffect:null;if(p!==null){var x=p.next;h=x;do{if((h.tag&o)===o){p=void 0;var E=h.create,V=h.inst;p=E(),V.destroy=p}h=h.next}while(h!==x)}}catch(j){ke(u,u.return,j)}}function Bs(o,u,h){try{var p=u.updateQueue,x=p!==null?p.lastEffect:null;if(x!==null){var E=x.next;p=E;do{if((p.tag&o)===o){var V=p.inst,j=V.destroy;if(j!==void 0){V.destroy=void 0,x=u;var $=h,J=j;try{J()}catch(ut){ke(x,$,ut)}}}p=p.next}while(p!==E)}}catch(ut){ke(u,u.return,ut)}}function ow(o){var u=o.updateQueue;if(u!==null){var h=o.stateNode;try{X_(u,h)}catch(p){ke(o,o.return,p)}}}function lw(o,u,h){h.props=cl(o.type,o.memoizedProps),h.state=o.memoizedState;try{h.componentWillUnmount()}catch(p){ke(o,u,p)}}function Of(o,u){try{var h=o.ref;if(h!==null){switch(o.tag){case 26:case 27:case 5:var p=o.stateNode;break;case 30:p=o.stateNode;break;default:p=o.stateNode}typeof h=="function"?o.refCleanup=h(p):h.current=p}}catch(x){ke(o,u,x)}}function na(o,u){var h=o.ref,p=o.refCleanup;if(h!==null)if(typeof p=="function")try{p()}catch(x){ke(o,u,x)}finally{o.refCleanup=null,o=o.alternate,o!=null&&(o.refCleanup=null)}else if(typeof h=="function")try{h(null)}catch(x){ke(o,u,x)}else h.current=null}function uw(o){var u=o.type,h=o.memoizedProps,p=o.stateNode;try{t:switch(u){case"button":case"input":case"select":case"textarea":h.autoFocus&&p.focus();break t;case"img":h.src?p.src=h.src:h.srcSet&&(p.srcset=h.srcSet)}}catch(x){ke(o,o.return,x)}}function Tm(o,u,h){try{var p=o.stateNode;b6(p,o.type,h,u),p[un]=u}catch(x){ke(o,o.return,x)}}function cw(o){return o.tag===5||o.tag===3||o.tag===26||o.tag===27&&$s(o.type)||o.tag===4}function Cm(o){t:for(;;){for(;o.sibling===null;){if(o.return===null||cw(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.tag===27&&$s(o.type)||o.flags&2||o.child===null||o.tag===4)continue t;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function Im(o,u,h){var p=o.tag;if(p===5||p===6)o=o.stateNode,u?(h.nodeType===9?h.body:h.nodeName==="HTML"?h.ownerDocument.body:h).insertBefore(o,u):(u=h.nodeType===9?h.body:h.nodeName==="HTML"?h.ownerDocument.body:h,u.appendChild(o),h=h._reactRootContainer,h!=null||u.onclick!==null||(u.onclick=O0));else if(p!==4&&(p===27&&$s(o.type)&&(h=o.stateNode,u=null),o=o.child,o!==null))for(Im(o,u,h),o=o.sibling;o!==null;)Im(o,u,h),o=o.sibling}function _0(o,u,h){var p=o.tag;if(p===5||p===6)o=o.stateNode,u?h.insertBefore(o,u):h.appendChild(o);else if(p!==4&&(p===27&&$s(o.type)&&(h=o.stateNode),o=o.child,o!==null))for(_0(o,u,h),o=o.sibling;o!==null;)_0(o,u,h),o=o.sibling}function fw(o){var u=o.stateNode,h=o.memoizedProps;try{for(var p=o.type,x=u.attributes;x.length;)u.removeAttributeNode(x[0]);Zn(u,p,h),u[xn]=o,u[un]=h}catch(E){ke(o,o.return,E)}}var $a=!1,rn=!1,Rm=!1,hw=typeof WeakSet=="function"?WeakSet:Set,Fn=null;function i6(o,u){if(o=o.containerInfo,Jm=V0,o=E_(o),Cp(o)){if("selectionStart"in o)var h={start:o.selectionStart,end:o.selectionEnd};else t:{h=(h=o.ownerDocument)&&h.defaultView||window;var p=h.getSelection&&h.getSelection();if(p&&p.rangeCount!==0){h=p.anchorNode;var x=p.anchorOffset,E=p.focusNode;p=p.focusOffset;try{h.nodeType,E.nodeType}catch{h=null;break t}var V=0,j=-1,$=-1,J=0,ut=0,dt=o,et=null;e:for(;;){for(var nt;dt!==h||x!==0&&dt.nodeType!==3||(j=V+x),dt!==E||p!==0&&dt.nodeType!==3||($=V+p),dt.nodeType===3&&(V+=dt.nodeValue.length),(nt=dt.firstChild)!==null;)et=dt,dt=nt;for(;;){if(dt===o)break e;if(et===h&&++J===x&&(j=V),et===E&&++ut===p&&($=V),(nt=dt.nextSibling)!==null)break;dt=et,et=dt.parentNode}dt=nt}h=j===-1||$===-1?null:{start:j,end:$}}else h=null}h=h||{start:0,end:0}}else h=null;for(tv={focusedElem:o,selectionRange:h},V0=!1,Fn=u;Fn!==null;)if(u=Fn,o=u.child,(u.subtreeFlags&1024)!==0&&o!==null)o.return=u,Fn=o;else for(;Fn!==null;){switch(u=Fn,E=u.alternate,o=u.flags,u.tag){case 0:break;case 11:case 15:break;case 1:if((o&1024)!==0&&E!==null){o=void 0,h=u,x=E.memoizedProps,E=E.memoizedState,p=h.stateNode;try{var Ut=cl(h.type,x,h.elementType===h.type);o=p.getSnapshotBeforeUpdate(Ut,E),p.__reactInternalSnapshotBeforeUpdate=o}catch(Lt){ke(h,h.return,Lt)}}break;case 3:if((o&1024)!==0){if(o=u.stateNode.containerInfo,h=o.nodeType,h===9)rv(o);else if(h===1)switch(o.nodeName){case"HEAD":case"HTML":case"BODY":rv(o);break;default:o.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((o&1024)!==0)throw Error(r(163))}if(o=u.sibling,o!==null){o.return=u.return,Fn=o;break}Fn=u.return}}function dw(o,u,h){var p=h.flags;switch(h.tag){case 0:case 11:case 15:Vs(o,h),p&4&&Df(5,h);break;case 1:if(Vs(o,h),p&4)if(o=h.stateNode,u===null)try{o.componentDidMount()}catch(V){ke(h,h.return,V)}else{var x=cl(h.type,u.memoizedProps);u=u.memoizedState;try{o.componentDidUpdate(x,u,o.__reactInternalSnapshotBeforeUpdate)}catch(V){ke(h,h.return,V)}}p&64&&ow(h),p&512&&Of(h,h.return);break;case 3:if(Vs(o,h),p&64&&(o=h.updateQueue,o!==null)){if(u=null,h.child!==null)switch(h.child.tag){case 27:case 5:u=h.child.stateNode;break;case 1:u=h.child.stateNode}try{X_(o,u)}catch(V){ke(h,h.return,V)}}break;case 27:u===null&&p&4&&fw(h);case 26:case 5:Vs(o,h),u===null&&p&4&&uw(h),p&512&&Of(h,h.return);break;case 12:Vs(o,h);break;case 13:Vs(o,h),p&4&&mw(o,h),p&64&&(o=h.memoizedState,o!==null&&(o=o.dehydrated,o!==null&&(h=d6.bind(null,h),O6(o,h))));break;case 22:if(p=h.memoizedState!==null||$a,!p){u=u!==null&&u.memoizedState!==null||rn,x=$a;var E=rn;$a=p,(rn=u)&&!E?Fs(o,h,(h.subtreeFlags&8772)!==0):Vs(o,h),$a=x,rn=E}break;case 30:break;default:Vs(o,h)}}function gw(o){var u=o.alternate;u!==null&&(o.alternate=null,gw(u)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(u=o.stateNode,u!==null&&Ts(u)),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}var We=null,Ir=!1;function qa(o,u,h){for(h=h.child;h!==null;)pw(o,u,h),h=h.sibling}function pw(o,u,h){if(ue&&typeof ue.onCommitFiberUnmount=="function")try{ue.onCommitFiberUnmount($e,h)}catch{}switch(h.tag){case 26:rn||na(h,u),qa(o,u,h),h.memoizedState?h.memoizedState.count--:h.stateNode&&(h=h.stateNode,h.parentNode.removeChild(h));break;case 27:rn||na(h,u);var p=We,x=Ir;$s(h.type)&&(We=h.stateNode,Ir=!1),qa(o,u,h),Uf(h.stateNode),We=p,Ir=x;break;case 5:rn||na(h,u);case 6:if(p=We,x=Ir,We=null,qa(o,u,h),We=p,Ir=x,We!==null)if(Ir)try{(We.nodeType===9?We.body:We.nodeName==="HTML"?We.ownerDocument.body:We).removeChild(h.stateNode)}catch(E){ke(h,u,E)}else try{We.removeChild(h.stateNode)}catch(E){ke(h,u,E)}break;case 18:We!==null&&(Ir?(o=We,rE(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,h.stateNode),Xf(o)):rE(We,h.stateNode));break;case 4:p=We,x=Ir,We=h.stateNode.containerInfo,Ir=!0,qa(o,u,h),We=p,Ir=x;break;case 0:case 11:case 14:case 15:rn||Bs(2,h,u),rn||Bs(4,h,u),qa(o,u,h);break;case 1:rn||(na(h,u),p=h.stateNode,typeof p.componentWillUnmount=="function"&&lw(h,u,p)),qa(o,u,h);break;case 21:qa(o,u,h);break;case 22:rn=(p=rn)||h.memoizedState!==null,qa(o,u,h),rn=p;break;default:qa(o,u,h)}}function mw(o,u){if(u.memoizedState===null&&(o=u.alternate,o!==null&&(o=o.memoizedState,o!==null&&(o=o.dehydrated,o!==null))))try{Xf(o)}catch(h){ke(u,u.return,h)}}function a6(o){switch(o.tag){case 13:case 19:var u=o.stateNode;return u===null&&(u=o.stateNode=new hw),u;case 22:return o=o.stateNode,u=o._retryCache,u===null&&(u=o._retryCache=new hw),u;default:throw Error(r(435,o.tag))}}function Dm(o,u){var h=a6(o);u.forEach(function(p){var x=g6.bind(null,o,p);h.has(p)||(h.add(p),p.then(x,x))})}function zr(o,u){var h=u.deletions;if(h!==null)for(var p=0;p<h.length;p++){var x=h[p],E=o,V=u,j=V;t:for(;j!==null;){switch(j.tag){case 27:if($s(j.type)){We=j.stateNode,Ir=!1;break t}break;case 5:We=j.stateNode,Ir=!1;break t;case 3:case 4:We=j.stateNode.containerInfo,Ir=!0;break t}j=j.return}if(We===null)throw Error(r(160));pw(E,V,x),We=null,Ir=!1,E=x.alternate,E!==null&&(E.return=null),x.return=null}if(u.subtreeFlags&13878)for(u=u.child;u!==null;)vw(u,o),u=u.sibling}var Ri=null;function vw(o,u){var h=o.alternate,p=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:zr(u,o),Hr(o),p&4&&(Bs(3,o,o.return),Df(3,o),Bs(5,o,o.return));break;case 1:zr(u,o),Hr(o),p&512&&(rn||h===null||na(h,h.return)),p&64&&$a&&(o=o.updateQueue,o!==null&&(p=o.callbacks,p!==null&&(h=o.shared.hiddenCallbacks,o.shared.hiddenCallbacks=h===null?p:h.concat(p))));break;case 26:var x=Ri;if(zr(u,o),Hr(o),p&512&&(rn||h===null||na(h,h.return)),p&4){var E=h!==null?h.memoizedState:null;if(p=o.memoizedState,h===null)if(p===null)if(o.stateNode===null){t:{p=o.type,h=o.memoizedProps,x=x.ownerDocument||x;e:switch(p){case"title":E=x.getElementsByTagName("title")[0],(!E||E[Fo]||E[xn]||E.namespaceURI==="http://www.w3.org/2000/svg"||E.hasAttribute("itemprop"))&&(E=x.createElement(p),x.head.insertBefore(E,x.querySelector("head > title"))),Zn(E,p,h),E[xn]=o,en(E),p=E;break t;case"link":var V=fE("link","href",x).get(p+(h.href||""));if(V){for(var j=0;j<V.length;j++)if(E=V[j],E.getAttribute("href")===(h.href==null||h.href===""?null:h.href)&&E.getAttribute("rel")===(h.rel==null?null:h.rel)&&E.getAttribute("title")===(h.title==null?null:h.title)&&E.getAttribute("crossorigin")===(h.crossOrigin==null?null:h.crossOrigin)){V.splice(j,1);break e}}E=x.createElement(p),Zn(E,p,h),x.head.appendChild(E);break;case"meta":if(V=fE("meta","content",x).get(p+(h.content||""))){for(j=0;j<V.length;j++)if(E=V[j],E.getAttribute("content")===(h.content==null?null:""+h.content)&&E.getAttribute("name")===(h.name==null?null:h.name)&&E.getAttribute("property")===(h.property==null?null:h.property)&&E.getAttribute("http-equiv")===(h.httpEquiv==null?null:h.httpEquiv)&&E.getAttribute("charset")===(h.charSet==null?null:h.charSet)){V.splice(j,1);break e}}E=x.createElement(p),Zn(E,p,h),x.head.appendChild(E);break;default:throw Error(r(468,p))}E[xn]=o,en(E),p=E}o.stateNode=p}else hE(x,o.type,o.stateNode);else o.stateNode=cE(x,p,o.memoizedProps);else E!==p?(E===null?h.stateNode!==null&&(h=h.stateNode,h.parentNode.removeChild(h)):E.count--,p===null?hE(x,o.type,o.stateNode):cE(x,p,o.memoizedProps)):p===null&&o.stateNode!==null&&Tm(o,o.memoizedProps,h.memoizedProps)}break;case 27:zr(u,o),Hr(o),p&512&&(rn||h===null||na(h,h.return)),h!==null&&p&4&&Tm(o,o.memoizedProps,h.memoizedProps);break;case 5:if(zr(u,o),Hr(o),p&512&&(rn||h===null||na(h,h.return)),o.flags&32){x=o.stateNode;try{ai(x,"")}catch(nt){ke(o,o.return,nt)}}p&4&&o.stateNode!=null&&(x=o.memoizedProps,Tm(o,x,h!==null?h.memoizedProps:x)),p&1024&&(Rm=!0);break;case 6:if(zr(u,o),Hr(o),p&4){if(o.stateNode===null)throw Error(r(162));p=o.memoizedProps,h=o.stateNode;try{h.nodeValue=p}catch(nt){ke(o,o.return,nt)}}break;case 3:if(k0=null,x=Ri,Ri=N0(u.containerInfo),zr(u,o),Ri=x,Hr(o),p&4&&h!==null&&h.memoizedState.isDehydrated)try{Xf(u.containerInfo)}catch(nt){ke(o,o.return,nt)}Rm&&(Rm=!1,yw(o));break;case 4:p=Ri,Ri=N0(o.stateNode.containerInfo),zr(u,o),Hr(o),Ri=p;break;case 12:zr(u,o),Hr(o);break;case 13:zr(u,o),Hr(o),o.child.flags&8192&&o.memoizedState!==null!=(h!==null&&h.memoizedState!==null)&&(Lm=Ge()),p&4&&(p=o.updateQueue,p!==null&&(o.updateQueue=null,Dm(o,p)));break;case 22:x=o.memoizedState!==null;var $=h!==null&&h.memoizedState!==null,J=$a,ut=rn;if($a=J||x,rn=ut||$,zr(u,o),rn=ut,$a=J,Hr(o),p&8192)t:for(u=o.stateNode,u._visibility=x?u._visibility&-2:u._visibility|1,x&&(h===null||$||$a||rn||fl(o)),h=null,u=o;;){if(u.tag===5||u.tag===26){if(h===null){$=h=u;try{if(E=$.stateNode,x)V=E.style,typeof V.setProperty=="function"?V.setProperty("display","none","important"):V.display="none";else{j=$.stateNode;var dt=$.memoizedProps.style,et=dt!=null&&dt.hasOwnProperty("display")?dt.display:null;j.style.display=et==null||typeof et=="boolean"?"":(""+et).trim()}}catch(nt){ke($,$.return,nt)}}}else if(u.tag===6){if(h===null){$=u;try{$.stateNode.nodeValue=x?"":$.memoizedProps}catch(nt){ke($,$.return,nt)}}}else if((u.tag!==22&&u.tag!==23||u.memoizedState===null||u===o)&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===o)break t;for(;u.sibling===null;){if(u.return===null||u.return===o)break t;h===u&&(h=null),u=u.return}h===u&&(h=null),u.sibling.return=u.return,u=u.sibling}p&4&&(p=o.updateQueue,p!==null&&(h=p.retryQueue,h!==null&&(p.retryQueue=null,Dm(o,h))));break;case 19:zr(u,o),Hr(o),p&4&&(p=o.updateQueue,p!==null&&(o.updateQueue=null,Dm(o,p)));break;case 30:break;case 21:break;default:zr(u,o),Hr(o)}}function Hr(o){var u=o.flags;if(u&2){try{for(var h,p=o.return;p!==null;){if(cw(p)){h=p;break}p=p.return}if(h==null)throw Error(r(160));switch(h.tag){case 27:var x=h.stateNode,E=Cm(o);_0(o,E,x);break;case 5:var V=h.stateNode;h.flags&32&&(ai(V,""),h.flags&=-33);var j=Cm(o);_0(o,j,V);break;case 3:case 4:var $=h.stateNode.containerInfo,J=Cm(o);Im(o,J,$);break;default:throw Error(r(161))}}catch(ut){ke(o,o.return,ut)}o.flags&=-3}u&4096&&(o.flags&=-4097)}function yw(o){if(o.subtreeFlags&1024)for(o=o.child;o!==null;){var u=o;yw(u),u.tag===5&&u.flags&1024&&u.stateNode.reset(),o=o.sibling}}function Vs(o,u){if(u.subtreeFlags&8772)for(u=u.child;u!==null;)dw(o,u.alternate,u),u=u.sibling}function fl(o){for(o=o.child;o!==null;){var u=o;switch(u.tag){case 0:case 11:case 14:case 15:Bs(4,u,u.return),fl(u);break;case 1:na(u,u.return);var h=u.stateNode;typeof h.componentWillUnmount=="function"&&lw(u,u.return,h),fl(u);break;case 27:Uf(u.stateNode);case 26:case 5:na(u,u.return),fl(u);break;case 22:u.memoizedState===null&&fl(u);break;case 30:fl(u);break;default:fl(u)}o=o.sibling}}function Fs(o,u,h){for(h=h&&(u.subtreeFlags&8772)!==0,u=u.child;u!==null;){var p=u.alternate,x=o,E=u,V=E.flags;switch(E.tag){case 0:case 11:case 15:Fs(x,E,h),Df(4,E);break;case 1:if(Fs(x,E,h),p=E,x=p.stateNode,typeof x.componentDidMount=="function")try{x.componentDidMount()}catch(J){ke(p,p.return,J)}if(p=E,x=p.updateQueue,x!==null){var j=p.stateNode;try{var $=x.shared.hiddenCallbacks;if($!==null)for(x.shared.hiddenCallbacks=null,x=0;x<$.length;x++)W_($[x],j)}catch(J){ke(p,p.return,J)}}h&&V&64&&ow(E),Of(E,E.return);break;case 27:fw(E);case 26:case 5:Fs(x,E,h),h&&p===null&&V&4&&uw(E),Of(E,E.return);break;case 12:Fs(x,E,h);break;case 13:Fs(x,E,h),h&&V&4&&mw(x,E);break;case 22:E.memoizedState===null&&Fs(x,E,h),Of(E,E.return);break;case 30:break;default:Fs(x,E,h)}u=u.sibling}}function Om(o,u){var h=null;o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(h=o.memoizedState.cachePool.pool),o=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(o=u.memoizedState.cachePool.pool),o!==h&&(o!=null&&o.refCount++,h!=null&&mf(h))}function Mm(o,u){o=null,u.alternate!==null&&(o=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==o&&(u.refCount++,o!=null&&mf(o))}function ra(o,u,h,p){if(u.subtreeFlags&10256)for(u=u.child;u!==null;)xw(o,u,h,p),u=u.sibling}function xw(o,u,h,p){var x=u.flags;switch(u.tag){case 0:case 11:case 15:ra(o,u,h,p),x&2048&&Df(9,u);break;case 1:ra(o,u,h,p);break;case 3:ra(o,u,h,p),x&2048&&(o=null,u.alternate!==null&&(o=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==o&&(u.refCount++,o!=null&&mf(o)));break;case 12:if(x&2048){ra(o,u,h,p),o=u.stateNode;try{var E=u.memoizedProps,V=E.id,j=E.onPostCommit;typeof j=="function"&&j(V,u.alternate===null?"mount":"update",o.passiveEffectDuration,-0)}catch($){ke(u,u.return,$)}}else ra(o,u,h,p);break;case 13:ra(o,u,h,p);break;case 23:break;case 22:E=u.stateNode,V=u.alternate,u.memoizedState!==null?E._visibility&2?ra(o,u,h,p):Mf(o,u):E._visibility&2?ra(o,u,h,p):(E._visibility|=2,bu(o,u,h,p,(u.subtreeFlags&10256)!==0)),x&2048&&Om(V,u);break;case 24:ra(o,u,h,p),x&2048&&Mm(u.alternate,u);break;default:ra(o,u,h,p)}}function bu(o,u,h,p,x){for(x=x&&(u.subtreeFlags&10256)!==0,u=u.child;u!==null;){var E=o,V=u,j=h,$=p,J=V.flags;switch(V.tag){case 0:case 11:case 15:bu(E,V,j,$,x),Df(8,V);break;case 23:break;case 22:var ut=V.stateNode;V.memoizedState!==null?ut._visibility&2?bu(E,V,j,$,x):Mf(E,V):(ut._visibility|=2,bu(E,V,j,$,x)),x&&J&2048&&Om(V.alternate,V);break;case 24:bu(E,V,j,$,x),x&&J&2048&&Mm(V.alternate,V);break;default:bu(E,V,j,$,x)}u=u.sibling}}function Mf(o,u){if(u.subtreeFlags&10256)for(u=u.child;u!==null;){var h=o,p=u,x=p.flags;switch(p.tag){case 22:Mf(h,p),x&2048&&Om(p.alternate,p);break;case 24:Mf(h,p),x&2048&&Mm(p.alternate,p);break;default:Mf(h,p)}u=u.sibling}}var Nf=8192;function Su(o){if(o.subtreeFlags&Nf)for(o=o.child;o!==null;)_w(o),o=o.sibling}function _w(o){switch(o.tag){case 26:Su(o),o.flags&Nf&&o.memoizedState!==null&&G6(Ri,o.memoizedState,o.memoizedProps);break;case 5:Su(o);break;case 3:case 4:var u=Ri;Ri=N0(o.stateNode.containerInfo),Su(o),Ri=u;break;case 22:o.memoizedState===null&&(u=o.alternate,u!==null&&u.memoizedState!==null?(u=Nf,Nf=16777216,Su(o),Nf=u):Su(o));break;default:Su(o)}}function Aw(o){var u=o.alternate;if(u!==null&&(o=u.child,o!==null)){u.child=null;do u=o.sibling,o.sibling=null,o=u;while(o!==null)}}function Pf(o){var u=o.deletions;if((o.flags&16)!==0){if(u!==null)for(var h=0;h<u.length;h++){var p=u[h];Fn=p,Ew(p,o)}Aw(o)}if(o.subtreeFlags&10256)for(o=o.child;o!==null;)ww(o),o=o.sibling}function ww(o){switch(o.tag){case 0:case 11:case 15:Pf(o),o.flags&2048&&Bs(9,o,o.return);break;case 3:Pf(o);break;case 12:Pf(o);break;case 22:var u=o.stateNode;o.memoizedState!==null&&u._visibility&2&&(o.return===null||o.return.tag!==13)?(u._visibility&=-3,A0(o)):Pf(o);break;default:Pf(o)}}function A0(o){var u=o.deletions;if((o.flags&16)!==0){if(u!==null)for(var h=0;h<u.length;h++){var p=u[h];Fn=p,Ew(p,o)}Aw(o)}for(o=o.child;o!==null;){switch(u=o,u.tag){case 0:case 11:case 15:Bs(8,u,u.return),A0(u);break;case 22:h=u.stateNode,h._visibility&2&&(h._visibility&=-3,A0(u));break;default:A0(u)}o=o.sibling}}function Ew(o,u){for(;Fn!==null;){var h=Fn;switch(h.tag){case 0:case 11:case 15:Bs(8,h,u);break;case 23:case 22:if(h.memoizedState!==null&&h.memoizedState.cachePool!==null){var p=h.memoizedState.cachePool.pool;p!=null&&p.refCount++}break;case 24:mf(h.memoizedState.cache)}if(p=h.child,p!==null)p.return=h,Fn=p;else t:for(h=o;Fn!==null;){p=Fn;var x=p.sibling,E=p.return;if(gw(p),p===h){Fn=null;break t}if(x!==null){x.return=E,Fn=x;break t}Fn=E}}}var s6={getCacheForType:function(o){var u=ar(wn),h=u.data.get(o);return h===void 0&&(h=o(),u.data.set(o,h)),h}},o6=typeof WeakMap=="function"?WeakMap:Map,be=0,Ve=null,Qt=null,ie=0,Se=0,Gr=null,Us=!1,Tu=!1,Nm=!1,Wa=0,tn=0,js=0,hl=0,Pm=0,gi=0,Cu=0,kf=null,Rr=null,km=!1,Lm=0,w0=1/0,E0=null,zs=null,Kn=0,Hs=null,Iu=null,Ru=0,Bm=0,Vm=null,bw=null,Lf=0,Fm=null;function $r(){if((be&2)!==0&&ie!==0)return ie&-ie;if(q.T!==null){var o=mu;return o!==0?o:qm()}return bs()}function Sw(){gi===0&&(gi=(ie&536870912)===0||pe?Gc():536870912);var o=di.current;return o!==null&&(o.flags|=32),gi}function qr(o,u,h){(o===Ve&&(Se===2||Se===9)||o.cancelPendingCommit!==null)&&(Du(o,0),Gs(o,ie,gi,!1)),Sa(o,h),((be&2)===0||o!==Ve)&&(o===Ve&&((be&2)===0&&(hl|=h),tn===4&&Gs(o,ie,gi,!1)),ia(o))}function Tw(o,u,h){if((be&6)!==0)throw Error(r(327));var p=!h&&(u&124)===0&&(u&o.expiredLanes)===0||Vo(o,u),x=p?c6(o,u):zm(o,u,!0),E=p;do{if(x===0){Tu&&!p&&Gs(o,u,0,!1);break}else{if(h=o.current.alternate,E&&!l6(h)){x=zm(o,u,!1),E=!1;continue}if(x===2){if(E=u,o.errorRecoveryDisabledLanes&E)var V=0;else V=o.pendingLanes&-536870913,V=V!==0?V:V&536870912?536870912:0;if(V!==0){u=V;t:{var j=o;x=kf;var $=j.current.memoizedState.isDehydrated;if($&&(Du(j,V).flags|=256),V=zm(j,V,!1),V!==2){if(Nm&&!$){j.errorRecoveryDisabledLanes|=E,hl|=E,x=4;break t}E=Rr,Rr=x,E!==null&&(Rr===null?Rr=E:Rr.push.apply(Rr,E))}x=V}if(E=!1,x!==2)continue}}if(x===1){Du(o,0),Gs(o,u,0,!0);break}t:{switch(p=o,E=x,E){case 0:case 1:throw Error(r(345));case 4:if((u&4194048)!==u)break;case 6:Gs(p,u,gi,!Us);break t;case 2:Rr=null;break;case 3:case 5:break;default:throw Error(r(329))}if((u&62914560)===u&&(x=Lm+300-Ge(),10<x)){if(Gs(p,u,gi,!Us),Wl(p,0,!0)!==0)break t;p.timeoutHandle=eE(Cw.bind(null,p,h,Rr,E0,km,u,gi,hl,Cu,Us,E,2,-0,0),x);break t}Cw(p,h,Rr,E0,km,u,gi,hl,Cu,Us,E,0,-0,0)}}break}while(!0);ia(o)}function Cw(o,u,h,p,x,E,V,j,$,J,ut,dt,et,nt){if(o.timeoutHandle=-1,dt=u.subtreeFlags,(dt&8192||(dt&16785408)===16785408)&&(Hf={stylesheets:null,count:0,unsuspend:H6},_w(u),dt=$6(),dt!==null)){o.cancelPendingCommit=dt(Pw.bind(null,o,u,E,h,p,x,V,j,$,ut,1,et,nt)),Gs(o,E,V,!J);return}Pw(o,u,E,h,p,x,V,j,$)}function l6(o){for(var u=o;;){var h=u.tag;if((h===0||h===11||h===15)&&u.flags&16384&&(h=u.updateQueue,h!==null&&(h=h.stores,h!==null)))for(var p=0;p<h.length;p++){var x=h[p],E=x.getSnapshot;x=x.value;try{if(!Ur(E(),x))return!1}catch{return!1}}if(h=u.child,u.subtreeFlags&16384&&h!==null)h.return=u,u=h;else{if(u===o)break;for(;u.sibling===null;){if(u.return===null||u.return===o)return!0;u=u.return}u.sibling.return=u.return,u=u.sibling}}return!0}function Gs(o,u,h,p){u&=~Pm,u&=~hl,o.suspendedLanes|=u,o.pingedLanes&=~u,p&&(o.warmLanes|=u),p=o.expirationTimes;for(var x=u;0<x;){var E=31-ir(x),V=1<<E;p[E]=-1,x&=~V}h!==0&&Hi(o,h,u)}function b0(){return(be&6)===0?(Bf(0),!1):!0}function Um(){if(Qt!==null){if(Se===0)var o=Qt.return;else o=Qt,Fa=sl=null,rm(o),wu=null,Cf=0,o=Qt;for(;o!==null;)sw(o.alternate,o),o=o.return;Qt=null}}function Du(o,u){var h=o.timeoutHandle;h!==-1&&(o.timeoutHandle=-1,T6(h)),h=o.cancelPendingCommit,h!==null&&(o.cancelPendingCommit=null,h()),Um(),Ve=o,Qt=h=La(o.current,null),ie=u,Se=0,Gr=null,Us=!1,Tu=Vo(o,u),Nm=!1,Cu=gi=Pm=hl=js=tn=0,Rr=kf=null,km=!1,(u&8)!==0&&(u|=u&32);var p=o.entangledLanes;if(p!==0)for(o=o.entanglements,p&=u;0<p;){var x=31-ir(p),E=1<<x;u|=o[x],p&=~E}return Wa=u,qd(),h}function Iw(o,u){Wt=null,q.H=f0,u===yf||u===e0?(u=$_(),Se=3):u===z_?(u=$_(),Se=4):Se=u===qA?8:u!==null&&typeof u=="object"&&typeof u.then=="function"?6:1,Gr=u,Qt===null&&(tn=1,m0(o,ui(u,o.current)))}function Rw(){var o=q.H;return q.H=f0,o===null?f0:o}function Dw(){var o=q.A;return q.A=s6,o}function jm(){tn=4,Us||(ie&4194048)!==ie&&di.current!==null||(Tu=!0),(js&134217727)===0&&(hl&134217727)===0||Ve===null||Gs(Ve,ie,gi,!1)}function zm(o,u,h){var p=be;be|=2;var x=Rw(),E=Dw();(Ve!==o||ie!==u)&&(E0=null,Du(o,u)),u=!1;var V=tn;t:do try{if(Se!==0&&Qt!==null){var j=Qt,$=Gr;switch(Se){case 8:Um(),V=6;break t;case 3:case 2:case 9:case 6:di.current===null&&(u=!0);var J=Se;if(Se=0,Gr=null,Ou(o,j,$,J),h&&Tu){V=0;break t}break;default:J=Se,Se=0,Gr=null,Ou(o,j,$,J)}}u6(),V=tn;break}catch(ut){Iw(o,ut)}while(!0);return u&&o.shellSuspendCounter++,Fa=sl=null,be=p,q.H=x,q.A=E,Qt===null&&(Ve=null,ie=0,qd()),V}function u6(){for(;Qt!==null;)Ow(Qt)}function c6(o,u){var h=be;be|=2;var p=Rw(),x=Dw();Ve!==o||ie!==u?(E0=null,w0=Ge()+500,Du(o,u)):Tu=Vo(o,u);t:do try{if(Se!==0&&Qt!==null){u=Qt;var E=Gr;e:switch(Se){case 1:Se=0,Gr=null,Ou(o,u,E,1);break;case 2:case 9:if(H_(E)){Se=0,Gr=null,Mw(u);break}u=function(){Se!==2&&Se!==9||Ve!==o||(Se=7),ia(o)},E.then(u,u);break t;case 3:Se=7;break t;case 4:Se=5;break t;case 7:H_(E)?(Se=0,Gr=null,Mw(u)):(Se=0,Gr=null,Ou(o,u,E,7));break;case 5:var V=null;switch(Qt.tag){case 26:V=Qt.memoizedState;case 5:case 27:var j=Qt;if(!V||dE(V)){Se=0,Gr=null;var $=j.sibling;if($!==null)Qt=$;else{var J=j.return;J!==null?(Qt=J,S0(J)):Qt=null}break e}}Se=0,Gr=null,Ou(o,u,E,5);break;case 6:Se=0,Gr=null,Ou(o,u,E,6);break;case 8:Um(),tn=6;break t;default:throw Error(r(462))}}f6();break}catch(ut){Iw(o,ut)}while(!0);return Fa=sl=null,q.H=p,q.A=x,be=h,Qt!==null?0:(Ve=null,ie=0,qd(),tn)}function f6(){for(;Qt!==null&&!Pe();)Ow(Qt)}function Ow(o){var u=iw(o.alternate,o,Wa);o.memoizedProps=o.pendingProps,u===null?S0(o):Qt=u}function Mw(o){var u=o,h=u.alternate;switch(u.tag){case 15:case 0:u=QA(h,u,u.pendingProps,u.type,void 0,ie);break;case 11:u=QA(h,u,u.pendingProps,u.type.render,u.ref,ie);break;case 5:rm(u);default:sw(h,u),u=Qt=N_(u,Wa),u=iw(h,u,Wa)}o.memoizedProps=o.pendingProps,u===null?S0(o):Qt=u}function Ou(o,u,h,p){Fa=sl=null,rm(u),wu=null,Cf=0;var x=u.return;try{if(t6(o,x,u,h,ie)){tn=1,m0(o,ui(h,o.current)),Qt=null;return}}catch(E){if(x!==null)throw Qt=x,E;tn=1,m0(o,ui(h,o.current)),Qt=null;return}u.flags&32768?(pe||p===1?o=!0:Tu||(ie&536870912)!==0?o=!1:(Us=o=!0,(p===2||p===9||p===3||p===6)&&(p=di.current,p!==null&&p.tag===13&&(p.flags|=16384))),Nw(u,o)):S0(u)}function S0(o){var u=o;do{if((u.flags&32768)!==0){Nw(u,Us);return}o=u.return;var h=n6(u.alternate,u,Wa);if(h!==null){Qt=h;return}if(u=u.sibling,u!==null){Qt=u;return}Qt=u=o}while(u!==null);tn===0&&(tn=5)}function Nw(o,u){do{var h=r6(o.alternate,o);if(h!==null){h.flags&=32767,Qt=h;return}if(h=o.return,h!==null&&(h.flags|=32768,h.subtreeFlags=0,h.deletions=null),!u&&(o=o.sibling,o!==null)){Qt=o;return}Qt=o=h}while(o!==null);tn=6,Qt=null}function Pw(o,u,h,p,x,E,V,j,$){o.cancelPendingCommit=null;do T0();while(Kn!==0);if((be&6)!==0)throw Error(r(327));if(u!==null){if(u===o.current)throw Error(r(177));if(E=u.lanes|u.childLanes,E|=Mp,qc(o,h,E,V,j,$),o===Ve&&(Qt=Ve=null,ie=0),Iu=u,Hs=o,Ru=h,Bm=E,Vm=x,bw=p,(u.subtreeFlags&10256)!==0||(u.flags&10256)!==0?(o.callbackNode=null,o.callbackPriority=0,p6(Ea,function(){return Fw(),null})):(o.callbackNode=null,o.callbackPriority=0),p=(u.flags&13878)!==0,(u.subtreeFlags&13878)!==0||p){p=q.T,q.T=null,x=Z.p,Z.p=2,V=be,be|=4;try{i6(o,u,h)}finally{be=V,Z.p=x,q.T=p}}Kn=1,kw(),Lw(),Bw()}}function kw(){if(Kn===1){Kn=0;var o=Hs,u=Iu,h=(u.flags&13878)!==0;if((u.subtreeFlags&13878)!==0||h){h=q.T,q.T=null;var p=Z.p;Z.p=2;var x=be;be|=4;try{vw(u,o);var E=tv,V=E_(o.containerInfo),j=E.focusedElem,$=E.selectionRange;if(V!==j&&j&&j.ownerDocument&&w_(j.ownerDocument.documentElement,j)){if($!==null&&Cp(j)){var J=$.start,ut=$.end;if(ut===void 0&&(ut=J),"selectionStart"in j)j.selectionStart=J,j.selectionEnd=Math.min(ut,j.value.length);else{var dt=j.ownerDocument||document,et=dt&&dt.defaultView||window;if(et.getSelection){var nt=et.getSelection(),Ut=j.textContent.length,Lt=Math.min($.start,Ut),Me=$.end===void 0?Lt:Math.min($.end,Ut);!nt.extend&&Lt>Me&&(V=Me,Me=Lt,Lt=V);var Y=A_(j,Lt),X=A_(j,Me);if(Y&&X&&(nt.rangeCount!==1||nt.anchorNode!==Y.node||nt.anchorOffset!==Y.offset||nt.focusNode!==X.node||nt.focusOffset!==X.offset)){var Q=dt.createRange();Q.setStart(Y.node,Y.offset),nt.removeAllRanges(),Lt>Me?(nt.addRange(Q),nt.extend(X.node,X.offset)):(Q.setEnd(X.node,X.offset),nt.addRange(Q))}}}}for(dt=[],nt=j;nt=nt.parentNode;)nt.nodeType===1&&dt.push({element:nt,left:nt.scrollLeft,top:nt.scrollTop});for(typeof j.focus=="function"&&j.focus(),j=0;j<dt.length;j++){var ft=dt[j];ft.element.scrollLeft=ft.left,ft.element.scrollTop=ft.top}}V0=!!Jm,tv=Jm=null}finally{be=x,Z.p=p,q.T=h}}o.current=u,Kn=2}}function Lw(){if(Kn===2){Kn=0;var o=Hs,u=Iu,h=(u.flags&8772)!==0;if((u.subtreeFlags&8772)!==0||h){h=q.T,q.T=null;var p=Z.p;Z.p=2;var x=be;be|=4;try{dw(o,u.alternate,u)}finally{be=x,Z.p=p,q.T=h}}Kn=3}}function Bw(){if(Kn===4||Kn===3){Kn=0,Ke();var o=Hs,u=Iu,h=Ru,p=bw;(u.subtreeFlags&10256)!==0||(u.flags&10256)!==0?Kn=5:(Kn=0,Iu=Hs=null,Vw(o,o.pendingLanes));var x=o.pendingLanes;if(x===0&&(zs=null),Xl(h),u=u.stateNode,ue&&typeof ue.onCommitFiberRoot=="function")try{ue.onCommitFiberRoot($e,u,void 0,(u.current.flags&128)===128)}catch{}if(p!==null){u=q.T,x=Z.p,Z.p=2,q.T=null;try{for(var E=o.onRecoverableError,V=0;V<p.length;V++){var j=p[V];E(j.value,{componentStack:j.stack})}}finally{q.T=u,Z.p=x}}(Ru&3)!==0&&T0(),ia(o),x=o.pendingLanes,(h&4194090)!==0&&(x&42)!==0?o===Fm?Lf++:(Lf=0,Fm=o):Lf=0,Bf(0)}}function Vw(o,u){(o.pooledCacheLanes&=u)===0&&(u=o.pooledCache,u!=null&&(o.pooledCache=null,mf(u)))}function T0(o){return kw(),Lw(),Bw(),Fw()}function Fw(){if(Kn!==5)return!1;var o=Hs,u=Bm;Bm=0;var h=Xl(Ru),p=q.T,x=Z.p;try{Z.p=32>h?32:h,q.T=null,h=Vm,Vm=null;var E=Hs,V=Ru;if(Kn=0,Iu=Hs=null,Ru=0,(be&6)!==0)throw Error(r(331));var j=be;if(be|=4,ww(E.current),xw(E,E.current,V,h),be=j,Bf(0,!1),ue&&typeof ue.onPostCommitFiberRoot=="function")try{ue.onPostCommitFiberRoot($e,E)}catch{}return!0}finally{Z.p=x,q.T=p,Vw(o,u)}}function Uw(o,u,h){u=ui(h,u),u=vm(o.stateNode,u,2),o=Ns(o,u,2),o!==null&&(Sa(o,2),ia(o))}function ke(o,u,h){if(o.tag===3)Uw(o,o,h);else for(;u!==null;){if(u.tag===3){Uw(u,o,h);break}else if(u.tag===1){var p=u.stateNode;if(typeof u.type.getDerivedStateFromError=="function"||typeof p.componentDidCatch=="function"&&(zs===null||!zs.has(p))){o=ui(h,o),h=GA(2),p=Ns(u,h,2),p!==null&&($A(h,p,u,o),Sa(p,2),ia(p));break}}u=u.return}}function Hm(o,u,h){var p=o.pingCache;if(p===null){p=o.pingCache=new o6;var x=new Set;p.set(u,x)}else x=p.get(u),x===void 0&&(x=new Set,p.set(u,x));x.has(h)||(Nm=!0,x.add(h),o=h6.bind(null,o,u,h),u.then(o,o))}function h6(o,u,h){var p=o.pingCache;p!==null&&p.delete(u),o.pingedLanes|=o.suspendedLanes&h,o.warmLanes&=~h,Ve===o&&(ie&h)===h&&(tn===4||tn===3&&(ie&62914560)===ie&&300>Ge()-Lm?(be&2)===0&&Du(o,0):Pm|=h,Cu===ie&&(Cu=0)),ia(o)}function jw(o,u){u===0&&(u=$c()),o=hu(o,u),o!==null&&(Sa(o,u),ia(o))}function d6(o){var u=o.memoizedState,h=0;u!==null&&(h=u.retryLane),jw(o,h)}function g6(o,u){var h=0;switch(o.tag){case 13:var p=o.stateNode,x=o.memoizedState;x!==null&&(h=x.retryLane);break;case 19:p=o.stateNode;break;case 22:p=o.stateNode._retryCache;break;default:throw Error(r(314))}p!==null&&p.delete(u),jw(o,h)}function p6(o,u){return _e(o,u)}var C0=null,Mu=null,Gm=!1,I0=!1,$m=!1,dl=0;function ia(o){o!==Mu&&o.next===null&&(Mu===null?C0=Mu=o:Mu=Mu.next=o),I0=!0,Gm||(Gm=!0,v6())}function Bf(o,u){if(!$m&&I0){$m=!0;do for(var h=!1,p=C0;p!==null;){if(o!==0){var x=p.pendingLanes;if(x===0)var E=0;else{var V=p.suspendedLanes,j=p.pingedLanes;E=(1<<31-ir(42|o)+1)-1,E&=x&~(V&~j),E=E&201326741?E&201326741|1:E?E|2:0}E!==0&&(h=!0,$w(p,E))}else E=ie,E=Wl(p,p===Ve?E:0,p.cancelPendingCommit!==null||p.timeoutHandle!==-1),(E&3)===0||Vo(p,E)||(h=!0,$w(p,E));p=p.next}while(h);$m=!1}}function m6(){zw()}function zw(){I0=Gm=!1;var o=0;dl!==0&&(S6()&&(o=dl),dl=0);for(var u=Ge(),h=null,p=C0;p!==null;){var x=p.next,E=Hw(p,u);E===0?(p.next=null,h===null?C0=x:h.next=x,x===null&&(Mu=h)):(h=p,(o!==0||(E&3)!==0)&&(I0=!0)),p=x}Bf(o)}function Hw(o,u){for(var h=o.suspendedLanes,p=o.pingedLanes,x=o.expirationTimes,E=o.pendingLanes&-62914561;0<E;){var V=31-ir(E),j=1<<V,$=x[V];$===-1?((j&h)===0||(j&p)!==0)&&(x[V]=Hc(j,u)):$<=u&&(o.expiredLanes|=j),E&=~j}if(u=Ve,h=ie,h=Wl(o,o===u?h:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),p=o.callbackNode,h===0||o===u&&(Se===2||Se===9)||o.cancelPendingCommit!==null)return p!==null&&p!==null&&Nt(p),o.callbackNode=null,o.callbackPriority=0;if((h&3)===0||Vo(o,h)){if(u=h&-h,u===o.callbackPriority)return u;switch(p!==null&&Nt(p),Xl(h)){case 2:case 8:h=wa;break;case 32:h=Ea;break;case 268435456:h=ws;break;default:h=Ea}return p=Gw.bind(null,o),h=_e(h,p),o.callbackPriority=u,o.callbackNode=h,u}return p!==null&&p!==null&&Nt(p),o.callbackPriority=2,o.callbackNode=null,2}function Gw(o,u){if(Kn!==0&&Kn!==5)return o.callbackNode=null,o.callbackPriority=0,null;var h=o.callbackNode;if(T0()&&o.callbackNode!==h)return null;var p=ie;return p=Wl(o,o===Ve?p:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),p===0?null:(Tw(o,p,u),Hw(o,Ge()),o.callbackNode!=null&&o.callbackNode===h?Gw.bind(null,o):null)}function $w(o,u){if(T0())return null;Tw(o,u,!0)}function v6(){C6(function(){(be&6)!==0?_e(As,m6):zw()})}function qm(){return dl===0&&(dl=Gc()),dl}function qw(o){return o==null||typeof o=="symbol"||typeof o=="boolean"?null:typeof o=="function"?o:tu(""+o)}function Ww(o,u){var h=u.ownerDocument.createElement("input");return h.name=u.name,h.value=u.value,o.id&&h.setAttribute("form",o.id),u.parentNode.insertBefore(h,u),o=new FormData(o),h.parentNode.removeChild(h),o}function y6(o,u,h,p,x){if(u==="submit"&&h&&h.stateNode===x){var E=qw((x[un]||null).action),V=p.submitter;V&&(u=(u=V[un]||null)?qw(u.formAction):V.getAttribute("formAction"),u!==null&&(E=u,V=null));var j=new eu("action","action",null,p,x);o.push({event:j,listeners:[{instance:null,listener:function(){if(p.defaultPrevented){if(dl!==0){var $=V?Ww(x,V):new FormData(x);hm(h,{pending:!0,data:$,method:x.method,action:E},null,$)}}else typeof E=="function"&&(j.preventDefault(),$=V?Ww(x,V):new FormData(x),hm(h,{pending:!0,data:$,method:x.method,action:E},E,$))},currentTarget:x}]})}}for(var Wm=0;Wm<Op.length;Wm++){var Xm=Op[Wm],x6=Xm.toLowerCase(),_6=Xm[0].toUpperCase()+Xm.slice(1);Ii(x6,"on"+_6)}Ii(T_,"onAnimationEnd"),Ii(C_,"onAnimationIteration"),Ii(I_,"onAnimationStart"),Ii("dblclick","onDoubleClick"),Ii("focusin","onFocus"),Ii("focusout","onBlur"),Ii(B8,"onTransitionRun"),Ii(V8,"onTransitionStart"),Ii(F8,"onTransitionCancel"),Ii(R_,"onTransitionEnd"),Ca("onMouseEnter",["mouseout","mouseover"]),Ca("onMouseLeave",["mouseout","mouseover"]),Ca("onPointerEnter",["pointerout","pointerover"]),Ca("onPointerLeave",["pointerout","pointerover"]),Ti("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ti("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ti("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ti("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ti("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ti("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Vf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),A6=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Vf));function Xw(o,u){u=(u&4)!==0;for(var h=0;h<o.length;h++){var p=o[h],x=p.event;p=p.listeners;t:{var E=void 0;if(u)for(var V=p.length-1;0<=V;V--){var j=p[V],$=j.instance,J=j.currentTarget;if(j=j.listener,$!==E&&x.isPropagationStopped())break t;E=j,x.currentTarget=J;try{E(x)}catch(ut){p0(ut)}x.currentTarget=null,E=$}else for(V=0;V<p.length;V++){if(j=p[V],$=j.instance,J=j.currentTarget,j=j.listener,$!==E&&x.isPropagationStopped())break t;E=j,x.currentTarget=J;try{E(x)}catch(ut){p0(ut)}x.currentTarget=null,E=$}}}}function Jt(o,u){var h=u[Xc];h===void 0&&(h=u[Xc]=new Set);var p=o+"__bubble";h.has(p)||(Yw(u,o,2,!1),h.add(p))}function Ym(o,u,h){var p=0;u&&(p|=4),Yw(h,o,p,u)}var R0="_reactListening"+Math.random().toString(36).slice(2);function Km(o){if(!o[R0]){o[R0]=!0,Yc.forEach(function(h){h!=="selectionchange"&&(A6.has(h)||Ym(h,!1,o),Ym(h,!0,o))});var u=o.nodeType===9?o:o.ownerDocument;u===null||u[R0]||(u[R0]=!0,Ym("selectionchange",!1,u))}}function Yw(o,u,h,p){switch(xE(u)){case 2:var x=X6;break;case 8:x=Y6;break;default:x=cv}h=x.bind(null,u,h,o),x=void 0,!oi||u!=="touchstart"&&u!=="touchmove"&&u!=="wheel"||(x=!0),p?x!==void 0?o.addEventListener(u,h,{capture:!0,passive:x}):o.addEventListener(u,h,!0):x!==void 0?o.addEventListener(u,h,{passive:x}):o.addEventListener(u,h,!1)}function Zm(o,u,h,p,x){var E=p;if((u&1)===0&&(u&2)===0&&p!==null)t:for(;;){if(p===null)return;var V=p.tag;if(V===3||V===4){var j=p.stateNode.containerInfo;if(j===x)break;if(V===4)for(V=p.return;V!==null;){var $=V.tag;if(($===3||$===4)&&V.stateNode.containerInfo===x)return;V=V.return}for(;j!==null;){if(V=Ta(j),V===null)return;if($=V.tag,$===5||$===6||$===26||$===27){p=E=V;continue t}j=j.parentNode}}p=p.return}Od(function(){var J=E,ut=si(h),dt=[];t:{var et=D_.get(o);if(et!==void 0){var nt=eu,Ut=o;switch(o){case"keypress":if(Yi(h)===0)break t;case"keydown":case"keyup":nt=ou;break;case"focusin":Ut="focus",nt=iu;break;case"focusout":Ut="blur",nt=iu;break;case"beforeblur":case"afterblur":nt=iu;break;case"click":if(h.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":nt=li;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":nt=Ep;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":nt=Fd;break;case T_:case C_:case I_:nt=au;break;case R_:nt=jd;break;case"scroll":case"scrollend":nt=Md;break;case"wheel":nt=lu;break;case"copy":case"cut":case"paste":nt=su;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":nt=lf;break;case"toggle":case"beforetoggle":nt=Hd}var Lt=(u&4)!==0,Me=!Lt&&(o==="scroll"||o==="scrollend"),Y=Lt?et!==null?et+"Capture":null:et;Lt=[];for(var X=J,Q;X!==null;){var ft=X;if(Q=ft.stateNode,ft=ft.tag,ft!==5&&ft!==26&&ft!==27||Q===null||Y===null||(ft=qo(X,Y),ft!=null&&Lt.push(Ff(X,ft,Q))),Me)break;X=X.return}0<Lt.length&&(et=new nt(et,Ut,null,h,ut),dt.push({event:et,listeners:Lt}))}}if((u&7)===0){t:{if(et=o==="mouseover"||o==="pointerover",nt=o==="mouseout"||o==="pointerout",et&&h!==Da&&(Ut=h.relatedTarget||h.fromElement)&&(Ta(Ut)||Ut[ii]))break t;if((nt||et)&&(et=ut.window===ut?ut:(et=ut.ownerDocument)?et.defaultView||et.parentWindow:window,nt?(Ut=h.relatedTarget||h.toElement,nt=J,Ut=Ut?Ta(Ut):null,Ut!==null&&(Me=a(Ut),Lt=Ut.tag,Ut!==Me||Lt!==5&&Lt!==27&&Lt!==6)&&(Ut=null)):(nt=null,Ut=J),nt!==Ut)){if(Lt=li,ft="onMouseLeave",Y="onMouseEnter",X="mouse",(o==="pointerout"||o==="pointerover")&&(Lt=lf,ft="onPointerLeave",Y="onPointerEnter",X="pointer"),Me=nt==null?et:$i(nt),Q=Ut==null?et:$i(Ut),et=new Lt(ft,X+"leave",nt,h,ut),et.target=Me,et.relatedTarget=Q,ft=null,Ta(ut)===J&&(Lt=new Lt(Y,X+"enter",Ut,h,ut),Lt.target=Q,Lt.relatedTarget=Me,ft=Lt),Me=ft,nt&&Ut)e:{for(Lt=nt,Y=Ut,X=0,Q=Lt;Q;Q=Nu(Q))X++;for(Q=0,ft=Y;ft;ft=Nu(ft))Q++;for(;0<X-Q;)Lt=Nu(Lt),X--;for(;0<Q-X;)Y=Nu(Y),Q--;for(;X--;){if(Lt===Y||Y!==null&&Lt===Y.alternate)break e;Lt=Nu(Lt),Y=Nu(Y)}Lt=null}else Lt=null;nt!==null&&Kw(dt,et,nt,Lt,!1),Ut!==null&&Me!==null&&Kw(dt,Me,Ut,Lt,!0)}}t:{if(et=J?$i(J):window,nt=et.nodeName&&et.nodeName.toLowerCase(),nt==="select"||nt==="input"&&et.type==="file")var Tt=p_;else if(An(et))if(m_)Tt=P8;else{Tt=M8;var Kt=O8}else nt=et.nodeName,!nt||nt.toLowerCase()!=="input"||et.type!=="checkbox"&&et.type!=="radio"?J&&tf(J.elementType)&&(Tt=p_):Tt=N8;if(Tt&&(Tt=Tt(o,J))){ka(dt,Tt,h,ut);break t}Kt&&Kt(o,et,J),o==="focusout"&&J&&et.type==="number"&&J.memoizedProps.value!=null&&Is(et,"number",et.value)}switch(Kt=J?$i(J):window,o){case"focusin":(An(Kt)||Kt.contentEditable==="true")&&(uu=Kt,Ip=J,ff=null);break;case"focusout":ff=Ip=uu=null;break;case"mousedown":Rp=!0;break;case"contextmenu":case"mouseup":case"dragend":Rp=!1,b_(dt,h,ut);break;case"selectionchange":if(L8)break;case"keydown":case"keyup":b_(dt,h,ut)}var Dt;if(Qi)t:{switch(o){case"compositionstart":var Bt="onCompositionStart";break t;case"compositionend":Bt="onCompositionEnd";break t;case"compositionupdate":Bt="onCompositionUpdate";break t}Bt=void 0}else ne?at(o,h)&&(Bt="onCompositionEnd"):o==="keydown"&&h.keyCode===229&&(Bt="onCompositionStart");Bt&&(P&&h.locale!=="ko"&&(ne||Bt!=="onCompositionStart"?Bt==="onCompositionEnd"&&ne&&(Dt=nf()):(Xi=ut,Rs="value"in Xi?Xi.value:Xi.textContent,ne=!0)),Kt=D0(J,Bt),0<Kt.length&&(Bt=new sf(Bt,o,null,h,ut),dt.push({event:Bt,listeners:Kt}),Dt?Bt.data=Dt:(Dt=yt(h),Dt!==null&&(Bt.data=Dt)))),(Dt=T?_n(o,h):re(o,h))&&(Bt=D0(J,"onBeforeInput"),0<Bt.length&&(Kt=new sf("onBeforeInput","beforeinput",null,h,ut),dt.push({event:Kt,listeners:Bt}),Kt.data=Dt)),y6(dt,o,J,h,ut)}Xw(dt,u)})}function Ff(o,u,h){return{instance:o,listener:u,currentTarget:h}}function D0(o,u){for(var h=u+"Capture",p=[];o!==null;){var x=o,E=x.stateNode;if(x=x.tag,x!==5&&x!==26&&x!==27||E===null||(x=qo(o,h),x!=null&&p.unshift(Ff(o,x,E)),x=qo(o,u),x!=null&&p.push(Ff(o,x,E))),o.tag===3)return p;o=o.return}return[]}function Nu(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5&&o.tag!==27);return o||null}function Kw(o,u,h,p,x){for(var E=u._reactName,V=[];h!==null&&h!==p;){var j=h,$=j.alternate,J=j.stateNode;if(j=j.tag,$!==null&&$===p)break;j!==5&&j!==26&&j!==27||J===null||($=J,x?(J=qo(h,E),J!=null&&V.unshift(Ff(h,J,$))):x||(J=qo(h,E),J!=null&&V.push(Ff(h,J,$)))),h=h.return}V.length!==0&&o.push({event:u,listeners:V})}var w6=/\r\n?/g,E6=/\u0000|\uFFFD/g;function Zw(o){return(typeof o=="string"?o:""+o).replace(w6,`
`).replace(E6,"")}function Qw(o,u){return u=Zw(u),Zw(o)===u}function O0(){}function Oe(o,u,h,p,x,E){switch(h){case"children":typeof p=="string"?u==="body"||u==="textarea"&&p===""||ai(o,p):(typeof p=="number"||typeof p=="bigint")&&u!=="body"&&ai(o,""+p);break;case"className":qi(o,"class",p);break;case"tabIndex":qi(o,"tabindex",p);break;case"dir":case"role":case"viewBox":case"width":case"height":qi(o,h,p);break;case"style":Jc(o,p,E);break;case"data":if(u!=="object"){qi(o,"data",p);break}case"src":case"href":if(p===""&&(u!=="a"||h!=="href")){o.removeAttribute(h);break}if(p==null||typeof p=="function"||typeof p=="symbol"||typeof p=="boolean"){o.removeAttribute(h);break}p=tu(""+p),o.setAttribute(h,p);break;case"action":case"formAction":if(typeof p=="function"){o.setAttribute(h,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof E=="function"&&(h==="formAction"?(u!=="input"&&Oe(o,u,"name",x.name,x,null),Oe(o,u,"formEncType",x.formEncType,x,null),Oe(o,u,"formMethod",x.formMethod,x,null),Oe(o,u,"formTarget",x.formTarget,x,null)):(Oe(o,u,"encType",x.encType,x,null),Oe(o,u,"method",x.method,x,null),Oe(o,u,"target",x.target,x,null)));if(p==null||typeof p=="symbol"||typeof p=="boolean"){o.removeAttribute(h);break}p=tu(""+p),o.setAttribute(h,p);break;case"onClick":p!=null&&(o.onclick=O0);break;case"onScroll":p!=null&&Jt("scroll",o);break;case"onScrollEnd":p!=null&&Jt("scrollend",o);break;case"dangerouslySetInnerHTML":if(p!=null){if(typeof p!="object"||!("__html"in p))throw Error(r(61));if(h=p.__html,h!=null){if(x.children!=null)throw Error(r(60));o.innerHTML=h}}break;case"multiple":o.multiple=p&&typeof p!="function"&&typeof p!="symbol";break;case"muted":o.muted=p&&typeof p!="function"&&typeof p!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(p==null||typeof p=="function"||typeof p=="boolean"||typeof p=="symbol"){o.removeAttribute("xlink:href");break}h=tu(""+p),o.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",h);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":p!=null&&typeof p!="function"&&typeof p!="symbol"?o.setAttribute(h,""+p):o.removeAttribute(h);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":p&&typeof p!="function"&&typeof p!="symbol"?o.setAttribute(h,""):o.removeAttribute(h);break;case"capture":case"download":p===!0?o.setAttribute(h,""):p!==!1&&p!=null&&typeof p!="function"&&typeof p!="symbol"?o.setAttribute(h,p):o.removeAttribute(h);break;case"cols":case"rows":case"size":case"span":p!=null&&typeof p!="function"&&typeof p!="symbol"&&!isNaN(p)&&1<=p?o.setAttribute(h,p):o.removeAttribute(h);break;case"rowSpan":case"start":p==null||typeof p=="function"||typeof p=="symbol"||isNaN(p)?o.removeAttribute(h):o.setAttribute(h,p);break;case"popover":Jt("beforetoggle",o),Jt("toggle",o),Cs(o,"popover",p);break;case"xlinkActuate":Wn(o,"http://www.w3.org/1999/xlink","xlink:actuate",p);break;case"xlinkArcrole":Wn(o,"http://www.w3.org/1999/xlink","xlink:arcrole",p);break;case"xlinkRole":Wn(o,"http://www.w3.org/1999/xlink","xlink:role",p);break;case"xlinkShow":Wn(o,"http://www.w3.org/1999/xlink","xlink:show",p);break;case"xlinkTitle":Wn(o,"http://www.w3.org/1999/xlink","xlink:title",p);break;case"xlinkType":Wn(o,"http://www.w3.org/1999/xlink","xlink:type",p);break;case"xmlBase":Wn(o,"http://www.w3.org/XML/1998/namespace","xml:base",p);break;case"xmlLang":Wn(o,"http://www.w3.org/XML/1998/namespace","xml:lang",p);break;case"xmlSpace":Wn(o,"http://www.w3.org/XML/1998/namespace","xml:space",p);break;case"is":Cs(o,"is",p);break;case"innerText":case"textContent":break;default:(!(2<h.length)||h[0]!=="o"&&h[0]!=="O"||h[1]!=="n"&&h[1]!=="N")&&(h=Ap.get(h)||h,Cs(o,h,p))}}function Qm(o,u,h,p,x,E){switch(h){case"style":Jc(o,p,E);break;case"dangerouslySetInnerHTML":if(p!=null){if(typeof p!="object"||!("__html"in p))throw Error(r(61));if(h=p.__html,h!=null){if(x.children!=null)throw Error(r(60));o.innerHTML=h}}break;case"children":typeof p=="string"?ai(o,p):(typeof p=="number"||typeof p=="bigint")&&ai(o,""+p);break;case"onScroll":p!=null&&Jt("scroll",o);break;case"onScrollEnd":p!=null&&Jt("scrollend",o);break;case"onClick":p!=null&&(o.onclick=O0);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Yl.hasOwnProperty(h))t:{if(h[0]==="o"&&h[1]==="n"&&(x=h.endsWith("Capture"),u=h.slice(2,x?h.length-7:void 0),E=o[un]||null,E=E!=null?E[h]:null,typeof E=="function"&&o.removeEventListener(u,E,x),typeof p=="function")){typeof E!="function"&&E!==null&&(h in o?o[h]=null:o.hasAttribute(h)&&o.removeAttribute(h)),o.addEventListener(u,p,x);break t}h in o?o[h]=p:p===!0?o.setAttribute(h,""):Cs(o,h,p)}}}function Zn(o,u,h){switch(u){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Jt("error",o),Jt("load",o);var p=!1,x=!1,E;for(E in h)if(h.hasOwnProperty(E)){var V=h[E];if(V!=null)switch(E){case"src":p=!0;break;case"srcSet":x=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,u));default:Oe(o,u,E,V,h,null)}}x&&Oe(o,u,"srcSet",h.srcSet,h,null),p&&Oe(o,u,"src",h.src,h,null);return;case"input":Jt("invalid",o);var j=E=V=x=null,$=null,J=null;for(p in h)if(h.hasOwnProperty(p)){var ut=h[p];if(ut!=null)switch(p){case"name":x=ut;break;case"type":V=ut;break;case"checked":$=ut;break;case"defaultChecked":J=ut;break;case"value":E=ut;break;case"defaultValue":j=ut;break;case"children":case"dangerouslySetInnerHTML":if(ut!=null)throw Error(r(137,u));break;default:Oe(o,u,p,ut,h,null)}}Ho(o,E,j,$,J,V,x,!1),Jl(o);return;case"select":Jt("invalid",o),p=V=E=null;for(x in h)if(h.hasOwnProperty(x)&&(j=h[x],j!=null))switch(x){case"value":E=j;break;case"defaultValue":V=j;break;case"multiple":p=j;default:Oe(o,u,x,j,h,null)}u=E,h=V,o.multiple=!!p,u!=null?Ra(o,!!p,u,!1):h!=null&&Ra(o,!!p,h,!0);return;case"textarea":Jt("invalid",o),E=x=p=null;for(V in h)if(h.hasOwnProperty(V)&&(j=h[V],j!=null))switch(V){case"value":p=j;break;case"defaultValue":x=j;break;case"children":E=j;break;case"dangerouslySetInnerHTML":if(j!=null)throw Error(r(91));break;default:Oe(o,u,V,j,h,null)}Go(o,p,x,E),Jl(o);return;case"option":for($ in h)if(h.hasOwnProperty($)&&(p=h[$],p!=null))switch($){case"selected":o.selected=p&&typeof p!="function"&&typeof p!="symbol";break;default:Oe(o,u,$,p,h,null)}return;case"dialog":Jt("beforetoggle",o),Jt("toggle",o),Jt("cancel",o),Jt("close",o);break;case"iframe":case"object":Jt("load",o);break;case"video":case"audio":for(p=0;p<Vf.length;p++)Jt(Vf[p],o);break;case"image":Jt("error",o),Jt("load",o);break;case"details":Jt("toggle",o);break;case"embed":case"source":case"link":Jt("error",o),Jt("load",o);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(J in h)if(h.hasOwnProperty(J)&&(p=h[J],p!=null))switch(J){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,u));default:Oe(o,u,J,p,h,null)}return;default:if(tf(u)){for(ut in h)h.hasOwnProperty(ut)&&(p=h[ut],p!==void 0&&Qm(o,u,ut,p,h,void 0));return}}for(j in h)h.hasOwnProperty(j)&&(p=h[j],p!=null&&Oe(o,u,j,p,h,null))}function b6(o,u,h,p){switch(u){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var x=null,E=null,V=null,j=null,$=null,J=null,ut=null;for(nt in h){var dt=h[nt];if(h.hasOwnProperty(nt)&&dt!=null)switch(nt){case"checked":break;case"value":break;case"defaultValue":$=dt;default:p.hasOwnProperty(nt)||Oe(o,u,nt,null,p,dt)}}for(var et in p){var nt=p[et];if(dt=h[et],p.hasOwnProperty(et)&&(nt!=null||dt!=null))switch(et){case"type":E=nt;break;case"name":x=nt;break;case"checked":J=nt;break;case"defaultChecked":ut=nt;break;case"value":V=nt;break;case"defaultValue":j=nt;break;case"children":case"dangerouslySetInnerHTML":if(nt!=null)throw Error(r(137,u));break;default:nt!==dt&&Oe(o,u,et,nt,p,dt)}}Fr(o,V,j,$,J,ut,E,x);return;case"select":nt=V=j=et=null;for(E in h)if($=h[E],h.hasOwnProperty(E)&&$!=null)switch(E){case"value":break;case"multiple":nt=$;default:p.hasOwnProperty(E)||Oe(o,u,E,null,p,$)}for(x in p)if(E=p[x],$=h[x],p.hasOwnProperty(x)&&(E!=null||$!=null))switch(x){case"value":et=E;break;case"defaultValue":j=E;break;case"multiple":V=E;default:E!==$&&Oe(o,u,x,E,p,$)}u=j,h=V,p=nt,et!=null?Ra(o,!!h,et,!1):!!p!=!!h&&(u!=null?Ra(o,!!h,u,!0):Ra(o,!!h,h?[]:"",!1));return;case"textarea":nt=et=null;for(j in h)if(x=h[j],h.hasOwnProperty(j)&&x!=null&&!p.hasOwnProperty(j))switch(j){case"value":break;case"children":break;default:Oe(o,u,j,null,p,x)}for(V in p)if(x=p[V],E=h[V],p.hasOwnProperty(V)&&(x!=null||E!=null))switch(V){case"value":et=x;break;case"defaultValue":nt=x;break;case"children":break;case"dangerouslySetInnerHTML":if(x!=null)throw Error(r(91));break;default:x!==E&&Oe(o,u,V,x,p,E)}Re(o,et,nt);return;case"option":for(var Ut in h)if(et=h[Ut],h.hasOwnProperty(Ut)&&et!=null&&!p.hasOwnProperty(Ut))switch(Ut){case"selected":o.selected=!1;break;default:Oe(o,u,Ut,null,p,et)}for($ in p)if(et=p[$],nt=h[$],p.hasOwnProperty($)&&et!==nt&&(et!=null||nt!=null))switch($){case"selected":o.selected=et&&typeof et!="function"&&typeof et!="symbol";break;default:Oe(o,u,$,et,p,nt)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Lt in h)et=h[Lt],h.hasOwnProperty(Lt)&&et!=null&&!p.hasOwnProperty(Lt)&&Oe(o,u,Lt,null,p,et);for(J in p)if(et=p[J],nt=h[J],p.hasOwnProperty(J)&&et!==nt&&(et!=null||nt!=null))switch(J){case"children":case"dangerouslySetInnerHTML":if(et!=null)throw Error(r(137,u));break;default:Oe(o,u,J,et,p,nt)}return;default:if(tf(u)){for(var Me in h)et=h[Me],h.hasOwnProperty(Me)&&et!==void 0&&!p.hasOwnProperty(Me)&&Qm(o,u,Me,void 0,p,et);for(ut in p)et=p[ut],nt=h[ut],!p.hasOwnProperty(ut)||et===nt||et===void 0&&nt===void 0||Qm(o,u,ut,et,p,nt);return}}for(var Y in h)et=h[Y],h.hasOwnProperty(Y)&&et!=null&&!p.hasOwnProperty(Y)&&Oe(o,u,Y,null,p,et);for(dt in p)et=p[dt],nt=h[dt],!p.hasOwnProperty(dt)||et===nt||et==null&&nt==null||Oe(o,u,dt,et,p,nt)}var Jm=null,tv=null;function M0(o){return o.nodeType===9?o:o.ownerDocument}function Jw(o){switch(o){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function tE(o,u){if(o===0)switch(u){case"svg":return 1;case"math":return 2;default:return 0}return o===1&&u==="foreignObject"?0:o}function ev(o,u){return o==="textarea"||o==="noscript"||typeof u.children=="string"||typeof u.children=="number"||typeof u.children=="bigint"||typeof u.dangerouslySetInnerHTML=="object"&&u.dangerouslySetInnerHTML!==null&&u.dangerouslySetInnerHTML.__html!=null}var nv=null;function S6(){var o=window.event;return o&&o.type==="popstate"?o===nv?!1:(nv=o,!0):(nv=null,!1)}var eE=typeof setTimeout=="function"?setTimeout:void 0,T6=typeof clearTimeout=="function"?clearTimeout:void 0,nE=typeof Promise=="function"?Promise:void 0,C6=typeof queueMicrotask=="function"?queueMicrotask:typeof nE<"u"?function(o){return nE.resolve(null).then(o).catch(I6)}:eE;function I6(o){setTimeout(function(){throw o})}function $s(o){return o==="head"}function rE(o,u){var h=u,p=0,x=0;do{var E=h.nextSibling;if(o.removeChild(h),E&&E.nodeType===8)if(h=E.data,h==="/$"){if(0<p&&8>p){h=p;var V=o.ownerDocument;if(h&1&&Uf(V.documentElement),h&2&&Uf(V.body),h&4)for(h=V.head,Uf(h),V=h.firstChild;V;){var j=V.nextSibling,$=V.nodeName;V[Fo]||$==="SCRIPT"||$==="STYLE"||$==="LINK"&&V.rel.toLowerCase()==="stylesheet"||h.removeChild(V),V=j}}if(x===0){o.removeChild(E),Xf(u);return}x--}else h==="$"||h==="$?"||h==="$!"?x++:p=h.charCodeAt(0)-48;else p=0;h=E}while(h);Xf(u)}function rv(o){var u=o.firstChild;for(u&&u.nodeType===10&&(u=u.nextSibling);u;){var h=u;switch(u=u.nextSibling,h.nodeName){case"HTML":case"HEAD":case"BODY":rv(h),Ts(h);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(h.rel.toLowerCase()==="stylesheet")continue}o.removeChild(h)}}function R6(o,u,h,p){for(;o.nodeType===1;){var x=h;if(o.nodeName.toLowerCase()!==u.toLowerCase()){if(!p&&(o.nodeName!=="INPUT"||o.type!=="hidden"))break}else if(p){if(!o[Fo])switch(u){case"meta":if(!o.hasAttribute("itemprop"))break;return o;case"link":if(E=o.getAttribute("rel"),E==="stylesheet"&&o.hasAttribute("data-precedence"))break;if(E!==x.rel||o.getAttribute("href")!==(x.href==null||x.href===""?null:x.href)||o.getAttribute("crossorigin")!==(x.crossOrigin==null?null:x.crossOrigin)||o.getAttribute("title")!==(x.title==null?null:x.title))break;return o;case"style":if(o.hasAttribute("data-precedence"))break;return o;case"script":if(E=o.getAttribute("src"),(E!==(x.src==null?null:x.src)||o.getAttribute("type")!==(x.type==null?null:x.type)||o.getAttribute("crossorigin")!==(x.crossOrigin==null?null:x.crossOrigin))&&E&&o.hasAttribute("async")&&!o.hasAttribute("itemprop"))break;return o;default:return o}}else if(u==="input"&&o.type==="hidden"){var E=x.name==null?null:""+x.name;if(x.type==="hidden"&&o.getAttribute("name")===E)return o}else return o;if(o=Di(o.nextSibling),o===null)break}return null}function D6(o,u,h){if(u==="")return null;for(;o.nodeType!==3;)if((o.nodeType!==1||o.nodeName!=="INPUT"||o.type!=="hidden")&&!h||(o=Di(o.nextSibling),o===null))return null;return o}function iv(o){return o.data==="$!"||o.data==="$?"&&o.ownerDocument.readyState==="complete"}function O6(o,u){var h=o.ownerDocument;if(o.data!=="$?"||h.readyState==="complete")u();else{var p=function(){u(),h.removeEventListener("DOMContentLoaded",p)};h.addEventListener("DOMContentLoaded",p),o._reactRetry=p}}function Di(o){for(;o!=null;o=o.nextSibling){var u=o.nodeType;if(u===1||u===3)break;if(u===8){if(u=o.data,u==="$"||u==="$!"||u==="$?"||u==="F!"||u==="F")break;if(u==="/$")return null}}return o}var av=null;function iE(o){o=o.previousSibling;for(var u=0;o;){if(o.nodeType===8){var h=o.data;if(h==="$"||h==="$!"||h==="$?"){if(u===0)return o;u--}else h==="/$"&&u++}o=o.previousSibling}return null}function aE(o,u,h){switch(u=M0(h),o){case"html":if(o=u.documentElement,!o)throw Error(r(452));return o;case"head":if(o=u.head,!o)throw Error(r(453));return o;case"body":if(o=u.body,!o)throw Error(r(454));return o;default:throw Error(r(451))}}function Uf(o){for(var u=o.attributes;u.length;)o.removeAttributeNode(u[0]);Ts(o)}var pi=new Map,sE=new Set;function N0(o){return typeof o.getRootNode=="function"?o.getRootNode():o.nodeType===9?o:o.ownerDocument}var Xa=Z.d;Z.d={f:M6,r:N6,D:P6,C:k6,L:L6,m:B6,X:F6,S:V6,M:U6};function M6(){var o=Xa.f(),u=b0();return o||u}function N6(o){var u=Gi(o);u!==null&&u.tag===5&&u.type==="form"?TA(u):Xa.r(o)}var Pu=typeof document>"u"?null:document;function oE(o,u,h){var p=Pu;if(p&&typeof u=="string"&&u){var x=cn(u);x='link[rel="'+o+'"][href="'+x+'"]',typeof h=="string"&&(x+='[crossorigin="'+h+'"]'),sE.has(x)||(sE.add(x),o={rel:o,crossOrigin:h,href:u},p.querySelector(x)===null&&(u=p.createElement("link"),Zn(u,"link",o),en(u),p.head.appendChild(u)))}}function P6(o){Xa.D(o),oE("dns-prefetch",o,null)}function k6(o,u){Xa.C(o,u),oE("preconnect",o,u)}function L6(o,u,h){Xa.L(o,u,h);var p=Pu;if(p&&o&&u){var x='link[rel="preload"][as="'+cn(u)+'"]';u==="image"&&h&&h.imageSrcSet?(x+='[imagesrcset="'+cn(h.imageSrcSet)+'"]',typeof h.imageSizes=="string"&&(x+='[imagesizes="'+cn(h.imageSizes)+'"]')):x+='[href="'+cn(o)+'"]';var E=x;switch(u){case"style":E=ku(o);break;case"script":E=Lu(o)}pi.has(E)||(o=d({rel:"preload",href:u==="image"&&h&&h.imageSrcSet?void 0:o,as:u},h),pi.set(E,o),p.querySelector(x)!==null||u==="style"&&p.querySelector(jf(E))||u==="script"&&p.querySelector(zf(E))||(u=p.createElement("link"),Zn(u,"link",o),en(u),p.head.appendChild(u)))}}function B6(o,u){Xa.m(o,u);var h=Pu;if(h&&o){var p=u&&typeof u.as=="string"?u.as:"script",x='link[rel="modulepreload"][as="'+cn(p)+'"][href="'+cn(o)+'"]',E=x;switch(p){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":E=Lu(o)}if(!pi.has(E)&&(o=d({rel:"modulepreload",href:o},u),pi.set(E,o),h.querySelector(x)===null)){switch(p){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(h.querySelector(zf(E)))return}p=h.createElement("link"),Zn(p,"link",o),en(p),h.head.appendChild(p)}}}function V6(o,u,h){Xa.S(o,u,h);var p=Pu;if(p&&o){var x=mr(p).hoistableStyles,E=ku(o);u=u||"default";var V=x.get(E);if(!V){var j={loading:0,preload:null};if(V=p.querySelector(jf(E)))j.loading=5;else{o=d({rel:"stylesheet",href:o,"data-precedence":u},h),(h=pi.get(E))&&sv(o,h);var $=V=p.createElement("link");en($),Zn($,"link",o),$._p=new Promise(function(J,ut){$.onload=J,$.onerror=ut}),$.addEventListener("load",function(){j.loading|=1}),$.addEventListener("error",function(){j.loading|=2}),j.loading|=4,P0(V,u,p)}V={type:"stylesheet",instance:V,count:1,state:j},x.set(E,V)}}}function F6(o,u){Xa.X(o,u);var h=Pu;if(h&&o){var p=mr(h).hoistableScripts,x=Lu(o),E=p.get(x);E||(E=h.querySelector(zf(x)),E||(o=d({src:o,async:!0},u),(u=pi.get(x))&&ov(o,u),E=h.createElement("script"),en(E),Zn(E,"link",o),h.head.appendChild(E)),E={type:"script",instance:E,count:1,state:null},p.set(x,E))}}function U6(o,u){Xa.M(o,u);var h=Pu;if(h&&o){var p=mr(h).hoistableScripts,x=Lu(o),E=p.get(x);E||(E=h.querySelector(zf(x)),E||(o=d({src:o,async:!0,type:"module"},u),(u=pi.get(x))&&ov(o,u),E=h.createElement("script"),en(E),Zn(E,"link",o),h.head.appendChild(E)),E={type:"script",instance:E,count:1,state:null},p.set(x,E))}}function lE(o,u,h,p){var x=(x=ge.current)?N0(x):null;if(!x)throw Error(r(446));switch(o){case"meta":case"title":return null;case"style":return typeof h.precedence=="string"&&typeof h.href=="string"?(u=ku(h.href),h=mr(x).hoistableStyles,p=h.get(u),p||(p={type:"style",instance:null,count:0,state:null},h.set(u,p)),p):{type:"void",instance:null,count:0,state:null};case"link":if(h.rel==="stylesheet"&&typeof h.href=="string"&&typeof h.precedence=="string"){o=ku(h.href);var E=mr(x).hoistableStyles,V=E.get(o);if(V||(x=x.ownerDocument||x,V={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},E.set(o,V),(E=x.querySelector(jf(o)))&&!E._p&&(V.instance=E,V.state.loading=5),pi.has(o)||(h={rel:"preload",as:"style",href:h.href,crossOrigin:h.crossOrigin,integrity:h.integrity,media:h.media,hrefLang:h.hrefLang,referrerPolicy:h.referrerPolicy},pi.set(o,h),E||j6(x,o,h,V.state))),u&&p===null)throw Error(r(528,""));return V}if(u&&p!==null)throw Error(r(529,""));return null;case"script":return u=h.async,h=h.src,typeof h=="string"&&u&&typeof u!="function"&&typeof u!="symbol"?(u=Lu(h),h=mr(x).hoistableScripts,p=h.get(u),p||(p={type:"script",instance:null,count:0,state:null},h.set(u,p)),p):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,o))}}function ku(o){return'href="'+cn(o)+'"'}function jf(o){return'link[rel="stylesheet"]['+o+"]"}function uE(o){return d({},o,{"data-precedence":o.precedence,precedence:null})}function j6(o,u,h,p){o.querySelector('link[rel="preload"][as="style"]['+u+"]")?p.loading=1:(u=o.createElement("link"),p.preload=u,u.addEventListener("load",function(){return p.loading|=1}),u.addEventListener("error",function(){return p.loading|=2}),Zn(u,"link",h),en(u),o.head.appendChild(u))}function Lu(o){return'[src="'+cn(o)+'"]'}function zf(o){return"script[async]"+o}function cE(o,u,h){if(u.count++,u.instance===null)switch(u.type){case"style":var p=o.querySelector('style[data-href~="'+cn(h.href)+'"]');if(p)return u.instance=p,en(p),p;var x=d({},h,{"data-href":h.href,"data-precedence":h.precedence,href:null,precedence:null});return p=(o.ownerDocument||o).createElement("style"),en(p),Zn(p,"style",x),P0(p,h.precedence,o),u.instance=p;case"stylesheet":x=ku(h.href);var E=o.querySelector(jf(x));if(E)return u.state.loading|=4,u.instance=E,en(E),E;p=uE(h),(x=pi.get(x))&&sv(p,x),E=(o.ownerDocument||o).createElement("link"),en(E);var V=E;return V._p=new Promise(function(j,$){V.onload=j,V.onerror=$}),Zn(E,"link",p),u.state.loading|=4,P0(E,h.precedence,o),u.instance=E;case"script":return E=Lu(h.src),(x=o.querySelector(zf(E)))?(u.instance=x,en(x),x):(p=h,(x=pi.get(E))&&(p=d({},h),ov(p,x)),o=o.ownerDocument||o,x=o.createElement("script"),en(x),Zn(x,"link",p),o.head.appendChild(x),u.instance=x);case"void":return null;default:throw Error(r(443,u.type))}else u.type==="stylesheet"&&(u.state.loading&4)===0&&(p=u.instance,u.state.loading|=4,P0(p,h.precedence,o));return u.instance}function P0(o,u,h){for(var p=h.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),x=p.length?p[p.length-1]:null,E=x,V=0;V<p.length;V++){var j=p[V];if(j.dataset.precedence===u)E=j;else if(E!==x)break}E?E.parentNode.insertBefore(o,E.nextSibling):(u=h.nodeType===9?h.head:h,u.insertBefore(o,u.firstChild))}function sv(o,u){o.crossOrigin==null&&(o.crossOrigin=u.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=u.referrerPolicy),o.title==null&&(o.title=u.title)}function ov(o,u){o.crossOrigin==null&&(o.crossOrigin=u.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=u.referrerPolicy),o.integrity==null&&(o.integrity=u.integrity)}var k0=null;function fE(o,u,h){if(k0===null){var p=new Map,x=k0=new Map;x.set(h,p)}else x=k0,p=x.get(h),p||(p=new Map,x.set(h,p));if(p.has(o))return p;for(p.set(o,null),h=h.getElementsByTagName(o),x=0;x<h.length;x++){var E=h[x];if(!(E[Fo]||E[xn]||o==="link"&&E.getAttribute("rel")==="stylesheet")&&E.namespaceURI!=="http://www.w3.org/2000/svg"){var V=E.getAttribute(u)||"";V=o+V;var j=p.get(V);j?j.push(E):p.set(V,[E])}}return p}function hE(o,u,h){o=o.ownerDocument||o,o.head.insertBefore(h,u==="title"?o.querySelector("head > title"):null)}function z6(o,u,h){if(h===1||u.itemProp!=null)return!1;switch(o){case"meta":case"title":return!0;case"style":if(typeof u.precedence!="string"||typeof u.href!="string"||u.href==="")break;return!0;case"link":if(typeof u.rel!="string"||typeof u.href!="string"||u.href===""||u.onLoad||u.onError)break;switch(u.rel){case"stylesheet":return o=u.disabled,typeof u.precedence=="string"&&o==null;default:return!0}case"script":if(u.async&&typeof u.async!="function"&&typeof u.async!="symbol"&&!u.onLoad&&!u.onError&&u.src&&typeof u.src=="string")return!0}return!1}function dE(o){return!(o.type==="stylesheet"&&(o.state.loading&3)===0)}var Hf=null;function H6(){}function G6(o,u,h){if(Hf===null)throw Error(r(475));var p=Hf;if(u.type==="stylesheet"&&(typeof h.media!="string"||matchMedia(h.media).matches!==!1)&&(u.state.loading&4)===0){if(u.instance===null){var x=ku(h.href),E=o.querySelector(jf(x));if(E){o=E._p,o!==null&&typeof o=="object"&&typeof o.then=="function"&&(p.count++,p=L0.bind(p),o.then(p,p)),u.state.loading|=4,u.instance=E,en(E);return}E=o.ownerDocument||o,h=uE(h),(x=pi.get(x))&&sv(h,x),E=E.createElement("link"),en(E);var V=E;V._p=new Promise(function(j,$){V.onload=j,V.onerror=$}),Zn(E,"link",h),u.instance=E}p.stylesheets===null&&(p.stylesheets=new Map),p.stylesheets.set(u,o),(o=u.state.preload)&&(u.state.loading&3)===0&&(p.count++,u=L0.bind(p),o.addEventListener("load",u),o.addEventListener("error",u))}}function $6(){if(Hf===null)throw Error(r(475));var o=Hf;return o.stylesheets&&o.count===0&&lv(o,o.stylesheets),0<o.count?function(u){var h=setTimeout(function(){if(o.stylesheets&&lv(o,o.stylesheets),o.unsuspend){var p=o.unsuspend;o.unsuspend=null,p()}},6e4);return o.unsuspend=u,function(){o.unsuspend=null,clearTimeout(h)}}:null}function L0(){if(this.count--,this.count===0){if(this.stylesheets)lv(this,this.stylesheets);else if(this.unsuspend){var o=this.unsuspend;this.unsuspend=null,o()}}}var B0=null;function lv(o,u){o.stylesheets=null,o.unsuspend!==null&&(o.count++,B0=new Map,u.forEach(q6,o),B0=null,L0.call(o))}function q6(o,u){if(!(u.state.loading&4)){var h=B0.get(o);if(h)var p=h.get(null);else{h=new Map,B0.set(o,h);for(var x=o.querySelectorAll("link[data-precedence],style[data-precedence]"),E=0;E<x.length;E++){var V=x[E];(V.nodeName==="LINK"||V.getAttribute("media")!=="not all")&&(h.set(V.dataset.precedence,V),p=V)}p&&h.set(null,p)}x=u.instance,V=x.getAttribute("data-precedence"),E=h.get(V)||p,E===p&&h.set(null,x),h.set(V,x),this.count++,p=L0.bind(this),x.addEventListener("load",p),x.addEventListener("error",p),E?E.parentNode.insertBefore(x,E.nextSibling):(o=o.nodeType===9?o.head:o,o.insertBefore(x,o.firstChild)),u.state.loading|=4}}var Gf={$$typeof:I,Provider:null,Consumer:null,_currentValue:it,_currentValue2:it,_threadCount:0};function W6(o,u,h,p,x,E,V,j){this.tag=1,this.containerInfo=o,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ba(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ba(0),this.hiddenUpdates=ba(null),this.identifierPrefix=p,this.onUncaughtError=x,this.onCaughtError=E,this.onRecoverableError=V,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=j,this.incompleteTransitions=new Map}function gE(o,u,h,p,x,E,V,j,$,J,ut,dt){return o=new W6(o,u,h,V,j,$,J,dt),u=1,E===!0&&(u|=24),E=jr(3,null,null,u),o.current=E,E.stateNode=o,u=Hp(),u.refCount++,o.pooledCache=u,u.refCount++,E.memoizedState={element:p,isDehydrated:h,cache:u},Wp(E),o}function pE(o){return o?(o=du,o):du}function mE(o,u,h,p,x,E){x=pE(x),p.context===null?p.context=x:p.pendingContext=x,p=Ms(u),p.payload={element:h},E=E===void 0?null:E,E!==null&&(p.callback=E),h=Ns(o,p,u),h!==null&&(qr(h,o,u),_f(h,o,u))}function vE(o,u){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var h=o.retryLane;o.retryLane=h!==0&&h<u?h:u}}function uv(o,u){vE(o,u),(o=o.alternate)&&vE(o,u)}function yE(o){if(o.tag===13){var u=hu(o,67108864);u!==null&&qr(u,o,67108864),uv(o,67108864)}}var V0=!0;function X6(o,u,h,p){var x=q.T;q.T=null;var E=Z.p;try{Z.p=2,cv(o,u,h,p)}finally{Z.p=E,q.T=x}}function Y6(o,u,h,p){var x=q.T;q.T=null;var E=Z.p;try{Z.p=8,cv(o,u,h,p)}finally{Z.p=E,q.T=x}}function cv(o,u,h,p){if(V0){var x=fv(p);if(x===null)Zm(o,u,p,F0,h),_E(o,p);else if(Z6(x,o,u,h,p))p.stopPropagation();else if(_E(o,p),u&4&&-1<K6.indexOf(o)){for(;x!==null;){var E=Gi(x);if(E!==null)switch(E.tag){case 3:if(E=E.stateNode,E.current.memoizedState.isDehydrated){var V=Si(E.pendingLanes);if(V!==0){var j=E;for(j.pendingLanes|=2,j.entangledLanes|=2;V;){var $=1<<31-ir(V);j.entanglements[1]|=$,V&=~$}ia(E),(be&6)===0&&(w0=Ge()+500,Bf(0))}}break;case 13:j=hu(E,2),j!==null&&qr(j,E,2),b0(),uv(E,2)}if(E=fv(p),E===null&&Zm(o,u,p,F0,h),E===x)break;x=E}x!==null&&p.stopPropagation()}else Zm(o,u,p,null,h)}}function fv(o){return o=si(o),hv(o)}var F0=null;function hv(o){if(F0=null,o=Ta(o),o!==null){var u=a(o);if(u===null)o=null;else{var h=u.tag;if(h===13){if(o=s(u),o!==null)return o;o=null}else if(h===3){if(u.stateNode.current.memoizedState.isDehydrated)return u.tag===3?u.stateNode.containerInfo:null;o=null}else u!==o&&(o=null)}}return F0=o,null}function xE(o){switch(o){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ri()){case As:return 2;case wa:return 8;case Ea:case zc:return 32;case ws:return 268435456;default:return 32}default:return 32}}var dv=!1,qs=null,Ws=null,Xs=null,$f=new Map,qf=new Map,Ys=[],K6="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function _E(o,u){switch(o){case"focusin":case"focusout":qs=null;break;case"dragenter":case"dragleave":Ws=null;break;case"mouseover":case"mouseout":Xs=null;break;case"pointerover":case"pointerout":$f.delete(u.pointerId);break;case"gotpointercapture":case"lostpointercapture":qf.delete(u.pointerId)}}function Wf(o,u,h,p,x,E){return o===null||o.nativeEvent!==E?(o={blockedOn:u,domEventName:h,eventSystemFlags:p,nativeEvent:E,targetContainers:[x]},u!==null&&(u=Gi(u),u!==null&&yE(u)),o):(o.eventSystemFlags|=p,u=o.targetContainers,x!==null&&u.indexOf(x)===-1&&u.push(x),o)}function Z6(o,u,h,p,x){switch(u){case"focusin":return qs=Wf(qs,o,u,h,p,x),!0;case"dragenter":return Ws=Wf(Ws,o,u,h,p,x),!0;case"mouseover":return Xs=Wf(Xs,o,u,h,p,x),!0;case"pointerover":var E=x.pointerId;return $f.set(E,Wf($f.get(E)||null,o,u,h,p,x)),!0;case"gotpointercapture":return E=x.pointerId,qf.set(E,Wf(qf.get(E)||null,o,u,h,p,x)),!0}return!1}function AE(o){var u=Ta(o.target);if(u!==null){var h=a(u);if(h!==null){if(u=h.tag,u===13){if(u=s(h),u!==null){o.blockedOn=u,bd(o.priority,function(){if(h.tag===13){var p=$r();p=Es(p);var x=hu(h,p);x!==null&&qr(x,h,p),uv(h,p)}});return}}else if(u===3&&h.stateNode.current.memoizedState.isDehydrated){o.blockedOn=h.tag===3?h.stateNode.containerInfo:null;return}}}o.blockedOn=null}function U0(o){if(o.blockedOn!==null)return!1;for(var u=o.targetContainers;0<u.length;){var h=fv(o.nativeEvent);if(h===null){h=o.nativeEvent;var p=new h.constructor(h.type,h);Da=p,h.target.dispatchEvent(p),Da=null}else return u=Gi(h),u!==null&&yE(u),o.blockedOn=h,!1;u.shift()}return!0}function wE(o,u,h){U0(o)&&h.delete(u)}function Q6(){dv=!1,qs!==null&&U0(qs)&&(qs=null),Ws!==null&&U0(Ws)&&(Ws=null),Xs!==null&&U0(Xs)&&(Xs=null),$f.forEach(wE),qf.forEach(wE)}function j0(o,u){o.blockedOn===u&&(o.blockedOn=null,dv||(dv=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,Q6)))}var z0=null;function EE(o){z0!==o&&(z0=o,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){z0===o&&(z0=null);for(var u=0;u<o.length;u+=3){var h=o[u],p=o[u+1],x=o[u+2];if(typeof p!="function"){if(hv(p||h)===null)continue;break}var E=Gi(h);E!==null&&(o.splice(u,3),u-=3,hm(E,{pending:!0,data:x,method:h.method,action:p},p,x))}}))}function Xf(o){function u($){return j0($,o)}qs!==null&&j0(qs,o),Ws!==null&&j0(Ws,o),Xs!==null&&j0(Xs,o),$f.forEach(u),qf.forEach(u);for(var h=0;h<Ys.length;h++){var p=Ys[h];p.blockedOn===o&&(p.blockedOn=null)}for(;0<Ys.length&&(h=Ys[0],h.blockedOn===null);)AE(h),h.blockedOn===null&&Ys.shift();if(h=(o.ownerDocument||o).$$reactFormReplay,h!=null)for(p=0;p<h.length;p+=3){var x=h[p],E=h[p+1],V=x[un]||null;if(typeof E=="function")V||EE(h);else if(V){var j=null;if(E&&E.hasAttribute("formAction")){if(x=E,V=E[un]||null)j=V.formAction;else if(hv(x)!==null)continue}else j=V.action;typeof j=="function"?h[p+1]=j:(h.splice(p,3),p-=3),EE(h)}}}function gv(o){this._internalRoot=o}H0.prototype.render=gv.prototype.render=function(o){var u=this._internalRoot;if(u===null)throw Error(r(409));var h=u.current,p=$r();mE(h,p,o,u,null,null)},H0.prototype.unmount=gv.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var u=o.containerInfo;mE(o.current,2,null,o,null,null),b0(),u[ii]=null}};function H0(o){this._internalRoot=o}H0.prototype.unstable_scheduleHydration=function(o){if(o){var u=bs();o={blockedOn:null,target:o,priority:u};for(var h=0;h<Ys.length&&u!==0&&u<Ys[h].priority;h++);Ys.splice(h,0,o),h===0&&AE(o)}};var bE=t.version;if(bE!=="19.1.0")throw Error(r(527,bE,"19.1.0"));Z.findDOMNode=function(o){var u=o._reactInternals;if(u===void 0)throw typeof o.render=="function"?Error(r(188)):(o=Object.keys(o).join(","),Error(r(268,o)));return o=c(u),o=o!==null?f(o):null,o=o===null?null:o.stateNode,o};var J6={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:q,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var G0=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!G0.isDisabled&&G0.supportsFiber)try{$e=G0.inject(J6),ue=G0}catch{}}return Zf.createRoot=function(o,u){if(!i(o))throw Error(r(299));var h=!1,p="",x=UA,E=jA,V=zA,j=null;return u!=null&&(u.unstable_strictMode===!0&&(h=!0),u.identifierPrefix!==void 0&&(p=u.identifierPrefix),u.onUncaughtError!==void 0&&(x=u.onUncaughtError),u.onCaughtError!==void 0&&(E=u.onCaughtError),u.onRecoverableError!==void 0&&(V=u.onRecoverableError),u.unstable_transitionCallbacks!==void 0&&(j=u.unstable_transitionCallbacks)),u=gE(o,1,!1,null,null,h,p,x,E,V,j,null),o[ii]=u.current,Km(o),new gv(u)},Zf.hydrateRoot=function(o,u,h){if(!i(o))throw Error(r(299));var p=!1,x="",E=UA,V=jA,j=zA,$=null,J=null;return h!=null&&(h.unstable_strictMode===!0&&(p=!0),h.identifierPrefix!==void 0&&(x=h.identifierPrefix),h.onUncaughtError!==void 0&&(E=h.onUncaughtError),h.onCaughtError!==void 0&&(V=h.onCaughtError),h.onRecoverableError!==void 0&&(j=h.onRecoverableError),h.unstable_transitionCallbacks!==void 0&&($=h.unstable_transitionCallbacks),h.formState!==void 0&&(J=h.formState)),u=gE(o,1,!0,u,h??null,p,x,E,V,j,$,J),u.context=pE(null),h=u.current,p=$r(),p=Es(p),x=Ms(p),x.callback=null,Ns(h,x,p),h=p,u.current.lanes=h,Sa(u,h),ia(u),o[ii]=u.current,Km(o),new H0(u)},Zf.version="19.1.0",Zf}var ME;function DD(){if(ME)return pv.exports;ME=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(t){console.error(t)}}return n(),pv.exports=RD(),pv.exports}var OD=DD();const MD=()=>{};var NE={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TC=function(n){const t=[];let e=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?t[e++]=i:i<2048?(t[e++]=i>>6|192,t[e++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),t[e++]=i>>18|240,t[e++]=i>>12&63|128,t[e++]=i>>6&63|128,t[e++]=i&63|128):(t[e++]=i>>12|224,t[e++]=i>>6&63|128,t[e++]=i&63|128)}return t},ND=function(n){const t=[];let e=0,r=0;for(;e<n.length;){const i=n[e++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const a=n[e++];t[r++]=String.fromCharCode((i&31)<<6|a&63)}else if(i>239&&i<365){const a=n[e++],s=n[e++],l=n[e++],c=((i&7)<<18|(a&63)<<12|(s&63)<<6|l&63)-65536;t[r++]=String.fromCharCode(55296+(c>>10)),t[r++]=String.fromCharCode(56320+(c&1023))}else{const a=n[e++],s=n[e++];t[r++]=String.fromCharCode((i&15)<<12|(a&63)<<6|s&63)}}return t.join("")},CC={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,t){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const e=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){const a=n[i],s=i+1<n.length,l=s?n[i+1]:0,c=i+2<n.length,f=c?n[i+2]:0,d=a>>2,g=(a&3)<<4|l>>4;let m=(l&15)<<2|f>>6,v=f&63;c||(v=64,s||(m=64)),r.push(e[d],e[g],e[m],e[v])}return r.join("")},encodeString(n,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(n):this.encodeByteArray(TC(n),t)},decodeString(n,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(n):ND(this.decodeStringToByteArray(n,t))},decodeStringToByteArray(n,t){this.init_();const e=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){const a=e[n.charAt(i++)],l=i<n.length?e[n.charAt(i)]:0;++i;const f=i<n.length?e[n.charAt(i)]:64;++i;const g=i<n.length?e[n.charAt(i)]:64;if(++i,a==null||l==null||f==null||g==null)throw new PD;const m=a<<2|l>>4;if(r.push(m),f!==64){const v=l<<4&240|f>>2;if(r.push(v),g!==64){const _=f<<6&192|g;r.push(_)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class PD extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const kD=function(n){const t=TC(n);return CC.encodeByteArray(t,!0)},N1=function(n){return kD(n).replace(/\./g,"")},IC=function(n){try{return CC.decodeString(n,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LD(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BD=()=>LD().__FIREBASE_DEFAULTS__,VD=()=>{if(typeof process>"u"||typeof NE>"u")return;const n=NE.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},FD=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=n&&IC(n[1]);return t&&JSON.parse(t)},bg=()=>{try{return MD()||BD()||VD()||FD()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},RC=n=>{var t,e;return(e=(t=bg())===null||t===void 0?void 0:t.emulatorHosts)===null||e===void 0?void 0:e[n]},UD=n=>{const t=RC(n);if(!t)return;const e=t.lastIndexOf(":");if(e<=0||e+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(e+1),10);return t[0]==="["?[t.substring(1,e-1),r]:[t.substring(0,e),r]},DC=()=>{var n;return(n=bg())===null||n===void 0?void 0:n.config},OC=n=>{var t;return(t=bg())===null||t===void 0?void 0:t[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jD{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}wrapCallback(t){return(e,r)=>{e?this.reject(e):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(e):t(e,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rc(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function MC(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zD(n,t){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const e={alg:"none",type:"JWT"},r=t||"demo-project",i=n.iat||0,a=n.sub||n.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},n);return[N1(JSON.stringify(e)),N1(JSON.stringify(s)),""].join(".")}const Ah={};function HD(){const n={prod:[],emulator:[]};for(const t of Object.keys(Ah))Ah[t]?n.emulator.push(t):n.prod.push(t);return n}function GD(n){let t=document.getElementById(n),e=!1;return t||(t=document.createElement("div"),t.setAttribute("id",n),e=!0),{created:e,element:t}}let PE=!1;function NC(n,t){if(typeof window>"u"||typeof document>"u"||!Rc(window.location.host)||Ah[n]===t||Ah[n]||PE)return;Ah[n]=t;function e(m){return`__firebase__banner__${m}`}const r="__firebase__banner",a=HD().prod.length>0;function s(){const m=document.getElementById(r);m&&m.remove()}function l(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function c(m,v){m.setAttribute("width","24"),m.setAttribute("id",v),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function f(){const m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{PE=!0,s()},m}function d(m,v){m.setAttribute("id",v),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function g(){const m=GD(r),v=e("text"),_=document.getElementById(v)||document.createElement("span"),w=e("learnmore"),b=document.getElementById(w)||document.createElement("a"),S=e("preprendIcon"),C=document.getElementById(S)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){const I=m.element;l(I),d(b,w);const M=f();c(C,S),I.append(C,_,b,M),document.body.appendChild(I)}a?(_.innerText="Preview backend disconnected.",C.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(C.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,_.innerText="Preview backend running in this workspace."),_.setAttribute("id",v)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",g):g()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gr(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function $D(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(gr())}function qD(){var n;const t=(n=bg())===null||n===void 0?void 0:n.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function WD(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function XD(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function YD(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function KD(){const n=gr();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function ZD(){return!qD()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function QD(){try{return typeof indexedDB=="object"}catch{return!1}}function JD(){return new Promise((n,t)=>{try{let e=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),e||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{e=!1},i.onerror=()=>{var a;t(((a=i.error)===null||a===void 0?void 0:a.message)||"")}}catch(e){t(e)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tO="FirebaseError";class ps extends Error{constructor(t,e,r){super(e),this.code=t,this.customData=r,this.name=tO,Object.setPrototypeOf(this,ps.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Xh.prototype.create)}}class Xh{constructor(t,e,r){this.service=t,this.serviceName=e,this.errors=r}create(t,...e){const r=e[0]||{},i=`${this.service}/${t}`,a=this.errors[t],s=a?eO(a,r):"Error",l=`${this.serviceName}: ${s} (${i}).`;return new ps(i,l,r)}}function eO(n,t){return n.replace(nO,(e,r)=>{const i=t[r];return i!=null?String(i):`<${r}?>`})}const nO=/\{\$([^}]+)}/g;function rO(n){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t))return!1;return!0}function Dl(n,t){if(n===t)return!0;const e=Object.keys(n),r=Object.keys(t);for(const i of e){if(!r.includes(i))return!1;const a=n[i],s=t[i];if(kE(a)&&kE(s)){if(!Dl(a,s))return!1}else if(a!==s)return!1}for(const i of r)if(!e.includes(i))return!1;return!0}function kE(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yh(n){const t=[];for(const[e,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{t.push(encodeURIComponent(e)+"="+encodeURIComponent(i))}):t.push(encodeURIComponent(e)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function lh(n){const t={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,a]=r.split("=");t[decodeURIComponent(i)]=decodeURIComponent(a)}}),t}function uh(n){const t=n.indexOf("?");if(!t)return"";const e=n.indexOf("#",t);return n.substring(t,e>0?e:void 0)}function iO(n,t){const e=new aO(n,t);return e.subscribe.bind(e)}class aO{constructor(t,e){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(()=>{t(this)}).catch(r=>{this.error(r)})}next(t){this.forEachObserver(e=>{e.next(t)})}error(t){this.forEachObserver(e=>{e.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,e,r){let i;if(t===void 0&&e===void 0&&r===void 0)throw new Error("Missing Observer.");sO(t,["next","error","complete"])?i=t:i={next:t,error:e,complete:r},i.next===void 0&&(i.next=yv),i.error===void 0&&(i.error=yv),i.complete===void 0&&(i.complete=yv);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),a}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let e=0;e<this.observers.length;e++)this.sendOne(e,t)}sendOne(t,e){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{e(this.observers[t])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function sO(n,t){if(typeof n!="object"||n===null)return!1;for(const e of t)if(e in n&&typeof n[e]=="function")return!0;return!1}function yv(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nn(n){return n&&n._delegate?n._delegate:n}class Ol{constructor(t,e,r){this.name=t,this.instanceFactory=e,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vl="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oO{constructor(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){const r=new jD;if(this.instancesDeferred.set(e,r),this.isInitialized(e)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:e});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(e).promise}getImmediate(t){var e;const r=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),i=(e=t==null?void 0:t.optional)!==null&&e!==void 0?e:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(a){if(i)return null;throw a}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(uO(t))try{this.getOrInitializeService({instanceIdentifier:vl})}catch{}for(const[e,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(e);try{const a=this.getOrInitializeService({instanceIdentifier:i});r.resolve(a)}catch{}}}}clearInstance(t=vl){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...t.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=vl){return this.instances.has(t)}getOptions(t=vl){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:e={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:e});for(const[a,s]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(a);r===l&&s.resolve(i)}return i}onInit(t,e){var r;const i=this.normalizeInstanceIdentifier(e),a=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;a.add(t),this.onInitCallbacks.set(i,a);const s=this.instances.get(i);return s&&t(s,i),()=>{a.delete(t)}}invokeOnInitCallbacks(t,e){const r=this.onInitCallbacks.get(e);if(r)for(const i of r)try{i(t,e)}catch{}}getOrInitializeService({instanceIdentifier:t,options:e={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:lO(t),options:e}),this.instances.set(t,r),this.instancesOptions.set(t,e),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=vl){return this.component?this.component.multipleInstances?t:vl:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function lO(n){return n===vl?void 0:n}function uO(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cO{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const e=this.getProvider(t.name);if(e.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);e.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const e=new oO(t,this);return this.providers.set(t,e),e}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var te;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(te||(te={}));const fO={debug:te.DEBUG,verbose:te.VERBOSE,info:te.INFO,warn:te.WARN,error:te.ERROR,silent:te.SILENT},hO=te.INFO,dO={[te.DEBUG]:"log",[te.VERBOSE]:"log",[te.INFO]:"info",[te.WARN]:"warn",[te.ERROR]:"error"},gO=(n,t,...e)=>{if(t<n.logLevel)return;const r=new Date().toISOString(),i=dO[t];if(i)console[i](`[${r}]  ${n.name}:`,...e);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class Ax{constructor(t){this.name=t,this._logLevel=hO,this._logHandler=gO,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in te))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?fO[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,te.DEBUG,...t),this._logHandler(this,te.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,te.VERBOSE,...t),this._logHandler(this,te.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,te.INFO,...t),this._logHandler(this,te.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,te.WARN,...t),this._logHandler(this,te.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,te.ERROR,...t),this._logHandler(this,te.ERROR,...t)}}const pO=(n,t)=>t.some(e=>n instanceof e);let LE,BE;function mO(){return LE||(LE=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function vO(){return BE||(BE=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const PC=new WeakMap,gy=new WeakMap,kC=new WeakMap,xv=new WeakMap,wx=new WeakMap;function yO(n){const t=new Promise((e,r)=>{const i=()=>{n.removeEventListener("success",a),n.removeEventListener("error",s)},a=()=>{e(ho(n.result)),i()},s=()=>{r(n.error),i()};n.addEventListener("success",a),n.addEventListener("error",s)});return t.then(e=>{e instanceof IDBCursor&&PC.set(e,n)}).catch(()=>{}),wx.set(t,n),t}function xO(n){if(gy.has(n))return;const t=new Promise((e,r)=>{const i=()=>{n.removeEventListener("complete",a),n.removeEventListener("error",s),n.removeEventListener("abort",s)},a=()=>{e(),i()},s=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",a),n.addEventListener("error",s),n.addEventListener("abort",s)});gy.set(n,t)}let py={get(n,t,e){if(n instanceof IDBTransaction){if(t==="done")return gy.get(n);if(t==="objectStoreNames")return n.objectStoreNames||kC.get(n);if(t==="store")return e.objectStoreNames[1]?void 0:e.objectStore(e.objectStoreNames[0])}return ho(n[t])},set(n,t,e){return n[t]=e,!0},has(n,t){return n instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in n}};function _O(n){py=n(py)}function AO(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...e){const r=n.call(_v(this),t,...e);return kC.set(r,t.sort?t.sort():[t]),ho(r)}:vO().includes(n)?function(...t){return n.apply(_v(this),t),ho(PC.get(this))}:function(...t){return ho(n.apply(_v(this),t))}}function wO(n){return typeof n=="function"?AO(n):(n instanceof IDBTransaction&&xO(n),pO(n,mO())?new Proxy(n,py):n)}function ho(n){if(n instanceof IDBRequest)return yO(n);if(xv.has(n))return xv.get(n);const t=wO(n);return t!==n&&(xv.set(n,t),wx.set(t,n)),t}const _v=n=>wx.get(n);function EO(n,t,{blocked:e,upgrade:r,blocking:i,terminated:a}={}){const s=indexedDB.open(n,t),l=ho(s);return r&&s.addEventListener("upgradeneeded",c=>{r(ho(s.result),c.oldVersion,c.newVersion,ho(s.transaction),c)}),e&&s.addEventListener("blocked",c=>e(c.oldVersion,c.newVersion,c)),l.then(c=>{a&&c.addEventListener("close",()=>a()),i&&c.addEventListener("versionchange",f=>i(f.oldVersion,f.newVersion,f))}).catch(()=>{}),l}const bO=["get","getKey","getAll","getAllKeys","count"],SO=["put","add","delete","clear"],Av=new Map;function VE(n,t){if(!(n instanceof IDBDatabase&&!(t in n)&&typeof t=="string"))return;if(Av.get(t))return Av.get(t);const e=t.replace(/FromIndex$/,""),r=t!==e,i=SO.includes(e);if(!(e in(r?IDBIndex:IDBObjectStore).prototype)||!(i||bO.includes(e)))return;const a=async function(s,...l){const c=this.transaction(s,i?"readwrite":"readonly");let f=c.store;return r&&(f=f.index(l.shift())),(await Promise.all([f[e](...l),i&&c.done]))[0]};return Av.set(t,a),a}_O(n=>({...n,get:(t,e,r)=>VE(t,e)||n.get(t,e,r),has:(t,e)=>!!VE(t,e)||n.has(t,e)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TO{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(CO(e)){const r=e.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(e=>e).join(" ")}}function CO(n){const t=n.getComponent();return(t==null?void 0:t.type)==="VERSION"}const my="@firebase/app",FE="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const as=new Ax("@firebase/app"),IO="@firebase/app-compat",RO="@firebase/analytics-compat",DO="@firebase/analytics",OO="@firebase/app-check-compat",MO="@firebase/app-check",NO="@firebase/auth",PO="@firebase/auth-compat",kO="@firebase/database",LO="@firebase/data-connect",BO="@firebase/database-compat",VO="@firebase/functions",FO="@firebase/functions-compat",UO="@firebase/installations",jO="@firebase/installations-compat",zO="@firebase/messaging",HO="@firebase/messaging-compat",GO="@firebase/performance",$O="@firebase/performance-compat",qO="@firebase/remote-config",WO="@firebase/remote-config-compat",XO="@firebase/storage",YO="@firebase/storage-compat",KO="@firebase/firestore",ZO="@firebase/ai",QO="@firebase/firestore-compat",JO="firebase",tM="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vy="[DEFAULT]",eM={[my]:"fire-core",[IO]:"fire-core-compat",[DO]:"fire-analytics",[RO]:"fire-analytics-compat",[MO]:"fire-app-check",[OO]:"fire-app-check-compat",[NO]:"fire-auth",[PO]:"fire-auth-compat",[kO]:"fire-rtdb",[LO]:"fire-data-connect",[BO]:"fire-rtdb-compat",[VO]:"fire-fn",[FO]:"fire-fn-compat",[UO]:"fire-iid",[jO]:"fire-iid-compat",[zO]:"fire-fcm",[HO]:"fire-fcm-compat",[GO]:"fire-perf",[$O]:"fire-perf-compat",[qO]:"fire-rc",[WO]:"fire-rc-compat",[XO]:"fire-gcs",[YO]:"fire-gcs-compat",[KO]:"fire-fst",[QO]:"fire-fst-compat",[ZO]:"fire-vertex","fire-js":"fire-js",[JO]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P1=new Map,nM=new Map,yy=new Map;function UE(n,t){try{n.container.addComponent(t)}catch(e){as.debug(`Component ${t.name} failed to register with FirebaseApp ${n.name}`,e)}}function dc(n){const t=n.name;if(yy.has(t))return as.debug(`There were multiple attempts to register component ${t}.`),!1;yy.set(t,n);for(const e of P1.values())UE(e,n);for(const e of nM.values())UE(e,n);return!0}function Ex(n,t){const e=n.container.getProvider("heartbeat").getImmediate({optional:!0});return e&&e.triggerHeartbeat(),n.container.getProvider(t)}function vi(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rM={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},go=new Xh("app","Firebase",rM);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iM{constructor(t,e,r){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},e),this._name=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ol("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw go.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dc=tM;function LC(n,t={}){let e=n;typeof t!="object"&&(t={name:t});const r=Object.assign({name:vy,automaticDataCollectionEnabled:!0},t),i=r.name;if(typeof i!="string"||!i)throw go.create("bad-app-name",{appName:String(i)});if(e||(e=DC()),!e)throw go.create("no-options");const a=P1.get(i);if(a){if(Dl(e,a.options)&&Dl(r,a.config))return a;throw go.create("duplicate-app",{appName:i})}const s=new cO(i);for(const c of yy.values())s.addComponent(c);const l=new iM(e,r,s);return P1.set(i,l),l}function BC(n=vy){const t=P1.get(n);if(!t&&n===vy&&DC())return LC();if(!t)throw go.create("no-app",{appName:n});return t}function po(n,t,e){var r;let i=(r=eM[n])!==null&&r!==void 0?r:n;e&&(i+=`-${e}`);const a=i.match(/\s|\//),s=t.match(/\s|\//);if(a||s){const l=[`Unable to register library "${i}" with version "${t}":`];a&&l.push(`library name "${i}" contains illegal characters (whitespace or "/")`),a&&s&&l.push("and"),s&&l.push(`version name "${t}" contains illegal characters (whitespace or "/")`),as.warn(l.join(" "));return}dc(new Ol(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aM="firebase-heartbeat-database",sM=1,Ih="firebase-heartbeat-store";let wv=null;function VC(){return wv||(wv=EO(aM,sM,{upgrade:(n,t)=>{switch(t){case 0:try{n.createObjectStore(Ih)}catch(e){console.warn(e)}}}}).catch(n=>{throw go.create("idb-open",{originalErrorMessage:n.message})})),wv}async function oM(n){try{const e=(await VC()).transaction(Ih),r=await e.objectStore(Ih).get(FC(n));return await e.done,r}catch(t){if(t instanceof ps)as.warn(t.message);else{const e=go.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});as.warn(e.message)}}}async function jE(n,t){try{const r=(await VC()).transaction(Ih,"readwrite");await r.objectStore(Ih).put(t,FC(n)),await r.done}catch(e){if(e instanceof ps)as.warn(e.message);else{const r=go.create("idb-set",{originalErrorMessage:e==null?void 0:e.message});as.warn(r.message)}}}function FC(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lM=1024,uM=30;class cM{constructor(t){this.container=t,this._heartbeatsCache=null;const e=this.container.getProvider("app").getImmediate();this._storage=new hM(e),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var t,e;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=zE();if(((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(s=>s.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:i}),this._heartbeatsCache.heartbeats.length>uM){const s=dM(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){as.warn(r)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=zE(),{heartbeatsToSend:r,unsentEntries:i}=fM(this._heartbeatsCache.heartbeats),a=N1(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=e,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(e){return as.warn(e),""}}}function zE(){return new Date().toISOString().substring(0,10)}function fM(n,t=lM){const e=[];let r=n.slice();for(const i of n){const a=e.find(s=>s.agent===i.agent);if(a){if(a.dates.push(i.date),HE(e)>t){a.dates.pop();break}}else if(e.push({agent:i.agent,dates:[i.date]}),HE(e)>t){e.pop();break}r=r.slice(1)}return{heartbeatsToSend:e,unsentEntries:r}}class hM{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return QD()?JD().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const e=await oM(this.app);return e!=null&&e.heartbeats?e:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var e;if(await this._canUseIndexedDBPromise){const i=await this.read();return jE(this.app,{lastSentHeartbeatDate:(e=t.lastSentHeartbeatDate)!==null&&e!==void 0?e:i.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var e;if(await this._canUseIndexedDBPromise){const i=await this.read();return jE(this.app,{lastSentHeartbeatDate:(e=t.lastSentHeartbeatDate)!==null&&e!==void 0?e:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...t.heartbeats]})}else return}}function HE(n){return N1(JSON.stringify({version:2,heartbeats:n})).length}function dM(n){if(n.length===0)return-1;let t=0,e=n[0].date;for(let r=1;r<n.length;r++)n[r].date<e&&(e=n[r].date,t=r);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gM(n){dc(new Ol("platform-logger",t=>new TO(t),"PRIVATE")),dc(new Ol("heartbeat",t=>new cM(t),"PRIVATE")),po(my,FE,n),po(my,FE,"esm2017"),po("fire-js","")}gM("");function bx(n,t){var e={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&t.indexOf(r)<0&&(e[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(e[r[i]]=n[r[i]]);return e}function UC(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const pM=UC,jC=new Xh("auth","Firebase",UC());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k1=new Ax("@firebase/auth");function mM(n,...t){k1.logLevel<=te.WARN&&k1.warn(`Auth (${Dc}): ${n}`,...t)}function v1(n,...t){k1.logLevel<=te.ERROR&&k1.error(`Auth (${Dc}): ${n}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fi(n,...t){throw Sx(n,...t)}function la(n,...t){return Sx(n,...t)}function zC(n,t,e){const r=Object.assign(Object.assign({},pM()),{[t]:e});return new Xh("auth","Firebase",r).create(t,{appName:n.name})}function es(n){return zC(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Sx(n,...t){if(typeof n!="string"){const e=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(e,...r)}return jC.create(n,...t)}function Vt(n,t,...e){if(!n)throw Sx(t,...e)}function Za(n){const t="INTERNAL ASSERTION FAILED: "+n;throw v1(t),new Error(t)}function ss(n,t){n||Za(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xy(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function vM(){return GE()==="http:"||GE()==="https:"}function GE(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yM(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(vM()||XD()||"connection"in navigator)?navigator.onLine:!0}function xM(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kh{constructor(t,e){this.shortDelay=t,this.longDelay=e,ss(e>t,"Short delay should be less than long delay!"),this.isMobile=$D()||YD()}get(){return yM()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tx(n,t){ss(n.emulator,"Emulator should always be set here");const{url:e}=n.emulator;return t?`${e}${t.startsWith("/")?t.slice(1):t}`:e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HC{static initialize(t,e,r){this.fetchImpl=t,e&&(this.headersImpl=e),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Za("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Za("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Za("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _M={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AM=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],wM=new Kh(3e4,6e4);function Co(n,t){return n.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:n.tenantId}):t}async function Io(n,t,e,r,i={}){return GC(n,i,async()=>{let a={},s={};r&&(t==="GET"?s=r:a={body:JSON.stringify(r)});const l=Yh(Object.assign({key:n.config.apiKey},s)).slice(1),c=await n._getAdditionalHeaders();c["Content-Type"]="application/json",n.languageCode&&(c["X-Firebase-Locale"]=n.languageCode);const f=Object.assign({method:t,headers:c},a);return WD()||(f.referrerPolicy="no-referrer"),n.emulatorConfig&&Rc(n.emulatorConfig.host)&&(f.credentials="include"),HC.fetch()(await $C(n,n.config.apiHost,e,l),f)})}async function GC(n,t,e){n._canInitEmulator=!1;const r=Object.assign(Object.assign({},_M),t);try{const i=new bM(n),a=await Promise.race([e(),i.promise]);i.clearNetworkTimeout();const s=await a.json();if("needConfirmation"in s)throw q0(n,"account-exists-with-different-credential",s);if(a.ok&&!("errorMessage"in s))return s;{const l=a.ok?s.errorMessage:s.error.message,[c,f]=l.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw q0(n,"credential-already-in-use",s);if(c==="EMAIL_EXISTS")throw q0(n,"email-already-in-use",s);if(c==="USER_DISABLED")throw q0(n,"user-disabled",s);const d=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw zC(n,d,f);Fi(n,d)}}catch(i){if(i instanceof ps)throw i;Fi(n,"network-request-failed",{message:String(i)})}}async function Zh(n,t,e,r,i={}){const a=await Io(n,t,e,r,i);return"mfaPendingCredential"in a&&Fi(n,"multi-factor-auth-required",{_serverResponse:a}),a}async function $C(n,t,e,r){const i=`${t}${e}?${r}`,a=n,s=a.config.emulator?Tx(n.config,i):`${n.config.apiScheme}://${i}`;return AM.includes(e)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(s).toString():s}function EM(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class bM{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((e,r)=>{this.timer=setTimeout(()=>r(la(this.auth,"network-request-failed")),wM.get())})}}function q0(n,t,e){const r={appName:n.name};e.email&&(r.email=e.email),e.phoneNumber&&(r.phoneNumber=e.phoneNumber);const i=la(n,t,r);return i.customData._tokenResponse=e,i}function $E(n){return n!==void 0&&n.enterprise!==void 0}class SM{constructor(t){if(this.siteKey="",this.recaptchaEnforcementState=[],t.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=t.recaptchaEnforcementState}getProviderEnforcementState(t){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const e of this.recaptchaEnforcementState)if(e.provider&&e.provider===t)return EM(e.enforcementState);return null}isProviderEnabled(t){return this.getProviderEnforcementState(t)==="ENFORCE"||this.getProviderEnforcementState(t)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function TM(n,t){return Io(n,"GET","/v2/recaptchaConfig",Co(n,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CM(n,t){return Io(n,"POST","/v1/accounts:delete",t)}async function L1(n,t){return Io(n,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wh(n){if(n)try{const t=new Date(Number(n));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function IM(n,t=!1){const e=Nn(n),r=await e.getIdToken(t),i=Cx(r);Vt(i&&i.exp&&i.auth_time&&i.iat,e.auth,"internal-error");const a=typeof i.firebase=="object"?i.firebase:void 0,s=a==null?void 0:a.sign_in_provider;return{claims:i,token:r,authTime:wh(Ev(i.auth_time)),issuedAtTime:wh(Ev(i.iat)),expirationTime:wh(Ev(i.exp)),signInProvider:s||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function Ev(n){return Number(n)*1e3}function Cx(n){const[t,e,r]=n.split(".");if(t===void 0||e===void 0||r===void 0)return v1("JWT malformed, contained fewer than 3 sections"),null;try{const i=IC(e);return i?JSON.parse(i):(v1("Failed to decode base64 JWT payload"),null)}catch(i){return v1("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function qE(n){const t=Cx(n);return Vt(t,"internal-error"),Vt(typeof t.exp<"u","internal-error"),Vt(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Rh(n,t,e=!1){if(e)return t;try{return await t}catch(r){throw r instanceof ps&&RM(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function RM({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DM{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){var e;if(t){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((e=this.user.stsTokenManager.expirationTime)!==null&&e!==void 0?e:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(t=!1){if(!this.isRunning)return;const e=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},e)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _y{constructor(t,e){this.createdAt=t,this.lastLoginAt=e,this._initializeTime()}_initializeTime(){this.lastSignInTime=wh(this.lastLoginAt),this.creationTime=wh(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function B1(n){var t;const e=n.auth,r=await n.getIdToken(),i=await Rh(n,L1(e,{idToken:r}));Vt(i==null?void 0:i.users.length,e,"internal-error");const a=i.users[0];n._notifyReloadListener(a);const s=!((t=a.providerUserInfo)===null||t===void 0)&&t.length?qC(a.providerUserInfo):[],l=MM(n.providerData,s),c=n.isAnonymous,f=!(n.email&&a.passwordHash)&&!(l!=null&&l.length),d=c?f:!1,g={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:l,metadata:new _y(a.createdAt,a.lastLoginAt),isAnonymous:d};Object.assign(n,g)}async function OM(n){const t=Nn(n);await B1(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function MM(n,t){return[...n.filter(r=>!t.some(i=>i.providerId===r.providerId)),...t]}function qC(n){return n.map(t=>{var{providerId:e}=t,r=bx(t,["providerId"]);return{providerId:e,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NM(n,t){const e=await GC(n,{},async()=>{const r=Yh({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:i,apiKey:a}=n.config,s=await $C(n,i,"/v1/token",`key=${a}`),l=await n._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:l,body:r};return n.emulatorConfig&&Rc(n.emulatorConfig.host)&&(c.credentials="include"),HC.fetch()(s,c)});return{accessToken:e.access_token,expiresIn:e.expires_in,refreshToken:e.refresh_token}}async function PM(n,t){return Io(n,"POST","/v2/accounts:revokeToken",Co(n,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sc{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){Vt(t.idToken,"internal-error"),Vt(typeof t.idToken<"u","internal-error"),Vt(typeof t.refreshToken<"u","internal-error");const e="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):qE(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,e)}updateFromIdToken(t){Vt(t.length!==0,"internal-error");const e=qE(t);this.updateTokensAndExpiration(t,null,e)}async getToken(t,e=!1){return!e&&this.accessToken&&!this.isExpired?this.accessToken:(Vt(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,e){const{accessToken:r,refreshToken:i,expiresIn:a}=await NM(t,e);this.updateTokensAndExpiration(r,i,Number(a))}updateTokensAndExpiration(t,e,r){this.refreshToken=e||null,this.accessToken=t||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(t,e){const{refreshToken:r,accessToken:i,expirationTime:a}=e,s=new sc;return r&&(Vt(typeof r=="string","internal-error",{appName:t}),s.refreshToken=r),i&&(Vt(typeof i=="string","internal-error",{appName:t}),s.accessToken=i),a&&(Vt(typeof a=="number","internal-error",{appName:t}),s.expirationTime=a),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new sc,this.toJSON())}_performRefresh(){return Za("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zs(n,t){Vt(typeof n=="string"||typeof n>"u","internal-error",{appName:t})}class Bi{constructor(t){var{uid:e,auth:r,stsTokenManager:i}=t,a=bx(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new DM(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new _y(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(t){const e=await Rh(this,this.stsTokenManager.getToken(this.auth,t));return Vt(e,this.auth,"internal-error"),this.accessToken!==e&&(this.accessToken=e,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),e}getIdTokenResult(t){return IM(this,t)}reload(){return OM(this)}_assign(t){this!==t&&(Vt(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(e=>Object.assign({},e)),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const e=new Bi(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return e.metadata._copy(this.metadata),e}_onReload(t){Vt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,e=!1){let r=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),e&&await B1(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(vi(this.auth.app))return Promise.reject(es(this.auth));const t=await this.getIdToken();return await Rh(this,CM(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>Object.assign({},t)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,e){var r,i,a,s,l,c,f,d;const g=(r=e.displayName)!==null&&r!==void 0?r:void 0,m=(i=e.email)!==null&&i!==void 0?i:void 0,v=(a=e.phoneNumber)!==null&&a!==void 0?a:void 0,_=(s=e.photoURL)!==null&&s!==void 0?s:void 0,w=(l=e.tenantId)!==null&&l!==void 0?l:void 0,b=(c=e._redirectEventId)!==null&&c!==void 0?c:void 0,S=(f=e.createdAt)!==null&&f!==void 0?f:void 0,C=(d=e.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:I,emailVerified:M,isAnonymous:N,providerData:k,stsTokenManager:O}=e;Vt(I&&O,t,"internal-error");const R=sc.fromJSON(this.name,O);Vt(typeof I=="string",t,"internal-error"),Zs(g,t.name),Zs(m,t.name),Vt(typeof M=="boolean",t,"internal-error"),Vt(typeof N=="boolean",t,"internal-error"),Zs(v,t.name),Zs(_,t.name),Zs(w,t.name),Zs(b,t.name),Zs(S,t.name),Zs(C,t.name);const D=new Bi({uid:I,auth:t,email:m,emailVerified:M,displayName:g,isAnonymous:N,photoURL:_,phoneNumber:v,tenantId:w,stsTokenManager:R,createdAt:S,lastLoginAt:C});return k&&Array.isArray(k)&&(D.providerData=k.map(L=>Object.assign({},L))),b&&(D._redirectEventId=b),D}static async _fromIdTokenResponse(t,e,r=!1){const i=new sc;i.updateFromServerResponse(e);const a=new Bi({uid:e.localId,auth:t,stsTokenManager:i,isAnonymous:r});return await B1(a),a}static async _fromGetAccountInfoResponse(t,e,r){const i=e.users[0];Vt(i.localId!==void 0,"internal-error");const a=i.providerUserInfo!==void 0?qC(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!(a!=null&&a.length),l=new sc;l.updateFromIdToken(r);const c=new Bi({uid:i.localId,auth:t,stsTokenManager:l,isAnonymous:s}),f={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new _y(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(a!=null&&a.length)};return Object.assign(c,f),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WE=new Map;function Qa(n){ss(n instanceof Function,"Expected a class definition");let t=WE.get(n);return t?(ss(t instanceof n,"Instance stored in cache mismatched with class"),t):(t=new n,WE.set(n,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WC{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,e){this.storage[t]=e}async _get(t){const e=this.storage[t];return e===void 0?null:e}async _remove(t){delete this.storage[t]}_addListener(t,e){}_removeListener(t,e){}}WC.type="NONE";const XE=WC;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y1(n,t,e){return`firebase:${n}:${t}:${e}`}class oc{constructor(t,e,r){this.persistence=t,this.auth=e,this.userKey=r;const{config:i,name:a}=this.auth;this.fullUserKey=y1(this.userKey,i.apiKey,a),this.fullPersistenceKey=y1("persistence",i.apiKey,a),this.boundEventHandler=e._onStorageEvent.bind(e),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const e=await L1(this.auth,{idToken:t}).catch(()=>{});return e?Bi._fromGetAccountInfoResponse(this.auth,e,t):null}return Bi._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const e=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,e)return this.setCurrentUser(e)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,e,r="authUser"){if(!e.length)return new oc(Qa(XE),t,r);const i=(await Promise.all(e.map(async f=>{if(await f._isAvailable())return f}))).filter(f=>f);let a=i[0]||Qa(XE);const s=y1(r,t.config.apiKey,t.name);let l=null;for(const f of e)try{const d=await f._get(s);if(d){let g;if(typeof d=="string"){const m=await L1(t,{idToken:d}).catch(()=>{});if(!m)break;g=await Bi._fromGetAccountInfoResponse(t,m,d)}else g=Bi._fromJSON(t,d);f!==a&&(l=g),a=f;break}}catch{}const c=i.filter(f=>f._shouldAllowMigration);return!a._shouldAllowMigration||!c.length?new oc(a,t,r):(a=c[0],l&&await a._set(s,l.toJSON()),await Promise.all(e.map(async f=>{if(f!==a)try{await f._remove(s)}catch{}})),new oc(a,t,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YE(n){const t=n.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(ZC(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(XC(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(JC(t))return"Blackberry";if(tI(t))return"Webos";if(YC(t))return"Safari";if((t.includes("chrome/")||KC(t))&&!t.includes("edge/"))return"Chrome";if(QC(t))return"Android";{const e=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(e);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function XC(n=gr()){return/firefox\//i.test(n)}function YC(n=gr()){const t=n.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function KC(n=gr()){return/crios\//i.test(n)}function ZC(n=gr()){return/iemobile/i.test(n)}function QC(n=gr()){return/android/i.test(n)}function JC(n=gr()){return/blackberry/i.test(n)}function tI(n=gr()){return/webos/i.test(n)}function Ix(n=gr()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function kM(n=gr()){var t;return Ix(n)&&!!(!((t=window.navigator)===null||t===void 0)&&t.standalone)}function LM(){return KD()&&document.documentMode===10}function eI(n=gr()){return Ix(n)||QC(n)||tI(n)||JC(n)||/windows phone/i.test(n)||ZC(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nI(n,t=[]){let e;switch(n){case"Browser":e=YE(gr());break;case"Worker":e=`${YE(gr())}-${n}`;break;default:e=n}const r=t.length?t.join(","):"FirebaseCore-web";return`${e}/JsCore/${Dc}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BM{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,e){const r=a=>new Promise((s,l)=>{try{const c=t(a);s(c)}catch(c){l(c)}});r.onAbort=e,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const e=[];try{for(const r of this.queue)await r(t),r.onAbort&&e.push(r.onAbort)}catch(r){e.reverse();for(const i of e)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VM(n,t={}){return Io(n,"GET","/v2/passwordPolicy",Co(n,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FM=6;class UM{constructor(t){var e,r,i,a;const s=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(e=s.minPasswordLength)!==null&&e!==void 0?e:FM,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=t.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(a=t.forceUpgradeOnSignin)!==null&&a!==void 0?a:!1,this.schemaVersion=t.schemaVersion}validatePassword(t){var e,r,i,a,s,l;const c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,c),this.validatePasswordCharacterOptions(t,c),c.isValid&&(c.isValid=(e=c.meetsMinPasswordLength)!==null&&e!==void 0?e:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(i=c.containsLowercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(a=c.containsUppercaseLetter)!==null&&a!==void 0?a:!0),c.isValid&&(c.isValid=(s=c.containsNumericCharacter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(l=c.containsNonAlphanumericCharacter)!==null&&l!==void 0?l:!0),c}validatePasswordLengthOptions(t,e){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(e.meetsMinPasswordLength=t.length>=r),i&&(e.meetsMaxPasswordLength=t.length<=i)}validatePasswordCharacterOptions(t,e){this.updatePasswordCharacterOptionsStatuses(e,!1,!1,!1,!1);let r;for(let i=0;i<t.length;i++)r=t.charAt(i),this.updatePasswordCharacterOptionsStatuses(e,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(t,e,r,i,a){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=e)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jM{constructor(t,e,r,i){this.app=t,this.heartbeatServiceProvider=e,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new KE(this),this.idTokenSubscription=new KE(this),this.beforeStateQueue=new BM(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=jC,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(t,e){return e&&(this._popupRedirectResolver=Qa(e)),this._initializationPromise=this.queue(async()=>{var r,i,a;if(!this._deleted&&(this.persistenceManager=await oc.create(this,t),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(e),this.lastNotifiedUid=((a=this.currentUser)===null||a===void 0?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const e=await L1(this,{idToken:t}),r=await Bi._fromGetAccountInfoResponse(this,e,t);await this.directlySetCurrentUser(r)}catch(e){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",e),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var e;if(vi(this.app)){const s=this.app.settings.authIdToken;return s?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(l,l))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,a=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const s=(e=this.redirectUser)===null||e===void 0?void 0:e._redirectEventId,l=i==null?void 0:i._redirectEventId,c=await this.tryRedirectSignIn(t);(!s||s===l)&&(c!=null&&c.user)&&(i=c.user,a=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(i)}catch(s){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Vt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(t){let e=null;try{e=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return e}async reloadAndSetCurrentUserOrClear(t){try{await B1(t)}catch(e){if((e==null?void 0:e.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=xM()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(vi(this.app))return Promise.reject(es(this));const e=t?Nn(t):null;return e&&Vt(e.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(e&&e._clone(this))}async _updateCurrentUser(t,e=!1){if(!this._deleted)return t&&Vt(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),e||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return vi(this.app)?Promise.reject(es(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return vi(this.app)?Promise.reject(es(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Qa(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const e=this._getPasswordPolicyInternal();return e.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):e.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await VM(this),e=new UM(t);this.tenantId===null?this._projectPasswordPolicy=e:this._tenantPasswordPolicies[this.tenantId]=e}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new Xh("auth","Firebase",t())}onAuthStateChanged(t,e,r){return this.registerStateListener(this.authStateSubscription,t,e,r)}beforeAuthStateChanged(t,e){return this.beforeStateQueue.pushCallback(t,e)}onIdTokenChanged(t,e,r){return this.registerStateListener(this.idTokenSubscription,t,e,r)}authStateReady(){return new Promise((t,e)=>{if(this.currentUser)t();else{const r=this.onAuthStateChanged(()=>{r(),t()},e)}})}async revokeAccessToken(t){if(this.currentUser){const e=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:e};this.tenantId!=null&&(r.tenantId=this.tenantId),await PM(this,r)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)===null||t===void 0?void 0:t.toJSON()}}async _setRedirectUser(t,e){const r=await this.getOrInitRedirectPersistenceManager(e);return t===null?r.removeCurrentUser():r.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const e=t&&Qa(t)||this._popupRedirectResolver;Vt(e,this,"argument-error"),this.redirectPersistenceManager=await oc.create(this,[Qa(e._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var e,r;return this._isInitialized&&await this.queue(async()=>{}),((e=this._currentUser)===null||e===void 0?void 0:e._redirectEventId)===t?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,e;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(e=(t=this.currentUser)===null||t===void 0?void 0:t.uid)!==null&&e!==void 0?e:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,e,r,i){if(this._deleted)return()=>{};const a=typeof e=="function"?e:e.next.bind(e);let s=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(Vt(l,this,"internal-error"),l.then(()=>{s||a(this.currentUser)}),typeof e=="function"){const c=t.addObserver(e,r,i);return()=>{s=!0,c()}}else{const c=t.addObserver(e);return()=>{s=!0,c()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return Vt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=nI(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var t;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const r=await((t=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getHeartbeatsHeader());r&&(e["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){var t;if(vi(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getToken());return e!=null&&e.error&&mM(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Bl(n){return Nn(n)}class KE{constructor(t){this.auth=t,this.observer=null,this.addObserver=iO(e=>this.observer=e)}get next(){return Vt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Sg={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function zM(n){Sg=n}function rI(n){return Sg.loadJS(n)}function HM(){return Sg.recaptchaEnterpriseScript}function GM(){return Sg.gapiScript}function $M(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class qM{constructor(){this.enterprise=new WM}ready(t){t()}execute(t,e){return Promise.resolve("token")}render(t,e){return""}}class WM{ready(t){t()}execute(t,e){return Promise.resolve("token")}render(t,e){return""}}const XM="recaptcha-enterprise",iI="NO_RECAPTCHA";class YM{constructor(t){this.type=XM,this.auth=Bl(t)}async verify(t="verify",e=!1){async function r(a){if(!e){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(s,l)=>{TM(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const f=new SM(c);return a.tenantId==null?a._agentRecaptchaConfig=f:a._tenantRecaptchaConfigs[a.tenantId]=f,s(f.siteKey)}}).catch(c=>{l(c)})})}function i(a,s,l){const c=window.grecaptcha;$E(c)?c.enterprise.ready(()=>{c.enterprise.execute(a,{action:t}).then(f=>{s(f)}).catch(()=>{s(iI)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new qM().execute("siteKey",{action:"verify"}):new Promise((a,s)=>{r(this.auth).then(l=>{if(!e&&$E(window.grecaptcha))i(l,a,s);else{if(typeof window>"u"){s(new Error("RecaptchaVerifier is only supported in browser"));return}let c=HM();c.length!==0&&(c+=l),rI(c).then(()=>{i(l,a,s)}).catch(f=>{s(f)})}}).catch(l=>{s(l)})})}}async function ZE(n,t,e,r=!1,i=!1){const a=new YM(n);let s;if(i)s=iI;else try{s=await a.verify(e)}catch{s=await a.verify(e,!0)}const l=Object.assign({},t);if(e==="mfaSmsEnrollment"||e==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in l){const c=l.phoneEnrollmentInfo.phoneNumber,f=l.phoneEnrollmentInfo.recaptchaToken;Object.assign(l,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:f,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in l){const c=l.phoneSignInInfo.recaptchaToken;Object.assign(l,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return l}return r?Object.assign(l,{captchaResp:s}):Object.assign(l,{captchaResponse:s}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function Ay(n,t,e,r,i){var a;if(!((a=n._getRecaptchaConfig())===null||a===void 0)&&a.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await ZE(n,t,e,e==="getOobCode");return r(n,s)}else return r(n,t).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log(`${e} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await ZE(n,t,e,e==="getOobCode");return r(n,l)}else return Promise.reject(s)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KM(n,t){const e=Ex(n,"auth");if(e.isInitialized()){const i=e.getImmediate(),a=e.getOptions();if(Dl(a,t??{}))return i;Fi(i,"already-initialized")}return e.initialize({options:t})}function ZM(n,t){const e=(t==null?void 0:t.persistence)||[],r=(Array.isArray(e)?e:[e]).map(Qa);t!=null&&t.errorMap&&n._updateErrorMap(t.errorMap),n._initializeWithPersistence(r,t==null?void 0:t.popupRedirectResolver)}function QM(n,t,e){const r=Bl(n);Vt(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!1,a=aI(t),{host:s,port:l}=JM(t),c=l===null?"":`:${l}`,f={url:`${a}//${s}${c}/`},d=Object.freeze({host:s,port:l,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){Vt(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Vt(Dl(f,r.config.emulator)&&Dl(d,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=f,r.emulatorConfig=d,r.settings.appVerificationDisabledForTesting=!0,Rc(s)?(MC(`${a}//${s}${c}`),NC("Auth",!0)):tN()}function aI(n){const t=n.indexOf(":");return t<0?"":n.substr(0,t+1)}function JM(n){const t=aI(n),e=/(\/\/)?([^?#/]+)/.exec(n.substr(t.length));if(!e)return{host:"",port:null};const r=e[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const a=i[1];return{host:a,port:QE(r.substr(a.length+1))}}else{const[a,s]=r.split(":");return{host:a,port:QE(s)}}}function QE(n){if(!n)return null;const t=Number(n);return isNaN(t)?null:t}function tN(){function n(){const t=document.createElement("p"),e=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",e.position="fixed",e.width="100%",e.backgroundColor="#ffffff",e.border=".1em solid #000000",e.color="#b50000",e.bottom="0px",e.left="0px",e.margin="0px",e.zIndex="10000",e.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rx{constructor(t,e){this.providerId=t,this.signInMethod=e}toJSON(){return Za("not implemented")}_getIdTokenResponse(t){return Za("not implemented")}_linkToIdToken(t,e){return Za("not implemented")}_getReauthenticationResolver(t){return Za("not implemented")}}async function eN(n,t){return Io(n,"POST","/v1/accounts:signUp",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nN(n,t){return Zh(n,"POST","/v1/accounts:signInWithPassword",Co(n,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rN(n,t){return Zh(n,"POST","/v1/accounts:signInWithEmailLink",Co(n,t))}async function iN(n,t){return Zh(n,"POST","/v1/accounts:signInWithEmailLink",Co(n,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dh extends Rx{constructor(t,e,r,i=null){super("password",r),this._email=t,this._password=e,this._tenantId=i}static _fromEmailAndPassword(t,e){return new Dh(t,e,"password")}static _fromEmailAndCode(t,e,r=null){return new Dh(t,e,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const e=typeof t=="string"?JSON.parse(t):t;if(e!=null&&e.email&&(e!=null&&e.password)){if(e.signInMethod==="password")return this._fromEmailAndPassword(e.email,e.password);if(e.signInMethod==="emailLink")return this._fromEmailAndCode(e.email,e.password,e.tenantId)}return null}async _getIdTokenResponse(t){switch(this.signInMethod){case"password":const e={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ay(t,e,"signInWithPassword",nN);case"emailLink":return rN(t,{email:this._email,oobCode:this._password});default:Fi(t,"internal-error")}}async _linkToIdToken(t,e){switch(this.signInMethod){case"password":const r={idToken:e,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ay(t,r,"signUpPassword",eN);case"emailLink":return iN(t,{idToken:e,email:this._email,oobCode:this._password});default:Fi(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lc(n,t){return Zh(n,"POST","/v1/accounts:signInWithIdp",Co(n,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aN="http://localhost";class Ml extends Rx{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const e=new Ml(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(e.idToken=t.idToken),t.accessToken&&(e.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(e.nonce=t.nonce),t.pendingToken&&(e.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(e.accessToken=t.oauthToken,e.secret=t.oauthTokenSecret):Fi("argument-error"),e}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const e=typeof t=="string"?JSON.parse(t):t,{providerId:r,signInMethod:i}=e,a=bx(e,["providerId","signInMethod"]);if(!r||!i)return null;const s=new Ml(r,i);return s.idToken=a.idToken||void 0,s.accessToken=a.accessToken||void 0,s.secret=a.secret,s.nonce=a.nonce,s.pendingToken=a.pendingToken||null,s}_getIdTokenResponse(t){const e=this.buildRequest();return lc(t,e)}_linkToIdToken(t,e){const r=this.buildRequest();return r.idToken=e,lc(t,r)}_getReauthenticationResolver(t){const e=this.buildRequest();return e.autoCreate=!1,lc(t,e)}buildRequest(){const t={requestUri:aN,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const e={};this.idToken&&(e.id_token=this.idToken),this.accessToken&&(e.access_token=this.accessToken),this.secret&&(e.oauth_token_secret=this.secret),e.providerId=this.providerId,this.nonce&&!this.pendingToken&&(e.nonce=this.nonce),t.postBody=Yh(e)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sN(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function oN(n){const t=lh(uh(n)).link,e=t?lh(uh(t)).deep_link_id:null,r=lh(uh(n)).deep_link_id;return(r?lh(uh(r)).link:null)||r||e||t||n}class Dx{constructor(t){var e,r,i,a,s,l;const c=lh(uh(t)),f=(e=c.apiKey)!==null&&e!==void 0?e:null,d=(r=c.oobCode)!==null&&r!==void 0?r:null,g=sN((i=c.mode)!==null&&i!==void 0?i:null);Vt(f&&d&&g,"argument-error"),this.apiKey=f,this.operation=g,this.code=d,this.continueUrl=(a=c.continueUrl)!==null&&a!==void 0?a:null,this.languageCode=(s=c.lang)!==null&&s!==void 0?s:null,this.tenantId=(l=c.tenantId)!==null&&l!==void 0?l:null}static parseLink(t){const e=oN(t);try{return new Dx(e)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oc{constructor(){this.providerId=Oc.PROVIDER_ID}static credential(t,e){return Dh._fromEmailAndPassword(t,e)}static credentialWithLink(t,e){const r=Dx.parseLink(e);return Vt(r,"argument-error"),Dh._fromEmailAndCode(t,r.code,r.tenantId)}}Oc.PROVIDER_ID="password";Oc.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Oc.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sI{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qh extends sI{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ro extends Qh{constructor(){super("facebook.com")}static credential(t){return Ml._fromParams({providerId:ro.PROVIDER_ID,signInMethod:ro.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return ro.credentialFromTaggedObject(t)}static credentialFromError(t){return ro.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return ro.credential(t.oauthAccessToken)}catch{return null}}}ro.FACEBOOK_SIGN_IN_METHOD="facebook.com";ro.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class io extends Qh{constructor(){super("google.com"),this.addScope("profile")}static credential(t,e){return Ml._fromParams({providerId:io.PROVIDER_ID,signInMethod:io.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:e})}static credentialFromResult(t){return io.credentialFromTaggedObject(t)}static credentialFromError(t){return io.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:e,oauthAccessToken:r}=t;if(!e&&!r)return null;try{return io.credential(e,r)}catch{return null}}}io.GOOGLE_SIGN_IN_METHOD="google.com";io.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ao extends Qh{constructor(){super("github.com")}static credential(t){return Ml._fromParams({providerId:ao.PROVIDER_ID,signInMethod:ao.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return ao.credentialFromTaggedObject(t)}static credentialFromError(t){return ao.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return ao.credential(t.oauthAccessToken)}catch{return null}}}ao.GITHUB_SIGN_IN_METHOD="github.com";ao.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class so extends Qh{constructor(){super("twitter.com")}static credential(t,e){return Ml._fromParams({providerId:so.PROVIDER_ID,signInMethod:so.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:e})}static credentialFromResult(t){return so.credentialFromTaggedObject(t)}static credentialFromError(t){return so.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:e,oauthTokenSecret:r}=t;if(!e||!r)return null;try{return so.credential(e,r)}catch{return null}}}so.TWITTER_SIGN_IN_METHOD="twitter.com";so.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lN(n,t){return Zh(n,"POST","/v1/accounts:signUp",Co(n,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nl{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,e,r,i=!1){const a=await Bi._fromIdTokenResponse(t,r,i),s=JE(r);return new Nl({user:a,providerId:s,_tokenResponse:r,operationType:e})}static async _forOperation(t,e,r){await t._updateTokensIfNecessary(r,!0);const i=JE(r);return new Nl({user:t,providerId:i,_tokenResponse:r,operationType:e})}}function JE(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V1 extends ps{constructor(t,e,r,i){var a;super(e.code,e.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,V1.prototype),this.customData={appName:t.name,tenantId:(a=t.tenantId)!==null&&a!==void 0?a:void 0,_serverResponse:e.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(t,e,r,i){return new V1(t,e,r,i)}}function oI(n,t,e,r){return(t==="reauthenticate"?e._getReauthenticationResolver(n):e._getIdTokenResponse(n)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?V1._fromErrorAndOperation(n,a,t,r):a})}async function uN(n,t,e=!1){const r=await Rh(n,t._linkToIdToken(n.auth,await n.getIdToken()),e);return Nl._forOperation(n,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cN(n,t,e=!1){const{auth:r}=n;if(vi(r.app))return Promise.reject(es(r));const i="reauthenticate";try{const a=await Rh(n,oI(r,i,t,n),e);Vt(a.idToken,r,"internal-error");const s=Cx(a.idToken);Vt(s,r,"internal-error");const{sub:l}=s;return Vt(n.uid===l,r,"user-mismatch"),Nl._forOperation(n,i,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&Fi(r,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lI(n,t,e=!1){if(vi(n.app))return Promise.reject(es(n));const r="signIn",i=await oI(n,r,t),a=await Nl._fromIdTokenResponse(n,r,i);return e||await n._updateCurrentUser(a.user),a}async function fN(n,t){return lI(Bl(n),t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uI(n){const t=Bl(n);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function hN(n,t,e){if(vi(n.app))return Promise.reject(es(n));const r=Bl(n),s=await Ay(r,{returnSecureToken:!0,email:t,password:e,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",lN).catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&uI(n),c}),l=await Nl._fromIdTokenResponse(r,"signIn",s);return await r._updateCurrentUser(l.user),l}function dN(n,t,e){return vi(n.app)?Promise.reject(es(n)):fN(Nn(n),Oc.credential(t,e)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&uI(n),r})}function gN(n,t,e,r){return Nn(n).onIdTokenChanged(t,e,r)}function pN(n,t,e){return Nn(n).beforeAuthStateChanged(t,e)}function mN(n,t,e,r){return Nn(n).onAuthStateChanged(t,e,r)}const F1="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cI{constructor(t,e){this.storageRetriever=t,this.type=e}_isAvailable(){try{return this.storage?(this.storage.setItem(F1,"1"),this.storage.removeItem(F1),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,e){return this.storage.setItem(t,JSON.stringify(e)),Promise.resolve()}_get(t){const e=this.storage.getItem(t);return Promise.resolve(e?JSON.parse(e):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vN=1e3,yN=10;class fI extends cI{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,e)=>this.onStorageEvent(t,e),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=eI(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const e of Object.keys(this.listeners)){const r=this.storage.getItem(e),i=this.localCache[e];r!==i&&t(e,i,r)}}onStorageEvent(t,e=!1){if(!t.key){this.forAllChangedKeys((s,l,c)=>{this.notifyListeners(s,c)});return}const r=t.key;e?this.detachListener():this.stopPolling();const i=()=>{const s=this.storage.getItem(r);!e&&this.localCache[r]===s||this.notifyListeners(r,s)},a=this.storage.getItem(r);LM()&&a!==t.newValue&&t.newValue!==t.oldValue?setTimeout(i,yN):i()}notifyListeners(t,e){this.localCache[t]=e;const r=this.listeners[t];if(r)for(const i of Array.from(r))i(e&&JSON.parse(e))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,e,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:e,newValue:r}),!0)})},vN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,e){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,e){await super._set(t,e),this.localCache[t]=JSON.stringify(e)}async _get(t){const e=await super._get(t);return this.localCache[t]=JSON.stringify(e),e}async _remove(t){await super._remove(t),delete this.localCache[t]}}fI.type="LOCAL";const xN=fI;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hI extends cI{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,e){}_removeListener(t,e){}}hI.type="SESSION";const dI=hI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _N(n){return Promise.all(n.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(e){return{fulfilled:!1,reason:e}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tg{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const e=this.receivers.find(i=>i.isListeningto(t));if(e)return e;const r=new Tg(t);return this.receivers.push(r),r}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const e=t,{eventId:r,eventType:i,data:a}=e.data,s=this.handlersMap[i];if(!(s!=null&&s.size))return;e.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const l=Array.from(s).map(async f=>f(e.origin,a)),c=await _N(l);e.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:c})}_subscribe(t,e){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(e)}_unsubscribe(t,e){this.handlersMap[t]&&e&&this.handlersMap[t].delete(e),(!e||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Tg.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ox(n="",t=10){let e="";for(let r=0;r<t;r++)e+=Math.floor(Math.random()*10);return n+e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AN{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,e,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let a,s;return new Promise((l,c)=>{const f=Ox("",20);i.port1.start();const d=setTimeout(()=>{c(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(g){const m=g;if(m.data.eventId===f)switch(m.data.status){case"ack":clearTimeout(d),a=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),l(m.data.response);break;default:clearTimeout(d),clearTimeout(a),c(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:t,eventId:f,data:e},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ua(){return window}function wN(n){ua().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gI(){return typeof ua().WorkerGlobalScope<"u"&&typeof ua().importScripts=="function"}async function EN(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function bN(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function SN(){return gI()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pI="firebaseLocalStorageDb",TN=1,U1="firebaseLocalStorage",mI="fbase_key";class Jh{constructor(t){this.request=t}toPromise(){return new Promise((t,e)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{e(this.request.error)})})}}function Cg(n,t){return n.transaction([U1],t?"readwrite":"readonly").objectStore(U1)}function CN(){const n=indexedDB.deleteDatabase(pI);return new Jh(n).toPromise()}function wy(){const n=indexedDB.open(pI,TN);return new Promise((t,e)=>{n.addEventListener("error",()=>{e(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(U1,{keyPath:mI})}catch(i){e(i)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(U1)?t(r):(r.close(),await CN(),t(await wy()))})})}async function tb(n,t,e){const r=Cg(n,!0).put({[mI]:t,value:e});return new Jh(r).toPromise()}async function IN(n,t){const e=Cg(n,!1).get(t),r=await new Jh(e).toPromise();return r===void 0?null:r.value}function eb(n,t){const e=Cg(n,!0).delete(t);return new Jh(e).toPromise()}const RN=800,DN=3;class vI{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await wy(),this.db)}async _withRetries(t){let e=0;for(;;)try{const r=await this._openDb();return await t(r)}catch(r){if(e++>DN)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return gI()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Tg._getInstance(SN()),this.receiver._subscribe("keyChanged",async(t,e)=>({keyProcessed:(await this._poll()).includes(e.key)})),this.receiver._subscribe("ping",async(t,e)=>["keyChanged"])}async initializeSender(){var t,e;if(this.activeServiceWorker=await EN(),!this.activeServiceWorker)return;this.sender=new AN(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((t=r[0])===null||t===void 0)&&t.fulfilled&&!((e=r[0])===null||e===void 0)&&e.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||bN()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await wy();return await tb(t,F1,"1"),await eb(t,F1),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,e){return this._withPendingWrite(async()=>(await this._withRetries(r=>tb(r,t,e)),this.localCache[t]=e,this.notifyServiceWorker(t)))}async _get(t){const e=await this._withRetries(r=>IN(r,t));return this.localCache[t]=e,e}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(e=>eb(e,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(i=>{const a=Cg(i,!1).getAll();return new Jh(a).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const e=[],r=new Set;if(t.length!==0)for(const{fbase_key:i,value:a}of t)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(a)&&(this.notifyListeners(i,a),e.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),e.push(i));return e}notifyListeners(t,e){this.localCache[t]=e;const r=this.listeners[t];if(r)for(const i of Array.from(r))i(e)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),RN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,e){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}vI.type="LOCAL";const ON=vI;new Kh(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MN(n,t){return t?Qa(t):(Vt(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mx extends Rx{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return lc(t,this._buildIdpRequest())}_linkToIdToken(t,e){return lc(t,this._buildIdpRequest(e))}_getReauthenticationResolver(t){return lc(t,this._buildIdpRequest())}_buildIdpRequest(t){const e={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(e.idToken=t),e}}function NN(n){return lI(n.auth,new Mx(n),n.bypassAuthState)}function PN(n){const{auth:t,user:e}=n;return Vt(e,t,"internal-error"),cN(e,new Mx(n),n.bypassAuthState)}async function kN(n){const{auth:t,user:e}=n;return Vt(e,t,"internal-error"),uN(e,new Mx(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yI{constructor(t,e,r,i,a=!1){this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(e)?e:[e]}execute(){return new Promise(async(t,e)=>{this.pendingPromise={resolve:t,reject:e};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(t){const{urlResponse:e,sessionId:r,postBody:i,tenantId:a,error:s,type:l}=t;if(s){this.reject(s);return}const c={auth:this.auth,requestUri:e,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(c))}catch(f){this.reject(f)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return NN;case"linkViaPopup":case"linkViaRedirect":return kN;case"reauthViaPopup":case"reauthViaRedirect":return PN;default:Fi(this.auth,"internal-error")}}resolve(t){ss(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){ss(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LN=new Kh(2e3,1e4);class Ju extends yI{constructor(t,e,r,i,a){super(t,e,i,a),this.provider=r,this.authWindow=null,this.pollId=null,Ju.currentPopupAction&&Ju.currentPopupAction.cancel(),Ju.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return Vt(t,this.auth,"internal-error"),t}async onExecution(){ss(this.filter.length===1,"Popup operations only handle one event");const t=Ox();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(la(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(la(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ju.currentPopupAction=null}pollUserCancellation(){const t=()=>{var e,r;if(!((r=(e=this.authWindow)===null||e===void 0?void 0:e.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(la(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,LN.get())};t()}}Ju.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BN="pendingRedirect",x1=new Map;class VN extends yI{constructor(t,e,r=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],e,void 0,r),this.eventId=null}async execute(){let t=x1.get(this.auth._key());if(!t){try{const r=await FN(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(r)}catch(e){t=()=>Promise.reject(e)}x1.set(this.auth._key(),t)}return this.bypassAuthState||x1.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const e=await this.auth._redirectUserForId(t.eventId);if(e)return this.user=e,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function FN(n,t){const e=zN(t),r=jN(n);if(!await r._isAvailable())return!1;const i=await r._get(e)==="true";return await r._remove(e),i}function UN(n,t){x1.set(n._key(),t)}function jN(n){return Qa(n._redirectPersistence)}function zN(n){return y1(BN,n.config.apiKey,n.name)}async function HN(n,t,e=!1){if(vi(n.app))return Promise.reject(es(n));const r=Bl(n),i=MN(r,t),s=await new VN(r,i,e).execute();return s&&!e&&(delete s.user._redirectEventId,await r._persistUserIfCurrent(s.user),await r._setRedirectUser(null,t)),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GN=600*1e3;class $N{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let e=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(t,r)&&(e=!0,this.sendToConsumer(t,r),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!qN(t)||(this.hasHandledPotentialRedirect=!0,e||(this.queuedRedirectEvent=t,e=!0)),e}sendToConsumer(t,e){var r;if(t.error&&!xI(t)){const i=((r=t.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";e.onError(la(this.auth,i))}else e.onAuthEvent(t)}isEventForConsumer(t,e){const r=e.eventId===null||!!t.eventId&&t.eventId===e.eventId;return e.filter.includes(t.type)&&r}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=GN&&this.cachedEventUids.clear(),this.cachedEventUids.has(nb(t))}saveEventToCache(t){this.cachedEventUids.add(nb(t)),this.lastProcessedEventTime=Date.now()}}function nb(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(t=>t).join("-")}function xI({type:n,error:t}){return n==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function qN(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return xI(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WN(n,t={}){return Io(n,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XN=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,YN=/^https?/;async function KN(n){if(n.config.emulator)return;const{authorizedDomains:t}=await WN(n);for(const e of t)try{if(ZN(e))return}catch{}Fi(n,"unauthorized-domain")}function ZN(n){const t=xy(),{protocol:e,hostname:r}=new URL(t);if(n.startsWith("chrome-extension://")){const s=new URL(n);return s.hostname===""&&r===""?e==="chrome-extension:"&&n.replace("chrome-extension://","")===t.replace("chrome-extension://",""):e==="chrome-extension:"&&s.hostname===r}if(!YN.test(e))return!1;if(XN.test(n))return r===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QN=new Kh(3e4,6e4);function rb(){const n=ua().___jsl;if(n!=null&&n.H){for(const t of Object.keys(n.H))if(n.H[t].r=n.H[t].r||[],n.H[t].L=n.H[t].L||[],n.H[t].r=[...n.H[t].L],n.CP)for(let e=0;e<n.CP.length;e++)n.CP[e]=null}}function JN(n){return new Promise((t,e)=>{var r,i,a;function s(){rb(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{rb(),e(la(n,"network-request-failed"))},timeout:QN.get()})}if(!((i=(r=ua().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)t(gapi.iframes.getContext());else if(!((a=ua().gapi)===null||a===void 0)&&a.load)s();else{const l=$M("iframefcb");return ua()[l]=()=>{gapi.load?s():e(la(n,"network-request-failed"))},rI(`${GM()}?onload=${l}`).catch(c=>e(c))}}).catch(t=>{throw _1=null,t})}let _1=null;function tP(n){return _1=_1||JN(n),_1}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eP=new Kh(5e3,15e3),nP="__/auth/iframe",rP="emulator/auth/iframe",iP={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},aP=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function sP(n){const t=n.config;Vt(t.authDomain,n,"auth-domain-config-required");const e=t.emulator?Tx(t,rP):`https://${n.config.authDomain}/${nP}`,r={apiKey:t.apiKey,appName:n.name,v:Dc},i=aP.get(n.config.apiHost);i&&(r.eid=i);const a=n._getFrameworks();return a.length&&(r.fw=a.join(",")),`${e}?${Yh(r).slice(1)}`}async function oP(n){const t=await tP(n),e=ua().gapi;return Vt(e,n,"internal-error"),t.open({where:document.body,url:sP(n),messageHandlersFilter:e.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:iP,dontclear:!0},r=>new Promise(async(i,a)=>{await r.restyle({setHideOnLeave:!1});const s=la(n,"network-request-failed"),l=ua().setTimeout(()=>{a(s)},eP.get());function c(){ua().clearTimeout(l),i(r)}r.ping(c).then(c,()=>{a(s)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lP={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},uP=500,cP=600,fP="_blank",hP="http://localhost";class ib{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function dP(n,t,e,r=uP,i=cP){const a=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const c=Object.assign(Object.assign({},lP),{width:r.toString(),height:i.toString(),top:a,left:s}),f=gr().toLowerCase();e&&(l=KC(f)?fP:e),XC(f)&&(t=t||hP,c.scrollbars="yes");const d=Object.entries(c).reduce((m,[v,_])=>`${m}${v}=${_},`,"");if(kM(f)&&l!=="_self")return gP(t||"",l),new ib(null);const g=window.open(t||"",l,d);Vt(g,n,"popup-blocked");try{g.focus()}catch{}return new ib(g)}function gP(n,t){const e=document.createElement("a");e.href=n,e.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),e.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pP="__/auth/handler",mP="emulator/auth/handler",vP=encodeURIComponent("fac");async function ab(n,t,e,r,i,a){Vt(n.config.authDomain,n,"auth-domain-config-required"),Vt(n.config.apiKey,n,"invalid-api-key");const s={apiKey:n.config.apiKey,appName:n.name,authType:e,redirectUrl:r,v:Dc,eventId:i};if(t instanceof sI){t.setDefaultLanguage(n.languageCode),s.providerId=t.providerId||"",rO(t.getCustomParameters())||(s.customParameters=JSON.stringify(t.getCustomParameters()));for(const[d,g]of Object.entries({}))s[d]=g}if(t instanceof Qh){const d=t.getScopes().filter(g=>g!=="");d.length>0&&(s.scopes=d.join(","))}n.tenantId&&(s.tid=n.tenantId);const l=s;for(const d of Object.keys(l))l[d]===void 0&&delete l[d];const c=await n._getAppCheckToken(),f=c?`#${vP}=${encodeURIComponent(c)}`:"";return`${yP(n)}?${Yh(l).slice(1)}${f}`}function yP({config:n}){return n.emulator?Tx(n,mP):`https://${n.authDomain}/${pP}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bv="webStorageSupport";class xP{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=dI,this._completeRedirectFn=HN,this._overrideRedirectResult=UN}async _openPopup(t,e,r,i){var a;ss((a=this.eventManagers[t._key()])===null||a===void 0?void 0:a.manager,"_initialize() not called before _openPopup()");const s=await ab(t,e,r,xy(),i);return dP(t,s,Ox())}async _openRedirect(t,e,r,i){await this._originValidation(t);const a=await ab(t,e,r,xy(),i);return wN(a),new Promise(()=>{})}_initialize(t){const e=t._key();if(this.eventManagers[e]){const{manager:i,promise:a}=this.eventManagers[e];return i?Promise.resolve(i):(ss(a,"If manager is not set, promise should be"),a)}const r=this.initAndGetManager(t);return this.eventManagers[e]={promise:r},r.catch(()=>{delete this.eventManagers[e]}),r}async initAndGetManager(t){const e=await oP(t),r=new $N(t);return e.register("authEvent",i=>(Vt(i==null?void 0:i.authEvent,t,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=e,r}_isIframeWebStorageSupported(t,e){this.iframes[t._key()].send(bv,{type:bv},i=>{var a;const s=(a=i==null?void 0:i[0])===null||a===void 0?void 0:a[bv];s!==void 0&&e(!!s),Fi(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const e=t._key();return this.originValidationPromises[e]||(this.originValidationPromises[e]=KN(t)),this.originValidationPromises[e]}get _shouldInitProactively(){return eI()||YC()||Ix()}}const _P=xP;var sb="@firebase/auth",ob="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AP{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)===null||t===void 0?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const e=this.auth.onIdTokenChanged(r=>{t((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,e),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const e=this.internalListeners.get(t);e&&(this.internalListeners.delete(t),e(),this.updateProactiveRefresh())}assertAuthConfigured(){Vt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wP(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function EP(n){dc(new Ol("auth",(t,{options:e})=>{const r=t.getProvider("app").getImmediate(),i=t.getProvider("heartbeat"),a=t.getProvider("app-check-internal"),{apiKey:s,authDomain:l}=r.options;Vt(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:s,authDomain:l,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:nI(n)},f=new jM(r,i,a,c);return ZM(f,e),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,r)=>{t.getProvider("auth-internal").initialize()})),dc(new Ol("auth-internal",t=>{const e=Bl(t.getProvider("auth").getImmediate());return(r=>new AP(r))(e)},"PRIVATE").setInstantiationMode("EXPLICIT")),po(sb,ob,wP(n)),po(sb,ob,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bP=300,SP=OC("authIdTokenMaxAge")||bP;let lb=null;const TP=n=>async t=>{const e=t&&await t.getIdTokenResult(),r=e&&(new Date().getTime()-Date.parse(e.issuedAtTime))/1e3;if(r&&r>SP)return;const i=e==null?void 0:e.token;lb!==i&&(lb=i,await fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function CP(n=BC()){const t=Ex(n,"auth");if(t.isInitialized())return t.getImmediate();const e=KM(n,{popupRedirectResolver:_P,persistence:[ON,xN,dI]}),r=OC("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(r,location.origin);if(location.origin===a.origin){const s=TP(a.toString());pN(e,s,()=>s(e.currentUser)),gN(e,l=>s(l))}}const i=RC("auth");return i&&QM(e,`http://${i}`),e}function IP(){var n,t;return(t=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&t!==void 0?t:document}zM({loadJS(n){return new Promise((t,e)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=t,r.onerror=i=>{const a=la("internal-error");a.customData=i,e(a)},r.type="text/javascript",r.charset="UTF-8",IP().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});EP("Browser");var RP="firebase",DP="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */po(RP,DP,"app");var ub=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var mo,_I;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(O,R){function D(){}D.prototype=R.prototype,O.D=R.prototype,O.prototype=new D,O.prototype.constructor=O,O.C=function(L,F,U){for(var B=Array(arguments.length-2),rt=2;rt<arguments.length;rt++)B[rt-2]=arguments[rt];return R.prototype[F].apply(L,B)}}function e(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(r,e),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(O,R,D){D||(D=0);var L=Array(16);if(typeof R=="string")for(var F=0;16>F;++F)L[F]=R.charCodeAt(D++)|R.charCodeAt(D++)<<8|R.charCodeAt(D++)<<16|R.charCodeAt(D++)<<24;else for(F=0;16>F;++F)L[F]=R[D++]|R[D++]<<8|R[D++]<<16|R[D++]<<24;R=O.g[0],D=O.g[1],F=O.g[2];var U=O.g[3],B=R+(U^D&(F^U))+L[0]+3614090360&4294967295;R=D+(B<<7&4294967295|B>>>25),B=U+(F^R&(D^F))+L[1]+3905402710&4294967295,U=R+(B<<12&4294967295|B>>>20),B=F+(D^U&(R^D))+L[2]+606105819&4294967295,F=U+(B<<17&4294967295|B>>>15),B=D+(R^F&(U^R))+L[3]+3250441966&4294967295,D=F+(B<<22&4294967295|B>>>10),B=R+(U^D&(F^U))+L[4]+4118548399&4294967295,R=D+(B<<7&4294967295|B>>>25),B=U+(F^R&(D^F))+L[5]+1200080426&4294967295,U=R+(B<<12&4294967295|B>>>20),B=F+(D^U&(R^D))+L[6]+2821735955&4294967295,F=U+(B<<17&4294967295|B>>>15),B=D+(R^F&(U^R))+L[7]+4249261313&4294967295,D=F+(B<<22&4294967295|B>>>10),B=R+(U^D&(F^U))+L[8]+1770035416&4294967295,R=D+(B<<7&4294967295|B>>>25),B=U+(F^R&(D^F))+L[9]+2336552879&4294967295,U=R+(B<<12&4294967295|B>>>20),B=F+(D^U&(R^D))+L[10]+4294925233&4294967295,F=U+(B<<17&4294967295|B>>>15),B=D+(R^F&(U^R))+L[11]+2304563134&4294967295,D=F+(B<<22&4294967295|B>>>10),B=R+(U^D&(F^U))+L[12]+1804603682&4294967295,R=D+(B<<7&4294967295|B>>>25),B=U+(F^R&(D^F))+L[13]+4254626195&4294967295,U=R+(B<<12&4294967295|B>>>20),B=F+(D^U&(R^D))+L[14]+2792965006&4294967295,F=U+(B<<17&4294967295|B>>>15),B=D+(R^F&(U^R))+L[15]+1236535329&4294967295,D=F+(B<<22&4294967295|B>>>10),B=R+(F^U&(D^F))+L[1]+4129170786&4294967295,R=D+(B<<5&4294967295|B>>>27),B=U+(D^F&(R^D))+L[6]+3225465664&4294967295,U=R+(B<<9&4294967295|B>>>23),B=F+(R^D&(U^R))+L[11]+643717713&4294967295,F=U+(B<<14&4294967295|B>>>18),B=D+(U^R&(F^U))+L[0]+3921069994&4294967295,D=F+(B<<20&4294967295|B>>>12),B=R+(F^U&(D^F))+L[5]+3593408605&4294967295,R=D+(B<<5&4294967295|B>>>27),B=U+(D^F&(R^D))+L[10]+38016083&4294967295,U=R+(B<<9&4294967295|B>>>23),B=F+(R^D&(U^R))+L[15]+3634488961&4294967295,F=U+(B<<14&4294967295|B>>>18),B=D+(U^R&(F^U))+L[4]+3889429448&4294967295,D=F+(B<<20&4294967295|B>>>12),B=R+(F^U&(D^F))+L[9]+568446438&4294967295,R=D+(B<<5&4294967295|B>>>27),B=U+(D^F&(R^D))+L[14]+3275163606&4294967295,U=R+(B<<9&4294967295|B>>>23),B=F+(R^D&(U^R))+L[3]+4107603335&4294967295,F=U+(B<<14&4294967295|B>>>18),B=D+(U^R&(F^U))+L[8]+1163531501&4294967295,D=F+(B<<20&4294967295|B>>>12),B=R+(F^U&(D^F))+L[13]+2850285829&4294967295,R=D+(B<<5&4294967295|B>>>27),B=U+(D^F&(R^D))+L[2]+4243563512&4294967295,U=R+(B<<9&4294967295|B>>>23),B=F+(R^D&(U^R))+L[7]+1735328473&4294967295,F=U+(B<<14&4294967295|B>>>18),B=D+(U^R&(F^U))+L[12]+2368359562&4294967295,D=F+(B<<20&4294967295|B>>>12),B=R+(D^F^U)+L[5]+4294588738&4294967295,R=D+(B<<4&4294967295|B>>>28),B=U+(R^D^F)+L[8]+2272392833&4294967295,U=R+(B<<11&4294967295|B>>>21),B=F+(U^R^D)+L[11]+1839030562&4294967295,F=U+(B<<16&4294967295|B>>>16),B=D+(F^U^R)+L[14]+4259657740&4294967295,D=F+(B<<23&4294967295|B>>>9),B=R+(D^F^U)+L[1]+2763975236&4294967295,R=D+(B<<4&4294967295|B>>>28),B=U+(R^D^F)+L[4]+1272893353&4294967295,U=R+(B<<11&4294967295|B>>>21),B=F+(U^R^D)+L[7]+4139469664&4294967295,F=U+(B<<16&4294967295|B>>>16),B=D+(F^U^R)+L[10]+3200236656&4294967295,D=F+(B<<23&4294967295|B>>>9),B=R+(D^F^U)+L[13]+681279174&4294967295,R=D+(B<<4&4294967295|B>>>28),B=U+(R^D^F)+L[0]+3936430074&4294967295,U=R+(B<<11&4294967295|B>>>21),B=F+(U^R^D)+L[3]+3572445317&4294967295,F=U+(B<<16&4294967295|B>>>16),B=D+(F^U^R)+L[6]+76029189&4294967295,D=F+(B<<23&4294967295|B>>>9),B=R+(D^F^U)+L[9]+3654602809&4294967295,R=D+(B<<4&4294967295|B>>>28),B=U+(R^D^F)+L[12]+3873151461&4294967295,U=R+(B<<11&4294967295|B>>>21),B=F+(U^R^D)+L[15]+530742520&4294967295,F=U+(B<<16&4294967295|B>>>16),B=D+(F^U^R)+L[2]+3299628645&4294967295,D=F+(B<<23&4294967295|B>>>9),B=R+(F^(D|~U))+L[0]+4096336452&4294967295,R=D+(B<<6&4294967295|B>>>26),B=U+(D^(R|~F))+L[7]+1126891415&4294967295,U=R+(B<<10&4294967295|B>>>22),B=F+(R^(U|~D))+L[14]+2878612391&4294967295,F=U+(B<<15&4294967295|B>>>17),B=D+(U^(F|~R))+L[5]+4237533241&4294967295,D=F+(B<<21&4294967295|B>>>11),B=R+(F^(D|~U))+L[12]+1700485571&4294967295,R=D+(B<<6&4294967295|B>>>26),B=U+(D^(R|~F))+L[3]+2399980690&4294967295,U=R+(B<<10&4294967295|B>>>22),B=F+(R^(U|~D))+L[10]+4293915773&4294967295,F=U+(B<<15&4294967295|B>>>17),B=D+(U^(F|~R))+L[1]+2240044497&4294967295,D=F+(B<<21&4294967295|B>>>11),B=R+(F^(D|~U))+L[8]+1873313359&4294967295,R=D+(B<<6&4294967295|B>>>26),B=U+(D^(R|~F))+L[15]+4264355552&4294967295,U=R+(B<<10&4294967295|B>>>22),B=F+(R^(U|~D))+L[6]+2734768916&4294967295,F=U+(B<<15&4294967295|B>>>17),B=D+(U^(F|~R))+L[13]+1309151649&4294967295,D=F+(B<<21&4294967295|B>>>11),B=R+(F^(D|~U))+L[4]+4149444226&4294967295,R=D+(B<<6&4294967295|B>>>26),B=U+(D^(R|~F))+L[11]+3174756917&4294967295,U=R+(B<<10&4294967295|B>>>22),B=F+(R^(U|~D))+L[2]+718787259&4294967295,F=U+(B<<15&4294967295|B>>>17),B=D+(U^(F|~R))+L[9]+3951481745&4294967295,O.g[0]=O.g[0]+R&4294967295,O.g[1]=O.g[1]+(F+(B<<21&4294967295|B>>>11))&4294967295,O.g[2]=O.g[2]+F&4294967295,O.g[3]=O.g[3]+U&4294967295}r.prototype.u=function(O,R){R===void 0&&(R=O.length);for(var D=R-this.blockSize,L=this.B,F=this.h,U=0;U<R;){if(F==0)for(;U<=D;)i(this,O,U),U+=this.blockSize;if(typeof O=="string"){for(;U<R;)if(L[F++]=O.charCodeAt(U++),F==this.blockSize){i(this,L),F=0;break}}else for(;U<R;)if(L[F++]=O[U++],F==this.blockSize){i(this,L),F=0;break}}this.h=F,this.o+=R},r.prototype.v=function(){var O=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);O[0]=128;for(var R=1;R<O.length-8;++R)O[R]=0;var D=8*this.o;for(R=O.length-8;R<O.length;++R)O[R]=D&255,D/=256;for(this.u(O),O=Array(16),R=D=0;4>R;++R)for(var L=0;32>L;L+=8)O[D++]=this.g[R]>>>L&255;return O};function a(O,R){var D=l;return Object.prototype.hasOwnProperty.call(D,O)?D[O]:D[O]=R(O)}function s(O,R){this.h=R;for(var D=[],L=!0,F=O.length-1;0<=F;F--){var U=O[F]|0;L&&U==R||(D[F]=U,L=!1)}this.g=D}var l={};function c(O){return-128<=O&&128>O?a(O,function(R){return new s([R|0],0>R?-1:0)}):new s([O|0],0>O?-1:0)}function f(O){if(isNaN(O)||!isFinite(O))return g;if(0>O)return b(f(-O));for(var R=[],D=1,L=0;O>=D;L++)R[L]=O/D|0,D*=4294967296;return new s(R,0)}function d(O,R){if(O.length==0)throw Error("number format error: empty string");if(R=R||10,2>R||36<R)throw Error("radix out of range: "+R);if(O.charAt(0)=="-")return b(d(O.substring(1),R));if(0<=O.indexOf("-"))throw Error('number format error: interior "-" character');for(var D=f(Math.pow(R,8)),L=g,F=0;F<O.length;F+=8){var U=Math.min(8,O.length-F),B=parseInt(O.substring(F,F+U),R);8>U?(U=f(Math.pow(R,U)),L=L.j(U).add(f(B))):(L=L.j(D),L=L.add(f(B)))}return L}var g=c(0),m=c(1),v=c(16777216);n=s.prototype,n.m=function(){if(w(this))return-b(this).m();for(var O=0,R=1,D=0;D<this.g.length;D++){var L=this.i(D);O+=(0<=L?L:4294967296+L)*R,R*=4294967296}return O},n.toString=function(O){if(O=O||10,2>O||36<O)throw Error("radix out of range: "+O);if(_(this))return"0";if(w(this))return"-"+b(this).toString(O);for(var R=f(Math.pow(O,6)),D=this,L="";;){var F=M(D,R).g;D=S(D,F.j(R));var U=((0<D.g.length?D.g[0]:D.h)>>>0).toString(O);if(D=F,_(D))return U+L;for(;6>U.length;)U="0"+U;L=U+L}},n.i=function(O){return 0>O?0:O<this.g.length?this.g[O]:this.h};function _(O){if(O.h!=0)return!1;for(var R=0;R<O.g.length;R++)if(O.g[R]!=0)return!1;return!0}function w(O){return O.h==-1}n.l=function(O){return O=S(this,O),w(O)?-1:_(O)?0:1};function b(O){for(var R=O.g.length,D=[],L=0;L<R;L++)D[L]=~O.g[L];return new s(D,~O.h).add(m)}n.abs=function(){return w(this)?b(this):this},n.add=function(O){for(var R=Math.max(this.g.length,O.g.length),D=[],L=0,F=0;F<=R;F++){var U=L+(this.i(F)&65535)+(O.i(F)&65535),B=(U>>>16)+(this.i(F)>>>16)+(O.i(F)>>>16);L=B>>>16,U&=65535,B&=65535,D[F]=B<<16|U}return new s(D,D[D.length-1]&-2147483648?-1:0)};function S(O,R){return O.add(b(R))}n.j=function(O){if(_(this)||_(O))return g;if(w(this))return w(O)?b(this).j(b(O)):b(b(this).j(O));if(w(O))return b(this.j(b(O)));if(0>this.l(v)&&0>O.l(v))return f(this.m()*O.m());for(var R=this.g.length+O.g.length,D=[],L=0;L<2*R;L++)D[L]=0;for(L=0;L<this.g.length;L++)for(var F=0;F<O.g.length;F++){var U=this.i(L)>>>16,B=this.i(L)&65535,rt=O.i(F)>>>16,vt=O.i(F)&65535;D[2*L+2*F]+=B*vt,C(D,2*L+2*F),D[2*L+2*F+1]+=U*vt,C(D,2*L+2*F+1),D[2*L+2*F+1]+=B*rt,C(D,2*L+2*F+1),D[2*L+2*F+2]+=U*rt,C(D,2*L+2*F+2)}for(L=0;L<R;L++)D[L]=D[2*L+1]<<16|D[2*L];for(L=R;L<2*R;L++)D[L]=0;return new s(D,0)};function C(O,R){for(;(O[R]&65535)!=O[R];)O[R+1]+=O[R]>>>16,O[R]&=65535,R++}function I(O,R){this.g=O,this.h=R}function M(O,R){if(_(R))throw Error("division by zero");if(_(O))return new I(g,g);if(w(O))return R=M(b(O),R),new I(b(R.g),b(R.h));if(w(R))return R=M(O,b(R)),new I(b(R.g),R.h);if(30<O.g.length){if(w(O)||w(R))throw Error("slowDivide_ only works with positive integers.");for(var D=m,L=R;0>=L.l(O);)D=N(D),L=N(L);var F=k(D,1),U=k(L,1);for(L=k(L,2),D=k(D,2);!_(L);){var B=U.add(L);0>=B.l(O)&&(F=F.add(D),U=B),L=k(L,1),D=k(D,1)}return R=S(O,F.j(R)),new I(F,R)}for(F=g;0<=O.l(R);){for(D=Math.max(1,Math.floor(O.m()/R.m())),L=Math.ceil(Math.log(D)/Math.LN2),L=48>=L?1:Math.pow(2,L-48),U=f(D),B=U.j(R);w(B)||0<B.l(O);)D-=L,U=f(D),B=U.j(R);_(U)&&(U=m),F=F.add(U),O=S(O,B)}return new I(F,O)}n.A=function(O){return M(this,O).h},n.and=function(O){for(var R=Math.max(this.g.length,O.g.length),D=[],L=0;L<R;L++)D[L]=this.i(L)&O.i(L);return new s(D,this.h&O.h)},n.or=function(O){for(var R=Math.max(this.g.length,O.g.length),D=[],L=0;L<R;L++)D[L]=this.i(L)|O.i(L);return new s(D,this.h|O.h)},n.xor=function(O){for(var R=Math.max(this.g.length,O.g.length),D=[],L=0;L<R;L++)D[L]=this.i(L)^O.i(L);return new s(D,this.h^O.h)};function N(O){for(var R=O.g.length+1,D=[],L=0;L<R;L++)D[L]=O.i(L)<<1|O.i(L-1)>>>31;return new s(D,O.h)}function k(O,R){var D=R>>5;R%=32;for(var L=O.g.length-D,F=[],U=0;U<L;U++)F[U]=0<R?O.i(U+D)>>>R|O.i(U+D+1)<<32-R:O.i(U+D);return new s(F,O.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,_I=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=f,s.fromString=d,mo=s}).apply(typeof ub<"u"?ub:typeof self<"u"?self:typeof window<"u"?window:{});var W0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var AI,ch,wI,A1,Ey,EI,bI,SI;(function(){var n,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(y,T,P){return y==Array.prototype||y==Object.prototype||(y[T]=P.value),y};function e(y){y=[typeof globalThis=="object"&&globalThis,y,typeof window=="object"&&window,typeof self=="object"&&self,typeof W0=="object"&&W0];for(var T=0;T<y.length;++T){var P=y[T];if(P&&P.Math==Math)return P}throw Error("Cannot find global object")}var r=e(this);function i(y,T){if(T)t:{var P=r;y=y.split(".");for(var z=0;z<y.length-1;z++){var K=y[z];if(!(K in P))break t;P=P[K]}y=y[y.length-1],z=P[y],T=T(z),T!=z&&T!=null&&t(P,y,{configurable:!0,writable:!0,value:T})}}function a(y,T){y instanceof String&&(y+="");var P=0,z=!1,K={next:function(){if(!z&&P<y.length){var at=P++;return{value:T(at,y[at]),done:!1}}return z=!0,{done:!0,value:void 0}}};return K[Symbol.iterator]=function(){return K},K}i("Array.prototype.values",function(y){return y||function(){return a(this,function(T,P){return P})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var s=s||{},l=this||self;function c(y){var T=typeof y;return T=T!="object"?T:y?Array.isArray(y)?"array":T:"null",T=="array"||T=="object"&&typeof y.length=="number"}function f(y){var T=typeof y;return T=="object"&&y!=null||T=="function"}function d(y,T,P){return y.call.apply(y.bind,arguments)}function g(y,T,P){if(!y)throw Error();if(2<arguments.length){var z=Array.prototype.slice.call(arguments,2);return function(){var K=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(K,z),y.apply(T,K)}}return function(){return y.apply(T,arguments)}}function m(y,T,P){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:g,m.apply(null,arguments)}function v(y,T){var P=Array.prototype.slice.call(arguments,1);return function(){var z=P.slice();return z.push.apply(z,arguments),y.apply(this,z)}}function _(y,T){function P(){}P.prototype=T.prototype,y.aa=T.prototype,y.prototype=new P,y.prototype.constructor=y,y.Qb=function(z,K,at){for(var yt=Array(arguments.length-2),ne=2;ne<arguments.length;ne++)yt[ne-2]=arguments[ne];return T.prototype[K].apply(z,yt)}}function w(y){const T=y.length;if(0<T){const P=Array(T);for(let z=0;z<T;z++)P[z]=y[z];return P}return[]}function b(y,T){for(let P=1;P<arguments.length;P++){const z=arguments[P];if(c(z)){const K=y.length||0,at=z.length||0;y.length=K+at;for(let yt=0;yt<at;yt++)y[K+yt]=z[yt]}else y.push(z)}}class S{constructor(T,P){this.i=T,this.j=P,this.h=0,this.g=null}get(){let T;return 0<this.h?(this.h--,T=this.g,this.g=T.next,T.next=null):T=this.i(),T}}function C(y){return/^[\s\xa0]*$/.test(y)}function I(){var y=l.navigator;return y&&(y=y.userAgent)?y:""}function M(y){return M[" "](y),y}M[" "]=function(){};var N=I().indexOf("Gecko")!=-1&&!(I().toLowerCase().indexOf("webkit")!=-1&&I().indexOf("Edge")==-1)&&!(I().indexOf("Trident")!=-1||I().indexOf("MSIE")!=-1)&&I().indexOf("Edge")==-1;function k(y,T,P){for(const z in y)T.call(P,y[z],z,y)}function O(y,T){for(const P in y)T.call(void 0,y[P],P,y)}function R(y){const T={};for(const P in y)T[P]=y[P];return T}const D="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function L(y,T){let P,z;for(let K=1;K<arguments.length;K++){z=arguments[K];for(P in z)y[P]=z[P];for(let at=0;at<D.length;at++)P=D[at],Object.prototype.hasOwnProperty.call(z,P)&&(y[P]=z[P])}}function F(y){var T=1;y=y.split(":");const P=[];for(;0<T&&y.length;)P.push(y.shift()),T--;return y.length&&P.push(y.join(":")),P}function U(y){l.setTimeout(()=>{throw y},0)}function B(){var y=pt;let T=null;return y.g&&(T=y.g,y.g=y.g.next,y.g||(y.h=null),T.next=null),T}class rt{constructor(){this.h=this.g=null}add(T,P){const z=vt.get();z.set(T,P),this.h?this.h.next=z:this.g=z,this.h=z}}var vt=new S(()=>new q,y=>y.reset());class q{constructor(){this.next=this.g=this.h=null}set(T,P){this.h=T,this.g=P,this.next=null}reset(){this.next=this.g=this.h=null}}let Z,it=!1,pt=new rt,_t=()=>{const y=l.Promise.resolve(void 0);Z=()=>{y.then(Mt)}};var Mt=()=>{for(var y;y=B();){try{y.h.call(y.g)}catch(P){U(P)}var T=vt;T.j(y),100>T.h&&(T.h++,y.next=T.g,T.g=y)}it=!1};function It(){this.s=this.s,this.C=this.C}It.prototype.s=!1,It.prototype.ma=function(){this.s||(this.s=!0,this.N())},It.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function wt(y,T){this.type=y,this.g=this.target=T,this.defaultPrevented=!1}wt.prototype.h=function(){this.defaultPrevented=!0};var zt=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var y=!1,T=Object.defineProperty({},"passive",{get:function(){y=!0}});try{const P=()=>{};l.addEventListener("test",P,T),l.removeEventListener("test",P,T)}catch{}return y}();function $t(y,T){if(wt.call(this,y?y.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,y){var P=this.type=y.type,z=y.changedTouches&&y.changedTouches.length?y.changedTouches[0]:null;if(this.target=y.target||y.srcElement,this.g=T,T=y.relatedTarget){if(N){t:{try{M(T.nodeName);var K=!0;break t}catch{}K=!1}K||(T=null)}}else P=="mouseover"?T=y.fromElement:P=="mouseout"&&(T=y.toElement);this.relatedTarget=T,z?(this.clientX=z.clientX!==void 0?z.clientX:z.pageX,this.clientY=z.clientY!==void 0?z.clientY:z.pageY,this.screenX=z.screenX||0,this.screenY=z.screenY||0):(this.clientX=y.clientX!==void 0?y.clientX:y.pageX,this.clientY=y.clientY!==void 0?y.clientY:y.pageY,this.screenX=y.screenX||0,this.screenY=y.screenY||0),this.button=y.button,this.key=y.key||"",this.ctrlKey=y.ctrlKey,this.altKey=y.altKey,this.shiftKey=y.shiftKey,this.metaKey=y.metaKey,this.pointerId=y.pointerId||0,this.pointerType=typeof y.pointerType=="string"?y.pointerType:ge[y.pointerType]||"",this.state=y.state,this.i=y,y.defaultPrevented&&$t.aa.h.call(this)}}_($t,wt);var ge={2:"touch",3:"pen",4:"mouse"};$t.prototype.h=function(){$t.aa.h.call(this);var y=this.i;y.preventDefault?y.preventDefault():y.returnValue=!1};var Ie="closure_listenable_"+(1e6*Math.random()|0),Ye=0;function ht(y,T,P,z,K){this.listener=y,this.proxy=null,this.src=T,this.type=P,this.capture=!!z,this.ha=K,this.key=++Ye,this.da=this.fa=!1}function Et(y){y.da=!0,y.listener=null,y.proxy=null,y.src=null,y.ha=null}function Rt(y){this.src=y,this.g={},this.h=0}Rt.prototype.add=function(y,T,P,z,K){var at=y.toString();y=this.g[at],y||(y=this.g[at]=[],this.h++);var yt=_e(y,T,z,K);return-1<yt?(T=y[yt],P||(T.fa=!1)):(T=new ht(T,this.src,at,!!z,K),T.fa=P,y.push(T)),T};function mt(y,T){var P=T.type;if(P in y.g){var z=y.g[P],K=Array.prototype.indexOf.call(z,T,void 0),at;(at=0<=K)&&Array.prototype.splice.call(z,K,1),at&&(Et(T),y.g[P].length==0&&(delete y.g[P],y.h--))}}function _e(y,T,P,z){for(var K=0;K<y.length;++K){var at=y[K];if(!at.da&&at.listener==T&&at.capture==!!P&&at.ha==z)return K}return-1}var Nt="closure_lm_"+(1e6*Math.random()|0),Pe={};function Ke(y,T,P,z,K){if(Array.isArray(T)){for(var at=0;at<T.length;at++)Ke(y,T[at],P,z,K);return null}return P=ql(P),y&&y[Ie]?y.K(T,P,f(z)?!!z.capture:!1,K):Ge(y,T,P,!1,z,K)}function Ge(y,T,P,z,K,at){if(!T)throw Error("Invalid event type");var yt=f(K)?!!K.capture:!!K,ne=ws(y);if(ne||(y[Nt]=ne=new Rt(y)),P=ne.add(T,P,z,yt,at),P.proxy)return P;if(z=ri(),P.proxy=z,z.src=y,z.listener=P,y.addEventListener)zt||(K=yt),K===void 0&&(K=!1),y.addEventListener(T.toString(),z,K);else if(y.attachEvent)y.attachEvent(Ea(T.toString()),z);else if(y.addListener&&y.removeListener)y.addListener(z);else throw Error("addEventListener and attachEvent are unavailable.");return P}function ri(){function y(P){return T.call(y.src,y.listener,P)}const T=zc;return y}function As(y,T,P,z,K){if(Array.isArray(T))for(var at=0;at<T.length;at++)As(y,T[at],P,z,K);else z=f(z)?!!z.capture:!!z,P=ql(P),y&&y[Ie]?(y=y.i,T=String(T).toString(),T in y.g&&(at=y.g[T],P=_e(at,P,z,K),-1<P&&(Et(at[P]),Array.prototype.splice.call(at,P,1),at.length==0&&(delete y.g[T],y.h--)))):y&&(y=ws(y))&&(T=y.g[T.toString()],y=-1,T&&(y=_e(T,P,z,K)),(P=-1<y?T[y]:null)&&wa(P))}function wa(y){if(typeof y!="number"&&y&&!y.da){var T=y.src;if(T&&T[Ie])mt(T.i,y);else{var P=y.type,z=y.proxy;T.removeEventListener?T.removeEventListener(P,z,y.capture):T.detachEvent?T.detachEvent(Ea(P),z):T.addListener&&T.removeListener&&T.removeListener(z),(P=ws(T))?(mt(P,y),P.h==0&&(P.src=null,T[Nt]=null)):Et(y)}}}function Ea(y){return y in Pe?Pe[y]:Pe[y]="on"+y}function zc(y,T){if(y.da)y=!0;else{T=new $t(T,this);var P=y.listener,z=y.ha||y.src;y.fa&&wa(y),y=P.call(z,T)}return y}function ws(y){return y=y[Nt],y instanceof Rt?y:null}var Po="__closure_events_fn_"+(1e9*Math.random()>>>0);function ql(y){return typeof y=="function"?y:(y[Po]||(y[Po]=function(T){return y.handleEvent(T)}),y[Po])}function $e(){It.call(this),this.i=new Rt(this),this.M=this,this.F=null}_($e,It),$e.prototype[Ie]=!0,$e.prototype.removeEventListener=function(y,T,P,z){As(this,y,T,P,z)};function ue(y,T){var P,z=y.F;if(z)for(P=[];z;z=z.F)P.push(z);if(y=y.M,z=T.type||T,typeof T=="string")T=new wt(T,y);else if(T instanceof wt)T.target=T.target||y;else{var K=T;T=new wt(z,y),L(T,K)}if(K=!0,P)for(var at=P.length-1;0<=at;at--){var yt=T.g=P[at];K=Vr(yt,z,!0,T)&&K}if(yt=T.g=y,K=Vr(yt,z,!0,T)&&K,K=Vr(yt,z,!1,T)&&K,P)for(at=0;at<P.length;at++)yt=T.g=P[at],K=Vr(yt,z,!1,T)&&K}$e.prototype.N=function(){if($e.aa.N.call(this),this.i){var y=this.i,T;for(T in y.g){for(var P=y.g[T],z=0;z<P.length;z++)Et(P[z]);delete y.g[T],y.h--}}this.F=null},$e.prototype.K=function(y,T,P,z){return this.i.add(String(y),T,!1,P,z)},$e.prototype.L=function(y,T,P,z){return this.i.add(String(y),T,!0,P,z)};function Vr(y,T,P,z){if(T=y.i.g[String(T)],!T)return!0;T=T.concat();for(var K=!0,at=0;at<T.length;++at){var yt=T[at];if(yt&&!yt.da&&yt.capture==P){var ne=yt.listener,_n=yt.ha||yt.src;yt.fa&&mt(y.i,yt),K=ne.call(_n,z)!==!1&&K}}return K&&!z.defaultPrevented}function ir(y,T,P){if(typeof y=="function")P&&(y=m(y,P));else if(y&&typeof y.handleEvent=="function")y=m(y.handleEvent,y);else throw Error("Invalid listener argument");return 2147483647<Number(T)?-1:l.setTimeout(y,T||0)}function Ed(y){y.g=ir(()=>{y.g=null,y.i&&(y.i=!1,Ed(y))},y.l);const T=y.h;y.h=null,y.m.apply(null,T)}class vp extends It{constructor(T,P){super(),this.m=T,this.l=P,this.h=null,this.i=!1,this.g=null}j(T){this.h=arguments,this.g?this.i=!0:Ed(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ko(y){It.call(this),this.h=y,this.g={}}_(ko,It);var Lo=[];function Bo(y){k(y.g,function(T,P){this.g.hasOwnProperty(P)&&wa(T)},y),y.g={}}ko.prototype.N=function(){ko.aa.N.call(this),Bo(this)},ko.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Si=l.JSON.stringify,Wl=l.JSON.parse,Vo=class{stringify(y){return l.JSON.stringify(y,void 0)}parse(y){return l.JSON.parse(y,void 0)}};function Hc(){}Hc.prototype.h=null;function Gc(y){return y.h||(y.h=y.i())}function $c(){}var ba={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Sa(){wt.call(this,"d")}_(Sa,wt);function qc(){wt.call(this,"c")}_(qc,wt);var Hi={},Wc=null;function Es(){return Wc=Wc||new $e}Hi.La="serverreachability";function Xl(y){wt.call(this,Hi.La,y)}_(Xl,wt);function bs(y){const T=Es();ue(T,new Xl(T))}Hi.STAT_EVENT="statevent";function bd(y,T){wt.call(this,Hi.STAT_EVENT,y),this.stat=T}_(bd,wt);function qe(y){const T=Es();ue(T,new bd(T,y))}Hi.Ma="timingevent";function xn(y,T){wt.call(this,Hi.Ma,y),this.size=T}_(xn,wt);function un(y,T){if(typeof y!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){y()},T)}function ii(){this.g=!0}ii.prototype.xa=function(){this.g=!1};function Xc(y,T,P,z,K,at){y.info(function(){if(y.g)if(at)for(var yt="",ne=at.split("&"),_n=0;_n<ne.length;_n++){var re=ne[_n].split("=");if(1<re.length){var Bn=re[0];re=re[1];var An=Bn.split("_");yt=2<=An.length&&An[1]=="type"?yt+(Bn+"="+re+"&"):yt+(Bn+"=redacted&")}}else yt=null;else yt=at;return"XMLHTTP REQ ("+z+") [attempt "+K+"]: "+T+`
`+P+`
`+yt})}function yp(y,T,P,z,K,at,yt){y.info(function(){return"XMLHTTP RESP ("+z+") [ attempt "+K+"]: "+T+`
`+P+`
`+at+" "+yt})}function Ss(y,T,P,z){y.info(function(){return"XMLHTTP TEXT ("+T+"): "+Fo(y,P)+(z?" "+z:"")})}function Sd(y,T){y.info(function(){return"TIMEOUT: "+T})}ii.prototype.info=function(){};function Fo(y,T){if(!y.g)return T;if(!T)return null;try{var P=JSON.parse(T);if(P){for(y=0;y<P.length;y++)if(Array.isArray(P[y])){var z=P[y];if(!(2>z.length)){var K=z[1];if(Array.isArray(K)&&!(1>K.length)){var at=K[0];if(at!="noop"&&at!="stop"&&at!="close")for(var yt=1;yt<K.length;yt++)K[yt]=""}}}}return Si(P)}catch{return T}}var Ts={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ta={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Gi;function $i(){}_($i,Hc),$i.prototype.g=function(){return new XMLHttpRequest},$i.prototype.i=function(){return{}},Gi=new $i;function mr(y,T,P,z){this.j=y,this.i=T,this.l=P,this.R=z||1,this.U=new ko(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new en}function en(){this.i=null,this.g="",this.h=!1}var Yc={},Yl={};function Ti(y,T,P){y.L=1,y.v=Go(Fr(T)),y.m=P,y.P=!0,Ca(y,null)}function Ca(y,T){y.F=Date.now(),Uo(y),y.A=Fr(y.v);var P=y.A,z=y.R;Array.isArray(z)||(z=[String(z)]),ef(P.i,"t",z),y.C=0,P=y.j.J,y.h=new en,y.g=jd(y.j,P?T:null,!y.m),0<y.O&&(y.M=new vp(m(y.Y,y,y.g),y.O)),T=y.U,P=y.g,z=y.ca;var K="readystatechange";Array.isArray(K)||(K&&(Lo[0]=K.toString()),K=Lo);for(var at=0;at<K.length;at++){var yt=Ke(P,K[at],z||T.handleEvent,!1,T.h||T);if(!yt)break;T.g[yt.key]=yt}T=y.H?R(y.H):{},y.m?(y.u||(y.u="POST"),T["Content-Type"]="application/x-www-form-urlencoded",y.g.ea(y.A,y.u,y.m,T)):(y.u="GET",y.g.ea(y.A,y.u,null,T)),bs(),Xc(y.i,y.u,y.A,y.l,y.R,y.m)}mr.prototype.ca=function(y){y=y.target;const T=this.M;T&&li(y)==3?T.j():this.Y(y)},mr.prototype.Y=function(y){try{if(y==this.g)t:{const An=li(this.g);var T=this.g.Ba();const ka=this.g.Z();if(!(3>An)&&(An!=3||this.g&&(this.h.h||this.g.oa()||Nd(this.g)))){this.J||An!=4||T==7||(T==8||0>=ka?bs(3):bs(2)),Cs(this);var P=this.g.Z();this.X=P;e:if(Td(this)){var z=Nd(this.g);y="";var K=z.length,at=li(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Wn(this),qi(this);var yt="";break e}this.h.i=new l.TextDecoder}for(T=0;T<K;T++)this.h.h=!0,y+=this.h.i.decode(z[T],{stream:!(at&&T==K-1)});z.length=0,this.h.g+=y,this.C=0,yt=this.h.g}else yt=this.g.oa();if(this.o=P==200,yp(this.i,this.u,this.A,this.l,this.R,An,P),this.o){if(this.T&&!this.K){e:{if(this.g){var ne,_n=this.g;if((ne=_n.g?_n.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!C(ne)){var re=ne;break e}}re=null}if(P=re)Ss(this.i,this.l,P,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,jo(this,P);else{this.o=!1,this.s=3,qe(12),Wn(this),qi(this);break t}}if(this.P){P=!0;let Xn;for(;!this.J&&this.C<yt.length;)if(Xn=Cd(this,yt),Xn==Yl){An==4&&(this.s=4,qe(14),P=!1),Ss(this.i,this.l,null,"[Incomplete Response]");break}else if(Xn==Yc){this.s=4,qe(15),Ss(this.i,this.l,yt,"[Invalid Chunk]"),P=!1;break}else Ss(this.i,this.l,Xn,null),jo(this,Xn);if(Td(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),An!=4||yt.length!=0||this.h.h||(this.s=1,qe(16),P=!1),this.o=this.o&&P,!P)Ss(this.i,this.l,yt,"[Invalid Chunked Response]"),Wn(this),qi(this);else if(0<yt.length&&!this.W){this.W=!0;var Bn=this.j;Bn.g==this&&Bn.ba&&!Bn.M&&(Bn.j.info("Great, no buffering proxy detected. Bytes received: "+yt.length),Qo(Bn),Bn.M=!0,qe(11))}}else Ss(this.i,this.l,yt,null),jo(this,yt);An==4&&Wn(this),this.o&&!this.J&&(An==4?Vd(this.j,this):(this.o=!1,Uo(this)))}else Ep(this.g),P==400&&0<yt.indexOf("Unknown SID")?(this.s=3,qe(12)):(this.s=0,qe(13)),Wn(this),qi(this)}}}catch{}finally{}};function Td(y){return y.g?y.u=="GET"&&y.L!=2&&y.j.Ca:!1}function Cd(y,T){var P=y.C,z=T.indexOf(`
`,P);return z==-1?Yl:(P=Number(T.substring(P,z)),isNaN(P)?Yc:(z+=1,z+P>T.length?Yl:(T=T.slice(z,z+P),y.C=z+P,T)))}mr.prototype.cancel=function(){this.J=!0,Wn(this)};function Uo(y){y.S=Date.now()+y.I,Id(y,y.I)}function Id(y,T){if(y.B!=null)throw Error("WatchDog timer not null");y.B=un(m(y.ba,y),T)}function Cs(y){y.B&&(l.clearTimeout(y.B),y.B=null)}mr.prototype.ba=function(){this.B=null;const y=Date.now();0<=y-this.S?(Sd(this.i,this.A),this.L!=2&&(bs(),qe(17)),Wn(this),this.s=2,qi(this)):Id(this,this.S-y)};function qi(y){y.j.G==0||y.J||Vd(y.j,y)}function Wn(y){Cs(y);var T=y.M;T&&typeof T.ma=="function"&&T.ma(),y.M=null,Bo(y.U),y.g&&(T=y.g,y.g=null,T.abort(),T.ma())}function jo(y,T){try{var P=y.j;if(P.G!=0&&(P.g==y||Kc(P.h,y))){if(!y.K&&Kc(P.h,y)&&P.G==3){try{var z=P.Da.g.parse(T)}catch{z=null}if(Array.isArray(z)&&z.length==3){var K=z;if(K[0]==0){t:if(!P.u){if(P.g)if(P.g.F+3e3<y.F)ou(P),au(P);else break t;of(P),qe(18)}}else P.za=K[1],0<P.za-P.T&&37500>K[2]&&P.F&&P.v==0&&!P.C&&(P.C=un(m(P.Za,P),6e3));if(1>=Zl(P.h)&&P.ca){try{P.ca()}catch{}P.ca=void 0}}else Pa(P,11)}else if((y.K||P.g==y)&&ou(P),!C(T))for(K=P.Da.g.parse(T),T=0;T<K.length;T++){let re=K[T];if(P.T=re[0],re=re[1],P.G==2)if(re[0]=="c"){P.K=re[1],P.ia=re[2];const Bn=re[3];Bn!=null&&(P.la=Bn,P.j.info("VER="+P.la));const An=re[4];An!=null&&(P.Aa=An,P.j.info("SVER="+P.Aa));const ka=re[5];ka!=null&&typeof ka=="number"&&0<ka&&(z=1.5*ka,P.L=z,P.j.info("backChannelRequestTimeoutMs_="+z)),z=P;const Xn=y.g;if(Xn){const Ji=Xn.g?Xn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ji){var at=z.h;at.g||Ji.indexOf("spdy")==-1&&Ji.indexOf("quic")==-1&&Ji.indexOf("h2")==-1||(at.j=at.l,at.g=new Set,at.h&&(Ql(at,at.h),at.h=null))}if(z.D){const uf=Xn.g?Xn.g.getResponseHeader("X-HTTP-Session-Id"):null;uf&&(z.ya=uf,Re(z.I,z.D,uf))}}P.G=3,P.l&&P.l.ua(),P.ba&&(P.R=Date.now()-y.F,P.j.info("Handshake RTT: "+P.R+"ms")),z=P;var yt=y;if(z.qa=Ud(z,z.J?z.ia:null,z.W),yt.K){vr(z.h,yt);var ne=yt,_n=z.L;_n&&(ne.I=_n),ne.B&&(Cs(ne),Uo(ne)),z.g=yt}else Ld(z);0<P.i.length&&su(P)}else re[0]!="stop"&&re[0]!="close"||Pa(P,7);else P.G==3&&(re[0]=="stop"||re[0]=="close"?re[0]=="stop"?Pa(P,7):af(P):re[0]!="noop"&&P.l&&P.l.ta(re),P.v=0)}}bs(4)}catch{}}var Rd=class{constructor(y,T){this.g=y,this.map=T}};function Ia(y){this.l=y||10,l.PerformanceNavigationTiming?(y=l.performance.getEntriesByType("navigation"),y=0<y.length&&(y[0].nextHopProtocol=="hq"||y[0].nextHopProtocol=="h2")):y=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=y?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Kl(y){return y.h?!0:y.g?y.g.size>=y.j:!1}function Zl(y){return y.h?1:y.g?y.g.size:0}function Kc(y,T){return y.h?y.h==T:y.g?y.g.has(T):!1}function Ql(y,T){y.g?y.g.add(T):y.h=T}function vr(y,T){y.h&&y.h==T?y.h=null:y.g&&y.g.has(T)&&y.g.delete(T)}Ia.prototype.cancel=function(){if(this.i=Zc(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const y of this.g.values())y.cancel();this.g.clear()}};function Zc(y){if(y.h!=null)return y.i.concat(y.h.D);if(y.g!=null&&y.g.size!==0){let T=y.i;for(const P of y.g.values())T=T.concat(P.D);return T}return w(y.i)}function xp(y){if(y.V&&typeof y.V=="function")return y.V();if(typeof Map<"u"&&y instanceof Map||typeof Set<"u"&&y instanceof Set)return Array.from(y.values());if(typeof y=="string")return y.split("");if(c(y)){for(var T=[],P=y.length,z=0;z<P;z++)T.push(y[z]);return T}T=[],P=0;for(z in y)T[P++]=y[z];return T}function Jl(y){if(y.na&&typeof y.na=="function")return y.na();if(!y.V||typeof y.V!="function"){if(typeof Map<"u"&&y instanceof Map)return Array.from(y.keys());if(!(typeof Set<"u"&&y instanceof Set)){if(c(y)||typeof y=="string"){var T=[];y=y.length;for(var P=0;P<y;P++)T.push(P);return T}T=[],P=0;for(const z in y)T[P++]=z;return T}}}function Qc(y,T){if(y.forEach&&typeof y.forEach=="function")y.forEach(T,void 0);else if(c(y)||typeof y=="string")Array.prototype.forEach.call(y,T,void 0);else for(var P=Jl(y),z=xp(y),K=z.length,at=0;at<K;at++)T.call(void 0,z[at],P&&P[at],y)}var zo=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function _p(y,T){if(y){y=y.split("&");for(var P=0;P<y.length;P++){var z=y[P].indexOf("="),K=null;if(0<=z){var at=y[P].substring(0,z);K=y[P].substring(z+1)}else at=y[P];T(at,K?decodeURIComponent(K.replace(/\+/g," ")):"")}}}function cn(y){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,y instanceof cn){this.h=y.h,Ho(this,y.j),this.o=y.o,this.g=y.g,Is(this,y.s),this.l=y.l;var T=y.i,P=new Da;P.i=T.i,T.g&&(P.g=new Map(T.g),P.h=T.h),Ra(this,P),this.m=y.m}else y&&(T=String(y).match(zo))?(this.h=!1,Ho(this,T[1]||"",!0),this.o=ai(T[2]||""),this.g=ai(T[3]||"",!0),Is(this,T[4]),this.l=ai(T[5]||"",!0),Ra(this,T[6]||"",!0),this.m=ai(T[7]||"")):(this.h=!1,this.i=new Da(null,this.h))}cn.prototype.toString=function(){var y=[],T=this.j;T&&y.push($o(T,Jc,!0),":");var P=this.g;return(P||T=="file")&&(y.push("//"),(T=this.o)&&y.push($o(T,Jc,!0),"@"),y.push(encodeURIComponent(String(P)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),P=this.s,P!=null&&y.push(":",String(P))),(P=this.l)&&(this.g&&P.charAt(0)!="/"&&y.push("/"),y.push($o(P,P.charAt(0)=="/"?Ap:tf,!0))),(P=this.i.toString())&&y.push("?",P),(P=this.m)&&y.push("#",$o(P,tu)),y.join("")};function Fr(y){return new cn(y)}function Ho(y,T,P){y.j=P?ai(T,!0):T,y.j&&(y.j=y.j.replace(/:$/,""))}function Is(y,T){if(T){if(T=Number(T),isNaN(T)||0>T)throw Error("Bad port number "+T);y.s=T}else y.s=null}function Ra(y,T,P){T instanceof Da?(y.i=T,Od(y.i,y.h)):(P||(T=$o(T,wp)),y.i=new Da(T,y.h))}function Re(y,T,P){y.i.set(T,P)}function Go(y){return Re(y,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),y}function ai(y,T){return y?T?decodeURI(y.replace(/%25/g,"%2525")):decodeURIComponent(y):""}function $o(y,T,P){return typeof y=="string"?(y=encodeURI(y).replace(T,Dd),P&&(y=y.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),y):null}function Dd(y){return y=y.charCodeAt(0),"%"+(y>>4&15).toString(16)+(y&15).toString(16)}var Jc=/[#\/\?@]/g,tf=/[#\?:]/g,Ap=/[#\?]/g,wp=/[#\?@]/g,tu=/#/g;function Da(y,T){this.h=this.g=null,this.i=y||null,this.j=!!T}function si(y){y.g||(y.g=new Map,y.h=0,y.i&&_p(y.i,function(T,P){y.add(decodeURIComponent(T.replace(/\+/g," ")),P)}))}n=Da.prototype,n.add=function(y,T){si(this),this.i=null,y=Wi(this,y);var P=this.g.get(y);return P||this.g.set(y,P=[]),P.push(T),this.h+=1,this};function Oa(y,T){si(y),T=Wi(y,T),y.g.has(T)&&(y.i=null,y.h-=y.g.get(T).length,y.g.delete(T))}function Ma(y,T){return si(y),T=Wi(y,T),y.g.has(T)}n.forEach=function(y,T){si(this),this.g.forEach(function(P,z){P.forEach(function(K){y.call(T,K,z,this)},this)},this)},n.na=function(){si(this);const y=Array.from(this.g.values()),T=Array.from(this.g.keys()),P=[];for(let z=0;z<T.length;z++){const K=y[z];for(let at=0;at<K.length;at++)P.push(T[z])}return P},n.V=function(y){si(this);let T=[];if(typeof y=="string")Ma(this,y)&&(T=T.concat(this.g.get(Wi(this,y))));else{y=Array.from(this.g.values());for(let P=0;P<y.length;P++)T=T.concat(y[P])}return T},n.set=function(y,T){return si(this),this.i=null,y=Wi(this,y),Ma(this,y)&&(this.h-=this.g.get(y).length),this.g.set(y,[T]),this.h+=1,this},n.get=function(y,T){return y?(y=this.V(y),0<y.length?String(y[0]):T):T};function ef(y,T,P){Oa(y,T),0<P.length&&(y.i=null,y.g.set(Wi(y,T),w(P)),y.h+=P.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const y=[],T=Array.from(this.g.keys());for(var P=0;P<T.length;P++){var z=T[P];const at=encodeURIComponent(String(z)),yt=this.V(z);for(z=0;z<yt.length;z++){var K=at;yt[z]!==""&&(K+="="+encodeURIComponent(String(yt[z]))),y.push(K)}}return this.i=y.join("&")};function Wi(y,T){return T=String(T),y.j&&(T=T.toLowerCase()),T}function Od(y,T){T&&!y.j&&(si(y),y.i=null,y.g.forEach(function(P,z){var K=z.toLowerCase();z!=K&&(Oa(this,z),ef(this,K,P))},y)),y.j=T}function qo(y,T){const P=new ii;if(l.Image){const z=new Image;z.onload=v(oi,P,"TestLoadImage: loaded",!0,T,z),z.onerror=v(oi,P,"TestLoadImage: error",!1,T,z),z.onabort=v(oi,P,"TestLoadImage: abort",!1,T,z),z.ontimeout=v(oi,P,"TestLoadImage: timeout",!1,T,z),l.setTimeout(function(){z.ontimeout&&z.ontimeout()},1e4),z.src=y}else T(!1)}function Ci(y,T){const P=new ii,z=new AbortController,K=setTimeout(()=>{z.abort(),oi(P,"TestPingServer: timeout",!1,T)},1e4);fetch(y,{signal:z.signal}).then(at=>{clearTimeout(K),at.ok?oi(P,"TestPingServer: ok",!0,T):oi(P,"TestPingServer: server error",!1,T)}).catch(()=>{clearTimeout(K),oi(P,"TestPingServer: error",!1,T)})}function oi(y,T,P,z,K){try{K&&(K.onload=null,K.onerror=null,K.onabort=null,K.ontimeout=null),z(P)}catch{}}function Wo(){this.g=new Vo}function Xi(y,T,P){const z=P||"";try{Qc(y,function(K,at){let yt=K;f(K)&&(yt=Si(K)),T.push(z+at+"="+encodeURIComponent(yt))})}catch(K){throw T.push(z+"type="+encodeURIComponent("_badmap")),K}}function Rs(y){this.l=y.Ub||null,this.j=y.eb||!1}_(Rs,Hc),Rs.prototype.g=function(){return new Na(this.l,this.j)},Rs.prototype.i=function(y){return function(){return y}}({});function Na(y,T){$e.call(this),this.D=y,this.o=T,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}_(Na,$e),n=Na.prototype,n.open=function(y,T){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=y,this.A=T,this.readyState=1,Ki(this)},n.send=function(y){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const T={headers:this.u,method:this.B,credentials:this.m,cache:void 0};y&&(T.body=y),(this.D||l).fetch(new Request(this.A,T)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Yi(this)),this.readyState=0},n.Sa=function(y){if(this.g&&(this.l=y,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=y.headers,this.readyState=2,Ki(this)),this.g&&(this.readyState=3,Ki(this),this.g)))if(this.responseType==="arraybuffer")y.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in y){if(this.j=y.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;nf(this)}else y.text().then(this.Ra.bind(this),this.ga.bind(this))};function nf(y){y.j.read().then(y.Pa.bind(y)).catch(y.ga.bind(y))}n.Pa=function(y){if(this.g){if(this.o&&y.value)this.response.push(y.value);else if(!this.o){var T=y.value?y.value:new Uint8Array(0);(T=this.v.decode(T,{stream:!y.done}))&&(this.response=this.responseText+=T)}y.done?Yi(this):Ki(this),this.readyState==3&&nf(this)}},n.Ra=function(y){this.g&&(this.response=this.responseText=y,Yi(this))},n.Qa=function(y){this.g&&(this.response=y,Yi(this))},n.ga=function(){this.g&&Yi(this)};function Yi(y){y.readyState=4,y.l=null,y.j=null,y.v=null,Ki(y)}n.setRequestHeader=function(y,T){this.u.append(y,T)},n.getResponseHeader=function(y){return this.h&&this.h.get(y.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const y=[],T=this.h.entries();for(var P=T.next();!P.done;)P=P.value,y.push(P[0]+": "+P[1]),P=T.next();return y.join(`\r
`)};function Ki(y){y.onreadystatechange&&y.onreadystatechange.call(y)}Object.defineProperty(Na.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(y){this.m=y?"include":"same-origin"}});function rf(y){let T="";return k(y,function(P,z){T+=z,T+=":",T+=P,T+=`\r
`}),T}function Ln(y,T,P){t:{for(z in P){var z=!1;break t}z=!0}z||(P=rf(P),typeof y=="string"?P!=null&&encodeURIComponent(String(P)):Re(y,T,P))}function Ae(y){$e.call(this),this.headers=new Map,this.o=y||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}_(Ae,$e);var eu=/^https?$/i,Xo=["POST","PUT"];n=Ae.prototype,n.Ha=function(y){this.J=y},n.ea=function(y,T,P,z){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+y);T=T?T.toUpperCase():"GET",this.D=y,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Gi.g(),this.v=this.o?Gc(this.o):Gc(Gi),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(T,String(y),!0),this.B=!1}catch(at){Md(this,at);return}if(y=P||"",P=new Map(this.headers),z)if(Object.getPrototypeOf(z)===Object.prototype)for(var K in z)P.set(K,z[K]);else if(typeof z.keys=="function"&&typeof z.get=="function")for(const at of z.keys())P.set(at,z.get(at));else throw Error("Unknown input type for opt_headers: "+String(z));z=Array.from(P.keys()).find(at=>at.toLowerCase()=="content-type"),K=l.FormData&&y instanceof l.FormData,!(0<=Array.prototype.indexOf.call(Xo,T,void 0))||z||K||P.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[at,yt]of P)this.g.setRequestHeader(at,yt);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Yo(this),this.u=!0,this.g.send(y),this.u=!1}catch(at){Md(this,at)}};function Md(y,T){y.h=!1,y.g&&(y.j=!0,y.g.abort(),y.j=!1),y.l=T,y.m=5,nu(y),Zi(y)}function nu(y){y.A||(y.A=!0,ue(y,"complete"),ue(y,"error"))}n.abort=function(y){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=y||7,ue(this,"complete"),ue(this,"abort"),Zi(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Zi(this,!0)),Ae.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?ru(this):this.bb())},n.bb=function(){ru(this)};function ru(y){if(y.h&&typeof s<"u"&&(!y.v[1]||li(y)!=4||y.Z()!=2)){if(y.u&&li(y)==4)ir(y.Ea,0,y);else if(ue(y,"readystatechange"),li(y)==4){y.h=!1;try{const yt=y.Z();t:switch(yt){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var T=!0;break t;default:T=!1}var P;if(!(P=T)){var z;if(z=yt===0){var K=String(y.D).match(zo)[1]||null;!K&&l.self&&l.self.location&&(K=l.self.location.protocol.slice(0,-1)),z=!eu.test(K?K.toLowerCase():"")}P=z}if(P)ue(y,"complete"),ue(y,"success");else{y.m=6;try{var at=2<li(y)?y.g.statusText:""}catch{at=""}y.l=at+" ["+y.Z()+"]",nu(y)}}finally{Zi(y)}}}}function Zi(y,T){if(y.g){Yo(y);const P=y.g,z=y.v[0]?()=>{}:null;y.g=null,y.v=null,T||ue(y,"ready");try{P.onreadystatechange=z}catch{}}}function Yo(y){y.I&&(l.clearTimeout(y.I),y.I=null)}n.isActive=function(){return!!this.g};function li(y){return y.g?y.g.readyState:0}n.Z=function(){try{return 2<li(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(y){if(this.g){var T=this.g.responseText;return y&&T.indexOf(y)==0&&(T=T.substring(y.length)),Wl(T)}};function Nd(y){try{if(!y.g)return null;if("response"in y.g)return y.g.response;switch(y.H){case"":case"text":return y.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in y.g)return y.g.mozResponseArrayBuffer}return null}catch{return null}}function Ep(y){const T={};y=(y.g&&2<=li(y)&&y.g.getAllResponseHeaders()||"").split(`\r
`);for(let z=0;z<y.length;z++){if(C(y[z]))continue;var P=F(y[z]);const K=P[0];if(P=P[1],typeof P!="string")continue;P=P.trim();const at=T[K]||[];T[K]=at,at.push(P)}O(T,function(z){return z.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ko(y,T,P){return P&&P.internalChannelParams&&P.internalChannelParams[y]||T}function iu(y){this.Aa=0,this.i=[],this.j=new ii,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ko("failFast",!1,y),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ko("baseRetryDelayMs",5e3,y),this.cb=Ko("retryDelaySeedMs",1e4,y),this.Wa=Ko("forwardChannelMaxRetries",2,y),this.wa=Ko("forwardChannelRequestTimeoutMs",2e4,y),this.pa=y&&y.xmlHttpFactory||void 0,this.Xa=y&&y.Tb||void 0,this.Ca=y&&y.useFetchStreams||!1,this.L=void 0,this.J=y&&y.supportsCrossDomainXhr||!1,this.K="",this.h=new Ia(y&&y.concurrentRequestLimit),this.Da=new Wo,this.P=y&&y.fastHandshake||!1,this.O=y&&y.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=y&&y.Rb||!1,y&&y.xa&&this.j.xa(),y&&y.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&y&&y.detectBufferingProxy||!1,this.ja=void 0,y&&y.longPollingTimeout&&0<y.longPollingTimeout&&(this.ja=y.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=iu.prototype,n.la=8,n.G=1,n.connect=function(y,T,P,z){qe(0),this.W=y,this.H=T||{},P&&z!==void 0&&(this.H.OSID=P,this.H.OAID=z),this.F=this.X,this.I=Ud(this,null,this.W),su(this)};function af(y){if(Pd(y),y.G==3){var T=y.U++,P=Fr(y.I);if(Re(P,"SID",y.K),Re(P,"RID",T),Re(P,"TYPE","terminate"),Zo(y,P),T=new mr(y,y.j,T),T.L=2,T.v=Go(Fr(P)),P=!1,l.navigator&&l.navigator.sendBeacon)try{P=l.navigator.sendBeacon(T.v.toString(),"")}catch{}!P&&l.Image&&(new Image().src=T.v,P=!0),P||(T.g=jd(T.j,null),T.g.ea(T.v)),T.F=Date.now(),Uo(T)}Fd(y)}function au(y){y.g&&(Qo(y),y.g.cancel(),y.g=null)}function Pd(y){au(y),y.u&&(l.clearTimeout(y.u),y.u=null),ou(y),y.h.cancel(),y.s&&(typeof y.s=="number"&&l.clearTimeout(y.s),y.s=null)}function su(y){if(!Kl(y.h)&&!y.s){y.s=!0;var T=y.Ga;Z||_t(),it||(Z(),it=!0),pt.add(T,y),y.B=0}}function bp(y,T){return Zl(y.h)>=y.h.j-(y.s?1:0)?!1:y.s?(y.i=T.D.concat(y.i),!0):y.G==1||y.G==2||y.B>=(y.Va?0:y.Wa)?!1:(y.s=un(m(y.Ga,y,T),lf(y,y.B)),y.B++,!0)}n.Ga=function(y){if(this.s)if(this.s=null,this.G==1){if(!y){this.U=Math.floor(1e5*Math.random()),y=this.U++;const K=new mr(this,this.j,y);let at=this.o;if(this.S&&(at?(at=R(at),L(at,this.S)):at=this.S),this.m!==null||this.O||(K.H=at,at=null),this.P)t:{for(var T=0,P=0;P<this.i.length;P++){e:{var z=this.i[P];if("__data__"in z.map&&(z=z.map.__data__,typeof z=="string")){z=z.length;break e}z=void 0}if(z===void 0)break;if(T+=z,4096<T){T=P;break t}if(T===4096||P===this.i.length-1){T=P+1;break t}}T=1e3}else T=1e3;T=kd(this,K,T),P=Fr(this.I),Re(P,"RID",y),Re(P,"CVER",22),this.D&&Re(P,"X-HTTP-Session-Id",this.D),Zo(this,P),at&&(this.O?T="headers="+encodeURIComponent(String(rf(at)))+"&"+T:this.m&&Ln(P,this.m,at)),Ql(this.h,K),this.Ua&&Re(P,"TYPE","init"),this.P?(Re(P,"$req",T),Re(P,"SID","null"),K.T=!0,Ti(K,P,null)):Ti(K,P,T),this.G=2}}else this.G==3&&(y?sf(this,y):this.i.length==0||Kl(this.h)||sf(this))};function sf(y,T){var P;T?P=T.l:P=y.U++;const z=Fr(y.I);Re(z,"SID",y.K),Re(z,"RID",P),Re(z,"AID",y.T),Zo(y,z),y.m&&y.o&&Ln(z,y.m,y.o),P=new mr(y,y.j,P,y.B+1),y.m===null&&(P.H=y.o),T&&(y.i=T.D.concat(y.i)),T=kd(y,P,1e3),P.I=Math.round(.5*y.wa)+Math.round(.5*y.wa*Math.random()),Ql(y.h,P),Ti(P,z,T)}function Zo(y,T){y.H&&k(y.H,function(P,z){Re(T,z,P)}),y.l&&Qc({},function(P,z){Re(T,z,P)})}function kd(y,T,P){P=Math.min(y.i.length,P);var z=y.l?m(y.l.Na,y.l,y):null;t:{var K=y.i;let at=-1;for(;;){const yt=["count="+P];at==-1?0<P?(at=K[0].g,yt.push("ofs="+at)):at=0:yt.push("ofs="+at);let ne=!0;for(let _n=0;_n<P;_n++){let re=K[_n].g;const Bn=K[_n].map;if(re-=at,0>re)at=Math.max(0,K[_n].g-100),ne=!1;else try{Xi(Bn,yt,"req"+re+"_")}catch{z&&z(Bn)}}if(ne){z=yt.join("&");break t}}}return y=y.i.splice(0,P),T.D=y,z}function Ld(y){if(!y.g&&!y.u){y.Y=1;var T=y.Fa;Z||_t(),it||(Z(),it=!0),pt.add(T,y),y.v=0}}function of(y){return y.g||y.u||3<=y.v?!1:(y.Y++,y.u=un(m(y.Fa,y),lf(y,y.v)),y.v++,!0)}n.Fa=function(){if(this.u=null,Bd(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var y=2*this.R;this.j.info("BP detection timer enabled: "+y),this.A=un(m(this.ab,this),y)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,qe(10),au(this),Bd(this))};function Qo(y){y.A!=null&&(l.clearTimeout(y.A),y.A=null)}function Bd(y){y.g=new mr(y,y.j,"rpc",y.Y),y.m===null&&(y.g.H=y.o),y.g.O=0;var T=Fr(y.qa);Re(T,"RID","rpc"),Re(T,"SID",y.K),Re(T,"AID",y.T),Re(T,"CI",y.F?"0":"1"),!y.F&&y.ja&&Re(T,"TO",y.ja),Re(T,"TYPE","xmlhttp"),Zo(y,T),y.m&&y.o&&Ln(T,y.m,y.o),y.L&&(y.g.I=y.L);var P=y.g;y=y.ia,P.L=1,P.v=Go(Fr(T)),P.m=null,P.P=!0,Ca(P,y)}n.Za=function(){this.C!=null&&(this.C=null,au(this),of(this),qe(19))};function ou(y){y.C!=null&&(l.clearTimeout(y.C),y.C=null)}function Vd(y,T){var P=null;if(y.g==T){ou(y),Qo(y),y.g=null;var z=2}else if(Kc(y.h,T))P=T.D,vr(y.h,T),z=1;else return;if(y.G!=0){if(T.o)if(z==1){P=T.m?T.m.length:0,T=Date.now()-T.F;var K=y.B;z=Es(),ue(z,new xn(z,P)),su(y)}else Ld(y);else if(K=T.s,K==3||K==0&&0<T.X||!(z==1&&bp(y,T)||z==2&&of(y)))switch(P&&0<P.length&&(T=y.h,T.i=T.i.concat(P)),K){case 1:Pa(y,5);break;case 4:Pa(y,10);break;case 3:Pa(y,6);break;default:Pa(y,2)}}}function lf(y,T){let P=y.Ta+Math.floor(Math.random()*y.cb);return y.isActive()||(P*=2),P*T}function Pa(y,T){if(y.j.info("Error code "+T),T==2){var P=m(y.fb,y),z=y.Xa;const K=!z;z=new cn(z||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||Ho(z,"https"),Go(z),K?qo(z.toString(),P):Ci(z.toString(),P)}else qe(2);y.G=0,y.l&&y.l.sa(T),Fd(y),Pd(y)}n.fb=function(y){y?(this.j.info("Successfully pinged google.com"),qe(2)):(this.j.info("Failed to ping google.com"),qe(1))};function Fd(y){if(y.G=0,y.ka=[],y.l){const T=Zc(y.h);(T.length!=0||y.i.length!=0)&&(b(y.ka,T),b(y.ka,y.i),y.h.i.length=0,w(y.i),y.i.length=0),y.l.ra()}}function Ud(y,T,P){var z=P instanceof cn?Fr(P):new cn(P);if(z.g!="")T&&(z.g=T+"."+z.g),Is(z,z.s);else{var K=l.location;z=K.protocol,T=T?T+"."+K.hostname:K.hostname,K=+K.port;var at=new cn(null);z&&Ho(at,z),T&&(at.g=T),K&&Is(at,K),P&&(at.l=P),z=at}return P=y.D,T=y.ya,P&&T&&Re(z,P,T),Re(z,"VER",y.la),Zo(y,z),z}function jd(y,T,P){if(T&&!y.J)throw Error("Can't create secondary domain capable XhrIo object.");return T=y.Ca&&!y.pa?new Ae(new Rs({eb:P})):new Ae(y.pa),T.Ha(y.J),T}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function zd(){}n=zd.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function lu(){}lu.prototype.g=function(y,T){return new yr(y,T)};function yr(y,T){$e.call(this),this.g=new iu(T),this.l=y,this.h=T&&T.messageUrlParams||null,y=T&&T.messageHeaders||null,T&&T.clientProtocolHeaderRequired&&(y?y["X-Client-Protocol"]="webchannel":y={"X-Client-Protocol":"webchannel"}),this.g.o=y,y=T&&T.initMessageHeaders||null,T&&T.messageContentType&&(y?y["X-WebChannel-Content-Type"]=T.messageContentType:y={"X-WebChannel-Content-Type":T.messageContentType}),T&&T.va&&(y?y["X-WebChannel-Client-Profile"]=T.va:y={"X-WebChannel-Client-Profile":T.va}),this.g.S=y,(y=T&&T.Sb)&&!C(y)&&(this.g.m=y),this.v=T&&T.supportsCrossDomainXhr||!1,this.u=T&&T.sendRawJson||!1,(T=T&&T.httpSessionIdParam)&&!C(T)&&(this.g.D=T,y=this.h,y!==null&&T in y&&(y=this.h,T in y&&delete y[T])),this.j=new Qi(this)}_(yr,$e),yr.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},yr.prototype.close=function(){af(this.g)},yr.prototype.o=function(y){var T=this.g;if(typeof y=="string"){var P={};P.__data__=y,y=P}else this.u&&(P={},P.__data__=Si(y),y=P);T.i.push(new Rd(T.Ya++,y)),T.G==3&&su(T)},yr.prototype.N=function(){this.g.l=null,delete this.j,af(this.g),delete this.g,yr.aa.N.call(this)};function Hd(y){Sa.call(this),y.__headers__&&(this.headers=y.__headers__,this.statusCode=y.__status__,delete y.__headers__,delete y.__status__);var T=y.__sm__;if(T){t:{for(const P in T){y=P;break t}y=void 0}(this.i=y)&&(y=this.i,T=T!==null&&y in T?T[y]:void 0),this.data=T}else this.data=y}_(Hd,Sa);function Gd(){qc.call(this),this.status=1}_(Gd,qc);function Qi(y){this.g=y}_(Qi,zd),Qi.prototype.ua=function(){ue(this.g,"a")},Qi.prototype.ta=function(y){ue(this.g,new Hd(y))},Qi.prototype.sa=function(y){ue(this.g,new Gd)},Qi.prototype.ra=function(){ue(this.g,"b")},lu.prototype.createWebChannel=lu.prototype.g,yr.prototype.send=yr.prototype.o,yr.prototype.open=yr.prototype.m,yr.prototype.close=yr.prototype.close,SI=function(){return new lu},bI=function(){return Es()},EI=Hi,Ey={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ts.NO_ERROR=0,Ts.TIMEOUT=8,Ts.HTTP_ERROR=6,A1=Ts,Ta.COMPLETE="complete",wI=Ta,$c.EventType=ba,ba.OPEN="a",ba.CLOSE="b",ba.ERROR="c",ba.MESSAGE="d",$e.prototype.listen=$e.prototype.K,ch=$c,Ae.prototype.listenOnce=Ae.prototype.L,Ae.prototype.getLastError=Ae.prototype.Ka,Ae.prototype.getLastErrorCode=Ae.prototype.Ba,Ae.prototype.getStatus=Ae.prototype.Z,Ae.prototype.getResponseJson=Ae.prototype.Oa,Ae.prototype.getResponseText=Ae.prototype.oa,Ae.prototype.send=Ae.prototype.ea,Ae.prototype.setWithCredentials=Ae.prototype.Ha,AI=Ae}).apply(typeof W0<"u"?W0:typeof self<"u"?self:typeof window<"u"?window:{});const cb="@firebase/firestore",fb="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fr{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}fr.UNAUTHENTICATED=new fr(null),fr.GOOGLE_CREDENTIALS=new fr("google-credentials-uid"),fr.FIRST_PARTY=new fr("first-party-uid"),fr.MOCK_USER=new fr("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Mc="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pl=new Ax("@firebase/firestore");function $u(){return Pl.logLevel}function bt(n,...t){if(Pl.logLevel<=te.DEBUG){const e=t.map(Nx);Pl.debug(`Firestore (${Mc}): ${n}`,...e)}}function os(n,...t){if(Pl.logLevel<=te.ERROR){const e=t.map(Nx);Pl.error(`Firestore (${Mc}): ${n}`,...e)}}function _o(n,...t){if(Pl.logLevel<=te.WARN){const e=t.map(Nx);Pl.warn(`Firestore (${Mc}): ${n}`,...e)}}function Nx(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(e){return JSON.stringify(e)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ft(n,t,e){let r="Unexpected state";typeof t=="string"?r=t:e=t,TI(n,r,e)}function TI(n,t,e){let r=`FIRESTORE (${Mc}) INTERNAL ASSERTION FAILED: ${t} (ID: ${n.toString(16)})`;if(e!==void 0)try{r+=" CONTEXT: "+JSON.stringify(e)}catch{r+=" CONTEXT: "+e}throw os(r),new Error(r)}function Ee(n,t,e,r){let i="Unexpected state";typeof e=="string"?i=e:r=e,n||TI(t,i,r)}function Gt(n,t){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ct={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class At extends ps{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ns{constructor(){this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CI{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class OP{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable(()=>e(fr.UNAUTHENTICATED))}shutdown(){}}class MP{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable(()=>e(this.token.user))}shutdown(){this.changeListener=null}}class NP{constructor(t){this.t=t,this.currentUser=fr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){Ee(this.o===void 0,42304);let r=this.i;const i=c=>this.i!==r?(r=this.i,e(c)):Promise.resolve();let a=new ns;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new ns,t.enqueueRetryable(()=>i(this.currentUser))};const s=()=>{const c=a;t.enqueueRetryable(async()=>{await c.promise,await i(this.currentUser)})},l=c=>{bt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(bt("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new ns)}},0),s()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then(r=>this.i!==t?(bt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ee(typeof r.accessToken=="string",31837,{l:r}),new CI(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return Ee(t===null||typeof t=="string",2055,{h:t}),new fr(t)}}class PP{constructor(t,e,r){this.P=t,this.T=e,this.I=r,this.type="FirstParty",this.user=fr.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class kP{constructor(t,e,r){this.P=t,this.T=e,this.I=r}getToken(){return Promise.resolve(new PP(this.P,this.T,this.I))}start(t,e){t.enqueueRetryable(()=>e(fr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class hb{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class LP{constructor(t,e){this.V=e,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,vi(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,e){Ee(this.o===void 0,3512);const r=a=>{a.error!=null&&bt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const s=a.token!==this.m;return this.m=a.token,bt("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?e(a.token):Promise.resolve()};this.o=a=>{t.enqueueRetryable(()=>r(a))};const i=a=>{bt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(a=>i(a)),setTimeout(()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?i(a):bt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new hb(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(e=>e?(Ee(typeof e.token=="string",44558,{tokenResult:e}),this.m=e.token,new hb(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BP(n){const t=typeof self<"u"&&(self.crypto||self.msCrypto),e=new Uint8Array(n);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(e);else for(let r=0;r<n;r++)e[r]=Math.floor(256*Math.random());return e}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function II(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Px{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=BP(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<e&&(r+=t.charAt(i[a]%62))}return r}}function Yt(n,t){return n<t?-1:n>t?1:0}function by(n,t){let e=0;for(;e<n.length&&e<t.length;){const r=n.codePointAt(e),i=t.codePointAt(e);if(r!==i){if(r<128&&i<128)return Yt(r,i);{const a=II(),s=VP(a.encode(db(n,e)),a.encode(db(t,e)));return s!==0?s:Yt(r,i)}}e+=r>65535?2:1}return Yt(n.length,t.length)}function db(n,t){return n.codePointAt(t)>65535?n.substring(t,t+2):n.substring(t,t+1)}function VP(n,t){for(let e=0;e<n.length&&e<t.length;++e)if(n[e]!==t[e])return Yt(n[e],t[e]);return Yt(n.length,t.length)}function gc(n,t,e){return n.length===t.length&&n.every((r,i)=>e(r,t[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gb="__name__";class sa{constructor(t,e,r){e===void 0?e=0:e>t.length&&Ft(637,{offset:e,range:t.length}),r===void 0?r=t.length-e:r>t.length-e&&Ft(1746,{length:r,range:t.length-e}),this.segments=t,this.offset=e,this.len=r}get length(){return this.len}isEqual(t){return sa.comparator(this,t)===0}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof sa?t.forEach(r=>{e.push(r)}):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,r=this.limit();e<r;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const r=Math.min(t.length,e.length);for(let i=0;i<r;i++){const a=sa.compareSegments(t.get(i),e.get(i));if(a!==0)return a}return Yt(t.length,e.length)}static compareSegments(t,e){const r=sa.isNumericId(t),i=sa.isNumericId(e);return r&&!i?-1:!r&&i?1:r&&i?sa.extractNumericId(t).compare(sa.extractNumericId(e)):by(t,e)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return mo.fromString(t.substring(4,t.length-2))}}class Le extends sa{construct(t,e,r){return new Le(t,e,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const e=[];for(const r of t){if(r.indexOf("//")>=0)throw new At(ct.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);e.push(...r.split("/").filter(i=>i.length>0))}return new Le(e)}static emptyPath(){return new Le([])}}const FP=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class er extends sa{construct(t,e,r){return new er(t,e,r)}static isValidIdentifier(t){return FP.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),er.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===gb}static keyField(){return new er([gb])}static fromServerFormat(t){const e=[];let r="",i=0;const a=()=>{if(r.length===0)throw new At(ct.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(r),r=""};let s=!1;for(;i<t.length;){const l=t[i];if(l==="\\"){if(i+1===t.length)throw new At(ct.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const c=t[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new At(ct.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=c,i+=2}else l==="`"?(s=!s,i++):l!=="."||s?(r+=l,i++):(a(),i++)}if(a(),s)throw new At(ct.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new er(e)}static emptyPath(){return new er([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ot{constructor(t){this.path=t}static fromPath(t){return new Ot(Le.fromString(t))}static fromName(t){return new Ot(Le.fromString(t).popFirst(5))}static empty(){return new Ot(Le.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&Le.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,e){return Le.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new Ot(new Le(t.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kx(n,t,e){if(!e)throw new At(ct.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${t}.`)}function UP(n,t,e,r){if(t===!0&&r===!0)throw new At(ct.INVALID_ARGUMENT,`${n} and ${e} cannot be used together.`)}function pb(n){if(!Ot.isDocumentKey(n))throw new At(ct.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function mb(n){if(Ot.isDocumentKey(n))throw new At(ct.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function RI(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Ig(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const t=function(r){return r.constructor?r.constructor.name:null}(n);return t?`a custom ${t} object`:"an object"}}return typeof n=="function"?"a function":Ft(12329,{type:typeof n})}function Zr(n,t){if("_delegate"in n&&(n=n._delegate),!(n instanceof t)){if(t.name===n.constructor.name)throw new At(ct.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const e=Ig(n);throw new At(ct.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${e}`)}}return n}function jP(n,t){if(t<=0)throw new At(ct.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${t}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yn(n,t){const e={typeString:n};return t&&(e.value=t),e}function td(n,t){if(!RI(n))throw new At(ct.INVALID_ARGUMENT,"JSON must be an object");let e;for(const r in t)if(t[r]){const i=t[r].typeString,a="value"in t[r]?{value:t[r].value}:void 0;if(!(r in n)){e=`JSON missing required field: '${r}'`;break}const s=n[r];if(i&&typeof s!==i){e=`JSON field '${r}' must be a ${i}.`;break}if(a!==void 0&&s!==a.value){e=`Expected '${r}' field to equal '${a.value}'`;break}}if(e)throw new At(ct.INVALID_ARGUMENT,e);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vb=-62135596800,yb=1e6;class He{static now(){return He.fromMillis(Date.now())}static fromDate(t){return He.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),r=Math.floor((t-1e3*e)*yb);return new He(e,r)}constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new At(ct.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new At(ct.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<vb)throw new At(ct.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new At(ct.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/yb}_compareTo(t){return this.seconds===t.seconds?Yt(this.nanoseconds,t.nanoseconds):Yt(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:He._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(td(t,He._jsonSchema))return new He(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-vb;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}He._jsonSchemaVersion="firestore/timestamp/1.0",He._jsonSchema={type:yn("string",He._jsonSchemaVersion),seconds:yn("number"),nanoseconds:yn("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ht{static fromTimestamp(t){return new Ht(t)}static min(){return new Ht(new He(0,0))}static max(){return new Ht(new He(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oh=-1;function zP(n,t){const e=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Ht.fromTimestamp(r===1e9?new He(e+1,0):new He(e,r));return new Ao(i,Ot.empty(),t)}function HP(n){return new Ao(n.readTime,n.key,Oh)}class Ao{constructor(t,e,r){this.readTime=t,this.documentKey=e,this.largestBatchId=r}static min(){return new Ao(Ht.min(),Ot.empty(),Oh)}static max(){return new Ao(Ht.max(),Ot.empty(),Oh)}}function GP(n,t){let e=n.readTime.compareTo(t.readTime);return e!==0?e:(e=Ot.comparator(n.documentKey,t.documentKey),e!==0?e:Yt(n.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $P="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class qP{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Nc(n){if(n.code!==ct.FAILED_PRECONDITION||n.message!==$P)throw n;bt("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gt{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&Ft(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new gt((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(t,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(e,a).next(r,i)}})}toPromise(){return new Promise((t,e)=>{this.next(t,e)})}wrapUserFunction(t){try{const e=t();return e instanceof gt?e:gt.resolve(e)}catch(e){return gt.reject(e)}}wrapSuccess(t,e){return t?this.wrapUserFunction(()=>t(e)):gt.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction(()=>t(e)):gt.reject(e)}static resolve(t){return new gt((e,r)=>{e(t)})}static reject(t){return new gt((e,r)=>{r(t)})}static waitFor(t){return new gt((e,r)=>{let i=0,a=0,s=!1;t.forEach(l=>{++i,l.next(()=>{++a,s&&a===i&&e()},c=>r(c))}),s=!0,a===i&&e()})}static or(t){let e=gt.resolve(!1);for(const r of t)e=e.next(i=>i?gt.resolve(i):r());return e}static forEach(t,e){const r=[];return t.forEach((i,a)=>{r.push(e.call(this,i,a))}),this.waitFor(r)}static mapArray(t,e){return new gt((r,i)=>{const a=t.length,s=new Array(a);let l=0;for(let c=0;c<a;c++){const f=c;e(t[f]).next(d=>{s[f]=d,++l,l===a&&r(s)},d=>i(d))}})}static doWhile(t,e){return new gt((r,i)=>{const a=()=>{t()===!0?e().next(()=>{a()},i):r()};a()})}}function WP(n){const t=n.match(/Android ([\d.]+)/i),e=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(e)}function Pc(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rg{constructor(t,e){this.previousValue=t,e&&(e.sequenceNumberHandler=r=>this._e(r),this.ae=r=>e.writeSequenceNumber(r))}_e(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ae&&this.ae(t),t}}Rg.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lx=-1;function Dg(n){return n==null}function j1(n){return n===0&&1/n==-1/0}function XP(n){return typeof n=="number"&&Number.isInteger(n)&&!j1(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DI="";function YP(n){let t="";for(let e=0;e<n.length;e++)t.length>0&&(t=xb(t)),t=KP(n.get(e),t);return xb(t)}function KP(n,t){let e=t;const r=n.length;for(let i=0;i<r;i++){const a=n.charAt(i);switch(a){case"\0":e+="";break;case DI:e+="";break;default:e+=a}}return e}function xb(n){return n+DI+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _b(n){let t=0;for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t++;return t}function Ro(n,t){for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t(e,n[e])}function OI(n){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qe{constructor(t,e){this.comparator=t,this.root=e||tr.EMPTY}insert(t,e){return new Qe(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,tr.BLACK,null,null))}remove(t){return new Qe(this.comparator,this.root.remove(t,this.comparator).copy(null,null,tr.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const r=this.comparator(t,e.key);if(r===0)return e.value;r<0?e=e.left:r>0&&(e=e.right)}return null}indexOf(t){let e=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(t,r.key);if(i===0)return e+r.left.size;i<0?r=r.left:(e+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((e,r)=>(t(e,r),!1))}toString(){const t=[];return this.inorderTraversal((e,r)=>(t.push(`${e}:${r}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new X0(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new X0(this.root,t,this.comparator,!1)}getReverseIterator(){return new X0(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new X0(this.root,t,this.comparator,!0)}}class X0{constructor(t,e,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!t.isEmpty();)if(a=e?r(t.key,e):1,e&&i&&(a*=-1),a<0)t=this.isReverse?t.left:t.right;else{if(a===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class tr{constructor(t,e,r,i,a){this.key=t,this.value=e,this.color=r??tr.RED,this.left=i??tr.EMPTY,this.right=a??tr.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,r,i,a){return new tr(t??this.key,e??this.value,r??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,r){let i=this;const a=r(t,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(t,e,r),null):a===0?i.copy(null,e,null,null,null):i.copy(null,null,null,null,i.right.insert(t,e,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return tr.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let r,i=this;if(e(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,e),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),e(t,i.key)===0){if(i.right.isEmpty())return tr.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,e))}return i.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,tr.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,tr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ft(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ft(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw Ft(27949);return t+(this.isRed()?0:1)}}tr.EMPTY=null,tr.RED=!0,tr.BLACK=!1;tr.EMPTY=new class{constructor(){this.size=0}get key(){throw Ft(57766)}get value(){throw Ft(16141)}get color(){throw Ft(16727)}get left(){throw Ft(29726)}get right(){throw Ft(36894)}copy(t,e,r,i,a){return this}insert(t,e,r){return new tr(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mn{constructor(t){this.comparator=t,this.data=new Qe(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((e,r)=>(t(e),!1))}forEachInRange(t,e){const r=this.data.getIteratorFrom(t[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,t[1])>=0)return;e(i.key)}}forEachWhile(t,e){let r;for(r=e!==void 0?this.data.getIteratorFrom(e):this.data.getIterator();r.hasNext();)if(!t(r.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new Ab(this.data.getIterator())}getIteratorFrom(t){return new Ab(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach(r=>{e=e.add(r)}),e}isEqual(t){if(!(t instanceof Mn)||this.size!==t.size)return!1;const e=this.data.getIterator(),r=t.data.getIterator();for(;e.hasNext();){const i=e.getNext().key,a=r.getNext().key;if(this.comparator(i,a)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(e=>{t.push(e)}),t}toString(){const t=[];return this.forEach(e=>t.push(e)),"SortedSet("+t.toString()+")"}copy(t){const e=new Mn(this.comparator);return e.data=t,e}}class Ab{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yr{constructor(t){this.fields=t,t.sort(er.comparator)}static empty(){return new Yr([])}unionWith(t){let e=new Mn(er.comparator);for(const r of this.fields)e=e.add(r);for(const r of t)e=e.add(r);return new Yr(e.toArray())}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return gc(this.fields,t.fields,(e,r)=>e.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MI extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rr{constructor(t){this.binaryString=t}static fromBase64String(t){const e=function(i){try{return atob(i)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new MI("Invalid base64 string: "+a):a}}(t);return new rr(e)}static fromUint8Array(t){const e=function(i){let a="";for(let s=0;s<i.length;++s)a+=String.fromCharCode(i[s]);return a}(t);return new rr(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(e){return btoa(e)}(this.binaryString)}toUint8Array(){return function(e){const r=new Uint8Array(e.length);for(let i=0;i<e.length;i++)r[i]=e.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Yt(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}rr.EMPTY_BYTE_STRING=new rr("");const ZP=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function wo(n){if(Ee(!!n,39018),typeof n=="string"){let t=0;const e=ZP.exec(n);if(Ee(!!e,46558,{timestamp:n}),e[1]){let i=e[1];i=(i+"000000000").substr(0,9),t=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:an(n.seconds),nanos:an(n.nanos)}}function an(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Eo(n){return typeof n=="string"?rr.fromBase64String(n):rr.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NI="server_timestamp",PI="__type__",kI="__previous_value__",LI="__local_write_time__";function Bx(n){var t,e;return((e=(((t=n==null?void 0:n.mapValue)===null||t===void 0?void 0:t.fields)||{})[PI])===null||e===void 0?void 0:e.stringValue)===NI}function Og(n){const t=n.mapValue.fields[kI];return Bx(t)?Og(t):t}function Mh(n){const t=wo(n.mapValue.fields[LI].timestampValue);return new He(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QP{constructor(t,e,r,i,a,s,l,c,f,d){this.databaseId=t,this.appId=e,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=s,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=f,this.isUsingEmulator=d}}const z1="(default)";class Nh{constructor(t,e){this.projectId=t,this.database=e||z1}static empty(){return new Nh("","")}get isDefaultDatabase(){return this.database===z1}isEqual(t){return t instanceof Nh&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BI="__type__",JP="__max__",Y0={mapValue:{}},VI="__vector__",H1="value";function bo(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Bx(n)?4:e5(n)?9007199254740991:t5(n)?10:11:Ft(28295,{value:n})}function _a(n,t){if(n===t)return!0;const e=bo(n);if(e!==bo(t))return!1;switch(e){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===t.booleanValue;case 4:return Mh(n).isEqual(Mh(t));case 3:return function(i,a){if(typeof i.timestampValue=="string"&&typeof a.timestampValue=="string"&&i.timestampValue.length===a.timestampValue.length)return i.timestampValue===a.timestampValue;const s=wo(i.timestampValue),l=wo(a.timestampValue);return s.seconds===l.seconds&&s.nanos===l.nanos}(n,t);case 5:return n.stringValue===t.stringValue;case 6:return function(i,a){return Eo(i.bytesValue).isEqual(Eo(a.bytesValue))}(n,t);case 7:return n.referenceValue===t.referenceValue;case 8:return function(i,a){return an(i.geoPointValue.latitude)===an(a.geoPointValue.latitude)&&an(i.geoPointValue.longitude)===an(a.geoPointValue.longitude)}(n,t);case 2:return function(i,a){if("integerValue"in i&&"integerValue"in a)return an(i.integerValue)===an(a.integerValue);if("doubleValue"in i&&"doubleValue"in a){const s=an(i.doubleValue),l=an(a.doubleValue);return s===l?j1(s)===j1(l):isNaN(s)&&isNaN(l)}return!1}(n,t);case 9:return gc(n.arrayValue.values||[],t.arrayValue.values||[],_a);case 10:case 11:return function(i,a){const s=i.mapValue.fields||{},l=a.mapValue.fields||{};if(_b(s)!==_b(l))return!1;for(const c in s)if(s.hasOwnProperty(c)&&(l[c]===void 0||!_a(s[c],l[c])))return!1;return!0}(n,t);default:return Ft(52216,{left:n})}}function Ph(n,t){return(n.values||[]).find(e=>_a(e,t))!==void 0}function pc(n,t){if(n===t)return 0;const e=bo(n),r=bo(t);if(e!==r)return Yt(e,r);switch(e){case 0:case 9007199254740991:return 0;case 1:return Yt(n.booleanValue,t.booleanValue);case 2:return function(a,s){const l=an(a.integerValue||a.doubleValue),c=an(s.integerValue||s.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1}(n,t);case 3:return wb(n.timestampValue,t.timestampValue);case 4:return wb(Mh(n),Mh(t));case 5:return by(n.stringValue,t.stringValue);case 6:return function(a,s){const l=Eo(a),c=Eo(s);return l.compareTo(c)}(n.bytesValue,t.bytesValue);case 7:return function(a,s){const l=a.split("/"),c=s.split("/");for(let f=0;f<l.length&&f<c.length;f++){const d=Yt(l[f],c[f]);if(d!==0)return d}return Yt(l.length,c.length)}(n.referenceValue,t.referenceValue);case 8:return function(a,s){const l=Yt(an(a.latitude),an(s.latitude));return l!==0?l:Yt(an(a.longitude),an(s.longitude))}(n.geoPointValue,t.geoPointValue);case 9:return Eb(n.arrayValue,t.arrayValue);case 10:return function(a,s){var l,c,f,d;const g=a.fields||{},m=s.fields||{},v=(l=g[H1])===null||l===void 0?void 0:l.arrayValue,_=(c=m[H1])===null||c===void 0?void 0:c.arrayValue,w=Yt(((f=v==null?void 0:v.values)===null||f===void 0?void 0:f.length)||0,((d=_==null?void 0:_.values)===null||d===void 0?void 0:d.length)||0);return w!==0?w:Eb(v,_)}(n.mapValue,t.mapValue);case 11:return function(a,s){if(a===Y0.mapValue&&s===Y0.mapValue)return 0;if(a===Y0.mapValue)return 1;if(s===Y0.mapValue)return-1;const l=a.fields||{},c=Object.keys(l),f=s.fields||{},d=Object.keys(f);c.sort(),d.sort();for(let g=0;g<c.length&&g<d.length;++g){const m=by(c[g],d[g]);if(m!==0)return m;const v=pc(l[c[g]],f[d[g]]);if(v!==0)return v}return Yt(c.length,d.length)}(n.mapValue,t.mapValue);default:throw Ft(23264,{le:e})}}function wb(n,t){if(typeof n=="string"&&typeof t=="string"&&n.length===t.length)return Yt(n,t);const e=wo(n),r=wo(t),i=Yt(e.seconds,r.seconds);return i!==0?i:Yt(e.nanos,r.nanos)}function Eb(n,t){const e=n.values||[],r=t.values||[];for(let i=0;i<e.length&&i<r.length;++i){const a=pc(e[i],r[i]);if(a)return a}return Yt(e.length,r.length)}function mc(n){return Sy(n)}function Sy(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(e){const r=wo(e);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(e){return Eo(e).toBase64()}(n.bytesValue):"referenceValue"in n?function(e){return Ot.fromName(e).toString()}(n.referenceValue):"geoPointValue"in n?function(e){return`geo(${e.latitude},${e.longitude})`}(n.geoPointValue):"arrayValue"in n?function(e){let r="[",i=!0;for(const a of e.values||[])i?i=!1:r+=",",r+=Sy(a);return r+"]"}(n.arrayValue):"mapValue"in n?function(e){const r=Object.keys(e.fields||{}).sort();let i="{",a=!0;for(const s of r)a?a=!1:i+=",",i+=`${s}:${Sy(e.fields[s])}`;return i+"}"}(n.mapValue):Ft(61005,{value:n})}function w1(n){switch(bo(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=Og(n);return t?16+w1(t):16;case 5:return 2*n.stringValue.length;case 6:return Eo(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,a)=>i+w1(a),0)}(n.arrayValue);case 10:case 11:return function(r){let i=0;return Ro(r.fields,(a,s)=>{i+=a.length+w1(s)}),i}(n.mapValue);default:throw Ft(13486,{value:n})}}function bb(n,t){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${t.path.canonicalString()}`}}function Ty(n){return!!n&&"integerValue"in n}function Vx(n){return!!n&&"arrayValue"in n}function Sb(n){return!!n&&"nullValue"in n}function Tb(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function E1(n){return!!n&&"mapValue"in n}function t5(n){var t,e;return((e=(((t=n==null?void 0:n.mapValue)===null||t===void 0?void 0:t.fields)||{})[BI])===null||e===void 0?void 0:e.stringValue)===VI}function Eh(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const t={mapValue:{fields:{}}};return Ro(n.mapValue.fields,(e,r)=>t.mapValue.fields[e]=Eh(r)),t}if(n.arrayValue){const t={arrayValue:{values:[]}};for(let e=0;e<(n.arrayValue.values||[]).length;++e)t.arrayValue.values[e]=Eh(n.arrayValue.values[e]);return t}return Object.assign({},n)}function e5(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===JP}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nr{constructor(t){this.value=t}static empty(){return new Nr({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let r=0;r<t.length-1;++r)if(e=(e.mapValue.fields||{})[t.get(r)],!E1(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=Eh(e)}setAll(t){let e=er.emptyPath(),r={},i=[];t.forEach((s,l)=>{if(!e.isImmediateParentOf(l)){const c=this.getFieldsMap(e);this.applyChanges(c,r,i),r={},i=[],e=l.popLast()}s?r[l.lastSegment()]=Eh(s):i.push(l.lastSegment())});const a=this.getFieldsMap(e);this.applyChanges(a,r,i)}delete(t){const e=this.field(t.popLast());E1(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return _a(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let r=0;r<t.length;++r){let i=e.mapValue.fields[t.get(r)];E1(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},e.mapValue.fields[t.get(r)]=i),e=i}return e.mapValue.fields}applyChanges(t,e,r){Ro(e,(i,a)=>t[i]=a);for(const i of r)delete t[i]}clone(){return new Nr(Eh(this.value))}}function FI(n){const t=[];return Ro(n.fields,(e,r)=>{const i=new er([e]);if(E1(r)){const a=FI(r.mapValue).fields;if(a.length===0)t.push(i);else for(const s of a)t.push(i.child(s))}else t.push(i)}),new Yr(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hr{constructor(t,e,r,i,a,s,l){this.key=t,this.documentType=e,this.version=r,this.readTime=i,this.createTime=a,this.data=s,this.documentState=l}static newInvalidDocument(t){return new hr(t,0,Ht.min(),Ht.min(),Ht.min(),Nr.empty(),0)}static newFoundDocument(t,e,r,i){return new hr(t,1,e,Ht.min(),r,i,0)}static newNoDocument(t,e){return new hr(t,2,e,Ht.min(),Ht.min(),Nr.empty(),0)}static newUnknownDocument(t,e){return new hr(t,3,e,Ht.min(),Ht.min(),Nr.empty(),2)}convertToFoundDocument(t,e){return!this.createTime.isEqual(Ht.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Nr.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Nr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ht.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof hr&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new hr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G1{constructor(t,e){this.position=t,this.inclusive=e}}function Cb(n,t,e){let r=0;for(let i=0;i<n.position.length;i++){const a=t[i],s=n.position[i];if(a.field.isKeyField()?r=Ot.comparator(Ot.fromName(s.referenceValue),e.key):r=pc(s,e.data.field(a.field)),a.dir==="desc"&&(r*=-1),r!==0)break}return r}function Ib(n,t){if(n===null)return t===null;if(t===null||n.inclusive!==t.inclusive||n.position.length!==t.position.length)return!1;for(let e=0;e<n.position.length;e++)if(!_a(n.position[e],t.position[e]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kh{constructor(t,e="asc"){this.field=t,this.dir=e}}function n5(n,t){return n.dir===t.dir&&n.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UI{}class vn extends UI{constructor(t,e,r){super(),this.field=t,this.op=e,this.value=r}static create(t,e,r){return t.isKeyField()?e==="in"||e==="not-in"?this.createKeyFieldInFilter(t,e,r):new i5(t,e,r):e==="array-contains"?new o5(t,r):e==="in"?new l5(t,r):e==="not-in"?new u5(t,r):e==="array-contains-any"?new c5(t,r):new vn(t,e,r)}static createKeyFieldInFilter(t,e,r){return e==="in"?new a5(t,r):new s5(t,r)}matches(t){const e=t.data.field(this.field);return this.op==="!="?e!==null&&e.nullValue===void 0&&this.matchesComparison(pc(e,this.value)):e!==null&&bo(this.value)===bo(e)&&this.matchesComparison(pc(e,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return Ft(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ui extends UI{constructor(t,e){super(),this.filters=t,this.op=e,this.he=null}static create(t,e){return new Ui(t,e)}matches(t){return jI(this)?this.filters.find(e=>!e.matches(t))===void 0:this.filters.find(e=>e.matches(t))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((t,e)=>t.concat(e.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function jI(n){return n.op==="and"}function zI(n){return r5(n)&&jI(n)}function r5(n){for(const t of n.filters)if(t instanceof Ui)return!1;return!0}function Cy(n){if(n instanceof vn)return n.field.canonicalString()+n.op.toString()+mc(n.value);if(zI(n))return n.filters.map(t=>Cy(t)).join(",");{const t=n.filters.map(e=>Cy(e)).join(",");return`${n.op}(${t})`}}function HI(n,t){return n instanceof vn?function(r,i){return i instanceof vn&&r.op===i.op&&r.field.isEqual(i.field)&&_a(r.value,i.value)}(n,t):n instanceof Ui?function(r,i){return i instanceof Ui&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((a,s,l)=>a&&HI(s,i.filters[l]),!0):!1}(n,t):void Ft(19439)}function GI(n){return n instanceof vn?function(e){return`${e.field.canonicalString()} ${e.op} ${mc(e.value)}`}(n):n instanceof Ui?function(e){return e.op.toString()+" {"+e.getFilters().map(GI).join(" ,")+"}"}(n):"Filter"}class i5 extends vn{constructor(t,e,r){super(t,e,r),this.key=Ot.fromName(r.referenceValue)}matches(t){const e=Ot.comparator(t.key,this.key);return this.matchesComparison(e)}}class a5 extends vn{constructor(t,e){super(t,"in",e),this.keys=$I("in",e)}matches(t){return this.keys.some(e=>e.isEqual(t.key))}}class s5 extends vn{constructor(t,e){super(t,"not-in",e),this.keys=$I("not-in",e)}matches(t){return!this.keys.some(e=>e.isEqual(t.key))}}function $I(n,t){var e;return(((e=t.arrayValue)===null||e===void 0?void 0:e.values)||[]).map(r=>Ot.fromName(r.referenceValue))}class o5 extends vn{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return Vx(e)&&Ph(e.arrayValue,this.value)}}class l5 extends vn{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return e!==null&&Ph(this.value.arrayValue,e)}}class u5 extends vn{constructor(t,e){super(t,"not-in",e)}matches(t){if(Ph(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return e!==null&&e.nullValue===void 0&&!Ph(this.value.arrayValue,e)}}class c5 extends vn{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!Vx(e)||!e.arrayValue.values)&&e.arrayValue.values.some(r=>Ph(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f5{constructor(t,e=null,r=[],i=[],a=null,s=null,l=null){this.path=t,this.collectionGroup=e,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=s,this.endAt=l,this.Pe=null}}function Rb(n,t=null,e=[],r=[],i=null,a=null,s=null){return new f5(n,t,e,r,i,a,s)}function Fx(n){const t=Gt(n);if(t.Pe===null){let e=t.path.canonicalString();t.collectionGroup!==null&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(r=>Cy(r)).join(","),e+="|ob:",e+=t.orderBy.map(r=>function(a){return a.field.canonicalString()+a.dir}(r)).join(","),Dg(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(r=>mc(r)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(r=>mc(r)).join(",")),t.Pe=e}return t.Pe}function Ux(n,t){if(n.limit!==t.limit||n.orderBy.length!==t.orderBy.length)return!1;for(let e=0;e<n.orderBy.length;e++)if(!n5(n.orderBy[e],t.orderBy[e]))return!1;if(n.filters.length!==t.filters.length)return!1;for(let e=0;e<n.filters.length;e++)if(!HI(n.filters[e],t.filters[e]))return!1;return n.collectionGroup===t.collectionGroup&&!!n.path.isEqual(t.path)&&!!Ib(n.startAt,t.startAt)&&Ib(n.endAt,t.endAt)}function Iy(n){return Ot.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vl{constructor(t,e=null,r=[],i=[],a=null,s="F",l=null,c=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=s,this.startAt=l,this.endAt=c,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function h5(n,t,e,r,i,a,s,l){return new Vl(n,t,e,r,i,a,s,l)}function jx(n){return new Vl(n)}function Db(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function qI(n){return n.collectionGroup!==null}function bh(n){const t=Gt(n);if(t.Te===null){t.Te=[];const e=new Set;for(const a of t.explicitOrderBy)t.Te.push(a),e.add(a.field.canonicalString());const r=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(s){let l=new Mn(er.comparator);return s.filters.forEach(c=>{c.getFlattenedFilters().forEach(f=>{f.isInequality()&&(l=l.add(f.field))})}),l})(t).forEach(a=>{e.has(a.canonicalString())||a.isKeyField()||t.Te.push(new kh(a,r))}),e.has(er.keyField().canonicalString())||t.Te.push(new kh(er.keyField(),r))}return t.Te}function ca(n){const t=Gt(n);return t.Ie||(t.Ie=d5(t,bh(n))),t.Ie}function d5(n,t){if(n.limitType==="F")return Rb(n.path,n.collectionGroup,t,n.filters,n.limit,n.startAt,n.endAt);{t=t.map(i=>{const a=i.dir==="desc"?"asc":"desc";return new kh(i.field,a)});const e=n.endAt?new G1(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new G1(n.startAt.position,n.startAt.inclusive):null;return Rb(n.path,n.collectionGroup,t,n.filters,n.limit,e,r)}}function Ry(n,t){const e=n.filters.concat([t]);return new Vl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),e,n.limit,n.limitType,n.startAt,n.endAt)}function $1(n,t,e){return new Vl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),t,e,n.startAt,n.endAt)}function Mg(n,t){return Ux(ca(n),ca(t))&&n.limitType===t.limitType}function WI(n){return`${Fx(ca(n))}|lt:${n.limitType}`}function qu(n){return`Query(target=${function(e){let r=e.path.canonicalString();return e.collectionGroup!==null&&(r+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(r+=`, filters: [${e.filters.map(i=>GI(i)).join(", ")}]`),Dg(e.limit)||(r+=", limit: "+e.limit),e.orderBy.length>0&&(r+=`, orderBy: [${e.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),e.startAt&&(r+=", startAt: ",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map(i=>mc(i)).join(",")),e.endAt&&(r+=", endAt: ",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map(i=>mc(i)).join(",")),`Target(${r})`}(ca(n))}; limitType=${n.limitType})`}function Ng(n,t){return t.isFoundDocument()&&function(r,i){const a=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(a):Ot.isDocumentKey(r.path)?r.path.isEqual(a):r.path.isImmediateParentOf(a)}(n,t)&&function(r,i){for(const a of bh(r))if(!a.field.isKeyField()&&i.data.field(a.field)===null)return!1;return!0}(n,t)&&function(r,i){for(const a of r.filters)if(!a.matches(i))return!1;return!0}(n,t)&&function(r,i){return!(r.startAt&&!function(s,l,c){const f=Cb(s,l,c);return s.inclusive?f<=0:f<0}(r.startAt,bh(r),i)||r.endAt&&!function(s,l,c){const f=Cb(s,l,c);return s.inclusive?f>=0:f>0}(r.endAt,bh(r),i))}(n,t)}function g5(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function XI(n){return(t,e)=>{let r=!1;for(const i of bh(n)){const a=p5(i,t,e);if(a!==0)return a;r=r||i.field.isKeyField()}return 0}}function p5(n,t,e){const r=n.field.isKeyField()?Ot.comparator(t.key,e.key):function(a,s,l){const c=s.data.field(a),f=l.data.field(a);return c!==null&&f!==null?pc(c,f):Ft(42886)}(n.field,t,e);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Ft(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fl{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){const e=this.mapKeyFn(t),r=this.inner[e];if(r!==void 0){for(const[i,a]of r)if(this.equalsFn(i,t))return a}}has(t){return this.get(t)!==void 0}set(t,e){const r=this.mapKeyFn(t),i=this.inner[r];if(i===void 0)return this.inner[r]=[[t,e]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],t))return void(i[a]=[t,e]);i.push([t,e]),this.innerSize++}delete(t){const e=this.mapKeyFn(t),r=this.inner[e];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return r.length===1?delete this.inner[e]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(t){Ro(this.inner,(e,r)=>{for(const[i,a]of r)t(i,a)})}isEmpty(){return OI(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m5=new Qe(Ot.comparator);function ls(){return m5}const YI=new Qe(Ot.comparator);function fh(...n){let t=YI;for(const e of n)t=t.insert(e.key,e);return t}function KI(n){let t=YI;return n.forEach((e,r)=>t=t.insert(e,r.overlayedDocument)),t}function Al(){return Sh()}function ZI(){return Sh()}function Sh(){return new Fl(n=>n.toString(),(n,t)=>n.isEqual(t))}const v5=new Qe(Ot.comparator),y5=new Mn(Ot.comparator);function ee(...n){let t=y5;for(const e of n)t=t.add(e);return t}const x5=new Mn(Yt);function _5(){return x5}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zx(n,t){if(n.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:j1(t)?"-0":t}}function QI(n){return{integerValue:""+n}}function A5(n,t){return XP(t)?QI(t):zx(n,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pg{constructor(){this._=void 0}}function w5(n,t,e){return n instanceof Lh?function(i,a){const s={fields:{[PI]:{stringValue:NI},[LI]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return a&&Bx(a)&&(a=Og(a)),a&&(s.fields[kI]=a),{mapValue:s}}(e,t):n instanceof Bh?t3(n,t):n instanceof Vh?e3(n,t):function(i,a){const s=JI(i,a),l=Ob(s)+Ob(i.Ee);return Ty(s)&&Ty(i.Ee)?QI(l):zx(i.serializer,l)}(n,t)}function E5(n,t,e){return n instanceof Bh?t3(n,t):n instanceof Vh?e3(n,t):e}function JI(n,t){return n instanceof q1?function(r){return Ty(r)||function(a){return!!a&&"doubleValue"in a}(r)}(t)?t:{integerValue:0}:null}class Lh extends Pg{}class Bh extends Pg{constructor(t){super(),this.elements=t}}function t3(n,t){const e=n3(t);for(const r of n.elements)e.some(i=>_a(i,r))||e.push(r);return{arrayValue:{values:e}}}class Vh extends Pg{constructor(t){super(),this.elements=t}}function e3(n,t){let e=n3(t);for(const r of n.elements)e=e.filter(i=>!_a(i,r));return{arrayValue:{values:e}}}class q1 extends Pg{constructor(t,e){super(),this.serializer=t,this.Ee=e}}function Ob(n){return an(n.integerValue||n.doubleValue)}function n3(n){return Vx(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b5{constructor(t,e){this.field=t,this.transform=e}}function S5(n,t){return n.field.isEqual(t.field)&&function(r,i){return r instanceof Bh&&i instanceof Bh||r instanceof Vh&&i instanceof Vh?gc(r.elements,i.elements,_a):r instanceof q1&&i instanceof q1?_a(r.Ee,i.Ee):r instanceof Lh&&i instanceof Lh}(n.transform,t.transform)}class T5{constructor(t,e){this.version=t,this.transformResults=e}}class Sr{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new Sr}static exists(t){return new Sr(void 0,t)}static updateTime(t){return new Sr(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function b1(n,t){return n.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(n.updateTime):n.exists===void 0||n.exists===t.isFoundDocument()}class kg{}function r3(n,t){if(!n.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return n.isNoDocument()?new Lg(n.key,Sr.none()):new ed(n.key,n.data,Sr.none());{const e=n.data,r=Nr.empty();let i=new Mn(er.comparator);for(let a of t.fields)if(!i.has(a)){let s=e.field(a);s===null&&a.length>1&&(a=a.popLast(),s=e.field(a)),s===null?r.delete(a):r.set(a,s),i=i.add(a)}return new Do(n.key,r,new Yr(i.toArray()),Sr.none())}}function C5(n,t,e){n instanceof ed?function(i,a,s){const l=i.value.clone(),c=Nb(i.fieldTransforms,a,s.transformResults);l.setAll(c),a.convertToFoundDocument(s.version,l).setHasCommittedMutations()}(n,t,e):n instanceof Do?function(i,a,s){if(!b1(i.precondition,a))return void a.convertToUnknownDocument(s.version);const l=Nb(i.fieldTransforms,a,s.transformResults),c=a.data;c.setAll(i3(i)),c.setAll(l),a.convertToFoundDocument(s.version,c).setHasCommittedMutations()}(n,t,e):function(i,a,s){a.convertToNoDocument(s.version).setHasCommittedMutations()}(0,t,e)}function Th(n,t,e,r){return n instanceof ed?function(a,s,l,c){if(!b1(a.precondition,s))return l;const f=a.value.clone(),d=Pb(a.fieldTransforms,c,s);return f.setAll(d),s.convertToFoundDocument(s.version,f).setHasLocalMutations(),null}(n,t,e,r):n instanceof Do?function(a,s,l,c){if(!b1(a.precondition,s))return l;const f=Pb(a.fieldTransforms,c,s),d=s.data;return d.setAll(i3(a)),d.setAll(f),s.convertToFoundDocument(s.version,d).setHasLocalMutations(),l===null?null:l.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(g=>g.field))}(n,t,e,r):function(a,s,l){return b1(a.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):l}(n,t,e)}function I5(n,t){let e=null;for(const r of n.fieldTransforms){const i=t.data.field(r.field),a=JI(r.transform,i||null);a!=null&&(e===null&&(e=Nr.empty()),e.set(r.field,a))}return e||null}function Mb(n,t){return n.type===t.type&&!!n.key.isEqual(t.key)&&!!n.precondition.isEqual(t.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&gc(r,i,(a,s)=>S5(a,s))}(n.fieldTransforms,t.fieldTransforms)&&(n.type===0?n.value.isEqual(t.value):n.type!==1||n.data.isEqual(t.data)&&n.fieldMask.isEqual(t.fieldMask))}class ed extends kg{constructor(t,e,r,i=[]){super(),this.key=t,this.value=e,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Do extends kg{constructor(t,e,r,i,a=[]){super(),this.key=t,this.data=e,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function i3(n){const t=new Map;return n.fieldMask.fields.forEach(e=>{if(!e.isEmpty()){const r=n.data.field(e);t.set(e,r)}}),t}function Nb(n,t,e){const r=new Map;Ee(n.length===e.length,32656,{Ae:e.length,Re:n.length});for(let i=0;i<e.length;i++){const a=n[i],s=a.transform,l=t.data.field(a.field);r.set(a.field,E5(s,l,e[i]))}return r}function Pb(n,t,e){const r=new Map;for(const i of n){const a=i.transform,s=e.data.field(i.field);r.set(i.field,w5(a,s,t))}return r}class Lg extends kg{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class R5 extends kg{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D5{constructor(t,e,r,i){this.batchId=t,this.localWriteTime=e,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(t,e){const r=e.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(t.key)&&C5(a,t,r[i])}}applyToLocalView(t,e){for(const r of this.baseMutations)r.key.isEqual(t.key)&&(e=Th(r,t,e,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(t.key)&&(e=Th(r,t,e,this.localWriteTime));return e}applyToLocalDocumentSet(t,e){const r=ZI();return this.mutations.forEach(i=>{const a=t.get(i.key),s=a.overlayedDocument;let l=this.applyToLocalView(s,a.mutatedFields);l=e.has(i.key)?null:l;const c=r3(s,l);c!==null&&r.set(i.key,c),s.isValidDocument()||s.convertToNoDocument(Ht.min())}),r}keys(){return this.mutations.reduce((t,e)=>t.add(e.key),ee())}isEqual(t){return this.batchId===t.batchId&&gc(this.mutations,t.mutations,(e,r)=>Mb(e,r))&&gc(this.baseMutations,t.baseMutations,(e,r)=>Mb(e,r))}}class Hx{constructor(t,e,r,i){this.batch=t,this.commitVersion=e,this.mutationResults=r,this.docVersions=i}static from(t,e,r){Ee(t.mutations.length===r.length,58842,{Ve:t.mutations.length,me:r.length});let i=function(){return v5}();const a=t.mutations;for(let s=0;s<a.length;s++)i=i.insert(a[s].key,r[s].version);return new Hx(t,e,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O5{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M5{constructor(t,e){this.count=t,this.unchangedNames=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var dn,ae;function N5(n){switch(n){case ct.OK:return Ft(64938);case ct.CANCELLED:case ct.UNKNOWN:case ct.DEADLINE_EXCEEDED:case ct.RESOURCE_EXHAUSTED:case ct.INTERNAL:case ct.UNAVAILABLE:case ct.UNAUTHENTICATED:return!1;case ct.INVALID_ARGUMENT:case ct.NOT_FOUND:case ct.ALREADY_EXISTS:case ct.PERMISSION_DENIED:case ct.FAILED_PRECONDITION:case ct.ABORTED:case ct.OUT_OF_RANGE:case ct.UNIMPLEMENTED:case ct.DATA_LOSS:return!0;default:return Ft(15467,{code:n})}}function a3(n){if(n===void 0)return os("GRPC error has no .code"),ct.UNKNOWN;switch(n){case dn.OK:return ct.OK;case dn.CANCELLED:return ct.CANCELLED;case dn.UNKNOWN:return ct.UNKNOWN;case dn.DEADLINE_EXCEEDED:return ct.DEADLINE_EXCEEDED;case dn.RESOURCE_EXHAUSTED:return ct.RESOURCE_EXHAUSTED;case dn.INTERNAL:return ct.INTERNAL;case dn.UNAVAILABLE:return ct.UNAVAILABLE;case dn.UNAUTHENTICATED:return ct.UNAUTHENTICATED;case dn.INVALID_ARGUMENT:return ct.INVALID_ARGUMENT;case dn.NOT_FOUND:return ct.NOT_FOUND;case dn.ALREADY_EXISTS:return ct.ALREADY_EXISTS;case dn.PERMISSION_DENIED:return ct.PERMISSION_DENIED;case dn.FAILED_PRECONDITION:return ct.FAILED_PRECONDITION;case dn.ABORTED:return ct.ABORTED;case dn.OUT_OF_RANGE:return ct.OUT_OF_RANGE;case dn.UNIMPLEMENTED:return ct.UNIMPLEMENTED;case dn.DATA_LOSS:return ct.DATA_LOSS;default:return Ft(39323,{code:n})}}(ae=dn||(dn={}))[ae.OK=0]="OK",ae[ae.CANCELLED=1]="CANCELLED",ae[ae.UNKNOWN=2]="UNKNOWN",ae[ae.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ae[ae.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ae[ae.NOT_FOUND=5]="NOT_FOUND",ae[ae.ALREADY_EXISTS=6]="ALREADY_EXISTS",ae[ae.PERMISSION_DENIED=7]="PERMISSION_DENIED",ae[ae.UNAUTHENTICATED=16]="UNAUTHENTICATED",ae[ae.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ae[ae.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ae[ae.ABORTED=10]="ABORTED",ae[ae.OUT_OF_RANGE=11]="OUT_OF_RANGE",ae[ae.UNIMPLEMENTED=12]="UNIMPLEMENTED",ae[ae.INTERNAL=13]="INTERNAL",ae[ae.UNAVAILABLE=14]="UNAVAILABLE",ae[ae.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P5=new mo([4294967295,4294967295],0);function kb(n){const t=II().encode(n),e=new _I;return e.update(t),new Uint8Array(e.digest())}function Lb(n){const t=new DataView(n.buffer),e=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),a=t.getUint32(12,!0);return[new mo([e,r],0),new mo([i,a],0)]}class Gx{constructor(t,e,r){if(this.bitmap=t,this.padding=e,this.hashCount=r,e<0||e>=8)throw new hh(`Invalid padding: ${e}`);if(r<0)throw new hh(`Invalid hash count: ${r}`);if(t.length>0&&this.hashCount===0)throw new hh(`Invalid hash count: ${r}`);if(t.length===0&&e!==0)throw new hh(`Invalid padding when bitmap length is 0: ${e}`);this.fe=8*t.length-e,this.ge=mo.fromNumber(this.fe)}pe(t,e,r){let i=t.add(e.multiply(mo.fromNumber(r)));return i.compare(P5)===1&&(i=new mo([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ge).toNumber()}ye(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.fe===0)return!1;const e=kb(t),[r,i]=Lb(e);for(let a=0;a<this.hashCount;a++){const s=this.pe(r,i,a);if(!this.ye(s))return!1}return!0}static create(t,e,r){const i=t%8==0?0:8-t%8,a=new Uint8Array(Math.ceil(t/8)),s=new Gx(a,i,e);return r.forEach(l=>s.insert(l)),s}insert(t){if(this.fe===0)return;const e=kb(t),[r,i]=Lb(e);for(let a=0;a<this.hashCount;a++){const s=this.pe(r,i,a);this.we(s)}}we(t){const e=Math.floor(t/8),r=t%8;this.bitmap[e]|=1<<r}}class hh extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bg{constructor(t,e,r,i,a){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(t,e,r){const i=new Map;return i.set(t,nd.createSynthesizedTargetChangeForCurrentChange(t,e,r)),new Bg(Ht.min(),i,new Qe(Yt),ls(),ee())}}class nd{constructor(t,e,r,i,a){this.resumeToken=t,this.current=e,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(t,e,r){return new nd(r,e,ee(),ee(),ee())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S1{constructor(t,e,r,i){this.Se=t,this.removedTargetIds=e,this.key=r,this.be=i}}class s3{constructor(t,e){this.targetId=t,this.De=e}}class o3{constructor(t,e,r=rr.EMPTY_BYTE_STRING,i=null){this.state=t,this.targetIds=e,this.resumeToken=r,this.cause=i}}class Bb{constructor(){this.ve=0,this.Ce=Vb(),this.Fe=rr.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(t){t.approximateByteSize()>0&&(this.xe=!0,this.Fe=t)}Le(){let t=ee(),e=ee(),r=ee();return this.Ce.forEach((i,a)=>{switch(a){case 0:t=t.add(i);break;case 2:e=e.add(i);break;case 1:r=r.add(i);break;default:Ft(38017,{changeType:a})}}),new nd(this.Fe,this.Me,t,e,r)}ke(){this.xe=!1,this.Ce=Vb()}qe(t,e){this.xe=!0,this.Ce=this.Ce.insert(t,e)}Qe(t){this.xe=!0,this.Ce=this.Ce.remove(t)}$e(){this.ve+=1}Ue(){this.ve-=1,Ee(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class k5{constructor(t){this.We=t,this.Ge=new Map,this.ze=ls(),this.je=K0(),this.Je=K0(),this.He=new Qe(Yt)}Ye(t){for(const e of t.Se)t.be&&t.be.isFoundDocument()?this.Ze(e,t.be):this.Xe(e,t.key,t.be);for(const e of t.removedTargetIds)this.Xe(e,t.key,t.be)}et(t){this.forEachTarget(t,e=>{const r=this.tt(e);switch(t.state){case 0:this.nt(e)&&r.Be(t.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(t.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(e);break;case 3:this.nt(e)&&(r.Ke(),r.Be(t.resumeToken));break;case 4:this.nt(e)&&(this.rt(e),r.Be(t.resumeToken));break;default:Ft(56790,{state:t.state})}})}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.Ge.forEach((r,i)=>{this.nt(i)&&e(i)})}it(t){const e=t.targetId,r=t.De.count,i=this.st(e);if(i){const a=i.target;if(Iy(a))if(r===0){const s=new Ot(a.path);this.Xe(e,s,hr.newNoDocument(s,Ht.min()))}else Ee(r===1,20013,{expectedCount:r});else{const s=this.ot(e);if(s!==r){const l=this._t(t),c=l?this.ut(l,t,s):1;if(c!==0){this.rt(e);const f=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(e,f)}}}}}_t(t){const e=t.De.unchangedNames;if(!e||!e.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:a=0}=e;let s,l;try{s=Eo(r).toUint8Array()}catch(c){if(c instanceof MI)return _o("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new Gx(s,i,a)}catch(c){return _o(c instanceof hh?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.fe===0?null:l}ut(t,e,r){return e.De.count===r-this.ht(t,e.targetId)?0:2}ht(t,e){const r=this.We.getRemoteKeysForTarget(e);let i=0;return r.forEach(a=>{const s=this.We.lt(),l=`projects/${s.projectId}/databases/${s.database}/documents/${a.path.canonicalString()}`;t.mightContain(l)||(this.Xe(e,a,null),i++)}),i}Pt(t){const e=new Map;this.Ge.forEach((a,s)=>{const l=this.st(s);if(l){if(a.current&&Iy(l.target)){const c=new Ot(l.target.path);this.Tt(c).has(s)||this.It(s,c)||this.Xe(s,c,hr.newNoDocument(c,t))}a.Ne&&(e.set(s,a.Le()),a.ke())}});let r=ee();this.Je.forEach((a,s)=>{let l=!0;s.forEachWhile(c=>{const f=this.st(c);return!f||f.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(a))}),this.ze.forEach((a,s)=>s.setReadTime(t));const i=new Bg(t,e,this.He,this.ze,r);return this.ze=ls(),this.je=K0(),this.Je=K0(),this.He=new Qe(Yt),i}Ze(t,e){if(!this.nt(t))return;const r=this.It(t,e.key)?2:0;this.tt(t).qe(e.key,r),this.ze=this.ze.insert(e.key,e),this.je=this.je.insert(e.key,this.Tt(e.key).add(t)),this.Je=this.Je.insert(e.key,this.dt(e.key).add(t))}Xe(t,e,r){if(!this.nt(t))return;const i=this.tt(t);this.It(t,e)?i.qe(e,1):i.Qe(e),this.Je=this.Je.insert(e,this.dt(e).delete(t)),this.Je=this.Je.insert(e,this.dt(e).add(t)),r&&(this.ze=this.ze.insert(e,r))}removeTarget(t){this.Ge.delete(t)}ot(t){const e=this.tt(t).Le();return this.We.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}$e(t){this.tt(t).$e()}tt(t){let e=this.Ge.get(t);return e||(e=new Bb,this.Ge.set(t,e)),e}dt(t){let e=this.Je.get(t);return e||(e=new Mn(Yt),this.Je=this.Je.insert(t,e)),e}Tt(t){let e=this.je.get(t);return e||(e=new Mn(Yt),this.je=this.je.insert(t,e)),e}nt(t){const e=this.st(t)!==null;return e||bt("WatchChangeAggregator","Detected inactive target",t),e}st(t){const e=this.Ge.get(t);return e&&e.Oe?null:this.We.Et(t)}rt(t){this.Ge.set(t,new Bb),this.We.getRemoteKeysForTarget(t).forEach(e=>{this.Xe(t,e,null)})}It(t,e){return this.We.getRemoteKeysForTarget(t).has(e)}}function K0(){return new Qe(Ot.comparator)}function Vb(){return new Qe(Ot.comparator)}const L5={asc:"ASCENDING",desc:"DESCENDING"},B5={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},V5={and:"AND",or:"OR"};class F5{constructor(t,e){this.databaseId=t,this.useProto3Json=e}}function Dy(n,t){return n.useProto3Json||Dg(t)?t:{value:t}}function W1(n,t){return n.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function l3(n,t){return n.useProto3Json?t.toBase64():t.toUint8Array()}function U5(n,t){return W1(n,t.toTimestamp())}function fa(n){return Ee(!!n,49232),Ht.fromTimestamp(function(e){const r=wo(e);return new He(r.seconds,r.nanos)}(n))}function $x(n,t){return Oy(n,t).canonicalString()}function Oy(n,t){const e=function(i){return new Le(["projects",i.projectId,"databases",i.database])}(n).child("documents");return t===void 0?e:e.child(t)}function u3(n){const t=Le.fromString(n);return Ee(g3(t),10190,{key:t.toString()}),t}function My(n,t){return $x(n.databaseId,t.path)}function Sv(n,t){const e=u3(t);if(e.get(1)!==n.databaseId.projectId)throw new At(ct.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+e.get(1)+" vs "+n.databaseId.projectId);if(e.get(3)!==n.databaseId.database)throw new At(ct.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+e.get(3)+" vs "+n.databaseId.database);return new Ot(f3(e))}function c3(n,t){return $x(n.databaseId,t)}function j5(n){const t=u3(n);return t.length===4?Le.emptyPath():f3(t)}function Ny(n){return new Le(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function f3(n){return Ee(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function Fb(n,t,e){return{name:My(n,t),fields:e.value.mapValue.fields}}function z5(n,t){let e;if("targetChange"in t){t.targetChange;const r=function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:Ft(39313,{state:f})}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],a=function(f,d){return f.useProto3Json?(Ee(d===void 0||typeof d=="string",58123),rr.fromBase64String(d||"")):(Ee(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),rr.fromUint8Array(d||new Uint8Array))}(n,t.targetChange.resumeToken),s=t.targetChange.cause,l=s&&function(f){const d=f.code===void 0?ct.UNKNOWN:a3(f.code);return new At(d,f.message||"")}(s);e=new o3(r,i,a,l||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=Sv(n,r.document.name),a=fa(r.document.updateTime),s=r.document.createTime?fa(r.document.createTime):Ht.min(),l=new Nr({mapValue:{fields:r.document.fields}}),c=hr.newFoundDocument(i,a,s,l),f=r.targetIds||[],d=r.removedTargetIds||[];e=new S1(f,d,c.key,c)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=Sv(n,r.document),a=r.readTime?fa(r.readTime):Ht.min(),s=hr.newNoDocument(i,a),l=r.removedTargetIds||[];e=new S1([],l,s.key,s)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=Sv(n,r.document),a=r.removedTargetIds||[];e=new S1([],a,i,null)}else{if(!("filter"in t))return Ft(11601,{At:t});{t.filter;const r=t.filter;r.targetId;const{count:i=0,unchangedNames:a}=r,s=new M5(i,a),l=r.targetId;e=new s3(l,s)}}return e}function H5(n,t){let e;if(t instanceof ed)e={update:Fb(n,t.key,t.value)};else if(t instanceof Lg)e={delete:My(n,t.key)};else if(t instanceof Do)e={update:Fb(n,t.key,t.data),updateMask:Q5(t.fieldMask)};else{if(!(t instanceof R5))return Ft(16599,{Rt:t.type});e={verify:My(n,t.key)}}return t.fieldTransforms.length>0&&(e.updateTransforms=t.fieldTransforms.map(r=>function(a,s){const l=s.transform;if(l instanceof Lh)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Bh)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Vh)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof q1)return{fieldPath:s.field.canonicalString(),increment:l.Ee};throw Ft(20930,{transform:s.transform})}(0,r))),t.precondition.isNone||(e.currentDocument=function(i,a){return a.updateTime!==void 0?{updateTime:U5(i,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:Ft(27497)}(n,t.precondition)),e}function G5(n,t){return n&&n.length>0?(Ee(t!==void 0,14353),n.map(e=>function(i,a){let s=i.updateTime?fa(i.updateTime):fa(a);return s.isEqual(Ht.min())&&(s=fa(a)),new T5(s,i.transformResults||[])}(e,t))):[]}function $5(n,t){return{documents:[c3(n,t.path)]}}function q5(n,t){const e={structuredQuery:{}},r=t.path;let i;t.collectionGroup!==null?(i=r,e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),e.structuredQuery.from=[{collectionId:r.lastSegment()}]),e.parent=c3(n,i);const a=function(f){if(f.length!==0)return d3(Ui.create(f,"and"))}(t.filters);a&&(e.structuredQuery.where=a);const s=function(f){if(f.length!==0)return f.map(d=>function(m){return{field:Wu(m.field),direction:Y5(m.dir)}}(d))}(t.orderBy);s&&(e.structuredQuery.orderBy=s);const l=Dy(n,t.limit);return l!==null&&(e.structuredQuery.limit=l),t.startAt&&(e.structuredQuery.startAt=function(f){return{before:f.inclusive,values:f.position}}(t.startAt)),t.endAt&&(e.structuredQuery.endAt=function(f){return{before:!f.inclusive,values:f.position}}(t.endAt)),{Vt:e,parent:i}}function W5(n){let t=j5(n.parent);const e=n.structuredQuery,r=e.from?e.from.length:0;let i=null;if(r>0){Ee(r===1,65062);const d=e.from[0];d.allDescendants?i=d.collectionId:t=t.child(d.collectionId)}let a=[];e.where&&(a=function(g){const m=h3(g);return m instanceof Ui&&zI(m)?m.getFilters():[m]}(e.where));let s=[];e.orderBy&&(s=function(g){return g.map(m=>function(_){return new kh(Xu(_.field),function(b){switch(b){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(_.direction))}(m))}(e.orderBy));let l=null;e.limit&&(l=function(g){let m;return m=typeof g=="object"?g.value:g,Dg(m)?null:m}(e.limit));let c=null;e.startAt&&(c=function(g){const m=!!g.before,v=g.values||[];return new G1(v,m)}(e.startAt));let f=null;return e.endAt&&(f=function(g){const m=!g.before,v=g.values||[];return new G1(v,m)}(e.endAt)),h5(t,i,s,a,l,"F",c,f)}function X5(n,t){const e=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ft(28987,{purpose:i})}}(t.purpose);return e==null?null:{"goog-listen-tags":e}}function h3(n){return n.unaryFilter!==void 0?function(e){switch(e.unaryFilter.op){case"IS_NAN":const r=Xu(e.unaryFilter.field);return vn.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Xu(e.unaryFilter.field);return vn.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=Xu(e.unaryFilter.field);return vn.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=Xu(e.unaryFilter.field);return vn.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ft(61313);default:return Ft(60726)}}(n):n.fieldFilter!==void 0?function(e){return vn.create(Xu(e.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ft(58110);default:return Ft(50506)}}(e.fieldFilter.op),e.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(e){return Ui.create(e.compositeFilter.filters.map(r=>h3(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Ft(1026)}}(e.compositeFilter.op))}(n):Ft(30097,{filter:n})}function Y5(n){return L5[n]}function K5(n){return B5[n]}function Z5(n){return V5[n]}function Wu(n){return{fieldPath:n.canonicalString()}}function Xu(n){return er.fromServerFormat(n.fieldPath)}function d3(n){return n instanceof vn?function(e){if(e.op==="=="){if(Tb(e.value))return{unaryFilter:{field:Wu(e.field),op:"IS_NAN"}};if(Sb(e.value))return{unaryFilter:{field:Wu(e.field),op:"IS_NULL"}}}else if(e.op==="!="){if(Tb(e.value))return{unaryFilter:{field:Wu(e.field),op:"IS_NOT_NAN"}};if(Sb(e.value))return{unaryFilter:{field:Wu(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Wu(e.field),op:K5(e.op),value:e.value}}}(n):n instanceof Ui?function(e){const r=e.getFilters().map(i=>d3(i));return r.length===1?r[0]:{compositeFilter:{op:Z5(e.op),filters:r}}}(n):Ft(54877,{filter:n})}function Q5(n){const t=[];return n.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function g3(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lo{constructor(t,e,r,i,a=Ht.min(),s=Ht.min(),l=rr.EMPTY_BYTE_STRING,c=null){this.target=t,this.targetId=e,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(t){return new lo(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,e){return new lo(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new lo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new lo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J5{constructor(t){this.gt=t}}function t9(n){const t=W5({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?$1(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e9{constructor(){this.Dn=new n9}addToCollectionParentIndex(t,e){return this.Dn.add(e),gt.resolve()}getCollectionParents(t,e){return gt.resolve(this.Dn.getEntries(e))}addFieldIndex(t,e){return gt.resolve()}deleteFieldIndex(t,e){return gt.resolve()}deleteAllFieldIndexes(t){return gt.resolve()}createTargetIndexes(t,e){return gt.resolve()}getDocumentsMatchingTarget(t,e){return gt.resolve(null)}getIndexType(t,e){return gt.resolve(0)}getFieldIndexes(t,e){return gt.resolve([])}getNextCollectionGroupToUpdate(t){return gt.resolve(null)}getMinOffset(t,e){return gt.resolve(Ao.min())}getMinOffsetFromCollectionGroup(t,e){return gt.resolve(Ao.min())}updateCollectionGroup(t,e,r){return gt.resolve()}updateIndexEntries(t,e){return gt.resolve()}}class n9{constructor(){this.index={}}add(t){const e=t.lastSegment(),r=t.popLast(),i=this.index[e]||new Mn(Le.comparator),a=!i.has(r);return this.index[e]=i.add(r),a}has(t){const e=t.lastSegment(),r=t.popLast(),i=this.index[e];return i&&i.has(r)}getEntries(t){return(this.index[t]||new Mn(Le.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ub={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},p3=41943040;class Mr{static withCacheSize(t){return new Mr(t,Mr.DEFAULT_COLLECTION_PERCENTILE,Mr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,e,r){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Mr.DEFAULT_COLLECTION_PERCENTILE=10,Mr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Mr.DEFAULT=new Mr(p3,Mr.DEFAULT_COLLECTION_PERCENTILE,Mr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Mr.DISABLED=new Mr(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vc{constructor(t){this._r=t}next(){return this._r+=2,this._r}static ar(){return new vc(0)}static ur(){return new vc(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jb="LruGarbageCollector",r9=1048576;function zb([n,t],[e,r]){const i=Yt(n,e);return i===0?Yt(t,r):i}class i9{constructor(t){this.Tr=t,this.buffer=new Mn(zb),this.Ir=0}dr(){return++this.Ir}Er(t){const e=[t,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(e);else{const r=this.buffer.last();zb(e,r)<0&&(this.buffer=this.buffer.delete(r).add(e))}}get maxValue(){return this.buffer.last()[0]}}class a9{constructor(t,e,r){this.garbageCollector=t,this.asyncQueue=e,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(t){bt(jb,`Garbage collection scheduled in ${t}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){Pc(e)?bt(jb,"Ignoring IndexedDB error during garbage collection: ",e):await Nc(e)}await this.Rr(3e5)})}}class s9{constructor(t,e){this.Vr=t,this.params=e}calculateTargetCount(t,e){return this.Vr.mr(t).next(r=>Math.floor(e/100*r))}nthSequenceNumber(t,e){if(e===0)return gt.resolve(Rg.ue);const r=new i9(e);return this.Vr.forEachTarget(t,i=>r.Er(i.sequenceNumber)).next(()=>this.Vr.gr(t,i=>r.Er(i))).next(()=>r.maxValue)}removeTargets(t,e,r){return this.Vr.removeTargets(t,e,r)}removeOrphanedDocuments(t,e){return this.Vr.removeOrphanedDocuments(t,e)}collect(t,e){return this.params.cacheSizeCollectionThreshold===-1?(bt("LruGarbageCollector","Garbage collection skipped; disabled"),gt.resolve(Ub)):this.getCacheSize(t).next(r=>r<this.params.cacheSizeCollectionThreshold?(bt("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Ub):this.pr(t,e))}getCacheSize(t){return this.Vr.getCacheSize(t)}pr(t,e){let r,i,a,s,l,c,f;const d=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(g=>(g>this.params.maximumSequenceNumbersToCollect?(bt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${g}`),i=this.params.maximumSequenceNumbersToCollect):i=g,s=Date.now(),this.nthSequenceNumber(t,i))).next(g=>(r=g,l=Date.now(),this.removeTargets(t,r,e))).next(g=>(a=g,c=Date.now(),this.removeOrphanedDocuments(t,r))).next(g=>(f=Date.now(),$u()<=te.DEBUG&&bt("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-d}ms
	Determined least recently used ${i} in `+(l-s)+`ms
	Removed ${a} targets in `+(c-l)+`ms
	Removed ${g} documents in `+(f-c)+`ms
Total Duration: ${f-d}ms`),gt.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:g})))}}function o9(n,t){return new s9(n,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l9{constructor(){this.changes=new Fl(t=>t.toString(),(t,e)=>t.isEqual(e)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,hr.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();const r=this.changes.get(e);return r!==void 0?gt.resolve(r):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u9{constructor(t,e){this.overlayedDocument=t,this.mutatedFields=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c9{constructor(t,e,r,i){this.remoteDocumentCache=t,this.mutationQueue=e,this.documentOverlayCache=r,this.indexManager=i}getDocument(t,e){let r=null;return this.documentOverlayCache.getOverlay(t,e).next(i=>(r=i,this.remoteDocumentCache.getEntry(t,e))).next(i=>(r!==null&&Th(r.mutation,i,Yr.empty(),He.now()),i))}getDocuments(t,e){return this.remoteDocumentCache.getEntries(t,e).next(r=>this.getLocalViewOfDocuments(t,r,ee()).next(()=>r))}getLocalViewOfDocuments(t,e,r=ee()){const i=Al();return this.populateOverlays(t,i,e).next(()=>this.computeViews(t,e,i,r).next(a=>{let s=fh();return a.forEach((l,c)=>{s=s.insert(l,c.overlayedDocument)}),s}))}getOverlayedDocuments(t,e){const r=Al();return this.populateOverlays(t,r,e).next(()=>this.computeViews(t,e,r,ee()))}populateOverlays(t,e,r){const i=[];return r.forEach(a=>{e.has(a)||i.push(a)}),this.documentOverlayCache.getOverlays(t,i).next(a=>{a.forEach((s,l)=>{e.set(s,l)})})}computeViews(t,e,r,i){let a=ls();const s=Sh(),l=function(){return Sh()}();return e.forEach((c,f)=>{const d=r.get(f.key);i.has(f.key)&&(d===void 0||d.mutation instanceof Do)?a=a.insert(f.key,f):d!==void 0?(s.set(f.key,d.mutation.getFieldMask()),Th(d.mutation,f,d.mutation.getFieldMask(),He.now())):s.set(f.key,Yr.empty())}),this.recalculateAndSaveOverlays(t,a).next(c=>(c.forEach((f,d)=>s.set(f,d)),e.forEach((f,d)=>{var g;return l.set(f,new u9(d,(g=s.get(f))!==null&&g!==void 0?g:null))}),l))}recalculateAndSaveOverlays(t,e){const r=Sh();let i=new Qe((s,l)=>s-l),a=ee();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next(s=>{for(const l of s)l.keys().forEach(c=>{const f=e.get(c);if(f===null)return;let d=r.get(c)||Yr.empty();d=l.applyToLocalView(f,d),r.set(c,d);const g=(i.get(l.batchId)||ee()).add(c);i=i.insert(l.batchId,g)})}).next(()=>{const s=[],l=i.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),f=c.key,d=c.value,g=ZI();d.forEach(m=>{if(!a.has(m)){const v=r3(e.get(m),r.get(m));v!==null&&g.set(m,v),a=a.add(m)}}),s.push(this.documentOverlayCache.saveOverlays(t,f,g))}return gt.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(t,e){return this.remoteDocumentCache.getEntries(t,e).next(r=>this.recalculateAndSaveOverlays(t,r))}getDocumentsMatchingQuery(t,e,r,i){return function(s){return Ot.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(e)?this.getDocumentsMatchingDocumentQuery(t,e.path):qI(e)?this.getDocumentsMatchingCollectionGroupQuery(t,e,r,i):this.getDocumentsMatchingCollectionQuery(t,e,r,i)}getNextDocuments(t,e,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,r,i).next(a=>{const s=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,e,r.largestBatchId,i-a.size):gt.resolve(Al());let l=Oh,c=a;return s.next(f=>gt.forEach(f,(d,g)=>(l<g.largestBatchId&&(l=g.largestBatchId),a.get(d)?gt.resolve():this.remoteDocumentCache.getEntry(t,d).next(m=>{c=c.insert(d,m)}))).next(()=>this.populateOverlays(t,f,a)).next(()=>this.computeViews(t,c,f,ee())).next(d=>({batchId:l,changes:KI(d)})))})}getDocumentsMatchingDocumentQuery(t,e){return this.getDocument(t,new Ot(e)).next(r=>{let i=fh();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(t,e,r,i){const a=e.collectionGroup;let s=fh();return this.indexManager.getCollectionParents(t,a).next(l=>gt.forEach(l,c=>{const f=function(g,m){return new Vl(m,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)}(e,c.child(a));return this.getDocumentsMatchingCollectionQuery(t,f,r,i).next(d=>{d.forEach((g,m)=>{s=s.insert(g,m)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(t,e,r,i){let a;return this.documentOverlayCache.getOverlaysForCollection(t,e.path,r.largestBatchId).next(s=>(a=s,this.remoteDocumentCache.getDocumentsMatchingQuery(t,e,r,a,i))).next(s=>{a.forEach((c,f)=>{const d=f.getKey();s.get(d)===null&&(s=s.insert(d,hr.newInvalidDocument(d)))});let l=fh();return s.forEach((c,f)=>{const d=a.get(c);d!==void 0&&Th(d.mutation,f,Yr.empty(),He.now()),Ng(e,f)&&(l=l.insert(c,f))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f9{constructor(t){this.serializer=t,this.Br=new Map,this.Lr=new Map}getBundleMetadata(t,e){return gt.resolve(this.Br.get(e))}saveBundleMetadata(t,e){return this.Br.set(e.id,function(i){return{id:i.id,version:i.version,createTime:fa(i.createTime)}}(e)),gt.resolve()}getNamedQuery(t,e){return gt.resolve(this.Lr.get(e))}saveNamedQuery(t,e){return this.Lr.set(e.name,function(i){return{name:i.name,query:t9(i.bundledQuery),readTime:fa(i.readTime)}}(e)),gt.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h9{constructor(){this.overlays=new Qe(Ot.comparator),this.kr=new Map}getOverlay(t,e){return gt.resolve(this.overlays.get(e))}getOverlays(t,e){const r=Al();return gt.forEach(e,i=>this.getOverlay(t,i).next(a=>{a!==null&&r.set(i,a)})).next(()=>r)}saveOverlays(t,e,r){return r.forEach((i,a)=>{this.wt(t,e,a)}),gt.resolve()}removeOverlaysForBatchId(t,e,r){const i=this.kr.get(r);return i!==void 0&&(i.forEach(a=>this.overlays=this.overlays.remove(a)),this.kr.delete(r)),gt.resolve()}getOverlaysForCollection(t,e,r){const i=Al(),a=e.length+1,s=new Ot(e.child("")),l=this.overlays.getIteratorFrom(s);for(;l.hasNext();){const c=l.getNext().value,f=c.getKey();if(!e.isPrefixOf(f.path))break;f.path.length===a&&c.largestBatchId>r&&i.set(c.getKey(),c)}return gt.resolve(i)}getOverlaysForCollectionGroup(t,e,r,i){let a=new Qe((f,d)=>f-d);const s=this.overlays.getIterator();for(;s.hasNext();){const f=s.getNext().value;if(f.getKey().getCollectionGroup()===e&&f.largestBatchId>r){let d=a.get(f.largestBatchId);d===null&&(d=Al(),a=a.insert(f.largestBatchId,d)),d.set(f.getKey(),f)}}const l=Al(),c=a.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((f,d)=>l.set(f,d)),!(l.size()>=i)););return gt.resolve(l)}wt(t,e,r){const i=this.overlays.get(r.key);if(i!==null){const s=this.kr.get(i.largestBatchId).delete(r.key);this.kr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new O5(e,r));let a=this.kr.get(e);a===void 0&&(a=ee(),this.kr.set(e,a)),this.kr.set(e,a.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d9{constructor(){this.sessionToken=rr.EMPTY_BYTE_STRING}getSessionToken(t){return gt.resolve(this.sessionToken)}setSessionToken(t,e){return this.sessionToken=e,gt.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qx{constructor(){this.qr=new Mn(Hn.Qr),this.$r=new Mn(Hn.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(t,e){const r=new Hn(t,e);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(t,e){t.forEach(r=>this.addReference(r,e))}removeReference(t,e){this.Wr(new Hn(t,e))}Gr(t,e){t.forEach(r=>this.removeReference(r,e))}zr(t){const e=new Ot(new Le([])),r=new Hn(e,t),i=new Hn(e,t+1),a=[];return this.$r.forEachInRange([r,i],s=>{this.Wr(s),a.push(s.key)}),a}jr(){this.qr.forEach(t=>this.Wr(t))}Wr(t){this.qr=this.qr.delete(t),this.$r=this.$r.delete(t)}Jr(t){const e=new Ot(new Le([])),r=new Hn(e,t),i=new Hn(e,t+1);let a=ee();return this.$r.forEachInRange([r,i],s=>{a=a.add(s.key)}),a}containsKey(t){const e=new Hn(t,0),r=this.qr.firstAfterOrEqual(e);return r!==null&&t.isEqual(r.key)}}class Hn{constructor(t,e){this.key=t,this.Hr=e}static Qr(t,e){return Ot.comparator(t.key,e.key)||Yt(t.Hr,e.Hr)}static Ur(t,e){return Yt(t.Hr,e.Hr)||Ot.comparator(t.key,e.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g9{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.er=1,this.Yr=new Mn(Hn.Qr)}checkEmpty(t){return gt.resolve(this.mutationQueue.length===0)}addMutationBatch(t,e,r,i){const a=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new D5(a,e,r,i);this.mutationQueue.push(s);for(const l of i)this.Yr=this.Yr.add(new Hn(l.key,a)),this.indexManager.addToCollectionParentIndex(t,l.key.path.popLast());return gt.resolve(s)}lookupMutationBatch(t,e){return gt.resolve(this.Zr(e))}getNextMutationBatchAfterBatchId(t,e){const r=e+1,i=this.Xr(r),a=i<0?0:i;return gt.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return gt.resolve(this.mutationQueue.length===0?Lx:this.er-1)}getAllMutationBatches(t){return gt.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const r=new Hn(e,0),i=new Hn(e,Number.POSITIVE_INFINITY),a=[];return this.Yr.forEachInRange([r,i],s=>{const l=this.Zr(s.Hr);a.push(l)}),gt.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(t,e){let r=new Mn(Yt);return e.forEach(i=>{const a=new Hn(i,0),s=new Hn(i,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([a,s],l=>{r=r.add(l.Hr)})}),gt.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(t,e){const r=e.path,i=r.length+1;let a=r;Ot.isDocumentKey(a)||(a=a.child(""));const s=new Hn(new Ot(a),0);let l=new Mn(Yt);return this.Yr.forEachWhile(c=>{const f=c.key.path;return!!r.isPrefixOf(f)&&(f.length===i&&(l=l.add(c.Hr)),!0)},s),gt.resolve(this.ei(l))}ei(t){const e=[];return t.forEach(r=>{const i=this.Zr(r);i!==null&&e.push(i)}),e}removeMutationBatch(t,e){Ee(this.ti(e.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return gt.forEach(e.mutations,i=>{const a=new Hn(i.key,e.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(t,i.key)}).next(()=>{this.Yr=r})}rr(t){}containsKey(t,e){const r=new Hn(e,0),i=this.Yr.firstAfterOrEqual(r);return gt.resolve(e.isEqual(i&&i.key))}performConsistencyCheck(t){return this.mutationQueue.length,gt.resolve()}ti(t,e){return this.Xr(t)}Xr(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Zr(t){const e=this.Xr(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p9{constructor(t){this.ni=t,this.docs=function(){return new Qe(Ot.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){const r=e.key,i=this.docs.get(r),a=i?i.size:0,s=this.ni(e);return this.docs=this.docs.insert(r,{document:e.mutableCopy(),size:s}),this.size+=s-a,this.indexManager.addToCollectionParentIndex(t,r.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const r=this.docs.get(e);return gt.resolve(r?r.document.mutableCopy():hr.newInvalidDocument(e))}getEntries(t,e){let r=ls();return e.forEach(i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():hr.newInvalidDocument(i))}),gt.resolve(r)}getDocumentsMatchingQuery(t,e,r,i){let a=ls();const s=e.path,l=new Ot(s.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:f,value:{document:d}}=c.getNext();if(!s.isPrefixOf(f.path))break;f.path.length>s.length+1||GP(HP(d),r)<=0||(i.has(d.key)||Ng(e,d))&&(a=a.insert(d.key,d.mutableCopy()))}return gt.resolve(a)}getAllFromCollectionGroup(t,e,r,i){Ft(9500)}ri(t,e){return gt.forEach(this.docs,r=>e(r))}newChangeBuffer(t){return new m9(this)}getSize(t){return gt.resolve(this.size)}}class m9 extends l9{constructor(t){super(),this.Or=t}applyChanges(t){const e=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?e.push(this.Or.addEntry(t,i)):this.Or.removeEntry(r)}),gt.waitFor(e)}getFromCache(t,e){return this.Or.getEntry(t,e)}getAllFromCache(t,e){return this.Or.getEntries(t,e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v9{constructor(t){this.persistence=t,this.ii=new Fl(e=>Fx(e),Ux),this.lastRemoteSnapshotVersion=Ht.min(),this.highestTargetId=0,this.si=0,this.oi=new qx,this.targetCount=0,this._i=vc.ar()}forEachTarget(t,e){return this.ii.forEach((r,i)=>e(i)),gt.resolve()}getLastRemoteSnapshotVersion(t){return gt.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return gt.resolve(this.si)}allocateTargetId(t){return this.highestTargetId=this._i.next(),gt.resolve(this.highestTargetId)}setTargetsMetadata(t,e,r){return r&&(this.lastRemoteSnapshotVersion=r),e>this.si&&(this.si=e),gt.resolve()}hr(t){this.ii.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this._i=new vc(e),this.highestTargetId=e),t.sequenceNumber>this.si&&(this.si=t.sequenceNumber)}addTargetData(t,e){return this.hr(e),this.targetCount+=1,gt.resolve()}updateTargetData(t,e){return this.hr(e),gt.resolve()}removeTargetData(t,e){return this.ii.delete(e.target),this.oi.zr(e.targetId),this.targetCount-=1,gt.resolve()}removeTargets(t,e,r){let i=0;const a=[];return this.ii.forEach((s,l)=>{l.sequenceNumber<=e&&r.get(l.targetId)===null&&(this.ii.delete(s),a.push(this.removeMatchingKeysForTargetId(t,l.targetId)),i++)}),gt.waitFor(a).next(()=>i)}getTargetCount(t){return gt.resolve(this.targetCount)}getTargetData(t,e){const r=this.ii.get(e)||null;return gt.resolve(r)}addMatchingKeys(t,e,r){return this.oi.Kr(e,r),gt.resolve()}removeMatchingKeys(t,e,r){this.oi.Gr(e,r);const i=this.persistence.referenceDelegate,a=[];return i&&e.forEach(s=>{a.push(i.markPotentiallyOrphaned(t,s))}),gt.waitFor(a)}removeMatchingKeysForTargetId(t,e){return this.oi.zr(e),gt.resolve()}getMatchingKeysForTargetId(t,e){const r=this.oi.Jr(e);return gt.resolve(r)}containsKey(t,e){return gt.resolve(this.oi.containsKey(e))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m3{constructor(t,e){this.ai={},this.overlays={},this.ui=new Rg(0),this.ci=!1,this.ci=!0,this.li=new d9,this.referenceDelegate=t(this),this.hi=new v9(this),this.indexManager=new e9,this.remoteDocumentCache=function(i){return new p9(i)}(r=>this.referenceDelegate.Pi(r)),this.serializer=new J5(e),this.Ti=new f9(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new h9,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let r=this.ai[t.toKey()];return r||(r=new g9(e,this.referenceDelegate),this.ai[t.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(t,e,r){bt("MemoryPersistence","Starting transaction:",t);const i=new y9(this.ui.next());return this.referenceDelegate.Ii(),r(i).next(a=>this.referenceDelegate.di(i).next(()=>a)).toPromise().then(a=>(i.raiseOnCommittedEvent(),a))}Ei(t,e){return gt.or(Object.values(this.ai).map(r=>()=>r.containsKey(t,e)))}}class y9 extends qP{constructor(t){super(),this.currentSequenceNumber=t}}class Wx{constructor(t){this.persistence=t,this.Ai=new qx,this.Ri=null}static Vi(t){return new Wx(t)}get mi(){if(this.Ri)return this.Ri;throw Ft(60996)}addReference(t,e,r){return this.Ai.addReference(r,e),this.mi.delete(r.toString()),gt.resolve()}removeReference(t,e,r){return this.Ai.removeReference(r,e),this.mi.add(r.toString()),gt.resolve()}markPotentiallyOrphaned(t,e){return this.mi.add(e.toString()),gt.resolve()}removeTarget(t,e){this.Ai.zr(e.targetId).forEach(i=>this.mi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,e.targetId).next(i=>{i.forEach(a=>this.mi.add(a.toString()))}).next(()=>r.removeTargetData(t,e))}Ii(){this.Ri=new Set}di(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return gt.forEach(this.mi,r=>{const i=Ot.fromPath(r);return this.fi(t,i).next(a=>{a||e.removeEntry(i,Ht.min())})}).next(()=>(this.Ri=null,e.apply(t)))}updateLimboDocument(t,e){return this.fi(t,e).next(r=>{r?this.mi.delete(e.toString()):this.mi.add(e.toString())})}Pi(t){return 0}fi(t,e){return gt.or([()=>gt.resolve(this.Ai.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.Ei(t,e)])}}class X1{constructor(t,e){this.persistence=t,this.gi=new Fl(r=>YP(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=o9(this,e)}static Vi(t,e){return new X1(t,e)}Ii(){}di(t){return gt.resolve()}forEachTarget(t,e){return this.persistence.getTargetCache().forEachTarget(t,e)}mr(t){const e=this.yr(t);return this.persistence.getTargetCache().getTargetCount(t).next(r=>e.next(i=>r+i))}yr(t){let e=0;return this.gr(t,r=>{e++}).next(()=>e)}gr(t,e){return gt.forEach(this.gi,(r,i)=>this.Sr(t,r,i).next(a=>a?gt.resolve():e(i)))}removeTargets(t,e,r){return this.persistence.getTargetCache().removeTargets(t,e,r)}removeOrphanedDocuments(t,e){let r=0;const i=this.persistence.getRemoteDocumentCache(),a=i.newChangeBuffer();return i.ri(t,s=>this.Sr(t,s,e).next(l=>{l||(r++,a.removeEntry(s,Ht.min()))})).next(()=>a.apply(t)).next(()=>r)}markPotentiallyOrphaned(t,e){return this.gi.set(e,t.currentSequenceNumber),gt.resolve()}removeTarget(t,e){const r=e.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,r)}addReference(t,e,r){return this.gi.set(r,t.currentSequenceNumber),gt.resolve()}removeReference(t,e,r){return this.gi.set(r,t.currentSequenceNumber),gt.resolve()}updateLimboDocument(t,e){return this.gi.set(e,t.currentSequenceNumber),gt.resolve()}Pi(t){let e=t.key.toString().length;return t.isFoundDocument()&&(e+=w1(t.data.value)),e}Sr(t,e,r){return gt.or([()=>this.persistence.Ei(t,e),()=>this.persistence.getTargetCache().containsKey(t,e),()=>{const i=this.gi.get(e);return gt.resolve(i!==void 0&&i>r)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xx{constructor(t,e,r,i){this.targetId=t,this.fromCache=e,this.Is=r,this.ds=i}static Es(t,e){let r=ee(),i=ee();for(const a of e.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new Xx(t,e.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x9{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _9{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=function(){return ZD()?8:WP(gr())>0?6:4}()}initialize(t,e){this.gs=t,this.indexManager=e,this.As=!0}getDocumentsMatchingQuery(t,e,r,i){const a={result:null};return this.ps(t,e).next(s=>{a.result=s}).next(()=>{if(!a.result)return this.ys(t,e,i,r).next(s=>{a.result=s})}).next(()=>{if(a.result)return;const s=new x9;return this.ws(t,e,s).next(l=>{if(a.result=l,this.Rs)return this.Ss(t,e,s,l.size)})}).next(()=>a.result)}Ss(t,e,r,i){return r.documentReadCount<this.Vs?($u()<=te.DEBUG&&bt("QueryEngine","SDK will not create cache indexes for query:",qu(e),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),gt.resolve()):($u()<=te.DEBUG&&bt("QueryEngine","Query:",qu(e),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.fs*i?($u()<=te.DEBUG&&bt("QueryEngine","The SDK decides to create cache indexes for query:",qu(e),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,ca(e))):gt.resolve())}ps(t,e){if(Db(e))return gt.resolve(null);let r=ca(e);return this.indexManager.getIndexType(t,r).next(i=>i===0?null:(e.limit!==null&&i===1&&(e=$1(e,null,"F"),r=ca(e)),this.indexManager.getDocumentsMatchingTarget(t,r).next(a=>{const s=ee(...a);return this.gs.getDocuments(t,s).next(l=>this.indexManager.getMinOffset(t,r).next(c=>{const f=this.bs(e,l);return this.Ds(e,f,s,c.readTime)?this.ps(t,$1(e,null,"F")):this.vs(t,f,e,c)}))})))}ys(t,e,r,i){return Db(e)||i.isEqual(Ht.min())?gt.resolve(null):this.gs.getDocuments(t,r).next(a=>{const s=this.bs(e,a);return this.Ds(e,s,r,i)?gt.resolve(null):($u()<=te.DEBUG&&bt("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),qu(e)),this.vs(t,s,e,zP(i,Oh)).next(l=>l))})}bs(t,e){let r=new Mn(XI(t));return e.forEach((i,a)=>{Ng(t,a)&&(r=r.add(a))}),r}Ds(t,e,r,i){if(t.limit===null)return!1;if(r.size!==e.size)return!0;const a=t.limitType==="F"?e.last():e.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}ws(t,e,r){return $u()<=te.DEBUG&&bt("QueryEngine","Using full collection scan to execute query:",qu(e)),this.gs.getDocumentsMatchingQuery(t,e,Ao.min(),r)}vs(t,e,r,i){return this.gs.getDocumentsMatchingQuery(t,r,i).next(a=>(e.forEach(s=>{a=a.insert(s.key,s)}),a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yx="LocalStore",A9=3e8;class w9{constructor(t,e,r,i){this.persistence=t,this.Cs=e,this.serializer=i,this.Fs=new Qe(Yt),this.Ms=new Fl(a=>Fx(a),Ux),this.xs=new Map,this.Os=t.getRemoteDocumentCache(),this.hi=t.getTargetCache(),this.Ti=t.getBundleCache(),this.Ns(r)}Ns(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new c9(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",e=>t.collect(e,this.Fs))}}function E9(n,t,e,r){return new w9(n,t,e,r)}async function v3(n,t){const e=Gt(n);return await e.persistence.runTransaction("Handle user change","readonly",r=>{let i;return e.mutationQueue.getAllMutationBatches(r).next(a=>(i=a,e.Ns(t),e.mutationQueue.getAllMutationBatches(r))).next(a=>{const s=[],l=[];let c=ee();for(const f of i){s.push(f.batchId);for(const d of f.mutations)c=c.add(d.key)}for(const f of a){l.push(f.batchId);for(const d of f.mutations)c=c.add(d.key)}return e.localDocuments.getDocuments(r,c).next(f=>({Bs:f,removedBatchIds:s,addedBatchIds:l}))})})}function b9(n,t){const e=Gt(n);return e.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=t.batch.keys(),a=e.Os.newChangeBuffer({trackRemovals:!0});return function(l,c,f,d){const g=f.batch,m=g.keys();let v=gt.resolve();return m.forEach(_=>{v=v.next(()=>d.getEntry(c,_)).next(w=>{const b=f.docVersions.get(_);Ee(b!==null,48541),w.version.compareTo(b)<0&&(g.applyToRemoteDocument(w,f),w.isValidDocument()&&(w.setReadTime(f.commitVersion),d.addEntry(w)))})}),v.next(()=>l.mutationQueue.removeMutationBatch(c,g))}(e,r,t,a).next(()=>a.apply(r)).next(()=>e.mutationQueue.performConsistencyCheck(r)).next(()=>e.documentOverlayCache.removeOverlaysForBatchId(r,i,t.batch.batchId)).next(()=>e.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let c=ee();for(let f=0;f<l.mutationResults.length;++f)l.mutationResults[f].transformResults.length>0&&(c=c.add(l.batch.mutations[f].key));return c}(t))).next(()=>e.localDocuments.getDocuments(r,i))})}function y3(n){const t=Gt(n);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.hi.getLastRemoteSnapshotVersion(e))}function S9(n,t){const e=Gt(n),r=t.snapshotVersion;let i=e.Fs;return e.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const s=e.Os.newChangeBuffer({trackRemovals:!0});i=e.Fs;const l=[];t.targetChanges.forEach((d,g)=>{const m=i.get(g);if(!m)return;l.push(e.hi.removeMatchingKeys(a,d.removedDocuments,g).next(()=>e.hi.addMatchingKeys(a,d.addedDocuments,g)));let v=m.withSequenceNumber(a.currentSequenceNumber);t.targetMismatches.get(g)!==null?v=v.withResumeToken(rr.EMPTY_BYTE_STRING,Ht.min()).withLastLimboFreeSnapshotVersion(Ht.min()):d.resumeToken.approximateByteSize()>0&&(v=v.withResumeToken(d.resumeToken,r)),i=i.insert(g,v),function(w,b,S){return w.resumeToken.approximateByteSize()===0||b.snapshotVersion.toMicroseconds()-w.snapshotVersion.toMicroseconds()>=A9?!0:S.addedDocuments.size+S.modifiedDocuments.size+S.removedDocuments.size>0}(m,v,d)&&l.push(e.hi.updateTargetData(a,v))});let c=ls(),f=ee();if(t.documentUpdates.forEach(d=>{t.resolvedLimboDocuments.has(d)&&l.push(e.persistence.referenceDelegate.updateLimboDocument(a,d))}),l.push(T9(a,s,t.documentUpdates).next(d=>{c=d.Ls,f=d.ks})),!r.isEqual(Ht.min())){const d=e.hi.getLastRemoteSnapshotVersion(a).next(g=>e.hi.setTargetsMetadata(a,a.currentSequenceNumber,r));l.push(d)}return gt.waitFor(l).next(()=>s.apply(a)).next(()=>e.localDocuments.getLocalViewOfDocuments(a,c,f)).next(()=>c)}).then(a=>(e.Fs=i,a))}function T9(n,t,e){let r=ee(),i=ee();return e.forEach(a=>r=r.add(a)),t.getEntries(n,r).next(a=>{let s=ls();return e.forEach((l,c)=>{const f=a.get(l);c.isFoundDocument()!==f.isFoundDocument()&&(i=i.add(l)),c.isNoDocument()&&c.version.isEqual(Ht.min())?(t.removeEntry(l,c.readTime),s=s.insert(l,c)):!f.isValidDocument()||c.version.compareTo(f.version)>0||c.version.compareTo(f.version)===0&&f.hasPendingWrites?(t.addEntry(c),s=s.insert(l,c)):bt(Yx,"Ignoring outdated watch update for ",l,". Current version:",f.version," Watch version:",c.version)}),{Ls:s,ks:i}})}function C9(n,t){const e=Gt(n);return e.persistence.runTransaction("Get next mutation batch","readonly",r=>(t===void 0&&(t=Lx),e.mutationQueue.getNextMutationBatchAfterBatchId(r,t)))}function I9(n,t){const e=Gt(n);return e.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return e.hi.getTargetData(r,t).next(a=>a?(i=a,gt.resolve(i)):e.hi.allocateTargetId(r).next(s=>(i=new lo(t,s,"TargetPurposeListen",r.currentSequenceNumber),e.hi.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=e.Fs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(e.Fs=e.Fs.insert(r.targetId,r),e.Ms.set(t,r.targetId)),r})}async function Py(n,t,e){const r=Gt(n),i=r.Fs.get(t),a=e?"readwrite":"readwrite-primary";try{e||await r.persistence.runTransaction("Release target",a,s=>r.persistence.referenceDelegate.removeTarget(s,i))}catch(s){if(!Pc(s))throw s;bt(Yx,`Failed to update sequence numbers for target ${t}: ${s}`)}r.Fs=r.Fs.remove(t),r.Ms.delete(i.target)}function Hb(n,t,e){const r=Gt(n);let i=Ht.min(),a=ee();return r.persistence.runTransaction("Execute query","readwrite",s=>function(c,f,d){const g=Gt(c),m=g.Ms.get(d);return m!==void 0?gt.resolve(g.Fs.get(m)):g.hi.getTargetData(f,d)}(r,s,ca(t)).next(l=>{if(l)return i=l.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(s,l.targetId).next(c=>{a=c})}).next(()=>r.Cs.getDocumentsMatchingQuery(s,t,e?i:Ht.min(),e?a:ee())).next(l=>(R9(r,g5(t),l),{documents:l,qs:a})))}function R9(n,t,e){let r=n.xs.get(t)||Ht.min();e.forEach((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),n.xs.set(t,r)}class Gb{constructor(){this.activeTargetIds=_5()}Gs(t){this.activeTargetIds=this.activeTargetIds.add(t)}zs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Ws(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class D9{constructor(){this.Fo=new Gb,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,r){}addLocalQueryTarget(t,e=!0){return e&&this.Fo.Gs(t),this.Mo[t]||"not-current"}updateQueryState(t,e,r){this.Mo[t]=e}removeLocalQueryTarget(t){this.Fo.zs(t)}isLocalQueryTarget(t){return this.Fo.activeTargetIds.has(t)}clearQueryState(t){delete this.Mo[t]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(t){return this.Fo.activeTargetIds.has(t)}start(){return this.Fo=new Gb,Promise.resolve()}handleUserChange(t,e,r){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O9{xo(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $b="ConnectivityMonitor";class qb{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(t){this.ko.push(t)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){bt($b,"Network connectivity changed: AVAILABLE");for(const t of this.ko)t(0)}Lo(){bt($b,"Network connectivity changed: UNAVAILABLE");for(const t of this.ko)t(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Z0=null;function ky(){return Z0===null?Z0=function(){return 268435456+Math.round(2147483648*Math.random())}():Z0++,"0x"+Z0.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tv="RestConnection",M9={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class N9{get Qo(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const e=t.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.$o=e+"://"+t.host,this.Uo=`projects/${r}/databases/${i}`,this.Ko=this.databaseId.database===z1?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(t,e,r,i,a){const s=ky(),l=this.Go(t,e.toUriEncodedString());bt(Tv,`Sending RPC '${t}' ${s}:`,l,r);const c={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(c,i,a);const{host:f}=new URL(l),d=Rc(f);return this.jo(t,l,c,r,d).then(g=>(bt(Tv,`Received RPC '${t}' ${s}: `,g),g),g=>{throw _o(Tv,`RPC '${t}' ${s} failed with error: `,g,"url: ",l,"request:",r),g})}Jo(t,e,r,i,a,s){return this.Wo(t,e,r,i,a)}zo(t,e,r){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Mc}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e&&e.headers.forEach((i,a)=>t[a]=i),r&&r.headers.forEach((i,a)=>t[a]=i)}Go(t,e){const r=M9[t];return`${this.$o}/v1/${e}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P9{constructor(t){this.Ho=t.Ho,this.Yo=t.Yo}Zo(t){this.Xo=t}e_(t){this.t_=t}n_(t){this.r_=t}onMessage(t){this.i_=t}close(){this.Yo()}send(t){this.Ho(t)}s_(){this.Xo()}o_(){this.t_()}__(t){this.r_(t)}a_(t){this.i_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sr="WebChannelConnection";class k9 extends N9{constructor(t){super(t),this.u_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}jo(t,e,r,i,a){const s=ky();return new Promise((l,c)=>{const f=new AI;f.setWithCredentials(!0),f.listenOnce(wI.COMPLETE,()=>{try{switch(f.getLastErrorCode()){case A1.NO_ERROR:const g=f.getResponseJson();bt(sr,`XHR for RPC '${t}' ${s} received:`,JSON.stringify(g)),l(g);break;case A1.TIMEOUT:bt(sr,`RPC '${t}' ${s} timed out`),c(new At(ct.DEADLINE_EXCEEDED,"Request time out"));break;case A1.HTTP_ERROR:const m=f.getStatus();if(bt(sr,`RPC '${t}' ${s} failed with status:`,m,"response text:",f.getResponseText()),m>0){let v=f.getResponseJson();Array.isArray(v)&&(v=v[0]);const _=v==null?void 0:v.error;if(_&&_.status&&_.message){const w=function(S){const C=S.toLowerCase().replace(/_/g,"-");return Object.values(ct).indexOf(C)>=0?C:ct.UNKNOWN}(_.status);c(new At(w,_.message))}else c(new At(ct.UNKNOWN,"Server responded with status "+f.getStatus()))}else c(new At(ct.UNAVAILABLE,"Connection failed."));break;default:Ft(9055,{c_:t,streamId:s,l_:f.getLastErrorCode(),h_:f.getLastError()})}}finally{bt(sr,`RPC '${t}' ${s} completed.`)}});const d=JSON.stringify(i);bt(sr,`RPC '${t}' ${s} sending request:`,i),f.send(e,"POST",d,r,15)})}P_(t,e,r){const i=ky(),a=[this.$o,"/","google.firestore.v1.Firestore","/",t,"/channel"],s=SI(),l=bI(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(c.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(c.useFetchStreams=!0),this.zo(c.initMessageHeaders,e,r),c.encodeInitMessageHeaders=!0;const d=a.join("");bt(sr,`Creating RPC '${t}' stream ${i}: ${d}`,c);const g=s.createWebChannel(d,c);this.T_(g);let m=!1,v=!1;const _=new P9({Ho:b=>{v?bt(sr,`Not sending because RPC '${t}' stream ${i} is closed:`,b):(m||(bt(sr,`Opening RPC '${t}' stream ${i} transport.`),g.open(),m=!0),bt(sr,`RPC '${t}' stream ${i} sending:`,b),g.send(b))},Yo:()=>g.close()}),w=(b,S,C)=>{b.listen(S,I=>{try{C(I)}catch(M){setTimeout(()=>{throw M},0)}})};return w(g,ch.EventType.OPEN,()=>{v||(bt(sr,`RPC '${t}' stream ${i} transport opened.`),_.s_())}),w(g,ch.EventType.CLOSE,()=>{v||(v=!0,bt(sr,`RPC '${t}' stream ${i} transport closed`),_.__(),this.I_(g))}),w(g,ch.EventType.ERROR,b=>{v||(v=!0,_o(sr,`RPC '${t}' stream ${i} transport errored. Name:`,b.name,"Message:",b.message),_.__(new At(ct.UNAVAILABLE,"The operation could not be completed")))}),w(g,ch.EventType.MESSAGE,b=>{var S;if(!v){const C=b.data[0];Ee(!!C,16349);const I=C,M=(I==null?void 0:I.error)||((S=I[0])===null||S===void 0?void 0:S.error);if(M){bt(sr,`RPC '${t}' stream ${i} received error:`,M);const N=M.status;let k=function(D){const L=dn[D];if(L!==void 0)return a3(L)}(N),O=M.message;k===void 0&&(k=ct.INTERNAL,O="Unknown error status: "+N+" with message "+M.message),v=!0,_.__(new At(k,O)),g.close()}else bt(sr,`RPC '${t}' stream ${i} received:`,C),_.a_(C)}}),w(l,EI.STAT_EVENT,b=>{b.stat===Ey.PROXY?bt(sr,`RPC '${t}' stream ${i} detected buffering proxy`):b.stat===Ey.NOPROXY&&bt(sr,`RPC '${t}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{_.o_()},0),_}terminate(){this.u_.forEach(t=>t.close()),this.u_=[]}T_(t){this.u_.push(t)}I_(t){this.u_=this.u_.filter(e=>e===t)}}function Cv(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vg(n){return new F5(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x3{constructor(t,e,r=1e3,i=1.5,a=6e4){this.Fi=t,this.timerId=e,this.d_=r,this.E_=i,this.A_=a,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(t){this.cancel();const e=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),i=Math.max(0,e-r);i>0&&bt("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.R_} ms, delay with jitter: ${e} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,i,()=>(this.m_=Date.now(),t())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wb="PersistentStream";class _3{constructor(t,e,r,i,a,s,l,c){this.Fi=t,this.w_=r,this.S_=i,this.connection=a,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new x3(t,e)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(t){this.q_(),this.stream.send(t)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,e){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,t!==4?this.F_.reset():e&&e.code===ct.RESOURCE_EXHAUSTED?(os(e.toString()),os("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):e&&e.code===ct.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.n_(e)}U_(){}auth(){this.state=1;const t=this.K_(this.b_),e=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.b_===e&&this.W_(r,i)},r=>{t(()=>{const i=new At(ct.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(i)})})}W_(t,e){const r=this.K_(this.b_);this.stream=this.z_(t,e),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(i=>{r(()=>this.G_(i))}),this.stream.onMessage(i=>{r(()=>++this.C_==1?this.j_(i):this.onNext(i))})}O_(){this.state=5,this.F_.g_(async()=>{this.state=0,this.start()})}G_(t){return bt(Wb,`close with error: ${t}`),this.stream=null,this.close(4,t)}K_(t){return e=>{this.Fi.enqueueAndForget(()=>this.b_===t?e():(bt(Wb,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class L9 extends _3{constructor(t,e,r,i,a,s){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,r,i,s),this.serializer=a}z_(t,e){return this.connection.P_("Listen",t,e)}j_(t){return this.onNext(t)}onNext(t){this.F_.reset();const e=z5(this.serializer,t),r=function(a){if(!("targetChange"in a))return Ht.min();const s=a.targetChange;return s.targetIds&&s.targetIds.length?Ht.min():s.readTime?fa(s.readTime):Ht.min()}(t);return this.listener.J_(e,r)}H_(t){const e={};e.database=Ny(this.serializer),e.addTarget=function(a,s){let l;const c=s.target;if(l=Iy(c)?{documents:$5(a,c)}:{query:q5(a,c).Vt},l.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){l.resumeToken=l3(a,s.resumeToken);const f=Dy(a,s.expectedCount);f!==null&&(l.expectedCount=f)}else if(s.snapshotVersion.compareTo(Ht.min())>0){l.readTime=W1(a,s.snapshotVersion.toTimestamp());const f=Dy(a,s.expectedCount);f!==null&&(l.expectedCount=f)}return l}(this.serializer,t);const r=X5(this.serializer,t);r&&(e.labels=r),this.k_(e)}Y_(t){const e={};e.database=Ny(this.serializer),e.removeTarget=t,this.k_(e)}}class B9 extends _3{constructor(t,e,r,i,a,s){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,r,i,s),this.serializer=a}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(t,e){return this.connection.P_("Write",t,e)}j_(t){return Ee(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,Ee(!t.writeResults||t.writeResults.length===0,55816),this.listener.ea()}onNext(t){Ee(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.F_.reset();const e=G5(t.writeResults,t.commitTime),r=fa(t.commitTime);return this.listener.ta(r,e)}na(){const t={};t.database=Ny(this.serializer),this.k_(t)}X_(t){const e={streamToken:this.lastStreamToken,writes:t.map(r=>H5(this.serializer,r))};this.k_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V9{}class F9 extends V9{constructor(t,e,r,i){super(),this.authCredentials=t,this.appCheckCredentials=e,this.connection=r,this.serializer=i,this.ra=!1}ia(){if(this.ra)throw new At(ct.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(t,e,r,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,s])=>this.connection.Wo(t,Oy(e,r),i,a,s)).catch(a=>{throw a.name==="FirebaseError"?(a.code===ct.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new At(ct.UNKNOWN,a.toString())})}Jo(t,e,r,i,a){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,l])=>this.connection.Jo(t,Oy(e,r),i,s,l,a)).catch(s=>{throw s.name==="FirebaseError"?(s.code===ct.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new At(ct.UNKNOWN,s.toString())})}terminate(){this.ra=!0,this.connection.terminate()}}class U9{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(t){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ua("Offline")))}set(t){this.ha(),this.sa=0,t==="Online"&&(this._a=!1),this.ua(t)}ua(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}ca(t){const e=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(os(e),this._a=!1):bt("OnlineStateTracker",e)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kl="RemoteStore";class j9{constructor(t,e,r,i,a){this.localStore=t,this.datastore=e,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=a,this.Ea.xo(s=>{r.enqueueAndForget(async()=>{Ul(this)&&(bt(kl,"Restarting streams for network reachability change."),await async function(c){const f=Gt(c);f.Ia.add(4),await rd(f),f.Aa.set("Unknown"),f.Ia.delete(4),await Fg(f)}(this))})}),this.Aa=new U9(r,i)}}async function Fg(n){if(Ul(n))for(const t of n.da)await t(!0)}async function rd(n){for(const t of n.da)await t(!1)}function A3(n,t){const e=Gt(n);e.Ta.has(t.targetId)||(e.Ta.set(t.targetId,t),Jx(e)?Qx(e):kc(e).x_()&&Zx(e,t))}function Kx(n,t){const e=Gt(n),r=kc(e);e.Ta.delete(t),r.x_()&&w3(e,t),e.Ta.size===0&&(r.x_()?r.B_():Ul(e)&&e.Aa.set("Unknown"))}function Zx(n,t){if(n.Ra.$e(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Ht.min())>0){const e=n.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(e)}kc(n).H_(t)}function w3(n,t){n.Ra.$e(t),kc(n).Y_(t)}function Qx(n){n.Ra=new k5({getRemoteKeysForTarget:t=>n.remoteSyncer.getRemoteKeysForTarget(t),Et:t=>n.Ta.get(t)||null,lt:()=>n.datastore.serializer.databaseId}),kc(n).start(),n.Aa.aa()}function Jx(n){return Ul(n)&&!kc(n).M_()&&n.Ta.size>0}function Ul(n){return Gt(n).Ia.size===0}function E3(n){n.Ra=void 0}async function z9(n){n.Aa.set("Online")}async function H9(n){n.Ta.forEach((t,e)=>{Zx(n,t)})}async function G9(n,t){E3(n),Jx(n)?(n.Aa.la(t),Qx(n)):n.Aa.set("Unknown")}async function $9(n,t,e){if(n.Aa.set("Online"),t instanceof o3&&t.state===2&&t.cause)try{await async function(i,a){const s=a.cause;for(const l of a.targetIds)i.Ta.has(l)&&(await i.remoteSyncer.rejectListen(l,s),i.Ta.delete(l),i.Ra.removeTarget(l))}(n,t)}catch(r){bt(kl,"Failed to remove targets %s: %s ",t.targetIds.join(","),r),await Y1(n,r)}else if(t instanceof S1?n.Ra.Ye(t):t instanceof s3?n.Ra.it(t):n.Ra.et(t),!e.isEqual(Ht.min()))try{const r=await y3(n.localStore);e.compareTo(r)>=0&&await function(a,s){const l=a.Ra.Pt(s);return l.targetChanges.forEach((c,f)=>{if(c.resumeToken.approximateByteSize()>0){const d=a.Ta.get(f);d&&a.Ta.set(f,d.withResumeToken(c.resumeToken,s))}}),l.targetMismatches.forEach((c,f)=>{const d=a.Ta.get(c);if(!d)return;a.Ta.set(c,d.withResumeToken(rr.EMPTY_BYTE_STRING,d.snapshotVersion)),w3(a,c);const g=new lo(d.target,c,f,d.sequenceNumber);Zx(a,g)}),a.remoteSyncer.applyRemoteEvent(l)}(n,e)}catch(r){bt(kl,"Failed to raise snapshot:",r),await Y1(n,r)}}async function Y1(n,t,e){if(!Pc(t))throw t;n.Ia.add(1),await rd(n),n.Aa.set("Offline"),e||(e=()=>y3(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{bt(kl,"Retrying IndexedDB access"),await e(),n.Ia.delete(1),await Fg(n)})}function b3(n,t){return t().catch(e=>Y1(n,e,t))}async function Ug(n){const t=Gt(n),e=So(t);let r=t.Pa.length>0?t.Pa[t.Pa.length-1].batchId:Lx;for(;q9(t);)try{const i=await C9(t.localStore,r);if(i===null){t.Pa.length===0&&e.B_();break}r=i.batchId,W9(t,i)}catch(i){await Y1(t,i)}S3(t)&&T3(t)}function q9(n){return Ul(n)&&n.Pa.length<10}function W9(n,t){n.Pa.push(t);const e=So(n);e.x_()&&e.Z_&&e.X_(t.mutations)}function S3(n){return Ul(n)&&!So(n).M_()&&n.Pa.length>0}function T3(n){So(n).start()}async function X9(n){So(n).na()}async function Y9(n){const t=So(n);for(const e of n.Pa)t.X_(e.mutations)}async function K9(n,t,e){const r=n.Pa.shift(),i=Hx.from(r,t,e);await b3(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),await Ug(n)}async function Z9(n,t){t&&So(n).Z_&&await async function(r,i){if(function(s){return N5(s)&&s!==ct.ABORTED}(i.code)){const a=r.Pa.shift();So(r).N_(),await b3(r,()=>r.remoteSyncer.rejectFailedWrite(a.batchId,i)),await Ug(r)}}(n,t),S3(n)&&T3(n)}async function Xb(n,t){const e=Gt(n);e.asyncQueue.verifyOperationInProgress(),bt(kl,"RemoteStore received new credentials");const r=Ul(e);e.Ia.add(3),await rd(e),r&&e.Aa.set("Unknown"),await e.remoteSyncer.handleCredentialChange(t),e.Ia.delete(3),await Fg(e)}async function Q9(n,t){const e=Gt(n);t?(e.Ia.delete(2),await Fg(e)):t||(e.Ia.add(2),await rd(e),e.Aa.set("Unknown"))}function kc(n){return n.Va||(n.Va=function(e,r,i){const a=Gt(e);return a.ia(),new L9(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)}(n.datastore,n.asyncQueue,{Zo:z9.bind(null,n),e_:H9.bind(null,n),n_:G9.bind(null,n),J_:$9.bind(null,n)}),n.da.push(async t=>{t?(n.Va.N_(),Jx(n)?Qx(n):n.Aa.set("Unknown")):(await n.Va.stop(),E3(n))})),n.Va}function So(n){return n.ma||(n.ma=function(e,r,i){const a=Gt(e);return a.ia(),new B9(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)}(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),e_:X9.bind(null,n),n_:Z9.bind(null,n),ea:Y9.bind(null,n),ta:K9.bind(null,n)}),n.da.push(async t=>{t?(n.ma.N_(),await Ug(n)):(await n.ma.stop(),n.Pa.length>0&&(bt(kl,`Stopping write stream with ${n.Pa.length} pending writes`),n.Pa=[]))})),n.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t2{constructor(t,e,r,i,a){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new ns,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,e,r,i,a){const s=Date.now()+r,l=new t2(t,e,s,i,a);return l.start(r),l}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new At(ct.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function e2(n,t){if(os("AsyncQueue",`${t}: ${n}`),Pc(n))return new At(ct.UNAVAILABLE,`${t}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uc{static emptySet(t){return new uc(t.comparator)}constructor(t){this.comparator=t?(e,r)=>t(e,r)||Ot.comparator(e.key,r.key):(e,r)=>Ot.comparator(e.key,r.key),this.keyedMap=fh(),this.sortedSet=new Qe(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((e,r)=>(t(e),!1))}add(t){const e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){const e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof uc)||this.size!==t.size)return!1;const e=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();for(;e.hasNext();){const i=e.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const t=[];return this.forEach(e=>{t.push(e.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,e){const r=new uc;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=e,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yb{constructor(){this.fa=new Qe(Ot.comparator)}track(t){const e=t.doc.key,r=this.fa.get(e);r?t.type!==0&&r.type===3?this.fa=this.fa.insert(e,t):t.type===3&&r.type!==1?this.fa=this.fa.insert(e,{type:r.type,doc:t.doc}):t.type===2&&r.type===2?this.fa=this.fa.insert(e,{type:2,doc:t.doc}):t.type===2&&r.type===0?this.fa=this.fa.insert(e,{type:0,doc:t.doc}):t.type===1&&r.type===0?this.fa=this.fa.remove(e):t.type===1&&r.type===2?this.fa=this.fa.insert(e,{type:1,doc:r.doc}):t.type===0&&r.type===1?this.fa=this.fa.insert(e,{type:2,doc:t.doc}):Ft(63341,{At:t,ga:r}):this.fa=this.fa.insert(e,t)}pa(){const t=[];return this.fa.inorderTraversal((e,r)=>{t.push(r)}),t}}class yc{constructor(t,e,r,i,a,s,l,c,f){this.query=t,this.docs=e,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=s,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=f}static fromInitialDocuments(t,e,r,i,a){const s=[];return e.forEach(l=>{s.push({type:0,doc:l})}),new yc(t,e,uc.emptySet(e),s,r,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Mg(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const e=this.docChanges,r=t.docChanges;if(e.length!==r.length)return!1;for(let i=0;i<e.length;i++)if(e[i].type!==r[i].type||!e[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J9{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(t=>t.ba())}}class tk{constructor(){this.queries=Kb(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(e,r){const i=Gt(e),a=i.queries;i.queries=Kb(),a.forEach((s,l)=>{for(const c of l.wa)c.onError(r)})})(this,new At(ct.ABORTED,"Firestore shutting down"))}}function Kb(){return new Fl(n=>WI(n),Mg)}async function C3(n,t){const e=Gt(n);let r=3;const i=t.query;let a=e.queries.get(i);a?!a.Sa()&&t.ba()&&(r=2):(a=new J9,r=t.ba()?0:1);try{switch(r){case 0:a.ya=await e.onListen(i,!0);break;case 1:a.ya=await e.onListen(i,!1);break;case 2:await e.onFirstRemoteStoreListen(i)}}catch(s){const l=e2(s,`Initialization of query '${qu(t.query)}' failed`);return void t.onError(l)}e.queries.set(i,a),a.wa.push(t),t.va(e.onlineState),a.ya&&t.Ca(a.ya)&&n2(e)}async function I3(n,t){const e=Gt(n),r=t.query;let i=3;const a=e.queries.get(r);if(a){const s=a.wa.indexOf(t);s>=0&&(a.wa.splice(s,1),a.wa.length===0?i=t.ba()?0:1:!a.Sa()&&t.ba()&&(i=2))}switch(i){case 0:return e.queries.delete(r),e.onUnlisten(r,!0);case 1:return e.queries.delete(r),e.onUnlisten(r,!1);case 2:return e.onLastRemoteStoreUnlisten(r);default:return}}function ek(n,t){const e=Gt(n);let r=!1;for(const i of t){const a=i.query,s=e.queries.get(a);if(s){for(const l of s.wa)l.Ca(i)&&(r=!0);s.ya=i}}r&&n2(e)}function nk(n,t,e){const r=Gt(n),i=r.queries.get(t);if(i)for(const a of i.wa)a.onError(e);r.queries.delete(t)}function n2(n){n.Da.forEach(t=>{t.next()})}var Ly,Zb;(Zb=Ly||(Ly={})).Fa="default",Zb.Cache="cache";class R3{constructor(t,e,r){this.query=t,this.Ma=e,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(t){if(!this.options.includeMetadataChanges){const r=[];for(const i of t.docChanges)i.type!==3&&r.push(i);t=new yc(t.query,t.docs,t.oldDocs,r,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let e=!1;return this.xa?this.Na(t)&&(this.Ma.next(t),e=!0):this.Ba(t,this.onlineState)&&(this.La(t),e=!0),this.Oa=t,e}onError(t){this.Ma.error(t)}va(t){this.onlineState=t;let e=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,t)&&(this.La(this.Oa),e=!0),e}Ba(t,e){if(!t.fromCache||!this.ba())return!0;const r=e!=="Offline";return(!this.options.ka||!r)&&(!t.docs.isEmpty()||t.hasCachedResults||e==="Offline")}Na(t){if(t.docChanges.length>0)return!0;const e=this.Oa&&this.Oa.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&this.options.includeMetadataChanges===!0}La(t){t=yc.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.xa=!0,this.Ma.next(t)}ba(){return this.options.source!==Ly.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D3{constructor(t){this.key=t}}class O3{constructor(t){this.key=t}}class rk{constructor(t,e){this.query=t,this.Ha=e,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=ee(),this.mutatedKeys=ee(),this.Xa=XI(t),this.eu=new uc(this.Xa)}get tu(){return this.Ha}nu(t,e){const r=e?e.ru:new Yb,i=e?e.eu:this.eu;let a=e?e.mutatedKeys:this.mutatedKeys,s=i,l=!1;const c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,f=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal((d,g)=>{const m=i.get(d),v=Ng(this.query,g)?g:null,_=!!m&&this.mutatedKeys.has(m.key),w=!!v&&(v.hasLocalMutations||this.mutatedKeys.has(v.key)&&v.hasCommittedMutations);let b=!1;m&&v?m.data.isEqual(v.data)?_!==w&&(r.track({type:3,doc:v}),b=!0):this.iu(m,v)||(r.track({type:2,doc:v}),b=!0,(c&&this.Xa(v,c)>0||f&&this.Xa(v,f)<0)&&(l=!0)):!m&&v?(r.track({type:0,doc:v}),b=!0):m&&!v&&(r.track({type:1,doc:m}),b=!0,(c||f)&&(l=!0)),b&&(v?(s=s.add(v),a=w?a.add(d):a.delete(d)):(s=s.delete(d),a=a.delete(d)))}),this.query.limit!==null)for(;s.size>this.query.limit;){const d=this.query.limitType==="F"?s.last():s.first();s=s.delete(d.key),a=a.delete(d.key),r.track({type:1,doc:d})}return{eu:s,ru:r,Ds:l,mutatedKeys:a}}iu(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,r,i){const a=this.eu;this.eu=t.eu,this.mutatedKeys=t.mutatedKeys;const s=t.ru.pa();s.sort((d,g)=>function(v,_){const w=b=>{switch(b){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ft(20277,{At:b})}};return w(v)-w(_)}(d.type,g.type)||this.Xa(d.doc,g.doc)),this.su(r),i=i!=null&&i;const l=e&&!i?this.ou():[],c=this.Za.size===0&&this.current&&!i?1:0,f=c!==this.Ya;return this.Ya=c,s.length!==0||f?{snapshot:new yc(this.query,t.eu,a,s,t.mutatedKeys,c===0,f,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:l}:{_u:l}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new Yb,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(t){return!this.Ha.has(t)&&!!this.eu.has(t)&&!this.eu.get(t).hasLocalMutations}su(t){t&&(t.addedDocuments.forEach(e=>this.Ha=this.Ha.add(e)),t.modifiedDocuments.forEach(e=>{}),t.removedDocuments.forEach(e=>this.Ha=this.Ha.delete(e)),this.current=t.current)}ou(){if(!this.current)return[];const t=this.Za;this.Za=ee(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});const e=[];return t.forEach(r=>{this.Za.has(r)||e.push(new O3(r))}),this.Za.forEach(r=>{t.has(r)||e.push(new D3(r))}),e}uu(t){this.Ha=t.qs,this.Za=ee();const e=this.nu(t.documents);return this.applyChanges(e,!0)}cu(){return yc.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const r2="SyncEngine";class ik{constructor(t,e,r){this.query=t,this.targetId=e,this.view=r}}class ak{constructor(t){this.key=t,this.lu=!1}}class sk{constructor(t,e,r,i,a,s){this.localStore=t,this.remoteStore=e,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=s,this.hu={},this.Pu=new Fl(l=>WI(l),Mg),this.Tu=new Map,this.Iu=new Set,this.du=new Qe(Ot.comparator),this.Eu=new Map,this.Au=new qx,this.Ru={},this.Vu=new Map,this.mu=vc.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function ok(n,t,e=!0){const r=B3(n);let i;const a=r.Pu.get(t);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),i=a.view.cu()):i=await M3(r,t,e,!0),i}async function lk(n,t){const e=B3(n);await M3(e,t,!0,!1)}async function M3(n,t,e,r){const i=await I9(n.localStore,ca(t)),a=i.targetId,s=n.sharedClientState.addLocalQueryTarget(a,e);let l;return r&&(l=await uk(n,t,a,s==="current",i.resumeToken)),n.isPrimaryClient&&e&&A3(n.remoteStore,i),l}async function uk(n,t,e,r,i){n.gu=(g,m,v)=>async function(w,b,S,C){let I=b.view.nu(S);I.Ds&&(I=await Hb(w.localStore,b.query,!1).then(({documents:O})=>b.view.nu(O,I)));const M=C&&C.targetChanges.get(b.targetId),N=C&&C.targetMismatches.get(b.targetId)!=null,k=b.view.applyChanges(I,w.isPrimaryClient,M,N);return Jb(w,b.targetId,k._u),k.snapshot}(n,g,m,v);const a=await Hb(n.localStore,t,!0),s=new rk(t,a.qs),l=s.nu(a.documents),c=nd.createSynthesizedTargetChangeForCurrentChange(e,r&&n.onlineState!=="Offline",i),f=s.applyChanges(l,n.isPrimaryClient,c);Jb(n,e,f._u);const d=new ik(t,e,s);return n.Pu.set(t,d),n.Tu.has(e)?n.Tu.get(e).push(t):n.Tu.set(e,[t]),f.snapshot}async function ck(n,t,e){const r=Gt(n),i=r.Pu.get(t),a=r.Tu.get(i.targetId);if(a.length>1)return r.Tu.set(i.targetId,a.filter(s=>!Mg(s,t))),void r.Pu.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Py(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),e&&Kx(r.remoteStore,i.targetId),By(r,i.targetId)}).catch(Nc)):(By(r,i.targetId),await Py(r.localStore,i.targetId,!0))}async function fk(n,t){const e=Gt(n),r=e.Pu.get(t),i=e.Tu.get(r.targetId);e.isPrimaryClient&&i.length===1&&(e.sharedClientState.removeLocalQueryTarget(r.targetId),Kx(e.remoteStore,r.targetId))}async function hk(n,t,e){const r=xk(n);try{const i=await function(s,l){const c=Gt(s),f=He.now(),d=l.reduce((v,_)=>v.add(_.key),ee());let g,m;return c.persistence.runTransaction("Locally write mutations","readwrite",v=>{let _=ls(),w=ee();return c.Os.getEntries(v,d).next(b=>{_=b,_.forEach((S,C)=>{C.isValidDocument()||(w=w.add(S))})}).next(()=>c.localDocuments.getOverlayedDocuments(v,_)).next(b=>{g=b;const S=[];for(const C of l){const I=I5(C,g.get(C.key).overlayedDocument);I!=null&&S.push(new Do(C.key,I,FI(I.value.mapValue),Sr.exists(!0)))}return c.mutationQueue.addMutationBatch(v,f,S,l)}).next(b=>{m=b;const S=b.applyToLocalDocumentSet(g,w);return c.documentOverlayCache.saveOverlays(v,b.batchId,S)})}).then(()=>({batchId:m.batchId,changes:KI(g)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(i.batchId),function(s,l,c){let f=s.Ru[s.currentUser.toKey()];f||(f=new Qe(Yt)),f=f.insert(l,c),s.Ru[s.currentUser.toKey()]=f}(r,i.batchId,e),await id(r,i.changes),await Ug(r.remoteStore)}catch(i){const a=e2(i,"Failed to persist write");e.reject(a)}}async function N3(n,t){const e=Gt(n);try{const r=await S9(e.localStore,t);t.targetChanges.forEach((i,a)=>{const s=e.Eu.get(a);s&&(Ee(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?s.lu=!0:i.modifiedDocuments.size>0?Ee(s.lu,14607):i.removedDocuments.size>0&&(Ee(s.lu,42227),s.lu=!1))}),await id(e,r,t)}catch(r){await Nc(r)}}function Qb(n,t,e){const r=Gt(n);if(r.isPrimaryClient&&e===0||!r.isPrimaryClient&&e===1){const i=[];r.Pu.forEach((a,s)=>{const l=s.view.va(t);l.snapshot&&i.push(l.snapshot)}),function(s,l){const c=Gt(s);c.onlineState=l;let f=!1;c.queries.forEach((d,g)=>{for(const m of g.wa)m.va(l)&&(f=!0)}),f&&n2(c)}(r.eventManager,t),i.length&&r.hu.J_(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function dk(n,t,e){const r=Gt(n);r.sharedClientState.updateQueryState(t,"rejected",e);const i=r.Eu.get(t),a=i&&i.key;if(a){let s=new Qe(Ot.comparator);s=s.insert(a,hr.newNoDocument(a,Ht.min()));const l=ee().add(a),c=new Bg(Ht.min(),new Map,new Qe(Yt),s,l);await N3(r,c),r.du=r.du.remove(a),r.Eu.delete(t),i2(r)}else await Py(r.localStore,t,!1).then(()=>By(r,t,e)).catch(Nc)}async function gk(n,t){const e=Gt(n),r=t.batch.batchId;try{const i=await b9(e.localStore,t);k3(e,r,null),P3(e,r),e.sharedClientState.updateMutationState(r,"acknowledged"),await id(e,i)}catch(i){await Nc(i)}}async function pk(n,t,e){const r=Gt(n);try{const i=await function(s,l){const c=Gt(s);return c.persistence.runTransaction("Reject batch","readwrite-primary",f=>{let d;return c.mutationQueue.lookupMutationBatch(f,l).next(g=>(Ee(g!==null,37113),d=g.keys(),c.mutationQueue.removeMutationBatch(f,g))).next(()=>c.mutationQueue.performConsistencyCheck(f)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(f,d,l)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,d)).next(()=>c.localDocuments.getDocuments(f,d))})}(r.localStore,t);k3(r,t,e),P3(r,t),r.sharedClientState.updateMutationState(t,"rejected",e),await id(r,i)}catch(i){await Nc(i)}}function P3(n,t){(n.Vu.get(t)||[]).forEach(e=>{e.resolve()}),n.Vu.delete(t)}function k3(n,t,e){const r=Gt(n);let i=r.Ru[r.currentUser.toKey()];if(i){const a=i.get(t);a&&(e?a.reject(e):a.resolve(),i=i.remove(t)),r.Ru[r.currentUser.toKey()]=i}}function By(n,t,e=null){n.sharedClientState.removeLocalQueryTarget(t);for(const r of n.Tu.get(t))n.Pu.delete(r),e&&n.hu.pu(r,e);n.Tu.delete(t),n.isPrimaryClient&&n.Au.zr(t).forEach(r=>{n.Au.containsKey(r)||L3(n,r)})}function L3(n,t){n.Iu.delete(t.path.canonicalString());const e=n.du.get(t);e!==null&&(Kx(n.remoteStore,e),n.du=n.du.remove(t),n.Eu.delete(e),i2(n))}function Jb(n,t,e){for(const r of e)r instanceof D3?(n.Au.addReference(r.key,t),mk(n,r)):r instanceof O3?(bt(r2,"Document no longer in limbo: "+r.key),n.Au.removeReference(r.key,t),n.Au.containsKey(r.key)||L3(n,r.key)):Ft(19791,{yu:r})}function mk(n,t){const e=t.key,r=e.path.canonicalString();n.du.get(e)||n.Iu.has(r)||(bt(r2,"New document in limbo: "+e),n.Iu.add(r),i2(n))}function i2(n){for(;n.Iu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const t=n.Iu.values().next().value;n.Iu.delete(t);const e=new Ot(Le.fromString(t)),r=n.mu.next();n.Eu.set(r,new ak(e)),n.du=n.du.insert(e,r),A3(n.remoteStore,new lo(ca(jx(e.path)),r,"TargetPurposeLimboResolution",Rg.ue))}}async function id(n,t,e){const r=Gt(n),i=[],a=[],s=[];r.Pu.isEmpty()||(r.Pu.forEach((l,c)=>{s.push(r.gu(c,t,e).then(f=>{var d;if((f||e)&&r.isPrimaryClient){const g=f?!f.fromCache:(d=e==null?void 0:e.targetChanges.get(c.targetId))===null||d===void 0?void 0:d.current;r.sharedClientState.updateQueryState(c.targetId,g?"current":"not-current")}if(f){i.push(f);const g=Xx.Es(c.targetId,f);a.push(g)}}))}),await Promise.all(s),r.hu.J_(i),await async function(c,f){const d=Gt(c);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",g=>gt.forEach(f,m=>gt.forEach(m.Is,v=>d.persistence.referenceDelegate.addReference(g,m.targetId,v)).next(()=>gt.forEach(m.ds,v=>d.persistence.referenceDelegate.removeReference(g,m.targetId,v)))))}catch(g){if(!Pc(g))throw g;bt(Yx,"Failed to update sequence numbers: "+g)}for(const g of f){const m=g.targetId;if(!g.fromCache){const v=d.Fs.get(m),_=v.snapshotVersion,w=v.withLastLimboFreeSnapshotVersion(_);d.Fs=d.Fs.insert(m,w)}}}(r.localStore,a))}async function vk(n,t){const e=Gt(n);if(!e.currentUser.isEqual(t)){bt(r2,"User change. New user:",t.toKey());const r=await v3(e.localStore,t);e.currentUser=t,function(a,s){a.Vu.forEach(l=>{l.forEach(c=>{c.reject(new At(ct.CANCELLED,s))})}),a.Vu.clear()}(e,"'waitForPendingWrites' promise is rejected due to a user change."),e.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),await id(e,r.Bs)}}function yk(n,t){const e=Gt(n),r=e.Eu.get(t);if(r&&r.lu)return ee().add(r.key);{let i=ee();const a=e.Tu.get(t);if(!a)return i;for(const s of a){const l=e.Pu.get(s);i=i.unionWith(l.view.tu)}return i}}function B3(n){const t=Gt(n);return t.remoteStore.remoteSyncer.applyRemoteEvent=N3.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=yk.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=dk.bind(null,t),t.hu.J_=ek.bind(null,t.eventManager),t.hu.pu=nk.bind(null,t.eventManager),t}function xk(n){const t=Gt(n);return t.remoteStore.remoteSyncer.applySuccessfulWrite=gk.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=pk.bind(null,t),t}class K1{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=Vg(t.databaseInfo.databaseId),this.sharedClientState=this.bu(t),this.persistence=this.Du(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Cu(t,this.localStore),this.indexBackfillerScheduler=this.Fu(t,this.localStore)}Cu(t,e){return null}Fu(t,e){return null}vu(t){return E9(this.persistence,new _9,t.initialUser,this.serializer)}Du(t){return new m3(Wx.Vi,this.serializer)}bu(t){return new D9}async terminate(){var t,e;(t=this.gcScheduler)===null||t===void 0||t.stop(),(e=this.indexBackfillerScheduler)===null||e===void 0||e.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}K1.provider={build:()=>new K1};class _k extends K1{constructor(t){super(),this.cacheSizeBytes=t}Cu(t,e){Ee(this.persistence.referenceDelegate instanceof X1,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new a9(r,t.asyncQueue,e)}Du(t){const e=this.cacheSizeBytes!==void 0?Mr.withCacheSize(this.cacheSizeBytes):Mr.DEFAULT;return new m3(r=>X1.Vi(r,e),this.serializer)}}class Vy{async initialize(t,e){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Qb(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=vk.bind(null,this.syncEngine),await Q9(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new tk}()}createDatastore(t){const e=Vg(t.databaseInfo.databaseId),r=function(a){return new k9(a)}(t.databaseInfo);return function(a,s,l,c){return new F9(a,s,l,c)}(t.authCredentials,t.appCheckCredentials,r,e)}createRemoteStore(t){return function(r,i,a,s,l){return new j9(r,i,a,s,l)}(this.localStore,this.datastore,t.asyncQueue,e=>Qb(this.syncEngine,e,0),function(){return qb.C()?new qb:new O9}())}createSyncEngine(t,e){return function(i,a,s,l,c,f,d){const g=new sk(i,a,s,l,c,f);return d&&(g.fu=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}async terminate(){var t,e;await async function(i){const a=Gt(i);bt(kl,"RemoteStore shutting down."),a.Ia.add(5),await rd(a),a.Ea.shutdown(),a.Aa.set("Unknown")}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(e=this.eventManager)===null||e===void 0||e.terminate()}}Vy.provider={build:()=>new Vy};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V3{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.xu(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.xu(this.observer.error,t):os("Uncaught Error in snapshot listener:",t.toString()))}Ou(){this.muted=!0}xu(t,e){setTimeout(()=>{this.muted||t(e)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const To="FirestoreClient";class Ak{constructor(t,e,r,i,a){this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=r,this.databaseInfo=i,this.user=fr.UNAUTHENTICATED,this.clientId=Px.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(r,async s=>{bt(To,"Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(bt(To,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new ns;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(e){const r=e2(e,"Failed to shutdown persistence");t.reject(r)}}),t.promise}}async function Iv(n,t){n.asyncQueue.verifyOperationInProgress(),bt(To,"Initializing OfflineComponentProvider");const e=n.configuration;await t.initialize(e);let r=e.initialUser;n.setCredentialChangeListener(async i=>{r.isEqual(i)||(await v3(t.localStore,i),r=i)}),t.persistence.setDatabaseDeletedListener(()=>{_o("Terminating Firestore due to IndexedDb database deletion"),n.terminate().then(()=>{bt("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(i=>{_o("Terminating Firestore due to IndexedDb database deletion failed",i)})}),n._offlineComponents=t}async function tS(n,t){n.asyncQueue.verifyOperationInProgress();const e=await wk(n);bt(To,"Initializing OnlineComponentProvider"),await t.initialize(e,n.configuration),n.setCredentialChangeListener(r=>Xb(t.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>Xb(t.remoteStore,i)),n._onlineComponents=t}async function wk(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){bt(To,"Using user provided OfflineComponentProvider");try{await Iv(n,n._uninitializedComponentsProvider._offline)}catch(t){const e=t;if(!function(i){return i.name==="FirebaseError"?i.code===ct.FAILED_PRECONDITION||i.code===ct.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(e))throw e;_o("Error using user provided cache. Falling back to memory cache: "+e),await Iv(n,new K1)}}else bt(To,"Using default OfflineComponentProvider"),await Iv(n,new _k(void 0));return n._offlineComponents}async function F3(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(bt(To,"Using user provided OnlineComponentProvider"),await tS(n,n._uninitializedComponentsProvider._online)):(bt(To,"Using default OnlineComponentProvider"),await tS(n,new Vy))),n._onlineComponents}function Ek(n){return F3(n).then(t=>t.syncEngine)}async function U3(n){const t=await F3(n),e=t.eventManager;return e.onListen=ok.bind(null,t.syncEngine),e.onUnlisten=ck.bind(null,t.syncEngine),e.onFirstRemoteStoreListen=lk.bind(null,t.syncEngine),e.onLastRemoteStoreUnlisten=fk.bind(null,t.syncEngine),e}function bk(n,t,e={}){const r=new ns;return n.asyncQueue.enqueueAndForget(async()=>function(a,s,l,c,f){const d=new V3({next:m=>{d.Ou(),s.enqueueAndForget(()=>I3(a,g));const v=m.docs.has(l);!v&&m.fromCache?f.reject(new At(ct.UNAVAILABLE,"Failed to get document because the client is offline.")):v&&m.fromCache&&c&&c.source==="server"?f.reject(new At(ct.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):f.resolve(m)},error:m=>f.reject(m)}),g=new R3(jx(l.path),d,{includeMetadataChanges:!0,ka:!0});return C3(a,g)}(await U3(n),n.asyncQueue,t,e,r)),r.promise}function Sk(n,t,e={}){const r=new ns;return n.asyncQueue.enqueueAndForget(async()=>function(a,s,l,c,f){const d=new V3({next:m=>{d.Ou(),s.enqueueAndForget(()=>I3(a,g)),m.fromCache&&c.source==="server"?f.reject(new At(ct.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(m)},error:m=>f.reject(m)}),g=new R3(l,d,{includeMetadataChanges:!0,ka:!0});return C3(a,g)}(await U3(n),n.asyncQueue,t,e,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j3(n){const t={};return n.timeoutSeconds!==void 0&&(t.timeoutSeconds=n.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eS=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z3="firestore.googleapis.com",nS=!0;class rS{constructor(t){var e,r;if(t.host===void 0){if(t.ssl!==void 0)throw new At(ct.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=z3,this.ssl=nS}else this.host=t.host,this.ssl=(e=t.ssl)!==null&&e!==void 0?e:nS;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=p3;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<r9)throw new At(ct.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}UP("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=j3((r=t.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new At(ct.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new At(ct.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new At(ct.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class ad{constructor(t,e,r,i){this._authCredentials=t,this._appCheckCredentials=e,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new rS({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new At(ct.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new At(ct.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new rS(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new OP;switch(r.type){case"firstParty":return new kP(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new At(ct.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const r=eS.get(e);r&&(bt("ComponentProvider","Removing Datastore"),eS.delete(e),r.terminate())}(this),Promise.resolve()}}function Tk(n,t,e,r={}){var i;n=Zr(n,ad);const a=Rc(t),s=n._getSettings(),l=Object.assign(Object.assign({},s),{emulatorOptions:n._getEmulatorOptions()}),c=`${t}:${e}`;a&&(MC(`https://${c}`),NC("Firestore",!0)),s.host!==z3&&s.host!==c&&_o("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const f=Object.assign(Object.assign({},s),{host:c,ssl:a,emulatorOptions:r});if(!Dl(f,l)&&(n._setSettings(f),r.mockUserToken)){let d,g;if(typeof r.mockUserToken=="string")d=r.mockUserToken,g=fr.MOCK_USER;else{d=zD(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);const m=r.mockUserToken.sub||r.mockUserToken.user_id;if(!m)throw new At(ct.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new fr(m)}n._authCredentials=new MP(new CI(d,g))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ms{constructor(t,e,r){this.converter=e,this._query=r,this.type="query",this.firestore=t}withConverter(t){return new ms(this.firestore,t,this._query)}}class on{constructor(t,e,r){this.converter=e,this._key=r,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new vo(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new on(this.firestore,t,this._key)}toJSON(){return{type:on._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,e,r){if(td(e,on._jsonSchema))return new on(t,r||null,new Ot(Le.fromString(e.referencePath)))}}on._jsonSchemaVersion="firestore/documentReference/1.0",on._jsonSchema={type:yn("string",on._jsonSchemaVersion),referencePath:yn("string")};class vo extends ms{constructor(t,e,r){super(t,e,jx(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new on(this.firestore,null,new Ot(t))}withConverter(t){return new vo(this.firestore,t,this._path)}}function br(n,t,...e){if(n=Nn(n),kx("collection","path",t),n instanceof ad){const r=Le.fromString(t,...e);return mb(r),new vo(n,null,r)}{if(!(n instanceof on||n instanceof vo))throw new At(ct.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Le.fromString(t,...e));return mb(r),new vo(n.firestore,null,r)}}function uo(n,t){if(n=Zr(n,ad),kx("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new At(ct.INVALID_ARGUMENT,`Invalid collection ID '${t}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new ms(n,null,function(r){return new Vl(Le.emptyPath(),r)}(t))}function us(n,t,...e){if(n=Nn(n),arguments.length===1&&(t=Px.newId()),kx("doc","path",t),n instanceof ad){const r=Le.fromString(t,...e);return pb(r),new on(n,null,new Ot(r))}{if(!(n instanceof on||n instanceof vo))throw new At(ct.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Le.fromString(t,...e));return pb(r),new on(n.firestore,n instanceof vo?n.converter:null,new Ot(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iS="AsyncQueue";class aS{constructor(t=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new x3(this,"async_queue_retry"),this.oc=()=>{const r=Cv();r&&bt(iS,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=t;const e=Cv();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.ac(),this.uc(t)}enterRestrictedMode(t){if(!this.Xu){this.Xu=!0,this.rc=t||!1;const e=Cv();e&&typeof e.removeEventListener=="function"&&e.removeEventListener("visibilitychange",this.oc)}}enqueue(t){if(this.ac(),this.Xu)return new Promise(()=>{});const e=new ns;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(t().then(e.resolve,e.reject),e.promise)).then(()=>e.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Zu.push(t),this.cc()))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(t){if(!Pc(t))throw t;bt(iS,"Operation failed with retryable error: "+t)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(t){const e=this._c.then(()=>(this.nc=!0,t().catch(r=>{throw this.tc=r,this.nc=!1,os("INTERNAL UNHANDLED ERROR: ",sS(r)),r}).then(r=>(this.nc=!1,r))));return this._c=e,e}enqueueAfterDelay(t,e,r){this.ac(),this.sc.indexOf(t)>-1&&(e=0);const i=t2.createAndSchedule(this,t,e,r,a=>this.lc(a));return this.ec.push(i),i}ac(){this.tc&&Ft(47125,{hc:sS(this.tc)})}verifyOperationInProgress(){}async Pc(){let t;do t=this._c,await t;while(t!==this._c)}Tc(t){for(const e of this.ec)if(e.timerId===t)return!0;return!1}Ic(t){return this.Pc().then(()=>{this.ec.sort((e,r)=>e.targetTimeMs-r.targetTimeMs);for(const e of this.ec)if(e.skipDelay(),t!=="all"&&e.timerId===t)break;return this.Pc()})}dc(t){this.sc.push(t)}lc(t){const e=this.ec.indexOf(t);this.ec.splice(e,1)}}function sS(n){let t=n.message||"";return n.stack&&(t=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),t}class Oo extends ad{constructor(t,e,r,i){super(t,e,r,i),this.type="firestore",this._queue=new aS,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new aS(t),this._firestoreClient=void 0,await t}}}function Ck(n,t){const e=typeof n=="object"?n:BC(),r=typeof n=="string"?n:z1,i=Ex(e,"firestore").getImmediate({identifier:r});if(!i._initialized){const a=UD("firestore");a&&Tk(i,...a)}return i}function jg(n){if(n._terminated)throw new At(ct.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||Ik(n),n._firestoreClient}function Ik(n){var t,e,r;const i=n._freezeSettings(),a=function(l,c,f,d){return new QP(l,c,f,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,j3(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)}(n._databaseId,((t=n._app)===null||t===void 0?void 0:t.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((e=i.localCache)===null||e===void 0)&&e._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new Ak(n._authCredentials,n._appCheckCredentials,n._queue,a,n._componentsProvider&&function(l){const c=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(c),_online:c}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yi{constructor(t){this._byteString=t}static fromBase64String(t){try{return new yi(rr.fromBase64String(t))}catch(e){throw new At(ct.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(t){return new yi(rr.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:yi._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(td(t,yi._jsonSchema))return yi.fromBase64String(t.bytes)}}yi._jsonSchemaVersion="firestore/bytes/1.0",yi._jsonSchema={type:yn("string",yi._jsonSchemaVersion),bytes:yn("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sd{constructor(...t){for(let e=0;e<t.length;++e)if(t[e].length===0)throw new At(ct.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new er(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zg{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ha{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new At(ct.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new At(ct.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return Yt(this._lat,t._lat)||Yt(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:ha._jsonSchemaVersion}}static fromJSON(t){if(td(t,ha._jsonSchema))return new ha(t.latitude,t.longitude)}}ha._jsonSchemaVersion="firestore/geoPoint/1.0",ha._jsonSchema={type:yn("string",ha._jsonSchemaVersion),latitude:yn("number"),longitude:yn("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class da{constructor(t){this._values=(t||[]).map(e=>e)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(r,i){if(r.length!==i.length)return!1;for(let a=0;a<r.length;++a)if(r[a]!==i[a])return!1;return!0}(this._values,t._values)}toJSON(){return{type:da._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(td(t,da._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every(e=>typeof e=="number"))return new da(t.vectorValues);throw new At(ct.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}da._jsonSchemaVersion="firestore/vectorValue/1.0",da._jsonSchema={type:yn("string",da._jsonSchemaVersion),vectorValues:yn("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rk=/^__.*__$/;class Dk{constructor(t,e,r){this.data=t,this.fieldMask=e,this.fieldTransforms=r}toMutation(t,e){return this.fieldMask!==null?new Do(t,this.data,this.fieldMask,e,this.fieldTransforms):new ed(t,this.data,e,this.fieldTransforms)}}class H3{constructor(t,e,r){this.data=t,this.fieldMask=e,this.fieldTransforms=r}toMutation(t,e){return new Do(t,this.data,this.fieldMask,e,this.fieldTransforms)}}function G3(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ft(40011,{Ec:n})}}class a2{constructor(t,e,r,i,a,s){this.settings=t,this.databaseId=e,this.serializer=r,this.ignoreUndefinedProperties=i,a===void 0&&this.Ac(),this.fieldTransforms=a||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(t){return new a2(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(t){var e;const r=(e=this.path)===null||e===void 0?void 0:e.child(t),i=this.Rc({path:r,mc:!1});return i.fc(t),i}gc(t){var e;const r=(e=this.path)===null||e===void 0?void 0:e.child(t),i=this.Rc({path:r,mc:!1});return i.Ac(),i}yc(t){return this.Rc({path:void 0,mc:!0})}wc(t){return Z1(t,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(t){return this.fieldMask.find(e=>t.isPrefixOf(e))!==void 0||this.fieldTransforms.find(e=>t.isPrefixOf(e.field))!==void 0}Ac(){if(this.path)for(let t=0;t<this.path.length;t++)this.fc(this.path.get(t))}fc(t){if(t.length===0)throw this.wc("Document fields must not be empty");if(G3(this.Ec)&&Rk.test(t))throw this.wc('Document fields cannot begin and end with "__"')}}class Ok{constructor(t,e,r){this.databaseId=t,this.ignoreUndefinedProperties=e,this.serializer=r||Vg(t)}Dc(t,e,r,i=!1){return new a2({Ec:t,methodName:e,bc:r,path:er.emptyPath(),mc:!1,Sc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function od(n){const t=n._freezeSettings(),e=Vg(n._databaseId);return new Ok(n._databaseId,!!t.ignoreUndefinedProperties,e)}function s2(n,t,e,r,i,a={}){const s=n.Dc(a.merge||a.mergeFields?2:0,t,e,i);l2("Data must be an object, but it was:",s,r);const l=W3(r,s);let c,f;if(a.merge)c=new Yr(s.fieldMask),f=s.fieldTransforms;else if(a.mergeFields){const d=[];for(const g of a.mergeFields){const m=Fy(t,g,e);if(!s.contains(m))throw new At(ct.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);Y3(d,m)||d.push(m)}c=new Yr(d),f=s.fieldTransforms.filter(g=>c.covers(g.field))}else c=null,f=s.fieldTransforms;return new Dk(new Nr(l),c,f)}class Hg extends zg{_toFieldTransform(t){if(t.Ec!==2)throw t.Ec===1?t.wc(`${this._methodName}() can only appear at the top level of your update data`):t.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof Hg}}class o2 extends zg{_toFieldTransform(t){return new b5(t.path,new Lh)}isEqual(t){return t instanceof o2}}function $3(n,t,e,r){const i=n.Dc(1,t,e);l2("Data must be an object, but it was:",i,r);const a=[],s=Nr.empty();Ro(r,(c,f)=>{const d=u2(t,c,e);f=Nn(f);const g=i.gc(d);if(f instanceof Hg)a.push(d);else{const m=ld(f,g);m!=null&&(a.push(d),s.set(d,m))}});const l=new Yr(a);return new H3(s,l,i.fieldTransforms)}function q3(n,t,e,r,i,a){const s=n.Dc(1,t,e),l=[Fy(t,r,e)],c=[i];if(a.length%2!=0)throw new At(ct.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<a.length;m+=2)l.push(Fy(t,a[m])),c.push(a[m+1]);const f=[],d=Nr.empty();for(let m=l.length-1;m>=0;--m)if(!Y3(f,l[m])){const v=l[m];let _=c[m];_=Nn(_);const w=s.gc(v);if(_ instanceof Hg)f.push(v);else{const b=ld(_,w);b!=null&&(f.push(v),d.set(v,b))}}const g=new Yr(f);return new H3(d,g,s.fieldTransforms)}function Mk(n,t,e,r=!1){return ld(e,n.Dc(r?4:3,t))}function ld(n,t){if(X3(n=Nn(n)))return l2("Unsupported field value:",t,n),W3(n,t);if(n instanceof zg)return function(r,i){if(!G3(i.Ec))throw i.wc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.wc(`${r._methodName}() is not currently supported inside arrays`);const a=r._toFieldTransform(i);a&&i.fieldTransforms.push(a)}(n,t),null;if(n===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),n instanceof Array){if(t.settings.mc&&t.Ec!==4)throw t.wc("Nested arrays are not supported");return function(r,i){const a=[];let s=0;for(const l of r){let c=ld(l,i.yc(s));c==null&&(c={nullValue:"NULL_VALUE"}),a.push(c),s++}return{arrayValue:{values:a}}}(n,t)}return function(r,i){if((r=Nn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return A5(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const a=He.fromDate(r);return{timestampValue:W1(i.serializer,a)}}if(r instanceof He){const a=new He(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:W1(i.serializer,a)}}if(r instanceof ha)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof yi)return{bytesValue:l3(i.serializer,r._byteString)};if(r instanceof on){const a=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(a))throw i.wc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:$x(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof da)return function(s,l){return{mapValue:{fields:{[BI]:{stringValue:VI},[H1]:{arrayValue:{values:s.toArray().map(f=>{if(typeof f!="number")throw l.wc("VectorValues must only contain numeric values.");return zx(l.serializer,f)})}}}}}}(r,i);throw i.wc(`Unsupported field value: ${Ig(r)}`)}(n,t)}function W3(n,t){const e={};return OI(n)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Ro(n,(r,i)=>{const a=ld(i,t.Vc(r));a!=null&&(e[r]=a)}),{mapValue:{fields:e}}}function X3(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof He||n instanceof ha||n instanceof yi||n instanceof on||n instanceof zg||n instanceof da)}function l2(n,t,e){if(!X3(e)||!RI(e)){const r=Ig(e);throw r==="an object"?t.wc(n+" a custom object"):t.wc(n+" "+r)}}function Fy(n,t,e){if((t=Nn(t))instanceof sd)return t._internalPath;if(typeof t=="string")return u2(n,t);throw Z1("Field path arguments must be of type string or ",n,!1,void 0,e)}const Nk=new RegExp("[~\\*/\\[\\]]");function u2(n,t,e){if(t.search(Nk)>=0)throw Z1(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,e);try{return new sd(...t.split("."))._internalPath}catch{throw Z1(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,e)}}function Z1(n,t,e,r,i){const a=r&&!r.isEmpty(),s=i!==void 0;let l=`Function ${t}() called with invalid data`;e&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(a||s)&&(c+=" (found",a&&(c+=` in field ${r}`),s&&(c+=` in document ${i}`),c+=")"),new At(ct.INVALID_ARGUMENT,l+n+c)}function Y3(n,t){return n.some(e=>e.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K3{constructor(t,e,r,i,a){this._firestore=t,this._userDataWriter=e,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new on(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new Pk(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const e=this._document.data.field(Gg("DocumentSnapshot.get",t));if(e!==null)return this._userDataWriter.convertValue(e)}}}class Pk extends K3{data(){return super.data()}}function Gg(n,t){return typeof t=="string"?u2(n,t):t instanceof sd?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kk(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new At(ct.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class c2{}class f2 extends c2{}function sn(n,t,...e){let r=[];t instanceof c2&&r.push(t),r=r.concat(e),function(a){const s=a.filter(c=>c instanceof h2).length,l=a.filter(c=>c instanceof $g).length;if(s>1||s>0&&l>0)throw new At(ct.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class $g extends f2{constructor(t,e,r){super(),this._field=t,this._op=e,this._value=r,this.type="where"}static _create(t,e,r){return new $g(t,e,r)}_apply(t){const e=this._parse(t);return Z3(t._query,e),new ms(t.firestore,t.converter,Ry(t._query,e))}_parse(t){const e=od(t.firestore);return function(a,s,l,c,f,d,g){let m;if(f.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new At(ct.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){lS(g,d);const _=[];for(const w of g)_.push(oS(c,a,w));m={arrayValue:{values:_}}}else m=oS(c,a,g)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||lS(g,d),m=Mk(l,s,g,d==="in"||d==="not-in");return vn.create(f,d,m)}(t._query,"where",e,t.firestore._databaseId,this._field,this._op,this._value)}}function ze(n,t,e){const r=t,i=Gg("where",n);return $g._create(i,r,e)}class h2 extends c2{constructor(t,e){super(),this.type=t,this._queryConstraints=e}static _create(t,e){return new h2(t,e)}_parse(t){const e=this._queryConstraints.map(r=>r._parse(t)).filter(r=>r.getFilters().length>0);return e.length===1?e[0]:Ui.create(e,this._getOperator())}_apply(t){const e=this._parse(t);return e.getFilters().length===0?t:(function(i,a){let s=i;const l=a.getFlattenedFilters();for(const c of l)Z3(s,c),s=Ry(s,c)}(t._query,e),new ms(t.firestore,t.converter,Ry(t._query,e)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class d2 extends f2{constructor(t,e){super(),this._field=t,this._direction=e,this.type="orderBy"}static _create(t,e){return new d2(t,e)}_apply(t){const e=function(i,a,s){if(i.startAt!==null)throw new At(ct.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new At(ct.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new kh(a,s)}(t._query,this._field,this._direction);return new ms(t.firestore,t.converter,function(i,a){const s=i.explicitOrderBy.concat([a]);return new Vl(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(t._query,e))}}function Fh(n,t="asc"){const e=t,r=Gg("orderBy",n);return d2._create(r,e)}class g2 extends f2{constructor(t,e,r){super(),this.type=t,this._limit=e,this._limitType=r}static _create(t,e,r){return new g2(t,e,r)}_apply(t){return new ms(t.firestore,t.converter,$1(t._query,this._limit,this._limitType))}}function Q0(n){return jP("limit",n),g2._create("limit",n,"F")}function oS(n,t,e){if(typeof(e=Nn(e))=="string"){if(e==="")throw new At(ct.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!qI(t)&&e.indexOf("/")!==-1)throw new At(ct.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${e}' contains a '/' character.`);const r=t.path.child(Le.fromString(e));if(!Ot.isDocumentKey(r))throw new At(ct.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return bb(n,new Ot(r))}if(e instanceof on)return bb(n,e._key);throw new At(ct.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Ig(e)}.`)}function lS(n,t){if(!Array.isArray(n)||n.length===0)throw new At(ct.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function Z3(n,t){const e=function(i,a){for(const s of i)for(const l of s.getFlattenedFilters())if(a.indexOf(l.op)>=0)return l.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(e!==null)throw e===t.op?new At(ct.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new At(ct.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${e.toString()}' filters.`)}class Lk{convertValue(t,e="none"){switch(bo(t)){case 0:return null;case 1:return t.booleanValue;case 2:return an(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(Eo(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 11:return this.convertObject(t.mapValue,e);case 10:return this.convertVectorValue(t.mapValue);default:throw Ft(62114,{value:t})}}convertObject(t,e){return this.convertObjectMap(t.fields,e)}convertObjectMap(t,e="none"){const r={};return Ro(t,(i,a)=>{r[i]=this.convertValue(a,e)}),r}convertVectorValue(t){var e,r,i;const a=(i=(r=(e=t.fields)===null||e===void 0?void 0:e[H1].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>an(s.doubleValue));return new da(a)}convertGeoPoint(t){return new ha(an(t.latitude),an(t.longitude))}convertArray(t,e){return(t.values||[]).map(r=>this.convertValue(r,e))}convertServerTimestamp(t,e){switch(e){case"previous":const r=Og(t);return r==null?null:this.convertValue(r,e);case"estimate":return this.convertTimestamp(Mh(t));default:return null}}convertTimestamp(t){const e=wo(t);return new He(e.seconds,e.nanos)}convertDocumentKey(t,e){const r=Le.fromString(t);Ee(g3(r),9688,{name:t});const i=new Nh(r.get(1),r.get(3)),a=new Ot(r.popFirst(5));return i.isEqual(e)||os(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p2(n,t,e){let r;return r=n?e&&(e.merge||e.mergeFields)?n.toFirestore(t,e):n.toFirestore(t):t,r}class dh{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class Tl extends K3{constructor(t,e,r,i,a,s){super(t,e,r,i,s),this._firestore=t,this._firestoreImpl=t,this.metadata=a}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const e=new T1(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){const r=this._document.data.field(Gg("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r,e.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new At(ct.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,e={};return e.type=Tl._jsonSchemaVersion,e.bundle="",e.bundleSource="DocumentSnapshot",e.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?e:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),e.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),e)}}Tl._jsonSchemaVersion="firestore/documentSnapshot/1.0",Tl._jsonSchema={type:yn("string",Tl._jsonSchemaVersion),bundleSource:yn("string","DocumentSnapshot"),bundleName:yn("string"),bundle:yn("string")};class T1 extends Tl{data(t={}){return super.data(t)}}class cc{constructor(t,e,r,i){this._firestore=t,this._userDataWriter=e,this._snapshot=i,this.metadata=new dh(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const t=[];return this.forEach(e=>t.push(e)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,e){this._snapshot.docs.forEach(r=>{t.call(e,new T1(this._firestore,this._userDataWriter,r.key,r,new dh(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new At(ct.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(i,a){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(l=>{const c=new T1(i._firestore,i._userDataWriter,l.doc.key,l.doc,new dh(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(l=>a||l.type!==3).map(l=>{const c=new T1(i._firestore,i._userDataWriter,l.doc.key,l.doc,new dh(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);let f=-1,d=-1;return l.type!==0&&(f=s.indexOf(l.doc.key),s=s.delete(l.doc.key)),l.type!==1&&(s=s.add(l.doc),d=s.indexOf(l.doc.key)),{type:Bk(l.type),doc:c,oldIndex:f,newIndex:d}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new At(ct.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=cc._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=Px.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const e=[],r=[],i=[];return this.docs.forEach(a=>{a._document!==null&&(e.push(a._document),r.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),i.push(a.ref.path))}),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function Bk(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ft(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vk(n){n=Zr(n,on);const t=Zr(n.firestore,Oo);return bk(jg(t),n._key).then(e=>Uk(t,n,e))}cc._jsonSchemaVersion="firestore/querySnapshot/1.0",cc._jsonSchema={type:yn("string",cc._jsonSchemaVersion),bundleSource:yn("string","QuerySnapshot"),bundleName:yn("string"),bundle:yn("string")};class Q3 extends Lk{constructor(t){super(),this.firestore=t}convertBytes(t){return new yi(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new on(this.firestore,null,e)}}function mn(n){n=Zr(n,ms);const t=Zr(n.firestore,Oo),e=jg(t),r=new Q3(t);return kk(n._query),Sk(e,n._query).then(i=>new cc(t,r,n,i))}function uS(n,t,e){n=Zr(n,on);const r=Zr(n.firestore,Oo),i=p2(n.converter,t,e);return ud(r,[s2(od(r),"setDoc",n._key,i,n.converter!==null,e).toMutation(n._key,Sr.none())])}function qg(n,t,e,...r){n=Zr(n,on);const i=Zr(n.firestore,Oo),a=od(i);let s;return s=typeof(t=Nn(t))=="string"||t instanceof sd?q3(a,"updateDoc",n._key,t,e,r):$3(a,"updateDoc",n._key,t),ud(i,[s.toMutation(n._key,Sr.exists(!0))])}function Fk(n){return ud(Zr(n.firestore,Oo),[new Lg(n._key,Sr.none())])}function J3(n,t){const e=Zr(n.firestore,Oo),r=us(n),i=p2(n.converter,t);return ud(e,[s2(od(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,Sr.exists(!1))]).then(()=>r)}function ud(n,t){return function(r,i){const a=new ns;return r.asyncQueue.enqueueAndForget(async()=>hk(await Ek(r),i,a)),a.promise}(jg(n),t)}function Uk(n,t,e){const r=e.docs.get(t._key),i=new Q3(n);return new Tl(n,i,t._key,r,new dh(e.hasPendingWrites,e.fromCache),t.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jk{constructor(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=od(t)}set(t,e,r){this._verifyNotCommitted();const i=Rv(t,this._firestore),a=p2(i.converter,e,r),s=s2(this._dataReader,"WriteBatch.set",i._key,a,i.converter!==null,r);return this._mutations.push(s.toMutation(i._key,Sr.none())),this}update(t,e,r,...i){this._verifyNotCommitted();const a=Rv(t,this._firestore);let s;return s=typeof(e=Nn(e))=="string"||e instanceof sd?q3(this._dataReader,"WriteBatch.update",a._key,e,r,i):$3(this._dataReader,"WriteBatch.update",a._key,e),this._mutations.push(s.toMutation(a._key,Sr.exists(!0))),this}delete(t){this._verifyNotCommitted();const e=Rv(t,this._firestore);return this._mutations=this._mutations.concat(new Lg(e._key,Sr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new At(ct.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Rv(n,t){if((n=Nn(n)).firestore!==t)throw new At(ct.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}function ga(){return new o2("serverTimestamp")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zk(n){return jg(n=Zr(n,Oo)),new jk(n,t=>ud(n,t))}(function(t,e=!0){(function(i){Mc=i})(Dc),dc(new Ol("firestore",(r,{instanceIdentifier:i,options:a})=>{const s=r.getProvider("app").getImmediate(),l=new Oo(new NP(r.getProvider("auth-internal")),new LP(s,r.getProvider("app-check-internal")),function(f,d){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new At(ct.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Nh(f.options.projectId,d)}(s,i),s);return a=Object.assign({useFetchStreams:e},a),l._setSettings(a),l},"PUBLIC").setMultipleInstances(!0)),po(cb,fb,t),po(cb,fb,"esm2017")})();const Hk={apiKey:"AIzaSyBg60nFX2rmrW66n3lPeXRLTfMhjlgFrEE",authDomain:"project-01-bookmemo-prod.firebaseapp.com",projectId:"project-01-bookmemo-prod",storageBucket:"project-01-bookmemo-prod.firebasestorage.app",messagingSenderId:"414976225343",appId:"1:414976225343:web:31244d8c1ffe3b6f89088a"},t4=LC(Hk),m2=CP(t4),he=Ck(t4),e4=H.createContext();function Gk({children:n}){const[t,e]=H.useState(null),[r,i]=H.useState(!0);return H.useEffect(()=>{const a=mN(m2,s=>{e(s),i(!1)});return()=>a()},[]),A.jsx(e4.Provider,{value:{user:t,loading:r},children:n})}function Pn(){return H.useContext(e4)}function $k(){const[n,t]=H.useState(""),[e,r]=H.useState(""),[i,a]=H.useState(""),[s,l]=H.useState(!1),c=Wh(),f=async d=>{if(d.preventDefault(),!s){l(!0),a("");try{await dN(m2,n,e),c("/")}catch(g){a(g.message)}finally{l(!1)}}};return A.jsxs(ot,{component:"form",onSubmit:f,sx:{maxWidth:400,mx:"auto",mt:8},children:[A.jsx(st,{variant:"h5",align:"center",gutterBottom:!0,"data-testid":"login-title",children:"ログイン"}),A.jsx(oe,{label:"メールアドレス",type:"email",value:n,onChange:d=>t(d.target.value),fullWidth:!0,margin:"normal",required:!0,inputProps:{"data-testid":"login-email-input"}}),A.jsx(oe,{label:"パスワード",type:"password",value:e,onChange:d=>r(d.target.value),fullWidth:!0,margin:"normal",required:!0,inputProps:{"data-testid":"login-password-input"}}),i&&A.jsx(st,{color:"error",children:i}),A.jsx(qt,{type:"submit",variant:"contained",fullWidth:!0,sx:{mt:2},"data-testid":"login-submit",disabled:s,children:s?"ログイン中...":"ログイン"})]})}function qk(){const[n,t]=H.useState(""),[e,r]=H.useState(""),[i,a]=H.useState(""),[s,l]=H.useState(!1),c=async f=>{if(f.preventDefault(),!s){l(!0),a("");try{await hN(m2,n,e)}catch(d){a(d.message)}finally{l(!1)}}};return A.jsxs(ot,{component:"form",onSubmit:c,sx:{maxWidth:400,mx:"auto",mt:8},children:[A.jsx(st,{variant:"h5",align:"center",gutterBottom:!0,children:"新規登録"}),A.jsx(oe,{label:"メールアドレス",type:"email",value:n,onChange:f=>t(f.target.value),fullWidth:!0,margin:"normal",required:!0}),A.jsx(oe,{label:"パスワード",type:"password",value:e,onChange:f=>r(f.target.value),fullWidth:!0,margin:"normal",required:!0}),i&&A.jsx(st,{color:"error",children:i}),A.jsx(qt,{type:"submit",variant:"contained",fullWidth:!0,sx:{mt:2},disabled:s,children:s?"登録中...":"新規登録"})]})}function Wk({book:n,onClick:t,testId:e}){const r=i=>{switch(i){case"reading":return"読書中";case"finished":return"読了";default:return"読書中"}};return A.jsx(gn,{sx:{cursor:"pointer","&:hover":{boxShadow:3},height:"100%",display:"flex",flexDirection:"column",minHeight:{xs:"140px",sm:"160px"}},onClick:t,"data-testid":e||`book-card-${n.id}`,children:A.jsx(pn,{sx:{flex:1,display:"flex",flexDirection:"column",p:{xs:1.5,sm:2},"&:last-child":{pb:{xs:1.5,sm:2}}},children:A.jsxs(ot,{sx:{display:"flex",alignItems:"flex-start",gap:{xs:1.5,sm:2},height:"100%"},children:[n.coverImageUrl&&A.jsx(eD,{component:"img",sx:{width:{xs:50,sm:60},height:{xs:70,sm:80},objectFit:"cover",flexShrink:0,borderRadius:1},image:n.coverImageUrl,alt:n.title}),A.jsxs(ot,{sx:{flex:1,minWidth:0,display:"flex",flexDirection:"column",height:"100%"},children:[A.jsx(st,{variant:"h6",component:"h3",gutterBottom:!0,sx:{fontSize:{xs:"0.9rem",sm:"1rem",md:"1.1rem"},lineHeight:1.2,fontWeight:600,mb:.5,overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical"},children:n.title||"タイトル未設定"}),A.jsx(st,{variant:"body2",color:"text.secondary",sx:{fontSize:{xs:"0.75rem",sm:"0.8rem",md:"0.9rem"},mb:.5,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:n.author||"著者未設定"}),(n.publisher||n.publishedDate)&&A.jsxs(st,{variant:"body2",color:"text.secondary",sx:{fontSize:{xs:"0.7rem",sm:"0.75rem",md:"0.8rem"},mb:1,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:[n.publisher," ",n.publisher&&n.publishedDate&&"•"," ",n.publishedDate]}),A.jsx(ot,{sx:{minHeight:{xs:"32px",sm:"36px"},mb:1,display:"flex",flexWrap:"wrap",gap:.5},children:n.tags&&n.tags.length>0?n.tags.slice(0,3).map((i,a)=>A.jsx(Dn,{label:i,size:"small",variant:"outlined",sx:{fontSize:{xs:"0.65rem",sm:"0.7rem",md:"0.75rem"},height:{xs:"18px",sm:"20px",md:"22px"},"& .MuiChip-label":{px:{xs:.5,sm:.75}}}},a)):A.jsx(st,{variant:"caption",color:"text.secondary",sx:{fontSize:{xs:"0.65rem",sm:"0.7rem",md:"0.75rem"},alignSelf:"center"},children:"タグなし"})}),A.jsxs(st,{variant:"caption",color:"text.secondary",sx:{mt:"auto",fontSize:{xs:"0.65rem",sm:"0.7rem",md:"0.75rem"},fontWeight:500},children:["ステータス: ",r(n.status)]})]})]})})})}const Wg=({title:n,subtitle:t,children:e})=>A.jsxs(Ic,{elevation:0,"data-testid":"page-header",sx:{background:`
          linear-gradient(135deg, rgba(139, 69, 19, 0.9) 0%, rgba(160, 82, 45, 0.8) 100%),
          repeating-linear-gradient(
            45deg,
            transparent,
            transparent 4px,
            rgba(139, 69, 19, 0.1) 4px,
            rgba(139, 69, 19, 0.1) 8px
          ),
          linear-gradient(135deg, #8B4513 0%, #A0522D 50%, #CD853F 100%)
        `,backgroundSize:"cover, 16px 16px, cover",backgroundRepeat:"no-repeat, repeat, no-repeat",backgroundPosition:"center, center, center",borderRadius:0,mb:3,position:"relative",overflow:"hidden",borderBottom:"3px solid rgba(139, 69, 19, 0.3)"},children:[A.jsxs(ot,{sx:{p:{xs:2,sm:3,md:4},textAlign:"center",color:"white",position:"relative",zIndex:1},children:[A.jsx(st,{variant:"h4",component:"h1","data-testid":"page-header-title",sx:{fontWeight:700,fontSize:{xs:"1.5rem",sm:"2rem",md:"2.5rem"},mb:t?1:0,textShadow:"0 2px 4px rgba(0,0,0,0.7)",color:"#FFF8DC"},children:n}),t&&A.jsx(st,{variant:"body1","data-testid":"page-header-subtitle",sx:{opacity:.95,fontSize:{xs:"0.9rem",sm:"1rem"},textShadow:"0 1px 2px rgba(0,0,0,0.7)",color:"#F5F5DC"},children:t}),e&&A.jsx(ot,{sx:{mt:2},children:e})]}),A.jsx(ot,{sx:{position:"absolute",top:0,left:0,right:0,bottom:0,background:`
            radial-gradient(circle at 30% 70%, rgba(255,255,255,0.15) 0%, transparent 40%),
            radial-gradient(circle at 70% 30%, rgba(255,255,255,0.1) 0%, transparent 30%)
          `,pointerEvents:"none"}})]}),Tr=Kr.createContext({setGlobalError:()=>{}}),Xk=({open:n,message:t,onClose:e})=>A.jsxs(ma,{open:n,onClose:e,maxWidth:"xs",fullWidth:!0,disableEscapeKeyDown:!1,disableBackdropClick:!1,children:[A.jsx(va,{sx:{color:"error.main",fontWeight:"bold"},children:"エラーが発生しました"}),A.jsx(ya,{children:A.jsx(co,{severity:"error",sx:{mb:2},children:t})}),A.jsx(xa,{sx:{justifyContent:"center",pb:2},children:A.jsx(qt,{onClick:e,color:"error",variant:"contained",autoFocus:!0,children:"閉じる"})})]}),Yk=({children:n})=>{const[t,e]=H.useState(null),r=a=>{e(a)},i=()=>{e(null)};return A.jsxs(Tr.Provider,{value:{setGlobalError:r},children:[n,t&&A.jsx(Xk,{open:!!t,message:t,onClose:i})]})};function Qf(n){return n?(e=>e.replace(/[Ａ-Ｚａ-ｚ０-９]/g,r=>String.fromCharCode(r.charCodeAt(0)-65248)))(n).toLowerCase():""}const Kk=()=>{try{if(typeof Kr>"u"||!Kr.useState)return{allBooks:[],filteredBooks:[],stats:{total:0,reading:0,finished:0,filtered:0},loading:!1,error:null,filter:"reading",searchText:"",fetchBooks:async()=>{},handleFilterChange:()=>{},handleSearchChange:()=>{},clearSearch:()=>{},clearFilter:()=>{},normalizeTag:()=>""}}catch(M){return console.warn("React context not available in useBookList:",M),{allBooks:[],filteredBooks:[],stats:{total:0,reading:0,finished:0,filtered:0},loading:!1,error:null,filter:"reading",searchText:"",fetchBooks:async()=>{},handleFilterChange:()=>{},handleSearchChange:()=>{},clearSearch:()=>{},clearFilter:()=>{},normalizeTag:()=>""}}const{user:n}=Pn(),t=H.useContext(Tr),e=(t==null?void 0:t.setGlobalError)||(()=>{}),[r,i]=H.useState([]),[a,s]=H.useState(!0),[l,c]=H.useState(null),[f,d]=H.useState("reading"),[g,m]=H.useState(""),v=H.useCallback(async()=>{if(!n){i([]),s(!1);return}try{s(!0),c(null),console.log("=== useBookList fetchBooks START ===");const M=sn(br(he,"books"),ze("userId","==",n.uid),Fh("updatedAt","desc"));console.log("=== useBookList getDocs START ===");const N=await mn(M);console.log("=== useBookList getDocs END ===");const k=N.docs.map(O=>({id:O.id,...O.data()}));console.log("=== useBookList setAllBooks START ==="),i(k),console.log("=== useBookList setAllBooks END ===")}catch(M){console.error("Error fetching books:",M),e("書籍一覧の取得に失敗しました。"),c("書籍一覧の取得に失敗しました。")}finally{console.log("=== useBookList setLoading false ==="),s(!1)}},[n,e]),_=H.useCallback((M,N)=>{d(N)},[]),w=H.useCallback(M=>{m(M.target.value)},[]),b=H.useCallback(()=>{m("")},[]),S=H.useCallback(()=>{d("reading")},[]),C=r.filter(M=>{if(f!=="all"&&(M.status||"reading")!==f)return!1;if(!g.trim())return!0;const N=Qf(g);return M.title&&Qf(M.title).includes(N)||M.author&&Qf(M.author).includes(N)||Array.isArray(M.tags)&&M.tags.some(k=>Qf(k).includes(N))}),I={total:r.length,reading:r.filter(M=>(M.status||"reading")==="reading").length,finished:r.filter(M=>M.status==="finished").length,filtered:C.length};return H.useEffect(()=>{v()},[n==null?void 0:n.uid]),{allBooks:r,filteredBooks:C,stats:I,loading:a,error:l,filter:f,searchText:g,fetchBooks:v,handleFilterChange:_,handleSearchChange:w,clearSearch:b,clearFilter:S,normalizeTag:Qf}};var Zk={};const Uy=()=>typeof process<"u"&&Zk?!0:typeof window<"u"&&window.location?window.location.hostname!=="localhost"&&window.location.hostname!=="127.0.0.1":!1,Qk=()=>Uy()?"/project-01-bookmemo":"",Oi=n=>{const t=Qk(),e=n.startsWith("/")?n:`/${n}`;return`${t}${e}`},Wr={MANIFEST:()=>Oi("/manifest.webmanifest"),SW_JS:()=>Oi("/sw.js"),VITE_SVG:()=>Oi("/vite.svg"),PAPER_TEXTURE:()=>Oi("/paper-texture.jpg"),ICON_192:()=>Oi("/icons/icon-192x192.png"),ICON_512:()=>Oi("/icons/icon-512x512.png"),APPLE_TOUCH_ICON:()=>Oi("/icons/apple-touch-icon.png"),APPLE_TOUCH_ICON_512:()=>Oi("/icons/apple-touch-icon-512x512.png"),ROOT:()=>Oi("/"),ADD:()=>Oi("/add"),SEARCH:()=>Oi("/search"),IS_PRODUCTION:Uy,IS_DEVELOPMENT:()=>!Uy()},v2=()=>{try{if(typeof Kr>"u"||!Kr.useState)return{isOnline:!0,isInstallable:!1,isInstalled:!1,swRegistration:null,userEngagement:0,lastVisitTime:null,shouldShowInstallPrompt:!1,shouldShowManualInstallGuide:!1,registerServiceWorker:async()=>null,installApp:async()=>{},requestNotificationPermission:async()=>"denied",sendNotification:()=>null,checkForUpdates:async()=>{},clearCache:async()=>{},reloadApp:()=>{},recordInstallPromptDismiss:()=>{}}}catch(D){return console.warn("React context not available in usePWA:",D),{isOnline:!0,isInstallable:!1,isInstalled:!1,swRegistration:null,userEngagement:0,lastVisitTime:null,shouldShowInstallPrompt:!1,shouldShowManualInstallGuide:!1,registerServiceWorker:async()=>null,installApp:async()=>{},requestNotificationPermission:async()=>"denied",sendNotification:()=>null,checkForUpdates:async()=>{},clearCache:async()=>{},reloadApp:()=>{},recordInstallPromptDismiss:()=>{}}}if(!(typeof window<"u"&&typeof navigator<"u"&&"serviceWorker"in navigator&&"PushManager"in window&&!Wr.IS_DEVELOPMENT()))return{isOnline:!0,isInstallable:!1,isInstalled:!1,swRegistration:null,userEngagement:0,lastVisitTime:null,shouldShowInstallPrompt:!1,shouldShowManualInstallGuide:!1,registerServiceWorker:async()=>null,installApp:async()=>{},requestNotificationPermission:async()=>"denied",sendNotification:()=>null,checkForUpdates:async()=>{},clearCache:async()=>{},reloadApp:()=>{},recordInstallPromptDismiss:()=>{}};const[t,e]=H.useState(navigator.onLine),[r,i]=H.useState(null),[a,s]=H.useState(null),[l,c]=H.useState(!1),[f,d]=H.useState(!1),[g,m]=H.useState(0),[v,_]=H.useState(null);H.useEffect(()=>{const D=()=>e(!0),L=()=>e(!1);return window.addEventListener("online",D),window.addEventListener("offline",L),()=>{window.removeEventListener("online",D),window.removeEventListener("offline",L)}},[]),H.useEffect(()=>{if(typeof window>"u")return;const D=()=>{m(F=>F+1)},L=["click","scroll","keydown","touchstart"];return L.forEach(F=>{window.addEventListener(F,D,{passive:!0})}),()=>{L.forEach(F=>{window.removeEventListener(F,D)})}},[]),H.useEffect(()=>{if(typeof localStorage>"u")return;const D=Date.now(),L=localStorage.getItem("bookmemo_last_visit");if(L){if(D-parseInt(L)>1440*60*1e3){const U=parseInt(localStorage.getItem("bookmemo_visit_count")||"0")+1;localStorage.setItem("bookmemo_visit_count",U.toString())}}else localStorage.setItem("bookmemo_visit_count","1");localStorage.setItem("bookmemo_last_visit",D.toString()),_(D)},[]);const w=H.useCallback(async()=>{if(Wr.IS_DEVELOPMENT())return console.log("Service Worker registration skipped in development environment"),null;try{const D=Wr.SW_JS(),L=await navigator.serviceWorker.register(D);return i(L),console.log("Service Worker registered:",L),L.addEventListener("updatefound",()=>{const F=L.installing;F&&F.addEventListener("statechange",()=>{F.state==="installed"&&navigator.serviceWorker.controller&&console.log("New Service Worker available")})}),L}catch(D){return console.error("Service Worker registration failed:",D),console.warn("Service Worker registration failed, but app will continue without PWA features"),null}},[]);H.useEffect(()=>{if(typeof window>"u"||typeof localStorage>"u")return;const D=U=>{U.preventDefault(),s(U),c(!0)},L=()=>{d(!0),c(!1),s(null),console.log("PWA was installed"),localStorage.setItem("bookmemo_installed","true"),localStorage.setItem("bookmemo_install_date",Date.now().toString())};return window.addEventListener("beforeinstallprompt",D),window.addEventListener("appinstalled",L),localStorage.getItem("bookmemo_installed")==="true"&&(d(!0),c(!1)),()=>{window.removeEventListener("beforeinstallprompt",D),window.removeEventListener("appinstalled",L)}},[]);const b=H.useCallback(async()=>{if(a){a.prompt();const{outcome:D}=await a.userChoice;console.log(D==="accepted"?"User accepted the install prompt":"User dismissed the install prompt"),s(null),c(!1)}},[a]),S=H.useCallback(()=>{if(f||!l)return!1;const D=parseInt(localStorage.getItem("bookmemo_visit_count")||"0"),L=parseInt(localStorage.getItem("bookmemo_dismiss_count")||"0");return D>=1&&g>=5&&L<3},[f,l,g]),C=H.useCallback(()=>{if(f)return!1;const D=/iPad|iPhone|iPod/.test(navigator.userAgent),L=/Safari/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent);return D&&L},[f]),I=H.useCallback(()=>{if(typeof localStorage>"u")return;const D=parseInt(localStorage.getItem("bookmemo_dismiss_count")||"0")+1;localStorage.setItem("bookmemo_dismiss_count",D.toString())},[]),M=H.useCallback(async()=>{if(typeof window>"u"||!("Notification"in window))return"denied";try{return await Notification.requestPermission()}catch(D){return console.warn("Notification permission request failed:",D),"denied"}},[]),N=H.useCallback((D,L={})=>{if(typeof window>"u"||!("Notification"in window)||Notification.permission!=="granted")return null;try{const F=Wr.ICON_192();return new Notification(D,{icon:F,badge:F,...L})}catch(F){return console.warn("Notification send failed:",F),null}},[]),k=H.useCallback(async()=>{r&&await r.update()},[r]),O=H.useCallback(async()=>{if(!(typeof window>"u"||!("caches"in window)))try{const D=await caches.keys();await Promise.all(D.map(L=>caches.delete(L)))}catch(D){console.warn("Cache clear failed:",D)}},[]),R=H.useCallback(()=>{window.location.reload()},[]);return{isOnline:t,isInstallable:l,isInstalled:f,swRegistration:r,userEngagement:g,lastVisitTime:v,shouldShowInstallPrompt:S(),shouldShowManualInstallGuide:C(),registerServiceWorker:w,installApp:b,requestNotificationPermission:M,sendNotification:N,checkForUpdates:k,clearCache:O,reloadApp:R,recordInstallPromptDismiss:I}};function Jk(){const n=Wh(),{isInstallable:t,isInstalled:e,installApp:r,shouldShowManualInstallGuide:i}=v2(),{filteredBooks:a,loading:s,error:l,filter:c,searchText:f,handleFilterChange:d,handleSearchChange:g}=Kk(),m=w=>{n(`/book/${w}`)},v=async()=>{try{await r()}catch(w){console.error("Installation failed:",w)}},_=()=>{const w=/iPad|iPhone|iPod/.test(navigator.userAgent),b=/Safari/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent);w&&b&&alert(`📱 BookMemoをホーム画面に追加する手順：

1. 共有ボタンをタップ
   Safariの下部にある「共有」ボタン（□↑）をタップ

2. 「ホーム画面に追加」を選択
   共有メニューから「ホーム画面に追加」を選択

3. 追加を確認
   「追加」をタップしてホーム画面に追加

これでBookMemoをアプリとして使用できます！`)};return s?A.jsx("div",{children:"Loading..."}):A.jsxs(ot,{sx:{maxWidth:1200,mx:"auto",pb:{xs:"72px",sm:"80px"}},children:[A.jsx(Wg,{title:"本一覧",subtitle:"あなたの読書ライブラリ","data-testid":"book-list-header"}),A.jsxs(ot,{sx:{px:{xs:1.5,sm:2,md:0}},children:[A.jsxs(ot,{sx:{display:"flex",justifyContent:"center",alignItems:"center",gap:1,flexWrap:"wrap",mb:2},children:[t&&!e&&A.jsx(SE,{title:"BookMemoをアプリとしてインストール",children:A.jsx(Xr,{color:"primary",onClick:v,sx:{backgroundColor:"primary.main",color:"white","&:hover":{backgroundColor:"primary.dark"}},"data-testid":"pwa-install-header-button",children:A.jsx(M1,{})})}),i&&!e&&A.jsx(SE,{title:"iPhoneでホーム画面に追加する手順を表示",children:A.jsx(Xr,{color:"secondary",onClick:_,sx:{backgroundColor:"secondary.main",color:"white","&:hover":{backgroundColor:"secondary.dark"}},"data-testid":"pwa-manual-install-button",children:A.jsx(M1,{})})})]}),A.jsx(ot,{sx:{display:"flex",justifyContent:"center",mb:3},children:A.jsx(qt,{variant:"contained","data-testid":"book-add-button",onClick:()=>n("/add"),sx:{fontSize:{xs:"0.9rem",sm:"1rem"},py:{xs:1,sm:1.5},px:{xs:2,sm:3}},children:"本を追加"})}),A.jsx(oe,{label:"検索（タイトル・著者・タグ）",value:f,onChange:g,fullWidth:!0,size:"small",sx:{mb:{xs:1.5,sm:2},"& .MuiOutlinedInput-root":{fontSize:{xs:"0.9rem",sm:"1rem"}}}}),A.jsx(ot,{sx:{borderBottom:1,borderColor:"divider",mb:{xs:1.5,sm:2},position:"sticky",top:0,zIndex:1100,backgroundColor:"background.paper"},"data-testid":"book-list-tabs-container",style:{position:"sticky",top:0,zIndex:1100},children:A.jsxs(pC,{value:c,onChange:d,centered:!0,sx:{"& .MuiTab-root":{fontSize:{xs:"0.8rem",sm:"0.9rem"},minHeight:{xs:"40px",sm:"48px"}}},children:[A.jsx(_h,{label:"すべて",value:"all"}),A.jsx(_h,{label:"読書中",value:"reading"}),A.jsx(_h,{label:"読了",value:"finished"})]})}),a.length===0?A.jsx(ot,{sx:{textAlign:"center",py:{xs:3,sm:4},px:{xs:2,sm:0}},children:A.jsx(st,{variant:"body1",color:"text.secondary",sx:{fontSize:{xs:"0.9rem",sm:"1rem"}},children:"該当する本がありません"})}):A.jsx(ot,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",sm:"repeat(2, 1fr)",md:"repeat(3, 1fr)",lg:"repeat(4, 1fr)"},gap:{xs:1.5,sm:2},dataTestid:"book-list-grid"},"data-testid":"book-list-grid",children:a.map(w=>A.jsx(ot,{"data-testid":`book-grid-item-${w.id}`,children:A.jsx(Wk,{book:w,onClick:()=>m(w.id),testId:`book-list-card-${w.id}`})},w.id))})]})]})}const cs=(n,t)=>{const[e,r]=H.useState([]),[i,a]=H.useState(!1),s=H.useCallback(async()=>{if(t!=null&&t.uid)try{a(!0);const f=n==="book"?"bookTagHistory":"memoTagHistory",d=sn(br(he,"users",t.uid,f),Fh("updatedAt","desc")),g=await mn(d),m=[];g.forEach(v=>{const _=v.data();_.tag&&m.push(_.tag)}),r(m)}catch(f){throw console.error("タグ履歴の取得に失敗しました:",f),f}finally{a(!1)}},[t==null?void 0:t.uid,n]),l=H.useCallback(async f=>{if(!(!(t!=null&&t.uid)||!f))try{const d=n==="book"?"bookTagHistory":"memoTagHistory",g=us(he,"users",t.uid,d,f);await uS(g,{tag:f,updatedAt:ga()})}catch(d){throw console.error("タグ履歴の保存に失敗しました:",d),d}},[t==null?void 0:t.uid,n]),c=H.useCallback(async f=>{if(!(!(t!=null&&t.uid)||!f||f.length===0))try{const d=f.map(g=>{const m=n==="book"?"bookTagHistory":"memoTagHistory",v=us(he,"users",t.uid,m,g);return uS(v,{tag:g,updatedAt:ga()})});await Promise.all(d)}catch(d){throw console.error("タグ履歴の一括保存に失敗しました:",d),d}},[t==null?void 0:t.uid,n]);return{tagOptions:e,loading:i,fetchTagHistory:s,saveTagToHistory:l,saveTagsToHistory:c}},t7=()=>{const{user:n}=Pn(),t=H.useContext(Tr),e=(t==null?void 0:t.setGlobalError)||(()=>{}),[r,i]=H.useState(!1),[a,s]=H.useState(null),{saveTagsToHistory:l}=cs("book",n),c=H.useCallback(async d=>{if(!n)throw new Error("ユーザーが認証されていません。");if(!d.title)throw new Error("タイトルは必須です。");try{i(!0),s(null);let g=(d.tags||[]).filter(v=>v&&v.trim()!=="");d.inputTagValue&&!g.includes(d.inputTagValue.trim())&&(g=[...g,d.inputTagValue.trim()]),g=g.filter(v=>v&&v.trim()!=="");const m=await J3(br(he,"books"),{userId:n.uid,isbn:d.isbn||"",title:d.title,author:d.author||"",publisher:d.publisher||"",publishedDate:d.publishedDate||"",coverImageUrl:d.coverImageUrl||"",tags:g,status:"reading",createdAt:ga(),updatedAt:ga()});return g.length>0&&await l(g),m.id}catch(g){console.error("Error adding book:",g);const m="書籍の追加に失敗しました: "+g.message;throw e(m),s(m),g}finally{i(!1)}},[n,e,l]),f=H.useCallback(()=>{s(null)},[]);return{addBook:c,loading:r,error:a,clearError:f}},e7=()=>{const{user:n}=Pn(),t=H.useContext(Tr),e=(t==null?void 0:t.setGlobalError)||(()=>{}),[r,i]=H.useState(!1),[a,s]=H.useState(""),[l,c]=H.useState(!1),f=H.useCallback(async m=>{if(!m||!m.trim())return s("ISBNを入力してください"),null;s(""),i(!0),c(!0);try{const v=m.trim(),w=(await IE.get(`https://api.openbd.jp/v1/get?isbn=${v}`)).data[0];let b="",S="",C="",I="",M="",N=[];if(w&&w.summary&&(b=w.summary.title||"",S=w.summary.author||"",C=w.summary.publisher||"",I=w.summary.pubdate||"",M=w.summary.cover||"",w.summary.subject&&N.push(w.summary.subject),w.summary.ndc&&N.push(w.summary.ndc)),!M||!b)try{const O=(await IE.get(`https://www.googleapis.com/books/v1/volumes?q=isbn:${v}`)).data;if(O.items&&O.items.length>0){const R=O.items[0].volumeInfo;b||(b=R.title||""),S||(S=R.authors?R.authors.join(", "):""),C||(C=R.publisher||""),I||(I=R.publishedDate||""),!M&&R.imageLinks&&(M=R.imageLinks.thumbnail||R.imageLinks.smallThumbnail||""),R.categories&&R.categories.length>0&&(N=[...N,...R.categories])}}catch(k){console.error("Failed to fetch from Google Books API",k)}return b?{isbn:v,title:b,author:S,publisher:C,publishedDate:I,coverImageUrl:M,tags:Array.from(new Set(N))}:(e("書籍情報が見つかりませんでした"),null)}catch{const _="書籍情報の取得に失敗しました";return e(_),s(_),null}finally{i(!1)}},[e]),d=H.useCallback(()=>{s(null)},[]),g=H.useCallback(()=>{c(!1),s(null)},[]);return{searchBookByIsbn:f,loading:r,error:a,searchPerformed:l,clearError:d,clearSearch:g}};function n7({isbn:n="",onBookAdded:t}){const[e,r]=H.useState(n),[i,a]=H.useState(""),[s,l]=H.useState(""),[c,f]=H.useState(""),[d,g]=H.useState(""),[m,v]=H.useState(""),[_,w]=H.useState([]),[b,S]=H.useState(""),{user:C}=Pn(),{tagOptions:I,fetchTagHistory:M}=cs("book",C),{addBook:N,loading:k,error:O}=t7(),{searchBookByIsbn:R,loading:D,error:L}=e7();H.useEffect(()=>{M()},[M]),H.useEffect(()=>{n&&n!==e&&(console.log("[BookForm] useEffect: propsのisbnが変化:",n),r(n),n.trim()!==""&&(console.log("[BookForm] useEffect: 自動で書籍情報取得を実行",n),F(n)))},[n,e]);const F=async B=>{const rt=B!==void 0?B:e;if(!rt||!rt.trim())return;const vt=await R(rt);vt&&(a(vt.title),l(vt.author),f(vt.publisher),g(vt.publishedDate),v(vt.coverImageUrl),w(vt.tags))},U=async B=>{if(B.preventDefault(),!i)return;const vt=await N({isbn:e,title:i,author:s,publisher:c,publishedDate:d,coverImageUrl:m,tags:_,inputTagValue:b});vt&&t(vt)};return A.jsxs(ot,{component:"form",onSubmit:U,sx:{mt:{xs:1,sm:2}},role:"form","data-testid":"book-form",children:[A.jsxs(ot,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",sm:"1fr 1fr"},gap:{xs:1,sm:1.5}},children:[A.jsx(ot,{children:A.jsx(oe,{label:"ISBN",value:e,onChange:B=>r(B.target.value),fullWidth:!0,size:"small",placeholder:"例: 9784873119485",inputProps:{"data-testid":"book-isbn-input"},sx:{"& .MuiOutlinedInput-root":{fontSize:{xs:"0.9rem",sm:"1rem"}}}})}),A.jsx(ot,{children:A.jsx(qt,{onClick:()=>F(),variant:"outlined",disabled:D,sx:{mt:{xs:1,sm:0},height:{xs:"40px",sm:"56px"},fontSize:{xs:"0.8rem",sm:"0.9rem"}},fullWidth:!0,"data-testid":"book-fetch-button",children:D?"取得中...":"ISBNで書籍情報取得"})})]}),m&&A.jsx(ot,{sx:{textAlign:"center",my:{xs:1.5,sm:2},px:{xs:1,sm:0}},children:A.jsx("img",{src:m,alt:"表紙",style:{maxHeight:"120px",maxWidth:"100%",width:"auto",borderRadius:"4px"},"data-testid":"book-cover-image"})}),A.jsxs(ot,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",sm:"1fr 1fr"},gap:{xs:1,sm:1.5},mt:{xs:.5,sm:1}},children:[A.jsx(ot,{children:A.jsx(oe,{label:"タイトル",value:i,onChange:B=>a(B.target.value),fullWidth:!0,required:!0,size:"small",inputProps:{"data-testid":"book-title-input"},sx:{"& .MuiOutlinedInput-root":{fontSize:{xs:"0.9rem",sm:"1rem"}}}})}),A.jsx(ot,{children:A.jsx(oe,{label:"著者",value:s,onChange:B=>l(B.target.value),fullWidth:!0,size:"small",inputProps:{"data-testid":"book-author-input"},sx:{"& .MuiOutlinedInput-root":{fontSize:{xs:"0.9rem",sm:"1rem"}}}})}),A.jsx(ot,{children:A.jsx(oe,{label:"出版社",value:c,onChange:B=>f(B.target.value),fullWidth:!0,size:"small",inputProps:{"data-testid":"book-publisher-input"},sx:{"& .MuiOutlinedInput-root":{fontSize:{xs:"0.9rem",sm:"1rem"}}}})}),A.jsx(ot,{children:A.jsx(oe,{label:"出版日",value:d,onChange:B=>g(B.target.value),fullWidth:!0,size:"small",inputProps:{"data-testid":"book-publishdate-input"},sx:{"& .MuiOutlinedInput-root":{fontSize:{xs:"0.9rem",sm:"1rem"}}}})})]}),A.jsx(ot,{sx:{mt:{xs:1.5,sm:2}},children:A.jsx(is,{multiple:!0,freeSolo:!0,options:I,value:_,getOptionLabel:B=>typeof B=="string"?B:B.inputValue||B.tag||"",onChange:(B,rt)=>{const vt=(rt||[]).map(q=>{if(typeof q=="string")return q;if(q&&typeof q=="object"){if("inputValue"in q&&q.inputValue)return q.inputValue;if("tag"in q&&q.tag)return q.tag}return""}).filter(Boolean);w(vt)},inputValue:b,onInputChange:(B,rt)=>S(rt),renderInput:B=>A.jsx(oe,{...B,label:"タグ",fullWidth:!0,size:"small",placeholder:"例: 小説,名作,技術書",inputProps:{...B.inputProps,"data-testid":"book-tags-input",style:{fontSize:"0.9rem"}},sx:{"& .MuiOutlinedInput-root":{fontSize:{xs:"0.9rem",sm:"1rem"}}}}),sx:{"& .MuiChip-root":{fontSize:{xs:"0.75rem",sm:"0.8rem"},height:{xs:"24px",sm:"28px"}}}})}),(L||O)&&A.jsx(st,{color:"error",sx:{mt:{xs:1.5,sm:2},fontSize:{xs:"0.8rem",sm:"0.9rem"}},"data-testid":"book-form-error",children:L||O}),A.jsx(qt,{type:"submit",variant:"contained",disabled:k,sx:{mt:{xs:2,sm:3},mb:{xs:"72px",sm:2},width:{xs:"100%",sm:"auto"},fontSize:{xs:"0.9rem",sm:"1rem"},py:{xs:1.5,sm:2}},"data-testid":"book-add-submit",children:k?"追加中...":"本を追加"})]})}function r7(n,t){var e=Object.setPrototypeOf;e?e(n,t):n.__proto__=t}function i7(n,t){t===void 0&&(t=n.constructor);var e=Error.captureStackTrace;e&&e(n,t)}var a7=function(){var n=function(e,r){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(i[s]=a[s])},n(e,r)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),s7=function(n){a7(t,n);function t(e,r){var i=this.constructor,a=n.call(this,e,r)||this;return Object.defineProperty(a,"name",{value:i.name,enumerable:!1,configurable:!0}),r7(a,i.prototype),i7(a),a}return t}(Error),o7=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Br=function(n){o7(t,n);function t(e){e===void 0&&(e=void 0);var r=n.call(this,e)||this;return r.message=e,r}return t.prototype.getKind=function(){var e=this.constructor;return e.kind},t.kind="Exception",t}(s7),l7=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Ni=function(n){l7(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.kind="ArgumentException",t}(Br),u7=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),kt=function(n){u7(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.kind="IllegalArgumentException",t}(Br),c7=function(){function n(t){if(this.binarizer=t,t===null)throw new kt("Binarizer must be non-null.")}return n.prototype.getWidth=function(){return this.binarizer.getWidth()},n.prototype.getHeight=function(){return this.binarizer.getHeight()},n.prototype.getBlackRow=function(t,e){return this.binarizer.getBlackRow(t,e)},n.prototype.getBlackMatrix=function(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix},n.prototype.isCropSupported=function(){return this.binarizer.getLuminanceSource().isCropSupported()},n.prototype.crop=function(t,e,r,i){var a=this.binarizer.getLuminanceSource().crop(t,e,r,i);return new n(this.binarizer.createBinarizer(a))},n.prototype.isRotateSupported=function(){return this.binarizer.getLuminanceSource().isRotateSupported()},n.prototype.rotateCounterClockwise=function(){var t=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new n(this.binarizer.createBinarizer(t))},n.prototype.rotateCounterClockwise45=function(){var t=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new n(this.binarizer.createBinarizer(t))},n.prototype.toString=function(){try{return this.getBlackMatrix().toString()}catch{return""}},n}(),f7=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Gn=function(n){f7(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.getChecksumInstance=function(){return new t},t.kind="ChecksumException",t}(Br),h7=function(){function n(t){this.source=t}return n.prototype.getLuminanceSource=function(){return this.source},n.prototype.getWidth=function(){return this.source.getWidth()},n.prototype.getHeight=function(){return this.source.getHeight()},n}(),Fe=function(){function n(){}return n.arraycopy=function(t,e,r,i,a){for(;a--;)r[i++]=t[e++]},n.currentTimeMillis=function(){return Date.now()},n}(),d7=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),y2=function(n){d7(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.kind="IndexOutOfBoundsException",t}(Br),g7=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),cS=function(n){g7(t,n);function t(e,r){e===void 0&&(e=void 0),r===void 0&&(r=void 0);var i=n.call(this,r)||this;return i.index=e,i.message=r,i}return t.kind="ArrayIndexOutOfBoundsException",t}(y2),p7=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Rn=function(){function n(){}return n.fill=function(t,e){for(var r=0,i=t.length;r<i;r++)t[r]=e},n.fillWithin=function(t,e,r,i){n.rangeCheck(t.length,e,r);for(var a=e;a<r;a++)t[a]=i},n.rangeCheck=function(t,e,r){if(e>r)throw new kt("fromIndex("+e+") > toIndex("+r+")");if(e<0)throw new cS(e);if(r>t)throw new cS(r)},n.asList=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t},n.create=function(t,e,r){var i=Array.from({length:t});return i.map(function(a){return Array.from({length:e}).fill(r)})},n.createInt32Array=function(t,e,r){var i=Array.from({length:t});return i.map(function(a){return Int32Array.from({length:e}).fill(r)})},n.equals=function(t,e){if(!t||!e||!t.length||!e.length||t.length!==e.length)return!1;for(var r=0,i=t.length;r<i;r++)if(t[r]!==e[r])return!1;return!0},n.hashCode=function(t){var e,r;if(t===null)return 0;var i=1;try{for(var a=p7(t),s=a.next();!s.done;s=a.next()){var l=s.value;i=31*i+l}}catch(c){e={error:c}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(e)throw e.error}}return i},n.fillUint8Array=function(t,e){for(var r=0;r!==t.length;r++)t[r]=e},n.copyOf=function(t,e){return t.slice(0,e)},n.copyOfUint8Array=function(t,e){if(t.length<=e){var r=new Uint8Array(e);return r.set(t),r}return t.slice(0,e)},n.copyOfRange=function(t,e,r){var i=r-e,a=new Int32Array(i);return Fe.arraycopy(t,e,a,0,i),a},n.binarySearch=function(t,e,r){r===void 0&&(r=n.numberComparator);for(var i=0,a=t.length-1;i<=a;){var s=a+i>>1,l=r(e,t[s]);if(l>0)i=s+1;else if(l<0)a=s-1;else return s}return-i-1},n.numberComparator=function(t,e){return t-e},n}(),Zt=function(){function n(){}return n.numberOfTrailingZeros=function(t){var e;if(t===0)return 32;var r=31;return e=t<<16,e!==0&&(r-=16,t=e),e=t<<8,e!==0&&(r-=8,t=e),e=t<<4,e!==0&&(r-=4,t=e),e=t<<2,e!==0&&(r-=2,t=e),r-(t<<1>>>31)},n.numberOfLeadingZeros=function(t){if(t===0)return 32;var e=1;return t>>>16||(e+=16,t<<=16),t>>>24||(e+=8,t<<=8),t>>>28||(e+=4,t<<=4),t>>>30||(e+=2,t<<=2),e-=t>>>31,e},n.toHexString=function(t){return t.toString(16)},n.toBinaryString=function(t){return String(parseInt(String(t),2))},n.bitCount=function(t){return t=t-(t>>>1&1431655765),t=(t&858993459)+(t>>>2&858993459),t=t+(t>>>4)&252645135,t=t+(t>>>8),t=t+(t>>>16),t&63},n.truncDivision=function(t,e){return Math.trunc(t/e)},n.parseInt=function(t,e){return e===void 0&&(e=void 0),parseInt(t,e)},n.MIN_VALUE_32_BITS=-2147483648,n.MAX_VALUE=Number.MAX_SAFE_INTEGER,n}(),$n=function(){function n(t,e){t===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=t,e==null?this.bits=n.makeArray(t):this.bits=e)}return n.prototype.getSize=function(){return this.size},n.prototype.getSizeInBytes=function(){return Math.floor((this.size+7)/8)},n.prototype.ensureCapacity=function(t){if(t>this.bits.length*32){var e=n.makeArray(t);Fe.arraycopy(this.bits,0,e,0,this.bits.length),this.bits=e}},n.prototype.get=function(t){return(this.bits[Math.floor(t/32)]&1<<(t&31))!==0},n.prototype.set=function(t){this.bits[Math.floor(t/32)]|=1<<(t&31)},n.prototype.flip=function(t){this.bits[Math.floor(t/32)]^=1<<(t&31)},n.prototype.getNextSet=function(t){var e=this.size;if(t>=e)return e;var r=this.bits,i=Math.floor(t/32),a=r[i];a&=~((1<<(t&31))-1);for(var s=r.length;a===0;){if(++i===s)return e;a=r[i]}var l=i*32+Zt.numberOfTrailingZeros(a);return l>e?e:l},n.prototype.getNextUnset=function(t){var e=this.size;if(t>=e)return e;var r=this.bits,i=Math.floor(t/32),a=~r[i];a&=~((1<<(t&31))-1);for(var s=r.length;a===0;){if(++i===s)return e;a=~r[i]}var l=i*32+Zt.numberOfTrailingZeros(a);return l>e?e:l},n.prototype.setBulk=function(t,e){this.bits[Math.floor(t/32)]=e},n.prototype.setRange=function(t,e){if(e<t||t<0||e>this.size)throw new kt;if(e!==t){e--;for(var r=Math.floor(t/32),i=Math.floor(e/32),a=this.bits,s=r;s<=i;s++){var l=s>r?0:t&31,c=s<i?31:e&31,f=(2<<c)-(1<<l);a[s]|=f}}},n.prototype.clear=function(){for(var t=this.bits.length,e=this.bits,r=0;r<t;r++)e[r]=0},n.prototype.isRange=function(t,e,r){if(e<t||t<0||e>this.size)throw new kt;if(e===t)return!0;e--;for(var i=Math.floor(t/32),a=Math.floor(e/32),s=this.bits,l=i;l<=a;l++){var c=l>i?0:t&31,f=l<a?31:e&31,d=(2<<f)-(1<<c)&4294967295;if((s[l]&d)!==(r?d:0))return!1}return!0},n.prototype.appendBit=function(t){this.ensureCapacity(this.size+1),t&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++},n.prototype.appendBits=function(t,e){if(e<0||e>32)throw new kt("Num bits must be between 0 and 32");this.ensureCapacity(this.size+e);for(var r=e;r>0;r--)this.appendBit((t>>r-1&1)===1)},n.prototype.appendBitArray=function(t){var e=t.size;this.ensureCapacity(this.size+e);for(var r=0;r<e;r++)this.appendBit(t.get(r))},n.prototype.xor=function(t){if(this.size!==t.size)throw new kt("Sizes don't match");for(var e=this.bits,r=0,i=e.length;r<i;r++)e[r]^=t.bits[r]},n.prototype.toBytes=function(t,e,r,i){for(var a=0;a<i;a++){for(var s=0,l=0;l<8;l++)this.get(t)&&(s|=1<<7-l),t++;e[r+a]=s}},n.prototype.getBitArray=function(){return this.bits},n.prototype.reverse=function(){for(var t=new Int32Array(this.bits.length),e=Math.floor((this.size-1)/32),r=e+1,i=this.bits,a=0;a<r;a++){var s=i[a];s=s>>1&1431655765|(s&1431655765)<<1,s=s>>2&858993459|(s&858993459)<<2,s=s>>4&252645135|(s&252645135)<<4,s=s>>8&16711935|(s&16711935)<<8,s=s>>16&65535|(s&65535)<<16,t[e-a]=s}if(this.size!==r*32){for(var l=r*32-this.size,c=t[0]>>>l,a=1;a<r;a++){var f=t[a];c|=f<<32-l,t[a-1]=c,c=f>>>l}t[r-1]=c}this.bits=t},n.makeArray=function(t){return new Int32Array(Math.floor((t+31)/32))},n.prototype.equals=function(t){if(!(t instanceof n))return!1;var e=t;return this.size===e.size&&Rn.equals(this.bits,e.bits)},n.prototype.hashCode=function(){return 31*this.size+Rn.hashCode(this.bits)},n.prototype.toString=function(){for(var t="",e=0,r=this.size;e<r;e++)(e&7)===0&&(t+=" "),t+=this.get(e)?"X":".";return t},n.prototype.clone=function(){return new n(this.size,this.bits.slice())},n.prototype.toArray=function(){for(var t=[],e=0,r=this.size;e<r;e++)t.push(this.get(e));return t},n}(),jy;(function(n){n[n.OTHER=0]="OTHER",n[n.PURE_BARCODE=1]="PURE_BARCODE",n[n.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",n[n.TRY_HARDER=3]="TRY_HARDER",n[n.CHARACTER_SET=4]="CHARACTER_SET",n[n.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",n[n.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",n[n.ENABLE_CODE_39_EXTENDED_MODE=7]="ENABLE_CODE_39_EXTENDED_MODE",n[n.ASSUME_GS1=8]="ASSUME_GS1",n[n.RETURN_CODABAR_START_END=9]="RETURN_CODABAR_START_END",n[n.NEED_RESULT_POINT_CALLBACK=10]="NEED_RESULT_POINT_CALLBACK",n[n.ALLOWED_EAN_EXTENSIONS=11]="ALLOWED_EAN_EXTENSIONS"})(jy||(jy={}));const Xe=jy;var m7=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),xt=function(n){m7(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.getFormatInstance=function(){return new t},t.kind="FormatException",t}(Br),v7=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Te;(function(n){n[n.Cp437=0]="Cp437",n[n.ISO8859_1=1]="ISO8859_1",n[n.ISO8859_2=2]="ISO8859_2",n[n.ISO8859_3=3]="ISO8859_3",n[n.ISO8859_4=4]="ISO8859_4",n[n.ISO8859_5=5]="ISO8859_5",n[n.ISO8859_6=6]="ISO8859_6",n[n.ISO8859_7=7]="ISO8859_7",n[n.ISO8859_8=8]="ISO8859_8",n[n.ISO8859_9=9]="ISO8859_9",n[n.ISO8859_10=10]="ISO8859_10",n[n.ISO8859_11=11]="ISO8859_11",n[n.ISO8859_13=12]="ISO8859_13",n[n.ISO8859_14=13]="ISO8859_14",n[n.ISO8859_15=14]="ISO8859_15",n[n.ISO8859_16=15]="ISO8859_16",n[n.SJIS=16]="SJIS",n[n.Cp1250=17]="Cp1250",n[n.Cp1251=18]="Cp1251",n[n.Cp1252=19]="Cp1252",n[n.Cp1256=20]="Cp1256",n[n.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",n[n.UTF8=22]="UTF8",n[n.ASCII=23]="ASCII",n[n.Big5=24]="Big5",n[n.GB18030=25]="GB18030",n[n.EUC_KR=26]="EUC_KR"})(Te||(Te={}));var In=function(){function n(t,e,r){for(var i,a,s=[],l=3;l<arguments.length;l++)s[l-3]=arguments[l];this.valueIdentifier=t,this.name=r,typeof e=="number"?this.values=Int32Array.from([e]):this.values=e,this.otherEncodingNames=s,n.VALUE_IDENTIFIER_TO_ECI.set(t,this),n.NAME_TO_ECI.set(r,this);for(var c=this.values,f=0,d=c.length;f!==d;f++){var g=c[f];n.VALUES_TO_ECI.set(g,this)}try{for(var m=v7(s),v=m.next();!v.done;v=m.next()){var _=v.value;n.NAME_TO_ECI.set(_,this)}}catch(w){i={error:w}}finally{try{v&&!v.done&&(a=m.return)&&a.call(m)}finally{if(i)throw i.error}}}return n.prototype.getValueIdentifier=function(){return this.valueIdentifier},n.prototype.getName=function(){return this.name},n.prototype.getValue=function(){return this.values[0]},n.getCharacterSetECIByValue=function(t){if(t<0||t>=900)throw new xt("incorect value");var e=n.VALUES_TO_ECI.get(t);if(e===void 0)throw new xt("incorect value");return e},n.getCharacterSetECIByName=function(t){var e=n.NAME_TO_ECI.get(t);if(e===void 0)throw new xt("incorect value");return e},n.prototype.equals=function(t){if(!(t instanceof n))return!1;var e=t;return this.getName()===e.getName()},n.VALUE_IDENTIFIER_TO_ECI=new Map,n.VALUES_TO_ECI=new Map,n.NAME_TO_ECI=new Map,n.Cp437=new n(Te.Cp437,Int32Array.from([0,2]),"Cp437"),n.ISO8859_1=new n(Te.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),n.ISO8859_2=new n(Te.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),n.ISO8859_3=new n(Te.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),n.ISO8859_4=new n(Te.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),n.ISO8859_5=new n(Te.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),n.ISO8859_6=new n(Te.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),n.ISO8859_7=new n(Te.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),n.ISO8859_8=new n(Te.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),n.ISO8859_9=new n(Te.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),n.ISO8859_10=new n(Te.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),n.ISO8859_11=new n(Te.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),n.ISO8859_13=new n(Te.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),n.ISO8859_14=new n(Te.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),n.ISO8859_15=new n(Te.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),n.ISO8859_16=new n(Te.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),n.SJIS=new n(Te.SJIS,20,"SJIS","Shift_JIS"),n.Cp1250=new n(Te.Cp1250,21,"Cp1250","windows-1250"),n.Cp1251=new n(Te.Cp1251,22,"Cp1251","windows-1251"),n.Cp1252=new n(Te.Cp1252,23,"Cp1252","windows-1252"),n.Cp1256=new n(Te.Cp1256,24,"Cp1256","windows-1256"),n.UnicodeBigUnmarked=new n(Te.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),n.UTF8=new n(Te.UTF8,26,"UTF8","UTF-8"),n.ASCII=new n(Te.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),n.Big5=new n(Te.Big5,28,"Big5"),n.GB18030=new n(Te.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),n.EUC_KR=new n(Te.EUC_KR,30,"EUC_KR","EUC-KR"),n}(),y7=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),C1=function(n){y7(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.kind="UnsupportedOperationException",t}(Br),wi=function(){function n(){}return n.decode=function(t,e){var r=this.encodingName(e);return this.customDecoder?this.customDecoder(t,r):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(r)?this.decodeFallback(t,r):new TextDecoder(r).decode(t)},n.shouldDecodeOnFallback=function(t){return!n.isBrowser()&&t==="ISO-8859-1"},n.encode=function(t,e){var r=this.encodingName(e);return this.customEncoder?this.customEncoder(t,r):typeof TextEncoder>"u"?this.encodeFallback(t):new TextEncoder().encode(t)},n.isBrowser=function(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"},n.encodingName=function(t){return typeof t=="string"?t:t.getName()},n.encodingCharacterSet=function(t){return t instanceof In?t:In.getCharacterSetECIByName(t)},n.decodeFallback=function(t,e){var r=this.encodingCharacterSet(e);if(n.isDecodeFallbackSupported(r)){for(var i="",a=0,s=t.length;a<s;a++){var l=t[a].toString(16);l.length<2&&(l="0"+l),i+="%"+l}return decodeURIComponent(i)}if(r.equals(In.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(t.buffer));throw new C1("Encoding "+this.encodingName(e)+" not supported by fallback.")},n.isDecodeFallbackSupported=function(t){return t.equals(In.UTF8)||t.equals(In.ISO8859_1)||t.equals(In.ASCII)},n.encodeFallback=function(t){for(var e=btoa(unescape(encodeURIComponent(t))),r=e.split(""),i=[],a=0;a<r.length;a++)i.push(r[a].charCodeAt(0));return new Uint8Array(i)},n}(),se=function(){function n(){}return n.castAsNonUtf8Char=function(t,e){e===void 0&&(e=null);var r=e?e.getName():this.ISO88591;return wi.decode(new Uint8Array([t]),r)},n.guessEncoding=function(t,e){if(e!=null&&e.get(Xe.CHARACTER_SET)!==void 0)return e.get(Xe.CHARACTER_SET).toString();for(var r=t.length,i=!0,a=!0,s=!0,l=0,c=0,f=0,d=0,g=0,m=0,v=0,_=0,w=0,b=0,S=0,C=t.length>3&&t[0]===239&&t[1]===187&&t[2]===191,I=0;I<r&&(i||a||s);I++){var M=t[I]&255;s&&(l>0?(M&128)===0?s=!1:l--:(M&128)!==0&&((M&64)===0?s=!1:(l++,(M&32)===0?c++:(l++,(M&16)===0?f++:(l++,(M&8)===0?d++:s=!1))))),i&&(M>127&&M<160?i=!1:M>159&&(M<192||M===215||M===247)&&S++),a&&(g>0?M<64||M===127||M>252?a=!1:g--:M===128||M===160||M>239?a=!1:M>160&&M<224?(m++,_=0,v++,v>w&&(w=v)):M>127?(g++,v=0,_++,_>b&&(b=_)):(v=0,_=0))}return s&&l>0&&(s=!1),a&&g>0&&(a=!1),s&&(C||c+f+d>0)?n.UTF8:a&&(n.ASSUME_SHIFT_JIS||w>=3||b>=3)?n.SHIFT_JIS:i&&a?w===2&&m===2||S*10>=r?n.SHIFT_JIS:n.ISO88591:i?n.ISO88591:a?n.SHIFT_JIS:s?n.UTF8:n.PLATFORM_DEFAULT_ENCODING},n.format=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];var i=-1;function a(l,c,f,d,g,m){if(l==="%%")return"%";if(e[++i]!==void 0){l=d?parseInt(d.substr(1)):void 0;var v=g?parseInt(g.substr(1)):void 0,_;switch(m){case"s":_=e[i];break;case"c":_=e[i][0];break;case"f":_=parseFloat(e[i]).toFixed(l);break;case"p":_=parseFloat(e[i]).toPrecision(l);break;case"e":_=parseFloat(e[i]).toExponential(l);break;case"x":_=parseInt(e[i]).toString(v||16);break;case"d":_=parseFloat(parseInt(e[i],v||10).toPrecision(l)).toFixed(0);break}_=typeof _=="object"?JSON.stringify(_):(+_).toString(v);for(var w=parseInt(f),b=f&&f[0]+""=="0"?"0":" ";_.length<w;)_=c!==void 0?_+b:b+_;return _}}var s=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return t.replace(s,a)},n.getBytes=function(t,e){return wi.encode(t,e)},n.getCharCode=function(t,e){return e===void 0&&(e=0),t.charCodeAt(e)},n.getCharAt=function(t){return String.fromCharCode(t)},n.SHIFT_JIS=In.SJIS.getName(),n.GB2312="GB2312",n.ISO88591=In.ISO8859_1.getName(),n.EUC_JP="EUC_JP",n.UTF8=In.UTF8.getName(),n.PLATFORM_DEFAULT_ENCODING=n.UTF8,n.ASSUME_SHIFT_JIS=!1,n}(),Xt=function(){function n(t){t===void 0&&(t=""),this.value=t}return n.prototype.enableDecoding=function(t){return this.encoding=t,this},n.prototype.append=function(t){return typeof t=="string"?this.value+=t.toString():this.encoding?this.value+=se.castAsNonUtf8Char(t,this.encoding):this.value+=String.fromCharCode(t),this},n.prototype.appendChars=function(t,e,r){for(var i=e;e<e+r;i++)this.append(t[i]);return this},n.prototype.length=function(){return this.value.length},n.prototype.charAt=function(t){return this.value.charAt(t)},n.prototype.deleteCharAt=function(t){this.value=this.value.substr(0,t)+this.value.substring(t+1)},n.prototype.setCharAt=function(t,e){this.value=this.value.substr(0,t)+e+this.value.substr(t+1)},n.prototype.substring=function(t,e){return this.value.substring(t,e)},n.prototype.setLengthToZero=function(){this.value=""},n.prototype.toString=function(){return this.value},n.prototype.insert=function(t,e){this.value=this.value.substring(0,t)+e+this.value.substring(t)},n}(),Aa=function(){function n(t,e,r,i){if(this.width=t,this.height=e,this.rowSize=r,this.bits=i,e==null&&(e=t),this.height=e,t<1||e<1)throw new kt("Both dimensions must be greater than 0");r==null&&(r=Math.floor((t+31)/32)),this.rowSize=r,i==null&&(this.bits=new Int32Array(this.rowSize*this.height))}return n.parseFromBooleanArray=function(t){for(var e=t.length,r=t[0].length,i=new n(r,e),a=0;a<e;a++)for(var s=t[a],l=0;l<r;l++)s[l]&&i.set(l,a);return i},n.parseFromString=function(t,e,r){if(t===null)throw new kt("stringRepresentation cannot be null");for(var i=new Array(t.length),a=0,s=0,l=-1,c=0,f=0;f<t.length;)if(t.charAt(f)===`
`||t.charAt(f)==="\r"){if(a>s){if(l===-1)l=a-s;else if(a-s!==l)throw new kt("row lengths do not match");s=a,c++}f++}else if(t.substring(f,f+e.length)===e)f+=e.length,i[a]=!0,a++;else if(t.substring(f,f+r.length)===r)f+=r.length,i[a]=!1,a++;else throw new kt("illegal character encountered: "+t.substring(f));if(a>s){if(l===-1)l=a-s;else if(a-s!==l)throw new kt("row lengths do not match");c++}for(var d=new n(l,c),g=0;g<a;g++)i[g]&&d.set(Math.floor(g%l),Math.floor(g/l));return d},n.prototype.get=function(t,e){var r=e*this.rowSize+Math.floor(t/32);return(this.bits[r]>>>(t&31)&1)!==0},n.prototype.set=function(t,e){var r=e*this.rowSize+Math.floor(t/32);this.bits[r]|=1<<(t&31)&4294967295},n.prototype.unset=function(t,e){var r=e*this.rowSize+Math.floor(t/32);this.bits[r]&=~(1<<(t&31)&4294967295)},n.prototype.flip=function(t,e){var r=e*this.rowSize+Math.floor(t/32);this.bits[r]^=1<<(t&31)&4294967295},n.prototype.xor=function(t){if(this.width!==t.getWidth()||this.height!==t.getHeight()||this.rowSize!==t.getRowSize())throw new kt("input matrix dimensions do not match");for(var e=new $n(Math.floor(this.width/32)+1),r=this.rowSize,i=this.bits,a=0,s=this.height;a<s;a++)for(var l=a*r,c=t.getRow(a,e).getBitArray(),f=0;f<r;f++)i[l+f]^=c[f]},n.prototype.clear=function(){for(var t=this.bits,e=t.length,r=0;r<e;r++)t[r]=0},n.prototype.setRegion=function(t,e,r,i){if(e<0||t<0)throw new kt("Left and top must be nonnegative");if(i<1||r<1)throw new kt("Height and width must be at least 1");var a=t+r,s=e+i;if(s>this.height||a>this.width)throw new kt("The region must fit inside the matrix");for(var l=this.rowSize,c=this.bits,f=e;f<s;f++)for(var d=f*l,g=t;g<a;g++)c[d+Math.floor(g/32)]|=1<<(g&31)&4294967295},n.prototype.getRow=function(t,e){e==null||e.getSize()<this.width?e=new $n(this.width):e.clear();for(var r=this.rowSize,i=this.bits,a=t*r,s=0;s<r;s++)e.setBulk(s*32,i[a+s]);return e},n.prototype.setRow=function(t,e){Fe.arraycopy(e.getBitArray(),0,this.bits,t*this.rowSize,this.rowSize)},n.prototype.rotate180=function(){for(var t=this.getWidth(),e=this.getHeight(),r=new $n(t),i=new $n(t),a=0,s=Math.floor((e+1)/2);a<s;a++)r=this.getRow(a,r),i=this.getRow(e-1-a,i),r.reverse(),i.reverse(),this.setRow(a,i),this.setRow(e-1-a,r)},n.prototype.getEnclosingRectangle=function(){for(var t=this.width,e=this.height,r=this.rowSize,i=this.bits,a=t,s=e,l=-1,c=-1,f=0;f<e;f++)for(var d=0;d<r;d++){var g=i[f*r+d];if(g!==0){if(f<s&&(s=f),f>c&&(c=f),d*32<a){for(var m=0;(g<<31-m&4294967295)===0;)m++;d*32+m<a&&(a=d*32+m)}if(d*32+31>l){for(var m=31;!(g>>>m);)m--;d*32+m>l&&(l=d*32+m)}}}return l<a||c<s?null:Int32Array.from([a,s,l-a+1,c-s+1])},n.prototype.getTopLeftOnBit=function(){for(var t=this.rowSize,e=this.bits,r=0;r<e.length&&e[r]===0;)r++;if(r===e.length)return null;for(var i=r/t,a=r%t*32,s=e[r],l=0;(s<<31-l&4294967295)===0;)l++;return a+=l,Int32Array.from([a,i])},n.prototype.getBottomRightOnBit=function(){for(var t=this.rowSize,e=this.bits,r=e.length-1;r>=0&&e[r]===0;)r--;if(r<0)return null;for(var i=Math.floor(r/t),a=Math.floor(r%t)*32,s=e[r],l=31;!(s>>>l);)l--;return a+=l,Int32Array.from([a,i])},n.prototype.getWidth=function(){return this.width},n.prototype.getHeight=function(){return this.height},n.prototype.getRowSize=function(){return this.rowSize},n.prototype.equals=function(t){if(!(t instanceof n))return!1;var e=t;return this.width===e.width&&this.height===e.height&&this.rowSize===e.rowSize&&Rn.equals(this.bits,e.bits)},n.prototype.hashCode=function(){var t=this.width;return t=31*t+this.width,t=31*t+this.height,t=31*t+this.rowSize,t=31*t+Rn.hashCode(this.bits),t},n.prototype.toString=function(t,e,r){return t===void 0&&(t="X "),e===void 0&&(e="  "),r===void 0&&(r=`
`),this.buildToString(t,e,r)},n.prototype.buildToString=function(t,e,r){for(var i=new Xt,a=0,s=this.height;a<s;a++){for(var l=0,c=this.width;l<c;l++)i.append(this.get(l,a)?t:e);i.append(r)}return i.toString()},n.prototype.clone=function(){return new n(this.width,this.height,this.rowSize,this.bits.slice())},n}(),x7=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),lt=function(n){x7(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.getNotFoundInstance=function(){return new t},t.kind="NotFoundException",t}(Br),_7=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),A7=function(n){_7(t,n);function t(e){var r=n.call(this,e)||this;return r.luminances=t.EMPTY,r.buckets=new Int32Array(t.LUMINANCE_BUCKETS),r}return t.prototype.getBlackRow=function(e,r){var i=this.getLuminanceSource(),a=i.getWidth();r==null||r.getSize()<a?r=new $n(a):r.clear(),this.initArrays(a);for(var s=i.getRow(e,this.luminances),l=this.buckets,c=0;c<a;c++)l[(s[c]&255)>>t.LUMINANCE_SHIFT]++;var f=t.estimateBlackPoint(l);if(a<3)for(var c=0;c<a;c++)(s[c]&255)<f&&r.set(c);else for(var d=s[0]&255,g=s[1]&255,c=1;c<a-1;c++){var m=s[c+1]&255;(g*4-d-m)/2<f&&r.set(c),d=g,g=m}return r},t.prototype.getBlackMatrix=function(){var e=this.getLuminanceSource(),r=e.getWidth(),i=e.getHeight(),a=new Aa(r,i);this.initArrays(r);for(var s=this.buckets,l=1;l<5;l++)for(var c=Math.floor(i*l/5),f=e.getRow(c,this.luminances),d=Math.floor(r*4/5),g=Math.floor(r/5);g<d;g++){var m=f[g]&255;s[m>>t.LUMINANCE_SHIFT]++}for(var v=t.estimateBlackPoint(s),_=e.getMatrix(),l=0;l<i;l++)for(var w=l*r,g=0;g<r;g++){var m=_[w+g]&255;m<v&&a.set(g,l)}return a},t.prototype.createBinarizer=function(e){return new t(e)},t.prototype.initArrays=function(e){this.luminances.length<e&&(this.luminances=new Uint8ClampedArray(e));for(var r=this.buckets,i=0;i<t.LUMINANCE_BUCKETS;i++)r[i]=0},t.estimateBlackPoint=function(e){for(var r=e.length,i=0,a=0,s=0,l=0;l<r;l++)e[l]>s&&(a=l,s=e[l]),e[l]>i&&(i=e[l]);for(var c=0,f=0,l=0;l<r;l++){var d=l-a,g=e[l]*d*d;g>f&&(c=l,f=g)}if(a>c){var m=a;a=c,c=m}if(c-a<=r/16)throw new lt;for(var v=c-1,_=-1,l=c-1;l>a;l--){var w=l-a,g=w*w*(c-l)*(i-e[l]);g>_&&(v=l,_=g)}return v<<t.LUMINANCE_SHIFT},t.LUMINANCE_BITS=5,t.LUMINANCE_SHIFT=8-t.LUMINANCE_BITS,t.LUMINANCE_BUCKETS=1<<t.LUMINANCE_BITS,t.EMPTY=Uint8ClampedArray.from([0]),t}(h7),w7=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),E7=function(n){w7(t,n);function t(e){var r=n.call(this,e)||this;return r.matrix=null,r}return t.prototype.getBlackMatrix=function(){if(this.matrix!==null)return this.matrix;var e=this.getLuminanceSource(),r=e.getWidth(),i=e.getHeight();if(r>=t.MINIMUM_DIMENSION&&i>=t.MINIMUM_DIMENSION){var a=e.getMatrix(),s=r>>t.BLOCK_SIZE_POWER;(r&t.BLOCK_SIZE_MASK)!==0&&s++;var l=i>>t.BLOCK_SIZE_POWER;(i&t.BLOCK_SIZE_MASK)!==0&&l++;var c=t.calculateBlackPoints(a,s,l,r,i),f=new Aa(r,i);t.calculateThresholdForBlock(a,s,l,r,i,c,f),this.matrix=f}else this.matrix=n.prototype.getBlackMatrix.call(this);return this.matrix},t.prototype.createBinarizer=function(e){return new t(e)},t.calculateThresholdForBlock=function(e,r,i,a,s,l,c){for(var f=s-t.BLOCK_SIZE,d=a-t.BLOCK_SIZE,g=0;g<i;g++){var m=g<<t.BLOCK_SIZE_POWER;m>f&&(m=f);for(var v=t.cap(g,2,i-3),_=0;_<r;_++){var w=_<<t.BLOCK_SIZE_POWER;w>d&&(w=d);for(var b=t.cap(_,2,r-3),S=0,C=-2;C<=2;C++){var I=l[v+C];S+=I[b-2]+I[b-1]+I[b]+I[b+1]+I[b+2]}var M=S/25;t.thresholdBlock(e,w,m,M,a,c)}}},t.cap=function(e,r,i){return e<r?r:e>i?i:e},t.thresholdBlock=function(e,r,i,a,s,l){for(var c=0,f=i*s+r;c<t.BLOCK_SIZE;c++,f+=s)for(var d=0;d<t.BLOCK_SIZE;d++)(e[f+d]&255)<=a&&l.set(r+d,i+c)},t.calculateBlackPoints=function(e,r,i,a,s){for(var l=s-t.BLOCK_SIZE,c=a-t.BLOCK_SIZE,f=new Array(i),d=0;d<i;d++){f[d]=new Int32Array(r);var g=d<<t.BLOCK_SIZE_POWER;g>l&&(g=l);for(var m=0;m<r;m++){var v=m<<t.BLOCK_SIZE_POWER;v>c&&(v=c);for(var _=0,w=255,b=0,S=0,C=g*a+v;S<t.BLOCK_SIZE;S++,C+=a){for(var I=0;I<t.BLOCK_SIZE;I++){var M=e[C+I]&255;_+=M,M<w&&(w=M),M>b&&(b=M)}if(b-w>t.MIN_DYNAMIC_RANGE)for(S++,C+=a;S<t.BLOCK_SIZE;S++,C+=a)for(var I=0;I<t.BLOCK_SIZE;I++)_+=e[C+I]&255}var N=_>>t.BLOCK_SIZE_POWER*2;if(b-w<=t.MIN_DYNAMIC_RANGE&&(N=w/2,d>0&&m>0)){var k=(f[d-1][m]+2*f[d][m-1]+f[d-1][m-1])/4;w<k&&(N=k)}f[d][m]=N}}return f},t.BLOCK_SIZE_POWER=3,t.BLOCK_SIZE=1<<t.BLOCK_SIZE_POWER,t.BLOCK_SIZE_MASK=t.BLOCK_SIZE-1,t.MINIMUM_DIMENSION=t.BLOCK_SIZE*5,t.MIN_DYNAMIC_RANGE=24,t}(A7),Xg=function(){function n(t,e){this.width=t,this.height=e}return n.prototype.getWidth=function(){return this.width},n.prototype.getHeight=function(){return this.height},n.prototype.isCropSupported=function(){return!1},n.prototype.crop=function(t,e,r,i){throw new C1("This luminance source does not support cropping.")},n.prototype.isRotateSupported=function(){return!1},n.prototype.rotateCounterClockwise=function(){throw new C1("This luminance source does not support rotation by 90 degrees.")},n.prototype.rotateCounterClockwise45=function(){throw new C1("This luminance source does not support rotation by 45 degrees.")},n.prototype.toString=function(){for(var t=new Uint8ClampedArray(this.width),e=new Xt,r=0;r<this.height;r++){for(var i=this.getRow(r,t),a=0;a<this.width;a++){var s=i[a]&255,l=void 0;s<64?l="#":s<128?l="+":s<192?l=".":l=" ",e.append(l)}e.append(`
`)}return e.toString()},n}(),b7=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),x2=function(n){b7(t,n);function t(e){var r=n.call(this,e.getWidth(),e.getHeight())||this;return r.delegate=e,r}return t.prototype.getRow=function(e,r){for(var i=this.delegate.getRow(e,r),a=this.getWidth(),s=0;s<a;s++)i[s]=255-(i[s]&255);return i},t.prototype.getMatrix=function(){for(var e=this.delegate.getMatrix(),r=this.getWidth()*this.getHeight(),i=new Uint8ClampedArray(r),a=0;a<r;a++)i[a]=255-(e[a]&255);return i},t.prototype.isCropSupported=function(){return this.delegate.isCropSupported()},t.prototype.crop=function(e,r,i,a){return new t(this.delegate.crop(e,r,i,a))},t.prototype.isRotateSupported=function(){return this.delegate.isRotateSupported()},t.prototype.invert=function(){return this.delegate},t.prototype.rotateCounterClockwise=function(){return new t(this.delegate.rotateCounterClockwise())},t.prototype.rotateCounterClockwise45=function(){return new t(this.delegate.rotateCounterClockwise45())},t}(Xg),S7=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),T7=function(n){S7(t,n);function t(e,r){r===void 0&&(r=!1);var i=n.call(this,e.width,e.height)||this;return i.canvas=e,i.tempCanvasElement=null,i.buffer=t.makeBufferFromCanvasImageData(e,r),i}return t.makeBufferFromCanvasImageData=function(e,r){r===void 0&&(r=!1);var i=e.getContext("2d").getImageData(0,0,e.width,e.height);return t.toGrayscaleBuffer(i.data,e.width,e.height,r)},t.toGrayscaleBuffer=function(e,r,i,a){a===void 0&&(a=!1);var s=new Uint8ClampedArray(r*i);if(t.FRAME_INDEX=!t.FRAME_INDEX,t.FRAME_INDEX||!a)for(var l=0,c=0,f=e.length;l<f;l+=4,c++){var d=void 0,g=e[l+3];if(g===0)d=255;else{var m=e[l],v=e[l+1],_=e[l+2];d=306*m+601*v+117*_+512>>10}s[c]=d}else for(var l=0,c=0,w=e.length;l<w;l+=4,c++){var d=void 0,g=e[l+3];if(g===0)d=255;else{var m=e[l],v=e[l+1],_=e[l+2];d=306*m+601*v+117*_+512>>10}s[c]=255-d}return s},t.prototype.getRow=function(e,r){if(e<0||e>=this.getHeight())throw new kt("Requested row is outside the image: "+e);var i=this.getWidth(),a=e*i;return r===null?r=this.buffer.slice(a,a+i):(r.length<i&&(r=new Uint8ClampedArray(i)),r.set(this.buffer.slice(a,a+i))),r},t.prototype.getMatrix=function(){return this.buffer},t.prototype.isCropSupported=function(){return!0},t.prototype.crop=function(e,r,i,a){return n.prototype.crop.call(this,e,r,i,a),this},t.prototype.isRotateSupported=function(){return!0},t.prototype.rotateCounterClockwise=function(){return this.rotate(-90),this},t.prototype.rotateCounterClockwise45=function(){return this.rotate(-45),this},t.prototype.getTempCanvasElement=function(){if(this.tempCanvasElement===null){var e=this.canvas.ownerDocument.createElement("canvas");e.width=this.canvas.width,e.height=this.canvas.height,this.tempCanvasElement=e}return this.tempCanvasElement},t.prototype.rotate=function(e){var r=this.getTempCanvasElement(),i=r.getContext("2d"),a=e*t.DEGREE_TO_RADIANS,s=this.canvas.width,l=this.canvas.height,c=Math.ceil(Math.abs(Math.cos(a))*s+Math.abs(Math.sin(a))*l),f=Math.ceil(Math.abs(Math.sin(a))*s+Math.abs(Math.cos(a))*l);return r.width=c,r.height=f,i.translate(c/2,f/2),i.rotate(a),i.drawImage(this.canvas,s/-2,l/-2),this.buffer=t.makeBufferFromCanvasImageData(r),this},t.prototype.invert=function(){return new x2(this)},t.DEGREE_TO_RADIANS=Math.PI/180,t.FRAME_INDEX=!0,t}(Xg),C7=function(){function n(t,e,r){this.deviceId=t,this.label=e,this.kind="videoinput",this.groupId=r||void 0}return n.prototype.toJSON=function(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}},n}(),_r=function(n,t,e,r){function i(a){return a instanceof e?a:new e(function(s){s(a)})}return new(e||(e=Promise))(function(a,s){function l(d){try{f(r.next(d))}catch(g){s(g)}}function c(d){try{f(r.throw(d))}catch(g){s(g)}}function f(d){d.done?a(d.value):i(d.value).then(l,c)}f((r=r.apply(n,t||[])).next())})},Ar=function(n,t){var e={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,i,a,s;return s={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function l(f){return function(d){return c([f,d])}}function c(f){if(r)throw new TypeError("Generator is already executing.");for(;e;)try{if(r=1,i&&(a=f[0]&2?i.return:f[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,f[1])).done)return a;switch(i=0,a&&(f=[f[0]&2,a.value]),f[0]){case 0:case 1:a=f;break;case 4:return e.label++,{value:f[1],done:!1};case 5:e.label++,i=f[1],f=[0];continue;case 7:f=e.ops.pop(),e.trys.pop();continue;default:if(a=e.trys,!(a=a.length>0&&a[a.length-1])&&(f[0]===6||f[0]===2)){e=0;continue}if(f[0]===3&&(!a||f[1]>a[0]&&f[1]<a[3])){e.label=f[1];break}if(f[0]===6&&e.label<a[1]){e.label=a[1],a=f;break}if(a&&e.label<a[2]){e.label=a[2],e.ops.push(f);break}a[2]&&e.ops.pop(),e.trys.pop();continue}f=t.call(n,e)}catch(d){f=[6,d],i=0}finally{r=a=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}},I7=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Lc=function(){function n(t,e,r){e===void 0&&(e=500),this.reader=t,this.timeBetweenScansMillis=e,this._hints=r,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}return Object.defineProperty(n.prototype,"hasNavigator",{get:function(){return typeof navigator<"u"},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isMediaDevicesSuported",{get:function(){return this.hasNavigator&&!!navigator.mediaDevices},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"canEnumerateDevices",{get:function(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"timeBetweenDecodingAttempts",{get:function(){return this._timeBetweenDecodingAttempts},set:function(t){this._timeBetweenDecodingAttempts=t<0?0:t},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"hints",{get:function(){return this._hints},set:function(t){this._hints=t||null},enumerable:!1,configurable:!0}),n.prototype.listVideoInputDevices=function(){return _r(this,void 0,void 0,function(){var t,e,r,i,a,s,l,c,f,d,g,m;return Ar(this,function(v){switch(v.label){case 0:if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");return[4,navigator.mediaDevices.enumerateDevices()];case 1:t=v.sent(),e=[];try{for(r=I7(t),i=r.next();!i.done;i=r.next())a=i.value,s=a.kind==="video"?"videoinput":a.kind,s==="videoinput"&&(l=a.deviceId||a.id,c=a.label||"Video device "+(e.length+1),f=a.groupId,d={deviceId:l,label:c,kind:s,groupId:f},e.push(d))}catch(_){g={error:_}}finally{try{i&&!i.done&&(m=r.return)&&m.call(r)}finally{if(g)throw g.error}}return[2,e]}})})},n.prototype.getVideoInputDevices=function(){return _r(this,void 0,void 0,function(){var t;return Ar(this,function(e){switch(e.label){case 0:return[4,this.listVideoInputDevices()];case 1:return t=e.sent(),[2,t.map(function(r){return new C7(r.deviceId,r.label)})]}})})},n.prototype.findDeviceById=function(t){return _r(this,void 0,void 0,function(){var e;return Ar(this,function(r){switch(r.label){case 0:return[4,this.listVideoInputDevices()];case 1:return e=r.sent(),e?[2,e.find(function(i){return i.deviceId===t})]:[2,null]}})})},n.prototype.decodeFromInputVideoDevice=function(t,e){return _r(this,void 0,void 0,function(){return Ar(this,function(r){switch(r.label){case 0:return[4,this.decodeOnceFromVideoDevice(t,e)];case 1:return[2,r.sent()]}})})},n.prototype.decodeOnceFromVideoDevice=function(t,e){return _r(this,void 0,void 0,function(){var r,i;return Ar(this,function(a){switch(a.label){case 0:return this.reset(),t?r={deviceId:{exact:t}}:r={facingMode:"environment"},i={video:r},[4,this.decodeOnceFromConstraints(i,e)];case 1:return[2,a.sent()]}})})},n.prototype.decodeOnceFromConstraints=function(t,e){return _r(this,void 0,void 0,function(){var r;return Ar(this,function(i){switch(i.label){case 0:return[4,navigator.mediaDevices.getUserMedia(t)];case 1:return r=i.sent(),[4,this.decodeOnceFromStream(r,e)];case 2:return[2,i.sent()]}})})},n.prototype.decodeOnceFromStream=function(t,e){return _r(this,void 0,void 0,function(){var r,i;return Ar(this,function(a){switch(a.label){case 0:return this.reset(),[4,this.attachStreamToVideo(t,e)];case 1:return r=a.sent(),[4,this.decodeOnce(r)];case 2:return i=a.sent(),[2,i]}})})},n.prototype.decodeFromInputVideoDeviceContinuously=function(t,e,r){return _r(this,void 0,void 0,function(){return Ar(this,function(i){switch(i.label){case 0:return[4,this.decodeFromVideoDevice(t,e,r)];case 1:return[2,i.sent()]}})})},n.prototype.decodeFromVideoDevice=function(t,e,r){return _r(this,void 0,void 0,function(){var i,a;return Ar(this,function(s){switch(s.label){case 0:return t?i={deviceId:{exact:t}}:i={facingMode:"environment"},a={video:i},[4,this.decodeFromConstraints(a,e,r)];case 1:return[2,s.sent()]}})})},n.prototype.decodeFromConstraints=function(t,e,r){return _r(this,void 0,void 0,function(){var i;return Ar(this,function(a){switch(a.label){case 0:return[4,navigator.mediaDevices.getUserMedia(t)];case 1:return i=a.sent(),[4,this.decodeFromStream(i,e,r)];case 2:return[2,a.sent()]}})})},n.prototype.decodeFromStream=function(t,e,r){return _r(this,void 0,void 0,function(){var i;return Ar(this,function(a){switch(a.label){case 0:return this.reset(),[4,this.attachStreamToVideo(t,e)];case 1:return i=a.sent(),[4,this.decodeContinuously(i,r)];case 2:return[2,a.sent()]}})})},n.prototype.stopAsyncDecode=function(){this._stopAsyncDecode=!0},n.prototype.stopContinuousDecode=function(){this._stopContinuousDecode=!0},n.prototype.attachStreamToVideo=function(t,e){return _r(this,void 0,void 0,function(){var r;return Ar(this,function(i){switch(i.label){case 0:return r=this.prepareVideoElement(e),this.addVideoSource(r,t),this.videoElement=r,this.stream=t,[4,this.playVideoOnLoadAsync(r)];case 1:return i.sent(),[2,r]}})})},n.prototype.playVideoOnLoadAsync=function(t){var e=this;return new Promise(function(r,i){return e.playVideoOnLoad(t,function(){return r()})})},n.prototype.playVideoOnLoad=function(t,e){var r=this;this.videoEndedListener=function(){return r.stopStreams()},this.videoCanPlayListener=function(){return r.tryPlayVideo(t)},t.addEventListener("ended",this.videoEndedListener),t.addEventListener("canplay",this.videoCanPlayListener),t.addEventListener("playing",e),this.tryPlayVideo(t)},n.prototype.isVideoPlaying=function(t){return t.currentTime>0&&!t.paused&&!t.ended&&t.readyState>2},n.prototype.tryPlayVideo=function(t){return _r(this,void 0,void 0,function(){return Ar(this,function(e){switch(e.label){case 0:if(this.isVideoPlaying(t))return console.warn("Trying to play video that is already playing."),[2];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,t.play()];case 2:return e.sent(),[3,4];case 3:return e.sent(),console.warn("It was not possible to play the video."),[3,4];case 4:return[2]}})})},n.prototype.getMediaElement=function(t,e){var r=document.getElementById(t);if(!r)throw new Ni("element with id '"+t+"' not found");if(r.nodeName.toLowerCase()!==e.toLowerCase())throw new Ni("element with id '"+t+"' must be an "+e+" element");return r},n.prototype.decodeFromImage=function(t,e){if(!t&&!e)throw new Ni("either imageElement with a src set or an url must be provided");return e&&!t?this.decodeFromImageUrl(e):this.decodeFromImageElement(t)},n.prototype.decodeFromVideo=function(t,e){if(!t&&!e)throw new Ni("Either an element with a src set or an URL must be provided");return e&&!t?this.decodeFromVideoUrl(e):this.decodeFromVideoElement(t)},n.prototype.decodeFromVideoContinuously=function(t,e,r){if(t===void 0&&e===void 0)throw new Ni("Either an element with a src set or an URL must be provided");return e&&!t?this.decodeFromVideoUrlContinuously(e,r):this.decodeFromVideoElementContinuously(t,r)},n.prototype.decodeFromImageElement=function(t){if(!t)throw new Ni("An image element must be provided.");this.reset();var e=this.prepareImageElement(t);this.imageElement=e;var r;return this.isImageLoaded(e)?r=this.decodeOnce(e,!1,!0):r=this._decodeOnLoadImage(e),r},n.prototype.decodeFromVideoElement=function(t){var e=this._decodeFromVideoElementSetup(t);return this._decodeOnLoadVideo(e)},n.prototype.decodeFromVideoElementContinuously=function(t,e){var r=this._decodeFromVideoElementSetup(t);return this._decodeOnLoadVideoContinuously(r,e)},n.prototype._decodeFromVideoElementSetup=function(t){if(!t)throw new Ni("A video element must be provided.");this.reset();var e=this.prepareVideoElement(t);return this.videoElement=e,e},n.prototype.decodeFromImageUrl=function(t){if(!t)throw new Ni("An URL must be provided.");this.reset();var e=this.prepareImageElement();this.imageElement=e;var r=this._decodeOnLoadImage(e);return e.src=t,r},n.prototype.decodeFromVideoUrl=function(t){if(!t)throw new Ni("An URL must be provided.");this.reset();var e=this.prepareVideoElement(),r=this.decodeFromVideoElement(e);return e.src=t,r},n.prototype.decodeFromVideoUrlContinuously=function(t,e){if(!t)throw new Ni("An URL must be provided.");this.reset();var r=this.prepareVideoElement(),i=this.decodeFromVideoElementContinuously(r,e);return r.src=t,i},n.prototype._decodeOnLoadImage=function(t){var e=this;return new Promise(function(r,i){e.imageLoadedListener=function(){return e.decodeOnce(t,!1,!0).then(r,i)},t.addEventListener("load",e.imageLoadedListener)})},n.prototype._decodeOnLoadVideo=function(t){return _r(this,void 0,void 0,function(){return Ar(this,function(e){switch(e.label){case 0:return[4,this.playVideoOnLoadAsync(t)];case 1:return e.sent(),[4,this.decodeOnce(t)];case 2:return[2,e.sent()]}})})},n.prototype._decodeOnLoadVideoContinuously=function(t,e){return _r(this,void 0,void 0,function(){return Ar(this,function(r){switch(r.label){case 0:return[4,this.playVideoOnLoadAsync(t)];case 1:return r.sent(),this.decodeContinuously(t,e),[2]}})})},n.prototype.isImageLoaded=function(t){return!(!t.complete||t.naturalWidth===0)},n.prototype.prepareImageElement=function(t){var e;return typeof t>"u"&&(e=document.createElement("img"),e.width=200,e.height=200),typeof t=="string"&&(e=this.getMediaElement(t,"img")),t instanceof HTMLImageElement&&(e=t),e},n.prototype.prepareVideoElement=function(t){var e;return!t&&typeof document<"u"&&(e=document.createElement("video"),e.width=200,e.height=200),typeof t=="string"&&(e=this.getMediaElement(t,"video")),t instanceof HTMLVideoElement&&(e=t),e.setAttribute("autoplay","true"),e.setAttribute("muted","true"),e.setAttribute("playsinline","true"),e},n.prototype.decodeOnce=function(t,e,r){var i=this;e===void 0&&(e=!0),r===void 0&&(r=!0),this._stopAsyncDecode=!1;var a=function(s,l){if(i._stopAsyncDecode){l(new lt("Video stream has ended before any code could be detected.")),i._stopAsyncDecode=void 0;return}try{var c=i.decode(t);s(c)}catch(m){var f=e&&m instanceof lt,d=m instanceof Gn||m instanceof xt,g=d&&r;if(f||g)return setTimeout(a,i._timeBetweenDecodingAttempts,s,l);l(m)}};return new Promise(function(s,l){return a(s,l)})},n.prototype.decodeContinuously=function(t,e){var r=this;this._stopContinuousDecode=!1;var i=function(){if(r._stopContinuousDecode){r._stopContinuousDecode=void 0;return}try{var a=r.decode(t);e(a,null),setTimeout(i,r.timeBetweenScansMillis)}catch(c){e(null,c);var s=c instanceof Gn||c instanceof xt,l=c instanceof lt;(s||l)&&setTimeout(i,r._timeBetweenDecodingAttempts)}};i()},n.prototype.decode=function(t){var e=this.createBinaryBitmap(t);return this.decodeBitmap(e)},n.prototype.createBinaryBitmap=function(t){this.getCaptureCanvasContext(t);var e=!1;t instanceof HTMLVideoElement?(this.drawFrameOnCanvas(t),e=!0):this.drawImageOnCanvas(t);var r=this.getCaptureCanvas(t),i=new T7(r,e),a=new E7(i);return new c7(a)},n.prototype.getCaptureCanvasContext=function(t){if(!this.captureCanvasContext){var e=this.getCaptureCanvas(t),r=void 0;try{r=e.getContext("2d",{willReadFrequently:!0})}catch{r=e.getContext("2d")}this.captureCanvasContext=r}return this.captureCanvasContext},n.prototype.getCaptureCanvas=function(t){if(!this.captureCanvas){var e=this.createCaptureCanvas(t);this.captureCanvas=e}return this.captureCanvas},n.prototype.drawFrameOnCanvas=function(t,e,r){e===void 0&&(e={sx:0,sy:0,sWidth:t.videoWidth,sHeight:t.videoHeight,dx:0,dy:0,dWidth:t.videoWidth,dHeight:t.videoHeight}),r===void 0&&(r=this.captureCanvasContext),r.drawImage(t,e.sx,e.sy,e.sWidth,e.sHeight,e.dx,e.dy,e.dWidth,e.dHeight)},n.prototype.drawImageOnCanvas=function(t,e,r){e===void 0&&(e={sx:0,sy:0,sWidth:t.naturalWidth,sHeight:t.naturalHeight,dx:0,dy:0,dWidth:t.naturalWidth,dHeight:t.naturalHeight}),r===void 0&&(r=this.captureCanvasContext),r.drawImage(t,e.sx,e.sy,e.sWidth,e.sHeight,e.dx,e.dy,e.dWidth,e.dHeight)},n.prototype.decodeBitmap=function(t){return this.reader.decode(t,this._hints)},n.prototype.createCaptureCanvas=function(t){if(typeof document>"u")return this._destroyCaptureCanvas(),null;var e=document.createElement("canvas"),r,i;return typeof t<"u"&&(t instanceof HTMLVideoElement?(r=t.videoWidth,i=t.videoHeight):t instanceof HTMLImageElement&&(r=t.naturalWidth||t.width,i=t.naturalHeight||t.height)),e.style.width=r+"px",e.style.height=i+"px",e.width=r,e.height=i,e},n.prototype.stopStreams=function(){this.stream&&(this.stream.getVideoTracks().forEach(function(t){return t.stop()}),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()},n.prototype.reset=function(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()},n.prototype._destroyVideoElement=function(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)},n.prototype._destroyImageElement=function(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)},n.prototype._destroyCaptureCanvas=function(){this.captureCanvasContext=void 0,this.captureCanvas=void 0},n.prototype.addVideoSource=function(t,e){try{t.srcObject=e}catch{t.src=URL.createObjectURL(e)}},n.prototype.cleanVideoSource=function(t){try{t.srcObject=null}catch{t.src=""}this.videoElement.removeAttribute("src")},n}(),pr=function(){function n(t,e,r,i,a,s){r===void 0&&(r=e==null?0:8*e.length),s===void 0&&(s=Fe.currentTimeMillis()),this.text=t,this.rawBytes=e,this.numBits=r,this.resultPoints=i,this.format=a,this.timestamp=s,this.text=t,this.rawBytes=e,r==null?this.numBits=e==null?0:8*e.length:this.numBits=r,this.resultPoints=i,this.format=a,this.resultMetadata=null,s==null?this.timestamp=Fe.currentTimeMillis():this.timestamp=s}return n.prototype.getText=function(){return this.text},n.prototype.getRawBytes=function(){return this.rawBytes},n.prototype.getNumBits=function(){return this.numBits},n.prototype.getResultPoints=function(){return this.resultPoints},n.prototype.getBarcodeFormat=function(){return this.format},n.prototype.getResultMetadata=function(){return this.resultMetadata},n.prototype.putMetadata=function(t,e){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(t,e)},n.prototype.putAllMetadata=function(t){t!==null&&(this.resultMetadata===null?this.resultMetadata=t:this.resultMetadata=new Map(t))},n.prototype.addResultPoints=function(t){var e=this.resultPoints;if(e===null)this.resultPoints=t;else if(t!==null&&t.length>0){var r=new Array(e.length+t.length);Fe.arraycopy(e,0,r,0,e.length),Fe.arraycopy(t,0,r,e.length,t.length),this.resultPoints=r}},n.prototype.getTimestamp=function(){return this.timestamp},n.prototype.toString=function(){return this.text},n}(),zy;(function(n){n[n.AZTEC=0]="AZTEC",n[n.CODABAR=1]="CODABAR",n[n.CODE_39=2]="CODE_39",n[n.CODE_93=3]="CODE_93",n[n.CODE_128=4]="CODE_128",n[n.DATA_MATRIX=5]="DATA_MATRIX",n[n.EAN_8=6]="EAN_8",n[n.EAN_13=7]="EAN_13",n[n.ITF=8]="ITF",n[n.MAXICODE=9]="MAXICODE",n[n.PDF_417=10]="PDF_417",n[n.QR_CODE=11]="QR_CODE",n[n.RSS_14=12]="RSS_14",n[n.RSS_EXPANDED=13]="RSS_EXPANDED",n[n.UPC_A=14]="UPC_A",n[n.UPC_E=15]="UPC_E",n[n.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(zy||(zy={}));const Pt=zy;var Hy;(function(n){n[n.OTHER=0]="OTHER",n[n.ORIENTATION=1]="ORIENTATION",n[n.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",n[n.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",n[n.ISSUE_NUMBER=4]="ISSUE_NUMBER",n[n.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",n[n.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",n[n.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",n[n.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",n[n.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",n[n.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(Hy||(Hy={}));const nr=Hy;var Yg=function(){function n(t,e,r,i,a,s){a===void 0&&(a=-1),s===void 0&&(s=-1),this.rawBytes=t,this.text=e,this.byteSegments=r,this.ecLevel=i,this.structuredAppendSequenceNumber=a,this.structuredAppendParity=s,this.numBits=t==null?0:8*t.length}return n.prototype.getRawBytes=function(){return this.rawBytes},n.prototype.getNumBits=function(){return this.numBits},n.prototype.setNumBits=function(t){this.numBits=t},n.prototype.getText=function(){return this.text},n.prototype.getByteSegments=function(){return this.byteSegments},n.prototype.getECLevel=function(){return this.ecLevel},n.prototype.getErrorsCorrected=function(){return this.errorsCorrected},n.prototype.setErrorsCorrected=function(t){this.errorsCorrected=t},n.prototype.getErasures=function(){return this.erasures},n.prototype.setErasures=function(t){this.erasures=t},n.prototype.getOther=function(){return this.other},n.prototype.setOther=function(t){this.other=t},n.prototype.hasStructuredAppend=function(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0},n.prototype.getStructuredAppendParity=function(){return this.structuredAppendParity},n.prototype.getStructuredAppendSequenceNumber=function(){return this.structuredAppendSequenceNumber},n}(),gh=function(){function n(){}return n.prototype.exp=function(t){return this.expTable[t]},n.prototype.log=function(t){if(t===0)throw new kt;return this.logTable[t]},n.addOrSubtract=function(t,e){return t^e},n}(),yo=function(){function n(t,e){if(e.length===0)throw new kt;this.field=t;var r=e.length;if(r>1&&e[0]===0){for(var i=1;i<r&&e[i]===0;)i++;i===r?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(r-i),Fe.arraycopy(e,i,this.coefficients,0,this.coefficients.length))}else this.coefficients=e}return n.prototype.getCoefficients=function(){return this.coefficients},n.prototype.getDegree=function(){return this.coefficients.length-1},n.prototype.isZero=function(){return this.coefficients[0]===0},n.prototype.getCoefficient=function(t){return this.coefficients[this.coefficients.length-1-t]},n.prototype.evaluateAt=function(t){if(t===0)return this.getCoefficient(0);var e=this.coefficients,r;if(t===1){r=0;for(var i=0,a=e.length;i!==a;i++){var s=e[i];r=gh.addOrSubtract(r,s)}return r}r=e[0];for(var l=e.length,c=this.field,i=1;i<l;i++)r=gh.addOrSubtract(c.multiply(t,r),e[i]);return r},n.prototype.addOrSubtract=function(t){if(!this.field.equals(t.field))throw new kt("GenericGFPolys do not have same GenericGF field");if(this.isZero())return t;if(t.isZero())return this;var e=this.coefficients,r=t.coefficients;if(e.length>r.length){var i=e;e=r,r=i}var a=new Int32Array(r.length),s=r.length-e.length;Fe.arraycopy(r,0,a,0,s);for(var l=s;l<r.length;l++)a[l]=gh.addOrSubtract(e[l-s],r[l]);return new n(this.field,a)},n.prototype.multiply=function(t){if(!this.field.equals(t.field))throw new kt("GenericGFPolys do not have same GenericGF field");if(this.isZero()||t.isZero())return this.field.getZero();for(var e=this.coefficients,r=e.length,i=t.coefficients,a=i.length,s=new Int32Array(r+a-1),l=this.field,c=0;c<r;c++)for(var f=e[c],d=0;d<a;d++)s[c+d]=gh.addOrSubtract(s[c+d],l.multiply(f,i[d]));return new n(l,s)},n.prototype.multiplyScalar=function(t){if(t===0)return this.field.getZero();if(t===1)return this;for(var e=this.coefficients.length,r=this.field,i=new Int32Array(e),a=this.coefficients,s=0;s<e;s++)i[s]=r.multiply(a[s],t);return new n(r,i)},n.prototype.multiplyByMonomial=function(t,e){if(t<0)throw new kt;if(e===0)return this.field.getZero();for(var r=this.coefficients,i=r.length,a=new Int32Array(i+t),s=this.field,l=0;l<i;l++)a[l]=s.multiply(r[l],e);return new n(s,a)},n.prototype.divide=function(t){if(!this.field.equals(t.field))throw new kt("GenericGFPolys do not have same GenericGF field");if(t.isZero())throw new kt("Divide by 0");for(var e=this.field,r=e.getZero(),i=this,a=t.getCoefficient(t.getDegree()),s=e.inverse(a);i.getDegree()>=t.getDegree()&&!i.isZero();){var l=i.getDegree()-t.getDegree(),c=e.multiply(i.getCoefficient(i.getDegree()),s),f=t.multiplyByMonomial(l,c),d=e.buildMonomial(l,c);r=r.addOrSubtract(d),i=i.addOrSubtract(f)}return[r,i]},n.prototype.toString=function(){for(var t="",e=this.getDegree();e>=0;e--){var r=this.getCoefficient(e);if(r!==0){if(r<0?(t+=" - ",r=-r):t.length>0&&(t+=" + "),e===0||r!==1){var i=this.field.log(r);i===0?t+="1":i===1?t+="a":(t+="a^",t+=i)}e!==0&&(e===1?t+="x":(t+="x^",t+=e))}}return t},n}(),R7=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),n4=function(n){R7(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.kind="ArithmeticException",t}(Br),D7=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Pr=function(n){D7(t,n);function t(e,r,i){var a=n.call(this)||this;a.primitive=e,a.size=r,a.generatorBase=i;for(var s=new Int32Array(r),l=1,c=0;c<r;c++)s[c]=l,l*=2,l>=r&&(l^=e,l&=r-1);a.expTable=s;for(var f=new Int32Array(r),c=0;c<r-1;c++)f[s[c]]=c;return a.logTable=f,a.zero=new yo(a,Int32Array.from([0])),a.one=new yo(a,Int32Array.from([1])),a}return t.prototype.getZero=function(){return this.zero},t.prototype.getOne=function(){return this.one},t.prototype.buildMonomial=function(e,r){if(e<0)throw new kt;if(r===0)return this.zero;var i=new Int32Array(e+1);return i[0]=r,new yo(this,i)},t.prototype.inverse=function(e){if(e===0)throw new n4;return this.expTable[this.size-this.logTable[e]-1]},t.prototype.multiply=function(e,r){return e===0||r===0?0:this.expTable[(this.logTable[e]+this.logTable[r])%(this.size-1)]},t.prototype.getSize=function(){return this.size},t.prototype.getGeneratorBase=function(){return this.generatorBase},t.prototype.toString=function(){return"GF(0x"+Zt.toHexString(this.primitive)+","+this.size+")"},t.prototype.equals=function(e){return e===this},t.AZTEC_DATA_12=new t(4201,4096,1),t.AZTEC_DATA_10=new t(1033,1024,1),t.AZTEC_DATA_6=new t(67,64,1),t.AZTEC_PARAM=new t(19,16,1),t.QR_CODE_FIELD_256=new t(285,256,0),t.DATA_MATRIX_FIELD_256=new t(301,256,1),t.AZTEC_DATA_8=t.DATA_MATRIX_FIELD_256,t.MAXICODE_FIELD_64=t.AZTEC_DATA_6,t}(gh),O7=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),J0=function(n){O7(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.kind="ReedSolomonException",t}(Br),M7=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),cd=function(n){M7(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.kind="IllegalStateException",t}(Br),Kg=function(){function n(t){this.field=t}return n.prototype.decode=function(t,e){for(var r=this.field,i=new yo(r,t),a=new Int32Array(e),s=!0,l=0;l<e;l++){var c=i.evaluateAt(r.exp(l+r.getGeneratorBase()));a[a.length-1-l]=c,c!==0&&(s=!1)}if(!s)for(var f=new yo(r,a),d=this.runEuclideanAlgorithm(r.buildMonomial(e,1),f,e),g=d[0],m=d[1],v=this.findErrorLocations(g),_=this.findErrorMagnitudes(m,v),l=0;l<v.length;l++){var w=t.length-1-r.log(v[l]);if(w<0)throw new J0("Bad error location");t[w]=Pr.addOrSubtract(t[w],_[l])}},n.prototype.runEuclideanAlgorithm=function(t,e,r){if(t.getDegree()<e.getDegree()){var i=t;t=e,e=i}for(var a=this.field,s=t,l=e,c=a.getZero(),f=a.getOne();l.getDegree()>=(r/2|0);){var d=s,g=c;if(s=l,c=f,s.isZero())throw new J0("r_{i-1} was zero");l=d;for(var m=a.getZero(),v=s.getCoefficient(s.getDegree()),_=a.inverse(v);l.getDegree()>=s.getDegree()&&!l.isZero();){var w=l.getDegree()-s.getDegree(),b=a.multiply(l.getCoefficient(l.getDegree()),_);m=m.addOrSubtract(a.buildMonomial(w,b)),l=l.addOrSubtract(s.multiplyByMonomial(w,b))}if(f=m.multiply(c).addOrSubtract(g),l.getDegree()>=s.getDegree())throw new cd("Division algorithm failed to reduce polynomial?")}var S=f.getCoefficient(0);if(S===0)throw new J0("sigmaTilde(0) was zero");var C=a.inverse(S),I=f.multiplyScalar(C),M=l.multiplyScalar(C);return[I,M]},n.prototype.findErrorLocations=function(t){var e=t.getDegree();if(e===1)return Int32Array.from([t.getCoefficient(1)]);for(var r=new Int32Array(e),i=0,a=this.field,s=1;s<a.getSize()&&i<e;s++)t.evaluateAt(s)===0&&(r[i]=a.inverse(s),i++);if(i!==e)throw new J0("Error locator degree does not match number of roots");return r},n.prototype.findErrorMagnitudes=function(t,e){for(var r=e.length,i=new Int32Array(r),a=this.field,s=0;s<r;s++){for(var l=a.inverse(e[s]),c=1,f=0;f<r;f++)if(s!==f){var d=a.multiply(e[f],l),g=(d&1)===0?d|1:d&-2;c=a.multiply(c,g)}i[s]=a.multiply(t.evaluateAt(l),a.inverse(c)),a.getGeneratorBase()!==0&&(i[s]=a.multiply(i[s],l))}return i},n}(),Qn;(function(n){n[n.UPPER=0]="UPPER",n[n.LOWER=1]="LOWER",n[n.MIXED=2]="MIXED",n[n.DIGIT=3]="DIGIT",n[n.PUNCT=4]="PUNCT",n[n.BINARY=5]="BINARY"})(Qn||(Qn={}));var fS=function(){function n(){}return n.prototype.decode=function(t){this.ddata=t;var e=t.getBits(),r=this.extractBits(e),i=this.correctBits(r),a=n.convertBoolArrayToByteArray(i),s=n.getEncodedData(i),l=new Yg(a,s,null,null);return l.setNumBits(i.length),l},n.highLevelDecode=function(t){return this.getEncodedData(t)},n.getEncodedData=function(t){for(var e=t.length,r=Qn.UPPER,i=Qn.UPPER,a="",s=0;s<e;)if(i===Qn.BINARY){if(e-s<5)break;var l=n.readCode(t,s,5);if(s+=5,l===0){if(e-s<11)break;l=n.readCode(t,s,11)+31,s+=11}for(var c=0;c<l;c++){if(e-s<8){s=e;break}var f=n.readCode(t,s,8);a+=se.castAsNonUtf8Char(f),s+=8}i=r}else{var d=i===Qn.DIGIT?4:5;if(e-s<d)break;var f=n.readCode(t,s,d);s+=d;var g=n.getCharacter(i,f);g.startsWith("CTRL_")?(r=i,i=n.getTable(g.charAt(5)),g.charAt(6)==="L"&&(r=i)):(a+=g,i=r)}return a},n.getTable=function(t){switch(t){case"L":return Qn.LOWER;case"P":return Qn.PUNCT;case"M":return Qn.MIXED;case"D":return Qn.DIGIT;case"B":return Qn.BINARY;case"U":default:return Qn.UPPER}},n.getCharacter=function(t,e){switch(t){case Qn.UPPER:return n.UPPER_TABLE[e];case Qn.LOWER:return n.LOWER_TABLE[e];case Qn.MIXED:return n.MIXED_TABLE[e];case Qn.PUNCT:return n.PUNCT_TABLE[e];case Qn.DIGIT:return n.DIGIT_TABLE[e];default:throw new cd("Bad table")}},n.prototype.correctBits=function(t){var e,r;this.ddata.getNbLayers()<=2?(r=6,e=Pr.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(r=8,e=Pr.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(r=10,e=Pr.AZTEC_DATA_10):(r=12,e=Pr.AZTEC_DATA_12);var i=this.ddata.getNbDatablocks(),a=t.length/r;if(a<i)throw new xt;for(var s=t.length%r,l=new Int32Array(a),c=0;c<a;c++,s+=r)l[c]=n.readCode(t,s,r);try{var f=new Kg(e);f.decode(l,a-i)}catch(b){throw new xt(b)}for(var d=(1<<r)-1,g=0,c=0;c<i;c++){var m=l[c];if(m===0||m===d)throw new xt;(m===1||m===d-1)&&g++}for(var v=new Array(i*r-g),_=0,c=0;c<i;c++){var m=l[c];if(m===1||m===d-1)v.fill(m>1,_,_+r-1),_+=r-1;else for(var w=r-1;w>=0;--w)v[_++]=(m&1<<w)!==0}return v},n.prototype.extractBits=function(t){var e=this.ddata.isCompact(),r=this.ddata.getNbLayers(),i=(e?11:14)+r*4,a=new Int32Array(i),s=new Array(this.totalBitsInLayer(r,e));if(e)for(var l=0;l<a.length;l++)a[l]=l;else for(var c=i+1+2*Zt.truncDivision(Zt.truncDivision(i,2)-1,15),f=i/2,d=Zt.truncDivision(c,2),l=0;l<f;l++){var g=l+Zt.truncDivision(l,15);a[f-l-1]=d-g-1,a[f+l]=d+g+1}for(var l=0,m=0;l<r;l++){for(var v=(r-l)*4+(e?9:12),_=l*2,w=i-1-_,b=0;b<v;b++)for(var S=b*2,C=0;C<2;C++)s[m+S+C]=t.get(a[_+C],a[_+b]),s[m+2*v+S+C]=t.get(a[_+b],a[w-C]),s[m+4*v+S+C]=t.get(a[w-C],a[w-b]),s[m+6*v+S+C]=t.get(a[w-b],a[_+C]);m+=v*8}return s},n.readCode=function(t,e,r){for(var i=0,a=e;a<e+r;a++)i<<=1,t[a]&&(i|=1);return i},n.readByte=function(t,e){var r=t.length-e;return r>=8?n.readCode(t,e,8):n.readCode(t,e,r)<<8-r},n.convertBoolArrayToByteArray=function(t){for(var e=new Uint8Array((t.length+7)/8),r=0;r<e.length;r++)e[r]=n.readByte(t,8*r);return e},n.prototype.totalBitsInLayer=function(t,e){return((e?88:112)+16*t)*t},n.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],n.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],n.MIXED_TABLE=["CTRL_PS"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~","","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],n.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],n.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"],n}(),fe=function(){function n(){}return n.round=function(t){return isNaN(t)?0:t<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:t>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:t+(t<0?-.5:.5)|0},n.distance=function(t,e,r,i){var a=t-r,s=e-i;return Math.sqrt(a*a+s*s)},n.sum=function(t){for(var e=0,r=0,i=t.length;r!==i;r++){var a=t[r];e+=a}return e},n}(),Gy=function(){function n(){}return n.floatToIntBits=function(t){return t},n.MAX_VALUE=Number.MAX_SAFE_INTEGER,n}(),Ct=function(){function n(t,e){this.x=t,this.y=e}return n.prototype.getX=function(){return this.x},n.prototype.getY=function(){return this.y},n.prototype.equals=function(t){if(t instanceof n){var e=t;return this.x===e.x&&this.y===e.y}return!1},n.prototype.hashCode=function(){return 31*Gy.floatToIntBits(this.x)+Gy.floatToIntBits(this.y)},n.prototype.toString=function(){return"("+this.x+","+this.y+")"},n.orderBestPatterns=function(t){var e=this.distance(t[0],t[1]),r=this.distance(t[1],t[2]),i=this.distance(t[0],t[2]),a,s,l;if(r>=e&&r>=i?(s=t[0],a=t[1],l=t[2]):i>=r&&i>=e?(s=t[1],a=t[0],l=t[2]):(s=t[2],a=t[0],l=t[1]),this.crossProductZ(a,s,l)<0){var c=a;a=l,l=c}t[0]=a,t[1]=s,t[2]=l},n.distance=function(t,e){return fe.distance(t.x,t.y,e.x,e.y)},n.crossProductZ=function(t,e,r){var i=e.x,a=e.y;return(r.x-i)*(t.y-a)-(r.y-a)*(t.x-i)},n}(),_2=function(){function n(t,e){this.bits=t,this.points=e}return n.prototype.getBits=function(){return this.bits},n.prototype.getPoints=function(){return this.points},n}(),N7=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),P7=function(n){N7(t,n);function t(e,r,i,a,s){var l=n.call(this,e,r)||this;return l.compact=i,l.nbDatablocks=a,l.nbLayers=s,l}return t.prototype.getNbLayers=function(){return this.nbLayers},t.prototype.getNbDatablocks=function(){return this.nbDatablocks},t.prototype.isCompact=function(){return this.compact},t}(_2),$y=function(){function n(t,e,r,i){this.image=t,this.height=t.getHeight(),this.width=t.getWidth(),e==null&&(e=n.INIT_SIZE),r==null&&(r=t.getWidth()/2|0),i==null&&(i=t.getHeight()/2|0);var a=e/2|0;if(this.leftInit=r-a,this.rightInit=r+a,this.upInit=i-a,this.downInit=i+a,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new lt}return n.prototype.detect=function(){for(var t=this.leftInit,e=this.rightInit,r=this.upInit,i=this.downInit,a=!1,s=!0,l=!1,c=!1,f=!1,d=!1,g=!1,m=this.width,v=this.height;s;){s=!1;for(var _=!0;(_||!c)&&e<m;)_=this.containsBlackPoint(r,i,e,!1),_?(e++,s=!0,c=!0):c||e++;if(e>=m){a=!0;break}for(var w=!0;(w||!f)&&i<v;)w=this.containsBlackPoint(t,e,i,!0),w?(i++,s=!0,f=!0):f||i++;if(i>=v){a=!0;break}for(var b=!0;(b||!d)&&t>=0;)b=this.containsBlackPoint(r,i,t,!1),b?(t--,s=!0,d=!0):d||t--;if(t<0){a=!0;break}for(var S=!0;(S||!g)&&r>=0;)S=this.containsBlackPoint(t,e,r,!0),S?(r--,s=!0,g=!0):g||r--;if(r<0){a=!0;break}s&&(l=!0)}if(!a&&l){for(var C=e-t,I=null,M=1;I===null&&M<C;M++)I=this.getBlackPointOnSegment(t,i-M,t+M,i);if(I==null)throw new lt;for(var N=null,M=1;N===null&&M<C;M++)N=this.getBlackPointOnSegment(t,r+M,t+M,r);if(N==null)throw new lt;for(var k=null,M=1;k===null&&M<C;M++)k=this.getBlackPointOnSegment(e,r+M,e-M,r);if(k==null)throw new lt;for(var O=null,M=1;O===null&&M<C;M++)O=this.getBlackPointOnSegment(e,i-M,e-M,i);if(O==null)throw new lt;return this.centerEdges(O,I,k,N)}else throw new lt},n.prototype.getBlackPointOnSegment=function(t,e,r,i){for(var a=fe.round(fe.distance(t,e,r,i)),s=(r-t)/a,l=(i-e)/a,c=this.image,f=0;f<a;f++){var d=fe.round(t+f*s),g=fe.round(e+f*l);if(c.get(d,g))return new Ct(d,g)}return null},n.prototype.centerEdges=function(t,e,r,i){var a=t.getX(),s=t.getY(),l=e.getX(),c=e.getY(),f=r.getX(),d=r.getY(),g=i.getX(),m=i.getY(),v=n.CORR;return a<this.width/2?[new Ct(g-v,m+v),new Ct(l+v,c+v),new Ct(f-v,d-v),new Ct(a+v,s-v)]:[new Ct(g+v,m+v),new Ct(l+v,c-v),new Ct(f-v,d+v),new Ct(a-v,s-v)]},n.prototype.containsBlackPoint=function(t,e,r,i){var a=this.image;if(i){for(var s=t;s<=e;s++)if(a.get(s,r))return!0}else for(var l=t;l<=e;l++)if(a.get(r,l))return!0;return!1},n.INIT_SIZE=10,n.CORR=1,n}(),hS=function(){function n(){}return n.checkAndNudgePoints=function(t,e){for(var r=t.getWidth(),i=t.getHeight(),a=!0,s=0;s<e.length&&a;s+=2){var l=Math.floor(e[s]),c=Math.floor(e[s+1]);if(l<-1||l>r||c<-1||c>i)throw new lt;a=!1,l===-1?(e[s]=0,a=!0):l===r&&(e[s]=r-1,a=!0),c===-1?(e[s+1]=0,a=!0):c===i&&(e[s+1]=i-1,a=!0)}a=!0;for(var s=e.length-2;s>=0&&a;s-=2){var l=Math.floor(e[s]),c=Math.floor(e[s+1]);if(l<-1||l>r||c<-1||c>i)throw new lt;a=!1,l===-1?(e[s]=0,a=!0):l===r&&(e[s]=r-1,a=!0),c===-1?(e[s+1]=0,a=!0):c===i&&(e[s+1]=i-1,a=!0)}},n}(),r4=function(){function n(t,e,r,i,a,s,l,c,f){this.a11=t,this.a21=e,this.a31=r,this.a12=i,this.a22=a,this.a32=s,this.a13=l,this.a23=c,this.a33=f}return n.quadrilateralToQuadrilateral=function(t,e,r,i,a,s,l,c,f,d,g,m,v,_,w,b){var S=n.quadrilateralToSquare(t,e,r,i,a,s,l,c),C=n.squareToQuadrilateral(f,d,g,m,v,_,w,b);return C.times(S)},n.prototype.transformPoints=function(t){for(var e=t.length,r=this.a11,i=this.a12,a=this.a13,s=this.a21,l=this.a22,c=this.a23,f=this.a31,d=this.a32,g=this.a33,m=0;m<e;m+=2){var v=t[m],_=t[m+1],w=a*v+c*_+g;t[m]=(r*v+s*_+f)/w,t[m+1]=(i*v+l*_+d)/w}},n.prototype.transformPointsWithValues=function(t,e){for(var r=this.a11,i=this.a12,a=this.a13,s=this.a21,l=this.a22,c=this.a23,f=this.a31,d=this.a32,g=this.a33,m=t.length,v=0;v<m;v++){var _=t[v],w=e[v],b=a*_+c*w+g;t[v]=(r*_+s*w+f)/b,e[v]=(i*_+l*w+d)/b}},n.squareToQuadrilateral=function(t,e,r,i,a,s,l,c){var f=t-r+a-l,d=e-i+s-c;if(f===0&&d===0)return new n(r-t,a-r,t,i-e,s-i,e,0,0,1);var g=r-a,m=l-a,v=i-s,_=c-s,w=g*_-m*v,b=(f*_-m*d)/w,S=(g*d-f*v)/w;return new n(r-t+b*r,l-t+S*l,t,i-e+b*i,c-e+S*c,e,b,S,1)},n.quadrilateralToSquare=function(t,e,r,i,a,s,l,c){return n.squareToQuadrilateral(t,e,r,i,a,s,l,c).buildAdjoint()},n.prototype.buildAdjoint=function(){return new n(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)},n.prototype.times=function(t){return new n(this.a11*t.a11+this.a21*t.a12+this.a31*t.a13,this.a11*t.a21+this.a21*t.a22+this.a31*t.a23,this.a11*t.a31+this.a21*t.a32+this.a31*t.a33,this.a12*t.a11+this.a22*t.a12+this.a32*t.a13,this.a12*t.a21+this.a22*t.a22+this.a32*t.a23,this.a12*t.a31+this.a22*t.a32+this.a32*t.a33,this.a13*t.a11+this.a23*t.a12+this.a33*t.a13,this.a13*t.a21+this.a23*t.a22+this.a33*t.a23,this.a13*t.a31+this.a23*t.a32+this.a33*t.a33)},n}(),k7=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),L7=function(n){k7(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.prototype.sampleGrid=function(e,r,i,a,s,l,c,f,d,g,m,v,_,w,b,S,C,I,M){var N=r4.quadrilateralToQuadrilateral(a,s,l,c,f,d,g,m,v,_,w,b,S,C,I,M);return this.sampleGridWithTransform(e,r,i,N)},t.prototype.sampleGridWithTransform=function(e,r,i,a){if(r<=0||i<=0)throw new lt;for(var s=new Aa(r,i),l=new Float32Array(2*r),c=0;c<i;c++){for(var f=l.length,d=c+.5,g=0;g<f;g+=2)l[g]=g/2+.5,l[g+1]=d;a.transformPoints(l),hS.checkAndNudgePoints(e,l);try{for(var g=0;g<f;g+=2)e.get(Math.floor(l[g]),Math.floor(l[g+1]))&&s.set(g/2,c)}catch{throw new lt}}return s},t}(hS),A2=function(){function n(){}return n.setGridSampler=function(t){n.gridSampler=t},n.getInstance=function(){return n.gridSampler},n.gridSampler=new L7,n}(),Dr=function(){function n(t,e){this.x=t,this.y=e}return n.prototype.toResultPoint=function(){return new Ct(this.getX(),this.getY())},n.prototype.getX=function(){return this.x},n.prototype.getY=function(){return this.y},n}(),B7=function(){function n(t){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=t}return n.prototype.detect=function(){return this.detectMirror(!1)},n.prototype.detectMirror=function(t){var e=this.getMatrixCenter(),r=this.getBullsEyeCorners(e);if(t){var i=r[0];r[0]=r[2],r[2]=i}this.extractParameters(r);var a=this.sampleGrid(this.image,r[this.shift%4],r[(this.shift+1)%4],r[(this.shift+2)%4],r[(this.shift+3)%4]),s=this.getMatrixCornerPoints(r);return new P7(a,s,this.compact,this.nbDataBlocks,this.nbLayers)},n.prototype.extractParameters=function(t){if(!this.isValidPoint(t[0])||!this.isValidPoint(t[1])||!this.isValidPoint(t[2])||!this.isValidPoint(t[3]))throw new lt;var e=2*this.nbCenterLayers,r=new Int32Array([this.sampleLine(t[0],t[1],e),this.sampleLine(t[1],t[2],e),this.sampleLine(t[2],t[3],e),this.sampleLine(t[3],t[0],e)]);this.shift=this.getRotation(r,e);for(var i=0,a=0;a<4;a++){var s=r[(this.shift+a)%4];this.compact?(i<<=7,i+=s>>1&127):(i<<=10,i+=(s>>2&992)+(s>>1&31))}var l=this.getCorrectedParameterData(i,this.compact);this.compact?(this.nbLayers=(l>>6)+1,this.nbDataBlocks=(l&63)+1):(this.nbLayers=(l>>11)+1,this.nbDataBlocks=(l&2047)+1)},n.prototype.getRotation=function(t,e){var r=0;t.forEach(function(a,s,l){var c=(a>>e-2<<1)+(a&1);r=(r<<3)+c}),r=((r&1)<<11)+(r>>1);for(var i=0;i<4;i++)if(Zt.bitCount(r^this.EXPECTED_CORNER_BITS[i])<=2)return i;throw new lt},n.prototype.getCorrectedParameterData=function(t,e){var r,i;e?(r=7,i=2):(r=10,i=4);for(var a=r-i,s=new Int32Array(r),l=r-1;l>=0;--l)s[l]=t&15,t>>=4;try{var c=new Kg(Pr.AZTEC_PARAM);c.decode(s,a)}catch{throw new lt}for(var f=0,l=0;l<i;l++)f=(f<<4)+s[l];return f},n.prototype.getBullsEyeCorners=function(t){var e=t,r=t,i=t,a=t,s=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){var l=this.getFirstDifferent(e,s,1,-1),c=this.getFirstDifferent(r,s,1,1),f=this.getFirstDifferent(i,s,-1,1),d=this.getFirstDifferent(a,s,-1,-1);if(this.nbCenterLayers>2){var g=this.distancePoint(d,l)*this.nbCenterLayers/(this.distancePoint(a,e)*(this.nbCenterLayers+2));if(g<.75||g>1.25||!this.isWhiteOrBlackRectangle(l,c,f,d))break}e=l,r=c,i=f,a=d,s=!s}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new lt;this.compact=this.nbCenterLayers===5;var m=new Ct(e.getX()+.5,e.getY()-.5),v=new Ct(r.getX()+.5,r.getY()+.5),_=new Ct(i.getX()-.5,i.getY()+.5),w=new Ct(a.getX()-.5,a.getY()-.5);return this.expandSquare([m,v,_,w],2*this.nbCenterLayers-3,2*this.nbCenterLayers)},n.prototype.getMatrixCenter=function(){var t,e,r,i;try{var a=new $y(this.image).detect();t=a[0],e=a[1],r=a[2],i=a[3]}catch{var s=this.image.getWidth()/2,l=this.image.getHeight()/2;t=this.getFirstDifferent(new Dr(s+7,l-7),!1,1,-1).toResultPoint(),e=this.getFirstDifferent(new Dr(s+7,l+7),!1,1,1).toResultPoint(),r=this.getFirstDifferent(new Dr(s-7,l+7),!1,-1,1).toResultPoint(),i=this.getFirstDifferent(new Dr(s-7,l-7),!1,-1,-1).toResultPoint()}var c=fe.round((t.getX()+i.getX()+e.getX()+r.getX())/4),f=fe.round((t.getY()+i.getY()+e.getY()+r.getY())/4);try{var a=new $y(this.image,15,c,f).detect();t=a[0],e=a[1],r=a[2],i=a[3]}catch{t=this.getFirstDifferent(new Dr(c+7,f-7),!1,1,-1).toResultPoint(),e=this.getFirstDifferent(new Dr(c+7,f+7),!1,1,1).toResultPoint(),r=this.getFirstDifferent(new Dr(c-7,f+7),!1,-1,1).toResultPoint(),i=this.getFirstDifferent(new Dr(c-7,f-7),!1,-1,-1).toResultPoint()}return c=fe.round((t.getX()+i.getX()+e.getX()+r.getX())/4),f=fe.round((t.getY()+i.getY()+e.getY()+r.getY())/4),new Dr(c,f)},n.prototype.getMatrixCornerPoints=function(t){return this.expandSquare(t,2*this.nbCenterLayers,this.getDimension())},n.prototype.sampleGrid=function(t,e,r,i,a){var s=A2.getInstance(),l=this.getDimension(),c=l/2-this.nbCenterLayers,f=l/2+this.nbCenterLayers;return s.sampleGrid(t,l,l,c,c,f,c,f,f,c,f,e.getX(),e.getY(),r.getX(),r.getY(),i.getX(),i.getY(),a.getX(),a.getY())},n.prototype.sampleLine=function(t,e,r){for(var i=0,a=this.distanceResultPoint(t,e),s=a/r,l=t.getX(),c=t.getY(),f=s*(e.getX()-t.getX())/a,d=s*(e.getY()-t.getY())/a,g=0;g<r;g++)this.image.get(fe.round(l+g*f),fe.round(c+g*d))&&(i|=1<<r-g-1);return i},n.prototype.isWhiteOrBlackRectangle=function(t,e,r,i){var a=3;t=new Dr(t.getX()-a,t.getY()+a),e=new Dr(e.getX()-a,e.getY()-a),r=new Dr(r.getX()+a,r.getY()-a),i=new Dr(i.getX()+a,i.getY()+a);var s=this.getColor(i,t);if(s===0)return!1;var l=this.getColor(t,e);return l!==s||(l=this.getColor(e,r),l!==s)?!1:(l=this.getColor(r,i),l===s)},n.prototype.getColor=function(t,e){for(var r=this.distancePoint(t,e),i=(e.getX()-t.getX())/r,a=(e.getY()-t.getY())/r,s=0,l=t.getX(),c=t.getY(),f=this.image.get(t.getX(),t.getY()),d=Math.ceil(r),g=0;g<d;g++)l+=i,c+=a,this.image.get(fe.round(l),fe.round(c))!==f&&s++;var m=s/r;return m>.1&&m<.9?0:m<=.1===f?1:-1},n.prototype.getFirstDifferent=function(t,e,r,i){for(var a=t.getX()+r,s=t.getY()+i;this.isValid(a,s)&&this.image.get(a,s)===e;)a+=r,s+=i;for(a-=r,s-=i;this.isValid(a,s)&&this.image.get(a,s)===e;)a+=r;for(a-=r;this.isValid(a,s)&&this.image.get(a,s)===e;)s+=i;return s-=i,new Dr(a,s)},n.prototype.expandSquare=function(t,e,r){var i=r/(2*e),a=t[0].getX()-t[2].getX(),s=t[0].getY()-t[2].getY(),l=(t[0].getX()+t[2].getX())/2,c=(t[0].getY()+t[2].getY())/2,f=new Ct(l+i*a,c+i*s),d=new Ct(l-i*a,c-i*s);a=t[1].getX()-t[3].getX(),s=t[1].getY()-t[3].getY(),l=(t[1].getX()+t[3].getX())/2,c=(t[1].getY()+t[3].getY())/2;var g=new Ct(l+i*a,c+i*s),m=new Ct(l-i*a,c-i*s),v=[f,g,d,m];return v},n.prototype.isValid=function(t,e){return t>=0&&t<this.image.getWidth()&&e>0&&e<this.image.getHeight()},n.prototype.isValidPoint=function(t){var e=fe.round(t.getX()),r=fe.round(t.getY());return this.isValid(e,r)},n.prototype.distancePoint=function(t,e){return fe.distance(t.getX(),t.getY(),e.getX(),e.getY())},n.prototype.distanceResultPoint=function(t,e){return fe.distance(t.getX(),t.getY(),e.getX(),e.getY())},n.prototype.getDimension=function(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(Zt.truncDivision(this.nbLayers-4,8)+1)+15},n}(),qy=function(){function n(){}return n.prototype.decode=function(t,e){e===void 0&&(e=null);var r=null,i=new B7(t.getBlackMatrix()),a=null,s=null;try{var l=i.detectMirror(!1);a=l.getPoints(),this.reportFoundResultPoints(e,a),s=new fS().decode(l)}catch(g){r=g}if(s==null)try{var l=i.detectMirror(!0);a=l.getPoints(),this.reportFoundResultPoints(e,a),s=new fS().decode(l)}catch(g){throw r??g}var c=new pr(s.getText(),s.getRawBytes(),s.getNumBits(),a,Pt.AZTEC,Fe.currentTimeMillis()),f=s.getByteSegments();f!=null&&c.putMetadata(nr.BYTE_SEGMENTS,f);var d=s.getECLevel();return d!=null&&c.putMetadata(nr.ERROR_CORRECTION_LEVEL,d),c},n.prototype.reportFoundResultPoints=function(t,e){if(t!=null){var r=t.get(Xe.NEED_RESULT_POINT_CALLBACK);r!=null&&e.forEach(function(i,a,s){r.foundPossibleResultPoint(i)})}},n.prototype.reset=function(){},n}(),V7=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}();(function(n){V7(t,n);function t(e){return e===void 0&&(e=500),n.call(this,new qy,e)||this}return t})(Lc);var On=function(){function n(){}return n.prototype.decode=function(t,e){try{return this.doDecode(t,e)}catch{var r=e&&e.get(Xe.TRY_HARDER)===!0;if(r&&t.isRotateSupported()){var i=t.rotateCounterClockwise(),a=this.doDecode(i,e),s=a.getResultMetadata(),l=270;s!==null&&s.get(nr.ORIENTATION)===!0&&(l=l+s.get(nr.ORIENTATION)%360),a.putMetadata(nr.ORIENTATION,l);var c=a.getResultPoints();if(c!==null)for(var f=i.getHeight(),d=0;d<c.length;d++)c[d]=new Ct(f-c[d].getY()-1,c[d].getX());return a}else throw new lt}},n.prototype.reset=function(){},n.prototype.doDecode=function(t,e){var r=t.getWidth(),i=t.getHeight(),a=new $n(r),s=e&&e.get(Xe.TRY_HARDER)===!0,l=Math.max(1,i>>(s?8:5)),c;s?c=i:c=15;for(var f=Math.trunc(i/2),d=0;d<c;d++){var g=Math.trunc((d+1)/2),m=(d&1)===0,v=f+l*(m?g:-g);if(v<0||v>=i)break;try{a=t.getBlackRow(v,a)}catch{continue}for(var _=function(C){if(C===1&&(a.reverse(),e&&e.get(Xe.NEED_RESULT_POINT_CALLBACK)===!0)){var I=new Map;e.forEach(function(k,O){return I.set(O,k)}),I.delete(Xe.NEED_RESULT_POINT_CALLBACK),e=I}try{var M=w.decodeRow(v,a,e);if(C===1){M.putMetadata(nr.ORIENTATION,180);var N=M.getResultPoints();N!==null&&(N[0]=new Ct(r-N[0].getX()-1,N[0].getY()),N[1]=new Ct(r-N[1].getX()-1,N[1].getY()))}return{value:M}}catch{}},w=this,b=0;b<2;b++){var S=_(b);if(typeof S=="object")return S.value}}throw new lt},n.recordPattern=function(t,e,r){for(var i=r.length,a=0;a<i;a++)r[a]=0;var s=t.getSize();if(e>=s)throw new lt;for(var l=!t.get(e),c=0,f=e;f<s;){if(t.get(f)!==l)r[c]++;else{if(++c===i)break;r[c]=1,l=!l}f++}if(!(c===i||c===i-1&&f===s))throw new lt},n.recordPatternInReverse=function(t,e,r){for(var i=r.length,a=t.get(e);e>0&&i>=0;)t.get(--e)!==a&&(i--,a=!a);if(i>=0)throw new lt;n.recordPattern(t,e+1,r)},n.patternMatchVariance=function(t,e,r){for(var i=t.length,a=0,s=0,l=0;l<i;l++)a+=t[l],s+=e[l];if(a<s)return Number.POSITIVE_INFINITY;var c=a/s;r*=c;for(var f=0,d=0;d<i;d++){var g=t[d],m=e[d]*c,v=g>m?g-m:m-g;if(v>r)return Number.POSITIVE_INFINITY;f+=v}return f/a},n}(),F7=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),dS=function(n){F7(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.findStartPattern=function(e){for(var r=e.getSize(),i=e.getNextSet(0),a=0,s=Int32Array.from([0,0,0,0,0,0]),l=i,c=!1,f=6,d=i;d<r;d++)if(e.get(d)!==c)s[a]++;else{if(a===f-1){for(var g=t.MAX_AVG_VARIANCE,m=-1,v=t.CODE_START_A;v<=t.CODE_START_C;v++){var _=On.patternMatchVariance(s,t.CODE_PATTERNS[v],t.MAX_INDIVIDUAL_VARIANCE);_<g&&(g=_,m=v)}if(m>=0&&e.isRange(Math.max(0,l-(d-l)/2),l,!1))return Int32Array.from([l,d,m]);l+=s[0]+s[1],s=s.slice(2,s.length),s[a-1]=0,s[a]=0,a--}else a++;s[a]=1,c=!c}throw new lt},t.decodeCode=function(e,r,i){On.recordPattern(e,i,r);for(var a=t.MAX_AVG_VARIANCE,s=-1,l=0;l<t.CODE_PATTERNS.length;l++){var c=t.CODE_PATTERNS[l],f=this.patternMatchVariance(r,c,t.MAX_INDIVIDUAL_VARIANCE);f<a&&(a=f,s=l)}if(s>=0)return s;throw new lt},t.prototype.decodeRow=function(e,r,i){var a=i&&i.get(Xe.ASSUME_GS1)===!0,s=t.findStartPattern(r),l=s[2],c=0,f=new Uint8Array(20);f[c++]=l;var d;switch(l){case t.CODE_START_A:d=t.CODE_CODE_A;break;case t.CODE_START_B:d=t.CODE_CODE_B;break;case t.CODE_START_C:d=t.CODE_CODE_C;break;default:throw new xt}for(var g=!1,m=!1,v="",_=s[0],w=s[1],b=Int32Array.from([0,0,0,0,0,0]),S=0,C=0,I=l,M=0,N=!0,k=!1,O=!1;!g;){var R=m;switch(m=!1,S=C,C=t.decodeCode(r,b,w),f[c++]=C,C!==t.CODE_STOP&&(N=!0),C!==t.CODE_STOP&&(M++,I+=M*C),_=w,w+=b.reduce(function(Z,it){return Z+it},0),C){case t.CODE_START_A:case t.CODE_START_B:case t.CODE_START_C:throw new xt}switch(d){case t.CODE_CODE_A:if(C<64)O===k?v+=String.fromCharCode(32+C):v+=String.fromCharCode(32+C+128),O=!1;else if(C<96)O===k?v+=String.fromCharCode(C-64):v+=String.fromCharCode(C+64),O=!1;else switch(C!==t.CODE_STOP&&(N=!1),C){case t.CODE_FNC_1:a&&(v.length===0?v+="]C1":v+="");break;case t.CODE_FNC_2:case t.CODE_FNC_3:break;case t.CODE_FNC_4_A:!k&&O?(k=!0,O=!1):k&&O?(k=!1,O=!1):O=!0;break;case t.CODE_SHIFT:m=!0,d=t.CODE_CODE_B;break;case t.CODE_CODE_B:d=t.CODE_CODE_B;break;case t.CODE_CODE_C:d=t.CODE_CODE_C;break;case t.CODE_STOP:g=!0;break}break;case t.CODE_CODE_B:if(C<96)O===k?v+=String.fromCharCode(32+C):v+=String.fromCharCode(32+C+128),O=!1;else switch(C!==t.CODE_STOP&&(N=!1),C){case t.CODE_FNC_1:a&&(v.length===0?v+="]C1":v+="");break;case t.CODE_FNC_2:case t.CODE_FNC_3:break;case t.CODE_FNC_4_B:!k&&O?(k=!0,O=!1):k&&O?(k=!1,O=!1):O=!0;break;case t.CODE_SHIFT:m=!0,d=t.CODE_CODE_A;break;case t.CODE_CODE_A:d=t.CODE_CODE_A;break;case t.CODE_CODE_C:d=t.CODE_CODE_C;break;case t.CODE_STOP:g=!0;break}break;case t.CODE_CODE_C:if(C<100)C<10&&(v+="0"),v+=C;else switch(C!==t.CODE_STOP&&(N=!1),C){case t.CODE_FNC_1:a&&(v.length===0?v+="]C1":v+="");break;case t.CODE_CODE_A:d=t.CODE_CODE_A;break;case t.CODE_CODE_B:d=t.CODE_CODE_B;break;case t.CODE_STOP:g=!0;break}break}R&&(d=d===t.CODE_CODE_A?t.CODE_CODE_B:t.CODE_CODE_A)}var D=w-_;if(w=r.getNextUnset(w),!r.isRange(w,Math.min(r.getSize(),w+(w-_)/2),!1))throw new lt;if(I-=M*S,I%103!==S)throw new Gn;var L=v.length;if(L===0)throw new lt;L>0&&N&&(d===t.CODE_CODE_C?v=v.substring(0,L-2):v=v.substring(0,L-1));for(var F=(s[1]+s[0])/2,U=_+D/2,B=f.length,rt=new Uint8Array(B),vt=0;vt<B;vt++)rt[vt]=f[vt];var q=[new Ct(F,e),new Ct(U,e)];return new pr(v,rt,0,q,Pt.CODE_128,new Date().getTime())},t.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],t.MAX_AVG_VARIANCE=.25,t.MAX_INDIVIDUAL_VARIANCE=.7,t.CODE_SHIFT=98,t.CODE_CODE_C=99,t.CODE_CODE_B=100,t.CODE_CODE_A=101,t.CODE_FNC_1=102,t.CODE_FNC_2=97,t.CODE_FNC_3=96,t.CODE_FNC_4_A=101,t.CODE_FNC_4_B=100,t.CODE_START_A=103,t.CODE_START_B=104,t.CODE_START_C=105,t.CODE_STOP=106,t}(On),U7=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Dv=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},gS=function(n){U7(t,n);function t(e,r){e===void 0&&(e=!1),r===void 0&&(r=!1);var i=n.call(this)||this;return i.usingCheckDigit=e,i.extendedMode=r,i.decodeRowResult="",i.counters=new Int32Array(9),i}return t.prototype.decodeRow=function(e,r,i){var a,s,l,c,f=this.counters;f.fill(0),this.decodeRowResult="";var d=t.findAsteriskPattern(r,f),g=r.getNextSet(d[1]),m=r.getSize(),v,_;do{t.recordPattern(r,g,f);var w=t.toNarrowWidePattern(f);if(w<0)throw new lt;v=t.patternToChar(w),this.decodeRowResult+=v,_=g;try{for(var b=(a=void 0,Dv(f)),S=b.next();!S.done;S=b.next()){var C=S.value;g+=C}}catch(B){a={error:B}}finally{try{S&&!S.done&&(s=b.return)&&s.call(b)}finally{if(a)throw a.error}}g=r.getNextSet(g)}while(v!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var I=0;try{for(var M=Dv(f),N=M.next();!N.done;N=M.next()){var C=N.value;I+=C}}catch(B){l={error:B}}finally{try{N&&!N.done&&(c=M.return)&&c.call(M)}finally{if(l)throw l.error}}var k=g-_-I;if(g!==m&&k*2<I)throw new lt;if(this.usingCheckDigit){for(var O=this.decodeRowResult.length-1,R=0,D=0;D<O;D++)R+=t.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(D));if(this.decodeRowResult.charAt(O)!==t.ALPHABET_STRING.charAt(R%43))throw new Gn;this.decodeRowResult=this.decodeRowResult.substring(0,O)}if(this.decodeRowResult.length===0)throw new lt;var L;this.extendedMode?L=t.decodeExtended(this.decodeRowResult):L=this.decodeRowResult;var F=(d[1]+d[0])/2,U=_+I/2;return new pr(L,null,0,[new Ct(F,e),new Ct(U,e)],Pt.CODE_39,new Date().getTime())},t.findAsteriskPattern=function(e,r){for(var i=e.getSize(),a=e.getNextSet(0),s=0,l=a,c=!1,f=r.length,d=a;d<i;d++)if(e.get(d)!==c)r[s]++;else{if(s===f-1){if(this.toNarrowWidePattern(r)===t.ASTERISK_ENCODING&&e.isRange(Math.max(0,l-Math.floor((d-l)/2)),l,!1))return[l,d];l+=r[0]+r[1],r.copyWithin(0,2,2+s-1),r[s-1]=0,r[s]=0,s--}else s++;r[s]=1,c=!c}throw new lt},t.toNarrowWidePattern=function(e){var r,i,a=e.length,s=0,l;do{var c=2147483647;try{for(var f=(r=void 0,Dv(e)),d=f.next();!d.done;d=f.next()){var g=d.value;g<c&&g>s&&(c=g)}}catch(w){r={error:w}}finally{try{d&&!d.done&&(i=f.return)&&i.call(f)}finally{if(r)throw r.error}}s=c,l=0;for(var m=0,v=0,_=0;_<a;_++){var g=e[_];g>s&&(v|=1<<a-1-_,l++,m+=g)}if(l===3){for(var _=0;_<a&&l>0;_++){var g=e[_];if(g>s&&(l--,g*2>=m))return-1}return v}}while(l>3);return-1},t.patternToChar=function(e){for(var r=0;r<t.CHARACTER_ENCODINGS.length;r++)if(t.CHARACTER_ENCODINGS[r]===e)return t.ALPHABET_STRING.charAt(r);if(e===t.ASTERISK_ENCODING)return"*";throw new lt},t.decodeExtended=function(e){for(var r=e.length,i="",a=0;a<r;a++){var s=e.charAt(a);if(s==="+"||s==="$"||s==="%"||s==="/"){var l=e.charAt(a+1),c="\0";switch(s){case"+":if(l>="A"&&l<="Z")c=String.fromCharCode(l.charCodeAt(0)+32);else throw new xt;break;case"$":if(l>="A"&&l<="Z")c=String.fromCharCode(l.charCodeAt(0)-64);else throw new xt;break;case"%":if(l>="A"&&l<="E")c=String.fromCharCode(l.charCodeAt(0)-38);else if(l>="F"&&l<="J")c=String.fromCharCode(l.charCodeAt(0)-11);else if(l>="K"&&l<="O")c=String.fromCharCode(l.charCodeAt(0)+16);else if(l>="P"&&l<="T")c=String.fromCharCode(l.charCodeAt(0)+43);else if(l==="U")c="\0";else if(l==="V")c="@";else if(l==="W")c="`";else if(l==="X"||l==="Y"||l==="Z")c="";else throw new xt;break;case"/":if(l>="A"&&l<="O")c=String.fromCharCode(l.charCodeAt(0)-32);else if(l==="Z")c=":";else throw new xt;break}i+=c,a++}else i+=s}return i},t.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",t.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],t.ASTERISK_ENCODING=148,t}(On),j7=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Ov=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},pS=function(n){j7(t,n);function t(){var e=n.call(this)||this;return e.decodeRowResult="",e.counters=new Int32Array(6),e}return t.prototype.decodeRow=function(e,r,i){var a,s,l,c,f=this.findAsteriskPattern(r),d=r.getNextSet(f[1]),g=r.getSize(),m=this.counters;m.fill(0),this.decodeRowResult="";var v,_;do{t.recordPattern(r,d,m);var w=this.toPattern(m);if(w<0)throw new lt;v=this.patternToChar(w),this.decodeRowResult+=v,_=d;try{for(var b=(a=void 0,Ov(m)),S=b.next();!S.done;S=b.next()){var C=S.value;d+=C}}catch(D){a={error:D}}finally{try{S&&!S.done&&(s=b.return)&&s.call(b)}finally{if(a)throw a.error}}d=r.getNextSet(d)}while(v!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var I=0;try{for(var M=Ov(m),N=M.next();!N.done;N=M.next()){var C=N.value;I+=C}}catch(D){l={error:D}}finally{try{N&&!N.done&&(c=M.return)&&c.call(M)}finally{if(l)throw l.error}}if(d===g||!r.get(d))throw new lt;if(this.decodeRowResult.length<2)throw new lt;this.checkChecksums(this.decodeRowResult),this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-2);var k=this.decodeExtended(this.decodeRowResult),O=(f[1]+f[0])/2,R=_+I/2;return new pr(k,null,0,[new Ct(O,e),new Ct(R,e)],Pt.CODE_93,new Date().getTime())},t.prototype.findAsteriskPattern=function(e){var r=e.getSize(),i=e.getNextSet(0);this.counters.fill(0);for(var a=this.counters,s=i,l=!1,c=a.length,f=0,d=i;d<r;d++)if(e.get(d)!==l)a[f]++;else{if(f===c-1){if(this.toPattern(a)===t.ASTERISK_ENCODING)return new Int32Array([s,d]);s+=a[0]+a[1],a.copyWithin(0,2,2+f-1),a[f-1]=0,a[f]=0,f--}else f++;a[f]=1,l=!l}throw new lt},t.prototype.toPattern=function(e){var r,i,a=0;try{for(var s=Ov(e),l=s.next();!l.done;l=s.next()){var c=l.value;a+=c}}catch(_){r={error:_}}finally{try{l&&!l.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}for(var f=0,d=e.length,g=0;g<d;g++){var m=Math.round(e[g]*9/a);if(m<1||m>4)return-1;if((g&1)===0)for(var v=0;v<m;v++)f=f<<1|1;else f<<=m}return f},t.prototype.patternToChar=function(e){for(var r=0;r<t.CHARACTER_ENCODINGS.length;r++)if(t.CHARACTER_ENCODINGS[r]===e)return t.ALPHABET_STRING.charAt(r);throw new lt},t.prototype.decodeExtended=function(e){for(var r=e.length,i="",a=0;a<r;a++){var s=e.charAt(a);if(s>="a"&&s<="d"){if(a>=r-1)throw new xt;var l=e.charAt(a+1),c="\0";switch(s){case"d":if(l>="A"&&l<="Z")c=String.fromCharCode(l.charCodeAt(0)+32);else throw new xt;break;case"a":if(l>="A"&&l<="Z")c=String.fromCharCode(l.charCodeAt(0)-64);else throw new xt;break;case"b":if(l>="A"&&l<="E")c=String.fromCharCode(l.charCodeAt(0)-38);else if(l>="F"&&l<="J")c=String.fromCharCode(l.charCodeAt(0)-11);else if(l>="K"&&l<="O")c=String.fromCharCode(l.charCodeAt(0)+16);else if(l>="P"&&l<="T")c=String.fromCharCode(l.charCodeAt(0)+43);else if(l==="U")c="\0";else if(l==="V")c="@";else if(l==="W")c="`";else if(l>="X"&&l<="Z")c="";else throw new xt;break;case"c":if(l>="A"&&l<="O")c=String.fromCharCode(l.charCodeAt(0)-32);else if(l==="Z")c=":";else throw new xt;break}i+=c,a++}else i+=s}return i},t.prototype.checkChecksums=function(e){var r=e.length;this.checkOneChecksum(e,r-2,20),this.checkOneChecksum(e,r-1,15)},t.prototype.checkOneChecksum=function(e,r,i){for(var a=1,s=0,l=r-1;l>=0;l--)s+=a*t.ALPHABET_STRING.indexOf(e.charAt(l)),++a>i&&(a=1);if(e.charAt(r)!==t.ALPHABET_STRING[s%47])throw new Gn},t.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%abcd*",t.CHARACTER_ENCODINGS=[276,328,324,322,296,292,290,336,274,266,424,420,418,404,402,394,360,356,354,308,282,344,332,326,300,278,436,434,428,422,406,410,364,358,310,314,302,468,466,458,366,374,430,294,474,470,306,350],t.ASTERISK_ENCODING=t.CHARACTER_ENCODINGS[47],t}(On),z7=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),H7=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},mS=function(n){z7(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.narrowLineWidth=-1,e}return t.prototype.decodeRow=function(e,r,i){var a,s,l=this.decodeStart(r),c=this.decodeEnd(r),f=new Xt;t.decodeMiddle(r,l[1],c[0],f);var d=f.toString(),g=null;i!=null&&(g=i.get(Xe.ALLOWED_LENGTHS)),g==null&&(g=t.DEFAULT_ALLOWED_LENGTHS);var m=d.length,v=!1,_=0;try{for(var w=H7(g),b=w.next();!b.done;b=w.next()){var S=b.value;if(m===S){v=!0;break}S>_&&(_=S)}}catch(M){a={error:M}}finally{try{b&&!b.done&&(s=w.return)&&s.call(w)}finally{if(a)throw a.error}}if(!v&&m>_&&(v=!0),!v)throw new xt;var C=[new Ct(l[1],e),new Ct(c[0],e)],I=new pr(d,null,0,C,Pt.ITF,new Date().getTime());return I},t.decodeMiddle=function(e,r,i,a){var s=new Int32Array(10),l=new Int32Array(5),c=new Int32Array(5);for(s.fill(0),l.fill(0),c.fill(0);r<i;){On.recordPattern(e,r,s);for(var f=0;f<5;f++){var d=2*f;l[f]=s[d],c[f]=s[d+1]}var g=t.decodeDigit(l);a.append(g.toString()),g=this.decodeDigit(c),a.append(g.toString()),s.forEach(function(m){r+=m})}},t.prototype.decodeStart=function(e){var r=t.skipWhiteSpace(e),i=t.findGuardPattern(e,r,t.START_PATTERN);return this.narrowLineWidth=(i[1]-i[0])/4,this.validateQuietZone(e,i[0]),i},t.prototype.validateQuietZone=function(e,r){var i=this.narrowLineWidth*10;i=i<r?i:r;for(var a=r-1;i>0&&a>=0&&!e.get(a);a--)i--;if(i!==0)throw new lt},t.skipWhiteSpace=function(e){var r=e.getSize(),i=e.getNextSet(0);if(i===r)throw new lt;return i},t.prototype.decodeEnd=function(e){e.reverse();try{var r=t.skipWhiteSpace(e),i=void 0;try{i=t.findGuardPattern(e,r,t.END_PATTERN_REVERSED[0])}catch(s){s instanceof lt&&(i=t.findGuardPattern(e,r,t.END_PATTERN_REVERSED[1]))}this.validateQuietZone(e,i[0]);var a=i[0];return i[0]=e.getSize()-i[1],i[1]=e.getSize()-a,i}finally{e.reverse()}},t.findGuardPattern=function(e,r,i){var a=i.length,s=new Int32Array(a),l=e.getSize(),c=!1,f=0,d=r;s.fill(0);for(var g=r;g<l;g++)if(e.get(g)!==c)s[f]++;else{if(f===a-1){if(On.patternMatchVariance(s,i,t.MAX_INDIVIDUAL_VARIANCE)<t.MAX_AVG_VARIANCE)return[d,g];d+=s[0]+s[1],Fe.arraycopy(s,2,s,0,f-1),s[f-1]=0,s[f]=0,f--}else f++;s[f]=1,c=!c}throw new lt},t.decodeDigit=function(e){for(var r=t.MAX_AVG_VARIANCE,i=-1,a=t.PATTERNS.length,s=0;s<a;s++){var l=t.PATTERNS[s],c=On.patternMatchVariance(e,l,t.MAX_INDIVIDUAL_VARIANCE);c<r?(r=c,i=s):c===r&&(i=-1)}if(i>=0)return i%10;throw new lt},t.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],t.MAX_AVG_VARIANCE=.38,t.MAX_INDIVIDUAL_VARIANCE=.5,t.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],t.START_PATTERN=Int32Array.from([1,1,1,1]),t.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])],t}(On),G7=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),xc=function(n){G7(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.decodeRowStringBuffer="",e}return t.findStartGuardPattern=function(e){for(var r=!1,i,a=0,s=Int32Array.from([0,0,0]);!r;){s=Int32Array.from([0,0,0]),i=t.findGuardPattern(e,a,!1,this.START_END_PATTERN,s);var l=i[0];a=i[1];var c=l-(a-l);c>=0&&(r=e.isRange(c,l,!1))}return i},t.checkChecksum=function(e){return t.checkStandardUPCEANChecksum(e)},t.checkStandardUPCEANChecksum=function(e){var r=e.length;if(r===0)return!1;var i=parseInt(e.charAt(r-1),10);return t.getStandardUPCEANChecksum(e.substring(0,r-1))===i},t.getStandardUPCEANChecksum=function(e){for(var r=e.length,i=0,a=r-1;a>=0;a-=2){var s=e.charAt(a).charCodeAt(0)-48;if(s<0||s>9)throw new xt;i+=s}i*=3;for(var a=r-2;a>=0;a-=2){var s=e.charAt(a).charCodeAt(0)-48;if(s<0||s>9)throw new xt;i+=s}return(1e3-i)%10},t.decodeEnd=function(e,r){return t.findGuardPattern(e,r,!1,t.START_END_PATTERN,new Int32Array(t.START_END_PATTERN.length).fill(0))},t.findGuardPatternWithoutCounters=function(e,r,i,a){return this.findGuardPattern(e,r,i,a,new Int32Array(a.length))},t.findGuardPattern=function(e,r,i,a,s){var l=e.getSize();r=i?e.getNextUnset(r):e.getNextSet(r);for(var c=0,f=r,d=a.length,g=i,m=r;m<l;m++)if(e.get(m)!==g)s[c]++;else{if(c===d-1){if(On.patternMatchVariance(s,a,t.MAX_INDIVIDUAL_VARIANCE)<t.MAX_AVG_VARIANCE)return Int32Array.from([f,m]);f+=s[0]+s[1];for(var v=s.slice(2,s.length),_=0;_<c-1;_++)s[_]=v[_];s[c-1]=0,s[c]=0,c--}else c++;s[c]=1,g=!g}throw new lt},t.decodeDigit=function(e,r,i,a){this.recordPattern(e,i,r);for(var s=this.MAX_AVG_VARIANCE,l=-1,c=a.length,f=0;f<c;f++){var d=a[f],g=On.patternMatchVariance(r,d,t.MAX_INDIVIDUAL_VARIANCE);g<s&&(s=g,l=f)}if(l>=0)return l;throw new lt},t.MAX_AVG_VARIANCE=.48,t.MAX_INDIVIDUAL_VARIANCE=.7,t.START_END_PATTERN=Int32Array.from([1,1,1]),t.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),t.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),t.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])],t}(On),$7=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},q7=function(){function n(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return n.prototype.decodeRow=function(t,e,r){var i=this.decodeRowStringBuffer,a=this.decodeMiddle(e,r,i),s=i.toString(),l=n.parseExtensionString(s),c=[new Ct((r[0]+r[1])/2,t),new Ct(a,t)],f=new pr(s,null,0,c,Pt.UPC_EAN_EXTENSION,new Date().getTime());return l!=null&&f.putAllMetadata(l),f},n.prototype.decodeMiddle=function(t,e,r){var i,a,s=this.decodeMiddleCounters;s[0]=0,s[1]=0,s[2]=0,s[3]=0;for(var l=t.getSize(),c=e[1],f=0,d=0;d<5&&c<l;d++){var g=xc.decodeDigit(t,s,c,xc.L_AND_G_PATTERNS);r+=String.fromCharCode(48+g%10);try{for(var m=(i=void 0,$7(s)),v=m.next();!v.done;v=m.next()){var _=v.value;c+=_}}catch(b){i={error:b}}finally{try{v&&!v.done&&(a=m.return)&&a.call(m)}finally{if(i)throw i.error}}g>=10&&(f|=1<<4-d),d!==4&&(c=t.getNextSet(c),c=t.getNextUnset(c))}if(r.length!==5)throw new lt;var w=this.determineCheckDigit(f);if(n.extensionChecksum(r.toString())!==w)throw new lt;return c},n.extensionChecksum=function(t){for(var e=t.length,r=0,i=e-2;i>=0;i-=2)r+=t.charAt(i).charCodeAt(0)-48;r*=3;for(var i=e-1;i>=0;i-=2)r+=t.charAt(i).charCodeAt(0)-48;return r*=3,r%10},n.prototype.determineCheckDigit=function(t){for(var e=0;e<10;e++)if(t===this.CHECK_DIGIT_ENCODINGS[e])return e;throw new lt},n.parseExtensionString=function(t){if(t.length!==5)return null;var e=n.parseExtension5String(t);return e==null?null:new Map([[nr.SUGGESTED_PRICE,e]])},n.parseExtension5String=function(t){var e;switch(t.charAt(0)){case"0":e="£";break;case"5":e="$";break;case"9":switch(t){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}e="";break;default:e="";break}var r=parseInt(t.substring(1)),i=(r/100).toString(),a=r%100,s=a<10?"0"+a:a.toString();return e+i+"."+s},n}(),W7=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},X7=function(){function n(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return n.prototype.decodeRow=function(t,e,r){var i=this.decodeRowStringBuffer,a=this.decodeMiddle(e,r,i),s=i.toString(),l=n.parseExtensionString(s),c=[new Ct((r[0]+r[1])/2,t),new Ct(a,t)],f=new pr(s,null,0,c,Pt.UPC_EAN_EXTENSION,new Date().getTime());return l!=null&&f.putAllMetadata(l),f},n.prototype.decodeMiddle=function(t,e,r){var i,a,s=this.decodeMiddleCounters;s[0]=0,s[1]=0,s[2]=0,s[3]=0;for(var l=t.getSize(),c=e[1],f=0,d=0;d<2&&c<l;d++){var g=xc.decodeDigit(t,s,c,xc.L_AND_G_PATTERNS);r+=String.fromCharCode(48+g%10);try{for(var m=(i=void 0,W7(s)),v=m.next();!v.done;v=m.next()){var _=v.value;c+=_}}catch(w){i={error:w}}finally{try{v&&!v.done&&(a=m.return)&&a.call(m)}finally{if(i)throw i.error}}g>=10&&(f|=1<<1-d),d!==1&&(c=t.getNextSet(c),c=t.getNextUnset(c))}if(r.length!==2)throw new lt;if(parseInt(r.toString())%4!==f)throw new lt;return c},n.parseExtensionString=function(t){return t.length!==2?null:new Map([[nr.ISSUE_NUMBER,parseInt(t)]])},n}(),Y7=function(){function n(){}return n.decodeRow=function(t,e,r){var i=xc.findGuardPattern(e,r,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{var a=new q7;return a.decodeRow(t,e,i)}catch{var s=new X7;return s.decodeRow(t,e,i)}},n.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]),n}(),K7=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Tn=function(n){K7(t,n);function t(){var e=n.call(this)||this;e.decodeRowStringBuffer="",t.L_AND_G_PATTERNS=t.L_PATTERNS.map(function(l){return Int32Array.from(l)});for(var r=10;r<20;r++){for(var i=t.L_PATTERNS[r-10],a=new Int32Array(i.length),s=0;s<i.length;s++)a[s]=i[i.length-s-1];t.L_AND_G_PATTERNS[r]=a}return e}return t.prototype.decodeRow=function(e,r,i){var a=t.findStartGuardPattern(r),s=i==null?null:i.get(Xe.NEED_RESULT_POINT_CALLBACK);if(s!=null){var l=new Ct((a[0]+a[1])/2,e);s.foundPossibleResultPoint(l)}var c=this.decodeMiddle(r,a,this.decodeRowStringBuffer),f=c.rowOffset,d=c.resultString;if(s!=null){var g=new Ct(f,e);s.foundPossibleResultPoint(g)}var m=t.decodeEnd(r,f);if(s!=null){var v=new Ct((m[0]+m[1])/2,e);s.foundPossibleResultPoint(v)}var _=m[1],w=_+(_-m[0]);if(w>=r.getSize()||!r.isRange(_,w,!1))throw new lt;var b=d.toString();if(b.length<8)throw new xt;if(!t.checkChecksum(b))throw new Gn;var S=(a[1]+a[0])/2,C=(m[1]+m[0])/2,I=this.getBarcodeFormat(),M=[new Ct(S,e),new Ct(C,e)],N=new pr(b,null,0,M,I,new Date().getTime()),k=0;try{var O=Y7.decodeRow(e,r,m[1]);N.putMetadata(nr.UPC_EAN_EXTENSION,O.getText()),N.putAllMetadata(O.getResultMetadata()),N.addResultPoints(O.getResultPoints()),k=O.getText().length}catch{}var R=i==null?null:i.get(Xe.ALLOWED_EAN_EXTENSIONS);if(R!=null){var D=!1;for(var L in R)if(k.toString()===L){D=!0;break}if(!D)throw new lt}return I===Pt.EAN_13||Pt.UPC_A,N},t.checkChecksum=function(e){return t.checkStandardUPCEANChecksum(e)},t.checkStandardUPCEANChecksum=function(e){var r=e.length;if(r===0)return!1;var i=parseInt(e.charAt(r-1),10);return t.getStandardUPCEANChecksum(e.substring(0,r-1))===i},t.getStandardUPCEANChecksum=function(e){for(var r=e.length,i=0,a=r-1;a>=0;a-=2){var s=e.charAt(a).charCodeAt(0)-48;if(s<0||s>9)throw new xt;i+=s}i*=3;for(var a=r-2;a>=0;a-=2){var s=e.charAt(a).charCodeAt(0)-48;if(s<0||s>9)throw new xt;i+=s}return(1e3-i)%10},t.decodeEnd=function(e,r){return t.findGuardPattern(e,r,!1,t.START_END_PATTERN,new Int32Array(t.START_END_PATTERN.length).fill(0))},t}(xc),Z7=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),vS=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Wy=function(n){Z7(t,n);function t(){var e=n.call(this)||this;return e.decodeMiddleCounters=Int32Array.from([0,0,0,0]),e}return t.prototype.decodeMiddle=function(e,r,i){var a,s,l,c,f=this.decodeMiddleCounters;f[0]=0,f[1]=0,f[2]=0,f[3]=0;for(var d=e.getSize(),g=r[1],m=0,v=0;v<6&&g<d;v++){var _=Tn.decodeDigit(e,f,g,Tn.L_AND_G_PATTERNS);i+=String.fromCharCode(48+_%10);try{for(var w=(a=void 0,vS(f)),b=w.next();!b.done;b=w.next()){var S=b.value;g+=S}}catch(N){a={error:N}}finally{try{b&&!b.done&&(s=w.return)&&s.call(w)}finally{if(a)throw a.error}}_>=10&&(m|=1<<5-v)}i=t.determineFirstDigit(i,m);var C=Tn.findGuardPattern(e,g,!0,Tn.MIDDLE_PATTERN,new Int32Array(Tn.MIDDLE_PATTERN.length).fill(0));g=C[1];for(var v=0;v<6&&g<d;v++){var _=Tn.decodeDigit(e,f,g,Tn.L_PATTERNS);i+=String.fromCharCode(48+_);try{for(var I=(l=void 0,vS(f)),M=I.next();!M.done;M=I.next()){var S=M.value;g+=S}}catch(O){l={error:O}}finally{try{M&&!M.done&&(c=I.return)&&c.call(I)}finally{if(l)throw l.error}}}return{rowOffset:g,resultString:i}},t.prototype.getBarcodeFormat=function(){return Pt.EAN_13},t.determineFirstDigit=function(e,r){for(var i=0;i<10;i++)if(r===this.FIRST_DIGIT_ENCODINGS[i])return e=String.fromCharCode(48+i)+e,e;throw new lt},t.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26],t}(Tn),Q7=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),yS=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},xS=function(n){Q7(t,n);function t(){var e=n.call(this)||this;return e.decodeMiddleCounters=Int32Array.from([0,0,0,0]),e}return t.prototype.decodeMiddle=function(e,r,i){var a,s,l,c,f=this.decodeMiddleCounters;f[0]=0,f[1]=0,f[2]=0,f[3]=0;for(var d=e.getSize(),g=r[1],m=0;m<4&&g<d;m++){var v=Tn.decodeDigit(e,f,g,Tn.L_PATTERNS);i+=String.fromCharCode(48+v);try{for(var _=(a=void 0,yS(f)),w=_.next();!w.done;w=_.next()){var b=w.value;g+=b}}catch(M){a={error:M}}finally{try{w&&!w.done&&(s=_.return)&&s.call(_)}finally{if(a)throw a.error}}}var S=Tn.findGuardPattern(e,g,!0,Tn.MIDDLE_PATTERN,new Int32Array(Tn.MIDDLE_PATTERN.length).fill(0));g=S[1];for(var m=0;m<4&&g<d;m++){var v=Tn.decodeDigit(e,f,g,Tn.L_PATTERNS);i+=String.fromCharCode(48+v);try{for(var C=(l=void 0,yS(f)),I=C.next();!I.done;I=C.next()){var b=I.value;g+=b}}catch(k){l={error:k}}finally{try{I&&!I.done&&(c=C.return)&&c.call(C)}finally{if(l)throw l.error}}}return{rowOffset:g,resultString:i}},t.prototype.getBarcodeFormat=function(){return Pt.EAN_8},t}(Tn),J7=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),_S=function(n){J7(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.ean13Reader=new Wy,e}return t.prototype.getBarcodeFormat=function(){return Pt.UPC_A},t.prototype.decode=function(e,r){return this.maybeReturnResult(this.ean13Reader.decode(e))},t.prototype.decodeRow=function(e,r,i){return this.maybeReturnResult(this.ean13Reader.decodeRow(e,r,i))},t.prototype.decodeMiddle=function(e,r,i){return this.ean13Reader.decodeMiddle(e,r,i)},t.prototype.maybeReturnResult=function(e){var r=e.getText();if(r.charAt(0)==="0"){var i=new pr(r.substring(1),null,null,e.getResultPoints(),Pt.UPC_A);return e.getResultMetadata()!=null&&i.putAllMetadata(e.getResultMetadata()),i}else throw new lt},t.prototype.reset=function(){this.ean13Reader.reset()},t}(Tn),tL=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),eL=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},AS=function(n){tL(t,n);function t(){var e=n.call(this)||this;return e.decodeMiddleCounters=new Int32Array(4),e}return t.prototype.decodeMiddle=function(e,r,i){var a,s,l=this.decodeMiddleCounters.map(function(b){return b});l[0]=0,l[1]=0,l[2]=0,l[3]=0;for(var c=e.getSize(),f=r[1],d=0,g=0;g<6&&f<c;g++){var m=t.decodeDigit(e,l,f,t.L_AND_G_PATTERNS);i+=String.fromCharCode(48+m%10);try{for(var v=(a=void 0,eL(l)),_=v.next();!_.done;_=v.next()){var w=_.value;f+=w}}catch(b){a={error:b}}finally{try{_&&!_.done&&(s=v.return)&&s.call(v)}finally{if(a)throw a.error}}m>=10&&(d|=1<<5-g)}return t.determineNumSysAndCheckDigit(new Xt(i),d),f},t.prototype.decodeEnd=function(e,r){return t.findGuardPatternWithoutCounters(e,r,!0,t.MIDDLE_END_PATTERN)},t.prototype.checkChecksum=function(e){return Tn.checkChecksum(t.convertUPCEtoUPCA(e))},t.determineNumSysAndCheckDigit=function(e,r){for(var i=0;i<=1;i++)for(var a=0;a<10;a++)if(r===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[i][a]){e.insert(0,"0"+i),e.append("0"+a);return}throw lt.getNotFoundInstance()},t.prototype.getBarcodeFormat=function(){return Pt.UPC_E},t.convertUPCEtoUPCA=function(e){var r=e.slice(1,7).split("").map(function(s){return s.charCodeAt(0)}),i=new Xt;i.append(e.charAt(0));var a=r[5];switch(a){case 0:case 1:case 2:i.appendChars(r,0,2),i.append(a),i.append("0000"),i.appendChars(r,2,3);break;case 3:i.appendChars(r,0,3),i.append("00000"),i.appendChars(r,3,2);break;case 4:i.appendChars(r,0,4),i.append("00000"),i.append(r[4]);break;default:i.appendChars(r,0,5),i.append("0000"),i.append(a);break}return e.length>=8&&i.append(e.charAt(7)),i.toString()},t.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),t.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,1])],t}(Tn),nL=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),wS=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Mv=function(n){nL(t,n);function t(e){var r=n.call(this)||this,i=e==null?null:e.get(Xe.POSSIBLE_FORMATS),a=[];return i!=null&&(i.indexOf(Pt.EAN_13)>-1&&a.push(new Wy),i.indexOf(Pt.UPC_A)>-1&&a.push(new _S),i.indexOf(Pt.EAN_8)>-1&&a.push(new xS),i.indexOf(Pt.UPC_E)>-1&&a.push(new AS)),a.length===0&&(a.push(new Wy),a.push(new _S),a.push(new xS),a.push(new AS)),r.readers=a,r}return t.prototype.decodeRow=function(e,r,i){var a,s;try{for(var l=wS(this.readers),c=l.next();!c.done;c=l.next()){var f=c.value;try{var d=f.decodeRow(e,r,i),g=d.getBarcodeFormat()===Pt.EAN_13&&d.getText().charAt(0)==="0",m=i==null?null:i.get(Xe.POSSIBLE_FORMATS),v=m==null||m.includes(Pt.UPC_A);if(g&&v){var _=d.getRawBytes(),w=new pr(d.getText().substring(1),_,_?_.length:null,d.getResultPoints(),Pt.UPC_A);return w.putAllMetadata(d.getResultMetadata()),w}return d}catch{}}}catch(b){a={error:b}}finally{try{c&&!c.done&&(s=l.return)&&s.call(l)}finally{if(a)throw a.error}}throw new lt},t.prototype.reset=function(){var e,r;try{for(var i=wS(this.readers),a=i.next();!a.done;a=i.next()){var s=a.value;s.reset()}}catch(l){e={error:l}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(e)throw e.error}}},t}(On),rL=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),iL=function(n){rL(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.CODA_BAR_CHAR_SET={nnnnnww:"0",nnnnwwn:"1",nnnwnnw:"2",wwnnnnn:"3",nnwnnwn:"4",wnnnnwn:"5",nwnnnnw:"6",nwnnwnn:"7",nwwnnnn:"8",wnnwnnn:"9",nnnwwnn:"-",nnwwnnn:"$",wnnnwnw:":",wnwnnnw:"/",wnwnwnn:".",nnwwwww:"+",nnwwnwn:"A",nwnwnnw:"B",nnnwnww:"C",nnnwwwn:"D"},e}return t.prototype.decodeRow=function(e,r,i){var a=this.getValidRowData(r);if(!a)throw new lt;var s=this.codaBarDecodeRow(a.row);if(!s)throw new lt;return new pr(s,null,0,[new Ct(a.left,e),new Ct(a.right,e)],Pt.CODABAR,new Date().getTime())},t.prototype.getValidRowData=function(e){var r=e.toArray(),i=r.indexOf(!0);if(i===-1)return null;var a=r.lastIndexOf(!0);if(a<=i)return null;r=r.slice(i,a+1);for(var s=[],l=r[0],c=1,f=1;f<r.length;f++)r[f]===l?c++:(l=r[f],s.push(c),c=1);return s.push(c),s.length<23&&(s.length+1)%8!==0?null:{row:s,left:i,right:a}},t.prototype.codaBarDecodeRow=function(e){for(var r=[],i=Math.ceil(e.reduce(function(c,f){return(c+f)/2},0));e.length>0;){var a=e.splice(0,8).splice(0,7),s=a.map(function(c){return c<i?"n":"w"}).join("");if(this.CODA_BAR_CHAR_SET[s]===void 0)return null;r.push(this.CODA_BAR_CHAR_SET[s])}var l=r.join("");return this.validCodaBarString(l)?l:null},t.prototype.validCodaBarString=function(e){var r=/^[A-D].{1,}[A-D]$/;return r.test(e)},t}(On),aL=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),sL=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},yl=function(n){aL(t,n);function t(){var e=n.call(this)||this;return e.decodeFinderCounters=new Int32Array(4),e.dataCharacterCounters=new Int32Array(8),e.oddRoundingErrors=new Array(4),e.evenRoundingErrors=new Array(4),e.oddCounts=new Array(e.dataCharacterCounters.length/2),e.evenCounts=new Array(e.dataCharacterCounters.length/2),e}return t.prototype.getDecodeFinderCounters=function(){return this.decodeFinderCounters},t.prototype.getDataCharacterCounters=function(){return this.dataCharacterCounters},t.prototype.getOddRoundingErrors=function(){return this.oddRoundingErrors},t.prototype.getEvenRoundingErrors=function(){return this.evenRoundingErrors},t.prototype.getOddCounts=function(){return this.oddCounts},t.prototype.getEvenCounts=function(){return this.evenCounts},t.prototype.parseFinderValue=function(e,r){for(var i=0;i<r.length;i++)if(On.patternMatchVariance(e,r[i],t.MAX_INDIVIDUAL_VARIANCE)<t.MAX_AVG_VARIANCE)return i;throw new lt},t.count=function(e){return fe.sum(new Int32Array(e))},t.increment=function(e,r){for(var i=0,a=r[0],s=1;s<e.length;s++)r[s]>a&&(a=r[s],i=s);e[i]++},t.decrement=function(e,r){for(var i=0,a=r[0],s=1;s<e.length;s++)r[s]<a&&(a=r[s],i=s);e[i]--},t.isFinderPattern=function(e){var r,i,a=e[0]+e[1],s=a+e[2]+e[3],l=a/s;if(l>=t.MIN_FINDER_PATTERN_RATIO&&l<=t.MAX_FINDER_PATTERN_RATIO){var c=Number.MAX_SAFE_INTEGER,f=Number.MIN_SAFE_INTEGER;try{for(var d=sL(e),g=d.next();!g.done;g=d.next()){var m=g.value;m>f&&(f=m),m<c&&(c=m)}}catch(v){r={error:v}}finally{try{g&&!g.done&&(i=d.return)&&i.call(d)}finally{if(r)throw r.error}}return f<10*c}return!1},t.MAX_AVG_VARIANCE=.2,t.MAX_INDIVIDUAL_VARIANCE=.45,t.MIN_FINDER_PATTERN_RATIO=9.5/12,t.MAX_FINDER_PATTERN_RATIO=12.5/14,t}(On),Q1=function(){function n(t,e){this.value=t,this.checksumPortion=e}return n.prototype.getValue=function(){return this.value},n.prototype.getChecksumPortion=function(){return this.checksumPortion},n.prototype.toString=function(){return this.value+"("+this.checksumPortion+")"},n.prototype.equals=function(t){if(!(t instanceof n))return!1;var e=t;return this.value===e.value&&this.checksumPortion===e.checksumPortion},n.prototype.hashCode=function(){return this.value^this.checksumPortion},n}(),i4=function(){function n(t,e,r,i,a){this.value=t,this.startEnd=e,this.value=t,this.startEnd=e,this.resultPoints=new Array,this.resultPoints.push(new Ct(r,a)),this.resultPoints.push(new Ct(i,a))}return n.prototype.getValue=function(){return this.value},n.prototype.getStartEnd=function(){return this.startEnd},n.prototype.getResultPoints=function(){return this.resultPoints},n.prototype.equals=function(t){if(!(t instanceof n))return!1;var e=t;return this.value===e.value},n.prototype.hashCode=function(){return this.value},n}(),oL=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},tc=function(){function n(){}return n.getRSSvalue=function(t,e,r){var i,a,s=0;try{for(var l=oL(t),c=l.next();!c.done;c=l.next()){var f=c.value;s+=f}}catch(C){i={error:C}}finally{try{c&&!c.done&&(a=l.return)&&a.call(l)}finally{if(i)throw i.error}}for(var d=0,g=0,m=t.length,v=0;v<m-1;v++){var _=void 0;for(_=1,g|=1<<v;_<t[v];_++,g&=~(1<<v)){var w=n.combins(s-_-1,m-v-2);if(r&&g===0&&s-_-(m-v-1)>=m-v-1&&(w-=n.combins(s-_-(m-v),m-v-2)),m-v-1>1){for(var b=0,S=s-_-(m-v-2);S>e;S--)b+=n.combins(s-_-S-1,m-v-3);w-=b*(m-1-v)}else s-_>e&&w--;d+=w}s-=_}return d},n.combins=function(t,e){var r,i;t-e>e?(i=e,r=t-e):(i=t-e,r=e);for(var a=1,s=1,l=t;l>r;l--)a*=l,s<=i&&(a/=s,s++);for(;s<=i;)a/=s,s++;return a},n}(),lL=function(){function n(){}return n.buildBitArray=function(t){var e=t.length*2-1;t[t.length-1].getRightChar()==null&&(e-=1);for(var r=12*e,i=new $n(r),a=0,s=t[0],l=s.getRightChar().getValue(),c=11;c>=0;--c)(l&1<<c)!==0&&i.set(a),a++;for(var c=1;c<t.length;++c){for(var f=t[c],d=f.getLeftChar().getValue(),g=11;g>=0;--g)(d&1<<g)!==0&&i.set(a),a++;if(f.getRightChar()!==null)for(var m=f.getRightChar().getValue(),g=11;g>=0;--g)(m&1<<g)!==0&&i.set(a),a++}return i},n}(),gl=function(){function n(t,e){e?this.decodedInformation=null:(this.finished=t,this.decodedInformation=e)}return n.prototype.getDecodedInformation=function(){return this.decodedInformation},n.prototype.isFinished=function(){return this.finished},n}(),w2=function(){function n(t){this.newPosition=t}return n.prototype.getNewPosition=function(){return this.newPosition},n}(),uL=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Mi=function(n){uL(t,n);function t(e,r){var i=n.call(this,e)||this;return i.value=r,i}return t.prototype.getValue=function(){return this.value},t.prototype.isFNC1=function(){return this.value===t.FNC1},t.FNC1="$",t}(w2),cL=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),pl=function(n){cL(t,n);function t(e,r,i){var a=n.call(this,e)||this;return i?(a.remaining=!0,a.remainingValue=a.remainingValue):(a.remaining=!1,a.remainingValue=0),a.newString=r,a}return t.prototype.getNewString=function(){return this.newString},t.prototype.isRemaining=function(){return this.remaining},t.prototype.getRemainingValue=function(){return this.remainingValue},t}(w2),fL=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Bu=function(n){fL(t,n);function t(e,r,i){var a=n.call(this,e)||this;if(r<0||r>10||i<0||i>10)throw new xt;return a.firstDigit=r,a.secondDigit=i,a}return t.prototype.getFirstDigit=function(){return this.firstDigit},t.prototype.getSecondDigit=function(){return this.secondDigit},t.prototype.getValue=function(){return this.firstDigit*10+this.secondDigit},t.prototype.isFirstDigitFNC1=function(){return this.firstDigit===t.FNC1},t.prototype.isSecondDigitFNC1=function(){return this.secondDigit===t.FNC1},t.prototype.isAnyFNC1=function(){return this.firstDigit===t.FNC1||this.secondDigit===t.FNC1},t.FNC1=10,t}(w2),t1=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},hL=function(){function n(){}return n.parseFieldsInGeneralPurpose=function(t){var e,r,i,a,s,l,c,f;if(!t)return null;if(t.length<2)throw new lt;var d=t.substring(0,2);try{for(var g=t1(n.TWO_DIGIT_DATA_LENGTH),m=g.next();!m.done;m=g.next()){var v=m.value;if(v[0]===d)return v[1]===n.VARIABLE_LENGTH?n.processVariableAI(2,v[2],t):n.processFixedAI(2,v[1],t)}}catch(k){e={error:k}}finally{try{m&&!m.done&&(r=g.return)&&r.call(g)}finally{if(e)throw e.error}}if(t.length<3)throw new lt;var _=t.substring(0,3);try{for(var w=t1(n.THREE_DIGIT_DATA_LENGTH),b=w.next();!b.done;b=w.next()){var v=b.value;if(v[0]===_)return v[1]===n.VARIABLE_LENGTH?n.processVariableAI(3,v[2],t):n.processFixedAI(3,v[1],t)}}catch(k){i={error:k}}finally{try{b&&!b.done&&(a=w.return)&&a.call(w)}finally{if(i)throw i.error}}try{for(var S=t1(n.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH),C=S.next();!C.done;C=S.next()){var v=C.value;if(v[0]===_)return v[1]===n.VARIABLE_LENGTH?n.processVariableAI(4,v[2],t):n.processFixedAI(4,v[1],t)}}catch(k){s={error:k}}finally{try{C&&!C.done&&(l=S.return)&&l.call(S)}finally{if(s)throw s.error}}if(t.length<4)throw new lt;var I=t.substring(0,4);try{for(var M=t1(n.FOUR_DIGIT_DATA_LENGTH),N=M.next();!N.done;N=M.next()){var v=N.value;if(v[0]===I)return v[1]===n.VARIABLE_LENGTH?n.processVariableAI(4,v[2],t):n.processFixedAI(4,v[1],t)}}catch(k){c={error:k}}finally{try{N&&!N.done&&(f=M.return)&&f.call(M)}finally{if(c)throw c.error}}throw new lt},n.processFixedAI=function(t,e,r){if(r.length<t)throw new lt;var i=r.substring(0,t);if(r.length<t+e)throw new lt;var a=r.substring(t,t+e),s=r.substring(t+e),l="("+i+")"+a,c=n.parseFieldsInGeneralPurpose(s);return c==null?l:l+c},n.processVariableAI=function(t,e,r){var i=r.substring(0,t),a;r.length<t+e?a=r.length:a=t+e;var s=r.substring(t,a),l=r.substring(a),c="("+i+")"+s,f=n.parseFieldsInGeneralPurpose(l);return f==null?c:c+f},n.VARIABLE_LENGTH=[],n.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",n.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",n.VARIABLE_LENGTH,20],["22",n.VARIABLE_LENGTH,29],["30",n.VARIABLE_LENGTH,8],["37",n.VARIABLE_LENGTH,8],["90",n.VARIABLE_LENGTH,30],["91",n.VARIABLE_LENGTH,30],["92",n.VARIABLE_LENGTH,30],["93",n.VARIABLE_LENGTH,30],["94",n.VARIABLE_LENGTH,30],["95",n.VARIABLE_LENGTH,30],["96",n.VARIABLE_LENGTH,30],["97",n.VARIABLE_LENGTH,3],["98",n.VARIABLE_LENGTH,30],["99",n.VARIABLE_LENGTH,30]],n.THREE_DIGIT_DATA_LENGTH=[["240",n.VARIABLE_LENGTH,30],["241",n.VARIABLE_LENGTH,30],["242",n.VARIABLE_LENGTH,6],["250",n.VARIABLE_LENGTH,30],["251",n.VARIABLE_LENGTH,30],["253",n.VARIABLE_LENGTH,17],["254",n.VARIABLE_LENGTH,20],["400",n.VARIABLE_LENGTH,30],["401",n.VARIABLE_LENGTH,30],["402",17],["403",n.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",n.VARIABLE_LENGTH,20],["421",n.VARIABLE_LENGTH,15],["422",3],["423",n.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],n.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",n.VARIABLE_LENGTH,15],["391",n.VARIABLE_LENGTH,18],["392",n.VARIABLE_LENGTH,15],["393",n.VARIABLE_LENGTH,18],["703",n.VARIABLE_LENGTH,30]],n.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",n.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",n.VARIABLE_LENGTH,20],["8003",n.VARIABLE_LENGTH,30],["8004",n.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",n.VARIABLE_LENGTH,30],["8008",n.VARIABLE_LENGTH,12],["8018",18],["8020",n.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",n.VARIABLE_LENGTH,70],["8200",n.VARIABLE_LENGTH,70]],n}(),I1=function(){function n(t){this.buffer=new Xt,this.information=t}return n.prototype.decodeAllCodes=function(t,e){var r=e,i=null;do{var a=this.decodeGeneralPurposeField(r,i),s=hL.parseFieldsInGeneralPurpose(a.getNewString());if(s!=null&&t.append(s),a.isRemaining()?i=""+a.getRemainingValue():i=null,r===a.getNewPosition())break;r=a.getNewPosition()}while(!0);return t.toString()},n.prototype.isStillNumeric=function(t){if(t+7>this.information.getSize())return t+4<=this.information.getSize();for(var e=t;e<t+3;++e)if(this.information.get(e))return!0;return this.information.get(t+3)},n.prototype.decodeNumeric=function(t){if(t+7>this.information.getSize()){var e=this.extractNumericValueFromBitArray(t,4);return e===0?new Bu(this.information.getSize(),Bu.FNC1,Bu.FNC1):new Bu(this.information.getSize(),e-1,Bu.FNC1)}var r=this.extractNumericValueFromBitArray(t,7),i=(r-8)/11,a=(r-8)%11;return new Bu(t+7,i,a)},n.prototype.extractNumericValueFromBitArray=function(t,e){return n.extractNumericValueFromBitArray(this.information,t,e)},n.extractNumericValueFromBitArray=function(t,e,r){for(var i=0,a=0;a<r;++a)t.get(e+a)&&(i|=1<<r-a-1);return i},n.prototype.decodeGeneralPurposeField=function(t,e){this.buffer.setLengthToZero(),e!=null&&this.buffer.append(e),this.current.setPosition(t);var r=this.parseBlocks();return r!=null&&r.isRemaining()?new pl(this.current.getPosition(),this.buffer.toString(),r.getRemainingValue()):new pl(this.current.getPosition(),this.buffer.toString())},n.prototype.parseBlocks=function(){var t,e;do{var r=this.current.getPosition();this.current.isAlpha()?(e=this.parseAlphaBlock(),t=e.isFinished()):this.current.isIsoIec646()?(e=this.parseIsoIec646Block(),t=e.isFinished()):(e=this.parseNumericBlock(),t=e.isFinished());var i=r!==this.current.getPosition();if(!i&&!t)break}while(!t);return e.getDecodedInformation()},n.prototype.parseNumericBlock=function(){for(;this.isStillNumeric(this.current.getPosition());){var t=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(t.getNewPosition()),t.isFirstDigitFNC1()){var e=void 0;return t.isSecondDigitFNC1()?e=new pl(this.current.getPosition(),this.buffer.toString()):e=new pl(this.current.getPosition(),this.buffer.toString(),t.getSecondDigit()),new gl(!0,e)}if(this.buffer.append(t.getFirstDigit()),t.isSecondDigitFNC1()){var e=new pl(this.current.getPosition(),this.buffer.toString());return new gl(!0,e)}this.buffer.append(t.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new gl(!1)},n.prototype.parseIsoIec646Block=function(){for(;this.isStillIsoIec646(this.current.getPosition());){var t=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(t.getNewPosition()),t.isFNC1()){var e=new pl(this.current.getPosition(),this.buffer.toString());return new gl(!0,e)}this.buffer.append(t.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new gl(!1)},n.prototype.parseAlphaBlock=function(){for(;this.isStillAlpha(this.current.getPosition());){var t=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(t.getNewPosition()),t.isFNC1()){var e=new pl(this.current.getPosition(),this.buffer.toString());return new gl(!0,e)}this.buffer.append(t.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new gl(!1)},n.prototype.isStillIsoIec646=function(t){if(t+5>this.information.getSize())return!1;var e=this.extractNumericValueFromBitArray(t,5);if(e>=5&&e<16)return!0;if(t+7>this.information.getSize())return!1;var r=this.extractNumericValueFromBitArray(t,7);if(r>=64&&r<116)return!0;if(t+8>this.information.getSize())return!1;var i=this.extractNumericValueFromBitArray(t,8);return i>=232&&i<253},n.prototype.decodeIsoIec646=function(t){var e=this.extractNumericValueFromBitArray(t,5);if(e===15)return new Mi(t+5,Mi.FNC1);if(e>=5&&e<15)return new Mi(t+5,"0"+(e-5));var r=this.extractNumericValueFromBitArray(t,7);if(r>=64&&r<90)return new Mi(t+7,""+(r+1));if(r>=90&&r<116)return new Mi(t+7,""+(r+7));var i=this.extractNumericValueFromBitArray(t,8),a;switch(i){case 232:a="!";break;case 233:a='"';break;case 234:a="%";break;case 235:a="&";break;case 236:a="'";break;case 237:a="(";break;case 238:a=")";break;case 239:a="*";break;case 240:a="+";break;case 241:a=",";break;case 242:a="-";break;case 243:a=".";break;case 244:a="/";break;case 245:a=":";break;case 246:a=";";break;case 247:a="<";break;case 248:a="=";break;case 249:a=">";break;case 250:a="?";break;case 251:a="_";break;case 252:a=" ";break;default:throw new xt}return new Mi(t+8,a)},n.prototype.isStillAlpha=function(t){if(t+5>this.information.getSize())return!1;var e=this.extractNumericValueFromBitArray(t,5);if(e>=5&&e<16)return!0;if(t+6>this.information.getSize())return!1;var r=this.extractNumericValueFromBitArray(t,6);return r>=16&&r<63},n.prototype.decodeAlphanumeric=function(t){var e=this.extractNumericValueFromBitArray(t,5);if(e===15)return new Mi(t+5,Mi.FNC1);if(e>=5&&e<15)return new Mi(t+5,"0"+(e-5));var r=this.extractNumericValueFromBitArray(t,6);if(r>=32&&r<58)return new Mi(t+6,""+(r+33));var i;switch(r){case 58:i="*";break;case 59:i=",";break;case 60:i="-";break;case 61:i=".";break;case 62:i="/";break;default:throw new cd("Decoding invalid alphanumeric value: "+r)}return new Mi(t+6,i)},n.prototype.isAlphaTo646ToAlphaLatch=function(t){if(t+1>this.information.getSize())return!1;for(var e=0;e<5&&e+t<this.information.getSize();++e)if(e===2){if(!this.information.get(t+2))return!1}else if(this.information.get(t+e))return!1;return!0},n.prototype.isAlphaOr646ToNumericLatch=function(t){if(t+3>this.information.getSize())return!1;for(var e=t;e<t+3;++e)if(this.information.get(e))return!1;return!0},n.prototype.isNumericToAlphaNumericLatch=function(t){if(t+1>this.information.getSize())return!1;for(var e=0;e<4&&e+t<this.information.getSize();++e)if(this.information.get(t+e))return!1;return!0},n}(),a4=function(){function n(t){this.information=t,this.generalDecoder=new I1(t)}return n.prototype.getInformation=function(){return this.information},n.prototype.getGeneralDecoder=function(){return this.generalDecoder},n}(),dL=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Pi=function(n){dL(t,n);function t(e){return n.call(this,e)||this}return t.prototype.encodeCompressedGtin=function(e,r){e.append("(01)");var i=e.length();e.append("9"),this.encodeCompressedGtinWithoutAI(e,r,i)},t.prototype.encodeCompressedGtinWithoutAI=function(e,r,i){for(var a=0;a<4;++a){var s=this.getGeneralDecoder().extractNumericValueFromBitArray(r+10*a,10);s/100===0&&e.append("0"),s/10===0&&e.append("0"),e.append(s)}t.appendCheckDigit(e,i)},t.appendCheckDigit=function(e,r){for(var i=0,a=0;a<13;a++){var s=e.charAt(a+r).charCodeAt(0)-48;i+=(a&1)===0?3*s:s}i=10-i%10,i===10&&(i=0),e.append(i)},t.GTIN_SIZE=40,t}(a4),gL=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),pL=function(n){gL(t,n);function t(e){return n.call(this,e)||this}return t.prototype.parseInformation=function(){var e=new Xt;e.append("(01)");var r=e.length(),i=this.getGeneralDecoder().extractNumericValueFromBitArray(t.HEADER_SIZE,4);return e.append(i),this.encodeCompressedGtinWithoutAI(e,t.HEADER_SIZE+4,r),this.getGeneralDecoder().decodeAllCodes(e,t.HEADER_SIZE+44)},t.HEADER_SIZE=4,t}(Pi),mL=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),vL=function(n){mL(t,n);function t(e){return n.call(this,e)||this}return t.prototype.parseInformation=function(){var e=new Xt;return this.getGeneralDecoder().decodeAllCodes(e,t.HEADER_SIZE)},t.HEADER_SIZE=5,t}(a4),yL=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),R1=function(n){yL(t,n);function t(e){return n.call(this,e)||this}return t.prototype.encodeCompressedWeight=function(e,r,i){var a=this.getGeneralDecoder().extractNumericValueFromBitArray(r,i);this.addWeightCode(e,a);for(var s=this.checkWeight(a),l=1e5,c=0;c<5;++c)s/l===0&&e.append("0"),l/=10;e.append(s)},t}(Pi),xL=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),s4=function(n){xL(t,n);function t(e){return n.call(this,e)||this}return t.prototype.parseInformation=function(){if(this.getInformation().getSize()!==t.HEADER_SIZE+R1.GTIN_SIZE+t.WEIGHT_SIZE)throw new lt;var e=new Xt;return this.encodeCompressedGtin(e,t.HEADER_SIZE),this.encodeCompressedWeight(e,t.HEADER_SIZE+R1.GTIN_SIZE,t.WEIGHT_SIZE),e.toString()},t.HEADER_SIZE=5,t.WEIGHT_SIZE=15,t}(R1),_L=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),AL=function(n){_L(t,n);function t(e){return n.call(this,e)||this}return t.prototype.addWeightCode=function(e,r){e.append("(3103)")},t.prototype.checkWeight=function(e){return e},t}(s4),wL=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),EL=function(n){wL(t,n);function t(e){return n.call(this,e)||this}return t.prototype.addWeightCode=function(e,r){r<1e4?e.append("(3202)"):e.append("(3203)")},t.prototype.checkWeight=function(e){return e<1e4?e:e-1e4},t}(s4),bL=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),SL=function(n){bL(t,n);function t(e){return n.call(this,e)||this}return t.prototype.parseInformation=function(){if(this.getInformation().getSize()<t.HEADER_SIZE+Pi.GTIN_SIZE)throw new lt;var e=new Xt;this.encodeCompressedGtin(e,t.HEADER_SIZE);var r=this.getGeneralDecoder().extractNumericValueFromBitArray(t.HEADER_SIZE+Pi.GTIN_SIZE,t.LAST_DIGIT_SIZE);e.append("(392"),e.append(r),e.append(")");var i=this.getGeneralDecoder().decodeGeneralPurposeField(t.HEADER_SIZE+Pi.GTIN_SIZE+t.LAST_DIGIT_SIZE,null);return e.append(i.getNewString()),e.toString()},t.HEADER_SIZE=8,t.LAST_DIGIT_SIZE=2,t}(Pi),TL=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),CL=function(n){TL(t,n);function t(e){return n.call(this,e)||this}return t.prototype.parseInformation=function(){if(this.getInformation().getSize()<t.HEADER_SIZE+Pi.GTIN_SIZE)throw new lt;var e=new Xt;this.encodeCompressedGtin(e,t.HEADER_SIZE);var r=this.getGeneralDecoder().extractNumericValueFromBitArray(t.HEADER_SIZE+Pi.GTIN_SIZE,t.LAST_DIGIT_SIZE);e.append("(393"),e.append(r),e.append(")");var i=this.getGeneralDecoder().extractNumericValueFromBitArray(t.HEADER_SIZE+Pi.GTIN_SIZE+t.LAST_DIGIT_SIZE,t.FIRST_THREE_DIGITS_SIZE);i/100===0&&e.append("0"),i/10===0&&e.append("0"),e.append(i);var a=this.getGeneralDecoder().decodeGeneralPurposeField(t.HEADER_SIZE+Pi.GTIN_SIZE+t.LAST_DIGIT_SIZE+t.FIRST_THREE_DIGITS_SIZE,null);return e.append(a.getNewString()),e.toString()},t.HEADER_SIZE=8,t.LAST_DIGIT_SIZE=2,t.FIRST_THREE_DIGITS_SIZE=10,t}(Pi),IL=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Qs=function(n){IL(t,n);function t(e,r,i){var a=n.call(this,e)||this;return a.dateCode=i,a.firstAIdigits=r,a}return t.prototype.parseInformation=function(){if(this.getInformation().getSize()!==t.HEADER_SIZE+t.GTIN_SIZE+t.WEIGHT_SIZE+t.DATE_SIZE)throw new lt;var e=new Xt;return this.encodeCompressedGtin(e,t.HEADER_SIZE),this.encodeCompressedWeight(e,t.HEADER_SIZE+t.GTIN_SIZE,t.WEIGHT_SIZE),this.encodeCompressedDate(e,t.HEADER_SIZE+t.GTIN_SIZE+t.WEIGHT_SIZE),e.toString()},t.prototype.encodeCompressedDate=function(e,r){var i=this.getGeneralDecoder().extractNumericValueFromBitArray(r,t.DATE_SIZE);if(i!==38400){e.append("("),e.append(this.dateCode),e.append(")");var a=i%32;i/=32;var s=i%12+1;i/=12;var l=i;l/10===0&&e.append("0"),e.append(l),s/10===0&&e.append("0"),e.append(s),a/10===0&&e.append("0"),e.append(a)}},t.prototype.addWeightCode=function(e,r){e.append("("),e.append(this.firstAIdigits),e.append(r/1e5),e.append(")")},t.prototype.checkWeight=function(e){return e%1e5},t.HEADER_SIZE=8,t.WEIGHT_SIZE=20,t.DATE_SIZE=16,t}(R1);function RL(n){try{if(n.get(1))return new pL(n);if(!n.get(2))return new vL(n);var t=I1.extractNumericValueFromBitArray(n,1,4);switch(t){case 4:return new AL(n);case 5:return new EL(n)}var e=I1.extractNumericValueFromBitArray(n,1,5);switch(e){case 12:return new SL(n);case 13:return new CL(n)}var r=I1.extractNumericValueFromBitArray(n,1,7);switch(r){case 56:return new Qs(n,"310","11");case 57:return new Qs(n,"320","11");case 58:return new Qs(n,"310","13");case 59:return new Qs(n,"320","13");case 60:return new Qs(n,"310","15");case 61:return new Qs(n,"320","15");case 62:return new Qs(n,"310","17");case 63:return new Qs(n,"320","17")}}catch(i){throw console.log(i),new cd("unknown decoder: "+n)}}var ES=function(){function n(t,e,r,i){this.leftchar=t,this.rightchar=e,this.finderpattern=r,this.maybeLast=i}return n.prototype.mayBeLast=function(){return this.maybeLast},n.prototype.getLeftChar=function(){return this.leftchar},n.prototype.getRightChar=function(){return this.rightchar},n.prototype.getFinderPattern=function(){return this.finderpattern},n.prototype.mustBeLast=function(){return this.rightchar==null},n.prototype.toString=function(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"},n.equals=function(t,e){return t instanceof n?n.equalsOrNull(t.leftchar,e.leftchar)&&n.equalsOrNull(t.rightchar,e.rightchar)&&n.equalsOrNull(t.finderpattern,e.finderpattern):!1},n.equalsOrNull=function(t,e){return t===null?e===null:n.equals(t,e)},n.prototype.hashCode=function(){var t=this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue();return t},n}(),DL=function(){function n(t,e,r){this.pairs=t,this.rowNumber=e,this.wasReversed=r}return n.prototype.getPairs=function(){return this.pairs},n.prototype.getRowNumber=function(){return this.rowNumber},n.prototype.isReversed=function(){return this.wasReversed},n.prototype.isEquivalent=function(t){return this.checkEqualitity(this,t)},n.prototype.toString=function(){return"{ "+this.pairs+" }"},n.prototype.equals=function(t,e){return t instanceof n?this.checkEqualitity(t,e)&&t.wasReversed===e.wasReversed:!1},n.prototype.checkEqualitity=function(t,e){if(!(!t||!e)){var r;return t.forEach(function(i,a){e.forEach(function(s){i.getLeftChar().getValue()===s.getLeftChar().getValue()&&i.getRightChar().getValue()===s.getRightChar().getValue()&&i.getFinderPatter().getValue()===s.getFinderPatter().getValue()&&(r=!0)})}),r}},n}(),OL=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Js=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},ML=function(n){OL(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.pairs=new Array(t.MAX_PAIRS),e.rows=new Array,e.startEnd=[2],e}return t.prototype.decodeRow=function(e,r,i){this.pairs.length=0,this.startFromEven=!1;try{return t.constructResult(this.decodeRow2pairs(e,r))}catch{}return this.pairs.length=0,this.startFromEven=!0,t.constructResult(this.decodeRow2pairs(e,r))},t.prototype.reset=function(){this.pairs.length=0,this.rows.length=0},t.prototype.decodeRow2pairs=function(e,r){for(var i=!1;!i;)try{this.pairs.push(this.retrieveNextPair(r,this.pairs,e))}catch(l){if(l instanceof lt){if(!this.pairs.length)throw new lt;i=!0}}if(this.checkChecksum())return this.pairs;var a;if(this.rows.length?a=!0:a=!1,this.storeRow(e,!1),a){var s=this.checkRowsBoolean(!1);if(s!=null||(s=this.checkRowsBoolean(!0),s!=null))return s}throw new lt},t.prototype.checkRowsBoolean=function(e){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,e&&(this.rows=this.rows.reverse());var r=null;try{r=this.checkRows(new Array,0)}catch(i){console.log(i)}return e&&(this.rows=this.rows.reverse()),r},t.prototype.checkRows=function(e,r){for(var i,a,s=r;s<this.rows.length;s++){var l=this.rows[s];this.pairs.length=0;try{for(var c=(i=void 0,Js(e)),f=c.next();!f.done;f=c.next()){var d=f.value;this.pairs.push(d.getPairs())}}catch(m){i={error:m}}finally{try{f&&!f.done&&(a=c.return)&&a.call(c)}finally{if(i)throw i.error}}if(this.pairs.push(l.getPairs()),!!t.isValidSequence(this.pairs)){if(this.checkChecksum())return this.pairs;var g=new Array(e);g.push(l);try{return this.checkRows(g,s+1)}catch(m){console.log(m)}}}throw new lt},t.isValidSequence=function(e){var r,i;try{for(var a=Js(t.FINDER_PATTERN_SEQUENCES),s=a.next();!s.done;s=a.next()){var l=s.value;if(!(e.length>l.length)){for(var c=!0,f=0;f<e.length;f++)if(e[f].getFinderPattern().getValue()!==l[f]){c=!1;break}if(c)return!0}}}catch(d){r={error:d}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}return!1},t.prototype.storeRow=function(e,r){for(var i=0,a=!1,s=!1;i<this.rows.length;){var l=this.rows[i];if(l.getRowNumber()>e){s=l.isEquivalent(this.pairs);break}a=l.isEquivalent(this.pairs),i++}s||a||t.isPartialRow(this.pairs,this.rows)||(this.rows.push(i,new DL(this.pairs,e,r)),this.removePartialRows(this.pairs,this.rows))},t.prototype.removePartialRows=function(e,r){var i,a,s,l,c,f;try{for(var d=Js(r),g=d.next();!g.done;g=d.next()){var m=g.value;if(m.getPairs().length!==e.length){var v=!0;try{for(var _=(s=void 0,Js(m.getPairs())),w=_.next();!w.done;w=_.next()){var b=w.value,S=!1;try{for(var C=(c=void 0,Js(e)),I=C.next();!I.done;I=C.next()){var M=I.value;if(ES.equals(b,M)){S=!0;break}}}catch(N){c={error:N}}finally{try{I&&!I.done&&(f=C.return)&&f.call(C)}finally{if(c)throw c.error}}S||(v=!1)}}catch(N){s={error:N}}finally{try{w&&!w.done&&(l=_.return)&&l.call(_)}finally{if(s)throw s.error}}}}}catch(N){i={error:N}}finally{try{g&&!g.done&&(a=d.return)&&a.call(d)}finally{if(i)throw i.error}}},t.isPartialRow=function(e,r){var i,a,s,l,c,f;try{for(var d=Js(r),g=d.next();!g.done;g=d.next()){var m=g.value,v=!0;try{for(var _=(s=void 0,Js(e)),w=_.next();!w.done;w=_.next()){var b=w.value,S=!1;try{for(var C=(c=void 0,Js(m.getPairs())),I=C.next();!I.done;I=C.next()){var M=I.value;if(b.equals(M)){S=!0;break}}}catch(N){c={error:N}}finally{try{I&&!I.done&&(f=C.return)&&f.call(C)}finally{if(c)throw c.error}}if(!S){v=!1;break}}}catch(N){s={error:N}}finally{try{w&&!w.done&&(l=_.return)&&l.call(_)}finally{if(s)throw s.error}}if(v)return!0}}catch(N){i={error:N}}finally{try{g&&!g.done&&(a=d.return)&&a.call(d)}finally{if(i)throw i.error}}return!1},t.prototype.getRows=function(){return this.rows},t.constructResult=function(e){var r=lL.buildBitArray(e),i=RL(r),a=i.parseInformation(),s=e[0].getFinderPattern().getResultPoints(),l=e[e.length-1].getFinderPattern().getResultPoints(),c=[s[0],s[1],l[0],l[1]];return new pr(a,null,null,c,Pt.RSS_EXPANDED,null)},t.prototype.checkChecksum=function(){var e=this.pairs.get(0),r=e.getLeftChar(),i=e.getRightChar();if(i===null)return!1;for(var a=i.getChecksumPortion(),s=2,l=1;l<this.pairs.size();++l){var c=this.pairs.get(l);a+=c.getLeftChar().getChecksumPortion(),s++;var f=c.getRightChar();f!=null&&(a+=f.getChecksumPortion(),s++)}a%=211;var d=211*(s-4)+a;return d===r.getValue()},t.getNextSecondBar=function(e,r){var i;return e.get(r)?(i=e.getNextUnset(r),i=e.getNextSet(i)):(i=e.getNextSet(r),i=e.getNextUnset(i)),i},t.prototype.retrieveNextPair=function(e,r,i){var a=r.length%2===0;this.startFromEven&&(a=!a);var s,l=!0,c=-1;do this.findNextPair(e,r,c),s=this.parseFoundFinderPattern(e,i,a),s===null?c=t.getNextSecondBar(e,this.startEnd[0]):l=!1;while(l);var f=this.decodeDataCharacter(e,s,a,!0);if(!this.isEmptyPair(r)&&r[r.length-1].mustBeLast())throw new lt;var d;try{d=this.decodeDataCharacter(e,s,a,!1)}catch(g){d=null,console.log(g)}return new ES(f,d,s,!0)},t.prototype.isEmptyPair=function(e){return e.length===0},t.prototype.findNextPair=function(e,r,i){var a=this.getDecodeFinderCounters();a[0]=0,a[1]=0,a[2]=0,a[3]=0;var s=e.getSize(),l;if(i>=0)l=i;else if(this.isEmptyPair(r))l=0;else{var c=r[r.length-1];l=c.getFinderPattern().getStartEnd()[1]}var f=r.length%2!==0;this.startFromEven&&(f=!f);for(var d=!1;l<s&&(d=!e.get(l),!!d);)l++;for(var g=0,m=l,v=l;v<s;v++)if(e.get(v)!==d)a[g]++;else{if(g===3){if(f&&t.reverseCounters(a),t.isFinderPattern(a)){this.startEnd[0]=m,this.startEnd[1]=v;return}f&&t.reverseCounters(a),m+=a[0]+a[1],a[0]=a[2],a[1]=a[3],a[2]=0,a[3]=0,g--}else g++;a[g]=1,d=!d}throw new lt},t.reverseCounters=function(e){for(var r=e.length,i=0;i<r/2;++i){var a=e[i];e[i]=e[r-i-1],e[r-i-1]=a}},t.prototype.parseFoundFinderPattern=function(e,r,i){var a,s,l;if(i){for(var c=this.startEnd[0]-1;c>=0&&!e.get(c);)c--;c++,a=this.startEnd[0]-c,s=c,l=this.startEnd[1]}else s=this.startEnd[0],l=e.getNextUnset(this.startEnd[1]+1),a=l-this.startEnd[1];var f=this.getDecodeFinderCounters();Fe.arraycopy(f,0,f,1,f.length-1),f[0]=a;var d;try{d=this.parseFinderValue(f,t.FINDER_PATTERNS)}catch{return null}return new i4(d,[s,l],s,l,r)},t.prototype.decodeDataCharacter=function(e,r,i,a){for(var s=this.getDataCharacterCounters(),l=0;l<s.length;l++)s[l]=0;if(a)t.recordPatternInReverse(e,r.getStartEnd()[0],s);else{t.recordPattern(e,r.getStartEnd()[1],s);for(var c=0,f=s.length-1;c<f;c++,f--){var d=s[c];s[c]=s[f],s[f]=d}}var g=17,m=fe.sum(new Int32Array(s))/g,v=(r.getStartEnd()[1]-r.getStartEnd()[0])/15;if(Math.abs(m-v)/v>.3)throw new lt;for(var _=this.getOddCounts(),w=this.getEvenCounts(),b=this.getOddRoundingErrors(),S=this.getEvenRoundingErrors(),c=0;c<s.length;c++){var C=1*s[c]/m,I=C+.5;if(I<1){if(C<.3)throw new lt;I=1}else if(I>8){if(C>8.7)throw new lt;I=8}var M=c/2;(c&1)===0?(_[M]=I,b[M]=C-I):(w[M]=I,S[M]=C-I)}this.adjustOddEvenCounts(g);for(var N=4*r.getValue()+(i?0:2)+(a?0:1)-1,k=0,O=0,c=_.length-1;c>=0;c--){if(t.isNotA1left(r,i,a)){var R=t.WEIGHTS[N][2*c];O+=_[c]*R}k+=_[c]}for(var D=0,c=w.length-1;c>=0;c--)if(t.isNotA1left(r,i,a)){var R=t.WEIGHTS[N][2*c+1];D+=w[c]*R}var L=O+D;if((k&1)!==0||k>13||k<4)throw new lt;var F=(13-k)/2,U=t.SYMBOL_WIDEST[F],B=9-U,rt=tc.getRSSvalue(_,U,!0),vt=tc.getRSSvalue(w,B,!1),q=t.EVEN_TOTAL_SUBSET[F],Z=t.GSUM[F],it=rt*q+vt+Z;return new Q1(it,L)},t.isNotA1left=function(e,r,i){return!(e.getValue()===0&&r&&i)},t.prototype.adjustOddEvenCounts=function(e){var r=fe.sum(new Int32Array(this.getOddCounts())),i=fe.sum(new Int32Array(this.getEvenCounts())),a=!1,s=!1;r>13?s=!0:r<4&&(a=!0);var l=!1,c=!1;i>13?c=!0:i<4&&(l=!0);var f=r+i-e,d=(r&1)===1,g=(i&1)===0;if(f===1)if(d){if(g)throw new lt;s=!0}else{if(!g)throw new lt;c=!0}else if(f===-1)if(d){if(g)throw new lt;a=!0}else{if(!g)throw new lt;l=!0}else if(f===0){if(d){if(!g)throw new lt;r<i?(a=!0,c=!0):(s=!0,l=!0)}else if(g)throw new lt}else throw new lt;if(a){if(s)throw new lt;t.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(s&&t.decrement(this.getOddCounts(),this.getOddRoundingErrors()),l){if(c)throw new lt;t.increment(this.getEvenCounts(),this.getOddRoundingErrors())}c&&t.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},t.SYMBOL_WIDEST=[7,5,4,3,1],t.EVEN_TOTAL_SUBSET=[4,20,52,104,204],t.GSUM=[0,348,1388,2948,3988],t.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],t.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],t.FINDER_PAT_A=0,t.FINDER_PAT_B=1,t.FINDER_PAT_C=2,t.FINDER_PAT_D=3,t.FINDER_PAT_E=4,t.FINDER_PAT_F=5,t.FINDER_PATTERN_SEQUENCES=[[t.FINDER_PAT_A,t.FINDER_PAT_A],[t.FINDER_PAT_A,t.FINDER_PAT_B,t.FINDER_PAT_B],[t.FINDER_PAT_A,t.FINDER_PAT_C,t.FINDER_PAT_B,t.FINDER_PAT_D],[t.FINDER_PAT_A,t.FINDER_PAT_E,t.FINDER_PAT_B,t.FINDER_PAT_D,t.FINDER_PAT_C],[t.FINDER_PAT_A,t.FINDER_PAT_E,t.FINDER_PAT_B,t.FINDER_PAT_D,t.FINDER_PAT_D,t.FINDER_PAT_F],[t.FINDER_PAT_A,t.FINDER_PAT_E,t.FINDER_PAT_B,t.FINDER_PAT_D,t.FINDER_PAT_E,t.FINDER_PAT_F,t.FINDER_PAT_F],[t.FINDER_PAT_A,t.FINDER_PAT_A,t.FINDER_PAT_B,t.FINDER_PAT_B,t.FINDER_PAT_C,t.FINDER_PAT_C,t.FINDER_PAT_D,t.FINDER_PAT_D],[t.FINDER_PAT_A,t.FINDER_PAT_A,t.FINDER_PAT_B,t.FINDER_PAT_B,t.FINDER_PAT_C,t.FINDER_PAT_C,t.FINDER_PAT_D,t.FINDER_PAT_E,t.FINDER_PAT_E],[t.FINDER_PAT_A,t.FINDER_PAT_A,t.FINDER_PAT_B,t.FINDER_PAT_B,t.FINDER_PAT_C,t.FINDER_PAT_C,t.FINDER_PAT_D,t.FINDER_PAT_E,t.FINDER_PAT_F,t.FINDER_PAT_F],[t.FINDER_PAT_A,t.FINDER_PAT_A,t.FINDER_PAT_B,t.FINDER_PAT_B,t.FINDER_PAT_C,t.FINDER_PAT_D,t.FINDER_PAT_D,t.FINDER_PAT_E,t.FINDER_PAT_E,t.FINDER_PAT_F,t.FINDER_PAT_F]],t.MAX_PAIRS=11,t}(yl),NL=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),PL=function(n){NL(t,n);function t(e,r,i){var a=n.call(this,e,r)||this;return a.count=0,a.finderPattern=i,a}return t.prototype.getFinderPattern=function(){return this.finderPattern},t.prototype.getCount=function(){return this.count},t.prototype.incrementCount=function(){this.count++},t}(Q1),kL=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Nv=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},bS=function(n){kL(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.possibleLeftPairs=[],e.possibleRightPairs=[],e}return t.prototype.decodeRow=function(e,r,i){var a,s,l,c,f=this.decodePair(r,!1,e,i);t.addOrTally(this.possibleLeftPairs,f),r.reverse();var d=this.decodePair(r,!0,e,i);t.addOrTally(this.possibleRightPairs,d),r.reverse();try{for(var g=Nv(this.possibleLeftPairs),m=g.next();!m.done;m=g.next()){var v=m.value;if(v.getCount()>1)try{for(var _=(l=void 0,Nv(this.possibleRightPairs)),w=_.next();!w.done;w=_.next()){var b=w.value;if(b.getCount()>1&&t.checkChecksum(v,b))return t.constructResult(v,b)}}catch(S){l={error:S}}finally{try{w&&!w.done&&(c=_.return)&&c.call(_)}finally{if(l)throw l.error}}}}catch(S){a={error:S}}finally{try{m&&!m.done&&(s=g.return)&&s.call(g)}finally{if(a)throw a.error}}throw new lt},t.addOrTally=function(e,r){var i,a;if(r!=null){var s=!1;try{for(var l=Nv(e),c=l.next();!c.done;c=l.next()){var f=c.value;if(f.getValue()===r.getValue()){f.incrementCount(),s=!0;break}}}catch(d){i={error:d}}finally{try{c&&!c.done&&(a=l.return)&&a.call(l)}finally{if(i)throw i.error}}s||e.push(r)}},t.prototype.reset=function(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0},t.constructResult=function(e,r){for(var i=4537077*e.getValue()+r.getValue(),a=new String(i).toString(),s=new Xt,l=13-a.length;l>0;l--)s.append("0");s.append(a);for(var c=0,l=0;l<13;l++){var f=s.charAt(l).charCodeAt(0)-48;c+=(l&1)===0?3*f:f}c=10-c%10,c===10&&(c=0),s.append(c.toString());var d=e.getFinderPattern().getResultPoints(),g=r.getFinderPattern().getResultPoints();return new pr(s.toString(),null,0,[d[0],d[1],g[0],g[1]],Pt.RSS_14,new Date().getTime())},t.checkChecksum=function(e,r){var i=(e.getChecksumPortion()+16*r.getChecksumPortion())%79,a=9*e.getFinderPattern().getValue()+r.getFinderPattern().getValue();return a>72&&a--,a>8&&a--,i===a},t.prototype.decodePair=function(e,r,i,a){try{var s=this.findFinderPattern(e,r),l=this.parseFoundFinderPattern(e,i,r,s),c=a==null?null:a.get(Xe.NEED_RESULT_POINT_CALLBACK);if(c!=null){var f=(s[0]+s[1])/2;r&&(f=e.getSize()-1-f),c.foundPossibleResultPoint(new Ct(f,i))}var d=this.decodeDataCharacter(e,l,!0),g=this.decodeDataCharacter(e,l,!1);return new PL(1597*d.getValue()+g.getValue(),d.getChecksumPortion()+4*g.getChecksumPortion(),l)}catch{return null}},t.prototype.decodeDataCharacter=function(e,r,i){for(var a=this.getDataCharacterCounters(),s=0;s<a.length;s++)a[s]=0;if(i)On.recordPatternInReverse(e,r.getStartEnd()[0],a);else{On.recordPattern(e,r.getStartEnd()[1]+1,a);for(var l=0,c=a.length-1;l<c;l++,c--){var f=a[l];a[l]=a[c],a[c]=f}}for(var d=i?16:15,g=fe.sum(new Int32Array(a))/d,m=this.getOddCounts(),v=this.getEvenCounts(),_=this.getOddRoundingErrors(),w=this.getEvenRoundingErrors(),l=0;l<a.length;l++){var b=a[l]/g,S=Math.floor(b+.5);S<1?S=1:S>8&&(S=8);var C=Math.floor(l/2);(l&1)===0?(m[C]=S,_[C]=b-S):(v[C]=S,w[C]=b-S)}this.adjustOddEvenCounts(i,d);for(var I=0,M=0,l=m.length-1;l>=0;l--)M*=9,M+=m[l],I+=m[l];for(var N=0,k=0,l=v.length-1;l>=0;l--)N*=9,N+=v[l],k+=v[l];var O=M+3*N;if(i){if((I&1)!==0||I>12||I<4)throw new lt;var R=(12-I)/2,D=t.OUTSIDE_ODD_WIDEST[R],L=9-D,F=tc.getRSSvalue(m,D,!1),U=tc.getRSSvalue(v,L,!0),B=t.OUTSIDE_EVEN_TOTAL_SUBSET[R],rt=t.OUTSIDE_GSUM[R];return new Q1(F*B+U+rt,O)}else{if((k&1)!==0||k>10||k<4)throw new lt;var R=(10-k)/2,D=t.INSIDE_ODD_WIDEST[R],L=9-D,F=tc.getRSSvalue(m,D,!0),U=tc.getRSSvalue(v,L,!1),vt=t.INSIDE_ODD_TOTAL_SUBSET[R],rt=t.INSIDE_GSUM[R];return new Q1(U*vt+F+rt,O)}},t.prototype.findFinderPattern=function(e,r){var i=this.getDecodeFinderCounters();i[0]=0,i[1]=0,i[2]=0,i[3]=0;for(var a=e.getSize(),s=!1,l=0;l<a&&(s=!e.get(l),r!==s);)l++;for(var c=0,f=l,d=l;d<a;d++)if(e.get(d)!==s)i[c]++;else{if(c===3){if(yl.isFinderPattern(i))return[f,d];f+=i[0]+i[1],i[0]=i[2],i[1]=i[3],i[2]=0,i[3]=0,c--}else c++;i[c]=1,s=!s}throw new lt},t.prototype.parseFoundFinderPattern=function(e,r,i,a){for(var s=e.get(a[0]),l=a[0]-1;l>=0&&s!==e.get(l);)l--;l++;var c=a[0]-l,f=this.getDecodeFinderCounters(),d=new Int32Array(f.length);Fe.arraycopy(f,0,d,1,f.length-1),d[0]=c;var g=this.parseFinderValue(d,t.FINDER_PATTERNS),m=l,v=a[1];return i&&(m=e.getSize()-1-m,v=e.getSize()-1-v),new i4(g,[l,a[1]],m,v,r)},t.prototype.adjustOddEvenCounts=function(e,r){var i=fe.sum(new Int32Array(this.getOddCounts())),a=fe.sum(new Int32Array(this.getEvenCounts())),s=!1,l=!1,c=!1,f=!1;e?(i>12?l=!0:i<4&&(s=!0),a>12?f=!0:a<4&&(c=!0)):(i>11?l=!0:i<5&&(s=!0),a>10?f=!0:a<4&&(c=!0));var d=i+a-r,g=(i&1)===(e?1:0),m=(a&1)===1;if(d===1)if(g){if(m)throw new lt;l=!0}else{if(!m)throw new lt;f=!0}else if(d===-1)if(g){if(m)throw new lt;s=!0}else{if(!m)throw new lt;c=!0}else if(d===0){if(g){if(!m)throw new lt;i<a?(s=!0,f=!0):(l=!0,c=!0)}else if(m)throw new lt}else throw new lt;if(s){if(l)throw new lt;yl.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(l&&yl.decrement(this.getOddCounts(),this.getOddRoundingErrors()),c){if(f)throw new lt;yl.increment(this.getEvenCounts(),this.getOddRoundingErrors())}f&&yl.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},t.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],t.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],t.OUTSIDE_GSUM=[0,161,961,2015,2715],t.INSIDE_GSUM=[0,336,1036,1516],t.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],t.INSIDE_ODD_WIDEST=[2,4,6,8],t.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])],t}(yl),LL=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),ph=function(n){LL(t,n);function t(e){var r=n.call(this)||this;r.readers=[];var i=e?e.get(Xe.POSSIBLE_FORMATS):null,a=e&&e.get(Xe.ASSUME_CODE_39_CHECK_DIGIT)!==void 0,s=e&&e.get(Xe.ENABLE_CODE_39_EXTENDED_MODE)!==void 0;return i&&((i.includes(Pt.EAN_13)||i.includes(Pt.UPC_A)||i.includes(Pt.EAN_8)||i.includes(Pt.UPC_E))&&r.readers.push(new Mv(e)),i.includes(Pt.CODE_39)&&r.readers.push(new gS(a,s)),i.includes(Pt.CODE_93)&&r.readers.push(new pS),i.includes(Pt.CODE_128)&&r.readers.push(new dS),i.includes(Pt.ITF)&&r.readers.push(new mS),i.includes(Pt.CODABAR)&&r.readers.push(new iL),i.includes(Pt.RSS_14)&&r.readers.push(new bS),i.includes(Pt.RSS_EXPANDED)&&(console.warn("RSS Expanded reader IS NOT ready for production yet! use at your own risk."),r.readers.push(new ML))),r.readers.length===0&&(r.readers.push(new Mv(e)),r.readers.push(new gS),r.readers.push(new pS),r.readers.push(new Mv(e)),r.readers.push(new dS),r.readers.push(new mS),r.readers.push(new bS)),r}return t.prototype.decodeRow=function(e,r,i){for(var a=0;a<this.readers.length;a++)try{return this.readers[a].decodeRow(e,r,i)}catch{}throw new lt},t.prototype.reset=function(){this.readers.forEach(function(e){return e.reset()})},t}(On),BL=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}();(function(n){BL(t,n);function t(e,r){return e===void 0&&(e=500),n.call(this,new ph(r),e,r)||this}return t})(Lc);var SS=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},we=function(){function n(t,e,r){this.ecCodewords=t,this.ecBlocks=[e],r&&this.ecBlocks.push(r)}return n.prototype.getECCodewords=function(){return this.ecCodewords},n.prototype.getECBlocks=function(){return this.ecBlocks},n}(),me=function(){function n(t,e){this.count=t,this.dataCodewords=e}return n.prototype.getCount=function(){return this.count},n.prototype.getDataCodewords=function(){return this.dataCodewords},n}(),VL=function(){function n(t,e,r,i,a,s){var l,c;this.versionNumber=t,this.symbolSizeRows=e,this.symbolSizeColumns=r,this.dataRegionSizeRows=i,this.dataRegionSizeColumns=a,this.ecBlocks=s;var f=0,d=s.getECCodewords(),g=s.getECBlocks();try{for(var m=SS(g),v=m.next();!v.done;v=m.next()){var _=v.value;f+=_.getCount()*(_.getDataCodewords()+d)}}catch(w){l={error:w}}finally{try{v&&!v.done&&(c=m.return)&&c.call(m)}finally{if(l)throw l.error}}this.totalCodewords=f}return n.prototype.getVersionNumber=function(){return this.versionNumber},n.prototype.getSymbolSizeRows=function(){return this.symbolSizeRows},n.prototype.getSymbolSizeColumns=function(){return this.symbolSizeColumns},n.prototype.getDataRegionSizeRows=function(){return this.dataRegionSizeRows},n.prototype.getDataRegionSizeColumns=function(){return this.dataRegionSizeColumns},n.prototype.getTotalCodewords=function(){return this.totalCodewords},n.prototype.getECBlocks=function(){return this.ecBlocks},n.getVersionForDimensions=function(t,e){var r,i;if((t&1)!==0||(e&1)!==0)throw new xt;try{for(var a=SS(n.VERSIONS),s=a.next();!s.done;s=a.next()){var l=s.value;if(l.symbolSizeRows===t&&l.symbolSizeColumns===e)return l}}catch(c){r={error:c}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}throw new xt},n.prototype.toString=function(){return""+this.versionNumber},n.buildVersions=function(){return[new n(1,10,10,8,8,new we(5,new me(1,3))),new n(2,12,12,10,10,new we(7,new me(1,5))),new n(3,14,14,12,12,new we(10,new me(1,8))),new n(4,16,16,14,14,new we(12,new me(1,12))),new n(5,18,18,16,16,new we(14,new me(1,18))),new n(6,20,20,18,18,new we(18,new me(1,22))),new n(7,22,22,20,20,new we(20,new me(1,30))),new n(8,24,24,22,22,new we(24,new me(1,36))),new n(9,26,26,24,24,new we(28,new me(1,44))),new n(10,32,32,14,14,new we(36,new me(1,62))),new n(11,36,36,16,16,new we(42,new me(1,86))),new n(12,40,40,18,18,new we(48,new me(1,114))),new n(13,44,44,20,20,new we(56,new me(1,144))),new n(14,48,48,22,22,new we(68,new me(1,174))),new n(15,52,52,24,24,new we(42,new me(2,102))),new n(16,64,64,14,14,new we(56,new me(2,140))),new n(17,72,72,16,16,new we(36,new me(4,92))),new n(18,80,80,18,18,new we(48,new me(4,114))),new n(19,88,88,20,20,new we(56,new me(4,144))),new n(20,96,96,22,22,new we(68,new me(4,174))),new n(21,104,104,24,24,new we(56,new me(6,136))),new n(22,120,120,18,18,new we(68,new me(6,175))),new n(23,132,132,20,20,new we(62,new me(8,163))),new n(24,144,144,22,22,new we(62,new me(8,156),new me(2,155))),new n(25,8,18,6,16,new we(7,new me(1,5))),new n(26,8,32,6,14,new we(11,new me(1,10))),new n(27,12,26,10,24,new we(14,new me(1,16))),new n(28,12,36,10,16,new we(18,new me(1,22))),new n(29,16,36,14,16,new we(24,new me(1,32))),new n(30,16,48,14,22,new we(28,new me(1,49)))]},n.VERSIONS=n.buildVersions(),n}(),FL=function(){function n(t){var e=t.getHeight();if(e<8||e>144||(e&1)!==0)throw new xt;this.version=n.readVersion(t),this.mappingBitMatrix=this.extractDataRegion(t),this.readMappingMatrix=new Aa(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}return n.prototype.getVersion=function(){return this.version},n.readVersion=function(t){var e=t.getHeight(),r=t.getWidth();return VL.getVersionForDimensions(e,r)},n.prototype.readCodewords=function(){var t=new Int8Array(this.version.getTotalCodewords()),e=0,r=4,i=0,a=this.mappingBitMatrix.getHeight(),s=this.mappingBitMatrix.getWidth(),l=!1,c=!1,f=!1,d=!1;do if(r===a&&i===0&&!l)t[e++]=this.readCorner1(a,s)&255,r-=2,i+=2,l=!0;else if(r===a-2&&i===0&&(s&3)!==0&&!c)t[e++]=this.readCorner2(a,s)&255,r-=2,i+=2,c=!0;else if(r===a+4&&i===2&&(s&7)===0&&!f)t[e++]=this.readCorner3(a,s)&255,r-=2,i+=2,f=!0;else if(r===a-2&&i===0&&(s&7)===4&&!d)t[e++]=this.readCorner4(a,s)&255,r-=2,i+=2,d=!0;else{do r<a&&i>=0&&!this.readMappingMatrix.get(i,r)&&(t[e++]=this.readUtah(r,i,a,s)&255),r-=2,i+=2;while(r>=0&&i<s);r+=1,i+=3;do r>=0&&i<s&&!this.readMappingMatrix.get(i,r)&&(t[e++]=this.readUtah(r,i,a,s)&255),r+=2,i-=2;while(r<a&&i>=0);r+=3,i+=1}while(r<a||i<s);if(e!==this.version.getTotalCodewords())throw new xt;return t},n.prototype.readModule=function(t,e,r,i){return t<0&&(t+=r,e+=4-(r+4&7)),e<0&&(e+=i,t+=4-(i+4&7)),this.readMappingMatrix.set(e,t),this.mappingBitMatrix.get(e,t)},n.prototype.readUtah=function(t,e,r,i){var a=0;return this.readModule(t-2,e-2,r,i)&&(a|=1),a<<=1,this.readModule(t-2,e-1,r,i)&&(a|=1),a<<=1,this.readModule(t-1,e-2,r,i)&&(a|=1),a<<=1,this.readModule(t-1,e-1,r,i)&&(a|=1),a<<=1,this.readModule(t-1,e,r,i)&&(a|=1),a<<=1,this.readModule(t,e-2,r,i)&&(a|=1),a<<=1,this.readModule(t,e-1,r,i)&&(a|=1),a<<=1,this.readModule(t,e,r,i)&&(a|=1),a},n.prototype.readCorner1=function(t,e){var r=0;return this.readModule(t-1,0,t,e)&&(r|=1),r<<=1,this.readModule(t-1,1,t,e)&&(r|=1),r<<=1,this.readModule(t-1,2,t,e)&&(r|=1),r<<=1,this.readModule(0,e-2,t,e)&&(r|=1),r<<=1,this.readModule(0,e-1,t,e)&&(r|=1),r<<=1,this.readModule(1,e-1,t,e)&&(r|=1),r<<=1,this.readModule(2,e-1,t,e)&&(r|=1),r<<=1,this.readModule(3,e-1,t,e)&&(r|=1),r},n.prototype.readCorner2=function(t,e){var r=0;return this.readModule(t-3,0,t,e)&&(r|=1),r<<=1,this.readModule(t-2,0,t,e)&&(r|=1),r<<=1,this.readModule(t-1,0,t,e)&&(r|=1),r<<=1,this.readModule(0,e-4,t,e)&&(r|=1),r<<=1,this.readModule(0,e-3,t,e)&&(r|=1),r<<=1,this.readModule(0,e-2,t,e)&&(r|=1),r<<=1,this.readModule(0,e-1,t,e)&&(r|=1),r<<=1,this.readModule(1,e-1,t,e)&&(r|=1),r},n.prototype.readCorner3=function(t,e){var r=0;return this.readModule(t-1,0,t,e)&&(r|=1),r<<=1,this.readModule(t-1,e-1,t,e)&&(r|=1),r<<=1,this.readModule(0,e-3,t,e)&&(r|=1),r<<=1,this.readModule(0,e-2,t,e)&&(r|=1),r<<=1,this.readModule(0,e-1,t,e)&&(r|=1),r<<=1,this.readModule(1,e-3,t,e)&&(r|=1),r<<=1,this.readModule(1,e-2,t,e)&&(r|=1),r<<=1,this.readModule(1,e-1,t,e)&&(r|=1),r},n.prototype.readCorner4=function(t,e){var r=0;return this.readModule(t-3,0,t,e)&&(r|=1),r<<=1,this.readModule(t-2,0,t,e)&&(r|=1),r<<=1,this.readModule(t-1,0,t,e)&&(r|=1),r<<=1,this.readModule(0,e-2,t,e)&&(r|=1),r<<=1,this.readModule(0,e-1,t,e)&&(r|=1),r<<=1,this.readModule(1,e-1,t,e)&&(r|=1),r<<=1,this.readModule(2,e-1,t,e)&&(r|=1),r<<=1,this.readModule(3,e-1,t,e)&&(r|=1),r},n.prototype.extractDataRegion=function(t){var e=this.version.getSymbolSizeRows(),r=this.version.getSymbolSizeColumns();if(t.getHeight()!==e)throw new kt("Dimension of bitMatrix must match the version size");for(var i=this.version.getDataRegionSizeRows(),a=this.version.getDataRegionSizeColumns(),s=e/i|0,l=r/a|0,c=s*i,f=l*a,d=new Aa(f,c),g=0;g<s;++g)for(var m=g*i,v=0;v<l;++v)for(var _=v*a,w=0;w<i;++w)for(var b=g*(i+2)+1+w,S=m+w,C=0;C<a;++C){var I=v*(a+2)+1+C;if(t.get(I,b)){var M=_+C;d.set(M,S)}}return d},n}(),TS=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},UL=function(){function n(t,e){this.numDataCodewords=t,this.codewords=e}return n.getDataBlocks=function(t,e){var r,i,a,s,l=e.getECBlocks(),c=0,f=l.getECBlocks();try{for(var d=TS(f),g=d.next();!g.done;g=d.next()){var m=g.value;c+=m.getCount()}}catch(rt){r={error:rt}}finally{try{g&&!g.done&&(i=d.return)&&i.call(d)}finally{if(r)throw r.error}}var v=new Array(c),_=0;try{for(var w=TS(f),b=w.next();!b.done;b=w.next())for(var m=b.value,S=0;S<m.getCount();S++){var C=m.getDataCodewords(),I=l.getECCodewords()+C;v[_++]=new n(C,new Uint8Array(I))}}catch(rt){a={error:rt}}finally{try{b&&!b.done&&(s=w.return)&&s.call(w)}finally{if(a)throw a.error}}for(var M=v[0].codewords.length,N=M-l.getECCodewords(),k=N-1,O=0,S=0;S<k;S++)for(var R=0;R<_;R++)v[R].codewords[S]=t[O++];for(var D=e.getVersionNumber()===24,L=D?8:_,R=0;R<L;R++)v[R].codewords[N-1]=t[O++];for(var F=v[0].codewords.length,S=N;S<F;S++)for(var R=0;R<_;R++){var U=D?(R+8)%_:R,B=D&&U>7?S-1:S;v[U].codewords[B]=t[O++]}if(O!==t.length)throw new kt;return v},n.prototype.getNumDataCodewords=function(){return this.numDataCodewords},n.prototype.getCodewords=function(){return this.codewords},n}(),o4=function(){function n(t){this.bytes=t,this.byteOffset=0,this.bitOffset=0}return n.prototype.getBitOffset=function(){return this.bitOffset},n.prototype.getByteOffset=function(){return this.byteOffset},n.prototype.readBits=function(t){if(t<1||t>32||t>this.available())throw new kt(""+t);var e=0,r=this.bitOffset,i=this.byteOffset,a=this.bytes;if(r>0){var s=8-r,l=t<s?t:s,c=s-l,f=255>>8-l<<c;e=(a[i]&f)>>c,t-=l,r+=l,r===8&&(r=0,i++)}if(t>0){for(;t>=8;)e=e<<8|a[i]&255,i++,t-=8;if(t>0){var c=8-t,f=255>>c<<c;e=e<<t|(a[i]&f)>>c,r+=t}}return this.bitOffset=r,this.byteOffset=i,e},n.prototype.available=function(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset},n}(),bn;(function(n){n[n.PAD_ENCODE=0]="PAD_ENCODE",n[n.ASCII_ENCODE=1]="ASCII_ENCODE",n[n.C40_ENCODE=2]="C40_ENCODE",n[n.TEXT_ENCODE=3]="TEXT_ENCODE",n[n.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",n[n.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",n[n.BASE256_ENCODE=6]="BASE256_ENCODE"})(bn||(bn={}));var jL=function(){function n(){}return n.decode=function(t){var e=new o4(t),r=new Xt,i=new Xt,a=new Array,s=bn.ASCII_ENCODE;do if(s===bn.ASCII_ENCODE)s=this.decodeAsciiSegment(e,r,i);else{switch(s){case bn.C40_ENCODE:this.decodeC40Segment(e,r);break;case bn.TEXT_ENCODE:this.decodeTextSegment(e,r);break;case bn.ANSIX12_ENCODE:this.decodeAnsiX12Segment(e,r);break;case bn.EDIFACT_ENCODE:this.decodeEdifactSegment(e,r);break;case bn.BASE256_ENCODE:this.decodeBase256Segment(e,r,a);break;default:throw new xt}s=bn.ASCII_ENCODE}while(s!==bn.PAD_ENCODE&&e.available()>0);return i.length()>0&&r.append(i.toString()),new Yg(t,r.toString(),a.length===0?null:a,null)},n.decodeAsciiSegment=function(t,e,r){var i=!1;do{var a=t.readBits(8);if(a===0)throw new xt;if(a<=128)return i&&(a+=128),e.append(String.fromCharCode(a-1)),bn.ASCII_ENCODE;if(a===129)return bn.PAD_ENCODE;if(a<=229){var s=a-130;s<10&&e.append("0"),e.append(""+s)}else switch(a){case 230:return bn.C40_ENCODE;case 231:return bn.BASE256_ENCODE;case 232:e.append("");break;case 233:case 234:break;case 235:i=!0;break;case 236:e.append("[)>05"),r.insert(0,"");break;case 237:e.append("[)>06"),r.insert(0,"");break;case 238:return bn.ANSIX12_ENCODE;case 239:return bn.TEXT_ENCODE;case 240:return bn.EDIFACT_ENCODE;case 241:break;default:if(a!==254||t.available()!==0)throw new xt;break}}while(t.available()>0);return bn.ASCII_ENCODE},n.decodeC40Segment=function(t,e){var r=!1,i=[],a=0;do{if(t.available()===8)return;var s=t.readBits(8);if(s===254)return;this.parseTwoBytes(s,t.readBits(8),i);for(var l=0;l<3;l++){var c=i[l];switch(a){case 0:if(c<3)a=c+1;else if(c<this.C40_BASIC_SET_CHARS.length){var f=this.C40_BASIC_SET_CHARS[c];r?(e.append(String.fromCharCode(f.charCodeAt(0)+128)),r=!1):e.append(f)}else throw new xt;break;case 1:r?(e.append(String.fromCharCode(c+128)),r=!1):e.append(String.fromCharCode(c)),a=0;break;case 2:if(c<this.C40_SHIFT2_SET_CHARS.length){var f=this.C40_SHIFT2_SET_CHARS[c];r?(e.append(String.fromCharCode(f.charCodeAt(0)+128)),r=!1):e.append(f)}else switch(c){case 27:e.append("");break;case 30:r=!0;break;default:throw new xt}a=0;break;case 3:r?(e.append(String.fromCharCode(c+224)),r=!1):e.append(String.fromCharCode(c+96)),a=0;break;default:throw new xt}}}while(t.available()>0)},n.decodeTextSegment=function(t,e){var r=!1,i=[],a=0;do{if(t.available()===8)return;var s=t.readBits(8);if(s===254)return;this.parseTwoBytes(s,t.readBits(8),i);for(var l=0;l<3;l++){var c=i[l];switch(a){case 0:if(c<3)a=c+1;else if(c<this.TEXT_BASIC_SET_CHARS.length){var f=this.TEXT_BASIC_SET_CHARS[c];r?(e.append(String.fromCharCode(f.charCodeAt(0)+128)),r=!1):e.append(f)}else throw new xt;break;case 1:r?(e.append(String.fromCharCode(c+128)),r=!1):e.append(String.fromCharCode(c)),a=0;break;case 2:if(c<this.TEXT_SHIFT2_SET_CHARS.length){var f=this.TEXT_SHIFT2_SET_CHARS[c];r?(e.append(String.fromCharCode(f.charCodeAt(0)+128)),r=!1):e.append(f)}else switch(c){case 27:e.append("");break;case 30:r=!0;break;default:throw new xt}a=0;break;case 3:if(c<this.TEXT_SHIFT3_SET_CHARS.length){var f=this.TEXT_SHIFT3_SET_CHARS[c];r?(e.append(String.fromCharCode(f.charCodeAt(0)+128)),r=!1):e.append(f),a=0}else throw new xt;break;default:throw new xt}}}while(t.available()>0)},n.decodeAnsiX12Segment=function(t,e){var r=[];do{if(t.available()===8)return;var i=t.readBits(8);if(i===254)return;this.parseTwoBytes(i,t.readBits(8),r);for(var a=0;a<3;a++){var s=r[a];switch(s){case 0:e.append("\r");break;case 1:e.append("*");break;case 2:e.append(">");break;case 3:e.append(" ");break;default:if(s<14)e.append(String.fromCharCode(s+44));else if(s<40)e.append(String.fromCharCode(s+51));else throw new xt;break}}}while(t.available()>0)},n.parseTwoBytes=function(t,e,r){var i=(t<<8)+e-1,a=Math.floor(i/1600);r[0]=a,i-=a*1600,a=Math.floor(i/40),r[1]=a,r[2]=i-a*40},n.decodeEdifactSegment=function(t,e){do{if(t.available()<=16)return;for(var r=0;r<4;r++){var i=t.readBits(6);if(i===31){var a=8-t.getBitOffset();a!==8&&t.readBits(a);return}(i&32)===0&&(i|=64),e.append(String.fromCharCode(i))}}while(t.available()>0)},n.decodeBase256Segment=function(t,e,r){var i=1+t.getByteOffset(),a=this.unrandomize255State(t.readBits(8),i++),s;if(a===0?s=t.available()/8|0:a<250?s=a:s=250*(a-249)+this.unrandomize255State(t.readBits(8),i++),s<0)throw new xt;for(var l=new Uint8Array(s),c=0;c<s;c++){if(t.available()<8)throw new xt;l[c]=this.unrandomize255State(t.readBits(8),i++)}r.push(l);try{e.append(wi.decode(l,se.ISO88591))}catch(f){throw new cd("Platform does not support required encoding: "+f.message)}},n.unrandomize255State=function(t,e){var r=149*e%255+1,i=t-r;return i>=0?i:i+256},n.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],n.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],n.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],n.TEXT_SHIFT2_SET_CHARS=n.C40_SHIFT2_SET_CHARS,n.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""],n}(),zL=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},HL=function(){function n(){this.rsDecoder=new Kg(Pr.DATA_MATRIX_FIELD_256)}return n.prototype.decode=function(t){var e,r,i=new FL(t),a=i.getVersion(),s=i.readCodewords(),l=UL.getDataBlocks(s,a),c=0;try{for(var f=zL(l),d=f.next();!d.done;d=f.next()){var g=d.value;c+=g.getNumDataCodewords()}}catch(I){e={error:I}}finally{try{d&&!d.done&&(r=f.return)&&r.call(f)}finally{if(e)throw e.error}}for(var m=new Uint8Array(c),v=l.length,_=0;_<v;_++){var w=l[_],b=w.getCodewords(),S=w.getNumDataCodewords();this.correctErrors(b,S);for(var C=0;C<S;C++)m[C*v+_]=b[C]}return jL.decode(m)},n.prototype.correctErrors=function(t,e){var r=new Int32Array(t);try{this.rsDecoder.decode(r,t.length-e)}catch{throw new Gn}for(var i=0;i<e;i++)t[i]=r[i]},n}(),GL=function(){function n(t){this.image=t,this.rectangleDetector=new $y(this.image)}return n.prototype.detect=function(){var t=this.rectangleDetector.detect(),e=this.detectSolid1(t);if(e=this.detectSolid2(e),e[3]=this.correctTopRight(e),!e[3])throw new lt;e=this.shiftToModuleCenter(e);var r=e[0],i=e[1],a=e[2],s=e[3],l=this.transitionsBetween(r,s)+1,c=this.transitionsBetween(a,s)+1;(l&1)===1&&(l+=1),(c&1)===1&&(c+=1),4*l<7*c&&4*c<7*l&&(l=c=Math.max(l,c));var f=n.sampleGrid(this.image,r,i,a,s,l,c);return new _2(f,[r,i,a,s])},n.shiftPoint=function(t,e,r){var i=(e.getX()-t.getX())/(r+1),a=(e.getY()-t.getY())/(r+1);return new Ct(t.getX()+i,t.getY()+a)},n.moveAway=function(t,e,r){var i=t.getX(),a=t.getY();return i<e?i-=1:i+=1,a<r?a-=1:a+=1,new Ct(i,a)},n.prototype.detectSolid1=function(t){var e=t[0],r=t[1],i=t[3],a=t[2],s=this.transitionsBetween(e,r),l=this.transitionsBetween(r,i),c=this.transitionsBetween(i,a),f=this.transitionsBetween(a,e),d=s,g=[a,e,r,i];return d>l&&(d=l,g[0]=e,g[1]=r,g[2]=i,g[3]=a),d>c&&(d=c,g[0]=r,g[1]=i,g[2]=a,g[3]=e),d>f&&(g[0]=i,g[1]=a,g[2]=e,g[3]=r),g},n.prototype.detectSolid2=function(t){var e=t[0],r=t[1],i=t[2],a=t[3],s=this.transitionsBetween(e,a),l=n.shiftPoint(r,i,(s+1)*4),c=n.shiftPoint(i,r,(s+1)*4),f=this.transitionsBetween(l,e),d=this.transitionsBetween(c,a);return f<d?(t[0]=e,t[1]=r,t[2]=i,t[3]=a):(t[0]=r,t[1]=i,t[2]=a,t[3]=e),t},n.prototype.correctTopRight=function(t){var e=t[0],r=t[1],i=t[2],a=t[3],s=this.transitionsBetween(e,a),l=this.transitionsBetween(r,a),c=n.shiftPoint(e,r,(l+1)*4),f=n.shiftPoint(i,r,(s+1)*4);s=this.transitionsBetween(c,a),l=this.transitionsBetween(f,a);var d=new Ct(a.getX()+(i.getX()-r.getX())/(s+1),a.getY()+(i.getY()-r.getY())/(s+1)),g=new Ct(a.getX()+(e.getX()-r.getX())/(l+1),a.getY()+(e.getY()-r.getY())/(l+1));if(!this.isValid(d))return this.isValid(g)?g:null;if(!this.isValid(g))return d;var m=this.transitionsBetween(c,d)+this.transitionsBetween(f,d),v=this.transitionsBetween(c,g)+this.transitionsBetween(f,g);return m>v?d:g},n.prototype.shiftToModuleCenter=function(t){var e=t[0],r=t[1],i=t[2],a=t[3],s=this.transitionsBetween(e,a)+1,l=this.transitionsBetween(i,a)+1,c=n.shiftPoint(e,r,l*4),f=n.shiftPoint(i,r,s*4);s=this.transitionsBetween(c,a)+1,l=this.transitionsBetween(f,a)+1,(s&1)===1&&(s+=1),(l&1)===1&&(l+=1);var d=(e.getX()+r.getX()+i.getX()+a.getX())/4,g=(e.getY()+r.getY()+i.getY()+a.getY())/4;e=n.moveAway(e,d,g),r=n.moveAway(r,d,g),i=n.moveAway(i,d,g),a=n.moveAway(a,d,g);var m,v;return c=n.shiftPoint(e,r,l*4),c=n.shiftPoint(c,a,s*4),m=n.shiftPoint(r,e,l*4),m=n.shiftPoint(m,i,s*4),f=n.shiftPoint(i,a,l*4),f=n.shiftPoint(f,r,s*4),v=n.shiftPoint(a,i,l*4),v=n.shiftPoint(v,e,s*4),[c,m,f,v]},n.prototype.isValid=function(t){return t.getX()>=0&&t.getX()<this.image.getWidth()&&t.getY()>0&&t.getY()<this.image.getHeight()},n.sampleGrid=function(t,e,r,i,a,s,l){var c=A2.getInstance();return c.sampleGrid(t,s,l,.5,.5,s-.5,.5,s-.5,l-.5,.5,l-.5,e.getX(),e.getY(),a.getX(),a.getY(),i.getX(),i.getY(),r.getX(),r.getY())},n.prototype.transitionsBetween=function(t,e){var r=Math.trunc(t.getX()),i=Math.trunc(t.getY()),a=Math.trunc(e.getX()),s=Math.trunc(e.getY()),l=Math.abs(s-i)>Math.abs(a-r);if(l){var c=r;r=i,i=c,c=a,a=s,s=c}for(var f=Math.abs(a-r),d=Math.abs(s-i),g=-f/2,m=i<s?1:-1,v=r<a?1:-1,_=0,w=this.image.get(l?i:r,l?r:i),b=r,S=i;b!==a;b+=v){var C=this.image.get(l?S:b,l?b:S);if(C!==w&&(_++,w=C),g+=d,g>0){if(S===s)break;S+=m,g-=f}}return _},n}(),Xy=function(){function n(){this.decoder=new HL}return n.prototype.decode=function(t,e){e===void 0&&(e=null);var r,i;if(e!=null&&e.has(Xe.PURE_BARCODE)){var a=n.extractPureBits(t.getBlackMatrix());r=this.decoder.decode(a),i=n.NO_POINTS}else{var s=new GL(t.getBlackMatrix()).detect();r=this.decoder.decode(s.getBits()),i=s.getPoints()}var l=r.getRawBytes(),c=new pr(r.getText(),l,8*l.length,i,Pt.DATA_MATRIX,Fe.currentTimeMillis()),f=r.getByteSegments();f!=null&&c.putMetadata(nr.BYTE_SEGMENTS,f);var d=r.getECLevel();return d!=null&&c.putMetadata(nr.ERROR_CORRECTION_LEVEL,d),c},n.prototype.reset=function(){},n.extractPureBits=function(t){var e=t.getTopLeftOnBit(),r=t.getBottomRightOnBit();if(e==null||r==null)throw new lt;var i=this.moduleSize(e,t),a=e[1],s=r[1],l=e[0],c=r[0],f=(c-l+1)/i,d=(s-a+1)/i;if(f<=0||d<=0)throw new lt;var g=i/2;a+=g,l+=g;for(var m=new Aa(f,d),v=0;v<d;v++)for(var _=a+v*i,w=0;w<f;w++)t.get(l+w*i,_)&&m.set(w,v);return m},n.moduleSize=function(t,e){for(var r=e.getWidth(),i=t[0],a=t[1];i<r&&e.get(i,a);)i++;if(i===r)throw new lt;var s=i-t[0];if(s===0)throw new lt;return s},n.NO_POINTS=[],n}(),$L=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}();(function(n){$L(t,n);function t(e){return e===void 0&&(e=500),n.call(this,new Xy,e)||this}return t})(Lc);var ec;(function(n){n[n.L=0]="L",n[n.M=1]="M",n[n.Q=2]="Q",n[n.H=3]="H"})(ec||(ec={}));var qL=function(){function n(t,e,r){this.value=t,this.stringValue=e,this.bits=r,n.FOR_BITS.set(r,this),n.FOR_VALUE.set(t,this)}return n.prototype.getValue=function(){return this.value},n.prototype.getBits=function(){return this.bits},n.fromString=function(t){switch(t){case"L":return n.L;case"M":return n.M;case"Q":return n.Q;case"H":return n.H;default:throw new Ni(t+"not available")}},n.prototype.toString=function(){return this.stringValue},n.prototype.equals=function(t){if(!(t instanceof n))return!1;var e=t;return this.value===e.value},n.forBits=function(t){if(t<0||t>=n.FOR_BITS.size)throw new kt;return n.FOR_BITS.get(t)},n.FOR_BITS=new Map,n.FOR_VALUE=new Map,n.L=new n(ec.L,"L",1),n.M=new n(ec.M,"M",0),n.Q=new n(ec.Q,"Q",3),n.H=new n(ec.H,"H",2),n}(),WL=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},l4=function(){function n(t){this.errorCorrectionLevel=qL.forBits(t>>3&3),this.dataMask=t&7}return n.numBitsDiffering=function(t,e){return Zt.bitCount(t^e)},n.decodeFormatInformation=function(t,e){var r=n.doDecodeFormatInformation(t,e);return r!==null?r:n.doDecodeFormatInformation(t^n.FORMAT_INFO_MASK_QR,e^n.FORMAT_INFO_MASK_QR)},n.doDecodeFormatInformation=function(t,e){var r,i,a=Number.MAX_SAFE_INTEGER,s=0;try{for(var l=WL(n.FORMAT_INFO_DECODE_LOOKUP),c=l.next();!c.done;c=l.next()){var f=c.value,d=f[0];if(d===t||d===e)return new n(f[1]);var g=n.numBitsDiffering(t,d);g<a&&(s=f[1],a=g),t!==e&&(g=n.numBitsDiffering(e,d),g<a&&(s=f[1],a=g))}}catch(m){r={error:m}}finally{try{c&&!c.done&&(i=l.return)&&i.call(l)}finally{if(r)throw r.error}}return a<=3?new n(s):null},n.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},n.prototype.getDataMask=function(){return this.dataMask},n.prototype.hashCode=function(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask},n.prototype.equals=function(t){if(!(t instanceof n))return!1;var e=t;return this.errorCorrectionLevel===e.errorCorrectionLevel&&this.dataMask===e.dataMask},n.FORMAT_INFO_MASK_QR=21522,n.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])],n}(),XL=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},tt=function(){function n(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];this.ecCodewordsPerBlock=t,this.ecBlocks=e}return n.prototype.getECCodewordsPerBlock=function(){return this.ecCodewordsPerBlock},n.prototype.getNumBlocks=function(){var t,e,r=0,i=this.ecBlocks;try{for(var a=XL(i),s=a.next();!s.done;s=a.next()){var l=s.value;r+=l.getCount()}}catch(c){t={error:c}}finally{try{s&&!s.done&&(e=a.return)&&e.call(a)}finally{if(t)throw t.error}}return r},n.prototype.getTotalECCodewords=function(){return this.ecCodewordsPerBlock*this.getNumBlocks()},n.prototype.getECBlocks=function(){return this.ecBlocks},n}(),G=function(){function n(t,e){this.count=t,this.dataCodewords=e}return n.prototype.getCount=function(){return this.count},n.prototype.getDataCodewords=function(){return this.dataCodewords},n}(),YL=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Cl=function(){function n(t,e){for(var r,i,a=[],s=2;s<arguments.length;s++)a[s-2]=arguments[s];this.versionNumber=t,this.alignmentPatternCenters=e,this.ecBlocks=a;var l=0,c=a[0].getECCodewordsPerBlock(),f=a[0].getECBlocks();try{for(var d=YL(f),g=d.next();!g.done;g=d.next()){var m=g.value;l+=m.getCount()*(m.getDataCodewords()+c)}}catch(v){r={error:v}}finally{try{g&&!g.done&&(i=d.return)&&i.call(d)}finally{if(r)throw r.error}}this.totalCodewords=l}return n.prototype.getVersionNumber=function(){return this.versionNumber},n.prototype.getAlignmentPatternCenters=function(){return this.alignmentPatternCenters},n.prototype.getTotalCodewords=function(){return this.totalCodewords},n.prototype.getDimensionForVersion=function(){return 17+4*this.versionNumber},n.prototype.getECBlocksForLevel=function(t){return this.ecBlocks[t.getValue()]},n.getProvisionalVersionForDimension=function(t){if(t%4!==1)throw new xt;try{return this.getVersionForNumber((t-17)/4)}catch{throw new xt}},n.getVersionForNumber=function(t){if(t<1||t>40)throw new kt;return n.VERSIONS[t-1]},n.decodeVersionInformation=function(t){for(var e=Number.MAX_SAFE_INTEGER,r=0,i=0;i<n.VERSION_DECODE_INFO.length;i++){var a=n.VERSION_DECODE_INFO[i];if(a===t)return n.getVersionForNumber(i+7);var s=l4.numBitsDiffering(t,a);s<e&&(r=i+7,e=s)}return e<=3?n.getVersionForNumber(r):null},n.prototype.buildFunctionPattern=function(){var t=this.getDimensionForVersion(),e=new Aa(t);e.setRegion(0,0,9,9),e.setRegion(t-8,0,8,9),e.setRegion(0,t-8,9,8);for(var r=this.alignmentPatternCenters.length,i=0;i<r;i++)for(var a=this.alignmentPatternCenters[i]-2,s=0;s<r;s++)i===0&&(s===0||s===r-1)||i===r-1&&s===0||e.setRegion(this.alignmentPatternCenters[s]-2,a,5,5);return e.setRegion(6,9,1,t-17),e.setRegion(9,6,t-17,1),this.versionNumber>6&&(e.setRegion(t-11,0,3,6),e.setRegion(0,t-11,6,3)),e},n.prototype.toString=function(){return""+this.versionNumber},n.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),n.VERSIONS=[new n(1,new Int32Array(0),new tt(7,new G(1,19)),new tt(10,new G(1,16)),new tt(13,new G(1,13)),new tt(17,new G(1,9))),new n(2,Int32Array.from([6,18]),new tt(10,new G(1,34)),new tt(16,new G(1,28)),new tt(22,new G(1,22)),new tt(28,new G(1,16))),new n(3,Int32Array.from([6,22]),new tt(15,new G(1,55)),new tt(26,new G(1,44)),new tt(18,new G(2,17)),new tt(22,new G(2,13))),new n(4,Int32Array.from([6,26]),new tt(20,new G(1,80)),new tt(18,new G(2,32)),new tt(26,new G(2,24)),new tt(16,new G(4,9))),new n(5,Int32Array.from([6,30]),new tt(26,new G(1,108)),new tt(24,new G(2,43)),new tt(18,new G(2,15),new G(2,16)),new tt(22,new G(2,11),new G(2,12))),new n(6,Int32Array.from([6,34]),new tt(18,new G(2,68)),new tt(16,new G(4,27)),new tt(24,new G(4,19)),new tt(28,new G(4,15))),new n(7,Int32Array.from([6,22,38]),new tt(20,new G(2,78)),new tt(18,new G(4,31)),new tt(18,new G(2,14),new G(4,15)),new tt(26,new G(4,13),new G(1,14))),new n(8,Int32Array.from([6,24,42]),new tt(24,new G(2,97)),new tt(22,new G(2,38),new G(2,39)),new tt(22,new G(4,18),new G(2,19)),new tt(26,new G(4,14),new G(2,15))),new n(9,Int32Array.from([6,26,46]),new tt(30,new G(2,116)),new tt(22,new G(3,36),new G(2,37)),new tt(20,new G(4,16),new G(4,17)),new tt(24,new G(4,12),new G(4,13))),new n(10,Int32Array.from([6,28,50]),new tt(18,new G(2,68),new G(2,69)),new tt(26,new G(4,43),new G(1,44)),new tt(24,new G(6,19),new G(2,20)),new tt(28,new G(6,15),new G(2,16))),new n(11,Int32Array.from([6,30,54]),new tt(20,new G(4,81)),new tt(30,new G(1,50),new G(4,51)),new tt(28,new G(4,22),new G(4,23)),new tt(24,new G(3,12),new G(8,13))),new n(12,Int32Array.from([6,32,58]),new tt(24,new G(2,92),new G(2,93)),new tt(22,new G(6,36),new G(2,37)),new tt(26,new G(4,20),new G(6,21)),new tt(28,new G(7,14),new G(4,15))),new n(13,Int32Array.from([6,34,62]),new tt(26,new G(4,107)),new tt(22,new G(8,37),new G(1,38)),new tt(24,new G(8,20),new G(4,21)),new tt(22,new G(12,11),new G(4,12))),new n(14,Int32Array.from([6,26,46,66]),new tt(30,new G(3,115),new G(1,116)),new tt(24,new G(4,40),new G(5,41)),new tt(20,new G(11,16),new G(5,17)),new tt(24,new G(11,12),new G(5,13))),new n(15,Int32Array.from([6,26,48,70]),new tt(22,new G(5,87),new G(1,88)),new tt(24,new G(5,41),new G(5,42)),new tt(30,new G(5,24),new G(7,25)),new tt(24,new G(11,12),new G(7,13))),new n(16,Int32Array.from([6,26,50,74]),new tt(24,new G(5,98),new G(1,99)),new tt(28,new G(7,45),new G(3,46)),new tt(24,new G(15,19),new G(2,20)),new tt(30,new G(3,15),new G(13,16))),new n(17,Int32Array.from([6,30,54,78]),new tt(28,new G(1,107),new G(5,108)),new tt(28,new G(10,46),new G(1,47)),new tt(28,new G(1,22),new G(15,23)),new tt(28,new G(2,14),new G(17,15))),new n(18,Int32Array.from([6,30,56,82]),new tt(30,new G(5,120),new G(1,121)),new tt(26,new G(9,43),new G(4,44)),new tt(28,new G(17,22),new G(1,23)),new tt(28,new G(2,14),new G(19,15))),new n(19,Int32Array.from([6,30,58,86]),new tt(28,new G(3,113),new G(4,114)),new tt(26,new G(3,44),new G(11,45)),new tt(26,new G(17,21),new G(4,22)),new tt(26,new G(9,13),new G(16,14))),new n(20,Int32Array.from([6,34,62,90]),new tt(28,new G(3,107),new G(5,108)),new tt(26,new G(3,41),new G(13,42)),new tt(30,new G(15,24),new G(5,25)),new tt(28,new G(15,15),new G(10,16))),new n(21,Int32Array.from([6,28,50,72,94]),new tt(28,new G(4,116),new G(4,117)),new tt(26,new G(17,42)),new tt(28,new G(17,22),new G(6,23)),new tt(30,new G(19,16),new G(6,17))),new n(22,Int32Array.from([6,26,50,74,98]),new tt(28,new G(2,111),new G(7,112)),new tt(28,new G(17,46)),new tt(30,new G(7,24),new G(16,25)),new tt(24,new G(34,13))),new n(23,Int32Array.from([6,30,54,78,102]),new tt(30,new G(4,121),new G(5,122)),new tt(28,new G(4,47),new G(14,48)),new tt(30,new G(11,24),new G(14,25)),new tt(30,new G(16,15),new G(14,16))),new n(24,Int32Array.from([6,28,54,80,106]),new tt(30,new G(6,117),new G(4,118)),new tt(28,new G(6,45),new G(14,46)),new tt(30,new G(11,24),new G(16,25)),new tt(30,new G(30,16),new G(2,17))),new n(25,Int32Array.from([6,32,58,84,110]),new tt(26,new G(8,106),new G(4,107)),new tt(28,new G(8,47),new G(13,48)),new tt(30,new G(7,24),new G(22,25)),new tt(30,new G(22,15),new G(13,16))),new n(26,Int32Array.from([6,30,58,86,114]),new tt(28,new G(10,114),new G(2,115)),new tt(28,new G(19,46),new G(4,47)),new tt(28,new G(28,22),new G(6,23)),new tt(30,new G(33,16),new G(4,17))),new n(27,Int32Array.from([6,34,62,90,118]),new tt(30,new G(8,122),new G(4,123)),new tt(28,new G(22,45),new G(3,46)),new tt(30,new G(8,23),new G(26,24)),new tt(30,new G(12,15),new G(28,16))),new n(28,Int32Array.from([6,26,50,74,98,122]),new tt(30,new G(3,117),new G(10,118)),new tt(28,new G(3,45),new G(23,46)),new tt(30,new G(4,24),new G(31,25)),new tt(30,new G(11,15),new G(31,16))),new n(29,Int32Array.from([6,30,54,78,102,126]),new tt(30,new G(7,116),new G(7,117)),new tt(28,new G(21,45),new G(7,46)),new tt(30,new G(1,23),new G(37,24)),new tt(30,new G(19,15),new G(26,16))),new n(30,Int32Array.from([6,26,52,78,104,130]),new tt(30,new G(5,115),new G(10,116)),new tt(28,new G(19,47),new G(10,48)),new tt(30,new G(15,24),new G(25,25)),new tt(30,new G(23,15),new G(25,16))),new n(31,Int32Array.from([6,30,56,82,108,134]),new tt(30,new G(13,115),new G(3,116)),new tt(28,new G(2,46),new G(29,47)),new tt(30,new G(42,24),new G(1,25)),new tt(30,new G(23,15),new G(28,16))),new n(32,Int32Array.from([6,34,60,86,112,138]),new tt(30,new G(17,115)),new tt(28,new G(10,46),new G(23,47)),new tt(30,new G(10,24),new G(35,25)),new tt(30,new G(19,15),new G(35,16))),new n(33,Int32Array.from([6,30,58,86,114,142]),new tt(30,new G(17,115),new G(1,116)),new tt(28,new G(14,46),new G(21,47)),new tt(30,new G(29,24),new G(19,25)),new tt(30,new G(11,15),new G(46,16))),new n(34,Int32Array.from([6,34,62,90,118,146]),new tt(30,new G(13,115),new G(6,116)),new tt(28,new G(14,46),new G(23,47)),new tt(30,new G(44,24),new G(7,25)),new tt(30,new G(59,16),new G(1,17))),new n(35,Int32Array.from([6,30,54,78,102,126,150]),new tt(30,new G(12,121),new G(7,122)),new tt(28,new G(12,47),new G(26,48)),new tt(30,new G(39,24),new G(14,25)),new tt(30,new G(22,15),new G(41,16))),new n(36,Int32Array.from([6,24,50,76,102,128,154]),new tt(30,new G(6,121),new G(14,122)),new tt(28,new G(6,47),new G(34,48)),new tt(30,new G(46,24),new G(10,25)),new tt(30,new G(2,15),new G(64,16))),new n(37,Int32Array.from([6,28,54,80,106,132,158]),new tt(30,new G(17,122),new G(4,123)),new tt(28,new G(29,46),new G(14,47)),new tt(30,new G(49,24),new G(10,25)),new tt(30,new G(24,15),new G(46,16))),new n(38,Int32Array.from([6,32,58,84,110,136,162]),new tt(30,new G(4,122),new G(18,123)),new tt(28,new G(13,46),new G(32,47)),new tt(30,new G(48,24),new G(14,25)),new tt(30,new G(42,15),new G(32,16))),new n(39,Int32Array.from([6,26,54,82,110,138,166]),new tt(30,new G(20,117),new G(4,118)),new tt(28,new G(40,47),new G(7,48)),new tt(30,new G(43,24),new G(22,25)),new tt(30,new G(10,15),new G(67,16))),new n(40,Int32Array.from([6,30,58,86,114,142,170]),new tt(30,new G(19,118),new G(6,119)),new tt(28,new G(18,47),new G(31,48)),new tt(30,new G(34,24),new G(34,25)),new tt(30,new G(20,15),new G(61,16)))],n}(),jn;(function(n){n[n.DATA_MASK_000=0]="DATA_MASK_000",n[n.DATA_MASK_001=1]="DATA_MASK_001",n[n.DATA_MASK_010=2]="DATA_MASK_010",n[n.DATA_MASK_011=3]="DATA_MASK_011",n[n.DATA_MASK_100=4]="DATA_MASK_100",n[n.DATA_MASK_101=5]="DATA_MASK_101",n[n.DATA_MASK_110=6]="DATA_MASK_110",n[n.DATA_MASK_111=7]="DATA_MASK_111"})(jn||(jn={}));var CS=function(){function n(t,e){this.value=t,this.isMasked=e}return n.prototype.unmaskBitMatrix=function(t,e){for(var r=0;r<e;r++)for(var i=0;i<e;i++)this.isMasked(r,i)&&t.flip(i,r)},n.values=new Map([[jn.DATA_MASK_000,new n(jn.DATA_MASK_000,function(t,e){return(t+e&1)===0})],[jn.DATA_MASK_001,new n(jn.DATA_MASK_001,function(t,e){return(t&1)===0})],[jn.DATA_MASK_010,new n(jn.DATA_MASK_010,function(t,e){return e%3===0})],[jn.DATA_MASK_011,new n(jn.DATA_MASK_011,function(t,e){return(t+e)%3===0})],[jn.DATA_MASK_100,new n(jn.DATA_MASK_100,function(t,e){return(Math.floor(t/2)+Math.floor(e/3)&1)===0})],[jn.DATA_MASK_101,new n(jn.DATA_MASK_101,function(t,e){return t*e%6===0})],[jn.DATA_MASK_110,new n(jn.DATA_MASK_110,function(t,e){return t*e%6<3})],[jn.DATA_MASK_111,new n(jn.DATA_MASK_111,function(t,e){return(t+e+t*e%3&1)===0})]]),n}(),KL=function(){function n(t){var e=t.getHeight();if(e<21||(e&3)!==1)throw new xt;this.bitMatrix=t}return n.prototype.readFormatInformation=function(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;for(var t=0,e=0;e<6;e++)t=this.copyBit(e,8,t);t=this.copyBit(7,8,t),t=this.copyBit(8,8,t),t=this.copyBit(8,7,t);for(var r=5;r>=0;r--)t=this.copyBit(8,r,t);for(var i=this.bitMatrix.getHeight(),a=0,s=i-7,r=i-1;r>=s;r--)a=this.copyBit(8,r,a);for(var e=i-8;e<i;e++)a=this.copyBit(e,8,a);if(this.parsedFormatInfo=l4.decodeFormatInformation(t,a),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new xt},n.prototype.readVersion=function(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;var t=this.bitMatrix.getHeight(),e=Math.floor((t-17)/4);if(e<=6)return Cl.getVersionForNumber(e);for(var r=0,i=t-11,a=5;a>=0;a--)for(var s=t-9;s>=i;s--)r=this.copyBit(s,a,r);var l=Cl.decodeVersionInformation(r);if(l!==null&&l.getDimensionForVersion()===t)return this.parsedVersion=l,l;r=0;for(var s=5;s>=0;s--)for(var a=t-9;a>=i;a--)r=this.copyBit(s,a,r);if(l=Cl.decodeVersionInformation(r),l!==null&&l.getDimensionForVersion()===t)return this.parsedVersion=l,l;throw new xt},n.prototype.copyBit=function(t,e,r){var i=this.isMirror?this.bitMatrix.get(e,t):this.bitMatrix.get(t,e);return i?r<<1|1:r<<1},n.prototype.readCodewords=function(){var t=this.readFormatInformation(),e=this.readVersion(),r=CS.values.get(t.getDataMask()),i=this.bitMatrix.getHeight();r.unmaskBitMatrix(this.bitMatrix,i);for(var a=e.buildFunctionPattern(),s=!0,l=new Uint8Array(e.getTotalCodewords()),c=0,f=0,d=0,g=i-1;g>0;g-=2){g===6&&g--;for(var m=0;m<i;m++)for(var v=s?i-1-m:m,_=0;_<2;_++)a.get(g-_,v)||(d++,f<<=1,this.bitMatrix.get(g-_,v)&&(f|=1),d===8&&(l[c++]=f,d=0,f=0));s=!s}if(c!==e.getTotalCodewords())throw new xt;return l},n.prototype.remask=function(){if(this.parsedFormatInfo!==null){var t=CS.values.get(this.parsedFormatInfo.getDataMask()),e=this.bitMatrix.getHeight();t.unmaskBitMatrix(this.bitMatrix,e)}},n.prototype.setMirror=function(t){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=t},n.prototype.mirror=function(){for(var t=this.bitMatrix,e=0,r=t.getWidth();e<r;e++)for(var i=e+1,a=t.getHeight();i<a;i++)t.get(e,i)!==t.get(i,e)&&(t.flip(i,e),t.flip(e,i))},n}(),IS=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},ZL=function(){function n(t,e){this.numDataCodewords=t,this.codewords=e}return n.getDataBlocks=function(t,e,r){var i,a,s,l;if(t.length!==e.getTotalCodewords())throw new kt;var c=e.getECBlocksForLevel(r),f=0,d=c.getECBlocks();try{for(var g=IS(d),m=g.next();!m.done;m=g.next()){var v=m.value;f+=v.getCount()}}catch(B){i={error:B}}finally{try{m&&!m.done&&(a=g.return)&&a.call(g)}finally{if(i)throw i.error}}var _=new Array(f),w=0;try{for(var b=IS(d),S=b.next();!S.done;S=b.next())for(var v=S.value,C=0;C<v.getCount();C++){var I=v.getDataCodewords(),M=c.getECCodewordsPerBlock()+I;_[w++]=new n(I,new Uint8Array(M))}}catch(B){s={error:B}}finally{try{S&&!S.done&&(l=b.return)&&l.call(b)}finally{if(s)throw s.error}}for(var N=_[0].codewords.length,k=_.length-1;k>=0;){var O=_[k].codewords.length;if(O===N)break;k--}k++;for(var R=N-c.getECCodewordsPerBlock(),D=0,C=0;C<R;C++)for(var L=0;L<w;L++)_[L].codewords[C]=t[D++];for(var L=k;L<w;L++)_[L].codewords[R]=t[D++];for(var F=_[0].codewords.length,C=R;C<F;C++)for(var L=0;L<w;L++){var U=L<k?C:C+1;_[L].codewords[U]=t[D++]}return _},n.prototype.getNumDataCodewords=function(){return this.numDataCodewords},n.prototype.getCodewords=function(){return this.codewords},n}(),mi;(function(n){n[n.TERMINATOR=0]="TERMINATOR",n[n.NUMERIC=1]="NUMERIC",n[n.ALPHANUMERIC=2]="ALPHANUMERIC",n[n.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",n[n.BYTE=4]="BYTE",n[n.ECI=5]="ECI",n[n.KANJI=6]="KANJI",n[n.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",n[n.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",n[n.HANZI=9]="HANZI"})(mi||(mi={}));var je=function(){function n(t,e,r,i){this.value=t,this.stringValue=e,this.characterCountBitsForVersions=r,this.bits=i,n.FOR_BITS.set(i,this),n.FOR_VALUE.set(t,this)}return n.forBits=function(t){var e=n.FOR_BITS.get(t);if(e===void 0)throw new kt;return e},n.prototype.getCharacterCountBits=function(t){var e=t.getVersionNumber(),r;return e<=9?r=0:e<=26?r=1:r=2,this.characterCountBitsForVersions[r]},n.prototype.getValue=function(){return this.value},n.prototype.getBits=function(){return this.bits},n.prototype.equals=function(t){if(!(t instanceof n))return!1;var e=t;return this.value===e.value},n.prototype.toString=function(){return this.stringValue},n.FOR_BITS=new Map,n.FOR_VALUE=new Map,n.TERMINATOR=new n(mi.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),n.NUMERIC=new n(mi.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),n.ALPHANUMERIC=new n(mi.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),n.STRUCTURED_APPEND=new n(mi.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),n.BYTE=new n(mi.BYTE,"BYTE",Int32Array.from([8,16,16]),4),n.ECI=new n(mi.ECI,"ECI",Int32Array.from([0,0,0]),7),n.KANJI=new n(mi.KANJI,"KANJI",Int32Array.from([8,10,12]),8),n.FNC1_FIRST_POSITION=new n(mi.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),n.FNC1_SECOND_POSITION=new n(mi.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),n.HANZI=new n(mi.HANZI,"HANZI",Int32Array.from([8,10,12]),13),n}(),QL=function(){function n(){}return n.decode=function(t,e,r,i){var a=new o4(t),s=new Xt,l=new Array,c=-1,f=-1;try{var d=null,g=!1,m=void 0;do{if(a.available()<4)m=je.TERMINATOR;else{var v=a.readBits(4);m=je.forBits(v)}switch(m){case je.TERMINATOR:break;case je.FNC1_FIRST_POSITION:case je.FNC1_SECOND_POSITION:g=!0;break;case je.STRUCTURED_APPEND:if(a.available()<16)throw new xt;c=a.readBits(8),f=a.readBits(8);break;case je.ECI:var _=n.parseECIValue(a);if(d=In.getCharacterSetECIByValue(_),d===null)throw new xt;break;case je.HANZI:var w=a.readBits(4),b=a.readBits(m.getCharacterCountBits(e));w===n.GB2312_SUBSET&&n.decodeHanziSegment(a,s,b);break;default:var S=a.readBits(m.getCharacterCountBits(e));switch(m){case je.NUMERIC:n.decodeNumericSegment(a,s,S);break;case je.ALPHANUMERIC:n.decodeAlphanumericSegment(a,s,S,g);break;case je.BYTE:n.decodeByteSegment(a,s,S,d,l,i);break;case je.KANJI:n.decodeKanjiSegment(a,s,S);break;default:throw new xt}break}}while(m!==je.TERMINATOR)}catch{throw new xt}return new Yg(t,s.toString(),l.length===0?null:l,r===null?null:r.toString(),c,f)},n.decodeHanziSegment=function(t,e,r){if(r*13>t.available())throw new xt;for(var i=new Uint8Array(2*r),a=0;r>0;){var s=t.readBits(13),l=s/96<<8&4294967295|s%96;l<959?l+=41377:l+=42657,i[a]=l>>8&255,i[a+1]=l&255,a+=2,r--}try{e.append(wi.decode(i,se.GB2312))}catch(c){throw new xt(c)}},n.decodeKanjiSegment=function(t,e,r){if(r*13>t.available())throw new xt;for(var i=new Uint8Array(2*r),a=0;r>0;){var s=t.readBits(13),l=s/192<<8&4294967295|s%192;l<7936?l+=33088:l+=49472,i[a]=l>>8,i[a+1]=l,a+=2,r--}try{e.append(wi.decode(i,se.SHIFT_JIS))}catch(c){throw new xt(c)}},n.decodeByteSegment=function(t,e,r,i,a,s){if(8*r>t.available())throw new xt;for(var l=new Uint8Array(r),c=0;c<r;c++)l[c]=t.readBits(8);var f;i===null?f=se.guessEncoding(l,s):f=i.getName();try{e.append(wi.decode(l,f))}catch(d){throw new xt(d)}a.push(l)},n.toAlphaNumericChar=function(t){if(t>=n.ALPHANUMERIC_CHARS.length)throw new xt;return n.ALPHANUMERIC_CHARS[t]},n.decodeAlphanumericSegment=function(t,e,r,i){for(var a=e.length();r>1;){if(t.available()<11)throw new xt;var s=t.readBits(11);e.append(n.toAlphaNumericChar(Math.floor(s/45))),e.append(n.toAlphaNumericChar(s%45)),r-=2}if(r===1){if(t.available()<6)throw new xt;e.append(n.toAlphaNumericChar(t.readBits(6)))}if(i)for(var l=a;l<e.length();l++)e.charAt(l)==="%"&&(l<e.length()-1&&e.charAt(l+1)==="%"?e.deleteCharAt(l+1):e.setCharAt(l,""))},n.decodeNumericSegment=function(t,e,r){for(;r>=3;){if(t.available()<10)throw new xt;var i=t.readBits(10);if(i>=1e3)throw new xt;e.append(n.toAlphaNumericChar(Math.floor(i/100))),e.append(n.toAlphaNumericChar(Math.floor(i/10)%10)),e.append(n.toAlphaNumericChar(i%10)),r-=3}if(r===2){if(t.available()<7)throw new xt;var a=t.readBits(7);if(a>=100)throw new xt;e.append(n.toAlphaNumericChar(Math.floor(a/10))),e.append(n.toAlphaNumericChar(a%10))}else if(r===1){if(t.available()<4)throw new xt;var s=t.readBits(4);if(s>=10)throw new xt;e.append(n.toAlphaNumericChar(s))}},n.parseECIValue=function(t){var e=t.readBits(8);if((e&128)===0)return e&127;if((e&192)===128){var r=t.readBits(8);return(e&63)<<8&4294967295|r}if((e&224)===192){var i=t.readBits(16);return(e&31)<<16&4294967295|i}throw new xt},n.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",n.GB2312_SUBSET=1,n}(),u4=function(){function n(t){this.mirrored=t}return n.prototype.isMirrored=function(){return this.mirrored},n.prototype.applyMirroredCorrection=function(t){if(!(!this.mirrored||t===null||t.length<3)){var e=t[0];t[0]=t[2],t[2]=e}},n}(),RS=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},JL=function(){function n(){this.rsDecoder=new Kg(Pr.QR_CODE_FIELD_256)}return n.prototype.decodeBooleanArray=function(t,e){return this.decodeBitMatrix(Aa.parseFromBooleanArray(t),e)},n.prototype.decodeBitMatrix=function(t,e){var r=new KL(t),i=null;try{return this.decodeBitMatrixParser(r,e)}catch(s){i=s}try{r.remask(),r.setMirror(!0),r.readVersion(),r.readFormatInformation(),r.mirror();var a=this.decodeBitMatrixParser(r,e);return a.setOther(new u4(!0)),a}catch(s){throw i!==null?i:s}},n.prototype.decodeBitMatrixParser=function(t,e){var r,i,a,s,l=t.readVersion(),c=t.readFormatInformation().getErrorCorrectionLevel(),f=t.readCodewords(),d=ZL.getDataBlocks(f,l,c),g=0;try{for(var m=RS(d),v=m.next();!v.done;v=m.next()){var _=v.value;g+=_.getNumDataCodewords()}}catch(k){r={error:k}}finally{try{v&&!v.done&&(i=m.return)&&i.call(m)}finally{if(r)throw r.error}}var w=new Uint8Array(g),b=0;try{for(var S=RS(d),C=S.next();!C.done;C=S.next()){var _=C.value,I=_.getCodewords(),M=_.getNumDataCodewords();this.correctErrors(I,M);for(var N=0;N<M;N++)w[b++]=I[N]}}catch(k){a={error:k}}finally{try{C&&!C.done&&(s=S.return)&&s.call(S)}finally{if(a)throw a.error}}return QL.decode(w,l,c,e)},n.prototype.correctErrors=function(t,e){var r=new Int32Array(t);try{this.rsDecoder.decode(r,t.length-e)}catch{throw new Gn}for(var i=0;i<e;i++)t[i]=r[i]},n}(),tB=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),eB=function(n){tB(t,n);function t(e,r,i){var a=n.call(this,e,r)||this;return a.estimatedModuleSize=i,a}return t.prototype.aboutEquals=function(e,r,i){if(Math.abs(r-this.getY())<=e&&Math.abs(i-this.getX())<=e){var a=Math.abs(e-this.estimatedModuleSize);return a<=1||a<=this.estimatedModuleSize}return!1},t.prototype.combineEstimate=function(e,r,i){var a=(this.getX()+r)/2,s=(this.getY()+e)/2,l=(this.estimatedModuleSize+i)/2;return new t(a,s,l)},t}(Ct),nB=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},rB=function(){function n(t,e,r,i,a,s,l){this.image=t,this.startX=e,this.startY=r,this.width=i,this.height=a,this.moduleSize=s,this.resultPointCallback=l,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}return n.prototype.find=function(){for(var t=this.startX,e=this.height,r=this.width,i=t+r,a=this.startY+e/2,s=new Int32Array(3),l=this.image,c=0;c<e;c++){var f=a+((c&1)===0?Math.floor((c+1)/2):-Math.floor((c+1)/2));s[0]=0,s[1]=0,s[2]=0;for(var d=t;d<i&&!l.get(d,f);)d++;for(var g=0;d<i;){if(l.get(d,f))if(g===1)s[1]++;else if(g===2){if(this.foundPatternCross(s)){var m=this.handlePossibleCenter(s,f,d);if(m!==null)return m}s[0]=s[2],s[1]=1,s[2]=0,g=1}else s[++g]++;else g===1&&g++,s[g]++;d++}if(this.foundPatternCross(s)){var m=this.handlePossibleCenter(s,f,i);if(m!==null)return m}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new lt},n.centerFromEnd=function(t,e){return e-t[2]-t[1]/2},n.prototype.foundPatternCross=function(t){for(var e=this.moduleSize,r=e/2,i=0;i<3;i++)if(Math.abs(e-t[i])>=r)return!1;return!0},n.prototype.crossCheckVertical=function(t,e,r,i){var a=this.image,s=a.getHeight(),l=this.crossCheckStateCount;l[0]=0,l[1]=0,l[2]=0;for(var c=t;c>=0&&a.get(e,c)&&l[1]<=r;)l[1]++,c--;if(c<0||l[1]>r)return NaN;for(;c>=0&&!a.get(e,c)&&l[0]<=r;)l[0]++,c--;if(l[0]>r)return NaN;for(c=t+1;c<s&&a.get(e,c)&&l[1]<=r;)l[1]++,c++;if(c===s||l[1]>r)return NaN;for(;c<s&&!a.get(e,c)&&l[2]<=r;)l[2]++,c++;if(l[2]>r)return NaN;var f=l[0]+l[1]+l[2];return 5*Math.abs(f-i)>=2*i?NaN:this.foundPatternCross(l)?n.centerFromEnd(l,c):NaN},n.prototype.handlePossibleCenter=function(t,e,r){var i,a,s=t[0]+t[1]+t[2],l=n.centerFromEnd(t,r),c=this.crossCheckVertical(e,l,2*t[1],s);if(!isNaN(c)){var f=(t[0]+t[1]+t[2])/3;try{for(var d=nB(this.possibleCenters),g=d.next();!g.done;g=d.next()){var m=g.value;if(m.aboutEquals(f,c,l))return m.combineEstimate(c,l,f)}}catch(_){i={error:_}}finally{try{g&&!g.done&&(a=d.return)&&a.call(d)}finally{if(i)throw i.error}}var v=new eB(l,c,f);this.possibleCenters.push(v),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(v)}return null},n}(),iB=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),aB=function(n){iB(t,n);function t(e,r,i,a){var s=n.call(this,e,r)||this;return s.estimatedModuleSize=i,s.count=a,a===void 0&&(s.count=1),s}return t.prototype.getEstimatedModuleSize=function(){return this.estimatedModuleSize},t.prototype.getCount=function(){return this.count},t.prototype.aboutEquals=function(e,r,i){if(Math.abs(r-this.getY())<=e&&Math.abs(i-this.getX())<=e){var a=Math.abs(e-this.estimatedModuleSize);return a<=1||a<=this.estimatedModuleSize}return!1},t.prototype.combineEstimate=function(e,r,i){var a=this.count+1,s=(this.count*this.getX()+r)/a,l=(this.count*this.getY()+e)/a,c=(this.count*this.estimatedModuleSize+i)/a;return new t(s,l,c,a)},t}(Ct),sB=function(){function n(t){this.bottomLeft=t[0],this.topLeft=t[1],this.topRight=t[2]}return n.prototype.getBottomLeft=function(){return this.bottomLeft},n.prototype.getTopLeft=function(){return this.topLeft},n.prototype.getTopRight=function(){return this.topRight},n}(),Jf=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},oB=function(){function n(t,e){this.image=t,this.resultPointCallback=e,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=e}return n.prototype.getImage=function(){return this.image},n.prototype.getPossibleCenters=function(){return this.possibleCenters},n.prototype.find=function(t){var e=t!=null&&t.get(Xe.TRY_HARDER)!==void 0,r=t!=null&&t.get(Xe.PURE_BARCODE)!==void 0,i=this.image,a=i.getHeight(),s=i.getWidth(),l=Math.floor(3*a/(4*n.MAX_MODULES));(l<n.MIN_SKIP||e)&&(l=n.MIN_SKIP);for(var c=!1,f=new Int32Array(5),d=l-1;d<a&&!c;d+=l){f[0]=0,f[1]=0,f[2]=0,f[3]=0,f[4]=0;for(var g=0,m=0;m<s;m++)if(i.get(m,d))(g&1)===1&&g++,f[g]++;else if((g&1)===0)if(g===4)if(n.foundPatternCross(f)){var v=this.handlePossibleCenter(f,d,m,r);if(v===!0)if(l=2,this.hasSkipped===!0)c=this.haveMultiplyConfirmedCenters();else{var _=this.findRowSkip();_>f[2]&&(d+=_-f[2]-l,m=s-1)}else{f[0]=f[2],f[1]=f[3],f[2]=f[4],f[3]=1,f[4]=0,g=3;continue}g=0,f[0]=0,f[1]=0,f[2]=0,f[3]=0,f[4]=0}else f[0]=f[2],f[1]=f[3],f[2]=f[4],f[3]=1,f[4]=0,g=3;else f[++g]++;else f[g]++;if(n.foundPatternCross(f)){var v=this.handlePossibleCenter(f,d,s,r);v===!0&&(l=f[0],this.hasSkipped&&(c=this.haveMultiplyConfirmedCenters()))}}var w=this.selectBestPatterns();return Ct.orderBestPatterns(w),new sB(w)},n.centerFromEnd=function(t,e){return e-t[4]-t[3]-t[2]/2},n.foundPatternCross=function(t){for(var e=0,r=0;r<5;r++){var i=t[r];if(i===0)return!1;e+=i}if(e<7)return!1;var a=e/7,s=a/2;return Math.abs(a-t[0])<s&&Math.abs(a-t[1])<s&&Math.abs(3*a-t[2])<3*s&&Math.abs(a-t[3])<s&&Math.abs(a-t[4])<s},n.prototype.getCrossCheckStateCount=function(){var t=this.crossCheckStateCount;return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t},n.prototype.crossCheckDiagonal=function(t,e,r,i){for(var a=this.getCrossCheckStateCount(),s=0,l=this.image;t>=s&&e>=s&&l.get(e-s,t-s);)a[2]++,s++;if(t<s||e<s)return!1;for(;t>=s&&e>=s&&!l.get(e-s,t-s)&&a[1]<=r;)a[1]++,s++;if(t<s||e<s||a[1]>r)return!1;for(;t>=s&&e>=s&&l.get(e-s,t-s)&&a[0]<=r;)a[0]++,s++;if(a[0]>r)return!1;var c=l.getHeight(),f=l.getWidth();for(s=1;t+s<c&&e+s<f&&l.get(e+s,t+s);)a[2]++,s++;if(t+s>=c||e+s>=f)return!1;for(;t+s<c&&e+s<f&&!l.get(e+s,t+s)&&a[3]<r;)a[3]++,s++;if(t+s>=c||e+s>=f||a[3]>=r)return!1;for(;t+s<c&&e+s<f&&l.get(e+s,t+s)&&a[4]<r;)a[4]++,s++;if(a[4]>=r)return!1;var d=a[0]+a[1]+a[2]+a[3]+a[4];return Math.abs(d-i)<2*i&&n.foundPatternCross(a)},n.prototype.crossCheckVertical=function(t,e,r,i){for(var a=this.image,s=a.getHeight(),l=this.getCrossCheckStateCount(),c=t;c>=0&&a.get(e,c);)l[2]++,c--;if(c<0)return NaN;for(;c>=0&&!a.get(e,c)&&l[1]<=r;)l[1]++,c--;if(c<0||l[1]>r)return NaN;for(;c>=0&&a.get(e,c)&&l[0]<=r;)l[0]++,c--;if(l[0]>r)return NaN;for(c=t+1;c<s&&a.get(e,c);)l[2]++,c++;if(c===s)return NaN;for(;c<s&&!a.get(e,c)&&l[3]<r;)l[3]++,c++;if(c===s||l[3]>=r)return NaN;for(;c<s&&a.get(e,c)&&l[4]<r;)l[4]++,c++;if(l[4]>=r)return NaN;var f=l[0]+l[1]+l[2]+l[3]+l[4];return 5*Math.abs(f-i)>=2*i?NaN:n.foundPatternCross(l)?n.centerFromEnd(l,c):NaN},n.prototype.crossCheckHorizontal=function(t,e,r,i){for(var a=this.image,s=a.getWidth(),l=this.getCrossCheckStateCount(),c=t;c>=0&&a.get(c,e);)l[2]++,c--;if(c<0)return NaN;for(;c>=0&&!a.get(c,e)&&l[1]<=r;)l[1]++,c--;if(c<0||l[1]>r)return NaN;for(;c>=0&&a.get(c,e)&&l[0]<=r;)l[0]++,c--;if(l[0]>r)return NaN;for(c=t+1;c<s&&a.get(c,e);)l[2]++,c++;if(c===s)return NaN;for(;c<s&&!a.get(c,e)&&l[3]<r;)l[3]++,c++;if(c===s||l[3]>=r)return NaN;for(;c<s&&a.get(c,e)&&l[4]<r;)l[4]++,c++;if(l[4]>=r)return NaN;var f=l[0]+l[1]+l[2]+l[3]+l[4];return 5*Math.abs(f-i)>=i?NaN:n.foundPatternCross(l)?n.centerFromEnd(l,c):NaN},n.prototype.handlePossibleCenter=function(t,e,r,i){var a=t[0]+t[1]+t[2]+t[3]+t[4],s=n.centerFromEnd(t,r),l=this.crossCheckVertical(e,Math.floor(s),t[2],a);if(!isNaN(l)&&(s=this.crossCheckHorizontal(Math.floor(s),Math.floor(l),t[2],a),!isNaN(s)&&(!i||this.crossCheckDiagonal(Math.floor(l),Math.floor(s),t[2],a)))){for(var c=a/7,f=!1,d=this.possibleCenters,g=0,m=d.length;g<m;g++){var v=d[g];if(v.aboutEquals(c,l,s)){d[g]=v.combineEstimate(l,s,c),f=!0;break}}if(!f){var _=new aB(s,l,c);d.push(_),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(_)}return!0}return!1},n.prototype.findRowSkip=function(){var t,e,r=this.possibleCenters.length;if(r<=1)return 0;var i=null;try{for(var a=Jf(this.possibleCenters),s=a.next();!s.done;s=a.next()){var l=s.value;if(l.getCount()>=n.CENTER_QUORUM)if(i==null)i=l;else return this.hasSkipped=!0,Math.floor((Math.abs(i.getX()-l.getX())-Math.abs(i.getY()-l.getY()))/2)}}catch(c){t={error:c}}finally{try{s&&!s.done&&(e=a.return)&&e.call(a)}finally{if(t)throw t.error}}return 0},n.prototype.haveMultiplyConfirmedCenters=function(){var t,e,r,i,a=0,s=0,l=this.possibleCenters.length;try{for(var c=Jf(this.possibleCenters),f=c.next();!f.done;f=c.next()){var d=f.value;d.getCount()>=n.CENTER_QUORUM&&(a++,s+=d.getEstimatedModuleSize())}}catch(w){t={error:w}}finally{try{f&&!f.done&&(e=c.return)&&e.call(c)}finally{if(t)throw t.error}}if(a<3)return!1;var g=s/l,m=0;try{for(var v=Jf(this.possibleCenters),_=v.next();!_.done;_=v.next()){var d=_.value;m+=Math.abs(d.getEstimatedModuleSize()-g)}}catch(w){r={error:w}}finally{try{_&&!_.done&&(i=v.return)&&i.call(v)}finally{if(r)throw r.error}}return m<=.05*s},n.prototype.selectBestPatterns=function(){var t,e,r,i,a=this.possibleCenters.length;if(a<3)throw new lt;var s=this.possibleCenters,l;if(a>3){var c=0,f=0;try{for(var d=Jf(this.possibleCenters),g=d.next();!g.done;g=d.next()){var m=g.value,v=m.getEstimatedModuleSize();c+=v,f+=v*v}}catch(N){t={error:N}}finally{try{g&&!g.done&&(e=d.return)&&e.call(d)}finally{if(t)throw t.error}}l=c/a;var _=Math.sqrt(f/a-l*l);s.sort(function(N,k){var O=Math.abs(k.getEstimatedModuleSize()-l),R=Math.abs(N.getEstimatedModuleSize()-l);return O<R?-1:O>R?1:0});for(var w=Math.max(.2*l,_),b=0;b<s.length&&s.length>3;b++){var S=s[b];Math.abs(S.getEstimatedModuleSize()-l)>w&&(s.splice(b,1),b--)}}if(s.length>3){var c=0;try{for(var C=Jf(s),I=C.next();!I.done;I=C.next()){var M=I.value;c+=M.getEstimatedModuleSize()}}catch(k){r={error:k}}finally{try{I&&!I.done&&(i=C.return)&&i.call(C)}finally{if(r)throw r.error}}l=c/s.length,s.sort(function(k,O){if(O.getCount()===k.getCount()){var R=Math.abs(O.getEstimatedModuleSize()-l),D=Math.abs(k.getEstimatedModuleSize()-l);return R<D?1:R>D?-1:0}else return O.getCount()-k.getCount()}),s.splice(3)}return[s[0],s[1],s[2]]},n.CENTER_QUORUM=2,n.MIN_SKIP=3,n.MAX_MODULES=57,n}(),lB=function(){function n(t){this.image=t}return n.prototype.getImage=function(){return this.image},n.prototype.getResultPointCallback=function(){return this.resultPointCallback},n.prototype.detect=function(t){this.resultPointCallback=t==null?null:t.get(Xe.NEED_RESULT_POINT_CALLBACK);var e=new oB(this.image,this.resultPointCallback),r=e.find(t);return this.processFinderPatternInfo(r)},n.prototype.processFinderPatternInfo=function(t){var e=t.getTopLeft(),r=t.getTopRight(),i=t.getBottomLeft(),a=this.calculateModuleSize(e,r,i);if(a<1)throw new lt("No pattern found in proccess finder.");var s=n.computeDimension(e,r,i,a),l=Cl.getProvisionalVersionForDimension(s),c=l.getDimensionForVersion()-7,f=null;if(l.getAlignmentPatternCenters().length>0)for(var d=r.getX()-e.getX()+i.getX(),g=r.getY()-e.getY()+i.getY(),m=1-3/c,v=Math.floor(e.getX()+m*(d-e.getX())),_=Math.floor(e.getY()+m*(g-e.getY())),w=4;w<=16;w<<=1)try{f=this.findAlignmentInRegion(a,v,_,w);break}catch(I){if(!(I instanceof lt))throw I}var b=n.createTransform(e,r,i,f,s),S=n.sampleGrid(this.image,b,s),C;return f===null?C=[i,e,r]:C=[i,e,r,f],new _2(S,C)},n.createTransform=function(t,e,r,i,a){var s=a-3.5,l,c,f,d;return i!==null?(l=i.getX(),c=i.getY(),f=s-3,d=f):(l=e.getX()-t.getX()+r.getX(),c=e.getY()-t.getY()+r.getY(),f=s,d=s),r4.quadrilateralToQuadrilateral(3.5,3.5,s,3.5,f,d,3.5,s,t.getX(),t.getY(),e.getX(),e.getY(),l,c,r.getX(),r.getY())},n.sampleGrid=function(t,e,r){var i=A2.getInstance();return i.sampleGridWithTransform(t,r,r,e)},n.computeDimension=function(t,e,r,i){var a=fe.round(Ct.distance(t,e)/i),s=fe.round(Ct.distance(t,r)/i),l=Math.floor((a+s)/2)+7;switch(l&3){case 0:l++;break;case 2:l--;break;case 3:throw new lt("Dimensions could be not found.")}return l},n.prototype.calculateModuleSize=function(t,e,r){return(this.calculateModuleSizeOneWay(t,e)+this.calculateModuleSizeOneWay(t,r))/2},n.prototype.calculateModuleSizeOneWay=function(t,e){var r=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(t.getX()),Math.floor(t.getY()),Math.floor(e.getX()),Math.floor(e.getY())),i=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(e.getX()),Math.floor(e.getY()),Math.floor(t.getX()),Math.floor(t.getY()));return isNaN(r)?i/7:isNaN(i)?r/7:(r+i)/14},n.prototype.sizeOfBlackWhiteBlackRunBothWays=function(t,e,r,i){var a=this.sizeOfBlackWhiteBlackRun(t,e,r,i),s=1,l=t-(r-t);l<0?(s=t/(t-l),l=0):l>=this.image.getWidth()&&(s=(this.image.getWidth()-1-t)/(l-t),l=this.image.getWidth()-1);var c=Math.floor(e-(i-e)*s);return s=1,c<0?(s=e/(e-c),c=0):c>=this.image.getHeight()&&(s=(this.image.getHeight()-1-e)/(c-e),c=this.image.getHeight()-1),l=Math.floor(t+(l-t)*s),a+=this.sizeOfBlackWhiteBlackRun(t,e,l,c),a-1},n.prototype.sizeOfBlackWhiteBlackRun=function(t,e,r,i){var a=Math.abs(i-e)>Math.abs(r-t);if(a){var s=t;t=e,e=s,s=r,r=i,i=s}for(var l=Math.abs(r-t),c=Math.abs(i-e),f=-l/2,d=t<r?1:-1,g=e<i?1:-1,m=0,v=r+d,_=t,w=e;_!==v;_+=d){var b=a?w:_,S=a?_:w;if(m===1===this.image.get(b,S)){if(m===2)return fe.distance(_,w,t,e);m++}if(f+=c,f>0){if(w===i)break;w+=g,f-=l}}return m===2?fe.distance(r+d,i,t,e):NaN},n.prototype.findAlignmentInRegion=function(t,e,r,i){var a=Math.floor(i*t),s=Math.max(0,e-a),l=Math.min(this.image.getWidth()-1,e+a);if(l-s<t*3)throw new lt("Alignment top exceeds estimated module size.");var c=Math.max(0,r-a),f=Math.min(this.image.getHeight()-1,r+a);if(f-c<t*3)throw new lt("Alignment bottom exceeds estimated module size.");var d=new rB(this.image,s,c,l-s,f-c,t,this.resultPointCallback);return d.find()},n}(),Yy=function(){function n(){this.decoder=new JL}return n.prototype.getDecoder=function(){return this.decoder},n.prototype.decode=function(t,e){var r,i;if(e!=null&&e.get(Xe.PURE_BARCODE)!==void 0){var a=n.extractPureBits(t.getBlackMatrix());r=this.decoder.decodeBitMatrix(a,e),i=n.NO_POINTS}else{var s=new lB(t.getBlackMatrix()).detect(e);r=this.decoder.decodeBitMatrix(s.getBits(),e),i=s.getPoints()}r.getOther()instanceof u4&&r.getOther().applyMirroredCorrection(i);var l=new pr(r.getText(),r.getRawBytes(),void 0,i,Pt.QR_CODE,void 0),c=r.getByteSegments();c!==null&&l.putMetadata(nr.BYTE_SEGMENTS,c);var f=r.getECLevel();return f!==null&&l.putMetadata(nr.ERROR_CORRECTION_LEVEL,f),r.hasStructuredAppend()&&(l.putMetadata(nr.STRUCTURED_APPEND_SEQUENCE,r.getStructuredAppendSequenceNumber()),l.putMetadata(nr.STRUCTURED_APPEND_PARITY,r.getStructuredAppendParity())),l},n.prototype.reset=function(){},n.extractPureBits=function(t){var e=t.getTopLeftOnBit(),r=t.getBottomRightOnBit();if(e===null||r===null)throw new lt;var i=this.moduleSize(e,t),a=e[1],s=r[1],l=e[0],c=r[0];if(l>=c||a>=s)throw new lt;if(s-a!==c-l&&(c=l+(s-a),c>=t.getWidth()))throw new lt;var f=Math.round((c-l+1)/i),d=Math.round((s-a+1)/i);if(f<=0||d<=0)throw new lt;if(d!==f)throw new lt;var g=Math.floor(i/2);a+=g,l+=g;var m=l+Math.floor((f-1)*i)-c;if(m>0){if(m>g)throw new lt;l-=m}var v=a+Math.floor((d-1)*i)-s;if(v>0){if(v>g)throw new lt;a-=v}for(var _=new Aa(f,d),w=0;w<d;w++)for(var b=a+Math.floor(w*i),S=0;S<f;S++)t.get(l+Math.floor(S*i),b)&&_.set(S,w);return _},n.moduleSize=function(t,e){for(var r=e.getHeight(),i=e.getWidth(),a=t[0],s=t[1],l=!0,c=0;a<i&&s<r;){if(l!==e.get(a,s)){if(++c===5)break;l=!l}a++,s++}if(a===i||s===r)throw new lt;return(a-t[0])/7},n.NO_POINTS=new Array,n}(),uB=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},le=function(){function n(){}return n.prototype.PDF417Common=function(){},n.getBitCountSum=function(t){return fe.sum(t)},n.toIntArray=function(t){var e,r;if(t==null||!t.length)return n.EMPTY_INT_ARRAY;var i=new Int32Array(t.length),a=0;try{for(var s=uB(t),l=s.next();!l.done;l=s.next()){var c=l.value;i[a++]=c}}catch(f){e={error:f}}finally{try{l&&!l.done&&(r=s.return)&&r.call(s)}finally{if(e)throw e.error}}return i},n.getCodeword=function(t){var e=Rn.binarySearch(n.SYMBOL_TABLE,t&262143);return e<0?-1:(n.CODEWORD_TABLE[e]-1)%n.NUMBER_OF_CODEWORDS},n.NUMBER_OF_CODEWORDS=929,n.MAX_CODEWORDS_IN_BARCODE=n.NUMBER_OF_CODEWORDS-1,n.MIN_ROWS_IN_BARCODE=3,n.MAX_ROWS_IN_BARCODE=90,n.MODULES_IN_CODEWORD=17,n.MODULES_IN_STOP_PATTERN=18,n.BARS_IN_MODULE=8,n.EMPTY_INT_ARRAY=new Int32Array([]),n.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),n.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]),n}(),cB=function(){function n(t,e){this.bits=t,this.points=e}return n.prototype.getBits=function(){return this.bits},n.prototype.getPoints=function(){return this.points},n}(),fB=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},hB=function(){function n(){}return n.detectMultiple=function(t,e,r){var i=t.getBlackMatrix(),a=n.detect(r,i);return a.length||(i=i.clone(),i.rotate180(),a=n.detect(r,i)),new cB(i,a)},n.detect=function(t,e){for(var r,i,a=new Array,s=0,l=0,c=!1;s<e.getHeight();){var f=n.findVertices(e,s,l);if(f[0]==null&&f[3]==null){if(!c)break;c=!1,l=0;try{for(var d=(r=void 0,fB(a)),g=d.next();!g.done;g=d.next()){var m=g.value;m[1]!=null&&(s=Math.trunc(Math.max(s,m[1].getY()))),m[3]!=null&&(s=Math.max(s,Math.trunc(m[3].getY())))}}catch(v){r={error:v}}finally{try{g&&!g.done&&(i=d.return)&&i.call(d)}finally{if(r)throw r.error}}s+=n.ROW_STEP;continue}if(c=!0,a.push(f),!t)break;f[2]!=null?(l=Math.trunc(f[2].getX()),s=Math.trunc(f[2].getY())):(l=Math.trunc(f[4].getX()),s=Math.trunc(f[4].getY()))}return a},n.findVertices=function(t,e,r){var i=t.getHeight(),a=t.getWidth(),s=new Array(8);return n.copyToResult(s,n.findRowsWithPattern(t,i,a,e,r,n.START_PATTERN),n.INDEXES_START_PATTERN),s[4]!=null&&(r=Math.trunc(s[4].getX()),e=Math.trunc(s[4].getY())),n.copyToResult(s,n.findRowsWithPattern(t,i,a,e,r,n.STOP_PATTERN),n.INDEXES_STOP_PATTERN),s},n.copyToResult=function(t,e,r){for(var i=0;i<r.length;i++)t[r[i]]=e[i]},n.findRowsWithPattern=function(t,e,r,i,a,s){for(var l=new Array(4),c=!1,f=new Int32Array(s.length);i<e;i+=n.ROW_STEP){var d=n.findGuardPattern(t,a,i,r,!1,s,f);if(d!=null){for(;i>0;){var g=n.findGuardPattern(t,a,--i,r,!1,s,f);if(g!=null)d=g;else{i++;break}}l[0]=new Ct(d[0],i),l[1]=new Ct(d[1],i),c=!0;break}}var m=i+1;if(c){for(var v=0,g=Int32Array.from([Math.trunc(l[0].getX()),Math.trunc(l[1].getX())]);m<e;m++){var d=n.findGuardPattern(t,g[0],m,r,!1,s,f);if(d!=null&&Math.abs(g[0]-d[0])<n.MAX_PATTERN_DRIFT&&Math.abs(g[1]-d[1])<n.MAX_PATTERN_DRIFT)g=d,v=0;else{if(v>n.SKIPPED_ROW_COUNT_MAX)break;v++}}m-=v+1,l[2]=new Ct(g[0],m),l[3]=new Ct(g[1],m)}return m-i<n.BARCODE_MIN_HEIGHT&&Rn.fill(l,null),l},n.findGuardPattern=function(t,e,r,i,a,s,l){Rn.fillWithin(l,0,l.length,0);for(var c=e,f=0;t.get(c,r)&&c>0&&f++<n.MAX_PIXEL_DRIFT;)c--;for(var d=c,g=0,m=s.length,v=a;d<i;d++){var _=t.get(d,r);if(_!==v)l[g]++;else{if(g===m-1){if(n.patternMatchVariance(l,s,n.MAX_INDIVIDUAL_VARIANCE)<n.MAX_AVG_VARIANCE)return new Int32Array([c,d]);c+=l[0]+l[1],Fe.arraycopy(l,2,l,0,g-1),l[g-1]=0,l[g]=0,g--}else g++;l[g]=1,v=!v}}return g===m-1&&n.patternMatchVariance(l,s,n.MAX_INDIVIDUAL_VARIANCE)<n.MAX_AVG_VARIANCE?new Int32Array([c,d-1]):null},n.patternMatchVariance=function(t,e,r){for(var i=t.length,a=0,s=0,l=0;l<i;l++)a+=t[l],s+=e[l];if(a<s)return 1/0;var c=a/s;r*=c;for(var f=0,d=0;d<i;d++){var g=t[d],m=e[d]*c,v=g>m?g-m:m-g;if(v>r)return 1/0;f+=v}return f/a},n.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),n.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),n.MAX_AVG_VARIANCE=.42,n.MAX_INDIVIDUAL_VARIANCE=.8,n.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),n.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),n.MAX_PIXEL_DRIFT=3,n.MAX_PATTERN_DRIFT=5,n.SKIPPED_ROW_COUNT_MAX=25,n.ROW_STEP=5,n.BARCODE_MIN_HEIGHT=10,n}(),dB=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},wl=function(){function n(t,e){if(e.length===0)throw new kt;this.field=t;var r=e.length;if(r>1&&e[0]===0){for(var i=1;i<r&&e[i]===0;)i++;i===r?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(r-i),Fe.arraycopy(e,i,this.coefficients,0,this.coefficients.length))}else this.coefficients=e}return n.prototype.getCoefficients=function(){return this.coefficients},n.prototype.getDegree=function(){return this.coefficients.length-1},n.prototype.isZero=function(){return this.coefficients[0]===0},n.prototype.getCoefficient=function(t){return this.coefficients[this.coefficients.length-1-t]},n.prototype.evaluateAt=function(t){var e,r;if(t===0)return this.getCoefficient(0);if(t===1){var i=0;try{for(var a=dB(this.coefficients),s=a.next();!s.done;s=a.next()){var l=s.value;i=this.field.add(i,l)}}catch(g){e={error:g}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(e)throw e.error}}return i}for(var c=this.coefficients[0],f=this.coefficients.length,d=1;d<f;d++)c=this.field.add(this.field.multiply(t,c),this.coefficients[d]);return c},n.prototype.add=function(t){if(!this.field.equals(t.field))throw new kt("ModulusPolys do not have same ModulusGF field");if(this.isZero())return t;if(t.isZero())return this;var e=this.coefficients,r=t.coefficients;if(e.length>r.length){var i=e;e=r,r=i}var a=new Int32Array(r.length),s=r.length-e.length;Fe.arraycopy(r,0,a,0,s);for(var l=s;l<r.length;l++)a[l]=this.field.add(e[l-s],r[l]);return new n(this.field,a)},n.prototype.subtract=function(t){if(!this.field.equals(t.field))throw new kt("ModulusPolys do not have same ModulusGF field");return t.isZero()?this:this.add(t.negative())},n.prototype.multiply=function(t){return t instanceof n?this.multiplyOther(t):this.multiplyScalar(t)},n.prototype.multiplyOther=function(t){if(!this.field.equals(t.field))throw new kt("ModulusPolys do not have same ModulusGF field");if(this.isZero()||t.isZero())return new n(this.field,new Int32Array([0]));for(var e=this.coefficients,r=e.length,i=t.coefficients,a=i.length,s=new Int32Array(r+a-1),l=0;l<r;l++)for(var c=e[l],f=0;f<a;f++)s[l+f]=this.field.add(s[l+f],this.field.multiply(c,i[f]));return new n(this.field,s)},n.prototype.negative=function(){for(var t=this.coefficients.length,e=new Int32Array(t),r=0;r<t;r++)e[r]=this.field.subtract(0,this.coefficients[r]);return new n(this.field,e)},n.prototype.multiplyScalar=function(t){if(t===0)return new n(this.field,new Int32Array([0]));if(t===1)return this;for(var e=this.coefficients.length,r=new Int32Array(e),i=0;i<e;i++)r[i]=this.field.multiply(this.coefficients[i],t);return new n(this.field,r)},n.prototype.multiplyByMonomial=function(t,e){if(t<0)throw new kt;if(e===0)return new n(this.field,new Int32Array([0]));for(var r=this.coefficients.length,i=new Int32Array(r+t),a=0;a<r;a++)i[a]=this.field.multiply(this.coefficients[a],e);return new n(this.field,i)},n.prototype.toString=function(){for(var t=new Xt,e=this.getDegree();e>=0;e--){var r=this.getCoefficient(e);r!==0&&(r<0?(t.append(" - "),r=-r):t.length()>0&&t.append(" + "),(e===0||r!==1)&&t.append(r),e!==0&&(e===1?t.append("x"):(t.append("x^"),t.append(e))))}return t.toString()},n}(),gB=function(){function n(){}return n.prototype.add=function(t,e){return(t+e)%this.modulus},n.prototype.subtract=function(t,e){return(this.modulus+t-e)%this.modulus},n.prototype.exp=function(t){return this.expTable[t]},n.prototype.log=function(t){if(t===0)throw new kt;return this.logTable[t]},n.prototype.inverse=function(t){if(t===0)throw new n4;return this.expTable[this.modulus-this.logTable[t]-1]},n.prototype.multiply=function(t,e){return t===0||e===0?0:this.expTable[(this.logTable[t]+this.logTable[e])%(this.modulus-1)]},n.prototype.getSize=function(){return this.modulus},n.prototype.equals=function(t){return t===this},n}(),pB=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),mB=function(n){pB(t,n);function t(e,r){var i=n.call(this)||this;i.modulus=e,i.expTable=new Int32Array(e),i.logTable=new Int32Array(e);for(var a=1,s=0;s<e;s++)i.expTable[s]=a,a=a*r%e;for(var s=0;s<e-1;s++)i.logTable[i.expTable[s]]=s;return i.zero=new wl(i,new Int32Array([0])),i.one=new wl(i,new Int32Array([1])),i}return t.prototype.getZero=function(){return this.zero},t.prototype.getOne=function(){return this.one},t.prototype.buildMonomial=function(e,r){if(e<0)throw new kt;if(r===0)return this.zero;var i=new Int32Array(e+1);return i[0]=r,new wl(this,i)},t.PDF417_GF=new t(le.NUMBER_OF_CODEWORDS,3),t}(gB),vB=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},yB=function(){function n(){this.field=mB.PDF417_GF}return n.prototype.decode=function(t,e,r){for(var i,a,s=new wl(this.field,t),l=new Int32Array(e),c=!1,f=e;f>0;f--){var d=s.evaluateAt(this.field.exp(f));l[e-f]=d,d!==0&&(c=!0)}if(!c)return 0;var g=this.field.getOne();if(r!=null)try{for(var m=vB(r),v=m.next();!v.done;v=m.next()){var _=v.value,w=this.field.exp(t.length-1-_),b=new wl(this.field,new Int32Array([this.field.subtract(0,w),1]));g=g.multiply(b)}}catch(R){i={error:R}}finally{try{v&&!v.done&&(a=m.return)&&a.call(m)}finally{if(i)throw i.error}}for(var S=new wl(this.field,l),C=this.runEuclideanAlgorithm(this.field.buildMonomial(e,1),S,e),I=C[0],M=C[1],N=this.findErrorLocations(I),k=this.findErrorMagnitudes(M,I,N),f=0;f<N.length;f++){var O=t.length-1-this.field.log(N[f]);if(O<0)throw Gn.getChecksumInstance();t[O]=this.field.subtract(t[O],k[f])}return N.length},n.prototype.runEuclideanAlgorithm=function(t,e,r){if(t.getDegree()<e.getDegree()){var i=t;t=e,e=i}for(var a=t,s=e,l=this.field.getZero(),c=this.field.getOne();s.getDegree()>=Math.round(r/2);){var f=a,d=l;if(a=s,l=c,a.isZero())throw Gn.getChecksumInstance();s=f;for(var g=this.field.getZero(),m=a.getCoefficient(a.getDegree()),v=this.field.inverse(m);s.getDegree()>=a.getDegree()&&!s.isZero();){var _=s.getDegree()-a.getDegree(),w=this.field.multiply(s.getCoefficient(s.getDegree()),v);g=g.add(this.field.buildMonomial(_,w)),s=s.subtract(a.multiplyByMonomial(_,w))}c=g.multiply(l).subtract(d).negative()}var b=c.getCoefficient(0);if(b===0)throw Gn.getChecksumInstance();var S=this.field.inverse(b),C=c.multiply(S),I=s.multiply(S);return[C,I]},n.prototype.findErrorLocations=function(t){for(var e=t.getDegree(),r=new Int32Array(e),i=0,a=1;a<this.field.getSize()&&i<e;a++)t.evaluateAt(a)===0&&(r[i]=this.field.inverse(a),i++);if(i!==e)throw Gn.getChecksumInstance();return r},n.prototype.findErrorMagnitudes=function(t,e,r){for(var i=e.getDegree(),a=new Int32Array(i),s=1;s<=i;s++)a[i-s]=this.field.multiply(s,e.getCoefficient(s));for(var l=new wl(this.field,a),c=r.length,f=new Int32Array(c),s=0;s<c;s++){var d=this.field.inverse(r[s]),g=this.field.subtract(0,t.evaluateAt(d)),m=this.field.inverse(l.evaluateAt(d));f[s]=this.field.multiply(g,m)}return f},n}(),Ky=function(){function n(t,e,r,i,a){t instanceof n?this.constructor_2(t):this.constructor_1(t,e,r,i,a)}return n.prototype.constructor_1=function(t,e,r,i,a){var s=e==null||r==null,l=i==null||a==null;if(s&&l)throw new lt;s?(e=new Ct(0,i.getY()),r=new Ct(0,a.getY())):l&&(i=new Ct(t.getWidth()-1,e.getY()),a=new Ct(t.getWidth()-1,r.getY())),this.image=t,this.topLeft=e,this.bottomLeft=r,this.topRight=i,this.bottomRight=a,this.minX=Math.trunc(Math.min(e.getX(),r.getX())),this.maxX=Math.trunc(Math.max(i.getX(),a.getX())),this.minY=Math.trunc(Math.min(e.getY(),i.getY())),this.maxY=Math.trunc(Math.max(r.getY(),a.getY()))},n.prototype.constructor_2=function(t){this.image=t.image,this.topLeft=t.getTopLeft(),this.bottomLeft=t.getBottomLeft(),this.topRight=t.getTopRight(),this.bottomRight=t.getBottomRight(),this.minX=t.getMinX(),this.maxX=t.getMaxX(),this.minY=t.getMinY(),this.maxY=t.getMaxY()},n.merge=function(t,e){return t==null?e:e==null?t:new n(t.image,t.topLeft,t.bottomLeft,e.topRight,e.bottomRight)},n.prototype.addMissingRows=function(t,e,r){var i=this.topLeft,a=this.bottomLeft,s=this.topRight,l=this.bottomRight;if(t>0){var c=r?this.topLeft:this.topRight,f=Math.trunc(c.getY()-t);f<0&&(f=0);var d=new Ct(c.getX(),f);r?i=d:s=d}if(e>0){var g=r?this.bottomLeft:this.bottomRight,m=Math.trunc(g.getY()+e);m>=this.image.getHeight()&&(m=this.image.getHeight()-1);var v=new Ct(g.getX(),m);r?a=v:l=v}return new n(this.image,i,a,s,l)},n.prototype.getMinX=function(){return this.minX},n.prototype.getMaxX=function(){return this.maxX},n.prototype.getMinY=function(){return this.minY},n.prototype.getMaxY=function(){return this.maxY},n.prototype.getTopLeft=function(){return this.topLeft},n.prototype.getTopRight=function(){return this.topRight},n.prototype.getBottomLeft=function(){return this.bottomLeft},n.prototype.getBottomRight=function(){return this.bottomRight},n}(),xB=function(){function n(t,e,r,i){this.columnCount=t,this.errorCorrectionLevel=i,this.rowCountUpperPart=e,this.rowCountLowerPart=r,this.rowCount=e+r}return n.prototype.getColumnCount=function(){return this.columnCount},n.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},n.prototype.getRowCount=function(){return this.rowCount},n.prototype.getRowCountUpperPart=function(){return this.rowCountUpperPart},n.prototype.getRowCountLowerPart=function(){return this.rowCountLowerPart},n}(),E2=function(){function n(){this.buffer=""}return n.form=function(t,e){var r=-1;function i(s,l,c,f,d,g){if(s==="%%")return"%";if(e[++r]!==void 0){s=f?parseInt(f.substr(1)):void 0;var m=d?parseInt(d.substr(1)):void 0,v;switch(g){case"s":v=e[r];break;case"c":v=e[r][0];break;case"f":v=parseFloat(e[r]).toFixed(s);break;case"p":v=parseFloat(e[r]).toPrecision(s);break;case"e":v=parseFloat(e[r]).toExponential(s);break;case"x":v=parseInt(e[r]).toString(m||16);break;case"d":v=parseFloat(parseInt(e[r],m||10).toPrecision(s)).toFixed(0);break}v=typeof v=="object"?JSON.stringify(v):(+v).toString(m);for(var _=parseInt(c),w=c&&c[0]+""=="0"?"0":" ";v.length<_;)v=l!==void 0?v+w:w+v;return v}}var a=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return t.replace(a,i)},n.prototype.format=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];this.buffer+=n.form(t,e)},n.prototype.toString=function(){return this.buffer},n}(),_B=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},c4=function(){function n(t){this.boundingBox=new Ky(t),this.codewords=new Array(t.getMaxY()-t.getMinY()+1)}return n.prototype.getCodewordNearby=function(t){var e=this.getCodeword(t);if(e!=null)return e;for(var r=1;r<n.MAX_NEARBY_DISTANCE;r++){var i=this.imageRowToCodewordIndex(t)-r;if(i>=0&&(e=this.codewords[i],e!=null)||(i=this.imageRowToCodewordIndex(t)+r,i<this.codewords.length&&(e=this.codewords[i],e!=null)))return e}return null},n.prototype.imageRowToCodewordIndex=function(t){return t-this.boundingBox.getMinY()},n.prototype.setCodeword=function(t,e){this.codewords[this.imageRowToCodewordIndex(t)]=e},n.prototype.getCodeword=function(t){return this.codewords[this.imageRowToCodewordIndex(t)]},n.prototype.getBoundingBox=function(){return this.boundingBox},n.prototype.getCodewords=function(){return this.codewords},n.prototype.toString=function(){var t,e,r=new E2,i=0;try{for(var a=_B(this.codewords),s=a.next();!s.done;s=a.next()){var l=s.value;if(l==null){r.format("%3d:    |   %n",i++);continue}r.format("%3d: %3d|%3d%n",i++,l.getRowNumber(),l.getValue())}}catch(c){t={error:c}}finally{try{s&&!s.done&&(e=a.return)&&e.call(a)}finally{if(t)throw t.error}}return r.toString()},n.MAX_NEARBY_DISTANCE=5,n}(),AB=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},wB=function(n,t){var e=typeof Symbol=="function"&&n[Symbol.iterator];if(!e)return n;var r=e.call(n),i,a=[],s;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(l){s={error:l}}finally{try{i&&!i.done&&(e=r.return)&&e.call(r)}finally{if(s)throw s.error}}return a},mh=function(){function n(){this.values=new Map}return n.prototype.setValue=function(t){t=Math.trunc(t);var e=this.values.get(t);e==null&&(e=0),e++,this.values.set(t,e)},n.prototype.getValue=function(){var t,e,r=-1,i=new Array,a=function(g,m){var v={getKey:function(){return g},getValue:function(){return m}};v.getValue()>r?(r=v.getValue(),i=[],i.push(v.getKey())):v.getValue()===r&&i.push(v.getKey())};try{for(var s=AB(this.values.entries()),l=s.next();!l.done;l=s.next()){var c=wB(l.value,2),f=c[0],d=c[1];a(f,d)}}catch(g){t={error:g}}finally{try{l&&!l.done&&(e=s.return)&&e.call(s)}finally{if(t)throw t.error}}return le.toIntArray(i)},n.prototype.getConfidence=function(t){return this.values.get(t)},n}(),EB=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Pv=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},DS=function(n){EB(t,n);function t(e,r){var i=n.call(this,e)||this;return i._isLeft=r,i}return t.prototype.setRowNumbers=function(){var e,r;try{for(var i=Pv(this.getCodewords()),a=i.next();!a.done;a=i.next()){var s=a.value;s!=null&&s.setRowNumberAsRowIndicatorColumn()}}catch(l){e={error:l}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(e)throw e.error}}},t.prototype.adjustCompleteIndicatorColumnRowNumbers=function(e){var r=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(r,e);for(var i=this.getBoundingBox(),a=this._isLeft?i.getTopLeft():i.getTopRight(),s=this._isLeft?i.getBottomLeft():i.getBottomRight(),l=this.imageRowToCodewordIndex(Math.trunc(a.getY())),c=this.imageRowToCodewordIndex(Math.trunc(s.getY())),f=-1,d=1,g=0,m=l;m<c;m++)if(r[m]!=null){var v=r[m],_=v.getRowNumber()-f;if(_===0)g++;else if(_===1)d=Math.max(d,g),g=1,f=v.getRowNumber();else if(_<0||v.getRowNumber()>=e.getRowCount()||_>m)r[m]=null;else{var w=void 0;d>2?w=(d-2)*_:w=_;for(var b=w>=m,S=1;S<=w&&!b;S++)b=r[m-S]!=null;b?r[m]=null:(f=v.getRowNumber(),g=1)}}},t.prototype.getRowHeights=function(){var e,r,i=this.getBarcodeMetadata();if(i==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(i);var a=new Int32Array(i.getRowCount());try{for(var s=Pv(this.getCodewords()),l=s.next();!l.done;l=s.next()){var c=l.value;if(c!=null){var f=c.getRowNumber();if(f>=a.length)continue;a[f]++}}}catch(d){e={error:d}}finally{try{l&&!l.done&&(r=s.return)&&r.call(s)}finally{if(e)throw e.error}}return a},t.prototype.adjustIncompleteIndicatorColumnRowNumbers=function(e){for(var r=this.getBoundingBox(),i=this._isLeft?r.getTopLeft():r.getTopRight(),a=this._isLeft?r.getBottomLeft():r.getBottomRight(),s=this.imageRowToCodewordIndex(Math.trunc(i.getY())),l=this.imageRowToCodewordIndex(Math.trunc(a.getY())),c=this.getCodewords(),f=-1,d=s;d<l;d++)if(c[d]!=null){var g=c[d];g.setRowNumberAsRowIndicatorColumn();var m=g.getRowNumber()-f;m===0||(m===1?f=g.getRowNumber():g.getRowNumber()>=e.getRowCount()?c[d]=null:f=g.getRowNumber())}},t.prototype.getBarcodeMetadata=function(){var e,r,i=this.getCodewords(),a=new mh,s=new mh,l=new mh,c=new mh;try{for(var f=Pv(i),d=f.next();!d.done;d=f.next()){var g=d.value;if(g!=null){g.setRowNumberAsRowIndicatorColumn();var m=g.getValue()%30,v=g.getRowNumber();switch(this._isLeft||(v+=2),v%3){case 0:s.setValue(m*3+1);break;case 1:c.setValue(m/3),l.setValue(m%3);break;case 2:a.setValue(m+1);break}}}}catch(w){e={error:w}}finally{try{d&&!d.done&&(r=f.return)&&r.call(f)}finally{if(e)throw e.error}}if(a.getValue().length===0||s.getValue().length===0||l.getValue().length===0||c.getValue().length===0||a.getValue()[0]<1||s.getValue()[0]+l.getValue()[0]<le.MIN_ROWS_IN_BARCODE||s.getValue()[0]+l.getValue()[0]>le.MAX_ROWS_IN_BARCODE)return null;var _=new xB(a.getValue()[0],s.getValue()[0],l.getValue()[0],c.getValue()[0]);return this.removeIncorrectCodewords(i,_),_},t.prototype.removeIncorrectCodewords=function(e,r){for(var i=0;i<e.length;i++){var a=e[i];if(e[i]!=null){var s=a.getValue()%30,l=a.getRowNumber();if(l>r.getRowCount()){e[i]=null;continue}switch(this._isLeft||(l+=2),l%3){case 0:s*3+1!==r.getRowCountUpperPart()&&(e[i]=null);break;case 1:(Math.trunc(s/3)!==r.getErrorCorrectionLevel()||s%3!==r.getRowCountLowerPart())&&(e[i]=null);break;case 2:s+1!==r.getColumnCount()&&(e[i]=null);break}}}},t.prototype.isLeft=function(){return this._isLeft},t.prototype.toString=function(){return"IsLeft: "+this._isLeft+`
`+n.prototype.toString.call(this)},t}(c4),bB=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},SB=function(){function n(t,e){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=t,this.barcodeColumnCount=t.getColumnCount(),this.boundingBox=e,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}return n.prototype.getDetectionResultColumns=function(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);var t=le.MAX_CODEWORDS_IN_BARCODE,e;do e=t,t=this.adjustRowNumbersAndGetCount();while(t>0&&t<e);return this.detectionResultColumns},n.prototype.adjustIndicatorColumnRowNumbers=function(t){t!=null&&t.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)},n.prototype.adjustRowNumbersAndGetCount=function(){var t=this.adjustRowNumbersByRow();if(t===0)return 0;for(var e=1;e<this.barcodeColumnCount+1;e++)for(var r=this.detectionResultColumns[e].getCodewords(),i=0;i<r.length;i++)r[i]!=null&&(r[i].hasValidRowNumber()||this.adjustRowNumbers(e,i,r));return t},n.prototype.adjustRowNumbersByRow=function(){this.adjustRowNumbersFromBothRI();var t=this.adjustRowNumbersFromLRI();return t+this.adjustRowNumbersFromRRI()},n.prototype.adjustRowNumbersFromBothRI=function(){if(!(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)){for(var t=this.detectionResultColumns[0].getCodewords(),e=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),r=0;r<t.length;r++)if(t[r]!=null&&e[r]!=null&&t[r].getRowNumber()===e[r].getRowNumber())for(var i=1;i<=this.barcodeColumnCount;i++){var a=this.detectionResultColumns[i].getCodewords()[r];a!=null&&(a.setRowNumber(t[r].getRowNumber()),a.hasValidRowNumber()||(this.detectionResultColumns[i].getCodewords()[r]=null))}}},n.prototype.adjustRowNumbersFromRRI=function(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;for(var t=0,e=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),r=0;r<e.length;r++)if(e[r]!=null)for(var i=e[r].getRowNumber(),a=0,s=this.barcodeColumnCount+1;s>0&&a<this.ADJUST_ROW_NUMBER_SKIP;s--){var l=this.detectionResultColumns[s].getCodewords()[r];l!=null&&(a=n.adjustRowNumberIfValid(i,a,l),l.hasValidRowNumber()||t++)}return t},n.prototype.adjustRowNumbersFromLRI=function(){if(this.detectionResultColumns[0]==null)return 0;for(var t=0,e=this.detectionResultColumns[0].getCodewords(),r=0;r<e.length;r++)if(e[r]!=null)for(var i=e[r].getRowNumber(),a=0,s=1;s<this.barcodeColumnCount+1&&a<this.ADJUST_ROW_NUMBER_SKIP;s++){var l=this.detectionResultColumns[s].getCodewords()[r];l!=null&&(a=n.adjustRowNumberIfValid(i,a,l),l.hasValidRowNumber()||t++)}return t},n.adjustRowNumberIfValid=function(t,e,r){return r==null||r.hasValidRowNumber()||(r.isValidRowNumber(t)?(r.setRowNumber(t),e=0):++e),e},n.prototype.adjustRowNumbers=function(t,e,r){var i,a;if(this.detectionResultColumns[t-1]!=null){var s=r[e],l=this.detectionResultColumns[t-1].getCodewords(),c=l;this.detectionResultColumns[t+1]!=null&&(c=this.detectionResultColumns[t+1].getCodewords());var f=new Array(14);f[2]=l[e],f[3]=c[e],e>0&&(f[0]=r[e-1],f[4]=l[e-1],f[5]=c[e-1]),e>1&&(f[8]=r[e-2],f[10]=l[e-2],f[11]=c[e-2]),e<r.length-1&&(f[1]=r[e+1],f[6]=l[e+1],f[7]=c[e+1]),e<r.length-2&&(f[9]=r[e+2],f[12]=l[e+2],f[13]=c[e+2]);try{for(var d=bB(f),g=d.next();!g.done;g=d.next()){var m=g.value;if(n.adjustRowNumber(s,m))return}}catch(v){i={error:v}}finally{try{g&&!g.done&&(a=d.return)&&a.call(d)}finally{if(i)throw i.error}}}},n.adjustRowNumber=function(t,e){return e==null?!1:e.hasValidRowNumber()&&e.getBucket()===t.getBucket()?(t.setRowNumber(e.getRowNumber()),!0):!1},n.prototype.getBarcodeColumnCount=function(){return this.barcodeColumnCount},n.prototype.getBarcodeRowCount=function(){return this.barcodeMetadata.getRowCount()},n.prototype.getBarcodeECLevel=function(){return this.barcodeMetadata.getErrorCorrectionLevel()},n.prototype.setBoundingBox=function(t){this.boundingBox=t},n.prototype.getBoundingBox=function(){return this.boundingBox},n.prototype.setDetectionResultColumn=function(t,e){this.detectionResultColumns[t]=e},n.prototype.getDetectionResultColumn=function(t){return this.detectionResultColumns[t]},n.prototype.toString=function(){var t=this.detectionResultColumns[0];t==null&&(t=this.detectionResultColumns[this.barcodeColumnCount+1]);for(var e=new E2,r=0;r<t.getCodewords().length;r++){e.format("CW %3d:",r);for(var i=0;i<this.barcodeColumnCount+2;i++){if(this.detectionResultColumns[i]==null){e.format("    |   ");continue}var a=this.detectionResultColumns[i].getCodewords()[r];if(a==null){e.format("    |   ");continue}e.format(" %3d|%3d",a.getRowNumber(),a.getValue())}e.format("%n")}return e.toString()},n}(),TB=function(){function n(t,e,r,i){this.rowNumber=n.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(t),this.endX=Math.trunc(e),this.bucket=Math.trunc(r),this.value=Math.trunc(i)}return n.prototype.hasValidRowNumber=function(){return this.isValidRowNumber(this.rowNumber)},n.prototype.isValidRowNumber=function(t){return t!==n.BARCODE_ROW_UNKNOWN&&this.bucket===t%3*3},n.prototype.setRowNumberAsRowIndicatorColumn=function(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))},n.prototype.getWidth=function(){return this.endX-this.startX},n.prototype.getStartX=function(){return this.startX},n.prototype.getEndX=function(){return this.endX},n.prototype.getBucket=function(){return this.bucket},n.prototype.getValue=function(){return this.value},n.prototype.getRowNumber=function(){return this.rowNumber},n.prototype.setRowNumber=function(t){this.rowNumber=t},n.prototype.toString=function(){return this.rowNumber+"|"+this.value},n.BARCODE_ROW_UNKNOWN=-1,n}(),CB=function(){function n(){}return n.initialize=function(){for(var t=0;t<le.SYMBOL_TABLE.length;t++)for(var e=le.SYMBOL_TABLE[t],r=e&1,i=0;i<le.BARS_IN_MODULE;i++){for(var a=0;(e&1)===r;)a+=1,e>>=1;r=e&1,n.RATIOS_TABLE[t]||(n.RATIOS_TABLE[t]=new Array(le.BARS_IN_MODULE)),n.RATIOS_TABLE[t][le.BARS_IN_MODULE-i-1]=Math.fround(a/le.MODULES_IN_CODEWORD)}this.bSymbolTableReady=!0},n.getDecodedValue=function(t){var e=n.getDecodedCodewordValue(n.sampleBitCounts(t));return e!==-1?e:n.getClosestDecodedValue(t)},n.sampleBitCounts=function(t){for(var e=fe.sum(t),r=new Int32Array(le.BARS_IN_MODULE),i=0,a=0,s=0;s<le.MODULES_IN_CODEWORD;s++){var l=e/(2*le.MODULES_IN_CODEWORD)+s*e/le.MODULES_IN_CODEWORD;a+t[i]<=l&&(a+=t[i],i++),r[i]++}return r},n.getDecodedCodewordValue=function(t){var e=n.getBitValue(t);return le.getCodeword(e)===-1?-1:e},n.getBitValue=function(t){for(var e=0,r=0;r<t.length;r++)for(var i=0;i<t[r];i++)e=e<<1|(r%2===0?1:0);return Math.trunc(e)},n.getClosestDecodedValue=function(t){var e=fe.sum(t),r=new Array(le.BARS_IN_MODULE);if(e>1)for(var i=0;i<r.length;i++)r[i]=Math.fround(t[i]/e);var a=Gy.MAX_VALUE,s=-1;this.bSymbolTableReady||n.initialize();for(var l=0;l<n.RATIOS_TABLE.length;l++){for(var c=0,f=n.RATIOS_TABLE[l],d=0;d<le.BARS_IN_MODULE;d++){var g=Math.fround(f[d]-r[d]);if(c+=Math.fround(g*g),c>=a)break}c<a&&(a=c,s=le.SYMBOL_TABLE[l])}return s},n.bSymbolTableReady=!1,n.RATIOS_TABLE=new Array(le.SYMBOL_TABLE.length).map(function(t){return new Array(le.BARS_IN_MODULE)}),n}(),IB=function(){function n(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}return n.prototype.getSegmentIndex=function(){return this.segmentIndex},n.prototype.setSegmentIndex=function(t){this.segmentIndex=t},n.prototype.getFileId=function(){return this.fileId},n.prototype.setFileId=function(t){this.fileId=t},n.prototype.getOptionalData=function(){return this.optionalData},n.prototype.setOptionalData=function(t){this.optionalData=t},n.prototype.isLastSegment=function(){return this.lastSegment},n.prototype.setLastSegment=function(t){this.lastSegment=t},n.prototype.getSegmentCount=function(){return this.segmentCount},n.prototype.setSegmentCount=function(t){this.segmentCount=t},n.prototype.getSender=function(){return this.sender||null},n.prototype.setSender=function(t){this.sender=t},n.prototype.getAddressee=function(){return this.addressee||null},n.prototype.setAddressee=function(t){this.addressee=t},n.prototype.getFileName=function(){return this.fileName},n.prototype.setFileName=function(t){this.fileName=t},n.prototype.getFileSize=function(){return this.fileSize},n.prototype.setFileSize=function(t){this.fileSize=t},n.prototype.getChecksum=function(){return this.checksum},n.prototype.setChecksum=function(t){this.checksum=t},n.prototype.getTimestamp=function(){return this.timestamp},n.prototype.setTimestamp=function(t){this.timestamp=t},n}(),OS=function(){function n(){}return n.parseLong=function(t,e){return e===void 0&&(e=void 0),parseInt(t,e)},n}(),RB=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),DB=function(n){RB(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.kind="NullPointerException",t}(Br),OB=function(){function n(){}return n.prototype.writeBytes=function(t){this.writeBytesOffset(t,0,t.length)},n.prototype.writeBytesOffset=function(t,e,r){if(t==null)throw new DB;if(e<0||e>t.length||r<0||e+r>t.length||e+r<0)throw new y2;if(r===0)return;for(var i=0;i<r;i++)this.write(t[e+i])},n.prototype.flush=function(){},n.prototype.close=function(){},n}(),MB=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),NB=function(n){MB(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t}(Br),PB=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),kB=function(n){PB(t,n);function t(e){e===void 0&&(e=32);var r=n.call(this)||this;if(r.count=0,e<0)throw new kt("Negative initial size: "+e);return r.buf=new Uint8Array(e),r}return t.prototype.ensureCapacity=function(e){e-this.buf.length>0&&this.grow(e)},t.prototype.grow=function(e){var r=this.buf.length,i=r<<1;if(i-e<0&&(i=e),i<0){if(e<0)throw new NB;i=Zt.MAX_VALUE}this.buf=Rn.copyOfUint8Array(this.buf,i)},t.prototype.write=function(e){this.ensureCapacity(this.count+1),this.buf[this.count]=e,this.count+=1},t.prototype.writeBytesOffset=function(e,r,i){if(r<0||r>e.length||i<0||r+i-e.length>0)throw new y2;this.ensureCapacity(this.count+i),Fe.arraycopy(e,r,this.buf,this.count,i),this.count+=i},t.prototype.writeTo=function(e){e.writeBytesOffset(this.buf,0,this.count)},t.prototype.reset=function(){this.count=0},t.prototype.toByteArray=function(){return Rn.copyOfUint8Array(this.buf,this.count)},t.prototype.size=function(){return this.count},t.prototype.toString=function(e){return e?typeof e=="string"?this.toString_string(e):this.toString_number(e):this.toString_void()},t.prototype.toString_void=function(){return new String(this.buf).toString()},t.prototype.toString_string=function(e){return new String(this.buf).toString()},t.prototype.toString_number=function(e){return new String(this.buf).toString()},t.prototype.close=function(){},t}(OB),Ne;(function(n){n[n.ALPHA=0]="ALPHA",n[n.LOWER=1]="LOWER",n[n.MIXED=2]="MIXED",n[n.PUNCT=3]="PUNCT",n[n.ALPHA_SHIFT=4]="ALPHA_SHIFT",n[n.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(Ne||(Ne={}));function f4(){if(typeof window<"u")return window.BigInt||null;if(typeof global<"u")return global.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}var e1;function no(n){if(typeof e1>"u"&&(e1=f4()),e1===null)throw new Error("BigInt is not supported!");return e1(n)}function LB(){var n=[];n[0]=no(1);var t=no(900);n[1]=t;for(var e=2;e<16;e++)n[e]=n[e-1]*t;return n}var BB=function(){function n(){}return n.decode=function(t,e){var r=new Xt(""),i=In.ISO8859_1;r.enableDecoding(i);for(var a=1,s=t[a++],l=new IB;a<t[0];){switch(s){case n.TEXT_COMPACTION_MODE_LATCH:a=n.textCompaction(t,a,r);break;case n.BYTE_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:a=n.byteCompaction(s,t,i,a,r);break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r.append(t[a++]);break;case n.NUMERIC_COMPACTION_MODE_LATCH:a=n.numericCompaction(t,a,r);break;case n.ECI_CHARSET:In.getCharacterSetECIByValue(t[a++]);break;case n.ECI_GENERAL_PURPOSE:a+=2;break;case n.ECI_USER_DEFINED:a++;break;case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:a=n.decodeMacroBlock(t,a,l);break;case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:throw new xt;default:a--,a=n.textCompaction(t,a,r);break}if(a<t.length)s=t[a++];else throw xt.getFormatInstance()}if(r.length()===0)throw xt.getFormatInstance();var c=new Yg(null,r.toString(),null,e);return c.setOther(l),c},n.decodeMacroBlock=function(t,e,r){if(e+n.NUMBER_OF_SEQUENCE_CODEWORDS>t[0])throw xt.getFormatInstance();for(var i=new Int32Array(n.NUMBER_OF_SEQUENCE_CODEWORDS),a=0;a<n.NUMBER_OF_SEQUENCE_CODEWORDS;a++,e++)i[a]=t[e];r.setSegmentIndex(Zt.parseInt(n.decodeBase900toBase10(i,n.NUMBER_OF_SEQUENCE_CODEWORDS)));var s=new Xt;e=n.textCompaction(t,e,s),r.setFileId(s.toString());var l=-1;for(t[e]===n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(l=e+1);e<t[0];)switch(t[e]){case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(e++,t[e]){case n.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:var c=new Xt;e=n.textCompaction(t,e+1,c),r.setFileName(c.toString());break;case n.MACRO_PDF417_OPTIONAL_FIELD_SENDER:var f=new Xt;e=n.textCompaction(t,e+1,f),r.setSender(f.toString());break;case n.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:var d=new Xt;e=n.textCompaction(t,e+1,d),r.setAddressee(d.toString());break;case n.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:var g=new Xt;e=n.numericCompaction(t,e+1,g),r.setSegmentCount(Zt.parseInt(g.toString()));break;case n.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:var m=new Xt;e=n.numericCompaction(t,e+1,m),r.setTimestamp(OS.parseLong(m.toString()));break;case n.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:var v=new Xt;e=n.numericCompaction(t,e+1,v),r.setChecksum(Zt.parseInt(v.toString()));break;case n.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:var _=new Xt;e=n.numericCompaction(t,e+1,_),r.setFileSize(OS.parseLong(_.toString()));break;default:throw xt.getFormatInstance()}break;case n.MACRO_PDF417_TERMINATOR:e++,r.setLastSegment(!0);break;default:throw xt.getFormatInstance()}if(l!==-1){var w=e-l;r.isLastSegment()&&w--,r.setOptionalData(Rn.copyOfRange(t,l,l+w))}return e},n.textCompaction=function(t,e,r){for(var i=new Int32Array((t[0]-e)*2),a=new Int32Array((t[0]-e)*2),s=0,l=!1;e<t[0]&&!l;){var c=t[e++];if(c<n.TEXT_COMPACTION_MODE_LATCH)i[s]=c/30,i[s+1]=c%30,s+=2;else switch(c){case n.TEXT_COMPACTION_MODE_LATCH:i[s++]=n.TEXT_COMPACTION_MODE_LATCH;break;case n.BYTE_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:case n.NUMERIC_COMPACTION_MODE_LATCH:case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:e--,l=!0;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i[s]=n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,c=t[e++],a[s]=c,s++;break}}return n.decodeTextCompaction(i,a,s,r),e},n.decodeTextCompaction=function(t,e,r,i){for(var a=Ne.ALPHA,s=Ne.ALPHA,l=0;l<r;){var c=t[l],f="";switch(a){case Ne.ALPHA:if(c<26)f=String.fromCharCode(65+c);else switch(c){case 26:f=" ";break;case n.LL:a=Ne.LOWER;break;case n.ML:a=Ne.MIXED;break;case n.PS:s=a,a=Ne.PUNCT_SHIFT;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(e[l]);break;case n.TEXT_COMPACTION_MODE_LATCH:a=Ne.ALPHA;break}break;case Ne.LOWER:if(c<26)f=String.fromCharCode(97+c);else switch(c){case 26:f=" ";break;case n.AS:s=a,a=Ne.ALPHA_SHIFT;break;case n.ML:a=Ne.MIXED;break;case n.PS:s=a,a=Ne.PUNCT_SHIFT;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(e[l]);break;case n.TEXT_COMPACTION_MODE_LATCH:a=Ne.ALPHA;break}break;case Ne.MIXED:if(c<n.PL)f=n.MIXED_CHARS[c];else switch(c){case n.PL:a=Ne.PUNCT;break;case 26:f=" ";break;case n.LL:a=Ne.LOWER;break;case n.AL:a=Ne.ALPHA;break;case n.PS:s=a,a=Ne.PUNCT_SHIFT;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(e[l]);break;case n.TEXT_COMPACTION_MODE_LATCH:a=Ne.ALPHA;break}break;case Ne.PUNCT:if(c<n.PAL)f=n.PUNCT_CHARS[c];else switch(c){case n.PAL:a=Ne.ALPHA;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(e[l]);break;case n.TEXT_COMPACTION_MODE_LATCH:a=Ne.ALPHA;break}break;case Ne.ALPHA_SHIFT:if(a=s,c<26)f=String.fromCharCode(65+c);else switch(c){case 26:f=" ";break;case n.TEXT_COMPACTION_MODE_LATCH:a=Ne.ALPHA;break}break;case Ne.PUNCT_SHIFT:if(a=s,c<n.PAL)f=n.PUNCT_CHARS[c];else switch(c){case n.PAL:a=Ne.ALPHA;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(e[l]);break;case n.TEXT_COMPACTION_MODE_LATCH:a=Ne.ALPHA;break}break}f!==""&&i.append(f),l++}},n.byteCompaction=function(t,e,r,i,a){var s=new kB,l=0,c=0,f=!1;switch(t){case n.BYTE_COMPACTION_MODE_LATCH:for(var d=new Int32Array(6),g=e[i++];i<e[0]&&!f;)switch(d[l++]=g,c=900*c+g,g=e[i++],g){case n.TEXT_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH:case n.NUMERIC_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:i--,f=!0;break;default:if(l%5===0&&l>0){for(var m=0;m<6;++m)s.write(Number(no(c)>>no(8*(5-m))));c=0,l=0}break}i===e[0]&&g<n.TEXT_COMPACTION_MODE_LATCH&&(d[l++]=g);for(var v=0;v<l;v++)s.write(d[v]);break;case n.BYTE_COMPACTION_MODE_LATCH_6:for(;i<e[0]&&!f;){var _=e[i++];if(_<n.TEXT_COMPACTION_MODE_LATCH)l++,c=900*c+_;else switch(_){case n.TEXT_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH:case n.NUMERIC_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:i--,f=!0;break}if(l%5===0&&l>0){for(var m=0;m<6;++m)s.write(Number(no(c)>>no(8*(5-m))));c=0,l=0}}break}return a.append(wi.decode(s.toByteArray(),r)),i},n.numericCompaction=function(t,e,r){for(var i=0,a=!1,s=new Int32Array(n.MAX_NUMERIC_CODEWORDS);e<t[0]&&!a;){var l=t[e++];if(e===t[0]&&(a=!0),l<n.TEXT_COMPACTION_MODE_LATCH)s[i]=l,i++;else switch(l){case n.TEXT_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:e--,a=!0;break}(i%n.MAX_NUMERIC_CODEWORDS===0||l===n.NUMERIC_COMPACTION_MODE_LATCH||a)&&i>0&&(r.append(n.decodeBase900toBase10(s,i)),i=0)}return e},n.decodeBase900toBase10=function(t,e){for(var r=no(0),i=0;i<e;i++)r+=n.EXP900[e-i-1]*no(t[i]);var a=r.toString();if(a.charAt(0)!=="1")throw new xt;return a.substring(1)},n.TEXT_COMPACTION_MODE_LATCH=900,n.BYTE_COMPACTION_MODE_LATCH=901,n.NUMERIC_COMPACTION_MODE_LATCH=902,n.BYTE_COMPACTION_MODE_LATCH_6=924,n.ECI_USER_DEFINED=925,n.ECI_GENERAL_PURPOSE=926,n.ECI_CHARSET=927,n.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,n.MACRO_PDF417_TERMINATOR=922,n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,n.MAX_NUMERIC_CODEWORDS=15,n.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,n.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,n.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,n.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,n.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,n.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,n.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,n.PL=25,n.LL=27,n.AS=27,n.ML=28,n.AL=28,n.PS=29,n.PAL=29,n.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,n.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",n.EXP900=f4()?LB():[],n.NUMBER_OF_SEQUENCE_CODEWORDS=2,n}(),th=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},VB=function(){function n(){}return n.decode=function(t,e,r,i,a,s,l){for(var c=new Ky(t,e,r,i,a),f=null,d=null,g,m=!0;;m=!1){if(e!=null&&(f=n.getRowIndicatorColumn(t,c,e,!0,s,l)),i!=null&&(d=n.getRowIndicatorColumn(t,c,i,!1,s,l)),g=n.merge(f,d),g==null)throw lt.getNotFoundInstance();var v=g.getBoundingBox();if(m&&v!=null&&(v.getMinY()<c.getMinY()||v.getMaxY()>c.getMaxY()))c=v;else break}g.setBoundingBox(c);var _=g.getBarcodeColumnCount()+1;g.setDetectionResultColumn(0,f),g.setDetectionResultColumn(_,d);for(var w=f!=null,b=1;b<=_;b++){var S=w?b:_-b;if(g.getDetectionResultColumn(S)===void 0){var C=void 0;S===0||S===_?C=new DS(c,S===0):C=new c4(c),g.setDetectionResultColumn(S,C);for(var I=-1,M=I,N=c.getMinY();N<=c.getMaxY();N++){if(I=n.getStartColumn(g,S,N,w),I<0||I>c.getMaxX()){if(M===-1)continue;I=M}var k=n.detectCodeword(t,c.getMinX(),c.getMaxX(),w,I,N,s,l);k!=null&&(C.setCodeword(N,k),M=I,s=Math.min(s,k.getWidth()),l=Math.max(l,k.getWidth()))}}}return n.createDecoderResult(g)},n.merge=function(t,e){if(t==null&&e==null)return null;var r=n.getBarcodeMetadata(t,e);if(r==null)return null;var i=Ky.merge(n.adjustBoundingBox(t),n.adjustBoundingBox(e));return new SB(r,i)},n.adjustBoundingBox=function(t){var e,r;if(t==null)return null;var i=t.getRowHeights();if(i==null)return null;var a=n.getMax(i),s=0;try{for(var l=th(i),c=l.next();!c.done;c=l.next()){var f=c.value;if(s+=a-f,f>0)break}}catch(v){e={error:v}}finally{try{c&&!c.done&&(r=l.return)&&r.call(l)}finally{if(e)throw e.error}}for(var d=t.getCodewords(),g=0;s>0&&d[g]==null;g++)s--;for(var m=0,g=i.length-1;g>=0&&(m+=a-i[g],!(i[g]>0));g--);for(var g=d.length-1;m>0&&d[g]==null;g--)m--;return t.getBoundingBox().addMissingRows(s,m,t.isLeft())},n.getMax=function(t){var e,r,i=-1;try{for(var a=th(t),s=a.next();!s.done;s=a.next()){var l=s.value;i=Math.max(i,l)}}catch(c){e={error:c}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(e)throw e.error}}return i},n.getBarcodeMetadata=function(t,e){var r;if(t==null||(r=t.getBarcodeMetadata())==null)return e==null?null:e.getBarcodeMetadata();var i;return e==null||(i=e.getBarcodeMetadata())==null?r:r.getColumnCount()!==i.getColumnCount()&&r.getErrorCorrectionLevel()!==i.getErrorCorrectionLevel()&&r.getRowCount()!==i.getRowCount()?null:r},n.getRowIndicatorColumn=function(t,e,r,i,a,s){for(var l=new DS(e,i),c=0;c<2;c++)for(var f=c===0?1:-1,d=Math.trunc(Math.trunc(r.getX())),g=Math.trunc(Math.trunc(r.getY()));g<=e.getMaxY()&&g>=e.getMinY();g+=f){var m=n.detectCodeword(t,0,t.getWidth(),i,d,g,a,s);m!=null&&(l.setCodeword(g,m),i?d=m.getStartX():d=m.getEndX())}return l},n.adjustCodewordCount=function(t,e){var r=e[0][1],i=r.getValue(),a=t.getBarcodeColumnCount()*t.getBarcodeRowCount()-n.getNumberOfECCodeWords(t.getBarcodeECLevel());if(i.length===0){if(a<1||a>le.MAX_CODEWORDS_IN_BARCODE)throw lt.getNotFoundInstance();r.setValue(a)}else i[0]!==a&&r.setValue(a)},n.createDecoderResult=function(t){var e=n.createBarcodeMatrix(t);n.adjustCodewordCount(t,e);for(var r=new Array,i=new Int32Array(t.getBarcodeRowCount()*t.getBarcodeColumnCount()),a=[],s=new Array,l=0;l<t.getBarcodeRowCount();l++)for(var c=0;c<t.getBarcodeColumnCount();c++){var f=e[l][c+1].getValue(),d=l*t.getBarcodeColumnCount()+c;f.length===0?r.push(d):f.length===1?i[d]=f[0]:(s.push(d),a.push(f))}for(var g=new Array(a.length),m=0;m<g.length;m++)g[m]=a[m];return n.createDecoderResultFromAmbiguousValues(t.getBarcodeECLevel(),i,le.toIntArray(r),le.toIntArray(s),g)},n.createDecoderResultFromAmbiguousValues=function(t,e,r,i,a){for(var s=new Int32Array(i.length),l=100;l-- >0;){for(var c=0;c<s.length;c++)e[i[c]]=a[c][s[c]];try{return n.decodeCodewords(e,t,r)}catch(d){var f=d instanceof Gn;if(!f)throw d}if(s.length===0)throw Gn.getChecksumInstance();for(var c=0;c<s.length;c++)if(s[c]<a[c].length-1){s[c]++;break}else if(s[c]=0,c===s.length-1)throw Gn.getChecksumInstance()}throw Gn.getChecksumInstance()},n.createBarcodeMatrix=function(t){for(var e,r,i,a,s=Array.from({length:t.getBarcodeRowCount()},function(){return new Array(t.getBarcodeColumnCount()+2)}),l=0;l<s.length;l++)for(var c=0;c<s[l].length;c++)s[l][c]=new mh;var f=0;try{for(var d=th(t.getDetectionResultColumns()),g=d.next();!g.done;g=d.next()){var m=g.value;if(m!=null)try{for(var v=(i=void 0,th(m.getCodewords())),_=v.next();!_.done;_=v.next()){var w=_.value;if(w!=null){var b=w.getRowNumber();if(b>=0){if(b>=s.length)continue;s[b][f].setValue(w.getValue())}}}}catch(S){i={error:S}}finally{try{_&&!_.done&&(a=v.return)&&a.call(v)}finally{if(i)throw i.error}}f++}}catch(S){e={error:S}}finally{try{g&&!g.done&&(r=d.return)&&r.call(d)}finally{if(e)throw e.error}}return s},n.isValidBarcodeColumn=function(t,e){return e>=0&&e<=t.getBarcodeColumnCount()+1},n.getStartColumn=function(t,e,r,i){var a,s,l=i?1:-1,c=null;if(n.isValidBarcodeColumn(t,e-l)&&(c=t.getDetectionResultColumn(e-l).getCodeword(r)),c!=null)return i?c.getEndX():c.getStartX();if(c=t.getDetectionResultColumn(e).getCodewordNearby(r),c!=null)return i?c.getStartX():c.getEndX();if(n.isValidBarcodeColumn(t,e-l)&&(c=t.getDetectionResultColumn(e-l).getCodewordNearby(r)),c!=null)return i?c.getEndX():c.getStartX();for(var f=0;n.isValidBarcodeColumn(t,e-l);){e-=l;try{for(var d=(a=void 0,th(t.getDetectionResultColumn(e).getCodewords())),g=d.next();!g.done;g=d.next()){var m=g.value;if(m!=null)return(i?m.getEndX():m.getStartX())+l*f*(m.getEndX()-m.getStartX())}}catch(v){a={error:v}}finally{try{g&&!g.done&&(s=d.return)&&s.call(d)}finally{if(a)throw a.error}}f++}return i?t.getBoundingBox().getMinX():t.getBoundingBox().getMaxX()},n.detectCodeword=function(t,e,r,i,a,s,l,c){a=n.adjustCodewordStartColumn(t,e,r,i,a,s);var f=n.getModuleBitCount(t,e,r,i,a,s);if(f==null)return null;var d,g=fe.sum(f);if(i)d=a+g;else{for(var m=0;m<f.length/2;m++){var v=f[m];f[m]=f[f.length-1-m],f[f.length-1-m]=v}d=a,a=d-g}if(!n.checkCodewordSkew(g,l,c))return null;var _=CB.getDecodedValue(f),w=le.getCodeword(_);return w===-1?null:new TB(a,d,n.getCodewordBucketNumber(_),w)},n.getModuleBitCount=function(t,e,r,i,a,s){for(var l=a,c=new Int32Array(8),f=0,d=i?1:-1,g=i;(i?l<r:l>=e)&&f<c.length;)t.get(l,s)===g?(c[f]++,l+=d):(f++,g=!g);return f===c.length||l===(i?r:e)&&f===c.length-1?c:null},n.getNumberOfECCodeWords=function(t){return 2<<t},n.adjustCodewordStartColumn=function(t,e,r,i,a,s){for(var l=a,c=i?-1:1,f=0;f<2;f++){for(;(i?l>=e:l<r)&&i===t.get(l,s);){if(Math.abs(a-l)>n.CODEWORD_SKEW_SIZE)return a;l+=c}c=-c,i=!i}return l},n.checkCodewordSkew=function(t,e,r){return e-n.CODEWORD_SKEW_SIZE<=t&&t<=r+n.CODEWORD_SKEW_SIZE},n.decodeCodewords=function(t,e,r){if(t.length===0)throw xt.getFormatInstance();var i=1<<e+1,a=n.correctErrors(t,r,i);n.verifyCodewordCount(t,i);var s=BB.decode(t,""+e);return s.setErrorsCorrected(a),s.setErasures(r.length),s},n.correctErrors=function(t,e,r){if(e!=null&&e.length>r/2+n.MAX_ERRORS||r<0||r>n.MAX_EC_CODEWORDS)throw Gn.getChecksumInstance();return n.errorCorrection.decode(t,r,e)},n.verifyCodewordCount=function(t,e){if(t.length<4)throw xt.getFormatInstance();var r=t[0];if(r>t.length)throw xt.getFormatInstance();if(r===0)if(e<t.length)t[0]=t.length-e;else throw xt.getFormatInstance()},n.getBitCountForCodeword=function(t){for(var e=new Int32Array(8),r=0,i=e.length-1;!((t&1)!==r&&(r=t&1,i--,i<0));)e[i]++,t>>=1;return e},n.getCodewordBucketNumber=function(t){return t instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(t):this.getCodewordBucketNumber_number(t)},n.getCodewordBucketNumber_number=function(t){return n.getCodewordBucketNumber(n.getBitCountForCodeword(t))},n.getCodewordBucketNumber_Int32Array=function(t){return(t[0]-t[2]+t[4]-t[6]+9)%9},n.toString=function(t){for(var e=new E2,r=0;r<t.length;r++){e.format("Row %2d: ",r);for(var i=0;i<t[r].length;i++){var a=t[r][i];a.getValue().length===0?e.format("        ",null):e.format("%4d(%2d)",a.getValue()[0],a.getConfidence(a.getValue()[0]))}e.format("%n")}return e.toString()},n.CODEWORD_SKEW_SIZE=2,n.MAX_ERRORS=3,n.MAX_EC_CODEWORDS=512,n.errorCorrection=new yB,n}(),FB=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Zy=function(){function n(){}return n.prototype.decode=function(t,e){e===void 0&&(e=null);var r=n.decode(t,e,!1);if(r==null||r.length===0||r[0]==null)throw lt.getNotFoundInstance();return r[0]},n.prototype.decodeMultiple=function(t,e){e===void 0&&(e=null);try{return n.decode(t,e,!0)}catch(r){throw r instanceof xt||r instanceof Gn?lt.getNotFoundInstance():r}},n.decode=function(t,e,r){var i,a,s=new Array,l=hB.detectMultiple(t,e,r);try{for(var c=FB(l.getPoints()),f=c.next();!f.done;f=c.next()){var d=f.value,g=VB.decode(l.getBits(),d[4],d[5],d[6],d[7],n.getMinCodewordWidth(d),n.getMaxCodewordWidth(d)),m=new pr(g.getText(),g.getRawBytes(),void 0,d,Pt.PDF_417);m.putMetadata(nr.ERROR_CORRECTION_LEVEL,g.getECLevel());var v=g.getOther();v!=null&&m.putMetadata(nr.PDF417_EXTRA_METADATA,v),s.push(m)}}catch(_){i={error:_}}finally{try{f&&!f.done&&(a=c.return)&&a.call(c)}finally{if(i)throw i.error}}return s.map(function(_){return _})},n.getMaxWidth=function(t,e){return t==null||e==null?0:Math.trunc(Math.abs(t.getX()-e.getX()))},n.getMinWidth=function(t,e){return t==null||e==null?Zt.MAX_VALUE:Math.trunc(Math.abs(t.getX()-e.getX()))},n.getMaxCodewordWidth=function(t){return Math.floor(Math.max(Math.max(n.getMaxWidth(t[0],t[4]),n.getMaxWidth(t[6],t[2])*le.MODULES_IN_CODEWORD/le.MODULES_IN_STOP_PATTERN),Math.max(n.getMaxWidth(t[1],t[5]),n.getMaxWidth(t[7],t[3])*le.MODULES_IN_CODEWORD/le.MODULES_IN_STOP_PATTERN)))},n.getMinCodewordWidth=function(t){return Math.floor(Math.min(Math.min(n.getMinWidth(t[0],t[4]),n.getMinWidth(t[6],t[2])*le.MODULES_IN_CODEWORD/le.MODULES_IN_STOP_PATTERN),Math.min(n.getMinWidth(t[1],t[5]),n.getMinWidth(t[7],t[3])*le.MODULES_IN_CODEWORD/le.MODULES_IN_STOP_PATTERN)))},n.prototype.reset=function(){},n}(),UB=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),MS=function(n){UB(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.kind="ReaderException",t}(Br),NS=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},jB=function(){function n(){}return n.prototype.decode=function(t,e){return this.setHints(e),this.decodeInternal(t)},n.prototype.decodeWithState=function(t){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(t)},n.prototype.setHints=function(t){this.hints=t;var e=t!=null&&t.get(Xe.TRY_HARDER)!==void 0,r=t==null?null:t.get(Xe.POSSIBLE_FORMATS),i=new Array;if(r!=null){var a=r.some(function(s){return s===Pt.UPC_A||s===Pt.UPC_E||s===Pt.EAN_13||s===Pt.EAN_8||s===Pt.CODABAR||s===Pt.CODE_39||s===Pt.CODE_93||s===Pt.CODE_128||s===Pt.ITF||s===Pt.RSS_14||s===Pt.RSS_EXPANDED});a&&!e&&i.push(new ph(t)),r.includes(Pt.QR_CODE)&&i.push(new Yy),r.includes(Pt.DATA_MATRIX)&&i.push(new Xy),r.includes(Pt.AZTEC)&&i.push(new qy),r.includes(Pt.PDF_417)&&i.push(new Zy),a&&e&&i.push(new ph(t))}i.length===0&&(e||i.push(new ph(t)),i.push(new Yy),i.push(new Xy),i.push(new qy),i.push(new Zy),e&&i.push(new ph(t))),this.readers=i},n.prototype.reset=function(){var t,e;if(this.readers!==null)try{for(var r=NS(this.readers),i=r.next();!i.done;i=r.next()){var a=i.value;a.reset()}}catch(s){t={error:s}}finally{try{i&&!i.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}},n.prototype.decodeInternal=function(t){var e,r;if(this.readers===null)throw new MS("No readers where selected, nothing can be read.");try{for(var i=NS(this.readers),a=i.next();!a.done;a=i.next()){var s=a.value;try{return s.decode(t,this.hints)}catch(l){if(l instanceof MS)continue}}}catch(l){e={error:l}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(e)throw e.error}}throw new lt("No MultiFormat Readers were able to detect the code.")},n}(),zB=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),HB=function(n){zB(t,n);function t(e,r){e===void 0&&(e=null),r===void 0&&(r=500);var i=this,a=new jB;return a.setHints(e),i=n.call(this,a,r)||this,i}return t.prototype.decodeBitmap=function(e){return this.reader.decodeWithState(e)},t}(Lc),GB=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}();(function(n){GB(t,n);function t(e){return e===void 0&&(e=500),n.call(this,new Zy,e)||this}return t})(Lc);var $B=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}();(function(n){$B(t,n);function t(e){return e===void 0&&(e=500),n.call(this,new Yy,e)||this}return t})(Lc);var Qy;(function(n){n[n.ERROR_CORRECTION=0]="ERROR_CORRECTION",n[n.CHARACTER_SET=1]="CHARACTER_SET",n[n.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",n[n.DATA_MATRIX_COMPACT=3]="DATA_MATRIX_COMPACT",n[n.MIN_SIZE=4]="MIN_SIZE",n[n.MAX_SIZE=5]="MAX_SIZE",n[n.MARGIN=6]="MARGIN",n[n.PDF417_COMPACT=7]="PDF417_COMPACT",n[n.PDF417_COMPACTION=8]="PDF417_COMPACTION",n[n.PDF417_DIMENSIONS=9]="PDF417_DIMENSIONS",n[n.AZTEC_LAYERS=10]="AZTEC_LAYERS",n[n.QR_VERSION=11]="QR_VERSION",n[n.GS1_FORMAT=12]="GS1_FORMAT",n[n.FORCE_C40=13]="FORCE_C40"})(Qy||(Qy={}));const n1=Qy;var h4=function(){function n(t){this.field=t,this.cachedGenerators=[],this.cachedGenerators.push(new yo(t,Int32Array.from([1])))}return n.prototype.buildGenerator=function(t){var e=this.cachedGenerators;if(t>=e.length)for(var r=e[e.length-1],i=this.field,a=e.length;a<=t;a++){var s=r.multiply(new yo(i,Int32Array.from([1,i.exp(a-1+i.getGeneratorBase())])));e.push(s),r=s}return e[t]},n.prototype.encode=function(t,e){if(e===0)throw new kt("No error correction bytes");var r=t.length-e;if(r<=0)throw new kt("No data bytes provided");var i=this.buildGenerator(e),a=new Int32Array(r);Fe.arraycopy(t,0,a,0,r);var s=new yo(this.field,a);s=s.multiplyByMonomial(e,1);for(var l=s.divide(i)[1],c=l.getCoefficients(),f=e-c.length,d=0;d<f;d++)t[r+d]=0;Fe.arraycopy(c,0,t,r+f,c.length)},n}(),vh=function(){function n(){}return n.applyMaskPenaltyRule1=function(t){return n.applyMaskPenaltyRule1Internal(t,!0)+n.applyMaskPenaltyRule1Internal(t,!1)},n.applyMaskPenaltyRule2=function(t){for(var e=0,r=t.getArray(),i=t.getWidth(),a=t.getHeight(),s=0;s<a-1;s++)for(var l=r[s],c=0;c<i-1;c++){var f=l[c];f===l[c+1]&&f===r[s+1][c]&&f===r[s+1][c+1]&&e++}return n.N2*e},n.applyMaskPenaltyRule3=function(t){for(var e=0,r=t.getArray(),i=t.getWidth(),a=t.getHeight(),s=0;s<a;s++)for(var l=0;l<i;l++){var c=r[s];l+6<i&&c[l]===1&&c[l+1]===0&&c[l+2]===1&&c[l+3]===1&&c[l+4]===1&&c[l+5]===0&&c[l+6]===1&&(n.isWhiteHorizontal(c,l-4,l)||n.isWhiteHorizontal(c,l+7,l+11))&&e++,s+6<a&&r[s][l]===1&&r[s+1][l]===0&&r[s+2][l]===1&&r[s+3][l]===1&&r[s+4][l]===1&&r[s+5][l]===0&&r[s+6][l]===1&&(n.isWhiteVertical(r,l,s-4,s)||n.isWhiteVertical(r,l,s+7,s+11))&&e++}return e*n.N3},n.isWhiteHorizontal=function(t,e,r){e=Math.max(e,0),r=Math.min(r,t.length);for(var i=e;i<r;i++)if(t[i]===1)return!1;return!0},n.isWhiteVertical=function(t,e,r,i){r=Math.max(r,0),i=Math.min(i,t.length);for(var a=r;a<i;a++)if(t[a][e]===1)return!1;return!0},n.applyMaskPenaltyRule4=function(t){for(var e=0,r=t.getArray(),i=t.getWidth(),a=t.getHeight(),s=0;s<a;s++)for(var l=r[s],c=0;c<i;c++)l[c]===1&&e++;var f=t.getHeight()*t.getWidth(),d=Math.floor(Math.abs(e*2-f)*10/f);return d*n.N4},n.getDataMaskBit=function(t,e,r){var i,a;switch(t){case 0:i=r+e&1;break;case 1:i=r&1;break;case 2:i=e%3;break;case 3:i=(r+e)%3;break;case 4:i=Math.floor(r/2)+Math.floor(e/3)&1;break;case 5:a=r*e,i=(a&1)+a%3;break;case 6:a=r*e,i=(a&1)+a%3&1;break;case 7:a=r*e,i=a%3+(r+e&1)&1;break;default:throw new kt("Invalid mask pattern: "+t)}return i===0},n.applyMaskPenaltyRule1Internal=function(t,e){for(var r=0,i=e?t.getHeight():t.getWidth(),a=e?t.getWidth():t.getHeight(),s=t.getArray(),l=0;l<i;l++){for(var c=0,f=-1,d=0;d<a;d++){var g=e?s[l][d]:s[d][l];g===f?c++:(c>=5&&(r+=n.N1+(c-5)),c=1,f=g)}c>=5&&(r+=n.N1+(c-5))}return r},n.N1=3,n.N2=3,n.N3=40,n.N4=10,n}(),qB=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},WB=function(){function n(t,e){this.width=t,this.height=e;for(var r=new Array(e),i=0;i!==e;i++)r[i]=new Uint8Array(t);this.bytes=r}return n.prototype.getHeight=function(){return this.height},n.prototype.getWidth=function(){return this.width},n.prototype.get=function(t,e){return this.bytes[e][t]},n.prototype.getArray=function(){return this.bytes},n.prototype.setNumber=function(t,e,r){this.bytes[e][t]=r},n.prototype.setBoolean=function(t,e,r){this.bytes[e][t]=r?1:0},n.prototype.clear=function(t){var e,r;try{for(var i=qB(this.bytes),a=i.next();!a.done;a=i.next()){var s=a.value;Rn.fill(s,t)}}catch(l){e={error:l}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(e)throw e.error}}},n.prototype.equals=function(t){if(!(t instanceof n))return!1;var e=t;if(this.width!==e.width||this.height!==e.height)return!1;for(var r=0,i=this.height;r<i;++r)for(var a=this.bytes[r],s=e.bytes[r],l=0,c=this.width;l<c;++l)if(a[l]!==s[l])return!1;return!0},n.prototype.toString=function(){for(var t=new Xt,e=0,r=this.height;e<r;++e){for(var i=this.bytes[e],a=0,s=this.width;a<s;++a)switch(i[a]){case 0:t.append(" 0");break;case 1:t.append(" 1");break;default:t.append("  ");break}t.append(`
`)}return t.toString()},n}(),Jy=function(){function n(){this.maskPattern=-1}return n.prototype.getMode=function(){return this.mode},n.prototype.getECLevel=function(){return this.ecLevel},n.prototype.getVersion=function(){return this.version},n.prototype.getMaskPattern=function(){return this.maskPattern},n.prototype.getMatrix=function(){return this.matrix},n.prototype.toString=function(){var t=new Xt;return t.append(`<<
`),t.append(" mode: "),t.append(this.mode?this.mode.toString():"null"),t.append(`
 ecLevel: `),t.append(this.ecLevel?this.ecLevel.toString():"null"),t.append(`
 version: `),t.append(this.version?this.version.toString():"null"),t.append(`
 maskPattern: `),t.append(this.maskPattern.toString()),this.matrix?(t.append(`
 matrix:
`),t.append(this.matrix.toString())):t.append(`
 matrix: null
`),t.append(`>>
`),t.toString()},n.prototype.setMode=function(t){this.mode=t},n.prototype.setECLevel=function(t){this.ecLevel=t},n.prototype.setVersion=function(t){this.version=t},n.prototype.setMaskPattern=function(t){this.maskPattern=t},n.prototype.setMatrix=function(t){this.matrix=t},n.isValidMaskPattern=function(t){return t>=0&&t<n.NUM_MASK_PATTERNS},n.NUM_MASK_PATTERNS=8,n}(),XB=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Ue=function(n){XB(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.kind="WriterException",t}(Br),PS=function(){function n(){}return n.clearMatrix=function(t){t.clear(255)},n.buildMatrix=function(t,e,r,i,a){n.clearMatrix(a),n.embedBasicPatterns(r,a),n.embedTypeInfo(e,i,a),n.maybeEmbedVersionInfo(r,a),n.embedDataBits(t,i,a)},n.embedBasicPatterns=function(t,e){n.embedPositionDetectionPatternsAndSeparators(e),n.embedDarkDotAtLeftBottomCorner(e),n.maybeEmbedPositionAdjustmentPatterns(t,e),n.embedTimingPatterns(e)},n.embedTypeInfo=function(t,e,r){var i=new $n;n.makeTypeInfoBits(t,e,i);for(var a=0,s=i.getSize();a<s;++a){var l=i.get(i.getSize()-1-a),c=n.TYPE_INFO_COORDINATES[a],f=c[0],d=c[1];if(r.setBoolean(f,d,l),a<8){var g=r.getWidth()-a-1,m=8;r.setBoolean(g,m,l)}else{var g=8,m=r.getHeight()-7+(a-8);r.setBoolean(g,m,l)}}},n.maybeEmbedVersionInfo=function(t,e){if(!(t.getVersionNumber()<7)){var r=new $n;n.makeVersionInfoBits(t,r);for(var i=17,a=0;a<6;++a)for(var s=0;s<3;++s){var l=r.get(i);i--,e.setBoolean(a,e.getHeight()-11+s,l),e.setBoolean(e.getHeight()-11+s,a,l)}}},n.embedDataBits=function(t,e,r){for(var i=0,a=-1,s=r.getWidth()-1,l=r.getHeight()-1;s>0;){for(s===6&&(s-=1);l>=0&&l<r.getHeight();){for(var c=0;c<2;++c){var f=s-c;if(n.isEmpty(r.get(f,l))){var d=void 0;i<t.getSize()?(d=t.get(i),++i):d=!1,e!==255&&vh.getDataMaskBit(e,f,l)&&(d=!d),r.setBoolean(f,l,d)}}l+=a}a=-a,l+=a,s-=2}if(i!==t.getSize())throw new Ue("Not all bits consumed: "+i+"/"+t.getSize())},n.findMSBSet=function(t){return 32-Zt.numberOfLeadingZeros(t)},n.calculateBCHCode=function(t,e){if(e===0)throw new kt("0 polynomial");var r=n.findMSBSet(e);for(t<<=r-1;n.findMSBSet(t)>=r;)t^=e<<n.findMSBSet(t)-r;return t},n.makeTypeInfoBits=function(t,e,r){if(!Jy.isValidMaskPattern(e))throw new Ue("Invalid mask pattern");var i=t.getBits()<<3|e;r.appendBits(i,5);var a=n.calculateBCHCode(i,n.TYPE_INFO_POLY);r.appendBits(a,10);var s=new $n;if(s.appendBits(n.TYPE_INFO_MASK_PATTERN,15),r.xor(s),r.getSize()!==15)throw new Ue("should not happen but we got: "+r.getSize())},n.makeVersionInfoBits=function(t,e){e.appendBits(t.getVersionNumber(),6);var r=n.calculateBCHCode(t.getVersionNumber(),n.VERSION_INFO_POLY);if(e.appendBits(r,12),e.getSize()!==18)throw new Ue("should not happen but we got: "+e.getSize())},n.isEmpty=function(t){return t===255},n.embedTimingPatterns=function(t){for(var e=8;e<t.getWidth()-8;++e){var r=(e+1)%2;n.isEmpty(t.get(e,6))&&t.setNumber(e,6,r),n.isEmpty(t.get(6,e))&&t.setNumber(6,e,r)}},n.embedDarkDotAtLeftBottomCorner=function(t){if(t.get(8,t.getHeight()-8)===0)throw new Ue;t.setNumber(8,t.getHeight()-8,1)},n.embedHorizontalSeparationPattern=function(t,e,r){for(var i=0;i<8;++i){if(!n.isEmpty(r.get(t+i,e)))throw new Ue;r.setNumber(t+i,e,0)}},n.embedVerticalSeparationPattern=function(t,e,r){for(var i=0;i<7;++i){if(!n.isEmpty(r.get(t,e+i)))throw new Ue;r.setNumber(t,e+i,0)}},n.embedPositionAdjustmentPattern=function(t,e,r){for(var i=0;i<5;++i)for(var a=n.POSITION_ADJUSTMENT_PATTERN[i],s=0;s<5;++s)r.setNumber(t+s,e+i,a[s])},n.embedPositionDetectionPattern=function(t,e,r){for(var i=0;i<7;++i)for(var a=n.POSITION_DETECTION_PATTERN[i],s=0;s<7;++s)r.setNumber(t+s,e+i,a[s])},n.embedPositionDetectionPatternsAndSeparators=function(t){var e=n.POSITION_DETECTION_PATTERN[0].length;n.embedPositionDetectionPattern(0,0,t),n.embedPositionDetectionPattern(t.getWidth()-e,0,t),n.embedPositionDetectionPattern(0,t.getWidth()-e,t);var r=8;n.embedHorizontalSeparationPattern(0,r-1,t),n.embedHorizontalSeparationPattern(t.getWidth()-r,r-1,t),n.embedHorizontalSeparationPattern(0,t.getWidth()-r,t);var i=7;n.embedVerticalSeparationPattern(i,0,t),n.embedVerticalSeparationPattern(t.getHeight()-i-1,0,t),n.embedVerticalSeparationPattern(i,t.getHeight()-i,t)},n.maybeEmbedPositionAdjustmentPatterns=function(t,e){if(!(t.getVersionNumber()<2))for(var r=t.getVersionNumber()-1,i=n.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[r],a=0,s=i.length;a!==s;a++){var l=i[a];if(l>=0)for(var c=0;c!==s;c++){var f=i[c];f>=0&&n.isEmpty(e.get(f,l))&&n.embedPositionAdjustmentPattern(f-2,l-2,e)}}},n.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),n.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),n.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),n.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),n.VERSION_INFO_POLY=7973,n.TYPE_INFO_POLY=1335,n.TYPE_INFO_MASK_PATTERN=21522,n}(),YB=function(){function n(t,e){this.dataBytes=t,this.errorCorrectionBytes=e}return n.prototype.getDataBytes=function(){return this.dataBytes},n.prototype.getErrorCorrectionBytes=function(){return this.errorCorrectionBytes},n}(),kS=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};(function(){function n(){}return n.calculateMaskPenalty=function(t){return vh.applyMaskPenaltyRule1(t)+vh.applyMaskPenaltyRule2(t)+vh.applyMaskPenaltyRule3(t)+vh.applyMaskPenaltyRule4(t)},n.encode=function(t,e,r){r===void 0&&(r=null);var i=n.DEFAULT_BYTE_MODE_ENCODING,a=r!==null&&r.get(n1.CHARACTER_SET)!==void 0;a&&(i=r.get(n1.CHARACTER_SET).toString());var s=this.chooseMode(t,i),l=new $n;if(s===je.BYTE&&(a||n.DEFAULT_BYTE_MODE_ENCODING!==i)){var c=In.getCharacterSetECIByName(i);c!==void 0&&this.appendECI(c,l)}this.appendModeInfo(s,l);var f=new $n;this.appendBytes(t,s,f,i);var d;if(r!==null&&r.get(n1.QR_VERSION)!==void 0){var g=Number.parseInt(r.get(n1.QR_VERSION).toString(),10);d=Cl.getVersionForNumber(g);var m=this.calculateBitsNeeded(s,l,f,d);if(!this.willFit(m,d,e))throw new Ue("Data too big for requested version")}else d=this.recommendVersion(e,s,l,f);var v=new $n;v.appendBitArray(l);var _=s===je.BYTE?f.getSizeInBytes():t.length;this.appendLengthInfo(_,d,s,v),v.appendBitArray(f);var w=d.getECBlocksForLevel(e),b=d.getTotalCodewords()-w.getTotalECCodewords();this.terminateBits(b,v);var S=this.interleaveWithECBytes(v,d.getTotalCodewords(),b,w.getNumBlocks()),C=new Jy;C.setECLevel(e),C.setMode(s),C.setVersion(d);var I=d.getDimensionForVersion(),M=new WB(I,I),N=this.chooseMaskPattern(S,e,d,M);return C.setMaskPattern(N),PS.buildMatrix(S,e,d,N,M),C.setMatrix(M),C},n.recommendVersion=function(t,e,r,i){var a=this.calculateBitsNeeded(e,r,i,Cl.getVersionForNumber(1)),s=this.chooseVersion(a,t),l=this.calculateBitsNeeded(e,r,i,s);return this.chooseVersion(l,t)},n.calculateBitsNeeded=function(t,e,r,i){return e.getSize()+t.getCharacterCountBits(i)+r.getSize()},n.getAlphanumericCode=function(t){return t<n.ALPHANUMERIC_TABLE.length?n.ALPHANUMERIC_TABLE[t]:-1},n.chooseMode=function(t,e){if(e===void 0&&(e=null),In.SJIS.getName()===e&&this.isOnlyDoubleByteKanji(t))return je.KANJI;for(var r=!1,i=!1,a=0,s=t.length;a<s;++a){var l=t.charAt(a);if(n.isDigit(l))r=!0;else if(this.getAlphanumericCode(l.charCodeAt(0))!==-1)i=!0;else return je.BYTE}return i?je.ALPHANUMERIC:r?je.NUMERIC:je.BYTE},n.isOnlyDoubleByteKanji=function(t){var e;try{e=wi.encode(t,In.SJIS)}catch{return!1}var r=e.length;if(r%2!==0)return!1;for(var i=0;i<r;i+=2){var a=e[i]&255;if((a<129||a>159)&&(a<224||a>235))return!1}return!0},n.chooseMaskPattern=function(t,e,r,i){for(var a=Number.MAX_SAFE_INTEGER,s=-1,l=0;l<Jy.NUM_MASK_PATTERNS;l++){PS.buildMatrix(t,e,r,l,i);var c=this.calculateMaskPenalty(i);c<a&&(a=c,s=l)}return s},n.chooseVersion=function(t,e){for(var r=1;r<=40;r++){var i=Cl.getVersionForNumber(r);if(n.willFit(t,i,e))return i}throw new Ue("Data too big")},n.willFit=function(t,e,r){var i=e.getTotalCodewords(),a=e.getECBlocksForLevel(r),s=a.getTotalECCodewords(),l=i-s,c=(t+7)/8;return l>=c},n.terminateBits=function(t,e){var r=t*8;if(e.getSize()>r)throw new Ue("data bits cannot fit in the QR Code"+e.getSize()+" > "+r);for(var i=0;i<4&&e.getSize()<r;++i)e.appendBit(!1);var a=e.getSize()&7;if(a>0)for(var i=a;i<8;i++)e.appendBit(!1);for(var s=t-e.getSizeInBytes(),i=0;i<s;++i)e.appendBits((i&1)===0?236:17,8);if(e.getSize()!==r)throw new Ue("Bits size does not equal capacity")},n.getNumDataBytesAndNumECBytesForBlockID=function(t,e,r,i,a,s){if(i>=r)throw new Ue("Block ID too large");var l=t%r,c=r-l,f=Math.floor(t/r),d=f+1,g=Math.floor(e/r),m=g+1,v=f-g,_=d-m;if(v!==_)throw new Ue("EC bytes mismatch");if(r!==c+l)throw new Ue("RS blocks mismatch");if(t!==(g+v)*c+(m+_)*l)throw new Ue("Total bytes mismatch");i<c?(a[0]=g,s[0]=v):(a[0]=m,s[0]=_)},n.interleaveWithECBytes=function(t,e,r,i){var a,s,l,c;if(t.getSizeInBytes()!==r)throw new Ue("Number of bits and data bytes does not match");for(var f=0,d=0,g=0,m=new Array,v=0;v<i;++v){var _=new Int32Array(1),w=new Int32Array(1);n.getNumDataBytesAndNumECBytesForBlockID(e,r,i,v,_,w);var b=_[0],S=new Uint8Array(b);t.toBytes(8*f,S,0,b);var C=n.generateECBytes(S,w[0]);m.push(new YB(S,C)),d=Math.max(d,b),g=Math.max(g,C.length),f+=_[0]}if(r!==f)throw new Ue("Data bytes does not match offset");for(var I=new $n,v=0;v<d;++v)try{for(var M=(a=void 0,kS(m)),N=M.next();!N.done;N=M.next()){var k=N.value,S=k.getDataBytes();v<S.length&&I.appendBits(S[v],8)}}catch(L){a={error:L}}finally{try{N&&!N.done&&(s=M.return)&&s.call(M)}finally{if(a)throw a.error}}for(var v=0;v<g;++v)try{for(var O=(l=void 0,kS(m)),R=O.next();!R.done;R=O.next()){var k=R.value,C=k.getErrorCorrectionBytes();v<C.length&&I.appendBits(C[v],8)}}catch(L){l={error:L}}finally{try{R&&!R.done&&(c=O.return)&&c.call(O)}finally{if(l)throw l.error}}if(e!==I.getSizeInBytes())throw new Ue("Interleaving error: "+e+" and "+I.getSizeInBytes()+" differ.");return I},n.generateECBytes=function(t,e){for(var r=t.length,i=new Int32Array(r+e),a=0;a<r;a++)i[a]=t[a]&255;new h4(Pr.QR_CODE_FIELD_256).encode(i,e);for(var s=new Uint8Array(e),a=0;a<e;a++)s[a]=i[r+a];return s},n.appendModeInfo=function(t,e){e.appendBits(t.getBits(),4)},n.appendLengthInfo=function(t,e,r,i){var a=r.getCharacterCountBits(e);if(t>=1<<a)throw new Ue(t+" is bigger than "+((1<<a)-1));i.appendBits(t,a)},n.appendBytes=function(t,e,r,i){switch(e){case je.NUMERIC:n.appendNumericBytes(t,r);break;case je.ALPHANUMERIC:n.appendAlphanumericBytes(t,r);break;case je.BYTE:n.append8BitBytes(t,r,i);break;case je.KANJI:n.appendKanjiBytes(t,r);break;default:throw new Ue("Invalid mode: "+e)}},n.getDigit=function(t){return t.charCodeAt(0)-48},n.isDigit=function(t){var e=n.getDigit(t);return e>=0&&e<=9},n.appendNumericBytes=function(t,e){for(var r=t.length,i=0;i<r;){var a=n.getDigit(t.charAt(i));if(i+2<r){var s=n.getDigit(t.charAt(i+1)),l=n.getDigit(t.charAt(i+2));e.appendBits(a*100+s*10+l,10),i+=3}else if(i+1<r){var s=n.getDigit(t.charAt(i+1));e.appendBits(a*10+s,7),i+=2}else e.appendBits(a,4),i++}},n.appendAlphanumericBytes=function(t,e){for(var r=t.length,i=0;i<r;){var a=n.getAlphanumericCode(t.charCodeAt(i));if(a===-1)throw new Ue;if(i+1<r){var s=n.getAlphanumericCode(t.charCodeAt(i+1));if(s===-1)throw new Ue;e.appendBits(a*45+s,11),i+=2}else e.appendBits(a,6),i++}},n.append8BitBytes=function(t,e,r){var i;try{i=wi.encode(t,r)}catch(c){throw new Ue(c)}for(var a=0,s=i.length;a!==s;a++){var l=i[a];e.appendBits(l,8)}},n.appendKanjiBytes=function(t,e){var r;try{r=wi.encode(t,In.SJIS)}catch(g){throw new Ue(g)}for(var i=r.length,a=0;a<i;a+=2){var s=r[a]&255,l=r[a+1]&255,c=s<<8&4294967295|l,f=-1;if(c>=33088&&c<=40956?f=c-33088:c>=57408&&c<=60351&&(f=c-49472),f===-1)throw new Ue("Invalid byte sequence");var d=(f>>8)*192+(f&255);e.appendBits(d,13)}},n.appendECI=function(t,e){e.appendBits(je.ECI.getBits(),4),e.appendBits(t.getValue(),8)},n.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),n.DEFAULT_BYTE_MODE_ENCODING=In.UTF8.getName(),n})();var KB=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}();(function(n){KB(t,n);function t(e,r,i,a,s,l,c,f){var d=n.call(this,l,c)||this;if(d.yuvData=e,d.dataWidth=r,d.dataHeight=i,d.left=a,d.top=s,a+l>r||s+c>i)throw new kt("Crop rectangle does not fit within image data.");return f&&d.reverseHorizontal(l,c),d}return t.prototype.getRow=function(e,r){if(e<0||e>=this.getHeight())throw new kt("Requested row is outside the image: "+e);var i=this.getWidth();(r==null||r.length<i)&&(r=new Uint8ClampedArray(i));var a=(e+this.top)*this.dataWidth+this.left;return Fe.arraycopy(this.yuvData,a,r,0,i),r},t.prototype.getMatrix=function(){var e=this.getWidth(),r=this.getHeight();if(e===this.dataWidth&&r===this.dataHeight)return this.yuvData;var i=e*r,a=new Uint8ClampedArray(i),s=this.top*this.dataWidth+this.left;if(e===this.dataWidth)return Fe.arraycopy(this.yuvData,s,a,0,i),a;for(var l=0;l<r;l++){var c=l*e;Fe.arraycopy(this.yuvData,s,a,c,e),s+=this.dataWidth}return a},t.prototype.isCropSupported=function(){return!0},t.prototype.crop=function(e,r,i,a){return new t(this.yuvData,this.dataWidth,this.dataHeight,this.left+e,this.top+r,i,a,!1)},t.prototype.renderThumbnail=function(){for(var e=this.getWidth()/t.THUMBNAIL_SCALE_FACTOR,r=this.getHeight()/t.THUMBNAIL_SCALE_FACTOR,i=new Int32Array(e*r),a=this.yuvData,s=this.top*this.dataWidth+this.left,l=0;l<r;l++){for(var c=l*e,f=0;f<e;f++){var d=a[s+f*t.THUMBNAIL_SCALE_FACTOR]&255;i[c+f]=4278190080|d*65793}s+=this.dataWidth*t.THUMBNAIL_SCALE_FACTOR}return i},t.prototype.getThumbnailWidth=function(){return this.getWidth()/t.THUMBNAIL_SCALE_FACTOR},t.prototype.getThumbnailHeight=function(){return this.getHeight()/t.THUMBNAIL_SCALE_FACTOR},t.prototype.reverseHorizontal=function(e,r){for(var i=this.yuvData,a=0,s=this.top*this.dataWidth+this.left;a<r;a++,s+=this.dataWidth)for(var l=s+e/2,c=s,f=s+e-1;c<l;c++,f--){var d=i[c];i[c]=i[f],i[f]=d}},t.prototype.invert=function(){return new x2(this)},t.THUMBNAIL_SCALE_FACTOR=2,t})(Xg);var ZB=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}();(function(n){ZB(t,n);function t(e,r,i,a,s,l,c){var f=n.call(this,r,i)||this;if(f.dataWidth=a,f.dataHeight=s,f.left=l,f.top=c,e.BYTES_PER_ELEMENT===4){for(var d=r*i,g=new Uint8ClampedArray(d),m=0;m<d;m++){var v=e[m],_=v>>16&255,w=v>>7&510,b=v&255;g[m]=(_+w+b)/4&255}f.luminances=g}else f.luminances=e;if(a===void 0&&(f.dataWidth=r),s===void 0&&(f.dataHeight=i),l===void 0&&(f.left=0),c===void 0&&(f.top=0),f.left+r>f.dataWidth||f.top+i>f.dataHeight)throw new kt("Crop rectangle does not fit within image data.");return f}return t.prototype.getRow=function(e,r){if(e<0||e>=this.getHeight())throw new kt("Requested row is outside the image: "+e);var i=this.getWidth();(r==null||r.length<i)&&(r=new Uint8ClampedArray(i));var a=(e+this.top)*this.dataWidth+this.left;return Fe.arraycopy(this.luminances,a,r,0,i),r},t.prototype.getMatrix=function(){var e=this.getWidth(),r=this.getHeight();if(e===this.dataWidth&&r===this.dataHeight)return this.luminances;var i=e*r,a=new Uint8ClampedArray(i),s=this.top*this.dataWidth+this.left;if(e===this.dataWidth)return Fe.arraycopy(this.luminances,s,a,0,i),a;for(var l=0;l<r;l++){var c=l*e;Fe.arraycopy(this.luminances,s,a,c,e),s+=this.dataWidth}return a},t.prototype.isCropSupported=function(){return!0},t.prototype.crop=function(e,r,i,a){return new t(this.luminances,i,a,this.dataWidth,this.dataHeight,this.left+e,this.top+r)},t.prototype.invert=function(){return new x2(this)},t})(Xg);var QB=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),JB=function(n){QB(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.forName=function(e){return this.getCharacterSetECIByName(e)},t}(In),tV=function(){function n(){}return n.ISO_8859_1=In.ISO8859_1,n}(),tx,eV=301,nV=function(n,t){for(var e=1,r=0;r<255;r++)t[r]=e,n[e]=r,e*=2,e>=256&&(e^=eV);return{LOG:n,ALOG:t}};tx=nV([],[]),tx.LOG;tx.ALOG;var LS;(function(n){n[n.FORCE_NONE=0]="FORCE_NONE",n[n.FORCE_SQUARE=1]="FORCE_SQUARE",n[n.FORCE_RECTANGLE=2]="FORCE_RECTANGLE"})(LS||(LS={}));var BS=129,d4=230,rV=231,iV=235,aV=236,sV=237,oV=238,lV=239,uV=240,kv=254,cV=254,VS="[)>05",FS="[)>06",US="",Ce=0,Jn=1,Er=2,Sn=3,zn=4,ur=5,fV=function(){function n(){}return n.prototype.getEncodingMode=function(){return Ce},n.prototype.encode=function(t){var e=ki.determineConsecutiveDigitCount(t.getMessage(),t.pos);if(e>=2)t.writeCodeword(this.encodeASCIIDigits(t.getMessage().charCodeAt(t.pos),t.getMessage().charCodeAt(t.pos+1))),t.pos+=2;else{var r=t.getCurrentChar(),i=ki.lookAheadTest(t.getMessage(),t.pos,this.getEncodingMode());if(i!==this.getEncodingMode())switch(i){case ur:t.writeCodeword(rV),t.signalEncoderChange(ur);return;case Jn:t.writeCodeword(d4),t.signalEncoderChange(Jn);return;case Sn:t.writeCodeword(oV),t.signalEncoderChange(Sn);break;case Er:t.writeCodeword(lV),t.signalEncoderChange(Er);break;case zn:t.writeCodeword(uV),t.signalEncoderChange(zn);break;default:throw new Error("Illegal mode: "+i)}else ki.isExtendedASCII(r)?(t.writeCodeword(iV),t.writeCodeword(r-128+1),t.pos++):(t.writeCodeword(r+1),t.pos++)}},n.prototype.encodeASCIIDigits=function(t,e){if(ki.isDigit(t)&&ki.isDigit(e)){var r=(t-48)*10+(e-48);return r+130}throw new Error("not digits: "+t+e)},n}(),hV=function(){function n(){}return n.prototype.getEncodingMode=function(){return ur},n.prototype.encode=function(t){var e=new Xt;for(e.append(0);t.hasMoreCharacters();){var r=t.getCurrentChar();e.append(r),t.pos++;var i=ki.lookAheadTest(t.getMessage(),t.pos,this.getEncodingMode());if(i!==this.getEncodingMode()){t.signalEncoderChange(Ce);break}}var a=e.length()-1,s=1,l=t.getCodewordCount()+a+s;t.updateSymbolInfo(l);var c=t.getSymbolInfo().getDataCapacity()-l>0;if(t.hasMoreCharacters()||c)if(a<=249)e.setCharAt(0,se.getCharAt(a));else if(a<=1555)e.setCharAt(0,se.getCharAt(Math.floor(a/250)+249)),e.insert(1,se.getCharAt(a%250));else throw new Error("Message length not in valid ranges: "+a);for(var f=0,r=e.length();f<r;f++)t.writeCodeword(this.randomize255State(e.charAt(f).charCodeAt(0),t.getCodewordCount()+1))},n.prototype.randomize255State=function(t,e){var r=149*e%255+1,i=t+r;return i<=255?i:i-256},n}(),b2=function(){function n(){}return n.prototype.getEncodingMode=function(){return Jn},n.prototype.encodeMaximal=function(t){for(var e=new Xt,r=0,i=t.pos,a=0;t.hasMoreCharacters();){var s=t.getCurrentChar();t.pos++,r=this.encodeChar(s,e),e.length()%3===0&&(i=t.pos,a=e.length())}if(a!==e.length()){var l=Math.floor(e.length()/3*2),c=Math.floor(t.getCodewordCount()+l+1);t.updateSymbolInfo(c);var f=t.getSymbolInfo().getDataCapacity()-c,d=Math.floor(e.length()%3);(d===2&&f!==2||d===1&&(r>3||f!==1))&&(t.pos=i)}e.length()>0&&t.writeCodeword(d4),this.handleEOD(t,e)},n.prototype.encode=function(t){for(var e=new Xt;t.hasMoreCharacters();){var r=t.getCurrentChar();t.pos++;var i=this.encodeChar(r,e),a=Math.floor(e.length()/3)*2,s=t.getCodewordCount()+a;t.updateSymbolInfo(s);var l=t.getSymbolInfo().getDataCapacity()-s;if(!t.hasMoreCharacters()){var c=new Xt;for(e.length()%3===2&&l!==2&&(i=this.backtrackOneCharacter(t,e,c,i));e.length()%3===1&&(i>3||l!==1);)i=this.backtrackOneCharacter(t,e,c,i);break}var f=e.length();if(f%3===0){var d=ki.lookAheadTest(t.getMessage(),t.pos,this.getEncodingMode());if(d!==this.getEncodingMode()){t.signalEncoderChange(Ce);break}}}this.handleEOD(t,e)},n.prototype.backtrackOneCharacter=function(t,e,r,i){var a=e.length(),s=e.toString().substring(0,a-i);e.setLengthToZero(),e.append(s),t.pos--;var l=t.getCurrentChar();return i=this.encodeChar(l,r),t.resetSymbolInfo(),i},n.prototype.writeNextTriplet=function(t,e){t.writeCodewords(this.encodeToCodewords(e.toString()));var r=e.toString().substring(3);e.setLengthToZero(),e.append(r)},n.prototype.handleEOD=function(t,e){var r=Math.floor(e.length()/3*2),i=e.length()%3,a=t.getCodewordCount()+r;t.updateSymbolInfo(a);var s=t.getSymbolInfo().getDataCapacity()-a;if(i===2){for(e.append("\0");e.length()>=3;)this.writeNextTriplet(t,e);t.hasMoreCharacters()&&t.writeCodeword(kv)}else if(s===1&&i===1){for(;e.length()>=3;)this.writeNextTriplet(t,e);t.hasMoreCharacters()&&t.writeCodeword(kv),t.pos--}else if(i===0){for(;e.length()>=3;)this.writeNextTriplet(t,e);(s>0||t.hasMoreCharacters())&&t.writeCodeword(kv)}else throw new Error("Unexpected case. Please report!");t.signalEncoderChange(Ce)},n.prototype.encodeChar=function(t,e){if(t===32)return e.append(3),1;if(t>=48&&t<=57)return e.append(t-48+4),1;if(t>=65&&t<=90)return e.append(t-65+14),1;if(t<32)return e.append(0),e.append(t),2;if(t<=47)return e.append(1),e.append(t-33),2;if(t<=64)return e.append(1),e.append(t-58+15),2;if(t<=95)return e.append(1),e.append(t-91+22),2;if(t<=127)return e.append(2),e.append(t-96),2;e.append("1");var r=2;return r+=this.encodeChar(t-128,e),r},n.prototype.encodeToCodewords=function(t){var e=1600*t.charCodeAt(0)+40*t.charCodeAt(1)+t.charCodeAt(2)+1,r=e/256,i=e%256,a=new Xt;return a.append(r),a.append(i),a.toString()},n}(),dV=function(){function n(){}return n.prototype.getEncodingMode=function(){return zn},n.prototype.encode=function(t){for(var e=new Xt;t.hasMoreCharacters();){var r=t.getCurrentChar();this.encodeChar(r,e),t.pos++;var i=e.length();if(i>=4){t.writeCodewords(this.encodeToCodewords(e.toString()));var a=e.toString().substring(4);e.setLengthToZero(),e.append(a);var s=ki.lookAheadTest(t.getMessage(),t.pos,this.getEncodingMode());if(s!==this.getEncodingMode()){t.signalEncoderChange(Ce);break}}}e.append(se.getCharAt(31)),this.handleEOD(t,e)},n.prototype.handleEOD=function(t,e){try{var r=e.length();if(r===0)return;if(r===1){t.updateSymbolInfo();var i=t.getSymbolInfo().getDataCapacity()-t.getCodewordCount(),a=t.getRemainingCharacters();if(a>i&&(t.updateSymbolInfo(t.getCodewordCount()+1),i=t.getSymbolInfo().getDataCapacity()-t.getCodewordCount()),a<=i&&i<=2)return}if(r>4)throw new Error("Count must not exceed 4");var s=r-1,l=this.encodeToCodewords(e.toString()),c=!t.hasMoreCharacters(),f=c&&s<=2;if(s<=2){t.updateSymbolInfo(t.getCodewordCount()+s);var i=t.getSymbolInfo().getDataCapacity()-t.getCodewordCount();i>=3&&(f=!1,t.updateSymbolInfo(t.getCodewordCount()+l.length))}f?(t.resetSymbolInfo(),t.pos-=s):t.writeCodewords(l)}finally{t.signalEncoderChange(Ce)}},n.prototype.encodeChar=function(t,e){t>=32&&t<=63?e.append(t):t>=64&&t<=94?e.append(se.getCharAt(t-64)):ki.illegalCharacter(se.getCharAt(t))},n.prototype.encodeToCodewords=function(t){var e=t.length;if(e===0)throw new Error("StringBuilder must not be empty");var r=t.charAt(0).charCodeAt(0),i=e>=2?t.charAt(1).charCodeAt(0):0,a=e>=3?t.charAt(2).charCodeAt(0):0,s=e>=4?t.charAt(3).charCodeAt(0):0,l=(r<<18)+(i<<12)+(a<<6)+s,c=l>>16&255,f=l>>8&255,d=l&255,g=new Xt;return g.append(c),e>=2&&g.append(f),e>=3&&g.append(d),g.toString()},n}(),gV=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),pV=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},ve=function(){function n(t,e,r,i,a,s,l,c){l===void 0&&(l=0),c===void 0&&(c=0),this.rectangular=t,this.dataCapacity=e,this.errorCodewords=r,this.matrixWidth=i,this.matrixHeight=a,this.dataRegions=s,this.rsBlockData=l,this.rsBlockError=c}return n.lookup=function(t,e,r,i,a){var s,l;e===void 0&&(e=0),r===void 0&&(r=null),i===void 0&&(i=null),a===void 0&&(a=!0);try{for(var c=pV(vV),f=c.next();!f.done;f=c.next()){var d=f.value;if(!(e===1&&d.rectangular)&&!(e===2&&!d.rectangular)&&!(r!=null&&(d.getSymbolWidth()<r.getWidth()||d.getSymbolHeight()<r.getHeight()))&&!(i!=null&&(d.getSymbolWidth()>i.getWidth()||d.getSymbolHeight()>i.getHeight()))&&t<=d.dataCapacity)return d}}catch(g){s={error:g}}finally{try{f&&!f.done&&(l=c.return)&&l.call(c)}finally{if(s)throw s.error}}if(a)throw new Error("Can't find a symbol arrangement that matches the message. Data codewords: "+t);return null},n.prototype.getHorizontalDataRegions=function(){switch(this.dataRegions){case 1:return 1;case 2:case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},n.prototype.getVerticalDataRegions=function(){switch(this.dataRegions){case 1:case 2:return 1;case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},n.prototype.getSymbolDataWidth=function(){return this.getHorizontalDataRegions()*this.matrixWidth},n.prototype.getSymbolDataHeight=function(){return this.getVerticalDataRegions()*this.matrixHeight},n.prototype.getSymbolWidth=function(){return this.getSymbolDataWidth()+this.getHorizontalDataRegions()*2},n.prototype.getSymbolHeight=function(){return this.getSymbolDataHeight()+this.getVerticalDataRegions()*2},n.prototype.getCodewordCount=function(){return this.dataCapacity+this.errorCodewords},n.prototype.getInterleavedBlockCount=function(){return this.rsBlockData?this.dataCapacity/this.rsBlockData:1},n.prototype.getDataCapacity=function(){return this.dataCapacity},n.prototype.getErrorCodewords=function(){return this.errorCodewords},n.prototype.getDataLengthForInterleavedBlock=function(t){return this.rsBlockData},n.prototype.getErrorLengthForInterleavedBlock=function(t){return this.rsBlockError},n}(),mV=function(n){gV(t,n);function t(){return n.call(this,!1,1558,620,22,22,36,-1,62)||this}return t.prototype.getInterleavedBlockCount=function(){return 10},t.prototype.getDataLengthForInterleavedBlock=function(e){return e<=8?156:155},t}(ve),vV=[new ve(!1,3,5,8,8,1),new ve(!1,5,7,10,10,1),new ve(!0,5,7,16,6,1),new ve(!1,8,10,12,12,1),new ve(!0,10,11,14,6,2),new ve(!1,12,12,14,14,1),new ve(!0,16,14,24,10,1),new ve(!1,18,14,16,16,1),new ve(!1,22,18,18,18,1),new ve(!0,22,18,16,10,2),new ve(!1,30,20,20,20,1),new ve(!0,32,24,16,14,2),new ve(!1,36,24,22,22,1),new ve(!1,44,28,24,24,1),new ve(!0,49,28,22,14,2),new ve(!1,62,36,14,14,4),new ve(!1,86,42,16,16,4),new ve(!1,114,48,18,18,4),new ve(!1,144,56,20,20,4),new ve(!1,174,68,22,22,4),new ve(!1,204,84,24,24,4,102,42),new ve(!1,280,112,14,14,16,140,56),new ve(!1,368,144,16,16,16,92,36),new ve(!1,456,192,18,18,16,114,48),new ve(!1,576,224,20,20,16,144,56),new ve(!1,696,272,22,22,16,174,68),new ve(!1,816,336,24,24,16,136,56),new ve(!1,1050,408,18,18,36,175,68),new ve(!1,1304,496,20,20,36,163,62),new mV],yV=function(){function n(t){this.msg=t,this.pos=0,this.skipAtEnd=0;for(var e=t.split("").map(function(l){return l.charCodeAt(0)}),r=new Xt,i=0,a=e.length;i<a;i++){var s=String.fromCharCode(e[i]&255);if(s==="?"&&t.charAt(i)!=="?")throw new Error("Message contains characters outside ISO-8859-1 encoding.");r.append(s)}this.msg=r.toString(),this.shape=0,this.codewords=new Xt,this.newEncoding=-1}return n.prototype.setSymbolShape=function(t){this.shape=t},n.prototype.setSizeConstraints=function(t,e){this.minSize=t,this.maxSize=e},n.prototype.getMessage=function(){return this.msg},n.prototype.setSkipAtEnd=function(t){this.skipAtEnd=t},n.prototype.getCurrentChar=function(){return this.msg.charCodeAt(this.pos)},n.prototype.getCurrent=function(){return this.msg.charCodeAt(this.pos)},n.prototype.getCodewords=function(){return this.codewords},n.prototype.writeCodewords=function(t){this.codewords.append(t)},n.prototype.writeCodeword=function(t){this.codewords.append(t)},n.prototype.getCodewordCount=function(){return this.codewords.length()},n.prototype.getNewEncoding=function(){return this.newEncoding},n.prototype.signalEncoderChange=function(t){this.newEncoding=t},n.prototype.resetEncoderSignal=function(){this.newEncoding=-1},n.prototype.hasMoreCharacters=function(){return this.pos<this.getTotalMessageCharCount()},n.prototype.getTotalMessageCharCount=function(){return this.msg.length-this.skipAtEnd},n.prototype.getRemainingCharacters=function(){return this.getTotalMessageCharCount()-this.pos},n.prototype.getSymbolInfo=function(){return this.symbolInfo},n.prototype.updateSymbolInfo=function(t){t===void 0&&(t=this.getCodewordCount()),(this.symbolInfo==null||t>this.symbolInfo.getDataCapacity())&&(this.symbolInfo=ve.lookup(t,this.shape,this.minSize,this.maxSize,!0))},n.prototype.resetSymbolInfo=function(){this.symbolInfo=null},n}(),xV=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),_V=function(n){xV(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.prototype.getEncodingMode=function(){return Sn},t.prototype.encode=function(e){for(var r=new Xt;e.hasMoreCharacters();){var i=e.getCurrentChar();e.pos++,this.encodeChar(i,r);var a=r.length();if(a%3===0){this.writeNextTriplet(e,r);var s=ki.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(s!==this.getEncodingMode()){e.signalEncoderChange(Ce);break}}}this.handleEOD(e,r)},t.prototype.encodeChar=function(e,r){switch(e){case 13:r.append(0);break;case 42:r.append(1);break;case 62:r.append(2);break;case 32:r.append(3);break;default:e>=48&&e<=57?r.append(e-48+4):e>=65&&e<=90?r.append(e-65+14):ki.illegalCharacter(se.getCharAt(e));break}return 1},t.prototype.handleEOD=function(e,r){e.updateSymbolInfo();var i=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount(),a=r.length();e.pos-=a,(e.getRemainingCharacters()>1||i>1||e.getRemainingCharacters()!==i)&&e.writeCodeword(cV),e.getNewEncoding()<0&&e.signalEncoderChange(Ce)},t}(b2),AV=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),wV=function(n){AV(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.prototype.getEncodingMode=function(){return Er},t.prototype.encodeChar=function(e,r){if(e===32)return r.append(3),1;if(e>=48&&e<=57)return r.append(e-48+4),1;if(e>=97&&e<=122)return r.append(e-97+14),1;if(e<32)return r.append(0),r.append(e),2;if(e<=47)return r.append(1),r.append(e-33),2;if(e<=64)return r.append(1),r.append(e-58+15),2;if(e>=91&&e<=95)return r.append(1),r.append(e-91+22),2;if(e===96)return r.append(2),r.append(0),2;if(e<=90)return r.append(2),r.append(e-65+1),2;if(e<=127)return r.append(2),r.append(e-123+27),2;r.append("1");var i=2;return i+=this.encodeChar(e-128,r),i},t}(b2),ki=function(){function n(){}return n.randomize253State=function(t){var e=149*t%253+1,r=BS+e;return r<=254?r:r-254},n.encodeHighLevel=function(t,e,r,i,a){e===void 0&&(e=0),r===void 0&&(r=null),i===void 0&&(i=null),a===void 0&&(a=!1);var s=new b2,l=[new fV,s,new wV,new _V,new dV,new hV],c=new yV(t);c.setSymbolShape(e),c.setSizeConstraints(r,i),t.startsWith(VS)&&t.endsWith(US)?(c.writeCodeword(aV),c.setSkipAtEnd(2),c.pos+=VS.length):t.startsWith(FS)&&t.endsWith(US)&&(c.writeCodeword(sV),c.setSkipAtEnd(2),c.pos+=FS.length);var f=Ce;for(a&&(s.encodeMaximal(c),f=c.getNewEncoding(),c.resetEncoderSignal());c.hasMoreCharacters();)l[f].encode(c),c.getNewEncoding()>=0&&(f=c.getNewEncoding(),c.resetEncoderSignal());var d=c.getCodewordCount();c.updateSymbolInfo();var g=c.getSymbolInfo().getDataCapacity();d<g&&f!==Ce&&f!==ur&&f!==zn&&c.writeCodeword("þ");var m=c.getCodewords();for(m.length()<g&&m.append(BS);m.length()<g;)m.append(this.randomize253State(m.length()+1));return c.getCodewords().toString()},n.lookAheadTest=function(t,e,r){var i=this.lookAheadTestIntern(t,e,r);if(r===Sn&&i===Sn){for(var a=Math.min(e+3,t.length),s=e;s<a;s++)if(!this.isNativeX12(t.charCodeAt(s)))return Ce}else if(r===zn&&i===zn){for(var a=Math.min(e+4,t.length),s=e;s<a;s++)if(!this.isNativeEDIFACT(t.charCodeAt(s)))return Ce}return i},n.lookAheadTestIntern=function(t,e,r){if(e>=t.length)return r;var i;r===Ce?i=[0,1,1,1,1,1.25]:(i=[1,2,2,2,2,2.25],i[r]=0);for(var a=0,s=new Uint8Array(6),l=[];;){if(e+a===t.length){Rn.fill(s,0),Rn.fill(l,0);var c=this.findMinimums(i,l,Zt.MAX_VALUE,s),f=this.getMinimumCount(s);if(l[Ce]===c)return Ce;if(f===1){if(s[ur]>0)return ur;if(s[zn]>0)return zn;if(s[Er]>0)return Er;if(s[Sn]>0)return Sn}return Jn}var d=t.charCodeAt(e+a);if(a++,this.isDigit(d)?i[Ce]+=.5:this.isExtendedASCII(d)?(i[Ce]=Math.ceil(i[Ce]),i[Ce]+=2):(i[Ce]=Math.ceil(i[Ce]),i[Ce]++),this.isNativeC40(d)?i[Jn]+=2/3:this.isExtendedASCII(d)?i[Jn]+=8/3:i[Jn]+=4/3,this.isNativeText(d)?i[Er]+=2/3:this.isExtendedASCII(d)?i[Er]+=8/3:i[Er]+=4/3,this.isNativeX12(d)?i[Sn]+=2/3:this.isExtendedASCII(d)?i[Sn]+=13/3:i[Sn]+=10/3,this.isNativeEDIFACT(d)?i[zn]+=3/4:this.isExtendedASCII(d)?i[zn]+=17/4:i[zn]+=13/4,this.isSpecialB256(d)?i[ur]+=4:i[ur]++,a>=4){if(Rn.fill(s,0),Rn.fill(l,0),this.findMinimums(i,l,Zt.MAX_VALUE,s),l[Ce]<this.min(l[ur],l[Jn],l[Er],l[Sn],l[zn]))return Ce;if(l[ur]<l[Ce]||l[ur]+1<this.min(l[Jn],l[Er],l[Sn],l[zn]))return ur;if(l[zn]+1<this.min(l[ur],l[Jn],l[Er],l[Sn],l[Ce]))return zn;if(l[Er]+1<this.min(l[ur],l[Jn],l[zn],l[Sn],l[Ce]))return Er;if(l[Sn]+1<this.min(l[ur],l[Jn],l[zn],l[Er],l[Ce]))return Sn;if(l[Jn]+1<this.min(l[Ce],l[ur],l[zn],l[Er])){if(l[Jn]<l[Sn])return Jn;if(l[Jn]===l[Sn]){for(var g=e+a+1;g<t.length;){var m=t.charCodeAt(g);if(this.isX12TermSep(m))return Sn;if(!this.isNativeX12(m))break;g++}return Jn}}}}},n.min=function(t,e,r,i,a){var s=Math.min(t,Math.min(e,Math.min(r,i)));return a===void 0?s:Math.min(s,a)},n.findMinimums=function(t,e,r,i){for(var a=0;a<6;a++){var s=e[a]=Math.ceil(t[a]);r>s&&(r=s,Rn.fill(i,0)),r===s&&(i[a]=i[a]+1)}return r},n.getMinimumCount=function(t){for(var e=0,r=0;r<6;r++)e+=t[r];return e||0},n.isDigit=function(t){return t>=48&&t<=57},n.isExtendedASCII=function(t){return t>=128&&t<=255},n.isNativeC40=function(t){return t===32||t>=48&&t<=57||t>=65&&t<=90},n.isNativeText=function(t){return t===32||t>=48&&t<=57||t>=97&&t<=122},n.isNativeX12=function(t){return this.isX12TermSep(t)||t===32||t>=48&&t<=57||t>=65&&t<=90},n.isX12TermSep=function(t){return t===13||t===42||t===62},n.isNativeEDIFACT=function(t){return t>=32&&t<=94},n.isSpecialB256=function(t){return!1},n.determineConsecutiveDigitCount=function(t,e){e===void 0&&(e=0);for(var r=t.length,i=e;i<r&&this.isDigit(t.charCodeAt(i));)i++;return i-e},n.illegalCharacter=function(t){var e=Zt.toHexString(t.charCodeAt(0));throw e="0000".substring(0,4-e.length)+e,new Error("Illegal character: "+t+" (0x"+e+")")},n}(),Lv=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},jS=function(){function n(t){this.charset=t,this.name=t.name}return n.prototype.canEncode=function(t){try{return wi.encode(t,this.charset)!=null}catch{return!1}},n}(),EV=function(){function n(t,e,r){var i,a,s,l,c,f;this.ENCODERS=["IBM437","ISO-8859-2","ISO-8859-3","ISO-8859-4","ISO-8859-5","ISO-8859-6","ISO-8859-7","ISO-8859-8","ISO-8859-9","ISO-8859-10","ISO-8859-11","ISO-8859-13","ISO-8859-14","ISO-8859-15","ISO-8859-16","windows-1250","windows-1251","windows-1252","windows-1256","Shift_JIS"].map(function(D){return new jS(JB.forName(D))}),this.encoders=[];var d=[];d.push(new jS(tV.ISO_8859_1));for(var g=e!=null&&e.name.startsWith("UTF"),m=0;m<t.length;m++){var v=!1;try{for(var _=(i=void 0,Lv(d)),w=_.next();!w.done;w=_.next()){var b=w.value,S=t.charAt(m),C=S.charCodeAt(0);if(C===r||b.canEncode(S)){v=!0;break}}}catch(D){i={error:D}}finally{try{w&&!w.done&&(a=_.return)&&a.call(_)}finally{if(i)throw i.error}}if(!v)try{for(var I=(s=void 0,Lv(this.ENCODERS)),M=I.next();!M.done;M=I.next()){var b=M.value;if(b.canEncode(t.charAt(m))){d.push(b),v=!0;break}}}catch(D){s={error:D}}finally{try{M&&!M.done&&(l=I.return)&&l.call(I)}finally{if(s)throw s.error}}v||(g=!0)}if(d.length===1&&!g)this.encoders=[d[0]];else{this.encoders=[];var N=0;try{for(var k=Lv(d),O=k.next();!O.done;O=k.next()){var b=O.value;this.encoders[N++]=b}}catch(D){c={error:D}}finally{try{O&&!O.done&&(f=k.return)&&f.call(k)}finally{if(c)throw c.error}}}var R=-1;if(e!=null){for(var m=0;m<this.encoders.length;m++)if(this.encoders[m]!=null&&e.name===this.encoders[m].name){R=m;break}}this.priorityEncoderIndex=R}return n.prototype.length=function(){return this.encoders.length},n.prototype.getCharsetName=function(t){if(!(t<this.length()))throw new Error("index must be less than length");return this.encoders[t].name},n.prototype.getCharset=function(t){if(!(t<this.length()))throw new Error("index must be less than length");return this.encoders[t].charset},n.prototype.getECIValue=function(t){return this.encoders[t].charset.getValueIdentifier()},n.prototype.getPriorityEncoderIndex=function(){return this.priorityEncoderIndex},n.prototype.canEncode=function(t,e){if(!(e<this.length()))throw new Error("index must be less than length");return!0},n.prototype.encode=function(t,e){if(!(e<this.length()))throw new Error("index must be less than length");return wi.encode(se.getCharAt(t),this.encoders[e].name)},n}(),bV=3,SV=function(){function n(t,e,r){this.fnc1=r;var i=new EV(t,e,r);if(i.length()===1)for(var a=0;a<this.bytes.length;a++){var s=t.charAt(a).charCodeAt(0);this.bytes[a]=s===r?1e3:s}else this.bytes=this.encodeMinimally(t,i,r)}return n.prototype.getFNC1Character=function(){return this.fnc1},n.prototype.length=function(){return this.bytes.length},n.prototype.haveNCharacters=function(t,e){if(t+e-1>=this.bytes.length)return!1;for(var r=0;r<e;r++)if(this.isECI(t+r))return!1;return!0},n.prototype.charAt=function(t){if(t<0||t>=this.length())throw new Error(""+t);if(this.isECI(t))throw new Error("value at "+t+" is not a character but an ECI");return this.isFNC1(t)?this.fnc1:this.bytes[t]},n.prototype.subSequence=function(t,e){if(t<0||t>e||e>this.length())throw new Error(""+t);for(var r=new Xt,i=t;i<e;i++){if(this.isECI(i))throw new Error("value at "+i+" is not a character but an ECI");r.append(this.charAt(i))}return r.toString()},n.prototype.isECI=function(t){if(t<0||t>=this.length())throw new Error(""+t);return this.bytes[t]>255&&this.bytes[t]<=999},n.prototype.isFNC1=function(t){if(t<0||t>=this.length())throw new Error(""+t);return this.bytes[t]===1e3},n.prototype.getECIValue=function(t){if(t<0||t>=this.length())throw new Error(""+t);if(!this.isECI(t))throw new Error("value at "+t+" is not an ECI but a character");return this.bytes[t]-256},n.prototype.addEdge=function(t,e,r){(t[e][r.encoderIndex]==null||t[e][r.encoderIndex].cachedTotalSize>r.cachedTotalSize)&&(t[e][r.encoderIndex]=r)},n.prototype.addEdges=function(t,e,r,i,a,s){var l=t.charAt(i).charCodeAt(0),c=0,f=e.length();e.getPriorityEncoderIndex()>=0&&(l===s||e.canEncode(l,e.getPriorityEncoderIndex()))&&(c=e.getPriorityEncoderIndex(),f=c+1);for(var d=c;d<f;d++)(l===s||e.canEncode(l,d))&&this.addEdge(r,i+1,new zS(l,e,d,a,s))},n.prototype.encodeMinimally=function(t,e,r){var i=t.length,a=new zS[i+1][e.length()];this.addEdges(t,e,a,0,null,r);for(var s=1;s<=i;s++){for(var l=0;l<e.length();l++)a[s][l]!=null&&s<i&&this.addEdges(t,e,a,s,a[s][l],r);for(var l=0;l<e.length();l++)a[s-1][l]=null}for(var c=-1,f=Zt.MAX_VALUE,l=0;l<e.length();l++)if(a[i][l]!=null){var d=a[i][l];d.cachedTotalSize<f&&(f=d.cachedTotalSize,c=l)}if(c<0)throw new Error('Failed to encode "'+t+'"');for(var g=[],m=a[i][c];m!=null;){if(m.isFNC1())g.unshift(1e3);else for(var v=e.encode(m.c,m.encoderIndex),s=v.length-1;s>=0;s--)g.unshift(v[s]&255);var _=m.previous===null?0:m.previous.encoderIndex;_!==m.encoderIndex&&g.unshift(256+e.getECIValue(m.encoderIndex)),m=m.previous}for(var w=[],s=0;s<w.length;s++)w[s]=g[s];return w},n}(),zS=function(){function n(t,e,r,i,a){this.c=t,this.encoderSet=e,this.encoderIndex=r,this.previous=i,this.fnc1=a,this.c=t===a?1e3:t;var s=this.isFNC1()?1:e.encode(t,r).length,l=i===null?0:i.encoderIndex;l!==r&&(s+=bV),i!=null&&(s+=i.cachedTotalSize),this.cachedTotalSize=s}return n.prototype.isFNC1=function(){return this.c===1e3},n}(),TV=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}();var HS;(function(n){n[n.ASCII=0]="ASCII",n[n.C40=1]="C40",n[n.TEXT=2]="TEXT",n[n.X12=3]="X12",n[n.EDF=4]="EDF",n[n.B256=5]="B256"})(HS||(HS={}));(function(n){TV(t,n);function t(e,r,i,a,s){var l=n.call(this,e,r,i)||this;return l.shape=a,l.macroId=s,l}return t.prototype.getMacroId=function(){return this.macroId},t.prototype.getShapeHint=function(){return this.shape},t})(SV);var CV=function(){function n(){}return n.prototype.isCompact=function(){return this.compact},n.prototype.setCompact=function(t){this.compact=t},n.prototype.getSize=function(){return this.size},n.prototype.setSize=function(t){this.size=t},n.prototype.getLayers=function(){return this.layers},n.prototype.setLayers=function(t){this.layers=t},n.prototype.getCodeWords=function(){return this.codeWords},n.prototype.setCodeWords=function(t){this.codeWords=t},n.prototype.getMatrix=function(){return this.matrix},n.prototype.setMatrix=function(t){this.matrix=t},n}(),GS=function(){function n(){}return n.singletonList=function(t){return[t]},n.min=function(t,e){return t.sort(e)[0]},n}(),IV=function(){function n(t){this.previous=t}return n.prototype.getPrevious=function(){return this.previous},n}(),RV=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),S2=function(n){RV(t,n);function t(e,r,i){var a=n.call(this,e)||this;return a.value=r,a.bitCount=i,a}return t.prototype.appendTo=function(e,r){e.appendBits(this.value,this.bitCount)},t.prototype.add=function(e,r){return new t(this,e,r)},t.prototype.addBinaryShift=function(e,r){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new t(this,e,r)},t.prototype.toString=function(){var e=this.value&(1<<this.bitCount)-1;return e|=1<<this.bitCount,"<"+Zt.toBinaryString(e|1<<this.bitCount).substring(1)+">"},t}(IV),DV=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),OV=function(n){DV(t,n);function t(e,r,i){var a=n.call(this,e,0,0)||this;return a.binaryShiftStart=r,a.binaryShiftByteCount=i,a}return t.prototype.appendTo=function(e,r){for(var i=0;i<this.binaryShiftByteCount;i++)(i===0||i===31&&this.binaryShiftByteCount<=62)&&(e.appendBits(31,5),this.binaryShiftByteCount>62?e.appendBits(this.binaryShiftByteCount-31,16):i===0?e.appendBits(Math.min(this.binaryShiftByteCount,31),5):e.appendBits(this.binaryShiftByteCount-31,5)),e.appendBits(r[this.binaryShiftStart+i],8)},t.prototype.addBinaryShift=function(e,r){return new t(this,e,r)},t.prototype.toString=function(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"},t}(S2);function MV(n,t,e){return new OV(n,t,e)}function eh(n,t,e){return new S2(n,t,e)}var NV=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],xo=0,J1=1,xi=2,g4=3,oa=4,PV=new S2(null,0,0),Bv=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])],kV=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};function LV(n){var t,e;try{for(var r=kV(n),i=r.next();!i.done;i=r.next()){var a=i.value;Rn.fill(a,-1)}}catch(s){t={error:s}}finally{try{i&&!i.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}return n[xo][oa]=0,n[J1][oa]=0,n[J1][xo]=28,n[g4][oa]=0,n[xi][oa]=0,n[xi][xo]=15,n}var p4=LV(Rn.createInt32Array(6,6)),BV=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},VV=function(){function n(t,e,r,i){this.token=t,this.mode=e,this.binaryShiftByteCount=r,this.bitCount=i}return n.prototype.getMode=function(){return this.mode},n.prototype.getToken=function(){return this.token},n.prototype.getBinaryShiftByteCount=function(){return this.binaryShiftByteCount},n.prototype.getBitCount=function(){return this.bitCount},n.prototype.latchAndAppend=function(t,e){var r=this.bitCount,i=this.token;if(t!==this.mode){var a=Bv[this.mode][t];i=eh(i,a&65535,a>>16),r+=a>>16}var s=t===xi?4:5;return i=eh(i,e,s),new n(i,t,0,r+s)},n.prototype.shiftAndAppend=function(t,e){var r=this.token,i=this.mode===xi?4:5;return r=eh(r,p4[this.mode][t],i),r=eh(r,e,5),new n(r,this.mode,0,this.bitCount+i+5)},n.prototype.addBinaryShiftChar=function(t){var e=this.token,r=this.mode,i=this.bitCount;if(this.mode===oa||this.mode===xi){var a=Bv[r][xo];e=eh(e,a&65535,a>>16),i+=a>>16,r=xo}var s=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,l=new n(e,r,this.binaryShiftByteCount+1,i+s);return l.binaryShiftByteCount===2078&&(l=l.endBinaryShift(t+1)),l},n.prototype.endBinaryShift=function(t){if(this.binaryShiftByteCount===0)return this;var e=this.token;return e=MV(e,t-this.binaryShiftByteCount,this.binaryShiftByteCount),new n(e,this.mode,0,this.bitCount)},n.prototype.isBetterThanOrEqualTo=function(t){var e=this.bitCount+(Bv[this.mode][t.mode]>>16);return this.binaryShiftByteCount<t.binaryShiftByteCount?e+=n.calculateBinaryShiftCost(t)-n.calculateBinaryShiftCost(this):this.binaryShiftByteCount>t.binaryShiftByteCount&&t.binaryShiftByteCount>0&&(e+=10),e<=t.bitCount},n.prototype.toBitArray=function(t){for(var e,r,i=[],a=this.endBinaryShift(t.length).token;a!==null;a=a.getPrevious())i.unshift(a);var s=new $n;try{for(var l=BV(i),c=l.next();!c.done;c=l.next()){var f=c.value;f.appendTo(s,t)}}catch(d){e={error:d}}finally{try{c&&!c.done&&(r=l.return)&&r.call(l)}finally{if(e)throw e.error}}return s},n.prototype.toString=function(){return se.format("%s bits=%d bytes=%d",NV[this.mode],this.bitCount,this.binaryShiftByteCount)},n.calculateBinaryShiftCost=function(t){return t.binaryShiftByteCount>62?21:t.binaryShiftByteCount>31?20:t.binaryShiftByteCount>0?10:0},n.INITIAL_STATE=new n(PV,xo,0,0),n}();function FV(n){var t=se.getCharCode(" "),e=se.getCharCode("."),r=se.getCharCode(",");n[xo][t]=1;for(var i=se.getCharCode("Z"),a=se.getCharCode("A"),s=a;s<=i;s++)n[xo][s]=s-a+2;n[J1][t]=1;for(var l=se.getCharCode("z"),c=se.getCharCode("a"),s=c;s<=l;s++)n[J1][s]=s-c+2;n[xi][t]=1;for(var f=se.getCharCode("9"),d=se.getCharCode("0"),s=d;s<=f;s++)n[xi][s]=s-d+2;n[xi][r]=12,n[xi][e]=13;for(var g=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""],m=0;m<g.length;m++)n[g4][se.getCharCode(g[m])]=m;for(var v=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"],m=0;m<v.length;m++)se.getCharCode(v[m])>0&&(n[oa][se.getCharCode(v[m])]=m);return n}var Vv=FV(Rn.createInt32Array(5,256)),r1=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},UV=function(){function n(t){this.text=t}return n.prototype.encode=function(){for(var t=se.getCharCode(" "),e=se.getCharCode(`
`),r=GS.singletonList(VV.INITIAL_STATE),i=0;i<this.text.length;i++){var a=void 0,s=i+1<this.text.length?this.text[i+1]:0;switch(this.text[i]){case se.getCharCode("\r"):a=s===e?2:0;break;case se.getCharCode("."):a=s===t?3:0;break;case se.getCharCode(","):a=s===t?4:0;break;case se.getCharCode(":"):a=s===t?5:0;break;default:a=0}a>0?(r=n.updateStateListForPair(r,i,a),i++):r=this.updateStateListForChar(r,i)}var l=GS.min(r,function(c,f){return c.getBitCount()-f.getBitCount()});return l.toBitArray(this.text)},n.prototype.updateStateListForChar=function(t,e){var r,i,a=[];try{for(var s=r1(t),l=s.next();!l.done;l=s.next()){var c=l.value;this.updateStateForChar(c,e,a)}}catch(f){r={error:f}}finally{try{l&&!l.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}return n.simplifyStates(a)},n.prototype.updateStateForChar=function(t,e,r){for(var i=this.text[e]&255,a=Vv[t.getMode()][i]>0,s=null,l=0;l<=oa;l++){var c=Vv[l][i];if(c>0){if(s==null&&(s=t.endBinaryShift(e)),!a||l===t.getMode()||l===xi){var f=s.latchAndAppend(l,c);r.push(f)}if(!a&&p4[t.getMode()][l]>=0){var d=s.shiftAndAppend(l,c);r.push(d)}}}if(t.getBinaryShiftByteCount()>0||Vv[t.getMode()][i]===0){var g=t.addBinaryShiftChar(e);r.push(g)}},n.updateStateListForPair=function(t,e,r){var i,a,s=[];try{for(var l=r1(t),c=l.next();!c.done;c=l.next()){var f=c.value;this.updateStateForPair(f,e,r,s)}}catch(d){i={error:d}}finally{try{c&&!c.done&&(a=l.return)&&a.call(l)}finally{if(i)throw i.error}}return this.simplifyStates(s)},n.updateStateForPair=function(t,e,r,i){var a=t.endBinaryShift(e);if(i.push(a.latchAndAppend(oa,r)),t.getMode()!==oa&&i.push(a.shiftAndAppend(oa,r)),r===3||r===4){var s=a.latchAndAppend(xi,16-r).latchAndAppend(xi,1);i.push(s)}if(t.getBinaryShiftByteCount()>0){var l=t.addBinaryShiftChar(e).addBinaryShiftChar(e+1);i.push(l)}},n.simplifyStates=function(t){var e,r,i,a,s=[];try{for(var l=r1(t),c=l.next();!c.done;c=l.next()){var f=c.value,d=!0,g=function(b){if(b.isBetterThanOrEqualTo(f))return d=!1,"break";f.isBetterThanOrEqualTo(b)&&(s=s.filter(function(S){return S!==b}))};try{for(var m=(i=void 0,r1(s)),v=m.next();!v.done;v=m.next()){var _=v.value,w=g(_);if(w==="break")break}}catch(b){i={error:b}}finally{try{v&&!v.done&&(a=m.return)&&a.call(m)}finally{if(i)throw i.error}}d&&s.push(f)}}catch(b){e={error:b}}finally{try{c&&!c.done&&(r=l.return)&&r.call(l)}finally{if(e)throw e.error}}return s},n}(),jV=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};(function(){function n(){}return n.encodeBytes=function(t){return n.encode(t,n.DEFAULT_EC_PERCENT,n.DEFAULT_AZTEC_LAYERS)},n.encode=function(t,e,r){var i=new UV(t).encode(),a=Zt.truncDivision(i.getSize()*e,100)+11,s=i.getSize()+a,l,c,f,d,g;if(r!==n.DEFAULT_AZTEC_LAYERS){if(l=r<0,c=Math.abs(r),c>(l?n.MAX_NB_BITS_COMPACT:n.MAX_NB_BITS))throw new kt(se.format("Illegal value %s for layers",r));f=n.totalBitsInLayer(c,l),d=n.WORD_SIZE[c];var m=f-f%d;if(g=n.stuffBits(i,d),g.getSize()+a>m)throw new kt("Data to large for user specified layer");if(l&&g.getSize()>d*64)throw new kt("Data to large for user specified layer")}else{d=0,g=null;for(var v=0;;v++){if(v>n.MAX_NB_BITS)throw new kt("Data too large for an Aztec code");if(l=v<=3,c=l?v+1:v,f=n.totalBitsInLayer(c,l),!(s>f)){(g==null||d!==n.WORD_SIZE[c])&&(d=n.WORD_SIZE[c],g=n.stuffBits(i,d));var m=f-f%d;if(!(l&&g.getSize()>d*64)&&g.getSize()+a<=m)break}}}var _=n.generateCheckWords(g,f,d),w=g.getSize()/d,b=n.generateModeMessage(l,c,w),S=(l?11:14)+c*4,C=new Int32Array(S),I;if(l){I=S;for(var v=0;v<C.length;v++)C[v]=v}else{I=S+1+2*Zt.truncDivision(Zt.truncDivision(S,2)-1,15);for(var M=Zt.truncDivision(S,2),N=Zt.truncDivision(I,2),v=0;v<M;v++){var k=v+Zt.truncDivision(v,15);C[M-v-1]=N-k-1,C[M+v]=N+k+1}}for(var O=new Aa(I),v=0,R=0;v<c;v++){for(var D=(c-v)*4+(l?9:12),L=0;L<D;L++)for(var F=L*2,U=0;U<2;U++)_.get(R+F+U)&&O.set(C[v*2+U],C[v*2+L]),_.get(R+D*2+F+U)&&O.set(C[v*2+L],C[S-1-v*2-U]),_.get(R+D*4+F+U)&&O.set(C[S-1-v*2-U],C[S-1-v*2-L]),_.get(R+D*6+F+U)&&O.set(C[S-1-v*2-L],C[v*2+U]);R+=D*8}if(n.drawModeMessage(O,l,I,b),l)n.drawBullsEye(O,Zt.truncDivision(I,2),5);else{n.drawBullsEye(O,Zt.truncDivision(I,2),7);for(var v=0,L=0;v<Zt.truncDivision(S,2)-1;v+=15,L+=16)for(var U=Zt.truncDivision(I,2)&1;U<I;U+=2)O.set(Zt.truncDivision(I,2)-L,U),O.set(Zt.truncDivision(I,2)+L,U),O.set(U,Zt.truncDivision(I,2)-L),O.set(U,Zt.truncDivision(I,2)+L)}var B=new CV;return B.setCompact(l),B.setSize(I),B.setLayers(c),B.setCodeWords(w),B.setMatrix(O),B},n.drawBullsEye=function(t,e,r){for(var i=0;i<r;i+=2)for(var a=e-i;a<=e+i;a++)t.set(a,e-i),t.set(a,e+i),t.set(e-i,a),t.set(e+i,a);t.set(e-r,e-r),t.set(e-r+1,e-r),t.set(e-r,e-r+1),t.set(e+r,e-r),t.set(e+r,e-r+1),t.set(e+r,e+r-1)},n.generateModeMessage=function(t,e,r){var i=new $n;return t?(i.appendBits(e-1,2),i.appendBits(r-1,6),i=n.generateCheckWords(i,28,4)):(i.appendBits(e-1,5),i.appendBits(r-1,11),i=n.generateCheckWords(i,40,4)),i},n.drawModeMessage=function(t,e,r,i){var a=Zt.truncDivision(r,2);if(e)for(var s=0;s<7;s++){var l=a-3+s;i.get(s)&&t.set(l,a-5),i.get(s+7)&&t.set(a+5,l),i.get(20-s)&&t.set(l,a+5),i.get(27-s)&&t.set(a-5,l)}else for(var s=0;s<10;s++){var l=a-5+s+Zt.truncDivision(s,5);i.get(s)&&t.set(l,a-7),i.get(s+10)&&t.set(a+7,l),i.get(29-s)&&t.set(l,a+7),i.get(39-s)&&t.set(a-7,l)}},n.generateCheckWords=function(t,e,r){var i,a,s=t.getSize()/r,l=new h4(n.getGF(r)),c=Zt.truncDivision(e,r),f=n.bitsToWords(t,r,c);l.encode(f,c-s);var d=e%r,g=new $n;g.appendBits(0,d);try{for(var m=jV(Array.from(f)),v=m.next();!v.done;v=m.next()){var _=v.value;g.appendBits(_,r)}}catch(w){i={error:w}}finally{try{v&&!v.done&&(a=m.return)&&a.call(m)}finally{if(i)throw i.error}}return g},n.bitsToWords=function(t,e,r){var i=new Int32Array(r),a,s;for(a=0,s=t.getSize()/e;a<s;a++){for(var l=0,c=0;c<e;c++)l|=t.get(a*e+c)?1<<e-c-1:0;i[a]=l}return i},n.getGF=function(t){switch(t){case 4:return Pr.AZTEC_PARAM;case 6:return Pr.AZTEC_DATA_6;case 8:return Pr.AZTEC_DATA_8;case 10:return Pr.AZTEC_DATA_10;case 12:return Pr.AZTEC_DATA_12;default:throw new kt("Unsupported word size "+t)}},n.stuffBits=function(t,e){for(var r=new $n,i=t.getSize(),a=(1<<e)-2,s=0;s<i;s+=e){for(var l=0,c=0;c<e;c++)(s+c>=i||t.get(s+c))&&(l|=1<<e-1-c);(l&a)===a?(r.appendBits(l&a,e),s--):(l&a)===0?(r.appendBits(l|1,e),s--):r.appendBits(l,e)}return r},n.totalBitsInLayer=function(t,e){return((e?88:112)+16*t)*t},n.DEFAULT_EC_PERCENT=33,n.DEFAULT_AZTEC_LAYERS=0,n.MAX_NB_BITS=32,n.MAX_NB_BITS_COMPACT=4,n.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]),n})();const zV=({onDetected:n,onError:t})=>{const e=H.useRef(null),r=H.useRef(new HB),i=H.useRef(!1);return H.useEffect(()=>{const a=e.current;let s;const l=()=>{a.play().catch(d=>console.error("play() failed:",d))},c=()=>{a.videoWidth===0||a.videoHeight===0||i.current||(i.current=!0,r.current.decodeFromStream(s,a,(d,g)=>{d&&(r.current.reset(),n(d.getText())),g&&!(g instanceof lt)&&(r.current.reset(),t(g.message||"スキャナーでエラーが発生しました。"))}))};return(async()=>{if(a)try{s=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment",aspectRatio:.5}}),a.srcObject=s,a.muted=!0,a.addEventListener("loadedmetadata",l),a.addEventListener("playing",c)}catch(d){const g=`カメラの起動に失敗しました。ブラウザや端末のカメラ権限設定を確認し、許可されているかご確認ください。
詳細: ${d&&d.message?d.message:""}`;console.log("[BarcodeScanner] onError呼び出し",g),t(g)}})(),()=>{if(r.current.reset(),i.current=!1,a){a.removeEventListener("loadedmetadata",l),a.removeEventListener("playing",c);const d=a.srcObject;d&&d.getTracks().forEach(m=>m.stop()),a.srcObject=null}}},[n,t]),A.jsx(ot,{"data-testid":"barcode-scanner-container",children:A.jsx("video",{ref:e,style:{width:"100%",height:"auto",border:"1px solid gray"},autoPlay:!0,muted:!0,playsInline:!0,"data-testid":"barcode-scanner-video"})})},HV={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"90%",maxWidth:400,bgcolor:"background.paper",border:"2px solid #000",boxShadow:24,p:4},GV=({onScan:n,onScanError:t})=>{const[e,r]=H.useState(!1),{setGlobalError:i}=H.useContext(Tr)||{setGlobalError:()=>{}},a=l=>{n(l),r(!1)},s=l=>{i(l),r(!1)};return A.jsxs(A.Fragment,{children:[A.jsx(qt,{variant:"outlined",startIcon:A.jsx(hy,{}),onClick:()=>r(!0),sx:{mt:2,mb:2},fullWidth:!0,"data-testid":"barcode-scan-button",children:"バーコードスキャン"}),A.jsx(nD,{open:e,onClose:()=>r(!1),"aria-labelledby":"scanner-modal-title","data-testid":"barcode-scan-modal",children:A.jsxs(ot,{sx:HV,children:[A.jsxs(ot,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[A.jsx(st,{id:"scanner-modal-title",variant:"h6",component:"h2",children:"バーコードスキャン"}),A.jsx(Xr,{onClick:()=>r(!1),children:A.jsx(st,{variant:"h6",children:"×"})})]}),A.jsx(zV,{onDetected:a,onError:s,"data-testid":"barcode-scanner"})]})})]})};function $V(){const[n,t]=H.useState(""),e=Wh(),r=a=>{console.log("[BookAdd] handleScanDetected スキャン結果:",a),t(a)},i=a=>{e(`/book/${a}`)};return A.jsxs(ot,{sx:{maxWidth:500,mx:"auto",pb:{xs:"72px",sm:"80px"}},children:[A.jsx(Wg,{title:"本を追加",subtitle:"新しい本をライブラリに追加","data-testid":"book-add-header"}),A.jsxs(ot,{sx:{px:{xs:1.5,sm:2,md:0}},children:[A.jsx(GV,{onScan:r,onScanError:a=>console.error(a)}),A.jsx(n7,{isbn:n,onBookAdded:i})]})]})}const T2=n=>{const{user:t}=Pn(),e=H.useContext(Tr),r=(e==null?void 0:e.setGlobalError)||(()=>{}),[i,a]=H.useState([]),[s,l]=H.useState(!0),[c,f]=H.useState(null),d=H.useCallback(async()=>{if(!t||!n){a([]),l(!1);return}try{l(!0),f(null);const _=br(he,"books",n,"memos"),w=sn(_,Fh("createdAt","desc")),S=(await mn(w)).docs.map(C=>({id:C.id,...C.data()}));a(S)}catch(_){console.error("Error fetching memos:",_),r("メモ一覧の取得に失敗しました。"),f("メモ一覧の取得に失敗しました。")}finally{l(!1)}},[t==null?void 0:t.uid,n]),g=H.useCallback(async _=>{if(!t||!n)throw new Error("ユーザーまたは書籍IDが無効です。");try{const w=br(he,"books",n,"memos"),b=await J3(w,{..._,userId:t.uid,createdAt:ga(),updatedAt:ga()}),S={id:b.id,..._,userId:t.uid,createdAt:new Date,updatedAt:new Date};return a(C=>[S,...C]),b.id}catch(w){throw console.error("Error adding memo:",w),r("メモの追加に失敗しました。"),w}},[t==null?void 0:t.uid,n]),m=H.useCallback(async(_,w)=>{if(!t||!n||!_)throw new Error("ユーザー・書籍ID・メモIDが無効です。");try{const b=us(he,"books",n,"memos",_);return await qg(b,{...w,userId:t.uid,updatedAt:ga()}),a(S=>S.map(I=>I.id===_?{...I,...w,userId:t.uid,updatedAt:new Date}:I)),!0}catch(b){throw console.error("Error updating memo:",b),r("メモの更新に失敗しました。"),b}},[t==null?void 0:t.uid,n]),v=H.useCallback(async _=>{if(!t||!n||!_)throw new Error("ユーザー・書籍ID・メモIDが無効です。");try{const w=us(he,"books",n,"memos",_);return await Fk(w),a(b=>b.filter(S=>S.id!==_)),!0}catch(w){throw console.error("Error deleting memo:",w),r("メモの削除に失敗しました。"),w}},[t==null?void 0:t.uid,n]);return H.useEffect(()=>{d()},[d]),{memos:i,loading:s,error:c,fetchMemos:d,addMemo:g,updateMemo:m,deleteMemo:v}},$S=n=>{try{const t=n&&typeof n.toDate=="function"?n.toDate():n instanceof Date?n:null;if(!t)return"";const e=t.getFullYear(),r=t.getMonth()+1,i=t.getDate();return`${e}/${r}/${i}`}catch{return""}},qV=({memo:n,onEdit:t,onDelete:e,onClick:r})=>{const i=mC("(max-width:600px)"),[a,s]=H.useState(!1),f=(n.text?n.text.split(`
`):[]).slice(0,2).join(`
`),d=n.createdAt&&n.createdAt.toDate?n.createdAt.toDate():null,g=_=>{_&&_.stopPropagation(),s(!1),typeof t=="function"&&t(n,!0)},m=_=>{_&&_.stopPropagation(),s(!1),e(n.id)},v=bC({onSwipedLeft:()=>s(!0),onSwipedRight:()=>s(!1),preventDefaultTouchmoveEvent:!0,trackMouse:!0});return i?A.jsxs(ot,{position:"relative",...v,sx:{mb:2},children:[A.jsxs(gn,{"data-testid":"memo-card",sx:{position:"relative",maxWidth:"100%",mx:"auto",cursor:r?"pointer":"default",bgcolor:"background.paper",transition:"transform 0.2s",transform:a?"translateX(-100px)":"none"},onClick:r?()=>r(n,!1):void 0,children:[A.jsxs(pn,{sx:{pb:1,minHeight:48,maxHeight:56,overflow:"hidden"},children:[A.jsx(st,{variant:"body1",sx:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",wordBreak:"break-all",overflowWrap:"break-word"},children:f}),n.comment&&A.jsx(st,{variant:"body2",color:"text.secondary",sx:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",wordBreak:"break-all",overflowWrap:"break-word"},children:n.comment})]}),A.jsx(TE,{sx:{justifyContent:"space-between",alignItems:"center",py:0},children:A.jsxs(Ch,{direction:"row",spacing:1,alignItems:"center",children:[n.page&&A.jsxs(st,{variant:"caption",children:["p.",n.page]}),d&&A.jsx(st,{variant:"caption",color:"text.secondary",children:$S(d)}),Array.isArray(n.tags)&&n.tags.map((_,w)=>A.jsx(Dn,{label:_,size:"small",color:"secondary"},w))]})})]}),a&&A.jsxs(ot,{position:"absolute",top:0,right:0,height:"100%",display:"flex",flexDirection:"column",justifyContent:"center",zIndex:2,sx:{p:1,gap:1},children:[A.jsx(Xr,{onClick:g,sx:{bgcolor:"primary.main",color:"white",mb:1},size:"large",children:A.jsx(dy,{})}),A.jsx(Xr,{onClick:m,sx:{bgcolor:"error.main",color:"white"},size:"large",children:A.jsx(CE,{})})]})]}):A.jsxs(gn,{"data-testid":"memo-card",sx:{position:"relative",maxWidth:"100%",mx:"auto",cursor:r?"pointer":"default",bgcolor:"background.paper"},onClick:r?()=>r(n,!1):void 0,children:[A.jsxs(pn,{sx:{pb:1,minHeight:48,maxHeight:56,overflow:"hidden"},children:[A.jsx(st,{variant:"body1",sx:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",wordBreak:"break-all",overflowWrap:"break-word"},children:f}),n.comment&&A.jsx(st,{variant:"body2",color:"text.secondary",sx:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",wordBreak:"break-all",overflowWrap:"break-word"},children:n.comment})]}),A.jsxs(TE,{sx:{justifyContent:"space-between",alignItems:"center",py:0},children:[A.jsxs(Ch,{direction:"row",spacing:1,alignItems:"center",children:[n.page&&A.jsxs(st,{variant:"caption",children:["p.",n.page]}),d&&A.jsx(st,{variant:"caption",color:"text.secondary",children:$S(d)}),Array.isArray(n.tags)&&n.tags.map((_,w)=>A.jsx(Dn,{label:_,size:"small",color:"secondary"},w))]}),A.jsxs(ot,{sx:{display:{xs:"none",sm:"flex"}},children:[A.jsx(Xr,{"aria-label":"edit",onClick:g,size:"small","data-testid":"memo-edit-button",children:A.jsx(dy,{fontSize:"small"})}),A.jsx(Xr,{"aria-label":"delete",onClick:m,size:"small","data-testid":"memo-delete-button",children:A.jsx(CE,{fontSize:"small"})})]})]})]})},WV=n=>{try{const t=n&&typeof n.toDate=="function"?n.toDate():n instanceof Date?n:null;if(!t)return"";const e=t.getFullYear(),r=t.getMonth()+1,i=t.getDate(),a=t.getHours(),s=String(t.getMinutes()).padStart(2,"0"),l=String(t.getSeconds()).padStart(2,"0");return`${e}/${r}/${i} ${a}:${s}:${l}`}catch{return""}},m4=({open:n,memo:t,bookId:e,onClose:r,onUpdate:i,onDelete:a,editMode:s=!1})=>{const{setGlobalError:l}=H.useContext(Tr),{updateMemo:c,deleteMemo:f}=T2(e),[d,g]=H.useState(s?"edit":"view"),[m,v]=H.useState(null),[_,w]=H.useState(!1),[b,S]=H.useState("");Kr.useEffect(()=>{t&&(v(t),g(s?"edit":"view"),w(!1),S(""))},[t,s]);const C=()=>{v(null),g("view"),w(!1),S(""),r()},I=async N=>{if(N.preventDefault(),!m||!m.text.trim())return;let k=m.tags||[];b&&!k.includes(b)&&(k=[...k,b]);try{await c(m.id,{text:m.text,comment:m.comment,page:Number(m.page)||null,tags:k}),C(),i&&i()}catch(O){console.error("Error updating memo: ",O),l("メモの更新に失敗しました。")}},M=async N=>{try{await f(N),C(),a&&a()}catch(k){console.error("Error deleting memo: ",k),l("メモの削除に失敗しました。")}};return t?A.jsxs(A.Fragment,{children:[A.jsxs(ma,{open:n,onClose:C,maxWidth:"sm",fullWidth:!0,"data-testid":"memo-detail-dialog",children:[A.jsx(va,{"data-testid":"memo-detail-title",children:"メモ詳細"}),A.jsx(ya,{children:d==="view"?A.jsxs(A.Fragment,{children:[A.jsx(st,{variant:"body1",sx:{whiteSpace:"pre-line",mb:2},children:m==null?void 0:m.text}),(m==null?void 0:m.comment)&&A.jsx(st,{variant:"body2",color:"text.secondary",sx:{mb:1},children:m.comment}),A.jsx(Ch,{direction:"row",spacing:1,sx:{mb:1,flexWrap:"wrap"},children:Array.isArray(m==null?void 0:m.tags)&&m.tags.map((N,k)=>A.jsx(Dn,{label:N,size:"small",color:"secondary"},k))}),(m==null?void 0:m.page)&&A.jsxs(st,{variant:"caption",sx:{display:"block",mb:1},children:["p. ",m.page]}),(m==null?void 0:m.createdAt)&&A.jsx(st,{variant:"caption",color:"text.secondary",sx:{display:"block",mb:1},children:WV(m.createdAt)})]}):A.jsxs(ot,{component:"form",onSubmit:I,sx:{mt:1},children:[A.jsx(oe,{label:"引用・抜き書き",fullWidth:!0,multiline:!0,rows:4,value:(m==null?void 0:m.text)||"",onChange:N=>v({...m,text:N.target.value}),margin:"normal",required:!0,inputProps:{"data-testid":"memo-text-input"}}),A.jsx(oe,{label:"感想・コメント",fullWidth:!0,multiline:!0,rows:2,value:(m==null?void 0:m.comment)||"",onChange:N=>v({...m,comment:N.target.value}),margin:"normal",inputProps:{"data-testid":"memo-comment-input"}}),A.jsx(oe,{label:"ページ番号",type:"number",value:(m==null?void 0:m.page)||"",onChange:N=>v({...m,page:N.target.value}),margin:"normal",sx:{mr:2},inputProps:{"data-testid":"memo-page-input"}}),A.jsx(is,{multiple:!0,freeSolo:!0,options:[],value:(m==null?void 0:m.tags)||[],getOptionLabel:N=>typeof N=="string"?N:N.inputValue||N.tag||"",onChange:(N,k)=>{const O=(k||[]).map(R=>{if(typeof R=="string")return R;if(R&&typeof R=="object"){if("inputValue"in R&&R.inputValue)return R.inputValue;if("tag"in R&&R.tag)return R.tag}return""}).filter(Boolean);v({...m,tags:O})},inputValue:b,onInputChange:(N,k)=>S(k),renderInput:N=>A.jsx(oe,{...N,label:"タグ",margin:"normal",fullWidth:!0,placeholder:"例: 名言,感想,引用",inputProps:{...N.inputProps,"data-testid":"memo-tags-input"}})})]})}),A.jsx(xa,{children:d==="view"?A.jsxs(A.Fragment,{children:[A.jsx(qt,{onClick:()=>g("edit"),"data-testid":"memo-edit-button",children:"編集"}),A.jsx(qt,{onClick:()=>w(!0),color:"error","data-testid":"memo-delete-button",children:"削除"}),A.jsx(qt,{onClick:C,"data-testid":"memo-close-button",children:"閉じる"})]}):A.jsxs(A.Fragment,{children:[A.jsx(qt,{onClick:()=>g("view"),"data-testid":"memo-cancel-button",children:"キャンセル"}),A.jsx(qt,{onClick:I,variant:"contained","data-testid":"memo-update-button",children:"更新"})]})})]}),A.jsxs(ma,{open:_,onClose:()=>w(!1),"data-testid":"memo-delete-dialog",children:[A.jsx(va,{"data-testid":"memo-delete-confirm-title",children:"本当に削除しますか？"}),A.jsx(ya,{children:A.jsx(st,{children:"このメモを削除すると、元に戻すことはできません。"})}),A.jsxs(xa,{children:[A.jsx(qt,{onClick:()=>w(!1),"data-testid":"memo-delete-cancel-button",children:"キャンセル"}),A.jsx(qt,{onClick:()=>{M(m==null?void 0:m.id)},color:"error",variant:"contained","data-testid":"memo-delete-confirm-button",children:"削除"})]})]})]}):null},XV=({bookId:n,onMemoUpdated:t})=>{const{setGlobalError:e}=H.useContext(Tr),{memos:r,loading:i,deleteMemo:a}=T2(n),[s,l]=H.useState(null),[c,f]=H.useState(!1),[d,g]=H.useState(!1),[m,v]=H.useState(null),[_,w]=H.useState(!1),b=(k,O=!1)=>{l(k),w(O),f(!0)},S=k=>{const O=r.find(R=>R.id===k);O&&(v(O),g(!0))},C=async()=>{if(m)try{await a(m.id),g(!1),v(null)}catch(k){console.error("Error deleting memo:",k),e("メモの削除に失敗しました。")}},I=()=>{l(null),f(!1)},M=()=>{g(!1),v(null)},N=()=>{t&&t()};return i?A.jsx(st,{children:"メモを読み込み中..."}):r.length===0?A.jsx(st,{children:"まだメモはありません。"}):A.jsxs(A.Fragment,{children:[A.jsx(ot,{sx:{display:"flex",flexDirection:"column",gap:2},children:r.map(k=>A.jsx(qV,{memo:k,onEdit:(O,R)=>b(O,R),onDelete:S,onClick:O=>b(O,!1)},k.id))}),A.jsx(m4,{open:c,memo:s,bookId:n,onClose:I,onUpdate:N,onDelete:N,editMode:_}),A.jsxs(ma,{open:d,onClose:M,"data-testid":"memo-delete-dialog",children:[A.jsx(va,{"data-testid":"memo-delete-confirm-title",children:"本当に削除しますか？"}),A.jsx(ya,{children:A.jsx(st,{children:"このメモを削除すると、元に戻すことはできません。"})}),A.jsxs(xa,{children:[A.jsx(qt,{onClick:M,"data-testid":"memo-delete-cancel-button",children:"キャンセル"}),A.jsx(qt,{onClick:C,color:"error",variant:"contained","data-testid":"memo-delete-confirm-button",children:"削除"})]})]})]})},qS=({onTextDetected:n,disabled:t=!1})=>{const[e,r]=H.useState(!1),[i,a]=H.useState(!1),[s,l]=H.useState(0),c=()=>/iPad|iPhone|iPod/.test(navigator.userAgent),f=()=>/Safari/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent),d=()=>c()&&f();H.useEffect(()=>{const w=S=>{if(!i)return;const C=S.clipboardData.getData("text/plain"),I=Date.now();C&&I-s<3e4&&(console.log("[CameraPasteOCR] ペーストされたテキスト:",C),a(!1),n(C),r(!1))},b=S=>{i&&(S.ctrlKey||S.metaKey)&&S.key==="v"&&(console.log("[CameraPasteOCR] キーボードショートカット検出"),setTimeout(()=>{i&&(console.log("[CameraPasteOCR] ペーストイベントが検出されませんでした。手動ペーストを促します。"),_())},100))};return document.addEventListener("paste",w),document.addEventListener("keydown",b),()=>{document.removeEventListener("paste",w),document.removeEventListener("keydown",b)}},[i,s,n]);const g=()=>{d()?(r(!0),a(!0),l(Date.now())):alert("この機能は現在iPhone Safariでのみ利用可能です。")},m=()=>{r(!1),a(!1)},v=()=>{navigator.clipboard&&navigator.clipboard.readText?navigator.clipboard.readText().then(w=>{w?(console.log("[CameraPasteOCR] 手動ペーストされたテキスト:",w),n(w),r(!1)):console.log("[CameraPasteOCR] クリップボードが空です")}).catch(w=>{console.error("[CameraPasteOCR] クリップボード読み取りエラー:",w),console.log("[CameraPasteOCR] 手動入力モードに切り替え")}):console.log("[CameraPasteOCR] navigator.clipboardが利用できません")},_=()=>{const w=document.createElement("textarea");w.style.position="fixed",w.style.left="-9999px",w.style.top="-9999px",w.style.opacity="0",w.setAttribute("data-testid","temp-paste-textarea"),document.body.appendChild(w),w.focus();const b=prompt("コピーしたテキストをここに貼り付けてください（Ctrl+V または Cmd+V）:");b&&b.trim()&&(console.log("[CameraPasteOCR] 手動入力されたテキスト:",b),n(b.trim()),r(!1)),document.body.removeChild(w)};return A.jsxs(A.Fragment,{children:[A.jsx(qt,{variant:"outlined",startIcon:A.jsx(hy,{}),onClick:g,disabled:t,fullWidth:!0,sx:{mt:1,mb:1,height:{xs:"40px",sm:"48px"},fontSize:{xs:"0.8rem",sm:"0.9rem"}},"data-testid":"camera-paste-ocr-button",children:d()?"カメラでスキャン（コピーしてペースト）":"カメラでスキャン"}),A.jsxs(ma,{open:e,onClose:m,maxWidth:"sm",fullWidth:!0,"data-testid":"camera-instructions-dialog",children:[A.jsx(va,{children:A.jsxs(ot,{display:"flex",alignItems:"center",gap:1,children:[A.jsx(hy,{}),"カメラでテキストスキャン"]})}),A.jsxs(ya,{children:[A.jsx(st,{variant:"body1",paragraph:!0,children:"以下の手順でテキストをスキャンしてください："}),A.jsxs(ot,{component:"ol",sx:{pl:2},children:[A.jsx(st,{component:"li",variant:"body1",paragraph:!0,children:"カメラアプリを手動で起動してください"}),A.jsx(st,{component:"li",variant:"body1",paragraph:!0,children:"スキャンしたいテキストにカメラを向けてください"}),A.jsx(st,{component:"li",variant:"body1",paragraph:!0,children:"テキストが認識されたら、テキストをタップして選択してください"}),A.jsx(st,{component:"li",variant:"body1",paragraph:!0,children:"「コピー」をタップしてテキストをコピーしてください"}),A.jsx(st,{component:"li",variant:"body1",paragraph:!0,children:"この画面に戻って、下の「ペースト」ボタンをタップしてください"})]}),A.jsx(st,{variant:"body2",color:"text.secondary",sx:{mt:2},children:"💡 ヒント：iPhoneのカメラアプリは高精度なOCR機能を搭載しています"}),A.jsx(st,{variant:"body2",color:"text.secondary",children:"⏱️ 30秒以内にペーストしてください"})]}),A.jsxs(xa,{children:[A.jsx(qt,{onClick:m,children:"キャンセル"}),A.jsx(qt,{onClick:v,startIcon:A.jsx(rD,{}),variant:"contained",color:"primary","data-testid":"manual-paste-button",children:"クリップボードからペースト"})]})]})]})},YV=({bookId:n,bookTags:t=[],onMemoAdded:e,onClose:r})=>{const{user:i}=Pn(),{setGlobalError:a}=H.useContext(Tr),{addMemo:s}=T2(n),[l,c]=H.useState(""),[f,d]=H.useState(""),[g,m]=H.useState(""),[v,_]=H.useState([]),[w,b]=H.useState(""),[S,C]=H.useState(!1),{tagOptions:I,fetchTagHistory:M,saveTagsToHistory:N}=cs("memo",i);H.useEffect(()=>{M()},[M]);const k=async L=>{if(L.preventDefault(),!l.trim()||S)return;C(!0),console.log("MemoAdd - handleSubmit開始:",{text:l,comment:f,page:g,tags:v});let F=v;w&&!v.includes(w)&&(F=[...v,w]),console.log("MemoAdd - 保存するタグ:",F);try{console.log("MemoAdd - addMemo呼び出し前");const U=await s({text:l,comment:f,page:Number(g)||null,tags:F});console.log("MemoAdd - addMemo呼び出し完了, memoId:",U),await N(F),console.log("MemoAdd - フォームリセット前"),c(""),d(""),m(""),_([]),b(""),console.log("MemoAdd - フォームリセット完了"),e&&(console.log("MemoAdd - onMemoAddedコールバック呼び出し"),e())}catch(U){console.error("Error adding memo: ",U),a("メモの追加に失敗しました。")}finally{C(!1)}},O=()=>{r&&r()},R=L=>{console.log("[MemoAdd] OCRで検出されたテキスト:",L),c(L)};return r?A.jsxs(A.Fragment,{children:[A.jsx(va,{"data-testid":"memo-add-dialog-title",children:"メモを追加"}),A.jsx(ya,{children:A.jsxs(ot,{component:"form",onSubmit:k,sx:{mt:1},"data-testid":"memo-add-form",children:[A.jsx(oe,{label:"引用・抜き書き",fullWidth:!0,multiline:!0,rows:3,value:l,onChange:L=>c(L.target.value),required:!0,inputProps:{"data-testid":"memo-text-input"}}),A.jsx(qS,{onTextDetected:R}),A.jsx(oe,{label:"感想・コメント",fullWidth:!0,multiline:!0,rows:2,value:f,onChange:L=>d(L.target.value),inputProps:{"data-testid":"memo-comment-input"}}),A.jsx(oe,{label:"ページ番号",type:"number",value:g,onChange:L=>m(L.target.value),sx:{mr:2,width:{xs:"100%",sm:"auto"}},inputProps:{"data-testid":"memo-page-input"}}),A.jsx(is,{multiple:!0,freeSolo:!0,options:I,value:v,getOptionLabel:L=>typeof L=="string"?L:L.inputValue||L.tag||"",onChange:async(L,F)=>{const U=(F||[]).map(B=>{if(typeof B=="string")return B;if(B&&typeof B=="object"){if("inputValue"in B&&B.inputValue)return B.inputValue;if("tag"in B&&B.tag)return B.tag}return""}).filter(Boolean);_(U),await N(U)},inputValue:w,onInputChange:(L,F)=>b(F),renderInput:L=>A.jsx(oe,{...L,label:"タグ",fullWidth:!0,placeholder:"例: 名言,感想,引用",inputProps:{...L.inputProps,"data-testid":"memo-tags-input"}})})]})}),A.jsxs(xa,{children:[A.jsx(qt,{onClick:O,"data-testid":"memo-add-cancel",disabled:S,children:"キャンセル"}),A.jsx(qt,{onClick:k,variant:"contained","data-testid":"memo-add-submit",disabled:S,children:S?"追加中...":"メモを追加"})]})]}):A.jsxs(ot,{component:"form",onSubmit:k,sx:{mt:1},"data-testid":"memo-add-form",children:[A.jsx(oe,{label:"引用・抜き書き",fullWidth:!0,multiline:!0,rows:3,value:l,onChange:L=>c(L.target.value),required:!0,inputProps:{"data-testid":"memo-text-input"}}),A.jsx(qS,{onTextDetected:R}),A.jsx(oe,{label:"感想・コメント",fullWidth:!0,multiline:!0,rows:2,value:f,onChange:L=>d(L.target.value),inputProps:{"data-testid":"memo-comment-input"}}),A.jsx(oe,{label:"ページ番号",type:"number",value:g,onChange:L=>m(L.target.value),sx:{mr:2,width:{xs:"100%",sm:"auto"}},inputProps:{"data-testid":"memo-page-input"}}),A.jsx(is,{multiple:!0,freeSolo:!0,options:I,value:v,getOptionLabel:L=>typeof L=="string"?L:L.inputValue||L.tag||"",onChange:async(L,F)=>{const U=(F||[]).map(B=>{if(typeof B=="string")return B;if(B&&typeof B=="object"){if("inputValue"in B&&B.inputValue)return B.inputValue;if("tag"in B&&B.tag)return B.tag}return""}).filter(Boolean);_(U),await N(U)},inputValue:w,onInputChange:(L,F)=>b(F),renderInput:L=>A.jsx(oe,{...L,label:"タグ",fullWidth:!0,placeholder:"例: 名言,感想,引用",inputProps:{...L.inputProps,"data-testid":"memo-tags-input"}})}),A.jsx(qt,{type:"submit",variant:"contained",disabled:S,sx:{mt:2,mb:{xs:8,sm:2},width:{xs:"100%",sm:"auto"}},"data-testid":"memo-add-submit",children:S?"追加中...":"メモを追加"})]})},KV=({book:n,bookId:t,onStatusChange:e})=>{const r=H.useContext(Tr),i=(r==null?void 0:r.setGlobalError)||(()=>{}),[a,s]=Kr.useState(!1);if(!n)return null;const l=n.status||"reading",c=async()=>{if(!n)return;s(!0);const f=n.status==="reading"?"finished":"reading",d=us(he,"books",t);try{await qg(d,{status:f,updatedAt:ga()}),e(f)}catch(g){console.error("Error updating status:",g),i("ステータスの更新に失敗しました。")}finally{s(!1)}};return A.jsxs(ot,{"data-testid":"book-info",children:[A.jsxs(ot,{sx:{display:"flex",justifyContent:"center",alignItems:"center",gap:2,mb:2},children:[A.jsx(Dn,{label:l==="reading"?"読書中":"読了",color:l==="reading"?"primary":"success","data-testid":"book-status-chip"}),A.jsx(qt,{onClick:c,variant:"outlined",disabled:a,"data-testid":"book-status-change-button",children:a?"更新中...":l==="reading"?"読了にする":"読書中にする"})]}),A.jsx(ot,{sx:{textAlign:"left",mb:2},"data-testid":"book-cover-section",children:n.coverImageUrl?A.jsx("img",{src:n.coverImageUrl,alt:`${n.title}の表紙`,style:{maxHeight:"250px",width:"auto"},"data-testid":"book-cover-image"}):A.jsx(ot,{sx:{border:"1px dashed grey",height:250,width:167,display:"flex",alignItems:"center",justifyContent:"center",mx:"auto"},"data-testid":"book-cover-placeholder",children:A.jsx(st,{variant:"body1",color:"text.secondary",children:"書影なし"})})}),A.jsxs(ot,{sx:{mb:2},"data-testid":"book-details",children:[A.jsx(st,{variant:"h4",gutterBottom:!0,sx:{wordBreak:"break-word"},"data-testid":"book-title",children:n.title}),A.jsx(st,{variant:"h6",color:"text.secondary",gutterBottom:!0,"data-testid":"book-author",children:n.author}),n.publisher&&A.jsxs(st,{variant:"body1",color:"text.secondary",gutterBottom:!0,"data-testid":"book-publisher",children:["出版社: ",n.publisher]}),n.publishedDate&&A.jsxs(st,{variant:"body1",color:"text.secondary","data-testid":"book-published-date",children:["出版日: ",n.publishedDate]})]})]})},ZV=({book:n,bookId:t,onTagsChange:e})=>{const{user:r}=Pn(),i=H.useContext(Tr),a=(i==null?void 0:i.setGlobalError)||(()=>{}),[s,l]=H.useState(!1),[c,f]=H.useState([]),{tagOptions:d,fetchTagHistory:g,saveTagsToHistory:m}=cs("book",r);H.useEffect(()=>{g()},[g]);const v=()=>{f(n.tags||[]),l(!0)},_=async()=>{if(n)try{const w=us(he,"books",t);await qg(w,{tags:c,updatedAt:ga()}),await m(c),e(c),l(!1)}catch(w){console.error("Error updating tags:",w),a("タグの更新に失敗しました。")}};return n?A.jsxs(ot,{sx:{mb:2},children:[A.jsxs(ot,{sx:{display:"flex",alignItems:"center",gap:1,mb:1},children:[A.jsx(st,{variant:"h6",children:"タグ:"}),A.jsx(Xr,{onClick:v,size:"small","data-testid":"edit-tags-button",children:A.jsx(dy,{})})]}),A.jsx(ot,{sx:{display:"flex",flexWrap:"wrap",gap:1},children:(n.tags||[]).map((w,b)=>A.jsx(Dn,{label:w,size:"small"},b))}),A.jsxs(ma,{open:s,onClose:()=>l(!1),maxWidth:"sm",fullWidth:!0,children:[A.jsx(va,{children:"タグを編集"}),A.jsx(ya,{children:A.jsx(is,{multiple:!0,freeSolo:!0,options:d,value:c,onChange:(w,b)=>f(b),renderInput:w=>A.jsx(oe,{...w,label:"タグ",placeholder:"タグを入力または選択",fullWidth:!0,margin:"normal"}),renderTags:(w,b)=>w.map((S,C)=>H.createElement(Dn,{...b({index:C}),key:C,label:S,size:"small"}))})}),A.jsxs(xa,{children:[A.jsx(qt,{onClick:()=>l(!1),children:"キャンセル"}),A.jsx(qt,{onClick:_,variant:"contained","data-testid":"save-tags-button",children:"保存"})]})]})]}):null},QV=n=>{const{user:t}=Pn(),e=H.useContext(Tr),r=(e==null?void 0:e.setGlobalError)||(()=>{}),[i,a]=H.useState(null),[s,l]=H.useState(!0),[c,f]=H.useState(null),d=H.useCallback(async()=>{if(!t||!n){l(!1);return}try{l(!0),f(null);const _=us(he,"books",n),w=await Vk(_);w.exists()&&w.data().userId===t.uid?a({id:w.id,...w.data()}):(console.error("No such document or access denied!"),r("書籍が見つからないか、アクセス権限がありません。"),a(null),f("書籍が見つからないか、アクセス権限がありません。"))}catch(_){console.error("Error fetching document:",_),r("書籍情報の取得に失敗しました。"),f("書籍情報の取得に失敗しました。")}finally{l(!1)}},[n,t]),g=H.useCallback(async _=>{if(!t||!n)throw new Error("ユーザーまたは書籍IDが無効です。");try{const w=us(he,"books",n);return await qg(w,{..._,updatedAt:ga()}),a(b=>({...b,..._})),!0}catch(w){throw console.error("Error updating book:",w),r("書籍情報の更新に失敗しました。"),w}},[n,t]),m=H.useCallback(async _=>await g({status:_}),[g]),v=H.useCallback(async _=>await g({tags:_}),[g]);return H.useEffect(()=>{d()},[d]),{book:i,loading:s,error:c,fetchBook:d,updateBook:g,updateBookStatus:m,updateBookTags:v}},JV=()=>{const{id:n}=bD(),t=Eg(),{book:e,loading:r,error:i,updateBookStatus:a,updateBookTags:s}=QV(n),[l,c]=H.useState(0),[f,d]=H.useState(!1);H.useEffect(()=>{console.log("📖 BookDetail mounted:",{id:n,pathname:t.pathname,href:window.location.href}),window.ErrorLogger&&window.ErrorLogger.saveError(new Error(`BookDetail page accessed: ${n}`),"BookDetail Page Access")},[n,t.pathname]);const g=S=>{a(S)},m=S=>{s(S)},v=()=>{console.log("BookDetail - handleMemoAdded: MemoListを再レンダリング"),c(S=>S+1),d(!1)},_=()=>{console.log("BookDetail - handleMemoUpdated: MemoListを再レンダリング"),c(S=>S+1)},w=()=>{d(!0)},b=()=>{d(!1)};return r?(console.log("📖 BookDetail loading..."),A.jsx("div",{"data-testid":"book-detail-loading",children:"Loading..."})):i?(console.error("📖 BookDetail error:",i),window.ErrorLogger&&window.ErrorLogger.saveError(new Error(`BookDetail error: ${i}`),"BookDetail Error"),A.jsxs("div",{"data-testid":"book-detail-error",children:["エラーが発生しました: ",i]})):e?A.jsxs(ot,{sx:{maxWidth:800,mx:"auto",mt:{xs:2,sm:4},pb:"80px",px:{xs:2,sm:0}},"data-testid":"book-detail",children:[A.jsxs(Ic,{sx:{p:{xs:2,sm:3}},children:[A.jsx(KV,{book:e,bookId:n,onStatusChange:g}),A.jsx(ZV,{book:e,bookId:n,onTagsChange:m}),A.jsx(m1,{sx:{my:{xs:1,sm:2}}}),A.jsx(st,{variant:"h5",gutterBottom:!0,sx:{mb:{xs:1,sm:2}},"data-testid":"memo-list-title",children:"メモ一覧"}),A.jsx(XV,{bookId:e.id,onMemoUpdated:_},l)]}),A.jsx(iD,{color:"primary","aria-label":"メモを追加",sx:{position:"fixed",bottom:{xs:72,sm:16},right:{xs:16,sm:16}},onClick:w,"data-testid":"memo-add-fab",children:A.jsx(aD,{})}),A.jsx(ma,{open:f,onClose:b,maxWidth:"sm",fullWidth:!0,"data-testid":"memo-add-dialog",children:A.jsx(YV,{bookId:e.id,bookTags:e.tags||[],onMemoAdded:v,onClose:b})})]}):(console.warn("📖 BookDetail: Book not found for ID:",n),window.ErrorLogger&&window.ErrorLogger.saveError(new Error(`Book not found: ${n}`),"BookDetail Not Found"),A.jsx("div",{"data-testid":"book-detail-not-found",children:"本が見つかりません。"}))};function WS({children:n,value:t,index:e,...r}){return A.jsx("div",{role:"tabpanel",hidden:t!==e,id:`tabpanel-${e}`,"aria-labelledby":`tab-${e}`,...r,children:t===e&&A.jsx(ot,{sx:{p:3},children:n})})}const tF=n=>{const[t,e]=H.useState({}),[r,i]=H.useState(!1),[a,s]=H.useState(null),l=H.useCallback(async()=>{if(n!=null&&n.uid)try{i(!0),s(null),console.log("useTagStats: タグ統計取得開始, userId:",n.uid);const[g,m]=await Promise.all([mn(sn(br(he,"books"),ze("userId","==",n.uid))),mn(sn(uo(he,"memos"),ze("userId","==",n.uid)))]);console.log("useTagStats: データ取得完了, 本:",g.size,"メモ:",m.size);const v={};g.forEach(_=>{const w=_.data();console.log("useTagStats: 本データ:",{id:_.id,title:w.title,tags:w.tags}),w.tags&&Array.isArray(w.tags)&&w.tags.forEach(b=>{var C,I;v[b]||(v[b]={bookCount:0,memoCount:0,lastUsed:null}),v[b].bookCount++;const S=((I=(C=w.updatedAt)==null?void 0:C.toDate)==null?void 0:I.call(C))||new Date;(!v[b].lastUsed||S>v[b].lastUsed)&&(v[b].lastUsed=S)})}),console.log("useTagStats: 本のタグ集計完了"),m.forEach(_=>{var b,S;const w=_.data();console.log("useTagStats: メモデータ:",{id:_.id,bookId:(b=_.ref.parent.parent)==null?void 0:b.id,tags:w.tags,text:((S=w.text)==null?void 0:S.substring(0,30))+"..."}),w.tags&&Array.isArray(w.tags)&&w.tags.forEach(C=>{var M,N;v[C]||(v[C]={bookCount:0,memoCount:0,lastUsed:null}),v[C].memoCount++;const I=((N=(M=w.updatedAt)==null?void 0:M.toDate)==null?void 0:N.call(M))||new Date;(!v[C].lastUsed||I>v[C].lastUsed)&&(v[C].lastUsed=I)})}),console.log("useTagStats: メモのタグ集計完了, 最終統計:",v),e(v),console.log("useTagStats: タグ統計設定完了")}catch(g){console.error("タグ統計の取得に失敗しました:",g),s(g)}finally{i(!1)}},[n==null?void 0:n.uid]),c=H.useCallback((g="count",m="desc")=>Object.entries(t).map(([_,w])=>({tag:_,...w,totalCount:w.bookCount+w.memoCount,type:w.bookCount>0&&w.memoCount>0?"both":w.bookCount>0?"book":"memo"})).sort((_,w)=>{let b=0;switch(g){case"count":b=w.totalCount-_.totalCount;break;case"name":b=_.tag.localeCompare(w.tag,"ja");break;case"lastUsed":b=(w.lastUsed||0)-(_.lastUsed||0);break;default:b=w.totalCount-_.totalCount}return m==="asc"?-b:b}),[t]),f=H.useCallback(g=>t[g]||null,[t]),d=H.useCallback(()=>{e({}),s(null)},[]);return H.useEffect(()=>{n!=null&&n.uid?l():d()},[n==null?void 0:n.uid,l,d]),{tagStats:t,loading:r,error:a,fetchTagStats:l,getSortedTagStats:c,getTagStat:f,clearStats:d}};function to(n){var t,e;if(n==null)return"";try{return(((e=(t=String(n)).normalize)==null?void 0:e.call(t,"NFKC"))??String(n)).trim().replace(/\s+/g," ").toLowerCase()}catch{return String(n).trim().toLowerCase()}}function eF(){const{user:n}=Pn(),t=H.useContext(Tr),e=(t==null?void 0:t.setGlobalError)||(()=>{}),[r,i]=H.useState(!1),a=async(d,g)=>{for(let v=0;v<d.length;v+=450){const _=d.slice(v,v+450),w=zk(he);_.forEach(b=>g(w,b)),await w.commit()}},s=H.useCallback(async(d,g)=>{if(!(n!=null&&n.uid))throw new Error("ユーザーが未認証です。");const m=to(d),v=to(g);if(!m||!v)throw new Error("タグ名が不正です。");if(m===v)return{booksUpdated:0,memosUpdated:0};i(!0);try{const _=sn(br(he,"books"),ze("userId","==",n.uid)),w=await mn(_),b=[];w.forEach(M=>{const N=M.data(),k=Array.isArray(N.tags)?N.tags:[];if(k.includes(m)){const O=Array.from(new Set(k.map(R=>R===m?v:R)));b.push({ref:M.ref,tags:O})}});const S=sn(uo(he,"memos"),ze("userId","==",n.uid)),C=await mn(S),I=[];return C.forEach(M=>{const N=M.data(),k=Array.isArray(N.tags)?N.tags:[];if(k.includes(m)){const O=Array.from(new Set(k.map(R=>R===m?v:R)));I.push({ref:M.ref,tags:O})}}),await a(b,(M,N)=>{M.update(N.ref,{tags:N.tags})}),await a(I,(M,N)=>{M.update(N.ref,{tags:N.tags})}),{booksUpdated:b.length,memosUpdated:I.length}}catch(_){throw console.error("タグ名変更に失敗:",_),e("タグ名の変更に失敗しました。"),_}finally{i(!1)}},[n==null?void 0:n.uid]),l=H.useCallback(async d=>{if(!(n!=null&&n.uid))throw new Error("ユーザーが未認証です。");const g=to(d);if(!g)throw new Error("タグ名が不正です。");i(!0);try{const m=sn(br(he,"books"),ze("userId","==",n.uid)),v=await mn(m),_=[];v.forEach(C=>{const I=C.data(),M=Array.isArray(I.tags)?I.tags:[];if(M.includes(g)){const N=M.filter(k=>k!==g);_.push({ref:C.ref,tags:N})}});const w=sn(uo(he,"memos"),ze("userId","==",n.uid)),b=await mn(w),S=[];return b.forEach(C=>{const I=C.data(),M=Array.isArray(I.tags)?I.tags:[];if(M.includes(g)){const N=M.filter(k=>k!==g);S.push({ref:C.ref,tags:N})}}),await a(_,(C,I)=>{C.update(I.ref,{tags:I.tags})}),await a(S,(C,I)=>{C.update(I.ref,{tags:I.tags})}),{booksUpdated:_.length,memosUpdated:S.length}}catch(m){throw console.error("タグ削除に失敗:",m),e("タグの削除に失敗しました。"),m}finally{i(!1)}},[n==null?void 0:n.uid]),c=H.useCallback(async d=>{if(!(n!=null&&n.uid))throw new Error("ユーザーが未認証です。");const g=new Set((Array.isArray(d)?d:String(d||"").split(",")).map(m=>to(m)).filter(m=>!!m));if(g.size===0)throw new Error("削除対象のタグがありません。");i(!0);try{const m=sn(br(he,"books"),ze("userId","==",n.uid)),v=await mn(m),_=[];v.forEach(C=>{const I=C.data(),M=Array.isArray(I.tags)?I.tags:[],N=M.filter(k=>!g.has(to(k)));N.length!==M.length&&_.push({ref:C.ref,tags:N})});const w=sn(uo(he,"memos"),ze("userId","==",n.uid)),b=await mn(w),S=[];return b.forEach(C=>{const I=C.data(),M=Array.isArray(I.tags)?I.tags:[],N=M.filter(k=>!g.has(to(k)));N.length!==M.length&&S.push({ref:C.ref,tags:N})}),await a(_,(C,I)=>{C.update(I.ref,{tags:I.tags})}),await a(S,(C,I)=>{C.update(I.ref,{tags:I.tags})}),{booksUpdated:_.length,memosUpdated:S.length}}catch(m){throw console.error("タグ一括削除に失敗:",m),e("タグの一括削除に失敗しました。"),m}finally{i(!1)}},[n==null?void 0:n.uid]),f=H.useCallback(async(d,g)=>{if(!(n!=null&&n.uid))throw new Error("ユーザーが未認証です。");const m=to(g),v=Array.from(new Set(String(d||"").split(",").map(_=>to(_)).filter(_=>!!_)));if(!m||v.length===0)throw new Error("統合先と別名を入力してください。");if(v.includes(m))throw new Error("統合先と別名が同一です。");i(!0);try{const _=sn(br(he,"books"),ze("userId","==",n.uid)),w=await mn(_),b=[];w.forEach(M=>{const N=M.data(),k=Array.isArray(N.tags)?N.tags:[];if(k.some(R=>v.includes(R))){const R=k.filter(L=>!v.includes(L)),D=Array.from(new Set([...R,m]));D.join("|")!==k.join("|")&&b.push({ref:M.ref,tags:D})}});const S=sn(uo(he,"memos"),ze("userId","==",n.uid)),C=await mn(S),I=[];return C.forEach(M=>{const N=M.data(),k=Array.isArray(N.tags)?N.tags:[];if(k.some(R=>v.includes(R))){const R=k.filter(L=>!v.includes(L)),D=Array.from(new Set([...R,m]));D.join("|")!==k.join("|")&&I.push({ref:M.ref,tags:D})}}),await a(b,(M,N)=>{M.update(N.ref,{tags:N.tags})}),await a(I,(M,N)=>{M.update(N.ref,{tags:N.tags})}),{booksUpdated:b.length,memosUpdated:I.length}}catch(_){throw console.error("タグ統合に失敗:",_),e("タグの統合に失敗しました。"),_}finally{i(!1)}},[n==null?void 0:n.uid]);return{loading:r,renameTag:s,deleteTag:l,deleteTags:c,mergeTags:f}}function nF({open:n,tag:t,onClose:e,onRename:r,onDelete:i,onMerge:a,busy:s=!1}){const[l,c]=H.useState(t||""),[f,d]=H.useState(""),[g,m]=H.useState(""),v=()=>{c(t||""),e==null||e()};return A.jsxs(ma,{open:n,onClose:v,maxWidth:"xs",fullWidth:!0,children:[A.jsx(va,{children:"タグを編集"}),A.jsxs(ya,{children:[A.jsx(st,{variant:"body2",color:"text.secondary",sx:{mb:1},children:"タグ名の変更またはタグの削除を行えます。"}),A.jsx(oe,{autoFocus:!0,fullWidth:!0,label:"新しいタグ名",value:l,onChange:_=>c(_.target.value),disabled:s}),A.jsxs(ot,{sx:{mt:2},children:[A.jsx(st,{variant:"body2",color:"text.secondary",sx:{mb:1},children:"類似タグの統合（カンマ区切りで別名を指定）"}),A.jsx(oe,{fullWidth:!0,label:"統合先（正規化タグ名）",value:f,onChange:_=>d(_.target.value),disabled:s}),A.jsx(oe,{fullWidth:!0,label:"別名（カンマ区切り）",value:g,onChange:_=>m(_.target.value),disabled:s,sx:{mt:1}})]})]}),A.jsxs(xa,{children:[A.jsx(qt,{onClick:()=>i==null?void 0:i(t),color:"error",disabled:s,"data-testid":"tag-delete-button",children:"削除"}),A.jsx(qt,{onClick:v,disabled:s,children:"キャンセル"}),A.jsx(qt,{onClick:()=>r==null?void 0:r(t,l),variant:"contained",disabled:s,"data-testid":"tag-rename-button",children:"変更"}),A.jsx(qt,{onClick:()=>a==null?void 0:a(g,f),variant:"outlined",disabled:s,"data-testid":"tag-merge-button",children:"統合"})]})]})}function rF({open:n,onClose:t,onConfirm:e,busy:r=!1}){const{user:i}=Pn(),{tagOptions:a,fetchTagHistory:s}=cs("book",i),{tagOptions:l,fetchTagHistory:c}=cs("memo",i),[f,d]=H.useState([]),[g,m]=H.useState("");H.useEffect(()=>{n&&i&&(s(),c())},[n,i,s,c]),H.useEffect(()=>{n||(d([]),m(""))},[n]);const v=H.useMemo(()=>{const _=new Set([...a||[],...l||[]]);return Array.from(_).sort((w,b)=>w.localeCompare(b,"ja"))},[a,l]);return A.jsxs(ma,{open:n,onClose:t,maxWidth:"sm",fullWidth:!0,children:[A.jsx(va,{children:"タグを一括削除"}),A.jsxs(ya,{children:[A.jsx(st,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"削除するタグを選択または入力してください。複数選択できます。"}),A.jsx(is,{multiple:!0,freeSolo:!0,options:v,value:f,inputValue:g,onInputChange:(_,w)=>m(w),onChange:(_,w)=>d(w),renderTags:(_,w)=>_.map((b,S)=>{const{key:C,...I}=w({index:S});return A.jsx(Dn,{label:b,...I,color:"error",variant:"outlined"},C)}),renderInput:_=>A.jsx(oe,{..._,label:"削除タグ",placeholder:"タグ名を入力...",fullWidth:!0,"data-testid":"bulk-delete-tags-input"}),"data-testid":"bulk-delete-tags-autocomplete"}),!!f.length&&A.jsx(ot,{sx:{mt:1},children:A.jsxs(st,{variant:"caption",color:"text.secondary",children:["削除対象: ",f.join(", ")]})})]}),A.jsxs(xa,{children:[A.jsx(qt,{onClick:t,disabled:r,children:"キャンセル"}),A.jsx(qt,{onClick:()=>e==null?void 0:e(f),color:"error",variant:"contained",disabled:r||f.length===0,"data-testid":"bulk-delete-confirm",children:"削除"})]})]})}function iF({open:n,onClose:t,onConfirm:e,busy:r=!1}){const{user:i}=Pn(),{tagOptions:a,fetchTagHistory:s}=cs("book",i),{tagOptions:l,fetchTagHistory:c}=cs("memo",i),[f,d]=H.useState(""),[g,m]=H.useState([]),[v,_]=H.useState("");H.useEffect(()=>{n&&i&&(s(),c())},[n,i,s,c]),H.useEffect(()=>{n||(d(""),m([]),_(""))},[n]);const w=H.useMemo(()=>{const S=new Set([...a||[],...l||[]]);return Array.from(S).sort((C,I)=>C.localeCompare(I,"ja"))},[a,l]),b=f.trim().length>0&&g.length>0;return A.jsxs(ma,{open:n,onClose:t,maxWidth:"sm",fullWidth:!0,children:[A.jsx(va,{children:"タグを一括統合"}),A.jsxs(ya,{children:[A.jsx(st,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"複数の別名タグを正規タグへ統合します。正規タグと、統合したい別名タグを選択してください。"}),A.jsxs(ot,{sx:{mb:2},children:[A.jsx(st,{variant:"subtitle2",sx:{mb:1},children:"正規タグ"}),A.jsx(is,{freeSolo:!0,options:w,value:f,inputValue:v,onInputChange:(S,C)=>_(C),onChange:(S,C)=>d(C||v),renderInput:S=>A.jsx(oe,{...S,label:"正規タグ",placeholder:"統合先のタグ名",fullWidth:!0}),"data-testid":"bulk-merge-canonical"})]}),A.jsxs(ot,{children:[A.jsx(st,{variant:"subtitle2",sx:{mb:1},children:"別名タグ（複数可）"}),A.jsx(is,{multiple:!0,freeSolo:!0,options:w,value:g,onChange:(S,C)=>m(C),renderTags:(S,C)=>S.map((I,M)=>{const{key:N,...k}=C({index:M});return A.jsx(Dn,{label:I,...k,color:"primary",variant:"outlined"},N)}),renderInput:S=>A.jsx(oe,{...S,label:"別名タグ",placeholder:"統合したい別名を入力...",fullWidth:!0}),"data-testid":"bulk-merge-aliases"})]})]}),A.jsxs(xa,{children:[A.jsx(qt,{onClick:t,disabled:r,children:"キャンセル"}),A.jsx(qt,{onClick:()=>e==null?void 0:e(g,f||v),variant:"contained",disabled:r||!b,"data-testid":"bulk-merge-confirm",children:"統合"})]})]})}function aF({onTagClick:n}){const{user:t}=Pn(),{tagStats:e,loading:r,error:i,getSortedTagStats:a,fetchTagStats:s}=tF(t),{loading:l,renameTag:c,deleteTag:f,deleteTags:d,mergeTags:g}=eF(),[m,v]=H.useState("count"),[_,w]=H.useState("desc"),[b,S]=H.useState(!1),[C,I]=H.useState(""),[M,N]=H.useState(!1),[k,O]=H.useState(!1),R=a(m,_),D=Object.keys(e).length,L=Object.values(e).reduce((U,B)=>U+B.bookCount,0),F=Object.values(e).reduce((U,B)=>U+B.memoCount,0);return r?A.jsx(ot,{sx:{display:"flex",justifyContent:"center",p:3},children:A.jsx(xx,{})}):i?A.jsx(ot,{sx:{p:2},children:A.jsxs(co,{severity:"error",children:["タグ統計の取得に失敗しました: ",i.message]})}):D===0?A.jsx(ot,{sx:{p:3},children:A.jsx(co,{severity:"info",children:"タグがまだ登録されていません。本にタグを追加すると、ここに統計が表示されます。"})}):A.jsxs(ot,{children:[A.jsxs(Ic,{sx:{p:2,mb:3},children:[A.jsx(st,{variant:"h6",gutterBottom:!0,children:"タグ統計サマリー"}),A.jsxs(ot,{sx:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:2},children:[A.jsxs(ot,{sx:{textAlign:"center"},children:[A.jsx(st,{variant:"h4",color:"primary",children:D}),A.jsx(st,{variant:"body2",color:"text.secondary",children:"総タグ数"})]}),A.jsxs(ot,{sx:{textAlign:"center"},children:[A.jsx(st,{variant:"h4",color:"secondary",children:L}),A.jsx(st,{variant:"body2",color:"text.secondary",children:"本の総件数"})]}),A.jsxs(ot,{sx:{textAlign:"center"},children:[A.jsx(st,{variant:"h4",color:"info.main",children:F}),A.jsx(st,{variant:"body2",color:"text.secondary",children:"メモの総件数"})]})]})]}),A.jsxs(ot,{sx:{mb:2,display:"flex",gap:2,alignItems:"center",flexWrap:"wrap"},children:[A.jsxs(st,{variant:"h6",children:["タグ一覧 (",D,"件)"]}),A.jsx(Dn,{label:"一括削除",size:"small",color:"error",variant:"outlined",onClick:()=>N(!0),"data-testid":"open-bulk-delete"}),A.jsx(Dn,{label:"一括統合",size:"small",color:"primary",variant:"outlined",onClick:()=>O(!0),"data-testid":"open-bulk-merge"}),A.jsxs(Ku,{size:"small",sx:{minWidth:120},children:[A.jsx(Zu,{children:"ソート基準"}),A.jsxs(Qu,{value:m,label:"ソート基準",onChange:U=>v(U.target.value),children:[A.jsx(cr,{value:"count",children:"使用頻度"}),A.jsx(cr,{value:"name",children:"名前順"}),A.jsx(cr,{value:"lastUsed",children:"最終使用日"})]})]}),A.jsxs(Ku,{size:"small",sx:{minWidth:100},children:[A.jsx(Zu,{children:"順序"}),A.jsxs(Qu,{value:_,label:"順序",onChange:U=>w(U.target.value),children:[A.jsx(cr,{value:"desc",children:"降順"}),A.jsx(cr,{value:"asc",children:"昇順"})]})]})]}),A.jsx(ot,{className:"tag-stats-grid",children:R.map(U=>A.jsx(gn,{"data-testid":`tag-stat-card-${U.tag}`,onClick:()=>n==null?void 0:n(U.tag),className:"tag-stat-card",children:A.jsxs(pn,{children:[A.jsxs(ot,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",mb:1},children:[A.jsx(st,{variant:"h6",component:"div",sx:{wordBreak:"break-all"},children:U.tag}),A.jsx(Dn,{label:U.type,size:"small",color:U.type==="both"?"primary":U.type==="book"?"secondary":"info",variant:"outlined"})]}),A.jsxs(ot,{sx:{display:"flex",justifyContent:"space-between",mb:1},children:[A.jsxs(st,{variant:"body2",color:"text.secondary",children:["本: ",U.bookCount,"件"]}),A.jsxs(st,{variant:"body2",color:"text.secondary",children:["メモ: ",U.memoCount,"件"]})]}),A.jsxs(ot,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[A.jsxs(st,{variant:"body2",color:"primary",sx:{fontWeight:"bold"},children:["合計: ",U.totalCount,"件"]}),A.jsx(ot,{sx:{display:"flex",gap:1},children:A.jsx(Dn,{size:"small",label:"編集",onClick:B=>{B.stopPropagation(),I(U.tag),S(!0)},clickable:!0,color:"primary",variant:"outlined","data-testid":`tag-edit-${U.tag}`})})]}),U.lastUsed&&A.jsxs(st,{variant:"caption",color:"text.secondary",sx:{display:"block",mt:1},children:["最終使用: ",U.lastUsed.toLocaleDateString("ja-JP")]})]})},U.tag))}),A.jsx(nF,{open:b,tag:C,busy:l,onClose:()=>S(!1),onRename:async(U,B)=>{await c(U,B),await s(),S(!1)},onDelete:async U=>{await f(U),await s(),S(!1)},onMerge:async(U,B)=>{await g(U,B),await s(),S(!1)}}),A.jsx(rF,{open:M,onClose:()=>N(!1),busy:l,onConfirm:async U=>{!U||U.length===0||(await d(U),await s(),N(!1))}}),A.jsx(iF,{open:k,onClose:()=>O(!1),busy:l,onConfirm:async(U,B)=>{!U||U.length===0||!B||(await g(U.join(","),B),await s(),O(!1))}})]})}function sF({value:n,onChange:t}){const[e,r]=H.useState((n==null?void 0:n.type)||"none"),[i,a]=H.useState((n==null?void 0:n.year)||new Date().getFullYear()),[s,l]=H.useState((n==null?void 0:n.month)||1),[c,f]=H.useState((n==null?void 0:n.quarter)||1),[d,g]=H.useState((n==null?void 0:n.startDate)||""),[m,v]=H.useState((n==null?void 0:n.endDate)||""),_=M=>{const N=M.target.value;r(N);let k={type:N};switch(N){case"year":k.year=i;break;case"month":k.year=i,k.month=s;break;case"quarter":k.year=i,k.quarter=c;break;case"custom":k.startDate=d,k.endDate=m;break}t==null||t(k)},w=M=>{const N=M.target.value;a(N),t==null||t({...n,year:N})},b=M=>{const N=M.target.value;l(N),t==null||t({...n,month:N})},S=M=>{const N=M.target.value;f(N),t==null||t({...n,quarter:N})},C=M=>{const N=M.target.value;g(N),t==null||t({...n,startDate:N})},I=M=>{const N=M.target.value;v(N),t==null||t({...n,endDate:N})};return A.jsxs(ot,{children:[A.jsx(st,{variant:"subtitle2",gutterBottom:!0,children:"読了日時"}),A.jsxs(Ic,{sx:{p:2},children:[A.jsxs(Ku,{fullWidth:!0,margin:"normal",children:[A.jsx(Zu,{children:"日時範囲"}),A.jsxs(Qu,{value:e,onChange:_,label:"日時範囲","data-testid":"date-range-type-select",children:[A.jsx(cr,{value:"none",children:"指定なし"}),A.jsx(cr,{value:"year",children:"年別"}),A.jsx(cr,{value:"month",children:"年月別"}),A.jsx(cr,{value:"quarter",children:"四半期別"}),A.jsx(cr,{value:"custom",children:"カスタム期間"})]})]}),(e==="year"||e==="month"||e==="quarter")&&A.jsxs(Ku,{fullWidth:!0,margin:"normal",children:[A.jsx(Zu,{children:"年"}),A.jsx(Qu,{value:i,onChange:w,label:"年","data-testid":"year-select",children:Array.from({length:10},(M,N)=>new Date().getFullYear()-N).map(M=>A.jsxs(cr,{value:M,children:[M,"年"]},M))})]}),e==="month"&&A.jsxs(Ku,{fullWidth:!0,margin:"normal",children:[A.jsx(Zu,{children:"月"}),A.jsx(Qu,{value:s,onChange:b,label:"月","data-testid":"month-select",children:Array.from({length:12},(M,N)=>N+1).map(M=>A.jsxs(cr,{value:M,children:[M,"月"]},M))})]}),e==="quarter"&&A.jsxs(Ku,{fullWidth:!0,margin:"normal",children:[A.jsx(Zu,{children:"四半期"}),A.jsxs(Qu,{value:c,onChange:S,label:"四半期","data-testid":"quarter-select",children:[A.jsx(cr,{value:1,children:"第1四半期（1-3月）"}),A.jsx(cr,{value:2,children:"第2四半期（4-6月）"}),A.jsx(cr,{value:3,children:"第3四半期（7-9月）"}),A.jsx(cr,{value:4,children:"第4四半期（10-12月）"})]})]}),e==="custom"&&A.jsxs(ot,{sx:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:2,mt:1},"data-testid":"custom-date-range-grid",children:[A.jsx(ot,{"data-testid":"start-date-grid-item",children:A.jsx(oe,{label:"開始日",type:"date",value:d,onChange:C,fullWidth:!0,InputLabelProps:{shrink:!0},inputProps:{"data-testid":"start-date-input"}})}),A.jsx(ot,{"data-testid":"end-date-grid-item",children:A.jsx(oe,{label:"終了日",type:"date",value:m,onChange:I,fullWidth:!0,InputLabelProps:{shrink:!0},inputProps:{"data-testid":"end-date-input"}})})]}),e!=="none"&&A.jsxs(st,{variant:"body2",color:"text.secondary",sx:{mt:1},children:[e==="year"&&`${i}年に読了した本を検索します`,e==="month"&&`${i}年${s}月に読了した本を検索します`,e==="quarter"&&`${i}年第${c}四半期に読了した本を検索します`,e==="custom"&&"指定した期間に読了した本を検索します"]})]})]})}function oF({selectedTags:n=[],onTagsChange:t,type:e="book"}){const{user:r}=Pn(),{tagOptions:i,loading:a,fetchTagHistory:s}=cs(e,r),[l,c]=H.useState("");H.useEffect(()=>{r&&s()},[r,s]);const f=(m,v)=>{if(v&&!n.includes(v)){const _=[...n,v];t==null||t(_),c("")}},d=m=>{const v=n.filter(_=>_!==m);t==null||t(v)},g=(m,v)=>{c(v)};return A.jsxs(ot,{children:[A.jsx(st,{variant:"subtitle2",gutterBottom:!0,children:"タグ検索"}),A.jsxs(Ic,{sx:{p:2},children:[A.jsx(is,{freeSolo:!0,multiple:!0,options:i||[],value:n,inputValue:l,onInputChange:g,onChange:f,renderTags:(m,v)=>m.map((_,w)=>{const{key:b,...S}=v({index:w});return A.jsx(Dn,{label:_,...S,onDelete:()=>d(_),color:"primary",variant:"outlined","data-testid":`selected-tag-${_}`},b)}),renderInput:m=>A.jsx(oe,{...m,label:"タグを選択または入力",placeholder:"タグを入力...",fullWidth:!0,"data-testid":"tag-search-input"}),loading:a,noOptionsText:"タグが見つかりません","data-testid":"tag-autocomplete"}),A.jsx(st,{variant:"body2",color:"text.secondary",sx:{mt:1},children:n.length>0?`選択されたタグ: ${n.join(", ")}`:"タグを選択すると、そのタグを持つ本やメモを検索できます"})]})]})}function lF({searchConditions:n,onSearchConditionsChange:t,onSearch:e}){const[r,i]=H.useState("all"),a=d=>{t==null||t({...n,text:d.target.value})},s=(d,g)=>{i(g),t==null||t({...n,status:g})},l=d=>{t==null||t({...n,dateRange:d})},c=d=>{t==null||t({...n,selectedTags:d})},f=()=>{e==null||e(n)};return A.jsxs(ot,{children:[A.jsx(st,{variant:"h6",gutterBottom:!0,children:"検索条件"}),A.jsxs(Ic,{sx:{p:2,mb:2},children:[A.jsx(oe,{label:"テキスト検索（タイトル・著者・メモ内容・タグ）",value:(n==null?void 0:n.text)||"",onChange:a,fullWidth:!0,margin:"normal",placeholder:"検索したいキーワードを入力","data-testid":"text-search-field"}),A.jsxs(ot,{sx:{mt:2},children:[A.jsx(st,{variant:"subtitle2",gutterBottom:!0,children:"ステータス"}),A.jsx(ot,{sx:{display:"flex",gap:1,flexWrap:"wrap"},children:["all","reading","finished","wish"].map(d=>A.jsxs(qt,{variant:r===d?"contained":"outlined",size:"small",onClick:()=>s(null,d),"data-testid":`status-filter-${d}`,children:[d==="all"&&"全て",d==="reading"&&"読書中",d==="finished"&&"読了",d==="wish"&&"読みたい"]},d))})]}),A.jsx(ot,{sx:{mt:2},children:A.jsx(sF,{dateRange:(n==null?void 0:n.dateRange)||{type:"none"},onDateRangeChange:l})}),A.jsx(ot,{sx:{mt:2},children:A.jsx(oF,{selectedTags:(n==null?void 0:n.selectedTags)||[],onTagsChange:c,type:"book"})})]}),A.jsx(ot,{sx:{display:"flex",justifyContent:"center"},children:A.jsx(qt,{variant:"contained",onClick:f,"data-testid":"search-button",children:"検索実行"})})]})}function uF({results:n=[],loading:t=!1,searchQuery:e="",onResultClick:r}){const{user:i}=Pn();if(t)return A.jsx(ot,{sx:{display:"flex",justifyContent:"center",p:4},children:A.jsx(xx,{})});if(!n||n.length===0)return A.jsx(ot,{sx:{p:3},children:A.jsx(co,{severity:"info",children:e?`「${e}」に一致する結果が見つかりませんでした。`:"検索条件を設定して検索を実行してください。"})});const a=n.filter(f=>f.type==="book"),s=n.filter(f=>f.type==="memo"),l=f=>A.jsx(gn,{sx:{cursor:"pointer","&:hover":{boxShadow:3},height:"100%",display:"flex",flexDirection:"column",border:"2px solid",borderColor:"purple.300",backgroundColor:"purple.50"},onClick:()=>r==null?void 0:r("memo",f.bookId,f.id),"data-testid":`memo-result-${f.id}`,children:A.jsxs(pn,{sx:{flexGrow:1,display:"flex",flexDirection:"column"},children:[A.jsx(ot,{sx:{mb:2},children:A.jsxs(st,{variant:"h6",component:"h3",gutterBottom:!0,sx:{fontWeight:"bold",display:"flex",alignItems:"center",gap:1},children:[A.jsx("span",{children:"📝"}),A.jsxs("span",{children:[f.bookTitle||"メモ"," - ページ",f.page||"未設定"]})]})}),f.text&&A.jsx(ot,{sx:{mb:2,flexGrow:1},children:A.jsx(st,{variant:"body2",sx:{backgroundColor:"grey.50",p:1,borderRadius:1,border:"1px solid",borderColor:"grey.200",fontStyle:"italic"},children:f.text.length>120?`${f.text.substring(0,120)}...`:f.text})}),f.comment&&A.jsx(ot,{sx:{mb:2},children:A.jsxs(st,{variant:"body2",sx:{backgroundColor:"primary.50",p:1,borderRadius:1,border:"1px solid",borderColor:"primary.200"},children:["💭 ",f.comment.length>100?`${f.comment.substring(0,100)}...`:f.comment]})}),f.tags&&f.tags.length>0&&A.jsx(ot,{sx:{mb:2},children:A.jsx(ot,{sx:{display:"flex",gap:.5,flexWrap:"wrap"},children:f.tags.map((d,g)=>A.jsx(Dn,{label:d,size:"small",variant:"outlined",sx:{fontSize:"0.75rem"}},g))})}),A.jsx(ot,{sx:{mt:"auto"},children:A.jsxs(st,{variant:"caption",color:"text.secondary",children:["作成日: ",f.createdAt?new Date(f.createdAt.toDate()).toLocaleDateString("ja-JP"):"不明"]})})]})},f.id),c=f=>A.jsx(gn,{sx:{cursor:"pointer","&:hover":{boxShadow:3},height:"100%",display:"flex",flexDirection:"column",border:"2px solid",borderColor:"blue.300",backgroundColor:"blue.50"},onClick:()=>r==null?void 0:r("book",f.id),"data-testid":`book-result-${f.id}`,children:A.jsxs(pn,{sx:{flexGrow:1,display:"flex",flexDirection:"column"},children:[A.jsx(ot,{sx:{mb:2},children:A.jsxs(st,{variant:"h6",component:"h3",gutterBottom:!0,sx:{fontWeight:"bold",display:"flex",alignItems:"center",gap:1},children:[A.jsx("span",{children:"📚"}),A.jsx("span",{children:f.title})]})}),A.jsxs(ot,{sx:{mb:2},children:[A.jsx(st,{variant:"body2",color:"text.secondary",sx:{mb:1},children:f.author||"著者不明"}),A.jsx(Dn,{label:f.status==="reading"?"読書中":f.status==="finished"?"読了":f.status==="wish"?"読みたい":"未設定",size:"small",color:f.status==="reading"?"primary":f.status==="finished"?"success":f.status==="wish"?"warning":"default",sx:{fontSize:"0.75rem"}})]}),f.tags&&f.tags.length>0&&A.jsx(ot,{sx:{mb:2},children:A.jsx(ot,{sx:{display:"flex",gap:.5,flexWrap:"wrap"},children:f.tags.map((d,g)=>A.jsx(Dn,{label:d,size:"small",variant:"outlined",sx:{fontSize:"0.75rem"}},g))})}),A.jsx(ot,{sx:{mt:"auto"},children:A.jsxs(st,{variant:"caption",color:"text.secondary",children:["更新日: ",f.updatedAt?new Date(f.updatedAt.toDate()).toLocaleDateString("ja-JP"):"不明"]})})]})},f.id);return A.jsxs(ot,{children:[A.jsxs(ot,{sx:{mb:3},children:[A.jsxs(st,{variant:"h6",gutterBottom:!0,children:["検索結果 (",n.length,"件)"]}),A.jsxs(st,{variant:"body2",color:"text.secondary",children:["📚 書籍: ",a.length,"件, 📝 メモ: ",s.length,"件"]})]}),A.jsx(ot,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",sm:"1fr 1fr",md:"repeat(3, 1fr)"},gap:2},children:n.map(f=>A.jsx(ot,{children:f.type==="book"?c(f):l(f)},`${f.type}-${f.id}`))})]})}function cF(n={}){const{user:t}=Pn(),[e,r]=H.useState([]),[i,a]=H.useState(!1),[s,l]=H.useState(null),{limit:c=50}=n,f=H.useCallback(b=>{if(!t)return[];const{text:S,status:C,dateRange:I,selectedTags:M}=b,N=[],k=[ze("userId","==",t.uid)];if(C&&C!=="all"&&k.push(ze("status","==",C)),I&&I.type!=="none"){const{startDate:L,endDate:F}=d(I);L&&k.push(ze("updatedAt",">=",L)),F&&k.push(ze("updatedAt","<=",F))}M&&M.length>0&&(console.log("タグフィルター適用:",M),console.log("タグフィルターの型:",typeof M,Array.isArray(M)),console.log("タグフィルターの内容:",JSON.stringify(M)),!Array.isArray(M)||M.some(L=>Array.isArray(L))?console.log("ネストした配列または無効なタグ形式を検出、クライアントサイドフィルタリングのみ使用"):k.push(ze("tags","array-contains-any",M)));const O=sn(br(he,"books"),...k,Fh("updatedAt","desc"),Q0(c));N.push({type:"book",query:O});const R=[ze("userId","==",t.uid)],D=sn(uo(he,"memos"),...R,Q0(c*3));return N.push({type:"memo",query:D}),N},[t,c]),d=H.useCallback(b=>{const S=new Date;let C=null,I=null;switch(b.type){case"year":b.year&&(C=new Date(b.year,0,1),I=new Date(b.year,11,31,23,59,59));break;case"month":b.year&&b.month&&(C=new Date(b.year,b.month-1,1),I=new Date(b.year,b.month,0,23,59,59));break;case"quarter":if(b.year&&b.quarter){const M=(b.quarter-1)*3;C=new Date(b.year,M,1),I=new Date(b.year,M+3,0,23,59,59)}break;case"custom":b.startDate&&(C=new Date(b.startDate)),b.endDate&&(I=new Date(b.endDate),I.setHours(23,59,59));break;case"recent":b.months&&(C=new Date(S.getFullYear(),S.getMonth()-b.months,S.getDate()),I=S);break}return{startDate:C,endDate:I}},[]),g=H.useCallback((b,S)=>{if(!S)return b;const C=S.toLowerCase();return b.filter(I=>I.type==="book"?I.title&&I.title.toLowerCase().includes(C)||I.author&&I.author.toLowerCase().includes(C)||I.tags&&I.tags.some(M=>M.toLowerCase().includes(C)):I.type==="memo"?I.text&&I.text.toLowerCase().includes(C)||I.comment&&I.comment.toLowerCase().includes(C)||I.tags&&I.tags.some(M=>M.toLowerCase().includes(C)):!1)},[]),m=H.useCallback((b,S)=>{if(!S||S.length===0)return b;const C=M=>{if(!Array.isArray(M))return[];const N=[],k=O=>{Array.isArray(O)?O.forEach(k):typeof O=="string"&&O.trim()&&N.push(O.toLowerCase().trim())};return M.forEach(k),N},I=C(S);return console.log("正規化された選択タグ:",I),b.filter(M=>{if(!M.tags||!Array.isArray(M.tags))return!1;const N=C(M.tags);console.log(`アイテム ${M.id} のタグ:`,N);const k=N.some(O=>I.includes(O));return console.log(`アイテム ${M.id} のマッチ結果:`,k),k})},[]),v=H.useCallback((b,S)=>{if(!S)return b;const C=S.toLowerCase();return b.filter(I=>I.text&&I.text.toLowerCase().includes(C)||I.comment&&I.comment.toLowerCase().includes(C))},[]),_=H.useCallback(async b=>{var S,C,I;if(!t){l("ユーザーが認証されていません");return}a(!0),l(null);try{console.log("検索条件:",b);const M=f(b);console.log("構築されたクエリ:",M);const N=[];for(const{type:O,query:R}of M){console.log(`${O}クエリ実行開始`);try{const D=await mn(R);if(console.log(`${O}クエリ実行成功, 結果数:`,D.size),O==="memo"){console.log("メモクエリの結果を処理中...");for(const L of D.docs){const F=L.data(),U=(S=L.ref.parent.parent)==null?void 0:S.id;console.log("メモデータ:",{id:L.id,bookId:U,tags:F.tags,userId:F.userId,text:((C=F.text)==null?void 0:C.substring(0,50))+"..."});let B="メモ";if(U)try{const rt=await mn(sn(br(he,"books"),ze("__name__","==",U),ze("userId","==",t.uid)));rt.empty||(B=rt.docs[0].data().title||"メモ")}catch(rt){console.warn("親の本の情報取得に失敗:",rt)}N.push({id:L.id,type:O,bookId:U,bookTitle:B,...F})}console.log("メモ処理完了, 追加されたメモ数:",D.size)}else D.forEach(L=>{const F=L.data();N.push({id:L.id,type:O,...F})})}catch(D){if(console.error(`${O}クエリエラー:`,D),D.code==="failed-precondition"||D.message.includes("index")||D.message.includes("array-contains-any"))if(console.log("インデックスエラー検出、クライアントサイドフィルタリングにフォールバック"),O==="memo"){const L=sn(uo(he,"memos"),ze("userId","==",t.uid),Q0(c*2)),F=await mn(L);console.log("メモフォールバッククエリ実行成功, 結果数:",F.size);for(const U of F.docs){const B=U.data(),rt=(I=U.ref.parent.parent)==null?void 0:I.id;let vt="メモ";if(rt)try{const q=await mn(sn(br(he,"books"),ze("__name__","==",rt),ze("userId","==",t.uid)));q.empty||(vt=q.docs[0].data().title||"メモ")}catch(q){console.warn("親の本の情報取得に失敗:",q)}N.push({id:U.id,type:O,bookId:rt,bookTitle:vt,...B})}}else{const L=sn(br(he,"books"),ze("userId","==",t.uid),Fh("updatedAt","desc"),Q0(c*2)),F=await mn(L);console.log("本フォールバッククエリ実行成功, 結果数:",F.size),F.forEach(U=>{const B=U.data();N.push({id:U.id,type:O,...B})})}else throw D}}console.log("全クエリ実行完了, 総結果数:",N.length),console.log("結果の内訳:",{books:N.filter(O=>O.type==="book").length,memos:N.filter(O=>O.type==="memo").length});let k=g(N,b.text);if(b.selectedTags&&b.selectedTags.length>0&&(console.log("クライアントサイドタグフィルタリング実行:",b.selectedTags),k=m(k,b.selectedTags),console.log("タグフィルタリング後の結果数:",k.length)),b.memoContent){const O=k.filter(D=>D.type==="book"),R=v(k.filter(D=>D.type==="memo"),b.memoContent);k=[...O,...R]}k.sort((O,R)=>{const D=b.sortBy||"updatedAt",L=b.sortOrder||"desc";let F=O[D],U=R[D];return(D==="updatedAt"||D==="createdAt")&&(F=F!=null&&F.toDate?F.toDate():new Date(F),U=U!=null&&U.toDate?U.toDate():new Date(U)),typeof F=="string"&&typeof U=="string"&&(F=F.toLowerCase(),U=U.toLowerCase()),L==="asc"?F>U?1:-1:F<U?1:-1}),r(k)}catch(M){console.error("検索エラー:",M),l("検索中にエラーが発生しました")}finally{a(!1)}},[t,f,g,m,v]),w=H.useCallback(()=>{r([]),l(null)},[]);return{results:e,loading:i,error:s,executeSearch:_,clearResults:w}}function fF(){const{user:n}=Pn(),t=Wh(),[e,r]=H.useState(0),[i,a]=H.useState({text:"",status:"all",dateRange:{type:"none"},selectedTags:[],sortBy:"updatedAt",sortOrder:"desc"}),{results:s,loading:l,error:c,executeSearch:f,clearResults:d}=cF(),[g,m]=H.useState(!1),[v,_]=H.useState(null),[w,b]=H.useState(null),S=(R,D)=>{r(D)},C=R=>{a(R)},I=R=>{console.log("検索実行:",R),f(R)},M=(R,D,L)=>{if(R==="book")t(`/book/${D}`);else if(R==="memo"){const F=(s||[]).find(U=>U.type==="memo"&&U.id===L);F?(_(F),b(D),m(!0)):t(`/book/${D}?memo=${L}`)}},N=()=>{m(!1),_(null),b(null)},k=()=>{d(),a({text:"",status:"all",dateRange:{type:"none"},selectedTags:[],sortBy:"updatedAt",sortOrder:"desc"})},O=R=>{console.log("タグがクリックされました:",R);const D={...i,selectedTags:[R],text:""};a(D),r(0),f(D)};return n?A.jsxs(ot,{sx:{maxWidth:1e3,mx:"auto",mb:4,pb:"56px"},children:[A.jsx(Wg,{title:"検索・タグ",subtitle:"高度な検索とタグ管理"}),A.jsxs(ot,{sx:{px:{xs:1.5,sm:2,md:0}},children:[A.jsx(ot,{sx:{borderBottom:1,borderColor:"divider",mb:2,position:"sticky",top:0,zIndex:1100,backgroundColor:"background.paper"},"data-testid":"tag-search-tabs-container",style:{position:"sticky",top:0,zIndex:1100},children:A.jsxs(pC,{value:e,onChange:S,centered:!0,"data-testid":"tag-search-tabs",children:[A.jsx(_h,{label:"高度な検索",id:"tag-search-tab-0","aria-controls":"tag-search-tabpanel-0","data-testid":"search-tab"}),A.jsx(_h,{label:"タグ管理",id:"tag-search-tab-1","aria-controls":"tag-search-tabpanel-1","data-testid":"tag-management-tab"})]})}),A.jsx(WS,{value:e,index:0,"data-testid":"search-tab-panel",children:A.jsx(hF,{searchConditions:i,onSearchConditionsChange:C,onSearch:I,results:s,loading:l,error:c,onResultClick:M,onClearSearch:k})}),A.jsx(WS,{value:e,index:1,"data-testid":"tag-management-tab-panel",children:A.jsx(dF,{onTagClick:O})}),A.jsx(m4,{open:g,memo:v,bookId:w,onClose:N,onUpdate:N,onDelete:N})]})]}):A.jsx(ot,{sx:{maxWidth:600,mx:"auto",mt:4,p:2},children:A.jsx(st,{variant:"h6",color:"error",children:"ログインが必要です"})})}function hF({searchConditions:n,onSearchConditionsChange:t,onSearch:e,results:r,loading:i,error:a,onResultClick:s,onClearSearch:l}){return A.jsxs(ot,{children:[A.jsx(st,{variant:"h5",gutterBottom:!0,children:"高度な検索"}),A.jsx(st,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"タイトル・著者・タグ・メモ内容で絞り込みできます。"}),A.jsx(lF,{searchConditions:n,onSearchConditionsChange:t,onSearch:e}),a&&A.jsx(ot,{sx:{mt:2},children:A.jsx(co,{severity:"error",children:a})}),(r.length>0||i)&&A.jsx(ot,{sx:{mt:4},children:A.jsx(uF,{results:r,loading:i,searchQuery:n.text,onResultClick:s})}),r.length>0&&!i&&A.jsx(ot,{sx:{mt:2,textAlign:"center"},children:A.jsx(st,{variant:"body2",color:"primary",sx:{cursor:"pointer",textDecoration:"underline"},onClick:l,children:"検索結果をクリア"})})]})}function dF({onTagClick:n}){return A.jsxs(ot,{children:[A.jsx(st,{variant:"h5",gutterBottom:!0,children:"タグ管理"}),A.jsx(st,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"統計を確認し、タグクリックで検索できます。"}),A.jsx(aF,{onTagClick:n})]})}function i1(n,t,e=1){if(!t)return;const r=n.get(t)||0;n.set(t,r+e)}function gF(){const{user:n}=Pn(),t=H.useContext(Tr),e=(t==null?void 0:t.setGlobalError)||(()=>{}),[r,i]=H.useState(!0),[a,s]=H.useState(null),[l,c]=H.useState([]),[f,d]=H.useState([]);H.useEffect(()=>{let I=!1;async function M(){if(!n){c([]),d([]),i(!1);return}i(!0),s(null);try{const N=sn(br(he,"books"),ze("userId","==",n.uid)),O=(await mn(N)).docs.map(F=>({id:F.id,...F.data()})),R=sn(uo(he,"memos"),ze("userId","==",n.uid)),L=(await mn(R)).docs.map(F=>({id:F.id,...F.data()}));I||(c(O),d(L))}catch(N){console.error("Failed to load stats:",N),I||(s("統計情報の取得に失敗しました。"),e("統計情報の取得に失敗しました。"))}finally{I||i(!1)}}return M(),()=>{I=!0}},[n]);const g=H.useMemo(()=>{const I=l.length,M=l.filter(k=>(k.status||"reading")==="finished").length,N=l.filter(k=>(k.status||"reading")==="reading").length;return{totalBooks:I,finishedBooks:M,readingBooks:N}},[l]),m=H.useMemo(()=>{const I=l.filter(N=>(N.status||"reading")==="finished").length,M=l.filter(N=>(N.status||"reading")==="reading").length;return{finished:I,reading:M}},[l]),v=H.useMemo(()=>{const I=new Map,M=new Map;for(const O of l){const R=Array.isArray(O.tags)?O.tags:[];for(const D of R)i1(I,String(D).trim())}for(const O of f){const R=Array.isArray(O.tags)?O.tags:[];for(const D of R)i1(M,String(D).trim())}const N=new Set([...I.keys(),...M.keys()]),k=[];for(const O of N){const R=I.get(O)||0,D=M.get(O)||0;k.push({tag:O,bookCount:R,memoCount:D,totalCount:R+D})}return k.sort((O,R)=>R.totalCount-O.totalCount||O.tag.localeCompare(R.tag)),k},[l,f]),_=H.useMemo(()=>{var k;const I=new Date,M=[],N=new Map;for(let O=11;O>=0;O-=1){const R=new Date(I.getFullYear(),I.getMonth()-O,1),D=`${R.getFullYear()}-${String(R.getMonth()+1).padStart(2,"0")}`;N.set(D,M.length),M.push({key:D,year:R.getFullYear(),month:R.getMonth()+1,count:0})}for(const O of l){const R=O.status||"reading",D=O.finishedAt||O.updatedAt||O.createdAt;if(!D||R!=="finished")continue;const L=typeof(D==null?void 0:D.toDate)=="function"?D.toDate():new Date(D);if(Number.isNaN((k=L==null?void 0:L.getTime)==null?void 0:k.call(L)))continue;const F=`${L.getFullYear()}-${String(L.getMonth()+1).padStart(2,"0")}`;if(!N.has(F))continue;const U=N.get(F);M[U].count+=1}return M},[l]),w=H.useMemo(()=>{var k;const I=new Date,M=[],N=new Map;for(let O=11;O>=0;O-=1){const R=new Date(I.getFullYear(),I.getMonth()-O,1),D=`${R.getFullYear()}-${String(R.getMonth()+1).padStart(2,"0")}`;N.set(D,M.length),M.push({key:D,year:R.getFullYear(),month:R.getMonth()+1,count:0})}for(const O of l){const R=O.createdAt||O.updatedAt||O.finishedAt;if(!R)continue;const D=typeof(R==null?void 0:R.toDate)=="function"?R.toDate():new Date(R);if(Number.isNaN((k=D==null?void 0:D.getTime)==null?void 0:k.call(D)))continue;const L=`${D.getFullYear()}-${String(D.getMonth()+1).padStart(2,"0")}`;if(!N.has(L))continue;const F=N.get(L);M[F].count+=1}return M},[l]),b=H.useMemo(()=>{var k;const I=new Date,M=[],N=new Map;for(let O=11;O>=0;O-=1){const R=new Date(I.getFullYear(),I.getMonth()-O,1),D=`${R.getFullYear()}-${String(R.getMonth()+1).padStart(2,"0")}`;N.set(D,M.length),M.push({key:D,year:R.getFullYear(),month:R.getMonth()+1,count:0})}for(const O of f){const R=O.createdAt||O.updatedAt;if(!R)continue;const D=typeof(R==null?void 0:R.toDate)=="function"?R.toDate():new Date(R);if(Number.isNaN((k=D==null?void 0:D.getTime)==null?void 0:k.call(D)))continue;const L=`${D.getFullYear()}-${String(D.getMonth()+1).padStart(2,"0")}`;if(!N.has(L))continue;const F=N.get(L);M[F].count+=1}return M},[f]),S=H.useMemo(()=>{const I=new Map;for(const N of l){const k=(N.author||"").toString().trim();k&&i1(I,k)}const M=[...I.entries()].map(([N,k])=>({author:N,total:k}));return M.sort((N,k)=>k.total-N.total||N.author.localeCompare(k.author)),M},[l]),C=H.useMemo(()=>{const I=new Map;for(const N of l){const k=(N.publisher||"").toString().trim();k&&i1(I,k)}const M=[...I.entries()].map(([N,k])=>({publisher:N,total:k}));return M.sort((N,k)=>k.total-N.total||N.publisher.localeCompare(k.publisher)),M},[l]);return{loading:r,error:a,summary:g,tagStats:v,monthlyFinished:_,monthlyAddedBooks:w,monthlyMemos:b,topAuthors:S,topPublishers:C,statusDistribution:m}}const C2="DEFAULT_X_AXIS_KEY",I2="DEFAULT_Y_AXIS_KEY",pF={top:20,bottom:20,left:20,right:20},mF=45,vF=25,v4=20;class yF{constructor(t){this.value=void 0,this.listeners=void 0,this.subscribe=e=>(this.listeners.add(e),()=>{this.listeners.delete(e)}),this.getSnapshot=()=>this.value,this.update=e=>{const r=e(this.value);r!==this.value&&(this.value=r,this.listeners.forEach(i=>i(r)))},this.value=t,this.listeners=new Set}}const Zg=({params:n,store:t})=>{H.useEffect(()=>{t.update(r=>W({},r,{animation:W({},r.animation,{skip:n.skipAnimation})}))},[t,n.skipAnimation]);const e=H.useCallback(()=>{let r=!1;return t.update(i=>W({},i,{animation:W({},i.animation,{skipAnimationRequests:i.animation.skipAnimationRequests+1})})),()=>{r||(r=!0,t.update(i=>W({},i,{animation:W({},i.animation,{skipAnimationRequests:i.animation.skipAnimationRequests-1})})))}},[t]);return Vi(()=>{if(typeof window>"u"||!(window!=null&&window.matchMedia))return;let i;const a=l=>{l.matches?i=e():i==null||i()},s=window.matchMedia("(prefers-reduced-motion)");return a(s),s.addEventListener("change",a),()=>{s.removeEventListener("change",a)}},[e,t]),{instance:{disableAnimation:e}}};Zg.params={skipAnimation:!0};Zg.getDefaultizedParams=({params:n})=>W({},n,{skipAnimation:n.skipAnimation??!1});Zg.getInitialState=({skipAnimation:n})=>({animation:{skip:n,skipAnimationRequests:0}});var tg=Symbol("NOT_FOUND");function xF(n,t=`expected a function, instead received ${typeof n}`){if(typeof n!="function")throw new TypeError(t)}function _F(n,t=`expected an object, instead received ${typeof n}`){if(typeof n!="object")throw new TypeError(t)}function AF(n,t="expected all items to be functions, instead received the following types: "){if(!n.every(e=>typeof e=="function")){const e=n.map(r=>typeof r=="function"?`function ${r.name||"unnamed"}()`:typeof r).join(", ");throw new TypeError(`${t}[${e}]`)}}var XS=n=>Array.isArray(n)?n:[n];function wF(n){const t=Array.isArray(n[0])?n[0]:n;return AF(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function EF(n,t){const e=[],{length:r}=n;for(let i=0;i<r;i++)e.push(n[i].apply(null,t));return e}function bF(n){let t;return{get(e){return t&&n(t.key,e)?t.value:tg},put(e,r){t={key:e,value:r}},getEntries(){return t?[t]:[]},clear(){t=void 0}}}function SF(n,t){let e=[];function r(l){const c=e.findIndex(f=>t(l,f.key));if(c>-1){const f=e[c];return c>0&&(e.splice(c,1),e.unshift(f)),f.value}return tg}function i(l,c){r(l)===tg&&(e.unshift({key:l,value:c}),e.length>n&&e.pop())}function a(){return e}function s(){e=[]}return{get:r,put:i,getEntries:a,clear:s}}var TF=(n,t)=>n===t;function CF(n){return function(e,r){if(e===null||r===null||e.length!==r.length)return!1;const{length:i}=e;for(let a=0;a<i;a++)if(!n(e[a],r[a]))return!1;return!0}}function IF(n,t){const e=typeof t=="object"?t:{equalityCheck:t},{equalityCheck:r=TF,maxSize:i=1,resultEqualityCheck:a}=e,s=CF(r);let l=0;const c=i<=1?bF(s):SF(i,s);function f(){let d=c.get(arguments);if(d===tg){if(d=n.apply(null,arguments),l++,a){const m=c.getEntries().find(v=>a(v.value,d));m&&(d=m.value,l!==0&&l--)}c.put(arguments,d)}return d}return f.clearCache=()=>{c.clear(),f.resetResultsCount()},f.resultsCount=()=>l,f.resetResultsCount=()=>{l=0},f}var RF=class{constructor(n){this.value=n}deref(){return this.value}},DF=typeof WeakRef<"u"?WeakRef:RF,OF=0,YS=1;function a1(){return{s:OF,v:void 0,o:null,p:null}}function y4(n,t={}){let e=a1();const{resultEqualityCheck:r}=t;let i,a=0;function s(){var g;let l=e;const{length:c}=arguments;for(let m=0,v=c;m<v;m++){const _=arguments[m];if(typeof _=="function"||typeof _=="object"&&_!==null){let w=l.o;w===null&&(l.o=w=new WeakMap);const b=w.get(_);b===void 0?(l=a1(),w.set(_,l)):l=b}else{let w=l.p;w===null&&(l.p=w=new Map);const b=w.get(_);b===void 0?(l=a1(),w.set(_,l)):l=b}}const f=l;let d;if(l.s===YS)d=l.v;else if(d=n.apply(null,arguments),a++,r){const m=((g=i==null?void 0:i.deref)==null?void 0:g.call(i))??i;m!=null&&r(m,d)&&(d=m,a!==0&&a--),i=typeof d=="object"&&d!==null||typeof d=="function"?new DF(d):d}return f.s=YS,f.v=d,d}return s.clearCache=()=>{e=a1(),s.resetResultsCount()},s.resultsCount=()=>a,s.resetResultsCount=()=>{a=0},s}function x4(n,...t){const e=typeof n=="function"?{memoize:n,memoizeOptions:t}:n,r=(...i)=>{let a=0,s=0,l,c={},f=i.pop();typeof f=="object"&&(c=f,f=i.pop()),xF(f,`createSelector expects an output function after the inputs, but received: [${typeof f}]`);const d={...e,...c},{memoize:g,memoizeOptions:m=[],argsMemoize:v=y4,argsMemoizeOptions:_=[]}=d,w=XS(m),b=XS(_),S=wF(i),C=g(function(){return a++,f.apply(null,arguments)},...w),I=v(function(){s++;const N=EF(S,arguments);return l=C.apply(null,N),l},...b);return Object.assign(I,{resultFunc:f,memoizedResultFunc:C,dependencies:S,dependencyRecomputations:()=>s,resetDependencyRecomputations:()=>{s=0},lastResult:()=>l,recomputations:()=>a,resetRecomputations:()=>{a=0},memoize:g,argsMemoize:v})};return Object.assign(r,{withTypes:()=>r}),r}var MF=x4(y4),NF=Object.assign((n,t=MF)=>{_F(n,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof n}`);const e=Object.keys(n),r=e.map(a=>n[a]);return t(r,(...a)=>a.reduce((s,l,c)=>(s[e[c]]=l,s),{}))},{withTypes:()=>NF});const PF=x4({memoize:IF,memoizeOptions:{maxSize:1,equalityCheck:Object.is}}),KS=new WeakMap,St=(...n)=>(e,...r)=>{const i=e.cacheKey;let a=KS.get(i);a||(a=new Map,KS.set(i,a));const s=a.get(n);if(s)return s(e,...r);const l=PF(...n);return a.set(n,l),l(e,...r)},kF=n=>n.animation,LF=St([kF],n=>n.skip||n.skipAnimationRequests>0);var Fv={exports:{}},Uv={},jv={exports:{}},zv={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ZS;function BF(){if(ZS)return zv;ZS=1;var n=_x();function t(g,m){return g===m&&(g!==0||1/g===1/m)||g!==g&&m!==m}var e=typeof Object.is=="function"?Object.is:t,r=n.useState,i=n.useEffect,a=n.useLayoutEffect,s=n.useDebugValue;function l(g,m){var v=m(),_=r({inst:{value:v,getSnapshot:m}}),w=_[0].inst,b=_[1];return a(function(){w.value=v,w.getSnapshot=m,c(w)&&b({inst:w})},[g,v,m]),i(function(){return c(w)&&b({inst:w}),g(function(){c(w)&&b({inst:w})})},[g]),s(v),v}function c(g){var m=g.getSnapshot;g=g.value;try{var v=m();return!e(g,v)}catch{return!0}}function f(g,m){return m()}var d=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?f:l;return zv.useSyncExternalStore=n.useSyncExternalStore!==void 0?n.useSyncExternalStore:d,zv}var QS;function VF(){return QS||(QS=1,jv.exports=BF()),jv.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var JS;function FF(){if(JS)return Uv;JS=1;var n=_x(),t=VF();function e(f,d){return f===d&&(f!==0||1/f===1/d)||f!==f&&d!==d}var r=typeof Object.is=="function"?Object.is:e,i=t.useSyncExternalStore,a=n.useRef,s=n.useEffect,l=n.useMemo,c=n.useDebugValue;return Uv.useSyncExternalStoreWithSelector=function(f,d,g,m,v){var _=a(null);if(_.current===null){var w={hasValue:!1,value:null};_.current=w}else w=_.current;_=l(function(){function S(k){if(!C){if(C=!0,I=k,k=m(k),v!==void 0&&w.hasValue){var O=w.value;if(v(O,k))return M=O}return M=k}if(O=M,r(I,k))return O;var R=m(k);return v!==void 0&&v(O,R)?(I=k,O):(I=k,M=R)}var C=!1,I,M,N=g===void 0?null:g;return[function(){return S(d())},N===null?void 0:function(){return S(N())}]},[d,g,m,v]);var b=i(f,_[0],_[1]);return s(function(){w.hasValue=!0,w.value=b},[b]),c(b),b},Uv}var tT;function UF(){return tT||(tT=1,Fv.exports=FF()),Fv.exports}var jF=UF();const zF=Object.is,jt=(n,t,e=[],r=zF)=>{const i=a=>t(a,...e);return jF.useSyncExternalStoreWithSelector(n.subscribe,n.getSnapshot,n.getSnapshot,i,r)},jl=n=>{var t;return(t=n.cartesianAxis)==null?void 0:t.x},Bc=n=>{var t;return(t=n.cartesianAxis)==null?void 0:t.y},HF=St([Bc],n=>(n??[]).reduce((t,e)=>{var r;return e.position==="left"?t+(e.width||0)+((r=e.zoom)!=null&&r.slider.enabled?e.zoom.slider.size:0):t},0)),GF=St([Bc],n=>(n??[]).reduce((t,e)=>{var r;return e.position==="right"?t+(e.width||0)+((r=e.zoom)!=null&&r.slider.enabled?e.zoom.slider.size:0):t},0)),$F=St([jl],n=>(n??[]).reduce((t,e)=>{var r;return e.position==="top"?t+(e.height||0)+((r=e.zoom)!=null&&r.slider.enabled?e.zoom.slider.size:0):t},0)),qF=St([jl],n=>(n??[]).reduce((t,e)=>{var r;return e.position==="bottom"?t+(e.height||0)+((r=e.zoom)!=null&&r.slider.enabled?e.zoom.slider.size:0):t},0)),WF=n=>n.dimensions,_4=n=>n.dimensions.width,A4=n=>n.dimensions.height,XF=n=>n.dimensions.margin.top,YF=n=>n.dimensions.margin.right,KF=n=>n.dimensions.margin.bottom,ZF=n=>n.dimensions.margin.left,vs=St([_4,A4,XF,YF,KF,ZF,$F,GF,qF,HF],(n,t,e,r,i,a,s,l,c,f)=>({width:n-a-r-f-l,left:a+f,right:r+l,height:t-e-i-s-c,top:e+s,bottom:i+c})),w4=St([WF],n=>({width:n.propsWidth,height:n.propsHeight})),QF=St([_4,A4],(n,t)=>({width:n,height:t}));function E4(n,t){return typeof n=="number"?{top:n,bottom:n,left:n,right:n}:t?W({},t,n):n}const JF=10,Qg=({params:n,store:t,svgRef:e})=>{const r=n.width!==void 0&&n.height!==void 0,i=H.useRef({displayError:!1,initialCompute:!0,computeRun:0}),[a,s]=H.useState(0),[l,c]=H.useState(0),f=H.useCallback(()=>{const _=e==null?void 0:e.current;if(!_)return{};const b=sD(_).getComputedStyle(_),S=Math.floor(parseFloat(b.height))||0,C=Math.floor(parseFloat(b.width))||0;return t.update(I=>I.dimensions.width===C&&I.dimensions.height===S?I:W({},I,{dimensions:{margin:{top:n.margin.top,right:n.margin.right,bottom:n.margin.bottom,left:n.margin.left},width:n.width??C,height:n.height??S,propsWidth:n.width,propsHeight:n.height}})),{height:S,width:C}},[t,e,n.height,n.width,n.margin.left,n.margin.right,n.margin.top,n.margin.bottom]);H.useEffect(()=>{t.update(_=>{const w=n.width??_.dimensions.width,b=n.height??_.dimensions.height;return W({},_,{dimensions:{margin:{top:n.margin.top,right:n.margin.right,bottom:n.margin.bottom,left:n.margin.left},width:w,height:b,propsHeight:n.height,propsWidth:n.width}})})},[t,n.height,n.width,n.margin.left,n.margin.right,n.margin.top,n.margin.bottom]),H.useEffect(()=>{i.current.displayError=!0},[]),Vi(()=>{if(r||!i.current.initialCompute||i.current.computeRun>JF)return;const _=f();_.width!==a||_.height!==l?(i.current.computeRun+=1,_.width!==void 0&&s(_.width),_.height!==void 0&&c(_.height)):i.current.initialCompute&&(i.current.initialCompute=!1)},[l,a,f,r]),Vi(()=>{if(r)return()=>{};f();const _=e.current;if(typeof ResizeObserver>"u")return()=>{};let w;const b=new ResizeObserver(()=>{w=requestAnimationFrame(()=>{f()})});return _&&b.observe(_),()=>{w&&cancelAnimationFrame(w),_&&b.unobserve(_)}},[f,r,e]);const d=jt(t,vs),g=H.useCallback(_=>_>=d.left-1&&_<=d.left+d.width,[d.left,d.width]),m=H.useCallback(_=>_>=d.top-1&&_<=d.top+d.height,[d.height,d.top]);return{instance:{isPointInside:H.useCallback((_,w,b)=>b&&"closest"in b&&b.closest("[data-drawing-container]")?!0:g(_)&&m(w),[g,m]),isXInside:g,isYInside:m}}};Qg.params={width:!0,height:!0,margin:!0};Qg.getDefaultizedParams=({params:n})=>W({},n,{margin:E4(n.margin,pF)});Qg.getInitialState=({width:n,height:t,margin:e})=>({dimensions:{margin:e,width:n??0,height:t??0,propsWidth:n,propsHeight:t}});const R2=({params:n,store:t})=>(Vi(()=>{t.update(e=>W({},e,{experimentalFeatures:n.experimentalFeatures}))},[t,n.experimentalFeatures]),{});R2.params={experimentalFeatures:!0};R2.getInitialState=({experimentalFeatures:n})=>({experimentalFeatures:n});const tU=n=>n.experimentalFeatures,b4=St([tU],n=>!!(n!=null&&n.preferStrictDomainInLineCharts));let eT=0;const eU=()=>(eT+=1,`mui-chart-${eT}`),D2=({params:n,store:t})=>(H.useEffect(()=>{t.update(e=>n.id===void 0||n.id===e.id.providedChartId&&e.id.chartId!==void 0?e:W({},e,{id:W({},e.id,{chartId:n.id??eU()})}))},[t,n.id]),{});D2.params={id:!0};D2.getInitialState=({id:n})=>({id:{chartId:n,providedChartId:n}});const nU=n=>n.id,rU=St([nU],n=>n.chartId),iU=["#4254FB","#FFB422","#FA4F58","#0DBEFF","#22BF75","#FA83B4","#FF7511"],aU=["#495AFB","#FFC758","#F35865","#30C8FF","#44CE8D","#F286B3","#FF8C39"],S4=n=>n==="dark"?aU:iU,T4=({series:n,colors:t,seriesConfig:e,dataset:r})=>{const i={};n.forEach((s,l)=>{var d;const c=e[s.type].getSeriesWithDefaultValues(s,l,t),f=c.id;if(i[s.type]===void 0&&(i[s.type]={series:{},seriesOrder:[]}),((d=i[s.type])==null?void 0:d.series[f])!==void 0)throw new Error(`MUI X Charts: series' id "${f}" is not unique.`);i[s.type].series[f]=c,i[s.type].seriesOrder.push(f)});const a={};return Object.keys(e).forEach(s=>{var c,f;const l=i[s];l!==void 0&&(a[s]=((f=(c=e[s])==null?void 0:c.seriesProcessor)==null?void 0:f.call(c,l,r))??i[s])}),a},Jg=({params:n,store:t,seriesConfig:e})=>{const{series:r,dataset:i,theme:a,colors:s}=n,l=H.useRef(!0);return H.useEffect(()=>{if(l.current){l.current=!1;return}t.update(c=>W({},c,{series:W({},c.series,{processedSeries:T4({series:r,colors:typeof s=="function"?s(a):s,seriesConfig:e,dataset:i})})}))},[s,i,r,a,e,t]),{}};Jg.params={dataset:!0,series:!0,colors:!0,theme:!0};const sU=[];Jg.getDefaultizedParams=({params:n})=>{var t;return W({},n,{series:(t=n.series)!=null&&t.length?n.series:sU,colors:n.colors??S4,theme:n.theme??"light"})};Jg.getInitialState=({series:n=[],colors:t,theme:e,dataset:r},i,a)=>({series:{seriesConfig:a,processedSeries:T4({series:n,colors:typeof t=="function"?t(e):t,seriesConfig:a,dataset:r})}});const C4=n=>n.series,ji=St([C4],n=>n.processedSeries),ys=St([C4],n=>n.seriesConfig),oU={abort:!0,animationcancel:!0,animationend:!0,animationiteration:!0,animationstart:!0,auxclick:!0,beforeinput:!0,beforetoggle:!0,blur:!0,cancel:!0,canplay:!0,canplaythrough:!0,change:!0,click:!0,close:!0,compositionend:!0,compositionstart:!0,compositionupdate:!0,contextlost:!0,contextmenu:!0,contextrestored:!0,copy:!0,cuechange:!0,cut:!0,dblclick:!0,drag:!0,dragend:!0,dragenter:!0,dragleave:!0,dragover:!0,dragstart:!0,drop:!0,durationchange:!0,emptied:!0,ended:!0,error:!0,focus:!0,focusin:!0,focusout:!0,formdata:!0,gotpointercapture:!0,input:!0,invalid:!0,keydown:!0,keypress:!0,keyup:!0,load:!0,loadeddata:!0,loadedmetadata:!0,loadstart:!0,lostpointercapture:!0,mousedown:!0,mouseenter:!0,mouseleave:!0,mousemove:!0,mouseout:!0,mouseover:!0,mouseup:!0,paste:!0,pause:!0,play:!0,playing:!0,pointercancel:!0,pointerdown:!0,pointerenter:!0,pointerleave:!0,pointermove:!0,pointerout:!0,pointerover:!0,pointerup:!0,progress:!0,ratechange:!0,reset:!0,resize:!0,scroll:!0,scrollend:!0,securitypolicyviolation:!0,seeked:!0,seeking:!0,select:!0,selectionchange:!0,selectstart:!0,slotchange:!0,stalled:!0,submit:!0,suspend:!0,timeupdate:!0,toggle:!0,touchcancel:!0,touchend:!0,touchmove:!0,touchstart:!0,transitioncancel:!0,transitionend:!0,transitionrun:!0,transitionstart:!0,volumechange:!0,waiting:!0,webkitanimationend:!0,webkitanimationiteration:!0,webkitanimationstart:!0,webkittransitionend:!0,wheel:!0,beforematch:!0,pointerrawupdate:!0};class I4{constructor(t){if(this.name=void 0,this.preventDefault=void 0,this.stopPropagation=void 0,this.preventIf=void 0,this.requiredKeys=void 0,this.keyboardManager=void 0,this.pointerMode=void 0,this.customData={},this.pointerManager=void 0,this.gesturesRegistry=void 0,this.element=void 0,this.state=void 0,this.isSinglePhase=void 0,this.eventType=void 0,this.optionsType=void 0,this.mutableOptionsType=void 0,this.mutableStateType=void 0,!t||!t.name)throw new Error("Gesture must be initialized with a valid name.");if(t.name in oU)throw new Error(`Gesture can't be created with a native event name. Tried to use "${t.name}". Please use a custom name instead.`);this.name=t.name,this.preventDefault=t.preventDefault??!1,this.stopPropagation=t.stopPropagation??!1,this.preventIf=t.preventIf??[],this.requiredKeys=t.requiredKeys??[],this.pointerMode=t.pointerMode??[]}init(t,e,r,i){this.element=t,this.pointerManager=e,this.gesturesRegistry=r,this.keyboardManager=i;const a=`${this.name}ChangeOptions`;this.element.addEventListener(a,this.handleOptionsChange.bind(this));const s=`${this.name}ChangeState`;this.element.addEventListener(s,this.handleStateChange.bind(this))}handleOptionsChange(t){t&&t.detail&&this.updateOptions(t.detail)}updateOptions(t){this.preventDefault=t.preventDefault??this.preventDefault,this.stopPropagation=t.stopPropagation??this.stopPropagation,this.preventIf=t.preventIf??this.preventIf,this.requiredKeys=t.requiredKeys??this.requiredKeys,this.pointerMode=t.pointerMode??this.pointerMode}handleStateChange(t){t&&t.detail&&this.updateState(t.detail)}updateState(t){Object.assign(this.state,t)}getTargetElement(t){return this.isActive||this.element===t.target||"contains"in this.element&&this.element.contains(t.target)||"getRootNode"in this.element&&this.element.getRootNode()instanceof ShadowRoot&&t.composedPath().includes(this.element)?this.element:null}set isActive(t){t?this.gesturesRegistry.registerActiveGesture(this.element,this):this.gesturesRegistry.unregisterActiveGesture(this.element,this)}get isActive(){return this.gesturesRegistry.isGestureActive(this.element,this)??!1}shouldPreventGesture(t){if(!this.keyboardManager.areKeysPressed(this.requiredKeys))return!0;if(this.preventIf.length===0)return!1;const e=this.gesturesRegistry.getActiveGestures(t);return this.preventIf.some(r=>e[r])}isPointerTypeAllowed(t){return!this.pointerMode||this.pointerMode.length===0?!0:this.pointerMode.includes(t)}destroy(){const t=`${this.name}ChangeOptions`;this.element.removeEventListener(t,this.handleOptionsChange.bind(this));const e=`${this.name}ChangeState`;this.element.removeEventListener(e,this.handleStateChange.bind(this))}}class lU{constructor(){this.activeGestures=new Map}registerActiveGesture(t,e){this.activeGestures.has(t)||this.activeGestures.set(t,new Set);const r=this.activeGestures.get(t),i={gesture:e,element:t};r.add(i)}unregisterActiveGesture(t,e){const r=this.activeGestures.get(t);r&&(r.forEach(i=>{i.gesture===e&&r.delete(i)}),r.size===0&&this.activeGestures.delete(t))}getActiveGestures(t){const e=this.activeGestures.get(t);return e?Array.from(e).reduce((r,i)=>(r[i.gesture.name]=!0,r),{}):{}}isGestureActive(t,e){const r=this.activeGestures.get(t);return r?Array.from(r).some(i=>i.gesture===e):!1}destroy(){this.activeGestures.clear()}unregisterElement(t){this.activeGestures.delete(t)}}class uU{constructor(){this.pressedKeys=new Set,this.handleKeyDown=t=>{this.pressedKeys.add(t.key)},this.handleKeyUp=t=>{this.pressedKeys.delete(t.key)},this.clearKeys=()=>{this.pressedKeys.clear()},this.initialize()}initialize(){typeof window>"u"||(window.addEventListener("keydown",this.handleKeyDown),window.addEventListener("keyup",this.handleKeyUp),window.addEventListener("blur",this.clearKeys))}areKeysPressed(t){return!t||t.length===0?!0:t.every(e=>e==="ControlOrMeta"?this.pressedKeys.has("Control")||this.pressedKeys.has("Meta"):this.pressedKeys.has(e))}destroy(){typeof window<"u"&&(window.removeEventListener("keydown",this.handleKeyDown),window.removeEventListener("keyup",this.handleKeyUp),window.removeEventListener("blur",this.clearKeys)),this.clearKeys()}}class cU{constructor(t){this.root=void 0,this.touchAction=void 0,this.passive=void 0,this.preventEventInterruption=!0,this.pointers=new Map,this.gestureHandlers=new Set,this.handleInterruptEvents=e=>{if(this.preventEventInterruption&&"pointerType"in e&&e.pointerType==="touch"){e.preventDefault();return}const r=new PointerEvent("forceCancel",{bubbles:!1,cancelable:!1}),i=this.pointers.values().next().value;if(this.pointers.size>0&&i){Object.defineProperties(r,{clientX:{value:i.clientX},clientY:{value:i.clientY},pointerId:{value:i.pointerId},pointerType:{value:i.pointerType}});for(const[a,s]of this.pointers.entries()){const l=W({},s,{type:"forceCancel"});this.pointers.set(a,l)}}this.notifyHandlers(r),this.pointers.clear()},this.handlePointerEvent=e=>{const{type:r,pointerId:i}=e;if(r==="pointerdown"||r==="pointermove")this.pointers.set(i,this.createPointerData(e));else if(r==="pointerup"||r==="pointercancel"||r==="forceCancel"){this.pointers.set(i,this.createPointerData(e)),this.notifyHandlers(e),this.pointers.delete(i);return}this.notifyHandlers(e)},this.root=t.root??document.getRootNode({composed:!0}),this.touchAction=t.touchAction||"auto",this.passive=t.passive??!1,this.preventEventInterruption=t.preventEventInterruption??!1,this.setupEventListeners()}registerGestureHandler(t){return this.gestureHandlers.add(t),()=>{this.gestureHandlers.delete(t)}}getPointers(){return new Map(this.pointers)}setupEventListeners(){this.touchAction!=="auto"&&(this.root.style.touchAction=this.touchAction),this.root.addEventListener("pointerdown",this.handlePointerEvent,{passive:this.passive}),this.root.addEventListener("pointermove",this.handlePointerEvent,{passive:this.passive}),this.root.addEventListener("pointerup",this.handlePointerEvent,{passive:this.passive}),this.root.addEventListener("pointercancel",this.handlePointerEvent,{passive:this.passive}),this.root.addEventListener("forceCancel",this.handlePointerEvent,{passive:this.passive}),this.root.addEventListener("blur",this.handleInterruptEvents),this.root.addEventListener("contextmenu",this.handleInterruptEvents)}notifyHandlers(t){this.gestureHandlers.forEach(e=>e(this.pointers,t))}createPointerData(t){return{pointerId:t.pointerId,clientX:t.clientX,clientY:t.clientY,pageX:t.pageX,pageY:t.pageY,target:t.target,timeStamp:t.timeStamp,type:t.type,isPrimary:t.isPrimary,pressure:t.pressure,width:t.width,height:t.height,pointerType:t.pointerType,srcEvent:t}}destroy(){this.root.removeEventListener("pointerdown",this.handlePointerEvent),this.root.removeEventListener("pointermove",this.handlePointerEvent),this.root.removeEventListener("pointerup",this.handlePointerEvent),this.root.removeEventListener("pointercancel",this.handlePointerEvent),this.root.removeEventListener("forceCancel",this.handlePointerEvent),this.root.removeEventListener("blur",this.handleInterruptEvents),this.root.removeEventListener("contextmenu",this.handleInterruptEvents),this.pointers.clear(),this.gestureHandlers.clear()}}class fU{constructor(t){this.gestureTemplates=new Map,this.elementGestureMap=new Map,this.activeGesturesRegistry=new lU,this.pointerManager=void 0,this.keyboardManager=new uU,this.pointerManager=new cU({root:t.root,touchAction:t.touchAction,passive:t.passive}),t.gestures&&t.gestures.length>0&&t.gestures.forEach(e=>{this.addGestureTemplate(e)})}addGestureTemplate(t){this.gestureTemplates.has(t.name)&&console.warn(`Gesture template with name "${t.name}" already exists. It will be overwritten.`),this.gestureTemplates.set(t.name,t)}setGestureOptions(t,e,r){const i=this.elementGestureMap.get(e);if(!i||!i.has(t)){console.error(`Gesture "${t}" not found on the provided element.`);return}const a=new CustomEvent(`${t}ChangeOptions`,{detail:r,bubbles:!1,cancelable:!1,composed:!1});e.dispatchEvent(a)}setGestureState(t,e,r){const i=this.elementGestureMap.get(e);if(!i||!i.has(t)){console.error(`Gesture "${t}" not found on the provided element.`);return}const a=new CustomEvent(`${t}ChangeState`,{detail:r,bubbles:!1,cancelable:!1,composed:!1});e.dispatchEvent(a)}registerElement(t,e,r){return Array.isArray(t)||(t=[t]),t.forEach(i=>{const a=r==null?void 0:r[i];this.registerSingleGesture(i,e,a)}),e}registerSingleGesture(t,e,r){const i=this.gestureTemplates.get(t);if(!i)return console.error(`Gesture template "${t}" not found.`),!1;this.elementGestureMap.has(e)||this.elementGestureMap.set(e,new Map);const a=this.elementGestureMap.get(e);a.has(t)&&(console.warn(`Element already has gesture "${t}" registered. It will be replaced.`),this.unregisterElement(t,e));const s=i.clone(r);return s.init(e,this.pointerManager,this.activeGesturesRegistry,this.keyboardManager),a.set(t,s),!0}unregisterElement(t,e){const r=this.elementGestureMap.get(e);return!r||!r.has(t)?!1:(r.get(t).destroy(),r.delete(t),this.activeGesturesRegistry.unregisterElement(e),r.size===0&&this.elementGestureMap.delete(e),!0)}unregisterAllGestures(t){const e=this.elementGestureMap.get(t);if(e){for(const[,r]of e)r.destroy(),this.activeGesturesRegistry.unregisterElement(t);this.elementGestureMap.delete(t)}}destroy(){for(const[t]of this.elementGestureMap)this.unregisterAllGestures(t);this.gestureTemplates.clear(),this.elementGestureMap.clear(),this.activeGesturesRegistry.destroy(),this.keyboardManager.destroy(),this.pointerManager.destroy()}}class fd extends I4{constructor(t){super(t),this.unregisterHandler=null,this.originalTarget=null,this.optionsType=void 0,this.mutableOptionsType=void 0,this.minPointers=void 0,this.maxPointers=void 0,this.minPointers=t.minPointers??1,this.maxPointers=t.maxPointers??1/0}init(t,e,r,i){super.init(t,e,r,i),this.unregisterHandler=this.pointerManager.registerGestureHandler(this.handlePointerEvent.bind(this))}updateOptions(t){super.updateOptions(t),this.minPointers=t.minPointers??this.minPointers,this.maxPointers=t.maxPointers??this.maxPointers}getRelevantPointers(t,e){return t.filter(r=>this.isPointerTypeAllowed(r.pointerType)&&(e===r.target||r.target===this.originalTarget||e===this.originalTarget||"contains"in e&&e.contains(r.target))||"getRootNode"in e&&e.getRootNode()instanceof ShadowRoot&&r.srcEvent.composedPath().includes(e))}destroy(){this.unregisterHandler&&(this.unregisterHandler(),this.unregisterHandler=null),super.destroy()}}function hU(n,t){const e=t.x-n.x,r=t.y-n.y;return Math.sqrt(e*e+r*r)}function Hv(n){if(n.length<2)return 0;let t=0,e=0;for(let r=0;r<n.length;r+=1)for(let i=r+1;i<n.length;i+=1)t+=hU({x:n[r].clientX,y:n[r].clientY},{x:n[i].clientX,y:n[i].clientY}),e+=1;return e>0?t/e:0}function fs(n){if(n.length===0)return{x:0,y:0};const t=n.reduce((e,r)=>(e.x+=r.clientX,e.y+=r.clientY,e),{x:0,y:0});return{x:t.x/n.length,y:t.y/n.length}}function Vc(n,t){return`${n}${t==="ongoing"?"":t.charAt(0).toUpperCase()+t.slice(1)}`}const s1=1e-5,eo=1e-5,nT=.15;function dU(n,t){const e=t.x-n.x,r=t.y-n.y,i={vertical:null,horizontal:null,mainAxis:null},a=gU(t,n),s=Math.abs(e)>Math.abs(r)?"horizontal":"vertical",l=a||s==="horizontal"?s1:nT,c=a?s1:s==="horizontal"?nT:s1;return Math.abs(e)>l&&(i.horizontal=e>0?"right":"left"),Math.abs(r)>c&&(i.vertical=r>0?"down":"up"),i.mainAxis=a?"diagonal":s,i}function gU(n,t){const e=t.x-n.x,r=t.y-n.y,i=Math.atan2(r,e)*180/Math.PI;return i>=-45+eo&&i<=-22.5+eo||i>=22.5+eo&&i<=45+eo||i>=135+eo&&i<=157.5+eo||i>=-157.5+eo&&i<=-135+eo}function pU(n,t){if(!n.vertical&&!n.horizontal)return!1;if(t.length===0)return!0;const e=n.vertical===null||t.includes(n.vertical),r=n.horizontal===null||t.includes(n.horizontal);return e&&r}const rT=0,mU=n=>n>rT?1:n<-rT?-1:0;class O2 extends fd{constructor(t){super(t),this.state={lastPosition:null},this.isSinglePhase=void 0,this.eventType=void 0,this.optionsType=void 0,this.mutableOptionsType=void 0,this.mutableStateType=void 0,this.threshold=void 0,this.handleElementEnterBound=void 0,this.handleElementLeaveBound=void 0,this.handleElementEnterBound=this.handleElementEnter.bind(this),this.handleElementLeaveBound=this.handleElementLeave.bind(this),this.threshold=t.threshold||0}clone(t){return new O2(W({name:this.name,preventDefault:this.preventDefault,stopPropagation:this.stopPropagation,threshold:this.threshold,minPointers:this.minPointers,maxPointers:this.maxPointers,requiredKeys:[...this.requiredKeys],pointerMode:[...this.pointerMode],preventIf:[...this.preventIf]},t))}init(t,e,r,i){super.init(t,e,r,i),this.element.addEventListener("pointerenter",this.handleElementEnterBound),this.element.addEventListener("pointerleave",this.handleElementLeaveBound)}destroy(){this.element.removeEventListener("pointerenter",this.handleElementEnterBound),this.element.removeEventListener("pointerleave",this.handleElementLeaveBound),this.resetState(),super.destroy()}updateOptions(t){super.updateOptions(t)}resetState(){this.isActive=!1,this.state={lastPosition:null}}handleElementEnter(t){if(t.pointerType!=="mouse"&&t.pointerType!=="pen")return;const e=this.pointerManager.getPointers()||new Map,r=Array.from(e.values());if(r.length>=this.minPointers&&r.length<=this.maxPointers){this.isActive=!0;const i={x:t.clientX,y:t.clientY};this.state.lastPosition=i,this.emitMoveEvent(this.element,"start",r,t),this.emitMoveEvent(this.element,"ongoing",r,t)}}handleElementLeave(t){if(t.pointerType!=="mouse"&&t.pointerType!=="pen"||!this.isActive)return;const e=this.pointerManager.getPointers()||new Map,r=Array.from(e.values());this.emitMoveEvent(this.element,"end",r,t),this.resetState()}handlePointerEvent(t,e){if(e.type!=="pointermove"||e.pointerType!=="mouse"&&e.pointerType!=="pen")return;this.preventDefault&&e.preventDefault(),this.stopPropagation&&e.stopPropagation();const r=Array.from(t.values()),i=this.getTargetElement(e);if(!i||r.length<this.minPointers||r.length>this.maxPointers)return;if(this.shouldPreventGesture(i)){if(!this.isActive)return;this.resetState(),this.emitMoveEvent(i,"end",r,e);return}const a={x:e.clientX,y:e.clientY};this.state.lastPosition=a,this.isActive||(this.isActive=!0,this.emitMoveEvent(i,"start",r,e)),this.emitMoveEvent(i,"ongoing",r,e)}emitMoveEvent(t,e,r,i){const a=this.state.lastPosition||fs(r),s=this.gesturesRegistry.getActiveGestures(t),l={gestureName:this.name,centroid:a,target:i.target,srcEvent:i,phase:e,pointers:r,timeStamp:i.timeStamp,activeGestures:s,customData:this.customData},c=Vc(this.name,e),f=new CustomEvent(c,{bubbles:!0,cancelable:!0,composed:!0,detail:l});t.dispatchEvent(f)}}class M2 extends fd{constructor(t){super(t),this.state={startPointers:new Map,startCentroid:null,lastCentroid:null,movementThresholdReached:!1,totalDeltaX:0,totalDeltaY:0,activeDeltaX:0,activeDeltaY:0,lastDirection:{vertical:null,horizontal:null,mainAxis:null},lastDeltas:null},this.isSinglePhase=void 0,this.eventType=void 0,this.optionsType=void 0,this.mutableOptionsType=void 0,this.mutableStateType=void 0,this.threshold=void 0,this.direction=void 0,this.direction=t.direction||["up","down","left","right"],this.threshold=t.threshold||0}clone(t){return new M2(W({name:this.name,preventDefault:this.preventDefault,stopPropagation:this.stopPropagation,threshold:this.threshold,minPointers:this.minPointers,maxPointers:this.maxPointers,direction:[...this.direction],requiredKeys:[...this.requiredKeys],pointerMode:[...this.pointerMode],preventIf:[...this.preventIf]},t))}destroy(){this.resetState(),super.destroy()}updateOptions(t){super.updateOptions(t),this.direction=t.direction||this.direction}resetState(){this.isActive=!1,this.state=W({},this.state,{startPointers:new Map,startCentroid:null,lastCentroid:null,lastDeltas:null,activeDeltaX:0,activeDeltaY:0,movementThresholdReached:!1,lastDirection:{vertical:null,horizontal:null,mainAxis:null}})}handlePointerEvent(t,e){const r=Array.from(t.values());if(e.type==="forceCancel"){this.cancel(e.target,r,e);return}const i=this.getTargetElement(e);if(!i)return;if(this.shouldPreventGesture(i)){this.cancel(i,r,e);return}const a=this.getRelevantPointers(r,i);if(a.length<this.minPointers||a.length>this.maxPointers){this.cancel(i,a,e);return}switch(e.type){case"pointerdown":!this.isActive&&!this.state.startCentroid&&(a.forEach(s=>{this.state.startPointers.set(s.pointerId,s)}),this.originalTarget=i,this.state.startCentroid=fs(a),this.state.lastCentroid=W({},this.state.startCentroid));break;case"pointermove":if(this.state.startCentroid&&a.length>=this.minPointers){const s=fs(a),l=s.x-this.state.startCentroid.x,c=s.y-this.state.startCentroid.y,f=Math.sqrt(l*l+c*c),d=dU(this.state.lastCentroid??this.state.startCentroid,s),g=this.state.lastCentroid?s.x-this.state.lastCentroid.x:0,m=this.state.lastCentroid?s.y-this.state.lastCentroid.y:0;!this.state.movementThresholdReached&&f>=this.threshold&&pU(d,this.direction)?(this.state.movementThresholdReached=!0,this.isActive=!0,this.state.lastDeltas={x:g,y:m},this.state.totalDeltaX+=g,this.state.totalDeltaY+=m,this.state.activeDeltaX+=g,this.state.activeDeltaY+=m,this.emitPanEvent(i,"start",a,e,s),this.emitPanEvent(i,"ongoing",a,e,s)):this.state.movementThresholdReached&&this.isActive&&(this.state.lastDeltas={x:g,y:m},this.state.totalDeltaX+=g,this.state.totalDeltaY+=m,this.state.activeDeltaX+=g,this.state.activeDeltaY+=m,this.emitPanEvent(i,"ongoing",a,e,s)),this.state.lastCentroid=s,this.state.lastDirection=d}break;case"pointerup":case"pointercancel":case"forceCancel":if(this.isActive&&this.state.movementThresholdReached){if(a.filter(s=>s.type!=="pointerup"&&s.type!=="pointercancel").length<this.minPointers){const s=this.state.lastCentroid||this.state.startCentroid;e.type==="pointercancel"&&this.emitPanEvent(i,"cancel",a,e,s),this.emitPanEvent(i,"end",a,e,s),this.resetState()}}else this.resetState();break}}emitPanEvent(t,e,r,i,a){var S,C;if(!this.state.startCentroid)return;const s=((S=this.state.lastDeltas)==null?void 0:S.x)??0,l=((C=this.state.lastDeltas)==null?void 0:C.y)??0,c=this.state.startPointers.values().next().value,f=c?(i.timeStamp-c.timeStamp)/1e3:0,d=f>0?s/f:0,g=f>0?l/f:0,m=Math.sqrt(d*d+g*g),v=this.gesturesRegistry.getActiveGestures(t),_={gestureName:this.name,initialCentroid:this.state.startCentroid,centroid:a,target:i.target,srcEvent:i,phase:e,pointers:r,timeStamp:i.timeStamp,deltaX:s,deltaY:l,direction:this.state.lastDirection,velocityX:d,velocityY:g,velocity:m,totalDeltaX:this.state.totalDeltaX,totalDeltaY:this.state.totalDeltaY,activeDeltaX:this.state.activeDeltaX,activeDeltaY:this.state.activeDeltaY,activeGestures:v,customData:this.customData},w=Vc(this.name,e),b=new CustomEvent(w,{bubbles:!0,cancelable:!0,composed:!0,detail:_});t.dispatchEvent(b),this.preventDefault&&i.preventDefault(),this.stopPropagation&&i.stopPropagation()}cancel(t,e,r){if(this.isActive){const i=t??this.element;this.emitPanEvent(i,"cancel",e,r,this.state.lastCentroid),this.emitPanEvent(i,"end",e,r,this.state.lastCentroid)}this.resetState()}}class N2 extends fd{constructor(t){super(W({},t,{minPointers:t.minPointers??2})),this.state={startDistance:0,lastDistance:0,lastScale:1,lastTime:0,velocity:0,totalScale:1,deltaScale:0},this.isSinglePhase=void 0,this.eventType=void 0,this.optionsType=void 0,this.mutableOptionsType=void 0,this.mutableStateType=void 0,this.threshold=void 0,this.threshold=t.threshold??0}clone(t){return new N2(W({name:this.name,preventDefault:this.preventDefault,stopPropagation:this.stopPropagation,threshold:this.threshold,minPointers:this.minPointers,maxPointers:this.maxPointers,requiredKeys:[...this.requiredKeys],pointerMode:[...this.pointerMode],preventIf:[...this.preventIf]},t))}destroy(){this.resetState(),super.destroy()}updateOptions(t){super.updateOptions(t)}resetState(){this.isActive=!1,this.state=W({},this.state,{startDistance:0,lastDistance:0,lastScale:1,lastTime:0,velocity:0,deltaScale:0})}handlePointerEvent(t,e){const r=Array.from(t.values()),i=this.getTargetElement(e);if(!i)return;if(this.shouldPreventGesture(i)){this.isActive&&(this.emitPinchEvent(i,"cancel",r,e),this.resetState());return}const a=this.getRelevantPointers(r,i);switch(e.type){case"pointerdown":if(a.length>=2&&!this.isActive){const s=Hv(a);this.state.startDistance=s,this.state.lastDistance=s,this.state.lastTime=e.timeStamp,this.originalTarget=i}break;case"pointermove":if(this.state.startDistance&&a.length>=this.minPointers){const s=Hv(a),l=Math.abs(s-this.state.lastDistance);if(l!==0&&l>=this.threshold){const c=this.state.startDistance?s/this.state.startDistance:1,f=c/this.state.lastScale;this.state.totalScale*=f;const d=(e.timeStamp-this.state.lastTime)/1e3;if(this.state.lastDistance){const m=(s-this.state.lastDistance)/d;this.state.velocity=Number.isNaN(m)?0:m}this.state.lastDistance=s,this.state.deltaScale=c-this.state.lastScale,this.state.lastScale=c,this.state.lastTime=e.timeStamp,this.isActive?this.emitPinchEvent(i,"ongoing",a,e):(this.isActive=!0,this.emitPinchEvent(i,"start",a,e),this.emitPinchEvent(i,"ongoing",a,e))}}break;case"pointerup":case"pointercancel":case"forceCancel":if(this.isActive){const s=a.filter(l=>l.type!=="pointerup"&&l.type!=="pointercancel");if(s.length<this.minPointers)e.type==="pointercancel"&&this.emitPinchEvent(i,"cancel",a,e),this.emitPinchEvent(i,"end",a,e),this.resetState();else if(s.length>=2){const l=Hv(s);this.state.startDistance=l/this.state.lastScale}}break}}emitPinchEvent(t,e,r,i){const a=fs(r),s=this.state.lastDistance,l=this.state.lastScale,c=this.gesturesRegistry.getActiveGestures(t),f={gestureName:this.name,centroid:a,target:i.target,srcEvent:i,phase:e,pointers:r,timeStamp:i.timeStamp,scale:l,deltaScale:this.state.deltaScale,totalScale:this.state.totalScale,distance:s,velocity:this.state.velocity,activeGestures:c,direction:mU(this.state.velocity),customData:this.customData};this.preventDefault&&i.preventDefault(),this.stopPropagation&&i.stopPropagation();const d=Vc(this.name,e),g=new CustomEvent(d,{bubbles:!0,cancelable:!0,composed:!0,detail:f});t.dispatchEvent(g)}}class P2 extends fd{constructor(t){super(t),this.state={startCentroid:null,lastPosition:null,timerId:null,startTime:0,pressThresholdReached:!1},this.isSinglePhase=void 0,this.eventType=void 0,this.optionsType=void 0,this.mutableOptionsType=void 0,this.mutableStateType=void 0,this.duration=void 0,this.maxDistance=void 0,this.duration=t.duration??500,this.maxDistance=t.maxDistance??10}clone(t){return new P2(W({name:this.name,preventDefault:this.preventDefault,stopPropagation:this.stopPropagation,minPointers:this.minPointers,maxPointers:this.maxPointers,duration:this.duration,maxDistance:this.maxDistance,requiredKeys:[...this.requiredKeys],pointerMode:[...this.pointerMode],preventIf:[...this.preventIf]},t))}destroy(){this.clearPressTimer(),this.resetState(),super.destroy()}updateOptions(t){super.updateOptions(t),this.duration=t.duration??this.duration,this.maxDistance=t.maxDistance??this.maxDistance}resetState(){this.clearPressTimer(),this.isActive=!1,this.state=W({},this.state,{startCentroid:null,lastPosition:null,timerId:null,startTime:0,pressThresholdReached:!1})}clearPressTimer(){this.state.timerId!==null&&(clearTimeout(this.state.timerId),this.state.timerId=null)}handlePointerEvent(t,e){const r=Array.from(t.values());if(e.type==="forceCancel"){this.cancelPress(e.target,r,e);return}const i=this.getTargetElement(e);if(!i)return;if(this.shouldPreventGesture(i)){this.isActive&&this.cancelPress(i,r,e);return}const a=this.getRelevantPointers(r,i);if(a.length<this.minPointers||a.length>this.maxPointers){this.isActive&&this.cancelPress(i,a,e);return}switch(e.type){case"pointerdown":!this.isActive&&!this.state.startCentroid&&(this.state.startCentroid=fs(a),this.state.lastPosition=W({},this.state.startCentroid),this.state.startTime=e.timeStamp,this.isActive=!0,this.originalTarget=i,this.clearPressTimer(),this.state.timerId=setTimeout(()=>{if(this.isActive&&this.state.startCentroid){this.state.pressThresholdReached=!0;const s=this.state.lastPosition;this.emitPressEvent(i,"start",a,e,s),this.emitPressEvent(i,"ongoing",a,e,s)}},this.duration));break;case"pointermove":if(this.isActive&&this.state.startCentroid){const s=fs(a);this.state.lastPosition=s;const l=s.x-this.state.startCentroid.x,c=s.y-this.state.startCentroid.y;Math.sqrt(l*l+c*c)>this.maxDistance&&this.cancelPress(i,a,e)}break;case"pointerup":if(this.isActive){if(this.state.pressThresholdReached){const s=this.state.lastPosition||this.state.startCentroid;this.emitPressEvent(i,"end",a,e,s)}this.resetState()}break;case"pointercancel":case"forceCancel":this.cancelPress(i,a,e);break}}emitPressEvent(t,e,r,i,a){const s=this.gesturesRegistry.getActiveGestures(t),l=i.timeStamp-this.state.startTime,c={gestureName:this.name,centroid:a,target:i.target,srcEvent:i,phase:e,pointers:r,timeStamp:i.timeStamp,x:a.x,y:a.y,duration:l,activeGestures:s,customData:this.customData},f=Vc(this.name,e),d=new CustomEvent(f,{bubbles:!0,cancelable:!0,composed:!0,detail:c});t.dispatchEvent(d),this.preventDefault&&i.preventDefault(),this.stopPropagation&&i.stopPropagation()}cancelPress(t,e,r){if(this.isActive&&this.state.pressThresholdReached){const i=this.state.lastPosition||this.state.startCentroid;this.emitPressEvent(t??this.element,"cancel",e,r,i),this.emitPressEvent(t??this.element,"end",e,r,i)}this.resetState()}}class k2 extends fd{constructor(t){super(t),this.state={startCentroid:null,currentTapCount:0,lastTapTime:0,lastPosition:null},this.isSinglePhase=void 0,this.eventType=void 0,this.optionsType=void 0,this.mutableOptionsType=void 0,this.mutableStateType=void 0,this.maxDistance=void 0,this.taps=void 0,this.maxDistance=t.maxDistance??10,this.taps=t.taps??1}clone(t){return new k2(W({name:this.name,preventDefault:this.preventDefault,stopPropagation:this.stopPropagation,minPointers:this.minPointers,maxPointers:this.maxPointers,maxDistance:this.maxDistance,taps:this.taps,requiredKeys:[...this.requiredKeys],pointerMode:[...this.pointerMode],preventIf:[...this.preventIf]},t))}destroy(){this.resetState(),super.destroy()}updateOptions(t){super.updateOptions(t),this.maxDistance=t.maxDistance??this.maxDistance,this.taps=t.taps??this.taps}resetState(){this.isActive=!1,this.state={startCentroid:null,currentTapCount:0,lastTapTime:0,lastPosition:null}}handlePointerEvent(t,e){const r=Array.from(t.values()),i=this.getTargetElement(e);if(!i)return;const a=this.getRelevantPointers(r,i);if(this.shouldPreventGesture(i)||a.length<this.minPointers||a.length>this.maxPointers){this.isActive&&this.cancelTap(i,a,e);return}switch(e.type){case"pointerdown":this.isActive||(this.state.startCentroid=fs(a),this.state.lastPosition=W({},this.state.startCentroid),this.isActive=!0,this.originalTarget=i);break;case"pointermove":if(this.isActive&&this.state.startCentroid){const s=fs(a);this.state.lastPosition=s;const l=s.x-this.state.startCentroid.x,c=s.y-this.state.startCentroid.y;Math.sqrt(l*l+c*c)>this.maxDistance&&this.cancelTap(i,a,e)}break;case"pointerup":if(this.isActive){this.state.currentTapCount+=1;const s=this.state.lastPosition||this.state.startCentroid;if(!s){this.cancelTap(i,a,e);return}this.state.currentTapCount>=this.taps?(this.fireTapEvent(i,a,e,s),this.resetState()):(this.state.lastTapTime=e.timeStamp,this.isActive=!1,this.state.startCentroid=null,setTimeout(()=>{this.state&&this.state.currentTapCount>0&&this.state.currentTapCount<this.taps&&(this.state.currentTapCount=0)},300))}break;case"pointercancel":case"forceCancel":this.cancelTap(i,a,e);break}}fireTapEvent(t,e,r,i){const a=this.gesturesRegistry.getActiveGestures(t),s={gestureName:this.name,centroid:i,target:r.target,srcEvent:r,phase:"end",pointers:e,timeStamp:r.timeStamp,x:i.x,y:i.y,tapCount:this.state.currentTapCount,activeGestures:a,customData:this.customData},l=new CustomEvent(this.name,{bubbles:!0,cancelable:!0,composed:!0,detail:s});t.dispatchEvent(l),this.preventDefault&&r.preventDefault(),this.stopPropagation&&r.stopPropagation()}cancelTap(t,e,r){if(this.state.startCentroid||this.state.lastPosition){const i=this.state.lastPosition||this.state.startCentroid,a=this.gesturesRegistry.getActiveGestures(t),s={gestureName:this.name,centroid:i,target:r.target,srcEvent:r,phase:"cancel",pointers:e,timeStamp:r.timeStamp,x:i.x,y:i.y,tapCount:this.state.currentTapCount,activeGestures:a,customData:this.customData},l=Vc(this.name,"cancel"),c=new CustomEvent(l,{bubbles:!0,cancelable:!0,composed:!0,detail:s});t.dispatchEvent(c)}this.resetState()}}class L2 extends I4{constructor(t){super(t),this.state={totalDeltaX:0,totalDeltaY:0,totalDeltaZ:0},this.isSinglePhase=void 0,this.eventType=void 0,this.optionsType=void 0,this.mutableOptionsType=void 0,this.mutableStateType=void 0,this.sensitivity=void 0,this.max=void 0,this.min=void 0,this.initialDelta=void 0,this.invert=void 0,this.handleWheelEventBound=void 0,this.sensitivity=t.sensitivity??1,this.max=t.max??Number.MAX_SAFE_INTEGER,this.min=t.min??Number.MIN_SAFE_INTEGER,this.initialDelta=t.initialDelta??0,this.invert=t.invert??!1,this.state.totalDeltaX=this.initialDelta,this.state.totalDeltaY=this.initialDelta,this.state.totalDeltaZ=this.initialDelta,this.handleWheelEventBound=this.handleWheelEvent.bind(this)}clone(t){return new L2(W({name:this.name,preventDefault:this.preventDefault,stopPropagation:this.stopPropagation,sensitivity:this.sensitivity,max:this.max,min:this.min,initialDelta:this.initialDelta,invert:this.invert,requiredKeys:[...this.requiredKeys],pointerMode:[...this.pointerMode],preventIf:[...this.preventIf]},t))}init(t,e,r,i){super.init(t,e,r,i),this.element.addEventListener("wheel",this.handleWheelEventBound)}destroy(){this.element.removeEventListener("wheel",this.handleWheelEventBound),this.resetState(),super.destroy()}resetState(){this.isActive=!1,this.state={totalDeltaX:0,totalDeltaY:0,totalDeltaZ:0}}updateOptions(t){super.updateOptions(t),this.sensitivity=t.sensitivity??this.sensitivity,this.max=t.max??this.max,this.min=t.min??this.min,this.initialDelta=t.initialDelta??this.initialDelta,this.invert=t.invert??this.invert}handleWheelEvent(t){if(this.shouldPreventGesture(this.element))return;const e=this.pointerManager.getPointers()||new Map,r=Array.from(e.values());this.state.totalDeltaX+=t.deltaX*this.sensitivity*(this.invert?-1:1),this.state.totalDeltaY+=t.deltaY*this.sensitivity*(this.invert?-1:1),this.state.totalDeltaZ+=t.deltaZ*this.sensitivity*(this.invert?-1:1),["totalDeltaX","totalDeltaY","totalDeltaZ"].forEach(i=>{this.state[i]<this.min&&(this.state[i]=this.min),this.state[i]>this.max&&(this.state[i]=this.max)}),this.emitWheelEvent(r,t)}emitWheelEvent(t,e){const r=t.length>0?fs(t):{x:e.clientX,y:e.clientY},i=this.gesturesRegistry.getActiveGestures(this.element),a={gestureName:this.name,centroid:r,target:e.target,srcEvent:e,phase:"ongoing",pointers:t,timeStamp:e.timeStamp,deltaX:e.deltaX*this.sensitivity*(this.invert?-1:1),deltaY:e.deltaY*this.sensitivity*(this.invert?-1:1),deltaZ:e.deltaZ*this.sensitivity*(this.invert?-1:1),deltaMode:e.deltaMode,totalDeltaX:this.state.totalDeltaX,totalDeltaY:this.state.totalDeltaY,totalDeltaZ:this.state.totalDeltaZ,activeGestures:i,customData:this.customData};this.preventDefault&&e.preventDefault(),this.stopPropagation&&e.stopPropagation();const s=Vc(this.name,"ongoing"),l=new CustomEvent(s,{bubbles:!0,cancelable:!0,composed:!0,detail:a});this.element.dispatchEvent(l)}}const Vu=n=>n.preventDefault(),B2=({svgRef:n})=>{H.useEffect(()=>{const e=n.current;if(!e)return;const r=new fU({gestures:[new M2({name:"pan",threshold:0,maxPointers:1}),new O2({name:"move",preventIf:["pan","pinch"]}),new N2({name:"pinch",threshold:5,preventIf:["pan"]}),new L2({name:"turnWheel",sensitivity:.01,initialDelta:1}),new k2({name:"tap",maxDistance:10,preventIf:["pan","pinch"]}),new P2({name:"quickPress",duration:50,maxDistance:10})]});return r.registerElement(["pan","move","pinch","turnWheel","tap","quickPress"],e),()=>{r.destroy()}},[n]);const t=H.useCallback((e,r,i)=>{const a=n.current;return a==null||a.addEventListener(e,r,i),{cleanup:()=>a==null?void 0:a.removeEventListener(e,r)}},[n]);return H.useEffect(()=>{const e=n.current;return e==null||e.addEventListener("gesturestart",Vu),e==null||e.addEventListener("gesturechange",Vu),e==null||e.addEventListener("gestureend",Vu),()=>{e==null||e.removeEventListener("gesturestart",Vu),e==null||e.removeEventListener("gesturechange",Vu),e==null||e.removeEventListener("gestureend",Vu)}},[n]),{instance:{addInteractionListener:t}}};B2.params={};B2.getInitialState=()=>({});const vU=[D2,R2,Qg,Jg,B2,Zg],yU=["apiRef"],xU=n=>{let{plugins:t}=n,e=xe(n.props,yU);const r={};t.forEach(s=>{Object.assign(r,s.params)});const i={};return Object.keys(e).forEach(s=>{const l=e[s];r[s]&&(i[s]=l)}),t.reduce((s,l)=>l.getDefaultizedParams?l.getDefaultizedParams({params:s}):s,i)};let iT=0;function _U(n,t,e){const r=vC(),i=H.useMemo(()=>[...vU,...n],[n]),a=xU({plugins:i,props:t});a.id=a.id??r;const l=H.useRef({}).current,c=wU(t.apiRef),f=H.useRef(null),d=H.useRef(null),g=H.useRef(null);if(g.current==null){iT+=1;const _={cacheKey:{id:iT}};i.forEach(w=>{w.getInitialState&&Object.assign(_,w.getInitialState(a,_,e))}),g.current=new yF(_)}const m=_=>{const w=_({instance:l,params:a,plugins:i,store:g.current,svgRef:d,chartRootRef:f,seriesConfig:e});w.publicAPI&&Object.assign(c.current,w.publicAPI),w.instance&&Object.assign(l,w.instance)};return i.forEach(m),{contextValue:H.useMemo(()=>({store:g.current,publicAPI:c.current,instance:l,svgRef:d,chartRootRef:f}),[l,c])}}function AU(n){return n.current==null&&(n.current={}),n}function wU(n){const t=H.useRef({});return n?AU(n):t}const R4=H.createContext(null),D4=()=>{},O4=4,M4=20+2*O4,EU=40+2*O4,bU="hover",SU={top:5,bottom:5,left:5,right:5},o1={minStart:0,maxEnd:100,step:5,minSpan:10,maxSpan:100,panning:!0,filterMode:"keep",slider:{enabled:!1,preview:!1,size:M4,showTooltip:bU}},V2=(n,t,e)=>{var r;if(n)return n===!0?W({axisId:t,axisDirection:e},o1):W({axisId:t,axisDirection:e},o1,n,{slider:W({},o1.slider,{size:((r=n.slider)==null?void 0:r.preview)??o1.slider.preview?EU:M4},n.slider)})};function N4(n,t){const e={top:0,bottom:0,none:0};return(n&&n.length>0?n:[{id:C2,scaleType:"linear"}]).map((a,s)=>{var v;const l=a.dataKey,c=s===0?"bottom":"none",f=a.position??c,d=vF+(a.label?v4:0),g=a.id??`defaultized-x-axis-${s}`,m=W({offset:e[f]},a,{id:g,position:f,height:a.height??d,zoom:V2(a.zoom,g,"x")});if(f!=="none"&&(e[f]+=m.height,(v=m.zoom)!=null&&v.slider.enabled&&(e[f]+=m.zoom.slider.size)),l===void 0||a.data!==void 0)return m;if(t===void 0)throw new Error("MUI X Charts: x-axis uses `dataKey` but no `dataset` is provided.");return W({},m,{data:t.map(_=>_[l])})})}function P4(n,t){const e={right:0,left:0,none:0};return(n&&n.length>0?n:[{id:I2,scaleType:"linear"}]).map((a,s)=>{var v;const l=a.dataKey,c=s===0?"left":"none",f=a.position??c,d=mF+(a.label?v4:0),g=a.id??`defaultized-y-axis-${s}`,m=W({offset:e[f]},a,{id:g,position:f,width:a.width??d,zoom:V2(a.zoom,g,"y")});if(f!=="none"&&(e[f]+=m.width,(v=m.zoom)!=null&&v.slider.enabled&&(e[f]+=m.zoom.slider.size)),l===void 0||a.data!==void 0)return m;if(t===void 0)throw new Error("MUI X Charts: y-axis uses `dataKey` but no `dataset` is provided.");return W({},m,{data:t.map(_=>_[l])})})}function D1(n,t){return n==null||t==null?NaN:n<t?-1:n>t?1:n>=t?0:NaN}function TU(n,t){return n==null||t==null?NaN:t<n?-1:t>n?1:t>=n?0:NaN}function F2(n){let t,e,r;n.length!==2?(t=D1,e=(l,c)=>D1(n(l),c),r=(l,c)=>n(l)-c):(t=n===D1||n===TU?n:CU,e=n,r=n);function i(l,c,f=0,d=l.length){if(f<d){if(t(c,c)!==0)return d;do{const g=f+d>>>1;e(l[g],c)<0?f=g+1:d=g}while(f<d)}return f}function a(l,c,f=0,d=l.length){if(f<d){if(t(c,c)!==0)return d;do{const g=f+d>>>1;e(l[g],c)<=0?f=g+1:d=g}while(f<d)}return f}function s(l,c,f=0,d=l.length){const g=i(l,c,f,d-1);return g>f&&r(l[g-1],c)>-r(l[g],c)?g-1:g}return{left:i,center:s,right:a}}function CU(){return 0}function IU(n){return n===null?NaN:+n}const RU=F2(D1),k4=RU.right;F2(IU).center;class aT extends Map{constructor(t,e=MU){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:e}}),t!=null)for(const[r,i]of t)this.set(r,i)}get(t){return super.get(sT(this,t))}has(t){return super.has(sT(this,t))}set(t,e){return super.set(DU(this,t),e)}delete(t){return super.delete(OU(this,t))}}function sT({_intern:n,_key:t},e){const r=t(e);return n.has(r)?n.get(r):e}function DU({_intern:n,_key:t},e){const r=t(e);return n.has(r)?n.get(r):(n.set(r,e),e)}function OU({_intern:n,_key:t},e){const r=t(e);return n.has(r)&&(e=n.get(r),n.delete(r)),e}function MU(n){return n!==null&&typeof n=="object"?n.valueOf():n}const NU=Math.sqrt(50),PU=Math.sqrt(10),kU=Math.sqrt(2);function eg(n,t,e){const r=(t-n)/Math.max(0,e),i=Math.floor(Math.log10(r)),a=r/Math.pow(10,i),s=a>=NU?10:a>=PU?5:a>=kU?2:1;let l,c,f;return i<0?(f=Math.pow(10,-i)/s,l=Math.round(n*f),c=Math.round(t*f),l/f<n&&++l,c/f>t&&--c,f=-f):(f=Math.pow(10,i)*s,l=Math.round(n/f),c=Math.round(t/f),l*f<n&&++l,c*f>t&&--c),c<l&&.5<=e&&e<2?eg(n,t,e*2):[l,c,f]}function ex(n,t,e){if(t=+t,n=+n,e=+e,!(e>0))return[];if(n===t)return[n];const r=t<n,[i,a,s]=r?eg(t,n,e):eg(n,t,e);if(!(a>=i))return[];const l=a-i+1,c=new Array(l);if(r)if(s<0)for(let f=0;f<l;++f)c[f]=(a-f)/-s;else for(let f=0;f<l;++f)c[f]=(a-f)*s;else if(s<0)for(let f=0;f<l;++f)c[f]=(i+f)/-s;else for(let f=0;f<l;++f)c[f]=(i+f)*s;return c}function nx(n,t,e){return t=+t,n=+n,e=+e,eg(n,t,e)[2]}function rx(n,t,e){t=+t,n=+n,e=+e;const r=t<n,i=r?nx(t,n,e):nx(n,t,e);return(r?-1:1)*(i<0?1/-i:i)}function LU(n,t,e){n=+n,t=+t,e=(i=arguments.length)<2?(t=n,n=0,1):i<3?1:+e;for(var r=-1,i=Math.max(0,Math.ceil((t-n)/e))|0,a=new Array(i);++r<i;)a[r]=n+r*e;return a}function xs(n,t){switch(arguments.length){case 0:break;case 1:this.range(n);break;default:this.range(t).domain(n);break}return this}function BU(n,t){switch(arguments.length){case 0:break;case 1:{typeof n=="function"?this.interpolator(n):this.range(n);break}default:{this.domain(n),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const oT=Symbol("implicit");function ng(){var n=new aT,t=[],e=[],r=oT;function i(a){let s=n.get(a);if(s===void 0){if(r!==oT)return r;n.set(a,s=t.push(a)-1)}return e[s%e.length]}return i.domain=function(a){if(!arguments.length)return t.slice();t=[],n=new aT;for(const s of a)n.has(s)||n.set(s,t.push(s)-1);return i},i.range=function(a){return arguments.length?(e=Array.from(a),i):e.slice()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return ng(t,e).unknown(r)},xs.apply(i,arguments),i}function tp(){var n=ng().unknown(void 0),t=n.domain,e=n.range,r=0,i=1,a,s,l=!1,c=0,f=0,d=.5;delete n.unknown;function g(){var m=t().length,v=i<r,_=v?i:r,w=v?r:i;a=(w-_)/Math.max(1,m-c+f*2),l&&(a=Math.floor(a)),_+=(w-_-a*(m-c))*d,s=a*(1-c),l&&(_=Math.round(_),s=Math.round(s));var b=LU(m).map(function(S){return _+a*S});return e(v?b.reverse():b)}return n.domain=function(m){return arguments.length?(t(m),g()):t()},n.range=function(m){return arguments.length?([r,i]=m,r=+r,i=+i,g()):[r,i]},n.rangeRound=function(m){return[r,i]=m,r=+r,i=+i,l=!0,g()},n.bandwidth=function(){return s},n.step=function(){return a},n.round=function(m){return arguments.length?(l=!!m,g()):l},n.padding=function(m){return arguments.length?(c=Math.min(1,f=+m),g()):c},n.paddingInner=function(m){return arguments.length?(c=Math.min(1,m),g()):c},n.paddingOuter=function(m){return arguments.length?(f=+m,g()):f},n.align=function(m){return arguments.length?(d=Math.max(0,Math.min(1,m)),g()):d},n.copy=function(){return tp(t(),[r,i]).round(l).paddingInner(c).paddingOuter(f).align(d)},xs.apply(g(),arguments)}function L4(n){var t=n.copy;return n.padding=n.paddingOuter,delete n.paddingInner,delete n.paddingOuter,n.copy=function(){return L4(t())},n}function B4(){return L4(tp.apply(null,arguments).paddingInner(1))}function U2(n,t,e){n.prototype=t.prototype=e,e.constructor=n}function V4(n,t){var e=Object.create(n.prototype);for(var r in t)e[r]=t[r];return e}function hd(){}var Uh=.7,rg=1/Uh,fc="\\s*([+-]?\\d+)\\s*",jh="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",pa="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",VU=/^#([0-9a-f]{3,8})$/,FU=new RegExp(`^rgb\\(${fc},${fc},${fc}\\)$`),UU=new RegExp(`^rgb\\(${pa},${pa},${pa}\\)$`),jU=new RegExp(`^rgba\\(${fc},${fc},${fc},${jh}\\)$`),zU=new RegExp(`^rgba\\(${pa},${pa},${pa},${jh}\\)$`),HU=new RegExp(`^hsl\\(${jh},${pa},${pa}\\)$`),GU=new RegExp(`^hsla\\(${jh},${pa},${pa},${jh}\\)$`),lT={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};U2(hd,zh,{copy(n){return Object.assign(new this.constructor,this,n)},displayable(){return this.rgb().displayable()},hex:uT,formatHex:uT,formatHex8:$U,formatHsl:qU,formatRgb:cT,toString:cT});function uT(){return this.rgb().formatHex()}function $U(){return this.rgb().formatHex8()}function qU(){return F4(this).formatHsl()}function cT(){return this.rgb().formatRgb()}function zh(n){var t,e;return n=(n+"").trim().toLowerCase(),(t=VU.exec(n))?(e=t[1].length,t=parseInt(t[1],16),e===6?fT(t):e===3?new kr(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):e===8?l1(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):e===4?l1(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=FU.exec(n))?new kr(t[1],t[2],t[3],1):(t=UU.exec(n))?new kr(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=jU.exec(n))?l1(t[1],t[2],t[3],t[4]):(t=zU.exec(n))?l1(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=HU.exec(n))?gT(t[1],t[2]/100,t[3]/100,1):(t=GU.exec(n))?gT(t[1],t[2]/100,t[3]/100,t[4]):lT.hasOwnProperty(n)?fT(lT[n]):n==="transparent"?new kr(NaN,NaN,NaN,0):null}function fT(n){return new kr(n>>16&255,n>>8&255,n&255,1)}function l1(n,t,e,r){return r<=0&&(n=t=e=NaN),new kr(n,t,e,r)}function WU(n){return n instanceof hd||(n=zh(n)),n?(n=n.rgb(),new kr(n.r,n.g,n.b,n.opacity)):new kr}function ix(n,t,e,r){return arguments.length===1?WU(n):new kr(n,t,e,r??1)}function kr(n,t,e,r){this.r=+n,this.g=+t,this.b=+e,this.opacity=+r}U2(kr,ix,V4(hd,{brighter(n){return n=n==null?rg:Math.pow(rg,n),new kr(this.r*n,this.g*n,this.b*n,this.opacity)},darker(n){return n=n==null?Uh:Math.pow(Uh,n),new kr(this.r*n,this.g*n,this.b*n,this.opacity)},rgb(){return this},clamp(){return new kr(Il(this.r),Il(this.g),Il(this.b),ig(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:hT,formatHex:hT,formatHex8:XU,formatRgb:dT,toString:dT}));function hT(){return`#${El(this.r)}${El(this.g)}${El(this.b)}`}function XU(){return`#${El(this.r)}${El(this.g)}${El(this.b)}${El((isNaN(this.opacity)?1:this.opacity)*255)}`}function dT(){const n=ig(this.opacity);return`${n===1?"rgb(":"rgba("}${Il(this.r)}, ${Il(this.g)}, ${Il(this.b)}${n===1?")":`, ${n})`}`}function ig(n){return isNaN(n)?1:Math.max(0,Math.min(1,n))}function Il(n){return Math.max(0,Math.min(255,Math.round(n)||0))}function El(n){return n=Il(n),(n<16?"0":"")+n.toString(16)}function gT(n,t,e,r){return r<=0?n=t=e=NaN:e<=0||e>=1?n=t=NaN:t<=0&&(n=NaN),new Li(n,t,e,r)}function F4(n){if(n instanceof Li)return new Li(n.h,n.s,n.l,n.opacity);if(n instanceof hd||(n=zh(n)),!n)return new Li;if(n instanceof Li)return n;n=n.rgb();var t=n.r/255,e=n.g/255,r=n.b/255,i=Math.min(t,e,r),a=Math.max(t,e,r),s=NaN,l=a-i,c=(a+i)/2;return l?(t===a?s=(e-r)/l+(e<r)*6:e===a?s=(r-t)/l+2:s=(t-e)/l+4,l/=c<.5?a+i:2-a-i,s*=60):l=c>0&&c<1?0:s,new Li(s,l,c,n.opacity)}function YU(n,t,e,r){return arguments.length===1?F4(n):new Li(n,t,e,r??1)}function Li(n,t,e,r){this.h=+n,this.s=+t,this.l=+e,this.opacity=+r}U2(Li,YU,V4(hd,{brighter(n){return n=n==null?rg:Math.pow(rg,n),new Li(this.h,this.s,this.l*n,this.opacity)},darker(n){return n=n==null?Uh:Math.pow(Uh,n),new Li(this.h,this.s,this.l*n,this.opacity)},rgb(){var n=this.h%360+(this.h<0)*360,t=isNaN(n)||isNaN(this.s)?0:this.s,e=this.l,r=e+(e<.5?e:1-e)*t,i=2*e-r;return new kr(Gv(n>=240?n-240:n+120,i,r),Gv(n,i,r),Gv(n<120?n+240:n-120,i,r),this.opacity)},clamp(){return new Li(pT(this.h),u1(this.s),u1(this.l),ig(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const n=ig(this.opacity);return`${n===1?"hsl(":"hsla("}${pT(this.h)}, ${u1(this.s)*100}%, ${u1(this.l)*100}%${n===1?")":`, ${n})`}`}}));function pT(n){return n=(n||0)%360,n<0?n+360:n}function u1(n){return Math.max(0,Math.min(1,n||0))}function Gv(n,t,e){return(n<60?t+(e-t)*n/60:n<180?e:n<240?t+(e-t)*(240-n)/60:t)*255}const j2=n=>()=>n;function KU(n,t){return function(e){return n+e*t}}function ZU(n,t,e){return n=Math.pow(n,e),t=Math.pow(t,e)-n,e=1/e,function(r){return Math.pow(n+r*t,e)}}function QU(n){return(n=+n)==1?U4:function(t,e){return e-t?ZU(t,e,n):j2(isNaN(t)?e:t)}}function U4(n,t){var e=t-n;return e?KU(n,e):j2(isNaN(n)?t:n)}const mT=function n(t){var e=QU(t);function r(i,a){var s=e((i=ix(i)).r,(a=ix(a)).r),l=e(i.g,a.g),c=e(i.b,a.b),f=U4(i.opacity,a.opacity);return function(d){return i.r=s(d),i.g=l(d),i.b=c(d),i.opacity=f(d),i+""}}return r.gamma=n,r}(1);function JU(n,t){t||(t=[]);var e=n?Math.min(t.length,n.length):0,r=t.slice(),i;return function(a){for(i=0;i<e;++i)r[i]=n[i]*(1-a)+t[i]*a;return r}}function tj(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function ej(n,t){var e=t?t.length:0,r=n?Math.min(e,n.length):0,i=new Array(r),a=new Array(e),s;for(s=0;s<r;++s)i[s]=ep(n[s],t[s]);for(;s<e;++s)a[s]=t[s];return function(l){for(s=0;s<r;++s)a[s]=i[s](l);return a}}function z2(n,t){var e=new Date;return n=+n,t=+t,function(r){return e.setTime(n*(1-r)+t*r),e}}function ye(n,t){return n=+n,t=+t,function(e){return n*(1-e)+t*e}}function nj(n,t){var e={},r={},i;(n===null||typeof n!="object")&&(n={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in n?e[i]=ep(n[i],t[i]):r[i]=t[i];return function(a){for(i in e)r[i]=e[i](a);return r}}var ax=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,$v=new RegExp(ax.source,"g");function rj(n){return function(){return n}}function ij(n){return function(t){return n(t)+""}}function aj(n,t){var e=ax.lastIndex=$v.lastIndex=0,r,i,a,s=-1,l=[],c=[];for(n=n+"",t=t+"";(r=ax.exec(n))&&(i=$v.exec(t));)(a=i.index)>e&&(a=t.slice(e,a),l[s]?l[s]+=a:l[++s]=a),(r=r[0])===(i=i[0])?l[s]?l[s]+=i:l[++s]=i:(l[++s]=null,c.push({i:s,x:ye(r,i)})),e=$v.lastIndex;return e<t.length&&(a=t.slice(e),l[s]?l[s]+=a:l[++s]=a),l.length<2?c[0]?ij(c[0].x):rj(t):(t=c.length,function(f){for(var d=0,g;d<t;++d)l[(g=c[d]).i]=g.x(f);return l.join("")})}function ep(n,t){var e=typeof t,r;return t==null||e==="boolean"?j2(t):(e==="number"?ye:e==="string"?(r=zh(t))?(t=r,mT):aj:t instanceof zh?mT:t instanceof Date?z2:tj(t)?JU:Array.isArray(t)?ej:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?nj:ye)(n,t)}function j4(n,t){return n=+n,t=+t,function(e){return Math.round(n*(1-e)+t*e)}}function sj(n){return function(){return n}}function oj(n){return+n}var vT=[0,1];function _i(n){return n}function sx(n,t){return(t-=n=+n)?function(e){return(e-n)/t}:sj(isNaN(t)?NaN:.5)}function lj(n,t){var e;return n>t&&(e=n,n=t,t=e),function(r){return Math.max(n,Math.min(t,r))}}function uj(n,t,e){var r=n[0],i=n[1],a=t[0],s=t[1];return i<r?(r=sx(i,r),a=e(s,a)):(r=sx(r,i),a=e(a,s)),function(l){return a(r(l))}}function cj(n,t,e){var r=Math.min(n.length,t.length)-1,i=new Array(r),a=new Array(r),s=-1;for(n[r]<n[0]&&(n=n.slice().reverse(),t=t.slice().reverse());++s<r;)i[s]=sx(n[s],n[s+1]),a[s]=e(t[s],t[s+1]);return function(l){var c=k4(n,l,1,r)-1;return a[c](i[c](l))}}function dd(n,t){return t.domain(n.domain()).range(n.range()).interpolate(n.interpolate()).clamp(n.clamp()).unknown(n.unknown())}function np(){var n=vT,t=vT,e=ep,r,i,a,s=_i,l,c,f;function d(){var m=Math.min(n.length,t.length);return s!==_i&&(s=lj(n[0],n[m-1])),l=m>2?cj:uj,c=f=null,g}function g(m){return m==null||isNaN(m=+m)?a:(c||(c=l(n.map(r),t,e)))(r(s(m)))}return g.invert=function(m){return s(i((f||(f=l(t,n.map(r),ye)))(m)))},g.domain=function(m){return arguments.length?(n=Array.from(m,oj),d()):n.slice()},g.range=function(m){return arguments.length?(t=Array.from(m),d()):t.slice()},g.rangeRound=function(m){return t=Array.from(m),e=j4,d()},g.clamp=function(m){return arguments.length?(s=m?!0:_i,d()):s!==_i},g.interpolate=function(m){return arguments.length?(e=m,d()):e},g.unknown=function(m){return arguments.length?(a=m,g):a},function(m,v){return r=m,i=v,d()}}function z4(){return np()(_i,_i)}function fj(n){return Math.abs(n=Math.round(n))>=1e21?n.toLocaleString("en").replace(/,/g,""):n.toString(10)}function ag(n,t){if((e=(n=t?n.toExponential(t-1):n.toExponential()).indexOf("e"))<0)return null;var e,r=n.slice(0,e);return[r.length>1?r[0]+r.slice(2):r,+n.slice(e+1)]}function _c(n){return n=ag(Math.abs(n)),n?n[1]:NaN}function hj(n,t){return function(e,r){for(var i=e.length,a=[],s=0,l=n[0],c=0;i>0&&l>0&&(c+l+1>r&&(l=Math.max(1,r-c)),a.push(e.substring(i-=l,i+l)),!((c+=l+1)>r));)l=n[s=(s+1)%n.length];return a.reverse().join(t)}}function dj(n){return function(t){return t.replace(/[0-9]/g,function(e){return n[+e]})}}var gj=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Hh(n){if(!(t=gj.exec(n)))throw new Error("invalid format: "+n);var t;return new H2({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Hh.prototype=H2.prototype;function H2(n){this.fill=n.fill===void 0?" ":n.fill+"",this.align=n.align===void 0?">":n.align+"",this.sign=n.sign===void 0?"-":n.sign+"",this.symbol=n.symbol===void 0?"":n.symbol+"",this.zero=!!n.zero,this.width=n.width===void 0?void 0:+n.width,this.comma=!!n.comma,this.precision=n.precision===void 0?void 0:+n.precision,this.trim=!!n.trim,this.type=n.type===void 0?"":n.type+""}H2.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function pj(n){t:for(var t=n.length,e=1,r=-1,i;e<t;++e)switch(n[e]){case".":r=i=e;break;case"0":r===0&&(r=e),i=e;break;default:if(!+n[e])break t;r>0&&(r=0);break}return r>0?n.slice(0,r)+n.slice(i+1):n}var H4;function mj(n,t){var e=ag(n,t);if(!e)return n+"";var r=e[0],i=e[1],a=i-(H4=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,s=r.length;return a===s?r:a>s?r+new Array(a-s+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+ag(n,Math.max(0,t+a-1))[0]}function yT(n,t){var e=ag(n,t);if(!e)return n+"";var r=e[0],i=e[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const xT={"%":(n,t)=>(n*100).toFixed(t),b:n=>Math.round(n).toString(2),c:n=>n+"",d:fj,e:(n,t)=>n.toExponential(t),f:(n,t)=>n.toFixed(t),g:(n,t)=>n.toPrecision(t),o:n=>Math.round(n).toString(8),p:(n,t)=>yT(n*100,t),r:yT,s:mj,X:n=>Math.round(n).toString(16).toUpperCase(),x:n=>Math.round(n).toString(16)};function _T(n){return n}var AT=Array.prototype.map,wT=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function vj(n){var t=n.grouping===void 0||n.thousands===void 0?_T:hj(AT.call(n.grouping,Number),n.thousands+""),e=n.currency===void 0?"":n.currency[0]+"",r=n.currency===void 0?"":n.currency[1]+"",i=n.decimal===void 0?".":n.decimal+"",a=n.numerals===void 0?_T:dj(AT.call(n.numerals,String)),s=n.percent===void 0?"%":n.percent+"",l=n.minus===void 0?"−":n.minus+"",c=n.nan===void 0?"NaN":n.nan+"";function f(g){g=Hh(g);var m=g.fill,v=g.align,_=g.sign,w=g.symbol,b=g.zero,S=g.width,C=g.comma,I=g.precision,M=g.trim,N=g.type;N==="n"?(C=!0,N="g"):xT[N]||(I===void 0&&(I=12),M=!0,N="g"),(b||m==="0"&&v==="=")&&(b=!0,m="0",v="=");var k=w==="$"?e:w==="#"&&/[boxX]/.test(N)?"0"+N.toLowerCase():"",O=w==="$"?r:/[%p]/.test(N)?s:"",R=xT[N],D=/[defgprs%]/.test(N);I=I===void 0?6:/[gprs]/.test(N)?Math.max(1,Math.min(21,I)):Math.max(0,Math.min(20,I));function L(F){var U=k,B=O,rt,vt,q;if(N==="c")B=R(F)+B,F="";else{F=+F;var Z=F<0||1/F<0;if(F=isNaN(F)?c:R(Math.abs(F),I),M&&(F=pj(F)),Z&&+F==0&&_!=="+"&&(Z=!1),U=(Z?_==="("?_:l:_==="-"||_==="("?"":_)+U,B=(N==="s"?wT[8+H4/3]:"")+B+(Z&&_==="("?")":""),D){for(rt=-1,vt=F.length;++rt<vt;)if(q=F.charCodeAt(rt),48>q||q>57){B=(q===46?i+F.slice(rt+1):F.slice(rt))+B,F=F.slice(0,rt);break}}}C&&!b&&(F=t(F,1/0));var it=U.length+F.length+B.length,pt=it<S?new Array(S-it+1).join(m):"";switch(C&&b&&(F=t(pt+F,pt.length?S-B.length:1/0),pt=""),v){case"<":F=U+F+B+pt;break;case"=":F=U+pt+F+B;break;case"^":F=pt.slice(0,it=pt.length>>1)+U+F+B+pt.slice(it);break;default:F=pt+U+F+B;break}return a(F)}return L.toString=function(){return g+""},L}function d(g,m){var v=f((g=Hh(g),g.type="f",g)),_=Math.max(-8,Math.min(8,Math.floor(_c(m)/3)))*3,w=Math.pow(10,-_),b=wT[8+_/3];return function(S){return v(w*S)+b}}return{format:f,formatPrefix:d}}var c1,G2,G4;yj({thousands:",",grouping:[3],currency:["$",""]});function yj(n){return c1=vj(n),G2=c1.format,G4=c1.formatPrefix,c1}function xj(n){return Math.max(0,-_c(Math.abs(n)))}function _j(n,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(_c(t)/3)))*3-_c(Math.abs(n)))}function Aj(n,t){return n=Math.abs(n),t=Math.abs(t)-n,Math.max(0,_c(t)-_c(n))+1}function wj(n,t,e,r){var i=rx(n,t,e),a;switch(r=Hh(r??",f"),r.type){case"s":{var s=Math.max(Math.abs(n),Math.abs(t));return r.precision==null&&!isNaN(a=_j(i,s))&&(r.precision=a),G4(r,s)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(a=Aj(i,Math.max(Math.abs(n),Math.abs(t))))&&(r.precision=a-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(a=xj(i))&&(r.precision=a-(r.type==="%")*2);break}}return G2(r)}function rp(n){var t=n.domain;return n.ticks=function(e){var r=t();return ex(r[0],r[r.length-1],e??10)},n.tickFormat=function(e,r){var i=t();return wj(i[0],i[i.length-1],e??10,r)},n.nice=function(e){e==null&&(e=10);var r=t(),i=0,a=r.length-1,s=r[i],l=r[a],c,f,d=10;for(l<s&&(f=s,s=l,l=f,f=i,i=a,a=f);d-- >0;){if(f=nx(s,l,e),f===c)return r[i]=s,r[a]=l,t(r);if(f>0)s=Math.floor(s/f)*f,l=Math.ceil(l/f)*f;else if(f<0)s=Math.ceil(s*f)/f,l=Math.floor(l*f)/f;else break;c=f}return n},n}function $2(){var n=z4();return n.copy=function(){return dd(n,$2())},xs.apply(n,arguments),rp(n)}function $4(n,t){n=n.slice();var e=0,r=n.length-1,i=n[e],a=n[r],s;return a<i&&(s=e,e=r,r=s,s=i,i=a,a=s),n[e]=t.floor(i),n[r]=t.ceil(a),n}function ET(n){return Math.log(n)}function bT(n){return Math.exp(n)}function Ej(n){return-Math.log(-n)}function bj(n){return-Math.exp(-n)}function Sj(n){return isFinite(n)?+("1e"+n):n<0?0:n}function Tj(n){return n===10?Sj:n===Math.E?Math.exp:t=>Math.pow(n,t)}function Cj(n){return n===Math.E?Math.log:n===10&&Math.log10||n===2&&Math.log2||(n=Math.log(n),t=>Math.log(t)/n)}function ST(n){return(t,e)=>-n(-t,e)}function Ij(n){const t=n(ET,bT),e=t.domain;let r=10,i,a;function s(){return i=Cj(r),a=Tj(r),e()[0]<0?(i=ST(i),a=ST(a),n(Ej,bj)):n(ET,bT),t}return t.base=function(l){return arguments.length?(r=+l,s()):r},t.domain=function(l){return arguments.length?(e(l),s()):e()},t.ticks=l=>{const c=e();let f=c[0],d=c[c.length-1];const g=d<f;g&&([f,d]=[d,f]);let m=i(f),v=i(d),_,w;const b=l==null?10:+l;let S=[];if(!(r%1)&&v-m<b){if(m=Math.floor(m),v=Math.ceil(v),f>0){for(;m<=v;++m)for(_=1;_<r;++_)if(w=m<0?_/a(-m):_*a(m),!(w<f)){if(w>d)break;S.push(w)}}else for(;m<=v;++m)for(_=r-1;_>=1;--_)if(w=m>0?_/a(-m):_*a(m),!(w<f)){if(w>d)break;S.push(w)}S.length*2<b&&(S=ex(f,d,b))}else S=ex(m,v,Math.min(v-m,b)).map(a);return g?S.reverse():S},t.tickFormat=(l,c)=>{if(l==null&&(l=10),c==null&&(c=r===10?"s":","),typeof c!="function"&&(!(r%1)&&(c=Hh(c)).precision==null&&(c.trim=!0),c=G2(c)),l===1/0)return c;const f=Math.max(1,r*l/t.ticks().length);return d=>{let g=d/a(Math.round(i(d)));return g*r<r-.5&&(g*=r),g<=f?c(d):""}},t.nice=()=>e($4(e(),{floor:l=>a(Math.floor(i(l))),ceil:l=>a(Math.ceil(i(l)))})),t}function sg(){const n=Ij(np()).domain([1,10]);return n.copy=()=>dd(n,sg()).base(n.base()),xs.apply(n,arguments),n}function TT(n){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/n))}}function CT(n){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*n}}function Rj(n){var t=1,e=n(TT(t),CT(t));return e.constant=function(r){return arguments.length?n(TT(t=+r),CT(t)):t},rp(e)}function q4(){var n=Rj(np());return n.copy=function(){return dd(n,q4()).constant(n.constant())},xs.apply(n,arguments)}function IT(n){return function(t){return t<0?-Math.pow(-t,n):Math.pow(t,n)}}function Dj(n){return n<0?-Math.sqrt(-n):Math.sqrt(n)}function Oj(n){return n<0?-n*n:n*n}function Mj(n){var t=n(_i,_i),e=1;function r(){return e===1?n(_i,_i):e===.5?n(Dj,Oj):n(IT(e),IT(1/e))}return t.exponent=function(i){return arguments.length?(e=+i,r()):e},rp(t)}function q2(){var n=Mj(np());return n.copy=function(){return dd(n,q2()).exponent(n.exponent())},xs.apply(n,arguments),n}function Nj(){return q2.apply(null,arguments).exponent(.5)}function W4(){var n=[.5],t=[0,1],e,r=1;function i(a){return a!=null&&a<=a?t[k4(n,a,0,r)]:e}return i.domain=function(a){return arguments.length?(n=Array.from(a),r=Math.min(n.length,t.length-1),i):n.slice()},i.range=function(a){return arguments.length?(t=Array.from(a),r=Math.min(n.length,t.length-1),i):t.slice()},i.invertExtent=function(a){var s=t.indexOf(a);return[n[s-1],n[s]]},i.unknown=function(a){return arguments.length?(e=a,i):e},i.copy=function(){return W4().domain(n).range(t).unknown(e)},xs.apply(i,arguments)}const qv=new Date,Wv=new Date;function kn(n,t,e,r){function i(a){return n(a=arguments.length===0?new Date:new Date(+a)),a}return i.floor=a=>(n(a=new Date(+a)),a),i.ceil=a=>(n(a=new Date(a-1)),t(a,1),n(a),a),i.round=a=>{const s=i(a),l=i.ceil(a);return a-s<l-a?s:l},i.offset=(a,s)=>(t(a=new Date(+a),s==null?1:Math.floor(s)),a),i.range=(a,s,l)=>{const c=[];if(a=i.ceil(a),l=l==null?1:Math.floor(l),!(a<s)||!(l>0))return c;let f;do c.push(f=new Date(+a)),t(a,l),n(a);while(f<a&&a<s);return c},i.filter=a=>kn(s=>{if(s>=s)for(;n(s),!a(s);)s.setTime(s-1)},(s,l)=>{if(s>=s)if(l<0)for(;++l<=0;)for(;t(s,-1),!a(s););else for(;--l>=0;)for(;t(s,1),!a(s););}),e&&(i.count=(a,s)=>(qv.setTime(+a),Wv.setTime(+s),n(qv),n(Wv),Math.floor(e(qv,Wv))),i.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?i.filter(r?s=>r(s)%a===0:s=>i.count(0,s)%a===0):i)),i}const og=kn(()=>{},(n,t)=>{n.setTime(+n+t)},(n,t)=>t-n);og.every=n=>(n=Math.floor(n),!isFinite(n)||!(n>0)?null:n>1?kn(t=>{t.setTime(Math.floor(t/n)*n)},(t,e)=>{t.setTime(+t+e*n)},(t,e)=>(e-t)/n):og);og.range;const Ja=1e3,Ai=Ja*60,ts=Ai*60,hs=ts*24,W2=hs*7,RT=hs*30,Xv=hs*365,bl=kn(n=>{n.setTime(n-n.getMilliseconds())},(n,t)=>{n.setTime(+n+t*Ja)},(n,t)=>(t-n)/Ja,n=>n.getUTCSeconds());bl.range;const X2=kn(n=>{n.setTime(n-n.getMilliseconds()-n.getSeconds()*Ja)},(n,t)=>{n.setTime(+n+t*Ai)},(n,t)=>(t-n)/Ai,n=>n.getMinutes());X2.range;const Y2=kn(n=>{n.setUTCSeconds(0,0)},(n,t)=>{n.setTime(+n+t*Ai)},(n,t)=>(t-n)/Ai,n=>n.getUTCMinutes());Y2.range;const K2=kn(n=>{n.setTime(n-n.getMilliseconds()-n.getSeconds()*Ja-n.getMinutes()*Ai)},(n,t)=>{n.setTime(+n+t*ts)},(n,t)=>(t-n)/ts,n=>n.getHours());K2.range;const Z2=kn(n=>{n.setUTCMinutes(0,0,0)},(n,t)=>{n.setTime(+n+t*ts)},(n,t)=>(t-n)/ts,n=>n.getUTCHours());Z2.range;const gd=kn(n=>n.setHours(0,0,0,0),(n,t)=>n.setDate(n.getDate()+t),(n,t)=>(t-n-(t.getTimezoneOffset()-n.getTimezoneOffset())*Ai)/hs,n=>n.getDate()-1);gd.range;const ip=kn(n=>{n.setUTCHours(0,0,0,0)},(n,t)=>{n.setUTCDate(n.getUTCDate()+t)},(n,t)=>(t-n)/hs,n=>n.getUTCDate()-1);ip.range;const X4=kn(n=>{n.setUTCHours(0,0,0,0)},(n,t)=>{n.setUTCDate(n.getUTCDate()+t)},(n,t)=>(t-n)/hs,n=>Math.floor(n/hs));X4.range;function zl(n){return kn(t=>{t.setDate(t.getDate()-(t.getDay()+7-n)%7),t.setHours(0,0,0,0)},(t,e)=>{t.setDate(t.getDate()+e*7)},(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Ai)/W2)}const ap=zl(0),lg=zl(1),Pj=zl(2),kj=zl(3),Ac=zl(4),Lj=zl(5),Bj=zl(6);ap.range;lg.range;Pj.range;kj.range;Ac.range;Lj.range;Bj.range;function Hl(n){return kn(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-n)%7),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e*7)},(t,e)=>(e-t)/W2)}const sp=Hl(0),ug=Hl(1),Vj=Hl(2),Fj=Hl(3),wc=Hl(4),Uj=Hl(5),jj=Hl(6);sp.range;ug.range;Vj.range;Fj.range;wc.range;Uj.range;jj.range;const Q2=kn(n=>{n.setDate(1),n.setHours(0,0,0,0)},(n,t)=>{n.setMonth(n.getMonth()+t)},(n,t)=>t.getMonth()-n.getMonth()+(t.getFullYear()-n.getFullYear())*12,n=>n.getMonth());Q2.range;const J2=kn(n=>{n.setUTCDate(1),n.setUTCHours(0,0,0,0)},(n,t)=>{n.setUTCMonth(n.getUTCMonth()+t)},(n,t)=>t.getUTCMonth()-n.getUTCMonth()+(t.getUTCFullYear()-n.getUTCFullYear())*12,n=>n.getUTCMonth());J2.range;const ds=kn(n=>{n.setMonth(0,1),n.setHours(0,0,0,0)},(n,t)=>{n.setFullYear(n.getFullYear()+t)},(n,t)=>t.getFullYear()-n.getFullYear(),n=>n.getFullYear());ds.every=n=>!isFinite(n=Math.floor(n))||!(n>0)?null:kn(t=>{t.setFullYear(Math.floor(t.getFullYear()/n)*n),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e*n)});ds.range;const gs=kn(n=>{n.setUTCMonth(0,1),n.setUTCHours(0,0,0,0)},(n,t)=>{n.setUTCFullYear(n.getUTCFullYear()+t)},(n,t)=>t.getUTCFullYear()-n.getUTCFullYear(),n=>n.getUTCFullYear());gs.every=n=>!isFinite(n=Math.floor(n))||!(n>0)?null:kn(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/n)*n),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e*n)});gs.range;function Y4(n,t,e,r,i,a){const s=[[bl,1,Ja],[bl,5,5*Ja],[bl,15,15*Ja],[bl,30,30*Ja],[a,1,Ai],[a,5,5*Ai],[a,15,15*Ai],[a,30,30*Ai],[i,1,ts],[i,3,3*ts],[i,6,6*ts],[i,12,12*ts],[r,1,hs],[r,2,2*hs],[e,1,W2],[t,1,RT],[t,3,3*RT],[n,1,Xv]];function l(f,d,g){const m=d<f;m&&([f,d]=[d,f]);const v=g&&typeof g.range=="function"?g:c(f,d,g),_=v?v.range(f,+d+1):[];return m?_.reverse():_}function c(f,d,g){const m=Math.abs(d-f)/g,v=F2(([,,b])=>b).right(s,m);if(v===s.length)return n.every(rx(f/Xv,d/Xv,g));if(v===0)return og.every(Math.max(rx(f,d,g),1));const[_,w]=s[m/s[v-1][2]<s[v][2]/m?v-1:v];return _.every(w)}return[l,c]}const[zj,Hj]=Y4(gs,J2,sp,X4,Z2,Y2),[Gj,$j]=Y4(ds,Q2,ap,gd,K2,X2);function Yv(n){if(0<=n.y&&n.y<100){var t=new Date(-1,n.m,n.d,n.H,n.M,n.S,n.L);return t.setFullYear(n.y),t}return new Date(n.y,n.m,n.d,n.H,n.M,n.S,n.L)}function Kv(n){if(0<=n.y&&n.y<100){var t=new Date(Date.UTC(-1,n.m,n.d,n.H,n.M,n.S,n.L));return t.setUTCFullYear(n.y),t}return new Date(Date.UTC(n.y,n.m,n.d,n.H,n.M,n.S,n.L))}function nh(n,t,e){return{y:n,m:t,d:e,H:0,M:0,S:0,L:0}}function qj(n){var t=n.dateTime,e=n.date,r=n.time,i=n.periods,a=n.days,s=n.shortDays,l=n.months,c=n.shortMonths,f=rh(i),d=ih(i),g=rh(a),m=ih(a),v=rh(s),_=ih(s),w=rh(l),b=ih(l),S=rh(c),C=ih(c),I={a:Z,A:it,b:pt,B:_t,c:null,d:kT,e:kT,f:pz,g:Sz,G:Cz,H:hz,I:dz,j:gz,L:K4,m:mz,M:vz,p:Mt,q:It,Q:VT,s:FT,S:yz,u:xz,U:_z,V:Az,w:wz,W:Ez,x:null,X:null,y:bz,Y:Tz,Z:Iz,"%":BT},M={a:wt,A:zt,b:$t,B:ge,c:null,d:LT,e:LT,f:Mz,g:zz,G:Gz,H:Rz,I:Dz,j:Oz,L:Q4,m:Nz,M:Pz,p:Ie,q:Ye,Q:VT,s:FT,S:kz,u:Lz,U:Bz,V:Vz,w:Fz,W:Uz,x:null,X:null,y:jz,Y:Hz,Z:$z,"%":BT},N={a:L,A:F,b:U,B,c:rt,d:NT,e:NT,f:lz,g:MT,G:OT,H:PT,I:PT,j:iz,L:oz,m:rz,M:az,p:D,q:nz,Q:cz,s:fz,S:sz,u:Zj,U:Qj,V:Jj,w:Kj,W:tz,x:vt,X:q,y:MT,Y:OT,Z:ez,"%":uz};I.x=k(e,I),I.X=k(r,I),I.c=k(t,I),M.x=k(e,M),M.X=k(r,M),M.c=k(t,M);function k(ht,Et){return function(Rt){var mt=[],_e=-1,Nt=0,Pe=ht.length,Ke,Ge,ri;for(Rt instanceof Date||(Rt=new Date(+Rt));++_e<Pe;)ht.charCodeAt(_e)===37&&(mt.push(ht.slice(Nt,_e)),(Ge=DT[Ke=ht.charAt(++_e)])!=null?Ke=ht.charAt(++_e):Ge=Ke==="e"?" ":"0",(ri=Et[Ke])&&(Ke=ri(Rt,Ge)),mt.push(Ke),Nt=_e+1);return mt.push(ht.slice(Nt,_e)),mt.join("")}}function O(ht,Et){return function(Rt){var mt=nh(1900,void 0,1),_e=R(mt,ht,Rt+="",0),Nt,Pe;if(_e!=Rt.length)return null;if("Q"in mt)return new Date(mt.Q);if("s"in mt)return new Date(mt.s*1e3+("L"in mt?mt.L:0));if(Et&&!("Z"in mt)&&(mt.Z=0),"p"in mt&&(mt.H=mt.H%12+mt.p*12),mt.m===void 0&&(mt.m="q"in mt?mt.q:0),"V"in mt){if(mt.V<1||mt.V>53)return null;"w"in mt||(mt.w=1),"Z"in mt?(Nt=Kv(nh(mt.y,0,1)),Pe=Nt.getUTCDay(),Nt=Pe>4||Pe===0?ug.ceil(Nt):ug(Nt),Nt=ip.offset(Nt,(mt.V-1)*7),mt.y=Nt.getUTCFullYear(),mt.m=Nt.getUTCMonth(),mt.d=Nt.getUTCDate()+(mt.w+6)%7):(Nt=Yv(nh(mt.y,0,1)),Pe=Nt.getDay(),Nt=Pe>4||Pe===0?lg.ceil(Nt):lg(Nt),Nt=gd.offset(Nt,(mt.V-1)*7),mt.y=Nt.getFullYear(),mt.m=Nt.getMonth(),mt.d=Nt.getDate()+(mt.w+6)%7)}else("W"in mt||"U"in mt)&&("w"in mt||(mt.w="u"in mt?mt.u%7:"W"in mt?1:0),Pe="Z"in mt?Kv(nh(mt.y,0,1)).getUTCDay():Yv(nh(mt.y,0,1)).getDay(),mt.m=0,mt.d="W"in mt?(mt.w+6)%7+mt.W*7-(Pe+5)%7:mt.w+mt.U*7-(Pe+6)%7);return"Z"in mt?(mt.H+=mt.Z/100|0,mt.M+=mt.Z%100,Kv(mt)):Yv(mt)}}function R(ht,Et,Rt,mt){for(var _e=0,Nt=Et.length,Pe=Rt.length,Ke,Ge;_e<Nt;){if(mt>=Pe)return-1;if(Ke=Et.charCodeAt(_e++),Ke===37){if(Ke=Et.charAt(_e++),Ge=N[Ke in DT?Et.charAt(_e++):Ke],!Ge||(mt=Ge(ht,Rt,mt))<0)return-1}else if(Ke!=Rt.charCodeAt(mt++))return-1}return mt}function D(ht,Et,Rt){var mt=f.exec(Et.slice(Rt));return mt?(ht.p=d.get(mt[0].toLowerCase()),Rt+mt[0].length):-1}function L(ht,Et,Rt){var mt=v.exec(Et.slice(Rt));return mt?(ht.w=_.get(mt[0].toLowerCase()),Rt+mt[0].length):-1}function F(ht,Et,Rt){var mt=g.exec(Et.slice(Rt));return mt?(ht.w=m.get(mt[0].toLowerCase()),Rt+mt[0].length):-1}function U(ht,Et,Rt){var mt=S.exec(Et.slice(Rt));return mt?(ht.m=C.get(mt[0].toLowerCase()),Rt+mt[0].length):-1}function B(ht,Et,Rt){var mt=w.exec(Et.slice(Rt));return mt?(ht.m=b.get(mt[0].toLowerCase()),Rt+mt[0].length):-1}function rt(ht,Et,Rt){return R(ht,t,Et,Rt)}function vt(ht,Et,Rt){return R(ht,e,Et,Rt)}function q(ht,Et,Rt){return R(ht,r,Et,Rt)}function Z(ht){return s[ht.getDay()]}function it(ht){return a[ht.getDay()]}function pt(ht){return c[ht.getMonth()]}function _t(ht){return l[ht.getMonth()]}function Mt(ht){return i[+(ht.getHours()>=12)]}function It(ht){return 1+~~(ht.getMonth()/3)}function wt(ht){return s[ht.getUTCDay()]}function zt(ht){return a[ht.getUTCDay()]}function $t(ht){return c[ht.getUTCMonth()]}function ge(ht){return l[ht.getUTCMonth()]}function Ie(ht){return i[+(ht.getUTCHours()>=12)]}function Ye(ht){return 1+~~(ht.getUTCMonth()/3)}return{format:function(ht){var Et=k(ht+="",I);return Et.toString=function(){return ht},Et},parse:function(ht){var Et=O(ht+="",!1);return Et.toString=function(){return ht},Et},utcFormat:function(ht){var Et=k(ht+="",M);return Et.toString=function(){return ht},Et},utcParse:function(ht){var Et=O(ht+="",!0);return Et.toString=function(){return ht},Et}}}var DT={"-":"",_:" ",0:"0"},qn=/^\s*\d+/,Wj=/^%/,Xj=/[\\^$*+?|[\]().{}]/g;function de(n,t,e){var r=n<0?"-":"",i=(r?-n:n)+"",a=i.length;return r+(a<e?new Array(e-a+1).join(t)+i:i)}function Yj(n){return n.replace(Xj,"\\$&")}function rh(n){return new RegExp("^(?:"+n.map(Yj).join("|")+")","i")}function ih(n){return new Map(n.map((t,e)=>[t.toLowerCase(),e]))}function Kj(n,t,e){var r=qn.exec(t.slice(e,e+1));return r?(n.w=+r[0],e+r[0].length):-1}function Zj(n,t,e){var r=qn.exec(t.slice(e,e+1));return r?(n.u=+r[0],e+r[0].length):-1}function Qj(n,t,e){var r=qn.exec(t.slice(e,e+2));return r?(n.U=+r[0],e+r[0].length):-1}function Jj(n,t,e){var r=qn.exec(t.slice(e,e+2));return r?(n.V=+r[0],e+r[0].length):-1}function tz(n,t,e){var r=qn.exec(t.slice(e,e+2));return r?(n.W=+r[0],e+r[0].length):-1}function OT(n,t,e){var r=qn.exec(t.slice(e,e+4));return r?(n.y=+r[0],e+r[0].length):-1}function MT(n,t,e){var r=qn.exec(t.slice(e,e+2));return r?(n.y=+r[0]+(+r[0]>68?1900:2e3),e+r[0].length):-1}function ez(n,t,e){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(e,e+6));return r?(n.Z=r[1]?0:-(r[2]+(r[3]||"00")),e+r[0].length):-1}function nz(n,t,e){var r=qn.exec(t.slice(e,e+1));return r?(n.q=r[0]*3-3,e+r[0].length):-1}function rz(n,t,e){var r=qn.exec(t.slice(e,e+2));return r?(n.m=r[0]-1,e+r[0].length):-1}function NT(n,t,e){var r=qn.exec(t.slice(e,e+2));return r?(n.d=+r[0],e+r[0].length):-1}function iz(n,t,e){var r=qn.exec(t.slice(e,e+3));return r?(n.m=0,n.d=+r[0],e+r[0].length):-1}function PT(n,t,e){var r=qn.exec(t.slice(e,e+2));return r?(n.H=+r[0],e+r[0].length):-1}function az(n,t,e){var r=qn.exec(t.slice(e,e+2));return r?(n.M=+r[0],e+r[0].length):-1}function sz(n,t,e){var r=qn.exec(t.slice(e,e+2));return r?(n.S=+r[0],e+r[0].length):-1}function oz(n,t,e){var r=qn.exec(t.slice(e,e+3));return r?(n.L=+r[0],e+r[0].length):-1}function lz(n,t,e){var r=qn.exec(t.slice(e,e+6));return r?(n.L=Math.floor(r[0]/1e3),e+r[0].length):-1}function uz(n,t,e){var r=Wj.exec(t.slice(e,e+1));return r?e+r[0].length:-1}function cz(n,t,e){var r=qn.exec(t.slice(e));return r?(n.Q=+r[0],e+r[0].length):-1}function fz(n,t,e){var r=qn.exec(t.slice(e));return r?(n.s=+r[0],e+r[0].length):-1}function kT(n,t){return de(n.getDate(),t,2)}function hz(n,t){return de(n.getHours(),t,2)}function dz(n,t){return de(n.getHours()%12||12,t,2)}function gz(n,t){return de(1+gd.count(ds(n),n),t,3)}function K4(n,t){return de(n.getMilliseconds(),t,3)}function pz(n,t){return K4(n,t)+"000"}function mz(n,t){return de(n.getMonth()+1,t,2)}function vz(n,t){return de(n.getMinutes(),t,2)}function yz(n,t){return de(n.getSeconds(),t,2)}function xz(n){var t=n.getDay();return t===0?7:t}function _z(n,t){return de(ap.count(ds(n)-1,n),t,2)}function Z4(n){var t=n.getDay();return t>=4||t===0?Ac(n):Ac.ceil(n)}function Az(n,t){return n=Z4(n),de(Ac.count(ds(n),n)+(ds(n).getDay()===4),t,2)}function wz(n){return n.getDay()}function Ez(n,t){return de(lg.count(ds(n)-1,n),t,2)}function bz(n,t){return de(n.getFullYear()%100,t,2)}function Sz(n,t){return n=Z4(n),de(n.getFullYear()%100,t,2)}function Tz(n,t){return de(n.getFullYear()%1e4,t,4)}function Cz(n,t){var e=n.getDay();return n=e>=4||e===0?Ac(n):Ac.ceil(n),de(n.getFullYear()%1e4,t,4)}function Iz(n){var t=n.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+de(t/60|0,"0",2)+de(t%60,"0",2)}function LT(n,t){return de(n.getUTCDate(),t,2)}function Rz(n,t){return de(n.getUTCHours(),t,2)}function Dz(n,t){return de(n.getUTCHours()%12||12,t,2)}function Oz(n,t){return de(1+ip.count(gs(n),n),t,3)}function Q4(n,t){return de(n.getUTCMilliseconds(),t,3)}function Mz(n,t){return Q4(n,t)+"000"}function Nz(n,t){return de(n.getUTCMonth()+1,t,2)}function Pz(n,t){return de(n.getUTCMinutes(),t,2)}function kz(n,t){return de(n.getUTCSeconds(),t,2)}function Lz(n){var t=n.getUTCDay();return t===0?7:t}function Bz(n,t){return de(sp.count(gs(n)-1,n),t,2)}function J4(n){var t=n.getUTCDay();return t>=4||t===0?wc(n):wc.ceil(n)}function Vz(n,t){return n=J4(n),de(wc.count(gs(n),n)+(gs(n).getUTCDay()===4),t,2)}function Fz(n){return n.getUTCDay()}function Uz(n,t){return de(ug.count(gs(n)-1,n),t,2)}function jz(n,t){return de(n.getUTCFullYear()%100,t,2)}function zz(n,t){return n=J4(n),de(n.getUTCFullYear()%100,t,2)}function Hz(n,t){return de(n.getUTCFullYear()%1e4,t,4)}function Gz(n,t){var e=n.getUTCDay();return n=e>=4||e===0?wc(n):wc.ceil(n),de(n.getUTCFullYear()%1e4,t,4)}function $z(){return"+0000"}function BT(){return"%"}function VT(n){return+n}function FT(n){return Math.floor(+n/1e3)}var Fu,tR,eR;qz({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function qz(n){return Fu=qj(n),tR=Fu.format,Fu.parse,eR=Fu.utcFormat,Fu.utcParse,Fu}function Wz(n){return new Date(n)}function Xz(n){return n instanceof Date?+n:+new Date(+n)}function t_(n,t,e,r,i,a,s,l,c,f){var d=z4(),g=d.invert,m=d.domain,v=f(".%L"),_=f(":%S"),w=f("%I:%M"),b=f("%I %p"),S=f("%a %d"),C=f("%b %d"),I=f("%B"),M=f("%Y");function N(k){return(c(k)<k?v:l(k)<k?_:s(k)<k?w:a(k)<k?b:r(k)<k?i(k)<k?S:C:e(k)<k?I:M)(k)}return d.invert=function(k){return new Date(g(k))},d.domain=function(k){return arguments.length?m(Array.from(k,Xz)):m().map(Wz)},d.ticks=function(k){var O=m();return n(O[0],O[O.length-1],k??10)},d.tickFormat=function(k,O){return O==null?N:f(O)},d.nice=function(k){var O=m();return(!k||typeof k.range!="function")&&(k=t(O[0],O[O.length-1],k??10)),k?m($4(O,k)):d},d.copy=function(){return dd(d,t_(n,t,e,r,i,a,s,l,c,f))},d}function nR(){return xs.apply(t_(Gj,$j,ds,Q2,ap,gd,K2,X2,bl,tR).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function Yz(){return xs.apply(t_(zj,Hj,gs,J2,sp,ip,Z2,Y2,bl,eR).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Kz(){var n=0,t=1,e,r,i,a,s=_i,l=!1,c;function f(g){return g==null||isNaN(g=+g)?c:s(i===0?.5:(g=(a(g)-e)*i,l?Math.max(0,Math.min(1,g)):g))}f.domain=function(g){return arguments.length?([n,t]=g,e=a(n=+n),r=a(t=+t),i=e===r?0:1/(r-e),f):[n,t]},f.clamp=function(g){return arguments.length?(l=!!g,f):l},f.interpolator=function(g){return arguments.length?(s=g,f):s};function d(g){return function(m){var v,_;return arguments.length?([v,_]=m,s=g(v,_),f):[s(0),s(1)]}}return f.range=d(ep),f.rangeRound=d(j4),f.unknown=function(g){return arguments.length?(c=g,f):c},function(g){return a=g,e=g(n),r=g(t),i=e===r?0:1/(r-e),f}}function Zz(n,t){return t.domain(n.domain()).interpolator(n.interpolator()).clamp(n.clamp()).unknown(n.unknown())}function rR(){var n=rp(Kz()(_i));return n.copy=function(){return Zz(n,rR())},BU.apply(n,arguments)}function Qz(n,t){return function(r,i){return i.location==="tick"?i.scale.tickFormat(n)(r):i.location==="zoom-slider-tooltip"?t.tickFormat(2)(r):`${r}`}}function cg(n){return n.scaleType==="band"}function e_(n){return n.scaleType==="point"}function Jz(n){return n.scaleType==="symlog"}function tH(n){return n.type==="piecewise"?W4(n.thresholds,n.colors):rR([n.min??0,n.max??100],n.color)}function Ec(n){return n.values?ng(n.values,n.colors).unknown(n.unknownColor??null):ng(n.colors.map((t,e)=>e),n.colors).unknown(n.unknownColor??null)}function Rl(n){return n.type==="ordinal"?Ec(n):tH(n)}function iR(n){const{tickMaxStep:t,tickMinStep:e,tickNumber:r,range:i,domain:a}=n,s=e===void 0?999:Math.floor(Math.abs(a[1]-a[0])/e),l=t===void 0?2:Math.ceil(Math.abs(a[1]-a[0])/t),c=r??Math.floor(Math.abs(i[1]-i[0])/50);return Math.min(s,Math.max(l,c))}function aR(n,t){return t[1]-t[0]===0?1:n/((t[1]-t[0])/100)}function eH(n,t){const e=q4(n,t),r=e.ticks,{negativeScale:i,linearScale:a,positiveScale:s}=nH(e);return e.ticks=l=>{const c=r(l),f=e.constant();let d=0,g=0,m=0;c.forEach(_=>{_>-f&&_<f&&(g+=1),_<=-f&&(d+=1),_>=f&&(m+=1)});const v=[];if(d>0&&v.push(...i.ticks(d)),g>0){const _=a.ticks(g);v.at(-1)===_[0]?v.push(..._.slice(1)):v.push(..._)}if(m>0){const _=s.ticks(m);v.at(-1)===_[0]?v.push(..._.slice(1)):v.push(..._)}return v},e.tickFormat=(l=10,c)=>{const f=e.constant(),[d,g]=e.domain(),m=g-d,v=i.domain(),_=v[1]-v[0],b=(m===0?0:_/m)*l,S=a.domain(),C=S[1]-S[0],M=(m===0?0:C/m)*l,N=s.domain(),k=N[1]-N[0],R=(m===0?0:k/m)*l,D=i.tickFormat(b,c),L=a.tickFormat(M,c),F=s.tickFormat(R,c);return U=>(U.valueOf()<=-f?D:U.valueOf()>=f?F:L)(U)},e}function nH(n){const t=n.constant(),e=n.domain(),r=[e[0],Math.min(e[1],-t)],i=sg(r,n.range()),a=[Math.max(e[0],-t),Math.min(e[1],t)],s=$2(a,n.range()),l=[Math.max(e[0],t),e[1]],c=sg(l,n.range());return{negativeScale:i,linearScale:s,positiveScale:c}}function fg(n,t,e){switch(n){case"log":return sg(t,e);case"pow":return q2(t,e);case"sqrt":return Nj(t,e);case"time":return nR(t,e);case"utc":return Yz(t,e);case"symlog":return eH(t,e);default:return $2(t,e)}}const hg=n=>(n==null?void 0:n[0])instanceof Date;function dg(n,t){const e=nR(n.data,t);return(r,{location:i})=>i==="tick"?e.tickFormat(n.tickNumber)(r):`${r.toLocaleString()}`}const Zv=(n,t)=>{const e=n[1]-n[0],r=t[1]-t[0],i=n[0]-t[0]*e/r,a=n[1]+(100-t[1])*e/r;return[i,a]};let UT,jT;class rH{constructor(){if(this.types=new Set,UT)throw new Error("You can only create one instance!");UT=this.types}addType(t){this.types.add(t)}getTypes(){return this.types}}class iH{constructor(){if(this.types=new Set,jT)throw new Error("You can only create one instance!");jT=this.types}addType(t){this.types.add(t)}getTypes(){return this.types}}const op=new rH;op.addType("bar");op.addType("line");op.addType("scatter");const sR=new iH;sR.addType("radar");function n_(n){return op.getTypes().has(n)}const aH=(n,t,e,r,i,a,s,l)=>{var _;const c=r==="x"?i[t].xExtremumGetter:i[t].yExtremumGetter,f=((_=s[t])==null?void 0:_.series)??{},[d,g]=(c==null?void 0:c({series:f,axis:e,axisIndex:a,isDefaultAxis:a===0,getFilters:l}))??[1/0,-1/0],[m,v]=n;return[Math.min(d,m),Math.max(g,v)]},oR=(n,t,e,r,i,a)=>{const l=Object.keys(e).filter(n_).reduce((c,f)=>aH(c,f,n,t,e,r,i,a),[1/0,-1/0]);return Number.isNaN(l[0])||Number.isNaN(l[1])?[1/0,-1/0]:l},sH=(n,t,e,r)=>{const i=new Set;return Object.keys(t).filter(n_).forEach(s=>{var f,d,g;const l=((f=e[s])==null?void 0:f.series)??{},c=(g=(d=t[s]).axisTooltipGetter)==null?void 0:g.call(d,l);c!==void 0&&c.forEach(({axisId:m,direction:v})=>{v===n&&i.add(m??r)})}),i},oH=(n,t,e,r)=>{var i;if(n.domainLimit!==void 0)return n.domainLimit;if(t==="x")for(const a of((i=r.line)==null?void 0:i.seriesOrder)??[]){const s=r.line.series[a];if(s.xAxisId===n.id||s.xAxisId===void 0&&e===0)return"strict"}return"nice"};function lH(n,t,e){const r=t==="x"?[n.left,n.left+n.width]:[n.top+n.height,n.top];return e.reverse?[r[1],r[0]]:r}const uH=.2,cH=.1;function lR({drawingArea:n,formattedSeries:t,axis:e,seriesConfig:r,axisDirection:i,zoomMap:a,zoomOptions:s,getFilters:l,preferStrictDomainInLineCharts:c}){if(e===void 0)return{axis:{},axisIds:[]};const f=sH(i,r,t,e[0].id),d={};return e.forEach((g,m)=>{const v=g,_=s==null?void 0:s[v.id],w=a==null?void 0:a.get(v.id),b=w?[w.start,w.end]:[0,100],S=lH(n,i,v),[C,I]=oR(v,i,r,m,t,w===void 0&&!_?l:void 0),M=!v.ignoreTooltip&&f.has(v.id),N=v.data??[];if(cg(v)){const Z=v.categoryGapRatio??uH,it=v.barGapRatio??cH,pt=i==="y"?[S[1],S[0]]:S,_t=Zv(pt,b);if(d[v.id]=W({offset:0,height:0,categoryGapRatio:Z,barGapRatio:it,triggerTooltip:M},v,{data:N,scale:tp(v.data,_t).paddingInner(Z).paddingOuter(Z/2),tickNumber:v.data.length,colorScale:v.colorMap&&(v.colorMap.type==="ordinal"?Ec(W({values:v.data},v.colorMap)):Rl(v.colorMap))}),hg(v.data)){const Mt=dg(v,pt);d[v.id].valueFormatter=v.valueFormatter??Mt}}if(e_(v)){const Z=i==="y"?[...S].reverse():S,it=Zv(Z,b);if(d[v.id]=W({offset:0,height:0,triggerTooltip:M},v,{data:N,scale:B4(v.data,it),tickNumber:v.data.length,colorScale:v.colorMap&&(v.colorMap.type==="ordinal"?Ec(W({values:v.data},v.colorMap)):Rl(v.colorMap))}),hg(v.data)){const pt=dg(v,Z);d[v.id].valueFormatter=v.valueFormatter??pt}}if(v.scaleType==="band"||v.scaleType==="point")return;const k=v.scaleType??"linear",O=c?oH(v,i,m,t):v.domainLimit??"nice",R=[v.min??C,v.max??I];if(typeof O=="function"){const{min:Z,max:it}=O(C,I);R[0]=Z,R[1]=it}const D=iR(W({},v,{range:S,domain:R})),L=aR(D,b),F=Zv(S,b),U=fg(k,R,F);Jz(v)&&v.constant!=null&&U.constant(v.constant);const B=O==="nice"?U.nice(D):U,[rt,vt]=B.domain(),q=[v.min??rt,v.max??vt];d[v.id]=W({offset:0,height:0,triggerTooltip:M},v,{data:N,scaleType:k,scale:B.domain(q),tickNumber:L,colorScale:v.colorMap&&Rl(v.colorMap),valueFormatter:v.valueFormatter??Qz(L,fg(k,S.map(Z=>U.invert(Z)),S))})}),{axis:d,axisIds:e.map(({id:g})=>g)}}function fH(n){return n!=null}function uR({zoomMap:n,zoomOptions:t,seriesConfig:e,formattedSeries:r,direction:i}){return(a,s)=>{const l=t[a.id];if(!l||l.filterMode!=="discard")return null;const c=n==null?void 0:n.get(a.id);if(c===void 0||c.start<=0&&c.end>=100)return null;const f=a.scaleType;return f==="point"||f==="band"?hH(a.data,c.start,c.end,i):dH(f,oR(a,i,e,s,r),c.start,c.end,i,a.data)}}function hH(n,t,e,r){const i=(n==null?void 0:n.length)??0,a=Math.floor(t*i/100),s=Math.ceil(e*i/100);return function(c,f){return(c[r]??(n==null?void 0:n[f]))==null?!0:f>=a&&f<s}}function dH(n,t,e,r,i,a){let s,l;[s,l]=fg(n??"linear",t,[0,100]).nice().domain(),s=s instanceof Date?s.getTime():s,l=l instanceof Date?l.getTime():l;const c=s+e*(l-s)/100,f=s+r*(l-s)/100;return function(g,m){const v=g[i]??(a==null?void 0:a[m]);return v==null?!0:v>=c&&v<=f}}const gH=n=>({currentAxisId:t,seriesXAxisId:e,seriesYAxisId:r,isDefaultAxis:i})=>(a,s)=>{var f,d;return!(t===e?r:e)||i?((d=(f=Object.values(n??{}))[0])==null?void 0:d.call(f,a,s))??!0:[r,e].filter(g=>g!==t).map(g=>n[g??""]).filter(fH).every(g=>g(a,s))},zT=n=>(t=[])=>t.reduce((e,r)=>{const{zoom:i,id:a}=r,s=V2(i,a,n);return s&&(e[a]=s),e},{}),pH=n=>{const t=new Map;return n.forEach(e=>{t.set(e.axisId,e)}),t},cR=n=>n.zoom,fR=St([cR],n=>n==null?void 0:n.isInteracting),lp=St([cR],n=>(n==null?void 0:n.zoomData)&&pH(n==null?void 0:n.zoomData)),pd=St([jl,Bc],(n,t)=>W({},zT("x")(n),zT("y")(t)));St([pd,(n,t)=>t],(n,t)=>n[t]);const mH=St([lp,pd,ys,ji],(n,t,e,r)=>n&&t&&uR({zoomMap:n,zoomOptions:t,seriesConfig:e,formattedSeries:r,direction:"x"})),vH=St([lp,pd,ys,ji],(n,t,e,r)=>n&&t&&uR({zoomMap:n,zoomOptions:t,seriesConfig:e,formattedSeries:r,direction:"y"})),hR=St([mH,vH,jl,Bc],(n,t,e,r)=>{if(n===void 0||t===void 0)return;const i=e==null?void 0:e.reduce((s,l,c)=>{const f=n(l,c);return f!==null&&(s[l.id]=f),s},{}),a=r==null?void 0:r.reduce((s,l,c)=>{const f=t(l,c);return f!==null&&(s[l.id]=f),s},{});if(!(Object.keys(i??{}).length===0&&Object.keys(a??{}).length===0))return gH(W({},i,a))}),ei=St([jl,vs,ji,ys,lp,pd,hR,b4],(n,t,e,r,i,a,s,l)=>lR({drawingArea:t,formattedSeries:e,axis:n,seriesConfig:r,axisDirection:"x",zoomMap:i,zoomOptions:a,getFilters:s,preferStrictDomainInLineCharts:l})),ni=St([Bc,vs,ji,ys,lp,pd,hR,b4],(n,t,e,r,i,a,s,l)=>lR({drawingArea:t,formattedSeries:e,axis:n,seriesConfig:r,axisDirection:"y",zoomMap:i,zoomOptions:a,getFilters:s,preferStrictDomainInLineCharts:l}));St([ei,ni,(n,t)=>t],(n,t,e)=>(n==null?void 0:n.axis[e])??(t==null?void 0:t.axis[e]));St([jl,Bc,(n,t)=>t],(n,t,e)=>{const r=(n==null?void 0:n.find(i=>i.id===e))??(t==null?void 0:t.find(i=>i.id===e))??null;if(r)return r});function zi(n){return n.bandwidth!==void 0}function Uu(n){return n instanceof Date?n.getTime():n}function bc(n,t){const{scale:e,data:r,reverse:i}=n;if(!zi(e)){const s=e.invert(t);if(r===void 0)return-1;const l=Uu(s);return r==null?void 0:r.findIndex((f,d)=>{const g=Uu(f);return g>l&&(d===0||Math.abs(l-g)<=Math.abs(l-Uu(r[d-1])))||g<=l&&(d===r.length-1||Math.abs(Uu(s)-g)<Math.abs(Uu(s)-Uu(r[d+1])))})}const a=e.bandwidth()===0?Math.floor((t-Math.min(...e.range())+e.step()/2)/e.step()):Math.floor((t-Math.min(...e.range()))/e.step());return a<0||a>=r.length?-1:i?r.length-1-a:a}function HT(n,t,e){const{scale:r,data:i}=n;if(!zi(r)){const a=r.invert(t);return e<0?a:i[e]}return e<0||e>=i.length?null:i[e]}function ox(n,t){const e=n.createSVGPoint();return e.x=t.clientX,e.y=t.clientY,e.matrixTransform(n.getScreenCTM().inverse())}const yH=Object.is;function dR(n,t){if(n===t)return!0;if(!(n instanceof Object)||!(t instanceof Object))return!1;let e=0,r=0;for(const i in n)if(e+=1,!yH(n[i],t[i])||!(i in t))return!1;for(const i in t)r+=1;return e===r}const Fc=({store:n})=>{const t=oo(function(){n.update(s=>W({},s,{interaction:{pointer:null,item:null}}))}),e=oo(function(s){n.update(l=>{const c=l.interaction.item;return s?c===null||Object.keys(s).some(f=>s[f]!==c[f])?l:W({},l,{interaction:W({},l.interaction,{item:null})}):c===null?l:W({},l,{interaction:W({},l.interaction,{item:null})})})}),r=oo(function(s){n.update(l=>dR(l.interaction.item,s)?l:W({},l,{interaction:W({},l.interaction,{item:s})}))}),i=oo(function(s){n.update(l=>W({},l,{interaction:W({},l.interaction,{pointer:s})}))});return{instance:{cleanInteraction:t,setItemInteraction:r,removeItemInteraction:e,setPointerCoordinate:i}}};Fc.getInitialState=()=>({interaction:{item:null,pointer:null}});Fc.params={};const r_=n=>n.interaction,xH=St([r_],n=>n!==void 0),gR=St([r_],n=>(n==null?void 0:n.item)??null),pR=St([r_],n=>(n==null?void 0:n.pointer)??null),md=St([pR],n=>n&&n.x),vd=St([pR],n=>n&&n.y),_H=St([gR],n=>n!==null);function hc(n,t){if(n===t)return!0;if(n&&t&&typeof n=="object"&&typeof t=="object"){if(n.constructor!==t.constructor)return!1;if(Array.isArray(n)){const i=n.length;if(i!==t.length)return!1;for(let a=0;a<i;a+=1)if(!hc(n[a],t[a]))return!1;return!0}if(n instanceof Map&&t instanceof Map){if(n.size!==t.size)return!1;const i=Array.from(n.entries());for(let a=0;a<i.length;a+=1)if(!t.has(i[a][0]))return!1;for(let a=0;a<i.length;a+=1){const s=i[a];if(!hc(s[1],t.get(s[0])))return!1}return!0}if(n instanceof Set&&t instanceof Set){if(n.size!==t.size)return!1;const i=Array.from(n.entries());for(let a=0;a<i.length;a+=1)if(!t.has(i[a][0]))return!1;return!0}if(ArrayBuffer.isView(n)&&ArrayBuffer.isView(t)){const i=n.length;if(i!==t.length)return!1;for(let a=0;a<i;a+=1)if(n[a]!==t[a])return!1;return!0}if(n.constructor===RegExp)return n.source===t.source&&n.flags===t.flags;if(n.valueOf!==Object.prototype.valueOf)return n.valueOf()===t.valueOf();if(n.toString!==Object.prototype.toString)return n.toString()===t.toString();const e=Object.keys(n),r=e.length;if(r!==Object.keys(t).length)return!1;for(let i=0;i<r;i+=1)if(!Object.prototype.hasOwnProperty.call(t,e[i]))return!1;for(let i=0;i<r;i+=1){const a=e[i];if(!hc(n[a],t[a]))return!1}return!0}return n!==n&&t!==t}const up=(n,t)=>t;function lx(n,t,e=t.axisIds[0]){return Array.isArray(e)?e.map(r=>bc(t.axis[r],n)):bc(t.axis[e],n)}const mR=(n,t,e)=>{if(n===null)return null;const r=lx(n,t,e);return r===-1?null:r},i_=St([md,ei,up],mR),a_=St([vd,ni,up],mR),AH=St([md,vd,ei,ni],(n,t,e,r)=>[...n===null?[]:e.axisIds.map(i=>({axisId:i,dataIndex:lx(n,e,i)})),...t===null?[]:r.axisIds.map(i=>({axisId:i,dataIndex:lx(t,r,i)}))].filter(i=>i.dataIndex!==null&&i.dataIndex>=0));function vR(n,t,e,r=t.axisIds[0]){return Array.isArray(r)?r.map((i,a)=>HT(t.axis[i],n,e[a])):HT(t.axis[r],n,e)}const wH=St([md,ei,i_,up],(n,t,e,r)=>n===null||e===null||t.axisIds.length===0?null:vR(n,t,e,r)),EH=St([vd,ni,a_,up],(n,t,e,r)=>n===null||e===null||t.axisIds.length===0?null:vR(n,t,e,r)),yR=St([md,ei],(n,t)=>n===null?[]:t.axisIds.filter(e=>t.axis[e].triggerTooltip).map(e=>({axisId:e,dataIndex:bc(t.axis[e],n)})).filter(({dataIndex:e})=>e>=0),{memoizeOptions:{resultEqualityCheck:hc}}),xR=St([vd,ni],(n,t)=>n===null?[]:t.axisIds.filter(e=>t.axis[e].triggerTooltip).map(e=>({axisId:e,dataIndex:bc(t.axis[e],n)})).filter(({dataIndex:e})=>e>=0),{memoizeOptions:{resultEqualityCheck:hc}}),bH=St([yR,xR],(n,t)=>n.length>0||t.length>0),SH=()=>{};function TH(n,t,e,r){const i=yC(CH,{store:n,selector:t,skip:r}).current;i.effect=e,H.useEffect(i.onMount(r),[r])}function CH(n){const{store:t,selector:e,skip:r}=n;let i=!1,a;const s=()=>{l.dispose??(l.dispose=t.subscribe(c=>{const f=e(c);l.effect(a,f),a=f}))},l={effect:SH,dispose:null,onMount:c=>()=>{if(!c)return i||(i=!0,a=e(t.value)),s(),()=>{var f;(f=l.dispose)==null||f.call(l),l.dispose=null}}};return r||(i=!0,a=e(t.value),s()),l}const Uc=({params:n,store:t,seriesConfig:e,svgRef:r,instance:i})=>{const{xAxis:a,yAxis:s,dataset:l,onHighlightedAxisChange:c}=n,f=jt(t,vs),d=jt(t,ji),g=jt(t,xH),{axis:m,axisIds:v}=jt(t,ei),{axis:_,axisIds:w}=jt(t,ni);D4({controlled:n.highlightedAxis}),Vi(()=>{n.highlightedAxis!==void 0&&t.update(I=>I.controlledCartesianAxisHighlight===n.highlightedAxis?I:W({},I,{controlledCartesianAxisHighlight:n.highlightedAxis}))},[t,n.highlightedAxis]);const b=H.useRef(!0);H.useEffect(()=>{if(b.current){b.current=!1;return}t.update(I=>W({},I,{cartesianAxis:W({},I.cartesianAxis,{x:N4(a,l),y:P4(s,l)})}))},[e,f,a,s,l,t]);const S=v[0],C=w[0];return TH(t,AH,(I,M)=>{if(!Object.is(I,M)){if(I.length!==M.length){c(M);return}I!=null&&I.some(({axisId:N,dataIndex:k},O)=>M[O].axisId!==N||M[O].dataIndex!==k)&&c(M)}},!c),H.useEffect(()=>{const I=r.current;if(!g||!I||n.disableAxisListener)return()=>{};const M=i.addInteractionListener("moveEnd",F=>{var U;F.detail.activeGestures.pan||(U=i.cleanInteraction)==null||U.call(i)}),N=i.addInteractionListener("panEnd",F=>{var U;F.detail.activeGestures.move||(U=i.cleanInteraction)==null||U.call(i)}),k=i.addInteractionListener("quickPressEnd",F=>{var U;!F.detail.activeGestures.move&&!F.detail.activeGestures.pan&&((U=i.cleanInteraction)==null||U.call(i))}),O=F=>{var vt,q;const U=F.detail.srcEvent,B=F.detail.target,rt=ox(I,U);if(F.detail.srcEvent.buttons>=1&&(B!=null&&B.hasPointerCapture(F.detail.srcEvent.pointerId))&&!(B!=null&&B.closest("[data-charts-zoom-slider]"))&&(B==null||B.releasePointerCapture(F.detail.srcEvent.pointerId)),!i.isPointInside(rt.x,rt.y,B)){(vt=i.cleanInteraction)==null||vt.call(i);return}(q=i.setPointerCoordinate)==null||q.call(i,rt)},R=i.addInteractionListener("move",O),D=i.addInteractionListener("pan",O),L=i.addInteractionListener("quickPress",O);return()=>{R.cleanup(),M.cleanup(),D.cleanup(),N.cleanup(),L.cleanup(),k.cleanup()}},[r,t,m,S,_,C,i,n.disableAxisListener,g]),H.useEffect(()=>{const I=r.current,M=n.onAxisClick;if(I===null||!M)return()=>{};const N=i.addInteractionListener("tap",k=>{let O=null,R=!1;const D=ox(I,k.detail.srcEvent),L=bc(m[S],D.x);R=L!==-1,O=R?L:bc(_[C],D.y);const F=R?v[0]:w[0];if(O==null||O===-1)return;const U=(R?m:_)[F].data[O],B={};Object.keys(d).filter(rt=>["bar","line"].includes(rt)).forEach(rt=>{var vt;(vt=d[rt])==null||vt.seriesOrder.forEach(q=>{const Z=d[rt].series[q],it=Z.xAxisId,pt=Z.yAxisId,_t=R?it:pt;(_t===void 0||_t===F)&&(B[q]=Z.data[O])})}),M(k.detail.srcEvent,{dataIndex:O,axisValue:U,seriesValues:B})});return()=>{N.cleanup()}},[n.onAxisClick,d,r,m,v,_,w,S,C,i]),{}};Uc.params={xAxis:!0,yAxis:!0,dataset:!0,onAxisClick:!0,disableAxisListener:!0,onHighlightedAxisChange:!0,highlightedAxis:!0};Uc.getDefaultizedParams=({params:n})=>W({},n,{colors:n.colors??S4,theme:n.theme??"light",defaultizedXAxis:N4(n.xAxis,n.dataset),defaultizedYAxis:P4(n.yAxis,n.dataset)});Uc.getInitialState=n=>W({cartesianAxis:{x:n.defaultizedXAxis,y:n.defaultizedYAxis}},n.highlightedAxis===void 0?{}:{controlledCartesianAxisHighlight:n.highlightedAxis});const jc=n=>n.controlledCartesianAxisHighlight,_R=(n,t,e)=>e!==void 0?e.filter(r=>t.axis[r.axisId]!==void 0).map(r=>r):n===null?[]:[{axisId:t.axisIds[0],dataIndex:n}];St([i_,ei,jc],_R);St([a_,ni,jc],_R);const AR=(n,t,e,r)=>r!==void 0?r.map(i=>{var a,s;return W({},i,{value:(s=(a=e.axis[i.axisId])==null?void 0:a.data)==null?void 0:s[i.dataIndex]})}).filter(({value:i})=>i!==void 0):t===null?[]:[{axisId:e.axisIds[0],dataIndex:n,value:t}],IH=St([i_,wH,ei,jc],AR),RH=St([a_,EH,ni,jc],AR),wR=(n,t)=>n===void 0?[t.axis[t.axisIds[0]]]:n.map(r=>t.axis[r.axisId]??null).filter(r=>r!==null);St([jc,ei],wR);St([jc,ni],wR);function GT(n,t){return n.id!==void 0?n:W({id:t},n)}function $T(n){return n.colorMap?W({},n,{colorScale:n.colorMap.type==="ordinal"&&n.data?Ec(W({values:n.data},n.colorMap)):Rl(n.colorMap.type==="continuous"?W({min:n.min,max:n.max},n.colorMap):n.colorMap)}):n}function ER(n,t){if(!n||n.length===0)return{axis:{},axisIds:[]};const e={},r=[];return n.forEach((i,a)=>{const s=i.dataKey,l=i.id??`defaultized-z-axis-${a}`;if(s===void 0||i.data!==void 0){e[l]=$T(GT(i,l)),r.push(l);return}if(t===void 0)throw new Error("MUI X Charts: z-axis uses `dataKey` but no `dataset` is provided.");e[l]=$T(GT(W({},i,{data:t.map(c=>c[s])}),l)),r.push(l)}),{axis:e,axisIds:r}}const yd=({params:n,store:t})=>{const{zAxis:e,dataset:r}=n,i=H.useRef(!0);return H.useEffect(()=>{if(i.current){i.current=!1;return}t.update(a=>W({},a,{zAxis:ER(e,r)}))},[e,r,t]),{}};yd.params={zAxis:!0,dataset:!0};yd.getInitialState=n=>({zAxis:ER(n.zAxis,n.dataset)});const DH=n=>n,OH=St([DH],n=>n.zAxis),Gl=({store:n,params:t})=>{D4({controlled:t.highlightedItem}),Vi(()=>{n.update(i=>i.highlight.item===t.highlightedItem?i:W({},i,{highlight:W({},i.highlight,{item:t.highlightedItem})}))},[n,t.highlightedItem]);const e=oo(()=>{var i;(i=t.onHighlightChange)==null||i.call(t,null),n.update(a=>W({},a,{highlight:{item:null}}))}),r=oo(i=>{var s;const a=n.getSnapshot().highlight.item;dR(a,i)||((s=t.onHighlightChange)==null||s.call(t,i),n.update(l=>W({},l,{highlight:{item:i}})))});return{instance:{clearHighlight:e,setHighlight:r}}};Gl.getDefaultizedParams=({params:n})=>W({},n,{highlightedItem:n.highlightedItem??null});Gl.getInitialState=n=>({highlight:{item:n.highlightedItem}});Gl.params={highlightedItem:!0,onHighlightChange:!0};function bR(n){let t=1/0,e=-1/0;for(const r of n??[])r<t&&(t=r),r>e&&(e=r);return[t,e]}const qT=(n,t)=>t==="x"?{x:n,y:null}:{x:null,y:n},SR=n=>{var s;const{axis:t,getFilters:e,isDefaultAxis:r}=n,i=e==null?void 0:e({currentAxisId:t.id,isDefaultAxis:r}),a=i?(s=t.data)==null?void 0:s.filter((l,c)=>i({x:null,y:null},c)):t.data;return bR(a??[])},TR=n=>t=>{const{series:e,axis:r,getFilters:i,isDefaultAxis:a}=t;return Object.keys(e).filter(s=>{const l=n==="x"?e[s].xAxisId:e[s].yAxisId;return l===r.id||a&&l===void 0}).reduce((s,l)=>{const{stackedData:c}=e[l],f=i==null?void 0:i({currentAxisId:r.id,isDefaultAxis:a,seriesXAxisId:e[l].xAxisId,seriesYAxisId:e[l].yAxisId}),[d,g]=(c==null?void 0:c.reduce((m,v,_)=>f&&(!f(qT(v[0],n),_)||!f(qT(v[1],n),_))?m:[Math.min(...v,m[0]),Math.max(...v,m[1])],[1/0,-1/0]))??[1/0,-1/0];return[Math.min(d,s[0]),Math.max(g,s[1])]},[1/0,-1/0])},MH=n=>Object.keys(n.series).some(e=>n.series[e].layout==="horizontal")?TR("x")(n):SR(n),NH=n=>Object.keys(n.series).some(e=>n.series[e].layout==="horizontal")?SR(n):TR("y")(n);function Cn(n){return function(){return n}}const WT=Math.abs,or=Math.atan2,ml=Math.cos,PH=Math.max,Qv=Math.min,aa=Math.sin,nc=Math.sqrt,Or=1e-12,Gh=Math.PI,gg=Gh/2,O1=2*Gh;function kH(n){return n>1?0:n<-1?Gh:Math.acos(n)}function XT(n){return n>=1?gg:n<=-1?-gg:Math.asin(n)}const ux=Math.PI,cx=2*ux,xl=1e-6,LH=cx-xl;function CR(n){this._+=n[0];for(let t=1,e=n.length;t<e;++t)this._+=arguments[t]+n[t]}function BH(n){let t=Math.floor(n);if(!(t>=0))throw new Error(`invalid digits: ${n}`);if(t>15)return CR;const e=10**t;return function(r){this._+=r[0];for(let i=1,a=r.length;i<a;++i)this._+=Math.round(arguments[i]*e)/e+r[i]}}let VH=class{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?CR:BH(t)}moveTo(t,e){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+e}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,e){this._append`L${this._x1=+t},${this._y1=+e}`}quadraticCurveTo(t,e,r,i){this._append`Q${+t},${+e},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(t,e,r,i,a,s){this._append`C${+t},${+e},${+r},${+i},${this._x1=+a},${this._y1=+s}`}arcTo(t,e,r,i,a){if(t=+t,e=+e,r=+r,i=+i,a=+a,a<0)throw new Error(`negative radius: ${a}`);let s=this._x1,l=this._y1,c=r-t,f=i-e,d=s-t,g=l-e,m=d*d+g*g;if(this._x1===null)this._append`M${this._x1=t},${this._y1=e}`;else if(m>xl)if(!(Math.abs(g*c-f*d)>xl)||!a)this._append`L${this._x1=t},${this._y1=e}`;else{let v=r-s,_=i-l,w=c*c+f*f,b=v*v+_*_,S=Math.sqrt(w),C=Math.sqrt(m),I=a*Math.tan((ux-Math.acos((w+m-b)/(2*S*C)))/2),M=I/C,N=I/S;Math.abs(M-1)>xl&&this._append`L${t+M*d},${e+M*g}`,this._append`A${a},${a},0,0,${+(g*v>d*_)},${this._x1=t+N*c},${this._y1=e+N*f}`}}arc(t,e,r,i,a,s){if(t=+t,e=+e,r=+r,s=!!s,r<0)throw new Error(`negative radius: ${r}`);let l=r*Math.cos(i),c=r*Math.sin(i),f=t+l,d=e+c,g=1^s,m=s?i-a:a-i;this._x1===null?this._append`M${f},${d}`:(Math.abs(this._x1-f)>xl||Math.abs(this._y1-d)>xl)&&this._append`L${f},${d}`,r&&(m<0&&(m=m%cx+cx),m>LH?this._append`A${r},${r},0,1,${g},${t-l},${e-c}A${r},${r},0,1,${g},${this._x1=f},${this._y1=d}`:m>xl&&this._append`A${r},${r},0,${+(m>=ux)},${g},${this._x1=t+r*Math.cos(a)},${this._y1=e+r*Math.sin(a)}`)}rect(t,e,r,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+e}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}};function FH(n){let t=3;return n.digits=function(e){if(!arguments.length)return t;if(e==null)t=null;else{const r=Math.floor(e);if(!(r>=0))throw new RangeError(`invalid digits: ${e}`);t=r}return n},()=>new VH(t)}function UH(n){return n.innerRadius}function jH(n){return n.outerRadius}function zH(n){return n.startAngle}function HH(n){return n.endAngle}function GH(n){return n&&n.padAngle}function $H(n,t,e,r,i,a,s,l){var c=e-n,f=r-t,d=s-i,g=l-a,m=g*c-d*f;if(!(m*m<Or))return m=(d*(t-a)-g*(n-i))/m,[n+m*c,t+m*f]}function f1(n,t,e,r,i,a,s){var l=n-e,c=t-r,f=(s?a:-a)/nc(l*l+c*c),d=f*c,g=-f*l,m=n+d,v=t+g,_=e+d,w=r+g,b=(m+_)/2,S=(v+w)/2,C=_-m,I=w-v,M=C*C+I*I,N=i-a,k=m*w-_*v,O=(I<0?-1:1)*nc(PH(0,N*N*M-k*k)),R=(k*I-C*O)/M,D=(-k*C-I*O)/M,L=(k*I+C*O)/M,F=(-k*C+I*O)/M,U=R-b,B=D-S,rt=L-b,vt=F-S;return U*U+B*B>rt*rt+vt*vt&&(R=L,D=F),{cx:R,cy:D,x01:-d,y01:-g,x11:R*(i/N-1),y11:D*(i/N-1)}}function IR(){var n=UH,t=jH,e=Cn(0),r=null,i=zH,a=HH,s=GH,l=null,c=FH(f);function f(){var d,g,m=+n.apply(this,arguments),v=+t.apply(this,arguments),_=i.apply(this,arguments)-gg,w=a.apply(this,arguments)-gg,b=WT(w-_),S=w>_;if(l||(l=d=c()),v<m&&(g=v,v=m,m=g),!(v>Or))l.moveTo(0,0);else if(b>O1-Or)l.moveTo(v*ml(_),v*aa(_)),l.arc(0,0,v,_,w,!S),m>Or&&(l.moveTo(m*ml(w),m*aa(w)),l.arc(0,0,m,w,_,S));else{var C=_,I=w,M=_,N=w,k=b,O=b,R=s.apply(this,arguments)/2,D=R>Or&&(r?+r.apply(this,arguments):nc(m*m+v*v)),L=Qv(WT(v-m)/2,+e.apply(this,arguments)),F=L,U=L,B,rt;if(D>Or){var vt=XT(D/m*aa(R)),q=XT(D/v*aa(R));(k-=vt*2)>Or?(vt*=S?1:-1,M+=vt,N-=vt):(k=0,M=N=(_+w)/2),(O-=q*2)>Or?(q*=S?1:-1,C+=q,I-=q):(O=0,C=I=(_+w)/2)}var Z=v*ml(C),it=v*aa(C),pt=m*ml(N),_t=m*aa(N);if(L>Or){var Mt=v*ml(I),It=v*aa(I),wt=m*ml(M),zt=m*aa(M),$t;if(b<Gh)if($t=$H(Z,it,wt,zt,Mt,It,pt,_t)){var ge=Z-$t[0],Ie=it-$t[1],Ye=Mt-$t[0],ht=It-$t[1],Et=1/aa(kH((ge*Ye+Ie*ht)/(nc(ge*ge+Ie*Ie)*nc(Ye*Ye+ht*ht)))/2),Rt=nc($t[0]*$t[0]+$t[1]*$t[1]);F=Qv(L,(m-Rt)/(Et-1)),U=Qv(L,(v-Rt)/(Et+1))}else F=U=0}O>Or?U>Or?(B=f1(wt,zt,Z,it,v,U,S),rt=f1(Mt,It,pt,_t,v,U,S),l.moveTo(B.cx+B.x01,B.cy+B.y01),U<L?l.arc(B.cx,B.cy,U,or(B.y01,B.x01),or(rt.y01,rt.x01),!S):(l.arc(B.cx,B.cy,U,or(B.y01,B.x01),or(B.y11,B.x11),!S),l.arc(0,0,v,or(B.cy+B.y11,B.cx+B.x11),or(rt.cy+rt.y11,rt.cx+rt.x11),!S),l.arc(rt.cx,rt.cy,U,or(rt.y11,rt.x11),or(rt.y01,rt.x01),!S))):(l.moveTo(Z,it),l.arc(0,0,v,C,I,!S)):l.moveTo(Z,it),!(m>Or)||!(k>Or)?l.lineTo(pt,_t):F>Or?(B=f1(pt,_t,Mt,It,m,-F,S),rt=f1(Z,it,wt,zt,m,-F,S),l.lineTo(B.cx+B.x01,B.cy+B.y01),F<L?l.arc(B.cx,B.cy,F,or(B.y01,B.x01),or(rt.y01,rt.x01),!S):(l.arc(B.cx,B.cy,F,or(B.y01,B.x01),or(B.y11,B.x11),!S),l.arc(0,0,m,or(B.cy+B.y11,B.cx+B.x11),or(rt.cy+rt.y11,rt.cx+rt.x11),S),l.arc(rt.cx,rt.cy,F,or(rt.y11,rt.x11),or(rt.y01,rt.x01),!S))):l.arc(0,0,m,N,M,S)}if(l.closePath(),d)return l=null,d+""||null}return f.centroid=function(){var d=(+n.apply(this,arguments)+ +t.apply(this,arguments))/2,g=(+i.apply(this,arguments)+ +a.apply(this,arguments))/2-Gh/2;return[ml(g)*d,aa(g)*d]},f.innerRadius=function(d){return arguments.length?(n=typeof d=="function"?d:Cn(+d),f):n},f.outerRadius=function(d){return arguments.length?(t=typeof d=="function"?d:Cn(+d),f):t},f.cornerRadius=function(d){return arguments.length?(e=typeof d=="function"?d:Cn(+d),f):e},f.padRadius=function(d){return arguments.length?(r=d==null?null:typeof d=="function"?d:Cn(+d),f):r},f.startAngle=function(d){return arguments.length?(i=typeof d=="function"?d:Cn(+d),f):i},f.endAngle=function(d){return arguments.length?(a=typeof d=="function"?d:Cn(+d),f):a},f.padAngle=function(d){return arguments.length?(s=typeof d=="function"?d:Cn(+d),f):s},f.context=function(d){return arguments.length?(l=d??null,f):l},f}function RR(n){return typeof n=="object"&&"length"in n?n:Array.from(n)}function qH(n,t){return t<n?-1:t>n?1:t>=n?0:NaN}function WH(n){return n}function XH(){var n=WH,t=qH,e=null,r=Cn(0),i=Cn(O1),a=Cn(0);function s(l){var c,f=(l=RR(l)).length,d,g,m=0,v=new Array(f),_=new Array(f),w=+r.apply(this,arguments),b=Math.min(O1,Math.max(-O1,i.apply(this,arguments)-w)),S,C=Math.min(Math.abs(b)/f,a.apply(this,arguments)),I=C*(b<0?-1:1),M;for(c=0;c<f;++c)(M=_[v[c]=c]=+n(l[c],c,l))>0&&(m+=M);for(t!=null?v.sort(function(N,k){return t(_[N],_[k])}):e!=null&&v.sort(function(N,k){return e(l[N],l[k])}),c=0,g=m?(b-f*I)/m:0;c<f;++c,w=S)d=v[c],M=_[d],S=w+(M>0?M*g:0)+I,_[d]={data:l[d],index:c,value:M,startAngle:w,endAngle:S,padAngle:C};return _}return s.value=function(l){return arguments.length?(n=typeof l=="function"?l:Cn(+l),s):n},s.sortValues=function(l){return arguments.length?(t=l,e=null,s):t},s.sort=function(l){return arguments.length?(e=l,t=null,s):e},s.startAngle=function(l){return arguments.length?(r=typeof l=="function"?l:Cn(+l),s):r},s.endAngle=function(l){return arguments.length?(i=typeof l=="function"?l:Cn(+l),s):i},s.padAngle=function(l){return arguments.length?(a=typeof l=="function"?l:Cn(+l),s):a},s}function Sc(n,t){if((s=n.length)>1)for(var e=1,r,i,a=n[t[0]],s,l=a.length;e<s;++e)for(i=a,a=n[t[e]],r=0;r<l;++r)a[r][1]+=a[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function Tc(n){for(var t=n.length,e=new Array(t);--t>=0;)e[t]=t;return e}function YH(n,t){return n[t]}function KH(n){const t=[];return t.key=n,t}function DR(){var n=Cn([]),t=Tc,e=Sc,r=YH;function i(a){var s=Array.from(n.apply(this,arguments),KH),l,c=s.length,f=-1,d;for(const g of a)for(l=0,++f;l<c;++l)(s[l][f]=[0,+r(g,s[l].key,f,a)]).data=g;for(l=0,d=RR(t(s));l<c;++l)s[d[l]].index=l;return e(s,d),s}return i.keys=function(a){return arguments.length?(n=typeof a=="function"?a:Cn(Array.from(a)),i):n},i.value=function(a){return arguments.length?(r=typeof a=="function"?a:Cn(+a),i):r},i.order=function(a){return arguments.length?(t=a==null?Tc:typeof a=="function"?a:Cn(Array.from(a)),i):t},i.offset=function(a){return arguments.length?(e=a??Sc,i):e},i}function ZH(n,t){if((r=n.length)>0){for(var e,r,i=0,a=n[0].length,s;i<a;++i){for(s=e=0;e<r;++e)s+=n[e][i][1]||0;if(s)for(e=0;e<r;++e)n[e][i][1]/=s}Sc(n,t)}}function QH(n,t){if((c=n.length)>0)for(var e,r=0,i,a,s,l,c,f=n[t[0]].length;r<f;++r)for(s=l=0,e=0;e<c;++e)(a=(i=n[t[e]][r])[1]-i[0])>0?(i[0]=s,i[1]=s+=a):a<0?(i[1]=l,i[0]=l+=a):(i[0]=0,i[1]=a)}function JH(n,t){if((i=n.length)>0){for(var e=0,r=n[t[0]],i,a=r.length;e<a;++e){for(var s=0,l=0;s<i;++s)l+=n[s][e][1]||0;r[e][1]+=r[e][0]=-l/2}Sc(n,t)}}function tG(n,t){if(!(!((s=n.length)>0)||!((a=(i=n[t[0]]).length)>0))){for(var e=0,r=1,i,a,s;r<a;++r){for(var l=0,c=0,f=0;l<s;++l){for(var d=n[t[l]],g=d[r][1]||0,m=d[r-1][1]||0,v=(g-m)/2,_=0;_<l;++_){var w=n[t[_]],b=w[r][1]||0,S=w[r-1][1]||0;v+=b-S}c+=g,f+=v*g}i[r-1][1]+=i[r-1][0]=e,c&&(e-=f/c)}i[r-1][1]+=i[r-1][0]=e,Sc(n,t)}}function OR(n){var t=n.map(eG);return Tc(n).sort(function(e,r){return t[e]-t[r]})}function eG(n){for(var t=-1,e=0,r=n.length,i,a=-1/0;++t<r;)(i=+n[t][1])>a&&(a=i,e=t);return e}function MR(n){var t=n.map(NR);return Tc(n).sort(function(e,r){return t[e]-t[r]})}function NR(n){for(var t=0,e=-1,r=n.length,i;++e<r;)(i=+n[e][1])&&(t+=i);return t}function nG(n){return MR(n).reverse()}function rG(n){var t=n.length,e,r,i=n.map(NR),a=OR(n),s=0,l=0,c=[],f=[];for(e=0;e<t;++e)r=a[e],s<l?(s+=i[r],c.push(r)):(l+=i[r],f.push(r));return f.reverse().concat(c)}function iG(n){return Tc(n).reverse()}const Jv={appearance:OR,ascending:MR,descending:nG,insideOut:rG,none:Tc,reverse:iG},ty={expand:ZH,diverging:QH,none:Sc,silhouette:JH,wiggle:tG},PR=n=>{const{series:t,seriesOrder:e,defaultStrategy:r}=n,i=[],a={};return e.forEach(s=>{const{stack:l,stackOrder:c,stackOffset:f}=t[s];l===void 0?i.push({ids:[s],stackingOrder:Jv.none,stackingOffset:ty.none}):a[l]===void 0?(a[l]=i.length,i.push({ids:[s],stackingOrder:Jv[c??(r==null?void 0:r.stackOrder)??"none"],stackingOffset:ty[f??(r==null?void 0:r.stackOffset)??"diverging"]})):(i[a[l]].ids.push(s),c!==void 0&&(i[a[l]].stackingOrder=Jv[c]),f!==void 0&&(i[a[l]].stackingOffset=ty[f]))}),i},aG=n=>n==null?"":n.toLocaleString(),sG=(n,t)=>{const{seriesOrder:e,series:r}=n,i=PR(n),a=t??[];e.forEach(l=>{const c=r[l].data;if(c!==void 0)c.forEach((f,d)=>{a.length<=d?a.push({[l]:f}):a[d][l]=f});else if(t===void 0)throw new Error([`MUI X Charts: bar series with id='${l}' has no data.`,"Either provide a data property to the series or use the dataset prop."].join(`
`))});const s={};return i.forEach(l=>{const{ids:c,stackingOffset:f,stackingOrder:d}=l,g=DR().keys(c.map(m=>{const v=r[m].dataKey;return r[m].data===void 0&&v!==void 0?v:m})).value((m,v)=>m[v]??0).order(d).offset(f)(a);c.forEach((m,v)=>{const _=r[m].dataKey;s[m]=W({layout:"vertical",labelMarkType:"square",minBarSize:0,valueFormatter:r[m].valueFormatter??aG},r[m],{data:_?t.map(w=>{const b=w[_];return typeof b!="number"?null:b}):r[m].data,stackedData:g[v].map(([w,b])=>[w,b])})})}),{seriesOrder:e,stackingGroups:i,series:s}};function Qr(n,t){return typeof n=="function"?n(t):n}const oG=n=>{const{seriesOrder:t,series:e}=n;return t.reduce((r,i)=>{const a=Qr(e[i].label,"legend");return a===void 0||r.push({markType:e[i].labelMarkType,id:i,seriesId:i,color:e[i].color,label:a}),r},[])},kR=(n,t,e)=>{const r=n.layout==="vertical",i=r?t==null?void 0:t.colorScale:e==null?void 0:e.colorScale,a=r?e==null?void 0:e.colorScale:t==null?void 0:t.colorScale,s=r?t==null?void 0:t.data:e==null?void 0:e.data;return a?l=>{if(l===void 0)return n.color;const c=n.data[l],f=c===null?n.color:a(c);return f===null?n.color:f}:i&&s?l=>{if(l===void 0)return n.color;const c=s[l],f=c===null?n.color:i(c);return f===null?n.color:f}:()=>n.color},lG=n=>{const{series:t,getColor:e,identifier:r}=n;if(!r||r.dataIndex===void 0)return null;const i=Qr(t.label,"tooltip"),a=t.data[r.dataIndex];if(a==null)return null;const s=t.valueFormatter(a,{dataIndex:r.dataIndex});return{identifier:r,color:e(r.dataIndex),label:i,value:a,formattedValue:s,markType:t.labelMarkType}},uG=n=>Object.values(n).map(t=>t.layout==="horizontal"?{direction:"y",axisId:t.yAxisId}:{direction:"x",axisId:t.xAxisId}),cG=(n,t,e)=>W({id:n.id??`auto-generated-id-${t}`,color:e[t%e.length]},n),fG={seriesProcessor:sG,colorProcessor:kR,legendGetter:oG,tooltipGetter:lG,axisTooltipGetter:uG,xExtremumGetter:MH,yExtremumGetter:NH,getSeriesWithDefaultValues:cG},hG=n=>{const{series:t,axis:e,isDefaultAxis:r,getFilters:i}=n;let a=1/0,s=-1/0;for(const l in t){if(!Object.hasOwn(t,l))continue;const c=t[l].xAxisId;if(!(c===e.id||c===void 0&&r))continue;const f=i==null?void 0:i({currentAxisId:e.id,isDefaultAxis:r,seriesXAxisId:t[l].xAxisId,seriesYAxisId:t[l].yAxisId}),d=t[l].data??[];for(let g=0;g<d.length;g+=1){const m=d[g];f&&!f(m,g)||m.x!==null&&(m.x<a&&(a=m.x),m.x>s&&(s=m.x))}}return[a,s]},dG=n=>{const{series:t,axis:e,isDefaultAxis:r,getFilters:i}=n;let a=1/0,s=-1/0;for(const l in t){if(!Object.hasOwn(t,l))continue;const c=t[l].yAxisId;if(!(c===e.id||c===void 0&&r))continue;const f=i==null?void 0:i({currentAxisId:e.id,isDefaultAxis:r,seriesXAxisId:t[l].xAxisId,seriesYAxisId:t[l].yAxisId}),d=t[l].data??[];for(let g=0;g<d.length;g+=1){const m=d[g];f&&!f(m,g)||m.y!==null&&(m.y<a&&(a=m.y),m.y>s&&(s=m.y))}}return[a,s]},gG=({series:n,seriesOrder:t},e)=>({series:Object.fromEntries(Object.entries(n).map(([i,a])=>{const s=a==null?void 0:a.datasetKeys,l=["x","y","id"].filter(f=>typeof(s==null?void 0:s[f])!="string");if(a!=null&&a.datasetKeys&&l.length>0)throw new Error([`MUI X Charts: scatter series with id='${i}' has incomplete datasetKeys.`,`Properties ${l.map(f=>`"${f}"`).join(", ")} are missing.`].join(`
`));const c=s?(e==null?void 0:e.map(f=>({x:f[s.x]??null,y:f[s.y]??null,z:s.z&&f[s.z],id:s.id&&f[s.id]})))??[]:a.data??[];return[i,W({labelMarkType:"circle",markerSize:4},a,{preview:W({markerSize:1},a==null?void 0:a.preview),data:c,valueFormatter:a.valueFormatter??(f=>f&&`(${f.x}, ${f.y})`)})]})),seriesOrder:t}),pG=(n,t,e,r)=>{const i=r==null?void 0:r.colorScale,a=e==null?void 0:e.colorScale,s=t==null?void 0:t.colorScale;return i?l=>{var d,g;if(l===void 0)return n.color;if(((d=r==null?void 0:r.data)==null?void 0:d[l])!==void 0){const m=i((g=r==null?void 0:r.data)==null?void 0:g[l]);if(m!==null)return m}const c=n.data[l],f=c===null?n.color:i(c.z);return f===null?n.color:f}:a?l=>{if(l===void 0)return n.color;const c=n.data[l],f=c===null?n.color:a(c.y);return f===null?n.color:f}:s?l=>{if(l===void 0)return n.color;const c=n.data[l],f=c===null?n.color:s(c.x);return f===null?n.color:f}:()=>n.color},mG=n=>{const{seriesOrder:t,series:e}=n;return t.reduce((r,i)=>{const a=Qr(e[i].label,"legend");return a===void 0||r.push({markType:e[i].labelMarkType,id:i,seriesId:i,color:e[i].color,label:a}),r},[])},vG=n=>{const{series:t,getColor:e,identifier:r}=n;if(!r||r.dataIndex===void 0)return null;const i=Qr(t.label,"tooltip"),a=t.data[r.dataIndex],s=t.valueFormatter(a,{dataIndex:r.dataIndex});return{identifier:r,color:e(r.dataIndex),label:i,value:a,formattedValue:s,markType:t.labelMarkType}},yG=(n,t,e)=>W({id:n.id??`auto-generated-id-${t}`,color:e[t%e.length]},n),xG={seriesProcessor:gG,colorProcessor:pG,legendGetter:mG,tooltipGetter:vG,xExtremumGetter:hG,yExtremumGetter:dG,getSeriesWithDefaultValues:yG},_G=n=>{const{axis:t}=n;return bR(t.data??[])};function AG(n,t,e,r){return e.reduce((i,a,s)=>{if(t[s]===null)return i;const[l,c]=n(a);return r&&(!r({y:l,x:null},s)||!r({y:c,x:null},s))?i:[Math.min(l,c,i[0]),Math.max(l,c,i[1])]},[1/0,-1/0])}const wG=n=>{const{series:t,axis:e,isDefaultAxis:r,getFilters:i}=n;return Object.keys(t).filter(a=>{const s=t[a].yAxisId;return s===e.id||r&&s===void 0}).reduce((a,s)=>{const{area:l,stackedData:c,data:f}=t[s],d=l!==void 0,g=i==null?void 0:i({currentAxisId:e.id,isDefaultAxis:r,seriesXAxisId:t[s].xAxisId,seriesYAxisId:t[s].yAxisId}),m=d&&e.scaleType!=="log"&&typeof t[s].baseline!="string"?b=>b:b=>[b[1],b[1]],v=AG(m,f,c,g),[_,w]=v;return[Math.min(_,a[0]),Math.max(w,a[1])]},[1/0,-1/0])};function EG(n,t){const e={};return Object.keys(n).forEach(r=>{e[r]=W({},n[r],{valueFormatter:n[r].valueFormatter??t})}),e}const bG=(n,t)=>{const{seriesOrder:e,series:r}=n,i=PR(W({},n,{defaultStrategy:{stackOffset:"none"}})),a=t??[];e.forEach(l=>{const c=r[l].data;c!==void 0&&c.forEach((f,d)=>{a.length<=d?a.push({[l]:f}):a[d][l]=f})});const s={};return i.forEach(l=>{const{ids:c,stackingOrder:f,stackingOffset:d}=l,g=DR().keys(c.map(m=>{const v=r[m].dataKey;return r[m].data===void 0&&v!==void 0?v:m})).value((m,v)=>m[v]??0).order(f).offset(d)(a);c.forEach((m,v)=>{const _=r[m].dataKey;s[m]=W({labelMarkType:"line"},r[m],{data:_?t.map(w=>{const b=w[_];return typeof b!="number"?null:b}):r[m].data,stackedData:g[v].map(([w,b])=>[w,b])})})}),{seriesOrder:e,stackingGroups:i,series:EG(s,l=>l==null?"":l.toLocaleString())}},SG=(n,t,e)=>{const r=e==null?void 0:e.colorScale,i=t==null?void 0:t.colorScale;return r?a=>{if(a===void 0)return n.color;const s=n.data[a],l=s===null?n.color:r(s);return l===null?n.color:l}:i?a=>{var c;if(a===void 0)return n.color;const s=(c=t.data)==null?void 0:c[a],l=s===null?n.color:i(s);return l===null?n.color:l}:()=>n.color},TG=n=>{const{seriesOrder:t,series:e}=n;return t.reduce((r,i)=>{const a=Qr(e[i].label,"legend");return a===void 0||r.push({markType:e[i].labelMarkType,id:i,seriesId:i,color:e[i].color,label:a}),r},[])},CG=n=>{const{series:t,getColor:e,identifier:r}=n;if(!r||r.dataIndex===void 0)return null;const i=Qr(t.label,"tooltip"),a=t.data[r.dataIndex],s=t.valueFormatter(a,{dataIndex:r.dataIndex});return{identifier:r,color:e(r.dataIndex),label:i,value:a,formattedValue:s,markType:t.labelMarkType}},IG=n=>Object.values(n).map(t=>({direction:"x",axisId:t.xAxisId})),RG=(n,t,e)=>W({id:n.id??`auto-generated-id-${t}`,color:e[t%e.length]},n),DG={colorProcessor:SG,seriesProcessor:bG,legendGetter:TG,tooltipGetter:CG,axisTooltipGetter:IG,xExtremumGetter:_G,yExtremumGetter:wG,getSeriesWithDefaultValues:RG},OG=(n="none")=>{if(typeof n=="function")return n;switch(n){case"none":return null;case"desc":return(t,e)=>e-t;case"asc":return(t,e)=>t-e;default:return null}},MG=n=>{const{seriesOrder:t,series:e}=n,r={};return t.forEach(i=>{const a=XH().startAngle(2*Math.PI*(e[i].startAngle??0)/360).endAngle(2*Math.PI*(e[i].endAngle??360)/360).padAngle(2*Math.PI*(e[i].paddingAngle??0)/360).sortValues(OG(e[i].sortingValues??"none"))(e[i].data.map(s=>s.value));r[i]=W({labelMarkType:"circle",valueFormatter:s=>s.value.toLocaleString()},e[i],{data:e[i].data.map((s,l)=>W({},s,{id:s.id??`auto-generated-pie-id-${i}-${l}`},a[l])).map((s,l)=>{var c,f;return W({labelMarkType:"circle"},s,{formattedValue:((f=(c=e[i]).valueFormatter)==null?void 0:f.call(c,W({},s,{label:Qr(s.label,"arc")}),{dataIndex:l}))??s.value.toLocaleString()})})})}),{seriesOrder:t,series:r}},NG=n=>t=>n.data[t].color,PG=n=>{const{seriesOrder:t,series:e}=n;return t.reduce((r,i)=>(e[i].data.forEach((a,s)=>{const l=Qr(a.label,"legend");l!==void 0&&r.push({markType:a.labelMarkType??e[i].labelMarkType,id:a.id??s,seriesId:i,color:a.color,label:l,itemId:a.id??s})}),r),[])},kG=n=>{const{series:t,getColor:e,identifier:r}=n;if(!r||r.dataIndex===void 0)return null;const i=t.data[r.dataIndex];if(i==null)return null;const a=Qr(i.label,"tooltip"),s=W({},i,{label:a}),l=t.valueFormatter(s,{dataIndex:r.dataIndex});return{identifier:r,color:e(r.dataIndex),label:a,value:s,formattedValue:l,markType:i.labelMarkType??t.labelMarkType}},LG=(n,t,e)=>W({id:n.id??`auto-generated-id-${t}`},n,{data:n.data.map((r,i)=>W({color:e[i%e.length]},r))}),BG={colorProcessor:NG,seriesProcessor:MG,legendGetter:PG,tooltipGetter:kG,getSeriesWithDefaultValues:LG},VG={bar:fG,scatter:xG,line:DG,pie:BG},FG=[yd,Uc,Fc,Gl];function UG(n){const{children:t,plugins:e=FG,pluginParams:r={},seriesConfig:i=VG}=n,{contextValue:a}=_U(e,r,i);return A.jsx(R4.Provider,{value:a,children:t})}const Mo=()=>{const n=H.useContext(R4);if(n==null)throw new Error(["MUI X Charts: Could not find the Chart context.","It looks like you rendered your component outside of a ChartDataProvider.","This can also happen if you are bundling multiple versions of the library."].join(`
`));return n};function Be(){const n=Mo();if(!n)throw new Error(["MUI X Charts: Could not find the charts context.","It looks like you rendered your component outside of a ChartContainer parent component."].join(`
`));return n.store}function bi(){const n=Be();return jt(n,vs)}function s_(){const n=Be();return jt(n,rU)}function o_(n){return sR.getTypes().has(n)}const jG=(n,t,e,r,i,a,s)=>{var v;const l=r==="rotation"?i[t].rotationExtremumGetter:i[t].radiusExtremumGetter,c=((v=s[t])==null?void 0:v.series)??{},[f,d]=(l==null?void 0:l({series:c,axis:e,axisIndex:a,isDefaultAxis:a===0}))??[1/0,-1/0],[g,m]=n;return[Math.min(f,g),Math.max(d,m)]},zG=(n,t,e,r,i)=>{const s=Object.keys(e).filter(o_).reduce((l,c)=>jG(l,c,n,t,e,r,i),[1/0,-1/0]);return Number.isNaN(s[0])||Number.isNaN(s[1])?[1/0,-1/0]:s},rc=(n,t)=>n===void 0?t:Math.PI*n/180,HG=(n,t,e,r)=>{const i=new Set;return Object.keys(t).filter(o_).forEach(s=>{var f,d,g;const l=((f=e[s])==null?void 0:f.series)??{},c=(g=(d=t[s]).axisTooltipGetter)==null?void 0:g.call(d,l);c!==void 0&&c.forEach(({axisId:m,direction:v})=>{v===n&&i.add(m??r)})}),i};function GG(n,t,e){if(t==="rotation"){if(e.scaleType==="point"){const r=[rc(e.startAngle,0),rc(e.endAngle,2*Math.PI)],i=r[1]-r[0];return i>Math.PI*2-.1&&(r[1]-=i/e.data.length),r}return[rc(e.startAngle,0),rc(e.endAngle,2*Math.PI)]}return[0,Math.min(n.height,n.width)/2]}const $G=.2,qG=.1;function LR({drawingArea:n,formattedSeries:t,axis:e,seriesConfig:r,axisDirection:i}){if(e===void 0)return{axis:{},axisIds:[]};const a=HG(i,r,t,e[0].id),s={};return e.forEach((l,c)=>{const f=l,d=GG(n,i,f),[g,m]=zG(f,i,r,c,t),v=!f.ignoreTooltip&&a.has(f.id),_=f.data??[];if(cg(f)){const D=f.categoryGapRatio??$G,L=f.barGapRatio??qG;if(s[f.id]=W({offset:0,categoryGapRatio:D,barGapRatio:L,triggerTooltip:v},f,{data:_,scale:tp(f.data,d).paddingInner(D).paddingOuter(D/2),tickNumber:f.data.length,colorScale:f.colorMap&&(f.colorMap.type==="ordinal"?Ec(W({values:f.data},f.colorMap)):Rl(f.colorMap))}),hg(f.data)){const F=dg(f,d);s[f.id].valueFormatter=f.valueFormatter??F}}if(e_(f)&&(s[f.id]=W({offset:0,triggerTooltip:v},f,{data:_,scale:B4(f.data,d),tickNumber:f.data.length,colorScale:f.colorMap&&(f.colorMap.type==="ordinal"?Ec(W({values:f.data},f.colorMap)):Rl(f.colorMap))}),hg(f.data))){const D=dg(f,d);s[f.id].valueFormatter=f.valueFormatter??D}if(f.scaleType==="band"||f.scaleType==="point")return;const w=f.scaleType??"linear",b=f.domainLimit??"nice",S=[f.min??g,f.max??m];if(typeof b=="function"){const{min:D,max:L}=b(g,m);S[0]=D,S[1]=L}const C=iR(W({},f,{range:d,domain:S})),I=aR(C,d),M=fg(w,S,d),N=b==="nice"?M.nice(C):M,[k,O]=N.domain(),R=[f.min??k,f.max??O];s[f.id]=W({offset:0,triggerTooltip:v},f,{data:_,scaleType:w,scale:N.domain(R),tickNumber:I,colorScale:f.colorMap&&Rl(f.colorMap)})}),{axis:s,axisIds:e.map(({id:l})=>l)}}const BR=n=>n.polarAxis,VR=St([BR],n=>n==null?void 0:n.rotation),WG=St([BR],n=>n==null?void 0:n.radius),$l=St([VR,vs,ji,ys],(n,t,e,r)=>LR({drawingArea:t,formattedSeries:e,axis:n,seriesConfig:r,axisDirection:"rotation"})),XG=St([WG,vs,ji,ys],(n,t,e,r)=>LR({drawingArea:t,formattedSeries:e,axis:n,seriesConfig:r,axisDirection:"radius"})),YG=St([vs],n=>({cx:n.left+n.width/2,cy:n.top+n.height/2})),KG=n=>(t,e)=>Math.atan2(t-n.cx,n.cy-e);function cp(n){return(n%360+360)%360}const ey=2*Math.PI;function ZG(n){return(n%ey+ey)%ey}function YT(n,t){const{scale:e,data:r,reverse:i}=n;if(!zi(e))throw new Error("MUI X Charts: getAxisValue is not implemented for polare continuous axes.");if(!r)return-1;const a=ZG(t-Math.min(...e.range())),s=e.bandwidth()===0?Math.floor((a+e.step()/2)/e.step())%r.length:Math.floor(a/e.step());return s<0||s>=r.length?-1:i?r.length-1-s:s}function _s(){const n=Be(),{axis:t,axisIds:e}=jt(n,ei);return{xAxis:t,xAxisIds:e}}function No(){const n=Be(),{axis:t,axisIds:e}=jt(n,ni);return{yAxis:t,yAxisIds:e}}function QG(n){const t=Be(),{axis:e,axisIds:r}=jt(t,ei),i=r[0];return e[i]}function JG(n){const t=Be(),{axis:e,axisIds:r}=jt(t,ni),i=r[0];return e[i]}function FR(){const n=Be(),{axis:t,axisIds:e}=jt(n,$l);return{rotationAxis:t,rotationAxisIds:e}}function t$(){const n=Be(),{axis:t,axisIds:e}=jt(n,XG);return{radiusAxis:t,radiusAxisIds:e}}function e$(n){const t=Be(),{axis:e,axisIds:r}=jt(t,$l),i=r[0];return e[i]}function pg(n){return zi(n)?t=>(n(t)??0)+n.bandwidth()/2:t=>n(t)}function l_(){const n=Be(),{axis:t,axisIds:e}=jt(n,OH)??{axis:{},axisIds:[]};return{zAxis:t,zAxisIds:e}}function u_(){const n=Mo();if(!n)throw new Error(["MUI X Charts: Could not find the svg ref context.","It looks like you rendered your component outside of a ChartContainer parent component."].join(`
`));return n.svgRef}function fp(){const n=Be();return jt(n,ji)}function n$(n,t){if(n===t)return!0;if(!Array.isArray(n)||!Array.isArray(t))return!1;let e=n.length;if(e!==t.length)return!1;for(;e--;)if(n[e]!==t[e])return!1;return!0}function UR(n){const t=St([ji,(e,r)=>r],(e,r)=>{var a,s,l,c,f,d;if(!r||Array.isArray(r)&&r.length===0)return((s=(a=e[n])==null?void 0:a.seriesOrder)==null?void 0:s.map(g=>{var m;return(m=e[n])==null?void 0:m.series[g]}))??[];if(!Array.isArray(r))return(c=(l=e[n])==null?void 0:l.series)==null?void 0:c[r];const i=[];for(const g of r){const m=(d=(f=e[n])==null?void 0:f.series)==null?void 0:d[g];m&&i.push(m)}return i});return e=>{const r=Be();return jt(r,t,[e],n$)}}function jR(n){const t=St([ji],e=>e[n]);return()=>{const e=Be();return jt(e,t)}}UR("pie");const r$=jR("pie");function i$(){return r$()}UR("bar");const a$=jR("bar");function s$(){return a$()}function o$(){return!1}function zR(n,t){return!n||!t?o$:function(r){return r?n.highlight==="series"?r.seriesId===t.seriesId:n.highlight==="item"?r.dataIndex===t.dataIndex&&r.seriesId===t.seriesId:!1:!1}}function l$(){return!1}function HR(n,t){return!n||!t?l$:function(r){return r?n.fade==="series"?r.seriesId===t.seriesId&&r.dataIndex!==t.dataIndex:n.fade==="global"?r.seriesId!==t.seriesId||r.dataIndex!==t.dataIndex:!1:!1}}const u$=n=>n.highlight,c$=n=>n.series,f$=St([c$],n=>{const t=new Map;return Object.keys(n.processedSeries).forEach(e=>{var i;const r=n.processedSeries[e];(i=r==null?void 0:r.seriesOrder)==null||i.forEach(a=>{const s=r==null?void 0:r.series[a];t.set(a,s==null?void 0:s.highlightScope)})}),t}),xd=St([u$],function(t){return t.item}),hp=St([f$,xd],function(t,e){if(!e)return null;const r=t.get(e.seriesId);return r===void 0?null:r}),h$=St([hp,xd],zR),d$=St([hp,xd],HR),g$=St([hp,xd,(n,t)=>t],function(t,e,r){return zR(t,e)(r)}),p$=St([hp,xd,(n,t)=>t],function(t,e,r){return HR(t,e)(r)});function GR(n){const t=Be(),e=jt(t,g$,[n]),r=jt(t,p$,[n]);return{isHighlighted:e,isFaded:!e&&r}}function m$(){const n=Be(),t=jt(n,h$),e=jt(n,d$);return{isHighlighted:t,isFaded:e}}function v$(n,t){return Object.keys(n).flatMap(e=>{const r=t[e].legendGetter;return r===void 0?[]:r(n[e])})}function y$(){const n=fp(),t=Be(),e=jt(t,ys);return{items:v$(n,e)}}function x$(){const n=s_();return H.useCallback(t=>`${n}-gradient-${t}`,[n])}function _$(){const n=s_();return H.useCallback(t=>`${n}-gradient-${t}-object-bound`,[n])}var ny,KT;function A$(){if(KT)return ny;KT=1;var n=4,t=.001,e=1e-7,r=10,i=11,a=1/(i-1),s=typeof Float32Array=="function";function l(w,b){return 1-3*b+3*w}function c(w,b){return 3*b-6*w}function f(w){return 3*w}function d(w,b,S){return((l(b,S)*w+c(b,S))*w+f(b))*w}function g(w,b,S){return 3*l(b,S)*w*w+2*c(b,S)*w+f(b)}function m(w,b,S,C,I){var M,N,k=0;do N=b+(S-b)/2,M=d(N,C,I)-w,M>0?S=N:b=N;while(Math.abs(M)>e&&++k<r);return N}function v(w,b,S,C){for(var I=0;I<n;++I){var M=g(b,S,C);if(M===0)return b;var N=d(b,S,C)-w;b-=N/M}return b}function _(w){return w}return ny=function(b,S,C,I){if(!(0<=b&&b<=1&&0<=C&&C<=1))throw new Error("bezier x values must be in [0, 1] range");if(b===S&&C===I)return _;for(var M=s?new Float32Array(i):new Array(i),N=0;N<i;++N)M[N]=d(N*a,b,C);function k(O){for(var R=0,D=1,L=i-1;D!==L&&M[D]<=O;++D)R+=a;--D;var F=(O-M[D])/(M[D+1]-M[D]),U=R+F*a,B=g(U,b,C);return B>=t?v(O,U,b,C):B===0?U:m(O,R,R+a,b,C)}return function(R){return R===0?0:R===1?1:d(k(R),S,I)}},ny}var w$=A$();const E$=ED(w$),c_=300,$R="cubic-bezier(0.66, 0, 0.34, 1)",b$=E$(.66,0,.34,1);var Cc=0,yh=0,ah=0,qR=1e3,mg,xh,vg=0,Ll=0,dp=0,$h=typeof performance=="object"&&performance.now?performance:Date,WR=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(n){setTimeout(n,17)};function f_(){return Ll||(WR(S$),Ll=$h.now()+dp)}function S$(){Ll=0}function yg(){this._call=this._time=this._next=null}yg.prototype=XR.prototype={constructor:yg,restart:function(n,t,e){if(typeof n!="function")throw new TypeError("callback is not a function");e=(e==null?f_():+e)+(t==null?0:+t),!this._next&&xh!==this&&(xh?xh._next=this:mg=this,xh=this),this._call=n,this._time=e,hx()},stop:function(){this._call&&(this._call=null,this._time=1/0,hx())}};function XR(n,t,e){var r=new yg;return r.restart(n,t,e),r}function fx(){f_(),++Cc;for(var n=mg,t;n;)(t=Ll-n._time)>=0&&n._call.call(void 0,t),n=n._next;--Cc}function ZT(){Ll=(vg=$h.now())+dp,Cc=yh=0;try{fx()}finally{Cc=0,C$(),Ll=0}}function T$(){var n=$h.now(),t=n-vg;t>qR&&(dp-=t,vg=n)}function C$(){for(var n,t=mg,e,r=1/0;t;)t._call?(r>t._time&&(r=t._time),n=t,t=t._next):(e=t._next,t._next=null,t=n?n._next=e:mg=e);xh=n,hx(r)}function hx(n){if(!Cc){yh&&(yh=clearTimeout(yh));var t=n-Ll;t>24?(n<1/0&&(yh=setTimeout(ZT,n-$h.now()-dp)),ah&&(ah=clearInterval(ah))):(ah||(vg=$h.now(),ah=setInterval(T$,qR)),Cc=1,WR(ZT))}}function I$(n,t,e){var r=new yg;return t=t==null?0:+t,r.restart(i=>{r.stop(),n(i+t)},t,e),r}class R${constructor(t,e,r){this.duration=void 0,this.elapsed=0,this.easingFn=void 0,this.timer=null,this.onTickCallback=void 0,this.duration=t,this.easingFn=e,this.onTickCallback=r,this.resume()}get running(){return this.timer!==null}timerCallback(t){this.elapsed=Math.min(t,this.duration);const e=this.duration===0?1:this.elapsed/this.duration,r=this.easingFn(e);this.onTickCallback(r),this.elapsed>=this.duration&&this.stop()}resume(){if(this.running||this.elapsed>=this.duration)return this;const t=f_()-this.elapsed;return this.timer=XR(e=>this.timerCallback(e),0,t),fx(),this}stop(){return this.running?(this.timer&&(this.timer.stop(),this.timer=null),this):this}finish(){return this.stop(),I$(()=>this.timerCallback(this.duration)),fx(),this}}function D$(n,t){if(Object.is(n,t))return!0;if(typeof n!="object"||n===null||typeof t!="object"||t===null)return!1;const e=Object.keys(n),r=Object.keys(t);if(e.length!==r.length)return!1;for(let i=0;i<e.length;i+=1){const a=e[i];if(!Object.prototype.hasOwnProperty.call(t,a)||!Object.is(n[a],t[a]))return!1}return!0}function O$(n,{createInterpolator:t,applyProps:e,skip:r,initialProps:i=n}){const a=H.useRef(i),s=H.useRef(null),l=H.useRef(null),c=H.useRef(n);Vi(()=>{c.current=n},[n]),Vi(()=>{var g;r&&((g=s.current)==null||g.finish(),s.current=null,l.current=null,a.current=n)},[n,r]);const f=H.useCallback(g=>{const m=a.current,v=t(m,n);s.current=new R$(c_,b$,_=>{const w=v(_);a.current=w,e(g,w)})},[e,t,n]);return H.useCallback(g=>{var v,_,w,b;if(g===null){(v=s.current)==null||v.stop();return}const m=l.current;if(m===g){if(D$(c.current,n)){(_=s.current)==null||_.resume();return}(w=s.current)==null||w.stop()}m&&((b=s.current)==null||b.stop()),l.current=g,(s.current||!r)&&f(g)},[f,n,r])}function _d(n,{createInterpolator:t,transformProps:e,applyProps:r,skip:i,initialProps:a=n,ref:s}){const l=e??(d=>d),c=O$(n,{initialProps:a,createInterpolator:t,applyProps:(d,g)=>r(d,l(g)),skip:i});return W({},e(i?n:a),{ref:xC(c,s)})}function M$(n,t){const e=ye(n.x,t.x),r=ye(n.y,t.y),i=ye(n.width,t.width),a=ye(n.height,t.height);return s=>({x:e(s),y:r(s),width:i(s),height:a(s)})}function N$(n){const t={x:n.layout==="vertical"?n.x:n.xOrigin,y:n.layout==="vertical"?n.yOrigin:n.y,width:n.layout==="vertical"?n.width:0,height:n.layout==="vertical"?0:n.height};return _d({x:n.x,y:n.y,width:n.width,height:n.height},{createInterpolator:M$,applyProps(e,r){e.setAttribute("x",r.x.toString()),e.setAttribute("y",r.y.toString()),e.setAttribute("width",r.width.toString()),e.setAttribute("height",r.height.toString())},transformProps:e=>e,initialProps:t,skip:n.skipAnimation,ref:n.ref})}function P$(n,t){const e=ye(n.x,t.x),r=ye(n.y,t.y),i=ye(n.width,t.width),a=ye(n.height,t.height);return s=>({x:e(s),y:r(s),width:i(s),height:a(s)})}function k$(n){const t={x:n.layout==="vertical"?n.x+n.width/2:n.xOrigin,y:n.layout==="vertical"?n.yOrigin:n.y+n.height/2,width:n.width,height:n.height},e={x:n.x+n.width/2,y:n.y+n.height/2,width:n.width,height:n.height};return _d(e,{createInterpolator:P$,transformProps:r=>r,applyProps(r,i){r.setAttribute("x",i.x.toString()),r.setAttribute("y",i.y.toString()),r.setAttribute("width",i.width.toString()),r.setAttribute("height",i.height.toString())},initialProps:t,skip:n.skipAnimation,ref:n.ref})}function L$(n,t){const e=ye(n.startAngle,t.startAngle),r=ye(n.endAngle,t.endAngle),i=ye(n.innerRadius,t.innerRadius),a=ye(n.outerRadius,t.outerRadius),s=ye(n.paddingAngle,t.paddingAngle),l=ye(n.cornerRadius,t.cornerRadius);return c=>({startAngle:e(c),endAngle:r(c),innerRadius:i(c),outerRadius:a(c),paddingAngle:s(c),cornerRadius:l(c)})}function B$(n){const t={startAngle:(n.startAngle+n.endAngle)/2,endAngle:(n.startAngle+n.endAngle)/2,innerRadius:n.innerRadius,outerRadius:n.outerRadius,paddingAngle:n.paddingAngle,cornerRadius:n.cornerRadius};return _d({startAngle:n.startAngle,endAngle:n.endAngle,innerRadius:n.innerRadius,outerRadius:n.outerRadius,paddingAngle:n.paddingAngle,cornerRadius:n.cornerRadius},{createInterpolator:L$,transformProps:e=>({d:IR().cornerRadius(e.cornerRadius)({padAngle:e.paddingAngle,innerRadius:e.innerRadius,outerRadius:e.outerRadius,startAngle:e.startAngle,endAngle:e.endAngle}),visibility:e.startAngle===e.endAngle?"hidden":"visible"}),applyProps(e,r){e.setAttribute("d",r.d),e.setAttribute("visibility",r.visibility)},initialProps:t,skip:n.skipAnimation,ref:n.ref})}function V$(n,t){const e=ye(n.startAngle,t.startAngle),r=ye(n.endAngle,t.endAngle),i=ye(n.innerRadius,t.innerRadius),a=ye(n.outerRadius,t.outerRadius),s=ye(n.paddingAngle,t.paddingAngle),l=ye(n.cornerRadius,t.cornerRadius);return c=>({startAngle:e(c),endAngle:r(c),innerRadius:i(c),outerRadius:a(c),paddingAngle:s(c),cornerRadius:l(c)})}function F$(n){const t={startAngle:(n.startAngle+n.endAngle)/2,endAngle:(n.startAngle+n.endAngle)/2,innerRadius:n.arcLabelRadius??n.innerRadius,outerRadius:n.arcLabelRadius??n.outerRadius,paddingAngle:n.paddingAngle,cornerRadius:n.cornerRadius};return _d({startAngle:n.startAngle,endAngle:n.endAngle,innerRadius:(n==null?void 0:n.arcLabelRadius)??n.innerRadius,outerRadius:(n==null?void 0:n.arcLabelRadius)??n.outerRadius,paddingAngle:n.paddingAngle,cornerRadius:n.cornerRadius},{createInterpolator:V$,transformProps:e=>{const[r,i]=IR().cornerRadius(e.cornerRadius).centroid({padAngle:e.paddingAngle,startAngle:e.startAngle,endAngle:e.endAngle,innerRadius:e.innerRadius,outerRadius:e.outerRadius});return{x:r,y:i}},applyProps(e,{x:r,y:i}){e.setAttribute("x",r.toString()),e.setAttribute("y",i.toString())},initialProps:t,skip:n.skipAnimation,ref:n.ref})}function U$(){return Mo().chartRootRef}const j$={"image/png":"PNG","image/jpeg":"JPEG","image/webp":"WebP"},z$=n=>({components:{MuiChartsLocalizationProvider:{defaultProps:{localeText:W({},n)}}}}),YR={loading:"Loading data…",noData:"No data to display",zoomIn:"Zoom in",zoomOut:"Zoom out",toolbarExport:"Export",toolbarExportPrint:"Print",toolbarExportImage:n=>`Export as ${j$[n]??n}`},H$=YR;z$(YR);const G$=["localeText"],dx=H.createContext(null);function $$(n){const{localeText:t}=n,e=xe(n,G$),{localeText:r}=H.useContext(dx)??{localeText:void 0},i=Ei({props:e,name:"MuiChartsLocalizationProvider"}),{children:a,localeText:s}=i,l=H.useMemo(()=>W({},H$,s,r,t),[s,r,t]),c=H.useMemo(()=>({localeText:l}),[l]);return A.jsx(dx.Provider,{value:c,children:a})}const KR=()=>{const n=H.useContext(dx);if(n===null)throw new Error(["MUI X Charts: Can not find the charts localization context.","It looks like you forgot to wrap your component in ChartsLocalizationProvider.","This can also happen if you are bundling multiple versions of the `@mui/x-charts` package"].join(`
`));return n};function q$(n){const{id:t,offset:e}=n,{left:r,top:i,width:a,height:s}=bi(),l=W({top:0,right:0,bottom:0,left:0},e);return A.jsx("clipPath",{id:t,children:A.jsx("rect",{x:r-l.left,y:i-l.top,width:a+l.left+l.right,height:s+l.top+l.bottom})})}function W$(){return typeof window>"u"}const h1=new Map,X$=2e3,Y$={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},K$=["minWidth","maxWidth","width","minHeight","maxHeight","height","top","left","fontSize","padding","margin","paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom"],QT="mui_measurement_span";function ZR(n,t){return K$.indexOf(n)>=0&&t===+t?`${t}px`:t}function QR(n){return n.split("").reduce((r,i)=>i===i.toUpperCase()?[...r,"-",i.toLowerCase()]:[...r,i],[]).join("")}const Z$=n=>Object.keys(n).sort().reduce((t,e)=>`${t}${QR(e)}:${ZR(e,n[e])};`,"");let ry;const Ad=(n,t={})=>{if(n==null||W$())return{width:0,height:0};const e=`${n}`,r=Z$(t),i=`${e}-${r}`,a=h1.get(i);if(a)return a;try{let s=document.getElementById(QT);s===null&&(s=document.createElement("span"),s.setAttribute("id",QT),s.setAttribute("aria-hidden","true"),document.body.appendChild(s));const l=W({},Y$,t);Object.keys(l).map(d=>(s.style[QR(d)]=ZR(d,l[d]),d)),s.textContent=e;const c=s.getBoundingClientRect(),f={width:c.width,height:c.height};return h1.set(i,f),h1.size+1>X$&&h1.clear(),ry&&clearTimeout(ry),ry=setTimeout(()=>{s.textContent=""},0),f}catch{return{width:0,height:0}}};function JR({style:n,needsComputation:t,text:e}){return e.split(`
`).map(r=>W({text:r},t?Ad(r,n):{width:0,height:0}))}function h_(){const[n,t]=H.useState(typeof window<"u"||!1);return H.useEffect(()=>{t(!0)},[]),n}const Q$=["x","y","style","text","ownerState"],J$=["angle","textAnchor","dominantBaseline"];function xg(n){const{x:t,y:e,style:r,text:i}=n,a=xe(n,Q$),s=r??{},{angle:l,textAnchor:c,dominantBaseline:f}=s,d=xe(s,J$),g=h_(),m=H.useMemo(()=>JR({style:d,needsComputation:g&&i.includes(`
`),text:i}),[d,i,g]);let v;switch(f){case"hanging":case"text-before-edge":v=0;break;case"central":v=(m.length-1)/2*-m[0].height;break;default:v=(m.length-1)*-m[0].height;break}return A.jsx("text",W({},a,{transform:l?`rotate(${l}, ${t}, ${e})`:void 0,x:t,y:e,textAnchor:c,dominantBaseline:f,style:d,children:m.map((_,w)=>A.jsx("tspan",{x:t,dy:`${w===0?v:m[0].height}px`,dominantBaseline:f,children:_.text},w))}))}function d_(n){return typeof n=="number"&&!Number.isFinite(n)}const iy={start:0,extremities:0,end:1,middle:.5};function tq(n){const{scale:t,tickNumber:e,valueFormatter:r,tickInterval:i,tickPlacement:a="extremities",tickLabelPlacement:s,isInside:l}=n;if(zi(t)){const m=t.domain(),v=s??"middle";return t.bandwidth()>0?[...(typeof i=="function"&&m.filter(i)||typeof i=="object"&&i||m).map(b=>{const S=`${b}`;return{value:b,formattedValue:(r==null?void 0:r(b,{location:"tick",scale:t,tickNumber:e,defaultTickLabel:S}))??S,offset:t(b)-(t.step()-t.bandwidth())/2+iy[a]*t.step(),labelOffset:v==="tick"?0:t.step()*(iy[v]-iy[a])}}),...a==="extremities"?[{formattedValue:void 0,offset:t.range()[1],labelOffset:0}]:[]]:(typeof i=="function"&&m.filter(i)||typeof i=="object"&&i||m).map(w=>{const b=`${w}`;return{value:w,formattedValue:(r==null?void 0:r(w,{location:"tick",scale:t,tickNumber:e,defaultTickLabel:b}))??b,offset:t(w),labelOffset:0}})}if(t.domain().some(d_))return[];const f=s,d=typeof i=="object"?i:t.ticks(e),g=[];for(let m=0;m<d.length;m+=1){const v=d[m],_=t(v);if(l(_)){const w=t.tickFormat(e)(v);g.push({value:v,formattedValue:(r==null?void 0:r(v,{location:"tick",scale:t,tickNumber:e,defaultTickLabel:w}))??w,offset:_,labelOffset:f==="middle"?t(d[m-1]??0)-(_+t(d[m-1]??0))/2:0})}}return g}function gp(n){const{scale:t,tickNumber:e,valueFormatter:r,tickInterval:i,tickPlacement:a="extremities",tickLabelPlacement:s,direction:l}=n,{instance:c}=Mo(),f=l==="x"?c.isXInside:c.isYInside;return H.useMemo(()=>tq({scale:t,tickNumber:e,tickPlacement:a,tickInterval:i,tickLabelPlacement:s,valueFormatter:r,isInside:f}),[t,e,a,i,s,r,f])}function eq(n=!1){const[t,e]=H.useState(!1);return Vi(()=>{n||e(!0)},[n]),H.useEffect(()=>{n&&e(!0)},[n]),t}const t8=typeof window<"u"&&"Intl"in window&&"Segmenter"in Intl?new Intl.Segmenter(void 0,{granularity:"grapheme"}):null;function nq(n){return n.length}function rq(n){const t=t8.segment(n);let e=0;for(const r of t)e+=1;return e}const iq=t8?rq:nq;function aq(n){return n*(Math.PI/180)}const e8=typeof window<"u"&&"Intl"in window&&"Segmenter"in Intl?new Intl.Segmenter(void 0,{granularity:"grapheme"}):null;function sq(n,t){return n.slice(0,t)}function oq(n,t){const e=e8.segment(n);let r="",i=0;for(const a of e)if(r+=a.segment,i+=1,i>=t)break;return r}const lq=e8?oq:sq,JT="…";function n8(n,t){const{width:e,height:r,measureText:i}=t,a=aq(t.angle),s=i(n),l=Math.abs(s.width*Math.cos(a))+Math.abs(s.height*Math.sin(a)),c=Math.abs(s.width*Math.sin(a))+Math.abs(s.height*Math.cos(a));return l<=e&&c<=r}function r8(n,t){if(t(n))return n;let e=n,r=1,i=1/2;const a=iq(n);let s=a,l=a,c=null;do{if(l=s,s=Math.floor(a*i),s===0)break;e=lq(n,s).trim();const f=t(e+JT);r+=1,f?(c=e,i+=1/2**r):i-=1/2**r}while(Math.abs(s-l)!==1);return c?c+JT:""}function uq(n,t,e,r,i){const a=new Map,s=cp((i==null?void 0:i.angle)??0);let l=1,c=1;(i==null?void 0:i.textAnchor)==="start"?(l=1/0,c=1):(i==null?void 0:i.textAnchor)==="end"?(l=1,c=1/0):(l=2,c=2),s>90&&s<270&&([l,c]=[c,l]),r&&([l,c]=[c,l]);for(const f of n)if(f.formattedValue){const d=Math.min((f.offset+f.labelOffset)*l,(t.left+t.width+t.right-f.offset-f.labelOffset)*c),g=m=>n8(m,{width:d,height:e,angle:s,measureText:v=>Ad(v,i)});a.set(f,r8(f.formattedValue.toString(),g))}return a}const tC=5;function cq(n,t,e=0){const r=Math.min(Math.abs(e)%180,Math.abs(Math.abs(e)%180-180)%180);if(r<tC)return n;if(r>90-tC)return t;const i=rc(r),a=Math.atan2(t,n);return i<a?n/Math.cos(i):t/Math.sin(i)}function fq(n,{tickLabelStyle:t,tickLabelInterval:e,tickLabelMinGap:r,reverse:i,isMounted:a,isXInside:s}){const l=d=>{if(!a||d.formattedValue===void 0)return{width:0,height:0};const g=JR({style:t,needsComputation:!0,text:d.formattedValue});return{width:Math.max(...g.map(m=>m.width)),height:Math.max(g.length*g[0].height)}};if(typeof e=="function")return new Set(n.filter((d,g)=>e(d.value,g)));let c=0;const f=i?-1:1;return new Set(n.filter((d,g)=>{const{offset:m,labelOffset:v}=d,_=m+v;if(g>0&&f*_<f*(c+r)||!s(_))return!1;const{width:w,height:b}=l(d),S=cq(w,b,t==null?void 0:t.angle),C=_-f*S/2;return g>0&&f*C<f*(c+r)?!1:(c=_+f*S/2,!0)}))}function i8(n){return Jr("MuiChartsAxis",n)}const d1=ti("MuiChartsAxis",["root","line","tickContainer","tick","tickLabel","label","directionX","directionY","top","bottom","left","right","id"]),a8=ln("g",{name:"MuiChartsAxis",slot:"Root"})(({theme:n})=>({[`& .${d1.tickLabel}`]:W({},n.typography.caption,{fill:(n.vars||n).palette.text.primary}),[`& .${d1.label}`]:{fill:(n.vars||n).palette.text.primary},[`& .${d1.line}`]:{stroke:(n.vars||n).palette.text.primary,shapeRendering:"crispEdges",strokeWidth:1},[`& .${d1.tick}`]:{stroke:(n.vars||n).palette.text.primary,shapeRendering:"crispEdges"}})),hq=n=>{const{classes:t,position:e,id:r}=n,i={root:["root","directionX",e,`id-${r}`],line:["line"],tickContainer:["tickContainer"],tick:["tick"],tickLabel:["tickLabel"],label:["label"]};return Lr(i,i8,t)},gx=3,dq=4,s8=ln(a8,{name:"MuiChartsXAxis",slot:"Root"})({}),gq={disableLine:!1,disableTicks:!1,tickSize:6,tickLabelMinGap:4};function o8(n){const t=cp(n);return t<=30||t>=330||t<=210&&t>=150?"middle":t<=180?"end":"start"}function l8(n){const t=cp(n);return t<=30||t>=330?"hanging":t<=210&&t>=150?"auto":"central"}function u8(n){switch(n){case"start":return"end";case"end":return"start";default:return n}}const pq=["scale","tickNumber","reverse"],c8=n=>{const{xAxis:t,xAxisIds:e}=_s(),r=t[n.axisId??e[0]],{scale:i,tickNumber:a,reverse:s}=r,l=xe(r,pq),c=Ei({props:W({},l,n),name:"MuiChartsXAxis"}),f=W({},gq,c),{position:d,tickLabelStyle:g,labelStyle:m,slots:v,slotProps:_}=f,w=qh(),b=_C(),S=hq(f),C=d==="bottom"?1:-1,I=(v==null?void 0:v.axisLine)??"line",M=(v==null?void 0:v.axisTick)??"line",N=(v==null?void 0:v.axisTickLabel)??xg,k=(v==null?void 0:v.axisLabel)??xg,O=o8((d==="bottom"?0:180)-((g==null?void 0:g.angle)??0)),R=l8((d==="bottom"?0:180)-((g==null?void 0:g.angle)??0)),D=fo({elementType:N,externalSlotProps:_==null?void 0:_.axisTickLabel,additionalProps:{style:W({},w.typography.caption,{fontSize:12,lineHeight:1.25,textAnchor:b?u8(O):O,dominantBaseline:R},g)},className:S.tickLabel,ownerState:{}}),L=fo({elementType:k,externalSlotProps:_==null?void 0:_.axisLabel,additionalProps:{style:W({},w.typography.body1,{lineHeight:1,fontSize:14,textAnchor:"middle",dominantBaseline:d==="bottom"?"text-after-edge":"text-before-edge"},m)},ownerState:{}}),F=i.domain(),U=zi(i),B=U&&F.length===0||!U&&F.some(d_)||d==="none";return{xScale:i,defaultizedProps:f,tickNumber:a,positionSign:C,skipAxisRendering:B,classes:S,Line:I,Tick:M,TickLabel:N,Label:k,axisTickLabelProps:D,axisLabelProps:L,reverse:s,isRtl:b}};function mq(n){const{xScale:t,defaultizedProps:e,tickNumber:r,positionSign:i,skipAxisRendering:a,classes:s,Line:l,Tick:c,TickLabel:f,Label:d,axisTickLabelProps:g,axisLabelProps:m,reverse:v,isRtl:_}=c8(n),w=eq(),{position:b,disableLine:S,disableTicks:C,label:I,tickSize:M,valueFormatter:N,slotProps:k,tickInterval:O,tickLabelInterval:R,tickPlacement:D,tickLabelPlacement:L,tickLabelMinGap:F,sx:U,offset:B,height:rt}=e,vt=bi(),{left:q,top:Z,width:it,height:pt}=vt,{instance:_t}=Mo(),Mt=h_(),It=C?4:M,wt=gp({scale:t,tickNumber:r,valueFormatter:N,tickInterval:O,tickPlacement:D,tickLabelPlacement:L,direction:"x"}),zt=fq(wt,{tickLabelStyle:g.style,tickLabelInterval:R,tickLabelMinGap:F,reverse:v,isMounted:w,isXInside:_t.isXInside});if(a)return null;const $t=I?Ad(I,m.style).height:0,ge={x:q+it/2,y:i*rt},Ie=Math.max(0,rt-(I?$t+dq:0)-It-gx),Ye=Mt?uq(zt,vt,Ie,_,g.style):new Map(Array.from(zt).map(ht=>[ht,ht.formattedValue]));return A.jsxs(s8,{transform:`translate(0, ${b==="bottom"?Z+pt+B:Z-B})`,className:s.root,sx:U,children:[!S&&A.jsx(l,W({x1:q,x2:q+it,className:s.line},k==null?void 0:k.axisLine)),wt.map((ht,Et)=>{const{offset:Rt,labelOffset:mt}=ht,_e=mt??0,Nt=i*(It+gx),Pe=_t.isXInside(Rt),Ke=Ye.get(ht),Ge=zt.has(ht);return A.jsxs("g",{transform:`translate(${Rt}, 0)`,className:s.tickContainer,children:[!C&&Pe&&A.jsx(c,W({y2:i*It,className:s.tick},k==null?void 0:k.axisTick)),Ke!==void 0&&Ge&&A.jsx(f,W({x:_e,y:Nt},g,{text:Ke}))]},Et)}),I&&A.jsx("g",{className:s.label,children:A.jsx(d,W({},ge,m,{text:I}))})]})}const sh={start:0,extremities:0,end:1,middle:.5,tick:0};function vq(n){const{scale:t,tickInterval:e,tickLabelPlacement:r="middle",tickPlacement:i="extremities",groups:a}=n;return H.useMemo(()=>{const s=t.domain(),l=typeof e=="function"&&s.filter(e)||typeof e=="object"&&e||s;if(t.bandwidth()>0){const c=eC(l,a,i,r,t);return c[0]&&(c[0].ignoreTick=!0),[{formattedValue:void 0,offset:t.range()[0],labelOffset:0,groupIndex:a.length-1},...c,{formattedValue:void 0,offset:t.range()[1],labelOffset:0,groupIndex:a.length-1}]}return eC(l,a,i,r,t)},[t,e,a,i,r])}function eC(n,t,e,r,i){const a=[],s=new Map;let l=0;for(let c=0;c<t.length;c+=1)for(let f=0;f<n.length;f+=1){const d=n[f],g=t[c].getValue(d,f),m=a[a.length-1];if((m==null?void 0:m.value)!==g||(m==null?void 0:m.groupIndex)!==c){l=1;const _=zi(i)?i(d)-(i.step()-i.bandwidth())/2+sh[e]*i.step():i(d),w=i.step()*l*(sh[r]-sh[e]);a.push({value:g,formattedValue:`${g}`,offset:_,groupIndex:c,dataIndex:f,ignoreTick:!1,labelOffset:w}),s.has(f)||s.set(f,new Set);const b=s.get(f);for(const S of b.values())a[S].ignoreTick=!0;b.add(a.length-1)}else{l+=1;const _=i.step()*l*(sh[r]-sh[e]);m.labelOffset=_}}return a}const nC={tickSize:6},yq=(n,t,e)=>{const r=n[t]??{},i=e??nC.tickSize,a=i*t*2+i;return W({},nC,r,{tickSize:r.tickSize??a})};function xq(n){const{xScale:t,defaultizedProps:e,positionSign:r,skipAxisRendering:i,classes:a,Line:s,Tick:l,TickLabel:c,Label:f,axisTickLabelProps:d,axisLabelProps:g}=c8(n);if(!zi(t))throw new Error("MUI X Charts: ChartsGroupedXAxis only supports the `band` and `point` scale types.");const{position:m,disableLine:v,disableTicks:_,label:w,tickSize:b,valueFormatter:S,slotProps:C,tickInterval:I,tickPlacement:M,tickLabelPlacement:N,sx:k,offset:O,height:R}=e,D=e.groups,L=bi(),{left:F,top:U,width:B,height:rt}=L,{instance:vt}=Mo(),q={x:F+B/2,y:r*R},Z=vq({scale:t,tickInterval:I,tickPlacement:M,tickLabelPlacement:N,groups:D});return i?null:A.jsxs(s8,{transform:`translate(0, ${m==="bottom"?U+rt+O:U-O})`,className:a.root,sx:k,children:[!v&&A.jsx(s,W({x1:F,x2:F+B,className:a.line},C==null?void 0:C.axisLine)),Z.map((it,pt)=>{const{offset:_t,labelOffset:Mt}=it,It=Mt??0,wt=vt.isXInside(_t),zt=it.formattedValue,$t=it.ignoreTick??!1,ge=it.groupIndex??0,Ie=yq(D,ge,b),Ye=r*Ie.tickSize,ht=r*(Ie.tickSize+gx);return A.jsxs("g",{transform:`translate(${_t}, 0)`,className:a.tickContainer,"data-group-index":ge,children:[!_&&!$t&&wt&&A.jsx(l,W({y2:Ye,className:a.tick},C==null?void 0:C.axisTick)),zt!==void 0&&A.jsx(c,W({x:It,y:ht},d,{text:zt}))]},pt)}),w&&A.jsx("g",{className:a.label,children:A.jsx(f,W({},q,g,{text:w}))})]})}function _q(n){const{xAxis:t,xAxisIds:e}=_s(),r=t[n.axisId??e[0]];return"groups"in r&&Array.isArray(r.groups)?A.jsx(xq,W({},n)):A.jsx(mq,W({},n))}function Aq(n,t,e,r,i){const a=new Map,s=cp((i==null?void 0:i.angle)??0);let l=1,c=1;(i==null?void 0:i.textAnchor)==="start"?(l=1/0,c=1):(i==null?void 0:i.textAnchor)==="end"?(l=1,c=1/0):(l=2,c=2),s>180&&([l,c]=[c,l]),r&&([l,c]=[c,l]);for(const f of n)if(f.formattedValue){const d=Math.min((f.offset+f.labelOffset)*l,(t.top+t.height+t.bottom-f.offset-f.labelOffset)*c),g=m=>n8(m,{width:e,height:d,angle:s,measureText:v=>Ad(v,i)});a.set(f,r8(f.formattedValue.toString(),g))}return a}const wq=["scale","tickNumber"],Eq=n=>{const{classes:t,position:e,id:r}=n,i={root:["root","directionY",e,`id-${r}`],line:["line"],tickContainer:["tickContainer"],tick:["tick"],tickLabel:["tickLabel"],label:["label"]};return Lr(i,i8,t)},rC=2,bq=2,Sq=ln(a8,{name:"MuiChartsYAxis",slot:"Root"})({}),Tq={disableLine:!1,disableTicks:!1,tickSize:6};function Cq(n){const{yAxisIds:t,yAxis:e}=No(),r=e[n.axisId??t[0]],{scale:i,tickNumber:a}=r,s=xe(r,wq),l=Ei({props:W({},s,n),name:"MuiChartsYAxis"}),c=W({},Tq,l),{position:f,disableLine:d,disableTicks:g,label:m,labelStyle:v,tickLabelStyle:_,tickSize:w,valueFormatter:b,slots:S,slotProps:C,tickPlacement:I,tickLabelPlacement:M,tickInterval:N,tickLabelInterval:k,sx:O,offset:R,width:D}=c,L=qh(),F=_C(),U=h_(),B=Eq(c),{instance:rt}=Mo(),vt=bi(),{left:q,top:Z,width:it,height:pt}=vt,_t=g?4:w,Mt=gp({scale:i,tickNumber:a,valueFormatter:b,tickPlacement:I,tickLabelPlacement:M,tickInterval:N,direction:"y"}),It=f==="right"?1:-1,wt=typeof(_==null?void 0:_.fontSize)=="number"?_.fontSize:12,zt=(S==null?void 0:S.axisLine)??"line",$t=(S==null?void 0:S.axisTick)??"line",ge=(S==null?void 0:S.axisTickLabel)??xg,Ie=(S==null?void 0:S.axisLabel)??xg,Ye=o8((f==="right"?-90:90)-((_==null?void 0:_.angle)??0)),ht=l8((f==="right"?-90:90)-((_==null?void 0:_.angle)??0)),Et=fo({elementType:ge,externalSlotProps:C==null?void 0:C.axisTickLabel,additionalProps:{style:W({},L.typography.caption,{fontSize:wt,textAnchor:F?u8(Ye):Ye,dominantBaseline:ht},_)},className:B.tickLabel,ownerState:{}}),Rt=fo({elementType:Ie,externalSlotProps:C==null?void 0:C.axisLabel,additionalProps:{style:W({},L.typography.body1,{lineHeight:1,fontSize:14,angle:It*90,textAnchor:"middle",dominantBaseline:"text-before-edge"},v)},ownerState:{}}),mt=fo({elementType:zt,externalSlotProps:C==null?void 0:C.axisLine,additionalProps:{strokeLinecap:"square"},ownerState:{}}),_e=i.domain(),Nt=zi(i);if(Nt&&_e.length===0||!Nt&&_e.some(d_)||f==="none")return null;const Pe={x:It*D,y:Z+pt/2},Ke=Math.max(0,D-(m?Ad(m,Rt.style).height+bq:0)-_t-rC),Ge=U?Aq(Mt,vt,Ke,F,Et.style):new Map(Array.from(Mt).map(ri=>[ri,ri.formattedValue]));return A.jsxs(Sq,{transform:`translate(${f==="right"?q+it+R:q-R}, 0)`,className:B.root,sx:O,children:[!d&&A.jsx(zt,W({y1:Z,y2:Z+pt,className:B.line},mt)),Mt.map((ri,As)=>{const{offset:wa,labelOffset:Ea,value:zc}=ri,ws=It*(_t+rC),Po=Ea,ql=typeof k=="function"&&!(k!=null&&k(zc,As)),$e=rt.isYInside(wa),ue=Ge.get(ri);return $e?A.jsxs("g",{transform:`translate(0, ${wa})`,className:B.tickContainer,children:[!g&&A.jsx($t,W({x2:It*_t,className:B.tick},C==null?void 0:C.axisTick)),ue!==void 0&&!ql&&A.jsx(ge,W({x:ws,y:Po,text:ue},Et))]},As):null}),m&&U&&A.jsx("g",{className:B.label,children:A.jsx(Ie,W({},Pe,Rt,{text:m}))})]})}function Iq(n){const{slots:t,slotProps:e}=n,{xAxisIds:r,xAxis:i}=_s(),{yAxisIds:a,yAxis:s}=No();return A.jsxs(H.Fragment,{children:[r.map(l=>!i[l].position||i[l].position==="none"?null:A.jsx(_q,{slots:t,slotProps:e,axisId:l},l)),a.map(l=>!s[l].position||s[l].position==="none"?null:A.jsx(Cq,{slots:t,slotProps:e,axisId:l},l))]})}function Rq(n){return Jr("MuiChartsGrid",n)}const iC=ti("MuiChartsGrid",["root","line","horizontalLine","verticalLine"]),Dq=ln("g",{name:"MuiChartsGrid",slot:"Root",overridesResolver:(n,t)=>[{[`&.${iC.verticalLine}`]:t.verticalLine},{[`&.${iC.horizontalLine}`]:t.horizontalLine},t.root]})({}),f8=ln("line",{name:"MuiChartsGrid",slot:"Line"})(({theme:n})=>({stroke:(n.vars||n).palette.divider,shapeRendering:"crispEdges",strokeWidth:1}));function Oq(n){const{axis:t,start:e,end:r,classes:i}=n,{scale:a,tickNumber:s,tickInterval:l}=t,c=gp({scale:a,tickNumber:s,tickInterval:l,direction:"x"});return A.jsx(H.Fragment,{children:c.map(({value:f,offset:d})=>{var g;return A.jsx(f8,{y1:e,y2:r,x1:d,x2:d,className:i.verticalLine},`vertical-${((g=f==null?void 0:f.getTime)==null?void 0:g.call(f))??f}`)})})}function Mq(n){const{axis:t,start:e,end:r,classes:i}=n,{scale:a,tickNumber:s,tickInterval:l}=t,c=gp({scale:a,tickNumber:s,tickInterval:l,direction:"y"});return A.jsx(H.Fragment,{children:c.map(({value:f,offset:d})=>{var g;return A.jsx(f8,{y1:d,y2:d,x1:e,x2:r,className:i.horizontalLine},`horizontal-${((g=f==null?void 0:f.getTime)==null?void 0:g.call(f))??f}`)})})}const Nq=["vertical","horizontal"],Pq=({classes:n})=>Lr({root:["root"],verticalLine:["line","verticalLine"],horizontalLine:["line","horizontalLine"]},Rq,n);function kq(n){const t=Ei({props:n,name:"MuiChartsGrid"}),e=bi(),{vertical:r,horizontal:i}=t,a=xe(t,Nq),{xAxis:s,xAxisIds:l}=_s(),{yAxis:c,yAxisIds:f}=No(),d=Pq(t),g=c[f[0]],m=s[l[0]];return A.jsxs(Dq,W({},a,{className:d.root,children:[r&&A.jsx(Oq,{axis:m,start:e.top,end:e.height+e.top,classes:d}),i&&A.jsx(Mq,{axis:g,start:e.left,end:e.width+e.left,classes:d})]}))}function Lq(n){return Jr("MuiChartsTooltip",n)}const Yu=ti("MuiChartsTooltip",["root","paper","table","row","cell","mark","markContainer","labelCell","valueCell","axisValueCell"]),pp=n=>Lr({root:["root"],paper:["paper"],table:["table"],row:["row"],cell:["cell"],mark:["mark"],markContainer:["markContainer"],labelCell:["labelCell"],valueCell:["valueCell"],axisValueCell:["axisValueCell"]},Lq,n);function Bq(){var k,O,R;const n=Be(),t=jt(n,gR),e=jt(n,ys),r=fp(),{xAxis:i,xAxisIds:a}=_s(),{yAxis:s,yAxisIds:l}=No(),{zAxis:c,zAxisIds:f}=l_(),{rotationAxis:d,rotationAxisIds:g}=FR(),{radiusAxis:m,radiusAxisIds:v}=t$(),_=r.xAxisId??a[0],w=r.yAxisId??l[0],b=r.zAxisId??f[0],S=r.rotationAxisId??g[0],C=r.radiusAxisId??v[0];if(!t)return null;const I=(k=r[t.type])==null?void 0:k.series[t.seriesId];if(!I)return null;const M=((R=(O=e[I.type]).colorProcessor)==null?void 0:R.call(O,I,_&&i[_],w&&s[w],b&&c[b]))??(()=>""),N={};return _!==void 0&&(N.x=i[_]),w!==void 0&&(N.y=s[w]),S!==void 0&&(N.rotation=d[S]),C!==void 0&&(N.radius=m[C]),e[I.type].tooltipGetter({series:I,axesConfig:N,getColor:M,identifier:t})}const px=ln("div",{name:"MuiChartsTooltip",slot:"Container",overridesResolver:(n,t)=>t.paper})(({theme:n})=>{var t;return{backgroundColor:(n.vars||n).palette.background.paper,color:(n.vars||n).palette.text.primary,borderRadius:(t=(n.vars||n).shape)==null?void 0:t.borderRadius,border:`solid ${(n.vars||n).palette.divider} 1px`}}),mx=ln("table",{name:"MuiChartsTooltip",slot:"Table"})(({theme:n})=>({borderSpacing:0,[`& .${Yu.markContainer}`]:{display:"inline-block",width:`calc(20px + ${n.spacing(1.5)})`,verticalAlign:"middle"},"& caption":{borderBottom:`solid ${(n.vars||n).palette.divider} 1px`,padding:n.spacing(.5,1.5),textAlign:"start",whiteSpace:"nowrap","& span":{marginRight:n.spacing(1.5)}}})),vx=ln("tr",{name:"MuiChartsTooltip",slot:"Row"})(({theme:n})=>({"tr:first-of-type& td":{paddingTop:n.spacing(.5)},"tr:last-of-type& td":{paddingBottom:n.spacing(.5)}})),ic=ln(st,{name:"MuiChartsTooltip",slot:"Cell"})(({theme:n})=>({verticalAlign:"middle",color:(n.vars||n).palette.text.secondary,textAlign:"start",[`&.${Yu.cell}`]:{paddingLeft:n.spacing(1),paddingRight:n.spacing(1)},[`&.${Yu.labelCell}`]:{fontWeight:n.typography.fontWeightRegular},[`&.${Yu.valueCell}, &.${Yu.axisValueCell}`]:{color:(n.vars||n).palette.text.primary,fontWeight:n.typography.fontWeightMedium},[`&.${Yu.valueCell}`]:{paddingLeft:n.spacing(1.5),paddingRight:n.spacing(1.5)},"td:first-of-type&, th:first-of-type&":{paddingLeft:n.spacing(1.5)},"td:last-of-type&, th:last-of-type&":{paddingRight:n.spacing(1.5)}}));function Vq(n){return Jr("MuiChartsLabelMark",n)}const ju=ti("MuiChartsLabelMark",["root","line","square","circle","mask","fill"]),Fq=n=>{const{type:t}=n;return Lr({root:typeof t=="function"?["root"]:["root",t],mask:["mask"],fill:["fill"]},Vq,n.classes)},h8=(n,t,e)=>H.forwardRef(function(i,a){var m;const s=Ei({props:i,name:n}),l=typeof t.defaultProps=="function"?t.defaultProps(s):t.defaultProps??{},c=AC(l,s),f=qh(),d=(m=t.classesResolver)==null?void 0:m.call(t,c,f),g=H.forwardRef(e);return A.jsx(g,W({},c,{classes:d,ref:a}))}),Uq=["type","color","className","classes"],jq=ln("div",{name:"MuiChartsLabelMark",slot:"Root"})(()=>({display:"flex",width:14,height:14,[`&.${ju.line}`]:{width:16,height:"unset",alignItems:"center",[`.${ju.mask}`]:{height:4,width:"100%",borderRadius:1,overflow:"hidden"}},[`&.${ju.square}`]:{height:13,width:13,borderRadius:2,overflow:"hidden"},[`&.${ju.circle}`]:{height:15,width:15},svg:{display:"block"},[`& .${ju.mask} > *`]:{height:"100%",width:"100%"},[`& .${ju.mask}`]:{height:"100%",width:"100%"}})),_g=h8("MuiChartsLabelMark",{defaultProps:{type:"square"},classesResolver:Fq},function(t,e){const{type:r,color:i,className:a,classes:s}=t,l=xe(t,Uq),c=r;return A.jsx(jq,W({className:Ka(s==null?void 0:s.root,a),ownerState:t,"aria-hidden":"true",ref:e},l,{children:A.jsx("div",{className:s==null?void 0:s.mask,children:typeof c=="function"?A.jsx(c,{className:s==null?void 0:s.fill,color:i}):A.jsx("svg",{viewBox:"0 0 24 24",preserveAspectRatio:r==="line"?"none":void 0,children:r==="circle"?A.jsx("circle",{className:s==null?void 0:s.fill,r:"12",cx:"12",cy:"12",fill:i}):A.jsx("rect",{className:s==null?void 0:s.fill,width:"24",height:"24",fill:i})})})}))});function zq(n){const{classes:t,sx:e}=n,r=Bq(),i=pp(t);if(!r)return null;if("values"in r){const{label:f,color:d,markType:g}=r;return A.jsx(px,{sx:e,className:i.paper,children:A.jsxs(mx,{className:i.table,children:[A.jsxs(st,{component:"caption",children:[A.jsx("div",{className:i.markContainer,children:A.jsx(_g,{type:g,color:d,className:i.mark})}),f]}),A.jsx("tbody",{children:r.values.map(({formattedValue:m,label:v})=>A.jsxs(vx,{className:i.row,children:[A.jsx(ic,{className:Ka(i.labelCell,i.cell),component:"th",children:v}),A.jsx(ic,{className:Ka(i.valueCell,i.cell),component:"td",children:m})]},v))})]})})}const{color:a,label:s,formattedValue:l,markType:c}=r;return A.jsx(px,{sx:e,className:i.paper,children:A.jsx(mx,{className:i.table,children:A.jsx("tbody",{children:A.jsxs(vx,{className:i.row,children:[A.jsxs(ic,{className:Ka(i.labelCell,i.cell),component:"th",children:[A.jsx("div",{className:i.markContainer,children:A.jsx(_g,{type:c,color:a,className:i.mark})}),s]}),A.jsx(ic,{className:Ka(i.valueCell,i.cell),component:"td",children:l})]})})})})}function Hq(n){const t=Be(),e=jt(t,ys);return H.useMemo(()=>{const i={};return Object.keys(e).forEach(a=>{i[a]=e[a].colorProcessor}),i},[e])}function Gq(){const n=u_(),[t,e]=H.useState(null);return H.useEffect(()=>{const r=n.current;if(r===null)return()=>{};const i=s=>{s.pointerType!=="mouse"&&e(null)},a=s=>{e({pointerType:s.pointerType})};return r.addEventListener("pointerenter",a),r.addEventListener("pointerup",i),()=>{r.removeEventListener("pointerenter",a),r.removeEventListener("pointerup",i)}},[n]),t}function $q(n){return n instanceof Date?n.toUTCString():n.toLocaleString()}const qq="@media (pointer: fine)",Wq=()=>mC(qq,{defaultMatches:!0}),d8=(n,t)=>t,g8=(n,t)=>t;function p8(n,t,e){return Array.isArray(e)?e.map(r=>YT(t.axis[r],n)):YT(t.axis[e],n)}const m8=St([md,vd,YG],(n,t,e)=>n===null||t===null?null:KG(e)(n,t)),Xq=St([m8,$l,d8],(n,t,e=t.axisIds[0])=>n===null?null:p8(n,t,e)),v8=St([m8,$l,g8],(n,t,e=t.axisIds)=>n===null?null:p8(n,t,e));St([$l,Xq,d8],(n,t,e=n.axisIds[0])=>{var i;if(t===null||t===-1||n.axisIds.length===0)return null;const r=(i=n.axis[e])==null?void 0:i.data;return r?r[t]:null});St([$l,v8,g8],(n,t,e=n.axisIds)=>t===null?null:e.map((r,i)=>{var s;const a=t[i];return a===-1?null:(s=n.axis[r].data)==null?void 0:s[a]}));const y8=St([v8,$l],(n,t)=>n===null?[]:t.axisIds.map((e,r)=>({axisId:e,dataIndex:n[r]})).filter(({axisId:e,dataIndex:r})=>t.axis[e].triggerTooltip&&r>=0),{memoizeOptions:{resultEqualityCheck:hc}});St([],()=>[]);const Yq=St([y8],n=>n.length>0);function ay(n,t,e){var s;const r=((s=n.data)==null?void 0:s[t])??null,a=(n.valueFormatter??(l=>n.scaleType==="utc"?$q(l):l.toLocaleString()))(r,{location:"tooltip",scale:n.scale});return{axisDirection:e,axisId:n.id,mainAxis:n,dataIndex:t,axisValue:r,axisFormattedValue:a,seriesItems:[]}}function Kq(n={}){const{multipleAxes:t,directions:e}=n,r=QG(),i=JG(),a=e$(),s=Be(),l=jt(s,yR),c=jt(s,xR),f=jt(s,y8),d=fp(),{xAxis:g}=_s(),{yAxis:m}=No(),{zAxis:v,zAxisIds:_}=l_(),{rotationAxis:w}=FR(),b=Hq();if(l.length===0&&c.length===0&&f.length===0)return null;const S=[];return(e===void 0||e.includes("x"))&&l.forEach(({axisId:C,dataIndex:I})=>{!t&&S.length>1||S.push(ay(g[C],I,"x"))}),(e===void 0||e.includes("y"))&&c.forEach(({axisId:C,dataIndex:I})=>{!t&&S.length>1||S.push(ay(m[C],I,"y"))}),(e===void 0||e.includes("rotation"))&&f.forEach(({axisId:C,dataIndex:I})=>{!t&&S.length>1||S.push(ay(w[C],I,"rotation"))}),Object.keys(d).filter(n_).forEach(C=>{const I=d[C];return I?I.seriesOrder.forEach(M=>{var D;const N=I.series[M],k=N.xAxisId??r.id,O=N.yAxisId??i.id,R=S.findIndex(({axisDirection:L,axisId:F})=>L==="x"&&F===k||L==="y"&&F===O);if(R>=0){const L="zAxisId"in N?N.zAxisId:_[0],{dataIndex:F}=S[R],U=((D=b[C])==null?void 0:D.call(b,N,g[k],m[O],L?v[L]:void 0)(F))??"",B=N.data[F]??null,rt=N.valueFormatter(B,{dataIndex:F}),vt=Qr(N.label,"tooltip")??null;S[R].seriesItems.push({seriesId:M,color:U,value:B,formattedValue:rt,formattedLabel:vt,markType:N.labelMarkType})}}):[]}),Object.keys(d).filter(o_).forEach(C=>{const I=d[C];return I?I.seriesOrder.forEach(M=>{var R;const N=I.series[M],k=N.rotationAxisId??(a==null?void 0:a.id),O=S.findIndex(({axisDirection:D,axisId:L})=>D==="rotation"&&L===k);if(O>=0){const{dataIndex:D}=S[O],L=((R=b[C])==null?void 0:R.call(b,N)(D))??"",F=N.data[D]??null,U=N.valueFormatter(F,{dataIndex:D}),B=Qr(N.label,"tooltip")??null;S[O].seriesItems.push({seriesId:M,color:L,value:F,formattedValue:U,formattedLabel:B,markType:N.labelMarkType})}}):[]}),t?S:S.length===0?S[0]:null}function Zq(n){return Kq(W({},n,{multipleAxes:!0}))}function Qq(n){const t=pp(n.classes),e=Zq();return e===null?null:A.jsx(px,{sx:n.sx,className:t.paper,children:e.map(({axisId:r,mainAxis:i,axisValue:a,axisFormattedValue:s,seriesItems:l})=>A.jsxs(mx,{className:t.table,children:[a!=null&&!i.hideTooltip&&A.jsx(st,{component:"caption",children:s}),A.jsx("tbody",{children:l.map(({seriesId:c,color:f,formattedValue:d,formattedLabel:g,markType:m})=>d==null?null:A.jsxs(vx,{className:t.row,children:[A.jsxs(ic,{className:Ka(t.labelCell,t.cell),component:"th",children:[A.jsx("div",{className:t.markContainer,children:A.jsx(_g,{type:m,color:f,className:t.mark})}),g||null]}),A.jsx(ic,{className:Ka(t.valueCell,t.cell),component:"td",children:d})]},c))})]},r))})}function Jq(n){let t,e;const r=()=>{e=null,n(...t)};function i(...a){t=a,e||(e=requestAnimationFrame(r))}return i.clear=()=>{e&&(cancelAnimationFrame(e),e=null)},i}function tW(){const n=Be(),t=jt(n,VR),e=jt(n,jl);return t!==void 0?"polar":e!==void 0?"cartesian":"none"}const eW=["trigger","classes","children"],nW=()=>!1,rW=ln(lD,{name:"MuiChartsTooltip",slot:"Root"})(({theme:n})=>({pointerEvents:"none",zIndex:n.zIndex.modal}));function iW(n){const t=Ei({props:n,name:"MuiChartsTooltipContainer"}),{trigger:e="axis",classes:r,children:i}=t,a=xe(t,eW),s=u_(),l=pp(r),c=Gq(),f=Wq(),d=H.useRef(null),g=yC(()=>({x:0,y:0})),m=tW(),v=Be(),_=jt(v,e==="axis"?m==="polar"&&Yq||m==="cartesian"&&bH||nW:_H);H.useEffect(()=>{const I=s.current;if(I===null)return()=>{};const M=Jq(()=>{var k;return(k=d.current)==null?void 0:k.update()}),N=k=>{g.current={x:k.clientX,y:k.clientY},M()};return I.addEventListener("pointerdown",N),I.addEventListener("pointermove",N),()=>{I.removeEventListener("pointerdown",N),I.removeEventListener("pointermove",N),M.clear()}},[s,g]);const w=H.useMemo(()=>({getBoundingClientRect:()=>({x:g.current.x,y:g.current.y,top:g.current.y,left:g.current.x,right:g.current.x,bottom:g.current.y,width:0,height:0,toJSON:()=>""})}),[g]),b=(c==null?void 0:c.pointerType)==="mouse"||f,S=(c==null?void 0:c.pointerType)==="touch"||!f,C=H.useMemo(()=>[{name:"offset",options:{offset:()=>S?[0,64]:[0,8]}},...b?[]:[{name:"flip",options:{fallbackPlacements:["top-end","top-start","bottom-end","bottom"]}}]],[b,S]);return e==="none"?null:A.jsx(oD,{children:_&&A.jsx(rW,W({className:l==null?void 0:l.root,open:_,placement:b?"right-start":"top",popperRef:d,anchorEl:w,modifiers:C},a,{children:i}))})}function x8(n){const{classes:t,trigger:e="axis"}=n,r=pp(t);return A.jsx(iW,W({},n,{classes:t,children:e==="axis"?A.jsx(Qq,{classes:r}):A.jsx(zq,{classes:r})}))}function aW(n){return Jr("MuiChartsLabel",n)}ti("MuiChartsLabel",["root"]);const sW=n=>Lr({root:["root"]},aW,n.classes),oW=["children","className","classes"],lW=h8("MuiChartsLabel",{classesResolver:sW},function(t,e){const{children:r,className:i,classes:a}=t,s=xe(t,oW);return A.jsx("span",W({className:Ka(a==null?void 0:a.root,i),ref:e},s,{children:r}))}),uW=n=>({type:"series",color:n.color,label:n.label,seriesId:n.seriesId,itemId:n.itemId});function cW(n){return Jr("MuiChartsLegend",n)}const fW=n=>{const{classes:t,direction:e}=n;return Lr({root:["root",e],item:["item"],mark:["mark"],label:["label"],series:["series"]},cW,t)},aC=ti("MuiChartsLegend",["root","item","series","mark","label","vertical","horizontal"]),hW=["slots","slotProps"],dW=["ownerState"],gW=(n,t,e,r)=>{function i(a,s){var N;const l=Ei({props:a,name:n}),c=typeof e.defaultProps=="function"?e.defaultProps(l):e.defaultProps??{},f=AC(c,l),d=f,{slots:g,slotProps:m}=d,v=xe(d,hW),_=qh(),w=(N=e.classesResolver)==null?void 0:N.call(e,f,_),b=(g==null?void 0:g[t])??r,S=e.propagateSlots&&!(g!=null&&g[t]),C=fo({elementType:b,externalSlotProps:m==null?void 0:m[t],additionalProps:W({},v,{classes:w},S&&{slots:g,slotProps:m}),ownerState:{}}),I=xe(C,dW),M=W({},I);for(const k of e.omitProps??[])delete M[k];return A.jsx(b,W({},M,{ref:s}))}return H.forwardRef(i)},pW=["direction","onItemClick","className","classes"],mW=ln("ul",{name:"MuiChartsLegend",slot:"Root"})(({ownerState:n,theme:t})=>W({},t.typography.caption,{color:(t.vars||t).palette.text.primary,lineHeight:"100%",display:"flex",flexDirection:n.direction==="vertical"?"column":"row",alignItems:n.direction==="vertical"?void 0:"center",flexShrink:0,gap:t.spacing(2),listStyleType:"none",paddingInlineStart:0,marginBlock:t.spacing(1),marginInline:t.spacing(1),flexWrap:"wrap",li:{display:n.direction==="horizontal"?"inline-flex":void 0},[`button.${aC.series}`]:{background:"none",border:"none",padding:0,fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",letterSpacing:"inherit",color:"inherit"},[`& .${aC.series}`]:{display:n.direction==="vertical"?"flex":"inline-flex",alignItems:"center",gap:t.spacing(1)}})),_8=gW("MuiChartsLegend","legend",{defaultProps:{direction:"horizontal"},omitProps:["position"],classesResolver:fW},H.forwardRef(function(t,e){const r=y$(),{onItemClick:i,className:a,classes:s}=t,l=xe(t,pW);if(r.items.length===0)return null;const c=i?"button":"div";return A.jsx(mW,W({className:Ka(s==null?void 0:s.root,a),ref:e},l,{ownerState:t,children:r.items.map((f,d)=>A.jsx("li",{className:s==null?void 0:s.item,"data-series":f.id,children:A.jsxs(c,{className:s==null?void 0:s.series,role:i?"button":void 0,type:i?"button":void 0,onClick:i?g=>i(g,uW(f),d):void 0,children:[A.jsx(_g,{className:s==null?void 0:s.mark,color:f.color,type:f.markType}),A.jsx(lW,{className:s==null?void 0:s.label,children:f.label})]})},f.id))}))}));function vW(n){return Jr("MuiChartsAxisHighlight",n)}ti("MuiChartsAxisHighlight",["root"]);const Ag=ln("path",{name:"MuiChartsAxisHighlight",slot:"Root"})(({theme:n})=>({pointerEvents:"none",variants:[{props:{axisHighlight:"band"},style:W({fill:"white",fillOpacity:.1},n.applyStyles("light",{fill:"gray"}))},{props:{axisHighlight:"line"},style:W({strokeDasharray:"5 2",stroke:"#ffffff"},n.applyStyles("light",{stroke:"#000000"}))}]}));function yW(n){const{type:t,classes:e}=n,{left:r,width:i}=bi(),a=Be(),s=jt(a,RH),l=jt(a,ni);return s.length===0?null:s.map(({axisId:c,value:f})=>{const g=l.axis[c].scale,m=pg(g),v=t==="band"&&f!==null&&zi(g);return A.jsxs(H.Fragment,{children:[v&&g(f)!==void 0&&A.jsx(Ag,{d:`M ${r} ${g(f)-(g.step()-g.bandwidth())/2} l 0 ${g.step()} l ${i} 0 l 0 ${-g.step()} Z`,className:e.root,ownerState:{axisHighlight:"band"}}),t==="line"&&f!==null&&A.jsx(Ag,{d:`M ${r} ${m(f)} L ${r+i} ${m(f)}`,className:e.root,ownerState:{axisHighlight:"line"}})]},`${c}-${f}`)})}function xW(n){const{type:t,classes:e}=n,{top:r,height:i}=bi(),a=Be(),s=jt(a,IH),l=jt(a,ei);return s.length===0?null:s.map(({axisId:c,value:f})=>{const g=l.axis[c].scale,m=pg(g),v=t==="band"&&f!==null&&zi(g);return A.jsxs(H.Fragment,{children:[v&&g(f)!==void 0&&A.jsx(Ag,{d:`M ${g(f)-(g.step()-g.bandwidth())/2} ${r} l ${g.step()} 0 l 0 ${i} l ${-g.step()} 0 Z`,className:e.root,ownerState:{axisHighlight:"band"}}),t==="line"&&f!==null&&A.jsx(Ag,{d:`M ${m(f)} ${r} L ${m(f)} ${r+i}`,className:e.root,ownerState:{axisHighlight:"line"}})]},`${c}-${f}`)})}const _W=()=>Lr({root:["root"]},vW);function AW(n){const{x:t,y:e}=n,r=_W();return A.jsxs(H.Fragment,{children:[t&&A.jsx(xW,{type:t,classes:r}),e&&A.jsx(yW,{type:e,classes:r})]})}function wW(n){return Jr("MuiBarElement",n)}const EW=ti("MuiBarElement",["root","highlighted","faded","series"]),bW=n=>{const{classes:t,id:e,isHighlighted:r,isFaded:i}=n,a={root:["root",`series-${e}`,r&&"highlighted",i&&"faded"]};return Lr(a,wW,t)};function SW(n){"hasPointerCapture"in n.currentTarget&&n.currentTarget.hasPointerCapture(n.pointerId)&&n.currentTarget.releasePointerCapture(n.pointerId)}const A8=(n,t)=>{const{instance:e}=Mo(),r=H.useRef(!1),i=H.useCallback(()=>{r.current=!0,e.setItemInteraction({type:n.type,seriesId:n.seriesId,dataIndex:n.dataIndex}),e.setHighlight({seriesId:n.seriesId,dataIndex:n.dataIndex})},[e,n.type,n.seriesId,n.dataIndex]),a=H.useCallback(()=>{r.current=!1,e.removeItemInteraction({type:n.type,seriesId:n.seriesId,dataIndex:n.dataIndex}),e.clearHighlight()},[e,n.type,n.seriesId,n.dataIndex]);return H.useEffect(()=>()=>{r.current&&a()},[a]),{onPointerEnter:i,onPointerLeave:a,onPointerDown:SW}},TW=["ownerState","skipAnimation","id","dataIndex","xOrigin","yOrigin"];function CW(n){const{ownerState:t}=n,e=xe(n,TW),r=N$(n);return A.jsx("rect",W({},e,{filter:t.isHighlighted?"brightness(120%)":void 0,opacity:t.isFaded?.3:1,"data-highlighted":t.isHighlighted||void 0,"data-faded":t.isFaded||void 0},r))}const IW=["id","dataIndex","classes","color","slots","slotProps","style","onClick","skipAnimation","layout","x","xOrigin","y","yOrigin","width","height"];function RW(n){const{id:t,dataIndex:e,classes:r,color:i,slots:a,slotProps:s,style:l,onClick:c,skipAnimation:f,layout:d,x:g,xOrigin:m,y:v,yOrigin:_,width:w,height:b}=n,S=xe(n,IW),C=A8({type:"bar",seriesId:t,dataIndex:e}),{isFaded:I,isHighlighted:M}=GR({seriesId:t,dataIndex:e}),N={id:t,dataIndex:e,classes:r,color:i,isFaded:I,isHighlighted:M},k=bW(N),O=(a==null?void 0:a.bar)??CW,R=fo({elementType:O,externalSlotProps:s==null?void 0:s.bar,externalForwardedProps:S,additionalProps:W({},C,{id:t,dataIndex:e,color:i,x:g,xOrigin:m,y:v,yOrigin:_,width:w,height:b,style:l,onClick:c,cursor:c?"pointer":"unset",stroke:"none",fill:i,skipAnimation:f,layout:d}),className:k.root,ownerState:N});return A.jsx(O,W({},R))}function DW(n,t){const e=ye(n.x,t.x),r=ye(n.y,t.y),i=ye(n.width,t.width),a=ye(n.height,t.height),s=ye(n.borderRadius,t.borderRadius);return l=>({x:e(l),y:r(l),width:i(l),height:a(l),borderRadius:s(l)})}function OW(n){const t={x:n.layout==="vertical"?n.x:n.xOrigin,y:n.layout==="vertical"?n.yOrigin:n.y,width:n.layout==="vertical"?n.width:0,height:n.layout==="vertical"?0:n.height,borderRadius:n.borderRadius};return _d({x:n.x,y:n.y,width:n.width,height:n.height,borderRadius:n.borderRadius},{createInterpolator:DW,transformProps:e=>({d:NW(n.hasNegative,n.hasPositive,n.layout,e.x,e.y,e.width,e.height,n.xOrigin,n.yOrigin,e.borderRadius)}),applyProps(e,{d:r}){r&&e.setAttribute("d",r)},initialProps:t,skip:n.skipAnimation,ref:n.ref})}function MW(n){const{maskId:t,x:e,y:r,width:i,height:a,skipAnimation:s}=n,{ref:l,d:c}=OW({layout:n.layout??"vertical",hasNegative:n.hasNegative,hasPositive:n.hasPositive,xOrigin:n.xOrigin,yOrigin:n.yOrigin,x:e,y:r,width:i,height:a,borderRadius:n.borderRadius??0,skipAnimation:s});return!n.borderRadius||n.borderRadius<=0?null:A.jsx("clipPath",{id:t,children:A.jsx("path",{ref:l,d:c})})}function NW(n,t,e,r,i,a,s,l,c,f){if(e==="vertical"){if(t&&n){const g=Math.min(f,a/2,s/2);return`M${r},${i+s/2} v${-(s/2-g)} a${g},${g} 0 0 1 ${g},${-g} h${a-g*2} a${g},${g} 0 0 1 ${g},${g} v${s-2*g} a${g},${g} 0 0 1 ${-g},${g} h${-(a-g*2)} a${g},${g} 0 0 1 ${-g},${-g} v${-(s/2-g)}`}const d=Math.min(f,a/2);if(t)return`M${r},${Math.max(c,i+d)} v${Math.min(0,-(c-i-d))} a${d},${d} 0 0 1 ${d},${-d} h${a-d*2} a${d},${d} 0 0 1 ${d},${d} v${Math.max(0,c-i-d)} Z`;if(n)return`M${r},${Math.min(c,i+s-d)} v${Math.max(0,s-d)} a${d},${d} 0 0 0 ${d},${d} h${a-d*2} a${d},${d} 0 0 0 ${d},${-d} v${-Math.max(0,s-d)} Z`}if(e==="horizontal"){if(t&&n){const g=Math.min(f,a/2,s/2);return`M${r+a/2},${i} h${a/2-g} a${g},${g} 0 0 1 ${g},${g} v${s-g*2} a${g},${g} 0 0 1 ${-g},${g} h${-(a-2*g)} a${g},${g} 0 0 1 ${-g},${-g} v${-(s-g*2)} a${g},${g} 0 0 1 ${g},${-g} h${a/2-g}`}const d=Math.min(f,s/2);if(t)return`M${Math.min(l,r-d)},${i} h${a} a${d},${d} 0 0 1 ${d},${d} v${s-d*2} a${d},${d} 0 0 1 ${-d},${d} h${-a} Z`;if(n)return`M${Math.max(l,r+a+d)},${i} h${-a} a${d},${d} 0 0 0 ${-d},${d} v${s-d*2} a${d},${d} 0 0 0 ${d},${d} h${a} Z`}}function PW(n){return Jr("MuiBarLabel",n)}const sy=ti("MuiBarLabel",["root","highlighted","faded","animate"]),kW=n=>{const{classes:t,seriesId:e,isFaded:r,isHighlighted:i,skipAnimation:a}=n,s={root:["root",`series-${e}`,i&&"highlighted",r&&"faded",!a&&"animate"]};return Lr(s,PW,t)},LW=n=>{const{barLabel:t,value:e,dataIndex:r,seriesId:i,height:a,width:s}=n;return t==="value"?e?e==null?void 0:e.toString():null:t({seriesId:i,dataIndex:r,value:e},{bar:{height:a,width:s}})},BW=["seriesId","dataIndex","color","isFaded","isHighlighted","classes","skipAnimation","layout","xOrigin","yOrigin"],VW=ln("text",{name:"MuiBarLabel",slot:"Root",overridesResolver:(n,t)=>[{[`&.${sy.faded}`]:t.faded},{[`&.${sy.highlighted}`]:t.highlighted},t.root]})(({theme:n})=>{var t,e,r,i;return W({},(t=n==null?void 0:n.typography)==null?void 0:t.body2,{stroke:"none",fill:(i=(r=(e=n.vars||n)==null?void 0:e.palette)==null?void 0:r.text)==null?void 0:i.primary,transition:"opacity 0.2s ease-in, fill 0.2s ease-in",textAnchor:"middle",dominantBaseline:"central",pointerEvents:"none",opacity:1,[`&.${sy.faded}`]:{opacity:.3}})});function FW(n){const t=Ei({props:n,name:"MuiBarLabel"}),e=xe(t,BW),r=k$(t);return A.jsx(VW,W({},e,r))}const UW=["seriesId","classes","color","dataIndex","barLabel","slots","slotProps","xOrigin","yOrigin","x","y","width","height","value","skipAnimation","layout"],jW=["ownerState"];function zW(n){const{seriesId:t,classes:e,color:r,dataIndex:i,barLabel:a,slots:s,slotProps:l,xOrigin:c,yOrigin:f,x:d,y:g,width:m,height:v,value:_,skipAnimation:w,layout:b}=n,S=xe(n,UW),{isFaded:C,isHighlighted:I}=GR({seriesId:t,dataIndex:i}),M={seriesId:t,classes:e,color:r,isFaded:C,isHighlighted:I,dataIndex:i,skipAnimation:w,layout:b},N=kW(M),k=(s==null?void 0:s.barLabel)??FW,O=fo({elementType:k,externalSlotProps:l==null?void 0:l.barLabel,additionalProps:W({},S,{xOrigin:c,yOrigin:f,x:d,y:g,width:m,height:v,className:N.root}),ownerState:M}),{ownerState:R}=O,D=xe(O,jW);if(!a)return null;const L=LW({barLabel:a,value:_,dataIndex:i,seriesId:t,height:v,width:m});return L?A.jsx(k,W({},D,R,{children:L})):null}function HW(n){return Jr("MuiBar",n)}ti("MuiBar",["root","series","seriesLabels"]);const w8=n=>Lr({root:["root"],series:["series"],seriesLabels:["seriesLabels"]},HW,n),GW=["bars","skipAnimation"];function $W(n){const{bars:t,skipAnimation:e}=n,r=xe(n,GW),i=w8();return A.jsx(H.Fragment,{children:t.flatMap(({seriesId:a,data:s})=>A.jsx("g",{className:i.seriesLabels,"data-series":a,children:s.map(({xOrigin:l,yOrigin:c,x:f,y:d,dataIndex:g,color:m,value:v,width:_,height:w,layout:b})=>A.jsx(zW,W({seriesId:a,dataIndex:g,value:v,color:m,xOrigin:l,yOrigin:c,x:f,y:d,width:_,height:w,skipAnimation:e??!1,layout:b??"vertical"},r),g))},a))})}function E8(n){const t=Be(),e=jt(t,LF);return n||e}function qW(){const n=Be();return jt(n,fR)}const oy=(n,t)=>{const e=`${n}-axis`,r=`${n}Axis`;return t===(n==="x"?C2:I2)?`The first \`${r}\``:`The ${e} with id "${t}"`};function WW(n,t,e,r,i,a,s){const l=i[r],c=s[a],f=n?l:c,d=n?c:l,g=n?r:a,m=n?a:r,v=n?"x":"y",_=n?"y":"x";if(!cg(f))throw new Error(`MUI X Charts: ${oy(v,g)} should be of type "band" to display the bar series of id "${t}".`);if(f.data===void 0)throw new Error(`MUI X Charts: ${oy(v,g)} should have data property.`);if(cg(d)||e_(d))throw new Error(`MUI X Charts: ${oy(_,m)} should be a continuous type to display the bar series of id "${t}".`)}function XW(n,t,e){const r=s$()??{series:{},stackingGroups:[]},i=_s().xAxisIds[0],a=No().yAxisIds[0],s=s_(),{series:l,stackingGroups:c}=r,f={};return{completedData:c.flatMap(({ids:g},m)=>{const v=n.left,_=n.left+n.width,w=n.top,b=n.top+n.height;return g.map(S=>{const C=l[S].xAxisId??i,I=l[S].yAxisId??a,M=t[C],N=e[I],k=l[S].layout==="vertical";WW(k,S,l[S],C,t,I,e);const O=k?M:N,R=M.scale,D=N.scale,L=kR(l[S],t[C],e[I]),F=O.scale.bandwidth(),{barWidth:U,offset:B}=YW({bandWidth:F,numberOfGroups:c.length,gapRatio:O.barGapRatio}),rt=m*(U+B),{stackedData:vt,data:q,layout:Z,minBarSize:it}=l[S],pt=O.data.map((_t,Mt)=>{if(q[Mt]==null)return null;const wt=vt[Mt].map(Rt=>k?D(Rt):R(Rt)),zt=Math.round(Math.min(...wt)),$t=Math.round(Math.max(...wt)),ge=l[S].stack,{barSize:Ie,startCoordinate:Ye}=KW(k,zt,$t,q[Mt],it),ht={seriesId:S,dataIndex:Mt,layout:Z,x:k?R(_t)+rt:Ye,y:k?Ye:D(_t)+rt,xOrigin:R(0)??0,yOrigin:D(0)??0,height:k?Ie:U,width:k?U:Ie,color:L(Mt),value:q[Mt],maskId:`${s}_${ge||S}_${m}_${Mt}`};if(ht.x>_||ht.x+ht.width<v||ht.y>b||ht.y+ht.height<w)return null;f[ht.maskId]||(f[ht.maskId]={id:ht.maskId,width:0,height:0,hasNegative:!1,hasPositive:!1,layout:ht.layout,xOrigin:R(0),yOrigin:D(0),x:0,y:0});const Et=f[ht.maskId];return Et.width=ht.layout==="vertical"?ht.width:Et.width+ht.width,Et.height=ht.layout==="vertical"?Et.height+ht.height:ht.height,Et.x=Math.min(Et.x===0?1/0:Et.x,ht.x),Et.y=Math.min(Et.y===0?1/0:Et.y,ht.y),Et.hasNegative=Et.hasNegative||(ht.value??0)<0,Et.hasPositive=Et.hasPositive||(ht.value??0)>0,ht}).filter(_t=>_t!==null);return{seriesId:S,data:pt}})}),masksData:Object.values(f)}}function YW({bandWidth:n,numberOfGroups:t,gapRatio:e}){if(e===0)return{barWidth:n/t,offset:0};const r=n/(t+(t-1)*e),i=e*r;return{barWidth:r,offset:i}}function KW(n,t,e,r,i){if(r===0||r==null)return{barSize:0,startCoordinate:t};const a=e-t<i,s=a?i:e-t,l=n&&r>=0,c=!n&&r<0;return a&&(l||c)?{barSize:s,startCoordinate:e-s}:{barSize:s,startCoordinate:t}}const ZW=["skipAnimation","onItemClick","borderRadius","barLabel"],QW=ln("g",{name:"MuiBarPlot",slot:"Root"})({[`& .${EW.root}`]:{transition:"opacity 0.2s ease-in, fill 0.2s ease-in"}});function JW(n){const{skipAnimation:t,onItemClick:e,borderRadius:r,barLabel:i}=n,a=xe(n,ZW),s=qW(),l=E8(s||t),{xAxis:c}=_s(),{yAxis:f}=No(),{completedData:d,masksData:g}=XW(bi(),c,f),m=!r||r<=0,v=w8();return A.jsxs(QW,{className:v.root,children:[!m&&g.map(({id:_,x:w,y:b,xOrigin:S,yOrigin:C,width:I,height:M,hasPositive:N,hasNegative:k,layout:O})=>A.jsx(MW,{maskId:_,borderRadius:r,hasNegative:k,hasPositive:N,layout:O,x:w,y:b,xOrigin:S,yOrigin:C,width:I,height:M,skipAnimation:l??!1},_)),d.map(({seriesId:_,data:w})=>A.jsx("g",{"data-series":_,className:v.series,children:w.map(({dataIndex:b,color:S,maskId:C,layout:I,x:M,xOrigin:N,y:k,yOrigin:O,width:R,height:D})=>{const L=A.jsx(RW,W({id:_,dataIndex:b,color:S,skipAnimation:l??!1,layout:I??"vertical",x:M,xOrigin:N,y:k,yOrigin:O,width:R,height:D},a,{onClick:e&&(F=>{e(F,{type:"bar",seriesId:_,dataIndex:b})})}),b);return m?L:A.jsx("g",{clipPath:`url(#${C})`,children:L},b)})},_)),i&&A.jsx($W,W({bars:d,skipAnimation:l,barLabel:i},a))]})}const tX=["message"],eX=ln("text")(({theme:n})=>W({},n.typography.body2,{stroke:"none",fill:(n.vars||n).palette.text.primary,shapeRendering:"crispEdges",textAnchor:"middle",dominantBaseline:"middle"}));function nX(n){const{message:t}=n,e=xe(n,tX),{top:r,left:i,height:a,width:s}=bi(),{localeText:l}=KR();return A.jsx(eX,W({x:i+s/2,y:r+a/2},e,{children:t??l.loading}))}const rX=["message"],iX=ln("text")(({theme:n})=>W({},n.typography.body2,{stroke:"none",fill:(n.vars||n).palette.text.primary,shapeRendering:"crispEdges",textAnchor:"middle",dominantBaseline:"middle"}));function aX(n){const{message:t}=n,e=xe(n,rX),{top:r,left:i,height:a,width:s}=bi(),{localeText:l}=KR();return A.jsx(iX,W({x:i+s/2,y:r+a/2},e,{children:t??l.noData}))}function sX(){const n=fp();return Object.values(n).every(t=>{if(!t)return!0;const{series:e,seriesOrder:r}=t;return r.every(i=>e[i].data.length===0)})}function b8(n){var e,r,i,a;const t=sX();if(n.loading){const s=((e=n.slots)==null?void 0:e.loadingOverlay)??nX;return A.jsx(s,W({},(r=n.slotProps)==null?void 0:r.loadingOverlay))}if(t){const s=((i=n.slots)==null?void 0:i.noDataOverlay)??aX;return A.jsx(s,W({},(a=n.slotProps)==null?void 0:a.noDataOverlay))}return null}const oX=[yd,Uc,Fc,Gl],lX=["xAxis","yAxis","series","width","height","margin","colors","dataset","sx","axisHighlight","grid","children","slots","slotProps","skipAnimation","loading","layout","onItemClick","highlightedItem","onHighlightChange","borderRadius","barLabel","className","hideLegend","showToolbar"],uX=n=>{var ht,Et,Rt,mt,_e;const{xAxis:t,yAxis:e,series:r,width:i,height:a,margin:s,colors:l,dataset:c,sx:f,axisHighlight:d,grid:g,children:m,slots:v,slotProps:_,skipAnimation:w,loading:b,layout:S,onItemClick:C,highlightedItem:I,onHighlightChange:M,borderRadius:N,barLabel:k,className:O}=n,R=xe(n,lX),L=`${vC()}-clip-path`,F=S==="horizontal"||S===void 0&&r.some(Nt=>Nt.layout==="horizontal"),U=H.useMemo(()=>[{id:C2,scaleType:"band",data:Array.from({length:Math.max(...r.map(Nt=>(Nt.data??c??[]).length))},(Nt,Pe)=>Pe)}],[c,r]),B=H.useMemo(()=>[{id:I2,scaleType:"band",data:Array.from({length:Math.max(...r.map(Nt=>(Nt.data??c??[]).length))},(Nt,Pe)=>Pe)}],[c,r]),rt=H.useMemo(()=>r.map(Nt=>W({type:"bar"},Nt,{layout:F?"horizontal":"vertical"})),[F,r]),vt=F?void 0:U,q=H.useMemo(()=>t?F?t:t.map(Nt=>W({scaleType:"band"},Nt)):vt,[vt,F,t]),Z=F?B:void 0,it=H.useMemo(()=>e?F?e.map(Nt=>W({scaleType:"band"},Nt)):e:Z,[Z,F,e]),pt=W({},R,{series:rt,width:i,height:a,margin:s,colors:l,dataset:c,xAxis:q,yAxis:it,highlightedItem:I,onHighlightChange:M,disableAxisListener:((ht=_==null?void 0:_.tooltip)==null?void 0:ht.trigger)!=="axis"&&(d==null?void 0:d.x)==="none"&&(d==null?void 0:d.y)==="none",className:O,skipAnimation:w,plugins:oX}),_t={onItemClick:C,slots:v,slotProps:_,borderRadius:N,barLabel:k},Mt={vertical:g==null?void 0:g.vertical,horizontal:g==null?void 0:g.horizontal},It={clipPath:`url(#${L})`},wt={id:L},zt={slots:v,slotProps:_,loading:b},$t={slots:v,slotProps:_},ge=W({},F?{y:"band"}:{x:"band"},d),Ie={slots:v,slotProps:_};return{chartsWrapperProps:{sx:f,legendPosition:(Rt=(Et=n.slotProps)==null?void 0:Et.legend)==null?void 0:Rt.position,legendDirection:(_e=(mt=n.slotProps)==null?void 0:mt.legend)==null?void 0:_e.direction},chartContainerProps:pt,barPlotProps:_t,gridProps:Mt,clipPathProps:wt,clipPathGroupProps:It,overlayProps:zt,chartsAxisProps:$t,axisHighlightProps:ge,legendProps:Ie,children:m}},cX={baseButton:qt,baseIconButton:Xr},fX={},hX=W({},cX,fX),dX=H.createContext(null);function gX(n){const{slots:t,slotProps:e={},defaultSlots:r,children:i}=n,a=H.useMemo(()=>({slots:W({},r,t),slotProps:e}),[r,t,e]);return A.jsx(dX.Provider,{value:a,children:i})}const rs=11102230246251565e-32,lr=134217729,pX=(3+8*rs)*rs;function ly(n,t,e,r,i){let a,s,l,c,f=t[0],d=r[0],g=0,m=0;d>f==d>-f?(a=f,f=t[++g]):(a=d,d=r[++m]);let v=0;if(g<n&&m<e)for(d>f==d>-f?(s=f+a,l=a-(s-f),f=t[++g]):(s=d+a,l=a-(s-d),d=r[++m]),a=s,l!==0&&(i[v++]=l);g<n&&m<e;)d>f==d>-f?(s=a+f,c=s-a,l=a-(s-c)+(f-c),f=t[++g]):(s=a+d,c=s-a,l=a-(s-c)+(d-c),d=r[++m]),a=s,l!==0&&(i[v++]=l);for(;g<n;)s=a+f,c=s-a,l=a-(s-c)+(f-c),f=t[++g],a=s,l!==0&&(i[v++]=l);for(;m<e;)s=a+d,c=s-a,l=a-(s-c)+(d-c),d=r[++m],a=s,l!==0&&(i[v++]=l);return(a!==0||v===0)&&(i[v++]=a),v}function mX(n,t){let e=t[0];for(let r=1;r<n;r++)e+=t[r];return e}function wd(n){return new Float64Array(n)}const vX=(3+16*rs)*rs,yX=(2+12*rs)*rs,xX=(9+64*rs)*rs*rs,zu=wd(4),sC=wd(8),oC=wd(12),lC=wd(16),wr=wd(4);function _X(n,t,e,r,i,a,s){let l,c,f,d,g,m,v,_,w,b,S,C,I,M,N,k,O,R;const D=n-i,L=e-i,F=t-a,U=r-a;M=D*U,m=lr*D,v=m-(m-D),_=D-v,m=lr*U,w=m-(m-U),b=U-w,N=_*b-(M-v*w-_*w-v*b),k=F*L,m=lr*F,v=m-(m-F),_=F-v,m=lr*L,w=m-(m-L),b=L-w,O=_*b-(k-v*w-_*w-v*b),S=N-O,g=N-S,zu[0]=N-(S+g)+(g-O),C=M+S,g=C-M,I=M-(C-g)+(S-g),S=I-k,g=I-S,zu[1]=I-(S+g)+(g-k),R=C+S,g=R-C,zu[2]=C-(R-g)+(S-g),zu[3]=R;let B=mX(4,zu),rt=yX*s;if(B>=rt||-B>=rt||(g=n-D,l=n-(D+g)+(g-i),g=e-L,f=e-(L+g)+(g-i),g=t-F,c=t-(F+g)+(g-a),g=r-U,d=r-(U+g)+(g-a),l===0&&c===0&&f===0&&d===0)||(rt=xX*s+pX*Math.abs(B),B+=D*d+U*l-(F*f+L*c),B>=rt||-B>=rt))return B;M=l*U,m=lr*l,v=m-(m-l),_=l-v,m=lr*U,w=m-(m-U),b=U-w,N=_*b-(M-v*w-_*w-v*b),k=c*L,m=lr*c,v=m-(m-c),_=c-v,m=lr*L,w=m-(m-L),b=L-w,O=_*b-(k-v*w-_*w-v*b),S=N-O,g=N-S,wr[0]=N-(S+g)+(g-O),C=M+S,g=C-M,I=M-(C-g)+(S-g),S=I-k,g=I-S,wr[1]=I-(S+g)+(g-k),R=C+S,g=R-C,wr[2]=C-(R-g)+(S-g),wr[3]=R;const vt=ly(4,zu,4,wr,sC);M=D*d,m=lr*D,v=m-(m-D),_=D-v,m=lr*d,w=m-(m-d),b=d-w,N=_*b-(M-v*w-_*w-v*b),k=F*f,m=lr*F,v=m-(m-F),_=F-v,m=lr*f,w=m-(m-f),b=f-w,O=_*b-(k-v*w-_*w-v*b),S=N-O,g=N-S,wr[0]=N-(S+g)+(g-O),C=M+S,g=C-M,I=M-(C-g)+(S-g),S=I-k,g=I-S,wr[1]=I-(S+g)+(g-k),R=C+S,g=R-C,wr[2]=C-(R-g)+(S-g),wr[3]=R;const q=ly(vt,sC,4,wr,oC);M=l*d,m=lr*l,v=m-(m-l),_=l-v,m=lr*d,w=m-(m-d),b=d-w,N=_*b-(M-v*w-_*w-v*b),k=c*f,m=lr*c,v=m-(m-c),_=c-v,m=lr*f,w=m-(m-f),b=f-w,O=_*b-(k-v*w-_*w-v*b),S=N-O,g=N-S,wr[0]=N-(S+g)+(g-O),C=M+S,g=C-M,I=M-(C-g)+(S-g),S=I-k,g=I-S,wr[1]=I-(S+g)+(g-k),R=C+S,g=R-C,wr[2]=C-(R-g)+(S-g),wr[3]=R;const Z=ly(q,oC,4,wr,lC);return lC[Z-1]}function g1(n,t,e,r,i,a){const s=(t-a)*(e-i),l=(n-i)*(r-a),c=s-l,f=Math.abs(s+l);return Math.abs(c)>=vX*f?c:-_X(n,t,e,r,i,a,f)}const uC=Math.pow(2,-52),p1=new Uint32Array(512);class wg{static from(t,e=SX,r=TX){const i=t.length,a=new Float64Array(i*2);for(let s=0;s<i;s++){const l=t[s];a[2*s]=e(l),a[2*s+1]=r(l)}return new wg(a)}constructor(t){const e=t.length>>1;if(e>0&&typeof t[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=t;const r=Math.max(2*e-5,0);this._triangles=new Uint32Array(r*3),this._halfedges=new Int32Array(r*3),this._hashSize=Math.ceil(Math.sqrt(e)),this._hullPrev=new Uint32Array(e),this._hullNext=new Uint32Array(e),this._hullTri=new Uint32Array(e),this._hullHash=new Int32Array(this._hashSize),this._ids=new Uint32Array(e),this._dists=new Float64Array(e),this.update()}update(){const{coords:t,_hullPrev:e,_hullNext:r,_hullTri:i,_hullHash:a}=this,s=t.length>>1;let l=1/0,c=1/0,f=-1/0,d=-1/0;for(let D=0;D<s;D++){const L=t[2*D],F=t[2*D+1];L<l&&(l=L),F<c&&(c=F),L>f&&(f=L),F>d&&(d=F),this._ids[D]=D}const g=(l+f)/2,m=(c+d)/2;let v,_,w;for(let D=0,L=1/0;D<s;D++){const F=uy(g,m,t[2*D],t[2*D+1]);F<L&&(v=D,L=F)}const b=t[2*v],S=t[2*v+1];for(let D=0,L=1/0;D<s;D++){if(D===v)continue;const F=uy(b,S,t[2*D],t[2*D+1]);F<L&&F>0&&(_=D,L=F)}let C=t[2*_],I=t[2*_+1],M=1/0;for(let D=0;D<s;D++){if(D===v||D===_)continue;const L=EX(b,S,C,I,t[2*D],t[2*D+1]);L<M&&(w=D,M=L)}let N=t[2*w],k=t[2*w+1];if(M===1/0){for(let F=0;F<s;F++)this._dists[F]=t[2*F]-t[0]||t[2*F+1]-t[1];ac(this._ids,this._dists,0,s-1);const D=new Uint32Array(s);let L=0;for(let F=0,U=-1/0;F<s;F++){const B=this._ids[F],rt=this._dists[B];rt>U&&(D[L++]=B,U=rt)}this.hull=D.subarray(0,L),this.triangles=new Uint32Array(0),this.halfedges=new Uint32Array(0);return}if(g1(b,S,C,I,N,k)<0){const D=_,L=C,F=I;_=w,C=N,I=k,w=D,N=L,k=F}const O=bX(b,S,C,I,N,k);this._cx=O.x,this._cy=O.y;for(let D=0;D<s;D++)this._dists[D]=uy(t[2*D],t[2*D+1],O.x,O.y);ac(this._ids,this._dists,0,s-1),this._hullStart=v;let R=3;r[v]=e[w]=_,r[_]=e[v]=w,r[w]=e[_]=v,i[v]=0,i[_]=1,i[w]=2,a.fill(-1),a[this._hashKey(b,S)]=v,a[this._hashKey(C,I)]=_,a[this._hashKey(N,k)]=w,this.trianglesLen=0,this._addTriangle(v,_,w,-1,-1,-1);for(let D=0,L,F;D<this._ids.length;D++){const U=this._ids[D],B=t[2*U],rt=t[2*U+1];if(D>0&&Math.abs(B-L)<=uC&&Math.abs(rt-F)<=uC||(L=B,F=rt,U===v||U===_||U===w))continue;let vt=0;for(let _t=0,Mt=this._hashKey(B,rt);_t<this._hashSize&&(vt=a[(Mt+_t)%this._hashSize],!(vt!==-1&&vt!==r[vt]));_t++);vt=e[vt];let q=vt,Z;for(;Z=r[q],g1(B,rt,t[2*q],t[2*q+1],t[2*Z],t[2*Z+1])>=0;)if(q=Z,q===vt){q=-1;break}if(q===-1)continue;let it=this._addTriangle(q,U,r[q],-1,-1,i[q]);i[U]=this._legalize(it+2),i[q]=it,R++;let pt=r[q];for(;Z=r[pt],g1(B,rt,t[2*pt],t[2*pt+1],t[2*Z],t[2*Z+1])<0;)it=this._addTriangle(pt,U,Z,i[U],-1,i[pt]),i[U]=this._legalize(it+2),r[pt]=pt,R--,pt=Z;if(q===vt)for(;Z=e[q],g1(B,rt,t[2*Z],t[2*Z+1],t[2*q],t[2*q+1])<0;)it=this._addTriangle(Z,U,q,-1,i[q],i[Z]),this._legalize(it+2),i[Z]=it,r[q]=q,R--,q=Z;this._hullStart=e[U]=q,r[q]=e[pt]=U,r[U]=pt,a[this._hashKey(B,rt)]=U,a[this._hashKey(t[2*q],t[2*q+1])]=q}this.hull=new Uint32Array(R);for(let D=0,L=this._hullStart;D<R;D++)this.hull[D]=L,L=r[L];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(t,e){return Math.floor(AX(t-this._cx,e-this._cy)*this._hashSize)%this._hashSize}_legalize(t){const{_triangles:e,_halfedges:r,coords:i}=this;let a=0,s=0;for(;;){const l=r[t],c=t-t%3;if(s=c+(t+2)%3,l===-1){if(a===0)break;t=p1[--a];continue}const f=l-l%3,d=c+(t+1)%3,g=f+(l+2)%3,m=e[s],v=e[t],_=e[d],w=e[g];if(wX(i[2*m],i[2*m+1],i[2*v],i[2*v+1],i[2*_],i[2*_+1],i[2*w],i[2*w+1])){e[t]=w,e[l]=m;const S=r[g];if(S===-1){let I=this._hullStart;do{if(this._hullTri[I]===g){this._hullTri[I]=t;break}I=this._hullPrev[I]}while(I!==this._hullStart)}this._link(t,S),this._link(l,r[s]),this._link(s,g);const C=f+(l+1)%3;a<p1.length&&(p1[a++]=C)}else{if(a===0)break;t=p1[--a]}}return s}_link(t,e){this._halfedges[t]=e,e!==-1&&(this._halfedges[e]=t)}_addTriangle(t,e,r,i,a,s){const l=this.trianglesLen;return this._triangles[l]=t,this._triangles[l+1]=e,this._triangles[l+2]=r,this._link(l,i),this._link(l+1,a),this._link(l+2,s),this.trianglesLen+=3,l}}function AX(n,t){const e=n/(Math.abs(n)+Math.abs(t));return(t>0?3-e:1+e)/4}function uy(n,t,e,r){const i=n-e,a=t-r;return i*i+a*a}function wX(n,t,e,r,i,a,s,l){const c=n-s,f=t-l,d=e-s,g=r-l,m=i-s,v=a-l,_=c*c+f*f,w=d*d+g*g,b=m*m+v*v;return c*(g*b-w*v)-f*(d*b-w*m)+_*(d*v-g*m)<0}function EX(n,t,e,r,i,a){const s=e-n,l=r-t,c=i-n,f=a-t,d=s*s+l*l,g=c*c+f*f,m=.5/(s*f-l*c),v=(f*d-l*g)*m,_=(s*g-c*d)*m;return v*v+_*_}function bX(n,t,e,r,i,a){const s=e-n,l=r-t,c=i-n,f=a-t,d=s*s+l*l,g=c*c+f*f,m=.5/(s*f-l*c),v=n+(f*d-l*g)*m,_=t+(s*g-c*d)*m;return{x:v,y:_}}function ac(n,t,e,r){if(r-e<=20)for(let i=e+1;i<=r;i++){const a=n[i],s=t[a];let l=i-1;for(;l>=e&&t[n[l]]>s;)n[l+1]=n[l--];n[l+1]=a}else{const i=e+r>>1;let a=e+1,s=r;oh(n,i,a),t[n[e]]>t[n[r]]&&oh(n,e,r),t[n[a]]>t[n[r]]&&oh(n,a,r),t[n[e]]>t[n[a]]&&oh(n,e,a);const l=n[a],c=t[l];for(;;){do a++;while(t[n[a]]<c);do s--;while(t[n[s]]>c);if(s<a)break;oh(n,a,s)}n[e+1]=n[s],n[s]=l,r-a+1>=s-e?(ac(n,t,a,r),ac(n,t,e,s-1)):(ac(n,t,e,s-1),ac(n,t,a,r))}}function oh(n,t,e){const r=n[t];n[t]=n[e],n[e]=r}function SX(n){return n[0]}function TX(n){return n[1]}const cC=1e-6;class Sl{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(t,e){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+e}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(t,e){this._+=`L${this._x1=+t},${this._y1=+e}`}arc(t,e,r){t=+t,e=+e,r=+r;const i=t+r,a=e;if(r<0)throw new Error("negative radius");this._x1===null?this._+=`M${i},${a}`:(Math.abs(this._x1-i)>cC||Math.abs(this._y1-a)>cC)&&(this._+="L"+i+","+a),r&&(this._+=`A${r},${r},0,1,1,${t-r},${e}A${r},${r},0,1,1,${this._x1=i},${this._y1=a}`)}rect(t,e,r,i){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+e}h${+r}v${+i}h${-r}Z`}value(){return this._||null}}class yx{constructor(){this._=[]}moveTo(t,e){this._.push([t,e])}closePath(){this._.push(this._[0].slice())}lineTo(t,e){this._.push([t,e])}value(){return this._.length?this._:null}}class CX{constructor(t,[e,r,i,a]=[0,0,960,500]){if(!((i=+i)>=(e=+e))||!((a=+a)>=(r=+r)))throw new Error("invalid bounds");this.delaunay=t,this._circumcenters=new Float64Array(t.points.length*2),this.vectors=new Float64Array(t.points.length*2),this.xmax=i,this.xmin=e,this.ymax=a,this.ymin=r,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:t,hull:e,triangles:r},vectors:i}=this;let a,s;const l=this.circumcenters=this._circumcenters.subarray(0,r.length/3*2);for(let w=0,b=0,S=r.length,C,I;w<S;w+=3,b+=2){const M=r[w]*2,N=r[w+1]*2,k=r[w+2]*2,O=t[M],R=t[M+1],D=t[N],L=t[N+1],F=t[k],U=t[k+1],B=D-O,rt=L-R,vt=F-O,q=U-R,Z=(B*q-rt*vt)*2;if(Math.abs(Z)<1e-9){if(a===void 0){a=s=0;for(const pt of e)a+=t[pt*2],s+=t[pt*2+1];a/=e.length,s/=e.length}const it=1e9*Math.sign((a-O)*q-(s-R)*vt);C=(O+F)/2-it*q,I=(R+U)/2+it*vt}else{const it=1/Z,pt=B*B+rt*rt,_t=vt*vt+q*q;C=O+(q*pt-rt*_t)*it,I=R+(B*_t-vt*pt)*it}l[b]=C,l[b+1]=I}let c=e[e.length-1],f,d=c*4,g,m=t[2*c],v,_=t[2*c+1];i.fill(0);for(let w=0;w<e.length;++w)c=e[w],f=d,g=m,v=_,d=c*4,m=t[2*c],_=t[2*c+1],i[f+2]=i[d]=v-_,i[f+3]=i[d+1]=m-g}render(t){const e=t==null?t=new Sl:void 0,{delaunay:{halfedges:r,inedges:i,hull:a},circumcenters:s,vectors:l}=this;if(a.length<=1)return null;for(let d=0,g=r.length;d<g;++d){const m=r[d];if(m<d)continue;const v=Math.floor(d/3)*2,_=Math.floor(m/3)*2,w=s[v],b=s[v+1],S=s[_],C=s[_+1];this._renderSegment(w,b,S,C,t)}let c,f=a[a.length-1];for(let d=0;d<a.length;++d){c=f,f=a[d];const g=Math.floor(i[f]/3)*2,m=s[g],v=s[g+1],_=c*4,w=this._project(m,v,l[_+2],l[_+3]);w&&this._renderSegment(m,v,w[0],w[1],t)}return e&&e.value()}renderBounds(t){const e=t==null?t=new Sl:void 0;return t.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),e&&e.value()}renderCell(t,e){const r=e==null?e=new Sl:void 0,i=this._clip(t);if(i===null||!i.length)return;e.moveTo(i[0],i[1]);let a=i.length;for(;i[0]===i[a-2]&&i[1]===i[a-1]&&a>1;)a-=2;for(let s=2;s<a;s+=2)(i[s]!==i[s-2]||i[s+1]!==i[s-1])&&e.lineTo(i[s],i[s+1]);return e.closePath(),r&&r.value()}*cellPolygons(){const{delaunay:{points:t}}=this;for(let e=0,r=t.length/2;e<r;++e){const i=this.cellPolygon(e);i&&(i.index=e,yield i)}}cellPolygon(t){const e=new yx;return this.renderCell(t,e),e.value()}_renderSegment(t,e,r,i,a){let s;const l=this._regioncode(t,e),c=this._regioncode(r,i);l===0&&c===0?(a.moveTo(t,e),a.lineTo(r,i)):(s=this._clipSegment(t,e,r,i,l,c))&&(a.moveTo(s[0],s[1]),a.lineTo(s[2],s[3]))}contains(t,e,r){return e=+e,e!==e||(r=+r,r!==r)?!1:this.delaunay._step(t,e,r)===t}*neighbors(t){const e=this._clip(t);if(e)for(const r of this.delaunay.neighbors(t)){const i=this._clip(r);if(i){t:for(let a=0,s=e.length;a<s;a+=2)for(let l=0,c=i.length;l<c;l+=2)if(e[a]===i[l]&&e[a+1]===i[l+1]&&e[(a+2)%s]===i[(l+c-2)%c]&&e[(a+3)%s]===i[(l+c-1)%c]){yield r;break t}}}}_cell(t){const{circumcenters:e,delaunay:{inedges:r,halfedges:i,triangles:a}}=this,s=r[t];if(s===-1)return null;const l=[];let c=s;do{const f=Math.floor(c/3);if(l.push(e[f*2],e[f*2+1]),c=c%3===2?c-2:c+1,a[c]!==t)break;c=i[c]}while(c!==s&&c!==-1);return l}_clip(t){if(t===0&&this.delaunay.hull.length===1)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const e=this._cell(t);if(e===null)return null;const{vectors:r}=this,i=t*4;return this._simplify(r[i]||r[i+1]?this._clipInfinite(t,e,r[i],r[i+1],r[i+2],r[i+3]):this._clipFinite(t,e))}_clipFinite(t,e){const r=e.length;let i=null,a,s,l=e[r-2],c=e[r-1],f,d=this._regioncode(l,c),g,m=0;for(let v=0;v<r;v+=2)if(a=l,s=c,l=e[v],c=e[v+1],f=d,d=this._regioncode(l,c),f===0&&d===0)g=m,m=0,i?i.push(l,c):i=[l,c];else{let _,w,b,S,C;if(f===0){if((_=this._clipSegment(a,s,l,c,f,d))===null)continue;[w,b,S,C]=_}else{if((_=this._clipSegment(l,c,a,s,d,f))===null)continue;[S,C,w,b]=_,g=m,m=this._edgecode(w,b),g&&m&&this._edge(t,g,m,i,i.length),i?i.push(w,b):i=[w,b]}g=m,m=this._edgecode(S,C),g&&m&&this._edge(t,g,m,i,i.length),i?i.push(S,C):i=[S,C]}if(i)g=m,m=this._edgecode(i[0],i[1]),g&&m&&this._edge(t,g,m,i,i.length);else if(this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return i}_clipSegment(t,e,r,i,a,s){const l=a<s;for(l&&([t,e,r,i,a,s]=[r,i,t,e,s,a]);;){if(a===0&&s===0)return l?[r,i,t,e]:[t,e,r,i];if(a&s)return null;let c,f,d=a||s;d&8?(c=t+(r-t)*(this.ymax-e)/(i-e),f=this.ymax):d&4?(c=t+(r-t)*(this.ymin-e)/(i-e),f=this.ymin):d&2?(f=e+(i-e)*(this.xmax-t)/(r-t),c=this.xmax):(f=e+(i-e)*(this.xmin-t)/(r-t),c=this.xmin),a?(t=c,e=f,a=this._regioncode(t,e)):(r=c,i=f,s=this._regioncode(r,i))}}_clipInfinite(t,e,r,i,a,s){let l=Array.from(e),c;if((c=this._project(l[0],l[1],r,i))&&l.unshift(c[0],c[1]),(c=this._project(l[l.length-2],l[l.length-1],a,s))&&l.push(c[0],c[1]),l=this._clipFinite(t,l))for(let f=0,d=l.length,g,m=this._edgecode(l[d-2],l[d-1]);f<d;f+=2)g=m,m=this._edgecode(l[f],l[f+1]),g&&m&&(f=this._edge(t,g,m,l,f),d=l.length);else this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(l=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return l}_edge(t,e,r,i,a){for(;e!==r;){let s,l;switch(e){case 5:e=4;continue;case 4:e=6,s=this.xmax,l=this.ymin;break;case 6:e=2;continue;case 2:e=10,s=this.xmax,l=this.ymax;break;case 10:e=8;continue;case 8:e=9,s=this.xmin,l=this.ymax;break;case 9:e=1;continue;case 1:e=5,s=this.xmin,l=this.ymin;break}(i[a]!==s||i[a+1]!==l)&&this.contains(t,s,l)&&(i.splice(a,0,s,l),a+=2)}return a}_project(t,e,r,i){let a=1/0,s,l,c;if(i<0){if(e<=this.ymin)return null;(s=(this.ymin-e)/i)<a&&(c=this.ymin,l=t+(a=s)*r)}else if(i>0){if(e>=this.ymax)return null;(s=(this.ymax-e)/i)<a&&(c=this.ymax,l=t+(a=s)*r)}if(r>0){if(t>=this.xmax)return null;(s=(this.xmax-t)/r)<a&&(l=this.xmax,c=e+(a=s)*i)}else if(r<0){if(t<=this.xmin)return null;(s=(this.xmin-t)/r)<a&&(l=this.xmin,c=e+(a=s)*i)}return[l,c]}_edgecode(t,e){return(t===this.xmin?1:t===this.xmax?2:0)|(e===this.ymin?4:e===this.ymax?8:0)}_regioncode(t,e){return(t<this.xmin?1:t>this.xmax?2:0)|(e<this.ymin?4:e>this.ymax?8:0)}_simplify(t){if(t&&t.length>4){for(let e=0;e<t.length;e+=2){const r=(e+2)%t.length,i=(e+4)%t.length;(t[e]===t[r]&&t[r]===t[i]||t[e+1]===t[r+1]&&t[r+1]===t[i+1])&&(t.splice(r,2),e-=2)}t.length||(t=null)}return t}}const IX=2*Math.PI,Hu=Math.pow;function RX(n){return n[0]}function DX(n){return n[1]}function OX(n){const{triangles:t,coords:e}=n;for(let r=0;r<t.length;r+=3){const i=2*t[r],a=2*t[r+1],s=2*t[r+2];if((e[s]-e[i])*(e[a+1]-e[i+1])-(e[a]-e[i])*(e[s+1]-e[i+1])>1e-10)return!1}return!0}function MX(n,t,e){return[n+Math.sin(n+t)*e,t+Math.cos(n-t)*e]}class g_{static from(t,e=RX,r=DX,i){return new g_("length"in t?NX(t,e,r,i):Float64Array.from(PX(t,e,r,i)))}constructor(t){this._delaunator=new wg(t),this.inedges=new Int32Array(t.length/2),this._hullIndex=new Int32Array(t.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const t=this._delaunator,e=this.points;if(t.hull&&t.hull.length>2&&OX(t)){this.collinear=Int32Array.from({length:e.length/2},(m,v)=>v).sort((m,v)=>e[2*m]-e[2*v]||e[2*m+1]-e[2*v+1]);const c=this.collinear[0],f=this.collinear[this.collinear.length-1],d=[e[2*c],e[2*c+1],e[2*f],e[2*f+1]],g=1e-8*Math.hypot(d[3]-d[1],d[2]-d[0]);for(let m=0,v=e.length/2;m<v;++m){const _=MX(e[2*m],e[2*m+1],g);e[2*m]=_[0],e[2*m+1]=_[1]}this._delaunator=new wg(e)}else delete this.collinear;const r=this.halfedges=this._delaunator.halfedges,i=this.hull=this._delaunator.hull,a=this.triangles=this._delaunator.triangles,s=this.inedges.fill(-1),l=this._hullIndex.fill(-1);for(let c=0,f=r.length;c<f;++c){const d=a[c%3===2?c-2:c+1];(r[c]===-1||s[d]===-1)&&(s[d]=c)}for(let c=0,f=i.length;c<f;++c)l[i[c]]=c;i.length<=2&&i.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=i[0],s[i[0]]=1,i.length===2&&(s[i[1]]=0,this.triangles[1]=i[1],this.triangles[2]=i[1]))}voronoi(t){return new CX(this,t)}*neighbors(t){const{inedges:e,hull:r,_hullIndex:i,halfedges:a,triangles:s,collinear:l}=this;if(l){const g=l.indexOf(t);g>0&&(yield l[g-1]),g<l.length-1&&(yield l[g+1]);return}const c=e[t];if(c===-1)return;let f=c,d=-1;do{if(yield d=s[f],f=f%3===2?f-2:f+1,s[f]!==t)return;if(f=a[f],f===-1){const g=r[(i[t]+1)%r.length];g!==d&&(yield g);return}}while(f!==c)}find(t,e,r=0){if(t=+t,t!==t||(e=+e,e!==e))return-1;const i=r;let a;for(;(a=this._step(r,t,e))>=0&&a!==r&&a!==i;)r=a;return a}_step(t,e,r){const{inedges:i,hull:a,_hullIndex:s,halfedges:l,triangles:c,points:f}=this;if(i[t]===-1||!f.length)return(t+1)%(f.length>>1);let d=t,g=Hu(e-f[t*2],2)+Hu(r-f[t*2+1],2);const m=i[t];let v=m;do{let _=c[v];const w=Hu(e-f[_*2],2)+Hu(r-f[_*2+1],2);if(w<g&&(g=w,d=_),v=v%3===2?v-2:v+1,c[v]!==t)break;if(v=l[v],v===-1){if(v=a[(s[t]+1)%a.length],v!==_&&Hu(e-f[v*2],2)+Hu(r-f[v*2+1],2)<g)return v;break}}while(v!==m);return d}render(t){const e=t==null?t=new Sl:void 0,{points:r,halfedges:i,triangles:a}=this;for(let s=0,l=i.length;s<l;++s){const c=i[s];if(c<s)continue;const f=a[s]*2,d=a[c]*2;t.moveTo(r[f],r[f+1]),t.lineTo(r[d],r[d+1])}return this.renderHull(t),e&&e.value()}renderPoints(t,e){e===void 0&&(!t||typeof t.moveTo!="function")&&(e=t,t=null),e=e==null?2:+e;const r=t==null?t=new Sl:void 0,{points:i}=this;for(let a=0,s=i.length;a<s;a+=2){const l=i[a],c=i[a+1];t.moveTo(l+e,c),t.arc(l,c,e,0,IX)}return r&&r.value()}renderHull(t){const e=t==null?t=new Sl:void 0,{hull:r,points:i}=this,a=r[0]*2,s=r.length;t.moveTo(i[a],i[a+1]);for(let l=1;l<s;++l){const c=2*r[l];t.lineTo(i[c],i[c+1])}return t.closePath(),e&&e.value()}hullPolygon(){const t=new yx;return this.renderHull(t),t.value()}renderTriangle(t,e){const r=e==null?e=new Sl:void 0,{points:i,triangles:a}=this,s=a[t*=3]*2,l=a[t+1]*2,c=a[t+2]*2;return e.moveTo(i[s],i[s+1]),e.lineTo(i[l],i[l+1]),e.lineTo(i[c],i[c+1]),e.closePath(),r&&r.value()}*trianglePolygons(){const{triangles:t}=this;for(let e=0,r=t.length/3;e<r;++e)yield this.trianglePolygon(e)}trianglePolygon(t){const e=new yx;return this.renderTriangle(t,e),e.value()}}function NX(n,t,e,r){const i=n.length,a=new Float64Array(i*2);for(let s=0;s<i;++s){const l=n[s];a[s*2]=t.call(r,l,s,n),a[s*2+1]=e.call(r,l,s,n)}return a}function*PX(n,t,e,r){let i=0;for(const a of n)yield t.call(r,a,i,n),yield e.call(r,a,i,n),++i}const mp=({svgRef:n,params:t,store:e,instance:r})=>{var k;const{disableVoronoi:i,voronoiMaxRadius:a,onItemClick:s}=t,l=jt(e,vs),{axis:c,axisIds:f}=jt(e,ei),{axis:d,axisIds:g}=jt(e,ni),m=jt(e,fR),{series:v,seriesOrder:_}=((k=jt(e,ji))==null?void 0:k.scatter)??{},w=H.useRef({}),b=H.useRef(void 0),S=H.useRef(void 0),C=f[0],I=g[0];Vi(()=>{e.update(O=>O.voronoi.isVoronoiEnabled===!i?O:W({},O,{voronoi:{isVoronoiEnabled:!i}}))},[e,i]),Vi(()=>{if(m||_===void 0||v===void 0||i)return;w.current={};let O=[];_.forEach(R=>{const{data:D,xAxisId:L,yAxisId:F}=v[R],U=c[L??C].scale,B=d[F??I].scale,rt=pg(U),vt=pg(B),q=[],Z=[];for(let it=0;it<D.length;it+=1){const{x:pt,y:_t}=D[it],Mt=rt(pt),It=vt(_t);r.isPointInside(Mt,It)&&(q.push(Mt),q.push(It),Z.push(it))}w.current[R]={seriesId:R,seriesIndexes:Z,startIndex:O.length,endIndex:O.length+q.length},O=O.concat(q)}),b.current=new g_(O),S.current=void 0},[m,C,I,v,_,c,d,l,r,i]),H.useEffect(()=>{if(n.current===null||i)return;const O=n.current;function R(Z){const it=ox(O,Z);if(!r.isPointInside(it.x,it.y))return S.current=void 0,"outside-chart";if(!b.current)return"no-point-found";const pt=b.current.find(it.x,it.y,S.current);if(pt===void 0)return"no-point-found";S.current=pt;const _t=Object.values(w.current).find(wt=>2*pt>=wt.startIndex&&2*pt<wt.endIndex);if(_t===void 0)return"no-point-found";const Mt=(2*pt-w.current[_t.seriesId].startIndex)/2,It=w.current[_t.seriesId].seriesIndexes[Mt];if(a!==void 0){const wt=b.current.points[2*pt],zt=b.current.points[2*pt+1];if((wt-it.x)**2+(zt-it.y)**2>a**2)return"outside-voronoi-max-radius"}return{seriesId:_t.seriesId,dataIndex:It}}const D=r.addInteractionListener("moveEnd",Z=>{var it,pt;Z.detail.activeGestures.pan||((it=r.cleanInteraction)==null||it.call(r),(pt=r.clearHighlight)==null||pt.call(r))}),L=r.addInteractionListener("panEnd",Z=>{var it,pt;Z.detail.activeGestures.move||((it=r.cleanInteraction)==null||it.call(r),(pt=r.clearHighlight)==null||pt.call(r))}),F=r.addInteractionListener("quickPressEnd",Z=>{var it,pt;!Z.detail.activeGestures.move&&!Z.detail.activeGestures.pan&&((it=r.cleanInteraction)==null||it.call(r),(pt=r.clearHighlight)==null||pt.call(r))}),U=Z=>{var Mt,It,wt,zt,$t,ge;const it=R(Z.detail.srcEvent);if(it==="outside-chart"){(Mt=r.cleanInteraction)==null||Mt.call(r),(It=r.clearHighlight)==null||It.call(r);return}if(it==="outside-voronoi-max-radius"||it==="no-point-found"){(wt=r.removeItemInteraction)==null||wt.call(r),(zt=r.clearHighlight)==null||zt.call(r);return}const{seriesId:pt,dataIndex:_t}=it;($t=r.setItemInteraction)==null||$t.call(r,{type:"scatter",seriesId:pt,dataIndex:_t}),(ge=r.setHighlight)==null||ge.call(r,{seriesId:pt,dataIndex:_t})},B=r.addInteractionListener("tap",Z=>{const it=R(Z.detail.srcEvent);if(typeof it!="string"&&s){const{seriesId:pt,dataIndex:_t}=it;s(Z.detail.srcEvent,{type:"scatter",seriesId:pt,dataIndex:_t})}}),rt=r.addInteractionListener("move",U),vt=r.addInteractionListener("pan",U),q=r.addInteractionListener("quickPress",U);return()=>{B.cleanup(),rt.cleanup(),D.cleanup(),vt.cleanup(),L.cleanup(),q.cleanup(),F.cleanup()}},[n,d,c,a,s,i,l,r]);const M=oo(()=>{e.update(O=>W({},O,{voronoi:W({},O.voronoi,{isVoronoiEnabled:!0})}))}),N=oo(()=>{e.update(O=>W({},O,{voronoi:W({},O.voronoi,{isVoronoiEnabled:!1})}))});return{instance:{enableVoronoi:M,disableVoronoi:N}}};mp.getDefaultizedParams=({params:n})=>W({},n,{disableVoronoi:n.disableVoronoi??!n.series.some(t=>t.type==="scatter")});mp.getInitialState=n=>({voronoi:{isVoronoiEnabled:!n.disableVoronoi}});mp.params={disableVoronoi:!0,voronoiMaxRadius:!0,onItemClick:!0};const S8=[yd,Uc,Fc,Gl,mp],kX=["children","localeText","plugins","seriesConfig","slots","slotProps"],LX=n=>{const t=Ei({props:n,name:"MuiChartDataProvider"}),{children:e,localeText:r,plugins:i=S8,seriesConfig:a,slots:s,slotProps:l}=t,c=xe(t,kX),f=qh(),d={plugins:i,seriesConfig:a,pluginParams:W({theme:f.palette.mode},c)};return{children:e,localeText:r,chartProviderProps:d,slots:s,slotProps:l}};function T8(n){const{children:t,localeText:e,chartProviderProps:r,slots:i,slotProps:a}=LX(n);return A.jsx(UG,W({},r,{children:A.jsx($$,{localeText:e,children:A.jsx(gX,{slots:i,slotProps:a,defaultSlots:hX,children:t})})}))}function fC(n){const{isReversed:t,gradientId:e,size:r,direction:i,scale:a,colorMap:s}=n;return r<=0?null:A.jsx("linearGradient",{id:e,x1:"0",x2:"0",y1:"0",y2:"0",[`${i}${t?1:2}`]:`${r}px`,gradientUnits:"userSpaceOnUse",children:s.thresholds.map((l,c)=>{const f=a(l);if(f===void 0)return null;const d=t?1-f/r:f/r;return Number.isNaN(d)?null:A.jsxs(H.Fragment,{children:[A.jsx("stop",{offset:d,stopColor:s.colors[c],stopOpacity:1}),A.jsx("stop",{offset:d,stopColor:s.colors[c+1],stopOpacity:1})]},l.toString()+c)})})}const BX=10;function hC(n){const{gradientUnits:t,isReversed:e,gradientId:r,size:i,direction:a,scale:s,colorScale:l,colorMap:c}=n,f=[c.min??0,c.max??100],d=f.map(s).filter(_=>_!==void 0);if(d.length!==2)return null;const g=typeof f[0]=="number"?ye(f[0],f[1]):z2(f[0],f[1]),m=Math.round((Math.max(...d)-Math.min(...d))/BX),v=`${f[0]}-${f[1]}-`;return A.jsx("linearGradient",{id:r,x1:"0",x2:"0",y1:"0",y2:"0",[`${a}${e?1:2}`]:t==="objectBoundingBox"?1:`${i}px`,gradientUnits:t??"userSpaceOnUse",children:Array.from({length:m+1},(_,w)=>{const b=g(w/m);if(b===void 0)return null;const S=s(b);if(S===void 0)return null;const C=e?1-S/i:S/i,I=l(b);return I===null?null:A.jsx("stop",{offset:C,stopColor:I,stopOpacity:1},v+w)})})}const VX=10,FX=n=>n?{x1:"1",x2:"0",y1:"0",y2:"0"}:{x1:"0",x2:"1",y1:"0",y2:"0"};function cy(n){const{isReversed:t,gradientId:e,colorScale:r,colorMap:i}=n,a=[i.min??0,i.max??100],s=typeof a[0]=="number"?ye(a[0],a[1]):z2(a[0],a[1]),l=VX,c=`${a[0]}-${a[1]}-`;return A.jsx("linearGradient",W({id:e},FX(t),{gradientUnits:"objectBoundingBox",children:Array.from({length:l+1},(f,d)=>{const g=d/l,m=s(g);if(m===void 0)return null;const v=r(m);return v===null?null:A.jsx("stop",{offset:g,stopColor:v,stopOpacity:1},c+d)})}))}function UX(){const{top:n,height:t,bottom:e,left:r,width:i,right:a}=bi(),s=n+t+e,l=r+i+a,c=x$(),f=_$(),{xAxis:d,xAxisIds:g}=_s(),{yAxis:m,yAxisIds:v}=No(),{zAxis:_,zAxisIds:w}=l_(),b=v.filter(I=>m[I].colorMap!==void 0),S=g.filter(I=>d[I].colorMap!==void 0),C=w.filter(I=>_[I].colorMap!==void 0);return b.length===0&&S.length===0&&C.length===0?null:A.jsxs("defs",{children:[b.map(I=>{const M=c(I),N=f(I),{colorMap:k,scale:O,colorScale:R,reverse:D}=m[I];return(k==null?void 0:k.type)==="piecewise"?A.jsx(fC,{isReversed:!D,scale:O,colorMap:k,size:s,gradientId:M,direction:"y"},M):(k==null?void 0:k.type)==="continuous"?A.jsxs(H.Fragment,{children:[A.jsx(hC,{isReversed:!D,scale:O,colorScale:R,colorMap:k,size:s,gradientId:M,direction:"y"}),A.jsx(cy,{isReversed:D,colorScale:R,colorMap:k,gradientId:N})]},M):null}),S.map(I=>{const M=c(I),N=f(I),{colorMap:k,scale:O,reverse:R,colorScale:D}=d[I];return(k==null?void 0:k.type)==="piecewise"?A.jsx(fC,{isReversed:R,scale:O,colorMap:k,size:l,gradientId:M,direction:"x"},M):(k==null?void 0:k.type)==="continuous"?A.jsxs(H.Fragment,{children:[A.jsx(hC,{isReversed:R,scale:O,colorScale:D,colorMap:k,size:l,gradientId:M,direction:"x"}),A.jsx(cy,{isReversed:R,colorScale:D,colorMap:k,gradientId:N})]},M):null}),C.map(I=>{const M=f(I),{colorMap:N,colorScale:k}=_[I];return(N==null?void 0:N.type)==="continuous"?A.jsx(cy,{colorScale:k,colorMap:N,gradientId:M},M):null})]})}const jX=["children","className","title","desc"],zX=ln("svg",{name:"MuiChartsSurface",slot:"Root"})(({ownerState:n})=>({width:n.width??"100%",height:n.height??"100%",display:"flex",position:"relative",flexDirection:"column",alignItems:"center",justifyContent:"center",overflow:"hidden",touchAction:"pan-y",userSelect:"none"})),C8=H.forwardRef(function(t,e){const r=Be(),{width:i,height:a}=jt(r,QF),{width:s,height:l}=jt(r,w4),c=u_(),f=xC(c,e),d=Ei({props:t,name:"MuiChartsSurface"}),{children:g,className:m,title:v,desc:_}=d,w=xe(d,jX),b=a>0&&i>0;return A.jsxs(zX,W({ownerState:{width:s,height:l},viewBox:`0 0 ${i} ${a}`,className:m},w,{ref:f,children:[v&&A.jsx("title",{children:v}),_&&A.jsx("desc",{children:_}),A.jsx(UX,{}),b&&g]}))}),HX=["width","height","margin","children","series","colors","dataset","desc","onAxisClick","highlightedAxis","onHighlightedAxisChange","disableVoronoi","voronoiMaxRadius","onItemClick","disableAxisListener","highlightedItem","onHighlightChange","sx","title","xAxis","yAxis","zAxis","rotationAxis","radiusAxis","skipAnimation","seriesConfig","plugins","localeText","slots","slotProps","experimentalFeatures"],I8=(n,t)=>{const e=n,{width:r,height:i,margin:a,children:s,series:l,colors:c,dataset:f,desc:d,onAxisClick:g,highlightedAxis:m,onHighlightedAxisChange:v,disableVoronoi:_,voronoiMaxRadius:w,onItemClick:b,disableAxisListener:S,highlightedItem:C,onHighlightChange:I,sx:M,title:N,xAxis:k,yAxis:O,zAxis:R,rotationAxis:D,radiusAxis:L,skipAnimation:F,seriesConfig:U,plugins:B,localeText:rt,slots:vt,slotProps:q,experimentalFeatures:Z}=e,it=xe(e,HX),pt=W({title:N,desc:d,sx:M,ref:t},it);return{chartDataProviderProps:{margin:a,series:l,colors:c,dataset:f,disableAxisListener:S,highlightedItem:C,onHighlightChange:I,onAxisClick:g,highlightedAxis:m,onHighlightedAxisChange:v,disableVoronoi:_,voronoiMaxRadius:w,onItemClick:b,xAxis:k,yAxis:O,zAxis:R,rotationAxis:D,radiusAxis:L,skipAnimation:F,width:r,height:i,localeText:rt,seriesConfig:U,experimentalFeatures:Z,plugins:B??S8,slots:vt,slotProps:q},chartsSurfaceProps:pt,children:s}},GX=(n,t)=>n==="vertical"?(t==null?void 0:t.horizontal)==="start"?"row":"row-reverse":(t==null?void 0:t.vertical)==="bottom"?"column-reverse":"column",$X=(n,t)=>{if(n==="vertical"){if((t==null?void 0:t.vertical)==="top")return"flex-start";if((t==null?void 0:t.vertical)==="bottom")return"flex-end"}if(n==="horizontal"){if((t==null?void 0:t.horizontal)==="start")return"flex-start";if((t==null?void 0:t.horizontal)==="end")return"flex-end"}return"center"},qX=ln("div",{name:"MuiChartsWrapper",slot:"Root",shouldForwardProp:n=>uD(n)&&n!=="extendVertically"})(({ownerState:n})=>({display:"flex",flexDirection:GX(n.legendDirection,n.legendPosition),flex:1,justifyContent:"center",alignItems:$X(n.legendDirection,n.legendPosition),variants:[{props:{extendVertically:!0},style:{height:"100%"}}]}));function R8(n){const{children:t,sx:e,extendVertically:r}=n,i=U$(),a=Be(),{height:s}=jt(a,w4);return A.jsx(qX,{ref:i,ownerState:n,sx:e,extendVertically:r??s===void 0,children:t})}const fy=H.forwardRef(function(t,e){var I,M,N,k;const r=Ei({props:t,name:"MuiBarChart"}),{chartsWrapperProps:i,chartContainerProps:a,barPlotProps:s,gridProps:l,clipPathProps:c,clipPathGroupProps:f,overlayProps:d,chartsAxisProps:g,axisHighlightProps:m,legendProps:v,children:_}=uX(r),{chartDataProviderProps:w,chartsSurfaceProps:b}=I8(a,e),S=((I=r.slots)==null?void 0:I.tooltip)??x8,C=(M=r.slots)==null?void 0:M.toolbar;return A.jsx(T8,W({},w,{children:A.jsxs(R8,W({},i,{children:[r.showToolbar&&C?A.jsx(C,W({},(N=r.slotProps)==null?void 0:N.toolbar)):null,!r.hideLegend&&A.jsx(_8,W({},v)),A.jsxs(C8,W({},b,{children:[A.jsx(kq,W({},l)),A.jsxs("g",W({},f,{children:[A.jsx(JW,W({},s)),A.jsx(b8,W({},d)),A.jsx(AW,W({},m))]})),A.jsx(Iq,W({},g)),A.jsx(q$,W({},c)),_]})),!r.loading&&A.jsx(S,W({},(k=r.slotProps)==null?void 0:k.tooltip))]}))}))}),WX=["classes","color","dataIndex","id","isFaded","isHighlighted","onClick","cornerRadius","startAngle","endAngle","innerRadius","outerRadius","paddingAngle","skipAnimation"];function XX(n){return Jr("MuiPieArc",n)}ti("MuiPieArc",["root","highlighted","faded","series"]);const YX=n=>{const{classes:t,id:e,isFaded:r,isHighlighted:i,dataIndex:a}=n,s={root:["root",`series-${e}`,`data-index-${a}`,i&&"highlighted",r&&"faded"]};return Lr(s,XX,t)},KX=ln("path",{name:"MuiPieArc",slot:"Root",overridesResolver:(n,t)=>t.arc})(({theme:n})=>({stroke:(n.vars||n).palette.background.paper,transitionProperty:"opacity, fill, filter",transitionDuration:`${c_}ms`,transitionTimingFunction:$R})),ZX=H.forwardRef(function(t,e){const{classes:r,color:i,dataIndex:a,id:s,isFaded:l,isHighlighted:c,onClick:f,cornerRadius:d,startAngle:g,endAngle:m,innerRadius:v,outerRadius:_,paddingAngle:w,skipAnimation:b}=t,S=xe(t,WX),C={id:s,dataIndex:a,classes:r,color:i,isFaded:l,isHighlighted:c},I=YX(C),M=A8({type:"pie",seriesId:s,dataIndex:a}),N=B$({cornerRadius:d,startAngle:g,endAngle:m,innerRadius:v,outerRadius:_,paddingAngle:w,skipAnimation:b,ref:e});return A.jsx(KX,W({onClick:f,cursor:f?"pointer":"unset",ownerState:C,className:I.root,fill:C.color,opacity:C.isFaded?.3:1,filter:C.isHighlighted?"brightness(120%)":"none",strokeWidth:1,strokeLinejoin:"round","data-highlighted":C.isHighlighted||void 0,"data-faded":C.isFaded||void 0},S,M,N))});function D8(n){const{id:t,data:e,faded:r,highlighted:i,paddingAngle:a=0,innerRadius:s=0,arcLabelRadius:l,outerRadius:c,cornerRadius:f=0}=n,{isFaded:d,isHighlighted:g}=m$();return H.useMemo(()=>e.map((v,_)=>{const w={seriesId:t,dataIndex:_},b=g(w),S=!b&&d(w),C=W({additionalRadius:0},S&&r||b&&i||{}),I=Math.max(0,rc(C.paddingAngle??a)),M=Math.max(0,C.innerRadius??s),N=Math.max(0,C.outerRadius??c+C.additionalRadius),k=C.cornerRadius??f,O=C.arcLabelRadius??l??(M+N)/2;return W({},v,C,{dataIndex:_,isFaded:S,isHighlighted:b,paddingAngle:I,innerRadius:M,outerRadius:N,cornerRadius:k,arcLabelRadius:O})}),[f,s,c,a,l,e,r,i,d,g,t])}const QX=["slots","slotProps","innerRadius","outerRadius","cornerRadius","paddingAngle","id","highlighted","faded","data","onItemClick","skipAnimation"];function JX(n){const{slots:t,slotProps:e,innerRadius:r=0,outerRadius:i,cornerRadius:a=0,paddingAngle:s=0,id:l,highlighted:c,faded:f={additionalRadius:-5},data:d,onItemClick:g,skipAnimation:m}=n,v=xe(n,QX),_=D8({innerRadius:r,outerRadius:i,cornerRadius:a,paddingAngle:s,id:l,highlighted:c,faded:f,data:d});if(d.length===0)return null;const w=(t==null?void 0:t.pieArc)??ZX;return A.jsx("g",W({},v,{children:_.map((b,S)=>A.jsx(w,W({startAngle:b.startAngle,endAngle:b.endAngle,paddingAngle:b.paddingAngle,innerRadius:b.innerRadius,outerRadius:b.outerRadius,cornerRadius:b.cornerRadius,skipAnimation:m??!1,id:l,color:b.color,dataIndex:S,isFaded:b.isFaded,isHighlighted:b.isHighlighted,onClick:g&&(C=>{g(C,{type:"pie",seriesId:l,dataIndex:S},b)})},e==null?void 0:e.pieArc),b.dataIndex))}))}const tY=["id","classes","color","startAngle","endAngle","paddingAngle","arcLabelRadius","innerRadius","outerRadius","cornerRadius","formattedArcLabel","isHighlighted","isFaded","style","skipAnimation"];function eY(n){return Jr("MuiPieArcLabel",n)}const nY=ti("MuiPieArcLabel",["root","highlighted","faded","animate","series"]),rY=n=>{const{classes:t,id:e,isFaded:r,isHighlighted:i,skipAnimation:a}=n,s={root:["root",`series-${e}`,i&&"highlighted",r&&"faded",!a&&"animate"]};return Lr(s,eY,t)},iY=ln("text",{name:"MuiPieArcLabel",slot:"Root"})(({theme:n})=>({fill:(n.vars||n).palette.text.primary,textAnchor:"middle",dominantBaseline:"middle",pointerEvents:"none",animationName:"animate-opacity",animationDuration:"0s",animationTimingFunction:$R,[`&.${nY.animate}`]:{animationDuration:`${c_}ms`},"@keyframes animate-opacity":{from:{opacity:0}}})),aY=H.forwardRef(function(t,e){const{id:r,classes:i,color:a,startAngle:s,endAngle:l,paddingAngle:c,arcLabelRadius:f,cornerRadius:d,formattedArcLabel:g,isHighlighted:m,isFaded:v,skipAnimation:_}=t,w=xe(t,tY),S=rY({id:r,classes:i,isFaded:v,isHighlighted:m,skipAnimation:_}),C=F$({cornerRadius:d,startAngle:s,endAngle:l,innerRadius:f,outerRadius:f,paddingAngle:c,skipAnimation:_,ref:e});return A.jsx(iY,W({className:S.root},w,C,{children:g}))}),sY=["arcLabel","arcLabelMinAngle","arcLabelRadius","cornerRadius","data","faded","highlighted","id","innerRadius","outerRadius","paddingAngle","skipAnimation","slotProps","slots"],oY=180/Math.PI;function lY(n,t,e){var i;if(!n||(e.endAngle-e.startAngle)*oY<t)return null;switch(n){case"label":return Qr(e.label,"arc");case"value":return(i=e.value)==null?void 0:i.toString();case"formattedValue":return e.formattedValue;default:return n(W({},e,{label:Qr(e.label,"arc")}))}}function uY(n){const{arcLabel:t,arcLabelMinAngle:e=0,arcLabelRadius:r,cornerRadius:i=0,data:a,faded:s={additionalRadius:-5},highlighted:l,id:c,innerRadius:f,outerRadius:d,paddingAngle:g=0,skipAnimation:m,slotProps:v,slots:_}=n,w=xe(n,sY),b=D8({innerRadius:f,outerRadius:d,arcLabelRadius:r,cornerRadius:i,paddingAngle:g,id:c,highlighted:l,faded:s,data:a});if(a.length===0)return null;const S=(_==null?void 0:_.pieArcLabel)??aY;return A.jsx("g",W({},w,{children:b.map(C=>A.jsx(S,W({startAngle:C.startAngle,endAngle:C.endAngle,paddingAngle:C.paddingAngle,innerRadius:C.innerRadius,outerRadius:C.outerRadius,arcLabelRadius:C.arcLabelRadius,cornerRadius:C.cornerRadius,id:c,color:C.color,isFaded:C.isFaded,isHighlighted:C.isHighlighted,formattedArcLabel:lY(t,e,C),skipAnimation:m??!1},v==null?void 0:v.pieArcLabel),C.id??C.dataIndex))}))}function _l(n,t){if(typeof n=="number")return n;if(n==="100%")return t;if(n.endsWith("%")){const e=Number.parseFloat(n.slice(0,n.length-1));if(!Number.isNaN(e))return e*t/100}if(n.endsWith("px")){const e=Number.parseFloat(n.slice(0,n.length-2));if(!Number.isNaN(e))return e}throw new Error(`MUI X Charts: Received an unknown value "${n}". It should be a number, or a string with a percentage value.`)}function dC(n,t){const{height:e,width:r}=t,{cx:i,cy:a}=n,s=Math.min(r,e)/2,l=_l(i??"50%",r),c=_l(a??"50%",e);return{cx:l,cy:c,availableRadius:s}}function cY(n){return Jr("MuiPieChart",n)}ti("MuiPieChart",["root","series","seriesLabels"]);const fY=n=>Lr({root:["root"],series:["series"],seriesLabels:["seriesLabels"]},cY,n);function hY(n){const{skipAnimation:t,slots:e,slotProps:r,onItemClick:i}=n,a=i$(),{left:s,top:l,width:c,height:f}=bi(),d=E8(t),g=fY();if(a===void 0)return null;const{series:m,seriesOrder:v}=a;return A.jsxs("g",{children:[v.map(_=>{const{innerRadius:w,outerRadius:b,cornerRadius:S,paddingAngle:C,data:I,cx:M,cy:N,highlighted:k,faded:O}=m[_],{cx:R,cy:D,availableRadius:L}=dC({cx:M,cy:N},{width:c,height:f}),F=_l(b??L,L),U=_l(w??0,L);return A.jsx("g",{className:g.series,transform:`translate(${s+R}, ${l+D})`,"data-series":_,children:A.jsx(JX,{innerRadius:U,outerRadius:F,cornerRadius:S,paddingAngle:C,id:_,data:I,skipAnimation:d,highlighted:k,faded:O,onItemClick:i,slots:e,slotProps:r})},_)}),v.map(_=>{const{innerRadius:w,outerRadius:b,arcLabelRadius:S,cornerRadius:C,paddingAngle:I,arcLabel:M,arcLabelMinAngle:N,data:k,cx:O,cy:R}=m[_],{cx:D,cy:L,availableRadius:F}=dC({cx:O,cy:R},{width:c,height:f}),U=_l(b??F,F),B=_l(w??0,F),rt=S===void 0?(U+B)/2:_l(S,F);return A.jsx("g",{className:g.seriesLabels,transform:`translate(${s+D}, ${l+L})`,"data-series":_,children:A.jsx(uY,{innerRadius:B,outerRadius:U??F,arcLabelRadius:rt,cornerRadius:C,paddingAngle:I,id:_,data:k,skipAnimation:d,arcLabel:M,arcLabelMinAngle:N,slots:e,slotProps:r})},_)})]})}const dY=[Fc,Gl],gY=["series","width","height","margin","colors","sx","skipAnimation","hideLegend","children","slots","slotProps","onItemClick","loading","highlightedItem","onHighlightChange","className","showToolbar"],gC=H.forwardRef(function(t,e){var F,U,B,rt,vt,q,Z,it;const r=Ei({props:t,name:"MuiPieChart"}),{series:i,width:a,height:s,margin:l,colors:c,sx:f,skipAnimation:d,hideLegend:g,children:m,slots:v,slotProps:_,onItemClick:w,loading:b,highlightedItem:S,onHighlightChange:C,className:I,showToolbar:M}=r,N=xe(r,gY),k=E4(l,SU),{chartDataProviderProps:O,chartsSurfaceProps:R}=I8(W({},N,{series:i.map(pt=>W({type:"pie"},pt)),width:a,height:s,margin:k,colors:c,highlightedItem:S,onHighlightChange:C,className:I,skipAnimation:d,plugins:dY}),e),D=(v==null?void 0:v.tooltip)??x8,L=(F=r.slots)==null?void 0:F.toolbar;return A.jsx(T8,W({},O,{children:A.jsxs(R8,{legendPosition:(B=(U=r.slotProps)==null?void 0:U.legend)==null?void 0:B.position,legendDirection:((vt=(rt=r==null?void 0:r.slotProps)==null?void 0:rt.legend)==null?void 0:vt.direction)??"vertical",sx:f,children:[M&&L?A.jsx(L,W({},(q=r.slotProps)==null?void 0:q.toolbar)):null,!g&&A.jsx(_8,{direction:((it=(Z=r==null?void 0:r.slotProps)==null?void 0:Z.legend)==null?void 0:it.direction)??"vertical",slots:v,slotProps:_}),A.jsxs(C8,W({},R,{children:[A.jsx(hY,{slots:v,slotProps:_,onItemClick:w}),A.jsx(b8,{loading:b,slots:v,slotProps:_}),m]})),!b&&A.jsx(D,W({trigger:"item"},_==null?void 0:_.tooltip))]})}))});function pY(){const{loading:n,error:t,summary:e,tagStats:r,monthlyFinished:i,monthlyAddedBooks:a,monthlyMemos:s,topAuthors:l,topPublishers:c,statusDistribution:f}=gF(),d=e&&(e.totalBooks>0||e.finishedBooks>0||e.readingBooks>0);return A.jsxs(ot,{sx:{maxWidth:1200,mx:"auto",mb:10},children:[A.jsx(Wg,{title:"統計",subtitle:"あなたの読書活動を可視化"}),A.jsxs(ot,{sx:{p:2},children:[n&&A.jsxs(ot,{sx:{display:"flex",alignItems:"center",gap:1,mb:2},children:[A.jsx(xx,{size:20}),A.jsx(st,{variant:"body2",children:"読み込み中..."})]}),t&&A.jsx(st,{color:"error",sx:{mb:2},children:t}),!n&&!t&&!d&&A.jsx(gn,{sx:{mb:2},children:A.jsxs(pn,{sx:{textAlign:"center",py:4},children:[A.jsx(st,{variant:"h6",color:"text.secondary",gutterBottom:!0,children:"📚 読書データがありません"}),A.jsx(st,{variant:"body2",color:"text.secondary",children:"本を追加して読書を始めると、ここに統計が表示されます"})]})}),d&&A.jsxs(A.Fragment,{children:[A.jsxs(ot,{className:"stats-summary-grid",children:[A.jsx(gn,{"data-testid":"stats-total-books",className:"stats-summary-card",children:A.jsxs(pn,{children:[A.jsx(st,{variant:"h6",children:"総冊数"}),A.jsx(st,{variant:"h4",sx:{fontWeight:"bold"},children:(e==null?void 0:e.totalBooks)??"-"})]})}),A.jsx(gn,{"data-testid":"stats-finished-books",className:"stats-summary-card",children:A.jsxs(pn,{children:[A.jsx(st,{variant:"h6",children:"読了冊数"}),A.jsx(st,{variant:"h4",sx:{fontWeight:"bold"},children:(e==null?void 0:e.finishedBooks)??"-"})]})}),A.jsx(gn,{"data-testid":"stats-reading-books",className:"stats-summary-card",children:A.jsxs(pn,{children:[A.jsx(st,{variant:"h6",children:"読書中冊数"}),A.jsx(st,{variant:"h4",sx:{fontWeight:"bold"},children:(e==null?void 0:e.readingBooks)??"-"})]})})]}),!!e&&A.jsx(gn,{sx:{mb:2},"data-testid":"chart-status-pie",children:A.jsxs(pn,{children:[A.jsx(st,{variant:"h6",sx:{mb:1},children:"ステータス内訳"}),A.jsx(gC,{height:220,series:[{data:[{id:"finished",label:"読了",value:(f==null?void 0:f.finished)??0},{id:"reading",label:"読書中",value:(f==null?void 0:f.reading)??0}],innerRadius:30,paddingAngle:2}]})]})}),A.jsx(m1,{sx:{my:2}}),A.jsx(st,{variant:"h6",sx:{mb:1},children:"月別読了冊数（直近12ヶ月）"}),A.jsx(gn,{sx:{mb:2},"data-testid":"chart-monthly-finished",children:A.jsx(pn,{children:A.jsx(fy,{xAxis:[{scaleType:"band",data:(i??[]).map(g=>g.key)}],series:[{data:(i??[]).map(g=>g.count),label:"読了冊数"}],height:260})})}),A.jsxs(ot,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",md:"1fr 1fr"},gap:2,mb:2},children:[A.jsxs(ot,{children:[A.jsx(st,{variant:"subtitle1",sx:{mb:1},children:"月別追加冊数（直近12ヶ月）"}),A.jsx(gn,{"data-testid":"chart-monthly-added",children:A.jsx(pn,{children:A.jsx(fy,{xAxis:[{scaleType:"band",data:(a??[]).map(g=>g.key)}],series:[{data:(a??[]).map(g=>g.count),label:"追加冊数",color:"#42a5f5"}],height:220})})})]}),A.jsxs(ot,{children:[A.jsx(st,{variant:"subtitle1",sx:{mb:1},children:"月別メモ数（直近12ヶ月）"}),A.jsx(gn,{"data-testid":"chart-monthly-memos",children:A.jsx(pn,{children:A.jsx(fy,{xAxis:[{scaleType:"band",data:(s??[]).map(g=>g.key)}],series:[{data:(s??[]).map(g=>g.count),label:"メモ数",color:"#9c27b0"}],height:220})})})]})]}),A.jsx(m1,{sx:{my:2}}),A.jsx(st,{variant:"h6",sx:{mb:1},children:"タグ使用頻度（上位）"}),!!(r!=null&&r.length)&&A.jsx(gn,{sx:{mb:2},"data-testid":"chart-tag-pie",children:A.jsx(pn,{children:A.jsx(gC,{height:260,series:[{data:r.slice(0,6).map(g=>({id:g.tag,label:g.tag,value:g.totalCount})),innerRadius:40,paddingAngle:2}]})})}),A.jsxs(ot,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",sm:"1fr 1fr"},gap:2},children:[((r==null?void 0:r.slice(0,10))??[]).map(g=>A.jsx(ot,{children:A.jsx(gn,{"data-testid":`tag-stat-${g.tag}`,children:A.jsxs(pn,{children:[A.jsx(st,{variant:"subtitle1",sx:{fontWeight:600},children:g.tag}),A.jsxs(st,{variant:"body2",color:"text.secondary",children:["本: ",g.bookCount," / メモ: ",g.memoCount," / 合計: ",g.totalCount]})]})})},g.tag)),(!r||r.length===0)&&!n&&A.jsx(ot,{children:A.jsx(st,{variant:"body2",color:"text.secondary",children:"タグデータがありません。"})})]}),A.jsx(m1,{sx:{my:2}}),A.jsx(st,{variant:"h6",sx:{mb:1},children:"著者トップ"}),A.jsxs(ot,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",sm:"1fr 1fr"},gap:2,mb:2},children:[((l==null?void 0:l.slice(0,10))??[]).map(g=>A.jsx(ot,{children:A.jsx(gn,{"data-testid":`author-top-${g.author}`,children:A.jsxs(pn,{children:[A.jsx(st,{variant:"subtitle1",sx:{fontWeight:600},children:g.author}),A.jsxs(st,{variant:"body2",color:"text.secondary",children:["冊数: ",g.total]})]})})},g.author)),(!l||l.length===0)&&!n&&A.jsx(ot,{children:A.jsx(st,{variant:"body2",color:"text.secondary",children:"著者データがありません。"})})]}),A.jsx(st,{variant:"h6",sx:{mb:1},children:"出版社トップ"}),A.jsxs(ot,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",sm:"1fr 1fr"},gap:2},children:[((c==null?void 0:c.slice(0,10))??[]).map(g=>A.jsx(ot,{children:A.jsx(gn,{"data-testid":`publisher-top-${g.publisher}`,children:A.jsxs(pn,{children:[A.jsx(st,{variant:"subtitle1",sx:{fontWeight:600},children:g.publisher}),A.jsxs(st,{variant:"body2",color:"text.secondary",children:["冊数: ",g.total]})]})})},g.publisher)),(!c||c.length===0)&&!n&&A.jsx(ot,{children:A.jsx(st,{variant:"body2",color:"text.secondary",children:"出版社データがありません。"})})]})]})]})]})}function mY(){const n=bC({onSwipedLeft:()=>alert("左スワイプ!"),onSwipedRight:()=>alert("右スワイプ!"),preventDefaultTouchmoveEvent:!0,trackMouse:!0});return A.jsxs("div",{style:{maxWidth:400,margin:"40px auto"},children:[A.jsx("h2",{children:"react-swipeable サンプル"}),A.jsx("div",{...n,style:{background:"#fff",border:"1px solid #ccc",padding:48,fontSize:18,textAlign:"center",userSelect:"none"},children:"このエリアを左右にスワイプ（またはドラッグ）してみてください"})]})}const vY=()=>{if(!(typeof window<"u"&&"serviceWorker"in navigator&&"PushManager"in window))return null;try{const{isOnline:t,isInstallable:e,isInstalled:r,installApp:i,shouldShowInstallPrompt:a,shouldShowManualInstallGuide:s,recordInstallPromptDismiss:l}=v2(),[c,f]=H.useState(!1),[d,g]=H.useState(!1),[m,v]=H.useState(!1),[_,w]=H.useState(!1);H.useEffect(()=>{e&&!r&&a?v(!0):e&&!r&&f(!0)},[e,r,a]),H.useEffect(()=>{s&&!r&&w(!0)},[s,r]),H.useEffect(()=>{g(!t)},[t]);const b=async()=>{try{await i(),f(!1),v(!1)}catch(k){console.error("Installation failed:",k)}},S=()=>{f(!1),l&&l()},C=()=>{v(!1),l&&l()},I=()=>{g(!1)},M=()=>{w(!1),l&&l()},N=[{icon:A.jsx(cD,{}),title:"高速起動",description:"アプリのように素早く起動"},{icon:A.jsx(fD,{}),title:"オフライン対応",description:"インターネットなしでも利用可能"},{icon:A.jsx(hD,{}),title:"ホーム画面に追加",description:"いつでも簡単にアクセス"}];return A.jsxs(A.Fragment,{children:[A.jsx(Yf,{open:c,anchorOrigin:{vertical:"bottom",horizontal:"center"},sx:{mb:8},children:A.jsx(co,{severity:"info",action:A.jsxs(ot,{sx:{display:"flex",alignItems:"center",gap:1},children:[A.jsx(qt,{color:"inherit",size:"small",startIcon:A.jsx(M1,{}),onClick:b,"data-testid":"pwa-install-button",variant:"contained",sx:{backgroundColor:"primary.main",color:"white","&:hover":{backgroundColor:"primary.dark"}},children:"インストール"}),A.jsx(Xr,{"aria-label":"close",color:"inherit",size:"small",onClick:S,children:A.jsx($0,{fontSize:"inherit"})})]}),sx:{width:"100%"},children:A.jsx(st,{variant:"body2",children:"BookMemoをホーム画面に追加して、より快適にご利用いただけます"})})}),A.jsx(Yf,{open:m,anchorOrigin:{vertical:"bottom",horizontal:"center"},sx:{mb:8,width:"100%",maxWidth:"600px"},children:A.jsx(gn,{sx:{width:"100%",boxShadow:3},children:A.jsxs(pn,{sx:{p:2},children:[A.jsxs(ot,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",mb:2},children:[A.jsx(st,{variant:"h6",component:"h2",sx:{fontWeight:"bold"},children:"📱 BookMemoをアプリとしてインストール"}),A.jsx(Xr,{size:"small",onClick:C,sx:{mt:-.5},children:A.jsx($0,{})})]}),A.jsx(st,{variant:"body2",sx:{mb:2,color:"text.secondary"},children:"より快適な読書メモ管理体験をお届けします"}),A.jsx(Ch,{direction:"row",spacing:1,sx:{mb:2,flexWrap:"wrap",gap:1},children:N.map((k,O)=>A.jsx(Dn,{icon:k.icon,label:k.title,size:"small",variant:"outlined",sx:{fontSize:"0.75rem"}},O))}),A.jsxs(ot,{sx:{display:"flex",gap:1,justifyContent:"flex-end"},children:[A.jsx(qt,{variant:"outlined",size:"small",onClick:C,children:"後で"}),A.jsx(qt,{variant:"contained",size:"small",startIcon:A.jsx(M1,{}),onClick:b,sx:{backgroundColor:"primary.main","&:hover":{backgroundColor:"primary.dark"}},children:"今すぐインストール"})]})]})})}),A.jsx(Yf,{open:d,anchorOrigin:{vertical:"top",horizontal:"center"},children:A.jsx(co,{severity:"warning",icon:A.jsx(dD,{}),action:A.jsx(Xr,{"aria-label":"close",color:"inherit",size:"small",onClick:I,children:A.jsx($0,{fontSize:"inherit"})}),sx:{width:"100%"},children:A.jsx(st,{variant:"body2",children:"オフラインです。一部の機能が制限される場合があります"})})}),A.jsx(Yf,{open:t&&d,anchorOrigin:{vertical:"top",horizontal:"center"},autoHideDuration:3e3,onClose:I,children:A.jsx(co,{severity:"success",icon:A.jsx(gD,{}),sx:{width:"100%"},children:A.jsx(st,{variant:"body2",children:"オンラインに復帰しました"})})}),A.jsx(Yf,{open:_,anchorOrigin:{vertical:"bottom",horizontal:"center"},sx:{mb:8,width:"100%",maxWidth:"600px"},children:A.jsx(gn,{sx:{width:"100%",boxShadow:3},children:A.jsxs(pn,{sx:{p:2},children:[A.jsxs(ot,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",mb:2},children:[A.jsx(st,{variant:"h6",component:"h2",sx:{fontWeight:"bold"},children:"📱 BookMemoをホーム画面に追加"}),A.jsx(Xr,{size:"small",onClick:M,sx:{mt:-.5},children:A.jsx($0,{})})]}),A.jsx(st,{variant:"body2",sx:{mb:2,color:"text.secondary"},children:"iPhoneでBookMemoをアプリとして使用するには、以下の手順でホーム画面に追加してください："}),A.jsxs(ot,{sx:{mb:2},children:[A.jsx(st,{variant:"body2",sx:{fontWeight:"bold",mb:1},children:"1. 共有ボタンをタップ"}),A.jsx(st,{variant:"body2",sx:{mb:1,pl:2},children:"Safariの下部にある「共有」ボタン（□↑）をタップします"}),A.jsx(st,{variant:"body2",sx:{fontWeight:"bold",mb:1},children:"2. 「ホーム画面に追加」を選択"}),A.jsx(st,{variant:"body2",sx:{mb:1,pl:2},children:"共有メニューから「ホーム画面に追加」を選択します"}),A.jsx(st,{variant:"body2",sx:{fontWeight:"bold",mb:1},children:"3. 追加を確認"}),A.jsx(st,{variant:"body2",sx:{pl:2},children:"「追加」をタップしてホーム画面に追加します"})]}),A.jsx(Ch,{direction:"row",spacing:1,sx:{mb:2,flexWrap:"wrap",gap:1},children:N.map((k,O)=>A.jsx(Dn,{icon:k.icon,label:k.title,size:"small",variant:"outlined",sx:{fontSize:"0.75rem"}},O))}),A.jsxs(ot,{sx:{display:"flex",gap:1,justifyContent:"flex-end"},children:[A.jsx(qt,{variant:"outlined",size:"small",onClick:M,children:"後で"}),A.jsx(qt,{variant:"contained",size:"small",onClick:M,sx:{backgroundColor:"primary.main","&:hover":{backgroundColor:"primary.dark"}},children:"手順を確認しました"})]})]})})})]})}catch(t){return console.warn("PWA hook error in PWAInstallPrompt, skipping PWA features:",t),null}},yY=()=>{try{return!(typeof Kr>"u"||!Kr.useState||!Kr.useContext||typeof window>"u"||typeof navigator>"u")}catch(n){return console.warn("React context check failed:",n),!1}},xY=n=>function(e){const[r,i]=Kr.useState(!1),[a,s]=Kr.useState(0),l=20,c=50;return Kr.useEffect(()=>{const f=()=>{if(yY()){i(!0);return}a<l?(s(d=>d+1),setTimeout(f,c)):(console.warn("React context initialization timeout, proceeding with fallback"),i(!0))};f()},[a]),r?A.jsx(n,{...e}):A.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",fontSize:"1rem",color:"#666"},children:"読み込み中..."})},dr={saveError:(n,t="")=>{try{const e={timestamp:new Date().toISOString(),error:(n==null?void 0:n.message)||(n==null?void 0:n.toString())||"Unknown error",stack:(n==null?void 0:n.stack)||"",context:t,url:window.location.href,userAgent:navigator.userAgent},r=JSON.parse(localStorage.getItem("bookmemo_error_logs")||"[]");return r.push(e),r.length>10&&r.splice(0,r.length-10),localStorage.setItem("bookmemo_error_logs",JSON.stringify(r)),console.error("🔴 PERSISTENT ERROR LOG:",e),e}catch(e){console.error("Error saving error log:",e)}},getErrors:()=>{try{return JSON.parse(localStorage.getItem("bookmemo_error_logs")||"[]")}catch{return[]}},clearErrors:()=>{localStorage.removeItem("bookmemo_error_logs")}},_Y=()=>{window.addEventListener("error",n=>{dr.saveError(n.error,"Global Error Handler")}),window.addEventListener("unhandledrejection",n=>{dr.saveError(n.reason,"Unhandled Promise Rejection")}),window.addEventListener("beforeunload",()=>{dr.getErrors().length>0&&console.log("📋 Error logs available in localStorage: bookmemo_error_logs")})},AY=()=>{if(Wr.IS_DEVELOPMENT()){console.log("🔧 Debug Info:"),console.log("- Environment:",Wr.IS_PRODUCTION()?"Production":"Development"),console.log("- Base Path:",Wr.IS_PRODUCTION()?"/project-01-bookmemo":""),console.log("- Current URL:",window.location.href),console.log("- User Agent:",navigator.userAgent);const n=dr.getErrors();n.length>0&&console.log("📋 Previous Error Logs:",n)}window.bookmemoDebug={getErrors:()=>{const n=dr.getErrors();return console.table(n),n},clearErrors:()=>{dr.clearErrors(),console.log("✅ Error logs cleared")},showDebugInfo:()=>{console.log("🔧 Current Debug Info:"),console.log("- Environment:",Wr.IS_PRODUCTION()?"Production":"Development"),console.log("- Base Path:",Wr.IS_PRODUCTION()?"/project-01-bookmemo":""),console.log("- Current URL:",window.location.href),console.log("- User Agent:",navigator.userAgent)},getCurrentRoute:()=>{const n={pathname:window.location.pathname,href:window.location.href,search:window.location.search,hash:window.location.hash,userAgent:navigator.userAgent,timestamp:new Date().toISOString()};return console.log("📍 Current Route Info:",n),n},getLocalStorage:()=>{const n={};for(let t=0;t<localStorage.length;t++){const e=localStorage.key(t);if(e)try{n[e]=JSON.parse(localStorage.getItem(e)||"")}catch{n[e]=localStorage.getItem(e)}}return console.log("💾 LocalStorage Data:",n),n},testErrorLogging:()=>{console.log("🧪 Testing error logging..."),dr.saveError(new Error("Test error from debug command"),"Debug Test"),console.log("✅ Test error logged")}},console.log("🔧 Debug commands available:"),console.log("- bookmemoDebug.getErrors() - Show error logs"),console.log("- bookmemoDebug.clearErrors() - Clear error logs"),console.log("- bookmemoDebug.showDebugInfo() - Show debug info"),console.log("- bookmemoDebug.getCurrentRoute() - Show current route info"),console.log("- bookmemoDebug.getLocalStorage() - Show localStorage data"),console.log("- bookmemoDebug.testErrorLogging() - Test error logging")},wY=wC({palette:{primary:{main:"#1976d2"},secondary:{main:"#dc004e"}},typography:{h4:{fontSize:"1.5rem","@media (min-width:600px)":{fontSize:"2rem"}},h6:{fontSize:"1rem","@media (min-width:600px)":{fontSize:"1.1rem"}},body2:{fontSize:"0.8rem","@media (min-width:600px)":{fontSize:"0.9rem"}},caption:{fontSize:"0.7rem","@media (min-width:600px)":{fontSize:"0.8rem"}}},components:{MuiCard:{styleOverrides:{root:{height:"100%",display:"flex",flexDirection:"column"}}},MuiCardContent:{styleOverrides:{root:{flex:1,display:"flex",flexDirection:"column",padding:"12px","@media (min-width:600px)":{padding:"16px"}}}},MuiTextField:{styleOverrides:{root:{"& .MuiInputBase-root":{fontSize:"0.9rem","@media (min-width:600px)":{fontSize:"1rem"}}}}},MuiButton:{styleOverrides:{root:{fontSize:"0.9rem",padding:"8px 16px","@media (min-width:600px)":{fontSize:"1rem",padding:"10px 20px"}}}},MuiChip:{styleOverrides:{root:{fontSize:"0.7rem",height:"20px","@media (min-width:600px)":{fontSize:"0.8rem",height:"24px"}}}},MuiBottomNavigation:{styleOverrides:{root:{height:"64px","@media (min-width:600px)":{height:"72px"}}}},MuiBottomNavigationAction:{styleOverrides:{root:{fontSize:"0.7rem","@media (min-width:600px)":{fontSize:"0.8rem"}}}}}});function Gu({children:n}){const{user:t,loading:e}=Pn(),r=Eg();return H.useEffect(()=>{console.log("🔍 PrivateRoute effect:",{pathname:r.pathname,user:!!t,loading:e,href:window.location.href}),e||(t?(console.log("✅ Authenticated user accessing:",r.pathname),r.pathname.startsWith("/book/")&&(console.log("📖 Book detail page accessed:",r.pathname),dr.saveError(new Error(`Book detail page accessed: ${r.pathname}`),"PrivateRoute Book Detail"))):(dr.saveError(new Error("Authentication required"),`PrivateRoute - ${r.pathname}`),console.warn("🔐 Authentication required for:",r.pathname)))},[t,e,r.pathname]),e?(console.log("⏳ Loading authentication state..."),A.jsx("div",{children:"Loading..."})):t?n:(console.warn("🚫 Unauthenticated access attempt, redirecting to login"),A.jsx(SC,{to:"/login"}))}function EY(){const n=Wh(),t=Eg(),[e,r]=H.useState(0);return H.useEffect(()=>{t.pathname.startsWith("/add")?r(1):t.pathname.startsWith("/tags")?r(2):t.pathname.startsWith("/stats")?r(3):t.pathname.startsWith("/mypage")?r(4):r(0)},[t.pathname]),A.jsxs(mD,{value:e,onChange:(i,a)=>{r(a),a===0&&n("/"),a===1&&n("/add"),a===2&&n("/tags"),a===3&&n("/stats"),a===4&&n("/mypage")},showLabels:!0,sx:{position:"fixed",bottom:0,left:0,right:0,zIndex:1e3,backgroundColor:"background.paper",borderTop:1,borderColor:"divider",height:{xs:"64px",sm:"72px"},"& .MuiBottomNavigationAction-root":{minWidth:{xs:"60px",sm:"80px"},padding:{xs:"6px 4px",sm:"8px 6px"}},"& .MuiBottomNavigationAction-label":{fontSize:{xs:"0.7rem",sm:"0.8rem"},marginTop:{xs:"2px",sm:"4px"}},"& .MuiBottomNavigationAction-iconOnly":{fontSize:{xs:"1.5rem",sm:"1.75rem"}}},children:[A.jsx(Kf,{label:"本一覧",icon:A.jsx(vD,{}),sx:{"&.Mui-selected":{color:"primary.main"}}}),A.jsx(Kf,{label:"本を追加",icon:A.jsx(yD,{}),sx:{"&.Mui-selected":{color:"primary.main"}}}),A.jsx(Kf,{label:"検索・タグ",icon:A.jsx(xD,{}),sx:{"&.Mui-selected":{color:"primary.main"}}}),A.jsx(Kf,{label:"統計",icon:A.jsx(_D,{}),sx:{"&.Mui-selected":{color:"primary.main"}}}),A.jsx(Kf,{label:"マイページ",icon:A.jsx(AD,{}),sx:{"&.Mui-selected":{color:"primary.main"}}})]})}function bY(){const n=Eg(),{user:t}=Pn(),{setGlobalError:e}=H.useContext(Tr),r=n.pathname.startsWith("/login")||n.pathname.startsWith("/signup")||!t;return H.useEffect(()=>{_Y(),AY()},[]),H.useEffect(()=>{console.log("🔄 Page changed:",{pathname:n.pathname,href:window.location.href,search:window.location.search,hash:window.location.hash}),n.pathname.startsWith("/book/")&&(console.log("📖 Book detail page route change detected"),dr.saveError(new Error(`Book detail page route change: ${n.pathname}`),"AppRoutes Book Detail Route Change"));const i=document.getElementById("app-scroll-container");i&&i.scrollTo(0,0)},[n.pathname]),H.useEffect(()=>{const i=c=>{console.error("Global error caught:",c.error),dr.saveError(c.error,"AppRoutes Global Error"),c.error&&c.error.message&&c.error.message.includes("404")?e&&e("リソースが見つかりません。ページを再読み込みしてください。"):e&&e("予期しないエラーが発生しました。ページを再読み込みしてください。")},a=c=>{console.error("Unhandled promise rejection:",c.reason),dr.saveError(c.reason,"AppRoutes Unhandled Promise Rejection"),c.reason&&c.reason.message&&(c.reason.message.includes("404")||c.reason.message.includes("Failed to fetch")),e&&e("ネットワークエラーが発生しました。接続を確認してください。")},s=c=>{c.target&&c.target.src&&(console.error("Resource loading error:",c.target.src),dr.saveError(new Error(`Resource loading failed: ${c.target.src}`),"AppRoutes Resource Error"),(c.target.src.includes("sw.js")||c.target.src.includes("manifest.webmanifest"))&&e&&e("アプリの設定ファイルの読み込みに失敗しました。ページを再読み込みしてください。"))},l=c=>{c.target&&c.target.src&&c.target.src.includes("404")&&(console.error("404 Error detected:",c.target.src),dr.saveError(new Error(`404 Error: ${c.target.src} - SPA routing issue detected`),"AppRoutes 404 Error"),e&&e("ページが見つかりません。SPAルーティングの問題の可能性があります。ページを再読み込みしてください。"))};return window.addEventListener("error",l,!0),window.addEventListener("error",i),window.addEventListener("unhandledrejection",a),window.addEventListener("error",s,!0),()=>{window.removeEventListener("error",i),window.removeEventListener("unhandledrejection",a),window.removeEventListener("error",s,!0)}},[e]),A.jsxs(A.Fragment,{children:[A.jsx(ot,{id:"app-scroll-container",sx:{height:"100vh",overflowY:"auto",WebkitOverflowScrolling:"touch",pb:r?0:{xs:"64px",sm:"72px"},background:`
            url('${Wr.PAPER_TEXTURE()}'),
            #f5f5dc
          `,backgroundSize:"100% auto, cover",backgroundRepeat:"repeat-y, no-repeat",backgroundPosition:"center top, center",backgroundAttachment:"fixed",minHeight:"100vh",width:"100%"},children:A.jsxs(TD,{children:[A.jsx(Ya,{path:"/login",element:A.jsx($k,{})}),A.jsx(Ya,{path:"/signup",element:A.jsx(qk,{})}),A.jsx(Ya,{path:"/",element:A.jsx(Gu,{children:A.jsx(Jk,{})})}),A.jsx(Ya,{path:"/add",element:A.jsx(Gu,{children:A.jsx($V,{})})}),A.jsx(Ya,{path:"/book/:id",element:A.jsx(Gu,{children:A.jsx(JV,{})})}),A.jsx(Ya,{path:"/tags",element:A.jsx(Gu,{children:A.jsx(fF,{})})}),A.jsx(Ya,{path:"/stats",element:A.jsx(Gu,{children:A.jsx(pY,{})})}),A.jsx(Ya,{path:"/mypage",element:A.jsx(Gu,{children:A.jsx(mY,{})})}),A.jsx(Ya,{path:"*",element:A.jsx(SC,{to:"/"})})]})}),!r&&A.jsx(EY,{})]})}function SY(){const n=Wr.IS_PRODUCTION()?"/project-01-bookmemo":"";return A.jsx(Gk,{children:A.jsx(Yk,{children:A.jsx(SD,{basename:n,children:A.jsxs(EC,{theme:wY,children:[A.jsx(pD,{}),A.jsx(TY,{}),A.jsx(bY,{}),typeof window<"u"&&"serviceWorker"in navigator&&!Wr.IS_DEVELOPMENT()&&A.jsx(vY,{})]})})})})}function TY(){if(Wr.IS_DEVELOPMENT()||!("serviceWorker"in navigator&&"PushManager"in window))return null;try{const{registerServiceWorker:t}=v2();return H.useEffect(()=>{t().catch(e=>{console.warn("Service Worker registration failed in PWAProvider:",e),dr.saveError(e,"PWAProvider Service Worker Registration")})},[t]),null}catch(t){return console.warn("PWA hook error, skipping PWA initialization:",t),dr.saveError(t,"PWAProvider Hook Error"),null}}const CY=xY(SY),IY=wC({palette:{mode:"light",background:{default:"#f5f7fa",paper:"#fff"},primary:{main:"#1976d2"},secondary:{main:"#f50057"},text:{primary:"#222"}},typography:{fontFamily:"Segoe UI, Helvetica Neue, Arial, sans-serif",h1:{fontSize:"1.8rem","@media (min-width:600px)":{fontSize:"2.5rem"}},h2:{fontSize:"1.5rem","@media (min-width:600px)":{fontSize:"2rem"}},h3:{fontSize:"1.3rem","@media (min-width:600px)":{fontSize:"1.6rem"}},h4:{fontSize:"1.1rem","@media (min-width:600px)":{fontSize:"1.4rem"}},h5:{fontSize:"1rem","@media (min-width:600px)":{fontSize:"1.2rem"}},h6:{fontSize:"0.9rem","@media (min-width:600px)":{fontSize:"1.1rem"}},body1:{fontSize:"0.9rem","@media (min-width:600px)":{fontSize:"1rem"}},body2:{fontSize:"0.8rem","@media (min-width:600px)":{fontSize:"0.9rem"}}},components:{MuiTextField:{styleOverrides:{root:{marginBottom:"8px","@media (min-width:600px)":{marginBottom:"16px"}}},defaultProps:{size:"small",margin:"dense"}},MuiButton:{styleOverrides:{root:{fontSize:"0.9rem",padding:"8px 16px","@media (min-width:600px)":{fontSize:"1rem",padding:"10px 20px"}}},defaultProps:{size:"medium"}},MuiCard:{styleOverrides:{root:{marginBottom:"8px","@media (min-width:600px)":{marginBottom:"16px"}}}},MuiCardContent:{styleOverrides:{root:{padding:"12px","@media (min-width:600px)":{padding:"16px"},"&:last-child":{paddingBottom:"12px","@media (min-width:600px)":{paddingBottom:"16px"}}}}},MuiPaper:{styleOverrides:{root:{padding:"12px","@media (min-width:600px)":{padding:"16px"}}}},MuiAutocomplete:{styleOverrides:{root:{marginBottom:"8px","@media (min-width:600px)":{marginBottom:"16px"}}}},MuiChip:{styleOverrides:{root:{fontSize:"0.8rem",height:"24px","@media (min-width:600px)":{fontSize:"0.9rem",height:"32px"}}}},MuiDialog:{styleOverrides:{paper:{margin:"16px",width:"calc(100% - 32px)",maxWidth:"400px","@media (min-width:600px)":{margin:"32px",width:"calc(100% - 64px)",maxWidth:"600px"}}}},MuiBottomNavigation:{styleOverrides:{root:{height:"56px","@media (min-width:600px)":{height:"64px"}}}}},breakpoints:{values:{xs:0,sm:600,md:900,lg:1200,xl:1536}},spacing:n=>`${4*n}px`});OD.createRoot(document.getElementById("root")).render(A.jsx(H.StrictMode,{children:A.jsx(EC,{theme:IY,children:A.jsx(CY,{})})}));

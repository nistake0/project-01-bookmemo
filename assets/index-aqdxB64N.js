var hN=Object.defineProperty;var pN=(t,e,n)=>e in t?hN(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var ve=(t,e,n)=>pN(t,typeof e!="symbol"?e+"":e,n);import{r as M,j as v,B as re,T as te,a as xt,b as Ke,C as kn,c as Nn,d as K3,e as mn,P as va,R as Ci,D as $a,f as Ds,g as Ga,A as Ki,h as Wa,i as v1,k as ga,l as gN,m as bx,n as C0,S as Hw,o as Q3,L as zw,p as $w,q as mN,s as yN,I as jr,t as S2,u as Ph,H as vN,F as Si,v as xa,w as Ua,M as pn,x as mo,y as xN,z as wN,E as x1,G as Ld,J as ST,K as i0,N as T2,O as C2,Q as _N,U as cd,V as bN,W as AN,_ as H,X as Be,Y as wt,Z as Nl,$ as Rt,a0 as Ot,a1 as Ea,a2 as St,a3 as jt,a4 as Pe,a5 as vt,a6 as Bd,a7 as Ue,a8 as Xh,a9 as ti,aa as Wn,ab as Rs,ac as Z3,ad as EN,ae as Sd,af as J3,ag as SN,ah as TN,ai as Sa,aj as I0,ak as CN,al as IN,am as fo,an as Dc,ao as Qc,ap as w1,aq as eR,ar as DN,as as RN,at as ON,au as tR,av as TT,aw as MN,ax as Bc,ay as ee,az as nR,aA as rR,aB as PN,aC as kN,aD as CT,aE as NN,aF as LN,aG as BN,aH as FN,aI as VN,aJ as jN,aK as UN,aL as iR,aM as aR,aN as HN,aO as zN,aP as $N,aQ as GN,aR as IT,aS as Tg,aT as WN,aU as YN,aV as sR,aW as oR,aX as qN,aY as XN,aZ as Cg,a_ as KN,a$ as QN,b0 as ZN}from"./mui-vendor-BgqbbFo8.js";import{r as Gw,a as JN,g as e5}from"./react-vendor-DJG_os-6.js";import{u as Zc,a as DT,b as t5,c as Jc,d as n5,H as r5,R as i5,e as al,N as lR}from"./utils-vendor-D9rpWvcj.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();var Ax={exports:{}},vh={},Ex={exports:{}},Sx={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var RT;function a5(){return RT||(RT=1,function(t){function e(W,G){var Q=W.length;W.push(G);e:for(;0<Q;){var Z=Q-1>>>1,de=W[Z];if(0<i(de,G))W[Z]=G,W[Q]=de,Q=Z;else break e}}function n(W){return W.length===0?null:W[0]}function r(W){if(W.length===0)return null;var G=W[0],Q=W.pop();if(Q!==G){W[0]=Q;e:for(var Z=0,de=W.length,ge=de>>>1;Z<ge;){var xe=2*(Z+1)-1,be=W[xe],ke=xe+1,he=W[ke];if(0>i(be,Q))ke<de&&0>i(he,be)?(W[Z]=he,W[ke]=Q,Z=ke):(W[Z]=be,W[xe]=Q,Z=xe);else if(ke<de&&0>i(he,Q))W[Z]=he,W[ke]=Q,Z=ke;else break e}}return G}function i(W,G){var Q=W.sortIndex-G.sortIndex;return Q!==0?Q:W.id-G.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var s=Date,o=s.now();t.unstable_now=function(){return s.now()-o}}var c=[],d=[],f=1,p=null,g=3,y=!1,x=!1,_=!1,A=!1,E=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;function D(W){for(var G=n(d);G!==null;){if(G.callback===null)r(d);else if(G.startTime<=W)r(d),G.sortIndex=G.expirationTime,e(c,G);else break;G=n(d)}}function k(W){if(_=!1,D(W),!x)if(n(c)!==null)x=!0,B||(B=!0,P());else{var G=n(d);G!==null&&X(k,G.startTime-W)}}var B=!1,O=-1,I=5,R=-1;function V(){return A?!0:!(t.unstable_now()-R<I)}function L(){if(A=!1,B){var W=t.unstable_now();R=W;var G=!0;try{e:{x=!1,_&&(_=!1,T(O),O=-1),y=!0;var Q=g;try{t:{for(D(W),p=n(c);p!==null&&!(p.expirationTime>W&&V());){var Z=p.callback;if(typeof Z=="function"){p.callback=null,g=p.priorityLevel;var de=Z(p.expirationTime<=W);if(W=t.unstable_now(),typeof de=="function"){p.callback=de,D(W),G=!0;break t}p===n(c)&&r(c),D(W)}else r(c);p=n(c)}if(p!==null)G=!0;else{var ge=n(d);ge!==null&&X(k,ge.startTime-W),G=!1}}break e}finally{p=null,g=Q,y=!1}G=void 0}}finally{G?P():B=!1}}}var P;if(typeof C=="function")P=function(){C(L)};else if(typeof MessageChannel<"u"){var F=new MessageChannel,q=F.port2;F.port1.onmessage=L,P=function(){q.postMessage(null)}}else P=function(){E(L,0)};function X(W,G){O=E(function(){W(t.unstable_now())},G)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(W){W.callback=null},t.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<W?Math.floor(1e3/W):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_next=function(W){switch(g){case 1:case 2:case 3:var G=3;break;default:G=g}var Q=g;g=G;try{return W()}finally{g=Q}},t.unstable_requestPaint=function(){A=!0},t.unstable_runWithPriority=function(W,G){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var Q=g;g=W;try{return G()}finally{g=Q}},t.unstable_scheduleCallback=function(W,G,Q){var Z=t.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?Z+Q:Z):Q=Z,W){case 1:var de=-1;break;case 2:de=250;break;case 5:de=1073741823;break;case 4:de=1e4;break;default:de=5e3}return de=Q+de,W={id:f++,callback:G,priorityLevel:W,startTime:Q,expirationTime:de,sortIndex:-1},Q>Z?(W.sortIndex=Q,e(d,W),n(c)===null&&W===n(d)&&(_?(T(O),O=-1):_=!0,X(k,Q-Z))):(W.sortIndex=de,e(c,W),x||y||(x=!0,B||(B=!0,P()))),W},t.unstable_shouldYield=V,t.unstable_wrapCallback=function(W){var G=g;return function(){var Q=g;g=G;try{return W.apply(this,arguments)}finally{g=Q}}}}(Sx)),Sx}var OT;function s5(){return OT||(OT=1,Ex.exports=a5()),Ex.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var MT;function o5(){if(MT)return vh;MT=1;var t=s5(),e=Gw(),n=JN();function r(l){var u="https://react.dev/errors/"+l;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var h=2;h<arguments.length;h++)u+="&args[]="+encodeURIComponent(arguments[h])}return"Minified React error #"+l+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(l){return!(!l||l.nodeType!==1&&l.nodeType!==9&&l.nodeType!==11)}function a(l){var u=l,h=l;if(l.alternate)for(;u.return;)u=u.return;else{l=u;do u=l,(u.flags&4098)!==0&&(h=u.return),l=u.return;while(l)}return u.tag===3?h:null}function s(l){if(l.tag===13){var u=l.memoizedState;if(u===null&&(l=l.alternate,l!==null&&(u=l.memoizedState)),u!==null)return u.dehydrated}return null}function o(l){if(a(l)!==l)throw Error(r(188))}function c(l){var u=l.alternate;if(!u){if(u=a(l),u===null)throw Error(r(188));return u!==l?null:l}for(var h=l,m=u;;){var b=h.return;if(b===null)break;var S=b.alternate;if(S===null){if(m=b.return,m!==null){h=m;continue}break}if(b.child===S.child){for(S=b.child;S;){if(S===h)return o(b),l;if(S===m)return o(b),u;S=S.sibling}throw Error(r(188))}if(h.return!==m.return)h=b,m=S;else{for(var U=!1,z=b.child;z;){if(z===h){U=!0,h=b,m=S;break}if(z===m){U=!0,m=b,h=S;break}z=z.sibling}if(!U){for(z=S.child;z;){if(z===h){U=!0,h=S,m=b;break}if(z===m){U=!0,m=S,h=b;break}z=z.sibling}if(!U)throw Error(r(189))}}if(h.alternate!==m)throw Error(r(190))}if(h.tag!==3)throw Error(r(188));return h.stateNode.current===h?l:u}function d(l){var u=l.tag;if(u===5||u===26||u===27||u===6)return l;for(l=l.child;l!==null;){if(u=d(l),u!==null)return u;l=l.sibling}return null}var f=Object.assign,p=Symbol.for("react.element"),g=Symbol.for("react.transitional.element"),y=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),_=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),E=Symbol.for("react.provider"),T=Symbol.for("react.consumer"),C=Symbol.for("react.context"),D=Symbol.for("react.forward_ref"),k=Symbol.for("react.suspense"),B=Symbol.for("react.suspense_list"),O=Symbol.for("react.memo"),I=Symbol.for("react.lazy"),R=Symbol.for("react.activity"),V=Symbol.for("react.memo_cache_sentinel"),L=Symbol.iterator;function P(l){return l===null||typeof l!="object"?null:(l=L&&l[L]||l["@@iterator"],typeof l=="function"?l:null)}var F=Symbol.for("react.client.reference");function q(l){if(l==null)return null;if(typeof l=="function")return l.$$typeof===F?null:l.displayName||l.name||null;if(typeof l=="string")return l;switch(l){case x:return"Fragment";case A:return"Profiler";case _:return"StrictMode";case k:return"Suspense";case B:return"SuspenseList";case R:return"Activity"}if(typeof l=="object")switch(l.$$typeof){case y:return"Portal";case C:return(l.displayName||"Context")+".Provider";case T:return(l._context.displayName||"Context")+".Consumer";case D:var u=l.render;return l=l.displayName,l||(l=u.displayName||u.name||"",l=l!==""?"ForwardRef("+l+")":"ForwardRef"),l;case O:return u=l.displayName||null,u!==null?u:q(l.type)||"Memo";case I:u=l._payload,l=l._init;try{return q(l(u))}catch{}}return null}var X=Array.isArray,W=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,G=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Q={pending:!1,data:null,method:null,action:null},Z=[],de=-1;function ge(l){return{current:l}}function xe(l){0>de||(l.current=Z[de],Z[de]=null,de--)}function be(l,u){de++,Z[de]=l.current,l.current=u}var ke=ge(null),he=ge(null),Se=ge(null),Ae=ge(null);function Fe(l,u){switch(be(Se,u),be(he,l),be(ke,null),u.nodeType){case 9:case 11:l=(l=u.documentElement)&&(l=l.namespaceURI)?JS(l):0;break;default:if(l=u.tagName,u=u.namespaceURI)u=JS(u),l=eT(u,l);else switch(l){case"svg":l=1;break;case"math":l=2;break;default:l=0}}xe(ke),be(ke,l)}function ae(){xe(ke),xe(he),xe(Se)}function ye(l){l.memoizedState!==null&&be(Ae,l);var u=ke.current,h=eT(u,l.type);u!==h&&(be(he,l),be(ke,h))}function pe(l){he.current===l&&(xe(ke),xe(he)),Ae.current===l&&(xe(Ae),hh._currentValue=Q)}var ie=Object.prototype.hasOwnProperty,Ve=t.unstable_scheduleCallback,we=t.unstable_cancelCallback,ze=t.unstable_shouldYield,Me=t.unstable_requestPaint,Re=t.unstable_now,Ye=t.unstable_getCurrentPriorityLevel,Ge=t.unstable_ImmediatePriority,Oe=t.unstable_UserBlockingPriority,Ne=t.unstable_NormalPriority,dt=t.unstable_LowPriority,_t=t.unstable_IdlePriority,yn=t.log,On=t.unstable_setDisableYieldValue,nt=null,it=null;function Tn(l){if(typeof yn=="function"&&On(l),it&&typeof it.setStrictMode=="function")try{it.setStrictMode(nt,l)}catch{}}var Qe=Math.clz32?Math.clz32:Jt,pt=Math.log,kt=Math.LN2;function Jt(l){return l>>>=0,l===0?32:31-(pt(l)/kt|0)|0}var An=256,Cn=4194304;function Yt(l){var u=l&42;if(u!==0)return u;switch(l&-l){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return l&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return l}}function zr(l,u,h){var m=l.pendingLanes;if(m===0)return 0;var b=0,S=l.suspendedLanes,U=l.pingedLanes;l=l.warmLanes;var z=m&134217727;return z!==0?(m=z&~S,m!==0?b=Yt(m):(U&=z,U!==0?b=Yt(U):h||(h=z&~l,h!==0&&(b=Yt(h))))):(z=m&~S,z!==0?b=Yt(z):U!==0?b=Yt(U):h||(h=m&~l,h!==0&&(b=Yt(h)))),b===0?0:u!==0&&u!==b&&(u&S)===0&&(S=b&-b,h=u&-u,S>=h||S===32&&(h&4194048)!==0)?u:b}function gt(l,u){return(l.pendingLanes&~(l.suspendedLanes&~l.pingedLanes)&u)===0}function Fn(l,u){switch(l){case 1:case 2:case 4:case 8:case 64:return u+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function qn(){var l=An;return An<<=1,(An&4194048)===0&&(An=256),l}function $r(){var l=Cn;return Cn<<=1,(Cn&62914560)===0&&(Cn=4194304),l}function mi(l){for(var u=[],h=0;31>h;h++)u.push(l);return u}function ir(l,u){l.pendingLanes|=u,u!==268435456&&(l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0)}function zl(l,u,h,m,b,S){var U=l.pendingLanes;l.pendingLanes=h,l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0,l.expiredLanes&=h,l.entangledLanes&=h,l.errorRecoveryDisabledLanes&=h,l.shellSuspendCounter=0;var z=l.entanglements,K=l.expirationTimes,le=l.hiddenUpdates;for(h=U&~h;0<h;){var Ee=31-Qe(h),Ie=1<<Ee;z[Ee]=0,K[Ee]=-1;var ue=le[Ee];if(ue!==null)for(le[Ee]=null,Ee=0;Ee<ue.length;Ee++){var fe=ue[Ee];fe!==null&&(fe.lane&=-536870913)}h&=~Ie}m!==0&&ea(l,m,0),S!==0&&b===0&&l.tag!==0&&(l.suspendedLanes|=S&~(U&~u))}function ea(l,u,h){l.pendingLanes|=u,l.suspendedLanes&=~u;var m=31-Qe(u);l.entangledLanes|=u,l.entanglements[m]=l.entanglements[m]|1073741824|h&4194090}function du(l,u){var h=l.entangledLanes|=u;for(l=l.entanglements;h;){var m=31-Qe(h),b=1<<m;b&u|l[m]&u&&(l[m]|=u),h&=~b}}function Ls(l){switch(l){case 2:l=1;break;case 8:l=4;break;case 32:l=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:l=128;break;case 268435456:l=134217728;break;default:l=0}return l}function vn(l){return l&=-l,2<l?8<l?(l&134217727)!==0?32:268435456:8:2}function ar(){var l=G.p;return l!==0?l:(l=window.event,l===void 0?32:xT(l.type))}function $l(l,u){var h=G.p;try{return G.p=l,u()}finally{G.p=h}}var Mn=Math.random().toString(36).slice(2),mr="__reactFiber$"+Mn,sr="__reactProps$"+Mn,ta="__reactContainer$"+Mn,vf="__reactEvents$"+Mn,Sy="__reactListeners$"+Mn,Po="__reactHandles$"+Mn,sp="__reactResources$"+Mn,Gl="__reactMarker$"+Mn;function ko(l){delete l[mr],delete l[sr],delete l[vf],delete l[Sy],delete l[Po]}function Bs(l){var u=l[mr];if(u)return u;for(var h=l.parentNode;h;){if(u=h[ta]||h[mr]){if(h=u.alternate,u.child!==null||h!==null&&h.child!==null)for(l=iT(l);l!==null;){if(h=l[mr])return h;l=iT(l)}return u}l=h,h=l.parentNode}return null}function Za(l){if(l=l[mr]||l[ta]){var u=l.tag;if(u===5||u===6||u===13||u===26||u===27||u===3)return l}return null}function Ja(l){var u=l.tag;if(u===5||u===26||u===27||u===6)return l.stateNode;throw Error(r(33))}function yi(l){var u=l[sp];return u||(u=l[sp]={hoistableStyles:new Map,hoistableScripts:new Map}),u}function Xn(l){l[Gl]=!0}var xf=new Set,fu={};function Ca(l,u){Fs(l,u),Fs(l+"Capture",u)}function Fs(l,u){for(fu[l]=u,l=0;l<u.length;l++)xf.add(u[l])}var op=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),lp={},Wl={};function cp(l){return ie.call(Wl,l)?!0:ie.call(lp,l)?!1:op.test(l)?Wl[l]=!0:(lp[l]=!0,!1)}function No(l,u,h){if(cp(u))if(h===null)l.removeAttribute(u);else{switch(typeof h){case"undefined":case"function":case"symbol":l.removeAttribute(u);return;case"boolean":var m=u.toLowerCase().slice(0,5);if(m!=="data-"&&m!=="aria-"){l.removeAttribute(u);return}}l.setAttribute(u,""+h)}}function es(l,u,h){if(h===null)l.removeAttribute(u);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(u);return}l.setAttribute(u,""+h)}}function Gr(l,u,h,m){if(m===null)l.removeAttribute(h);else{switch(typeof m){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(h);return}l.setAttributeNS(u,h,""+m)}}var Yl,up;function Vs(l){if(Yl===void 0)try{throw Error()}catch(h){var u=h.stack.trim().match(/\n( *(at )?)/);Yl=u&&u[1]||"",up=-1<h.stack.indexOf(`
    at`)?" (<anonymous>)":-1<h.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Yl+l+up}var hu=!1;function pu(l,u){if(!l||hu)return"";hu=!0;var h=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var m={DetermineComponentFrameRoot:function(){try{if(u){var Ie=function(){throw Error()};if(Object.defineProperty(Ie.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Ie,[])}catch(fe){var ue=fe}Reflect.construct(l,[],Ie)}else{try{Ie.call()}catch(fe){ue=fe}l.call(Ie.prototype)}}else{try{throw Error()}catch(fe){ue=fe}(Ie=l())&&typeof Ie.catch=="function"&&Ie.catch(function(){})}}catch(fe){if(fe&&ue&&typeof fe.stack=="string")return[fe.stack,ue.stack]}return[null,null]}};m.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var b=Object.getOwnPropertyDescriptor(m.DetermineComponentFrameRoot,"name");b&&b.configurable&&Object.defineProperty(m.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var S=m.DetermineComponentFrameRoot(),U=S[0],z=S[1];if(U&&z){var K=U.split(`
`),le=z.split(`
`);for(b=m=0;m<K.length&&!K[m].includes("DetermineComponentFrameRoot");)m++;for(;b<le.length&&!le[b].includes("DetermineComponentFrameRoot");)b++;if(m===K.length||b===le.length)for(m=K.length-1,b=le.length-1;1<=m&&0<=b&&K[m]!==le[b];)b--;for(;1<=m&&0<=b;m--,b--)if(K[m]!==le[b]){if(m!==1||b!==1)do if(m--,b--,0>b||K[m]!==le[b]){var Ee=`
`+K[m].replace(" at new "," at ");return l.displayName&&Ee.includes("<anonymous>")&&(Ee=Ee.replace("<anonymous>",l.displayName)),Ee}while(1<=m&&0<=b);break}}}finally{hu=!1,Error.prepareStackTrace=h}return(h=l?l.displayName||l.name:"")?Vs(h):""}function wf(l){switch(l.tag){case 26:case 27:case 5:return Vs(l.type);case 16:return Vs("Lazy");case 13:return Vs("Suspense");case 19:return Vs("SuspenseList");case 0:case 15:return pu(l.type,!1);case 11:return pu(l.type.render,!1);case 1:return pu(l.type,!0);case 31:return Vs("Activity");default:return""}}function gu(l){try{var u="";do u+=wf(l),l=l.return;while(l);return u}catch(h){return`
Error generating stack: `+h.message+`
`+h.stack}}function vi(l){switch(typeof l){case"bigint":case"boolean":case"number":case"string":case"undefined":return l;case"object":return l;default:return""}}function _f(l){var u=l.type;return(l=l.nodeName)&&l.toLowerCase()==="input"&&(u==="checkbox"||u==="radio")}function Ty(l){var u=_f(l)?"checked":"value",h=Object.getOwnPropertyDescriptor(l.constructor.prototype,u),m=""+l[u];if(!l.hasOwnProperty(u)&&typeof h<"u"&&typeof h.get=="function"&&typeof h.set=="function"){var b=h.get,S=h.set;return Object.defineProperty(l,u,{configurable:!0,get:function(){return b.call(this)},set:function(U){m=""+U,S.call(this,U)}}),Object.defineProperty(l,u,{enumerable:h.enumerable}),{getValue:function(){return m},setValue:function(U){m=""+U},stopTracking:function(){l._valueTracker=null,delete l[u]}}}}function mu(l){l._valueTracker||(l._valueTracker=Ty(l))}function bf(l){if(!l)return!1;var u=l._valueTracker;if(!u)return!0;var h=u.getValue(),m="";return l&&(m=_f(l)?l.checked?"true":"false":l.value),l=m,l!==h?(u.setValue(l),!0):!1}function ql(l){if(l=l||(typeof document<"u"?document:void 0),typeof l>"u")return null;try{return l.activeElement||l.body}catch{return l.body}}var Cy=/[\n"\\]/g;function or(l){return l.replace(Cy,function(u){return"\\"+u.charCodeAt(0).toString(16)+" "})}function ji(l,u,h,m,b,S,U,z){l.name="",U!=null&&typeof U!="function"&&typeof U!="symbol"&&typeof U!="boolean"?l.type=U:l.removeAttribute("type"),u!=null?U==="number"?(u===0&&l.value===""||l.value!=u)&&(l.value=""+vi(u)):l.value!==""+vi(u)&&(l.value=""+vi(u)):U!=="submit"&&U!=="reset"||l.removeAttribute("value"),u!=null?Lo(l,U,vi(u)):h!=null?Lo(l,U,vi(h)):m!=null&&l.removeAttribute("value"),b==null&&S!=null&&(l.defaultChecked=!!S),b!=null&&(l.checked=b&&typeof b!="function"&&typeof b!="symbol"),z!=null&&typeof z!="function"&&typeof z!="symbol"&&typeof z!="boolean"?l.name=""+vi(z):l.removeAttribute("name")}function Xl(l,u,h,m,b,S,U,z){if(S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"&&(l.type=S),u!=null||h!=null){if(!(S!=="submit"&&S!=="reset"||u!=null))return;h=h!=null?""+vi(h):"",u=u!=null?""+vi(u):h,z||u===l.value||(l.value=u),l.defaultValue=u}m=m??b,m=typeof m!="function"&&typeof m!="symbol"&&!!m,l.checked=z?l.checked:!!m,l.defaultChecked=!!m,U!=null&&typeof U!="function"&&typeof U!="symbol"&&typeof U!="boolean"&&(l.name=U)}function Lo(l,u,h){u==="number"&&ql(l.ownerDocument)===l||l.defaultValue===""+h||(l.defaultValue=""+h)}function js(l,u,h,m){if(l=l.options,u){u={};for(var b=0;b<h.length;b++)u["$"+h[b]]=!0;for(h=0;h<l.length;h++)b=u.hasOwnProperty("$"+l[h].value),l[h].selected!==b&&(l[h].selected=b),b&&m&&(l[h].defaultSelected=!0)}else{for(h=""+vi(h),u=null,b=0;b<l.length;b++){if(l[b].value===h){l[b].selected=!0,m&&(l[b].defaultSelected=!0);return}u!==null||l[b].disabled||(u=l[b])}u!==null&&(u.selected=!0)}}function cn(l,u,h){if(u!=null&&(u=""+vi(u),u!==l.value&&(l.value=u),h==null)){l.defaultValue!==u&&(l.defaultValue=u);return}l.defaultValue=h!=null?""+vi(h):""}function Kl(l,u,h,m){if(u==null){if(m!=null){if(h!=null)throw Error(r(92));if(X(m)){if(1<m.length)throw Error(r(93));m=m[0]}h=m}h==null&&(h=""),u=h}h=vi(u),l.defaultValue=h,m=l.textContent,m===h&&m!==""&&m!==null&&(l.value=m)}function na(l,u){if(u){var h=l.firstChild;if(h&&h===l.lastChild&&h.nodeType===3){h.nodeValue=u;return}}l.textContent=u}var Ql=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function dp(l,u,h){var m=u.indexOf("--")===0;h==null||typeof h=="boolean"||h===""?m?l.setProperty(u,""):u==="float"?l.cssFloat="":l[u]="":m?l.setProperty(u,h):typeof h!="number"||h===0||Ql.has(u)?u==="float"?l.cssFloat=h:l[u]=(""+h).trim():l[u]=h+"px"}function Af(l,u,h){if(u!=null&&typeof u!="object")throw Error(r(62));if(l=l.style,h!=null){for(var m in h)!h.hasOwnProperty(m)||u!=null&&u.hasOwnProperty(m)||(m.indexOf("--")===0?l.setProperty(m,""):m==="float"?l.cssFloat="":l[m]="");for(var b in u)m=u[b],u.hasOwnProperty(b)&&h[b]!==m&&dp(l,b,m)}else for(var S in u)u.hasOwnProperty(S)&&dp(l,S,u[S])}function Ef(l){if(l.indexOf("-")===-1)return!1;switch(l){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Iy=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Dy=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function yu(l){return Dy.test(""+l)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":l}var Us=null;function ra(l){return l=l.target||l.srcElement||window,l.correspondingUseElement&&(l=l.correspondingUseElement),l.nodeType===3?l.parentNode:l}var Hs=null,zs=null;function Sf(l){var u=Za(l);if(u&&(l=u.stateNode)){var h=l[sr]||null;e:switch(l=u.stateNode,u.type){case"input":if(ji(l,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name),u=h.name,h.type==="radio"&&u!=null){for(h=l;h.parentNode;)h=h.parentNode;for(h=h.querySelectorAll('input[name="'+or(""+u)+'"][type="radio"]'),u=0;u<h.length;u++){var m=h[u];if(m!==l&&m.form===l.form){var b=m[sr]||null;if(!b)throw Error(r(90));ji(m,b.value,b.defaultValue,b.defaultValue,b.checked,b.defaultChecked,b.type,b.name)}}for(u=0;u<h.length;u++)m=h[u],m.form===l.form&&bf(m)}break e;case"textarea":cn(l,h.value,h.defaultValue);break e;case"select":u=h.value,u!=null&&js(l,!!h.multiple,u,!1)}}}var ts=!1;function fp(l,u,h){if(ts)return l(u,h);ts=!0;try{var m=l(u);return m}finally{if(ts=!1,(Hs!==null||zs!==null)&&(ag(),Hs&&(u=Hs,l=zs,zs=Hs=null,Sf(u),l)))for(u=0;u<l.length;u++)Sf(l[u])}}function Zl(l,u){var h=l.stateNode;if(h===null)return null;var m=h[sr]||null;if(m===null)return null;h=m[u];e:switch(u){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(m=!m.disabled)||(l=l.type,m=!(l==="button"||l==="input"||l==="select"||l==="textarea")),l=!m;break e;default:l=!1}if(l)return null;if(h&&typeof h!="function")throw Error(r(231,u,typeof h));return h}var Ia=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ia=!1;if(Ia)try{var Jl={};Object.defineProperty(Jl,"passive",{get:function(){ia=!0}}),window.addEventListener("test",Jl,Jl),window.removeEventListener("test",Jl,Jl)}catch{ia=!1}var ns=null,Bo=null,$s=null;function Tf(){if($s)return $s;var l,u=Bo,h=u.length,m,b="value"in ns?ns.value:ns.textContent,S=b.length;for(l=0;l<h&&u[l]===b[l];l++);var U=h-l;for(m=1;m<=U&&u[h-m]===b[S-m];m++);return $s=b.slice(l,1<m?1-m:void 0)}function rs(l){var u=l.keyCode;return"charCode"in l?(l=l.charCode,l===0&&u===13&&(l=13)):l=u,l===10&&(l=13),32<=l||l===13?l:0}function is(){return!0}function Cf(){return!1}function Or(l){function u(h,m,b,S,U){this._reactName=h,this._targetInst=b,this.type=m,this.nativeEvent=S,this.target=U,this.currentTarget=null;for(var z in l)l.hasOwnProperty(z)&&(h=l[z],this[z]=h?h(S):S[z]);return this.isDefaultPrevented=(S.defaultPrevented!=null?S.defaultPrevented:S.returnValue===!1)?is:Cf,this.isPropagationStopped=Cf,this}return f(u.prototype,{preventDefault:function(){this.defaultPrevented=!0;var h=this.nativeEvent;h&&(h.preventDefault?h.preventDefault():typeof h.returnValue!="unknown"&&(h.returnValue=!1),this.isDefaultPrevented=is)},stopPropagation:function(){var h=this.nativeEvent;h&&(h.stopPropagation?h.stopPropagation():typeof h.cancelBubble!="unknown"&&(h.cancelBubble=!0),this.isPropagationStopped=is)},persist:function(){},isPersistent:is}),u}var en={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(l){return l.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},vu=Or(en),ec=f({},en,{view:0,detail:0}),hp=Or(ec),xu,wu,as,tc=f({},ec,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ic,button:0,buttons:0,relatedTarget:function(l){return l.relatedTarget===void 0?l.fromElement===l.srcElement?l.toElement:l.fromElement:l.relatedTarget},movementX:function(l){return"movementX"in l?l.movementX:(l!==as&&(as&&l.type==="mousemove"?(xu=l.screenX-as.screenX,wu=l.screenY-as.screenY):wu=xu=0,as=l),xu)},movementY:function(l){return"movementY"in l?l.movementY:wu}}),aa=Or(tc),pp=f({},tc,{dataTransfer:0}),Ry=Or(pp),nc=f({},ec,{relatedTarget:0}),_u=Or(nc),If=f({},en,{animationName:0,elapsedTime:0,pseudoElement:0}),bu=Or(If),gp=f({},en,{clipboardData:function(l){return"clipboardData"in l?l.clipboardData:window.clipboardData}}),Au=Or(gp),Oy=f({},en,{data:0}),Df=Or(Oy),rc={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},mp={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},yp={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Rf(l){var u=this.nativeEvent;return u.getModifierState?u.getModifierState(l):(l=yp[l])?!!u[l]:!1}function ic(){return Rf}var vp=f({},ec,{key:function(l){if(l.key){var u=rc[l.key]||l.key;if(u!=="Unidentified")return u}return l.type==="keypress"?(l=rs(l),l===13?"Enter":String.fromCharCode(l)):l.type==="keydown"||l.type==="keyup"?mp[l.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ic,charCode:function(l){return l.type==="keypress"?rs(l):0},keyCode:function(l){return l.type==="keydown"||l.type==="keyup"?l.keyCode:0},which:function(l){return l.type==="keypress"?rs(l):l.type==="keydown"||l.type==="keyup"?l.keyCode:0}}),Eu=Or(vp),xp=f({},tc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Of=Or(xp),Gs=f({},ec,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ic}),wp=Or(Gs),_p=f({},en,{propertyName:0,elapsedTime:0,pseudoElement:0}),bp=Or(_p),Ap=f({},tc,{deltaX:function(l){return"deltaX"in l?l.deltaX:"wheelDeltaX"in l?-l.wheelDeltaX:0},deltaY:function(l){return"deltaY"in l?l.deltaY:"wheelDeltaY"in l?-l.wheelDeltaY:"wheelDelta"in l?-l.wheelDelta:0},deltaZ:0,deltaMode:0}),Su=Or(Ap),xi=f({},en,{newState:0,oldState:0}),Ep=Or(xi),Sp=[9,13,27,32],ss=Ia&&"CompositionEvent"in window,w=null;Ia&&"documentMode"in document&&(w=document.documentMode);var N=Ia&&"TextEvent"in window&&!w,j=Ia&&(!ss||w&&8<w&&11>=w),$=" ",se=!1;function me(l,u){switch(l){case"keyup":return Sp.indexOf(u.keyCode)!==-1;case"keydown":return u.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Le(l){return l=l.detail,typeof l=="object"&&"data"in l?l.data:null}var Nt=!1;function yr(l,u){switch(l){case"compositionend":return Le(u);case"keypress":return u.which!==32?null:(se=!0,$);case"textInput":return l=u.data,l===$&&se?null:l;default:return null}}function Lt(l,u){if(Nt)return l==="compositionend"||!ss&&me(l,u)?(l=Tf(),$s=Bo=ns=null,Nt=!1,l):null;switch(l){case"paste":return null;case"keypress":if(!(u.ctrlKey||u.altKey||u.metaKey)||u.ctrlKey&&u.altKey){if(u.char&&1<u.char.length)return u.char;if(u.which)return String.fromCharCode(u.which)}return null;case"compositionend":return j&&u.locale!=="ko"?null:u.data;default:return null}}var Mr={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function vr(l){var u=l&&l.nodeName&&l.nodeName.toLowerCase();return u==="input"?!!Mr[l.type]:u==="textarea"}function Ws(l,u,h,m){Hs?zs?zs.push(m):zs=[m]:Hs=m,u=dg(u,"onChange"),0<u.length&&(h=new vu("onChange","change",null,h,m),l.push({event:h,listeners:u}))}var Wr=null,os=null;function Mf(l){qS(l,0)}function Tp(l){var u=Ja(l);if(bf(u))return l}function gA(l,u){if(l==="change")return u}var mA=!1;if(Ia){var My;if(Ia){var Py="oninput"in document;if(!Py){var yA=document.createElement("div");yA.setAttribute("oninput","return;"),Py=typeof yA.oninput=="function"}My=Py}else My=!1;mA=My&&(!document.documentMode||9<document.documentMode)}function vA(){Wr&&(Wr.detachEvent("onpropertychange",xA),os=Wr=null)}function xA(l){if(l.propertyName==="value"&&Tp(os)){var u=[];Ws(u,os,l,ra(l)),fp(Mf,u)}}function z6(l,u,h){l==="focusin"?(vA(),Wr=u,os=h,Wr.attachEvent("onpropertychange",xA)):l==="focusout"&&vA()}function $6(l){if(l==="selectionchange"||l==="keyup"||l==="keydown")return Tp(os)}function G6(l,u){if(l==="click")return Tp(u)}function W6(l,u){if(l==="input"||l==="change")return Tp(u)}function Y6(l,u){return l===u&&(l!==0||1/l===1/u)||l!==l&&u!==u}var Ui=typeof Object.is=="function"?Object.is:Y6;function Pf(l,u){if(Ui(l,u))return!0;if(typeof l!="object"||l===null||typeof u!="object"||u===null)return!1;var h=Object.keys(l),m=Object.keys(u);if(h.length!==m.length)return!1;for(m=0;m<h.length;m++){var b=h[m];if(!ie.call(u,b)||!Ui(l[b],u[b]))return!1}return!0}function wA(l){for(;l&&l.firstChild;)l=l.firstChild;return l}function _A(l,u){var h=wA(l);l=0;for(var m;h;){if(h.nodeType===3){if(m=l+h.textContent.length,l<=u&&m>=u)return{node:h,offset:u-l};l=m}e:{for(;h;){if(h.nextSibling){h=h.nextSibling;break e}h=h.parentNode}h=void 0}h=wA(h)}}function bA(l,u){return l&&u?l===u?!0:l&&l.nodeType===3?!1:u&&u.nodeType===3?bA(l,u.parentNode):"contains"in l?l.contains(u):l.compareDocumentPosition?!!(l.compareDocumentPosition(u)&16):!1:!1}function AA(l){l=l!=null&&l.ownerDocument!=null&&l.ownerDocument.defaultView!=null?l.ownerDocument.defaultView:window;for(var u=ql(l.document);u instanceof l.HTMLIFrameElement;){try{var h=typeof u.contentWindow.location.href=="string"}catch{h=!1}if(h)l=u.contentWindow;else break;u=ql(l.document)}return u}function ky(l){var u=l&&l.nodeName&&l.nodeName.toLowerCase();return u&&(u==="input"&&(l.type==="text"||l.type==="search"||l.type==="tel"||l.type==="url"||l.type==="password")||u==="textarea"||l.contentEditable==="true")}var q6=Ia&&"documentMode"in document&&11>=document.documentMode,Tu=null,Ny=null,kf=null,Ly=!1;function EA(l,u,h){var m=h.window===h?h.document:h.nodeType===9?h:h.ownerDocument;Ly||Tu==null||Tu!==ql(m)||(m=Tu,"selectionStart"in m&&ky(m)?m={start:m.selectionStart,end:m.selectionEnd}:(m=(m.ownerDocument&&m.ownerDocument.defaultView||window).getSelection(),m={anchorNode:m.anchorNode,anchorOffset:m.anchorOffset,focusNode:m.focusNode,focusOffset:m.focusOffset}),kf&&Pf(kf,m)||(kf=m,m=dg(Ny,"onSelect"),0<m.length&&(u=new vu("onSelect","select",null,u,h),l.push({event:u,listeners:m}),u.target=Tu)))}function ac(l,u){var h={};return h[l.toLowerCase()]=u.toLowerCase(),h["Webkit"+l]="webkit"+u,h["Moz"+l]="moz"+u,h}var Cu={animationend:ac("Animation","AnimationEnd"),animationiteration:ac("Animation","AnimationIteration"),animationstart:ac("Animation","AnimationStart"),transitionrun:ac("Transition","TransitionRun"),transitionstart:ac("Transition","TransitionStart"),transitioncancel:ac("Transition","TransitionCancel"),transitionend:ac("Transition","TransitionEnd")},By={},SA={};Ia&&(SA=document.createElement("div").style,"AnimationEvent"in window||(delete Cu.animationend.animation,delete Cu.animationiteration.animation,delete Cu.animationstart.animation),"TransitionEvent"in window||delete Cu.transitionend.transition);function sc(l){if(By[l])return By[l];if(!Cu[l])return l;var u=Cu[l],h;for(h in u)if(u.hasOwnProperty(h)&&h in SA)return By[l]=u[h];return l}var TA=sc("animationend"),CA=sc("animationiteration"),IA=sc("animationstart"),X6=sc("transitionrun"),K6=sc("transitionstart"),Q6=sc("transitioncancel"),DA=sc("transitionend"),RA=new Map,Fy="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Fy.push("scrollEnd");function Da(l,u){RA.set(l,u),Ca(u,[l])}var OA=new WeakMap;function sa(l,u){if(typeof l=="object"&&l!==null){var h=OA.get(l);return h!==void 0?h:(u={value:l,source:u,stack:gu(u)},OA.set(l,u),u)}return{value:l,source:u,stack:gu(u)}}var oa=[],Iu=0,Vy=0;function Cp(){for(var l=Iu,u=Vy=Iu=0;u<l;){var h=oa[u];oa[u++]=null;var m=oa[u];oa[u++]=null;var b=oa[u];oa[u++]=null;var S=oa[u];if(oa[u++]=null,m!==null&&b!==null){var U=m.pending;U===null?b.next=b:(b.next=U.next,U.next=b),m.pending=b}S!==0&&MA(h,b,S)}}function Ip(l,u,h,m){oa[Iu++]=l,oa[Iu++]=u,oa[Iu++]=h,oa[Iu++]=m,Vy|=m,l.lanes|=m,l=l.alternate,l!==null&&(l.lanes|=m)}function jy(l,u,h,m){return Ip(l,u,h,m),Dp(l)}function Du(l,u){return Ip(l,null,null,u),Dp(l)}function MA(l,u,h){l.lanes|=h;var m=l.alternate;m!==null&&(m.lanes|=h);for(var b=!1,S=l.return;S!==null;)S.childLanes|=h,m=S.alternate,m!==null&&(m.childLanes|=h),S.tag===22&&(l=S.stateNode,l===null||l._visibility&1||(b=!0)),l=S,S=S.return;return l.tag===3?(S=l.stateNode,b&&u!==null&&(b=31-Qe(h),l=S.hiddenUpdates,m=l[b],m===null?l[b]=[u]:m.push(u),u.lane=h|536870912),S):null}function Dp(l){if(50<ah)throw ah=0,Wv=null,Error(r(185));for(var u=l.return;u!==null;)l=u,u=l.return;return l.tag===3?l.stateNode:null}var Ru={};function Z6(l,u,h,m){this.tag=l,this.key=h,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=u,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=m,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Hi(l,u,h,m){return new Z6(l,u,h,m)}function Uy(l){return l=l.prototype,!(!l||!l.isReactComponent)}function Ys(l,u){var h=l.alternate;return h===null?(h=Hi(l.tag,u,l.key,l.mode),h.elementType=l.elementType,h.type=l.type,h.stateNode=l.stateNode,h.alternate=l,l.alternate=h):(h.pendingProps=u,h.type=l.type,h.flags=0,h.subtreeFlags=0,h.deletions=null),h.flags=l.flags&65011712,h.childLanes=l.childLanes,h.lanes=l.lanes,h.child=l.child,h.memoizedProps=l.memoizedProps,h.memoizedState=l.memoizedState,h.updateQueue=l.updateQueue,u=l.dependencies,h.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext},h.sibling=l.sibling,h.index=l.index,h.ref=l.ref,h.refCleanup=l.refCleanup,h}function PA(l,u){l.flags&=65011714;var h=l.alternate;return h===null?(l.childLanes=0,l.lanes=u,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=h.childLanes,l.lanes=h.lanes,l.child=h.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=h.memoizedProps,l.memoizedState=h.memoizedState,l.updateQueue=h.updateQueue,l.type=h.type,u=h.dependencies,l.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext}),l}function Rp(l,u,h,m,b,S){var U=0;if(m=l,typeof l=="function")Uy(l)&&(U=1);else if(typeof l=="string")U=eN(l,h,ke.current)?26:l==="html"||l==="head"||l==="body"?27:5;else e:switch(l){case R:return l=Hi(31,h,u,b),l.elementType=R,l.lanes=S,l;case x:return oc(h.children,b,S,u);case _:U=8,b|=24;break;case A:return l=Hi(12,h,u,b|2),l.elementType=A,l.lanes=S,l;case k:return l=Hi(13,h,u,b),l.elementType=k,l.lanes=S,l;case B:return l=Hi(19,h,u,b),l.elementType=B,l.lanes=S,l;default:if(typeof l=="object"&&l!==null)switch(l.$$typeof){case E:case C:U=10;break e;case T:U=9;break e;case D:U=11;break e;case O:U=14;break e;case I:U=16,m=null;break e}U=29,h=Error(r(130,l===null?"null":typeof l,"")),m=null}return u=Hi(U,h,u,b),u.elementType=l,u.type=m,u.lanes=S,u}function oc(l,u,h,m){return l=Hi(7,l,m,u),l.lanes=h,l}function Hy(l,u,h){return l=Hi(6,l,null,u),l.lanes=h,l}function zy(l,u,h){return u=Hi(4,l.children!==null?l.children:[],l.key,u),u.lanes=h,u.stateNode={containerInfo:l.containerInfo,pendingChildren:null,implementation:l.implementation},u}var Ou=[],Mu=0,Op=null,Mp=0,la=[],ca=0,lc=null,qs=1,Xs="";function cc(l,u){Ou[Mu++]=Mp,Ou[Mu++]=Op,Op=l,Mp=u}function kA(l,u,h){la[ca++]=qs,la[ca++]=Xs,la[ca++]=lc,lc=l;var m=qs;l=Xs;var b=32-Qe(m)-1;m&=~(1<<b),h+=1;var S=32-Qe(u)+b;if(30<S){var U=b-b%5;S=(m&(1<<U)-1).toString(32),m>>=U,b-=U,qs=1<<32-Qe(u)+b|h<<b|m,Xs=S+l}else qs=1<<S|h<<b|m,Xs=l}function $y(l){l.return!==null&&(cc(l,1),kA(l,1,0))}function Gy(l){for(;l===Op;)Op=Ou[--Mu],Ou[Mu]=null,Mp=Ou[--Mu],Ou[Mu]=null;for(;l===lc;)lc=la[--ca],la[ca]=null,Xs=la[--ca],la[ca]=null,qs=la[--ca],la[ca]=null}var wi=null,zn=null,qt=!1,uc=null,ls=!1,Wy=Error(r(519));function dc(l){var u=Error(r(418,""));throw Bf(sa(u,l)),Wy}function NA(l){var u=l.stateNode,h=l.type,m=l.memoizedProps;switch(u[mr]=l,u[sr]=m,h){case"dialog":Dt("cancel",u),Dt("close",u);break;case"iframe":case"object":case"embed":Dt("load",u);break;case"video":case"audio":for(h=0;h<oh.length;h++)Dt(oh[h],u);break;case"source":Dt("error",u);break;case"img":case"image":case"link":Dt("error",u),Dt("load",u);break;case"details":Dt("toggle",u);break;case"input":Dt("invalid",u),Xl(u,m.value,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name,!0),mu(u);break;case"select":Dt("invalid",u);break;case"textarea":Dt("invalid",u),Kl(u,m.value,m.defaultValue,m.children),mu(u)}h=m.children,typeof h!="string"&&typeof h!="number"&&typeof h!="bigint"||u.textContent===""+h||m.suppressHydrationWarning===!0||ZS(u.textContent,h)?(m.popover!=null&&(Dt("beforetoggle",u),Dt("toggle",u)),m.onScroll!=null&&Dt("scroll",u),m.onScrollEnd!=null&&Dt("scrollend",u),m.onClick!=null&&(u.onclick=fg),u=!0):u=!1,u||dc(l)}function LA(l){for(wi=l.return;wi;)switch(wi.tag){case 5:case 13:ls=!1;return;case 27:case 3:ls=!0;return;default:wi=wi.return}}function Nf(l){if(l!==wi)return!1;if(!qt)return LA(l),qt=!0,!1;var u=l.tag,h;if((h=u!==3&&u!==27)&&((h=u===5)&&(h=l.type,h=!(h!=="form"&&h!=="button")||lx(l.type,l.memoizedProps)),h=!h),h&&zn&&dc(l),LA(l),u===13){if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(r(317));e:{for(l=l.nextSibling,u=0;l;){if(l.nodeType===8)if(h=l.data,h==="/$"){if(u===0){zn=Oa(l.nextSibling);break e}u--}else h!=="$"&&h!=="$!"&&h!=="$?"||u++;l=l.nextSibling}zn=null}}else u===27?(u=zn,Jo(l.type)?(l=fx,fx=null,zn=l):zn=u):zn=wi?Oa(l.stateNode.nextSibling):null;return!0}function Lf(){zn=wi=null,qt=!1}function BA(){var l=uc;return l!==null&&(Mi===null?Mi=l:Mi.push.apply(Mi,l),uc=null),l}function Bf(l){uc===null?uc=[l]:uc.push(l)}var Yy=ge(null),fc=null,Ks=null;function Fo(l,u,h){be(Yy,u._currentValue),u._currentValue=h}function Qs(l){l._currentValue=Yy.current,xe(Yy)}function qy(l,u,h){for(;l!==null;){var m=l.alternate;if((l.childLanes&u)!==u?(l.childLanes|=u,m!==null&&(m.childLanes|=u)):m!==null&&(m.childLanes&u)!==u&&(m.childLanes|=u),l===h)break;l=l.return}}function Xy(l,u,h,m){var b=l.child;for(b!==null&&(b.return=l);b!==null;){var S=b.dependencies;if(S!==null){var U=b.child;S=S.firstContext;e:for(;S!==null;){var z=S;S=b;for(var K=0;K<u.length;K++)if(z.context===u[K]){S.lanes|=h,z=S.alternate,z!==null&&(z.lanes|=h),qy(S.return,h,l),m||(U=null);break e}S=z.next}}else if(b.tag===18){if(U=b.return,U===null)throw Error(r(341));U.lanes|=h,S=U.alternate,S!==null&&(S.lanes|=h),qy(U,h,l),U=null}else U=b.child;if(U!==null)U.return=b;else for(U=b;U!==null;){if(U===l){U=null;break}if(b=U.sibling,b!==null){b.return=U.return,U=b;break}U=U.return}b=U}}function Ff(l,u,h,m){l=null;for(var b=u,S=!1;b!==null;){if(!S){if((b.flags&524288)!==0)S=!0;else if((b.flags&262144)!==0)break}if(b.tag===10){var U=b.alternate;if(U===null)throw Error(r(387));if(U=U.memoizedProps,U!==null){var z=b.type;Ui(b.pendingProps.value,U.value)||(l!==null?l.push(z):l=[z])}}else if(b===Ae.current){if(U=b.alternate,U===null)throw Error(r(387));U.memoizedState.memoizedState!==b.memoizedState.memoizedState&&(l!==null?l.push(hh):l=[hh])}b=b.return}l!==null&&Xy(u,l,h,m),u.flags|=262144}function Pp(l){for(l=l.firstContext;l!==null;){if(!Ui(l.context._currentValue,l.memoizedValue))return!0;l=l.next}return!1}function hc(l){fc=l,Ks=null,l=l.dependencies,l!==null&&(l.firstContext=null)}function ii(l){return FA(fc,l)}function kp(l,u){return fc===null&&hc(l),FA(l,u)}function FA(l,u){var h=u._currentValue;if(u={context:u,memoizedValue:h,next:null},Ks===null){if(l===null)throw Error(r(308));Ks=u,l.dependencies={lanes:0,firstContext:u},l.flags|=524288}else Ks=Ks.next=u;return h}var J6=typeof AbortController<"u"?AbortController:function(){var l=[],u=this.signal={aborted:!1,addEventListener:function(h,m){l.push(m)}};this.abort=function(){u.aborted=!0,l.forEach(function(h){return h()})}},e8=t.unstable_scheduleCallback,t8=t.unstable_NormalPriority,xr={$$typeof:C,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Ky(){return{controller:new J6,data:new Map,refCount:0}}function Vf(l){l.refCount--,l.refCount===0&&e8(t8,function(){l.controller.abort()})}var jf=null,Qy=0,Pu=0,ku=null;function n8(l,u){if(jf===null){var h=jf=[];Qy=0,Pu=Jv(),ku={status:"pending",value:void 0,then:function(m){h.push(m)}}}return Qy++,u.then(VA,VA),u}function VA(){if(--Qy===0&&jf!==null){ku!==null&&(ku.status="fulfilled");var l=jf;jf=null,Pu=0,ku=null;for(var u=0;u<l.length;u++)(0,l[u])()}}function r8(l,u){var h=[],m={status:"pending",value:null,reason:null,then:function(b){h.push(b)}};return l.then(function(){m.status="fulfilled",m.value=u;for(var b=0;b<h.length;b++)(0,h[b])(u)},function(b){for(m.status="rejected",m.reason=b,b=0;b<h.length;b++)(0,h[b])(void 0)}),m}var jA=W.S;W.S=function(l,u){typeof u=="object"&&u!==null&&typeof u.then=="function"&&n8(l,u),jA!==null&&jA(l,u)};var pc=ge(null);function Zy(){var l=pc.current;return l!==null?l:En.pooledCache}function Np(l,u){u===null?be(pc,pc.current):be(pc,u.pool)}function UA(){var l=Zy();return l===null?null:{parent:xr._currentValue,pool:l}}var Uf=Error(r(460)),HA=Error(r(474)),Lp=Error(r(542)),Jy={then:function(){}};function zA(l){return l=l.status,l==="fulfilled"||l==="rejected"}function Bp(){}function $A(l,u,h){switch(h=l[h],h===void 0?l.push(u):h!==u&&(u.then(Bp,Bp),u=h),u.status){case"fulfilled":return u.value;case"rejected":throw l=u.reason,WA(l),l;default:if(typeof u.status=="string")u.then(Bp,Bp);else{if(l=En,l!==null&&100<l.shellSuspendCounter)throw Error(r(482));l=u,l.status="pending",l.then(function(m){if(u.status==="pending"){var b=u;b.status="fulfilled",b.value=m}},function(m){if(u.status==="pending"){var b=u;b.status="rejected",b.reason=m}})}switch(u.status){case"fulfilled":return u.value;case"rejected":throw l=u.reason,WA(l),l}throw Hf=u,Uf}}var Hf=null;function GA(){if(Hf===null)throw Error(r(459));var l=Hf;return Hf=null,l}function WA(l){if(l===Uf||l===Lp)throw Error(r(483))}var Vo=!1;function ev(l){l.updateQueue={baseState:l.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function tv(l,u){l=l.updateQueue,u.updateQueue===l&&(u.updateQueue={baseState:l.baseState,firstBaseUpdate:l.firstBaseUpdate,lastBaseUpdate:l.lastBaseUpdate,shared:l.shared,callbacks:null})}function jo(l){return{lane:l,tag:0,payload:null,callback:null,next:null}}function Uo(l,u,h){var m=l.updateQueue;if(m===null)return null;if(m=m.shared,(rn&2)!==0){var b=m.pending;return b===null?u.next=u:(u.next=b.next,b.next=u),m.pending=u,u=Dp(l),MA(l,null,h),u}return Ip(l,m,u,h),Dp(l)}function zf(l,u,h){if(u=u.updateQueue,u!==null&&(u=u.shared,(h&4194048)!==0)){var m=u.lanes;m&=l.pendingLanes,h|=m,u.lanes=h,du(l,h)}}function nv(l,u){var h=l.updateQueue,m=l.alternate;if(m!==null&&(m=m.updateQueue,h===m)){var b=null,S=null;if(h=h.firstBaseUpdate,h!==null){do{var U={lane:h.lane,tag:h.tag,payload:h.payload,callback:null,next:null};S===null?b=S=U:S=S.next=U,h=h.next}while(h!==null);S===null?b=S=u:S=S.next=u}else b=S=u;h={baseState:m.baseState,firstBaseUpdate:b,lastBaseUpdate:S,shared:m.shared,callbacks:m.callbacks},l.updateQueue=h;return}l=h.lastBaseUpdate,l===null?h.firstBaseUpdate=u:l.next=u,h.lastBaseUpdate=u}var rv=!1;function $f(){if(rv){var l=ku;if(l!==null)throw l}}function Gf(l,u,h,m){rv=!1;var b=l.updateQueue;Vo=!1;var S=b.firstBaseUpdate,U=b.lastBaseUpdate,z=b.shared.pending;if(z!==null){b.shared.pending=null;var K=z,le=K.next;K.next=null,U===null?S=le:U.next=le,U=K;var Ee=l.alternate;Ee!==null&&(Ee=Ee.updateQueue,z=Ee.lastBaseUpdate,z!==U&&(z===null?Ee.firstBaseUpdate=le:z.next=le,Ee.lastBaseUpdate=K))}if(S!==null){var Ie=b.baseState;U=0,Ee=le=K=null,z=S;do{var ue=z.lane&-536870913,fe=ue!==z.lane;if(fe?(Bt&ue)===ue:(m&ue)===ue){ue!==0&&ue===Pu&&(rv=!0),Ee!==null&&(Ee=Ee.next={lane:0,tag:z.tag,payload:z.payload,callback:null,next:null});e:{var ct=l,at=z;ue=u;var fn=h;switch(at.tag){case 1:if(ct=at.payload,typeof ct=="function"){Ie=ct.call(fn,Ie,ue);break e}Ie=ct;break e;case 3:ct.flags=ct.flags&-65537|128;case 0:if(ct=at.payload,ue=typeof ct=="function"?ct.call(fn,Ie,ue):ct,ue==null)break e;Ie=f({},Ie,ue);break e;case 2:Vo=!0}}ue=z.callback,ue!==null&&(l.flags|=64,fe&&(l.flags|=8192),fe=b.callbacks,fe===null?b.callbacks=[ue]:fe.push(ue))}else fe={lane:ue,tag:z.tag,payload:z.payload,callback:z.callback,next:null},Ee===null?(le=Ee=fe,K=Ie):Ee=Ee.next=fe,U|=ue;if(z=z.next,z===null){if(z=b.shared.pending,z===null)break;fe=z,z=fe.next,fe.next=null,b.lastBaseUpdate=fe,b.shared.pending=null}}while(!0);Ee===null&&(K=Ie),b.baseState=K,b.firstBaseUpdate=le,b.lastBaseUpdate=Ee,S===null&&(b.shared.lanes=0),Xo|=U,l.lanes=U,l.memoizedState=Ie}}function YA(l,u){if(typeof l!="function")throw Error(r(191,l));l.call(u)}function qA(l,u){var h=l.callbacks;if(h!==null)for(l.callbacks=null,l=0;l<h.length;l++)YA(h[l],u)}var Nu=ge(null),Fp=ge(0);function XA(l,u){l=io,be(Fp,l),be(Nu,u),io=l|u.baseLanes}function iv(){be(Fp,io),be(Nu,Nu.current)}function av(){io=Fp.current,xe(Nu),xe(Fp)}var Ho=0,bt=null,un=null,lr=null,Vp=!1,Lu=!1,gc=!1,jp=0,Wf=0,Bu=null,i8=0;function Kn(){throw Error(r(321))}function sv(l,u){if(u===null)return!1;for(var h=0;h<u.length&&h<l.length;h++)if(!Ui(l[h],u[h]))return!1;return!0}function ov(l,u,h,m,b,S){return Ho=S,bt=u,u.memoizedState=null,u.updateQueue=null,u.lanes=0,W.H=l===null||l.memoizedState===null?ME:PE,gc=!1,S=h(m,b),gc=!1,Lu&&(S=QA(u,h,m,b)),KA(l),S}function KA(l){W.H=Wp;var u=un!==null&&un.next!==null;if(Ho=0,lr=un=bt=null,Vp=!1,Wf=0,Bu=null,u)throw Error(r(300));l===null||Pr||(l=l.dependencies,l!==null&&Pp(l)&&(Pr=!0))}function QA(l,u,h,m){bt=l;var b=0;do{if(Lu&&(Bu=null),Wf=0,Lu=!1,25<=b)throw Error(r(301));if(b+=1,lr=un=null,l.updateQueue!=null){var S=l.updateQueue;S.lastEffect=null,S.events=null,S.stores=null,S.memoCache!=null&&(S.memoCache.index=0)}W.H=d8,S=u(h,m)}while(Lu);return S}function a8(){var l=W.H,u=l.useState()[0];return u=typeof u.then=="function"?Yf(u):u,l=l.useState()[0],(un!==null?un.memoizedState:null)!==l&&(bt.flags|=1024),u}function lv(){var l=jp!==0;return jp=0,l}function cv(l,u,h){u.updateQueue=l.updateQueue,u.flags&=-2053,l.lanes&=~h}function uv(l){if(Vp){for(l=l.memoizedState;l!==null;){var u=l.queue;u!==null&&(u.pending=null),l=l.next}Vp=!1}Ho=0,lr=un=bt=null,Lu=!1,Wf=jp=0,Bu=null}function Ri(){var l={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return lr===null?bt.memoizedState=lr=l:lr=lr.next=l,lr}function cr(){if(un===null){var l=bt.alternate;l=l!==null?l.memoizedState:null}else l=un.next;var u=lr===null?bt.memoizedState:lr.next;if(u!==null)lr=u,un=l;else{if(l===null)throw bt.alternate===null?Error(r(467)):Error(r(310));un=l,l={memoizedState:un.memoizedState,baseState:un.baseState,baseQueue:un.baseQueue,queue:un.queue,next:null},lr===null?bt.memoizedState=lr=l:lr=lr.next=l}return lr}function dv(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Yf(l){var u=Wf;return Wf+=1,Bu===null&&(Bu=[]),l=$A(Bu,l,u),u=bt,(lr===null?u.memoizedState:lr.next)===null&&(u=u.alternate,W.H=u===null||u.memoizedState===null?ME:PE),l}function Up(l){if(l!==null&&typeof l=="object"){if(typeof l.then=="function")return Yf(l);if(l.$$typeof===C)return ii(l)}throw Error(r(438,String(l)))}function fv(l){var u=null,h=bt.updateQueue;if(h!==null&&(u=h.memoCache),u==null){var m=bt.alternate;m!==null&&(m=m.updateQueue,m!==null&&(m=m.memoCache,m!=null&&(u={data:m.data.map(function(b){return b.slice()}),index:0})))}if(u==null&&(u={data:[],index:0}),h===null&&(h=dv(),bt.updateQueue=h),h.memoCache=u,h=u.data[u.index],h===void 0)for(h=u.data[u.index]=Array(l),m=0;m<l;m++)h[m]=V;return u.index++,h}function Zs(l,u){return typeof u=="function"?u(l):u}function Hp(l){var u=cr();return hv(u,un,l)}function hv(l,u,h){var m=l.queue;if(m===null)throw Error(r(311));m.lastRenderedReducer=h;var b=l.baseQueue,S=m.pending;if(S!==null){if(b!==null){var U=b.next;b.next=S.next,S.next=U}u.baseQueue=b=S,m.pending=null}if(S=l.baseState,b===null)l.memoizedState=S;else{u=b.next;var z=U=null,K=null,le=u,Ee=!1;do{var Ie=le.lane&-536870913;if(Ie!==le.lane?(Bt&Ie)===Ie:(Ho&Ie)===Ie){var ue=le.revertLane;if(ue===0)K!==null&&(K=K.next={lane:0,revertLane:0,action:le.action,hasEagerState:le.hasEagerState,eagerState:le.eagerState,next:null}),Ie===Pu&&(Ee=!0);else if((Ho&ue)===ue){le=le.next,ue===Pu&&(Ee=!0);continue}else Ie={lane:0,revertLane:le.revertLane,action:le.action,hasEagerState:le.hasEagerState,eagerState:le.eagerState,next:null},K===null?(z=K=Ie,U=S):K=K.next=Ie,bt.lanes|=ue,Xo|=ue;Ie=le.action,gc&&h(S,Ie),S=le.hasEagerState?le.eagerState:h(S,Ie)}else ue={lane:Ie,revertLane:le.revertLane,action:le.action,hasEagerState:le.hasEagerState,eagerState:le.eagerState,next:null},K===null?(z=K=ue,U=S):K=K.next=ue,bt.lanes|=Ie,Xo|=Ie;le=le.next}while(le!==null&&le!==u);if(K===null?U=S:K.next=z,!Ui(S,l.memoizedState)&&(Pr=!0,Ee&&(h=ku,h!==null)))throw h;l.memoizedState=S,l.baseState=U,l.baseQueue=K,m.lastRenderedState=S}return b===null&&(m.lanes=0),[l.memoizedState,m.dispatch]}function pv(l){var u=cr(),h=u.queue;if(h===null)throw Error(r(311));h.lastRenderedReducer=l;var m=h.dispatch,b=h.pending,S=u.memoizedState;if(b!==null){h.pending=null;var U=b=b.next;do S=l(S,U.action),U=U.next;while(U!==b);Ui(S,u.memoizedState)||(Pr=!0),u.memoizedState=S,u.baseQueue===null&&(u.baseState=S),h.lastRenderedState=S}return[S,m]}function ZA(l,u,h){var m=bt,b=cr(),S=qt;if(S){if(h===void 0)throw Error(r(407));h=h()}else h=u();var U=!Ui((un||b).memoizedState,h);U&&(b.memoizedState=h,Pr=!0),b=b.queue;var z=tE.bind(null,m,b,l);if(qf(2048,8,z,[l]),b.getSnapshot!==u||U||lr!==null&&lr.memoizedState.tag&1){if(m.flags|=2048,Fu(9,zp(),eE.bind(null,m,b,h,u),null),En===null)throw Error(r(349));S||(Ho&124)!==0||JA(m,u,h)}return h}function JA(l,u,h){l.flags|=16384,l={getSnapshot:u,value:h},u=bt.updateQueue,u===null?(u=dv(),bt.updateQueue=u,u.stores=[l]):(h=u.stores,h===null?u.stores=[l]:h.push(l))}function eE(l,u,h,m){u.value=h,u.getSnapshot=m,nE(u)&&rE(l)}function tE(l,u,h){return h(function(){nE(u)&&rE(l)})}function nE(l){var u=l.getSnapshot;l=l.value;try{var h=u();return!Ui(l,h)}catch{return!0}}function rE(l){var u=Du(l,2);u!==null&&Yi(u,l,2)}function gv(l){var u=Ri();if(typeof l=="function"){var h=l;if(l=h(),gc){Tn(!0);try{h()}finally{Tn(!1)}}}return u.memoizedState=u.baseState=l,u.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Zs,lastRenderedState:l},u}function iE(l,u,h,m){return l.baseState=h,hv(l,un,typeof m=="function"?m:Zs)}function s8(l,u,h,m,b){if(Gp(l))throw Error(r(485));if(l=u.action,l!==null){var S={payload:b,action:l,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(U){S.listeners.push(U)}};W.T!==null?h(!0):S.isTransition=!1,m(S),h=u.pending,h===null?(S.next=u.pending=S,aE(u,S)):(S.next=h.next,u.pending=h.next=S)}}function aE(l,u){var h=u.action,m=u.payload,b=l.state;if(u.isTransition){var S=W.T,U={};W.T=U;try{var z=h(b,m),K=W.S;K!==null&&K(U,z),sE(l,u,z)}catch(le){mv(l,u,le)}finally{W.T=S}}else try{S=h(b,m),sE(l,u,S)}catch(le){mv(l,u,le)}}function sE(l,u,h){h!==null&&typeof h=="object"&&typeof h.then=="function"?h.then(function(m){oE(l,u,m)},function(m){return mv(l,u,m)}):oE(l,u,h)}function oE(l,u,h){u.status="fulfilled",u.value=h,lE(u),l.state=h,u=l.pending,u!==null&&(h=u.next,h===u?l.pending=null:(h=h.next,u.next=h,aE(l,h)))}function mv(l,u,h){var m=l.pending;if(l.pending=null,m!==null){m=m.next;do u.status="rejected",u.reason=h,lE(u),u=u.next;while(u!==m)}l.action=null}function lE(l){l=l.listeners;for(var u=0;u<l.length;u++)(0,l[u])()}function cE(l,u){return u}function uE(l,u){if(qt){var h=En.formState;if(h!==null){e:{var m=bt;if(qt){if(zn){t:{for(var b=zn,S=ls;b.nodeType!==8;){if(!S){b=null;break t}if(b=Oa(b.nextSibling),b===null){b=null;break t}}S=b.data,b=S==="F!"||S==="F"?b:null}if(b){zn=Oa(b.nextSibling),m=b.data==="F!";break e}}dc(m)}m=!1}m&&(u=h[0])}}return h=Ri(),h.memoizedState=h.baseState=u,m={pending:null,lanes:0,dispatch:null,lastRenderedReducer:cE,lastRenderedState:u},h.queue=m,h=DE.bind(null,bt,m),m.dispatch=h,m=gv(!1),S=_v.bind(null,bt,!1,m.queue),m=Ri(),b={state:u,dispatch:null,action:l,pending:null},m.queue=b,h=s8.bind(null,bt,b,S,h),b.dispatch=h,m.memoizedState=l,[u,h,!1]}function dE(l){var u=cr();return fE(u,un,l)}function fE(l,u,h){if(u=hv(l,u,cE)[0],l=Hp(Zs)[0],typeof u=="object"&&u!==null&&typeof u.then=="function")try{var m=Yf(u)}catch(U){throw U===Uf?Lp:U}else m=u;u=cr();var b=u.queue,S=b.dispatch;return h!==u.memoizedState&&(bt.flags|=2048,Fu(9,zp(),o8.bind(null,b,h),null)),[m,S,l]}function o8(l,u){l.action=u}function hE(l){var u=cr(),h=un;if(h!==null)return fE(u,h,l);cr(),u=u.memoizedState,h=cr();var m=h.queue.dispatch;return h.memoizedState=l,[u,m,!1]}function Fu(l,u,h,m){return l={tag:l,create:h,deps:m,inst:u,next:null},u=bt.updateQueue,u===null&&(u=dv(),bt.updateQueue=u),h=u.lastEffect,h===null?u.lastEffect=l.next=l:(m=h.next,h.next=l,l.next=m,u.lastEffect=l),l}function zp(){return{destroy:void 0,resource:void 0}}function pE(){return cr().memoizedState}function $p(l,u,h,m){var b=Ri();m=m===void 0?null:m,bt.flags|=l,b.memoizedState=Fu(1|u,zp(),h,m)}function qf(l,u,h,m){var b=cr();m=m===void 0?null:m;var S=b.memoizedState.inst;un!==null&&m!==null&&sv(m,un.memoizedState.deps)?b.memoizedState=Fu(u,S,h,m):(bt.flags|=l,b.memoizedState=Fu(1|u,S,h,m))}function gE(l,u){$p(8390656,8,l,u)}function mE(l,u){qf(2048,8,l,u)}function yE(l,u){return qf(4,2,l,u)}function vE(l,u){return qf(4,4,l,u)}function xE(l,u){if(typeof u=="function"){l=l();var h=u(l);return function(){typeof h=="function"?h():u(null)}}if(u!=null)return l=l(),u.current=l,function(){u.current=null}}function wE(l,u,h){h=h!=null?h.concat([l]):null,qf(4,4,xE.bind(null,u,l),h)}function yv(){}function _E(l,u){var h=cr();u=u===void 0?null:u;var m=h.memoizedState;return u!==null&&sv(u,m[1])?m[0]:(h.memoizedState=[l,u],l)}function bE(l,u){var h=cr();u=u===void 0?null:u;var m=h.memoizedState;if(u!==null&&sv(u,m[1]))return m[0];if(m=l(),gc){Tn(!0);try{l()}finally{Tn(!1)}}return h.memoizedState=[m,u],m}function vv(l,u,h){return h===void 0||(Ho&1073741824)!==0?l.memoizedState=u:(l.memoizedState=h,l=SS(),bt.lanes|=l,Xo|=l,h)}function AE(l,u,h,m){return Ui(h,u)?h:Nu.current!==null?(l=vv(l,h,m),Ui(l,u)||(Pr=!0),l):(Ho&42)===0?(Pr=!0,l.memoizedState=h):(l=SS(),bt.lanes|=l,Xo|=l,u)}function EE(l,u,h,m,b){var S=G.p;G.p=S!==0&&8>S?S:8;var U=W.T,z={};W.T=z,_v(l,!1,u,h);try{var K=b(),le=W.S;if(le!==null&&le(z,K),K!==null&&typeof K=="object"&&typeof K.then=="function"){var Ee=r8(K,m);Xf(l,u,Ee,Wi(l))}else Xf(l,u,m,Wi(l))}catch(Ie){Xf(l,u,{then:function(){},status:"rejected",reason:Ie},Wi())}finally{G.p=S,W.T=U}}function l8(){}function xv(l,u,h,m){if(l.tag!==5)throw Error(r(476));var b=SE(l).queue;EE(l,b,u,Q,h===null?l8:function(){return TE(l),h(m)})}function SE(l){var u=l.memoizedState;if(u!==null)return u;u={memoizedState:Q,baseState:Q,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Zs,lastRenderedState:Q},next:null};var h={};return u.next={memoizedState:h,baseState:h,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Zs,lastRenderedState:h},next:null},l.memoizedState=u,l=l.alternate,l!==null&&(l.memoizedState=u),u}function TE(l){var u=SE(l).next.queue;Xf(l,u,{},Wi())}function wv(){return ii(hh)}function CE(){return cr().memoizedState}function IE(){return cr().memoizedState}function c8(l){for(var u=l.return;u!==null;){switch(u.tag){case 24:case 3:var h=Wi();l=jo(h);var m=Uo(u,l,h);m!==null&&(Yi(m,u,h),zf(m,u,h)),u={cache:Ky()},l.payload=u;return}u=u.return}}function u8(l,u,h){var m=Wi();h={lane:m,revertLane:0,action:h,hasEagerState:!1,eagerState:null,next:null},Gp(l)?RE(u,h):(h=jy(l,u,h,m),h!==null&&(Yi(h,l,m),OE(h,u,m)))}function DE(l,u,h){var m=Wi();Xf(l,u,h,m)}function Xf(l,u,h,m){var b={lane:m,revertLane:0,action:h,hasEagerState:!1,eagerState:null,next:null};if(Gp(l))RE(u,b);else{var S=l.alternate;if(l.lanes===0&&(S===null||S.lanes===0)&&(S=u.lastRenderedReducer,S!==null))try{var U=u.lastRenderedState,z=S(U,h);if(b.hasEagerState=!0,b.eagerState=z,Ui(z,U))return Ip(l,u,b,0),En===null&&Cp(),!1}catch{}finally{}if(h=jy(l,u,b,m),h!==null)return Yi(h,l,m),OE(h,u,m),!0}return!1}function _v(l,u,h,m){if(m={lane:2,revertLane:Jv(),action:m,hasEagerState:!1,eagerState:null,next:null},Gp(l)){if(u)throw Error(r(479))}else u=jy(l,h,m,2),u!==null&&Yi(u,l,2)}function Gp(l){var u=l.alternate;return l===bt||u!==null&&u===bt}function RE(l,u){Lu=Vp=!0;var h=l.pending;h===null?u.next=u:(u.next=h.next,h.next=u),l.pending=u}function OE(l,u,h){if((h&4194048)!==0){var m=u.lanes;m&=l.pendingLanes,h|=m,u.lanes=h,du(l,h)}}var Wp={readContext:ii,use:Up,useCallback:Kn,useContext:Kn,useEffect:Kn,useImperativeHandle:Kn,useLayoutEffect:Kn,useInsertionEffect:Kn,useMemo:Kn,useReducer:Kn,useRef:Kn,useState:Kn,useDebugValue:Kn,useDeferredValue:Kn,useTransition:Kn,useSyncExternalStore:Kn,useId:Kn,useHostTransitionStatus:Kn,useFormState:Kn,useActionState:Kn,useOptimistic:Kn,useMemoCache:Kn,useCacheRefresh:Kn},ME={readContext:ii,use:Up,useCallback:function(l,u){return Ri().memoizedState=[l,u===void 0?null:u],l},useContext:ii,useEffect:gE,useImperativeHandle:function(l,u,h){h=h!=null?h.concat([l]):null,$p(4194308,4,xE.bind(null,u,l),h)},useLayoutEffect:function(l,u){return $p(4194308,4,l,u)},useInsertionEffect:function(l,u){$p(4,2,l,u)},useMemo:function(l,u){var h=Ri();u=u===void 0?null:u;var m=l();if(gc){Tn(!0);try{l()}finally{Tn(!1)}}return h.memoizedState=[m,u],m},useReducer:function(l,u,h){var m=Ri();if(h!==void 0){var b=h(u);if(gc){Tn(!0);try{h(u)}finally{Tn(!1)}}}else b=u;return m.memoizedState=m.baseState=b,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:l,lastRenderedState:b},m.queue=l,l=l.dispatch=u8.bind(null,bt,l),[m.memoizedState,l]},useRef:function(l){var u=Ri();return l={current:l},u.memoizedState=l},useState:function(l){l=gv(l);var u=l.queue,h=DE.bind(null,bt,u);return u.dispatch=h,[l.memoizedState,h]},useDebugValue:yv,useDeferredValue:function(l,u){var h=Ri();return vv(h,l,u)},useTransition:function(){var l=gv(!1);return l=EE.bind(null,bt,l.queue,!0,!1),Ri().memoizedState=l,[!1,l]},useSyncExternalStore:function(l,u,h){var m=bt,b=Ri();if(qt){if(h===void 0)throw Error(r(407));h=h()}else{if(h=u(),En===null)throw Error(r(349));(Bt&124)!==0||JA(m,u,h)}b.memoizedState=h;var S={value:h,getSnapshot:u};return b.queue=S,gE(tE.bind(null,m,S,l),[l]),m.flags|=2048,Fu(9,zp(),eE.bind(null,m,S,h,u),null),h},useId:function(){var l=Ri(),u=En.identifierPrefix;if(qt){var h=Xs,m=qs;h=(m&~(1<<32-Qe(m)-1)).toString(32)+h,u="«"+u+"R"+h,h=jp++,0<h&&(u+="H"+h.toString(32)),u+="»"}else h=i8++,u="«"+u+"r"+h.toString(32)+"»";return l.memoizedState=u},useHostTransitionStatus:wv,useFormState:uE,useActionState:uE,useOptimistic:function(l){var u=Ri();u.memoizedState=u.baseState=l;var h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return u.queue=h,u=_v.bind(null,bt,!0,h),h.dispatch=u,[l,u]},useMemoCache:fv,useCacheRefresh:function(){return Ri().memoizedState=c8.bind(null,bt)}},PE={readContext:ii,use:Up,useCallback:_E,useContext:ii,useEffect:mE,useImperativeHandle:wE,useInsertionEffect:yE,useLayoutEffect:vE,useMemo:bE,useReducer:Hp,useRef:pE,useState:function(){return Hp(Zs)},useDebugValue:yv,useDeferredValue:function(l,u){var h=cr();return AE(h,un.memoizedState,l,u)},useTransition:function(){var l=Hp(Zs)[0],u=cr().memoizedState;return[typeof l=="boolean"?l:Yf(l),u]},useSyncExternalStore:ZA,useId:CE,useHostTransitionStatus:wv,useFormState:dE,useActionState:dE,useOptimistic:function(l,u){var h=cr();return iE(h,un,l,u)},useMemoCache:fv,useCacheRefresh:IE},d8={readContext:ii,use:Up,useCallback:_E,useContext:ii,useEffect:mE,useImperativeHandle:wE,useInsertionEffect:yE,useLayoutEffect:vE,useMemo:bE,useReducer:pv,useRef:pE,useState:function(){return pv(Zs)},useDebugValue:yv,useDeferredValue:function(l,u){var h=cr();return un===null?vv(h,l,u):AE(h,un.memoizedState,l,u)},useTransition:function(){var l=pv(Zs)[0],u=cr().memoizedState;return[typeof l=="boolean"?l:Yf(l),u]},useSyncExternalStore:ZA,useId:CE,useHostTransitionStatus:wv,useFormState:hE,useActionState:hE,useOptimistic:function(l,u){var h=cr();return un!==null?iE(h,un,l,u):(h.baseState=l,[l,h.queue.dispatch])},useMemoCache:fv,useCacheRefresh:IE},Vu=null,Kf=0;function Yp(l){var u=Kf;return Kf+=1,Vu===null&&(Vu=[]),$A(Vu,l,u)}function Qf(l,u){u=u.props.ref,l.ref=u!==void 0?u:null}function qp(l,u){throw u.$$typeof===p?Error(r(525)):(l=Object.prototype.toString.call(u),Error(r(31,l==="[object Object]"?"object with keys {"+Object.keys(u).join(", ")+"}":l)))}function kE(l){var u=l._init;return u(l._payload)}function NE(l){function u(ne,J){if(l){var oe=ne.deletions;oe===null?(ne.deletions=[J],ne.flags|=16):oe.push(J)}}function h(ne,J){if(!l)return null;for(;J!==null;)u(ne,J),J=J.sibling;return null}function m(ne){for(var J=new Map;ne!==null;)ne.key!==null?J.set(ne.key,ne):J.set(ne.index,ne),ne=ne.sibling;return J}function b(ne,J){return ne=Ys(ne,J),ne.index=0,ne.sibling=null,ne}function S(ne,J,oe){return ne.index=oe,l?(oe=ne.alternate,oe!==null?(oe=oe.index,oe<J?(ne.flags|=67108866,J):oe):(ne.flags|=67108866,J)):(ne.flags|=1048576,J)}function U(ne){return l&&ne.alternate===null&&(ne.flags|=67108866),ne}function z(ne,J,oe,Ce){return J===null||J.tag!==6?(J=Hy(oe,ne.mode,Ce),J.return=ne,J):(J=b(J,oe),J.return=ne,J)}function K(ne,J,oe,Ce){var qe=oe.type;return qe===x?Ee(ne,J,oe.props.children,Ce,oe.key):J!==null&&(J.elementType===qe||typeof qe=="object"&&qe!==null&&qe.$$typeof===I&&kE(qe)===J.type)?(J=b(J,oe.props),Qf(J,oe),J.return=ne,J):(J=Rp(oe.type,oe.key,oe.props,null,ne.mode,Ce),Qf(J,oe),J.return=ne,J)}function le(ne,J,oe,Ce){return J===null||J.tag!==4||J.stateNode.containerInfo!==oe.containerInfo||J.stateNode.implementation!==oe.implementation?(J=zy(oe,ne.mode,Ce),J.return=ne,J):(J=b(J,oe.children||[]),J.return=ne,J)}function Ee(ne,J,oe,Ce,qe){return J===null||J.tag!==7?(J=oc(oe,ne.mode,Ce,qe),J.return=ne,J):(J=b(J,oe),J.return=ne,J)}function Ie(ne,J,oe){if(typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint")return J=Hy(""+J,ne.mode,oe),J.return=ne,J;if(typeof J=="object"&&J!==null){switch(J.$$typeof){case g:return oe=Rp(J.type,J.key,J.props,null,ne.mode,oe),Qf(oe,J),oe.return=ne,oe;case y:return J=zy(J,ne.mode,oe),J.return=ne,J;case I:var Ce=J._init;return J=Ce(J._payload),Ie(ne,J,oe)}if(X(J)||P(J))return J=oc(J,ne.mode,oe,null),J.return=ne,J;if(typeof J.then=="function")return Ie(ne,Yp(J),oe);if(J.$$typeof===C)return Ie(ne,kp(ne,J),oe);qp(ne,J)}return null}function ue(ne,J,oe,Ce){var qe=J!==null?J.key:null;if(typeof oe=="string"&&oe!==""||typeof oe=="number"||typeof oe=="bigint")return qe!==null?null:z(ne,J,""+oe,Ce);if(typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case g:return oe.key===qe?K(ne,J,oe,Ce):null;case y:return oe.key===qe?le(ne,J,oe,Ce):null;case I:return qe=oe._init,oe=qe(oe._payload),ue(ne,J,oe,Ce)}if(X(oe)||P(oe))return qe!==null?null:Ee(ne,J,oe,Ce,null);if(typeof oe.then=="function")return ue(ne,J,Yp(oe),Ce);if(oe.$$typeof===C)return ue(ne,J,kp(ne,oe),Ce);qp(ne,oe)}return null}function fe(ne,J,oe,Ce,qe){if(typeof Ce=="string"&&Ce!==""||typeof Ce=="number"||typeof Ce=="bigint")return ne=ne.get(oe)||null,z(J,ne,""+Ce,qe);if(typeof Ce=="object"&&Ce!==null){switch(Ce.$$typeof){case g:return ne=ne.get(Ce.key===null?oe:Ce.key)||null,K(J,ne,Ce,qe);case y:return ne=ne.get(Ce.key===null?oe:Ce.key)||null,le(J,ne,Ce,qe);case I:var Tt=Ce._init;return Ce=Tt(Ce._payload),fe(ne,J,oe,Ce,qe)}if(X(Ce)||P(Ce))return ne=ne.get(oe)||null,Ee(J,ne,Ce,qe,null);if(typeof Ce.then=="function")return fe(ne,J,oe,Yp(Ce),qe);if(Ce.$$typeof===C)return fe(ne,J,oe,kp(J,Ce),qe);qp(J,Ce)}return null}function ct(ne,J,oe,Ce){for(var qe=null,Tt=null,Ze=J,st=J=0,Nr=null;Ze!==null&&st<oe.length;st++){Ze.index>st?(Nr=Ze,Ze=null):Nr=Ze.sibling;var zt=ue(ne,Ze,oe[st],Ce);if(zt===null){Ze===null&&(Ze=Nr);break}l&&Ze&&zt.alternate===null&&u(ne,Ze),J=S(zt,J,st),Tt===null?qe=zt:Tt.sibling=zt,Tt=zt,Ze=Nr}if(st===oe.length)return h(ne,Ze),qt&&cc(ne,st),qe;if(Ze===null){for(;st<oe.length;st++)Ze=Ie(ne,oe[st],Ce),Ze!==null&&(J=S(Ze,J,st),Tt===null?qe=Ze:Tt.sibling=Ze,Tt=Ze);return qt&&cc(ne,st),qe}for(Ze=m(Ze);st<oe.length;st++)Nr=fe(Ze,ne,st,oe[st],Ce),Nr!==null&&(l&&Nr.alternate!==null&&Ze.delete(Nr.key===null?st:Nr.key),J=S(Nr,J,st),Tt===null?qe=Nr:Tt.sibling=Nr,Tt=Nr);return l&&Ze.forEach(function(il){return u(ne,il)}),qt&&cc(ne,st),qe}function at(ne,J,oe,Ce){if(oe==null)throw Error(r(151));for(var qe=null,Tt=null,Ze=J,st=J=0,Nr=null,zt=oe.next();Ze!==null&&!zt.done;st++,zt=oe.next()){Ze.index>st?(Nr=Ze,Ze=null):Nr=Ze.sibling;var il=ue(ne,Ze,zt.value,Ce);if(il===null){Ze===null&&(Ze=Nr);break}l&&Ze&&il.alternate===null&&u(ne,Ze),J=S(il,J,st),Tt===null?qe=il:Tt.sibling=il,Tt=il,Ze=Nr}if(zt.done)return h(ne,Ze),qt&&cc(ne,st),qe;if(Ze===null){for(;!zt.done;st++,zt=oe.next())zt=Ie(ne,zt.value,Ce),zt!==null&&(J=S(zt,J,st),Tt===null?qe=zt:Tt.sibling=zt,Tt=zt);return qt&&cc(ne,st),qe}for(Ze=m(Ze);!zt.done;st++,zt=oe.next())zt=fe(Ze,ne,st,zt.value,Ce),zt!==null&&(l&&zt.alternate!==null&&Ze.delete(zt.key===null?st:zt.key),J=S(zt,J,st),Tt===null?qe=zt:Tt.sibling=zt,Tt=zt);return l&&Ze.forEach(function(fN){return u(ne,fN)}),qt&&cc(ne,st),qe}function fn(ne,J,oe,Ce){if(typeof oe=="object"&&oe!==null&&oe.type===x&&oe.key===null&&(oe=oe.props.children),typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case g:e:{for(var qe=oe.key;J!==null;){if(J.key===qe){if(qe=oe.type,qe===x){if(J.tag===7){h(ne,J.sibling),Ce=b(J,oe.props.children),Ce.return=ne,ne=Ce;break e}}else if(J.elementType===qe||typeof qe=="object"&&qe!==null&&qe.$$typeof===I&&kE(qe)===J.type){h(ne,J.sibling),Ce=b(J,oe.props),Qf(Ce,oe),Ce.return=ne,ne=Ce;break e}h(ne,J);break}else u(ne,J);J=J.sibling}oe.type===x?(Ce=oc(oe.props.children,ne.mode,Ce,oe.key),Ce.return=ne,ne=Ce):(Ce=Rp(oe.type,oe.key,oe.props,null,ne.mode,Ce),Qf(Ce,oe),Ce.return=ne,ne=Ce)}return U(ne);case y:e:{for(qe=oe.key;J!==null;){if(J.key===qe)if(J.tag===4&&J.stateNode.containerInfo===oe.containerInfo&&J.stateNode.implementation===oe.implementation){h(ne,J.sibling),Ce=b(J,oe.children||[]),Ce.return=ne,ne=Ce;break e}else{h(ne,J);break}else u(ne,J);J=J.sibling}Ce=zy(oe,ne.mode,Ce),Ce.return=ne,ne=Ce}return U(ne);case I:return qe=oe._init,oe=qe(oe._payload),fn(ne,J,oe,Ce)}if(X(oe))return ct(ne,J,oe,Ce);if(P(oe)){if(qe=P(oe),typeof qe!="function")throw Error(r(150));return oe=qe.call(oe),at(ne,J,oe,Ce)}if(typeof oe.then=="function")return fn(ne,J,Yp(oe),Ce);if(oe.$$typeof===C)return fn(ne,J,kp(ne,oe),Ce);qp(ne,oe)}return typeof oe=="string"&&oe!==""||typeof oe=="number"||typeof oe=="bigint"?(oe=""+oe,J!==null&&J.tag===6?(h(ne,J.sibling),Ce=b(J,oe),Ce.return=ne,ne=Ce):(h(ne,J),Ce=Hy(oe,ne.mode,Ce),Ce.return=ne,ne=Ce),U(ne)):h(ne,J)}return function(ne,J,oe,Ce){try{Kf=0;var qe=fn(ne,J,oe,Ce);return Vu=null,qe}catch(Ze){if(Ze===Uf||Ze===Lp)throw Ze;var Tt=Hi(29,Ze,null,ne.mode);return Tt.lanes=Ce,Tt.return=ne,Tt}finally{}}}var ju=NE(!0),LE=NE(!1),ua=ge(null),cs=null;function zo(l){var u=l.alternate;be(wr,wr.current&1),be(ua,l),cs===null&&(u===null||Nu.current!==null||u.memoizedState!==null)&&(cs=l)}function BE(l){if(l.tag===22){if(be(wr,wr.current),be(ua,l),cs===null){var u=l.alternate;u!==null&&u.memoizedState!==null&&(cs=l)}}else $o()}function $o(){be(wr,wr.current),be(ua,ua.current)}function Js(l){xe(ua),cs===l&&(cs=null),xe(wr)}var wr=ge(0);function Xp(l){for(var u=l;u!==null;){if(u.tag===13){var h=u.memoizedState;if(h!==null&&(h=h.dehydrated,h===null||h.data==="$?"||dx(h)))return u}else if(u.tag===19&&u.memoizedProps.revealOrder!==void 0){if((u.flags&128)!==0)return u}else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===l)break;for(;u.sibling===null;){if(u.return===null||u.return===l)return null;u=u.return}u.sibling.return=u.return,u=u.sibling}return null}function bv(l,u,h,m){u=l.memoizedState,h=h(m,u),h=h==null?u:f({},u,h),l.memoizedState=h,l.lanes===0&&(l.updateQueue.baseState=h)}var Av={enqueueSetState:function(l,u,h){l=l._reactInternals;var m=Wi(),b=jo(m);b.payload=u,h!=null&&(b.callback=h),u=Uo(l,b,m),u!==null&&(Yi(u,l,m),zf(u,l,m))},enqueueReplaceState:function(l,u,h){l=l._reactInternals;var m=Wi(),b=jo(m);b.tag=1,b.payload=u,h!=null&&(b.callback=h),u=Uo(l,b,m),u!==null&&(Yi(u,l,m),zf(u,l,m))},enqueueForceUpdate:function(l,u){l=l._reactInternals;var h=Wi(),m=jo(h);m.tag=2,u!=null&&(m.callback=u),u=Uo(l,m,h),u!==null&&(Yi(u,l,h),zf(u,l,h))}};function FE(l,u,h,m,b,S,U){return l=l.stateNode,typeof l.shouldComponentUpdate=="function"?l.shouldComponentUpdate(m,S,U):u.prototype&&u.prototype.isPureReactComponent?!Pf(h,m)||!Pf(b,S):!0}function VE(l,u,h,m){l=u.state,typeof u.componentWillReceiveProps=="function"&&u.componentWillReceiveProps(h,m),typeof u.UNSAFE_componentWillReceiveProps=="function"&&u.UNSAFE_componentWillReceiveProps(h,m),u.state!==l&&Av.enqueueReplaceState(u,u.state,null)}function mc(l,u){var h=u;if("ref"in u){h={};for(var m in u)m!=="ref"&&(h[m]=u[m])}if(l=l.defaultProps){h===u&&(h=f({},h));for(var b in l)h[b]===void 0&&(h[b]=l[b])}return h}var Kp=typeof reportError=="function"?reportError:function(l){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var u=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof l=="object"&&l!==null&&typeof l.message=="string"?String(l.message):String(l),error:l});if(!window.dispatchEvent(u))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",l);return}console.error(l)};function jE(l){Kp(l)}function UE(l){console.error(l)}function HE(l){Kp(l)}function Qp(l,u){try{var h=l.onUncaughtError;h(u.value,{componentStack:u.stack})}catch(m){setTimeout(function(){throw m})}}function zE(l,u,h){try{var m=l.onCaughtError;m(h.value,{componentStack:h.stack,errorBoundary:u.tag===1?u.stateNode:null})}catch(b){setTimeout(function(){throw b})}}function Ev(l,u,h){return h=jo(h),h.tag=3,h.payload={element:null},h.callback=function(){Qp(l,u)},h}function $E(l){return l=jo(l),l.tag=3,l}function GE(l,u,h,m){var b=h.type.getDerivedStateFromError;if(typeof b=="function"){var S=m.value;l.payload=function(){return b(S)},l.callback=function(){zE(u,h,m)}}var U=h.stateNode;U!==null&&typeof U.componentDidCatch=="function"&&(l.callback=function(){zE(u,h,m),typeof b!="function"&&(Ko===null?Ko=new Set([this]):Ko.add(this));var z=m.stack;this.componentDidCatch(m.value,{componentStack:z!==null?z:""})})}function f8(l,u,h,m,b){if(h.flags|=32768,m!==null&&typeof m=="object"&&typeof m.then=="function"){if(u=h.alternate,u!==null&&Ff(u,h,b,!0),h=ua.current,h!==null){switch(h.tag){case 13:return cs===null?qv():h.alternate===null&&$n===0&&($n=3),h.flags&=-257,h.flags|=65536,h.lanes=b,m===Jy?h.flags|=16384:(u=h.updateQueue,u===null?h.updateQueue=new Set([m]):u.add(m),Kv(l,m,b)),!1;case 22:return h.flags|=65536,m===Jy?h.flags|=16384:(u=h.updateQueue,u===null?(u={transitions:null,markerInstances:null,retryQueue:new Set([m])},h.updateQueue=u):(h=u.retryQueue,h===null?u.retryQueue=new Set([m]):h.add(m)),Kv(l,m,b)),!1}throw Error(r(435,h.tag))}return Kv(l,m,b),qv(),!1}if(qt)return u=ua.current,u!==null?((u.flags&65536)===0&&(u.flags|=256),u.flags|=65536,u.lanes=b,m!==Wy&&(l=Error(r(422),{cause:m}),Bf(sa(l,h)))):(m!==Wy&&(u=Error(r(423),{cause:m}),Bf(sa(u,h))),l=l.current.alternate,l.flags|=65536,b&=-b,l.lanes|=b,m=sa(m,h),b=Ev(l.stateNode,m,b),nv(l,b),$n!==4&&($n=2)),!1;var S=Error(r(520),{cause:m});if(S=sa(S,h),ih===null?ih=[S]:ih.push(S),$n!==4&&($n=2),u===null)return!0;m=sa(m,h),h=u;do{switch(h.tag){case 3:return h.flags|=65536,l=b&-b,h.lanes|=l,l=Ev(h.stateNode,m,l),nv(h,l),!1;case 1:if(u=h.type,S=h.stateNode,(h.flags&128)===0&&(typeof u.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(Ko===null||!Ko.has(S))))return h.flags|=65536,b&=-b,h.lanes|=b,b=$E(b),GE(b,l,h,m),nv(h,b),!1}h=h.return}while(h!==null);return!1}var WE=Error(r(461)),Pr=!1;function Yr(l,u,h,m){u.child=l===null?LE(u,null,h,m):ju(u,l.child,h,m)}function YE(l,u,h,m,b){h=h.render;var S=u.ref;if("ref"in m){var U={};for(var z in m)z!=="ref"&&(U[z]=m[z])}else U=m;return hc(u),m=ov(l,u,h,U,S,b),z=lv(),l!==null&&!Pr?(cv(l,u,b),eo(l,u,b)):(qt&&z&&$y(u),u.flags|=1,Yr(l,u,m,b),u.child)}function qE(l,u,h,m,b){if(l===null){var S=h.type;return typeof S=="function"&&!Uy(S)&&S.defaultProps===void 0&&h.compare===null?(u.tag=15,u.type=S,XE(l,u,S,m,b)):(l=Rp(h.type,null,m,u,u.mode,b),l.ref=u.ref,l.return=u,u.child=l)}if(S=l.child,!Mv(l,b)){var U=S.memoizedProps;if(h=h.compare,h=h!==null?h:Pf,h(U,m)&&l.ref===u.ref)return eo(l,u,b)}return u.flags|=1,l=Ys(S,m),l.ref=u.ref,l.return=u,u.child=l}function XE(l,u,h,m,b){if(l!==null){var S=l.memoizedProps;if(Pf(S,m)&&l.ref===u.ref)if(Pr=!1,u.pendingProps=m=S,Mv(l,b))(l.flags&131072)!==0&&(Pr=!0);else return u.lanes=l.lanes,eo(l,u,b)}return Sv(l,u,h,m,b)}function KE(l,u,h){var m=u.pendingProps,b=m.children,S=l!==null?l.memoizedState:null;if(m.mode==="hidden"){if((u.flags&128)!==0){if(m=S!==null?S.baseLanes|h:h,l!==null){for(b=u.child=l.child,S=0;b!==null;)S=S|b.lanes|b.childLanes,b=b.sibling;u.childLanes=S&~m}else u.childLanes=0,u.child=null;return QE(l,u,m,h)}if((h&536870912)!==0)u.memoizedState={baseLanes:0,cachePool:null},l!==null&&Np(u,S!==null?S.cachePool:null),S!==null?XA(u,S):iv(),BE(u);else return u.lanes=u.childLanes=536870912,QE(l,u,S!==null?S.baseLanes|h:h,h)}else S!==null?(Np(u,S.cachePool),XA(u,S),$o(),u.memoizedState=null):(l!==null&&Np(u,null),iv(),$o());return Yr(l,u,b,h),u.child}function QE(l,u,h,m){var b=Zy();return b=b===null?null:{parent:xr._currentValue,pool:b},u.memoizedState={baseLanes:h,cachePool:b},l!==null&&Np(u,null),iv(),BE(u),l!==null&&Ff(l,u,m,!0),null}function Zp(l,u){var h=u.ref;if(h===null)l!==null&&l.ref!==null&&(u.flags|=4194816);else{if(typeof h!="function"&&typeof h!="object")throw Error(r(284));(l===null||l.ref!==h)&&(u.flags|=4194816)}}function Sv(l,u,h,m,b){return hc(u),h=ov(l,u,h,m,void 0,b),m=lv(),l!==null&&!Pr?(cv(l,u,b),eo(l,u,b)):(qt&&m&&$y(u),u.flags|=1,Yr(l,u,h,b),u.child)}function ZE(l,u,h,m,b,S){return hc(u),u.updateQueue=null,h=QA(u,m,h,b),KA(l),m=lv(),l!==null&&!Pr?(cv(l,u,S),eo(l,u,S)):(qt&&m&&$y(u),u.flags|=1,Yr(l,u,h,S),u.child)}function JE(l,u,h,m,b){if(hc(u),u.stateNode===null){var S=Ru,U=h.contextType;typeof U=="object"&&U!==null&&(S=ii(U)),S=new h(m,S),u.memoizedState=S.state!==null&&S.state!==void 0?S.state:null,S.updater=Av,u.stateNode=S,S._reactInternals=u,S=u.stateNode,S.props=m,S.state=u.memoizedState,S.refs={},ev(u),U=h.contextType,S.context=typeof U=="object"&&U!==null?ii(U):Ru,S.state=u.memoizedState,U=h.getDerivedStateFromProps,typeof U=="function"&&(bv(u,h,U,m),S.state=u.memoizedState),typeof h.getDerivedStateFromProps=="function"||typeof S.getSnapshotBeforeUpdate=="function"||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(U=S.state,typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount(),U!==S.state&&Av.enqueueReplaceState(S,S.state,null),Gf(u,m,S,b),$f(),S.state=u.memoizedState),typeof S.componentDidMount=="function"&&(u.flags|=4194308),m=!0}else if(l===null){S=u.stateNode;var z=u.memoizedProps,K=mc(h,z);S.props=K;var le=S.context,Ee=h.contextType;U=Ru,typeof Ee=="object"&&Ee!==null&&(U=ii(Ee));var Ie=h.getDerivedStateFromProps;Ee=typeof Ie=="function"||typeof S.getSnapshotBeforeUpdate=="function",z=u.pendingProps!==z,Ee||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(z||le!==U)&&VE(u,S,m,U),Vo=!1;var ue=u.memoizedState;S.state=ue,Gf(u,m,S,b),$f(),le=u.memoizedState,z||ue!==le||Vo?(typeof Ie=="function"&&(bv(u,h,Ie,m),le=u.memoizedState),(K=Vo||FE(u,h,K,m,ue,le,U))?(Ee||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount()),typeof S.componentDidMount=="function"&&(u.flags|=4194308)):(typeof S.componentDidMount=="function"&&(u.flags|=4194308),u.memoizedProps=m,u.memoizedState=le),S.props=m,S.state=le,S.context=U,m=K):(typeof S.componentDidMount=="function"&&(u.flags|=4194308),m=!1)}else{S=u.stateNode,tv(l,u),U=u.memoizedProps,Ee=mc(h,U),S.props=Ee,Ie=u.pendingProps,ue=S.context,le=h.contextType,K=Ru,typeof le=="object"&&le!==null&&(K=ii(le)),z=h.getDerivedStateFromProps,(le=typeof z=="function"||typeof S.getSnapshotBeforeUpdate=="function")||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(U!==Ie||ue!==K)&&VE(u,S,m,K),Vo=!1,ue=u.memoizedState,S.state=ue,Gf(u,m,S,b),$f();var fe=u.memoizedState;U!==Ie||ue!==fe||Vo||l!==null&&l.dependencies!==null&&Pp(l.dependencies)?(typeof z=="function"&&(bv(u,h,z,m),fe=u.memoizedState),(Ee=Vo||FE(u,h,Ee,m,ue,fe,K)||l!==null&&l.dependencies!==null&&Pp(l.dependencies))?(le||typeof S.UNSAFE_componentWillUpdate!="function"&&typeof S.componentWillUpdate!="function"||(typeof S.componentWillUpdate=="function"&&S.componentWillUpdate(m,fe,K),typeof S.UNSAFE_componentWillUpdate=="function"&&S.UNSAFE_componentWillUpdate(m,fe,K)),typeof S.componentDidUpdate=="function"&&(u.flags|=4),typeof S.getSnapshotBeforeUpdate=="function"&&(u.flags|=1024)):(typeof S.componentDidUpdate!="function"||U===l.memoizedProps&&ue===l.memoizedState||(u.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||U===l.memoizedProps&&ue===l.memoizedState||(u.flags|=1024),u.memoizedProps=m,u.memoizedState=fe),S.props=m,S.state=fe,S.context=K,m=Ee):(typeof S.componentDidUpdate!="function"||U===l.memoizedProps&&ue===l.memoizedState||(u.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||U===l.memoizedProps&&ue===l.memoizedState||(u.flags|=1024),m=!1)}return S=m,Zp(l,u),m=(u.flags&128)!==0,S||m?(S=u.stateNode,h=m&&typeof h.getDerivedStateFromError!="function"?null:S.render(),u.flags|=1,l!==null&&m?(u.child=ju(u,l.child,null,b),u.child=ju(u,null,h,b)):Yr(l,u,h,b),u.memoizedState=S.state,l=u.child):l=eo(l,u,b),l}function eS(l,u,h,m){return Lf(),u.flags|=256,Yr(l,u,h,m),u.child}var Tv={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Cv(l){return{baseLanes:l,cachePool:UA()}}function Iv(l,u,h){return l=l!==null?l.childLanes&~h:0,u&&(l|=da),l}function tS(l,u,h){var m=u.pendingProps,b=!1,S=(u.flags&128)!==0,U;if((U=S)||(U=l!==null&&l.memoizedState===null?!1:(wr.current&2)!==0),U&&(b=!0,u.flags&=-129),U=(u.flags&32)!==0,u.flags&=-33,l===null){if(qt){if(b?zo(u):$o(),qt){var z=zn,K;if(K=z){e:{for(K=z,z=ls;K.nodeType!==8;){if(!z){z=null;break e}if(K=Oa(K.nextSibling),K===null){z=null;break e}}z=K}z!==null?(u.memoizedState={dehydrated:z,treeContext:lc!==null?{id:qs,overflow:Xs}:null,retryLane:536870912,hydrationErrors:null},K=Hi(18,null,null,0),K.stateNode=z,K.return=u,u.child=K,wi=u,zn=null,K=!0):K=!1}K||dc(u)}if(z=u.memoizedState,z!==null&&(z=z.dehydrated,z!==null))return dx(z)?u.lanes=32:u.lanes=536870912,null;Js(u)}return z=m.children,m=m.fallback,b?($o(),b=u.mode,z=Jp({mode:"hidden",children:z},b),m=oc(m,b,h,null),z.return=u,m.return=u,z.sibling=m,u.child=z,b=u.child,b.memoizedState=Cv(h),b.childLanes=Iv(l,U,h),u.memoizedState=Tv,m):(zo(u),Dv(u,z))}if(K=l.memoizedState,K!==null&&(z=K.dehydrated,z!==null)){if(S)u.flags&256?(zo(u),u.flags&=-257,u=Rv(l,u,h)):u.memoizedState!==null?($o(),u.child=l.child,u.flags|=128,u=null):($o(),b=m.fallback,z=u.mode,m=Jp({mode:"visible",children:m.children},z),b=oc(b,z,h,null),b.flags|=2,m.return=u,b.return=u,m.sibling=b,u.child=m,ju(u,l.child,null,h),m=u.child,m.memoizedState=Cv(h),m.childLanes=Iv(l,U,h),u.memoizedState=Tv,u=b);else if(zo(u),dx(z)){if(U=z.nextSibling&&z.nextSibling.dataset,U)var le=U.dgst;U=le,m=Error(r(419)),m.stack="",m.digest=U,Bf({value:m,source:null,stack:null}),u=Rv(l,u,h)}else if(Pr||Ff(l,u,h,!1),U=(h&l.childLanes)!==0,Pr||U){if(U=En,U!==null&&(m=h&-h,m=(m&42)!==0?1:Ls(m),m=(m&(U.suspendedLanes|h))!==0?0:m,m!==0&&m!==K.retryLane))throw K.retryLane=m,Du(l,m),Yi(U,l,m),WE;z.data==="$?"||qv(),u=Rv(l,u,h)}else z.data==="$?"?(u.flags|=192,u.child=l.child,u=null):(l=K.treeContext,zn=Oa(z.nextSibling),wi=u,qt=!0,uc=null,ls=!1,l!==null&&(la[ca++]=qs,la[ca++]=Xs,la[ca++]=lc,qs=l.id,Xs=l.overflow,lc=u),u=Dv(u,m.children),u.flags|=4096);return u}return b?($o(),b=m.fallback,z=u.mode,K=l.child,le=K.sibling,m=Ys(K,{mode:"hidden",children:m.children}),m.subtreeFlags=K.subtreeFlags&65011712,le!==null?b=Ys(le,b):(b=oc(b,z,h,null),b.flags|=2),b.return=u,m.return=u,m.sibling=b,u.child=m,m=b,b=u.child,z=l.child.memoizedState,z===null?z=Cv(h):(K=z.cachePool,K!==null?(le=xr._currentValue,K=K.parent!==le?{parent:le,pool:le}:K):K=UA(),z={baseLanes:z.baseLanes|h,cachePool:K}),b.memoizedState=z,b.childLanes=Iv(l,U,h),u.memoizedState=Tv,m):(zo(u),h=l.child,l=h.sibling,h=Ys(h,{mode:"visible",children:m.children}),h.return=u,h.sibling=null,l!==null&&(U=u.deletions,U===null?(u.deletions=[l],u.flags|=16):U.push(l)),u.child=h,u.memoizedState=null,h)}function Dv(l,u){return u=Jp({mode:"visible",children:u},l.mode),u.return=l,l.child=u}function Jp(l,u){return l=Hi(22,l,null,u),l.lanes=0,l.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},l}function Rv(l,u,h){return ju(u,l.child,null,h),l=Dv(u,u.pendingProps.children),l.flags|=2,u.memoizedState=null,l}function nS(l,u,h){l.lanes|=u;var m=l.alternate;m!==null&&(m.lanes|=u),qy(l.return,u,h)}function Ov(l,u,h,m,b){var S=l.memoizedState;S===null?l.memoizedState={isBackwards:u,rendering:null,renderingStartTime:0,last:m,tail:h,tailMode:b}:(S.isBackwards=u,S.rendering=null,S.renderingStartTime=0,S.last=m,S.tail=h,S.tailMode=b)}function rS(l,u,h){var m=u.pendingProps,b=m.revealOrder,S=m.tail;if(Yr(l,u,m.children,h),m=wr.current,(m&2)!==0)m=m&1|2,u.flags|=128;else{if(l!==null&&(l.flags&128)!==0)e:for(l=u.child;l!==null;){if(l.tag===13)l.memoizedState!==null&&nS(l,h,u);else if(l.tag===19)nS(l,h,u);else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===u)break e;for(;l.sibling===null;){if(l.return===null||l.return===u)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}m&=1}switch(be(wr,m),b){case"forwards":for(h=u.child,b=null;h!==null;)l=h.alternate,l!==null&&Xp(l)===null&&(b=h),h=h.sibling;h=b,h===null?(b=u.child,u.child=null):(b=h.sibling,h.sibling=null),Ov(u,!1,b,h,S);break;case"backwards":for(h=null,b=u.child,u.child=null;b!==null;){if(l=b.alternate,l!==null&&Xp(l)===null){u.child=b;break}l=b.sibling,b.sibling=h,h=b,b=l}Ov(u,!0,h,null,S);break;case"together":Ov(u,!1,null,null,void 0);break;default:u.memoizedState=null}return u.child}function eo(l,u,h){if(l!==null&&(u.dependencies=l.dependencies),Xo|=u.lanes,(h&u.childLanes)===0)if(l!==null){if(Ff(l,u,h,!1),(h&u.childLanes)===0)return null}else return null;if(l!==null&&u.child!==l.child)throw Error(r(153));if(u.child!==null){for(l=u.child,h=Ys(l,l.pendingProps),u.child=h,h.return=u;l.sibling!==null;)l=l.sibling,h=h.sibling=Ys(l,l.pendingProps),h.return=u;h.sibling=null}return u.child}function Mv(l,u){return(l.lanes&u)!==0?!0:(l=l.dependencies,!!(l!==null&&Pp(l)))}function h8(l,u,h){switch(u.tag){case 3:Fe(u,u.stateNode.containerInfo),Fo(u,xr,l.memoizedState.cache),Lf();break;case 27:case 5:ye(u);break;case 4:Fe(u,u.stateNode.containerInfo);break;case 10:Fo(u,u.type,u.memoizedProps.value);break;case 13:var m=u.memoizedState;if(m!==null)return m.dehydrated!==null?(zo(u),u.flags|=128,null):(h&u.child.childLanes)!==0?tS(l,u,h):(zo(u),l=eo(l,u,h),l!==null?l.sibling:null);zo(u);break;case 19:var b=(l.flags&128)!==0;if(m=(h&u.childLanes)!==0,m||(Ff(l,u,h,!1),m=(h&u.childLanes)!==0),b){if(m)return rS(l,u,h);u.flags|=128}if(b=u.memoizedState,b!==null&&(b.rendering=null,b.tail=null,b.lastEffect=null),be(wr,wr.current),m)break;return null;case 22:case 23:return u.lanes=0,KE(l,u,h);case 24:Fo(u,xr,l.memoizedState.cache)}return eo(l,u,h)}function iS(l,u,h){if(l!==null)if(l.memoizedProps!==u.pendingProps)Pr=!0;else{if(!Mv(l,h)&&(u.flags&128)===0)return Pr=!1,h8(l,u,h);Pr=(l.flags&131072)!==0}else Pr=!1,qt&&(u.flags&1048576)!==0&&kA(u,Mp,u.index);switch(u.lanes=0,u.tag){case 16:e:{l=u.pendingProps;var m=u.elementType,b=m._init;if(m=b(m._payload),u.type=m,typeof m=="function")Uy(m)?(l=mc(m,l),u.tag=1,u=JE(null,u,m,l,h)):(u.tag=0,u=Sv(null,u,m,l,h));else{if(m!=null){if(b=m.$$typeof,b===D){u.tag=11,u=YE(null,u,m,l,h);break e}else if(b===O){u.tag=14,u=qE(null,u,m,l,h);break e}}throw u=q(m)||m,Error(r(306,u,""))}}return u;case 0:return Sv(l,u,u.type,u.pendingProps,h);case 1:return m=u.type,b=mc(m,u.pendingProps),JE(l,u,m,b,h);case 3:e:{if(Fe(u,u.stateNode.containerInfo),l===null)throw Error(r(387));m=u.pendingProps;var S=u.memoizedState;b=S.element,tv(l,u),Gf(u,m,null,h);var U=u.memoizedState;if(m=U.cache,Fo(u,xr,m),m!==S.cache&&Xy(u,[xr],h,!0),$f(),m=U.element,S.isDehydrated)if(S={element:m,isDehydrated:!1,cache:U.cache},u.updateQueue.baseState=S,u.memoizedState=S,u.flags&256){u=eS(l,u,m,h);break e}else if(m!==b){b=sa(Error(r(424)),u),Bf(b),u=eS(l,u,m,h);break e}else{switch(l=u.stateNode.containerInfo,l.nodeType){case 9:l=l.body;break;default:l=l.nodeName==="HTML"?l.ownerDocument.body:l}for(zn=Oa(l.firstChild),wi=u,qt=!0,uc=null,ls=!0,h=LE(u,null,m,h),u.child=h;h;)h.flags=h.flags&-3|4096,h=h.sibling}else{if(Lf(),m===b){u=eo(l,u,h);break e}Yr(l,u,m,h)}u=u.child}return u;case 26:return Zp(l,u),l===null?(h=lT(u.type,null,u.pendingProps,null))?u.memoizedState=h:qt||(h=u.type,l=u.pendingProps,m=hg(Se.current).createElement(h),m[mr]=u,m[sr]=l,Xr(m,h,l),Xn(m),u.stateNode=m):u.memoizedState=lT(u.type,l.memoizedProps,u.pendingProps,l.memoizedState),null;case 27:return ye(u),l===null&&qt&&(m=u.stateNode=aT(u.type,u.pendingProps,Se.current),wi=u,ls=!0,b=zn,Jo(u.type)?(fx=b,zn=Oa(m.firstChild)):zn=b),Yr(l,u,u.pendingProps.children,h),Zp(l,u),l===null&&(u.flags|=4194304),u.child;case 5:return l===null&&qt&&((b=m=zn)&&(m=U8(m,u.type,u.pendingProps,ls),m!==null?(u.stateNode=m,wi=u,zn=Oa(m.firstChild),ls=!1,b=!0):b=!1),b||dc(u)),ye(u),b=u.type,S=u.pendingProps,U=l!==null?l.memoizedProps:null,m=S.children,lx(b,S)?m=null:U!==null&&lx(b,U)&&(u.flags|=32),u.memoizedState!==null&&(b=ov(l,u,a8,null,null,h),hh._currentValue=b),Zp(l,u),Yr(l,u,m,h),u.child;case 6:return l===null&&qt&&((l=h=zn)&&(h=H8(h,u.pendingProps,ls),h!==null?(u.stateNode=h,wi=u,zn=null,l=!0):l=!1),l||dc(u)),null;case 13:return tS(l,u,h);case 4:return Fe(u,u.stateNode.containerInfo),m=u.pendingProps,l===null?u.child=ju(u,null,m,h):Yr(l,u,m,h),u.child;case 11:return YE(l,u,u.type,u.pendingProps,h);case 7:return Yr(l,u,u.pendingProps,h),u.child;case 8:return Yr(l,u,u.pendingProps.children,h),u.child;case 12:return Yr(l,u,u.pendingProps.children,h),u.child;case 10:return m=u.pendingProps,Fo(u,u.type,m.value),Yr(l,u,m.children,h),u.child;case 9:return b=u.type._context,m=u.pendingProps.children,hc(u),b=ii(b),m=m(b),u.flags|=1,Yr(l,u,m,h),u.child;case 14:return qE(l,u,u.type,u.pendingProps,h);case 15:return XE(l,u,u.type,u.pendingProps,h);case 19:return rS(l,u,h);case 31:return m=u.pendingProps,h=u.mode,m={mode:m.mode,children:m.children},l===null?(h=Jp(m,h),h.ref=u.ref,u.child=h,h.return=u,u=h):(h=Ys(l.child,m),h.ref=u.ref,u.child=h,h.return=u,u=h),u;case 22:return KE(l,u,h);case 24:return hc(u),m=ii(xr),l===null?(b=Zy(),b===null&&(b=En,S=Ky(),b.pooledCache=S,S.refCount++,S!==null&&(b.pooledCacheLanes|=h),b=S),u.memoizedState={parent:m,cache:b},ev(u),Fo(u,xr,b)):((l.lanes&h)!==0&&(tv(l,u),Gf(u,null,null,h),$f()),b=l.memoizedState,S=u.memoizedState,b.parent!==m?(b={parent:m,cache:m},u.memoizedState=b,u.lanes===0&&(u.memoizedState=u.updateQueue.baseState=b),Fo(u,xr,m)):(m=S.cache,Fo(u,xr,m),m!==b.cache&&Xy(u,[xr],h,!0))),Yr(l,u,u.pendingProps.children,h),u.child;case 29:throw u.pendingProps}throw Error(r(156,u.tag))}function to(l){l.flags|=4}function aS(l,u){if(u.type!=="stylesheet"||(u.state.loading&4)!==0)l.flags&=-16777217;else if(l.flags|=16777216,!hT(u)){if(u=ua.current,u!==null&&((Bt&4194048)===Bt?cs!==null:(Bt&62914560)!==Bt&&(Bt&536870912)===0||u!==cs))throw Hf=Jy,HA;l.flags|=8192}}function eg(l,u){u!==null&&(l.flags|=4),l.flags&16384&&(u=l.tag!==22?$r():536870912,l.lanes|=u,$u|=u)}function Zf(l,u){if(!qt)switch(l.tailMode){case"hidden":u=l.tail;for(var h=null;u!==null;)u.alternate!==null&&(h=u),u=u.sibling;h===null?l.tail=null:h.sibling=null;break;case"collapsed":h=l.tail;for(var m=null;h!==null;)h.alternate!==null&&(m=h),h=h.sibling;m===null?u||l.tail===null?l.tail=null:l.tail.sibling=null:m.sibling=null}}function Vn(l){var u=l.alternate!==null&&l.alternate.child===l.child,h=0,m=0;if(u)for(var b=l.child;b!==null;)h|=b.lanes|b.childLanes,m|=b.subtreeFlags&65011712,m|=b.flags&65011712,b.return=l,b=b.sibling;else for(b=l.child;b!==null;)h|=b.lanes|b.childLanes,m|=b.subtreeFlags,m|=b.flags,b.return=l,b=b.sibling;return l.subtreeFlags|=m,l.childLanes=h,u}function p8(l,u,h){var m=u.pendingProps;switch(Gy(u),u.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Vn(u),null;case 1:return Vn(u),null;case 3:return h=u.stateNode,m=null,l!==null&&(m=l.memoizedState.cache),u.memoizedState.cache!==m&&(u.flags|=2048),Qs(xr),ae(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(l===null||l.child===null)&&(Nf(u)?to(u):l===null||l.memoizedState.isDehydrated&&(u.flags&256)===0||(u.flags|=1024,BA())),Vn(u),null;case 26:return h=u.memoizedState,l===null?(to(u),h!==null?(Vn(u),aS(u,h)):(Vn(u),u.flags&=-16777217)):h?h!==l.memoizedState?(to(u),Vn(u),aS(u,h)):(Vn(u),u.flags&=-16777217):(l.memoizedProps!==m&&to(u),Vn(u),u.flags&=-16777217),null;case 27:pe(u),h=Se.current;var b=u.type;if(l!==null&&u.stateNode!=null)l.memoizedProps!==m&&to(u);else{if(!m){if(u.stateNode===null)throw Error(r(166));return Vn(u),null}l=ke.current,Nf(u)?NA(u):(l=aT(b,m,h),u.stateNode=l,to(u))}return Vn(u),null;case 5:if(pe(u),h=u.type,l!==null&&u.stateNode!=null)l.memoizedProps!==m&&to(u);else{if(!m){if(u.stateNode===null)throw Error(r(166));return Vn(u),null}if(l=ke.current,Nf(u))NA(u);else{switch(b=hg(Se.current),l){case 1:l=b.createElementNS("http://www.w3.org/2000/svg",h);break;case 2:l=b.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;default:switch(h){case"svg":l=b.createElementNS("http://www.w3.org/2000/svg",h);break;case"math":l=b.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;case"script":l=b.createElement("div"),l.innerHTML="<script><\/script>",l=l.removeChild(l.firstChild);break;case"select":l=typeof m.is=="string"?b.createElement("select",{is:m.is}):b.createElement("select"),m.multiple?l.multiple=!0:m.size&&(l.size=m.size);break;default:l=typeof m.is=="string"?b.createElement(h,{is:m.is}):b.createElement(h)}}l[mr]=u,l[sr]=m;e:for(b=u.child;b!==null;){if(b.tag===5||b.tag===6)l.appendChild(b.stateNode);else if(b.tag!==4&&b.tag!==27&&b.child!==null){b.child.return=b,b=b.child;continue}if(b===u)break e;for(;b.sibling===null;){if(b.return===null||b.return===u)break e;b=b.return}b.sibling.return=b.return,b=b.sibling}u.stateNode=l;e:switch(Xr(l,h,m),h){case"button":case"input":case"select":case"textarea":l=!!m.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&to(u)}}return Vn(u),u.flags&=-16777217,null;case 6:if(l&&u.stateNode!=null)l.memoizedProps!==m&&to(u);else{if(typeof m!="string"&&u.stateNode===null)throw Error(r(166));if(l=Se.current,Nf(u)){if(l=u.stateNode,h=u.memoizedProps,m=null,b=wi,b!==null)switch(b.tag){case 27:case 5:m=b.memoizedProps}l[mr]=u,l=!!(l.nodeValue===h||m!==null&&m.suppressHydrationWarning===!0||ZS(l.nodeValue,h)),l||dc(u)}else l=hg(l).createTextNode(m),l[mr]=u,u.stateNode=l}return Vn(u),null;case 13:if(m=u.memoizedState,l===null||l.memoizedState!==null&&l.memoizedState.dehydrated!==null){if(b=Nf(u),m!==null&&m.dehydrated!==null){if(l===null){if(!b)throw Error(r(318));if(b=u.memoizedState,b=b!==null?b.dehydrated:null,!b)throw Error(r(317));b[mr]=u}else Lf(),(u.flags&128)===0&&(u.memoizedState=null),u.flags|=4;Vn(u),b=!1}else b=BA(),l!==null&&l.memoizedState!==null&&(l.memoizedState.hydrationErrors=b),b=!0;if(!b)return u.flags&256?(Js(u),u):(Js(u),null)}if(Js(u),(u.flags&128)!==0)return u.lanes=h,u;if(h=m!==null,l=l!==null&&l.memoizedState!==null,h){m=u.child,b=null,m.alternate!==null&&m.alternate.memoizedState!==null&&m.alternate.memoizedState.cachePool!==null&&(b=m.alternate.memoizedState.cachePool.pool);var S=null;m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(S=m.memoizedState.cachePool.pool),S!==b&&(m.flags|=2048)}return h!==l&&h&&(u.child.flags|=8192),eg(u,u.updateQueue),Vn(u),null;case 4:return ae(),l===null&&rx(u.stateNode.containerInfo),Vn(u),null;case 10:return Qs(u.type),Vn(u),null;case 19:if(xe(wr),b=u.memoizedState,b===null)return Vn(u),null;if(m=(u.flags&128)!==0,S=b.rendering,S===null)if(m)Zf(b,!1);else{if($n!==0||l!==null&&(l.flags&128)!==0)for(l=u.child;l!==null;){if(S=Xp(l),S!==null){for(u.flags|=128,Zf(b,!1),l=S.updateQueue,u.updateQueue=l,eg(u,l),u.subtreeFlags=0,l=h,h=u.child;h!==null;)PA(h,l),h=h.sibling;return be(wr,wr.current&1|2),u.child}l=l.sibling}b.tail!==null&&Re()>rg&&(u.flags|=128,m=!0,Zf(b,!1),u.lanes=4194304)}else{if(!m)if(l=Xp(S),l!==null){if(u.flags|=128,m=!0,l=l.updateQueue,u.updateQueue=l,eg(u,l),Zf(b,!0),b.tail===null&&b.tailMode==="hidden"&&!S.alternate&&!qt)return Vn(u),null}else 2*Re()-b.renderingStartTime>rg&&h!==536870912&&(u.flags|=128,m=!0,Zf(b,!1),u.lanes=4194304);b.isBackwards?(S.sibling=u.child,u.child=S):(l=b.last,l!==null?l.sibling=S:u.child=S,b.last=S)}return b.tail!==null?(u=b.tail,b.rendering=u,b.tail=u.sibling,b.renderingStartTime=Re(),u.sibling=null,l=wr.current,be(wr,m?l&1|2:l&1),u):(Vn(u),null);case 22:case 23:return Js(u),av(),m=u.memoizedState!==null,l!==null?l.memoizedState!==null!==m&&(u.flags|=8192):m&&(u.flags|=8192),m?(h&536870912)!==0&&(u.flags&128)===0&&(Vn(u),u.subtreeFlags&6&&(u.flags|=8192)):Vn(u),h=u.updateQueue,h!==null&&eg(u,h.retryQueue),h=null,l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(h=l.memoizedState.cachePool.pool),m=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(m=u.memoizedState.cachePool.pool),m!==h&&(u.flags|=2048),l!==null&&xe(pc),null;case 24:return h=null,l!==null&&(h=l.memoizedState.cache),u.memoizedState.cache!==h&&(u.flags|=2048),Qs(xr),Vn(u),null;case 25:return null;case 30:return null}throw Error(r(156,u.tag))}function g8(l,u){switch(Gy(u),u.tag){case 1:return l=u.flags,l&65536?(u.flags=l&-65537|128,u):null;case 3:return Qs(xr),ae(),l=u.flags,(l&65536)!==0&&(l&128)===0?(u.flags=l&-65537|128,u):null;case 26:case 27:case 5:return pe(u),null;case 13:if(Js(u),l=u.memoizedState,l!==null&&l.dehydrated!==null){if(u.alternate===null)throw Error(r(340));Lf()}return l=u.flags,l&65536?(u.flags=l&-65537|128,u):null;case 19:return xe(wr),null;case 4:return ae(),null;case 10:return Qs(u.type),null;case 22:case 23:return Js(u),av(),l!==null&&xe(pc),l=u.flags,l&65536?(u.flags=l&-65537|128,u):null;case 24:return Qs(xr),null;case 25:return null;default:return null}}function sS(l,u){switch(Gy(u),u.tag){case 3:Qs(xr),ae();break;case 26:case 27:case 5:pe(u);break;case 4:ae();break;case 13:Js(u);break;case 19:xe(wr);break;case 10:Qs(u.type);break;case 22:case 23:Js(u),av(),l!==null&&xe(pc);break;case 24:Qs(xr)}}function Jf(l,u){try{var h=u.updateQueue,m=h!==null?h.lastEffect:null;if(m!==null){var b=m.next;h=b;do{if((h.tag&l)===l){m=void 0;var S=h.create,U=h.inst;m=S(),U.destroy=m}h=h.next}while(h!==b)}}catch(z){xn(u,u.return,z)}}function Go(l,u,h){try{var m=u.updateQueue,b=m!==null?m.lastEffect:null;if(b!==null){var S=b.next;m=S;do{if((m.tag&l)===l){var U=m.inst,z=U.destroy;if(z!==void 0){U.destroy=void 0,b=u;var K=h,le=z;try{le()}catch(Ee){xn(b,K,Ee)}}}m=m.next}while(m!==S)}}catch(Ee){xn(u,u.return,Ee)}}function oS(l){var u=l.updateQueue;if(u!==null){var h=l.stateNode;try{qA(u,h)}catch(m){xn(l,l.return,m)}}}function lS(l,u,h){h.props=mc(l.type,l.memoizedProps),h.state=l.memoizedState;try{h.componentWillUnmount()}catch(m){xn(l,u,m)}}function eh(l,u){try{var h=l.ref;if(h!==null){switch(l.tag){case 26:case 27:case 5:var m=l.stateNode;break;case 30:m=l.stateNode;break;default:m=l.stateNode}typeof h=="function"?l.refCleanup=h(m):h.current=m}}catch(b){xn(l,u,b)}}function us(l,u){var h=l.ref,m=l.refCleanup;if(h!==null)if(typeof m=="function")try{m()}catch(b){xn(l,u,b)}finally{l.refCleanup=null,l=l.alternate,l!=null&&(l.refCleanup=null)}else if(typeof h=="function")try{h(null)}catch(b){xn(l,u,b)}else h.current=null}function cS(l){var u=l.type,h=l.memoizedProps,m=l.stateNode;try{e:switch(u){case"button":case"input":case"select":case"textarea":h.autoFocus&&m.focus();break e;case"img":h.src?m.src=h.src:h.srcSet&&(m.srcset=h.srcSet)}}catch(b){xn(l,l.return,b)}}function Pv(l,u,h){try{var m=l.stateNode;L8(m,l.type,h,u),m[sr]=u}catch(b){xn(l,l.return,b)}}function uS(l){return l.tag===5||l.tag===3||l.tag===26||l.tag===27&&Jo(l.type)||l.tag===4}function kv(l){e:for(;;){for(;l.sibling===null;){if(l.return===null||uS(l.return))return null;l=l.return}for(l.sibling.return=l.return,l=l.sibling;l.tag!==5&&l.tag!==6&&l.tag!==18;){if(l.tag===27&&Jo(l.type)||l.flags&2||l.child===null||l.tag===4)continue e;l.child.return=l,l=l.child}if(!(l.flags&2))return l.stateNode}}function Nv(l,u,h){var m=l.tag;if(m===5||m===6)l=l.stateNode,u?(h.nodeType===9?h.body:h.nodeName==="HTML"?h.ownerDocument.body:h).insertBefore(l,u):(u=h.nodeType===9?h.body:h.nodeName==="HTML"?h.ownerDocument.body:h,u.appendChild(l),h=h._reactRootContainer,h!=null||u.onclick!==null||(u.onclick=fg));else if(m!==4&&(m===27&&Jo(l.type)&&(h=l.stateNode,u=null),l=l.child,l!==null))for(Nv(l,u,h),l=l.sibling;l!==null;)Nv(l,u,h),l=l.sibling}function tg(l,u,h){var m=l.tag;if(m===5||m===6)l=l.stateNode,u?h.insertBefore(l,u):h.appendChild(l);else if(m!==4&&(m===27&&Jo(l.type)&&(h=l.stateNode),l=l.child,l!==null))for(tg(l,u,h),l=l.sibling;l!==null;)tg(l,u,h),l=l.sibling}function dS(l){var u=l.stateNode,h=l.memoizedProps;try{for(var m=l.type,b=u.attributes;b.length;)u.removeAttributeNode(b[0]);Xr(u,m,h),u[mr]=l,u[sr]=h}catch(S){xn(l,l.return,S)}}var no=!1,Qn=!1,Lv=!1,fS=typeof WeakSet=="function"?WeakSet:Set,kr=null;function m8(l,u){if(l=l.containerInfo,sx=xg,l=AA(l),ky(l)){if("selectionStart"in l)var h={start:l.selectionStart,end:l.selectionEnd};else e:{h=(h=l.ownerDocument)&&h.defaultView||window;var m=h.getSelection&&h.getSelection();if(m&&m.rangeCount!==0){h=m.anchorNode;var b=m.anchorOffset,S=m.focusNode;m=m.focusOffset;try{h.nodeType,S.nodeType}catch{h=null;break e}var U=0,z=-1,K=-1,le=0,Ee=0,Ie=l,ue=null;t:for(;;){for(var fe;Ie!==h||b!==0&&Ie.nodeType!==3||(z=U+b),Ie!==S||m!==0&&Ie.nodeType!==3||(K=U+m),Ie.nodeType===3&&(U+=Ie.nodeValue.length),(fe=Ie.firstChild)!==null;)ue=Ie,Ie=fe;for(;;){if(Ie===l)break t;if(ue===h&&++le===b&&(z=U),ue===S&&++Ee===m&&(K=U),(fe=Ie.nextSibling)!==null)break;Ie=ue,ue=Ie.parentNode}Ie=fe}h=z===-1||K===-1?null:{start:z,end:K}}else h=null}h=h||{start:0,end:0}}else h=null;for(ox={focusedElem:l,selectionRange:h},xg=!1,kr=u;kr!==null;)if(u=kr,l=u.child,(u.subtreeFlags&1024)!==0&&l!==null)l.return=u,kr=l;else for(;kr!==null;){switch(u=kr,S=u.alternate,l=u.flags,u.tag){case 0:break;case 11:case 15:break;case 1:if((l&1024)!==0&&S!==null){l=void 0,h=u,b=S.memoizedProps,S=S.memoizedState,m=h.stateNode;try{var ct=mc(h.type,b,h.elementType===h.type);l=m.getSnapshotBeforeUpdate(ct,S),m.__reactInternalSnapshotBeforeUpdate=l}catch(at){xn(h,h.return,at)}}break;case 3:if((l&1024)!==0){if(l=u.stateNode.containerInfo,h=l.nodeType,h===9)ux(l);else if(h===1)switch(l.nodeName){case"HEAD":case"HTML":case"BODY":ux(l);break;default:l.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((l&1024)!==0)throw Error(r(163))}if(l=u.sibling,l!==null){l.return=u.return,kr=l;break}kr=u.return}}function hS(l,u,h){var m=h.flags;switch(h.tag){case 0:case 11:case 15:Wo(l,h),m&4&&Jf(5,h);break;case 1:if(Wo(l,h),m&4)if(l=h.stateNode,u===null)try{l.componentDidMount()}catch(U){xn(h,h.return,U)}else{var b=mc(h.type,u.memoizedProps);u=u.memoizedState;try{l.componentDidUpdate(b,u,l.__reactInternalSnapshotBeforeUpdate)}catch(U){xn(h,h.return,U)}}m&64&&oS(h),m&512&&eh(h,h.return);break;case 3:if(Wo(l,h),m&64&&(l=h.updateQueue,l!==null)){if(u=null,h.child!==null)switch(h.child.tag){case 27:case 5:u=h.child.stateNode;break;case 1:u=h.child.stateNode}try{qA(l,u)}catch(U){xn(h,h.return,U)}}break;case 27:u===null&&m&4&&dS(h);case 26:case 5:Wo(l,h),u===null&&m&4&&cS(h),m&512&&eh(h,h.return);break;case 12:Wo(l,h);break;case 13:Wo(l,h),m&4&&mS(l,h),m&64&&(l=h.memoizedState,l!==null&&(l=l.dehydrated,l!==null&&(h=S8.bind(null,h),z8(l,h))));break;case 22:if(m=h.memoizedState!==null||no,!m){u=u!==null&&u.memoizedState!==null||Qn,b=no;var S=Qn;no=m,(Qn=u)&&!S?Yo(l,h,(h.subtreeFlags&8772)!==0):Wo(l,h),no=b,Qn=S}break;case 30:break;default:Wo(l,h)}}function pS(l){var u=l.alternate;u!==null&&(l.alternate=null,pS(u)),l.child=null,l.deletions=null,l.sibling=null,l.tag===5&&(u=l.stateNode,u!==null&&ko(u)),l.stateNode=null,l.return=null,l.dependencies=null,l.memoizedProps=null,l.memoizedState=null,l.pendingProps=null,l.stateNode=null,l.updateQueue=null}var Pn=null,Oi=!1;function ro(l,u,h){for(h=h.child;h!==null;)gS(l,u,h),h=h.sibling}function gS(l,u,h){if(it&&typeof it.onCommitFiberUnmount=="function")try{it.onCommitFiberUnmount(nt,h)}catch{}switch(h.tag){case 26:Qn||us(h,u),ro(l,u,h),h.memoizedState?h.memoizedState.count--:h.stateNode&&(h=h.stateNode,h.parentNode.removeChild(h));break;case 27:Qn||us(h,u);var m=Pn,b=Oi;Jo(h.type)&&(Pn=h.stateNode,Oi=!1),ro(l,u,h),ch(h.stateNode),Pn=m,Oi=b;break;case 5:Qn||us(h,u);case 6:if(m=Pn,b=Oi,Pn=null,ro(l,u,h),Pn=m,Oi=b,Pn!==null)if(Oi)try{(Pn.nodeType===9?Pn.body:Pn.nodeName==="HTML"?Pn.ownerDocument.body:Pn).removeChild(h.stateNode)}catch(S){xn(h,u,S)}else try{Pn.removeChild(h.stateNode)}catch(S){xn(h,u,S)}break;case 18:Pn!==null&&(Oi?(l=Pn,rT(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,h.stateNode),yh(l)):rT(Pn,h.stateNode));break;case 4:m=Pn,b=Oi,Pn=h.stateNode.containerInfo,Oi=!0,ro(l,u,h),Pn=m,Oi=b;break;case 0:case 11:case 14:case 15:Qn||Go(2,h,u),Qn||Go(4,h,u),ro(l,u,h);break;case 1:Qn||(us(h,u),m=h.stateNode,typeof m.componentWillUnmount=="function"&&lS(h,u,m)),ro(l,u,h);break;case 21:ro(l,u,h);break;case 22:Qn=(m=Qn)||h.memoizedState!==null,ro(l,u,h),Qn=m;break;default:ro(l,u,h)}}function mS(l,u){if(u.memoizedState===null&&(l=u.alternate,l!==null&&(l=l.memoizedState,l!==null&&(l=l.dehydrated,l!==null))))try{yh(l)}catch(h){xn(u,u.return,h)}}function y8(l){switch(l.tag){case 13:case 19:var u=l.stateNode;return u===null&&(u=l.stateNode=new fS),u;case 22:return l=l.stateNode,u=l._retryCache,u===null&&(u=l._retryCache=new fS),u;default:throw Error(r(435,l.tag))}}function Bv(l,u){var h=y8(l);u.forEach(function(m){var b=T8.bind(null,l,m);h.has(m)||(h.add(m),m.then(b,b))})}function zi(l,u){var h=u.deletions;if(h!==null)for(var m=0;m<h.length;m++){var b=h[m],S=l,U=u,z=U;e:for(;z!==null;){switch(z.tag){case 27:if(Jo(z.type)){Pn=z.stateNode,Oi=!1;break e}break;case 5:Pn=z.stateNode,Oi=!1;break e;case 3:case 4:Pn=z.stateNode.containerInfo,Oi=!0;break e}z=z.return}if(Pn===null)throw Error(r(160));gS(S,U,b),Pn=null,Oi=!1,S=b.alternate,S!==null&&(S.return=null),b.return=null}if(u.subtreeFlags&13878)for(u=u.child;u!==null;)yS(u,l),u=u.sibling}var Ra=null;function yS(l,u){var h=l.alternate,m=l.flags;switch(l.tag){case 0:case 11:case 14:case 15:zi(u,l),$i(l),m&4&&(Go(3,l,l.return),Jf(3,l),Go(5,l,l.return));break;case 1:zi(u,l),$i(l),m&512&&(Qn||h===null||us(h,h.return)),m&64&&no&&(l=l.updateQueue,l!==null&&(m=l.callbacks,m!==null&&(h=l.shared.hiddenCallbacks,l.shared.hiddenCallbacks=h===null?m:h.concat(m))));break;case 26:var b=Ra;if(zi(u,l),$i(l),m&512&&(Qn||h===null||us(h,h.return)),m&4){var S=h!==null?h.memoizedState:null;if(m=l.memoizedState,h===null)if(m===null)if(l.stateNode===null){e:{m=l.type,h=l.memoizedProps,b=b.ownerDocument||b;t:switch(m){case"title":S=b.getElementsByTagName("title")[0],(!S||S[Gl]||S[mr]||S.namespaceURI==="http://www.w3.org/2000/svg"||S.hasAttribute("itemprop"))&&(S=b.createElement(m),b.head.insertBefore(S,b.querySelector("head > title"))),Xr(S,m,h),S[mr]=l,Xn(S),m=S;break e;case"link":var U=dT("link","href",b).get(m+(h.href||""));if(U){for(var z=0;z<U.length;z++)if(S=U[z],S.getAttribute("href")===(h.href==null||h.href===""?null:h.href)&&S.getAttribute("rel")===(h.rel==null?null:h.rel)&&S.getAttribute("title")===(h.title==null?null:h.title)&&S.getAttribute("crossorigin")===(h.crossOrigin==null?null:h.crossOrigin)){U.splice(z,1);break t}}S=b.createElement(m),Xr(S,m,h),b.head.appendChild(S);break;case"meta":if(U=dT("meta","content",b).get(m+(h.content||""))){for(z=0;z<U.length;z++)if(S=U[z],S.getAttribute("content")===(h.content==null?null:""+h.content)&&S.getAttribute("name")===(h.name==null?null:h.name)&&S.getAttribute("property")===(h.property==null?null:h.property)&&S.getAttribute("http-equiv")===(h.httpEquiv==null?null:h.httpEquiv)&&S.getAttribute("charset")===(h.charSet==null?null:h.charSet)){U.splice(z,1);break t}}S=b.createElement(m),Xr(S,m,h),b.head.appendChild(S);break;default:throw Error(r(468,m))}S[mr]=l,Xn(S),m=S}l.stateNode=m}else fT(b,l.type,l.stateNode);else l.stateNode=uT(b,m,l.memoizedProps);else S!==m?(S===null?h.stateNode!==null&&(h=h.stateNode,h.parentNode.removeChild(h)):S.count--,m===null?fT(b,l.type,l.stateNode):uT(b,m,l.memoizedProps)):m===null&&l.stateNode!==null&&Pv(l,l.memoizedProps,h.memoizedProps)}break;case 27:zi(u,l),$i(l),m&512&&(Qn||h===null||us(h,h.return)),h!==null&&m&4&&Pv(l,l.memoizedProps,h.memoizedProps);break;case 5:if(zi(u,l),$i(l),m&512&&(Qn||h===null||us(h,h.return)),l.flags&32){b=l.stateNode;try{na(b,"")}catch(fe){xn(l,l.return,fe)}}m&4&&l.stateNode!=null&&(b=l.memoizedProps,Pv(l,b,h!==null?h.memoizedProps:b)),m&1024&&(Lv=!0);break;case 6:if(zi(u,l),$i(l),m&4){if(l.stateNode===null)throw Error(r(162));m=l.memoizedProps,h=l.stateNode;try{h.nodeValue=m}catch(fe){xn(l,l.return,fe)}}break;case 3:if(mg=null,b=Ra,Ra=pg(u.containerInfo),zi(u,l),Ra=b,$i(l),m&4&&h!==null&&h.memoizedState.isDehydrated)try{yh(u.containerInfo)}catch(fe){xn(l,l.return,fe)}Lv&&(Lv=!1,vS(l));break;case 4:m=Ra,Ra=pg(l.stateNode.containerInfo),zi(u,l),$i(l),Ra=m;break;case 12:zi(u,l),$i(l);break;case 13:zi(u,l),$i(l),l.child.flags&8192&&l.memoizedState!==null!=(h!==null&&h.memoizedState!==null)&&(zv=Re()),m&4&&(m=l.updateQueue,m!==null&&(l.updateQueue=null,Bv(l,m)));break;case 22:b=l.memoizedState!==null;var K=h!==null&&h.memoizedState!==null,le=no,Ee=Qn;if(no=le||b,Qn=Ee||K,zi(u,l),Qn=Ee,no=le,$i(l),m&8192)e:for(u=l.stateNode,u._visibility=b?u._visibility&-2:u._visibility|1,b&&(h===null||K||no||Qn||yc(l)),h=null,u=l;;){if(u.tag===5||u.tag===26){if(h===null){K=h=u;try{if(S=K.stateNode,b)U=S.style,typeof U.setProperty=="function"?U.setProperty("display","none","important"):U.display="none";else{z=K.stateNode;var Ie=K.memoizedProps.style,ue=Ie!=null&&Ie.hasOwnProperty("display")?Ie.display:null;z.style.display=ue==null||typeof ue=="boolean"?"":(""+ue).trim()}}catch(fe){xn(K,K.return,fe)}}}else if(u.tag===6){if(h===null){K=u;try{K.stateNode.nodeValue=b?"":K.memoizedProps}catch(fe){xn(K,K.return,fe)}}}else if((u.tag!==22&&u.tag!==23||u.memoizedState===null||u===l)&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===l)break e;for(;u.sibling===null;){if(u.return===null||u.return===l)break e;h===u&&(h=null),u=u.return}h===u&&(h=null),u.sibling.return=u.return,u=u.sibling}m&4&&(m=l.updateQueue,m!==null&&(h=m.retryQueue,h!==null&&(m.retryQueue=null,Bv(l,h))));break;case 19:zi(u,l),$i(l),m&4&&(m=l.updateQueue,m!==null&&(l.updateQueue=null,Bv(l,m)));break;case 30:break;case 21:break;default:zi(u,l),$i(l)}}function $i(l){var u=l.flags;if(u&2){try{for(var h,m=l.return;m!==null;){if(uS(m)){h=m;break}m=m.return}if(h==null)throw Error(r(160));switch(h.tag){case 27:var b=h.stateNode,S=kv(l);tg(l,S,b);break;case 5:var U=h.stateNode;h.flags&32&&(na(U,""),h.flags&=-33);var z=kv(l);tg(l,z,U);break;case 3:case 4:var K=h.stateNode.containerInfo,le=kv(l);Nv(l,le,K);break;default:throw Error(r(161))}}catch(Ee){xn(l,l.return,Ee)}l.flags&=-3}u&4096&&(l.flags&=-4097)}function vS(l){if(l.subtreeFlags&1024)for(l=l.child;l!==null;){var u=l;vS(u),u.tag===5&&u.flags&1024&&u.stateNode.reset(),l=l.sibling}}function Wo(l,u){if(u.subtreeFlags&8772)for(u=u.child;u!==null;)hS(l,u.alternate,u),u=u.sibling}function yc(l){for(l=l.child;l!==null;){var u=l;switch(u.tag){case 0:case 11:case 14:case 15:Go(4,u,u.return),yc(u);break;case 1:us(u,u.return);var h=u.stateNode;typeof h.componentWillUnmount=="function"&&lS(u,u.return,h),yc(u);break;case 27:ch(u.stateNode);case 26:case 5:us(u,u.return),yc(u);break;case 22:u.memoizedState===null&&yc(u);break;case 30:yc(u);break;default:yc(u)}l=l.sibling}}function Yo(l,u,h){for(h=h&&(u.subtreeFlags&8772)!==0,u=u.child;u!==null;){var m=u.alternate,b=l,S=u,U=S.flags;switch(S.tag){case 0:case 11:case 15:Yo(b,S,h),Jf(4,S);break;case 1:if(Yo(b,S,h),m=S,b=m.stateNode,typeof b.componentDidMount=="function")try{b.componentDidMount()}catch(le){xn(m,m.return,le)}if(m=S,b=m.updateQueue,b!==null){var z=m.stateNode;try{var K=b.shared.hiddenCallbacks;if(K!==null)for(b.shared.hiddenCallbacks=null,b=0;b<K.length;b++)YA(K[b],z)}catch(le){xn(m,m.return,le)}}h&&U&64&&oS(S),eh(S,S.return);break;case 27:dS(S);case 26:case 5:Yo(b,S,h),h&&m===null&&U&4&&cS(S),eh(S,S.return);break;case 12:Yo(b,S,h);break;case 13:Yo(b,S,h),h&&U&4&&mS(b,S);break;case 22:S.memoizedState===null&&Yo(b,S,h),eh(S,S.return);break;case 30:break;default:Yo(b,S,h)}u=u.sibling}}function Fv(l,u){var h=null;l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(h=l.memoizedState.cachePool.pool),l=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(l=u.memoizedState.cachePool.pool),l!==h&&(l!=null&&l.refCount++,h!=null&&Vf(h))}function Vv(l,u){l=null,u.alternate!==null&&(l=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==l&&(u.refCount++,l!=null&&Vf(l))}function ds(l,u,h,m){if(u.subtreeFlags&10256)for(u=u.child;u!==null;)xS(l,u,h,m),u=u.sibling}function xS(l,u,h,m){var b=u.flags;switch(u.tag){case 0:case 11:case 15:ds(l,u,h,m),b&2048&&Jf(9,u);break;case 1:ds(l,u,h,m);break;case 3:ds(l,u,h,m),b&2048&&(l=null,u.alternate!==null&&(l=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==l&&(u.refCount++,l!=null&&Vf(l)));break;case 12:if(b&2048){ds(l,u,h,m),l=u.stateNode;try{var S=u.memoizedProps,U=S.id,z=S.onPostCommit;typeof z=="function"&&z(U,u.alternate===null?"mount":"update",l.passiveEffectDuration,-0)}catch(K){xn(u,u.return,K)}}else ds(l,u,h,m);break;case 13:ds(l,u,h,m);break;case 23:break;case 22:S=u.stateNode,U=u.alternate,u.memoizedState!==null?S._visibility&2?ds(l,u,h,m):th(l,u):S._visibility&2?ds(l,u,h,m):(S._visibility|=2,Uu(l,u,h,m,(u.subtreeFlags&10256)!==0)),b&2048&&Fv(U,u);break;case 24:ds(l,u,h,m),b&2048&&Vv(u.alternate,u);break;default:ds(l,u,h,m)}}function Uu(l,u,h,m,b){for(b=b&&(u.subtreeFlags&10256)!==0,u=u.child;u!==null;){var S=l,U=u,z=h,K=m,le=U.flags;switch(U.tag){case 0:case 11:case 15:Uu(S,U,z,K,b),Jf(8,U);break;case 23:break;case 22:var Ee=U.stateNode;U.memoizedState!==null?Ee._visibility&2?Uu(S,U,z,K,b):th(S,U):(Ee._visibility|=2,Uu(S,U,z,K,b)),b&&le&2048&&Fv(U.alternate,U);break;case 24:Uu(S,U,z,K,b),b&&le&2048&&Vv(U.alternate,U);break;default:Uu(S,U,z,K,b)}u=u.sibling}}function th(l,u){if(u.subtreeFlags&10256)for(u=u.child;u!==null;){var h=l,m=u,b=m.flags;switch(m.tag){case 22:th(h,m),b&2048&&Fv(m.alternate,m);break;case 24:th(h,m),b&2048&&Vv(m.alternate,m);break;default:th(h,m)}u=u.sibling}}var nh=8192;function Hu(l){if(l.subtreeFlags&nh)for(l=l.child;l!==null;)wS(l),l=l.sibling}function wS(l){switch(l.tag){case 26:Hu(l),l.flags&nh&&l.memoizedState!==null&&nN(Ra,l.memoizedState,l.memoizedProps);break;case 5:Hu(l);break;case 3:case 4:var u=Ra;Ra=pg(l.stateNode.containerInfo),Hu(l),Ra=u;break;case 22:l.memoizedState===null&&(u=l.alternate,u!==null&&u.memoizedState!==null?(u=nh,nh=16777216,Hu(l),nh=u):Hu(l));break;default:Hu(l)}}function _S(l){var u=l.alternate;if(u!==null&&(l=u.child,l!==null)){u.child=null;do u=l.sibling,l.sibling=null,l=u;while(l!==null)}}function rh(l){var u=l.deletions;if((l.flags&16)!==0){if(u!==null)for(var h=0;h<u.length;h++){var m=u[h];kr=m,AS(m,l)}_S(l)}if(l.subtreeFlags&10256)for(l=l.child;l!==null;)bS(l),l=l.sibling}function bS(l){switch(l.tag){case 0:case 11:case 15:rh(l),l.flags&2048&&Go(9,l,l.return);break;case 3:rh(l);break;case 12:rh(l);break;case 22:var u=l.stateNode;l.memoizedState!==null&&u._visibility&2&&(l.return===null||l.return.tag!==13)?(u._visibility&=-3,ng(l)):rh(l);break;default:rh(l)}}function ng(l){var u=l.deletions;if((l.flags&16)!==0){if(u!==null)for(var h=0;h<u.length;h++){var m=u[h];kr=m,AS(m,l)}_S(l)}for(l=l.child;l!==null;){switch(u=l,u.tag){case 0:case 11:case 15:Go(8,u,u.return),ng(u);break;case 22:h=u.stateNode,h._visibility&2&&(h._visibility&=-3,ng(u));break;default:ng(u)}l=l.sibling}}function AS(l,u){for(;kr!==null;){var h=kr;switch(h.tag){case 0:case 11:case 15:Go(8,h,u);break;case 23:case 22:if(h.memoizedState!==null&&h.memoizedState.cachePool!==null){var m=h.memoizedState.cachePool.pool;m!=null&&m.refCount++}break;case 24:Vf(h.memoizedState.cache)}if(m=h.child,m!==null)m.return=h,kr=m;else e:for(h=l;kr!==null;){m=kr;var b=m.sibling,S=m.return;if(pS(m),m===h){kr=null;break e}if(b!==null){b.return=S,kr=b;break e}kr=S}}}var v8={getCacheForType:function(l){var u=ii(xr),h=u.data.get(l);return h===void 0&&(h=l(),u.data.set(l,h)),h}},x8=typeof WeakMap=="function"?WeakMap:Map,rn=0,En=null,It=null,Bt=0,an=0,Gi=null,qo=!1,zu=!1,jv=!1,io=0,$n=0,Xo=0,vc=0,Uv=0,da=0,$u=0,ih=null,Mi=null,Hv=!1,zv=0,rg=1/0,ig=null,Ko=null,qr=0,Qo=null,Gu=null,Wu=0,$v=0,Gv=null,ES=null,ah=0,Wv=null;function Wi(){if((rn&2)!==0&&Bt!==0)return Bt&-Bt;if(W.T!==null){var l=Pu;return l!==0?l:Jv()}return ar()}function SS(){da===0&&(da=(Bt&536870912)===0||qt?qn():536870912);var l=ua.current;return l!==null&&(l.flags|=32),da}function Yi(l,u,h){(l===En&&(an===2||an===9)||l.cancelPendingCommit!==null)&&(Yu(l,0),Zo(l,Bt,da,!1)),ir(l,h),((rn&2)===0||l!==En)&&(l===En&&((rn&2)===0&&(vc|=h),$n===4&&Zo(l,Bt,da,!1)),fs(l))}function TS(l,u,h){if((rn&6)!==0)throw Error(r(327));var m=!h&&(u&124)===0&&(u&l.expiredLanes)===0||gt(l,u),b=m?b8(l,u):Xv(l,u,!0),S=m;do{if(b===0){zu&&!m&&Zo(l,u,0,!1);break}else{if(h=l.current.alternate,S&&!w8(h)){b=Xv(l,u,!1),S=!1;continue}if(b===2){if(S=u,l.errorRecoveryDisabledLanes&S)var U=0;else U=l.pendingLanes&-536870913,U=U!==0?U:U&536870912?536870912:0;if(U!==0){u=U;e:{var z=l;b=ih;var K=z.current.memoizedState.isDehydrated;if(K&&(Yu(z,U).flags|=256),U=Xv(z,U,!1),U!==2){if(jv&&!K){z.errorRecoveryDisabledLanes|=S,vc|=S,b=4;break e}S=Mi,Mi=b,S!==null&&(Mi===null?Mi=S:Mi.push.apply(Mi,S))}b=U}if(S=!1,b!==2)continue}}if(b===1){Yu(l,0),Zo(l,u,0,!0);break}e:{switch(m=l,S=b,S){case 0:case 1:throw Error(r(345));case 4:if((u&4194048)!==u)break;case 6:Zo(m,u,da,!qo);break e;case 2:Mi=null;break;case 3:case 5:break;default:throw Error(r(329))}if((u&62914560)===u&&(b=zv+300-Re(),10<b)){if(Zo(m,u,da,!qo),zr(m,0,!0)!==0)break e;m.timeoutHandle=tT(CS.bind(null,m,h,Mi,ig,Hv,u,da,vc,$u,qo,S,2,-0,0),b);break e}CS(m,h,Mi,ig,Hv,u,da,vc,$u,qo,S,0,-0,0)}}break}while(!0);fs(l)}function CS(l,u,h,m,b,S,U,z,K,le,Ee,Ie,ue,fe){if(l.timeoutHandle=-1,Ie=u.subtreeFlags,(Ie&8192||(Ie&16785408)===16785408)&&(fh={stylesheets:null,count:0,unsuspend:tN},wS(u),Ie=rN(),Ie!==null)){l.cancelPendingCommit=Ie(kS.bind(null,l,u,S,h,m,b,U,z,K,Ee,1,ue,fe)),Zo(l,S,U,!le);return}kS(l,u,S,h,m,b,U,z,K)}function w8(l){for(var u=l;;){var h=u.tag;if((h===0||h===11||h===15)&&u.flags&16384&&(h=u.updateQueue,h!==null&&(h=h.stores,h!==null)))for(var m=0;m<h.length;m++){var b=h[m],S=b.getSnapshot;b=b.value;try{if(!Ui(S(),b))return!1}catch{return!1}}if(h=u.child,u.subtreeFlags&16384&&h!==null)h.return=u,u=h;else{if(u===l)break;for(;u.sibling===null;){if(u.return===null||u.return===l)return!0;u=u.return}u.sibling.return=u.return,u=u.sibling}}return!0}function Zo(l,u,h,m){u&=~Uv,u&=~vc,l.suspendedLanes|=u,l.pingedLanes&=~u,m&&(l.warmLanes|=u),m=l.expirationTimes;for(var b=u;0<b;){var S=31-Qe(b),U=1<<S;m[S]=-1,b&=~U}h!==0&&ea(l,h,u)}function ag(){return(rn&6)===0?(sh(0),!1):!0}function Yv(){if(It!==null){if(an===0)var l=It.return;else l=It,Ks=fc=null,uv(l),Vu=null,Kf=0,l=It;for(;l!==null;)sS(l.alternate,l),l=l.return;It=null}}function Yu(l,u){var h=l.timeoutHandle;h!==-1&&(l.timeoutHandle=-1,F8(h)),h=l.cancelPendingCommit,h!==null&&(l.cancelPendingCommit=null,h()),Yv(),En=l,It=h=Ys(l.current,null),Bt=u,an=0,Gi=null,qo=!1,zu=gt(l,u),jv=!1,$u=da=Uv=vc=Xo=$n=0,Mi=ih=null,Hv=!1,(u&8)!==0&&(u|=u&32);var m=l.entangledLanes;if(m!==0)for(l=l.entanglements,m&=u;0<m;){var b=31-Qe(m),S=1<<b;u|=l[b],m&=~S}return io=u,Cp(),h}function IS(l,u){bt=null,W.H=Wp,u===Uf||u===Lp?(u=GA(),an=3):u===HA?(u=GA(),an=4):an=u===WE?8:u!==null&&typeof u=="object"&&typeof u.then=="function"?6:1,Gi=u,It===null&&($n=1,Qp(l,sa(u,l.current)))}function DS(){var l=W.H;return W.H=Wp,l===null?Wp:l}function RS(){var l=W.A;return W.A=v8,l}function qv(){$n=4,qo||(Bt&4194048)!==Bt&&ua.current!==null||(zu=!0),(Xo&134217727)===0&&(vc&134217727)===0||En===null||Zo(En,Bt,da,!1)}function Xv(l,u,h){var m=rn;rn|=2;var b=DS(),S=RS();(En!==l||Bt!==u)&&(ig=null,Yu(l,u)),u=!1;var U=$n;e:do try{if(an!==0&&It!==null){var z=It,K=Gi;switch(an){case 8:Yv(),U=6;break e;case 3:case 2:case 9:case 6:ua.current===null&&(u=!0);var le=an;if(an=0,Gi=null,qu(l,z,K,le),h&&zu){U=0;break e}break;default:le=an,an=0,Gi=null,qu(l,z,K,le)}}_8(),U=$n;break}catch(Ee){IS(l,Ee)}while(!0);return u&&l.shellSuspendCounter++,Ks=fc=null,rn=m,W.H=b,W.A=S,It===null&&(En=null,Bt=0,Cp()),U}function _8(){for(;It!==null;)OS(It)}function b8(l,u){var h=rn;rn|=2;var m=DS(),b=RS();En!==l||Bt!==u?(ig=null,rg=Re()+500,Yu(l,u)):zu=gt(l,u);e:do try{if(an!==0&&It!==null){u=It;var S=Gi;t:switch(an){case 1:an=0,Gi=null,qu(l,u,S,1);break;case 2:case 9:if(zA(S)){an=0,Gi=null,MS(u);break}u=function(){an!==2&&an!==9||En!==l||(an=7),fs(l)},S.then(u,u);break e;case 3:an=7;break e;case 4:an=5;break e;case 7:zA(S)?(an=0,Gi=null,MS(u)):(an=0,Gi=null,qu(l,u,S,7));break;case 5:var U=null;switch(It.tag){case 26:U=It.memoizedState;case 5:case 27:var z=It;if(!U||hT(U)){an=0,Gi=null;var K=z.sibling;if(K!==null)It=K;else{var le=z.return;le!==null?(It=le,sg(le)):It=null}break t}}an=0,Gi=null,qu(l,u,S,5);break;case 6:an=0,Gi=null,qu(l,u,S,6);break;case 8:Yv(),$n=6;break e;default:throw Error(r(462))}}A8();break}catch(Ee){IS(l,Ee)}while(!0);return Ks=fc=null,W.H=m,W.A=b,rn=h,It!==null?0:(En=null,Bt=0,Cp(),$n)}function A8(){for(;It!==null&&!ze();)OS(It)}function OS(l){var u=iS(l.alternate,l,io);l.memoizedProps=l.pendingProps,u===null?sg(l):It=u}function MS(l){var u=l,h=u.alternate;switch(u.tag){case 15:case 0:u=ZE(h,u,u.pendingProps,u.type,void 0,Bt);break;case 11:u=ZE(h,u,u.pendingProps,u.type.render,u.ref,Bt);break;case 5:uv(u);default:sS(h,u),u=It=PA(u,io),u=iS(h,u,io)}l.memoizedProps=l.pendingProps,u===null?sg(l):It=u}function qu(l,u,h,m){Ks=fc=null,uv(u),Vu=null,Kf=0;var b=u.return;try{if(f8(l,b,u,h,Bt)){$n=1,Qp(l,sa(h,l.current)),It=null;return}}catch(S){if(b!==null)throw It=b,S;$n=1,Qp(l,sa(h,l.current)),It=null;return}u.flags&32768?(qt||m===1?l=!0:zu||(Bt&536870912)!==0?l=!1:(qo=l=!0,(m===2||m===9||m===3||m===6)&&(m=ua.current,m!==null&&m.tag===13&&(m.flags|=16384))),PS(u,l)):sg(u)}function sg(l){var u=l;do{if((u.flags&32768)!==0){PS(u,qo);return}l=u.return;var h=p8(u.alternate,u,io);if(h!==null){It=h;return}if(u=u.sibling,u!==null){It=u;return}It=u=l}while(u!==null);$n===0&&($n=5)}function PS(l,u){do{var h=g8(l.alternate,l);if(h!==null){h.flags&=32767,It=h;return}if(h=l.return,h!==null&&(h.flags|=32768,h.subtreeFlags=0,h.deletions=null),!u&&(l=l.sibling,l!==null)){It=l;return}It=l=h}while(l!==null);$n=6,It=null}function kS(l,u,h,m,b,S,U,z,K){l.cancelPendingCommit=null;do og();while(qr!==0);if((rn&6)!==0)throw Error(r(327));if(u!==null){if(u===l.current)throw Error(r(177));if(S=u.lanes|u.childLanes,S|=Vy,zl(l,h,S,U,z,K),l===En&&(It=En=null,Bt=0),Gu=u,Qo=l,Wu=h,$v=S,Gv=b,ES=m,(u.subtreeFlags&10256)!==0||(u.flags&10256)!==0?(l.callbackNode=null,l.callbackPriority=0,C8(Ne,function(){return VS(),null})):(l.callbackNode=null,l.callbackPriority=0),m=(u.flags&13878)!==0,(u.subtreeFlags&13878)!==0||m){m=W.T,W.T=null,b=G.p,G.p=2,U=rn,rn|=4;try{m8(l,u,h)}finally{rn=U,G.p=b,W.T=m}}qr=1,NS(),LS(),BS()}}function NS(){if(qr===1){qr=0;var l=Qo,u=Gu,h=(u.flags&13878)!==0;if((u.subtreeFlags&13878)!==0||h){h=W.T,W.T=null;var m=G.p;G.p=2;var b=rn;rn|=4;try{yS(u,l);var S=ox,U=AA(l.containerInfo),z=S.focusedElem,K=S.selectionRange;if(U!==z&&z&&z.ownerDocument&&bA(z.ownerDocument.documentElement,z)){if(K!==null&&ky(z)){var le=K.start,Ee=K.end;if(Ee===void 0&&(Ee=le),"selectionStart"in z)z.selectionStart=le,z.selectionEnd=Math.min(Ee,z.value.length);else{var Ie=z.ownerDocument||document,ue=Ie&&Ie.defaultView||window;if(ue.getSelection){var fe=ue.getSelection(),ct=z.textContent.length,at=Math.min(K.start,ct),fn=K.end===void 0?at:Math.min(K.end,ct);!fe.extend&&at>fn&&(U=fn,fn=at,at=U);var ne=_A(z,at),J=_A(z,fn);if(ne&&J&&(fe.rangeCount!==1||fe.anchorNode!==ne.node||fe.anchorOffset!==ne.offset||fe.focusNode!==J.node||fe.focusOffset!==J.offset)){var oe=Ie.createRange();oe.setStart(ne.node,ne.offset),fe.removeAllRanges(),at>fn?(fe.addRange(oe),fe.extend(J.node,J.offset)):(oe.setEnd(J.node,J.offset),fe.addRange(oe))}}}}for(Ie=[],fe=z;fe=fe.parentNode;)fe.nodeType===1&&Ie.push({element:fe,left:fe.scrollLeft,top:fe.scrollTop});for(typeof z.focus=="function"&&z.focus(),z=0;z<Ie.length;z++){var Ce=Ie[z];Ce.element.scrollLeft=Ce.left,Ce.element.scrollTop=Ce.top}}xg=!!sx,ox=sx=null}finally{rn=b,G.p=m,W.T=h}}l.current=u,qr=2}}function LS(){if(qr===2){qr=0;var l=Qo,u=Gu,h=(u.flags&8772)!==0;if((u.subtreeFlags&8772)!==0||h){h=W.T,W.T=null;var m=G.p;G.p=2;var b=rn;rn|=4;try{hS(l,u.alternate,u)}finally{rn=b,G.p=m,W.T=h}}qr=3}}function BS(){if(qr===4||qr===3){qr=0,Me();var l=Qo,u=Gu,h=Wu,m=ES;(u.subtreeFlags&10256)!==0||(u.flags&10256)!==0?qr=5:(qr=0,Gu=Qo=null,FS(l,l.pendingLanes));var b=l.pendingLanes;if(b===0&&(Ko=null),vn(h),u=u.stateNode,it&&typeof it.onCommitFiberRoot=="function")try{it.onCommitFiberRoot(nt,u,void 0,(u.current.flags&128)===128)}catch{}if(m!==null){u=W.T,b=G.p,G.p=2,W.T=null;try{for(var S=l.onRecoverableError,U=0;U<m.length;U++){var z=m[U];S(z.value,{componentStack:z.stack})}}finally{W.T=u,G.p=b}}(Wu&3)!==0&&og(),fs(l),b=l.pendingLanes,(h&4194090)!==0&&(b&42)!==0?l===Wv?ah++:(ah=0,Wv=l):ah=0,sh(0)}}function FS(l,u){(l.pooledCacheLanes&=u)===0&&(u=l.pooledCache,u!=null&&(l.pooledCache=null,Vf(u)))}function og(l){return NS(),LS(),BS(),VS()}function VS(){if(qr!==5)return!1;var l=Qo,u=$v;$v=0;var h=vn(Wu),m=W.T,b=G.p;try{G.p=32>h?32:h,W.T=null,h=Gv,Gv=null;var S=Qo,U=Wu;if(qr=0,Gu=Qo=null,Wu=0,(rn&6)!==0)throw Error(r(331));var z=rn;if(rn|=4,bS(S.current),xS(S,S.current,U,h),rn=z,sh(0,!1),it&&typeof it.onPostCommitFiberRoot=="function")try{it.onPostCommitFiberRoot(nt,S)}catch{}return!0}finally{G.p=b,W.T=m,FS(l,u)}}function jS(l,u,h){u=sa(h,u),u=Ev(l.stateNode,u,2),l=Uo(l,u,2),l!==null&&(ir(l,2),fs(l))}function xn(l,u,h){if(l.tag===3)jS(l,l,h);else for(;u!==null;){if(u.tag===3){jS(u,l,h);break}else if(u.tag===1){var m=u.stateNode;if(typeof u.type.getDerivedStateFromError=="function"||typeof m.componentDidCatch=="function"&&(Ko===null||!Ko.has(m))){l=sa(h,l),h=$E(2),m=Uo(u,h,2),m!==null&&(GE(h,m,u,l),ir(m,2),fs(m));break}}u=u.return}}function Kv(l,u,h){var m=l.pingCache;if(m===null){m=l.pingCache=new x8;var b=new Set;m.set(u,b)}else b=m.get(u),b===void 0&&(b=new Set,m.set(u,b));b.has(h)||(jv=!0,b.add(h),l=E8.bind(null,l,u,h),u.then(l,l))}function E8(l,u,h){var m=l.pingCache;m!==null&&m.delete(u),l.pingedLanes|=l.suspendedLanes&h,l.warmLanes&=~h,En===l&&(Bt&h)===h&&($n===4||$n===3&&(Bt&62914560)===Bt&&300>Re()-zv?(rn&2)===0&&Yu(l,0):Uv|=h,$u===Bt&&($u=0)),fs(l)}function US(l,u){u===0&&(u=$r()),l=Du(l,u),l!==null&&(ir(l,u),fs(l))}function S8(l){var u=l.memoizedState,h=0;u!==null&&(h=u.retryLane),US(l,h)}function T8(l,u){var h=0;switch(l.tag){case 13:var m=l.stateNode,b=l.memoizedState;b!==null&&(h=b.retryLane);break;case 19:m=l.stateNode;break;case 22:m=l.stateNode._retryCache;break;default:throw Error(r(314))}m!==null&&m.delete(u),US(l,h)}function C8(l,u){return Ve(l,u)}var lg=null,Xu=null,Qv=!1,cg=!1,Zv=!1,xc=0;function fs(l){l!==Xu&&l.next===null&&(Xu===null?lg=Xu=l:Xu=Xu.next=l),cg=!0,Qv||(Qv=!0,D8())}function sh(l,u){if(!Zv&&cg){Zv=!0;do for(var h=!1,m=lg;m!==null;){if(l!==0){var b=m.pendingLanes;if(b===0)var S=0;else{var U=m.suspendedLanes,z=m.pingedLanes;S=(1<<31-Qe(42|l)+1)-1,S&=b&~(U&~z),S=S&201326741?S&201326741|1:S?S|2:0}S!==0&&(h=!0,GS(m,S))}else S=Bt,S=zr(m,m===En?S:0,m.cancelPendingCommit!==null||m.timeoutHandle!==-1),(S&3)===0||gt(m,S)||(h=!0,GS(m,S));m=m.next}while(h);Zv=!1}}function I8(){HS()}function HS(){cg=Qv=!1;var l=0;xc!==0&&(B8()&&(l=xc),xc=0);for(var u=Re(),h=null,m=lg;m!==null;){var b=m.next,S=zS(m,u);S===0?(m.next=null,h===null?lg=b:h.next=b,b===null&&(Xu=h)):(h=m,(l!==0||(S&3)!==0)&&(cg=!0)),m=b}sh(l)}function zS(l,u){for(var h=l.suspendedLanes,m=l.pingedLanes,b=l.expirationTimes,S=l.pendingLanes&-62914561;0<S;){var U=31-Qe(S),z=1<<U,K=b[U];K===-1?((z&h)===0||(z&m)!==0)&&(b[U]=Fn(z,u)):K<=u&&(l.expiredLanes|=z),S&=~z}if(u=En,h=Bt,h=zr(l,l===u?h:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),m=l.callbackNode,h===0||l===u&&(an===2||an===9)||l.cancelPendingCommit!==null)return m!==null&&m!==null&&we(m),l.callbackNode=null,l.callbackPriority=0;if((h&3)===0||gt(l,h)){if(u=h&-h,u===l.callbackPriority)return u;switch(m!==null&&we(m),vn(h)){case 2:case 8:h=Oe;break;case 32:h=Ne;break;case 268435456:h=_t;break;default:h=Ne}return m=$S.bind(null,l),h=Ve(h,m),l.callbackPriority=u,l.callbackNode=h,u}return m!==null&&m!==null&&we(m),l.callbackPriority=2,l.callbackNode=null,2}function $S(l,u){if(qr!==0&&qr!==5)return l.callbackNode=null,l.callbackPriority=0,null;var h=l.callbackNode;if(og()&&l.callbackNode!==h)return null;var m=Bt;return m=zr(l,l===En?m:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),m===0?null:(TS(l,m,u),zS(l,Re()),l.callbackNode!=null&&l.callbackNode===h?$S.bind(null,l):null)}function GS(l,u){if(og())return null;TS(l,u,!0)}function D8(){V8(function(){(rn&6)!==0?Ve(Ge,I8):HS()})}function Jv(){return xc===0&&(xc=qn()),xc}function WS(l){return l==null||typeof l=="symbol"||typeof l=="boolean"?null:typeof l=="function"?l:yu(""+l)}function YS(l,u){var h=u.ownerDocument.createElement("input");return h.name=u.name,h.value=u.value,l.id&&h.setAttribute("form",l.id),u.parentNode.insertBefore(h,u),l=new FormData(l),h.parentNode.removeChild(h),l}function R8(l,u,h,m,b){if(u==="submit"&&h&&h.stateNode===b){var S=WS((b[sr]||null).action),U=m.submitter;U&&(u=(u=U[sr]||null)?WS(u.formAction):U.getAttribute("formAction"),u!==null&&(S=u,U=null));var z=new vu("action","action",null,m,b);l.push({event:z,listeners:[{instance:null,listener:function(){if(m.defaultPrevented){if(xc!==0){var K=U?YS(b,U):new FormData(b);xv(h,{pending:!0,data:K,method:b.method,action:S},null,K)}}else typeof S=="function"&&(z.preventDefault(),K=U?YS(b,U):new FormData(b),xv(h,{pending:!0,data:K,method:b.method,action:S},S,K))},currentTarget:b}]})}}for(var ex=0;ex<Fy.length;ex++){var tx=Fy[ex],O8=tx.toLowerCase(),M8=tx[0].toUpperCase()+tx.slice(1);Da(O8,"on"+M8)}Da(TA,"onAnimationEnd"),Da(CA,"onAnimationIteration"),Da(IA,"onAnimationStart"),Da("dblclick","onDoubleClick"),Da("focusin","onFocus"),Da("focusout","onBlur"),Da(X6,"onTransitionRun"),Da(K6,"onTransitionStart"),Da(Q6,"onTransitionCancel"),Da(DA,"onTransitionEnd"),Fs("onMouseEnter",["mouseout","mouseover"]),Fs("onMouseLeave",["mouseout","mouseover"]),Fs("onPointerEnter",["pointerout","pointerover"]),Fs("onPointerLeave",["pointerout","pointerover"]),Ca("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ca("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ca("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ca("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ca("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ca("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var oh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),P8=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(oh));function qS(l,u){u=(u&4)!==0;for(var h=0;h<l.length;h++){var m=l[h],b=m.event;m=m.listeners;e:{var S=void 0;if(u)for(var U=m.length-1;0<=U;U--){var z=m[U],K=z.instance,le=z.currentTarget;if(z=z.listener,K!==S&&b.isPropagationStopped())break e;S=z,b.currentTarget=le;try{S(b)}catch(Ee){Kp(Ee)}b.currentTarget=null,S=K}else for(U=0;U<m.length;U++){if(z=m[U],K=z.instance,le=z.currentTarget,z=z.listener,K!==S&&b.isPropagationStopped())break e;S=z,b.currentTarget=le;try{S(b)}catch(Ee){Kp(Ee)}b.currentTarget=null,S=K}}}}function Dt(l,u){var h=u[vf];h===void 0&&(h=u[vf]=new Set);var m=l+"__bubble";h.has(m)||(XS(u,l,2,!1),h.add(m))}function nx(l,u,h){var m=0;u&&(m|=4),XS(h,l,m,u)}var ug="_reactListening"+Math.random().toString(36).slice(2);function rx(l){if(!l[ug]){l[ug]=!0,xf.forEach(function(h){h!=="selectionchange"&&(P8.has(h)||nx(h,!1,l),nx(h,!0,l))});var u=l.nodeType===9?l:l.ownerDocument;u===null||u[ug]||(u[ug]=!0,nx("selectionchange",!1,u))}}function XS(l,u,h,m){switch(xT(u)){case 2:var b=sN;break;case 8:b=oN;break;default:b=yx}h=b.bind(null,u,h,l),b=void 0,!ia||u!=="touchstart"&&u!=="touchmove"&&u!=="wheel"||(b=!0),m?b!==void 0?l.addEventListener(u,h,{capture:!0,passive:b}):l.addEventListener(u,h,!0):b!==void 0?l.addEventListener(u,h,{passive:b}):l.addEventListener(u,h,!1)}function ix(l,u,h,m,b){var S=m;if((u&1)===0&&(u&2)===0&&m!==null)e:for(;;){if(m===null)return;var U=m.tag;if(U===3||U===4){var z=m.stateNode.containerInfo;if(z===b)break;if(U===4)for(U=m.return;U!==null;){var K=U.tag;if((K===3||K===4)&&U.stateNode.containerInfo===b)return;U=U.return}for(;z!==null;){if(U=Bs(z),U===null)return;if(K=U.tag,K===5||K===6||K===26||K===27){m=S=U;continue e}z=z.parentNode}}m=m.return}fp(function(){var le=S,Ee=ra(h),Ie=[];e:{var ue=RA.get(l);if(ue!==void 0){var fe=vu,ct=l;switch(l){case"keypress":if(rs(h)===0)break e;case"keydown":case"keyup":fe=Eu;break;case"focusin":ct="focus",fe=_u;break;case"focusout":ct="blur",fe=_u;break;case"beforeblur":case"afterblur":fe=_u;break;case"click":if(h.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":fe=aa;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":fe=Ry;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":fe=wp;break;case TA:case CA:case IA:fe=bu;break;case DA:fe=bp;break;case"scroll":case"scrollend":fe=hp;break;case"wheel":fe=Su;break;case"copy":case"cut":case"paste":fe=Au;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":fe=Of;break;case"toggle":case"beforetoggle":fe=Ep}var at=(u&4)!==0,fn=!at&&(l==="scroll"||l==="scrollend"),ne=at?ue!==null?ue+"Capture":null:ue;at=[];for(var J=le,oe;J!==null;){var Ce=J;if(oe=Ce.stateNode,Ce=Ce.tag,Ce!==5&&Ce!==26&&Ce!==27||oe===null||ne===null||(Ce=Zl(J,ne),Ce!=null&&at.push(lh(J,Ce,oe))),fn)break;J=J.return}0<at.length&&(ue=new fe(ue,ct,null,h,Ee),Ie.push({event:ue,listeners:at}))}}if((u&7)===0){e:{if(ue=l==="mouseover"||l==="pointerover",fe=l==="mouseout"||l==="pointerout",ue&&h!==Us&&(ct=h.relatedTarget||h.fromElement)&&(Bs(ct)||ct[ta]))break e;if((fe||ue)&&(ue=Ee.window===Ee?Ee:(ue=Ee.ownerDocument)?ue.defaultView||ue.parentWindow:window,fe?(ct=h.relatedTarget||h.toElement,fe=le,ct=ct?Bs(ct):null,ct!==null&&(fn=a(ct),at=ct.tag,ct!==fn||at!==5&&at!==27&&at!==6)&&(ct=null)):(fe=null,ct=le),fe!==ct)){if(at=aa,Ce="onMouseLeave",ne="onMouseEnter",J="mouse",(l==="pointerout"||l==="pointerover")&&(at=Of,Ce="onPointerLeave",ne="onPointerEnter",J="pointer"),fn=fe==null?ue:Ja(fe),oe=ct==null?ue:Ja(ct),ue=new at(Ce,J+"leave",fe,h,Ee),ue.target=fn,ue.relatedTarget=oe,Ce=null,Bs(Ee)===le&&(at=new at(ne,J+"enter",ct,h,Ee),at.target=oe,at.relatedTarget=fn,Ce=at),fn=Ce,fe&&ct)t:{for(at=fe,ne=ct,J=0,oe=at;oe;oe=Ku(oe))J++;for(oe=0,Ce=ne;Ce;Ce=Ku(Ce))oe++;for(;0<J-oe;)at=Ku(at),J--;for(;0<oe-J;)ne=Ku(ne),oe--;for(;J--;){if(at===ne||ne!==null&&at===ne.alternate)break t;at=Ku(at),ne=Ku(ne)}at=null}else at=null;fe!==null&&KS(Ie,ue,fe,at,!1),ct!==null&&fn!==null&&KS(Ie,fn,ct,at,!0)}}e:{if(ue=le?Ja(le):window,fe=ue.nodeName&&ue.nodeName.toLowerCase(),fe==="select"||fe==="input"&&ue.type==="file")var qe=gA;else if(vr(ue))if(mA)qe=W6;else{qe=$6;var Tt=z6}else fe=ue.nodeName,!fe||fe.toLowerCase()!=="input"||ue.type!=="checkbox"&&ue.type!=="radio"?le&&Ef(le.elementType)&&(qe=gA):qe=G6;if(qe&&(qe=qe(l,le))){Ws(Ie,qe,h,Ee);break e}Tt&&Tt(l,ue,le),l==="focusout"&&le&&ue.type==="number"&&le.memoizedProps.value!=null&&Lo(ue,"number",ue.value)}switch(Tt=le?Ja(le):window,l){case"focusin":(vr(Tt)||Tt.contentEditable==="true")&&(Tu=Tt,Ny=le,kf=null);break;case"focusout":kf=Ny=Tu=null;break;case"mousedown":Ly=!0;break;case"contextmenu":case"mouseup":case"dragend":Ly=!1,EA(Ie,h,Ee);break;case"selectionchange":if(q6)break;case"keydown":case"keyup":EA(Ie,h,Ee)}var Ze;if(ss)e:{switch(l){case"compositionstart":var st="onCompositionStart";break e;case"compositionend":st="onCompositionEnd";break e;case"compositionupdate":st="onCompositionUpdate";break e}st=void 0}else Nt?me(l,h)&&(st="onCompositionEnd"):l==="keydown"&&h.keyCode===229&&(st="onCompositionStart");st&&(j&&h.locale!=="ko"&&(Nt||st!=="onCompositionStart"?st==="onCompositionEnd"&&Nt&&(Ze=Tf()):(ns=Ee,Bo="value"in ns?ns.value:ns.textContent,Nt=!0)),Tt=dg(le,st),0<Tt.length&&(st=new Df(st,l,null,h,Ee),Ie.push({event:st,listeners:Tt}),Ze?st.data=Ze:(Ze=Le(h),Ze!==null&&(st.data=Ze)))),(Ze=N?yr(l,h):Lt(l,h))&&(st=dg(le,"onBeforeInput"),0<st.length&&(Tt=new Df("onBeforeInput","beforeinput",null,h,Ee),Ie.push({event:Tt,listeners:st}),Tt.data=Ze)),R8(Ie,l,le,h,Ee)}qS(Ie,u)})}function lh(l,u,h){return{instance:l,listener:u,currentTarget:h}}function dg(l,u){for(var h=u+"Capture",m=[];l!==null;){var b=l,S=b.stateNode;if(b=b.tag,b!==5&&b!==26&&b!==27||S===null||(b=Zl(l,h),b!=null&&m.unshift(lh(l,b,S)),b=Zl(l,u),b!=null&&m.push(lh(l,b,S))),l.tag===3)return m;l=l.return}return[]}function Ku(l){if(l===null)return null;do l=l.return;while(l&&l.tag!==5&&l.tag!==27);return l||null}function KS(l,u,h,m,b){for(var S=u._reactName,U=[];h!==null&&h!==m;){var z=h,K=z.alternate,le=z.stateNode;if(z=z.tag,K!==null&&K===m)break;z!==5&&z!==26&&z!==27||le===null||(K=le,b?(le=Zl(h,S),le!=null&&U.unshift(lh(h,le,K))):b||(le=Zl(h,S),le!=null&&U.push(lh(h,le,K)))),h=h.return}U.length!==0&&l.push({event:u,listeners:U})}var k8=/\r\n?/g,N8=/\u0000|\uFFFD/g;function QS(l){return(typeof l=="string"?l:""+l).replace(k8,`
`).replace(N8,"")}function ZS(l,u){return u=QS(u),QS(l)===u}function fg(){}function dn(l,u,h,m,b,S){switch(h){case"children":typeof m=="string"?u==="body"||u==="textarea"&&m===""||na(l,m):(typeof m=="number"||typeof m=="bigint")&&u!=="body"&&na(l,""+m);break;case"className":es(l,"class",m);break;case"tabIndex":es(l,"tabindex",m);break;case"dir":case"role":case"viewBox":case"width":case"height":es(l,h,m);break;case"style":Af(l,m,S);break;case"data":if(u!=="object"){es(l,"data",m);break}case"src":case"href":if(m===""&&(u!=="a"||h!=="href")){l.removeAttribute(h);break}if(m==null||typeof m=="function"||typeof m=="symbol"||typeof m=="boolean"){l.removeAttribute(h);break}m=yu(""+m),l.setAttribute(h,m);break;case"action":case"formAction":if(typeof m=="function"){l.setAttribute(h,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof S=="function"&&(h==="formAction"?(u!=="input"&&dn(l,u,"name",b.name,b,null),dn(l,u,"formEncType",b.formEncType,b,null),dn(l,u,"formMethod",b.formMethod,b,null),dn(l,u,"formTarget",b.formTarget,b,null)):(dn(l,u,"encType",b.encType,b,null),dn(l,u,"method",b.method,b,null),dn(l,u,"target",b.target,b,null)));if(m==null||typeof m=="symbol"||typeof m=="boolean"){l.removeAttribute(h);break}m=yu(""+m),l.setAttribute(h,m);break;case"onClick":m!=null&&(l.onclick=fg);break;case"onScroll":m!=null&&Dt("scroll",l);break;case"onScrollEnd":m!=null&&Dt("scrollend",l);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(r(61));if(h=m.__html,h!=null){if(b.children!=null)throw Error(r(60));l.innerHTML=h}}break;case"multiple":l.multiple=m&&typeof m!="function"&&typeof m!="symbol";break;case"muted":l.muted=m&&typeof m!="function"&&typeof m!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(m==null||typeof m=="function"||typeof m=="boolean"||typeof m=="symbol"){l.removeAttribute("xlink:href");break}h=yu(""+m),l.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",h);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":m!=null&&typeof m!="function"&&typeof m!="symbol"?l.setAttribute(h,""+m):l.removeAttribute(h);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":m&&typeof m!="function"&&typeof m!="symbol"?l.setAttribute(h,""):l.removeAttribute(h);break;case"capture":case"download":m===!0?l.setAttribute(h,""):m!==!1&&m!=null&&typeof m!="function"&&typeof m!="symbol"?l.setAttribute(h,m):l.removeAttribute(h);break;case"cols":case"rows":case"size":case"span":m!=null&&typeof m!="function"&&typeof m!="symbol"&&!isNaN(m)&&1<=m?l.setAttribute(h,m):l.removeAttribute(h);break;case"rowSpan":case"start":m==null||typeof m=="function"||typeof m=="symbol"||isNaN(m)?l.removeAttribute(h):l.setAttribute(h,m);break;case"popover":Dt("beforetoggle",l),Dt("toggle",l),No(l,"popover",m);break;case"xlinkActuate":Gr(l,"http://www.w3.org/1999/xlink","xlink:actuate",m);break;case"xlinkArcrole":Gr(l,"http://www.w3.org/1999/xlink","xlink:arcrole",m);break;case"xlinkRole":Gr(l,"http://www.w3.org/1999/xlink","xlink:role",m);break;case"xlinkShow":Gr(l,"http://www.w3.org/1999/xlink","xlink:show",m);break;case"xlinkTitle":Gr(l,"http://www.w3.org/1999/xlink","xlink:title",m);break;case"xlinkType":Gr(l,"http://www.w3.org/1999/xlink","xlink:type",m);break;case"xmlBase":Gr(l,"http://www.w3.org/XML/1998/namespace","xml:base",m);break;case"xmlLang":Gr(l,"http://www.w3.org/XML/1998/namespace","xml:lang",m);break;case"xmlSpace":Gr(l,"http://www.w3.org/XML/1998/namespace","xml:space",m);break;case"is":No(l,"is",m);break;case"innerText":case"textContent":break;default:(!(2<h.length)||h[0]!=="o"&&h[0]!=="O"||h[1]!=="n"&&h[1]!=="N")&&(h=Iy.get(h)||h,No(l,h,m))}}function ax(l,u,h,m,b,S){switch(h){case"style":Af(l,m,S);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(r(61));if(h=m.__html,h!=null){if(b.children!=null)throw Error(r(60));l.innerHTML=h}}break;case"children":typeof m=="string"?na(l,m):(typeof m=="number"||typeof m=="bigint")&&na(l,""+m);break;case"onScroll":m!=null&&Dt("scroll",l);break;case"onScrollEnd":m!=null&&Dt("scrollend",l);break;case"onClick":m!=null&&(l.onclick=fg);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!fu.hasOwnProperty(h))e:{if(h[0]==="o"&&h[1]==="n"&&(b=h.endsWith("Capture"),u=h.slice(2,b?h.length-7:void 0),S=l[sr]||null,S=S!=null?S[h]:null,typeof S=="function"&&l.removeEventListener(u,S,b),typeof m=="function")){typeof S!="function"&&S!==null&&(h in l?l[h]=null:l.hasAttribute(h)&&l.removeAttribute(h)),l.addEventListener(u,m,b);break e}h in l?l[h]=m:m===!0?l.setAttribute(h,""):No(l,h,m)}}}function Xr(l,u,h){switch(u){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Dt("error",l),Dt("load",l);var m=!1,b=!1,S;for(S in h)if(h.hasOwnProperty(S)){var U=h[S];if(U!=null)switch(S){case"src":m=!0;break;case"srcSet":b=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,u));default:dn(l,u,S,U,h,null)}}b&&dn(l,u,"srcSet",h.srcSet,h,null),m&&dn(l,u,"src",h.src,h,null);return;case"input":Dt("invalid",l);var z=S=U=b=null,K=null,le=null;for(m in h)if(h.hasOwnProperty(m)){var Ee=h[m];if(Ee!=null)switch(m){case"name":b=Ee;break;case"type":U=Ee;break;case"checked":K=Ee;break;case"defaultChecked":le=Ee;break;case"value":S=Ee;break;case"defaultValue":z=Ee;break;case"children":case"dangerouslySetInnerHTML":if(Ee!=null)throw Error(r(137,u));break;default:dn(l,u,m,Ee,h,null)}}Xl(l,S,z,K,le,U,b,!1),mu(l);return;case"select":Dt("invalid",l),m=U=S=null;for(b in h)if(h.hasOwnProperty(b)&&(z=h[b],z!=null))switch(b){case"value":S=z;break;case"defaultValue":U=z;break;case"multiple":m=z;default:dn(l,u,b,z,h,null)}u=S,h=U,l.multiple=!!m,u!=null?js(l,!!m,u,!1):h!=null&&js(l,!!m,h,!0);return;case"textarea":Dt("invalid",l),S=b=m=null;for(U in h)if(h.hasOwnProperty(U)&&(z=h[U],z!=null))switch(U){case"value":m=z;break;case"defaultValue":b=z;break;case"children":S=z;break;case"dangerouslySetInnerHTML":if(z!=null)throw Error(r(91));break;default:dn(l,u,U,z,h,null)}Kl(l,m,b,S),mu(l);return;case"option":for(K in h)if(h.hasOwnProperty(K)&&(m=h[K],m!=null))switch(K){case"selected":l.selected=m&&typeof m!="function"&&typeof m!="symbol";break;default:dn(l,u,K,m,h,null)}return;case"dialog":Dt("beforetoggle",l),Dt("toggle",l),Dt("cancel",l),Dt("close",l);break;case"iframe":case"object":Dt("load",l);break;case"video":case"audio":for(m=0;m<oh.length;m++)Dt(oh[m],l);break;case"image":Dt("error",l),Dt("load",l);break;case"details":Dt("toggle",l);break;case"embed":case"source":case"link":Dt("error",l),Dt("load",l);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(le in h)if(h.hasOwnProperty(le)&&(m=h[le],m!=null))switch(le){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,u));default:dn(l,u,le,m,h,null)}return;default:if(Ef(u)){for(Ee in h)h.hasOwnProperty(Ee)&&(m=h[Ee],m!==void 0&&ax(l,u,Ee,m,h,void 0));return}}for(z in h)h.hasOwnProperty(z)&&(m=h[z],m!=null&&dn(l,u,z,m,h,null))}function L8(l,u,h,m){switch(u){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var b=null,S=null,U=null,z=null,K=null,le=null,Ee=null;for(fe in h){var Ie=h[fe];if(h.hasOwnProperty(fe)&&Ie!=null)switch(fe){case"checked":break;case"value":break;case"defaultValue":K=Ie;default:m.hasOwnProperty(fe)||dn(l,u,fe,null,m,Ie)}}for(var ue in m){var fe=m[ue];if(Ie=h[ue],m.hasOwnProperty(ue)&&(fe!=null||Ie!=null))switch(ue){case"type":S=fe;break;case"name":b=fe;break;case"checked":le=fe;break;case"defaultChecked":Ee=fe;break;case"value":U=fe;break;case"defaultValue":z=fe;break;case"children":case"dangerouslySetInnerHTML":if(fe!=null)throw Error(r(137,u));break;default:fe!==Ie&&dn(l,u,ue,fe,m,Ie)}}ji(l,U,z,K,le,Ee,S,b);return;case"select":fe=U=z=ue=null;for(S in h)if(K=h[S],h.hasOwnProperty(S)&&K!=null)switch(S){case"value":break;case"multiple":fe=K;default:m.hasOwnProperty(S)||dn(l,u,S,null,m,K)}for(b in m)if(S=m[b],K=h[b],m.hasOwnProperty(b)&&(S!=null||K!=null))switch(b){case"value":ue=S;break;case"defaultValue":z=S;break;case"multiple":U=S;default:S!==K&&dn(l,u,b,S,m,K)}u=z,h=U,m=fe,ue!=null?js(l,!!h,ue,!1):!!m!=!!h&&(u!=null?js(l,!!h,u,!0):js(l,!!h,h?[]:"",!1));return;case"textarea":fe=ue=null;for(z in h)if(b=h[z],h.hasOwnProperty(z)&&b!=null&&!m.hasOwnProperty(z))switch(z){case"value":break;case"children":break;default:dn(l,u,z,null,m,b)}for(U in m)if(b=m[U],S=h[U],m.hasOwnProperty(U)&&(b!=null||S!=null))switch(U){case"value":ue=b;break;case"defaultValue":fe=b;break;case"children":break;case"dangerouslySetInnerHTML":if(b!=null)throw Error(r(91));break;default:b!==S&&dn(l,u,U,b,m,S)}cn(l,ue,fe);return;case"option":for(var ct in h)if(ue=h[ct],h.hasOwnProperty(ct)&&ue!=null&&!m.hasOwnProperty(ct))switch(ct){case"selected":l.selected=!1;break;default:dn(l,u,ct,null,m,ue)}for(K in m)if(ue=m[K],fe=h[K],m.hasOwnProperty(K)&&ue!==fe&&(ue!=null||fe!=null))switch(K){case"selected":l.selected=ue&&typeof ue!="function"&&typeof ue!="symbol";break;default:dn(l,u,K,ue,m,fe)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var at in h)ue=h[at],h.hasOwnProperty(at)&&ue!=null&&!m.hasOwnProperty(at)&&dn(l,u,at,null,m,ue);for(le in m)if(ue=m[le],fe=h[le],m.hasOwnProperty(le)&&ue!==fe&&(ue!=null||fe!=null))switch(le){case"children":case"dangerouslySetInnerHTML":if(ue!=null)throw Error(r(137,u));break;default:dn(l,u,le,ue,m,fe)}return;default:if(Ef(u)){for(var fn in h)ue=h[fn],h.hasOwnProperty(fn)&&ue!==void 0&&!m.hasOwnProperty(fn)&&ax(l,u,fn,void 0,m,ue);for(Ee in m)ue=m[Ee],fe=h[Ee],!m.hasOwnProperty(Ee)||ue===fe||ue===void 0&&fe===void 0||ax(l,u,Ee,ue,m,fe);return}}for(var ne in h)ue=h[ne],h.hasOwnProperty(ne)&&ue!=null&&!m.hasOwnProperty(ne)&&dn(l,u,ne,null,m,ue);for(Ie in m)ue=m[Ie],fe=h[Ie],!m.hasOwnProperty(Ie)||ue===fe||ue==null&&fe==null||dn(l,u,Ie,ue,m,fe)}var sx=null,ox=null;function hg(l){return l.nodeType===9?l:l.ownerDocument}function JS(l){switch(l){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function eT(l,u){if(l===0)switch(u){case"svg":return 1;case"math":return 2;default:return 0}return l===1&&u==="foreignObject"?0:l}function lx(l,u){return l==="textarea"||l==="noscript"||typeof u.children=="string"||typeof u.children=="number"||typeof u.children=="bigint"||typeof u.dangerouslySetInnerHTML=="object"&&u.dangerouslySetInnerHTML!==null&&u.dangerouslySetInnerHTML.__html!=null}var cx=null;function B8(){var l=window.event;return l&&l.type==="popstate"?l===cx?!1:(cx=l,!0):(cx=null,!1)}var tT=typeof setTimeout=="function"?setTimeout:void 0,F8=typeof clearTimeout=="function"?clearTimeout:void 0,nT=typeof Promise=="function"?Promise:void 0,V8=typeof queueMicrotask=="function"?queueMicrotask:typeof nT<"u"?function(l){return nT.resolve(null).then(l).catch(j8)}:tT;function j8(l){setTimeout(function(){throw l})}function Jo(l){return l==="head"}function rT(l,u){var h=u,m=0,b=0;do{var S=h.nextSibling;if(l.removeChild(h),S&&S.nodeType===8)if(h=S.data,h==="/$"){if(0<m&&8>m){h=m;var U=l.ownerDocument;if(h&1&&ch(U.documentElement),h&2&&ch(U.body),h&4)for(h=U.head,ch(h),U=h.firstChild;U;){var z=U.nextSibling,K=U.nodeName;U[Gl]||K==="SCRIPT"||K==="STYLE"||K==="LINK"&&U.rel.toLowerCase()==="stylesheet"||h.removeChild(U),U=z}}if(b===0){l.removeChild(S),yh(u);return}b--}else h==="$"||h==="$?"||h==="$!"?b++:m=h.charCodeAt(0)-48;else m=0;h=S}while(h);yh(u)}function ux(l){var u=l.firstChild;for(u&&u.nodeType===10&&(u=u.nextSibling);u;){var h=u;switch(u=u.nextSibling,h.nodeName){case"HTML":case"HEAD":case"BODY":ux(h),ko(h);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(h.rel.toLowerCase()==="stylesheet")continue}l.removeChild(h)}}function U8(l,u,h,m){for(;l.nodeType===1;){var b=h;if(l.nodeName.toLowerCase()!==u.toLowerCase()){if(!m&&(l.nodeName!=="INPUT"||l.type!=="hidden"))break}else if(m){if(!l[Gl])switch(u){case"meta":if(!l.hasAttribute("itemprop"))break;return l;case"link":if(S=l.getAttribute("rel"),S==="stylesheet"&&l.hasAttribute("data-precedence"))break;if(S!==b.rel||l.getAttribute("href")!==(b.href==null||b.href===""?null:b.href)||l.getAttribute("crossorigin")!==(b.crossOrigin==null?null:b.crossOrigin)||l.getAttribute("title")!==(b.title==null?null:b.title))break;return l;case"style":if(l.hasAttribute("data-precedence"))break;return l;case"script":if(S=l.getAttribute("src"),(S!==(b.src==null?null:b.src)||l.getAttribute("type")!==(b.type==null?null:b.type)||l.getAttribute("crossorigin")!==(b.crossOrigin==null?null:b.crossOrigin))&&S&&l.hasAttribute("async")&&!l.hasAttribute("itemprop"))break;return l;default:return l}}else if(u==="input"&&l.type==="hidden"){var S=b.name==null?null:""+b.name;if(b.type==="hidden"&&l.getAttribute("name")===S)return l}else return l;if(l=Oa(l.nextSibling),l===null)break}return null}function H8(l,u,h){if(u==="")return null;for(;l.nodeType!==3;)if((l.nodeType!==1||l.nodeName!=="INPUT"||l.type!=="hidden")&&!h||(l=Oa(l.nextSibling),l===null))return null;return l}function dx(l){return l.data==="$!"||l.data==="$?"&&l.ownerDocument.readyState==="complete"}function z8(l,u){var h=l.ownerDocument;if(l.data!=="$?"||h.readyState==="complete")u();else{var m=function(){u(),h.removeEventListener("DOMContentLoaded",m)};h.addEventListener("DOMContentLoaded",m),l._reactRetry=m}}function Oa(l){for(;l!=null;l=l.nextSibling){var u=l.nodeType;if(u===1||u===3)break;if(u===8){if(u=l.data,u==="$"||u==="$!"||u==="$?"||u==="F!"||u==="F")break;if(u==="/$")return null}}return l}var fx=null;function iT(l){l=l.previousSibling;for(var u=0;l;){if(l.nodeType===8){var h=l.data;if(h==="$"||h==="$!"||h==="$?"){if(u===0)return l;u--}else h==="/$"&&u++}l=l.previousSibling}return null}function aT(l,u,h){switch(u=hg(h),l){case"html":if(l=u.documentElement,!l)throw Error(r(452));return l;case"head":if(l=u.head,!l)throw Error(r(453));return l;case"body":if(l=u.body,!l)throw Error(r(454));return l;default:throw Error(r(451))}}function ch(l){for(var u=l.attributes;u.length;)l.removeAttributeNode(u[0]);ko(l)}var fa=new Map,sT=new Set;function pg(l){return typeof l.getRootNode=="function"?l.getRootNode():l.nodeType===9?l:l.ownerDocument}var ao=G.d;G.d={f:$8,r:G8,D:W8,C:Y8,L:q8,m:X8,X:Q8,S:K8,M:Z8};function $8(){var l=ao.f(),u=ag();return l||u}function G8(l){var u=Za(l);u!==null&&u.tag===5&&u.type==="form"?TE(u):ao.r(l)}var Qu=typeof document>"u"?null:document;function oT(l,u,h){var m=Qu;if(m&&typeof u=="string"&&u){var b=or(u);b='link[rel="'+l+'"][href="'+b+'"]',typeof h=="string"&&(b+='[crossorigin="'+h+'"]'),sT.has(b)||(sT.add(b),l={rel:l,crossOrigin:h,href:u},m.querySelector(b)===null&&(u=m.createElement("link"),Xr(u,"link",l),Xn(u),m.head.appendChild(u)))}}function W8(l){ao.D(l),oT("dns-prefetch",l,null)}function Y8(l,u){ao.C(l,u),oT("preconnect",l,u)}function q8(l,u,h){ao.L(l,u,h);var m=Qu;if(m&&l&&u){var b='link[rel="preload"][as="'+or(u)+'"]';u==="image"&&h&&h.imageSrcSet?(b+='[imagesrcset="'+or(h.imageSrcSet)+'"]',typeof h.imageSizes=="string"&&(b+='[imagesizes="'+or(h.imageSizes)+'"]')):b+='[href="'+or(l)+'"]';var S=b;switch(u){case"style":S=Zu(l);break;case"script":S=Ju(l)}fa.has(S)||(l=f({rel:"preload",href:u==="image"&&h&&h.imageSrcSet?void 0:l,as:u},h),fa.set(S,l),m.querySelector(b)!==null||u==="style"&&m.querySelector(uh(S))||u==="script"&&m.querySelector(dh(S))||(u=m.createElement("link"),Xr(u,"link",l),Xn(u),m.head.appendChild(u)))}}function X8(l,u){ao.m(l,u);var h=Qu;if(h&&l){var m=u&&typeof u.as=="string"?u.as:"script",b='link[rel="modulepreload"][as="'+or(m)+'"][href="'+or(l)+'"]',S=b;switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":S=Ju(l)}if(!fa.has(S)&&(l=f({rel:"modulepreload",href:l},u),fa.set(S,l),h.querySelector(b)===null)){switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(h.querySelector(dh(S)))return}m=h.createElement("link"),Xr(m,"link",l),Xn(m),h.head.appendChild(m)}}}function K8(l,u,h){ao.S(l,u,h);var m=Qu;if(m&&l){var b=yi(m).hoistableStyles,S=Zu(l);u=u||"default";var U=b.get(S);if(!U){var z={loading:0,preload:null};if(U=m.querySelector(uh(S)))z.loading=5;else{l=f({rel:"stylesheet",href:l,"data-precedence":u},h),(h=fa.get(S))&&hx(l,h);var K=U=m.createElement("link");Xn(K),Xr(K,"link",l),K._p=new Promise(function(le,Ee){K.onload=le,K.onerror=Ee}),K.addEventListener("load",function(){z.loading|=1}),K.addEventListener("error",function(){z.loading|=2}),z.loading|=4,gg(U,u,m)}U={type:"stylesheet",instance:U,count:1,state:z},b.set(S,U)}}}function Q8(l,u){ao.X(l,u);var h=Qu;if(h&&l){var m=yi(h).hoistableScripts,b=Ju(l),S=m.get(b);S||(S=h.querySelector(dh(b)),S||(l=f({src:l,async:!0},u),(u=fa.get(b))&&px(l,u),S=h.createElement("script"),Xn(S),Xr(S,"link",l),h.head.appendChild(S)),S={type:"script",instance:S,count:1,state:null},m.set(b,S))}}function Z8(l,u){ao.M(l,u);var h=Qu;if(h&&l){var m=yi(h).hoistableScripts,b=Ju(l),S=m.get(b);S||(S=h.querySelector(dh(b)),S||(l=f({src:l,async:!0,type:"module"},u),(u=fa.get(b))&&px(l,u),S=h.createElement("script"),Xn(S),Xr(S,"link",l),h.head.appendChild(S)),S={type:"script",instance:S,count:1,state:null},m.set(b,S))}}function lT(l,u,h,m){var b=(b=Se.current)?pg(b):null;if(!b)throw Error(r(446));switch(l){case"meta":case"title":return null;case"style":return typeof h.precedence=="string"&&typeof h.href=="string"?(u=Zu(h.href),h=yi(b).hoistableStyles,m=h.get(u),m||(m={type:"style",instance:null,count:0,state:null},h.set(u,m)),m):{type:"void",instance:null,count:0,state:null};case"link":if(h.rel==="stylesheet"&&typeof h.href=="string"&&typeof h.precedence=="string"){l=Zu(h.href);var S=yi(b).hoistableStyles,U=S.get(l);if(U||(b=b.ownerDocument||b,U={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},S.set(l,U),(S=b.querySelector(uh(l)))&&!S._p&&(U.instance=S,U.state.loading=5),fa.has(l)||(h={rel:"preload",as:"style",href:h.href,crossOrigin:h.crossOrigin,integrity:h.integrity,media:h.media,hrefLang:h.hrefLang,referrerPolicy:h.referrerPolicy},fa.set(l,h),S||J8(b,l,h,U.state))),u&&m===null)throw Error(r(528,""));return U}if(u&&m!==null)throw Error(r(529,""));return null;case"script":return u=h.async,h=h.src,typeof h=="string"&&u&&typeof u!="function"&&typeof u!="symbol"?(u=Ju(h),h=yi(b).hoistableScripts,m=h.get(u),m||(m={type:"script",instance:null,count:0,state:null},h.set(u,m)),m):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,l))}}function Zu(l){return'href="'+or(l)+'"'}function uh(l){return'link[rel="stylesheet"]['+l+"]"}function cT(l){return f({},l,{"data-precedence":l.precedence,precedence:null})}function J8(l,u,h,m){l.querySelector('link[rel="preload"][as="style"]['+u+"]")?m.loading=1:(u=l.createElement("link"),m.preload=u,u.addEventListener("load",function(){return m.loading|=1}),u.addEventListener("error",function(){return m.loading|=2}),Xr(u,"link",h),Xn(u),l.head.appendChild(u))}function Ju(l){return'[src="'+or(l)+'"]'}function dh(l){return"script[async]"+l}function uT(l,u,h){if(u.count++,u.instance===null)switch(u.type){case"style":var m=l.querySelector('style[data-href~="'+or(h.href)+'"]');if(m)return u.instance=m,Xn(m),m;var b=f({},h,{"data-href":h.href,"data-precedence":h.precedence,href:null,precedence:null});return m=(l.ownerDocument||l).createElement("style"),Xn(m),Xr(m,"style",b),gg(m,h.precedence,l),u.instance=m;case"stylesheet":b=Zu(h.href);var S=l.querySelector(uh(b));if(S)return u.state.loading|=4,u.instance=S,Xn(S),S;m=cT(h),(b=fa.get(b))&&hx(m,b),S=(l.ownerDocument||l).createElement("link"),Xn(S);var U=S;return U._p=new Promise(function(z,K){U.onload=z,U.onerror=K}),Xr(S,"link",m),u.state.loading|=4,gg(S,h.precedence,l),u.instance=S;case"script":return S=Ju(h.src),(b=l.querySelector(dh(S)))?(u.instance=b,Xn(b),b):(m=h,(b=fa.get(S))&&(m=f({},h),px(m,b)),l=l.ownerDocument||l,b=l.createElement("script"),Xn(b),Xr(b,"link",m),l.head.appendChild(b),u.instance=b);case"void":return null;default:throw Error(r(443,u.type))}else u.type==="stylesheet"&&(u.state.loading&4)===0&&(m=u.instance,u.state.loading|=4,gg(m,h.precedence,l));return u.instance}function gg(l,u,h){for(var m=h.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),b=m.length?m[m.length-1]:null,S=b,U=0;U<m.length;U++){var z=m[U];if(z.dataset.precedence===u)S=z;else if(S!==b)break}S?S.parentNode.insertBefore(l,S.nextSibling):(u=h.nodeType===9?h.head:h,u.insertBefore(l,u.firstChild))}function hx(l,u){l.crossOrigin==null&&(l.crossOrigin=u.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=u.referrerPolicy),l.title==null&&(l.title=u.title)}function px(l,u){l.crossOrigin==null&&(l.crossOrigin=u.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=u.referrerPolicy),l.integrity==null&&(l.integrity=u.integrity)}var mg=null;function dT(l,u,h){if(mg===null){var m=new Map,b=mg=new Map;b.set(h,m)}else b=mg,m=b.get(h),m||(m=new Map,b.set(h,m));if(m.has(l))return m;for(m.set(l,null),h=h.getElementsByTagName(l),b=0;b<h.length;b++){var S=h[b];if(!(S[Gl]||S[mr]||l==="link"&&S.getAttribute("rel")==="stylesheet")&&S.namespaceURI!=="http://www.w3.org/2000/svg"){var U=S.getAttribute(u)||"";U=l+U;var z=m.get(U);z?z.push(S):m.set(U,[S])}}return m}function fT(l,u,h){l=l.ownerDocument||l,l.head.insertBefore(h,u==="title"?l.querySelector("head > title"):null)}function eN(l,u,h){if(h===1||u.itemProp!=null)return!1;switch(l){case"meta":case"title":return!0;case"style":if(typeof u.precedence!="string"||typeof u.href!="string"||u.href==="")break;return!0;case"link":if(typeof u.rel!="string"||typeof u.href!="string"||u.href===""||u.onLoad||u.onError)break;switch(u.rel){case"stylesheet":return l=u.disabled,typeof u.precedence=="string"&&l==null;default:return!0}case"script":if(u.async&&typeof u.async!="function"&&typeof u.async!="symbol"&&!u.onLoad&&!u.onError&&u.src&&typeof u.src=="string")return!0}return!1}function hT(l){return!(l.type==="stylesheet"&&(l.state.loading&3)===0)}var fh=null;function tN(){}function nN(l,u,h){if(fh===null)throw Error(r(475));var m=fh;if(u.type==="stylesheet"&&(typeof h.media!="string"||matchMedia(h.media).matches!==!1)&&(u.state.loading&4)===0){if(u.instance===null){var b=Zu(h.href),S=l.querySelector(uh(b));if(S){l=S._p,l!==null&&typeof l=="object"&&typeof l.then=="function"&&(m.count++,m=yg.bind(m),l.then(m,m)),u.state.loading|=4,u.instance=S,Xn(S);return}S=l.ownerDocument||l,h=cT(h),(b=fa.get(b))&&hx(h,b),S=S.createElement("link"),Xn(S);var U=S;U._p=new Promise(function(z,K){U.onload=z,U.onerror=K}),Xr(S,"link",h),u.instance=S}m.stylesheets===null&&(m.stylesheets=new Map),m.stylesheets.set(u,l),(l=u.state.preload)&&(u.state.loading&3)===0&&(m.count++,u=yg.bind(m),l.addEventListener("load",u),l.addEventListener("error",u))}}function rN(){if(fh===null)throw Error(r(475));var l=fh;return l.stylesheets&&l.count===0&&gx(l,l.stylesheets),0<l.count?function(u){var h=setTimeout(function(){if(l.stylesheets&&gx(l,l.stylesheets),l.unsuspend){var m=l.unsuspend;l.unsuspend=null,m()}},6e4);return l.unsuspend=u,function(){l.unsuspend=null,clearTimeout(h)}}:null}function yg(){if(this.count--,this.count===0){if(this.stylesheets)gx(this,this.stylesheets);else if(this.unsuspend){var l=this.unsuspend;this.unsuspend=null,l()}}}var vg=null;function gx(l,u){l.stylesheets=null,l.unsuspend!==null&&(l.count++,vg=new Map,u.forEach(iN,l),vg=null,yg.call(l))}function iN(l,u){if(!(u.state.loading&4)){var h=vg.get(l);if(h)var m=h.get(null);else{h=new Map,vg.set(l,h);for(var b=l.querySelectorAll("link[data-precedence],style[data-precedence]"),S=0;S<b.length;S++){var U=b[S];(U.nodeName==="LINK"||U.getAttribute("media")!=="not all")&&(h.set(U.dataset.precedence,U),m=U)}m&&h.set(null,m)}b=u.instance,U=b.getAttribute("data-precedence"),S=h.get(U)||m,S===m&&h.set(null,b),h.set(U,b),this.count++,m=yg.bind(this),b.addEventListener("load",m),b.addEventListener("error",m),S?S.parentNode.insertBefore(b,S.nextSibling):(l=l.nodeType===9?l.head:l,l.insertBefore(b,l.firstChild)),u.state.loading|=4}}var hh={$$typeof:C,Provider:null,Consumer:null,_currentValue:Q,_currentValue2:Q,_threadCount:0};function aN(l,u,h,m,b,S,U,z){this.tag=1,this.containerInfo=l,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=mi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mi(0),this.hiddenUpdates=mi(null),this.identifierPrefix=m,this.onUncaughtError=b,this.onCaughtError=S,this.onRecoverableError=U,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=z,this.incompleteTransitions=new Map}function pT(l,u,h,m,b,S,U,z,K,le,Ee,Ie){return l=new aN(l,u,h,U,z,K,le,Ie),u=1,S===!0&&(u|=24),S=Hi(3,null,null,u),l.current=S,S.stateNode=l,u=Ky(),u.refCount++,l.pooledCache=u,u.refCount++,S.memoizedState={element:m,isDehydrated:h,cache:u},ev(S),l}function gT(l){return l?(l=Ru,l):Ru}function mT(l,u,h,m,b,S){b=gT(b),m.context===null?m.context=b:m.pendingContext=b,m=jo(u),m.payload={element:h},S=S===void 0?null:S,S!==null&&(m.callback=S),h=Uo(l,m,u),h!==null&&(Yi(h,l,u),zf(h,l,u))}function yT(l,u){if(l=l.memoizedState,l!==null&&l.dehydrated!==null){var h=l.retryLane;l.retryLane=h!==0&&h<u?h:u}}function mx(l,u){yT(l,u),(l=l.alternate)&&yT(l,u)}function vT(l){if(l.tag===13){var u=Du(l,67108864);u!==null&&Yi(u,l,67108864),mx(l,67108864)}}var xg=!0;function sN(l,u,h,m){var b=W.T;W.T=null;var S=G.p;try{G.p=2,yx(l,u,h,m)}finally{G.p=S,W.T=b}}function oN(l,u,h,m){var b=W.T;W.T=null;var S=G.p;try{G.p=8,yx(l,u,h,m)}finally{G.p=S,W.T=b}}function yx(l,u,h,m){if(xg){var b=vx(m);if(b===null)ix(l,u,m,wg,h),wT(l,m);else if(cN(b,l,u,h,m))m.stopPropagation();else if(wT(l,m),u&4&&-1<lN.indexOf(l)){for(;b!==null;){var S=Za(b);if(S!==null)switch(S.tag){case 3:if(S=S.stateNode,S.current.memoizedState.isDehydrated){var U=Yt(S.pendingLanes);if(U!==0){var z=S;for(z.pendingLanes|=2,z.entangledLanes|=2;U;){var K=1<<31-Qe(U);z.entanglements[1]|=K,U&=~K}fs(S),(rn&6)===0&&(rg=Re()+500,sh(0))}}break;case 13:z=Du(S,2),z!==null&&Yi(z,S,2),ag(),mx(S,2)}if(S=vx(m),S===null&&ix(l,u,m,wg,h),S===b)break;b=S}b!==null&&m.stopPropagation()}else ix(l,u,m,null,h)}}function vx(l){return l=ra(l),xx(l)}var wg=null;function xx(l){if(wg=null,l=Bs(l),l!==null){var u=a(l);if(u===null)l=null;else{var h=u.tag;if(h===13){if(l=s(u),l!==null)return l;l=null}else if(h===3){if(u.stateNode.current.memoizedState.isDehydrated)return u.tag===3?u.stateNode.containerInfo:null;l=null}else u!==l&&(l=null)}}return wg=l,null}function xT(l){switch(l){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ye()){case Ge:return 2;case Oe:return 8;case Ne:case dt:return 32;case _t:return 268435456;default:return 32}default:return 32}}var wx=!1,el=null,tl=null,nl=null,ph=new Map,gh=new Map,rl=[],lN="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function wT(l,u){switch(l){case"focusin":case"focusout":el=null;break;case"dragenter":case"dragleave":tl=null;break;case"mouseover":case"mouseout":nl=null;break;case"pointerover":case"pointerout":ph.delete(u.pointerId);break;case"gotpointercapture":case"lostpointercapture":gh.delete(u.pointerId)}}function mh(l,u,h,m,b,S){return l===null||l.nativeEvent!==S?(l={blockedOn:u,domEventName:h,eventSystemFlags:m,nativeEvent:S,targetContainers:[b]},u!==null&&(u=Za(u),u!==null&&vT(u)),l):(l.eventSystemFlags|=m,u=l.targetContainers,b!==null&&u.indexOf(b)===-1&&u.push(b),l)}function cN(l,u,h,m,b){switch(u){case"focusin":return el=mh(el,l,u,h,m,b),!0;case"dragenter":return tl=mh(tl,l,u,h,m,b),!0;case"mouseover":return nl=mh(nl,l,u,h,m,b),!0;case"pointerover":var S=b.pointerId;return ph.set(S,mh(ph.get(S)||null,l,u,h,m,b)),!0;case"gotpointercapture":return S=b.pointerId,gh.set(S,mh(gh.get(S)||null,l,u,h,m,b)),!0}return!1}function _T(l){var u=Bs(l.target);if(u!==null){var h=a(u);if(h!==null){if(u=h.tag,u===13){if(u=s(h),u!==null){l.blockedOn=u,$l(l.priority,function(){if(h.tag===13){var m=Wi();m=Ls(m);var b=Du(h,m);b!==null&&Yi(b,h,m),mx(h,m)}});return}}else if(u===3&&h.stateNode.current.memoizedState.isDehydrated){l.blockedOn=h.tag===3?h.stateNode.containerInfo:null;return}}}l.blockedOn=null}function _g(l){if(l.blockedOn!==null)return!1;for(var u=l.targetContainers;0<u.length;){var h=vx(l.nativeEvent);if(h===null){h=l.nativeEvent;var m=new h.constructor(h.type,h);Us=m,h.target.dispatchEvent(m),Us=null}else return u=Za(h),u!==null&&vT(u),l.blockedOn=h,!1;u.shift()}return!0}function bT(l,u,h){_g(l)&&h.delete(u)}function uN(){wx=!1,el!==null&&_g(el)&&(el=null),tl!==null&&_g(tl)&&(tl=null),nl!==null&&_g(nl)&&(nl=null),ph.forEach(bT),gh.forEach(bT)}function bg(l,u){l.blockedOn===u&&(l.blockedOn=null,wx||(wx=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,uN)))}var Ag=null;function AT(l){Ag!==l&&(Ag=l,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Ag===l&&(Ag=null);for(var u=0;u<l.length;u+=3){var h=l[u],m=l[u+1],b=l[u+2];if(typeof m!="function"){if(xx(m||h)===null)continue;break}var S=Za(h);S!==null&&(l.splice(u,3),u-=3,xv(S,{pending:!0,data:b,method:h.method,action:m},m,b))}}))}function yh(l){function u(K){return bg(K,l)}el!==null&&bg(el,l),tl!==null&&bg(tl,l),nl!==null&&bg(nl,l),ph.forEach(u),gh.forEach(u);for(var h=0;h<rl.length;h++){var m=rl[h];m.blockedOn===l&&(m.blockedOn=null)}for(;0<rl.length&&(h=rl[0],h.blockedOn===null);)_T(h),h.blockedOn===null&&rl.shift();if(h=(l.ownerDocument||l).$$reactFormReplay,h!=null)for(m=0;m<h.length;m+=3){var b=h[m],S=h[m+1],U=b[sr]||null;if(typeof S=="function")U||AT(h);else if(U){var z=null;if(S&&S.hasAttribute("formAction")){if(b=S,U=S[sr]||null)z=U.formAction;else if(xx(b)!==null)continue}else z=U.action;typeof z=="function"?h[m+1]=z:(h.splice(m,3),m-=3),AT(h)}}}function _x(l){this._internalRoot=l}Eg.prototype.render=_x.prototype.render=function(l){var u=this._internalRoot;if(u===null)throw Error(r(409));var h=u.current,m=Wi();mT(h,m,l,u,null,null)},Eg.prototype.unmount=_x.prototype.unmount=function(){var l=this._internalRoot;if(l!==null){this._internalRoot=null;var u=l.containerInfo;mT(l.current,2,null,l,null,null),ag(),u[ta]=null}};function Eg(l){this._internalRoot=l}Eg.prototype.unstable_scheduleHydration=function(l){if(l){var u=ar();l={blockedOn:null,target:l,priority:u};for(var h=0;h<rl.length&&u!==0&&u<rl[h].priority;h++);rl.splice(h,0,l),h===0&&_T(l)}};var ET=e.version;if(ET!=="19.1.0")throw Error(r(527,ET,"19.1.0"));G.findDOMNode=function(l){var u=l._reactInternals;if(u===void 0)throw typeof l.render=="function"?Error(r(188)):(l=Object.keys(l).join(","),Error(r(268,l)));return l=c(u),l=l!==null?d(l):null,l=l===null?null:l.stateNode,l};var dN={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:W,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Sg=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Sg.isDisabled&&Sg.supportsFiber)try{nt=Sg.inject(dN),it=Sg}catch{}}return vh.createRoot=function(l,u){if(!i(l))throw Error(r(299));var h=!1,m="",b=jE,S=UE,U=HE,z=null;return u!=null&&(u.unstable_strictMode===!0&&(h=!0),u.identifierPrefix!==void 0&&(m=u.identifierPrefix),u.onUncaughtError!==void 0&&(b=u.onUncaughtError),u.onCaughtError!==void 0&&(S=u.onCaughtError),u.onRecoverableError!==void 0&&(U=u.onRecoverableError),u.unstable_transitionCallbacks!==void 0&&(z=u.unstable_transitionCallbacks)),u=pT(l,1,!1,null,null,h,m,b,S,U,z,null),l[ta]=u.current,rx(l),new _x(u)},vh.hydrateRoot=function(l,u,h){if(!i(l))throw Error(r(299));var m=!1,b="",S=jE,U=UE,z=HE,K=null,le=null;return h!=null&&(h.unstable_strictMode===!0&&(m=!0),h.identifierPrefix!==void 0&&(b=h.identifierPrefix),h.onUncaughtError!==void 0&&(S=h.onUncaughtError),h.onCaughtError!==void 0&&(U=h.onCaughtError),h.onRecoverableError!==void 0&&(z=h.onRecoverableError),h.unstable_transitionCallbacks!==void 0&&(K=h.unstable_transitionCallbacks),h.formState!==void 0&&(le=h.formState)),u=pT(l,1,!0,u,h??null,m,b,S,U,z,K,le),u.context=gT(null),h=u.current,m=Wi(),m=Ls(m),b=jo(m),b.callback=null,Uo(h,b,m),h=m,u.current.lanes=h,ir(u,h),fs(u),l[ta]=u.current,rx(l),new Eg(u)},vh.version="19.1.0",vh}var PT;function l5(){if(PT)return Ax.exports;PT=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Ax.exports=o5(),Ax.exports}var c5=l5();const u5=()=>{};var kT={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cR=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},d5=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const a=t[n++];e[r++]=String.fromCharCode((i&31)<<6|a&63)}else if(i>239&&i<365){const a=t[n++],s=t[n++],o=t[n++],c=((i&7)<<18|(a&63)<<12|(s&63)<<6|o&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const a=t[n++],s=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(a&63)<<6|s&63)}}return e.join("")},uR={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const a=t[i],s=i+1<t.length,o=s?t[i+1]:0,c=i+2<t.length,d=c?t[i+2]:0,f=a>>2,p=(a&3)<<4|o>>4;let g=(o&15)<<2|d>>6,y=d&63;c||(y=64,s||(g=64)),r.push(n[f],n[p],n[g],n[y])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(cR(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):d5(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const a=n[t.charAt(i++)],o=i<t.length?n[t.charAt(i)]:0;++i;const d=i<t.length?n[t.charAt(i)]:64;++i;const p=i<t.length?n[t.charAt(i)]:64;if(++i,a==null||o==null||d==null||p==null)throw new f5;const g=a<<2|o>>4;if(r.push(g),d!==64){const y=o<<4&240|d>>2;if(r.push(y),p!==64){const x=d<<6&192|p;r.push(x)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class f5 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const h5=function(t){const e=cR(t);return uR.encodeByteArray(e,!0)},mm=function(t){return h5(t).replace(/\./g,"")},dR=function(t){try{return uR.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p5(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g5=()=>p5().__FIREBASE_DEFAULTS__,m5=()=>{if(typeof process>"u"||typeof kT>"u")return;const t=kT.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},y5=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&dR(t[1]);return e&&JSON.parse(e)},_1=()=>{try{return u5()||g5()||m5()||y5()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},fR=t=>{var e,n;return(n=(e=_1())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},v5=t=>{const e=fR(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},hR=()=>{var t;return(t=_1())===null||t===void 0?void 0:t.config},pR=t=>{var e;return(e=_1())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x5{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rf(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function gR(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w5(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,a=t.sub||t.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},t);return[mm(JSON.stringify(n)),mm(JSON.stringify(s)),""].join(".")}const Kh={};function _5(){const t={prod:[],emulator:[]};for(const e of Object.keys(Kh))Kh[e]?t.emulator.push(e):t.prod.push(e);return t}function b5(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let NT=!1;function mR(t,e){if(typeof window>"u"||typeof document>"u"||!rf(window.location.host)||Kh[t]===e||Kh[t]||NT)return;Kh[t]=e;function n(g){return`__firebase__banner__${g}`}const r="__firebase__banner",a=_5().prod.length>0;function s(){const g=document.getElementById(r);g&&g.remove()}function o(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function c(g,y){g.setAttribute("width","24"),g.setAttribute("id",y),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function d(){const g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{NT=!0,s()},g}function f(g,y){g.setAttribute("id",y),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function p(){const g=b5(r),y=n("text"),x=document.getElementById(y)||document.createElement("span"),_=n("learnmore"),A=document.getElementById(_)||document.createElement("a"),E=n("preprendIcon"),T=document.getElementById(E)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){const C=g.element;o(C),f(A,_);const D=d();c(T,E),C.append(T,x,A,D),document.body.appendChild(C)}a?(x.innerText="Preview backend disconnected.",T.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(T.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,x.innerText="Preview backend running in this workspace."),x.setAttribute("id",y)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pi(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function A5(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(pi())}function E5(){var t;const e=(t=_1())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function S5(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function T5(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function C5(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function I5(){const t=pi();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function D5(){return!E5()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function R5(){try{return typeof indexedDB=="object"}catch{return!1}}function O5(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var a;e(((a=i.error)===null||a===void 0?void 0:a.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M5="FirebaseError";class Io extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=M5,Object.setPrototypeOf(this,Io.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,D0.prototype.create)}}class D0{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,a=this.errors[e],s=a?P5(a,r):"Error",o=`${this.serviceName}: ${s} (${i}).`;return new Io(i,o,r)}}function P5(t,e){return t.replace(k5,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const k5=/\{\$([^}]+)}/g;function N5(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function zc(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const a=t[i],s=e[i];if(LT(a)&&LT(s)){if(!zc(a,s))return!1}else if(a!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function LT(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R0(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function kh(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,a]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(a)}}),e}function Nh(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function L5(t,e){const n=new B5(t,e);return n.subscribe.bind(n)}class B5{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");F5(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Tx),i.error===void 0&&(i.error=Tx),i.complete===void 0&&(i.complete=Tx);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function F5(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Tx(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gr(t){return t&&t._delegate?t._delegate:t}class $c{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sc="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V5{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new x5;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(a){if(i)return null;throw a}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(U5(e))try{this.getOrInitializeService({instanceIdentifier:Sc})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const a=this.getOrInitializeService({instanceIdentifier:i});r.resolve(a)}catch{}}}}clearInstance(e=Sc){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Sc){return this.instances.has(e)}getOptions(e=Sc){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[a,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(a);r===o&&s.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),a=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;a.add(e),this.onInitCallbacks.set(i,a);const s=this.instances.get(i);return s&&e(s,i),()=>{a.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:j5(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Sc){return this.component?this.component.multipleInstances?e:Sc:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function j5(t){return t===Sc?void 0:t}function U5(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H5{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new V5(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Mt;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Mt||(Mt={}));const z5={debug:Mt.DEBUG,verbose:Mt.VERBOSE,info:Mt.INFO,warn:Mt.WARN,error:Mt.ERROR,silent:Mt.SILENT},$5=Mt.INFO,G5={[Mt.DEBUG]:"log",[Mt.VERBOSE]:"log",[Mt.INFO]:"info",[Mt.WARN]:"warn",[Mt.ERROR]:"error"},W5=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=G5[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Ww{constructor(e){this.name=e,this._logLevel=$5,this._logHandler=W5,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Mt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?z5[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Mt.DEBUG,...e),this._logHandler(this,Mt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Mt.VERBOSE,...e),this._logHandler(this,Mt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Mt.INFO,...e),this._logHandler(this,Mt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Mt.WARN,...e),this._logHandler(this,Mt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Mt.ERROR,...e),this._logHandler(this,Mt.ERROR,...e)}}const Y5=(t,e)=>e.some(n=>t instanceof n);let BT,FT;function q5(){return BT||(BT=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function X5(){return FT||(FT=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const yR=new WeakMap,I2=new WeakMap,vR=new WeakMap,Cx=new WeakMap,Yw=new WeakMap;function K5(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",a),t.removeEventListener("error",s)},a=()=>{n(_l(t.result)),i()},s=()=>{r(t.error),i()};t.addEventListener("success",a),t.addEventListener("error",s)});return e.then(n=>{n instanceof IDBCursor&&yR.set(n,t)}).catch(()=>{}),Yw.set(e,t),e}function Q5(t){if(I2.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",s),t.removeEventListener("abort",s)},a=()=>{n(),i()},s=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",a),t.addEventListener("error",s),t.addEventListener("abort",s)});I2.set(t,e)}let D2={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return I2.get(t);if(e==="objectStoreNames")return t.objectStoreNames||vR.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return _l(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Z5(t){D2=t(D2)}function J5(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Ix(this),e,...n);return vR.set(r,e.sort?e.sort():[e]),_l(r)}:X5().includes(t)?function(...e){return t.apply(Ix(this),e),_l(yR.get(this))}:function(...e){return _l(t.apply(Ix(this),e))}}function e9(t){return typeof t=="function"?J5(t):(t instanceof IDBTransaction&&Q5(t),Y5(t,q5())?new Proxy(t,D2):t)}function _l(t){if(t instanceof IDBRequest)return K5(t);if(Cx.has(t))return Cx.get(t);const e=e9(t);return e!==t&&(Cx.set(t,e),Yw.set(e,t)),e}const Ix=t=>Yw.get(t);function t9(t,e,{blocked:n,upgrade:r,blocking:i,terminated:a}={}){const s=indexedDB.open(t,e),o=_l(s);return r&&s.addEventListener("upgradeneeded",c=>{r(_l(s.result),c.oldVersion,c.newVersion,_l(s.transaction),c)}),n&&s.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),o.then(c=>{a&&c.addEventListener("close",()=>a()),i&&c.addEventListener("versionchange",d=>i(d.oldVersion,d.newVersion,d))}).catch(()=>{}),o}const n9=["get","getKey","getAll","getAllKeys","count"],r9=["put","add","delete","clear"],Dx=new Map;function VT(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Dx.get(e))return Dx.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=r9.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||n9.includes(n)))return;const a=async function(s,...o){const c=this.transaction(s,i?"readwrite":"readonly");let d=c.store;return r&&(d=d.index(o.shift())),(await Promise.all([d[n](...o),i&&c.done]))[0]};return Dx.set(e,a),a}Z5(t=>({...t,get:(e,n,r)=>VT(e,n)||t.get(e,n,r),has:(e,n)=>!!VT(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i9{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(a9(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function a9(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const R2="@firebase/app",jT="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yo=new Ww("@firebase/app"),s9="@firebase/app-compat",o9="@firebase/analytics-compat",l9="@firebase/analytics",c9="@firebase/app-check-compat",u9="@firebase/app-check",d9="@firebase/auth",f9="@firebase/auth-compat",h9="@firebase/database",p9="@firebase/data-connect",g9="@firebase/database-compat",m9="@firebase/functions",y9="@firebase/functions-compat",v9="@firebase/installations",x9="@firebase/installations-compat",w9="@firebase/messaging",_9="@firebase/messaging-compat",b9="@firebase/performance",A9="@firebase/performance-compat",E9="@firebase/remote-config",S9="@firebase/remote-config-compat",T9="@firebase/storage",C9="@firebase/storage-compat",I9="@firebase/firestore",D9="@firebase/ai",R9="@firebase/firestore-compat",O9="firebase",M9="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O2="[DEFAULT]",P9={[R2]:"fire-core",[s9]:"fire-core-compat",[l9]:"fire-analytics",[o9]:"fire-analytics-compat",[u9]:"fire-app-check",[c9]:"fire-app-check-compat",[d9]:"fire-auth",[f9]:"fire-auth-compat",[h9]:"fire-rtdb",[p9]:"fire-data-connect",[g9]:"fire-rtdb-compat",[m9]:"fire-fn",[y9]:"fire-fn-compat",[v9]:"fire-iid",[x9]:"fire-iid-compat",[w9]:"fire-fcm",[_9]:"fire-fcm-compat",[b9]:"fire-perf",[A9]:"fire-perf-compat",[E9]:"fire-rc",[S9]:"fire-rc-compat",[T9]:"fire-gcs",[C9]:"fire-gcs-compat",[I9]:"fire-fst",[R9]:"fire-fst-compat",[D9]:"fire-vertex","fire-js":"fire-js",[O9]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ym=new Map,k9=new Map,M2=new Map;function UT(t,e){try{t.container.addComponent(e)}catch(n){yo.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Fd(t){const e=t.name;if(M2.has(e))return yo.debug(`There were multiple attempts to register component ${e}.`),!1;M2.set(e,t);for(const n of ym.values())UT(n,t);for(const n of k9.values())UT(n,t);return!0}function qw(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function ma(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N9={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},bl=new D0("app","Firebase",N9);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L9{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new $c("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw bl.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const af=M9;function xR(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:O2,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw bl.create("bad-app-name",{appName:String(i)});if(n||(n=hR()),!n)throw bl.create("no-options");const a=ym.get(i);if(a){if(zc(n,a.options)&&zc(r,a.config))return a;throw bl.create("duplicate-app",{appName:i})}const s=new H5(i);for(const c of M2.values())s.addComponent(c);const o=new L9(n,r,s);return ym.set(i,o),o}function wR(t=O2){const e=ym.get(t);if(!e&&t===O2&&hR())return xR();if(!e)throw bl.create("no-app",{appName:t});return e}function Al(t,e,n){var r;let i=(r=P9[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const a=i.match(/\s|\//),s=e.match(/\s|\//);if(a||s){const o=[`Unable to register library "${i}" with version "${e}":`];a&&o.push(`library name "${i}" contains illegal characters (whitespace or "/")`),a&&s&&o.push("and"),s&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),yo.warn(o.join(" "));return}Fd(new $c(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B9="firebase-heartbeat-database",F9=1,a0="firebase-heartbeat-store";let Rx=null;function _R(){return Rx||(Rx=t9(B9,F9,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(a0)}catch(n){console.warn(n)}}}}).catch(t=>{throw bl.create("idb-open",{originalErrorMessage:t.message})})),Rx}async function V9(t){try{const n=(await _R()).transaction(a0),r=await n.objectStore(a0).get(bR(t));return await n.done,r}catch(e){if(e instanceof Io)yo.warn(e.message);else{const n=bl.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});yo.warn(n.message)}}}async function HT(t,e){try{const r=(await _R()).transaction(a0,"readwrite");await r.objectStore(a0).put(e,bR(t)),await r.done}catch(n){if(n instanceof Io)yo.warn(n.message);else{const r=bl.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});yo.warn(r.message)}}}function bR(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j9=1024,U9=30;class H9{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new $9(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=zT();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(s=>s.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:i}),this._heartbeatsCache.heartbeats.length>U9){const s=G9(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){yo.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=zT(),{heartbeatsToSend:r,unsentEntries:i}=z9(this._heartbeatsCache.heartbeats),a=mm(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(n){return yo.warn(n),""}}}function zT(){return new Date().toISOString().substring(0,10)}function z9(t,e=j9){const n=[];let r=t.slice();for(const i of t){const a=n.find(s=>s.agent===i.agent);if(a){if(a.dates.push(i.date),$T(n)>e){a.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),$T(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class $9{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return R5()?O5().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await V9(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return HT(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return HT(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function $T(t){return mm(JSON.stringify({version:2,heartbeats:t})).length}function G9(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W9(t){Fd(new $c("platform-logger",e=>new i9(e),"PRIVATE")),Fd(new $c("heartbeat",e=>new H9(e),"PRIVATE")),Al(R2,jT,t),Al(R2,jT,"esm2017"),Al("fire-js","")}W9("");function Xw(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function AR(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Y9=AR,ER=new D0("auth","Firebase",AR());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vm=new Ww("@firebase/auth");function q9(t,...e){vm.logLevel<=Mt.WARN&&vm.warn(`Auth (${af}): ${t}`,...e)}function tm(t,...e){vm.logLevel<=Mt.ERROR&&vm.error(`Auth (${af}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ya(t,...e){throw Kw(t,...e)}function bs(t,...e){return Kw(t,...e)}function SR(t,e,n){const r=Object.assign(Object.assign({},Y9()),{[e]:n});return new D0("auth","Firebase",r).create(e,{appName:t.name})}function ho(t){return SR(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Kw(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return ER.create(t,...e)}function ot(t,e,...n){if(!t)throw Kw(e,...n)}function so(t){const e="INTERNAL ASSERTION FAILED: "+t;throw tm(e),new Error(e)}function vo(t,e){t||so(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P2(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function X9(){return GT()==="http:"||GT()==="https:"}function GT(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K9(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(X9()||T5()||"connection"in navigator)?navigator.onLine:!0}function Q9(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O0{constructor(e,n){this.shortDelay=e,this.longDelay=n,vo(n>e,"Short delay should be less than long delay!"),this.isMobile=A5()||C5()}get(){return K9()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qw(t,e){vo(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TR{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;so("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;so("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;so("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z9={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J9=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],e7=new O0(3e4,6e4);function Ll(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Bl(t,e,n,r,i={}){return CR(t,i,async()=>{let a={},s={};r&&(e==="GET"?s=r:a={body:JSON.stringify(r)});const o=R0(Object.assign({key:t.config.apiKey},s)).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const d=Object.assign({method:e,headers:c},a);return S5()||(d.referrerPolicy="no-referrer"),t.emulatorConfig&&rf(t.emulatorConfig.host)&&(d.credentials="include"),TR.fetch()(await IR(t,t.config.apiHost,n,o),d)})}async function CR(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},Z9),e);try{const i=new n7(t),a=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const s=await a.json();if("needConfirmation"in s)throw Ig(t,"account-exists-with-different-credential",s);if(a.ok&&!("errorMessage"in s))return s;{const o=a.ok?s.errorMessage:s.error.message,[c,d]=o.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ig(t,"credential-already-in-use",s);if(c==="EMAIL_EXISTS")throw Ig(t,"email-already-in-use",s);if(c==="USER_DISABLED")throw Ig(t,"user-disabled",s);const f=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw SR(t,f,d);Ya(t,f)}}catch(i){if(i instanceof Io)throw i;Ya(t,"network-request-failed",{message:String(i)})}}async function M0(t,e,n,r,i={}){const a=await Bl(t,e,n,r,i);return"mfaPendingCredential"in a&&Ya(t,"multi-factor-auth-required",{_serverResponse:a}),a}async function IR(t,e,n,r){const i=`${e}${n}?${r}`,a=t,s=a.config.emulator?Qw(t.config,i):`${t.config.apiScheme}://${i}`;return J9.includes(n)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(s).toString():s}function t7(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class n7{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(bs(this.auth,"network-request-failed")),e7.get())})}}function Ig(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=bs(t,e,r);return i.customData._tokenResponse=n,i}function WT(t){return t!==void 0&&t.enterprise!==void 0}class r7{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return t7(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function i7(t,e){return Bl(t,"GET","/v2/recaptchaConfig",Ll(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function a7(t,e){return Bl(t,"POST","/v1/accounts:delete",e)}async function xm(t,e){return Bl(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qh(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function s7(t,e=!1){const n=gr(t),r=await n.getIdToken(e),i=Zw(r);ot(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const a=typeof i.firebase=="object"?i.firebase:void 0,s=a==null?void 0:a.sign_in_provider;return{claims:i,token:r,authTime:Qh(Ox(i.auth_time)),issuedAtTime:Qh(Ox(i.iat)),expirationTime:Qh(Ox(i.exp)),signInProvider:s||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function Ox(t){return Number(t)*1e3}function Zw(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return tm("JWT malformed, contained fewer than 3 sections"),null;try{const i=dR(n);return i?JSON.parse(i):(tm("Failed to decode base64 JWT payload"),null)}catch(i){return tm("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function YT(t){const e=Zw(t);return ot(e,"internal-error"),ot(typeof e.exp<"u","internal-error"),ot(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function s0(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Io&&o7(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function o7({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l7{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k2{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Qh(this.lastLoginAt),this.creationTime=Qh(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wm(t){var e;const n=t.auth,r=await t.getIdToken(),i=await s0(t,xm(n,{idToken:r}));ot(i==null?void 0:i.users.length,n,"internal-error");const a=i.users[0];t._notifyReloadListener(a);const s=!((e=a.providerUserInfo)===null||e===void 0)&&e.length?DR(a.providerUserInfo):[],o=u7(t.providerData,s),c=t.isAnonymous,d=!(t.email&&a.passwordHash)&&!(o!=null&&o.length),f=c?d:!1,p={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:o,metadata:new k2(a.createdAt,a.lastLoginAt),isAnonymous:f};Object.assign(t,p)}async function c7(t){const e=gr(t);await wm(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function u7(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function DR(t){return t.map(e=>{var{providerId:n}=e,r=Xw(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function d7(t,e){const n=await CR(t,{},async()=>{const r=R0({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:a}=t.config,s=await IR(t,i,"/v1/token",`key=${a}`),o=await t._getAdditionalHeaders();o["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:o,body:r};return t.emulatorConfig&&rf(t.emulatorConfig.host)&&(c.credentials="include"),TR.fetch()(s,c)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function f7(t,e){return Bl(t,"POST","/v2/accounts:revokeToken",Ll(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Td{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ot(e.idToken,"internal-error"),ot(typeof e.idToken<"u","internal-error"),ot(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):YT(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ot(e.length!==0,"internal-error");const n=YT(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ot(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:a}=await d7(e,n);this.updateTokensAndExpiration(r,i,Number(a))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:a}=n,s=new Td;return r&&(ot(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(ot(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),a&&(ot(typeof a=="number","internal-error",{appName:e}),s.expirationTime=a),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Td,this.toJSON())}_performRefresh(){return so("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sl(t,e){ot(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Ha{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,a=Xw(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new l7(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new k2(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const n=await s0(this,this.stsTokenManager.getToken(this.auth,e));return ot(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return s7(this,e)}reload(){return c7(this)}_assign(e){this!==e&&(ot(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Ha(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){ot(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await wm(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ma(this.auth.app))return Promise.reject(ho(this.auth));const e=await this.getIdToken();return await s0(this,a7(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,a,s,o,c,d,f;const p=(r=n.displayName)!==null&&r!==void 0?r:void 0,g=(i=n.email)!==null&&i!==void 0?i:void 0,y=(a=n.phoneNumber)!==null&&a!==void 0?a:void 0,x=(s=n.photoURL)!==null&&s!==void 0?s:void 0,_=(o=n.tenantId)!==null&&o!==void 0?o:void 0,A=(c=n._redirectEventId)!==null&&c!==void 0?c:void 0,E=(d=n.createdAt)!==null&&d!==void 0?d:void 0,T=(f=n.lastLoginAt)!==null&&f!==void 0?f:void 0,{uid:C,emailVerified:D,isAnonymous:k,providerData:B,stsTokenManager:O}=n;ot(C&&O,e,"internal-error");const I=Td.fromJSON(this.name,O);ot(typeof C=="string",e,"internal-error"),sl(p,e.name),sl(g,e.name),ot(typeof D=="boolean",e,"internal-error"),ot(typeof k=="boolean",e,"internal-error"),sl(y,e.name),sl(x,e.name),sl(_,e.name),sl(A,e.name),sl(E,e.name),sl(T,e.name);const R=new Ha({uid:C,auth:e,email:g,emailVerified:D,displayName:p,isAnonymous:k,photoURL:x,phoneNumber:y,tenantId:_,stsTokenManager:I,createdAt:E,lastLoginAt:T});return B&&Array.isArray(B)&&(R.providerData=B.map(V=>Object.assign({},V))),A&&(R._redirectEventId=A),R}static async _fromIdTokenResponse(e,n,r=!1){const i=new Td;i.updateFromServerResponse(n);const a=new Ha({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await wm(a),a}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];ot(i.localId!==void 0,"internal-error");const a=i.providerUserInfo!==void 0?DR(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!(a!=null&&a.length),o=new Td;o.updateFromIdToken(r);const c=new Ha({uid:i.localId,auth:e,stsTokenManager:o,isAnonymous:s}),d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new k2(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(a!=null&&a.length)};return Object.assign(c,d),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qT=new Map;function oo(t){vo(t instanceof Function,"Expected a class definition");let e=qT.get(t);return e?(vo(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,qT.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RR{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}RR.type="NONE";const XT=RR;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nm(t,e,n){return`firebase:${t}:${e}:${n}`}class Cd{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:a}=this.auth;this.fullUserKey=nm(this.userKey,i.apiKey,a),this.fullPersistenceKey=nm("persistence",i.apiKey,a),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await xm(this.auth,{idToken:e}).catch(()=>{});return n?Ha._fromGetAccountInfoResponse(this.auth,n,e):null}return Ha._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Cd(oo(XT),e,r);const i=(await Promise.all(n.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let a=i[0]||oo(XT);const s=nm(r,e.config.apiKey,e.name);let o=null;for(const d of n)try{const f=await d._get(s);if(f){let p;if(typeof f=="string"){const g=await xm(e,{idToken:f}).catch(()=>{});if(!g)break;p=await Ha._fromGetAccountInfoResponse(e,g,f)}else p=Ha._fromJSON(e,f);d!==a&&(o=p),a=d;break}}catch{}const c=i.filter(d=>d._shouldAllowMigration);return!a._shouldAllowMigration||!c.length?new Cd(a,e,r):(a=c[0],o&&await a._set(s,o.toJSON()),await Promise.all(n.map(async d=>{if(d!==a)try{await d._remove(s)}catch{}})),new Cd(a,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KT(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(kR(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(OR(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(LR(e))return"Blackberry";if(BR(e))return"Webos";if(MR(e))return"Safari";if((e.includes("chrome/")||PR(e))&&!e.includes("edge/"))return"Chrome";if(NR(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function OR(t=pi()){return/firefox\//i.test(t)}function MR(t=pi()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function PR(t=pi()){return/crios\//i.test(t)}function kR(t=pi()){return/iemobile/i.test(t)}function NR(t=pi()){return/android/i.test(t)}function LR(t=pi()){return/blackberry/i.test(t)}function BR(t=pi()){return/webos/i.test(t)}function Jw(t=pi()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function h7(t=pi()){var e;return Jw(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function p7(){return I5()&&document.documentMode===10}function FR(t=pi()){return Jw(t)||NR(t)||BR(t)||LR(t)||/windows phone/i.test(t)||kR(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VR(t,e=[]){let n;switch(t){case"Browser":n=KT(pi());break;case"Worker":n=`${KT(pi())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${af}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g7{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=a=>new Promise((s,o)=>{try{const c=e(a);s(c)}catch(c){o(c)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function m7(t,e={}){return Bl(t,"GET","/v2/passwordPolicy",Ll(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y7=6;class v7{constructor(e){var n,r,i,a;const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=s.minPasswordLength)!==null&&n!==void 0?n:y7,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(a=e.forceUpgradeOnSignin)!==null&&a!==void 0?a:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,a,s,o;const c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(n=c.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(i=c.containsLowercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(a=c.containsUppercaseLetter)!==null&&a!==void 0?a:!0),c.isValid&&(c.isValid=(s=c.containsNumericCharacter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(o=c.containsNonAlphanumericCharacter)!==null&&o!==void 0?o:!0),c}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x7{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new QT(this),this.idTokenSubscription=new QT(this),this.beforeStateQueue=new g7(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ER,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=oo(n)),this._initializationPromise=this.queue(async()=>{var r,i,a;if(!this._deleted&&(this.persistenceManager=await Cd.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((a=this.currentUser)===null||a===void 0?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await xm(this,{idToken:e}),r=await Ha._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(ma(this.app)){const s=this.app.settings.authIdToken;return s?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(o,o))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const s=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,o=i==null?void 0:i._redirectEventId,c=await this.tryRedirectSignIn(e);(!s||s===o)&&(c!=null&&c.user)&&(i=c.user,a=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(i)}catch(s){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return ot(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await wm(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Q9()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ma(this.app))return Promise.reject(ho(this));const n=e?gr(e):null;return n&&ot(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ot(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ma(this.app)?Promise.reject(ho(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ma(this.app)?Promise.reject(ho(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(oo(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await m7(this),n=new v7(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new D0("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await f7(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&oo(e)||this._popupRedirectResolver;ot(n,this,"argument-error"),this.redirectPersistenceManager=await Cd.create(this,[oo(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const a=typeof n=="function"?n:n.next.bind(n);let s=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(ot(o,this,"internal-error"),o.then(()=>{s||a(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,r,i);return()=>{s=!0,c()}}else{const c=e.addObserver(n);return()=>{s=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ot(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=VR(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;if(ma(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&q9(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function eu(t){return gr(t)}class QT{constructor(e){this.auth=e,this.observer=null,this.addObserver=L5(n=>this.observer=n)}get next(){return ot(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let b1={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function w7(t){b1=t}function jR(t){return b1.loadJS(t)}function _7(){return b1.recaptchaEnterpriseScript}function b7(){return b1.gapiScript}function A7(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class E7{constructor(){this.enterprise=new S7}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class S7{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const T7="recaptcha-enterprise",UR="NO_RECAPTCHA";class C7{constructor(e){this.type=T7,this.auth=eu(e)}async verify(e="verify",n=!1){async function r(a){if(!n){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(s,o)=>{i7(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)o(new Error("recaptcha Enterprise site key undefined"));else{const d=new r7(c);return a.tenantId==null?a._agentRecaptchaConfig=d:a._tenantRecaptchaConfigs[a.tenantId]=d,s(d.siteKey)}}).catch(c=>{o(c)})})}function i(a,s,o){const c=window.grecaptcha;WT(c)?c.enterprise.ready(()=>{c.enterprise.execute(a,{action:e}).then(d=>{s(d)}).catch(()=>{s(UR)})}):o(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new E7().execute("siteKey",{action:"verify"}):new Promise((a,s)=>{r(this.auth).then(o=>{if(!n&&WT(window.grecaptcha))i(o,a,s);else{if(typeof window>"u"){s(new Error("RecaptchaVerifier is only supported in browser"));return}let c=_7();c.length!==0&&(c+=o),jR(c).then(()=>{i(o,a,s)}).catch(d=>{s(d)})}}).catch(o=>{s(o)})})}}async function ZT(t,e,n,r=!1,i=!1){const a=new C7(t);let s;if(i)s=UR;else try{s=await a.verify(n)}catch{s=await a.verify(n,!0)}const o=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in o){const c=o.phoneEnrollmentInfo.phoneNumber,d=o.phoneEnrollmentInfo.recaptchaToken;Object.assign(o,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:d,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in o){const c=o.phoneSignInInfo.recaptchaToken;Object.assign(o,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return o}return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function N2(t,e,n,r,i){var a;if(!((a=t._getRecaptchaConfig())===null||a===void 0)&&a.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await ZT(t,e,n,n==="getOobCode");return r(t,s)}else return r(t,e).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await ZT(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(s)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I7(t,e){const n=qw(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),a=n.getOptions();if(zc(a,e??{}))return i;Ya(i,"already-initialized")}return n.initialize({options:e})}function D7(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(oo);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function R7(t,e,n){const r=eu(t);ot(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,a=HR(e),{host:s,port:o}=O7(e),c=o===null?"":`:${o}`,d={url:`${a}//${s}${c}/`},f=Object.freeze({host:s,port:o,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){ot(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),ot(zc(d,r.config.emulator)&&zc(f,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=d,r.emulatorConfig=f,r.settings.appVerificationDisabledForTesting=!0,rf(s)?(gR(`${a}//${s}${c}`),mR("Auth",!0)):M7()}function HR(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function O7(t){const e=HR(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const a=i[1];return{host:a,port:JT(r.substr(a.length+1))}}else{const[a,s]=r.split(":");return{host:a,port:JT(s)}}}function JT(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function M7(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e_{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return so("not implemented")}_getIdTokenResponse(e){return so("not implemented")}_linkToIdToken(e,n){return so("not implemented")}_getReauthenticationResolver(e){return so("not implemented")}}async function P7(t,e){return Bl(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function k7(t,e){return M0(t,"POST","/v1/accounts:signInWithPassword",Ll(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function N7(t,e){return M0(t,"POST","/v1/accounts:signInWithEmailLink",Ll(t,e))}async function L7(t,e){return M0(t,"POST","/v1/accounts:signInWithEmailLink",Ll(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o0 extends e_{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new o0(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new o0(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return N2(e,n,"signInWithPassword",k7);case"emailLink":return N7(e,{email:this._email,oobCode:this._password});default:Ya(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return N2(e,r,"signUpPassword",P7);case"emailLink":return L7(e,{idToken:n,email:this._email,oobCode:this._password});default:Ya(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Id(t,e){return M0(t,"POST","/v1/accounts:signInWithIdp",Ll(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B7="http://localhost";class Gc extends e_{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Gc(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Ya("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,a=Xw(n,["providerId","signInMethod"]);if(!r||!i)return null;const s=new Gc(r,i);return s.idToken=a.idToken||void 0,s.accessToken=a.accessToken||void 0,s.secret=a.secret,s.nonce=a.nonce,s.pendingToken=a.pendingToken||null,s}_getIdTokenResponse(e){const n=this.buildRequest();return Id(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Id(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Id(e,n)}buildRequest(){const e={requestUri:B7,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=R0(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F7(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function V7(t){const e=kh(Nh(t)).link,n=e?kh(Nh(e)).deep_link_id:null,r=kh(Nh(t)).deep_link_id;return(r?kh(Nh(r)).link:null)||r||n||e||t}class t_{constructor(e){var n,r,i,a,s,o;const c=kh(Nh(e)),d=(n=c.apiKey)!==null&&n!==void 0?n:null,f=(r=c.oobCode)!==null&&r!==void 0?r:null,p=F7((i=c.mode)!==null&&i!==void 0?i:null);ot(d&&f&&p,"argument-error"),this.apiKey=d,this.operation=p,this.code=f,this.continueUrl=(a=c.continueUrl)!==null&&a!==void 0?a:null,this.languageCode=(s=c.lang)!==null&&s!==void 0?s:null,this.tenantId=(o=c.tenantId)!==null&&o!==void 0?o:null}static parseLink(e){const n=V7(e);try{return new t_(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sf{constructor(){this.providerId=sf.PROVIDER_ID}static credential(e,n){return o0._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=t_.parseLink(n);return ot(r,"argument-error"),o0._fromEmailAndCode(e,r.code,r.tenantId)}}sf.PROVIDER_ID="password";sf.EMAIL_PASSWORD_SIGN_IN_METHOD="password";sf.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zR{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P0 extends zR{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gl extends P0{constructor(){super("facebook.com")}static credential(e){return Gc._fromParams({providerId:gl.PROVIDER_ID,signInMethod:gl.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return gl.credentialFromTaggedObject(e)}static credentialFromError(e){return gl.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return gl.credential(e.oauthAccessToken)}catch{return null}}}gl.FACEBOOK_SIGN_IN_METHOD="facebook.com";gl.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ml extends P0{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Gc._fromParams({providerId:ml.PROVIDER_ID,signInMethod:ml.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return ml.credentialFromTaggedObject(e)}static credentialFromError(e){return ml.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return ml.credential(n,r)}catch{return null}}}ml.GOOGLE_SIGN_IN_METHOD="google.com";ml.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yl extends P0{constructor(){super("github.com")}static credential(e){return Gc._fromParams({providerId:yl.PROVIDER_ID,signInMethod:yl.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return yl.credentialFromTaggedObject(e)}static credentialFromError(e){return yl.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return yl.credential(e.oauthAccessToken)}catch{return null}}}yl.GITHUB_SIGN_IN_METHOD="github.com";yl.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vl extends P0{constructor(){super("twitter.com")}static credential(e,n){return Gc._fromParams({providerId:vl.PROVIDER_ID,signInMethod:vl.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return vl.credentialFromTaggedObject(e)}static credentialFromError(e){return vl.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return vl.credential(n,r)}catch{return null}}}vl.TWITTER_SIGN_IN_METHOD="twitter.com";vl.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function j7(t,e){return M0(t,"POST","/v1/accounts:signUp",Ll(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wc{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const a=await Ha._fromIdTokenResponse(e,r,i),s=eC(r);return new Wc({user:a,providerId:s,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=eC(r);return new Wc({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function eC(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _m extends Io{constructor(e,n,r,i){var a;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,_m.prototype),this.customData={appName:e.name,tenantId:(a=e.tenantId)!==null&&a!==void 0?a:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new _m(e,n,r,i)}}function $R(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?_m._fromErrorAndOperation(t,a,e,r):a})}async function U7(t,e,n=!1){const r=await s0(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Wc._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function H7(t,e,n=!1){const{auth:r}=t;if(ma(r.app))return Promise.reject(ho(r));const i="reauthenticate";try{const a=await s0(t,$R(r,i,e,t),n);ot(a.idToken,r,"internal-error");const s=Zw(a.idToken);ot(s,r,"internal-error");const{sub:o}=s;return ot(t.uid===o,r,"user-mismatch"),Wc._forOperation(t,i,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&Ya(r,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GR(t,e,n=!1){if(ma(t.app))return Promise.reject(ho(t));const r="signIn",i=await $R(t,r,e),a=await Wc._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(a.user),a}async function z7(t,e){return GR(eu(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WR(t){const e=eu(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function $7(t,e,n){if(ma(t.app))return Promise.reject(ho(t));const r=eu(t),s=await N2(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",j7).catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&WR(t),c}),o=await Wc._fromIdTokenResponse(r,"signIn",s);return await r._updateCurrentUser(o.user),o}function G7(t,e,n){return ma(t.app)?Promise.reject(ho(t)):z7(gr(t),sf.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&WR(t),r})}function W7(t,e,n,r){return gr(t).onIdTokenChanged(e,n,r)}function Y7(t,e,n){return gr(t).beforeAuthStateChanged(e,n)}function q7(t,e,n,r){return gr(t).onAuthStateChanged(e,n,r)}const bm="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YR{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(bm,"1"),this.storage.removeItem(bm),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X7=1e3,K7=10;class qR extends YR{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=FR(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((s,o,c)=>{this.notifyListeners(s,c)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const s=this.storage.getItem(r);!n&&this.localCache[r]===s||this.notifyListeners(r,s)},a=this.storage.getItem(r);p7()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,K7):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},X7)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}qR.type="LOCAL";const Q7=qR;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XR extends YR{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}XR.type="SESSION";const KR=XR;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z7(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A1{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new A1(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:a}=n.data,s=this.handlersMap[i];if(!(s!=null&&s.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const o=Array.from(s).map(async d=>d(n.origin,a)),c=await Z7(o);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}A1.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n_(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J7{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let a,s;return new Promise((o,c)=>{const d=n_("",20);i.port1.start();const f=setTimeout(()=>{c(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(p){const g=p;if(g.data.eventId===d)switch(g.data.status){case"ack":clearTimeout(f),a=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),o(g.data.response);break;default:clearTimeout(f),clearTimeout(a),c(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:d,data:n},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function As(){return window}function eL(t){As().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QR(){return typeof As().WorkerGlobalScope<"u"&&typeof As().importScripts=="function"}async function tL(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function nL(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function rL(){return QR()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZR="firebaseLocalStorageDb",iL=1,Am="firebaseLocalStorage",JR="fbase_key";class k0{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function E1(t,e){return t.transaction([Am],e?"readwrite":"readonly").objectStore(Am)}function aL(){const t=indexedDB.deleteDatabase(ZR);return new k0(t).toPromise()}function L2(){const t=indexedDB.open(ZR,iL);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Am,{keyPath:JR})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Am)?e(r):(r.close(),await aL(),e(await L2()))})})}async function tC(t,e,n){const r=E1(t,!0).put({[JR]:e,value:n});return new k0(r).toPromise()}async function sL(t,e){const n=E1(t,!1).get(e),r=await new k0(n).toPromise();return r===void 0?null:r.value}function nC(t,e){const n=E1(t,!0).delete(e);return new k0(n).toPromise()}const oL=800,lL=3;class eO{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await L2(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>lL)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return QR()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=A1._getInstance(rL()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await tL(),!this.activeServiceWorker)return;this.sender=new J7(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||nL()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await L2();return await tC(e,bm,"1"),await nC(e,bm),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>tC(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>sL(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>nC(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const a=E1(i,!1).getAll();return new k0(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:a}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(a)&&(this.notifyListeners(i,a),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),oL)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}eO.type="LOCAL";const cL=eO;new O0(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uL(t,e){return e?oo(e):(ot(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r_ extends e_{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Id(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Id(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Id(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function dL(t){return GR(t.auth,new r_(t),t.bypassAuthState)}function fL(t){const{auth:e,user:n}=t;return ot(n,e,"internal-error"),H7(n,new r_(t),t.bypassAuthState)}async function hL(t){const{auth:e,user:n}=t;return ot(n,e,"internal-error"),U7(n,new r_(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tO{constructor(e,n,r,i,a=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:a,error:s,type:o}=e;if(s){this.reject(s);return}const c={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(c))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return dL;case"linkViaPopup":case"linkViaRedirect":return hL;case"reauthViaPopup":case"reauthViaRedirect":return fL;default:Ya(this.auth,"internal-error")}}resolve(e){vo(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){vo(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pL=new O0(2e3,1e4);class md extends tO{constructor(e,n,r,i,a){super(e,n,i,a),this.provider=r,this.authWindow=null,this.pollId=null,md.currentPopupAction&&md.currentPopupAction.cancel(),md.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ot(e,this.auth,"internal-error"),e}async onExecution(){vo(this.filter.length===1,"Popup operations only handle one event");const e=n_();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(bs(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(bs(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,md.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(bs(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,pL.get())};e()}}md.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gL="pendingRedirect",rm=new Map;class mL extends tO{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=rm.get(this.auth._key());if(!e){try{const r=await yL(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}rm.set(this.auth._key(),e)}return this.bypassAuthState||rm.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function yL(t,e){const n=wL(e),r=xL(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function vL(t,e){rm.set(t._key(),e)}function xL(t){return oo(t._redirectPersistence)}function wL(t){return nm(gL,t.config.apiKey,t.name)}async function _L(t,e,n=!1){if(ma(t.app))return Promise.reject(ho(t));const r=eu(t),i=uL(r,e),s=await new mL(r,i,n).execute();return s&&!n&&(delete s.user._redirectEventId,await r._persistUserIfCurrent(s.user),await r._setRedirectUser(null,e)),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bL=600*1e3;class AL{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!EL(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!nO(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(bs(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=bL&&this.cachedEventUids.clear(),this.cachedEventUids.has(rC(e))}saveEventToCache(e){this.cachedEventUids.add(rC(e)),this.lastProcessedEventTime=Date.now()}}function rC(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function nO({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function EL(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return nO(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SL(t,e={}){return Bl(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TL=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,CL=/^https?/;async function IL(t){if(t.config.emulator)return;const{authorizedDomains:e}=await SL(t);for(const n of e)try{if(DL(n))return}catch{}Ya(t,"unauthorized-domain")}function DL(t){const e=P2(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const s=new URL(t);return s.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&s.hostname===r}if(!CL.test(n))return!1;if(TL.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RL=new O0(3e4,6e4);function iC(){const t=As().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function OL(t){return new Promise((e,n)=>{var r,i,a;function s(){iC(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{iC(),n(bs(t,"network-request-failed"))},timeout:RL.get()})}if(!((i=(r=As().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((a=As().gapi)===null||a===void 0)&&a.load)s();else{const o=A7("iframefcb");return As()[o]=()=>{gapi.load?s():n(bs(t,"network-request-failed"))},jR(`${b7()}?onload=${o}`).catch(c=>n(c))}}).catch(e=>{throw im=null,e})}let im=null;function ML(t){return im=im||OL(t),im}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PL=new O0(5e3,15e3),kL="__/auth/iframe",NL="emulator/auth/iframe",LL={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},BL=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function FL(t){const e=t.config;ot(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Qw(e,NL):`https://${t.config.authDomain}/${kL}`,r={apiKey:e.apiKey,appName:t.name,v:af},i=BL.get(t.config.apiHost);i&&(r.eid=i);const a=t._getFrameworks();return a.length&&(r.fw=a.join(",")),`${n}?${R0(r).slice(1)}`}async function VL(t){const e=await ML(t),n=As().gapi;return ot(n,t,"internal-error"),e.open({where:document.body,url:FL(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:LL,dontclear:!0},r=>new Promise(async(i,a)=>{await r.restyle({setHideOnLeave:!1});const s=bs(t,"network-request-failed"),o=As().setTimeout(()=>{a(s)},PL.get());function c(){As().clearTimeout(o),i(r)}r.ping(c).then(c,()=>{a(s)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jL={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},UL=500,HL=600,zL="_blank",$L="http://localhost";class aC{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function GL(t,e,n,r=UL,i=HL){const a=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString();let o="";const c=Object.assign(Object.assign({},jL),{width:r.toString(),height:i.toString(),top:a,left:s}),d=pi().toLowerCase();n&&(o=PR(d)?zL:n),OR(d)&&(e=e||$L,c.scrollbars="yes");const f=Object.entries(c).reduce((g,[y,x])=>`${g}${y}=${x},`,"");if(h7(d)&&o!=="_self")return WL(e||"",o),new aC(null);const p=window.open(e||"",o,f);ot(p,t,"popup-blocked");try{p.focus()}catch{}return new aC(p)}function WL(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YL="__/auth/handler",qL="emulator/auth/handler",XL=encodeURIComponent("fac");async function sC(t,e,n,r,i,a){ot(t.config.authDomain,t,"auth-domain-config-required"),ot(t.config.apiKey,t,"invalid-api-key");const s={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:af,eventId:i};if(e instanceof zR){e.setDefaultLanguage(t.languageCode),s.providerId=e.providerId||"",N5(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(const[f,p]of Object.entries({}))s[f]=p}if(e instanceof P0){const f=e.getScopes().filter(p=>p!=="");f.length>0&&(s.scopes=f.join(","))}t.tenantId&&(s.tid=t.tenantId);const o=s;for(const f of Object.keys(o))o[f]===void 0&&delete o[f];const c=await t._getAppCheckToken(),d=c?`#${XL}=${encodeURIComponent(c)}`:"";return`${KL(t)}?${R0(o).slice(1)}${d}`}function KL({config:t}){return t.emulator?Qw(t,qL):`https://${t.authDomain}/${YL}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mx="webStorageSupport";class QL{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=KR,this._completeRedirectFn=_L,this._overrideRedirectResult=vL}async _openPopup(e,n,r,i){var a;vo((a=this.eventManagers[e._key()])===null||a===void 0?void 0:a.manager,"_initialize() not called before _openPopup()");const s=await sC(e,n,r,P2(),i);return GL(e,s,n_())}async _openRedirect(e,n,r,i){await this._originValidation(e);const a=await sC(e,n,r,P2(),i);return eL(a),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:a}=this.eventManagers[n];return i?Promise.resolve(i):(vo(a,"If manager is not set, promise should be"),a)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await VL(e),r=new AL(e);return n.register("authEvent",i=>(ot(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Mx,{type:Mx},i=>{var a;const s=(a=i==null?void 0:i[0])===null||a===void 0?void 0:a[Mx];s!==void 0&&n(!!s),Ya(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=IL(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return FR()||MR()||Jw()}}const ZL=QL;var oC="@firebase/auth",lC="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JL{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ot(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eB(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function tB(t){Fd(new $c("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:s,authDomain:o}=r.options;ot(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:s,authDomain:o,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:VR(t)},d=new x7(r,i,a,c);return D7(d,n),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Fd(new $c("auth-internal",e=>{const n=eu(e.getProvider("auth").getImmediate());return(r=>new JL(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Al(oC,lC,eB(t)),Al(oC,lC,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nB=300,rB=pR("authIdTokenMaxAge")||nB;let cC=null;const iB=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>rB)return;const i=n==null?void 0:n.token;cC!==i&&(cC=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function aB(t=wR()){const e=qw(t,"auth");if(e.isInitialized())return e.getImmediate();const n=I7(t,{popupRedirectResolver:ZL,persistence:[cL,Q7,KR]}),r=pR("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(r,location.origin);if(location.origin===a.origin){const s=iB(a.toString());Y7(n,s,()=>s(n.currentUser)),W7(n,o=>s(o))}}const i=fR("auth");return i&&R7(n,`http://${i}`),n}function sB(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}w7({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const a=bs("internal-error");a.customData=i,n(a)},r.type="text/javascript",r.charset="UTF-8",sB().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});tB("Browser");var oB="firebase",lB="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Al(oB,lB,"app");var uC=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var El,rO;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(O,I){function R(){}R.prototype=I.prototype,O.D=I.prototype,O.prototype=new R,O.prototype.constructor=O,O.C=function(V,L,P){for(var F=Array(arguments.length-2),q=2;q<arguments.length;q++)F[q-2]=arguments[q];return I.prototype[L].apply(V,F)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(O,I,R){R||(R=0);var V=Array(16);if(typeof I=="string")for(var L=0;16>L;++L)V[L]=I.charCodeAt(R++)|I.charCodeAt(R++)<<8|I.charCodeAt(R++)<<16|I.charCodeAt(R++)<<24;else for(L=0;16>L;++L)V[L]=I[R++]|I[R++]<<8|I[R++]<<16|I[R++]<<24;I=O.g[0],R=O.g[1],L=O.g[2];var P=O.g[3],F=I+(P^R&(L^P))+V[0]+3614090360&4294967295;I=R+(F<<7&4294967295|F>>>25),F=P+(L^I&(R^L))+V[1]+3905402710&4294967295,P=I+(F<<12&4294967295|F>>>20),F=L+(R^P&(I^R))+V[2]+606105819&4294967295,L=P+(F<<17&4294967295|F>>>15),F=R+(I^L&(P^I))+V[3]+3250441966&4294967295,R=L+(F<<22&4294967295|F>>>10),F=I+(P^R&(L^P))+V[4]+4118548399&4294967295,I=R+(F<<7&4294967295|F>>>25),F=P+(L^I&(R^L))+V[5]+1200080426&4294967295,P=I+(F<<12&4294967295|F>>>20),F=L+(R^P&(I^R))+V[6]+2821735955&4294967295,L=P+(F<<17&4294967295|F>>>15),F=R+(I^L&(P^I))+V[7]+4249261313&4294967295,R=L+(F<<22&4294967295|F>>>10),F=I+(P^R&(L^P))+V[8]+1770035416&4294967295,I=R+(F<<7&4294967295|F>>>25),F=P+(L^I&(R^L))+V[9]+2336552879&4294967295,P=I+(F<<12&4294967295|F>>>20),F=L+(R^P&(I^R))+V[10]+4294925233&4294967295,L=P+(F<<17&4294967295|F>>>15),F=R+(I^L&(P^I))+V[11]+2304563134&4294967295,R=L+(F<<22&4294967295|F>>>10),F=I+(P^R&(L^P))+V[12]+1804603682&4294967295,I=R+(F<<7&4294967295|F>>>25),F=P+(L^I&(R^L))+V[13]+4254626195&4294967295,P=I+(F<<12&4294967295|F>>>20),F=L+(R^P&(I^R))+V[14]+2792965006&4294967295,L=P+(F<<17&4294967295|F>>>15),F=R+(I^L&(P^I))+V[15]+1236535329&4294967295,R=L+(F<<22&4294967295|F>>>10),F=I+(L^P&(R^L))+V[1]+4129170786&4294967295,I=R+(F<<5&4294967295|F>>>27),F=P+(R^L&(I^R))+V[6]+3225465664&4294967295,P=I+(F<<9&4294967295|F>>>23),F=L+(I^R&(P^I))+V[11]+643717713&4294967295,L=P+(F<<14&4294967295|F>>>18),F=R+(P^I&(L^P))+V[0]+3921069994&4294967295,R=L+(F<<20&4294967295|F>>>12),F=I+(L^P&(R^L))+V[5]+3593408605&4294967295,I=R+(F<<5&4294967295|F>>>27),F=P+(R^L&(I^R))+V[10]+38016083&4294967295,P=I+(F<<9&4294967295|F>>>23),F=L+(I^R&(P^I))+V[15]+3634488961&4294967295,L=P+(F<<14&4294967295|F>>>18),F=R+(P^I&(L^P))+V[4]+3889429448&4294967295,R=L+(F<<20&4294967295|F>>>12),F=I+(L^P&(R^L))+V[9]+568446438&4294967295,I=R+(F<<5&4294967295|F>>>27),F=P+(R^L&(I^R))+V[14]+3275163606&4294967295,P=I+(F<<9&4294967295|F>>>23),F=L+(I^R&(P^I))+V[3]+4107603335&4294967295,L=P+(F<<14&4294967295|F>>>18),F=R+(P^I&(L^P))+V[8]+1163531501&4294967295,R=L+(F<<20&4294967295|F>>>12),F=I+(L^P&(R^L))+V[13]+2850285829&4294967295,I=R+(F<<5&4294967295|F>>>27),F=P+(R^L&(I^R))+V[2]+4243563512&4294967295,P=I+(F<<9&4294967295|F>>>23),F=L+(I^R&(P^I))+V[7]+1735328473&4294967295,L=P+(F<<14&4294967295|F>>>18),F=R+(P^I&(L^P))+V[12]+2368359562&4294967295,R=L+(F<<20&4294967295|F>>>12),F=I+(R^L^P)+V[5]+4294588738&4294967295,I=R+(F<<4&4294967295|F>>>28),F=P+(I^R^L)+V[8]+2272392833&4294967295,P=I+(F<<11&4294967295|F>>>21),F=L+(P^I^R)+V[11]+1839030562&4294967295,L=P+(F<<16&4294967295|F>>>16),F=R+(L^P^I)+V[14]+4259657740&4294967295,R=L+(F<<23&4294967295|F>>>9),F=I+(R^L^P)+V[1]+2763975236&4294967295,I=R+(F<<4&4294967295|F>>>28),F=P+(I^R^L)+V[4]+1272893353&4294967295,P=I+(F<<11&4294967295|F>>>21),F=L+(P^I^R)+V[7]+4139469664&4294967295,L=P+(F<<16&4294967295|F>>>16),F=R+(L^P^I)+V[10]+3200236656&4294967295,R=L+(F<<23&4294967295|F>>>9),F=I+(R^L^P)+V[13]+681279174&4294967295,I=R+(F<<4&4294967295|F>>>28),F=P+(I^R^L)+V[0]+3936430074&4294967295,P=I+(F<<11&4294967295|F>>>21),F=L+(P^I^R)+V[3]+3572445317&4294967295,L=P+(F<<16&4294967295|F>>>16),F=R+(L^P^I)+V[6]+76029189&4294967295,R=L+(F<<23&4294967295|F>>>9),F=I+(R^L^P)+V[9]+3654602809&4294967295,I=R+(F<<4&4294967295|F>>>28),F=P+(I^R^L)+V[12]+3873151461&4294967295,P=I+(F<<11&4294967295|F>>>21),F=L+(P^I^R)+V[15]+530742520&4294967295,L=P+(F<<16&4294967295|F>>>16),F=R+(L^P^I)+V[2]+3299628645&4294967295,R=L+(F<<23&4294967295|F>>>9),F=I+(L^(R|~P))+V[0]+4096336452&4294967295,I=R+(F<<6&4294967295|F>>>26),F=P+(R^(I|~L))+V[7]+1126891415&4294967295,P=I+(F<<10&4294967295|F>>>22),F=L+(I^(P|~R))+V[14]+2878612391&4294967295,L=P+(F<<15&4294967295|F>>>17),F=R+(P^(L|~I))+V[5]+4237533241&4294967295,R=L+(F<<21&4294967295|F>>>11),F=I+(L^(R|~P))+V[12]+1700485571&4294967295,I=R+(F<<6&4294967295|F>>>26),F=P+(R^(I|~L))+V[3]+2399980690&4294967295,P=I+(F<<10&4294967295|F>>>22),F=L+(I^(P|~R))+V[10]+4293915773&4294967295,L=P+(F<<15&4294967295|F>>>17),F=R+(P^(L|~I))+V[1]+2240044497&4294967295,R=L+(F<<21&4294967295|F>>>11),F=I+(L^(R|~P))+V[8]+1873313359&4294967295,I=R+(F<<6&4294967295|F>>>26),F=P+(R^(I|~L))+V[15]+4264355552&4294967295,P=I+(F<<10&4294967295|F>>>22),F=L+(I^(P|~R))+V[6]+2734768916&4294967295,L=P+(F<<15&4294967295|F>>>17),F=R+(P^(L|~I))+V[13]+1309151649&4294967295,R=L+(F<<21&4294967295|F>>>11),F=I+(L^(R|~P))+V[4]+4149444226&4294967295,I=R+(F<<6&4294967295|F>>>26),F=P+(R^(I|~L))+V[11]+3174756917&4294967295,P=I+(F<<10&4294967295|F>>>22),F=L+(I^(P|~R))+V[2]+718787259&4294967295,L=P+(F<<15&4294967295|F>>>17),F=R+(P^(L|~I))+V[9]+3951481745&4294967295,O.g[0]=O.g[0]+I&4294967295,O.g[1]=O.g[1]+(L+(F<<21&4294967295|F>>>11))&4294967295,O.g[2]=O.g[2]+L&4294967295,O.g[3]=O.g[3]+P&4294967295}r.prototype.u=function(O,I){I===void 0&&(I=O.length);for(var R=I-this.blockSize,V=this.B,L=this.h,P=0;P<I;){if(L==0)for(;P<=R;)i(this,O,P),P+=this.blockSize;if(typeof O=="string"){for(;P<I;)if(V[L++]=O.charCodeAt(P++),L==this.blockSize){i(this,V),L=0;break}}else for(;P<I;)if(V[L++]=O[P++],L==this.blockSize){i(this,V),L=0;break}}this.h=L,this.o+=I},r.prototype.v=function(){var O=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);O[0]=128;for(var I=1;I<O.length-8;++I)O[I]=0;var R=8*this.o;for(I=O.length-8;I<O.length;++I)O[I]=R&255,R/=256;for(this.u(O),O=Array(16),I=R=0;4>I;++I)for(var V=0;32>V;V+=8)O[R++]=this.g[I]>>>V&255;return O};function a(O,I){var R=o;return Object.prototype.hasOwnProperty.call(R,O)?R[O]:R[O]=I(O)}function s(O,I){this.h=I;for(var R=[],V=!0,L=O.length-1;0<=L;L--){var P=O[L]|0;V&&P==I||(R[L]=P,V=!1)}this.g=R}var o={};function c(O){return-128<=O&&128>O?a(O,function(I){return new s([I|0],0>I?-1:0)}):new s([O|0],0>O?-1:0)}function d(O){if(isNaN(O)||!isFinite(O))return p;if(0>O)return A(d(-O));for(var I=[],R=1,V=0;O>=R;V++)I[V]=O/R|0,R*=4294967296;return new s(I,0)}function f(O,I){if(O.length==0)throw Error("number format error: empty string");if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(O.charAt(0)=="-")return A(f(O.substring(1),I));if(0<=O.indexOf("-"))throw Error('number format error: interior "-" character');for(var R=d(Math.pow(I,8)),V=p,L=0;L<O.length;L+=8){var P=Math.min(8,O.length-L),F=parseInt(O.substring(L,L+P),I);8>P?(P=d(Math.pow(I,P)),V=V.j(P).add(d(F))):(V=V.j(R),V=V.add(d(F)))}return V}var p=c(0),g=c(1),y=c(16777216);t=s.prototype,t.m=function(){if(_(this))return-A(this).m();for(var O=0,I=1,R=0;R<this.g.length;R++){var V=this.i(R);O+=(0<=V?V:4294967296+V)*I,I*=4294967296}return O},t.toString=function(O){if(O=O||10,2>O||36<O)throw Error("radix out of range: "+O);if(x(this))return"0";if(_(this))return"-"+A(this).toString(O);for(var I=d(Math.pow(O,6)),R=this,V="";;){var L=D(R,I).g;R=E(R,L.j(I));var P=((0<R.g.length?R.g[0]:R.h)>>>0).toString(O);if(R=L,x(R))return P+V;for(;6>P.length;)P="0"+P;V=P+V}},t.i=function(O){return 0>O?0:O<this.g.length?this.g[O]:this.h};function x(O){if(O.h!=0)return!1;for(var I=0;I<O.g.length;I++)if(O.g[I]!=0)return!1;return!0}function _(O){return O.h==-1}t.l=function(O){return O=E(this,O),_(O)?-1:x(O)?0:1};function A(O){for(var I=O.g.length,R=[],V=0;V<I;V++)R[V]=~O.g[V];return new s(R,~O.h).add(g)}t.abs=function(){return _(this)?A(this):this},t.add=function(O){for(var I=Math.max(this.g.length,O.g.length),R=[],V=0,L=0;L<=I;L++){var P=V+(this.i(L)&65535)+(O.i(L)&65535),F=(P>>>16)+(this.i(L)>>>16)+(O.i(L)>>>16);V=F>>>16,P&=65535,F&=65535,R[L]=F<<16|P}return new s(R,R[R.length-1]&-2147483648?-1:0)};function E(O,I){return O.add(A(I))}t.j=function(O){if(x(this)||x(O))return p;if(_(this))return _(O)?A(this).j(A(O)):A(A(this).j(O));if(_(O))return A(this.j(A(O)));if(0>this.l(y)&&0>O.l(y))return d(this.m()*O.m());for(var I=this.g.length+O.g.length,R=[],V=0;V<2*I;V++)R[V]=0;for(V=0;V<this.g.length;V++)for(var L=0;L<O.g.length;L++){var P=this.i(V)>>>16,F=this.i(V)&65535,q=O.i(L)>>>16,X=O.i(L)&65535;R[2*V+2*L]+=F*X,T(R,2*V+2*L),R[2*V+2*L+1]+=P*X,T(R,2*V+2*L+1),R[2*V+2*L+1]+=F*q,T(R,2*V+2*L+1),R[2*V+2*L+2]+=P*q,T(R,2*V+2*L+2)}for(V=0;V<I;V++)R[V]=R[2*V+1]<<16|R[2*V];for(V=I;V<2*I;V++)R[V]=0;return new s(R,0)};function T(O,I){for(;(O[I]&65535)!=O[I];)O[I+1]+=O[I]>>>16,O[I]&=65535,I++}function C(O,I){this.g=O,this.h=I}function D(O,I){if(x(I))throw Error("division by zero");if(x(O))return new C(p,p);if(_(O))return I=D(A(O),I),new C(A(I.g),A(I.h));if(_(I))return I=D(O,A(I)),new C(A(I.g),I.h);if(30<O.g.length){if(_(O)||_(I))throw Error("slowDivide_ only works with positive integers.");for(var R=g,V=I;0>=V.l(O);)R=k(R),V=k(V);var L=B(R,1),P=B(V,1);for(V=B(V,2),R=B(R,2);!x(V);){var F=P.add(V);0>=F.l(O)&&(L=L.add(R),P=F),V=B(V,1),R=B(R,1)}return I=E(O,L.j(I)),new C(L,I)}for(L=p;0<=O.l(I);){for(R=Math.max(1,Math.floor(O.m()/I.m())),V=Math.ceil(Math.log(R)/Math.LN2),V=48>=V?1:Math.pow(2,V-48),P=d(R),F=P.j(I);_(F)||0<F.l(O);)R-=V,P=d(R),F=P.j(I);x(P)&&(P=g),L=L.add(P),O=E(O,F)}return new C(L,O)}t.A=function(O){return D(this,O).h},t.and=function(O){for(var I=Math.max(this.g.length,O.g.length),R=[],V=0;V<I;V++)R[V]=this.i(V)&O.i(V);return new s(R,this.h&O.h)},t.or=function(O){for(var I=Math.max(this.g.length,O.g.length),R=[],V=0;V<I;V++)R[V]=this.i(V)|O.i(V);return new s(R,this.h|O.h)},t.xor=function(O){for(var I=Math.max(this.g.length,O.g.length),R=[],V=0;V<I;V++)R[V]=this.i(V)^O.i(V);return new s(R,this.h^O.h)};function k(O){for(var I=O.g.length+1,R=[],V=0;V<I;V++)R[V]=O.i(V)<<1|O.i(V-1)>>>31;return new s(R,O.h)}function B(O,I){var R=I>>5;I%=32;for(var V=O.g.length-R,L=[],P=0;P<V;P++)L[P]=0<I?O.i(P+R)>>>I|O.i(P+R+1)<<32-I:O.i(P+R);return new s(L,O.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,rO=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=d,s.fromString=f,El=s}).apply(typeof uC<"u"?uC:typeof self<"u"?self:typeof window<"u"?window:{});var Dg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var iO,Lh,aO,am,B2,sO,oO,lO;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(w,N,j){return w==Array.prototype||w==Object.prototype||(w[N]=j.value),w};function n(w){w=[typeof globalThis=="object"&&globalThis,w,typeof window=="object"&&window,typeof self=="object"&&self,typeof Dg=="object"&&Dg];for(var N=0;N<w.length;++N){var j=w[N];if(j&&j.Math==Math)return j}throw Error("Cannot find global object")}var r=n(this);function i(w,N){if(N)e:{var j=r;w=w.split(".");for(var $=0;$<w.length-1;$++){var se=w[$];if(!(se in j))break e;j=j[se]}w=w[w.length-1],$=j[w],N=N($),N!=$&&N!=null&&e(j,w,{configurable:!0,writable:!0,value:N})}}function a(w,N){w instanceof String&&(w+="");var j=0,$=!1,se={next:function(){if(!$&&j<w.length){var me=j++;return{value:N(me,w[me]),done:!1}}return $=!0,{done:!0,value:void 0}}};return se[Symbol.iterator]=function(){return se},se}i("Array.prototype.values",function(w){return w||function(){return a(this,function(N,j){return j})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var s=s||{},o=this||self;function c(w){var N=typeof w;return N=N!="object"?N:w?Array.isArray(w)?"array":N:"null",N=="array"||N=="object"&&typeof w.length=="number"}function d(w){var N=typeof w;return N=="object"&&w!=null||N=="function"}function f(w,N,j){return w.call.apply(w.bind,arguments)}function p(w,N,j){if(!w)throw Error();if(2<arguments.length){var $=Array.prototype.slice.call(arguments,2);return function(){var se=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(se,$),w.apply(N,se)}}return function(){return w.apply(N,arguments)}}function g(w,N,j){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:p,g.apply(null,arguments)}function y(w,N){var j=Array.prototype.slice.call(arguments,1);return function(){var $=j.slice();return $.push.apply($,arguments),w.apply(this,$)}}function x(w,N){function j(){}j.prototype=N.prototype,w.aa=N.prototype,w.prototype=new j,w.prototype.constructor=w,w.Qb=function($,se,me){for(var Le=Array(arguments.length-2),Nt=2;Nt<arguments.length;Nt++)Le[Nt-2]=arguments[Nt];return N.prototype[se].apply($,Le)}}function _(w){const N=w.length;if(0<N){const j=Array(N);for(let $=0;$<N;$++)j[$]=w[$];return j}return[]}function A(w,N){for(let j=1;j<arguments.length;j++){const $=arguments[j];if(c($)){const se=w.length||0,me=$.length||0;w.length=se+me;for(let Le=0;Le<me;Le++)w[se+Le]=$[Le]}else w.push($)}}class E{constructor(N,j){this.i=N,this.j=j,this.h=0,this.g=null}get(){let N;return 0<this.h?(this.h--,N=this.g,this.g=N.next,N.next=null):N=this.i(),N}}function T(w){return/^[\s\xa0]*$/.test(w)}function C(){var w=o.navigator;return w&&(w=w.userAgent)?w:""}function D(w){return D[" "](w),w}D[" "]=function(){};var k=C().indexOf("Gecko")!=-1&&!(C().toLowerCase().indexOf("webkit")!=-1&&C().indexOf("Edge")==-1)&&!(C().indexOf("Trident")!=-1||C().indexOf("MSIE")!=-1)&&C().indexOf("Edge")==-1;function B(w,N,j){for(const $ in w)N.call(j,w[$],$,w)}function O(w,N){for(const j in w)N.call(void 0,w[j],j,w)}function I(w){const N={};for(const j in w)N[j]=w[j];return N}const R="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function V(w,N){let j,$;for(let se=1;se<arguments.length;se++){$=arguments[se];for(j in $)w[j]=$[j];for(let me=0;me<R.length;me++)j=R[me],Object.prototype.hasOwnProperty.call($,j)&&(w[j]=$[j])}}function L(w){var N=1;w=w.split(":");const j=[];for(;0<N&&w.length;)j.push(w.shift()),N--;return w.length&&j.push(w.join(":")),j}function P(w){o.setTimeout(()=>{throw w},0)}function F(){var w=Z;let N=null;return w.g&&(N=w.g,w.g=w.g.next,w.g||(w.h=null),N.next=null),N}class q{constructor(){this.h=this.g=null}add(N,j){const $=X.get();$.set(N,j),this.h?this.h.next=$:this.g=$,this.h=$}}var X=new E(()=>new W,w=>w.reset());class W{constructor(){this.next=this.g=this.h=null}set(N,j){this.h=N,this.g=j,this.next=null}reset(){this.next=this.g=this.h=null}}let G,Q=!1,Z=new q,de=()=>{const w=o.Promise.resolve(void 0);G=()=>{w.then(ge)}};var ge=()=>{for(var w;w=F();){try{w.h.call(w.g)}catch(j){P(j)}var N=X;N.j(w),100>N.h&&(N.h++,w.next=N.g,N.g=w)}Q=!1};function xe(){this.s=this.s,this.C=this.C}xe.prototype.s=!1,xe.prototype.ma=function(){this.s||(this.s=!0,this.N())},xe.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function be(w,N){this.type=w,this.g=this.target=N,this.defaultPrevented=!1}be.prototype.h=function(){this.defaultPrevented=!0};var ke=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var w=!1,N=Object.defineProperty({},"passive",{get:function(){w=!0}});try{const j=()=>{};o.addEventListener("test",j,N),o.removeEventListener("test",j,N)}catch{}return w}();function he(w,N){if(be.call(this,w?w.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,w){var j=this.type=w.type,$=w.changedTouches&&w.changedTouches.length?w.changedTouches[0]:null;if(this.target=w.target||w.srcElement,this.g=N,N=w.relatedTarget){if(k){e:{try{D(N.nodeName);var se=!0;break e}catch{}se=!1}se||(N=null)}}else j=="mouseover"?N=w.fromElement:j=="mouseout"&&(N=w.toElement);this.relatedTarget=N,$?(this.clientX=$.clientX!==void 0?$.clientX:$.pageX,this.clientY=$.clientY!==void 0?$.clientY:$.pageY,this.screenX=$.screenX||0,this.screenY=$.screenY||0):(this.clientX=w.clientX!==void 0?w.clientX:w.pageX,this.clientY=w.clientY!==void 0?w.clientY:w.pageY,this.screenX=w.screenX||0,this.screenY=w.screenY||0),this.button=w.button,this.key=w.key||"",this.ctrlKey=w.ctrlKey,this.altKey=w.altKey,this.shiftKey=w.shiftKey,this.metaKey=w.metaKey,this.pointerId=w.pointerId||0,this.pointerType=typeof w.pointerType=="string"?w.pointerType:Se[w.pointerType]||"",this.state=w.state,this.i=w,w.defaultPrevented&&he.aa.h.call(this)}}x(he,be);var Se={2:"touch",3:"pen",4:"mouse"};he.prototype.h=function(){he.aa.h.call(this);var w=this.i;w.preventDefault?w.preventDefault():w.returnValue=!1};var Ae="closure_listenable_"+(1e6*Math.random()|0),Fe=0;function ae(w,N,j,$,se){this.listener=w,this.proxy=null,this.src=N,this.type=j,this.capture=!!$,this.ha=se,this.key=++Fe,this.da=this.fa=!1}function ye(w){w.da=!0,w.listener=null,w.proxy=null,w.src=null,w.ha=null}function pe(w){this.src=w,this.g={},this.h=0}pe.prototype.add=function(w,N,j,$,se){var me=w.toString();w=this.g[me],w||(w=this.g[me]=[],this.h++);var Le=Ve(w,N,$,se);return-1<Le?(N=w[Le],j||(N.fa=!1)):(N=new ae(N,this.src,me,!!$,se),N.fa=j,w.push(N)),N};function ie(w,N){var j=N.type;if(j in w.g){var $=w.g[j],se=Array.prototype.indexOf.call($,N,void 0),me;(me=0<=se)&&Array.prototype.splice.call($,se,1),me&&(ye(N),w.g[j].length==0&&(delete w.g[j],w.h--))}}function Ve(w,N,j,$){for(var se=0;se<w.length;++se){var me=w[se];if(!me.da&&me.listener==N&&me.capture==!!j&&me.ha==$)return se}return-1}var we="closure_lm_"+(1e6*Math.random()|0),ze={};function Me(w,N,j,$,se){if(Array.isArray(N)){for(var me=0;me<N.length;me++)Me(w,N[me],j,$,se);return null}return j=On(j),w&&w[Ae]?w.K(N,j,d($)?!!$.capture:!1,se):Re(w,N,j,!1,$,se)}function Re(w,N,j,$,se,me){if(!N)throw Error("Invalid event type");var Le=d(se)?!!se.capture:!!se,Nt=_t(w);if(Nt||(w[we]=Nt=new pe(w)),j=Nt.add(N,j,$,Le,me),j.proxy)return j;if($=Ye(),j.proxy=$,$.src=w,$.listener=j,w.addEventListener)ke||(se=Le),se===void 0&&(se=!1),w.addEventListener(N.toString(),$,se);else if(w.attachEvent)w.attachEvent(Ne(N.toString()),$);else if(w.addListener&&w.removeListener)w.addListener($);else throw Error("addEventListener and attachEvent are unavailable.");return j}function Ye(){function w(j){return N.call(w.src,w.listener,j)}const N=dt;return w}function Ge(w,N,j,$,se){if(Array.isArray(N))for(var me=0;me<N.length;me++)Ge(w,N[me],j,$,se);else $=d($)?!!$.capture:!!$,j=On(j),w&&w[Ae]?(w=w.i,N=String(N).toString(),N in w.g&&(me=w.g[N],j=Ve(me,j,$,se),-1<j&&(ye(me[j]),Array.prototype.splice.call(me,j,1),me.length==0&&(delete w.g[N],w.h--)))):w&&(w=_t(w))&&(N=w.g[N.toString()],w=-1,N&&(w=Ve(N,j,$,se)),(j=-1<w?N[w]:null)&&Oe(j))}function Oe(w){if(typeof w!="number"&&w&&!w.da){var N=w.src;if(N&&N[Ae])ie(N.i,w);else{var j=w.type,$=w.proxy;N.removeEventListener?N.removeEventListener(j,$,w.capture):N.detachEvent?N.detachEvent(Ne(j),$):N.addListener&&N.removeListener&&N.removeListener($),(j=_t(N))?(ie(j,w),j.h==0&&(j.src=null,N[we]=null)):ye(w)}}}function Ne(w){return w in ze?ze[w]:ze[w]="on"+w}function dt(w,N){if(w.da)w=!0;else{N=new he(N,this);var j=w.listener,$=w.ha||w.src;w.fa&&Oe(w),w=j.call($,N)}return w}function _t(w){return w=w[we],w instanceof pe?w:null}var yn="__closure_events_fn_"+(1e9*Math.random()>>>0);function On(w){return typeof w=="function"?w:(w[yn]||(w[yn]=function(N){return w.handleEvent(N)}),w[yn])}function nt(){xe.call(this),this.i=new pe(this),this.M=this,this.F=null}x(nt,xe),nt.prototype[Ae]=!0,nt.prototype.removeEventListener=function(w,N,j,$){Ge(this,w,N,j,$)};function it(w,N){var j,$=w.F;if($)for(j=[];$;$=$.F)j.push($);if(w=w.M,$=N.type||N,typeof N=="string")N=new be(N,w);else if(N instanceof be)N.target=N.target||w;else{var se=N;N=new be($,w),V(N,se)}if(se=!0,j)for(var me=j.length-1;0<=me;me--){var Le=N.g=j[me];se=Tn(Le,$,!0,N)&&se}if(Le=N.g=w,se=Tn(Le,$,!0,N)&&se,se=Tn(Le,$,!1,N)&&se,j)for(me=0;me<j.length;me++)Le=N.g=j[me],se=Tn(Le,$,!1,N)&&se}nt.prototype.N=function(){if(nt.aa.N.call(this),this.i){var w=this.i,N;for(N in w.g){for(var j=w.g[N],$=0;$<j.length;$++)ye(j[$]);delete w.g[N],w.h--}}this.F=null},nt.prototype.K=function(w,N,j,$){return this.i.add(String(w),N,!1,j,$)},nt.prototype.L=function(w,N,j,$){return this.i.add(String(w),N,!0,j,$)};function Tn(w,N,j,$){if(N=w.i.g[String(N)],!N)return!0;N=N.concat();for(var se=!0,me=0;me<N.length;++me){var Le=N[me];if(Le&&!Le.da&&Le.capture==j){var Nt=Le.listener,yr=Le.ha||Le.src;Le.fa&&ie(w.i,Le),se=Nt.call(yr,$)!==!1&&se}}return se&&!$.defaultPrevented}function Qe(w,N,j){if(typeof w=="function")j&&(w=g(w,j));else if(w&&typeof w.handleEvent=="function")w=g(w.handleEvent,w);else throw Error("Invalid listener argument");return 2147483647<Number(N)?-1:o.setTimeout(w,N||0)}function pt(w){w.g=Qe(()=>{w.g=null,w.i&&(w.i=!1,pt(w))},w.l);const N=w.h;w.h=null,w.m.apply(null,N)}class kt extends xe{constructor(N,j){super(),this.m=N,this.l=j,this.h=null,this.i=!1,this.g=null}j(N){this.h=arguments,this.g?this.i=!0:pt(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Jt(w){xe.call(this),this.h=w,this.g={}}x(Jt,xe);var An=[];function Cn(w){B(w.g,function(N,j){this.g.hasOwnProperty(j)&&Oe(N)},w),w.g={}}Jt.prototype.N=function(){Jt.aa.N.call(this),Cn(this)},Jt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Yt=o.JSON.stringify,zr=o.JSON.parse,gt=class{stringify(w){return o.JSON.stringify(w,void 0)}parse(w){return o.JSON.parse(w,void 0)}};function Fn(){}Fn.prototype.h=null;function qn(w){return w.h||(w.h=w.i())}function $r(){}var mi={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ir(){be.call(this,"d")}x(ir,be);function zl(){be.call(this,"c")}x(zl,be);var ea={},du=null;function Ls(){return du=du||new nt}ea.La="serverreachability";function vn(w){be.call(this,ea.La,w)}x(vn,be);function ar(w){const N=Ls();it(N,new vn(N))}ea.STAT_EVENT="statevent";function $l(w,N){be.call(this,ea.STAT_EVENT,w),this.stat=N}x($l,be);function Mn(w){const N=Ls();it(N,new $l(N,w))}ea.Ma="timingevent";function mr(w,N){be.call(this,ea.Ma,w),this.size=N}x(mr,be);function sr(w,N){if(typeof w!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){w()},N)}function ta(){this.g=!0}ta.prototype.xa=function(){this.g=!1};function vf(w,N,j,$,se,me){w.info(function(){if(w.g)if(me)for(var Le="",Nt=me.split("&"),yr=0;yr<Nt.length;yr++){var Lt=Nt[yr].split("=");if(1<Lt.length){var Mr=Lt[0];Lt=Lt[1];var vr=Mr.split("_");Le=2<=vr.length&&vr[1]=="type"?Le+(Mr+"="+Lt+"&"):Le+(Mr+"=redacted&")}}else Le=null;else Le=me;return"XMLHTTP REQ ("+$+") [attempt "+se+"]: "+N+`
`+j+`
`+Le})}function Sy(w,N,j,$,se,me,Le){w.info(function(){return"XMLHTTP RESP ("+$+") [ attempt "+se+"]: "+N+`
`+j+`
`+me+" "+Le})}function Po(w,N,j,$){w.info(function(){return"XMLHTTP TEXT ("+N+"): "+Gl(w,j)+($?" "+$:"")})}function sp(w,N){w.info(function(){return"TIMEOUT: "+N})}ta.prototype.info=function(){};function Gl(w,N){if(!w.g)return N;if(!N)return null;try{var j=JSON.parse(N);if(j){for(w=0;w<j.length;w++)if(Array.isArray(j[w])){var $=j[w];if(!(2>$.length)){var se=$[1];if(Array.isArray(se)&&!(1>se.length)){var me=se[0];if(me!="noop"&&me!="stop"&&me!="close")for(var Le=1;Le<se.length;Le++)se[Le]=""}}}}return Yt(j)}catch{return N}}var ko={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Bs={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Za;function Ja(){}x(Ja,Fn),Ja.prototype.g=function(){return new XMLHttpRequest},Ja.prototype.i=function(){return{}},Za=new Ja;function yi(w,N,j,$){this.j=w,this.i=N,this.l=j,this.R=$||1,this.U=new Jt(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Xn}function Xn(){this.i=null,this.g="",this.h=!1}var xf={},fu={};function Ca(w,N,j){w.L=1,w.v=Kl(ji(N)),w.m=j,w.P=!0,Fs(w,null)}function Fs(w,N){w.F=Date.now(),Wl(w),w.A=ji(w.v);var j=w.A,$=w.R;Array.isArray($)||($=[String($)]),Sf(j.i,"t",$),w.C=0,j=w.j.J,w.h=new Xn,w.g=bp(w.j,j?N:null,!w.m),0<w.O&&(w.M=new kt(g(w.Y,w,w.g),w.O)),N=w.U,j=w.g,$=w.ca;var se="readystatechange";Array.isArray(se)||(se&&(An[0]=se.toString()),se=An);for(var me=0;me<se.length;me++){var Le=Me(j,se[me],$||N.handleEvent,!1,N.h||N);if(!Le)break;N.g[Le.key]=Le}N=w.H?I(w.H):{},w.m?(w.u||(w.u="POST"),N["Content-Type"]="application/x-www-form-urlencoded",w.g.ea(w.A,w.u,w.m,N)):(w.u="GET",w.g.ea(w.A,w.u,null,N)),ar(),vf(w.i,w.u,w.A,w.l,w.R,w.m)}yi.prototype.ca=function(w){w=w.target;const N=this.M;N&&aa(w)==3?N.j():this.Y(w)},yi.prototype.Y=function(w){try{if(w==this.g)e:{const vr=aa(this.g);var N=this.g.Ba();const Ws=this.g.Z();if(!(3>vr)&&(vr!=3||this.g&&(this.h.h||this.g.oa()||pp(this.g)))){this.J||vr!=4||N==7||(N==8||0>=Ws?ar(3):ar(2)),No(this);var j=this.g.Z();this.X=j;t:if(op(this)){var $=pp(this.g);w="";var se=$.length,me=aa(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Gr(this),es(this);var Le="";break t}this.h.i=new o.TextDecoder}for(N=0;N<se;N++)this.h.h=!0,w+=this.h.i.decode($[N],{stream:!(me&&N==se-1)});$.length=0,this.h.g+=w,this.C=0,Le=this.h.g}else Le=this.g.oa();if(this.o=j==200,Sy(this.i,this.u,this.A,this.l,this.R,vr,j),this.o){if(this.T&&!this.K){t:{if(this.g){var Nt,yr=this.g;if((Nt=yr.g?yr.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!T(Nt)){var Lt=Nt;break t}}Lt=null}if(j=Lt)Po(this.i,this.l,j,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Yl(this,j);else{this.o=!1,this.s=3,Mn(12),Gr(this),es(this);break e}}if(this.P){j=!0;let Wr;for(;!this.J&&this.C<Le.length;)if(Wr=lp(this,Le),Wr==fu){vr==4&&(this.s=4,Mn(14),j=!1),Po(this.i,this.l,null,"[Incomplete Response]");break}else if(Wr==xf){this.s=4,Mn(15),Po(this.i,this.l,Le,"[Invalid Chunk]"),j=!1;break}else Po(this.i,this.l,Wr,null),Yl(this,Wr);if(op(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),vr!=4||Le.length!=0||this.h.h||(this.s=1,Mn(16),j=!1),this.o=this.o&&j,!j)Po(this.i,this.l,Le,"[Invalid Chunked Response]"),Gr(this),es(this);else if(0<Le.length&&!this.W){this.W=!0;var Mr=this.j;Mr.g==this&&Mr.ba&&!Mr.M&&(Mr.j.info("Great, no buffering proxy detected. Bytes received: "+Le.length),ic(Mr),Mr.M=!0,Mn(11))}}else Po(this.i,this.l,Le,null),Yl(this,Le);vr==4&&Gr(this),this.o&&!this.J&&(vr==4?xp(this.j,this):(this.o=!1,Wl(this)))}else Ry(this.g),j==400&&0<Le.indexOf("Unknown SID")?(this.s=3,Mn(12)):(this.s=0,Mn(13)),Gr(this),es(this)}}}catch{}finally{}};function op(w){return w.g?w.u=="GET"&&w.L!=2&&w.j.Ca:!1}function lp(w,N){var j=w.C,$=N.indexOf(`
`,j);return $==-1?fu:(j=Number(N.substring(j,$)),isNaN(j)?xf:($+=1,$+j>N.length?fu:(N=N.slice($,$+j),w.C=$+j,N)))}yi.prototype.cancel=function(){this.J=!0,Gr(this)};function Wl(w){w.S=Date.now()+w.I,cp(w,w.I)}function cp(w,N){if(w.B!=null)throw Error("WatchDog timer not null");w.B=sr(g(w.ba,w),N)}function No(w){w.B&&(o.clearTimeout(w.B),w.B=null)}yi.prototype.ba=function(){this.B=null;const w=Date.now();0<=w-this.S?(sp(this.i,this.A),this.L!=2&&(ar(),Mn(17)),Gr(this),this.s=2,es(this)):cp(this,this.S-w)};function es(w){w.j.G==0||w.J||xp(w.j,w)}function Gr(w){No(w);var N=w.M;N&&typeof N.ma=="function"&&N.ma(),w.M=null,Cn(w.U),w.g&&(N=w.g,w.g=null,N.abort(),N.ma())}function Yl(w,N){try{var j=w.j;if(j.G!=0&&(j.g==w||wf(j.h,w))){if(!w.K&&wf(j.h,w)&&j.G==3){try{var $=j.Da.g.parse(N)}catch{$=null}if(Array.isArray($)&&$.length==3){var se=$;if(se[0]==0){e:if(!j.u){if(j.g)if(j.g.F+3e3<w.F)Eu(j),bu(j);else break e;Rf(j),Mn(18)}}else j.za=se[1],0<j.za-j.T&&37500>se[2]&&j.F&&j.v==0&&!j.C&&(j.C=sr(g(j.Za,j),6e3));if(1>=pu(j.h)&&j.ca){try{j.ca()}catch{}j.ca=void 0}}else Gs(j,11)}else if((w.K||j.g==w)&&Eu(j),!T(N))for(se=j.Da.g.parse(N),N=0;N<se.length;N++){let Lt=se[N];if(j.T=Lt[0],Lt=Lt[1],j.G==2)if(Lt[0]=="c"){j.K=Lt[1],j.ia=Lt[2];const Mr=Lt[3];Mr!=null&&(j.la=Mr,j.j.info("VER="+j.la));const vr=Lt[4];vr!=null&&(j.Aa=vr,j.j.info("SVER="+j.Aa));const Ws=Lt[5];Ws!=null&&typeof Ws=="number"&&0<Ws&&($=1.5*Ws,j.L=$,j.j.info("backChannelRequestTimeoutMs_="+$)),$=j;const Wr=w.g;if(Wr){const os=Wr.g?Wr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(os){var me=$.h;me.g||os.indexOf("spdy")==-1&&os.indexOf("quic")==-1&&os.indexOf("h2")==-1||(me.j=me.l,me.g=new Set,me.h&&(gu(me,me.h),me.h=null))}if($.D){const Mf=Wr.g?Wr.g.getResponseHeader("X-HTTP-Session-Id"):null;Mf&&($.ya=Mf,cn($.I,$.D,Mf))}}j.G=3,j.l&&j.l.ua(),j.ba&&(j.R=Date.now()-w.F,j.j.info("Handshake RTT: "+j.R+"ms")),$=j;var Le=w;if($.qa=_p($,$.J?$.ia:null,$.W),Le.K){vi($.h,Le);var Nt=Le,yr=$.L;yr&&(Nt.I=yr),Nt.B&&(No(Nt),Wl(Nt)),$.g=Le}else yp($);0<j.i.length&&Au(j)}else Lt[0]!="stop"&&Lt[0]!="close"||Gs(j,7);else j.G==3&&(Lt[0]=="stop"||Lt[0]=="close"?Lt[0]=="stop"?Gs(j,7):If(j):Lt[0]!="noop"&&j.l&&j.l.ta(Lt),j.v=0)}}ar(4)}catch{}}var up=class{constructor(w,N){this.g=w,this.map=N}};function Vs(w){this.l=w||10,o.PerformanceNavigationTiming?(w=o.performance.getEntriesByType("navigation"),w=0<w.length&&(w[0].nextHopProtocol=="hq"||w[0].nextHopProtocol=="h2")):w=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=w?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function hu(w){return w.h?!0:w.g?w.g.size>=w.j:!1}function pu(w){return w.h?1:w.g?w.g.size:0}function wf(w,N){return w.h?w.h==N:w.g?w.g.has(N):!1}function gu(w,N){w.g?w.g.add(N):w.h=N}function vi(w,N){w.h&&w.h==N?w.h=null:w.g&&w.g.has(N)&&w.g.delete(N)}Vs.prototype.cancel=function(){if(this.i=_f(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const w of this.g.values())w.cancel();this.g.clear()}};function _f(w){if(w.h!=null)return w.i.concat(w.h.D);if(w.g!=null&&w.g.size!==0){let N=w.i;for(const j of w.g.values())N=N.concat(j.D);return N}return _(w.i)}function Ty(w){if(w.V&&typeof w.V=="function")return w.V();if(typeof Map<"u"&&w instanceof Map||typeof Set<"u"&&w instanceof Set)return Array.from(w.values());if(typeof w=="string")return w.split("");if(c(w)){for(var N=[],j=w.length,$=0;$<j;$++)N.push(w[$]);return N}N=[],j=0;for($ in w)N[j++]=w[$];return N}function mu(w){if(w.na&&typeof w.na=="function")return w.na();if(!w.V||typeof w.V!="function"){if(typeof Map<"u"&&w instanceof Map)return Array.from(w.keys());if(!(typeof Set<"u"&&w instanceof Set)){if(c(w)||typeof w=="string"){var N=[];w=w.length;for(var j=0;j<w;j++)N.push(j);return N}N=[],j=0;for(const $ in w)N[j++]=$;return N}}}function bf(w,N){if(w.forEach&&typeof w.forEach=="function")w.forEach(N,void 0);else if(c(w)||typeof w=="string")Array.prototype.forEach.call(w,N,void 0);else for(var j=mu(w),$=Ty(w),se=$.length,me=0;me<se;me++)N.call(void 0,$[me],j&&j[me],w)}var ql=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Cy(w,N){if(w){w=w.split("&");for(var j=0;j<w.length;j++){var $=w[j].indexOf("="),se=null;if(0<=$){var me=w[j].substring(0,$);se=w[j].substring($+1)}else me=w[j];N(me,se?decodeURIComponent(se.replace(/\+/g," ")):"")}}}function or(w){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,w instanceof or){this.h=w.h,Xl(this,w.j),this.o=w.o,this.g=w.g,Lo(this,w.s),this.l=w.l;var N=w.i,j=new Us;j.i=N.i,N.g&&(j.g=new Map(N.g),j.h=N.h),js(this,j),this.m=w.m}else w&&(N=String(w).match(ql))?(this.h=!1,Xl(this,N[1]||"",!0),this.o=na(N[2]||""),this.g=na(N[3]||"",!0),Lo(this,N[4]),this.l=na(N[5]||"",!0),js(this,N[6]||"",!0),this.m=na(N[7]||"")):(this.h=!1,this.i=new Us(null,this.h))}or.prototype.toString=function(){var w=[],N=this.j;N&&w.push(Ql(N,Af,!0),":");var j=this.g;return(j||N=="file")&&(w.push("//"),(N=this.o)&&w.push(Ql(N,Af,!0),"@"),w.push(encodeURIComponent(String(j)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),j=this.s,j!=null&&w.push(":",String(j))),(j=this.l)&&(this.g&&j.charAt(0)!="/"&&w.push("/"),w.push(Ql(j,j.charAt(0)=="/"?Iy:Ef,!0))),(j=this.i.toString())&&w.push("?",j),(j=this.m)&&w.push("#",Ql(j,yu)),w.join("")};function ji(w){return new or(w)}function Xl(w,N,j){w.j=j?na(N,!0):N,w.j&&(w.j=w.j.replace(/:$/,""))}function Lo(w,N){if(N){if(N=Number(N),isNaN(N)||0>N)throw Error("Bad port number "+N);w.s=N}else w.s=null}function js(w,N,j){N instanceof Us?(w.i=N,fp(w.i,w.h)):(j||(N=Ql(N,Dy)),w.i=new Us(N,w.h))}function cn(w,N,j){w.i.set(N,j)}function Kl(w){return cn(w,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),w}function na(w,N){return w?N?decodeURI(w.replace(/%25/g,"%2525")):decodeURIComponent(w):""}function Ql(w,N,j){return typeof w=="string"?(w=encodeURI(w).replace(N,dp),j&&(w=w.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),w):null}function dp(w){return w=w.charCodeAt(0),"%"+(w>>4&15).toString(16)+(w&15).toString(16)}var Af=/[#\/\?@]/g,Ef=/[#\?:]/g,Iy=/[#\?]/g,Dy=/[#\?@]/g,yu=/#/g;function Us(w,N){this.h=this.g=null,this.i=w||null,this.j=!!N}function ra(w){w.g||(w.g=new Map,w.h=0,w.i&&Cy(w.i,function(N,j){w.add(decodeURIComponent(N.replace(/\+/g," ")),j)}))}t=Us.prototype,t.add=function(w,N){ra(this),this.i=null,w=ts(this,w);var j=this.g.get(w);return j||this.g.set(w,j=[]),j.push(N),this.h+=1,this};function Hs(w,N){ra(w),N=ts(w,N),w.g.has(N)&&(w.i=null,w.h-=w.g.get(N).length,w.g.delete(N))}function zs(w,N){return ra(w),N=ts(w,N),w.g.has(N)}t.forEach=function(w,N){ra(this),this.g.forEach(function(j,$){j.forEach(function(se){w.call(N,se,$,this)},this)},this)},t.na=function(){ra(this);const w=Array.from(this.g.values()),N=Array.from(this.g.keys()),j=[];for(let $=0;$<N.length;$++){const se=w[$];for(let me=0;me<se.length;me++)j.push(N[$])}return j},t.V=function(w){ra(this);let N=[];if(typeof w=="string")zs(this,w)&&(N=N.concat(this.g.get(ts(this,w))));else{w=Array.from(this.g.values());for(let j=0;j<w.length;j++)N=N.concat(w[j])}return N},t.set=function(w,N){return ra(this),this.i=null,w=ts(this,w),zs(this,w)&&(this.h-=this.g.get(w).length),this.g.set(w,[N]),this.h+=1,this},t.get=function(w,N){return w?(w=this.V(w),0<w.length?String(w[0]):N):N};function Sf(w,N,j){Hs(w,N),0<j.length&&(w.i=null,w.g.set(ts(w,N),_(j)),w.h+=j.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const w=[],N=Array.from(this.g.keys());for(var j=0;j<N.length;j++){var $=N[j];const me=encodeURIComponent(String($)),Le=this.V($);for($=0;$<Le.length;$++){var se=me;Le[$]!==""&&(se+="="+encodeURIComponent(String(Le[$]))),w.push(se)}}return this.i=w.join("&")};function ts(w,N){return N=String(N),w.j&&(N=N.toLowerCase()),N}function fp(w,N){N&&!w.j&&(ra(w),w.i=null,w.g.forEach(function(j,$){var se=$.toLowerCase();$!=se&&(Hs(this,$),Sf(this,se,j))},w)),w.j=N}function Zl(w,N){const j=new ta;if(o.Image){const $=new Image;$.onload=y(ia,j,"TestLoadImage: loaded",!0,N,$),$.onerror=y(ia,j,"TestLoadImage: error",!1,N,$),$.onabort=y(ia,j,"TestLoadImage: abort",!1,N,$),$.ontimeout=y(ia,j,"TestLoadImage: timeout",!1,N,$),o.setTimeout(function(){$.ontimeout&&$.ontimeout()},1e4),$.src=w}else N(!1)}function Ia(w,N){const j=new ta,$=new AbortController,se=setTimeout(()=>{$.abort(),ia(j,"TestPingServer: timeout",!1,N)},1e4);fetch(w,{signal:$.signal}).then(me=>{clearTimeout(se),me.ok?ia(j,"TestPingServer: ok",!0,N):ia(j,"TestPingServer: server error",!1,N)}).catch(()=>{clearTimeout(se),ia(j,"TestPingServer: error",!1,N)})}function ia(w,N,j,$,se){try{se&&(se.onload=null,se.onerror=null,se.onabort=null,se.ontimeout=null),$(j)}catch{}}function Jl(){this.g=new gt}function ns(w,N,j){const $=j||"";try{bf(w,function(se,me){let Le=se;d(se)&&(Le=Yt(se)),N.push($+me+"="+encodeURIComponent(Le))})}catch(se){throw N.push($+"type="+encodeURIComponent("_badmap")),se}}function Bo(w){this.l=w.Ub||null,this.j=w.eb||!1}x(Bo,Fn),Bo.prototype.g=function(){return new $s(this.l,this.j)},Bo.prototype.i=function(w){return function(){return w}}({});function $s(w,N){nt.call(this),this.D=w,this.o=N,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}x($s,nt),t=$s.prototype,t.open=function(w,N){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=w,this.A=N,this.readyState=1,is(this)},t.send=function(w){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const N={headers:this.u,method:this.B,credentials:this.m,cache:void 0};w&&(N.body=w),(this.D||o).fetch(new Request(this.A,N)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,rs(this)),this.readyState=0},t.Sa=function(w){if(this.g&&(this.l=w,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=w.headers,this.readyState=2,is(this)),this.g&&(this.readyState=3,is(this),this.g)))if(this.responseType==="arraybuffer")w.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in w){if(this.j=w.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Tf(this)}else w.text().then(this.Ra.bind(this),this.ga.bind(this))};function Tf(w){w.j.read().then(w.Pa.bind(w)).catch(w.ga.bind(w))}t.Pa=function(w){if(this.g){if(this.o&&w.value)this.response.push(w.value);else if(!this.o){var N=w.value?w.value:new Uint8Array(0);(N=this.v.decode(N,{stream:!w.done}))&&(this.response=this.responseText+=N)}w.done?rs(this):is(this),this.readyState==3&&Tf(this)}},t.Ra=function(w){this.g&&(this.response=this.responseText=w,rs(this))},t.Qa=function(w){this.g&&(this.response=w,rs(this))},t.ga=function(){this.g&&rs(this)};function rs(w){w.readyState=4,w.l=null,w.j=null,w.v=null,is(w)}t.setRequestHeader=function(w,N){this.u.append(w,N)},t.getResponseHeader=function(w){return this.h&&this.h.get(w.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const w=[],N=this.h.entries();for(var j=N.next();!j.done;)j=j.value,w.push(j[0]+": "+j[1]),j=N.next();return w.join(`\r
`)};function is(w){w.onreadystatechange&&w.onreadystatechange.call(w)}Object.defineProperty($s.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(w){this.m=w?"include":"same-origin"}});function Cf(w){let N="";return B(w,function(j,$){N+=$,N+=":",N+=j,N+=`\r
`}),N}function Or(w,N,j){e:{for($ in j){var $=!1;break e}$=!0}$||(j=Cf(j),typeof w=="string"?j!=null&&encodeURIComponent(String(j)):cn(w,N,j))}function en(w){nt.call(this),this.headers=new Map,this.o=w||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}x(en,nt);var vu=/^https?$/i,ec=["POST","PUT"];t=en.prototype,t.Ha=function(w){this.J=w},t.ea=function(w,N,j,$){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+w);N=N?N.toUpperCase():"GET",this.D=w,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Za.g(),this.v=this.o?qn(this.o):qn(Za),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(N,String(w),!0),this.B=!1}catch(me){hp(this,me);return}if(w=j||"",j=new Map(this.headers),$)if(Object.getPrototypeOf($)===Object.prototype)for(var se in $)j.set(se,$[se]);else if(typeof $.keys=="function"&&typeof $.get=="function")for(const me of $.keys())j.set(me,$.get(me));else throw Error("Unknown input type for opt_headers: "+String($));$=Array.from(j.keys()).find(me=>me.toLowerCase()=="content-type"),se=o.FormData&&w instanceof o.FormData,!(0<=Array.prototype.indexOf.call(ec,N,void 0))||$||se||j.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[me,Le]of j)this.g.setRequestHeader(me,Le);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{tc(this),this.u=!0,this.g.send(w),this.u=!1}catch(me){hp(this,me)}};function hp(w,N){w.h=!1,w.g&&(w.j=!0,w.g.abort(),w.j=!1),w.l=N,w.m=5,xu(w),as(w)}function xu(w){w.A||(w.A=!0,it(w,"complete"),it(w,"error"))}t.abort=function(w){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=w||7,it(this,"complete"),it(this,"abort"),as(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),as(this,!0)),en.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?wu(this):this.bb())},t.bb=function(){wu(this)};function wu(w){if(w.h&&typeof s<"u"&&(!w.v[1]||aa(w)!=4||w.Z()!=2)){if(w.u&&aa(w)==4)Qe(w.Ea,0,w);else if(it(w,"readystatechange"),aa(w)==4){w.h=!1;try{const Le=w.Z();e:switch(Le){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var N=!0;break e;default:N=!1}var j;if(!(j=N)){var $;if($=Le===0){var se=String(w.D).match(ql)[1]||null;!se&&o.self&&o.self.location&&(se=o.self.location.protocol.slice(0,-1)),$=!vu.test(se?se.toLowerCase():"")}j=$}if(j)it(w,"complete"),it(w,"success");else{w.m=6;try{var me=2<aa(w)?w.g.statusText:""}catch{me=""}w.l=me+" ["+w.Z()+"]",xu(w)}}finally{as(w)}}}}function as(w,N){if(w.g){tc(w);const j=w.g,$=w.v[0]?()=>{}:null;w.g=null,w.v=null,N||it(w,"ready");try{j.onreadystatechange=$}catch{}}}function tc(w){w.I&&(o.clearTimeout(w.I),w.I=null)}t.isActive=function(){return!!this.g};function aa(w){return w.g?w.g.readyState:0}t.Z=function(){try{return 2<aa(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(w){if(this.g){var N=this.g.responseText;return w&&N.indexOf(w)==0&&(N=N.substring(w.length)),zr(N)}};function pp(w){try{if(!w.g)return null;if("response"in w.g)return w.g.response;switch(w.H){case"":case"text":return w.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in w.g)return w.g.mozResponseArrayBuffer}return null}catch{return null}}function Ry(w){const N={};w=(w.g&&2<=aa(w)&&w.g.getAllResponseHeaders()||"").split(`\r
`);for(let $=0;$<w.length;$++){if(T(w[$]))continue;var j=L(w[$]);const se=j[0];if(j=j[1],typeof j!="string")continue;j=j.trim();const me=N[se]||[];N[se]=me,me.push(j)}O(N,function($){return $.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function nc(w,N,j){return j&&j.internalChannelParams&&j.internalChannelParams[w]||N}function _u(w){this.Aa=0,this.i=[],this.j=new ta,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=nc("failFast",!1,w),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=nc("baseRetryDelayMs",5e3,w),this.cb=nc("retryDelaySeedMs",1e4,w),this.Wa=nc("forwardChannelMaxRetries",2,w),this.wa=nc("forwardChannelRequestTimeoutMs",2e4,w),this.pa=w&&w.xmlHttpFactory||void 0,this.Xa=w&&w.Tb||void 0,this.Ca=w&&w.useFetchStreams||!1,this.L=void 0,this.J=w&&w.supportsCrossDomainXhr||!1,this.K="",this.h=new Vs(w&&w.concurrentRequestLimit),this.Da=new Jl,this.P=w&&w.fastHandshake||!1,this.O=w&&w.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=w&&w.Rb||!1,w&&w.xa&&this.j.xa(),w&&w.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&w&&w.detectBufferingProxy||!1,this.ja=void 0,w&&w.longPollingTimeout&&0<w.longPollingTimeout&&(this.ja=w.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=_u.prototype,t.la=8,t.G=1,t.connect=function(w,N,j,$){Mn(0),this.W=w,this.H=N||{},j&&$!==void 0&&(this.H.OSID=j,this.H.OAID=$),this.F=this.X,this.I=_p(this,null,this.W),Au(this)};function If(w){if(gp(w),w.G==3){var N=w.U++,j=ji(w.I);if(cn(j,"SID",w.K),cn(j,"RID",N),cn(j,"TYPE","terminate"),rc(w,j),N=new yi(w,w.j,N),N.L=2,N.v=Kl(ji(j)),j=!1,o.navigator&&o.navigator.sendBeacon)try{j=o.navigator.sendBeacon(N.v.toString(),"")}catch{}!j&&o.Image&&(new Image().src=N.v,j=!0),j||(N.g=bp(N.j,null),N.g.ea(N.v)),N.F=Date.now(),Wl(N)}wp(w)}function bu(w){w.g&&(ic(w),w.g.cancel(),w.g=null)}function gp(w){bu(w),w.u&&(o.clearTimeout(w.u),w.u=null),Eu(w),w.h.cancel(),w.s&&(typeof w.s=="number"&&o.clearTimeout(w.s),w.s=null)}function Au(w){if(!hu(w.h)&&!w.s){w.s=!0;var N=w.Ga;G||de(),Q||(G(),Q=!0),Z.add(N,w),w.B=0}}function Oy(w,N){return pu(w.h)>=w.h.j-(w.s?1:0)?!1:w.s?(w.i=N.D.concat(w.i),!0):w.G==1||w.G==2||w.B>=(w.Va?0:w.Wa)?!1:(w.s=sr(g(w.Ga,w,N),Of(w,w.B)),w.B++,!0)}t.Ga=function(w){if(this.s)if(this.s=null,this.G==1){if(!w){this.U=Math.floor(1e5*Math.random()),w=this.U++;const se=new yi(this,this.j,w);let me=this.o;if(this.S&&(me?(me=I(me),V(me,this.S)):me=this.S),this.m!==null||this.O||(se.H=me,me=null),this.P)e:{for(var N=0,j=0;j<this.i.length;j++){t:{var $=this.i[j];if("__data__"in $.map&&($=$.map.__data__,typeof $=="string")){$=$.length;break t}$=void 0}if($===void 0)break;if(N+=$,4096<N){N=j;break e}if(N===4096||j===this.i.length-1){N=j+1;break e}}N=1e3}else N=1e3;N=mp(this,se,N),j=ji(this.I),cn(j,"RID",w),cn(j,"CVER",22),this.D&&cn(j,"X-HTTP-Session-Id",this.D),rc(this,j),me&&(this.O?N="headers="+encodeURIComponent(String(Cf(me)))+"&"+N:this.m&&Or(j,this.m,me)),gu(this.h,se),this.Ua&&cn(j,"TYPE","init"),this.P?(cn(j,"$req",N),cn(j,"SID","null"),se.T=!0,Ca(se,j,null)):Ca(se,j,N),this.G=2}}else this.G==3&&(w?Df(this,w):this.i.length==0||hu(this.h)||Df(this))};function Df(w,N){var j;N?j=N.l:j=w.U++;const $=ji(w.I);cn($,"SID",w.K),cn($,"RID",j),cn($,"AID",w.T),rc(w,$),w.m&&w.o&&Or($,w.m,w.o),j=new yi(w,w.j,j,w.B+1),w.m===null&&(j.H=w.o),N&&(w.i=N.D.concat(w.i)),N=mp(w,j,1e3),j.I=Math.round(.5*w.wa)+Math.round(.5*w.wa*Math.random()),gu(w.h,j),Ca(j,$,N)}function rc(w,N){w.H&&B(w.H,function(j,$){cn(N,$,j)}),w.l&&bf({},function(j,$){cn(N,$,j)})}function mp(w,N,j){j=Math.min(w.i.length,j);var $=w.l?g(w.l.Na,w.l,w):null;e:{var se=w.i;let me=-1;for(;;){const Le=["count="+j];me==-1?0<j?(me=se[0].g,Le.push("ofs="+me)):me=0:Le.push("ofs="+me);let Nt=!0;for(let yr=0;yr<j;yr++){let Lt=se[yr].g;const Mr=se[yr].map;if(Lt-=me,0>Lt)me=Math.max(0,se[yr].g-100),Nt=!1;else try{ns(Mr,Le,"req"+Lt+"_")}catch{$&&$(Mr)}}if(Nt){$=Le.join("&");break e}}}return w=w.i.splice(0,j),N.D=w,$}function yp(w){if(!w.g&&!w.u){w.Y=1;var N=w.Fa;G||de(),Q||(G(),Q=!0),Z.add(N,w),w.v=0}}function Rf(w){return w.g||w.u||3<=w.v?!1:(w.Y++,w.u=sr(g(w.Fa,w),Of(w,w.v)),w.v++,!0)}t.Fa=function(){if(this.u=null,vp(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var w=2*this.R;this.j.info("BP detection timer enabled: "+w),this.A=sr(g(this.ab,this),w)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Mn(10),bu(this),vp(this))};function ic(w){w.A!=null&&(o.clearTimeout(w.A),w.A=null)}function vp(w){w.g=new yi(w,w.j,"rpc",w.Y),w.m===null&&(w.g.H=w.o),w.g.O=0;var N=ji(w.qa);cn(N,"RID","rpc"),cn(N,"SID",w.K),cn(N,"AID",w.T),cn(N,"CI",w.F?"0":"1"),!w.F&&w.ja&&cn(N,"TO",w.ja),cn(N,"TYPE","xmlhttp"),rc(w,N),w.m&&w.o&&Or(N,w.m,w.o),w.L&&(w.g.I=w.L);var j=w.g;w=w.ia,j.L=1,j.v=Kl(ji(N)),j.m=null,j.P=!0,Fs(j,w)}t.Za=function(){this.C!=null&&(this.C=null,bu(this),Rf(this),Mn(19))};function Eu(w){w.C!=null&&(o.clearTimeout(w.C),w.C=null)}function xp(w,N){var j=null;if(w.g==N){Eu(w),ic(w),w.g=null;var $=2}else if(wf(w.h,N))j=N.D,vi(w.h,N),$=1;else return;if(w.G!=0){if(N.o)if($==1){j=N.m?N.m.length:0,N=Date.now()-N.F;var se=w.B;$=Ls(),it($,new mr($,j)),Au(w)}else yp(w);else if(se=N.s,se==3||se==0&&0<N.X||!($==1&&Oy(w,N)||$==2&&Rf(w)))switch(j&&0<j.length&&(N=w.h,N.i=N.i.concat(j)),se){case 1:Gs(w,5);break;case 4:Gs(w,10);break;case 3:Gs(w,6);break;default:Gs(w,2)}}}function Of(w,N){let j=w.Ta+Math.floor(Math.random()*w.cb);return w.isActive()||(j*=2),j*N}function Gs(w,N){if(w.j.info("Error code "+N),N==2){var j=g(w.fb,w),$=w.Xa;const se=!$;$=new or($||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||Xl($,"https"),Kl($),se?Zl($.toString(),j):Ia($.toString(),j)}else Mn(2);w.G=0,w.l&&w.l.sa(N),wp(w),gp(w)}t.fb=function(w){w?(this.j.info("Successfully pinged google.com"),Mn(2)):(this.j.info("Failed to ping google.com"),Mn(1))};function wp(w){if(w.G=0,w.ka=[],w.l){const N=_f(w.h);(N.length!=0||w.i.length!=0)&&(A(w.ka,N),A(w.ka,w.i),w.h.i.length=0,_(w.i),w.i.length=0),w.l.ra()}}function _p(w,N,j){var $=j instanceof or?ji(j):new or(j);if($.g!="")N&&($.g=N+"."+$.g),Lo($,$.s);else{var se=o.location;$=se.protocol,N=N?N+"."+se.hostname:se.hostname,se=+se.port;var me=new or(null);$&&Xl(me,$),N&&(me.g=N),se&&Lo(me,se),j&&(me.l=j),$=me}return j=w.D,N=w.ya,j&&N&&cn($,j,N),cn($,"VER",w.la),rc(w,$),$}function bp(w,N,j){if(N&&!w.J)throw Error("Can't create secondary domain capable XhrIo object.");return N=w.Ca&&!w.pa?new en(new Bo({eb:j})):new en(w.pa),N.Ha(w.J),N}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ap(){}t=Ap.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Su(){}Su.prototype.g=function(w,N){return new xi(w,N)};function xi(w,N){nt.call(this),this.g=new _u(N),this.l=w,this.h=N&&N.messageUrlParams||null,w=N&&N.messageHeaders||null,N&&N.clientProtocolHeaderRequired&&(w?w["X-Client-Protocol"]="webchannel":w={"X-Client-Protocol":"webchannel"}),this.g.o=w,w=N&&N.initMessageHeaders||null,N&&N.messageContentType&&(w?w["X-WebChannel-Content-Type"]=N.messageContentType:w={"X-WebChannel-Content-Type":N.messageContentType}),N&&N.va&&(w?w["X-WebChannel-Client-Profile"]=N.va:w={"X-WebChannel-Client-Profile":N.va}),this.g.S=w,(w=N&&N.Sb)&&!T(w)&&(this.g.m=w),this.v=N&&N.supportsCrossDomainXhr||!1,this.u=N&&N.sendRawJson||!1,(N=N&&N.httpSessionIdParam)&&!T(N)&&(this.g.D=N,w=this.h,w!==null&&N in w&&(w=this.h,N in w&&delete w[N])),this.j=new ss(this)}x(xi,nt),xi.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},xi.prototype.close=function(){If(this.g)},xi.prototype.o=function(w){var N=this.g;if(typeof w=="string"){var j={};j.__data__=w,w=j}else this.u&&(j={},j.__data__=Yt(w),w=j);N.i.push(new up(N.Ya++,w)),N.G==3&&Au(N)},xi.prototype.N=function(){this.g.l=null,delete this.j,If(this.g),delete this.g,xi.aa.N.call(this)};function Ep(w){ir.call(this),w.__headers__&&(this.headers=w.__headers__,this.statusCode=w.__status__,delete w.__headers__,delete w.__status__);var N=w.__sm__;if(N){e:{for(const j in N){w=j;break e}w=void 0}(this.i=w)&&(w=this.i,N=N!==null&&w in N?N[w]:void 0),this.data=N}else this.data=w}x(Ep,ir);function Sp(){zl.call(this),this.status=1}x(Sp,zl);function ss(w){this.g=w}x(ss,Ap),ss.prototype.ua=function(){it(this.g,"a")},ss.prototype.ta=function(w){it(this.g,new Ep(w))},ss.prototype.sa=function(w){it(this.g,new Sp)},ss.prototype.ra=function(){it(this.g,"b")},Su.prototype.createWebChannel=Su.prototype.g,xi.prototype.send=xi.prototype.o,xi.prototype.open=xi.prototype.m,xi.prototype.close=xi.prototype.close,lO=function(){return new Su},oO=function(){return Ls()},sO=ea,B2={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ko.NO_ERROR=0,ko.TIMEOUT=8,ko.HTTP_ERROR=6,am=ko,Bs.COMPLETE="complete",aO=Bs,$r.EventType=mi,mi.OPEN="a",mi.CLOSE="b",mi.ERROR="c",mi.MESSAGE="d",nt.prototype.listen=nt.prototype.K,Lh=$r,en.prototype.listenOnce=en.prototype.L,en.prototype.getLastError=en.prototype.Ka,en.prototype.getLastErrorCode=en.prototype.Ba,en.prototype.getStatus=en.prototype.Z,en.prototype.getResponseJson=en.prototype.Oa,en.prototype.getResponseText=en.prototype.oa,en.prototype.send=en.prototype.ea,en.prototype.setWithCredentials=en.prototype.Ha,iO=en}).apply(typeof Dg<"u"?Dg:typeof self<"u"?self:typeof window<"u"?window:{});const dC="@firebase/firestore",fC="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ci{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ci.UNAUTHENTICATED=new ci(null),ci.GOOGLE_CREDENTIALS=new ci("google-credentials-uid"),ci.FIRST_PARTY=new ci("first-party-uid"),ci.MOCK_USER=new ci("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let of="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yc=new Ww("@firebase/firestore");function ud(){return Yc.logLevel}function $e(t,...e){if(Yc.logLevel<=Mt.DEBUG){const n=e.map(i_);Yc.debug(`Firestore (${of}): ${t}`,...n)}}function xo(t,...e){if(Yc.logLevel<=Mt.ERROR){const n=e.map(i_);Yc.error(`Firestore (${of}): ${t}`,...n)}}function Il(t,...e){if(Yc.logLevel<=Mt.WARN){const n=e.map(i_);Yc.warn(`Firestore (${of}): ${t}`,...n)}}function i_(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lt(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,cO(t,r,n)}function cO(t,e,n){let r=`FIRESTORE (${of}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw xo(r),new Error(r)}function nn(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||cO(e,i,r)}function mt(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Te={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class He extends Io{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class po{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uO{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class cB{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(ci.UNAUTHENTICATED))}shutdown(){}}class uB{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class dB{constructor(e){this.t=e,this.currentUser=ci.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){nn(this.o===void 0,42304);let r=this.i;const i=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let a=new po;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new po,e.enqueueRetryable(()=>i(this.currentUser))};const s=()=>{const c=a;e.enqueueRetryable(async()=>{await c.promise,await i(this.currentUser)})},o=c=>{$e("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(c=>o(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?o(c):($e("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new po)}},0),s()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?($e("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(nn(typeof r.accessToken=="string",31837,{l:r}),new uO(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return nn(e===null||typeof e=="string",2055,{h:e}),new ci(e)}}class fB{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=ci.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class hB{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new fB(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(ci.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class hC{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class pB{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ma(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){nn(this.o===void 0,3512);const r=a=>{a.error!=null&&$e("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const s=a.token!==this.m;return this.m=a.token,$e("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?n(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const i=a=>{$e("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(a=>i(a)),setTimeout(()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?i(a):$e("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new hC(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(nn(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new hC(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gB(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dO(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a_{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=gB(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<n&&(r+=e.charAt(i[a]%62))}return r}}function Et(t,e){return t<e?-1:t>e?1:0}function F2(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=t.codePointAt(n),i=e.codePointAt(n);if(r!==i){if(r<128&&i<128)return Et(r,i);{const a=dO(),s=mB(a.encode(pC(t,n)),a.encode(pC(e,n)));return s!==0?s:Et(r,i)}}n+=r>65535?2:1}return Et(t.length,e.length)}function pC(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function mB(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return Et(t[n],e[n]);return Et(t.length,e.length)}function Vd(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gC="__name__";class ps{constructor(e,n,r){n===void 0?n=0:n>e.length&&lt(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&lt(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return ps.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof ps?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const a=ps.compareSegments(e.get(i),n.get(i));if(a!==0)return a}return Et(e.length,n.length)}static compareSegments(e,n){const r=ps.isNumericId(e),i=ps.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?ps.extractNumericId(e).compare(ps.extractNumericId(n)):F2(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return El.fromString(e.substring(4,e.length-2))}}class _n extends ps{construct(e,n,r){return new _n(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new He(Te.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new _n(n)}static emptyPath(){return new _n([])}}const yB=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Jr extends ps{construct(e,n,r){return new Jr(e,n,r)}static isValidIdentifier(e){return yB.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Jr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===gC}static keyField(){return new Jr([gC])}static fromServerFormat(e){const n=[];let r="",i=0;const a=()=>{if(r.length===0)throw new He(Te.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let s=!1;for(;i<e.length;){const o=e[i];if(o==="\\"){if(i+1===e.length)throw new He(Te.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new He(Te.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else o==="`"?(s=!s,i++):o!=="."||s?(r+=o,i++):(a(),i++)}if(a(),s)throw new He(Te.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Jr(n)}static emptyPath(){return new Jr([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Je{constructor(e){this.path=e}static fromPath(e){return new Je(_n.fromString(e))}static fromName(e){return new Je(_n.fromString(e).popFirst(5))}static empty(){return new Je(_n.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&_n.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return _n.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Je(new _n(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s_(t,e,n){if(!n)throw new He(Te.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function vB(t,e,n,r){if(e===!0&&r===!0)throw new He(Te.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function mC(t){if(!Je.isDocumentKey(t))throw new He(Te.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function yC(t){if(Je.isDocumentKey(t))throw new He(Te.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function fO(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function S1(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":lt(12329,{type:typeof t})}function hi(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new He(Te.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=S1(t);throw new He(Te.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function xB(t,e){if(e<=0)throw new He(Te.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hr(t,e){const n={typeString:t};return e&&(n.value=e),n}function N0(t,e){if(!fO(t))throw new He(Te.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const i=e[r].typeString,a="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const s=t[r];if(i&&typeof s!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(a!==void 0&&s!==a.value){n=`Expected '${r}' field to equal '${a.value}'`;break}}if(n)throw new He(Te.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vC=-62135596800,xC=1e6;class Rn{static now(){return Rn.fromMillis(Date.now())}static fromDate(e){return Rn.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*xC);return new Rn(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new He(Te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new He(Te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<vC)throw new He(Te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new He(Te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/xC}_compareTo(e){return this.seconds===e.seconds?Et(this.nanoseconds,e.nanoseconds):Et(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Rn._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(N0(e,Rn._jsonSchema))return new Rn(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-vC;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Rn._jsonSchemaVersion="firestore/timestamp/1.0",Rn._jsonSchema={type:hr("string",Rn._jsonSchemaVersion),seconds:hr("number"),nanoseconds:hr("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ht{static fromTimestamp(e){return new ht(e)}static min(){return new ht(new Rn(0,0))}static max(){return new ht(new Rn(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l0=-1;function wB(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=ht.fromTimestamp(r===1e9?new Rn(n+1,0):new Rn(n,r));return new Dl(i,Je.empty(),e)}function _B(t){return new Dl(t.readTime,t.key,l0)}class Dl{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Dl(ht.min(),Je.empty(),l0)}static max(){return new Dl(ht.max(),Je.empty(),l0)}}function bB(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Je.comparator(t.documentKey,e.documentKey),n!==0?n:Et(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AB="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class EB{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lf(t){if(t.code!==Te.FAILED_PRECONDITION||t.message!==AB)throw t;$e("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class De{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&lt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new De((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(n,a).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof De?n:De.resolve(n)}catch(n){return De.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):De.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):De.reject(n)}static resolve(e){return new De((n,r)=>{n(e)})}static reject(e){return new De((n,r)=>{r(e)})}static waitFor(e){return new De((n,r)=>{let i=0,a=0,s=!1;e.forEach(o=>{++i,o.next(()=>{++a,s&&a===i&&n()},c=>r(c))}),s=!0,a===i&&n()})}static or(e){let n=De.resolve(!1);for(const r of e)n=n.next(i=>i?De.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,a)=>{r.push(n.call(this,i,a))}),this.waitFor(r)}static mapArray(e,n){return new De((r,i)=>{const a=e.length,s=new Array(a);let o=0;for(let c=0;c<a;c++){const d=c;n(e[d]).next(f=>{s[d]=f,++o,o===a&&r(s)},f=>i(f))}})}static doWhile(e,n){return new De((r,i)=>{const a=()=>{e()===!0?n().next(()=>{a()},i):r()};a()})}}function SB(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function cf(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T1{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this._e(r),this.ae=r=>n.writeSequenceNumber(r))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}T1.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o_=-1;function C1(t){return t==null}function Em(t){return t===0&&1/t==-1/0}function TB(t){return typeof t=="number"&&Number.isInteger(t)&&!Em(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hO="";function CB(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=wC(e)),e=IB(t.get(n),e);return wC(e)}function IB(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const a=t.charAt(i);switch(a){case"\0":n+="";break;case hO:n+="";break;default:n+=a}}return n}function wC(t){return t+hO+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _C(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Fl(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function pO(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hn{constructor(e,n){this.comparator=e,this.root=n||Zr.EMPTY}insert(e,n){return new Hn(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Zr.BLACK,null,null))}remove(e){return new Hn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Zr.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Rg(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Rg(this.root,e,this.comparator,!1)}getReverseIterator(){return new Rg(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Rg(this.root,e,this.comparator,!0)}}class Rg{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=n?r(e.key,n):1,n&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Zr{constructor(e,n,r,i,a){this.key=e,this.value=n,this.color=r??Zr.RED,this.left=i??Zr.EMPTY,this.right=a??Zr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,a){return new Zr(e??this.key,n??this.value,r??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,n,r),null):a===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Zr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return Zr.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Zr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Zr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw lt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw lt(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw lt(27949);return e+(this.isRed()?0:1)}}Zr.EMPTY=null,Zr.RED=!0,Zr.BLACK=!1;Zr.EMPTY=new class{constructor(){this.size=0}get key(){throw lt(57766)}get value(){throw lt(16141)}get color(){throw lt(16727)}get left(){throw lt(29726)}get right(){throw lt(36894)}copy(e,n,r,i,a){return this}insert(e,n,r){return new Zr(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dr{constructor(e){this.comparator=e,this.data=new Hn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new bC(this.data.getIterator())}getIteratorFrom(e){return new bC(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Dr)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,a=r.getNext().key;if(this.comparator(i,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Dr(this.comparator);return n.data=e,n}}class bC{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xi{constructor(e){this.fields=e,e.sort(Jr.comparator)}static empty(){return new Xi([])}unionWith(e){let n=new Dr(Jr.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Xi(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Vd(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gO extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ni{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new gO("Invalid base64 string: "+a):a}}(e);return new ni(n)}static fromUint8Array(e){const n=function(i){let a="";for(let s=0;s<i.length;++s)a+=String.fromCharCode(i[s]);return a}(e);return new ni(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Et(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ni.EMPTY_BYTE_STRING=new ni("");const DB=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Rl(t){if(nn(!!t,39018),typeof t=="string"){let e=0;const n=DB.exec(t);if(nn(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Zn(t.seconds),nanos:Zn(t.nanos)}}function Zn(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Ol(t){return typeof t=="string"?ni.fromBase64String(t):ni.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mO="server_timestamp",yO="__type__",vO="__previous_value__",xO="__local_write_time__";function l_(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[yO])===null||n===void 0?void 0:n.stringValue)===mO}function I1(t){const e=t.mapValue.fields[vO];return l_(e)?I1(e):e}function c0(t){const e=Rl(t.mapValue.fields[xO].timestampValue);return new Rn(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RB{constructor(e,n,r,i,a,s,o,c,d,f){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.longPollingOptions=c,this.useFetchStreams=d,this.isUsingEmulator=f}}const Sm="(default)";class u0{constructor(e,n){this.projectId=e,this.database=n||Sm}static empty(){return new u0("","")}get isDefaultDatabase(){return this.database===Sm}isEqual(e){return e instanceof u0&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wO="__type__",OB="__max__",Og={mapValue:{}},_O="__vector__",Tm="value";function Ml(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?l_(t)?4:PB(t)?9007199254740991:MB(t)?10:11:lt(28295,{value:t})}function Os(t,e){if(t===e)return!0;const n=Ml(t);if(n!==Ml(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return c0(t).isEqual(c0(e));case 3:return function(i,a){if(typeof i.timestampValue=="string"&&typeof a.timestampValue=="string"&&i.timestampValue.length===a.timestampValue.length)return i.timestampValue===a.timestampValue;const s=Rl(i.timestampValue),o=Rl(a.timestampValue);return s.seconds===o.seconds&&s.nanos===o.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,a){return Ol(i.bytesValue).isEqual(Ol(a.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,a){return Zn(i.geoPointValue.latitude)===Zn(a.geoPointValue.latitude)&&Zn(i.geoPointValue.longitude)===Zn(a.geoPointValue.longitude)}(t,e);case 2:return function(i,a){if("integerValue"in i&&"integerValue"in a)return Zn(i.integerValue)===Zn(a.integerValue);if("doubleValue"in i&&"doubleValue"in a){const s=Zn(i.doubleValue),o=Zn(a.doubleValue);return s===o?Em(s)===Em(o):isNaN(s)&&isNaN(o)}return!1}(t,e);case 9:return Vd(t.arrayValue.values||[],e.arrayValue.values||[],Os);case 10:case 11:return function(i,a){const s=i.mapValue.fields||{},o=a.mapValue.fields||{};if(_C(s)!==_C(o))return!1;for(const c in s)if(s.hasOwnProperty(c)&&(o[c]===void 0||!Os(s[c],o[c])))return!1;return!0}(t,e);default:return lt(52216,{left:t})}}function d0(t,e){return(t.values||[]).find(n=>Os(n,e))!==void 0}function jd(t,e){if(t===e)return 0;const n=Ml(t),r=Ml(e);if(n!==r)return Et(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Et(t.booleanValue,e.booleanValue);case 2:return function(a,s){const o=Zn(a.integerValue||a.doubleValue),c=Zn(s.integerValue||s.doubleValue);return o<c?-1:o>c?1:o===c?0:isNaN(o)?isNaN(c)?0:-1:1}(t,e);case 3:return AC(t.timestampValue,e.timestampValue);case 4:return AC(c0(t),c0(e));case 5:return F2(t.stringValue,e.stringValue);case 6:return function(a,s){const o=Ol(a),c=Ol(s);return o.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(a,s){const o=a.split("/"),c=s.split("/");for(let d=0;d<o.length&&d<c.length;d++){const f=Et(o[d],c[d]);if(f!==0)return f}return Et(o.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(a,s){const o=Et(Zn(a.latitude),Zn(s.latitude));return o!==0?o:Et(Zn(a.longitude),Zn(s.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return EC(t.arrayValue,e.arrayValue);case 10:return function(a,s){var o,c,d,f;const p=a.fields||{},g=s.fields||{},y=(o=p[Tm])===null||o===void 0?void 0:o.arrayValue,x=(c=g[Tm])===null||c===void 0?void 0:c.arrayValue,_=Et(((d=y==null?void 0:y.values)===null||d===void 0?void 0:d.length)||0,((f=x==null?void 0:x.values)===null||f===void 0?void 0:f.length)||0);return _!==0?_:EC(y,x)}(t.mapValue,e.mapValue);case 11:return function(a,s){if(a===Og.mapValue&&s===Og.mapValue)return 0;if(a===Og.mapValue)return 1;if(s===Og.mapValue)return-1;const o=a.fields||{},c=Object.keys(o),d=s.fields||{},f=Object.keys(d);c.sort(),f.sort();for(let p=0;p<c.length&&p<f.length;++p){const g=F2(c[p],f[p]);if(g!==0)return g;const y=jd(o[c[p]],d[f[p]]);if(y!==0)return y}return Et(c.length,f.length)}(t.mapValue,e.mapValue);default:throw lt(23264,{le:n})}}function AC(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Et(t,e);const n=Rl(t),r=Rl(e),i=Et(n.seconds,r.seconds);return i!==0?i:Et(n.nanos,r.nanos)}function EC(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const a=jd(n[i],r[i]);if(a)return a}return Et(n.length,r.length)}function Ud(t){return V2(t)}function V2(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Rl(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Ol(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return Je.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const a of n.values||[])i?i=!1:r+=",",r+=V2(a);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",a=!0;for(const s of r)a?a=!1:i+=",",i+=`${s}:${V2(n.fields[s])}`;return i+"}"}(t.mapValue):lt(61005,{value:t})}function sm(t){switch(Ml(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=I1(t);return e?16+sm(e):16;case 5:return 2*t.stringValue.length;case 6:return Ol(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,a)=>i+sm(a),0)}(t.arrayValue);case 10:case 11:return function(r){let i=0;return Fl(r.fields,(a,s)=>{i+=a.length+sm(s)}),i}(t.mapValue);default:throw lt(13486,{value:t})}}function SC(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function j2(t){return!!t&&"integerValue"in t}function c_(t){return!!t&&"arrayValue"in t}function TC(t){return!!t&&"nullValue"in t}function CC(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function om(t){return!!t&&"mapValue"in t}function MB(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[wO])===null||n===void 0?void 0:n.stringValue)===_O}function Zh(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Fl(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Zh(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Zh(t.arrayValue.values[n]);return e}return Object.assign({},t)}function PB(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===OB}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Li{constructor(e){this.value=e}static empty(){return new Li({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!om(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Zh(n)}setAll(e){let n=Jr.emptyPath(),r={},i=[];e.forEach((s,o)=>{if(!n.isImmediateParentOf(o)){const c=this.getFieldsMap(n);this.applyChanges(c,r,i),r={},i=[],n=o.popLast()}s?r[o.lastSegment()]=Zh(s):i.push(o.lastSegment())});const a=this.getFieldsMap(n);this.applyChanges(a,r,i)}delete(e){const n=this.field(e.popLast());om(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Os(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];om(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Fl(n,(i,a)=>e[i]=a);for(const i of r)delete e[i]}clone(){return new Li(Zh(this.value))}}function bO(t){const e=[];return Fl(t.fields,(n,r)=>{const i=new Jr([n]);if(om(r)){const a=bO(r.mapValue).fields;if(a.length===0)e.push(i);else for(const s of a)e.push(i.child(s))}else e.push(i)}),new Xi(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ui{constructor(e,n,r,i,a,s,o){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=a,this.data=s,this.documentState=o}static newInvalidDocument(e){return new ui(e,0,ht.min(),ht.min(),ht.min(),Li.empty(),0)}static newFoundDocument(e,n,r,i){return new ui(e,1,n,ht.min(),r,i,0)}static newNoDocument(e,n){return new ui(e,2,n,ht.min(),ht.min(),Li.empty(),0)}static newUnknownDocument(e,n){return new ui(e,3,n,ht.min(),ht.min(),Li.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ht.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Li.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Li.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ht.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ui&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ui(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cm{constructor(e,n){this.position=e,this.inclusive=n}}function IC(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const a=e[i],s=t.position[i];if(a.field.isKeyField()?r=Je.comparator(Je.fromName(s.referenceValue),n.key):r=jd(s,n.data.field(a.field)),a.dir==="desc"&&(r*=-1),r!==0)break}return r}function DC(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Os(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f0{constructor(e,n="asc"){this.field=e,this.dir=n}}function kB(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AO{}class fr extends AO{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new LB(e,n,r):n==="array-contains"?new VB(e,r):n==="in"?new jB(e,r):n==="not-in"?new UB(e,r):n==="array-contains-any"?new HB(e,r):new fr(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new BB(e,r):new FB(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(jd(n,this.value)):n!==null&&Ml(this.value)===Ml(n)&&this.matchesComparison(jd(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return lt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class qa extends AO{constructor(e,n){super(),this.filters=e,this.op=n,this.he=null}static create(e,n){return new qa(e,n)}matches(e){return EO(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function EO(t){return t.op==="and"}function SO(t){return NB(t)&&EO(t)}function NB(t){for(const e of t.filters)if(e instanceof qa)return!1;return!0}function U2(t){if(t instanceof fr)return t.field.canonicalString()+t.op.toString()+Ud(t.value);if(SO(t))return t.filters.map(e=>U2(e)).join(",");{const e=t.filters.map(n=>U2(n)).join(",");return`${t.op}(${e})`}}function TO(t,e){return t instanceof fr?function(r,i){return i instanceof fr&&r.op===i.op&&r.field.isEqual(i.field)&&Os(r.value,i.value)}(t,e):t instanceof qa?function(r,i){return i instanceof qa&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((a,s,o)=>a&&TO(s,i.filters[o]),!0):!1}(t,e):void lt(19439)}function CO(t){return t instanceof fr?function(n){return`${n.field.canonicalString()} ${n.op} ${Ud(n.value)}`}(t):t instanceof qa?function(n){return n.op.toString()+" {"+n.getFilters().map(CO).join(" ,")+"}"}(t):"Filter"}class LB extends fr{constructor(e,n,r){super(e,n,r),this.key=Je.fromName(r.referenceValue)}matches(e){const n=Je.comparator(e.key,this.key);return this.matchesComparison(n)}}class BB extends fr{constructor(e,n){super(e,"in",n),this.keys=IO("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class FB extends fr{constructor(e,n){super(e,"not-in",n),this.keys=IO("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function IO(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>Je.fromName(r.referenceValue))}class VB extends fr{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return c_(n)&&d0(n.arrayValue,this.value)}}class jB extends fr{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&d0(this.value.arrayValue,n)}}class UB extends fr{constructor(e,n){super(e,"not-in",n)}matches(e){if(d0(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!d0(this.value.arrayValue,n)}}class HB extends fr{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!c_(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>d0(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zB{constructor(e,n=null,r=[],i=[],a=null,s=null,o=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=s,this.endAt=o,this.Pe=null}}function RC(t,e=null,n=[],r=[],i=null,a=null,s=null){return new zB(t,e,n,r,i,a,s)}function u_(t){const e=mt(t);if(e.Pe===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>U2(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(a){return a.field.canonicalString()+a.dir}(r)).join(","),C1(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Ud(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Ud(r)).join(",")),e.Pe=n}return e.Pe}function d_(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!kB(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!TO(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!DC(t.startAt,e.startAt)&&DC(t.endAt,e.endAt)}function H2(t){return Je.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tu{constructor(e,n=null,r=[],i=[],a=null,s="F",o=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=s,this.startAt=o,this.endAt=c,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function $B(t,e,n,r,i,a,s,o){return new tu(t,e,n,r,i,a,s,o)}function D1(t){return new tu(t)}function OC(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function DO(t){return t.collectionGroup!==null}function Jh(t){const e=mt(t);if(e.Te===null){e.Te=[];const n=new Set;for(const a of e.explicitOrderBy)e.Te.push(a),n.add(a.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let o=new Dr(Jr.comparator);return s.filters.forEach(c=>{c.getFlattenedFilters().forEach(d=>{d.isInequality()&&(o=o.add(d.field))})}),o})(e).forEach(a=>{n.has(a.canonicalString())||a.isKeyField()||e.Te.push(new f0(a,r))}),n.has(Jr.keyField().canonicalString())||e.Te.push(new f0(Jr.keyField(),r))}return e.Te}function Es(t){const e=mt(t);return e.Ie||(e.Ie=GB(e,Jh(t))),e.Ie}function GB(t,e){if(t.limitType==="F")return RC(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const a=i.dir==="desc"?"asc":"desc";return new f0(i.field,a)});const n=t.endAt?new Cm(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Cm(t.startAt.position,t.startAt.inclusive):null;return RC(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function z2(t,e){const n=t.filters.concat([e]);return new tu(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Im(t,e,n){return new tu(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function R1(t,e){return d_(Es(t),Es(e))&&t.limitType===e.limitType}function RO(t){return`${u_(Es(t))}|lt:${t.limitType}`}function dd(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>CO(i)).join(", ")}]`),C1(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Ud(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Ud(i)).join(",")),`Target(${r})`}(Es(t))}; limitType=${t.limitType})`}function O1(t,e){return e.isFoundDocument()&&function(r,i){const a=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(a):Je.isDocumentKey(r.path)?r.path.isEqual(a):r.path.isImmediateParentOf(a)}(t,e)&&function(r,i){for(const a of Jh(r))if(!a.field.isKeyField()&&i.data.field(a.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const a of r.filters)if(!a.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(s,o,c){const d=IC(s,o,c);return s.inclusive?d<=0:d<0}(r.startAt,Jh(r),i)||r.endAt&&!function(s,o,c){const d=IC(s,o,c);return s.inclusive?d>=0:d>0}(r.endAt,Jh(r),i))}(t,e)}function WB(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function OO(t){return(e,n)=>{let r=!1;for(const i of Jh(t)){const a=YB(i,e,n);if(a!==0)return a;r=r||i.field.isKeyField()}return 0}}function YB(t,e,n){const r=t.field.isKeyField()?Je.comparator(e.key,n.key):function(a,s,o){const c=s.data.field(a),d=o.data.field(a);return c!==null&&d!==null?jd(c,d):lt(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return lt(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nu{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,a]of r)if(this.equalsFn(i,e))return a}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Fl(this.inner,(n,r)=>{for(const[i,a]of r)e(i,a)})}isEmpty(){return pO(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qB=new Hn(Je.comparator);function wo(){return qB}const MO=new Hn(Je.comparator);function Bh(...t){let e=MO;for(const n of t)e=e.insert(n.key,n);return e}function PO(t){let e=MO;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Oc(){return e0()}function kO(){return e0()}function e0(){return new nu(t=>t.toString(),(t,e)=>t.isEqual(e))}const XB=new Hn(Je.comparator),KB=new Dr(Je.comparator);function Pt(...t){let e=KB;for(const n of t)e=e.add(n);return e}const QB=new Dr(Et);function ZB(){return QB}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f_(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Em(e)?"-0":e}}function NO(t){return{integerValue:""+t}}function JB(t,e){return TB(e)?NO(e):f_(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M1{constructor(){this._=void 0}}function eF(t,e,n){return t instanceof h0?function(i,a){const s={fields:{[yO]:{stringValue:mO},[xO]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return a&&l_(a)&&(a=I1(a)),a&&(s.fields[vO]=a),{mapValue:s}}(n,e):t instanceof p0?BO(t,e):t instanceof g0?FO(t,e):function(i,a){const s=LO(i,a),o=MC(s)+MC(i.Ee);return j2(s)&&j2(i.Ee)?NO(o):f_(i.serializer,o)}(t,e)}function tF(t,e,n){return t instanceof p0?BO(t,e):t instanceof g0?FO(t,e):n}function LO(t,e){return t instanceof Dm?function(r){return j2(r)||function(a){return!!a&&"doubleValue"in a}(r)}(e)?e:{integerValue:0}:null}class h0 extends M1{}class p0 extends M1{constructor(e){super(),this.elements=e}}function BO(t,e){const n=VO(e);for(const r of t.elements)n.some(i=>Os(i,r))||n.push(r);return{arrayValue:{values:n}}}class g0 extends M1{constructor(e){super(),this.elements=e}}function FO(t,e){let n=VO(e);for(const r of t.elements)n=n.filter(i=>!Os(i,r));return{arrayValue:{values:n}}}class Dm extends M1{constructor(e,n){super(),this.serializer=e,this.Ee=n}}function MC(t){return Zn(t.integerValue||t.doubleValue)}function VO(t){return c_(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nF{constructor(e,n){this.field=e,this.transform=n}}function rF(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof p0&&i instanceof p0||r instanceof g0&&i instanceof g0?Vd(r.elements,i.elements,Os):r instanceof Dm&&i instanceof Dm?Os(r.Ee,i.Ee):r instanceof h0&&i instanceof h0}(t.transform,e.transform)}class iF{constructor(e,n){this.version=e,this.transformResults=n}}class Ii{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Ii}static exists(e){return new Ii(void 0,e)}static updateTime(e){return new Ii(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function lm(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class P1{}function jO(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new k1(t.key,Ii.none()):new L0(t.key,t.data,Ii.none());{const n=t.data,r=Li.empty();let i=new Dr(Jr.comparator);for(let a of e.fields)if(!i.has(a)){let s=n.field(a);s===null&&a.length>1&&(a=a.popLast(),s=n.field(a)),s===null?r.delete(a):r.set(a,s),i=i.add(a)}return new Vl(t.key,r,new Xi(i.toArray()),Ii.none())}}function aF(t,e,n){t instanceof L0?function(i,a,s){const o=i.value.clone(),c=kC(i.fieldTransforms,a,s.transformResults);o.setAll(c),a.convertToFoundDocument(s.version,o).setHasCommittedMutations()}(t,e,n):t instanceof Vl?function(i,a,s){if(!lm(i.precondition,a))return void a.convertToUnknownDocument(s.version);const o=kC(i.fieldTransforms,a,s.transformResults),c=a.data;c.setAll(UO(i)),c.setAll(o),a.convertToFoundDocument(s.version,c).setHasCommittedMutations()}(t,e,n):function(i,a,s){a.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,n)}function t0(t,e,n,r){return t instanceof L0?function(a,s,o,c){if(!lm(a.precondition,s))return o;const d=a.value.clone(),f=NC(a.fieldTransforms,c,s);return d.setAll(f),s.convertToFoundDocument(s.version,d).setHasLocalMutations(),null}(t,e,n,r):t instanceof Vl?function(a,s,o,c){if(!lm(a.precondition,s))return o;const d=NC(a.fieldTransforms,c,s),f=s.data;return f.setAll(UO(a)),f.setAll(d),s.convertToFoundDocument(s.version,f).setHasLocalMutations(),o===null?null:o.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(p=>p.field))}(t,e,n,r):function(a,s,o){return lm(a.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):o}(t,e,n)}function sF(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),a=LO(r.transform,i||null);a!=null&&(n===null&&(n=Li.empty()),n.set(r.field,a))}return n||null}function PC(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Vd(r,i,(a,s)=>rF(a,s))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class L0 extends P1{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Vl extends P1{constructor(e,n,r,i,a=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function UO(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function kC(t,e,n){const r=new Map;nn(t.length===n.length,32656,{Ae:n.length,Re:t.length});for(let i=0;i<n.length;i++){const a=t[i],s=a.transform,o=e.data.field(a.field);r.set(a.field,tF(s,o,n[i]))}return r}function NC(t,e,n){const r=new Map;for(const i of t){const a=i.transform,s=n.data.field(i.field);r.set(i.field,eF(a,s,e))}return r}class k1 extends P1{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class oF extends P1{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lF{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&aF(a,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=t0(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=t0(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=kO();return this.mutations.forEach(i=>{const a=e.get(i.key),s=a.overlayedDocument;let o=this.applyToLocalView(s,a.mutatedFields);o=n.has(i.key)?null:o;const c=jO(s,o);c!==null&&r.set(i.key,c),s.isValidDocument()||s.convertToNoDocument(ht.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Pt())}isEqual(e){return this.batchId===e.batchId&&Vd(this.mutations,e.mutations,(n,r)=>PC(n,r))&&Vd(this.baseMutations,e.baseMutations,(n,r)=>PC(n,r))}}class h_{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){nn(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let i=function(){return XB}();const a=e.mutations;for(let s=0;s<a.length;s++)i=i.insert(a[s].key,r[s].version);return new h_(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cF{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uF{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var dr,Ft;function dF(t){switch(t){case Te.OK:return lt(64938);case Te.CANCELLED:case Te.UNKNOWN:case Te.DEADLINE_EXCEEDED:case Te.RESOURCE_EXHAUSTED:case Te.INTERNAL:case Te.UNAVAILABLE:case Te.UNAUTHENTICATED:return!1;case Te.INVALID_ARGUMENT:case Te.NOT_FOUND:case Te.ALREADY_EXISTS:case Te.PERMISSION_DENIED:case Te.FAILED_PRECONDITION:case Te.ABORTED:case Te.OUT_OF_RANGE:case Te.UNIMPLEMENTED:case Te.DATA_LOSS:return!0;default:return lt(15467,{code:t})}}function HO(t){if(t===void 0)return xo("GRPC error has no .code"),Te.UNKNOWN;switch(t){case dr.OK:return Te.OK;case dr.CANCELLED:return Te.CANCELLED;case dr.UNKNOWN:return Te.UNKNOWN;case dr.DEADLINE_EXCEEDED:return Te.DEADLINE_EXCEEDED;case dr.RESOURCE_EXHAUSTED:return Te.RESOURCE_EXHAUSTED;case dr.INTERNAL:return Te.INTERNAL;case dr.UNAVAILABLE:return Te.UNAVAILABLE;case dr.UNAUTHENTICATED:return Te.UNAUTHENTICATED;case dr.INVALID_ARGUMENT:return Te.INVALID_ARGUMENT;case dr.NOT_FOUND:return Te.NOT_FOUND;case dr.ALREADY_EXISTS:return Te.ALREADY_EXISTS;case dr.PERMISSION_DENIED:return Te.PERMISSION_DENIED;case dr.FAILED_PRECONDITION:return Te.FAILED_PRECONDITION;case dr.ABORTED:return Te.ABORTED;case dr.OUT_OF_RANGE:return Te.OUT_OF_RANGE;case dr.UNIMPLEMENTED:return Te.UNIMPLEMENTED;case dr.DATA_LOSS:return Te.DATA_LOSS;default:return lt(39323,{code:t})}}(Ft=dr||(dr={}))[Ft.OK=0]="OK",Ft[Ft.CANCELLED=1]="CANCELLED",Ft[Ft.UNKNOWN=2]="UNKNOWN",Ft[Ft.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ft[Ft.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ft[Ft.NOT_FOUND=5]="NOT_FOUND",Ft[Ft.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ft[Ft.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ft[Ft.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ft[Ft.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ft[Ft.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ft[Ft.ABORTED=10]="ABORTED",Ft[Ft.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ft[Ft.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ft[Ft.INTERNAL=13]="INTERNAL",Ft[Ft.UNAVAILABLE=14]="UNAVAILABLE",Ft[Ft.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fF=new El([4294967295,4294967295],0);function LC(t){const e=dO().encode(t),n=new rO;return n.update(e),new Uint8Array(n.digest())}function BC(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new El([n,r],0),new El([i,a],0)]}class p_{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Fh(`Invalid padding: ${n}`);if(r<0)throw new Fh(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Fh(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Fh(`Invalid padding when bitmap length is 0: ${n}`);this.fe=8*e.length-n,this.ge=El.fromNumber(this.fe)}pe(e,n,r){let i=e.add(n.multiply(El.fromNumber(r)));return i.compare(fF)===1&&(i=new El([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const n=LC(e),[r,i]=BC(n);for(let a=0;a<this.hashCount;a++){const s=this.pe(r,i,a);if(!this.ye(s))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),s=new p_(a,i,n);return r.forEach(o=>s.insert(o)),s}insert(e){if(this.fe===0)return;const n=LC(e),[r,i]=BC(n);for(let a=0;a<this.hashCount;a++){const s=this.pe(r,i,a);this.we(s)}}we(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Fh extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N1{constructor(e,n,r,i,a){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,B0.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new N1(ht.min(),i,new Hn(Et),wo(),Pt())}}class B0{constructor(e,n,r,i,a){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new B0(r,n,Pt(),Pt(),Pt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cm{constructor(e,n,r,i){this.Se=e,this.removedTargetIds=n,this.key=r,this.be=i}}class zO{constructor(e,n){this.targetId=e,this.De=n}}class $O{constructor(e,n,r=ni.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class FC{constructor(){this.ve=0,this.Ce=VC(),this.Fe=ni.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=Pt(),n=Pt(),r=Pt();return this.Ce.forEach((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:lt(38017,{changeType:a})}}),new B0(this.Fe,this.Me,e,n,r)}ke(){this.xe=!1,this.Ce=VC()}qe(e,n){this.xe=!0,this.Ce=this.Ce.insert(e,n)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,nn(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class hF{constructor(e){this.We=e,this.Ge=new Map,this.ze=wo(),this.je=Mg(),this.Je=Mg(),this.He=new Hn(Et)}Ye(e){for(const n of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(n,e.be):this.Xe(n,e.key,e.be);for(const n of e.removedTargetIds)this.Xe(n,e.key,e.be)}et(e){this.forEachTarget(e,n=>{const r=this.tt(n);switch(e.state){case 0:this.nt(n)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(n);break;case 3:this.nt(n)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(n)&&(this.rt(n),r.Be(e.resumeToken));break;default:lt(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Ge.forEach((r,i)=>{this.nt(i)&&n(i)})}it(e){const n=e.targetId,r=e.De.count,i=this.st(n);if(i){const a=i.target;if(H2(a))if(r===0){const s=new Je(a.path);this.Xe(n,s,ui.newNoDocument(s,ht.min()))}else nn(r===1,20013,{expectedCount:r});else{const s=this.ot(n);if(s!==r){const o=this._t(e),c=o?this.ut(o,e,s):1;if(c!==0){this.rt(n);const d=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(n,d)}}}}}_t(e){const n=e.De.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:a=0}=n;let s,o;try{s=Ol(r).toUint8Array()}catch(c){if(c instanceof gO)return Il("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{o=new p_(s,i,a)}catch(c){return Il(c instanceof Fh?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return o.fe===0?null:o}ut(e,n,r){return n.De.count===r-this.ht(e,n.targetId)?0:2}ht(e,n){const r=this.We.getRemoteKeysForTarget(n);let i=0;return r.forEach(a=>{const s=this.We.lt(),o=`projects/${s.projectId}/databases/${s.database}/documents/${a.path.canonicalString()}`;e.mightContain(o)||(this.Xe(n,a,null),i++)}),i}Pt(e){const n=new Map;this.Ge.forEach((a,s)=>{const o=this.st(s);if(o){if(a.current&&H2(o.target)){const c=new Je(o.target.path);this.Tt(c).has(s)||this.It(s,c)||this.Xe(s,c,ui.newNoDocument(c,e))}a.Ne&&(n.set(s,a.Le()),a.ke())}});let r=Pt();this.Je.forEach((a,s)=>{let o=!0;s.forEachWhile(c=>{const d=this.st(c);return!d||d.purpose==="TargetPurposeLimboResolution"||(o=!1,!1)}),o&&(r=r.add(a))}),this.ze.forEach((a,s)=>s.setReadTime(e));const i=new N1(e,n,this.He,this.ze,r);return this.ze=wo(),this.je=Mg(),this.Je=Mg(),this.He=new Hn(Et),i}Ze(e,n){if(!this.nt(e))return;const r=this.It(e,n.key)?2:0;this.tt(e).qe(n.key,r),this.ze=this.ze.insert(n.key,n),this.je=this.je.insert(n.key,this.Tt(n.key).add(e)),this.Je=this.Je.insert(n.key,this.dt(n.key).add(e))}Xe(e,n,r){if(!this.nt(e))return;const i=this.tt(e);this.It(e,n)?i.qe(n,1):i.Qe(n),this.Je=this.Je.insert(n,this.dt(n).delete(e)),this.Je=this.Je.insert(n,this.dt(n).add(e)),r&&(this.ze=this.ze.insert(n,r))}removeTarget(e){this.Ge.delete(e)}ot(e){const n=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let n=this.Ge.get(e);return n||(n=new FC,this.Ge.set(e,n)),n}dt(e){let n=this.Je.get(e);return n||(n=new Dr(Et),this.Je=this.Je.insert(e,n)),n}Tt(e){let n=this.je.get(e);return n||(n=new Dr(Et),this.je=this.je.insert(e,n)),n}nt(e){const n=this.st(e)!==null;return n||$e("WatchChangeAggregator","Detected inactive target",e),n}st(e){const n=this.Ge.get(e);return n&&n.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new FC),this.We.getRemoteKeysForTarget(e).forEach(n=>{this.Xe(e,n,null)})}It(e,n){return this.We.getRemoteKeysForTarget(e).has(n)}}function Mg(){return new Hn(Je.comparator)}function VC(){return new Hn(Je.comparator)}const pF={asc:"ASCENDING",desc:"DESCENDING"},gF={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},mF={and:"AND",or:"OR"};class yF{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function $2(t,e){return t.useProto3Json||C1(e)?e:{value:e}}function Rm(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function GO(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function vF(t,e){return Rm(t,e.toTimestamp())}function Ss(t){return nn(!!t,49232),ht.fromTimestamp(function(n){const r=Rl(n);return new Rn(r.seconds,r.nanos)}(t))}function g_(t,e){return G2(t,e).canonicalString()}function G2(t,e){const n=function(i){return new _n(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function WO(t){const e=_n.fromString(t);return nn(QO(e),10190,{key:e.toString()}),e}function W2(t,e){return g_(t.databaseId,e.path)}function Px(t,e){const n=WO(e);if(n.get(1)!==t.databaseId.projectId)throw new He(Te.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new He(Te.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Je(qO(n))}function YO(t,e){return g_(t.databaseId,e)}function xF(t){const e=WO(t);return e.length===4?_n.emptyPath():qO(e)}function Y2(t){return new _n(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function qO(t){return nn(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function jC(t,e,n){return{name:W2(t,e),fields:n.value.mapValue.fields}}function wF(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:lt(39313,{state:d})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],a=function(d,f){return d.useProto3Json?(nn(f===void 0||typeof f=="string",58123),ni.fromBase64String(f||"")):(nn(f===void 0||f instanceof Buffer||f instanceof Uint8Array,16193),ni.fromUint8Array(f||new Uint8Array))}(t,e.targetChange.resumeToken),s=e.targetChange.cause,o=s&&function(d){const f=d.code===void 0?Te.UNKNOWN:HO(d.code);return new He(f,d.message||"")}(s);n=new $O(r,i,a,o||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Px(t,r.document.name),a=Ss(r.document.updateTime),s=r.document.createTime?Ss(r.document.createTime):ht.min(),o=new Li({mapValue:{fields:r.document.fields}}),c=ui.newFoundDocument(i,a,s,o),d=r.targetIds||[],f=r.removedTargetIds||[];n=new cm(d,f,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Px(t,r.document),a=r.readTime?Ss(r.readTime):ht.min(),s=ui.newNoDocument(i,a),o=r.removedTargetIds||[];n=new cm([],o,s.key,s)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Px(t,r.document),a=r.removedTargetIds||[];n=new cm([],a,i,null)}else{if(!("filter"in e))return lt(11601,{At:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:a}=r,s=new uF(i,a),o=r.targetId;n=new zO(o,s)}}return n}function _F(t,e){let n;if(e instanceof L0)n={update:jC(t,e.key,e.value)};else if(e instanceof k1)n={delete:W2(t,e.key)};else if(e instanceof Vl)n={update:jC(t,e.key,e.data),updateMask:RF(e.fieldMask)};else{if(!(e instanceof oF))return lt(16599,{Rt:e.type});n={verify:W2(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(a,s){const o=s.transform;if(o instanceof h0)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof p0)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof g0)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof Dm)return{fieldPath:s.field.canonicalString(),increment:o.Ee};throw lt(20930,{transform:s.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,a){return a.updateTime!==void 0?{updateTime:vF(i,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:lt(27497)}(t,e.precondition)),n}function bF(t,e){return t&&t.length>0?(nn(e!==void 0,14353),t.map(n=>function(i,a){let s=i.updateTime?Ss(i.updateTime):Ss(a);return s.isEqual(ht.min())&&(s=Ss(a)),new iF(s,i.transformResults||[])}(n,e))):[]}function AF(t,e){return{documents:[YO(t,e.path)]}}function EF(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=YO(t,i);const a=function(d){if(d.length!==0)return KO(qa.create(d,"and"))}(e.filters);a&&(n.structuredQuery.where=a);const s=function(d){if(d.length!==0)return d.map(f=>function(g){return{field:fd(g.field),direction:CF(g.dir)}}(f))}(e.orderBy);s&&(n.structuredQuery.orderBy=s);const o=$2(t,e.limit);return o!==null&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{Vt:n,parent:i}}function SF(t){let e=xF(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){nn(r===1,65062);const f=n.from[0];f.allDescendants?i=f.collectionId:e=e.child(f.collectionId)}let a=[];n.where&&(a=function(p){const g=XO(p);return g instanceof qa&&SO(g)?g.getFilters():[g]}(n.where));let s=[];n.orderBy&&(s=function(p){return p.map(g=>function(x){return new f0(hd(x.field),function(A){switch(A){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(x.direction))}(g))}(n.orderBy));let o=null;n.limit&&(o=function(p){let g;return g=typeof p=="object"?p.value:p,C1(g)?null:g}(n.limit));let c=null;n.startAt&&(c=function(p){const g=!!p.before,y=p.values||[];return new Cm(y,g)}(n.startAt));let d=null;return n.endAt&&(d=function(p){const g=!p.before,y=p.values||[];return new Cm(y,g)}(n.endAt)),$B(e,i,s,a,o,"F",c,d)}function TF(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return lt(28987,{purpose:i})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function XO(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=hd(n.unaryFilter.field);return fr.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=hd(n.unaryFilter.field);return fr.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=hd(n.unaryFilter.field);return fr.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=hd(n.unaryFilter.field);return fr.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return lt(61313);default:return lt(60726)}}(t):t.fieldFilter!==void 0?function(n){return fr.create(hd(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return lt(58110);default:return lt(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return qa.create(n.compositeFilter.filters.map(r=>XO(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return lt(1026)}}(n.compositeFilter.op))}(t):lt(30097,{filter:t})}function CF(t){return pF[t]}function IF(t){return gF[t]}function DF(t){return mF[t]}function fd(t){return{fieldPath:t.canonicalString()}}function hd(t){return Jr.fromServerFormat(t.fieldPath)}function KO(t){return t instanceof fr?function(n){if(n.op==="=="){if(CC(n.value))return{unaryFilter:{field:fd(n.field),op:"IS_NAN"}};if(TC(n.value))return{unaryFilter:{field:fd(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(CC(n.value))return{unaryFilter:{field:fd(n.field),op:"IS_NOT_NAN"}};if(TC(n.value))return{unaryFilter:{field:fd(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:fd(n.field),op:IF(n.op),value:n.value}}}(t):t instanceof qa?function(n){const r=n.getFilters().map(i=>KO(i));return r.length===1?r[0]:{compositeFilter:{op:DF(n.op),filters:r}}}(t):lt(54877,{filter:t})}function RF(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function QO(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xl{constructor(e,n,r,i,a=ht.min(),s=ht.min(),o=ni.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o,this.expectedCount=c}withSequenceNumber(e){return new xl(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new xl(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new xl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new xl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OF{constructor(e){this.gt=e}}function MF(t){const e=SF({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Im(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PF{constructor(){this.Dn=new kF}addToCollectionParentIndex(e,n){return this.Dn.add(n),De.resolve()}getCollectionParents(e,n){return De.resolve(this.Dn.getEntries(n))}addFieldIndex(e,n){return De.resolve()}deleteFieldIndex(e,n){return De.resolve()}deleteAllFieldIndexes(e){return De.resolve()}createTargetIndexes(e,n){return De.resolve()}getDocumentsMatchingTarget(e,n){return De.resolve(null)}getIndexType(e,n){return De.resolve(0)}getFieldIndexes(e,n){return De.resolve([])}getNextCollectionGroupToUpdate(e){return De.resolve(null)}getMinOffset(e,n){return De.resolve(Dl.min())}getMinOffsetFromCollectionGroup(e,n){return De.resolve(Dl.min())}updateCollectionGroup(e,n,r){return De.resolve()}updateIndexEntries(e,n){return De.resolve()}}class kF{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Dr(_n.comparator),a=!i.has(r);return this.index[n]=i.add(r),a}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Dr(_n.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UC={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},ZO=41943040;class Ni{static withCacheSize(e){return new Ni(e,Ni.DEFAULT_COLLECTION_PERCENTILE,Ni.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ni.DEFAULT_COLLECTION_PERCENTILE=10,Ni.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ni.DEFAULT=new Ni(ZO,Ni.DEFAULT_COLLECTION_PERCENTILE,Ni.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ni.DISABLED=new Ni(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hd{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new Hd(0)}static ur(){return new Hd(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HC="LruGarbageCollector",NF=1048576;function zC([t,e],[n,r]){const i=Et(t,n);return i===0?Et(e,r):i}class LF{constructor(e){this.Tr=e,this.buffer=new Dr(zC),this.Ir=0}dr(){return++this.Ir}Er(e){const n=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();zC(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class BF{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){$e(HC,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){cf(n)?$e(HC,"Ignoring IndexedDB error during garbage collection: ",n):await lf(n)}await this.Rr(3e5)})}}class FF{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.mr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return De.resolve(T1.ue);const r=new LF(n);return this.Vr.forEachTarget(e,i=>r.Er(i.sequenceNumber)).next(()=>this.Vr.gr(e,i=>r.Er(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Vr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?($e("LruGarbageCollector","Garbage collection skipped; disabled"),De.resolve(UC)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?($e("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),UC):this.pr(e,n))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,n){let r,i,a,s,o,c,d;const f=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?($e("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,s=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,o=Date.now(),this.removeTargets(e,r,n))).next(p=>(a=p,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(d=Date.now(),ud()<=Mt.DEBUG&&$e("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-f}ms
	Determined least recently used ${i} in `+(o-s)+`ms
	Removed ${a} targets in `+(c-o)+`ms
	Removed ${p} documents in `+(d-c)+`ms
Total Duration: ${d-f}ms`),De.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:p})))}}function VF(t,e){return new FF(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jF{constructor(){this.changes=new nu(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,ui.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?De.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UF{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HF{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&t0(r.mutation,i,Xi.empty(),Rn.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Pt()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Pt()){const i=Oc();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(a=>{let s=Bh();return a.forEach((o,c)=>{s=s.insert(o,c.overlayedDocument)}),s}))}getOverlayedDocuments(e,n){const r=Oc();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Pt()))}populateOverlays(e,n,r){const i=[];return r.forEach(a=>{n.has(a)||i.push(a)}),this.documentOverlayCache.getOverlays(e,i).next(a=>{a.forEach((s,o)=>{n.set(s,o)})})}computeViews(e,n,r,i){let a=wo();const s=e0(),o=function(){return e0()}();return n.forEach((c,d)=>{const f=r.get(d.key);i.has(d.key)&&(f===void 0||f.mutation instanceof Vl)?a=a.insert(d.key,d):f!==void 0?(s.set(d.key,f.mutation.getFieldMask()),t0(f.mutation,d,f.mutation.getFieldMask(),Rn.now())):s.set(d.key,Xi.empty())}),this.recalculateAndSaveOverlays(e,a).next(c=>(c.forEach((d,f)=>s.set(d,f)),n.forEach((d,f)=>{var p;return o.set(d,new UF(f,(p=s.get(d))!==null&&p!==void 0?p:null))}),o))}recalculateAndSaveOverlays(e,n){const r=e0();let i=new Hn((s,o)=>s-o),a=Pt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(s=>{for(const o of s)o.keys().forEach(c=>{const d=n.get(c);if(d===null)return;let f=r.get(c)||Xi.empty();f=o.applyToLocalView(d,f),r.set(c,f);const p=(i.get(o.batchId)||Pt()).add(c);i=i.insert(o.batchId,p)})}).next(()=>{const s=[],o=i.getReverseIterator();for(;o.hasNext();){const c=o.getNext(),d=c.key,f=c.value,p=kO();f.forEach(g=>{if(!a.has(g)){const y=jO(n.get(g),r.get(g));y!==null&&p.set(g,y),a=a.add(g)}}),s.push(this.documentOverlayCache.saveOverlays(e,d,p))}return De.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(s){return Je.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):DO(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(a=>{const s=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-a.size):De.resolve(Oc());let o=l0,c=a;return s.next(d=>De.forEach(d,(f,p)=>(o<p.largestBatchId&&(o=p.largestBatchId),a.get(f)?De.resolve():this.remoteDocumentCache.getEntry(e,f).next(g=>{c=c.insert(f,g)}))).next(()=>this.populateOverlays(e,d,a)).next(()=>this.computeViews(e,c,d,Pt())).next(f=>({batchId:o,changes:PO(f)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Je(n)).next(r=>{let i=Bh();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const a=n.collectionGroup;let s=Bh();return this.indexManager.getCollectionParents(e,a).next(o=>De.forEach(o,c=>{const d=function(p,g){return new tu(g,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,c.child(a));return this.getDocumentsMatchingCollectionQuery(e,d,r,i).next(f=>{f.forEach((p,g)=>{s=s.insert(p,g)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,r,i){let a;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(s=>(a=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,a,i))).next(s=>{a.forEach((c,d)=>{const f=d.getKey();s.get(f)===null&&(s=s.insert(f,ui.newInvalidDocument(f)))});let o=Bh();return s.forEach((c,d)=>{const f=a.get(c);f!==void 0&&t0(f.mutation,d,Xi.empty(),Rn.now()),O1(n,d)&&(o=o.insert(c,d))}),o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zF{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,n){return De.resolve(this.Br.get(n))}saveBundleMetadata(e,n){return this.Br.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Ss(i.createTime)}}(n)),De.resolve()}getNamedQuery(e,n){return De.resolve(this.Lr.get(n))}saveNamedQuery(e,n){return this.Lr.set(n.name,function(i){return{name:i.name,query:MF(i.bundledQuery),readTime:Ss(i.readTime)}}(n)),De.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $F{constructor(){this.overlays=new Hn(Je.comparator),this.kr=new Map}getOverlay(e,n){return De.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Oc();return De.forEach(n,i=>this.getOverlay(e,i).next(a=>{a!==null&&r.set(i,a)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,a)=>{this.wt(e,n,a)}),De.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.kr.get(r);return i!==void 0&&(i.forEach(a=>this.overlays=this.overlays.remove(a)),this.kr.delete(r)),De.resolve()}getOverlaysForCollection(e,n,r){const i=Oc(),a=n.length+1,s=new Je(n.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){const c=o.getNext().value,d=c.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===a&&c.largestBatchId>r&&i.set(c.getKey(),c)}return De.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let a=new Hn((d,f)=>d-f);const s=this.overlays.getIterator();for(;s.hasNext();){const d=s.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let f=a.get(d.largestBatchId);f===null&&(f=Oc(),a=a.insert(d.largestBatchId,f)),f.set(d.getKey(),d)}}const o=Oc(),c=a.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((d,f)=>o.set(d,f)),!(o.size()>=i)););return De.resolve(o)}wt(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const s=this.kr.get(i.largestBatchId).delete(r.key);this.kr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new cF(n,r));let a=this.kr.get(n);a===void 0&&(a=Pt(),this.kr.set(n,a)),this.kr.set(n,a.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GF{constructor(){this.sessionToken=ni.EMPTY_BYTE_STRING}getSessionToken(e){return De.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,De.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m_{constructor(){this.qr=new Dr(Fr.Qr),this.$r=new Dr(Fr.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,n){const r=new Fr(e,n);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Wr(new Fr(e,n))}Gr(e,n){e.forEach(r=>this.removeReference(r,n))}zr(e){const n=new Je(new _n([])),r=new Fr(n,e),i=new Fr(n,e+1),a=[];return this.$r.forEachInRange([r,i],s=>{this.Wr(s),a.push(s.key)}),a}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const n=new Je(new _n([])),r=new Fr(n,e),i=new Fr(n,e+1);let a=Pt();return this.$r.forEachInRange([r,i],s=>{a=a.add(s.key)}),a}containsKey(e){const n=new Fr(e,0),r=this.qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Fr{constructor(e,n){this.key=e,this.Hr=n}static Qr(e,n){return Je.comparator(e.key,n.key)||Et(e.Hr,n.Hr)}static Ur(e,n){return Et(e.Hr,n.Hr)||Je.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WF{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.er=1,this.Yr=new Dr(Fr.Qr)}checkEmpty(e){return De.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const a=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new lF(a,n,r,i);this.mutationQueue.push(s);for(const o of i)this.Yr=this.Yr.add(new Fr(o.key,a)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return De.resolve(s)}lookupMutationBatch(e,n){return De.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.Xr(r),a=i<0?0:i;return De.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return De.resolve(this.mutationQueue.length===0?o_:this.er-1)}getAllMutationBatches(e){return De.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Fr(n,0),i=new Fr(n,Number.POSITIVE_INFINITY),a=[];return this.Yr.forEachInRange([r,i],s=>{const o=this.Zr(s.Hr);a.push(o)}),De.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Dr(Et);return n.forEach(i=>{const a=new Fr(i,0),s=new Fr(i,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([a,s],o=>{r=r.add(o.Hr)})}),De.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let a=r;Je.isDocumentKey(a)||(a=a.child(""));const s=new Fr(new Je(a),0);let o=new Dr(Et);return this.Yr.forEachWhile(c=>{const d=c.key.path;return!!r.isPrefixOf(d)&&(d.length===i&&(o=o.add(c.Hr)),!0)},s),De.resolve(this.ei(o))}ei(e){const n=[];return e.forEach(r=>{const i=this.Zr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){nn(this.ti(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return De.forEach(n.mutations,i=>{const a=new Fr(i.key,n.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Yr=r})}rr(e){}containsKey(e,n){const r=new Fr(n,0),i=this.Yr.firstAfterOrEqual(r);return De.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,De.resolve()}ti(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YF{constructor(e){this.ni=e,this.docs=function(){return new Hn(Je.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),a=i?i.size:0,s=this.ni(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:s}),this.size+=s-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return De.resolve(r?r.document.mutableCopy():ui.newInvalidDocument(n))}getEntries(e,n){let r=wo();return n.forEach(i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():ui.newInvalidDocument(i))}),De.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let a=wo();const s=n.path,o=new Je(s.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(o);for(;c.hasNext();){const{key:d,value:{document:f}}=c.getNext();if(!s.isPrefixOf(d.path))break;d.path.length>s.length+1||bB(_B(f),r)<=0||(i.has(f.key)||O1(n,f))&&(a=a.insert(f.key,f.mutableCopy()))}return De.resolve(a)}getAllFromCollectionGroup(e,n,r,i){lt(9500)}ri(e,n){return De.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new qF(this)}getSize(e){return De.resolve(this.size)}}class qF extends jF{constructor(e){super(),this.Or=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Or.addEntry(e,i)):this.Or.removeEntry(r)}),De.waitFor(n)}getFromCache(e,n){return this.Or.getEntry(e,n)}getAllFromCache(e,n){return this.Or.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XF{constructor(e){this.persistence=e,this.ii=new nu(n=>u_(n),d_),this.lastRemoteSnapshotVersion=ht.min(),this.highestTargetId=0,this.si=0,this.oi=new m_,this.targetCount=0,this._i=Hd.ar()}forEachTarget(e,n){return this.ii.forEach((r,i)=>n(i)),De.resolve()}getLastRemoteSnapshotVersion(e){return De.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return De.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),De.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.si&&(this.si=n),De.resolve()}hr(e){this.ii.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this._i=new Hd(n),this.highestTargetId=n),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,n){return this.hr(n),this.targetCount+=1,De.resolve()}updateTargetData(e,n){return this.hr(n),De.resolve()}removeTargetData(e,n){return this.ii.delete(n.target),this.oi.zr(n.targetId),this.targetCount-=1,De.resolve()}removeTargets(e,n,r){let i=0;const a=[];return this.ii.forEach((s,o)=>{o.sequenceNumber<=n&&r.get(o.targetId)===null&&(this.ii.delete(s),a.push(this.removeMatchingKeysForTargetId(e,o.targetId)),i++)}),De.waitFor(a).next(()=>i)}getTargetCount(e){return De.resolve(this.targetCount)}getTargetData(e,n){const r=this.ii.get(n)||null;return De.resolve(r)}addMatchingKeys(e,n,r){return this.oi.Kr(n,r),De.resolve()}removeMatchingKeys(e,n,r){this.oi.Gr(n,r);const i=this.persistence.referenceDelegate,a=[];return i&&n.forEach(s=>{a.push(i.markPotentiallyOrphaned(e,s))}),De.waitFor(a)}removeMatchingKeysForTargetId(e,n){return this.oi.zr(n),De.resolve()}getMatchingKeysForTargetId(e,n){const r=this.oi.Jr(n);return De.resolve(r)}containsKey(e,n){return De.resolve(this.oi.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JO{constructor(e,n){this.ai={},this.overlays={},this.ui=new T1(0),this.ci=!1,this.ci=!0,this.li=new GF,this.referenceDelegate=e(this),this.hi=new XF(this),this.indexManager=new PF,this.remoteDocumentCache=function(i){return new YF(i)}(r=>this.referenceDelegate.Pi(r)),this.serializer=new OF(n),this.Ti=new zF(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new $F,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ai[e.toKey()];return r||(r=new WF(n,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,n,r){$e("MemoryPersistence","Starting transaction:",e);const i=new KF(this.ui.next());return this.referenceDelegate.Ii(),r(i).next(a=>this.referenceDelegate.di(i).next(()=>a)).toPromise().then(a=>(i.raiseOnCommittedEvent(),a))}Ei(e,n){return De.or(Object.values(this.ai).map(r=>()=>r.containsKey(e,n)))}}class KF extends EB{constructor(e){super(),this.currentSequenceNumber=e}}class y_{constructor(e){this.persistence=e,this.Ai=new m_,this.Ri=null}static Vi(e){return new y_(e)}get mi(){if(this.Ri)return this.Ri;throw lt(60996)}addReference(e,n,r){return this.Ai.addReference(r,n),this.mi.delete(r.toString()),De.resolve()}removeReference(e,n,r){return this.Ai.removeReference(r,n),this.mi.add(r.toString()),De.resolve()}markPotentiallyOrphaned(e,n){return this.mi.add(n.toString()),De.resolve()}removeTarget(e,n){this.Ai.zr(n.targetId).forEach(i=>this.mi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(a=>this.mi.add(a.toString()))}).next(()=>r.removeTargetData(e,n))}Ii(){this.Ri=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return De.forEach(this.mi,r=>{const i=Je.fromPath(r);return this.fi(e,i).next(a=>{a||n.removeEntry(i,ht.min())})}).next(()=>(this.Ri=null,n.apply(e)))}updateLimboDocument(e,n){return this.fi(e,n).next(r=>{r?this.mi.delete(n.toString()):this.mi.add(n.toString())})}Pi(e){return 0}fi(e,n){return De.or([()=>De.resolve(this.Ai.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class Om{constructor(e,n){this.persistence=e,this.gi=new nu(r=>CB(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=VF(this,n)}static Vi(e,n){return new Om(e,n)}Ii(){}di(e){return De.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}mr(e){const n=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}yr(e){let n=0;return this.gr(e,r=>{n++}).next(()=>n)}gr(e,n){return De.forEach(this.gi,(r,i)=>this.Sr(e,r,i).next(a=>a?De.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),a=i.newChangeBuffer();return i.ri(e,s=>this.Sr(e,s,n).next(o=>{o||(r++,a.removeEntry(s,ht.min()))})).next(()=>a.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.gi.set(n,e.currentSequenceNumber),De.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),De.resolve()}removeReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),De.resolve()}updateLimboDocument(e,n){return this.gi.set(n,e.currentSequenceNumber),De.resolve()}Pi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=sm(e.data.value)),n}Sr(e,n,r){return De.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.gi.get(n);return De.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v_{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Is=r,this.ds=i}static Es(e,n){let r=Pt(),i=Pt();for(const a of n.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new v_(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QF{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZF{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=function(){return D5()?8:SB(pi())>0?6:4}()}initialize(e,n){this.gs=e,this.indexManager=n,this.As=!0}getDocumentsMatchingQuery(e,n,r,i){const a={result:null};return this.ps(e,n).next(s=>{a.result=s}).next(()=>{if(!a.result)return this.ys(e,n,i,r).next(s=>{a.result=s})}).next(()=>{if(a.result)return;const s=new QF;return this.ws(e,n,s).next(o=>{if(a.result=o,this.Rs)return this.Ss(e,n,s,o.size)})}).next(()=>a.result)}Ss(e,n,r,i){return r.documentReadCount<this.Vs?(ud()<=Mt.DEBUG&&$e("QueryEngine","SDK will not create cache indexes for query:",dd(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),De.resolve()):(ud()<=Mt.DEBUG&&$e("QueryEngine","Query:",dd(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.fs*i?(ud()<=Mt.DEBUG&&$e("QueryEngine","The SDK decides to create cache indexes for query:",dd(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Es(n))):De.resolve())}ps(e,n){if(OC(n))return De.resolve(null);let r=Es(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Im(n,null,"F"),r=Es(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(a=>{const s=Pt(...a);return this.gs.getDocuments(e,s).next(o=>this.indexManager.getMinOffset(e,r).next(c=>{const d=this.bs(n,o);return this.Ds(n,d,s,c.readTime)?this.ps(e,Im(n,null,"F")):this.vs(e,d,n,c)}))})))}ys(e,n,r,i){return OC(n)||i.isEqual(ht.min())?De.resolve(null):this.gs.getDocuments(e,r).next(a=>{const s=this.bs(n,a);return this.Ds(n,s,r,i)?De.resolve(null):(ud()<=Mt.DEBUG&&$e("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),dd(n)),this.vs(e,s,n,wB(i,l0)).next(o=>o))})}bs(e,n){let r=new Dr(OO(e));return n.forEach((i,a)=>{O1(e,a)&&(r=r.add(a))}),r}Ds(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const a=e.limitType==="F"?n.last():n.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}ws(e,n,r){return ud()<=Mt.DEBUG&&$e("QueryEngine","Using full collection scan to execute query:",dd(n)),this.gs.getDocumentsMatchingQuery(e,n,Dl.min(),r)}vs(e,n,r,i){return this.gs.getDocumentsMatchingQuery(e,r,i).next(a=>(n.forEach(s=>{a=a.insert(s.key,s)}),a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x_="LocalStore",JF=3e8;class eV{constructor(e,n,r,i){this.persistence=e,this.Cs=n,this.serializer=i,this.Fs=new Hn(Et),this.Ms=new nu(a=>u_(a),d_),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new HF(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Fs))}}function tV(t,e,n,r){return new eV(t,e,n,r)}async function eM(t,e){const n=mt(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(a=>(i=a,n.Ns(e),n.mutationQueue.getAllMutationBatches(r))).next(a=>{const s=[],o=[];let c=Pt();for(const d of i){s.push(d.batchId);for(const f of d.mutations)c=c.add(f.key)}for(const d of a){o.push(d.batchId);for(const f of d.mutations)c=c.add(f.key)}return n.localDocuments.getDocuments(r,c).next(d=>({Bs:d,removedBatchIds:s,addedBatchIds:o}))})})}function nV(t,e){const n=mt(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),a=n.Os.newChangeBuffer({trackRemovals:!0});return function(o,c,d,f){const p=d.batch,g=p.keys();let y=De.resolve();return g.forEach(x=>{y=y.next(()=>f.getEntry(c,x)).next(_=>{const A=d.docVersions.get(x);nn(A!==null,48541),_.version.compareTo(A)<0&&(p.applyToRemoteDocument(_,d),_.isValidDocument()&&(_.setReadTime(d.commitVersion),f.addEntry(_)))})}),y.next(()=>o.mutationQueue.removeMutationBatch(c,p))}(n,r,e,a).next(()=>a.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(o){let c=Pt();for(let d=0;d<o.mutationResults.length;++d)o.mutationResults[d].transformResults.length>0&&(c=c.add(o.batch.mutations[d].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function tM(t){const e=mt(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.hi.getLastRemoteSnapshotVersion(n))}function rV(t,e){const n=mt(t),r=e.snapshotVersion;let i=n.Fs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const s=n.Os.newChangeBuffer({trackRemovals:!0});i=n.Fs;const o=[];e.targetChanges.forEach((f,p)=>{const g=i.get(p);if(!g)return;o.push(n.hi.removeMatchingKeys(a,f.removedDocuments,p).next(()=>n.hi.addMatchingKeys(a,f.addedDocuments,p)));let y=g.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(p)!==null?y=y.withResumeToken(ni.EMPTY_BYTE_STRING,ht.min()).withLastLimboFreeSnapshotVersion(ht.min()):f.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(f.resumeToken,r)),i=i.insert(p,y),function(_,A,E){return _.resumeToken.approximateByteSize()===0||A.snapshotVersion.toMicroseconds()-_.snapshotVersion.toMicroseconds()>=JF?!0:E.addedDocuments.size+E.modifiedDocuments.size+E.removedDocuments.size>0}(g,y,f)&&o.push(n.hi.updateTargetData(a,y))});let c=wo(),d=Pt();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(a,f))}),o.push(iV(a,s,e.documentUpdates).next(f=>{c=f.Ls,d=f.ks})),!r.isEqual(ht.min())){const f=n.hi.getLastRemoteSnapshotVersion(a).next(p=>n.hi.setTargetsMetadata(a,a.currentSequenceNumber,r));o.push(f)}return De.waitFor(o).next(()=>s.apply(a)).next(()=>n.localDocuments.getLocalViewOfDocuments(a,c,d)).next(()=>c)}).then(a=>(n.Fs=i,a))}function iV(t,e,n){let r=Pt(),i=Pt();return n.forEach(a=>r=r.add(a)),e.getEntries(t,r).next(a=>{let s=wo();return n.forEach((o,c)=>{const d=a.get(o);c.isFoundDocument()!==d.isFoundDocument()&&(i=i.add(o)),c.isNoDocument()&&c.version.isEqual(ht.min())?(e.removeEntry(o,c.readTime),s=s.insert(o,c)):!d.isValidDocument()||c.version.compareTo(d.version)>0||c.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(c),s=s.insert(o,c)):$e(x_,"Ignoring outdated watch update for ",o,". Current version:",d.version," Watch version:",c.version)}),{Ls:s,ks:i}})}function aV(t,e){const n=mt(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=o_),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function sV(t,e){const n=mt(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.hi.getTargetData(r,e).next(a=>a?(i=a,De.resolve(i)):n.hi.allocateTargetId(r).next(s=>(i=new xl(e,s,"TargetPurposeListen",r.currentSequenceNumber),n.hi.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.Fs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Fs=n.Fs.insert(r.targetId,r),n.Ms.set(e,r.targetId)),r})}async function q2(t,e,n){const r=mt(t),i=r.Fs.get(e),a=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",a,s=>r.persistence.referenceDelegate.removeTarget(s,i))}catch(s){if(!cf(s))throw s;$e(x_,`Failed to update sequence numbers for target ${e}: ${s}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(i.target)}function $C(t,e,n){const r=mt(t);let i=ht.min(),a=Pt();return r.persistence.runTransaction("Execute query","readwrite",s=>function(c,d,f){const p=mt(c),g=p.Ms.get(f);return g!==void 0?De.resolve(p.Fs.get(g)):p.hi.getTargetData(d,f)}(r,s,Es(e)).next(o=>{if(o)return i=o.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(s,o.targetId).next(c=>{a=c})}).next(()=>r.Cs.getDocumentsMatchingQuery(s,e,n?i:ht.min(),n?a:Pt())).next(o=>(oV(r,WB(e),o),{documents:o,qs:a})))}function oV(t,e,n){let r=t.xs.get(e)||ht.min();n.forEach((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),t.xs.set(e,r)}class GC{constructor(){this.activeTargetIds=ZB()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class lV{constructor(){this.Fo=new GC,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,n,r){this.Mo[e]=n}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new GC,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cV{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WC="ConnectivityMonitor";class YC{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){$e(WC,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){$e(WC,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Pg=null;function X2(){return Pg===null?Pg=function(){return 268435456+Math.round(2147483648*Math.random())}():Pg++,"0x"+Pg.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kx="RestConnection",uV={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class dV{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.$o=n+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.Ko=this.databaseId.database===Sm?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,n,r,i,a){const s=X2(),o=this.Go(e,n.toUriEncodedString());$e(kx,`Sending RPC '${e}' ${s}:`,o,r);const c={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(c,i,a);const{host:d}=new URL(o),f=rf(d);return this.jo(e,o,c,r,f).then(p=>($e(kx,`Received RPC '${e}' ${s}: `,p),p),p=>{throw Il(kx,`RPC '${e}' ${s} failed with error: `,p,"url: ",o,"request:",r),p})}Jo(e,n,r,i,a,s){return this.Wo(e,n,r,i,a)}zo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+of}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,a)=>e[a]=i),r&&r.headers.forEach((i,a)=>e[a]=i)}Go(e,n){const r=uV[e];return`${this.$o}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fV{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ai="WebChannelConnection";class hV extends dV{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,n,r,i,a){const s=X2();return new Promise((o,c)=>{const d=new iO;d.setWithCredentials(!0),d.listenOnce(aO.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case am.NO_ERROR:const p=d.getResponseJson();$e(ai,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(p)),o(p);break;case am.TIMEOUT:$e(ai,`RPC '${e}' ${s} timed out`),c(new He(Te.DEADLINE_EXCEEDED,"Request time out"));break;case am.HTTP_ERROR:const g=d.getStatus();if($e(ai,`RPC '${e}' ${s} failed with status:`,g,"response text:",d.getResponseText()),g>0){let y=d.getResponseJson();Array.isArray(y)&&(y=y[0]);const x=y==null?void 0:y.error;if(x&&x.status&&x.message){const _=function(E){const T=E.toLowerCase().replace(/_/g,"-");return Object.values(Te).indexOf(T)>=0?T:Te.UNKNOWN}(x.status);c(new He(_,x.message))}else c(new He(Te.UNKNOWN,"Server responded with status "+d.getStatus()))}else c(new He(Te.UNAVAILABLE,"Connection failed."));break;default:lt(9055,{c_:e,streamId:s,l_:d.getLastErrorCode(),h_:d.getLastError()})}}finally{$e(ai,`RPC '${e}' ${s} completed.`)}});const f=JSON.stringify(i);$e(ai,`RPC '${e}' ${s} sending request:`,i),d.send(n,"POST",f,r,15)})}P_(e,n,r){const i=X2(),a=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=lO(),o=oO(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(c.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(c.useFetchStreams=!0),this.zo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;const f=a.join("");$e(ai,`Creating RPC '${e}' stream ${i}: ${f}`,c);const p=s.createWebChannel(f,c);this.T_(p);let g=!1,y=!1;const x=new fV({Ho:A=>{y?$e(ai,`Not sending because RPC '${e}' stream ${i} is closed:`,A):(g||($e(ai,`Opening RPC '${e}' stream ${i} transport.`),p.open(),g=!0),$e(ai,`RPC '${e}' stream ${i} sending:`,A),p.send(A))},Yo:()=>p.close()}),_=(A,E,T)=>{A.listen(E,C=>{try{T(C)}catch(D){setTimeout(()=>{throw D},0)}})};return _(p,Lh.EventType.OPEN,()=>{y||($e(ai,`RPC '${e}' stream ${i} transport opened.`),x.s_())}),_(p,Lh.EventType.CLOSE,()=>{y||(y=!0,$e(ai,`RPC '${e}' stream ${i} transport closed`),x.__(),this.I_(p))}),_(p,Lh.EventType.ERROR,A=>{y||(y=!0,Il(ai,`RPC '${e}' stream ${i} transport errored. Name:`,A.name,"Message:",A.message),x.__(new He(Te.UNAVAILABLE,"The operation could not be completed")))}),_(p,Lh.EventType.MESSAGE,A=>{var E;if(!y){const T=A.data[0];nn(!!T,16349);const C=T,D=(C==null?void 0:C.error)||((E=C[0])===null||E===void 0?void 0:E.error);if(D){$e(ai,`RPC '${e}' stream ${i} received error:`,D);const k=D.status;let B=function(R){const V=dr[R];if(V!==void 0)return HO(V)}(k),O=D.message;B===void 0&&(B=Te.INTERNAL,O="Unknown error status: "+k+" with message "+D.message),y=!0,x.__(new He(B,O)),p.close()}else $e(ai,`RPC '${e}' stream ${i} received:`,T),x.a_(T)}}),_(o,sO.STAT_EVENT,A=>{A.stat===B2.PROXY?$e(ai,`RPC '${e}' stream ${i} detected buffering proxy`):A.stat===B2.NOPROXY&&$e(ai,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{x.o_()},0),x}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(n=>n===e)}}function Nx(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L1(t){return new yF(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nM{constructor(e,n,r=1e3,i=1.5,a=6e4){this.Fi=e,this.timerId=n,this.d_=r,this.E_=i,this.A_=a,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const n=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),i=Math.max(0,n-r);i>0&&$e("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.R_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,i,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qC="PersistentStream";class rM{constructor(e,n,r,i,a,s,o,c){this.Fi=e,this.w_=r,this.S_=i,this.connection=a,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=c,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new nM(e,n)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():n&&n.code===Te.RESOURCE_EXHAUSTED?(xo(n.toString()),xo("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):n&&n.code===Te.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(n)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),n=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.b_===n&&this.W_(r,i)},r=>{e(()=>{const i=new He(Te.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(i)})})}W_(e,n){const r=this.K_(this.b_);this.stream=this.z_(e,n),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(i=>{r(()=>this.G_(i))}),this.stream.onMessage(i=>{r(()=>++this.C_==1?this.j_(i):this.onNext(i))})}O_(){this.state=5,this.F_.g_(async()=>{this.state=0,this.start()})}G_(e){return $e(qC,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return n=>{this.Fi.enqueueAndForget(()=>this.b_===e?n():($e(qC,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class pV extends rM{constructor(e,n,r,i,a,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,s),this.serializer=a}z_(e,n){return this.connection.P_("Listen",e,n)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const n=wF(this.serializer,e),r=function(a){if(!("targetChange"in a))return ht.min();const s=a.targetChange;return s.targetIds&&s.targetIds.length?ht.min():s.readTime?Ss(s.readTime):ht.min()}(e);return this.listener.J_(n,r)}H_(e){const n={};n.database=Y2(this.serializer),n.addTarget=function(a,s){let o;const c=s.target;if(o=H2(c)?{documents:AF(a,c)}:{query:EF(a,c).Vt},o.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){o.resumeToken=GO(a,s.resumeToken);const d=$2(a,s.expectedCount);d!==null&&(o.expectedCount=d)}else if(s.snapshotVersion.compareTo(ht.min())>0){o.readTime=Rm(a,s.snapshotVersion.toTimestamp());const d=$2(a,s.expectedCount);d!==null&&(o.expectedCount=d)}return o}(this.serializer,e);const r=TF(this.serializer,e);r&&(n.labels=r),this.k_(n)}Y_(e){const n={};n.database=Y2(this.serializer),n.removeTarget=e,this.k_(n)}}class gV extends rM{constructor(e,n,r,i,a,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,s),this.serializer=a}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,n){return this.connection.P_("Write",e,n)}j_(e){return nn(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,nn(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){nn(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const n=bF(e.writeResults,e.commitTime),r=Ss(e.commitTime);return this.listener.ta(r,n)}na(){const e={};e.database=Y2(this.serializer),this.k_(e)}X_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>_F(this.serializer,r))};this.k_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mV{}class yV extends mV{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ra=!1}ia(){if(this.ra)throw new He(Te.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,r,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,s])=>this.connection.Wo(e,G2(n,r),i,a,s)).catch(a=>{throw a.name==="FirebaseError"?(a.code===Te.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new He(Te.UNKNOWN,a.toString())})}Jo(e,n,r,i,a){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Jo(e,G2(n,r),i,s,o,a)).catch(s=>{throw s.name==="FirebaseError"?(s.code===Te.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new He(Te.UNKNOWN,s.toString())})}terminate(){this.ra=!0,this.connection.terminate()}}class vV{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(xo(n),this._a=!1):$e("OnlineStateTracker",n)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qc="RemoteStore";class xV{constructor(e,n,r,i,a){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=a,this.Ea.xo(s=>{r.enqueueAndForget(async()=>{ru(this)&&($e(qc,"Restarting streams for network reachability change."),await async function(c){const d=mt(c);d.Ia.add(4),await F0(d),d.Aa.set("Unknown"),d.Ia.delete(4),await B1(d)}(this))})}),this.Aa=new vV(r,i)}}async function B1(t){if(ru(t))for(const e of t.da)await e(!0)}async function F0(t){for(const e of t.da)await e(!1)}function iM(t,e){const n=mt(t);n.Ta.has(e.targetId)||(n.Ta.set(e.targetId,e),A_(n)?b_(n):uf(n).x_()&&__(n,e))}function w_(t,e){const n=mt(t),r=uf(n);n.Ta.delete(e),r.x_()&&aM(n,e),n.Ta.size===0&&(r.x_()?r.B_():ru(n)&&n.Aa.set("Unknown"))}function __(t,e){if(t.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ht.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}uf(t).H_(e)}function aM(t,e){t.Ra.$e(e),uf(t).Y_(e)}function b_(t){t.Ra=new hF({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>t.Ta.get(e)||null,lt:()=>t.datastore.serializer.databaseId}),uf(t).start(),t.Aa.aa()}function A_(t){return ru(t)&&!uf(t).M_()&&t.Ta.size>0}function ru(t){return mt(t).Ia.size===0}function sM(t){t.Ra=void 0}async function wV(t){t.Aa.set("Online")}async function _V(t){t.Ta.forEach((e,n)=>{__(t,e)})}async function bV(t,e){sM(t),A_(t)?(t.Aa.la(e),b_(t)):t.Aa.set("Unknown")}async function AV(t,e,n){if(t.Aa.set("Online"),e instanceof $O&&e.state===2&&e.cause)try{await async function(i,a){const s=a.cause;for(const o of a.targetIds)i.Ta.has(o)&&(await i.remoteSyncer.rejectListen(o,s),i.Ta.delete(o),i.Ra.removeTarget(o))}(t,e)}catch(r){$e(qc,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Mm(t,r)}else if(e instanceof cm?t.Ra.Ye(e):e instanceof zO?t.Ra.it(e):t.Ra.et(e),!n.isEqual(ht.min()))try{const r=await tM(t.localStore);n.compareTo(r)>=0&&await function(a,s){const o=a.Ra.Pt(s);return o.targetChanges.forEach((c,d)=>{if(c.resumeToken.approximateByteSize()>0){const f=a.Ta.get(d);f&&a.Ta.set(d,f.withResumeToken(c.resumeToken,s))}}),o.targetMismatches.forEach((c,d)=>{const f=a.Ta.get(c);if(!f)return;a.Ta.set(c,f.withResumeToken(ni.EMPTY_BYTE_STRING,f.snapshotVersion)),aM(a,c);const p=new xl(f.target,c,d,f.sequenceNumber);__(a,p)}),a.remoteSyncer.applyRemoteEvent(o)}(t,n)}catch(r){$e(qc,"Failed to raise snapshot:",r),await Mm(t,r)}}async function Mm(t,e,n){if(!cf(e))throw e;t.Ia.add(1),await F0(t),t.Aa.set("Offline"),n||(n=()=>tM(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{$e(qc,"Retrying IndexedDB access"),await n(),t.Ia.delete(1),await B1(t)})}function oM(t,e){return e().catch(n=>Mm(t,n,e))}async function F1(t){const e=mt(t),n=Pl(e);let r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:o_;for(;EV(e);)try{const i=await aV(e.localStore,r);if(i===null){e.Pa.length===0&&n.B_();break}r=i.batchId,SV(e,i)}catch(i){await Mm(e,i)}lM(e)&&cM(e)}function EV(t){return ru(t)&&t.Pa.length<10}function SV(t,e){t.Pa.push(e);const n=Pl(t);n.x_()&&n.Z_&&n.X_(e.mutations)}function lM(t){return ru(t)&&!Pl(t).M_()&&t.Pa.length>0}function cM(t){Pl(t).start()}async function TV(t){Pl(t).na()}async function CV(t){const e=Pl(t);for(const n of t.Pa)e.X_(n.mutations)}async function IV(t,e,n){const r=t.Pa.shift(),i=h_.from(r,e,n);await oM(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await F1(t)}async function DV(t,e){e&&Pl(t).Z_&&await async function(r,i){if(function(s){return dF(s)&&s!==Te.ABORTED}(i.code)){const a=r.Pa.shift();Pl(r).N_(),await oM(r,()=>r.remoteSyncer.rejectFailedWrite(a.batchId,i)),await F1(r)}}(t,e),lM(t)&&cM(t)}async function XC(t,e){const n=mt(t);n.asyncQueue.verifyOperationInProgress(),$e(qc,"RemoteStore received new credentials");const r=ru(n);n.Ia.add(3),await F0(n),r&&n.Aa.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ia.delete(3),await B1(n)}async function RV(t,e){const n=mt(t);e?(n.Ia.delete(2),await B1(n)):e||(n.Ia.add(2),await F0(n),n.Aa.set("Unknown"))}function uf(t){return t.Va||(t.Va=function(n,r,i){const a=mt(n);return a.ia(),new pV(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)}(t.datastore,t.asyncQueue,{Zo:wV.bind(null,t),e_:_V.bind(null,t),n_:bV.bind(null,t),J_:AV.bind(null,t)}),t.da.push(async e=>{e?(t.Va.N_(),A_(t)?b_(t):t.Aa.set("Unknown")):(await t.Va.stop(),sM(t))})),t.Va}function Pl(t){return t.ma||(t.ma=function(n,r,i){const a=mt(n);return a.ia(),new gV(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)}(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),e_:TV.bind(null,t),n_:DV.bind(null,t),ea:CV.bind(null,t),ta:IV.bind(null,t)}),t.da.push(async e=>{e?(t.ma.N_(),await F1(t)):(await t.ma.stop(),t.Pa.length>0&&($e(qc,`Stopping write stream with ${t.Pa.length} pending writes`),t.Pa=[]))})),t.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E_{constructor(e,n,r,i,a){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new po,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,a){const s=Date.now()+r,o=new E_(e,n,s,i,a);return o.start(r),o}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new He(Te.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function S_(t,e){if(xo("AsyncQueue",`${e}: ${t}`),cf(t))return new He(Te.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dd{static emptySet(e){return new Dd(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||Je.comparator(n.key,r.key):(n,r)=>Je.comparator(n.key,r.key),this.keyedMap=Bh(),this.sortedSet=new Hn(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Dd)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Dd;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KC{constructor(){this.fa=new Hn(Je.comparator)}track(e){const n=e.doc.key,r=this.fa.get(n);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(n,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(n):e.type===1&&r.type===2?this.fa=this.fa.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):lt(63341,{At:e,ga:r}):this.fa=this.fa.insert(n,e)}pa(){const e=[];return this.fa.inorderTraversal((n,r)=>{e.push(r)}),e}}class zd{constructor(e,n,r,i,a,s,o,c,d){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=c,this.hasCachedResults=d}static fromInitialDocuments(e,n,r,i,a){const s=[];return n.forEach(o=>{s.push({type:0,doc:o})}),new zd(e,n,Dd.emptySet(n),s,r,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&R1(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OV{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}}class MV{constructor(){this.queries=QC(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(n,r){const i=mt(n),a=i.queries;i.queries=QC(),a.forEach((s,o)=>{for(const c of o.wa)c.onError(r)})})(this,new He(Te.ABORTED,"Firestore shutting down"))}}function QC(){return new nu(t=>RO(t),R1)}async function T_(t,e){const n=mt(t);let r=3;const i=e.query;let a=n.queries.get(i);a?!a.Sa()&&e.ba()&&(r=2):(a=new OV,r=e.ba()?0:1);try{switch(r){case 0:a.ya=await n.onListen(i,!0);break;case 1:a.ya=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(s){const o=S_(s,`Initialization of query '${dd(e.query)}' failed`);return void e.onError(o)}n.queries.set(i,a),a.wa.push(e),e.va(n.onlineState),a.ya&&e.Ca(a.ya)&&I_(n)}async function C_(t,e){const n=mt(t),r=e.query;let i=3;const a=n.queries.get(r);if(a){const s=a.wa.indexOf(e);s>=0&&(a.wa.splice(s,1),a.wa.length===0?i=e.ba()?0:1:!a.Sa()&&e.ba()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function PV(t,e){const n=mt(t);let r=!1;for(const i of e){const a=i.query,s=n.queries.get(a);if(s){for(const o of s.wa)o.Ca(i)&&(r=!0);s.ya=i}}r&&I_(n)}function kV(t,e,n){const r=mt(t),i=r.queries.get(e);if(i)for(const a of i.wa)a.onError(n);r.queries.delete(e)}function I_(t){t.Da.forEach(e=>{e.next()})}var K2,ZC;(ZC=K2||(K2={})).Fa="default",ZC.Cache="cache";class D_{constructor(e,n,r){this.query=e,this.Ma=n,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new zd(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),n=!0):this.Ba(e,this.onlineState)&&(this.La(e),n=!0),this.Oa=e,n}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let n=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),n=!0),n}Ba(e,n){if(!e.fromCache||!this.ba())return!0;const r=n!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const n=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}La(e){e=zd.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==K2.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uM{constructor(e){this.key=e}}class dM{constructor(e){this.key=e}}class NV{constructor(e,n){this.query=e,this.Ha=n,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=Pt(),this.mutatedKeys=Pt(),this.Xa=OO(e),this.eu=new Dd(this.Xa)}get tu(){return this.Ha}nu(e,n){const r=n?n.ru:new KC,i=n?n.eu:this.eu;let a=n?n.mutatedKeys:this.mutatedKeys,s=i,o=!1;const c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,d=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((f,p)=>{const g=i.get(f),y=O1(this.query,p)?p:null,x=!!g&&this.mutatedKeys.has(g.key),_=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations);let A=!1;g&&y?g.data.isEqual(y.data)?x!==_&&(r.track({type:3,doc:y}),A=!0):this.iu(g,y)||(r.track({type:2,doc:y}),A=!0,(c&&this.Xa(y,c)>0||d&&this.Xa(y,d)<0)&&(o=!0)):!g&&y?(r.track({type:0,doc:y}),A=!0):g&&!y&&(r.track({type:1,doc:g}),A=!0,(c||d)&&(o=!0)),A&&(y?(s=s.add(y),a=_?a.add(f):a.delete(f)):(s=s.delete(f),a=a.delete(f)))}),this.query.limit!==null)for(;s.size>this.query.limit;){const f=this.query.limitType==="F"?s.last():s.first();s=s.delete(f.key),a=a.delete(f.key),r.track({type:1,doc:f})}return{eu:s,ru:r,Ds:o,mutatedKeys:a}}iu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const a=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const s=e.ru.pa();s.sort((f,p)=>function(y,x){const _=A=>{switch(A){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return lt(20277,{At:A})}};return _(y)-_(x)}(f.type,p.type)||this.Xa(f.doc,p.doc)),this.su(r),i=i!=null&&i;const o=n&&!i?this.ou():[],c=this.Za.size===0&&this.current&&!i?1:0,d=c!==this.Ya;return this.Ya=c,s.length!==0||d?{snapshot:new zd(this.query,e.eu,a,s,e.mutatedKeys,c===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:o}:{_u:o}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new KC,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=Pt(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});const n=[];return e.forEach(r=>{this.Za.has(r)||n.push(new dM(r))}),this.Za.forEach(r=>{e.has(r)||n.push(new uM(r))}),n}uu(e){this.Ha=e.qs,this.Za=Pt();const n=this.nu(e.documents);return this.applyChanges(n,!0)}cu(){return zd.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const R_="SyncEngine";class LV{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class BV{constructor(e){this.key=e,this.lu=!1}}class FV{constructor(e,n,r,i,a,s){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=s,this.hu={},this.Pu=new nu(o=>RO(o),R1),this.Tu=new Map,this.Iu=new Set,this.du=new Hn(Je.comparator),this.Eu=new Map,this.Au=new m_,this.Ru={},this.Vu=new Map,this.mu=Hd.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function VV(t,e,n=!0){const r=yM(t);let i;const a=r.Pu.get(e);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),i=a.view.cu()):i=await fM(r,e,n,!0),i}async function jV(t,e){const n=yM(t);await fM(n,e,!0,!1)}async function fM(t,e,n,r){const i=await sV(t.localStore,Es(e)),a=i.targetId,s=t.sharedClientState.addLocalQueryTarget(a,n);let o;return r&&(o=await UV(t,e,a,s==="current",i.resumeToken)),t.isPrimaryClient&&n&&iM(t.remoteStore,i),o}async function UV(t,e,n,r,i){t.gu=(p,g,y)=>async function(_,A,E,T){let C=A.view.nu(E);C.Ds&&(C=await $C(_.localStore,A.query,!1).then(({documents:O})=>A.view.nu(O,C)));const D=T&&T.targetChanges.get(A.targetId),k=T&&T.targetMismatches.get(A.targetId)!=null,B=A.view.applyChanges(C,_.isPrimaryClient,D,k);return eI(_,A.targetId,B._u),B.snapshot}(t,p,g,y);const a=await $C(t.localStore,e,!0),s=new NV(e,a.qs),o=s.nu(a.documents),c=B0.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),d=s.applyChanges(o,t.isPrimaryClient,c);eI(t,n,d._u);const f=new LV(e,n,s);return t.Pu.set(e,f),t.Tu.has(n)?t.Tu.get(n).push(e):t.Tu.set(n,[e]),d.snapshot}async function HV(t,e,n){const r=mt(t),i=r.Pu.get(e),a=r.Tu.get(i.targetId);if(a.length>1)return r.Tu.set(i.targetId,a.filter(s=>!R1(s,e))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await q2(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&w_(r.remoteStore,i.targetId),Q2(r,i.targetId)}).catch(lf)):(Q2(r,i.targetId),await q2(r.localStore,i.targetId,!0))}async function zV(t,e){const n=mt(t),r=n.Pu.get(e),i=n.Tu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),w_(n.remoteStore,r.targetId))}async function $V(t,e,n){const r=QV(t);try{const i=await function(s,o){const c=mt(s),d=Rn.now(),f=o.reduce((y,x)=>y.add(x.key),Pt());let p,g;return c.persistence.runTransaction("Locally write mutations","readwrite",y=>{let x=wo(),_=Pt();return c.Os.getEntries(y,f).next(A=>{x=A,x.forEach((E,T)=>{T.isValidDocument()||(_=_.add(E))})}).next(()=>c.localDocuments.getOverlayedDocuments(y,x)).next(A=>{p=A;const E=[];for(const T of o){const C=sF(T,p.get(T.key).overlayedDocument);C!=null&&E.push(new Vl(T.key,C,bO(C.value.mapValue),Ii.exists(!0)))}return c.mutationQueue.addMutationBatch(y,d,E,o)}).next(A=>{g=A;const E=A.applyToLocalDocumentSet(p,_);return c.documentOverlayCache.saveOverlays(y,A.batchId,E)})}).then(()=>({batchId:g.batchId,changes:PO(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,o,c){let d=s.Ru[s.currentUser.toKey()];d||(d=new Hn(Et)),d=d.insert(o,c),s.Ru[s.currentUser.toKey()]=d}(r,i.batchId,n),await V0(r,i.changes),await F1(r.remoteStore)}catch(i){const a=S_(i,"Failed to persist write");n.reject(a)}}async function hM(t,e){const n=mt(t);try{const r=await rV(n.localStore,e);e.targetChanges.forEach((i,a)=>{const s=n.Eu.get(a);s&&(nn(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?s.lu=!0:i.modifiedDocuments.size>0?nn(s.lu,14607):i.removedDocuments.size>0&&(nn(s.lu,42227),s.lu=!1))}),await V0(n,r,e)}catch(r){await lf(r)}}function JC(t,e,n){const r=mt(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Pu.forEach((a,s)=>{const o=s.view.va(e);o.snapshot&&i.push(o.snapshot)}),function(s,o){const c=mt(s);c.onlineState=o;let d=!1;c.queries.forEach((f,p)=>{for(const g of p.wa)g.va(o)&&(d=!0)}),d&&I_(c)}(r.eventManager,e),i.length&&r.hu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function GV(t,e,n){const r=mt(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Eu.get(e),a=i&&i.key;if(a){let s=new Hn(Je.comparator);s=s.insert(a,ui.newNoDocument(a,ht.min()));const o=Pt().add(a),c=new N1(ht.min(),new Map,new Hn(Et),s,o);await hM(r,c),r.du=r.du.remove(a),r.Eu.delete(e),O_(r)}else await q2(r.localStore,e,!1).then(()=>Q2(r,e,n)).catch(lf)}async function WV(t,e){const n=mt(t),r=e.batch.batchId;try{const i=await nV(n.localStore,e);gM(n,r,null),pM(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await V0(n,i)}catch(i){await lf(i)}}async function YV(t,e,n){const r=mt(t);try{const i=await function(s,o){const c=mt(s);return c.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let f;return c.mutationQueue.lookupMutationBatch(d,o).next(p=>(nn(p!==null,37113),f=p.keys(),c.mutationQueue.removeMutationBatch(d,p))).next(()=>c.mutationQueue.performConsistencyCheck(d)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(d,f,o)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,f)).next(()=>c.localDocuments.getDocuments(d,f))})}(r.localStore,e);gM(r,e,n),pM(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await V0(r,i)}catch(i){await lf(i)}}function pM(t,e){(t.Vu.get(e)||[]).forEach(n=>{n.resolve()}),t.Vu.delete(e)}function gM(t,e,n){const r=mt(t);let i=r.Ru[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(n?a.reject(n):a.resolve(),i=i.remove(e)),r.Ru[r.currentUser.toKey()]=i}}function Q2(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Tu.get(e))t.Pu.delete(r),n&&t.hu.pu(r,n);t.Tu.delete(e),t.isPrimaryClient&&t.Au.zr(e).forEach(r=>{t.Au.containsKey(r)||mM(t,r)})}function mM(t,e){t.Iu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(w_(t.remoteStore,n),t.du=t.du.remove(e),t.Eu.delete(n),O_(t))}function eI(t,e,n){for(const r of n)r instanceof uM?(t.Au.addReference(r.key,e),qV(t,r)):r instanceof dM?($e(R_,"Document no longer in limbo: "+r.key),t.Au.removeReference(r.key,e),t.Au.containsKey(r.key)||mM(t,r.key)):lt(19791,{yu:r})}function qV(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Iu.has(r)||($e(R_,"New document in limbo: "+n),t.Iu.add(r),O_(t))}function O_(t){for(;t.Iu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Iu.values().next().value;t.Iu.delete(e);const n=new Je(_n.fromString(e)),r=t.mu.next();t.Eu.set(r,new BV(n)),t.du=t.du.insert(n,r),iM(t.remoteStore,new xl(Es(D1(n.path)),r,"TargetPurposeLimboResolution",T1.ue))}}async function V0(t,e,n){const r=mt(t),i=[],a=[],s=[];r.Pu.isEmpty()||(r.Pu.forEach((o,c)=>{s.push(r.gu(c,e,n).then(d=>{var f;if((d||n)&&r.isPrimaryClient){const p=d?!d.fromCache:(f=n==null?void 0:n.targetChanges.get(c.targetId))===null||f===void 0?void 0:f.current;r.sharedClientState.updateQueryState(c.targetId,p?"current":"not-current")}if(d){i.push(d);const p=v_.Es(c.targetId,d);a.push(p)}}))}),await Promise.all(s),r.hu.J_(i),await async function(c,d){const f=mt(c);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>De.forEach(d,g=>De.forEach(g.Is,y=>f.persistence.referenceDelegate.addReference(p,g.targetId,y)).next(()=>De.forEach(g.ds,y=>f.persistence.referenceDelegate.removeReference(p,g.targetId,y)))))}catch(p){if(!cf(p))throw p;$e(x_,"Failed to update sequence numbers: "+p)}for(const p of d){const g=p.targetId;if(!p.fromCache){const y=f.Fs.get(g),x=y.snapshotVersion,_=y.withLastLimboFreeSnapshotVersion(x);f.Fs=f.Fs.insert(g,_)}}}(r.localStore,a))}async function XV(t,e){const n=mt(t);if(!n.currentUser.isEqual(e)){$e(R_,"User change. New user:",e.toKey());const r=await eM(n.localStore,e);n.currentUser=e,function(a,s){a.Vu.forEach(o=>{o.forEach(c=>{c.reject(new He(Te.CANCELLED,s))})}),a.Vu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await V0(n,r.Bs)}}function KV(t,e){const n=mt(t),r=n.Eu.get(e);if(r&&r.lu)return Pt().add(r.key);{let i=Pt();const a=n.Tu.get(e);if(!a)return i;for(const s of a){const o=n.Pu.get(s);i=i.unionWith(o.view.tu)}return i}}function yM(t){const e=mt(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=hM.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=KV.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=GV.bind(null,e),e.hu.J_=PV.bind(null,e.eventManager),e.hu.pu=kV.bind(null,e.eventManager),e}function QV(t){const e=mt(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=WV.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=YV.bind(null,e),e}class Pm{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=L1(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,n){return null}Fu(e,n){return null}vu(e){return tV(this.persistence,new ZF,e.initialUser,this.serializer)}Du(e){return new JO(y_.Vi,this.serializer)}bu(e){return new lV}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Pm.provider={build:()=>new Pm};class ZV extends Pm{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,n){nn(this.persistence.referenceDelegate instanceof Om,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new BF(r,e.asyncQueue,n)}Du(e){const n=this.cacheSizeBytes!==void 0?Ni.withCacheSize(this.cacheSizeBytes):Ni.DEFAULT;return new JO(r=>Om.Vi(r,n),this.serializer)}}class Z2{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>JC(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=XV.bind(null,this.syncEngine),await RV(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new MV}()}createDatastore(e){const n=L1(e.databaseInfo.databaseId),r=function(a){return new hV(a)}(e.databaseInfo);return function(a,s,o,c){return new yV(a,s,o,c)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,a,s,o){return new xV(r,i,a,s,o)}(this.localStore,this.datastore,e.asyncQueue,n=>JC(this.syncEngine,n,0),function(){return YC.C()?new YC:new cV}())}createSyncEngine(e,n){return function(i,a,s,o,c,d,f){const p=new FV(i,a,s,o,c,d);return f&&(p.fu=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const a=mt(i);$e(qc,"RemoteStore shutting down."),a.Ia.add(5),await F0(a),a.Ea.shutdown(),a.Aa.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Z2.provider={build:()=>new Z2};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M_{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):xo("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kl="FirestoreClient";class JV{constructor(e,n,r,i,a){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=ci.UNAUTHENTICATED,this.clientId=a_.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(r,async s=>{$e(kl,"Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>($e(kl,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new po;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=S_(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Lx(t,e){t.asyncQueue.verifyOperationInProgress(),$e(kl,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await eM(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>{Il("Terminating Firestore due to IndexedDb database deletion"),t.terminate().then(()=>{$e("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(i=>{Il("Terminating Firestore due to IndexedDb database deletion failed",i)})}),t._offlineComponents=e}async function tI(t,e){t.asyncQueue.verifyOperationInProgress();const n=await ej(t);$e(kl,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>XC(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>XC(e.remoteStore,i)),t._onlineComponents=e}async function ej(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){$e(kl,"Using user provided OfflineComponentProvider");try{await Lx(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===Te.FAILED_PRECONDITION||i.code===Te.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;Il("Error using user provided cache. Falling back to memory cache: "+n),await Lx(t,new Pm)}}else $e(kl,"Using default OfflineComponentProvider"),await Lx(t,new ZV(void 0));return t._offlineComponents}async function vM(t){return t._onlineComponents||(t._uninitializedComponentsProvider?($e(kl,"Using user provided OnlineComponentProvider"),await tI(t,t._uninitializedComponentsProvider._online)):($e(kl,"Using default OnlineComponentProvider"),await tI(t,new Z2))),t._onlineComponents}function tj(t){return vM(t).then(e=>e.syncEngine)}async function km(t){const e=await vM(t),n=e.eventManager;return n.onListen=VV.bind(null,e.syncEngine),n.onUnlisten=HV.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=jV.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=zV.bind(null,e.syncEngine),n}function nj(t,e,n={}){const r=new po;return t.asyncQueue.enqueueAndForget(async()=>function(a,s,o,c,d){const f=new M_({next:g=>{f.Ou(),s.enqueueAndForget(()=>C_(a,p));const y=g.docs.has(o);!y&&g.fromCache?d.reject(new He(Te.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&g.fromCache&&c&&c.source==="server"?d.reject(new He(Te.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(g)},error:g=>d.reject(g)}),p=new D_(D1(o.path),f,{includeMetadataChanges:!0,ka:!0});return T_(a,p)}(await km(t),t.asyncQueue,e,n,r)),r.promise}function rj(t,e,n={}){const r=new po;return t.asyncQueue.enqueueAndForget(async()=>function(a,s,o,c,d){const f=new M_({next:g=>{f.Ou(),s.enqueueAndForget(()=>C_(a,p)),g.fromCache&&c.source==="server"?d.reject(new He(Te.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(g)},error:g=>d.reject(g)}),p=new D_(o,f,{includeMetadataChanges:!0,ka:!0});return T_(a,p)}(await km(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xM(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nI=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wM="firestore.googleapis.com",rI=!0;class iI{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new He(Te.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=wM,this.ssl=rI}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:rI;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=ZO;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<NF)throw new He(Te.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}vB("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=xM((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new He(Te.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new He(Te.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new He(Te.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class j0{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new iI({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new He(Te.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new He(Te.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new iI(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new cB;switch(r.type){case"firstParty":return new hB(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new He(Te.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=nI.get(n);r&&($e("ComponentProvider","Removing Datastore"),nI.delete(n),r.terminate())}(this),Promise.resolve()}}function ij(t,e,n,r={}){var i;t=hi(t,j0);const a=rf(e),s=t._getSettings(),o=Object.assign(Object.assign({},s),{emulatorOptions:t._getEmulatorOptions()}),c=`${e}:${n}`;a&&(gR(`https://${c}`),mR("Firestore",!0)),s.host!==wM&&s.host!==c&&Il("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const d=Object.assign(Object.assign({},s),{host:c,ssl:a,emulatorOptions:r});if(!zc(d,o)&&(t._setSettings(d),r.mockUserToken)){let f,p;if(typeof r.mockUserToken=="string")f=r.mockUserToken,p=ci.MOCK_USER;else{f=w5(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const g=r.mockUserToken.sub||r.mockUserToken.user_id;if(!g)throw new He(Te.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new ci(g)}t._authCredentials=new uB(new uO(f,p))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ns{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ns(this.firestore,e,this._query)}}class Gn{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Sl(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Gn(this.firestore,e,this._key)}toJSON(){return{type:Gn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(N0(n,Gn._jsonSchema))return new Gn(e,r||null,new Je(_n.fromString(n.referencePath)))}}Gn._jsonSchemaVersion="firestore/documentReference/1.0",Gn._jsonSchema={type:hr("string",Gn._jsonSchemaVersion),referencePath:hr("string")};class Sl extends Ns{constructor(e,n,r){super(e,n,D1(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Gn(this.firestore,null,new Je(e))}withConverter(e){return new Sl(this.firestore,e,this._path)}}function pr(t,e,...n){if(t=gr(t),s_("collection","path",e),t instanceof j0){const r=_n.fromString(e,...n);return yC(r),new Sl(t,null,r)}{if(!(t instanceof Gn||t instanceof Sl))throw new He(Te.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(_n.fromString(e,...n));return yC(r),new Sl(t.firestore,null,r)}}function wl(t,e){if(t=hi(t,j0),s_("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new He(Te.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Ns(t,null,function(r){return new tu(_n.emptyPath(),r)}(e))}function _o(t,e,...n){if(t=gr(t),arguments.length===1&&(e=a_.newId()),s_("doc","path",e),t instanceof j0){const r=_n.fromString(e,...n);return mC(r),new Gn(t,null,new Je(r))}{if(!(t instanceof Gn||t instanceof Sl))throw new He(Te.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(_n.fromString(e,...n));return mC(r),new Gn(t.firestore,t instanceof Sl?t.converter:null,new Je(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aI="AsyncQueue";class sI{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new nM(this,"async_queue_retry"),this.oc=()=>{const r=Nx();r&&$e(aI,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;const n=Nx();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const n=Nx();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});const n=new po;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!cf(e))throw e;$e(aI,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(e){const n=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,xo("INTERNAL UNHANDLED ERROR: ",oI(r)),r}).then(r=>(this.nc=!1,r))));return this._c=n,n}enqueueAfterDelay(e,n,r){this.ac(),this.sc.indexOf(e)>-1&&(n=0);const i=E_.createAndSchedule(this,e,n,r,a=>this.lc(a));return this.ec.push(i),i}ac(){this.tc&&lt(47125,{hc:oI(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const n of this.ec)if(n.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.ec)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){const n=this.ec.indexOf(e);this.ec.splice(n,1)}}function oI(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lI(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const a of r)if(a in i&&typeof i[a]=="function")return!0;return!1}(t,["next","error","complete"])}class Ms extends j0{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new sI,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new sI(e),this._firestoreClient=void 0,await e}}}function aj(t,e){const n=typeof t=="object"?t:wR(),r=typeof t=="string"?t:Sm,i=qw(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const a=v5("firestore");a&&ij(i,...a)}return i}function U0(t){if(t._terminated)throw new He(Te.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||sj(t),t._firestoreClient}function sj(t){var e,n,r;const i=t._freezeSettings(),a=function(o,c,d,f){return new RB(o,c,d,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,xM(f.experimentalLongPollingOptions),f.useFetchStreams,f.isUsingEmulator)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new JV(t._authCredentials,t._appCheckCredentials,t._queue,a,t._componentsProvider&&function(o){const c=o==null?void 0:o._online.build();return{_offline:o==null?void 0:o._offline.build(c),_online:c}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ya{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ya(ni.fromBase64String(e))}catch(n){throw new He(Te.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new ya(ni.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:ya._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(N0(e,ya._jsonSchema))return ya.fromBase64String(e.bytes)}}ya._jsonSchemaVersion="firestore/bytes/1.0",ya._jsonSchema={type:hr("string",ya._jsonSchemaVersion),bytes:hr("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H0{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new He(Te.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Jr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V1{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ts{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new He(Te.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new He(Te.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Et(this._lat,e._lat)||Et(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ts._jsonSchemaVersion}}static fromJSON(e){if(N0(e,Ts._jsonSchema))return new Ts(e.latitude,e.longitude)}}Ts._jsonSchemaVersion="firestore/geoPoint/1.0",Ts._jsonSchema={type:hr("string",Ts._jsonSchemaVersion),latitude:hr("number"),longitude:hr("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cs{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let a=0;a<r.length;++a)if(r[a]!==i[a])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Cs._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(N0(e,Cs._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new Cs(e.vectorValues);throw new He(Te.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Cs._jsonSchemaVersion="firestore/vectorValue/1.0",Cs._jsonSchema={type:hr("string",Cs._jsonSchemaVersion),vectorValues:hr("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oj=/^__.*__$/;class lj{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Vl(e,this.data,this.fieldMask,n,this.fieldTransforms):new L0(e,this.data,n,this.fieldTransforms)}}class _M{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Vl(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function bM(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw lt(40011,{Ec:t})}}class P_{constructor(e,n,r,i,a,s){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,a===void 0&&this.Ac(),this.fieldTransforms=a||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new P_(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Rc({path:r,mc:!1});return i.fc(e),i}gc(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Rc({path:r,mc:!1});return i.Ac(),i}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return Nm(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(bM(this.Ec)&&oj.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class cj{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||L1(e)}Dc(e,n,r,i=!1){return new P_({Ec:e,methodName:n,bc:r,path:Jr.emptyPath(),mc:!1,Sc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function z0(t){const e=t._freezeSettings(),n=L1(t._databaseId);return new cj(t._databaseId,!!e.ignoreUndefinedProperties,n)}function k_(t,e,n,r,i,a={}){const s=t.Dc(a.merge||a.mergeFields?2:0,e,n,i);L_("Data must be an object, but it was:",s,r);const o=SM(r,s);let c,d;if(a.merge)c=new Xi(s.fieldMask),d=s.fieldTransforms;else if(a.mergeFields){const f=[];for(const p of a.mergeFields){const g=J2(e,p,n);if(!s.contains(g))throw new He(Te.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);CM(f,g)||f.push(g)}c=new Xi(f),d=s.fieldTransforms.filter(p=>c.covers(p.field))}else c=null,d=s.fieldTransforms;return new lj(new Li(o),c,d)}class j1 extends V1{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof j1}}class N_ extends V1{_toFieldTransform(e){return new nF(e.path,new h0)}isEqual(e){return e instanceof N_}}function AM(t,e,n,r){const i=t.Dc(1,e,n);L_("Data must be an object, but it was:",i,r);const a=[],s=Li.empty();Fl(r,(c,d)=>{const f=B_(e,c,n);d=gr(d);const p=i.gc(f);if(d instanceof j1)a.push(f);else{const g=$0(d,p);g!=null&&(a.push(f),s.set(f,g))}});const o=new Xi(a);return new _M(s,o,i.fieldTransforms)}function EM(t,e,n,r,i,a){const s=t.Dc(1,e,n),o=[J2(e,r,n)],c=[i];if(a.length%2!=0)throw new He(Te.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<a.length;g+=2)o.push(J2(e,a[g])),c.push(a[g+1]);const d=[],f=Li.empty();for(let g=o.length-1;g>=0;--g)if(!CM(d,o[g])){const y=o[g];let x=c[g];x=gr(x);const _=s.gc(y);if(x instanceof j1)d.push(y);else{const A=$0(x,_);A!=null&&(d.push(y),f.set(y,A))}}const p=new Xi(d);return new _M(f,p,s.fieldTransforms)}function uj(t,e,n,r=!1){return $0(n,t.Dc(r?4:3,e))}function $0(t,e){if(TM(t=gr(t)))return L_("Unsupported field value:",e,t),SM(t,e);if(t instanceof V1)return function(r,i){if(!bM(i.Ec))throw i.wc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.wc(`${r._methodName}() is not currently supported inside arrays`);const a=r._toFieldTransform(i);a&&i.fieldTransforms.push(a)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return function(r,i){const a=[];let s=0;for(const o of r){let c=$0(o,i.yc(s));c==null&&(c={nullValue:"NULL_VALUE"}),a.push(c),s++}return{arrayValue:{values:a}}}(t,e)}return function(r,i){if((r=gr(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return JB(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const a=Rn.fromDate(r);return{timestampValue:Rm(i.serializer,a)}}if(r instanceof Rn){const a=new Rn(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Rm(i.serializer,a)}}if(r instanceof Ts)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof ya)return{bytesValue:GO(i.serializer,r._byteString)};if(r instanceof Gn){const a=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(a))throw i.wc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:g_(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Cs)return function(s,o){return{mapValue:{fields:{[wO]:{stringValue:_O},[Tm]:{arrayValue:{values:s.toArray().map(d=>{if(typeof d!="number")throw o.wc("VectorValues must only contain numeric values.");return f_(o.serializer,d)})}}}}}}(r,i);throw i.wc(`Unsupported field value: ${S1(r)}`)}(t,e)}function SM(t,e){const n={};return pO(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Fl(t,(r,i)=>{const a=$0(i,e.Vc(r));a!=null&&(n[r]=a)}),{mapValue:{fields:n}}}function TM(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Rn||t instanceof Ts||t instanceof ya||t instanceof Gn||t instanceof V1||t instanceof Cs)}function L_(t,e,n){if(!TM(n)||!fO(n)){const r=S1(n);throw r==="an object"?e.wc(t+" a custom object"):e.wc(t+" "+r)}}function J2(t,e,n){if((e=gr(e))instanceof H0)return e._internalPath;if(typeof e=="string")return B_(t,e);throw Nm("Field path arguments must be of type string or ",t,!1,void 0,n)}const dj=new RegExp("[~\\*/\\[\\]]");function B_(t,e,n){if(e.search(dj)>=0)throw Nm(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new H0(...e.split("."))._internalPath}catch{throw Nm(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Nm(t,e,n,r,i){const a=r&&!r.isEmpty(),s=i!==void 0;let o=`Function ${e}() called with invalid data`;n&&(o+=" (via `toFirestore()`)"),o+=". ";let c="";return(a||s)&&(c+=" (found",a&&(c+=` in field ${r}`),s&&(c+=` in document ${i}`),c+=")"),new He(Te.INVALID_ARGUMENT,o+t+c)}function CM(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IM{constructor(e,n,r,i,a){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new Gn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new fj(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(U1("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class fj extends IM{data(){return super.data()}}function U1(t,e){return typeof e=="string"?B_(t,e):e instanceof H0?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DM(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new He(Te.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class F_{}class V_ extends F_{}function jn(t,e,...n){let r=[];e instanceof F_&&r.push(e),r=r.concat(n),function(a){const s=a.filter(c=>c instanceof j_).length,o=a.filter(c=>c instanceof H1).length;if(s>1||s>0&&o>0)throw new He(Te.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class H1 extends V_{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new H1(e,n,r)}_apply(e){const n=this._parse(e);return RM(e._query,n),new Ns(e.firestore,e.converter,z2(e._query,n))}_parse(e){const n=z0(e.firestore);return function(a,s,o,c,d,f,p){let g;if(d.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new He(Te.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){uI(p,f);const x=[];for(const _ of p)x.push(cI(c,a,_));g={arrayValue:{values:x}}}else g=cI(c,a,p)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||uI(p,f),g=uj(o,s,p,f==="in"||f==="not-in");return fr.create(d,f,g)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function wn(t,e,n){const r=e,i=U1("where",t);return H1._create(i,r,n)}class j_ extends F_{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new j_(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:qa.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,a){let s=i;const o=a.getFlattenedFilters();for(const c of o)RM(s,c),s=z2(s,c)}(e._query,n),new Ns(e.firestore,e.converter,z2(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class U_ extends V_{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new U_(e,n)}_apply(e){const n=function(i,a,s){if(i.startAt!==null)throw new He(Te.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new He(Te.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new f0(a,s)}(e._query,this._field,this._direction);return new Ns(e.firestore,e.converter,function(i,a){const s=i.explicitOrderBy.concat([a]);return new tu(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function z1(t,e="asc"){const n=e,r=U1("orderBy",t);return U_._create(r,n)}class H_ extends V_{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new H_(e,n,r)}_apply(e){return new Ns(e.firestore,e.converter,Im(e._query,this._limit,this._limitType))}}function Lm(t){return xB("limit",t),H_._create("limit",t,"F")}function cI(t,e,n){if(typeof(n=gr(n))=="string"){if(n==="")throw new He(Te.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!DO(e)&&n.indexOf("/")!==-1)throw new He(Te.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(_n.fromString(n));if(!Je.isDocumentKey(r))throw new He(Te.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return SC(t,new Je(r))}if(n instanceof Gn)return SC(t,n._key);throw new He(Te.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${S1(n)}.`)}function uI(t,e){if(!Array.isArray(t)||t.length===0)throw new He(Te.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function RM(t,e){const n=function(i,a){for(const s of i)for(const o of s.getFlattenedFilters())if(a.indexOf(o.op)>=0)return o.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new He(Te.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new He(Te.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class hj{convertValue(e,n="none"){switch(Ml(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Zn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ol(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw lt(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Fl(e,(i,a)=>{r[i]=this.convertValue(a,n)}),r}convertVectorValue(e){var n,r,i;const a=(i=(r=(n=e.fields)===null||n===void 0?void 0:n[Tm].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>Zn(s.doubleValue));return new Cs(a)}convertGeoPoint(e){return new Ts(Zn(e.latitude),Zn(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=I1(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(c0(e));default:return null}}convertTimestamp(e){const n=Rl(e);return new Rn(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=_n.fromString(e);nn(QO(r),9688,{name:e});const i=new u0(r.get(1),r.get(3)),a=new Je(r.popFirst(5));return i.isEqual(n)||xo(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z_(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class Vh{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Fc extends IM{constructor(e,n,r,i,a,s){super(e,n,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new um(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(U1("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new He(Te.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Fc._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Fc._jsonSchemaVersion="firestore/documentSnapshot/1.0",Fc._jsonSchema={type:hr("string",Fc._jsonSchemaVersion),bundleSource:hr("string","DocumentSnapshot"),bundleName:hr("string"),bundle:hr("string")};class um extends Fc{data(e={}){return super.data(e)}}class Vc{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Vh(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new um(this._firestore,this._userDataWriter,r.key,r,new Vh(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new He(Te.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,a){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(o=>{const c=new um(i._firestore,i._userDataWriter,o.doc.key,o.doc,new Vh(i._snapshot.mutatedKeys.has(o.doc.key),i._snapshot.fromCache),i.query.converter);return o.doc,{type:"added",doc:c,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(o=>a||o.type!==3).map(o=>{const c=new um(i._firestore,i._userDataWriter,o.doc.key,o.doc,new Vh(i._snapshot.mutatedKeys.has(o.doc.key),i._snapshot.fromCache),i.query.converter);let d=-1,f=-1;return o.type!==0&&(d=s.indexOf(o.doc.key),s=s.delete(o.doc.key)),o.type!==1&&(s=s.add(o.doc),f=s.indexOf(o.doc.key)),{type:pj(o.type),doc:c,oldIndex:d,newIndex:f}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new He(Te.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Vc._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=a_.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],i=[];return this.docs.forEach(a=>{a._document!==null&&(n.push(a._document),r.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),i.push(a.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function pj(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return lt(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gj(t){t=hi(t,Gn);const e=hi(t.firestore,Ms);return nj(U0(e),t._key).then(n=>OM(e,t,n))}Vc._jsonSchemaVersion="firestore/querySnapshot/1.0",Vc._jsonSchema={type:hr("string",Vc._jsonSchemaVersion),bundleSource:hr("string","QuerySnapshot"),bundleName:hr("string"),bundle:hr("string")};class $_ extends hj{constructor(e){super(),this.firestore=e}convertBytes(e){return new ya(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Gn(this.firestore,null,n)}}function Jn(t){t=hi(t,Ns);const e=hi(t.firestore,Ms),n=U0(e),r=new $_(e);return DM(t._query),rj(n,t._query).then(i=>new Vc(e,r,t,i))}function dI(t,e,n){t=hi(t,Gn);const r=hi(t.firestore,Ms),i=z_(t.converter,e,n);return G0(r,[k_(z0(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Ii.none())])}function $1(t,e,n,...r){t=hi(t,Gn);const i=hi(t.firestore,Ms),a=z0(i);let s;return s=typeof(e=gr(e))=="string"||e instanceof H0?EM(a,"updateDoc",t._key,e,n,r):AM(a,"updateDoc",t._key,e),G0(i,[s.toMutation(t._key,Ii.exists(!0))])}function mj(t){return G0(hi(t.firestore,Ms),[new k1(t._key,Ii.none())])}function m0(t,e){const n=hi(t.firestore,Ms),r=_o(t),i=z_(t.converter,e);return G0(n,[k_(z0(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Ii.exists(!1))]).then(()=>r)}function yj(t,...e){var n,r,i;t=gr(t);let a={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||lI(e[s])||(a=e[s++]);const o={includeMetadataChanges:a.includeMetadataChanges,source:a.source};if(lI(e[s])){const p=e[s];e[s]=(n=p.next)===null||n===void 0?void 0:n.bind(p),e[s+1]=(r=p.error)===null||r===void 0?void 0:r.bind(p),e[s+2]=(i=p.complete)===null||i===void 0?void 0:i.bind(p)}let c,d,f;if(t instanceof Gn)d=hi(t.firestore,Ms),f=D1(t._key.path),c={next:p=>{e[s]&&e[s](OM(d,t,p))},error:e[s+1],complete:e[s+2]};else{const p=hi(t,Ns);d=hi(p.firestore,Ms),f=p._query;const g=new $_(d);c={next:y=>{e[s]&&e[s](new Vc(d,g,p,y))},error:e[s+1],complete:e[s+2]},DM(t._query)}return function(g,y,x,_){const A=new M_(_),E=new D_(y,A,x);return g.asyncQueue.enqueueAndForget(async()=>T_(await km(g),E)),()=>{A.Ou(),g.asyncQueue.enqueueAndForget(async()=>C_(await km(g),E))}}(U0(d),f,o,c)}function G0(t,e){return function(r,i){const a=new po;return r.asyncQueue.enqueueAndForget(async()=>$V(await tj(r),i,a)),a.promise}(U0(t),e)}function OM(t,e,n){const r=n.docs.get(e._key),i=new $_(t);return new Fc(t,i,e._key,r,new Vh(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vj{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=z0(e)}set(e,n,r){this._verifyNotCommitted();const i=Bx(e,this._firestore),a=z_(i.converter,n,r),s=k_(this._dataReader,"WriteBatch.set",i._key,a,i.converter!==null,r);return this._mutations.push(s.toMutation(i._key,Ii.none())),this}update(e,n,r,...i){this._verifyNotCommitted();const a=Bx(e,this._firestore);let s;return s=typeof(n=gr(n))=="string"||n instanceof H0?EM(this._dataReader,"WriteBatch.update",a._key,n,r,i):AM(this._dataReader,"WriteBatch.update",a._key,n),this._mutations.push(s.toMutation(a._key,Ii.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Bx(e,this._firestore);return this._mutations=this._mutations.concat(new k1(n._key,Ii.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new He(Te.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Bx(t,e){if((t=gr(t)).firestore!==e)throw new He(Te.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}function Ti(){return new N_("serverTimestamp")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xj(t){return U0(t=hi(t,Ms)),new vj(t,e=>G0(t,e))}(function(e,n=!0){(function(i){of=i})(af),Fd(new $c("firestore",(r,{instanceIdentifier:i,options:a})=>{const s=r.getProvider("app").getImmediate(),o=new Ms(new dB(r.getProvider("auth-internal")),new pB(s,r.getProvider("app-check-internal")),function(d,f){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new He(Te.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new u0(d.options.projectId,f)}(s,i),s);return a=Object.assign({useFetchStreams:n},a),o._setSettings(a),o},"PUBLIC").setMultipleInstances(!0)),Al(dC,fC,e),Al(dC,fC,"esm2017")})();const wj={apiKey:"AIzaSyBg60nFX2rmrW66n3lPeXRLTfMhjlgFrEE",authDomain:"project-01-bookmemo-prod.firebaseapp.com",projectId:"project-01-bookmemo-prod",storageBucket:"project-01-bookmemo-prod.firebasestorage.app",messagingSenderId:"414976225343",appId:"1:414976225343:web:31244d8c1ffe3b6f89088a"},MM=xR(wj),G_=aB(MM),Ht=aj(MM),PM=M.createContext();function _j({children:t}){const[e,n]=M.useState(null),[r,i]=M.useState(!0);return M.useEffect(()=>{const a=q7(G_,s=>{n(s),i(!1)});return()=>a()},[]),v.jsx(PM.Provider,{value:{user:e,loading:r},children:t})}function rr(){return M.useContext(PM)}function bj(){const[t,e]=M.useState(""),[n,r]=M.useState(""),[i,a]=M.useState(""),[s,o]=M.useState(!1),c=Zc(),d=async f=>{if(f.preventDefault(),!s){o(!0),a("");try{await G7(G_,t,n),c("/")}catch(p){a(p.message)}finally{o(!1)}}};return v.jsxs(re,{component:"form",onSubmit:d,sx:{maxWidth:400,mx:"auto",mt:8},children:[v.jsx(te,{variant:"h5",align:"center",gutterBottom:!0,"data-testid":"login-title",children:"ログイン"}),v.jsx(xt,{label:"メールアドレス",type:"email",value:t,onChange:f=>e(f.target.value),fullWidth:!0,margin:"normal",required:!0,inputProps:{"data-testid":"login-email-input"}}),v.jsx(xt,{label:"パスワード",type:"password",value:n,onChange:f=>r(f.target.value),fullWidth:!0,margin:"normal",required:!0,inputProps:{"data-testid":"login-password-input"}}),i&&v.jsx(te,{color:"error",children:i}),v.jsx(Ke,{type:"submit",variant:"contained",fullWidth:!0,sx:{mt:2},"data-testid":"login-submit",disabled:s,children:s?"ログイン中...":"ログイン"})]})}function Aj(){const[t,e]=M.useState(""),[n,r]=M.useState(""),[i,a]=M.useState(""),[s,o]=M.useState(!1),c=async d=>{if(d.preventDefault(),!s){o(!0),a("");try{await $7(G_,t,n)}catch(f){a(f.message)}finally{o(!1)}}};return v.jsxs(re,{component:"form",onSubmit:c,sx:{maxWidth:400,mx:"auto",mt:8},children:[v.jsx(te,{variant:"h5",align:"center",gutterBottom:!0,children:"新規登録"}),v.jsx(xt,{label:"メールアドレス",type:"email",value:t,onChange:d=>e(d.target.value),fullWidth:!0,margin:"normal",required:!0}),v.jsx(xt,{label:"パスワード",type:"password",value:n,onChange:d=>r(d.target.value),fullWidth:!0,margin:"normal",required:!0}),i&&v.jsx(te,{color:"error",children:i}),v.jsx(Ke,{type:"submit",variant:"contained",fullWidth:!0,sx:{mt:2},disabled:s,children:s?"登録中...":"新規登録"})]})}const ut={TSUNDOKU:"tsundoku",READING:"reading",SUSPENDED:"suspended",RE_READING:"re-reading",FINISHED:"finished"},za={BOUGHT:"bought",BORROWED:"borrowed",GIFT:"gift",UNKNOWN:"unknown"},Bm={[ut.TSUNDOKU]:"積読",[ut.READING]:"読書中",[ut.SUSPENDED]:"中断",[ut.RE_READING]:"再読中",[ut.FINISHED]:"読了"},fI={[za.BOUGHT]:"購入",[za.BORROWED]:"借り物",[za.GIFT]:"プレゼント",[za.UNKNOWN]:"不明"},hI={[ut.TSUNDOKU]:"default",[ut.READING]:"primary",[ut.SUSPENDED]:"warning",[ut.RE_READING]:"secondary",[ut.FINISHED]:"success"},Ar=ut.TSUNDOKU,W_=[ut.TSUNDOKU,ut.READING,ut.SUSPENDED,ut.RE_READING,ut.FINISHED],Ej=[za.BOUGHT,za.BORROWED,za.GIFT,za.UNKNOWN],gn={ALL:"all",TSUNDOKU:ut.TSUNDOKU,READING_GROUP:"reading-group",READING:ut.READING,SUSPENDED:ut.SUSPENDED,RE_READING:ut.RE_READING,FINISHED:ut.FINISHED},pd={[gn.ALL]:"すべて",[gn.TSUNDOKU]:"積読",[gn.READING_GROUP]:"読書中",[gn.READING]:"読書中",[gn.SUSPENDED]:"中断",[gn.RE_READING]:"再読中",[gn.FINISHED]:"読了"},Fm=t=>W_.includes(t),Ps=t=>Bm[t]||Bm[Ar],gs=t=>hI[t]||hI[Ar],kM=t=>fI[t]||fI[za.UNKNOWN];function Sj({book:t,onClick:e,testId:n}){return v.jsx(kn,{sx:{cursor:"pointer","&:hover":{boxShadow:3},height:"100%",display:"flex",flexDirection:"column",minHeight:{xs:"140px",sm:"160px"}},onClick:e,"data-testid":n||`book-card-${t.id}`,children:v.jsx(Nn,{sx:{flex:1,display:"flex",flexDirection:"column",p:{xs:1.5,sm:2},"&:last-child":{pb:{xs:1.5,sm:2}}},children:v.jsxs(re,{sx:{display:"flex",alignItems:"flex-start",gap:{xs:1.5,sm:2},height:"100%"},children:[t.coverImageUrl&&v.jsx(K3,{component:"img",sx:{width:{xs:50,sm:60},height:{xs:70,sm:80},objectFit:"cover",flexShrink:0,borderRadius:1},image:t.coverImageUrl,alt:t.title}),v.jsxs(re,{sx:{flex:1,minWidth:0,display:"flex",flexDirection:"column",height:"100%"},children:[v.jsx(te,{variant:"h6",component:"h3",gutterBottom:!0,sx:{fontSize:{xs:"0.9rem",sm:"1rem",md:"1.1rem"},lineHeight:1.2,fontWeight:600,mb:.5,overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical"},children:t.title||"タイトル未設定"}),v.jsx(te,{variant:"body2",color:"text.secondary",sx:{fontSize:{xs:"0.75rem",sm:"0.8rem",md:"0.9rem"},mb:.5,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:t.author||"著者未設定"}),v.jsx(re,{sx:{mb:1},children:v.jsx(mn,{label:Ps(t.status||Ar),color:gs(t.status||Ar),size:"small",sx:{fontSize:{xs:"0.65rem",sm:"0.7rem",md:"0.75rem"},height:{xs:"18px",sm:"20px",md:"22px"},"& .MuiChip-label":{px:{xs:.5,sm:.75}}}})}),(t.publisher||t.publishedDate)&&v.jsxs(te,{variant:"body2",color:"text.secondary",sx:{fontSize:{xs:"0.7rem",sm:"0.75rem",md:"0.8rem"},mb:1,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:[t.publisher," ",t.publisher&&t.publishedDate&&"•"," ",t.publishedDate]}),v.jsx(re,{sx:{minHeight:{xs:"32px",sm:"36px"},mb:1,display:"flex",flexWrap:"wrap",gap:.5},children:t.tags&&t.tags.length>0?t.tags.slice(0,3).map((r,i)=>v.jsx(mn,{label:r,size:"small",variant:"outlined",sx:{fontSize:{xs:"0.65rem",sm:"0.7rem",md:"0.75rem"},height:{xs:"18px",sm:"20px",md:"22px"},"& .MuiChip-label":{px:{xs:.5,sm:.75}}}},i)):v.jsx(te,{variant:"caption",color:"text.secondary",sx:{fontSize:{xs:"0.65rem",sm:"0.7rem",md:"0.75rem"},alignSelf:"center"},children:"タグなし"})}),v.jsxs(te,{variant:"caption",color:"text.secondary",sx:{mt:"auto",fontSize:{xs:"0.65rem",sm:"0.7rem",md:"0.75rem"},fontWeight:500},children:["ステータス: ",Ps(t.status||Ar)]})]})]})})})}const G1=({title:t,subtitle:e,children:n})=>v.jsxs(va,{elevation:0,"data-testid":"page-header",sx:{background:`
          linear-gradient(135deg, rgba(139, 69, 19, 0.9) 0%, rgba(160, 82, 45, 0.8) 100%),
          repeating-linear-gradient(
            45deg,
            transparent,
            transparent 4px,
            rgba(139, 69, 19, 0.1) 4px,
            rgba(139, 69, 19, 0.1) 8px
          ),
          linear-gradient(135deg, #8B4513 0%, #A0522D 50%, #CD853F 100%)
        `,backgroundSize:"cover, 16px 16px, cover",backgroundRepeat:"no-repeat, repeat, no-repeat",backgroundPosition:"center, center, center",borderRadius:0,mb:3,position:"relative",overflow:"hidden",borderBottom:"3px solid rgba(139, 69, 19, 0.3)"},children:[v.jsxs(re,{sx:{p:{xs:2,sm:3,md:4},textAlign:"center",color:"white",position:"relative",zIndex:1},children:[v.jsx(te,{variant:"h4",component:"h1","data-testid":"page-header-title",sx:{fontWeight:700,fontSize:{xs:"1.5rem",sm:"2rem",md:"2.5rem"},mb:e?1:0,textShadow:"0 2px 4px rgba(0,0,0,0.7)",color:"#FFF8DC"},children:t}),e&&v.jsx(te,{variant:"body1","data-testid":"page-header-subtitle",sx:{opacity:.95,fontSize:{xs:"0.9rem",sm:"1rem"},textShadow:"0 1px 2px rgba(0,0,0,0.7)",color:"#F5F5DC"},children:e}),n&&v.jsx(re,{sx:{mt:2},children:n})]}),v.jsx(re,{sx:{position:"absolute",top:0,left:0,right:0,bottom:0,background:`
            radial-gradient(circle at 30% 70%, rgba(255,255,255,0.15) 0%, transparent 40%),
            radial-gradient(circle at 70% 30%, rgba(255,255,255,0.1) 0%, transparent 30%)
          `,pointerEvents:"none"}})]}),ri=Ci.createContext({setGlobalError:()=>{}}),Tj=({open:t,message:e,onClose:n})=>v.jsxs($a,{open:t,onClose:n,maxWidth:"xs",fullWidth:!0,disableEscapeKeyDown:!1,disableBackdropClick:!1,children:[v.jsx(Ds,{sx:{color:"error.main",fontWeight:"bold"},children:"エラーが発生しました"}),v.jsx(Ga,{children:v.jsx(Ki,{severity:"error",sx:{mb:2},children:e})}),v.jsx(Wa,{sx:{justifyContent:"center",pb:2},children:v.jsx(Ke,{onClick:n,color:"error",variant:"contained",autoFocus:!0,children:"閉じる"})})]}),Cj=({children:t})=>{const[e,n]=M.useState(null),r=a=>{n(a)},i=()=>{n(null)};return v.jsxs(ri.Provider,{value:{setGlobalError:r},children:[t,e&&v.jsx(Tj,{open:!!e,message:e,onClose:i})]})};function jh(t){return t?(n=>n.replace(/[Ａ-Ｚａ-ｚ０-９]/g,r=>String.fromCharCode(r.charCodeAt(0)-65248)))(String(t)).toLowerCase():""}function Ij(t,e,n){return Array.isArray(t)?t.filter(i=>{if(e!==gn.ALL){const s=i.status||Ar;if(e===gn.READING_GROUP){if(![ut.READING,ut.RE_READING].includes(s))return!1}else if(s!==e)return!1}if(!n||!String(n).trim())return!0;const a=jh(n);return i.title&&jh(i.title).includes(a)||i.author&&jh(i.author).includes(a)||Array.isArray(i.tags)&&i.tags.some(s=>jh(s).includes(a))}):[]}function Dj(t,e){const n=Array.isArray(t)?t:[],r=n.length,i=a=>n.filter(s=>(s.status||Ar)===a).length;return{total:r,tsundoku:i(ut.TSUNDOKU),reading:i(ut.READING),reReading:i(ut.RE_READING),finished:i(ut.FINISHED),filtered:Array.isArray(e)?e.length:0}}const Rj=()=>{try{if(typeof Ci>"u"||!Ci.useState)return{allBooks:[],filteredBooks:[],stats:{total:0,tsundoku:0,reading:0,reReading:0,finished:0,filtered:0},loading:!1,error:null,filter:gn.READING,searchText:"",fetchBooks:async()=>{},handleFilterChange:()=>{},handleSearchChange:()=>{},clearSearch:()=>{},clearFilter:()=>{},normalizeTag:()=>""}}catch(D){return console.warn("React context not available in useBookList:",D),{allBooks:[],filteredBooks:[],stats:{total:0,reading:0,finished:0,filtered:0},loading:!1,error:null,filter:"reading",searchText:"",fetchBooks:async()=>{},handleFilterChange:()=>{},handleSearchChange:()=>{},clearSearch:()=>{},clearFilter:()=>{},normalizeTag:()=>""}}const{user:t}=rr(),e=M.useContext(ri),n=(e==null?void 0:e.setGlobalError)||(()=>{}),[r,i]=M.useState([]),[a,s]=M.useState(!0),[o,c]=M.useState(null),[d,f]=M.useState(gn.READING_GROUP),[p,g]=M.useState(""),y=M.useCallback(async()=>{if(!t){i([]),s(!1);return}try{s(!0),c(null);const D=jn(pr(Ht,"books"),wn("userId","==",t.uid),z1("updatedAt","desc")),B=(await Jn(D)).docs.map(O=>({id:O.id,...O.data()}));i(B)}catch(D){console.error("Error fetching books:",D),n("書籍一覧の取得に失敗しました。"),c("書籍一覧の取得に失敗しました。")}finally{s(!1)}},[t,n]),x=M.useCallback((D,k)=>{f(k)},[]),_=M.useCallback(D=>{g(D.target.value)},[]),A=M.useCallback(()=>{g("")},[]),E=M.useCallback(()=>{f(gn.READING_GROUP)},[]),T=Ij(r,d,p),C=Dj(r,T);return M.useEffect(()=>{y()},[t==null?void 0:t.uid]),{allBooks:r,filteredBooks:T,stats:C,loading:a,error:o,filter:d,searchText:p,fetchBooks:y,handleFilterChange:x,handleSearchChange:_,clearSearch:A,clearFilter:E,normalizeTag:jh}};function Oj(){const t=Zc(),{filteredBooks:e,loading:n,error:r,filter:i,searchText:a,handleFilterChange:s,handleSearchChange:o}=Rj(),c=d=>{t(`/book/${d}`)};return n?v.jsx("div",{children:"Loading..."}):v.jsxs(re,{sx:{maxWidth:1200,mx:"auto",pb:{xs:"72px",sm:"80px"}},children:[v.jsx(G1,{title:"本一覧",subtitle:"あなたの読書ライブラリ","data-testid":"book-list-header"}),v.jsxs(re,{sx:{px:{xs:1.5,sm:2,md:0}},children:[v.jsx(xt,{label:"検索（タイトル・著者・タグ）",value:a,onChange:o,fullWidth:!0,size:"small",sx:{mb:{xs:1.5,sm:2},"& .MuiOutlinedInput-root":{fontSize:{xs:"0.9rem",sm:"1rem"}}}}),v.jsx(re,{sx:{borderBottom:1,borderColor:"divider",mb:{xs:1.5,sm:2},position:"sticky",top:0,zIndex:1100,backgroundColor:"background.paper"},"data-testid":"book-list-tabs-container",style:{position:"sticky",top:0,zIndex:1100},children:v.jsxs(v1,{value:i,onChange:s,variant:{xs:"scrollable",sm:"standard"},scrollButtons:"auto",allowScrollButtonsMobile:!0,centered:{sm:!0},sx:{"& .MuiTab-root":{fontSize:{xs:"0.8rem",sm:"0.9rem"},minHeight:{xs:"40px",sm:"48px"},minWidth:{xs:"60px",sm:"auto"},px:{xs:1,sm:2}},"& .MuiTabs-scrollButtons":{"&.Mui-disabled":{opacity:.3}}},children:[v.jsx(ga,{label:pd[gn.ALL],value:gn.ALL}),v.jsx(ga,{label:pd[gn.TSUNDOKU],value:gn.TSUNDOKU}),v.jsx(ga,{label:pd[gn.READING_GROUP],value:gn.READING_GROUP}),v.jsx(ga,{label:pd[gn.SUSPENDED],value:gn.SUSPENDED}),v.jsx(ga,{label:pd[gn.FINISHED],value:gn.FINISHED})]})}),e.length===0?v.jsx(re,{sx:{textAlign:"center",py:{xs:3,sm:4},px:{xs:2,sm:0}},children:v.jsx(te,{variant:"body1",color:"text.secondary",sx:{fontSize:{xs:"0.9rem",sm:"1rem"}},children:"該当する本がありません"})}):v.jsx(re,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",sm:"repeat(2, 1fr)",md:"repeat(3, 1fr)",lg:"repeat(4, 1fr)"},gap:{xs:1.5,sm:2},dataTestid:"book-list-grid"},"data-testid":"book-list-grid",children:e.map(d=>v.jsx(re,{"data-testid":`book-grid-item-${d.id}`,children:v.jsx(Sj,{book:d,onClick:()=>c(d.id),testId:`book-list-card-${d.id}`})},d.id))})]})]})}const bo=(t,e)=>{const[n,r]=M.useState([]),[i,a]=M.useState(!1),s=M.useCallback(async()=>{if(e!=null&&e.uid)try{a(!0);const d=t==="book"?"bookTagHistory":"memoTagHistory",f=jn(pr(Ht,"users",e.uid,d),z1("updatedAt","desc")),p=await Jn(f),g=[];p.forEach(y=>{const x=y.data();x.tag&&g.push(x.tag)}),r(g)}catch(d){throw console.error("タグ履歴の取得に失敗しました:",d),d}finally{a(!1)}},[e==null?void 0:e.uid,t]),o=M.useCallback(async d=>{if(!(!(e!=null&&e.uid)||!d))try{const f=t==="book"?"bookTagHistory":"memoTagHistory",p=_o(Ht,"users",e.uid,f,d);await dI(p,{tag:d,updatedAt:Ti()})}catch(f){throw console.error("タグ履歴の保存に失敗しました:",f),f}},[e==null?void 0:e.uid,t]),c=M.useCallback(async d=>{if(!(!(e!=null&&e.uid)||!d||d.length===0))try{const f=d.map(p=>{const g=t==="book"?"bookTagHistory":"memoTagHistory",y=_o(Ht,"users",e.uid,g,p);return dI(y,{tag:p,updatedAt:Ti()})});await Promise.all(f)}catch(f){throw console.error("タグ履歴の一括保存に失敗しました:",f),f}},[e==null?void 0:e.uid,t]);return{tagOptions:n,loading:i,fetchTagHistory:s,saveTagToHistory:o,saveTagsToHistory:c}},Mj=()=>{const{user:t}=rr(),e=M.useContext(ri),n=(e==null?void 0:e.setGlobalError)||(()=>{}),[r,i]=M.useState(!1),[a,s]=M.useState(null),{saveTagsToHistory:o}=bo("book",t),c=M.useCallback(async f=>{if(!t)throw new Error("ユーザーが認証されていません。");if(!f.title)throw new Error("タイトルは必須です。");try{i(!0),s(null);let p=(f.tags||[]).filter(x=>x&&x.trim()!=="");f.inputTagValue&&!p.includes(f.inputTagValue.trim())&&(p=[...p,f.inputTagValue.trim()]),p=p.filter(x=>x&&x.trim()!=="");const g=await m0(pr(Ht,"books"),{userId:t.uid,isbn:f.isbn||"",title:f.title,author:f.author||"",publisher:f.publisher||"",publishedDate:f.publishedDate||"",coverImageUrl:f.coverImageUrl||"",tags:p,status:f.status||Ar,acquisitionType:f.acquisitionType||"unknown",createdAt:Ti(),updatedAt:Ti()});p.length>0&&await o(p);const y=f.status||Ar;if(y)try{const x=pr(Ht,"books",g.id,"statusHistory");await m0(x,{status:y,previousStatus:null,changedAt:Ti(),changedBy:t.uid,notes:"書籍追加時の初期ステータス",createdAt:Ti()})}catch(x){console.error("Error adding initial status history:",x)}return g.id}catch(p){console.error("Error adding book:",p);const g="書籍の追加に失敗しました: "+p.message;throw n(g),s(g),p}finally{i(!1)}},[t,n,o]),d=M.useCallback(()=>{s(null)},[]);return{addBook:c,loading:r,error:a,clearError:d}},Pj=()=>{const{user:t}=rr(),e=M.useContext(ri),n=(e==null?void 0:e.setGlobalError)||(()=>{}),[r,i]=M.useState(!1),[a,s]=M.useState(""),[o,c]=M.useState(!1),d=M.useCallback(async g=>{if(!g||!g.trim())return s("ISBNを入力してください"),null;s(""),i(!0),c(!0);try{const y=g.trim(),_=(await DT.get(`https://api.openbd.jp/v1/get?isbn=${y}`)).data[0];let A="",E="",T="",C="",D="",k=[];if(_&&_.summary&&(A=_.summary.title||"",E=_.summary.author||"",T=_.summary.publisher||"",C=_.summary.pubdate||"",D=_.summary.cover||"",_.summary.subject&&k.push(_.summary.subject),_.summary.ndc&&k.push(_.summary.ndc)),!D||!A)try{const O=(await DT.get(`https://www.googleapis.com/books/v1/volumes?q=isbn:${y}`)).data;if(O.items&&O.items.length>0){const I=O.items[0].volumeInfo;A||(A=I.title||""),E||(E=I.authors?I.authors.join(", "):""),T||(T=I.publisher||""),C||(C=I.publishedDate||""),!D&&I.imageLinks&&(D=I.imageLinks.thumbnail||I.imageLinks.smallThumbnail||""),I.categories&&I.categories.length>0&&(k=[...k,...I.categories])}}catch(B){console.error("Failed to fetch from Google Books API",B)}return A?{isbn:y,title:A,author:E,publisher:T,publishedDate:C,coverImageUrl:D,tags:Array.from(new Set(k))}:(n("書籍情報が見つかりませんでした"),null)}catch{const x="書籍情報の取得に失敗しました";return n(x),s(x),null}finally{i(!1)}},[n]),f=M.useCallback(()=>{s(null)},[]),p=M.useCallback(()=>{c(!1),s(null)},[]);return{searchBookByIsbn:d,loading:r,error:a,searchPerformed:o,clearError:f,clearSearch:p}},NM=()=>{const{user:t}=rr(),e=M.useContext(ri),n=(e==null?void 0:e.setGlobalError)||(()=>{}),[r,i]=M.useState(!1),[a,s]=M.useState(null),[o,c]=M.useState(null),d=M.useCallback(async p=>{if(!t||!p||!p.trim())return s(null),null;i(!0),c(null),s(null);try{const g=pr(Ht,"books"),y=jn(g,wn("userId","==",t.uid),wn("isbn","==",p.trim())),x=await Jn(y);if(x.empty)return s(null),null;{const _=x.docs[0],A={id:_.id,..._.data()};return s(A),A}}catch(g){console.error("Error checking book duplicate:",g);const y="書籍の重複チェックに失敗しました: "+g.message;return c(y),n(y),null}finally{i(!1)}},[t,n]),f=M.useCallback(()=>{s(null),c(null),i(!1)},[]);return{isChecking:r,duplicateBook:a,error:o,checkDuplicate:d,resetDuplicateCheck:f}};var kj={};const Nj=()=>typeof jest<"u"?kj.VITE_GOOGLE_BOOKS_API_KEY:"AIzaSyA4Zzn47v8NQiFSs-pwDxO8iqTZtdt0Df0",Lj=()=>{const[t,e]=M.useState([]),[n,r]=M.useState(!1),[i,a]=M.useState(""),[s,o]=M.useState(null),[c,d]=M.useState([]),[f,p]=M.useState({author:"",publisher:"",yearFrom:"",yearTo:""}),g=M.useCallback(()=>{try{const L=localStorage.getItem("bookSearchHistory");if(L){const P=JSON.parse(L);d(Array.isArray(P)?P:[])}}catch(L){console.warn("Failed to load search history:",L),d([])}},[]),y=M.useCallback(L=>{try{localStorage.setItem("bookSearchHistory",JSON.stringify(L))}catch(P){console.warn("Failed to save search history:",P)}},[]),x=M.useCallback((L,P)=>{if(!L||L.trim().length<2)return;const F={query:L.trim(),searchType:P,timestamp:Date.now()};d(q=>{const X=q.filter(G=>!(G.query===F.query&&G.searchType===F.searchType)),W=[F,...X].slice(0,10);return y(W),W})},[y]),_=M.useCallback(L=>{d(P=>{const F=P.filter((q,X)=>X!==L);return y(F),F})},[y]),A=M.useCallback(()=>{d([]),y([])},[y]),E=M.useCallback(L=>!L||L.length===0?L:L.filter(P=>{if(f.author&&P.author&&!P.author.toLowerCase().includes(f.author.toLowerCase())||f.publisher&&P.publisher&&!P.publisher.toLowerCase().includes(f.publisher.toLowerCase()))return!1;if(f.yearFrom||f.yearTo){const F=P.publishedDate?parseInt(P.publishedDate.split("-")[0]):null;if(F){if(f.yearFrom&&F<parseInt(f.yearFrom)||f.yearTo&&F>parseInt(f.yearTo))return!1}else return!1}return!0}),[f]),T=M.useCallback(L=>{p(P=>({...P,...L}))},[]),C=M.useCallback(()=>{p({author:"",publisher:"",yearFrom:"",yearTo:""})},[]),D=M.useCallback((L,P)=>Array.isArray(L)?L.map((F,q)=>({id:`${P}-${q}`,source:P,title:F.title||"",author:F.author||"",publisher:F.publisher||"",publishedDate:F.publishedDate||"",isbn:F.isbn||"",coverImageUrl:F.coverImageUrl||"",description:F.description||"",confidence:P==="google"?.8:.6})):[],[]),k=M.useCallback(async(L,P)=>{try{let F;try{F=Nj()}catch(G){console.error("Error accessing environment variables:",G),F=void 0}if(console.log("Google Books API Key check:",{hasApiKey:!!F,apiKeyLength:F?F.length:0,isJestEnvironment:typeof jest<"u",environment:typeof jest<"u"?"test":"browser"}),!F)return console.warn("Google Books API key is not configured, skipping Google Books search"),[];let q=L;P==="author"?q=`inauthor:${L}`:P==="publisher"?q=`inpublisher:${L}`:q=`intitle:${L}`;const X=await fetch(`https://www.googleapis.com/books/v1/volumes?q=${encodeURIComponent(q)}&key=${F}&maxResults=10`);if(!X.ok)throw new Error(`Google Books API error: ${X.status}`);const W=await X.json();return W.items?W.items.map(G=>{var ge,xe,be;const Q=G.volumeInfo||{},Z=Q.industryIdentifiers||[],de=((ge=Z.find(ke=>ke.type==="ISBN_13"))==null?void 0:ge.identifier)||((xe=Z.find(ke=>ke.type==="ISBN_10"))==null?void 0:xe.identifier)||"";return{title:Q.title||"",author:Q.authors?Q.authors.join(", "):"",publisher:Q.publisher||"",publishedDate:Q.publishedDate||"",isbn:de,coverImageUrl:((be=Q.imageLinks)==null?void 0:be.thumbnail)||"",description:Q.description||""}}):[]}catch(F){throw console.error("Google Books API error:",F),F}},[]),B=M.useCallback(L=>{const P=L.message||L.toString();return P.includes("API key")||P.includes("API key is not configured")?"検索サービスが利用できません。しばらく時間をおいて再度お試しください。":P.includes("network")||P.includes("fetch")?"インターネット接続を確認してください。":P.includes("timeout")?"検索に時間がかかっています。もう一度お試しください。":P.includes("404")||P.includes("Not Found")?"検索サービスが見つかりません。時間をおいて再度お試しください。":P.includes("429")||P.includes("Too Many Requests")?"検索回数が多すぎます。しばらく時間をおいて再度お試しください。":P.includes("500")||P.includes("Internal Server Error")?"検索サービスでエラーが発生しました。時間をおいて再度お試しください。":"検索中にエラーが発生しました。別のキーワードでお試しください。"},[]),O=M.useCallback(async(L,P="title")=>{if(!L||L.trim()===""){e([]);return}r(!0),a("検索を開始しています..."),o(null),e([]);try{const F=[];let q=!1,X=null;try{a("Google Booksで検索中..."),console.log("Trying Google Books API for query:",L);const G=await k(L,P);if(console.log("Google Books raw results:",G),G&&G.length>0){const Q=D(G,"google");console.log("Google Books normalized results:",Q),F.push(...Q)}}catch(G){console.warn("Google Books API failed:",G),q=!0,X=G}a("結果を整理中..."),console.log("Search results:",F),console.log("Results length:",F.length);const W=F.sort((G,Q)=>Q.confidence-G.confidence);e(W),F.length>0&&x(L,P),q&&F.length===0?o(B(X)):F.length===0&&o(P==="title"?`検索結果が見つかりませんでした。別のキーワードでお試しください。

💡 ヒント: より具体的なタイトルや著者名で検索してみてください。`:"検索結果が見つかりませんでした。別のキーワードでお試しください。")}catch(F){console.error("External book search error:",F),o(B(F))}finally{r(!1),a("")}},[B,x]),I=M.useCallback(()=>{e([]),o(null)},[]),R=M.useCallback(()=>{o(null)},[]),V=E(t);return{searchResults:t,filteredResults:V,loading:n,loadingStep:i,error:s,searchBooks:O,clearSearchResults:I,clearError:R,searchHistory:c,loadSearchHistory:g,addToSearchHistory:x,removeFromSearchHistory:_,clearSearchHistory:A,filters:f,updateFilters:T,clearFilters:C}},Bj=({onBookSelect:t,onCancel:e})=>{const[n,r]=M.useState("title"),[i,a]=M.useState(""),[s,o]=M.useState("relevance"),[c,d]=M.useState(!1),[f,p]=M.useState({}),{searchResults:g,filteredResults:y,loading:x,loadingStep:_,error:A,searchBooks:E,clearSearchResults:T,clearError:C,searchHistory:D,loadSearchHistory:k,removeFromSearchHistory:B,clearSearchHistory:O,filters:I,updateFilters:R,clearFilters:V}=Lj(),{checkDuplicate:L}=NM(),P=M.useCallback((Se,Ae)=>{Ae!==null&&(r(Ae),T())},[T]),F=M.useCallback(Se=>{a(Se.target.value),A&&C()},[A,C]),q=M.useCallback(async()=>{i.trim()&&(p({}),await E(i.trim(),n))},[i,n,E]),X=M.useCallback(async Se=>{if(!Se||Se.length===0)return;const Ae={};for(const Fe of Se)if(Fe.isbn)try{const ae=await L(Fe.isbn);ae&&(Ae[Fe.id]=ae)}catch(ae){console.error("Error checking duplicate for book:",Fe.title,ae)}p(Ae)},[L]),W=M.useCallback(Se=>{p({}),t(Se)},[t]),G=M.useCallback(()=>{T(),a(""),p({}),e()},[T,e]),Q=M.useCallback((Se,Ae)=>{a(Se),r(Ae),d(!1),p({}),E(Se,Ae)},[E]),Z=M.useCallback(Se=>{B(Se)},[B]),de=M.useCallback(()=>{O()},[O]),ge=M.useCallback(()=>{c||k(),d(!c)},[c,k]),xe=M.useCallback(Se=>{if(!Se||Se.length===0)return Se;const Ae=[...Se];switch(s){case"title":return Ae.sort((Fe,ae)=>Fe.title.localeCompare(ae.title,"ja"));case"author":return Ae.sort((Fe,ae)=>Fe.author.localeCompare(ae.author,"ja"));case"date":return Ae.sort((Fe,ae)=>{const ye=new Date(Fe.publishedDate||"1900-01-01");return new Date(ae.publishedDate||"1900-01-01")-ye});case"relevance":default:return Ae.sort((Fe,ae)=>ae.confidence-Fe.confidence)}},[s]);Ci.useEffect(()=>{y&&y.length>0&&!x&&X(y)},[y,x]);const be=()=>{if(x)return v.jsxs(re,{sx:{mt:2},children:[v.jsx(te,{variant:"subtitle2",sx:{mb:2,color:"primary.main",fontWeight:"bold",fontSize:{xs:"0.9rem",sm:"1rem"}},children:_||"検索中..."}),[...Array(3)].map((Ae,Fe)=>v.jsx(kn,{sx:{mb:2},children:v.jsx(Nn,{children:v.jsxs(re,{sx:{display:"flex",gap:2},children:[v.jsx(Ph,{variant:"rectangular",width:60,height:80}),v.jsxs(re,{sx:{flex:1},children:[v.jsx(Ph,{variant:"text",width:"80%",height:24}),v.jsx(Ph,{variant:"text",width:"60%",height:20}),v.jsx(Ph,{variant:"text",width:"40%",height:16})]})]})})},Fe))]});if(A)return v.jsx(Ki,{severity:"error",sx:{mt:2},action:v.jsx(Ke,{color:"inherit",size:"small",onClick:C,children:"再試行"}),children:A});if(g.length===0&&i.trim())return v.jsxs(re,{sx:{mt:2,textAlign:"center",py:4},children:[v.jsxs(te,{variant:"body1",color:"text.secondary",children:["「",i,"」に一致する結果が見つかりませんでした。"]}),v.jsx(te,{variant:"body2",color:"text.secondary",sx:{mt:1},children:"別のキーワードをお試しください。"})]});if(g.length===0)return v.jsxs(re,{sx:{mt:2,textAlign:"center",py:4},children:[v.jsx(te,{variant:"body1",color:"text.secondary",children:"検索キーワードを入力して検索を実行してください。"}),D&&D.length>0&&v.jsx(re,{sx:{mt:2},children:v.jsx(Ke,{variant:"outlined",startIcon:v.jsx(vN,{}),onClick:ge,size:"small",children:"検索履歴を表示"})})]});const Se=xe(y||[]);return v.jsxs(re,{sx:{mt:2},children:[v.jsxs(re,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2,flexDirection:{xs:"column",sm:"row"},gap:{xs:1,sm:0}},children:[v.jsxs(te,{variant:"subtitle2",sx:{fontSize:{xs:"0.9rem",sm:"1rem"}},children:["検索結果 (",g.length,"件)"]}),v.jsxs(Si,{size:"small",sx:{minWidth:120},children:[v.jsx(xa,{children:"並び替え"}),v.jsxs(Ua,{value:s,onChange:Ae=>o(Ae.target.value),label:"並び替え",children:[v.jsx(pn,{value:"relevance",children:"関連度順"}),v.jsx(pn,{value:"title",children:"タイトル順"}),v.jsx(pn,{value:"author",children:"著者順"}),v.jsx(pn,{value:"date",children:"出版日順"})]})]})]}),Se.map(Ae=>v.jsx(kn,{sx:{mb:2,cursor:"pointer","&:hover":{boxShadow:3}},onClick:()=>W(Ae),"data-testid":`search-result-${Ae.id}`,children:v.jsx(Nn,{children:v.jsxs(re,{sx:{display:"flex",gap:2},children:[v.jsx(re,{sx:{flexShrink:0},children:Ae.coverImageUrl?v.jsx(K3,{component:"img",image:Ae.coverImageUrl,alt:Ae.title,sx:{width:60,height:80,objectFit:"cover",borderRadius:1}}):v.jsx(re,{sx:{width:60,height:80,bgcolor:"grey.200",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:1},children:v.jsx(te,{variant:"caption",color:"text.secondary",children:"表紙なし"})})}),v.jsxs(re,{sx:{flex:1,minWidth:0},children:[v.jsx(te,{variant:"subtitle1",sx:{fontWeight:"bold",mb:.5,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",fontSize:{xs:"0.9rem",sm:"1rem"}},children:Ae.title}),v.jsx(te,{variant:"body2",color:"text.secondary",sx:{mb:.5,fontSize:{xs:"0.8rem",sm:"0.9rem"}},children:Ae.author}),v.jsxs(te,{variant:"body2",color:"text.secondary",sx:{mb:1,fontSize:{xs:"0.8rem",sm:"0.9rem"}},children:[Ae.publisher,Ae.publishedDate&&` - ${Ae.publishedDate}`]}),v.jsxs(re,{sx:{display:"flex",gap:.5,flexWrap:"wrap",mb:{xs:1,sm:1.5}},children:[v.jsx(mn,{label:Ae.source==="google"?"Google Books":"OpenBD",size:"small",color:Ae.source==="google"?"primary":"secondary",variant:"outlined",sx:{fontSize:{xs:"0.7rem",sm:"0.8rem"}}}),Ae.isbn&&v.jsx(mn,{label:`ISBN: ${Ae.isbn}`,size:"small",variant:"outlined",sx:{fontSize:{xs:"0.7rem",sm:"0.8rem"}}})]})]}),v.jsx(re,{sx:{flexShrink:0,alignSelf:"center",mt:{xs:1,sm:0}},children:f[Ae.id]?v.jsx(Ke,{variant:"outlined",size:"small",disabled:!0,"data-testid":`duplicate-book-${Ae.id}`,sx:{fontSize:{xs:"0.75rem",sm:"0.85rem"},minWidth:{xs:"100%",sm:"auto"},color:"text.secondary",borderColor:"text.secondary"},children:"追加済み"}):v.jsx(Ke,{variant:"contained",size:"small",onClick:Fe=>{Fe.stopPropagation(),W(Ae)},"data-testid":`select-book-${Ae.id}`,sx:{fontSize:{xs:"0.75rem",sm:"0.85rem"},minWidth:{xs:"100%",sm:"auto"}},children:"選択"})})]})})},Ae.id))]})},ke=()=>g.length===0?null:v.jsxs(re,{sx:{mt:2,p:2,bgcolor:"grey.50",borderRadius:1},children:[v.jsxs(re,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[v.jsx(te,{variant:"subtitle2",color:"text.secondary",children:"フィルター"}),v.jsx(Ke,{size:"small",onClick:V,disabled:!(I!=null&&I.author)&&!(I!=null&&I.publisher)&&!(I!=null&&I.yearFrom)&&!(I!=null&&I.yearTo),children:"クリア"})]}),v.jsxs(re,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",sm:"1fr 1fr"},gap:2,mb:2},children:[v.jsx(xt,{label:"著者",value:(I==null?void 0:I.author)||"",onChange:Se=>R({author:Se.target.value}),size:"small",placeholder:"著者名で絞り込み",sx:{fontSize:{xs:"0.8rem",sm:"0.9rem"}}}),v.jsx(xt,{label:"出版社",value:(I==null?void 0:I.publisher)||"",onChange:Se=>R({publisher:Se.target.value}),size:"small",placeholder:"出版社で絞り込み",sx:{fontSize:{xs:"0.8rem",sm:"0.9rem"}}}),v.jsx(xt,{label:"出版年（開始）",type:"number",value:(I==null?void 0:I.yearFrom)||"",onChange:Se=>R({yearFrom:Se.target.value}),size:"small",placeholder:"例: 2020",sx:{fontSize:{xs:"0.8rem",sm:"0.9rem"}}}),v.jsx(xt,{label:"出版年（終了）",type:"number",value:(I==null?void 0:I.yearTo)||"",onChange:Se=>R({yearTo:Se.target.value}),size:"small",placeholder:"例: 2024",sx:{fontSize:{xs:"0.8rem",sm:"0.9rem"}}})]}),v.jsxs(te,{variant:"caption",color:"text.secondary",children:[(y==null?void 0:y.length)||0,"件の結果（全",(g==null?void 0:g.length)||0,"件中）"]})]}),he=()=>!c||!D||D.length===0?null:v.jsxs(re,{sx:{mt:2},children:[v.jsxs(re,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:1},children:[v.jsx(te,{variant:"subtitle2",color:"text.secondary",children:"検索履歴"}),v.jsxs(re,{children:[v.jsx(Ke,{size:"small",onClick:de,startIcon:v.jsx(Q3,{}),sx:{mr:1},children:"クリア"}),v.jsx(Ke,{size:"small",onClick:()=>d(!1),children:"閉じる"})]})]}),v.jsx(zw,{sx:{bgcolor:"background.paper",borderRadius:1},children:D.map((Se,Ae)=>v.jsx($w,{sx:{px:1},secondaryAction:v.jsx(jr,{edge:"end",onClick:()=>Z(Ae),size:"small",children:v.jsx(S2,{fontSize:"small"})}),children:v.jsx(mN,{onClick:()=>Q(Se.query,Se.searchType),sx:{borderRadius:1},children:v.jsx(yN,{primary:Se.query,secondary:`${Se.searchType==="title"?"タイトル":Se.searchType==="author"?"著者":"出版社"}検索`})})},`${Se.query}-${Se.timestamp}`))})]});return v.jsxs(re,{sx:{p:{xs:1.5,sm:2},border:1,borderColor:"primary.main",borderRadius:1,bgcolor:"primary.50",mt:{xs:1.5,sm:2},maxWidth:"100%",overflow:"hidden"},"data-testid":"external-book-search",children:[v.jsx(te,{variant:"h6",sx:{mb:{xs:1.5,sm:2},fontSize:{xs:"1rem",sm:"1.25rem"}},children:"🔍 外部検索モード"}),v.jsx(re,{sx:{mb:{xs:1.5,sm:2},display:"flex",justifyContent:"center"},children:v.jsxs(gN,{value:n,exclusive:!0,onChange:P,"aria-label":"search type",size:"small",children:[v.jsx(bx,{value:"title","aria-label":"title","data-testid":"search-type-title",children:"タイトル"}),v.jsx(bx,{value:"author","aria-label":"author","data-testid":"search-type-author",children:"著者"}),v.jsx(bx,{value:"publisher","aria-label":"publisher","data-testid":"search-type-publisher",children:"出版社"})]})}),v.jsxs(re,{sx:{display:"flex",gap:{xs:.5,sm:1},mb:{xs:1.5,sm:2},flexDirection:{xs:"column",sm:"row"}},children:[v.jsx(xt,{fullWidth:!0,placeholder:`${n==="title"?"タイトル":n==="author"?"著者名":"出版社名"}を入力`,value:i,onChange:F,onKeyPress:Se=>{Se.key==="Enter"&&q()},"data-testid":"search-query-input",size:"small",sx:{"& .MuiOutlinedInput-root":{fontSize:{xs:"0.9rem",sm:"1rem"}}}}),v.jsx(Ke,{variant:"contained",onClick:q,disabled:!i.trim()||x,startIcon:x?v.jsx(C0,{size:16}):v.jsx(Hw,{}),"data-testid":"search-button",sx:{fontSize:{xs:"0.8rem",sm:"0.9rem"},minWidth:{xs:"100%",sm:"auto"}},children:x?"検索中...":"検索"})]}),he(),ke(),be(),v.jsx(re,{sx:{mt:{xs:2,sm:3},textAlign:"right"},children:v.jsx(Ke,{onClick:G,"data-testid":"cancel-button",sx:{fontSize:{xs:"0.8rem",sm:"0.9rem"}},children:"← ISBN検索に戻る"})})]})};function Fj({isbn:t="",onBookAdded:e}){const[n,r]=M.useState(t),[i,a]=M.useState(""),[s,o]=M.useState(""),[c,d]=M.useState(""),[f,p]=M.useState(""),[g,y]=M.useState(""),[x,_]=M.useState([]),[A,E]=M.useState(""),[T,C]=M.useState(ut.TSUNDOKU),[D,k]=M.useState(za.UNKNOWN),[B,O]=M.useState(!1),{user:I}=rr(),{tagOptions:R,fetchTagHistory:V}=bo("book",I),{addBook:L,loading:P,error:F}=Mj(),{searchBookByIsbn:q,loading:X,error:W}=Pj(),{duplicateBook:G,checkDuplicate:Q,resetDuplicateCheck:Z}=NM();M.useEffect(()=>{V()},[V]),M.useEffect(()=>{t&&t!==n&&(console.log("[BookForm] useEffect: propsのisbnが変化:",t),r(t),t.trim()!==""&&(console.log("[BookForm] useEffect: 自動で書籍情報取得を実行",t),de(t)))},[t,n]);const de=async he=>{const Se=he!==void 0?he:n;if(!Se||!Se.trim())return;Z();const Ae=await q(Se);Ae&&(a(Ae.title),o(Ae.author),d(Ae.publisher),p(Ae.publishedDate),y(Ae.coverImageUrl),_(Ae.tags),await Q(Se))},ge=async he=>{if(he.preventDefault(),!i)return;const Ae=await L({isbn:n,title:i,author:s,publisher:c,publishedDate:f,coverImageUrl:g,tags:x,inputTagValue:A,status:T,acquisitionType:D});Ae&&e(Ae)},xe=()=>{O(!B)},be=async he=>{a(he.title),o(he.author),d(he.publisher),p(he.publishedDate),y(he.coverImageUrl),r(he.isbn),O(!1),he.isbn&&await Q(he.isbn)},ke=()=>{O(!1)};return v.jsxs(re,{component:"form",onSubmit:ge,sx:{mt:{xs:1,sm:2}},role:"form","data-testid":"book-form",children:[v.jsxs(re,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",sm:"1fr 1fr"},gap:{xs:1,sm:1.5}},children:[v.jsx(re,{children:v.jsx(xt,{label:"ISBN",value:n,onChange:he=>r(he.target.value),fullWidth:!0,size:"small",placeholder:"例: 9784873119485",inputProps:{"data-testid":"book-isbn-input"},sx:{"& .MuiOutlinedInput-root":{fontSize:{xs:"0.9rem",sm:"1rem"}}}})}),v.jsx(re,{children:v.jsx(Ke,{onClick:()=>de(),variant:"outlined",disabled:X,sx:{mt:{xs:1,sm:0},height:{xs:"40px",sm:"56px"},fontSize:{xs:"0.8rem",sm:"0.9rem"}},fullWidth:!0,"data-testid":"book-fetch-button",children:X?"取得中...":"ISBNで書籍情報取得"})})]}),v.jsxs(re,{sx:{mt:1.5,textAlign:"center"},children:[v.jsx(Ke,{variant:"outlined",onClick:xe,startIcon:v.jsx("span",{children:"🔍"}),"data-testid":"external-search-button",sx:{fontSize:{xs:"0.8rem",sm:"0.9rem"},px:3,py:1},children:"外部検索で書籍を探す"}),v.jsx(te,{variant:"caption",color:"text.secondary",sx:{display:"block",mt:.5},children:"ISBNが分からない場合や、より詳細な情報を探す場合にご利用ください"})]}),B&&v.jsx(Bj,{onBookSelect:be,onCancel:ke}),g&&v.jsx(re,{sx:{textAlign:"center",my:{xs:1.5,sm:2},px:{xs:1,sm:0}},children:v.jsx("img",{src:g,alt:"表紙",style:{maxHeight:"120px",maxWidth:"100%",width:"auto",borderRadius:"4px"},"data-testid":"book-cover-image"})}),v.jsxs(re,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",sm:"1fr 1fr"},gap:{xs:1,sm:1.5},mt:{xs:.5,sm:1}},children:[v.jsx(re,{children:v.jsx(xt,{label:"タイトル",value:i,onChange:he=>a(he.target.value),fullWidth:!0,required:!0,size:"small",inputProps:{"data-testid":"book-title-input"},sx:{"& .MuiOutlinedInput-root":{fontSize:{xs:"0.9rem",sm:"1rem"}}}})}),v.jsx(re,{children:v.jsx(xt,{label:"著者",value:s,onChange:he=>o(he.target.value),fullWidth:!0,size:"small",inputProps:{"data-testid":"book-author-input"},sx:{"& .MuiOutlinedInput-root":{fontSize:{xs:"0.9rem",sm:"1rem"}}}})}),v.jsx(re,{children:v.jsx(xt,{label:"出版社",value:c,onChange:he=>d(he.target.value),fullWidth:!0,size:"small",inputProps:{"data-testid":"book-publisher-input"},sx:{"& .MuiOutlinedInput-root":{fontSize:{xs:"0.9rem",sm:"1rem"}}}})}),v.jsx(re,{children:v.jsx(xt,{label:"出版日",value:f,onChange:he=>p(he.target.value),fullWidth:!0,size:"small",inputProps:{"data-testid":"book-publishdate-input"},sx:{"& .MuiOutlinedInput-root":{fontSize:{xs:"0.9rem",sm:"1rem"}}}})})]}),v.jsx(re,{sx:{mt:{xs:1.5,sm:2}},children:v.jsx(mo,{multiple:!0,freeSolo:!0,options:R,value:x,getOptionLabel:he=>typeof he=="string"?he:he.inputValue||he.tag||"",onChange:(he,Se)=>{const Ae=(Se||[]).map(Fe=>{if(typeof Fe=="string")return Fe;if(Fe&&typeof Fe=="object"){if("inputValue"in Fe&&Fe.inputValue)return Fe.inputValue;if("tag"in Fe&&Fe.tag)return Fe.tag}return""}).filter(Boolean);_(Ae)},inputValue:A,onInputChange:(he,Se)=>E(Se),renderInput:he=>v.jsx(xt,{...he,label:"タグ",fullWidth:!0,size:"small",placeholder:"例: 小説,名作,技術書",inputProps:{...he.inputProps,"data-testid":"book-tags-input",style:{fontSize:"0.9rem"}},sx:{"& .MuiOutlinedInput-root":{fontSize:{xs:"0.9rem",sm:"1rem"}}}}),sx:{"& .MuiChip-root":{fontSize:{xs:"0.75rem",sm:"0.8rem"},height:{xs:"24px",sm:"28px"}}}})}),v.jsx(re,{sx:{mt:{xs:1.5,sm:2}},children:v.jsxs(Si,{fullWidth:!0,size:"small",children:[v.jsx(xa,{id:"book-status-label",children:"ステータス"}),v.jsx(Ua,{labelId:"book-status-label",value:T,label:"ステータス",onChange:he=>C(he.target.value),"data-testid":"book-status-select",sx:{"& .MuiSelect-select":{fontSize:{xs:"0.9rem",sm:"1rem"}}},children:W_.map(he=>v.jsx(pn,{value:he,children:Ps(he)},he))})]})}),v.jsx(re,{sx:{mt:{xs:1.5,sm:2}},children:v.jsxs(Si,{fullWidth:!0,size:"small",children:[v.jsx(xa,{id:"book-acquisition-type-label",children:"取得方法"}),v.jsx(Ua,{labelId:"book-acquisition-type-label",value:D,label:"取得方法",onChange:he=>k(he.target.value),"data-testid":"book-acquisition-type-select",sx:{"& .MuiSelect-select":{fontSize:{xs:"0.9rem",sm:"1rem"}}},children:Ej.map(he=>v.jsx(pn,{value:he,children:kM(he)},he))})]})}),G&&v.jsxs(Ki,{severity:"info",sx:{mt:{xs:1.5,sm:2},fontSize:{xs:"0.8rem",sm:"0.9rem"}},"data-testid":"duplicate-book-alert",children:["この書籍は既に追加済みです: ",G.title]}),(W||F)&&v.jsx(te,{color:"error",sx:{mt:{xs:1.5,sm:2},fontSize:{xs:"0.8rem",sm:"0.9rem"}},"data-testid":"book-form-error",children:W||F}),v.jsx(Ke,{type:"submit",variant:"contained",disabled:P||G,sx:{mt:{xs:2,sm:3},mb:{xs:"72px",sm:2},width:{xs:"100%",sm:"auto"},fontSize:{xs:"0.9rem",sm:"1rem"},py:{xs:1.5,sm:2}},"data-testid":"book-add-submit",children:P?"追加中...":G?"追加済みです":"本を追加"})]})}function Vj(t,e){var n=Object.setPrototypeOf;n?n(t,e):t.__proto__=e}function jj(t,e){e===void 0&&(e=t.constructor);var n=Error.captureStackTrace;n&&n(t,e)}var Uj=function(){var t=function(n,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(i[s]=a[s])},t(n,r)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Hj=function(t){Uj(e,t);function e(n,r){var i=this.constructor,a=t.call(this,n,r)||this;return Object.defineProperty(a,"name",{value:i.name,enumerable:!1,configurable:!0}),Vj(a,i.prototype),jj(a),a}return e}(Error),zj=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Vi=function(t){zj(e,t);function e(n){n===void 0&&(n=void 0);var r=t.call(this,n)||this;return r.message=n,r}return e.prototype.getKind=function(){var n=this.constructor;return n.kind},e.kind="Exception",e}(Hj),$j=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Na=function(t){$j(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="ArgumentException",e}(Vi),Gj=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),rt=function(t){Gj(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="IllegalArgumentException",e}(Vi),Wj=function(){function t(e){if(this.binarizer=e,e===null)throw new rt("Binarizer must be non-null.")}return t.prototype.getWidth=function(){return this.binarizer.getWidth()},t.prototype.getHeight=function(){return this.binarizer.getHeight()},t.prototype.getBlackRow=function(e,n){return this.binarizer.getBlackRow(e,n)},t.prototype.getBlackMatrix=function(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix},t.prototype.isCropSupported=function(){return this.binarizer.getLuminanceSource().isCropSupported()},t.prototype.crop=function(e,n,r,i){var a=this.binarizer.getLuminanceSource().crop(e,n,r,i);return new t(this.binarizer.createBinarizer(a))},t.prototype.isRotateSupported=function(){return this.binarizer.getLuminanceSource().isRotateSupported()},t.prototype.rotateCounterClockwise=function(){var e=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new t(this.binarizer.createBinarizer(e))},t.prototype.rotateCounterClockwise45=function(){var e=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new t(this.binarizer.createBinarizer(e))},t.prototype.toString=function(){try{return this.getBlackMatrix().toString()}catch{return""}},t}(),Yj=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Vr=function(t){Yj(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.getChecksumInstance=function(){return new e},e.kind="ChecksumException",e}(Vi),qj=function(){function t(e){this.source=e}return t.prototype.getLuminanceSource=function(){return this.source},t.prototype.getWidth=function(){return this.source.getWidth()},t.prototype.getHeight=function(){return this.source.getHeight()},t}(),Sn=function(){function t(){}return t.arraycopy=function(e,n,r,i,a){for(;a--;)r[i++]=e[n++]},t.currentTimeMillis=function(){return Date.now()},t}(),Xj=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Y_=function(t){Xj(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="IndexOutOfBoundsException",e}(Vi),Kj=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),pI=function(t){Kj(e,t);function e(n,r){n===void 0&&(n=void 0),r===void 0&&(r=void 0);var i=t.call(this,r)||this;return i.index=n,i.message=r,i}return e.kind="ArrayIndexOutOfBoundsException",e}(Y_),Qj=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Cr=function(){function t(){}return t.fill=function(e,n){for(var r=0,i=e.length;r<i;r++)e[r]=n},t.fillWithin=function(e,n,r,i){t.rangeCheck(e.length,n,r);for(var a=n;a<r;a++)e[a]=i},t.rangeCheck=function(e,n,r){if(n>r)throw new rt("fromIndex("+n+") > toIndex("+r+")");if(n<0)throw new pI(n);if(r>e)throw new pI(r)},t.asList=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return e},t.create=function(e,n,r){var i=Array.from({length:e});return i.map(function(a){return Array.from({length:n}).fill(r)})},t.createInt32Array=function(e,n,r){var i=Array.from({length:e});return i.map(function(a){return Int32Array.from({length:n}).fill(r)})},t.equals=function(e,n){if(!e||!n||!e.length||!n.length||e.length!==n.length)return!1;for(var r=0,i=e.length;r<i;r++)if(e[r]!==n[r])return!1;return!0},t.hashCode=function(e){var n,r;if(e===null)return 0;var i=1;try{for(var a=Qj(e),s=a.next();!s.done;s=a.next()){var o=s.value;i=31*i+o}}catch(c){n={error:c}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}return i},t.fillUint8Array=function(e,n){for(var r=0;r!==e.length;r++)e[r]=n},t.copyOf=function(e,n){return e.slice(0,n)},t.copyOfUint8Array=function(e,n){if(e.length<=n){var r=new Uint8Array(n);return r.set(e),r}return e.slice(0,n)},t.copyOfRange=function(e,n,r){var i=r-n,a=new Int32Array(i);return Sn.arraycopy(e,n,a,0,i),a},t.binarySearch=function(e,n,r){r===void 0&&(r=t.numberComparator);for(var i=0,a=e.length-1;i<=a;){var s=a+i>>1,o=r(n,e[s]);if(o>0)i=s+1;else if(o<0)a=s-1;else return s}return-i-1},t.numberComparator=function(e,n){return e-n},t}(),Ct=function(){function t(){}return t.numberOfTrailingZeros=function(e){var n;if(e===0)return 32;var r=31;return n=e<<16,n!==0&&(r-=16,e=n),n=e<<8,n!==0&&(r-=8,e=n),n=e<<4,n!==0&&(r-=4,e=n),n=e<<2,n!==0&&(r-=2,e=n),r-(e<<1>>>31)},t.numberOfLeadingZeros=function(e){if(e===0)return 32;var n=1;return e>>>16||(n+=16,e<<=16),e>>>24||(n+=8,e<<=8),e>>>28||(n+=4,e<<=4),e>>>30||(n+=2,e<<=2),n-=e>>>31,n},t.toHexString=function(e){return e.toString(16)},t.toBinaryString=function(e){return String(parseInt(String(e),2))},t.bitCount=function(e){return e=e-(e>>>1&1431655765),e=(e&858993459)+(e>>>2&858993459),e=e+(e>>>4)&252645135,e=e+(e>>>8),e=e+(e>>>16),e&63},t.truncDivision=function(e,n){return Math.trunc(e/n)},t.parseInt=function(e,n){return n===void 0&&(n=void 0),parseInt(e,n)},t.MIN_VALUE_32_BITS=-2147483648,t.MAX_VALUE=Number.MAX_SAFE_INTEGER,t}(),Ur=function(){function t(e,n){e===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=e,n==null?this.bits=t.makeArray(e):this.bits=n)}return t.prototype.getSize=function(){return this.size},t.prototype.getSizeInBytes=function(){return Math.floor((this.size+7)/8)},t.prototype.ensureCapacity=function(e){if(e>this.bits.length*32){var n=t.makeArray(e);Sn.arraycopy(this.bits,0,n,0,this.bits.length),this.bits=n}},t.prototype.get=function(e){return(this.bits[Math.floor(e/32)]&1<<(e&31))!==0},t.prototype.set=function(e){this.bits[Math.floor(e/32)]|=1<<(e&31)},t.prototype.flip=function(e){this.bits[Math.floor(e/32)]^=1<<(e&31)},t.prototype.getNextSet=function(e){var n=this.size;if(e>=n)return n;var r=this.bits,i=Math.floor(e/32),a=r[i];a&=~((1<<(e&31))-1);for(var s=r.length;a===0;){if(++i===s)return n;a=r[i]}var o=i*32+Ct.numberOfTrailingZeros(a);return o>n?n:o},t.prototype.getNextUnset=function(e){var n=this.size;if(e>=n)return n;var r=this.bits,i=Math.floor(e/32),a=~r[i];a&=~((1<<(e&31))-1);for(var s=r.length;a===0;){if(++i===s)return n;a=~r[i]}var o=i*32+Ct.numberOfTrailingZeros(a);return o>n?n:o},t.prototype.setBulk=function(e,n){this.bits[Math.floor(e/32)]=n},t.prototype.setRange=function(e,n){if(n<e||e<0||n>this.size)throw new rt;if(n!==e){n--;for(var r=Math.floor(e/32),i=Math.floor(n/32),a=this.bits,s=r;s<=i;s++){var o=s>r?0:e&31,c=s<i?31:n&31,d=(2<<c)-(1<<o);a[s]|=d}}},t.prototype.clear=function(){for(var e=this.bits.length,n=this.bits,r=0;r<e;r++)n[r]=0},t.prototype.isRange=function(e,n,r){if(n<e||e<0||n>this.size)throw new rt;if(n===e)return!0;n--;for(var i=Math.floor(e/32),a=Math.floor(n/32),s=this.bits,o=i;o<=a;o++){var c=o>i?0:e&31,d=o<a?31:n&31,f=(2<<d)-(1<<c)&4294967295;if((s[o]&f)!==(r?f:0))return!1}return!0},t.prototype.appendBit=function(e){this.ensureCapacity(this.size+1),e&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++},t.prototype.appendBits=function(e,n){if(n<0||n>32)throw new rt("Num bits must be between 0 and 32");this.ensureCapacity(this.size+n);for(var r=n;r>0;r--)this.appendBit((e>>r-1&1)===1)},t.prototype.appendBitArray=function(e){var n=e.size;this.ensureCapacity(this.size+n);for(var r=0;r<n;r++)this.appendBit(e.get(r))},t.prototype.xor=function(e){if(this.size!==e.size)throw new rt("Sizes don't match");for(var n=this.bits,r=0,i=n.length;r<i;r++)n[r]^=e.bits[r]},t.prototype.toBytes=function(e,n,r,i){for(var a=0;a<i;a++){for(var s=0,o=0;o<8;o++)this.get(e)&&(s|=1<<7-o),e++;n[r+a]=s}},t.prototype.getBitArray=function(){return this.bits},t.prototype.reverse=function(){for(var e=new Int32Array(this.bits.length),n=Math.floor((this.size-1)/32),r=n+1,i=this.bits,a=0;a<r;a++){var s=i[a];s=s>>1&1431655765|(s&1431655765)<<1,s=s>>2&858993459|(s&858993459)<<2,s=s>>4&252645135|(s&252645135)<<4,s=s>>8&16711935|(s&16711935)<<8,s=s>>16&65535|(s&65535)<<16,e[n-a]=s}if(this.size!==r*32){for(var o=r*32-this.size,c=e[0]>>>o,a=1;a<r;a++){var d=e[a];c|=d<<32-o,e[a-1]=c,c=d>>>o}e[r-1]=c}this.bits=e},t.makeArray=function(e){return new Int32Array(Math.floor((e+31)/32))},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var n=e;return this.size===n.size&&Cr.equals(this.bits,n.bits)},t.prototype.hashCode=function(){return 31*this.size+Cr.hashCode(this.bits)},t.prototype.toString=function(){for(var e="",n=0,r=this.size;n<r;n++)(n&7)===0&&(e+=" "),e+=this.get(n)?"X":".";return e},t.prototype.clone=function(){return new t(this.size,this.bits.slice())},t.prototype.toArray=function(){for(var e=[],n=0,r=this.size;n<r;n++)e.push(this.get(n));return e},t}(),ew;(function(t){t[t.OTHER=0]="OTHER",t[t.PURE_BARCODE=1]="PURE_BARCODE",t[t.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",t[t.TRY_HARDER=3]="TRY_HARDER",t[t.CHARACTER_SET=4]="CHARACTER_SET",t[t.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",t[t.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",t[t.ENABLE_CODE_39_EXTENDED_MODE=7]="ENABLE_CODE_39_EXTENDED_MODE",t[t.ASSUME_GS1=8]="ASSUME_GS1",t[t.RETURN_CODABAR_START_END=9]="RETURN_CODABAR_START_END",t[t.NEED_RESULT_POINT_CALLBACK=10]="NEED_RESULT_POINT_CALLBACK",t[t.ALLOWED_EAN_EXTENSIONS=11]="ALLOWED_EAN_EXTENSIONS"})(ew||(ew={}));const Ln=ew;var Zj=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),je=function(t){Zj(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.getFormatInstance=function(){return new e},e.kind="FormatException",e}(Vi),Jj=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},sn;(function(t){t[t.Cp437=0]="Cp437",t[t.ISO8859_1=1]="ISO8859_1",t[t.ISO8859_2=2]="ISO8859_2",t[t.ISO8859_3=3]="ISO8859_3",t[t.ISO8859_4=4]="ISO8859_4",t[t.ISO8859_5=5]="ISO8859_5",t[t.ISO8859_6=6]="ISO8859_6",t[t.ISO8859_7=7]="ISO8859_7",t[t.ISO8859_8=8]="ISO8859_8",t[t.ISO8859_9=9]="ISO8859_9",t[t.ISO8859_10=10]="ISO8859_10",t[t.ISO8859_11=11]="ISO8859_11",t[t.ISO8859_13=12]="ISO8859_13",t[t.ISO8859_14=13]="ISO8859_14",t[t.ISO8859_15=14]="ISO8859_15",t[t.ISO8859_16=15]="ISO8859_16",t[t.SJIS=16]="SJIS",t[t.Cp1250=17]="Cp1250",t[t.Cp1251=18]="Cp1251",t[t.Cp1252=19]="Cp1252",t[t.Cp1256=20]="Cp1256",t[t.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",t[t.UTF8=22]="UTF8",t[t.ASCII=23]="ASCII",t[t.Big5=24]="Big5",t[t.GB18030=25]="GB18030",t[t.EUC_KR=26]="EUC_KR"})(sn||(sn={}));var Tr=function(){function t(e,n,r){for(var i,a,s=[],o=3;o<arguments.length;o++)s[o-3]=arguments[o];this.valueIdentifier=e,this.name=r,typeof n=="number"?this.values=Int32Array.from([n]):this.values=n,this.otherEncodingNames=s,t.VALUE_IDENTIFIER_TO_ECI.set(e,this),t.NAME_TO_ECI.set(r,this);for(var c=this.values,d=0,f=c.length;d!==f;d++){var p=c[d];t.VALUES_TO_ECI.set(p,this)}try{for(var g=Jj(s),y=g.next();!y.done;y=g.next()){var x=y.value;t.NAME_TO_ECI.set(x,this)}}catch(_){i={error:_}}finally{try{y&&!y.done&&(a=g.return)&&a.call(g)}finally{if(i)throw i.error}}}return t.prototype.getValueIdentifier=function(){return this.valueIdentifier},t.prototype.getName=function(){return this.name},t.prototype.getValue=function(){return this.values[0]},t.getCharacterSetECIByValue=function(e){if(e<0||e>=900)throw new je("incorect value");var n=t.VALUES_TO_ECI.get(e);if(n===void 0)throw new je("incorect value");return n},t.getCharacterSetECIByName=function(e){var n=t.NAME_TO_ECI.get(e);if(n===void 0)throw new je("incorect value");return n},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var n=e;return this.getName()===n.getName()},t.VALUE_IDENTIFIER_TO_ECI=new Map,t.VALUES_TO_ECI=new Map,t.NAME_TO_ECI=new Map,t.Cp437=new t(sn.Cp437,Int32Array.from([0,2]),"Cp437"),t.ISO8859_1=new t(sn.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),t.ISO8859_2=new t(sn.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),t.ISO8859_3=new t(sn.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),t.ISO8859_4=new t(sn.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),t.ISO8859_5=new t(sn.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),t.ISO8859_6=new t(sn.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),t.ISO8859_7=new t(sn.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),t.ISO8859_8=new t(sn.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),t.ISO8859_9=new t(sn.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),t.ISO8859_10=new t(sn.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),t.ISO8859_11=new t(sn.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),t.ISO8859_13=new t(sn.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),t.ISO8859_14=new t(sn.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),t.ISO8859_15=new t(sn.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),t.ISO8859_16=new t(sn.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),t.SJIS=new t(sn.SJIS,20,"SJIS","Shift_JIS"),t.Cp1250=new t(sn.Cp1250,21,"Cp1250","windows-1250"),t.Cp1251=new t(sn.Cp1251,22,"Cp1251","windows-1251"),t.Cp1252=new t(sn.Cp1252,23,"Cp1252","windows-1252"),t.Cp1256=new t(sn.Cp1256,24,"Cp1256","windows-1256"),t.UnicodeBigUnmarked=new t(sn.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),t.UTF8=new t(sn.UTF8,26,"UTF8","UTF-8"),t.ASCII=new t(sn.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),t.Big5=new t(sn.Big5,28,"Big5"),t.GB18030=new t(sn.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),t.EUC_KR=new t(sn.EUC_KR,30,"EUC_KR","EUC-KR"),t}(),eU=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),dm=function(t){eU(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="UnsupportedOperationException",e}(Vi),Aa=function(){function t(){}return t.decode=function(e,n){var r=this.encodingName(n);return this.customDecoder?this.customDecoder(e,r):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(r)?this.decodeFallback(e,r):new TextDecoder(r).decode(e)},t.shouldDecodeOnFallback=function(e){return!t.isBrowser()&&e==="ISO-8859-1"},t.encode=function(e,n){var r=this.encodingName(n);return this.customEncoder?this.customEncoder(e,r):typeof TextEncoder>"u"?this.encodeFallback(e):new TextEncoder().encode(e)},t.isBrowser=function(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"},t.encodingName=function(e){return typeof e=="string"?e:e.getName()},t.encodingCharacterSet=function(e){return e instanceof Tr?e:Tr.getCharacterSetECIByName(e)},t.decodeFallback=function(e,n){var r=this.encodingCharacterSet(n);if(t.isDecodeFallbackSupported(r)){for(var i="",a=0,s=e.length;a<s;a++){var o=e[a].toString(16);o.length<2&&(o="0"+o),i+="%"+o}return decodeURIComponent(i)}if(r.equals(Tr.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(e.buffer));throw new dm("Encoding "+this.encodingName(n)+" not supported by fallback.")},t.isDecodeFallbackSupported=function(e){return e.equals(Tr.UTF8)||e.equals(Tr.ISO8859_1)||e.equals(Tr.ASCII)},t.encodeFallback=function(e){for(var n=btoa(unescape(encodeURIComponent(e))),r=n.split(""),i=[],a=0;a<r.length;a++)i.push(r[a].charCodeAt(0));return new Uint8Array(i)},t}(),Vt=function(){function t(){}return t.castAsNonUtf8Char=function(e,n){n===void 0&&(n=null);var r=n?n.getName():this.ISO88591;return Aa.decode(new Uint8Array([e]),r)},t.guessEncoding=function(e,n){if(n!=null&&n.get(Ln.CHARACTER_SET)!==void 0)return n.get(Ln.CHARACTER_SET).toString();for(var r=e.length,i=!0,a=!0,s=!0,o=0,c=0,d=0,f=0,p=0,g=0,y=0,x=0,_=0,A=0,E=0,T=e.length>3&&e[0]===239&&e[1]===187&&e[2]===191,C=0;C<r&&(i||a||s);C++){var D=e[C]&255;s&&(o>0?(D&128)===0?s=!1:o--:(D&128)!==0&&((D&64)===0?s=!1:(o++,(D&32)===0?c++:(o++,(D&16)===0?d++:(o++,(D&8)===0?f++:s=!1))))),i&&(D>127&&D<160?i=!1:D>159&&(D<192||D===215||D===247)&&E++),a&&(p>0?D<64||D===127||D>252?a=!1:p--:D===128||D===160||D>239?a=!1:D>160&&D<224?(g++,x=0,y++,y>_&&(_=y)):D>127?(p++,y=0,x++,x>A&&(A=x)):(y=0,x=0))}return s&&o>0&&(s=!1),a&&p>0&&(a=!1),s&&(T||c+d+f>0)?t.UTF8:a&&(t.ASSUME_SHIFT_JIS||_>=3||A>=3)?t.SHIFT_JIS:i&&a?_===2&&g===2||E*10>=r?t.SHIFT_JIS:t.ISO88591:i?t.ISO88591:a?t.SHIFT_JIS:s?t.UTF8:t.PLATFORM_DEFAULT_ENCODING},t.format=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i=-1;function a(o,c,d,f,p,g){if(o==="%%")return"%";if(n[++i]!==void 0){o=f?parseInt(f.substr(1)):void 0;var y=p?parseInt(p.substr(1)):void 0,x;switch(g){case"s":x=n[i];break;case"c":x=n[i][0];break;case"f":x=parseFloat(n[i]).toFixed(o);break;case"p":x=parseFloat(n[i]).toPrecision(o);break;case"e":x=parseFloat(n[i]).toExponential(o);break;case"x":x=parseInt(n[i]).toString(y||16);break;case"d":x=parseFloat(parseInt(n[i],y||10).toPrecision(o)).toFixed(0);break}x=typeof x=="object"?JSON.stringify(x):(+x).toString(y);for(var _=parseInt(d),A=d&&d[0]+""=="0"?"0":" ";x.length<_;)x=c!==void 0?x+A:A+x;return x}}var s=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(s,a)},t.getBytes=function(e,n){return Aa.encode(e,n)},t.getCharCode=function(e,n){return n===void 0&&(n=0),e.charCodeAt(n)},t.getCharAt=function(e){return String.fromCharCode(e)},t.SHIFT_JIS=Tr.SJIS.getName(),t.GB2312="GB2312",t.ISO88591=Tr.ISO8859_1.getName(),t.EUC_JP="EUC_JP",t.UTF8=Tr.UTF8.getName(),t.PLATFORM_DEFAULT_ENCODING=t.UTF8,t.ASSUME_SHIFT_JIS=!1,t}(),At=function(){function t(e){e===void 0&&(e=""),this.value=e}return t.prototype.enableDecoding=function(e){return this.encoding=e,this},t.prototype.append=function(e){return typeof e=="string"?this.value+=e.toString():this.encoding?this.value+=Vt.castAsNonUtf8Char(e,this.encoding):this.value+=String.fromCharCode(e),this},t.prototype.appendChars=function(e,n,r){for(var i=n;n<n+r;i++)this.append(e[i]);return this},t.prototype.length=function(){return this.value.length},t.prototype.charAt=function(e){return this.value.charAt(e)},t.prototype.deleteCharAt=function(e){this.value=this.value.substr(0,e)+this.value.substring(e+1)},t.prototype.setCharAt=function(e,n){this.value=this.value.substr(0,e)+n+this.value.substr(e+1)},t.prototype.substring=function(e,n){return this.value.substring(e,n)},t.prototype.setLengthToZero=function(){this.value=""},t.prototype.toString=function(){return this.value},t.prototype.insert=function(e,n){this.value=this.value.substring(0,e)+n+this.value.substring(e)},t}(),ks=function(){function t(e,n,r,i){if(this.width=e,this.height=n,this.rowSize=r,this.bits=i,n==null&&(n=e),this.height=n,e<1||n<1)throw new rt("Both dimensions must be greater than 0");r==null&&(r=Math.floor((e+31)/32)),this.rowSize=r,i==null&&(this.bits=new Int32Array(this.rowSize*this.height))}return t.parseFromBooleanArray=function(e){for(var n=e.length,r=e[0].length,i=new t(r,n),a=0;a<n;a++)for(var s=e[a],o=0;o<r;o++)s[o]&&i.set(o,a);return i},t.parseFromString=function(e,n,r){if(e===null)throw new rt("stringRepresentation cannot be null");for(var i=new Array(e.length),a=0,s=0,o=-1,c=0,d=0;d<e.length;)if(e.charAt(d)===`
`||e.charAt(d)==="\r"){if(a>s){if(o===-1)o=a-s;else if(a-s!==o)throw new rt("row lengths do not match");s=a,c++}d++}else if(e.substring(d,d+n.length)===n)d+=n.length,i[a]=!0,a++;else if(e.substring(d,d+r.length)===r)d+=r.length,i[a]=!1,a++;else throw new rt("illegal character encountered: "+e.substring(d));if(a>s){if(o===-1)o=a-s;else if(a-s!==o)throw new rt("row lengths do not match");c++}for(var f=new t(o,c),p=0;p<a;p++)i[p]&&f.set(Math.floor(p%o),Math.floor(p/o));return f},t.prototype.get=function(e,n){var r=n*this.rowSize+Math.floor(e/32);return(this.bits[r]>>>(e&31)&1)!==0},t.prototype.set=function(e,n){var r=n*this.rowSize+Math.floor(e/32);this.bits[r]|=1<<(e&31)&4294967295},t.prototype.unset=function(e,n){var r=n*this.rowSize+Math.floor(e/32);this.bits[r]&=~(1<<(e&31)&4294967295)},t.prototype.flip=function(e,n){var r=n*this.rowSize+Math.floor(e/32);this.bits[r]^=1<<(e&31)&4294967295},t.prototype.xor=function(e){if(this.width!==e.getWidth()||this.height!==e.getHeight()||this.rowSize!==e.getRowSize())throw new rt("input matrix dimensions do not match");for(var n=new Ur(Math.floor(this.width/32)+1),r=this.rowSize,i=this.bits,a=0,s=this.height;a<s;a++)for(var o=a*r,c=e.getRow(a,n).getBitArray(),d=0;d<r;d++)i[o+d]^=c[d]},t.prototype.clear=function(){for(var e=this.bits,n=e.length,r=0;r<n;r++)e[r]=0},t.prototype.setRegion=function(e,n,r,i){if(n<0||e<0)throw new rt("Left and top must be nonnegative");if(i<1||r<1)throw new rt("Height and width must be at least 1");var a=e+r,s=n+i;if(s>this.height||a>this.width)throw new rt("The region must fit inside the matrix");for(var o=this.rowSize,c=this.bits,d=n;d<s;d++)for(var f=d*o,p=e;p<a;p++)c[f+Math.floor(p/32)]|=1<<(p&31)&4294967295},t.prototype.getRow=function(e,n){n==null||n.getSize()<this.width?n=new Ur(this.width):n.clear();for(var r=this.rowSize,i=this.bits,a=e*r,s=0;s<r;s++)n.setBulk(s*32,i[a+s]);return n},t.prototype.setRow=function(e,n){Sn.arraycopy(n.getBitArray(),0,this.bits,e*this.rowSize,this.rowSize)},t.prototype.rotate180=function(){for(var e=this.getWidth(),n=this.getHeight(),r=new Ur(e),i=new Ur(e),a=0,s=Math.floor((n+1)/2);a<s;a++)r=this.getRow(a,r),i=this.getRow(n-1-a,i),r.reverse(),i.reverse(),this.setRow(a,i),this.setRow(n-1-a,r)},t.prototype.getEnclosingRectangle=function(){for(var e=this.width,n=this.height,r=this.rowSize,i=this.bits,a=e,s=n,o=-1,c=-1,d=0;d<n;d++)for(var f=0;f<r;f++){var p=i[d*r+f];if(p!==0){if(d<s&&(s=d),d>c&&(c=d),f*32<a){for(var g=0;(p<<31-g&4294967295)===0;)g++;f*32+g<a&&(a=f*32+g)}if(f*32+31>o){for(var g=31;!(p>>>g);)g--;f*32+g>o&&(o=f*32+g)}}}return o<a||c<s?null:Int32Array.from([a,s,o-a+1,c-s+1])},t.prototype.getTopLeftOnBit=function(){for(var e=this.rowSize,n=this.bits,r=0;r<n.length&&n[r]===0;)r++;if(r===n.length)return null;for(var i=r/e,a=r%e*32,s=n[r],o=0;(s<<31-o&4294967295)===0;)o++;return a+=o,Int32Array.from([a,i])},t.prototype.getBottomRightOnBit=function(){for(var e=this.rowSize,n=this.bits,r=n.length-1;r>=0&&n[r]===0;)r--;if(r<0)return null;for(var i=Math.floor(r/e),a=Math.floor(r%e)*32,s=n[r],o=31;!(s>>>o);)o--;return a+=o,Int32Array.from([a,i])},t.prototype.getWidth=function(){return this.width},t.prototype.getHeight=function(){return this.height},t.prototype.getRowSize=function(){return this.rowSize},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var n=e;return this.width===n.width&&this.height===n.height&&this.rowSize===n.rowSize&&Cr.equals(this.bits,n.bits)},t.prototype.hashCode=function(){var e=this.width;return e=31*e+this.width,e=31*e+this.height,e=31*e+this.rowSize,e=31*e+Cr.hashCode(this.bits),e},t.prototype.toString=function(e,n,r){return e===void 0&&(e="X "),n===void 0&&(n="  "),r===void 0&&(r=`
`),this.buildToString(e,n,r)},t.prototype.buildToString=function(e,n,r){for(var i=new At,a=0,s=this.height;a<s;a++){for(var o=0,c=this.width;o<c;o++)i.append(this.get(o,a)?e:n);i.append(r)}return i.toString()},t.prototype.clone=function(){return new t(this.width,this.height,this.rowSize,this.bits.slice())},t}(),tU=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),_e=function(t){tU(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.getNotFoundInstance=function(){return new e},e.kind="NotFoundException",e}(Vi),nU=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),rU=function(t){nU(e,t);function e(n){var r=t.call(this,n)||this;return r.luminances=e.EMPTY,r.buckets=new Int32Array(e.LUMINANCE_BUCKETS),r}return e.prototype.getBlackRow=function(n,r){var i=this.getLuminanceSource(),a=i.getWidth();r==null||r.getSize()<a?r=new Ur(a):r.clear(),this.initArrays(a);for(var s=i.getRow(n,this.luminances),o=this.buckets,c=0;c<a;c++)o[(s[c]&255)>>e.LUMINANCE_SHIFT]++;var d=e.estimateBlackPoint(o);if(a<3)for(var c=0;c<a;c++)(s[c]&255)<d&&r.set(c);else for(var f=s[0]&255,p=s[1]&255,c=1;c<a-1;c++){var g=s[c+1]&255;(p*4-f-g)/2<d&&r.set(c),f=p,p=g}return r},e.prototype.getBlackMatrix=function(){var n=this.getLuminanceSource(),r=n.getWidth(),i=n.getHeight(),a=new ks(r,i);this.initArrays(r);for(var s=this.buckets,o=1;o<5;o++)for(var c=Math.floor(i*o/5),d=n.getRow(c,this.luminances),f=Math.floor(r*4/5),p=Math.floor(r/5);p<f;p++){var g=d[p]&255;s[g>>e.LUMINANCE_SHIFT]++}for(var y=e.estimateBlackPoint(s),x=n.getMatrix(),o=0;o<i;o++)for(var _=o*r,p=0;p<r;p++){var g=x[_+p]&255;g<y&&a.set(p,o)}return a},e.prototype.createBinarizer=function(n){return new e(n)},e.prototype.initArrays=function(n){this.luminances.length<n&&(this.luminances=new Uint8ClampedArray(n));for(var r=this.buckets,i=0;i<e.LUMINANCE_BUCKETS;i++)r[i]=0},e.estimateBlackPoint=function(n){for(var r=n.length,i=0,a=0,s=0,o=0;o<r;o++)n[o]>s&&(a=o,s=n[o]),n[o]>i&&(i=n[o]);for(var c=0,d=0,o=0;o<r;o++){var f=o-a,p=n[o]*f*f;p>d&&(c=o,d=p)}if(a>c){var g=a;a=c,c=g}if(c-a<=r/16)throw new _e;for(var y=c-1,x=-1,o=c-1;o>a;o--){var _=o-a,p=_*_*(c-o)*(i-n[o]);p>x&&(y=o,x=p)}return y<<e.LUMINANCE_SHIFT},e.LUMINANCE_BITS=5,e.LUMINANCE_SHIFT=8-e.LUMINANCE_BITS,e.LUMINANCE_BUCKETS=1<<e.LUMINANCE_BITS,e.EMPTY=Uint8ClampedArray.from([0]),e}(qj),iU=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),aU=function(t){iU(e,t);function e(n){var r=t.call(this,n)||this;return r.matrix=null,r}return e.prototype.getBlackMatrix=function(){if(this.matrix!==null)return this.matrix;var n=this.getLuminanceSource(),r=n.getWidth(),i=n.getHeight();if(r>=e.MINIMUM_DIMENSION&&i>=e.MINIMUM_DIMENSION){var a=n.getMatrix(),s=r>>e.BLOCK_SIZE_POWER;(r&e.BLOCK_SIZE_MASK)!==0&&s++;var o=i>>e.BLOCK_SIZE_POWER;(i&e.BLOCK_SIZE_MASK)!==0&&o++;var c=e.calculateBlackPoints(a,s,o,r,i),d=new ks(r,i);e.calculateThresholdForBlock(a,s,o,r,i,c,d),this.matrix=d}else this.matrix=t.prototype.getBlackMatrix.call(this);return this.matrix},e.prototype.createBinarizer=function(n){return new e(n)},e.calculateThresholdForBlock=function(n,r,i,a,s,o,c){for(var d=s-e.BLOCK_SIZE,f=a-e.BLOCK_SIZE,p=0;p<i;p++){var g=p<<e.BLOCK_SIZE_POWER;g>d&&(g=d);for(var y=e.cap(p,2,i-3),x=0;x<r;x++){var _=x<<e.BLOCK_SIZE_POWER;_>f&&(_=f);for(var A=e.cap(x,2,r-3),E=0,T=-2;T<=2;T++){var C=o[y+T];E+=C[A-2]+C[A-1]+C[A]+C[A+1]+C[A+2]}var D=E/25;e.thresholdBlock(n,_,g,D,a,c)}}},e.cap=function(n,r,i){return n<r?r:n>i?i:n},e.thresholdBlock=function(n,r,i,a,s,o){for(var c=0,d=i*s+r;c<e.BLOCK_SIZE;c++,d+=s)for(var f=0;f<e.BLOCK_SIZE;f++)(n[d+f]&255)<=a&&o.set(r+f,i+c)},e.calculateBlackPoints=function(n,r,i,a,s){for(var o=s-e.BLOCK_SIZE,c=a-e.BLOCK_SIZE,d=new Array(i),f=0;f<i;f++){d[f]=new Int32Array(r);var p=f<<e.BLOCK_SIZE_POWER;p>o&&(p=o);for(var g=0;g<r;g++){var y=g<<e.BLOCK_SIZE_POWER;y>c&&(y=c);for(var x=0,_=255,A=0,E=0,T=p*a+y;E<e.BLOCK_SIZE;E++,T+=a){for(var C=0;C<e.BLOCK_SIZE;C++){var D=n[T+C]&255;x+=D,D<_&&(_=D),D>A&&(A=D)}if(A-_>e.MIN_DYNAMIC_RANGE)for(E++,T+=a;E<e.BLOCK_SIZE;E++,T+=a)for(var C=0;C<e.BLOCK_SIZE;C++)x+=n[T+C]&255}var k=x>>e.BLOCK_SIZE_POWER*2;if(A-_<=e.MIN_DYNAMIC_RANGE&&(k=_/2,f>0&&g>0)){var B=(d[f-1][g]+2*d[f][g-1]+d[f-1][g-1])/4;_<B&&(k=B)}d[f][g]=k}}return d},e.BLOCK_SIZE_POWER=3,e.BLOCK_SIZE=1<<e.BLOCK_SIZE_POWER,e.BLOCK_SIZE_MASK=e.BLOCK_SIZE-1,e.MINIMUM_DIMENSION=e.BLOCK_SIZE*5,e.MIN_DYNAMIC_RANGE=24,e}(rU),W1=function(){function t(e,n){this.width=e,this.height=n}return t.prototype.getWidth=function(){return this.width},t.prototype.getHeight=function(){return this.height},t.prototype.isCropSupported=function(){return!1},t.prototype.crop=function(e,n,r,i){throw new dm("This luminance source does not support cropping.")},t.prototype.isRotateSupported=function(){return!1},t.prototype.rotateCounterClockwise=function(){throw new dm("This luminance source does not support rotation by 90 degrees.")},t.prototype.rotateCounterClockwise45=function(){throw new dm("This luminance source does not support rotation by 45 degrees.")},t.prototype.toString=function(){for(var e=new Uint8ClampedArray(this.width),n=new At,r=0;r<this.height;r++){for(var i=this.getRow(r,e),a=0;a<this.width;a++){var s=i[a]&255,o=void 0;s<64?o="#":s<128?o="+":s<192?o=".":o=" ",n.append(o)}n.append(`
`)}return n.toString()},t}(),sU=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),q_=function(t){sU(e,t);function e(n){var r=t.call(this,n.getWidth(),n.getHeight())||this;return r.delegate=n,r}return e.prototype.getRow=function(n,r){for(var i=this.delegate.getRow(n,r),a=this.getWidth(),s=0;s<a;s++)i[s]=255-(i[s]&255);return i},e.prototype.getMatrix=function(){for(var n=this.delegate.getMatrix(),r=this.getWidth()*this.getHeight(),i=new Uint8ClampedArray(r),a=0;a<r;a++)i[a]=255-(n[a]&255);return i},e.prototype.isCropSupported=function(){return this.delegate.isCropSupported()},e.prototype.crop=function(n,r,i,a){return new e(this.delegate.crop(n,r,i,a))},e.prototype.isRotateSupported=function(){return this.delegate.isRotateSupported()},e.prototype.invert=function(){return this.delegate},e.prototype.rotateCounterClockwise=function(){return new e(this.delegate.rotateCounterClockwise())},e.prototype.rotateCounterClockwise45=function(){return new e(this.delegate.rotateCounterClockwise45())},e}(W1),oU=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),lU=function(t){oU(e,t);function e(n,r){r===void 0&&(r=!1);var i=t.call(this,n.width,n.height)||this;return i.canvas=n,i.tempCanvasElement=null,i.buffer=e.makeBufferFromCanvasImageData(n,r),i}return e.makeBufferFromCanvasImageData=function(n,r){r===void 0&&(r=!1);var i=n.getContext("2d").getImageData(0,0,n.width,n.height);return e.toGrayscaleBuffer(i.data,n.width,n.height,r)},e.toGrayscaleBuffer=function(n,r,i,a){a===void 0&&(a=!1);var s=new Uint8ClampedArray(r*i);if(e.FRAME_INDEX=!e.FRAME_INDEX,e.FRAME_INDEX||!a)for(var o=0,c=0,d=n.length;o<d;o+=4,c++){var f=void 0,p=n[o+3];if(p===0)f=255;else{var g=n[o],y=n[o+1],x=n[o+2];f=306*g+601*y+117*x+512>>10}s[c]=f}else for(var o=0,c=0,_=n.length;o<_;o+=4,c++){var f=void 0,p=n[o+3];if(p===0)f=255;else{var g=n[o],y=n[o+1],x=n[o+2];f=306*g+601*y+117*x+512>>10}s[c]=255-f}return s},e.prototype.getRow=function(n,r){if(n<0||n>=this.getHeight())throw new rt("Requested row is outside the image: "+n);var i=this.getWidth(),a=n*i;return r===null?r=this.buffer.slice(a,a+i):(r.length<i&&(r=new Uint8ClampedArray(i)),r.set(this.buffer.slice(a,a+i))),r},e.prototype.getMatrix=function(){return this.buffer},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(n,r,i,a){return t.prototype.crop.call(this,n,r,i,a),this},e.prototype.isRotateSupported=function(){return!0},e.prototype.rotateCounterClockwise=function(){return this.rotate(-90),this},e.prototype.rotateCounterClockwise45=function(){return this.rotate(-45),this},e.prototype.getTempCanvasElement=function(){if(this.tempCanvasElement===null){var n=this.canvas.ownerDocument.createElement("canvas");n.width=this.canvas.width,n.height=this.canvas.height,this.tempCanvasElement=n}return this.tempCanvasElement},e.prototype.rotate=function(n){var r=this.getTempCanvasElement(),i=r.getContext("2d"),a=n*e.DEGREE_TO_RADIANS,s=this.canvas.width,o=this.canvas.height,c=Math.ceil(Math.abs(Math.cos(a))*s+Math.abs(Math.sin(a))*o),d=Math.ceil(Math.abs(Math.sin(a))*s+Math.abs(Math.cos(a))*o);return r.width=c,r.height=d,i.translate(c/2,d/2),i.rotate(a),i.drawImage(this.canvas,s/-2,o/-2),this.buffer=e.makeBufferFromCanvasImageData(r),this},e.prototype.invert=function(){return new q_(this)},e.DEGREE_TO_RADIANS=Math.PI/180,e.FRAME_INDEX=!0,e}(W1),cU=function(){function t(e,n,r){this.deviceId=e,this.label=n,this.kind="videoinput",this.groupId=r||void 0}return t.prototype.toJSON=function(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}},t}(),_i=function(t,e,n,r){function i(a){return a instanceof n?a:new n(function(s){s(a)})}return new(n||(n=Promise))(function(a,s){function o(f){try{d(r.next(f))}catch(p){s(p)}}function c(f){try{d(r.throw(f))}catch(p){s(p)}}function d(f){f.done?a(f.value):i(f.value).then(o,c)}d((r=r.apply(t,e||[])).next())})},bi=function(t,e){var n={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,i,a,s;return s={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function o(d){return function(f){return c([d,f])}}function c(d){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(a=d[0]&2?i.return:d[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,d[1])).done)return a;switch(i=0,a&&(d=[d[0]&2,a.value]),d[0]){case 0:case 1:a=d;break;case 4:return n.label++,{value:d[1],done:!1};case 5:n.label++,i=d[1],d=[0];continue;case 7:d=n.ops.pop(),n.trys.pop();continue;default:if(a=n.trys,!(a=a.length>0&&a[a.length-1])&&(d[0]===6||d[0]===2)){n=0;continue}if(d[0]===3&&(!a||d[1]>a[0]&&d[1]<a[3])){n.label=d[1];break}if(d[0]===6&&n.label<a[1]){n.label=a[1],a=d;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(d);break}a[2]&&n.ops.pop(),n.trys.pop();continue}d=e.call(t,n)}catch(f){d=[6,f],i=0}finally{r=a=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}},uU=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},df=function(){function t(e,n,r){n===void 0&&(n=500),this.reader=e,this.timeBetweenScansMillis=n,this._hints=r,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}return Object.defineProperty(t.prototype,"hasNavigator",{get:function(){return typeof navigator<"u"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isMediaDevicesSuported",{get:function(){return this.hasNavigator&&!!navigator.mediaDevices},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"canEnumerateDevices",{get:function(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"timeBetweenDecodingAttempts",{get:function(){return this._timeBetweenDecodingAttempts},set:function(e){this._timeBetweenDecodingAttempts=e<0?0:e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hints",{get:function(){return this._hints},set:function(e){this._hints=e||null},enumerable:!1,configurable:!0}),t.prototype.listVideoInputDevices=function(){return _i(this,void 0,void 0,function(){var e,n,r,i,a,s,o,c,d,f,p,g;return bi(this,function(y){switch(y.label){case 0:if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");return[4,navigator.mediaDevices.enumerateDevices()];case 1:e=y.sent(),n=[];try{for(r=uU(e),i=r.next();!i.done;i=r.next())a=i.value,s=a.kind==="video"?"videoinput":a.kind,s==="videoinput"&&(o=a.deviceId||a.id,c=a.label||"Video device "+(n.length+1),d=a.groupId,f={deviceId:o,label:c,kind:s,groupId:d},n.push(f))}catch(x){p={error:x}}finally{try{i&&!i.done&&(g=r.return)&&g.call(r)}finally{if(p)throw p.error}}return[2,n]}})})},t.prototype.getVideoInputDevices=function(){return _i(this,void 0,void 0,function(){var e;return bi(this,function(n){switch(n.label){case 0:return[4,this.listVideoInputDevices()];case 1:return e=n.sent(),[2,e.map(function(r){return new cU(r.deviceId,r.label)})]}})})},t.prototype.findDeviceById=function(e){return _i(this,void 0,void 0,function(){var n;return bi(this,function(r){switch(r.label){case 0:return[4,this.listVideoInputDevices()];case 1:return n=r.sent(),n?[2,n.find(function(i){return i.deviceId===e})]:[2,null]}})})},t.prototype.decodeFromInputVideoDevice=function(e,n){return _i(this,void 0,void 0,function(){return bi(this,function(r){switch(r.label){case 0:return[4,this.decodeOnceFromVideoDevice(e,n)];case 1:return[2,r.sent()]}})})},t.prototype.decodeOnceFromVideoDevice=function(e,n){return _i(this,void 0,void 0,function(){var r,i;return bi(this,function(a){switch(a.label){case 0:return this.reset(),e?r={deviceId:{exact:e}}:r={facingMode:"environment"},i={video:r},[4,this.decodeOnceFromConstraints(i,n)];case 1:return[2,a.sent()]}})})},t.prototype.decodeOnceFromConstraints=function(e,n){return _i(this,void 0,void 0,function(){var r;return bi(this,function(i){switch(i.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return r=i.sent(),[4,this.decodeOnceFromStream(r,n)];case 2:return[2,i.sent()]}})})},t.prototype.decodeOnceFromStream=function(e,n){return _i(this,void 0,void 0,function(){var r,i;return bi(this,function(a){switch(a.label){case 0:return this.reset(),[4,this.attachStreamToVideo(e,n)];case 1:return r=a.sent(),[4,this.decodeOnce(r)];case 2:return i=a.sent(),[2,i]}})})},t.prototype.decodeFromInputVideoDeviceContinuously=function(e,n,r){return _i(this,void 0,void 0,function(){return bi(this,function(i){switch(i.label){case 0:return[4,this.decodeFromVideoDevice(e,n,r)];case 1:return[2,i.sent()]}})})},t.prototype.decodeFromVideoDevice=function(e,n,r){return _i(this,void 0,void 0,function(){var i,a;return bi(this,function(s){switch(s.label){case 0:return e?i={deviceId:{exact:e}}:i={facingMode:"environment"},a={video:i},[4,this.decodeFromConstraints(a,n,r)];case 1:return[2,s.sent()]}})})},t.prototype.decodeFromConstraints=function(e,n,r){return _i(this,void 0,void 0,function(){var i;return bi(this,function(a){switch(a.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return i=a.sent(),[4,this.decodeFromStream(i,n,r)];case 2:return[2,a.sent()]}})})},t.prototype.decodeFromStream=function(e,n,r){return _i(this,void 0,void 0,function(){var i;return bi(this,function(a){switch(a.label){case 0:return this.reset(),[4,this.attachStreamToVideo(e,n)];case 1:return i=a.sent(),[4,this.decodeContinuously(i,r)];case 2:return[2,a.sent()]}})})},t.prototype.stopAsyncDecode=function(){this._stopAsyncDecode=!0},t.prototype.stopContinuousDecode=function(){this._stopContinuousDecode=!0},t.prototype.attachStreamToVideo=function(e,n){return _i(this,void 0,void 0,function(){var r;return bi(this,function(i){switch(i.label){case 0:return r=this.prepareVideoElement(n),this.addVideoSource(r,e),this.videoElement=r,this.stream=e,[4,this.playVideoOnLoadAsync(r)];case 1:return i.sent(),[2,r]}})})},t.prototype.playVideoOnLoadAsync=function(e){var n=this;return new Promise(function(r,i){return n.playVideoOnLoad(e,function(){return r()})})},t.prototype.playVideoOnLoad=function(e,n){var r=this;this.videoEndedListener=function(){return r.stopStreams()},this.videoCanPlayListener=function(){return r.tryPlayVideo(e)},e.addEventListener("ended",this.videoEndedListener),e.addEventListener("canplay",this.videoCanPlayListener),e.addEventListener("playing",n),this.tryPlayVideo(e)},t.prototype.isVideoPlaying=function(e){return e.currentTime>0&&!e.paused&&!e.ended&&e.readyState>2},t.prototype.tryPlayVideo=function(e){return _i(this,void 0,void 0,function(){return bi(this,function(n){switch(n.label){case 0:if(this.isVideoPlaying(e))return console.warn("Trying to play video that is already playing."),[2];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,e.play()];case 2:return n.sent(),[3,4];case 3:return n.sent(),console.warn("It was not possible to play the video."),[3,4];case 4:return[2]}})})},t.prototype.getMediaElement=function(e,n){var r=document.getElementById(e);if(!r)throw new Na("element with id '"+e+"' not found");if(r.nodeName.toLowerCase()!==n.toLowerCase())throw new Na("element with id '"+e+"' must be an "+n+" element");return r},t.prototype.decodeFromImage=function(e,n){if(!e&&!n)throw new Na("either imageElement with a src set or an url must be provided");return n&&!e?this.decodeFromImageUrl(n):this.decodeFromImageElement(e)},t.prototype.decodeFromVideo=function(e,n){if(!e&&!n)throw new Na("Either an element with a src set or an URL must be provided");return n&&!e?this.decodeFromVideoUrl(n):this.decodeFromVideoElement(e)},t.prototype.decodeFromVideoContinuously=function(e,n,r){if(e===void 0&&n===void 0)throw new Na("Either an element with a src set or an URL must be provided");return n&&!e?this.decodeFromVideoUrlContinuously(n,r):this.decodeFromVideoElementContinuously(e,r)},t.prototype.decodeFromImageElement=function(e){if(!e)throw new Na("An image element must be provided.");this.reset();var n=this.prepareImageElement(e);this.imageElement=n;var r;return this.isImageLoaded(n)?r=this.decodeOnce(n,!1,!0):r=this._decodeOnLoadImage(n),r},t.prototype.decodeFromVideoElement=function(e){var n=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideo(n)},t.prototype.decodeFromVideoElementContinuously=function(e,n){var r=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideoContinuously(r,n)},t.prototype._decodeFromVideoElementSetup=function(e){if(!e)throw new Na("A video element must be provided.");this.reset();var n=this.prepareVideoElement(e);return this.videoElement=n,n},t.prototype.decodeFromImageUrl=function(e){if(!e)throw new Na("An URL must be provided.");this.reset();var n=this.prepareImageElement();this.imageElement=n;var r=this._decodeOnLoadImage(n);return n.src=e,r},t.prototype.decodeFromVideoUrl=function(e){if(!e)throw new Na("An URL must be provided.");this.reset();var n=this.prepareVideoElement(),r=this.decodeFromVideoElement(n);return n.src=e,r},t.prototype.decodeFromVideoUrlContinuously=function(e,n){if(!e)throw new Na("An URL must be provided.");this.reset();var r=this.prepareVideoElement(),i=this.decodeFromVideoElementContinuously(r,n);return r.src=e,i},t.prototype._decodeOnLoadImage=function(e){var n=this;return new Promise(function(r,i){n.imageLoadedListener=function(){return n.decodeOnce(e,!1,!0).then(r,i)},e.addEventListener("load",n.imageLoadedListener)})},t.prototype._decodeOnLoadVideo=function(e){return _i(this,void 0,void 0,function(){return bi(this,function(n){switch(n.label){case 0:return[4,this.playVideoOnLoadAsync(e)];case 1:return n.sent(),[4,this.decodeOnce(e)];case 2:return[2,n.sent()]}})})},t.prototype._decodeOnLoadVideoContinuously=function(e,n){return _i(this,void 0,void 0,function(){return bi(this,function(r){switch(r.label){case 0:return[4,this.playVideoOnLoadAsync(e)];case 1:return r.sent(),this.decodeContinuously(e,n),[2]}})})},t.prototype.isImageLoaded=function(e){return!(!e.complete||e.naturalWidth===0)},t.prototype.prepareImageElement=function(e){var n;return typeof e>"u"&&(n=document.createElement("img"),n.width=200,n.height=200),typeof e=="string"&&(n=this.getMediaElement(e,"img")),e instanceof HTMLImageElement&&(n=e),n},t.prototype.prepareVideoElement=function(e){var n;return!e&&typeof document<"u"&&(n=document.createElement("video"),n.width=200,n.height=200),typeof e=="string"&&(n=this.getMediaElement(e,"video")),e instanceof HTMLVideoElement&&(n=e),n.setAttribute("autoplay","true"),n.setAttribute("muted","true"),n.setAttribute("playsinline","true"),n},t.prototype.decodeOnce=function(e,n,r){var i=this;n===void 0&&(n=!0),r===void 0&&(r=!0),this._stopAsyncDecode=!1;var a=function(s,o){if(i._stopAsyncDecode){o(new _e("Video stream has ended before any code could be detected.")),i._stopAsyncDecode=void 0;return}try{var c=i.decode(e);s(c)}catch(g){var d=n&&g instanceof _e,f=g instanceof Vr||g instanceof je,p=f&&r;if(d||p)return setTimeout(a,i._timeBetweenDecodingAttempts,s,o);o(g)}};return new Promise(function(s,o){return a(s,o)})},t.prototype.decodeContinuously=function(e,n){var r=this;this._stopContinuousDecode=!1;var i=function(){if(r._stopContinuousDecode){r._stopContinuousDecode=void 0;return}try{var a=r.decode(e);n(a,null),setTimeout(i,r.timeBetweenScansMillis)}catch(c){n(null,c);var s=c instanceof Vr||c instanceof je,o=c instanceof _e;(s||o)&&setTimeout(i,r._timeBetweenDecodingAttempts)}};i()},t.prototype.decode=function(e){var n=this.createBinaryBitmap(e);return this.decodeBitmap(n)},t.prototype.createBinaryBitmap=function(e){this.getCaptureCanvasContext(e);var n=!1;e instanceof HTMLVideoElement?(this.drawFrameOnCanvas(e),n=!0):this.drawImageOnCanvas(e);var r=this.getCaptureCanvas(e),i=new lU(r,n),a=new aU(i);return new Wj(a)},t.prototype.getCaptureCanvasContext=function(e){if(!this.captureCanvasContext){var n=this.getCaptureCanvas(e),r=void 0;try{r=n.getContext("2d",{willReadFrequently:!0})}catch{r=n.getContext("2d")}this.captureCanvasContext=r}return this.captureCanvasContext},t.prototype.getCaptureCanvas=function(e){if(!this.captureCanvas){var n=this.createCaptureCanvas(e);this.captureCanvas=n}return this.captureCanvas},t.prototype.drawFrameOnCanvas=function(e,n,r){n===void 0&&(n={sx:0,sy:0,sWidth:e.videoWidth,sHeight:e.videoHeight,dx:0,dy:0,dWidth:e.videoWidth,dHeight:e.videoHeight}),r===void 0&&(r=this.captureCanvasContext),r.drawImage(e,n.sx,n.sy,n.sWidth,n.sHeight,n.dx,n.dy,n.dWidth,n.dHeight)},t.prototype.drawImageOnCanvas=function(e,n,r){n===void 0&&(n={sx:0,sy:0,sWidth:e.naturalWidth,sHeight:e.naturalHeight,dx:0,dy:0,dWidth:e.naturalWidth,dHeight:e.naturalHeight}),r===void 0&&(r=this.captureCanvasContext),r.drawImage(e,n.sx,n.sy,n.sWidth,n.sHeight,n.dx,n.dy,n.dWidth,n.dHeight)},t.prototype.decodeBitmap=function(e){return this.reader.decode(e,this._hints)},t.prototype.createCaptureCanvas=function(e){if(typeof document>"u")return this._destroyCaptureCanvas(),null;var n=document.createElement("canvas"),r,i;return typeof e<"u"&&(e instanceof HTMLVideoElement?(r=e.videoWidth,i=e.videoHeight):e instanceof HTMLImageElement&&(r=e.naturalWidth||e.width,i=e.naturalHeight||e.height)),n.style.width=r+"px",n.style.height=i+"px",n.width=r,n.height=i,n},t.prototype.stopStreams=function(){this.stream&&(this.stream.getVideoTracks().forEach(function(e){return e.stop()}),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()},t.prototype.reset=function(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()},t.prototype._destroyVideoElement=function(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)},t.prototype._destroyImageElement=function(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)},t.prototype._destroyCaptureCanvas=function(){this.captureCanvasContext=void 0,this.captureCanvas=void 0},t.prototype.addVideoSource=function(e,n){try{e.srcObject=n}catch{e.src=URL.createObjectURL(n)}},t.prototype.cleanVideoSource=function(e){try{e.srcObject=null}catch{e.src=""}this.videoElement.removeAttribute("src")},t}(),gi=function(){function t(e,n,r,i,a,s){r===void 0&&(r=n==null?0:8*n.length),s===void 0&&(s=Sn.currentTimeMillis()),this.text=e,this.rawBytes=n,this.numBits=r,this.resultPoints=i,this.format=a,this.timestamp=s,this.text=e,this.rawBytes=n,r==null?this.numBits=n==null?0:8*n.length:this.numBits=r,this.resultPoints=i,this.format=a,this.resultMetadata=null,s==null?this.timestamp=Sn.currentTimeMillis():this.timestamp=s}return t.prototype.getText=function(){return this.text},t.prototype.getRawBytes=function(){return this.rawBytes},t.prototype.getNumBits=function(){return this.numBits},t.prototype.getResultPoints=function(){return this.resultPoints},t.prototype.getBarcodeFormat=function(){return this.format},t.prototype.getResultMetadata=function(){return this.resultMetadata},t.prototype.putMetadata=function(e,n){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(e,n)},t.prototype.putAllMetadata=function(e){e!==null&&(this.resultMetadata===null?this.resultMetadata=e:this.resultMetadata=new Map(e))},t.prototype.addResultPoints=function(e){var n=this.resultPoints;if(n===null)this.resultPoints=e;else if(e!==null&&e.length>0){var r=new Array(n.length+e.length);Sn.arraycopy(n,0,r,0,n.length),Sn.arraycopy(e,0,r,n.length,e.length),this.resultPoints=r}},t.prototype.getTimestamp=function(){return this.timestamp},t.prototype.toString=function(){return this.text},t}(),tw;(function(t){t[t.AZTEC=0]="AZTEC",t[t.CODABAR=1]="CODABAR",t[t.CODE_39=2]="CODE_39",t[t.CODE_93=3]="CODE_93",t[t.CODE_128=4]="CODE_128",t[t.DATA_MATRIX=5]="DATA_MATRIX",t[t.EAN_8=6]="EAN_8",t[t.EAN_13=7]="EAN_13",t[t.ITF=8]="ITF",t[t.MAXICODE=9]="MAXICODE",t[t.PDF_417=10]="PDF_417",t[t.QR_CODE=11]="QR_CODE",t[t.RSS_14=12]="RSS_14",t[t.RSS_EXPANDED=13]="RSS_EXPANDED",t[t.UPC_A=14]="UPC_A",t[t.UPC_E=15]="UPC_E",t[t.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(tw||(tw={}));const et=tw;var nw;(function(t){t[t.OTHER=0]="OTHER",t[t.ORIENTATION=1]="ORIENTATION",t[t.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",t[t.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",t[t.ISSUE_NUMBER=4]="ISSUE_NUMBER",t[t.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",t[t.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",t[t.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",t[t.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",t[t.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",t[t.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(nw||(nw={}));const ei=nw;var Y1=function(){function t(e,n,r,i,a,s){a===void 0&&(a=-1),s===void 0&&(s=-1),this.rawBytes=e,this.text=n,this.byteSegments=r,this.ecLevel=i,this.structuredAppendSequenceNumber=a,this.structuredAppendParity=s,this.numBits=e==null?0:8*e.length}return t.prototype.getRawBytes=function(){return this.rawBytes},t.prototype.getNumBits=function(){return this.numBits},t.prototype.setNumBits=function(e){this.numBits=e},t.prototype.getText=function(){return this.text},t.prototype.getByteSegments=function(){return this.byteSegments},t.prototype.getECLevel=function(){return this.ecLevel},t.prototype.getErrorsCorrected=function(){return this.errorsCorrected},t.prototype.setErrorsCorrected=function(e){this.errorsCorrected=e},t.prototype.getErasures=function(){return this.erasures},t.prototype.setErasures=function(e){this.erasures=e},t.prototype.getOther=function(){return this.other},t.prototype.setOther=function(e){this.other=e},t.prototype.hasStructuredAppend=function(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0},t.prototype.getStructuredAppendParity=function(){return this.structuredAppendParity},t.prototype.getStructuredAppendSequenceNumber=function(){return this.structuredAppendSequenceNumber},t}(),Uh=function(){function t(){}return t.prototype.exp=function(e){return this.expTable[e]},t.prototype.log=function(e){if(e===0)throw new rt;return this.logTable[e]},t.addOrSubtract=function(e,n){return e^n},t}(),Tl=function(){function t(e,n){if(n.length===0)throw new rt;this.field=e;var r=n.length;if(r>1&&n[0]===0){for(var i=1;i<r&&n[i]===0;)i++;i===r?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(r-i),Sn.arraycopy(n,i,this.coefficients,0,this.coefficients.length))}else this.coefficients=n}return t.prototype.getCoefficients=function(){return this.coefficients},t.prototype.getDegree=function(){return this.coefficients.length-1},t.prototype.isZero=function(){return this.coefficients[0]===0},t.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},t.prototype.evaluateAt=function(e){if(e===0)return this.getCoefficient(0);var n=this.coefficients,r;if(e===1){r=0;for(var i=0,a=n.length;i!==a;i++){var s=n[i];r=Uh.addOrSubtract(r,s)}return r}r=n[0];for(var o=n.length,c=this.field,i=1;i<o;i++)r=Uh.addOrSubtract(c.multiply(e,r),n[i]);return r},t.prototype.addOrSubtract=function(e){if(!this.field.equals(e.field))throw new rt("GenericGFPolys do not have same GenericGF field");if(this.isZero())return e;if(e.isZero())return this;var n=this.coefficients,r=e.coefficients;if(n.length>r.length){var i=n;n=r,r=i}var a=new Int32Array(r.length),s=r.length-n.length;Sn.arraycopy(r,0,a,0,s);for(var o=s;o<r.length;o++)a[o]=Uh.addOrSubtract(n[o-s],r[o]);return new t(this.field,a)},t.prototype.multiply=function(e){if(!this.field.equals(e.field))throw new rt("GenericGFPolys do not have same GenericGF field");if(this.isZero()||e.isZero())return this.field.getZero();for(var n=this.coefficients,r=n.length,i=e.coefficients,a=i.length,s=new Int32Array(r+a-1),o=this.field,c=0;c<r;c++)for(var d=n[c],f=0;f<a;f++)s[c+f]=Uh.addOrSubtract(s[c+f],o.multiply(d,i[f]));return new t(o,s)},t.prototype.multiplyScalar=function(e){if(e===0)return this.field.getZero();if(e===1)return this;for(var n=this.coefficients.length,r=this.field,i=new Int32Array(n),a=this.coefficients,s=0;s<n;s++)i[s]=r.multiply(a[s],e);return new t(r,i)},t.prototype.multiplyByMonomial=function(e,n){if(e<0)throw new rt;if(n===0)return this.field.getZero();for(var r=this.coefficients,i=r.length,a=new Int32Array(i+e),s=this.field,o=0;o<i;o++)a[o]=s.multiply(r[o],n);return new t(s,a)},t.prototype.divide=function(e){if(!this.field.equals(e.field))throw new rt("GenericGFPolys do not have same GenericGF field");if(e.isZero())throw new rt("Divide by 0");for(var n=this.field,r=n.getZero(),i=this,a=e.getCoefficient(e.getDegree()),s=n.inverse(a);i.getDegree()>=e.getDegree()&&!i.isZero();){var o=i.getDegree()-e.getDegree(),c=n.multiply(i.getCoefficient(i.getDegree()),s),d=e.multiplyByMonomial(o,c),f=n.buildMonomial(o,c);r=r.addOrSubtract(f),i=i.addOrSubtract(d)}return[r,i]},t.prototype.toString=function(){for(var e="",n=this.getDegree();n>=0;n--){var r=this.getCoefficient(n);if(r!==0){if(r<0?(e+=" - ",r=-r):e.length>0&&(e+=" + "),n===0||r!==1){var i=this.field.log(r);i===0?e+="1":i===1?e+="a":(e+="a^",e+=i)}n!==0&&(n===1?e+="x":(e+="x^",e+=n))}}return e},t}(),dU=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),LM=function(t){dU(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="ArithmeticException",e}(Vi),fU=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Bi=function(t){fU(e,t);function e(n,r,i){var a=t.call(this)||this;a.primitive=n,a.size=r,a.generatorBase=i;for(var s=new Int32Array(r),o=1,c=0;c<r;c++)s[c]=o,o*=2,o>=r&&(o^=n,o&=r-1);a.expTable=s;for(var d=new Int32Array(r),c=0;c<r-1;c++)d[s[c]]=c;return a.logTable=d,a.zero=new Tl(a,Int32Array.from([0])),a.one=new Tl(a,Int32Array.from([1])),a}return e.prototype.getZero=function(){return this.zero},e.prototype.getOne=function(){return this.one},e.prototype.buildMonomial=function(n,r){if(n<0)throw new rt;if(r===0)return this.zero;var i=new Int32Array(n+1);return i[0]=r,new Tl(this,i)},e.prototype.inverse=function(n){if(n===0)throw new LM;return this.expTable[this.size-this.logTable[n]-1]},e.prototype.multiply=function(n,r){return n===0||r===0?0:this.expTable[(this.logTable[n]+this.logTable[r])%(this.size-1)]},e.prototype.getSize=function(){return this.size},e.prototype.getGeneratorBase=function(){return this.generatorBase},e.prototype.toString=function(){return"GF(0x"+Ct.toHexString(this.primitive)+","+this.size+")"},e.prototype.equals=function(n){return n===this},e.AZTEC_DATA_12=new e(4201,4096,1),e.AZTEC_DATA_10=new e(1033,1024,1),e.AZTEC_DATA_6=new e(67,64,1),e.AZTEC_PARAM=new e(19,16,1),e.QR_CODE_FIELD_256=new e(285,256,0),e.DATA_MATRIX_FIELD_256=new e(301,256,1),e.AZTEC_DATA_8=e.DATA_MATRIX_FIELD_256,e.MAXICODE_FIELD_64=e.AZTEC_DATA_6,e}(Uh),hU=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),kg=function(t){hU(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="ReedSolomonException",e}(Vi),pU=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),W0=function(t){pU(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="IllegalStateException",e}(Vi),q1=function(){function t(e){this.field=e}return t.prototype.decode=function(e,n){for(var r=this.field,i=new Tl(r,e),a=new Int32Array(n),s=!0,o=0;o<n;o++){var c=i.evaluateAt(r.exp(o+r.getGeneratorBase()));a[a.length-1-o]=c,c!==0&&(s=!1)}if(!s)for(var d=new Tl(r,a),f=this.runEuclideanAlgorithm(r.buildMonomial(n,1),d,n),p=f[0],g=f[1],y=this.findErrorLocations(p),x=this.findErrorMagnitudes(g,y),o=0;o<y.length;o++){var _=e.length-1-r.log(y[o]);if(_<0)throw new kg("Bad error location");e[_]=Bi.addOrSubtract(e[_],x[o])}},t.prototype.runEuclideanAlgorithm=function(e,n,r){if(e.getDegree()<n.getDegree()){var i=e;e=n,n=i}for(var a=this.field,s=e,o=n,c=a.getZero(),d=a.getOne();o.getDegree()>=(r/2|0);){var f=s,p=c;if(s=o,c=d,s.isZero())throw new kg("r_{i-1} was zero");o=f;for(var g=a.getZero(),y=s.getCoefficient(s.getDegree()),x=a.inverse(y);o.getDegree()>=s.getDegree()&&!o.isZero();){var _=o.getDegree()-s.getDegree(),A=a.multiply(o.getCoefficient(o.getDegree()),x);g=g.addOrSubtract(a.buildMonomial(_,A)),o=o.addOrSubtract(s.multiplyByMonomial(_,A))}if(d=g.multiply(c).addOrSubtract(p),o.getDegree()>=s.getDegree())throw new W0("Division algorithm failed to reduce polynomial?")}var E=d.getCoefficient(0);if(E===0)throw new kg("sigmaTilde(0) was zero");var T=a.inverse(E),C=d.multiplyScalar(T),D=o.multiplyScalar(T);return[C,D]},t.prototype.findErrorLocations=function(e){var n=e.getDegree();if(n===1)return Int32Array.from([e.getCoefficient(1)]);for(var r=new Int32Array(n),i=0,a=this.field,s=1;s<a.getSize()&&i<n;s++)e.evaluateAt(s)===0&&(r[i]=a.inverse(s),i++);if(i!==n)throw new kg("Error locator degree does not match number of roots");return r},t.prototype.findErrorMagnitudes=function(e,n){for(var r=n.length,i=new Int32Array(r),a=this.field,s=0;s<r;s++){for(var o=a.inverse(n[s]),c=1,d=0;d<r;d++)if(s!==d){var f=a.multiply(n[d],o),p=(f&1)===0?f|1:f&-2;c=a.multiply(c,p)}i[s]=a.multiply(e.evaluateAt(o),a.inverse(c)),a.getGeneratorBase()!==0&&(i[s]=a.multiply(i[s],o))}return i},t}(),Kr;(function(t){t[t.UPPER=0]="UPPER",t[t.LOWER=1]="LOWER",t[t.MIXED=2]="MIXED",t[t.DIGIT=3]="DIGIT",t[t.PUNCT=4]="PUNCT",t[t.BINARY=5]="BINARY"})(Kr||(Kr={}));var gI=function(){function t(){}return t.prototype.decode=function(e){this.ddata=e;var n=e.getBits(),r=this.extractBits(n),i=this.correctBits(r),a=t.convertBoolArrayToByteArray(i),s=t.getEncodedData(i),o=new Y1(a,s,null,null);return o.setNumBits(i.length),o},t.highLevelDecode=function(e){return this.getEncodedData(e)},t.getEncodedData=function(e){for(var n=e.length,r=Kr.UPPER,i=Kr.UPPER,a="",s=0;s<n;)if(i===Kr.BINARY){if(n-s<5)break;var o=t.readCode(e,s,5);if(s+=5,o===0){if(n-s<11)break;o=t.readCode(e,s,11)+31,s+=11}for(var c=0;c<o;c++){if(n-s<8){s=n;break}var d=t.readCode(e,s,8);a+=Vt.castAsNonUtf8Char(d),s+=8}i=r}else{var f=i===Kr.DIGIT?4:5;if(n-s<f)break;var d=t.readCode(e,s,f);s+=f;var p=t.getCharacter(i,d);p.startsWith("CTRL_")?(r=i,i=t.getTable(p.charAt(5)),p.charAt(6)==="L"&&(r=i)):(a+=p,i=r)}return a},t.getTable=function(e){switch(e){case"L":return Kr.LOWER;case"P":return Kr.PUNCT;case"M":return Kr.MIXED;case"D":return Kr.DIGIT;case"B":return Kr.BINARY;case"U":default:return Kr.UPPER}},t.getCharacter=function(e,n){switch(e){case Kr.UPPER:return t.UPPER_TABLE[n];case Kr.LOWER:return t.LOWER_TABLE[n];case Kr.MIXED:return t.MIXED_TABLE[n];case Kr.PUNCT:return t.PUNCT_TABLE[n];case Kr.DIGIT:return t.DIGIT_TABLE[n];default:throw new W0("Bad table")}},t.prototype.correctBits=function(e){var n,r;this.ddata.getNbLayers()<=2?(r=6,n=Bi.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(r=8,n=Bi.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(r=10,n=Bi.AZTEC_DATA_10):(r=12,n=Bi.AZTEC_DATA_12);var i=this.ddata.getNbDatablocks(),a=e.length/r;if(a<i)throw new je;for(var s=e.length%r,o=new Int32Array(a),c=0;c<a;c++,s+=r)o[c]=t.readCode(e,s,r);try{var d=new q1(n);d.decode(o,a-i)}catch(A){throw new je(A)}for(var f=(1<<r)-1,p=0,c=0;c<i;c++){var g=o[c];if(g===0||g===f)throw new je;(g===1||g===f-1)&&p++}for(var y=new Array(i*r-p),x=0,c=0;c<i;c++){var g=o[c];if(g===1||g===f-1)y.fill(g>1,x,x+r-1),x+=r-1;else for(var _=r-1;_>=0;--_)y[x++]=(g&1<<_)!==0}return y},t.prototype.extractBits=function(e){var n=this.ddata.isCompact(),r=this.ddata.getNbLayers(),i=(n?11:14)+r*4,a=new Int32Array(i),s=new Array(this.totalBitsInLayer(r,n));if(n)for(var o=0;o<a.length;o++)a[o]=o;else for(var c=i+1+2*Ct.truncDivision(Ct.truncDivision(i,2)-1,15),d=i/2,f=Ct.truncDivision(c,2),o=0;o<d;o++){var p=o+Ct.truncDivision(o,15);a[d-o-1]=f-p-1,a[d+o]=f+p+1}for(var o=0,g=0;o<r;o++){for(var y=(r-o)*4+(n?9:12),x=o*2,_=i-1-x,A=0;A<y;A++)for(var E=A*2,T=0;T<2;T++)s[g+E+T]=e.get(a[x+T],a[x+A]),s[g+2*y+E+T]=e.get(a[x+A],a[_-T]),s[g+4*y+E+T]=e.get(a[_-T],a[_-A]),s[g+6*y+E+T]=e.get(a[_-A],a[x+T]);g+=y*8}return s},t.readCode=function(e,n,r){for(var i=0,a=n;a<n+r;a++)i<<=1,e[a]&&(i|=1);return i},t.readByte=function(e,n){var r=e.length-n;return r>=8?t.readCode(e,n,8):t.readCode(e,n,r)<<8-r},t.convertBoolArrayToByteArray=function(e){for(var n=new Uint8Array((e.length+7)/8),r=0;r<n.length;r++)n[r]=t.readByte(e,8*r);return n},t.prototype.totalBitsInLayer=function(e,n){return((n?88:112)+16*e)*e},t.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],t.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],t.MIXED_TABLE=["CTRL_PS"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~","","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],t.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],t.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"],t}(),$t=function(){function t(){}return t.round=function(e){return isNaN(e)?0:e<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:e>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:e+(e<0?-.5:.5)|0},t.distance=function(e,n,r,i){var a=e-r,s=n-i;return Math.sqrt(a*a+s*s)},t.sum=function(e){for(var n=0,r=0,i=e.length;r!==i;r++){var a=e[r];n+=a}return n},t}(),rw=function(){function t(){}return t.floatToIntBits=function(e){return e},t.MAX_VALUE=Number.MAX_SAFE_INTEGER,t}(),Xe=function(){function t(e,n){this.x=e,this.y=n}return t.prototype.getX=function(){return this.x},t.prototype.getY=function(){return this.y},t.prototype.equals=function(e){if(e instanceof t){var n=e;return this.x===n.x&&this.y===n.y}return!1},t.prototype.hashCode=function(){return 31*rw.floatToIntBits(this.x)+rw.floatToIntBits(this.y)},t.prototype.toString=function(){return"("+this.x+","+this.y+")"},t.orderBestPatterns=function(e){var n=this.distance(e[0],e[1]),r=this.distance(e[1],e[2]),i=this.distance(e[0],e[2]),a,s,o;if(r>=n&&r>=i?(s=e[0],a=e[1],o=e[2]):i>=r&&i>=n?(s=e[1],a=e[0],o=e[2]):(s=e[2],a=e[0],o=e[1]),this.crossProductZ(a,s,o)<0){var c=a;a=o,o=c}e[0]=a,e[1]=s,e[2]=o},t.distance=function(e,n){return $t.distance(e.x,e.y,n.x,n.y)},t.crossProductZ=function(e,n,r){var i=n.x,a=n.y;return(r.x-i)*(e.y-a)-(r.y-a)*(e.x-i)},t}(),X_=function(){function t(e,n){this.bits=e,this.points=n}return t.prototype.getBits=function(){return this.bits},t.prototype.getPoints=function(){return this.points},t}(),gU=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),mU=function(t){gU(e,t);function e(n,r,i,a,s){var o=t.call(this,n,r)||this;return o.compact=i,o.nbDatablocks=a,o.nbLayers=s,o}return e.prototype.getNbLayers=function(){return this.nbLayers},e.prototype.getNbDatablocks=function(){return this.nbDatablocks},e.prototype.isCompact=function(){return this.compact},e}(X_),iw=function(){function t(e,n,r,i){this.image=e,this.height=e.getHeight(),this.width=e.getWidth(),n==null&&(n=t.INIT_SIZE),r==null&&(r=e.getWidth()/2|0),i==null&&(i=e.getHeight()/2|0);var a=n/2|0;if(this.leftInit=r-a,this.rightInit=r+a,this.upInit=i-a,this.downInit=i+a,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new _e}return t.prototype.detect=function(){for(var e=this.leftInit,n=this.rightInit,r=this.upInit,i=this.downInit,a=!1,s=!0,o=!1,c=!1,d=!1,f=!1,p=!1,g=this.width,y=this.height;s;){s=!1;for(var x=!0;(x||!c)&&n<g;)x=this.containsBlackPoint(r,i,n,!1),x?(n++,s=!0,c=!0):c||n++;if(n>=g){a=!0;break}for(var _=!0;(_||!d)&&i<y;)_=this.containsBlackPoint(e,n,i,!0),_?(i++,s=!0,d=!0):d||i++;if(i>=y){a=!0;break}for(var A=!0;(A||!f)&&e>=0;)A=this.containsBlackPoint(r,i,e,!1),A?(e--,s=!0,f=!0):f||e--;if(e<0){a=!0;break}for(var E=!0;(E||!p)&&r>=0;)E=this.containsBlackPoint(e,n,r,!0),E?(r--,s=!0,p=!0):p||r--;if(r<0){a=!0;break}s&&(o=!0)}if(!a&&o){for(var T=n-e,C=null,D=1;C===null&&D<T;D++)C=this.getBlackPointOnSegment(e,i-D,e+D,i);if(C==null)throw new _e;for(var k=null,D=1;k===null&&D<T;D++)k=this.getBlackPointOnSegment(e,r+D,e+D,r);if(k==null)throw new _e;for(var B=null,D=1;B===null&&D<T;D++)B=this.getBlackPointOnSegment(n,r+D,n-D,r);if(B==null)throw new _e;for(var O=null,D=1;O===null&&D<T;D++)O=this.getBlackPointOnSegment(n,i-D,n-D,i);if(O==null)throw new _e;return this.centerEdges(O,C,B,k)}else throw new _e},t.prototype.getBlackPointOnSegment=function(e,n,r,i){for(var a=$t.round($t.distance(e,n,r,i)),s=(r-e)/a,o=(i-n)/a,c=this.image,d=0;d<a;d++){var f=$t.round(e+d*s),p=$t.round(n+d*o);if(c.get(f,p))return new Xe(f,p)}return null},t.prototype.centerEdges=function(e,n,r,i){var a=e.getX(),s=e.getY(),o=n.getX(),c=n.getY(),d=r.getX(),f=r.getY(),p=i.getX(),g=i.getY(),y=t.CORR;return a<this.width/2?[new Xe(p-y,g+y),new Xe(o+y,c+y),new Xe(d-y,f-y),new Xe(a+y,s-y)]:[new Xe(p+y,g+y),new Xe(o+y,c-y),new Xe(d-y,f+y),new Xe(a-y,s-y)]},t.prototype.containsBlackPoint=function(e,n,r,i){var a=this.image;if(i){for(var s=e;s<=n;s++)if(a.get(s,r))return!0}else for(var o=e;o<=n;o++)if(a.get(r,o))return!0;return!1},t.INIT_SIZE=10,t.CORR=1,t}(),mI=function(){function t(){}return t.checkAndNudgePoints=function(e,n){for(var r=e.getWidth(),i=e.getHeight(),a=!0,s=0;s<n.length&&a;s+=2){var o=Math.floor(n[s]),c=Math.floor(n[s+1]);if(o<-1||o>r||c<-1||c>i)throw new _e;a=!1,o===-1?(n[s]=0,a=!0):o===r&&(n[s]=r-1,a=!0),c===-1?(n[s+1]=0,a=!0):c===i&&(n[s+1]=i-1,a=!0)}a=!0;for(var s=n.length-2;s>=0&&a;s-=2){var o=Math.floor(n[s]),c=Math.floor(n[s+1]);if(o<-1||o>r||c<-1||c>i)throw new _e;a=!1,o===-1?(n[s]=0,a=!0):o===r&&(n[s]=r-1,a=!0),c===-1?(n[s+1]=0,a=!0):c===i&&(n[s+1]=i-1,a=!0)}},t}(),BM=function(){function t(e,n,r,i,a,s,o,c,d){this.a11=e,this.a21=n,this.a31=r,this.a12=i,this.a22=a,this.a32=s,this.a13=o,this.a23=c,this.a33=d}return t.quadrilateralToQuadrilateral=function(e,n,r,i,a,s,o,c,d,f,p,g,y,x,_,A){var E=t.quadrilateralToSquare(e,n,r,i,a,s,o,c),T=t.squareToQuadrilateral(d,f,p,g,y,x,_,A);return T.times(E)},t.prototype.transformPoints=function(e){for(var n=e.length,r=this.a11,i=this.a12,a=this.a13,s=this.a21,o=this.a22,c=this.a23,d=this.a31,f=this.a32,p=this.a33,g=0;g<n;g+=2){var y=e[g],x=e[g+1],_=a*y+c*x+p;e[g]=(r*y+s*x+d)/_,e[g+1]=(i*y+o*x+f)/_}},t.prototype.transformPointsWithValues=function(e,n){for(var r=this.a11,i=this.a12,a=this.a13,s=this.a21,o=this.a22,c=this.a23,d=this.a31,f=this.a32,p=this.a33,g=e.length,y=0;y<g;y++){var x=e[y],_=n[y],A=a*x+c*_+p;e[y]=(r*x+s*_+d)/A,n[y]=(i*x+o*_+f)/A}},t.squareToQuadrilateral=function(e,n,r,i,a,s,o,c){var d=e-r+a-o,f=n-i+s-c;if(d===0&&f===0)return new t(r-e,a-r,e,i-n,s-i,n,0,0,1);var p=r-a,g=o-a,y=i-s,x=c-s,_=p*x-g*y,A=(d*x-g*f)/_,E=(p*f-d*y)/_;return new t(r-e+A*r,o-e+E*o,e,i-n+A*i,c-n+E*c,n,A,E,1)},t.quadrilateralToSquare=function(e,n,r,i,a,s,o,c){return t.squareToQuadrilateral(e,n,r,i,a,s,o,c).buildAdjoint()},t.prototype.buildAdjoint=function(){return new t(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)},t.prototype.times=function(e){return new t(this.a11*e.a11+this.a21*e.a12+this.a31*e.a13,this.a11*e.a21+this.a21*e.a22+this.a31*e.a23,this.a11*e.a31+this.a21*e.a32+this.a31*e.a33,this.a12*e.a11+this.a22*e.a12+this.a32*e.a13,this.a12*e.a21+this.a22*e.a22+this.a32*e.a23,this.a12*e.a31+this.a22*e.a32+this.a32*e.a33,this.a13*e.a11+this.a23*e.a12+this.a33*e.a13,this.a13*e.a21+this.a23*e.a22+this.a33*e.a23,this.a13*e.a31+this.a23*e.a32+this.a33*e.a33)},t}(),yU=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),vU=function(t){yU(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.sampleGrid=function(n,r,i,a,s,o,c,d,f,p,g,y,x,_,A,E,T,C,D){var k=BM.quadrilateralToQuadrilateral(a,s,o,c,d,f,p,g,y,x,_,A,E,T,C,D);return this.sampleGridWithTransform(n,r,i,k)},e.prototype.sampleGridWithTransform=function(n,r,i,a){if(r<=0||i<=0)throw new _e;for(var s=new ks(r,i),o=new Float32Array(2*r),c=0;c<i;c++){for(var d=o.length,f=c+.5,p=0;p<d;p+=2)o[p]=p/2+.5,o[p+1]=f;a.transformPoints(o),mI.checkAndNudgePoints(n,o);try{for(var p=0;p<d;p+=2)n.get(Math.floor(o[p]),Math.floor(o[p+1]))&&s.set(p/2,c)}catch{throw new _e}}return s},e}(mI),K_=function(){function t(){}return t.setGridSampler=function(e){t.gridSampler=e},t.getInstance=function(){return t.gridSampler},t.gridSampler=new vU,t}(),Pi=function(){function t(e,n){this.x=e,this.y=n}return t.prototype.toResultPoint=function(){return new Xe(this.getX(),this.getY())},t.prototype.getX=function(){return this.x},t.prototype.getY=function(){return this.y},t}(),xU=function(){function t(e){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=e}return t.prototype.detect=function(){return this.detectMirror(!1)},t.prototype.detectMirror=function(e){var n=this.getMatrixCenter(),r=this.getBullsEyeCorners(n);if(e){var i=r[0];r[0]=r[2],r[2]=i}this.extractParameters(r);var a=this.sampleGrid(this.image,r[this.shift%4],r[(this.shift+1)%4],r[(this.shift+2)%4],r[(this.shift+3)%4]),s=this.getMatrixCornerPoints(r);return new mU(a,s,this.compact,this.nbDataBlocks,this.nbLayers)},t.prototype.extractParameters=function(e){if(!this.isValidPoint(e[0])||!this.isValidPoint(e[1])||!this.isValidPoint(e[2])||!this.isValidPoint(e[3]))throw new _e;var n=2*this.nbCenterLayers,r=new Int32Array([this.sampleLine(e[0],e[1],n),this.sampleLine(e[1],e[2],n),this.sampleLine(e[2],e[3],n),this.sampleLine(e[3],e[0],n)]);this.shift=this.getRotation(r,n);for(var i=0,a=0;a<4;a++){var s=r[(this.shift+a)%4];this.compact?(i<<=7,i+=s>>1&127):(i<<=10,i+=(s>>2&992)+(s>>1&31))}var o=this.getCorrectedParameterData(i,this.compact);this.compact?(this.nbLayers=(o>>6)+1,this.nbDataBlocks=(o&63)+1):(this.nbLayers=(o>>11)+1,this.nbDataBlocks=(o&2047)+1)},t.prototype.getRotation=function(e,n){var r=0;e.forEach(function(a,s,o){var c=(a>>n-2<<1)+(a&1);r=(r<<3)+c}),r=((r&1)<<11)+(r>>1);for(var i=0;i<4;i++)if(Ct.bitCount(r^this.EXPECTED_CORNER_BITS[i])<=2)return i;throw new _e},t.prototype.getCorrectedParameterData=function(e,n){var r,i;n?(r=7,i=2):(r=10,i=4);for(var a=r-i,s=new Int32Array(r),o=r-1;o>=0;--o)s[o]=e&15,e>>=4;try{var c=new q1(Bi.AZTEC_PARAM);c.decode(s,a)}catch{throw new _e}for(var d=0,o=0;o<i;o++)d=(d<<4)+s[o];return d},t.prototype.getBullsEyeCorners=function(e){var n=e,r=e,i=e,a=e,s=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){var o=this.getFirstDifferent(n,s,1,-1),c=this.getFirstDifferent(r,s,1,1),d=this.getFirstDifferent(i,s,-1,1),f=this.getFirstDifferent(a,s,-1,-1);if(this.nbCenterLayers>2){var p=this.distancePoint(f,o)*this.nbCenterLayers/(this.distancePoint(a,n)*(this.nbCenterLayers+2));if(p<.75||p>1.25||!this.isWhiteOrBlackRectangle(o,c,d,f))break}n=o,r=c,i=d,a=f,s=!s}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new _e;this.compact=this.nbCenterLayers===5;var g=new Xe(n.getX()+.5,n.getY()-.5),y=new Xe(r.getX()+.5,r.getY()+.5),x=new Xe(i.getX()-.5,i.getY()+.5),_=new Xe(a.getX()-.5,a.getY()-.5);return this.expandSquare([g,y,x,_],2*this.nbCenterLayers-3,2*this.nbCenterLayers)},t.prototype.getMatrixCenter=function(){var e,n,r,i;try{var a=new iw(this.image).detect();e=a[0],n=a[1],r=a[2],i=a[3]}catch{var s=this.image.getWidth()/2,o=this.image.getHeight()/2;e=this.getFirstDifferent(new Pi(s+7,o-7),!1,1,-1).toResultPoint(),n=this.getFirstDifferent(new Pi(s+7,o+7),!1,1,1).toResultPoint(),r=this.getFirstDifferent(new Pi(s-7,o+7),!1,-1,1).toResultPoint(),i=this.getFirstDifferent(new Pi(s-7,o-7),!1,-1,-1).toResultPoint()}var c=$t.round((e.getX()+i.getX()+n.getX()+r.getX())/4),d=$t.round((e.getY()+i.getY()+n.getY()+r.getY())/4);try{var a=new iw(this.image,15,c,d).detect();e=a[0],n=a[1],r=a[2],i=a[3]}catch{e=this.getFirstDifferent(new Pi(c+7,d-7),!1,1,-1).toResultPoint(),n=this.getFirstDifferent(new Pi(c+7,d+7),!1,1,1).toResultPoint(),r=this.getFirstDifferent(new Pi(c-7,d+7),!1,-1,1).toResultPoint(),i=this.getFirstDifferent(new Pi(c-7,d-7),!1,-1,-1).toResultPoint()}return c=$t.round((e.getX()+i.getX()+n.getX()+r.getX())/4),d=$t.round((e.getY()+i.getY()+n.getY()+r.getY())/4),new Pi(c,d)},t.prototype.getMatrixCornerPoints=function(e){return this.expandSquare(e,2*this.nbCenterLayers,this.getDimension())},t.prototype.sampleGrid=function(e,n,r,i,a){var s=K_.getInstance(),o=this.getDimension(),c=o/2-this.nbCenterLayers,d=o/2+this.nbCenterLayers;return s.sampleGrid(e,o,o,c,c,d,c,d,d,c,d,n.getX(),n.getY(),r.getX(),r.getY(),i.getX(),i.getY(),a.getX(),a.getY())},t.prototype.sampleLine=function(e,n,r){for(var i=0,a=this.distanceResultPoint(e,n),s=a/r,o=e.getX(),c=e.getY(),d=s*(n.getX()-e.getX())/a,f=s*(n.getY()-e.getY())/a,p=0;p<r;p++)this.image.get($t.round(o+p*d),$t.round(c+p*f))&&(i|=1<<r-p-1);return i},t.prototype.isWhiteOrBlackRectangle=function(e,n,r,i){var a=3;e=new Pi(e.getX()-a,e.getY()+a),n=new Pi(n.getX()-a,n.getY()-a),r=new Pi(r.getX()+a,r.getY()-a),i=new Pi(i.getX()+a,i.getY()+a);var s=this.getColor(i,e);if(s===0)return!1;var o=this.getColor(e,n);return o!==s||(o=this.getColor(n,r),o!==s)?!1:(o=this.getColor(r,i),o===s)},t.prototype.getColor=function(e,n){for(var r=this.distancePoint(e,n),i=(n.getX()-e.getX())/r,a=(n.getY()-e.getY())/r,s=0,o=e.getX(),c=e.getY(),d=this.image.get(e.getX(),e.getY()),f=Math.ceil(r),p=0;p<f;p++)o+=i,c+=a,this.image.get($t.round(o),$t.round(c))!==d&&s++;var g=s/r;return g>.1&&g<.9?0:g<=.1===d?1:-1},t.prototype.getFirstDifferent=function(e,n,r,i){for(var a=e.getX()+r,s=e.getY()+i;this.isValid(a,s)&&this.image.get(a,s)===n;)a+=r,s+=i;for(a-=r,s-=i;this.isValid(a,s)&&this.image.get(a,s)===n;)a+=r;for(a-=r;this.isValid(a,s)&&this.image.get(a,s)===n;)s+=i;return s-=i,new Pi(a,s)},t.prototype.expandSquare=function(e,n,r){var i=r/(2*n),a=e[0].getX()-e[2].getX(),s=e[0].getY()-e[2].getY(),o=(e[0].getX()+e[2].getX())/2,c=(e[0].getY()+e[2].getY())/2,d=new Xe(o+i*a,c+i*s),f=new Xe(o-i*a,c-i*s);a=e[1].getX()-e[3].getX(),s=e[1].getY()-e[3].getY(),o=(e[1].getX()+e[3].getX())/2,c=(e[1].getY()+e[3].getY())/2;var p=new Xe(o+i*a,c+i*s),g=new Xe(o-i*a,c-i*s),y=[d,p,f,g];return y},t.prototype.isValid=function(e,n){return e>=0&&e<this.image.getWidth()&&n>0&&n<this.image.getHeight()},t.prototype.isValidPoint=function(e){var n=$t.round(e.getX()),r=$t.round(e.getY());return this.isValid(n,r)},t.prototype.distancePoint=function(e,n){return $t.distance(e.getX(),e.getY(),n.getX(),n.getY())},t.prototype.distanceResultPoint=function(e,n){return $t.distance(e.getX(),e.getY(),n.getX(),n.getY())},t.prototype.getDimension=function(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(Ct.truncDivision(this.nbLayers-4,8)+1)+15},t}(),aw=function(){function t(){}return t.prototype.decode=function(e,n){n===void 0&&(n=null);var r=null,i=new xU(e.getBlackMatrix()),a=null,s=null;try{var o=i.detectMirror(!1);a=o.getPoints(),this.reportFoundResultPoints(n,a),s=new gI().decode(o)}catch(p){r=p}if(s==null)try{var o=i.detectMirror(!0);a=o.getPoints(),this.reportFoundResultPoints(n,a),s=new gI().decode(o)}catch(p){throw r??p}var c=new gi(s.getText(),s.getRawBytes(),s.getNumBits(),a,et.AZTEC,Sn.currentTimeMillis()),d=s.getByteSegments();d!=null&&c.putMetadata(ei.BYTE_SEGMENTS,d);var f=s.getECLevel();return f!=null&&c.putMetadata(ei.ERROR_CORRECTION_LEVEL,f),c},t.prototype.reportFoundResultPoints=function(e,n){if(e!=null){var r=e.get(Ln.NEED_RESULT_POINT_CALLBACK);r!=null&&n.forEach(function(i,a,s){r.foundPossibleResultPoint(i)})}},t.prototype.reset=function(){},t}(),wU=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}();(function(t){wU(e,t);function e(n){return n===void 0&&(n=500),t.call(this,new aw,n)||this}return e})(df);var Ir=function(){function t(){}return t.prototype.decode=function(e,n){try{return this.doDecode(e,n)}catch{var r=n&&n.get(Ln.TRY_HARDER)===!0;if(r&&e.isRotateSupported()){var i=e.rotateCounterClockwise(),a=this.doDecode(i,n),s=a.getResultMetadata(),o=270;s!==null&&s.get(ei.ORIENTATION)===!0&&(o=o+s.get(ei.ORIENTATION)%360),a.putMetadata(ei.ORIENTATION,o);var c=a.getResultPoints();if(c!==null)for(var d=i.getHeight(),f=0;f<c.length;f++)c[f]=new Xe(d-c[f].getY()-1,c[f].getX());return a}else throw new _e}},t.prototype.reset=function(){},t.prototype.doDecode=function(e,n){var r=e.getWidth(),i=e.getHeight(),a=new Ur(r),s=n&&n.get(Ln.TRY_HARDER)===!0,o=Math.max(1,i>>(s?8:5)),c;s?c=i:c=15;for(var d=Math.trunc(i/2),f=0;f<c;f++){var p=Math.trunc((f+1)/2),g=(f&1)===0,y=d+o*(g?p:-p);if(y<0||y>=i)break;try{a=e.getBlackRow(y,a)}catch{continue}for(var x=function(T){if(T===1&&(a.reverse(),n&&n.get(Ln.NEED_RESULT_POINT_CALLBACK)===!0)){var C=new Map;n.forEach(function(B,O){return C.set(O,B)}),C.delete(Ln.NEED_RESULT_POINT_CALLBACK),n=C}try{var D=_.decodeRow(y,a,n);if(T===1){D.putMetadata(ei.ORIENTATION,180);var k=D.getResultPoints();k!==null&&(k[0]=new Xe(r-k[0].getX()-1,k[0].getY()),k[1]=new Xe(r-k[1].getX()-1,k[1].getY()))}return{value:D}}catch{}},_=this,A=0;A<2;A++){var E=x(A);if(typeof E=="object")return E.value}}throw new _e},t.recordPattern=function(e,n,r){for(var i=r.length,a=0;a<i;a++)r[a]=0;var s=e.getSize();if(n>=s)throw new _e;for(var o=!e.get(n),c=0,d=n;d<s;){if(e.get(d)!==o)r[c]++;else{if(++c===i)break;r[c]=1,o=!o}d++}if(!(c===i||c===i-1&&d===s))throw new _e},t.recordPatternInReverse=function(e,n,r){for(var i=r.length,a=e.get(n);n>0&&i>=0;)e.get(--n)!==a&&(i--,a=!a);if(i>=0)throw new _e;t.recordPattern(e,n+1,r)},t.patternMatchVariance=function(e,n,r){for(var i=e.length,a=0,s=0,o=0;o<i;o++)a+=e[o],s+=n[o];if(a<s)return Number.POSITIVE_INFINITY;var c=a/s;r*=c;for(var d=0,f=0;f<i;f++){var p=e[f],g=n[f]*c,y=p>g?p-g:g-p;if(y>r)return Number.POSITIVE_INFINITY;d+=y}return d/a},t}(),_U=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),yI=function(t){_U(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.findStartPattern=function(n){for(var r=n.getSize(),i=n.getNextSet(0),a=0,s=Int32Array.from([0,0,0,0,0,0]),o=i,c=!1,d=6,f=i;f<r;f++)if(n.get(f)!==c)s[a]++;else{if(a===d-1){for(var p=e.MAX_AVG_VARIANCE,g=-1,y=e.CODE_START_A;y<=e.CODE_START_C;y++){var x=Ir.patternMatchVariance(s,e.CODE_PATTERNS[y],e.MAX_INDIVIDUAL_VARIANCE);x<p&&(p=x,g=y)}if(g>=0&&n.isRange(Math.max(0,o-(f-o)/2),o,!1))return Int32Array.from([o,f,g]);o+=s[0]+s[1],s=s.slice(2,s.length),s[a-1]=0,s[a]=0,a--}else a++;s[a]=1,c=!c}throw new _e},e.decodeCode=function(n,r,i){Ir.recordPattern(n,i,r);for(var a=e.MAX_AVG_VARIANCE,s=-1,o=0;o<e.CODE_PATTERNS.length;o++){var c=e.CODE_PATTERNS[o],d=this.patternMatchVariance(r,c,e.MAX_INDIVIDUAL_VARIANCE);d<a&&(a=d,s=o)}if(s>=0)return s;throw new _e},e.prototype.decodeRow=function(n,r,i){var a=i&&i.get(Ln.ASSUME_GS1)===!0,s=e.findStartPattern(r),o=s[2],c=0,d=new Uint8Array(20);d[c++]=o;var f;switch(o){case e.CODE_START_A:f=e.CODE_CODE_A;break;case e.CODE_START_B:f=e.CODE_CODE_B;break;case e.CODE_START_C:f=e.CODE_CODE_C;break;default:throw new je}for(var p=!1,g=!1,y="",x=s[0],_=s[1],A=Int32Array.from([0,0,0,0,0,0]),E=0,T=0,C=o,D=0,k=!0,B=!1,O=!1;!p;){var I=g;switch(g=!1,E=T,T=e.decodeCode(r,A,_),d[c++]=T,T!==e.CODE_STOP&&(k=!0),T!==e.CODE_STOP&&(D++,C+=D*T),x=_,_+=A.reduce(function(G,Q){return G+Q},0),T){case e.CODE_START_A:case e.CODE_START_B:case e.CODE_START_C:throw new je}switch(f){case e.CODE_CODE_A:if(T<64)O===B?y+=String.fromCharCode(32+T):y+=String.fromCharCode(32+T+128),O=!1;else if(T<96)O===B?y+=String.fromCharCode(T-64):y+=String.fromCharCode(T+64),O=!1;else switch(T!==e.CODE_STOP&&(k=!1),T){case e.CODE_FNC_1:a&&(y.length===0?y+="]C1":y+="");break;case e.CODE_FNC_2:case e.CODE_FNC_3:break;case e.CODE_FNC_4_A:!B&&O?(B=!0,O=!1):B&&O?(B=!1,O=!1):O=!0;break;case e.CODE_SHIFT:g=!0,f=e.CODE_CODE_B;break;case e.CODE_CODE_B:f=e.CODE_CODE_B;break;case e.CODE_CODE_C:f=e.CODE_CODE_C;break;case e.CODE_STOP:p=!0;break}break;case e.CODE_CODE_B:if(T<96)O===B?y+=String.fromCharCode(32+T):y+=String.fromCharCode(32+T+128),O=!1;else switch(T!==e.CODE_STOP&&(k=!1),T){case e.CODE_FNC_1:a&&(y.length===0?y+="]C1":y+="");break;case e.CODE_FNC_2:case e.CODE_FNC_3:break;case e.CODE_FNC_4_B:!B&&O?(B=!0,O=!1):B&&O?(B=!1,O=!1):O=!0;break;case e.CODE_SHIFT:g=!0,f=e.CODE_CODE_A;break;case e.CODE_CODE_A:f=e.CODE_CODE_A;break;case e.CODE_CODE_C:f=e.CODE_CODE_C;break;case e.CODE_STOP:p=!0;break}break;case e.CODE_CODE_C:if(T<100)T<10&&(y+="0"),y+=T;else switch(T!==e.CODE_STOP&&(k=!1),T){case e.CODE_FNC_1:a&&(y.length===0?y+="]C1":y+="");break;case e.CODE_CODE_A:f=e.CODE_CODE_A;break;case e.CODE_CODE_B:f=e.CODE_CODE_B;break;case e.CODE_STOP:p=!0;break}break}I&&(f=f===e.CODE_CODE_A?e.CODE_CODE_B:e.CODE_CODE_A)}var R=_-x;if(_=r.getNextUnset(_),!r.isRange(_,Math.min(r.getSize(),_+(_-x)/2),!1))throw new _e;if(C-=D*E,C%103!==E)throw new Vr;var V=y.length;if(V===0)throw new _e;V>0&&k&&(f===e.CODE_CODE_C?y=y.substring(0,V-2):y=y.substring(0,V-1));for(var L=(s[1]+s[0])/2,P=x+R/2,F=d.length,q=new Uint8Array(F),X=0;X<F;X++)q[X]=d[X];var W=[new Xe(L,n),new Xe(P,n)];return new gi(y,q,0,W,et.CODE_128,new Date().getTime())},e.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],e.MAX_AVG_VARIANCE=.25,e.MAX_INDIVIDUAL_VARIANCE=.7,e.CODE_SHIFT=98,e.CODE_CODE_C=99,e.CODE_CODE_B=100,e.CODE_CODE_A=101,e.CODE_FNC_1=102,e.CODE_FNC_2=97,e.CODE_FNC_3=96,e.CODE_FNC_4_A=101,e.CODE_FNC_4_B=100,e.CODE_START_A=103,e.CODE_START_B=104,e.CODE_START_C=105,e.CODE_STOP=106,e}(Ir),bU=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Fx=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},vI=function(t){bU(e,t);function e(n,r){n===void 0&&(n=!1),r===void 0&&(r=!1);var i=t.call(this)||this;return i.usingCheckDigit=n,i.extendedMode=r,i.decodeRowResult="",i.counters=new Int32Array(9),i}return e.prototype.decodeRow=function(n,r,i){var a,s,o,c,d=this.counters;d.fill(0),this.decodeRowResult="";var f=e.findAsteriskPattern(r,d),p=r.getNextSet(f[1]),g=r.getSize(),y,x;do{e.recordPattern(r,p,d);var _=e.toNarrowWidePattern(d);if(_<0)throw new _e;y=e.patternToChar(_),this.decodeRowResult+=y,x=p;try{for(var A=(a=void 0,Fx(d)),E=A.next();!E.done;E=A.next()){var T=E.value;p+=T}}catch(F){a={error:F}}finally{try{E&&!E.done&&(s=A.return)&&s.call(A)}finally{if(a)throw a.error}}p=r.getNextSet(p)}while(y!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var C=0;try{for(var D=Fx(d),k=D.next();!k.done;k=D.next()){var T=k.value;C+=T}}catch(F){o={error:F}}finally{try{k&&!k.done&&(c=D.return)&&c.call(D)}finally{if(o)throw o.error}}var B=p-x-C;if(p!==g&&B*2<C)throw new _e;if(this.usingCheckDigit){for(var O=this.decodeRowResult.length-1,I=0,R=0;R<O;R++)I+=e.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(R));if(this.decodeRowResult.charAt(O)!==e.ALPHABET_STRING.charAt(I%43))throw new Vr;this.decodeRowResult=this.decodeRowResult.substring(0,O)}if(this.decodeRowResult.length===0)throw new _e;var V;this.extendedMode?V=e.decodeExtended(this.decodeRowResult):V=this.decodeRowResult;var L=(f[1]+f[0])/2,P=x+C/2;return new gi(V,null,0,[new Xe(L,n),new Xe(P,n)],et.CODE_39,new Date().getTime())},e.findAsteriskPattern=function(n,r){for(var i=n.getSize(),a=n.getNextSet(0),s=0,o=a,c=!1,d=r.length,f=a;f<i;f++)if(n.get(f)!==c)r[s]++;else{if(s===d-1){if(this.toNarrowWidePattern(r)===e.ASTERISK_ENCODING&&n.isRange(Math.max(0,o-Math.floor((f-o)/2)),o,!1))return[o,f];o+=r[0]+r[1],r.copyWithin(0,2,2+s-1),r[s-1]=0,r[s]=0,s--}else s++;r[s]=1,c=!c}throw new _e},e.toNarrowWidePattern=function(n){var r,i,a=n.length,s=0,o;do{var c=2147483647;try{for(var d=(r=void 0,Fx(n)),f=d.next();!f.done;f=d.next()){var p=f.value;p<c&&p>s&&(c=p)}}catch(_){r={error:_}}finally{try{f&&!f.done&&(i=d.return)&&i.call(d)}finally{if(r)throw r.error}}s=c,o=0;for(var g=0,y=0,x=0;x<a;x++){var p=n[x];p>s&&(y|=1<<a-1-x,o++,g+=p)}if(o===3){for(var x=0;x<a&&o>0;x++){var p=n[x];if(p>s&&(o--,p*2>=g))return-1}return y}}while(o>3);return-1},e.patternToChar=function(n){for(var r=0;r<e.CHARACTER_ENCODINGS.length;r++)if(e.CHARACTER_ENCODINGS[r]===n)return e.ALPHABET_STRING.charAt(r);if(n===e.ASTERISK_ENCODING)return"*";throw new _e},e.decodeExtended=function(n){for(var r=n.length,i="",a=0;a<r;a++){var s=n.charAt(a);if(s==="+"||s==="$"||s==="%"||s==="/"){var o=n.charAt(a+1),c="\0";switch(s){case"+":if(o>="A"&&o<="Z")c=String.fromCharCode(o.charCodeAt(0)+32);else throw new je;break;case"$":if(o>="A"&&o<="Z")c=String.fromCharCode(o.charCodeAt(0)-64);else throw new je;break;case"%":if(o>="A"&&o<="E")c=String.fromCharCode(o.charCodeAt(0)-38);else if(o>="F"&&o<="J")c=String.fromCharCode(o.charCodeAt(0)-11);else if(o>="K"&&o<="O")c=String.fromCharCode(o.charCodeAt(0)+16);else if(o>="P"&&o<="T")c=String.fromCharCode(o.charCodeAt(0)+43);else if(o==="U")c="\0";else if(o==="V")c="@";else if(o==="W")c="`";else if(o==="X"||o==="Y"||o==="Z")c="";else throw new je;break;case"/":if(o>="A"&&o<="O")c=String.fromCharCode(o.charCodeAt(0)-32);else if(o==="Z")c=":";else throw new je;break}i+=c,a++}else i+=s}return i},e.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",e.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],e.ASTERISK_ENCODING=148,e}(Ir),AU=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Vx=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},xI=function(t){AU(e,t);function e(){var n=t.call(this)||this;return n.decodeRowResult="",n.counters=new Int32Array(6),n}return e.prototype.decodeRow=function(n,r,i){var a,s,o,c,d=this.findAsteriskPattern(r),f=r.getNextSet(d[1]),p=r.getSize(),g=this.counters;g.fill(0),this.decodeRowResult="";var y,x;do{e.recordPattern(r,f,g);var _=this.toPattern(g);if(_<0)throw new _e;y=this.patternToChar(_),this.decodeRowResult+=y,x=f;try{for(var A=(a=void 0,Vx(g)),E=A.next();!E.done;E=A.next()){var T=E.value;f+=T}}catch(R){a={error:R}}finally{try{E&&!E.done&&(s=A.return)&&s.call(A)}finally{if(a)throw a.error}}f=r.getNextSet(f)}while(y!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var C=0;try{for(var D=Vx(g),k=D.next();!k.done;k=D.next()){var T=k.value;C+=T}}catch(R){o={error:R}}finally{try{k&&!k.done&&(c=D.return)&&c.call(D)}finally{if(o)throw o.error}}if(f===p||!r.get(f))throw new _e;if(this.decodeRowResult.length<2)throw new _e;this.checkChecksums(this.decodeRowResult),this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-2);var B=this.decodeExtended(this.decodeRowResult),O=(d[1]+d[0])/2,I=x+C/2;return new gi(B,null,0,[new Xe(O,n),new Xe(I,n)],et.CODE_93,new Date().getTime())},e.prototype.findAsteriskPattern=function(n){var r=n.getSize(),i=n.getNextSet(0);this.counters.fill(0);for(var a=this.counters,s=i,o=!1,c=a.length,d=0,f=i;f<r;f++)if(n.get(f)!==o)a[d]++;else{if(d===c-1){if(this.toPattern(a)===e.ASTERISK_ENCODING)return new Int32Array([s,f]);s+=a[0]+a[1],a.copyWithin(0,2,2+d-1),a[d-1]=0,a[d]=0,d--}else d++;a[d]=1,o=!o}throw new _e},e.prototype.toPattern=function(n){var r,i,a=0;try{for(var s=Vx(n),o=s.next();!o.done;o=s.next()){var c=o.value;a+=c}}catch(x){r={error:x}}finally{try{o&&!o.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}for(var d=0,f=n.length,p=0;p<f;p++){var g=Math.round(n[p]*9/a);if(g<1||g>4)return-1;if((p&1)===0)for(var y=0;y<g;y++)d=d<<1|1;else d<<=g}return d},e.prototype.patternToChar=function(n){for(var r=0;r<e.CHARACTER_ENCODINGS.length;r++)if(e.CHARACTER_ENCODINGS[r]===n)return e.ALPHABET_STRING.charAt(r);throw new _e},e.prototype.decodeExtended=function(n){for(var r=n.length,i="",a=0;a<r;a++){var s=n.charAt(a);if(s>="a"&&s<="d"){if(a>=r-1)throw new je;var o=n.charAt(a+1),c="\0";switch(s){case"d":if(o>="A"&&o<="Z")c=String.fromCharCode(o.charCodeAt(0)+32);else throw new je;break;case"a":if(o>="A"&&o<="Z")c=String.fromCharCode(o.charCodeAt(0)-64);else throw new je;break;case"b":if(o>="A"&&o<="E")c=String.fromCharCode(o.charCodeAt(0)-38);else if(o>="F"&&o<="J")c=String.fromCharCode(o.charCodeAt(0)-11);else if(o>="K"&&o<="O")c=String.fromCharCode(o.charCodeAt(0)+16);else if(o>="P"&&o<="T")c=String.fromCharCode(o.charCodeAt(0)+43);else if(o==="U")c="\0";else if(o==="V")c="@";else if(o==="W")c="`";else if(o>="X"&&o<="Z")c="";else throw new je;break;case"c":if(o>="A"&&o<="O")c=String.fromCharCode(o.charCodeAt(0)-32);else if(o==="Z")c=":";else throw new je;break}i+=c,a++}else i+=s}return i},e.prototype.checkChecksums=function(n){var r=n.length;this.checkOneChecksum(n,r-2,20),this.checkOneChecksum(n,r-1,15)},e.prototype.checkOneChecksum=function(n,r,i){for(var a=1,s=0,o=r-1;o>=0;o--)s+=a*e.ALPHABET_STRING.indexOf(n.charAt(o)),++a>i&&(a=1);if(n.charAt(r)!==e.ALPHABET_STRING[s%47])throw new Vr},e.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%abcd*",e.CHARACTER_ENCODINGS=[276,328,324,322,296,292,290,336,274,266,424,420,418,404,402,394,360,356,354,308,282,344,332,326,300,278,436,434,428,422,406,410,364,358,310,314,302,468,466,458,366,374,430,294,474,470,306,350],e.ASTERISK_ENCODING=e.CHARACTER_ENCODINGS[47],e}(Ir),EU=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),SU=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},wI=function(t){EU(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.narrowLineWidth=-1,n}return e.prototype.decodeRow=function(n,r,i){var a,s,o=this.decodeStart(r),c=this.decodeEnd(r),d=new At;e.decodeMiddle(r,o[1],c[0],d);var f=d.toString(),p=null;i!=null&&(p=i.get(Ln.ALLOWED_LENGTHS)),p==null&&(p=e.DEFAULT_ALLOWED_LENGTHS);var g=f.length,y=!1,x=0;try{for(var _=SU(p),A=_.next();!A.done;A=_.next()){var E=A.value;if(g===E){y=!0;break}E>x&&(x=E)}}catch(D){a={error:D}}finally{try{A&&!A.done&&(s=_.return)&&s.call(_)}finally{if(a)throw a.error}}if(!y&&g>x&&(y=!0),!y)throw new je;var T=[new Xe(o[1],n),new Xe(c[0],n)],C=new gi(f,null,0,T,et.ITF,new Date().getTime());return C},e.decodeMiddle=function(n,r,i,a){var s=new Int32Array(10),o=new Int32Array(5),c=new Int32Array(5);for(s.fill(0),o.fill(0),c.fill(0);r<i;){Ir.recordPattern(n,r,s);for(var d=0;d<5;d++){var f=2*d;o[d]=s[f],c[d]=s[f+1]}var p=e.decodeDigit(o);a.append(p.toString()),p=this.decodeDigit(c),a.append(p.toString()),s.forEach(function(g){r+=g})}},e.prototype.decodeStart=function(n){var r=e.skipWhiteSpace(n),i=e.findGuardPattern(n,r,e.START_PATTERN);return this.narrowLineWidth=(i[1]-i[0])/4,this.validateQuietZone(n,i[0]),i},e.prototype.validateQuietZone=function(n,r){var i=this.narrowLineWidth*10;i=i<r?i:r;for(var a=r-1;i>0&&a>=0&&!n.get(a);a--)i--;if(i!==0)throw new _e},e.skipWhiteSpace=function(n){var r=n.getSize(),i=n.getNextSet(0);if(i===r)throw new _e;return i},e.prototype.decodeEnd=function(n){n.reverse();try{var r=e.skipWhiteSpace(n),i=void 0;try{i=e.findGuardPattern(n,r,e.END_PATTERN_REVERSED[0])}catch(s){s instanceof _e&&(i=e.findGuardPattern(n,r,e.END_PATTERN_REVERSED[1]))}this.validateQuietZone(n,i[0]);var a=i[0];return i[0]=n.getSize()-i[1],i[1]=n.getSize()-a,i}finally{n.reverse()}},e.findGuardPattern=function(n,r,i){var a=i.length,s=new Int32Array(a),o=n.getSize(),c=!1,d=0,f=r;s.fill(0);for(var p=r;p<o;p++)if(n.get(p)!==c)s[d]++;else{if(d===a-1){if(Ir.patternMatchVariance(s,i,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return[f,p];f+=s[0]+s[1],Sn.arraycopy(s,2,s,0,d-1),s[d-1]=0,s[d]=0,d--}else d++;s[d]=1,c=!c}throw new _e},e.decodeDigit=function(n){for(var r=e.MAX_AVG_VARIANCE,i=-1,a=e.PATTERNS.length,s=0;s<a;s++){var o=e.PATTERNS[s],c=Ir.patternMatchVariance(n,o,e.MAX_INDIVIDUAL_VARIANCE);c<r?(r=c,i=s):c===r&&(i=-1)}if(i>=0)return i%10;throw new _e},e.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],e.MAX_AVG_VARIANCE=.38,e.MAX_INDIVIDUAL_VARIANCE=.5,e.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],e.START_PATTERN=Int32Array.from([1,1,1,1]),e.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])],e}(Ir),TU=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),$d=function(t){TU(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.decodeRowStringBuffer="",n}return e.findStartGuardPattern=function(n){for(var r=!1,i,a=0,s=Int32Array.from([0,0,0]);!r;){s=Int32Array.from([0,0,0]),i=e.findGuardPattern(n,a,!1,this.START_END_PATTERN,s);var o=i[0];a=i[1];var c=o-(a-o);c>=0&&(r=n.isRange(c,o,!1))}return i},e.checkChecksum=function(n){return e.checkStandardUPCEANChecksum(n)},e.checkStandardUPCEANChecksum=function(n){var r=n.length;if(r===0)return!1;var i=parseInt(n.charAt(r-1),10);return e.getStandardUPCEANChecksum(n.substring(0,r-1))===i},e.getStandardUPCEANChecksum=function(n){for(var r=n.length,i=0,a=r-1;a>=0;a-=2){var s=n.charAt(a).charCodeAt(0)-48;if(s<0||s>9)throw new je;i+=s}i*=3;for(var a=r-2;a>=0;a-=2){var s=n.charAt(a).charCodeAt(0)-48;if(s<0||s>9)throw new je;i+=s}return(1e3-i)%10},e.decodeEnd=function(n,r){return e.findGuardPattern(n,r,!1,e.START_END_PATTERN,new Int32Array(e.START_END_PATTERN.length).fill(0))},e.findGuardPatternWithoutCounters=function(n,r,i,a){return this.findGuardPattern(n,r,i,a,new Int32Array(a.length))},e.findGuardPattern=function(n,r,i,a,s){var o=n.getSize();r=i?n.getNextUnset(r):n.getNextSet(r);for(var c=0,d=r,f=a.length,p=i,g=r;g<o;g++)if(n.get(g)!==p)s[c]++;else{if(c===f-1){if(Ir.patternMatchVariance(s,a,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return Int32Array.from([d,g]);d+=s[0]+s[1];for(var y=s.slice(2,s.length),x=0;x<c-1;x++)s[x]=y[x];s[c-1]=0,s[c]=0,c--}else c++;s[c]=1,p=!p}throw new _e},e.decodeDigit=function(n,r,i,a){this.recordPattern(n,i,r);for(var s=this.MAX_AVG_VARIANCE,o=-1,c=a.length,d=0;d<c;d++){var f=a[d],p=Ir.patternMatchVariance(r,f,e.MAX_INDIVIDUAL_VARIANCE);p<s&&(s=p,o=d)}if(o>=0)return o;throw new _e},e.MAX_AVG_VARIANCE=.48,e.MAX_INDIVIDUAL_VARIANCE=.7,e.START_END_PATTERN=Int32Array.from([1,1,1]),e.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),e.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),e.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])],e}(Ir),CU=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},IU=function(){function t(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return t.prototype.decodeRow=function(e,n,r){var i=this.decodeRowStringBuffer,a=this.decodeMiddle(n,r,i),s=i.toString(),o=t.parseExtensionString(s),c=[new Xe((r[0]+r[1])/2,e),new Xe(a,e)],d=new gi(s,null,0,c,et.UPC_EAN_EXTENSION,new Date().getTime());return o!=null&&d.putAllMetadata(o),d},t.prototype.decodeMiddle=function(e,n,r){var i,a,s=this.decodeMiddleCounters;s[0]=0,s[1]=0,s[2]=0,s[3]=0;for(var o=e.getSize(),c=n[1],d=0,f=0;f<5&&c<o;f++){var p=$d.decodeDigit(e,s,c,$d.L_AND_G_PATTERNS);r+=String.fromCharCode(48+p%10);try{for(var g=(i=void 0,CU(s)),y=g.next();!y.done;y=g.next()){var x=y.value;c+=x}}catch(A){i={error:A}}finally{try{y&&!y.done&&(a=g.return)&&a.call(g)}finally{if(i)throw i.error}}p>=10&&(d|=1<<4-f),f!==4&&(c=e.getNextSet(c),c=e.getNextUnset(c))}if(r.length!==5)throw new _e;var _=this.determineCheckDigit(d);if(t.extensionChecksum(r.toString())!==_)throw new _e;return c},t.extensionChecksum=function(e){for(var n=e.length,r=0,i=n-2;i>=0;i-=2)r+=e.charAt(i).charCodeAt(0)-48;r*=3;for(var i=n-1;i>=0;i-=2)r+=e.charAt(i).charCodeAt(0)-48;return r*=3,r%10},t.prototype.determineCheckDigit=function(e){for(var n=0;n<10;n++)if(e===this.CHECK_DIGIT_ENCODINGS[n])return n;throw new _e},t.parseExtensionString=function(e){if(e.length!==5)return null;var n=t.parseExtension5String(e);return n==null?null:new Map([[ei.SUGGESTED_PRICE,n]])},t.parseExtension5String=function(e){var n;switch(e.charAt(0)){case"0":n="£";break;case"5":n="$";break;case"9":switch(e){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}n="";break;default:n="";break}var r=parseInt(e.substring(1)),i=(r/100).toString(),a=r%100,s=a<10?"0"+a:a.toString();return n+i+"."+s},t}(),DU=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},RU=function(){function t(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return t.prototype.decodeRow=function(e,n,r){var i=this.decodeRowStringBuffer,a=this.decodeMiddle(n,r,i),s=i.toString(),o=t.parseExtensionString(s),c=[new Xe((r[0]+r[1])/2,e),new Xe(a,e)],d=new gi(s,null,0,c,et.UPC_EAN_EXTENSION,new Date().getTime());return o!=null&&d.putAllMetadata(o),d},t.prototype.decodeMiddle=function(e,n,r){var i,a,s=this.decodeMiddleCounters;s[0]=0,s[1]=0,s[2]=0,s[3]=0;for(var o=e.getSize(),c=n[1],d=0,f=0;f<2&&c<o;f++){var p=$d.decodeDigit(e,s,c,$d.L_AND_G_PATTERNS);r+=String.fromCharCode(48+p%10);try{for(var g=(i=void 0,DU(s)),y=g.next();!y.done;y=g.next()){var x=y.value;c+=x}}catch(_){i={error:_}}finally{try{y&&!y.done&&(a=g.return)&&a.call(g)}finally{if(i)throw i.error}}p>=10&&(d|=1<<1-f),f!==1&&(c=e.getNextSet(c),c=e.getNextUnset(c))}if(r.length!==2)throw new _e;if(parseInt(r.toString())%4!==d)throw new _e;return c},t.parseExtensionString=function(e){return e.length!==2?null:new Map([[ei.ISSUE_NUMBER,parseInt(e)]])},t}(),OU=function(){function t(){}return t.decodeRow=function(e,n,r){var i=$d.findGuardPattern(n,r,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{var a=new IU;return a.decodeRow(e,n,i)}catch{var s=new RU;return s.decodeRow(e,n,i)}},t.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]),t}(),MU=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Er=function(t){MU(e,t);function e(){var n=t.call(this)||this;n.decodeRowStringBuffer="",e.L_AND_G_PATTERNS=e.L_PATTERNS.map(function(o){return Int32Array.from(o)});for(var r=10;r<20;r++){for(var i=e.L_PATTERNS[r-10],a=new Int32Array(i.length),s=0;s<i.length;s++)a[s]=i[i.length-s-1];e.L_AND_G_PATTERNS[r]=a}return n}return e.prototype.decodeRow=function(n,r,i){var a=e.findStartGuardPattern(r),s=i==null?null:i.get(Ln.NEED_RESULT_POINT_CALLBACK);if(s!=null){var o=new Xe((a[0]+a[1])/2,n);s.foundPossibleResultPoint(o)}var c=this.decodeMiddle(r,a,this.decodeRowStringBuffer),d=c.rowOffset,f=c.resultString;if(s!=null){var p=new Xe(d,n);s.foundPossibleResultPoint(p)}var g=e.decodeEnd(r,d);if(s!=null){var y=new Xe((g[0]+g[1])/2,n);s.foundPossibleResultPoint(y)}var x=g[1],_=x+(x-g[0]);if(_>=r.getSize()||!r.isRange(x,_,!1))throw new _e;var A=f.toString();if(A.length<8)throw new je;if(!e.checkChecksum(A))throw new Vr;var E=(a[1]+a[0])/2,T=(g[1]+g[0])/2,C=this.getBarcodeFormat(),D=[new Xe(E,n),new Xe(T,n)],k=new gi(A,null,0,D,C,new Date().getTime()),B=0;try{var O=OU.decodeRow(n,r,g[1]);k.putMetadata(ei.UPC_EAN_EXTENSION,O.getText()),k.putAllMetadata(O.getResultMetadata()),k.addResultPoints(O.getResultPoints()),B=O.getText().length}catch{}var I=i==null?null:i.get(Ln.ALLOWED_EAN_EXTENSIONS);if(I!=null){var R=!1;for(var V in I)if(B.toString()===V){R=!0;break}if(!R)throw new _e}return C===et.EAN_13||et.UPC_A,k},e.checkChecksum=function(n){return e.checkStandardUPCEANChecksum(n)},e.checkStandardUPCEANChecksum=function(n){var r=n.length;if(r===0)return!1;var i=parseInt(n.charAt(r-1),10);return e.getStandardUPCEANChecksum(n.substring(0,r-1))===i},e.getStandardUPCEANChecksum=function(n){for(var r=n.length,i=0,a=r-1;a>=0;a-=2){var s=n.charAt(a).charCodeAt(0)-48;if(s<0||s>9)throw new je;i+=s}i*=3;for(var a=r-2;a>=0;a-=2){var s=n.charAt(a).charCodeAt(0)-48;if(s<0||s>9)throw new je;i+=s}return(1e3-i)%10},e.decodeEnd=function(n,r){return e.findGuardPattern(n,r,!1,e.START_END_PATTERN,new Int32Array(e.START_END_PATTERN.length).fill(0))},e}($d),PU=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),_I=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},sw=function(t){PU(e,t);function e(){var n=t.call(this)||this;return n.decodeMiddleCounters=Int32Array.from([0,0,0,0]),n}return e.prototype.decodeMiddle=function(n,r,i){var a,s,o,c,d=this.decodeMiddleCounters;d[0]=0,d[1]=0,d[2]=0,d[3]=0;for(var f=n.getSize(),p=r[1],g=0,y=0;y<6&&p<f;y++){var x=Er.decodeDigit(n,d,p,Er.L_AND_G_PATTERNS);i+=String.fromCharCode(48+x%10);try{for(var _=(a=void 0,_I(d)),A=_.next();!A.done;A=_.next()){var E=A.value;p+=E}}catch(k){a={error:k}}finally{try{A&&!A.done&&(s=_.return)&&s.call(_)}finally{if(a)throw a.error}}x>=10&&(g|=1<<5-y)}i=e.determineFirstDigit(i,g);var T=Er.findGuardPattern(n,p,!0,Er.MIDDLE_PATTERN,new Int32Array(Er.MIDDLE_PATTERN.length).fill(0));p=T[1];for(var y=0;y<6&&p<f;y++){var x=Er.decodeDigit(n,d,p,Er.L_PATTERNS);i+=String.fromCharCode(48+x);try{for(var C=(o=void 0,_I(d)),D=C.next();!D.done;D=C.next()){var E=D.value;p+=E}}catch(O){o={error:O}}finally{try{D&&!D.done&&(c=C.return)&&c.call(C)}finally{if(o)throw o.error}}}return{rowOffset:p,resultString:i}},e.prototype.getBarcodeFormat=function(){return et.EAN_13},e.determineFirstDigit=function(n,r){for(var i=0;i<10;i++)if(r===this.FIRST_DIGIT_ENCODINGS[i])return n=String.fromCharCode(48+i)+n,n;throw new _e},e.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26],e}(Er),kU=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),bI=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},AI=function(t){kU(e,t);function e(){var n=t.call(this)||this;return n.decodeMiddleCounters=Int32Array.from([0,0,0,0]),n}return e.prototype.decodeMiddle=function(n,r,i){var a,s,o,c,d=this.decodeMiddleCounters;d[0]=0,d[1]=0,d[2]=0,d[3]=0;for(var f=n.getSize(),p=r[1],g=0;g<4&&p<f;g++){var y=Er.decodeDigit(n,d,p,Er.L_PATTERNS);i+=String.fromCharCode(48+y);try{for(var x=(a=void 0,bI(d)),_=x.next();!_.done;_=x.next()){var A=_.value;p+=A}}catch(D){a={error:D}}finally{try{_&&!_.done&&(s=x.return)&&s.call(x)}finally{if(a)throw a.error}}}var E=Er.findGuardPattern(n,p,!0,Er.MIDDLE_PATTERN,new Int32Array(Er.MIDDLE_PATTERN.length).fill(0));p=E[1];for(var g=0;g<4&&p<f;g++){var y=Er.decodeDigit(n,d,p,Er.L_PATTERNS);i+=String.fromCharCode(48+y);try{for(var T=(o=void 0,bI(d)),C=T.next();!C.done;C=T.next()){var A=C.value;p+=A}}catch(B){o={error:B}}finally{try{C&&!C.done&&(c=T.return)&&c.call(T)}finally{if(o)throw o.error}}}return{rowOffset:p,resultString:i}},e.prototype.getBarcodeFormat=function(){return et.EAN_8},e}(Er),NU=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),EI=function(t){NU(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.ean13Reader=new sw,n}return e.prototype.getBarcodeFormat=function(){return et.UPC_A},e.prototype.decode=function(n,r){return this.maybeReturnResult(this.ean13Reader.decode(n))},e.prototype.decodeRow=function(n,r,i){return this.maybeReturnResult(this.ean13Reader.decodeRow(n,r,i))},e.prototype.decodeMiddle=function(n,r,i){return this.ean13Reader.decodeMiddle(n,r,i)},e.prototype.maybeReturnResult=function(n){var r=n.getText();if(r.charAt(0)==="0"){var i=new gi(r.substring(1),null,null,n.getResultPoints(),et.UPC_A);return n.getResultMetadata()!=null&&i.putAllMetadata(n.getResultMetadata()),i}else throw new _e},e.prototype.reset=function(){this.ean13Reader.reset()},e}(Er),LU=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),BU=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},SI=function(t){LU(e,t);function e(){var n=t.call(this)||this;return n.decodeMiddleCounters=new Int32Array(4),n}return e.prototype.decodeMiddle=function(n,r,i){var a,s,o=this.decodeMiddleCounters.map(function(A){return A});o[0]=0,o[1]=0,o[2]=0,o[3]=0;for(var c=n.getSize(),d=r[1],f=0,p=0;p<6&&d<c;p++){var g=e.decodeDigit(n,o,d,e.L_AND_G_PATTERNS);i+=String.fromCharCode(48+g%10);try{for(var y=(a=void 0,BU(o)),x=y.next();!x.done;x=y.next()){var _=x.value;d+=_}}catch(A){a={error:A}}finally{try{x&&!x.done&&(s=y.return)&&s.call(y)}finally{if(a)throw a.error}}g>=10&&(f|=1<<5-p)}return e.determineNumSysAndCheckDigit(new At(i),f),d},e.prototype.decodeEnd=function(n,r){return e.findGuardPatternWithoutCounters(n,r,!0,e.MIDDLE_END_PATTERN)},e.prototype.checkChecksum=function(n){return Er.checkChecksum(e.convertUPCEtoUPCA(n))},e.determineNumSysAndCheckDigit=function(n,r){for(var i=0;i<=1;i++)for(var a=0;a<10;a++)if(r===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[i][a]){n.insert(0,"0"+i),n.append("0"+a);return}throw _e.getNotFoundInstance()},e.prototype.getBarcodeFormat=function(){return et.UPC_E},e.convertUPCEtoUPCA=function(n){var r=n.slice(1,7).split("").map(function(s){return s.charCodeAt(0)}),i=new At;i.append(n.charAt(0));var a=r[5];switch(a){case 0:case 1:case 2:i.appendChars(r,0,2),i.append(a),i.append("0000"),i.appendChars(r,2,3);break;case 3:i.appendChars(r,0,3),i.append("00000"),i.appendChars(r,3,2);break;case 4:i.appendChars(r,0,4),i.append("00000"),i.append(r[4]);break;default:i.appendChars(r,0,5),i.append("0000"),i.append(a);break}return n.length>=8&&i.append(n.charAt(7)),i.toString()},e.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),e.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,1])],e}(Er),FU=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),TI=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},jx=function(t){FU(e,t);function e(n){var r=t.call(this)||this,i=n==null?null:n.get(Ln.POSSIBLE_FORMATS),a=[];return i!=null&&(i.indexOf(et.EAN_13)>-1&&a.push(new sw),i.indexOf(et.UPC_A)>-1&&a.push(new EI),i.indexOf(et.EAN_8)>-1&&a.push(new AI),i.indexOf(et.UPC_E)>-1&&a.push(new SI)),a.length===0&&(a.push(new sw),a.push(new EI),a.push(new AI),a.push(new SI)),r.readers=a,r}return e.prototype.decodeRow=function(n,r,i){var a,s;try{for(var o=TI(this.readers),c=o.next();!c.done;c=o.next()){var d=c.value;try{var f=d.decodeRow(n,r,i),p=f.getBarcodeFormat()===et.EAN_13&&f.getText().charAt(0)==="0",g=i==null?null:i.get(Ln.POSSIBLE_FORMATS),y=g==null||g.includes(et.UPC_A);if(p&&y){var x=f.getRawBytes(),_=new gi(f.getText().substring(1),x,x?x.length:null,f.getResultPoints(),et.UPC_A);return _.putAllMetadata(f.getResultMetadata()),_}return f}catch{}}}catch(A){a={error:A}}finally{try{c&&!c.done&&(s=o.return)&&s.call(o)}finally{if(a)throw a.error}}throw new _e},e.prototype.reset=function(){var n,r;try{for(var i=TI(this.readers),a=i.next();!a.done;a=i.next()){var s=a.value;s.reset()}}catch(o){n={error:o}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}},e}(Ir),VU=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),jU=function(t){VU(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.CODA_BAR_CHAR_SET={nnnnnww:"0",nnnnwwn:"1",nnnwnnw:"2",wwnnnnn:"3",nnwnnwn:"4",wnnnnwn:"5",nwnnnnw:"6",nwnnwnn:"7",nwwnnnn:"8",wnnwnnn:"9",nnnwwnn:"-",nnwwnnn:"$",wnnnwnw:":",wnwnnnw:"/",wnwnwnn:".",nnwwwww:"+",nnwwnwn:"A",nwnwnnw:"B",nnnwnww:"C",nnnwwwn:"D"},n}return e.prototype.decodeRow=function(n,r,i){var a=this.getValidRowData(r);if(!a)throw new _e;var s=this.codaBarDecodeRow(a.row);if(!s)throw new _e;return new gi(s,null,0,[new Xe(a.left,n),new Xe(a.right,n)],et.CODABAR,new Date().getTime())},e.prototype.getValidRowData=function(n){var r=n.toArray(),i=r.indexOf(!0);if(i===-1)return null;var a=r.lastIndexOf(!0);if(a<=i)return null;r=r.slice(i,a+1);for(var s=[],o=r[0],c=1,d=1;d<r.length;d++)r[d]===o?c++:(o=r[d],s.push(c),c=1);return s.push(c),s.length<23&&(s.length+1)%8!==0?null:{row:s,left:i,right:a}},e.prototype.codaBarDecodeRow=function(n){for(var r=[],i=Math.ceil(n.reduce(function(c,d){return(c+d)/2},0));n.length>0;){var a=n.splice(0,8).splice(0,7),s=a.map(function(c){return c<i?"n":"w"}).join("");if(this.CODA_BAR_CHAR_SET[s]===void 0)return null;r.push(this.CODA_BAR_CHAR_SET[s])}var o=r.join("");return this.validCodaBarString(o)?o:null},e.prototype.validCodaBarString=function(n){var r=/^[A-D].{1,}[A-D]$/;return r.test(n)},e}(Ir),UU=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),HU=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Tc=function(t){UU(e,t);function e(){var n=t.call(this)||this;return n.decodeFinderCounters=new Int32Array(4),n.dataCharacterCounters=new Int32Array(8),n.oddRoundingErrors=new Array(4),n.evenRoundingErrors=new Array(4),n.oddCounts=new Array(n.dataCharacterCounters.length/2),n.evenCounts=new Array(n.dataCharacterCounters.length/2),n}return e.prototype.getDecodeFinderCounters=function(){return this.decodeFinderCounters},e.prototype.getDataCharacterCounters=function(){return this.dataCharacterCounters},e.prototype.getOddRoundingErrors=function(){return this.oddRoundingErrors},e.prototype.getEvenRoundingErrors=function(){return this.evenRoundingErrors},e.prototype.getOddCounts=function(){return this.oddCounts},e.prototype.getEvenCounts=function(){return this.evenCounts},e.prototype.parseFinderValue=function(n,r){for(var i=0;i<r.length;i++)if(Ir.patternMatchVariance(n,r[i],e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return i;throw new _e},e.count=function(n){return $t.sum(new Int32Array(n))},e.increment=function(n,r){for(var i=0,a=r[0],s=1;s<n.length;s++)r[s]>a&&(a=r[s],i=s);n[i]++},e.decrement=function(n,r){for(var i=0,a=r[0],s=1;s<n.length;s++)r[s]<a&&(a=r[s],i=s);n[i]--},e.isFinderPattern=function(n){var r,i,a=n[0]+n[1],s=a+n[2]+n[3],o=a/s;if(o>=e.MIN_FINDER_PATTERN_RATIO&&o<=e.MAX_FINDER_PATTERN_RATIO){var c=Number.MAX_SAFE_INTEGER,d=Number.MIN_SAFE_INTEGER;try{for(var f=HU(n),p=f.next();!p.done;p=f.next()){var g=p.value;g>d&&(d=g),g<c&&(c=g)}}catch(y){r={error:y}}finally{try{p&&!p.done&&(i=f.return)&&i.call(f)}finally{if(r)throw r.error}}return d<10*c}return!1},e.MAX_AVG_VARIANCE=.2,e.MAX_INDIVIDUAL_VARIANCE=.45,e.MIN_FINDER_PATTERN_RATIO=9.5/12,e.MAX_FINDER_PATTERN_RATIO=12.5/14,e}(Ir),Vm=function(){function t(e,n){this.value=e,this.checksumPortion=n}return t.prototype.getValue=function(){return this.value},t.prototype.getChecksumPortion=function(){return this.checksumPortion},t.prototype.toString=function(){return this.value+"("+this.checksumPortion+")"},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var n=e;return this.value===n.value&&this.checksumPortion===n.checksumPortion},t.prototype.hashCode=function(){return this.value^this.checksumPortion},t}(),FM=function(){function t(e,n,r,i,a){this.value=e,this.startEnd=n,this.value=e,this.startEnd=n,this.resultPoints=new Array,this.resultPoints.push(new Xe(r,a)),this.resultPoints.push(new Xe(i,a))}return t.prototype.getValue=function(){return this.value},t.prototype.getStartEnd=function(){return this.startEnd},t.prototype.getResultPoints=function(){return this.resultPoints},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var n=e;return this.value===n.value},t.prototype.hashCode=function(){return this.value},t}(),zU=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},yd=function(){function t(){}return t.getRSSvalue=function(e,n,r){var i,a,s=0;try{for(var o=zU(e),c=o.next();!c.done;c=o.next()){var d=c.value;s+=d}}catch(T){i={error:T}}finally{try{c&&!c.done&&(a=o.return)&&a.call(o)}finally{if(i)throw i.error}}for(var f=0,p=0,g=e.length,y=0;y<g-1;y++){var x=void 0;for(x=1,p|=1<<y;x<e[y];x++,p&=~(1<<y)){var _=t.combins(s-x-1,g-y-2);if(r&&p===0&&s-x-(g-y-1)>=g-y-1&&(_-=t.combins(s-x-(g-y),g-y-2)),g-y-1>1){for(var A=0,E=s-x-(g-y-2);E>n;E--)A+=t.combins(s-x-E-1,g-y-3);_-=A*(g-1-y)}else s-x>n&&_--;f+=_}s-=x}return f},t.combins=function(e,n){var r,i;e-n>n?(i=n,r=e-n):(i=e-n,r=n);for(var a=1,s=1,o=e;o>r;o--)a*=o,s<=i&&(a/=s,s++);for(;s<=i;)a/=s,s++;return a},t}(),$U=function(){function t(){}return t.buildBitArray=function(e){var n=e.length*2-1;e[e.length-1].getRightChar()==null&&(n-=1);for(var r=12*n,i=new Ur(r),a=0,s=e[0],o=s.getRightChar().getValue(),c=11;c>=0;--c)(o&1<<c)!==0&&i.set(a),a++;for(var c=1;c<e.length;++c){for(var d=e[c],f=d.getLeftChar().getValue(),p=11;p>=0;--p)(f&1<<p)!==0&&i.set(a),a++;if(d.getRightChar()!==null)for(var g=d.getRightChar().getValue(),p=11;p>=0;--p)(g&1<<p)!==0&&i.set(a),a++}return i},t}(),wc=function(){function t(e,n){n?this.decodedInformation=null:(this.finished=e,this.decodedInformation=n)}return t.prototype.getDecodedInformation=function(){return this.decodedInformation},t.prototype.isFinished=function(){return this.finished},t}(),Q_=function(){function t(e){this.newPosition=e}return t.prototype.getNewPosition=function(){return this.newPosition},t}(),GU=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ma=function(t){GU(e,t);function e(n,r){var i=t.call(this,n)||this;return i.value=r,i}return e.prototype.getValue=function(){return this.value},e.prototype.isFNC1=function(){return this.value===e.FNC1},e.FNC1="$",e}(Q_),WU=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),_c=function(t){WU(e,t);function e(n,r,i){var a=t.call(this,n)||this;return i?(a.remaining=!0,a.remainingValue=a.remainingValue):(a.remaining=!1,a.remainingValue=0),a.newString=r,a}return e.prototype.getNewString=function(){return this.newString},e.prototype.isRemaining=function(){return this.remaining},e.prototype.getRemainingValue=function(){return this.remainingValue},e}(Q_),YU=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),ed=function(t){YU(e,t);function e(n,r,i){var a=t.call(this,n)||this;if(r<0||r>10||i<0||i>10)throw new je;return a.firstDigit=r,a.secondDigit=i,a}return e.prototype.getFirstDigit=function(){return this.firstDigit},e.prototype.getSecondDigit=function(){return this.secondDigit},e.prototype.getValue=function(){return this.firstDigit*10+this.secondDigit},e.prototype.isFirstDigitFNC1=function(){return this.firstDigit===e.FNC1},e.prototype.isSecondDigitFNC1=function(){return this.secondDigit===e.FNC1},e.prototype.isAnyFNC1=function(){return this.firstDigit===e.FNC1||this.secondDigit===e.FNC1},e.FNC1=10,e}(Q_),Ng=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},qU=function(){function t(){}return t.parseFieldsInGeneralPurpose=function(e){var n,r,i,a,s,o,c,d;if(!e)return null;if(e.length<2)throw new _e;var f=e.substring(0,2);try{for(var p=Ng(t.TWO_DIGIT_DATA_LENGTH),g=p.next();!g.done;g=p.next()){var y=g.value;if(y[0]===f)return y[1]===t.VARIABLE_LENGTH?t.processVariableAI(2,y[2],e):t.processFixedAI(2,y[1],e)}}catch(B){n={error:B}}finally{try{g&&!g.done&&(r=p.return)&&r.call(p)}finally{if(n)throw n.error}}if(e.length<3)throw new _e;var x=e.substring(0,3);try{for(var _=Ng(t.THREE_DIGIT_DATA_LENGTH),A=_.next();!A.done;A=_.next()){var y=A.value;if(y[0]===x)return y[1]===t.VARIABLE_LENGTH?t.processVariableAI(3,y[2],e):t.processFixedAI(3,y[1],e)}}catch(B){i={error:B}}finally{try{A&&!A.done&&(a=_.return)&&a.call(_)}finally{if(i)throw i.error}}try{for(var E=Ng(t.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH),T=E.next();!T.done;T=E.next()){var y=T.value;if(y[0]===x)return y[1]===t.VARIABLE_LENGTH?t.processVariableAI(4,y[2],e):t.processFixedAI(4,y[1],e)}}catch(B){s={error:B}}finally{try{T&&!T.done&&(o=E.return)&&o.call(E)}finally{if(s)throw s.error}}if(e.length<4)throw new _e;var C=e.substring(0,4);try{for(var D=Ng(t.FOUR_DIGIT_DATA_LENGTH),k=D.next();!k.done;k=D.next()){var y=k.value;if(y[0]===C)return y[1]===t.VARIABLE_LENGTH?t.processVariableAI(4,y[2],e):t.processFixedAI(4,y[1],e)}}catch(B){c={error:B}}finally{try{k&&!k.done&&(d=D.return)&&d.call(D)}finally{if(c)throw c.error}}throw new _e},t.processFixedAI=function(e,n,r){if(r.length<e)throw new _e;var i=r.substring(0,e);if(r.length<e+n)throw new _e;var a=r.substring(e,e+n),s=r.substring(e+n),o="("+i+")"+a,c=t.parseFieldsInGeneralPurpose(s);return c==null?o:o+c},t.processVariableAI=function(e,n,r){var i=r.substring(0,e),a;r.length<e+n?a=r.length:a=e+n;var s=r.substring(e,a),o=r.substring(a),c="("+i+")"+s,d=t.parseFieldsInGeneralPurpose(o);return d==null?c:c+d},t.VARIABLE_LENGTH=[],t.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",t.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",t.VARIABLE_LENGTH,20],["22",t.VARIABLE_LENGTH,29],["30",t.VARIABLE_LENGTH,8],["37",t.VARIABLE_LENGTH,8],["90",t.VARIABLE_LENGTH,30],["91",t.VARIABLE_LENGTH,30],["92",t.VARIABLE_LENGTH,30],["93",t.VARIABLE_LENGTH,30],["94",t.VARIABLE_LENGTH,30],["95",t.VARIABLE_LENGTH,30],["96",t.VARIABLE_LENGTH,30],["97",t.VARIABLE_LENGTH,3],["98",t.VARIABLE_LENGTH,30],["99",t.VARIABLE_LENGTH,30]],t.THREE_DIGIT_DATA_LENGTH=[["240",t.VARIABLE_LENGTH,30],["241",t.VARIABLE_LENGTH,30],["242",t.VARIABLE_LENGTH,6],["250",t.VARIABLE_LENGTH,30],["251",t.VARIABLE_LENGTH,30],["253",t.VARIABLE_LENGTH,17],["254",t.VARIABLE_LENGTH,20],["400",t.VARIABLE_LENGTH,30],["401",t.VARIABLE_LENGTH,30],["402",17],["403",t.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",t.VARIABLE_LENGTH,20],["421",t.VARIABLE_LENGTH,15],["422",3],["423",t.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],t.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",t.VARIABLE_LENGTH,15],["391",t.VARIABLE_LENGTH,18],["392",t.VARIABLE_LENGTH,15],["393",t.VARIABLE_LENGTH,18],["703",t.VARIABLE_LENGTH,30]],t.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",t.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",t.VARIABLE_LENGTH,20],["8003",t.VARIABLE_LENGTH,30],["8004",t.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",t.VARIABLE_LENGTH,30],["8008",t.VARIABLE_LENGTH,12],["8018",18],["8020",t.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",t.VARIABLE_LENGTH,70],["8200",t.VARIABLE_LENGTH,70]],t}(),fm=function(){function t(e){this.buffer=new At,this.information=e}return t.prototype.decodeAllCodes=function(e,n){var r=n,i=null;do{var a=this.decodeGeneralPurposeField(r,i),s=qU.parseFieldsInGeneralPurpose(a.getNewString());if(s!=null&&e.append(s),a.isRemaining()?i=""+a.getRemainingValue():i=null,r===a.getNewPosition())break;r=a.getNewPosition()}while(!0);return e.toString()},t.prototype.isStillNumeric=function(e){if(e+7>this.information.getSize())return e+4<=this.information.getSize();for(var n=e;n<e+3;++n)if(this.information.get(n))return!0;return this.information.get(e+3)},t.prototype.decodeNumeric=function(e){if(e+7>this.information.getSize()){var n=this.extractNumericValueFromBitArray(e,4);return n===0?new ed(this.information.getSize(),ed.FNC1,ed.FNC1):new ed(this.information.getSize(),n-1,ed.FNC1)}var r=this.extractNumericValueFromBitArray(e,7),i=(r-8)/11,a=(r-8)%11;return new ed(e+7,i,a)},t.prototype.extractNumericValueFromBitArray=function(e,n){return t.extractNumericValueFromBitArray(this.information,e,n)},t.extractNumericValueFromBitArray=function(e,n,r){for(var i=0,a=0;a<r;++a)e.get(n+a)&&(i|=1<<r-a-1);return i},t.prototype.decodeGeneralPurposeField=function(e,n){this.buffer.setLengthToZero(),n!=null&&this.buffer.append(n),this.current.setPosition(e);var r=this.parseBlocks();return r!=null&&r.isRemaining()?new _c(this.current.getPosition(),this.buffer.toString(),r.getRemainingValue()):new _c(this.current.getPosition(),this.buffer.toString())},t.prototype.parseBlocks=function(){var e,n;do{var r=this.current.getPosition();this.current.isAlpha()?(n=this.parseAlphaBlock(),e=n.isFinished()):this.current.isIsoIec646()?(n=this.parseIsoIec646Block(),e=n.isFinished()):(n=this.parseNumericBlock(),e=n.isFinished());var i=r!==this.current.getPosition();if(!i&&!e)break}while(!e);return n.getDecodedInformation()},t.prototype.parseNumericBlock=function(){for(;this.isStillNumeric(this.current.getPosition());){var e=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFirstDigitFNC1()){var n=void 0;return e.isSecondDigitFNC1()?n=new _c(this.current.getPosition(),this.buffer.toString()):n=new _c(this.current.getPosition(),this.buffer.toString(),e.getSecondDigit()),new wc(!0,n)}if(this.buffer.append(e.getFirstDigit()),e.isSecondDigitFNC1()){var n=new _c(this.current.getPosition(),this.buffer.toString());return new wc(!0,n)}this.buffer.append(e.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new wc(!1)},t.prototype.parseIsoIec646Block=function(){for(;this.isStillIsoIec646(this.current.getPosition());){var e=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){var n=new _c(this.current.getPosition(),this.buffer.toString());return new wc(!0,n)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new wc(!1)},t.prototype.parseAlphaBlock=function(){for(;this.isStillAlpha(this.current.getPosition());){var e=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){var n=new _c(this.current.getPosition(),this.buffer.toString());return new wc(!0,n)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new wc(!1)},t.prototype.isStillIsoIec646=function(e){if(e+5>this.information.getSize())return!1;var n=this.extractNumericValueFromBitArray(e,5);if(n>=5&&n<16)return!0;if(e+7>this.information.getSize())return!1;var r=this.extractNumericValueFromBitArray(e,7);if(r>=64&&r<116)return!0;if(e+8>this.information.getSize())return!1;var i=this.extractNumericValueFromBitArray(e,8);return i>=232&&i<253},t.prototype.decodeIsoIec646=function(e){var n=this.extractNumericValueFromBitArray(e,5);if(n===15)return new Ma(e+5,Ma.FNC1);if(n>=5&&n<15)return new Ma(e+5,"0"+(n-5));var r=this.extractNumericValueFromBitArray(e,7);if(r>=64&&r<90)return new Ma(e+7,""+(r+1));if(r>=90&&r<116)return new Ma(e+7,""+(r+7));var i=this.extractNumericValueFromBitArray(e,8),a;switch(i){case 232:a="!";break;case 233:a='"';break;case 234:a="%";break;case 235:a="&";break;case 236:a="'";break;case 237:a="(";break;case 238:a=")";break;case 239:a="*";break;case 240:a="+";break;case 241:a=",";break;case 242:a="-";break;case 243:a=".";break;case 244:a="/";break;case 245:a=":";break;case 246:a=";";break;case 247:a="<";break;case 248:a="=";break;case 249:a=">";break;case 250:a="?";break;case 251:a="_";break;case 252:a=" ";break;default:throw new je}return new Ma(e+8,a)},t.prototype.isStillAlpha=function(e){if(e+5>this.information.getSize())return!1;var n=this.extractNumericValueFromBitArray(e,5);if(n>=5&&n<16)return!0;if(e+6>this.information.getSize())return!1;var r=this.extractNumericValueFromBitArray(e,6);return r>=16&&r<63},t.prototype.decodeAlphanumeric=function(e){var n=this.extractNumericValueFromBitArray(e,5);if(n===15)return new Ma(e+5,Ma.FNC1);if(n>=5&&n<15)return new Ma(e+5,"0"+(n-5));var r=this.extractNumericValueFromBitArray(e,6);if(r>=32&&r<58)return new Ma(e+6,""+(r+33));var i;switch(r){case 58:i="*";break;case 59:i=",";break;case 60:i="-";break;case 61:i=".";break;case 62:i="/";break;default:throw new W0("Decoding invalid alphanumeric value: "+r)}return new Ma(e+6,i)},t.prototype.isAlphaTo646ToAlphaLatch=function(e){if(e+1>this.information.getSize())return!1;for(var n=0;n<5&&n+e<this.information.getSize();++n)if(n===2){if(!this.information.get(e+2))return!1}else if(this.information.get(e+n))return!1;return!0},t.prototype.isAlphaOr646ToNumericLatch=function(e){if(e+3>this.information.getSize())return!1;for(var n=e;n<e+3;++n)if(this.information.get(n))return!1;return!0},t.prototype.isNumericToAlphaNumericLatch=function(e){if(e+1>this.information.getSize())return!1;for(var n=0;n<4&&n+e<this.information.getSize();++n)if(this.information.get(e+n))return!1;return!0},t}(),VM=function(){function t(e){this.information=e,this.generalDecoder=new fm(e)}return t.prototype.getInformation=function(){return this.information},t.prototype.getGeneralDecoder=function(){return this.generalDecoder},t}(),XU=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Fa=function(t){XU(e,t);function e(n){return t.call(this,n)||this}return e.prototype.encodeCompressedGtin=function(n,r){n.append("(01)");var i=n.length();n.append("9"),this.encodeCompressedGtinWithoutAI(n,r,i)},e.prototype.encodeCompressedGtinWithoutAI=function(n,r,i){for(var a=0;a<4;++a){var s=this.getGeneralDecoder().extractNumericValueFromBitArray(r+10*a,10);s/100===0&&n.append("0"),s/10===0&&n.append("0"),n.append(s)}e.appendCheckDigit(n,i)},e.appendCheckDigit=function(n,r){for(var i=0,a=0;a<13;a++){var s=n.charAt(a+r).charCodeAt(0)-48;i+=(a&1)===0?3*s:s}i=10-i%10,i===10&&(i=0),n.append(i)},e.GTIN_SIZE=40,e}(VM),KU=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),QU=function(t){KU(e,t);function e(n){return t.call(this,n)||this}return e.prototype.parseInformation=function(){var n=new At;n.append("(01)");var r=n.length(),i=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE,4);return n.append(i),this.encodeCompressedGtinWithoutAI(n,e.HEADER_SIZE+4,r),this.getGeneralDecoder().decodeAllCodes(n,e.HEADER_SIZE+44)},e.HEADER_SIZE=4,e}(Fa),ZU=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),JU=function(t){ZU(e,t);function e(n){return t.call(this,n)||this}return e.prototype.parseInformation=function(){var n=new At;return this.getGeneralDecoder().decodeAllCodes(n,e.HEADER_SIZE)},e.HEADER_SIZE=5,e}(VM),eH=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),hm=function(t){eH(e,t);function e(n){return t.call(this,n)||this}return e.prototype.encodeCompressedWeight=function(n,r,i){var a=this.getGeneralDecoder().extractNumericValueFromBitArray(r,i);this.addWeightCode(n,a);for(var s=this.checkWeight(a),o=1e5,c=0;c<5;++c)s/o===0&&n.append("0"),o/=10;n.append(s)},e}(Fa),tH=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),jM=function(t){tH(e,t);function e(n){return t.call(this,n)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()!==e.HEADER_SIZE+hm.GTIN_SIZE+e.WEIGHT_SIZE)throw new _e;var n=new At;return this.encodeCompressedGtin(n,e.HEADER_SIZE),this.encodeCompressedWeight(n,e.HEADER_SIZE+hm.GTIN_SIZE,e.WEIGHT_SIZE),n.toString()},e.HEADER_SIZE=5,e.WEIGHT_SIZE=15,e}(hm),nH=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),rH=function(t){nH(e,t);function e(n){return t.call(this,n)||this}return e.prototype.addWeightCode=function(n,r){n.append("(3103)")},e.prototype.checkWeight=function(n){return n},e}(jM),iH=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),aH=function(t){iH(e,t);function e(n){return t.call(this,n)||this}return e.prototype.addWeightCode=function(n,r){r<1e4?n.append("(3202)"):n.append("(3203)")},e.prototype.checkWeight=function(n){return n<1e4?n:n-1e4},e}(jM),sH=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),oH=function(t){sH(e,t);function e(n){return t.call(this,n)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()<e.HEADER_SIZE+Fa.GTIN_SIZE)throw new _e;var n=new At;this.encodeCompressedGtin(n,e.HEADER_SIZE);var r=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+Fa.GTIN_SIZE,e.LAST_DIGIT_SIZE);n.append("(392"),n.append(r),n.append(")");var i=this.getGeneralDecoder().decodeGeneralPurposeField(e.HEADER_SIZE+Fa.GTIN_SIZE+e.LAST_DIGIT_SIZE,null);return n.append(i.getNewString()),n.toString()},e.HEADER_SIZE=8,e.LAST_DIGIT_SIZE=2,e}(Fa),lH=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),cH=function(t){lH(e,t);function e(n){return t.call(this,n)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()<e.HEADER_SIZE+Fa.GTIN_SIZE)throw new _e;var n=new At;this.encodeCompressedGtin(n,e.HEADER_SIZE);var r=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+Fa.GTIN_SIZE,e.LAST_DIGIT_SIZE);n.append("(393"),n.append(r),n.append(")");var i=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+Fa.GTIN_SIZE+e.LAST_DIGIT_SIZE,e.FIRST_THREE_DIGITS_SIZE);i/100===0&&n.append("0"),i/10===0&&n.append("0"),n.append(i);var a=this.getGeneralDecoder().decodeGeneralPurposeField(e.HEADER_SIZE+Fa.GTIN_SIZE+e.LAST_DIGIT_SIZE+e.FIRST_THREE_DIGITS_SIZE,null);return n.append(a.getNewString()),n.toString()},e.HEADER_SIZE=8,e.LAST_DIGIT_SIZE=2,e.FIRST_THREE_DIGITS_SIZE=10,e}(Fa),uH=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),ol=function(t){uH(e,t);function e(n,r,i){var a=t.call(this,n)||this;return a.dateCode=i,a.firstAIdigits=r,a}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()!==e.HEADER_SIZE+e.GTIN_SIZE+e.WEIGHT_SIZE+e.DATE_SIZE)throw new _e;var n=new At;return this.encodeCompressedGtin(n,e.HEADER_SIZE),this.encodeCompressedWeight(n,e.HEADER_SIZE+e.GTIN_SIZE,e.WEIGHT_SIZE),this.encodeCompressedDate(n,e.HEADER_SIZE+e.GTIN_SIZE+e.WEIGHT_SIZE),n.toString()},e.prototype.encodeCompressedDate=function(n,r){var i=this.getGeneralDecoder().extractNumericValueFromBitArray(r,e.DATE_SIZE);if(i!==38400){n.append("("),n.append(this.dateCode),n.append(")");var a=i%32;i/=32;var s=i%12+1;i/=12;var o=i;o/10===0&&n.append("0"),n.append(o),s/10===0&&n.append("0"),n.append(s),a/10===0&&n.append("0"),n.append(a)}},e.prototype.addWeightCode=function(n,r){n.append("("),n.append(this.firstAIdigits),n.append(r/1e5),n.append(")")},e.prototype.checkWeight=function(n){return n%1e5},e.HEADER_SIZE=8,e.WEIGHT_SIZE=20,e.DATE_SIZE=16,e}(hm);function dH(t){try{if(t.get(1))return new QU(t);if(!t.get(2))return new JU(t);var e=fm.extractNumericValueFromBitArray(t,1,4);switch(e){case 4:return new rH(t);case 5:return new aH(t)}var n=fm.extractNumericValueFromBitArray(t,1,5);switch(n){case 12:return new oH(t);case 13:return new cH(t)}var r=fm.extractNumericValueFromBitArray(t,1,7);switch(r){case 56:return new ol(t,"310","11");case 57:return new ol(t,"320","11");case 58:return new ol(t,"310","13");case 59:return new ol(t,"320","13");case 60:return new ol(t,"310","15");case 61:return new ol(t,"320","15");case 62:return new ol(t,"310","17");case 63:return new ol(t,"320","17")}}catch(i){throw console.log(i),new W0("unknown decoder: "+t)}}var CI=function(){function t(e,n,r,i){this.leftchar=e,this.rightchar=n,this.finderpattern=r,this.maybeLast=i}return t.prototype.mayBeLast=function(){return this.maybeLast},t.prototype.getLeftChar=function(){return this.leftchar},t.prototype.getRightChar=function(){return this.rightchar},t.prototype.getFinderPattern=function(){return this.finderpattern},t.prototype.mustBeLast=function(){return this.rightchar==null},t.prototype.toString=function(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"},t.equals=function(e,n){return e instanceof t?t.equalsOrNull(e.leftchar,n.leftchar)&&t.equalsOrNull(e.rightchar,n.rightchar)&&t.equalsOrNull(e.finderpattern,n.finderpattern):!1},t.equalsOrNull=function(e,n){return e===null?n===null:t.equals(e,n)},t.prototype.hashCode=function(){var e=this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue();return e},t}(),fH=function(){function t(e,n,r){this.pairs=e,this.rowNumber=n,this.wasReversed=r}return t.prototype.getPairs=function(){return this.pairs},t.prototype.getRowNumber=function(){return this.rowNumber},t.prototype.isReversed=function(){return this.wasReversed},t.prototype.isEquivalent=function(e){return this.checkEqualitity(this,e)},t.prototype.toString=function(){return"{ "+this.pairs+" }"},t.prototype.equals=function(e,n){return e instanceof t?this.checkEqualitity(e,n)&&e.wasReversed===n.wasReversed:!1},t.prototype.checkEqualitity=function(e,n){if(!(!e||!n)){var r;return e.forEach(function(i,a){n.forEach(function(s){i.getLeftChar().getValue()===s.getLeftChar().getValue()&&i.getRightChar().getValue()===s.getRightChar().getValue()&&i.getFinderPatter().getValue()===s.getFinderPatter().getValue()&&(r=!0)})}),r}},t}(),hH=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),ll=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},pH=function(t){hH(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.pairs=new Array(e.MAX_PAIRS),n.rows=new Array,n.startEnd=[2],n}return e.prototype.decodeRow=function(n,r,i){this.pairs.length=0,this.startFromEven=!1;try{return e.constructResult(this.decodeRow2pairs(n,r))}catch{}return this.pairs.length=0,this.startFromEven=!0,e.constructResult(this.decodeRow2pairs(n,r))},e.prototype.reset=function(){this.pairs.length=0,this.rows.length=0},e.prototype.decodeRow2pairs=function(n,r){for(var i=!1;!i;)try{this.pairs.push(this.retrieveNextPair(r,this.pairs,n))}catch(o){if(o instanceof _e){if(!this.pairs.length)throw new _e;i=!0}}if(this.checkChecksum())return this.pairs;var a;if(this.rows.length?a=!0:a=!1,this.storeRow(n,!1),a){var s=this.checkRowsBoolean(!1);if(s!=null||(s=this.checkRowsBoolean(!0),s!=null))return s}throw new _e},e.prototype.checkRowsBoolean=function(n){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,n&&(this.rows=this.rows.reverse());var r=null;try{r=this.checkRows(new Array,0)}catch(i){console.log(i)}return n&&(this.rows=this.rows.reverse()),r},e.prototype.checkRows=function(n,r){for(var i,a,s=r;s<this.rows.length;s++){var o=this.rows[s];this.pairs.length=0;try{for(var c=(i=void 0,ll(n)),d=c.next();!d.done;d=c.next()){var f=d.value;this.pairs.push(f.getPairs())}}catch(g){i={error:g}}finally{try{d&&!d.done&&(a=c.return)&&a.call(c)}finally{if(i)throw i.error}}if(this.pairs.push(o.getPairs()),!!e.isValidSequence(this.pairs)){if(this.checkChecksum())return this.pairs;var p=new Array(n);p.push(o);try{return this.checkRows(p,s+1)}catch(g){console.log(g)}}}throw new _e},e.isValidSequence=function(n){var r,i;try{for(var a=ll(e.FINDER_PATTERN_SEQUENCES),s=a.next();!s.done;s=a.next()){var o=s.value;if(!(n.length>o.length)){for(var c=!0,d=0;d<n.length;d++)if(n[d].getFinderPattern().getValue()!==o[d]){c=!1;break}if(c)return!0}}}catch(f){r={error:f}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}return!1},e.prototype.storeRow=function(n,r){for(var i=0,a=!1,s=!1;i<this.rows.length;){var o=this.rows[i];if(o.getRowNumber()>n){s=o.isEquivalent(this.pairs);break}a=o.isEquivalent(this.pairs),i++}s||a||e.isPartialRow(this.pairs,this.rows)||(this.rows.push(i,new fH(this.pairs,n,r)),this.removePartialRows(this.pairs,this.rows))},e.prototype.removePartialRows=function(n,r){var i,a,s,o,c,d;try{for(var f=ll(r),p=f.next();!p.done;p=f.next()){var g=p.value;if(g.getPairs().length!==n.length){var y=!0;try{for(var x=(s=void 0,ll(g.getPairs())),_=x.next();!_.done;_=x.next()){var A=_.value,E=!1;try{for(var T=(c=void 0,ll(n)),C=T.next();!C.done;C=T.next()){var D=C.value;if(CI.equals(A,D)){E=!0;break}}}catch(k){c={error:k}}finally{try{C&&!C.done&&(d=T.return)&&d.call(T)}finally{if(c)throw c.error}}E||(y=!1)}}catch(k){s={error:k}}finally{try{_&&!_.done&&(o=x.return)&&o.call(x)}finally{if(s)throw s.error}}}}}catch(k){i={error:k}}finally{try{p&&!p.done&&(a=f.return)&&a.call(f)}finally{if(i)throw i.error}}},e.isPartialRow=function(n,r){var i,a,s,o,c,d;try{for(var f=ll(r),p=f.next();!p.done;p=f.next()){var g=p.value,y=!0;try{for(var x=(s=void 0,ll(n)),_=x.next();!_.done;_=x.next()){var A=_.value,E=!1;try{for(var T=(c=void 0,ll(g.getPairs())),C=T.next();!C.done;C=T.next()){var D=C.value;if(A.equals(D)){E=!0;break}}}catch(k){c={error:k}}finally{try{C&&!C.done&&(d=T.return)&&d.call(T)}finally{if(c)throw c.error}}if(!E){y=!1;break}}}catch(k){s={error:k}}finally{try{_&&!_.done&&(o=x.return)&&o.call(x)}finally{if(s)throw s.error}}if(y)return!0}}catch(k){i={error:k}}finally{try{p&&!p.done&&(a=f.return)&&a.call(f)}finally{if(i)throw i.error}}return!1},e.prototype.getRows=function(){return this.rows},e.constructResult=function(n){var r=$U.buildBitArray(n),i=dH(r),a=i.parseInformation(),s=n[0].getFinderPattern().getResultPoints(),o=n[n.length-1].getFinderPattern().getResultPoints(),c=[s[0],s[1],o[0],o[1]];return new gi(a,null,null,c,et.RSS_EXPANDED,null)},e.prototype.checkChecksum=function(){var n=this.pairs.get(0),r=n.getLeftChar(),i=n.getRightChar();if(i===null)return!1;for(var a=i.getChecksumPortion(),s=2,o=1;o<this.pairs.size();++o){var c=this.pairs.get(o);a+=c.getLeftChar().getChecksumPortion(),s++;var d=c.getRightChar();d!=null&&(a+=d.getChecksumPortion(),s++)}a%=211;var f=211*(s-4)+a;return f===r.getValue()},e.getNextSecondBar=function(n,r){var i;return n.get(r)?(i=n.getNextUnset(r),i=n.getNextSet(i)):(i=n.getNextSet(r),i=n.getNextUnset(i)),i},e.prototype.retrieveNextPair=function(n,r,i){var a=r.length%2===0;this.startFromEven&&(a=!a);var s,o=!0,c=-1;do this.findNextPair(n,r,c),s=this.parseFoundFinderPattern(n,i,a),s===null?c=e.getNextSecondBar(n,this.startEnd[0]):o=!1;while(o);var d=this.decodeDataCharacter(n,s,a,!0);if(!this.isEmptyPair(r)&&r[r.length-1].mustBeLast())throw new _e;var f;try{f=this.decodeDataCharacter(n,s,a,!1)}catch(p){f=null,console.log(p)}return new CI(d,f,s,!0)},e.prototype.isEmptyPair=function(n){return n.length===0},e.prototype.findNextPair=function(n,r,i){var a=this.getDecodeFinderCounters();a[0]=0,a[1]=0,a[2]=0,a[3]=0;var s=n.getSize(),o;if(i>=0)o=i;else if(this.isEmptyPair(r))o=0;else{var c=r[r.length-1];o=c.getFinderPattern().getStartEnd()[1]}var d=r.length%2!==0;this.startFromEven&&(d=!d);for(var f=!1;o<s&&(f=!n.get(o),!!f);)o++;for(var p=0,g=o,y=o;y<s;y++)if(n.get(y)!==f)a[p]++;else{if(p===3){if(d&&e.reverseCounters(a),e.isFinderPattern(a)){this.startEnd[0]=g,this.startEnd[1]=y;return}d&&e.reverseCounters(a),g+=a[0]+a[1],a[0]=a[2],a[1]=a[3],a[2]=0,a[3]=0,p--}else p++;a[p]=1,f=!f}throw new _e},e.reverseCounters=function(n){for(var r=n.length,i=0;i<r/2;++i){var a=n[i];n[i]=n[r-i-1],n[r-i-1]=a}},e.prototype.parseFoundFinderPattern=function(n,r,i){var a,s,o;if(i){for(var c=this.startEnd[0]-1;c>=0&&!n.get(c);)c--;c++,a=this.startEnd[0]-c,s=c,o=this.startEnd[1]}else s=this.startEnd[0],o=n.getNextUnset(this.startEnd[1]+1),a=o-this.startEnd[1];var d=this.getDecodeFinderCounters();Sn.arraycopy(d,0,d,1,d.length-1),d[0]=a;var f;try{f=this.parseFinderValue(d,e.FINDER_PATTERNS)}catch{return null}return new FM(f,[s,o],s,o,r)},e.prototype.decodeDataCharacter=function(n,r,i,a){for(var s=this.getDataCharacterCounters(),o=0;o<s.length;o++)s[o]=0;if(a)e.recordPatternInReverse(n,r.getStartEnd()[0],s);else{e.recordPattern(n,r.getStartEnd()[1],s);for(var c=0,d=s.length-1;c<d;c++,d--){var f=s[c];s[c]=s[d],s[d]=f}}var p=17,g=$t.sum(new Int32Array(s))/p,y=(r.getStartEnd()[1]-r.getStartEnd()[0])/15;if(Math.abs(g-y)/y>.3)throw new _e;for(var x=this.getOddCounts(),_=this.getEvenCounts(),A=this.getOddRoundingErrors(),E=this.getEvenRoundingErrors(),c=0;c<s.length;c++){var T=1*s[c]/g,C=T+.5;if(C<1){if(T<.3)throw new _e;C=1}else if(C>8){if(T>8.7)throw new _e;C=8}var D=c/2;(c&1)===0?(x[D]=C,A[D]=T-C):(_[D]=C,E[D]=T-C)}this.adjustOddEvenCounts(p);for(var k=4*r.getValue()+(i?0:2)+(a?0:1)-1,B=0,O=0,c=x.length-1;c>=0;c--){if(e.isNotA1left(r,i,a)){var I=e.WEIGHTS[k][2*c];O+=x[c]*I}B+=x[c]}for(var R=0,c=_.length-1;c>=0;c--)if(e.isNotA1left(r,i,a)){var I=e.WEIGHTS[k][2*c+1];R+=_[c]*I}var V=O+R;if((B&1)!==0||B>13||B<4)throw new _e;var L=(13-B)/2,P=e.SYMBOL_WIDEST[L],F=9-P,q=yd.getRSSvalue(x,P,!0),X=yd.getRSSvalue(_,F,!1),W=e.EVEN_TOTAL_SUBSET[L],G=e.GSUM[L],Q=q*W+X+G;return new Vm(Q,V)},e.isNotA1left=function(n,r,i){return!(n.getValue()===0&&r&&i)},e.prototype.adjustOddEvenCounts=function(n){var r=$t.sum(new Int32Array(this.getOddCounts())),i=$t.sum(new Int32Array(this.getEvenCounts())),a=!1,s=!1;r>13?s=!0:r<4&&(a=!0);var o=!1,c=!1;i>13?c=!0:i<4&&(o=!0);var d=r+i-n,f=(r&1)===1,p=(i&1)===0;if(d===1)if(f){if(p)throw new _e;s=!0}else{if(!p)throw new _e;c=!0}else if(d===-1)if(f){if(p)throw new _e;a=!0}else{if(!p)throw new _e;o=!0}else if(d===0){if(f){if(!p)throw new _e;r<i?(a=!0,c=!0):(s=!0,o=!0)}else if(p)throw new _e}else throw new _e;if(a){if(s)throw new _e;e.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(s&&e.decrement(this.getOddCounts(),this.getOddRoundingErrors()),o){if(c)throw new _e;e.increment(this.getEvenCounts(),this.getOddRoundingErrors())}c&&e.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},e.SYMBOL_WIDEST=[7,5,4,3,1],e.EVEN_TOTAL_SUBSET=[4,20,52,104,204],e.GSUM=[0,348,1388,2948,3988],e.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],e.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],e.FINDER_PAT_A=0,e.FINDER_PAT_B=1,e.FINDER_PAT_C=2,e.FINDER_PAT_D=3,e.FINDER_PAT_E=4,e.FINDER_PAT_F=5,e.FINDER_PATTERN_SEQUENCES=[[e.FINDER_PAT_A,e.FINDER_PAT_A],[e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B],[e.FINDER_PAT_A,e.FINDER_PAT_C,e.FINDER_PAT_B,e.FINDER_PAT_D],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_C],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_D,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_D],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_E],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F]],e.MAX_PAIRS=11,e}(Tc),gH=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),mH=function(t){gH(e,t);function e(n,r,i){var a=t.call(this,n,r)||this;return a.count=0,a.finderPattern=i,a}return e.prototype.getFinderPattern=function(){return this.finderPattern},e.prototype.getCount=function(){return this.count},e.prototype.incrementCount=function(){this.count++},e}(Vm),yH=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ux=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},II=function(t){yH(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.possibleLeftPairs=[],n.possibleRightPairs=[],n}return e.prototype.decodeRow=function(n,r,i){var a,s,o,c,d=this.decodePair(r,!1,n,i);e.addOrTally(this.possibleLeftPairs,d),r.reverse();var f=this.decodePair(r,!0,n,i);e.addOrTally(this.possibleRightPairs,f),r.reverse();try{for(var p=Ux(this.possibleLeftPairs),g=p.next();!g.done;g=p.next()){var y=g.value;if(y.getCount()>1)try{for(var x=(o=void 0,Ux(this.possibleRightPairs)),_=x.next();!_.done;_=x.next()){var A=_.value;if(A.getCount()>1&&e.checkChecksum(y,A))return e.constructResult(y,A)}}catch(E){o={error:E}}finally{try{_&&!_.done&&(c=x.return)&&c.call(x)}finally{if(o)throw o.error}}}}catch(E){a={error:E}}finally{try{g&&!g.done&&(s=p.return)&&s.call(p)}finally{if(a)throw a.error}}throw new _e},e.addOrTally=function(n,r){var i,a;if(r!=null){var s=!1;try{for(var o=Ux(n),c=o.next();!c.done;c=o.next()){var d=c.value;if(d.getValue()===r.getValue()){d.incrementCount(),s=!0;break}}}catch(f){i={error:f}}finally{try{c&&!c.done&&(a=o.return)&&a.call(o)}finally{if(i)throw i.error}}s||n.push(r)}},e.prototype.reset=function(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0},e.constructResult=function(n,r){for(var i=4537077*n.getValue()+r.getValue(),a=new String(i).toString(),s=new At,o=13-a.length;o>0;o--)s.append("0");s.append(a);for(var c=0,o=0;o<13;o++){var d=s.charAt(o).charCodeAt(0)-48;c+=(o&1)===0?3*d:d}c=10-c%10,c===10&&(c=0),s.append(c.toString());var f=n.getFinderPattern().getResultPoints(),p=r.getFinderPattern().getResultPoints();return new gi(s.toString(),null,0,[f[0],f[1],p[0],p[1]],et.RSS_14,new Date().getTime())},e.checkChecksum=function(n,r){var i=(n.getChecksumPortion()+16*r.getChecksumPortion())%79,a=9*n.getFinderPattern().getValue()+r.getFinderPattern().getValue();return a>72&&a--,a>8&&a--,i===a},e.prototype.decodePair=function(n,r,i,a){try{var s=this.findFinderPattern(n,r),o=this.parseFoundFinderPattern(n,i,r,s),c=a==null?null:a.get(Ln.NEED_RESULT_POINT_CALLBACK);if(c!=null){var d=(s[0]+s[1])/2;r&&(d=n.getSize()-1-d),c.foundPossibleResultPoint(new Xe(d,i))}var f=this.decodeDataCharacter(n,o,!0),p=this.decodeDataCharacter(n,o,!1);return new mH(1597*f.getValue()+p.getValue(),f.getChecksumPortion()+4*p.getChecksumPortion(),o)}catch{return null}},e.prototype.decodeDataCharacter=function(n,r,i){for(var a=this.getDataCharacterCounters(),s=0;s<a.length;s++)a[s]=0;if(i)Ir.recordPatternInReverse(n,r.getStartEnd()[0],a);else{Ir.recordPattern(n,r.getStartEnd()[1]+1,a);for(var o=0,c=a.length-1;o<c;o++,c--){var d=a[o];a[o]=a[c],a[c]=d}}for(var f=i?16:15,p=$t.sum(new Int32Array(a))/f,g=this.getOddCounts(),y=this.getEvenCounts(),x=this.getOddRoundingErrors(),_=this.getEvenRoundingErrors(),o=0;o<a.length;o++){var A=a[o]/p,E=Math.floor(A+.5);E<1?E=1:E>8&&(E=8);var T=Math.floor(o/2);(o&1)===0?(g[T]=E,x[T]=A-E):(y[T]=E,_[T]=A-E)}this.adjustOddEvenCounts(i,f);for(var C=0,D=0,o=g.length-1;o>=0;o--)D*=9,D+=g[o],C+=g[o];for(var k=0,B=0,o=y.length-1;o>=0;o--)k*=9,k+=y[o],B+=y[o];var O=D+3*k;if(i){if((C&1)!==0||C>12||C<4)throw new _e;var I=(12-C)/2,R=e.OUTSIDE_ODD_WIDEST[I],V=9-R,L=yd.getRSSvalue(g,R,!1),P=yd.getRSSvalue(y,V,!0),F=e.OUTSIDE_EVEN_TOTAL_SUBSET[I],q=e.OUTSIDE_GSUM[I];return new Vm(L*F+P+q,O)}else{if((B&1)!==0||B>10||B<4)throw new _e;var I=(10-B)/2,R=e.INSIDE_ODD_WIDEST[I],V=9-R,L=yd.getRSSvalue(g,R,!0),P=yd.getRSSvalue(y,V,!1),X=e.INSIDE_ODD_TOTAL_SUBSET[I],q=e.INSIDE_GSUM[I];return new Vm(P*X+L+q,O)}},e.prototype.findFinderPattern=function(n,r){var i=this.getDecodeFinderCounters();i[0]=0,i[1]=0,i[2]=0,i[3]=0;for(var a=n.getSize(),s=!1,o=0;o<a&&(s=!n.get(o),r!==s);)o++;for(var c=0,d=o,f=o;f<a;f++)if(n.get(f)!==s)i[c]++;else{if(c===3){if(Tc.isFinderPattern(i))return[d,f];d+=i[0]+i[1],i[0]=i[2],i[1]=i[3],i[2]=0,i[3]=0,c--}else c++;i[c]=1,s=!s}throw new _e},e.prototype.parseFoundFinderPattern=function(n,r,i,a){for(var s=n.get(a[0]),o=a[0]-1;o>=0&&s!==n.get(o);)o--;o++;var c=a[0]-o,d=this.getDecodeFinderCounters(),f=new Int32Array(d.length);Sn.arraycopy(d,0,f,1,d.length-1),f[0]=c;var p=this.parseFinderValue(f,e.FINDER_PATTERNS),g=o,y=a[1];return i&&(g=n.getSize()-1-g,y=n.getSize()-1-y),new FM(p,[o,a[1]],g,y,r)},e.prototype.adjustOddEvenCounts=function(n,r){var i=$t.sum(new Int32Array(this.getOddCounts())),a=$t.sum(new Int32Array(this.getEvenCounts())),s=!1,o=!1,c=!1,d=!1;n?(i>12?o=!0:i<4&&(s=!0),a>12?d=!0:a<4&&(c=!0)):(i>11?o=!0:i<5&&(s=!0),a>10?d=!0:a<4&&(c=!0));var f=i+a-r,p=(i&1)===(n?1:0),g=(a&1)===1;if(f===1)if(p){if(g)throw new _e;o=!0}else{if(!g)throw new _e;d=!0}else if(f===-1)if(p){if(g)throw new _e;s=!0}else{if(!g)throw new _e;c=!0}else if(f===0){if(p){if(!g)throw new _e;i<a?(s=!0,d=!0):(o=!0,c=!0)}else if(g)throw new _e}else throw new _e;if(s){if(o)throw new _e;Tc.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(o&&Tc.decrement(this.getOddCounts(),this.getOddRoundingErrors()),c){if(d)throw new _e;Tc.increment(this.getEvenCounts(),this.getOddRoundingErrors())}d&&Tc.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},e.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],e.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],e.OUTSIDE_GSUM=[0,161,961,2015,2715],e.INSIDE_GSUM=[0,336,1036,1516],e.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],e.INSIDE_ODD_WIDEST=[2,4,6,8],e.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])],e}(Tc),vH=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Hh=function(t){vH(e,t);function e(n){var r=t.call(this)||this;r.readers=[];var i=n?n.get(Ln.POSSIBLE_FORMATS):null,a=n&&n.get(Ln.ASSUME_CODE_39_CHECK_DIGIT)!==void 0,s=n&&n.get(Ln.ENABLE_CODE_39_EXTENDED_MODE)!==void 0;return i&&((i.includes(et.EAN_13)||i.includes(et.UPC_A)||i.includes(et.EAN_8)||i.includes(et.UPC_E))&&r.readers.push(new jx(n)),i.includes(et.CODE_39)&&r.readers.push(new vI(a,s)),i.includes(et.CODE_93)&&r.readers.push(new xI),i.includes(et.CODE_128)&&r.readers.push(new yI),i.includes(et.ITF)&&r.readers.push(new wI),i.includes(et.CODABAR)&&r.readers.push(new jU),i.includes(et.RSS_14)&&r.readers.push(new II),i.includes(et.RSS_EXPANDED)&&(console.warn("RSS Expanded reader IS NOT ready for production yet! use at your own risk."),r.readers.push(new pH))),r.readers.length===0&&(r.readers.push(new jx(n)),r.readers.push(new vI),r.readers.push(new xI),r.readers.push(new jx(n)),r.readers.push(new yI),r.readers.push(new wI),r.readers.push(new II)),r}return e.prototype.decodeRow=function(n,r,i){for(var a=0;a<this.readers.length;a++)try{return this.readers[a].decodeRow(n,r,i)}catch{}throw new _e},e.prototype.reset=function(){this.readers.forEach(function(n){return n.reset()})},e}(Ir),xH=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}();(function(t){xH(e,t);function e(n,r){return n===void 0&&(n=500),t.call(this,new Hh(r),n,r)||this}return e})(df);var DI=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},tn=function(){function t(e,n,r){this.ecCodewords=e,this.ecBlocks=[n],r&&this.ecBlocks.push(r)}return t.prototype.getECCodewords=function(){return this.ecCodewords},t.prototype.getECBlocks=function(){return this.ecBlocks},t}(),Xt=function(){function t(e,n){this.count=e,this.dataCodewords=n}return t.prototype.getCount=function(){return this.count},t.prototype.getDataCodewords=function(){return this.dataCodewords},t}(),wH=function(){function t(e,n,r,i,a,s){var o,c;this.versionNumber=e,this.symbolSizeRows=n,this.symbolSizeColumns=r,this.dataRegionSizeRows=i,this.dataRegionSizeColumns=a,this.ecBlocks=s;var d=0,f=s.getECCodewords(),p=s.getECBlocks();try{for(var g=DI(p),y=g.next();!y.done;y=g.next()){var x=y.value;d+=x.getCount()*(x.getDataCodewords()+f)}}catch(_){o={error:_}}finally{try{y&&!y.done&&(c=g.return)&&c.call(g)}finally{if(o)throw o.error}}this.totalCodewords=d}return t.prototype.getVersionNumber=function(){return this.versionNumber},t.prototype.getSymbolSizeRows=function(){return this.symbolSizeRows},t.prototype.getSymbolSizeColumns=function(){return this.symbolSizeColumns},t.prototype.getDataRegionSizeRows=function(){return this.dataRegionSizeRows},t.prototype.getDataRegionSizeColumns=function(){return this.dataRegionSizeColumns},t.prototype.getTotalCodewords=function(){return this.totalCodewords},t.prototype.getECBlocks=function(){return this.ecBlocks},t.getVersionForDimensions=function(e,n){var r,i;if((e&1)!==0||(n&1)!==0)throw new je;try{for(var a=DI(t.VERSIONS),s=a.next();!s.done;s=a.next()){var o=s.value;if(o.symbolSizeRows===e&&o.symbolSizeColumns===n)return o}}catch(c){r={error:c}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}throw new je},t.prototype.toString=function(){return""+this.versionNumber},t.buildVersions=function(){return[new t(1,10,10,8,8,new tn(5,new Xt(1,3))),new t(2,12,12,10,10,new tn(7,new Xt(1,5))),new t(3,14,14,12,12,new tn(10,new Xt(1,8))),new t(4,16,16,14,14,new tn(12,new Xt(1,12))),new t(5,18,18,16,16,new tn(14,new Xt(1,18))),new t(6,20,20,18,18,new tn(18,new Xt(1,22))),new t(7,22,22,20,20,new tn(20,new Xt(1,30))),new t(8,24,24,22,22,new tn(24,new Xt(1,36))),new t(9,26,26,24,24,new tn(28,new Xt(1,44))),new t(10,32,32,14,14,new tn(36,new Xt(1,62))),new t(11,36,36,16,16,new tn(42,new Xt(1,86))),new t(12,40,40,18,18,new tn(48,new Xt(1,114))),new t(13,44,44,20,20,new tn(56,new Xt(1,144))),new t(14,48,48,22,22,new tn(68,new Xt(1,174))),new t(15,52,52,24,24,new tn(42,new Xt(2,102))),new t(16,64,64,14,14,new tn(56,new Xt(2,140))),new t(17,72,72,16,16,new tn(36,new Xt(4,92))),new t(18,80,80,18,18,new tn(48,new Xt(4,114))),new t(19,88,88,20,20,new tn(56,new Xt(4,144))),new t(20,96,96,22,22,new tn(68,new Xt(4,174))),new t(21,104,104,24,24,new tn(56,new Xt(6,136))),new t(22,120,120,18,18,new tn(68,new Xt(6,175))),new t(23,132,132,20,20,new tn(62,new Xt(8,163))),new t(24,144,144,22,22,new tn(62,new Xt(8,156),new Xt(2,155))),new t(25,8,18,6,16,new tn(7,new Xt(1,5))),new t(26,8,32,6,14,new tn(11,new Xt(1,10))),new t(27,12,26,10,24,new tn(14,new Xt(1,16))),new t(28,12,36,10,16,new tn(18,new Xt(1,22))),new t(29,16,36,14,16,new tn(24,new Xt(1,32))),new t(30,16,48,14,22,new tn(28,new Xt(1,49)))]},t.VERSIONS=t.buildVersions(),t}(),_H=function(){function t(e){var n=e.getHeight();if(n<8||n>144||(n&1)!==0)throw new je;this.version=t.readVersion(e),this.mappingBitMatrix=this.extractDataRegion(e),this.readMappingMatrix=new ks(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}return t.prototype.getVersion=function(){return this.version},t.readVersion=function(e){var n=e.getHeight(),r=e.getWidth();return wH.getVersionForDimensions(n,r)},t.prototype.readCodewords=function(){var e=new Int8Array(this.version.getTotalCodewords()),n=0,r=4,i=0,a=this.mappingBitMatrix.getHeight(),s=this.mappingBitMatrix.getWidth(),o=!1,c=!1,d=!1,f=!1;do if(r===a&&i===0&&!o)e[n++]=this.readCorner1(a,s)&255,r-=2,i+=2,o=!0;else if(r===a-2&&i===0&&(s&3)!==0&&!c)e[n++]=this.readCorner2(a,s)&255,r-=2,i+=2,c=!0;else if(r===a+4&&i===2&&(s&7)===0&&!d)e[n++]=this.readCorner3(a,s)&255,r-=2,i+=2,d=!0;else if(r===a-2&&i===0&&(s&7)===4&&!f)e[n++]=this.readCorner4(a,s)&255,r-=2,i+=2,f=!0;else{do r<a&&i>=0&&!this.readMappingMatrix.get(i,r)&&(e[n++]=this.readUtah(r,i,a,s)&255),r-=2,i+=2;while(r>=0&&i<s);r+=1,i+=3;do r>=0&&i<s&&!this.readMappingMatrix.get(i,r)&&(e[n++]=this.readUtah(r,i,a,s)&255),r+=2,i-=2;while(r<a&&i>=0);r+=3,i+=1}while(r<a||i<s);if(n!==this.version.getTotalCodewords())throw new je;return e},t.prototype.readModule=function(e,n,r,i){return e<0&&(e+=r,n+=4-(r+4&7)),n<0&&(n+=i,e+=4-(i+4&7)),this.readMappingMatrix.set(n,e),this.mappingBitMatrix.get(n,e)},t.prototype.readUtah=function(e,n,r,i){var a=0;return this.readModule(e-2,n-2,r,i)&&(a|=1),a<<=1,this.readModule(e-2,n-1,r,i)&&(a|=1),a<<=1,this.readModule(e-1,n-2,r,i)&&(a|=1),a<<=1,this.readModule(e-1,n-1,r,i)&&(a|=1),a<<=1,this.readModule(e-1,n,r,i)&&(a|=1),a<<=1,this.readModule(e,n-2,r,i)&&(a|=1),a<<=1,this.readModule(e,n-1,r,i)&&(a|=1),a<<=1,this.readModule(e,n,r,i)&&(a|=1),a},t.prototype.readCorner1=function(e,n){var r=0;return this.readModule(e-1,0,e,n)&&(r|=1),r<<=1,this.readModule(e-1,1,e,n)&&(r|=1),r<<=1,this.readModule(e-1,2,e,n)&&(r|=1),r<<=1,this.readModule(0,n-2,e,n)&&(r|=1),r<<=1,this.readModule(0,n-1,e,n)&&(r|=1),r<<=1,this.readModule(1,n-1,e,n)&&(r|=1),r<<=1,this.readModule(2,n-1,e,n)&&(r|=1),r<<=1,this.readModule(3,n-1,e,n)&&(r|=1),r},t.prototype.readCorner2=function(e,n){var r=0;return this.readModule(e-3,0,e,n)&&(r|=1),r<<=1,this.readModule(e-2,0,e,n)&&(r|=1),r<<=1,this.readModule(e-1,0,e,n)&&(r|=1),r<<=1,this.readModule(0,n-4,e,n)&&(r|=1),r<<=1,this.readModule(0,n-3,e,n)&&(r|=1),r<<=1,this.readModule(0,n-2,e,n)&&(r|=1),r<<=1,this.readModule(0,n-1,e,n)&&(r|=1),r<<=1,this.readModule(1,n-1,e,n)&&(r|=1),r},t.prototype.readCorner3=function(e,n){var r=0;return this.readModule(e-1,0,e,n)&&(r|=1),r<<=1,this.readModule(e-1,n-1,e,n)&&(r|=1),r<<=1,this.readModule(0,n-3,e,n)&&(r|=1),r<<=1,this.readModule(0,n-2,e,n)&&(r|=1),r<<=1,this.readModule(0,n-1,e,n)&&(r|=1),r<<=1,this.readModule(1,n-3,e,n)&&(r|=1),r<<=1,this.readModule(1,n-2,e,n)&&(r|=1),r<<=1,this.readModule(1,n-1,e,n)&&(r|=1),r},t.prototype.readCorner4=function(e,n){var r=0;return this.readModule(e-3,0,e,n)&&(r|=1),r<<=1,this.readModule(e-2,0,e,n)&&(r|=1),r<<=1,this.readModule(e-1,0,e,n)&&(r|=1),r<<=1,this.readModule(0,n-2,e,n)&&(r|=1),r<<=1,this.readModule(0,n-1,e,n)&&(r|=1),r<<=1,this.readModule(1,n-1,e,n)&&(r|=1),r<<=1,this.readModule(2,n-1,e,n)&&(r|=1),r<<=1,this.readModule(3,n-1,e,n)&&(r|=1),r},t.prototype.extractDataRegion=function(e){var n=this.version.getSymbolSizeRows(),r=this.version.getSymbolSizeColumns();if(e.getHeight()!==n)throw new rt("Dimension of bitMatrix must match the version size");for(var i=this.version.getDataRegionSizeRows(),a=this.version.getDataRegionSizeColumns(),s=n/i|0,o=r/a|0,c=s*i,d=o*a,f=new ks(d,c),p=0;p<s;++p)for(var g=p*i,y=0;y<o;++y)for(var x=y*a,_=0;_<i;++_)for(var A=p*(i+2)+1+_,E=g+_,T=0;T<a;++T){var C=y*(a+2)+1+T;if(e.get(C,A)){var D=x+T;f.set(D,E)}}return f},t}(),RI=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},bH=function(){function t(e,n){this.numDataCodewords=e,this.codewords=n}return t.getDataBlocks=function(e,n){var r,i,a,s,o=n.getECBlocks(),c=0,d=o.getECBlocks();try{for(var f=RI(d),p=f.next();!p.done;p=f.next()){var g=p.value;c+=g.getCount()}}catch(q){r={error:q}}finally{try{p&&!p.done&&(i=f.return)&&i.call(f)}finally{if(r)throw r.error}}var y=new Array(c),x=0;try{for(var _=RI(d),A=_.next();!A.done;A=_.next())for(var g=A.value,E=0;E<g.getCount();E++){var T=g.getDataCodewords(),C=o.getECCodewords()+T;y[x++]=new t(T,new Uint8Array(C))}}catch(q){a={error:q}}finally{try{A&&!A.done&&(s=_.return)&&s.call(_)}finally{if(a)throw a.error}}for(var D=y[0].codewords.length,k=D-o.getECCodewords(),B=k-1,O=0,E=0;E<B;E++)for(var I=0;I<x;I++)y[I].codewords[E]=e[O++];for(var R=n.getVersionNumber()===24,V=R?8:x,I=0;I<V;I++)y[I].codewords[k-1]=e[O++];for(var L=y[0].codewords.length,E=k;E<L;E++)for(var I=0;I<x;I++){var P=R?(I+8)%x:I,F=R&&P>7?E-1:E;y[P].codewords[F]=e[O++]}if(O!==e.length)throw new rt;return y},t.prototype.getNumDataCodewords=function(){return this.numDataCodewords},t.prototype.getCodewords=function(){return this.codewords},t}(),UM=function(){function t(e){this.bytes=e,this.byteOffset=0,this.bitOffset=0}return t.prototype.getBitOffset=function(){return this.bitOffset},t.prototype.getByteOffset=function(){return this.byteOffset},t.prototype.readBits=function(e){if(e<1||e>32||e>this.available())throw new rt(""+e);var n=0,r=this.bitOffset,i=this.byteOffset,a=this.bytes;if(r>0){var s=8-r,o=e<s?e:s,c=s-o,d=255>>8-o<<c;n=(a[i]&d)>>c,e-=o,r+=o,r===8&&(r=0,i++)}if(e>0){for(;e>=8;)n=n<<8|a[i]&255,i++,e-=8;if(e>0){var c=8-e,d=255>>c<<c;n=n<<e|(a[i]&d)>>c,r+=e}}return this.bitOffset=r,this.byteOffset=i,n},t.prototype.available=function(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset},t}(),_r;(function(t){t[t.PAD_ENCODE=0]="PAD_ENCODE",t[t.ASCII_ENCODE=1]="ASCII_ENCODE",t[t.C40_ENCODE=2]="C40_ENCODE",t[t.TEXT_ENCODE=3]="TEXT_ENCODE",t[t.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",t[t.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",t[t.BASE256_ENCODE=6]="BASE256_ENCODE"})(_r||(_r={}));var AH=function(){function t(){}return t.decode=function(e){var n=new UM(e),r=new At,i=new At,a=new Array,s=_r.ASCII_ENCODE;do if(s===_r.ASCII_ENCODE)s=this.decodeAsciiSegment(n,r,i);else{switch(s){case _r.C40_ENCODE:this.decodeC40Segment(n,r);break;case _r.TEXT_ENCODE:this.decodeTextSegment(n,r);break;case _r.ANSIX12_ENCODE:this.decodeAnsiX12Segment(n,r);break;case _r.EDIFACT_ENCODE:this.decodeEdifactSegment(n,r);break;case _r.BASE256_ENCODE:this.decodeBase256Segment(n,r,a);break;default:throw new je}s=_r.ASCII_ENCODE}while(s!==_r.PAD_ENCODE&&n.available()>0);return i.length()>0&&r.append(i.toString()),new Y1(e,r.toString(),a.length===0?null:a,null)},t.decodeAsciiSegment=function(e,n,r){var i=!1;do{var a=e.readBits(8);if(a===0)throw new je;if(a<=128)return i&&(a+=128),n.append(String.fromCharCode(a-1)),_r.ASCII_ENCODE;if(a===129)return _r.PAD_ENCODE;if(a<=229){var s=a-130;s<10&&n.append("0"),n.append(""+s)}else switch(a){case 230:return _r.C40_ENCODE;case 231:return _r.BASE256_ENCODE;case 232:n.append("");break;case 233:case 234:break;case 235:i=!0;break;case 236:n.append("[)>05"),r.insert(0,"");break;case 237:n.append("[)>06"),r.insert(0,"");break;case 238:return _r.ANSIX12_ENCODE;case 239:return _r.TEXT_ENCODE;case 240:return _r.EDIFACT_ENCODE;case 241:break;default:if(a!==254||e.available()!==0)throw new je;break}}while(e.available()>0);return _r.ASCII_ENCODE},t.decodeC40Segment=function(e,n){var r=!1,i=[],a=0;do{if(e.available()===8)return;var s=e.readBits(8);if(s===254)return;this.parseTwoBytes(s,e.readBits(8),i);for(var o=0;o<3;o++){var c=i[o];switch(a){case 0:if(c<3)a=c+1;else if(c<this.C40_BASIC_SET_CHARS.length){var d=this.C40_BASIC_SET_CHARS[c];r?(n.append(String.fromCharCode(d.charCodeAt(0)+128)),r=!1):n.append(d)}else throw new je;break;case 1:r?(n.append(String.fromCharCode(c+128)),r=!1):n.append(String.fromCharCode(c)),a=0;break;case 2:if(c<this.C40_SHIFT2_SET_CHARS.length){var d=this.C40_SHIFT2_SET_CHARS[c];r?(n.append(String.fromCharCode(d.charCodeAt(0)+128)),r=!1):n.append(d)}else switch(c){case 27:n.append("");break;case 30:r=!0;break;default:throw new je}a=0;break;case 3:r?(n.append(String.fromCharCode(c+224)),r=!1):n.append(String.fromCharCode(c+96)),a=0;break;default:throw new je}}}while(e.available()>0)},t.decodeTextSegment=function(e,n){var r=!1,i=[],a=0;do{if(e.available()===8)return;var s=e.readBits(8);if(s===254)return;this.parseTwoBytes(s,e.readBits(8),i);for(var o=0;o<3;o++){var c=i[o];switch(a){case 0:if(c<3)a=c+1;else if(c<this.TEXT_BASIC_SET_CHARS.length){var d=this.TEXT_BASIC_SET_CHARS[c];r?(n.append(String.fromCharCode(d.charCodeAt(0)+128)),r=!1):n.append(d)}else throw new je;break;case 1:r?(n.append(String.fromCharCode(c+128)),r=!1):n.append(String.fromCharCode(c)),a=0;break;case 2:if(c<this.TEXT_SHIFT2_SET_CHARS.length){var d=this.TEXT_SHIFT2_SET_CHARS[c];r?(n.append(String.fromCharCode(d.charCodeAt(0)+128)),r=!1):n.append(d)}else switch(c){case 27:n.append("");break;case 30:r=!0;break;default:throw new je}a=0;break;case 3:if(c<this.TEXT_SHIFT3_SET_CHARS.length){var d=this.TEXT_SHIFT3_SET_CHARS[c];r?(n.append(String.fromCharCode(d.charCodeAt(0)+128)),r=!1):n.append(d),a=0}else throw new je;break;default:throw new je}}}while(e.available()>0)},t.decodeAnsiX12Segment=function(e,n){var r=[];do{if(e.available()===8)return;var i=e.readBits(8);if(i===254)return;this.parseTwoBytes(i,e.readBits(8),r);for(var a=0;a<3;a++){var s=r[a];switch(s){case 0:n.append("\r");break;case 1:n.append("*");break;case 2:n.append(">");break;case 3:n.append(" ");break;default:if(s<14)n.append(String.fromCharCode(s+44));else if(s<40)n.append(String.fromCharCode(s+51));else throw new je;break}}}while(e.available()>0)},t.parseTwoBytes=function(e,n,r){var i=(e<<8)+n-1,a=Math.floor(i/1600);r[0]=a,i-=a*1600,a=Math.floor(i/40),r[1]=a,r[2]=i-a*40},t.decodeEdifactSegment=function(e,n){do{if(e.available()<=16)return;for(var r=0;r<4;r++){var i=e.readBits(6);if(i===31){var a=8-e.getBitOffset();a!==8&&e.readBits(a);return}(i&32)===0&&(i|=64),n.append(String.fromCharCode(i))}}while(e.available()>0)},t.decodeBase256Segment=function(e,n,r){var i=1+e.getByteOffset(),a=this.unrandomize255State(e.readBits(8),i++),s;if(a===0?s=e.available()/8|0:a<250?s=a:s=250*(a-249)+this.unrandomize255State(e.readBits(8),i++),s<0)throw new je;for(var o=new Uint8Array(s),c=0;c<s;c++){if(e.available()<8)throw new je;o[c]=this.unrandomize255State(e.readBits(8),i++)}r.push(o);try{n.append(Aa.decode(o,Vt.ISO88591))}catch(d){throw new W0("Platform does not support required encoding: "+d.message)}},t.unrandomize255State=function(e,n){var r=149*n%255+1,i=e-r;return i>=0?i:i+256},t.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],t.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],t.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],t.TEXT_SHIFT2_SET_CHARS=t.C40_SHIFT2_SET_CHARS,t.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""],t}(),EH=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},SH=function(){function t(){this.rsDecoder=new q1(Bi.DATA_MATRIX_FIELD_256)}return t.prototype.decode=function(e){var n,r,i=new _H(e),a=i.getVersion(),s=i.readCodewords(),o=bH.getDataBlocks(s,a),c=0;try{for(var d=EH(o),f=d.next();!f.done;f=d.next()){var p=f.value;c+=p.getNumDataCodewords()}}catch(C){n={error:C}}finally{try{f&&!f.done&&(r=d.return)&&r.call(d)}finally{if(n)throw n.error}}for(var g=new Uint8Array(c),y=o.length,x=0;x<y;x++){var _=o[x],A=_.getCodewords(),E=_.getNumDataCodewords();this.correctErrors(A,E);for(var T=0;T<E;T++)g[T*y+x]=A[T]}return AH.decode(g)},t.prototype.correctErrors=function(e,n){var r=new Int32Array(e);try{this.rsDecoder.decode(r,e.length-n)}catch{throw new Vr}for(var i=0;i<n;i++)e[i]=r[i]},t}(),TH=function(){function t(e){this.image=e,this.rectangleDetector=new iw(this.image)}return t.prototype.detect=function(){var e=this.rectangleDetector.detect(),n=this.detectSolid1(e);if(n=this.detectSolid2(n),n[3]=this.correctTopRight(n),!n[3])throw new _e;n=this.shiftToModuleCenter(n);var r=n[0],i=n[1],a=n[2],s=n[3],o=this.transitionsBetween(r,s)+1,c=this.transitionsBetween(a,s)+1;(o&1)===1&&(o+=1),(c&1)===1&&(c+=1),4*o<7*c&&4*c<7*o&&(o=c=Math.max(o,c));var d=t.sampleGrid(this.image,r,i,a,s,o,c);return new X_(d,[r,i,a,s])},t.shiftPoint=function(e,n,r){var i=(n.getX()-e.getX())/(r+1),a=(n.getY()-e.getY())/(r+1);return new Xe(e.getX()+i,e.getY()+a)},t.moveAway=function(e,n,r){var i=e.getX(),a=e.getY();return i<n?i-=1:i+=1,a<r?a-=1:a+=1,new Xe(i,a)},t.prototype.detectSolid1=function(e){var n=e[0],r=e[1],i=e[3],a=e[2],s=this.transitionsBetween(n,r),o=this.transitionsBetween(r,i),c=this.transitionsBetween(i,a),d=this.transitionsBetween(a,n),f=s,p=[a,n,r,i];return f>o&&(f=o,p[0]=n,p[1]=r,p[2]=i,p[3]=a),f>c&&(f=c,p[0]=r,p[1]=i,p[2]=a,p[3]=n),f>d&&(p[0]=i,p[1]=a,p[2]=n,p[3]=r),p},t.prototype.detectSolid2=function(e){var n=e[0],r=e[1],i=e[2],a=e[3],s=this.transitionsBetween(n,a),o=t.shiftPoint(r,i,(s+1)*4),c=t.shiftPoint(i,r,(s+1)*4),d=this.transitionsBetween(o,n),f=this.transitionsBetween(c,a);return d<f?(e[0]=n,e[1]=r,e[2]=i,e[3]=a):(e[0]=r,e[1]=i,e[2]=a,e[3]=n),e},t.prototype.correctTopRight=function(e){var n=e[0],r=e[1],i=e[2],a=e[3],s=this.transitionsBetween(n,a),o=this.transitionsBetween(r,a),c=t.shiftPoint(n,r,(o+1)*4),d=t.shiftPoint(i,r,(s+1)*4);s=this.transitionsBetween(c,a),o=this.transitionsBetween(d,a);var f=new Xe(a.getX()+(i.getX()-r.getX())/(s+1),a.getY()+(i.getY()-r.getY())/(s+1)),p=new Xe(a.getX()+(n.getX()-r.getX())/(o+1),a.getY()+(n.getY()-r.getY())/(o+1));if(!this.isValid(f))return this.isValid(p)?p:null;if(!this.isValid(p))return f;var g=this.transitionsBetween(c,f)+this.transitionsBetween(d,f),y=this.transitionsBetween(c,p)+this.transitionsBetween(d,p);return g>y?f:p},t.prototype.shiftToModuleCenter=function(e){var n=e[0],r=e[1],i=e[2],a=e[3],s=this.transitionsBetween(n,a)+1,o=this.transitionsBetween(i,a)+1,c=t.shiftPoint(n,r,o*4),d=t.shiftPoint(i,r,s*4);s=this.transitionsBetween(c,a)+1,o=this.transitionsBetween(d,a)+1,(s&1)===1&&(s+=1),(o&1)===1&&(o+=1);var f=(n.getX()+r.getX()+i.getX()+a.getX())/4,p=(n.getY()+r.getY()+i.getY()+a.getY())/4;n=t.moveAway(n,f,p),r=t.moveAway(r,f,p),i=t.moveAway(i,f,p),a=t.moveAway(a,f,p);var g,y;return c=t.shiftPoint(n,r,o*4),c=t.shiftPoint(c,a,s*4),g=t.shiftPoint(r,n,o*4),g=t.shiftPoint(g,i,s*4),d=t.shiftPoint(i,a,o*4),d=t.shiftPoint(d,r,s*4),y=t.shiftPoint(a,i,o*4),y=t.shiftPoint(y,n,s*4),[c,g,d,y]},t.prototype.isValid=function(e){return e.getX()>=0&&e.getX()<this.image.getWidth()&&e.getY()>0&&e.getY()<this.image.getHeight()},t.sampleGrid=function(e,n,r,i,a,s,o){var c=K_.getInstance();return c.sampleGrid(e,s,o,.5,.5,s-.5,.5,s-.5,o-.5,.5,o-.5,n.getX(),n.getY(),a.getX(),a.getY(),i.getX(),i.getY(),r.getX(),r.getY())},t.prototype.transitionsBetween=function(e,n){var r=Math.trunc(e.getX()),i=Math.trunc(e.getY()),a=Math.trunc(n.getX()),s=Math.trunc(n.getY()),o=Math.abs(s-i)>Math.abs(a-r);if(o){var c=r;r=i,i=c,c=a,a=s,s=c}for(var d=Math.abs(a-r),f=Math.abs(s-i),p=-d/2,g=i<s?1:-1,y=r<a?1:-1,x=0,_=this.image.get(o?i:r,o?r:i),A=r,E=i;A!==a;A+=y){var T=this.image.get(o?E:A,o?A:E);if(T!==_&&(x++,_=T),p+=f,p>0){if(E===s)break;E+=g,p-=d}}return x},t}(),ow=function(){function t(){this.decoder=new SH}return t.prototype.decode=function(e,n){n===void 0&&(n=null);var r,i;if(n!=null&&n.has(Ln.PURE_BARCODE)){var a=t.extractPureBits(e.getBlackMatrix());r=this.decoder.decode(a),i=t.NO_POINTS}else{var s=new TH(e.getBlackMatrix()).detect();r=this.decoder.decode(s.getBits()),i=s.getPoints()}var o=r.getRawBytes(),c=new gi(r.getText(),o,8*o.length,i,et.DATA_MATRIX,Sn.currentTimeMillis()),d=r.getByteSegments();d!=null&&c.putMetadata(ei.BYTE_SEGMENTS,d);var f=r.getECLevel();return f!=null&&c.putMetadata(ei.ERROR_CORRECTION_LEVEL,f),c},t.prototype.reset=function(){},t.extractPureBits=function(e){var n=e.getTopLeftOnBit(),r=e.getBottomRightOnBit();if(n==null||r==null)throw new _e;var i=this.moduleSize(n,e),a=n[1],s=r[1],o=n[0],c=r[0],d=(c-o+1)/i,f=(s-a+1)/i;if(d<=0||f<=0)throw new _e;var p=i/2;a+=p,o+=p;for(var g=new ks(d,f),y=0;y<f;y++)for(var x=a+y*i,_=0;_<d;_++)e.get(o+_*i,x)&&g.set(_,y);return g},t.moduleSize=function(e,n){for(var r=n.getWidth(),i=e[0],a=e[1];i<r&&n.get(i,a);)i++;if(i===r)throw new _e;var s=i-e[0];if(s===0)throw new _e;return s},t.NO_POINTS=[],t}(),CH=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}();(function(t){CH(e,t);function e(n){return n===void 0&&(n=500),t.call(this,new ow,n)||this}return e})(df);var vd;(function(t){t[t.L=0]="L",t[t.M=1]="M",t[t.Q=2]="Q",t[t.H=3]="H"})(vd||(vd={}));var IH=function(){function t(e,n,r){this.value=e,this.stringValue=n,this.bits=r,t.FOR_BITS.set(r,this),t.FOR_VALUE.set(e,this)}return t.prototype.getValue=function(){return this.value},t.prototype.getBits=function(){return this.bits},t.fromString=function(e){switch(e){case"L":return t.L;case"M":return t.M;case"Q":return t.Q;case"H":return t.H;default:throw new Na(e+"not available")}},t.prototype.toString=function(){return this.stringValue},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var n=e;return this.value===n.value},t.forBits=function(e){if(e<0||e>=t.FOR_BITS.size)throw new rt;return t.FOR_BITS.get(e)},t.FOR_BITS=new Map,t.FOR_VALUE=new Map,t.L=new t(vd.L,"L",1),t.M=new t(vd.M,"M",0),t.Q=new t(vd.Q,"Q",3),t.H=new t(vd.H,"H",2),t}(),DH=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},HM=function(){function t(e){this.errorCorrectionLevel=IH.forBits(e>>3&3),this.dataMask=e&7}return t.numBitsDiffering=function(e,n){return Ct.bitCount(e^n)},t.decodeFormatInformation=function(e,n){var r=t.doDecodeFormatInformation(e,n);return r!==null?r:t.doDecodeFormatInformation(e^t.FORMAT_INFO_MASK_QR,n^t.FORMAT_INFO_MASK_QR)},t.doDecodeFormatInformation=function(e,n){var r,i,a=Number.MAX_SAFE_INTEGER,s=0;try{for(var o=DH(t.FORMAT_INFO_DECODE_LOOKUP),c=o.next();!c.done;c=o.next()){var d=c.value,f=d[0];if(f===e||f===n)return new t(d[1]);var p=t.numBitsDiffering(e,f);p<a&&(s=d[1],a=p),e!==n&&(p=t.numBitsDiffering(n,f),p<a&&(s=d[1],a=p))}}catch(g){r={error:g}}finally{try{c&&!c.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}return a<=3?new t(s):null},t.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},t.prototype.getDataMask=function(){return this.dataMask},t.prototype.hashCode=function(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var n=e;return this.errorCorrectionLevel===n.errorCorrectionLevel&&this.dataMask===n.dataMask},t.FORMAT_INFO_MASK_QR=21522,t.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])],t}(),RH=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ce=function(){function t(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];this.ecCodewordsPerBlock=e,this.ecBlocks=n}return t.prototype.getECCodewordsPerBlock=function(){return this.ecCodewordsPerBlock},t.prototype.getNumBlocks=function(){var e,n,r=0,i=this.ecBlocks;try{for(var a=RH(i),s=a.next();!s.done;s=a.next()){var o=s.value;r+=o.getCount()}}catch(c){e={error:c}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(e)throw e.error}}return r},t.prototype.getTotalECCodewords=function(){return this.ecCodewordsPerBlock*this.getNumBlocks()},t.prototype.getECBlocks=function(){return this.ecBlocks},t}(),Y=function(){function t(e,n){this.count=e,this.dataCodewords=n}return t.prototype.getCount=function(){return this.count},t.prototype.getDataCodewords=function(){return this.dataCodewords},t}(),OH=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},jc=function(){function t(e,n){for(var r,i,a=[],s=2;s<arguments.length;s++)a[s-2]=arguments[s];this.versionNumber=e,this.alignmentPatternCenters=n,this.ecBlocks=a;var o=0,c=a[0].getECCodewordsPerBlock(),d=a[0].getECBlocks();try{for(var f=OH(d),p=f.next();!p.done;p=f.next()){var g=p.value;o+=g.getCount()*(g.getDataCodewords()+c)}}catch(y){r={error:y}}finally{try{p&&!p.done&&(i=f.return)&&i.call(f)}finally{if(r)throw r.error}}this.totalCodewords=o}return t.prototype.getVersionNumber=function(){return this.versionNumber},t.prototype.getAlignmentPatternCenters=function(){return this.alignmentPatternCenters},t.prototype.getTotalCodewords=function(){return this.totalCodewords},t.prototype.getDimensionForVersion=function(){return 17+4*this.versionNumber},t.prototype.getECBlocksForLevel=function(e){return this.ecBlocks[e.getValue()]},t.getProvisionalVersionForDimension=function(e){if(e%4!==1)throw new je;try{return this.getVersionForNumber((e-17)/4)}catch{throw new je}},t.getVersionForNumber=function(e){if(e<1||e>40)throw new rt;return t.VERSIONS[e-1]},t.decodeVersionInformation=function(e){for(var n=Number.MAX_SAFE_INTEGER,r=0,i=0;i<t.VERSION_DECODE_INFO.length;i++){var a=t.VERSION_DECODE_INFO[i];if(a===e)return t.getVersionForNumber(i+7);var s=HM.numBitsDiffering(e,a);s<n&&(r=i+7,n=s)}return n<=3?t.getVersionForNumber(r):null},t.prototype.buildFunctionPattern=function(){var e=this.getDimensionForVersion(),n=new ks(e);n.setRegion(0,0,9,9),n.setRegion(e-8,0,8,9),n.setRegion(0,e-8,9,8);for(var r=this.alignmentPatternCenters.length,i=0;i<r;i++)for(var a=this.alignmentPatternCenters[i]-2,s=0;s<r;s++)i===0&&(s===0||s===r-1)||i===r-1&&s===0||n.setRegion(this.alignmentPatternCenters[s]-2,a,5,5);return n.setRegion(6,9,1,e-17),n.setRegion(9,6,e-17,1),this.versionNumber>6&&(n.setRegion(e-11,0,3,6),n.setRegion(0,e-11,6,3)),n},t.prototype.toString=function(){return""+this.versionNumber},t.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),t.VERSIONS=[new t(1,new Int32Array(0),new ce(7,new Y(1,19)),new ce(10,new Y(1,16)),new ce(13,new Y(1,13)),new ce(17,new Y(1,9))),new t(2,Int32Array.from([6,18]),new ce(10,new Y(1,34)),new ce(16,new Y(1,28)),new ce(22,new Y(1,22)),new ce(28,new Y(1,16))),new t(3,Int32Array.from([6,22]),new ce(15,new Y(1,55)),new ce(26,new Y(1,44)),new ce(18,new Y(2,17)),new ce(22,new Y(2,13))),new t(4,Int32Array.from([6,26]),new ce(20,new Y(1,80)),new ce(18,new Y(2,32)),new ce(26,new Y(2,24)),new ce(16,new Y(4,9))),new t(5,Int32Array.from([6,30]),new ce(26,new Y(1,108)),new ce(24,new Y(2,43)),new ce(18,new Y(2,15),new Y(2,16)),new ce(22,new Y(2,11),new Y(2,12))),new t(6,Int32Array.from([6,34]),new ce(18,new Y(2,68)),new ce(16,new Y(4,27)),new ce(24,new Y(4,19)),new ce(28,new Y(4,15))),new t(7,Int32Array.from([6,22,38]),new ce(20,new Y(2,78)),new ce(18,new Y(4,31)),new ce(18,new Y(2,14),new Y(4,15)),new ce(26,new Y(4,13),new Y(1,14))),new t(8,Int32Array.from([6,24,42]),new ce(24,new Y(2,97)),new ce(22,new Y(2,38),new Y(2,39)),new ce(22,new Y(4,18),new Y(2,19)),new ce(26,new Y(4,14),new Y(2,15))),new t(9,Int32Array.from([6,26,46]),new ce(30,new Y(2,116)),new ce(22,new Y(3,36),new Y(2,37)),new ce(20,new Y(4,16),new Y(4,17)),new ce(24,new Y(4,12),new Y(4,13))),new t(10,Int32Array.from([6,28,50]),new ce(18,new Y(2,68),new Y(2,69)),new ce(26,new Y(4,43),new Y(1,44)),new ce(24,new Y(6,19),new Y(2,20)),new ce(28,new Y(6,15),new Y(2,16))),new t(11,Int32Array.from([6,30,54]),new ce(20,new Y(4,81)),new ce(30,new Y(1,50),new Y(4,51)),new ce(28,new Y(4,22),new Y(4,23)),new ce(24,new Y(3,12),new Y(8,13))),new t(12,Int32Array.from([6,32,58]),new ce(24,new Y(2,92),new Y(2,93)),new ce(22,new Y(6,36),new Y(2,37)),new ce(26,new Y(4,20),new Y(6,21)),new ce(28,new Y(7,14),new Y(4,15))),new t(13,Int32Array.from([6,34,62]),new ce(26,new Y(4,107)),new ce(22,new Y(8,37),new Y(1,38)),new ce(24,new Y(8,20),new Y(4,21)),new ce(22,new Y(12,11),new Y(4,12))),new t(14,Int32Array.from([6,26,46,66]),new ce(30,new Y(3,115),new Y(1,116)),new ce(24,new Y(4,40),new Y(5,41)),new ce(20,new Y(11,16),new Y(5,17)),new ce(24,new Y(11,12),new Y(5,13))),new t(15,Int32Array.from([6,26,48,70]),new ce(22,new Y(5,87),new Y(1,88)),new ce(24,new Y(5,41),new Y(5,42)),new ce(30,new Y(5,24),new Y(7,25)),new ce(24,new Y(11,12),new Y(7,13))),new t(16,Int32Array.from([6,26,50,74]),new ce(24,new Y(5,98),new Y(1,99)),new ce(28,new Y(7,45),new Y(3,46)),new ce(24,new Y(15,19),new Y(2,20)),new ce(30,new Y(3,15),new Y(13,16))),new t(17,Int32Array.from([6,30,54,78]),new ce(28,new Y(1,107),new Y(5,108)),new ce(28,new Y(10,46),new Y(1,47)),new ce(28,new Y(1,22),new Y(15,23)),new ce(28,new Y(2,14),new Y(17,15))),new t(18,Int32Array.from([6,30,56,82]),new ce(30,new Y(5,120),new Y(1,121)),new ce(26,new Y(9,43),new Y(4,44)),new ce(28,new Y(17,22),new Y(1,23)),new ce(28,new Y(2,14),new Y(19,15))),new t(19,Int32Array.from([6,30,58,86]),new ce(28,new Y(3,113),new Y(4,114)),new ce(26,new Y(3,44),new Y(11,45)),new ce(26,new Y(17,21),new Y(4,22)),new ce(26,new Y(9,13),new Y(16,14))),new t(20,Int32Array.from([6,34,62,90]),new ce(28,new Y(3,107),new Y(5,108)),new ce(26,new Y(3,41),new Y(13,42)),new ce(30,new Y(15,24),new Y(5,25)),new ce(28,new Y(15,15),new Y(10,16))),new t(21,Int32Array.from([6,28,50,72,94]),new ce(28,new Y(4,116),new Y(4,117)),new ce(26,new Y(17,42)),new ce(28,new Y(17,22),new Y(6,23)),new ce(30,new Y(19,16),new Y(6,17))),new t(22,Int32Array.from([6,26,50,74,98]),new ce(28,new Y(2,111),new Y(7,112)),new ce(28,new Y(17,46)),new ce(30,new Y(7,24),new Y(16,25)),new ce(24,new Y(34,13))),new t(23,Int32Array.from([6,30,54,78,102]),new ce(30,new Y(4,121),new Y(5,122)),new ce(28,new Y(4,47),new Y(14,48)),new ce(30,new Y(11,24),new Y(14,25)),new ce(30,new Y(16,15),new Y(14,16))),new t(24,Int32Array.from([6,28,54,80,106]),new ce(30,new Y(6,117),new Y(4,118)),new ce(28,new Y(6,45),new Y(14,46)),new ce(30,new Y(11,24),new Y(16,25)),new ce(30,new Y(30,16),new Y(2,17))),new t(25,Int32Array.from([6,32,58,84,110]),new ce(26,new Y(8,106),new Y(4,107)),new ce(28,new Y(8,47),new Y(13,48)),new ce(30,new Y(7,24),new Y(22,25)),new ce(30,new Y(22,15),new Y(13,16))),new t(26,Int32Array.from([6,30,58,86,114]),new ce(28,new Y(10,114),new Y(2,115)),new ce(28,new Y(19,46),new Y(4,47)),new ce(28,new Y(28,22),new Y(6,23)),new ce(30,new Y(33,16),new Y(4,17))),new t(27,Int32Array.from([6,34,62,90,118]),new ce(30,new Y(8,122),new Y(4,123)),new ce(28,new Y(22,45),new Y(3,46)),new ce(30,new Y(8,23),new Y(26,24)),new ce(30,new Y(12,15),new Y(28,16))),new t(28,Int32Array.from([6,26,50,74,98,122]),new ce(30,new Y(3,117),new Y(10,118)),new ce(28,new Y(3,45),new Y(23,46)),new ce(30,new Y(4,24),new Y(31,25)),new ce(30,new Y(11,15),new Y(31,16))),new t(29,Int32Array.from([6,30,54,78,102,126]),new ce(30,new Y(7,116),new Y(7,117)),new ce(28,new Y(21,45),new Y(7,46)),new ce(30,new Y(1,23),new Y(37,24)),new ce(30,new Y(19,15),new Y(26,16))),new t(30,Int32Array.from([6,26,52,78,104,130]),new ce(30,new Y(5,115),new Y(10,116)),new ce(28,new Y(19,47),new Y(10,48)),new ce(30,new Y(15,24),new Y(25,25)),new ce(30,new Y(23,15),new Y(25,16))),new t(31,Int32Array.from([6,30,56,82,108,134]),new ce(30,new Y(13,115),new Y(3,116)),new ce(28,new Y(2,46),new Y(29,47)),new ce(30,new Y(42,24),new Y(1,25)),new ce(30,new Y(23,15),new Y(28,16))),new t(32,Int32Array.from([6,34,60,86,112,138]),new ce(30,new Y(17,115)),new ce(28,new Y(10,46),new Y(23,47)),new ce(30,new Y(10,24),new Y(35,25)),new ce(30,new Y(19,15),new Y(35,16))),new t(33,Int32Array.from([6,30,58,86,114,142]),new ce(30,new Y(17,115),new Y(1,116)),new ce(28,new Y(14,46),new Y(21,47)),new ce(30,new Y(29,24),new Y(19,25)),new ce(30,new Y(11,15),new Y(46,16))),new t(34,Int32Array.from([6,34,62,90,118,146]),new ce(30,new Y(13,115),new Y(6,116)),new ce(28,new Y(14,46),new Y(23,47)),new ce(30,new Y(44,24),new Y(7,25)),new ce(30,new Y(59,16),new Y(1,17))),new t(35,Int32Array.from([6,30,54,78,102,126,150]),new ce(30,new Y(12,121),new Y(7,122)),new ce(28,new Y(12,47),new Y(26,48)),new ce(30,new Y(39,24),new Y(14,25)),new ce(30,new Y(22,15),new Y(41,16))),new t(36,Int32Array.from([6,24,50,76,102,128,154]),new ce(30,new Y(6,121),new Y(14,122)),new ce(28,new Y(6,47),new Y(34,48)),new ce(30,new Y(46,24),new Y(10,25)),new ce(30,new Y(2,15),new Y(64,16))),new t(37,Int32Array.from([6,28,54,80,106,132,158]),new ce(30,new Y(17,122),new Y(4,123)),new ce(28,new Y(29,46),new Y(14,47)),new ce(30,new Y(49,24),new Y(10,25)),new ce(30,new Y(24,15),new Y(46,16))),new t(38,Int32Array.from([6,32,58,84,110,136,162]),new ce(30,new Y(4,122),new Y(18,123)),new ce(28,new Y(13,46),new Y(32,47)),new ce(30,new Y(48,24),new Y(14,25)),new ce(30,new Y(42,15),new Y(32,16))),new t(39,Int32Array.from([6,26,54,82,110,138,166]),new ce(30,new Y(20,117),new Y(4,118)),new ce(28,new Y(40,47),new Y(7,48)),new ce(30,new Y(43,24),new Y(22,25)),new ce(30,new Y(10,15),new Y(67,16))),new t(40,Int32Array.from([6,30,58,86,114,142,170]),new ce(30,new Y(19,118),new Y(6,119)),new ce(28,new Y(18,47),new Y(31,48)),new ce(30,new Y(34,24),new Y(34,25)),new ce(30,new Y(20,15),new Y(61,16)))],t}(),Lr;(function(t){t[t.DATA_MASK_000=0]="DATA_MASK_000",t[t.DATA_MASK_001=1]="DATA_MASK_001",t[t.DATA_MASK_010=2]="DATA_MASK_010",t[t.DATA_MASK_011=3]="DATA_MASK_011",t[t.DATA_MASK_100=4]="DATA_MASK_100",t[t.DATA_MASK_101=5]="DATA_MASK_101",t[t.DATA_MASK_110=6]="DATA_MASK_110",t[t.DATA_MASK_111=7]="DATA_MASK_111"})(Lr||(Lr={}));var OI=function(){function t(e,n){this.value=e,this.isMasked=n}return t.prototype.unmaskBitMatrix=function(e,n){for(var r=0;r<n;r++)for(var i=0;i<n;i++)this.isMasked(r,i)&&e.flip(i,r)},t.values=new Map([[Lr.DATA_MASK_000,new t(Lr.DATA_MASK_000,function(e,n){return(e+n&1)===0})],[Lr.DATA_MASK_001,new t(Lr.DATA_MASK_001,function(e,n){return(e&1)===0})],[Lr.DATA_MASK_010,new t(Lr.DATA_MASK_010,function(e,n){return n%3===0})],[Lr.DATA_MASK_011,new t(Lr.DATA_MASK_011,function(e,n){return(e+n)%3===0})],[Lr.DATA_MASK_100,new t(Lr.DATA_MASK_100,function(e,n){return(Math.floor(e/2)+Math.floor(n/3)&1)===0})],[Lr.DATA_MASK_101,new t(Lr.DATA_MASK_101,function(e,n){return e*n%6===0})],[Lr.DATA_MASK_110,new t(Lr.DATA_MASK_110,function(e,n){return e*n%6<3})],[Lr.DATA_MASK_111,new t(Lr.DATA_MASK_111,function(e,n){return(e+n+e*n%3&1)===0})]]),t}(),MH=function(){function t(e){var n=e.getHeight();if(n<21||(n&3)!==1)throw new je;this.bitMatrix=e}return t.prototype.readFormatInformation=function(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;for(var e=0,n=0;n<6;n++)e=this.copyBit(n,8,e);e=this.copyBit(7,8,e),e=this.copyBit(8,8,e),e=this.copyBit(8,7,e);for(var r=5;r>=0;r--)e=this.copyBit(8,r,e);for(var i=this.bitMatrix.getHeight(),a=0,s=i-7,r=i-1;r>=s;r--)a=this.copyBit(8,r,a);for(var n=i-8;n<i;n++)a=this.copyBit(n,8,a);if(this.parsedFormatInfo=HM.decodeFormatInformation(e,a),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new je},t.prototype.readVersion=function(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;var e=this.bitMatrix.getHeight(),n=Math.floor((e-17)/4);if(n<=6)return jc.getVersionForNumber(n);for(var r=0,i=e-11,a=5;a>=0;a--)for(var s=e-9;s>=i;s--)r=this.copyBit(s,a,r);var o=jc.decodeVersionInformation(r);if(o!==null&&o.getDimensionForVersion()===e)return this.parsedVersion=o,o;r=0;for(var s=5;s>=0;s--)for(var a=e-9;a>=i;a--)r=this.copyBit(s,a,r);if(o=jc.decodeVersionInformation(r),o!==null&&o.getDimensionForVersion()===e)return this.parsedVersion=o,o;throw new je},t.prototype.copyBit=function(e,n,r){var i=this.isMirror?this.bitMatrix.get(n,e):this.bitMatrix.get(e,n);return i?r<<1|1:r<<1},t.prototype.readCodewords=function(){var e=this.readFormatInformation(),n=this.readVersion(),r=OI.values.get(e.getDataMask()),i=this.bitMatrix.getHeight();r.unmaskBitMatrix(this.bitMatrix,i);for(var a=n.buildFunctionPattern(),s=!0,o=new Uint8Array(n.getTotalCodewords()),c=0,d=0,f=0,p=i-1;p>0;p-=2){p===6&&p--;for(var g=0;g<i;g++)for(var y=s?i-1-g:g,x=0;x<2;x++)a.get(p-x,y)||(f++,d<<=1,this.bitMatrix.get(p-x,y)&&(d|=1),f===8&&(o[c++]=d,f=0,d=0));s=!s}if(c!==n.getTotalCodewords())throw new je;return o},t.prototype.remask=function(){if(this.parsedFormatInfo!==null){var e=OI.values.get(this.parsedFormatInfo.getDataMask()),n=this.bitMatrix.getHeight();e.unmaskBitMatrix(this.bitMatrix,n)}},t.prototype.setMirror=function(e){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=e},t.prototype.mirror=function(){for(var e=this.bitMatrix,n=0,r=e.getWidth();n<r;n++)for(var i=n+1,a=e.getHeight();i<a;i++)e.get(n,i)!==e.get(i,n)&&(e.flip(i,n),e.flip(n,i))},t}(),MI=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},PH=function(){function t(e,n){this.numDataCodewords=e,this.codewords=n}return t.getDataBlocks=function(e,n,r){var i,a,s,o;if(e.length!==n.getTotalCodewords())throw new rt;var c=n.getECBlocksForLevel(r),d=0,f=c.getECBlocks();try{for(var p=MI(f),g=p.next();!g.done;g=p.next()){var y=g.value;d+=y.getCount()}}catch(F){i={error:F}}finally{try{g&&!g.done&&(a=p.return)&&a.call(p)}finally{if(i)throw i.error}}var x=new Array(d),_=0;try{for(var A=MI(f),E=A.next();!E.done;E=A.next())for(var y=E.value,T=0;T<y.getCount();T++){var C=y.getDataCodewords(),D=c.getECCodewordsPerBlock()+C;x[_++]=new t(C,new Uint8Array(D))}}catch(F){s={error:F}}finally{try{E&&!E.done&&(o=A.return)&&o.call(A)}finally{if(s)throw s.error}}for(var k=x[0].codewords.length,B=x.length-1;B>=0;){var O=x[B].codewords.length;if(O===k)break;B--}B++;for(var I=k-c.getECCodewordsPerBlock(),R=0,T=0;T<I;T++)for(var V=0;V<_;V++)x[V].codewords[T]=e[R++];for(var V=B;V<_;V++)x[V].codewords[I]=e[R++];for(var L=x[0].codewords.length,T=I;T<L;T++)for(var V=0;V<_;V++){var P=V<B?T:T+1;x[V].codewords[P]=e[R++]}return x},t.prototype.getNumDataCodewords=function(){return this.numDataCodewords},t.prototype.getCodewords=function(){return this.codewords},t}(),pa;(function(t){t[t.TERMINATOR=0]="TERMINATOR",t[t.NUMERIC=1]="NUMERIC",t[t.ALPHANUMERIC=2]="ALPHANUMERIC",t[t.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",t[t.BYTE=4]="BYTE",t[t.ECI=5]="ECI",t[t.KANJI=6]="KANJI",t[t.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",t[t.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",t[t.HANZI=9]="HANZI"})(pa||(pa={}));var Dn=function(){function t(e,n,r,i){this.value=e,this.stringValue=n,this.characterCountBitsForVersions=r,this.bits=i,t.FOR_BITS.set(i,this),t.FOR_VALUE.set(e,this)}return t.forBits=function(e){var n=t.FOR_BITS.get(e);if(n===void 0)throw new rt;return n},t.prototype.getCharacterCountBits=function(e){var n=e.getVersionNumber(),r;return n<=9?r=0:n<=26?r=1:r=2,this.characterCountBitsForVersions[r]},t.prototype.getValue=function(){return this.value},t.prototype.getBits=function(){return this.bits},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var n=e;return this.value===n.value},t.prototype.toString=function(){return this.stringValue},t.FOR_BITS=new Map,t.FOR_VALUE=new Map,t.TERMINATOR=new t(pa.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),t.NUMERIC=new t(pa.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),t.ALPHANUMERIC=new t(pa.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),t.STRUCTURED_APPEND=new t(pa.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),t.BYTE=new t(pa.BYTE,"BYTE",Int32Array.from([8,16,16]),4),t.ECI=new t(pa.ECI,"ECI",Int32Array.from([0,0,0]),7),t.KANJI=new t(pa.KANJI,"KANJI",Int32Array.from([8,10,12]),8),t.FNC1_FIRST_POSITION=new t(pa.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),t.FNC1_SECOND_POSITION=new t(pa.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),t.HANZI=new t(pa.HANZI,"HANZI",Int32Array.from([8,10,12]),13),t}(),kH=function(){function t(){}return t.decode=function(e,n,r,i){var a=new UM(e),s=new At,o=new Array,c=-1,d=-1;try{var f=null,p=!1,g=void 0;do{if(a.available()<4)g=Dn.TERMINATOR;else{var y=a.readBits(4);g=Dn.forBits(y)}switch(g){case Dn.TERMINATOR:break;case Dn.FNC1_FIRST_POSITION:case Dn.FNC1_SECOND_POSITION:p=!0;break;case Dn.STRUCTURED_APPEND:if(a.available()<16)throw new je;c=a.readBits(8),d=a.readBits(8);break;case Dn.ECI:var x=t.parseECIValue(a);if(f=Tr.getCharacterSetECIByValue(x),f===null)throw new je;break;case Dn.HANZI:var _=a.readBits(4),A=a.readBits(g.getCharacterCountBits(n));_===t.GB2312_SUBSET&&t.decodeHanziSegment(a,s,A);break;default:var E=a.readBits(g.getCharacterCountBits(n));switch(g){case Dn.NUMERIC:t.decodeNumericSegment(a,s,E);break;case Dn.ALPHANUMERIC:t.decodeAlphanumericSegment(a,s,E,p);break;case Dn.BYTE:t.decodeByteSegment(a,s,E,f,o,i);break;case Dn.KANJI:t.decodeKanjiSegment(a,s,E);break;default:throw new je}break}}while(g!==Dn.TERMINATOR)}catch{throw new je}return new Y1(e,s.toString(),o.length===0?null:o,r===null?null:r.toString(),c,d)},t.decodeHanziSegment=function(e,n,r){if(r*13>e.available())throw new je;for(var i=new Uint8Array(2*r),a=0;r>0;){var s=e.readBits(13),o=s/96<<8&4294967295|s%96;o<959?o+=41377:o+=42657,i[a]=o>>8&255,i[a+1]=o&255,a+=2,r--}try{n.append(Aa.decode(i,Vt.GB2312))}catch(c){throw new je(c)}},t.decodeKanjiSegment=function(e,n,r){if(r*13>e.available())throw new je;for(var i=new Uint8Array(2*r),a=0;r>0;){var s=e.readBits(13),o=s/192<<8&4294967295|s%192;o<7936?o+=33088:o+=49472,i[a]=o>>8,i[a+1]=o,a+=2,r--}try{n.append(Aa.decode(i,Vt.SHIFT_JIS))}catch(c){throw new je(c)}},t.decodeByteSegment=function(e,n,r,i,a,s){if(8*r>e.available())throw new je;for(var o=new Uint8Array(r),c=0;c<r;c++)o[c]=e.readBits(8);var d;i===null?d=Vt.guessEncoding(o,s):d=i.getName();try{n.append(Aa.decode(o,d))}catch(f){throw new je(f)}a.push(o)},t.toAlphaNumericChar=function(e){if(e>=t.ALPHANUMERIC_CHARS.length)throw new je;return t.ALPHANUMERIC_CHARS[e]},t.decodeAlphanumericSegment=function(e,n,r,i){for(var a=n.length();r>1;){if(e.available()<11)throw new je;var s=e.readBits(11);n.append(t.toAlphaNumericChar(Math.floor(s/45))),n.append(t.toAlphaNumericChar(s%45)),r-=2}if(r===1){if(e.available()<6)throw new je;n.append(t.toAlphaNumericChar(e.readBits(6)))}if(i)for(var o=a;o<n.length();o++)n.charAt(o)==="%"&&(o<n.length()-1&&n.charAt(o+1)==="%"?n.deleteCharAt(o+1):n.setCharAt(o,""))},t.decodeNumericSegment=function(e,n,r){for(;r>=3;){if(e.available()<10)throw new je;var i=e.readBits(10);if(i>=1e3)throw new je;n.append(t.toAlphaNumericChar(Math.floor(i/100))),n.append(t.toAlphaNumericChar(Math.floor(i/10)%10)),n.append(t.toAlphaNumericChar(i%10)),r-=3}if(r===2){if(e.available()<7)throw new je;var a=e.readBits(7);if(a>=100)throw new je;n.append(t.toAlphaNumericChar(Math.floor(a/10))),n.append(t.toAlphaNumericChar(a%10))}else if(r===1){if(e.available()<4)throw new je;var s=e.readBits(4);if(s>=10)throw new je;n.append(t.toAlphaNumericChar(s))}},t.parseECIValue=function(e){var n=e.readBits(8);if((n&128)===0)return n&127;if((n&192)===128){var r=e.readBits(8);return(n&63)<<8&4294967295|r}if((n&224)===192){var i=e.readBits(16);return(n&31)<<16&4294967295|i}throw new je},t.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",t.GB2312_SUBSET=1,t}(),zM=function(){function t(e){this.mirrored=e}return t.prototype.isMirrored=function(){return this.mirrored},t.prototype.applyMirroredCorrection=function(e){if(!(!this.mirrored||e===null||e.length<3)){var n=e[0];e[0]=e[2],e[2]=n}},t}(),PI=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},NH=function(){function t(){this.rsDecoder=new q1(Bi.QR_CODE_FIELD_256)}return t.prototype.decodeBooleanArray=function(e,n){return this.decodeBitMatrix(ks.parseFromBooleanArray(e),n)},t.prototype.decodeBitMatrix=function(e,n){var r=new MH(e),i=null;try{return this.decodeBitMatrixParser(r,n)}catch(s){i=s}try{r.remask(),r.setMirror(!0),r.readVersion(),r.readFormatInformation(),r.mirror();var a=this.decodeBitMatrixParser(r,n);return a.setOther(new zM(!0)),a}catch(s){throw i!==null?i:s}},t.prototype.decodeBitMatrixParser=function(e,n){var r,i,a,s,o=e.readVersion(),c=e.readFormatInformation().getErrorCorrectionLevel(),d=e.readCodewords(),f=PH.getDataBlocks(d,o,c),p=0;try{for(var g=PI(f),y=g.next();!y.done;y=g.next()){var x=y.value;p+=x.getNumDataCodewords()}}catch(B){r={error:B}}finally{try{y&&!y.done&&(i=g.return)&&i.call(g)}finally{if(r)throw r.error}}var _=new Uint8Array(p),A=0;try{for(var E=PI(f),T=E.next();!T.done;T=E.next()){var x=T.value,C=x.getCodewords(),D=x.getNumDataCodewords();this.correctErrors(C,D);for(var k=0;k<D;k++)_[A++]=C[k]}}catch(B){a={error:B}}finally{try{T&&!T.done&&(s=E.return)&&s.call(E)}finally{if(a)throw a.error}}return kH.decode(_,o,c,n)},t.prototype.correctErrors=function(e,n){var r=new Int32Array(e);try{this.rsDecoder.decode(r,e.length-n)}catch{throw new Vr}for(var i=0;i<n;i++)e[i]=r[i]},t}(),LH=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),BH=function(t){LH(e,t);function e(n,r,i){var a=t.call(this,n,r)||this;return a.estimatedModuleSize=i,a}return e.prototype.aboutEquals=function(n,r,i){if(Math.abs(r-this.getY())<=n&&Math.abs(i-this.getX())<=n){var a=Math.abs(n-this.estimatedModuleSize);return a<=1||a<=this.estimatedModuleSize}return!1},e.prototype.combineEstimate=function(n,r,i){var a=(this.getX()+r)/2,s=(this.getY()+n)/2,o=(this.estimatedModuleSize+i)/2;return new e(a,s,o)},e}(Xe),FH=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},VH=function(){function t(e,n,r,i,a,s,o){this.image=e,this.startX=n,this.startY=r,this.width=i,this.height=a,this.moduleSize=s,this.resultPointCallback=o,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}return t.prototype.find=function(){for(var e=this.startX,n=this.height,r=this.width,i=e+r,a=this.startY+n/2,s=new Int32Array(3),o=this.image,c=0;c<n;c++){var d=a+((c&1)===0?Math.floor((c+1)/2):-Math.floor((c+1)/2));s[0]=0,s[1]=0,s[2]=0;for(var f=e;f<i&&!o.get(f,d);)f++;for(var p=0;f<i;){if(o.get(f,d))if(p===1)s[1]++;else if(p===2){if(this.foundPatternCross(s)){var g=this.handlePossibleCenter(s,d,f);if(g!==null)return g}s[0]=s[2],s[1]=1,s[2]=0,p=1}else s[++p]++;else p===1&&p++,s[p]++;f++}if(this.foundPatternCross(s)){var g=this.handlePossibleCenter(s,d,i);if(g!==null)return g}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new _e},t.centerFromEnd=function(e,n){return n-e[2]-e[1]/2},t.prototype.foundPatternCross=function(e){for(var n=this.moduleSize,r=n/2,i=0;i<3;i++)if(Math.abs(n-e[i])>=r)return!1;return!0},t.prototype.crossCheckVertical=function(e,n,r,i){var a=this.image,s=a.getHeight(),o=this.crossCheckStateCount;o[0]=0,o[1]=0,o[2]=0;for(var c=e;c>=0&&a.get(n,c)&&o[1]<=r;)o[1]++,c--;if(c<0||o[1]>r)return NaN;for(;c>=0&&!a.get(n,c)&&o[0]<=r;)o[0]++,c--;if(o[0]>r)return NaN;for(c=e+1;c<s&&a.get(n,c)&&o[1]<=r;)o[1]++,c++;if(c===s||o[1]>r)return NaN;for(;c<s&&!a.get(n,c)&&o[2]<=r;)o[2]++,c++;if(o[2]>r)return NaN;var d=o[0]+o[1]+o[2];return 5*Math.abs(d-i)>=2*i?NaN:this.foundPatternCross(o)?t.centerFromEnd(o,c):NaN},t.prototype.handlePossibleCenter=function(e,n,r){var i,a,s=e[0]+e[1]+e[2],o=t.centerFromEnd(e,r),c=this.crossCheckVertical(n,o,2*e[1],s);if(!isNaN(c)){var d=(e[0]+e[1]+e[2])/3;try{for(var f=FH(this.possibleCenters),p=f.next();!p.done;p=f.next()){var g=p.value;if(g.aboutEquals(d,c,o))return g.combineEstimate(c,o,d)}}catch(x){i={error:x}}finally{try{p&&!p.done&&(a=f.return)&&a.call(f)}finally{if(i)throw i.error}}var y=new BH(o,c,d);this.possibleCenters.push(y),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(y)}return null},t}(),jH=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),UH=function(t){jH(e,t);function e(n,r,i,a){var s=t.call(this,n,r)||this;return s.estimatedModuleSize=i,s.count=a,a===void 0&&(s.count=1),s}return e.prototype.getEstimatedModuleSize=function(){return this.estimatedModuleSize},e.prototype.getCount=function(){return this.count},e.prototype.aboutEquals=function(n,r,i){if(Math.abs(r-this.getY())<=n&&Math.abs(i-this.getX())<=n){var a=Math.abs(n-this.estimatedModuleSize);return a<=1||a<=this.estimatedModuleSize}return!1},e.prototype.combineEstimate=function(n,r,i){var a=this.count+1,s=(this.count*this.getX()+r)/a,o=(this.count*this.getY()+n)/a,c=(this.count*this.estimatedModuleSize+i)/a;return new e(s,o,c,a)},e}(Xe),HH=function(){function t(e){this.bottomLeft=e[0],this.topLeft=e[1],this.topRight=e[2]}return t.prototype.getBottomLeft=function(){return this.bottomLeft},t.prototype.getTopLeft=function(){return this.topLeft},t.prototype.getTopRight=function(){return this.topRight},t}(),xh=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},zH=function(){function t(e,n){this.image=e,this.resultPointCallback=n,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=n}return t.prototype.getImage=function(){return this.image},t.prototype.getPossibleCenters=function(){return this.possibleCenters},t.prototype.find=function(e){var n=e!=null&&e.get(Ln.TRY_HARDER)!==void 0,r=e!=null&&e.get(Ln.PURE_BARCODE)!==void 0,i=this.image,a=i.getHeight(),s=i.getWidth(),o=Math.floor(3*a/(4*t.MAX_MODULES));(o<t.MIN_SKIP||n)&&(o=t.MIN_SKIP);for(var c=!1,d=new Int32Array(5),f=o-1;f<a&&!c;f+=o){d[0]=0,d[1]=0,d[2]=0,d[3]=0,d[4]=0;for(var p=0,g=0;g<s;g++)if(i.get(g,f))(p&1)===1&&p++,d[p]++;else if((p&1)===0)if(p===4)if(t.foundPatternCross(d)){var y=this.handlePossibleCenter(d,f,g,r);if(y===!0)if(o=2,this.hasSkipped===!0)c=this.haveMultiplyConfirmedCenters();else{var x=this.findRowSkip();x>d[2]&&(f+=x-d[2]-o,g=s-1)}else{d[0]=d[2],d[1]=d[3],d[2]=d[4],d[3]=1,d[4]=0,p=3;continue}p=0,d[0]=0,d[1]=0,d[2]=0,d[3]=0,d[4]=0}else d[0]=d[2],d[1]=d[3],d[2]=d[4],d[3]=1,d[4]=0,p=3;else d[++p]++;else d[p]++;if(t.foundPatternCross(d)){var y=this.handlePossibleCenter(d,f,s,r);y===!0&&(o=d[0],this.hasSkipped&&(c=this.haveMultiplyConfirmedCenters()))}}var _=this.selectBestPatterns();return Xe.orderBestPatterns(_),new HH(_)},t.centerFromEnd=function(e,n){return n-e[4]-e[3]-e[2]/2},t.foundPatternCross=function(e){for(var n=0,r=0;r<5;r++){var i=e[r];if(i===0)return!1;n+=i}if(n<7)return!1;var a=n/7,s=a/2;return Math.abs(a-e[0])<s&&Math.abs(a-e[1])<s&&Math.abs(3*a-e[2])<3*s&&Math.abs(a-e[3])<s&&Math.abs(a-e[4])<s},t.prototype.getCrossCheckStateCount=function(){var e=this.crossCheckStateCount;return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e},t.prototype.crossCheckDiagonal=function(e,n,r,i){for(var a=this.getCrossCheckStateCount(),s=0,o=this.image;e>=s&&n>=s&&o.get(n-s,e-s);)a[2]++,s++;if(e<s||n<s)return!1;for(;e>=s&&n>=s&&!o.get(n-s,e-s)&&a[1]<=r;)a[1]++,s++;if(e<s||n<s||a[1]>r)return!1;for(;e>=s&&n>=s&&o.get(n-s,e-s)&&a[0]<=r;)a[0]++,s++;if(a[0]>r)return!1;var c=o.getHeight(),d=o.getWidth();for(s=1;e+s<c&&n+s<d&&o.get(n+s,e+s);)a[2]++,s++;if(e+s>=c||n+s>=d)return!1;for(;e+s<c&&n+s<d&&!o.get(n+s,e+s)&&a[3]<r;)a[3]++,s++;if(e+s>=c||n+s>=d||a[3]>=r)return!1;for(;e+s<c&&n+s<d&&o.get(n+s,e+s)&&a[4]<r;)a[4]++,s++;if(a[4]>=r)return!1;var f=a[0]+a[1]+a[2]+a[3]+a[4];return Math.abs(f-i)<2*i&&t.foundPatternCross(a)},t.prototype.crossCheckVertical=function(e,n,r,i){for(var a=this.image,s=a.getHeight(),o=this.getCrossCheckStateCount(),c=e;c>=0&&a.get(n,c);)o[2]++,c--;if(c<0)return NaN;for(;c>=0&&!a.get(n,c)&&o[1]<=r;)o[1]++,c--;if(c<0||o[1]>r)return NaN;for(;c>=0&&a.get(n,c)&&o[0]<=r;)o[0]++,c--;if(o[0]>r)return NaN;for(c=e+1;c<s&&a.get(n,c);)o[2]++,c++;if(c===s)return NaN;for(;c<s&&!a.get(n,c)&&o[3]<r;)o[3]++,c++;if(c===s||o[3]>=r)return NaN;for(;c<s&&a.get(n,c)&&o[4]<r;)o[4]++,c++;if(o[4]>=r)return NaN;var d=o[0]+o[1]+o[2]+o[3]+o[4];return 5*Math.abs(d-i)>=2*i?NaN:t.foundPatternCross(o)?t.centerFromEnd(o,c):NaN},t.prototype.crossCheckHorizontal=function(e,n,r,i){for(var a=this.image,s=a.getWidth(),o=this.getCrossCheckStateCount(),c=e;c>=0&&a.get(c,n);)o[2]++,c--;if(c<0)return NaN;for(;c>=0&&!a.get(c,n)&&o[1]<=r;)o[1]++,c--;if(c<0||o[1]>r)return NaN;for(;c>=0&&a.get(c,n)&&o[0]<=r;)o[0]++,c--;if(o[0]>r)return NaN;for(c=e+1;c<s&&a.get(c,n);)o[2]++,c++;if(c===s)return NaN;for(;c<s&&!a.get(c,n)&&o[3]<r;)o[3]++,c++;if(c===s||o[3]>=r)return NaN;for(;c<s&&a.get(c,n)&&o[4]<r;)o[4]++,c++;if(o[4]>=r)return NaN;var d=o[0]+o[1]+o[2]+o[3]+o[4];return 5*Math.abs(d-i)>=i?NaN:t.foundPatternCross(o)?t.centerFromEnd(o,c):NaN},t.prototype.handlePossibleCenter=function(e,n,r,i){var a=e[0]+e[1]+e[2]+e[3]+e[4],s=t.centerFromEnd(e,r),o=this.crossCheckVertical(n,Math.floor(s),e[2],a);if(!isNaN(o)&&(s=this.crossCheckHorizontal(Math.floor(s),Math.floor(o),e[2],a),!isNaN(s)&&(!i||this.crossCheckDiagonal(Math.floor(o),Math.floor(s),e[2],a)))){for(var c=a/7,d=!1,f=this.possibleCenters,p=0,g=f.length;p<g;p++){var y=f[p];if(y.aboutEquals(c,o,s)){f[p]=y.combineEstimate(o,s,c),d=!0;break}}if(!d){var x=new UH(s,o,c);f.push(x),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(x)}return!0}return!1},t.prototype.findRowSkip=function(){var e,n,r=this.possibleCenters.length;if(r<=1)return 0;var i=null;try{for(var a=xh(this.possibleCenters),s=a.next();!s.done;s=a.next()){var o=s.value;if(o.getCount()>=t.CENTER_QUORUM)if(i==null)i=o;else return this.hasSkipped=!0,Math.floor((Math.abs(i.getX()-o.getX())-Math.abs(i.getY()-o.getY()))/2)}}catch(c){e={error:c}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(e)throw e.error}}return 0},t.prototype.haveMultiplyConfirmedCenters=function(){var e,n,r,i,a=0,s=0,o=this.possibleCenters.length;try{for(var c=xh(this.possibleCenters),d=c.next();!d.done;d=c.next()){var f=d.value;f.getCount()>=t.CENTER_QUORUM&&(a++,s+=f.getEstimatedModuleSize())}}catch(_){e={error:_}}finally{try{d&&!d.done&&(n=c.return)&&n.call(c)}finally{if(e)throw e.error}}if(a<3)return!1;var p=s/o,g=0;try{for(var y=xh(this.possibleCenters),x=y.next();!x.done;x=y.next()){var f=x.value;g+=Math.abs(f.getEstimatedModuleSize()-p)}}catch(_){r={error:_}}finally{try{x&&!x.done&&(i=y.return)&&i.call(y)}finally{if(r)throw r.error}}return g<=.05*s},t.prototype.selectBestPatterns=function(){var e,n,r,i,a=this.possibleCenters.length;if(a<3)throw new _e;var s=this.possibleCenters,o;if(a>3){var c=0,d=0;try{for(var f=xh(this.possibleCenters),p=f.next();!p.done;p=f.next()){var g=p.value,y=g.getEstimatedModuleSize();c+=y,d+=y*y}}catch(k){e={error:k}}finally{try{p&&!p.done&&(n=f.return)&&n.call(f)}finally{if(e)throw e.error}}o=c/a;var x=Math.sqrt(d/a-o*o);s.sort(function(k,B){var O=Math.abs(B.getEstimatedModuleSize()-o),I=Math.abs(k.getEstimatedModuleSize()-o);return O<I?-1:O>I?1:0});for(var _=Math.max(.2*o,x),A=0;A<s.length&&s.length>3;A++){var E=s[A];Math.abs(E.getEstimatedModuleSize()-o)>_&&(s.splice(A,1),A--)}}if(s.length>3){var c=0;try{for(var T=xh(s),C=T.next();!C.done;C=T.next()){var D=C.value;c+=D.getEstimatedModuleSize()}}catch(B){r={error:B}}finally{try{C&&!C.done&&(i=T.return)&&i.call(T)}finally{if(r)throw r.error}}o=c/s.length,s.sort(function(B,O){if(O.getCount()===B.getCount()){var I=Math.abs(O.getEstimatedModuleSize()-o),R=Math.abs(B.getEstimatedModuleSize()-o);return I<R?1:I>R?-1:0}else return O.getCount()-B.getCount()}),s.splice(3)}return[s[0],s[1],s[2]]},t.CENTER_QUORUM=2,t.MIN_SKIP=3,t.MAX_MODULES=57,t}(),$H=function(){function t(e){this.image=e}return t.prototype.getImage=function(){return this.image},t.prototype.getResultPointCallback=function(){return this.resultPointCallback},t.prototype.detect=function(e){this.resultPointCallback=e==null?null:e.get(Ln.NEED_RESULT_POINT_CALLBACK);var n=new zH(this.image,this.resultPointCallback),r=n.find(e);return this.processFinderPatternInfo(r)},t.prototype.processFinderPatternInfo=function(e){var n=e.getTopLeft(),r=e.getTopRight(),i=e.getBottomLeft(),a=this.calculateModuleSize(n,r,i);if(a<1)throw new _e("No pattern found in proccess finder.");var s=t.computeDimension(n,r,i,a),o=jc.getProvisionalVersionForDimension(s),c=o.getDimensionForVersion()-7,d=null;if(o.getAlignmentPatternCenters().length>0)for(var f=r.getX()-n.getX()+i.getX(),p=r.getY()-n.getY()+i.getY(),g=1-3/c,y=Math.floor(n.getX()+g*(f-n.getX())),x=Math.floor(n.getY()+g*(p-n.getY())),_=4;_<=16;_<<=1)try{d=this.findAlignmentInRegion(a,y,x,_);break}catch(C){if(!(C instanceof _e))throw C}var A=t.createTransform(n,r,i,d,s),E=t.sampleGrid(this.image,A,s),T;return d===null?T=[i,n,r]:T=[i,n,r,d],new X_(E,T)},t.createTransform=function(e,n,r,i,a){var s=a-3.5,o,c,d,f;return i!==null?(o=i.getX(),c=i.getY(),d=s-3,f=d):(o=n.getX()-e.getX()+r.getX(),c=n.getY()-e.getY()+r.getY(),d=s,f=s),BM.quadrilateralToQuadrilateral(3.5,3.5,s,3.5,d,f,3.5,s,e.getX(),e.getY(),n.getX(),n.getY(),o,c,r.getX(),r.getY())},t.sampleGrid=function(e,n,r){var i=K_.getInstance();return i.sampleGridWithTransform(e,r,r,n)},t.computeDimension=function(e,n,r,i){var a=$t.round(Xe.distance(e,n)/i),s=$t.round(Xe.distance(e,r)/i),o=Math.floor((a+s)/2)+7;switch(o&3){case 0:o++;break;case 2:o--;break;case 3:throw new _e("Dimensions could be not found.")}return o},t.prototype.calculateModuleSize=function(e,n,r){return(this.calculateModuleSizeOneWay(e,n)+this.calculateModuleSizeOneWay(e,r))/2},t.prototype.calculateModuleSizeOneWay=function(e,n){var r=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(e.getX()),Math.floor(e.getY()),Math.floor(n.getX()),Math.floor(n.getY())),i=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(n.getX()),Math.floor(n.getY()),Math.floor(e.getX()),Math.floor(e.getY()));return isNaN(r)?i/7:isNaN(i)?r/7:(r+i)/14},t.prototype.sizeOfBlackWhiteBlackRunBothWays=function(e,n,r,i){var a=this.sizeOfBlackWhiteBlackRun(e,n,r,i),s=1,o=e-(r-e);o<0?(s=e/(e-o),o=0):o>=this.image.getWidth()&&(s=(this.image.getWidth()-1-e)/(o-e),o=this.image.getWidth()-1);var c=Math.floor(n-(i-n)*s);return s=1,c<0?(s=n/(n-c),c=0):c>=this.image.getHeight()&&(s=(this.image.getHeight()-1-n)/(c-n),c=this.image.getHeight()-1),o=Math.floor(e+(o-e)*s),a+=this.sizeOfBlackWhiteBlackRun(e,n,o,c),a-1},t.prototype.sizeOfBlackWhiteBlackRun=function(e,n,r,i){var a=Math.abs(i-n)>Math.abs(r-e);if(a){var s=e;e=n,n=s,s=r,r=i,i=s}for(var o=Math.abs(r-e),c=Math.abs(i-n),d=-o/2,f=e<r?1:-1,p=n<i?1:-1,g=0,y=r+f,x=e,_=n;x!==y;x+=f){var A=a?_:x,E=a?x:_;if(g===1===this.image.get(A,E)){if(g===2)return $t.distance(x,_,e,n);g++}if(d+=c,d>0){if(_===i)break;_+=p,d-=o}}return g===2?$t.distance(r+f,i,e,n):NaN},t.prototype.findAlignmentInRegion=function(e,n,r,i){var a=Math.floor(i*e),s=Math.max(0,n-a),o=Math.min(this.image.getWidth()-1,n+a);if(o-s<e*3)throw new _e("Alignment top exceeds estimated module size.");var c=Math.max(0,r-a),d=Math.min(this.image.getHeight()-1,r+a);if(d-c<e*3)throw new _e("Alignment bottom exceeds estimated module size.");var f=new VH(this.image,s,c,o-s,d-c,e,this.resultPointCallback);return f.find()},t}(),lw=function(){function t(){this.decoder=new NH}return t.prototype.getDecoder=function(){return this.decoder},t.prototype.decode=function(e,n){var r,i;if(n!=null&&n.get(Ln.PURE_BARCODE)!==void 0){var a=t.extractPureBits(e.getBlackMatrix());r=this.decoder.decodeBitMatrix(a,n),i=t.NO_POINTS}else{var s=new $H(e.getBlackMatrix()).detect(n);r=this.decoder.decodeBitMatrix(s.getBits(),n),i=s.getPoints()}r.getOther()instanceof zM&&r.getOther().applyMirroredCorrection(i);var o=new gi(r.getText(),r.getRawBytes(),void 0,i,et.QR_CODE,void 0),c=r.getByteSegments();c!==null&&o.putMetadata(ei.BYTE_SEGMENTS,c);var d=r.getECLevel();return d!==null&&o.putMetadata(ei.ERROR_CORRECTION_LEVEL,d),r.hasStructuredAppend()&&(o.putMetadata(ei.STRUCTURED_APPEND_SEQUENCE,r.getStructuredAppendSequenceNumber()),o.putMetadata(ei.STRUCTURED_APPEND_PARITY,r.getStructuredAppendParity())),o},t.prototype.reset=function(){},t.extractPureBits=function(e){var n=e.getTopLeftOnBit(),r=e.getBottomRightOnBit();if(n===null||r===null)throw new _e;var i=this.moduleSize(n,e),a=n[1],s=r[1],o=n[0],c=r[0];if(o>=c||a>=s)throw new _e;if(s-a!==c-o&&(c=o+(s-a),c>=e.getWidth()))throw new _e;var d=Math.round((c-o+1)/i),f=Math.round((s-a+1)/i);if(d<=0||f<=0)throw new _e;if(f!==d)throw new _e;var p=Math.floor(i/2);a+=p,o+=p;var g=o+Math.floor((d-1)*i)-c;if(g>0){if(g>p)throw new _e;o-=g}var y=a+Math.floor((f-1)*i)-s;if(y>0){if(y>p)throw new _e;a-=y}for(var x=new ks(d,f),_=0;_<f;_++)for(var A=a+Math.floor(_*i),E=0;E<d;E++)e.get(o+Math.floor(E*i),A)&&x.set(E,_);return x},t.moduleSize=function(e,n){for(var r=n.getHeight(),i=n.getWidth(),a=e[0],s=e[1],o=!0,c=0;a<i&&s<r;){if(o!==n.get(a,s)){if(++c===5)break;o=!o}a++,s++}if(a===i||s===r)throw new _e;return(a-e[0])/7},t.NO_POINTS=new Array,t}(),GH=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Ut=function(){function t(){}return t.prototype.PDF417Common=function(){},t.getBitCountSum=function(e){return $t.sum(e)},t.toIntArray=function(e){var n,r;if(e==null||!e.length)return t.EMPTY_INT_ARRAY;var i=new Int32Array(e.length),a=0;try{for(var s=GH(e),o=s.next();!o.done;o=s.next()){var c=o.value;i[a++]=c}}catch(d){n={error:d}}finally{try{o&&!o.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}return i},t.getCodeword=function(e){var n=Cr.binarySearch(t.SYMBOL_TABLE,e&262143);return n<0?-1:(t.CODEWORD_TABLE[n]-1)%t.NUMBER_OF_CODEWORDS},t.NUMBER_OF_CODEWORDS=929,t.MAX_CODEWORDS_IN_BARCODE=t.NUMBER_OF_CODEWORDS-1,t.MIN_ROWS_IN_BARCODE=3,t.MAX_ROWS_IN_BARCODE=90,t.MODULES_IN_CODEWORD=17,t.MODULES_IN_STOP_PATTERN=18,t.BARS_IN_MODULE=8,t.EMPTY_INT_ARRAY=new Int32Array([]),t.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),t.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]),t}(),WH=function(){function t(e,n){this.bits=e,this.points=n}return t.prototype.getBits=function(){return this.bits},t.prototype.getPoints=function(){return this.points},t}(),YH=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},qH=function(){function t(){}return t.detectMultiple=function(e,n,r){var i=e.getBlackMatrix(),a=t.detect(r,i);return a.length||(i=i.clone(),i.rotate180(),a=t.detect(r,i)),new WH(i,a)},t.detect=function(e,n){for(var r,i,a=new Array,s=0,o=0,c=!1;s<n.getHeight();){var d=t.findVertices(n,s,o);if(d[0]==null&&d[3]==null){if(!c)break;c=!1,o=0;try{for(var f=(r=void 0,YH(a)),p=f.next();!p.done;p=f.next()){var g=p.value;g[1]!=null&&(s=Math.trunc(Math.max(s,g[1].getY()))),g[3]!=null&&(s=Math.max(s,Math.trunc(g[3].getY())))}}catch(y){r={error:y}}finally{try{p&&!p.done&&(i=f.return)&&i.call(f)}finally{if(r)throw r.error}}s+=t.ROW_STEP;continue}if(c=!0,a.push(d),!e)break;d[2]!=null?(o=Math.trunc(d[2].getX()),s=Math.trunc(d[2].getY())):(o=Math.trunc(d[4].getX()),s=Math.trunc(d[4].getY()))}return a},t.findVertices=function(e,n,r){var i=e.getHeight(),a=e.getWidth(),s=new Array(8);return t.copyToResult(s,t.findRowsWithPattern(e,i,a,n,r,t.START_PATTERN),t.INDEXES_START_PATTERN),s[4]!=null&&(r=Math.trunc(s[4].getX()),n=Math.trunc(s[4].getY())),t.copyToResult(s,t.findRowsWithPattern(e,i,a,n,r,t.STOP_PATTERN),t.INDEXES_STOP_PATTERN),s},t.copyToResult=function(e,n,r){for(var i=0;i<r.length;i++)e[r[i]]=n[i]},t.findRowsWithPattern=function(e,n,r,i,a,s){for(var o=new Array(4),c=!1,d=new Int32Array(s.length);i<n;i+=t.ROW_STEP){var f=t.findGuardPattern(e,a,i,r,!1,s,d);if(f!=null){for(;i>0;){var p=t.findGuardPattern(e,a,--i,r,!1,s,d);if(p!=null)f=p;else{i++;break}}o[0]=new Xe(f[0],i),o[1]=new Xe(f[1],i),c=!0;break}}var g=i+1;if(c){for(var y=0,p=Int32Array.from([Math.trunc(o[0].getX()),Math.trunc(o[1].getX())]);g<n;g++){var f=t.findGuardPattern(e,p[0],g,r,!1,s,d);if(f!=null&&Math.abs(p[0]-f[0])<t.MAX_PATTERN_DRIFT&&Math.abs(p[1]-f[1])<t.MAX_PATTERN_DRIFT)p=f,y=0;else{if(y>t.SKIPPED_ROW_COUNT_MAX)break;y++}}g-=y+1,o[2]=new Xe(p[0],g),o[3]=new Xe(p[1],g)}return g-i<t.BARCODE_MIN_HEIGHT&&Cr.fill(o,null),o},t.findGuardPattern=function(e,n,r,i,a,s,o){Cr.fillWithin(o,0,o.length,0);for(var c=n,d=0;e.get(c,r)&&c>0&&d++<t.MAX_PIXEL_DRIFT;)c--;for(var f=c,p=0,g=s.length,y=a;f<i;f++){var x=e.get(f,r);if(x!==y)o[p]++;else{if(p===g-1){if(t.patternMatchVariance(o,s,t.MAX_INDIVIDUAL_VARIANCE)<t.MAX_AVG_VARIANCE)return new Int32Array([c,f]);c+=o[0]+o[1],Sn.arraycopy(o,2,o,0,p-1),o[p-1]=0,o[p]=0,p--}else p++;o[p]=1,y=!y}}return p===g-1&&t.patternMatchVariance(o,s,t.MAX_INDIVIDUAL_VARIANCE)<t.MAX_AVG_VARIANCE?new Int32Array([c,f-1]):null},t.patternMatchVariance=function(e,n,r){for(var i=e.length,a=0,s=0,o=0;o<i;o++)a+=e[o],s+=n[o];if(a<s)return 1/0;var c=a/s;r*=c;for(var d=0,f=0;f<i;f++){var p=e[f],g=n[f]*c,y=p>g?p-g:g-p;if(y>r)return 1/0;d+=y}return d/a},t.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),t.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),t.MAX_AVG_VARIANCE=.42,t.MAX_INDIVIDUAL_VARIANCE=.8,t.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),t.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),t.MAX_PIXEL_DRIFT=3,t.MAX_PATTERN_DRIFT=5,t.SKIPPED_ROW_COUNT_MAX=25,t.ROW_STEP=5,t.BARCODE_MIN_HEIGHT=10,t}(),XH=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Mc=function(){function t(e,n){if(n.length===0)throw new rt;this.field=e;var r=n.length;if(r>1&&n[0]===0){for(var i=1;i<r&&n[i]===0;)i++;i===r?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(r-i),Sn.arraycopy(n,i,this.coefficients,0,this.coefficients.length))}else this.coefficients=n}return t.prototype.getCoefficients=function(){return this.coefficients},t.prototype.getDegree=function(){return this.coefficients.length-1},t.prototype.isZero=function(){return this.coefficients[0]===0},t.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},t.prototype.evaluateAt=function(e){var n,r;if(e===0)return this.getCoefficient(0);if(e===1){var i=0;try{for(var a=XH(this.coefficients),s=a.next();!s.done;s=a.next()){var o=s.value;i=this.field.add(i,o)}}catch(p){n={error:p}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}return i}for(var c=this.coefficients[0],d=this.coefficients.length,f=1;f<d;f++)c=this.field.add(this.field.multiply(e,c),this.coefficients[f]);return c},t.prototype.add=function(e){if(!this.field.equals(e.field))throw new rt("ModulusPolys do not have same ModulusGF field");if(this.isZero())return e;if(e.isZero())return this;var n=this.coefficients,r=e.coefficients;if(n.length>r.length){var i=n;n=r,r=i}var a=new Int32Array(r.length),s=r.length-n.length;Sn.arraycopy(r,0,a,0,s);for(var o=s;o<r.length;o++)a[o]=this.field.add(n[o-s],r[o]);return new t(this.field,a)},t.prototype.subtract=function(e){if(!this.field.equals(e.field))throw new rt("ModulusPolys do not have same ModulusGF field");return e.isZero()?this:this.add(e.negative())},t.prototype.multiply=function(e){return e instanceof t?this.multiplyOther(e):this.multiplyScalar(e)},t.prototype.multiplyOther=function(e){if(!this.field.equals(e.field))throw new rt("ModulusPolys do not have same ModulusGF field");if(this.isZero()||e.isZero())return new t(this.field,new Int32Array([0]));for(var n=this.coefficients,r=n.length,i=e.coefficients,a=i.length,s=new Int32Array(r+a-1),o=0;o<r;o++)for(var c=n[o],d=0;d<a;d++)s[o+d]=this.field.add(s[o+d],this.field.multiply(c,i[d]));return new t(this.field,s)},t.prototype.negative=function(){for(var e=this.coefficients.length,n=new Int32Array(e),r=0;r<e;r++)n[r]=this.field.subtract(0,this.coefficients[r]);return new t(this.field,n)},t.prototype.multiplyScalar=function(e){if(e===0)return new t(this.field,new Int32Array([0]));if(e===1)return this;for(var n=this.coefficients.length,r=new Int32Array(n),i=0;i<n;i++)r[i]=this.field.multiply(this.coefficients[i],e);return new t(this.field,r)},t.prototype.multiplyByMonomial=function(e,n){if(e<0)throw new rt;if(n===0)return new t(this.field,new Int32Array([0]));for(var r=this.coefficients.length,i=new Int32Array(r+e),a=0;a<r;a++)i[a]=this.field.multiply(this.coefficients[a],n);return new t(this.field,i)},t.prototype.toString=function(){for(var e=new At,n=this.getDegree();n>=0;n--){var r=this.getCoefficient(n);r!==0&&(r<0?(e.append(" - "),r=-r):e.length()>0&&e.append(" + "),(n===0||r!==1)&&e.append(r),n!==0&&(n===1?e.append("x"):(e.append("x^"),e.append(n))))}return e.toString()},t}(),KH=function(){function t(){}return t.prototype.add=function(e,n){return(e+n)%this.modulus},t.prototype.subtract=function(e,n){return(this.modulus+e-n)%this.modulus},t.prototype.exp=function(e){return this.expTable[e]},t.prototype.log=function(e){if(e===0)throw new rt;return this.logTable[e]},t.prototype.inverse=function(e){if(e===0)throw new LM;return this.expTable[this.modulus-this.logTable[e]-1]},t.prototype.multiply=function(e,n){return e===0||n===0?0:this.expTable[(this.logTable[e]+this.logTable[n])%(this.modulus-1)]},t.prototype.getSize=function(){return this.modulus},t.prototype.equals=function(e){return e===this},t}(),QH=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),ZH=function(t){QH(e,t);function e(n,r){var i=t.call(this)||this;i.modulus=n,i.expTable=new Int32Array(n),i.logTable=new Int32Array(n);for(var a=1,s=0;s<n;s++)i.expTable[s]=a,a=a*r%n;for(var s=0;s<n-1;s++)i.logTable[i.expTable[s]]=s;return i.zero=new Mc(i,new Int32Array([0])),i.one=new Mc(i,new Int32Array([1])),i}return e.prototype.getZero=function(){return this.zero},e.prototype.getOne=function(){return this.one},e.prototype.buildMonomial=function(n,r){if(n<0)throw new rt;if(r===0)return this.zero;var i=new Int32Array(n+1);return i[0]=r,new Mc(this,i)},e.PDF417_GF=new e(Ut.NUMBER_OF_CODEWORDS,3),e}(KH),JH=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ez=function(){function t(){this.field=ZH.PDF417_GF}return t.prototype.decode=function(e,n,r){for(var i,a,s=new Mc(this.field,e),o=new Int32Array(n),c=!1,d=n;d>0;d--){var f=s.evaluateAt(this.field.exp(d));o[n-d]=f,f!==0&&(c=!0)}if(!c)return 0;var p=this.field.getOne();if(r!=null)try{for(var g=JH(r),y=g.next();!y.done;y=g.next()){var x=y.value,_=this.field.exp(e.length-1-x),A=new Mc(this.field,new Int32Array([this.field.subtract(0,_),1]));p=p.multiply(A)}}catch(I){i={error:I}}finally{try{y&&!y.done&&(a=g.return)&&a.call(g)}finally{if(i)throw i.error}}for(var E=new Mc(this.field,o),T=this.runEuclideanAlgorithm(this.field.buildMonomial(n,1),E,n),C=T[0],D=T[1],k=this.findErrorLocations(C),B=this.findErrorMagnitudes(D,C,k),d=0;d<k.length;d++){var O=e.length-1-this.field.log(k[d]);if(O<0)throw Vr.getChecksumInstance();e[O]=this.field.subtract(e[O],B[d])}return k.length},t.prototype.runEuclideanAlgorithm=function(e,n,r){if(e.getDegree()<n.getDegree()){var i=e;e=n,n=i}for(var a=e,s=n,o=this.field.getZero(),c=this.field.getOne();s.getDegree()>=Math.round(r/2);){var d=a,f=o;if(a=s,o=c,a.isZero())throw Vr.getChecksumInstance();s=d;for(var p=this.field.getZero(),g=a.getCoefficient(a.getDegree()),y=this.field.inverse(g);s.getDegree()>=a.getDegree()&&!s.isZero();){var x=s.getDegree()-a.getDegree(),_=this.field.multiply(s.getCoefficient(s.getDegree()),y);p=p.add(this.field.buildMonomial(x,_)),s=s.subtract(a.multiplyByMonomial(x,_))}c=p.multiply(o).subtract(f).negative()}var A=c.getCoefficient(0);if(A===0)throw Vr.getChecksumInstance();var E=this.field.inverse(A),T=c.multiply(E),C=s.multiply(E);return[T,C]},t.prototype.findErrorLocations=function(e){for(var n=e.getDegree(),r=new Int32Array(n),i=0,a=1;a<this.field.getSize()&&i<n;a++)e.evaluateAt(a)===0&&(r[i]=this.field.inverse(a),i++);if(i!==n)throw Vr.getChecksumInstance();return r},t.prototype.findErrorMagnitudes=function(e,n,r){for(var i=n.getDegree(),a=new Int32Array(i),s=1;s<=i;s++)a[i-s]=this.field.multiply(s,n.getCoefficient(s));for(var o=new Mc(this.field,a),c=r.length,d=new Int32Array(c),s=0;s<c;s++){var f=this.field.inverse(r[s]),p=this.field.subtract(0,e.evaluateAt(f)),g=this.field.inverse(o.evaluateAt(f));d[s]=this.field.multiply(p,g)}return d},t}(),cw=function(){function t(e,n,r,i,a){e instanceof t?this.constructor_2(e):this.constructor_1(e,n,r,i,a)}return t.prototype.constructor_1=function(e,n,r,i,a){var s=n==null||r==null,o=i==null||a==null;if(s&&o)throw new _e;s?(n=new Xe(0,i.getY()),r=new Xe(0,a.getY())):o&&(i=new Xe(e.getWidth()-1,n.getY()),a=new Xe(e.getWidth()-1,r.getY())),this.image=e,this.topLeft=n,this.bottomLeft=r,this.topRight=i,this.bottomRight=a,this.minX=Math.trunc(Math.min(n.getX(),r.getX())),this.maxX=Math.trunc(Math.max(i.getX(),a.getX())),this.minY=Math.trunc(Math.min(n.getY(),i.getY())),this.maxY=Math.trunc(Math.max(r.getY(),a.getY()))},t.prototype.constructor_2=function(e){this.image=e.image,this.topLeft=e.getTopLeft(),this.bottomLeft=e.getBottomLeft(),this.topRight=e.getTopRight(),this.bottomRight=e.getBottomRight(),this.minX=e.getMinX(),this.maxX=e.getMaxX(),this.minY=e.getMinY(),this.maxY=e.getMaxY()},t.merge=function(e,n){return e==null?n:n==null?e:new t(e.image,e.topLeft,e.bottomLeft,n.topRight,n.bottomRight)},t.prototype.addMissingRows=function(e,n,r){var i=this.topLeft,a=this.bottomLeft,s=this.topRight,o=this.bottomRight;if(e>0){var c=r?this.topLeft:this.topRight,d=Math.trunc(c.getY()-e);d<0&&(d=0);var f=new Xe(c.getX(),d);r?i=f:s=f}if(n>0){var p=r?this.bottomLeft:this.bottomRight,g=Math.trunc(p.getY()+n);g>=this.image.getHeight()&&(g=this.image.getHeight()-1);var y=new Xe(p.getX(),g);r?a=y:o=y}return new t(this.image,i,a,s,o)},t.prototype.getMinX=function(){return this.minX},t.prototype.getMaxX=function(){return this.maxX},t.prototype.getMinY=function(){return this.minY},t.prototype.getMaxY=function(){return this.maxY},t.prototype.getTopLeft=function(){return this.topLeft},t.prototype.getTopRight=function(){return this.topRight},t.prototype.getBottomLeft=function(){return this.bottomLeft},t.prototype.getBottomRight=function(){return this.bottomRight},t}(),tz=function(){function t(e,n,r,i){this.columnCount=e,this.errorCorrectionLevel=i,this.rowCountUpperPart=n,this.rowCountLowerPart=r,this.rowCount=n+r}return t.prototype.getColumnCount=function(){return this.columnCount},t.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},t.prototype.getRowCount=function(){return this.rowCount},t.prototype.getRowCountUpperPart=function(){return this.rowCountUpperPart},t.prototype.getRowCountLowerPart=function(){return this.rowCountLowerPart},t}(),Z_=function(){function t(){this.buffer=""}return t.form=function(e,n){var r=-1;function i(s,o,c,d,f,p){if(s==="%%")return"%";if(n[++r]!==void 0){s=d?parseInt(d.substr(1)):void 0;var g=f?parseInt(f.substr(1)):void 0,y;switch(p){case"s":y=n[r];break;case"c":y=n[r][0];break;case"f":y=parseFloat(n[r]).toFixed(s);break;case"p":y=parseFloat(n[r]).toPrecision(s);break;case"e":y=parseFloat(n[r]).toExponential(s);break;case"x":y=parseInt(n[r]).toString(g||16);break;case"d":y=parseFloat(parseInt(n[r],g||10).toPrecision(s)).toFixed(0);break}y=typeof y=="object"?JSON.stringify(y):(+y).toString(g);for(var x=parseInt(c),_=c&&c[0]+""=="0"?"0":" ";y.length<x;)y=o!==void 0?y+_:_+y;return y}}var a=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(a,i)},t.prototype.format=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];this.buffer+=t.form(e,n)},t.prototype.toString=function(){return this.buffer},t}(),nz=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},$M=function(){function t(e){this.boundingBox=new cw(e),this.codewords=new Array(e.getMaxY()-e.getMinY()+1)}return t.prototype.getCodewordNearby=function(e){var n=this.getCodeword(e);if(n!=null)return n;for(var r=1;r<t.MAX_NEARBY_DISTANCE;r++){var i=this.imageRowToCodewordIndex(e)-r;if(i>=0&&(n=this.codewords[i],n!=null)||(i=this.imageRowToCodewordIndex(e)+r,i<this.codewords.length&&(n=this.codewords[i],n!=null)))return n}return null},t.prototype.imageRowToCodewordIndex=function(e){return e-this.boundingBox.getMinY()},t.prototype.setCodeword=function(e,n){this.codewords[this.imageRowToCodewordIndex(e)]=n},t.prototype.getCodeword=function(e){return this.codewords[this.imageRowToCodewordIndex(e)]},t.prototype.getBoundingBox=function(){return this.boundingBox},t.prototype.getCodewords=function(){return this.codewords},t.prototype.toString=function(){var e,n,r=new Z_,i=0;try{for(var a=nz(this.codewords),s=a.next();!s.done;s=a.next()){var o=s.value;if(o==null){r.format("%3d:    |   %n",i++);continue}r.format("%3d: %3d|%3d%n",i++,o.getRowNumber(),o.getValue())}}catch(c){e={error:c}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(e)throw e.error}}return r.toString()},t.MAX_NEARBY_DISTANCE=5,t}(),rz=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},iz=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,a=[],s;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(o){s={error:o}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return a},zh=function(){function t(){this.values=new Map}return t.prototype.setValue=function(e){e=Math.trunc(e);var n=this.values.get(e);n==null&&(n=0),n++,this.values.set(e,n)},t.prototype.getValue=function(){var e,n,r=-1,i=new Array,a=function(p,g){var y={getKey:function(){return p},getValue:function(){return g}};y.getValue()>r?(r=y.getValue(),i=[],i.push(y.getKey())):y.getValue()===r&&i.push(y.getKey())};try{for(var s=rz(this.values.entries()),o=s.next();!o.done;o=s.next()){var c=iz(o.value,2),d=c[0],f=c[1];a(d,f)}}catch(p){e={error:p}}finally{try{o&&!o.done&&(n=s.return)&&n.call(s)}finally{if(e)throw e.error}}return Ut.toIntArray(i)},t.prototype.getConfidence=function(e){return this.values.get(e)},t}(),az=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Hx=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},kI=function(t){az(e,t);function e(n,r){var i=t.call(this,n)||this;return i._isLeft=r,i}return e.prototype.setRowNumbers=function(){var n,r;try{for(var i=Hx(this.getCodewords()),a=i.next();!a.done;a=i.next()){var s=a.value;s!=null&&s.setRowNumberAsRowIndicatorColumn()}}catch(o){n={error:o}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}},e.prototype.adjustCompleteIndicatorColumnRowNumbers=function(n){var r=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(r,n);for(var i=this.getBoundingBox(),a=this._isLeft?i.getTopLeft():i.getTopRight(),s=this._isLeft?i.getBottomLeft():i.getBottomRight(),o=this.imageRowToCodewordIndex(Math.trunc(a.getY())),c=this.imageRowToCodewordIndex(Math.trunc(s.getY())),d=-1,f=1,p=0,g=o;g<c;g++)if(r[g]!=null){var y=r[g],x=y.getRowNumber()-d;if(x===0)p++;else if(x===1)f=Math.max(f,p),p=1,d=y.getRowNumber();else if(x<0||y.getRowNumber()>=n.getRowCount()||x>g)r[g]=null;else{var _=void 0;f>2?_=(f-2)*x:_=x;for(var A=_>=g,E=1;E<=_&&!A;E++)A=r[g-E]!=null;A?r[g]=null:(d=y.getRowNumber(),p=1)}}},e.prototype.getRowHeights=function(){var n,r,i=this.getBarcodeMetadata();if(i==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(i);var a=new Int32Array(i.getRowCount());try{for(var s=Hx(this.getCodewords()),o=s.next();!o.done;o=s.next()){var c=o.value;if(c!=null){var d=c.getRowNumber();if(d>=a.length)continue;a[d]++}}}catch(f){n={error:f}}finally{try{o&&!o.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}return a},e.prototype.adjustIncompleteIndicatorColumnRowNumbers=function(n){for(var r=this.getBoundingBox(),i=this._isLeft?r.getTopLeft():r.getTopRight(),a=this._isLeft?r.getBottomLeft():r.getBottomRight(),s=this.imageRowToCodewordIndex(Math.trunc(i.getY())),o=this.imageRowToCodewordIndex(Math.trunc(a.getY())),c=this.getCodewords(),d=-1,f=s;f<o;f++)if(c[f]!=null){var p=c[f];p.setRowNumberAsRowIndicatorColumn();var g=p.getRowNumber()-d;g===0||(g===1?d=p.getRowNumber():p.getRowNumber()>=n.getRowCount()?c[f]=null:d=p.getRowNumber())}},e.prototype.getBarcodeMetadata=function(){var n,r,i=this.getCodewords(),a=new zh,s=new zh,o=new zh,c=new zh;try{for(var d=Hx(i),f=d.next();!f.done;f=d.next()){var p=f.value;if(p!=null){p.setRowNumberAsRowIndicatorColumn();var g=p.getValue()%30,y=p.getRowNumber();switch(this._isLeft||(y+=2),y%3){case 0:s.setValue(g*3+1);break;case 1:c.setValue(g/3),o.setValue(g%3);break;case 2:a.setValue(g+1);break}}}}catch(_){n={error:_}}finally{try{f&&!f.done&&(r=d.return)&&r.call(d)}finally{if(n)throw n.error}}if(a.getValue().length===0||s.getValue().length===0||o.getValue().length===0||c.getValue().length===0||a.getValue()[0]<1||s.getValue()[0]+o.getValue()[0]<Ut.MIN_ROWS_IN_BARCODE||s.getValue()[0]+o.getValue()[0]>Ut.MAX_ROWS_IN_BARCODE)return null;var x=new tz(a.getValue()[0],s.getValue()[0],o.getValue()[0],c.getValue()[0]);return this.removeIncorrectCodewords(i,x),x},e.prototype.removeIncorrectCodewords=function(n,r){for(var i=0;i<n.length;i++){var a=n[i];if(n[i]!=null){var s=a.getValue()%30,o=a.getRowNumber();if(o>r.getRowCount()){n[i]=null;continue}switch(this._isLeft||(o+=2),o%3){case 0:s*3+1!==r.getRowCountUpperPart()&&(n[i]=null);break;case 1:(Math.trunc(s/3)!==r.getErrorCorrectionLevel()||s%3!==r.getRowCountLowerPart())&&(n[i]=null);break;case 2:s+1!==r.getColumnCount()&&(n[i]=null);break}}}},e.prototype.isLeft=function(){return this._isLeft},e.prototype.toString=function(){return"IsLeft: "+this._isLeft+`
`+t.prototype.toString.call(this)},e}($M),sz=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},oz=function(){function t(e,n){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=e,this.barcodeColumnCount=e.getColumnCount(),this.boundingBox=n,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}return t.prototype.getDetectionResultColumns=function(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);var e=Ut.MAX_CODEWORDS_IN_BARCODE,n;do n=e,e=this.adjustRowNumbersAndGetCount();while(e>0&&e<n);return this.detectionResultColumns},t.prototype.adjustIndicatorColumnRowNumbers=function(e){e!=null&&e.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)},t.prototype.adjustRowNumbersAndGetCount=function(){var e=this.adjustRowNumbersByRow();if(e===0)return 0;for(var n=1;n<this.barcodeColumnCount+1;n++)for(var r=this.detectionResultColumns[n].getCodewords(),i=0;i<r.length;i++)r[i]!=null&&(r[i].hasValidRowNumber()||this.adjustRowNumbers(n,i,r));return e},t.prototype.adjustRowNumbersByRow=function(){this.adjustRowNumbersFromBothRI();var e=this.adjustRowNumbersFromLRI();return e+this.adjustRowNumbersFromRRI()},t.prototype.adjustRowNumbersFromBothRI=function(){if(!(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)){for(var e=this.detectionResultColumns[0].getCodewords(),n=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),r=0;r<e.length;r++)if(e[r]!=null&&n[r]!=null&&e[r].getRowNumber()===n[r].getRowNumber())for(var i=1;i<=this.barcodeColumnCount;i++){var a=this.detectionResultColumns[i].getCodewords()[r];a!=null&&(a.setRowNumber(e[r].getRowNumber()),a.hasValidRowNumber()||(this.detectionResultColumns[i].getCodewords()[r]=null))}}},t.prototype.adjustRowNumbersFromRRI=function(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;for(var e=0,n=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),r=0;r<n.length;r++)if(n[r]!=null)for(var i=n[r].getRowNumber(),a=0,s=this.barcodeColumnCount+1;s>0&&a<this.ADJUST_ROW_NUMBER_SKIP;s--){var o=this.detectionResultColumns[s].getCodewords()[r];o!=null&&(a=t.adjustRowNumberIfValid(i,a,o),o.hasValidRowNumber()||e++)}return e},t.prototype.adjustRowNumbersFromLRI=function(){if(this.detectionResultColumns[0]==null)return 0;for(var e=0,n=this.detectionResultColumns[0].getCodewords(),r=0;r<n.length;r++)if(n[r]!=null)for(var i=n[r].getRowNumber(),a=0,s=1;s<this.barcodeColumnCount+1&&a<this.ADJUST_ROW_NUMBER_SKIP;s++){var o=this.detectionResultColumns[s].getCodewords()[r];o!=null&&(a=t.adjustRowNumberIfValid(i,a,o),o.hasValidRowNumber()||e++)}return e},t.adjustRowNumberIfValid=function(e,n,r){return r==null||r.hasValidRowNumber()||(r.isValidRowNumber(e)?(r.setRowNumber(e),n=0):++n),n},t.prototype.adjustRowNumbers=function(e,n,r){var i,a;if(this.detectionResultColumns[e-1]!=null){var s=r[n],o=this.detectionResultColumns[e-1].getCodewords(),c=o;this.detectionResultColumns[e+1]!=null&&(c=this.detectionResultColumns[e+1].getCodewords());var d=new Array(14);d[2]=o[n],d[3]=c[n],n>0&&(d[0]=r[n-1],d[4]=o[n-1],d[5]=c[n-1]),n>1&&(d[8]=r[n-2],d[10]=o[n-2],d[11]=c[n-2]),n<r.length-1&&(d[1]=r[n+1],d[6]=o[n+1],d[7]=c[n+1]),n<r.length-2&&(d[9]=r[n+2],d[12]=o[n+2],d[13]=c[n+2]);try{for(var f=sz(d),p=f.next();!p.done;p=f.next()){var g=p.value;if(t.adjustRowNumber(s,g))return}}catch(y){i={error:y}}finally{try{p&&!p.done&&(a=f.return)&&a.call(f)}finally{if(i)throw i.error}}}},t.adjustRowNumber=function(e,n){return n==null?!1:n.hasValidRowNumber()&&n.getBucket()===e.getBucket()?(e.setRowNumber(n.getRowNumber()),!0):!1},t.prototype.getBarcodeColumnCount=function(){return this.barcodeColumnCount},t.prototype.getBarcodeRowCount=function(){return this.barcodeMetadata.getRowCount()},t.prototype.getBarcodeECLevel=function(){return this.barcodeMetadata.getErrorCorrectionLevel()},t.prototype.setBoundingBox=function(e){this.boundingBox=e},t.prototype.getBoundingBox=function(){return this.boundingBox},t.prototype.setDetectionResultColumn=function(e,n){this.detectionResultColumns[e]=n},t.prototype.getDetectionResultColumn=function(e){return this.detectionResultColumns[e]},t.prototype.toString=function(){var e=this.detectionResultColumns[0];e==null&&(e=this.detectionResultColumns[this.barcodeColumnCount+1]);for(var n=new Z_,r=0;r<e.getCodewords().length;r++){n.format("CW %3d:",r);for(var i=0;i<this.barcodeColumnCount+2;i++){if(this.detectionResultColumns[i]==null){n.format("    |   ");continue}var a=this.detectionResultColumns[i].getCodewords()[r];if(a==null){n.format("    |   ");continue}n.format(" %3d|%3d",a.getRowNumber(),a.getValue())}n.format("%n")}return n.toString()},t}(),lz=function(){function t(e,n,r,i){this.rowNumber=t.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(e),this.endX=Math.trunc(n),this.bucket=Math.trunc(r),this.value=Math.trunc(i)}return t.prototype.hasValidRowNumber=function(){return this.isValidRowNumber(this.rowNumber)},t.prototype.isValidRowNumber=function(e){return e!==t.BARCODE_ROW_UNKNOWN&&this.bucket===e%3*3},t.prototype.setRowNumberAsRowIndicatorColumn=function(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))},t.prototype.getWidth=function(){return this.endX-this.startX},t.prototype.getStartX=function(){return this.startX},t.prototype.getEndX=function(){return this.endX},t.prototype.getBucket=function(){return this.bucket},t.prototype.getValue=function(){return this.value},t.prototype.getRowNumber=function(){return this.rowNumber},t.prototype.setRowNumber=function(e){this.rowNumber=e},t.prototype.toString=function(){return this.rowNumber+"|"+this.value},t.BARCODE_ROW_UNKNOWN=-1,t}(),cz=function(){function t(){}return t.initialize=function(){for(var e=0;e<Ut.SYMBOL_TABLE.length;e++)for(var n=Ut.SYMBOL_TABLE[e],r=n&1,i=0;i<Ut.BARS_IN_MODULE;i++){for(var a=0;(n&1)===r;)a+=1,n>>=1;r=n&1,t.RATIOS_TABLE[e]||(t.RATIOS_TABLE[e]=new Array(Ut.BARS_IN_MODULE)),t.RATIOS_TABLE[e][Ut.BARS_IN_MODULE-i-1]=Math.fround(a/Ut.MODULES_IN_CODEWORD)}this.bSymbolTableReady=!0},t.getDecodedValue=function(e){var n=t.getDecodedCodewordValue(t.sampleBitCounts(e));return n!==-1?n:t.getClosestDecodedValue(e)},t.sampleBitCounts=function(e){for(var n=$t.sum(e),r=new Int32Array(Ut.BARS_IN_MODULE),i=0,a=0,s=0;s<Ut.MODULES_IN_CODEWORD;s++){var o=n/(2*Ut.MODULES_IN_CODEWORD)+s*n/Ut.MODULES_IN_CODEWORD;a+e[i]<=o&&(a+=e[i],i++),r[i]++}return r},t.getDecodedCodewordValue=function(e){var n=t.getBitValue(e);return Ut.getCodeword(n)===-1?-1:n},t.getBitValue=function(e){for(var n=0,r=0;r<e.length;r++)for(var i=0;i<e[r];i++)n=n<<1|(r%2===0?1:0);return Math.trunc(n)},t.getClosestDecodedValue=function(e){var n=$t.sum(e),r=new Array(Ut.BARS_IN_MODULE);if(n>1)for(var i=0;i<r.length;i++)r[i]=Math.fround(e[i]/n);var a=rw.MAX_VALUE,s=-1;this.bSymbolTableReady||t.initialize();for(var o=0;o<t.RATIOS_TABLE.length;o++){for(var c=0,d=t.RATIOS_TABLE[o],f=0;f<Ut.BARS_IN_MODULE;f++){var p=Math.fround(d[f]-r[f]);if(c+=Math.fround(p*p),c>=a)break}c<a&&(a=c,s=Ut.SYMBOL_TABLE[o])}return s},t.bSymbolTableReady=!1,t.RATIOS_TABLE=new Array(Ut.SYMBOL_TABLE.length).map(function(e){return new Array(Ut.BARS_IN_MODULE)}),t}(),uz=function(){function t(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}return t.prototype.getSegmentIndex=function(){return this.segmentIndex},t.prototype.setSegmentIndex=function(e){this.segmentIndex=e},t.prototype.getFileId=function(){return this.fileId},t.prototype.setFileId=function(e){this.fileId=e},t.prototype.getOptionalData=function(){return this.optionalData},t.prototype.setOptionalData=function(e){this.optionalData=e},t.prototype.isLastSegment=function(){return this.lastSegment},t.prototype.setLastSegment=function(e){this.lastSegment=e},t.prototype.getSegmentCount=function(){return this.segmentCount},t.prototype.setSegmentCount=function(e){this.segmentCount=e},t.prototype.getSender=function(){return this.sender||null},t.prototype.setSender=function(e){this.sender=e},t.prototype.getAddressee=function(){return this.addressee||null},t.prototype.setAddressee=function(e){this.addressee=e},t.prototype.getFileName=function(){return this.fileName},t.prototype.setFileName=function(e){this.fileName=e},t.prototype.getFileSize=function(){return this.fileSize},t.prototype.setFileSize=function(e){this.fileSize=e},t.prototype.getChecksum=function(){return this.checksum},t.prototype.setChecksum=function(e){this.checksum=e},t.prototype.getTimestamp=function(){return this.timestamp},t.prototype.setTimestamp=function(e){this.timestamp=e},t}(),NI=function(){function t(){}return t.parseLong=function(e,n){return n===void 0&&(n=void 0),parseInt(e,n)},t}(),dz=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),fz=function(t){dz(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="NullPointerException",e}(Vi),hz=function(){function t(){}return t.prototype.writeBytes=function(e){this.writeBytesOffset(e,0,e.length)},t.prototype.writeBytesOffset=function(e,n,r){if(e==null)throw new fz;if(n<0||n>e.length||r<0||n+r>e.length||n+r<0)throw new Y_;if(r===0)return;for(var i=0;i<r;i++)this.write(e[n+i])},t.prototype.flush=function(){},t.prototype.close=function(){},t}(),pz=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),gz=function(t){pz(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e}(Vi),mz=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),yz=function(t){mz(e,t);function e(n){n===void 0&&(n=32);var r=t.call(this)||this;if(r.count=0,n<0)throw new rt("Negative initial size: "+n);return r.buf=new Uint8Array(n),r}return e.prototype.ensureCapacity=function(n){n-this.buf.length>0&&this.grow(n)},e.prototype.grow=function(n){var r=this.buf.length,i=r<<1;if(i-n<0&&(i=n),i<0){if(n<0)throw new gz;i=Ct.MAX_VALUE}this.buf=Cr.copyOfUint8Array(this.buf,i)},e.prototype.write=function(n){this.ensureCapacity(this.count+1),this.buf[this.count]=n,this.count+=1},e.prototype.writeBytesOffset=function(n,r,i){if(r<0||r>n.length||i<0||r+i-n.length>0)throw new Y_;this.ensureCapacity(this.count+i),Sn.arraycopy(n,r,this.buf,this.count,i),this.count+=i},e.prototype.writeTo=function(n){n.writeBytesOffset(this.buf,0,this.count)},e.prototype.reset=function(){this.count=0},e.prototype.toByteArray=function(){return Cr.copyOfUint8Array(this.buf,this.count)},e.prototype.size=function(){return this.count},e.prototype.toString=function(n){return n?typeof n=="string"?this.toString_string(n):this.toString_number(n):this.toString_void()},e.prototype.toString_void=function(){return new String(this.buf).toString()},e.prototype.toString_string=function(n){return new String(this.buf).toString()},e.prototype.toString_number=function(n){return new String(this.buf).toString()},e.prototype.close=function(){},e}(hz),hn;(function(t){t[t.ALPHA=0]="ALPHA",t[t.LOWER=1]="LOWER",t[t.MIXED=2]="MIXED",t[t.PUNCT=3]="PUNCT",t[t.ALPHA_SHIFT=4]="ALPHA_SHIFT",t[t.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(hn||(hn={}));function GM(){if(typeof window<"u")return window.BigInt||null;if(typeof global<"u")return global.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}var Lg;function hl(t){if(typeof Lg>"u"&&(Lg=GM()),Lg===null)throw new Error("BigInt is not supported!");return Lg(t)}function vz(){var t=[];t[0]=hl(1);var e=hl(900);t[1]=e;for(var n=2;n<16;n++)t[n]=t[n-1]*e;return t}var xz=function(){function t(){}return t.decode=function(e,n){var r=new At(""),i=Tr.ISO8859_1;r.enableDecoding(i);for(var a=1,s=e[a++],o=new uz;a<e[0];){switch(s){case t.TEXT_COMPACTION_MODE_LATCH:a=t.textCompaction(e,a,r);break;case t.BYTE_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:a=t.byteCompaction(s,e,i,a,r);break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r.append(e[a++]);break;case t.NUMERIC_COMPACTION_MODE_LATCH:a=t.numericCompaction(e,a,r);break;case t.ECI_CHARSET:Tr.getCharacterSetECIByValue(e[a++]);break;case t.ECI_GENERAL_PURPOSE:a+=2;break;case t.ECI_USER_DEFINED:a++;break;case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:a=t.decodeMacroBlock(e,a,o);break;case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:throw new je;default:a--,a=t.textCompaction(e,a,r);break}if(a<e.length)s=e[a++];else throw je.getFormatInstance()}if(r.length()===0)throw je.getFormatInstance();var c=new Y1(null,r.toString(),null,n);return c.setOther(o),c},t.decodeMacroBlock=function(e,n,r){if(n+t.NUMBER_OF_SEQUENCE_CODEWORDS>e[0])throw je.getFormatInstance();for(var i=new Int32Array(t.NUMBER_OF_SEQUENCE_CODEWORDS),a=0;a<t.NUMBER_OF_SEQUENCE_CODEWORDS;a++,n++)i[a]=e[n];r.setSegmentIndex(Ct.parseInt(t.decodeBase900toBase10(i,t.NUMBER_OF_SEQUENCE_CODEWORDS)));var s=new At;n=t.textCompaction(e,n,s),r.setFileId(s.toString());var o=-1;for(e[n]===t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(o=n+1);n<e[0];)switch(e[n]){case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(n++,e[n]){case t.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:var c=new At;n=t.textCompaction(e,n+1,c),r.setFileName(c.toString());break;case t.MACRO_PDF417_OPTIONAL_FIELD_SENDER:var d=new At;n=t.textCompaction(e,n+1,d),r.setSender(d.toString());break;case t.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:var f=new At;n=t.textCompaction(e,n+1,f),r.setAddressee(f.toString());break;case t.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:var p=new At;n=t.numericCompaction(e,n+1,p),r.setSegmentCount(Ct.parseInt(p.toString()));break;case t.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:var g=new At;n=t.numericCompaction(e,n+1,g),r.setTimestamp(NI.parseLong(g.toString()));break;case t.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:var y=new At;n=t.numericCompaction(e,n+1,y),r.setChecksum(Ct.parseInt(y.toString()));break;case t.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:var x=new At;n=t.numericCompaction(e,n+1,x),r.setFileSize(NI.parseLong(x.toString()));break;default:throw je.getFormatInstance()}break;case t.MACRO_PDF417_TERMINATOR:n++,r.setLastSegment(!0);break;default:throw je.getFormatInstance()}if(o!==-1){var _=n-o;r.isLastSegment()&&_--,r.setOptionalData(Cr.copyOfRange(e,o,o+_))}return n},t.textCompaction=function(e,n,r){for(var i=new Int32Array((e[0]-n)*2),a=new Int32Array((e[0]-n)*2),s=0,o=!1;n<e[0]&&!o;){var c=e[n++];if(c<t.TEXT_COMPACTION_MODE_LATCH)i[s]=c/30,i[s+1]=c%30,s+=2;else switch(c){case t.TEXT_COMPACTION_MODE_LATCH:i[s++]=t.TEXT_COMPACTION_MODE_LATCH;break;case t.BYTE_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:case t.NUMERIC_COMPACTION_MODE_LATCH:case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:n--,o=!0;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i[s]=t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,c=e[n++],a[s]=c,s++;break}}return t.decodeTextCompaction(i,a,s,r),n},t.decodeTextCompaction=function(e,n,r,i){for(var a=hn.ALPHA,s=hn.ALPHA,o=0;o<r;){var c=e[o],d="";switch(a){case hn.ALPHA:if(c<26)d=String.fromCharCode(65+c);else switch(c){case 26:d=" ";break;case t.LL:a=hn.LOWER;break;case t.ML:a=hn.MIXED;break;case t.PS:s=a,a=hn.PUNCT_SHIFT;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(n[o]);break;case t.TEXT_COMPACTION_MODE_LATCH:a=hn.ALPHA;break}break;case hn.LOWER:if(c<26)d=String.fromCharCode(97+c);else switch(c){case 26:d=" ";break;case t.AS:s=a,a=hn.ALPHA_SHIFT;break;case t.ML:a=hn.MIXED;break;case t.PS:s=a,a=hn.PUNCT_SHIFT;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(n[o]);break;case t.TEXT_COMPACTION_MODE_LATCH:a=hn.ALPHA;break}break;case hn.MIXED:if(c<t.PL)d=t.MIXED_CHARS[c];else switch(c){case t.PL:a=hn.PUNCT;break;case 26:d=" ";break;case t.LL:a=hn.LOWER;break;case t.AL:a=hn.ALPHA;break;case t.PS:s=a,a=hn.PUNCT_SHIFT;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(n[o]);break;case t.TEXT_COMPACTION_MODE_LATCH:a=hn.ALPHA;break}break;case hn.PUNCT:if(c<t.PAL)d=t.PUNCT_CHARS[c];else switch(c){case t.PAL:a=hn.ALPHA;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(n[o]);break;case t.TEXT_COMPACTION_MODE_LATCH:a=hn.ALPHA;break}break;case hn.ALPHA_SHIFT:if(a=s,c<26)d=String.fromCharCode(65+c);else switch(c){case 26:d=" ";break;case t.TEXT_COMPACTION_MODE_LATCH:a=hn.ALPHA;break}break;case hn.PUNCT_SHIFT:if(a=s,c<t.PAL)d=t.PUNCT_CHARS[c];else switch(c){case t.PAL:a=hn.ALPHA;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(n[o]);break;case t.TEXT_COMPACTION_MODE_LATCH:a=hn.ALPHA;break}break}d!==""&&i.append(d),o++}},t.byteCompaction=function(e,n,r,i,a){var s=new yz,o=0,c=0,d=!1;switch(e){case t.BYTE_COMPACTION_MODE_LATCH:for(var f=new Int32Array(6),p=n[i++];i<n[0]&&!d;)switch(f[o++]=p,c=900*c+p,p=n[i++],p){case t.TEXT_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH:case t.NUMERIC_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:i--,d=!0;break;default:if(o%5===0&&o>0){for(var g=0;g<6;++g)s.write(Number(hl(c)>>hl(8*(5-g))));c=0,o=0}break}i===n[0]&&p<t.TEXT_COMPACTION_MODE_LATCH&&(f[o++]=p);for(var y=0;y<o;y++)s.write(f[y]);break;case t.BYTE_COMPACTION_MODE_LATCH_6:for(;i<n[0]&&!d;){var x=n[i++];if(x<t.TEXT_COMPACTION_MODE_LATCH)o++,c=900*c+x;else switch(x){case t.TEXT_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH:case t.NUMERIC_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:i--,d=!0;break}if(o%5===0&&o>0){for(var g=0;g<6;++g)s.write(Number(hl(c)>>hl(8*(5-g))));c=0,o=0}}break}return a.append(Aa.decode(s.toByteArray(),r)),i},t.numericCompaction=function(e,n,r){for(var i=0,a=!1,s=new Int32Array(t.MAX_NUMERIC_CODEWORDS);n<e[0]&&!a;){var o=e[n++];if(n===e[0]&&(a=!0),o<t.TEXT_COMPACTION_MODE_LATCH)s[i]=o,i++;else switch(o){case t.TEXT_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:n--,a=!0;break}(i%t.MAX_NUMERIC_CODEWORDS===0||o===t.NUMERIC_COMPACTION_MODE_LATCH||a)&&i>0&&(r.append(t.decodeBase900toBase10(s,i)),i=0)}return n},t.decodeBase900toBase10=function(e,n){for(var r=hl(0),i=0;i<n;i++)r+=t.EXP900[n-i-1]*hl(e[i]);var a=r.toString();if(a.charAt(0)!=="1")throw new je;return a.substring(1)},t.TEXT_COMPACTION_MODE_LATCH=900,t.BYTE_COMPACTION_MODE_LATCH=901,t.NUMERIC_COMPACTION_MODE_LATCH=902,t.BYTE_COMPACTION_MODE_LATCH_6=924,t.ECI_USER_DEFINED=925,t.ECI_GENERAL_PURPOSE=926,t.ECI_CHARSET=927,t.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,t.MACRO_PDF417_TERMINATOR=922,t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,t.MAX_NUMERIC_CODEWORDS=15,t.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,t.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,t.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,t.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,t.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,t.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,t.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,t.PL=25,t.LL=27,t.AS=27,t.ML=28,t.AL=28,t.PS=29,t.PAL=29,t.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,t.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",t.EXP900=GM()?vz():[],t.NUMBER_OF_SEQUENCE_CODEWORDS=2,t}(),wh=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},wz=function(){function t(){}return t.decode=function(e,n,r,i,a,s,o){for(var c=new cw(e,n,r,i,a),d=null,f=null,p,g=!0;;g=!1){if(n!=null&&(d=t.getRowIndicatorColumn(e,c,n,!0,s,o)),i!=null&&(f=t.getRowIndicatorColumn(e,c,i,!1,s,o)),p=t.merge(d,f),p==null)throw _e.getNotFoundInstance();var y=p.getBoundingBox();if(g&&y!=null&&(y.getMinY()<c.getMinY()||y.getMaxY()>c.getMaxY()))c=y;else break}p.setBoundingBox(c);var x=p.getBarcodeColumnCount()+1;p.setDetectionResultColumn(0,d),p.setDetectionResultColumn(x,f);for(var _=d!=null,A=1;A<=x;A++){var E=_?A:x-A;if(p.getDetectionResultColumn(E)===void 0){var T=void 0;E===0||E===x?T=new kI(c,E===0):T=new $M(c),p.setDetectionResultColumn(E,T);for(var C=-1,D=C,k=c.getMinY();k<=c.getMaxY();k++){if(C=t.getStartColumn(p,E,k,_),C<0||C>c.getMaxX()){if(D===-1)continue;C=D}var B=t.detectCodeword(e,c.getMinX(),c.getMaxX(),_,C,k,s,o);B!=null&&(T.setCodeword(k,B),D=C,s=Math.min(s,B.getWidth()),o=Math.max(o,B.getWidth()))}}}return t.createDecoderResult(p)},t.merge=function(e,n){if(e==null&&n==null)return null;var r=t.getBarcodeMetadata(e,n);if(r==null)return null;var i=cw.merge(t.adjustBoundingBox(e),t.adjustBoundingBox(n));return new oz(r,i)},t.adjustBoundingBox=function(e){var n,r;if(e==null)return null;var i=e.getRowHeights();if(i==null)return null;var a=t.getMax(i),s=0;try{for(var o=wh(i),c=o.next();!c.done;c=o.next()){var d=c.value;if(s+=a-d,d>0)break}}catch(y){n={error:y}}finally{try{c&&!c.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}for(var f=e.getCodewords(),p=0;s>0&&f[p]==null;p++)s--;for(var g=0,p=i.length-1;p>=0&&(g+=a-i[p],!(i[p]>0));p--);for(var p=f.length-1;g>0&&f[p]==null;p--)g--;return e.getBoundingBox().addMissingRows(s,g,e.isLeft())},t.getMax=function(e){var n,r,i=-1;try{for(var a=wh(e),s=a.next();!s.done;s=a.next()){var o=s.value;i=Math.max(i,o)}}catch(c){n={error:c}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}return i},t.getBarcodeMetadata=function(e,n){var r;if(e==null||(r=e.getBarcodeMetadata())==null)return n==null?null:n.getBarcodeMetadata();var i;return n==null||(i=n.getBarcodeMetadata())==null?r:r.getColumnCount()!==i.getColumnCount()&&r.getErrorCorrectionLevel()!==i.getErrorCorrectionLevel()&&r.getRowCount()!==i.getRowCount()?null:r},t.getRowIndicatorColumn=function(e,n,r,i,a,s){for(var o=new kI(n,i),c=0;c<2;c++)for(var d=c===0?1:-1,f=Math.trunc(Math.trunc(r.getX())),p=Math.trunc(Math.trunc(r.getY()));p<=n.getMaxY()&&p>=n.getMinY();p+=d){var g=t.detectCodeword(e,0,e.getWidth(),i,f,p,a,s);g!=null&&(o.setCodeword(p,g),i?f=g.getStartX():f=g.getEndX())}return o},t.adjustCodewordCount=function(e,n){var r=n[0][1],i=r.getValue(),a=e.getBarcodeColumnCount()*e.getBarcodeRowCount()-t.getNumberOfECCodeWords(e.getBarcodeECLevel());if(i.length===0){if(a<1||a>Ut.MAX_CODEWORDS_IN_BARCODE)throw _e.getNotFoundInstance();r.setValue(a)}else i[0]!==a&&r.setValue(a)},t.createDecoderResult=function(e){var n=t.createBarcodeMatrix(e);t.adjustCodewordCount(e,n);for(var r=new Array,i=new Int32Array(e.getBarcodeRowCount()*e.getBarcodeColumnCount()),a=[],s=new Array,o=0;o<e.getBarcodeRowCount();o++)for(var c=0;c<e.getBarcodeColumnCount();c++){var d=n[o][c+1].getValue(),f=o*e.getBarcodeColumnCount()+c;d.length===0?r.push(f):d.length===1?i[f]=d[0]:(s.push(f),a.push(d))}for(var p=new Array(a.length),g=0;g<p.length;g++)p[g]=a[g];return t.createDecoderResultFromAmbiguousValues(e.getBarcodeECLevel(),i,Ut.toIntArray(r),Ut.toIntArray(s),p)},t.createDecoderResultFromAmbiguousValues=function(e,n,r,i,a){for(var s=new Int32Array(i.length),o=100;o-- >0;){for(var c=0;c<s.length;c++)n[i[c]]=a[c][s[c]];try{return t.decodeCodewords(n,e,r)}catch(f){var d=f instanceof Vr;if(!d)throw f}if(s.length===0)throw Vr.getChecksumInstance();for(var c=0;c<s.length;c++)if(s[c]<a[c].length-1){s[c]++;break}else if(s[c]=0,c===s.length-1)throw Vr.getChecksumInstance()}throw Vr.getChecksumInstance()},t.createBarcodeMatrix=function(e){for(var n,r,i,a,s=Array.from({length:e.getBarcodeRowCount()},function(){return new Array(e.getBarcodeColumnCount()+2)}),o=0;o<s.length;o++)for(var c=0;c<s[o].length;c++)s[o][c]=new zh;var d=0;try{for(var f=wh(e.getDetectionResultColumns()),p=f.next();!p.done;p=f.next()){var g=p.value;if(g!=null)try{for(var y=(i=void 0,wh(g.getCodewords())),x=y.next();!x.done;x=y.next()){var _=x.value;if(_!=null){var A=_.getRowNumber();if(A>=0){if(A>=s.length)continue;s[A][d].setValue(_.getValue())}}}}catch(E){i={error:E}}finally{try{x&&!x.done&&(a=y.return)&&a.call(y)}finally{if(i)throw i.error}}d++}}catch(E){n={error:E}}finally{try{p&&!p.done&&(r=f.return)&&r.call(f)}finally{if(n)throw n.error}}return s},t.isValidBarcodeColumn=function(e,n){return n>=0&&n<=e.getBarcodeColumnCount()+1},t.getStartColumn=function(e,n,r,i){var a,s,o=i?1:-1,c=null;if(t.isValidBarcodeColumn(e,n-o)&&(c=e.getDetectionResultColumn(n-o).getCodeword(r)),c!=null)return i?c.getEndX():c.getStartX();if(c=e.getDetectionResultColumn(n).getCodewordNearby(r),c!=null)return i?c.getStartX():c.getEndX();if(t.isValidBarcodeColumn(e,n-o)&&(c=e.getDetectionResultColumn(n-o).getCodewordNearby(r)),c!=null)return i?c.getEndX():c.getStartX();for(var d=0;t.isValidBarcodeColumn(e,n-o);){n-=o;try{for(var f=(a=void 0,wh(e.getDetectionResultColumn(n).getCodewords())),p=f.next();!p.done;p=f.next()){var g=p.value;if(g!=null)return(i?g.getEndX():g.getStartX())+o*d*(g.getEndX()-g.getStartX())}}catch(y){a={error:y}}finally{try{p&&!p.done&&(s=f.return)&&s.call(f)}finally{if(a)throw a.error}}d++}return i?e.getBoundingBox().getMinX():e.getBoundingBox().getMaxX()},t.detectCodeword=function(e,n,r,i,a,s,o,c){a=t.adjustCodewordStartColumn(e,n,r,i,a,s);var d=t.getModuleBitCount(e,n,r,i,a,s);if(d==null)return null;var f,p=$t.sum(d);if(i)f=a+p;else{for(var g=0;g<d.length/2;g++){var y=d[g];d[g]=d[d.length-1-g],d[d.length-1-g]=y}f=a,a=f-p}if(!t.checkCodewordSkew(p,o,c))return null;var x=cz.getDecodedValue(d),_=Ut.getCodeword(x);return _===-1?null:new lz(a,f,t.getCodewordBucketNumber(x),_)},t.getModuleBitCount=function(e,n,r,i,a,s){for(var o=a,c=new Int32Array(8),d=0,f=i?1:-1,p=i;(i?o<r:o>=n)&&d<c.length;)e.get(o,s)===p?(c[d]++,o+=f):(d++,p=!p);return d===c.length||o===(i?r:n)&&d===c.length-1?c:null},t.getNumberOfECCodeWords=function(e){return 2<<e},t.adjustCodewordStartColumn=function(e,n,r,i,a,s){for(var o=a,c=i?-1:1,d=0;d<2;d++){for(;(i?o>=n:o<r)&&i===e.get(o,s);){if(Math.abs(a-o)>t.CODEWORD_SKEW_SIZE)return a;o+=c}c=-c,i=!i}return o},t.checkCodewordSkew=function(e,n,r){return n-t.CODEWORD_SKEW_SIZE<=e&&e<=r+t.CODEWORD_SKEW_SIZE},t.decodeCodewords=function(e,n,r){if(e.length===0)throw je.getFormatInstance();var i=1<<n+1,a=t.correctErrors(e,r,i);t.verifyCodewordCount(e,i);var s=xz.decode(e,""+n);return s.setErrorsCorrected(a),s.setErasures(r.length),s},t.correctErrors=function(e,n,r){if(n!=null&&n.length>r/2+t.MAX_ERRORS||r<0||r>t.MAX_EC_CODEWORDS)throw Vr.getChecksumInstance();return t.errorCorrection.decode(e,r,n)},t.verifyCodewordCount=function(e,n){if(e.length<4)throw je.getFormatInstance();var r=e[0];if(r>e.length)throw je.getFormatInstance();if(r===0)if(n<e.length)e[0]=e.length-n;else throw je.getFormatInstance()},t.getBitCountForCodeword=function(e){for(var n=new Int32Array(8),r=0,i=n.length-1;!((e&1)!==r&&(r=e&1,i--,i<0));)n[i]++,e>>=1;return n},t.getCodewordBucketNumber=function(e){return e instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(e):this.getCodewordBucketNumber_number(e)},t.getCodewordBucketNumber_number=function(e){return t.getCodewordBucketNumber(t.getBitCountForCodeword(e))},t.getCodewordBucketNumber_Int32Array=function(e){return(e[0]-e[2]+e[4]-e[6]+9)%9},t.toString=function(e){for(var n=new Z_,r=0;r<e.length;r++){n.format("Row %2d: ",r);for(var i=0;i<e[r].length;i++){var a=e[r][i];a.getValue().length===0?n.format("        ",null):n.format("%4d(%2d)",a.getValue()[0],a.getConfidence(a.getValue()[0]))}n.format("%n")}return n.toString()},t.CODEWORD_SKEW_SIZE=2,t.MAX_ERRORS=3,t.MAX_EC_CODEWORDS=512,t.errorCorrection=new ez,t}(),_z=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},uw=function(){function t(){}return t.prototype.decode=function(e,n){n===void 0&&(n=null);var r=t.decode(e,n,!1);if(r==null||r.length===0||r[0]==null)throw _e.getNotFoundInstance();return r[0]},t.prototype.decodeMultiple=function(e,n){n===void 0&&(n=null);try{return t.decode(e,n,!0)}catch(r){throw r instanceof je||r instanceof Vr?_e.getNotFoundInstance():r}},t.decode=function(e,n,r){var i,a,s=new Array,o=qH.detectMultiple(e,n,r);try{for(var c=_z(o.getPoints()),d=c.next();!d.done;d=c.next()){var f=d.value,p=wz.decode(o.getBits(),f[4],f[5],f[6],f[7],t.getMinCodewordWidth(f),t.getMaxCodewordWidth(f)),g=new gi(p.getText(),p.getRawBytes(),void 0,f,et.PDF_417);g.putMetadata(ei.ERROR_CORRECTION_LEVEL,p.getECLevel());var y=p.getOther();y!=null&&g.putMetadata(ei.PDF417_EXTRA_METADATA,y),s.push(g)}}catch(x){i={error:x}}finally{try{d&&!d.done&&(a=c.return)&&a.call(c)}finally{if(i)throw i.error}}return s.map(function(x){return x})},t.getMaxWidth=function(e,n){return e==null||n==null?0:Math.trunc(Math.abs(e.getX()-n.getX()))},t.getMinWidth=function(e,n){return e==null||n==null?Ct.MAX_VALUE:Math.trunc(Math.abs(e.getX()-n.getX()))},t.getMaxCodewordWidth=function(e){return Math.floor(Math.max(Math.max(t.getMaxWidth(e[0],e[4]),t.getMaxWidth(e[6],e[2])*Ut.MODULES_IN_CODEWORD/Ut.MODULES_IN_STOP_PATTERN),Math.max(t.getMaxWidth(e[1],e[5]),t.getMaxWidth(e[7],e[3])*Ut.MODULES_IN_CODEWORD/Ut.MODULES_IN_STOP_PATTERN)))},t.getMinCodewordWidth=function(e){return Math.floor(Math.min(Math.min(t.getMinWidth(e[0],e[4]),t.getMinWidth(e[6],e[2])*Ut.MODULES_IN_CODEWORD/Ut.MODULES_IN_STOP_PATTERN),Math.min(t.getMinWidth(e[1],e[5]),t.getMinWidth(e[7],e[3])*Ut.MODULES_IN_CODEWORD/Ut.MODULES_IN_STOP_PATTERN)))},t.prototype.reset=function(){},t}(),bz=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),LI=function(t){bz(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="ReaderException",e}(Vi),BI=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Az=function(){function t(){}return t.prototype.decode=function(e,n){return this.setHints(n),this.decodeInternal(e)},t.prototype.decodeWithState=function(e){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(e)},t.prototype.setHints=function(e){this.hints=e;var n=e!=null&&e.get(Ln.TRY_HARDER)!==void 0,r=e==null?null:e.get(Ln.POSSIBLE_FORMATS),i=new Array;if(r!=null){var a=r.some(function(s){return s===et.UPC_A||s===et.UPC_E||s===et.EAN_13||s===et.EAN_8||s===et.CODABAR||s===et.CODE_39||s===et.CODE_93||s===et.CODE_128||s===et.ITF||s===et.RSS_14||s===et.RSS_EXPANDED});a&&!n&&i.push(new Hh(e)),r.includes(et.QR_CODE)&&i.push(new lw),r.includes(et.DATA_MATRIX)&&i.push(new ow),r.includes(et.AZTEC)&&i.push(new aw),r.includes(et.PDF_417)&&i.push(new uw),a&&n&&i.push(new Hh(e))}i.length===0&&(n||i.push(new Hh(e)),i.push(new lw),i.push(new ow),i.push(new aw),i.push(new uw),n&&i.push(new Hh(e))),this.readers=i},t.prototype.reset=function(){var e,n;if(this.readers!==null)try{for(var r=BI(this.readers),i=r.next();!i.done;i=r.next()){var a=i.value;a.reset()}}catch(s){e={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}},t.prototype.decodeInternal=function(e){var n,r;if(this.readers===null)throw new LI("No readers where selected, nothing can be read.");try{for(var i=BI(this.readers),a=i.next();!a.done;a=i.next()){var s=a.value;try{return s.decode(e,this.hints)}catch(o){if(o instanceof LI)continue}}}catch(o){n={error:o}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}throw new _e("No MultiFormat Readers were able to detect the code.")},t}(),Ez=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Sz=function(t){Ez(e,t);function e(n,r){n===void 0&&(n=null),r===void 0&&(r=500);var i=this,a=new Az;return a.setHints(n),i=t.call(this,a,r)||this,i}return e.prototype.decodeBitmap=function(n){return this.reader.decodeWithState(n)},e}(df),Tz=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}();(function(t){Tz(e,t);function e(n){return n===void 0&&(n=500),t.call(this,new uw,n)||this}return e})(df);var Cz=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}();(function(t){Cz(e,t);function e(n){return n===void 0&&(n=500),t.call(this,new lw,n)||this}return e})(df);var dw;(function(t){t[t.ERROR_CORRECTION=0]="ERROR_CORRECTION",t[t.CHARACTER_SET=1]="CHARACTER_SET",t[t.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",t[t.DATA_MATRIX_COMPACT=3]="DATA_MATRIX_COMPACT",t[t.MIN_SIZE=4]="MIN_SIZE",t[t.MAX_SIZE=5]="MAX_SIZE",t[t.MARGIN=6]="MARGIN",t[t.PDF417_COMPACT=7]="PDF417_COMPACT",t[t.PDF417_COMPACTION=8]="PDF417_COMPACTION",t[t.PDF417_DIMENSIONS=9]="PDF417_DIMENSIONS",t[t.AZTEC_LAYERS=10]="AZTEC_LAYERS",t[t.QR_VERSION=11]="QR_VERSION",t[t.GS1_FORMAT=12]="GS1_FORMAT",t[t.FORCE_C40=13]="FORCE_C40"})(dw||(dw={}));const Bg=dw;var WM=function(){function t(e){this.field=e,this.cachedGenerators=[],this.cachedGenerators.push(new Tl(e,Int32Array.from([1])))}return t.prototype.buildGenerator=function(e){var n=this.cachedGenerators;if(e>=n.length)for(var r=n[n.length-1],i=this.field,a=n.length;a<=e;a++){var s=r.multiply(new Tl(i,Int32Array.from([1,i.exp(a-1+i.getGeneratorBase())])));n.push(s),r=s}return n[e]},t.prototype.encode=function(e,n){if(n===0)throw new rt("No error correction bytes");var r=e.length-n;if(r<=0)throw new rt("No data bytes provided");var i=this.buildGenerator(n),a=new Int32Array(r);Sn.arraycopy(e,0,a,0,r);var s=new Tl(this.field,a);s=s.multiplyByMonomial(n,1);for(var o=s.divide(i)[1],c=o.getCoefficients(),d=n-c.length,f=0;f<d;f++)e[r+f]=0;Sn.arraycopy(c,0,e,r+d,c.length)},t}(),$h=function(){function t(){}return t.applyMaskPenaltyRule1=function(e){return t.applyMaskPenaltyRule1Internal(e,!0)+t.applyMaskPenaltyRule1Internal(e,!1)},t.applyMaskPenaltyRule2=function(e){for(var n=0,r=e.getArray(),i=e.getWidth(),a=e.getHeight(),s=0;s<a-1;s++)for(var o=r[s],c=0;c<i-1;c++){var d=o[c];d===o[c+1]&&d===r[s+1][c]&&d===r[s+1][c+1]&&n++}return t.N2*n},t.applyMaskPenaltyRule3=function(e){for(var n=0,r=e.getArray(),i=e.getWidth(),a=e.getHeight(),s=0;s<a;s++)for(var o=0;o<i;o++){var c=r[s];o+6<i&&c[o]===1&&c[o+1]===0&&c[o+2]===1&&c[o+3]===1&&c[o+4]===1&&c[o+5]===0&&c[o+6]===1&&(t.isWhiteHorizontal(c,o-4,o)||t.isWhiteHorizontal(c,o+7,o+11))&&n++,s+6<a&&r[s][o]===1&&r[s+1][o]===0&&r[s+2][o]===1&&r[s+3][o]===1&&r[s+4][o]===1&&r[s+5][o]===0&&r[s+6][o]===1&&(t.isWhiteVertical(r,o,s-4,s)||t.isWhiteVertical(r,o,s+7,s+11))&&n++}return n*t.N3},t.isWhiteHorizontal=function(e,n,r){n=Math.max(n,0),r=Math.min(r,e.length);for(var i=n;i<r;i++)if(e[i]===1)return!1;return!0},t.isWhiteVertical=function(e,n,r,i){r=Math.max(r,0),i=Math.min(i,e.length);for(var a=r;a<i;a++)if(e[a][n]===1)return!1;return!0},t.applyMaskPenaltyRule4=function(e){for(var n=0,r=e.getArray(),i=e.getWidth(),a=e.getHeight(),s=0;s<a;s++)for(var o=r[s],c=0;c<i;c++)o[c]===1&&n++;var d=e.getHeight()*e.getWidth(),f=Math.floor(Math.abs(n*2-d)*10/d);return f*t.N4},t.getDataMaskBit=function(e,n,r){var i,a;switch(e){case 0:i=r+n&1;break;case 1:i=r&1;break;case 2:i=n%3;break;case 3:i=(r+n)%3;break;case 4:i=Math.floor(r/2)+Math.floor(n/3)&1;break;case 5:a=r*n,i=(a&1)+a%3;break;case 6:a=r*n,i=(a&1)+a%3&1;break;case 7:a=r*n,i=a%3+(r+n&1)&1;break;default:throw new rt("Invalid mask pattern: "+e)}return i===0},t.applyMaskPenaltyRule1Internal=function(e,n){for(var r=0,i=n?e.getHeight():e.getWidth(),a=n?e.getWidth():e.getHeight(),s=e.getArray(),o=0;o<i;o++){for(var c=0,d=-1,f=0;f<a;f++){var p=n?s[o][f]:s[f][o];p===d?c++:(c>=5&&(r+=t.N1+(c-5)),c=1,d=p)}c>=5&&(r+=t.N1+(c-5))}return r},t.N1=3,t.N2=3,t.N3=40,t.N4=10,t}(),Iz=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Dz=function(){function t(e,n){this.width=e,this.height=n;for(var r=new Array(n),i=0;i!==n;i++)r[i]=new Uint8Array(e);this.bytes=r}return t.prototype.getHeight=function(){return this.height},t.prototype.getWidth=function(){return this.width},t.prototype.get=function(e,n){return this.bytes[n][e]},t.prototype.getArray=function(){return this.bytes},t.prototype.setNumber=function(e,n,r){this.bytes[n][e]=r},t.prototype.setBoolean=function(e,n,r){this.bytes[n][e]=r?1:0},t.prototype.clear=function(e){var n,r;try{for(var i=Iz(this.bytes),a=i.next();!a.done;a=i.next()){var s=a.value;Cr.fill(s,e)}}catch(o){n={error:o}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var n=e;if(this.width!==n.width||this.height!==n.height)return!1;for(var r=0,i=this.height;r<i;++r)for(var a=this.bytes[r],s=n.bytes[r],o=0,c=this.width;o<c;++o)if(a[o]!==s[o])return!1;return!0},t.prototype.toString=function(){for(var e=new At,n=0,r=this.height;n<r;++n){for(var i=this.bytes[n],a=0,s=this.width;a<s;++a)switch(i[a]){case 0:e.append(" 0");break;case 1:e.append(" 1");break;default:e.append("  ");break}e.append(`
`)}return e.toString()},t}(),fw=function(){function t(){this.maskPattern=-1}return t.prototype.getMode=function(){return this.mode},t.prototype.getECLevel=function(){return this.ecLevel},t.prototype.getVersion=function(){return this.version},t.prototype.getMaskPattern=function(){return this.maskPattern},t.prototype.getMatrix=function(){return this.matrix},t.prototype.toString=function(){var e=new At;return e.append(`<<
`),e.append(" mode: "),e.append(this.mode?this.mode.toString():"null"),e.append(`
 ecLevel: `),e.append(this.ecLevel?this.ecLevel.toString():"null"),e.append(`
 version: `),e.append(this.version?this.version.toString():"null"),e.append(`
 maskPattern: `),e.append(this.maskPattern.toString()),this.matrix?(e.append(`
 matrix:
`),e.append(this.matrix.toString())):e.append(`
 matrix: null
`),e.append(`>>
`),e.toString()},t.prototype.setMode=function(e){this.mode=e},t.prototype.setECLevel=function(e){this.ecLevel=e},t.prototype.setVersion=function(e){this.version=e},t.prototype.setMaskPattern=function(e){this.maskPattern=e},t.prototype.setMatrix=function(e){this.matrix=e},t.isValidMaskPattern=function(e){return e>=0&&e<t.NUM_MASK_PATTERNS},t.NUM_MASK_PATTERNS=8,t}(),Rz=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),In=function(t){Rz(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="WriterException",e}(Vi),FI=function(){function t(){}return t.clearMatrix=function(e){e.clear(255)},t.buildMatrix=function(e,n,r,i,a){t.clearMatrix(a),t.embedBasicPatterns(r,a),t.embedTypeInfo(n,i,a),t.maybeEmbedVersionInfo(r,a),t.embedDataBits(e,i,a)},t.embedBasicPatterns=function(e,n){t.embedPositionDetectionPatternsAndSeparators(n),t.embedDarkDotAtLeftBottomCorner(n),t.maybeEmbedPositionAdjustmentPatterns(e,n),t.embedTimingPatterns(n)},t.embedTypeInfo=function(e,n,r){var i=new Ur;t.makeTypeInfoBits(e,n,i);for(var a=0,s=i.getSize();a<s;++a){var o=i.get(i.getSize()-1-a),c=t.TYPE_INFO_COORDINATES[a],d=c[0],f=c[1];if(r.setBoolean(d,f,o),a<8){var p=r.getWidth()-a-1,g=8;r.setBoolean(p,g,o)}else{var p=8,g=r.getHeight()-7+(a-8);r.setBoolean(p,g,o)}}},t.maybeEmbedVersionInfo=function(e,n){if(!(e.getVersionNumber()<7)){var r=new Ur;t.makeVersionInfoBits(e,r);for(var i=17,a=0;a<6;++a)for(var s=0;s<3;++s){var o=r.get(i);i--,n.setBoolean(a,n.getHeight()-11+s,o),n.setBoolean(n.getHeight()-11+s,a,o)}}},t.embedDataBits=function(e,n,r){for(var i=0,a=-1,s=r.getWidth()-1,o=r.getHeight()-1;s>0;){for(s===6&&(s-=1);o>=0&&o<r.getHeight();){for(var c=0;c<2;++c){var d=s-c;if(t.isEmpty(r.get(d,o))){var f=void 0;i<e.getSize()?(f=e.get(i),++i):f=!1,n!==255&&$h.getDataMaskBit(n,d,o)&&(f=!f),r.setBoolean(d,o,f)}}o+=a}a=-a,o+=a,s-=2}if(i!==e.getSize())throw new In("Not all bits consumed: "+i+"/"+e.getSize())},t.findMSBSet=function(e){return 32-Ct.numberOfLeadingZeros(e)},t.calculateBCHCode=function(e,n){if(n===0)throw new rt("0 polynomial");var r=t.findMSBSet(n);for(e<<=r-1;t.findMSBSet(e)>=r;)e^=n<<t.findMSBSet(e)-r;return e},t.makeTypeInfoBits=function(e,n,r){if(!fw.isValidMaskPattern(n))throw new In("Invalid mask pattern");var i=e.getBits()<<3|n;r.appendBits(i,5);var a=t.calculateBCHCode(i,t.TYPE_INFO_POLY);r.appendBits(a,10);var s=new Ur;if(s.appendBits(t.TYPE_INFO_MASK_PATTERN,15),r.xor(s),r.getSize()!==15)throw new In("should not happen but we got: "+r.getSize())},t.makeVersionInfoBits=function(e,n){n.appendBits(e.getVersionNumber(),6);var r=t.calculateBCHCode(e.getVersionNumber(),t.VERSION_INFO_POLY);if(n.appendBits(r,12),n.getSize()!==18)throw new In("should not happen but we got: "+n.getSize())},t.isEmpty=function(e){return e===255},t.embedTimingPatterns=function(e){for(var n=8;n<e.getWidth()-8;++n){var r=(n+1)%2;t.isEmpty(e.get(n,6))&&e.setNumber(n,6,r),t.isEmpty(e.get(6,n))&&e.setNumber(6,n,r)}},t.embedDarkDotAtLeftBottomCorner=function(e){if(e.get(8,e.getHeight()-8)===0)throw new In;e.setNumber(8,e.getHeight()-8,1)},t.embedHorizontalSeparationPattern=function(e,n,r){for(var i=0;i<8;++i){if(!t.isEmpty(r.get(e+i,n)))throw new In;r.setNumber(e+i,n,0)}},t.embedVerticalSeparationPattern=function(e,n,r){for(var i=0;i<7;++i){if(!t.isEmpty(r.get(e,n+i)))throw new In;r.setNumber(e,n+i,0)}},t.embedPositionAdjustmentPattern=function(e,n,r){for(var i=0;i<5;++i)for(var a=t.POSITION_ADJUSTMENT_PATTERN[i],s=0;s<5;++s)r.setNumber(e+s,n+i,a[s])},t.embedPositionDetectionPattern=function(e,n,r){for(var i=0;i<7;++i)for(var a=t.POSITION_DETECTION_PATTERN[i],s=0;s<7;++s)r.setNumber(e+s,n+i,a[s])},t.embedPositionDetectionPatternsAndSeparators=function(e){var n=t.POSITION_DETECTION_PATTERN[0].length;t.embedPositionDetectionPattern(0,0,e),t.embedPositionDetectionPattern(e.getWidth()-n,0,e),t.embedPositionDetectionPattern(0,e.getWidth()-n,e);var r=8;t.embedHorizontalSeparationPattern(0,r-1,e),t.embedHorizontalSeparationPattern(e.getWidth()-r,r-1,e),t.embedHorizontalSeparationPattern(0,e.getWidth()-r,e);var i=7;t.embedVerticalSeparationPattern(i,0,e),t.embedVerticalSeparationPattern(e.getHeight()-i-1,0,e),t.embedVerticalSeparationPattern(i,e.getHeight()-i,e)},t.maybeEmbedPositionAdjustmentPatterns=function(e,n){if(!(e.getVersionNumber()<2))for(var r=e.getVersionNumber()-1,i=t.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[r],a=0,s=i.length;a!==s;a++){var o=i[a];if(o>=0)for(var c=0;c!==s;c++){var d=i[c];d>=0&&t.isEmpty(n.get(d,o))&&t.embedPositionAdjustmentPattern(d-2,o-2,n)}}},t.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),t.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),t.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),t.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),t.VERSION_INFO_POLY=7973,t.TYPE_INFO_POLY=1335,t.TYPE_INFO_MASK_PATTERN=21522,t}(),Oz=function(){function t(e,n){this.dataBytes=e,this.errorCorrectionBytes=n}return t.prototype.getDataBytes=function(){return this.dataBytes},t.prototype.getErrorCorrectionBytes=function(){return this.errorCorrectionBytes},t}(),VI=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};(function(){function t(){}return t.calculateMaskPenalty=function(e){return $h.applyMaskPenaltyRule1(e)+$h.applyMaskPenaltyRule2(e)+$h.applyMaskPenaltyRule3(e)+$h.applyMaskPenaltyRule4(e)},t.encode=function(e,n,r){r===void 0&&(r=null);var i=t.DEFAULT_BYTE_MODE_ENCODING,a=r!==null&&r.get(Bg.CHARACTER_SET)!==void 0;a&&(i=r.get(Bg.CHARACTER_SET).toString());var s=this.chooseMode(e,i),o=new Ur;if(s===Dn.BYTE&&(a||t.DEFAULT_BYTE_MODE_ENCODING!==i)){var c=Tr.getCharacterSetECIByName(i);c!==void 0&&this.appendECI(c,o)}this.appendModeInfo(s,o);var d=new Ur;this.appendBytes(e,s,d,i);var f;if(r!==null&&r.get(Bg.QR_VERSION)!==void 0){var p=Number.parseInt(r.get(Bg.QR_VERSION).toString(),10);f=jc.getVersionForNumber(p);var g=this.calculateBitsNeeded(s,o,d,f);if(!this.willFit(g,f,n))throw new In("Data too big for requested version")}else f=this.recommendVersion(n,s,o,d);var y=new Ur;y.appendBitArray(o);var x=s===Dn.BYTE?d.getSizeInBytes():e.length;this.appendLengthInfo(x,f,s,y),y.appendBitArray(d);var _=f.getECBlocksForLevel(n),A=f.getTotalCodewords()-_.getTotalECCodewords();this.terminateBits(A,y);var E=this.interleaveWithECBytes(y,f.getTotalCodewords(),A,_.getNumBlocks()),T=new fw;T.setECLevel(n),T.setMode(s),T.setVersion(f);var C=f.getDimensionForVersion(),D=new Dz(C,C),k=this.chooseMaskPattern(E,n,f,D);return T.setMaskPattern(k),FI.buildMatrix(E,n,f,k,D),T.setMatrix(D),T},t.recommendVersion=function(e,n,r,i){var a=this.calculateBitsNeeded(n,r,i,jc.getVersionForNumber(1)),s=this.chooseVersion(a,e),o=this.calculateBitsNeeded(n,r,i,s);return this.chooseVersion(o,e)},t.calculateBitsNeeded=function(e,n,r,i){return n.getSize()+e.getCharacterCountBits(i)+r.getSize()},t.getAlphanumericCode=function(e){return e<t.ALPHANUMERIC_TABLE.length?t.ALPHANUMERIC_TABLE[e]:-1},t.chooseMode=function(e,n){if(n===void 0&&(n=null),Tr.SJIS.getName()===n&&this.isOnlyDoubleByteKanji(e))return Dn.KANJI;for(var r=!1,i=!1,a=0,s=e.length;a<s;++a){var o=e.charAt(a);if(t.isDigit(o))r=!0;else if(this.getAlphanumericCode(o.charCodeAt(0))!==-1)i=!0;else return Dn.BYTE}return i?Dn.ALPHANUMERIC:r?Dn.NUMERIC:Dn.BYTE},t.isOnlyDoubleByteKanji=function(e){var n;try{n=Aa.encode(e,Tr.SJIS)}catch{return!1}var r=n.length;if(r%2!==0)return!1;for(var i=0;i<r;i+=2){var a=n[i]&255;if((a<129||a>159)&&(a<224||a>235))return!1}return!0},t.chooseMaskPattern=function(e,n,r,i){for(var a=Number.MAX_SAFE_INTEGER,s=-1,o=0;o<fw.NUM_MASK_PATTERNS;o++){FI.buildMatrix(e,n,r,o,i);var c=this.calculateMaskPenalty(i);c<a&&(a=c,s=o)}return s},t.chooseVersion=function(e,n){for(var r=1;r<=40;r++){var i=jc.getVersionForNumber(r);if(t.willFit(e,i,n))return i}throw new In("Data too big")},t.willFit=function(e,n,r){var i=n.getTotalCodewords(),a=n.getECBlocksForLevel(r),s=a.getTotalECCodewords(),o=i-s,c=(e+7)/8;return o>=c},t.terminateBits=function(e,n){var r=e*8;if(n.getSize()>r)throw new In("data bits cannot fit in the QR Code"+n.getSize()+" > "+r);for(var i=0;i<4&&n.getSize()<r;++i)n.appendBit(!1);var a=n.getSize()&7;if(a>0)for(var i=a;i<8;i++)n.appendBit(!1);for(var s=e-n.getSizeInBytes(),i=0;i<s;++i)n.appendBits((i&1)===0?236:17,8);if(n.getSize()!==r)throw new In("Bits size does not equal capacity")},t.getNumDataBytesAndNumECBytesForBlockID=function(e,n,r,i,a,s){if(i>=r)throw new In("Block ID too large");var o=e%r,c=r-o,d=Math.floor(e/r),f=d+1,p=Math.floor(n/r),g=p+1,y=d-p,x=f-g;if(y!==x)throw new In("EC bytes mismatch");if(r!==c+o)throw new In("RS blocks mismatch");if(e!==(p+y)*c+(g+x)*o)throw new In("Total bytes mismatch");i<c?(a[0]=p,s[0]=y):(a[0]=g,s[0]=x)},t.interleaveWithECBytes=function(e,n,r,i){var a,s,o,c;if(e.getSizeInBytes()!==r)throw new In("Number of bits and data bytes does not match");for(var d=0,f=0,p=0,g=new Array,y=0;y<i;++y){var x=new Int32Array(1),_=new Int32Array(1);t.getNumDataBytesAndNumECBytesForBlockID(n,r,i,y,x,_);var A=x[0],E=new Uint8Array(A);e.toBytes(8*d,E,0,A);var T=t.generateECBytes(E,_[0]);g.push(new Oz(E,T)),f=Math.max(f,A),p=Math.max(p,T.length),d+=x[0]}if(r!==d)throw new In("Data bytes does not match offset");for(var C=new Ur,y=0;y<f;++y)try{for(var D=(a=void 0,VI(g)),k=D.next();!k.done;k=D.next()){var B=k.value,E=B.getDataBytes();y<E.length&&C.appendBits(E[y],8)}}catch(V){a={error:V}}finally{try{k&&!k.done&&(s=D.return)&&s.call(D)}finally{if(a)throw a.error}}for(var y=0;y<p;++y)try{for(var O=(o=void 0,VI(g)),I=O.next();!I.done;I=O.next()){var B=I.value,T=B.getErrorCorrectionBytes();y<T.length&&C.appendBits(T[y],8)}}catch(V){o={error:V}}finally{try{I&&!I.done&&(c=O.return)&&c.call(O)}finally{if(o)throw o.error}}if(n!==C.getSizeInBytes())throw new In("Interleaving error: "+n+" and "+C.getSizeInBytes()+" differ.");return C},t.generateECBytes=function(e,n){for(var r=e.length,i=new Int32Array(r+n),a=0;a<r;a++)i[a]=e[a]&255;new WM(Bi.QR_CODE_FIELD_256).encode(i,n);for(var s=new Uint8Array(n),a=0;a<n;a++)s[a]=i[r+a];return s},t.appendModeInfo=function(e,n){n.appendBits(e.getBits(),4)},t.appendLengthInfo=function(e,n,r,i){var a=r.getCharacterCountBits(n);if(e>=1<<a)throw new In(e+" is bigger than "+((1<<a)-1));i.appendBits(e,a)},t.appendBytes=function(e,n,r,i){switch(n){case Dn.NUMERIC:t.appendNumericBytes(e,r);break;case Dn.ALPHANUMERIC:t.appendAlphanumericBytes(e,r);break;case Dn.BYTE:t.append8BitBytes(e,r,i);break;case Dn.KANJI:t.appendKanjiBytes(e,r);break;default:throw new In("Invalid mode: "+n)}},t.getDigit=function(e){return e.charCodeAt(0)-48},t.isDigit=function(e){var n=t.getDigit(e);return n>=0&&n<=9},t.appendNumericBytes=function(e,n){for(var r=e.length,i=0;i<r;){var a=t.getDigit(e.charAt(i));if(i+2<r){var s=t.getDigit(e.charAt(i+1)),o=t.getDigit(e.charAt(i+2));n.appendBits(a*100+s*10+o,10),i+=3}else if(i+1<r){var s=t.getDigit(e.charAt(i+1));n.appendBits(a*10+s,7),i+=2}else n.appendBits(a,4),i++}},t.appendAlphanumericBytes=function(e,n){for(var r=e.length,i=0;i<r;){var a=t.getAlphanumericCode(e.charCodeAt(i));if(a===-1)throw new In;if(i+1<r){var s=t.getAlphanumericCode(e.charCodeAt(i+1));if(s===-1)throw new In;n.appendBits(a*45+s,11),i+=2}else n.appendBits(a,6),i++}},t.append8BitBytes=function(e,n,r){var i;try{i=Aa.encode(e,r)}catch(c){throw new In(c)}for(var a=0,s=i.length;a!==s;a++){var o=i[a];n.appendBits(o,8)}},t.appendKanjiBytes=function(e,n){var r;try{r=Aa.encode(e,Tr.SJIS)}catch(p){throw new In(p)}for(var i=r.length,a=0;a<i;a+=2){var s=r[a]&255,o=r[a+1]&255,c=s<<8&4294967295|o,d=-1;if(c>=33088&&c<=40956?d=c-33088:c>=57408&&c<=60351&&(d=c-49472),d===-1)throw new In("Invalid byte sequence");var f=(d>>8)*192+(d&255);n.appendBits(f,13)}},t.appendECI=function(e,n){n.appendBits(Dn.ECI.getBits(),4),n.appendBits(e.getValue(),8)},t.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),t.DEFAULT_BYTE_MODE_ENCODING=Tr.UTF8.getName(),t})();var Mz=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}();(function(t){Mz(e,t);function e(n,r,i,a,s,o,c,d){var f=t.call(this,o,c)||this;if(f.yuvData=n,f.dataWidth=r,f.dataHeight=i,f.left=a,f.top=s,a+o>r||s+c>i)throw new rt("Crop rectangle does not fit within image data.");return d&&f.reverseHorizontal(o,c),f}return e.prototype.getRow=function(n,r){if(n<0||n>=this.getHeight())throw new rt("Requested row is outside the image: "+n);var i=this.getWidth();(r==null||r.length<i)&&(r=new Uint8ClampedArray(i));var a=(n+this.top)*this.dataWidth+this.left;return Sn.arraycopy(this.yuvData,a,r,0,i),r},e.prototype.getMatrix=function(){var n=this.getWidth(),r=this.getHeight();if(n===this.dataWidth&&r===this.dataHeight)return this.yuvData;var i=n*r,a=new Uint8ClampedArray(i),s=this.top*this.dataWidth+this.left;if(n===this.dataWidth)return Sn.arraycopy(this.yuvData,s,a,0,i),a;for(var o=0;o<r;o++){var c=o*n;Sn.arraycopy(this.yuvData,s,a,c,n),s+=this.dataWidth}return a},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(n,r,i,a){return new e(this.yuvData,this.dataWidth,this.dataHeight,this.left+n,this.top+r,i,a,!1)},e.prototype.renderThumbnail=function(){for(var n=this.getWidth()/e.THUMBNAIL_SCALE_FACTOR,r=this.getHeight()/e.THUMBNAIL_SCALE_FACTOR,i=new Int32Array(n*r),a=this.yuvData,s=this.top*this.dataWidth+this.left,o=0;o<r;o++){for(var c=o*n,d=0;d<n;d++){var f=a[s+d*e.THUMBNAIL_SCALE_FACTOR]&255;i[c+d]=4278190080|f*65793}s+=this.dataWidth*e.THUMBNAIL_SCALE_FACTOR}return i},e.prototype.getThumbnailWidth=function(){return this.getWidth()/e.THUMBNAIL_SCALE_FACTOR},e.prototype.getThumbnailHeight=function(){return this.getHeight()/e.THUMBNAIL_SCALE_FACTOR},e.prototype.reverseHorizontal=function(n,r){for(var i=this.yuvData,a=0,s=this.top*this.dataWidth+this.left;a<r;a++,s+=this.dataWidth)for(var o=s+n/2,c=s,d=s+n-1;c<o;c++,d--){var f=i[c];i[c]=i[d],i[d]=f}},e.prototype.invert=function(){return new q_(this)},e.THUMBNAIL_SCALE_FACTOR=2,e})(W1);var Pz=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}();(function(t){Pz(e,t);function e(n,r,i,a,s,o,c){var d=t.call(this,r,i)||this;if(d.dataWidth=a,d.dataHeight=s,d.left=o,d.top=c,n.BYTES_PER_ELEMENT===4){for(var f=r*i,p=new Uint8ClampedArray(f),g=0;g<f;g++){var y=n[g],x=y>>16&255,_=y>>7&510,A=y&255;p[g]=(x+_+A)/4&255}d.luminances=p}else d.luminances=n;if(a===void 0&&(d.dataWidth=r),s===void 0&&(d.dataHeight=i),o===void 0&&(d.left=0),c===void 0&&(d.top=0),d.left+r>d.dataWidth||d.top+i>d.dataHeight)throw new rt("Crop rectangle does not fit within image data.");return d}return e.prototype.getRow=function(n,r){if(n<0||n>=this.getHeight())throw new rt("Requested row is outside the image: "+n);var i=this.getWidth();(r==null||r.length<i)&&(r=new Uint8ClampedArray(i));var a=(n+this.top)*this.dataWidth+this.left;return Sn.arraycopy(this.luminances,a,r,0,i),r},e.prototype.getMatrix=function(){var n=this.getWidth(),r=this.getHeight();if(n===this.dataWidth&&r===this.dataHeight)return this.luminances;var i=n*r,a=new Uint8ClampedArray(i),s=this.top*this.dataWidth+this.left;if(n===this.dataWidth)return Sn.arraycopy(this.luminances,s,a,0,i),a;for(var o=0;o<r;o++){var c=o*n;Sn.arraycopy(this.luminances,s,a,c,n),s+=this.dataWidth}return a},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(n,r,i,a){return new e(this.luminances,i,a,this.dataWidth,this.dataHeight,this.left+n,this.top+r)},e.prototype.invert=function(){return new q_(this)},e})(W1);var kz=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Nz=function(t){kz(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.forName=function(n){return this.getCharacterSetECIByName(n)},e}(Tr),Lz=function(){function t(){}return t.ISO_8859_1=Tr.ISO8859_1,t}(),hw,Bz=301,Fz=function(t,e){for(var n=1,r=0;r<255;r++)e[r]=n,t[n]=r,n*=2,n>=256&&(n^=Bz);return{LOG:t,ALOG:e}};hw=Fz([],[]),hw.LOG;hw.ALOG;var jI;(function(t){t[t.FORCE_NONE=0]="FORCE_NONE",t[t.FORCE_SQUARE=1]="FORCE_SQUARE",t[t.FORCE_RECTANGLE=2]="FORCE_RECTANGLE"})(jI||(jI={}));var UI=129,YM=230,Vz=231,jz=235,Uz=236,Hz=237,zz=238,$z=239,Gz=240,zx=254,Wz=254,HI="[)>05",zI="[)>06",$I="",on=0,Qr=1,Ei=2,br=3,Br=4,li=5,Yz=function(){function t(){}return t.prototype.getEncodingMode=function(){return on},t.prototype.encode=function(e){var n=Va.determineConsecutiveDigitCount(e.getMessage(),e.pos);if(n>=2)e.writeCodeword(this.encodeASCIIDigits(e.getMessage().charCodeAt(e.pos),e.getMessage().charCodeAt(e.pos+1))),e.pos+=2;else{var r=e.getCurrentChar(),i=Va.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(i!==this.getEncodingMode())switch(i){case li:e.writeCodeword(Vz),e.signalEncoderChange(li);return;case Qr:e.writeCodeword(YM),e.signalEncoderChange(Qr);return;case br:e.writeCodeword(zz),e.signalEncoderChange(br);break;case Ei:e.writeCodeword($z),e.signalEncoderChange(Ei);break;case Br:e.writeCodeword(Gz),e.signalEncoderChange(Br);break;default:throw new Error("Illegal mode: "+i)}else Va.isExtendedASCII(r)?(e.writeCodeword(jz),e.writeCodeword(r-128+1),e.pos++):(e.writeCodeword(r+1),e.pos++)}},t.prototype.encodeASCIIDigits=function(e,n){if(Va.isDigit(e)&&Va.isDigit(n)){var r=(e-48)*10+(n-48);return r+130}throw new Error("not digits: "+e+n)},t}(),qz=function(){function t(){}return t.prototype.getEncodingMode=function(){return li},t.prototype.encode=function(e){var n=new At;for(n.append(0);e.hasMoreCharacters();){var r=e.getCurrentChar();n.append(r),e.pos++;var i=Va.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(i!==this.getEncodingMode()){e.signalEncoderChange(on);break}}var a=n.length()-1,s=1,o=e.getCodewordCount()+a+s;e.updateSymbolInfo(o);var c=e.getSymbolInfo().getDataCapacity()-o>0;if(e.hasMoreCharacters()||c)if(a<=249)n.setCharAt(0,Vt.getCharAt(a));else if(a<=1555)n.setCharAt(0,Vt.getCharAt(Math.floor(a/250)+249)),n.insert(1,Vt.getCharAt(a%250));else throw new Error("Message length not in valid ranges: "+a);for(var d=0,r=n.length();d<r;d++)e.writeCodeword(this.randomize255State(n.charAt(d).charCodeAt(0),e.getCodewordCount()+1))},t.prototype.randomize255State=function(e,n){var r=149*n%255+1,i=e+r;return i<=255?i:i-256},t}(),J_=function(){function t(){}return t.prototype.getEncodingMode=function(){return Qr},t.prototype.encodeMaximal=function(e){for(var n=new At,r=0,i=e.pos,a=0;e.hasMoreCharacters();){var s=e.getCurrentChar();e.pos++,r=this.encodeChar(s,n),n.length()%3===0&&(i=e.pos,a=n.length())}if(a!==n.length()){var o=Math.floor(n.length()/3*2),c=Math.floor(e.getCodewordCount()+o+1);e.updateSymbolInfo(c);var d=e.getSymbolInfo().getDataCapacity()-c,f=Math.floor(n.length()%3);(f===2&&d!==2||f===1&&(r>3||d!==1))&&(e.pos=i)}n.length()>0&&e.writeCodeword(YM),this.handleEOD(e,n)},t.prototype.encode=function(e){for(var n=new At;e.hasMoreCharacters();){var r=e.getCurrentChar();e.pos++;var i=this.encodeChar(r,n),a=Math.floor(n.length()/3)*2,s=e.getCodewordCount()+a;e.updateSymbolInfo(s);var o=e.getSymbolInfo().getDataCapacity()-s;if(!e.hasMoreCharacters()){var c=new At;for(n.length()%3===2&&o!==2&&(i=this.backtrackOneCharacter(e,n,c,i));n.length()%3===1&&(i>3||o!==1);)i=this.backtrackOneCharacter(e,n,c,i);break}var d=n.length();if(d%3===0){var f=Va.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(f!==this.getEncodingMode()){e.signalEncoderChange(on);break}}}this.handleEOD(e,n)},t.prototype.backtrackOneCharacter=function(e,n,r,i){var a=n.length(),s=n.toString().substring(0,a-i);n.setLengthToZero(),n.append(s),e.pos--;var o=e.getCurrentChar();return i=this.encodeChar(o,r),e.resetSymbolInfo(),i},t.prototype.writeNextTriplet=function(e,n){e.writeCodewords(this.encodeToCodewords(n.toString()));var r=n.toString().substring(3);n.setLengthToZero(),n.append(r)},t.prototype.handleEOD=function(e,n){var r=Math.floor(n.length()/3*2),i=n.length()%3,a=e.getCodewordCount()+r;e.updateSymbolInfo(a);var s=e.getSymbolInfo().getDataCapacity()-a;if(i===2){for(n.append("\0");n.length()>=3;)this.writeNextTriplet(e,n);e.hasMoreCharacters()&&e.writeCodeword(zx)}else if(s===1&&i===1){for(;n.length()>=3;)this.writeNextTriplet(e,n);e.hasMoreCharacters()&&e.writeCodeword(zx),e.pos--}else if(i===0){for(;n.length()>=3;)this.writeNextTriplet(e,n);(s>0||e.hasMoreCharacters())&&e.writeCodeword(zx)}else throw new Error("Unexpected case. Please report!");e.signalEncoderChange(on)},t.prototype.encodeChar=function(e,n){if(e===32)return n.append(3),1;if(e>=48&&e<=57)return n.append(e-48+4),1;if(e>=65&&e<=90)return n.append(e-65+14),1;if(e<32)return n.append(0),n.append(e),2;if(e<=47)return n.append(1),n.append(e-33),2;if(e<=64)return n.append(1),n.append(e-58+15),2;if(e<=95)return n.append(1),n.append(e-91+22),2;if(e<=127)return n.append(2),n.append(e-96),2;n.append("1");var r=2;return r+=this.encodeChar(e-128,n),r},t.prototype.encodeToCodewords=function(e){var n=1600*e.charCodeAt(0)+40*e.charCodeAt(1)+e.charCodeAt(2)+1,r=n/256,i=n%256,a=new At;return a.append(r),a.append(i),a.toString()},t}(),Xz=function(){function t(){}return t.prototype.getEncodingMode=function(){return Br},t.prototype.encode=function(e){for(var n=new At;e.hasMoreCharacters();){var r=e.getCurrentChar();this.encodeChar(r,n),e.pos++;var i=n.length();if(i>=4){e.writeCodewords(this.encodeToCodewords(n.toString()));var a=n.toString().substring(4);n.setLengthToZero(),n.append(a);var s=Va.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(s!==this.getEncodingMode()){e.signalEncoderChange(on);break}}}n.append(Vt.getCharAt(31)),this.handleEOD(e,n)},t.prototype.handleEOD=function(e,n){try{var r=n.length();if(r===0)return;if(r===1){e.updateSymbolInfo();var i=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount(),a=e.getRemainingCharacters();if(a>i&&(e.updateSymbolInfo(e.getCodewordCount()+1),i=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount()),a<=i&&i<=2)return}if(r>4)throw new Error("Count must not exceed 4");var s=r-1,o=this.encodeToCodewords(n.toString()),c=!e.hasMoreCharacters(),d=c&&s<=2;if(s<=2){e.updateSymbolInfo(e.getCodewordCount()+s);var i=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount();i>=3&&(d=!1,e.updateSymbolInfo(e.getCodewordCount()+o.length))}d?(e.resetSymbolInfo(),e.pos-=s):e.writeCodewords(o)}finally{e.signalEncoderChange(on)}},t.prototype.encodeChar=function(e,n){e>=32&&e<=63?n.append(e):e>=64&&e<=94?n.append(Vt.getCharAt(e-64)):Va.illegalCharacter(Vt.getCharAt(e))},t.prototype.encodeToCodewords=function(e){var n=e.length;if(n===0)throw new Error("StringBuilder must not be empty");var r=e.charAt(0).charCodeAt(0),i=n>=2?e.charAt(1).charCodeAt(0):0,a=n>=3?e.charAt(2).charCodeAt(0):0,s=n>=4?e.charAt(3).charCodeAt(0):0,o=(r<<18)+(i<<12)+(a<<6)+s,c=o>>16&255,d=o>>8&255,f=o&255,p=new At;return p.append(c),n>=2&&p.append(d),n>=3&&p.append(f),p.toString()},t}(),Kz=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Qz=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Kt=function(){function t(e,n,r,i,a,s,o,c){o===void 0&&(o=0),c===void 0&&(c=0),this.rectangular=e,this.dataCapacity=n,this.errorCodewords=r,this.matrixWidth=i,this.matrixHeight=a,this.dataRegions=s,this.rsBlockData=o,this.rsBlockError=c}return t.lookup=function(e,n,r,i,a){var s,o;n===void 0&&(n=0),r===void 0&&(r=null),i===void 0&&(i=null),a===void 0&&(a=!0);try{for(var c=Qz(Jz),d=c.next();!d.done;d=c.next()){var f=d.value;if(!(n===1&&f.rectangular)&&!(n===2&&!f.rectangular)&&!(r!=null&&(f.getSymbolWidth()<r.getWidth()||f.getSymbolHeight()<r.getHeight()))&&!(i!=null&&(f.getSymbolWidth()>i.getWidth()||f.getSymbolHeight()>i.getHeight()))&&e<=f.dataCapacity)return f}}catch(p){s={error:p}}finally{try{d&&!d.done&&(o=c.return)&&o.call(c)}finally{if(s)throw s.error}}if(a)throw new Error("Can't find a symbol arrangement that matches the message. Data codewords: "+e);return null},t.prototype.getHorizontalDataRegions=function(){switch(this.dataRegions){case 1:return 1;case 2:case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},t.prototype.getVerticalDataRegions=function(){switch(this.dataRegions){case 1:case 2:return 1;case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},t.prototype.getSymbolDataWidth=function(){return this.getHorizontalDataRegions()*this.matrixWidth},t.prototype.getSymbolDataHeight=function(){return this.getVerticalDataRegions()*this.matrixHeight},t.prototype.getSymbolWidth=function(){return this.getSymbolDataWidth()+this.getHorizontalDataRegions()*2},t.prototype.getSymbolHeight=function(){return this.getSymbolDataHeight()+this.getVerticalDataRegions()*2},t.prototype.getCodewordCount=function(){return this.dataCapacity+this.errorCodewords},t.prototype.getInterleavedBlockCount=function(){return this.rsBlockData?this.dataCapacity/this.rsBlockData:1},t.prototype.getDataCapacity=function(){return this.dataCapacity},t.prototype.getErrorCodewords=function(){return this.errorCodewords},t.prototype.getDataLengthForInterleavedBlock=function(e){return this.rsBlockData},t.prototype.getErrorLengthForInterleavedBlock=function(e){return this.rsBlockError},t}(),Zz=function(t){Kz(e,t);function e(){return t.call(this,!1,1558,620,22,22,36,-1,62)||this}return e.prototype.getInterleavedBlockCount=function(){return 10},e.prototype.getDataLengthForInterleavedBlock=function(n){return n<=8?156:155},e}(Kt),Jz=[new Kt(!1,3,5,8,8,1),new Kt(!1,5,7,10,10,1),new Kt(!0,5,7,16,6,1),new Kt(!1,8,10,12,12,1),new Kt(!0,10,11,14,6,2),new Kt(!1,12,12,14,14,1),new Kt(!0,16,14,24,10,1),new Kt(!1,18,14,16,16,1),new Kt(!1,22,18,18,18,1),new Kt(!0,22,18,16,10,2),new Kt(!1,30,20,20,20,1),new Kt(!0,32,24,16,14,2),new Kt(!1,36,24,22,22,1),new Kt(!1,44,28,24,24,1),new Kt(!0,49,28,22,14,2),new Kt(!1,62,36,14,14,4),new Kt(!1,86,42,16,16,4),new Kt(!1,114,48,18,18,4),new Kt(!1,144,56,20,20,4),new Kt(!1,174,68,22,22,4),new Kt(!1,204,84,24,24,4,102,42),new Kt(!1,280,112,14,14,16,140,56),new Kt(!1,368,144,16,16,16,92,36),new Kt(!1,456,192,18,18,16,114,48),new Kt(!1,576,224,20,20,16,144,56),new Kt(!1,696,272,22,22,16,174,68),new Kt(!1,816,336,24,24,16,136,56),new Kt(!1,1050,408,18,18,36,175,68),new Kt(!1,1304,496,20,20,36,163,62),new Zz],e$=function(){function t(e){this.msg=e,this.pos=0,this.skipAtEnd=0;for(var n=e.split("").map(function(o){return o.charCodeAt(0)}),r=new At,i=0,a=n.length;i<a;i++){var s=String.fromCharCode(n[i]&255);if(s==="?"&&e.charAt(i)!=="?")throw new Error("Message contains characters outside ISO-8859-1 encoding.");r.append(s)}this.msg=r.toString(),this.shape=0,this.codewords=new At,this.newEncoding=-1}return t.prototype.setSymbolShape=function(e){this.shape=e},t.prototype.setSizeConstraints=function(e,n){this.minSize=e,this.maxSize=n},t.prototype.getMessage=function(){return this.msg},t.prototype.setSkipAtEnd=function(e){this.skipAtEnd=e},t.prototype.getCurrentChar=function(){return this.msg.charCodeAt(this.pos)},t.prototype.getCurrent=function(){return this.msg.charCodeAt(this.pos)},t.prototype.getCodewords=function(){return this.codewords},t.prototype.writeCodewords=function(e){this.codewords.append(e)},t.prototype.writeCodeword=function(e){this.codewords.append(e)},t.prototype.getCodewordCount=function(){return this.codewords.length()},t.prototype.getNewEncoding=function(){return this.newEncoding},t.prototype.signalEncoderChange=function(e){this.newEncoding=e},t.prototype.resetEncoderSignal=function(){this.newEncoding=-1},t.prototype.hasMoreCharacters=function(){return this.pos<this.getTotalMessageCharCount()},t.prototype.getTotalMessageCharCount=function(){return this.msg.length-this.skipAtEnd},t.prototype.getRemainingCharacters=function(){return this.getTotalMessageCharCount()-this.pos},t.prototype.getSymbolInfo=function(){return this.symbolInfo},t.prototype.updateSymbolInfo=function(e){e===void 0&&(e=this.getCodewordCount()),(this.symbolInfo==null||e>this.symbolInfo.getDataCapacity())&&(this.symbolInfo=Kt.lookup(e,this.shape,this.minSize,this.maxSize,!0))},t.prototype.resetSymbolInfo=function(){this.symbolInfo=null},t}(),t$=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),n$=function(t){t$(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.getEncodingMode=function(){return br},e.prototype.encode=function(n){for(var r=new At;n.hasMoreCharacters();){var i=n.getCurrentChar();n.pos++,this.encodeChar(i,r);var a=r.length();if(a%3===0){this.writeNextTriplet(n,r);var s=Va.lookAheadTest(n.getMessage(),n.pos,this.getEncodingMode());if(s!==this.getEncodingMode()){n.signalEncoderChange(on);break}}}this.handleEOD(n,r)},e.prototype.encodeChar=function(n,r){switch(n){case 13:r.append(0);break;case 42:r.append(1);break;case 62:r.append(2);break;case 32:r.append(3);break;default:n>=48&&n<=57?r.append(n-48+4):n>=65&&n<=90?r.append(n-65+14):Va.illegalCharacter(Vt.getCharAt(n));break}return 1},e.prototype.handleEOD=function(n,r){n.updateSymbolInfo();var i=n.getSymbolInfo().getDataCapacity()-n.getCodewordCount(),a=r.length();n.pos-=a,(n.getRemainingCharacters()>1||i>1||n.getRemainingCharacters()!==i)&&n.writeCodeword(Wz),n.getNewEncoding()<0&&n.signalEncoderChange(on)},e}(J_),r$=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),i$=function(t){r$(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.getEncodingMode=function(){return Ei},e.prototype.encodeChar=function(n,r){if(n===32)return r.append(3),1;if(n>=48&&n<=57)return r.append(n-48+4),1;if(n>=97&&n<=122)return r.append(n-97+14),1;if(n<32)return r.append(0),r.append(n),2;if(n<=47)return r.append(1),r.append(n-33),2;if(n<=64)return r.append(1),r.append(n-58+15),2;if(n>=91&&n<=95)return r.append(1),r.append(n-91+22),2;if(n===96)return r.append(2),r.append(0),2;if(n<=90)return r.append(2),r.append(n-65+1),2;if(n<=127)return r.append(2),r.append(n-123+27),2;r.append("1");var i=2;return i+=this.encodeChar(n-128,r),i},e}(J_),Va=function(){function t(){}return t.randomize253State=function(e){var n=149*e%253+1,r=UI+n;return r<=254?r:r-254},t.encodeHighLevel=function(e,n,r,i,a){n===void 0&&(n=0),r===void 0&&(r=null),i===void 0&&(i=null),a===void 0&&(a=!1);var s=new J_,o=[new Yz,s,new i$,new n$,new Xz,new qz],c=new e$(e);c.setSymbolShape(n),c.setSizeConstraints(r,i),e.startsWith(HI)&&e.endsWith($I)?(c.writeCodeword(Uz),c.setSkipAtEnd(2),c.pos+=HI.length):e.startsWith(zI)&&e.endsWith($I)&&(c.writeCodeword(Hz),c.setSkipAtEnd(2),c.pos+=zI.length);var d=on;for(a&&(s.encodeMaximal(c),d=c.getNewEncoding(),c.resetEncoderSignal());c.hasMoreCharacters();)o[d].encode(c),c.getNewEncoding()>=0&&(d=c.getNewEncoding(),c.resetEncoderSignal());var f=c.getCodewordCount();c.updateSymbolInfo();var p=c.getSymbolInfo().getDataCapacity();f<p&&d!==on&&d!==li&&d!==Br&&c.writeCodeword("þ");var g=c.getCodewords();for(g.length()<p&&g.append(UI);g.length()<p;)g.append(this.randomize253State(g.length()+1));return c.getCodewords().toString()},t.lookAheadTest=function(e,n,r){var i=this.lookAheadTestIntern(e,n,r);if(r===br&&i===br){for(var a=Math.min(n+3,e.length),s=n;s<a;s++)if(!this.isNativeX12(e.charCodeAt(s)))return on}else if(r===Br&&i===Br){for(var a=Math.min(n+4,e.length),s=n;s<a;s++)if(!this.isNativeEDIFACT(e.charCodeAt(s)))return on}return i},t.lookAheadTestIntern=function(e,n,r){if(n>=e.length)return r;var i;r===on?i=[0,1,1,1,1,1.25]:(i=[1,2,2,2,2,2.25],i[r]=0);for(var a=0,s=new Uint8Array(6),o=[];;){if(n+a===e.length){Cr.fill(s,0),Cr.fill(o,0);var c=this.findMinimums(i,o,Ct.MAX_VALUE,s),d=this.getMinimumCount(s);if(o[on]===c)return on;if(d===1){if(s[li]>0)return li;if(s[Br]>0)return Br;if(s[Ei]>0)return Ei;if(s[br]>0)return br}return Qr}var f=e.charCodeAt(n+a);if(a++,this.isDigit(f)?i[on]+=.5:this.isExtendedASCII(f)?(i[on]=Math.ceil(i[on]),i[on]+=2):(i[on]=Math.ceil(i[on]),i[on]++),this.isNativeC40(f)?i[Qr]+=2/3:this.isExtendedASCII(f)?i[Qr]+=8/3:i[Qr]+=4/3,this.isNativeText(f)?i[Ei]+=2/3:this.isExtendedASCII(f)?i[Ei]+=8/3:i[Ei]+=4/3,this.isNativeX12(f)?i[br]+=2/3:this.isExtendedASCII(f)?i[br]+=13/3:i[br]+=10/3,this.isNativeEDIFACT(f)?i[Br]+=3/4:this.isExtendedASCII(f)?i[Br]+=17/4:i[Br]+=13/4,this.isSpecialB256(f)?i[li]+=4:i[li]++,a>=4){if(Cr.fill(s,0),Cr.fill(o,0),this.findMinimums(i,o,Ct.MAX_VALUE,s),o[on]<this.min(o[li],o[Qr],o[Ei],o[br],o[Br]))return on;if(o[li]<o[on]||o[li]+1<this.min(o[Qr],o[Ei],o[br],o[Br]))return li;if(o[Br]+1<this.min(o[li],o[Qr],o[Ei],o[br],o[on]))return Br;if(o[Ei]+1<this.min(o[li],o[Qr],o[Br],o[br],o[on]))return Ei;if(o[br]+1<this.min(o[li],o[Qr],o[Br],o[Ei],o[on]))return br;if(o[Qr]+1<this.min(o[on],o[li],o[Br],o[Ei])){if(o[Qr]<o[br])return Qr;if(o[Qr]===o[br]){for(var p=n+a+1;p<e.length;){var g=e.charCodeAt(p);if(this.isX12TermSep(g))return br;if(!this.isNativeX12(g))break;p++}return Qr}}}}},t.min=function(e,n,r,i,a){var s=Math.min(e,Math.min(n,Math.min(r,i)));return a===void 0?s:Math.min(s,a)},t.findMinimums=function(e,n,r,i){for(var a=0;a<6;a++){var s=n[a]=Math.ceil(e[a]);r>s&&(r=s,Cr.fill(i,0)),r===s&&(i[a]=i[a]+1)}return r},t.getMinimumCount=function(e){for(var n=0,r=0;r<6;r++)n+=e[r];return n||0},t.isDigit=function(e){return e>=48&&e<=57},t.isExtendedASCII=function(e){return e>=128&&e<=255},t.isNativeC40=function(e){return e===32||e>=48&&e<=57||e>=65&&e<=90},t.isNativeText=function(e){return e===32||e>=48&&e<=57||e>=97&&e<=122},t.isNativeX12=function(e){return this.isX12TermSep(e)||e===32||e>=48&&e<=57||e>=65&&e<=90},t.isX12TermSep=function(e){return e===13||e===42||e===62},t.isNativeEDIFACT=function(e){return e>=32&&e<=94},t.isSpecialB256=function(e){return!1},t.determineConsecutiveDigitCount=function(e,n){n===void 0&&(n=0);for(var r=e.length,i=n;i<r&&this.isDigit(e.charCodeAt(i));)i++;return i-n},t.illegalCharacter=function(e){var n=Ct.toHexString(e.charCodeAt(0));throw n="0000".substring(0,4-n.length)+n,new Error("Illegal character: "+e+" (0x"+n+")")},t}(),$x=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},GI=function(){function t(e){this.charset=e,this.name=e.name}return t.prototype.canEncode=function(e){try{return Aa.encode(e,this.charset)!=null}catch{return!1}},t}(),a$=function(){function t(e,n,r){var i,a,s,o,c,d;this.ENCODERS=["IBM437","ISO-8859-2","ISO-8859-3","ISO-8859-4","ISO-8859-5","ISO-8859-6","ISO-8859-7","ISO-8859-8","ISO-8859-9","ISO-8859-10","ISO-8859-11","ISO-8859-13","ISO-8859-14","ISO-8859-15","ISO-8859-16","windows-1250","windows-1251","windows-1252","windows-1256","Shift_JIS"].map(function(R){return new GI(Nz.forName(R))}),this.encoders=[];var f=[];f.push(new GI(Lz.ISO_8859_1));for(var p=n!=null&&n.name.startsWith("UTF"),g=0;g<e.length;g++){var y=!1;try{for(var x=(i=void 0,$x(f)),_=x.next();!_.done;_=x.next()){var A=_.value,E=e.charAt(g),T=E.charCodeAt(0);if(T===r||A.canEncode(E)){y=!0;break}}}catch(R){i={error:R}}finally{try{_&&!_.done&&(a=x.return)&&a.call(x)}finally{if(i)throw i.error}}if(!y)try{for(var C=(s=void 0,$x(this.ENCODERS)),D=C.next();!D.done;D=C.next()){var A=D.value;if(A.canEncode(e.charAt(g))){f.push(A),y=!0;break}}}catch(R){s={error:R}}finally{try{D&&!D.done&&(o=C.return)&&o.call(C)}finally{if(s)throw s.error}}y||(p=!0)}if(f.length===1&&!p)this.encoders=[f[0]];else{this.encoders=[];var k=0;try{for(var B=$x(f),O=B.next();!O.done;O=B.next()){var A=O.value;this.encoders[k++]=A}}catch(R){c={error:R}}finally{try{O&&!O.done&&(d=B.return)&&d.call(B)}finally{if(c)throw c.error}}}var I=-1;if(n!=null){for(var g=0;g<this.encoders.length;g++)if(this.encoders[g]!=null&&n.name===this.encoders[g].name){I=g;break}}this.priorityEncoderIndex=I}return t.prototype.length=function(){return this.encoders.length},t.prototype.getCharsetName=function(e){if(!(e<this.length()))throw new Error("index must be less than length");return this.encoders[e].name},t.prototype.getCharset=function(e){if(!(e<this.length()))throw new Error("index must be less than length");return this.encoders[e].charset},t.prototype.getECIValue=function(e){return this.encoders[e].charset.getValueIdentifier()},t.prototype.getPriorityEncoderIndex=function(){return this.priorityEncoderIndex},t.prototype.canEncode=function(e,n){if(!(n<this.length()))throw new Error("index must be less than length");return!0},t.prototype.encode=function(e,n){if(!(n<this.length()))throw new Error("index must be less than length");return Aa.encode(Vt.getCharAt(e),this.encoders[n].name)},t}(),s$=3,o$=function(){function t(e,n,r){this.fnc1=r;var i=new a$(e,n,r);if(i.length()===1)for(var a=0;a<this.bytes.length;a++){var s=e.charAt(a).charCodeAt(0);this.bytes[a]=s===r?1e3:s}else this.bytes=this.encodeMinimally(e,i,r)}return t.prototype.getFNC1Character=function(){return this.fnc1},t.prototype.length=function(){return this.bytes.length},t.prototype.haveNCharacters=function(e,n){if(e+n-1>=this.bytes.length)return!1;for(var r=0;r<n;r++)if(this.isECI(e+r))return!1;return!0},t.prototype.charAt=function(e){if(e<0||e>=this.length())throw new Error(""+e);if(this.isECI(e))throw new Error("value at "+e+" is not a character but an ECI");return this.isFNC1(e)?this.fnc1:this.bytes[e]},t.prototype.subSequence=function(e,n){if(e<0||e>n||n>this.length())throw new Error(""+e);for(var r=new At,i=e;i<n;i++){if(this.isECI(i))throw new Error("value at "+i+" is not a character but an ECI");r.append(this.charAt(i))}return r.toString()},t.prototype.isECI=function(e){if(e<0||e>=this.length())throw new Error(""+e);return this.bytes[e]>255&&this.bytes[e]<=999},t.prototype.isFNC1=function(e){if(e<0||e>=this.length())throw new Error(""+e);return this.bytes[e]===1e3},t.prototype.getECIValue=function(e){if(e<0||e>=this.length())throw new Error(""+e);if(!this.isECI(e))throw new Error("value at "+e+" is not an ECI but a character");return this.bytes[e]-256},t.prototype.addEdge=function(e,n,r){(e[n][r.encoderIndex]==null||e[n][r.encoderIndex].cachedTotalSize>r.cachedTotalSize)&&(e[n][r.encoderIndex]=r)},t.prototype.addEdges=function(e,n,r,i,a,s){var o=e.charAt(i).charCodeAt(0),c=0,d=n.length();n.getPriorityEncoderIndex()>=0&&(o===s||n.canEncode(o,n.getPriorityEncoderIndex()))&&(c=n.getPriorityEncoderIndex(),d=c+1);for(var f=c;f<d;f++)(o===s||n.canEncode(o,f))&&this.addEdge(r,i+1,new WI(o,n,f,a,s))},t.prototype.encodeMinimally=function(e,n,r){var i=e.length,a=new WI[i+1][n.length()];this.addEdges(e,n,a,0,null,r);for(var s=1;s<=i;s++){for(var o=0;o<n.length();o++)a[s][o]!=null&&s<i&&this.addEdges(e,n,a,s,a[s][o],r);for(var o=0;o<n.length();o++)a[s-1][o]=null}for(var c=-1,d=Ct.MAX_VALUE,o=0;o<n.length();o++)if(a[i][o]!=null){var f=a[i][o];f.cachedTotalSize<d&&(d=f.cachedTotalSize,c=o)}if(c<0)throw new Error('Failed to encode "'+e+'"');for(var p=[],g=a[i][c];g!=null;){if(g.isFNC1())p.unshift(1e3);else for(var y=n.encode(g.c,g.encoderIndex),s=y.length-1;s>=0;s--)p.unshift(y[s]&255);var x=g.previous===null?0:g.previous.encoderIndex;x!==g.encoderIndex&&p.unshift(256+n.getECIValue(g.encoderIndex)),g=g.previous}for(var _=[],s=0;s<_.length;s++)_[s]=p[s];return _},t}(),WI=function(){function t(e,n,r,i,a){this.c=e,this.encoderSet=n,this.encoderIndex=r,this.previous=i,this.fnc1=a,this.c=e===a?1e3:e;var s=this.isFNC1()?1:n.encode(e,r).length,o=i===null?0:i.encoderIndex;o!==r&&(s+=s$),i!=null&&(s+=i.cachedTotalSize),this.cachedTotalSize=s}return t.prototype.isFNC1=function(){return this.c===1e3},t}(),l$=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}();var YI;(function(t){t[t.ASCII=0]="ASCII",t[t.C40=1]="C40",t[t.TEXT=2]="TEXT",t[t.X12=3]="X12",t[t.EDF=4]="EDF",t[t.B256=5]="B256"})(YI||(YI={}));(function(t){l$(e,t);function e(n,r,i,a,s){var o=t.call(this,n,r,i)||this;return o.shape=a,o.macroId=s,o}return e.prototype.getMacroId=function(){return this.macroId},e.prototype.getShapeHint=function(){return this.shape},e})(o$);var c$=function(){function t(){}return t.prototype.isCompact=function(){return this.compact},t.prototype.setCompact=function(e){this.compact=e},t.prototype.getSize=function(){return this.size},t.prototype.setSize=function(e){this.size=e},t.prototype.getLayers=function(){return this.layers},t.prototype.setLayers=function(e){this.layers=e},t.prototype.getCodeWords=function(){return this.codeWords},t.prototype.setCodeWords=function(e){this.codeWords=e},t.prototype.getMatrix=function(){return this.matrix},t.prototype.setMatrix=function(e){this.matrix=e},t}(),qI=function(){function t(){}return t.singletonList=function(e){return[e]},t.min=function(e,n){return e.sort(n)[0]},t}(),u$=function(){function t(e){this.previous=e}return t.prototype.getPrevious=function(){return this.previous},t}(),d$=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),eb=function(t){d$(e,t);function e(n,r,i){var a=t.call(this,n)||this;return a.value=r,a.bitCount=i,a}return e.prototype.appendTo=function(n,r){n.appendBits(this.value,this.bitCount)},e.prototype.add=function(n,r){return new e(this,n,r)},e.prototype.addBinaryShift=function(n,r){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new e(this,n,r)},e.prototype.toString=function(){var n=this.value&(1<<this.bitCount)-1;return n|=1<<this.bitCount,"<"+Ct.toBinaryString(n|1<<this.bitCount).substring(1)+">"},e}(u$),f$=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),h$=function(t){f$(e,t);function e(n,r,i){var a=t.call(this,n,0,0)||this;return a.binaryShiftStart=r,a.binaryShiftByteCount=i,a}return e.prototype.appendTo=function(n,r){for(var i=0;i<this.binaryShiftByteCount;i++)(i===0||i===31&&this.binaryShiftByteCount<=62)&&(n.appendBits(31,5),this.binaryShiftByteCount>62?n.appendBits(this.binaryShiftByteCount-31,16):i===0?n.appendBits(Math.min(this.binaryShiftByteCount,31),5):n.appendBits(this.binaryShiftByteCount-31,5)),n.appendBits(r[this.binaryShiftStart+i],8)},e.prototype.addBinaryShift=function(n,r){return new e(this,n,r)},e.prototype.toString=function(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"},e}(eb);function p$(t,e,n){return new h$(t,e,n)}function _h(t,e,n){return new eb(t,e,n)}var g$=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],Cl=0,jm=1,wa=2,qM=3,_s=4,m$=new eb(null,0,0),Gx=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])],y$=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};function v$(t){var e,n;try{for(var r=y$(t),i=r.next();!i.done;i=r.next()){var a=i.value;Cr.fill(a,-1)}}catch(s){e={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return t[Cl][_s]=0,t[jm][_s]=0,t[jm][Cl]=28,t[qM][_s]=0,t[wa][_s]=0,t[wa][Cl]=15,t}var XM=v$(Cr.createInt32Array(6,6)),x$=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},w$=function(){function t(e,n,r,i){this.token=e,this.mode=n,this.binaryShiftByteCount=r,this.bitCount=i}return t.prototype.getMode=function(){return this.mode},t.prototype.getToken=function(){return this.token},t.prototype.getBinaryShiftByteCount=function(){return this.binaryShiftByteCount},t.prototype.getBitCount=function(){return this.bitCount},t.prototype.latchAndAppend=function(e,n){var r=this.bitCount,i=this.token;if(e!==this.mode){var a=Gx[this.mode][e];i=_h(i,a&65535,a>>16),r+=a>>16}var s=e===wa?4:5;return i=_h(i,n,s),new t(i,e,0,r+s)},t.prototype.shiftAndAppend=function(e,n){var r=this.token,i=this.mode===wa?4:5;return r=_h(r,XM[this.mode][e],i),r=_h(r,n,5),new t(r,this.mode,0,this.bitCount+i+5)},t.prototype.addBinaryShiftChar=function(e){var n=this.token,r=this.mode,i=this.bitCount;if(this.mode===_s||this.mode===wa){var a=Gx[r][Cl];n=_h(n,a&65535,a>>16),i+=a>>16,r=Cl}var s=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,o=new t(n,r,this.binaryShiftByteCount+1,i+s);return o.binaryShiftByteCount===2078&&(o=o.endBinaryShift(e+1)),o},t.prototype.endBinaryShift=function(e){if(this.binaryShiftByteCount===0)return this;var n=this.token;return n=p$(n,e-this.binaryShiftByteCount,this.binaryShiftByteCount),new t(n,this.mode,0,this.bitCount)},t.prototype.isBetterThanOrEqualTo=function(e){var n=this.bitCount+(Gx[this.mode][e.mode]>>16);return this.binaryShiftByteCount<e.binaryShiftByteCount?n+=t.calculateBinaryShiftCost(e)-t.calculateBinaryShiftCost(this):this.binaryShiftByteCount>e.binaryShiftByteCount&&e.binaryShiftByteCount>0&&(n+=10),n<=e.bitCount},t.prototype.toBitArray=function(e){for(var n,r,i=[],a=this.endBinaryShift(e.length).token;a!==null;a=a.getPrevious())i.unshift(a);var s=new Ur;try{for(var o=x$(i),c=o.next();!c.done;c=o.next()){var d=c.value;d.appendTo(s,e)}}catch(f){n={error:f}}finally{try{c&&!c.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return s},t.prototype.toString=function(){return Vt.format("%s bits=%d bytes=%d",g$[this.mode],this.bitCount,this.binaryShiftByteCount)},t.calculateBinaryShiftCost=function(e){return e.binaryShiftByteCount>62?21:e.binaryShiftByteCount>31?20:e.binaryShiftByteCount>0?10:0},t.INITIAL_STATE=new t(m$,Cl,0,0),t}();function _$(t){var e=Vt.getCharCode(" "),n=Vt.getCharCode("."),r=Vt.getCharCode(",");t[Cl][e]=1;for(var i=Vt.getCharCode("Z"),a=Vt.getCharCode("A"),s=a;s<=i;s++)t[Cl][s]=s-a+2;t[jm][e]=1;for(var o=Vt.getCharCode("z"),c=Vt.getCharCode("a"),s=c;s<=o;s++)t[jm][s]=s-c+2;t[wa][e]=1;for(var d=Vt.getCharCode("9"),f=Vt.getCharCode("0"),s=f;s<=d;s++)t[wa][s]=s-f+2;t[wa][r]=12,t[wa][n]=13;for(var p=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""],g=0;g<p.length;g++)t[qM][Vt.getCharCode(p[g])]=g;for(var y=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"],g=0;g<y.length;g++)Vt.getCharCode(y[g])>0&&(t[_s][Vt.getCharCode(y[g])]=g);return t}var Wx=_$(Cr.createInt32Array(5,256)),Fg=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},b$=function(){function t(e){this.text=e}return t.prototype.encode=function(){for(var e=Vt.getCharCode(" "),n=Vt.getCharCode(`
`),r=qI.singletonList(w$.INITIAL_STATE),i=0;i<this.text.length;i++){var a=void 0,s=i+1<this.text.length?this.text[i+1]:0;switch(this.text[i]){case Vt.getCharCode("\r"):a=s===n?2:0;break;case Vt.getCharCode("."):a=s===e?3:0;break;case Vt.getCharCode(","):a=s===e?4:0;break;case Vt.getCharCode(":"):a=s===e?5:0;break;default:a=0}a>0?(r=t.updateStateListForPair(r,i,a),i++):r=this.updateStateListForChar(r,i)}var o=qI.min(r,function(c,d){return c.getBitCount()-d.getBitCount()});return o.toBitArray(this.text)},t.prototype.updateStateListForChar=function(e,n){var r,i,a=[];try{for(var s=Fg(e),o=s.next();!o.done;o=s.next()){var c=o.value;this.updateStateForChar(c,n,a)}}catch(d){r={error:d}}finally{try{o&&!o.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}return t.simplifyStates(a)},t.prototype.updateStateForChar=function(e,n,r){for(var i=this.text[n]&255,a=Wx[e.getMode()][i]>0,s=null,o=0;o<=_s;o++){var c=Wx[o][i];if(c>0){if(s==null&&(s=e.endBinaryShift(n)),!a||o===e.getMode()||o===wa){var d=s.latchAndAppend(o,c);r.push(d)}if(!a&&XM[e.getMode()][o]>=0){var f=s.shiftAndAppend(o,c);r.push(f)}}}if(e.getBinaryShiftByteCount()>0||Wx[e.getMode()][i]===0){var p=e.addBinaryShiftChar(n);r.push(p)}},t.updateStateListForPair=function(e,n,r){var i,a,s=[];try{for(var o=Fg(e),c=o.next();!c.done;c=o.next()){var d=c.value;this.updateStateForPair(d,n,r,s)}}catch(f){i={error:f}}finally{try{c&&!c.done&&(a=o.return)&&a.call(o)}finally{if(i)throw i.error}}return this.simplifyStates(s)},t.updateStateForPair=function(e,n,r,i){var a=e.endBinaryShift(n);if(i.push(a.latchAndAppend(_s,r)),e.getMode()!==_s&&i.push(a.shiftAndAppend(_s,r)),r===3||r===4){var s=a.latchAndAppend(wa,16-r).latchAndAppend(wa,1);i.push(s)}if(e.getBinaryShiftByteCount()>0){var o=e.addBinaryShiftChar(n).addBinaryShiftChar(n+1);i.push(o)}},t.simplifyStates=function(e){var n,r,i,a,s=[];try{for(var o=Fg(e),c=o.next();!c.done;c=o.next()){var d=c.value,f=!0,p=function(A){if(A.isBetterThanOrEqualTo(d))return f=!1,"break";d.isBetterThanOrEqualTo(A)&&(s=s.filter(function(E){return E!==A}))};try{for(var g=(i=void 0,Fg(s)),y=g.next();!y.done;y=g.next()){var x=y.value,_=p(x);if(_==="break")break}}catch(A){i={error:A}}finally{try{y&&!y.done&&(a=g.return)&&a.call(g)}finally{if(i)throw i.error}}f&&s.push(d)}}catch(A){n={error:A}}finally{try{c&&!c.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return s},t}(),A$=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};(function(){function t(){}return t.encodeBytes=function(e){return t.encode(e,t.DEFAULT_EC_PERCENT,t.DEFAULT_AZTEC_LAYERS)},t.encode=function(e,n,r){var i=new b$(e).encode(),a=Ct.truncDivision(i.getSize()*n,100)+11,s=i.getSize()+a,o,c,d,f,p;if(r!==t.DEFAULT_AZTEC_LAYERS){if(o=r<0,c=Math.abs(r),c>(o?t.MAX_NB_BITS_COMPACT:t.MAX_NB_BITS))throw new rt(Vt.format("Illegal value %s for layers",r));d=t.totalBitsInLayer(c,o),f=t.WORD_SIZE[c];var g=d-d%f;if(p=t.stuffBits(i,f),p.getSize()+a>g)throw new rt("Data to large for user specified layer");if(o&&p.getSize()>f*64)throw new rt("Data to large for user specified layer")}else{f=0,p=null;for(var y=0;;y++){if(y>t.MAX_NB_BITS)throw new rt("Data too large for an Aztec code");if(o=y<=3,c=o?y+1:y,d=t.totalBitsInLayer(c,o),!(s>d)){(p==null||f!==t.WORD_SIZE[c])&&(f=t.WORD_SIZE[c],p=t.stuffBits(i,f));var g=d-d%f;if(!(o&&p.getSize()>f*64)&&p.getSize()+a<=g)break}}}var x=t.generateCheckWords(p,d,f),_=p.getSize()/f,A=t.generateModeMessage(o,c,_),E=(o?11:14)+c*4,T=new Int32Array(E),C;if(o){C=E;for(var y=0;y<T.length;y++)T[y]=y}else{C=E+1+2*Ct.truncDivision(Ct.truncDivision(E,2)-1,15);for(var D=Ct.truncDivision(E,2),k=Ct.truncDivision(C,2),y=0;y<D;y++){var B=y+Ct.truncDivision(y,15);T[D-y-1]=k-B-1,T[D+y]=k+B+1}}for(var O=new ks(C),y=0,I=0;y<c;y++){for(var R=(c-y)*4+(o?9:12),V=0;V<R;V++)for(var L=V*2,P=0;P<2;P++)x.get(I+L+P)&&O.set(T[y*2+P],T[y*2+V]),x.get(I+R*2+L+P)&&O.set(T[y*2+V],T[E-1-y*2-P]),x.get(I+R*4+L+P)&&O.set(T[E-1-y*2-P],T[E-1-y*2-V]),x.get(I+R*6+L+P)&&O.set(T[E-1-y*2-V],T[y*2+P]);I+=R*8}if(t.drawModeMessage(O,o,C,A),o)t.drawBullsEye(O,Ct.truncDivision(C,2),5);else{t.drawBullsEye(O,Ct.truncDivision(C,2),7);for(var y=0,V=0;y<Ct.truncDivision(E,2)-1;y+=15,V+=16)for(var P=Ct.truncDivision(C,2)&1;P<C;P+=2)O.set(Ct.truncDivision(C,2)-V,P),O.set(Ct.truncDivision(C,2)+V,P),O.set(P,Ct.truncDivision(C,2)-V),O.set(P,Ct.truncDivision(C,2)+V)}var F=new c$;return F.setCompact(o),F.setSize(C),F.setLayers(c),F.setCodeWords(_),F.setMatrix(O),F},t.drawBullsEye=function(e,n,r){for(var i=0;i<r;i+=2)for(var a=n-i;a<=n+i;a++)e.set(a,n-i),e.set(a,n+i),e.set(n-i,a),e.set(n+i,a);e.set(n-r,n-r),e.set(n-r+1,n-r),e.set(n-r,n-r+1),e.set(n+r,n-r),e.set(n+r,n-r+1),e.set(n+r,n+r-1)},t.generateModeMessage=function(e,n,r){var i=new Ur;return e?(i.appendBits(n-1,2),i.appendBits(r-1,6),i=t.generateCheckWords(i,28,4)):(i.appendBits(n-1,5),i.appendBits(r-1,11),i=t.generateCheckWords(i,40,4)),i},t.drawModeMessage=function(e,n,r,i){var a=Ct.truncDivision(r,2);if(n)for(var s=0;s<7;s++){var o=a-3+s;i.get(s)&&e.set(o,a-5),i.get(s+7)&&e.set(a+5,o),i.get(20-s)&&e.set(o,a+5),i.get(27-s)&&e.set(a-5,o)}else for(var s=0;s<10;s++){var o=a-5+s+Ct.truncDivision(s,5);i.get(s)&&e.set(o,a-7),i.get(s+10)&&e.set(a+7,o),i.get(29-s)&&e.set(o,a+7),i.get(39-s)&&e.set(a-7,o)}},t.generateCheckWords=function(e,n,r){var i,a,s=e.getSize()/r,o=new WM(t.getGF(r)),c=Ct.truncDivision(n,r),d=t.bitsToWords(e,r,c);o.encode(d,c-s);var f=n%r,p=new Ur;p.appendBits(0,f);try{for(var g=A$(Array.from(d)),y=g.next();!y.done;y=g.next()){var x=y.value;p.appendBits(x,r)}}catch(_){i={error:_}}finally{try{y&&!y.done&&(a=g.return)&&a.call(g)}finally{if(i)throw i.error}}return p},t.bitsToWords=function(e,n,r){var i=new Int32Array(r),a,s;for(a=0,s=e.getSize()/n;a<s;a++){for(var o=0,c=0;c<n;c++)o|=e.get(a*n+c)?1<<n-c-1:0;i[a]=o}return i},t.getGF=function(e){switch(e){case 4:return Bi.AZTEC_PARAM;case 6:return Bi.AZTEC_DATA_6;case 8:return Bi.AZTEC_DATA_8;case 10:return Bi.AZTEC_DATA_10;case 12:return Bi.AZTEC_DATA_12;default:throw new rt("Unsupported word size "+e)}},t.stuffBits=function(e,n){for(var r=new Ur,i=e.getSize(),a=(1<<n)-2,s=0;s<i;s+=n){for(var o=0,c=0;c<n;c++)(s+c>=i||e.get(s+c))&&(o|=1<<n-1-c);(o&a)===a?(r.appendBits(o&a,n),s--):(o&a)===0?(r.appendBits(o|1,n),s--):r.appendBits(o,n)}return r},t.totalBitsInLayer=function(e,n){return((n?88:112)+16*e)*e},t.DEFAULT_EC_PERCENT=33,t.DEFAULT_AZTEC_LAYERS=0,t.MAX_NB_BITS=32,t.MAX_NB_BITS_COMPACT=4,t.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]),t})();const E$=({onDetected:t,onError:e})=>{const n=M.useRef(null),r=M.useRef(new Sz),i=M.useRef(!1);return M.useEffect(()=>{const a=n.current;let s;const o=()=>{a.play().catch(f=>console.error("play() failed:",f))},c=()=>{a.videoWidth===0||a.videoHeight===0||i.current||(i.current=!0,r.current.decodeFromStream(s,a,(f,p)=>{f&&(r.current.reset(),t(f.getText())),p&&!(p instanceof _e)&&(r.current.reset(),e(p.message||"スキャナーでエラーが発生しました。"))}))};return(async()=>{if(a)try{s=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment",aspectRatio:.5}}),a.srcObject=s,a.muted=!0,a.addEventListener("loadedmetadata",o),a.addEventListener("playing",c)}catch(f){const p=`カメラの起動に失敗しました。ブラウザや端末のカメラ権限設定を確認し、許可されているかご確認ください。
詳細: ${f&&f.message?f.message:""}`;console.log("[BarcodeScanner] onError呼び出し",p),e(p)}})(),()=>{if(r.current.reset(),i.current=!1,a){a.removeEventListener("loadedmetadata",o),a.removeEventListener("playing",c);const f=a.srcObject;f&&f.getTracks().forEach(g=>g.stop()),a.srcObject=null}}},[t,e]),v.jsx(re,{"data-testid":"barcode-scanner-container",children:v.jsx("video",{ref:n,style:{width:"100%",height:"auto",border:"1px solid gray"},autoPlay:!0,muted:!0,playsInline:!0,"data-testid":"barcode-scanner-video"})})},S$={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"90%",maxWidth:400,bgcolor:"background.paper",border:"2px solid #000",boxShadow:24,p:4},T$=({onScan:t,onScanError:e})=>{const[n,r]=M.useState(!1),{setGlobalError:i}=M.useContext(ri)||{setGlobalError:()=>{}},a=o=>{t(o),r(!1)},s=o=>{i(o),r(!1)};return v.jsxs(v.Fragment,{children:[v.jsx(Ke,{variant:"outlined",startIcon:v.jsx(xN,{}),onClick:()=>r(!0),sx:{mt:2,mb:2},fullWidth:!0,"data-testid":"barcode-scan-button",children:"バーコードスキャン"}),v.jsx(wN,{open:n,onClose:()=>r(!1),"aria-labelledby":"scanner-modal-title","data-testid":"barcode-scan-modal",children:v.jsxs(re,{sx:S$,children:[v.jsxs(re,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[v.jsx(te,{id:"scanner-modal-title",variant:"h6",component:"h2",children:"バーコードスキャン"}),v.jsx(jr,{onClick:()=>r(!1),children:v.jsx(te,{variant:"h6",children:"×"})})]}),v.jsx(E$,{onDetected:a,onError:s,"data-testid":"barcode-scanner"})]})})]})};function C$(){const[t,e]=M.useState(""),n=Zc(),r=a=>{console.log("[BookAdd] handleScanDetected スキャン結果:",a),e(a)},i=a=>{n(`/book/${a}`)};return v.jsxs(re,{sx:{maxWidth:500,mx:"auto",pb:{xs:"72px",sm:"80px"}},children:[v.jsx(G1,{title:"本を追加",subtitle:"新しい本をライブラリに追加","data-testid":"book-add-header"}),v.jsxs(re,{sx:{px:{xs:1.5,sm:2,md:0}},children:[v.jsx(T$,{onScan:r,onScanError:a=>console.error(a)}),v.jsx(Fj,{isbn:t,onBookAdded:i})]})]})}const pl={NONE:0,ONE:1,TWO:2,THREE:3,FOUR:4,FIVE:5},qi=pl.NONE,I$=t=>t!=null&&t>pl.NONE,Gh=t=>(t==null?void 0:t.rating)||qi,XI=t=>I$(t)?t:0,Um=t=>{const e={[pl.NONE]:"ふつう",[pl.ONE]:"少し面白かった",[pl.TWO]:"まあまあ面白かった",[pl.THREE]:"面白かった",[pl.FOUR]:"とても面白かった",[pl.FIVE]:"神がかり的に面白い"};return e[t]||e[qi]},tb=t=>{const{user:e}=rr(),n=M.useContext(ri),r=(n==null?void 0:n.setGlobalError)||(()=>{}),[i,a]=M.useState([]),[s,o]=M.useState(!0),[c,d]=M.useState(null),f=M.useCallback(async()=>{if(!e||!t){a([]),o(!1);return}try{o(!0),d(null);const x=pr(Ht,"books",t,"memos"),_=jn(x,z1("createdAt","desc")),T=(await Jn(_)).docs.map(C=>({id:C.id,...C.data(),rating:C.data().rating||qi})).sort((C,D)=>{var O,I,R,V;const k=XI(C.rating),B=XI(D.rating);return k!==B?B-k:new Date(((I=(O=D.createdAt)==null?void 0:O.toDate)==null?void 0:I.call(O))||D.createdAt||0)-new Date(((V=(R=C.createdAt)==null?void 0:R.toDate)==null?void 0:V.call(R))||C.createdAt||0)});a(T)}catch(x){console.error("Error fetching memos:",x),r("メモ一覧の取得に失敗しました。"),d("メモ一覧の取得に失敗しました。")}finally{o(!1)}},[e==null?void 0:e.uid,t]),p=M.useCallback(async x=>{if(!e||!t)throw new Error("ユーザーまたは書籍IDが無効です。");try{const _=pr(Ht,"books",t,"memos"),A=await m0(_,{...x,userId:e.uid,createdAt:Ti(),updatedAt:Ti()}),E={id:A.id,...x,userId:e.uid,createdAt:new Date,updatedAt:new Date};return a(T=>[E,...T]),A.id}catch(_){throw console.error("Error adding memo:",_),r("メモの追加に失敗しました。"),_}},[e==null?void 0:e.uid,t]),g=M.useCallback(async(x,_)=>{if(!e||!t||!x)throw new Error("ユーザー・書籍ID・メモIDが無効です。");try{const A=_o(Ht,"books",t,"memos",x);return await $1(A,{..._,userId:e.uid,updatedAt:Ti()}),a(E=>E.map(C=>C.id===x?{...C,..._,userId:e.uid,updatedAt:new Date}:C)),!0}catch(A){throw console.error("Error updating memo:",A),r("メモの更新に失敗しました。"),A}},[e==null?void 0:e.uid,t]),y=M.useCallback(async x=>{if(!e||!t||!x)throw new Error("ユーザー・書籍ID・メモIDが無効です。");try{const _=_o(Ht,"books",t,"memos",x);return await mj(_),a(A=>A.filter(E=>E.id!==x)),!0}catch(_){throw console.error("Error deleting memo:",_),r("メモの削除に失敗しました。"),_}},[e==null?void 0:e.uid,t]);return M.useEffect(()=>{f()},[f]),{memos:i,loading:s,error:c,fetchMemos:f,addMemo:p,updateMemo:g,deleteMemo:y}},KI=t=>{try{const e=t&&typeof t.toDate=="function"?t.toDate():t instanceof Date?t:null;if(!e)return"";const n=e.getFullYear(),r=e.getMonth()+1,i=e.getDate();return`${n}/${r}/${i}`}catch{return""}},D$=({memo:t,onEdit:e,onDelete:n,onClick:r})=>{const i=x1("(max-width:600px)"),[a,s]=M.useState(!1),d=(t.text?t.text.split(`
`):[]).slice(0,2).join(`
`),f=t.createdAt&&t.createdAt.toDate?t.createdAt.toDate():null,p=x=>{x&&x.stopPropagation(),s(!1),typeof e=="function"&&e(t,!0)},g=x=>{x&&x.stopPropagation(),s(!1),n(t.id)},y=t5({onSwipedLeft:()=>s(!0),onSwipedRight:()=>s(!1),preventDefaultTouchmoveEvent:!0,trackMouse:!0});return i?v.jsxs(re,{position:"relative",...y,"data-allow-local-swipe":!0,sx:{mb:2},children:[v.jsxs(kn,{"data-testid":"memo-card",sx:{position:"relative",maxWidth:"100%",mx:"auto",cursor:r?"pointer":"default",bgcolor:"background.paper",transition:"transform 0.2s",transform:a?"translateX(-100px)":"none"},onClick:r?()=>r(t,!1):void 0,children:[v.jsxs(Nn,{sx:{pb:.5,minHeight:48,maxHeight:80,overflow:"hidden"},children:[v.jsx(te,{variant:"body1",sx:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",lineHeight:1.2},children:d}),t.comment&&v.jsx(te,{variant:"body2",color:"text.secondary",sx:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",lineHeight:1.2,mt:.25},children:t.comment}),Gh(t)>0&&v.jsx(Ld,{value:Gh(t),readOnly:!0,size:"small",sx:{mt:.25,mb:.25}})]}),v.jsx(ST,{sx:{justifyContent:"space-between",alignItems:"center",py:0},children:v.jsxs(i0,{direction:"row",spacing:1,alignItems:"center",children:[t.page&&v.jsxs(te,{variant:"caption",children:["p.",t.page]}),f&&v.jsx(te,{variant:"caption",color:"text.secondary",children:KI(f)}),Array.isArray(t.tags)&&t.tags.map((x,_)=>v.jsx(mn,{label:x,size:"small",color:"secondary"},_))]})})]}),a&&v.jsxs(re,{position:"absolute",top:0,right:0,height:"100%",display:"flex",flexDirection:"column",justifyContent:"center",zIndex:2,sx:{p:1,gap:1},children:[v.jsx(jr,{onClick:p,sx:{bgcolor:"primary.main",color:"white",mb:1},size:"large",children:v.jsx(T2,{})}),v.jsx(jr,{onClick:g,sx:{bgcolor:"error.main",color:"white"},size:"large",children:v.jsx(S2,{})})]})]}):v.jsxs(kn,{"data-testid":"memo-card",sx:{position:"relative",maxWidth:"100%",mx:"auto",cursor:r?"pointer":"default",bgcolor:"background.paper"},onClick:r?()=>r(t,!1):void 0,children:[v.jsxs(Nn,{sx:{pb:1,minHeight:{xs:48,sm:64},maxHeight:{xs:72,sm:88},overflow:"hidden"},children:[v.jsx(te,{variant:"body1",sx:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:d}),t.comment&&v.jsx(te,{variant:"body2",color:"text.secondary",sx:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:t.comment}),Gh(t)>0&&v.jsx(Ld,{value:Gh(t),readOnly:!0,size:"small",sx:{mt:.5}})]}),v.jsxs(ST,{sx:{justifyContent:"space-between",alignItems:"center",py:0},children:[v.jsxs(i0,{direction:"row",spacing:1,alignItems:"center",children:[t.page&&v.jsxs(te,{variant:"caption",children:["p.",t.page]}),f&&v.jsx(te,{variant:"caption",color:"text.secondary",children:KI(f)}),Array.isArray(t.tags)&&t.tags.map((x,_)=>v.jsx(mn,{label:x,size:"small",color:"secondary"},_))]}),v.jsxs(re,{sx:{display:{xs:"none",sm:"flex"}},children:[v.jsx(jr,{"aria-label":"edit",onClick:p,size:"small","data-testid":"memo-edit-button",children:v.jsx(T2,{fontSize:"small"})}),v.jsx(jr,{"aria-label":"delete",onClick:g,size:"small","data-testid":"memo-delete-button",children:v.jsx(S2,{fontSize:"small"})})]})]})]})},R$=t=>{try{const e=t&&typeof t.toDate=="function"?t.toDate():t instanceof Date?t:null;if(!e)return"";const n=e.getFullYear(),r=e.getMonth()+1,i=e.getDate(),a=e.getHours(),s=String(e.getMinutes()).padStart(2,"0"),o=String(e.getSeconds()).padStart(2,"0");return`${n}/${r}/${i} ${a}:${s}:${o}`}catch{return""}},KM=({open:t,memo:e,bookId:n,onClose:r,onUpdate:i,onDelete:a,editMode:s=!1})=>{const{setGlobalError:o}=M.useContext(ri),{updateMemo:c,deleteMemo:d}=tb(n),[f,p]=M.useState(s?"edit":"view"),[g,y]=M.useState(null),[x,_]=M.useState(!1),[A,E]=M.useState("");Ci.useEffect(()=>{e&&(y({...e,rating:Gh(e)}),p(s?"edit":"view"),_(!1),E(""))},[e,s]);const T=()=>{y(null),p("view"),_(!1),E(""),r()},C=async k=>{if(k.preventDefault(),!g||!g.text.trim())return;let B=g.tags||[];A&&!B.includes(A)&&(B=[...B,A]);try{await c(g.id,{text:g.text,comment:g.comment,page:Number(g.page)||null,tags:B,rating:g.rating||qi}),T(),i&&i()}catch(O){console.error("Error updating memo: ",O),o("メモの更新に失敗しました。")}},D=async k=>{try{await d(k),T(),a&&a()}catch(B){console.error("Error deleting memo: ",B),o("メモの削除に失敗しました。")}};return e?v.jsxs(v.Fragment,{children:[v.jsxs($a,{open:t,onClose:T,maxWidth:"sm",fullWidth:!0,"data-testid":"memo-detail-dialog",children:[v.jsx(Ds,{"data-testid":"memo-detail-title",children:"メモ詳細"}),v.jsx(Ga,{children:f==="view"?v.jsxs(v.Fragment,{children:[v.jsx(te,{variant:"body1",sx:{whiteSpace:"pre-line",mb:2},children:g==null?void 0:g.text}),(g==null?void 0:g.comment)&&v.jsx(te,{variant:"body2",color:"text.secondary",sx:{mb:1},children:g.comment}),(g==null?void 0:g.rating)!=null&&v.jsxs(re,{sx:{mb:1},children:[g.rating>0&&v.jsx(Ld,{value:g.rating,readOnly:!0,size:"small",sx:{mb:.5}}),v.jsx(te,{variant:"caption",color:"text.secondary",sx:{display:"block"},children:Um(g.rating||qi)})]}),v.jsx(i0,{direction:"row",spacing:1,sx:{mb:1,flexWrap:"wrap"},children:Array.isArray(g==null?void 0:g.tags)&&g.tags.map((k,B)=>v.jsx(mn,{label:k,size:"small",color:"secondary"},B))}),(g==null?void 0:g.page)&&v.jsxs(te,{variant:"caption",sx:{display:"block",mb:1},children:["p. ",g.page]}),(g==null?void 0:g.createdAt)&&v.jsx(te,{variant:"caption",color:"text.secondary",sx:{display:"block",mb:1},children:R$(g.createdAt)})]}):v.jsxs(re,{component:"form",onSubmit:C,sx:{mt:1},children:[v.jsx(xt,{label:"引用・抜き書き",fullWidth:!0,multiline:!0,rows:4,value:(g==null?void 0:g.text)||"",onChange:k=>y({...g,text:k.target.value}),margin:"normal",required:!0,inputProps:{"data-testid":"memo-text-input"}}),v.jsx(xt,{label:"感想・コメント",fullWidth:!0,multiline:!0,rows:2,value:(g==null?void 0:g.comment)||"",onChange:k=>y({...g,comment:k.target.value}),margin:"normal",inputProps:{"data-testid":"memo-comment-input"}}),v.jsx(xt,{label:"ページ番号",type:"number",value:(g==null?void 0:g.page)||"",onChange:k=>y({...g,page:k.target.value}),margin:"normal",sx:{mr:2},inputProps:{"data-testid":"memo-page-input"}}),v.jsxs(Si,{margin:"normal",fullWidth:!0,children:[v.jsx(C2,{component:"legend",children:"ランク評価"}),v.jsx(Ld,{value:(g==null?void 0:g.rating)||qi,onChange:(k,B)=>{y({...g,rating:B||qi})},size:"large",sx:{mt:1},"data-testid":"memo-rating-input"}),v.jsx(te,{variant:"caption",color:"text.secondary",sx:{mt:1,display:"block"},children:Um((g==null?void 0:g.rating)||qi)})]}),v.jsx(mo,{multiple:!0,freeSolo:!0,options:[],value:(g==null?void 0:g.tags)||[],getOptionLabel:k=>typeof k=="string"?k:k.inputValue||k.tag||"",onChange:(k,B)=>{const O=(B||[]).map(I=>{if(typeof I=="string")return I;if(I&&typeof I=="object"){if("inputValue"in I&&I.inputValue)return I.inputValue;if("tag"in I&&I.tag)return I.tag}return""}).filter(Boolean);y({...g,tags:O})},inputValue:A,onInputChange:(k,B)=>E(B),renderInput:k=>v.jsx(xt,{...k,label:"タグ",margin:"normal",fullWidth:!0,placeholder:"例: 名言,感想,引用",inputProps:{...k.inputProps,"data-testid":"memo-tags-input"}})})]})}),v.jsx(Wa,{children:f==="view"?v.jsxs(v.Fragment,{children:[v.jsx(Ke,{onClick:()=>p("edit"),"data-testid":"memo-edit-button",children:"編集"}),v.jsx(Ke,{onClick:()=>_(!0),color:"error","data-testid":"memo-delete-button",children:"削除"}),v.jsx(Ke,{onClick:T,"data-testid":"memo-close-button",children:"閉じる"})]}):v.jsxs(v.Fragment,{children:[v.jsx(Ke,{onClick:()=>p("view"),"data-testid":"memo-cancel-button",children:"キャンセル"}),v.jsx(Ke,{onClick:C,variant:"contained","data-testid":"memo-update-button",children:"更新"})]})})]}),v.jsxs($a,{open:x,onClose:()=>_(!1),"data-testid":"memo-delete-dialog",children:[v.jsx(Ds,{"data-testid":"memo-delete-confirm-title",children:"本当に削除しますか？"}),v.jsx(Ga,{children:v.jsx(te,{children:"このメモを削除すると、元に戻すことはできません。"})}),v.jsxs(Wa,{children:[v.jsx(Ke,{onClick:()=>_(!1),"data-testid":"memo-delete-cancel-button",children:"キャンセル"}),v.jsx(Ke,{onClick:()=>{D(g==null?void 0:g.id)},color:"error",variant:"contained","data-testid":"memo-delete-confirm-button",children:"削除"})]})]})]}):null},O$=({bookId:t,onMemoUpdated:e})=>{const{setGlobalError:n}=M.useContext(ri),{memos:r,loading:i,deleteMemo:a}=tb(t),[s,o]=M.useState(null),[c,d]=M.useState(!1),[f,p]=M.useState(!1),[g,y]=M.useState(null),[x,_]=M.useState(!1),A=(B,O=!1)=>{o(B),_(O),d(!0)},E=B=>{const O=r.find(I=>I.id===B);O&&(y(O),p(!0))},T=async()=>{if(g)try{await a(g.id),p(!1),y(null)}catch(B){console.error("Error deleting memo:",B),n("メモの削除に失敗しました。")}},C=()=>{o(null),d(!1)},D=()=>{p(!1),y(null)},k=()=>{e&&e()};return i?v.jsx(te,{children:"メモを読み込み中..."}):r.length===0?v.jsx(te,{children:"まだメモはありません。"}):v.jsxs(v.Fragment,{children:[v.jsx(re,{sx:{display:"flex",flexDirection:"column",gap:2},children:r.map(B=>v.jsx(D$,{memo:B,onEdit:(O,I)=>A(O,I),onDelete:E,onClick:O=>A(O,!1)},B.id))}),v.jsx(KM,{open:c,memo:s,bookId:t,onClose:C,onUpdate:k,onDelete:k,editMode:x}),v.jsxs($a,{open:f,onClose:D,"data-testid":"memo-delete-dialog",children:[v.jsx(Ds,{"data-testid":"memo-delete-confirm-title",children:"本当に削除しますか？"}),v.jsx(Ga,{children:v.jsx(te,{children:"このメモを削除すると、元に戻すことはできません。"})}),v.jsxs(Wa,{children:[v.jsx(Ke,{onClick:D,"data-testid":"memo-delete-cancel-button",children:"キャンセル"}),v.jsx(Ke,{onClick:T,color:"error",variant:"contained","data-testid":"memo-delete-confirm-button",children:"削除"})]})]})]})},QI=({onTextDetected:t,disabled:e=!1})=>{const[n,r]=M.useState(!1),[i,a]=M.useState(null),s=async()=>{r(!0),a(null);try{if(navigator.clipboard&&navigator.clipboard.readText){const c=await navigator.clipboard.readText();c&&c.trim()?(console.log("[CameraPasteOCR] ペーストされたテキスト:",c),t(c.trim())):a("クリップボードが空です")}else a("クリップボード機能が利用できません")}catch(c){console.error("[CameraPasteOCR] クリップボード読み取りエラー:",c),a("テキストの読み取りに失敗しました")}finally{r(!1)}},o=()=>{a(null)};return v.jsxs(v.Fragment,{children:[v.jsx(Ke,{variant:"outlined",startIcon:v.jsx(_N,{}),onClick:s,disabled:e||n,fullWidth:!0,sx:{mt:1,mb:1,height:{xs:"40px",sm:"48px"},fontSize:{xs:"0.8rem",sm:"0.9rem"}},"data-testid":"camera-paste-ocr-button",children:n?"読み取り中...":"テキストをペースト"}),v.jsx(cd,{open:!!i,autoHideDuration:6e3,onClose:o,anchorOrigin:{vertical:"bottom",horizontal:"center"},children:v.jsx(Ki,{onClose:o,severity:"error",children:i})})]})};var ZI={};const fi={ERROR:0,WARN:1,INFO:2,DEBUG:3},M$=()=>{let t,e=!1;try{if(typeof window<"u"){const n=window.__VITE_ENV__||{};t=n.VITE_LOG_LEVEL,e=n.PROD}}catch{}return typeof process<"u"&&ZI&&(t||(t=ZI.VITE_LOG_LEVEL),e||(e=!0)),t&&fi[t.toUpperCase()]!==void 0?fi[t.toUpperCase()]:e?fi.WARN:fi.DEBUG},P$=M$(),ur={AUTH:"🔐 AUTH",BOOK:"📖 BOOK",MEMO:"📝 MEMO",STATUS:"📊 STATUS",FIREBASE:"🔥 FIREBASE"},k$=(t,e,n,r=null)=>{const i=new Date().toISOString();let s=`${{[fi.ERROR]:"❌",[fi.WARN]:"⚠️",[fi.INFO]:"ℹ️",[fi.DEBUG]:"🐛"}[t]||"📝"} ${e} [${i}] ${n}`;return r!=null&&(s+=`
  Data: ${JSON.stringify(r,null,2)}`),s},Vg=(t,e,n,r=null)=>{if(t>P$)return;const i=k$(t,e,n,r);switch(t){case fi.ERROR:console.error(i);break;case fi.WARN:console.warn(i);break;case fi.INFO:console.info(i);break;case fi.DEBUG:console.log(i);break;default:console.log(i)}},yt={error:(t,e,n)=>Vg(fi.ERROR,t,e,n),warn:(t,e,n)=>Vg(fi.WARN,t,e,n),info:(t,e,n)=>Vg(fi.INFO,t,e,n),debug:(t,e,n)=>Vg(fi.DEBUG,t,e,n),auth:{error:(t,e)=>yt.error(ur.AUTH,t,e),warn:(t,e)=>yt.warn(ur.AUTH,t,e),info:(t,e)=>yt.info(ur.AUTH,t,e),debug:(t,e)=>yt.debug(ur.AUTH,t,e)},book:{error:(t,e)=>yt.error(ur.BOOK,t,e),warn:(t,e)=>yt.warn(ur.BOOK,t,e),info:(t,e)=>yt.info(ur.BOOK,t,e),debug:(t,e)=>yt.debug(ur.BOOK,t,e)},memo:{error:(t,e)=>yt.error(ur.MEMO,t,e),warn:(t,e)=>yt.warn(ur.MEMO,t,e),info:(t,e)=>yt.info(ur.MEMO,t,e),debug:(t,e)=>yt.debug(ur.MEMO,t,e)},status:{error:(t,e)=>yt.error(ur.STATUS,t,e),warn:(t,e)=>yt.warn(ur.STATUS,t,e),info:(t,e)=>yt.info(ur.STATUS,t,e),debug:(t,e)=>yt.debug(ur.STATUS,t,e)},firebase:{error:(t,e)=>yt.error(ur.FIREBASE,t,e),warn:(t,e)=>yt.warn(ur.FIREBASE,t,e),info:(t,e)=>yt.info(ur.FIREBASE,t,e),debug:(t,e)=>yt.debug(ur.FIREBASE,t,e)}},N$=({bookId:t,bookTags:e=[],onMemoAdded:n,onClose:r})=>{const{user:i}=rr(),{setGlobalError:a}=M.useContext(ri),{addMemo:s}=tb(t),[o,c]=M.useState(""),[d,f]=M.useState(""),[p,g]=M.useState(""),[y,x]=M.useState([]),[_,A]=M.useState(""),[E,T]=M.useState(qi),[C,D]=M.useState(!1),{tagOptions:k,fetchTagHistory:B,saveTagsToHistory:O}=bo("memo",i);M.useEffect(()=>{B()},[B]);const I=async P=>{if(P.preventDefault(),!o.trim()||C)return;D(!0),yt.memo.debug("handleSubmit開始",{text:o,comment:d,page:p,tags:y});let F=y;_&&!y.includes(_)&&(F=[...y,_]),yt.memo.debug("保存するタグ",F);try{yt.memo.debug("addMemo呼び出し前");const q=await s({text:o,comment:d,page:Number(p)||null,tags:F,rating:E||qi});yt.memo.info("addMemo呼び出し完了",{memoId:q}),await O(F),yt.memo.debug("フォームリセット前"),c(""),f(""),g(""),x([]),A(""),T(qi),yt.memo.debug("フォームリセット完了"),n&&(yt.memo.debug("onMemoAddedコールバック呼び出し"),n())}catch(q){yt.memo.error("Error adding memo",q),a("メモの追加に失敗しました。")}finally{D(!1)}},R=()=>{r&&r()},V=P=>{yt.memo.info("OCRで検出されたテキスト",{detectedText:P}),c(P)};return r?v.jsxs(v.Fragment,{children:[v.jsx(Ds,{"data-testid":"memo-add-dialog-title",children:"メモを追加"}),v.jsx(Ga,{children:v.jsxs(re,{component:"form",onSubmit:I,sx:{mt:1},"data-testid":"memo-add-form",children:[v.jsx(xt,{label:"引用・抜き書き",fullWidth:!0,multiline:!0,rows:3,value:o,onChange:P=>c(P.target.value),required:!0,inputProps:{"data-testid":"memo-text-input"}}),v.jsx(QI,{onTextDetected:V}),v.jsx(xt,{label:"感想・コメント",fullWidth:!0,multiline:!0,rows:2,value:d,onChange:P=>f(P.target.value),inputProps:{"data-testid":"memo-comment-input"}}),v.jsx(xt,{label:"ページ番号",type:"number",value:p,onChange:P=>g(P.target.value),sx:{mr:2,width:{xs:"100%",sm:"auto"}},inputProps:{"data-testid":"memo-page-input"}}),v.jsxs(Si,{margin:"normal",fullWidth:!0,children:[v.jsx(C2,{component:"legend",children:"ランク評価"}),v.jsx(Ld,{value:E,onChange:(P,F)=>{T(F||qi)},size:"large",sx:{mt:1},"data-testid":"memo-rating-input"}),v.jsx(te,{variant:"caption",color:"text.secondary",sx:{mt:1,display:"block"},children:Um(E)})]}),v.jsx(mo,{multiple:!0,freeSolo:!0,options:k,value:y,getOptionLabel:P=>typeof P=="string"?P:P.inputValue||P.tag||"",onChange:async(P,F)=>{const q=(F||[]).map(X=>{if(typeof X=="string")return X;if(X&&typeof X=="object"){if("inputValue"in X&&X.inputValue)return X.inputValue;if("tag"in X&&X.tag)return X.tag}return""}).filter(Boolean);x(q),await O(q)},inputValue:_,onInputChange:(P,F)=>A(F),renderInput:P=>v.jsx(xt,{...P,label:"タグ",fullWidth:!0,placeholder:"例: 名言,感想,引用",inputProps:{...P.inputProps,"data-testid":"memo-tags-input"}})})]})}),v.jsxs(Wa,{children:[v.jsx(Ke,{onClick:R,"data-testid":"memo-add-cancel",disabled:C,children:"キャンセル"}),v.jsx(Ke,{onClick:I,variant:"contained","data-testid":"memo-add-submit",disabled:C,children:C?"追加中...":"メモを追加"})]})]}):v.jsxs(re,{component:"form",onSubmit:I,sx:{mt:1},"data-testid":"memo-add-form",children:[v.jsx(xt,{label:"引用・抜き書き",fullWidth:!0,multiline:!0,rows:3,value:o,onChange:P=>c(P.target.value),required:!0,inputProps:{"data-testid":"memo-text-input"}}),v.jsx(QI,{onTextDetected:V}),v.jsx(xt,{label:"感想・コメント",fullWidth:!0,multiline:!0,rows:2,value:d,onChange:P=>f(P.target.value),inputProps:{"data-testid":"memo-comment-input"}}),v.jsx(xt,{label:"ページ番号",type:"number",value:p,onChange:P=>g(P.target.value),sx:{mr:2,width:{xs:"100%",sm:"auto"}},inputProps:{"data-testid":"memo-page-input"}}),v.jsxs(Si,{margin:"normal",fullWidth:!0,children:[v.jsx(C2,{component:"legend",children:"ランク評価"}),v.jsx(Ld,{value:E,onChange:(P,F)=>{T(F||qi)},size:"large",sx:{mt:1},"data-testid":"memo-rating-input"}),v.jsx(te,{variant:"caption",color:"text.secondary",sx:{mt:1,display:"block"},children:Um(E)})]}),v.jsx(mo,{multiple:!0,freeSolo:!0,options:k,value:y,getOptionLabel:P=>typeof P=="string"?P:P.inputValue||P.tag||"",onChange:async(P,F)=>{const q=(F||[]).map(X=>{if(typeof X=="string")return X;if(X&&typeof X=="object"){if("inputValue"in X&&X.inputValue)return X.inputValue;if("tag"in X&&X.tag)return X.tag}return""}).filter(Boolean);x(q),await O(q)},inputValue:_,onInputChange:(P,F)=>A(F),renderInput:P=>v.jsx(xt,{...P,label:"タグ",fullWidth:!0,placeholder:"例: 名言,感想,引用",inputProps:{...P.inputProps,"data-testid":"memo-tags-input"}})}),v.jsx(Ke,{type:"submit",variant:"contained",disabled:C,sx:{mt:2,mb:{xs:8,sm:2},width:{xs:"100%",sm:"auto"}},"data-testid":"memo-add-submit",children:C?"追加中...":"メモを追加"})]})};function JI(t){if(!t)return null;if(typeof t.toDate=="function")return t.toDate();try{return new Date(t)}catch{return null}}function L$(t){if(!Array.isArray(t)||t.length===0)return{};const e=t.find(a=>(a==null?void 0:a.status)===ut.READING||(a==null?void 0:a.status)===ut.RE_READING),n=t.find(a=>(a==null?void 0:a.status)===ut.FINISHED),r=t.find(a=>(a==null?void 0:a.status)===ut.RE_READING),i={};return e!=null&&e.changedAt&&(i.readingStartedAt=e.changedAt),n!=null&&n.changedAt&&(i.finishedAt=n.changedAt),r!=null&&r.changedAt&&(i.reReadingStartedAt=r.changedAt),i}function B$(t){var e;return!Array.isArray(t)||t.length===0?null:((e=t[0])==null?void 0:e.status)??null}function F$(t){if(!t)return null;const{readingStartedAt:e,finishedAt:n}=t;if(!e||!n)return null;const r=JI(e),i=JI(n);if(!r||!i)return null;const a=Math.abs(i-r);return Math.ceil(a/(1e3*60*60*24))}const nb=t=>{const{user:e}=rr(),n=M.useContext(ri),r=(n==null?void 0:n.setGlobalError)||(()=>{}),[i,a]=M.useState([]),[s,o]=M.useState(!0),[c,d]=M.useState(null),f=M.useCallback(()=>{if(!e||!t)return yt.status.debug("No user or bookId",{user:!!e,bookId:t}),o(!1),()=>{};try{yt.status.debug("Setting up listener for bookId",{bookId:t}),o(!0),d(null);const E=pr(Ht,"books",t,"statusHistory"),T=jn(E);return yj(T,D=>{yt.status.debug("Snapshot received",{size:D.size,empty:D.empty,bookId:t});const k=D.docs.map(B=>({id:B.id,...B.data()}));k.sort((B,O)=>{var V,L;const I=(V=B.changedAt)!=null&&V.toDate?B.changedAt.toDate():new Date(B.changedAt||0);return((L=O.changedAt)!=null&&L.toDate?O.changedAt.toDate():new Date(O.changedAt||0))-I}),a(k),o(!1)},D=>{if(yt.status.error("Error fetching status history",D),yt.status.error("Error details",{code:D.code,message:D.message,bookId:t,userId:e.uid}),D.code==="permission-denied"){yt.status.warn("Permission denied for statusHistory, treating as empty history"),a([]),o(!1);return}r("ステータス履歴の取得に失敗しました。"),d("ステータス履歴の取得に失敗しました。"),o(!1)})}catch(E){return yt.status.error("Error setting up status history listener",E),r("ステータス履歴の取得に失敗しました。"),d("ステータス履歴の取得に失敗しました。"),o(!1),()=>{}}},[t,e,r]),p=M.useCallback(async(E,T,C=null)=>{if(!e||!t||!Fm(E))throw new Error("無効なパラメータです。");try{const D=pr(Ht,"books",t,"statusHistory"),k={status:E,previousStatus:T||null,changedAt:Ti(),changedBy:e.uid,notes:C||null,createdAt:Ti()};return(await m0(D,k)).id}catch(D){throw yt.status.error("Error adding status history",D),r("ステータス履歴の保存に失敗しました。"),D}},[t,e,r]),g=M.useCallback(()=>i.length?L$(i):{},[i]),y=M.useCallback(()=>B$(i),[i]),x=M.useCallback(()=>F$(g()),[g]),_=M.useCallback(async(E,T,C)=>{if(!e||!t){yt.status.debug("No user or bookId for manual history addition",{user:!!e,bookId:t});return}if(!Fm(T))throw new Error("Invalid status");try{yt.status.info("Adding manual status history",{bookId:t,date:E,status:T,previousStatus:C,userId:e.uid});const D=pr(Ht,"books",t,"statusHistory"),k={status:T,previousStatus:C||"",changedAt:E,userId:e.uid};await m0(D,k),yt.status.info("Manual status history added successfully")}catch(D){throw yt.status.error("Error adding manual status history",D),r("手動履歴の追加に失敗しました。"),D}},[e,t,r]),A=i.length>0?i[0]:null;return M.useEffect(()=>f(),[t,e]),{history:i,loading:s,error:c,addStatusHistory:p,addManualStatusHistory:_,latestHistory:A,getImportantDates:g,getCurrentStatus:y,getReadingDuration:x,refetch:f}},V$=({book:t,bookId:e,onStatusChange:n})=>{const r=M.useContext(ri),i=(r==null?void 0:r.setGlobalError)||(()=>{}),{addStatusHistory:a}=nb(e),[s,o]=M.useState(!1),[c,d]=M.useState(null),f=async x=>{if(!t||!Fm(x))return;o(!0),d(null);const _=_o(Ht,"books",e),A=t.status||Ar;try{const E={status:x,updatedAt:Ti()};x===ut.FINISHED&&(E.finishedAt=Ti()),await $1(_,E);try{await a(x,A)}catch(T){console.error("Error adding status history:",T)}n(x)}catch(E){console.error("Error updating status:",E),i("ステータスの更新に失敗しました。")}finally{o(!1)}},p=x=>{d(x.currentTarget)},g=()=>{d(null)};if(!t)return null;const y=t.status||Ar;return v.jsxs(re,{sx:{display:"flex",alignItems:"center",gap:1},children:[v.jsx(mn,{label:Ps(y),color:gs(y),"data-testid":"book-status-chip"}),v.jsx(Ke,{onClick:p,variant:"outlined",disabled:s,endIcon:v.jsx(bN,{}),"data-testid":"book-status-change-button",children:s?"更新中...":"ステータス変更"}),v.jsx(AN,{anchorEl:c,open:!!c,onClose:g,"data-testid":"book-status-menu",children:W_.map(x=>v.jsx(pn,{onClick:()=>f(x),disabled:x===y,"data-testid":`status-menu-item-${x}`,children:Ps(x)},x))})]})},j$=({book:t,bookId:e,onStatusChange:n})=>t?v.jsxs(re,{"data-testid":"book-info",children:[v.jsx(re,{sx:{display:"flex",justifyContent:"center",alignItems:"center",mb:2},children:v.jsx(V$,{book:t,bookId:e,onStatusChange:n})}),v.jsx(re,{sx:{textAlign:"left",mb:2},"data-testid":"book-cover-section",children:t.coverImageUrl?v.jsx("img",{src:t.coverImageUrl,alt:`${t.title}の表紙`,style:{maxHeight:"250px",width:"auto"},"data-testid":"book-cover-image"}):v.jsx(re,{sx:{border:"1px dashed grey",height:250,width:167,display:"flex",alignItems:"center",justifyContent:"center",mx:"auto"},"data-testid":"book-cover-placeholder",children:v.jsx(te,{variant:"body1",color:"text.secondary",children:"書影なし"})})}),v.jsxs(re,{sx:{mb:2},"data-testid":"book-details",children:[v.jsx(te,{variant:"h4",gutterBottom:!0,sx:{wordBreak:"break-word"},"data-testid":"book-title",children:t.title}),v.jsx(te,{variant:"h6",color:"text.secondary",gutterBottom:!0,"data-testid":"book-author",children:t.author}),t.publisher&&v.jsxs(te,{variant:"body1",color:"text.secondary",gutterBottom:!0,"data-testid":"book-publisher",children:["出版社: ",t.publisher]}),t.publishedDate&&v.jsxs(te,{variant:"body1",color:"text.secondary",gutterBottom:!0,"data-testid":"book-published-date",children:["出版日: ",t.publishedDate]}),t.isbn&&v.jsxs(te,{variant:"body1",color:"text.secondary",gutterBottom:!0,"data-testid":"book-isbn",children:["ISBN: ",t.isbn]}),t.acquisitionType&&t.acquisitionType!==za.UNKNOWN&&v.jsx(re,{sx:{mb:1},children:v.jsx(mn,{label:`取得方法: ${kM(t.acquisitionType)}`,color:"primary",variant:"outlined",size:"small","data-testid":"book-acquisition-type"})})]})]}):null,U$=({book:t,bookId:e,onTagsChange:n})=>{const{user:r}=rr(),i=M.useContext(ri),a=(i==null?void 0:i.setGlobalError)||(()=>{}),[s,o]=M.useState(!1),[c,d]=M.useState([]),{tagOptions:f,fetchTagHistory:p,saveTagsToHistory:g}=bo("book",r);M.useEffect(()=>{p()},[p]);const y=()=>{d(t.tags||[]),o(!0)},x=async()=>{if(t)try{const _=_o(Ht,"books",e);await $1(_,{tags:c,updatedAt:Ti()}),await g(c),n(c),o(!1)}catch(_){console.error("Error updating tags:",_),a("タグの更新に失敗しました。")}};return t?v.jsxs(re,{sx:{mb:2},children:[v.jsxs(re,{sx:{display:"flex",alignItems:"center",gap:1,mb:1},children:[v.jsx(te,{variant:"h6",children:"タグ:"}),v.jsx(jr,{onClick:y,size:"small","data-testid":"edit-tags-button",children:v.jsx(T2,{})})]}),v.jsx(re,{sx:{display:"flex",flexWrap:"wrap",gap:1},children:(t.tags||[]).map((_,A)=>v.jsx(mn,{label:_,size:"small"},A))}),v.jsxs($a,{open:s,onClose:()=>o(!1),maxWidth:"sm",fullWidth:!0,children:[v.jsx(Ds,{children:"タグを編集"}),v.jsx(Ga,{children:v.jsx(mo,{multiple:!0,freeSolo:!0,options:f,value:c,onChange:(_,A)=>d(A),renderInput:_=>v.jsx(xt,{..._,label:"タグ",placeholder:"タグを入力または選択",fullWidth:!0,margin:"normal"}),renderTags:(_,A)=>_.map((E,T)=>M.createElement(mn,{...A({index:T}),key:T,label:E,size:"small"}))})}),v.jsxs(Wa,{children:[v.jsx(Ke,{onClick:()=>o(!1),children:"キャンセル"}),v.jsx(Ke,{onClick:x,variant:"contained","data-testid":"save-tags-button",children:"保存"})]})]})]}):null},H$=t=>({components:{MuiLocalizationProvider:{defaultProps:{localeText:H({},t)}}}}),QM={previousMonth:"Previous month",nextMonth:"Next month",openPreviousView:"Open previous view",openNextView:"Open next view",calendarViewSwitchingButtonAriaLabel:t=>t==="year"?"year view is open, switch to calendar view":"calendar view is open, switch to year view",start:"Start",end:"End",startDate:"Start date",startTime:"Start time",endDate:"End date",endTime:"End time",cancelButtonLabel:"Cancel",clearButtonLabel:"Clear",okButtonLabel:"OK",todayButtonLabel:"Today",nextStepButtonLabel:"Next",datePickerToolbarTitle:"Select date",dateTimePickerToolbarTitle:"Select date & time",timePickerToolbarTitle:"Select time",dateRangePickerToolbarTitle:"Select date range",timeRangePickerToolbarTitle:"Select time range",clockLabelText:(t,e)=>`Select ${t}. ${e?`Selected time is ${e}`:"No time selected"}`,hoursClockNumberText:t=>`${t} hours`,minutesClockNumberText:t=>`${t} minutes`,secondsClockNumberText:t=>`${t} seconds`,selectViewText:t=>`Select ${t}`,calendarWeekNumberHeaderLabel:"Week number",calendarWeekNumberHeaderText:"#",calendarWeekNumberAriaLabelText:t=>`Week ${t}`,calendarWeekNumberText:t=>`${t}`,openDatePickerDialogue:t=>t?`Choose date, selected date is ${t}`:"Choose date",openTimePickerDialogue:t=>t?`Choose time, selected time is ${t}`:"Choose time",openRangePickerDialogue:t=>t?`Choose range, selected range is ${t}`:"Choose range",fieldClearLabel:"Clear",timeTableLabel:"pick time",dateTableLabel:"pick date",fieldYearPlaceholder:t=>"Y".repeat(t.digitAmount),fieldMonthPlaceholder:t=>t.contentType==="letter"?"MMMM":"MM",fieldDayPlaceholder:()=>"DD",fieldWeekDayPlaceholder:t=>t.contentType==="letter"?"EEEE":"EE",fieldHoursPlaceholder:()=>"hh",fieldMinutesPlaceholder:()=>"mm",fieldSecondsPlaceholder:()=>"ss",fieldMeridiemPlaceholder:()=>"aa",year:"Year",month:"Month",day:"Day",weekDay:"Week day",hours:"Hours",minutes:"Minutes",seconds:"Seconds",meridiem:"Meridiem",empty:"Empty"},z$=QM;H$(QM);const $$=["localeText"],pw=M.createContext(null),ZM=function(e){const{localeText:n}=e,r=Be(e,$$),{adapter:i,localeText:a}=M.useContext(pw)??{adapter:void 0,localeText:void 0},s=wt({props:r,name:"MuiLocalizationProvider"}),{children:o,dateAdapter:c,dateFormats:d,dateLibInstance:f,adapterLocale:p,localeText:g}=s,y=M.useMemo(()=>H({},g,a,n),[g,a,n]),x=M.useMemo(()=>{if(!c)return i||null;const E=new c({locale:p,formats:d,instance:f});if(!E.isMUIAdapter)throw new Error(["MUI X: The date adapter should be imported from `@mui/x-date-pickers` or `@mui/x-date-pickers-pro`, not from `@date-io`","For example, `import { AdapterDayjs } from '@mui/x-date-pickers/AdapterDayjs'` instead of `import AdapterDayjs from '@date-io/dayjs'`","More information on the installation documentation: https://mui.com/x/react-date-pickers/quickstart/#installation"].join(`
`));return E},[c,p,d,f,i]),_=M.useMemo(()=>x?{minDate:x.date("1900-01-01T00:00:00.000"),maxDate:x.date("2099-12-31T00:00:00.000")}:null,[x]),A=M.useMemo(()=>({utils:x,adapter:x,defaultDates:_,localeText:y}),[_,x,y]);return v.jsx(pw.Provider,{value:A,children:o})},rb=()=>{const t=M.useContext(pw);if(t===null)throw new Error(["MUI X: Can not find the date and time pickers localization context.","It looks like you forgot to wrap your component in LocalizationProvider.","This can also happen if you are bundling multiple versions of the `@mui/x-date-pickers` package"].join(`
`));if(t.adapter===null)throw new Error(["MUI X: Can not find the date and time pickers adapter from its localization context.","It looks like you forgot to pass a `dateAdapter` to your LocalizationProvider."].join(`
`));const e=M.useMemo(()=>H({},z$,t.localeText),[t.localeText]);return M.useMemo(()=>H({},t,{localeText:e}),[t,e])},Wt=()=>rb().adapter,Xa=()=>rb().localeText,gw=["disablePast","disableFuture","minDate","maxDate","shouldDisableDate","shouldDisableMonth","shouldDisableYear"],mw=["disablePast","disableFuture","minTime","maxTime","shouldDisableTime","minutesStep","ampm","disableIgnoringDatePartForTimeValidation"],JM=["minDateTime","maxDateTime"],G$=[...gw,...mw,...JM],e4=t=>G$.reduce((e,n)=>(t.hasOwnProperty(n)&&(e[n]=t[n]),e),{}),W$=["value","defaultValue","referenceDate","format","formatDensity","onChange","timezone","onError","shouldRespectLeadingZeros","selectedSections","onSelectedSectionsChange","unstableFieldRef","unstableStartFieldRef","unstableEndFieldRef","enableAccessibleFieldDOMStructure","disabled","readOnly","dateSeparator","autoFocus","focused"],t4=(t,e)=>M.useMemo(()=>{const n=H({},t),r={},i=a=>{n.hasOwnProperty(a)&&(r[a]=n[a],delete n[a])};return W$.forEach(i),e==="date"?gw.forEach(i):e==="time"?mw.forEach(i):e==="date-time"&&(gw.forEach(i),mw.forEach(i),JM.forEach(i)),{forwardedProps:n,internalProps:r}},[t,e]),ms=(t,e)=>t.length!==e.length?!1:e.every(n=>t.includes(n)),Y$=({openTo:t,defaultOpenTo:e,views:n,defaultViews:r})=>{const i=n??r;let a;if(t!=null)a=t;else if(i.includes(e))a=e;else if(i.length>0)a=i[0];else throw new Error("MUI X: The `views` prop must contain at least one view.");return{views:i,openTo:a}},Hm=(t,e,n)=>{let r=e;return r=t.setHours(r,t.getHours(n)),r=t.setMinutes(r,t.getMinutes(n)),r=t.setSeconds(r,t.getSeconds(n)),r=t.setMilliseconds(r,t.getMilliseconds(n)),r},y0=({date:t,disableFuture:e,disablePast:n,maxDate:r,minDate:i,isDateDisabled:a,adapter:s,timezone:o})=>{const c=Hm(s,s.date(void 0,o),t);n&&s.isBefore(i,c)&&(i=c),e&&s.isAfter(r,c)&&(r=c);let d=t,f=t;for(s.isBefore(t,i)&&(d=i,f=null),s.isAfter(t,r)&&(f&&(f=r),d=null);d||f;){if(d&&s.isAfter(d,r)&&(d=null),f&&s.isBefore(f,i)&&(f=null),d){if(!a(d))return d;d=s.addDays(d,1)}if(f){if(!a(f))return f;f=s.addDays(f,-1)}}return null},q$=(t,e)=>t.isValid(e)?e:null,zm=(t,e,n)=>e==null||!t.isValid(e)?n:e,X$=(t,e,n)=>!t.isValid(e)&&e!=null&&!t.isValid(n)&&n!=null?!0:t.isEqual(e,n),ib=(t,e)=>{const r=[t.startOfYear(e)];for(;r.length<12;){const i=r[r.length-1];r.push(t.addMonths(i,1))}return r},ab=(t,e,n)=>n==="date"?t.startOfDay(t.date(void 0,e)):t.date(void 0,e),n0=(t,e)=>{const n=t.setHours(t.date(),e==="am"?2:14);return t.format(n,"meridiem")},n4=["year","month","day"],Gd=t=>n4.includes(t),eD=(t,{format:e,views:n},r)=>{if(e!=null)return e;const i=t.formats;return ms(n,["year"])?i.year:ms(n,["month"])?i.month:ms(n,["day"])?i.dayOfMonth:ms(n,["month","year"])?`${i.month} ${i.year}`:ms(n,["day","month"])?`${i.month} ${i.dayOfMonth}`:i.keyboardDate},K$=(t,e)=>{const n=t.startOfWeek(e);return[0,1,2,3,4,5,6].map(r=>t.addDays(n,r))},r4=(t,e)=>{const n=t.formatTokenMap[e];if(n==null)throw new Error([`MUI X: The token "${e}" is not supported by the Date and Time Pickers.`,"Please try using another token or open an issue on https://github.com/mui/mui-x/issues/new/choose if you think it should be supported."].join(`
`));return typeof n=="string"?{type:n,contentType:n==="meridiem"?"letter":"digit",maxLength:void 0}:{type:n.sectionType,contentType:n.contentType,maxLength:n.maxLength}},X1=(t,e)=>{const n=[],r=t.date(void 0,"default"),i=t.startOfWeek(r),a=t.endOfWeek(r);let s=i;for(;t.isBefore(s,a);)n.push(s),s=t.addDays(s,1);return n.map(o=>t.formatByString(o,e))},i4=(t,e,n,r)=>{switch(n){case"month":return ib(t,t.date(void 0,e)).map(i=>t.formatByString(i,r));case"weekDay":return X1(t,r);case"meridiem":{const i=t.date(void 0,e);return[t.startOfDay(i),t.endOfDay(i)].map(a=>t.formatByString(a,r))}default:return[]}},tD="s",Q$=["0","1","2","3","4","5","6","7","8","9"],Z$=t=>{const e=t.date(void 0);return t.formatByString(t.setSeconds(e,0),tD)==="0"?Q$:Array.from({length:10}).map((r,i)=>t.formatByString(t.setSeconds(e,i),tD))},Xc=(t,e)=>{if(e[0]==="0")return t;const n=[];let r="";for(let i=0;i<t.length;i+=1){r+=t[i];const a=e.indexOf(r);a>-1&&(n.push(a.toString()),r="")}return n.join("")},sb=(t,e)=>e[0]==="0"?t:t.split("").map(n=>e[Number(n)]).join(""),nD=(t,e)=>{const n=Xc(t,e);return n!==" "&&!Number.isNaN(Number(n))},ob=(t,e)=>Number(t).toString().padStart(e,"0"),a4=(t,e,n,r,i)=>{if(i.type==="day"&&i.contentType==="digit-with-letter"){const s=t.setDate(n.longestMonth,e);return t.formatByString(s,i.format)}let a=e.toString();return i.hasLeadingZerosInInput&&(a=ob(a,i.maxLength)),sb(a,r)},lb=(t,e,n)=>{let r=t.value||t.placeholder;const i=e==="non-input"?t.hasLeadingZerosInFormat:t.hasLeadingZerosInInput;return e==="non-input"&&t.hasLeadingZerosInInput&&!t.hasLeadingZerosInFormat&&(r=Number(Xc(r,n)).toString()),["input-rtl","input-ltr"].includes(e)&&t.contentType==="digit"&&!i&&r.length===1&&(r=`${r}‎`),e==="input-rtl"&&(r=`⁨${r}⁩`),r},rD=(t,e,n,r)=>t.formatByString(t.parse(e,n),r),J$=(t,e)=>t.formatByString(t.date(void 0,"system"),e).length===4,s4=(t,e,n,r)=>{if(e!=="digit")return!1;const i=t.date(void 0,"default");switch(n){case"year":return t.lib==="dayjs"&&r==="YY"?!0:t.formatByString(t.setYear(i,1),r).startsWith("0");case"month":return t.formatByString(t.startOfYear(i),r).length>1;case"day":return t.formatByString(t.startOfMonth(i),r).length>1;case"weekDay":return t.formatByString(t.startOfWeek(i),r).length>1;case"hours":return t.formatByString(t.setHours(i,1),r).length>1;case"minutes":return t.formatByString(t.setMinutes(i,1),r).length>1;case"seconds":return t.formatByString(t.setSeconds(i,1),r).length>1;default:throw new Error("Invalid section type")}},eG=(t,e,n)=>{const r=e.some(c=>c.type==="day"),i=[],a=[];for(let c=0;c<e.length;c+=1){const d=e[c];r&&d.type==="weekDay"||(i.push(d.format),a.push(lb(d,"non-input",n)))}const s=i.join(" "),o=a.join(" ");return t.parse(o,s)},tG=t=>t.map(e=>`${e.startSeparator}${e.value||e.placeholder}${e.endSeparator}`).join(""),nG=(t,e,n)=>{const i=t.map(a=>{const s=lb(a,n?"input-rtl":"input-ltr",e);return`${a.startSeparator}${s}${a.endSeparator}`}).join("");return n?`⁦${i}⁩`:i},rG=(t,e,n)=>{const r=t.date(void 0,n),i=t.endOfYear(r),a=t.endOfDay(r),{maxDaysInMonth:s,longestMonth:o}=ib(t,r).reduce((c,d)=>{const f=t.getDaysInMonth(d);return f>c.maxDaysInMonth?{maxDaysInMonth:f,longestMonth:d}:c},{maxDaysInMonth:0,longestMonth:null});return{year:({format:c})=>({minimum:0,maximum:J$(t,c)?9999:99}),month:()=>({minimum:1,maximum:t.getMonth(i)+1}),day:({currentDate:c})=>({minimum:1,maximum:t.isValid(c)?t.getDaysInMonth(c):s,longestMonth:o}),weekDay:({format:c,contentType:d})=>{if(d==="digit"){const f=X1(t,c).map(Number);return{minimum:Math.min(...f),maximum:Math.max(...f)}}return{minimum:1,maximum:7}},hours:({format:c})=>{const d=t.getHours(a);return Xc(t.formatByString(t.endOfDay(r),c),e)!==d.toString()?{minimum:1,maximum:Number(Xc(t.formatByString(t.startOfDay(r),c),e))}:{minimum:0,maximum:d}},minutes:()=>({minimum:0,maximum:t.getMinutes(a)}),seconds:()=>({minimum:0,maximum:t.getSeconds(a)}),meridiem:()=>({minimum:0,maximum:1}),empty:()=>({minimum:0,maximum:0})}},iG=(t,e,n,r)=>{switch(e.type){case"year":return t.setYear(r,t.getYear(n));case"month":return t.setMonth(r,t.getMonth(n));case"weekDay":{let i=t.formatByString(n,e.format);e.hasLeadingZerosInInput&&(i=ob(i,e.maxLength));const a=X1(t,e.format),s=a.indexOf(i),c=a.indexOf(e.value)-s;return t.addDays(n,c)}case"day":return t.setDate(r,t.getDate(n));case"meridiem":{const i=t.getHours(n)<12,a=t.getHours(r);return i&&a>=12?t.addHours(r,-12):!i&&a<12?t.addHours(r,12):r}case"hours":return t.setHours(r,t.getHours(n));case"minutes":return t.setMinutes(r,t.getMinutes(n));case"seconds":return t.setSeconds(r,t.getSeconds(n));default:return r}},iD={year:1,month:2,day:3,weekDay:4,hours:5,minutes:6,seconds:7,meridiem:8,empty:9},aD=(t,e,n,r,i)=>[...n].sort((a,s)=>iD[a.type]-iD[s.type]).reduce((a,s)=>!i||s.modified?iG(t,s,e,a):a,r),aG=()=>navigator.userAgent.toLowerCase().includes("android"),sG=(t,e)=>{const n={};if(!e)return t.forEach((c,d)=>{const f=d===0?null:d-1,p=d===t.length-1?null:d+1;n[d]={leftIndex:f,rightIndex:p}}),{neighbors:n,startIndex:0,endIndex:t.length-1};const r={},i={};let a=0,s=0,o=t.length-1;for(;o>=0;){s=t.findIndex((c,d)=>{var f;return d>=a&&((f=c.endSeparator)==null?void 0:f.includes(" "))&&c.endSeparator!==" / "}),s===-1&&(s=t.length-1);for(let c=s;c>=a;c-=1)i[c]=o,r[o]=c,o-=1;a=s+1}return t.forEach((c,d)=>{const f=i[d],p=f===0?null:r[f-1],g=f===t.length-1?null:r[f+1];n[d]={leftIndex:p,rightIndex:g}}),{neighbors:n,startIndex:r[0],endIndex:r[t.length-1]}},yw=(t,e)=>{if(t==null)return null;if(t==="all")return"all";if(typeof t=="string"){const n=e.findIndex(r=>r.type===t);return n===-1?null:n}return t},oG=({adapter:t,format:e})=>{let n=10,r=e,i=t.expandFormat(e);for(;i!==r;)if(r=i,i=t.expandFormat(r),n-=1,n<0)throw new Error("MUI X: The format expansion seems to be in an infinite loop. Please open an issue with the format passed to the component.");return i},lG=({adapter:t,expandedFormat:e})=>{const n=[],{start:r,end:i}=t.escapedCharacters,a=new RegExp(`(\\${r}[^\\${i}]*\\${i})+`,"g");let s=null;for(;s=a.exec(e);)n.push({start:s.index,end:a.lastIndex-1});return n},cG=(t,e,n,r)=>{switch(n.type){case"year":return e.fieldYearPlaceholder({digitAmount:t.formatByString(t.date(void 0,"default"),r).length,format:r});case"month":return e.fieldMonthPlaceholder({contentType:n.contentType,format:r});case"day":return e.fieldDayPlaceholder({format:r});case"weekDay":return e.fieldWeekDayPlaceholder({contentType:n.contentType,format:r});case"hours":return e.fieldHoursPlaceholder({format:r});case"minutes":return e.fieldMinutesPlaceholder({format:r});case"seconds":return e.fieldSecondsPlaceholder({format:r});case"meridiem":return e.fieldMeridiemPlaceholder({format:r});default:return r}},uG=({adapter:t,date:e,shouldRespectLeadingZeros:n,localeText:r,localizedDigits:i,now:a,token:s,startSeparator:o})=>{if(s==="")throw new Error("MUI X: Should not call `commitToken` with an empty token");const c=r4(t,s),d=s4(t,c.contentType,c.type,s),f=n?d:c.contentType==="digit",p=t.isValid(e);let g=p?t.formatByString(e,s):"",y=null;if(f)if(d)y=g===""?t.formatByString(a,s).length:g.length;else{if(c.maxLength==null)throw new Error(`MUI X: The token ${s} should have a 'maxLength' property on it's adapter`);y=c.maxLength,p&&(g=sb(ob(Xc(g,i),y),i))}return H({},c,{format:s,maxLength:y,value:g,placeholder:cG(t,r,c,s),hasLeadingZerosInFormat:d,hasLeadingZerosInInput:f,startSeparator:o,endSeparator:"",modified:!1})},dG=t=>{var y;const{adapter:e,expandedFormat:n,escapedParts:r}=t,i=e.date(void 0),a=[];let s="";const o=Object.keys(e.formatTokenMap).sort((x,_)=>_.length-x.length),c=/^([a-zA-Z]+)/,d=new RegExp(`^(${o.join("|")})*$`),f=new RegExp(`^(${o.join("|")})`),p=x=>r.find(_=>_.start<=x&&_.end>=x);let g=0;for(;g<n.length;){const x=p(g),_=x!=null,A=(y=c.exec(n.slice(g)))==null?void 0:y[1];if(!_&&A!=null&&d.test(A)){let E=A;for(;E.length>0;){const T=f.exec(E)[1];E=E.slice(T.length),a.push(uG(H({},t,{now:i,token:T,startSeparator:s}))),s=""}g+=A.length}else{const E=n[g];_&&(x==null?void 0:x.start)===g||(x==null?void 0:x.end)===g||(a.length===0?s+=E:(a[a.length-1].endSeparator+=E,a[a.length-1].isEndFormatSeparator=!0)),g+=1}}return a.length===0&&s.length>0&&a.push({type:"empty",contentType:"letter",maxLength:null,format:"",value:"",placeholder:"",hasLeadingZerosInFormat:!1,hasLeadingZerosInInput:!1,startSeparator:s,endSeparator:"",modified:!1}),a},fG=({isRtl:t,formatDensity:e,sections:n})=>n.map(r=>{const i=a=>{let s=a;return t&&s!==null&&s.includes(" ")&&(s=`⁩${s}⁦`),e==="spacious"&&["/",".","-"].includes(s)&&(s=` ${s} `),s};return r.startSeparator=i(r.startSeparator),r.endSeparator=i(r.endSeparator),r}),sD=t=>{let e=oG(t);t.isRtl&&t.enableAccessibleFieldDOMStructure&&(e=e.split(" ").reverse().join(" "));const n=lG(H({},t,{expandedFormat:e})),r=dG(H({},t,{expandedFormat:e,escapedParts:n}));return fG(H({},t,{sections:r}))},cb=M.createContext(null),jl=()=>{const t=M.useContext(cb);if(t==null)throw new Error("MUI X: The `usePickerContext` hook can only be called inside the context of a Picker component");return t},ub=()=>M.useContext(cb),o4=M.createContext(()=>!0);function hG(){return M.useContext(o4)}const l4=M.createContext(null);function c4(){return M.useContext(l4)}const u4=M.createContext(null),d4=M.createContext({ownerState:{isPickerDisabled:!1,isPickerReadOnly:!1,isPickerValueEmpty:!1,isPickerOpen:!1,pickerVariant:"desktop",pickerOrientation:"portrait"},rootRefObject:{current:null},labelId:void 0,dismissViews:()=>{},hasUIView:!0,getCurrentViewMode:()=>"UI",triggerElement:null,viewContainerRole:null,defaultActionBarActions:[],onPopperExited:void 0});function f4(t){const{contextValue:e,actionsContextValue:n,privateContextValue:r,fieldPrivateContextValue:i,isValidContextValue:a,localeText:s,children:o}=t;return v.jsx(cb.Provider,{value:e,children:v.jsx(u4.Provider,{value:n,children:v.jsx(d4.Provider,{value:r,children:v.jsx(l4.Provider,{value:i,children:v.jsx(o4.Provider,{value:a,children:v.jsx(ZM,{localeText:s,children:o})})})})})})}const pG=()=>{const t=M.useContext(u4);if(t==null)throw new Error(["MUI X: The `usePickerActionsContext` can only be called in fields that are used as a slot of a Picker component"].join(`
`));return t},h4=()=>rb().defaultDates,ff=t=>{const e=Wt(),n=M.useRef(void 0);return n.current===void 0&&(n.current=e.date(void 0,t)),n.current},gG=Nl(v.jsx("path",{d:"M7 10l5 5 5-5z"})),mG=Nl(v.jsx("path",{d:"M15.41 16.59L10.83 12l4.58-4.59L14 6l-6 6 6 6 1.41-1.41z"})),yG=Nl(v.jsx("path",{d:"M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z"})),vG=Nl(v.jsx("path",{d:"M17 12h-5v5h5v-5zM16 1v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2h-1V1h-2zm3 18H5V8h14v11z"}));Nl(v.jsxs(M.Fragment,{children:[v.jsx("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),v.jsx("path",{d:"M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"})]}));const xG=Nl(v.jsx("path",{d:"M9 11H7v2h2v-2zm4 0h-2v2h2v-2zm4 0h-2v2h2v-2zm2-7h-1V2h-2v2H8V2H6v2H5c-1.11 0-1.99.9-1.99 2L3 20c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 16H5V9h14v11z"})),wG=Nl(v.jsxs(M.Fragment,{children:[v.jsx("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),v.jsx("path",{d:"M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"})]})),_G=Nl(v.jsx("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}));function bG(t){return Rt("MuiPickersArrowSwitcher",t)}Ot("MuiPickersArrowSwitcher",["root","spacer","button","previousIconButton","nextIconButton","leftArrowIcon","rightArrowIcon"]);const nr=()=>M.useContext(d4),AG=["children","className","slots","slotProps","isNextDisabled","isNextHidden","onGoToNext","nextLabel","isPreviousDisabled","isPreviousHidden","onGoToPrevious","previousLabel","labelId","classes"],EG=["ownerState"],SG=["ownerState"],TG=Pe("div",{name:"MuiPickersArrowSwitcher",slot:"Root"})({display:"flex"}),CG=Pe("div",{name:"MuiPickersArrowSwitcher",slot:"Spacer"})(({theme:t})=>({width:t.spacing(3)})),oD=Pe(jr,{name:"MuiPickersArrowSwitcher",slot:"Button"})({variants:[{props:{isButtonHidden:!0},style:{visibility:"hidden"}}]}),IG=t=>vt({root:["root"],spacer:["spacer"],button:["button"],previousIconButton:["previousIconButton"],nextIconButton:["nextIconButton"],leftArrowIcon:["leftArrowIcon"],rightArrowIcon:["rightArrowIcon"]},bG,t),DG=M.forwardRef(function(e,n){const r=Ea(),i=wt({props:e,name:"MuiPickersArrowSwitcher"}),{children:a,className:s,slots:o,slotProps:c,isNextDisabled:d,isNextHidden:f,onGoToNext:p,nextLabel:g,isPreviousDisabled:y,isPreviousHidden:x,onGoToPrevious:_,previousLabel:A,labelId:E,classes:T}=i,C=Be(i,AG),{ownerState:D}=nr(),k=IG(T),B={isDisabled:d,isHidden:f,goTo:p,label:g},O={isDisabled:y,isHidden:x,goTo:_,label:A},I=(o==null?void 0:o.previousIconButton)??oD,R=St({elementType:I,externalSlotProps:c==null?void 0:c.previousIconButton,additionalProps:{size:"medium",title:O.label,"aria-label":O.label,disabled:O.isDisabled,edge:"end",onClick:O.goTo},ownerState:H({},D,{isButtonHidden:O.isHidden??!1}),className:jt(k.button,k.previousIconButton)}),V=(o==null?void 0:o.nextIconButton)??oD,L=St({elementType:V,externalSlotProps:c==null?void 0:c.nextIconButton,additionalProps:{size:"medium",title:B.label,"aria-label":B.label,disabled:B.isDisabled,edge:"start",onClick:B.goTo},ownerState:H({},D,{isButtonHidden:B.isHidden??!1}),className:jt(k.button,k.nextIconButton)}),P=(o==null?void 0:o.leftArrowIcon)??mG,F=St({elementType:P,externalSlotProps:c==null?void 0:c.leftArrowIcon,additionalProps:{fontSize:"inherit"},ownerState:D,className:k.leftArrowIcon}),q=Be(F,EG),X=(o==null?void 0:o.rightArrowIcon)??yG,W=St({elementType:X,externalSlotProps:c==null?void 0:c.rightArrowIcon,additionalProps:{fontSize:"inherit"},ownerState:D,className:k.rightArrowIcon}),G=Be(W,SG);return v.jsxs(TG,H({ref:n,className:jt(k.root,s),ownerState:D},C,{children:[v.jsx(I,H({},R,{children:r?v.jsx(X,H({},G)):v.jsx(P,H({},q))})),a?v.jsx(te,{variant:"subtitle1",component:"span",id:E,children:a}):v.jsx(CG,{className:k.spacer,ownerState:D}),v.jsx(V,H({},L,{children:r?v.jsx(P,H({},q)):v.jsx(X,H({},G))}))]}))}),p4=["hours","minutes","seconds"],RG=["hours","minutes","seconds","meridiem"],v0=t=>p4.includes(t),xd=t=>RG.includes(t),OG=(t,e)=>t?e.getHours(t)>=12?"pm":"am":null,vw=(t,e,n)=>n&&(t>=12?"pm":"am")!==e?e==="am"?t-12:t+12:t,MG=(t,e,n,r)=>{const i=vw(r.getHours(t),e,n);return r.setHours(t,i)},lD=(t,e)=>e.getHours(t)*3600+e.getMinutes(t)*60+e.getSeconds(t),K1=(t,e)=>(n,r)=>t?e.isAfter(n,r):lD(n,e)>lD(r,e),cD=(t,{format:e,views:n,ampm:r})=>{if(e!=null)return e;const i=t.formats;return ms(n,["hours"])?r?`${i.hours12h} ${i.meridiem}`:i.hours24h:ms(n,["minutes"])?i.minutes:ms(n,["seconds"])?i.seconds:ms(n,["minutes","seconds"])?`${i.minutes}:${i.seconds}`:ms(n,["hours","minutes","seconds"])?r?`${i.hours12h}:${i.minutes}:${i.seconds} ${i.meridiem}`:`${i.hours24h}:${i.minutes}:${i.seconds}`:r?`${i.hours12h}:${i.minutes} ${i.meridiem}`:`${i.hours24h}:${i.minutes}`},g4={hasNextStep:!1,hasSeveralSteps:!1,goToNextStep:()=>{},areViewsInSameStep:()=>!0};function PG(t){const{steps:e,isViewMatchingStep:n,onStepChange:r}=t;return i=>{if(e==null)return g4;const a=e.findIndex(o=>n(i.view,o)),s=a===-1||a===e.length-1?null:e[a+1];return{hasNextStep:s!=null,hasSeveralSteps:e.length>1,goToNextStep:()=>{s!=null&&r(H({},i,{step:s}))},areViewsInSameStep:(o,c)=>{const d=e.find(p=>n(o,p)),f=e.find(p=>n(c,p));return d===f}}}}function Q1({onChange:t,onViewChange:e,openTo:n,view:r,views:i,autoFocus:a,focusedView:s,onFocusedViewChange:o,getStepNavigation:c}){const d=M.useRef(n),f=M.useRef(i),p=M.useRef(i.includes(n)?n:i[0]),[g,y]=Bd({name:"useViews",state:"view",controlled:r,default:p.current}),x=M.useRef(a?g:null),[_,A]=Bd({name:"useViews",state:"focusedView",controlled:s,default:x.current}),E=c?c({setView:y,view:g,defaultView:p.current,views:i}):g4;M.useEffect(()=>{(d.current&&d.current!==n||f.current&&f.current.some(R=>!i.includes(R)))&&(y(i.includes(n)?n:i[0]),f.current=i,d.current=n)},[n,y,g,i]);const T=i.indexOf(g),C=i[T-1]??null,D=i[T+1]??null,k=Ue((R,V)=>{A(V?R:L=>R===L?null:L),o==null||o(R,V)}),B=Ue(R=>{k(R,!0),R!==g&&(y(R),e&&e(R))}),O=Ue(()=>{D&&B(D)}),I=Ue((R,V,L)=>{const P=V==="finish",F=L?i.indexOf(L)<i.length-1:!!D;t(R,P&&F?"partial":V,L);let X=null;if(L!=null&&L!==g?X=L:P&&(X=g),X==null)return;const W=i[i.indexOf(X)+1];W==null||!E.areViewsInSameStep(X,W)||B(W)});return H({},E,{view:g,setView:B,focusedView:_,setFocusedView:k,nextView:D,previousView:C,defaultView:i.includes(n)?n:i[0],goToNextView:O,setValueAndGoToNextView:I})}function kG(t,{disableFuture:e,maxDate:n,timezone:r}){const i=Wt();return M.useMemo(()=>{const a=i.date(void 0,r),s=i.startOfMonth(e&&i.isBefore(a,n)?a:n);return!i.isAfter(s,t)},[e,n,t,i,r])}function NG(t,{disablePast:e,minDate:n,timezone:r}){const i=Wt();return M.useMemo(()=>{const a=i.date(void 0,r),s=i.startOfMonth(e&&i.isAfter(a,n)?a:n);return!i.isBefore(s,t)},[e,n,t,i,r])}function m4(t,e,n,r){const i=Wt(),a=M.useMemo(()=>i.isValid(t)?t:null,[i,t]),s=OG(a,i),o=M.useCallback(c=>{const d=a==null?null:MG(a,c,!!e,i);n(d,r??"partial")},[e,a,n,r,i]);return{meridiemMode:s,handleMeridiemChange:o}}const x0=36,Z1=2,Wd=320,LG=280,Yd=336,y4=232,Wh=48,db=Pe("div")({overflow:"hidden",width:Wd,maxHeight:Yd,display:"flex",flexDirection:"column",margin:"0 auto"}),iu=({name:t,timezone:e,value:n,defaultValue:r,referenceDate:i,onChange:a,valueManager:s})=>{const o=Wt(),[c,d]=Bd({name:t,state:"value",controlled:n,default:r??s.emptyValue}),f=M.useMemo(()=>s.getTimezone(o,c),[o,s,c]),p=Ue(_=>f==null?_:s.setTimezone(o,f,_)),g=M.useMemo(()=>e||f||(i?o.getTimezone(Array.isArray(i)?i[0]:i):"default"),[e,f,i,o]),y=M.useMemo(()=>s.setTimezone(o,g,c),[s,o,g,c]),x=Ue((_,...A)=>{const E=p(_);d(E),a==null||a(E,...A)});return{value:y,handleValueChange:x,timezone:g}},Ba={year:1,month:2,day:3,hours:4,minutes:5,seconds:6,milliseconds:7},BG=t=>Math.max(...t.map(e=>Ba[e.type]??1)),bh=(t,e,n)=>{if(e===Ba.year)return t.startOfYear(n);if(e===Ba.month)return t.startOfMonth(n);if(e===Ba.day)return t.startOfDay(n);let r=n;return e<Ba.minutes&&(r=t.setMinutes(r,0)),e<Ba.seconds&&(r=t.setSeconds(r,0)),e<Ba.milliseconds&&(r=t.setMilliseconds(r,0)),r},FG=({props:t,adapter:e,granularity:n,timezone:r,getTodayDate:i})=>{let a=i?i():bh(e,n,ab(e,r));t.minDate!=null&&e.isAfterDay(t.minDate,a)&&(a=bh(e,n,t.minDate)),t.maxDate!=null&&e.isBeforeDay(t.maxDate,a)&&(a=bh(e,n,t.maxDate));const s=K1(t.disableIgnoringDatePartForTimeValidation??!1,e);return t.minTime!=null&&s(t.minTime,a)&&(a=bh(e,n,t.disableIgnoringDatePartForTimeValidation?t.minTime:Hm(e,a,t.minTime))),t.maxTime!=null&&s(a,t.maxTime)&&(a=bh(e,n,t.disableIgnoringDatePartForTimeValidation?t.maxTime:Hm(e,a,t.maxTime))),a},VG=["value","referenceDate"],Di={emptyValue:null,getTodayValue:ab,getInitialReferenceValue:t=>{let{value:e,referenceDate:n}=t,r=Be(t,VG);return r.adapter.isValid(e)?e:n??FG(r)},cleanValue:q$,areValuesEqual:X$,isSameError:(t,e)=>t===e,hasError:t=>t!=null,defaultErrorState:null,getTimezone:(t,e)=>t.isValid(e)?t.getTimezone(e):null,setTimezone:(t,e,n)=>n==null?null:t.setTimezone(n,e)},jG={updateReferenceValue:(t,e,n)=>t.isValid(e)?e:n,getSectionsFromValue:(t,e)=>e(t),getV7HiddenInputValueFromSections:tG,getV6InputValueFromSections:nG,parseValueStr:(t,e,n)=>n(t.trim(),e),getDateFromSection:t=>t,getDateSectionsFromValue:t=>t,updateDateInValue:(t,e,n)=>n,clearDateSections:t=>t.map(e=>H({},e,{value:""}))},v4=({value:t,referenceDate:e,adapter:n,props:r,timezone:i})=>{const a=M.useMemo(()=>Di.getInitialReferenceValue({value:t,adapter:n,props:r,referenceDate:e,granularity:Ba.day,timezone:i,getTodayDate:()=>ab(n,i,"date")}),[e,i]);return t??a};function UG(t){return Rt("MuiDigitalClock",t)}const xw=Ot("MuiDigitalClock",["root","list","item"]);function HG(t,e){return Array.isArray(e)?e.every(n=>t.indexOf(n)!==-1):t.indexOf(e)!==-1}const zG=t=>{setTimeout(t,0)},x4=(t=document)=>{const e=t.activeElement;return e?e.shadowRoot?x4(e.shadowRoot):e:null},di=t=>x4(Xh(t)),$m=t=>Array.from(t.children).indexOf(di(t)),$G="@media (pointer: fine)";function GG(...t){return t.reduce((e,n)=>(Array.isArray(n)?e.push(...n):n!=null&&e.push(n),e),[])}const WG=["ampm","timeStep","autoFocus","slots","slotProps","value","defaultValue","referenceDate","disableIgnoringDatePartForTimeValidation","maxTime","minTime","disableFuture","disablePast","minutesStep","shouldDisableTime","onChange","view","openTo","onViewChange","focusedView","onFocusedViewChange","className","classes","disabled","readOnly","views","skipDisabled","timezone"],YG=t=>vt({root:["root"],list:["list"],item:["item"]},UG,t),qG=Pe(db,{name:"MuiDigitalClock",slot:"Root"})({overflowY:"auto",width:"100%",scrollbarWidth:"thin","@media (prefers-reduced-motion: no-preference)":{scrollBehavior:"auto"},maxHeight:y4,variants:[{props:{hasDigitalClockAlreadyBeenRendered:!0},style:{"@media (prefers-reduced-motion: no-preference)":{scrollBehavior:"smooth"}}}]}),XG=Pe(Z3,{name:"MuiDigitalClock",slot:"List"})({padding:0}),KG=Pe(pn,{name:"MuiDigitalClock",slot:"Item",shouldForwardProp:t=>t!=="itemValue"&&t!=="formattedValue"})(({theme:t})=>({padding:"8px 16px",margin:"2px 4px","&:first-of-type":{marginTop:4},"&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.hoverOpacity})`:Rs(t.palette.primary.main,t.palette.action.hoverOpacity)},"&.Mui-selected":{backgroundColor:(t.vars||t).palette.primary.main,color:(t.vars||t).palette.primary.contrastText,"&:focus-visible, &:hover":{backgroundColor:(t.vars||t).palette.primary.dark}},"&.Mui-focusVisible":{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.focusOpacity})`:Rs(t.palette.primary.main,t.palette.action.focusOpacity)}})),QG=M.forwardRef(function(e,n){const r=Wt(),i=M.useRef(null),a=ti(n,i),s=M.useRef(null),o=wt({props:e,name:"MuiDigitalClock"}),{ampm:c=r.is12HourCycleInCurrentLocale(),timeStep:d=30,autoFocus:f,slots:p,slotProps:g,value:y,defaultValue:x,referenceDate:_,disableIgnoringDatePartForTimeValidation:A=!1,maxTime:E,minTime:T,disableFuture:C,disablePast:D,minutesStep:k=1,shouldDisableTime:B,onChange:O,view:I,openTo:R,onViewChange:V,focusedView:L,onFocusedViewChange:P,className:F,classes:q,disabled:X,readOnly:W,views:G=["hours"],skipDisabled:Q=!1,timezone:Z}=o,de=Be(o,WG),{value:ge,handleValueChange:xe,timezone:be}=iu({name:"DigitalClock",timezone:Z,value:y,defaultValue:x,referenceDate:_,onChange:O,valueManager:Di}),ke=Xa(),he=ff(be),{ownerState:Se}=nr(),Ae=H({},Se,{hasDigitalClockAlreadyBeenRendered:!!i.current}),Fe=YG(q),ae=(p==null?void 0:p.digitalClockItem)??KG,ye=St({elementType:ae,externalSlotProps:g==null?void 0:g.digitalClockItem,ownerState:Ae,className:Fe.item}),pe=v4({value:ge,referenceDate:_,adapter:r,props:o,timezone:be}),ie=Ue(Ge=>xe(Ge,"finish","hours")),{setValueAndGoToNextView:Ve}=Q1({view:I,views:G,openTo:R,onViewChange:V,onChange:ie,focusedView:L,onFocusedViewChange:P}),we=Ue(Ge=>{Ve(Ge,"finish")});Wn(()=>{if(i.current===null)return;const Ge=i.current.querySelector('[role="listbox"] [role="option"][tabindex="0"], [role="listbox"] [role="option"][aria-selected="true"]');if(!Ge)return;const Oe=Ge.offsetTop;(f||L)&&Ge.focus(),i.current.scrollTop=Oe-4});const ze=M.useCallback(Ge=>{const Oe=K1(A,r),Ne=()=>!(T&&Oe(T,Ge)||E&&Oe(Ge,E)||C&&Oe(Ge,he)||D&&Oe(he,Ge)),dt=()=>r.getMinutes(Ge)%k!==0?!1:B?!B(Ge,"hours"):!0;return!Ne()||!dt()},[A,r,T,E,C,he,D,k,B]),Me=M.useMemo(()=>{const Ge=[];let Ne=r.startOfDay(pe);for(;r.isSameDay(pe,Ne);)Ge.push(Ne),Ne=r.addMinutes(Ne,d);return Ge},[pe,d,r]),Re=Me.findIndex(Ge=>r.isEqual(Ge,pe)),Ye=Ge=>{switch(Ge.key){case"PageUp":{const Oe=$m(s.current)-5,Ne=s.current.children,dt=Math.max(0,Oe),_t=Ne[dt];_t&&_t.focus(),Ge.preventDefault();break}case"PageDown":{const Oe=$m(s.current)+5,Ne=s.current.children,dt=Math.min(Ne.length-1,Oe),_t=Ne[dt];_t&&_t.focus(),Ge.preventDefault();break}}};return v.jsx(qG,H({ref:a,className:jt(Fe.root,F),ownerState:Ae},de,{children:v.jsx(XG,{ref:s,role:"listbox","aria-label":ke.timePickerToolbarTitle,className:Fe.list,onKeyDown:Ye,children:Me.map((Ge,Oe)=>{const Ne=ze(Ge);if(Q&&Ne)return null;const dt=r.isEqual(Ge,ge),_t=r.format(Ge,c?"fullTime12h":"fullTime24h"),On=Re===Oe||Re===-1&&Oe===0?0:-1;return v.jsx(ae,H({onClick:()=>!W&&we(Ge),selected:dt,disabled:X||Ne,disableRipple:W,role:"option","aria-disabled":W,"aria-selected":dt,tabIndex:On,itemValue:Ge,formattedValue:_t},ye,{children:_t}),`${Ge.valueOf()}-${_t}`)})})}))});function ZG(t){return Rt("MuiMultiSectionDigitalClock",t)}const ww=Ot("MuiMultiSectionDigitalClock",["root"]);function JG(t){return Rt("MuiMultiSectionDigitalClockSection",t)}const _w=Ot("MuiMultiSectionDigitalClockSection",["root","item"]),eW=["autoFocus","onChange","className","classes","disabled","readOnly","items","active","slots","slotProps","skipDisabled"],tW=t=>vt({root:["root"],item:["item"]},JG,t),nW=Pe(Z3,{name:"MuiMultiSectionDigitalClockSection",slot:"Root"})(({theme:t})=>({maxHeight:y4,width:56,padding:0,overflow:"hidden",scrollbarWidth:"thin","@media (prefers-reduced-motion: no-preference)":{scrollBehavior:"auto"},"@media (pointer: fine)":{"&:hover":{overflowY:"auto"}},"@media (pointer: none), (pointer: coarse)":{overflowY:"auto"},"&:not(:first-of-type)":{borderLeft:`1px solid ${(t.vars||t).palette.divider}`},variants:[{props:{hasDigitalClockAlreadyBeenRendered:!0},style:{"@media (prefers-reduced-motion: no-preference)":{scrollBehavior:"smooth"}}}]})),rW=Pe(pn,{name:"MuiMultiSectionDigitalClockSection",slot:"Item"})(({theme:t})=>({padding:8,margin:"2px 4px",width:Wh,justifyContent:"center","&:first-of-type":{marginTop:4},"&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.hoverOpacity})`:Rs(t.palette.primary.main,t.palette.action.hoverOpacity)},"&.Mui-selected":{backgroundColor:(t.vars||t).palette.primary.main,color:(t.vars||t).palette.primary.contrastText,"&:focus-visible, &:hover":{backgroundColor:(t.vars||t).palette.primary.dark}},"&.Mui-focusVisible":{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.focusOpacity})`:Rs(t.palette.primary.main,t.palette.action.focusOpacity)}})),iW=M.forwardRef(function(e,n){const r=M.useRef(null),i=ti(n,r),a=M.useRef(null),s=wt({props:e,name:"MuiMultiSectionDigitalClockSection"}),{autoFocus:o,onChange:c,className:d,classes:f,disabled:p,readOnly:g,items:y,active:x,slots:_,slotProps:A,skipDisabled:E}=s,T=Be(s,eW),{ownerState:C}=nr(),D=H({},C,{hasDigitalClockAlreadyBeenRendered:!!r.current}),k=tW(f),B=(_==null?void 0:_.digitalClockSectionItem)??rW;Wn(()=>{if(r.current===null)return;const R=r.current.querySelector('[role="option"][tabindex="0"], [role="option"][aria-selected="true"]');if(x&&o&&R&&R.focus(),!R||a.current===R)return;a.current=R;const V=R.offsetTop,L=R.offsetHeight,P=r.current.clientHeight,F=r.current.scrollHeight,q=V-P/2+L/2,X=F-P,W=Math.min(q,X);r.current.scrollTop=Math.max(0,W)});const O=y.findIndex(R=>R.isFocused(R.value)),I=R=>{switch(R.key){case"PageUp":{const V=$m(r.current)-5,L=r.current.children,P=Math.max(0,V),F=L[P];F&&F.focus(),R.preventDefault();break}case"PageDown":{const V=$m(r.current)+5,L=r.current.children,P=Math.min(L.length-1,V),F=L[P];F&&F.focus(),R.preventDefault();break}}};return v.jsx(nW,H({ref:i,className:jt(k.root,d),ownerState:D,autoFocusItem:o&&x,role:"listbox",onKeyDown:I},T,{children:y.map((R,V)=>{var X;const L=(X=R.isDisabled)==null?void 0:X.call(R,R.value),P=p||L;if(E&&P)return null;const F=R.isSelected(R.value),q=O===V||O===-1&&V===0?0:-1;return v.jsx(B,H({onClick:()=>!g&&c(R.value),selected:F,disabled:P,disableRipple:g,role:"option","aria-disabled":g||P||void 0,"aria-label":R.ariaLabel,"aria-selected":F,tabIndex:q,className:k.item},A==null?void 0:A.digitalClockSectionItem,{children:R.label}),R.label)})}))}),aW=({now:t,value:e,adapter:n,ampm:r,isDisabled:i,resolveAriaLabel:a,timeStep:s,valueOrReferenceDate:o})=>{const c=e?n.getHours(e):null,d=[],f=(y,x)=>{const _=x??c;return _===null?!1:r?y===12?_===12||_===0:_===y||_-12===y:_===y},p=y=>f(y,n.getHours(o)),g=r?11:23;for(let y=0;y<=g;y+=s){let x=n.format(n.setHours(t,y),r?"hours12h":"hours24h");const _=a(parseInt(x,10).toString());x=n.formatNumber(x),d.push({value:y,label:x,isSelected:f,isDisabled:i,isFocused:p,ariaLabel:_})}return d},uD=({value:t,adapter:e,isDisabled:n,timeStep:r,resolveLabel:i,resolveAriaLabel:a,hasValue:s=!0})=>{const o=d=>t===null?!1:s&&t===d,c=d=>t===d;return[...Array.from({length:Math.ceil(60/r)},(d,f)=>{const p=r*f;return{value:p,label:e.formatNumber(i(p)),isDisabled:n,isSelected:o,isFocused:c,ariaLabel:a(p.toString())}})]},sW=["ampm","timeSteps","autoFocus","slots","slotProps","value","defaultValue","referenceDate","disableIgnoringDatePartForTimeValidation","maxTime","minTime","disableFuture","disablePast","minutesStep","shouldDisableTime","onChange","view","views","openTo","onViewChange","focusedView","onFocusedViewChange","className","classes","disabled","readOnly","skipDisabled","timezone"],oW=t=>vt({root:["root"]},ZG,t),lW=Pe(db,{name:"MuiMultiSectionDigitalClock",slot:"Root"})(({theme:t})=>({flexDirection:"row",width:"100%",borderBottom:`1px solid ${(t.vars||t).palette.divider}`})),cW=M.forwardRef(function(e,n){const r=Wt(),i=Ea(),a=wt({props:e,name:"MuiMultiSectionDigitalClock"}),{ampm:s=r.is12HourCycleInCurrentLocale(),timeSteps:o,autoFocus:c,slots:d,slotProps:f,value:p,defaultValue:g,referenceDate:y,disableIgnoringDatePartForTimeValidation:x=!1,maxTime:_,minTime:A,disableFuture:E,disablePast:T,minutesStep:C=1,shouldDisableTime:D,onChange:k,view:B,views:O=["hours","minutes"],openTo:I,onViewChange:R,focusedView:V,onFocusedViewChange:L,className:P,classes:F,disabled:q,readOnly:X,skipDisabled:W=!1,timezone:G}=a,Q=Be(a,sW),{value:Z,handleValueChange:de,timezone:ge}=iu({name:"MultiSectionDigitalClock",timezone:G,value:p,defaultValue:g,referenceDate:y,onChange:k,valueManager:Di}),xe=Xa(),be=ff(ge),ke=M.useMemo(()=>H({hours:1,minutes:5,seconds:5},o),[o]),he=v4({value:Z,referenceDate:y,adapter:r,props:a,timezone:ge}),Se=Ue((Oe,Ne,dt)=>de(Oe,Ne,dt)),Ae=M.useMemo(()=>!s||!O.includes("hours")||O.includes("meridiem")?O:[...O,"meridiem"],[s,O]),{view:Fe,setValueAndGoToNextView:ae,focusedView:ye}=Q1({view:B,views:Ae,openTo:I,onViewChange:R,onChange:Se,focusedView:V,onFocusedViewChange:L}),pe=Ue(Oe=>{ae(Oe,"finish","meridiem")}),{meridiemMode:ie,handleMeridiemChange:Ve}=m4(he,s,pe,"finish"),we=M.useCallback((Oe,Ne)=>{const dt=K1(x,r),_t=Ne==="hours"||Ne==="minutes"&&Ae.includes("seconds"),yn=({start:nt,end:it})=>!(A&&dt(A,it)||_&&dt(nt,_)||E&&dt(nt,be)||T&&dt(be,_t?it:nt)),On=(nt,it=1)=>{if(nt%it!==0)return!1;if(D)switch(Ne){case"hours":return!D(r.setHours(he,nt),"hours");case"minutes":return!D(r.setMinutes(he,nt),"minutes");case"seconds":return!D(r.setSeconds(he,nt),"seconds");default:return!1}return!0};switch(Ne){case"hours":{const nt=vw(Oe,ie,s),it=r.setHours(he,nt);if(r.getHours(it)!==nt)return!0;const Tn=r.setSeconds(r.setMinutes(it,0),0),Qe=r.setSeconds(r.setMinutes(it,59),59);return!yn({start:Tn,end:Qe})||!On(nt)}case"minutes":{const nt=r.setMinutes(he,Oe),it=r.setSeconds(nt,0),Tn=r.setSeconds(nt,59);return!yn({start:it,end:Tn})||!On(Oe,C)}case"seconds":{const nt=r.setSeconds(he,Oe);return!yn({start:nt,end:nt})||!On(Oe)}default:throw new Error("not supported")}},[s,he,x,_,ie,A,C,D,r,E,T,be,Ae]),ze=M.useCallback(Oe=>{switch(Oe){case"hours":return{onChange:Ne=>{const dt=vw(Ne,ie,s);ae(r.setHours(he,dt),"finish","hours")},items:aW({now:be,value:Z,ampm:s,adapter:r,isDisabled:Ne=>we(Ne,"hours"),timeStep:ke.hours,resolveAriaLabel:xe.hoursClockNumberText,valueOrReferenceDate:he})};case"minutes":return{onChange:Ne=>{ae(r.setMinutes(he,Ne),"finish","minutes")},items:uD({value:r.getMinutes(he),adapter:r,isDisabled:Ne=>we(Ne,"minutes"),resolveLabel:Ne=>r.format(r.setMinutes(be,Ne),"minutes"),timeStep:ke.minutes,hasValue:!!Z,resolveAriaLabel:xe.minutesClockNumberText})};case"seconds":return{onChange:Ne=>{ae(r.setSeconds(he,Ne),"finish","seconds")},items:uD({value:r.getSeconds(he),adapter:r,isDisabled:Ne=>we(Ne,"seconds"),resolveLabel:Ne=>r.format(r.setSeconds(be,Ne),"seconds"),timeStep:ke.seconds,hasValue:!!Z,resolveAriaLabel:xe.secondsClockNumberText})};case"meridiem":{const Ne=n0(r,"am"),dt=n0(r,"pm");return{onChange:Ve,items:[{value:"am",label:Ne,isSelected:()=>!!Z&&ie==="am",isFocused:()=>!!he&&ie==="am",ariaLabel:Ne},{value:"pm",label:dt,isSelected:()=>!!Z&&ie==="pm",isFocused:()=>!!he&&ie==="pm",ariaLabel:dt}]}}default:throw new Error(`Unknown view: ${Oe} found.`)}},[be,Z,s,r,ke.hours,ke.minutes,ke.seconds,xe.hoursClockNumberText,xe.minutesClockNumberText,xe.secondsClockNumberText,ie,ae,he,we,Ve]),Me=M.useMemo(()=>{if(!i)return Ae;const Oe=Ae.filter(Ne=>Ne!=="meridiem");return Oe.reverse(),Ae.includes("meridiem")&&Oe.push("meridiem"),Oe},[i,Ae]),Re=M.useMemo(()=>Ae.reduce((Oe,Ne)=>H({},Oe,{[Ne]:ze(Ne)}),{}),[Ae,ze]),{ownerState:Ye}=nr(),Ge=oW(F);return v.jsx(lW,H({ref:n,className:jt(Ge.root,P),ownerState:Ye,role:"group"},Q,{children:Me.map(Oe=>v.jsx(iW,{items:Re[Oe].items,onChange:Re[Oe].onChange,active:Fe===Oe,autoFocus:c||ye===Oe,disabled:q,readOnly:X,slots:d,slotProps:f,skipDisabled:W,"aria-label":xe.selectViewText(Oe)},Oe))}))});function uW(t){return Rt("MuiPickersDay",t)}const bc=Ot("MuiPickersDay",["root","dayWithMargin","dayOutsideMonth","hiddenDaySpacingFiller","today","selected","disabled"]);function w4(t){const{disabled:e,selected:n,today:r,outsideCurrentMonth:i,day:a,disableMargin:s,disableHighlightToday:o,showDaysOutsideCurrentMonth:c}=t,d=Wt(),{ownerState:f}=nr();return M.useMemo(()=>H({},f,{day:a,isDaySelected:n??!1,isDayDisabled:e??!1,isDayCurrent:r??!1,isDayOutsideMonth:i??!1,isDayStartOfWeek:d.isSameDay(a,d.startOfWeek(a)),isDayEndOfWeek:d.isSameDay(a,d.endOfWeek(a)),disableMargin:s??!1,disableHighlightToday:o??!1,showDaysOutsideCurrentMonth:c??!1}),[d,f,a,n,e,r,i,s,o,c])}const dW=["autoFocus","className","classes","hidden","isAnimating","onClick","onDaySelect","onFocus","onBlur","onKeyDown","onMouseDown","onMouseEnter","children","isFirstVisibleCell","isLastVisibleCell","day","selected","disabled","today","outsideCurrentMonth","disableMargin","disableHighlightToday","showDaysOutsideCurrentMonth"],fW=(t,e)=>{const{isDaySelected:n,isDayDisabled:r,isDayCurrent:i,isDayOutsideMonth:a,disableMargin:s,disableHighlightToday:o,showDaysOutsideCurrentMonth:c}=e,d=a&&!c;return vt({root:["root",n&&!d&&"selected",r&&"disabled",!s&&"dayWithMargin",!o&&i&&"today",a&&c&&"dayOutsideMonth",d&&"hiddenDaySpacingFiller"],hiddenDaySpacingFiller:["hiddenDaySpacingFiller"]},uW,t)},_4=({theme:t})=>H({},t.typography.caption,{width:x0,height:x0,borderRadius:"50%",padding:0,backgroundColor:"transparent",transition:t.transitions.create("background-color",{duration:t.transitions.duration.short}),color:(t.vars||t).palette.text.primary,"@media (pointer: fine)":{"&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.hoverOpacity})`:Rs(t.palette.primary.main,t.palette.action.hoverOpacity)}},"&:focus":{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.focusOpacity})`:Rs(t.palette.primary.main,t.palette.action.focusOpacity),[`&.${bc.selected}`]:{willChange:"background-color",backgroundColor:(t.vars||t).palette.primary.dark}},[`&.${bc.selected}`]:{color:(t.vars||t).palette.primary.contrastText,backgroundColor:(t.vars||t).palette.primary.main,fontWeight:t.typography.fontWeightMedium,"&:hover":{willChange:"background-color",backgroundColor:(t.vars||t).palette.primary.dark}},[`&.${bc.disabled}:not(.${bc.selected})`]:{color:(t.vars||t).palette.text.disabled},[`&.${bc.disabled}&.${bc.selected}`]:{opacity:.6},variants:[{props:{disableMargin:!1},style:{margin:`0 ${Z1}px`}},{props:{isDayOutsideMonth:!0,showDaysOutsideCurrentMonth:!0},style:{color:(t.vars||t).palette.text.secondary}},{props:{disableHighlightToday:!1,isDayCurrent:!0},style:{[`&:not(.${bc.selected})`]:{border:`1px solid ${(t.vars||t).palette.text.secondary}`}}}]}),b4=(t,e)=>{const{ownerState:n}=t;return[e.root,!n.disableMargin&&e.dayWithMargin,!n.disableHighlightToday&&n.isDayCurrent&&e.today,!n.isDayOutsideMonth&&n.showDaysOutsideCurrentMonth&&e.dayOutsideMonth,n.isDayOutsideMonth&&!n.showDaysOutsideCurrentMonth&&e.hiddenDaySpacingFiller]},hW=Pe(EN,{name:"MuiPickersDay",slot:"Root",overridesResolver:b4})(_4),pW=Pe("div",{name:"MuiPickersDay",slot:"Root",overridesResolver:b4})(({theme:t})=>H({},_4({theme:t}),{opacity:0,pointerEvents:"none"})),Ah=()=>{},gW=M.forwardRef(function(e,n){const r=wt({props:e,name:"MuiPickersDay"}),{autoFocus:i=!1,className:a,classes:s,isAnimating:o,onClick:c,onDaySelect:d,onFocus:f=Ah,onBlur:p=Ah,onKeyDown:g=Ah,onMouseDown:y=Ah,onMouseEnter:x=Ah,children:_,day:A,selected:E,disabled:T,today:C,outsideCurrentMonth:D,disableMargin:k,disableHighlightToday:B,showDaysOutsideCurrentMonth:O}=r,I=Be(r,dW),R=w4({day:A,selected:E,disabled:T,today:C,outsideCurrentMonth:D,disableMargin:k,disableHighlightToday:B,showDaysOutsideCurrentMonth:O}),V=fW(s,R),L=Wt(),P=M.useRef(null),F=ti(P,n);Wn(()=>{i&&!T&&!o&&!D&&P.current.focus()},[i,T,o,D]);const q=W=>{y(W),D&&W.preventDefault()},X=W=>{W.defaultMuiPrevented=!0,T||d(A),D&&W.currentTarget.focus(),c&&c(W)};return D&&!O?v.jsx(pW,{className:jt(V.root,V.hiddenDaySpacingFiller,a),ownerState:R,role:I.role}):v.jsx(hW,H({className:jt(V.root,a),ref:F,centerRipple:!0,disabled:T,tabIndex:E?0:-1,onKeyDown:W=>g(W,A),onFocus:W=>f(W,A),onBlur:W=>p(W,A),onMouseEnter:W=>x(W,A),onClick:X,onMouseDown:q},I,{ownerState:R,children:_??L.format(A,"dayOfMonth")}))}),mW=M.memo(gW),td=t=>t.saveQuery!=null,A4=({stateResponse:{localizedDigits:t,sectionsValueBoundaries:e,state:n,timezone:r,setCharacterQuery:i,setTempAndroidValueStr:a,updateSectionValue:s}})=>{const o=Wt(),c=({keyPressed:p,sectionIndex:g},y,x)=>{const _=p.toLowerCase(),A=n.sections[g];if(n.characterQuery!=null&&(!x||x(n.characterQuery.value))&&n.characterQuery.sectionIndex===g){const T=`${n.characterQuery.value}${_}`,C=y(T,A);if(!td(C))return i({sectionIndex:g,value:T,sectionType:A.type}),C}const E=y(_,A);return td(E)&&!E.saveQuery?(i(null),null):(i({sectionIndex:g,value:_,sectionType:A.type}),td(E)?null:E)},d=p=>{const g=(_,A,E)=>{const T=A.filter(C=>C.toLowerCase().startsWith(E));return T.length===0?{saveQuery:!1}:{sectionValue:T[0],shouldGoToNextSection:T.length===1}},y=(_,A,E,T)=>{const C=D=>i4(o,r,A.type,D);if(A.contentType==="letter")return g(A.format,C(A.format),_);if(E&&T!=null&&r4(o,E).contentType==="letter"){const D=C(E),k=g(E,D,_);return td(k)?{saveQuery:!1}:H({},k,{sectionValue:T(k.sectionValue,D)})}return{saveQuery:!1}};return c(p,(_,A)=>{switch(A.type){case"month":{const E=T=>rD(o,T,o.formats.month,A.format);return y(_,A,o.formats.month,E)}case"weekDay":{const E=(T,C)=>C.indexOf(T).toString();return y(_,A,o.formats.weekday,E)}case"meridiem":return y(_,A);default:return{saveQuery:!1}}})},f=p=>{const g=({queryValue:x,skipIfBelowMinimum:_,section:A})=>{const E=Xc(x,t),T=Number(E),C=e[A.type]({currentDate:null,format:A.format,contentType:A.contentType});if(T>C.maximum)return{saveQuery:!1};if(_&&T<C.minimum)return{saveQuery:!0};const D=T*10>C.maximum||E.length===C.maximum.toString().length;return{sectionValue:a4(o,T,C,t,A),shouldGoToNextSection:D}};return c(p,(x,_)=>{if(_.contentType==="digit"||_.contentType==="digit-with-letter")return g({queryValue:x,skipIfBelowMinimum:!1,section:_});if(_.type==="month"){s4(o,"digit","month","MM");const A=g({queryValue:x,skipIfBelowMinimum:!0,section:{type:_.type,format:"MM",hasLeadingZerosInInput:!0,contentType:"digit",maxLength:2}});if(td(A))return A;const E=rD(o,A.sectionValue,"MM",_.format);return H({},A,{sectionValue:E})}if(_.type==="weekDay"){const A=g({queryValue:x,skipIfBelowMinimum:!0,section:_});if(td(A))return A;const E=X1(o,_.format)[Number(A.sectionValue)-1];return H({},A,{sectionValue:E})}return{saveQuery:!1}},x=>nD(x,t))};return Ue(p=>{const g=n.sections[p.sectionIndex],x=nD(p.keyPressed,t)?f(H({},p,{keyPressed:sb(p.keyPressed,t)})):d(p);if(x==null){a(null);return}s({section:g,newSectionValue:x.sectionValue,shouldGoToNextSection:x.shouldGoToNextSection})})},fb=({props:t,value:e,timezone:n,adapter:r})=>{if(e===null)return null;const{shouldDisableDate:i,shouldDisableMonth:a,shouldDisableYear:s,disablePast:o,disableFuture:c,minDate:d,maxDate:f}=t,p=r.date(void 0,n);switch(!0){case!r.isValid(e):return"invalidDate";case!!(i&&i(e)):return"shouldDisableDate";case!!(a&&a(e)):return"shouldDisableMonth";case!!(s&&s(e)):return"shouldDisableYear";case!!(c&&r.isAfterDay(e,p)):return"disableFuture";case!!(o&&r.isBeforeDay(e,p)):return"disablePast";case!!(d&&r.isBeforeDay(e,d)):return"minDate";case!!(f&&r.isAfterDay(e,f)):return"maxDate";default:return null}};fb.valueManager=Di;const E4=({adapter:t,value:e,timezone:n,props:r})=>{if(e===null)return null;const{minTime:i,maxTime:a,minutesStep:s,shouldDisableTime:o,disableIgnoringDatePartForTimeValidation:c=!1,disablePast:d,disableFuture:f}=r,p=t.date(void 0,n),g=K1(c,t);switch(!0){case!t.isValid(e):return"invalidDate";case!!(i&&g(i,e)):return"minTime";case!!(a&&g(e,a)):return"maxTime";case!!(f&&t.isAfter(e,p)):return"disableFuture";case!!(d&&t.isBefore(e,p)):return"disablePast";case!!(o&&o(e,"hours")):return"shouldDisableTime-hours";case!!(o&&o(e,"minutes")):return"shouldDisableTime-minutes";case!!(o&&o(e,"seconds")):return"shouldDisableTime-seconds";case!!(s&&t.getMinutes(e)%s!==0):return"minutesStep";default:return null}};E4.valueManager=Di;const J1=({adapter:t,value:e,timezone:n,props:r})=>{const i=fb({adapter:t,value:e,timezone:n,props:r});return i!==null?i:E4({adapter:t,value:e,timezone:n,props:r})};J1.valueManager=Di;function S4(t){const{props:e,validator:n,value:r,timezone:i,onError:a}=t,s=Wt(),o=M.useRef(n.valueManager.defaultErrorState),c=n({adapter:s,value:r,timezone:i,props:e}),d=n.valueManager.hasError(c);M.useEffect(()=>{a&&!n.valueManager.isSameError(c,o.current)&&a(c,r),o.current=c},[n,a,c,r]);const f=Ue(p=>n({adapter:s,value:p,timezone:i,props:e}));return{validationError:c,hasValidationError:d,getValidationErrorForNewValue:f}}const yW=5e3,T4=t=>{var Me;const e=Wt(),n=Xa(),r=Ea(),{manager:{validator:i,valueType:a,internal_valueManager:s,internal_fieldValueManager:o},internalPropsWithDefaults:c,internalPropsWithDefaults:{value:d,defaultValue:f,referenceDate:p,onChange:g,format:y,formatDensity:x="dense",selectedSections:_,onSelectedSectionsChange:A,shouldRespectLeadingZeros:E=!1,timezone:T,enableAccessibleFieldDOMStructure:C=!0},forwardedProps:{error:D}}=t,{value:k,handleValueChange:B,timezone:O}=iu({name:"a field component",timezone:T,value:d,defaultValue:f,referenceDate:p,onChange:g,valueManager:s}),I=M.useRef(k);M.useEffect(()=>{I.current=k},[k]);const{hasValidationError:R}=S4({props:c,validator:i,timezone:O,value:k,onError:c.onError}),V=M.useMemo(()=>D!==void 0?D:R,[R,D]),L=M.useMemo(()=>Z$(e),[e]),P=M.useMemo(()=>rG(e,L,O),[e,L,O]),F=M.useCallback(Re=>o.getSectionsFromValue(Re,Ye=>sD({adapter:e,localeText:n,localizedDigits:L,format:y,date:Ye,formatDensity:x,shouldRespectLeadingZeros:E,enableAccessibleFieldDOMStructure:C,isRtl:r})),[o,y,n,L,r,E,e,x,C]),[q,X]=M.useState(()=>{const Re=F(k),Ye={sections:Re,lastExternalValue:k,lastSectionsDependencies:{format:y,isRtl:r,locale:e.locale},tempValueStrAndroid:null,characterQuery:null},Ge=BG(Re),Oe=s.getInitialReferenceValue({referenceDate:p,value:k,adapter:e,props:c,granularity:Ge,timezone:O});return H({},Ye,{referenceValue:Oe})}),[W,G]=Bd({controlled:_,default:null,name:"useField",state:"selectedSections"}),Q=Re=>{G(Re),A==null||A(Re)},Z=M.useMemo(()=>yw(W,q.sections),[W,q.sections]),de=Z==="all"?0:Z,ge=M.useMemo(()=>sG(q.sections,r&&!C),[q.sections,r,C]),xe=M.useMemo(()=>q.sections.every(Re=>Re.value===""),[q.sections]),be=Re=>{const Ye={validationError:i({adapter:e,value:Re,timezone:O,props:c})};B(Re,Ye)},ke=(Re,Ye)=>{const Ge=[...q.sections];return Ge[Re]=H({},Ge[Re],{value:Ye,modified:!0}),Ge},he=M.useRef(null),Se=Sd(),Ae=Re=>{de!=null&&(he.current={sectionIndex:de,value:Re},Se.start(0,()=>{he.current=null}))},Fe=()=>{s.areValuesEqual(e,k,s.emptyValue)?X(Re=>H({},Re,{sections:Re.sections.map(Ye=>H({},Ye,{value:""})),tempValueStrAndroid:null,characterQuery:null})):(X(Re=>H({},Re,{characterQuery:null})),be(s.emptyValue))},ae=()=>{if(de==null)return;const Re=q.sections[de];Re.value!==""&&(Ae(""),o.getDateFromSection(k,Re)===null?X(Ye=>H({},Ye,{sections:ke(de,""),tempValueStrAndroid:null,characterQuery:null})):(X(Ye=>H({},Ye,{characterQuery:null})),be(o.updateDateInValue(k,Re,null))))},ye=Re=>{const Ye=(Oe,Ne)=>{const dt=e.parse(Oe,y);if(!e.isValid(dt))return null;const _t=sD({adapter:e,localeText:n,localizedDigits:L,format:y,date:dt,formatDensity:x,shouldRespectLeadingZeros:E,enableAccessibleFieldDOMStructure:C,isRtl:r});return aD(e,dt,_t,Ne,!1)},Ge=o.parseValueStr(Re,q.referenceValue,Ye);be(Ge)},pe=Sd(),ie=({section:Re,newSectionValue:Ye,shouldGoToNextSection:Ge})=>{Se.clear(),pe.clear();const Oe=o.getDateFromSection(k,Re);Ge&&de<q.sections.length-1&&Q(de+1);const Ne=ke(de,Ye),dt=o.getDateSectionsFromValue(Ne,Re),_t=eG(e,dt,L);if(e.isValid(_t)){const yn=aD(e,_t,dt,o.getDateFromSection(q.referenceValue,Re),!0);return Oe==null&&pe.start(0,()=>{I.current===k&&X(On=>H({},On,{sections:o.clearDateSections(q.sections,Re),tempValueStrAndroid:null}))}),be(o.updateDateInValue(k,Re,yn))}return dt.every(yn=>yn.value!=="")&&(Oe==null||e.isValid(Oe))?(Ae(Ye),be(o.updateDateInValue(k,Re,_t))):Oe!=null?(Ae(Ye),be(o.updateDateInValue(k,Re,null))):X(yn=>H({},yn,{sections:Ne,tempValueStrAndroid:null}))},Ve=Re=>X(Ye=>H({},Ye,{tempValueStrAndroid:Re})),we=Ue(Re=>{X(Ye=>H({},Ye,{characterQuery:Re}))});if(k!==q.lastExternalValue){let Re;he.current!=null&&!e.isValid(o.getDateFromSection(k,q.sections[he.current.sectionIndex]))?Re=ke(he.current.sectionIndex,he.current.value):Re=F(k),X(Ye=>H({},Ye,{lastExternalValue:k,sections:Re,sectionsDependencies:{format:y,isRtl:r,locale:e.locale},referenceValue:o.updateReferenceValue(e,k,Ye.referenceValue),tempValueStrAndroid:null}))}if(r!==q.lastSectionsDependencies.isRtl||y!==q.lastSectionsDependencies.format||e.locale!==q.lastSectionsDependencies.locale){const Re=F(k);X(Ye=>H({},Ye,{lastSectionsDependencies:{format:y,isRtl:r,locale:e.locale},sections:Re,tempValueStrAndroid:null,characterQuery:null}))}q.characterQuery!=null&&!V&&de==null&&we(null),q.characterQuery!=null&&((Me=q.sections[q.characterQuery.sectionIndex])==null?void 0:Me.type)!==q.characterQuery.sectionType&&we(null),M.useEffect(()=>{he.current!=null&&(he.current=null)});const ze=Sd();return M.useEffect(()=>(q.characterQuery!=null&&ze.start(yW,()=>we(null)),()=>{}),[q.characterQuery,we,ze]),M.useEffect(()=>{q.tempValueStrAndroid!=null&&de!=null&&ae()},[q.sections]),{activeSectionIndex:de,areAllSectionsEmpty:xe,error:V,localizedDigits:L,parsedSelectedSections:Z,sectionOrder:ge,sectionsValueBoundaries:P,state:q,timezone:O,value:k,clearValue:Fe,clearActiveSection:ae,setCharacterQuery:we,setSelectedSections:Q,setTempAndroidValueStr:Ve,updateSectionValue:ie,updateValueFromValueStr:ye,getSectionsFromValue:F}};function C4(t){const{manager:{internal_useApplyDefaultValuesToFieldInternalProps:e},internalProps:n,skipContextFieldRefAssignment:r}=t,i=ub(),a=c4(),s=ti(n.unstableFieldRef,r?null:a==null?void 0:a.fieldRef),o=i==null?void 0:i.setValue,c=M.useCallback((f,p)=>o==null?void 0:o(f,{validationError:p.validationError,shouldClose:!1}),[o]),d=M.useMemo(()=>a!=null&&i!=null?H({value:i.value,onChange:c,timezone:i.timezone,disabled:i.disabled,readOnly:i.readOnly,autoFocus:i.autoFocus&&!i.open,focused:i.open?!0:void 0,format:i.fieldFormat,formatDensity:a.formatDensity,enableAccessibleFieldDOMStructure:a.enableAccessibleFieldDOMStructure,selectedSections:a.selectedSections,onSelectedSectionsChange:a.onSelectedSectionsChange,unstableFieldRef:s},n):n,[i,a,n,c,s]);return e(d)}function hb(t){const{focused:e,domGetters:n,stateResponse:{parsedSelectedSections:r,state:i}}=t;if(!n.isReady())return;const a=Xh(n.getRoot()).getSelection();if(!a)return;if(r==null){a.rangeCount>0&&a.getRangeAt(0).startContainer instanceof Node&&n.getRoot().contains(a.getRangeAt(0).startContainer)&&a.removeAllRanges(),e&&n.getRoot().blur();return}if(!n.getRoot().contains(di(n.getRoot())))return;const s=new window.Range;let o;r==="all"?o=n.getRoot():i.sections[r].type==="empty"?o=n.getSectionContainer(r):o=n.getSectionContent(r),s.selectNodeContents(o),o.focus(),a.removeAllRanges(),a.addRange(s)}function I4(t){const e=Wt(),{manager:{internal_fieldValueManager:n},internalPropsWithDefaults:{minutesStep:r,disabled:i,readOnly:a},stateResponse:{state:s,value:o,activeSectionIndex:c,parsedSelectedSections:d,sectionsValueBoundaries:f,localizedDigits:p,timezone:g,sectionOrder:y,clearValue:x,clearActiveSection:_,setSelectedSections:A,updateSectionValue:E}}=t;return Ue(T=>{if(!i)switch(!0){case((T.ctrlKey||T.metaKey)&&String.fromCharCode(T.keyCode)==="A"&&!T.shiftKey&&!T.altKey):{T.preventDefault(),A("all");break}case T.key==="ArrowRight":{if(T.preventDefault(),d==null)A(y.startIndex);else if(d==="all")A(y.endIndex);else{const C=y.neighbors[d].rightIndex;C!==null&&A(C)}break}case T.key==="ArrowLeft":{if(T.preventDefault(),d==null)A(y.endIndex);else if(d==="all")A(y.startIndex);else{const C=y.neighbors[d].leftIndex;C!==null&&A(C)}break}case T.key==="Delete":{if(T.preventDefault(),a)break;d==null||d==="all"?x():_();break}case["ArrowUp","ArrowDown","Home","End","PageUp","PageDown"].includes(T.key):{if(T.preventDefault(),a||c==null)break;d==="all"&&A(c);const C=s.sections[c],D=xW(e,g,C,T.key,f,p,n.getDateFromSection(o,C),{minutesStep:r});E({section:C,newSectionValue:D,shouldGoToNextSection:!1});break}}})}function vW(t){switch(t){case"ArrowUp":return 1;case"ArrowDown":return-1;case"PageUp":return 5;case"PageDown":return-5;default:return 0}}function xW(t,e,n,r,i,a,s,o){const c=vW(r),d=r==="Home",f=r==="End",p=n.value===""||d||f,g=()=>{const x=i[n.type]({currentDate:s,format:n.format,contentType:n.contentType}),_=T=>a4(t,T,x,a,n),A=n.type==="minutes"&&(o!=null&&o.minutesStep)?o.minutesStep:1;let E;if(p){if(n.type==="year"&&!f&&!d)return t.formatByString(t.date(void 0,e),n.format);c>0||d?E=x.minimum:E=x.maximum}else E=parseInt(Xc(n.value,a),10)+c*A;return E%A!==0&&((c<0||d)&&(E+=A-(A+E)%A),(c>0||f)&&(E-=E%A)),E>x.maximum?_(x.minimum+(E-x.maximum-1)%(x.maximum-x.minimum+1)):E<x.minimum?_(x.maximum-(x.minimum-E-1)%(x.maximum-x.minimum+1)):_(E)},y=()=>{const x=i4(t,e,n.type,n.format);if(x.length===0)return n.value;if(p)return c>0||d?x[0]:x[x.length-1];const E=((x.indexOf(n.value)+c)%x.length+x.length)%x.length;return x[E]};return n.contentType==="digit"||n.contentType==="digit-with-letter"?g():y()}function wW(t){const{manager:e,focused:n,setFocused:r,domGetters:i,stateResponse:a,applyCharacterEditing:s,internalPropsWithDefaults:o,stateResponse:{parsedSelectedSections:c,sectionOrder:d,state:f,clearValue:p,setCharacterQuery:g,setSelectedSections:y,updateValueFromValueStr:x},internalPropsWithDefaults:{disabled:_=!1,readOnly:A=!1}}=t,E=I4({manager:e,internalPropsWithDefaults:o,stateResponse:a}),T=Sd(),C=Ue(I=>{_||!i.isReady()||(r(!0),c==="all"?T.start(0,()=>{const R=document.getSelection().getRangeAt(0).startOffset;if(R===0){y(d.startIndex);return}let V=0,L=0;for(;L<R&&V<f.sections.length;){const P=f.sections[V];V+=1,L+=`${P.startSeparator}${P.value||P.placeholder}${P.endSeparator}`.length}y(V-1)}):n?i.getRoot().contains(I.target)||y(d.startIndex):(r(!0),y(d.startIndex)))}),D=Ue(I=>{if(!i.isReady()||c!=="all")return;const V=I.target.textContent??"";i.getRoot().innerHTML=f.sections.map(L=>`${L.startSeparator}${L.value||L.placeholder}${L.endSeparator}`).join(""),hb({focused:n,domGetters:i,stateResponse:a}),V.length===0||V.charCodeAt(0)===10?(p(),y("all")):V.length>1?x(V):(c==="all"&&y(0),s({keyPressed:V,sectionIndex:0}))}),k=Ue(I=>{if(A||c!=="all"){I.preventDefault();return}const R=I.clipboardData.getData("text");I.preventDefault(),g(null),x(R)}),B=Ue(()=>{if(n||_||!i.isReady())return;const I=di(i.getRoot());r(!0),i.getSectionIndexFromDOMElement(I)!=null||y(d.startIndex)}),O=Ue(()=>{setTimeout(()=>{if(!i.isReady())return;const I=di(i.getRoot());!i.getRoot().contains(I)&&(r(!1),y(null))})});return{onKeyDown:E,onBlur:O,onFocus:B,onClick:C,onPaste:k,onInput:D,contentEditable:c==="all",tabIndex:c===0?-1:0}}function _W(t){const{manager:{internal_fieldValueManager:e},stateResponse:{areAllSectionsEmpty:n,state:r,updateValueFromValueStr:i}}=t,a=Ue(o=>{i(o.target.value)});return{value:M.useMemo(()=>n?"":e.getV7HiddenInputValueFromSections(r.sections),[n,r.sections,e]),onChange:a}}function bW(t){const{stateResponse:{setSelectedSections:e},internalPropsWithDefaults:{disabled:n=!1}}=t,r=M.useCallback(i=>a=>{n||a.isDefaultPrevented()||e(i)},[n,e]);return M.useCallback(i=>({"data-sectionindex":i,onClick:r(i)}),[r])}function AW(t){const e=Wt(),n=Xa(),{focused:r,domGetters:i,stateResponse:a,applyCharacterEditing:s,manager:{internal_fieldValueManager:o},stateResponse:{parsedSelectedSections:c,sectionsValueBoundaries:d,state:f,value:p,clearActiveSection:g,setCharacterQuery:y,setSelectedSections:x,updateSectionValue:_,updateValueFromValueStr:A},internalPropsWithDefaults:{disabled:E=!1,readOnly:T=!1}}=t,C=c==="all",D=!C&&!E&&!T,k=Ue(L=>{if(!i.isReady())return;const P=f.sections[L];i.getSectionContent(L).innerHTML=P.value||P.placeholder,hb({focused:r,domGetters:i,stateResponse:a})}),B=Ue(L=>{if(!i.isReady())return;const P=L.target,F=P.textContent??"",q=i.getSectionIndexFromDOMElement(P),X=f.sections[q];if(T){k(q);return}if(F.length===0){if(X.value===""){k(q);return}const W=L.nativeEvent.inputType;if(W==="insertParagraph"||W==="insertLineBreak"){k(q);return}k(q),g();return}s({keyPressed:F,sectionIndex:q}),k(q)}),O=Ue(L=>{L.preventDefault()}),I=Ue(L=>{if(L.preventDefault(),T||E||typeof c!="number")return;const P=f.sections[c],F=L.clipboardData.getData("text"),q=/^[a-zA-Z]+$/.test(F),X=/^[0-9]+$/.test(F),W=/^(([a-zA-Z]+)|)([0-9]+)(([a-zA-Z]+)|)$/.test(F);P.contentType==="letter"&&q||P.contentType==="digit"&&X||P.contentType==="digit-with-letter"&&W?(y(null),_({section:P,newSectionValue:F,shouldGoToNextSection:!0})):!q&&!X&&(y(null),A(F))}),R=Ue(L=>{L.preventDefault(),L.dataTransfer.dropEffect="none"}),V=M.useCallback(L=>()=>{E||x(L)},[E,x]);return M.useCallback((L,P)=>{const F=d[L.type]({currentDate:o.getDateFromSection(p,L),contentType:L.contentType,format:L.format});return{onInput:B,onPaste:I,onMouseUp:O,onDragOver:R,onFocus:V(P),"aria-readonly":T,"aria-valuenow":SW(L,e),"aria-valuemin":F.minimum,"aria-valuemax":F.maximum,"aria-valuetext":L.value?EW(L,e):n.empty,"aria-label":n[L.type],"aria-disabled":E,tabIndex:C||P>0?-1:0,contentEditable:!C&&!E&&!T,role:"spinbutton","data-range-position":L.dateName||void 0,spellCheck:D?!1:void 0,autoCapitalize:D?"off":void 0,autoCorrect:D?"off":void 0,children:L.value||L.placeholder,inputMode:L.contentType==="letter"?"text":"numeric"}},[d,C,E,T,D,n,e,B,I,O,R,V,o,p])}function EW(t,e){if(t.value)switch(t.type){case"month":{if(t.contentType==="digit"){const r=e.setMonth(e.date(),Number(t.value)-1);return e.isValid(r)?e.format(r,"month"):""}const n=e.parse(t.value,t.format);return n&&e.isValid(n)?e.format(n,"month"):void 0}case"day":if(t.contentType==="digit"){const n=e.setDate(e.startOfYear(e.date()),Number(t.value));return e.isValid(n)?e.format(n,"dayOfMonthFull"):""}return t.value;case"weekDay":return;default:return}}function SW(t,e){if(t.value)switch(t.type){case"weekDay":return t.contentType==="letter"?void 0:Number(t.value);case"meridiem":{const n=e.parse(`01:00 ${t.value}`,`${e.formats.hours12h}:${e.formats.minutes} ${t.format}`);return n?e.getHours(n)>=12?1:0:void 0}case"day":return t.contentType==="digit-with-letter"?parseInt(t.value,10):Number(t.value);case"month":{if(t.contentType==="digit")return Number(t.value);const n=e.parse(t.value,t.format);return n?e.getMonth(n)+1:void 0}default:return t.contentType!=="letter"?Number(t.value):void 0}}const TW=t=>{const{props:e,manager:n,skipContextFieldRefAssignment:r,manager:{valueType:i,internal_useOpenPickerButtonAriaLabel:a}}=t,{internalProps:s,forwardedProps:o}=t4(e,i),c=C4({manager:n,internalProps:s,skipContextFieldRefAssignment:r}),{sectionListRef:d,onBlur:f,onClick:p,onFocus:g,onInput:y,onPaste:x,onKeyDown:_,onClear:A,clearable:E}=o,{disabled:T=!1,readOnly:C=!1,autoFocus:D=!1,focused:k,unstableFieldRef:B}=c,O=M.useRef(null),I=ti(d,O),R=M.useMemo(()=>({isReady:()=>O.current!=null,getRoot:()=>O.current.getRoot(),getSectionContainer:Me=>O.current.getSectionContainer(Me),getSectionContent:Me=>O.current.getSectionContent(Me),getSectionIndexFromDOMElement:Me=>O.current.getSectionIndexFromDOMElement(Me)}),[O]),V=T4({manager:n,internalPropsWithDefaults:c,forwardedProps:o}),{areAllSectionsEmpty:L,error:P,parsedSelectedSections:F,sectionOrder:q,state:X,value:W,clearValue:G,setSelectedSections:Q}=V,Z=A4({stateResponse:V}),de=a(W),[ge,xe]=M.useState(!1);function be(Me=0){if(T||!O.current||dD(O)!=null)return;const Re=yw(Me,X.sections);xe(!0),O.current.getSectionContent(Re).focus()}const ke=wW({manager:n,internalPropsWithDefaults:c,stateResponse:V,applyCharacterEditing:Z,focused:ge,setFocused:xe,domGetters:R}),he=_W({manager:n,stateResponse:V}),Se=bW({stateResponse:V,internalPropsWithDefaults:c}),Ae=AW({manager:n,stateResponse:V,applyCharacterEditing:Z,internalPropsWithDefaults:c,domGetters:R,focused:ge}),Fe=Ue(Me=>{_==null||_(Me),ke.onKeyDown(Me)}),ae=Ue(Me=>{f==null||f(Me),ke.onBlur(Me)}),ye=Ue(Me=>{g==null||g(Me),ke.onFocus(Me)}),pe=Ue(Me=>{Me.isDefaultPrevented()||(p==null||p(Me),ke.onClick(Me))}),ie=Ue(Me=>{x==null||x(Me),ke.onPaste(Me)}),Ve=Ue(Me=>{y==null||y(Me),ke.onInput(Me)}),we=Ue((Me,...Re)=>{Me.preventDefault(),A==null||A(Me,...Re),G(),fD(O)?Q(q.startIndex):be(0)}),ze=M.useMemo(()=>X.sections.map((Me,Re)=>{const Ye=Ae(Me,Re);return{container:Se(Re),content:Ae(Me,Re),before:{children:Me.startSeparator},after:{children:Me.endSeparator,"data-range-position":Me.isEndFormatSeparator?Ye["data-range-position"]:void 0}}}),[X.sections,Se,Ae]);return M.useEffect(()=>{if(O.current==null)throw new Error(["MUI X: The `sectionListRef` prop has not been initialized by `PickersSectionList`","You probably tried to pass a component to the `textField` slot that contains an `<input />` element instead of a `PickersSectionList`.","","If you want to keep using an `<input />` HTML element for the editing, please add the `enableAccessibleFieldDOMStructure={false}` prop to your Picker or Field component:","","<DatePicker enableAccessibleFieldDOMStructure={false} slots={{ textField: MyCustomTextField }} />","","Learn more about the field accessible DOM structure on the MUI documentation: https://mui.com/x/react-date-pickers/fields/#fields-to-edit-a-single-element"].join(`
`));D&&!T&&O.current&&O.current.getSectionContent(q.startIndex).focus()},[]),Wn(()=>{if(!(!ge||!O.current)){if(F==="all")O.current.getRoot().focus();else if(typeof F=="number"){const Me=O.current.getSectionContent(F);Me&&Me.focus()}}},[F,ge]),Wn(()=>{hb({focused:ge,domGetters:R,stateResponse:V})}),M.useImperativeHandle(B,()=>({getSections:()=>X.sections,getActiveSectionIndex:()=>dD(O),setSelectedSections:Me=>{if(T||!O.current)return;const Re=yw(Me,X.sections);xe((Re==="all"?0:Re)!==null),Q(Me)},focusField:be,isFieldFocused:()=>fD(O)})),H({},o,ke,{onBlur:ae,onClick:pe,onFocus:ye,onInput:Ve,onPaste:ie,onKeyDown:Fe,onClear:we},he,{error:P,clearable:!!(E&&!L&&!C&&!T),focused:k??ge,sectionListRef:I,enableAccessibleFieldDOMStructure:!0,elements:ze,areAllSectionsEmpty:L,disabled:T,readOnly:C,autoFocus:D,openPickerAriaLabel:de})};function dD(t){var n;const e=di((n=t.current)==null?void 0:n.getRoot());return!e||!t.current||!t.current.getRoot().contains(e)?null:t.current.getSectionIndexFromDOMElement(e)}function fD(t){var n;const e=di((n=t.current)==null?void 0:n.getRoot());return!!t.current&&t.current.getRoot().contains(e)}const wd=t=>t.replace(/[\u2066\u2067\u2068\u2069]/g,""),CW=(t,e,n)=>{let r=0,i=n?1:0;const a=[];for(let s=0;s<t.length;s+=1){const o=t[s],c=lb(o,n?"input-rtl":"input-ltr",e),d=`${o.startSeparator}${c}${o.endSeparator}`,f=wd(d).length,p=d.length,g=wd(c),y=i+(g===""?0:c.indexOf(g[0]))+o.startSeparator.length,x=y+g.length;a.push(H({},o,{start:r,end:r+f,startInInput:y,endInInput:x})),r+=f,i+=p}return a},IW=t=>{const e=Ea(),n=Sd(),r=Sd(),{props:i,manager:a,skipContextFieldRefAssignment:s,manager:{valueType:o,internal_valueManager:c,internal_fieldValueManager:d,internal_useOpenPickerButtonAriaLabel:f}}=t,{internalProps:p,forwardedProps:g}=t4(i,o),y=C4({manager:a,internalProps:p,skipContextFieldRefAssignment:s}),{onFocus:x,onClick:_,onPaste:A,onBlur:E,onKeyDown:T,onClear:C,clearable:D,inputRef:k,placeholder:B}=g,{readOnly:O=!1,disabled:I=!1,autoFocus:R=!1,focused:V,unstableFieldRef:L}=y,P=M.useRef(null),F=ti(k,P),q=T4({manager:a,internalPropsWithDefaults:y,forwardedProps:g}),{activeSectionIndex:X,areAllSectionsEmpty:W,error:G,localizedDigits:Q,parsedSelectedSections:Z,sectionOrder:de,state:ge,value:xe,clearValue:be,clearActiveSection:ke,setCharacterQuery:he,setSelectedSections:Se,setTempAndroidValueStr:Ae,updateSectionValue:Fe,updateValueFromValueStr:ae,getSectionsFromValue:ye}=q,pe=A4({stateResponse:q}),ie=f(xe),Ve=M.useMemo(()=>CW(ge.sections,Q,e),[ge.sections,Q,e]);function we(){const Qe=P.current.selectionStart??0;let pt;Qe<=Ve[0].startInInput||Qe>=Ve[Ve.length-1].endInInput?pt=1:pt=Ve.findIndex(Jt=>Jt.startInInput-Jt.startSeparator.length>Qe);const kt=pt===-1?Ve.length-1:pt-1;Se(kt)}function ze(Qe=0){var pt;di(P.current)!==P.current&&((pt=P.current)==null||pt.focus(),Se(Qe))}const Me=Ue(Qe=>{x==null||x(Qe);const pt=P.current;n.start(0,()=>{!pt||pt!==P.current||X==null&&(pt.value.length&&Number(pt.selectionEnd)-Number(pt.selectionStart)===pt.value.length?Se("all"):we())})}),Re=Ue((Qe,...pt)=>{Qe.isDefaultPrevented()||(_==null||_(Qe,...pt),we())}),Ye=Ue(Qe=>{if(A==null||A(Qe),Qe.preventDefault(),O||I)return;const pt=Qe.clipboardData.getData("text");if(typeof Z=="number"){const kt=ge.sections[Z],Jt=/^[a-zA-Z]+$/.test(pt),An=/^[0-9]+$/.test(pt),Cn=/^(([a-zA-Z]+)|)([0-9]+)(([a-zA-Z]+)|)$/.test(pt);if(kt.contentType==="letter"&&Jt||kt.contentType==="digit"&&An||kt.contentType==="digit-with-letter"&&Cn){he(null),Fe({section:kt,newSectionValue:pt,shouldGoToNextSection:!0});return}if(Jt||An)return}he(null),ae(pt)}),Ge=Ue(Qe=>{E==null||E(Qe),Se(null)}),Oe=Ue(Qe=>{if(O)return;const pt=Qe.target.value;if(pt===""){be();return}const kt=Qe.nativeEvent.data,Jt=kt&&kt.length>1,An=Jt?kt:pt,Cn=wd(An);if(Z==="all"&&Se(X),X==null||Jt){ae(Jt?kt:Cn);return}let Yt;if(Z==="all"&&Cn.length===1)Yt=Cn;else{const zr=wd(d.getV6InputValueFromSections(Ve,Q,e));let gt=-1,Fn=-1;for(let ir=0;ir<zr.length;ir+=1)gt===-1&&zr[ir]!==Cn[ir]&&(gt=ir),Fn===-1&&zr[zr.length-ir-1]!==Cn[Cn.length-ir-1]&&(Fn=ir);const qn=Ve[X];if(gt<qn.start||zr.length-Fn-1>qn.end)return;const mi=Cn.length-zr.length+qn.end-wd(qn.endSeparator||"").length;Yt=Cn.slice(qn.start+wd(qn.startSeparator||"").length,mi)}if(Yt.length===0){aG()&&Ae(An),ke();return}pe({keyPressed:Yt,sectionIndex:X})}),Ne=Ue((Qe,...pt)=>{Qe.preventDefault(),C==null||C(Qe,...pt),be(),hD(P)?Se(de.startIndex):ze(0)}),dt=I4({manager:a,internalPropsWithDefaults:y,stateResponse:q}),_t=Ue(Qe=>{T==null||T(Qe),dt(Qe)}),yn=M.useMemo(()=>B!==void 0?B:d.getV6InputValueFromSections(ye(c.emptyValue),Q,e),[B,d,ye,c.emptyValue,Q,e]),On=M.useMemo(()=>ge.tempValueStrAndroid??d.getV6InputValueFromSections(ge.sections,Q,e),[ge.sections,d,ge.tempValueStrAndroid,Q,e]);M.useEffect(()=>{P.current&&P.current===di(P.current)&&Se("all")},[]),Wn(()=>{function Qe(){if(!P.current)return;if(Z==null){P.current.scrollLeft&&(P.current.scrollLeft=0);return}if(P.current!==di(P.current))return;const pt=P.current.scrollTop;if(Z==="all")P.current.select();else{const kt=Ve[Z],Jt=kt.type==="empty"?kt.startInInput-kt.startSeparator.length:kt.startInInput,An=kt.type==="empty"?kt.endInInput+kt.endSeparator.length:kt.endInInput;(Jt!==P.current.selectionStart||An!==P.current.selectionEnd)&&P.current===di(P.current)&&P.current.setSelectionRange(Jt,An),r.start(0,()=>{P.current&&P.current===di(P.current)&&P.current.selectionStart===P.current.selectionEnd&&(P.current.selectionStart!==Jt||P.current.selectionEnd!==An)&&Qe()})}P.current.scrollTop=pt}Qe()});const nt=M.useMemo(()=>X==null||ge.sections[X].contentType==="letter"?"text":"numeric",[X,ge.sections]),Tn=!(P.current&&P.current===di(P.current))&&W;return M.useImperativeHandle(L,()=>({getSections:()=>ge.sections,getActiveSectionIndex:()=>{const Qe=P.current.selectionStart??0,pt=P.current.selectionEnd??0;if(Qe===0&&pt===0)return null;const kt=Qe<=Ve[0].startInInput?1:Ve.findIndex(Jt=>Jt.startInInput-Jt.startSeparator.length>Qe);return kt===-1?Ve.length-1:kt-1},setSelectedSections:Qe=>Se(Qe),focusField:ze,isFieldFocused:()=>hD(P)})),H({},g,{error:G,clearable:!!(D&&!W&&!O&&!I),onBlur:Ge,onClick:Re,onFocus:Me,onPaste:Ye,onKeyDown:_t,onClear:Ne,inputRef:F,enableAccessibleFieldDOMStructure:!1,placeholder:yn,inputMode:nt,autoComplete:"off",value:Tn?"":On,onChange:Oe,focused:V,disabled:I,readOnly:O,autoFocus:R,openPickerAriaLabel:ie})};function hD(t){return t.current===di(t.current)}const DW=t=>{const e=c4();return(t.props.enableAccessibleFieldDOMStructure??(e==null?void 0:e.enableAccessibleFieldDOMStructure)??!0?TW:IW)(t)};function pb(t){const e=Wt(),n=h4();return M.useMemo(()=>({disablePast:t.disablePast??!1,disableFuture:t.disableFuture??!1,minDate:zm(e,t.minDate,n.minDate),maxDate:zm(e,t.maxDate,n.maxDate)}),[t.minDate,t.maxDate,t.disableFuture,t.disablePast,e,n])}function RW(t={}){const{enableAccessibleFieldDOMStructure:e=!0}=t;return M.useMemo(()=>({valueType:"date-time",validator:J1,internal_valueManager:Di,internal_fieldValueManager:jG,internal_enableAccessibleFieldDOMStructure:e,internal_useApplyDefaultValuesToFieldInternalProps:MW,internal_useOpenPickerButtonAriaLabel:OW}),[e])}function OW(t){const e=Wt(),n=Xa();return M.useMemo(()=>{const r=e.isValid(t)?e.format(t,"fullDate"):null;return n.openDatePickerDialogue(r)},[t,n,e])}function MW(t){const e=Wt(),n=D4(t),r=M.useMemo(()=>t.ampm??e.is12HourCycleInCurrentLocale(),[t.ampm,e]);return M.useMemo(()=>H({},t,n,{format:t.format??(r?e.formats.keyboardDateTime12h:e.formats.keyboardDateTime24h)}),[t,n,r,e])}function D4(t){const e=Wt(),n=h4();return M.useMemo(()=>({disablePast:t.disablePast??!1,disableFuture:t.disableFuture??!1,disableIgnoringDatePartForTimeValidation:!!t.minDateTime||!!t.maxDateTime||!!t.disableFuture||!!t.disablePast,minDate:zm(e,t.minDateTime??t.minDate,n.minDate),maxDate:zm(e,t.maxDateTime??t.maxDate,n.maxDate),minTime:t.minDateTime??t.minTime,maxTime:t.maxDateTime??t.maxTime}),[t.minDateTime,t.maxDateTime,t.minTime,t.maxTime,t.minDate,t.maxDate,t.disableFuture,t.disablePast,e,n])}function gb(t){const{ownerState:e}=nr(),n=Ea();return M.useMemo(()=>H({},e,{isFieldDisabled:t.disabled??!1,isFieldReadOnly:t.readOnly??!1,isFieldRequired:t.required??!1,fieldDirection:n?"rtl":"ltr"}),[e,t.disabled,t.readOnly,t.required,n])}function PW(t){return Rt("MuiPickersTextField",t)}Ot("MuiPickersTextField",["root","focused","disabled","error","required"]);function kW(t){return Rt("MuiPickersInputBase",t)}const Rd=Ot("MuiPickersInputBase",["root","focused","disabled","error","notchedOutline","sectionContent","sectionBefore","sectionAfter","adornedStart","adornedEnd","input","inputSizeSmall","activeBar"]);function NW(t){return Rt("MuiPickersSectionList",t)}const Eh=Ot("MuiPickersSectionList",["root","section","sectionContent"]),LW=["slots","slotProps","elements","sectionListRef","classes"],R4=Pe("div",{name:"MuiPickersSectionList",slot:"Root"})({direction:"ltr /*! @noflip */",outline:"none"}),O4=Pe("span",{name:"MuiPickersSectionList",slot:"Section"})({}),M4=Pe("span",{name:"MuiPickersSectionList",slot:"SectionSeparator"})({whiteSpace:"pre"}),P4=Pe("span",{name:"MuiPickersSectionList",slot:"SectionContent"})({outline:"none"}),BW=t=>vt({root:["root"],section:["section"],sectionContent:["sectionContent"]},NW,t);function FW(t){const{slots:e,slotProps:n,element:r,classes:i}=t,{ownerState:a}=nr(),s=(e==null?void 0:e.section)??O4,o=St({elementType:s,externalSlotProps:n==null?void 0:n.section,externalForwardedProps:r.container,className:i.section,ownerState:a}),c=(e==null?void 0:e.sectionContent)??P4,d=St({elementType:c,externalSlotProps:n==null?void 0:n.sectionContent,externalForwardedProps:r.content,additionalProps:{suppressContentEditableWarning:!0},className:i.sectionContent,ownerState:a}),f=(e==null?void 0:e.sectionSeparator)??M4,p=St({elementType:f,externalSlotProps:n==null?void 0:n.sectionSeparator,externalForwardedProps:r.before,ownerState:H({},a,{separatorPosition:"before"})}),g=St({elementType:f,externalSlotProps:n==null?void 0:n.sectionSeparator,externalForwardedProps:r.after,ownerState:H({},a,{separatorPosition:"after"})});return v.jsxs(s,H({},o,{children:[v.jsx(f,H({},p)),v.jsx(c,H({},d)),v.jsx(f,H({},g))]}))}const VW=M.forwardRef(function(e,n){const r=wt({props:e,name:"MuiPickersSectionList"}),{slots:i,slotProps:a,elements:s,sectionListRef:o,classes:c}=r,d=Be(r,LW),f=BW(c),{ownerState:p}=nr(),g=M.useRef(null),y=ti(n,g),x=E=>{if(!g.current)throw new Error(`MUI X: Cannot call sectionListRef.${E} before the mount of the component.`);return g.current};M.useImperativeHandle(o,()=>({getRoot(){return x("getRoot")},getSectionContainer(E){return x("getSectionContainer").querySelector(`.${Eh.section}[data-sectionindex="${E}"]`)},getSectionContent(E){return x("getSectionContent").querySelector(`.${Eh.section}[data-sectionindex="${E}"] .${Eh.sectionContent}`)},getSectionIndexFromDOMElement(E){const T=x("getSectionIndexFromDOMElement");if(E==null||!T.contains(E))return null;let C=null;return E.classList.contains(Eh.section)?C=E:E.classList.contains(Eh.sectionContent)&&(C=E.parentElement),C==null?null:Number(C.dataset.sectionindex)}}));const _=(i==null?void 0:i.root)??R4,A=St({elementType:_,externalSlotProps:a==null?void 0:a.root,externalForwardedProps:d,additionalProps:{ref:y,suppressContentEditableWarning:!0},className:f.root,ownerState:p});return v.jsx(_,H({},A,{children:A.contentEditable?s.map(({content:E,before:T,after:C})=>`${T.children}${E.children}${C.children}`).join(""):v.jsx(M.Fragment,{children:s.map((E,T)=>v.jsx(FW,{slots:i,slotProps:a,element:E,classes:f},T))})}))}),k4=M.createContext(null),ey=()=>{const t=M.useContext(k4);if(t==null)throw new Error(["MUI X: The `usePickerTextFieldOwnerState` can only be called in components that are used inside a PickerTextField component"].join(`
`));return t},jW=["elements","areAllSectionsEmpty","defaultValue","label","value","onChange","id","autoFocus","endAdornment","startAdornment","renderSuffix","slots","slotProps","contentEditable","tabIndex","onInput","onPaste","onKeyDown","fullWidth","name","readOnly","inputProps","inputRef","sectionListRef","onFocus","onBlur","classes","ownerState"],UW=t=>Math.round(t*1e5)/1e5,ty=Pe("div",{name:"MuiPickersInputBase",slot:"Root"})(({theme:t})=>H({},t.typography.body1,{color:(t.vars||t).palette.text.primary,cursor:"text",padding:0,display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",boxSizing:"border-box",letterSpacing:`${UW(.15/16)}em`,variants:[{props:{isInputInFullWidth:!0},style:{width:"100%"}}]})),mb=Pe(R4,{name:"MuiPickersInputBase",slot:"SectionsContainer"})(({theme:t})=>({padding:"4px 0 5px",fontFamily:t.typography.fontFamily,fontSize:"inherit",lineHeight:"1.4375em",flexGrow:1,outline:"none",display:"flex",flexWrap:"nowrap",overflow:"hidden",letterSpacing:"inherit",width:"182px",variants:[{props:{fieldDirection:"rtl"},style:{justifyContent:"end"}},{props:{inputSize:"small"},style:{paddingTop:1}},{props:{hasStartAdornment:!1,isFieldFocused:!1,isFieldValueEmpty:!0},style:{color:"currentColor",opacity:0}},{props:{hasStartAdornment:!1,isFieldFocused:!1,isFieldValueEmpty:!0,inputHasLabel:!1},style:t.vars?{opacity:t.vars.opacity.inputPlaceholder}:{opacity:t.palette.mode==="light"?.42:.5}},{props:{hasStartAdornment:!1,isFieldFocused:!1,isFieldValueEmpty:!0,inputHasLabel:!0,isLabelShrunk:!0},style:t.vars?{opacity:t.vars.opacity.inputPlaceholder}:{opacity:t.palette.mode==="light"?.42:.5}}]})),HW=Pe(O4,{name:"MuiPickersInputBase",slot:"Section"})(({theme:t})=>({fontFamily:t.typography.fontFamily,fontSize:"inherit",letterSpacing:"inherit",lineHeight:"1.4375em",display:"inline-block",whiteSpace:"nowrap"})),zW=Pe(P4,{name:"MuiPickersInputBase",slot:"SectionContent",overridesResolver:(t,e)=>e.content})(({theme:t})=>({fontFamily:t.typography.fontFamily,lineHeight:"1.4375em",letterSpacing:"inherit",width:"fit-content",outline:"none"})),$W=Pe(M4,{name:"MuiPickersInputBase",slot:"Separator"})(()=>({whiteSpace:"pre",letterSpacing:"inherit"})),GW=Pe("input",{name:"MuiPickersInputBase",slot:"Input",overridesResolver:(t,e)=>e.hiddenInput})(H({},TN)),WW=Pe("div",{name:"MuiPickersInputBase",slot:"ActiveBar"})(({theme:t,ownerState:e})=>({display:"none",position:"absolute",height:2,bottom:2,borderTopLeftRadius:2,borderTopRightRadius:2,transition:t.transitions.create(["width","left"],{duration:t.transitions.duration.shortest}),backgroundColor:(t.vars||t).palette.primary.main,'[data-active-range-position="start"] &, [data-active-range-position="end"] &':{display:"block"},'[data-active-range-position="start"] &':{left:e.sectionOffsets[0]},'[data-active-range-position="end"] &':{left:e.sectionOffsets[1]}})),YW=(t,e)=>{const{isFieldFocused:n,isFieldDisabled:r,isFieldReadOnly:i,hasFieldError:a,inputSize:s,isInputInFullWidth:o,inputColor:c,hasStartAdornment:d,hasEndAdornment:f}=e,p={root:["root",n&&!r&&"focused",r&&"disabled",i&&"readOnly",a&&"error",o&&"fullWidth",`color${SN(c)}`,s==="small"&&"inputSizeSmall",d&&"adornedStart",f&&"adornedEnd"],notchedOutline:["notchedOutline"],input:["input"],sectionsContainer:["sectionsContainer"],sectionContent:["sectionContent"],sectionBefore:["sectionBefore"],sectionAfter:["sectionAfter"],activeBar:["activeBar"]};return vt(p,kW,t)};function pD(t,e,n,r){var i;if(t.content.id){const a=(i=e.current)==null?void 0:i.querySelectorAll(`[data-sectionindex="${n}"] [data-range-position="${r}"]`);if(a)return Array.from(a).reduce((s,o)=>s+o.offsetWidth,0)}return 0}function qW(t,e){var i,a,s,o,c;let n=0;if(((i=e.current)==null?void 0:i.getAttribute("data-active-range-position"))==="end")for(let d=t.length-1;d>=t.length/2;d-=1)n+=pD(t[d],e,d,"end");else for(let d=0;d<t.length/2;d+=1)n+=pD(t[d],e,d,"start");return{activeBarWidth:n,sectionOffsets:[((s=(a=e.current)==null?void 0:a.querySelector('[data-sectionindex="0"]'))==null?void 0:s.offsetLeft)||0,((c=(o=e.current)==null?void 0:o.querySelector(`[data-sectionindex="${t.length/2}"]`))==null?void 0:c.offsetLeft)||0]}}const yb=M.forwardRef(function(e,n){const r=wt({props:e,name:"MuiPickersInputBase"}),{elements:i,areAllSectionsEmpty:a,value:s,onChange:o,id:c,endAdornment:d,startAdornment:f,renderSuffix:p,slots:g,slotProps:y,contentEditable:x,tabIndex:_,onInput:A,onPaste:E,onKeyDown:T,name:C,readOnly:D,inputProps:k,inputRef:B,sectionListRef:O,onFocus:I,onBlur:R,classes:V,ownerState:L}=r,P=Be(r,jW),F=ey(),q=M.useRef(null),X=M.useRef(null),W=M.useRef([]),G=ti(n,q),Q=ti(k==null?void 0:k.ref,B),Z=J3();if(!Z)throw new Error("MUI X: PickersInputBase should always be used inside a PickersTextField component");const de=L??F,ge=ye=>{var pe;(pe=Z.onFocus)==null||pe.call(Z,ye),I==null||I(ye)},xe=ye=>{ge(ye)},be=ye=>{var pe,ie;if(T==null||T(ye),ye.key==="Enter"&&!ye.defaultMuiPrevented){if((pe=q.current)!=null&&pe.dataset.multiInput)return;const Ve=(ie=q.current)==null?void 0:ie.closest("form"),we=Ve==null?void 0:Ve.querySelector('[type="submit"]');if(!Ve||!we)return;ye.preventDefault(),Ve.requestSubmit(we)}},ke=ye=>{var pe;(pe=Z.onBlur)==null||pe.call(Z,ye),R==null||R(ye)};M.useEffect(()=>{Z&&Z.setAdornedStart(!!f)},[Z,f]),M.useEffect(()=>{Z&&(a?Z.onEmpty():Z.onFilled())},[Z,a]);const he=YW(V,de),Se=(g==null?void 0:g.root)||ty,Ae=St({elementType:Se,externalSlotProps:y==null?void 0:y.root,externalForwardedProps:P,additionalProps:{"aria-invalid":Z.error,ref:G},className:he.root,ownerState:de}),Fe=(g==null?void 0:g.input)||mb,ae=i.some(ye=>ye.content["data-range-position"]!==void 0);return M.useEffect(()=>{if(!ae||!de.isPickerOpen)return;const{activeBarWidth:ye,sectionOffsets:pe}=qW(i,q);W.current=[pe[0],pe[1]],X.current&&(X.current.style.width=`${ye}px`)},[i,ae,de.isPickerOpen]),v.jsxs(Se,H({},Ae,{children:[f,v.jsx(VW,{sectionListRef:O,elements:i,contentEditable:x,tabIndex:_,className:he.sectionsContainer,onFocus:ge,onBlur:ke,onInput:A,onPaste:E,onKeyDown:be,slots:{root:Fe,section:HW,sectionContent:zW,sectionSeparator:$W},slotProps:{root:H({},y==null?void 0:y.input,{ownerState:de}),sectionContent:{className:Rd.sectionContent},sectionSeparator:({separatorPosition:ye})=>({className:ye==="before"?Rd.sectionBefore:Rd.sectionAfter})}}),d,p?p(H({},Z)):null,v.jsx(GW,H({name:C,className:he.input,value:s,onChange:o,id:c,"aria-hidden":"true",tabIndex:-1,readOnly:D,required:Z.required,disabled:Z.disabled,onFocus:xe},k,{ref:Q})),ae&&v.jsx(WW,{className:he.activeBar,ref:X,ownerState:{sectionOffsets:W.current}})]}))});function XW(t){return Rt("MuiPickersOutlinedInput",t)}const Pa=H({},Rd,Ot("MuiPickersOutlinedInput",["root","notchedOutline","input"])),KW=["children","className","label","notched","shrink"],QW=Pe("fieldset",{name:"MuiPickersOutlinedInput",slot:"NotchedOutline"})(({theme:t})=>{const e=t.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{textAlign:"left",position:"absolute",bottom:0,right:0,top:-5,left:0,margin:0,padding:"0 8px",pointerEvents:"none",borderRadius:"inherit",borderStyle:"solid",borderWidth:1,overflow:"hidden",minWidth:"0%",borderColor:t.vars?`rgba(${t.vars.palette.common.onBackgroundChannel} / 0.23)`:e}}),gD=Pe("span")(({theme:t})=>({fontFamily:t.typography.fontFamily,fontSize:"inherit"})),ZW=Pe("legend",{shouldForwardProp:t=>Sa(t)&&t!=="notched"})(({theme:t})=>({float:"unset",width:"auto",overflow:"hidden",variants:[{props:{inputHasLabel:!1},style:{padding:0,lineHeight:"11px",transition:t.transitions.create("width",{duration:150,easing:t.transitions.easing.easeOut})}},{props:{inputHasLabel:!0},style:{display:"block",padding:0,height:11,fontSize:"0.75em",visibility:"hidden",maxWidth:.01,transition:t.transitions.create("max-width",{duration:50,easing:t.transitions.easing.easeOut}),whiteSpace:"nowrap","& > span":{paddingLeft:5,paddingRight:5,display:"inline-block",opacity:0,visibility:"visible"}}},{props:{inputHasLabel:!0,notched:!0},style:{maxWidth:"100%",transition:t.transitions.create("max-width",{duration:100,easing:t.transitions.easing.easeOut,delay:50})}}]}));function JW(t){const{className:e,label:n,notched:r}=t,i=Be(t,KW),a=ey();return v.jsx(QW,H({"aria-hidden":!0,className:e},i,{ownerState:a,children:v.jsx(ZW,{ownerState:a,notched:r,children:n?v.jsx(gD,{children:n}):v.jsx(gD,{className:"notranslate",children:"​"})})}))}const eY=["label","autoFocus","ownerState","classes","notched"],tY=Pe(ty,{name:"MuiPickersOutlinedInput",slot:"Root"})(({theme:t})=>{const e=t.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{padding:"0 14px",borderRadius:(t.vars||t).shape.borderRadius,[`&:hover .${Pa.notchedOutline}`]:{borderColor:(t.vars||t).palette.text.primary},"@media (hover: none)":{[`&:hover .${Pa.notchedOutline}`]:{borderColor:t.vars?`rgba(${t.vars.palette.common.onBackgroundChannel} / 0.23)`:e}},[`&.${Pa.focused} .${Pa.notchedOutline}`]:{borderStyle:"solid",borderWidth:2},[`&.${Pa.disabled}`]:{[`& .${Pa.notchedOutline}`]:{borderColor:(t.vars||t).palette.action.disabled},"*":{color:(t.vars||t).palette.action.disabled}},[`&.${Pa.error} .${Pa.notchedOutline}`]:{borderColor:(t.vars||t).palette.error.main},variants:Object.keys((t.vars??t).palette).filter(n=>{var r;return((r=(t.vars??t).palette[n])==null?void 0:r.main)??!1}).map(n=>({props:{inputColor:n},style:{[`&.${Pa.focused}:not(.${Pa.error}) .${Pa.notchedOutline}`]:{borderColor:(t.vars||t).palette[n].main}}}))}}),nY=Pe(mb,{name:"MuiPickersOutlinedInput",slot:"SectionsContainer"})({padding:"16.5px 0",variants:[{props:{inputSize:"small"},style:{padding:"8.5px 0"}}]}),rY=t=>{const n=vt({root:["root"],notchedOutline:["notchedOutline"],input:["input"]},XW,t);return H({},t,n)},N4=M.forwardRef(function(e,n){const r=wt({props:e,name:"MuiPickersOutlinedInput"}),{label:i,classes:a,notched:s}=r,o=Be(r,eY),c=J3(),d=rY(a);return v.jsx(yb,H({slots:{root:tY,input:nY},renderSuffix:f=>v.jsx(JW,{shrink:!!(s||f.adornedStart||f.focused||f.filled),notched:!!(s||f.adornedStart||f.focused||f.filled),className:d.notchedOutline,label:i!=null&&i!==""&&(c!=null&&c.required)?v.jsxs(M.Fragment,{children:[i," ","*"]}):i})},o,{label:i,classes:d,ref:n}))});N4.muiName="Input";function iY(t){return Rt("MuiPickersFilledInput",t)}const Ac=H({},Rd,Ot("MuiPickersFilledInput",["root","underline","input"])),aY=["label","autoFocus","disableUnderline","hiddenLabel","classes"],sY=Pe(ty,{name:"MuiPickersFilledInput",slot:"Root",shouldForwardProp:t=>Sa(t)&&t!=="disableUnderline"})(({theme:t})=>{const e=t.palette.mode==="light",n=e?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)",r=e?"rgba(0, 0, 0, 0.06)":"rgba(255, 255, 255, 0.09)",i=e?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.13)",a=e?"rgba(0, 0, 0, 0.12)":"rgba(255, 255, 255, 0.12)";return{backgroundColor:t.vars?t.vars.palette.FilledInput.bg:r,borderTopLeftRadius:(t.vars||t).shape.borderRadius,borderTopRightRadius:(t.vars||t).shape.borderRadius,transition:t.transitions.create("background-color",{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut}),"&:hover":{backgroundColor:t.vars?t.vars.palette.FilledInput.hoverBg:i,"@media (hover: none)":{backgroundColor:t.vars?t.vars.palette.FilledInput.bg:r}},[`&.${Ac.focused}`]:{backgroundColor:t.vars?t.vars.palette.FilledInput.bg:r},[`&.${Ac.disabled}`]:{backgroundColor:t.vars?t.vars.palette.FilledInput.disabledBg:a},variants:[...Object.keys((t.vars??t).palette).filter(s=>(t.vars??t).palette[s].main).map(s=>{var o;return{props:{inputColor:s,disableUnderline:!1},style:{"&::after":{borderBottom:`2px solid ${(o=(t.vars||t).palette[s])==null?void 0:o.main}`}}}}),{props:{disableUnderline:!1},style:{"&::after":{left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:t.transitions.create("transform",{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${Ac.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${Ac.error}`]:{"&:before, &:after":{borderBottomColor:(t.vars||t).palette.error.main}},"&::before":{borderBottom:`1px solid ${t.vars?`rgba(${t.vars.palette.common.onBackgroundChannel} / ${t.vars.opacity.inputUnderline})`:n}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:t.transitions.create("border-bottom-color",{duration:t.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${Ac.disabled}, .${Ac.error}):before`]:{borderBottom:`1px solid ${(t.vars||t).palette.text.primary}`},[`&.${Ac.disabled}:before`]:{borderBottomStyle:"dotted"}}},{props:{hasStartAdornment:!0},style:{paddingLeft:12}},{props:{hasEndAdornment:!0},style:{paddingRight:12}}]}}),oY=Pe(mb,{name:"MuiPickersFilledInput",slot:"sectionsContainer",shouldForwardProp:t=>Sa(t)&&t!=="hiddenLabel"})({paddingTop:25,paddingRight:12,paddingBottom:8,paddingLeft:12,variants:[{props:{inputSize:"small"},style:{paddingTop:21,paddingBottom:4}},{props:{hasStartAdornment:!0},style:{paddingLeft:0}},{props:{hasEndAdornment:!0},style:{paddingRight:0}},{props:{hiddenLabel:!0},style:{paddingTop:16,paddingBottom:17}},{props:{hiddenLabel:!0,inputSize:"small"},style:{paddingTop:8,paddingBottom:9}}]}),lY=(t,e)=>{const{inputHasUnderline:n}=e,i=vt({root:["root",n&&"underline"],input:["input"]},iY,t);return H({},t,i)},L4=M.forwardRef(function(e,n){const r=wt({props:e,name:"MuiPickersFilledInput"}),{label:i,disableUnderline:a=!1,hiddenLabel:s=!1,classes:o}=r,c=Be(r,aY),d=ey(),f=H({},d,{inputHasUnderline:!a}),p=lY(o,f);return v.jsx(yb,H({slots:{root:sY,input:oY},slotProps:{root:{disableUnderline:a},input:{hiddenLabel:s}}},c,{label:i,classes:p,ref:n,ownerState:f}))});L4.muiName="Input";function cY(t){return Rt("MuiPickersFilledInput",t)}const Sh=H({},Rd,Ot("MuiPickersInput",["root","underline","input"])),uY=["label","autoFocus","disableUnderline","ownerState","classes"],dY=Pe(ty,{name:"MuiPickersInput",slot:"Root",shouldForwardProp:t=>Sa(t)&&t!=="disableUnderline"})(({theme:t})=>{let n=t.palette.mode==="light"?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return t.vars&&(n=`rgba(${t.vars.palette.common.onBackgroundChannel} / ${t.vars.opacity.inputUnderline})`),{"label + &":{marginTop:16},variants:[...Object.keys((t.vars??t).palette).filter(r=>(t.vars??t).palette[r].main).map(r=>({props:{inputColor:r,inputHasUnderline:!0},style:{"&::after":{borderBottom:`2px solid ${(t.vars||t).palette[r].main}`}}})),{props:{inputHasUnderline:!0},style:{"&::after":{background:"red",left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:t.transitions.create("transform",{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${Sh.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${Sh.error}`]:{"&:before, &:after":{borderBottomColor:(t.vars||t).palette.error.main}},"&::before":{borderBottom:`1px solid ${n}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:t.transitions.create("border-bottom-color",{duration:t.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${Sh.disabled}, .${Sh.error}):before`]:{borderBottom:`2px solid ${(t.vars||t).palette.text.primary}`,"@media (hover: none)":{borderBottom:`1px solid ${n}`}},[`&.${Sh.disabled}:before`]:{borderBottomStyle:"dotted"}}}]}}),fY=(t,e)=>{const{inputHasUnderline:n}=e,i=vt({root:["root",!n&&"underline"],input:["input"]},cY,t);return H({},t,i)},B4=M.forwardRef(function(e,n){const r=wt({props:e,name:"MuiPickersInput"}),{label:i,disableUnderline:a=!1,classes:s}=r,o=Be(r,uY),c=ey(),d=H({},c,{inputHasUnderline:!a}),f=fY(s,d);return v.jsx(yb,H({slots:{root:dY},slotProps:{root:{disableUnderline:a}}},o,{ownerState:d,label:i,classes:f,ref:n}))});B4.muiName="Input";const hY=["onFocus","onBlur","className","classes","color","disabled","error","variant","required","hiddenLabel","InputProps","inputProps","inputRef","sectionListRef","elements","areAllSectionsEmpty","onClick","onKeyDown","onKeyUp","onPaste","onInput","endAdornment","startAdornment","tabIndex","contentEditable","focused","value","onChange","fullWidth","id","name","helperText","FormHelperTextProps","label","InputLabelProps","data-active-range-position"],pY={standard:B4,filled:L4,outlined:N4},gY=Pe(Si,{name:"MuiPickersTextField",slot:"Root"})({maxWidth:"100%"}),mY=(t,e)=>{const{isFieldFocused:n,isFieldDisabled:r,isFieldRequired:i}=e;return vt({root:["root",n&&!r&&"focused",r&&"disabled",i&&"required"]},PW,t)},F4=M.forwardRef(function(e,n){const r=wt({props:e,name:"MuiPickersTextField"}),{onFocus:i,onBlur:a,className:s,classes:o,color:c="primary",disabled:d=!1,error:f=!1,variant:p="outlined",required:g=!1,hiddenLabel:y=!1,InputProps:x,inputProps:_,inputRef:A,sectionListRef:E,elements:T,areAllSectionsEmpty:C,onClick:D,onKeyDown:k,onKeyUp:B,onPaste:O,onInput:I,endAdornment:R,startAdornment:V,tabIndex:L,contentEditable:P,focused:F,value:q,onChange:X,fullWidth:W,id:G,name:Q,helperText:Z,FormHelperTextProps:de,label:ge,InputLabelProps:xe,"data-active-range-position":be}=r,ke=Be(r,hY),he=M.useRef(null),Se=ti(n,he),Ae=I0(G),Fe=Z&&Ae?`${Ae}-helper-text`:void 0,ae=ge&&Ae?`${Ae}-label`:void 0,ye=gb({disabled:r.disabled,required:r.required,readOnly:x==null?void 0:x.readOnly}),pe=M.useMemo(()=>H({},ye,{isFieldValueEmpty:C,isFieldFocused:F??!1,hasFieldError:f??!1,inputSize:r.size??"medium",inputColor:c??"primary",isInputInFullWidth:W??!1,hasStartAdornment:!!(V??(x==null?void 0:x.startAdornment)),hasEndAdornment:!!(R??(x==null?void 0:x.endAdornment)),inputHasLabel:!!ge,isLabelShrunk:!!(xe!=null&&xe.shrink)}),[ye,C,F,f,r.size,c,W,V,R,x==null?void 0:x.startAdornment,x==null?void 0:x.endAdornment,ge,xe==null?void 0:xe.shrink]),ie=mY(o,pe),Ve=pY[p],we={};return p==="outlined"?(xe&&typeof xe.shrink<"u"&&(we.notched=xe.shrink),we.label=ge):p==="filled"&&(we.hiddenLabel=y),v.jsx(k4.Provider,{value:pe,children:v.jsxs(gY,H({className:jt(ie.root,s),ref:Se,focused:F,disabled:d,variant:p,error:f,color:c,fullWidth:W,required:g,ownerState:pe},ke,{children:[ge!=null&&ge!==""&&v.jsx(xa,H({htmlFor:Ae,id:ae},xe,{children:ge})),v.jsx(Ve,H({elements:T,areAllSectionsEmpty:C,onClick:D,onKeyDown:k,onKeyUp:B,onInput:I,onPaste:O,onFocus:i,onBlur:a,endAdornment:R,startAdornment:V,tabIndex:L,contentEditable:P,value:q,onChange:X,id:Ae,fullWidth:W,inputProps:_,inputRef:A,sectionListRef:E,label:ge,name:Q,role:"group","aria-labelledby":ae,"aria-describedby":Fe,"aria-live":Fe?"polite":void 0,"data-active-range-position":be},we,x)),Z&&v.jsx(CN,H({id:Fe},de,{children:Z}))]}))})}),yY=["enableAccessibleFieldDOMStructure"],vY=["InputProps","readOnly","onClear","clearable","clearButtonPosition","openPickerButtonPosition","openPickerAriaLabel"],xY=["onPaste","onKeyDown","inputMode","readOnly","InputProps","inputProps","inputRef","onClear","clearable","clearButtonPosition","openPickerButtonPosition","openPickerAriaLabel"],wY=["ownerState"],_Y=["ownerState"],bY=["ownerState"],AY=["ownerState"],EY=["InputProps","inputProps"],Yx=()=>{},SY=t=>{var T,C,D,k,B,O,I,R,V;let{enableAccessibleFieldDOMStructure:e}=t,n=Be(t,yY);if(e){const{InputProps:L,readOnly:P,onClear:F,clearable:q,clearButtonPosition:X,openPickerButtonPosition:W,openPickerAriaLabel:G}=n,Q=Be(n,vY),Z=Dc>=6&&((T=Q==null?void 0:Q.slotProps)!=null&&T.input)?r0((C=Q==null?void 0:Q.slotProps)==null?void 0:C.input,L):Yx;return{clearable:q,onClear:F,clearButtonPosition:X,openPickerButtonPosition:W,openPickerAriaLabel:G,textFieldProps:H({},Q,Dc>=6&&((D=Q==null?void 0:Q.slotProps)!=null&&D.input)?{slotProps:H({},Q==null?void 0:Q.slotProps,{input:de=>H({},fo(Z,de),{readOnly:P})})}:{InputProps:H({},L??{},{readOnly:P})})}}const{onPaste:r,onKeyDown:i,inputMode:a,readOnly:s,InputProps:o,inputProps:c,inputRef:d,onClear:f,clearable:p,clearButtonPosition:g,openPickerButtonPosition:y,openPickerAriaLabel:x}=n,_=Be(n,xY),A=Dc>=6&&((k=_==null?void 0:_.slotProps)!=null&&k.input)?r0((B=_==null?void 0:_.slotProps)==null?void 0:B.input,o):Yx,E=Dc>=6&&((O=_==null?void 0:_.slotProps)!=null&&O.htmlInput)?r0((I=_==null?void 0:_.slotProps)==null?void 0:I.htmlInput,c):Yx;return{clearable:p,onClear:f,clearButtonPosition:g,openPickerButtonPosition:y,openPickerAriaLabel:x,textFieldProps:H({},_,Dc>=6&&((R=_==null?void 0:_.slotProps)!=null&&R.input||(V=_==null?void 0:_.slotProps)!=null&&V.htmlInput)?{slotProps:H({},_==null?void 0:_.slotProps,{input:L=>H({},fo(A,L),{readOnly:s}),htmlInput:L=>H({},fo(E,L),{inputMode:a,onPaste:r,onKeyDown:i,ref:d})})}:{InputProps:H({},o??{},{readOnly:s}),inputProps:H({},c??{},{inputMode:a,onPaste:r,onKeyDown:i,ref:d})})}},vb=M.createContext({slots:{},slotProps:{},inputRef:void 0});function TY(t){var de,ge,xe;const{fieldResponse:e,defaultOpenPickerIcon:n}=t,r=Xa(),i=ub(),a=M.useContext(vb),{textFieldProps:s,onClear:o,clearable:c,openPickerAriaLabel:d,clearButtonPosition:f="end",openPickerButtonPosition:p="end"}=SY(e),g=gb(s),y=Ue(be=>{be.preventDefault(),i==null||i.setOpen(ke=>!ke)}),x=i?i.triggerStatus:"hidden",_=c?f:null,A=x!=="hidden"?p:null,E=a.slots.textField??(e.enableAccessibleFieldDOMStructure===!1?xt:F4),T=a.slots.inputAdornment??IN,C=St({elementType:T,externalSlotProps:a.slotProps.inputAdornment,additionalProps:{position:"start"},ownerState:H({},g,{position:"start"})}),D=Be(C,wY),k=St({elementType:T,externalSlotProps:a.slotProps.inputAdornment,additionalProps:{position:"end"},ownerState:H({},g,{position:"end"})}),B=Be(k,_Y),O=a.slots.openPickerButton??jr,I=St({elementType:O,externalSlotProps:a.slotProps.openPickerButton,additionalProps:{disabled:x==="disabled",onClick:y,"aria-label":d,edge:s.variant!=="standard"?A:!1},ownerState:g}),R=Be(I,bY),V=a.slots.openPickerIcon??n,L=St({elementType:V,externalSlotProps:a.slotProps.openPickerIcon,ownerState:g}),P=a.slots.clearButton??jr,F=St({elementType:P,externalSlotProps:a.slotProps.clearButton,className:"clearButton",additionalProps:{title:r.fieldClearLabel,tabIndex:-1,onClick:o,disabled:e.disabled||e.readOnly,edge:s.variant!=="standard"&&_!==A?_:!1},ownerState:g}),q=Be(F,AY),X=a.slots.clearIcon??_G,W=St({elementType:X,externalSlotProps:a.slotProps.clearIcon,additionalProps:{fontSize:"small"},ownerState:g});s.ref=ti(s.ref,i==null?void 0:i.rootRef);const G={},Q=fo((Dc>=6&&((de=s==null?void 0:s.slotProps)==null?void 0:de.input))??s.InputProps,g);i&&(G.ref=i.triggerRef),!(Q!=null&&Q.startAdornment)&&(_==="start"||A==="start")&&(G.startAdornment=v.jsxs(T,H({},D,{children:[A==="start"&&v.jsx(O,H({},R,{children:v.jsx(V,H({},L))})),_==="start"&&v.jsx(P,H({},q,{children:v.jsx(X,H({},W))}))]}))),!(Q!=null&&Q.endAdornment)&&(_==="end"||A==="end")&&(G.endAdornment=v.jsxs(T,H({},B,{children:[_==="end"&&v.jsx(P,H({},q,{children:v.jsx(X,H({},W))})),A==="end"&&v.jsx(O,H({},R,{children:v.jsx(V,H({},L))}))]}))),!(G!=null&&G.endAdornment)&&!(G!=null&&G.startAdornment)&&a.slots.inputAdornment&&(G.endAdornment=v.jsx(T,H({},B))),_!=null&&(s.sx=[{"& .clearButton":{opacity:1},"@media (pointer: fine)":{"& .clearButton":{opacity:0},"&:hover, &:focus-within":{".clearButton":{opacity:1}}}},...Array.isArray(s.sx)?s.sx:[s.sx]]);const Z=Dc>=6&&((ge=s==null?void 0:s.slotProps)!=null&&ge.input)?fo(r0(Q,G),g):H({},Q,G);return(xe=s==null?void 0:s.slotProps)==null||delete xe.input,e.enableAccessibleFieldDOMStructure&&(s==null||delete s.slotProps),v.jsx(E,H({},s,{InputProps:Z}))}function r0(t,e){return t?e?n=>H({},fo(e,n),fo(t,n)):t:e}function CY(t){const{ref:e,externalForwardedProps:n,slotProps:r}=t,i=M.useContext(vb),a=ub(),s=gb(n),{InputProps:o,inputProps:c}=n,d=Be(n,EY),f=St({elementType:F4,externalSlotProps:r0(i.slotProps.textField,r==null?void 0:r.textField),externalForwardedProps:d,additionalProps:{ref:e,sx:a==null?void 0:a.rootSx,label:a==null?void 0:a.label,name:a==null?void 0:a.name,className:a==null?void 0:a.rootClassName,inputRef:i.inputRef},ownerState:s});return f.inputProps=H({},c,f.inputProps),f.InputProps=H({},o,f.InputProps),f}function IY(t){const{slots:e={},slotProps:n={},inputRef:r,children:i}=t,a=M.useMemo(()=>({inputRef:r,slots:{openPickerButton:e.openPickerButton,openPickerIcon:e.openPickerIcon,textField:e.textField,inputAdornment:e.inputAdornment,clearIcon:e.clearIcon,clearButton:e.clearButton},slotProps:{openPickerButton:n.openPickerButton,openPickerIcon:n.openPickerIcon,textField:n.textField,inputAdornment:n.inputAdornment,clearIcon:n.clearIcon,clearButton:n.clearButton}}),[r,e.openPickerButton,e.openPickerIcon,e.textField,e.inputAdornment,e.clearIcon,e.clearButton,n.openPickerButton,n.openPickerIcon,n.textField,n.inputAdornment,n.clearIcon,n.clearButton]);return v.jsx(vb.Provider,{value:a,children:i})}const DY=t=>{const e=RW(t);return DW({manager:e,props:t})},RY=["slots","slotProps"],V4=M.forwardRef(function(e,n){const r=wt({props:e,name:"MuiDateTimeField"}),{slots:i,slotProps:a}=r,s=Be(r,RY),o=CY({slotProps:a,ref:n,externalForwardedProps:s}),c=DY(o);return v.jsx(IY,{slots:i,slotProps:a,inputRef:s.inputRef,children:v.jsx(TY,{fieldResponse:c,defaultOpenPickerIcon:vG})})}),j4=({shouldDisableDate:t,shouldDisableMonth:e,shouldDisableYear:n,minDate:r,maxDate:i,disableFuture:a,disablePast:s,timezone:o})=>{const c=Wt();return M.useCallback(d=>fb({adapter:c,value:d,timezone:o,props:{shouldDisableDate:t,shouldDisableMonth:e,shouldDisableYear:n,minDate:r,maxDate:i,disableFuture:a,disablePast:s}})!==null,[c,t,e,n,r,i,a,s,o])},OY=(t,e)=>(n,r)=>{switch(r.type){case"setVisibleDate":return H({},n,{slideDirection:r.direction,currentMonth:r.month,isMonthSwitchingAnimating:!e.isSameMonth(r.month,n.currentMonth)&&!t&&!r.skipAnimation,focusedDay:r.focusedDay});case"changeMonthTimezone":{const i=r.newTimezone;if(e.getTimezone(n.currentMonth)===i)return n;let a=e.setTimezone(n.currentMonth,i);return e.getMonth(a)!==e.getMonth(n.currentMonth)&&(a=e.setMonth(a,e.getMonth(n.currentMonth))),H({},n,{currentMonth:a})}case"finishMonthSwitchingAnimation":return H({},n,{isMonthSwitchingAnimating:!1});default:throw new Error("missing support")}},MY=t=>{const{value:e,referenceDate:n,disableFuture:r,disablePast:i,maxDate:a,minDate:s,onMonthChange:o,onYearChange:c,reduceAnimations:d,shouldDisableDate:f,timezone:p,getCurrentMonthFromVisibleDate:g}=t,y=Wt(),x=M.useRef(OY(!!d,y)).current,_=M.useMemo(()=>Di.getInitialReferenceValue({value:e,adapter:y,timezone:p,props:t,referenceDate:n,granularity:Ba.day}),[n,p]),[A,E]=M.useReducer(x,{isMonthSwitchingAnimating:!1,focusedDay:_,currentMonth:y.startOfMonth(_),slideDirection:"left"}),T=j4({shouldDisableDate:f,minDate:s,maxDate:a,disableFuture:r,disablePast:i,timezone:p});M.useEffect(()=>{E({type:"changeMonthTimezone",newTimezone:y.getTimezone(_)})},[_,y]);const C=Ue(({target:k,reason:B})=>{if(B==="cell-interaction"&&A.focusedDay!=null&&y.isSameDay(k,A.focusedDay))return;const O=B==="cell-interaction";let I,R;if(B==="cell-interaction")I=g(k,A.currentMonth),R=k;else if(I=y.isSameMonth(k,A.currentMonth)?A.currentMonth:y.startOfMonth(k),R=k,T(R)){const P=y.startOfMonth(k),F=y.endOfMonth(k);R=y0({adapter:y,date:R,minDate:y.isBefore(s,P)?P:s,maxDate:y.isAfter(a,F)?F:a,disablePast:i,disableFuture:r,isDateDisabled:T,timezone:p})}const V=!y.isSameMonth(A.currentMonth,I),L=!y.isSameYear(A.currentMonth,I);V&&(o==null||o(I)),L&&(c==null||c(y.startOfYear(I))),E({type:"setVisibleDate",month:I,direction:y.isAfterDay(I,A.currentMonth)?"left":"right",focusedDay:A.focusedDay!=null&&R!=null&&y.isSameDay(R,A.focusedDay)?A.focusedDay:R,skipAnimation:O})}),D=M.useCallback(()=>{E({type:"finishMonthSwitchingAnimation"})},[]);return{referenceDate:_,calendarState:A,setVisibleDate:C,isDateDisabled:T,onMonthSwitchingAnimationEnd:D}},PY=t=>Rt("MuiPickersFadeTransitionGroup",t);Ot("MuiPickersFadeTransitionGroup",["root"]);const kY=["children"],NY=t=>vt({root:["root"]},PY,t),LY=Pe(eR,{name:"MuiPickersFadeTransitionGroup",slot:"Root"})({display:"block",position:"relative"});function U4(t){const e=wt({props:t,name:"MuiPickersFadeTransitionGroup"}),{className:n,reduceAnimations:r,transKey:i,classes:a}=e,{children:s}=e,o=Be(e,kY),c=NY(a),d=Qc();return r?s:v.jsx(LY,{className:jt(c.root,n),ownerState:o,children:v.jsx(w1,{appear:!1,mountOnEnter:!0,unmountOnExit:!0,timeout:{appear:d.transitions.duration.enteringScreen,enter:d.transitions.duration.enteringScreen,exit:0},children:s},i)})}const BY=t=>Rt("MuiPickersSlideTransition",t),ha=Ot("MuiPickersSlideTransition",["root","slideEnter-left","slideEnter-right","slideEnterActive","slideExit","slideExitActiveLeft-left","slideExitActiveLeft-right"]),FY=["children","className","reduceAnimations","slideDirection","transKey","classes"],VY=(t,e)=>{const{slideDirection:n}=e,r={root:["root"],exit:["slideExit"],enterActive:["slideEnterActive"],enter:[`slideEnter-${n}`],exitActive:[`slideExitActiveLeft-${n}`]};return vt(r,BY,t)},jY=Pe(eR,{name:"MuiPickersSlideTransition",slot:"Root",overridesResolver:(t,e)=>[e.root,{[`.${ha["slideEnter-left"]}`]:e["slideEnter-left"]},{[`.${ha["slideEnter-right"]}`]:e["slideEnter-right"]},{[`.${ha.slideEnterActive}`]:e.slideEnterActive},{[`.${ha.slideExit}`]:e.slideExit},{[`.${ha["slideExitActiveLeft-left"]}`]:e["slideExitActiveLeft-left"]},{[`.${ha["slideExitActiveLeft-right"]}`]:e["slideExitActiveLeft-right"]}]})(({theme:t})=>{const e=t.transitions.create("transform",{duration:t.transitions.duration.complex,easing:"cubic-bezier(0.35, 0.8, 0.4, 1)"});return{display:"block",position:"relative",overflowX:"hidden","& > *":{position:"absolute",top:0,right:0,left:0},[`& .${ha["slideEnter-left"]}`]:{willChange:"transform",transform:"translate(100%)",zIndex:1},[`& .${ha["slideEnter-right"]}`]:{willChange:"transform",transform:"translate(-100%)",zIndex:1},[`& .${ha.slideEnterActive}`]:{transform:"translate(0%)",transition:e},[`& .${ha.slideExit}`]:{transform:"translate(0%)"},[`& .${ha["slideExitActiveLeft-left"]}`]:{willChange:"transform",transform:"translate(-100%)",transition:e,zIndex:0},[`& .${ha["slideExitActiveLeft-right"]}`]:{willChange:"transform",transform:"translate(100%)",transition:e,zIndex:0}}});function UY(t){const e=wt({props:t,name:"MuiPickersSlideTransition"}),{children:n,className:r,reduceAnimations:i,slideDirection:a,transKey:s,classes:o}=e,c=Be(e,FY),{ownerState:d}=nr(),f=H({},d,{slideDirection:a}),p=VY(o,f),g=Qc();if(i)return v.jsx("div",{className:jt(p.root,r),children:n});const y={exit:p.exit,enterActive:p.enterActive,enter:p.enter,exitActive:p.exitActive};return v.jsx(jY,{className:jt(p.root,r),childFactory:x=>M.cloneElement(x,{classNames:y}),role:"presentation",ownerState:f,children:v.jsx(DN,H({mountOnEnter:!0,unmountOnExit:!0,timeout:g.transitions.duration.complex,classNames:y},c,{children:n}),s)})}const HY=t=>Rt("MuiDayCalendar",t);Ot("MuiDayCalendar",["root","header","weekDayLabel","loadingContainer","slideTransition","monthContainer","weekContainer","weekNumberLabel","weekNumber"]);const zY=["parentProps","day","focusedDay","selectedDays","isDateDisabled","currentMonthNumber","isViewFocused"],$Y=["ownerState"],GY=t=>vt({root:["root"],header:["header"],weekDayLabel:["weekDayLabel"],loadingContainer:["loadingContainer"],slideTransition:["slideTransition"],monthContainer:["monthContainer"],weekContainer:["weekContainer"],weekNumberLabel:["weekNumberLabel"],weekNumber:["weekNumber"]},HY,t),H4=(x0+Z1*2)*6,WY=Pe("div",{name:"MuiDayCalendar",slot:"Root"})({}),YY=Pe("div",{name:"MuiDayCalendar",slot:"Header"})({display:"flex",justifyContent:"center",alignItems:"center"}),qY=Pe(te,{name:"MuiDayCalendar",slot:"WeekDayLabel"})(({theme:t})=>({width:36,height:40,margin:"0 2px",textAlign:"center",display:"flex",justifyContent:"center",alignItems:"center",color:(t.vars||t).palette.text.secondary})),XY=Pe(te,{name:"MuiDayCalendar",slot:"WeekNumberLabel"})(({theme:t})=>({width:36,height:40,margin:"0 2px",textAlign:"center",display:"flex",justifyContent:"center",alignItems:"center",color:(t.vars||t).palette.text.disabled})),KY=Pe(te,{name:"MuiDayCalendar",slot:"WeekNumber"})(({theme:t})=>H({},t.typography.caption,{width:x0,height:x0,padding:0,margin:`0 ${Z1}px`,color:(t.vars||t).palette.text.disabled,fontSize:"0.75rem",alignItems:"center",justifyContent:"center",display:"inline-flex"})),QY=Pe("div",{name:"MuiDayCalendar",slot:"LoadingContainer"})({display:"flex",justifyContent:"center",alignItems:"center",minHeight:H4}),ZY=Pe(UY,{name:"MuiDayCalendar",slot:"SlideTransition"})({minHeight:H4}),JY=Pe("div",{name:"MuiDayCalendar",slot:"MonthContainer"})({overflow:"hidden"}),eq=Pe("div",{name:"MuiDayCalendar",slot:"WeekContainer"})({margin:`${Z1}px 0`,display:"flex",justifyContent:"center"});function tq(t){let{parentProps:e,day:n,focusedDay:r,selectedDays:i,isDateDisabled:a,currentMonthNumber:s,isViewFocused:o}=t,c=Be(t,zY);const{disabled:d,disableHighlightToday:f,isMonthSwitchingAnimating:p,showDaysOutsideCurrentMonth:g,slots:y,slotProps:x,timezone:_}=e,A=Wt(),E=ff(_),T=r!=null&&A.isSameDay(n,r),C=o&&T,D=i.some(q=>A.isSameDay(q,n)),k=A.isSameDay(n,E),B=M.useMemo(()=>d||a(n),[d,a,n]),O=M.useMemo(()=>A.getMonth(n)!==s,[A,n,s]),I=w4({day:n,selected:D,disabled:B,today:k,outsideCurrentMonth:O,disableMargin:void 0,disableHighlightToday:f,showDaysOutsideCurrentMonth:g}),R=(y==null?void 0:y.day)??mW,V=St({elementType:R,externalSlotProps:x==null?void 0:x.day,additionalProps:H({disableHighlightToday:f,showDaysOutsideCurrentMonth:g,role:"gridcell",isAnimating:p,"data-timestamp":A.toJsDate(n).valueOf()},c),ownerState:H({},I,{day:n,isDayDisabled:B,isDaySelected:D})}),L=Be(V,$Y),P=M.useMemo(()=>{const q=A.startOfMonth(A.setMonth(n,s));return g?A.isSameDay(n,A.startOfWeek(q)):A.isSameDay(n,q)},[s,n,g,A]),F=M.useMemo(()=>{const q=A.endOfMonth(A.setMonth(n,s));return g?A.isSameDay(n,A.endOfWeek(q)):A.isSameDay(n,q)},[s,n,g,A]);return v.jsx(R,H({},L,{day:n,disabled:B,autoFocus:!O&&C,today:k,outsideCurrentMonth:O,isFirstVisibleCell:P,isLastVisibleCell:F,selected:D,tabIndex:T?0:-1,"aria-selected":D,"aria-current":k?"date":void 0}))}function nq(t){const e=wt({props:t,name:"MuiDayCalendar"}),n=Wt(),{onFocusedDayChange:r,className:i,classes:a,currentMonth:s,selectedDays:o,focusedDay:c,loading:d,onSelectedDaysChange:f,onMonthSwitchingAnimationEnd:p,readOnly:g,reduceAnimations:y,renderLoading:x=()=>v.jsx("span",{children:"..."}),slideDirection:_,TransitionProps:A,disablePast:E,disableFuture:T,minDate:C,maxDate:D,shouldDisableDate:k,shouldDisableMonth:B,shouldDisableYear:O,dayOfWeekFormatter:I=pe=>n.format(pe,"weekdayShort").charAt(0).toUpperCase(),hasFocus:R,onFocusedViewChange:V,gridLabelId:L,displayWeekNumber:P,fixedWeekNumber:F,timezone:q}=e,X=ff(q),W=GY(a),G=Ea(),Q=j4({shouldDisableDate:k,shouldDisableMonth:B,shouldDisableYear:O,minDate:C,maxDate:D,disablePast:E,disableFuture:T,timezone:q}),Z=Xa(),de=Ue(pe=>{g||f(pe)}),ge=pe=>{Q(pe)||(r(pe),V==null||V(!0))},xe=Ue((pe,ie)=>{switch(pe.key){case"ArrowUp":ge(n.addDays(ie,-7)),pe.preventDefault();break;case"ArrowDown":ge(n.addDays(ie,7)),pe.preventDefault();break;case"ArrowLeft":{const Ve=n.addDays(ie,G?1:-1),we=n.addMonths(ie,G?1:-1),ze=y0({adapter:n,date:Ve,minDate:G?Ve:n.startOfMonth(we),maxDate:G?n.endOfMonth(we):Ve,isDateDisabled:Q,timezone:q});ge(ze||Ve),pe.preventDefault();break}case"ArrowRight":{const Ve=n.addDays(ie,G?-1:1),we=n.addMonths(ie,G?-1:1),ze=y0({adapter:n,date:Ve,minDate:G?n.startOfMonth(we):Ve,maxDate:G?Ve:n.endOfMonth(we),isDateDisabled:Q,timezone:q});ge(ze||Ve),pe.preventDefault();break}case"Home":ge(n.startOfWeek(ie)),pe.preventDefault();break;case"End":ge(n.endOfWeek(ie)),pe.preventDefault();break;case"PageUp":ge(n.addMonths(ie,1)),pe.preventDefault();break;case"PageDown":ge(n.addMonths(ie,-1)),pe.preventDefault();break}}),be=Ue((pe,ie)=>ge(ie)),ke=Ue((pe,ie)=>{c!=null&&n.isSameDay(c,ie)&&(V==null||V(!1))}),he=n.getMonth(s),Se=n.getYear(s),Ae=M.useMemo(()=>o.filter(pe=>!!pe).map(pe=>n.startOfDay(pe)),[n,o]),Fe=`${Se}-${he}`,ae=M.useMemo(()=>M.createRef(),[Fe]),ye=M.useMemo(()=>{const pe=n.getWeekArray(s);let ie=n.addMonths(s,1);for(;F&&pe.length<F;){const Ve=n.getWeekArray(ie),we=n.isSameDay(pe[pe.length-1][0],Ve[0][0]);Ve.slice(we?1:0).forEach(ze=>{pe.length<F&&pe.push(ze)}),ie=n.addMonths(ie,1)}return pe},[s,F,n]);return v.jsxs(WY,{role:"grid","aria-labelledby":L,className:W.root,children:[v.jsxs(YY,{role:"row",className:W.header,children:[P&&v.jsx(XY,{variant:"caption",role:"columnheader","aria-label":Z.calendarWeekNumberHeaderLabel,className:W.weekNumberLabel,children:Z.calendarWeekNumberHeaderText}),K$(n,X).map((pe,ie)=>v.jsx(qY,{variant:"caption",role:"columnheader","aria-label":n.format(pe,"weekday"),className:W.weekDayLabel,children:I(pe)},ie.toString()))]}),d?v.jsx(QY,{className:W.loadingContainer,children:x()}):v.jsx(ZY,H({transKey:Fe,onExited:p,reduceAnimations:y,slideDirection:_,className:jt(i,W.slideTransition)},A,{nodeRef:ae,children:v.jsx(JY,{ref:ae,role:"rowgroup",className:W.monthContainer,children:ye.map((pe,ie)=>v.jsxs(eq,{role:"row",className:W.weekContainer,"aria-rowindex":ie+1,children:[P&&v.jsx(KY,{className:W.weekNumber,role:"rowheader","aria-label":Z.calendarWeekNumberAriaLabelText(n.getWeekNumber(pe[0])),children:Z.calendarWeekNumberText(n.getWeekNumber(pe[0]))}),pe.map((Ve,we)=>v.jsx(tq,{parentProps:e,day:Ve,selectedDays:Ae,isViewFocused:R,focusedDay:c,onKeyDown:xe,onFocus:be,onBlur:ke,onDaySelect:de,isDateDisabled:Q,currentMonthNumber:he,"aria-colindex":we+1},Ve.toString()))]},`week-${pe[0]}`))})}))]})}function z4(t){return Rt("MuiMonthCalendar",t)}const jg=Ot("MuiMonthCalendar",["root","button","disabled","selected"]),rq=["autoFocus","classes","disabled","selected","value","onClick","onKeyDown","onFocus","onBlur","slots","slotProps"],iq=(t,e)=>{const n={button:["button",e.isMonthDisabled&&"disabled",e.isMonthSelected&&"selected"]};return vt(n,z4,t)},aq=Pe("button",{name:"MuiMonthCalendar",slot:"Button",overridesResolver:(t,e)=>[e.button,{[`&.${jg.disabled}`]:e.disabled},{[`&.${jg.selected}`]:e.selected}]})(({theme:t})=>H({color:"unset",backgroundColor:"transparent",border:0,outline:0},t.typography.subtitle1,{height:36,width:72,borderRadius:18,cursor:"pointer","&:focus":{backgroundColor:t.vars?`rgba(${t.vars.palette.action.activeChannel} / ${t.vars.palette.action.hoverOpacity})`:Rs(t.palette.action.active,t.palette.action.hoverOpacity)},"&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette.action.activeChannel} / ${t.vars.palette.action.hoverOpacity})`:Rs(t.palette.action.active,t.palette.action.hoverOpacity)},"&:disabled":{cursor:"auto",pointerEvents:"none"},[`&.${jg.disabled}`]:{color:(t.vars||t).palette.text.secondary},[`&.${jg.selected}`]:{color:(t.vars||t).palette.primary.contrastText,backgroundColor:(t.vars||t).palette.primary.main,"&:focus, &:hover":{backgroundColor:(t.vars||t).palette.primary.dark}}})),sq=M.memo(function(e){const{autoFocus:n,classes:r,disabled:i,selected:a,value:s,onClick:o,onKeyDown:c,onFocus:d,onBlur:f,slots:p,slotProps:g}=e,y=Be(e,rq),x=M.useRef(null),{ownerState:_}=nr(),A=H({},_,{isMonthDisabled:i,isMonthSelected:a}),E=iq(r,A);Wn(()=>{var D;n&&((D=x.current)==null||D.focus())},[n]);const T=(p==null?void 0:p.monthButton)??aq,C=St({elementType:T,externalSlotProps:g==null?void 0:g.monthButton,externalForwardedProps:y,additionalProps:{disabled:i,ref:x,type:"button",role:"radio","aria-checked":a,onClick:D=>o(D,s),onKeyDown:D=>c(D,s),onFocus:D=>d(D,s),onBlur:D=>f(D,s)},ownerState:A,className:E.button});return v.jsx(T,H({},C))}),oq=["autoFocus","className","currentMonth","classes","value","defaultValue","referenceDate","disabled","disableFuture","disablePast","maxDate","minDate","onChange","shouldDisableMonth","readOnly","disableHighlightToday","onMonthFocus","hasFocus","onFocusedViewChange","monthsPerRow","timezone","gridLabelId","slots","slotProps"],lq=t=>vt({root:["root"]},z4,t);function cq(t,e){const n=wt({props:t,name:e}),r=pb(n);return H({},n,r,{monthsPerRow:n.monthsPerRow??3})}const mD=(t,e,n,r,i)=>!!(t===e&&r&&i.isSameYear(n,r)),uq=Pe("div",{name:"MuiMonthCalendar",slot:"Root",shouldForwardProp:t=>Sa(t)&&t!=="monthsPerRow"})({display:"flex",flexWrap:"wrap",justifyContent:"space-evenly",rowGap:16,padding:"8px 0",width:Wd,boxSizing:"border-box",variants:[{props:{monthsPerRow:3},style:{columnGap:24}},{props:{monthsPerRow:4},style:{columnGap:0}}]}),dq=M.forwardRef(function(e,n){const r=cq(e,"MuiMonthCalendar"),{autoFocus:i,className:a,currentMonth:s,classes:o,value:c,defaultValue:d,referenceDate:f,disabled:p,disableFuture:g,disablePast:y,maxDate:x,minDate:_,onChange:A,shouldDisableMonth:E,readOnly:T,onMonthFocus:C,hasFocus:D,onFocusedViewChange:k,monthsPerRow:B,timezone:O,gridLabelId:I,slots:R,slotProps:V}=r,L=Be(r,oq),{value:P,handleValueChange:F,timezone:q}=iu({name:"MonthCalendar",timezone:O,value:c,defaultValue:d,referenceDate:f,onChange:A,valueManager:Di}),X=ff(q),W=Ea(),G=Wt(),{ownerState:Q}=nr(),Z=M.useMemo(()=>Di.getInitialReferenceValue({value:P,adapter:G,props:r,timezone:q,referenceDate:f,granularity:Ba.month}),[]),de=lq(o),ge=M.useMemo(()=>G.getMonth(X),[G,X]),xe=M.useMemo(()=>P!=null?G.getMonth(P):null,[P,G]),[be,ke]=M.useState(()=>xe||G.getMonth(Z)),[he,Se]=Bd({name:"MonthCalendar",state:"hasFocus",controlled:D,default:i??!1}),Ae=Ue(we=>{Se(we),k&&k(we)}),Fe=M.useCallback(we=>{const ze=G.startOfMonth(y&&G.isAfter(X,_)?X:_),Me=G.startOfMonth(g&&G.isBefore(X,x)?X:x),Re=G.startOfMonth(we);return G.isBefore(Re,ze)||G.isAfter(Re,Me)?!0:E?E(Re):!1},[g,y,x,_,X,E,G]),ae=Ue((we,ze)=>{if(T)return;const Me=P&&s&&!G.isSameYear(P,s)?G.setYear(P,G.getYear(s)):P,Re=G.setMonth(Me??Z,ze);F(Re)}),ye=Ue(we=>{Fe(G.setMonth(P??s??Z,we))||(ke(we),Ae(!0),C&&C(we))});M.useEffect(()=>{ke(we=>xe!==null&&we!==xe?xe:we)},[xe]);const pe=Ue((we,ze)=>{switch(we.key){case"ArrowUp":ye((12+ze-3)%12),we.preventDefault();break;case"ArrowDown":ye((12+ze+3)%12),we.preventDefault();break;case"ArrowLeft":ye((12+ze+(W?1:-1))%12),we.preventDefault();break;case"ArrowRight":ye((12+ze+(W?-1:1))%12),we.preventDefault();break}}),ie=Ue((we,ze)=>{ye(ze)}),Ve=Ue((we,ze)=>{be===ze&&Ae(!1)});return v.jsx(uq,H({ref:n,className:jt(de.root,a),ownerState:Q,role:"radiogroup","aria-labelledby":I,monthsPerRow:B},L,{children:ib(G,s??P??Z).map(we=>{const ze=G.getMonth(we),Me=G.format(we,"monthShort"),Re=G.format(we,"month"),Ye=mD(ze,xe,we,P,G),Ge=p||Fe(we);return v.jsx(sq,{selected:Ye,value:ze,onClick:ae,onKeyDown:pe,autoFocus:he&&ze===be,disabled:Ge,tabIndex:ze===be&&!Ge?0:-1,onFocus:ie,onBlur:Ve,"aria-current":mD(ze,ge,we,X,G)?"date":void 0,"aria-label":Re,slots:R,slotProps:V,classes:o,children:Me},Me)})}))});function $4(t){return Rt("MuiYearCalendar",t)}const Ug=Ot("MuiYearCalendar",["root","button","disabled","selected"]),fq=["autoFocus","classes","disabled","selected","value","onClick","onKeyDown","onFocus","onBlur","slots","slotProps"],hq=(t,e)=>{const n={button:["button",e.isYearDisabled&&"disabled",e.isYearSelected&&"selected"]};return vt(n,$4,t)},pq=Pe("button",{name:"MuiYearCalendar",slot:"Button",overridesResolver:(t,e)=>[e.button,{[`&.${Ug.disabled}`]:e.disabled},{[`&.${Ug.selected}`]:e.selected}]})(({theme:t})=>H({color:"unset",backgroundColor:"transparent",border:0,outline:0},t.typography.subtitle1,{height:36,width:72,borderRadius:18,cursor:"pointer","&:focus":{backgroundColor:t.vars?`rgba(${t.vars.palette.action.activeChannel} / ${t.vars.palette.action.focusOpacity})`:Rs(t.palette.action.active,t.palette.action.focusOpacity)},"&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette.action.activeChannel} / ${t.vars.palette.action.hoverOpacity})`:Rs(t.palette.action.active,t.palette.action.hoverOpacity)},"&:disabled":{cursor:"auto",pointerEvents:"none"},[`&.${Ug.disabled}`]:{color:(t.vars||t).palette.text.secondary},[`&.${Ug.selected}`]:{color:(t.vars||t).palette.primary.contrastText,backgroundColor:(t.vars||t).palette.primary.main,"&:focus, &:hover":{backgroundColor:(t.vars||t).palette.primary.dark}}})),gq=M.memo(function(e){const{autoFocus:n,classes:r,disabled:i,selected:a,value:s,onClick:o,onKeyDown:c,onFocus:d,onBlur:f,slots:p,slotProps:g}=e,y=Be(e,fq),x=M.useRef(null),{ownerState:_}=nr(),A=H({},_,{isYearDisabled:i,isYearSelected:a}),E=hq(r,A);Wn(()=>{var D;n&&((D=x.current)==null||D.focus())},[n]);const T=(p==null?void 0:p.yearButton)??pq,C=St({elementType:T,externalSlotProps:g==null?void 0:g.yearButton,externalForwardedProps:y,additionalProps:{disabled:i,ref:x,type:"button",role:"radio","aria-checked":a,onClick:D=>o(D,s),onKeyDown:D=>c(D,s),onFocus:D=>d(D,s),onBlur:D=>f(D,s)},ownerState:A,className:E.button});return v.jsx(T,H({},C))}),mq=["autoFocus","className","classes","value","defaultValue","referenceDate","disabled","disableFuture","disablePast","maxDate","minDate","onChange","readOnly","shouldDisableYear","disableHighlightToday","onYearFocus","hasFocus","onFocusedViewChange","yearsOrder","yearsPerRow","timezone","gridLabelId","slots","slotProps"],yq=t=>vt({root:["root"]},$4,t);function vq(t,e){const n=wt({props:t,name:e}),r=pb(n);return H({},n,r,{yearsPerRow:n.yearsPerRow??3,yearsOrder:n.yearsOrder??"asc"})}const xq=Pe("div",{name:"MuiYearCalendar",slot:"Root",shouldForwardProp:t=>Sa(t)&&t!=="yearsPerRow"})({display:"flex",flexWrap:"wrap",justifyContent:"space-evenly",rowGap:12,padding:"6px 0",overflowY:"auto",height:"100%",width:Wd,maxHeight:LG,boxSizing:"border-box",position:"relative",variants:[{props:{yearsPerRow:3},style:{columnGap:24}},{props:{yearsPerRow:4},style:{columnGap:0,padding:"0 2px"}}]}),wq=Pe("div",{name:"MuiYearCalendar",slot:"ButtonFiller"})({height:36,width:72}),_q=M.forwardRef(function(e,n){const r=vq(e,"MuiYearCalendar"),{autoFocus:i,className:a,classes:s,value:o,defaultValue:c,referenceDate:d,disabled:f,disableFuture:p,disablePast:g,maxDate:y,minDate:x,onChange:_,readOnly:A,shouldDisableYear:E,onYearFocus:T,hasFocus:C,onFocusedViewChange:D,yearsOrder:k,yearsPerRow:B,timezone:O,gridLabelId:I,slots:R,slotProps:V}=r,L=Be(r,mq),{value:P,handleValueChange:F,timezone:q}=iu({name:"YearCalendar",timezone:O,value:o,defaultValue:c,referenceDate:d,onChange:_,valueManager:Di}),X=ff(q),W=Ea(),G=Wt(),{ownerState:Q}=nr(),Z=M.useMemo(()=>Di.getInitialReferenceValue({value:P,adapter:G,props:r,timezone:q,referenceDate:d,granularity:Ba.year}),[]),de=yq(s),ge=M.useMemo(()=>G.getYear(X),[G,X]),xe=M.useMemo(()=>P!=null?G.getYear(P):null,[P,G]),[be,ke]=M.useState(()=>xe||G.getYear(Z)),[he,Se]=Bd({name:"YearCalendar",state:"hasFocus",controlled:C,default:i??!1}),Ae=Ue(Oe=>{Se(Oe),D&&D(Oe)}),Fe=M.useCallback(Oe=>{if(g&&G.isBeforeYear(Oe,X)||p&&G.isAfterYear(Oe,X)||x&&G.isBeforeYear(Oe,x)||y&&G.isAfterYear(Oe,y))return!0;if(!E)return!1;const Ne=G.startOfYear(Oe);return E(Ne)},[p,g,y,x,X,E,G]),ae=Ue((Oe,Ne)=>{if(A)return;const dt=G.setYear(P??Z,Ne);F(dt)}),ye=Ue(Oe=>{Fe(G.setYear(P??Z,Oe))||(ke(Oe),Ae(!0),T==null||T(Oe))});M.useEffect(()=>{ke(Oe=>xe!==null&&Oe!==xe?xe:Oe)},[xe]);const pe=k!=="desc"?B*1:B*-1,ie=W&&k==="asc"||!W&&k==="desc"?-1:1,Ve=Ue((Oe,Ne)=>{switch(Oe.key){case"ArrowUp":ye(Ne-pe),Oe.preventDefault();break;case"ArrowDown":ye(Ne+pe),Oe.preventDefault();break;case"ArrowLeft":ye(Ne-ie),Oe.preventDefault();break;case"ArrowRight":ye(Ne+ie),Oe.preventDefault();break}}),we=Ue((Oe,Ne)=>{ye(Ne)}),ze=Ue((Oe,Ne)=>{be===Ne&&Ae(!1)}),Me=M.useRef(null),Re=ti(n,Me);M.useEffect(()=>{if(i||Me.current===null)return;const Oe=Me.current.querySelector('[tabindex="0"]');if(!Oe)return;const Ne=Oe.offsetHeight,dt=Oe.offsetTop,_t=Me.current.clientHeight,yn=Me.current.scrollTop,On=dt+Ne;Ne>_t||dt<yn||(Me.current.scrollTop=On-_t/2-Ne/2)},[i]);const Ye=G.getYearRange([x,y]);k==="desc"&&Ye.reverse();let Ge=B-Ye.length%B;return Ge===B&&(Ge=0),v.jsxs(xq,H({ref:Re,className:jt(de.root,a),ownerState:Q,role:"radiogroup","aria-labelledby":I,yearsPerRow:B},L,{children:[Ye.map(Oe=>{const Ne=G.getYear(Oe),dt=Ne===xe,_t=f||Fe(Oe);return v.jsx(gq,{selected:dt,value:Ne,onClick:ae,onKeyDown:Ve,autoFocus:he&&Ne===be,disabled:_t,tabIndex:Ne===be&&!_t?0:-1,onFocus:we,onBlur:ze,"aria-current":ge===Ne?"date":void 0,slots:R,slotProps:V,classes:s,children:G.format(Oe,"year")},G.format(Oe,"year"))}),Array.from({length:Ge},(Oe,Ne)=>v.jsx(wq,{},Ne))]}))}),bq=t=>Rt("MuiPickersCalendarHeader",t),Aq=Ot("MuiPickersCalendarHeader",["root","labelContainer","label","switchViewButton","switchViewIcon"]),Eq=["slots","slotProps","currentMonth","disabled","disableFuture","disablePast","maxDate","minDate","onMonthChange","onViewChange","view","reduceAnimations","views","labelId","className","classes","timezone","format"],Sq=["ownerState"],Tq=t=>vt({root:["root"],labelContainer:["labelContainer"],label:["label"],switchViewButton:["switchViewButton"],switchViewIcon:["switchViewIcon"]},bq,t),Cq=Pe("div",{name:"MuiPickersCalendarHeader",slot:"Root"})({display:"flex",alignItems:"center",marginTop:12,marginBottom:4,paddingLeft:24,paddingRight:12,maxHeight:40,minHeight:40}),Iq=Pe("div",{name:"MuiPickersCalendarHeader",slot:"LabelContainer"})(({theme:t})=>H({display:"flex",overflow:"hidden",alignItems:"center",cursor:"pointer",marginRight:"auto"},t.typography.body1,{fontWeight:t.typography.fontWeightMedium})),Dq=Pe("div",{name:"MuiPickersCalendarHeader",slot:"Label"})({marginRight:6}),Rq=Pe(jr,{name:"MuiPickersCalendarHeader",slot:"SwitchViewButton"})({marginRight:"auto",variants:[{props:{view:"year"},style:{[`.${Aq.switchViewIcon}`]:{transform:"rotate(180deg)"}}}]}),Oq=Pe(gG,{name:"MuiPickersCalendarHeader",slot:"SwitchViewIcon"})(({theme:t})=>({willChange:"transform",transition:t.transitions.create("transform"),transform:"rotate(0deg)"})),Mq=M.forwardRef(function(e,n){const r=Xa(),i=Wt(),a=wt({props:e,name:"MuiPickersCalendarHeader"}),{slots:s,slotProps:o,currentMonth:c,disabled:d,disableFuture:f,disablePast:p,maxDate:g,minDate:y,onMonthChange:x,onViewChange:_,view:A,reduceAnimations:E,views:T,labelId:C,className:D,classes:k,timezone:B,format:O=`${i.formats.month} ${i.formats.year}`}=a,I=Be(a,Eq),{ownerState:R}=nr(),V=Tq(k),L=(s==null?void 0:s.switchViewButton)??Rq,P=St({elementType:L,externalSlotProps:o==null?void 0:o.switchViewButton,additionalProps:{size:"small","aria-label":r.calendarViewSwitchingButtonAriaLabel(A)},ownerState:H({},R,{view:A}),className:V.switchViewButton}),F=(s==null?void 0:s.switchViewIcon)??Oq,q=St({elementType:F,externalSlotProps:o==null?void 0:o.switchViewIcon,ownerState:R,className:V.switchViewIcon}),X=Be(q,Sq),W=()=>x(i.addMonths(c,1)),G=()=>x(i.addMonths(c,-1)),Q=kG(c,{disableFuture:f,maxDate:g,timezone:B}),Z=NG(c,{disablePast:p,minDate:y,timezone:B}),de=()=>{if(!(T.length===1||!_||d))if(T.length===2)_(T.find(xe=>xe!==A)||T[0]);else{const xe=T.indexOf(A)!==0?0:1;_(T[xe])}};if(T.length===1&&T[0]==="year")return null;const ge=i.formatByString(c,O);return v.jsxs(Cq,H({},I,{ownerState:R,className:jt(V.root,D),ref:n,children:[v.jsxs(Iq,{role:"presentation",onClick:de,ownerState:R,"aria-live":"polite",className:V.labelContainer,children:[v.jsx(U4,{reduceAnimations:E,transKey:ge,children:v.jsx(Dq,{id:C,ownerState:R,className:V.label,children:ge})}),T.length>1&&!d&&v.jsx(L,H({},P,{children:v.jsx(F,H({},X))}))]}),v.jsx(w1,{in:A==="day",appear:!E,enter:!E,children:v.jsx(DG,{slots:s,slotProps:o,onGoToPrevious:G,isPreviousDisabled:Z,previousLabel:r.previousMonth,onGoToNext:W,isNextDisabled:Q,nextLabel:r.nextMonth})})]}))}),Pq="@media (prefers-reduced-motion: reduce)",Od=typeof navigator<"u"&&navigator.userAgent.match(/android\s(\d+)|OS\s(\d+)/i),yD=Od&&Od[1]?parseInt(Od[1],10):null,vD=Od&&Od[2]?parseInt(Od[2],10):null,kq=yD&&yD<10||vD&&vD<13||!1;function G4(t){const e=x1(Pq,{defaultMatches:!1});return t??(e||kq)}const Nq=t=>Rt("MuiDateCalendar",t);Ot("MuiDateCalendar",["root","viewTransitionContainer"]);const Lq=["autoFocus","onViewChange","value","defaultValue","referenceDate","disableFuture","disablePast","onChange","onYearChange","onMonthChange","reduceAnimations","shouldDisableDate","shouldDisableMonth","shouldDisableYear","view","views","openTo","className","classes","disabled","readOnly","minDate","maxDate","disableHighlightToday","focusedView","onFocusedViewChange","showDaysOutsideCurrentMonth","fixedWeekNumber","dayOfWeekFormatter","slots","slotProps","loading","renderLoading","displayWeekNumber","yearsOrder","yearsPerRow","monthsPerRow","timezone"],Bq=t=>vt({root:["root"],viewTransitionContainer:["viewTransitionContainer"]},Nq,t);function Fq(t,e){const n=wt({props:t,name:e}),r=G4(n.reduceAnimations),i=pb(n);return H({},n,i,{loading:n.loading??!1,openTo:n.openTo??"day",views:n.views??["year","day"],reduceAnimations:r,renderLoading:n.renderLoading??(()=>v.jsx("span",{children:"..."}))})}const Vq=Pe(db,{name:"MuiDateCalendar",slot:"Root"})({display:"flex",flexDirection:"column",height:Yd}),jq=Pe(U4,{name:"MuiDateCalendar",slot:"ViewTransitionContainer"})({}),Uq=M.forwardRef(function(e,n){const r=Wt(),{ownerState:i}=nr(),a=I0(),s=Fq(e,"MuiDateCalendar"),{autoFocus:o,onViewChange:c,value:d,defaultValue:f,referenceDate:p,disableFuture:g,disablePast:y,onChange:x,onMonthChange:_,reduceAnimations:A,shouldDisableDate:E,shouldDisableMonth:T,shouldDisableYear:C,view:D,views:k,openTo:B,className:O,classes:I,disabled:R,readOnly:V,minDate:L,maxDate:P,disableHighlightToday:F,focusedView:q,onFocusedViewChange:X,showDaysOutsideCurrentMonth:W,fixedWeekNumber:G,dayOfWeekFormatter:Q,slots:Z,slotProps:de,loading:ge,renderLoading:xe,displayWeekNumber:be,yearsOrder:ke,yearsPerRow:he,monthsPerRow:Se,timezone:Ae}=s,Fe=Be(s,Lq),{value:ae,handleValueChange:ye,timezone:pe}=iu({name:"DateCalendar",timezone:Ae,value:d,defaultValue:f,referenceDate:p,onChange:x,valueManager:Di}),{view:ie,setView:Ve,focusedView:we,setFocusedView:ze,goToNextView:Me,setValueAndGoToNextView:Re}=Q1({view:D,views:k,openTo:B,onChange:ye,onViewChange:c,autoFocus:o,focusedView:q,onFocusedViewChange:X}),{referenceDate:Ye,calendarState:Ge,setVisibleDate:Oe,isDateDisabled:Ne,onMonthSwitchingAnimationEnd:dt}=MY({value:ae,referenceDate:p,reduceAnimations:A,onMonthChange:_,minDate:L,maxDate:P,shouldDisableDate:E,disablePast:y,disableFuture:g,timezone:pe,getCurrentMonthFromVisibleDate:(gt,Fn)=>r.isSameMonth(gt,Fn)?Fn:r.startOfMonth(gt)}),_t=R&&ae||L,yn=R&&ae||P,On=`${a}-grid-label`,nt=we!==null,it=(Z==null?void 0:Z.calendarHeader)??Mq,Tn=St({elementType:it,externalSlotProps:de==null?void 0:de.calendarHeader,additionalProps:{views:k,view:ie,currentMonth:Ge.currentMonth,onViewChange:Ve,onMonthChange:gt=>Oe({target:gt,reason:"header-navigation"}),minDate:_t,maxDate:yn,disabled:R,disablePast:y,disableFuture:g,reduceAnimations:A,timezone:pe,labelId:On},ownerState:i}),Qe=Ue(gt=>{const Fn=r.startOfMonth(gt),qn=r.endOfMonth(gt),$r=Ne(gt)?y0({adapter:r,date:gt,minDate:r.isBefore(L,Fn)?Fn:L,maxDate:r.isAfter(P,qn)?qn:P,disablePast:y,disableFuture:g,isDateDisabled:Ne,timezone:pe}):gt;$r?(Re($r,"finish"),Oe({target:$r,reason:"cell-interaction"})):(Me(),Oe({target:Fn,reason:"cell-interaction"}))}),pt=Ue(gt=>{const Fn=r.startOfYear(gt),qn=r.endOfYear(gt),$r=Ne(gt)?y0({adapter:r,date:gt,minDate:r.isBefore(L,Fn)?Fn:L,maxDate:r.isAfter(P,qn)?qn:P,disablePast:y,disableFuture:g,isDateDisabled:Ne,timezone:pe}):gt;$r?(Re($r,"finish"),Oe({target:$r,reason:"cell-interaction"})):(Me(),Oe({target:Fn,reason:"cell-interaction"}))}),kt=Ue(gt=>ye(gt&&Hm(r,gt,ae??Ye),"finish",ie));M.useEffect(()=>{r.isValid(ae)&&Oe({target:ae,reason:"controlled-value-change"})},[ae]);const Jt=Bq(I),An={disablePast:y,disableFuture:g,maxDate:P,minDate:L},Cn={disableHighlightToday:F,readOnly:V,disabled:R,timezone:pe,gridLabelId:On,slots:Z,slotProps:de},Yt=M.useRef(ie);M.useEffect(()=>{Yt.current!==ie&&(we===Yt.current&&ze(ie,!0),Yt.current=ie)},[we,ze,ie]);const zr=M.useMemo(()=>[ae],[ae]);return v.jsxs(Vq,H({ref:n,className:jt(Jt.root,O),ownerState:i},Fe,{children:[v.jsx(it,H({},Tn,{slots:Z,slotProps:de})),v.jsx(jq,{reduceAnimations:A,className:Jt.viewTransitionContainer,transKey:ie,ownerState:i,children:v.jsxs("div",{children:[ie==="year"&&v.jsx(_q,H({},An,Cn,{value:ae,onChange:pt,shouldDisableYear:C,hasFocus:nt,onFocusedViewChange:gt=>ze("year",gt),yearsOrder:ke,yearsPerRow:he,referenceDate:Ye})),ie==="month"&&v.jsx(dq,H({},An,Cn,{currentMonth:Ge.currentMonth,hasFocus:nt,className:O,value:ae,onChange:Qe,shouldDisableMonth:T,onFocusedViewChange:gt=>ze("month",gt),monthsPerRow:Se,referenceDate:Ye})),ie==="day"&&v.jsx(nq,H({},Ge,An,Cn,{onMonthSwitchingAnimationEnd:dt,hasFocus:nt,onFocusedDayChange:gt=>Oe({target:gt,reason:"cell-interaction"}),reduceAnimations:A,selectedDays:zr,onSelectedDaysChange:kt,shouldDisableDate:E,shouldDisableMonth:T,shouldDisableYear:C,onFocusedViewChange:gt=>ze("day",gt),showDaysOutsideCurrentMonth:W,fixedWeekNumber:G,dayOfWeekFormatter:Q,displayWeekNumber:be,loading:ge,renderLoading:xe}))]})})]}))});function W4(t){return Rt("MuiPickersToolbar",t)}const Hq=Ot("MuiPickersToolbar",["root","title","content"]);function Y4(){const{ownerState:t}=nr(),e=Ea();return M.useMemo(()=>H({},t,{toolbarDirection:e?"rtl":"ltr"}),[t,e])}const zq=["children","className","classes","toolbarTitle","hidden","titleId","classes","landscapeDirection"],$q=t=>vt({root:["root"],title:["title"],content:["content"]},W4,t),Gq=Pe("div",{name:"MuiPickersToolbar",slot:"Root"})(({theme:t})=>({display:"flex",flexDirection:"column",alignItems:"flex-start",justifyContent:"space-between",padding:t.spacing(2,3),variants:[{props:{pickerOrientation:"landscape"},style:{height:"auto",maxWidth:160,padding:16,justifyContent:"flex-start",flexWrap:"wrap"}}]})),Wq=Pe("div",{name:"MuiPickersToolbar",slot:"Content",shouldForwardProp:t=>Sa(t)&&t!=="landscapeDirection"})({display:"flex",flexWrap:"wrap",width:"100%",flex:1,justifyContent:"space-between",alignItems:"center",flexDirection:"row",variants:[{props:{pickerOrientation:"landscape"},style:{justifyContent:"flex-start",alignItems:"flex-start",flexDirection:"column"}},{props:{pickerOrientation:"landscape",landscapeDirection:"row"},style:{flexDirection:"row"}}]}),Yq=M.forwardRef(function(e,n){const r=wt({props:e,name:"MuiPickersToolbar"}),{children:i,className:a,classes:s,toolbarTitle:o,hidden:c,titleId:d,landscapeDirection:f}=r,p=Be(r,zq),g=Y4(),y=$q(s);return c?null:v.jsxs(Gq,H({ref:n,className:jt(y.root,a),ownerState:g},p,{children:[v.jsx(te,{color:"text.secondary",variant:"overline",id:d,className:y.title,children:o}),v.jsx(Wq,{className:y.content,ownerState:g,landscapeDirection:f,children:i})]}))});function qq(t){return Rt("MuiPickerPopper",t)}Ot("MuiPickerPopper",["root","paper"]);const Xq=["PaperComponent","ownerState","children","paperSlotProps","paperClasses","onPaperClick","onPaperTouchStart"],Kq=t=>vt({root:["root"],paper:["paper"]},qq,t),Qq=Pe(tR,{name:"MuiPickerPopper",slot:"Root"})(({theme:t})=>({zIndex:t.zIndex.modal})),Zq=Pe(va,{name:"MuiPickerPopper",slot:"Paper"})({outline:0,transformOrigin:"top center",variants:[{props:({popperPlacement:t})=>new Set(["top","top-start","top-end"]).has(t),style:{transformOrigin:"bottom center"}}]});function Jq(t,e){return e.documentElement.clientWidth<t.clientX||e.documentElement.clientHeight<t.clientY}function eX(t,e){const n=M.useRef(!1),r=M.useRef(!1),i=M.useRef(null),a=M.useRef(!1);M.useEffect(()=>{if(!t)return;function c(){a.current=!0}return document.addEventListener("mousedown",c,!0),document.addEventListener("touchstart",c,!0),()=>{document.removeEventListener("mousedown",c,!0),document.removeEventListener("touchstart",c,!0),a.current=!1}},[t]);const s=Ue(c=>{if(!a.current)return;const d=r.current;r.current=!1;const f=Xh(i.current);if(!i.current||"clientX"in c&&Jq(c,f))return;if(n.current){n.current=!1;return}let p;c.composedPath?p=c.composedPath().indexOf(i.current)>-1:p=!f.documentElement.contains(c.target)||i.current.contains(c.target),!p&&!d&&e(c)}),o=c=>{c.defaultMuiPrevented||(r.current=!0)};return M.useEffect(()=>{if(t){const c=Xh(i.current),d=()=>{n.current=!0};return c.addEventListener("touchstart",s),c.addEventListener("touchmove",d),()=>{c.removeEventListener("touchstart",s),c.removeEventListener("touchmove",d)}}},[t,s]),M.useEffect(()=>{if(t){const c=Xh(i.current);return c.addEventListener("click",s),()=>{c.removeEventListener("click",s),r.current=!1}}},[t,s]),[i,o,o]}const tX=M.forwardRef((t,e)=>{const{PaperComponent:n,ownerState:r,children:i,paperSlotProps:a,paperClasses:s,onPaperClick:o,onPaperTouchStart:c}=t,d=Be(t,Xq),f=St({elementType:n,externalSlotProps:a,additionalProps:{tabIndex:-1,elevation:8,ref:e},className:s,ownerState:r});return v.jsx(n,H({},d,f,{onClick:p=>{var g;o(p),(g=f.onClick)==null||g.call(f,p)},onTouchStart:p=>{var g;c(p),(g=f.onTouchStart)==null||g.call(f,p)},ownerState:r,children:i}))});function nX(t){const e=wt({props:t,name:"MuiPickerPopper"}),{children:n,placement:r="bottom-start",slots:i,slotProps:a,classes:s}=e,{open:o,popupRef:c,reduceAnimations:d}=jl(),{ownerState:f,rootRefObject:p}=nr(),{dismissViews:g,getCurrentViewMode:y,onPopperExited:x,triggerElement:_,viewContainerRole:A}=nr();M.useEffect(()=>{function G(Q){o&&Q.key==="Escape"&&g()}return document.addEventListener("keydown",G),()=>{document.removeEventListener("keydown",G)}},[g,o]);const E=M.useRef(null);M.useEffect(()=>{A==="tooltip"||y()==="field"||(o?E.current=di(p.current):E.current&&E.current instanceof HTMLElement&&setTimeout(()=>{E.current instanceof HTMLElement&&E.current.focus()}))},[o,A,y,p]);const T=Kq(s),C=Ue(()=>{A==="tooltip"?zG(()=>{var G,Q;(G=p.current)!=null&&G.contains(di(p.current))||(Q=c.current)!=null&&Q.contains(di(c.current))||g()}):g()}),[D,k,B]=eX(o,C),O=M.useRef(null),I=ti(O,c),R=ti(I,D),V=G=>{G.key==="Escape"&&(G.stopPropagation(),g())},L=(i==null?void 0:i.desktopTransition)??d?w1:RN,P=(i==null?void 0:i.desktopTrapFocus)??ON,F=(i==null?void 0:i.desktopPaper)??Zq,q=(i==null?void 0:i.popper)??Qq,X=St({elementType:q,externalSlotProps:a==null?void 0:a.popper,additionalProps:{transition:!0,role:A??void 0,open:o,placement:r,anchorEl:_,onKeyDown:V},className:T.root,ownerState:f}),W=M.useMemo(()=>H({},f,{popperPlacement:X.placement}),[f,X.placement]);return v.jsx(q,H({},X,{children:({TransitionProps:G})=>v.jsx(P,H({open:o,disableAutoFocus:!0,disableRestoreFocus:!0,disableEnforceFocus:A==="tooltip",isEnabled:()=>!0},a==null?void 0:a.desktopTrapFocus,{children:v.jsx(L,H({},G,a==null?void 0:a.desktopTransition,{onExited:Q=>{var Z,de,ge;x==null||x(),(de=(Z=a==null?void 0:a.desktopTransition)==null?void 0:Z.onExited)==null||de.call(Z,Q),(ge=G==null?void 0:G.onExited)==null||ge.call(G)},children:v.jsx(tX,{PaperComponent:F,ownerState:W,ref:R,onPaperClick:k,onPaperTouchStart:B,paperClasses:T.paper,paperSlotProps:a==null?void 0:a.desktopPaper,children:n})}))}))}))}function xD(){return typeof window>"u"?"portrait":window.screen&&window.screen.orientation&&window.screen.orientation.angle?Math.abs(window.screen.orientation.angle)===90?"landscape":"portrait":window.orientation&&Math.abs(Number(window.orientation))===90?"landscape":"portrait"}function rX(t,e){const[n,r]=M.useState(xD);return Wn(()=>{const i=()=>{r(xD())};return window.addEventListener("orientationchange",i),()=>{window.removeEventListener("orientationchange",i)}},[]),HG(t,["hours","minutes","seconds"])?"portrait":e??n}function iX(t){const{props:e,valueManager:n,validator:r}=t,{value:i,defaultValue:a,onChange:s,referenceDate:o,timezone:c,onAccept:d,closeOnSelect:f,open:p,onOpen:g,onClose:y}=e,{current:x}=M.useRef(a),{current:_}=M.useRef(i!==void 0),{current:A}=M.useRef(p!==void 0),E=Wt(),{timezone:T,value:C,handleValueChange:D}=iu({name:"a picker component",timezone:c,value:i,defaultValue:x,referenceDate:o,onChange:s,valueManager:n}),[k,B]=M.useState(()=>({open:!1,lastExternalValue:C,clockShallowValue:void 0,lastCommittedValue:C,hasBeenModifiedSinceMount:!1})),{getValidationErrorForNewValue:O}=S4({props:e,validator:r,timezone:T,value:C,onError:e.onError}),I=Ue(P=>{const F=typeof P=="function"?P(k.open):P;A||B(q=>H({},q,{open:F})),F&&g&&g(),F||y==null||y()}),R=Ue((P,F)=>{const{changeImportance:q="accept",skipPublicationIfPristine:X=!1,validationError:W,shortcut:G,shouldClose:Q=q==="accept"}=F??{};let Z,de;!X&&!_&&!k.hasBeenModifiedSinceMount?(Z=!0,de=q==="accept"):(Z=!n.areValuesEqual(E,P,C),de=q==="accept"&&!n.areValuesEqual(E,P,k.lastCommittedValue)),B(be=>H({},be,{clockShallowValue:Z?void 0:be.clockShallowValue,lastCommittedValue:de?P:be.lastCommittedValue,hasBeenModifiedSinceMount:!0}));let ge=null;const xe=()=>(ge||(ge={validationError:W??O(P)},G&&(ge.shortcut=G)),ge);Z&&D(P,xe()),de&&d&&d(P,xe()),Q&&I(!1)});C!==k.lastExternalValue&&B(P=>H({},P,{lastExternalValue:C,clockShallowValue:void 0,hasBeenModifiedSinceMount:!0}));const V=Ue((P,F="partial")=>{if(F==="shallow"){B(q=>H({},q,{clockShallowValue:P,hasBeenModifiedSinceMount:!0}));return}R(P,{changeImportance:F==="finish"&&f?"accept":"set"})});M.useEffect(()=>{if(A){if(p===void 0)throw new Error("You must not mix controlling and uncontrolled mode for `open` prop");B(P=>H({},P,{open:p}))}},[A,p]);const L=M.useMemo(()=>n.cleanValue(E,k.clockShallowValue===void 0?C:k.clockShallowValue),[E,n,k.clockShallowValue,C]);return{timezone:T,state:k,setValue:R,setValueFromView:V,setOpen:I,value:C,viewValue:L}}const aX=["className","sx"],q4=({ref:t,props:e,valueManager:n,valueType:r,variant:i,validator:a,onPopperExited:s,autoFocusView:o,rendererInterceptor:c,localeText:d,viewContainerRole:f,getStepNavigation:p})=>{const{views:g,view:y,openTo:x,onViewChange:_,viewRenderers:A,reduceAnimations:E,orientation:T,disableOpenPicker:C,closeOnSelect:D,disabled:k,readOnly:B,formatDensity:O,enableAccessibleFieldDOMStructure:I,selectedSections:R,onSelectedSectionsChange:V,format:L,label:P,autoFocus:F,name:q}=e,{className:X,sx:W}=e,G=Be(e,aX),Q=I0(),Z=Wt(),de=G4(E),ge=rX(g,T),{current:xe}=M.useRef(x??null),[be,ke]=M.useState(null),he=M.useRef(null),Se=M.useRef(null),Ae=M.useRef(null),Fe=ti(t,Ae),{timezone:ae,state:ye,setOpen:pe,setValue:ie,setValueFromView:Ve,value:we,viewValue:ze}=iX({props:e,valueManager:n,validator:a}),{view:Me,setView:Re,defaultView:Ye,focusedView:Ge,setFocusedView:Oe,setValueAndGoToNextView:Ne,goToNextStep:dt,hasNextStep:_t,hasSeveralSteps:yn}=Q1({view:y,views:g,openTo:x,onChange:Ve,onViewChange:_,autoFocus:o,getStepNavigation:p}),On=Ue(()=>ie(n.emptyValue)),nt=Ue(()=>ie(n.getTodayValue(Z,ae,r))),it=Ue(()=>ie(we)),Tn=Ue(()=>ie(ye.lastCommittedValue,{skipPublicationIfPristine:!0})),Qe=Ue(()=>{ie(we,{skipPublicationIfPristine:!0})}),{hasUIView:pt,viewModeLookup:kt,timeViewsCount:Jt}=M.useMemo(()=>g.reduce((vn,ar)=>{const $l=A[ar]==null?"field":"UI";return vn.viewModeLookup[ar]=$l,$l==="UI"&&(vn.hasUIView=!0,v0(ar)&&(vn.timeViewsCount+=1)),vn},{hasUIView:!1,viewModeLookup:{},timeViewsCount:0}),[A,g]),An=kt[Me],Cn=Ue(()=>An),[Yt,zr]=M.useState(An==="UI"?Me:null);Yt!==Me&&kt[Me]==="UI"&&zr(Me),Wn(()=>{An==="field"&&ye.open&&(pe(!1),setTimeout(()=>{var vn,ar;(vn=Se==null?void 0:Se.current)==null||vn.setSelectedSections(Me),(ar=Se==null?void 0:Se.current)==null||ar.focusField(Me)}))},[Me]),Wn(()=>{if(!ye.open)return;let vn=Me;An==="field"&&Yt!=null&&(vn=Yt),vn!==Ye&&kt[vn]==="UI"&&kt[Ye]==="UI"&&(vn=Ye),vn!==Me&&Re(vn),Oe(vn,!0)},[ye.open]);const gt=M.useMemo(()=>({isPickerValueEmpty:n.areValuesEqual(Z,we,n.emptyValue),isPickerOpen:ye.open,isPickerDisabled:e.disabled??!1,isPickerReadOnly:e.readOnly??!1,pickerOrientation:ge,pickerVariant:i}),[Z,n,we,ye.open,ge,i,e.disabled,e.readOnly]),Fn=M.useMemo(()=>C||!pt?"hidden":k||B?"disabled":"enabled",[C,pt,k,B]),qn=Ue(dt),$r=M.useMemo(()=>D&&!yn?[]:["cancel","nextOrAccept"],[D,yn]),mi=M.useMemo(()=>({setValue:ie,setOpen:pe,clearValue:On,setValueToToday:nt,acceptValueChanges:it,cancelValueChanges:Tn,setView:Re,goToNextStep:qn}),[ie,pe,On,nt,it,Tn,Re,qn]),ir=M.useMemo(()=>H({},mi,{value:we,timezone:ae,open:ye.open,views:g,view:Yt,initialView:xe,disabled:k??!1,readOnly:B??!1,autoFocus:F??!1,variant:i,orientation:ge,popupRef:he,reduceAnimations:de,triggerRef:ke,triggerStatus:Fn,hasNextStep:_t,fieldFormat:L??"",name:q,label:P,rootSx:W,rootRef:Fe,rootClassName:X}),[mi,we,Fe,i,ge,de,k,B,L,X,q,P,W,Fn,_t,ae,ye.open,Yt,g,xe,F]),zl=M.useMemo(()=>({dismissViews:Qe,ownerState:gt,hasUIView:pt,getCurrentViewMode:Cn,rootRefObject:Ae,labelId:Q,triggerElement:be,viewContainerRole:f,defaultActionBarActions:$r,onPopperExited:s}),[Qe,gt,pt,Cn,Q,be,f,$r,s]),ea=M.useMemo(()=>({formatDensity:O,enableAccessibleFieldDOMStructure:I,selectedSections:R,onSelectedSectionsChange:V,fieldRef:Se}),[O,I,R,V,Se]);return{providerProps:{localeText:d,contextValue:ir,privateContextValue:zl,actionsContextValue:mi,fieldPrivateContextValue:ea,isValidContextValue:vn=>{const ar=a({adapter:Z,value:vn,timezone:ae,props:e});return!n.hasError(ar)}},renderCurrentView:()=>{if(Yt==null)return null;const vn=A[Yt];if(vn==null)return null;const ar=H({},G,{views:g,timezone:ae,value:ze,onChange:Ne,view:Yt,onViewChange:Re,showViewSwitcher:Jt>1,timeViewsCount:Jt},f==="tooltip"?{focusedView:null,onFocusedViewChange:()=>{}}:{focusedView:Ge,onFocusedViewChange:Oe});return c?v.jsx(c,{viewRenderers:A,popperView:Yt,rendererProps:ar}):vn(ar)},ownerState:gt}};function X4(t){return Rt("MuiPickersLayout",t)}const La=Ot("MuiPickersLayout",["root","landscape","contentWrapper","toolbar","actionBar","tabs","shortcuts"]),sX=["actions"],oX=Pe(Wa,{name:"MuiPickersLayout",slot:"ActionBar"})({});function lX(t){const{actions:e}=t,n=Be(t,sX),r=Xa(),{clearValue:i,setValueToToday:a,acceptValueChanges:s,cancelValueChanges:o,goToNextStep:c,hasNextStep:d}=jl();if(e==null||e.length===0)return null;const f=e==null?void 0:e.map(p=>{switch(p){case"clear":return v.jsx(Ke,{onClick:i,children:r.clearButtonLabel},p);case"cancel":return v.jsx(Ke,{onClick:o,children:r.cancelButtonLabel},p);case"accept":return v.jsx(Ke,{onClick:s,children:r.okButtonLabel},p);case"today":return v.jsx(Ke,{onClick:a,children:r.todayButtonLabel},p);case"next":return v.jsx(Ke,{onClick:c,children:r.nextStepButtonLabel},p);case"nextOrAccept":return d?v.jsx(Ke,{onClick:c,children:r.nextStepButtonLabel},p):v.jsx(Ke,{onClick:s,children:r.okButtonLabel},p);default:return null}});return v.jsx(oX,H({},n,{children:f}))}const cX=M.memo(lX),uX=["items","changeImportance"],dX=["getValue"],fX=Pe(zw,{name:"MuiPickersLayout",slot:"Shortcuts"})({});function hX(t){const{items:e,changeImportance:n="accept"}=t,r=Be(t,uX),{setValue:i}=pG(),a=hG();if(e==null||e.length===0)return null;const s=e.map(o=>{let{getValue:c}=o,d=Be(o,dX);const f=c({isValid:a});return H({},d,{label:d.label,onClick:()=>{i(f,{changeImportance:n,shortcut:d})},disabled:!a(f)})});return v.jsx(fX,H({dense:!0,sx:[{maxHeight:Yd,maxWidth:200,overflow:"auto"},...Array.isArray(r.sx)?r.sx:[r.sx]]},r,{children:s.map(o=>v.jsx($w,{children:v.jsx(mn,H({},o))},o.id??o.label))}))}const pX=["ownerState"];function gX(t){return t.view!==null}const mX=(t,e)=>{const{pickerOrientation:n}=e;return vt({root:["root",n==="landscape"&&"landscape"],contentWrapper:["contentWrapper"],toolbar:["toolbar"],actionBar:["actionBar"],tabs:["tabs"],landscape:["landscape"],shortcuts:["shortcuts"]},X4,t)},K4=t=>{const{ownerState:e,defaultActionBarActions:n}=nr(),{view:r}=jl(),i=Ea(),{children:a,slots:s,slotProps:o,classes:c}=t,d=M.useMemo(()=>H({},e,{layoutDirection:i?"rtl":"ltr",hasShortcuts:!1}),[e,i]),f=mX(c,d),p=(s==null?void 0:s.actionBar)??cX,g=St({elementType:p,externalSlotProps:o==null?void 0:o.actionBar,additionalProps:{actions:n},className:f.actionBar,ownerState:d}),y=Be(g,pX),x=v.jsx(p,H({},y)),_=s==null?void 0:s.toolbar,A=St({elementType:_,externalSlotProps:o==null?void 0:o.toolbar,className:f.toolbar,ownerState:d}),E=gX(A)&&_?v.jsx(_,H({},A)):null,T=a,C=s==null?void 0:s.tabs,D=r&&C?v.jsx(C,H({className:f.tabs},o==null?void 0:o.tabs)):null,k=(s==null?void 0:s.shortcuts)??hX,B=St({elementType:k,externalSlotProps:o==null?void 0:o.shortcuts,className:f.shortcuts,ownerState:d}),O=Array.isArray(B==null?void 0:B.items)&&B.items.length>0,I=r&&k?v.jsx(k,H({},B)):null;return{toolbar:E,content:T,tabs:D,actionBar:x,shortcuts:I,ownerState:H({},d,{hasShortcuts:O})}},yX=(t,e)=>{const{pickerOrientation:n}=e;return vt({root:["root",n==="landscape"&&"landscape"],contentWrapper:["contentWrapper"]},X4,t)},Q4=Pe("div",{name:"MuiPickersLayout",slot:"Root"})({display:"grid",gridAutoColumns:"max-content auto max-content",gridAutoRows:"max-content auto max-content",[`& .${La.actionBar}`]:{gridColumn:"1 / 4",gridRow:3},variants:[{props:{pickerOrientation:"landscape",hasShortcuts:!1},style:{[`& .${La.toolbar}`]:{gridColumn:1,gridRow:"1 / 3"}}},{props:{pickerOrientation:"landscape",hasShortcuts:!0},style:{[`& .${La.toolbar}`]:{gridColumn:"2 / 4",gridRow:1,maxWidth:"max-content"},[`& .${La.shortcuts}`]:{gridColumn:1,gridRow:2}}},{props:{pickerOrientation:"portrait"},style:{[`& .${La.toolbar}`]:{gridColumn:"2 / 4",gridRow:1},[`& .${La.shortcuts}`]:{gridColumn:1,gridRow:"2 / 3"}}},{props:{hasShortcuts:!0,layoutDirection:"rtl"},style:{[`& .${La.shortcuts}`]:{gridColumn:4}}}]}),Z4=Pe("div",{name:"MuiPickersLayout",slot:"ContentWrapper"})({gridColumn:"2 / 4",gridRow:2,display:"flex",flexDirection:"column"}),J4=M.forwardRef(function(e,n){const r=wt({props:e,name:"MuiPickersLayout"}),{toolbar:i,content:a,tabs:s,actionBar:o,shortcuts:c,ownerState:d}=K4(r),{orientation:f,variant:p}=jl(),{sx:g,className:y,classes:x}=r,_=yX(x,d);return v.jsxs(Q4,{ref:n,sx:g,className:jt(_.root,y),ownerState:d,children:[f==="landscape"?c:i,f==="landscape"?i:c,v.jsx(Z4,{className:_.contentWrapper,ownerState:d,children:p==="desktop"?v.jsxs(M.Fragment,{children:[a,s]}):v.jsxs(M.Fragment,{children:[s,a]})}),o]})});function eP(t){const{steps:e}=t;return PG({steps:e,isViewMatchingStep:(n,r)=>r.views==null||r.views.includes(n),onStepChange:({step:n,defaultView:r,setView:i,view:a,views:s})=>{const o=n.views==null?r:n.views.find(c=>s.includes(c));o!==a&&i(o)}})}const vX=["props","steps"],xX=["ownerState"],wX=t=>{var B;let{props:e,steps:n}=t,r=Be(t,vX);const{slots:i,slotProps:a,label:s,inputRef:o,localeText:c}=e,d=eP({steps:n}),{providerProps:f,renderCurrentView:p,ownerState:g}=q4(H({},r,{props:e,localeText:c,autoFocusView:!0,viewContainerRole:"dialog",variant:"desktop",getStepNavigation:d})),y=f.privateContextValue.labelId,x=((B=a==null?void 0:a.toolbar)==null?void 0:B.hidden)??!1,_=i.field,A=St({elementType:_,externalSlotProps:a==null?void 0:a.field,additionalProps:H({},x&&{id:y}),ownerState:g}),E=Be(A,xX),T=i.layout??J4;let C=y;x&&(s?C=`${y}-label`:C=void 0);const D=H({},a,{toolbar:H({},a==null?void 0:a.toolbar,{titleId:y}),popper:H({"aria-labelledby":C},a==null?void 0:a.popper)});return{renderPicker:()=>v.jsxs(f4,H({},f,{children:[v.jsx(_,H({},E,{slots:i,slotProps:D,inputRef:o})),v.jsx(nX,{slots:i,slotProps:D,children:v.jsx(T,H({},D==null?void 0:D.layout,{slots:i,slotProps:D,children:p()}))})]}))}},Md=({view:t,onViewChange:e,views:n,focusedView:r,onFocusedViewChange:i,value:a,defaultValue:s,referenceDate:o,onChange:c,className:d,classes:f,disableFuture:p,disablePast:g,minDate:y,maxDate:x,shouldDisableDate:_,shouldDisableMonth:A,shouldDisableYear:E,reduceAnimations:T,onMonthChange:C,monthsPerRow:D,onYearChange:k,yearsOrder:B,yearsPerRow:O,slots:I,slotProps:R,loading:V,renderLoading:L,disableHighlightToday:P,readOnly:F,disabled:q,showDaysOutsideCurrentMonth:X,dayOfWeekFormatter:W,sx:G,autoFocus:Q,fixedWeekNumber:Z,displayWeekNumber:de,timezone:ge})=>v.jsx(Uq,{view:t,onViewChange:e,views:n.filter(Gd),focusedView:r&&Gd(r)?r:null,onFocusedViewChange:i,value:a,defaultValue:s,referenceDate:o,onChange:c,className:d,classes:f,disableFuture:p,disablePast:g,minDate:y,maxDate:x,shouldDisableDate:_,shouldDisableMonth:A,shouldDisableYear:E,reduceAnimations:T,onMonthChange:C,monthsPerRow:D,onYearChange:k,yearsOrder:B,yearsPerRow:O,slots:I,slotProps:R,loading:V,renderLoading:L,disableHighlightToday:P,readOnly:F,disabled:q,showDaysOutsideCurrentMonth:X,dayOfWeekFormatter:W,sx:G,autoFocus:Q,fixedWeekNumber:Z,displayWeekNumber:de,timezone:ge}),_X=Pe($a)({[`& .${TT.container}`]:{outline:0},[`& .${TT.paper}`]:{outline:0,minWidth:Wd}}),bX=Pe(Ga)({"&:first-of-type":{padding:0}});function AX(t){const{children:e,slots:n,slotProps:r}=t,{open:i}=jl(),{dismissViews:a,onPopperExited:s}=nr(),o=(n==null?void 0:n.dialog)??_X,c=(n==null?void 0:n.mobileTransition)??w1;return v.jsx(o,H({open:i,onClose:()=>{a(),s==null||s()}},r==null?void 0:r.dialog,{TransitionComponent:c,TransitionProps:r==null?void 0:r.mobileTransition,PaperComponent:n==null?void 0:n.mobilePaper,PaperProps:r==null?void 0:r.mobilePaper,children:v.jsx(bX,{children:e})}))}const EX=["props","steps"],SX=["ownerState"],TX=t=>{var B;let{props:e,steps:n}=t,r=Be(t,EX);const{slots:i,slotProps:a,label:s,inputRef:o,localeText:c}=e,d=eP({steps:n}),{providerProps:f,renderCurrentView:p,ownerState:g}=q4(H({},r,{props:e,localeText:c,autoFocusView:!0,viewContainerRole:"dialog",variant:"mobile",getStepNavigation:d})),y=f.privateContextValue.labelId,x=((B=a==null?void 0:a.toolbar)==null?void 0:B.hidden)??!1,_=i.field,A=St({elementType:_,externalSlotProps:a==null?void 0:a.field,additionalProps:H({},x&&{id:y}),ownerState:g}),E=Be(A,SX),T=i.layout??J4;let C=y;x&&(s?C=`${y}-label`:C=void 0);const D=H({},a,{toolbar:H({},a==null?void 0:a.toolbar,{titleId:y}),mobilePaper:H({"aria-labelledby":C},a==null?void 0:a.mobilePaper)});return{renderPicker:()=>v.jsxs(f4,H({},f,{children:[v.jsx(_,H({},E,{slots:i,slotProps:D,inputRef:o})),v.jsx(AX,{slots:i,slotProps:D,children:v.jsx(T,H({},D==null?void 0:D.layout,{slots:i,slotProps:D,children:p()}))})]}))}};function CX(t){return Rt("MuiPickersToolbarText",t)}const IX=Ot("MuiPickersToolbarText",["root"]),DX=["className","classes","selected","value"],RX=t=>vt({root:["root"]},CX,t),OX=Pe(te,{name:"MuiPickersToolbarText",slot:"Root"})(({theme:t})=>({transition:t.transitions.create("color"),color:(t.vars||t).palette.text.secondary,"&[data-selected]":{color:(t.vars||t).palette.text.primary}})),tP=M.forwardRef(function(e,n){const r=wt({props:e,name:"MuiPickersToolbarText"}),{className:i,classes:a,selected:s,value:o}=r,c=Be(r,DX),d=RX(a);return v.jsx(OX,H({ref:n,className:jt(d.root,i),component:"span",ownerState:r},s&&{"data-selected":!0},c,{children:o}))}),MX=["align","className","classes","selected","typographyClassName","value","variant","width"],PX=t=>vt({root:["root"]},W4,t),kX=Pe(Ke,{name:"MuiPickersToolbarButton",slot:"Root"})({padding:0,minWidth:16,textTransform:"none"}),cl=M.forwardRef(function(e,n){const r=wt({props:e,name:"MuiPickersToolbarButton"}),{align:i,className:a,classes:s,selected:o,typographyClassName:c,value:d,variant:f,width:p}=r,g=Be(r,MX),y=PX(s);return v.jsx(kX,H({variant:"text",ref:n,className:jt(y.root,a),ownerState:r},p?{sx:{width:p}}:{},g,{children:v.jsx(tP,{align:i,className:c,variant:f,value:d,selected:o})}))}),nP=({view:t,onViewChange:e,focusedView:n,onFocusedViewChange:r,views:i,value:a,defaultValue:s,referenceDate:o,onChange:c,className:d,classes:f,disableFuture:p,disablePast:g,minTime:y,maxTime:x,shouldDisableTime:_,minutesStep:A,ampm:E,slots:T,slotProps:C,readOnly:D,disabled:k,sx:B,autoFocus:O,disableIgnoringDatePartForTimeValidation:I,timeSteps:R,skipDisabled:V,timezone:L})=>v.jsx(QG,{view:t,onViewChange:e,focusedView:n&&v0(n)?n:null,onFocusedViewChange:r,views:i.filter(v0),value:a,defaultValue:s,referenceDate:o,onChange:c,className:d,classes:f,disableFuture:p,disablePast:g,minTime:y,maxTime:x,shouldDisableTime:_,minutesStep:A,ampm:E,slots:T,slotProps:C,readOnly:D,disabled:k,sx:B,autoFocus:O,disableIgnoringDatePartForTimeValidation:I,timeStep:R==null?void 0:R.minutes,skipDisabled:V,timezone:L}),Gm=({view:t,onViewChange:e,focusedView:n,onFocusedViewChange:r,views:i,value:a,defaultValue:s,referenceDate:o,onChange:c,className:d,classes:f,disableFuture:p,disablePast:g,minTime:y,maxTime:x,shouldDisableTime:_,minutesStep:A,ampm:E,slots:T,slotProps:C,readOnly:D,disabled:k,sx:B,autoFocus:O,disableIgnoringDatePartForTimeValidation:I,timeSteps:R,skipDisabled:V,timezone:L})=>v.jsx(cW,{view:t,onViewChange:e,focusedView:n&&xd(n)?n:null,onFocusedViewChange:r,views:i.filter(v0),value:a,defaultValue:s,referenceDate:o,onChange:c,className:d,classes:f,disableFuture:p,disablePast:g,minTime:y,maxTime:x,shouldDisableTime:_,minutesStep:A,ampm:E,slots:T,slotProps:C,readOnly:D,disabled:k,sx:B,autoFocus:O,disableIgnoringDatePartForTimeValidation:I,timeSteps:R,skipDisabled:V,timezone:L}),NX=["views","format"],rP=(t,e,n)=>{let{views:r,format:i}=e,a=Be(e,NX);if(i)return i;const s=[],o=[];if(r.forEach(f=>{v0(f)?o.push(f):Gd(f)&&s.push(f)}),o.length===0)return eD(t,H({views:s},a));if(s.length===0)return cD(t,H({views:o},a));const c=cD(t,H({views:o},a));return`${eD(t,H({views:s},a))} ${c}`},LX=(t,e,n)=>n?e.filter(r=>!xd(r)||r==="hours"):t?[...e,"meridiem"]:e,BX=(t,e)=>1440/((t.hours??1)*(t.minutes??5))<=e;function FX({thresholdToRenderTimeInASingleColumn:t,ampm:e,timeSteps:n,views:r}){const i=t??24,a=H({hours:1,minutes:5,seconds:5},n),s=BX(a,i);return{thresholdToRenderTimeInASingleColumn:i,timeSteps:a,shouldRenderTimeInASingleColumn:s,views:LX(e,r,s)}}function VX(t){return Rt("MuiDateTimePickerTabs",t)}Ot("MuiDateTimePickerTabs",["root"]);const jX=t=>Gd(t)?"date":"time",UX=t=>t==="date"?"day":"hours",HX=t=>vt({root:["root"]},VX,t),zX=Pe(v1,{name:"MuiDateTimePickerTabs",slot:"Root"})(({theme:t})=>({boxShadow:`0 -1px 0 0 inset ${(t.vars||t).palette.divider}`,"&:last-child":{boxShadow:`0 1px 0 0 inset ${(t.vars||t).palette.divider}`,[`& .${MN.indicator}`]:{bottom:"auto",top:0}}})),$X=function(e){const n=wt({props:e,name:"MuiDateTimePickerTabs"}),{dateIcon:r=v.jsx(xG,{}),timeIcon:i=v.jsx(wG,{}),hidden:a=typeof window>"u"||window.innerHeight<667,className:s,classes:o,sx:c}=n,d=Xa(),{ownerState:f}=nr(),{view:p,setView:g}=jl(),y=HX(o),x=(_,A)=>{g(UX(A))};return a?null:v.jsxs(zX,{ownerState:f,variant:"fullWidth",value:jX(p),onChange:x,className:jt(s,y.root),sx:c,children:[v.jsx(ga,{value:"date","aria-label":d.dateTableLabel,icon:v.jsx(M.Fragment,{children:r})}),v.jsx(ga,{value:"time","aria-label":d.timeTableLabel,icon:v.jsx(M.Fragment,{children:i})})]})};function GX(t){return Rt("MuiDateTimePickerToolbar",t)}const qx=Ot("MuiDateTimePickerToolbar",["root","dateContainer","timeContainer","timeDigitsContainer","separator","timeLabelReverse","ampmSelection","ampmLandscape","ampmLabel"]),WX=["ampm","ampmInClock","toolbarFormat","toolbarPlaceholder","toolbarTitle","className","classes"],YX=(t,e)=>{const{pickerOrientation:n,toolbarDirection:r}=e;return vt({root:["root"],dateContainer:["dateContainer"],timeContainer:["timeContainer",r==="rtl"&&"timeLabelReverse"],timeDigitsContainer:["timeDigitsContainer",r==="rtl"&&"timeLabelReverse"],separator:["separator"],ampmSelection:["ampmSelection",n==="landscape"&&"ampmLandscape"],ampmLabel:["ampmLabel"]},GX,t)},qX=Pe(Yq,{name:"MuiDateTimePickerToolbar",slot:"Root",shouldForwardProp:t=>Sa(t)&&t!=="toolbarVariant"})(({theme:t})=>({paddingLeft:16,paddingRight:16,justifyContent:"space-around",position:"relative",variants:[{props:{toolbarVariant:"desktop"},style:{borderBottom:`1px solid ${(t.vars||t).palette.divider}`,[`& .${Hq.content} .${IX.root}[data-selected]`]:{color:(t.vars||t).palette.primary.main,fontWeight:t.typography.fontWeightBold}}},{props:{toolbarVariant:"desktop",pickerOrientation:"landscape"},style:{borderRight:`1px solid ${(t.vars||t).palette.divider}`}},{props:{toolbarVariant:"desktop",pickerOrientation:"portrait"},style:{paddingLeft:24,paddingRight:0}}]})),XX=Pe("div",{name:"MuiDateTimePickerToolbar",slot:"DateContainer"})({display:"flex",flexDirection:"column",alignItems:"flex-start"}),KX=Pe("div",{name:"MuiDateTimePickerToolbar",slot:"TimeContainer",shouldForwardProp:t=>Sa(t)&&t!=="toolbarVariant"})({display:"flex",flexDirection:"row",variants:[{props:{toolbarDirection:"rtl"},style:{flexDirection:"row-reverse"}},{props:{toolbarVariant:"desktop",pickerOrientation:"portrait"},style:{gap:9,marginRight:4,alignSelf:"flex-end"}},{props:({pickerOrientation:t,toolbarVariant:e})=>t==="landscape"&&e!=="desktop",style:{flexDirection:"column"}},{props:({pickerOrientation:t,toolbarVariant:e,toolbarDirection:n})=>t==="landscape"&&e!=="desktop"&&n==="rtl",style:{flexDirection:"column-reverse"}}]}),QX=Pe("div",{name:"MuiDateTimePickerToolbar",slot:"TimeDigitsContainer",shouldForwardProp:t=>Sa(t)&&t!=="toolbarVariant"})({display:"flex",variants:[{props:{toolbarDirection:"rtl"},style:{flexDirection:"row-reverse"}},{props:{toolbarVariant:"desktop"},style:{gap:1.5}}]}),wD=Pe(tP,{name:"MuiDateTimePickerToolbar",slot:"Separator",shouldForwardProp:t=>Sa(t)&&t!=="toolbarVariant"})({margin:"0 4px 0 2px",cursor:"default",variants:[{props:{toolbarVariant:"desktop"},style:{margin:0}}]}),ZX=Pe("div",{name:"MuiDateTimePickerToolbar",slot:"AmPmSelection",overridesResolver:(t,e)=>[{[`.${qx.ampmLabel}`]:e.ampmLabel},{[`&.${qx.ampmLandscape}`]:e.ampmLandscape},e.ampmSelection]})({display:"flex",flexDirection:"column",marginRight:"auto",marginLeft:12,[`& .${qx.ampmLabel}`]:{fontSize:17},variants:[{props:{pickerOrientation:"landscape"},style:{margin:"4px 0 auto",flexDirection:"row",justifyContent:"space-around",width:"100%"}}]}),JX=M.createContext(null);function eK(t){const e=wt({props:t,name:"MuiDateTimePickerToolbar"}),{ampm:n,ampmInClock:r,toolbarFormat:i,toolbarPlaceholder:a="––",toolbarTitle:s,className:o,classes:c}=e,d=Be(e,WX),{value:f,setValue:p,disabled:g,readOnly:y,variant:x,orientation:_,view:A,setView:E,views:T}=jl(),C=Xa(),D=Y4(),k=YX(c,D),B=Wt(),O=M.useContext(JX),I=O?O.value:f,R=O?O.setValue:p,V=O?O.view:A,L=O?O.setView:E,{meridiemMode:P,handleMeridiemChange:F}=m4(I,n,de=>R(de,{changeImportance:"set"})),q=O!=null&&O.forceDesktopVariant?"desktop":x,X=q==="desktop",W=!!(n&&!r),G=s??C.dateTimePickerToolbarTitle,Q=M.useMemo(()=>B.isValid(I)?i?B.formatByString(I,i):B.format(I,"shortDate"):a,[I,i,a,B]),Z=(de,ge)=>B.isValid(I)?B.format(I,de):ge;return v.jsxs(qX,H({className:jt(k.root,o),toolbarTitle:G,toolbarVariant:q},d,{ownerState:D,children:[v.jsxs(XX,{className:k.dateContainer,ownerState:D,children:[T.includes("year")&&v.jsx(cl,{tabIndex:-1,variant:"subtitle1",onClick:()=>L("year"),selected:V==="year",value:Z("year","–")}),T.includes("day")&&v.jsx(cl,{tabIndex:-1,variant:X?"h5":"h4",onClick:()=>L("day"),selected:V==="day",value:Q})]}),v.jsxs(KX,{className:k.timeContainer,ownerState:D,toolbarVariant:q,children:[v.jsxs(QX,{className:k.timeDigitsContainer,ownerState:D,toolbarVariant:q,children:[T.includes("hours")&&v.jsxs(M.Fragment,{children:[v.jsx(cl,{variant:X?"h5":"h3",width:X&&_==="portrait"?Wh:void 0,onClick:()=>L("hours"),selected:V==="hours",value:Z(n?"hours12h":"hours24h","--")}),v.jsx(wD,{variant:X?"h5":"h3",value:":",className:k.separator,ownerState:D,toolbarVariant:q}),v.jsx(cl,{variant:X?"h5":"h3",width:X&&_==="portrait"?Wh:void 0,onClick:()=>L("minutes"),selected:V==="minutes"||!T.includes("minutes")&&V==="hours",value:Z("minutes","--"),disabled:!T.includes("minutes")})]}),T.includes("seconds")&&v.jsxs(M.Fragment,{children:[v.jsx(wD,{variant:X?"h5":"h3",value:":",className:k.separator,ownerState:D,toolbarVariant:q}),v.jsx(cl,{variant:X?"h5":"h3",width:X&&_==="portrait"?Wh:void 0,onClick:()=>L("seconds"),selected:V==="seconds",value:Z("seconds","--")})]})]}),W&&!X&&v.jsxs(ZX,{className:k.ampmSelection,ownerState:D,children:[v.jsx(cl,{variant:"subtitle2",selected:P==="am",typographyClassName:k.ampmLabel,value:n0(B,"am"),onClick:y?void 0:()=>F("am"),disabled:g}),v.jsx(cl,{variant:"subtitle2",selected:P==="pm",typographyClassName:k.ampmLabel,value:n0(B,"pm"),onClick:y?void 0:()=>F("pm"),disabled:g})]}),n&&X&&v.jsx(cl,{variant:"h5",onClick:()=>L("meridiem"),selected:V==="meridiem",value:I&&P?n0(B,P):"--",width:Wh})]})]}))}function iP(t,e){var y;const n=Wt(),r=wt({props:t,name:e}),i=D4(r),a=r.ampm??n.is12HourCycleInCurrentLocale(),s=M.useMemo(()=>{var x;return((x=r.localeText)==null?void 0:x.toolbarTitle)==null?r.localeText:H({},r.localeText,{dateTimePickerToolbarTitle:r.localeText.toolbarTitle})},[r.localeText]),{openTo:o,views:c}=Y$({views:r.views,openTo:r.openTo,defaultViews:["year","day","hours","minutes"],defaultOpenTo:"day"}),{shouldRenderTimeInASingleColumn:d,thresholdToRenderTimeInASingleColumn:f,views:p,timeSteps:g}=FX({thresholdToRenderTimeInASingleColumn:r.thresholdToRenderTimeInASingleColumn,ampm:a,timeSteps:r.timeSteps,views:c});return H({},r,i,{timeSteps:g,openTo:o,shouldRenderTimeInASingleColumn:d,thresholdToRenderTimeInASingleColumn:f,views:p,ampm:a,localeText:s,orientation:r.orientation??"portrait",slots:H({toolbar:eK,tabs:$X},r.slots),slotProps:H({},r.slotProps,{toolbar:H({ampm:a},(y=r.slotProps)==null?void 0:y.toolbar)})})}const tK=M.forwardRef(function(e,n){var x;const{toolbar:r,tabs:i,content:a,actionBar:s,shortcuts:o,ownerState:c}=K4(e),{orientation:d}=jl(),{sx:f,className:p,classes:g}=e,y=s&&(((x=s.props.actions)==null?void 0:x.length)??0)>0;return v.jsxs(Q4,{ref:n,className:jt(La.root,g==null?void 0:g.root,p),sx:[{[`& .${La.tabs}`]:{gridRow:4,gridColumn:"1 / 4"},[`& .${La.actionBar}`]:{gridRow:5}},...Array.isArray(f)?f:[f]],ownerState:c,children:[d==="landscape"?o:r,d==="landscape"?r:o,v.jsxs(Z4,{className:jt(La.contentWrapper,g==null?void 0:g.contentWrapper),ownerState:c,sx:{display:"grid"},children:[a,i,y&&v.jsx(Bc,{sx:{gridRow:3,gridColumn:"1 / 4"}})]}),s]})}),nK=["openTo","focusedView","timeViewsCount"],rK=function(e){var y,x;const{viewRenderers:n,popperView:r,rendererProps:i}=e,{openTo:a,focusedView:s,timeViewsCount:o}=i,c=Be(i,nK),d=H({},c,{autoFocus:!1,focusedView:null,sx:[{[`&.${ww.root}`]:{borderBottom:0},[`&.${ww.root}, .${_w.root}, &.${xw.root}`]:{maxHeight:Yd}}]}),f=xd(r),p=f?"day":r,g=f?r:"hours";return v.jsxs(M.Fragment,{children:[(y=n[p])==null?void 0:y.call(n,H({},i,{view:f?"day":r,focusedView:s&&Gd(s)?s:null,views:i.views.filter(Gd),sx:[{gridColumn:1},...d.sx]})),o>0&&v.jsxs(M.Fragment,{children:[v.jsx(Bc,{orientation:"vertical",sx:{gridColumn:2}}),(x=n[g])==null?void 0:x.call(n,H({},d,{view:f?r:"hours",focusedView:s&&xd(s)?s:null,openTo:xd(a)?a:"hours",views:i.views.filter(xd),sx:[{gridColumn:3},...d.sx]}))]})]})},aP=M.forwardRef(function(e,n){var g,y,x;const r=Wt(),i=iP(e,"MuiDesktopDateTimePicker"),a=i.shouldRenderTimeInASingleColumn?nP:Gm,s=H({day:Md,month:Md,year:Md,hours:a,minutes:a,seconds:a,meridiem:a},i.viewRenderers),o=i.ampmInClock??!0,d=((g=s.hours)==null?void 0:g.name)===Gm.name?i.views:i.views.filter(_=>_!=="meridiem"),f=H({},i,{viewRenderers:s,format:rP(r,i),views:d,yearsPerRow:i.yearsPerRow??4,ampmInClock:o,slots:H({field:V4,layout:tK},i.slots),slotProps:H({},i.slotProps,{field:_=>{var A;return H({},fo((A=i.slotProps)==null?void 0:A.field,_),e4(i))},toolbar:H({hidden:!0,ampmInClock:o},(y=i.slotProps)==null?void 0:y.toolbar),tabs:H({hidden:!0},(x=i.slotProps)==null?void 0:x.tabs)})}),{renderPicker:p}=wX({ref:n,props:f,valueManager:Di,valueType:"date-time",validator:J1,rendererInterceptor:rK,steps:null});return p()});aP.propTypes={ampm:ee.bool,ampmInClock:ee.bool,autoFocus:ee.bool,className:ee.string,closeOnSelect:ee.bool,dayOfWeekFormatter:ee.func,defaultValue:ee.object,disabled:ee.bool,disableFuture:ee.bool,disableHighlightToday:ee.bool,disableIgnoringDatePartForTimeValidation:ee.bool,disableOpenPicker:ee.bool,disablePast:ee.bool,displayWeekNumber:ee.bool,enableAccessibleFieldDOMStructure:ee.any,fixedWeekNumber:ee.number,format:ee.string,formatDensity:ee.oneOf(["dense","spacious"]),inputRef:nR,label:ee.node,loading:ee.bool,localeText:ee.object,maxDate:ee.object,maxDateTime:ee.object,maxTime:ee.object,minDate:ee.object,minDateTime:ee.object,minTime:ee.object,minutesStep:ee.number,monthsPerRow:ee.oneOf([3,4]),name:ee.string,onAccept:ee.func,onChange:ee.func,onClose:ee.func,onError:ee.func,onMonthChange:ee.func,onOpen:ee.func,onSelectedSectionsChange:ee.func,onViewChange:ee.func,onYearChange:ee.func,open:ee.bool,openTo:ee.oneOf(["day","hours","meridiem","minutes","month","seconds","year"]),orientation:ee.oneOf(["landscape","portrait"]),readOnly:ee.bool,reduceAnimations:ee.bool,referenceDate:ee.object,renderLoading:ee.func,selectedSections:ee.oneOfType([ee.oneOf(["all","day","empty","hours","meridiem","minutes","month","seconds","weekDay","year"]),ee.number]),shouldDisableDate:ee.func,shouldDisableMonth:ee.func,shouldDisableTime:ee.func,shouldDisableYear:ee.func,showDaysOutsideCurrentMonth:ee.bool,skipDisabled:ee.bool,slotProps:ee.object,slots:ee.object,sx:ee.oneOfType([ee.arrayOf(ee.oneOfType([ee.func,ee.object,ee.bool])),ee.func,ee.object]),thresholdToRenderTimeInASingleColumn:ee.number,timeSteps:ee.shape({hours:ee.number,minutes:ee.number,seconds:ee.number}),timezone:ee.string,value:ee.object,view:ee.oneOf(["day","hours","meridiem","minutes","month","seconds","year"]),viewRenderers:ee.shape({day:ee.func,hours:ee.func,meridiem:ee.func,minutes:ee.func,month:ee.func,seconds:ee.func,year:ee.func}),views:ee.arrayOf(ee.oneOf(["day","hours","minutes","month","seconds","year"]).isRequired),yearsOrder:ee.oneOf(["asc","desc"]),yearsPerRow:ee.oneOf([3,4])};const iK=[{views:n4},{views:p4}],sP=M.forwardRef(function(e,n){var g,y,x,_,A,E;const r=Wt(),i=iP(e,"MuiMobileDateTimePicker"),a=i.shouldRenderTimeInASingleColumn?nP:Gm,s=H({day:Md,month:Md,year:Md,hours:a,minutes:a,seconds:a,meridiem:a},i.viewRenderers),o=i.ampmInClock??!1,d=((g=s.hours)==null?void 0:g.name)===Gm.name?i.views:i.views.filter(T=>T!=="meridiem"),f=H({},i,{viewRenderers:s,format:rP(r,i),views:d,ampmInClock:o,slots:H({field:V4},i.slots),slotProps:H({},i.slotProps,{field:T=>{var C;return H({},fo((C=i.slotProps)==null?void 0:C.field,T),e4(i))},toolbar:H({hidden:!1,ampmInClock:o},(y=i.slotProps)==null?void 0:y.toolbar),tabs:H({hidden:!1},(x=i.slotProps)==null?void 0:x.tabs),layout:H({},(_=i.slotProps)==null?void 0:_.layout,{sx:GG([{[`& .${ww.root}`]:{width:Wd},[`& .${_w.root}`]:{flex:1,maxHeight:Yd-1,[`.${_w.item}`]:{width:"auto"}},[`& .${xw.root}`]:{width:Wd,maxHeight:Yd,flex:1,[`.${xw.item}`]:{justifyContent:"center"}}}],(E=(A=i.slotProps)==null?void 0:A.layout)==null?void 0:E.sx)})})}),{renderPicker:p}=TX({ref:n,props:f,valueManager:Di,valueType:"date-time",validator:J1,steps:iK});return p()});sP.propTypes={ampm:ee.bool,ampmInClock:ee.bool,autoFocus:ee.bool,className:ee.string,closeOnSelect:ee.bool,dayOfWeekFormatter:ee.func,defaultValue:ee.object,disabled:ee.bool,disableFuture:ee.bool,disableHighlightToday:ee.bool,disableIgnoringDatePartForTimeValidation:ee.bool,disableOpenPicker:ee.bool,disablePast:ee.bool,displayWeekNumber:ee.bool,enableAccessibleFieldDOMStructure:ee.any,fixedWeekNumber:ee.number,format:ee.string,formatDensity:ee.oneOf(["dense","spacious"]),inputRef:nR,label:ee.node,loading:ee.bool,localeText:ee.object,maxDate:ee.object,maxDateTime:ee.object,maxTime:ee.object,minDate:ee.object,minDateTime:ee.object,minTime:ee.object,minutesStep:ee.number,monthsPerRow:ee.oneOf([3,4]),name:ee.string,onAccept:ee.func,onChange:ee.func,onClose:ee.func,onError:ee.func,onMonthChange:ee.func,onOpen:ee.func,onSelectedSectionsChange:ee.func,onViewChange:ee.func,onYearChange:ee.func,open:ee.bool,openTo:ee.oneOf(["day","hours","meridiem","minutes","month","seconds","year"]),orientation:ee.oneOf(["landscape","portrait"]),readOnly:ee.bool,reduceAnimations:ee.bool,referenceDate:ee.object,renderLoading:ee.func,selectedSections:ee.oneOfType([ee.oneOf(["all","day","empty","hours","meridiem","minutes","month","seconds","weekDay","year"]),ee.number]),shouldDisableDate:ee.func,shouldDisableMonth:ee.func,shouldDisableTime:ee.func,shouldDisableYear:ee.func,showDaysOutsideCurrentMonth:ee.bool,skipDisabled:ee.bool,slotProps:ee.object,slots:ee.object,sx:ee.oneOfType([ee.arrayOf(ee.oneOfType([ee.func,ee.object,ee.bool])),ee.func,ee.object]),thresholdToRenderTimeInASingleColumn:ee.number,timeSteps:ee.shape({hours:ee.number,minutes:ee.number,seconds:ee.number}),timezone:ee.string,value:ee.object,view:ee.oneOf(["day","hours","meridiem","minutes","month","seconds","year"]),viewRenderers:ee.shape({day:ee.func,hours:ee.func,meridiem:ee.func,minutes:ee.func,month:ee.func,seconds:ee.func,year:ee.func}),views:ee.arrayOf(ee.oneOf(["day","hours","minutes","month","seconds","year"]).isRequired),yearsOrder:ee.oneOf(["asc","desc"]),yearsPerRow:ee.oneOf([3,4])};const aK=["desktopModeMediaQuery"],sK=M.forwardRef(function(e,n){const r=wt({props:e,name:"MuiDateTimePicker"}),{desktopModeMediaQuery:i=$G}=r,a=Be(r,aK);return x1(i,{defaultMatches:!0})?v.jsx(aP,H({ref:n},a)):v.jsx(sP,H({ref:n},a))}),oP=6048e5,oK=864e5,lP=6e4,cP=36e5,lK=1e3,_D=Symbol.for("constructDateFrom");function Bn(t,e){return typeof t=="function"?t(e):t&&typeof t=="object"&&_D in t?t[_D](e):t instanceof Date?new t.constructor(e):new Date(e)}function tt(t,e){return Bn(e||t,t)}function ny(t,e,n){const r=tt(t,n==null?void 0:n.in);return isNaN(e)?Bn((n==null?void 0:n.in)||t,NaN):(e&&r.setDate(r.getDate()+e),r)}function uP(t,e,n){return Bn(t,+tt(t)+e)}function cK(t,e,n){return uP(t,e*1e3)}function uK(t,e,n){const r=tt(t,n==null?void 0:n.in);return r.setTime(r.getTime()+e*lP),r}function dK(t,e,n){return uP(t,e*cP)}function fK(t,e,n){return ny(t,e*7,n)}function dP(t,e,n){const r=tt(t,n==null?void 0:n.in);if(isNaN(e))return Bn(t,NaN);if(!e)return r;const i=r.getDate(),a=Bn(t,r.getTime());a.setMonth(r.getMonth()+e+1,0);const s=a.getDate();return i>=s?a:(r.setFullYear(a.getFullYear(),a.getMonth(),i),r)}function hK(t,e,n){return dP(t,e*12,n)}function bD(t,e){const n=tt(t,e==null?void 0:e.in);return n.setHours(23,59,59,999),n}let pK={};function au(){return pK}function gK(t,e){var o,c,d,f;const n=au(),r=(e==null?void 0:e.weekStartsOn)??((c=(o=e==null?void 0:e.locale)==null?void 0:o.options)==null?void 0:c.weekStartsOn)??n.weekStartsOn??((f=(d=n.locale)==null?void 0:d.options)==null?void 0:f.weekStartsOn)??0,i=tt(t,e==null?void 0:e.in),a=i.getDay(),s=(a<r?-7:0)+6-(a-r);return i.setDate(i.getDate()+s),i.setHours(23,59,59,999),i}function AD(t,e){const n=tt(t,e==null?void 0:e.in),r=n.getFullYear();return n.setFullYear(r+1,0,0),n.setHours(23,59,59,999),n}const mK={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},yK=(t,e,n)=>{let r;const i=mK[t];return typeof i=="string"?r=i:e===1?r=i.one:r=i.other.replace("{{count}}",e.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function Pd(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const vK={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},xK={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},wK={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},_K={date:Pd({formats:vK,defaultWidth:"full"}),time:Pd({formats:xK,defaultWidth:"full"}),dateTime:Pd({formats:wK,defaultWidth:"full"})},bK={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},AK=(t,e,n,r)=>bK[t];function ys(t){return(e,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let i;if(r==="formatting"&&t.formattingValues){const s=t.defaultFormattingWidth||t.defaultWidth,o=n!=null&&n.width?String(n.width):s;i=t.formattingValues[o]||t.formattingValues[s]}else{const s=t.defaultWidth,o=n!=null&&n.width?String(n.width):t.defaultWidth;i=t.values[o]||t.values[s]}const a=t.argumentCallback?t.argumentCallback(e):e;return i[a]}}const EK={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},SK={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},TK={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},CK={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},IK={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},DK={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},RK=(t,e)=>{const n=Number(t),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},OK={ordinalNumber:RK,era:ys({values:EK,defaultWidth:"wide"}),quarter:ys({values:SK,defaultWidth:"wide",argumentCallback:t=>t-1}),month:ys({values:TK,defaultWidth:"wide"}),day:ys({values:CK,defaultWidth:"wide"}),dayPeriod:ys({values:IK,defaultWidth:"wide",formattingValues:DK,defaultFormattingWidth:"wide"})};function vs(t){return(e,n={})=>{const r=n.width,i=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],a=e.match(i);if(!a)return null;const s=a[0],o=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],c=Array.isArray(o)?PK(o,p=>p.test(s)):MK(o,p=>p.test(s));let d;d=t.valueCallback?t.valueCallback(c):c,d=n.valueCallback?n.valueCallback(d):d;const f=e.slice(s.length);return{value:d,rest:f}}}function MK(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function PK(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function fP(t){return(e,n={})=>{const r=e.match(t.matchPattern);if(!r)return null;const i=r[0],a=e.match(t.parsePattern);if(!a)return null;let s=t.valueCallback?t.valueCallback(a[0]):a[0];s=n.valueCallback?n.valueCallback(s):s;const o=e.slice(i.length);return{value:s,rest:o}}}const kK=/^(\d+)(th|st|nd|rd)?/i,NK=/\d+/i,LK={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},BK={any:[/^b/i,/^(a|c)/i]},FK={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},VK={any:[/1/i,/2/i,/3/i,/4/i]},jK={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},UK={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},HK={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},zK={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},$K={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},GK={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},WK={ordinalNumber:fP({matchPattern:kK,parsePattern:NK,valueCallback:t=>parseInt(t,10)}),era:vs({matchPatterns:LK,defaultMatchWidth:"wide",parsePatterns:BK,defaultParseWidth:"any"}),quarter:vs({matchPatterns:FK,defaultMatchWidth:"wide",parsePatterns:VK,defaultParseWidth:"any",valueCallback:t=>t+1}),month:vs({matchPatterns:jK,defaultMatchWidth:"wide",parsePatterns:UK,defaultParseWidth:"any"}),day:vs({matchPatterns:HK,defaultMatchWidth:"wide",parsePatterns:zK,defaultParseWidth:"any"}),dayPeriod:vs({matchPatterns:$K,defaultMatchWidth:"any",parsePatterns:GK,defaultParseWidth:"any"})},xb={code:"en-US",formatDistance:yK,formatLong:_K,formatRelative:AK,localize:OK,match:WK,options:{weekStartsOn:0,firstWeekContainsDate:1}};function Wm(t){const e=tt(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function Y0(t,...e){const n=Bn.bind(null,e.find(r=>typeof r=="object"));return e.map(n)}function w0(t,e){const n=tt(t,e==null?void 0:e.in);return n.setHours(0,0,0,0),n}function YK(t,e,n){const[r,i]=Y0(n==null?void 0:n.in,t,e),a=w0(r),s=w0(i),o=+a-Wm(a),c=+s-Wm(s);return Math.round((o-c)/oK)}function hP(t,e){const n=tt(t,e==null?void 0:e.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}function qK(t,e){const n=tt(t,e==null?void 0:e.in);return YK(n,hP(n))+1}function Ao(t,e){var o,c,d,f;const n=au(),r=(e==null?void 0:e.weekStartsOn)??((c=(o=e==null?void 0:e.locale)==null?void 0:o.options)==null?void 0:c.weekStartsOn)??n.weekStartsOn??((f=(d=n.locale)==null?void 0:d.options)==null?void 0:f.weekStartsOn)??0,i=tt(t,e==null?void 0:e.in),a=i.getDay(),s=(a<r?7:0)+a-r;return i.setDate(i.getDate()-s),i.setHours(0,0,0,0),i}function qd(t,e){return Ao(t,{...e,weekStartsOn:1})}function pP(t,e){const n=tt(t,e==null?void 0:e.in),r=n.getFullYear(),i=Bn(n,0);i.setFullYear(r+1,0,4),i.setHours(0,0,0,0);const a=qd(i),s=Bn(n,0);s.setFullYear(r,0,4),s.setHours(0,0,0,0);const o=qd(s);return n.getTime()>=a.getTime()?r+1:n.getTime()>=o.getTime()?r:r-1}function XK(t,e){const n=pP(t,e),r=Bn(t,0);return r.setFullYear(n,0,4),r.setHours(0,0,0,0),qd(r)}function gP(t,e){const n=tt(t,e==null?void 0:e.in),r=+qd(n)-+XK(n);return Math.round(r/oP)+1}function wb(t,e){var f,p,g,y;const n=tt(t,e==null?void 0:e.in),r=n.getFullYear(),i=au(),a=(e==null?void 0:e.firstWeekContainsDate)??((p=(f=e==null?void 0:e.locale)==null?void 0:f.options)==null?void 0:p.firstWeekContainsDate)??i.firstWeekContainsDate??((y=(g=i.locale)==null?void 0:g.options)==null?void 0:y.firstWeekContainsDate)??1,s=Bn((e==null?void 0:e.in)||t,0);s.setFullYear(r+1,0,a),s.setHours(0,0,0,0);const o=Ao(s,e),c=Bn((e==null?void 0:e.in)||t,0);c.setFullYear(r,0,a),c.setHours(0,0,0,0);const d=Ao(c,e);return+n>=+o?r+1:+n>=+d?r:r-1}function KK(t,e){var o,c,d,f;const n=au(),r=(e==null?void 0:e.firstWeekContainsDate)??((c=(o=e==null?void 0:e.locale)==null?void 0:o.options)==null?void 0:c.firstWeekContainsDate)??n.firstWeekContainsDate??((f=(d=n.locale)==null?void 0:d.options)==null?void 0:f.firstWeekContainsDate)??1,i=wb(t,e),a=Bn((e==null?void 0:e.in)||t,0);return a.setFullYear(i,0,r),a.setHours(0,0,0,0),Ao(a,e)}function _b(t,e){const n=tt(t,e==null?void 0:e.in),r=+Ao(n,e)-+KK(n,e);return Math.round(r/oP)+1}function ln(t,e){const n=t<0?"-":"",r=Math.abs(t).toString().padStart(e,"0");return n+r}const ul={y(t,e){const n=t.getFullYear(),r=n>0?n:1-n;return ln(e==="yy"?r%100:r,e.length)},M(t,e){const n=t.getMonth();return e==="M"?String(n+1):ln(n+1,2)},d(t,e){return ln(t.getDate(),e.length)},a(t,e){const n=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(t,e){return ln(t.getHours()%12||12,e.length)},H(t,e){return ln(t.getHours(),e.length)},m(t,e){return ln(t.getMinutes(),e.length)},s(t,e){return ln(t.getSeconds(),e.length)},S(t,e){const n=e.length,r=t.getMilliseconds(),i=Math.trunc(r*Math.pow(10,n-3));return ln(i,e.length)}},nd={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},ED={G:function(t,e,n){const r=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(t,e,n){if(e==="yo"){const r=t.getFullYear(),i=r>0?r:1-r;return n.ordinalNumber(i,{unit:"year"})}return ul.y(t,e)},Y:function(t,e,n,r){const i=wb(t,r),a=i>0?i:1-i;if(e==="YY"){const s=a%100;return ln(s,2)}return e==="Yo"?n.ordinalNumber(a,{unit:"year"}):ln(a,e.length)},R:function(t,e){const n=pP(t);return ln(n,e.length)},u:function(t,e){const n=t.getFullYear();return ln(n,e.length)},Q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return ln(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return ln(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(t,e,n){const r=t.getMonth();switch(e){case"M":case"MM":return ul.M(t,e);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(t,e,n){const r=t.getMonth();switch(e){case"L":return String(r+1);case"LL":return ln(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(t,e,n,r){const i=_b(t,r);return e==="wo"?n.ordinalNumber(i,{unit:"week"}):ln(i,e.length)},I:function(t,e,n){const r=gP(t);return e==="Io"?n.ordinalNumber(r,{unit:"week"}):ln(r,e.length)},d:function(t,e,n){return e==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):ul.d(t,e)},D:function(t,e,n){const r=qK(t);return e==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):ln(r,e.length)},E:function(t,e,n){const r=t.getDay();switch(e){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(t,e,n,r){const i=t.getDay(),a=(i-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(a);case"ee":return ln(a,2);case"eo":return n.ordinalNumber(a,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});case"eeee":default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(t,e,n,r){const i=t.getDay(),a=(i-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(a);case"cc":return ln(a,e.length);case"co":return n.ordinalNumber(a,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});case"cccc":default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(t,e,n){const r=t.getDay(),i=r===0?7:r;switch(e){case"i":return String(i);case"ii":return ln(i,e.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(t,e,n){const i=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(t,e,n){const r=t.getHours();let i;switch(r===12?i=nd.noon:r===0?i=nd.midnight:i=r/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(t,e,n){const r=t.getHours();let i;switch(r>=17?i=nd.evening:r>=12?i=nd.afternoon:r>=4?i=nd.morning:i=nd.night,e){case"B":case"BB":case"BBB":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(t,e,n){if(e==="ho"){let r=t.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return ul.h(t,e)},H:function(t,e,n){return e==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):ul.H(t,e)},K:function(t,e,n){const r=t.getHours()%12;return e==="Ko"?n.ordinalNumber(r,{unit:"hour"}):ln(r,e.length)},k:function(t,e,n){let r=t.getHours();return r===0&&(r=24),e==="ko"?n.ordinalNumber(r,{unit:"hour"}):ln(r,e.length)},m:function(t,e,n){return e==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):ul.m(t,e)},s:function(t,e,n){return e==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):ul.s(t,e)},S:function(t,e){return ul.S(t,e)},X:function(t,e,n){const r=t.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return TD(r);case"XXXX":case"XX":return Cc(r);case"XXXXX":case"XXX":default:return Cc(r,":")}},x:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"x":return TD(r);case"xxxx":case"xx":return Cc(r);case"xxxxx":case"xxx":default:return Cc(r,":")}},O:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+SD(r,":");case"OOOO":default:return"GMT"+Cc(r,":")}},z:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+SD(r,":");case"zzzz":default:return"GMT"+Cc(r,":")}},t:function(t,e,n){const r=Math.trunc(+t/1e3);return ln(r,e.length)},T:function(t,e,n){return ln(+t,e.length)}};function SD(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),i=Math.trunc(r/60),a=r%60;return a===0?n+String(i):n+String(i)+e+ln(a,2)}function TD(t,e){return t%60===0?(t>0?"-":"+")+ln(Math.abs(t)/60,2):Cc(t,e)}function Cc(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),i=ln(Math.trunc(r/60),2),a=ln(r%60,2);return n+i+e+a}const CD=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},mP=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},QK=(t,e)=>{const n=t.match(/(P+)(p+)?/)||[],r=n[1],i=n[2];if(!i)return CD(t,e);let a;switch(r){case"P":a=e.dateTime({width:"short"});break;case"PP":a=e.dateTime({width:"medium"});break;case"PPP":a=e.dateTime({width:"long"});break;case"PPPP":default:a=e.dateTime({width:"full"});break}return a.replace("{{date}}",CD(r,e)).replace("{{time}}",mP(i,e))},Ym={p:mP,P:QK},ZK=/^D+$/,JK=/^Y+$/,eQ=["D","DD","YY","YYYY"];function yP(t){return ZK.test(t)}function vP(t){return JK.test(t)}function bw(t,e,n){const r=tQ(t,e,n);if(console.warn(r),eQ.includes(t))throw new RangeError(r)}function tQ(t,e,n){const r=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}function nQ(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function xP(t){return!(!nQ(t)&&typeof t!="number"||isNaN(+tt(t)))}const rQ=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,iQ=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,aQ=/^'([^]*?)'?$/,sQ=/''/g,oQ=/[a-zA-Z]/;function lQ(t,e,n){var f,p,g,y,x,_,A,E;const r=au(),i=(n==null?void 0:n.locale)??r.locale??xb,a=(n==null?void 0:n.firstWeekContainsDate)??((p=(f=n==null?void 0:n.locale)==null?void 0:f.options)==null?void 0:p.firstWeekContainsDate)??r.firstWeekContainsDate??((y=(g=r.locale)==null?void 0:g.options)==null?void 0:y.firstWeekContainsDate)??1,s=(n==null?void 0:n.weekStartsOn)??((_=(x=n==null?void 0:n.locale)==null?void 0:x.options)==null?void 0:_.weekStartsOn)??r.weekStartsOn??((E=(A=r.locale)==null?void 0:A.options)==null?void 0:E.weekStartsOn)??0,o=tt(t,n==null?void 0:n.in);if(!xP(o))throw new RangeError("Invalid time value");let c=e.match(iQ).map(T=>{const C=T[0];if(C==="p"||C==="P"){const D=Ym[C];return D(T,i.formatLong)}return T}).join("").match(rQ).map(T=>{if(T==="''")return{isToken:!1,value:"'"};const C=T[0];if(C==="'")return{isToken:!1,value:cQ(T)};if(ED[C])return{isToken:!0,value:T};if(C.match(oQ))throw new RangeError("Format string contains an unescaped latin alphabet character `"+C+"`");return{isToken:!1,value:T}});i.localize.preprocessor&&(c=i.localize.preprocessor(o,c));const d={firstWeekContainsDate:a,weekStartsOn:s,locale:i};return c.map(T=>{if(!T.isToken)return T.value;const C=T.value;(!(n!=null&&n.useAdditionalWeekYearTokens)&&vP(C)||!(n!=null&&n.useAdditionalDayOfYearTokens)&&yP(C))&&bw(C,e,String(t));const D=ED[C[0]];return D(o,C,i.localize,d)}).join("")}function cQ(t){const e=t.match(aQ);return e?e[1].replace(sQ,"'"):t}function uQ(t,e){return tt(t,e==null?void 0:e.in).getDate()}function wP(t,e){const n=tt(t,e==null?void 0:e.in),r=n.getFullYear(),i=n.getMonth(),a=Bn(n,0);return a.setFullYear(r,i+1,0),a.setHours(0,0,0,0),a.getDate()}function dQ(t,e){return tt(t,e==null?void 0:e.in).getHours()}function fQ(t,e){return tt(t,e==null?void 0:e.in).getMinutes()}function hQ(t,e){return tt(t,e==null?void 0:e.in).getMonth()}function pQ(t){return tt(t).getSeconds()}function gQ(t){return tt(t).getMilliseconds()}function mQ(t,e){return tt(t,e==null?void 0:e.in).getFullYear()}function Xx(t,e){return+tt(t)>+tt(e)}function Kx(t,e){return+tt(t)<+tt(e)}function yQ(t,e){return+tt(t)==+tt(e)}function vQ(t,e,n){const[r,i]=Y0(n==null?void 0:n.in,t,e);return+w0(r)==+w0(i)}function xQ(t,e,n){const[r,i]=Y0(n==null?void 0:n.in,t,e);return r.getFullYear()===i.getFullYear()}function wQ(t,e,n){const[r,i]=Y0(n==null?void 0:n.in,t,e);return r.getFullYear()===i.getFullYear()&&r.getMonth()===i.getMonth()}function ID(t,e){const n=tt(t,e==null?void 0:e.in);return n.setMinutes(0,0,0),n}function _Q(t,e,n){const[r,i]=Y0(n==null?void 0:n.in,t,e);return+ID(r)==+ID(i)}function bQ(){return Object.assign({},au())}function AQ(t,e){const n=EQ(e)?new e(0):Bn(e,0);return n.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()),n.setHours(t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()),n}function EQ(t){var e;return typeof t=="function"&&((e=t.prototype)==null?void 0:e.constructor)===t}const SQ=10;class _P{constructor(){ve(this,"subPriority",0)}validate(e,n){return!0}}class TQ extends _P{constructor(e,n,r,i,a){super(),this.value=e,this.validateValue=n,this.setValue=r,this.priority=i,a&&(this.subPriority=a)}validate(e,n){return this.validateValue(e,this.value,n)}set(e,n,r){return this.setValue(e,n,this.value,r)}}class CQ extends _P{constructor(n,r){super();ve(this,"priority",SQ);ve(this,"subPriority",-1);this.context=n||(i=>Bn(r,i))}set(n,r){return r.timestampIsSet?n:Bn(n,AQ(n,this.context))}}class Zt{run(e,n,r,i){const a=this.parse(e,n,r,i);return a?{setter:new TQ(a.value,this.validate,this.set,this.priority,this.subPriority),rest:a.rest}:null}validate(e,n,r){return!0}}class IQ extends Zt{constructor(){super(...arguments);ve(this,"priority",140);ve(this,"incompatibleTokens",["R","u","t","T"])}parse(n,r,i){switch(r){case"G":case"GG":case"GGG":return i.era(n,{width:"abbreviated"})||i.era(n,{width:"narrow"});case"GGGGG":return i.era(n,{width:"narrow"});case"GGGG":default:return i.era(n,{width:"wide"})||i.era(n,{width:"abbreviated"})||i.era(n,{width:"narrow"})}}set(n,r,i){return r.era=i,n.setFullYear(i,0,1),n.setHours(0,0,0,0),n}}const er={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},xs={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function tr(t,e){return t&&{value:e(t.value),rest:t.rest}}function Un(t,e){const n=e.match(t);return n?{value:parseInt(n[0],10),rest:e.slice(n[0].length)}:null}function ws(t,e){const n=e.match(t);if(!n)return null;if(n[0]==="Z")return{value:0,rest:e.slice(1)};const r=n[1]==="+"?1:-1,i=n[2]?parseInt(n[2],10):0,a=n[3]?parseInt(n[3],10):0,s=n[5]?parseInt(n[5],10):0;return{value:r*(i*cP+a*lP+s*lK),rest:e.slice(n[0].length)}}function bP(t){return Un(er.anyDigitsSigned,t)}function Yn(t,e){switch(t){case 1:return Un(er.singleDigit,e);case 2:return Un(er.twoDigits,e);case 3:return Un(er.threeDigits,e);case 4:return Un(er.fourDigits,e);default:return Un(new RegExp("^\\d{1,"+t+"}"),e)}}function qm(t,e){switch(t){case 1:return Un(er.singleDigitSigned,e);case 2:return Un(er.twoDigitsSigned,e);case 3:return Un(er.threeDigitsSigned,e);case 4:return Un(er.fourDigitsSigned,e);default:return Un(new RegExp("^-?\\d{1,"+t+"}"),e)}}function bb(t){switch(t){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function AP(t,e){const n=e>0,r=n?e:1-e;let i;if(r<=50)i=t||100;else{const a=r+50,s=Math.trunc(a/100)*100,o=t>=a%100;i=t+s-(o?100:0)}return n?i:1-i}function EP(t){return t%400===0||t%4===0&&t%100!==0}class DQ extends Zt{constructor(){super(...arguments);ve(this,"priority",130);ve(this,"incompatibleTokens",["Y","R","u","w","I","i","e","c","t","T"])}parse(n,r,i){const a=s=>({year:s,isTwoDigitYear:r==="yy"});switch(r){case"y":return tr(Yn(4,n),a);case"yo":return tr(i.ordinalNumber(n,{unit:"year"}),a);default:return tr(Yn(r.length,n),a)}}validate(n,r){return r.isTwoDigitYear||r.year>0}set(n,r,i){const a=n.getFullYear();if(i.isTwoDigitYear){const o=AP(i.year,a);return n.setFullYear(o,0,1),n.setHours(0,0,0,0),n}const s=!("era"in r)||r.era===1?i.year:1-i.year;return n.setFullYear(s,0,1),n.setHours(0,0,0,0),n}}class RQ extends Zt{constructor(){super(...arguments);ve(this,"priority",130);ve(this,"incompatibleTokens",["y","R","u","Q","q","M","L","I","d","D","i","t","T"])}parse(n,r,i){const a=s=>({year:s,isTwoDigitYear:r==="YY"});switch(r){case"Y":return tr(Yn(4,n),a);case"Yo":return tr(i.ordinalNumber(n,{unit:"year"}),a);default:return tr(Yn(r.length,n),a)}}validate(n,r){return r.isTwoDigitYear||r.year>0}set(n,r,i,a){const s=wb(n,a);if(i.isTwoDigitYear){const c=AP(i.year,s);return n.setFullYear(c,0,a.firstWeekContainsDate),n.setHours(0,0,0,0),Ao(n,a)}const o=!("era"in r)||r.era===1?i.year:1-i.year;return n.setFullYear(o,0,a.firstWeekContainsDate),n.setHours(0,0,0,0),Ao(n,a)}}class OQ extends Zt{constructor(){super(...arguments);ve(this,"priority",130);ve(this,"incompatibleTokens",["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"])}parse(n,r){return qm(r==="R"?4:r.length,n)}set(n,r,i){const a=Bn(n,0);return a.setFullYear(i,0,4),a.setHours(0,0,0,0),qd(a)}}class MQ extends Zt{constructor(){super(...arguments);ve(this,"priority",130);ve(this,"incompatibleTokens",["G","y","Y","R","w","I","i","e","c","t","T"])}parse(n,r){return qm(r==="u"?4:r.length,n)}set(n,r,i){return n.setFullYear(i,0,1),n.setHours(0,0,0,0),n}}class PQ extends Zt{constructor(){super(...arguments);ve(this,"priority",120);ve(this,"incompatibleTokens",["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"])}parse(n,r,i){switch(r){case"Q":case"QQ":return Yn(r.length,n);case"Qo":return i.ordinalNumber(n,{unit:"quarter"});case"QQQ":return i.quarter(n,{width:"abbreviated",context:"formatting"})||i.quarter(n,{width:"narrow",context:"formatting"});case"QQQQQ":return i.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return i.quarter(n,{width:"wide",context:"formatting"})||i.quarter(n,{width:"abbreviated",context:"formatting"})||i.quarter(n,{width:"narrow",context:"formatting"})}}validate(n,r){return r>=1&&r<=4}set(n,r,i){return n.setMonth((i-1)*3,1),n.setHours(0,0,0,0),n}}class kQ extends Zt{constructor(){super(...arguments);ve(this,"priority",120);ve(this,"incompatibleTokens",["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"])}parse(n,r,i){switch(r){case"q":case"qq":return Yn(r.length,n);case"qo":return i.ordinalNumber(n,{unit:"quarter"});case"qqq":return i.quarter(n,{width:"abbreviated",context:"standalone"})||i.quarter(n,{width:"narrow",context:"standalone"});case"qqqqq":return i.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return i.quarter(n,{width:"wide",context:"standalone"})||i.quarter(n,{width:"abbreviated",context:"standalone"})||i.quarter(n,{width:"narrow",context:"standalone"})}}validate(n,r){return r>=1&&r<=4}set(n,r,i){return n.setMonth((i-1)*3,1),n.setHours(0,0,0,0),n}}class NQ extends Zt{constructor(){super(...arguments);ve(this,"incompatibleTokens",["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]);ve(this,"priority",110)}parse(n,r,i){const a=s=>s-1;switch(r){case"M":return tr(Un(er.month,n),a);case"MM":return tr(Yn(2,n),a);case"Mo":return tr(i.ordinalNumber(n,{unit:"month"}),a);case"MMM":return i.month(n,{width:"abbreviated",context:"formatting"})||i.month(n,{width:"narrow",context:"formatting"});case"MMMMM":return i.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return i.month(n,{width:"wide",context:"formatting"})||i.month(n,{width:"abbreviated",context:"formatting"})||i.month(n,{width:"narrow",context:"formatting"})}}validate(n,r){return r>=0&&r<=11}set(n,r,i){return n.setMonth(i,1),n.setHours(0,0,0,0),n}}class LQ extends Zt{constructor(){super(...arguments);ve(this,"priority",110);ve(this,"incompatibleTokens",["Y","R","q","Q","M","w","I","D","i","e","c","t","T"])}parse(n,r,i){const a=s=>s-1;switch(r){case"L":return tr(Un(er.month,n),a);case"LL":return tr(Yn(2,n),a);case"Lo":return tr(i.ordinalNumber(n,{unit:"month"}),a);case"LLL":return i.month(n,{width:"abbreviated",context:"standalone"})||i.month(n,{width:"narrow",context:"standalone"});case"LLLLL":return i.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return i.month(n,{width:"wide",context:"standalone"})||i.month(n,{width:"abbreviated",context:"standalone"})||i.month(n,{width:"narrow",context:"standalone"})}}validate(n,r){return r>=0&&r<=11}set(n,r,i){return n.setMonth(i,1),n.setHours(0,0,0,0),n}}function BQ(t,e,n){const r=tt(t,n==null?void 0:n.in),i=_b(r,n)-e;return r.setDate(r.getDate()-i*7),tt(r,n==null?void 0:n.in)}class FQ extends Zt{constructor(){super(...arguments);ve(this,"priority",100);ve(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","i","t","T"])}parse(n,r,i){switch(r){case"w":return Un(er.week,n);case"wo":return i.ordinalNumber(n,{unit:"week"});default:return Yn(r.length,n)}}validate(n,r){return r>=1&&r<=53}set(n,r,i,a){return Ao(BQ(n,i,a),a)}}function VQ(t,e,n){const r=tt(t,n==null?void 0:n.in),i=gP(r,n)-e;return r.setDate(r.getDate()-i*7),r}class jQ extends Zt{constructor(){super(...arguments);ve(this,"priority",100);ve(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"])}parse(n,r,i){switch(r){case"I":return Un(er.week,n);case"Io":return i.ordinalNumber(n,{unit:"week"});default:return Yn(r.length,n)}}validate(n,r){return r>=1&&r<=53}set(n,r,i){return qd(VQ(n,i))}}const UQ=[31,28,31,30,31,30,31,31,30,31,30,31],HQ=[31,29,31,30,31,30,31,31,30,31,30,31];class zQ extends Zt{constructor(){super(...arguments);ve(this,"priority",90);ve(this,"subPriority",1);ve(this,"incompatibleTokens",["Y","R","q","Q","w","I","D","i","e","c","t","T"])}parse(n,r,i){switch(r){case"d":return Un(er.date,n);case"do":return i.ordinalNumber(n,{unit:"date"});default:return Yn(r.length,n)}}validate(n,r){const i=n.getFullYear(),a=EP(i),s=n.getMonth();return a?r>=1&&r<=HQ[s]:r>=1&&r<=UQ[s]}set(n,r,i){return n.setDate(i),n.setHours(0,0,0,0),n}}class $Q extends Zt{constructor(){super(...arguments);ve(this,"priority",90);ve(this,"subpriority",1);ve(this,"incompatibleTokens",["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"])}parse(n,r,i){switch(r){case"D":case"DD":return Un(er.dayOfYear,n);case"Do":return i.ordinalNumber(n,{unit:"date"});default:return Yn(r.length,n)}}validate(n,r){const i=n.getFullYear();return EP(i)?r>=1&&r<=366:r>=1&&r<=365}set(n,r,i){return n.setMonth(0,i),n.setHours(0,0,0,0),n}}function Ab(t,e,n){var p,g,y,x;const r=au(),i=(n==null?void 0:n.weekStartsOn)??((g=(p=n==null?void 0:n.locale)==null?void 0:p.options)==null?void 0:g.weekStartsOn)??r.weekStartsOn??((x=(y=r.locale)==null?void 0:y.options)==null?void 0:x.weekStartsOn)??0,a=tt(t,n==null?void 0:n.in),s=a.getDay(),c=(e%7+7)%7,d=7-i,f=e<0||e>6?e-(s+d)%7:(c+d)%7-(s+d)%7;return ny(a,f,n)}class GQ extends Zt{constructor(){super(...arguments);ve(this,"priority",90);ve(this,"incompatibleTokens",["D","i","e","c","t","T"])}parse(n,r,i){switch(r){case"E":case"EE":case"EEE":return i.day(n,{width:"abbreviated",context:"formatting"})||i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"});case"EEEEE":return i.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"});case"EEEE":default:return i.day(n,{width:"wide",context:"formatting"})||i.day(n,{width:"abbreviated",context:"formatting"})||i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"})}}validate(n,r){return r>=0&&r<=6}set(n,r,i,a){return n=Ab(n,i,a),n.setHours(0,0,0,0),n}}class WQ extends Zt{constructor(){super(...arguments);ve(this,"priority",90);ve(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"])}parse(n,r,i,a){const s=o=>{const c=Math.floor((o-1)/7)*7;return(o+a.weekStartsOn+6)%7+c};switch(r){case"e":case"ee":return tr(Yn(r.length,n),s);case"eo":return tr(i.ordinalNumber(n,{unit:"day"}),s);case"eee":return i.day(n,{width:"abbreviated",context:"formatting"})||i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"});case"eeeee":return i.day(n,{width:"narrow",context:"formatting"});case"eeeeee":return i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"});case"eeee":default:return i.day(n,{width:"wide",context:"formatting"})||i.day(n,{width:"abbreviated",context:"formatting"})||i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"})}}validate(n,r){return r>=0&&r<=6}set(n,r,i,a){return n=Ab(n,i,a),n.setHours(0,0,0,0),n}}class YQ extends Zt{constructor(){super(...arguments);ve(this,"priority",90);ve(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"])}parse(n,r,i,a){const s=o=>{const c=Math.floor((o-1)/7)*7;return(o+a.weekStartsOn+6)%7+c};switch(r){case"c":case"cc":return tr(Yn(r.length,n),s);case"co":return tr(i.ordinalNumber(n,{unit:"day"}),s);case"ccc":return i.day(n,{width:"abbreviated",context:"standalone"})||i.day(n,{width:"short",context:"standalone"})||i.day(n,{width:"narrow",context:"standalone"});case"ccccc":return i.day(n,{width:"narrow",context:"standalone"});case"cccccc":return i.day(n,{width:"short",context:"standalone"})||i.day(n,{width:"narrow",context:"standalone"});case"cccc":default:return i.day(n,{width:"wide",context:"standalone"})||i.day(n,{width:"abbreviated",context:"standalone"})||i.day(n,{width:"short",context:"standalone"})||i.day(n,{width:"narrow",context:"standalone"})}}validate(n,r){return r>=0&&r<=6}set(n,r,i,a){return n=Ab(n,i,a),n.setHours(0,0,0,0),n}}function qQ(t,e){const n=tt(t,e==null?void 0:e.in).getDay();return n===0?7:n}function XQ(t,e,n){const r=tt(t,n==null?void 0:n.in),i=qQ(r,n),a=e-i;return ny(r,a,n)}class KQ extends Zt{constructor(){super(...arguments);ve(this,"priority",90);ve(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"])}parse(n,r,i){const a=s=>s===0?7:s;switch(r){case"i":case"ii":return Yn(r.length,n);case"io":return i.ordinalNumber(n,{unit:"day"});case"iii":return tr(i.day(n,{width:"abbreviated",context:"formatting"})||i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"}),a);case"iiiii":return tr(i.day(n,{width:"narrow",context:"formatting"}),a);case"iiiiii":return tr(i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"}),a);case"iiii":default:return tr(i.day(n,{width:"wide",context:"formatting"})||i.day(n,{width:"abbreviated",context:"formatting"})||i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"}),a)}}validate(n,r){return r>=1&&r<=7}set(n,r,i){return n=XQ(n,i),n.setHours(0,0,0,0),n}}class QQ extends Zt{constructor(){super(...arguments);ve(this,"priority",80);ve(this,"incompatibleTokens",["b","B","H","k","t","T"])}parse(n,r,i){switch(r){case"a":case"aa":case"aaa":return i.dayPeriod(n,{width:"abbreviated",context:"formatting"})||i.dayPeriod(n,{width:"narrow",context:"formatting"});case"aaaaa":return i.dayPeriod(n,{width:"narrow",context:"formatting"});case"aaaa":default:return i.dayPeriod(n,{width:"wide",context:"formatting"})||i.dayPeriod(n,{width:"abbreviated",context:"formatting"})||i.dayPeriod(n,{width:"narrow",context:"formatting"})}}set(n,r,i){return n.setHours(bb(i),0,0,0),n}}class ZQ extends Zt{constructor(){super(...arguments);ve(this,"priority",80);ve(this,"incompatibleTokens",["a","B","H","k","t","T"])}parse(n,r,i){switch(r){case"b":case"bb":case"bbb":return i.dayPeriod(n,{width:"abbreviated",context:"formatting"})||i.dayPeriod(n,{width:"narrow",context:"formatting"});case"bbbbb":return i.dayPeriod(n,{width:"narrow",context:"formatting"});case"bbbb":default:return i.dayPeriod(n,{width:"wide",context:"formatting"})||i.dayPeriod(n,{width:"abbreviated",context:"formatting"})||i.dayPeriod(n,{width:"narrow",context:"formatting"})}}set(n,r,i){return n.setHours(bb(i),0,0,0),n}}class JQ extends Zt{constructor(){super(...arguments);ve(this,"priority",80);ve(this,"incompatibleTokens",["a","b","t","T"])}parse(n,r,i){switch(r){case"B":case"BB":case"BBB":return i.dayPeriod(n,{width:"abbreviated",context:"formatting"})||i.dayPeriod(n,{width:"narrow",context:"formatting"});case"BBBBB":return i.dayPeriod(n,{width:"narrow",context:"formatting"});case"BBBB":default:return i.dayPeriod(n,{width:"wide",context:"formatting"})||i.dayPeriod(n,{width:"abbreviated",context:"formatting"})||i.dayPeriod(n,{width:"narrow",context:"formatting"})}}set(n,r,i){return n.setHours(bb(i),0,0,0),n}}class eZ extends Zt{constructor(){super(...arguments);ve(this,"priority",70);ve(this,"incompatibleTokens",["H","K","k","t","T"])}parse(n,r,i){switch(r){case"h":return Un(er.hour12h,n);case"ho":return i.ordinalNumber(n,{unit:"hour"});default:return Yn(r.length,n)}}validate(n,r){return r>=1&&r<=12}set(n,r,i){const a=n.getHours()>=12;return a&&i<12?n.setHours(i+12,0,0,0):!a&&i===12?n.setHours(0,0,0,0):n.setHours(i,0,0,0),n}}class tZ extends Zt{constructor(){super(...arguments);ve(this,"priority",70);ve(this,"incompatibleTokens",["a","b","h","K","k","t","T"])}parse(n,r,i){switch(r){case"H":return Un(er.hour23h,n);case"Ho":return i.ordinalNumber(n,{unit:"hour"});default:return Yn(r.length,n)}}validate(n,r){return r>=0&&r<=23}set(n,r,i){return n.setHours(i,0,0,0),n}}class nZ extends Zt{constructor(){super(...arguments);ve(this,"priority",70);ve(this,"incompatibleTokens",["h","H","k","t","T"])}parse(n,r,i){switch(r){case"K":return Un(er.hour11h,n);case"Ko":return i.ordinalNumber(n,{unit:"hour"});default:return Yn(r.length,n)}}validate(n,r){return r>=0&&r<=11}set(n,r,i){return n.getHours()>=12&&i<12?n.setHours(i+12,0,0,0):n.setHours(i,0,0,0),n}}class rZ extends Zt{constructor(){super(...arguments);ve(this,"priority",70);ve(this,"incompatibleTokens",["a","b","h","H","K","t","T"])}parse(n,r,i){switch(r){case"k":return Un(er.hour24h,n);case"ko":return i.ordinalNumber(n,{unit:"hour"});default:return Yn(r.length,n)}}validate(n,r){return r>=1&&r<=24}set(n,r,i){const a=i<=24?i%24:i;return n.setHours(a,0,0,0),n}}class iZ extends Zt{constructor(){super(...arguments);ve(this,"priority",60);ve(this,"incompatibleTokens",["t","T"])}parse(n,r,i){switch(r){case"m":return Un(er.minute,n);case"mo":return i.ordinalNumber(n,{unit:"minute"});default:return Yn(r.length,n)}}validate(n,r){return r>=0&&r<=59}set(n,r,i){return n.setMinutes(i,0,0),n}}class aZ extends Zt{constructor(){super(...arguments);ve(this,"priority",50);ve(this,"incompatibleTokens",["t","T"])}parse(n,r,i){switch(r){case"s":return Un(er.second,n);case"so":return i.ordinalNumber(n,{unit:"second"});default:return Yn(r.length,n)}}validate(n,r){return r>=0&&r<=59}set(n,r,i){return n.setSeconds(i,0),n}}class sZ extends Zt{constructor(){super(...arguments);ve(this,"priority",30);ve(this,"incompatibleTokens",["t","T"])}parse(n,r){const i=a=>Math.trunc(a*Math.pow(10,-r.length+3));return tr(Yn(r.length,n),i)}set(n,r,i){return n.setMilliseconds(i),n}}class oZ extends Zt{constructor(){super(...arguments);ve(this,"priority",10);ve(this,"incompatibleTokens",["t","T","x"])}parse(n,r){switch(r){case"X":return ws(xs.basicOptionalMinutes,n);case"XX":return ws(xs.basic,n);case"XXXX":return ws(xs.basicOptionalSeconds,n);case"XXXXX":return ws(xs.extendedOptionalSeconds,n);case"XXX":default:return ws(xs.extended,n)}}set(n,r,i){return r.timestampIsSet?n:Bn(n,n.getTime()-Wm(n)-i)}}class lZ extends Zt{constructor(){super(...arguments);ve(this,"priority",10);ve(this,"incompatibleTokens",["t","T","X"])}parse(n,r){switch(r){case"x":return ws(xs.basicOptionalMinutes,n);case"xx":return ws(xs.basic,n);case"xxxx":return ws(xs.basicOptionalSeconds,n);case"xxxxx":return ws(xs.extendedOptionalSeconds,n);case"xxx":default:return ws(xs.extended,n)}}set(n,r,i){return r.timestampIsSet?n:Bn(n,n.getTime()-Wm(n)-i)}}class cZ extends Zt{constructor(){super(...arguments);ve(this,"priority",40);ve(this,"incompatibleTokens","*")}parse(n){return bP(n)}set(n,r,i){return[Bn(n,i*1e3),{timestampIsSet:!0}]}}class uZ extends Zt{constructor(){super(...arguments);ve(this,"priority",20);ve(this,"incompatibleTokens","*")}parse(n){return bP(n)}set(n,r,i){return[Bn(n,i),{timestampIsSet:!0}]}}const dZ={G:new IQ,y:new DQ,Y:new RQ,R:new OQ,u:new MQ,Q:new PQ,q:new kQ,M:new NQ,L:new LQ,w:new FQ,I:new jQ,d:new zQ,D:new $Q,E:new GQ,e:new WQ,c:new YQ,i:new KQ,a:new QQ,b:new ZQ,B:new JQ,h:new eZ,H:new tZ,K:new nZ,k:new rZ,m:new iZ,s:new aZ,S:new sZ,X:new oZ,x:new lZ,t:new cZ,T:new uZ},fZ=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,hZ=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,pZ=/^'([^]*?)'?$/,gZ=/''/g,mZ=/\S/,yZ=/[a-zA-Z]/;function vZ(t,e,n,r){var A,E,T,C,D,k,B,O;const i=()=>Bn((r==null?void 0:r.in)||n,NaN),a=bQ(),s=(r==null?void 0:r.locale)??a.locale??xb,o=(r==null?void 0:r.firstWeekContainsDate)??((E=(A=r==null?void 0:r.locale)==null?void 0:A.options)==null?void 0:E.firstWeekContainsDate)??a.firstWeekContainsDate??((C=(T=a.locale)==null?void 0:T.options)==null?void 0:C.firstWeekContainsDate)??1,c=(r==null?void 0:r.weekStartsOn)??((k=(D=r==null?void 0:r.locale)==null?void 0:D.options)==null?void 0:k.weekStartsOn)??a.weekStartsOn??((O=(B=a.locale)==null?void 0:B.options)==null?void 0:O.weekStartsOn)??0;if(!e)return t?i():tt(n,r==null?void 0:r.in);const d={firstWeekContainsDate:o,weekStartsOn:c,locale:s},f=[new CQ(r==null?void 0:r.in,n)],p=e.match(hZ).map(I=>{const R=I[0];if(R in Ym){const V=Ym[R];return V(I,s.formatLong)}return I}).join("").match(fZ),g=[];for(let I of p){!(r!=null&&r.useAdditionalWeekYearTokens)&&vP(I)&&bw(I,e,t),!(r!=null&&r.useAdditionalDayOfYearTokens)&&yP(I)&&bw(I,e,t);const R=I[0],V=dZ[R];if(V){const{incompatibleTokens:L}=V;if(Array.isArray(L)){const F=g.find(q=>L.includes(q.token)||q.token===R);if(F)throw new RangeError(`The format string mustn't contain \`${F.fullToken}\` and \`${I}\` at the same time`)}else if(V.incompatibleTokens==="*"&&g.length>0)throw new RangeError(`The format string mustn't contain \`${I}\` and any other token at the same time`);g.push({token:R,fullToken:I});const P=V.run(t,I,s.match,d);if(!P)return i();f.push(P.setter),t=P.rest}else{if(R.match(yZ))throw new RangeError("Format string contains an unescaped latin alphabet character `"+R+"`");if(I==="''"?I="'":R==="'"&&(I=xZ(I)),t.indexOf(I)===0)t=t.slice(I.length);else return i()}}if(t.length>0&&mZ.test(t))return i();const y=f.map(I=>I.priority).sort((I,R)=>R-I).filter((I,R,V)=>V.indexOf(I)===R).map(I=>f.filter(R=>R.priority===I).sort((R,V)=>V.subPriority-R.subPriority)).map(I=>I[0]);let x=tt(n,r==null?void 0:r.in);if(isNaN(+x))return i();const _={};for(const I of y){if(!I.validate(x,d))return i();const R=I.set(x,_,d);Array.isArray(R)?(x=R[0],Object.assign(_,R[1])):x=R}return x}function xZ(t){return t.match(pZ)[1].replace(gZ,"'")}function wZ(t,e,n){const r=tt(t,n==null?void 0:n.in);return r.setDate(e),r}function _Z(t,e,n){const r=tt(t,n==null?void 0:n.in);return r.setHours(e),r}function bZ(t,e,n){const r=tt(t,n==null?void 0:n.in);return r.setMinutes(e),r}function AZ(t,e,n){const r=tt(t,n==null?void 0:n.in),i=r.getFullYear(),a=r.getDate(),s=Bn(t,0);s.setFullYear(i,e,15),s.setHours(0,0,0,0);const o=wP(s);return r.setMonth(e,Math.min(a,o)),r}function EZ(t,e,n){const r=tt(t,n==null?void 0:n.in);return r.setSeconds(e),r}function SZ(t,e,n){const r=tt(t,n==null?void 0:n.in);return r.setMilliseconds(e),r}function TZ(t,e,n){const r=tt(t,n==null?void 0:n.in);return isNaN(+r)?Bn(t,NaN):(r.setFullYear(e),r)}function CZ(t,e){const n=tt(t,e==null?void 0:e.in);return n.setDate(1),n.setHours(0,0,0,0),n}function IZ(t,e){const n=tt(t,e==null?void 0:e.in),r=n.getMonth();return n.setFullYear(n.getFullYear(),r+1,0),n.setHours(23,59,59,999),n}function DZ(t,e,n){const r=+tt(t,n==null?void 0:n.in),[i,a]=[+tt(e.start,n==null?void 0:n.in),+tt(e.end,n==null?void 0:n.in)].sort((s,o)=>s-o);return r>=i&&r<=a}const RZ={y:{sectionType:"year",contentType:"digit",maxLength:4},yy:"year",yyy:{sectionType:"year",contentType:"digit",maxLength:4},yyyy:"year",M:{sectionType:"month",contentType:"digit",maxLength:2},MM:"month",MMMM:{sectionType:"month",contentType:"letter"},MMM:{sectionType:"month",contentType:"letter"},L:{sectionType:"month",contentType:"digit",maxLength:2},LL:"month",LLL:{sectionType:"month",contentType:"letter"},LLLL:{sectionType:"month",contentType:"letter"},d:{sectionType:"day",contentType:"digit",maxLength:2},dd:"day",do:{sectionType:"day",contentType:"digit-with-letter"},E:{sectionType:"weekDay",contentType:"letter"},EE:{sectionType:"weekDay",contentType:"letter"},EEE:{sectionType:"weekDay",contentType:"letter"},EEEE:{sectionType:"weekDay",contentType:"letter"},EEEEE:{sectionType:"weekDay",contentType:"letter"},i:{sectionType:"weekDay",contentType:"digit",maxLength:1},ii:"weekDay",iii:{sectionType:"weekDay",contentType:"letter"},iiii:{sectionType:"weekDay",contentType:"letter"},e:{sectionType:"weekDay",contentType:"digit",maxLength:1},ee:"weekDay",eee:{sectionType:"weekDay",contentType:"letter"},eeee:{sectionType:"weekDay",contentType:"letter"},eeeee:{sectionType:"weekDay",contentType:"letter"},eeeeee:{sectionType:"weekDay",contentType:"letter"},c:{sectionType:"weekDay",contentType:"digit",maxLength:1},cc:"weekDay",ccc:{sectionType:"weekDay",contentType:"letter"},cccc:{sectionType:"weekDay",contentType:"letter"},ccccc:{sectionType:"weekDay",contentType:"letter"},cccccc:{sectionType:"weekDay",contentType:"letter"},a:"meridiem",aa:"meridiem",aaa:"meridiem",H:{sectionType:"hours",contentType:"digit",maxLength:2},HH:"hours",h:{sectionType:"hours",contentType:"digit",maxLength:2},hh:"hours",m:{sectionType:"minutes",contentType:"digit",maxLength:2},mm:"minutes",s:{sectionType:"seconds",contentType:"digit",maxLength:2},ss:"seconds"},OZ={year:"yyyy",month:"LLLL",monthShort:"MMM",dayOfMonth:"d",dayOfMonthFull:"do",weekday:"EEEE",weekdayShort:"EEEEEE",hours24h:"HH",hours12h:"hh",meridiem:"aa",minutes:"mm",seconds:"ss",fullDate:"PP",keyboardDate:"P",shortDate:"MMM d",normalDate:"d MMMM",normalDateWithWeekday:"EEE, MMM d",fullTime12h:"hh:mm aa",fullTime24h:"HH:mm",keyboardDateTime12h:"P hh:mm aa",keyboardDateTime24h:"P HH:mm"};class MZ{constructor(e){ve(this,"isMUIAdapter",!0);ve(this,"isTimezoneCompatible",!1);ve(this,"formatTokenMap",RZ);ve(this,"escapedCharacters",{start:"'",end:"'"});ve(this,"date",e=>typeof e>"u"?new Date:e===null?null:new Date(e));ve(this,"getInvalidDate",()=>new Date("Invalid Date"));ve(this,"getTimezone",()=>"default");ve(this,"setTimezone",e=>e);ve(this,"toJsDate",e=>e);ve(this,"getCurrentLocaleCode",()=>this.locale.code);ve(this,"is12HourCycleInCurrentLocale",()=>/a/.test(this.locale.formatLong.time({width:"short"})));ve(this,"expandFormat",e=>{const n=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g;return e.match(n).map(r=>{const i=r[0];if(i==="p"||i==="P"){const a=this.longFormatters[i];return a(r,this.locale.formatLong)}return r}).join("")});ve(this,"formatNumber",e=>e);ve(this,"getDayOfWeek",e=>e.getDay()+1);const{locale:n,formats:r,longFormatters:i,lib:a}=e;this.locale=n,this.formats=H({},OZ,r),this.longFormatters=i,this.lib=a||"date-fns"}}class PZ extends MZ{constructor({locale:n,formats:r}={}){super({locale:n??xb,formats:r,longFormatters:Ym});ve(this,"parse",(n,r)=>n===""?null:vZ(n,r,new Date,{locale:this.locale}));ve(this,"isValid",n=>n==null?!1:xP(n));ve(this,"format",(n,r)=>this.formatByString(n,this.formats[r]));ve(this,"formatByString",(n,r)=>lQ(n,r,{locale:this.locale}));ve(this,"isEqual",(n,r)=>n===null&&r===null?!0:n===null||r===null?!1:yQ(n,r));ve(this,"isSameYear",(n,r)=>xQ(n,r));ve(this,"isSameMonth",(n,r)=>wQ(n,r));ve(this,"isSameDay",(n,r)=>vQ(n,r));ve(this,"isSameHour",(n,r)=>_Q(n,r));ve(this,"isAfter",(n,r)=>Xx(n,r));ve(this,"isAfterYear",(n,r)=>Xx(n,AD(r)));ve(this,"isAfterDay",(n,r)=>Xx(n,bD(r)));ve(this,"isBefore",(n,r)=>Kx(n,r));ve(this,"isBeforeYear",(n,r)=>Kx(n,this.startOfYear(r)));ve(this,"isBeforeDay",(n,r)=>Kx(n,this.startOfDay(r)));ve(this,"isWithinRange",(n,[r,i])=>DZ(n,{start:r,end:i}));ve(this,"startOfYear",n=>hP(n));ve(this,"startOfMonth",n=>CZ(n));ve(this,"startOfWeek",n=>Ao(n,{locale:this.locale}));ve(this,"startOfDay",n=>w0(n));ve(this,"endOfYear",n=>AD(n));ve(this,"endOfMonth",n=>IZ(n));ve(this,"endOfWeek",n=>gK(n,{locale:this.locale}));ve(this,"endOfDay",n=>bD(n));ve(this,"addYears",(n,r)=>hK(n,r));ve(this,"addMonths",(n,r)=>dP(n,r));ve(this,"addWeeks",(n,r)=>fK(n,r));ve(this,"addDays",(n,r)=>ny(n,r));ve(this,"addHours",(n,r)=>dK(n,r));ve(this,"addMinutes",(n,r)=>uK(n,r));ve(this,"addSeconds",(n,r)=>cK(n,r));ve(this,"getYear",n=>mQ(n));ve(this,"getMonth",n=>hQ(n));ve(this,"getDate",n=>uQ(n));ve(this,"getHours",n=>dQ(n));ve(this,"getMinutes",n=>fQ(n));ve(this,"getSeconds",n=>pQ(n));ve(this,"getMilliseconds",n=>gQ(n));ve(this,"setYear",(n,r)=>TZ(n,r));ve(this,"setMonth",(n,r)=>AZ(n,r));ve(this,"setDate",(n,r)=>wZ(n,r));ve(this,"setHours",(n,r)=>_Z(n,r));ve(this,"setMinutes",(n,r)=>bZ(n,r));ve(this,"setSeconds",(n,r)=>EZ(n,r));ve(this,"setMilliseconds",(n,r)=>SZ(n,r));ve(this,"getDaysInMonth",n=>wP(n));ve(this,"getWeekArray",n=>{const r=this.startOfWeek(this.startOfMonth(n)),i=this.endOfWeek(this.endOfMonth(n));let a=0,s=r;const o=[];for(;this.isBefore(s,i);){const c=Math.floor(a/7);o[c]=o[c]||[],o[c].push(s),s=this.addDays(s,1),a+=1}return o});ve(this,"getWeekNumber",n=>_b(n,{locale:this.locale}));ve(this,"getYearRange",([n,r])=>{const i=this.startOfYear(n),a=this.endOfYear(r),s=[];let o=i;for(;this.isBefore(o,a);)s.push(o),o=this.addYears(o,1);return s})}}const kZ={lessThanXSeconds:{one:"1秒未満",other:"{{count}}秒未満",oneWithSuffix:"約1秒",otherWithSuffix:"約{{count}}秒"},xSeconds:{one:"1秒",other:"{{count}}秒"},halfAMinute:"30秒",lessThanXMinutes:{one:"1分未満",other:"{{count}}分未満",oneWithSuffix:"約1分",otherWithSuffix:"約{{count}}分"},xMinutes:{one:"1分",other:"{{count}}分"},aboutXHours:{one:"約1時間",other:"約{{count}}時間"},xHours:{one:"1時間",other:"{{count}}時間"},xDays:{one:"1日",other:"{{count}}日"},aboutXWeeks:{one:"約1週間",other:"約{{count}}週間"},xWeeks:{one:"1週間",other:"{{count}}週間"},aboutXMonths:{one:"約1か月",other:"約{{count}}か月"},xMonths:{one:"1か月",other:"{{count}}か月"},aboutXYears:{one:"約1年",other:"約{{count}}年"},xYears:{one:"1年",other:"{{count}}年"},overXYears:{one:"1年以上",other:"{{count}}年以上"},almostXYears:{one:"1年近く",other:"{{count}}年近く"}},NZ=(t,e,n)=>{n=n||{};let r;const i=kZ[t];return typeof i=="string"?r=i:e===1?n.addSuffix&&i.oneWithSuffix?r=i.oneWithSuffix:r=i.one:n.addSuffix&&i.otherWithSuffix?r=i.otherWithSuffix.replace("{{count}}",String(e)):r=i.other.replace("{{count}}",String(e)),n.addSuffix?n.comparison&&n.comparison>0?r+"後":r+"前":r},LZ={full:"y年M月d日EEEE",long:"y年M月d日",medium:"y/MM/dd",short:"y/MM/dd"},BZ={full:"H時mm分ss秒 zzzz",long:"H:mm:ss z",medium:"H:mm:ss",short:"H:mm"},FZ={full:"{{date}} {{time}}",long:"{{date}} {{time}}",medium:"{{date}} {{time}}",short:"{{date}} {{time}}"},VZ={date:Pd({formats:LZ,defaultWidth:"full"}),time:Pd({formats:BZ,defaultWidth:"full"}),dateTime:Pd({formats:FZ,defaultWidth:"full"})},jZ={lastWeek:"先週のeeeeのp",yesterday:"昨日のp",today:"今日のp",tomorrow:"明日のp",nextWeek:"翌週のeeeeのp",other:"P"},UZ=(t,e,n,r)=>jZ[t],HZ={narrow:["BC","AC"],abbreviated:["紀元前","西暦"],wide:["紀元前","西暦"]},zZ={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["第1四半期","第2四半期","第3四半期","第4四半期"]},$Z={narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],abbreviated:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],wide:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"]},GZ={narrow:["日","月","火","水","木","金","土"],short:["日","月","火","水","木","金","土"],abbreviated:["日","月","火","水","木","金","土"],wide:["日曜日","月曜日","火曜日","水曜日","木曜日","金曜日","土曜日"]},WZ={narrow:{am:"午前",pm:"午後",midnight:"深夜",noon:"正午",morning:"朝",afternoon:"午後",evening:"夜",night:"深夜"},abbreviated:{am:"午前",pm:"午後",midnight:"深夜",noon:"正午",morning:"朝",afternoon:"午後",evening:"夜",night:"深夜"},wide:{am:"午前",pm:"午後",midnight:"深夜",noon:"正午",morning:"朝",afternoon:"午後",evening:"夜",night:"深夜"}},YZ={narrow:{am:"午前",pm:"午後",midnight:"深夜",noon:"正午",morning:"朝",afternoon:"午後",evening:"夜",night:"深夜"},abbreviated:{am:"午前",pm:"午後",midnight:"深夜",noon:"正午",morning:"朝",afternoon:"午後",evening:"夜",night:"深夜"},wide:{am:"午前",pm:"午後",midnight:"深夜",noon:"正午",morning:"朝",afternoon:"午後",evening:"夜",night:"深夜"}},qZ=(t,e)=>{const n=Number(t);switch(String(e==null?void 0:e.unit)){case"year":return`${n}年`;case"quarter":return`第${n}四半期`;case"month":return`${n}月`;case"week":return`第${n}週`;case"date":return`${n}日`;case"hour":return`${n}時`;case"minute":return`${n}分`;case"second":return`${n}秒`;default:return`${n}`}},XZ={ordinalNumber:qZ,era:ys({values:HZ,defaultWidth:"wide"}),quarter:ys({values:zZ,defaultWidth:"wide",argumentCallback:t=>Number(t)-1}),month:ys({values:$Z,defaultWidth:"wide"}),day:ys({values:GZ,defaultWidth:"wide"}),dayPeriod:ys({values:WZ,defaultWidth:"wide",formattingValues:YZ,defaultFormattingWidth:"wide"})},KZ=/^第?\d+(年|四半期|月|週|日|時|分|秒)?/i,QZ=/\d+/i,ZZ={narrow:/^(B\.?C\.?|A\.?D\.?)/i,abbreviated:/^(紀元[前後]|西暦)/i,wide:/^(紀元[前後]|西暦)/i},JZ={narrow:[/^B/i,/^A/i],any:[/^(紀元前)/i,/^(西暦|紀元後)/i]},eJ={narrow:/^[1234]/i,abbreviated:/^Q[1234]/i,wide:/^第[1234一二三四１２３４]四半期/i},tJ={any:[/(1|一|１)/i,/(2|二|２)/i,/(3|三|３)/i,/(4|四|４)/i]},nJ={narrow:/^([123456789]|1[012])/,abbreviated:/^([123456789]|1[012])月/i,wide:/^([123456789]|1[012])月/i},rJ={any:[/^1\D/,/^2/,/^3/,/^4/,/^5/,/^6/,/^7/,/^8/,/^9/,/^10/,/^11/,/^12/]},iJ={narrow:/^[日月火水木金土]/,short:/^[日月火水木金土]/,abbreviated:/^[日月火水木金土]/,wide:/^[日月火水木金土]曜日/},aJ={any:[/^日/,/^月/,/^火/,/^水/,/^木/,/^金/,/^土/]},sJ={any:/^(AM|PM|午前|午後|正午|深夜|真夜中|夜|朝)/i},oJ={any:{am:/^(A|午前)/i,pm:/^(P|午後)/i,midnight:/^深夜|真夜中/i,noon:/^正午/i,morning:/^朝/i,afternoon:/^午後/i,evening:/^夜/i,night:/^深夜/i}},lJ={ordinalNumber:fP({matchPattern:KZ,parsePattern:QZ,valueCallback:function(t){return parseInt(t,10)}}),era:vs({matchPatterns:ZZ,defaultMatchWidth:"wide",parsePatterns:JZ,defaultParseWidth:"any"}),quarter:vs({matchPatterns:eJ,defaultMatchWidth:"wide",parsePatterns:tJ,defaultParseWidth:"any",valueCallback:t=>t+1}),month:vs({matchPatterns:nJ,defaultMatchWidth:"wide",parsePatterns:rJ,defaultParseWidth:"any"}),day:vs({matchPatterns:iJ,defaultMatchWidth:"wide",parsePatterns:aJ,defaultParseWidth:"any"}),dayPeriod:vs({matchPatterns:sJ,defaultMatchWidth:"any",parsePatterns:oJ,defaultParseWidth:"any"})},cJ={code:"ja",formatDistance:NZ,formatLong:VZ,formatRelative:UZ,localize:XZ,match:lJ,options:{weekStartsOn:0,firstWeekContainsDate:1}};function uJ(){return{validate:M.useCallback((e,n,r,i=[])=>{if(!e)throw new Error("日時を選択してください");if(e>new Date)throw new Error("未来の日時は設定できません");if(!Fm(n))throw new Error("無効なステータスです");if((i||[]).some(o=>{var d;const c=(d=o==null?void 0:o.changedAt)!=null&&d.toDate?o.changedAt.toDate():o!=null&&o.changedAt?new Date(o.changedAt):null;return c?Math.abs(c-e)<6e4:!1}))throw new Error("同じ日時の履歴が既に存在します")},[])}}const dJ=({open:t,onClose:e,onAdd:n,bookId:r,existingHistory:i=[],currentBookStatus:a=null})=>{const[s,o]=M.useState(new Date),[c,d]=M.useState(ut.READING),[f,p]=M.useState(""),[g,y]=M.useState(!1),[x,_]=M.useState(""),{validate:A}=uJ(),E=()=>Object.values(ut).filter(D=>D!==c);Ci.useEffect(()=>{f===c&&p("")},[c,f]),Ci.useEffect(()=>{t&&p(a&&a!==c?a:"")},[t,a,c]);const T=async()=>{_(""),y(!0);try{A(s,c,f,i),await n(s,c,f,i),C()}catch(D){_(D.message)}finally{y(!1)}},C=()=>{o(new Date),d(ut.READING),p(""),_(""),y(!1),e()};return v.jsx(ZM,{dateAdapter:PZ,adapterLocale:cJ,children:v.jsxs($a,{open:t,onClose:C,maxWidth:"sm",fullWidth:!0,children:[v.jsx(Ds,{children:"📝 ステータス履歴を追加"}),v.jsx(Ga,{children:v.jsxs(re,{sx:{display:"flex",flexDirection:"column",gap:2,mt:1},children:[v.jsx(sK,{label:"日時",value:s,onChange:D=>o(D),maxDateTime:new Date,slotProps:{textField:{fullWidth:!0}}}),v.jsxs(Si,{fullWidth:!0,children:[v.jsx(xa,{children:"ステータス"}),v.jsx(Ua,{value:c,onChange:D=>d(D.target.value),label:"ステータス",children:Object.entries(Bm).map(([D,k])=>v.jsx(pn,{value:D,children:k},D))})]}),v.jsxs(Si,{fullWidth:!0,children:[v.jsx(xa,{children:"前のステータス"}),v.jsxs(Ua,{value:f,onChange:D=>p(D.target.value),label:"前のステータス",children:[v.jsx(pn,{value:"",children:v.jsx("em",{children:"なし"})}),E().map(D=>v.jsx(pn,{value:D,children:Bm[D]},D))]})]}),x&&v.jsx(te,{color:"error",variant:"body2",children:x})]})}),v.jsxs(Wa,{children:[v.jsx(Ke,{onClick:C,disabled:g,children:"キャンセル"}),v.jsx(Ke,{onClick:T,variant:"contained",disabled:g,children:g?"保存中...":"保存"})]})]})})},fJ=({history:t=[],loading:e=!1,error:n=null,importantDates:r={},readingDuration:i=null,showAddButton:a=!1,bookId:s=null,onAddHistory:o=null,currentBookStatus:c=null})=>{const[d,f]=M.useState(!1),p=async(_,A,E,T)=>{o&&await o(_,A,E,T)},g=_=>{switch(_){case ut.TSUNDOKU:return v.jsx(CT,{});case ut.READING:return v.jsx(BN,{});case ut.RE_READING:return v.jsx(LN,{});case ut.FINISHED:return v.jsx(NN,{});default:return v.jsx(CT,{})}},y=_=>_?(_.toDate?_.toDate():new Date(_)).toLocaleDateString("ja-JP",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"",x=()=>!r||Object.keys(r).length===0?null:v.jsxs(re,{sx:{mb:3},children:[v.jsx(te,{variant:"h6",gutterBottom:!0,children:"重要日付"}),v.jsxs(va,{sx:{p:2,mb:2},children:[r.readingStartedAt&&v.jsxs(re,{sx:{mb:1},children:[v.jsx(te,{variant:"body2",color:"text.secondary",children:"読書開始日"}),v.jsx(te,{variant:"body1",children:y(r.readingStartedAt)})]}),r.reReadingStartedAt&&v.jsxs(re,{sx:{mb:1},children:[v.jsx(te,{variant:"body2",color:"text.secondary",children:"再読開始日"}),v.jsx(te,{variant:"body1",children:y(r.reReadingStartedAt)})]}),r.finishedAt&&v.jsxs(re,{sx:{mb:1},children:[v.jsx(te,{variant:"body2",color:"text.secondary",children:"読了日"}),v.jsx(te,{variant:"body1",children:y(r.finishedAt)})]}),i&&v.jsxs(re,{children:[v.jsx(te,{variant:"body2",color:"text.secondary",children:"読書期間"}),v.jsxs(te,{variant:"body1",children:[i,"日間"]})]})]})]});return e?v.jsx(re,{sx:{p:2},children:v.jsx(te,{children:"履歴を読み込み中..."})}):n?v.jsx(re,{sx:{p:2},children:v.jsxs(te,{color:"error",children:["エラー: ",n]})}):v.jsxs(re,{sx:{p:2},children:[x(),v.jsxs(re,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[v.jsx(te,{variant:"h6",children:"ステータス変更履歴"}),a&&v.jsx(Ke,{variant:"outlined",size:"small",startIcon:v.jsx(rR,{}),onClick:()=>f(!0),"data-testid":"add-history-button",children:"履歴追加"})]}),(!t||t.length===0)&&v.jsxs(re,{sx:{textAlign:"center",py:4},children:[v.jsx(te,{variant:"body1",color:"text.secondary",gutterBottom:!0,children:"履歴がありません"}),v.jsx(te,{variant:"body2",color:"text.secondary",children:"過去のステータス変更履歴を追加できます"})]}),v.jsx(zw,{children:(t||[]).map((_,A)=>v.jsxs($w,{sx:{flexDirection:"column",alignItems:"flex-start"},children:[v.jsxs(re,{sx:{display:"flex",alignItems:"center",gap:1,mb:1,width:"100%"},children:[v.jsx(PN,{sx:{minWidth:"auto"},children:v.jsx(kN,{sx:{bgcolor:gs(_.status)==="primary"?"primary.main":gs(_.status)==="secondary"?"secondary.main":gs(_.status)==="success"?"success.main":"default",width:32,height:32},children:g(_.status)})}),v.jsxs(re,{sx:{flexGrow:1},children:[v.jsxs(re,{sx:{display:"flex",alignItems:"center",gap:1,mb:1},children:[v.jsx(mn,{label:Ps(_.status),color:gs(_.status),size:"small"}),_.previousStatus&&v.jsxs(v.Fragment,{children:[v.jsx(te,{variant:"body2",color:"text.secondary",children:"←"}),v.jsx(mn,{label:Ps(_.previousStatus),color:gs(_.previousStatus),size:"small",variant:"outlined"})]})]}),v.jsx(te,{variant:"body2",color:"text.secondary",children:y(_.changedAt)}),_.notes&&v.jsx(te,{variant:"body2",color:"text.secondary",sx:{mt:1},children:_.notes})]})]}),A<t.length-1&&v.jsx(Bc,{sx:{width:"100%",mt:1}})]},_.id))}),a&&v.jsx(dJ,{open:d,onClose:()=>f(!1),onAdd:p,bookId:s,existingHistory:t,currentBookStatus:c})]})},hJ=({bookId:t})=>{const{latestHistory:e,loading:n,error:r}=nb(t);if(n)return v.jsxs(va,{sx:{p:2,mb:2},children:[v.jsx(te,{variant:"h6",gutterBottom:!0,children:"📊 最新ステータス履歴"}),v.jsx(Ph,{variant:"rectangular",height:40})]});if(r)return v.jsxs(va,{sx:{p:2,mb:2},children:[v.jsx(te,{variant:"h6",gutterBottom:!0,children:"📊 最新ステータス履歴"}),v.jsx(te,{color:"error",children:"履歴の取得に失敗しました"})]});if(!e)return v.jsxs(va,{sx:{p:2,mb:2},children:[v.jsx(te,{variant:"h6",gutterBottom:!0,children:"📊 最新ステータス履歴"}),v.jsx(te,{color:"text.secondary",children:"履歴がありません"})]});const i=a=>a?(a.toDate?a.toDate():new Date(a)).toLocaleDateString("ja-JP",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}):"";return v.jsxs(va,{sx:{p:2,mb:2},children:[v.jsx(te,{variant:"h6",gutterBottom:!0,children:"📊 最新ステータス履歴"}),v.jsxs(re,{sx:{display:"flex",alignItems:"center",gap:1,flexWrap:"wrap"},children:[v.jsx(te,{variant:"body2",color:"text.secondary",children:i(e.changedAt)}),v.jsx(mn,{label:Ps(e.status),color:gs(e.status),size:"small"}),e.previousStatus&&v.jsxs(v.Fragment,{children:[v.jsx(te,{variant:"body2",color:"text.secondary",children:"←"}),v.jsx(mn,{label:Ps(e.previousStatus),color:gs(e.previousStatus),size:"small",variant:"outlined"})]})]})]})},pJ=t=>{const{user:e}=rr(),n=M.useContext(ri),r=(n==null?void 0:n.setGlobalError)||(()=>{}),[i,a]=M.useState(null),[s,o]=M.useState(!0),[c,d]=M.useState(null),f=M.useCallback(async()=>{if(!e||!t){o(!1);return}try{o(!0),d(null);const x=_o(Ht,"books",t),_=await gj(x);_.exists()&&_.data().userId===e.uid?a({id:_.id,..._.data()}):(console.error("No such document or access denied!"),r("書籍が見つからないか、アクセス権限がありません。"),a(null),d("書籍が見つからないか、アクセス権限がありません。"))}catch(x){console.error("Error fetching document:",x),r("書籍情報の取得に失敗しました。"),d("書籍情報の取得に失敗しました。")}finally{o(!1)}},[t,e]),p=M.useCallback(async x=>{if(!e||!t)throw new Error("ユーザーまたは書籍IDが無効です。");try{const _=_o(Ht,"books",t);return await $1(_,{...x,updatedAt:Ti()}),a(A=>({...A,...x})),!0}catch(_){throw console.error("Error updating book:",_),r("書籍情報の更新に失敗しました。"),_}},[t,e]),g=M.useCallback(async x=>await p({status:x}),[p]),y=M.useCallback(async x=>await p({tags:x}),[p]);return M.useEffect(()=>{f()},[f]),{book:i,loading:s,error:c,fetchBook:f,updateBook:p,updateBookStatus:g,updateBookTags:y}},Hg=t=>t&&typeof t.toDate=="function"?t.toDate():t instanceof Date?t:new Date(t),gJ=(t,e,n)=>({handleAddManualHistory:M.useCallback(async(i,a,s,o=[])=>{try{await e(i,a,s),yt.status.info("Manual history added successfully");const c=[...o],d={status:a,previousStatus:s,changedAt:i};c.push(d),c.sort((p,g)=>Hg(g.changedAt)-Hg(p.changedAt));const f=c.length>0&&Hg(c[0].changedAt).getTime()===Hg(i).getTime();if(!t)return;f&&a!==t.status&&await n(a)}catch(c){throw yt.status.error("Failed to add manual history",c),c}},[t,e,n])}),SP=()=>{const t=Zc(),e=Jc(),n=M.useCallback(()=>{const{returnPath:a,searchState:s}=e.state||{};a&&s?t(a,{state:{restoreSearch:s}}):t(-1)},[t,e.state]),r=M.useCallback(()=>{t(1)},[t]),i=M.useCallback(a=>{console.log("Restoring search state:",a)},[]);return{handleBack:n,handleForward:r,restoreSearchState:i,location:e}},mJ=()=>{const{id:t}=n5();Jc();const{book:e,loading:n,error:r,updateBookStatus:i,updateBookTags:a}=pJ(t),{history:s,loading:o,error:c,addManualStatusHistory:d,getImportantDates:f,getReadingDuration:p}=nb(t),{handleAddManualHistory:g}=gJ(e,d,i);SP();const[y,x]=M.useState(0),[_,A]=M.useState(!1),[E,T]=M.useState(0),C=L=>{i(L)},D=L=>{a(L)},k=()=>{x(L=>L+1),A(!1)},B=()=>{x(L=>L+1)},O=()=>{A(!0)},I=()=>{A(!1)},R=(L,P)=>{T(P)},V=()=>{switch(E){case 0:return v.jsxs(v.Fragment,{children:[v.jsx(te,{variant:"h5",gutterBottom:!0,sx:{mb:{xs:1,sm:2}},"data-testid":"memo-list-title",children:"メモ一覧"}),v.jsx(O$,{bookId:e.id,onMemoUpdated:B},y)]});case 1:return v.jsx(fJ,{history:s,loading:o,error:c,importantDates:f(),readingDuration:p(),showAddButton:!0,bookId:t,onAddHistory:g,currentBookStatus:e==null?void 0:e.status});default:return null}};return n?v.jsx("div",{"data-testid":"book-detail-loading",children:"Loading..."}):r?(console.error("📖 BookDetail error:",r),v.jsxs("div",{"data-testid":"book-detail-error",children:["エラーが発生しました: ",r]})):e?v.jsxs(re,{sx:{maxWidth:800,mx:"auto",mt:{xs:2,sm:4},pb:"80px",px:{xs:2,sm:0}},"data-testid":"book-detail",children:[v.jsxs(va,{sx:{p:{xs:2,sm:3}},children:[v.jsx(j$,{book:e,bookId:t,onStatusChange:C}),v.jsx(hJ,{bookId:t}),v.jsx(U$,{book:e,bookId:t,onTagsChange:D}),v.jsx(Bc,{sx:{my:{xs:1,sm:2}}}),v.jsx(re,{sx:{borderBottom:1,borderColor:"divider",mb:2},children:v.jsxs(v1,{value:E,onChange:R,"aria-label":"book detail tabs","data-testid":"book-detail-tabs",children:[v.jsx(ga,{label:"メモ一覧","data-testid":"memo-list-tab"}),v.jsx(ga,{label:"ステータス履歴","data-testid":"status-history-tab"})]})}),V()]}),v.jsx(FN,{color:"primary","aria-label":"メモを追加",sx:{position:"fixed",bottom:{xs:72,sm:16},right:{xs:16,sm:16}},onClick:O,"data-testid":"memo-add-fab",children:v.jsx(rR,{})}),v.jsx($a,{open:_,onClose:I,maxWidth:"sm",fullWidth:!0,"data-testid":"memo-add-dialog",children:v.jsx(N$,{bookId:e.id,bookTags:e.tags||[],onMemoAdded:k,onClose:I})})]}):(console.warn("📖 BookDetail: Book not found for ID:",t),v.jsx("div",{"data-testid":"book-detail-not-found",children:"本が見つかりません。"}))};function Qx({children:t,value:e,index:n,...r}){return v.jsx("div",{role:"tabpanel",hidden:e!==n,id:`tabpanel-${n}`,"aria-labelledby":`tab-${n}`,...r,children:e===n&&v.jsx(re,{sx:{p:3},children:t})})}const yJ=t=>{const[e,n]=M.useState({}),[r,i]=M.useState(!1),[a,s]=M.useState(null),o=M.useCallback(async()=>{if(t!=null&&t.uid)try{i(!0),s(null),console.log("useTagStats: タグ統計取得開始, userId:",t.uid);const[p,g]=await Promise.all([Jn(jn(pr(Ht,"books"),wn("userId","==",t.uid))),Jn(jn(wl(Ht,"memos"),wn("userId","==",t.uid)))]);console.log("useTagStats: データ取得完了, 本:",p.size,"メモ:",g.size);const y={};p.forEach(x=>{const _=x.data();console.log("useTagStats: 本データ:",{id:x.id,title:_.title,tags:_.tags}),_.tags&&Array.isArray(_.tags)&&_.tags.forEach(A=>{var T,C;y[A]||(y[A]={bookCount:0,memoCount:0,lastUsed:null}),y[A].bookCount++;const E=((C=(T=_.updatedAt)==null?void 0:T.toDate)==null?void 0:C.call(T))||new Date;(!y[A].lastUsed||E>y[A].lastUsed)&&(y[A].lastUsed=E)})}),console.log("useTagStats: 本のタグ集計完了"),g.forEach(x=>{var A,E;const _=x.data();console.log("useTagStats: メモデータ:",{id:x.id,bookId:(A=x.ref.parent.parent)==null?void 0:A.id,tags:_.tags,text:((E=_.text)==null?void 0:E.substring(0,30))+"..."}),_.tags&&Array.isArray(_.tags)&&_.tags.forEach(T=>{var D,k;y[T]||(y[T]={bookCount:0,memoCount:0,lastUsed:null}),y[T].memoCount++;const C=((k=(D=_.updatedAt)==null?void 0:D.toDate)==null?void 0:k.call(D))||new Date;(!y[T].lastUsed||C>y[T].lastUsed)&&(y[T].lastUsed=C)})}),console.log("useTagStats: メモのタグ集計完了, 最終統計:",y),n(y),console.log("useTagStats: タグ統計設定完了")}catch(p){console.error("タグ統計の取得に失敗しました:",p),s(p)}finally{i(!1)}},[t==null?void 0:t.uid]),c=M.useCallback((p="count",g="desc")=>Object.entries(e).map(([x,_])=>({tag:x,..._,totalCount:_.bookCount+_.memoCount,type:_.bookCount>0&&_.memoCount>0?"both":_.bookCount>0?"book":"memo"})).sort((x,_)=>{let A=0;switch(p){case"count":A=_.totalCount-x.totalCount;break;case"name":A=x.tag.localeCompare(_.tag,"ja");break;case"lastUsed":A=(_.lastUsed||0)-(x.lastUsed||0);break;default:A=_.totalCount-x.totalCount}return g==="asc"?-A:A}),[e]),d=M.useCallback(p=>e[p]||null,[e]),f=M.useCallback(()=>{n({}),s(null)},[]);return M.useEffect(()=>{t!=null&&t.uid?o():f()},[t==null?void 0:t.uid,o,f]),{tagStats:e,loading:r,error:a,fetchTagStats:o,getSortedTagStats:c,getTagStat:d,clearStats:f}};function dl(t){var e,n;if(t==null)return"";try{return(((n=(e=String(t)).normalize)==null?void 0:n.call(e,"NFKC"))??String(t)).trim().replace(/\s+/g," ").toLowerCase()}catch{return String(t).trim().toLowerCase()}}function vJ(){const{user:t}=rr(),e=M.useContext(ri),n=(e==null?void 0:e.setGlobalError)||(()=>{}),[r,i]=M.useState(!1),a=async(f,p)=>{for(let y=0;y<f.length;y+=450){const x=f.slice(y,y+450),_=xj(Ht);x.forEach(A=>p(_,A)),await _.commit()}},s=M.useCallback(async(f,p)=>{if(!(t!=null&&t.uid))throw new Error("ユーザーが未認証です。");const g=dl(f),y=dl(p);if(!g||!y)throw new Error("タグ名が不正です。");if(g===y)return{booksUpdated:0,memosUpdated:0};i(!0);try{const x=jn(pr(Ht,"books"),wn("userId","==",t.uid)),_=await Jn(x),A=[];_.forEach(D=>{const k=D.data(),B=Array.isArray(k.tags)?k.tags:[];if(B.includes(g)){const O=Array.from(new Set(B.map(I=>I===g?y:I)));A.push({ref:D.ref,tags:O})}});const E=jn(wl(Ht,"memos"),wn("userId","==",t.uid)),T=await Jn(E),C=[];return T.forEach(D=>{const k=D.data(),B=Array.isArray(k.tags)?k.tags:[];if(B.includes(g)){const O=Array.from(new Set(B.map(I=>I===g?y:I)));C.push({ref:D.ref,tags:O})}}),await a(A,(D,k)=>{D.update(k.ref,{tags:k.tags})}),await a(C,(D,k)=>{D.update(k.ref,{tags:k.tags})}),{booksUpdated:A.length,memosUpdated:C.length}}catch(x){throw console.error("タグ名変更に失敗:",x),n("タグ名の変更に失敗しました。"),x}finally{i(!1)}},[t==null?void 0:t.uid]),o=M.useCallback(async f=>{if(!(t!=null&&t.uid))throw new Error("ユーザーが未認証です。");const p=dl(f);if(!p)throw new Error("タグ名が不正です。");i(!0);try{const g=jn(pr(Ht,"books"),wn("userId","==",t.uid)),y=await Jn(g),x=[];y.forEach(T=>{const C=T.data(),D=Array.isArray(C.tags)?C.tags:[];if(D.includes(p)){const k=D.filter(B=>B!==p);x.push({ref:T.ref,tags:k})}});const _=jn(wl(Ht,"memos"),wn("userId","==",t.uid)),A=await Jn(_),E=[];return A.forEach(T=>{const C=T.data(),D=Array.isArray(C.tags)?C.tags:[];if(D.includes(p)){const k=D.filter(B=>B!==p);E.push({ref:T.ref,tags:k})}}),await a(x,(T,C)=>{T.update(C.ref,{tags:C.tags})}),await a(E,(T,C)=>{T.update(C.ref,{tags:C.tags})}),{booksUpdated:x.length,memosUpdated:E.length}}catch(g){throw console.error("タグ削除に失敗:",g),n("タグの削除に失敗しました。"),g}finally{i(!1)}},[t==null?void 0:t.uid]),c=M.useCallback(async f=>{if(!(t!=null&&t.uid))throw new Error("ユーザーが未認証です。");const p=new Set((Array.isArray(f)?f:String(f||"").split(",")).map(g=>dl(g)).filter(g=>!!g));if(p.size===0)throw new Error("削除対象のタグがありません。");i(!0);try{const g=jn(pr(Ht,"books"),wn("userId","==",t.uid)),y=await Jn(g),x=[];y.forEach(T=>{const C=T.data(),D=Array.isArray(C.tags)?C.tags:[],k=D.filter(B=>!p.has(dl(B)));k.length!==D.length&&x.push({ref:T.ref,tags:k})});const _=jn(wl(Ht,"memos"),wn("userId","==",t.uid)),A=await Jn(_),E=[];return A.forEach(T=>{const C=T.data(),D=Array.isArray(C.tags)?C.tags:[],k=D.filter(B=>!p.has(dl(B)));k.length!==D.length&&E.push({ref:T.ref,tags:k})}),await a(x,(T,C)=>{T.update(C.ref,{tags:C.tags})}),await a(E,(T,C)=>{T.update(C.ref,{tags:C.tags})}),{booksUpdated:x.length,memosUpdated:E.length}}catch(g){throw console.error("タグ一括削除に失敗:",g),n("タグの一括削除に失敗しました。"),g}finally{i(!1)}},[t==null?void 0:t.uid]),d=M.useCallback(async(f,p)=>{if(!(t!=null&&t.uid))throw new Error("ユーザーが未認証です。");const g=dl(p),y=Array.from(new Set(String(f||"").split(",").map(x=>dl(x)).filter(x=>!!x)));if(!g||y.length===0)throw new Error("統合先と別名を入力してください。");if(y.includes(g))throw new Error("統合先と別名が同一です。");i(!0);try{const x=jn(pr(Ht,"books"),wn("userId","==",t.uid)),_=await Jn(x),A=[];_.forEach(D=>{const k=D.data(),B=Array.isArray(k.tags)?k.tags:[];if(B.some(I=>y.includes(I))){const I=B.filter(V=>!y.includes(V)),R=Array.from(new Set([...I,g]));R.join("|")!==B.join("|")&&A.push({ref:D.ref,tags:R})}});const E=jn(wl(Ht,"memos"),wn("userId","==",t.uid)),T=await Jn(E),C=[];return T.forEach(D=>{const k=D.data(),B=Array.isArray(k.tags)?k.tags:[];if(B.some(I=>y.includes(I))){const I=B.filter(V=>!y.includes(V)),R=Array.from(new Set([...I,g]));R.join("|")!==B.join("|")&&C.push({ref:D.ref,tags:R})}}),await a(A,(D,k)=>{D.update(k.ref,{tags:k.tags})}),await a(C,(D,k)=>{D.update(k.ref,{tags:k.tags})}),{booksUpdated:A.length,memosUpdated:C.length}}catch(x){throw console.error("タグ統合に失敗:",x),n("タグの統合に失敗しました。"),x}finally{i(!1)}},[t==null?void 0:t.uid]);return{loading:r,renameTag:s,deleteTag:o,deleteTags:c,mergeTags:d}}function xJ({open:t,tag:e,onClose:n,onRename:r,onDelete:i,onMerge:a,busy:s=!1}){const[o,c]=M.useState(e||""),[d,f]=M.useState(""),[p,g]=M.useState(""),y=()=>{c(e||""),n==null||n()};return v.jsxs($a,{open:t,onClose:y,maxWidth:"xs",fullWidth:!0,children:[v.jsx(Ds,{children:"タグを編集"}),v.jsxs(Ga,{children:[v.jsx(te,{variant:"body2",color:"text.secondary",sx:{mb:1},children:"タグ名の変更またはタグの削除を行えます。"}),v.jsx(xt,{autoFocus:!0,fullWidth:!0,label:"新しいタグ名",value:o,onChange:x=>c(x.target.value),disabled:s}),v.jsxs(re,{sx:{mt:2},children:[v.jsx(te,{variant:"body2",color:"text.secondary",sx:{mb:1},children:"類似タグの統合（カンマ区切りで別名を指定）"}),v.jsx(xt,{fullWidth:!0,label:"統合先（正規化タグ名）",value:d,onChange:x=>f(x.target.value),disabled:s}),v.jsx(xt,{fullWidth:!0,label:"別名（カンマ区切り）",value:p,onChange:x=>g(x.target.value),disabled:s,sx:{mt:1}})]})]}),v.jsxs(Wa,{children:[v.jsx(Ke,{onClick:()=>i==null?void 0:i(e),color:"error",disabled:s,"data-testid":"tag-delete-button",children:"削除"}),v.jsx(Ke,{onClick:y,disabled:s,children:"キャンセル"}),v.jsx(Ke,{onClick:()=>r==null?void 0:r(e,o),variant:"contained",disabled:s,"data-testid":"tag-rename-button",children:"変更"}),v.jsx(Ke,{onClick:()=>a==null?void 0:a(p,d),variant:"outlined",disabled:s,"data-testid":"tag-merge-button",children:"統合"})]})]})}function wJ({open:t,onClose:e,onConfirm:n,busy:r=!1}){const{user:i}=rr(),{tagOptions:a,fetchTagHistory:s}=bo("book",i),{tagOptions:o,fetchTagHistory:c}=bo("memo",i),[d,f]=M.useState([]),[p,g]=M.useState("");M.useEffect(()=>{t&&i&&(s(),c())},[t,i,s,c]),M.useEffect(()=>{t||(f([]),g(""))},[t]);const y=M.useMemo(()=>{const x=new Set([...a||[],...o||[]]);return Array.from(x).sort((_,A)=>_.localeCompare(A,"ja"))},[a,o]);return v.jsxs($a,{open:t,onClose:e,maxWidth:"sm",fullWidth:!0,children:[v.jsx(Ds,{children:"タグを一括削除"}),v.jsxs(Ga,{children:[v.jsx(te,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"削除するタグを選択または入力してください。複数選択できます。"}),v.jsx(mo,{multiple:!0,freeSolo:!0,options:y,value:d,inputValue:p,onInputChange:(x,_)=>g(_),onChange:(x,_)=>f(_),renderTags:(x,_)=>x.map((A,E)=>{const{key:T,...C}=_({index:E});return v.jsx(mn,{label:A,...C,color:"error",variant:"outlined"},T)}),renderInput:x=>v.jsx(xt,{...x,label:"削除タグ",placeholder:"タグ名を入力...",fullWidth:!0,"data-testid":"bulk-delete-tags-input"}),"data-testid":"bulk-delete-tags-autocomplete"}),!!d.length&&v.jsx(re,{sx:{mt:1},children:v.jsxs(te,{variant:"caption",color:"text.secondary",children:["削除対象: ",d.join(", ")]})})]}),v.jsxs(Wa,{children:[v.jsx(Ke,{onClick:e,disabled:r,children:"キャンセル"}),v.jsx(Ke,{onClick:()=>n==null?void 0:n(d),color:"error",variant:"contained",disabled:r||d.length===0,"data-testid":"bulk-delete-confirm",children:"削除"})]})]})}function _J({open:t,onClose:e,onConfirm:n,busy:r=!1}){const{user:i}=rr(),{tagOptions:a,fetchTagHistory:s}=bo("book",i),{tagOptions:o,fetchTagHistory:c}=bo("memo",i),[d,f]=M.useState(""),[p,g]=M.useState([]),[y,x]=M.useState("");M.useEffect(()=>{t&&i&&(s(),c())},[t,i,s,c]),M.useEffect(()=>{t||(f(""),g([]),x(""))},[t]);const _=M.useMemo(()=>{const E=new Set([...a||[],...o||[]]);return Array.from(E).sort((T,C)=>T.localeCompare(C,"ja"))},[a,o]),A=d.trim().length>0&&p.length>0;return v.jsxs($a,{open:t,onClose:e,maxWidth:"sm",fullWidth:!0,children:[v.jsx(Ds,{children:"タグを一括統合"}),v.jsxs(Ga,{children:[v.jsx(te,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"複数の別名タグを正規タグへ統合します。正規タグと、統合したい別名タグを選択してください。"}),v.jsxs(re,{sx:{mb:2},children:[v.jsx(te,{variant:"subtitle2",sx:{mb:1},children:"正規タグ"}),v.jsx(mo,{freeSolo:!0,options:_,value:d,inputValue:y,onInputChange:(E,T)=>x(T),onChange:(E,T)=>f(T||y),renderInput:E=>v.jsx(xt,{...E,label:"正規タグ",placeholder:"統合先のタグ名",fullWidth:!0}),"data-testid":"bulk-merge-canonical"})]}),v.jsxs(re,{children:[v.jsx(te,{variant:"subtitle2",sx:{mb:1},children:"別名タグ（複数可）"}),v.jsx(mo,{multiple:!0,freeSolo:!0,options:_,value:p,onChange:(E,T)=>g(T),renderTags:(E,T)=>E.map((C,D)=>{const{key:k,...B}=T({index:D});return v.jsx(mn,{label:C,...B,color:"primary",variant:"outlined"},k)}),renderInput:E=>v.jsx(xt,{...E,label:"別名タグ",placeholder:"統合したい別名を入力...",fullWidth:!0}),"data-testid":"bulk-merge-aliases"})]})]}),v.jsxs(Wa,{children:[v.jsx(Ke,{onClick:e,disabled:r,children:"キャンセル"}),v.jsx(Ke,{onClick:()=>n==null?void 0:n(p,d||y),variant:"contained",disabled:r||!A,"data-testid":"bulk-merge-confirm",children:"統合"})]})]})}function bJ({onTagClick:t}){const{user:e}=rr(),{tagStats:n,loading:r,error:i,getSortedTagStats:a,fetchTagStats:s}=yJ(e),{loading:o,renameTag:c,deleteTag:d,deleteTags:f,mergeTags:p}=vJ(),[g,y]=M.useState("count"),[x,_]=M.useState("desc"),[A,E]=M.useState(!1),[T,C]=M.useState(""),[D,k]=M.useState(!1),[B,O]=M.useState(!1),I=a(g,x),R=Object.keys(n).length,V=Object.values(n).reduce((P,F)=>P+F.bookCount,0),L=Object.values(n).reduce((P,F)=>P+F.memoCount,0);return r?v.jsx(re,{sx:{display:"flex",justifyContent:"center",p:3},children:v.jsx(C0,{})}):i?v.jsx(re,{sx:{p:2},children:v.jsxs(Ki,{severity:"error",children:["タグ統計の取得に失敗しました: ",i.message]})}):R===0?v.jsx(re,{sx:{p:3},children:v.jsx(Ki,{severity:"info",children:"タグがまだ登録されていません。本にタグを追加すると、ここに統計が表示されます。"})}):v.jsxs(re,{children:[v.jsxs(va,{sx:{p:2,mb:3},children:[v.jsx(te,{variant:"h6",gutterBottom:!0,children:"タグ統計サマリー"}),v.jsxs(re,{sx:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:2},children:[v.jsxs(re,{sx:{textAlign:"center"},children:[v.jsx(te,{variant:"h4",color:"primary",children:R}),v.jsx(te,{variant:"body2",color:"text.secondary",children:"総タグ数"})]}),v.jsxs(re,{sx:{textAlign:"center"},children:[v.jsx(te,{variant:"h4",color:"secondary",children:V}),v.jsx(te,{variant:"body2",color:"text.secondary",children:"本の総件数"})]}),v.jsxs(re,{sx:{textAlign:"center"},children:[v.jsx(te,{variant:"h4",color:"info.main",children:L}),v.jsx(te,{variant:"body2",color:"text.secondary",children:"メモの総件数"})]})]})]}),v.jsxs(re,{sx:{mb:2,display:"flex",gap:2,alignItems:"center",flexWrap:"wrap"},children:[v.jsxs(te,{variant:"h6",children:["タグ一覧 (",R,"件)"]}),v.jsx(mn,{label:"一括削除",size:"small",color:"error",variant:"outlined",onClick:()=>k(!0),"data-testid":"open-bulk-delete"}),v.jsx(mn,{label:"一括統合",size:"small",color:"primary",variant:"outlined",onClick:()=>O(!0),"data-testid":"open-bulk-merge"}),v.jsxs(Si,{size:"small",sx:{minWidth:120},children:[v.jsx(xa,{children:"ソート基準"}),v.jsxs(Ua,{value:g,label:"ソート基準",onChange:P=>y(P.target.value),children:[v.jsx(pn,{value:"count",children:"使用頻度"}),v.jsx(pn,{value:"name",children:"名前順"}),v.jsx(pn,{value:"lastUsed",children:"最終使用日"})]})]}),v.jsxs(Si,{size:"small",sx:{minWidth:100},children:[v.jsx(xa,{children:"順序"}),v.jsxs(Ua,{value:x,label:"順序",onChange:P=>_(P.target.value),children:[v.jsx(pn,{value:"desc",children:"降順"}),v.jsx(pn,{value:"asc",children:"昇順"})]})]})]}),v.jsx(re,{className:"tag-stats-grid",children:I.map(P=>v.jsx(kn,{"data-testid":`tag-stat-card-${P.tag}`,onClick:()=>t==null?void 0:t(P.tag),className:"tag-stat-card",children:v.jsxs(Nn,{children:[v.jsxs(re,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",mb:1},children:[v.jsx(te,{variant:"h6",component:"div",sx:{wordBreak:"break-all"},children:P.tag}),v.jsx(mn,{label:P.type,size:"small",color:P.type==="both"?"primary":P.type==="book"?"secondary":"info",variant:"outlined"})]}),v.jsxs(re,{sx:{display:"flex",justifyContent:"space-between",mb:1},children:[v.jsxs(te,{variant:"body2",color:"text.secondary",children:["本: ",P.bookCount,"件"]}),v.jsxs(te,{variant:"body2",color:"text.secondary",children:["メモ: ",P.memoCount,"件"]})]}),v.jsxs(re,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[v.jsxs(te,{variant:"body2",color:"primary",sx:{fontWeight:"bold"},children:["合計: ",P.totalCount,"件"]}),v.jsx(re,{sx:{display:"flex",gap:1},children:v.jsx(mn,{size:"small",label:"編集",onClick:F=>{F.stopPropagation(),C(P.tag),E(!0)},clickable:!0,color:"primary",variant:"outlined","data-testid":`tag-edit-${P.tag}`})})]}),P.lastUsed&&v.jsxs(te,{variant:"caption",color:"text.secondary",sx:{display:"block",mt:1},children:["最終使用: ",P.lastUsed.toLocaleDateString("ja-JP")]})]})},P.tag))}),v.jsx(xJ,{open:A,tag:T,busy:o,onClose:()=>E(!1),onRename:async(P,F)=>{await c(P,F),await s(),E(!1)},onDelete:async P=>{await d(P),await s(),E(!1)},onMerge:async(P,F)=>{await p(P,F),await s(),E(!1)}}),v.jsx(wJ,{open:D,onClose:()=>k(!1),busy:o,onConfirm:async P=>{!P||P.length===0||(await f(P),await s(),k(!1))}}),v.jsx(_J,{open:B,onClose:()=>O(!1),busy:o,onConfirm:async(P,F)=>{!P||P.length===0||!F||(await p(P.join(","),F),await s(),O(!1))}})]})}function AJ({value:t,onChange:e}){const[n,r]=M.useState((t==null?void 0:t.type)||"none"),[i,a]=M.useState((t==null?void 0:t.year)||new Date().getFullYear()),[s,o]=M.useState((t==null?void 0:t.month)||1),[c,d]=M.useState((t==null?void 0:t.quarter)||1),[f,p]=M.useState((t==null?void 0:t.startDate)||""),[g,y]=M.useState((t==null?void 0:t.endDate)||""),x=D=>{const k=D.target.value;r(k);let B={type:k};switch(k){case"year":B.year=i;break;case"month":B.year=i,B.month=s;break;case"quarter":B.year=i,B.quarter=c;break;case"custom":B.startDate=f,B.endDate=g;break}e==null||e(B)},_=D=>{const k=D.target.value;a(k),e==null||e({...t,year:k})},A=D=>{const k=D.target.value;o(k),e==null||e({...t,month:k})},E=D=>{const k=D.target.value;d(k),e==null||e({...t,quarter:k})},T=D=>{const k=D.target.value;p(k),e==null||e({...t,startDate:k})},C=D=>{const k=D.target.value;y(k),e==null||e({...t,endDate:k})};return v.jsxs(re,{children:[v.jsx(te,{variant:"subtitle2",gutterBottom:!0,children:"読了日時"}),v.jsxs(va,{sx:{p:2},children:[v.jsxs(Si,{fullWidth:!0,margin:"normal",children:[v.jsx(xa,{children:"日時範囲"}),v.jsxs(Ua,{value:n,onChange:x,label:"日時範囲","data-testid":"date-range-type-select",children:[v.jsx(pn,{value:"none",children:"指定なし"}),v.jsx(pn,{value:"year",children:"年別"}),v.jsx(pn,{value:"month",children:"年月別"}),v.jsx(pn,{value:"quarter",children:"四半期別"}),v.jsx(pn,{value:"custom",children:"カスタム期間"})]})]}),(n==="year"||n==="month"||n==="quarter")&&v.jsxs(Si,{fullWidth:!0,margin:"normal",children:[v.jsx(xa,{children:"年"}),v.jsx(Ua,{value:i,onChange:_,label:"年","data-testid":"year-select",children:Array.from({length:10},(D,k)=>new Date().getFullYear()-k).map(D=>v.jsxs(pn,{value:D,children:[D,"年"]},D))})]}),n==="month"&&v.jsxs(Si,{fullWidth:!0,margin:"normal",children:[v.jsx(xa,{children:"月"}),v.jsx(Ua,{value:s,onChange:A,label:"月","data-testid":"month-select",children:Array.from({length:12},(D,k)=>k+1).map(D=>v.jsxs(pn,{value:D,children:[D,"月"]},D))})]}),n==="quarter"&&v.jsxs(Si,{fullWidth:!0,margin:"normal",children:[v.jsx(xa,{children:"四半期"}),v.jsxs(Ua,{value:c,onChange:E,label:"四半期","data-testid":"quarter-select",children:[v.jsx(pn,{value:1,children:"第1四半期（1-3月）"}),v.jsx(pn,{value:2,children:"第2四半期（4-6月）"}),v.jsx(pn,{value:3,children:"第3四半期（7-9月）"}),v.jsx(pn,{value:4,children:"第4四半期（10-12月）"})]})]}),n==="custom"&&v.jsxs(re,{sx:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:2,mt:1},"data-testid":"custom-date-range-grid",children:[v.jsx(re,{"data-testid":"start-date-grid-item",children:v.jsx(xt,{label:"開始日",type:"date",value:f,onChange:T,fullWidth:!0,InputLabelProps:{shrink:!0},inputProps:{"data-testid":"start-date-input"}})}),v.jsx(re,{"data-testid":"end-date-grid-item",children:v.jsx(xt,{label:"終了日",type:"date",value:g,onChange:C,fullWidth:!0,InputLabelProps:{shrink:!0},inputProps:{"data-testid":"end-date-input"}})})]}),n!=="none"&&v.jsxs(te,{variant:"body2",color:"text.secondary",sx:{mt:1},children:[n==="year"&&`${i}年に読了した本を検索します`,n==="month"&&`${i}年${s}月に読了した本を検索します`,n==="quarter"&&`${i}年第${c}四半期に読了した本を検索します`,n==="custom"&&"指定した期間に読了した本を検索します"]})]})]})}function EJ({selectedTags:t=[],onTagsChange:e,type:n="book"}){const{user:r}=rr(),{tagOptions:i,loading:a,fetchTagHistory:s}=bo(n,r),[o,c]=M.useState("");M.useEffect(()=>{r&&s()},[r,s]);const d=(g,y)=>{if(y&&!t.includes(y)){const x=[...t,y];e==null||e(x),c("")}},f=g=>{const y=t.filter(x=>x!==g);e==null||e(y)},p=(g,y)=>{c(y)};return v.jsxs(re,{children:[v.jsx(te,{variant:"subtitle2",gutterBottom:!0,children:"タグ検索"}),v.jsxs(va,{sx:{p:2},children:[v.jsx(mo,{freeSolo:!0,multiple:!0,options:i||[],value:t,inputValue:o,onInputChange:p,onChange:d,renderTags:(g,y)=>g.map((x,_)=>{const{key:A,...E}=y({index:_});return v.jsx(mn,{label:x,...E,onDelete:()=>f(x),color:"primary",variant:"outlined","data-testid":`selected-tag-${x}`},A)}),renderInput:g=>v.jsx(xt,{...g,label:"タグを選択または入力",placeholder:"タグを入力...",fullWidth:!0,"data-testid":"tag-search-input"}),loading:a,noOptionsText:"タグが見つかりません","data-testid":"tag-autocomplete"}),v.jsx(te,{variant:"body2",color:"text.secondary",sx:{mt:1},children:t.length>0?`選択されたタグ: ${t.join(", ")}`:"タグを選択すると、そのタグを持つ本やメモを検索できます"})]})]})}function SJ({searchConditions:t,onSearchConditionsChange:e,onSearch:n}){const[r,i]=M.useState(gn.ALL),a=f=>{e==null||e({...t,text:f.target.value})},s=(f,p)=>{i(p),e==null||e({...t,status:p})},o=f=>{e==null||e({...t,dateRange:f})},c=f=>{e==null||e({...t,selectedTags:f})},d=()=>{n==null||n(t)};return v.jsxs(re,{children:[v.jsx(te,{variant:"h6",gutterBottom:!0,children:"検索条件"}),v.jsxs(va,{sx:{p:2,mb:2},children:[v.jsx(xt,{label:"テキスト検索（タイトル・著者・メモ内容・タグ）",value:(t==null?void 0:t.text)||"",onChange:a,fullWidth:!0,margin:"normal",placeholder:"検索したいキーワードを入力","data-testid":"text-search-field"}),v.jsxs(re,{sx:{mt:2},children:[v.jsx(te,{variant:"subtitle2",gutterBottom:!0,children:"ステータス"}),v.jsx(re,{sx:{display:"flex",gap:1,flexWrap:"wrap"},children:[gn.ALL,gn.TSUNDOKU,gn.READING_GROUP,gn.SUSPENDED,gn.FINISHED].map(f=>v.jsx(Ke,{variant:r===f?"contained":"outlined",size:"small",onClick:()=>s(null,f),"data-testid":`status-filter-${f}`,children:pd[f]},f))})]}),v.jsx(re,{sx:{mt:2},children:v.jsx(AJ,{dateRange:(t==null?void 0:t.dateRange)||{type:"none"},onDateRangeChange:o})}),v.jsx(re,{sx:{mt:2},children:v.jsx(EJ,{selectedTags:(t==null?void 0:t.selectedTags)||[],onTagsChange:c,type:"book"})})]}),v.jsx(re,{sx:{display:"flex",justifyContent:"center"},children:v.jsx(Ke,{variant:"contained",onClick:d,"data-testid":"search-button",children:"検索実行"})})]})}function ry({results:t=[],loading:e=!1,searchQuery:n="",onResultClick:r}){const{user:i}=rr(),a=Zc(),o=r||((g,y,x)=>{g==="book"?a(`/book/${y}`):g==="memo"&&a(`/book/${y}?memo=${x}`)});if(e)return v.jsx(re,{sx:{display:"flex",justifyContent:"center",p:4},children:v.jsx(C0,{})});if(!t||t.length===0)return v.jsx(re,{sx:{p:3},children:v.jsx(Ki,{severity:"info",children:n?`「${n}」に一致する結果が見つかりませんでした。`:"検索条件を設定して検索を実行してください。"})});const c=t.filter(g=>g.type==="book"),d=t.filter(g=>g.type==="memo"),f=g=>v.jsx(kn,{sx:{cursor:"pointer","&:hover":{boxShadow:3},height:"100%",display:"flex",flexDirection:"column",border:"2px solid",borderColor:"purple.300",backgroundColor:"purple.50"},onClick:()=>o("memo",g.bookId,g.id),"data-testid":`memo-result-${g.id}`,children:v.jsxs(Nn,{sx:{flexGrow:1,display:"flex",flexDirection:"column"},children:[v.jsx(re,{sx:{mb:2},children:v.jsxs(te,{variant:"h6",component:"h3",gutterBottom:!0,sx:{fontWeight:"bold",display:"flex",alignItems:"center",gap:1},children:[v.jsx("span",{children:"📝"}),v.jsxs("span",{children:[g.bookTitle||"メモ"," - ページ",g.page||"未設定"]})]})}),g.text&&v.jsx(re,{sx:{mb:2,flexGrow:1},children:v.jsx(te,{variant:"body2",sx:{backgroundColor:"grey.50",p:1,borderRadius:1,border:"1px solid",borderColor:"grey.200",fontStyle:"italic"},children:g.text.length>120?`${g.text.substring(0,120)}...`:g.text})}),g.comment&&v.jsx(re,{sx:{mb:2},children:v.jsxs(te,{variant:"body2",sx:{backgroundColor:"primary.50",p:1,borderRadius:1,border:"1px solid",borderColor:"primary.200"},children:["💭 ",g.comment.length>100?`${g.comment.substring(0,100)}...`:g.comment]})}),g.tags&&g.tags.length>0&&v.jsx(re,{sx:{mb:2},children:v.jsx(re,{sx:{display:"flex",gap:.5,flexWrap:"wrap"},children:g.tags.map((y,x)=>v.jsx(mn,{label:y,size:"small",variant:"outlined",sx:{fontSize:"0.75rem"}},x))})}),v.jsx(re,{sx:{mt:"auto"},children:v.jsxs(te,{variant:"caption",color:"text.secondary",children:["作成日: ",g.createdAt?typeof g.createdAt.toDate=="function"?new Date(g.createdAt.toDate()).toLocaleDateString("ja-JP"):new Date(g.createdAt).toLocaleDateString("ja-JP"):"不明"]})})]})},g.id),p=g=>v.jsx(kn,{sx:{cursor:"pointer","&:hover":{boxShadow:3},height:"100%",display:"flex",flexDirection:"column",border:"2px solid",borderColor:"blue.300",backgroundColor:"blue.50"},onClick:()=>o("book",g.id),"data-testid":`book-result-${g.id}`,children:v.jsxs(Nn,{sx:{flexGrow:1,display:"flex",flexDirection:"column"},children:[v.jsx(re,{sx:{mb:2},children:v.jsxs(te,{variant:"h6",component:"h3",gutterBottom:!0,sx:{fontWeight:"bold",display:"flex",alignItems:"center",gap:1},children:[v.jsx("span",{children:"📚"}),v.jsx("span",{children:g.title})]})}),v.jsxs(re,{sx:{mb:2},children:[v.jsx(te,{variant:"body2",color:"text.secondary",sx:{mb:1},children:g.author||"著者不明"}),v.jsx(mn,{label:Ps(g.status),size:"small",color:gs(g.status),sx:{fontSize:"0.75rem"}})]}),g.tags&&g.tags.length>0&&v.jsx(re,{sx:{mb:2},children:v.jsx(re,{sx:{display:"flex",gap:.5,flexWrap:"wrap"},children:g.tags.map((y,x)=>v.jsx(mn,{label:y,size:"small",variant:"outlined",sx:{fontSize:"0.75rem"}},x))})}),v.jsx(re,{sx:{mt:"auto"},children:v.jsxs(te,{variant:"caption",color:"text.secondary",children:["更新日: ",g.updatedAt?typeof g.updatedAt.toDate=="function"?new Date(g.updatedAt.toDate()).toLocaleDateString("ja-JP"):new Date(g.updatedAt).toLocaleDateString("ja-JP"):"不明"]})})]})},g.id);return v.jsxs(re,{children:[v.jsxs(re,{sx:{mb:3},children:[v.jsxs(te,{variant:"h6",gutterBottom:!0,children:["検索結果 (",t.length,"件)"]}),v.jsxs(te,{variant:"body2",color:"text.secondary",children:["📚 書籍: ",c.length,"件, 📝 メモ: ",d.length,"件"]})]}),v.jsx(re,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",sm:"1fr 1fr",md:"repeat(3, 1fr)"},gap:2},children:t.map(g=>v.jsx(re,{children:g.type==="book"?p(g):f(g)},`${g.type}-${g.id}`))})]})}ry.propTypes={results:ee.arrayOf(ee.shape({id:ee.string.isRequired,type:ee.oneOf(["book","memo"]).isRequired,title:ee.string,author:ee.string,status:ee.string,tags:ee.arrayOf(ee.string),updatedAt:ee.oneOfType([ee.object,ee.string,ee.instanceOf(Date)]),bookId:ee.string,bookTitle:ee.string,text:ee.string,comment:ee.string,page:ee.number,createdAt:ee.oneOfType([ee.object,ee.string,ee.instanceOf(Date)])})),loading:ee.bool,searchQuery:ee.string,onResultClick:ee.func.isRequired};ry.defaultProps={results:[],loading:!1,searchQuery:""};const iy={MIN_SEARCH_LENGTH:2,CACHE_KEY:"fullTextSearchCache",CACHE_MAX_ITEMS:100,CACHE_EXPIRY_MS:1440*60*1e3,RATE_LIMIT_MS:5e3,ERROR_MESSAGES:{TOO_SHORT:t=>`${t}文字以上入力してください`,RATE_LIMITED:t=>`検索間隔が短すぎます。${t}秒後に再試行してください。`,SEARCH_FAILED:"検索に失敗しました。もう一度お試しください。"},PLACEHOLDER:"書籍タイトル・著者・メモ内容・タグから検索",DESCRIPTION:"書籍タイトル・著者・メモ内容・タグから検索します（最小2文字）"};function TJ(){const{CACHE_KEY:t,CACHE_MAX_ITEMS:e,CACHE_EXPIRY_MS:n}=iy,r=M.useCallback(()=>{try{const p=localStorage.getItem(t);return p?JSON.parse(p):{}}catch(p){return console.error("キャッシュの読み込みに失敗しました:",p),{}}},[t]),[i,a]=M.useState(r),s=M.useCallback(p=>p.toLowerCase().trim(),[]),o=M.useCallback(p=>{const g=s(p);console.log("🔍 キャッシュ検索:",{searchText:p,key:g,cacheKeys:Object.keys(i)});const y=i[g];return y?Date.now()-y.timestamp>n?(console.log("⏰ キャッシュ期限切れ:",g),null):(console.log("✅ キャッシュヒット:",g),y.data):(console.log("❌ キャッシュミス:",g),null)},[i,s,n]),c=M.useCallback((p,g)=>{const y=s(p),x=Date.now();console.log("💾 キャッシュ保存:",{searchText:p,key:y,resultsCount:(g==null?void 0:g.length)||0});let _={...i};if(Object.keys(_).length>=e&&!_[y]){const A=Object.keys(_).sort((E,T)=>_[E].timestamp-_[T].timestamp)[0];console.log("🗑️ 古いキャッシュを削除:",A),delete _[A]}_[y]={data:g,timestamp:x},a(_);try{localStorage.setItem(t,JSON.stringify(_)),console.log("✅ キャッシュ保存成功:",{key:y,cacheSize:Object.keys(_).length})}catch(A){console.error("キャッシュの保存に失敗しました:",A)}},[i,s,t,e]),d=M.useCallback(()=>{a({});try{localStorage.removeItem(t)}catch(p){console.error("キャッシュのクリアに失敗しました:",p)}},[t]),f=M.useCallback(()=>{const p=Date.now(),g=Object.entries(i);return{totalItems:g.length,validItems:g.filter(([,y])=>p-y.timestamp<=n).length,maxItems:e,expiryMs:n}},[i,e,n]);return{getCached:o,setCached:c,clearCache:d,getCacheStats:f}}function CJ(){const{RATE_LIMIT_MS:t,ERROR_MESSAGES:e}=iy,[n,r]=M.useState({}),i=M.useCallback(d=>d.toLowerCase().trim(),[]),a=M.useCallback(d=>{const f=i(d),p=Date.now(),g=n[f]||0,y=p-g;if(y<t){const x=t-y,_=Math.ceil(x/1e3);return{allowed:!1,remainingMs:x,error:e.RATE_LIMITED(_)}}return{allowed:!0,remainingMs:0,error:null}},[n,i,t,e]),s=M.useCallback(d=>{const f=i(d),p=Date.now();r(g=>({...g,[f]:p}))},[i]),o=M.useCallback(d=>{if(d){const f=i(d);r(p=>{const g={...p};return delete g[f],g})}else r({})},[i]),c=M.useCallback(d=>{const f=i(d),p=Date.now(),g=n[f]||0,y=p-g;return y<t?t-y:0},[n,i,t]);return{checkRateLimit:a,recordSearch:s,resetRateLimit:o,getRemainingTime:c}}function IJ(t){const e=new Date;let n=null,r=null;if(!t||!t.type||t.type==="none")return{startDate:n,endDate:r};switch(t.type){case"year":t.year&&(n=new Date(t.year,0,1),r=new Date(t.year,11,31,23,59,59));break;case"month":t.year&&t.month&&(n=new Date(t.year,t.month-1,1),r=new Date(t.year,t.month,0,23,59,59));break;case"quarter":if(t.year&&t.quarter){const i=(t.quarter-1)*3;n=new Date(t.year,i,1),r=new Date(t.year,i+3,0,23,59,59)}break;case"custom":t.startDate&&(n=new Date(t.startDate)),t.endDate&&(r=new Date(t.endDate),r.setHours(23,59,59));break;case"recent":t.months&&(n=new Date(e.getFullYear(),e.getMonth()-t.months,e.getDate()),r=e);break}return{startDate:n,endDate:r}}function DJ(t,e,n,r=50){if(!e)return[];const{status:i,dateRange:a,selectedTags:s}=n||{},o=[],c=[wn("userId","==",e.uid)];if(i&&i!=="all"&&c.push(wn("status","==",i)),a&&a.type!=="none"){const{startDate:p,endDate:g}=IJ(a);p&&c.push(wn("updatedAt",">=",p)),g&&c.push(wn("updatedAt","<=",g))}s&&s.length>0&&Array.isArray(s)&&!s.some(p=>Array.isArray(p))&&c.push(wn("tags","array-contains-any",s));const d=jn(pr(t,"books"),...c,z1("updatedAt","desc"),Lm(r));o.push({type:"book",query:d});const f=jn(wl(t,"memos"),wn("userId","==",e.uid),Lm(r*3));return o.push({type:"memo",query:f}),o}async function RJ({db:t,user:e,queries:n,resultLimit:r=50}){var a,s;const i=[];for(const{type:o,query:c}of n)try{const d=await Jn(c);if(o==="memo")for(const f of d.docs){const p=f.data(),g=(a=f.ref.parent.parent)==null?void 0:a.id;let y="メモ";if(g)try{const x=await Jn(jn(pr(t,"books"),wn("__name__","==",g),wn("userId","==",e.uid)));x.empty||(y=x.docs[0].data().title||"メモ")}catch{}i.push({id:f.id,type:o,bookId:g,bookTitle:y,...p})}else d.forEach(f=>{const p=f.data();i.push({id:f.id,type:o,...p})})}catch(d){const f=String((d==null?void 0:d.message)||"");if(d.code==="failed-precondition"||f.includes("index")||f.includes("array-contains-any"))if(o==="memo"){const p=jn(wl(t,"memos"),wn("userId","==",e.uid),Lm(r*2)),g=await Jn(p);for(const y of g.docs){const x=y.data(),_=(s=y.ref.parent.parent)==null?void 0:s.id;let A="メモ";if(_)try{const E=await Jn(jn(pr(t,"books"),wn("__name__","==",_),wn("userId","==",e.uid)));E.empty||(A=E.docs[0].data().title||"メモ")}catch{}i.push({id:y.id,type:o,bookId:_,bookTitle:A,...x})}}else{const p=jn(pr(t,"books"),wn("userId","==",e.uid),Lm(r*2));(await Jn(p)).forEach(y=>{const x=y.data();i.push({id:y.id,type:o,...x})})}else throw d}return i}function OJ(t,e){if(!e)return t;const n=String(e).toLowerCase();return(t||[]).filter(r=>r.type==="book"?r.title&&String(r.title).toLowerCase().includes(n)||r.author&&String(r.author).toLowerCase().includes(n)||r.tags&&Array.isArray(r.tags)&&r.tags.some(i=>String(i).toLowerCase().includes(n)):r.type==="memo"?r.text&&String(r.text).toLowerCase().includes(n)||r.comment&&String(r.comment).toLowerCase().includes(n)||r.tags&&Array.isArray(r.tags)&&r.tags.some(i=>String(i).toLowerCase().includes(n)):!1)}function MJ(t,e){if(!e||e.length===0)return t;const n=i=>{if(!Array.isArray(i))return[];const a=[],s=o=>{Array.isArray(o)?o.forEach(s):typeof o=="string"&&o.trim()&&a.push(o.toLowerCase().trim())};return i.forEach(s),a},r=n(e);return(t||[]).filter(i=>!i.tags||!Array.isArray(i.tags)?!1:n(i.tags).some(s=>r.includes(s)))}function PJ(t,e){if(!e)return t;const n=String(e).toLowerCase();return(t||[]).filter(r=>r.text&&String(r.text).toLowerCase().includes(n)||r.comment&&String(r.comment).toLowerCase().includes(n))}function kJ(t,e="updatedAt",n="desc"){const r=[...t||[]];return r.sort((i,a)=>{let s=i[e],o=a[e];return(e==="updatedAt"||e==="createdAt")&&(s=s!=null&&s.toDate?s.toDate():s?new Date(s):new Date(0),o=o!=null&&o.toDate?o.toDate():o?new Date(o):new Date(0)),typeof s=="string"&&typeof o=="string"&&(s=s.toLowerCase(),o=o.toLowerCase()),n==="asc"?s>o?1:-1:s<o?1:-1}),r}function NJ(t,e={}){const{text:n,selectedTags:r,memoContent:i,sortBy:a="updatedAt",sortOrder:s="desc"}=e;let o=OJ(t,n);if(r&&r.length>0&&(o=MJ(o,r)),i){const c=o.filter(f=>f.type==="book"),d=PJ(o.filter(f=>f.type==="memo"),i);o=[...c,...d]}return kJ(o,a,s)}const Eb="lastSearchResults",Sb="lastSearchTimestamp",LJ=1800*1e3,BJ=t=>{try{sessionStorage.setItem(Eb,JSON.stringify(t)),sessionStorage.setItem(Sb,Date.now().toString()),console.log("[searchStorage] Saved search results to sessionStorage:",t.length)}catch(e){console.warn("[searchStorage] Failed to save search results to sessionStorage:",e)}},FJ=()=>{try{const t=sessionStorage.getItem(Eb),e=sessionStorage.getItem(Sb);if(!t||!e)return null;if(Date.now()-parseInt(e,10)>=LJ)return TP(),console.log("[searchStorage] Expired search results removed"),null;const i=JSON.parse(t);return console.log("[searchStorage] Restored search results from sessionStorage:",i.length),i}catch(t){return console.warn("[searchStorage] Failed to restore search results from sessionStorage:",t),null}},TP=()=>{sessionStorage.removeItem(Eb),sessionStorage.removeItem(Sb)};function CP(t={}){const{user:e}=rr(),[n,r]=M.useState([]),[i,a]=M.useState(!1),[s,o]=M.useState(null),{limit:c=50}=t;M.useEffect(()=>{if(!e)return;const g=FJ();g&&r(g)},[e]);const d=M.useCallback(g=>DJ(Ht,e,g,c),[e,c]),f=M.useCallback(async g=>{if(!e){o("ユーザーが認証されていません");return}a(!0),o(null);try{console.log("検索条件:",g);const y=d(g),x=await RJ({db:Ht,user:e,queries:y,resultLimit:c});console.log("全クエリ実行完了, 総結果数:",x.length),console.log("結果の内訳:",{books:x.filter(A=>A.type==="book").length,memos:x.filter(A=>A.type==="memo").length});const _=NJ(x,g);r(_),BJ(_)}catch(y){console.error("検索エラー:",y),o("検索中にエラーが発生しました")}finally{a(!1)}},[e,d]),p=M.useCallback(()=>{r([]),o(null),TP()},[]);return{results:n,loading:i,error:s,executeSearch:f,clearResults:p,setResults:r}}function VJ(){const{MIN_SEARCH_LENGTH:t,ERROR_MESSAGES:e}=iy,[n,r]=M.useState(""),[i,a]=M.useState(""),{getCached:s,setCached:o,clearCache:c,getCacheStats:d}=TJ(),{checkRateLimit:f,recordSearch:p,resetRateLimit:g}=CJ(),{executeSearch:y,results:x,loading:_}=CP(),[A,E]=M.useState(null),T=M.useRef(!1),C=M.useRef(""),D=M.useCallback(V=>V.trim().length<t?{valid:!1,error:e.TOO_SHORT(t)}:{valid:!0,error:null},[t,e]),k=M.useCallback(async()=>{const V=D(n);if(!V.valid){a(V.error);return}a("");const L=s(n);if(L){console.log("🎯 キャッシュヒット:",n),E(L);return}const P=f(n);if(!P.allowed){a(P.error);return}try{console.log("🔍 Firebase検索実行:",n),T.current=!0,C.current=n,E(null),await y({text:n,status:"all",dateRange:{type:"none"},selectedTags:[],sortBy:"updatedAt",sortOrder:"desc"})}catch(F){console.error("検索エラー:",F),a(e.SEARCH_FAILED),T.current=!1}},[n,D,f,s,y,o,p,e]),B=M.useCallback(V=>{r(V),i&&a("")},[i]),O=M.useCallback(()=>{E(null),r(""),a("")},[]),I=M.useCallback(()=>{c(),E(null)},[c]);return M.useEffect(()=>{if(T.current&&x&&x.length>=0&&!_){const V=C.current;console.log("📦 Firebase検索完了、キャッシュに保存:",V,"resultsCount:",x.length),o(V,x),p(V),T.current=!1}},[x,_,o,p]),{searchText:n,error:i,loading:_,results:A||x,handleSearch:k,handleSearchTextChange:B,clearResults:O,clearCache:I,validateSearchText:D,getCacheStats:d,resetRateLimit:g,canSearch:n.trim().length>=t&&!_}}function IP(t){const e=Zc(),n=Jc(),[r,i]=M.useState(!1),[a,s]=M.useState(null),[o,c]=M.useState(null),d=M.useCallback((g,y,x)=>{if(g==="book"){const _=n.pathname;e(`/book/${y}`,{state:{returnPath:_,searchState:{results:t}}})}else if(g==="memo"){const _=t.find(A=>A.type==="memo"&&A.id===x);_?(s(_),c(y),i(!0)):(console.warn("[useSearchResultHandler] Memo not found in results, navigating to book page"),e(`/book/${y}?memo=${x}`))}},[e,n.pathname,t]),f=M.useCallback(()=>{i(!1),s(null),c(null)},[]),p=M.useCallback(()=>v.jsx(KM,{open:r,memo:a,bookId:o,onClose:f,onUpdate:f,onDelete:f}),[r,a,o,f]);return{handleResultClick:d,memoDialogOpen:r,selectedMemo:a,selectedMemoBookId:o,closeMemoDialog:f,MemoDialog:p}}function jJ(){const{searchText:t,error:e,loading:n,results:r,handleSearch:i,handleSearchTextChange:a,clearResults:s,clearCache:o,getCacheStats:c,canSearch:d}=VJ(),{handleResultClick:f,MemoDialog:p}=IP(r),{PLACEHOLDER:g,DESCRIPTION:y}=iy,x=A=>{A.key==="Enter"&&d&&i()},_=c();return v.jsxs(re,{"data-testid":"full-text-search",children:[v.jsx(te,{variant:"body2",color:"text.secondary",sx:{mb:2},"data-testid":"full-text-search-description",children:y}),v.jsxs(re,{sx:{display:"flex",gap:1,mb:2},children:[v.jsx(xt,{fullWidth:!0,label:"検索キーワード",placeholder:g,value:t,onChange:A=>a(A.target.value),onKeyPress:x,error:!!e,helperText:e,autoFocus:!0,disabled:n,"data-testid":"full-text-search-input",InputProps:{endAdornment:t&&v.jsx(jr,{size:"small",onClick:s,"data-testid":"full-text-search-clear-input",children:v.jsx(Q3,{fontSize:"small"})})}}),v.jsx(Ke,{variant:"contained",onClick:i,disabled:!d,startIcon:n?v.jsx(C0,{size:20}):v.jsx(Hw,{}),"data-testid":"full-text-search-button",sx:{minWidth:100},children:n?"検索中...":"検索"})]}),_.totalItems>0&&v.jsxs(re,{sx:{display:"flex",alignItems:"center",gap:1,mb:2},children:[v.jsxs(te,{variant:"caption",color:"text.secondary","data-testid":"full-text-search-cache-info",children:["キャッシュ: ",_.validItems,"/",_.maxItems," 件"]}),v.jsx(VN,{title:"キャッシュをクリア",children:v.jsx(jr,{size:"small",onClick:o,"data-testid":"full-text-search-clear-cache",children:v.jsx(jN,{fontSize:"small"})})})]}),!n&&r&&r.length>0&&v.jsxs(re,{"data-testid":"full-text-search-results",children:[v.jsxs(te,{variant:"body2",color:"text.secondary",sx:{mb:1},children:[r.length," 件の結果"]}),v.jsx(ry,{results:r,onResultClick:f})]}),!n&&r&&r.length===0&&v.jsx(Ki,{severity:"info","data-testid":"full-text-search-no-results",children:"検索結果が見つかりませんでした"}),!n&&!r&&!e&&v.jsx(Ki,{severity:"info","data-testid":"full-text-search-initial",children:"キーワードを入力して検索してください"}),v.jsx(p,{})]})}function UJ(){const{user:t}=rr(),e=Jc(),[n,r]=M.useState(0),[i,a]=M.useState({text:"",status:"all",dateRange:{type:"none"},selectedTags:[],sortBy:"updatedAt",sortOrder:"desc"}),{results:s,loading:o,error:c,executeSearch:d,clearResults:f,setResults:p}=CP(),{handleResultClick:g,MemoDialog:y}=IP(s);M.useEffect(()=>{var D;const C=(D=e.state)==null?void 0:D.restoreSearch;C!=null&&C.results&&(console.log("[TagSearch] Restoring search state:",C),p(C.results))},[e.state,p]);const x=(C,D)=>{r(D)},_=C=>{a(C)},A=C=>{console.log("検索実行:",C),d(C)},E=()=>{f(),a({text:"",status:"all",dateRange:{type:"none"},selectedTags:[],sortBy:"updatedAt",sortOrder:"desc"})},T=C=>{console.log("タグがクリックされました:",C);const D={...i,selectedTags:[C],text:""};a(D),r(1),d(D)};return t?v.jsxs(re,{sx:{maxWidth:1e3,mx:"auto",mb:4,pb:"56px"},children:[v.jsx(G1,{title:"検索・タグ",subtitle:"高度な検索とタグ管理"}),v.jsxs(re,{sx:{px:{xs:1.5,sm:2,md:0}},children:[v.jsx(re,{sx:{borderBottom:1,borderColor:"divider",mb:2,position:"sticky",top:0,zIndex:1100,backgroundColor:"background.paper"},"data-testid":"tag-search-tabs-container",style:{position:"sticky",top:0,zIndex:1100},children:v.jsxs(v1,{value:n,onChange:x,centered:!0,"data-testid":"tag-search-tabs",children:[v.jsx(ga,{label:"全文検索",id:"tag-search-tab-0","aria-controls":"tag-search-tabpanel-0","data-testid":"full-text-search-tab"}),v.jsx(ga,{label:"詳細検索",id:"tag-search-tab-1","aria-controls":"tag-search-tabpanel-1","data-testid":"advanced-search-tab"}),v.jsx(ga,{label:"タグ管理",id:"tag-search-tab-2","aria-controls":"tag-search-tabpanel-2","data-testid":"tag-management-tab"})]})}),v.jsx(Qx,{value:n,index:0,"data-testid":"full-text-search-tab-panel",children:v.jsx(HJ,{})}),v.jsx(Qx,{value:n,index:1,"data-testid":"advanced-search-tab-panel",children:v.jsx(zJ,{searchConditions:i,onSearchConditionsChange:_,onSearch:A,results:s,loading:o,error:c,onResultClick:g,onClearSearch:E})}),v.jsx(Qx,{value:n,index:2,"data-testid":"tag-management-tab-panel",children:v.jsx($J,{onTagClick:T})}),v.jsx(y,{})]})]}):v.jsx(re,{sx:{maxWidth:600,mx:"auto",mt:4,p:2},children:v.jsx(te,{variant:"h6",color:"error",children:"ログインが必要です"})})}function HJ(){return v.jsxs(re,{children:[v.jsx(te,{variant:"h5",gutterBottom:!0,children:"全文検索"}),v.jsx(te,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"シンプルな検索で書籍・メモを素早く見つけられます。"}),v.jsx(jJ,{})]})}function zJ({searchConditions:t,onSearchConditionsChange:e,onSearch:n,results:r,loading:i,error:a,onResultClick:s,onClearSearch:o}){return v.jsxs(re,{children:[v.jsx(te,{variant:"h5",gutterBottom:!0,children:"詳細検索"}),v.jsx(te,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"タイトル・著者・タグ・メモ内容・日付などで詳細に絞り込みできます。"}),v.jsx(SJ,{searchConditions:t,onSearchConditionsChange:e,onSearch:n}),a&&v.jsx(re,{sx:{mt:2},children:v.jsx(Ki,{severity:"error",children:a})}),(r.length>0||i)&&v.jsx(re,{sx:{mt:4},children:v.jsx(ry,{results:r,loading:i,searchQuery:t.text,onResultClick:s})}),r.length>0&&!i&&v.jsx(re,{sx:{mt:2,textAlign:"center"},children:v.jsx(te,{variant:"body2",color:"primary",sx:{cursor:"pointer",textDecoration:"underline"},onClick:o,children:"検索結果をクリア"})})]})}function $J({onTagClick:t}){return v.jsxs(re,{children:[v.jsx(te,{variant:"h5",gutterBottom:!0,children:"タグ管理"}),v.jsx(te,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"統計を確認し、タグクリックで検索できます。"}),v.jsx(bJ,{onTagClick:t})]})}function zg(t,e,n=1){if(!e)return;const r=t.get(e)||0;t.set(e,r+n)}function GJ(){const{user:t}=rr(),e=M.useContext(ri),n=(e==null?void 0:e.setGlobalError)||(()=>{}),[r,i]=M.useState(!0),[a,s]=M.useState(null),[o,c]=M.useState([]),[d,f]=M.useState([]);M.useEffect(()=>{let C=!1;async function D(){if(!t){c([]),f([]),i(!1);return}i(!0),s(null);try{const k=jn(pr(Ht,"books"),wn("userId","==",t.uid)),O=(await Jn(k)).docs.map(L=>({id:L.id,...L.data()})),I=jn(wl(Ht,"memos"),wn("userId","==",t.uid)),V=(await Jn(I)).docs.map(L=>({id:L.id,...L.data()}));C||(c(O),f(V))}catch(k){console.error("Failed to load stats:",k),C||(s("統計情報の取得に失敗しました。"),n("統計情報の取得に失敗しました。"))}finally{C||i(!1)}}return D(),()=>{C=!0}},[t]);const p=M.useMemo(()=>{const C=o.length,D=o.filter(I=>(I.status||Ar)===ut.TSUNDOKU).length,k=o.filter(I=>(I.status||Ar)===ut.READING).length,B=o.filter(I=>(I.status||Ar)===ut.RE_READING).length,O=o.filter(I=>(I.status||Ar)===ut.FINISHED).length;return{totalBooks:C,tsundokuBooks:D,readingBooks:k,reReadingBooks:B,finishedBooks:O}},[o]),g=M.useMemo(()=>{const C=o.filter(O=>(O.status||Ar)===ut.TSUNDOKU).length,D=o.filter(O=>(O.status||Ar)===ut.READING).length,k=o.filter(O=>(O.status||Ar)===ut.RE_READING).length,B=o.filter(O=>(O.status||Ar)===ut.FINISHED).length;return{tsundoku:C,reading:D,reReading:k,finished:B}},[o]),y=M.useMemo(()=>{const C=new Map,D=new Map;for(const O of o){const I=Array.isArray(O.tags)?O.tags:[];for(const R of I)zg(C,String(R).trim())}for(const O of d){const I=Array.isArray(O.tags)?O.tags:[];for(const R of I)zg(D,String(R).trim())}const k=new Set([...C.keys(),...D.keys()]),B=[];for(const O of k){const I=C.get(O)||0,R=D.get(O)||0;B.push({tag:O,bookCount:I,memoCount:R,totalCount:I+R})}return B.sort((O,I)=>I.totalCount-O.totalCount||O.tag.localeCompare(I.tag)),B},[o,d]),x=M.useMemo(()=>{var B;const C=new Date,D=[],k=new Map;for(let O=11;O>=0;O-=1){const I=new Date(C.getFullYear(),C.getMonth()-O,1),R=`${I.getFullYear()}-${String(I.getMonth()+1).padStart(2,"0")}`;k.set(R,D.length),D.push({key:R,year:I.getFullYear(),month:I.getMonth()+1,count:0})}for(const O of o){const I=O.status||"reading",R=O.finishedAt||O.updatedAt||O.createdAt;if(!R||I!=="finished")continue;const V=typeof(R==null?void 0:R.toDate)=="function"?R.toDate():new Date(R);if(Number.isNaN((B=V==null?void 0:V.getTime)==null?void 0:B.call(V)))continue;const L=`${V.getFullYear()}-${String(V.getMonth()+1).padStart(2,"0")}`;if(!k.has(L))continue;const P=k.get(L);D[P].count+=1}return D},[o]),_=M.useMemo(()=>{var B;const C=new Date,D=[],k=new Map;for(let O=11;O>=0;O-=1){const I=new Date(C.getFullYear(),C.getMonth()-O,1),R=`${I.getFullYear()}-${String(I.getMonth()+1).padStart(2,"0")}`;k.set(R,D.length),D.push({key:R,year:I.getFullYear(),month:I.getMonth()+1,count:0})}for(const O of o){const I=O.createdAt||O.updatedAt||O.finishedAt;if(!I)continue;const R=typeof(I==null?void 0:I.toDate)=="function"?I.toDate():new Date(I);if(Number.isNaN((B=R==null?void 0:R.getTime)==null?void 0:B.call(R)))continue;const V=`${R.getFullYear()}-${String(R.getMonth()+1).padStart(2,"0")}`;if(!k.has(V))continue;const L=k.get(V);D[L].count+=1}return D},[o]),A=M.useMemo(()=>{var B;const C=new Date,D=[],k=new Map;for(let O=11;O>=0;O-=1){const I=new Date(C.getFullYear(),C.getMonth()-O,1),R=`${I.getFullYear()}-${String(I.getMonth()+1).padStart(2,"0")}`;k.set(R,D.length),D.push({key:R,year:I.getFullYear(),month:I.getMonth()+1,count:0})}for(const O of d){const I=O.createdAt||O.updatedAt;if(!I)continue;const R=typeof(I==null?void 0:I.toDate)=="function"?I.toDate():new Date(I);if(Number.isNaN((B=R==null?void 0:R.getTime)==null?void 0:B.call(R)))continue;const V=`${R.getFullYear()}-${String(R.getMonth()+1).padStart(2,"0")}`;if(!k.has(V))continue;const L=k.get(V);D[L].count+=1}return D},[d]),E=M.useMemo(()=>{const C=new Map;for(const k of o){const B=(k.author||"").toString().trim();B&&zg(C,B)}const D=[...C.entries()].map(([k,B])=>({author:k,total:B}));return D.sort((k,B)=>B.total-k.total||k.author.localeCompare(B.author)),D},[o]),T=M.useMemo(()=>{const C=new Map;for(const k of o){const B=(k.publisher||"").toString().trim();B&&zg(C,B)}const D=[...C.entries()].map(([k,B])=>({publisher:k,total:B}));return D.sort((k,B)=>B.total-k.total||k.publisher.localeCompare(B.publisher)),D},[o]);return{loading:r,error:a,summary:p,tagStats:y,monthlyFinished:x,monthlyAddedBooks:_,monthlyMemos:A,topAuthors:E,topPublishers:T,statusDistribution:g}}const Tb="DEFAULT_X_AXIS_KEY",Cb="DEFAULT_Y_AXIS_KEY",WJ={top:20,bottom:20,left:20,right:20},YJ=45,qJ=25,DP=20;class XJ{constructor(e){this.value=void 0,this.listeners=void 0,this.subscribe=n=>(this.listeners.add(n),()=>{this.listeners.delete(n)}),this.getSnapshot=()=>this.value,this.update=n=>{const r=n(this.value);r!==this.value&&(this.value=r,this.listeners.forEach(i=>i(r)))},this.value=e,this.listeners=new Set}}const ay=({params:t,store:e})=>{M.useEffect(()=>{e.update(r=>H({},r,{animation:H({},r.animation,{skip:t.skipAnimation})}))},[e,t.skipAnimation]);const n=M.useCallback(()=>{let r=!1;return e.update(i=>H({},i,{animation:H({},i.animation,{skipAnimationRequests:i.animation.skipAnimationRequests+1})})),()=>{r||(r=!0,e.update(i=>H({},i,{animation:H({},i.animation,{skipAnimationRequests:i.animation.skipAnimationRequests-1})})))}},[e]);return Wn(()=>{if(typeof window>"u"||!(window!=null&&window.matchMedia))return;let i;const a=o=>{o.matches?i=n():i==null||i()},s=window.matchMedia("(prefers-reduced-motion)");return a(s),s.addEventListener("change",a),()=>{s.removeEventListener("change",a)}},[n,e]),{instance:{disableAnimation:n}}};ay.params={skipAnimation:!0};ay.getDefaultizedParams=({params:t})=>H({},t,{skipAnimation:t.skipAnimation??!1});ay.getInitialState=({skipAnimation:t})=>({animation:{skip:t,skipAnimationRequests:0}});var Xm=Symbol("NOT_FOUND");function KJ(t,e=`expected a function, instead received ${typeof t}`){if(typeof t!="function")throw new TypeError(e)}function QJ(t,e=`expected an object, instead received ${typeof t}`){if(typeof t!="object")throw new TypeError(e)}function ZJ(t,e="expected all items to be functions, instead received the following types: "){if(!t.every(n=>typeof n=="function")){const n=t.map(r=>typeof r=="function"?`function ${r.name||"unnamed"}()`:typeof r).join(", ");throw new TypeError(`${e}[${n}]`)}}var DD=t=>Array.isArray(t)?t:[t];function JJ(t){const e=Array.isArray(t[0])?t[0]:t;return ZJ(e,"createSelector expects all input-selectors to be functions, but received the following types: "),e}function eee(t,e){const n=[],{length:r}=t;for(let i=0;i<r;i++)n.push(t[i].apply(null,e));return n}function tee(t){let e;return{get(n){return e&&t(e.key,n)?e.value:Xm},put(n,r){e={key:n,value:r}},getEntries(){return e?[e]:[]},clear(){e=void 0}}}function nee(t,e){let n=[];function r(o){const c=n.findIndex(d=>e(o,d.key));if(c>-1){const d=n[c];return c>0&&(n.splice(c,1),n.unshift(d)),d.value}return Xm}function i(o,c){r(o)===Xm&&(n.unshift({key:o,value:c}),n.length>t&&n.pop())}function a(){return n}function s(){n=[]}return{get:r,put:i,getEntries:a,clear:s}}var ree=(t,e)=>t===e;function iee(t){return function(n,r){if(n===null||r===null||n.length!==r.length)return!1;const{length:i}=n;for(let a=0;a<i;a++)if(!t(n[a],r[a]))return!1;return!0}}function aee(t,e){const n=typeof e=="object"?e:{equalityCheck:e},{equalityCheck:r=ree,maxSize:i=1,resultEqualityCheck:a}=n,s=iee(r);let o=0;const c=i<=1?tee(s):nee(i,s);function d(){let f=c.get(arguments);if(f===Xm){if(f=t.apply(null,arguments),o++,a){const g=c.getEntries().find(y=>a(y.value,f));g&&(f=g.value,o!==0&&o--)}c.put(arguments,f)}return f}return d.clearCache=()=>{c.clear(),d.resetResultsCount()},d.resultsCount=()=>o,d.resetResultsCount=()=>{o=0},d}var see=class{constructor(t){this.value=t}deref(){return this.value}},oee=typeof WeakRef<"u"?WeakRef:see,lee=0,RD=1;function $g(){return{s:lee,v:void 0,o:null,p:null}}function RP(t,e={}){let n=$g();const{resultEqualityCheck:r}=e;let i,a=0;function s(){var p;let o=n;const{length:c}=arguments;for(let g=0,y=c;g<y;g++){const x=arguments[g];if(typeof x=="function"||typeof x=="object"&&x!==null){let _=o.o;_===null&&(o.o=_=new WeakMap);const A=_.get(x);A===void 0?(o=$g(),_.set(x,o)):o=A}else{let _=o.p;_===null&&(o.p=_=new Map);const A=_.get(x);A===void 0?(o=$g(),_.set(x,o)):o=A}}const d=o;let f;if(o.s===RD)f=o.v;else if(f=t.apply(null,arguments),a++,r){const g=((p=i==null?void 0:i.deref)==null?void 0:p.call(i))??i;g!=null&&r(g,f)&&(f=g,a!==0&&a--),i=typeof f=="object"&&f!==null||typeof f=="function"?new oee(f):f}return d.s=RD,d.v=f,f}return s.clearCache=()=>{n=$g(),s.resetResultsCount()},s.resultsCount=()=>a,s.resetResultsCount=()=>{a=0},s}function OP(t,...e){const n=typeof t=="function"?{memoize:t,memoizeOptions:e}:t,r=(...i)=>{let a=0,s=0,o,c={},d=i.pop();typeof d=="object"&&(c=d,d=i.pop()),KJ(d,`createSelector expects an output function after the inputs, but received: [${typeof d}]`);const f={...n,...c},{memoize:p,memoizeOptions:g=[],argsMemoize:y=RP,argsMemoizeOptions:x=[]}=f,_=DD(g),A=DD(x),E=JJ(i),T=p(function(){return a++,d.apply(null,arguments)},..._),C=y(function(){s++;const k=eee(E,arguments);return o=T.apply(null,k),o},...A);return Object.assign(C,{resultFunc:d,memoizedResultFunc:T,dependencies:E,dependencyRecomputations:()=>s,resetDependencyRecomputations:()=>{s=0},lastResult:()=>o,recomputations:()=>a,resetRecomputations:()=>{a=0},memoize:p,argsMemoize:y})};return Object.assign(r,{withTypes:()=>r}),r}var cee=OP(RP),uee=Object.assign((t,e=cee)=>{QJ(t,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof t}`);const n=Object.keys(t),r=n.map(a=>t[a]);return e(r,(...a)=>a.reduce((s,o,c)=>(s[n[c]]=o,s),{}))},{withTypes:()=>uee});const dee=OP({memoize:aee,memoizeOptions:{maxSize:1,equalityCheck:Object.is}}),OD=new WeakMap,We=(...t)=>(n,...r)=>{const i=n.cacheKey;let a=OD.get(i);a||(a=new Map,OD.set(i,a));const s=a.get(t);if(s)return s(n,...r);const o=dee(...t);return a.set(t,o),o(n,...r)},fee=t=>t.animation,hee=We([fee],t=>t.skip||t.skipAnimationRequests>0);var Zx={exports:{}},Jx={},e2={exports:{}},t2={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var MD;function pee(){if(MD)return t2;MD=1;var t=Gw();function e(p,g){return p===g&&(p!==0||1/p===1/g)||p!==p&&g!==g}var n=typeof Object.is=="function"?Object.is:e,r=t.useState,i=t.useEffect,a=t.useLayoutEffect,s=t.useDebugValue;function o(p,g){var y=g(),x=r({inst:{value:y,getSnapshot:g}}),_=x[0].inst,A=x[1];return a(function(){_.value=y,_.getSnapshot=g,c(_)&&A({inst:_})},[p,y,g]),i(function(){return c(_)&&A({inst:_}),p(function(){c(_)&&A({inst:_})})},[p]),s(y),y}function c(p){var g=p.getSnapshot;p=p.value;try{var y=g();return!n(p,y)}catch{return!0}}function d(p,g){return g()}var f=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?d:o;return t2.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:f,t2}var PD;function gee(){return PD||(PD=1,e2.exports=pee()),e2.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kD;function mee(){if(kD)return Jx;kD=1;var t=Gw(),e=gee();function n(d,f){return d===f&&(d!==0||1/d===1/f)||d!==d&&f!==f}var r=typeof Object.is=="function"?Object.is:n,i=e.useSyncExternalStore,a=t.useRef,s=t.useEffect,o=t.useMemo,c=t.useDebugValue;return Jx.useSyncExternalStoreWithSelector=function(d,f,p,g,y){var x=a(null);if(x.current===null){var _={hasValue:!1,value:null};x.current=_}else _=x.current;x=o(function(){function E(B){if(!T){if(T=!0,C=B,B=g(B),y!==void 0&&_.hasValue){var O=_.value;if(y(O,B))return D=O}return D=B}if(O=D,r(C,B))return O;var I=g(B);return y!==void 0&&y(O,I)?(C=B,O):(C=B,D=I)}var T=!1,C,D,k=p===void 0?null:p;return[function(){return E(f())},k===null?void 0:function(){return E(k())}]},[f,p,g,y]);var A=i(d,x[0],x[1]);return s(function(){_.hasValue=!0,_.value=A},[A]),c(A),A},Jx}var ND;function yee(){return ND||(ND=1,Zx.exports=mee()),Zx.exports}var vee=yee();const xee=Object.is,ft=(t,e,n=[],r=xee)=>{const i=a=>e(a,...n);return vee.useSyncExternalStoreWithSelector(t.subscribe,t.getSnapshot,t.getSnapshot,i,r)},su=t=>{var e;return(e=t.cartesianAxis)==null?void 0:e.x},hf=t=>{var e;return(e=t.cartesianAxis)==null?void 0:e.y},wee=We([hf],t=>(t??[]).reduce((e,n)=>{var r;return n.position==="left"?e+(n.width||0)+((r=n.zoom)!=null&&r.slider.enabled?n.zoom.slider.size:0):e},0)),_ee=We([hf],t=>(t??[]).reduce((e,n)=>{var r;return n.position==="right"?e+(n.width||0)+((r=n.zoom)!=null&&r.slider.enabled?n.zoom.slider.size:0):e},0)),bee=We([su],t=>(t??[]).reduce((e,n)=>{var r;return n.position==="top"?e+(n.height||0)+((r=n.zoom)!=null&&r.slider.enabled?n.zoom.slider.size:0):e},0)),Aee=We([su],t=>(t??[]).reduce((e,n)=>{var r;return n.position==="bottom"?e+(n.height||0)+((r=n.zoom)!=null&&r.slider.enabled?n.zoom.slider.size:0):e},0)),Eee=t=>t.dimensions,MP=t=>t.dimensions.width,PP=t=>t.dimensions.height,See=t=>t.dimensions.margin.top,Tee=t=>t.dimensions.margin.right,Cee=t=>t.dimensions.margin.bottom,Iee=t=>t.dimensions.margin.left,Do=We([MP,PP,See,Tee,Cee,Iee,bee,_ee,Aee,wee],(t,e,n,r,i,a,s,o,c,d)=>({width:t-a-r-d-o,left:a+d,right:r+o,height:e-n-i-s-c,top:n+s,bottom:i+c})),kP=We([Eee],t=>({width:t.propsWidth,height:t.propsHeight})),Dee=We([MP,PP],(t,e)=>({width:t,height:e}));function NP(t,e){return typeof t=="number"?{top:t,bottom:t,left:t,right:t}:e?H({},e,t):t}const Ree=10,sy=({params:t,store:e,svgRef:n})=>{const r=t.width!==void 0&&t.height!==void 0,i=M.useRef({displayError:!1,initialCompute:!0,computeRun:0}),[a,s]=M.useState(0),[o,c]=M.useState(0),d=M.useCallback(()=>{const x=n==null?void 0:n.current;if(!x)return{};const A=UN(x).getComputedStyle(x),E=Math.floor(parseFloat(A.height))||0,T=Math.floor(parseFloat(A.width))||0;return e.update(C=>C.dimensions.width===T&&C.dimensions.height===E?C:H({},C,{dimensions:{margin:{top:t.margin.top,right:t.margin.right,bottom:t.margin.bottom,left:t.margin.left},width:t.width??T,height:t.height??E,propsWidth:t.width,propsHeight:t.height}})),{height:E,width:T}},[e,n,t.height,t.width,t.margin.left,t.margin.right,t.margin.top,t.margin.bottom]);M.useEffect(()=>{e.update(x=>{const _=t.width??x.dimensions.width,A=t.height??x.dimensions.height;return H({},x,{dimensions:{margin:{top:t.margin.top,right:t.margin.right,bottom:t.margin.bottom,left:t.margin.left},width:_,height:A,propsHeight:t.height,propsWidth:t.width}})})},[e,t.height,t.width,t.margin.left,t.margin.right,t.margin.top,t.margin.bottom]),M.useEffect(()=>{i.current.displayError=!0},[]),Wn(()=>{if(r||!i.current.initialCompute||i.current.computeRun>Ree)return;const x=d();x.width!==a||x.height!==o?(i.current.computeRun+=1,x.width!==void 0&&s(x.width),x.height!==void 0&&c(x.height)):i.current.initialCompute&&(i.current.initialCompute=!1)},[o,a,d,r]),Wn(()=>{if(r)return()=>{};d();const x=n.current;if(typeof ResizeObserver>"u")return()=>{};let _;const A=new ResizeObserver(()=>{_=requestAnimationFrame(()=>{d()})});return x&&A.observe(x),()=>{_&&cancelAnimationFrame(_),x&&A.unobserve(x)}},[d,r,n]);const f=ft(e,Do),p=M.useCallback(x=>x>=f.left-1&&x<=f.left+f.width,[f.left,f.width]),g=M.useCallback(x=>x>=f.top-1&&x<=f.top+f.height,[f.height,f.top]);return{instance:{isPointInside:M.useCallback((x,_,A)=>A&&"closest"in A&&A.closest("[data-drawing-container]")?!0:p(x)&&g(_),[p,g]),isXInside:p,isYInside:g}}};sy.params={width:!0,height:!0,margin:!0};sy.getDefaultizedParams=({params:t})=>H({},t,{margin:NP(t.margin,WJ)});sy.getInitialState=({width:t,height:e,margin:n})=>({dimensions:{margin:n,width:t??0,height:e??0,propsWidth:t,propsHeight:e}});const Ib=({params:t,store:e})=>(Wn(()=>{e.update(n=>H({},n,{experimentalFeatures:t.experimentalFeatures}))},[e,t.experimentalFeatures]),{});Ib.params={experimentalFeatures:!0};Ib.getInitialState=({experimentalFeatures:t})=>({experimentalFeatures:t});const Oee=t=>t.experimentalFeatures,LP=We([Oee],t=>!!(t!=null&&t.preferStrictDomainInLineCharts));let LD=0;const Mee=()=>(LD+=1,`mui-chart-${LD}`),Db=({params:t,store:e})=>(M.useEffect(()=>{e.update(n=>t.id===void 0||t.id===n.id.providedChartId&&n.id.chartId!==void 0?n:H({},n,{id:H({},n.id,{chartId:t.id??Mee()})}))},[e,t.id]),{});Db.params={id:!0};Db.getInitialState=({id:t})=>({id:{chartId:t,providedChartId:t}});const Pee=t=>t.id,kee=We([Pee],t=>t.chartId),Nee=["#4254FB","#FFB422","#FA4F58","#0DBEFF","#22BF75","#FA83B4","#FF7511"],Lee=["#495AFB","#FFC758","#F35865","#30C8FF","#44CE8D","#F286B3","#FF8C39"],BP=t=>t==="dark"?Lee:Nee,FP=({series:t,colors:e,seriesConfig:n,dataset:r})=>{const i={};t.forEach((s,o)=>{var f;const c=n[s.type].getSeriesWithDefaultValues(s,o,e),d=c.id;if(i[s.type]===void 0&&(i[s.type]={series:{},seriesOrder:[]}),((f=i[s.type])==null?void 0:f.series[d])!==void 0)throw new Error(`MUI X Charts: series' id "${d}" is not unique.`);i[s.type].series[d]=c,i[s.type].seriesOrder.push(d)});const a={};return Object.keys(n).forEach(s=>{var c,d;const o=i[s];o!==void 0&&(a[s]=((d=(c=n[s])==null?void 0:c.seriesProcessor)==null?void 0:d.call(c,o,r))??i[s])}),a},oy=({params:t,store:e,seriesConfig:n})=>{const{series:r,dataset:i,theme:a,colors:s}=t,o=M.useRef(!0);return M.useEffect(()=>{if(o.current){o.current=!1;return}e.update(c=>H({},c,{series:H({},c.series,{processedSeries:FP({series:r,colors:typeof s=="function"?s(a):s,seriesConfig:n,dataset:i})})}))},[s,i,r,a,n,e]),{}};oy.params={dataset:!0,series:!0,colors:!0,theme:!0};const Bee=[];oy.getDefaultizedParams=({params:t})=>{var e;return H({},t,{series:(e=t.series)!=null&&e.length?t.series:Bee,colors:t.colors??BP,theme:t.theme??"light"})};oy.getInitialState=({series:t=[],colors:e,theme:n,dataset:r},i,a)=>({series:{seriesConfig:a,processedSeries:FP({series:t,colors:typeof e=="function"?e(n):e,seriesConfig:a,dataset:r})}});const VP=t=>t.series,Ka=We([VP],t=>t.processedSeries),Ro=We([VP],t=>t.seriesConfig),Fee={abort:!0,animationcancel:!0,animationend:!0,animationiteration:!0,animationstart:!0,auxclick:!0,beforeinput:!0,beforetoggle:!0,blur:!0,cancel:!0,canplay:!0,canplaythrough:!0,change:!0,click:!0,close:!0,compositionend:!0,compositionstart:!0,compositionupdate:!0,contextlost:!0,contextmenu:!0,contextrestored:!0,copy:!0,cuechange:!0,cut:!0,dblclick:!0,drag:!0,dragend:!0,dragenter:!0,dragleave:!0,dragover:!0,dragstart:!0,drop:!0,durationchange:!0,emptied:!0,ended:!0,error:!0,focus:!0,focusin:!0,focusout:!0,formdata:!0,gotpointercapture:!0,input:!0,invalid:!0,keydown:!0,keypress:!0,keyup:!0,load:!0,loadeddata:!0,loadedmetadata:!0,loadstart:!0,lostpointercapture:!0,mousedown:!0,mouseenter:!0,mouseleave:!0,mousemove:!0,mouseout:!0,mouseover:!0,mouseup:!0,paste:!0,pause:!0,play:!0,playing:!0,pointercancel:!0,pointerdown:!0,pointerenter:!0,pointerleave:!0,pointermove:!0,pointerout:!0,pointerover:!0,pointerup:!0,progress:!0,ratechange:!0,reset:!0,resize:!0,scroll:!0,scrollend:!0,securitypolicyviolation:!0,seeked:!0,seeking:!0,select:!0,selectionchange:!0,selectstart:!0,slotchange:!0,stalled:!0,submit:!0,suspend:!0,timeupdate:!0,toggle:!0,touchcancel:!0,touchend:!0,touchmove:!0,touchstart:!0,transitioncancel:!0,transitionend:!0,transitionrun:!0,transitionstart:!0,volumechange:!0,waiting:!0,webkitanimationend:!0,webkitanimationiteration:!0,webkitanimationstart:!0,webkittransitionend:!0,wheel:!0,beforematch:!0,pointerrawupdate:!0};class jP{constructor(e){if(this.name=void 0,this.preventDefault=void 0,this.stopPropagation=void 0,this.preventIf=void 0,this.requiredKeys=void 0,this.keyboardManager=void 0,this.pointerMode=void 0,this.customData={},this.pointerManager=void 0,this.gesturesRegistry=void 0,this.element=void 0,this.state=void 0,this.isSinglePhase=void 0,this.eventType=void 0,this.optionsType=void 0,this.mutableOptionsType=void 0,this.mutableStateType=void 0,!e||!e.name)throw new Error("Gesture must be initialized with a valid name.");if(e.name in Fee)throw new Error(`Gesture can't be created with a native event name. Tried to use "${e.name}". Please use a custom name instead.`);this.name=e.name,this.preventDefault=e.preventDefault??!1,this.stopPropagation=e.stopPropagation??!1,this.preventIf=e.preventIf??[],this.requiredKeys=e.requiredKeys??[],this.pointerMode=e.pointerMode??[]}init(e,n,r,i){this.element=e,this.pointerManager=n,this.gesturesRegistry=r,this.keyboardManager=i;const a=`${this.name}ChangeOptions`;this.element.addEventListener(a,this.handleOptionsChange.bind(this));const s=`${this.name}ChangeState`;this.element.addEventListener(s,this.handleStateChange.bind(this))}handleOptionsChange(e){e&&e.detail&&this.updateOptions(e.detail)}updateOptions(e){this.preventDefault=e.preventDefault??this.preventDefault,this.stopPropagation=e.stopPropagation??this.stopPropagation,this.preventIf=e.preventIf??this.preventIf,this.requiredKeys=e.requiredKeys??this.requiredKeys,this.pointerMode=e.pointerMode??this.pointerMode}handleStateChange(e){e&&e.detail&&this.updateState(e.detail)}updateState(e){Object.assign(this.state,e)}getTargetElement(e){return this.isActive||this.element===e.target||"contains"in this.element&&this.element.contains(e.target)||"getRootNode"in this.element&&this.element.getRootNode()instanceof ShadowRoot&&e.composedPath().includes(this.element)?this.element:null}set isActive(e){e?this.gesturesRegistry.registerActiveGesture(this.element,this):this.gesturesRegistry.unregisterActiveGesture(this.element,this)}get isActive(){return this.gesturesRegistry.isGestureActive(this.element,this)??!1}shouldPreventGesture(e){if(!this.keyboardManager.areKeysPressed(this.requiredKeys))return!0;if(this.preventIf.length===0)return!1;const n=this.gesturesRegistry.getActiveGestures(e);return this.preventIf.some(r=>n[r])}isPointerTypeAllowed(e){return!this.pointerMode||this.pointerMode.length===0?!0:this.pointerMode.includes(e)}destroy(){const e=`${this.name}ChangeOptions`;this.element.removeEventListener(e,this.handleOptionsChange.bind(this));const n=`${this.name}ChangeState`;this.element.removeEventListener(n,this.handleStateChange.bind(this))}}class Vee{constructor(){this.activeGestures=new Map}registerActiveGesture(e,n){this.activeGestures.has(e)||this.activeGestures.set(e,new Set);const r=this.activeGestures.get(e),i={gesture:n,element:e};r.add(i)}unregisterActiveGesture(e,n){const r=this.activeGestures.get(e);r&&(r.forEach(i=>{i.gesture===n&&r.delete(i)}),r.size===0&&this.activeGestures.delete(e))}getActiveGestures(e){const n=this.activeGestures.get(e);return n?Array.from(n).reduce((r,i)=>(r[i.gesture.name]=!0,r),{}):{}}isGestureActive(e,n){const r=this.activeGestures.get(e);return r?Array.from(r).some(i=>i.gesture===n):!1}destroy(){this.activeGestures.clear()}unregisterElement(e){this.activeGestures.delete(e)}}class jee{constructor(){this.pressedKeys=new Set,this.handleKeyDown=e=>{this.pressedKeys.add(e.key)},this.handleKeyUp=e=>{this.pressedKeys.delete(e.key)},this.clearKeys=()=>{this.pressedKeys.clear()},this.initialize()}initialize(){typeof window>"u"||(window.addEventListener("keydown",this.handleKeyDown),window.addEventListener("keyup",this.handleKeyUp),window.addEventListener("blur",this.clearKeys))}areKeysPressed(e){return!e||e.length===0?!0:e.every(n=>n==="ControlOrMeta"?this.pressedKeys.has("Control")||this.pressedKeys.has("Meta"):this.pressedKeys.has(n))}destroy(){typeof window<"u"&&(window.removeEventListener("keydown",this.handleKeyDown),window.removeEventListener("keyup",this.handleKeyUp),window.removeEventListener("blur",this.clearKeys)),this.clearKeys()}}class Uee{constructor(e){this.root=void 0,this.touchAction=void 0,this.passive=void 0,this.preventEventInterruption=!0,this.pointers=new Map,this.gestureHandlers=new Set,this.handleInterruptEvents=n=>{if(this.preventEventInterruption&&"pointerType"in n&&n.pointerType==="touch"){n.preventDefault();return}const r=new PointerEvent("forceCancel",{bubbles:!1,cancelable:!1}),i=this.pointers.values().next().value;if(this.pointers.size>0&&i){Object.defineProperties(r,{clientX:{value:i.clientX},clientY:{value:i.clientY},pointerId:{value:i.pointerId},pointerType:{value:i.pointerType}});for(const[a,s]of this.pointers.entries()){const o=H({},s,{type:"forceCancel"});this.pointers.set(a,o)}}this.notifyHandlers(r),this.pointers.clear()},this.handlePointerEvent=n=>{const{type:r,pointerId:i}=n;if(r==="pointerdown"||r==="pointermove")this.pointers.set(i,this.createPointerData(n));else if(r==="pointerup"||r==="pointercancel"||r==="forceCancel"){this.pointers.set(i,this.createPointerData(n)),this.notifyHandlers(n),this.pointers.delete(i);return}this.notifyHandlers(n)},this.root=e.root??document.getRootNode({composed:!0}),this.touchAction=e.touchAction||"auto",this.passive=e.passive??!1,this.preventEventInterruption=e.preventEventInterruption??!1,this.setupEventListeners()}registerGestureHandler(e){return this.gestureHandlers.add(e),()=>{this.gestureHandlers.delete(e)}}getPointers(){return new Map(this.pointers)}setupEventListeners(){this.touchAction!=="auto"&&(this.root.style.touchAction=this.touchAction),this.root.addEventListener("pointerdown",this.handlePointerEvent,{passive:this.passive}),this.root.addEventListener("pointermove",this.handlePointerEvent,{passive:this.passive}),this.root.addEventListener("pointerup",this.handlePointerEvent,{passive:this.passive}),this.root.addEventListener("pointercancel",this.handlePointerEvent,{passive:this.passive}),this.root.addEventListener("forceCancel",this.handlePointerEvent,{passive:this.passive}),this.root.addEventListener("blur",this.handleInterruptEvents),this.root.addEventListener("contextmenu",this.handleInterruptEvents)}notifyHandlers(e){this.gestureHandlers.forEach(n=>n(this.pointers,e))}createPointerData(e){return{pointerId:e.pointerId,clientX:e.clientX,clientY:e.clientY,pageX:e.pageX,pageY:e.pageY,target:e.target,timeStamp:e.timeStamp,type:e.type,isPrimary:e.isPrimary,pressure:e.pressure,width:e.width,height:e.height,pointerType:e.pointerType,srcEvent:e}}destroy(){this.root.removeEventListener("pointerdown",this.handlePointerEvent),this.root.removeEventListener("pointermove",this.handlePointerEvent),this.root.removeEventListener("pointerup",this.handlePointerEvent),this.root.removeEventListener("pointercancel",this.handlePointerEvent),this.root.removeEventListener("forceCancel",this.handlePointerEvent),this.root.removeEventListener("blur",this.handleInterruptEvents),this.root.removeEventListener("contextmenu",this.handleInterruptEvents),this.pointers.clear(),this.gestureHandlers.clear()}}class Hee{constructor(e){this.gestureTemplates=new Map,this.elementGestureMap=new Map,this.activeGesturesRegistry=new Vee,this.pointerManager=void 0,this.keyboardManager=new jee,this.pointerManager=new Uee({root:e.root,touchAction:e.touchAction,passive:e.passive}),e.gestures&&e.gestures.length>0&&e.gestures.forEach(n=>{this.addGestureTemplate(n)})}addGestureTemplate(e){this.gestureTemplates.has(e.name)&&console.warn(`Gesture template with name "${e.name}" already exists. It will be overwritten.`),this.gestureTemplates.set(e.name,e)}setGestureOptions(e,n,r){const i=this.elementGestureMap.get(n);if(!i||!i.has(e)){console.error(`Gesture "${e}" not found on the provided element.`);return}const a=new CustomEvent(`${e}ChangeOptions`,{detail:r,bubbles:!1,cancelable:!1,composed:!1});n.dispatchEvent(a)}setGestureState(e,n,r){const i=this.elementGestureMap.get(n);if(!i||!i.has(e)){console.error(`Gesture "${e}" not found on the provided element.`);return}const a=new CustomEvent(`${e}ChangeState`,{detail:r,bubbles:!1,cancelable:!1,composed:!1});n.dispatchEvent(a)}registerElement(e,n,r){return Array.isArray(e)||(e=[e]),e.forEach(i=>{const a=r==null?void 0:r[i];this.registerSingleGesture(i,n,a)}),n}registerSingleGesture(e,n,r){const i=this.gestureTemplates.get(e);if(!i)return console.error(`Gesture template "${e}" not found.`),!1;this.elementGestureMap.has(n)||this.elementGestureMap.set(n,new Map);const a=this.elementGestureMap.get(n);a.has(e)&&(console.warn(`Element already has gesture "${e}" registered. It will be replaced.`),this.unregisterElement(e,n));const s=i.clone(r);return s.init(n,this.pointerManager,this.activeGesturesRegistry,this.keyboardManager),a.set(e,s),!0}unregisterElement(e,n){const r=this.elementGestureMap.get(n);return!r||!r.has(e)?!1:(r.get(e).destroy(),r.delete(e),this.activeGesturesRegistry.unregisterElement(n),r.size===0&&this.elementGestureMap.delete(n),!0)}unregisterAllGestures(e){const n=this.elementGestureMap.get(e);if(n){for(const[,r]of n)r.destroy(),this.activeGesturesRegistry.unregisterElement(e);this.elementGestureMap.delete(e)}}destroy(){for(const[e]of this.elementGestureMap)this.unregisterAllGestures(e);this.gestureTemplates.clear(),this.elementGestureMap.clear(),this.activeGesturesRegistry.destroy(),this.keyboardManager.destroy(),this.pointerManager.destroy()}}class q0 extends jP{constructor(e){super(e),this.unregisterHandler=null,this.originalTarget=null,this.optionsType=void 0,this.mutableOptionsType=void 0,this.minPointers=void 0,this.maxPointers=void 0,this.minPointers=e.minPointers??1,this.maxPointers=e.maxPointers??1/0}init(e,n,r,i){super.init(e,n,r,i),this.unregisterHandler=this.pointerManager.registerGestureHandler(this.handlePointerEvent.bind(this))}updateOptions(e){super.updateOptions(e),this.minPointers=e.minPointers??this.minPointers,this.maxPointers=e.maxPointers??this.maxPointers}getRelevantPointers(e,n){return e.filter(r=>this.isPointerTypeAllowed(r.pointerType)&&(n===r.target||r.target===this.originalTarget||n===this.originalTarget||"contains"in n&&n.contains(r.target))||"getRootNode"in n&&n.getRootNode()instanceof ShadowRoot&&r.srcEvent.composedPath().includes(n))}destroy(){this.unregisterHandler&&(this.unregisterHandler(),this.unregisterHandler=null),super.destroy()}}function zee(t,e){const n=e.x-t.x,r=e.y-t.y;return Math.sqrt(n*n+r*r)}function n2(t){if(t.length<2)return 0;let e=0,n=0;for(let r=0;r<t.length;r+=1)for(let i=r+1;i<t.length;i+=1)e+=zee({x:t[r].clientX,y:t[r].clientY},{x:t[i].clientX,y:t[i].clientY}),n+=1;return n>0?e/n:0}function Eo(t){if(t.length===0)return{x:0,y:0};const e=t.reduce((n,r)=>(n.x+=r.clientX,n.y+=r.clientY,n),{x:0,y:0});return{x:e.x/t.length,y:e.y/t.length}}function pf(t,e){return`${t}${e==="ongoing"?"":e.charAt(0).toUpperCase()+e.slice(1)}`}const Gg=1e-5,fl=1e-5,BD=.15;function $ee(t,e){const n=e.x-t.x,r=e.y-t.y,i={vertical:null,horizontal:null,mainAxis:null},a=Gee(e,t),s=Math.abs(n)>Math.abs(r)?"horizontal":"vertical",o=a||s==="horizontal"?Gg:BD,c=a?Gg:s==="horizontal"?BD:Gg;return Math.abs(n)>o&&(i.horizontal=n>0?"right":"left"),Math.abs(r)>c&&(i.vertical=r>0?"down":"up"),i.mainAxis=a?"diagonal":s,i}function Gee(t,e){const n=e.x-t.x,r=e.y-t.y,i=Math.atan2(r,n)*180/Math.PI;return i>=-45+fl&&i<=-22.5+fl||i>=22.5+fl&&i<=45+fl||i>=135+fl&&i<=157.5+fl||i>=-157.5+fl&&i<=-135+fl}function Wee(t,e){if(!t.vertical&&!t.horizontal)return!1;if(e.length===0)return!0;const n=t.vertical===null||e.includes(t.vertical),r=t.horizontal===null||e.includes(t.horizontal);return n&&r}const FD=0,Yee=t=>t>FD?1:t<-FD?-1:0;class Rb extends q0{constructor(e){super(e),this.state={lastPosition:null},this.isSinglePhase=void 0,this.eventType=void 0,this.optionsType=void 0,this.mutableOptionsType=void 0,this.mutableStateType=void 0,this.threshold=void 0,this.handleElementEnterBound=void 0,this.handleElementLeaveBound=void 0,this.handleElementEnterBound=this.handleElementEnter.bind(this),this.handleElementLeaveBound=this.handleElementLeave.bind(this),this.threshold=e.threshold||0}clone(e){return new Rb(H({name:this.name,preventDefault:this.preventDefault,stopPropagation:this.stopPropagation,threshold:this.threshold,minPointers:this.minPointers,maxPointers:this.maxPointers,requiredKeys:[...this.requiredKeys],pointerMode:[...this.pointerMode],preventIf:[...this.preventIf]},e))}init(e,n,r,i){super.init(e,n,r,i),this.element.addEventListener("pointerenter",this.handleElementEnterBound),this.element.addEventListener("pointerleave",this.handleElementLeaveBound)}destroy(){this.element.removeEventListener("pointerenter",this.handleElementEnterBound),this.element.removeEventListener("pointerleave",this.handleElementLeaveBound),this.resetState(),super.destroy()}updateOptions(e){super.updateOptions(e)}resetState(){this.isActive=!1,this.state={lastPosition:null}}handleElementEnter(e){if(e.pointerType!=="mouse"&&e.pointerType!=="pen")return;const n=this.pointerManager.getPointers()||new Map,r=Array.from(n.values());if(r.length>=this.minPointers&&r.length<=this.maxPointers){this.isActive=!0;const i={x:e.clientX,y:e.clientY};this.state.lastPosition=i,this.emitMoveEvent(this.element,"start",r,e),this.emitMoveEvent(this.element,"ongoing",r,e)}}handleElementLeave(e){if(e.pointerType!=="mouse"&&e.pointerType!=="pen"||!this.isActive)return;const n=this.pointerManager.getPointers()||new Map,r=Array.from(n.values());this.emitMoveEvent(this.element,"end",r,e),this.resetState()}handlePointerEvent(e,n){if(n.type!=="pointermove"||n.pointerType!=="mouse"&&n.pointerType!=="pen")return;this.preventDefault&&n.preventDefault(),this.stopPropagation&&n.stopPropagation();const r=Array.from(e.values()),i=this.getTargetElement(n);if(!i||r.length<this.minPointers||r.length>this.maxPointers)return;if(this.shouldPreventGesture(i)){if(!this.isActive)return;this.resetState(),this.emitMoveEvent(i,"end",r,n);return}const a={x:n.clientX,y:n.clientY};this.state.lastPosition=a,this.isActive||(this.isActive=!0,this.emitMoveEvent(i,"start",r,n)),this.emitMoveEvent(i,"ongoing",r,n)}emitMoveEvent(e,n,r,i){const a=this.state.lastPosition||Eo(r),s=this.gesturesRegistry.getActiveGestures(e),o={gestureName:this.name,centroid:a,target:i.target,srcEvent:i,phase:n,pointers:r,timeStamp:i.timeStamp,activeGestures:s,customData:this.customData},c=pf(this.name,n),d=new CustomEvent(c,{bubbles:!0,cancelable:!0,composed:!0,detail:o});e.dispatchEvent(d)}}class Ob extends q0{constructor(e){super(e),this.state={startPointers:new Map,startCentroid:null,lastCentroid:null,movementThresholdReached:!1,totalDeltaX:0,totalDeltaY:0,activeDeltaX:0,activeDeltaY:0,lastDirection:{vertical:null,horizontal:null,mainAxis:null},lastDeltas:null},this.isSinglePhase=void 0,this.eventType=void 0,this.optionsType=void 0,this.mutableOptionsType=void 0,this.mutableStateType=void 0,this.threshold=void 0,this.direction=void 0,this.direction=e.direction||["up","down","left","right"],this.threshold=e.threshold||0}clone(e){return new Ob(H({name:this.name,preventDefault:this.preventDefault,stopPropagation:this.stopPropagation,threshold:this.threshold,minPointers:this.minPointers,maxPointers:this.maxPointers,direction:[...this.direction],requiredKeys:[...this.requiredKeys],pointerMode:[...this.pointerMode],preventIf:[...this.preventIf]},e))}destroy(){this.resetState(),super.destroy()}updateOptions(e){super.updateOptions(e),this.direction=e.direction||this.direction}resetState(){this.isActive=!1,this.state=H({},this.state,{startPointers:new Map,startCentroid:null,lastCentroid:null,lastDeltas:null,activeDeltaX:0,activeDeltaY:0,movementThresholdReached:!1,lastDirection:{vertical:null,horizontal:null,mainAxis:null}})}handlePointerEvent(e,n){const r=Array.from(e.values());if(n.type==="forceCancel"){this.cancel(n.target,r,n);return}const i=this.getTargetElement(n);if(!i)return;if(this.shouldPreventGesture(i)){this.cancel(i,r,n);return}const a=this.getRelevantPointers(r,i);if(a.length<this.minPointers||a.length>this.maxPointers){this.cancel(i,a,n);return}switch(n.type){case"pointerdown":!this.isActive&&!this.state.startCentroid&&(a.forEach(s=>{this.state.startPointers.set(s.pointerId,s)}),this.originalTarget=i,this.state.startCentroid=Eo(a),this.state.lastCentroid=H({},this.state.startCentroid));break;case"pointermove":if(this.state.startCentroid&&a.length>=this.minPointers){const s=Eo(a),o=s.x-this.state.startCentroid.x,c=s.y-this.state.startCentroid.y,d=Math.sqrt(o*o+c*c),f=$ee(this.state.lastCentroid??this.state.startCentroid,s),p=this.state.lastCentroid?s.x-this.state.lastCentroid.x:0,g=this.state.lastCentroid?s.y-this.state.lastCentroid.y:0;!this.state.movementThresholdReached&&d>=this.threshold&&Wee(f,this.direction)?(this.state.movementThresholdReached=!0,this.isActive=!0,this.state.lastDeltas={x:p,y:g},this.state.totalDeltaX+=p,this.state.totalDeltaY+=g,this.state.activeDeltaX+=p,this.state.activeDeltaY+=g,this.emitPanEvent(i,"start",a,n,s),this.emitPanEvent(i,"ongoing",a,n,s)):this.state.movementThresholdReached&&this.isActive&&(this.state.lastDeltas={x:p,y:g},this.state.totalDeltaX+=p,this.state.totalDeltaY+=g,this.state.activeDeltaX+=p,this.state.activeDeltaY+=g,this.emitPanEvent(i,"ongoing",a,n,s)),this.state.lastCentroid=s,this.state.lastDirection=f}break;case"pointerup":case"pointercancel":case"forceCancel":if(this.isActive&&this.state.movementThresholdReached){if(a.filter(s=>s.type!=="pointerup"&&s.type!=="pointercancel").length<this.minPointers){const s=this.state.lastCentroid||this.state.startCentroid;n.type==="pointercancel"&&this.emitPanEvent(i,"cancel",a,n,s),this.emitPanEvent(i,"end",a,n,s),this.resetState()}}else this.resetState();break}}emitPanEvent(e,n,r,i,a){var E,T;if(!this.state.startCentroid)return;const s=((E=this.state.lastDeltas)==null?void 0:E.x)??0,o=((T=this.state.lastDeltas)==null?void 0:T.y)??0,c=this.state.startPointers.values().next().value,d=c?(i.timeStamp-c.timeStamp)/1e3:0,f=d>0?s/d:0,p=d>0?o/d:0,g=Math.sqrt(f*f+p*p),y=this.gesturesRegistry.getActiveGestures(e),x={gestureName:this.name,initialCentroid:this.state.startCentroid,centroid:a,target:i.target,srcEvent:i,phase:n,pointers:r,timeStamp:i.timeStamp,deltaX:s,deltaY:o,direction:this.state.lastDirection,velocityX:f,velocityY:p,velocity:g,totalDeltaX:this.state.totalDeltaX,totalDeltaY:this.state.totalDeltaY,activeDeltaX:this.state.activeDeltaX,activeDeltaY:this.state.activeDeltaY,activeGestures:y,customData:this.customData},_=pf(this.name,n),A=new CustomEvent(_,{bubbles:!0,cancelable:!0,composed:!0,detail:x});e.dispatchEvent(A),this.preventDefault&&i.preventDefault(),this.stopPropagation&&i.stopPropagation()}cancel(e,n,r){if(this.isActive){const i=e??this.element;this.emitPanEvent(i,"cancel",n,r,this.state.lastCentroid),this.emitPanEvent(i,"end",n,r,this.state.lastCentroid)}this.resetState()}}class Mb extends q0{constructor(e){super(H({},e,{minPointers:e.minPointers??2})),this.state={startDistance:0,lastDistance:0,lastScale:1,lastTime:0,velocity:0,totalScale:1,deltaScale:0},this.isSinglePhase=void 0,this.eventType=void 0,this.optionsType=void 0,this.mutableOptionsType=void 0,this.mutableStateType=void 0,this.threshold=void 0,this.threshold=e.threshold??0}clone(e){return new Mb(H({name:this.name,preventDefault:this.preventDefault,stopPropagation:this.stopPropagation,threshold:this.threshold,minPointers:this.minPointers,maxPointers:this.maxPointers,requiredKeys:[...this.requiredKeys],pointerMode:[...this.pointerMode],preventIf:[...this.preventIf]},e))}destroy(){this.resetState(),super.destroy()}updateOptions(e){super.updateOptions(e)}resetState(){this.isActive=!1,this.state=H({},this.state,{startDistance:0,lastDistance:0,lastScale:1,lastTime:0,velocity:0,deltaScale:0})}handlePointerEvent(e,n){const r=Array.from(e.values()),i=this.getTargetElement(n);if(!i)return;if(this.shouldPreventGesture(i)){this.isActive&&(this.emitPinchEvent(i,"cancel",r,n),this.resetState());return}const a=this.getRelevantPointers(r,i);switch(n.type){case"pointerdown":if(a.length>=2&&!this.isActive){const s=n2(a);this.state.startDistance=s,this.state.lastDistance=s,this.state.lastTime=n.timeStamp,this.originalTarget=i}break;case"pointermove":if(this.state.startDistance&&a.length>=this.minPointers){const s=n2(a),o=Math.abs(s-this.state.lastDistance);if(o!==0&&o>=this.threshold){const c=this.state.startDistance?s/this.state.startDistance:1,d=c/this.state.lastScale;this.state.totalScale*=d;const f=(n.timeStamp-this.state.lastTime)/1e3;if(this.state.lastDistance){const g=(s-this.state.lastDistance)/f;this.state.velocity=Number.isNaN(g)?0:g}this.state.lastDistance=s,this.state.deltaScale=c-this.state.lastScale,this.state.lastScale=c,this.state.lastTime=n.timeStamp,this.isActive?this.emitPinchEvent(i,"ongoing",a,n):(this.isActive=!0,this.emitPinchEvent(i,"start",a,n),this.emitPinchEvent(i,"ongoing",a,n))}}break;case"pointerup":case"pointercancel":case"forceCancel":if(this.isActive){const s=a.filter(o=>o.type!=="pointerup"&&o.type!=="pointercancel");if(s.length<this.minPointers)n.type==="pointercancel"&&this.emitPinchEvent(i,"cancel",a,n),this.emitPinchEvent(i,"end",a,n),this.resetState();else if(s.length>=2){const o=n2(s);this.state.startDistance=o/this.state.lastScale}}break}}emitPinchEvent(e,n,r,i){const a=Eo(r),s=this.state.lastDistance,o=this.state.lastScale,c=this.gesturesRegistry.getActiveGestures(e),d={gestureName:this.name,centroid:a,target:i.target,srcEvent:i,phase:n,pointers:r,timeStamp:i.timeStamp,scale:o,deltaScale:this.state.deltaScale,totalScale:this.state.totalScale,distance:s,velocity:this.state.velocity,activeGestures:c,direction:Yee(this.state.velocity),customData:this.customData};this.preventDefault&&i.preventDefault(),this.stopPropagation&&i.stopPropagation();const f=pf(this.name,n),p=new CustomEvent(f,{bubbles:!0,cancelable:!0,composed:!0,detail:d});e.dispatchEvent(p)}}class Pb extends q0{constructor(e){super(e),this.state={startCentroid:null,lastPosition:null,timerId:null,startTime:0,pressThresholdReached:!1},this.isSinglePhase=void 0,this.eventType=void 0,this.optionsType=void 0,this.mutableOptionsType=void 0,this.mutableStateType=void 0,this.duration=void 0,this.maxDistance=void 0,this.duration=e.duration??500,this.maxDistance=e.maxDistance??10}clone(e){return new Pb(H({name:this.name,preventDefault:this.preventDefault,stopPropagation:this.stopPropagation,minPointers:this.minPointers,maxPointers:this.maxPointers,duration:this.duration,maxDistance:this.maxDistance,requiredKeys:[...this.requiredKeys],pointerMode:[...this.pointerMode],preventIf:[...this.preventIf]},e))}destroy(){this.clearPressTimer(),this.resetState(),super.destroy()}updateOptions(e){super.updateOptions(e),this.duration=e.duration??this.duration,this.maxDistance=e.maxDistance??this.maxDistance}resetState(){this.clearPressTimer(),this.isActive=!1,this.state=H({},this.state,{startCentroid:null,lastPosition:null,timerId:null,startTime:0,pressThresholdReached:!1})}clearPressTimer(){this.state.timerId!==null&&(clearTimeout(this.state.timerId),this.state.timerId=null)}handlePointerEvent(e,n){const r=Array.from(e.values());if(n.type==="forceCancel"){this.cancelPress(n.target,r,n);return}const i=this.getTargetElement(n);if(!i)return;if(this.shouldPreventGesture(i)){this.isActive&&this.cancelPress(i,r,n);return}const a=this.getRelevantPointers(r,i);if(a.length<this.minPointers||a.length>this.maxPointers){this.isActive&&this.cancelPress(i,a,n);return}switch(n.type){case"pointerdown":!this.isActive&&!this.state.startCentroid&&(this.state.startCentroid=Eo(a),this.state.lastPosition=H({},this.state.startCentroid),this.state.startTime=n.timeStamp,this.isActive=!0,this.originalTarget=i,this.clearPressTimer(),this.state.timerId=setTimeout(()=>{if(this.isActive&&this.state.startCentroid){this.state.pressThresholdReached=!0;const s=this.state.lastPosition;this.emitPressEvent(i,"start",a,n,s),this.emitPressEvent(i,"ongoing",a,n,s)}},this.duration));break;case"pointermove":if(this.isActive&&this.state.startCentroid){const s=Eo(a);this.state.lastPosition=s;const o=s.x-this.state.startCentroid.x,c=s.y-this.state.startCentroid.y;Math.sqrt(o*o+c*c)>this.maxDistance&&this.cancelPress(i,a,n)}break;case"pointerup":if(this.isActive){if(this.state.pressThresholdReached){const s=this.state.lastPosition||this.state.startCentroid;this.emitPressEvent(i,"end",a,n,s)}this.resetState()}break;case"pointercancel":case"forceCancel":this.cancelPress(i,a,n);break}}emitPressEvent(e,n,r,i,a){const s=this.gesturesRegistry.getActiveGestures(e),o=i.timeStamp-this.state.startTime,c={gestureName:this.name,centroid:a,target:i.target,srcEvent:i,phase:n,pointers:r,timeStamp:i.timeStamp,x:a.x,y:a.y,duration:o,activeGestures:s,customData:this.customData},d=pf(this.name,n),f=new CustomEvent(d,{bubbles:!0,cancelable:!0,composed:!0,detail:c});e.dispatchEvent(f),this.preventDefault&&i.preventDefault(),this.stopPropagation&&i.stopPropagation()}cancelPress(e,n,r){if(this.isActive&&this.state.pressThresholdReached){const i=this.state.lastPosition||this.state.startCentroid;this.emitPressEvent(e??this.element,"cancel",n,r,i),this.emitPressEvent(e??this.element,"end",n,r,i)}this.resetState()}}class kb extends q0{constructor(e){super(e),this.state={startCentroid:null,currentTapCount:0,lastTapTime:0,lastPosition:null},this.isSinglePhase=void 0,this.eventType=void 0,this.optionsType=void 0,this.mutableOptionsType=void 0,this.mutableStateType=void 0,this.maxDistance=void 0,this.taps=void 0,this.maxDistance=e.maxDistance??10,this.taps=e.taps??1}clone(e){return new kb(H({name:this.name,preventDefault:this.preventDefault,stopPropagation:this.stopPropagation,minPointers:this.minPointers,maxPointers:this.maxPointers,maxDistance:this.maxDistance,taps:this.taps,requiredKeys:[...this.requiredKeys],pointerMode:[...this.pointerMode],preventIf:[...this.preventIf]},e))}destroy(){this.resetState(),super.destroy()}updateOptions(e){super.updateOptions(e),this.maxDistance=e.maxDistance??this.maxDistance,this.taps=e.taps??this.taps}resetState(){this.isActive=!1,this.state={startCentroid:null,currentTapCount:0,lastTapTime:0,lastPosition:null}}handlePointerEvent(e,n){const r=Array.from(e.values()),i=this.getTargetElement(n);if(!i)return;const a=this.getRelevantPointers(r,i);if(this.shouldPreventGesture(i)||a.length<this.minPointers||a.length>this.maxPointers){this.isActive&&this.cancelTap(i,a,n);return}switch(n.type){case"pointerdown":this.isActive||(this.state.startCentroid=Eo(a),this.state.lastPosition=H({},this.state.startCentroid),this.isActive=!0,this.originalTarget=i);break;case"pointermove":if(this.isActive&&this.state.startCentroid){const s=Eo(a);this.state.lastPosition=s;const o=s.x-this.state.startCentroid.x,c=s.y-this.state.startCentroid.y;Math.sqrt(o*o+c*c)>this.maxDistance&&this.cancelTap(i,a,n)}break;case"pointerup":if(this.isActive){this.state.currentTapCount+=1;const s=this.state.lastPosition||this.state.startCentroid;if(!s){this.cancelTap(i,a,n);return}this.state.currentTapCount>=this.taps?(this.fireTapEvent(i,a,n,s),this.resetState()):(this.state.lastTapTime=n.timeStamp,this.isActive=!1,this.state.startCentroid=null,setTimeout(()=>{this.state&&this.state.currentTapCount>0&&this.state.currentTapCount<this.taps&&(this.state.currentTapCount=0)},300))}break;case"pointercancel":case"forceCancel":this.cancelTap(i,a,n);break}}fireTapEvent(e,n,r,i){const a=this.gesturesRegistry.getActiveGestures(e),s={gestureName:this.name,centroid:i,target:r.target,srcEvent:r,phase:"end",pointers:n,timeStamp:r.timeStamp,x:i.x,y:i.y,tapCount:this.state.currentTapCount,activeGestures:a,customData:this.customData},o=new CustomEvent(this.name,{bubbles:!0,cancelable:!0,composed:!0,detail:s});e.dispatchEvent(o),this.preventDefault&&r.preventDefault(),this.stopPropagation&&r.stopPropagation()}cancelTap(e,n,r){if(this.state.startCentroid||this.state.lastPosition){const i=this.state.lastPosition||this.state.startCentroid,a=this.gesturesRegistry.getActiveGestures(e),s={gestureName:this.name,centroid:i,target:r.target,srcEvent:r,phase:"cancel",pointers:n,timeStamp:r.timeStamp,x:i.x,y:i.y,tapCount:this.state.currentTapCount,activeGestures:a,customData:this.customData},o=pf(this.name,"cancel"),c=new CustomEvent(o,{bubbles:!0,cancelable:!0,composed:!0,detail:s});e.dispatchEvent(c)}this.resetState()}}class Nb extends jP{constructor(e){super(e),this.state={totalDeltaX:0,totalDeltaY:0,totalDeltaZ:0},this.isSinglePhase=void 0,this.eventType=void 0,this.optionsType=void 0,this.mutableOptionsType=void 0,this.mutableStateType=void 0,this.sensitivity=void 0,this.max=void 0,this.min=void 0,this.initialDelta=void 0,this.invert=void 0,this.handleWheelEventBound=void 0,this.sensitivity=e.sensitivity??1,this.max=e.max??Number.MAX_SAFE_INTEGER,this.min=e.min??Number.MIN_SAFE_INTEGER,this.initialDelta=e.initialDelta??0,this.invert=e.invert??!1,this.state.totalDeltaX=this.initialDelta,this.state.totalDeltaY=this.initialDelta,this.state.totalDeltaZ=this.initialDelta,this.handleWheelEventBound=this.handleWheelEvent.bind(this)}clone(e){return new Nb(H({name:this.name,preventDefault:this.preventDefault,stopPropagation:this.stopPropagation,sensitivity:this.sensitivity,max:this.max,min:this.min,initialDelta:this.initialDelta,invert:this.invert,requiredKeys:[...this.requiredKeys],pointerMode:[...this.pointerMode],preventIf:[...this.preventIf]},e))}init(e,n,r,i){super.init(e,n,r,i),this.element.addEventListener("wheel",this.handleWheelEventBound)}destroy(){this.element.removeEventListener("wheel",this.handleWheelEventBound),this.resetState(),super.destroy()}resetState(){this.isActive=!1,this.state={totalDeltaX:0,totalDeltaY:0,totalDeltaZ:0}}updateOptions(e){super.updateOptions(e),this.sensitivity=e.sensitivity??this.sensitivity,this.max=e.max??this.max,this.min=e.min??this.min,this.initialDelta=e.initialDelta??this.initialDelta,this.invert=e.invert??this.invert}handleWheelEvent(e){if(this.shouldPreventGesture(this.element))return;const n=this.pointerManager.getPointers()||new Map,r=Array.from(n.values());this.state.totalDeltaX+=e.deltaX*this.sensitivity*(this.invert?-1:1),this.state.totalDeltaY+=e.deltaY*this.sensitivity*(this.invert?-1:1),this.state.totalDeltaZ+=e.deltaZ*this.sensitivity*(this.invert?-1:1),["totalDeltaX","totalDeltaY","totalDeltaZ"].forEach(i=>{this.state[i]<this.min&&(this.state[i]=this.min),this.state[i]>this.max&&(this.state[i]=this.max)}),this.emitWheelEvent(r,e)}emitWheelEvent(e,n){const r=e.length>0?Eo(e):{x:n.clientX,y:n.clientY},i=this.gesturesRegistry.getActiveGestures(this.element),a={gestureName:this.name,centroid:r,target:n.target,srcEvent:n,phase:"ongoing",pointers:e,timeStamp:n.timeStamp,deltaX:n.deltaX*this.sensitivity*(this.invert?-1:1),deltaY:n.deltaY*this.sensitivity*(this.invert?-1:1),deltaZ:n.deltaZ*this.sensitivity*(this.invert?-1:1),deltaMode:n.deltaMode,totalDeltaX:this.state.totalDeltaX,totalDeltaY:this.state.totalDeltaY,totalDeltaZ:this.state.totalDeltaZ,activeGestures:i,customData:this.customData};this.preventDefault&&n.preventDefault(),this.stopPropagation&&n.stopPropagation();const s=pf(this.name,"ongoing"),o=new CustomEvent(s,{bubbles:!0,cancelable:!0,composed:!0,detail:a});this.element.dispatchEvent(o)}}const rd=t=>t.preventDefault(),Lb=({svgRef:t})=>{M.useEffect(()=>{const n=t.current;if(!n)return;const r=new Hee({gestures:[new Ob({name:"pan",threshold:0,maxPointers:1}),new Rb({name:"move",preventIf:["pan","pinch"]}),new Mb({name:"pinch",threshold:5,preventIf:["pan"]}),new Nb({name:"turnWheel",sensitivity:.01,initialDelta:1}),new kb({name:"tap",maxDistance:10,preventIf:["pan","pinch"]}),new Pb({name:"quickPress",duration:50,maxDistance:10})]});return r.registerElement(["pan","move","pinch","turnWheel","tap","quickPress"],n),()=>{r.destroy()}},[t]);const e=M.useCallback((n,r,i)=>{const a=t.current;return a==null||a.addEventListener(n,r,i),{cleanup:()=>a==null?void 0:a.removeEventListener(n,r)}},[t]);return M.useEffect(()=>{const n=t.current;return n==null||n.addEventListener("gesturestart",rd),n==null||n.addEventListener("gesturechange",rd),n==null||n.addEventListener("gestureend",rd),()=>{n==null||n.removeEventListener("gesturestart",rd),n==null||n.removeEventListener("gesturechange",rd),n==null||n.removeEventListener("gestureend",rd)}},[t]),{instance:{addInteractionListener:e}}};Lb.params={};Lb.getInitialState=()=>({});const qee=[Db,Ib,sy,oy,Lb,ay],Xee=["apiRef"],Kee=t=>{let{plugins:e}=t,n=Be(t.props,Xee);const r={};e.forEach(s=>{Object.assign(r,s.params)});const i={};return Object.keys(n).forEach(s=>{const o=n[s];r[s]&&(i[s]=o)}),e.reduce((s,o)=>o.getDefaultizedParams?o.getDefaultizedParams({params:s}):s,i)};let VD=0;function Qee(t,e,n){const r=I0(),i=M.useMemo(()=>[...qee,...t],[t]),a=Kee({plugins:i,props:e});a.id=a.id??r;const o=M.useRef({}).current,c=Jee(e.apiRef),d=M.useRef(null),f=M.useRef(null),p=M.useRef(null);if(p.current==null){VD+=1;const x={cacheKey:{id:VD}};i.forEach(_=>{_.getInitialState&&Object.assign(x,_.getInitialState(a,x,n))}),p.current=new XJ(x)}const g=x=>{const _=x({instance:o,params:a,plugins:i,store:p.current,svgRef:f,chartRootRef:d,seriesConfig:n});_.publicAPI&&Object.assign(c.current,_.publicAPI),_.instance&&Object.assign(o,_.instance)};return i.forEach(g),{contextValue:M.useMemo(()=>({store:p.current,publicAPI:c.current,instance:o,svgRef:f,chartRootRef:d}),[o,c])}}function Zee(t){return t.current==null&&(t.current={}),t}function Jee(t){const e=M.useRef({});return t?Zee(t):e}const UP=M.createContext(null),HP=()=>{},zP=4,$P=20+2*zP,ete=40+2*zP,tte="hover",nte={top:5,bottom:5,left:5,right:5},Wg={minStart:0,maxEnd:100,step:5,minSpan:10,maxSpan:100,panning:!0,filterMode:"keep",slider:{enabled:!1,preview:!1,size:$P,showTooltip:tte}},Bb=(t,e,n)=>{var r;if(t)return t===!0?H({axisId:e,axisDirection:n},Wg):H({axisId:e,axisDirection:n},Wg,t,{slider:H({},Wg.slider,{size:((r=t.slider)==null?void 0:r.preview)??Wg.slider.preview?ete:$P},t.slider)})};function GP(t,e){const n={top:0,bottom:0,none:0};return(t&&t.length>0?t:[{id:Tb,scaleType:"linear"}]).map((a,s)=>{var y;const o=a.dataKey,c=s===0?"bottom":"none",d=a.position??c,f=qJ+(a.label?DP:0),p=a.id??`defaultized-x-axis-${s}`,g=H({offset:n[d]},a,{id:p,position:d,height:a.height??f,zoom:Bb(a.zoom,p,"x")});if(d!=="none"&&(n[d]+=g.height,(y=g.zoom)!=null&&y.slider.enabled&&(n[d]+=g.zoom.slider.size)),o===void 0||a.data!==void 0)return g;if(e===void 0)throw new Error("MUI X Charts: x-axis uses `dataKey` but no `dataset` is provided.");return H({},g,{data:e.map(x=>x[o])})})}function WP(t,e){const n={right:0,left:0,none:0};return(t&&t.length>0?t:[{id:Cb,scaleType:"linear"}]).map((a,s)=>{var y;const o=a.dataKey,c=s===0?"left":"none",d=a.position??c,f=YJ+(a.label?DP:0),p=a.id??`defaultized-y-axis-${s}`,g=H({offset:n[d]},a,{id:p,position:d,width:a.width??f,zoom:Bb(a.zoom,p,"y")});if(d!=="none"&&(n[d]+=g.width,(y=g.zoom)!=null&&y.slider.enabled&&(n[d]+=g.zoom.slider.size)),o===void 0||a.data!==void 0)return g;if(e===void 0)throw new Error("MUI X Charts: y-axis uses `dataKey` but no `dataset` is provided.");return H({},g,{data:e.map(x=>x[o])})})}function pm(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function rte(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Fb(t){let e,n,r;t.length!==2?(e=pm,n=(o,c)=>pm(t(o),c),r=(o,c)=>t(o)-c):(e=t===pm||t===rte?t:ite,n=t,r=t);function i(o,c,d=0,f=o.length){if(d<f){if(e(c,c)!==0)return f;do{const p=d+f>>>1;n(o[p],c)<0?d=p+1:f=p}while(d<f)}return d}function a(o,c,d=0,f=o.length){if(d<f){if(e(c,c)!==0)return f;do{const p=d+f>>>1;n(o[p],c)<=0?d=p+1:f=p}while(d<f)}return d}function s(o,c,d=0,f=o.length){const p=i(o,c,d,f-1);return p>d&&r(o[p-1],c)>-r(o[p],c)?p-1:p}return{left:i,center:s,right:a}}function ite(){return 0}function ate(t){return t===null?NaN:+t}const ste=Fb(pm),YP=ste.right;Fb(ate).center;class jD extends Map{constructor(e,n=cte){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,i]of e)this.set(r,i)}get(e){return super.get(UD(this,e))}has(e){return super.has(UD(this,e))}set(e,n){return super.set(ote(this,e),n)}delete(e){return super.delete(lte(this,e))}}function UD({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function ote({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function lte({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function cte(t){return t!==null&&typeof t=="object"?t.valueOf():t}const ute=Math.sqrt(50),dte=Math.sqrt(10),fte=Math.sqrt(2);function Km(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),a=r/Math.pow(10,i),s=a>=ute?10:a>=dte?5:a>=fte?2:1;let o,c,d;return i<0?(d=Math.pow(10,-i)/s,o=Math.round(t*d),c=Math.round(e*d),o/d<t&&++o,c/d>e&&--c,d=-d):(d=Math.pow(10,i)*s,o=Math.round(t/d),c=Math.round(e/d),o*d<t&&++o,c*d>e&&--c),c<o&&.5<=n&&n<2?Km(t,e,n*2):[o,c,d]}function Aw(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[i,a,s]=r?Km(e,t,n):Km(t,e,n);if(!(a>=i))return[];const o=a-i+1,c=new Array(o);if(r)if(s<0)for(let d=0;d<o;++d)c[d]=(a-d)/-s;else for(let d=0;d<o;++d)c[d]=(a-d)*s;else if(s<0)for(let d=0;d<o;++d)c[d]=(i+d)/-s;else for(let d=0;d<o;++d)c[d]=(i+d)*s;return c}function Ew(t,e,n){return e=+e,t=+t,n=+n,Km(t,e,n)[2]}function Sw(t,e,n){e=+e,t=+t,n=+n;const r=e<t,i=r?Ew(e,t,n):Ew(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}function hte(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((e-t)/n))|0,a=new Array(i);++r<i;)a[r]=t+r*n;return a}function Oo(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function pte(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const HD=Symbol("implicit");function Qm(){var t=new jD,e=[],n=[],r=HD;function i(a){let s=t.get(a);if(s===void 0){if(r!==HD)return r;t.set(a,s=e.push(a)-1)}return n[s%n.length]}return i.domain=function(a){if(!arguments.length)return e.slice();e=[],t=new jD;for(const s of a)t.has(s)||t.set(s,e.push(s)-1);return i},i.range=function(a){return arguments.length?(n=Array.from(a),i):n.slice()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return Qm(e,n).unknown(r)},Oo.apply(i,arguments),i}function ly(){var t=Qm().unknown(void 0),e=t.domain,n=t.range,r=0,i=1,a,s,o=!1,c=0,d=0,f=.5;delete t.unknown;function p(){var g=e().length,y=i<r,x=y?i:r,_=y?r:i;a=(_-x)/Math.max(1,g-c+d*2),o&&(a=Math.floor(a)),x+=(_-x-a*(g-c))*f,s=a*(1-c),o&&(x=Math.round(x),s=Math.round(s));var A=hte(g).map(function(E){return x+a*E});return n(y?A.reverse():A)}return t.domain=function(g){return arguments.length?(e(g),p()):e()},t.range=function(g){return arguments.length?([r,i]=g,r=+r,i=+i,p()):[r,i]},t.rangeRound=function(g){return[r,i]=g,r=+r,i=+i,o=!0,p()},t.bandwidth=function(){return s},t.step=function(){return a},t.round=function(g){return arguments.length?(o=!!g,p()):o},t.padding=function(g){return arguments.length?(c=Math.min(1,d=+g),p()):c},t.paddingInner=function(g){return arguments.length?(c=Math.min(1,g),p()):c},t.paddingOuter=function(g){return arguments.length?(d=+g,p()):d},t.align=function(g){return arguments.length?(f=Math.max(0,Math.min(1,g)),p()):f},t.copy=function(){return ly(e(),[r,i]).round(o).paddingInner(c).paddingOuter(d).align(f)},Oo.apply(p(),arguments)}function qP(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return qP(e())},t}function XP(){return qP(ly.apply(null,arguments).paddingInner(1))}function Vb(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function KP(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function X0(){}var _0=.7,Zm=1/_0,kd="\\s*([+-]?\\d+)\\s*",b0="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Is="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",gte=/^#([0-9a-f]{3,8})$/,mte=new RegExp(`^rgb\\(${kd},${kd},${kd}\\)$`),yte=new RegExp(`^rgb\\(${Is},${Is},${Is}\\)$`),vte=new RegExp(`^rgba\\(${kd},${kd},${kd},${b0}\\)$`),xte=new RegExp(`^rgba\\(${Is},${Is},${Is},${b0}\\)$`),wte=new RegExp(`^hsl\\(${b0},${Is},${Is}\\)$`),_te=new RegExp(`^hsla\\(${b0},${Is},${Is},${b0}\\)$`),zD={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Vb(X0,A0,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:$D,formatHex:$D,formatHex8:bte,formatHsl:Ate,formatRgb:GD,toString:GD});function $D(){return this.rgb().formatHex()}function bte(){return this.rgb().formatHex8()}function Ate(){return QP(this).formatHsl()}function GD(){return this.rgb().formatRgb()}function A0(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=gte.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?WD(e):n===3?new Fi(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?Yg(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?Yg(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=mte.exec(t))?new Fi(e[1],e[2],e[3],1):(e=yte.exec(t))?new Fi(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=vte.exec(t))?Yg(e[1],e[2],e[3],e[4]):(e=xte.exec(t))?Yg(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=wte.exec(t))?XD(e[1],e[2]/100,e[3]/100,1):(e=_te.exec(t))?XD(e[1],e[2]/100,e[3]/100,e[4]):zD.hasOwnProperty(t)?WD(zD[t]):t==="transparent"?new Fi(NaN,NaN,NaN,0):null}function WD(t){return new Fi(t>>16&255,t>>8&255,t&255,1)}function Yg(t,e,n,r){return r<=0&&(t=e=n=NaN),new Fi(t,e,n,r)}function Ete(t){return t instanceof X0||(t=A0(t)),t?(t=t.rgb(),new Fi(t.r,t.g,t.b,t.opacity)):new Fi}function Tw(t,e,n,r){return arguments.length===1?Ete(t):new Fi(t,e,n,r??1)}function Fi(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}Vb(Fi,Tw,KP(X0,{brighter(t){return t=t==null?Zm:Math.pow(Zm,t),new Fi(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?_0:Math.pow(_0,t),new Fi(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Fi(Uc(this.r),Uc(this.g),Uc(this.b),Jm(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:YD,formatHex:YD,formatHex8:Ste,formatRgb:qD,toString:qD}));function YD(){return`#${Pc(this.r)}${Pc(this.g)}${Pc(this.b)}`}function Ste(){return`#${Pc(this.r)}${Pc(this.g)}${Pc(this.b)}${Pc((isNaN(this.opacity)?1:this.opacity)*255)}`}function qD(){const t=Jm(this.opacity);return`${t===1?"rgb(":"rgba("}${Uc(this.r)}, ${Uc(this.g)}, ${Uc(this.b)}${t===1?")":`, ${t})`}`}function Jm(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Uc(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Pc(t){return t=Uc(t),(t<16?"0":"")+t.toString(16)}function XD(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new ja(t,e,n,r)}function QP(t){if(t instanceof ja)return new ja(t.h,t.s,t.l,t.opacity);if(t instanceof X0||(t=A0(t)),!t)return new ja;if(t instanceof ja)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),a=Math.max(e,n,r),s=NaN,o=a-i,c=(a+i)/2;return o?(e===a?s=(n-r)/o+(n<r)*6:n===a?s=(r-e)/o+2:s=(e-n)/o+4,o/=c<.5?a+i:2-a-i,s*=60):o=c>0&&c<1?0:s,new ja(s,o,c,t.opacity)}function Tte(t,e,n,r){return arguments.length===1?QP(t):new ja(t,e,n,r??1)}function ja(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}Vb(ja,Tte,KP(X0,{brighter(t){return t=t==null?Zm:Math.pow(Zm,t),new ja(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?_0:Math.pow(_0,t),new ja(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new Fi(r2(t>=240?t-240:t+120,i,r),r2(t,i,r),r2(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new ja(KD(this.h),qg(this.s),qg(this.l),Jm(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Jm(this.opacity);return`${t===1?"hsl(":"hsla("}${KD(this.h)}, ${qg(this.s)*100}%, ${qg(this.l)*100}%${t===1?")":`, ${t})`}`}}));function KD(t){return t=(t||0)%360,t<0?t+360:t}function qg(t){return Math.max(0,Math.min(1,t||0))}function r2(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const jb=t=>()=>t;function Cte(t,e){return function(n){return t+n*e}}function Ite(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function Dte(t){return(t=+t)==1?ZP:function(e,n){return n-e?Ite(e,n,t):jb(isNaN(e)?n:e)}}function ZP(t,e){var n=e-t;return n?Cte(t,n):jb(isNaN(t)?e:t)}const QD=function t(e){var n=Dte(e);function r(i,a){var s=n((i=Tw(i)).r,(a=Tw(a)).r),o=n(i.g,a.g),c=n(i.b,a.b),d=ZP(i.opacity,a.opacity);return function(f){return i.r=s(f),i.g=o(f),i.b=c(f),i.opacity=d(f),i+""}}return r.gamma=t,r}(1);function Rte(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(a){for(i=0;i<n;++i)r[i]=t[i]*(1-a)+e[i]*a;return r}}function Ote(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Mte(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),a=new Array(n),s;for(s=0;s<r;++s)i[s]=cy(t[s],e[s]);for(;s<n;++s)a[s]=e[s];return function(o){for(s=0;s<r;++s)a[s]=i[s](o);return a}}function Ub(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function Qt(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function Pte(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=cy(t[i],e[i]):r[i]=e[i];return function(a){for(i in n)r[i]=n[i](a);return r}}var Cw=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,i2=new RegExp(Cw.source,"g");function kte(t){return function(){return t}}function Nte(t){return function(e){return t(e)+""}}function Lte(t,e){var n=Cw.lastIndex=i2.lastIndex=0,r,i,a,s=-1,o=[],c=[];for(t=t+"",e=e+"";(r=Cw.exec(t))&&(i=i2.exec(e));)(a=i.index)>n&&(a=e.slice(n,a),o[s]?o[s]+=a:o[++s]=a),(r=r[0])===(i=i[0])?o[s]?o[s]+=i:o[++s]=i:(o[++s]=null,c.push({i:s,x:Qt(r,i)})),n=i2.lastIndex;return n<e.length&&(a=e.slice(n),o[s]?o[s]+=a:o[++s]=a),o.length<2?c[0]?Nte(c[0].x):kte(e):(e=c.length,function(d){for(var f=0,p;f<e;++f)o[(p=c[f]).i]=p.x(d);return o.join("")})}function cy(t,e){var n=typeof e,r;return e==null||n==="boolean"?jb(e):(n==="number"?Qt:n==="string"?(r=A0(e))?(e=r,QD):Lte:e instanceof A0?QD:e instanceof Date?Ub:Ote(e)?Rte:Array.isArray(e)?Mte:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?Pte:Qt)(t,e)}function JP(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function Bte(t){return function(){return t}}function Fte(t){return+t}var ZD=[0,1];function _a(t){return t}function Iw(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:Bte(isNaN(e)?NaN:.5)}function Vte(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function jte(t,e,n){var r=t[0],i=t[1],a=e[0],s=e[1];return i<r?(r=Iw(i,r),a=n(s,a)):(r=Iw(r,i),a=n(a,s)),function(o){return a(r(o))}}function Ute(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),a=new Array(r),s=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++s<r;)i[s]=Iw(t[s],t[s+1]),a[s]=n(e[s],e[s+1]);return function(o){var c=YP(t,o,1,r)-1;return a[c](i[c](o))}}function K0(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function uy(){var t=ZD,e=ZD,n=cy,r,i,a,s=_a,o,c,d;function f(){var g=Math.min(t.length,e.length);return s!==_a&&(s=Vte(t[0],t[g-1])),o=g>2?Ute:jte,c=d=null,p}function p(g){return g==null||isNaN(g=+g)?a:(c||(c=o(t.map(r),e,n)))(r(s(g)))}return p.invert=function(g){return s(i((d||(d=o(e,t.map(r),Qt)))(g)))},p.domain=function(g){return arguments.length?(t=Array.from(g,Fte),f()):t.slice()},p.range=function(g){return arguments.length?(e=Array.from(g),f()):e.slice()},p.rangeRound=function(g){return e=Array.from(g),n=JP,f()},p.clamp=function(g){return arguments.length?(s=g?!0:_a,f()):s!==_a},p.interpolate=function(g){return arguments.length?(n=g,f()):n},p.unknown=function(g){return arguments.length?(a=g,p):a},function(g,y){return r=g,i=y,f()}}function ek(){return uy()(_a,_a)}function Hte(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function e1(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function Xd(t){return t=e1(Math.abs(t)),t?t[1]:NaN}function zte(t,e){return function(n,r){for(var i=n.length,a=[],s=0,o=t[0],c=0;i>0&&o>0&&(c+o+1>r&&(o=Math.max(1,r-c)),a.push(n.substring(i-=o,i+o)),!((c+=o+1)>r));)o=t[s=(s+1)%t.length];return a.reverse().join(e)}}function $te(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var Gte=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function E0(t){if(!(e=Gte.exec(t)))throw new Error("invalid format: "+t);var e;return new Hb({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}E0.prototype=Hb.prototype;function Hb(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}Hb.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Wte(t){e:for(var e=t.length,n=1,r=-1,i;n<e;++n)switch(t[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+t[n])break e;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var tk;function Yte(t,e){var n=e1(t,e);if(!n)return t+"";var r=n[0],i=n[1],a=i-(tk=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,s=r.length;return a===s?r:a>s?r+new Array(a-s+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+e1(t,Math.max(0,e+a-1))[0]}function JD(t,e){var n=e1(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const e3={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:Hte,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>JD(t*100,e),r:JD,s:Yte,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function t3(t){return t}var n3=Array.prototype.map,r3=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function qte(t){var e=t.grouping===void 0||t.thousands===void 0?t3:zte(n3.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",a=t.numerals===void 0?t3:$te(n3.call(t.numerals,String)),s=t.percent===void 0?"%":t.percent+"",o=t.minus===void 0?"−":t.minus+"",c=t.nan===void 0?"NaN":t.nan+"";function d(p){p=E0(p);var g=p.fill,y=p.align,x=p.sign,_=p.symbol,A=p.zero,E=p.width,T=p.comma,C=p.precision,D=p.trim,k=p.type;k==="n"?(T=!0,k="g"):e3[k]||(C===void 0&&(C=12),D=!0,k="g"),(A||g==="0"&&y==="=")&&(A=!0,g="0",y="=");var B=_==="$"?n:_==="#"&&/[boxX]/.test(k)?"0"+k.toLowerCase():"",O=_==="$"?r:/[%p]/.test(k)?s:"",I=e3[k],R=/[defgprs%]/.test(k);C=C===void 0?6:/[gprs]/.test(k)?Math.max(1,Math.min(21,C)):Math.max(0,Math.min(20,C));function V(L){var P=B,F=O,q,X,W;if(k==="c")F=I(L)+F,L="";else{L=+L;var G=L<0||1/L<0;if(L=isNaN(L)?c:I(Math.abs(L),C),D&&(L=Wte(L)),G&&+L==0&&x!=="+"&&(G=!1),P=(G?x==="("?x:o:x==="-"||x==="("?"":x)+P,F=(k==="s"?r3[8+tk/3]:"")+F+(G&&x==="("?")":""),R){for(q=-1,X=L.length;++q<X;)if(W=L.charCodeAt(q),48>W||W>57){F=(W===46?i+L.slice(q+1):L.slice(q))+F,L=L.slice(0,q);break}}}T&&!A&&(L=e(L,1/0));var Q=P.length+L.length+F.length,Z=Q<E?new Array(E-Q+1).join(g):"";switch(T&&A&&(L=e(Z+L,Z.length?E-F.length:1/0),Z=""),y){case"<":L=P+L+F+Z;break;case"=":L=P+Z+L+F;break;case"^":L=Z.slice(0,Q=Z.length>>1)+P+L+F+Z.slice(Q);break;default:L=Z+P+L+F;break}return a(L)}return V.toString=function(){return p+""},V}function f(p,g){var y=d((p=E0(p),p.type="f",p)),x=Math.max(-8,Math.min(8,Math.floor(Xd(g)/3)))*3,_=Math.pow(10,-x),A=r3[8+x/3];return function(E){return y(_*E)+A}}return{format:d,formatPrefix:f}}var Xg,zb,nk;Xte({thousands:",",grouping:[3],currency:["$",""]});function Xte(t){return Xg=qte(t),zb=Xg.format,nk=Xg.formatPrefix,Xg}function Kte(t){return Math.max(0,-Xd(Math.abs(t)))}function Qte(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Xd(e)/3)))*3-Xd(Math.abs(t)))}function Zte(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Xd(e)-Xd(t))+1}function Jte(t,e,n,r){var i=Sw(t,e,n),a;switch(r=E0(r??",f"),r.type){case"s":{var s=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(a=Qte(i,s))&&(r.precision=a),nk(r,s)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(a=Zte(i,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=a-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(a=Kte(i))&&(r.precision=a-(r.type==="%")*2);break}}return zb(r)}function dy(t){var e=t.domain;return t.ticks=function(n){var r=e();return Aw(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var i=e();return Jte(i[0],i[i.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),i=0,a=r.length-1,s=r[i],o=r[a],c,d,f=10;for(o<s&&(d=s,s=o,o=d,d=i,i=a,a=d);f-- >0;){if(d=Ew(s,o,n),d===c)return r[i]=s,r[a]=o,e(r);if(d>0)s=Math.floor(s/d)*d,o=Math.ceil(o/d)*d;else if(d<0)s=Math.ceil(s*d)/d,o=Math.floor(o*d)/d;else break;c=d}return t},t}function $b(){var t=ek();return t.copy=function(){return K0(t,$b())},Oo.apply(t,arguments),dy(t)}function rk(t,e){t=t.slice();var n=0,r=t.length-1,i=t[n],a=t[r],s;return a<i&&(s=n,n=r,r=s,s=i,i=a,a=s),t[n]=e.floor(i),t[r]=e.ceil(a),t}function i3(t){return Math.log(t)}function a3(t){return Math.exp(t)}function ene(t){return-Math.log(-t)}function tne(t){return-Math.exp(-t)}function nne(t){return isFinite(t)?+("1e"+t):t<0?0:t}function rne(t){return t===10?nne:t===Math.E?Math.exp:e=>Math.pow(t,e)}function ine(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function s3(t){return(e,n)=>-t(-e,n)}function ane(t){const e=t(i3,a3),n=e.domain;let r=10,i,a;function s(){return i=ine(r),a=rne(r),n()[0]<0?(i=s3(i),a=s3(a),t(ene,tne)):t(i3,a3),e}return e.base=function(o){return arguments.length?(r=+o,s()):r},e.domain=function(o){return arguments.length?(n(o),s()):n()},e.ticks=o=>{const c=n();let d=c[0],f=c[c.length-1];const p=f<d;p&&([d,f]=[f,d]);let g=i(d),y=i(f),x,_;const A=o==null?10:+o;let E=[];if(!(r%1)&&y-g<A){if(g=Math.floor(g),y=Math.ceil(y),d>0){for(;g<=y;++g)for(x=1;x<r;++x)if(_=g<0?x/a(-g):x*a(g),!(_<d)){if(_>f)break;E.push(_)}}else for(;g<=y;++g)for(x=r-1;x>=1;--x)if(_=g>0?x/a(-g):x*a(g),!(_<d)){if(_>f)break;E.push(_)}E.length*2<A&&(E=Aw(d,f,A))}else E=Aw(g,y,Math.min(y-g,A)).map(a);return p?E.reverse():E},e.tickFormat=(o,c)=>{if(o==null&&(o=10),c==null&&(c=r===10?"s":","),typeof c!="function"&&(!(r%1)&&(c=E0(c)).precision==null&&(c.trim=!0),c=zb(c)),o===1/0)return c;const d=Math.max(1,r*o/e.ticks().length);return f=>{let p=f/a(Math.round(i(f)));return p*r<r-.5&&(p*=r),p<=d?c(f):""}},e.nice=()=>n(rk(n(),{floor:o=>a(Math.floor(i(o))),ceil:o=>a(Math.ceil(i(o)))})),e}function t1(){const t=ane(uy()).domain([1,10]);return t.copy=()=>K0(t,t1()).base(t.base()),Oo.apply(t,arguments),t}function o3(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function l3(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function sne(t){var e=1,n=t(o3(e),l3(e));return n.constant=function(r){return arguments.length?t(o3(e=+r),l3(e)):e},dy(n)}function ik(){var t=sne(uy());return t.copy=function(){return K0(t,ik()).constant(t.constant())},Oo.apply(t,arguments)}function c3(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function one(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function lne(t){return t<0?-t*t:t*t}function cne(t){var e=t(_a,_a),n=1;function r(){return n===1?t(_a,_a):n===.5?t(one,lne):t(c3(n),c3(1/n))}return e.exponent=function(i){return arguments.length?(n=+i,r()):n},dy(e)}function Gb(){var t=cne(uy());return t.copy=function(){return K0(t,Gb()).exponent(t.exponent())},Oo.apply(t,arguments),t}function une(){return Gb.apply(null,arguments).exponent(.5)}function ak(){var t=[.5],e=[0,1],n,r=1;function i(a){return a!=null&&a<=a?e[YP(t,a,0,r)]:n}return i.domain=function(a){return arguments.length?(t=Array.from(a),r=Math.min(t.length,e.length-1),i):t.slice()},i.range=function(a){return arguments.length?(e=Array.from(a),r=Math.min(t.length,e.length-1),i):e.slice()},i.invertExtent=function(a){var s=e.indexOf(a);return[t[s-1],t[s]]},i.unknown=function(a){return arguments.length?(n=a,i):n},i.copy=function(){return ak().domain(t).range(e).unknown(n)},Oo.apply(i,arguments)}const a2=new Date,s2=new Date;function Rr(t,e,n,r){function i(a){return t(a=arguments.length===0?new Date:new Date(+a)),a}return i.floor=a=>(t(a=new Date(+a)),a),i.ceil=a=>(t(a=new Date(a-1)),e(a,1),t(a),a),i.round=a=>{const s=i(a),o=i.ceil(a);return a-s<o-a?s:o},i.offset=(a,s)=>(e(a=new Date(+a),s==null?1:Math.floor(s)),a),i.range=(a,s,o)=>{const c=[];if(a=i.ceil(a),o=o==null?1:Math.floor(o),!(a<s)||!(o>0))return c;let d;do c.push(d=new Date(+a)),e(a,o),t(a);while(d<a&&a<s);return c},i.filter=a=>Rr(s=>{if(s>=s)for(;t(s),!a(s);)s.setTime(s-1)},(s,o)=>{if(s>=s)if(o<0)for(;++o<=0;)for(;e(s,-1),!a(s););else for(;--o>=0;)for(;e(s,1),!a(s););}),n&&(i.count=(a,s)=>(a2.setTime(+a),s2.setTime(+s),t(a2),t(s2),Math.floor(n(a2,s2))),i.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?i.filter(r?s=>r(s)%a===0:s=>i.count(0,s)%a===0):i)),i}const n1=Rr(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);n1.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?Rr(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):n1);n1.range;const lo=1e3,ba=lo*60,co=ba*60,So=co*24,Wb=So*7,u3=So*30,o2=So*365,kc=Rr(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*lo)},(t,e)=>(e-t)/lo,t=>t.getUTCSeconds());kc.range;const Yb=Rr(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*lo)},(t,e)=>{t.setTime(+t+e*ba)},(t,e)=>(e-t)/ba,t=>t.getMinutes());Yb.range;const qb=Rr(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*ba)},(t,e)=>(e-t)/ba,t=>t.getUTCMinutes());qb.range;const Xb=Rr(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*lo-t.getMinutes()*ba)},(t,e)=>{t.setTime(+t+e*co)},(t,e)=>(e-t)/co,t=>t.getHours());Xb.range;const Kb=Rr(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*co)},(t,e)=>(e-t)/co,t=>t.getUTCHours());Kb.range;const Q0=Rr(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*ba)/So,t=>t.getDate()-1);Q0.range;const fy=Rr(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/So,t=>t.getUTCDate()-1);fy.range;const sk=Rr(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/So,t=>Math.floor(t/So));sk.range;function ou(t){return Rr(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*ba)/Wb)}const hy=ou(0),r1=ou(1),dne=ou(2),fne=ou(3),Kd=ou(4),hne=ou(5),pne=ou(6);hy.range;r1.range;dne.range;fne.range;Kd.range;hne.range;pne.range;function lu(t){return Rr(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/Wb)}const py=lu(0),i1=lu(1),gne=lu(2),mne=lu(3),Qd=lu(4),yne=lu(5),vne=lu(6);py.range;i1.range;gne.range;mne.range;Qd.range;yne.range;vne.range;const Qb=Rr(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());Qb.range;const Zb=Rr(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());Zb.range;const To=Rr(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());To.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Rr(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)});To.range;const Co=Rr(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());Co.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Rr(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)});Co.range;function ok(t,e,n,r,i,a){const s=[[kc,1,lo],[kc,5,5*lo],[kc,15,15*lo],[kc,30,30*lo],[a,1,ba],[a,5,5*ba],[a,15,15*ba],[a,30,30*ba],[i,1,co],[i,3,3*co],[i,6,6*co],[i,12,12*co],[r,1,So],[r,2,2*So],[n,1,Wb],[e,1,u3],[e,3,3*u3],[t,1,o2]];function o(d,f,p){const g=f<d;g&&([d,f]=[f,d]);const y=p&&typeof p.range=="function"?p:c(d,f,p),x=y?y.range(d,+f+1):[];return g?x.reverse():x}function c(d,f,p){const g=Math.abs(f-d)/p,y=Fb(([,,A])=>A).right(s,g);if(y===s.length)return t.every(Sw(d/o2,f/o2,p));if(y===0)return n1.every(Math.max(Sw(d,f,p),1));const[x,_]=s[g/s[y-1][2]<s[y][2]/g?y-1:y];return x.every(_)}return[o,c]}const[xne,wne]=ok(Co,Zb,py,sk,Kb,qb),[_ne,bne]=ok(To,Qb,hy,Q0,Xb,Yb);function l2(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function c2(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Th(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function Ane(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,a=t.days,s=t.shortDays,o=t.months,c=t.shortMonths,d=Ch(i),f=Ih(i),p=Ch(a),g=Ih(a),y=Ch(s),x=Ih(s),_=Ch(o),A=Ih(o),E=Ch(c),T=Ih(c),C={a:G,A:Q,b:Z,B:de,c:null,d:m3,e:m3,f:Wne,g:nre,G:ire,H:zne,I:$ne,j:Gne,L:lk,m:Yne,M:qne,p:ge,q:xe,Q:x3,s:w3,S:Xne,u:Kne,U:Qne,V:Zne,w:Jne,W:ere,x:null,X:null,y:tre,Y:rre,Z:are,"%":v3},D={a:be,A:ke,b:he,B:Se,c:null,d:y3,e:y3,f:cre,g:xre,G:_re,H:sre,I:ore,j:lre,L:uk,m:ure,M:dre,p:Ae,q:Fe,Q:x3,s:w3,S:fre,u:hre,U:pre,V:gre,w:mre,W:yre,x:null,X:null,y:vre,Y:wre,Z:bre,"%":v3},k={a:V,A:L,b:P,B:F,c:q,d:p3,e:p3,f:Vne,g:h3,G:f3,H:g3,I:g3,j:Nne,L:Fne,m:kne,M:Lne,p:R,q:Pne,Q:Une,s:Hne,S:Bne,u:Ine,U:Dne,V:Rne,w:Cne,W:One,x:X,X:W,y:h3,Y:f3,Z:Mne,"%":jne};C.x=B(n,C),C.X=B(r,C),C.c=B(e,C),D.x=B(n,D),D.X=B(r,D),D.c=B(e,D);function B(ae,ye){return function(pe){var ie=[],Ve=-1,we=0,ze=ae.length,Me,Re,Ye;for(pe instanceof Date||(pe=new Date(+pe));++Ve<ze;)ae.charCodeAt(Ve)===37&&(ie.push(ae.slice(we,Ve)),(Re=d3[Me=ae.charAt(++Ve)])!=null?Me=ae.charAt(++Ve):Re=Me==="e"?" ":"0",(Ye=ye[Me])&&(Me=Ye(pe,Re)),ie.push(Me),we=Ve+1);return ie.push(ae.slice(we,Ve)),ie.join("")}}function O(ae,ye){return function(pe){var ie=Th(1900,void 0,1),Ve=I(ie,ae,pe+="",0),we,ze;if(Ve!=pe.length)return null;if("Q"in ie)return new Date(ie.Q);if("s"in ie)return new Date(ie.s*1e3+("L"in ie?ie.L:0));if(ye&&!("Z"in ie)&&(ie.Z=0),"p"in ie&&(ie.H=ie.H%12+ie.p*12),ie.m===void 0&&(ie.m="q"in ie?ie.q:0),"V"in ie){if(ie.V<1||ie.V>53)return null;"w"in ie||(ie.w=1),"Z"in ie?(we=c2(Th(ie.y,0,1)),ze=we.getUTCDay(),we=ze>4||ze===0?i1.ceil(we):i1(we),we=fy.offset(we,(ie.V-1)*7),ie.y=we.getUTCFullYear(),ie.m=we.getUTCMonth(),ie.d=we.getUTCDate()+(ie.w+6)%7):(we=l2(Th(ie.y,0,1)),ze=we.getDay(),we=ze>4||ze===0?r1.ceil(we):r1(we),we=Q0.offset(we,(ie.V-1)*7),ie.y=we.getFullYear(),ie.m=we.getMonth(),ie.d=we.getDate()+(ie.w+6)%7)}else("W"in ie||"U"in ie)&&("w"in ie||(ie.w="u"in ie?ie.u%7:"W"in ie?1:0),ze="Z"in ie?c2(Th(ie.y,0,1)).getUTCDay():l2(Th(ie.y,0,1)).getDay(),ie.m=0,ie.d="W"in ie?(ie.w+6)%7+ie.W*7-(ze+5)%7:ie.w+ie.U*7-(ze+6)%7);return"Z"in ie?(ie.H+=ie.Z/100|0,ie.M+=ie.Z%100,c2(ie)):l2(ie)}}function I(ae,ye,pe,ie){for(var Ve=0,we=ye.length,ze=pe.length,Me,Re;Ve<we;){if(ie>=ze)return-1;if(Me=ye.charCodeAt(Ve++),Me===37){if(Me=ye.charAt(Ve++),Re=k[Me in d3?ye.charAt(Ve++):Me],!Re||(ie=Re(ae,pe,ie))<0)return-1}else if(Me!=pe.charCodeAt(ie++))return-1}return ie}function R(ae,ye,pe){var ie=d.exec(ye.slice(pe));return ie?(ae.p=f.get(ie[0].toLowerCase()),pe+ie[0].length):-1}function V(ae,ye,pe){var ie=y.exec(ye.slice(pe));return ie?(ae.w=x.get(ie[0].toLowerCase()),pe+ie[0].length):-1}function L(ae,ye,pe){var ie=p.exec(ye.slice(pe));return ie?(ae.w=g.get(ie[0].toLowerCase()),pe+ie[0].length):-1}function P(ae,ye,pe){var ie=E.exec(ye.slice(pe));return ie?(ae.m=T.get(ie[0].toLowerCase()),pe+ie[0].length):-1}function F(ae,ye,pe){var ie=_.exec(ye.slice(pe));return ie?(ae.m=A.get(ie[0].toLowerCase()),pe+ie[0].length):-1}function q(ae,ye,pe){return I(ae,e,ye,pe)}function X(ae,ye,pe){return I(ae,n,ye,pe)}function W(ae,ye,pe){return I(ae,r,ye,pe)}function G(ae){return s[ae.getDay()]}function Q(ae){return a[ae.getDay()]}function Z(ae){return c[ae.getMonth()]}function de(ae){return o[ae.getMonth()]}function ge(ae){return i[+(ae.getHours()>=12)]}function xe(ae){return 1+~~(ae.getMonth()/3)}function be(ae){return s[ae.getUTCDay()]}function ke(ae){return a[ae.getUTCDay()]}function he(ae){return c[ae.getUTCMonth()]}function Se(ae){return o[ae.getUTCMonth()]}function Ae(ae){return i[+(ae.getUTCHours()>=12)]}function Fe(ae){return 1+~~(ae.getUTCMonth()/3)}return{format:function(ae){var ye=B(ae+="",C);return ye.toString=function(){return ae},ye},parse:function(ae){var ye=O(ae+="",!1);return ye.toString=function(){return ae},ye},utcFormat:function(ae){var ye=B(ae+="",D);return ye.toString=function(){return ae},ye},utcParse:function(ae){var ye=O(ae+="",!0);return ye.toString=function(){return ae},ye}}}var d3={"-":"",_:" ",0:"0"},Hr=/^\s*\d+/,Ene=/^%/,Sne=/[\\^$*+?|[\]().{}]/g;function Gt(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",a=i.length;return r+(a<n?new Array(n-a+1).join(e)+i:i)}function Tne(t){return t.replace(Sne,"\\$&")}function Ch(t){return new RegExp("^(?:"+t.map(Tne).join("|")+")","i")}function Ih(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function Cne(t,e,n){var r=Hr.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function Ine(t,e,n){var r=Hr.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function Dne(t,e,n){var r=Hr.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function Rne(t,e,n){var r=Hr.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function One(t,e,n){var r=Hr.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function f3(t,e,n){var r=Hr.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function h3(t,e,n){var r=Hr.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function Mne(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function Pne(t,e,n){var r=Hr.exec(e.slice(n,n+1));return r?(t.q=r[0]*3-3,n+r[0].length):-1}function kne(t,e,n){var r=Hr.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function p3(t,e,n){var r=Hr.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function Nne(t,e,n){var r=Hr.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function g3(t,e,n){var r=Hr.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function Lne(t,e,n){var r=Hr.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function Bne(t,e,n){var r=Hr.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function Fne(t,e,n){var r=Hr.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function Vne(t,e,n){var r=Hr.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function jne(t,e,n){var r=Ene.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function Une(t,e,n){var r=Hr.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function Hne(t,e,n){var r=Hr.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function m3(t,e){return Gt(t.getDate(),e,2)}function zne(t,e){return Gt(t.getHours(),e,2)}function $ne(t,e){return Gt(t.getHours()%12||12,e,2)}function Gne(t,e){return Gt(1+Q0.count(To(t),t),e,3)}function lk(t,e){return Gt(t.getMilliseconds(),e,3)}function Wne(t,e){return lk(t,e)+"000"}function Yne(t,e){return Gt(t.getMonth()+1,e,2)}function qne(t,e){return Gt(t.getMinutes(),e,2)}function Xne(t,e){return Gt(t.getSeconds(),e,2)}function Kne(t){var e=t.getDay();return e===0?7:e}function Qne(t,e){return Gt(hy.count(To(t)-1,t),e,2)}function ck(t){var e=t.getDay();return e>=4||e===0?Kd(t):Kd.ceil(t)}function Zne(t,e){return t=ck(t),Gt(Kd.count(To(t),t)+(To(t).getDay()===4),e,2)}function Jne(t){return t.getDay()}function ere(t,e){return Gt(r1.count(To(t)-1,t),e,2)}function tre(t,e){return Gt(t.getFullYear()%100,e,2)}function nre(t,e){return t=ck(t),Gt(t.getFullYear()%100,e,2)}function rre(t,e){return Gt(t.getFullYear()%1e4,e,4)}function ire(t,e){var n=t.getDay();return t=n>=4||n===0?Kd(t):Kd.ceil(t),Gt(t.getFullYear()%1e4,e,4)}function are(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+Gt(e/60|0,"0",2)+Gt(e%60,"0",2)}function y3(t,e){return Gt(t.getUTCDate(),e,2)}function sre(t,e){return Gt(t.getUTCHours(),e,2)}function ore(t,e){return Gt(t.getUTCHours()%12||12,e,2)}function lre(t,e){return Gt(1+fy.count(Co(t),t),e,3)}function uk(t,e){return Gt(t.getUTCMilliseconds(),e,3)}function cre(t,e){return uk(t,e)+"000"}function ure(t,e){return Gt(t.getUTCMonth()+1,e,2)}function dre(t,e){return Gt(t.getUTCMinutes(),e,2)}function fre(t,e){return Gt(t.getUTCSeconds(),e,2)}function hre(t){var e=t.getUTCDay();return e===0?7:e}function pre(t,e){return Gt(py.count(Co(t)-1,t),e,2)}function dk(t){var e=t.getUTCDay();return e>=4||e===0?Qd(t):Qd.ceil(t)}function gre(t,e){return t=dk(t),Gt(Qd.count(Co(t),t)+(Co(t).getUTCDay()===4),e,2)}function mre(t){return t.getUTCDay()}function yre(t,e){return Gt(i1.count(Co(t)-1,t),e,2)}function vre(t,e){return Gt(t.getUTCFullYear()%100,e,2)}function xre(t,e){return t=dk(t),Gt(t.getUTCFullYear()%100,e,2)}function wre(t,e){return Gt(t.getUTCFullYear()%1e4,e,4)}function _re(t,e){var n=t.getUTCDay();return t=n>=4||n===0?Qd(t):Qd.ceil(t),Gt(t.getUTCFullYear()%1e4,e,4)}function bre(){return"+0000"}function v3(){return"%"}function x3(t){return+t}function w3(t){return Math.floor(+t/1e3)}var id,fk,hk;Are({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Are(t){return id=Ane(t),fk=id.format,id.parse,hk=id.utcFormat,id.utcParse,id}function Ere(t){return new Date(t)}function Sre(t){return t instanceof Date?+t:+new Date(+t)}function Jb(t,e,n,r,i,a,s,o,c,d){var f=ek(),p=f.invert,g=f.domain,y=d(".%L"),x=d(":%S"),_=d("%I:%M"),A=d("%I %p"),E=d("%a %d"),T=d("%b %d"),C=d("%B"),D=d("%Y");function k(B){return(c(B)<B?y:o(B)<B?x:s(B)<B?_:a(B)<B?A:r(B)<B?i(B)<B?E:T:n(B)<B?C:D)(B)}return f.invert=function(B){return new Date(p(B))},f.domain=function(B){return arguments.length?g(Array.from(B,Sre)):g().map(Ere)},f.ticks=function(B){var O=g();return t(O[0],O[O.length-1],B??10)},f.tickFormat=function(B,O){return O==null?k:d(O)},f.nice=function(B){var O=g();return(!B||typeof B.range!="function")&&(B=e(O[0],O[O.length-1],B??10)),B?g(rk(O,B)):f},f.copy=function(){return K0(f,Jb(t,e,n,r,i,a,s,o,c,d))},f}function pk(){return Oo.apply(Jb(_ne,bne,To,Qb,hy,Q0,Xb,Yb,kc,fk).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function Tre(){return Oo.apply(Jb(xne,wne,Co,Zb,py,fy,Kb,qb,kc,hk).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Cre(){var t=0,e=1,n,r,i,a,s=_a,o=!1,c;function d(p){return p==null||isNaN(p=+p)?c:s(i===0?.5:(p=(a(p)-n)*i,o?Math.max(0,Math.min(1,p)):p))}d.domain=function(p){return arguments.length?([t,e]=p,n=a(t=+t),r=a(e=+e),i=n===r?0:1/(r-n),d):[t,e]},d.clamp=function(p){return arguments.length?(o=!!p,d):o},d.interpolator=function(p){return arguments.length?(s=p,d):s};function f(p){return function(g){var y,x;return arguments.length?([y,x]=g,s=p(y,x),d):[s(0),s(1)]}}return d.range=f(cy),d.rangeRound=f(JP),d.unknown=function(p){return arguments.length?(c=p,d):c},function(p){return a=p,n=p(t),r=p(e),i=n===r?0:1/(r-n),d}}function Ire(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function gk(){var t=dy(Cre()(_a));return t.copy=function(){return Ire(t,gk())},pte.apply(t,arguments)}function Dre(t,e){return function(r,i){return i.location==="tick"?i.scale.tickFormat(t)(r):i.location==="zoom-slider-tooltip"?e.tickFormat(2)(r):`${r}`}}function a1(t){return t.scaleType==="band"}function eA(t){return t.scaleType==="point"}function Rre(t){return t.scaleType==="symlog"}function Ore(t){return t.type==="piecewise"?ak(t.thresholds,t.colors):gk([t.min??0,t.max??100],t.color)}function Zd(t){return t.values?Qm(t.values,t.colors).unknown(t.unknownColor??null):Qm(t.colors.map((e,n)=>n),t.colors).unknown(t.unknownColor??null)}function Hc(t){return t.type==="ordinal"?Zd(t):Ore(t)}function mk(t){const{tickMaxStep:e,tickMinStep:n,tickNumber:r,range:i,domain:a}=t,s=n===void 0?999:Math.floor(Math.abs(a[1]-a[0])/n),o=e===void 0?2:Math.ceil(Math.abs(a[1]-a[0])/e),c=r??Math.floor(Math.abs(i[1]-i[0])/50);return Math.min(s,Math.max(o,c))}function yk(t,e){return e[1]-e[0]===0?1:t/((e[1]-e[0])/100)}function Mre(t,e){const n=ik(t,e),r=n.ticks,{negativeScale:i,linearScale:a,positiveScale:s}=Pre(n);return n.ticks=o=>{const c=r(o),d=n.constant();let f=0,p=0,g=0;c.forEach(x=>{x>-d&&x<d&&(p+=1),x<=-d&&(f+=1),x>=d&&(g+=1)});const y=[];if(f>0&&y.push(...i.ticks(f)),p>0){const x=a.ticks(p);y.at(-1)===x[0]?y.push(...x.slice(1)):y.push(...x)}if(g>0){const x=s.ticks(g);y.at(-1)===x[0]?y.push(...x.slice(1)):y.push(...x)}return y},n.tickFormat=(o=10,c)=>{const d=n.constant(),[f,p]=n.domain(),g=p-f,y=i.domain(),x=y[1]-y[0],A=(g===0?0:x/g)*o,E=a.domain(),T=E[1]-E[0],D=(g===0?0:T/g)*o,k=s.domain(),B=k[1]-k[0],I=(g===0?0:B/g)*o,R=i.tickFormat(A,c),V=a.tickFormat(D,c),L=s.tickFormat(I,c);return P=>(P.valueOf()<=-d?R:P.valueOf()>=d?L:V)(P)},n}function Pre(t){const e=t.constant(),n=t.domain(),r=[n[0],Math.min(n[1],-e)],i=t1(r,t.range()),a=[Math.max(n[0],-e),Math.min(n[1],e)],s=$b(a,t.range()),o=[Math.max(n[0],e),n[1]],c=t1(o,t.range());return{negativeScale:i,linearScale:s,positiveScale:c}}function s1(t,e,n){switch(t){case"log":return t1(e,n);case"pow":return Gb(e,n);case"sqrt":return une(e,n);case"time":return pk(e,n);case"utc":return Tre(e,n);case"symlog":return Mre(e,n);default:return $b(e,n)}}const o1=t=>(t==null?void 0:t[0])instanceof Date;function l1(t,e){const n=pk(t.data,e);return(r,{location:i})=>i==="tick"?n.tickFormat(t.tickNumber)(r):`${r.toLocaleString()}`}const u2=(t,e)=>{const n=t[1]-t[0],r=e[1]-e[0],i=t[0]-e[0]*n/r,a=t[1]+(100-e[1])*n/r;return[i,a]};let _3,b3;class kre{constructor(){if(this.types=new Set,_3)throw new Error("You can only create one instance!");_3=this.types}addType(e){this.types.add(e)}getTypes(){return this.types}}class Nre{constructor(){if(this.types=new Set,b3)throw new Error("You can only create one instance!");b3=this.types}addType(e){this.types.add(e)}getTypes(){return this.types}}const gy=new kre;gy.addType("bar");gy.addType("line");gy.addType("scatter");const vk=new Nre;vk.addType("radar");function tA(t){return gy.getTypes().has(t)}const Lre=(t,e,n,r,i,a,s,o)=>{var x;const c=r==="x"?i[e].xExtremumGetter:i[e].yExtremumGetter,d=((x=s[e])==null?void 0:x.series)??{},[f,p]=(c==null?void 0:c({series:d,axis:n,axisIndex:a,isDefaultAxis:a===0,getFilters:o}))??[1/0,-1/0],[g,y]=t;return[Math.min(f,g),Math.max(p,y)]},xk=(t,e,n,r,i,a)=>{const o=Object.keys(n).filter(tA).reduce((c,d)=>Lre(c,d,t,e,n,r,i,a),[1/0,-1/0]);return Number.isNaN(o[0])||Number.isNaN(o[1])?[1/0,-1/0]:o},Bre=(t,e,n,r)=>{const i=new Set;return Object.keys(e).filter(tA).forEach(s=>{var d,f,p;const o=((d=n[s])==null?void 0:d.series)??{},c=(p=(f=e[s]).axisTooltipGetter)==null?void 0:p.call(f,o);c!==void 0&&c.forEach(({axisId:g,direction:y})=>{y===t&&i.add(g??r)})}),i},Fre=(t,e,n,r)=>{var i;if(t.domainLimit!==void 0)return t.domainLimit;if(e==="x")for(const a of((i=r.line)==null?void 0:i.seriesOrder)??[]){const s=r.line.series[a];if(s.xAxisId===t.id||s.xAxisId===void 0&&n===0)return"strict"}return"nice"};function Vre(t,e,n){const r=e==="x"?[t.left,t.left+t.width]:[t.top+t.height,t.top];return n.reverse?[r[1],r[0]]:r}const jre=.2,Ure=.1;function wk({drawingArea:t,formattedSeries:e,axis:n,seriesConfig:r,axisDirection:i,zoomMap:a,zoomOptions:s,getFilters:o,preferStrictDomainInLineCharts:c}){if(n===void 0)return{axis:{},axisIds:[]};const d=Bre(i,r,e,n[0].id),f={};return n.forEach((p,g)=>{const y=p,x=s==null?void 0:s[y.id],_=a==null?void 0:a.get(y.id),A=_?[_.start,_.end]:[0,100],E=Vre(t,i,y),[T,C]=xk(y,i,r,g,e,_===void 0&&!x?o:void 0),D=!y.ignoreTooltip&&d.has(y.id),k=y.data??[];if(a1(y)){const G=y.categoryGapRatio??jre,Q=y.barGapRatio??Ure,Z=i==="y"?[E[1],E[0]]:E,de=u2(Z,A);if(f[y.id]=H({offset:0,height:0,categoryGapRatio:G,barGapRatio:Q,triggerTooltip:D},y,{data:k,scale:ly(y.data,de).paddingInner(G).paddingOuter(G/2),tickNumber:y.data.length,colorScale:y.colorMap&&(y.colorMap.type==="ordinal"?Zd(H({values:y.data},y.colorMap)):Hc(y.colorMap))}),o1(y.data)){const ge=l1(y,Z);f[y.id].valueFormatter=y.valueFormatter??ge}}if(eA(y)){const G=i==="y"?[...E].reverse():E,Q=u2(G,A);if(f[y.id]=H({offset:0,height:0,triggerTooltip:D},y,{data:k,scale:XP(y.data,Q),tickNumber:y.data.length,colorScale:y.colorMap&&(y.colorMap.type==="ordinal"?Zd(H({values:y.data},y.colorMap)):Hc(y.colorMap))}),o1(y.data)){const Z=l1(y,G);f[y.id].valueFormatter=y.valueFormatter??Z}}if(y.scaleType==="band"||y.scaleType==="point")return;const B=y.scaleType??"linear",O=c?Fre(y,i,g,e):y.domainLimit??"nice",I=[y.min??T,y.max??C];if(typeof O=="function"){const{min:G,max:Q}=O(T,C);I[0]=G,I[1]=Q}const R=mk(H({},y,{range:E,domain:I})),V=yk(R,A),L=u2(E,A),P=s1(B,I,L);Rre(y)&&y.constant!=null&&P.constant(y.constant);const F=O==="nice"?P.nice(R):P,[q,X]=F.domain(),W=[y.min??q,y.max??X];f[y.id]=H({offset:0,height:0,triggerTooltip:D},y,{data:k,scaleType:B,scale:F.domain(W),tickNumber:V,colorScale:y.colorMap&&Hc(y.colorMap),valueFormatter:y.valueFormatter??Dre(V,s1(B,E.map(G=>P.invert(G)),E))})}),{axis:f,axisIds:n.map(({id:p})=>p)}}function Hre(t){return t!=null}function _k({zoomMap:t,zoomOptions:e,seriesConfig:n,formattedSeries:r,direction:i}){return(a,s)=>{const o=e[a.id];if(!o||o.filterMode!=="discard")return null;const c=t==null?void 0:t.get(a.id);if(c===void 0||c.start<=0&&c.end>=100)return null;const d=a.scaleType;return d==="point"||d==="band"?zre(a.data,c.start,c.end,i):$re(d,xk(a,i,n,s,r),c.start,c.end,i,a.data)}}function zre(t,e,n,r){const i=(t==null?void 0:t.length)??0,a=Math.floor(e*i/100),s=Math.ceil(n*i/100);return function(c,d){return(c[r]??(t==null?void 0:t[d]))==null?!0:d>=a&&d<s}}function $re(t,e,n,r,i,a){let s,o;[s,o]=s1(t??"linear",e,[0,100]).nice().domain(),s=s instanceof Date?s.getTime():s,o=o instanceof Date?o.getTime():o;const c=s+n*(o-s)/100,d=s+r*(o-s)/100;return function(p,g){const y=p[i]??(a==null?void 0:a[g]);return y==null?!0:y>=c&&y<=d}}const Gre=t=>({currentAxisId:e,seriesXAxisId:n,seriesYAxisId:r,isDefaultAxis:i})=>(a,s)=>{var d,f;return!(e===n?r:n)||i?((f=(d=Object.values(t??{}))[0])==null?void 0:f.call(d,a,s))??!0:[r,n].filter(p=>p!==e).map(p=>t[p??""]).filter(Hre).every(p=>p(a,s))},A3=t=>(e=[])=>e.reduce((n,r)=>{const{zoom:i,id:a}=r,s=Bb(i,a,t);return s&&(n[a]=s),n},{}),Wre=t=>{const e=new Map;return t.forEach(n=>{e.set(n.axisId,n)}),e},bk=t=>t.zoom,Ak=We([bk],t=>t==null?void 0:t.isInteracting),my=We([bk],t=>(t==null?void 0:t.zoomData)&&Wre(t==null?void 0:t.zoomData)),Z0=We([su,hf],(t,e)=>H({},A3("x")(t),A3("y")(e)));We([Z0,(t,e)=>e],(t,e)=>t[e]);const Yre=We([my,Z0,Ro,Ka],(t,e,n,r)=>t&&e&&_k({zoomMap:t,zoomOptions:e,seriesConfig:n,formattedSeries:r,direction:"x"})),qre=We([my,Z0,Ro,Ka],(t,e,n,r)=>t&&e&&_k({zoomMap:t,zoomOptions:e,seriesConfig:n,formattedSeries:r,direction:"y"})),Ek=We([Yre,qre,su,hf],(t,e,n,r)=>{if(t===void 0||e===void 0)return;const i=n==null?void 0:n.reduce((s,o,c)=>{const d=t(o,c);return d!==null&&(s[o.id]=d),s},{}),a=r==null?void 0:r.reduce((s,o,c)=>{const d=e(o,c);return d!==null&&(s[o.id]=d),s},{});if(!(Object.keys(i??{}).length===0&&Object.keys(a??{}).length===0))return Gre(H({},i,a))}),Zi=We([su,Do,Ka,Ro,my,Z0,Ek,LP],(t,e,n,r,i,a,s,o)=>wk({drawingArea:e,formattedSeries:n,axis:t,seriesConfig:r,axisDirection:"x",zoomMap:i,zoomOptions:a,getFilters:s,preferStrictDomainInLineCharts:o})),Ji=We([hf,Do,Ka,Ro,my,Z0,Ek,LP],(t,e,n,r,i,a,s,o)=>wk({drawingArea:e,formattedSeries:n,axis:t,seriesConfig:r,axisDirection:"y",zoomMap:i,zoomOptions:a,getFilters:s,preferStrictDomainInLineCharts:o}));We([Zi,Ji,(t,e)=>e],(t,e,n)=>(t==null?void 0:t.axis[n])??(e==null?void 0:e.axis[n]));We([su,hf,(t,e)=>e],(t,e,n)=>{const r=(t==null?void 0:t.find(i=>i.id===n))??(e==null?void 0:e.find(i=>i.id===n))??null;if(r)return r});function Qa(t){return t.bandwidth!==void 0}function ad(t){return t instanceof Date?t.getTime():t}function Jd(t,e){const{scale:n,data:r,reverse:i}=t;if(!Qa(n)){const s=n.invert(e);if(r===void 0)return-1;const o=ad(s);return r==null?void 0:r.findIndex((d,f)=>{const p=ad(d);return p>o&&(f===0||Math.abs(o-p)<=Math.abs(o-ad(r[f-1])))||p<=o&&(f===r.length-1||Math.abs(ad(s)-p)<Math.abs(ad(s)-ad(r[f+1])))})}const a=n.bandwidth()===0?Math.floor((e-Math.min(...n.range())+n.step()/2)/n.step()):Math.floor((e-Math.min(...n.range()))/n.step());return a<0||a>=r.length?-1:i?r.length-1-a:a}function E3(t,e,n){const{scale:r,data:i}=t;if(!Qa(r)){const a=r.invert(e);return n<0?a:i[n]}return n<0||n>=i.length?null:i[n]}function Dw(t,e){const n=t.createSVGPoint();return n.x=e.clientX,n.y=e.clientY,n.matrixTransform(t.getScreenCTM().inverse())}const Xre=Object.is;function Sk(t,e){if(t===e)return!0;if(!(t instanceof Object)||!(e instanceof Object))return!1;let n=0,r=0;for(const i in t)if(n+=1,!Xre(t[i],e[i])||!(i in e))return!1;for(const i in e)r+=1;return n===r}const gf=({store:t})=>{const e=Ue(function(){t.update(s=>H({},s,{interaction:{pointer:null,item:null}}))}),n=Ue(function(s){t.update(o=>{const c=o.interaction.item;return s?c===null||Object.keys(s).some(d=>s[d]!==c[d])?o:H({},o,{interaction:H({},o.interaction,{item:null})}):c===null?o:H({},o,{interaction:H({},o.interaction,{item:null})})})}),r=Ue(function(s){t.update(o=>Sk(o.interaction.item,s)?o:H({},o,{interaction:H({},o.interaction,{item:s})}))}),i=Ue(function(s){t.update(o=>H({},o,{interaction:H({},o.interaction,{pointer:s})}))});return{instance:{cleanInteraction:e,setItemInteraction:r,removeItemInteraction:n,setPointerCoordinate:i}}};gf.getInitialState=()=>({interaction:{item:null,pointer:null}});gf.params={};const nA=t=>t.interaction,Kre=We([nA],t=>t!==void 0),Tk=We([nA],t=>(t==null?void 0:t.item)??null),Ck=We([nA],t=>(t==null?void 0:t.pointer)??null),J0=We([Ck],t=>t&&t.x),ep=We([Ck],t=>t&&t.y),Qre=We([Tk],t=>t!==null);function Nd(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){if(t.constructor!==e.constructor)return!1;if(Array.isArray(t)){const i=t.length;if(i!==e.length)return!1;for(let a=0;a<i;a+=1)if(!Nd(t[a],e[a]))return!1;return!0}if(t instanceof Map&&e instanceof Map){if(t.size!==e.size)return!1;const i=Array.from(t.entries());for(let a=0;a<i.length;a+=1)if(!e.has(i[a][0]))return!1;for(let a=0;a<i.length;a+=1){const s=i[a];if(!Nd(s[1],e.get(s[0])))return!1}return!0}if(t instanceof Set&&e instanceof Set){if(t.size!==e.size)return!1;const i=Array.from(t.entries());for(let a=0;a<i.length;a+=1)if(!e.has(i[a][0]))return!1;return!0}if(ArrayBuffer.isView(t)&&ArrayBuffer.isView(e)){const i=t.length;if(i!==e.length)return!1;for(let a=0;a<i;a+=1)if(t[a]!==e[a])return!1;return!0}if(t.constructor===RegExp)return t.source===e.source&&t.flags===e.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===e.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===e.toString();const n=Object.keys(t),r=n.length;if(r!==Object.keys(e).length)return!1;for(let i=0;i<r;i+=1)if(!Object.prototype.hasOwnProperty.call(e,n[i]))return!1;for(let i=0;i<r;i+=1){const a=n[i];if(!Nd(t[a],e[a]))return!1}return!0}return t!==t&&e!==e}const yy=(t,e)=>e;function Rw(t,e,n=e.axisIds[0]){return Array.isArray(n)?n.map(r=>Jd(e.axis[r],t)):Jd(e.axis[n],t)}const Ik=(t,e,n)=>{if(t===null)return null;const r=Rw(t,e,n);return r===-1?null:r},rA=We([J0,Zi,yy],Ik),iA=We([ep,Ji,yy],Ik),Zre=We([J0,ep,Zi,Ji],(t,e,n,r)=>[...t===null?[]:n.axisIds.map(i=>({axisId:i,dataIndex:Rw(t,n,i)})),...e===null?[]:r.axisIds.map(i=>({axisId:i,dataIndex:Rw(e,r,i)}))].filter(i=>i.dataIndex!==null&&i.dataIndex>=0));function Dk(t,e,n,r=e.axisIds[0]){return Array.isArray(r)?r.map((i,a)=>E3(e.axis[i],t,n[a])):E3(e.axis[r],t,n)}const Jre=We([J0,Zi,rA,yy],(t,e,n,r)=>t===null||n===null||e.axisIds.length===0?null:Dk(t,e,n,r)),eie=We([ep,Ji,iA,yy],(t,e,n,r)=>t===null||n===null||e.axisIds.length===0?null:Dk(t,e,n,r)),Rk=We([J0,Zi],(t,e)=>t===null?[]:e.axisIds.filter(n=>e.axis[n].triggerTooltip).map(n=>({axisId:n,dataIndex:Jd(e.axis[n],t)})).filter(({dataIndex:n})=>n>=0),{memoizeOptions:{resultEqualityCheck:Nd}}),Ok=We([ep,Ji],(t,e)=>t===null?[]:e.axisIds.filter(n=>e.axis[n].triggerTooltip).map(n=>({axisId:n,dataIndex:Jd(e.axis[n],t)})).filter(({dataIndex:n})=>n>=0),{memoizeOptions:{resultEqualityCheck:Nd}}),tie=We([Rk,Ok],(t,e)=>t.length>0||e.length>0),nie=()=>{};function rie(t,e,n,r){const i=iR(iie,{store:t,selector:e,skip:r}).current;i.effect=n,M.useEffect(i.onMount(r),[r])}function iie(t){const{store:e,selector:n,skip:r}=t;let i=!1,a;const s=()=>{o.dispose??(o.dispose=e.subscribe(c=>{const d=n(c);o.effect(a,d),a=d}))},o={effect:nie,dispose:null,onMount:c=>()=>{if(!c)return i||(i=!0,a=n(e.value)),s(),()=>{var d;(d=o.dispose)==null||d.call(o),o.dispose=null}}};return r||(i=!0,a=n(e.value),s()),o}const mf=({params:t,store:e,seriesConfig:n,svgRef:r,instance:i})=>{const{xAxis:a,yAxis:s,dataset:o,onHighlightedAxisChange:c}=t,d=ft(e,Do),f=ft(e,Ka),p=ft(e,Kre),{axis:g,axisIds:y}=ft(e,Zi),{axis:x,axisIds:_}=ft(e,Ji);HP({controlled:t.highlightedAxis}),Wn(()=>{t.highlightedAxis!==void 0&&e.update(C=>C.controlledCartesianAxisHighlight===t.highlightedAxis?C:H({},C,{controlledCartesianAxisHighlight:t.highlightedAxis}))},[e,t.highlightedAxis]);const A=M.useRef(!0);M.useEffect(()=>{if(A.current){A.current=!1;return}e.update(C=>H({},C,{cartesianAxis:H({},C.cartesianAxis,{x:GP(a,o),y:WP(s,o)})}))},[n,d,a,s,o,e]);const E=y[0],T=_[0];return rie(e,Zre,(C,D)=>{if(!Object.is(C,D)){if(C.length!==D.length){c(D);return}C!=null&&C.some(({axisId:k,dataIndex:B},O)=>D[O].axisId!==k||D[O].dataIndex!==B)&&c(D)}},!c),M.useEffect(()=>{const C=r.current;if(!p||!C||t.disableAxisListener)return()=>{};const D=i.addInteractionListener("moveEnd",L=>{var P;L.detail.activeGestures.pan||(P=i.cleanInteraction)==null||P.call(i)}),k=i.addInteractionListener("panEnd",L=>{var P;L.detail.activeGestures.move||(P=i.cleanInteraction)==null||P.call(i)}),B=i.addInteractionListener("quickPressEnd",L=>{var P;!L.detail.activeGestures.move&&!L.detail.activeGestures.pan&&((P=i.cleanInteraction)==null||P.call(i))}),O=L=>{var X,W;const P=L.detail.srcEvent,F=L.detail.target,q=Dw(C,P);if(L.detail.srcEvent.buttons>=1&&(F!=null&&F.hasPointerCapture(L.detail.srcEvent.pointerId))&&!(F!=null&&F.closest("[data-charts-zoom-slider]"))&&(F==null||F.releasePointerCapture(L.detail.srcEvent.pointerId)),!i.isPointInside(q.x,q.y,F)){(X=i.cleanInteraction)==null||X.call(i);return}(W=i.setPointerCoordinate)==null||W.call(i,q)},I=i.addInteractionListener("move",O),R=i.addInteractionListener("pan",O),V=i.addInteractionListener("quickPress",O);return()=>{I.cleanup(),D.cleanup(),R.cleanup(),k.cleanup(),V.cleanup(),B.cleanup()}},[r,e,g,E,x,T,i,t.disableAxisListener,p]),M.useEffect(()=>{const C=r.current,D=t.onAxisClick;if(C===null||!D)return()=>{};const k=i.addInteractionListener("tap",B=>{let O=null,I=!1;const R=Dw(C,B.detail.srcEvent),V=Jd(g[E],R.x);I=V!==-1,O=I?V:Jd(x[T],R.y);const L=I?y[0]:_[0];if(O==null||O===-1)return;const P=(I?g:x)[L].data[O],F={};Object.keys(f).filter(q=>["bar","line"].includes(q)).forEach(q=>{var X;(X=f[q])==null||X.seriesOrder.forEach(W=>{const G=f[q].series[W],Q=G.xAxisId,Z=G.yAxisId,de=I?Q:Z;(de===void 0||de===L)&&(F[W]=G.data[O])})}),D(B.detail.srcEvent,{dataIndex:O,axisValue:P,seriesValues:F})});return()=>{k.cleanup()}},[t.onAxisClick,f,r,g,y,x,_,E,T,i]),{}};mf.params={xAxis:!0,yAxis:!0,dataset:!0,onAxisClick:!0,disableAxisListener:!0,onHighlightedAxisChange:!0,highlightedAxis:!0};mf.getDefaultizedParams=({params:t})=>H({},t,{colors:t.colors??BP,theme:t.theme??"light",defaultizedXAxis:GP(t.xAxis,t.dataset),defaultizedYAxis:WP(t.yAxis,t.dataset)});mf.getInitialState=t=>H({cartesianAxis:{x:t.defaultizedXAxis,y:t.defaultizedYAxis}},t.highlightedAxis===void 0?{}:{controlledCartesianAxisHighlight:t.highlightedAxis});const yf=t=>t.controlledCartesianAxisHighlight,Mk=(t,e,n)=>n!==void 0?n.filter(r=>e.axis[r.axisId]!==void 0).map(r=>r):t===null?[]:[{axisId:e.axisIds[0],dataIndex:t}];We([rA,Zi,yf],Mk);We([iA,Ji,yf],Mk);const Pk=(t,e,n,r)=>r!==void 0?r.map(i=>{var a,s;return H({},i,{value:(s=(a=n.axis[i.axisId])==null?void 0:a.data)==null?void 0:s[i.dataIndex]})}).filter(({value:i})=>i!==void 0):e===null?[]:[{axisId:n.axisIds[0],dataIndex:t,value:e}],aie=We([rA,Jre,Zi,yf],Pk),sie=We([iA,eie,Ji,yf],Pk),kk=(t,e)=>t===void 0?[e.axis[e.axisIds[0]]]:t.map(r=>e.axis[r.axisId]??null).filter(r=>r!==null);We([yf,Zi],kk);We([yf,Ji],kk);function S3(t,e){return t.id!==void 0?t:H({id:e},t)}function T3(t){return t.colorMap?H({},t,{colorScale:t.colorMap.type==="ordinal"&&t.data?Zd(H({values:t.data},t.colorMap)):Hc(t.colorMap.type==="continuous"?H({min:t.min,max:t.max},t.colorMap):t.colorMap)}):t}function Nk(t,e){if(!t||t.length===0)return{axis:{},axisIds:[]};const n={},r=[];return t.forEach((i,a)=>{const s=i.dataKey,o=i.id??`defaultized-z-axis-${a}`;if(s===void 0||i.data!==void 0){n[o]=T3(S3(i,o)),r.push(o);return}if(e===void 0)throw new Error("MUI X Charts: z-axis uses `dataKey` but no `dataset` is provided.");n[o]=T3(S3(H({},i,{data:e.map(c=>c[s])}),o)),r.push(o)}),{axis:n,axisIds:r}}const tp=({params:t,store:e})=>{const{zAxis:n,dataset:r}=t,i=M.useRef(!0);return M.useEffect(()=>{if(i.current){i.current=!1;return}e.update(a=>H({},a,{zAxis:Nk(n,r)}))},[n,r,e]),{}};tp.params={zAxis:!0,dataset:!0};tp.getInitialState=t=>({zAxis:Nk(t.zAxis,t.dataset)});const oie=t=>t,lie=We([oie],t=>t.zAxis),cu=({store:t,params:e})=>{HP({controlled:e.highlightedItem}),Wn(()=>{t.update(i=>i.highlight.item===e.highlightedItem?i:H({},i,{highlight:H({},i.highlight,{item:e.highlightedItem})}))},[t,e.highlightedItem]);const n=Ue(()=>{var i;(i=e.onHighlightChange)==null||i.call(e,null),t.update(a=>H({},a,{highlight:{item:null}}))}),r=Ue(i=>{var s;const a=t.getSnapshot().highlight.item;Sk(a,i)||((s=e.onHighlightChange)==null||s.call(e,i),t.update(o=>H({},o,{highlight:{item:i}})))});return{instance:{clearHighlight:n,setHighlight:r}}};cu.getDefaultizedParams=({params:t})=>H({},t,{highlightedItem:t.highlightedItem??null});cu.getInitialState=t=>({highlight:{item:t.highlightedItem}});cu.params={highlightedItem:!0,onHighlightChange:!0};function Lk(t){let e=1/0,n=-1/0;for(const r of t??[])r<e&&(e=r),r>n&&(n=r);return[e,n]}const C3=(t,e)=>e==="x"?{x:t,y:null}:{x:null,y:t},Bk=t=>{var s;const{axis:e,getFilters:n,isDefaultAxis:r}=t,i=n==null?void 0:n({currentAxisId:e.id,isDefaultAxis:r}),a=i?(s=e.data)==null?void 0:s.filter((o,c)=>i({x:null,y:null},c)):e.data;return Lk(a??[])},Fk=t=>e=>{const{series:n,axis:r,getFilters:i,isDefaultAxis:a}=e;return Object.keys(n).filter(s=>{const o=t==="x"?n[s].xAxisId:n[s].yAxisId;return o===r.id||a&&o===void 0}).reduce((s,o)=>{const{stackedData:c}=n[o],d=i==null?void 0:i({currentAxisId:r.id,isDefaultAxis:a,seriesXAxisId:n[o].xAxisId,seriesYAxisId:n[o].yAxisId}),[f,p]=(c==null?void 0:c.reduce((g,y,x)=>d&&(!d(C3(y[0],t),x)||!d(C3(y[1],t),x))?g:[Math.min(...y,g[0]),Math.max(...y,g[1])],[1/0,-1/0]))??[1/0,-1/0];return[Math.min(f,s[0]),Math.max(p,s[1])]},[1/0,-1/0])},cie=t=>Object.keys(t.series).some(n=>t.series[n].layout==="horizontal")?Fk("x")(t):Bk(t),uie=t=>Object.keys(t.series).some(n=>t.series[n].layout==="horizontal")?Bk(t):Fk("y")(t);function Sr(t){return function(){return t}}const I3=Math.abs,si=Math.atan2,Ec=Math.cos,die=Math.max,d2=Math.min,hs=Math.sin,_d=Math.sqrt,ki=1e-12,S0=Math.PI,c1=S0/2,gm=2*S0;function fie(t){return t>1?0:t<-1?S0:Math.acos(t)}function D3(t){return t>=1?c1:t<=-1?-c1:Math.asin(t)}const Ow=Math.PI,Mw=2*Ow,Ic=1e-6,hie=Mw-Ic;function Vk(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function pie(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return Vk;const n=10**e;return function(r){this._+=r[0];for(let i=1,a=r.length;i<a;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}let gie=class{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?Vk:pie(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,r,i){this._append`Q${+e},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(e,n,r,i,a,s){this._append`C${+e},${+n},${+r},${+i},${this._x1=+a},${this._y1=+s}`}arcTo(e,n,r,i,a){if(e=+e,n=+n,r=+r,i=+i,a=+a,a<0)throw new Error(`negative radius: ${a}`);let s=this._x1,o=this._y1,c=r-e,d=i-n,f=s-e,p=o-n,g=f*f+p*p;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(g>Ic)if(!(Math.abs(p*c-d*f)>Ic)||!a)this._append`L${this._x1=e},${this._y1=n}`;else{let y=r-s,x=i-o,_=c*c+d*d,A=y*y+x*x,E=Math.sqrt(_),T=Math.sqrt(g),C=a*Math.tan((Ow-Math.acos((_+g-A)/(2*E*T)))/2),D=C/T,k=C/E;Math.abs(D-1)>Ic&&this._append`L${e+D*f},${n+D*p}`,this._append`A${a},${a},0,0,${+(p*y>f*x)},${this._x1=e+k*c},${this._y1=n+k*d}`}}arc(e,n,r,i,a,s){if(e=+e,n=+n,r=+r,s=!!s,r<0)throw new Error(`negative radius: ${r}`);let o=r*Math.cos(i),c=r*Math.sin(i),d=e+o,f=n+c,p=1^s,g=s?i-a:a-i;this._x1===null?this._append`M${d},${f}`:(Math.abs(this._x1-d)>Ic||Math.abs(this._y1-f)>Ic)&&this._append`L${d},${f}`,r&&(g<0&&(g=g%Mw+Mw),g>hie?this._append`A${r},${r},0,1,${p},${e-o},${n-c}A${r},${r},0,1,${p},${this._x1=d},${this._y1=f}`:g>Ic&&this._append`A${r},${r},0,${+(g>=Ow)},${p},${this._x1=e+r*Math.cos(a)},${this._y1=n+r*Math.sin(a)}`)}rect(e,n,r,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}};function mie(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);e=r}return t},()=>new gie(e)}function yie(t){return t.innerRadius}function vie(t){return t.outerRadius}function xie(t){return t.startAngle}function wie(t){return t.endAngle}function _ie(t){return t&&t.padAngle}function bie(t,e,n,r,i,a,s,o){var c=n-t,d=r-e,f=s-i,p=o-a,g=p*c-f*d;if(!(g*g<ki))return g=(f*(e-a)-p*(t-i))/g,[t+g*c,e+g*d]}function Kg(t,e,n,r,i,a,s){var o=t-n,c=e-r,d=(s?a:-a)/_d(o*o+c*c),f=d*c,p=-d*o,g=t+f,y=e+p,x=n+f,_=r+p,A=(g+x)/2,E=(y+_)/2,T=x-g,C=_-y,D=T*T+C*C,k=i-a,B=g*_-x*y,O=(C<0?-1:1)*_d(die(0,k*k*D-B*B)),I=(B*C-T*O)/D,R=(-B*T-C*O)/D,V=(B*C+T*O)/D,L=(-B*T+C*O)/D,P=I-A,F=R-E,q=V-A,X=L-E;return P*P+F*F>q*q+X*X&&(I=V,R=L),{cx:I,cy:R,x01:-f,y01:-p,x11:I*(i/k-1),y11:R*(i/k-1)}}function jk(){var t=yie,e=vie,n=Sr(0),r=null,i=xie,a=wie,s=_ie,o=null,c=mie(d);function d(){var f,p,g=+t.apply(this,arguments),y=+e.apply(this,arguments),x=i.apply(this,arguments)-c1,_=a.apply(this,arguments)-c1,A=I3(_-x),E=_>x;if(o||(o=f=c()),y<g&&(p=y,y=g,g=p),!(y>ki))o.moveTo(0,0);else if(A>gm-ki)o.moveTo(y*Ec(x),y*hs(x)),o.arc(0,0,y,x,_,!E),g>ki&&(o.moveTo(g*Ec(_),g*hs(_)),o.arc(0,0,g,_,x,E));else{var T=x,C=_,D=x,k=_,B=A,O=A,I=s.apply(this,arguments)/2,R=I>ki&&(r?+r.apply(this,arguments):_d(g*g+y*y)),V=d2(I3(y-g)/2,+n.apply(this,arguments)),L=V,P=V,F,q;if(R>ki){var X=D3(R/g*hs(I)),W=D3(R/y*hs(I));(B-=X*2)>ki?(X*=E?1:-1,D+=X,k-=X):(B=0,D=k=(x+_)/2),(O-=W*2)>ki?(W*=E?1:-1,T+=W,C-=W):(O=0,T=C=(x+_)/2)}var G=y*Ec(T),Q=y*hs(T),Z=g*Ec(k),de=g*hs(k);if(V>ki){var ge=y*Ec(C),xe=y*hs(C),be=g*Ec(D),ke=g*hs(D),he;if(A<S0)if(he=bie(G,Q,be,ke,ge,xe,Z,de)){var Se=G-he[0],Ae=Q-he[1],Fe=ge-he[0],ae=xe-he[1],ye=1/hs(fie((Se*Fe+Ae*ae)/(_d(Se*Se+Ae*Ae)*_d(Fe*Fe+ae*ae)))/2),pe=_d(he[0]*he[0]+he[1]*he[1]);L=d2(V,(g-pe)/(ye-1)),P=d2(V,(y-pe)/(ye+1))}else L=P=0}O>ki?P>ki?(F=Kg(be,ke,G,Q,y,P,E),q=Kg(ge,xe,Z,de,y,P,E),o.moveTo(F.cx+F.x01,F.cy+F.y01),P<V?o.arc(F.cx,F.cy,P,si(F.y01,F.x01),si(q.y01,q.x01),!E):(o.arc(F.cx,F.cy,P,si(F.y01,F.x01),si(F.y11,F.x11),!E),o.arc(0,0,y,si(F.cy+F.y11,F.cx+F.x11),si(q.cy+q.y11,q.cx+q.x11),!E),o.arc(q.cx,q.cy,P,si(q.y11,q.x11),si(q.y01,q.x01),!E))):(o.moveTo(G,Q),o.arc(0,0,y,T,C,!E)):o.moveTo(G,Q),!(g>ki)||!(B>ki)?o.lineTo(Z,de):L>ki?(F=Kg(Z,de,ge,xe,g,-L,E),q=Kg(G,Q,be,ke,g,-L,E),o.lineTo(F.cx+F.x01,F.cy+F.y01),L<V?o.arc(F.cx,F.cy,L,si(F.y01,F.x01),si(q.y01,q.x01),!E):(o.arc(F.cx,F.cy,L,si(F.y01,F.x01),si(F.y11,F.x11),!E),o.arc(0,0,g,si(F.cy+F.y11,F.cx+F.x11),si(q.cy+q.y11,q.cx+q.x11),E),o.arc(q.cx,q.cy,L,si(q.y11,q.x11),si(q.y01,q.x01),!E))):o.arc(0,0,g,k,D,E)}if(o.closePath(),f)return o=null,f+""||null}return d.centroid=function(){var f=(+t.apply(this,arguments)+ +e.apply(this,arguments))/2,p=(+i.apply(this,arguments)+ +a.apply(this,arguments))/2-S0/2;return[Ec(p)*f,hs(p)*f]},d.innerRadius=function(f){return arguments.length?(t=typeof f=="function"?f:Sr(+f),d):t},d.outerRadius=function(f){return arguments.length?(e=typeof f=="function"?f:Sr(+f),d):e},d.cornerRadius=function(f){return arguments.length?(n=typeof f=="function"?f:Sr(+f),d):n},d.padRadius=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:Sr(+f),d):r},d.startAngle=function(f){return arguments.length?(i=typeof f=="function"?f:Sr(+f),d):i},d.endAngle=function(f){return arguments.length?(a=typeof f=="function"?f:Sr(+f),d):a},d.padAngle=function(f){return arguments.length?(s=typeof f=="function"?f:Sr(+f),d):s},d.context=function(f){return arguments.length?(o=f??null,d):o},d}function Uk(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function Aie(t,e){return e<t?-1:e>t?1:e>=t?0:NaN}function Eie(t){return t}function Sie(){var t=Eie,e=Aie,n=null,r=Sr(0),i=Sr(gm),a=Sr(0);function s(o){var c,d=(o=Uk(o)).length,f,p,g=0,y=new Array(d),x=new Array(d),_=+r.apply(this,arguments),A=Math.min(gm,Math.max(-gm,i.apply(this,arguments)-_)),E,T=Math.min(Math.abs(A)/d,a.apply(this,arguments)),C=T*(A<0?-1:1),D;for(c=0;c<d;++c)(D=x[y[c]=c]=+t(o[c],c,o))>0&&(g+=D);for(e!=null?y.sort(function(k,B){return e(x[k],x[B])}):n!=null&&y.sort(function(k,B){return n(o[k],o[B])}),c=0,p=g?(A-d*C)/g:0;c<d;++c,_=E)f=y[c],D=x[f],E=_+(D>0?D*p:0)+C,x[f]={data:o[f],index:c,value:D,startAngle:_,endAngle:E,padAngle:T};return x}return s.value=function(o){return arguments.length?(t=typeof o=="function"?o:Sr(+o),s):t},s.sortValues=function(o){return arguments.length?(e=o,n=null,s):e},s.sort=function(o){return arguments.length?(n=o,e=null,s):n},s.startAngle=function(o){return arguments.length?(r=typeof o=="function"?o:Sr(+o),s):r},s.endAngle=function(o){return arguments.length?(i=typeof o=="function"?o:Sr(+o),s):i},s.padAngle=function(o){return arguments.length?(a=typeof o=="function"?o:Sr(+o),s):a},s}function ef(t,e){if((s=t.length)>1)for(var n=1,r,i,a=t[e[0]],s,o=a.length;n<s;++n)for(i=a,a=t[e[n]],r=0;r<o;++r)a[r][1]+=a[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function tf(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}function Tie(t,e){return t[e]}function Cie(t){const e=[];return e.key=t,e}function Hk(){var t=Sr([]),e=tf,n=ef,r=Tie;function i(a){var s=Array.from(t.apply(this,arguments),Cie),o,c=s.length,d=-1,f;for(const p of a)for(o=0,++d;o<c;++o)(s[o][d]=[0,+r(p,s[o].key,d,a)]).data=p;for(o=0,f=Uk(e(s));o<c;++o)s[f[o]].index=o;return n(s,f),s}return i.keys=function(a){return arguments.length?(t=typeof a=="function"?a:Sr(Array.from(a)),i):t},i.value=function(a){return arguments.length?(r=typeof a=="function"?a:Sr(+a),i):r},i.order=function(a){return arguments.length?(e=a==null?tf:typeof a=="function"?a:Sr(Array.from(a)),i):e},i.offset=function(a){return arguments.length?(n=a??ef,i):n},i}function Iie(t,e){if((r=t.length)>0){for(var n,r,i=0,a=t[0].length,s;i<a;++i){for(s=n=0;n<r;++n)s+=t[n][i][1]||0;if(s)for(n=0;n<r;++n)t[n][i][1]/=s}ef(t,e)}}function Die(t,e){if((c=t.length)>0)for(var n,r=0,i,a,s,o,c,d=t[e[0]].length;r<d;++r)for(s=o=0,n=0;n<c;++n)(a=(i=t[e[n]][r])[1]-i[0])>0?(i[0]=s,i[1]=s+=a):a<0?(i[1]=o,i[0]=o+=a):(i[0]=0,i[1]=a)}function Rie(t,e){if((i=t.length)>0){for(var n=0,r=t[e[0]],i,a=r.length;n<a;++n){for(var s=0,o=0;s<i;++s)o+=t[s][n][1]||0;r[n][1]+=r[n][0]=-o/2}ef(t,e)}}function Oie(t,e){if(!(!((s=t.length)>0)||!((a=(i=t[e[0]]).length)>0))){for(var n=0,r=1,i,a,s;r<a;++r){for(var o=0,c=0,d=0;o<s;++o){for(var f=t[e[o]],p=f[r][1]||0,g=f[r-1][1]||0,y=(p-g)/2,x=0;x<o;++x){var _=t[e[x]],A=_[r][1]||0,E=_[r-1][1]||0;y+=A-E}c+=p,d+=y*p}i[r-1][1]+=i[r-1][0]=n,c&&(n-=d/c)}i[r-1][1]+=i[r-1][0]=n,ef(t,e)}}function zk(t){var e=t.map(Mie);return tf(t).sort(function(n,r){return e[n]-e[r]})}function Mie(t){for(var e=-1,n=0,r=t.length,i,a=-1/0;++e<r;)(i=+t[e][1])>a&&(a=i,n=e);return n}function $k(t){var e=t.map(Gk);return tf(t).sort(function(n,r){return e[n]-e[r]})}function Gk(t){for(var e=0,n=-1,r=t.length,i;++n<r;)(i=+t[n][1])&&(e+=i);return e}function Pie(t){return $k(t).reverse()}function kie(t){var e=t.length,n,r,i=t.map(Gk),a=zk(t),s=0,o=0,c=[],d=[];for(n=0;n<e;++n)r=a[n],s<o?(s+=i[r],c.push(r)):(o+=i[r],d.push(r));return d.reverse().concat(c)}function Nie(t){return tf(t).reverse()}const f2={appearance:zk,ascending:$k,descending:Pie,insideOut:kie,none:tf,reverse:Nie},h2={expand:Iie,diverging:Die,none:ef,silhouette:Rie,wiggle:Oie},Wk=t=>{const{series:e,seriesOrder:n,defaultStrategy:r}=t,i=[],a={};return n.forEach(s=>{const{stack:o,stackOrder:c,stackOffset:d}=e[s];o===void 0?i.push({ids:[s],stackingOrder:f2.none,stackingOffset:h2.none}):a[o]===void 0?(a[o]=i.length,i.push({ids:[s],stackingOrder:f2[c??(r==null?void 0:r.stackOrder)??"none"],stackingOffset:h2[d??(r==null?void 0:r.stackOffset)??"diverging"]})):(i[a[o]].ids.push(s),c!==void 0&&(i[a[o]].stackingOrder=f2[c]),d!==void 0&&(i[a[o]].stackingOffset=h2[d]))}),i},Lie=t=>t==null?"":t.toLocaleString(),Bie=(t,e)=>{const{seriesOrder:n,series:r}=t,i=Wk(t),a=e??[];n.forEach(o=>{const c=r[o].data;if(c!==void 0)c.forEach((d,f)=>{a.length<=f?a.push({[o]:d}):a[f][o]=d});else if(e===void 0)throw new Error([`MUI X Charts: bar series with id='${o}' has no data.`,"Either provide a data property to the series or use the dataset prop."].join(`
`))});const s={};return i.forEach(o=>{const{ids:c,stackingOffset:d,stackingOrder:f}=o,p=Hk().keys(c.map(g=>{const y=r[g].dataKey;return r[g].data===void 0&&y!==void 0?y:g})).value((g,y)=>g[y]??0).order(f).offset(d)(a);c.forEach((g,y)=>{const x=r[g].dataKey;s[g]=H({layout:"vertical",labelMarkType:"square",minBarSize:0,valueFormatter:r[g].valueFormatter??Lie},r[g],{data:x?e.map(_=>{const A=_[x];return typeof A!="number"?null:A}):r[g].data,stackedData:p[y].map(([_,A])=>[_,A])})})}),{seriesOrder:n,stackingGroups:i,series:s}};function Qi(t,e){return typeof t=="function"?t(e):t}const Fie=t=>{const{seriesOrder:e,series:n}=t;return e.reduce((r,i)=>{const a=Qi(n[i].label,"legend");return a===void 0||r.push({markType:n[i].labelMarkType,id:i,seriesId:i,color:n[i].color,label:a}),r},[])},Yk=(t,e,n)=>{const r=t.layout==="vertical",i=r?e==null?void 0:e.colorScale:n==null?void 0:n.colorScale,a=r?n==null?void 0:n.colorScale:e==null?void 0:e.colorScale,s=r?e==null?void 0:e.data:n==null?void 0:n.data;return a?o=>{if(o===void 0)return t.color;const c=t.data[o],d=c===null?t.color:a(c);return d===null?t.color:d}:i&&s?o=>{if(o===void 0)return t.color;const c=s[o],d=c===null?t.color:i(c);return d===null?t.color:d}:()=>t.color},Vie=t=>{const{series:e,getColor:n,identifier:r}=t;if(!r||r.dataIndex===void 0)return null;const i=Qi(e.label,"tooltip"),a=e.data[r.dataIndex];if(a==null)return null;const s=e.valueFormatter(a,{dataIndex:r.dataIndex});return{identifier:r,color:n(r.dataIndex),label:i,value:a,formattedValue:s,markType:e.labelMarkType}},jie=t=>Object.values(t).map(e=>e.layout==="horizontal"?{direction:"y",axisId:e.yAxisId}:{direction:"x",axisId:e.xAxisId}),Uie=(t,e,n)=>H({id:t.id??`auto-generated-id-${e}`,color:n[e%n.length]},t),Hie={seriesProcessor:Bie,colorProcessor:Yk,legendGetter:Fie,tooltipGetter:Vie,axisTooltipGetter:jie,xExtremumGetter:cie,yExtremumGetter:uie,getSeriesWithDefaultValues:Uie},zie=t=>{const{series:e,axis:n,isDefaultAxis:r,getFilters:i}=t;let a=1/0,s=-1/0;for(const o in e){if(!Object.hasOwn(e,o))continue;const c=e[o].xAxisId;if(!(c===n.id||c===void 0&&r))continue;const d=i==null?void 0:i({currentAxisId:n.id,isDefaultAxis:r,seriesXAxisId:e[o].xAxisId,seriesYAxisId:e[o].yAxisId}),f=e[o].data??[];for(let p=0;p<f.length;p+=1){const g=f[p];d&&!d(g,p)||g.x!==null&&(g.x<a&&(a=g.x),g.x>s&&(s=g.x))}}return[a,s]},$ie=t=>{const{series:e,axis:n,isDefaultAxis:r,getFilters:i}=t;let a=1/0,s=-1/0;for(const o in e){if(!Object.hasOwn(e,o))continue;const c=e[o].yAxisId;if(!(c===n.id||c===void 0&&r))continue;const d=i==null?void 0:i({currentAxisId:n.id,isDefaultAxis:r,seriesXAxisId:e[o].xAxisId,seriesYAxisId:e[o].yAxisId}),f=e[o].data??[];for(let p=0;p<f.length;p+=1){const g=f[p];d&&!d(g,p)||g.y!==null&&(g.y<a&&(a=g.y),g.y>s&&(s=g.y))}}return[a,s]},Gie=({series:t,seriesOrder:e},n)=>({series:Object.fromEntries(Object.entries(t).map(([i,a])=>{const s=a==null?void 0:a.datasetKeys,o=["x","y","id"].filter(d=>typeof(s==null?void 0:s[d])!="string");if(a!=null&&a.datasetKeys&&o.length>0)throw new Error([`MUI X Charts: scatter series with id='${i}' has incomplete datasetKeys.`,`Properties ${o.map(d=>`"${d}"`).join(", ")} are missing.`].join(`
`));const c=s?(n==null?void 0:n.map(d=>({x:d[s.x]??null,y:d[s.y]??null,z:s.z&&d[s.z],id:s.id&&d[s.id]})))??[]:a.data??[];return[i,H({labelMarkType:"circle",markerSize:4},a,{preview:H({markerSize:1},a==null?void 0:a.preview),data:c,valueFormatter:a.valueFormatter??(d=>d&&`(${d.x}, ${d.y})`)})]})),seriesOrder:e}),Wie=(t,e,n,r)=>{const i=r==null?void 0:r.colorScale,a=n==null?void 0:n.colorScale,s=e==null?void 0:e.colorScale;return i?o=>{var f,p;if(o===void 0)return t.color;if(((f=r==null?void 0:r.data)==null?void 0:f[o])!==void 0){const g=i((p=r==null?void 0:r.data)==null?void 0:p[o]);if(g!==null)return g}const c=t.data[o],d=c===null?t.color:i(c.z);return d===null?t.color:d}:a?o=>{if(o===void 0)return t.color;const c=t.data[o],d=c===null?t.color:a(c.y);return d===null?t.color:d}:s?o=>{if(o===void 0)return t.color;const c=t.data[o],d=c===null?t.color:s(c.x);return d===null?t.color:d}:()=>t.color},Yie=t=>{const{seriesOrder:e,series:n}=t;return e.reduce((r,i)=>{const a=Qi(n[i].label,"legend");return a===void 0||r.push({markType:n[i].labelMarkType,id:i,seriesId:i,color:n[i].color,label:a}),r},[])},qie=t=>{const{series:e,getColor:n,identifier:r}=t;if(!r||r.dataIndex===void 0)return null;const i=Qi(e.label,"tooltip"),a=e.data[r.dataIndex],s=e.valueFormatter(a,{dataIndex:r.dataIndex});return{identifier:r,color:n(r.dataIndex),label:i,value:a,formattedValue:s,markType:e.labelMarkType}},Xie=(t,e,n)=>H({id:t.id??`auto-generated-id-${e}`,color:n[e%n.length]},t),Kie={seriesProcessor:Gie,colorProcessor:Wie,legendGetter:Yie,tooltipGetter:qie,xExtremumGetter:zie,yExtremumGetter:$ie,getSeriesWithDefaultValues:Xie},Qie=t=>{const{axis:e}=t;return Lk(e.data??[])};function Zie(t,e,n,r){return n.reduce((i,a,s)=>{if(e[s]===null)return i;const[o,c]=t(a);return r&&(!r({y:o,x:null},s)||!r({y:c,x:null},s))?i:[Math.min(o,c,i[0]),Math.max(o,c,i[1])]},[1/0,-1/0])}const Jie=t=>{const{series:e,axis:n,isDefaultAxis:r,getFilters:i}=t;return Object.keys(e).filter(a=>{const s=e[a].yAxisId;return s===n.id||r&&s===void 0}).reduce((a,s)=>{const{area:o,stackedData:c,data:d}=e[s],f=o!==void 0,p=i==null?void 0:i({currentAxisId:n.id,isDefaultAxis:r,seriesXAxisId:e[s].xAxisId,seriesYAxisId:e[s].yAxisId}),g=f&&n.scaleType!=="log"&&typeof e[s].baseline!="string"?A=>A:A=>[A[1],A[1]],y=Zie(g,d,c,p),[x,_]=y;return[Math.min(x,a[0]),Math.max(_,a[1])]},[1/0,-1/0])};function eae(t,e){const n={};return Object.keys(t).forEach(r=>{n[r]=H({},t[r],{valueFormatter:t[r].valueFormatter??e})}),n}const tae=(t,e)=>{const{seriesOrder:n,series:r}=t,i=Wk(H({},t,{defaultStrategy:{stackOffset:"none"}})),a=e??[];n.forEach(o=>{const c=r[o].data;c!==void 0&&c.forEach((d,f)=>{a.length<=f?a.push({[o]:d}):a[f][o]=d})});const s={};return i.forEach(o=>{const{ids:c,stackingOrder:d,stackingOffset:f}=o,p=Hk().keys(c.map(g=>{const y=r[g].dataKey;return r[g].data===void 0&&y!==void 0?y:g})).value((g,y)=>g[y]??0).order(d).offset(f)(a);c.forEach((g,y)=>{const x=r[g].dataKey;s[g]=H({labelMarkType:"line"},r[g],{data:x?e.map(_=>{const A=_[x];return typeof A!="number"?null:A}):r[g].data,stackedData:p[y].map(([_,A])=>[_,A])})})}),{seriesOrder:n,stackingGroups:i,series:eae(s,o=>o==null?"":o.toLocaleString())}},nae=(t,e,n)=>{const r=n==null?void 0:n.colorScale,i=e==null?void 0:e.colorScale;return r?a=>{if(a===void 0)return t.color;const s=t.data[a],o=s===null?t.color:r(s);return o===null?t.color:o}:i?a=>{var c;if(a===void 0)return t.color;const s=(c=e.data)==null?void 0:c[a],o=s===null?t.color:i(s);return o===null?t.color:o}:()=>t.color},rae=t=>{const{seriesOrder:e,series:n}=t;return e.reduce((r,i)=>{const a=Qi(n[i].label,"legend");return a===void 0||r.push({markType:n[i].labelMarkType,id:i,seriesId:i,color:n[i].color,label:a}),r},[])},iae=t=>{const{series:e,getColor:n,identifier:r}=t;if(!r||r.dataIndex===void 0)return null;const i=Qi(e.label,"tooltip"),a=e.data[r.dataIndex],s=e.valueFormatter(a,{dataIndex:r.dataIndex});return{identifier:r,color:n(r.dataIndex),label:i,value:a,formattedValue:s,markType:e.labelMarkType}},aae=t=>Object.values(t).map(e=>({direction:"x",axisId:e.xAxisId})),sae=(t,e,n)=>H({id:t.id??`auto-generated-id-${e}`,color:n[e%n.length]},t),oae={colorProcessor:nae,seriesProcessor:tae,legendGetter:rae,tooltipGetter:iae,axisTooltipGetter:aae,xExtremumGetter:Qie,yExtremumGetter:Jie,getSeriesWithDefaultValues:sae},lae=(t="none")=>{if(typeof t=="function")return t;switch(t){case"none":return null;case"desc":return(e,n)=>n-e;case"asc":return(e,n)=>e-n;default:return null}},cae=t=>{const{seriesOrder:e,series:n}=t,r={};return e.forEach(i=>{const a=Sie().startAngle(2*Math.PI*(n[i].startAngle??0)/360).endAngle(2*Math.PI*(n[i].endAngle??360)/360).padAngle(2*Math.PI*(n[i].paddingAngle??0)/360).sortValues(lae(n[i].sortingValues??"none"))(n[i].data.map(s=>s.value));r[i]=H({labelMarkType:"circle",valueFormatter:s=>s.value.toLocaleString()},n[i],{data:n[i].data.map((s,o)=>H({},s,{id:s.id??`auto-generated-pie-id-${i}-${o}`},a[o])).map((s,o)=>{var c,d;return H({labelMarkType:"circle"},s,{formattedValue:((d=(c=n[i]).valueFormatter)==null?void 0:d.call(c,H({},s,{label:Qi(s.label,"arc")}),{dataIndex:o}))??s.value.toLocaleString()})})})}),{seriesOrder:e,series:r}},uae=t=>e=>t.data[e].color,dae=t=>{const{seriesOrder:e,series:n}=t;return e.reduce((r,i)=>(n[i].data.forEach((a,s)=>{const o=Qi(a.label,"legend");o!==void 0&&r.push({markType:a.labelMarkType??n[i].labelMarkType,id:a.id??s,seriesId:i,color:a.color,label:o,itemId:a.id??s})}),r),[])},fae=t=>{const{series:e,getColor:n,identifier:r}=t;if(!r||r.dataIndex===void 0)return null;const i=e.data[r.dataIndex];if(i==null)return null;const a=Qi(i.label,"tooltip"),s=H({},i,{label:a}),o=e.valueFormatter(s,{dataIndex:r.dataIndex});return{identifier:r,color:n(r.dataIndex),label:a,value:s,formattedValue:o,markType:i.labelMarkType??e.labelMarkType}},hae=(t,e,n)=>H({id:t.id??`auto-generated-id-${e}`},t,{data:t.data.map((r,i)=>H({color:n[i%n.length]},r))}),pae={colorProcessor:uae,seriesProcessor:cae,legendGetter:dae,tooltipGetter:fae,getSeriesWithDefaultValues:hae},gae={bar:Hie,scatter:Kie,line:oae,pie:pae},mae=[tp,mf,gf,cu];function yae(t){const{children:e,plugins:n=mae,pluginParams:r={},seriesConfig:i=gae}=t,{contextValue:a}=Qee(n,r,i);return v.jsx(UP.Provider,{value:a,children:e})}const Ul=()=>{const t=M.useContext(UP);if(t==null)throw new Error(["MUI X Charts: Could not find the Chart context.","It looks like you rendered your component outside of a ChartDataProvider.","This can also happen if you are bundling multiple versions of the library."].join(`
`));return t};function bn(){const t=Ul();if(!t)throw new Error(["MUI X Charts: Could not find the charts context.","It looks like you rendered your component outside of a ChartContainer parent component."].join(`
`));return t.store}function Ta(){const t=bn();return ft(t,Do)}function aA(){const t=bn();return ft(t,kee)}function sA(t){return vk.getTypes().has(t)}const vae=(t,e,n,r,i,a,s)=>{var y;const o=r==="rotation"?i[e].rotationExtremumGetter:i[e].radiusExtremumGetter,c=((y=s[e])==null?void 0:y.series)??{},[d,f]=(o==null?void 0:o({series:c,axis:n,axisIndex:a,isDefaultAxis:a===0}))??[1/0,-1/0],[p,g]=t;return[Math.min(d,p),Math.max(f,g)]},xae=(t,e,n,r,i)=>{const s=Object.keys(n).filter(sA).reduce((o,c)=>vae(o,c,t,e,n,r,i),[1/0,-1/0]);return Number.isNaN(s[0])||Number.isNaN(s[1])?[1/0,-1/0]:s},bd=(t,e)=>t===void 0?e:Math.PI*t/180,wae=(t,e,n,r)=>{const i=new Set;return Object.keys(e).filter(sA).forEach(s=>{var d,f,p;const o=((d=n[s])==null?void 0:d.series)??{},c=(p=(f=e[s]).axisTooltipGetter)==null?void 0:p.call(f,o);c!==void 0&&c.forEach(({axisId:g,direction:y})=>{y===t&&i.add(g??r)})}),i};function _ae(t,e,n){if(e==="rotation"){if(n.scaleType==="point"){const r=[bd(n.startAngle,0),bd(n.endAngle,2*Math.PI)],i=r[1]-r[0];return i>Math.PI*2-.1&&(r[1]-=i/n.data.length),r}return[bd(n.startAngle,0),bd(n.endAngle,2*Math.PI)]}return[0,Math.min(t.height,t.width)/2]}const bae=.2,Aae=.1;function qk({drawingArea:t,formattedSeries:e,axis:n,seriesConfig:r,axisDirection:i}){if(n===void 0)return{axis:{},axisIds:[]};const a=wae(i,r,e,n[0].id),s={};return n.forEach((o,c)=>{const d=o,f=_ae(t,i,d),[p,g]=xae(d,i,r,c,e),y=!d.ignoreTooltip&&a.has(d.id),x=d.data??[];if(a1(d)){const R=d.categoryGapRatio??bae,V=d.barGapRatio??Aae;if(s[d.id]=H({offset:0,categoryGapRatio:R,barGapRatio:V,triggerTooltip:y},d,{data:x,scale:ly(d.data,f).paddingInner(R).paddingOuter(R/2),tickNumber:d.data.length,colorScale:d.colorMap&&(d.colorMap.type==="ordinal"?Zd(H({values:d.data},d.colorMap)):Hc(d.colorMap))}),o1(d.data)){const L=l1(d,f);s[d.id].valueFormatter=d.valueFormatter??L}}if(eA(d)&&(s[d.id]=H({offset:0,triggerTooltip:y},d,{data:x,scale:XP(d.data,f),tickNumber:d.data.length,colorScale:d.colorMap&&(d.colorMap.type==="ordinal"?Zd(H({values:d.data},d.colorMap)):Hc(d.colorMap))}),o1(d.data))){const R=l1(d,f);s[d.id].valueFormatter=d.valueFormatter??R}if(d.scaleType==="band"||d.scaleType==="point")return;const _=d.scaleType??"linear",A=d.domainLimit??"nice",E=[d.min??p,d.max??g];if(typeof A=="function"){const{min:R,max:V}=A(p,g);E[0]=R,E[1]=V}const T=mk(H({},d,{range:f,domain:E})),C=yk(T,f),D=s1(_,E,f),k=A==="nice"?D.nice(T):D,[B,O]=k.domain(),I=[d.min??B,d.max??O];s[d.id]=H({offset:0,triggerTooltip:y},d,{data:x,scaleType:_,scale:k.domain(I),tickNumber:C,colorScale:d.colorMap&&Hc(d.colorMap)})}),{axis:s,axisIds:n.map(({id:o})=>o)}}const Xk=t=>t.polarAxis,Kk=We([Xk],t=>t==null?void 0:t.rotation),Eae=We([Xk],t=>t==null?void 0:t.radius),uu=We([Kk,Do,Ka,Ro],(t,e,n,r)=>qk({drawingArea:e,formattedSeries:n,axis:t,seriesConfig:r,axisDirection:"rotation"})),Sae=We([Eae,Do,Ka,Ro],(t,e,n,r)=>qk({drawingArea:e,formattedSeries:n,axis:t,seriesConfig:r,axisDirection:"radius"})),Tae=We([Do],t=>({cx:t.left+t.width/2,cy:t.top+t.height/2})),Cae=t=>(e,n)=>Math.atan2(e-t.cx,t.cy-n);function vy(t){return(t%360+360)%360}const p2=2*Math.PI;function Iae(t){return(t%p2+p2)%p2}function R3(t,e){const{scale:n,data:r,reverse:i}=t;if(!Qa(n))throw new Error("MUI X Charts: getAxisValue is not implemented for polare continuous axes.");if(!r)return-1;const a=Iae(e-Math.min(...n.range())),s=n.bandwidth()===0?Math.floor((a+n.step()/2)/n.step())%r.length:Math.floor(a/n.step());return s<0||s>=r.length?-1:i?r.length-1-s:s}function Mo(){const t=bn(),{axis:e,axisIds:n}=ft(t,Zi);return{xAxis:e,xAxisIds:n}}function Hl(){const t=bn(),{axis:e,axisIds:n}=ft(t,Ji);return{yAxis:e,yAxisIds:n}}function Dae(t){const e=bn(),{axis:n,axisIds:r}=ft(e,Zi),i=r[0];return n[i]}function Rae(t){const e=bn(),{axis:n,axisIds:r}=ft(e,Ji),i=r[0];return n[i]}function Qk(){const t=bn(),{axis:e,axisIds:n}=ft(t,uu);return{rotationAxis:e,rotationAxisIds:n}}function Oae(){const t=bn(),{axis:e,axisIds:n}=ft(t,Sae);return{radiusAxis:e,radiusAxisIds:n}}function Mae(t){const e=bn(),{axis:n,axisIds:r}=ft(e,uu),i=r[0];return n[i]}function u1(t){return Qa(t)?e=>(t(e)??0)+t.bandwidth()/2:e=>t(e)}function oA(){const t=bn(),{axis:e,axisIds:n}=ft(t,lie)??{axis:{},axisIds:[]};return{zAxis:e,zAxisIds:n}}function lA(){const t=Ul();if(!t)throw new Error(["MUI X Charts: Could not find the svg ref context.","It looks like you rendered your component outside of a ChartContainer parent component."].join(`
`));return t.svgRef}function xy(){const t=bn();return ft(t,Ka)}function Pae(t,e){if(t===e)return!0;if(!Array.isArray(t)||!Array.isArray(e))return!1;let n=t.length;if(n!==e.length)return!1;for(;n--;)if(t[n]!==e[n])return!1;return!0}function Zk(t){const e=We([Ka,(n,r)=>r],(n,r)=>{var a,s,o,c,d,f;if(!r||Array.isArray(r)&&r.length===0)return((s=(a=n[t])==null?void 0:a.seriesOrder)==null?void 0:s.map(p=>{var g;return(g=n[t])==null?void 0:g.series[p]}))??[];if(!Array.isArray(r))return(c=(o=n[t])==null?void 0:o.series)==null?void 0:c[r];const i=[];for(const p of r){const g=(f=(d=n[t])==null?void 0:d.series)==null?void 0:f[p];g&&i.push(g)}return i});return n=>{const r=bn();return ft(r,e,[n],Pae)}}function Jk(t){const e=We([Ka],n=>n[t]);return()=>{const n=bn();return ft(n,e)}}Zk("pie");const kae=Jk("pie");function Nae(){return kae()}Zk("bar");const Lae=Jk("bar");function Bae(){return Lae()}function Fae(){return!1}function e6(t,e){return!t||!e?Fae:function(r){return r?t.highlight==="series"?r.seriesId===e.seriesId:t.highlight==="item"?r.dataIndex===e.dataIndex&&r.seriesId===e.seriesId:!1:!1}}function Vae(){return!1}function t6(t,e){return!t||!e?Vae:function(r){return r?t.fade==="series"?r.seriesId===e.seriesId&&r.dataIndex!==e.dataIndex:t.fade==="global"?r.seriesId!==e.seriesId||r.dataIndex!==e.dataIndex:!1:!1}}const jae=t=>t.highlight,Uae=t=>t.series,Hae=We([Uae],t=>{const e=new Map;return Object.keys(t.processedSeries).forEach(n=>{var i;const r=t.processedSeries[n];(i=r==null?void 0:r.seriesOrder)==null||i.forEach(a=>{const s=r==null?void 0:r.series[a];e.set(a,s==null?void 0:s.highlightScope)})}),e}),np=We([jae],function(e){return e.item}),wy=We([Hae,np],function(e,n){if(!n)return null;const r=e.get(n.seriesId);return r===void 0?null:r}),zae=We([wy,np],e6),$ae=We([wy,np],t6),Gae=We([wy,np,(t,e)=>e],function(e,n,r){return e6(e,n)(r)}),Wae=We([wy,np,(t,e)=>e],function(e,n,r){return t6(e,n)(r)});function n6(t){const e=bn(),n=ft(e,Gae,[t]),r=ft(e,Wae,[t]);return{isHighlighted:n,isFaded:!n&&r}}function Yae(){const t=bn(),e=ft(t,zae),n=ft(t,$ae);return{isHighlighted:e,isFaded:n}}function qae(t,e){return Object.keys(t).flatMap(n=>{const r=e[n].legendGetter;return r===void 0?[]:r(t[n])})}function Xae(){const t=xy(),e=bn(),n=ft(e,Ro);return{items:qae(t,n)}}function Kae(){const t=aA();return M.useCallback(e=>`${t}-gradient-${e}`,[t])}function Qae(){const t=aA();return M.useCallback(e=>`${t}-gradient-${e}-object-bound`,[t])}var g2,O3;function Zae(){if(O3)return g2;O3=1;var t=4,e=.001,n=1e-7,r=10,i=11,a=1/(i-1),s=typeof Float32Array=="function";function o(_,A){return 1-3*A+3*_}function c(_,A){return 3*A-6*_}function d(_){return 3*_}function f(_,A,E){return((o(A,E)*_+c(A,E))*_+d(A))*_}function p(_,A,E){return 3*o(A,E)*_*_+2*c(A,E)*_+d(A)}function g(_,A,E,T,C){var D,k,B=0;do k=A+(E-A)/2,D=f(k,T,C)-_,D>0?E=k:A=k;while(Math.abs(D)>n&&++B<r);return k}function y(_,A,E,T){for(var C=0;C<t;++C){var D=p(A,E,T);if(D===0)return A;var k=f(A,E,T)-_;A-=k/D}return A}function x(_){return _}return g2=function(A,E,T,C){if(!(0<=A&&A<=1&&0<=T&&T<=1))throw new Error("bezier x values must be in [0, 1] range");if(A===E&&T===C)return x;for(var D=s?new Float32Array(i):new Array(i),k=0;k<i;++k)D[k]=f(k*a,A,T);function B(O){for(var I=0,R=1,V=i-1;R!==V&&D[R]<=O;++R)I+=a;--R;var L=(O-D[R])/(D[R+1]-D[R]),P=I+L*a,F=p(P,A,T);return F>=e?y(O,P,A,T):F===0?P:g(O,I,I+a,A,T)}return function(I){return I===0?0:I===1?1:f(B(I),E,C)}},g2}var Jae=Zae();const ese=e5(Jae),cA=300,r6="cubic-bezier(0.66, 0, 0.34, 1)",tse=ese(.66,0,.34,1);var nf=0,Yh=0,Dh=0,i6=1e3,d1,qh,f1=0,Kc=0,_y=0,T0=typeof performance=="object"&&performance.now?performance:Date,a6=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function uA(){return Kc||(a6(nse),Kc=T0.now()+_y)}function nse(){Kc=0}function h1(){this._call=this._time=this._next=null}h1.prototype=s6.prototype={constructor:h1,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?uA():+n)+(e==null?0:+e),!this._next&&qh!==this&&(qh?qh._next=this:d1=this,qh=this),this._call=t,this._time=n,kw()},stop:function(){this._call&&(this._call=null,this._time=1/0,kw())}};function s6(t,e,n){var r=new h1;return r.restart(t,e,n),r}function Pw(){uA(),++nf;for(var t=d1,e;t;)(e=Kc-t._time)>=0&&t._call.call(void 0,e),t=t._next;--nf}function M3(){Kc=(f1=T0.now())+_y,nf=Yh=0;try{Pw()}finally{nf=0,ise(),Kc=0}}function rse(){var t=T0.now(),e=t-f1;e>i6&&(_y-=e,f1=t)}function ise(){for(var t,e=d1,n,r=1/0;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:d1=n);qh=t,kw(r)}function kw(t){if(!nf){Yh&&(Yh=clearTimeout(Yh));var e=t-Kc;e>24?(t<1/0&&(Yh=setTimeout(M3,t-T0.now()-_y)),Dh&&(Dh=clearInterval(Dh))):(Dh||(f1=T0.now(),Dh=setInterval(rse,i6)),nf=1,a6(M3))}}function ase(t,e,n){var r=new h1;return e=e==null?0:+e,r.restart(i=>{r.stop(),t(i+e)},e,n),r}class sse{constructor(e,n,r){this.duration=void 0,this.elapsed=0,this.easingFn=void 0,this.timer=null,this.onTickCallback=void 0,this.duration=e,this.easingFn=n,this.onTickCallback=r,this.resume()}get running(){return this.timer!==null}timerCallback(e){this.elapsed=Math.min(e,this.duration);const n=this.duration===0?1:this.elapsed/this.duration,r=this.easingFn(n);this.onTickCallback(r),this.elapsed>=this.duration&&this.stop()}resume(){if(this.running||this.elapsed>=this.duration)return this;const e=uA()-this.elapsed;return this.timer=s6(n=>this.timerCallback(n),0,e),Pw(),this}stop(){return this.running?(this.timer&&(this.timer.stop(),this.timer=null),this):this}finish(){return this.stop(),ase(()=>this.timerCallback(this.duration)),Pw(),this}}function ose(t,e){if(Object.is(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;const n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(let i=0;i<n.length;i+=1){const a=n[i];if(!Object.prototype.hasOwnProperty.call(e,a)||!Object.is(t[a],e[a]))return!1}return!0}function lse(t,{createInterpolator:e,applyProps:n,skip:r,initialProps:i=t}){const a=M.useRef(i),s=M.useRef(null),o=M.useRef(null),c=M.useRef(t);Wn(()=>{c.current=t},[t]),Wn(()=>{var p;r&&((p=s.current)==null||p.finish(),s.current=null,o.current=null,a.current=t)},[t,r]);const d=M.useCallback(p=>{const g=a.current,y=e(g,t);s.current=new sse(cA,tse,x=>{const _=y(x);a.current=_,n(p,_)})},[n,e,t]);return M.useCallback(p=>{var y,x,_,A;if(p===null){(y=s.current)==null||y.stop();return}const g=o.current;if(g===p){if(ose(c.current,t)){(x=s.current)==null||x.resume();return}(_=s.current)==null||_.stop()}g&&((A=s.current)==null||A.stop()),o.current=p,(s.current||!r)&&d(p)},[d,t,r])}function rp(t,{createInterpolator:e,transformProps:n,applyProps:r,skip:i,initialProps:a=t,ref:s}){const o=n??(f=>f),c=lse(t,{initialProps:a,createInterpolator:e,applyProps:(f,p)=>r(f,o(p)),skip:i});return H({},n(i?t:a),{ref:ti(c,s)})}function cse(t,e){const n=Qt(t.x,e.x),r=Qt(t.y,e.y),i=Qt(t.width,e.width),a=Qt(t.height,e.height);return s=>({x:n(s),y:r(s),width:i(s),height:a(s)})}function use(t){const e={x:t.layout==="vertical"?t.x:t.xOrigin,y:t.layout==="vertical"?t.yOrigin:t.y,width:t.layout==="vertical"?t.width:0,height:t.layout==="vertical"?0:t.height};return rp({x:t.x,y:t.y,width:t.width,height:t.height},{createInterpolator:cse,applyProps(n,r){n.setAttribute("x",r.x.toString()),n.setAttribute("y",r.y.toString()),n.setAttribute("width",r.width.toString()),n.setAttribute("height",r.height.toString())},transformProps:n=>n,initialProps:e,skip:t.skipAnimation,ref:t.ref})}function dse(t,e){const n=Qt(t.x,e.x),r=Qt(t.y,e.y),i=Qt(t.width,e.width),a=Qt(t.height,e.height);return s=>({x:n(s),y:r(s),width:i(s),height:a(s)})}function fse(t){const e={x:t.layout==="vertical"?t.x+t.width/2:t.xOrigin,y:t.layout==="vertical"?t.yOrigin:t.y+t.height/2,width:t.width,height:t.height},n={x:t.x+t.width/2,y:t.y+t.height/2,width:t.width,height:t.height};return rp(n,{createInterpolator:dse,transformProps:r=>r,applyProps(r,i){r.setAttribute("x",i.x.toString()),r.setAttribute("y",i.y.toString()),r.setAttribute("width",i.width.toString()),r.setAttribute("height",i.height.toString())},initialProps:e,skip:t.skipAnimation,ref:t.ref})}function hse(t,e){const n=Qt(t.startAngle,e.startAngle),r=Qt(t.endAngle,e.endAngle),i=Qt(t.innerRadius,e.innerRadius),a=Qt(t.outerRadius,e.outerRadius),s=Qt(t.paddingAngle,e.paddingAngle),o=Qt(t.cornerRadius,e.cornerRadius);return c=>({startAngle:n(c),endAngle:r(c),innerRadius:i(c),outerRadius:a(c),paddingAngle:s(c),cornerRadius:o(c)})}function pse(t){const e={startAngle:(t.startAngle+t.endAngle)/2,endAngle:(t.startAngle+t.endAngle)/2,innerRadius:t.innerRadius,outerRadius:t.outerRadius,paddingAngle:t.paddingAngle,cornerRadius:t.cornerRadius};return rp({startAngle:t.startAngle,endAngle:t.endAngle,innerRadius:t.innerRadius,outerRadius:t.outerRadius,paddingAngle:t.paddingAngle,cornerRadius:t.cornerRadius},{createInterpolator:hse,transformProps:n=>({d:jk().cornerRadius(n.cornerRadius)({padAngle:n.paddingAngle,innerRadius:n.innerRadius,outerRadius:n.outerRadius,startAngle:n.startAngle,endAngle:n.endAngle}),visibility:n.startAngle===n.endAngle?"hidden":"visible"}),applyProps(n,r){n.setAttribute("d",r.d),n.setAttribute("visibility",r.visibility)},initialProps:e,skip:t.skipAnimation,ref:t.ref})}function gse(t,e){const n=Qt(t.startAngle,e.startAngle),r=Qt(t.endAngle,e.endAngle),i=Qt(t.innerRadius,e.innerRadius),a=Qt(t.outerRadius,e.outerRadius),s=Qt(t.paddingAngle,e.paddingAngle),o=Qt(t.cornerRadius,e.cornerRadius);return c=>({startAngle:n(c),endAngle:r(c),innerRadius:i(c),outerRadius:a(c),paddingAngle:s(c),cornerRadius:o(c)})}function mse(t){const e={startAngle:(t.startAngle+t.endAngle)/2,endAngle:(t.startAngle+t.endAngle)/2,innerRadius:t.arcLabelRadius??t.innerRadius,outerRadius:t.arcLabelRadius??t.outerRadius,paddingAngle:t.paddingAngle,cornerRadius:t.cornerRadius};return rp({startAngle:t.startAngle,endAngle:t.endAngle,innerRadius:(t==null?void 0:t.arcLabelRadius)??t.innerRadius,outerRadius:(t==null?void 0:t.arcLabelRadius)??t.outerRadius,paddingAngle:t.paddingAngle,cornerRadius:t.cornerRadius},{createInterpolator:gse,transformProps:n=>{const[r,i]=jk().cornerRadius(n.cornerRadius).centroid({padAngle:n.paddingAngle,startAngle:n.startAngle,endAngle:n.endAngle,innerRadius:n.innerRadius,outerRadius:n.outerRadius});return{x:r,y:i}},applyProps(n,{x:r,y:i}){n.setAttribute("x",r.toString()),n.setAttribute("y",i.toString())},initialProps:e,skip:t.skipAnimation,ref:t.ref})}function yse(){return Ul().chartRootRef}const vse={"image/png":"PNG","image/jpeg":"JPEG","image/webp":"WebP"},xse=t=>({components:{MuiChartsLocalizationProvider:{defaultProps:{localeText:H({},t)}}}}),o6={loading:"Loading data…",noData:"No data to display",zoomIn:"Zoom in",zoomOut:"Zoom out",toolbarExport:"Export",toolbarExportPrint:"Print",toolbarExportImage:t=>`Export as ${vse[t]??t}`},wse=o6;xse(o6);const _se=["localeText"],Nw=M.createContext(null);function bse(t){const{localeText:e}=t,n=Be(t,_se),{localeText:r}=M.useContext(Nw)??{localeText:void 0},i=wt({props:n,name:"MuiChartsLocalizationProvider"}),{children:a,localeText:s}=i,o=M.useMemo(()=>H({},wse,s,r,e),[s,r,e]),c=M.useMemo(()=>({localeText:o}),[o]);return v.jsx(Nw.Provider,{value:c,children:a})}const l6=()=>{const t=M.useContext(Nw);if(t===null)throw new Error(["MUI X Charts: Can not find the charts localization context.","It looks like you forgot to wrap your component in ChartsLocalizationProvider.","This can also happen if you are bundling multiple versions of the `@mui/x-charts` package"].join(`
`));return t};function Ase(t){const{id:e,offset:n}=t,{left:r,top:i,width:a,height:s}=Ta(),o=H({top:0,right:0,bottom:0,left:0},n);return v.jsx("clipPath",{id:e,children:v.jsx("rect",{x:r-o.left,y:i-o.top,width:a+o.left+o.right,height:s+o.top+o.bottom})})}function Ese(){return typeof window>"u"}const Qg=new Map,Sse=2e3,Tse={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},Cse=["minWidth","maxWidth","width","minHeight","maxHeight","height","top","left","fontSize","padding","margin","paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom"],P3="mui_measurement_span";function c6(t,e){return Cse.indexOf(t)>=0&&e===+e?`${e}px`:e}function u6(t){return t.split("").reduce((r,i)=>i===i.toUpperCase()?[...r,"-",i.toLowerCase()]:[...r,i],[]).join("")}const Ise=t=>Object.keys(t).sort().reduce((e,n)=>`${e}${u6(n)}:${c6(n,t[n])};`,"");let m2;const ip=(t,e={})=>{if(t==null||Ese())return{width:0,height:0};const n=`${t}`,r=Ise(e),i=`${n}-${r}`,a=Qg.get(i);if(a)return a;try{let s=document.getElementById(P3);s===null&&(s=document.createElement("span"),s.setAttribute("id",P3),s.setAttribute("aria-hidden","true"),document.body.appendChild(s));const o=H({},Tse,e);Object.keys(o).map(f=>(s.style[u6(f)]=c6(f,o[f]),f)),s.textContent=n;const c=s.getBoundingClientRect(),d={width:c.width,height:c.height};return Qg.set(i,d),Qg.size+1>Sse&&Qg.clear(),m2&&clearTimeout(m2),m2=setTimeout(()=>{s.textContent=""},0),d}catch{return{width:0,height:0}}};function d6({style:t,needsComputation:e,text:n}){return n.split(`
`).map(r=>H({text:r},e?ip(r,t):{width:0,height:0}))}function dA(){const[t,e]=M.useState(typeof window<"u"||!1);return M.useEffect(()=>{e(!0)},[]),t}const Dse=["x","y","style","text","ownerState"],Rse=["angle","textAnchor","dominantBaseline"];function p1(t){const{x:e,y:n,style:r,text:i}=t,a=Be(t,Dse),s=r??{},{angle:o,textAnchor:c,dominantBaseline:d}=s,f=Be(s,Rse),p=dA(),g=M.useMemo(()=>d6({style:f,needsComputation:p&&i.includes(`
`),text:i}),[f,i,p]);let y;switch(d){case"hanging":case"text-before-edge":y=0;break;case"central":y=(g.length-1)/2*-g[0].height;break;default:y=(g.length-1)*-g[0].height;break}return v.jsx("text",H({},a,{transform:o?`rotate(${o}, ${e}, ${n})`:void 0,x:e,y:n,textAnchor:c,dominantBaseline:d,style:f,children:g.map((x,_)=>v.jsx("tspan",{x:e,dy:`${_===0?y:g[0].height}px`,dominantBaseline:d,children:x.text},_))}))}function fA(t){return typeof t=="number"&&!Number.isFinite(t)}const y2={start:0,extremities:0,end:1,middle:.5};function Ose(t){const{scale:e,tickNumber:n,valueFormatter:r,tickInterval:i,tickPlacement:a="extremities",tickLabelPlacement:s,isInside:o}=t;if(Qa(e)){const g=e.domain(),y=s??"middle";return e.bandwidth()>0?[...(typeof i=="function"&&g.filter(i)||typeof i=="object"&&i||g).map(A=>{const E=`${A}`;return{value:A,formattedValue:(r==null?void 0:r(A,{location:"tick",scale:e,tickNumber:n,defaultTickLabel:E}))??E,offset:e(A)-(e.step()-e.bandwidth())/2+y2[a]*e.step(),labelOffset:y==="tick"?0:e.step()*(y2[y]-y2[a])}}),...a==="extremities"?[{formattedValue:void 0,offset:e.range()[1],labelOffset:0}]:[]]:(typeof i=="function"&&g.filter(i)||typeof i=="object"&&i||g).map(_=>{const A=`${_}`;return{value:_,formattedValue:(r==null?void 0:r(_,{location:"tick",scale:e,tickNumber:n,defaultTickLabel:A}))??A,offset:e(_),labelOffset:0}})}if(e.domain().some(fA))return[];const d=s,f=typeof i=="object"?i:e.ticks(n),p=[];for(let g=0;g<f.length;g+=1){const y=f[g],x=e(y);if(o(x)){const _=e.tickFormat(n)(y);p.push({value:y,formattedValue:(r==null?void 0:r(y,{location:"tick",scale:e,tickNumber:n,defaultTickLabel:_}))??_,offset:x,labelOffset:d==="middle"?e(f[g-1]??0)-(x+e(f[g-1]??0))/2:0})}}return p}function by(t){const{scale:e,tickNumber:n,valueFormatter:r,tickInterval:i,tickPlacement:a="extremities",tickLabelPlacement:s,direction:o}=t,{instance:c}=Ul(),d=o==="x"?c.isXInside:c.isYInside;return M.useMemo(()=>Ose({scale:e,tickNumber:n,tickPlacement:a,tickInterval:i,tickLabelPlacement:s,valueFormatter:r,isInside:d}),[e,n,a,i,s,r,d])}function Mse(t=!1){const[e,n]=M.useState(!1);return Wn(()=>{t||n(!0)},[t]),M.useEffect(()=>{t&&n(!0)},[t]),e}const f6=typeof window<"u"&&"Intl"in window&&"Segmenter"in Intl?new Intl.Segmenter(void 0,{granularity:"grapheme"}):null;function Pse(t){return t.length}function kse(t){const e=f6.segment(t);let n=0;for(const r of e)n+=1;return n}const Nse=f6?kse:Pse;function Lse(t){return t*(Math.PI/180)}const h6=typeof window<"u"&&"Intl"in window&&"Segmenter"in Intl?new Intl.Segmenter(void 0,{granularity:"grapheme"}):null;function Bse(t,e){return t.slice(0,e)}function Fse(t,e){const n=h6.segment(t);let r="",i=0;for(const a of n)if(r+=a.segment,i+=1,i>=e)break;return r}const Vse=h6?Fse:Bse,k3="…";function p6(t,e){const{width:n,height:r,measureText:i}=e,a=Lse(e.angle),s=i(t),o=Math.abs(s.width*Math.cos(a))+Math.abs(s.height*Math.sin(a)),c=Math.abs(s.width*Math.sin(a))+Math.abs(s.height*Math.cos(a));return o<=n&&c<=r}function g6(t,e){if(e(t))return t;let n=t,r=1,i=1/2;const a=Nse(t);let s=a,o=a,c=null;do{if(o=s,s=Math.floor(a*i),s===0)break;n=Vse(t,s).trim();const d=e(n+k3);r+=1,d?(c=n,i+=1/2**r):i-=1/2**r}while(Math.abs(s-o)!==1);return c?c+k3:""}function jse(t,e,n,r,i){const a=new Map,s=vy((i==null?void 0:i.angle)??0);let o=1,c=1;(i==null?void 0:i.textAnchor)==="start"?(o=1/0,c=1):(i==null?void 0:i.textAnchor)==="end"?(o=1,c=1/0):(o=2,c=2),s>90&&s<270&&([o,c]=[c,o]),r&&([o,c]=[c,o]);for(const d of t)if(d.formattedValue){const f=Math.min((d.offset+d.labelOffset)*o,(e.left+e.width+e.right-d.offset-d.labelOffset)*c),p=g=>p6(g,{width:f,height:n,angle:s,measureText:y=>ip(y,i)});a.set(d,g6(d.formattedValue.toString(),p))}return a}const N3=5;function Use(t,e,n=0){const r=Math.min(Math.abs(n)%180,Math.abs(Math.abs(n)%180-180)%180);if(r<N3)return t;if(r>90-N3)return e;const i=bd(r),a=Math.atan2(e,t);return i<a?t/Math.cos(i):e/Math.sin(i)}function Hse(t,{tickLabelStyle:e,tickLabelInterval:n,tickLabelMinGap:r,reverse:i,isMounted:a,isXInside:s}){const o=f=>{if(!a||f.formattedValue===void 0)return{width:0,height:0};const p=d6({style:e,needsComputation:!0,text:f.formattedValue});return{width:Math.max(...p.map(g=>g.width)),height:Math.max(p.length*p[0].height)}};if(typeof n=="function")return new Set(t.filter((f,p)=>n(f.value,p)));let c=0;const d=i?-1:1;return new Set(t.filter((f,p)=>{const{offset:g,labelOffset:y}=f,x=g+y;if(p>0&&d*x<d*(c+r)||!s(x))return!1;const{width:_,height:A}=o(f),E=Use(_,A,e==null?void 0:e.angle),T=x-d*E/2;return p>0&&d*T<d*(c+r)?!1:(c=x+d*E/2,!0)}))}function m6(t){return Rt("MuiChartsAxis",t)}const Zg=Ot("MuiChartsAxis",["root","line","tickContainer","tick","tickLabel","label","directionX","directionY","top","bottom","left","right","id"]),y6=Pe("g",{name:"MuiChartsAxis",slot:"Root"})(({theme:t})=>({[`& .${Zg.tickLabel}`]:H({},t.typography.caption,{fill:(t.vars||t).palette.text.primary}),[`& .${Zg.label}`]:{fill:(t.vars||t).palette.text.primary},[`& .${Zg.line}`]:{stroke:(t.vars||t).palette.text.primary,shapeRendering:"crispEdges",strokeWidth:1},[`& .${Zg.tick}`]:{stroke:(t.vars||t).palette.text.primary,shapeRendering:"crispEdges"}})),zse=t=>{const{classes:e,position:n,id:r}=t,i={root:["root","directionX",n,`id-${r}`],line:["line"],tickContainer:["tickContainer"],tick:["tick"],tickLabel:["tickLabel"],label:["label"]};return vt(i,m6,e)},Lw=3,$se=4,v6=Pe(y6,{name:"MuiChartsXAxis",slot:"Root"})({}),Gse={disableLine:!1,disableTicks:!1,tickSize:6,tickLabelMinGap:4};function x6(t){const e=vy(t);return e<=30||e>=330||e<=210&&e>=150?"middle":e<=180?"end":"start"}function w6(t){const e=vy(t);return e<=30||e>=330?"hanging":e<=210&&e>=150?"auto":"central"}function _6(t){switch(t){case"start":return"end";case"end":return"start";default:return t}}const Wse=["scale","tickNumber","reverse"],b6=t=>{const{xAxis:e,xAxisIds:n}=Mo(),r=e[t.axisId??n[0]],{scale:i,tickNumber:a,reverse:s}=r,o=Be(r,Wse),c=wt({props:H({},o,t),name:"MuiChartsXAxis"}),d=H({},Gse,c),{position:f,tickLabelStyle:p,labelStyle:g,slots:y,slotProps:x}=d,_=Qc(),A=Ea(),E=zse(d),T=f==="bottom"?1:-1,C=(y==null?void 0:y.axisLine)??"line",D=(y==null?void 0:y.axisTick)??"line",k=(y==null?void 0:y.axisTickLabel)??p1,B=(y==null?void 0:y.axisLabel)??p1,O=x6((f==="bottom"?0:180)-((p==null?void 0:p.angle)??0)),I=w6((f==="bottom"?0:180)-((p==null?void 0:p.angle)??0)),R=St({elementType:k,externalSlotProps:x==null?void 0:x.axisTickLabel,additionalProps:{style:H({},_.typography.caption,{fontSize:12,lineHeight:1.25,textAnchor:A?_6(O):O,dominantBaseline:I},p)},className:E.tickLabel,ownerState:{}}),V=St({elementType:B,externalSlotProps:x==null?void 0:x.axisLabel,additionalProps:{style:H({},_.typography.body1,{lineHeight:1,fontSize:14,textAnchor:"middle",dominantBaseline:f==="bottom"?"text-after-edge":"text-before-edge"},g)},ownerState:{}}),L=i.domain(),P=Qa(i),F=P&&L.length===0||!P&&L.some(fA)||f==="none";return{xScale:i,defaultizedProps:d,tickNumber:a,positionSign:T,skipAxisRendering:F,classes:E,Line:C,Tick:D,TickLabel:k,Label:B,axisTickLabelProps:R,axisLabelProps:V,reverse:s,isRtl:A}};function Yse(t){const{xScale:e,defaultizedProps:n,tickNumber:r,positionSign:i,skipAxisRendering:a,classes:s,Line:o,Tick:c,TickLabel:d,Label:f,axisTickLabelProps:p,axisLabelProps:g,reverse:y,isRtl:x}=b6(t),_=Mse(),{position:A,disableLine:E,disableTicks:T,label:C,tickSize:D,valueFormatter:k,slotProps:B,tickInterval:O,tickLabelInterval:I,tickPlacement:R,tickLabelPlacement:V,tickLabelMinGap:L,sx:P,offset:F,height:q}=n,X=Ta(),{left:W,top:G,width:Q,height:Z}=X,{instance:de}=Ul(),ge=dA(),xe=T?4:D,be=by({scale:e,tickNumber:r,valueFormatter:k,tickInterval:O,tickPlacement:R,tickLabelPlacement:V,direction:"x"}),ke=Hse(be,{tickLabelStyle:p.style,tickLabelInterval:I,tickLabelMinGap:L,reverse:y,isMounted:_,isXInside:de.isXInside});if(a)return null;const he=C?ip(C,g.style).height:0,Se={x:W+Q/2,y:i*q},Ae=Math.max(0,q-(C?he+$se:0)-xe-Lw),Fe=ge?jse(ke,X,Ae,x,p.style):new Map(Array.from(ke).map(ae=>[ae,ae.formattedValue]));return v.jsxs(v6,{transform:`translate(0, ${A==="bottom"?G+Z+F:G-F})`,className:s.root,sx:P,children:[!E&&v.jsx(o,H({x1:W,x2:W+Q,className:s.line},B==null?void 0:B.axisLine)),be.map((ae,ye)=>{const{offset:pe,labelOffset:ie}=ae,Ve=ie??0,we=i*(xe+Lw),ze=de.isXInside(pe),Me=Fe.get(ae),Re=ke.has(ae);return v.jsxs("g",{transform:`translate(${pe}, 0)`,className:s.tickContainer,children:[!T&&ze&&v.jsx(c,H({y2:i*xe,className:s.tick},B==null?void 0:B.axisTick)),Me!==void 0&&Re&&v.jsx(d,H({x:Ve,y:we},p,{text:Me}))]},ye)}),C&&v.jsx("g",{className:s.label,children:v.jsx(f,H({},Se,g,{text:C}))})]})}const Rh={start:0,extremities:0,end:1,middle:.5,tick:0};function qse(t){const{scale:e,tickInterval:n,tickLabelPlacement:r="middle",tickPlacement:i="extremities",groups:a}=t;return M.useMemo(()=>{const s=e.domain(),o=typeof n=="function"&&s.filter(n)||typeof n=="object"&&n||s;if(e.bandwidth()>0){const c=L3(o,a,i,r,e);return c[0]&&(c[0].ignoreTick=!0),[{formattedValue:void 0,offset:e.range()[0],labelOffset:0,groupIndex:a.length-1},...c,{formattedValue:void 0,offset:e.range()[1],labelOffset:0,groupIndex:a.length-1}]}return L3(o,a,i,r,e)},[e,n,a,i,r])}function L3(t,e,n,r,i){const a=[],s=new Map;let o=0;for(let c=0;c<e.length;c+=1)for(let d=0;d<t.length;d+=1){const f=t[d],p=e[c].getValue(f,d),g=a[a.length-1];if((g==null?void 0:g.value)!==p||(g==null?void 0:g.groupIndex)!==c){o=1;const x=Qa(i)?i(f)-(i.step()-i.bandwidth())/2+Rh[n]*i.step():i(f),_=i.step()*o*(Rh[r]-Rh[n]);a.push({value:p,formattedValue:`${p}`,offset:x,groupIndex:c,dataIndex:d,ignoreTick:!1,labelOffset:_}),s.has(d)||s.set(d,new Set);const A=s.get(d);for(const E of A.values())a[E].ignoreTick=!0;A.add(a.length-1)}else{o+=1;const x=i.step()*o*(Rh[r]-Rh[n]);g.labelOffset=x}}return a}const B3={tickSize:6},Xse=(t,e,n)=>{const r=t[e]??{},i=n??B3.tickSize,a=i*e*2+i;return H({},B3,r,{tickSize:r.tickSize??a})};function Kse(t){const{xScale:e,defaultizedProps:n,positionSign:r,skipAxisRendering:i,classes:a,Line:s,Tick:o,TickLabel:c,Label:d,axisTickLabelProps:f,axisLabelProps:p}=b6(t);if(!Qa(e))throw new Error("MUI X Charts: ChartsGroupedXAxis only supports the `band` and `point` scale types.");const{position:g,disableLine:y,disableTicks:x,label:_,tickSize:A,valueFormatter:E,slotProps:T,tickInterval:C,tickPlacement:D,tickLabelPlacement:k,sx:B,offset:O,height:I}=n,R=n.groups,V=Ta(),{left:L,top:P,width:F,height:q}=V,{instance:X}=Ul(),W={x:L+F/2,y:r*I},G=qse({scale:e,tickInterval:C,tickPlacement:D,tickLabelPlacement:k,groups:R});return i?null:v.jsxs(v6,{transform:`translate(0, ${g==="bottom"?P+q+O:P-O})`,className:a.root,sx:B,children:[!y&&v.jsx(s,H({x1:L,x2:L+F,className:a.line},T==null?void 0:T.axisLine)),G.map((Q,Z)=>{const{offset:de,labelOffset:ge}=Q,xe=ge??0,be=X.isXInside(de),ke=Q.formattedValue,he=Q.ignoreTick??!1,Se=Q.groupIndex??0,Ae=Xse(R,Se,A),Fe=r*Ae.tickSize,ae=r*(Ae.tickSize+Lw);return v.jsxs("g",{transform:`translate(${de}, 0)`,className:a.tickContainer,"data-group-index":Se,children:[!x&&!he&&be&&v.jsx(o,H({y2:Fe,className:a.tick},T==null?void 0:T.axisTick)),ke!==void 0&&v.jsx(c,H({x:xe,y:ae},f,{text:ke}))]},Z)}),_&&v.jsx("g",{className:a.label,children:v.jsx(d,H({},W,p,{text:_}))})]})}function Qse(t){const{xAxis:e,xAxisIds:n}=Mo(),r=e[t.axisId??n[0]];return"groups"in r&&Array.isArray(r.groups)?v.jsx(Kse,H({},t)):v.jsx(Yse,H({},t))}function Zse(t,e,n,r,i){const a=new Map,s=vy((i==null?void 0:i.angle)??0);let o=1,c=1;(i==null?void 0:i.textAnchor)==="start"?(o=1/0,c=1):(i==null?void 0:i.textAnchor)==="end"?(o=1,c=1/0):(o=2,c=2),s>180&&([o,c]=[c,o]),r&&([o,c]=[c,o]);for(const d of t)if(d.formattedValue){const f=Math.min((d.offset+d.labelOffset)*o,(e.top+e.height+e.bottom-d.offset-d.labelOffset)*c),p=g=>p6(g,{width:n,height:f,angle:s,measureText:y=>ip(y,i)});a.set(d,g6(d.formattedValue.toString(),p))}return a}const Jse=["scale","tickNumber"],eoe=t=>{const{classes:e,position:n,id:r}=t,i={root:["root","directionY",n,`id-${r}`],line:["line"],tickContainer:["tickContainer"],tick:["tick"],tickLabel:["tickLabel"],label:["label"]};return vt(i,m6,e)},F3=2,toe=2,noe=Pe(y6,{name:"MuiChartsYAxis",slot:"Root"})({}),roe={disableLine:!1,disableTicks:!1,tickSize:6};function ioe(t){const{yAxisIds:e,yAxis:n}=Hl(),r=n[t.axisId??e[0]],{scale:i,tickNumber:a}=r,s=Be(r,Jse),o=wt({props:H({},s,t),name:"MuiChartsYAxis"}),c=H({},roe,o),{position:d,disableLine:f,disableTicks:p,label:g,labelStyle:y,tickLabelStyle:x,tickSize:_,valueFormatter:A,slots:E,slotProps:T,tickPlacement:C,tickLabelPlacement:D,tickInterval:k,tickLabelInterval:B,sx:O,offset:I,width:R}=c,V=Qc(),L=Ea(),P=dA(),F=eoe(c),{instance:q}=Ul(),X=Ta(),{left:W,top:G,width:Q,height:Z}=X,de=p?4:_,ge=by({scale:i,tickNumber:a,valueFormatter:A,tickPlacement:C,tickLabelPlacement:D,tickInterval:k,direction:"y"}),xe=d==="right"?1:-1,be=typeof(x==null?void 0:x.fontSize)=="number"?x.fontSize:12,ke=(E==null?void 0:E.axisLine)??"line",he=(E==null?void 0:E.axisTick)??"line",Se=(E==null?void 0:E.axisTickLabel)??p1,Ae=(E==null?void 0:E.axisLabel)??p1,Fe=x6((d==="right"?-90:90)-((x==null?void 0:x.angle)??0)),ae=w6((d==="right"?-90:90)-((x==null?void 0:x.angle)??0)),ye=St({elementType:Se,externalSlotProps:T==null?void 0:T.axisTickLabel,additionalProps:{style:H({},V.typography.caption,{fontSize:be,textAnchor:L?_6(Fe):Fe,dominantBaseline:ae},x)},className:F.tickLabel,ownerState:{}}),pe=St({elementType:Ae,externalSlotProps:T==null?void 0:T.axisLabel,additionalProps:{style:H({},V.typography.body1,{lineHeight:1,fontSize:14,angle:xe*90,textAnchor:"middle",dominantBaseline:"text-before-edge"},y)},ownerState:{}}),ie=St({elementType:ke,externalSlotProps:T==null?void 0:T.axisLine,additionalProps:{strokeLinecap:"square"},ownerState:{}}),Ve=i.domain(),we=Qa(i);if(we&&Ve.length===0||!we&&Ve.some(fA)||d==="none")return null;const ze={x:xe*R,y:G+Z/2},Me=Math.max(0,R-(g?ip(g,pe.style).height+toe:0)-de-F3),Re=P?Zse(ge,X,Me,L,ye.style):new Map(Array.from(ge).map(Ye=>[Ye,Ye.formattedValue]));return v.jsxs(noe,{transform:`translate(${d==="right"?W+Q+I:W-I}, 0)`,className:F.root,sx:O,children:[!f&&v.jsx(ke,H({y1:G,y2:G+Z,className:F.line},ie)),ge.map((Ye,Ge)=>{const{offset:Oe,labelOffset:Ne,value:dt}=Ye,_t=xe*(de+F3),yn=Ne,On=typeof B=="function"&&!(B!=null&&B(dt,Ge)),nt=q.isYInside(Oe),it=Re.get(Ye);return nt?v.jsxs("g",{transform:`translate(0, ${Oe})`,className:F.tickContainer,children:[!p&&v.jsx(he,H({x2:xe*de,className:F.tick},T==null?void 0:T.axisTick)),it!==void 0&&!On&&v.jsx(Se,H({x:_t,y:yn,text:it},ye))]},Ge):null}),g&&P&&v.jsx("g",{className:F.label,children:v.jsx(Ae,H({},ze,pe,{text:g}))})]})}function aoe(t){const{slots:e,slotProps:n}=t,{xAxisIds:r,xAxis:i}=Mo(),{yAxisIds:a,yAxis:s}=Hl();return v.jsxs(M.Fragment,{children:[r.map(o=>!i[o].position||i[o].position==="none"?null:v.jsx(Qse,{slots:e,slotProps:n,axisId:o},o)),a.map(o=>!s[o].position||s[o].position==="none"?null:v.jsx(ioe,{slots:e,slotProps:n,axisId:o},o))]})}function soe(t){return Rt("MuiChartsGrid",t)}const V3=Ot("MuiChartsGrid",["root","line","horizontalLine","verticalLine"]),ooe=Pe("g",{name:"MuiChartsGrid",slot:"Root",overridesResolver:(t,e)=>[{[`&.${V3.verticalLine}`]:e.verticalLine},{[`&.${V3.horizontalLine}`]:e.horizontalLine},e.root]})({}),A6=Pe("line",{name:"MuiChartsGrid",slot:"Line"})(({theme:t})=>({stroke:(t.vars||t).palette.divider,shapeRendering:"crispEdges",strokeWidth:1}));function loe(t){const{axis:e,start:n,end:r,classes:i}=t,{scale:a,tickNumber:s,tickInterval:o}=e,c=by({scale:a,tickNumber:s,tickInterval:o,direction:"x"});return v.jsx(M.Fragment,{children:c.map(({value:d,offset:f})=>{var p;return v.jsx(A6,{y1:n,y2:r,x1:f,x2:f,className:i.verticalLine},`vertical-${((p=d==null?void 0:d.getTime)==null?void 0:p.call(d))??d}`)})})}function coe(t){const{axis:e,start:n,end:r,classes:i}=t,{scale:a,tickNumber:s,tickInterval:o}=e,c=by({scale:a,tickNumber:s,tickInterval:o,direction:"y"});return v.jsx(M.Fragment,{children:c.map(({value:d,offset:f})=>{var p;return v.jsx(A6,{y1:f,y2:f,x1:n,x2:r,className:i.horizontalLine},`horizontal-${((p=d==null?void 0:d.getTime)==null?void 0:p.call(d))??d}`)})})}const uoe=["vertical","horizontal"],doe=({classes:t})=>vt({root:["root"],verticalLine:["line","verticalLine"],horizontalLine:["line","horizontalLine"]},soe,t);function foe(t){const e=wt({props:t,name:"MuiChartsGrid"}),n=Ta(),{vertical:r,horizontal:i}=e,a=Be(e,uoe),{xAxis:s,xAxisIds:o}=Mo(),{yAxis:c,yAxisIds:d}=Hl(),f=doe(e),p=c[d[0]],g=s[o[0]];return v.jsxs(ooe,H({},a,{className:f.root,children:[r&&v.jsx(loe,{axis:g,start:n.top,end:n.height+n.top,classes:f}),i&&v.jsx(coe,{axis:p,start:n.left,end:n.width+n.left,classes:f})]}))}function hoe(t){return Rt("MuiChartsTooltip",t)}const gd=Ot("MuiChartsTooltip",["root","paper","table","row","cell","mark","markContainer","labelCell","valueCell","axisValueCell"]),Ay=t=>vt({root:["root"],paper:["paper"],table:["table"],row:["row"],cell:["cell"],mark:["mark"],markContainer:["markContainer"],labelCell:["labelCell"],valueCell:["valueCell"],axisValueCell:["axisValueCell"]},hoe,t);function poe(){var B,O,I;const t=bn(),e=ft(t,Tk),n=ft(t,Ro),r=xy(),{xAxis:i,xAxisIds:a}=Mo(),{yAxis:s,yAxisIds:o}=Hl(),{zAxis:c,zAxisIds:d}=oA(),{rotationAxis:f,rotationAxisIds:p}=Qk(),{radiusAxis:g,radiusAxisIds:y}=Oae(),x=r.xAxisId??a[0],_=r.yAxisId??o[0],A=r.zAxisId??d[0],E=r.rotationAxisId??p[0],T=r.radiusAxisId??y[0];if(!e)return null;const C=(B=r[e.type])==null?void 0:B.series[e.seriesId];if(!C)return null;const D=((I=(O=n[C.type]).colorProcessor)==null?void 0:I.call(O,C,x&&i[x],_&&s[_],A&&c[A]))??(()=>""),k={};return x!==void 0&&(k.x=i[x]),_!==void 0&&(k.y=s[_]),E!==void 0&&(k.rotation=f[E]),T!==void 0&&(k.radius=g[T]),n[C.type].tooltipGetter({series:C,axesConfig:k,getColor:D,identifier:e})}const Bw=Pe("div",{name:"MuiChartsTooltip",slot:"Container",overridesResolver:(t,e)=>e.paper})(({theme:t})=>{var e;return{backgroundColor:(t.vars||t).palette.background.paper,color:(t.vars||t).palette.text.primary,borderRadius:(e=(t.vars||t).shape)==null?void 0:e.borderRadius,border:`solid ${(t.vars||t).palette.divider} 1px`}}),Fw=Pe("table",{name:"MuiChartsTooltip",slot:"Table"})(({theme:t})=>({borderSpacing:0,[`& .${gd.markContainer}`]:{display:"inline-block",width:`calc(20px + ${t.spacing(1.5)})`,verticalAlign:"middle"},"& caption":{borderBottom:`solid ${(t.vars||t).palette.divider} 1px`,padding:t.spacing(.5,1.5),textAlign:"start",whiteSpace:"nowrap","& span":{marginRight:t.spacing(1.5)}}})),Vw=Pe("tr",{name:"MuiChartsTooltip",slot:"Row"})(({theme:t})=>({"tr:first-of-type& td":{paddingTop:t.spacing(.5)},"tr:last-of-type& td":{paddingBottom:t.spacing(.5)}})),Ad=Pe(te,{name:"MuiChartsTooltip",slot:"Cell"})(({theme:t})=>({verticalAlign:"middle",color:(t.vars||t).palette.text.secondary,textAlign:"start",[`&.${gd.cell}`]:{paddingLeft:t.spacing(1),paddingRight:t.spacing(1)},[`&.${gd.labelCell}`]:{fontWeight:t.typography.fontWeightRegular},[`&.${gd.valueCell}, &.${gd.axisValueCell}`]:{color:(t.vars||t).palette.text.primary,fontWeight:t.typography.fontWeightMedium},[`&.${gd.valueCell}`]:{paddingLeft:t.spacing(1.5),paddingRight:t.spacing(1.5)},"td:first-of-type&, th:first-of-type&":{paddingLeft:t.spacing(1.5)},"td:last-of-type&, th:last-of-type&":{paddingRight:t.spacing(1.5)}}));function goe(t){return Rt("MuiChartsLabelMark",t)}const sd=Ot("MuiChartsLabelMark",["root","line","square","circle","mask","fill"]),moe=t=>{const{type:e}=t;return vt({root:typeof e=="function"?["root"]:["root",e],mask:["mask"],fill:["fill"]},goe,t.classes)},E6=(t,e,n)=>M.forwardRef(function(i,a){var g;const s=wt({props:i,name:t}),o=typeof e.defaultProps=="function"?e.defaultProps(s):e.defaultProps??{},c=aR(o,s),d=Qc(),f=(g=e.classesResolver)==null?void 0:g.call(e,c,d),p=M.forwardRef(n);return v.jsx(p,H({},c,{classes:f,ref:a}))}),yoe=["type","color","className","classes"],voe=Pe("div",{name:"MuiChartsLabelMark",slot:"Root"})(()=>({display:"flex",width:14,height:14,[`&.${sd.line}`]:{width:16,height:"unset",alignItems:"center",[`.${sd.mask}`]:{height:4,width:"100%",borderRadius:1,overflow:"hidden"}},[`&.${sd.square}`]:{height:13,width:13,borderRadius:2,overflow:"hidden"},[`&.${sd.circle}`]:{height:15,width:15},svg:{display:"block"},[`& .${sd.mask} > *`]:{height:"100%",width:"100%"},[`& .${sd.mask}`]:{height:"100%",width:"100%"}})),g1=E6("MuiChartsLabelMark",{defaultProps:{type:"square"},classesResolver:moe},function(e,n){const{type:r,color:i,className:a,classes:s}=e,o=Be(e,yoe),c=r;return v.jsx(voe,H({className:jt(s==null?void 0:s.root,a),ownerState:e,"aria-hidden":"true",ref:n},o,{children:v.jsx("div",{className:s==null?void 0:s.mask,children:typeof c=="function"?v.jsx(c,{className:s==null?void 0:s.fill,color:i}):v.jsx("svg",{viewBox:"0 0 24 24",preserveAspectRatio:r==="line"?"none":void 0,children:r==="circle"?v.jsx("circle",{className:s==null?void 0:s.fill,r:"12",cx:"12",cy:"12",fill:i}):v.jsx("rect",{className:s==null?void 0:s.fill,width:"24",height:"24",fill:i})})})}))});function xoe(t){const{classes:e,sx:n}=t,r=poe(),i=Ay(e);if(!r)return null;if("values"in r){const{label:d,color:f,markType:p}=r;return v.jsx(Bw,{sx:n,className:i.paper,children:v.jsxs(Fw,{className:i.table,children:[v.jsxs(te,{component:"caption",children:[v.jsx("div",{className:i.markContainer,children:v.jsx(g1,{type:p,color:f,className:i.mark})}),d]}),v.jsx("tbody",{children:r.values.map(({formattedValue:g,label:y})=>v.jsxs(Vw,{className:i.row,children:[v.jsx(Ad,{className:jt(i.labelCell,i.cell),component:"th",children:y}),v.jsx(Ad,{className:jt(i.valueCell,i.cell),component:"td",children:g})]},y))})]})})}const{color:a,label:s,formattedValue:o,markType:c}=r;return v.jsx(Bw,{sx:n,className:i.paper,children:v.jsx(Fw,{className:i.table,children:v.jsx("tbody",{children:v.jsxs(Vw,{className:i.row,children:[v.jsxs(Ad,{className:jt(i.labelCell,i.cell),component:"th",children:[v.jsx("div",{className:i.markContainer,children:v.jsx(g1,{type:c,color:a,className:i.mark})}),s]}),v.jsx(Ad,{className:jt(i.valueCell,i.cell),component:"td",children:o})]})})})})}function woe(t){const e=bn(),n=ft(e,Ro);return M.useMemo(()=>{const i={};return Object.keys(n).forEach(a=>{i[a]=n[a].colorProcessor}),i},[n])}function _oe(){const t=lA(),[e,n]=M.useState(null);return M.useEffect(()=>{const r=t.current;if(r===null)return()=>{};const i=s=>{s.pointerType!=="mouse"&&n(null)},a=s=>{n({pointerType:s.pointerType})};return r.addEventListener("pointerenter",a),r.addEventListener("pointerup",i),()=>{r.removeEventListener("pointerenter",a),r.removeEventListener("pointerup",i)}},[t]),e}function boe(t){return t instanceof Date?t.toUTCString():t.toLocaleString()}const Aoe="@media (pointer: fine)",Eoe=()=>x1(Aoe,{defaultMatches:!0}),S6=(t,e)=>e,T6=(t,e)=>e;function C6(t,e,n){return Array.isArray(n)?n.map(r=>R3(e.axis[r],t)):R3(e.axis[n],t)}const I6=We([J0,ep,Tae],(t,e,n)=>t===null||e===null?null:Cae(n)(t,e)),Soe=We([I6,uu,S6],(t,e,n=e.axisIds[0])=>t===null?null:C6(t,e,n)),D6=We([I6,uu,T6],(t,e,n=e.axisIds)=>t===null?null:C6(t,e,n));We([uu,Soe,S6],(t,e,n=t.axisIds[0])=>{var i;if(e===null||e===-1||t.axisIds.length===0)return null;const r=(i=t.axis[n])==null?void 0:i.data;return r?r[e]:null});We([uu,D6,T6],(t,e,n=t.axisIds)=>e===null?null:n.map((r,i)=>{var s;const a=e[i];return a===-1?null:(s=t.axis[r].data)==null?void 0:s[a]}));const R6=We([D6,uu],(t,e)=>t===null?[]:e.axisIds.map((n,r)=>({axisId:n,dataIndex:t[r]})).filter(({axisId:n,dataIndex:r})=>e.axis[n].triggerTooltip&&r>=0),{memoizeOptions:{resultEqualityCheck:Nd}});We([],()=>[]);const Toe=We([R6],t=>t.length>0);function v2(t,e,n){var s;const r=((s=t.data)==null?void 0:s[e])??null,a=(t.valueFormatter??(o=>t.scaleType==="utc"?boe(o):o.toLocaleString()))(r,{location:"tooltip",scale:t.scale});return{axisDirection:n,axisId:t.id,mainAxis:t,dataIndex:e,axisValue:r,axisFormattedValue:a,seriesItems:[]}}function Coe(t={}){const{multipleAxes:e,directions:n}=t,r=Dae(),i=Rae(),a=Mae(),s=bn(),o=ft(s,Rk),c=ft(s,Ok),d=ft(s,R6),f=xy(),{xAxis:p}=Mo(),{yAxis:g}=Hl(),{zAxis:y,zAxisIds:x}=oA(),{rotationAxis:_}=Qk(),A=woe();if(o.length===0&&c.length===0&&d.length===0)return null;const E=[];return(n===void 0||n.includes("x"))&&o.forEach(({axisId:T,dataIndex:C})=>{!e&&E.length>1||E.push(v2(p[T],C,"x"))}),(n===void 0||n.includes("y"))&&c.forEach(({axisId:T,dataIndex:C})=>{!e&&E.length>1||E.push(v2(g[T],C,"y"))}),(n===void 0||n.includes("rotation"))&&d.forEach(({axisId:T,dataIndex:C})=>{!e&&E.length>1||E.push(v2(_[T],C,"rotation"))}),Object.keys(f).filter(tA).forEach(T=>{const C=f[T];return C?C.seriesOrder.forEach(D=>{var R;const k=C.series[D],B=k.xAxisId??r.id,O=k.yAxisId??i.id,I=E.findIndex(({axisDirection:V,axisId:L})=>V==="x"&&L===B||V==="y"&&L===O);if(I>=0){const V="zAxisId"in k?k.zAxisId:x[0],{dataIndex:L}=E[I],P=((R=A[T])==null?void 0:R.call(A,k,p[B],g[O],V?y[V]:void 0)(L))??"",F=k.data[L]??null,q=k.valueFormatter(F,{dataIndex:L}),X=Qi(k.label,"tooltip")??null;E[I].seriesItems.push({seriesId:D,color:P,value:F,formattedValue:q,formattedLabel:X,markType:k.labelMarkType})}}):[]}),Object.keys(f).filter(sA).forEach(T=>{const C=f[T];return C?C.seriesOrder.forEach(D=>{var I;const k=C.series[D],B=k.rotationAxisId??(a==null?void 0:a.id),O=E.findIndex(({axisDirection:R,axisId:V})=>R==="rotation"&&V===B);if(O>=0){const{dataIndex:R}=E[O],V=((I=A[T])==null?void 0:I.call(A,k)(R))??"",L=k.data[R]??null,P=k.valueFormatter(L,{dataIndex:R}),F=Qi(k.label,"tooltip")??null;E[O].seriesItems.push({seriesId:D,color:V,value:L,formattedValue:P,formattedLabel:F,markType:k.labelMarkType})}}):[]}),e?E:E.length===0?E[0]:null}function Ioe(t){return Coe(H({},t,{multipleAxes:!0}))}function Doe(t){const e=Ay(t.classes),n=Ioe();return n===null?null:v.jsx(Bw,{sx:t.sx,className:e.paper,children:n.map(({axisId:r,mainAxis:i,axisValue:a,axisFormattedValue:s,seriesItems:o})=>v.jsxs(Fw,{className:e.table,children:[a!=null&&!i.hideTooltip&&v.jsx(te,{component:"caption",children:s}),v.jsx("tbody",{children:o.map(({seriesId:c,color:d,formattedValue:f,formattedLabel:p,markType:g})=>f==null?null:v.jsxs(Vw,{className:e.row,children:[v.jsxs(Ad,{className:jt(e.labelCell,e.cell),component:"th",children:[v.jsx("div",{className:e.markContainer,children:v.jsx(g1,{type:g,color:d,className:e.mark})}),p||null]}),v.jsx(Ad,{className:jt(e.valueCell,e.cell),component:"td",children:f})]},c))})]},r))})}function Roe(t){let e,n;const r=()=>{n=null,t(...e)};function i(...a){e=a,n||(n=requestAnimationFrame(r))}return i.clear=()=>{n&&(cancelAnimationFrame(n),n=null)},i}function Ooe(){const t=bn(),e=ft(t,Kk),n=ft(t,su);return e!==void 0?"polar":n!==void 0?"cartesian":"none"}const Moe=["trigger","classes","children"],Poe=()=>!1,koe=Pe(tR,{name:"MuiChartsTooltip",slot:"Root"})(({theme:t})=>({pointerEvents:"none",zIndex:t.zIndex.modal}));function Noe(t){const e=wt({props:t,name:"MuiChartsTooltipContainer"}),{trigger:n="axis",classes:r,children:i}=e,a=Be(e,Moe),s=lA(),o=Ay(r),c=_oe(),d=Eoe(),f=M.useRef(null),p=iR(()=>({x:0,y:0})),g=Ooe(),y=bn(),x=ft(y,n==="axis"?g==="polar"&&Toe||g==="cartesian"&&tie||Poe:Qre);M.useEffect(()=>{const C=s.current;if(C===null)return()=>{};const D=Roe(()=>{var B;return(B=f.current)==null?void 0:B.update()}),k=B=>{p.current={x:B.clientX,y:B.clientY},D()};return C.addEventListener("pointerdown",k),C.addEventListener("pointermove",k),()=>{C.removeEventListener("pointerdown",k),C.removeEventListener("pointermove",k),D.clear()}},[s,p]);const _=M.useMemo(()=>({getBoundingClientRect:()=>({x:p.current.x,y:p.current.y,top:p.current.y,left:p.current.x,right:p.current.x,bottom:p.current.y,width:0,height:0,toJSON:()=>""})}),[p]),A=(c==null?void 0:c.pointerType)==="mouse"||d,E=(c==null?void 0:c.pointerType)==="touch"||!d,T=M.useMemo(()=>[{name:"offset",options:{offset:()=>E?[0,64]:[0,8]}},...A?[]:[{name:"flip",options:{fallbackPlacements:["top-end","top-start","bottom-end","bottom"]}}]],[A,E]);return n==="none"?null:v.jsx(HN,{children:x&&v.jsx(koe,H({className:o==null?void 0:o.root,open:x,placement:A?"right-start":"top",popperRef:f,anchorEl:_,modifiers:T},a,{children:i}))})}function O6(t){const{classes:e,trigger:n="axis"}=t,r=Ay(e);return v.jsx(Noe,H({},t,{classes:e,children:n==="axis"?v.jsx(Doe,{classes:r}):v.jsx(xoe,{classes:r})}))}function Loe(t){return Rt("MuiChartsLabel",t)}Ot("MuiChartsLabel",["root"]);const Boe=t=>vt({root:["root"]},Loe,t.classes),Foe=["children","className","classes"],Voe=E6("MuiChartsLabel",{classesResolver:Boe},function(e,n){const{children:r,className:i,classes:a}=e,s=Be(e,Foe);return v.jsx("span",H({className:jt(a==null?void 0:a.root,i),ref:n},s,{children:r}))}),joe=t=>({type:"series",color:t.color,label:t.label,seriesId:t.seriesId,itemId:t.itemId});function Uoe(t){return Rt("MuiChartsLegend",t)}const Hoe=t=>{const{classes:e,direction:n}=t;return vt({root:["root",n],item:["item"],mark:["mark"],label:["label"],series:["series"]},Uoe,e)},j3=Ot("MuiChartsLegend",["root","item","series","mark","label","vertical","horizontal"]),zoe=["slots","slotProps"],$oe=["ownerState"],Goe=(t,e,n,r)=>{function i(a,s){var k;const o=wt({props:a,name:t}),c=typeof n.defaultProps=="function"?n.defaultProps(o):n.defaultProps??{},d=aR(c,o),f=d,{slots:p,slotProps:g}=f,y=Be(f,zoe),x=Qc(),_=(k=n.classesResolver)==null?void 0:k.call(n,d,x),A=(p==null?void 0:p[e])??r,E=n.propagateSlots&&!(p!=null&&p[e]),T=St({elementType:A,externalSlotProps:g==null?void 0:g[e],additionalProps:H({},y,{classes:_},E&&{slots:p,slotProps:g}),ownerState:{}}),C=Be(T,$oe),D=H({},C);for(const B of n.omitProps??[])delete D[B];return v.jsx(A,H({},D,{ref:s}))}return M.forwardRef(i)},Woe=["direction","onItemClick","className","classes"],Yoe=Pe("ul",{name:"MuiChartsLegend",slot:"Root"})(({ownerState:t,theme:e})=>H({},e.typography.caption,{color:(e.vars||e).palette.text.primary,lineHeight:"100%",display:"flex",flexDirection:t.direction==="vertical"?"column":"row",alignItems:t.direction==="vertical"?void 0:"center",flexShrink:0,gap:e.spacing(2),listStyleType:"none",paddingInlineStart:0,marginBlock:e.spacing(1),marginInline:e.spacing(1),flexWrap:"wrap",li:{display:t.direction==="horizontal"?"inline-flex":void 0},[`button.${j3.series}`]:{background:"none",border:"none",padding:0,fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",letterSpacing:"inherit",color:"inherit"},[`& .${j3.series}`]:{display:t.direction==="vertical"?"flex":"inline-flex",alignItems:"center",gap:e.spacing(1)}})),M6=Goe("MuiChartsLegend","legend",{defaultProps:{direction:"horizontal"},omitProps:["position"],classesResolver:Hoe},M.forwardRef(function(e,n){const r=Xae(),{onItemClick:i,className:a,classes:s}=e,o=Be(e,Woe);if(r.items.length===0)return null;const c=i?"button":"div";return v.jsx(Yoe,H({className:jt(s==null?void 0:s.root,a),ref:n},o,{ownerState:e,children:r.items.map((d,f)=>v.jsx("li",{className:s==null?void 0:s.item,"data-series":d.id,children:v.jsxs(c,{className:s==null?void 0:s.series,role:i?"button":void 0,type:i?"button":void 0,onClick:i?p=>i(p,joe(d),f):void 0,children:[v.jsx(g1,{className:s==null?void 0:s.mark,color:d.color,type:d.markType}),v.jsx(Voe,{className:s==null?void 0:s.label,children:d.label})]})},d.id))}))}));function qoe(t){return Rt("MuiChartsAxisHighlight",t)}Ot("MuiChartsAxisHighlight",["root"]);const m1=Pe("path",{name:"MuiChartsAxisHighlight",slot:"Root"})(({theme:t})=>({pointerEvents:"none",variants:[{props:{axisHighlight:"band"},style:H({fill:"white",fillOpacity:.1},t.applyStyles("light",{fill:"gray"}))},{props:{axisHighlight:"line"},style:H({strokeDasharray:"5 2",stroke:"#ffffff"},t.applyStyles("light",{stroke:"#000000"}))}]}));function Xoe(t){const{type:e,classes:n}=t,{left:r,width:i}=Ta(),a=bn(),s=ft(a,sie),o=ft(a,Ji);return s.length===0?null:s.map(({axisId:c,value:d})=>{const p=o.axis[c].scale,g=u1(p),y=e==="band"&&d!==null&&Qa(p);return v.jsxs(M.Fragment,{children:[y&&p(d)!==void 0&&v.jsx(m1,{d:`M ${r} ${p(d)-(p.step()-p.bandwidth())/2} l 0 ${p.step()} l ${i} 0 l 0 ${-p.step()} Z`,className:n.root,ownerState:{axisHighlight:"band"}}),e==="line"&&d!==null&&v.jsx(m1,{d:`M ${r} ${g(d)} L ${r+i} ${g(d)}`,className:n.root,ownerState:{axisHighlight:"line"}})]},`${c}-${d}`)})}function Koe(t){const{type:e,classes:n}=t,{top:r,height:i}=Ta(),a=bn(),s=ft(a,aie),o=ft(a,Zi);return s.length===0?null:s.map(({axisId:c,value:d})=>{const p=o.axis[c].scale,g=u1(p),y=e==="band"&&d!==null&&Qa(p);return v.jsxs(M.Fragment,{children:[y&&p(d)!==void 0&&v.jsx(m1,{d:`M ${p(d)-(p.step()-p.bandwidth())/2} ${r} l ${p.step()} 0 l 0 ${i} l ${-p.step()} 0 Z`,className:n.root,ownerState:{axisHighlight:"band"}}),e==="line"&&d!==null&&v.jsx(m1,{d:`M ${g(d)} ${r} L ${g(d)} ${r+i}`,className:n.root,ownerState:{axisHighlight:"line"}})]},`${c}-${d}`)})}const Qoe=()=>vt({root:["root"]},qoe);function Zoe(t){const{x:e,y:n}=t,r=Qoe();return v.jsxs(M.Fragment,{children:[e&&v.jsx(Koe,{type:e,classes:r}),n&&v.jsx(Xoe,{type:n,classes:r})]})}function Joe(t){return Rt("MuiBarElement",t)}const ele=Ot("MuiBarElement",["root","highlighted","faded","series"]),tle=t=>{const{classes:e,id:n,isHighlighted:r,isFaded:i}=t,a={root:["root",`series-${n}`,r&&"highlighted",i&&"faded"]};return vt(a,Joe,e)};function nle(t){"hasPointerCapture"in t.currentTarget&&t.currentTarget.hasPointerCapture(t.pointerId)&&t.currentTarget.releasePointerCapture(t.pointerId)}const P6=(t,e)=>{const{instance:n}=Ul(),r=M.useRef(!1),i=M.useCallback(()=>{r.current=!0,n.setItemInteraction({type:t.type,seriesId:t.seriesId,dataIndex:t.dataIndex}),n.setHighlight({seriesId:t.seriesId,dataIndex:t.dataIndex})},[n,t.type,t.seriesId,t.dataIndex]),a=M.useCallback(()=>{r.current=!1,n.removeItemInteraction({type:t.type,seriesId:t.seriesId,dataIndex:t.dataIndex}),n.clearHighlight()},[n,t.type,t.seriesId,t.dataIndex]);return M.useEffect(()=>()=>{r.current&&a()},[a]),{onPointerEnter:i,onPointerLeave:a,onPointerDown:nle}},rle=["ownerState","skipAnimation","id","dataIndex","xOrigin","yOrigin"];function ile(t){const{ownerState:e}=t,n=Be(t,rle),r=use(t);return v.jsx("rect",H({},n,{filter:e.isHighlighted?"brightness(120%)":void 0,opacity:e.isFaded?.3:1,"data-highlighted":e.isHighlighted||void 0,"data-faded":e.isFaded||void 0},r))}const ale=["id","dataIndex","classes","color","slots","slotProps","style","onClick","skipAnimation","layout","x","xOrigin","y","yOrigin","width","height"];function sle(t){const{id:e,dataIndex:n,classes:r,color:i,slots:a,slotProps:s,style:o,onClick:c,skipAnimation:d,layout:f,x:p,xOrigin:g,y,yOrigin:x,width:_,height:A}=t,E=Be(t,ale),T=P6({type:"bar",seriesId:e,dataIndex:n}),{isFaded:C,isHighlighted:D}=n6({seriesId:e,dataIndex:n}),k={id:e,dataIndex:n,classes:r,color:i,isFaded:C,isHighlighted:D},B=tle(k),O=(a==null?void 0:a.bar)??ile,I=St({elementType:O,externalSlotProps:s==null?void 0:s.bar,externalForwardedProps:E,additionalProps:H({},T,{id:e,dataIndex:n,color:i,x:p,xOrigin:g,y,yOrigin:x,width:_,height:A,style:o,onClick:c,cursor:c?"pointer":"unset",stroke:"none",fill:i,skipAnimation:d,layout:f}),className:B.root,ownerState:k});return v.jsx(O,H({},I))}function ole(t,e){const n=Qt(t.x,e.x),r=Qt(t.y,e.y),i=Qt(t.width,e.width),a=Qt(t.height,e.height),s=Qt(t.borderRadius,e.borderRadius);return o=>({x:n(o),y:r(o),width:i(o),height:a(o),borderRadius:s(o)})}function lle(t){const e={x:t.layout==="vertical"?t.x:t.xOrigin,y:t.layout==="vertical"?t.yOrigin:t.y,width:t.layout==="vertical"?t.width:0,height:t.layout==="vertical"?0:t.height,borderRadius:t.borderRadius};return rp({x:t.x,y:t.y,width:t.width,height:t.height,borderRadius:t.borderRadius},{createInterpolator:ole,transformProps:n=>({d:ule(t.hasNegative,t.hasPositive,t.layout,n.x,n.y,n.width,n.height,t.xOrigin,t.yOrigin,n.borderRadius)}),applyProps(n,{d:r}){r&&n.setAttribute("d",r)},initialProps:e,skip:t.skipAnimation,ref:t.ref})}function cle(t){const{maskId:e,x:n,y:r,width:i,height:a,skipAnimation:s}=t,{ref:o,d:c}=lle({layout:t.layout??"vertical",hasNegative:t.hasNegative,hasPositive:t.hasPositive,xOrigin:t.xOrigin,yOrigin:t.yOrigin,x:n,y:r,width:i,height:a,borderRadius:t.borderRadius??0,skipAnimation:s});return!t.borderRadius||t.borderRadius<=0?null:v.jsx("clipPath",{id:e,children:v.jsx("path",{ref:o,d:c})})}function ule(t,e,n,r,i,a,s,o,c,d){if(n==="vertical"){if(e&&t){const p=Math.min(d,a/2,s/2);return`M${r},${i+s/2} v${-(s/2-p)} a${p},${p} 0 0 1 ${p},${-p} h${a-p*2} a${p},${p} 0 0 1 ${p},${p} v${s-2*p} a${p},${p} 0 0 1 ${-p},${p} h${-(a-p*2)} a${p},${p} 0 0 1 ${-p},${-p} v${-(s/2-p)}`}const f=Math.min(d,a/2);if(e)return`M${r},${Math.max(c,i+f)} v${Math.min(0,-(c-i-f))} a${f},${f} 0 0 1 ${f},${-f} h${a-f*2} a${f},${f} 0 0 1 ${f},${f} v${Math.max(0,c-i-f)} Z`;if(t)return`M${r},${Math.min(c,i+s-f)} v${Math.max(0,s-f)} a${f},${f} 0 0 0 ${f},${f} h${a-f*2} a${f},${f} 0 0 0 ${f},${-f} v${-Math.max(0,s-f)} Z`}if(n==="horizontal"){if(e&&t){const p=Math.min(d,a/2,s/2);return`M${r+a/2},${i} h${a/2-p} a${p},${p} 0 0 1 ${p},${p} v${s-p*2} a${p},${p} 0 0 1 ${-p},${p} h${-(a-2*p)} a${p},${p} 0 0 1 ${-p},${-p} v${-(s-p*2)} a${p},${p} 0 0 1 ${p},${-p} h${a/2-p}`}const f=Math.min(d,s/2);if(e)return`M${Math.min(o,r-f)},${i} h${a} a${f},${f} 0 0 1 ${f},${f} v${s-f*2} a${f},${f} 0 0 1 ${-f},${f} h${-a} Z`;if(t)return`M${Math.max(o,r+a+f)},${i} h${-a} a${f},${f} 0 0 0 ${-f},${f} v${s-f*2} a${f},${f} 0 0 0 ${f},${f} h${a} Z`}}function dle(t){return Rt("MuiBarLabel",t)}const x2=Ot("MuiBarLabel",["root","highlighted","faded","animate"]),fle=t=>{const{classes:e,seriesId:n,isFaded:r,isHighlighted:i,skipAnimation:a}=t,s={root:["root",`series-${n}`,i&&"highlighted",r&&"faded",!a&&"animate"]};return vt(s,dle,e)},hle=t=>{const{barLabel:e,value:n,dataIndex:r,seriesId:i,height:a,width:s}=t;return e==="value"?n?n==null?void 0:n.toString():null:e({seriesId:i,dataIndex:r,value:n},{bar:{height:a,width:s}})},ple=["seriesId","dataIndex","color","isFaded","isHighlighted","classes","skipAnimation","layout","xOrigin","yOrigin"],gle=Pe("text",{name:"MuiBarLabel",slot:"Root",overridesResolver:(t,e)=>[{[`&.${x2.faded}`]:e.faded},{[`&.${x2.highlighted}`]:e.highlighted},e.root]})(({theme:t})=>{var e,n,r,i;return H({},(e=t==null?void 0:t.typography)==null?void 0:e.body2,{stroke:"none",fill:(i=(r=(n=t.vars||t)==null?void 0:n.palette)==null?void 0:r.text)==null?void 0:i.primary,transition:"opacity 0.2s ease-in, fill 0.2s ease-in",textAnchor:"middle",dominantBaseline:"central",pointerEvents:"none",opacity:1,[`&.${x2.faded}`]:{opacity:.3}})});function mle(t){const e=wt({props:t,name:"MuiBarLabel"}),n=Be(e,ple),r=fse(e);return v.jsx(gle,H({},n,r))}const yle=["seriesId","classes","color","dataIndex","barLabel","slots","slotProps","xOrigin","yOrigin","x","y","width","height","value","skipAnimation","layout"],vle=["ownerState"];function xle(t){const{seriesId:e,classes:n,color:r,dataIndex:i,barLabel:a,slots:s,slotProps:o,xOrigin:c,yOrigin:d,x:f,y:p,width:g,height:y,value:x,skipAnimation:_,layout:A}=t,E=Be(t,yle),{isFaded:T,isHighlighted:C}=n6({seriesId:e,dataIndex:i}),D={seriesId:e,classes:n,color:r,isFaded:T,isHighlighted:C,dataIndex:i,skipAnimation:_,layout:A},k=fle(D),B=(s==null?void 0:s.barLabel)??mle,O=St({elementType:B,externalSlotProps:o==null?void 0:o.barLabel,additionalProps:H({},E,{xOrigin:c,yOrigin:d,x:f,y:p,width:g,height:y,className:k.root}),ownerState:D}),{ownerState:I}=O,R=Be(O,vle);if(!a)return null;const V=hle({barLabel:a,value:x,dataIndex:i,seriesId:e,height:y,width:g});return V?v.jsx(B,H({},R,I,{children:V})):null}function wle(t){return Rt("MuiBar",t)}Ot("MuiBar",["root","series","seriesLabels"]);const k6=t=>vt({root:["root"],series:["series"],seriesLabels:["seriesLabels"]},wle,t),_le=["bars","skipAnimation"];function ble(t){const{bars:e,skipAnimation:n}=t,r=Be(t,_le),i=k6();return v.jsx(M.Fragment,{children:e.flatMap(({seriesId:a,data:s})=>v.jsx("g",{className:i.seriesLabels,"data-series":a,children:s.map(({xOrigin:o,yOrigin:c,x:d,y:f,dataIndex:p,color:g,value:y,width:x,height:_,layout:A})=>v.jsx(xle,H({seriesId:a,dataIndex:p,value:y,color:g,xOrigin:o,yOrigin:c,x:d,y:f,width:x,height:_,skipAnimation:n??!1,layout:A??"vertical"},r),p))},a))})}function N6(t){const e=bn(),n=ft(e,hee);return t||n}function Ale(){const t=bn();return ft(t,Ak)}const w2=(t,e)=>{const n=`${t}-axis`,r=`${t}Axis`;return e===(t==="x"?Tb:Cb)?`The first \`${r}\``:`The ${n} with id "${e}"`};function Ele(t,e,n,r,i,a,s){const o=i[r],c=s[a],d=t?o:c,f=t?c:o,p=t?r:a,g=t?a:r,y=t?"x":"y",x=t?"y":"x";if(!a1(d))throw new Error(`MUI X Charts: ${w2(y,p)} should be of type "band" to display the bar series of id "${e}".`);if(d.data===void 0)throw new Error(`MUI X Charts: ${w2(y,p)} should have data property.`);if(a1(f)||eA(f))throw new Error(`MUI X Charts: ${w2(x,g)} should be a continuous type to display the bar series of id "${e}".`)}function Sle(t,e,n){const r=Bae()??{series:{},stackingGroups:[]},i=Mo().xAxisIds[0],a=Hl().yAxisIds[0],s=aA(),{series:o,stackingGroups:c}=r,d={};return{completedData:c.flatMap(({ids:p},g)=>{const y=t.left,x=t.left+t.width,_=t.top,A=t.top+t.height;return p.map(E=>{const T=o[E].xAxisId??i,C=o[E].yAxisId??a,D=e[T],k=n[C],B=o[E].layout==="vertical";Ele(B,E,o[E],T,e,C,n);const O=B?D:k,I=D.scale,R=k.scale,V=Yk(o[E],e[T],n[C]),L=O.scale.bandwidth(),{barWidth:P,offset:F}=Tle({bandWidth:L,numberOfGroups:c.length,gapRatio:O.barGapRatio}),q=g*(P+F),{stackedData:X,data:W,layout:G,minBarSize:Q}=o[E],Z=O.data.map((de,ge)=>{if(W[ge]==null)return null;const be=X[ge].map(pe=>B?R(pe):I(pe)),ke=Math.round(Math.min(...be)),he=Math.round(Math.max(...be)),Se=o[E].stack,{barSize:Ae,startCoordinate:Fe}=Cle(B,ke,he,W[ge],Q),ae={seriesId:E,dataIndex:ge,layout:G,x:B?I(de)+q:Fe,y:B?Fe:R(de)+q,xOrigin:I(0)??0,yOrigin:R(0)??0,height:B?Ae:P,width:B?P:Ae,color:V(ge),value:W[ge],maskId:`${s}_${Se||E}_${g}_${ge}`};if(ae.x>x||ae.x+ae.width<y||ae.y>A||ae.y+ae.height<_)return null;d[ae.maskId]||(d[ae.maskId]={id:ae.maskId,width:0,height:0,hasNegative:!1,hasPositive:!1,layout:ae.layout,xOrigin:I(0),yOrigin:R(0),x:0,y:0});const ye=d[ae.maskId];return ye.width=ae.layout==="vertical"?ae.width:ye.width+ae.width,ye.height=ae.layout==="vertical"?ye.height+ae.height:ae.height,ye.x=Math.min(ye.x===0?1/0:ye.x,ae.x),ye.y=Math.min(ye.y===0?1/0:ye.y,ae.y),ye.hasNegative=ye.hasNegative||(ae.value??0)<0,ye.hasPositive=ye.hasPositive||(ae.value??0)>0,ae}).filter(de=>de!==null);return{seriesId:E,data:Z}})}),masksData:Object.values(d)}}function Tle({bandWidth:t,numberOfGroups:e,gapRatio:n}){if(n===0)return{barWidth:t/e,offset:0};const r=t/(e+(e-1)*n),i=n*r;return{barWidth:r,offset:i}}function Cle(t,e,n,r,i){if(r===0||r==null)return{barSize:0,startCoordinate:e};const a=n-e<i,s=a?i:n-e,o=t&&r>=0,c=!t&&r<0;return a&&(o||c)?{barSize:s,startCoordinate:n-s}:{barSize:s,startCoordinate:e}}const Ile=["skipAnimation","onItemClick","borderRadius","barLabel"],Dle=Pe("g",{name:"MuiBarPlot",slot:"Root"})({[`& .${ele.root}`]:{transition:"opacity 0.2s ease-in, fill 0.2s ease-in"}});function Rle(t){const{skipAnimation:e,onItemClick:n,borderRadius:r,barLabel:i}=t,a=Be(t,Ile),s=Ale(),o=N6(s||e),{xAxis:c}=Mo(),{yAxis:d}=Hl(),{completedData:f,masksData:p}=Sle(Ta(),c,d),g=!r||r<=0,y=k6();return v.jsxs(Dle,{className:y.root,children:[!g&&p.map(({id:x,x:_,y:A,xOrigin:E,yOrigin:T,width:C,height:D,hasPositive:k,hasNegative:B,layout:O})=>v.jsx(cle,{maskId:x,borderRadius:r,hasNegative:B,hasPositive:k,layout:O,x:_,y:A,xOrigin:E,yOrigin:T,width:C,height:D,skipAnimation:o??!1},x)),f.map(({seriesId:x,data:_})=>v.jsx("g",{"data-series":x,className:y.series,children:_.map(({dataIndex:A,color:E,maskId:T,layout:C,x:D,xOrigin:k,y:B,yOrigin:O,width:I,height:R})=>{const V=v.jsx(sle,H({id:x,dataIndex:A,color:E,skipAnimation:o??!1,layout:C??"vertical",x:D,xOrigin:k,y:B,yOrigin:O,width:I,height:R},a,{onClick:n&&(L=>{n(L,{type:"bar",seriesId:x,dataIndex:A})})}),A);return g?V:v.jsx("g",{clipPath:`url(#${T})`,children:V},A)})},x)),i&&v.jsx(ble,H({bars:f,skipAnimation:o,barLabel:i},a))]})}const Ole=["message"],Mle=Pe("text")(({theme:t})=>H({},t.typography.body2,{stroke:"none",fill:(t.vars||t).palette.text.primary,shapeRendering:"crispEdges",textAnchor:"middle",dominantBaseline:"middle"}));function Ple(t){const{message:e}=t,n=Be(t,Ole),{top:r,left:i,height:a,width:s}=Ta(),{localeText:o}=l6();return v.jsx(Mle,H({x:i+s/2,y:r+a/2},n,{children:e??o.loading}))}const kle=["message"],Nle=Pe("text")(({theme:t})=>H({},t.typography.body2,{stroke:"none",fill:(t.vars||t).palette.text.primary,shapeRendering:"crispEdges",textAnchor:"middle",dominantBaseline:"middle"}));function Lle(t){const{message:e}=t,n=Be(t,kle),{top:r,left:i,height:a,width:s}=Ta(),{localeText:o}=l6();return v.jsx(Nle,H({x:i+s/2,y:r+a/2},n,{children:e??o.noData}))}function Ble(){const t=xy();return Object.values(t).every(e=>{if(!e)return!0;const{series:n,seriesOrder:r}=e;return r.every(i=>n[i].data.length===0)})}function L6(t){var n,r,i,a;const e=Ble();if(t.loading){const s=((n=t.slots)==null?void 0:n.loadingOverlay)??Ple;return v.jsx(s,H({},(r=t.slotProps)==null?void 0:r.loadingOverlay))}if(e){const s=((i=t.slots)==null?void 0:i.noDataOverlay)??Lle;return v.jsx(s,H({},(a=t.slotProps)==null?void 0:a.noDataOverlay))}return null}const Fle=[tp,mf,gf,cu],Vle=["xAxis","yAxis","series","width","height","margin","colors","dataset","sx","axisHighlight","grid","children","slots","slotProps","skipAnimation","loading","layout","onItemClick","highlightedItem","onHighlightChange","borderRadius","barLabel","className","hideLegend","showToolbar"],jle=t=>{var ae,ye,pe,ie,Ve;const{xAxis:e,yAxis:n,series:r,width:i,height:a,margin:s,colors:o,dataset:c,sx:d,axisHighlight:f,grid:p,children:g,slots:y,slotProps:x,skipAnimation:_,loading:A,layout:E,onItemClick:T,highlightedItem:C,onHighlightChange:D,borderRadius:k,barLabel:B,className:O}=t,I=Be(t,Vle),V=`${I0()}-clip-path`,L=E==="horizontal"||E===void 0&&r.some(we=>we.layout==="horizontal"),P=M.useMemo(()=>[{id:Tb,scaleType:"band",data:Array.from({length:Math.max(...r.map(we=>(we.data??c??[]).length))},(we,ze)=>ze)}],[c,r]),F=M.useMemo(()=>[{id:Cb,scaleType:"band",data:Array.from({length:Math.max(...r.map(we=>(we.data??c??[]).length))},(we,ze)=>ze)}],[c,r]),q=M.useMemo(()=>r.map(we=>H({type:"bar"},we,{layout:L?"horizontal":"vertical"})),[L,r]),X=L?void 0:P,W=M.useMemo(()=>e?L?e:e.map(we=>H({scaleType:"band"},we)):X,[X,L,e]),G=L?F:void 0,Q=M.useMemo(()=>n?L?n.map(we=>H({scaleType:"band"},we)):n:G,[G,L,n]),Z=H({},I,{series:q,width:i,height:a,margin:s,colors:o,dataset:c,xAxis:W,yAxis:Q,highlightedItem:C,onHighlightChange:D,disableAxisListener:((ae=x==null?void 0:x.tooltip)==null?void 0:ae.trigger)!=="axis"&&(f==null?void 0:f.x)==="none"&&(f==null?void 0:f.y)==="none",className:O,skipAnimation:_,plugins:Fle}),de={onItemClick:T,slots:y,slotProps:x,borderRadius:k,barLabel:B},ge={vertical:p==null?void 0:p.vertical,horizontal:p==null?void 0:p.horizontal},xe={clipPath:`url(#${V})`},be={id:V},ke={slots:y,slotProps:x,loading:A},he={slots:y,slotProps:x},Se=H({},L?{y:"band"}:{x:"band"},f),Ae={slots:y,slotProps:x};return{chartsWrapperProps:{sx:d,legendPosition:(pe=(ye=t.slotProps)==null?void 0:ye.legend)==null?void 0:pe.position,legendDirection:(Ve=(ie=t.slotProps)==null?void 0:ie.legend)==null?void 0:Ve.direction},chartContainerProps:Z,barPlotProps:de,gridProps:ge,clipPathProps:be,clipPathGroupProps:xe,overlayProps:ke,chartsAxisProps:he,axisHighlightProps:Se,legendProps:Ae,children:g}},Ule={baseButton:Ke,baseIconButton:jr},Hle={},zle=H({},Ule,Hle),$le=M.createContext(null);function Gle(t){const{slots:e,slotProps:n={},defaultSlots:r,children:i}=t,a=M.useMemo(()=>({slots:H({},r,e),slotProps:n}),[r,e,n]);return v.jsx($le.Provider,{value:a,children:i})}const go=11102230246251565e-32,oi=134217729,Wle=(3+8*go)*go;function _2(t,e,n,r,i){let a,s,o,c,d=e[0],f=r[0],p=0,g=0;f>d==f>-d?(a=d,d=e[++p]):(a=f,f=r[++g]);let y=0;if(p<t&&g<n)for(f>d==f>-d?(s=d+a,o=a-(s-d),d=e[++p]):(s=f+a,o=a-(s-f),f=r[++g]),a=s,o!==0&&(i[y++]=o);p<t&&g<n;)f>d==f>-d?(s=a+d,c=s-a,o=a-(s-c)+(d-c),d=e[++p]):(s=a+f,c=s-a,o=a-(s-c)+(f-c),f=r[++g]),a=s,o!==0&&(i[y++]=o);for(;p<t;)s=a+d,c=s-a,o=a-(s-c)+(d-c),d=e[++p],a=s,o!==0&&(i[y++]=o);for(;g<n;)s=a+f,c=s-a,o=a-(s-c)+(f-c),f=r[++g],a=s,o!==0&&(i[y++]=o);return(a!==0||y===0)&&(i[y++]=a),y}function Yle(t,e){let n=e[0];for(let r=1;r<t;r++)n+=e[r];return n}function ap(t){return new Float64Array(t)}const qle=(3+16*go)*go,Xle=(2+12*go)*go,Kle=(9+64*go)*go*go,od=ap(4),U3=ap(8),H3=ap(12),z3=ap(16),Ai=ap(4);function Qle(t,e,n,r,i,a,s){let o,c,d,f,p,g,y,x,_,A,E,T,C,D,k,B,O,I;const R=t-i,V=n-i,L=e-a,P=r-a;D=R*P,g=oi*R,y=g-(g-R),x=R-y,g=oi*P,_=g-(g-P),A=P-_,k=x*A-(D-y*_-x*_-y*A),B=L*V,g=oi*L,y=g-(g-L),x=L-y,g=oi*V,_=g-(g-V),A=V-_,O=x*A-(B-y*_-x*_-y*A),E=k-O,p=k-E,od[0]=k-(E+p)+(p-O),T=D+E,p=T-D,C=D-(T-p)+(E-p),E=C-B,p=C-E,od[1]=C-(E+p)+(p-B),I=T+E,p=I-T,od[2]=T-(I-p)+(E-p),od[3]=I;let F=Yle(4,od),q=Xle*s;if(F>=q||-F>=q||(p=t-R,o=t-(R+p)+(p-i),p=n-V,d=n-(V+p)+(p-i),p=e-L,c=e-(L+p)+(p-a),p=r-P,f=r-(P+p)+(p-a),o===0&&c===0&&d===0&&f===0)||(q=Kle*s+Wle*Math.abs(F),F+=R*f+P*o-(L*d+V*c),F>=q||-F>=q))return F;D=o*P,g=oi*o,y=g-(g-o),x=o-y,g=oi*P,_=g-(g-P),A=P-_,k=x*A-(D-y*_-x*_-y*A),B=c*V,g=oi*c,y=g-(g-c),x=c-y,g=oi*V,_=g-(g-V),A=V-_,O=x*A-(B-y*_-x*_-y*A),E=k-O,p=k-E,Ai[0]=k-(E+p)+(p-O),T=D+E,p=T-D,C=D-(T-p)+(E-p),E=C-B,p=C-E,Ai[1]=C-(E+p)+(p-B),I=T+E,p=I-T,Ai[2]=T-(I-p)+(E-p),Ai[3]=I;const X=_2(4,od,4,Ai,U3);D=R*f,g=oi*R,y=g-(g-R),x=R-y,g=oi*f,_=g-(g-f),A=f-_,k=x*A-(D-y*_-x*_-y*A),B=L*d,g=oi*L,y=g-(g-L),x=L-y,g=oi*d,_=g-(g-d),A=d-_,O=x*A-(B-y*_-x*_-y*A),E=k-O,p=k-E,Ai[0]=k-(E+p)+(p-O),T=D+E,p=T-D,C=D-(T-p)+(E-p),E=C-B,p=C-E,Ai[1]=C-(E+p)+(p-B),I=T+E,p=I-T,Ai[2]=T-(I-p)+(E-p),Ai[3]=I;const W=_2(X,U3,4,Ai,H3);D=o*f,g=oi*o,y=g-(g-o),x=o-y,g=oi*f,_=g-(g-f),A=f-_,k=x*A-(D-y*_-x*_-y*A),B=c*d,g=oi*c,y=g-(g-c),x=c-y,g=oi*d,_=g-(g-d),A=d-_,O=x*A-(B-y*_-x*_-y*A),E=k-O,p=k-E,Ai[0]=k-(E+p)+(p-O),T=D+E,p=T-D,C=D-(T-p)+(E-p),E=C-B,p=C-E,Ai[1]=C-(E+p)+(p-B),I=T+E,p=I-T,Ai[2]=T-(I-p)+(E-p),Ai[3]=I;const G=_2(W,H3,4,Ai,z3);return z3[G-1]}function Jg(t,e,n,r,i,a){const s=(e-a)*(n-i),o=(t-i)*(r-a),c=s-o,d=Math.abs(s+o);return Math.abs(c)>=qle*d?c:-Qle(t,e,n,r,i,a,d)}const $3=Math.pow(2,-52),em=new Uint32Array(512);class y1{static from(e,n=nce,r=rce){const i=e.length,a=new Float64Array(i*2);for(let s=0;s<i;s++){const o=e[s];a[2*s]=n(o),a[2*s+1]=r(o)}return new y1(a)}constructor(e){const n=e.length>>1;if(n>0&&typeof e[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=e;const r=Math.max(2*n-5,0);this._triangles=new Uint32Array(r*3),this._halfedges=new Int32Array(r*3),this._hashSize=Math.ceil(Math.sqrt(n)),this._hullPrev=new Uint32Array(n),this._hullNext=new Uint32Array(n),this._hullTri=new Uint32Array(n),this._hullHash=new Int32Array(this._hashSize),this._ids=new Uint32Array(n),this._dists=new Float64Array(n),this.update()}update(){const{coords:e,_hullPrev:n,_hullNext:r,_hullTri:i,_hullHash:a}=this,s=e.length>>1;let o=1/0,c=1/0,d=-1/0,f=-1/0;for(let R=0;R<s;R++){const V=e[2*R],L=e[2*R+1];V<o&&(o=V),L<c&&(c=L),V>d&&(d=V),L>f&&(f=L),this._ids[R]=R}const p=(o+d)/2,g=(c+f)/2;let y,x,_;for(let R=0,V=1/0;R<s;R++){const L=b2(p,g,e[2*R],e[2*R+1]);L<V&&(y=R,V=L)}const A=e[2*y],E=e[2*y+1];for(let R=0,V=1/0;R<s;R++){if(R===y)continue;const L=b2(A,E,e[2*R],e[2*R+1]);L<V&&L>0&&(x=R,V=L)}let T=e[2*x],C=e[2*x+1],D=1/0;for(let R=0;R<s;R++){if(R===y||R===x)continue;const V=ece(A,E,T,C,e[2*R],e[2*R+1]);V<D&&(_=R,D=V)}let k=e[2*_],B=e[2*_+1];if(D===1/0){for(let L=0;L<s;L++)this._dists[L]=e[2*L]-e[0]||e[2*L+1]-e[1];Ed(this._ids,this._dists,0,s-1);const R=new Uint32Array(s);let V=0;for(let L=0,P=-1/0;L<s;L++){const F=this._ids[L],q=this._dists[F];q>P&&(R[V++]=F,P=q)}this.hull=R.subarray(0,V),this.triangles=new Uint32Array(0),this.halfedges=new Uint32Array(0);return}if(Jg(A,E,T,C,k,B)<0){const R=x,V=T,L=C;x=_,T=k,C=B,_=R,k=V,B=L}const O=tce(A,E,T,C,k,B);this._cx=O.x,this._cy=O.y;for(let R=0;R<s;R++)this._dists[R]=b2(e[2*R],e[2*R+1],O.x,O.y);Ed(this._ids,this._dists,0,s-1),this._hullStart=y;let I=3;r[y]=n[_]=x,r[x]=n[y]=_,r[_]=n[x]=y,i[y]=0,i[x]=1,i[_]=2,a.fill(-1),a[this._hashKey(A,E)]=y,a[this._hashKey(T,C)]=x,a[this._hashKey(k,B)]=_,this.trianglesLen=0,this._addTriangle(y,x,_,-1,-1,-1);for(let R=0,V,L;R<this._ids.length;R++){const P=this._ids[R],F=e[2*P],q=e[2*P+1];if(R>0&&Math.abs(F-V)<=$3&&Math.abs(q-L)<=$3||(V=F,L=q,P===y||P===x||P===_))continue;let X=0;for(let de=0,ge=this._hashKey(F,q);de<this._hashSize&&(X=a[(ge+de)%this._hashSize],!(X!==-1&&X!==r[X]));de++);X=n[X];let W=X,G;for(;G=r[W],Jg(F,q,e[2*W],e[2*W+1],e[2*G],e[2*G+1])>=0;)if(W=G,W===X){W=-1;break}if(W===-1)continue;let Q=this._addTriangle(W,P,r[W],-1,-1,i[W]);i[P]=this._legalize(Q+2),i[W]=Q,I++;let Z=r[W];for(;G=r[Z],Jg(F,q,e[2*Z],e[2*Z+1],e[2*G],e[2*G+1])<0;)Q=this._addTriangle(Z,P,G,i[P],-1,i[Z]),i[P]=this._legalize(Q+2),r[Z]=Z,I--,Z=G;if(W===X)for(;G=n[W],Jg(F,q,e[2*G],e[2*G+1],e[2*W],e[2*W+1])<0;)Q=this._addTriangle(G,P,W,-1,i[W],i[G]),this._legalize(Q+2),i[G]=Q,r[W]=W,I--,W=G;this._hullStart=n[P]=W,r[W]=n[Z]=P,r[P]=Z,a[this._hashKey(F,q)]=P,a[this._hashKey(e[2*W],e[2*W+1])]=W}this.hull=new Uint32Array(I);for(let R=0,V=this._hullStart;R<I;R++)this.hull[R]=V,V=r[V];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(e,n){return Math.floor(Zle(e-this._cx,n-this._cy)*this._hashSize)%this._hashSize}_legalize(e){const{_triangles:n,_halfedges:r,coords:i}=this;let a=0,s=0;for(;;){const o=r[e],c=e-e%3;if(s=c+(e+2)%3,o===-1){if(a===0)break;e=em[--a];continue}const d=o-o%3,f=c+(e+1)%3,p=d+(o+2)%3,g=n[s],y=n[e],x=n[f],_=n[p];if(Jle(i[2*g],i[2*g+1],i[2*y],i[2*y+1],i[2*x],i[2*x+1],i[2*_],i[2*_+1])){n[e]=_,n[o]=g;const E=r[p];if(E===-1){let C=this._hullStart;do{if(this._hullTri[C]===p){this._hullTri[C]=e;break}C=this._hullPrev[C]}while(C!==this._hullStart)}this._link(e,E),this._link(o,r[s]),this._link(s,p);const T=d+(o+1)%3;a<em.length&&(em[a++]=T)}else{if(a===0)break;e=em[--a]}}return s}_link(e,n){this._halfedges[e]=n,n!==-1&&(this._halfedges[n]=e)}_addTriangle(e,n,r,i,a,s){const o=this.trianglesLen;return this._triangles[o]=e,this._triangles[o+1]=n,this._triangles[o+2]=r,this._link(o,i),this._link(o+1,a),this._link(o+2,s),this.trianglesLen+=3,o}}function Zle(t,e){const n=t/(Math.abs(t)+Math.abs(e));return(e>0?3-n:1+n)/4}function b2(t,e,n,r){const i=t-n,a=e-r;return i*i+a*a}function Jle(t,e,n,r,i,a,s,o){const c=t-s,d=e-o,f=n-s,p=r-o,g=i-s,y=a-o,x=c*c+d*d,_=f*f+p*p,A=g*g+y*y;return c*(p*A-_*y)-d*(f*A-_*g)+x*(f*y-p*g)<0}function ece(t,e,n,r,i,a){const s=n-t,o=r-e,c=i-t,d=a-e,f=s*s+o*o,p=c*c+d*d,g=.5/(s*d-o*c),y=(d*f-o*p)*g,x=(s*p-c*f)*g;return y*y+x*x}function tce(t,e,n,r,i,a){const s=n-t,o=r-e,c=i-t,d=a-e,f=s*s+o*o,p=c*c+d*d,g=.5/(s*d-o*c),y=t+(d*f-o*p)*g,x=e+(s*p-c*f)*g;return{x:y,y:x}}function Ed(t,e,n,r){if(r-n<=20)for(let i=n+1;i<=r;i++){const a=t[i],s=e[a];let o=i-1;for(;o>=n&&e[t[o]]>s;)t[o+1]=t[o--];t[o+1]=a}else{const i=n+r>>1;let a=n+1,s=r;Oh(t,i,a),e[t[n]]>e[t[r]]&&Oh(t,n,r),e[t[a]]>e[t[r]]&&Oh(t,a,r),e[t[n]]>e[t[a]]&&Oh(t,n,a);const o=t[a],c=e[o];for(;;){do a++;while(e[t[a]]<c);do s--;while(e[t[s]]>c);if(s<a)break;Oh(t,a,s)}t[n+1]=t[s],t[s]=o,r-a+1>=s-n?(Ed(t,e,a,r),Ed(t,e,n,s-1)):(Ed(t,e,n,s-1),Ed(t,e,a,r))}}function Oh(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function nce(t){return t[0]}function rce(t){return t[1]}const G3=1e-6;class Nc{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(e,n){this._+=`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(e,n){this._+=`L${this._x1=+e},${this._y1=+n}`}arc(e,n,r){e=+e,n=+n,r=+r;const i=e+r,a=n;if(r<0)throw new Error("negative radius");this._x1===null?this._+=`M${i},${a}`:(Math.abs(this._x1-i)>G3||Math.abs(this._y1-a)>G3)&&(this._+="L"+i+","+a),r&&(this._+=`A${r},${r},0,1,1,${e-r},${n}A${r},${r},0,1,1,${this._x1=i},${this._y1=a}`)}rect(e,n,r,i){this._+=`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${+r}v${+i}h${-r}Z`}value(){return this._||null}}class jw{constructor(){this._=[]}moveTo(e,n){this._.push([e,n])}closePath(){this._.push(this._[0].slice())}lineTo(e,n){this._.push([e,n])}value(){return this._.length?this._:null}}class ice{constructor(e,[n,r,i,a]=[0,0,960,500]){if(!((i=+i)>=(n=+n))||!((a=+a)>=(r=+r)))throw new Error("invalid bounds");this.delaunay=e,this._circumcenters=new Float64Array(e.points.length*2),this.vectors=new Float64Array(e.points.length*2),this.xmax=i,this.xmin=n,this.ymax=a,this.ymin=r,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:e,hull:n,triangles:r},vectors:i}=this;let a,s;const o=this.circumcenters=this._circumcenters.subarray(0,r.length/3*2);for(let _=0,A=0,E=r.length,T,C;_<E;_+=3,A+=2){const D=r[_]*2,k=r[_+1]*2,B=r[_+2]*2,O=e[D],I=e[D+1],R=e[k],V=e[k+1],L=e[B],P=e[B+1],F=R-O,q=V-I,X=L-O,W=P-I,G=(F*W-q*X)*2;if(Math.abs(G)<1e-9){if(a===void 0){a=s=0;for(const Z of n)a+=e[Z*2],s+=e[Z*2+1];a/=n.length,s/=n.length}const Q=1e9*Math.sign((a-O)*W-(s-I)*X);T=(O+L)/2-Q*W,C=(I+P)/2+Q*X}else{const Q=1/G,Z=F*F+q*q,de=X*X+W*W;T=O+(W*Z-q*de)*Q,C=I+(F*de-X*Z)*Q}o[A]=T,o[A+1]=C}let c=n[n.length-1],d,f=c*4,p,g=e[2*c],y,x=e[2*c+1];i.fill(0);for(let _=0;_<n.length;++_)c=n[_],d=f,p=g,y=x,f=c*4,g=e[2*c],x=e[2*c+1],i[d+2]=i[f]=y-x,i[d+3]=i[f+1]=g-p}render(e){const n=e==null?e=new Nc:void 0,{delaunay:{halfedges:r,inedges:i,hull:a},circumcenters:s,vectors:o}=this;if(a.length<=1)return null;for(let f=0,p=r.length;f<p;++f){const g=r[f];if(g<f)continue;const y=Math.floor(f/3)*2,x=Math.floor(g/3)*2,_=s[y],A=s[y+1],E=s[x],T=s[x+1];this._renderSegment(_,A,E,T,e)}let c,d=a[a.length-1];for(let f=0;f<a.length;++f){c=d,d=a[f];const p=Math.floor(i[d]/3)*2,g=s[p],y=s[p+1],x=c*4,_=this._project(g,y,o[x+2],o[x+3]);_&&this._renderSegment(g,y,_[0],_[1],e)}return n&&n.value()}renderBounds(e){const n=e==null?e=new Nc:void 0;return e.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),n&&n.value()}renderCell(e,n){const r=n==null?n=new Nc:void 0,i=this._clip(e);if(i===null||!i.length)return;n.moveTo(i[0],i[1]);let a=i.length;for(;i[0]===i[a-2]&&i[1]===i[a-1]&&a>1;)a-=2;for(let s=2;s<a;s+=2)(i[s]!==i[s-2]||i[s+1]!==i[s-1])&&n.lineTo(i[s],i[s+1]);return n.closePath(),r&&r.value()}*cellPolygons(){const{delaunay:{points:e}}=this;for(let n=0,r=e.length/2;n<r;++n){const i=this.cellPolygon(n);i&&(i.index=n,yield i)}}cellPolygon(e){const n=new jw;return this.renderCell(e,n),n.value()}_renderSegment(e,n,r,i,a){let s;const o=this._regioncode(e,n),c=this._regioncode(r,i);o===0&&c===0?(a.moveTo(e,n),a.lineTo(r,i)):(s=this._clipSegment(e,n,r,i,o,c))&&(a.moveTo(s[0],s[1]),a.lineTo(s[2],s[3]))}contains(e,n,r){return n=+n,n!==n||(r=+r,r!==r)?!1:this.delaunay._step(e,n,r)===e}*neighbors(e){const n=this._clip(e);if(n)for(const r of this.delaunay.neighbors(e)){const i=this._clip(r);if(i){e:for(let a=0,s=n.length;a<s;a+=2)for(let o=0,c=i.length;o<c;o+=2)if(n[a]===i[o]&&n[a+1]===i[o+1]&&n[(a+2)%s]===i[(o+c-2)%c]&&n[(a+3)%s]===i[(o+c-1)%c]){yield r;break e}}}}_cell(e){const{circumcenters:n,delaunay:{inedges:r,halfedges:i,triangles:a}}=this,s=r[e];if(s===-1)return null;const o=[];let c=s;do{const d=Math.floor(c/3);if(o.push(n[d*2],n[d*2+1]),c=c%3===2?c-2:c+1,a[c]!==e)break;c=i[c]}while(c!==s&&c!==-1);return o}_clip(e){if(e===0&&this.delaunay.hull.length===1)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const n=this._cell(e);if(n===null)return null;const{vectors:r}=this,i=e*4;return this._simplify(r[i]||r[i+1]?this._clipInfinite(e,n,r[i],r[i+1],r[i+2],r[i+3]):this._clipFinite(e,n))}_clipFinite(e,n){const r=n.length;let i=null,a,s,o=n[r-2],c=n[r-1],d,f=this._regioncode(o,c),p,g=0;for(let y=0;y<r;y+=2)if(a=o,s=c,o=n[y],c=n[y+1],d=f,f=this._regioncode(o,c),d===0&&f===0)p=g,g=0,i?i.push(o,c):i=[o,c];else{let x,_,A,E,T;if(d===0){if((x=this._clipSegment(a,s,o,c,d,f))===null)continue;[_,A,E,T]=x}else{if((x=this._clipSegment(o,c,a,s,f,d))===null)continue;[E,T,_,A]=x,p=g,g=this._edgecode(_,A),p&&g&&this._edge(e,p,g,i,i.length),i?i.push(_,A):i=[_,A]}p=g,g=this._edgecode(E,T),p&&g&&this._edge(e,p,g,i,i.length),i?i.push(E,T):i=[E,T]}if(i)p=g,g=this._edgecode(i[0],i[1]),p&&g&&this._edge(e,p,g,i,i.length);else if(this.contains(e,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return i}_clipSegment(e,n,r,i,a,s){const o=a<s;for(o&&([e,n,r,i,a,s]=[r,i,e,n,s,a]);;){if(a===0&&s===0)return o?[r,i,e,n]:[e,n,r,i];if(a&s)return null;let c,d,f=a||s;f&8?(c=e+(r-e)*(this.ymax-n)/(i-n),d=this.ymax):f&4?(c=e+(r-e)*(this.ymin-n)/(i-n),d=this.ymin):f&2?(d=n+(i-n)*(this.xmax-e)/(r-e),c=this.xmax):(d=n+(i-n)*(this.xmin-e)/(r-e),c=this.xmin),a?(e=c,n=d,a=this._regioncode(e,n)):(r=c,i=d,s=this._regioncode(r,i))}}_clipInfinite(e,n,r,i,a,s){let o=Array.from(n),c;if((c=this._project(o[0],o[1],r,i))&&o.unshift(c[0],c[1]),(c=this._project(o[o.length-2],o[o.length-1],a,s))&&o.push(c[0],c[1]),o=this._clipFinite(e,o))for(let d=0,f=o.length,p,g=this._edgecode(o[f-2],o[f-1]);d<f;d+=2)p=g,g=this._edgecode(o[d],o[d+1]),p&&g&&(d=this._edge(e,p,g,o,d),f=o.length);else this.contains(e,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(o=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return o}_edge(e,n,r,i,a){for(;n!==r;){let s,o;switch(n){case 5:n=4;continue;case 4:n=6,s=this.xmax,o=this.ymin;break;case 6:n=2;continue;case 2:n=10,s=this.xmax,o=this.ymax;break;case 10:n=8;continue;case 8:n=9,s=this.xmin,o=this.ymax;break;case 9:n=1;continue;case 1:n=5,s=this.xmin,o=this.ymin;break}(i[a]!==s||i[a+1]!==o)&&this.contains(e,s,o)&&(i.splice(a,0,s,o),a+=2)}return a}_project(e,n,r,i){let a=1/0,s,o,c;if(i<0){if(n<=this.ymin)return null;(s=(this.ymin-n)/i)<a&&(c=this.ymin,o=e+(a=s)*r)}else if(i>0){if(n>=this.ymax)return null;(s=(this.ymax-n)/i)<a&&(c=this.ymax,o=e+(a=s)*r)}if(r>0){if(e>=this.xmax)return null;(s=(this.xmax-e)/r)<a&&(o=this.xmax,c=n+(a=s)*i)}else if(r<0){if(e<=this.xmin)return null;(s=(this.xmin-e)/r)<a&&(o=this.xmin,c=n+(a=s)*i)}return[o,c]}_edgecode(e,n){return(e===this.xmin?1:e===this.xmax?2:0)|(n===this.ymin?4:n===this.ymax?8:0)}_regioncode(e,n){return(e<this.xmin?1:e>this.xmax?2:0)|(n<this.ymin?4:n>this.ymax?8:0)}_simplify(e){if(e&&e.length>4){for(let n=0;n<e.length;n+=2){const r=(n+2)%e.length,i=(n+4)%e.length;(e[n]===e[r]&&e[r]===e[i]||e[n+1]===e[r+1]&&e[r+1]===e[i+1])&&(e.splice(r,2),n-=2)}e.length||(e=null)}return e}}const ace=2*Math.PI,ld=Math.pow;function sce(t){return t[0]}function oce(t){return t[1]}function lce(t){const{triangles:e,coords:n}=t;for(let r=0;r<e.length;r+=3){const i=2*e[r],a=2*e[r+1],s=2*e[r+2];if((n[s]-n[i])*(n[a+1]-n[i+1])-(n[a]-n[i])*(n[s+1]-n[i+1])>1e-10)return!1}return!0}function cce(t,e,n){return[t+Math.sin(t+e)*n,e+Math.cos(t-e)*n]}class hA{static from(e,n=sce,r=oce,i){return new hA("length"in e?uce(e,n,r,i):Float64Array.from(dce(e,n,r,i)))}constructor(e){this._delaunator=new y1(e),this.inedges=new Int32Array(e.length/2),this._hullIndex=new Int32Array(e.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const e=this._delaunator,n=this.points;if(e.hull&&e.hull.length>2&&lce(e)){this.collinear=Int32Array.from({length:n.length/2},(g,y)=>y).sort((g,y)=>n[2*g]-n[2*y]||n[2*g+1]-n[2*y+1]);const c=this.collinear[0],d=this.collinear[this.collinear.length-1],f=[n[2*c],n[2*c+1],n[2*d],n[2*d+1]],p=1e-8*Math.hypot(f[3]-f[1],f[2]-f[0]);for(let g=0,y=n.length/2;g<y;++g){const x=cce(n[2*g],n[2*g+1],p);n[2*g]=x[0],n[2*g+1]=x[1]}this._delaunator=new y1(n)}else delete this.collinear;const r=this.halfedges=this._delaunator.halfedges,i=this.hull=this._delaunator.hull,a=this.triangles=this._delaunator.triangles,s=this.inedges.fill(-1),o=this._hullIndex.fill(-1);for(let c=0,d=r.length;c<d;++c){const f=a[c%3===2?c-2:c+1];(r[c]===-1||s[f]===-1)&&(s[f]=c)}for(let c=0,d=i.length;c<d;++c)o[i[c]]=c;i.length<=2&&i.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=i[0],s[i[0]]=1,i.length===2&&(s[i[1]]=0,this.triangles[1]=i[1],this.triangles[2]=i[1]))}voronoi(e){return new ice(this,e)}*neighbors(e){const{inedges:n,hull:r,_hullIndex:i,halfedges:a,triangles:s,collinear:o}=this;if(o){const p=o.indexOf(e);p>0&&(yield o[p-1]),p<o.length-1&&(yield o[p+1]);return}const c=n[e];if(c===-1)return;let d=c,f=-1;do{if(yield f=s[d],d=d%3===2?d-2:d+1,s[d]!==e)return;if(d=a[d],d===-1){const p=r[(i[e]+1)%r.length];p!==f&&(yield p);return}}while(d!==c)}find(e,n,r=0){if(e=+e,e!==e||(n=+n,n!==n))return-1;const i=r;let a;for(;(a=this._step(r,e,n))>=0&&a!==r&&a!==i;)r=a;return a}_step(e,n,r){const{inedges:i,hull:a,_hullIndex:s,halfedges:o,triangles:c,points:d}=this;if(i[e]===-1||!d.length)return(e+1)%(d.length>>1);let f=e,p=ld(n-d[e*2],2)+ld(r-d[e*2+1],2);const g=i[e];let y=g;do{let x=c[y];const _=ld(n-d[x*2],2)+ld(r-d[x*2+1],2);if(_<p&&(p=_,f=x),y=y%3===2?y-2:y+1,c[y]!==e)break;if(y=o[y],y===-1){if(y=a[(s[e]+1)%a.length],y!==x&&ld(n-d[y*2],2)+ld(r-d[y*2+1],2)<p)return y;break}}while(y!==g);return f}render(e){const n=e==null?e=new Nc:void 0,{points:r,halfedges:i,triangles:a}=this;for(let s=0,o=i.length;s<o;++s){const c=i[s];if(c<s)continue;const d=a[s]*2,f=a[c]*2;e.moveTo(r[d],r[d+1]),e.lineTo(r[f],r[f+1])}return this.renderHull(e),n&&n.value()}renderPoints(e,n){n===void 0&&(!e||typeof e.moveTo!="function")&&(n=e,e=null),n=n==null?2:+n;const r=e==null?e=new Nc:void 0,{points:i}=this;for(let a=0,s=i.length;a<s;a+=2){const o=i[a],c=i[a+1];e.moveTo(o+n,c),e.arc(o,c,n,0,ace)}return r&&r.value()}renderHull(e){const n=e==null?e=new Nc:void 0,{hull:r,points:i}=this,a=r[0]*2,s=r.length;e.moveTo(i[a],i[a+1]);for(let o=1;o<s;++o){const c=2*r[o];e.lineTo(i[c],i[c+1])}return e.closePath(),n&&n.value()}hullPolygon(){const e=new jw;return this.renderHull(e),e.value()}renderTriangle(e,n){const r=n==null?n=new Nc:void 0,{points:i,triangles:a}=this,s=a[e*=3]*2,o=a[e+1]*2,c=a[e+2]*2;return n.moveTo(i[s],i[s+1]),n.lineTo(i[o],i[o+1]),n.lineTo(i[c],i[c+1]),n.closePath(),r&&r.value()}*trianglePolygons(){const{triangles:e}=this;for(let n=0,r=e.length/3;n<r;++n)yield this.trianglePolygon(n)}trianglePolygon(e){const n=new jw;return this.renderTriangle(e,n),n.value()}}function uce(t,e,n,r){const i=t.length,a=new Float64Array(i*2);for(let s=0;s<i;++s){const o=t[s];a[s*2]=e.call(r,o,s,t),a[s*2+1]=n.call(r,o,s,t)}return a}function*dce(t,e,n,r){let i=0;for(const a of t)yield e.call(r,a,i,t),yield n.call(r,a,i,t),++i}const Ey=({svgRef:t,params:e,store:n,instance:r})=>{var B;const{disableVoronoi:i,voronoiMaxRadius:a,onItemClick:s}=e,o=ft(n,Do),{axis:c,axisIds:d}=ft(n,Zi),{axis:f,axisIds:p}=ft(n,Ji),g=ft(n,Ak),{series:y,seriesOrder:x}=((B=ft(n,Ka))==null?void 0:B.scatter)??{},_=M.useRef({}),A=M.useRef(void 0),E=M.useRef(void 0),T=d[0],C=p[0];Wn(()=>{n.update(O=>O.voronoi.isVoronoiEnabled===!i?O:H({},O,{voronoi:{isVoronoiEnabled:!i}}))},[n,i]),Wn(()=>{if(g||x===void 0||y===void 0||i)return;_.current={};let O=[];x.forEach(I=>{const{data:R,xAxisId:V,yAxisId:L}=y[I],P=c[V??T].scale,F=f[L??C].scale,q=u1(P),X=u1(F),W=[],G=[];for(let Q=0;Q<R.length;Q+=1){const{x:Z,y:de}=R[Q],ge=q(Z),xe=X(de);r.isPointInside(ge,xe)&&(W.push(ge),W.push(xe),G.push(Q))}_.current[I]={seriesId:I,seriesIndexes:G,startIndex:O.length,endIndex:O.length+W.length},O=O.concat(W)}),A.current=new hA(O),E.current=void 0},[g,T,C,y,x,c,f,o,r,i]),M.useEffect(()=>{if(t.current===null||i)return;const O=t.current;function I(G){const Q=Dw(O,G);if(!r.isPointInside(Q.x,Q.y))return E.current=void 0,"outside-chart";if(!A.current)return"no-point-found";const Z=A.current.find(Q.x,Q.y,E.current);if(Z===void 0)return"no-point-found";E.current=Z;const de=Object.values(_.current).find(be=>2*Z>=be.startIndex&&2*Z<be.endIndex);if(de===void 0)return"no-point-found";const ge=(2*Z-_.current[de.seriesId].startIndex)/2,xe=_.current[de.seriesId].seriesIndexes[ge];if(a!==void 0){const be=A.current.points[2*Z],ke=A.current.points[2*Z+1];if((be-Q.x)**2+(ke-Q.y)**2>a**2)return"outside-voronoi-max-radius"}return{seriesId:de.seriesId,dataIndex:xe}}const R=r.addInteractionListener("moveEnd",G=>{var Q,Z;G.detail.activeGestures.pan||((Q=r.cleanInteraction)==null||Q.call(r),(Z=r.clearHighlight)==null||Z.call(r))}),V=r.addInteractionListener("panEnd",G=>{var Q,Z;G.detail.activeGestures.move||((Q=r.cleanInteraction)==null||Q.call(r),(Z=r.clearHighlight)==null||Z.call(r))}),L=r.addInteractionListener("quickPressEnd",G=>{var Q,Z;!G.detail.activeGestures.move&&!G.detail.activeGestures.pan&&((Q=r.cleanInteraction)==null||Q.call(r),(Z=r.clearHighlight)==null||Z.call(r))}),P=G=>{var ge,xe,be,ke,he,Se;const Q=I(G.detail.srcEvent);if(Q==="outside-chart"){(ge=r.cleanInteraction)==null||ge.call(r),(xe=r.clearHighlight)==null||xe.call(r);return}if(Q==="outside-voronoi-max-radius"||Q==="no-point-found"){(be=r.removeItemInteraction)==null||be.call(r),(ke=r.clearHighlight)==null||ke.call(r);return}const{seriesId:Z,dataIndex:de}=Q;(he=r.setItemInteraction)==null||he.call(r,{type:"scatter",seriesId:Z,dataIndex:de}),(Se=r.setHighlight)==null||Se.call(r,{seriesId:Z,dataIndex:de})},F=r.addInteractionListener("tap",G=>{const Q=I(G.detail.srcEvent);if(typeof Q!="string"&&s){const{seriesId:Z,dataIndex:de}=Q;s(G.detail.srcEvent,{type:"scatter",seriesId:Z,dataIndex:de})}}),q=r.addInteractionListener("move",P),X=r.addInteractionListener("pan",P),W=r.addInteractionListener("quickPress",P);return()=>{F.cleanup(),q.cleanup(),R.cleanup(),X.cleanup(),V.cleanup(),W.cleanup(),L.cleanup()}},[t,f,c,a,s,i,o,r]);const D=Ue(()=>{n.update(O=>H({},O,{voronoi:H({},O.voronoi,{isVoronoiEnabled:!0})}))}),k=Ue(()=>{n.update(O=>H({},O,{voronoi:H({},O.voronoi,{isVoronoiEnabled:!1})}))});return{instance:{enableVoronoi:D,disableVoronoi:k}}};Ey.getDefaultizedParams=({params:t})=>H({},t,{disableVoronoi:t.disableVoronoi??!t.series.some(e=>e.type==="scatter")});Ey.getInitialState=t=>({voronoi:{isVoronoiEnabled:!t.disableVoronoi}});Ey.params={disableVoronoi:!0,voronoiMaxRadius:!0,onItemClick:!0};const B6=[tp,mf,gf,cu,Ey],fce=["children","localeText","plugins","seriesConfig","slots","slotProps"],hce=t=>{const e=wt({props:t,name:"MuiChartDataProvider"}),{children:n,localeText:r,plugins:i=B6,seriesConfig:a,slots:s,slotProps:o}=e,c=Be(e,fce),d=Qc(),f={plugins:i,seriesConfig:a,pluginParams:H({theme:d.palette.mode},c)};return{children:n,localeText:r,chartProviderProps:f,slots:s,slotProps:o}};function F6(t){const{children:e,localeText:n,chartProviderProps:r,slots:i,slotProps:a}=hce(t);return v.jsx(yae,H({},r,{children:v.jsx(bse,{localeText:n,children:v.jsx(Gle,{slots:i,slotProps:a,defaultSlots:zle,children:e})})}))}function W3(t){const{isReversed:e,gradientId:n,size:r,direction:i,scale:a,colorMap:s}=t;return r<=0?null:v.jsx("linearGradient",{id:n,x1:"0",x2:"0",y1:"0",y2:"0",[`${i}${e?1:2}`]:`${r}px`,gradientUnits:"userSpaceOnUse",children:s.thresholds.map((o,c)=>{const d=a(o);if(d===void 0)return null;const f=e?1-d/r:d/r;return Number.isNaN(f)?null:v.jsxs(M.Fragment,{children:[v.jsx("stop",{offset:f,stopColor:s.colors[c],stopOpacity:1}),v.jsx("stop",{offset:f,stopColor:s.colors[c+1],stopOpacity:1})]},o.toString()+c)})})}const pce=10;function Y3(t){const{gradientUnits:e,isReversed:n,gradientId:r,size:i,direction:a,scale:s,colorScale:o,colorMap:c}=t,d=[c.min??0,c.max??100],f=d.map(s).filter(x=>x!==void 0);if(f.length!==2)return null;const p=typeof d[0]=="number"?Qt(d[0],d[1]):Ub(d[0],d[1]),g=Math.round((Math.max(...f)-Math.min(...f))/pce),y=`${d[0]}-${d[1]}-`;return v.jsx("linearGradient",{id:r,x1:"0",x2:"0",y1:"0",y2:"0",[`${a}${n?1:2}`]:e==="objectBoundingBox"?1:`${i}px`,gradientUnits:e??"userSpaceOnUse",children:Array.from({length:g+1},(x,_)=>{const A=p(_/g);if(A===void 0)return null;const E=s(A);if(E===void 0)return null;const T=n?1-E/i:E/i,C=o(A);return C===null?null:v.jsx("stop",{offset:T,stopColor:C,stopOpacity:1},y+_)})})}const gce=10,mce=t=>t?{x1:"1",x2:"0",y1:"0",y2:"0"}:{x1:"0",x2:"1",y1:"0",y2:"0"};function A2(t){const{isReversed:e,gradientId:n,colorScale:r,colorMap:i}=t,a=[i.min??0,i.max??100],s=typeof a[0]=="number"?Qt(a[0],a[1]):Ub(a[0],a[1]),o=gce,c=`${a[0]}-${a[1]}-`;return v.jsx("linearGradient",H({id:n},mce(e),{gradientUnits:"objectBoundingBox",children:Array.from({length:o+1},(d,f)=>{const p=f/o,g=s(p);if(g===void 0)return null;const y=r(g);return y===null?null:v.jsx("stop",{offset:p,stopColor:y,stopOpacity:1},c+f)})}))}function yce(){const{top:t,height:e,bottom:n,left:r,width:i,right:a}=Ta(),s=t+e+n,o=r+i+a,c=Kae(),d=Qae(),{xAxis:f,xAxisIds:p}=Mo(),{yAxis:g,yAxisIds:y}=Hl(),{zAxis:x,zAxisIds:_}=oA(),A=y.filter(C=>g[C].colorMap!==void 0),E=p.filter(C=>f[C].colorMap!==void 0),T=_.filter(C=>x[C].colorMap!==void 0);return A.length===0&&E.length===0&&T.length===0?null:v.jsxs("defs",{children:[A.map(C=>{const D=c(C),k=d(C),{colorMap:B,scale:O,colorScale:I,reverse:R}=g[C];return(B==null?void 0:B.type)==="piecewise"?v.jsx(W3,{isReversed:!R,scale:O,colorMap:B,size:s,gradientId:D,direction:"y"},D):(B==null?void 0:B.type)==="continuous"?v.jsxs(M.Fragment,{children:[v.jsx(Y3,{isReversed:!R,scale:O,colorScale:I,colorMap:B,size:s,gradientId:D,direction:"y"}),v.jsx(A2,{isReversed:R,colorScale:I,colorMap:B,gradientId:k})]},D):null}),E.map(C=>{const D=c(C),k=d(C),{colorMap:B,scale:O,reverse:I,colorScale:R}=f[C];return(B==null?void 0:B.type)==="piecewise"?v.jsx(W3,{isReversed:I,scale:O,colorMap:B,size:o,gradientId:D,direction:"x"},D):(B==null?void 0:B.type)==="continuous"?v.jsxs(M.Fragment,{children:[v.jsx(Y3,{isReversed:I,scale:O,colorScale:R,colorMap:B,size:o,gradientId:D,direction:"x"}),v.jsx(A2,{isReversed:I,colorScale:R,colorMap:B,gradientId:k})]},D):null}),T.map(C=>{const D=d(C),{colorMap:k,colorScale:B}=x[C];return(k==null?void 0:k.type)==="continuous"?v.jsx(A2,{colorScale:B,colorMap:k,gradientId:D},D):null})]})}const vce=["children","className","title","desc"],xce=Pe("svg",{name:"MuiChartsSurface",slot:"Root"})(({ownerState:t})=>({width:t.width??"100%",height:t.height??"100%",display:"flex",position:"relative",flexDirection:"column",alignItems:"center",justifyContent:"center",overflow:"hidden",touchAction:"pan-y",userSelect:"none"})),V6=M.forwardRef(function(e,n){const r=bn(),{width:i,height:a}=ft(r,Dee),{width:s,height:o}=ft(r,kP),c=lA(),d=ti(c,n),f=wt({props:e,name:"MuiChartsSurface"}),{children:p,className:g,title:y,desc:x}=f,_=Be(f,vce),A=a>0&&i>0;return v.jsxs(xce,H({ownerState:{width:s,height:o},viewBox:`0 0 ${i} ${a}`,className:g},_,{ref:d,children:[y&&v.jsx("title",{children:y}),x&&v.jsx("desc",{children:x}),v.jsx(yce,{}),A&&p]}))}),wce=["width","height","margin","children","series","colors","dataset","desc","onAxisClick","highlightedAxis","onHighlightedAxisChange","disableVoronoi","voronoiMaxRadius","onItemClick","disableAxisListener","highlightedItem","onHighlightChange","sx","title","xAxis","yAxis","zAxis","rotationAxis","radiusAxis","skipAnimation","seriesConfig","plugins","localeText","slots","slotProps","experimentalFeatures"],j6=(t,e)=>{const n=t,{width:r,height:i,margin:a,children:s,series:o,colors:c,dataset:d,desc:f,onAxisClick:p,highlightedAxis:g,onHighlightedAxisChange:y,disableVoronoi:x,voronoiMaxRadius:_,onItemClick:A,disableAxisListener:E,highlightedItem:T,onHighlightChange:C,sx:D,title:k,xAxis:B,yAxis:O,zAxis:I,rotationAxis:R,radiusAxis:V,skipAnimation:L,seriesConfig:P,plugins:F,localeText:q,slots:X,slotProps:W,experimentalFeatures:G}=n,Q=Be(n,wce),Z=H({title:k,desc:f,sx:D,ref:e},Q);return{chartDataProviderProps:{margin:a,series:o,colors:c,dataset:d,disableAxisListener:E,highlightedItem:T,onHighlightChange:C,onAxisClick:p,highlightedAxis:g,onHighlightedAxisChange:y,disableVoronoi:x,voronoiMaxRadius:_,onItemClick:A,xAxis:B,yAxis:O,zAxis:I,rotationAxis:R,radiusAxis:V,skipAnimation:L,width:r,height:i,localeText:q,seriesConfig:P,experimentalFeatures:G,plugins:F??B6,slots:X,slotProps:W},chartsSurfaceProps:Z,children:s}},_ce=(t,e)=>t==="vertical"?(e==null?void 0:e.horizontal)==="start"?"row":"row-reverse":(e==null?void 0:e.vertical)==="bottom"?"column-reverse":"column",bce=(t,e)=>{if(t==="vertical"){if((e==null?void 0:e.vertical)==="top")return"flex-start";if((e==null?void 0:e.vertical)==="bottom")return"flex-end"}if(t==="horizontal"){if((e==null?void 0:e.horizontal)==="start")return"flex-start";if((e==null?void 0:e.horizontal)==="end")return"flex-end"}return"center"},Ace=Pe("div",{name:"MuiChartsWrapper",slot:"Root",shouldForwardProp:t=>Sa(t)&&t!=="extendVertically"})(({ownerState:t})=>({display:"flex",flexDirection:_ce(t.legendDirection,t.legendPosition),flex:1,justifyContent:"center",alignItems:bce(t.legendDirection,t.legendPosition),variants:[{props:{extendVertically:!0},style:{height:"100%"}}]}));function U6(t){const{children:e,sx:n,extendVertically:r}=t,i=yse(),a=bn(),{height:s}=ft(a,kP);return v.jsx(Ace,{ref:i,ownerState:t,sx:n,extendVertically:r??s===void 0,children:e})}const E2=M.forwardRef(function(e,n){var C,D,k,B;const r=wt({props:e,name:"MuiBarChart"}),{chartsWrapperProps:i,chartContainerProps:a,barPlotProps:s,gridProps:o,clipPathProps:c,clipPathGroupProps:d,overlayProps:f,chartsAxisProps:p,axisHighlightProps:g,legendProps:y,children:x}=jle(r),{chartDataProviderProps:_,chartsSurfaceProps:A}=j6(a,n),E=((C=r.slots)==null?void 0:C.tooltip)??O6,T=(D=r.slots)==null?void 0:D.toolbar;return v.jsx(F6,H({},_,{children:v.jsxs(U6,H({},i,{children:[r.showToolbar&&T?v.jsx(T,H({},(k=r.slotProps)==null?void 0:k.toolbar)):null,!r.hideLegend&&v.jsx(M6,H({},y)),v.jsxs(V6,H({},A,{children:[v.jsx(foe,H({},o)),v.jsxs("g",H({},d,{children:[v.jsx(Rle,H({},s)),v.jsx(L6,H({},f)),v.jsx(Zoe,H({},g))]})),v.jsx(aoe,H({},p)),v.jsx(Ase,H({},c)),x]})),!r.loading&&v.jsx(E,H({},(B=r.slotProps)==null?void 0:B.tooltip))]}))}))}),Ece=["classes","color","dataIndex","id","isFaded","isHighlighted","onClick","cornerRadius","startAngle","endAngle","innerRadius","outerRadius","paddingAngle","skipAnimation"];function Sce(t){return Rt("MuiPieArc",t)}Ot("MuiPieArc",["root","highlighted","faded","series"]);const Tce=t=>{const{classes:e,id:n,isFaded:r,isHighlighted:i,dataIndex:a}=t,s={root:["root",`series-${n}`,`data-index-${a}`,i&&"highlighted",r&&"faded"]};return vt(s,Sce,e)},Cce=Pe("path",{name:"MuiPieArc",slot:"Root",overridesResolver:(t,e)=>e.arc})(({theme:t})=>({stroke:(t.vars||t).palette.background.paper,transitionProperty:"opacity, fill, filter",transitionDuration:`${cA}ms`,transitionTimingFunction:r6})),Ice=M.forwardRef(function(e,n){const{classes:r,color:i,dataIndex:a,id:s,isFaded:o,isHighlighted:c,onClick:d,cornerRadius:f,startAngle:p,endAngle:g,innerRadius:y,outerRadius:x,paddingAngle:_,skipAnimation:A}=e,E=Be(e,Ece),T={id:s,dataIndex:a,classes:r,color:i,isFaded:o,isHighlighted:c},C=Tce(T),D=P6({type:"pie",seriesId:s,dataIndex:a}),k=pse({cornerRadius:f,startAngle:p,endAngle:g,innerRadius:y,outerRadius:x,paddingAngle:_,skipAnimation:A,ref:n});return v.jsx(Cce,H({onClick:d,cursor:d?"pointer":"unset",ownerState:T,className:C.root,fill:T.color,opacity:T.isFaded?.3:1,filter:T.isHighlighted?"brightness(120%)":"none",strokeWidth:1,strokeLinejoin:"round","data-highlighted":T.isHighlighted||void 0,"data-faded":T.isFaded||void 0},E,D,k))});function H6(t){const{id:e,data:n,faded:r,highlighted:i,paddingAngle:a=0,innerRadius:s=0,arcLabelRadius:o,outerRadius:c,cornerRadius:d=0}=t,{isFaded:f,isHighlighted:p}=Yae();return M.useMemo(()=>n.map((y,x)=>{const _={seriesId:e,dataIndex:x},A=p(_),E=!A&&f(_),T=H({additionalRadius:0},E&&r||A&&i||{}),C=Math.max(0,bd(T.paddingAngle??a)),D=Math.max(0,T.innerRadius??s),k=Math.max(0,T.outerRadius??c+T.additionalRadius),B=T.cornerRadius??d,O=T.arcLabelRadius??o??(D+k)/2;return H({},y,T,{dataIndex:x,isFaded:E,isHighlighted:A,paddingAngle:C,innerRadius:D,outerRadius:k,cornerRadius:B,arcLabelRadius:O})}),[d,s,c,a,o,n,r,i,f,p,e])}const Dce=["slots","slotProps","innerRadius","outerRadius","cornerRadius","paddingAngle","id","highlighted","faded","data","onItemClick","skipAnimation"];function Rce(t){const{slots:e,slotProps:n,innerRadius:r=0,outerRadius:i,cornerRadius:a=0,paddingAngle:s=0,id:o,highlighted:c,faded:d={additionalRadius:-5},data:f,onItemClick:p,skipAnimation:g}=t,y=Be(t,Dce),x=H6({innerRadius:r,outerRadius:i,cornerRadius:a,paddingAngle:s,id:o,highlighted:c,faded:d,data:f});if(f.length===0)return null;const _=(e==null?void 0:e.pieArc)??Ice;return v.jsx("g",H({},y,{children:x.map((A,E)=>v.jsx(_,H({startAngle:A.startAngle,endAngle:A.endAngle,paddingAngle:A.paddingAngle,innerRadius:A.innerRadius,outerRadius:A.outerRadius,cornerRadius:A.cornerRadius,skipAnimation:g??!1,id:o,color:A.color,dataIndex:E,isFaded:A.isFaded,isHighlighted:A.isHighlighted,onClick:p&&(T=>{p(T,{type:"pie",seriesId:o,dataIndex:E},A)})},n==null?void 0:n.pieArc),A.dataIndex))}))}const Oce=["id","classes","color","startAngle","endAngle","paddingAngle","arcLabelRadius","innerRadius","outerRadius","cornerRadius","formattedArcLabel","isHighlighted","isFaded","style","skipAnimation"];function Mce(t){return Rt("MuiPieArcLabel",t)}const Pce=Ot("MuiPieArcLabel",["root","highlighted","faded","animate","series"]),kce=t=>{const{classes:e,id:n,isFaded:r,isHighlighted:i,skipAnimation:a}=t,s={root:["root",`series-${n}`,i&&"highlighted",r&&"faded",!a&&"animate"]};return vt(s,Mce,e)},Nce=Pe("text",{name:"MuiPieArcLabel",slot:"Root"})(({theme:t})=>({fill:(t.vars||t).palette.text.primary,textAnchor:"middle",dominantBaseline:"middle",pointerEvents:"none",animationName:"animate-opacity",animationDuration:"0s",animationTimingFunction:r6,[`&.${Pce.animate}`]:{animationDuration:`${cA}ms`},"@keyframes animate-opacity":{from:{opacity:0}}})),Lce=M.forwardRef(function(e,n){const{id:r,classes:i,color:a,startAngle:s,endAngle:o,paddingAngle:c,arcLabelRadius:d,cornerRadius:f,formattedArcLabel:p,isHighlighted:g,isFaded:y,skipAnimation:x}=e,_=Be(e,Oce),E=kce({id:r,classes:i,isFaded:y,isHighlighted:g,skipAnimation:x}),T=mse({cornerRadius:f,startAngle:s,endAngle:o,innerRadius:d,outerRadius:d,paddingAngle:c,skipAnimation:x,ref:n});return v.jsx(Nce,H({className:E.root},_,T,{children:p}))}),Bce=["arcLabel","arcLabelMinAngle","arcLabelRadius","cornerRadius","data","faded","highlighted","id","innerRadius","outerRadius","paddingAngle","skipAnimation","slotProps","slots"],Fce=180/Math.PI;function Vce(t,e,n){var i;if(!t||(n.endAngle-n.startAngle)*Fce<e)return null;switch(t){case"label":return Qi(n.label,"arc");case"value":return(i=n.value)==null?void 0:i.toString();case"formattedValue":return n.formattedValue;default:return t(H({},n,{label:Qi(n.label,"arc")}))}}function jce(t){const{arcLabel:e,arcLabelMinAngle:n=0,arcLabelRadius:r,cornerRadius:i=0,data:a,faded:s={additionalRadius:-5},highlighted:o,id:c,innerRadius:d,outerRadius:f,paddingAngle:p=0,skipAnimation:g,slotProps:y,slots:x}=t,_=Be(t,Bce),A=H6({innerRadius:d,outerRadius:f,arcLabelRadius:r,cornerRadius:i,paddingAngle:p,id:c,highlighted:o,faded:s,data:a});if(a.length===0)return null;const E=(x==null?void 0:x.pieArcLabel)??Lce;return v.jsx("g",H({},_,{children:A.map(T=>v.jsx(E,H({startAngle:T.startAngle,endAngle:T.endAngle,paddingAngle:T.paddingAngle,innerRadius:T.innerRadius,outerRadius:T.outerRadius,arcLabelRadius:T.arcLabelRadius,cornerRadius:T.cornerRadius,id:c,color:T.color,isFaded:T.isFaded,isHighlighted:T.isHighlighted,formattedArcLabel:Vce(e,n,T),skipAnimation:g??!1},y==null?void 0:y.pieArcLabel),T.id??T.dataIndex))}))}function Rc(t,e){if(typeof t=="number")return t;if(t==="100%")return e;if(t.endsWith("%")){const n=Number.parseFloat(t.slice(0,t.length-1));if(!Number.isNaN(n))return n*e/100}if(t.endsWith("px")){const n=Number.parseFloat(t.slice(0,t.length-2));if(!Number.isNaN(n))return n}throw new Error(`MUI X Charts: Received an unknown value "${t}". It should be a number, or a string with a percentage value.`)}function q3(t,e){const{height:n,width:r}=e,{cx:i,cy:a}=t,s=Math.min(r,n)/2,o=Rc(i??"50%",r),c=Rc(a??"50%",n);return{cx:o,cy:c,availableRadius:s}}function Uce(t){return Rt("MuiPieChart",t)}Ot("MuiPieChart",["root","series","seriesLabels"]);const Hce=t=>vt({root:["root"],series:["series"],seriesLabels:["seriesLabels"]},Uce,t);function zce(t){const{skipAnimation:e,slots:n,slotProps:r,onItemClick:i}=t,a=Nae(),{left:s,top:o,width:c,height:d}=Ta(),f=N6(e),p=Hce();if(a===void 0)return null;const{series:g,seriesOrder:y}=a;return v.jsxs("g",{children:[y.map(x=>{const{innerRadius:_,outerRadius:A,cornerRadius:E,paddingAngle:T,data:C,cx:D,cy:k,highlighted:B,faded:O}=g[x],{cx:I,cy:R,availableRadius:V}=q3({cx:D,cy:k},{width:c,height:d}),L=Rc(A??V,V),P=Rc(_??0,V);return v.jsx("g",{className:p.series,transform:`translate(${s+I}, ${o+R})`,"data-series":x,children:v.jsx(Rce,{innerRadius:P,outerRadius:L,cornerRadius:E,paddingAngle:T,id:x,data:C,skipAnimation:f,highlighted:B,faded:O,onItemClick:i,slots:n,slotProps:r})},x)}),y.map(x=>{const{innerRadius:_,outerRadius:A,arcLabelRadius:E,cornerRadius:T,paddingAngle:C,arcLabel:D,arcLabelMinAngle:k,data:B,cx:O,cy:I}=g[x],{cx:R,cy:V,availableRadius:L}=q3({cx:O,cy:I},{width:c,height:d}),P=Rc(A??L,L),F=Rc(_??0,L),q=E===void 0?(P+F)/2:Rc(E,L);return v.jsx("g",{className:p.seriesLabels,transform:`translate(${s+R}, ${o+V})`,"data-series":x,children:v.jsx(jce,{innerRadius:F,outerRadius:P??L,arcLabelRadius:q,cornerRadius:T,paddingAngle:C,id:x,data:B,skipAnimation:f,arcLabel:D,arcLabelMinAngle:k,slots:n,slotProps:r})},x)})]})}const $ce=[gf,cu],Gce=["series","width","height","margin","colors","sx","skipAnimation","hideLegend","children","slots","slotProps","onItemClick","loading","highlightedItem","onHighlightChange","className","showToolbar"],X3=M.forwardRef(function(e,n){var L,P,F,q,X,W,G,Q;const r=wt({props:e,name:"MuiPieChart"}),{series:i,width:a,height:s,margin:o,colors:c,sx:d,skipAnimation:f,hideLegend:p,children:g,slots:y,slotProps:x,onItemClick:_,loading:A,highlightedItem:E,onHighlightChange:T,className:C,showToolbar:D}=r,k=Be(r,Gce),B=NP(o,nte),{chartDataProviderProps:O,chartsSurfaceProps:I}=j6(H({},k,{series:i.map(Z=>H({type:"pie"},Z)),width:a,height:s,margin:B,colors:c,highlightedItem:E,onHighlightChange:T,className:C,skipAnimation:f,plugins:$ce}),n),R=(y==null?void 0:y.tooltip)??O6,V=(L=r.slots)==null?void 0:L.toolbar;return v.jsx(F6,H({},O,{children:v.jsxs(U6,{legendPosition:(F=(P=r.slotProps)==null?void 0:P.legend)==null?void 0:F.position,legendDirection:((X=(q=r==null?void 0:r.slotProps)==null?void 0:q.legend)==null?void 0:X.direction)??"vertical",sx:d,children:[D&&V?v.jsx(V,H({},(W=r.slotProps)==null?void 0:W.toolbar)):null,!p&&v.jsx(M6,{direction:((Q=(G=r==null?void 0:r.slotProps)==null?void 0:G.legend)==null?void 0:Q.direction)??"vertical",slots:y,slotProps:x}),v.jsxs(V6,H({},I,{children:[v.jsx(zce,{slots:y,slotProps:x,onItemClick:_}),v.jsx(L6,{loading:A,slots:y,slotProps:x}),g]})),!A&&v.jsx(R,H({trigger:"item"},x==null?void 0:x.tooltip))]})}))});function Wce(){const{loading:t,error:e,summary:n,tagStats:r,monthlyFinished:i,monthlyAddedBooks:a,monthlyMemos:s,topAuthors:o,topPublishers:c,statusDistribution:d}=GJ(),f=n&&(n.totalBooks>0||n.finishedBooks>0||n.readingBooks>0||n.tsundokuBooks>0||n.reReadingBooks>0);return v.jsxs(re,{sx:{maxWidth:1200,mx:"auto",mb:10},children:[v.jsx(G1,{title:"統計",subtitle:"あなたの読書活動を可視化"}),v.jsxs(re,{sx:{p:2},children:[t&&v.jsxs(re,{sx:{display:"flex",alignItems:"center",gap:1,mb:2},children:[v.jsx(C0,{size:20}),v.jsx(te,{variant:"body2",children:"読み込み中..."})]}),e&&v.jsx(te,{color:"error",sx:{mb:2},children:e}),!t&&!e&&!f&&v.jsx(kn,{sx:{mb:2},children:v.jsxs(Nn,{sx:{textAlign:"center",py:4},children:[v.jsx(te,{variant:"h6",color:"text.secondary",gutterBottom:!0,children:"📚 読書データがありません"}),v.jsx(te,{variant:"body2",color:"text.secondary",children:"本を追加して読書を始めると、ここに統計が表示されます"})]})}),f&&v.jsxs(v.Fragment,{children:[v.jsxs(re,{className:"stats-summary-grid",children:[v.jsx(kn,{"data-testid":"stats-total-books",className:"stats-summary-card",children:v.jsxs(Nn,{children:[v.jsx(te,{variant:"h6",children:"総冊数"}),v.jsx(te,{variant:"h4",sx:{fontWeight:"bold"},children:(n==null?void 0:n.totalBooks)??"-"})]})}),v.jsx(kn,{"data-testid":"stats-tsundoku-books",className:"stats-summary-card",children:v.jsxs(Nn,{children:[v.jsx(te,{variant:"h6",children:"積読冊数"}),v.jsx(te,{variant:"h4",sx:{fontWeight:"bold"},children:(n==null?void 0:n.tsundokuBooks)??"-"})]})}),v.jsx(kn,{"data-testid":"stats-reading-books",className:"stats-summary-card",children:v.jsxs(Nn,{children:[v.jsx(te,{variant:"h6",children:"読書中冊数"}),v.jsx(te,{variant:"h4",sx:{fontWeight:"bold"},children:(n==null?void 0:n.readingBooks)??"-"})]})}),v.jsx(kn,{"data-testid":"stats-rereading-books",className:"stats-summary-card",children:v.jsxs(Nn,{children:[v.jsx(te,{variant:"h6",children:"再読中冊数"}),v.jsx(te,{variant:"h4",sx:{fontWeight:"bold"},children:(n==null?void 0:n.reReadingBooks)??"-"})]})}),v.jsx(kn,{"data-testid":"stats-finished-books",className:"stats-summary-card",children:v.jsxs(Nn,{children:[v.jsx(te,{variant:"h6",children:"読了冊数"}),v.jsx(te,{variant:"h4",sx:{fontWeight:"bold"},children:(n==null?void 0:n.finishedBooks)??"-"})]})})]}),!!n&&v.jsx(kn,{sx:{mb:2},"data-testid":"chart-status-pie",children:v.jsxs(Nn,{children:[v.jsx(te,{variant:"h6",sx:{mb:1},children:"ステータス内訳"}),v.jsx(X3,{height:220,series:[{data:[{id:"tsundoku",label:"積読",value:(d==null?void 0:d.tsundoku)??0},{id:"reading",label:"読書中",value:(d==null?void 0:d.reading)??0},{id:"reReading",label:"再読中",value:(d==null?void 0:d.reReading)??0},{id:"finished",label:"読了",value:(d==null?void 0:d.finished)??0}],innerRadius:30,paddingAngle:2}]})]})}),v.jsx(Bc,{sx:{my:2}}),v.jsx(te,{variant:"h6",sx:{mb:1},children:"月別読了冊数（直近12ヶ月）"}),v.jsx(kn,{sx:{mb:2},"data-testid":"chart-monthly-finished",children:v.jsx(Nn,{children:v.jsx(E2,{xAxis:[{scaleType:"band",data:(i??[]).map(p=>p.key)}],series:[{data:(i??[]).map(p=>p.count),label:"読了冊数"}],height:260})})}),v.jsxs(re,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",md:"1fr 1fr"},gap:2,mb:2},children:[v.jsxs(re,{children:[v.jsx(te,{variant:"subtitle1",sx:{mb:1},children:"月別追加冊数（直近12ヶ月）"}),v.jsx(kn,{"data-testid":"chart-monthly-added",children:v.jsx(Nn,{children:v.jsx(E2,{xAxis:[{scaleType:"band",data:(a??[]).map(p=>p.key)}],series:[{data:(a??[]).map(p=>p.count),label:"追加冊数",color:"#42a5f5"}],height:220})})})]}),v.jsxs(re,{children:[v.jsx(te,{variant:"subtitle1",sx:{mb:1},children:"月別メモ数（直近12ヶ月）"}),v.jsx(kn,{"data-testid":"chart-monthly-memos",children:v.jsx(Nn,{children:v.jsx(E2,{xAxis:[{scaleType:"band",data:(s??[]).map(p=>p.key)}],series:[{data:(s??[]).map(p=>p.count),label:"メモ数",color:"#9c27b0"}],height:220})})})]})]}),v.jsx(Bc,{sx:{my:2}}),v.jsx(te,{variant:"h6",sx:{mb:1},children:"タグ使用頻度（上位）"}),!!(r!=null&&r.length)&&v.jsx(kn,{sx:{mb:2},"data-testid":"chart-tag-pie",children:v.jsx(Nn,{children:v.jsx(X3,{height:260,series:[{data:r.slice(0,6).map(p=>({id:p.tag,label:p.tag,value:p.totalCount})),innerRadius:40,paddingAngle:2}]})})}),v.jsxs(re,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",sm:"1fr 1fr"},gap:2},children:[((r==null?void 0:r.slice(0,10))??[]).map(p=>v.jsx(re,{children:v.jsx(kn,{"data-testid":`tag-stat-${p.tag}`,children:v.jsxs(Nn,{children:[v.jsx(te,{variant:"subtitle1",sx:{fontWeight:600},children:p.tag}),v.jsxs(te,{variant:"body2",color:"text.secondary",children:["本: ",p.bookCount," / メモ: ",p.memoCount," / 合計: ",p.totalCount]})]})})},p.tag)),(!r||r.length===0)&&!t&&v.jsx(re,{children:v.jsx(te,{variant:"body2",color:"text.secondary",children:"タグデータがありません。"})})]}),v.jsx(Bc,{sx:{my:2}}),v.jsx(te,{variant:"h6",sx:{mb:1},children:"著者トップ"}),v.jsxs(re,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",sm:"1fr 1fr"},gap:2,mb:2},children:[((o==null?void 0:o.slice(0,10))??[]).map(p=>v.jsx(re,{children:v.jsx(kn,{"data-testid":`author-top-${p.author}`,children:v.jsxs(Nn,{children:[v.jsx(te,{variant:"subtitle1",sx:{fontWeight:600},children:p.author}),v.jsxs(te,{variant:"body2",color:"text.secondary",children:["冊数: ",p.total]})]})})},p.author)),(!o||o.length===0)&&!t&&v.jsx(re,{children:v.jsx(te,{variant:"body2",color:"text.secondary",children:"著者データがありません。"})})]}),v.jsx(te,{variant:"h6",sx:{mb:1},children:"出版社トップ"}),v.jsxs(re,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",sm:"1fr 1fr"},gap:2},children:[((c==null?void 0:c.slice(0,10))??[]).map(p=>v.jsx(re,{children:v.jsx(kn,{"data-testid":`publisher-top-${p.publisher}`,children:v.jsxs(Nn,{children:[v.jsx(te,{variant:"subtitle1",sx:{fontWeight:600},children:p.publisher}),v.jsxs(te,{variant:"body2",color:"text.secondary",children:["冊数: ",p.total]})]})})},p.publisher)),(!c||c.length===0)&&!t&&v.jsx(re,{children:v.jsx(te,{variant:"body2",color:"text.secondary",children:"出版社データがありません。"})})]})]})]})]})}var Yce={};const Uw=()=>typeof process<"u"&&Yce?!0:typeof window<"u"&&window.location?window.location.hostname!=="localhost"&&window.location.hostname!=="127.0.0.1":!1,qce=()=>Uw()?"/project-01-bookmemo":"",ka=t=>{const e=qce(),n=t.startsWith("/")?t:`/${t}`;return`${e}${n}`},Lc={MANIFEST:()=>ka("/manifest.webmanifest"),SW_JS:()=>ka("/sw.js"),VITE_SVG:()=>ka("/vite.svg"),PAPER_TEXTURE:()=>ka("/paper-texture.jpg"),ICON_192:()=>ka("/icons/icon-192x192.png"),ICON_512:()=>ka("/icons/icon-512x512.png"),APPLE_TOUCH_ICON:()=>ka("/icons/apple-touch-icon.png"),APPLE_TOUCH_ICON_512:()=>ka("/icons/apple-touch-icon-512x512.png"),ROOT:()=>ka("/"),ADD:()=>ka("/add"),SEARCH:()=>ka("/search"),IS_PRODUCTION:Uw,IS_DEVELOPMENT:()=>!Uw()},pA=()=>{try{if(typeof Ci>"u"||!Ci.useState)return{isOnline:!0,isInstallable:!1,isInstalled:!1,swRegistration:null,userEngagement:0,lastVisitTime:null,shouldShowInstallPrompt:!1,shouldShowManualInstallGuide:!1,registerServiceWorker:async()=>null,installApp:async()=>{},requestNotificationPermission:async()=>"denied",sendNotification:()=>null,checkForUpdates:async()=>{},clearCache:async()=>{},reloadApp:()=>{},recordInstallPromptDismiss:()=>{}}}catch(R){return console.warn("React context not available in usePWA:",R),{isOnline:!0,isInstallable:!1,isInstalled:!1,swRegistration:null,userEngagement:0,lastVisitTime:null,shouldShowInstallPrompt:!1,shouldShowManualInstallGuide:!1,registerServiceWorker:async()=>null,installApp:async()=>{},requestNotificationPermission:async()=>"denied",sendNotification:()=>null,checkForUpdates:async()=>{},clearCache:async()=>{},reloadApp:()=>{},recordInstallPromptDismiss:()=>{}}}if(!(typeof window<"u"&&typeof navigator<"u"&&"serviceWorker"in navigator&&"PushManager"in window&&!Lc.IS_DEVELOPMENT()))return{isOnline:!0,isInstallable:!1,isInstalled:!1,swRegistration:null,userEngagement:0,lastVisitTime:null,shouldShowInstallPrompt:!1,shouldShowManualInstallGuide:!1,registerServiceWorker:async()=>null,installApp:async()=>{},requestNotificationPermission:async()=>"denied",sendNotification:()=>null,checkForUpdates:async()=>{},clearCache:async()=>{},reloadApp:()=>{},recordInstallPromptDismiss:()=>{}};const[e,n]=M.useState(navigator.onLine),[r,i]=M.useState(null),[a,s]=M.useState(null),[o,c]=M.useState(!1),[d,f]=M.useState(!1),[p,g]=M.useState(0),[y,x]=M.useState(null);M.useEffect(()=>{const R=()=>n(!0),V=()=>n(!1);return window.addEventListener("online",R),window.addEventListener("offline",V),()=>{window.removeEventListener("online",R),window.removeEventListener("offline",V)}},[]),M.useEffect(()=>{if(typeof window>"u")return;const R=()=>{g(L=>L+1)},V=["click","scroll","keydown","touchstart"];return V.forEach(L=>{window.addEventListener(L,R,{passive:!0})}),()=>{V.forEach(L=>{window.removeEventListener(L,R)})}},[]),M.useEffect(()=>{if(typeof localStorage>"u")return;const R=Date.now(),V=localStorage.getItem("bookmemo_last_visit");if(V){if(R-parseInt(V)>1440*60*1e3){const P=parseInt(localStorage.getItem("bookmemo_visit_count")||"0")+1;localStorage.setItem("bookmemo_visit_count",P.toString())}}else localStorage.setItem("bookmemo_visit_count","1");localStorage.setItem("bookmemo_last_visit",R.toString()),x(R)},[]);const _=M.useCallback(async()=>{if(Lc.IS_DEVELOPMENT())return console.log("Service Worker registration skipped in development environment"),null;try{const R=Lc.SW_JS(),V=await navigator.serviceWorker.register(R);return i(V),console.log("Service Worker registered:",V),V.addEventListener("updatefound",()=>{const L=V.installing;L&&L.addEventListener("statechange",()=>{L.state==="installed"&&navigator.serviceWorker.controller&&console.log("New Service Worker available")})}),V}catch(R){return console.error("Service Worker registration failed:",R),console.warn("Service Worker registration failed, but app will continue without PWA features"),null}},[]);M.useEffect(()=>{if(typeof window>"u"||typeof localStorage>"u")return;const R=P=>{P.preventDefault(),s(P),c(!0)},V=()=>{f(!0),c(!1),s(null),console.log("PWA was installed"),localStorage.setItem("bookmemo_installed","true"),localStorage.setItem("bookmemo_install_date",Date.now().toString())};return window.addEventListener("beforeinstallprompt",R),window.addEventListener("appinstalled",V),localStorage.getItem("bookmemo_installed")==="true"&&(f(!0),c(!1)),()=>{window.removeEventListener("beforeinstallprompt",R),window.removeEventListener("appinstalled",V)}},[]);const A=M.useCallback(async()=>{if(a){a.prompt();const{outcome:R}=await a.userChoice;console.log(R==="accepted"?"User accepted the install prompt":"User dismissed the install prompt"),s(null),c(!1)}},[a]),E=M.useCallback(()=>{if(d||!o)return!1;const R=parseInt(localStorage.getItem("bookmemo_visit_count")||"0"),V=parseInt(localStorage.getItem("bookmemo_dismiss_count")||"0");return R>=1&&p>=5&&V<3},[d,o,p]),T=M.useCallback(()=>{if(d)return!1;const R=/iPad|iPhone|iPod/.test(navigator.userAgent),V=/Safari/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent);return R&&V},[d]),C=M.useCallback(()=>{if(typeof localStorage>"u")return;const R=parseInt(localStorage.getItem("bookmemo_dismiss_count")||"0")+1;localStorage.setItem("bookmemo_dismiss_count",R.toString())},[]),D=M.useCallback(async()=>{if(typeof window>"u"||!("Notification"in window))return"denied";try{return await Notification.requestPermission()}catch(R){return console.warn("Notification permission request failed:",R),"denied"}},[]),k=M.useCallback((R,V={})=>{if(typeof window>"u"||!("Notification"in window)||Notification.permission!=="granted")return null;try{const L=Lc.ICON_192();return new Notification(R,{icon:L,badge:L,...V})}catch(L){return console.warn("Notification send failed:",L),null}},[]),B=M.useCallback(async()=>{r&&await r.update()},[r]),O=M.useCallback(async()=>{if(!(typeof window>"u"||!("caches"in window)))try{const R=await caches.keys();await Promise.all(R.map(V=>caches.delete(V)))}catch(R){console.warn("Cache clear failed:",R)}},[]),I=M.useCallback(()=>{window.location.reload()},[]);return{isOnline:e,isInstallable:o,isInstalled:d,swRegistration:r,userEngagement:p,lastVisitTime:y,shouldShowInstallPrompt:E(),shouldShowManualInstallGuide:T(),registerServiceWorker:_,installApp:A,requestNotificationPermission:D,sendNotification:k,checkForUpdates:B,clearCache:O,reloadApp:I,recordInstallPromptDismiss:C}},Xce=()=>{if(!(typeof window<"u"&&"serviceWorker"in navigator&&"PushManager"in window))return null;try{const{isOnline:e,isInstallable:n,isInstalled:r,installApp:i,shouldShowInstallPrompt:a,shouldShowManualInstallGuide:s,recordInstallPromptDismiss:o}=pA(),[c,d]=M.useState(!1),[f,p]=M.useState(!1),[g,y]=M.useState(!1),[x,_]=M.useState(!1);M.useEffect(()=>{p(!e)},[e]);const A=async()=>{try{await i(),d(!1),y(!1)}catch(B){console.error("Installation failed:",B)}},E=()=>{d(!1),o&&o()},T=()=>{y(!1),o&&o()},C=()=>{p(!1)},D=()=>{_(!1),o&&o()},k=[{icon:v.jsx(zN,{}),title:"高速起動",description:"アプリのように素早く起動"},{icon:v.jsx($N,{}),title:"オフライン対応",description:"インターネットなしでも利用可能"},{icon:v.jsx(GN,{}),title:"ホーム画面に追加",description:"いつでも簡単にアクセス"}];return v.jsxs(v.Fragment,{children:[v.jsx(cd,{open:c,anchorOrigin:{vertical:"bottom",horizontal:"center"},sx:{mb:8},children:v.jsx(Ki,{severity:"info",action:v.jsxs(re,{sx:{display:"flex",alignItems:"center",gap:1},children:[v.jsx(Ke,{color:"inherit",size:"small",startIcon:v.jsx(IT,{}),onClick:A,"data-testid":"pwa-install-button",variant:"contained",sx:{backgroundColor:"primary.main",color:"white","&:hover":{backgroundColor:"primary.dark"}},children:"インストール"}),v.jsx(jr,{"aria-label":"close",color:"inherit",size:"small",onClick:E,children:v.jsx(Tg,{fontSize:"inherit"})})]}),sx:{width:"100%"},children:v.jsx(te,{variant:"body2",children:"BookMemoをホーム画面に追加して、より快適にご利用いただけます"})})}),v.jsx(cd,{open:g,anchorOrigin:{vertical:"bottom",horizontal:"center"},sx:{mb:8,width:"100%",maxWidth:"600px"},children:v.jsx(kn,{sx:{width:"100%",boxShadow:3},children:v.jsxs(Nn,{sx:{p:2},children:[v.jsxs(re,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",mb:2},children:[v.jsx(te,{variant:"h6",component:"h2",sx:{fontWeight:"bold"},children:"📱 BookMemoをアプリとしてインストール"}),v.jsx(jr,{size:"small",onClick:T,sx:{mt:-.5},children:v.jsx(Tg,{})})]}),v.jsx(te,{variant:"body2",sx:{mb:2,color:"text.secondary"},children:"より快適な読書メモ管理体験をお届けします"}),v.jsx(i0,{direction:"row",spacing:1,sx:{mb:2,flexWrap:"wrap",gap:1},children:k.map((B,O)=>v.jsx(mn,{icon:B.icon,label:B.title,size:"small",variant:"outlined",sx:{fontSize:"0.75rem"}},O))}),v.jsxs(re,{sx:{display:"flex",gap:1,justifyContent:"flex-end"},children:[v.jsx(Ke,{variant:"outlined",size:"small",onClick:T,children:"後で"}),v.jsx(Ke,{variant:"contained",size:"small",startIcon:v.jsx(IT,{}),onClick:A,sx:{backgroundColor:"primary.main","&:hover":{backgroundColor:"primary.dark"}},children:"今すぐインストール"})]})]})})}),v.jsx(cd,{open:f,anchorOrigin:{vertical:"top",horizontal:"center"},children:v.jsx(Ki,{severity:"warning",icon:v.jsx(WN,{}),action:v.jsx(jr,{"aria-label":"close",color:"inherit",size:"small",onClick:C,children:v.jsx(Tg,{fontSize:"inherit"})}),sx:{width:"100%"},children:v.jsx(te,{variant:"body2",children:"オフラインです。一部の機能が制限される場合があります"})})}),v.jsx(cd,{open:e&&f,anchorOrigin:{vertical:"top",horizontal:"center"},autoHideDuration:3e3,onClose:C,children:v.jsx(Ki,{severity:"success",icon:v.jsx(YN,{}),sx:{width:"100%"},children:v.jsx(te,{variant:"body2",children:"オンラインに復帰しました"})})}),v.jsx(cd,{open:x,anchorOrigin:{vertical:"bottom",horizontal:"center"},sx:{mb:8,width:"100%",maxWidth:"600px"},children:v.jsx(kn,{sx:{width:"100%",boxShadow:3},children:v.jsxs(Nn,{sx:{p:2},children:[v.jsxs(re,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",mb:2},children:[v.jsx(te,{variant:"h6",component:"h2",sx:{fontWeight:"bold"},children:"📱 BookMemoをホーム画面に追加"}),v.jsx(jr,{size:"small",onClick:D,sx:{mt:-.5},children:v.jsx(Tg,{})})]}),v.jsx(te,{variant:"body2",sx:{mb:2,color:"text.secondary"},children:"iPhoneでBookMemoをアプリとして使用するには、以下の手順でホーム画面に追加してください："}),v.jsxs(re,{sx:{mb:2},children:[v.jsx(te,{variant:"body2",sx:{fontWeight:"bold",mb:1},children:"1. 共有ボタンをタップ"}),v.jsx(te,{variant:"body2",sx:{mb:1,pl:2},children:"Safariの下部にある「共有」ボタン（□↑）をタップします"}),v.jsx(te,{variant:"body2",sx:{fontWeight:"bold",mb:1},children:"2. 「ホーム画面に追加」を選択"}),v.jsx(te,{variant:"body2",sx:{mb:1,pl:2},children:"共有メニューから「ホーム画面に追加」を選択します"}),v.jsx(te,{variant:"body2",sx:{fontWeight:"bold",mb:1},children:"3. 追加を確認"}),v.jsx(te,{variant:"body2",sx:{pl:2},children:"「追加」をタップしてホーム画面に追加します"})]}),v.jsx(i0,{direction:"row",spacing:1,sx:{mb:2,flexWrap:"wrap",gap:1},children:k.map((B,O)=>v.jsx(mn,{icon:B.icon,label:B.title,size:"small",variant:"outlined",sx:{fontSize:"0.75rem"}},O))}),v.jsxs(re,{sx:{display:"flex",gap:1,justifyContent:"flex-end"},children:[v.jsx(Ke,{variant:"outlined",size:"small",onClick:D,children:"後で"}),v.jsx(Ke,{variant:"contained",size:"small",onClick:D,sx:{backgroundColor:"primary.main","&:hover":{backgroundColor:"primary.dark"}},children:"手順を確認しました"})]})]})})})]})}catch(e){return console.warn("PWA hook error in PWAInstallPrompt, skipping PWA features:",e),null}},Kce=()=>{try{return!(typeof Ci>"u"||!Ci.useState||!Ci.useContext||typeof window>"u"||typeof navigator>"u")}catch(t){return console.warn("React context check failed:",t),!1}},Qce=t=>function(n){const[r,i]=Ci.useState(!1),[a,s]=Ci.useState(0),o=20,c=50;return Ci.useEffect(()=>{const d=()=>{if(Kce()){i(!0);return}a<o?(s(f=>f+1),setTimeout(d,c)):(console.warn("React context initialization timeout, proceeding with fallback"),i(!0))};d()},[a]),r?v.jsx(t,{...n}):v.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",fontSize:"1rem",color:"#666"},children:"読み込み中..."})},Zce=sR({palette:{primary:{main:"#1976d2"},secondary:{main:"#dc004e"}},typography:{h4:{fontSize:"1.5rem","@media (min-width:600px)":{fontSize:"2rem"}},h6:{fontSize:"1rem","@media (min-width:600px)":{fontSize:"1.1rem"}},body2:{fontSize:"0.8rem","@media (min-width:600px)":{fontSize:"0.9rem"}},caption:{fontSize:"0.7rem","@media (min-width:600px)":{fontSize:"0.8rem"}}},components:{MuiCard:{styleOverrides:{root:{height:"100%",display:"flex",flexDirection:"column"}}},MuiCardContent:{styleOverrides:{root:{flex:1,display:"flex",flexDirection:"column",padding:"12px","@media (min-width:600px)":{padding:"16px"}}}},MuiTextField:{styleOverrides:{root:{"& .MuiInputBase-root":{fontSize:"0.9rem","@media (min-width:600px)":{fontSize:"1rem"}}}}},MuiButton:{styleOverrides:{root:{fontSize:"0.9rem",padding:"8px 16px","@media (min-width:600px)":{fontSize:"1rem",padding:"10px 20px"}}}},MuiChip:{styleOverrides:{root:{fontSize:"0.7rem",height:"20px","@media (min-width:600px)":{fontSize:"0.8rem",height:"24px"}}}},MuiBottomNavigation:{styleOverrides:{root:{height:"64px","@media (min-width:600px)":{height:"72px"}}}},MuiBottomNavigationAction:{styleOverrides:{root:{fontSize:"0.7rem","@media (min-width:600px)":{fontSize:"0.8rem"}}}}}}),uo={saveError:(t,e="")=>{try{const n={timestamp:new Date().toISOString(),error:(t==null?void 0:t.message)||(t==null?void 0:t.toString())||"Unknown error",stack:(t==null?void 0:t.stack)||"",context:e,url:typeof window<"u"?window.location.href:"",userAgent:typeof navigator<"u"?navigator.userAgent:""},r=JSON.parse(localStorage.getItem("bookmemo_error_logs")||"[]");return r.push(n),r.length>10&&r.splice(0,r.length-10),localStorage.setItem("bookmemo_error_logs",JSON.stringify(r)),console.error("🔴 PERSISTENT ERROR LOG:",n),n}catch(n){console.error("Error saving error log:",n)}},getErrors:()=>{try{return JSON.parse(localStorage.getItem("bookmemo_error_logs")||"[]")}catch{return[]}},clearErrors:()=>{localStorage.removeItem("bookmemo_error_logs")}},Jce=()=>{typeof window>"u"||(window.addEventListener("error",t=>{uo.saveError(t.error,"Global Error Handler")}),window.addEventListener("unhandledrejection",t=>{uo.saveError(t.reason,"Unhandled Promise Rejection")}),window.addEventListener("beforeunload",()=>{uo.getErrors().length>0&&console.log("📋 Error logs available in localStorage: bookmemo_error_logs")}))};function Mh({children:t}){const{user:e,loading:n}=rr(),r=Jc();return M.useEffect(()=>{!n&&!e&&console.warn("🔐 Authentication required for:",r.pathname)},[e,n,r.pathname]),n?(console.log("⏳ Loading authentication state..."),v.jsx("div",{children:"Loading..."})):e?t:(console.warn("🚫 Unauthenticated access attempt, redirecting to login"),v.jsx(lR,{to:"/login"}))}function eue(){const t=Zc(),e=Jc(),[n,r]=M.useState(0);return M.useEffect(()=>{e.pathname.startsWith("/add")?r(1):e.pathname.startsWith("/tags")?r(2):e.pathname.startsWith("/stats")?r(3):r(0)},[e.pathname]),v.jsxs(XN,{value:n,onChange:(i,a)=>{r(a),a===0&&t("/"),a===1&&t("/add"),a===2&&t("/tags"),a===3&&t("/stats")},showLabels:!0,sx:{position:"fixed",bottom:0,left:0,right:0,zIndex:1e3,backgroundColor:"background.paper",borderTop:1,borderColor:"divider",height:{xs:"64px",sm:"72px"},"& .MuiBottomNavigationAction-root":{minWidth:{xs:"60px",sm:"80px"},padding:{xs:"6px 4px",sm:"8px 6px"}},"& .MuiBottomNavigationAction-label":{fontSize:{xs:"0.7rem",sm:"0.8rem"},marginTop:{xs:"2px",sm:"4px"}},"& .MuiBottomNavigationAction-iconOnly":{fontSize:{xs:"1.5rem",sm:"1.75rem"}}},children:[v.jsx(Cg,{label:"本一覧",icon:v.jsx(KN,{}),"data-testid":"bottom-nav-list",sx:{"&.Mui-selected":{color:"primary.main"}}}),v.jsx(Cg,{label:"本を追加",icon:v.jsx(QN,{}),"data-testid":"bottom-nav-add",sx:{"&.Mui-selected":{color:"primary.main"}}}),v.jsx(Cg,{label:"検索・タグ",icon:v.jsx(Hw,{}),"data-testid":"bottom-nav-search",sx:{"&.Mui-selected":{color:"primary.main"}}}),v.jsx(Cg,{label:"統計",icon:v.jsx(ZN,{}),"data-testid":"bottom-nav-stats",sx:{"&.Mui-selected":{color:"primary.main"}}})]})}function tue(){const t=Jc(),{user:e}=rr(),{setGlobalError:n}=M.useContext(ri),{isStandalone:r}=pA(),{handleBack:i,handleForward:a}=SP(),s=t.pathname.startsWith("/login")||t.pathname.startsWith("/signup")||!e;return M.useEffect(()=>{if(!r)return;let o=0,c=0,d=0,f=0,p=!1;const g=100,y=A=>{o=A.changedTouches[0].screenX,d=A.changedTouches[0].screenY;const E=document.elementFromPoint(o,d);p=(E==null?void 0:E.closest("[data-allow-local-swipe]"))!==null},x=A=>{c=A.changedTouches[0].screenX,f=A.changedTouches[0].screenY,_()},_=()=>{const A=c-o,E=Math.abs(f-d),T=g;p||Math.abs(A)>T&&Math.abs(A)>E&&(A>0?i():a())};return document.addEventListener("touchstart",y,{passive:!0}),document.addEventListener("touchend",x,{passive:!0}),()=>{document.removeEventListener("touchstart",y),document.removeEventListener("touchend",x)}},[r,i,a]),M.useEffect(()=>{Jce()},[]),M.useEffect(()=>{const o=document.getElementById("app-scroll-container");o&&o.scrollTo(0,0)},[t.pathname]),M.useEffect(()=>{const o=p=>{console.error("Global error caught:",p.error),uo.saveError(p.error,"AppRoutes Global Error"),p.error&&p.error.message&&p.error.message.includes("404")?n&&n("リソースが見つかりません。ページを再読み込みしてください。"):n&&n("予期しないエラーが発生しました。ページを再読み込みしてください。")},c=p=>{console.error("Unhandled promise rejection:",p.reason),uo.saveError(p.reason,"AppRoutes Unhandled Promise Rejection"),p.reason&&p.reason.message&&(p.reason.message.includes("404")||p.reason.message.includes("Failed to fetch")),n&&n("ネットワークエラーが発生しました。接続を確認してください。")},d=p=>{p.target&&p.target.src&&(console.error("Resource loading error:",p.target.src),uo.saveError(new Error(`Resource loading failed: ${p.target.src}`),"AppRoutes Resource Error"),(p.target.src.includes("sw.js")||p.target.src.includes("manifest.webmanifest"))&&n&&n("アプリの設定ファイルの読み込みに失敗しました。ページを再読み込みしてください。"))},f=p=>{p.target&&p.target.src&&p.target.src.includes("404")&&(console.error("404 Error detected:",p.target.src),uo.saveError(new Error(`404 Error: ${p.target.src} - SPA routing issue detected`),"AppRoutes 404 Error"),n&&n("ページが見つかりません。SPAルーティングの問題の可能性があります。ページを再読み込みしてください。"))};return window.addEventListener("error",f,!0),window.addEventListener("error",o),window.addEventListener("unhandledrejection",c),window.addEventListener("error",d,!0),()=>{window.removeEventListener("error",o),window.removeEventListener("unhandledrejection",c),window.removeEventListener("error",d,!0)}},[n]),v.jsxs(v.Fragment,{children:[v.jsx(re,{id:"app-scroll-container",sx:{height:"100vh",overflowY:"auto",WebkitOverflowScrolling:"touch",pb:s?0:{xs:"64px",sm:"72px"},background:`
            url('${Lc.PAPER_TEXTURE()}'),
            #f5f5dc
          `,backgroundSize:"100% auto, cover",backgroundRepeat:"repeat-y, no-repeat",backgroundPosition:"center top, center",backgroundAttachment:"fixed",minHeight:"100vh",width:"100%"},children:v.jsxs(i5,{children:[v.jsx(al,{path:"/login",element:v.jsx(bj,{})}),v.jsx(al,{path:"/signup",element:v.jsx(Aj,{})}),v.jsx(al,{path:"/",element:v.jsx(Mh,{children:v.jsx(Oj,{})})}),v.jsx(al,{path:"/add",element:v.jsx(Mh,{children:v.jsx(C$,{})})}),v.jsx(al,{path:"/book/:id",element:v.jsx(Mh,{children:v.jsx(mJ,{})})}),v.jsx(al,{path:"/tags",element:v.jsx(Mh,{children:v.jsx(UJ,{})})}),v.jsx(al,{path:"/stats",element:v.jsx(Mh,{children:v.jsx(Wce,{})})}),v.jsx(al,{path:"*",element:v.jsx(lR,{to:"/"})})]})}),!s&&v.jsx(eue,{})]})}function nue(){return v.jsx(_j,{children:v.jsx(Cj,{children:v.jsx(r5,{children:v.jsxs(oR,{theme:Zce,children:[v.jsx(qN,{}),v.jsx(rue,{}),v.jsx(tue,{}),typeof window<"u"&&"serviceWorker"in navigator&&!Lc.IS_DEVELOPMENT()&&v.jsx(Xce,{})]})})})})}function rue(){if(Lc.IS_DEVELOPMENT()||!("serviceWorker"in navigator&&"PushManager"in window))return null;try{const{registerServiceWorker:e}=pA();return M.useEffect(()=>{e().catch(n=>{console.warn("Service Worker registration failed in PWAProvider:",n),uo.saveError(n,"PWAProvider Service Worker Registration")})},[e]),null}catch(e){return console.warn("PWA hook error, skipping PWA initialization:",e),uo.saveError(e,"PWAProvider Hook Error"),null}}const iue=Qce(nue),aue=sR({palette:{mode:"light",background:{default:"#f5f7fa",paper:"#fff"},primary:{main:"#1976d2"},secondary:{main:"#f50057"},text:{primary:"#222"}},typography:{fontFamily:"Segoe UI, Helvetica Neue, Arial, sans-serif",h1:{fontSize:"1.8rem","@media (min-width:600px)":{fontSize:"2.5rem"}},h2:{fontSize:"1.5rem","@media (min-width:600px)":{fontSize:"2rem"}},h3:{fontSize:"1.3rem","@media (min-width:600px)":{fontSize:"1.6rem"}},h4:{fontSize:"1.1rem","@media (min-width:600px)":{fontSize:"1.4rem"}},h5:{fontSize:"1rem","@media (min-width:600px)":{fontSize:"1.2rem"}},h6:{fontSize:"0.9rem","@media (min-width:600px)":{fontSize:"1.1rem"}},body1:{fontSize:"0.9rem","@media (min-width:600px)":{fontSize:"1rem"}},body2:{fontSize:"0.8rem","@media (min-width:600px)":{fontSize:"0.9rem"}}},components:{MuiTextField:{styleOverrides:{root:{marginBottom:"8px","@media (min-width:600px)":{marginBottom:"16px"}}},defaultProps:{size:"small",margin:"dense"}},MuiButton:{styleOverrides:{root:{fontSize:"0.9rem",padding:"8px 16px","@media (min-width:600px)":{fontSize:"1rem",padding:"10px 20px"}}},defaultProps:{size:"medium"}},MuiCard:{styleOverrides:{root:{marginBottom:"8px","@media (min-width:600px)":{marginBottom:"16px"}}}},MuiCardContent:{styleOverrides:{root:{padding:"12px","@media (min-width:600px)":{padding:"16px"},"&:last-child":{paddingBottom:"12px","@media (min-width:600px)":{paddingBottom:"16px"}}}}},MuiPaper:{styleOverrides:{root:{padding:"12px","@media (min-width:600px)":{padding:"16px"}}}},MuiAutocomplete:{styleOverrides:{root:{marginBottom:"8px","@media (min-width:600px)":{marginBottom:"16px"}}}},MuiChip:{styleOverrides:{root:{fontSize:"0.8rem",height:"24px","@media (min-width:600px)":{fontSize:"0.9rem",height:"32px"}}}},MuiDialog:{styleOverrides:{paper:{margin:"16px",width:"calc(100% - 32px)",maxWidth:"400px","@media (min-width:600px)":{margin:"32px",width:"calc(100% - 64px)",maxWidth:"600px"}}}},MuiBottomNavigation:{styleOverrides:{root:{height:"56px","@media (min-width:600px)":{height:"64px"}}}}},breakpoints:{values:{xs:0,sm:600,md:900,lg:1200,xl:1536}},spacing:t=>`${4*t}px`});c5.createRoot(document.getElementById("root")).render(v.jsx(M.StrictMode,{children:v.jsx(oR,{theme:aue,children:v.jsx(iue,{})})}));

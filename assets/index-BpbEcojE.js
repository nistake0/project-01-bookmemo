var Q8=Object.defineProperty;var Z8=(n,e,t)=>e in n?Q8(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var ye=(n,e,t)=>Z8(n,typeof e!="symbol"?e+"":e,t);import{r as V,j as x,B as de,T as se,a as kt,b as st,C as jn,c as Un,d as J8,e as In,P as pa,R as Li,D as ja,f as Ss,g as Ua,A as lo,h as Ha,i as hT,I as Jr,k as h1,l as mm,m as ka,n as po,o as eN,M as tN,u as ym,p as kd,q as pT,S as t0,E as x2,s as gT,F as ga,t as w2,v as nN,w as od,K as rN,x as iN,y as Hn,_ as H,z as Ne,G as xt,H as kl,J as Dt,L as Rt,N as wa,O as Et,Q as Ut,U as Me,V as yt,W as Nd,X as Ve,Y as Wh,Z as ti,$ as Gn,a0 as Ts,a1 as V3,a2 as aN,a3 as Ad,a4 as F3,a5 as sN,a6 as oN,a7 as _a,a8 as E0,a9 as no,aa as lN,ab as cN,ac as co,ad as Ic,ae as Kc,af as vm,ag as j3,ah as uN,ai as dN,aj as fN,ak as U3,al as H3,am as z3,an as mT,ao as hN,ap as Lc,aq as ne,ar as $3,as as yl,at as G3,au as pN,av as gN,aw as yT,ax as mN,ay as yN,az as vN,aA as xN,aB as wN,aC as Nw,aD as _N,aE as W3,aF as Y3,aG as bN,aH as AN,aI as EN,aJ as SN,aK as Ag,aL as TN,aM as CN,aN as q3,aO as X3,aP as IN,aQ as DN,aR as mh,aS as RN,aT as MN,aU as ON,aV as PN,aW as kN}from"./mui-vendor-CWN2u8l0.js";import{r as Lw,a as NN,g as LN}from"./react-vendor-DJG_os-6.js";import{u as S0,a as vT,b as K3,c as BN,d as xm,H as VN,R as FN,e as to,N as Q3}from"./utils-vendor-BKcajzmI.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function t(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=t(i);fetch(i.href,a)}})();var vx={exports:{}},yh={},xx={exports:{}},wx={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xT;function jN(){return xT||(xT=1,function(n){function e(G,Y){var Q=G.length;G.push(Y);e:for(;0<Q;){var Z=Q-1>>>1,fe=G[Z];if(0<i(fe,Y))G[Z]=Y,G[Q]=fe,Q=Z;else break e}}function t(G){return G.length===0?null:G[0]}function r(G){if(G.length===0)return null;var Y=G[0],Q=G.pop();if(Q!==Y){G[0]=Q;e:for(var Z=0,fe=G.length,ge=fe>>>1;Z<ge;){var we=2*(Z+1)-1,Ae=G[we],Pe=we+1,Re=G[Pe];if(0>i(Ae,Q))Pe<fe&&0>i(Re,Ae)?(G[Z]=Re,G[Pe]=Q,Z=Pe):(G[Z]=Ae,G[we]=Q,Z=we);else if(Pe<fe&&0>i(Re,Q))G[Z]=Re,G[Pe]=Q,Z=Pe;else break e}}return Y}function i(G,Y){var Q=G.sortIndex-Y.sortIndex;return Q!==0?Q:G.id-Y.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var s=Date,o=s.now();n.unstable_now=function(){return s.now()-o}}var c=[],d=[],f=1,p=null,g=3,y=!1,v=!1,b=!1,A=!1,E=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;function D(G){for(var Y=t(d);Y!==null;){if(Y.callback===null)r(d);else if(Y.startTime<=G)r(d),Y.sortIndex=Y.expirationTime,e(c,Y);else break;Y=t(d)}}function O(G){if(b=!1,D(G),!v)if(t(c)!==null)v=!0,N||(N=!0,k());else{var Y=t(d);Y!==null&&X(O,Y.startTime-G)}}var N=!1,M=-1,R=5,I=-1;function B(){return A?!0:!(n.unstable_now()-I<R)}function L(){if(A=!1,N){var G=n.unstable_now();I=G;var Y=!0;try{e:{v=!1,b&&(b=!1,T(M),M=-1),y=!0;var Q=g;try{t:{for(D(G),p=t(c);p!==null&&!(p.expirationTime>G&&B());){var Z=p.callback;if(typeof Z=="function"){p.callback=null,g=p.priorityLevel;var fe=Z(p.expirationTime<=G);if(G=n.unstable_now(),typeof fe=="function"){p.callback=fe,D(G),Y=!0;break t}p===t(c)&&r(c),D(G)}else r(c);p=t(c)}if(p!==null)Y=!0;else{var ge=t(d);ge!==null&&X(O,ge.startTime-G),Y=!1}}break e}finally{p=null,g=Q,y=!1}Y=void 0}}finally{Y?k():N=!1}}}var k;if(typeof C=="function")k=function(){C(L)};else if(typeof MessageChannel<"u"){var F=new MessageChannel,q=F.port2;F.port1.onmessage=L,k=function(){q.postMessage(null)}}else k=function(){E(L,0)};function X(G,Y){M=E(function(){G(n.unstable_now())},Y)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(G){G.callback=null},n.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<G?Math.floor(1e3/G):5},n.unstable_getCurrentPriorityLevel=function(){return g},n.unstable_next=function(G){switch(g){case 1:case 2:case 3:var Y=3;break;default:Y=g}var Q=g;g=Y;try{return G()}finally{g=Q}},n.unstable_requestPaint=function(){A=!0},n.unstable_runWithPriority=function(G,Y){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var Q=g;g=G;try{return Y()}finally{g=Q}},n.unstable_scheduleCallback=function(G,Y,Q){var Z=n.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?Z+Q:Z):Q=Z,G){case 1:var fe=-1;break;case 2:fe=250;break;case 5:fe=1073741823;break;case 4:fe=1e4;break;default:fe=5e3}return fe=Q+fe,G={id:f++,callback:Y,priorityLevel:G,startTime:Q,expirationTime:fe,sortIndex:-1},Q>Z?(G.sortIndex=Q,e(d,G),t(c)===null&&G===t(d)&&(b?(T(M),M=-1):b=!0,X(O,Q-Z))):(G.sortIndex=fe,e(c,G),v||y||(v=!0,N||(N=!0,k()))),G},n.unstable_shouldYield=B,n.unstable_wrapCallback=function(G){var Y=g;return function(){var Q=g;g=Y;try{return G.apply(this,arguments)}finally{g=Q}}}}(wx)),wx}var wT;function UN(){return wT||(wT=1,xx.exports=jN()),xx.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _T;function HN(){if(_T)return yh;_T=1;var n=UN(),e=Lw(),t=NN();function r(l){var u="https://react.dev/errors/"+l;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var h=2;h<arguments.length;h++)u+="&args[]="+encodeURIComponent(arguments[h])}return"Minified React error #"+l+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(l){return!(!l||l.nodeType!==1&&l.nodeType!==9&&l.nodeType!==11)}function a(l){var u=l,h=l;if(l.alternate)for(;u.return;)u=u.return;else{l=u;do u=l,(u.flags&4098)!==0&&(h=u.return),l=u.return;while(l)}return u.tag===3?h:null}function s(l){if(l.tag===13){var u=l.memoizedState;if(u===null&&(l=l.alternate,l!==null&&(u=l.memoizedState)),u!==null)return u.dehydrated}return null}function o(l){if(a(l)!==l)throw Error(r(188))}function c(l){var u=l.alternate;if(!u){if(u=a(l),u===null)throw Error(r(188));return u!==l?null:l}for(var h=l,m=u;;){var _=h.return;if(_===null)break;var S=_.alternate;if(S===null){if(m=_.return,m!==null){h=m;continue}break}if(_.child===S.child){for(S=_.child;S;){if(S===h)return o(_),l;if(S===m)return o(_),u;S=S.sibling}throw Error(r(188))}if(h.return!==m.return)h=_,m=S;else{for(var U=!1,z=_.child;z;){if(z===h){U=!0,h=_,m=S;break}if(z===m){U=!0,m=_,h=S;break}z=z.sibling}if(!U){for(z=S.child;z;){if(z===h){U=!0,h=S,m=_;break}if(z===m){U=!0,m=S,h=_;break}z=z.sibling}if(!U)throw Error(r(189))}}if(h.alternate!==m)throw Error(r(190))}if(h.tag!==3)throw Error(r(188));return h.stateNode.current===h?l:u}function d(l){var u=l.tag;if(u===5||u===26||u===27||u===6)return l;for(l=l.child;l!==null;){if(u=d(l),u!==null)return u;l=l.sibling}return null}var f=Object.assign,p=Symbol.for("react.element"),g=Symbol.for("react.transitional.element"),y=Symbol.for("react.portal"),v=Symbol.for("react.fragment"),b=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),E=Symbol.for("react.provider"),T=Symbol.for("react.consumer"),C=Symbol.for("react.context"),D=Symbol.for("react.forward_ref"),O=Symbol.for("react.suspense"),N=Symbol.for("react.suspense_list"),M=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),I=Symbol.for("react.activity"),B=Symbol.for("react.memo_cache_sentinel"),L=Symbol.iterator;function k(l){return l===null||typeof l!="object"?null:(l=L&&l[L]||l["@@iterator"],typeof l=="function"?l:null)}var F=Symbol.for("react.client.reference");function q(l){if(l==null)return null;if(typeof l=="function")return l.$$typeof===F?null:l.displayName||l.name||null;if(typeof l=="string")return l;switch(l){case v:return"Fragment";case A:return"Profiler";case b:return"StrictMode";case O:return"Suspense";case N:return"SuspenseList";case I:return"Activity"}if(typeof l=="object")switch(l.$$typeof){case y:return"Portal";case C:return(l.displayName||"Context")+".Provider";case T:return(l._context.displayName||"Context")+".Consumer";case D:var u=l.render;return l=l.displayName,l||(l=u.displayName||u.name||"",l=l!==""?"ForwardRef("+l+")":"ForwardRef"),l;case M:return u=l.displayName||null,u!==null?u:q(l.type)||"Memo";case R:u=l._payload,l=l._init;try{return q(l(u))}catch{}}return null}var X=Array.isArray,G=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Y=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Q={pending:!1,data:null,method:null,action:null},Z=[],fe=-1;function ge(l){return{current:l}}function we(l){0>fe||(l.current=Z[fe],Z[fe]=null,fe--)}function Ae(l,u){fe++,Z[fe]=l.current,l.current=u}var Pe=ge(null),Re=ge(null),He=ge(null),Ue=ge(null);function Qe(l,u){switch(Ae(He,u),Ae(Re,l),Ae(Pe,null),u.nodeType){case 9:case 11:l=(l=u.documentElement)&&(l=l.namespaceURI)?US(l):0;break;default:if(l=u.tagName,u=u.namespaceURI)u=US(u),l=HS(u,l);else switch(l){case"svg":l=1;break;case"math":l=2;break;default:l=0}}we(Pe),Ae(Pe,l)}function ae(){we(Pe),we(Re),we(He)}function me(l){l.memoizedState!==null&&Ae(Ue,l);var u=Pe.current,h=HS(u,l.type);u!==h&&(Ae(Re,l),Ae(Pe,h))}function he(l){Re.current===l&&(we(Pe),we(Re)),Ue.current===l&&(we(Ue),dh._currentValue=Q)}var te=Object.prototype.hasOwnProperty,Le=n.unstable_scheduleCallback,ve=n.unstable_cancelCallback,je=n.unstable_shouldYield,De=n.unstable_requestPaint,Ce=n.unstable_now,We=n.unstable_getCurrentPriorityLevel,$e=n.unstable_ImmediatePriority,Ie=n.unstable_UserBlockingPriority,Oe=n.unstable_NormalPriority,ut=n.unstable_LowPriority,wt=n.unstable_IdlePriority,pn=n.log,Dn=n.unstable_setDisableYieldValue,tt=null,rt=null;function bn(l){if(typeof pn=="function"&&Dn(l),rt&&typeof rt.setStrictMode=="function")try{rt.setStrictMode(tt,l)}catch{}}var Xe=Math.clz32?Math.clz32:Jt,ht=Math.log,Nt=Math.LN2;function Jt(l){return l>>>=0,l===0?32:31-(ht(l)/Nt|0)|0}var xn=256,An=4194304;function Yt(l){var u=l&42;if(u!==0)return u;switch(l&-l){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return l&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return l}}function Hr(l,u,h){var m=l.pendingLanes;if(m===0)return 0;var _=0,S=l.suspendedLanes,U=l.pingedLanes;l=l.warmLanes;var z=m&134217727;return z!==0?(m=z&~S,m!==0?_=Yt(m):(U&=z,U!==0?_=Yt(U):h||(h=z&~l,h!==0&&(_=Yt(h))))):(z=m&~S,z!==0?_=Yt(z):U!==0?_=Yt(U):h||(h=m&~l,h!==0&&(_=Yt(h)))),_===0?0:u!==0&&u!==_&&(u&S)===0&&(S=_&-_,h=u&-u,S>=h||S===32&&(h&4194048)!==0)?u:_}function pt(l,u){return(l.pendingLanes&~(l.suspendedLanes&~l.pingedLanes)&u)===0}function kn(l,u){switch(l){case 1:case 2:case 4:case 8:case 64:return u+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Yn(){var l=xn;return xn<<=1,(xn&4194048)===0&&(xn=256),l}function zr(){var l=An;return An<<=1,(An&62914560)===0&&(An=4194304),l}function mi(l){for(var u=[],h=0;31>h;h++)u.push(l);return u}function nr(l,u){l.pendingLanes|=u,u!==268435456&&(l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0)}function Hl(l,u,h,m,_,S){var U=l.pendingLanes;l.pendingLanes=h,l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0,l.expiredLanes&=h,l.entangledLanes&=h,l.errorRecoveryDisabledLanes&=h,l.shellSuspendCounter=0;var z=l.entanglements,K=l.expirationTimes,oe=l.hiddenUpdates;for(h=U&~h;0<h;){var _e=31-Xe(h),Se=1<<_e;z[_e]=0,K[_e]=-1;var ce=oe[_e];if(ce!==null)for(oe[_e]=null,_e=0;_e<ce.length;_e++){var ue=ce[_e];ue!==null&&(ue.lane&=-536870913)}h&=~Se}m!==0&&Qi(l,m,0),S!==0&&_===0&&l.tag!==0&&(l.suspendedLanes|=S&~(U&~u))}function Qi(l,u,h){l.pendingLanes|=u,l.suspendedLanes&=~u;var m=31-Xe(u);l.entangledLanes|=u,l.entanglements[m]=l.entanglements[m]|1073741824|h&4194090}function lu(l,u){var h=l.entangledLanes|=u;for(l=l.entanglements;h;){var m=31-Xe(h),_=1<<m;_&u|l[m]&u&&(l[m]|=u),h&=~_}}function Ms(l){switch(l){case 2:l=1;break;case 8:l=4;break;case 32:l=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:l=128;break;case 268435456:l=134217728;break;default:l=0}return l}function gn(l){return l&=-l,2<l?8<l?(l&134217727)!==0?32:268435456:8:2}function rr(){var l=Y.p;return l!==0?l:(l=window.event,l===void 0?32:oT(l.type))}function zl(l,u){var h=Y.p;try{return Y.p=l,u()}finally{Y.p=h}}var Rn=Math.random().toString(36).slice(2),mr="__reactFiber$"+Rn,ir="__reactProps$"+Rn,Zi="__reactContainer$"+Rn,mf="__reactEvents$"+Rn,_y="__reactListeners$"+Rn,Oo="__reactHandles$"+Rn,rp="__reactResources$"+Rn,$l="__reactMarker$"+Rn;function Po(l){delete l[mr],delete l[ir],delete l[mf],delete l[_y],delete l[Oo]}function Os(l){var u=l[mr];if(u)return u;for(var h=l.parentNode;h;){if(u=h[Zi]||h[mr]){if(h=u.alternate,u.child!==null||h!==null&&h.child!==null)for(l=WS(l);l!==null;){if(h=l[mr])return h;l=WS(l)}return u}l=h,h=l.parentNode}return null}function qa(l){if(l=l[mr]||l[Zi]){var u=l.tag;if(u===5||u===6||u===13||u===26||u===27||u===3)return l}return null}function Xa(l){var u=l.tag;if(u===5||u===26||u===27||u===6)return l.stateNode;throw Error(r(33))}function yi(l){var u=l[rp];return u||(u=l[rp]={hoistableStyles:new Map,hoistableScripts:new Map}),u}function qn(l){l[$l]=!0}var yf=new Set,cu={};function Aa(l,u){Ps(l,u),Ps(l+"Capture",u)}function Ps(l,u){for(cu[l]=u,l=0;l<u.length;l++)yf.add(u[l])}var ip=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ap={},Gl={};function sp(l){return te.call(Gl,l)?!0:te.call(ap,l)?!1:ip.test(l)?Gl[l]=!0:(ap[l]=!0,!1)}function ko(l,u,h){if(sp(u))if(h===null)l.removeAttribute(u);else{switch(typeof h){case"undefined":case"function":case"symbol":l.removeAttribute(u);return;case"boolean":var m=u.toLowerCase().slice(0,5);if(m!=="data-"&&m!=="aria-"){l.removeAttribute(u);return}}l.setAttribute(u,""+h)}}function Ka(l,u,h){if(h===null)l.removeAttribute(u);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(u);return}l.setAttribute(u,""+h)}}function $r(l,u,h,m){if(m===null)l.removeAttribute(h);else{switch(typeof m){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(h);return}l.setAttributeNS(u,h,""+m)}}var Wl,op;function ks(l){if(Wl===void 0)try{throw Error()}catch(h){var u=h.stack.trim().match(/\n( *(at )?)/);Wl=u&&u[1]||"",op=-1<h.stack.indexOf(`
    at`)?" (<anonymous>)":-1<h.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Wl+l+op}var uu=!1;function du(l,u){if(!l||uu)return"";uu=!0;var h=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var m={DetermineComponentFrameRoot:function(){try{if(u){var Se=function(){throw Error()};if(Object.defineProperty(Se.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Se,[])}catch(ue){var ce=ue}Reflect.construct(l,[],Se)}else{try{Se.call()}catch(ue){ce=ue}l.call(Se.prototype)}}else{try{throw Error()}catch(ue){ce=ue}(Se=l())&&typeof Se.catch=="function"&&Se.catch(function(){})}}catch(ue){if(ue&&ce&&typeof ue.stack=="string")return[ue.stack,ce.stack]}return[null,null]}};m.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var _=Object.getOwnPropertyDescriptor(m.DetermineComponentFrameRoot,"name");_&&_.configurable&&Object.defineProperty(m.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var S=m.DetermineComponentFrameRoot(),U=S[0],z=S[1];if(U&&z){var K=U.split(`
`),oe=z.split(`
`);for(_=m=0;m<K.length&&!K[m].includes("DetermineComponentFrameRoot");)m++;for(;_<oe.length&&!oe[_].includes("DetermineComponentFrameRoot");)_++;if(m===K.length||_===oe.length)for(m=K.length-1,_=oe.length-1;1<=m&&0<=_&&K[m]!==oe[_];)_--;for(;1<=m&&0<=_;m--,_--)if(K[m]!==oe[_]){if(m!==1||_!==1)do if(m--,_--,0>_||K[m]!==oe[_]){var _e=`
`+K[m].replace(" at new "," at ");return l.displayName&&_e.includes("<anonymous>")&&(_e=_e.replace("<anonymous>",l.displayName)),_e}while(1<=m&&0<=_);break}}}finally{uu=!1,Error.prepareStackTrace=h}return(h=l?l.displayName||l.name:"")?ks(h):""}function vf(l){switch(l.tag){case 26:case 27:case 5:return ks(l.type);case 16:return ks("Lazy");case 13:return ks("Suspense");case 19:return ks("SuspenseList");case 0:case 15:return du(l.type,!1);case 11:return du(l.type.render,!1);case 1:return du(l.type,!0);case 31:return ks("Activity");default:return""}}function fu(l){try{var u="";do u+=vf(l),l=l.return;while(l);return u}catch(h){return`
Error generating stack: `+h.message+`
`+h.stack}}function vi(l){switch(typeof l){case"bigint":case"boolean":case"number":case"string":case"undefined":return l;case"object":return l;default:return""}}function xf(l){var u=l.type;return(l=l.nodeName)&&l.toLowerCase()==="input"&&(u==="checkbox"||u==="radio")}function by(l){var u=xf(l)?"checked":"value",h=Object.getOwnPropertyDescriptor(l.constructor.prototype,u),m=""+l[u];if(!l.hasOwnProperty(u)&&typeof h<"u"&&typeof h.get=="function"&&typeof h.set=="function"){var _=h.get,S=h.set;return Object.defineProperty(l,u,{configurable:!0,get:function(){return _.call(this)},set:function(U){m=""+U,S.call(this,U)}}),Object.defineProperty(l,u,{enumerable:h.enumerable}),{getValue:function(){return m},setValue:function(U){m=""+U},stopTracking:function(){l._valueTracker=null,delete l[u]}}}}function hu(l){l._valueTracker||(l._valueTracker=by(l))}function wf(l){if(!l)return!1;var u=l._valueTracker;if(!u)return!0;var h=u.getValue(),m="";return l&&(m=xf(l)?l.checked?"true":"false":l.value),l=m,l!==h?(u.setValue(l),!0):!1}function Yl(l){if(l=l||(typeof document<"u"?document:void 0),typeof l>"u")return null;try{return l.activeElement||l.body}catch{return l.body}}var Ay=/[\n"\\]/g;function ar(l){return l.replace(Ay,function(u){return"\\"+u.charCodeAt(0).toString(16)+" "})}function Vi(l,u,h,m,_,S,U,z){l.name="",U!=null&&typeof U!="function"&&typeof U!="symbol"&&typeof U!="boolean"?l.type=U:l.removeAttribute("type"),u!=null?U==="number"?(u===0&&l.value===""||l.value!=u)&&(l.value=""+vi(u)):l.value!==""+vi(u)&&(l.value=""+vi(u)):U!=="submit"&&U!=="reset"||l.removeAttribute("value"),u!=null?No(l,U,vi(u)):h!=null?No(l,U,vi(h)):m!=null&&l.removeAttribute("value"),_==null&&S!=null&&(l.defaultChecked=!!S),_!=null&&(l.checked=_&&typeof _!="function"&&typeof _!="symbol"),z!=null&&typeof z!="function"&&typeof z!="symbol"&&typeof z!="boolean"?l.name=""+vi(z):l.removeAttribute("name")}function ql(l,u,h,m,_,S,U,z){if(S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"&&(l.type=S),u!=null||h!=null){if(!(S!=="submit"&&S!=="reset"||u!=null))return;h=h!=null?""+vi(h):"",u=u!=null?""+vi(u):h,z||u===l.value||(l.value=u),l.defaultValue=u}m=m??_,m=typeof m!="function"&&typeof m!="symbol"&&!!m,l.checked=z?l.checked:!!m,l.defaultChecked=!!m,U!=null&&typeof U!="function"&&typeof U!="symbol"&&typeof U!="boolean"&&(l.name=U)}function No(l,u,h){u==="number"&&Yl(l.ownerDocument)===l||l.defaultValue===""+h||(l.defaultValue=""+h)}function Ns(l,u,h,m){if(l=l.options,u){u={};for(var _=0;_<h.length;_++)u["$"+h[_]]=!0;for(h=0;h<l.length;h++)_=u.hasOwnProperty("$"+l[h].value),l[h].selected!==_&&(l[h].selected=_),_&&m&&(l[h].defaultSelected=!0)}else{for(h=""+vi(h),u=null,_=0;_<l.length;_++){if(l[_].value===h){l[_].selected=!0,m&&(l[_].defaultSelected=!0);return}u!==null||l[_].disabled||(u=l[_])}u!==null&&(u.selected=!0)}}function cn(l,u,h){if(u!=null&&(u=""+vi(u),u!==l.value&&(l.value=u),h==null)){l.defaultValue!==u&&(l.defaultValue=u);return}l.defaultValue=h!=null?""+vi(h):""}function Xl(l,u,h,m){if(u==null){if(m!=null){if(h!=null)throw Error(r(92));if(X(m)){if(1<m.length)throw Error(r(93));m=m[0]}h=m}h==null&&(h=""),u=h}h=vi(u),l.defaultValue=h,m=l.textContent,m===h&&m!==""&&m!==null&&(l.value=m)}function Ji(l,u){if(u){var h=l.firstChild;if(h&&h===l.lastChild&&h.nodeType===3){h.nodeValue=u;return}}l.textContent=u}var Kl=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function lp(l,u,h){var m=u.indexOf("--")===0;h==null||typeof h=="boolean"||h===""?m?l.setProperty(u,""):u==="float"?l.cssFloat="":l[u]="":m?l.setProperty(u,h):typeof h!="number"||h===0||Kl.has(u)?u==="float"?l.cssFloat=h:l[u]=(""+h).trim():l[u]=h+"px"}function _f(l,u,h){if(u!=null&&typeof u!="object")throw Error(r(62));if(l=l.style,h!=null){for(var m in h)!h.hasOwnProperty(m)||u!=null&&u.hasOwnProperty(m)||(m.indexOf("--")===0?l.setProperty(m,""):m==="float"?l.cssFloat="":l[m]="");for(var _ in u)m=u[_],u.hasOwnProperty(_)&&h[_]!==m&&lp(l,_,m)}else for(var S in u)u.hasOwnProperty(S)&&lp(l,S,u[S])}function bf(l){if(l.indexOf("-")===-1)return!1;switch(l){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ey=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Sy=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function pu(l){return Sy.test(""+l)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":l}var Ls=null;function ea(l){return l=l.target||l.srcElement||window,l.correspondingUseElement&&(l=l.correspondingUseElement),l.nodeType===3?l.parentNode:l}var Bs=null,Vs=null;function Af(l){var u=qa(l);if(u&&(l=u.stateNode)){var h=l[ir]||null;e:switch(l=u.stateNode,u.type){case"input":if(Vi(l,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name),u=h.name,h.type==="radio"&&u!=null){for(h=l;h.parentNode;)h=h.parentNode;for(h=h.querySelectorAll('input[name="'+ar(""+u)+'"][type="radio"]'),u=0;u<h.length;u++){var m=h[u];if(m!==l&&m.form===l.form){var _=m[ir]||null;if(!_)throw Error(r(90));Vi(m,_.value,_.defaultValue,_.defaultValue,_.checked,_.defaultChecked,_.type,_.name)}}for(u=0;u<h.length;u++)m=h[u],m.form===l.form&&wf(m)}break e;case"textarea":cn(l,h.value,h.defaultValue);break e;case"select":u=h.value,u!=null&&Ns(l,!!h.multiple,u,!1)}}}var Qa=!1;function cp(l,u,h){if(Qa)return l(u,h);Qa=!0;try{var m=l(u);return m}finally{if(Qa=!1,(Bs!==null||Vs!==null)&&(ng(),Bs&&(u=Bs,l=Vs,Vs=Bs=null,Af(u),l)))for(u=0;u<l.length;u++)Af(l[u])}}function Ql(l,u){var h=l.stateNode;if(h===null)return null;var m=h[ir]||null;if(m===null)return null;h=m[u];e:switch(u){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(m=!m.disabled)||(l=l.type,m=!(l==="button"||l==="input"||l==="select"||l==="textarea")),l=!m;break e;default:l=!1}if(l)return null;if(h&&typeof h!="function")throw Error(r(231,u,typeof h));return h}var Ea=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ta=!1;if(Ea)try{var Zl={};Object.defineProperty(Zl,"passive",{get:function(){ta=!0}}),window.addEventListener("test",Zl,Zl),window.removeEventListener("test",Zl,Zl)}catch{ta=!1}var Za=null,Lo=null,Fs=null;function Ef(){if(Fs)return Fs;var l,u=Lo,h=u.length,m,_="value"in Za?Za.value:Za.textContent,S=_.length;for(l=0;l<h&&u[l]===_[l];l++);var U=h-l;for(m=1;m<=U&&u[h-m]===_[S-m];m++);return Fs=_.slice(l,1<m?1-m:void 0)}function Ja(l){var u=l.keyCode;return"charCode"in l?(l=l.charCode,l===0&&u===13&&(l=13)):l=u,l===10&&(l=13),32<=l||l===13?l:0}function es(){return!0}function Sf(){return!1}function Rr(l){function u(h,m,_,S,U){this._reactName=h,this._targetInst=_,this.type=m,this.nativeEvent=S,this.target=U,this.currentTarget=null;for(var z in l)l.hasOwnProperty(z)&&(h=l[z],this[z]=h?h(S):S[z]);return this.isDefaultPrevented=(S.defaultPrevented!=null?S.defaultPrevented:S.returnValue===!1)?es:Sf,this.isPropagationStopped=Sf,this}return f(u.prototype,{preventDefault:function(){this.defaultPrevented=!0;var h=this.nativeEvent;h&&(h.preventDefault?h.preventDefault():typeof h.returnValue!="unknown"&&(h.returnValue=!1),this.isDefaultPrevented=es)},stopPropagation:function(){var h=this.nativeEvent;h&&(h.stopPropagation?h.stopPropagation():typeof h.cancelBubble!="unknown"&&(h.cancelBubble=!0),this.isPropagationStopped=es)},persist:function(){},isPersistent:es}),u}var en={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(l){return l.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},gu=Rr(en),Jl=f({},en,{view:0,detail:0}),up=Rr(Jl),mu,yu,ts,ec=f({},Jl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:rc,button:0,buttons:0,relatedTarget:function(l){return l.relatedTarget===void 0?l.fromElement===l.srcElement?l.toElement:l.fromElement:l.relatedTarget},movementX:function(l){return"movementX"in l?l.movementX:(l!==ts&&(ts&&l.type==="mousemove"?(mu=l.screenX-ts.screenX,yu=l.screenY-ts.screenY):yu=mu=0,ts=l),mu)},movementY:function(l){return"movementY"in l?l.movementY:yu}}),na=Rr(ec),dp=f({},ec,{dataTransfer:0}),Ty=Rr(dp),tc=f({},Jl,{relatedTarget:0}),vu=Rr(tc),Tf=f({},en,{animationName:0,elapsedTime:0,pseudoElement:0}),xu=Rr(Tf),fp=f({},en,{clipboardData:function(l){return"clipboardData"in l?l.clipboardData:window.clipboardData}}),wu=Rr(fp),Cy=f({},en,{data:0}),Cf=Rr(Cy),nc={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},hp={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},pp={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function If(l){var u=this.nativeEvent;return u.getModifierState?u.getModifierState(l):(l=pp[l])?!!u[l]:!1}function rc(){return If}var gp=f({},Jl,{key:function(l){if(l.key){var u=nc[l.key]||l.key;if(u!=="Unidentified")return u}return l.type==="keypress"?(l=Ja(l),l===13?"Enter":String.fromCharCode(l)):l.type==="keydown"||l.type==="keyup"?hp[l.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:rc,charCode:function(l){return l.type==="keypress"?Ja(l):0},keyCode:function(l){return l.type==="keydown"||l.type==="keyup"?l.keyCode:0},which:function(l){return l.type==="keypress"?Ja(l):l.type==="keydown"||l.type==="keyup"?l.keyCode:0}}),_u=Rr(gp),mp=f({},ec,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Df=Rr(mp),js=f({},Jl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:rc}),yp=Rr(js),vp=f({},en,{propertyName:0,elapsedTime:0,pseudoElement:0}),xp=Rr(vp),wp=f({},ec,{deltaX:function(l){return"deltaX"in l?l.deltaX:"wheelDeltaX"in l?-l.wheelDeltaX:0},deltaY:function(l){return"deltaY"in l?l.deltaY:"wheelDeltaY"in l?-l.wheelDeltaY:"wheelDelta"in l?-l.wheelDelta:0},deltaZ:0,deltaMode:0}),bu=Rr(wp),xi=f({},en,{newState:0,oldState:0}),_p=Rr(xi),bp=[9,13,27,32],ns=Ea&&"CompositionEvent"in window,w=null;Ea&&"documentMode"in document&&(w=document.documentMode);var P=Ea&&"TextEvent"in window&&!w,j=Ea&&(!ns||w&&8<w&&11>=w),$=" ",re=!1;function pe(l,u){switch(l){case"keyup":return bp.indexOf(u.keyCode)!==-1;case"keydown":return u.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ke(l){return l=l.detail,typeof l=="object"&&"data"in l?l.data:null}var Lt=!1;function yr(l,u){switch(l){case"compositionend":return ke(u);case"keypress":return u.which!==32?null:(re=!0,$);case"textInput":return l=u.data,l===$&&re?null:l;default:return null}}function Bt(l,u){if(Lt)return l==="compositionend"||!ns&&pe(l,u)?(l=Ef(),Fs=Lo=Za=null,Lt=!1,l):null;switch(l){case"paste":return null;case"keypress":if(!(u.ctrlKey||u.altKey||u.metaKey)||u.ctrlKey&&u.altKey){if(u.char&&1<u.char.length)return u.char;if(u.which)return String.fromCharCode(u.which)}return null;case"compositionend":return j&&u.locale!=="ko"?null:u.data;default:return null}}var Mr={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function vr(l){var u=l&&l.nodeName&&l.nodeName.toLowerCase();return u==="input"?!!Mr[l.type]:u==="textarea"}function Us(l,u,h,m){Bs?Vs?Vs.push(m):Vs=[m]:Bs=m,u=lg(u,"onChange"),0<u.length&&(h=new gu("onChange","change",null,h,m),l.push({event:h,listeners:u}))}var Gr=null,rs=null;function Rf(l){LS(l,0)}function Ap(l){var u=Xa(l);if(wf(u))return l}function rA(l,u){if(l==="change")return u}var iA=!1;if(Ea){var Iy;if(Ea){var Dy="oninput"in document;if(!Dy){var aA=document.createElement("div");aA.setAttribute("oninput","return;"),Dy=typeof aA.oninput=="function"}Iy=Dy}else Iy=!1;iA=Iy&&(!document.documentMode||9<document.documentMode)}function sA(){Gr&&(Gr.detachEvent("onpropertychange",oA),rs=Gr=null)}function oA(l){if(l.propertyName==="value"&&Ap(rs)){var u=[];Us(u,rs,l,ea(l)),cp(Rf,u)}}function Ck(l,u,h){l==="focusin"?(sA(),Gr=u,rs=h,Gr.attachEvent("onpropertychange",oA)):l==="focusout"&&sA()}function Ik(l){if(l==="selectionchange"||l==="keyup"||l==="keydown")return Ap(rs)}function Dk(l,u){if(l==="click")return Ap(u)}function Rk(l,u){if(l==="input"||l==="change")return Ap(u)}function Mk(l,u){return l===u&&(l!==0||1/l===1/u)||l!==l&&u!==u}var Fi=typeof Object.is=="function"?Object.is:Mk;function Mf(l,u){if(Fi(l,u))return!0;if(typeof l!="object"||l===null||typeof u!="object"||u===null)return!1;var h=Object.keys(l),m=Object.keys(u);if(h.length!==m.length)return!1;for(m=0;m<h.length;m++){var _=h[m];if(!te.call(u,_)||!Fi(l[_],u[_]))return!1}return!0}function lA(l){for(;l&&l.firstChild;)l=l.firstChild;return l}function cA(l,u){var h=lA(l);l=0;for(var m;h;){if(h.nodeType===3){if(m=l+h.textContent.length,l<=u&&m>=u)return{node:h,offset:u-l};l=m}e:{for(;h;){if(h.nextSibling){h=h.nextSibling;break e}h=h.parentNode}h=void 0}h=lA(h)}}function uA(l,u){return l&&u?l===u?!0:l&&l.nodeType===3?!1:u&&u.nodeType===3?uA(l,u.parentNode):"contains"in l?l.contains(u):l.compareDocumentPosition?!!(l.compareDocumentPosition(u)&16):!1:!1}function dA(l){l=l!=null&&l.ownerDocument!=null&&l.ownerDocument.defaultView!=null?l.ownerDocument.defaultView:window;for(var u=Yl(l.document);u instanceof l.HTMLIFrameElement;){try{var h=typeof u.contentWindow.location.href=="string"}catch{h=!1}if(h)l=u.contentWindow;else break;u=Yl(l.document)}return u}function Ry(l){var u=l&&l.nodeName&&l.nodeName.toLowerCase();return u&&(u==="input"&&(l.type==="text"||l.type==="search"||l.type==="tel"||l.type==="url"||l.type==="password")||u==="textarea"||l.contentEditable==="true")}var Ok=Ea&&"documentMode"in document&&11>=document.documentMode,Au=null,My=null,Of=null,Oy=!1;function fA(l,u,h){var m=h.window===h?h.document:h.nodeType===9?h:h.ownerDocument;Oy||Au==null||Au!==Yl(m)||(m=Au,"selectionStart"in m&&Ry(m)?m={start:m.selectionStart,end:m.selectionEnd}:(m=(m.ownerDocument&&m.ownerDocument.defaultView||window).getSelection(),m={anchorNode:m.anchorNode,anchorOffset:m.anchorOffset,focusNode:m.focusNode,focusOffset:m.focusOffset}),Of&&Mf(Of,m)||(Of=m,m=lg(My,"onSelect"),0<m.length&&(u=new gu("onSelect","select",null,u,h),l.push({event:u,listeners:m}),u.target=Au)))}function ic(l,u){var h={};return h[l.toLowerCase()]=u.toLowerCase(),h["Webkit"+l]="webkit"+u,h["Moz"+l]="moz"+u,h}var Eu={animationend:ic("Animation","AnimationEnd"),animationiteration:ic("Animation","AnimationIteration"),animationstart:ic("Animation","AnimationStart"),transitionrun:ic("Transition","TransitionRun"),transitionstart:ic("Transition","TransitionStart"),transitioncancel:ic("Transition","TransitionCancel"),transitionend:ic("Transition","TransitionEnd")},Py={},hA={};Ea&&(hA=document.createElement("div").style,"AnimationEvent"in window||(delete Eu.animationend.animation,delete Eu.animationiteration.animation,delete Eu.animationstart.animation),"TransitionEvent"in window||delete Eu.transitionend.transition);function ac(l){if(Py[l])return Py[l];if(!Eu[l])return l;var u=Eu[l],h;for(h in u)if(u.hasOwnProperty(h)&&h in hA)return Py[l]=u[h];return l}var pA=ac("animationend"),gA=ac("animationiteration"),mA=ac("animationstart"),Pk=ac("transitionrun"),kk=ac("transitionstart"),Nk=ac("transitioncancel"),yA=ac("transitionend"),vA=new Map,ky="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");ky.push("scrollEnd");function Sa(l,u){vA.set(l,u),Aa(u,[l])}var xA=new WeakMap;function ra(l,u){if(typeof l=="object"&&l!==null){var h=xA.get(l);return h!==void 0?h:(u={value:l,source:u,stack:fu(u)},xA.set(l,u),u)}return{value:l,source:u,stack:fu(u)}}var ia=[],Su=0,Ny=0;function Ep(){for(var l=Su,u=Ny=Su=0;u<l;){var h=ia[u];ia[u++]=null;var m=ia[u];ia[u++]=null;var _=ia[u];ia[u++]=null;var S=ia[u];if(ia[u++]=null,m!==null&&_!==null){var U=m.pending;U===null?_.next=_:(_.next=U.next,U.next=_),m.pending=_}S!==0&&wA(h,_,S)}}function Sp(l,u,h,m){ia[Su++]=l,ia[Su++]=u,ia[Su++]=h,ia[Su++]=m,Ny|=m,l.lanes|=m,l=l.alternate,l!==null&&(l.lanes|=m)}function Ly(l,u,h,m){return Sp(l,u,h,m),Tp(l)}function Tu(l,u){return Sp(l,null,null,u),Tp(l)}function wA(l,u,h){l.lanes|=h;var m=l.alternate;m!==null&&(m.lanes|=h);for(var _=!1,S=l.return;S!==null;)S.childLanes|=h,m=S.alternate,m!==null&&(m.childLanes|=h),S.tag===22&&(l=S.stateNode,l===null||l._visibility&1||(_=!0)),l=S,S=S.return;return l.tag===3?(S=l.stateNode,_&&u!==null&&(_=31-Xe(h),l=S.hiddenUpdates,m=l[_],m===null?l[_]=[u]:m.push(u),u.lane=h|536870912),S):null}function Tp(l){if(50<rh)throw rh=0,Hv=null,Error(r(185));for(var u=l.return;u!==null;)l=u,u=l.return;return l.tag===3?l.stateNode:null}var Cu={};function Lk(l,u,h,m){this.tag=l,this.key=h,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=u,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=m,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ji(l,u,h,m){return new Lk(l,u,h,m)}function By(l){return l=l.prototype,!(!l||!l.isReactComponent)}function Hs(l,u){var h=l.alternate;return h===null?(h=ji(l.tag,u,l.key,l.mode),h.elementType=l.elementType,h.type=l.type,h.stateNode=l.stateNode,h.alternate=l,l.alternate=h):(h.pendingProps=u,h.type=l.type,h.flags=0,h.subtreeFlags=0,h.deletions=null),h.flags=l.flags&65011712,h.childLanes=l.childLanes,h.lanes=l.lanes,h.child=l.child,h.memoizedProps=l.memoizedProps,h.memoizedState=l.memoizedState,h.updateQueue=l.updateQueue,u=l.dependencies,h.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext},h.sibling=l.sibling,h.index=l.index,h.ref=l.ref,h.refCleanup=l.refCleanup,h}function _A(l,u){l.flags&=65011714;var h=l.alternate;return h===null?(l.childLanes=0,l.lanes=u,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=h.childLanes,l.lanes=h.lanes,l.child=h.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=h.memoizedProps,l.memoizedState=h.memoizedState,l.updateQueue=h.updateQueue,l.type=h.type,u=h.dependencies,l.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext}),l}function Cp(l,u,h,m,_,S){var U=0;if(m=l,typeof l=="function")By(l)&&(U=1);else if(typeof l=="string")U=V8(l,h,Pe.current)?26:l==="html"||l==="head"||l==="body"?27:5;else e:switch(l){case I:return l=ji(31,h,u,_),l.elementType=I,l.lanes=S,l;case v:return sc(h.children,_,S,u);case b:U=8,_|=24;break;case A:return l=ji(12,h,u,_|2),l.elementType=A,l.lanes=S,l;case O:return l=ji(13,h,u,_),l.elementType=O,l.lanes=S,l;case N:return l=ji(19,h,u,_),l.elementType=N,l.lanes=S,l;default:if(typeof l=="object"&&l!==null)switch(l.$$typeof){case E:case C:U=10;break e;case T:U=9;break e;case D:U=11;break e;case M:U=14;break e;case R:U=16,m=null;break e}U=29,h=Error(r(130,l===null?"null":typeof l,"")),m=null}return u=ji(U,h,u,_),u.elementType=l,u.type=m,u.lanes=S,u}function sc(l,u,h,m){return l=ji(7,l,m,u),l.lanes=h,l}function Vy(l,u,h){return l=ji(6,l,null,u),l.lanes=h,l}function Fy(l,u,h){return u=ji(4,l.children!==null?l.children:[],l.key,u),u.lanes=h,u.stateNode={containerInfo:l.containerInfo,pendingChildren:null,implementation:l.implementation},u}var Iu=[],Du=0,Ip=null,Dp=0,aa=[],sa=0,oc=null,zs=1,$s="";function lc(l,u){Iu[Du++]=Dp,Iu[Du++]=Ip,Ip=l,Dp=u}function bA(l,u,h){aa[sa++]=zs,aa[sa++]=$s,aa[sa++]=oc,oc=l;var m=zs;l=$s;var _=32-Xe(m)-1;m&=~(1<<_),h+=1;var S=32-Xe(u)+_;if(30<S){var U=_-_%5;S=(m&(1<<U)-1).toString(32),m>>=U,_-=U,zs=1<<32-Xe(u)+_|h<<_|m,$s=S+l}else zs=1<<S|h<<_|m,$s=l}function jy(l){l.return!==null&&(lc(l,1),bA(l,1,0))}function Uy(l){for(;l===Ip;)Ip=Iu[--Du],Iu[Du]=null,Dp=Iu[--Du],Iu[Du]=null;for(;l===oc;)oc=aa[--sa],aa[sa]=null,$s=aa[--sa],aa[sa]=null,zs=aa[--sa],aa[sa]=null}var wi=null,Vn=null,qt=!1,cc=null,is=!1,Hy=Error(r(519));function uc(l){var u=Error(r(418,""));throw Nf(ra(u,l)),Hy}function AA(l){var u=l.stateNode,h=l.type,m=l.memoizedProps;switch(u[mr]=l,u[ir]=m,h){case"dialog":It("cancel",u),It("close",u);break;case"iframe":case"object":case"embed":It("load",u);break;case"video":case"audio":for(h=0;h<ah.length;h++)It(ah[h],u);break;case"source":It("error",u);break;case"img":case"image":case"link":It("error",u),It("load",u);break;case"details":It("toggle",u);break;case"input":It("invalid",u),ql(u,m.value,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name,!0),hu(u);break;case"select":It("invalid",u);break;case"textarea":It("invalid",u),Xl(u,m.value,m.defaultValue,m.children),hu(u)}h=m.children,typeof h!="string"&&typeof h!="number"&&typeof h!="bigint"||u.textContent===""+h||m.suppressHydrationWarning===!0||jS(u.textContent,h)?(m.popover!=null&&(It("beforetoggle",u),It("toggle",u)),m.onScroll!=null&&It("scroll",u),m.onScrollEnd!=null&&It("scrollend",u),m.onClick!=null&&(u.onclick=cg),u=!0):u=!1,u||uc(l)}function EA(l){for(wi=l.return;wi;)switch(wi.tag){case 5:case 13:is=!1;return;case 27:case 3:is=!0;return;default:wi=wi.return}}function Pf(l){if(l!==wi)return!1;if(!qt)return EA(l),qt=!0,!1;var u=l.tag,h;if((h=u!==3&&u!==27)&&((h=u===5)&&(h=l.type,h=!(h!=="form"&&h!=="button")||ix(l.type,l.memoizedProps)),h=!h),h&&Vn&&uc(l),EA(l),u===13){if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(r(317));e:{for(l=l.nextSibling,u=0;l;){if(l.nodeType===8)if(h=l.data,h==="/$"){if(u===0){Vn=Ca(l.nextSibling);break e}u--}else h!=="$"&&h!=="$!"&&h!=="$?"||u++;l=l.nextSibling}Vn=null}}else u===27?(u=Vn,Zo(l.type)?(l=lx,lx=null,Vn=l):Vn=u):Vn=wi?Ca(l.stateNode.nextSibling):null;return!0}function kf(){Vn=wi=null,qt=!1}function SA(){var l=cc;return l!==null&&(Di===null?Di=l:Di.push.apply(Di,l),cc=null),l}function Nf(l){cc===null?cc=[l]:cc.push(l)}var zy=ge(null),dc=null,Gs=null;function Bo(l,u,h){Ae(zy,u._currentValue),u._currentValue=h}function Ws(l){l._currentValue=zy.current,we(zy)}function $y(l,u,h){for(;l!==null;){var m=l.alternate;if((l.childLanes&u)!==u?(l.childLanes|=u,m!==null&&(m.childLanes|=u)):m!==null&&(m.childLanes&u)!==u&&(m.childLanes|=u),l===h)break;l=l.return}}function Gy(l,u,h,m){var _=l.child;for(_!==null&&(_.return=l);_!==null;){var S=_.dependencies;if(S!==null){var U=_.child;S=S.firstContext;e:for(;S!==null;){var z=S;S=_;for(var K=0;K<u.length;K++)if(z.context===u[K]){S.lanes|=h,z=S.alternate,z!==null&&(z.lanes|=h),$y(S.return,h,l),m||(U=null);break e}S=z.next}}else if(_.tag===18){if(U=_.return,U===null)throw Error(r(341));U.lanes|=h,S=U.alternate,S!==null&&(S.lanes|=h),$y(U,h,l),U=null}else U=_.child;if(U!==null)U.return=_;else for(U=_;U!==null;){if(U===l){U=null;break}if(_=U.sibling,_!==null){_.return=U.return,U=_;break}U=U.return}_=U}}function Lf(l,u,h,m){l=null;for(var _=u,S=!1;_!==null;){if(!S){if((_.flags&524288)!==0)S=!0;else if((_.flags&262144)!==0)break}if(_.tag===10){var U=_.alternate;if(U===null)throw Error(r(387));if(U=U.memoizedProps,U!==null){var z=_.type;Fi(_.pendingProps.value,U.value)||(l!==null?l.push(z):l=[z])}}else if(_===Ue.current){if(U=_.alternate,U===null)throw Error(r(387));U.memoizedState.memoizedState!==_.memoizedState.memoizedState&&(l!==null?l.push(dh):l=[dh])}_=_.return}l!==null&&Gy(u,l,h,m),u.flags|=262144}function Rp(l){for(l=l.firstContext;l!==null;){if(!Fi(l.context._currentValue,l.memoizedValue))return!0;l=l.next}return!1}function fc(l){dc=l,Gs=null,l=l.dependencies,l!==null&&(l.firstContext=null)}function ri(l){return TA(dc,l)}function Mp(l,u){return dc===null&&fc(l),TA(l,u)}function TA(l,u){var h=u._currentValue;if(u={context:u,memoizedValue:h,next:null},Gs===null){if(l===null)throw Error(r(308));Gs=u,l.dependencies={lanes:0,firstContext:u},l.flags|=524288}else Gs=Gs.next=u;return h}var Bk=typeof AbortController<"u"?AbortController:function(){var l=[],u=this.signal={aborted:!1,addEventListener:function(h,m){l.push(m)}};this.abort=function(){u.aborted=!0,l.forEach(function(h){return h()})}},Vk=n.unstable_scheduleCallback,Fk=n.unstable_NormalPriority,xr={$$typeof:C,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Wy(){return{controller:new Bk,data:new Map,refCount:0}}function Bf(l){l.refCount--,l.refCount===0&&Vk(Fk,function(){l.controller.abort()})}var Vf=null,Yy=0,Ru=0,Mu=null;function jk(l,u){if(Vf===null){var h=Vf=[];Yy=0,Ru=Xv(),Mu={status:"pending",value:void 0,then:function(m){h.push(m)}}}return Yy++,u.then(CA,CA),u}function CA(){if(--Yy===0&&Vf!==null){Mu!==null&&(Mu.status="fulfilled");var l=Vf;Vf=null,Ru=0,Mu=null;for(var u=0;u<l.length;u++)(0,l[u])()}}function Uk(l,u){var h=[],m={status:"pending",value:null,reason:null,then:function(_){h.push(_)}};return l.then(function(){m.status="fulfilled",m.value=u;for(var _=0;_<h.length;_++)(0,h[_])(u)},function(_){for(m.status="rejected",m.reason=_,_=0;_<h.length;_++)(0,h[_])(void 0)}),m}var IA=G.S;G.S=function(l,u){typeof u=="object"&&u!==null&&typeof u.then=="function"&&jk(l,u),IA!==null&&IA(l,u)};var hc=ge(null);function qy(){var l=hc.current;return l!==null?l:wn.pooledCache}function Op(l,u){u===null?Ae(hc,hc.current):Ae(hc,u.pool)}function DA(){var l=qy();return l===null?null:{parent:xr._currentValue,pool:l}}var Ff=Error(r(460)),RA=Error(r(474)),Pp=Error(r(542)),Xy={then:function(){}};function MA(l){return l=l.status,l==="fulfilled"||l==="rejected"}function kp(){}function OA(l,u,h){switch(h=l[h],h===void 0?l.push(u):h!==u&&(u.then(kp,kp),u=h),u.status){case"fulfilled":return u.value;case"rejected":throw l=u.reason,kA(l),l;default:if(typeof u.status=="string")u.then(kp,kp);else{if(l=wn,l!==null&&100<l.shellSuspendCounter)throw Error(r(482));l=u,l.status="pending",l.then(function(m){if(u.status==="pending"){var _=u;_.status="fulfilled",_.value=m}},function(m){if(u.status==="pending"){var _=u;_.status="rejected",_.reason=m}})}switch(u.status){case"fulfilled":return u.value;case"rejected":throw l=u.reason,kA(l),l}throw jf=u,Ff}}var jf=null;function PA(){if(jf===null)throw Error(r(459));var l=jf;return jf=null,l}function kA(l){if(l===Ff||l===Pp)throw Error(r(483))}var Vo=!1;function Ky(l){l.updateQueue={baseState:l.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Qy(l,u){l=l.updateQueue,u.updateQueue===l&&(u.updateQueue={baseState:l.baseState,firstBaseUpdate:l.firstBaseUpdate,lastBaseUpdate:l.lastBaseUpdate,shared:l.shared,callbacks:null})}function Fo(l){return{lane:l,tag:0,payload:null,callback:null,next:null}}function jo(l,u,h){var m=l.updateQueue;if(m===null)return null;if(m=m.shared,(rn&2)!==0){var _=m.pending;return _===null?u.next=u:(u.next=_.next,_.next=u),m.pending=u,u=Tp(l),wA(l,null,h),u}return Sp(l,m,u,h),Tp(l)}function Uf(l,u,h){if(u=u.updateQueue,u!==null&&(u=u.shared,(h&4194048)!==0)){var m=u.lanes;m&=l.pendingLanes,h|=m,u.lanes=h,lu(l,h)}}function Zy(l,u){var h=l.updateQueue,m=l.alternate;if(m!==null&&(m=m.updateQueue,h===m)){var _=null,S=null;if(h=h.firstBaseUpdate,h!==null){do{var U={lane:h.lane,tag:h.tag,payload:h.payload,callback:null,next:null};S===null?_=S=U:S=S.next=U,h=h.next}while(h!==null);S===null?_=S=u:S=S.next=u}else _=S=u;h={baseState:m.baseState,firstBaseUpdate:_,lastBaseUpdate:S,shared:m.shared,callbacks:m.callbacks},l.updateQueue=h;return}l=h.lastBaseUpdate,l===null?h.firstBaseUpdate=u:l.next=u,h.lastBaseUpdate=u}var Jy=!1;function Hf(){if(Jy){var l=Mu;if(l!==null)throw l}}function zf(l,u,h,m){Jy=!1;var _=l.updateQueue;Vo=!1;var S=_.firstBaseUpdate,U=_.lastBaseUpdate,z=_.shared.pending;if(z!==null){_.shared.pending=null;var K=z,oe=K.next;K.next=null,U===null?S=oe:U.next=oe,U=K;var _e=l.alternate;_e!==null&&(_e=_e.updateQueue,z=_e.lastBaseUpdate,z!==U&&(z===null?_e.firstBaseUpdate=oe:z.next=oe,_e.lastBaseUpdate=K))}if(S!==null){var Se=_.baseState;U=0,_e=oe=K=null,z=S;do{var ce=z.lane&-536870913,ue=ce!==z.lane;if(ue?(Vt&ce)===ce:(m&ce)===ce){ce!==0&&ce===Ru&&(Jy=!0),_e!==null&&(_e=_e.next={lane:0,tag:z.tag,payload:z.payload,callback:null,next:null});e:{var ct=l,it=z;ce=u;var fn=h;switch(it.tag){case 1:if(ct=it.payload,typeof ct=="function"){Se=ct.call(fn,Se,ce);break e}Se=ct;break e;case 3:ct.flags=ct.flags&-65537|128;case 0:if(ct=it.payload,ce=typeof ct=="function"?ct.call(fn,Se,ce):ct,ce==null)break e;Se=f({},Se,ce);break e;case 2:Vo=!0}}ce=z.callback,ce!==null&&(l.flags|=64,ue&&(l.flags|=8192),ue=_.callbacks,ue===null?_.callbacks=[ce]:ue.push(ce))}else ue={lane:ce,tag:z.tag,payload:z.payload,callback:z.callback,next:null},_e===null?(oe=_e=ue,K=Se):_e=_e.next=ue,U|=ce;if(z=z.next,z===null){if(z=_.shared.pending,z===null)break;ue=z,z=ue.next,ue.next=null,_.lastBaseUpdate=ue,_.shared.pending=null}}while(!0);_e===null&&(K=Se),_.baseState=K,_.firstBaseUpdate=oe,_.lastBaseUpdate=_e,S===null&&(_.shared.lanes=0),qo|=U,l.lanes=U,l.memoizedState=Se}}function NA(l,u){if(typeof l!="function")throw Error(r(191,l));l.call(u)}function LA(l,u){var h=l.callbacks;if(h!==null)for(l.callbacks=null,l=0;l<h.length;l++)NA(h[l],u)}var Ou=ge(null),Np=ge(0);function BA(l,u){l=Js,Ae(Np,l),Ae(Ou,u),Js=l|u.baseLanes}function ev(){Ae(Np,Js),Ae(Ou,Ou.current)}function tv(){Js=Np.current,we(Ou),we(Np)}var Uo=0,_t=null,un=null,sr=null,Lp=!1,Pu=!1,pc=!1,Bp=0,$f=0,ku=null,Hk=0;function Xn(){throw Error(r(321))}function nv(l,u){if(u===null)return!1;for(var h=0;h<u.length&&h<l.length;h++)if(!Fi(l[h],u[h]))return!1;return!0}function rv(l,u,h,m,_,S){return Uo=S,_t=u,u.memoizedState=null,u.updateQueue=null,u.lanes=0,G.H=l===null||l.memoizedState===null?wE:_E,pc=!1,S=h(m,_),pc=!1,Pu&&(S=FA(u,h,m,_)),VA(l),S}function VA(l){G.H=zp;var u=un!==null&&un.next!==null;if(Uo=0,sr=un=_t=null,Lp=!1,$f=0,ku=null,u)throw Error(r(300));l===null||Or||(l=l.dependencies,l!==null&&Rp(l)&&(Or=!0))}function FA(l,u,h,m){_t=l;var _=0;do{if(Pu&&(ku=null),$f=0,Pu=!1,25<=_)throw Error(r(301));if(_+=1,sr=un=null,l.updateQueue!=null){var S=l.updateQueue;S.lastEffect=null,S.events=null,S.stores=null,S.memoCache!=null&&(S.memoCache.index=0)}G.H=Xk,S=u(h,m)}while(Pu);return S}function zk(){var l=G.H,u=l.useState()[0];return u=typeof u.then=="function"?Gf(u):u,l=l.useState()[0],(un!==null?un.memoizedState:null)!==l&&(_t.flags|=1024),u}function iv(){var l=Bp!==0;return Bp=0,l}function av(l,u,h){u.updateQueue=l.updateQueue,u.flags&=-2053,l.lanes&=~h}function sv(l){if(Lp){for(l=l.memoizedState;l!==null;){var u=l.queue;u!==null&&(u.pending=null),l=l.next}Lp=!1}Uo=0,sr=un=_t=null,Pu=!1,$f=Bp=0,ku=null}function Ci(){var l={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return sr===null?_t.memoizedState=sr=l:sr=sr.next=l,sr}function or(){if(un===null){var l=_t.alternate;l=l!==null?l.memoizedState:null}else l=un.next;var u=sr===null?_t.memoizedState:sr.next;if(u!==null)sr=u,un=l;else{if(l===null)throw _t.alternate===null?Error(r(467)):Error(r(310));un=l,l={memoizedState:un.memoizedState,baseState:un.baseState,baseQueue:un.baseQueue,queue:un.queue,next:null},sr===null?_t.memoizedState=sr=l:sr=sr.next=l}return sr}function ov(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Gf(l){var u=$f;return $f+=1,ku===null&&(ku=[]),l=OA(ku,l,u),u=_t,(sr===null?u.memoizedState:sr.next)===null&&(u=u.alternate,G.H=u===null||u.memoizedState===null?wE:_E),l}function Vp(l){if(l!==null&&typeof l=="object"){if(typeof l.then=="function")return Gf(l);if(l.$$typeof===C)return ri(l)}throw Error(r(438,String(l)))}function lv(l){var u=null,h=_t.updateQueue;if(h!==null&&(u=h.memoCache),u==null){var m=_t.alternate;m!==null&&(m=m.updateQueue,m!==null&&(m=m.memoCache,m!=null&&(u={data:m.data.map(function(_){return _.slice()}),index:0})))}if(u==null&&(u={data:[],index:0}),h===null&&(h=ov(),_t.updateQueue=h),h.memoCache=u,h=u.data[u.index],h===void 0)for(h=u.data[u.index]=Array(l),m=0;m<l;m++)h[m]=B;return u.index++,h}function Ys(l,u){return typeof u=="function"?u(l):u}function Fp(l){var u=or();return cv(u,un,l)}function cv(l,u,h){var m=l.queue;if(m===null)throw Error(r(311));m.lastRenderedReducer=h;var _=l.baseQueue,S=m.pending;if(S!==null){if(_!==null){var U=_.next;_.next=S.next,S.next=U}u.baseQueue=_=S,m.pending=null}if(S=l.baseState,_===null)l.memoizedState=S;else{u=_.next;var z=U=null,K=null,oe=u,_e=!1;do{var Se=oe.lane&-536870913;if(Se!==oe.lane?(Vt&Se)===Se:(Uo&Se)===Se){var ce=oe.revertLane;if(ce===0)K!==null&&(K=K.next={lane:0,revertLane:0,action:oe.action,hasEagerState:oe.hasEagerState,eagerState:oe.eagerState,next:null}),Se===Ru&&(_e=!0);else if((Uo&ce)===ce){oe=oe.next,ce===Ru&&(_e=!0);continue}else Se={lane:0,revertLane:oe.revertLane,action:oe.action,hasEagerState:oe.hasEagerState,eagerState:oe.eagerState,next:null},K===null?(z=K=Se,U=S):K=K.next=Se,_t.lanes|=ce,qo|=ce;Se=oe.action,pc&&h(S,Se),S=oe.hasEagerState?oe.eagerState:h(S,Se)}else ce={lane:Se,revertLane:oe.revertLane,action:oe.action,hasEagerState:oe.hasEagerState,eagerState:oe.eagerState,next:null},K===null?(z=K=ce,U=S):K=K.next=ce,_t.lanes|=Se,qo|=Se;oe=oe.next}while(oe!==null&&oe!==u);if(K===null?U=S:K.next=z,!Fi(S,l.memoizedState)&&(Or=!0,_e&&(h=Mu,h!==null)))throw h;l.memoizedState=S,l.baseState=U,l.baseQueue=K,m.lastRenderedState=S}return _===null&&(m.lanes=0),[l.memoizedState,m.dispatch]}function uv(l){var u=or(),h=u.queue;if(h===null)throw Error(r(311));h.lastRenderedReducer=l;var m=h.dispatch,_=h.pending,S=u.memoizedState;if(_!==null){h.pending=null;var U=_=_.next;do S=l(S,U.action),U=U.next;while(U!==_);Fi(S,u.memoizedState)||(Or=!0),u.memoizedState=S,u.baseQueue===null&&(u.baseState=S),h.lastRenderedState=S}return[S,m]}function jA(l,u,h){var m=_t,_=or(),S=qt;if(S){if(h===void 0)throw Error(r(407));h=h()}else h=u();var U=!Fi((un||_).memoizedState,h);U&&(_.memoizedState=h,Or=!0),_=_.queue;var z=zA.bind(null,m,_,l);if(Wf(2048,8,z,[l]),_.getSnapshot!==u||U||sr!==null&&sr.memoizedState.tag&1){if(m.flags|=2048,Nu(9,jp(),HA.bind(null,m,_,h,u),null),wn===null)throw Error(r(349));S||(Uo&124)!==0||UA(m,u,h)}return h}function UA(l,u,h){l.flags|=16384,l={getSnapshot:u,value:h},u=_t.updateQueue,u===null?(u=ov(),_t.updateQueue=u,u.stores=[l]):(h=u.stores,h===null?u.stores=[l]:h.push(l))}function HA(l,u,h,m){u.value=h,u.getSnapshot=m,$A(u)&&GA(l)}function zA(l,u,h){return h(function(){$A(u)&&GA(l)})}function $A(l){var u=l.getSnapshot;l=l.value;try{var h=u();return!Fi(l,h)}catch{return!0}}function GA(l){var u=Tu(l,2);u!==null&&Gi(u,l,2)}function dv(l){var u=Ci();if(typeof l=="function"){var h=l;if(l=h(),pc){bn(!0);try{h()}finally{bn(!1)}}}return u.memoizedState=u.baseState=l,u.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ys,lastRenderedState:l},u}function WA(l,u,h,m){return l.baseState=h,cv(l,un,typeof m=="function"?m:Ys)}function $k(l,u,h,m,_){if(Hp(l))throw Error(r(485));if(l=u.action,l!==null){var S={payload:_,action:l,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(U){S.listeners.push(U)}};G.T!==null?h(!0):S.isTransition=!1,m(S),h=u.pending,h===null?(S.next=u.pending=S,YA(u,S)):(S.next=h.next,u.pending=h.next=S)}}function YA(l,u){var h=u.action,m=u.payload,_=l.state;if(u.isTransition){var S=G.T,U={};G.T=U;try{var z=h(_,m),K=G.S;K!==null&&K(U,z),qA(l,u,z)}catch(oe){fv(l,u,oe)}finally{G.T=S}}else try{S=h(_,m),qA(l,u,S)}catch(oe){fv(l,u,oe)}}function qA(l,u,h){h!==null&&typeof h=="object"&&typeof h.then=="function"?h.then(function(m){XA(l,u,m)},function(m){return fv(l,u,m)}):XA(l,u,h)}function XA(l,u,h){u.status="fulfilled",u.value=h,KA(u),l.state=h,u=l.pending,u!==null&&(h=u.next,h===u?l.pending=null:(h=h.next,u.next=h,YA(l,h)))}function fv(l,u,h){var m=l.pending;if(l.pending=null,m!==null){m=m.next;do u.status="rejected",u.reason=h,KA(u),u=u.next;while(u!==m)}l.action=null}function KA(l){l=l.listeners;for(var u=0;u<l.length;u++)(0,l[u])()}function QA(l,u){return u}function ZA(l,u){if(qt){var h=wn.formState;if(h!==null){e:{var m=_t;if(qt){if(Vn){t:{for(var _=Vn,S=is;_.nodeType!==8;){if(!S){_=null;break t}if(_=Ca(_.nextSibling),_===null){_=null;break t}}S=_.data,_=S==="F!"||S==="F"?_:null}if(_){Vn=Ca(_.nextSibling),m=_.data==="F!";break e}}uc(m)}m=!1}m&&(u=h[0])}}return h=Ci(),h.memoizedState=h.baseState=u,m={pending:null,lanes:0,dispatch:null,lastRenderedReducer:QA,lastRenderedState:u},h.queue=m,h=yE.bind(null,_t,m),m.dispatch=h,m=dv(!1),S=yv.bind(null,_t,!1,m.queue),m=Ci(),_={state:u,dispatch:null,action:l,pending:null},m.queue=_,h=$k.bind(null,_t,_,S,h),_.dispatch=h,m.memoizedState=l,[u,h,!1]}function JA(l){var u=or();return eE(u,un,l)}function eE(l,u,h){if(u=cv(l,u,QA)[0],l=Fp(Ys)[0],typeof u=="object"&&u!==null&&typeof u.then=="function")try{var m=Gf(u)}catch(U){throw U===Ff?Pp:U}else m=u;u=or();var _=u.queue,S=_.dispatch;return h!==u.memoizedState&&(_t.flags|=2048,Nu(9,jp(),Gk.bind(null,_,h),null)),[m,S,l]}function Gk(l,u){l.action=u}function tE(l){var u=or(),h=un;if(h!==null)return eE(u,h,l);or(),u=u.memoizedState,h=or();var m=h.queue.dispatch;return h.memoizedState=l,[u,m,!1]}function Nu(l,u,h,m){return l={tag:l,create:h,deps:m,inst:u,next:null},u=_t.updateQueue,u===null&&(u=ov(),_t.updateQueue=u),h=u.lastEffect,h===null?u.lastEffect=l.next=l:(m=h.next,h.next=l,l.next=m,u.lastEffect=l),l}function jp(){return{destroy:void 0,resource:void 0}}function nE(){return or().memoizedState}function Up(l,u,h,m){var _=Ci();m=m===void 0?null:m,_t.flags|=l,_.memoizedState=Nu(1|u,jp(),h,m)}function Wf(l,u,h,m){var _=or();m=m===void 0?null:m;var S=_.memoizedState.inst;un!==null&&m!==null&&nv(m,un.memoizedState.deps)?_.memoizedState=Nu(u,S,h,m):(_t.flags|=l,_.memoizedState=Nu(1|u,S,h,m))}function rE(l,u){Up(8390656,8,l,u)}function iE(l,u){Wf(2048,8,l,u)}function aE(l,u){return Wf(4,2,l,u)}function sE(l,u){return Wf(4,4,l,u)}function oE(l,u){if(typeof u=="function"){l=l();var h=u(l);return function(){typeof h=="function"?h():u(null)}}if(u!=null)return l=l(),u.current=l,function(){u.current=null}}function lE(l,u,h){h=h!=null?h.concat([l]):null,Wf(4,4,oE.bind(null,u,l),h)}function hv(){}function cE(l,u){var h=or();u=u===void 0?null:u;var m=h.memoizedState;return u!==null&&nv(u,m[1])?m[0]:(h.memoizedState=[l,u],l)}function uE(l,u){var h=or();u=u===void 0?null:u;var m=h.memoizedState;if(u!==null&&nv(u,m[1]))return m[0];if(m=l(),pc){bn(!0);try{l()}finally{bn(!1)}}return h.memoizedState=[m,u],m}function pv(l,u,h){return h===void 0||(Uo&1073741824)!==0?l.memoizedState=u:(l.memoizedState=h,l=hS(),_t.lanes|=l,qo|=l,h)}function dE(l,u,h,m){return Fi(h,u)?h:Ou.current!==null?(l=pv(l,h,m),Fi(l,u)||(Or=!0),l):(Uo&42)===0?(Or=!0,l.memoizedState=h):(l=hS(),_t.lanes|=l,qo|=l,u)}function fE(l,u,h,m,_){var S=Y.p;Y.p=S!==0&&8>S?S:8;var U=G.T,z={};G.T=z,yv(l,!1,u,h);try{var K=_(),oe=G.S;if(oe!==null&&oe(z,K),K!==null&&typeof K=="object"&&typeof K.then=="function"){var _e=Uk(K,m);Yf(l,u,_e,$i(l))}else Yf(l,u,m,$i(l))}catch(Se){Yf(l,u,{then:function(){},status:"rejected",reason:Se},$i())}finally{Y.p=S,G.T=U}}function Wk(){}function gv(l,u,h,m){if(l.tag!==5)throw Error(r(476));var _=hE(l).queue;fE(l,_,u,Q,h===null?Wk:function(){return pE(l),h(m)})}function hE(l){var u=l.memoizedState;if(u!==null)return u;u={memoizedState:Q,baseState:Q,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ys,lastRenderedState:Q},next:null};var h={};return u.next={memoizedState:h,baseState:h,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ys,lastRenderedState:h},next:null},l.memoizedState=u,l=l.alternate,l!==null&&(l.memoizedState=u),u}function pE(l){var u=hE(l).next.queue;Yf(l,u,{},$i())}function mv(){return ri(dh)}function gE(){return or().memoizedState}function mE(){return or().memoizedState}function Yk(l){for(var u=l.return;u!==null;){switch(u.tag){case 24:case 3:var h=$i();l=Fo(h);var m=jo(u,l,h);m!==null&&(Gi(m,u,h),Uf(m,u,h)),u={cache:Wy()},l.payload=u;return}u=u.return}}function qk(l,u,h){var m=$i();h={lane:m,revertLane:0,action:h,hasEagerState:!1,eagerState:null,next:null},Hp(l)?vE(u,h):(h=Ly(l,u,h,m),h!==null&&(Gi(h,l,m),xE(h,u,m)))}function yE(l,u,h){var m=$i();Yf(l,u,h,m)}function Yf(l,u,h,m){var _={lane:m,revertLane:0,action:h,hasEagerState:!1,eagerState:null,next:null};if(Hp(l))vE(u,_);else{var S=l.alternate;if(l.lanes===0&&(S===null||S.lanes===0)&&(S=u.lastRenderedReducer,S!==null))try{var U=u.lastRenderedState,z=S(U,h);if(_.hasEagerState=!0,_.eagerState=z,Fi(z,U))return Sp(l,u,_,0),wn===null&&Ep(),!1}catch{}finally{}if(h=Ly(l,u,_,m),h!==null)return Gi(h,l,m),xE(h,u,m),!0}return!1}function yv(l,u,h,m){if(m={lane:2,revertLane:Xv(),action:m,hasEagerState:!1,eagerState:null,next:null},Hp(l)){if(u)throw Error(r(479))}else u=Ly(l,h,m,2),u!==null&&Gi(u,l,2)}function Hp(l){var u=l.alternate;return l===_t||u!==null&&u===_t}function vE(l,u){Pu=Lp=!0;var h=l.pending;h===null?u.next=u:(u.next=h.next,h.next=u),l.pending=u}function xE(l,u,h){if((h&4194048)!==0){var m=u.lanes;m&=l.pendingLanes,h|=m,u.lanes=h,lu(l,h)}}var zp={readContext:ri,use:Vp,useCallback:Xn,useContext:Xn,useEffect:Xn,useImperativeHandle:Xn,useLayoutEffect:Xn,useInsertionEffect:Xn,useMemo:Xn,useReducer:Xn,useRef:Xn,useState:Xn,useDebugValue:Xn,useDeferredValue:Xn,useTransition:Xn,useSyncExternalStore:Xn,useId:Xn,useHostTransitionStatus:Xn,useFormState:Xn,useActionState:Xn,useOptimistic:Xn,useMemoCache:Xn,useCacheRefresh:Xn},wE={readContext:ri,use:Vp,useCallback:function(l,u){return Ci().memoizedState=[l,u===void 0?null:u],l},useContext:ri,useEffect:rE,useImperativeHandle:function(l,u,h){h=h!=null?h.concat([l]):null,Up(4194308,4,oE.bind(null,u,l),h)},useLayoutEffect:function(l,u){return Up(4194308,4,l,u)},useInsertionEffect:function(l,u){Up(4,2,l,u)},useMemo:function(l,u){var h=Ci();u=u===void 0?null:u;var m=l();if(pc){bn(!0);try{l()}finally{bn(!1)}}return h.memoizedState=[m,u],m},useReducer:function(l,u,h){var m=Ci();if(h!==void 0){var _=h(u);if(pc){bn(!0);try{h(u)}finally{bn(!1)}}}else _=u;return m.memoizedState=m.baseState=_,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:l,lastRenderedState:_},m.queue=l,l=l.dispatch=qk.bind(null,_t,l),[m.memoizedState,l]},useRef:function(l){var u=Ci();return l={current:l},u.memoizedState=l},useState:function(l){l=dv(l);var u=l.queue,h=yE.bind(null,_t,u);return u.dispatch=h,[l.memoizedState,h]},useDebugValue:hv,useDeferredValue:function(l,u){var h=Ci();return pv(h,l,u)},useTransition:function(){var l=dv(!1);return l=fE.bind(null,_t,l.queue,!0,!1),Ci().memoizedState=l,[!1,l]},useSyncExternalStore:function(l,u,h){var m=_t,_=Ci();if(qt){if(h===void 0)throw Error(r(407));h=h()}else{if(h=u(),wn===null)throw Error(r(349));(Vt&124)!==0||UA(m,u,h)}_.memoizedState=h;var S={value:h,getSnapshot:u};return _.queue=S,rE(zA.bind(null,m,S,l),[l]),m.flags|=2048,Nu(9,jp(),HA.bind(null,m,S,h,u),null),h},useId:function(){var l=Ci(),u=wn.identifierPrefix;if(qt){var h=$s,m=zs;h=(m&~(1<<32-Xe(m)-1)).toString(32)+h,u="«"+u+"R"+h,h=Bp++,0<h&&(u+="H"+h.toString(32)),u+="»"}else h=Hk++,u="«"+u+"r"+h.toString(32)+"»";return l.memoizedState=u},useHostTransitionStatus:mv,useFormState:ZA,useActionState:ZA,useOptimistic:function(l){var u=Ci();u.memoizedState=u.baseState=l;var h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return u.queue=h,u=yv.bind(null,_t,!0,h),h.dispatch=u,[l,u]},useMemoCache:lv,useCacheRefresh:function(){return Ci().memoizedState=Yk.bind(null,_t)}},_E={readContext:ri,use:Vp,useCallback:cE,useContext:ri,useEffect:iE,useImperativeHandle:lE,useInsertionEffect:aE,useLayoutEffect:sE,useMemo:uE,useReducer:Fp,useRef:nE,useState:function(){return Fp(Ys)},useDebugValue:hv,useDeferredValue:function(l,u){var h=or();return dE(h,un.memoizedState,l,u)},useTransition:function(){var l=Fp(Ys)[0],u=or().memoizedState;return[typeof l=="boolean"?l:Gf(l),u]},useSyncExternalStore:jA,useId:gE,useHostTransitionStatus:mv,useFormState:JA,useActionState:JA,useOptimistic:function(l,u){var h=or();return WA(h,un,l,u)},useMemoCache:lv,useCacheRefresh:mE},Xk={readContext:ri,use:Vp,useCallback:cE,useContext:ri,useEffect:iE,useImperativeHandle:lE,useInsertionEffect:aE,useLayoutEffect:sE,useMemo:uE,useReducer:uv,useRef:nE,useState:function(){return uv(Ys)},useDebugValue:hv,useDeferredValue:function(l,u){var h=or();return un===null?pv(h,l,u):dE(h,un.memoizedState,l,u)},useTransition:function(){var l=uv(Ys)[0],u=or().memoizedState;return[typeof l=="boolean"?l:Gf(l),u]},useSyncExternalStore:jA,useId:gE,useHostTransitionStatus:mv,useFormState:tE,useActionState:tE,useOptimistic:function(l,u){var h=or();return un!==null?WA(h,un,l,u):(h.baseState=l,[l,h.queue.dispatch])},useMemoCache:lv,useCacheRefresh:mE},Lu=null,qf=0;function $p(l){var u=qf;return qf+=1,Lu===null&&(Lu=[]),OA(Lu,l,u)}function Xf(l,u){u=u.props.ref,l.ref=u!==void 0?u:null}function Gp(l,u){throw u.$$typeof===p?Error(r(525)):(l=Object.prototype.toString.call(u),Error(r(31,l==="[object Object]"?"object with keys {"+Object.keys(u).join(", ")+"}":l)))}function bE(l){var u=l._init;return u(l._payload)}function AE(l){function u(ee,J){if(l){var ie=ee.deletions;ie===null?(ee.deletions=[J],ee.flags|=16):ie.push(J)}}function h(ee,J){if(!l)return null;for(;J!==null;)u(ee,J),J=J.sibling;return null}function m(ee){for(var J=new Map;ee!==null;)ee.key!==null?J.set(ee.key,ee):J.set(ee.index,ee),ee=ee.sibling;return J}function _(ee,J){return ee=Hs(ee,J),ee.index=0,ee.sibling=null,ee}function S(ee,J,ie){return ee.index=ie,l?(ie=ee.alternate,ie!==null?(ie=ie.index,ie<J?(ee.flags|=67108866,J):ie):(ee.flags|=67108866,J)):(ee.flags|=1048576,J)}function U(ee){return l&&ee.alternate===null&&(ee.flags|=67108866),ee}function z(ee,J,ie,Ee){return J===null||J.tag!==6?(J=Vy(ie,ee.mode,Ee),J.return=ee,J):(J=_(J,ie),J.return=ee,J)}function K(ee,J,ie,Ee){var Ye=ie.type;return Ye===v?_e(ee,J,ie.props.children,Ee,ie.key):J!==null&&(J.elementType===Ye||typeof Ye=="object"&&Ye!==null&&Ye.$$typeof===R&&bE(Ye)===J.type)?(J=_(J,ie.props),Xf(J,ie),J.return=ee,J):(J=Cp(ie.type,ie.key,ie.props,null,ee.mode,Ee),Xf(J,ie),J.return=ee,J)}function oe(ee,J,ie,Ee){return J===null||J.tag!==4||J.stateNode.containerInfo!==ie.containerInfo||J.stateNode.implementation!==ie.implementation?(J=Fy(ie,ee.mode,Ee),J.return=ee,J):(J=_(J,ie.children||[]),J.return=ee,J)}function _e(ee,J,ie,Ee,Ye){return J===null||J.tag!==7?(J=sc(ie,ee.mode,Ee,Ye),J.return=ee,J):(J=_(J,ie),J.return=ee,J)}function Se(ee,J,ie){if(typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint")return J=Vy(""+J,ee.mode,ie),J.return=ee,J;if(typeof J=="object"&&J!==null){switch(J.$$typeof){case g:return ie=Cp(J.type,J.key,J.props,null,ee.mode,ie),Xf(ie,J),ie.return=ee,ie;case y:return J=Fy(J,ee.mode,ie),J.return=ee,J;case R:var Ee=J._init;return J=Ee(J._payload),Se(ee,J,ie)}if(X(J)||k(J))return J=sc(J,ee.mode,ie,null),J.return=ee,J;if(typeof J.then=="function")return Se(ee,$p(J),ie);if(J.$$typeof===C)return Se(ee,Mp(ee,J),ie);Gp(ee,J)}return null}function ce(ee,J,ie,Ee){var Ye=J!==null?J.key:null;if(typeof ie=="string"&&ie!==""||typeof ie=="number"||typeof ie=="bigint")return Ye!==null?null:z(ee,J,""+ie,Ee);if(typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case g:return ie.key===Ye?K(ee,J,ie,Ee):null;case y:return ie.key===Ye?oe(ee,J,ie,Ee):null;case R:return Ye=ie._init,ie=Ye(ie._payload),ce(ee,J,ie,Ee)}if(X(ie)||k(ie))return Ye!==null?null:_e(ee,J,ie,Ee,null);if(typeof ie.then=="function")return ce(ee,J,$p(ie),Ee);if(ie.$$typeof===C)return ce(ee,J,Mp(ee,ie),Ee);Gp(ee,ie)}return null}function ue(ee,J,ie,Ee,Ye){if(typeof Ee=="string"&&Ee!==""||typeof Ee=="number"||typeof Ee=="bigint")return ee=ee.get(ie)||null,z(J,ee,""+Ee,Ye);if(typeof Ee=="object"&&Ee!==null){switch(Ee.$$typeof){case g:return ee=ee.get(Ee.key===null?ie:Ee.key)||null,K(J,ee,Ee,Ye);case y:return ee=ee.get(Ee.key===null?ie:Ee.key)||null,oe(J,ee,Ee,Ye);case R:var St=Ee._init;return Ee=St(Ee._payload),ue(ee,J,ie,Ee,Ye)}if(X(Ee)||k(Ee))return ee=ee.get(ie)||null,_e(J,ee,Ee,Ye,null);if(typeof Ee.then=="function")return ue(ee,J,ie,$p(Ee),Ye);if(Ee.$$typeof===C)return ue(ee,J,ie,Mp(J,Ee),Ye);Gp(J,Ee)}return null}function ct(ee,J,ie,Ee){for(var Ye=null,St=null,Ke=J,at=J=0,kr=null;Ke!==null&&at<ie.length;at++){Ke.index>at?(kr=Ke,Ke=null):kr=Ke.sibling;var zt=ce(ee,Ke,ie[at],Ee);if(zt===null){Ke===null&&(Ke=kr);break}l&&Ke&&zt.alternate===null&&u(ee,Ke),J=S(zt,J,at),St===null?Ye=zt:St.sibling=zt,St=zt,Ke=kr}if(at===ie.length)return h(ee,Ke),qt&&lc(ee,at),Ye;if(Ke===null){for(;at<ie.length;at++)Ke=Se(ee,ie[at],Ee),Ke!==null&&(J=S(Ke,J,at),St===null?Ye=Ke:St.sibling=Ke,St=Ke);return qt&&lc(ee,at),Ye}for(Ke=m(Ke);at<ie.length;at++)kr=ue(Ke,ee,at,ie[at],Ee),kr!==null&&(l&&kr.alternate!==null&&Ke.delete(kr.key===null?at:kr.key),J=S(kr,J,at),St===null?Ye=kr:St.sibling=kr,St=kr);return l&&Ke.forEach(function(rl){return u(ee,rl)}),qt&&lc(ee,at),Ye}function it(ee,J,ie,Ee){if(ie==null)throw Error(r(151));for(var Ye=null,St=null,Ke=J,at=J=0,kr=null,zt=ie.next();Ke!==null&&!zt.done;at++,zt=ie.next()){Ke.index>at?(kr=Ke,Ke=null):kr=Ke.sibling;var rl=ce(ee,Ke,zt.value,Ee);if(rl===null){Ke===null&&(Ke=kr);break}l&&Ke&&rl.alternate===null&&u(ee,Ke),J=S(rl,J,at),St===null?Ye=rl:St.sibling=rl,St=rl,Ke=kr}if(zt.done)return h(ee,Ke),qt&&lc(ee,at),Ye;if(Ke===null){for(;!zt.done;at++,zt=ie.next())zt=Se(ee,zt.value,Ee),zt!==null&&(J=S(zt,J,at),St===null?Ye=zt:St.sibling=zt,St=zt);return qt&&lc(ee,at),Ye}for(Ke=m(Ke);!zt.done;at++,zt=ie.next())zt=ue(Ke,ee,at,zt.value,Ee),zt!==null&&(l&&zt.alternate!==null&&Ke.delete(zt.key===null?at:zt.key),J=S(zt,J,at),St===null?Ye=zt:St.sibling=zt,St=zt);return l&&Ke.forEach(function(K8){return u(ee,K8)}),qt&&lc(ee,at),Ye}function fn(ee,J,ie,Ee){if(typeof ie=="object"&&ie!==null&&ie.type===v&&ie.key===null&&(ie=ie.props.children),typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case g:e:{for(var Ye=ie.key;J!==null;){if(J.key===Ye){if(Ye=ie.type,Ye===v){if(J.tag===7){h(ee,J.sibling),Ee=_(J,ie.props.children),Ee.return=ee,ee=Ee;break e}}else if(J.elementType===Ye||typeof Ye=="object"&&Ye!==null&&Ye.$$typeof===R&&bE(Ye)===J.type){h(ee,J.sibling),Ee=_(J,ie.props),Xf(Ee,ie),Ee.return=ee,ee=Ee;break e}h(ee,J);break}else u(ee,J);J=J.sibling}ie.type===v?(Ee=sc(ie.props.children,ee.mode,Ee,ie.key),Ee.return=ee,ee=Ee):(Ee=Cp(ie.type,ie.key,ie.props,null,ee.mode,Ee),Xf(Ee,ie),Ee.return=ee,ee=Ee)}return U(ee);case y:e:{for(Ye=ie.key;J!==null;){if(J.key===Ye)if(J.tag===4&&J.stateNode.containerInfo===ie.containerInfo&&J.stateNode.implementation===ie.implementation){h(ee,J.sibling),Ee=_(J,ie.children||[]),Ee.return=ee,ee=Ee;break e}else{h(ee,J);break}else u(ee,J);J=J.sibling}Ee=Fy(ie,ee.mode,Ee),Ee.return=ee,ee=Ee}return U(ee);case R:return Ye=ie._init,ie=Ye(ie._payload),fn(ee,J,ie,Ee)}if(X(ie))return ct(ee,J,ie,Ee);if(k(ie)){if(Ye=k(ie),typeof Ye!="function")throw Error(r(150));return ie=Ye.call(ie),it(ee,J,ie,Ee)}if(typeof ie.then=="function")return fn(ee,J,$p(ie),Ee);if(ie.$$typeof===C)return fn(ee,J,Mp(ee,ie),Ee);Gp(ee,ie)}return typeof ie=="string"&&ie!==""||typeof ie=="number"||typeof ie=="bigint"?(ie=""+ie,J!==null&&J.tag===6?(h(ee,J.sibling),Ee=_(J,ie),Ee.return=ee,ee=Ee):(h(ee,J),Ee=Vy(ie,ee.mode,Ee),Ee.return=ee,ee=Ee),U(ee)):h(ee,J)}return function(ee,J,ie,Ee){try{qf=0;var Ye=fn(ee,J,ie,Ee);return Lu=null,Ye}catch(Ke){if(Ke===Ff||Ke===Pp)throw Ke;var St=ji(29,Ke,null,ee.mode);return St.lanes=Ee,St.return=ee,St}finally{}}}var Bu=AE(!0),EE=AE(!1),oa=ge(null),as=null;function Ho(l){var u=l.alternate;Ae(wr,wr.current&1),Ae(oa,l),as===null&&(u===null||Ou.current!==null||u.memoizedState!==null)&&(as=l)}function SE(l){if(l.tag===22){if(Ae(wr,wr.current),Ae(oa,l),as===null){var u=l.alternate;u!==null&&u.memoizedState!==null&&(as=l)}}else zo()}function zo(){Ae(wr,wr.current),Ae(oa,oa.current)}function qs(l){we(oa),as===l&&(as=null),we(wr)}var wr=ge(0);function Wp(l){for(var u=l;u!==null;){if(u.tag===13){var h=u.memoizedState;if(h!==null&&(h=h.dehydrated,h===null||h.data==="$?"||ox(h)))return u}else if(u.tag===19&&u.memoizedProps.revealOrder!==void 0){if((u.flags&128)!==0)return u}else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===l)break;for(;u.sibling===null;){if(u.return===null||u.return===l)return null;u=u.return}u.sibling.return=u.return,u=u.sibling}return null}function vv(l,u,h,m){u=l.memoizedState,h=h(m,u),h=h==null?u:f({},u,h),l.memoizedState=h,l.lanes===0&&(l.updateQueue.baseState=h)}var xv={enqueueSetState:function(l,u,h){l=l._reactInternals;var m=$i(),_=Fo(m);_.payload=u,h!=null&&(_.callback=h),u=jo(l,_,m),u!==null&&(Gi(u,l,m),Uf(u,l,m))},enqueueReplaceState:function(l,u,h){l=l._reactInternals;var m=$i(),_=Fo(m);_.tag=1,_.payload=u,h!=null&&(_.callback=h),u=jo(l,_,m),u!==null&&(Gi(u,l,m),Uf(u,l,m))},enqueueForceUpdate:function(l,u){l=l._reactInternals;var h=$i(),m=Fo(h);m.tag=2,u!=null&&(m.callback=u),u=jo(l,m,h),u!==null&&(Gi(u,l,h),Uf(u,l,h))}};function TE(l,u,h,m,_,S,U){return l=l.stateNode,typeof l.shouldComponentUpdate=="function"?l.shouldComponentUpdate(m,S,U):u.prototype&&u.prototype.isPureReactComponent?!Mf(h,m)||!Mf(_,S):!0}function CE(l,u,h,m){l=u.state,typeof u.componentWillReceiveProps=="function"&&u.componentWillReceiveProps(h,m),typeof u.UNSAFE_componentWillReceiveProps=="function"&&u.UNSAFE_componentWillReceiveProps(h,m),u.state!==l&&xv.enqueueReplaceState(u,u.state,null)}function gc(l,u){var h=u;if("ref"in u){h={};for(var m in u)m!=="ref"&&(h[m]=u[m])}if(l=l.defaultProps){h===u&&(h=f({},h));for(var _ in l)h[_]===void 0&&(h[_]=l[_])}return h}var Yp=typeof reportError=="function"?reportError:function(l){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var u=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof l=="object"&&l!==null&&typeof l.message=="string"?String(l.message):String(l),error:l});if(!window.dispatchEvent(u))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",l);return}console.error(l)};function IE(l){Yp(l)}function DE(l){console.error(l)}function RE(l){Yp(l)}function qp(l,u){try{var h=l.onUncaughtError;h(u.value,{componentStack:u.stack})}catch(m){setTimeout(function(){throw m})}}function ME(l,u,h){try{var m=l.onCaughtError;m(h.value,{componentStack:h.stack,errorBoundary:u.tag===1?u.stateNode:null})}catch(_){setTimeout(function(){throw _})}}function wv(l,u,h){return h=Fo(h),h.tag=3,h.payload={element:null},h.callback=function(){qp(l,u)},h}function OE(l){return l=Fo(l),l.tag=3,l}function PE(l,u,h,m){var _=h.type.getDerivedStateFromError;if(typeof _=="function"){var S=m.value;l.payload=function(){return _(S)},l.callback=function(){ME(u,h,m)}}var U=h.stateNode;U!==null&&typeof U.componentDidCatch=="function"&&(l.callback=function(){ME(u,h,m),typeof _!="function"&&(Xo===null?Xo=new Set([this]):Xo.add(this));var z=m.stack;this.componentDidCatch(m.value,{componentStack:z!==null?z:""})})}function Kk(l,u,h,m,_){if(h.flags|=32768,m!==null&&typeof m=="object"&&typeof m.then=="function"){if(u=h.alternate,u!==null&&Lf(u,h,_,!0),h=oa.current,h!==null){switch(h.tag){case 13:return as===null?$v():h.alternate===null&&Fn===0&&(Fn=3),h.flags&=-257,h.flags|=65536,h.lanes=_,m===Xy?h.flags|=16384:(u=h.updateQueue,u===null?h.updateQueue=new Set([m]):u.add(m),Wv(l,m,_)),!1;case 22:return h.flags|=65536,m===Xy?h.flags|=16384:(u=h.updateQueue,u===null?(u={transitions:null,markerInstances:null,retryQueue:new Set([m])},h.updateQueue=u):(h=u.retryQueue,h===null?u.retryQueue=new Set([m]):h.add(m)),Wv(l,m,_)),!1}throw Error(r(435,h.tag))}return Wv(l,m,_),$v(),!1}if(qt)return u=oa.current,u!==null?((u.flags&65536)===0&&(u.flags|=256),u.flags|=65536,u.lanes=_,m!==Hy&&(l=Error(r(422),{cause:m}),Nf(ra(l,h)))):(m!==Hy&&(u=Error(r(423),{cause:m}),Nf(ra(u,h))),l=l.current.alternate,l.flags|=65536,_&=-_,l.lanes|=_,m=ra(m,h),_=wv(l.stateNode,m,_),Zy(l,_),Fn!==4&&(Fn=2)),!1;var S=Error(r(520),{cause:m});if(S=ra(S,h),nh===null?nh=[S]:nh.push(S),Fn!==4&&(Fn=2),u===null)return!0;m=ra(m,h),h=u;do{switch(h.tag){case 3:return h.flags|=65536,l=_&-_,h.lanes|=l,l=wv(h.stateNode,m,l),Zy(h,l),!1;case 1:if(u=h.type,S=h.stateNode,(h.flags&128)===0&&(typeof u.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(Xo===null||!Xo.has(S))))return h.flags|=65536,_&=-_,h.lanes|=_,_=OE(_),PE(_,l,h,m),Zy(h,_),!1}h=h.return}while(h!==null);return!1}var kE=Error(r(461)),Or=!1;function Wr(l,u,h,m){u.child=l===null?EE(u,null,h,m):Bu(u,l.child,h,m)}function NE(l,u,h,m,_){h=h.render;var S=u.ref;if("ref"in m){var U={};for(var z in m)z!=="ref"&&(U[z]=m[z])}else U=m;return fc(u),m=rv(l,u,h,U,S,_),z=iv(),l!==null&&!Or?(av(l,u,_),Xs(l,u,_)):(qt&&z&&jy(u),u.flags|=1,Wr(l,u,m,_),u.child)}function LE(l,u,h,m,_){if(l===null){var S=h.type;return typeof S=="function"&&!By(S)&&S.defaultProps===void 0&&h.compare===null?(u.tag=15,u.type=S,BE(l,u,S,m,_)):(l=Cp(h.type,null,m,u,u.mode,_),l.ref=u.ref,l.return=u,u.child=l)}if(S=l.child,!Iv(l,_)){var U=S.memoizedProps;if(h=h.compare,h=h!==null?h:Mf,h(U,m)&&l.ref===u.ref)return Xs(l,u,_)}return u.flags|=1,l=Hs(S,m),l.ref=u.ref,l.return=u,u.child=l}function BE(l,u,h,m,_){if(l!==null){var S=l.memoizedProps;if(Mf(S,m)&&l.ref===u.ref)if(Or=!1,u.pendingProps=m=S,Iv(l,_))(l.flags&131072)!==0&&(Or=!0);else return u.lanes=l.lanes,Xs(l,u,_)}return _v(l,u,h,m,_)}function VE(l,u,h){var m=u.pendingProps,_=m.children,S=l!==null?l.memoizedState:null;if(m.mode==="hidden"){if((u.flags&128)!==0){if(m=S!==null?S.baseLanes|h:h,l!==null){for(_=u.child=l.child,S=0;_!==null;)S=S|_.lanes|_.childLanes,_=_.sibling;u.childLanes=S&~m}else u.childLanes=0,u.child=null;return FE(l,u,m,h)}if((h&536870912)!==0)u.memoizedState={baseLanes:0,cachePool:null},l!==null&&Op(u,S!==null?S.cachePool:null),S!==null?BA(u,S):ev(),SE(u);else return u.lanes=u.childLanes=536870912,FE(l,u,S!==null?S.baseLanes|h:h,h)}else S!==null?(Op(u,S.cachePool),BA(u,S),zo(),u.memoizedState=null):(l!==null&&Op(u,null),ev(),zo());return Wr(l,u,_,h),u.child}function FE(l,u,h,m){var _=qy();return _=_===null?null:{parent:xr._currentValue,pool:_},u.memoizedState={baseLanes:h,cachePool:_},l!==null&&Op(u,null),ev(),SE(u),l!==null&&Lf(l,u,m,!0),null}function Xp(l,u){var h=u.ref;if(h===null)l!==null&&l.ref!==null&&(u.flags|=4194816);else{if(typeof h!="function"&&typeof h!="object")throw Error(r(284));(l===null||l.ref!==h)&&(u.flags|=4194816)}}function _v(l,u,h,m,_){return fc(u),h=rv(l,u,h,m,void 0,_),m=iv(),l!==null&&!Or?(av(l,u,_),Xs(l,u,_)):(qt&&m&&jy(u),u.flags|=1,Wr(l,u,h,_),u.child)}function jE(l,u,h,m,_,S){return fc(u),u.updateQueue=null,h=FA(u,m,h,_),VA(l),m=iv(),l!==null&&!Or?(av(l,u,S),Xs(l,u,S)):(qt&&m&&jy(u),u.flags|=1,Wr(l,u,h,S),u.child)}function UE(l,u,h,m,_){if(fc(u),u.stateNode===null){var S=Cu,U=h.contextType;typeof U=="object"&&U!==null&&(S=ri(U)),S=new h(m,S),u.memoizedState=S.state!==null&&S.state!==void 0?S.state:null,S.updater=xv,u.stateNode=S,S._reactInternals=u,S=u.stateNode,S.props=m,S.state=u.memoizedState,S.refs={},Ky(u),U=h.contextType,S.context=typeof U=="object"&&U!==null?ri(U):Cu,S.state=u.memoizedState,U=h.getDerivedStateFromProps,typeof U=="function"&&(vv(u,h,U,m),S.state=u.memoizedState),typeof h.getDerivedStateFromProps=="function"||typeof S.getSnapshotBeforeUpdate=="function"||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(U=S.state,typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount(),U!==S.state&&xv.enqueueReplaceState(S,S.state,null),zf(u,m,S,_),Hf(),S.state=u.memoizedState),typeof S.componentDidMount=="function"&&(u.flags|=4194308),m=!0}else if(l===null){S=u.stateNode;var z=u.memoizedProps,K=gc(h,z);S.props=K;var oe=S.context,_e=h.contextType;U=Cu,typeof _e=="object"&&_e!==null&&(U=ri(_e));var Se=h.getDerivedStateFromProps;_e=typeof Se=="function"||typeof S.getSnapshotBeforeUpdate=="function",z=u.pendingProps!==z,_e||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(z||oe!==U)&&CE(u,S,m,U),Vo=!1;var ce=u.memoizedState;S.state=ce,zf(u,m,S,_),Hf(),oe=u.memoizedState,z||ce!==oe||Vo?(typeof Se=="function"&&(vv(u,h,Se,m),oe=u.memoizedState),(K=Vo||TE(u,h,K,m,ce,oe,U))?(_e||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount()),typeof S.componentDidMount=="function"&&(u.flags|=4194308)):(typeof S.componentDidMount=="function"&&(u.flags|=4194308),u.memoizedProps=m,u.memoizedState=oe),S.props=m,S.state=oe,S.context=U,m=K):(typeof S.componentDidMount=="function"&&(u.flags|=4194308),m=!1)}else{S=u.stateNode,Qy(l,u),U=u.memoizedProps,_e=gc(h,U),S.props=_e,Se=u.pendingProps,ce=S.context,oe=h.contextType,K=Cu,typeof oe=="object"&&oe!==null&&(K=ri(oe)),z=h.getDerivedStateFromProps,(oe=typeof z=="function"||typeof S.getSnapshotBeforeUpdate=="function")||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(U!==Se||ce!==K)&&CE(u,S,m,K),Vo=!1,ce=u.memoizedState,S.state=ce,zf(u,m,S,_),Hf();var ue=u.memoizedState;U!==Se||ce!==ue||Vo||l!==null&&l.dependencies!==null&&Rp(l.dependencies)?(typeof z=="function"&&(vv(u,h,z,m),ue=u.memoizedState),(_e=Vo||TE(u,h,_e,m,ce,ue,K)||l!==null&&l.dependencies!==null&&Rp(l.dependencies))?(oe||typeof S.UNSAFE_componentWillUpdate!="function"&&typeof S.componentWillUpdate!="function"||(typeof S.componentWillUpdate=="function"&&S.componentWillUpdate(m,ue,K),typeof S.UNSAFE_componentWillUpdate=="function"&&S.UNSAFE_componentWillUpdate(m,ue,K)),typeof S.componentDidUpdate=="function"&&(u.flags|=4),typeof S.getSnapshotBeforeUpdate=="function"&&(u.flags|=1024)):(typeof S.componentDidUpdate!="function"||U===l.memoizedProps&&ce===l.memoizedState||(u.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||U===l.memoizedProps&&ce===l.memoizedState||(u.flags|=1024),u.memoizedProps=m,u.memoizedState=ue),S.props=m,S.state=ue,S.context=K,m=_e):(typeof S.componentDidUpdate!="function"||U===l.memoizedProps&&ce===l.memoizedState||(u.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||U===l.memoizedProps&&ce===l.memoizedState||(u.flags|=1024),m=!1)}return S=m,Xp(l,u),m=(u.flags&128)!==0,S||m?(S=u.stateNode,h=m&&typeof h.getDerivedStateFromError!="function"?null:S.render(),u.flags|=1,l!==null&&m?(u.child=Bu(u,l.child,null,_),u.child=Bu(u,null,h,_)):Wr(l,u,h,_),u.memoizedState=S.state,l=u.child):l=Xs(l,u,_),l}function HE(l,u,h,m){return kf(),u.flags|=256,Wr(l,u,h,m),u.child}var bv={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Av(l){return{baseLanes:l,cachePool:DA()}}function Ev(l,u,h){return l=l!==null?l.childLanes&~h:0,u&&(l|=la),l}function zE(l,u,h){var m=u.pendingProps,_=!1,S=(u.flags&128)!==0,U;if((U=S)||(U=l!==null&&l.memoizedState===null?!1:(wr.current&2)!==0),U&&(_=!0,u.flags&=-129),U=(u.flags&32)!==0,u.flags&=-33,l===null){if(qt){if(_?Ho(u):zo(),qt){var z=Vn,K;if(K=z){e:{for(K=z,z=is;K.nodeType!==8;){if(!z){z=null;break e}if(K=Ca(K.nextSibling),K===null){z=null;break e}}z=K}z!==null?(u.memoizedState={dehydrated:z,treeContext:oc!==null?{id:zs,overflow:$s}:null,retryLane:536870912,hydrationErrors:null},K=ji(18,null,null,0),K.stateNode=z,K.return=u,u.child=K,wi=u,Vn=null,K=!0):K=!1}K||uc(u)}if(z=u.memoizedState,z!==null&&(z=z.dehydrated,z!==null))return ox(z)?u.lanes=32:u.lanes=536870912,null;qs(u)}return z=m.children,m=m.fallback,_?(zo(),_=u.mode,z=Kp({mode:"hidden",children:z},_),m=sc(m,_,h,null),z.return=u,m.return=u,z.sibling=m,u.child=z,_=u.child,_.memoizedState=Av(h),_.childLanes=Ev(l,U,h),u.memoizedState=bv,m):(Ho(u),Sv(u,z))}if(K=l.memoizedState,K!==null&&(z=K.dehydrated,z!==null)){if(S)u.flags&256?(Ho(u),u.flags&=-257,u=Tv(l,u,h)):u.memoizedState!==null?(zo(),u.child=l.child,u.flags|=128,u=null):(zo(),_=m.fallback,z=u.mode,m=Kp({mode:"visible",children:m.children},z),_=sc(_,z,h,null),_.flags|=2,m.return=u,_.return=u,m.sibling=_,u.child=m,Bu(u,l.child,null,h),m=u.child,m.memoizedState=Av(h),m.childLanes=Ev(l,U,h),u.memoizedState=bv,u=_);else if(Ho(u),ox(z)){if(U=z.nextSibling&&z.nextSibling.dataset,U)var oe=U.dgst;U=oe,m=Error(r(419)),m.stack="",m.digest=U,Nf({value:m,source:null,stack:null}),u=Tv(l,u,h)}else if(Or||Lf(l,u,h,!1),U=(h&l.childLanes)!==0,Or||U){if(U=wn,U!==null&&(m=h&-h,m=(m&42)!==0?1:Ms(m),m=(m&(U.suspendedLanes|h))!==0?0:m,m!==0&&m!==K.retryLane))throw K.retryLane=m,Tu(l,m),Gi(U,l,m),kE;z.data==="$?"||$v(),u=Tv(l,u,h)}else z.data==="$?"?(u.flags|=192,u.child=l.child,u=null):(l=K.treeContext,Vn=Ca(z.nextSibling),wi=u,qt=!0,cc=null,is=!1,l!==null&&(aa[sa++]=zs,aa[sa++]=$s,aa[sa++]=oc,zs=l.id,$s=l.overflow,oc=u),u=Sv(u,m.children),u.flags|=4096);return u}return _?(zo(),_=m.fallback,z=u.mode,K=l.child,oe=K.sibling,m=Hs(K,{mode:"hidden",children:m.children}),m.subtreeFlags=K.subtreeFlags&65011712,oe!==null?_=Hs(oe,_):(_=sc(_,z,h,null),_.flags|=2),_.return=u,m.return=u,m.sibling=_,u.child=m,m=_,_=u.child,z=l.child.memoizedState,z===null?z=Av(h):(K=z.cachePool,K!==null?(oe=xr._currentValue,K=K.parent!==oe?{parent:oe,pool:oe}:K):K=DA(),z={baseLanes:z.baseLanes|h,cachePool:K}),_.memoizedState=z,_.childLanes=Ev(l,U,h),u.memoizedState=bv,m):(Ho(u),h=l.child,l=h.sibling,h=Hs(h,{mode:"visible",children:m.children}),h.return=u,h.sibling=null,l!==null&&(U=u.deletions,U===null?(u.deletions=[l],u.flags|=16):U.push(l)),u.child=h,u.memoizedState=null,h)}function Sv(l,u){return u=Kp({mode:"visible",children:u},l.mode),u.return=l,l.child=u}function Kp(l,u){return l=ji(22,l,null,u),l.lanes=0,l.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},l}function Tv(l,u,h){return Bu(u,l.child,null,h),l=Sv(u,u.pendingProps.children),l.flags|=2,u.memoizedState=null,l}function $E(l,u,h){l.lanes|=u;var m=l.alternate;m!==null&&(m.lanes|=u),$y(l.return,u,h)}function Cv(l,u,h,m,_){var S=l.memoizedState;S===null?l.memoizedState={isBackwards:u,rendering:null,renderingStartTime:0,last:m,tail:h,tailMode:_}:(S.isBackwards=u,S.rendering=null,S.renderingStartTime=0,S.last=m,S.tail=h,S.tailMode=_)}function GE(l,u,h){var m=u.pendingProps,_=m.revealOrder,S=m.tail;if(Wr(l,u,m.children,h),m=wr.current,(m&2)!==0)m=m&1|2,u.flags|=128;else{if(l!==null&&(l.flags&128)!==0)e:for(l=u.child;l!==null;){if(l.tag===13)l.memoizedState!==null&&$E(l,h,u);else if(l.tag===19)$E(l,h,u);else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===u)break e;for(;l.sibling===null;){if(l.return===null||l.return===u)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}m&=1}switch(Ae(wr,m),_){case"forwards":for(h=u.child,_=null;h!==null;)l=h.alternate,l!==null&&Wp(l)===null&&(_=h),h=h.sibling;h=_,h===null?(_=u.child,u.child=null):(_=h.sibling,h.sibling=null),Cv(u,!1,_,h,S);break;case"backwards":for(h=null,_=u.child,u.child=null;_!==null;){if(l=_.alternate,l!==null&&Wp(l)===null){u.child=_;break}l=_.sibling,_.sibling=h,h=_,_=l}Cv(u,!0,h,null,S);break;case"together":Cv(u,!1,null,null,void 0);break;default:u.memoizedState=null}return u.child}function Xs(l,u,h){if(l!==null&&(u.dependencies=l.dependencies),qo|=u.lanes,(h&u.childLanes)===0)if(l!==null){if(Lf(l,u,h,!1),(h&u.childLanes)===0)return null}else return null;if(l!==null&&u.child!==l.child)throw Error(r(153));if(u.child!==null){for(l=u.child,h=Hs(l,l.pendingProps),u.child=h,h.return=u;l.sibling!==null;)l=l.sibling,h=h.sibling=Hs(l,l.pendingProps),h.return=u;h.sibling=null}return u.child}function Iv(l,u){return(l.lanes&u)!==0?!0:(l=l.dependencies,!!(l!==null&&Rp(l)))}function Qk(l,u,h){switch(u.tag){case 3:Qe(u,u.stateNode.containerInfo),Bo(u,xr,l.memoizedState.cache),kf();break;case 27:case 5:me(u);break;case 4:Qe(u,u.stateNode.containerInfo);break;case 10:Bo(u,u.type,u.memoizedProps.value);break;case 13:var m=u.memoizedState;if(m!==null)return m.dehydrated!==null?(Ho(u),u.flags|=128,null):(h&u.child.childLanes)!==0?zE(l,u,h):(Ho(u),l=Xs(l,u,h),l!==null?l.sibling:null);Ho(u);break;case 19:var _=(l.flags&128)!==0;if(m=(h&u.childLanes)!==0,m||(Lf(l,u,h,!1),m=(h&u.childLanes)!==0),_){if(m)return GE(l,u,h);u.flags|=128}if(_=u.memoizedState,_!==null&&(_.rendering=null,_.tail=null,_.lastEffect=null),Ae(wr,wr.current),m)break;return null;case 22:case 23:return u.lanes=0,VE(l,u,h);case 24:Bo(u,xr,l.memoizedState.cache)}return Xs(l,u,h)}function WE(l,u,h){if(l!==null)if(l.memoizedProps!==u.pendingProps)Or=!0;else{if(!Iv(l,h)&&(u.flags&128)===0)return Or=!1,Qk(l,u,h);Or=(l.flags&131072)!==0}else Or=!1,qt&&(u.flags&1048576)!==0&&bA(u,Dp,u.index);switch(u.lanes=0,u.tag){case 16:e:{l=u.pendingProps;var m=u.elementType,_=m._init;if(m=_(m._payload),u.type=m,typeof m=="function")By(m)?(l=gc(m,l),u.tag=1,u=UE(null,u,m,l,h)):(u.tag=0,u=_v(null,u,m,l,h));else{if(m!=null){if(_=m.$$typeof,_===D){u.tag=11,u=NE(null,u,m,l,h);break e}else if(_===M){u.tag=14,u=LE(null,u,m,l,h);break e}}throw u=q(m)||m,Error(r(306,u,""))}}return u;case 0:return _v(l,u,u.type,u.pendingProps,h);case 1:return m=u.type,_=gc(m,u.pendingProps),UE(l,u,m,_,h);case 3:e:{if(Qe(u,u.stateNode.containerInfo),l===null)throw Error(r(387));m=u.pendingProps;var S=u.memoizedState;_=S.element,Qy(l,u),zf(u,m,null,h);var U=u.memoizedState;if(m=U.cache,Bo(u,xr,m),m!==S.cache&&Gy(u,[xr],h,!0),Hf(),m=U.element,S.isDehydrated)if(S={element:m,isDehydrated:!1,cache:U.cache},u.updateQueue.baseState=S,u.memoizedState=S,u.flags&256){u=HE(l,u,m,h);break e}else if(m!==_){_=ra(Error(r(424)),u),Nf(_),u=HE(l,u,m,h);break e}else{switch(l=u.stateNode.containerInfo,l.nodeType){case 9:l=l.body;break;default:l=l.nodeName==="HTML"?l.ownerDocument.body:l}for(Vn=Ca(l.firstChild),wi=u,qt=!0,cc=null,is=!0,h=EE(u,null,m,h),u.child=h;h;)h.flags=h.flags&-3|4096,h=h.sibling}else{if(kf(),m===_){u=Xs(l,u,h);break e}Wr(l,u,m,h)}u=u.child}return u;case 26:return Xp(l,u),l===null?(h=KS(u.type,null,u.pendingProps,null))?u.memoizedState=h:qt||(h=u.type,l=u.pendingProps,m=ug(He.current).createElement(h),m[mr]=u,m[ir]=l,qr(m,h,l),qn(m),u.stateNode=m):u.memoizedState=KS(u.type,l.memoizedProps,u.pendingProps,l.memoizedState),null;case 27:return me(u),l===null&&qt&&(m=u.stateNode=YS(u.type,u.pendingProps,He.current),wi=u,is=!0,_=Vn,Zo(u.type)?(lx=_,Vn=Ca(m.firstChild)):Vn=_),Wr(l,u,u.pendingProps.children,h),Xp(l,u),l===null&&(u.flags|=4194304),u.child;case 5:return l===null&&qt&&((_=m=Vn)&&(m=S8(m,u.type,u.pendingProps,is),m!==null?(u.stateNode=m,wi=u,Vn=Ca(m.firstChild),is=!1,_=!0):_=!1),_||uc(u)),me(u),_=u.type,S=u.pendingProps,U=l!==null?l.memoizedProps:null,m=S.children,ix(_,S)?m=null:U!==null&&ix(_,U)&&(u.flags|=32),u.memoizedState!==null&&(_=rv(l,u,zk,null,null,h),dh._currentValue=_),Xp(l,u),Wr(l,u,m,h),u.child;case 6:return l===null&&qt&&((l=h=Vn)&&(h=T8(h,u.pendingProps,is),h!==null?(u.stateNode=h,wi=u,Vn=null,l=!0):l=!1),l||uc(u)),null;case 13:return zE(l,u,h);case 4:return Qe(u,u.stateNode.containerInfo),m=u.pendingProps,l===null?u.child=Bu(u,null,m,h):Wr(l,u,m,h),u.child;case 11:return NE(l,u,u.type,u.pendingProps,h);case 7:return Wr(l,u,u.pendingProps,h),u.child;case 8:return Wr(l,u,u.pendingProps.children,h),u.child;case 12:return Wr(l,u,u.pendingProps.children,h),u.child;case 10:return m=u.pendingProps,Bo(u,u.type,m.value),Wr(l,u,m.children,h),u.child;case 9:return _=u.type._context,m=u.pendingProps.children,fc(u),_=ri(_),m=m(_),u.flags|=1,Wr(l,u,m,h),u.child;case 14:return LE(l,u,u.type,u.pendingProps,h);case 15:return BE(l,u,u.type,u.pendingProps,h);case 19:return GE(l,u,h);case 31:return m=u.pendingProps,h=u.mode,m={mode:m.mode,children:m.children},l===null?(h=Kp(m,h),h.ref=u.ref,u.child=h,h.return=u,u=h):(h=Hs(l.child,m),h.ref=u.ref,u.child=h,h.return=u,u=h),u;case 22:return VE(l,u,h);case 24:return fc(u),m=ri(xr),l===null?(_=qy(),_===null&&(_=wn,S=Wy(),_.pooledCache=S,S.refCount++,S!==null&&(_.pooledCacheLanes|=h),_=S),u.memoizedState={parent:m,cache:_},Ky(u),Bo(u,xr,_)):((l.lanes&h)!==0&&(Qy(l,u),zf(u,null,null,h),Hf()),_=l.memoizedState,S=u.memoizedState,_.parent!==m?(_={parent:m,cache:m},u.memoizedState=_,u.lanes===0&&(u.memoizedState=u.updateQueue.baseState=_),Bo(u,xr,m)):(m=S.cache,Bo(u,xr,m),m!==_.cache&&Gy(u,[xr],h,!0))),Wr(l,u,u.pendingProps.children,h),u.child;case 29:throw u.pendingProps}throw Error(r(156,u.tag))}function Ks(l){l.flags|=4}function YE(l,u){if(u.type!=="stylesheet"||(u.state.loading&4)!==0)l.flags&=-16777217;else if(l.flags|=16777216,!tT(u)){if(u=oa.current,u!==null&&((Vt&4194048)===Vt?as!==null:(Vt&62914560)!==Vt&&(Vt&536870912)===0||u!==as))throw jf=Xy,RA;l.flags|=8192}}function Qp(l,u){u!==null&&(l.flags|=4),l.flags&16384&&(u=l.tag!==22?zr():536870912,l.lanes|=u,Uu|=u)}function Kf(l,u){if(!qt)switch(l.tailMode){case"hidden":u=l.tail;for(var h=null;u!==null;)u.alternate!==null&&(h=u),u=u.sibling;h===null?l.tail=null:h.sibling=null;break;case"collapsed":h=l.tail;for(var m=null;h!==null;)h.alternate!==null&&(m=h),h=h.sibling;m===null?u||l.tail===null?l.tail=null:l.tail.sibling=null:m.sibling=null}}function Nn(l){var u=l.alternate!==null&&l.alternate.child===l.child,h=0,m=0;if(u)for(var _=l.child;_!==null;)h|=_.lanes|_.childLanes,m|=_.subtreeFlags&65011712,m|=_.flags&65011712,_.return=l,_=_.sibling;else for(_=l.child;_!==null;)h|=_.lanes|_.childLanes,m|=_.subtreeFlags,m|=_.flags,_.return=l,_=_.sibling;return l.subtreeFlags|=m,l.childLanes=h,u}function Zk(l,u,h){var m=u.pendingProps;switch(Uy(u),u.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Nn(u),null;case 1:return Nn(u),null;case 3:return h=u.stateNode,m=null,l!==null&&(m=l.memoizedState.cache),u.memoizedState.cache!==m&&(u.flags|=2048),Ws(xr),ae(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(l===null||l.child===null)&&(Pf(u)?Ks(u):l===null||l.memoizedState.isDehydrated&&(u.flags&256)===0||(u.flags|=1024,SA())),Nn(u),null;case 26:return h=u.memoizedState,l===null?(Ks(u),h!==null?(Nn(u),YE(u,h)):(Nn(u),u.flags&=-16777217)):h?h!==l.memoizedState?(Ks(u),Nn(u),YE(u,h)):(Nn(u),u.flags&=-16777217):(l.memoizedProps!==m&&Ks(u),Nn(u),u.flags&=-16777217),null;case 27:he(u),h=He.current;var _=u.type;if(l!==null&&u.stateNode!=null)l.memoizedProps!==m&&Ks(u);else{if(!m){if(u.stateNode===null)throw Error(r(166));return Nn(u),null}l=Pe.current,Pf(u)?AA(u):(l=YS(_,m,h),u.stateNode=l,Ks(u))}return Nn(u),null;case 5:if(he(u),h=u.type,l!==null&&u.stateNode!=null)l.memoizedProps!==m&&Ks(u);else{if(!m){if(u.stateNode===null)throw Error(r(166));return Nn(u),null}if(l=Pe.current,Pf(u))AA(u);else{switch(_=ug(He.current),l){case 1:l=_.createElementNS("http://www.w3.org/2000/svg",h);break;case 2:l=_.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;default:switch(h){case"svg":l=_.createElementNS("http://www.w3.org/2000/svg",h);break;case"math":l=_.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;case"script":l=_.createElement("div"),l.innerHTML="<script><\/script>",l=l.removeChild(l.firstChild);break;case"select":l=typeof m.is=="string"?_.createElement("select",{is:m.is}):_.createElement("select"),m.multiple?l.multiple=!0:m.size&&(l.size=m.size);break;default:l=typeof m.is=="string"?_.createElement(h,{is:m.is}):_.createElement(h)}}l[mr]=u,l[ir]=m;e:for(_=u.child;_!==null;){if(_.tag===5||_.tag===6)l.appendChild(_.stateNode);else if(_.tag!==4&&_.tag!==27&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===u)break e;for(;_.sibling===null;){if(_.return===null||_.return===u)break e;_=_.return}_.sibling.return=_.return,_=_.sibling}u.stateNode=l;e:switch(qr(l,h,m),h){case"button":case"input":case"select":case"textarea":l=!!m.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&Ks(u)}}return Nn(u),u.flags&=-16777217,null;case 6:if(l&&u.stateNode!=null)l.memoizedProps!==m&&Ks(u);else{if(typeof m!="string"&&u.stateNode===null)throw Error(r(166));if(l=He.current,Pf(u)){if(l=u.stateNode,h=u.memoizedProps,m=null,_=wi,_!==null)switch(_.tag){case 27:case 5:m=_.memoizedProps}l[mr]=u,l=!!(l.nodeValue===h||m!==null&&m.suppressHydrationWarning===!0||jS(l.nodeValue,h)),l||uc(u)}else l=ug(l).createTextNode(m),l[mr]=u,u.stateNode=l}return Nn(u),null;case 13:if(m=u.memoizedState,l===null||l.memoizedState!==null&&l.memoizedState.dehydrated!==null){if(_=Pf(u),m!==null&&m.dehydrated!==null){if(l===null){if(!_)throw Error(r(318));if(_=u.memoizedState,_=_!==null?_.dehydrated:null,!_)throw Error(r(317));_[mr]=u}else kf(),(u.flags&128)===0&&(u.memoizedState=null),u.flags|=4;Nn(u),_=!1}else _=SA(),l!==null&&l.memoizedState!==null&&(l.memoizedState.hydrationErrors=_),_=!0;if(!_)return u.flags&256?(qs(u),u):(qs(u),null)}if(qs(u),(u.flags&128)!==0)return u.lanes=h,u;if(h=m!==null,l=l!==null&&l.memoizedState!==null,h){m=u.child,_=null,m.alternate!==null&&m.alternate.memoizedState!==null&&m.alternate.memoizedState.cachePool!==null&&(_=m.alternate.memoizedState.cachePool.pool);var S=null;m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(S=m.memoizedState.cachePool.pool),S!==_&&(m.flags|=2048)}return h!==l&&h&&(u.child.flags|=8192),Qp(u,u.updateQueue),Nn(u),null;case 4:return ae(),l===null&&Jv(u.stateNode.containerInfo),Nn(u),null;case 10:return Ws(u.type),Nn(u),null;case 19:if(we(wr),_=u.memoizedState,_===null)return Nn(u),null;if(m=(u.flags&128)!==0,S=_.rendering,S===null)if(m)Kf(_,!1);else{if(Fn!==0||l!==null&&(l.flags&128)!==0)for(l=u.child;l!==null;){if(S=Wp(l),S!==null){for(u.flags|=128,Kf(_,!1),l=S.updateQueue,u.updateQueue=l,Qp(u,l),u.subtreeFlags=0,l=h,h=u.child;h!==null;)_A(h,l),h=h.sibling;return Ae(wr,wr.current&1|2),u.child}l=l.sibling}_.tail!==null&&Ce()>eg&&(u.flags|=128,m=!0,Kf(_,!1),u.lanes=4194304)}else{if(!m)if(l=Wp(S),l!==null){if(u.flags|=128,m=!0,l=l.updateQueue,u.updateQueue=l,Qp(u,l),Kf(_,!0),_.tail===null&&_.tailMode==="hidden"&&!S.alternate&&!qt)return Nn(u),null}else 2*Ce()-_.renderingStartTime>eg&&h!==536870912&&(u.flags|=128,m=!0,Kf(_,!1),u.lanes=4194304);_.isBackwards?(S.sibling=u.child,u.child=S):(l=_.last,l!==null?l.sibling=S:u.child=S,_.last=S)}return _.tail!==null?(u=_.tail,_.rendering=u,_.tail=u.sibling,_.renderingStartTime=Ce(),u.sibling=null,l=wr.current,Ae(wr,m?l&1|2:l&1),u):(Nn(u),null);case 22:case 23:return qs(u),tv(),m=u.memoizedState!==null,l!==null?l.memoizedState!==null!==m&&(u.flags|=8192):m&&(u.flags|=8192),m?(h&536870912)!==0&&(u.flags&128)===0&&(Nn(u),u.subtreeFlags&6&&(u.flags|=8192)):Nn(u),h=u.updateQueue,h!==null&&Qp(u,h.retryQueue),h=null,l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(h=l.memoizedState.cachePool.pool),m=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(m=u.memoizedState.cachePool.pool),m!==h&&(u.flags|=2048),l!==null&&we(hc),null;case 24:return h=null,l!==null&&(h=l.memoizedState.cache),u.memoizedState.cache!==h&&(u.flags|=2048),Ws(xr),Nn(u),null;case 25:return null;case 30:return null}throw Error(r(156,u.tag))}function Jk(l,u){switch(Uy(u),u.tag){case 1:return l=u.flags,l&65536?(u.flags=l&-65537|128,u):null;case 3:return Ws(xr),ae(),l=u.flags,(l&65536)!==0&&(l&128)===0?(u.flags=l&-65537|128,u):null;case 26:case 27:case 5:return he(u),null;case 13:if(qs(u),l=u.memoizedState,l!==null&&l.dehydrated!==null){if(u.alternate===null)throw Error(r(340));kf()}return l=u.flags,l&65536?(u.flags=l&-65537|128,u):null;case 19:return we(wr),null;case 4:return ae(),null;case 10:return Ws(u.type),null;case 22:case 23:return qs(u),tv(),l!==null&&we(hc),l=u.flags,l&65536?(u.flags=l&-65537|128,u):null;case 24:return Ws(xr),null;case 25:return null;default:return null}}function qE(l,u){switch(Uy(u),u.tag){case 3:Ws(xr),ae();break;case 26:case 27:case 5:he(u);break;case 4:ae();break;case 13:qs(u);break;case 19:we(wr);break;case 10:Ws(u.type);break;case 22:case 23:qs(u),tv(),l!==null&&we(hc);break;case 24:Ws(xr)}}function Qf(l,u){try{var h=u.updateQueue,m=h!==null?h.lastEffect:null;if(m!==null){var _=m.next;h=_;do{if((h.tag&l)===l){m=void 0;var S=h.create,U=h.inst;m=S(),U.destroy=m}h=h.next}while(h!==_)}}catch(z){mn(u,u.return,z)}}function $o(l,u,h){try{var m=u.updateQueue,_=m!==null?m.lastEffect:null;if(_!==null){var S=_.next;m=S;do{if((m.tag&l)===l){var U=m.inst,z=U.destroy;if(z!==void 0){U.destroy=void 0,_=u;var K=h,oe=z;try{oe()}catch(_e){mn(_,K,_e)}}}m=m.next}while(m!==S)}}catch(_e){mn(u,u.return,_e)}}function XE(l){var u=l.updateQueue;if(u!==null){var h=l.stateNode;try{LA(u,h)}catch(m){mn(l,l.return,m)}}}function KE(l,u,h){h.props=gc(l.type,l.memoizedProps),h.state=l.memoizedState;try{h.componentWillUnmount()}catch(m){mn(l,u,m)}}function Zf(l,u){try{var h=l.ref;if(h!==null){switch(l.tag){case 26:case 27:case 5:var m=l.stateNode;break;case 30:m=l.stateNode;break;default:m=l.stateNode}typeof h=="function"?l.refCleanup=h(m):h.current=m}}catch(_){mn(l,u,_)}}function ss(l,u){var h=l.ref,m=l.refCleanup;if(h!==null)if(typeof m=="function")try{m()}catch(_){mn(l,u,_)}finally{l.refCleanup=null,l=l.alternate,l!=null&&(l.refCleanup=null)}else if(typeof h=="function")try{h(null)}catch(_){mn(l,u,_)}else h.current=null}function QE(l){var u=l.type,h=l.memoizedProps,m=l.stateNode;try{e:switch(u){case"button":case"input":case"select":case"textarea":h.autoFocus&&m.focus();break e;case"img":h.src?m.src=h.src:h.srcSet&&(m.srcset=h.srcSet)}}catch(_){mn(l,l.return,_)}}function Dv(l,u,h){try{var m=l.stateNode;w8(m,l.type,h,u),m[ir]=u}catch(_){mn(l,l.return,_)}}function ZE(l){return l.tag===5||l.tag===3||l.tag===26||l.tag===27&&Zo(l.type)||l.tag===4}function Rv(l){e:for(;;){for(;l.sibling===null;){if(l.return===null||ZE(l.return))return null;l=l.return}for(l.sibling.return=l.return,l=l.sibling;l.tag!==5&&l.tag!==6&&l.tag!==18;){if(l.tag===27&&Zo(l.type)||l.flags&2||l.child===null||l.tag===4)continue e;l.child.return=l,l=l.child}if(!(l.flags&2))return l.stateNode}}function Mv(l,u,h){var m=l.tag;if(m===5||m===6)l=l.stateNode,u?(h.nodeType===9?h.body:h.nodeName==="HTML"?h.ownerDocument.body:h).insertBefore(l,u):(u=h.nodeType===9?h.body:h.nodeName==="HTML"?h.ownerDocument.body:h,u.appendChild(l),h=h._reactRootContainer,h!=null||u.onclick!==null||(u.onclick=cg));else if(m!==4&&(m===27&&Zo(l.type)&&(h=l.stateNode,u=null),l=l.child,l!==null))for(Mv(l,u,h),l=l.sibling;l!==null;)Mv(l,u,h),l=l.sibling}function Zp(l,u,h){var m=l.tag;if(m===5||m===6)l=l.stateNode,u?h.insertBefore(l,u):h.appendChild(l);else if(m!==4&&(m===27&&Zo(l.type)&&(h=l.stateNode),l=l.child,l!==null))for(Zp(l,u,h),l=l.sibling;l!==null;)Zp(l,u,h),l=l.sibling}function JE(l){var u=l.stateNode,h=l.memoizedProps;try{for(var m=l.type,_=u.attributes;_.length;)u.removeAttributeNode(_[0]);qr(u,m,h),u[mr]=l,u[ir]=h}catch(S){mn(l,l.return,S)}}var Qs=!1,Kn=!1,Ov=!1,eS=typeof WeakSet=="function"?WeakSet:Set,Pr=null;function e8(l,u){if(l=l.containerInfo,nx=mg,l=dA(l),Ry(l)){if("selectionStart"in l)var h={start:l.selectionStart,end:l.selectionEnd};else e:{h=(h=l.ownerDocument)&&h.defaultView||window;var m=h.getSelection&&h.getSelection();if(m&&m.rangeCount!==0){h=m.anchorNode;var _=m.anchorOffset,S=m.focusNode;m=m.focusOffset;try{h.nodeType,S.nodeType}catch{h=null;break e}var U=0,z=-1,K=-1,oe=0,_e=0,Se=l,ce=null;t:for(;;){for(var ue;Se!==h||_!==0&&Se.nodeType!==3||(z=U+_),Se!==S||m!==0&&Se.nodeType!==3||(K=U+m),Se.nodeType===3&&(U+=Se.nodeValue.length),(ue=Se.firstChild)!==null;)ce=Se,Se=ue;for(;;){if(Se===l)break t;if(ce===h&&++oe===_&&(z=U),ce===S&&++_e===m&&(K=U),(ue=Se.nextSibling)!==null)break;Se=ce,ce=Se.parentNode}Se=ue}h=z===-1||K===-1?null:{start:z,end:K}}else h=null}h=h||{start:0,end:0}}else h=null;for(rx={focusedElem:l,selectionRange:h},mg=!1,Pr=u;Pr!==null;)if(u=Pr,l=u.child,(u.subtreeFlags&1024)!==0&&l!==null)l.return=u,Pr=l;else for(;Pr!==null;){switch(u=Pr,S=u.alternate,l=u.flags,u.tag){case 0:break;case 11:case 15:break;case 1:if((l&1024)!==0&&S!==null){l=void 0,h=u,_=S.memoizedProps,S=S.memoizedState,m=h.stateNode;try{var ct=gc(h.type,_,h.elementType===h.type);l=m.getSnapshotBeforeUpdate(ct,S),m.__reactInternalSnapshotBeforeUpdate=l}catch(it){mn(h,h.return,it)}}break;case 3:if((l&1024)!==0){if(l=u.stateNode.containerInfo,h=l.nodeType,h===9)sx(l);else if(h===1)switch(l.nodeName){case"HEAD":case"HTML":case"BODY":sx(l);break;default:l.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((l&1024)!==0)throw Error(r(163))}if(l=u.sibling,l!==null){l.return=u.return,Pr=l;break}Pr=u.return}}function tS(l,u,h){var m=h.flags;switch(h.tag){case 0:case 11:case 15:Go(l,h),m&4&&Qf(5,h);break;case 1:if(Go(l,h),m&4)if(l=h.stateNode,u===null)try{l.componentDidMount()}catch(U){mn(h,h.return,U)}else{var _=gc(h.type,u.memoizedProps);u=u.memoizedState;try{l.componentDidUpdate(_,u,l.__reactInternalSnapshotBeforeUpdate)}catch(U){mn(h,h.return,U)}}m&64&&XE(h),m&512&&Zf(h,h.return);break;case 3:if(Go(l,h),m&64&&(l=h.updateQueue,l!==null)){if(u=null,h.child!==null)switch(h.child.tag){case 27:case 5:u=h.child.stateNode;break;case 1:u=h.child.stateNode}try{LA(l,u)}catch(U){mn(h,h.return,U)}}break;case 27:u===null&&m&4&&JE(h);case 26:case 5:Go(l,h),u===null&&m&4&&QE(h),m&512&&Zf(h,h.return);break;case 12:Go(l,h);break;case 13:Go(l,h),m&4&&iS(l,h),m&64&&(l=h.memoizedState,l!==null&&(l=l.dehydrated,l!==null&&(h=c8.bind(null,h),C8(l,h))));break;case 22:if(m=h.memoizedState!==null||Qs,!m){u=u!==null&&u.memoizedState!==null||Kn,_=Qs;var S=Kn;Qs=m,(Kn=u)&&!S?Wo(l,h,(h.subtreeFlags&8772)!==0):Go(l,h),Qs=_,Kn=S}break;case 30:break;default:Go(l,h)}}function nS(l){var u=l.alternate;u!==null&&(l.alternate=null,nS(u)),l.child=null,l.deletions=null,l.sibling=null,l.tag===5&&(u=l.stateNode,u!==null&&Po(u)),l.stateNode=null,l.return=null,l.dependencies=null,l.memoizedProps=null,l.memoizedState=null,l.pendingProps=null,l.stateNode=null,l.updateQueue=null}var Mn=null,Ii=!1;function Zs(l,u,h){for(h=h.child;h!==null;)rS(l,u,h),h=h.sibling}function rS(l,u,h){if(rt&&typeof rt.onCommitFiberUnmount=="function")try{rt.onCommitFiberUnmount(tt,h)}catch{}switch(h.tag){case 26:Kn||ss(h,u),Zs(l,u,h),h.memoizedState?h.memoizedState.count--:h.stateNode&&(h=h.stateNode,h.parentNode.removeChild(h));break;case 27:Kn||ss(h,u);var m=Mn,_=Ii;Zo(h.type)&&(Mn=h.stateNode,Ii=!1),Zs(l,u,h),oh(h.stateNode),Mn=m,Ii=_;break;case 5:Kn||ss(h,u);case 6:if(m=Mn,_=Ii,Mn=null,Zs(l,u,h),Mn=m,Ii=_,Mn!==null)if(Ii)try{(Mn.nodeType===9?Mn.body:Mn.nodeName==="HTML"?Mn.ownerDocument.body:Mn).removeChild(h.stateNode)}catch(S){mn(h,u,S)}else try{Mn.removeChild(h.stateNode)}catch(S){mn(h,u,S)}break;case 18:Mn!==null&&(Ii?(l=Mn,GS(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,h.stateNode),gh(l)):GS(Mn,h.stateNode));break;case 4:m=Mn,_=Ii,Mn=h.stateNode.containerInfo,Ii=!0,Zs(l,u,h),Mn=m,Ii=_;break;case 0:case 11:case 14:case 15:Kn||$o(2,h,u),Kn||$o(4,h,u),Zs(l,u,h);break;case 1:Kn||(ss(h,u),m=h.stateNode,typeof m.componentWillUnmount=="function"&&KE(h,u,m)),Zs(l,u,h);break;case 21:Zs(l,u,h);break;case 22:Kn=(m=Kn)||h.memoizedState!==null,Zs(l,u,h),Kn=m;break;default:Zs(l,u,h)}}function iS(l,u){if(u.memoizedState===null&&(l=u.alternate,l!==null&&(l=l.memoizedState,l!==null&&(l=l.dehydrated,l!==null))))try{gh(l)}catch(h){mn(u,u.return,h)}}function t8(l){switch(l.tag){case 13:case 19:var u=l.stateNode;return u===null&&(u=l.stateNode=new eS),u;case 22:return l=l.stateNode,u=l._retryCache,u===null&&(u=l._retryCache=new eS),u;default:throw Error(r(435,l.tag))}}function Pv(l,u){var h=t8(l);u.forEach(function(m){var _=u8.bind(null,l,m);h.has(m)||(h.add(m),m.then(_,_))})}function Ui(l,u){var h=u.deletions;if(h!==null)for(var m=0;m<h.length;m++){var _=h[m],S=l,U=u,z=U;e:for(;z!==null;){switch(z.tag){case 27:if(Zo(z.type)){Mn=z.stateNode,Ii=!1;break e}break;case 5:Mn=z.stateNode,Ii=!1;break e;case 3:case 4:Mn=z.stateNode.containerInfo,Ii=!0;break e}z=z.return}if(Mn===null)throw Error(r(160));rS(S,U,_),Mn=null,Ii=!1,S=_.alternate,S!==null&&(S.return=null),_.return=null}if(u.subtreeFlags&13878)for(u=u.child;u!==null;)aS(u,l),u=u.sibling}var Ta=null;function aS(l,u){var h=l.alternate,m=l.flags;switch(l.tag){case 0:case 11:case 14:case 15:Ui(u,l),Hi(l),m&4&&($o(3,l,l.return),Qf(3,l),$o(5,l,l.return));break;case 1:Ui(u,l),Hi(l),m&512&&(Kn||h===null||ss(h,h.return)),m&64&&Qs&&(l=l.updateQueue,l!==null&&(m=l.callbacks,m!==null&&(h=l.shared.hiddenCallbacks,l.shared.hiddenCallbacks=h===null?m:h.concat(m))));break;case 26:var _=Ta;if(Ui(u,l),Hi(l),m&512&&(Kn||h===null||ss(h,h.return)),m&4){var S=h!==null?h.memoizedState:null;if(m=l.memoizedState,h===null)if(m===null)if(l.stateNode===null){e:{m=l.type,h=l.memoizedProps,_=_.ownerDocument||_;t:switch(m){case"title":S=_.getElementsByTagName("title")[0],(!S||S[$l]||S[mr]||S.namespaceURI==="http://www.w3.org/2000/svg"||S.hasAttribute("itemprop"))&&(S=_.createElement(m),_.head.insertBefore(S,_.querySelector("head > title"))),qr(S,m,h),S[mr]=l,qn(S),m=S;break e;case"link":var U=JS("link","href",_).get(m+(h.href||""));if(U){for(var z=0;z<U.length;z++)if(S=U[z],S.getAttribute("href")===(h.href==null||h.href===""?null:h.href)&&S.getAttribute("rel")===(h.rel==null?null:h.rel)&&S.getAttribute("title")===(h.title==null?null:h.title)&&S.getAttribute("crossorigin")===(h.crossOrigin==null?null:h.crossOrigin)){U.splice(z,1);break t}}S=_.createElement(m),qr(S,m,h),_.head.appendChild(S);break;case"meta":if(U=JS("meta","content",_).get(m+(h.content||""))){for(z=0;z<U.length;z++)if(S=U[z],S.getAttribute("content")===(h.content==null?null:""+h.content)&&S.getAttribute("name")===(h.name==null?null:h.name)&&S.getAttribute("property")===(h.property==null?null:h.property)&&S.getAttribute("http-equiv")===(h.httpEquiv==null?null:h.httpEquiv)&&S.getAttribute("charset")===(h.charSet==null?null:h.charSet)){U.splice(z,1);break t}}S=_.createElement(m),qr(S,m,h),_.head.appendChild(S);break;default:throw Error(r(468,m))}S[mr]=l,qn(S),m=S}l.stateNode=m}else eT(_,l.type,l.stateNode);else l.stateNode=ZS(_,m,l.memoizedProps);else S!==m?(S===null?h.stateNode!==null&&(h=h.stateNode,h.parentNode.removeChild(h)):S.count--,m===null?eT(_,l.type,l.stateNode):ZS(_,m,l.memoizedProps)):m===null&&l.stateNode!==null&&Dv(l,l.memoizedProps,h.memoizedProps)}break;case 27:Ui(u,l),Hi(l),m&512&&(Kn||h===null||ss(h,h.return)),h!==null&&m&4&&Dv(l,l.memoizedProps,h.memoizedProps);break;case 5:if(Ui(u,l),Hi(l),m&512&&(Kn||h===null||ss(h,h.return)),l.flags&32){_=l.stateNode;try{Ji(_,"")}catch(ue){mn(l,l.return,ue)}}m&4&&l.stateNode!=null&&(_=l.memoizedProps,Dv(l,_,h!==null?h.memoizedProps:_)),m&1024&&(Ov=!0);break;case 6:if(Ui(u,l),Hi(l),m&4){if(l.stateNode===null)throw Error(r(162));m=l.memoizedProps,h=l.stateNode;try{h.nodeValue=m}catch(ue){mn(l,l.return,ue)}}break;case 3:if(hg=null,_=Ta,Ta=dg(u.containerInfo),Ui(u,l),Ta=_,Hi(l),m&4&&h!==null&&h.memoizedState.isDehydrated)try{gh(u.containerInfo)}catch(ue){mn(l,l.return,ue)}Ov&&(Ov=!1,sS(l));break;case 4:m=Ta,Ta=dg(l.stateNode.containerInfo),Ui(u,l),Hi(l),Ta=m;break;case 12:Ui(u,l),Hi(l);break;case 13:Ui(u,l),Hi(l),l.child.flags&8192&&l.memoizedState!==null!=(h!==null&&h.memoizedState!==null)&&(Fv=Ce()),m&4&&(m=l.updateQueue,m!==null&&(l.updateQueue=null,Pv(l,m)));break;case 22:_=l.memoizedState!==null;var K=h!==null&&h.memoizedState!==null,oe=Qs,_e=Kn;if(Qs=oe||_,Kn=_e||K,Ui(u,l),Kn=_e,Qs=oe,Hi(l),m&8192)e:for(u=l.stateNode,u._visibility=_?u._visibility&-2:u._visibility|1,_&&(h===null||K||Qs||Kn||mc(l)),h=null,u=l;;){if(u.tag===5||u.tag===26){if(h===null){K=h=u;try{if(S=K.stateNode,_)U=S.style,typeof U.setProperty=="function"?U.setProperty("display","none","important"):U.display="none";else{z=K.stateNode;var Se=K.memoizedProps.style,ce=Se!=null&&Se.hasOwnProperty("display")?Se.display:null;z.style.display=ce==null||typeof ce=="boolean"?"":(""+ce).trim()}}catch(ue){mn(K,K.return,ue)}}}else if(u.tag===6){if(h===null){K=u;try{K.stateNode.nodeValue=_?"":K.memoizedProps}catch(ue){mn(K,K.return,ue)}}}else if((u.tag!==22&&u.tag!==23||u.memoizedState===null||u===l)&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===l)break e;for(;u.sibling===null;){if(u.return===null||u.return===l)break e;h===u&&(h=null),u=u.return}h===u&&(h=null),u.sibling.return=u.return,u=u.sibling}m&4&&(m=l.updateQueue,m!==null&&(h=m.retryQueue,h!==null&&(m.retryQueue=null,Pv(l,h))));break;case 19:Ui(u,l),Hi(l),m&4&&(m=l.updateQueue,m!==null&&(l.updateQueue=null,Pv(l,m)));break;case 30:break;case 21:break;default:Ui(u,l),Hi(l)}}function Hi(l){var u=l.flags;if(u&2){try{for(var h,m=l.return;m!==null;){if(ZE(m)){h=m;break}m=m.return}if(h==null)throw Error(r(160));switch(h.tag){case 27:var _=h.stateNode,S=Rv(l);Zp(l,S,_);break;case 5:var U=h.stateNode;h.flags&32&&(Ji(U,""),h.flags&=-33);var z=Rv(l);Zp(l,z,U);break;case 3:case 4:var K=h.stateNode.containerInfo,oe=Rv(l);Mv(l,oe,K);break;default:throw Error(r(161))}}catch(_e){mn(l,l.return,_e)}l.flags&=-3}u&4096&&(l.flags&=-4097)}function sS(l){if(l.subtreeFlags&1024)for(l=l.child;l!==null;){var u=l;sS(u),u.tag===5&&u.flags&1024&&u.stateNode.reset(),l=l.sibling}}function Go(l,u){if(u.subtreeFlags&8772)for(u=u.child;u!==null;)tS(l,u.alternate,u),u=u.sibling}function mc(l){for(l=l.child;l!==null;){var u=l;switch(u.tag){case 0:case 11:case 14:case 15:$o(4,u,u.return),mc(u);break;case 1:ss(u,u.return);var h=u.stateNode;typeof h.componentWillUnmount=="function"&&KE(u,u.return,h),mc(u);break;case 27:oh(u.stateNode);case 26:case 5:ss(u,u.return),mc(u);break;case 22:u.memoizedState===null&&mc(u);break;case 30:mc(u);break;default:mc(u)}l=l.sibling}}function Wo(l,u,h){for(h=h&&(u.subtreeFlags&8772)!==0,u=u.child;u!==null;){var m=u.alternate,_=l,S=u,U=S.flags;switch(S.tag){case 0:case 11:case 15:Wo(_,S,h),Qf(4,S);break;case 1:if(Wo(_,S,h),m=S,_=m.stateNode,typeof _.componentDidMount=="function")try{_.componentDidMount()}catch(oe){mn(m,m.return,oe)}if(m=S,_=m.updateQueue,_!==null){var z=m.stateNode;try{var K=_.shared.hiddenCallbacks;if(K!==null)for(_.shared.hiddenCallbacks=null,_=0;_<K.length;_++)NA(K[_],z)}catch(oe){mn(m,m.return,oe)}}h&&U&64&&XE(S),Zf(S,S.return);break;case 27:JE(S);case 26:case 5:Wo(_,S,h),h&&m===null&&U&4&&QE(S),Zf(S,S.return);break;case 12:Wo(_,S,h);break;case 13:Wo(_,S,h),h&&U&4&&iS(_,S);break;case 22:S.memoizedState===null&&Wo(_,S,h),Zf(S,S.return);break;case 30:break;default:Wo(_,S,h)}u=u.sibling}}function kv(l,u){var h=null;l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(h=l.memoizedState.cachePool.pool),l=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(l=u.memoizedState.cachePool.pool),l!==h&&(l!=null&&l.refCount++,h!=null&&Bf(h))}function Nv(l,u){l=null,u.alternate!==null&&(l=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==l&&(u.refCount++,l!=null&&Bf(l))}function os(l,u,h,m){if(u.subtreeFlags&10256)for(u=u.child;u!==null;)oS(l,u,h,m),u=u.sibling}function oS(l,u,h,m){var _=u.flags;switch(u.tag){case 0:case 11:case 15:os(l,u,h,m),_&2048&&Qf(9,u);break;case 1:os(l,u,h,m);break;case 3:os(l,u,h,m),_&2048&&(l=null,u.alternate!==null&&(l=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==l&&(u.refCount++,l!=null&&Bf(l)));break;case 12:if(_&2048){os(l,u,h,m),l=u.stateNode;try{var S=u.memoizedProps,U=S.id,z=S.onPostCommit;typeof z=="function"&&z(U,u.alternate===null?"mount":"update",l.passiveEffectDuration,-0)}catch(K){mn(u,u.return,K)}}else os(l,u,h,m);break;case 13:os(l,u,h,m);break;case 23:break;case 22:S=u.stateNode,U=u.alternate,u.memoizedState!==null?S._visibility&2?os(l,u,h,m):Jf(l,u):S._visibility&2?os(l,u,h,m):(S._visibility|=2,Vu(l,u,h,m,(u.subtreeFlags&10256)!==0)),_&2048&&kv(U,u);break;case 24:os(l,u,h,m),_&2048&&Nv(u.alternate,u);break;default:os(l,u,h,m)}}function Vu(l,u,h,m,_){for(_=_&&(u.subtreeFlags&10256)!==0,u=u.child;u!==null;){var S=l,U=u,z=h,K=m,oe=U.flags;switch(U.tag){case 0:case 11:case 15:Vu(S,U,z,K,_),Qf(8,U);break;case 23:break;case 22:var _e=U.stateNode;U.memoizedState!==null?_e._visibility&2?Vu(S,U,z,K,_):Jf(S,U):(_e._visibility|=2,Vu(S,U,z,K,_)),_&&oe&2048&&kv(U.alternate,U);break;case 24:Vu(S,U,z,K,_),_&&oe&2048&&Nv(U.alternate,U);break;default:Vu(S,U,z,K,_)}u=u.sibling}}function Jf(l,u){if(u.subtreeFlags&10256)for(u=u.child;u!==null;){var h=l,m=u,_=m.flags;switch(m.tag){case 22:Jf(h,m),_&2048&&kv(m.alternate,m);break;case 24:Jf(h,m),_&2048&&Nv(m.alternate,m);break;default:Jf(h,m)}u=u.sibling}}var eh=8192;function Fu(l){if(l.subtreeFlags&eh)for(l=l.child;l!==null;)lS(l),l=l.sibling}function lS(l){switch(l.tag){case 26:Fu(l),l.flags&eh&&l.memoizedState!==null&&j8(Ta,l.memoizedState,l.memoizedProps);break;case 5:Fu(l);break;case 3:case 4:var u=Ta;Ta=dg(l.stateNode.containerInfo),Fu(l),Ta=u;break;case 22:l.memoizedState===null&&(u=l.alternate,u!==null&&u.memoizedState!==null?(u=eh,eh=16777216,Fu(l),eh=u):Fu(l));break;default:Fu(l)}}function cS(l){var u=l.alternate;if(u!==null&&(l=u.child,l!==null)){u.child=null;do u=l.sibling,l.sibling=null,l=u;while(l!==null)}}function th(l){var u=l.deletions;if((l.flags&16)!==0){if(u!==null)for(var h=0;h<u.length;h++){var m=u[h];Pr=m,dS(m,l)}cS(l)}if(l.subtreeFlags&10256)for(l=l.child;l!==null;)uS(l),l=l.sibling}function uS(l){switch(l.tag){case 0:case 11:case 15:th(l),l.flags&2048&&$o(9,l,l.return);break;case 3:th(l);break;case 12:th(l);break;case 22:var u=l.stateNode;l.memoizedState!==null&&u._visibility&2&&(l.return===null||l.return.tag!==13)?(u._visibility&=-3,Jp(l)):th(l);break;default:th(l)}}function Jp(l){var u=l.deletions;if((l.flags&16)!==0){if(u!==null)for(var h=0;h<u.length;h++){var m=u[h];Pr=m,dS(m,l)}cS(l)}for(l=l.child;l!==null;){switch(u=l,u.tag){case 0:case 11:case 15:$o(8,u,u.return),Jp(u);break;case 22:h=u.stateNode,h._visibility&2&&(h._visibility&=-3,Jp(u));break;default:Jp(u)}l=l.sibling}}function dS(l,u){for(;Pr!==null;){var h=Pr;switch(h.tag){case 0:case 11:case 15:$o(8,h,u);break;case 23:case 22:if(h.memoizedState!==null&&h.memoizedState.cachePool!==null){var m=h.memoizedState.cachePool.pool;m!=null&&m.refCount++}break;case 24:Bf(h.memoizedState.cache)}if(m=h.child,m!==null)m.return=h,Pr=m;else e:for(h=l;Pr!==null;){m=Pr;var _=m.sibling,S=m.return;if(nS(m),m===h){Pr=null;break e}if(_!==null){_.return=S,Pr=_;break e}Pr=S}}}var n8={getCacheForType:function(l){var u=ri(xr),h=u.data.get(l);return h===void 0&&(h=l(),u.data.set(l,h)),h}},r8=typeof WeakMap=="function"?WeakMap:Map,rn=0,wn=null,Ct=null,Vt=0,an=0,zi=null,Yo=!1,ju=!1,Lv=!1,Js=0,Fn=0,qo=0,yc=0,Bv=0,la=0,Uu=0,nh=null,Di=null,Vv=!1,Fv=0,eg=1/0,tg=null,Xo=null,Yr=0,Ko=null,Hu=null,zu=0,jv=0,Uv=null,fS=null,rh=0,Hv=null;function $i(){if((rn&2)!==0&&Vt!==0)return Vt&-Vt;if(G.T!==null){var l=Ru;return l!==0?l:Xv()}return rr()}function hS(){la===0&&(la=(Vt&536870912)===0||qt?Yn():536870912);var l=oa.current;return l!==null&&(l.flags|=32),la}function Gi(l,u,h){(l===wn&&(an===2||an===9)||l.cancelPendingCommit!==null)&&($u(l,0),Qo(l,Vt,la,!1)),nr(l,h),((rn&2)===0||l!==wn)&&(l===wn&&((rn&2)===0&&(yc|=h),Fn===4&&Qo(l,Vt,la,!1)),ls(l))}function pS(l,u,h){if((rn&6)!==0)throw Error(r(327));var m=!h&&(u&124)===0&&(u&l.expiredLanes)===0||pt(l,u),_=m?s8(l,u):Gv(l,u,!0),S=m;do{if(_===0){ju&&!m&&Qo(l,u,0,!1);break}else{if(h=l.current.alternate,S&&!i8(h)){_=Gv(l,u,!1),S=!1;continue}if(_===2){if(S=u,l.errorRecoveryDisabledLanes&S)var U=0;else U=l.pendingLanes&-536870913,U=U!==0?U:U&536870912?536870912:0;if(U!==0){u=U;e:{var z=l;_=nh;var K=z.current.memoizedState.isDehydrated;if(K&&($u(z,U).flags|=256),U=Gv(z,U,!1),U!==2){if(Lv&&!K){z.errorRecoveryDisabledLanes|=S,yc|=S,_=4;break e}S=Di,Di=_,S!==null&&(Di===null?Di=S:Di.push.apply(Di,S))}_=U}if(S=!1,_!==2)continue}}if(_===1){$u(l,0),Qo(l,u,0,!0);break}e:{switch(m=l,S=_,S){case 0:case 1:throw Error(r(345));case 4:if((u&4194048)!==u)break;case 6:Qo(m,u,la,!Yo);break e;case 2:Di=null;break;case 3:case 5:break;default:throw Error(r(329))}if((u&62914560)===u&&(_=Fv+300-Ce(),10<_)){if(Qo(m,u,la,!Yo),Hr(m,0,!0)!==0)break e;m.timeoutHandle=zS(gS.bind(null,m,h,Di,tg,Vv,u,la,yc,Uu,Yo,S,2,-0,0),_);break e}gS(m,h,Di,tg,Vv,u,la,yc,Uu,Yo,S,0,-0,0)}}break}while(!0);ls(l)}function gS(l,u,h,m,_,S,U,z,K,oe,_e,Se,ce,ue){if(l.timeoutHandle=-1,Se=u.subtreeFlags,(Se&8192||(Se&16785408)===16785408)&&(uh={stylesheets:null,count:0,unsuspend:F8},lS(u),Se=U8(),Se!==null)){l.cancelPendingCommit=Se(bS.bind(null,l,u,S,h,m,_,U,z,K,_e,1,ce,ue)),Qo(l,S,U,!oe);return}bS(l,u,S,h,m,_,U,z,K)}function i8(l){for(var u=l;;){var h=u.tag;if((h===0||h===11||h===15)&&u.flags&16384&&(h=u.updateQueue,h!==null&&(h=h.stores,h!==null)))for(var m=0;m<h.length;m++){var _=h[m],S=_.getSnapshot;_=_.value;try{if(!Fi(S(),_))return!1}catch{return!1}}if(h=u.child,u.subtreeFlags&16384&&h!==null)h.return=u,u=h;else{if(u===l)break;for(;u.sibling===null;){if(u.return===null||u.return===l)return!0;u=u.return}u.sibling.return=u.return,u=u.sibling}}return!0}function Qo(l,u,h,m){u&=~Bv,u&=~yc,l.suspendedLanes|=u,l.pingedLanes&=~u,m&&(l.warmLanes|=u),m=l.expirationTimes;for(var _=u;0<_;){var S=31-Xe(_),U=1<<S;m[S]=-1,_&=~U}h!==0&&Qi(l,h,u)}function ng(){return(rn&6)===0?(ih(0),!1):!0}function zv(){if(Ct!==null){if(an===0)var l=Ct.return;else l=Ct,Gs=dc=null,sv(l),Lu=null,qf=0,l=Ct;for(;l!==null;)qE(l.alternate,l),l=l.return;Ct=null}}function $u(l,u){var h=l.timeoutHandle;h!==-1&&(l.timeoutHandle=-1,b8(h)),h=l.cancelPendingCommit,h!==null&&(l.cancelPendingCommit=null,h()),zv(),wn=l,Ct=h=Hs(l.current,null),Vt=u,an=0,zi=null,Yo=!1,ju=pt(l,u),Lv=!1,Uu=la=Bv=yc=qo=Fn=0,Di=nh=null,Vv=!1,(u&8)!==0&&(u|=u&32);var m=l.entangledLanes;if(m!==0)for(l=l.entanglements,m&=u;0<m;){var _=31-Xe(m),S=1<<_;u|=l[_],m&=~S}return Js=u,Ep(),h}function mS(l,u){_t=null,G.H=zp,u===Ff||u===Pp?(u=PA(),an=3):u===RA?(u=PA(),an=4):an=u===kE?8:u!==null&&typeof u=="object"&&typeof u.then=="function"?6:1,zi=u,Ct===null&&(Fn=1,qp(l,ra(u,l.current)))}function yS(){var l=G.H;return G.H=zp,l===null?zp:l}function vS(){var l=G.A;return G.A=n8,l}function $v(){Fn=4,Yo||(Vt&4194048)!==Vt&&oa.current!==null||(ju=!0),(qo&134217727)===0&&(yc&134217727)===0||wn===null||Qo(wn,Vt,la,!1)}function Gv(l,u,h){var m=rn;rn|=2;var _=yS(),S=vS();(wn!==l||Vt!==u)&&(tg=null,$u(l,u)),u=!1;var U=Fn;e:do try{if(an!==0&&Ct!==null){var z=Ct,K=zi;switch(an){case 8:zv(),U=6;break e;case 3:case 2:case 9:case 6:oa.current===null&&(u=!0);var oe=an;if(an=0,zi=null,Gu(l,z,K,oe),h&&ju){U=0;break e}break;default:oe=an,an=0,zi=null,Gu(l,z,K,oe)}}a8(),U=Fn;break}catch(_e){mS(l,_e)}while(!0);return u&&l.shellSuspendCounter++,Gs=dc=null,rn=m,G.H=_,G.A=S,Ct===null&&(wn=null,Vt=0,Ep()),U}function a8(){for(;Ct!==null;)xS(Ct)}function s8(l,u){var h=rn;rn|=2;var m=yS(),_=vS();wn!==l||Vt!==u?(tg=null,eg=Ce()+500,$u(l,u)):ju=pt(l,u);e:do try{if(an!==0&&Ct!==null){u=Ct;var S=zi;t:switch(an){case 1:an=0,zi=null,Gu(l,u,S,1);break;case 2:case 9:if(MA(S)){an=0,zi=null,wS(u);break}u=function(){an!==2&&an!==9||wn!==l||(an=7),ls(l)},S.then(u,u);break e;case 3:an=7;break e;case 4:an=5;break e;case 7:MA(S)?(an=0,zi=null,wS(u)):(an=0,zi=null,Gu(l,u,S,7));break;case 5:var U=null;switch(Ct.tag){case 26:U=Ct.memoizedState;case 5:case 27:var z=Ct;if(!U||tT(U)){an=0,zi=null;var K=z.sibling;if(K!==null)Ct=K;else{var oe=z.return;oe!==null?(Ct=oe,rg(oe)):Ct=null}break t}}an=0,zi=null,Gu(l,u,S,5);break;case 6:an=0,zi=null,Gu(l,u,S,6);break;case 8:zv(),Fn=6;break e;default:throw Error(r(462))}}o8();break}catch(_e){mS(l,_e)}while(!0);return Gs=dc=null,G.H=m,G.A=_,rn=h,Ct!==null?0:(wn=null,Vt=0,Ep(),Fn)}function o8(){for(;Ct!==null&&!je();)xS(Ct)}function xS(l){var u=WE(l.alternate,l,Js);l.memoizedProps=l.pendingProps,u===null?rg(l):Ct=u}function wS(l){var u=l,h=u.alternate;switch(u.tag){case 15:case 0:u=jE(h,u,u.pendingProps,u.type,void 0,Vt);break;case 11:u=jE(h,u,u.pendingProps,u.type.render,u.ref,Vt);break;case 5:sv(u);default:qE(h,u),u=Ct=_A(u,Js),u=WE(h,u,Js)}l.memoizedProps=l.pendingProps,u===null?rg(l):Ct=u}function Gu(l,u,h,m){Gs=dc=null,sv(u),Lu=null,qf=0;var _=u.return;try{if(Kk(l,_,u,h,Vt)){Fn=1,qp(l,ra(h,l.current)),Ct=null;return}}catch(S){if(_!==null)throw Ct=_,S;Fn=1,qp(l,ra(h,l.current)),Ct=null;return}u.flags&32768?(qt||m===1?l=!0:ju||(Vt&536870912)!==0?l=!1:(Yo=l=!0,(m===2||m===9||m===3||m===6)&&(m=oa.current,m!==null&&m.tag===13&&(m.flags|=16384))),_S(u,l)):rg(u)}function rg(l){var u=l;do{if((u.flags&32768)!==0){_S(u,Yo);return}l=u.return;var h=Zk(u.alternate,u,Js);if(h!==null){Ct=h;return}if(u=u.sibling,u!==null){Ct=u;return}Ct=u=l}while(u!==null);Fn===0&&(Fn=5)}function _S(l,u){do{var h=Jk(l.alternate,l);if(h!==null){h.flags&=32767,Ct=h;return}if(h=l.return,h!==null&&(h.flags|=32768,h.subtreeFlags=0,h.deletions=null),!u&&(l=l.sibling,l!==null)){Ct=l;return}Ct=l=h}while(l!==null);Fn=6,Ct=null}function bS(l,u,h,m,_,S,U,z,K){l.cancelPendingCommit=null;do ig();while(Yr!==0);if((rn&6)!==0)throw Error(r(327));if(u!==null){if(u===l.current)throw Error(r(177));if(S=u.lanes|u.childLanes,S|=Ny,Hl(l,h,S,U,z,K),l===wn&&(Ct=wn=null,Vt=0),Hu=u,Ko=l,zu=h,jv=S,Uv=_,fS=m,(u.subtreeFlags&10256)!==0||(u.flags&10256)!==0?(l.callbackNode=null,l.callbackPriority=0,d8(Oe,function(){return CS(),null})):(l.callbackNode=null,l.callbackPriority=0),m=(u.flags&13878)!==0,(u.subtreeFlags&13878)!==0||m){m=G.T,G.T=null,_=Y.p,Y.p=2,U=rn,rn|=4;try{e8(l,u,h)}finally{rn=U,Y.p=_,G.T=m}}Yr=1,AS(),ES(),SS()}}function AS(){if(Yr===1){Yr=0;var l=Ko,u=Hu,h=(u.flags&13878)!==0;if((u.subtreeFlags&13878)!==0||h){h=G.T,G.T=null;var m=Y.p;Y.p=2;var _=rn;rn|=4;try{aS(u,l);var S=rx,U=dA(l.containerInfo),z=S.focusedElem,K=S.selectionRange;if(U!==z&&z&&z.ownerDocument&&uA(z.ownerDocument.documentElement,z)){if(K!==null&&Ry(z)){var oe=K.start,_e=K.end;if(_e===void 0&&(_e=oe),"selectionStart"in z)z.selectionStart=oe,z.selectionEnd=Math.min(_e,z.value.length);else{var Se=z.ownerDocument||document,ce=Se&&Se.defaultView||window;if(ce.getSelection){var ue=ce.getSelection(),ct=z.textContent.length,it=Math.min(K.start,ct),fn=K.end===void 0?it:Math.min(K.end,ct);!ue.extend&&it>fn&&(U=fn,fn=it,it=U);var ee=cA(z,it),J=cA(z,fn);if(ee&&J&&(ue.rangeCount!==1||ue.anchorNode!==ee.node||ue.anchorOffset!==ee.offset||ue.focusNode!==J.node||ue.focusOffset!==J.offset)){var ie=Se.createRange();ie.setStart(ee.node,ee.offset),ue.removeAllRanges(),it>fn?(ue.addRange(ie),ue.extend(J.node,J.offset)):(ie.setEnd(J.node,J.offset),ue.addRange(ie))}}}}for(Se=[],ue=z;ue=ue.parentNode;)ue.nodeType===1&&Se.push({element:ue,left:ue.scrollLeft,top:ue.scrollTop});for(typeof z.focus=="function"&&z.focus(),z=0;z<Se.length;z++){var Ee=Se[z];Ee.element.scrollLeft=Ee.left,Ee.element.scrollTop=Ee.top}}mg=!!nx,rx=nx=null}finally{rn=_,Y.p=m,G.T=h}}l.current=u,Yr=2}}function ES(){if(Yr===2){Yr=0;var l=Ko,u=Hu,h=(u.flags&8772)!==0;if((u.subtreeFlags&8772)!==0||h){h=G.T,G.T=null;var m=Y.p;Y.p=2;var _=rn;rn|=4;try{tS(l,u.alternate,u)}finally{rn=_,Y.p=m,G.T=h}}Yr=3}}function SS(){if(Yr===4||Yr===3){Yr=0,De();var l=Ko,u=Hu,h=zu,m=fS;(u.subtreeFlags&10256)!==0||(u.flags&10256)!==0?Yr=5:(Yr=0,Hu=Ko=null,TS(l,l.pendingLanes));var _=l.pendingLanes;if(_===0&&(Xo=null),gn(h),u=u.stateNode,rt&&typeof rt.onCommitFiberRoot=="function")try{rt.onCommitFiberRoot(tt,u,void 0,(u.current.flags&128)===128)}catch{}if(m!==null){u=G.T,_=Y.p,Y.p=2,G.T=null;try{for(var S=l.onRecoverableError,U=0;U<m.length;U++){var z=m[U];S(z.value,{componentStack:z.stack})}}finally{G.T=u,Y.p=_}}(zu&3)!==0&&ig(),ls(l),_=l.pendingLanes,(h&4194090)!==0&&(_&42)!==0?l===Hv?rh++:(rh=0,Hv=l):rh=0,ih(0)}}function TS(l,u){(l.pooledCacheLanes&=u)===0&&(u=l.pooledCache,u!=null&&(l.pooledCache=null,Bf(u)))}function ig(l){return AS(),ES(),SS(),CS()}function CS(){if(Yr!==5)return!1;var l=Ko,u=jv;jv=0;var h=gn(zu),m=G.T,_=Y.p;try{Y.p=32>h?32:h,G.T=null,h=Uv,Uv=null;var S=Ko,U=zu;if(Yr=0,Hu=Ko=null,zu=0,(rn&6)!==0)throw Error(r(331));var z=rn;if(rn|=4,uS(S.current),oS(S,S.current,U,h),rn=z,ih(0,!1),rt&&typeof rt.onPostCommitFiberRoot=="function")try{rt.onPostCommitFiberRoot(tt,S)}catch{}return!0}finally{Y.p=_,G.T=m,TS(l,u)}}function IS(l,u,h){u=ra(h,u),u=wv(l.stateNode,u,2),l=jo(l,u,2),l!==null&&(nr(l,2),ls(l))}function mn(l,u,h){if(l.tag===3)IS(l,l,h);else for(;u!==null;){if(u.tag===3){IS(u,l,h);break}else if(u.tag===1){var m=u.stateNode;if(typeof u.type.getDerivedStateFromError=="function"||typeof m.componentDidCatch=="function"&&(Xo===null||!Xo.has(m))){l=ra(h,l),h=OE(2),m=jo(u,h,2),m!==null&&(PE(h,m,u,l),nr(m,2),ls(m));break}}u=u.return}}function Wv(l,u,h){var m=l.pingCache;if(m===null){m=l.pingCache=new r8;var _=new Set;m.set(u,_)}else _=m.get(u),_===void 0&&(_=new Set,m.set(u,_));_.has(h)||(Lv=!0,_.add(h),l=l8.bind(null,l,u,h),u.then(l,l))}function l8(l,u,h){var m=l.pingCache;m!==null&&m.delete(u),l.pingedLanes|=l.suspendedLanes&h,l.warmLanes&=~h,wn===l&&(Vt&h)===h&&(Fn===4||Fn===3&&(Vt&62914560)===Vt&&300>Ce()-Fv?(rn&2)===0&&$u(l,0):Bv|=h,Uu===Vt&&(Uu=0)),ls(l)}function DS(l,u){u===0&&(u=zr()),l=Tu(l,u),l!==null&&(nr(l,u),ls(l))}function c8(l){var u=l.memoizedState,h=0;u!==null&&(h=u.retryLane),DS(l,h)}function u8(l,u){var h=0;switch(l.tag){case 13:var m=l.stateNode,_=l.memoizedState;_!==null&&(h=_.retryLane);break;case 19:m=l.stateNode;break;case 22:m=l.stateNode._retryCache;break;default:throw Error(r(314))}m!==null&&m.delete(u),DS(l,h)}function d8(l,u){return Le(l,u)}var ag=null,Wu=null,Yv=!1,sg=!1,qv=!1,vc=0;function ls(l){l!==Wu&&l.next===null&&(Wu===null?ag=Wu=l:Wu=Wu.next=l),sg=!0,Yv||(Yv=!0,h8())}function ih(l,u){if(!qv&&sg){qv=!0;do for(var h=!1,m=ag;m!==null;){if(l!==0){var _=m.pendingLanes;if(_===0)var S=0;else{var U=m.suspendedLanes,z=m.pingedLanes;S=(1<<31-Xe(42|l)+1)-1,S&=_&~(U&~z),S=S&201326741?S&201326741|1:S?S|2:0}S!==0&&(h=!0,PS(m,S))}else S=Vt,S=Hr(m,m===wn?S:0,m.cancelPendingCommit!==null||m.timeoutHandle!==-1),(S&3)===0||pt(m,S)||(h=!0,PS(m,S));m=m.next}while(h);qv=!1}}function f8(){RS()}function RS(){sg=Yv=!1;var l=0;vc!==0&&(_8()&&(l=vc),vc=0);for(var u=Ce(),h=null,m=ag;m!==null;){var _=m.next,S=MS(m,u);S===0?(m.next=null,h===null?ag=_:h.next=_,_===null&&(Wu=h)):(h=m,(l!==0||(S&3)!==0)&&(sg=!0)),m=_}ih(l)}function MS(l,u){for(var h=l.suspendedLanes,m=l.pingedLanes,_=l.expirationTimes,S=l.pendingLanes&-62914561;0<S;){var U=31-Xe(S),z=1<<U,K=_[U];K===-1?((z&h)===0||(z&m)!==0)&&(_[U]=kn(z,u)):K<=u&&(l.expiredLanes|=z),S&=~z}if(u=wn,h=Vt,h=Hr(l,l===u?h:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),m=l.callbackNode,h===0||l===u&&(an===2||an===9)||l.cancelPendingCommit!==null)return m!==null&&m!==null&&ve(m),l.callbackNode=null,l.callbackPriority=0;if((h&3)===0||pt(l,h)){if(u=h&-h,u===l.callbackPriority)return u;switch(m!==null&&ve(m),gn(h)){case 2:case 8:h=Ie;break;case 32:h=Oe;break;case 268435456:h=wt;break;default:h=Oe}return m=OS.bind(null,l),h=Le(h,m),l.callbackPriority=u,l.callbackNode=h,u}return m!==null&&m!==null&&ve(m),l.callbackPriority=2,l.callbackNode=null,2}function OS(l,u){if(Yr!==0&&Yr!==5)return l.callbackNode=null,l.callbackPriority=0,null;var h=l.callbackNode;if(ig()&&l.callbackNode!==h)return null;var m=Vt;return m=Hr(l,l===wn?m:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),m===0?null:(pS(l,m,u),MS(l,Ce()),l.callbackNode!=null&&l.callbackNode===h?OS.bind(null,l):null)}function PS(l,u){if(ig())return null;pS(l,u,!0)}function h8(){A8(function(){(rn&6)!==0?Le($e,f8):RS()})}function Xv(){return vc===0&&(vc=Yn()),vc}function kS(l){return l==null||typeof l=="symbol"||typeof l=="boolean"?null:typeof l=="function"?l:pu(""+l)}function NS(l,u){var h=u.ownerDocument.createElement("input");return h.name=u.name,h.value=u.value,l.id&&h.setAttribute("form",l.id),u.parentNode.insertBefore(h,u),l=new FormData(l),h.parentNode.removeChild(h),l}function p8(l,u,h,m,_){if(u==="submit"&&h&&h.stateNode===_){var S=kS((_[ir]||null).action),U=m.submitter;U&&(u=(u=U[ir]||null)?kS(u.formAction):U.getAttribute("formAction"),u!==null&&(S=u,U=null));var z=new gu("action","action",null,m,_);l.push({event:z,listeners:[{instance:null,listener:function(){if(m.defaultPrevented){if(vc!==0){var K=U?NS(_,U):new FormData(_);gv(h,{pending:!0,data:K,method:_.method,action:S},null,K)}}else typeof S=="function"&&(z.preventDefault(),K=U?NS(_,U):new FormData(_),gv(h,{pending:!0,data:K,method:_.method,action:S},S,K))},currentTarget:_}]})}}for(var Kv=0;Kv<ky.length;Kv++){var Qv=ky[Kv],g8=Qv.toLowerCase(),m8=Qv[0].toUpperCase()+Qv.slice(1);Sa(g8,"on"+m8)}Sa(pA,"onAnimationEnd"),Sa(gA,"onAnimationIteration"),Sa(mA,"onAnimationStart"),Sa("dblclick","onDoubleClick"),Sa("focusin","onFocus"),Sa("focusout","onBlur"),Sa(Pk,"onTransitionRun"),Sa(kk,"onTransitionStart"),Sa(Nk,"onTransitionCancel"),Sa(yA,"onTransitionEnd"),Ps("onMouseEnter",["mouseout","mouseover"]),Ps("onMouseLeave",["mouseout","mouseover"]),Ps("onPointerEnter",["pointerout","pointerover"]),Ps("onPointerLeave",["pointerout","pointerover"]),Aa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Aa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Aa("onBeforeInput",["compositionend","keypress","textInput","paste"]),Aa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Aa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Aa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ah="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),y8=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ah));function LS(l,u){u=(u&4)!==0;for(var h=0;h<l.length;h++){var m=l[h],_=m.event;m=m.listeners;e:{var S=void 0;if(u)for(var U=m.length-1;0<=U;U--){var z=m[U],K=z.instance,oe=z.currentTarget;if(z=z.listener,K!==S&&_.isPropagationStopped())break e;S=z,_.currentTarget=oe;try{S(_)}catch(_e){Yp(_e)}_.currentTarget=null,S=K}else for(U=0;U<m.length;U++){if(z=m[U],K=z.instance,oe=z.currentTarget,z=z.listener,K!==S&&_.isPropagationStopped())break e;S=z,_.currentTarget=oe;try{S(_)}catch(_e){Yp(_e)}_.currentTarget=null,S=K}}}}function It(l,u){var h=u[mf];h===void 0&&(h=u[mf]=new Set);var m=l+"__bubble";h.has(m)||(BS(u,l,2,!1),h.add(m))}function Zv(l,u,h){var m=0;u&&(m|=4),BS(h,l,m,u)}var og="_reactListening"+Math.random().toString(36).slice(2);function Jv(l){if(!l[og]){l[og]=!0,yf.forEach(function(h){h!=="selectionchange"&&(y8.has(h)||Zv(h,!1,l),Zv(h,!0,l))});var u=l.nodeType===9?l:l.ownerDocument;u===null||u[og]||(u[og]=!0,Zv("selectionchange",!1,u))}}function BS(l,u,h,m){switch(oT(u)){case 2:var _=$8;break;case 8:_=G8;break;default:_=hx}h=_.bind(null,u,h,l),_=void 0,!ta||u!=="touchstart"&&u!=="touchmove"&&u!=="wheel"||(_=!0),m?_!==void 0?l.addEventListener(u,h,{capture:!0,passive:_}):l.addEventListener(u,h,!0):_!==void 0?l.addEventListener(u,h,{passive:_}):l.addEventListener(u,h,!1)}function ex(l,u,h,m,_){var S=m;if((u&1)===0&&(u&2)===0&&m!==null)e:for(;;){if(m===null)return;var U=m.tag;if(U===3||U===4){var z=m.stateNode.containerInfo;if(z===_)break;if(U===4)for(U=m.return;U!==null;){var K=U.tag;if((K===3||K===4)&&U.stateNode.containerInfo===_)return;U=U.return}for(;z!==null;){if(U=Os(z),U===null)return;if(K=U.tag,K===5||K===6||K===26||K===27){m=S=U;continue e}z=z.parentNode}}m=m.return}cp(function(){var oe=S,_e=ea(h),Se=[];e:{var ce=vA.get(l);if(ce!==void 0){var ue=gu,ct=l;switch(l){case"keypress":if(Ja(h)===0)break e;case"keydown":case"keyup":ue=_u;break;case"focusin":ct="focus",ue=vu;break;case"focusout":ct="blur",ue=vu;break;case"beforeblur":case"afterblur":ue=vu;break;case"click":if(h.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ue=na;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ue=Ty;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ue=yp;break;case pA:case gA:case mA:ue=xu;break;case yA:ue=xp;break;case"scroll":case"scrollend":ue=up;break;case"wheel":ue=bu;break;case"copy":case"cut":case"paste":ue=wu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ue=Df;break;case"toggle":case"beforetoggle":ue=_p}var it=(u&4)!==0,fn=!it&&(l==="scroll"||l==="scrollend"),ee=it?ce!==null?ce+"Capture":null:ce;it=[];for(var J=oe,ie;J!==null;){var Ee=J;if(ie=Ee.stateNode,Ee=Ee.tag,Ee!==5&&Ee!==26&&Ee!==27||ie===null||ee===null||(Ee=Ql(J,ee),Ee!=null&&it.push(sh(J,Ee,ie))),fn)break;J=J.return}0<it.length&&(ce=new ue(ce,ct,null,h,_e),Se.push({event:ce,listeners:it}))}}if((u&7)===0){e:{if(ce=l==="mouseover"||l==="pointerover",ue=l==="mouseout"||l==="pointerout",ce&&h!==Ls&&(ct=h.relatedTarget||h.fromElement)&&(Os(ct)||ct[Zi]))break e;if((ue||ce)&&(ce=_e.window===_e?_e:(ce=_e.ownerDocument)?ce.defaultView||ce.parentWindow:window,ue?(ct=h.relatedTarget||h.toElement,ue=oe,ct=ct?Os(ct):null,ct!==null&&(fn=a(ct),it=ct.tag,ct!==fn||it!==5&&it!==27&&it!==6)&&(ct=null)):(ue=null,ct=oe),ue!==ct)){if(it=na,Ee="onMouseLeave",ee="onMouseEnter",J="mouse",(l==="pointerout"||l==="pointerover")&&(it=Df,Ee="onPointerLeave",ee="onPointerEnter",J="pointer"),fn=ue==null?ce:Xa(ue),ie=ct==null?ce:Xa(ct),ce=new it(Ee,J+"leave",ue,h,_e),ce.target=fn,ce.relatedTarget=ie,Ee=null,Os(_e)===oe&&(it=new it(ee,J+"enter",ct,h,_e),it.target=ie,it.relatedTarget=fn,Ee=it),fn=Ee,ue&&ct)t:{for(it=ue,ee=ct,J=0,ie=it;ie;ie=Yu(ie))J++;for(ie=0,Ee=ee;Ee;Ee=Yu(Ee))ie++;for(;0<J-ie;)it=Yu(it),J--;for(;0<ie-J;)ee=Yu(ee),ie--;for(;J--;){if(it===ee||ee!==null&&it===ee.alternate)break t;it=Yu(it),ee=Yu(ee)}it=null}else it=null;ue!==null&&VS(Se,ce,ue,it,!1),ct!==null&&fn!==null&&VS(Se,fn,ct,it,!0)}}e:{if(ce=oe?Xa(oe):window,ue=ce.nodeName&&ce.nodeName.toLowerCase(),ue==="select"||ue==="input"&&ce.type==="file")var Ye=rA;else if(vr(ce))if(iA)Ye=Rk;else{Ye=Ik;var St=Ck}else ue=ce.nodeName,!ue||ue.toLowerCase()!=="input"||ce.type!=="checkbox"&&ce.type!=="radio"?oe&&bf(oe.elementType)&&(Ye=rA):Ye=Dk;if(Ye&&(Ye=Ye(l,oe))){Us(Se,Ye,h,_e);break e}St&&St(l,ce,oe),l==="focusout"&&oe&&ce.type==="number"&&oe.memoizedProps.value!=null&&No(ce,"number",ce.value)}switch(St=oe?Xa(oe):window,l){case"focusin":(vr(St)||St.contentEditable==="true")&&(Au=St,My=oe,Of=null);break;case"focusout":Of=My=Au=null;break;case"mousedown":Oy=!0;break;case"contextmenu":case"mouseup":case"dragend":Oy=!1,fA(Se,h,_e);break;case"selectionchange":if(Ok)break;case"keydown":case"keyup":fA(Se,h,_e)}var Ke;if(ns)e:{switch(l){case"compositionstart":var at="onCompositionStart";break e;case"compositionend":at="onCompositionEnd";break e;case"compositionupdate":at="onCompositionUpdate";break e}at=void 0}else Lt?pe(l,h)&&(at="onCompositionEnd"):l==="keydown"&&h.keyCode===229&&(at="onCompositionStart");at&&(j&&h.locale!=="ko"&&(Lt||at!=="onCompositionStart"?at==="onCompositionEnd"&&Lt&&(Ke=Ef()):(Za=_e,Lo="value"in Za?Za.value:Za.textContent,Lt=!0)),St=lg(oe,at),0<St.length&&(at=new Cf(at,l,null,h,_e),Se.push({event:at,listeners:St}),Ke?at.data=Ke:(Ke=ke(h),Ke!==null&&(at.data=Ke)))),(Ke=P?yr(l,h):Bt(l,h))&&(at=lg(oe,"onBeforeInput"),0<at.length&&(St=new Cf("onBeforeInput","beforeinput",null,h,_e),Se.push({event:St,listeners:at}),St.data=Ke)),p8(Se,l,oe,h,_e)}LS(Se,u)})}function sh(l,u,h){return{instance:l,listener:u,currentTarget:h}}function lg(l,u){for(var h=u+"Capture",m=[];l!==null;){var _=l,S=_.stateNode;if(_=_.tag,_!==5&&_!==26&&_!==27||S===null||(_=Ql(l,h),_!=null&&m.unshift(sh(l,_,S)),_=Ql(l,u),_!=null&&m.push(sh(l,_,S))),l.tag===3)return m;l=l.return}return[]}function Yu(l){if(l===null)return null;do l=l.return;while(l&&l.tag!==5&&l.tag!==27);return l||null}function VS(l,u,h,m,_){for(var S=u._reactName,U=[];h!==null&&h!==m;){var z=h,K=z.alternate,oe=z.stateNode;if(z=z.tag,K!==null&&K===m)break;z!==5&&z!==26&&z!==27||oe===null||(K=oe,_?(oe=Ql(h,S),oe!=null&&U.unshift(sh(h,oe,K))):_||(oe=Ql(h,S),oe!=null&&U.push(sh(h,oe,K)))),h=h.return}U.length!==0&&l.push({event:u,listeners:U})}var v8=/\r\n?/g,x8=/\u0000|\uFFFD/g;function FS(l){return(typeof l=="string"?l:""+l).replace(v8,`
`).replace(x8,"")}function jS(l,u){return u=FS(u),FS(l)===u}function cg(){}function dn(l,u,h,m,_,S){switch(h){case"children":typeof m=="string"?u==="body"||u==="textarea"&&m===""||Ji(l,m):(typeof m=="number"||typeof m=="bigint")&&u!=="body"&&Ji(l,""+m);break;case"className":Ka(l,"class",m);break;case"tabIndex":Ka(l,"tabindex",m);break;case"dir":case"role":case"viewBox":case"width":case"height":Ka(l,h,m);break;case"style":_f(l,m,S);break;case"data":if(u!=="object"){Ka(l,"data",m);break}case"src":case"href":if(m===""&&(u!=="a"||h!=="href")){l.removeAttribute(h);break}if(m==null||typeof m=="function"||typeof m=="symbol"||typeof m=="boolean"){l.removeAttribute(h);break}m=pu(""+m),l.setAttribute(h,m);break;case"action":case"formAction":if(typeof m=="function"){l.setAttribute(h,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof S=="function"&&(h==="formAction"?(u!=="input"&&dn(l,u,"name",_.name,_,null),dn(l,u,"formEncType",_.formEncType,_,null),dn(l,u,"formMethod",_.formMethod,_,null),dn(l,u,"formTarget",_.formTarget,_,null)):(dn(l,u,"encType",_.encType,_,null),dn(l,u,"method",_.method,_,null),dn(l,u,"target",_.target,_,null)));if(m==null||typeof m=="symbol"||typeof m=="boolean"){l.removeAttribute(h);break}m=pu(""+m),l.setAttribute(h,m);break;case"onClick":m!=null&&(l.onclick=cg);break;case"onScroll":m!=null&&It("scroll",l);break;case"onScrollEnd":m!=null&&It("scrollend",l);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(r(61));if(h=m.__html,h!=null){if(_.children!=null)throw Error(r(60));l.innerHTML=h}}break;case"multiple":l.multiple=m&&typeof m!="function"&&typeof m!="symbol";break;case"muted":l.muted=m&&typeof m!="function"&&typeof m!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(m==null||typeof m=="function"||typeof m=="boolean"||typeof m=="symbol"){l.removeAttribute("xlink:href");break}h=pu(""+m),l.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",h);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":m!=null&&typeof m!="function"&&typeof m!="symbol"?l.setAttribute(h,""+m):l.removeAttribute(h);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":m&&typeof m!="function"&&typeof m!="symbol"?l.setAttribute(h,""):l.removeAttribute(h);break;case"capture":case"download":m===!0?l.setAttribute(h,""):m!==!1&&m!=null&&typeof m!="function"&&typeof m!="symbol"?l.setAttribute(h,m):l.removeAttribute(h);break;case"cols":case"rows":case"size":case"span":m!=null&&typeof m!="function"&&typeof m!="symbol"&&!isNaN(m)&&1<=m?l.setAttribute(h,m):l.removeAttribute(h);break;case"rowSpan":case"start":m==null||typeof m=="function"||typeof m=="symbol"||isNaN(m)?l.removeAttribute(h):l.setAttribute(h,m);break;case"popover":It("beforetoggle",l),It("toggle",l),ko(l,"popover",m);break;case"xlinkActuate":$r(l,"http://www.w3.org/1999/xlink","xlink:actuate",m);break;case"xlinkArcrole":$r(l,"http://www.w3.org/1999/xlink","xlink:arcrole",m);break;case"xlinkRole":$r(l,"http://www.w3.org/1999/xlink","xlink:role",m);break;case"xlinkShow":$r(l,"http://www.w3.org/1999/xlink","xlink:show",m);break;case"xlinkTitle":$r(l,"http://www.w3.org/1999/xlink","xlink:title",m);break;case"xlinkType":$r(l,"http://www.w3.org/1999/xlink","xlink:type",m);break;case"xmlBase":$r(l,"http://www.w3.org/XML/1998/namespace","xml:base",m);break;case"xmlLang":$r(l,"http://www.w3.org/XML/1998/namespace","xml:lang",m);break;case"xmlSpace":$r(l,"http://www.w3.org/XML/1998/namespace","xml:space",m);break;case"is":ko(l,"is",m);break;case"innerText":case"textContent":break;default:(!(2<h.length)||h[0]!=="o"&&h[0]!=="O"||h[1]!=="n"&&h[1]!=="N")&&(h=Ey.get(h)||h,ko(l,h,m))}}function tx(l,u,h,m,_,S){switch(h){case"style":_f(l,m,S);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(r(61));if(h=m.__html,h!=null){if(_.children!=null)throw Error(r(60));l.innerHTML=h}}break;case"children":typeof m=="string"?Ji(l,m):(typeof m=="number"||typeof m=="bigint")&&Ji(l,""+m);break;case"onScroll":m!=null&&It("scroll",l);break;case"onScrollEnd":m!=null&&It("scrollend",l);break;case"onClick":m!=null&&(l.onclick=cg);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!cu.hasOwnProperty(h))e:{if(h[0]==="o"&&h[1]==="n"&&(_=h.endsWith("Capture"),u=h.slice(2,_?h.length-7:void 0),S=l[ir]||null,S=S!=null?S[h]:null,typeof S=="function"&&l.removeEventListener(u,S,_),typeof m=="function")){typeof S!="function"&&S!==null&&(h in l?l[h]=null:l.hasAttribute(h)&&l.removeAttribute(h)),l.addEventListener(u,m,_);break e}h in l?l[h]=m:m===!0?l.setAttribute(h,""):ko(l,h,m)}}}function qr(l,u,h){switch(u){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":It("error",l),It("load",l);var m=!1,_=!1,S;for(S in h)if(h.hasOwnProperty(S)){var U=h[S];if(U!=null)switch(S){case"src":m=!0;break;case"srcSet":_=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,u));default:dn(l,u,S,U,h,null)}}_&&dn(l,u,"srcSet",h.srcSet,h,null),m&&dn(l,u,"src",h.src,h,null);return;case"input":It("invalid",l);var z=S=U=_=null,K=null,oe=null;for(m in h)if(h.hasOwnProperty(m)){var _e=h[m];if(_e!=null)switch(m){case"name":_=_e;break;case"type":U=_e;break;case"checked":K=_e;break;case"defaultChecked":oe=_e;break;case"value":S=_e;break;case"defaultValue":z=_e;break;case"children":case"dangerouslySetInnerHTML":if(_e!=null)throw Error(r(137,u));break;default:dn(l,u,m,_e,h,null)}}ql(l,S,z,K,oe,U,_,!1),hu(l);return;case"select":It("invalid",l),m=U=S=null;for(_ in h)if(h.hasOwnProperty(_)&&(z=h[_],z!=null))switch(_){case"value":S=z;break;case"defaultValue":U=z;break;case"multiple":m=z;default:dn(l,u,_,z,h,null)}u=S,h=U,l.multiple=!!m,u!=null?Ns(l,!!m,u,!1):h!=null&&Ns(l,!!m,h,!0);return;case"textarea":It("invalid",l),S=_=m=null;for(U in h)if(h.hasOwnProperty(U)&&(z=h[U],z!=null))switch(U){case"value":m=z;break;case"defaultValue":_=z;break;case"children":S=z;break;case"dangerouslySetInnerHTML":if(z!=null)throw Error(r(91));break;default:dn(l,u,U,z,h,null)}Xl(l,m,_,S),hu(l);return;case"option":for(K in h)if(h.hasOwnProperty(K)&&(m=h[K],m!=null))switch(K){case"selected":l.selected=m&&typeof m!="function"&&typeof m!="symbol";break;default:dn(l,u,K,m,h,null)}return;case"dialog":It("beforetoggle",l),It("toggle",l),It("cancel",l),It("close",l);break;case"iframe":case"object":It("load",l);break;case"video":case"audio":for(m=0;m<ah.length;m++)It(ah[m],l);break;case"image":It("error",l),It("load",l);break;case"details":It("toggle",l);break;case"embed":case"source":case"link":It("error",l),It("load",l);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(oe in h)if(h.hasOwnProperty(oe)&&(m=h[oe],m!=null))switch(oe){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,u));default:dn(l,u,oe,m,h,null)}return;default:if(bf(u)){for(_e in h)h.hasOwnProperty(_e)&&(m=h[_e],m!==void 0&&tx(l,u,_e,m,h,void 0));return}}for(z in h)h.hasOwnProperty(z)&&(m=h[z],m!=null&&dn(l,u,z,m,h,null))}function w8(l,u,h,m){switch(u){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var _=null,S=null,U=null,z=null,K=null,oe=null,_e=null;for(ue in h){var Se=h[ue];if(h.hasOwnProperty(ue)&&Se!=null)switch(ue){case"checked":break;case"value":break;case"defaultValue":K=Se;default:m.hasOwnProperty(ue)||dn(l,u,ue,null,m,Se)}}for(var ce in m){var ue=m[ce];if(Se=h[ce],m.hasOwnProperty(ce)&&(ue!=null||Se!=null))switch(ce){case"type":S=ue;break;case"name":_=ue;break;case"checked":oe=ue;break;case"defaultChecked":_e=ue;break;case"value":U=ue;break;case"defaultValue":z=ue;break;case"children":case"dangerouslySetInnerHTML":if(ue!=null)throw Error(r(137,u));break;default:ue!==Se&&dn(l,u,ce,ue,m,Se)}}Vi(l,U,z,K,oe,_e,S,_);return;case"select":ue=U=z=ce=null;for(S in h)if(K=h[S],h.hasOwnProperty(S)&&K!=null)switch(S){case"value":break;case"multiple":ue=K;default:m.hasOwnProperty(S)||dn(l,u,S,null,m,K)}for(_ in m)if(S=m[_],K=h[_],m.hasOwnProperty(_)&&(S!=null||K!=null))switch(_){case"value":ce=S;break;case"defaultValue":z=S;break;case"multiple":U=S;default:S!==K&&dn(l,u,_,S,m,K)}u=z,h=U,m=ue,ce!=null?Ns(l,!!h,ce,!1):!!m!=!!h&&(u!=null?Ns(l,!!h,u,!0):Ns(l,!!h,h?[]:"",!1));return;case"textarea":ue=ce=null;for(z in h)if(_=h[z],h.hasOwnProperty(z)&&_!=null&&!m.hasOwnProperty(z))switch(z){case"value":break;case"children":break;default:dn(l,u,z,null,m,_)}for(U in m)if(_=m[U],S=h[U],m.hasOwnProperty(U)&&(_!=null||S!=null))switch(U){case"value":ce=_;break;case"defaultValue":ue=_;break;case"children":break;case"dangerouslySetInnerHTML":if(_!=null)throw Error(r(91));break;default:_!==S&&dn(l,u,U,_,m,S)}cn(l,ce,ue);return;case"option":for(var ct in h)if(ce=h[ct],h.hasOwnProperty(ct)&&ce!=null&&!m.hasOwnProperty(ct))switch(ct){case"selected":l.selected=!1;break;default:dn(l,u,ct,null,m,ce)}for(K in m)if(ce=m[K],ue=h[K],m.hasOwnProperty(K)&&ce!==ue&&(ce!=null||ue!=null))switch(K){case"selected":l.selected=ce&&typeof ce!="function"&&typeof ce!="symbol";break;default:dn(l,u,K,ce,m,ue)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var it in h)ce=h[it],h.hasOwnProperty(it)&&ce!=null&&!m.hasOwnProperty(it)&&dn(l,u,it,null,m,ce);for(oe in m)if(ce=m[oe],ue=h[oe],m.hasOwnProperty(oe)&&ce!==ue&&(ce!=null||ue!=null))switch(oe){case"children":case"dangerouslySetInnerHTML":if(ce!=null)throw Error(r(137,u));break;default:dn(l,u,oe,ce,m,ue)}return;default:if(bf(u)){for(var fn in h)ce=h[fn],h.hasOwnProperty(fn)&&ce!==void 0&&!m.hasOwnProperty(fn)&&tx(l,u,fn,void 0,m,ce);for(_e in m)ce=m[_e],ue=h[_e],!m.hasOwnProperty(_e)||ce===ue||ce===void 0&&ue===void 0||tx(l,u,_e,ce,m,ue);return}}for(var ee in h)ce=h[ee],h.hasOwnProperty(ee)&&ce!=null&&!m.hasOwnProperty(ee)&&dn(l,u,ee,null,m,ce);for(Se in m)ce=m[Se],ue=h[Se],!m.hasOwnProperty(Se)||ce===ue||ce==null&&ue==null||dn(l,u,Se,ce,m,ue)}var nx=null,rx=null;function ug(l){return l.nodeType===9?l:l.ownerDocument}function US(l){switch(l){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function HS(l,u){if(l===0)switch(u){case"svg":return 1;case"math":return 2;default:return 0}return l===1&&u==="foreignObject"?0:l}function ix(l,u){return l==="textarea"||l==="noscript"||typeof u.children=="string"||typeof u.children=="number"||typeof u.children=="bigint"||typeof u.dangerouslySetInnerHTML=="object"&&u.dangerouslySetInnerHTML!==null&&u.dangerouslySetInnerHTML.__html!=null}var ax=null;function _8(){var l=window.event;return l&&l.type==="popstate"?l===ax?!1:(ax=l,!0):(ax=null,!1)}var zS=typeof setTimeout=="function"?setTimeout:void 0,b8=typeof clearTimeout=="function"?clearTimeout:void 0,$S=typeof Promise=="function"?Promise:void 0,A8=typeof queueMicrotask=="function"?queueMicrotask:typeof $S<"u"?function(l){return $S.resolve(null).then(l).catch(E8)}:zS;function E8(l){setTimeout(function(){throw l})}function Zo(l){return l==="head"}function GS(l,u){var h=u,m=0,_=0;do{var S=h.nextSibling;if(l.removeChild(h),S&&S.nodeType===8)if(h=S.data,h==="/$"){if(0<m&&8>m){h=m;var U=l.ownerDocument;if(h&1&&oh(U.documentElement),h&2&&oh(U.body),h&4)for(h=U.head,oh(h),U=h.firstChild;U;){var z=U.nextSibling,K=U.nodeName;U[$l]||K==="SCRIPT"||K==="STYLE"||K==="LINK"&&U.rel.toLowerCase()==="stylesheet"||h.removeChild(U),U=z}}if(_===0){l.removeChild(S),gh(u);return}_--}else h==="$"||h==="$?"||h==="$!"?_++:m=h.charCodeAt(0)-48;else m=0;h=S}while(h);gh(u)}function sx(l){var u=l.firstChild;for(u&&u.nodeType===10&&(u=u.nextSibling);u;){var h=u;switch(u=u.nextSibling,h.nodeName){case"HTML":case"HEAD":case"BODY":sx(h),Po(h);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(h.rel.toLowerCase()==="stylesheet")continue}l.removeChild(h)}}function S8(l,u,h,m){for(;l.nodeType===1;){var _=h;if(l.nodeName.toLowerCase()!==u.toLowerCase()){if(!m&&(l.nodeName!=="INPUT"||l.type!=="hidden"))break}else if(m){if(!l[$l])switch(u){case"meta":if(!l.hasAttribute("itemprop"))break;return l;case"link":if(S=l.getAttribute("rel"),S==="stylesheet"&&l.hasAttribute("data-precedence"))break;if(S!==_.rel||l.getAttribute("href")!==(_.href==null||_.href===""?null:_.href)||l.getAttribute("crossorigin")!==(_.crossOrigin==null?null:_.crossOrigin)||l.getAttribute("title")!==(_.title==null?null:_.title))break;return l;case"style":if(l.hasAttribute("data-precedence"))break;return l;case"script":if(S=l.getAttribute("src"),(S!==(_.src==null?null:_.src)||l.getAttribute("type")!==(_.type==null?null:_.type)||l.getAttribute("crossorigin")!==(_.crossOrigin==null?null:_.crossOrigin))&&S&&l.hasAttribute("async")&&!l.hasAttribute("itemprop"))break;return l;default:return l}}else if(u==="input"&&l.type==="hidden"){var S=_.name==null?null:""+_.name;if(_.type==="hidden"&&l.getAttribute("name")===S)return l}else return l;if(l=Ca(l.nextSibling),l===null)break}return null}function T8(l,u,h){if(u==="")return null;for(;l.nodeType!==3;)if((l.nodeType!==1||l.nodeName!=="INPUT"||l.type!=="hidden")&&!h||(l=Ca(l.nextSibling),l===null))return null;return l}function ox(l){return l.data==="$!"||l.data==="$?"&&l.ownerDocument.readyState==="complete"}function C8(l,u){var h=l.ownerDocument;if(l.data!=="$?"||h.readyState==="complete")u();else{var m=function(){u(),h.removeEventListener("DOMContentLoaded",m)};h.addEventListener("DOMContentLoaded",m),l._reactRetry=m}}function Ca(l){for(;l!=null;l=l.nextSibling){var u=l.nodeType;if(u===1||u===3)break;if(u===8){if(u=l.data,u==="$"||u==="$!"||u==="$?"||u==="F!"||u==="F")break;if(u==="/$")return null}}return l}var lx=null;function WS(l){l=l.previousSibling;for(var u=0;l;){if(l.nodeType===8){var h=l.data;if(h==="$"||h==="$!"||h==="$?"){if(u===0)return l;u--}else h==="/$"&&u++}l=l.previousSibling}return null}function YS(l,u,h){switch(u=ug(h),l){case"html":if(l=u.documentElement,!l)throw Error(r(452));return l;case"head":if(l=u.head,!l)throw Error(r(453));return l;case"body":if(l=u.body,!l)throw Error(r(454));return l;default:throw Error(r(451))}}function oh(l){for(var u=l.attributes;u.length;)l.removeAttributeNode(u[0]);Po(l)}var ca=new Map,qS=new Set;function dg(l){return typeof l.getRootNode=="function"?l.getRootNode():l.nodeType===9?l:l.ownerDocument}var eo=Y.d;Y.d={f:I8,r:D8,D:R8,C:M8,L:O8,m:P8,X:N8,S:k8,M:L8};function I8(){var l=eo.f(),u=ng();return l||u}function D8(l){var u=qa(l);u!==null&&u.tag===5&&u.type==="form"?pE(u):eo.r(l)}var qu=typeof document>"u"?null:document;function XS(l,u,h){var m=qu;if(m&&typeof u=="string"&&u){var _=ar(u);_='link[rel="'+l+'"][href="'+_+'"]',typeof h=="string"&&(_+='[crossorigin="'+h+'"]'),qS.has(_)||(qS.add(_),l={rel:l,crossOrigin:h,href:u},m.querySelector(_)===null&&(u=m.createElement("link"),qr(u,"link",l),qn(u),m.head.appendChild(u)))}}function R8(l){eo.D(l),XS("dns-prefetch",l,null)}function M8(l,u){eo.C(l,u),XS("preconnect",l,u)}function O8(l,u,h){eo.L(l,u,h);var m=qu;if(m&&l&&u){var _='link[rel="preload"][as="'+ar(u)+'"]';u==="image"&&h&&h.imageSrcSet?(_+='[imagesrcset="'+ar(h.imageSrcSet)+'"]',typeof h.imageSizes=="string"&&(_+='[imagesizes="'+ar(h.imageSizes)+'"]')):_+='[href="'+ar(l)+'"]';var S=_;switch(u){case"style":S=Xu(l);break;case"script":S=Ku(l)}ca.has(S)||(l=f({rel:"preload",href:u==="image"&&h&&h.imageSrcSet?void 0:l,as:u},h),ca.set(S,l),m.querySelector(_)!==null||u==="style"&&m.querySelector(lh(S))||u==="script"&&m.querySelector(ch(S))||(u=m.createElement("link"),qr(u,"link",l),qn(u),m.head.appendChild(u)))}}function P8(l,u){eo.m(l,u);var h=qu;if(h&&l){var m=u&&typeof u.as=="string"?u.as:"script",_='link[rel="modulepreload"][as="'+ar(m)+'"][href="'+ar(l)+'"]',S=_;switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":S=Ku(l)}if(!ca.has(S)&&(l=f({rel:"modulepreload",href:l},u),ca.set(S,l),h.querySelector(_)===null)){switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(h.querySelector(ch(S)))return}m=h.createElement("link"),qr(m,"link",l),qn(m),h.head.appendChild(m)}}}function k8(l,u,h){eo.S(l,u,h);var m=qu;if(m&&l){var _=yi(m).hoistableStyles,S=Xu(l);u=u||"default";var U=_.get(S);if(!U){var z={loading:0,preload:null};if(U=m.querySelector(lh(S)))z.loading=5;else{l=f({rel:"stylesheet",href:l,"data-precedence":u},h),(h=ca.get(S))&&cx(l,h);var K=U=m.createElement("link");qn(K),qr(K,"link",l),K._p=new Promise(function(oe,_e){K.onload=oe,K.onerror=_e}),K.addEventListener("load",function(){z.loading|=1}),K.addEventListener("error",function(){z.loading|=2}),z.loading|=4,fg(U,u,m)}U={type:"stylesheet",instance:U,count:1,state:z},_.set(S,U)}}}function N8(l,u){eo.X(l,u);var h=qu;if(h&&l){var m=yi(h).hoistableScripts,_=Ku(l),S=m.get(_);S||(S=h.querySelector(ch(_)),S||(l=f({src:l,async:!0},u),(u=ca.get(_))&&ux(l,u),S=h.createElement("script"),qn(S),qr(S,"link",l),h.head.appendChild(S)),S={type:"script",instance:S,count:1,state:null},m.set(_,S))}}function L8(l,u){eo.M(l,u);var h=qu;if(h&&l){var m=yi(h).hoistableScripts,_=Ku(l),S=m.get(_);S||(S=h.querySelector(ch(_)),S||(l=f({src:l,async:!0,type:"module"},u),(u=ca.get(_))&&ux(l,u),S=h.createElement("script"),qn(S),qr(S,"link",l),h.head.appendChild(S)),S={type:"script",instance:S,count:1,state:null},m.set(_,S))}}function KS(l,u,h,m){var _=(_=He.current)?dg(_):null;if(!_)throw Error(r(446));switch(l){case"meta":case"title":return null;case"style":return typeof h.precedence=="string"&&typeof h.href=="string"?(u=Xu(h.href),h=yi(_).hoistableStyles,m=h.get(u),m||(m={type:"style",instance:null,count:0,state:null},h.set(u,m)),m):{type:"void",instance:null,count:0,state:null};case"link":if(h.rel==="stylesheet"&&typeof h.href=="string"&&typeof h.precedence=="string"){l=Xu(h.href);var S=yi(_).hoistableStyles,U=S.get(l);if(U||(_=_.ownerDocument||_,U={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},S.set(l,U),(S=_.querySelector(lh(l)))&&!S._p&&(U.instance=S,U.state.loading=5),ca.has(l)||(h={rel:"preload",as:"style",href:h.href,crossOrigin:h.crossOrigin,integrity:h.integrity,media:h.media,hrefLang:h.hrefLang,referrerPolicy:h.referrerPolicy},ca.set(l,h),S||B8(_,l,h,U.state))),u&&m===null)throw Error(r(528,""));return U}if(u&&m!==null)throw Error(r(529,""));return null;case"script":return u=h.async,h=h.src,typeof h=="string"&&u&&typeof u!="function"&&typeof u!="symbol"?(u=Ku(h),h=yi(_).hoistableScripts,m=h.get(u),m||(m={type:"script",instance:null,count:0,state:null},h.set(u,m)),m):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,l))}}function Xu(l){return'href="'+ar(l)+'"'}function lh(l){return'link[rel="stylesheet"]['+l+"]"}function QS(l){return f({},l,{"data-precedence":l.precedence,precedence:null})}function B8(l,u,h,m){l.querySelector('link[rel="preload"][as="style"]['+u+"]")?m.loading=1:(u=l.createElement("link"),m.preload=u,u.addEventListener("load",function(){return m.loading|=1}),u.addEventListener("error",function(){return m.loading|=2}),qr(u,"link",h),qn(u),l.head.appendChild(u))}function Ku(l){return'[src="'+ar(l)+'"]'}function ch(l){return"script[async]"+l}function ZS(l,u,h){if(u.count++,u.instance===null)switch(u.type){case"style":var m=l.querySelector('style[data-href~="'+ar(h.href)+'"]');if(m)return u.instance=m,qn(m),m;var _=f({},h,{"data-href":h.href,"data-precedence":h.precedence,href:null,precedence:null});return m=(l.ownerDocument||l).createElement("style"),qn(m),qr(m,"style",_),fg(m,h.precedence,l),u.instance=m;case"stylesheet":_=Xu(h.href);var S=l.querySelector(lh(_));if(S)return u.state.loading|=4,u.instance=S,qn(S),S;m=QS(h),(_=ca.get(_))&&cx(m,_),S=(l.ownerDocument||l).createElement("link"),qn(S);var U=S;return U._p=new Promise(function(z,K){U.onload=z,U.onerror=K}),qr(S,"link",m),u.state.loading|=4,fg(S,h.precedence,l),u.instance=S;case"script":return S=Ku(h.src),(_=l.querySelector(ch(S)))?(u.instance=_,qn(_),_):(m=h,(_=ca.get(S))&&(m=f({},h),ux(m,_)),l=l.ownerDocument||l,_=l.createElement("script"),qn(_),qr(_,"link",m),l.head.appendChild(_),u.instance=_);case"void":return null;default:throw Error(r(443,u.type))}else u.type==="stylesheet"&&(u.state.loading&4)===0&&(m=u.instance,u.state.loading|=4,fg(m,h.precedence,l));return u.instance}function fg(l,u,h){for(var m=h.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),_=m.length?m[m.length-1]:null,S=_,U=0;U<m.length;U++){var z=m[U];if(z.dataset.precedence===u)S=z;else if(S!==_)break}S?S.parentNode.insertBefore(l,S.nextSibling):(u=h.nodeType===9?h.head:h,u.insertBefore(l,u.firstChild))}function cx(l,u){l.crossOrigin==null&&(l.crossOrigin=u.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=u.referrerPolicy),l.title==null&&(l.title=u.title)}function ux(l,u){l.crossOrigin==null&&(l.crossOrigin=u.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=u.referrerPolicy),l.integrity==null&&(l.integrity=u.integrity)}var hg=null;function JS(l,u,h){if(hg===null){var m=new Map,_=hg=new Map;_.set(h,m)}else _=hg,m=_.get(h),m||(m=new Map,_.set(h,m));if(m.has(l))return m;for(m.set(l,null),h=h.getElementsByTagName(l),_=0;_<h.length;_++){var S=h[_];if(!(S[$l]||S[mr]||l==="link"&&S.getAttribute("rel")==="stylesheet")&&S.namespaceURI!=="http://www.w3.org/2000/svg"){var U=S.getAttribute(u)||"";U=l+U;var z=m.get(U);z?z.push(S):m.set(U,[S])}}return m}function eT(l,u,h){l=l.ownerDocument||l,l.head.insertBefore(h,u==="title"?l.querySelector("head > title"):null)}function V8(l,u,h){if(h===1||u.itemProp!=null)return!1;switch(l){case"meta":case"title":return!0;case"style":if(typeof u.precedence!="string"||typeof u.href!="string"||u.href==="")break;return!0;case"link":if(typeof u.rel!="string"||typeof u.href!="string"||u.href===""||u.onLoad||u.onError)break;switch(u.rel){case"stylesheet":return l=u.disabled,typeof u.precedence=="string"&&l==null;default:return!0}case"script":if(u.async&&typeof u.async!="function"&&typeof u.async!="symbol"&&!u.onLoad&&!u.onError&&u.src&&typeof u.src=="string")return!0}return!1}function tT(l){return!(l.type==="stylesheet"&&(l.state.loading&3)===0)}var uh=null;function F8(){}function j8(l,u,h){if(uh===null)throw Error(r(475));var m=uh;if(u.type==="stylesheet"&&(typeof h.media!="string"||matchMedia(h.media).matches!==!1)&&(u.state.loading&4)===0){if(u.instance===null){var _=Xu(h.href),S=l.querySelector(lh(_));if(S){l=S._p,l!==null&&typeof l=="object"&&typeof l.then=="function"&&(m.count++,m=pg.bind(m),l.then(m,m)),u.state.loading|=4,u.instance=S,qn(S);return}S=l.ownerDocument||l,h=QS(h),(_=ca.get(_))&&cx(h,_),S=S.createElement("link"),qn(S);var U=S;U._p=new Promise(function(z,K){U.onload=z,U.onerror=K}),qr(S,"link",h),u.instance=S}m.stylesheets===null&&(m.stylesheets=new Map),m.stylesheets.set(u,l),(l=u.state.preload)&&(u.state.loading&3)===0&&(m.count++,u=pg.bind(m),l.addEventListener("load",u),l.addEventListener("error",u))}}function U8(){if(uh===null)throw Error(r(475));var l=uh;return l.stylesheets&&l.count===0&&dx(l,l.stylesheets),0<l.count?function(u){var h=setTimeout(function(){if(l.stylesheets&&dx(l,l.stylesheets),l.unsuspend){var m=l.unsuspend;l.unsuspend=null,m()}},6e4);return l.unsuspend=u,function(){l.unsuspend=null,clearTimeout(h)}}:null}function pg(){if(this.count--,this.count===0){if(this.stylesheets)dx(this,this.stylesheets);else if(this.unsuspend){var l=this.unsuspend;this.unsuspend=null,l()}}}var gg=null;function dx(l,u){l.stylesheets=null,l.unsuspend!==null&&(l.count++,gg=new Map,u.forEach(H8,l),gg=null,pg.call(l))}function H8(l,u){if(!(u.state.loading&4)){var h=gg.get(l);if(h)var m=h.get(null);else{h=new Map,gg.set(l,h);for(var _=l.querySelectorAll("link[data-precedence],style[data-precedence]"),S=0;S<_.length;S++){var U=_[S];(U.nodeName==="LINK"||U.getAttribute("media")!=="not all")&&(h.set(U.dataset.precedence,U),m=U)}m&&h.set(null,m)}_=u.instance,U=_.getAttribute("data-precedence"),S=h.get(U)||m,S===m&&h.set(null,_),h.set(U,_),this.count++,m=pg.bind(this),_.addEventListener("load",m),_.addEventListener("error",m),S?S.parentNode.insertBefore(_,S.nextSibling):(l=l.nodeType===9?l.head:l,l.insertBefore(_,l.firstChild)),u.state.loading|=4}}var dh={$$typeof:C,Provider:null,Consumer:null,_currentValue:Q,_currentValue2:Q,_threadCount:0};function z8(l,u,h,m,_,S,U,z){this.tag=1,this.containerInfo=l,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=mi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mi(0),this.hiddenUpdates=mi(null),this.identifierPrefix=m,this.onUncaughtError=_,this.onCaughtError=S,this.onRecoverableError=U,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=z,this.incompleteTransitions=new Map}function nT(l,u,h,m,_,S,U,z,K,oe,_e,Se){return l=new z8(l,u,h,U,z,K,oe,Se),u=1,S===!0&&(u|=24),S=ji(3,null,null,u),l.current=S,S.stateNode=l,u=Wy(),u.refCount++,l.pooledCache=u,u.refCount++,S.memoizedState={element:m,isDehydrated:h,cache:u},Ky(S),l}function rT(l){return l?(l=Cu,l):Cu}function iT(l,u,h,m,_,S){_=rT(_),m.context===null?m.context=_:m.pendingContext=_,m=Fo(u),m.payload={element:h},S=S===void 0?null:S,S!==null&&(m.callback=S),h=jo(l,m,u),h!==null&&(Gi(h,l,u),Uf(h,l,u))}function aT(l,u){if(l=l.memoizedState,l!==null&&l.dehydrated!==null){var h=l.retryLane;l.retryLane=h!==0&&h<u?h:u}}function fx(l,u){aT(l,u),(l=l.alternate)&&aT(l,u)}function sT(l){if(l.tag===13){var u=Tu(l,67108864);u!==null&&Gi(u,l,67108864),fx(l,67108864)}}var mg=!0;function $8(l,u,h,m){var _=G.T;G.T=null;var S=Y.p;try{Y.p=2,hx(l,u,h,m)}finally{Y.p=S,G.T=_}}function G8(l,u,h,m){var _=G.T;G.T=null;var S=Y.p;try{Y.p=8,hx(l,u,h,m)}finally{Y.p=S,G.T=_}}function hx(l,u,h,m){if(mg){var _=px(m);if(_===null)ex(l,u,m,yg,h),lT(l,m);else if(Y8(_,l,u,h,m))m.stopPropagation();else if(lT(l,m),u&4&&-1<W8.indexOf(l)){for(;_!==null;){var S=qa(_);if(S!==null)switch(S.tag){case 3:if(S=S.stateNode,S.current.memoizedState.isDehydrated){var U=Yt(S.pendingLanes);if(U!==0){var z=S;for(z.pendingLanes|=2,z.entangledLanes|=2;U;){var K=1<<31-Xe(U);z.entanglements[1]|=K,U&=~K}ls(S),(rn&6)===0&&(eg=Ce()+500,ih(0))}}break;case 13:z=Tu(S,2),z!==null&&Gi(z,S,2),ng(),fx(S,2)}if(S=px(m),S===null&&ex(l,u,m,yg,h),S===_)break;_=S}_!==null&&m.stopPropagation()}else ex(l,u,m,null,h)}}function px(l){return l=ea(l),gx(l)}var yg=null;function gx(l){if(yg=null,l=Os(l),l!==null){var u=a(l);if(u===null)l=null;else{var h=u.tag;if(h===13){if(l=s(u),l!==null)return l;l=null}else if(h===3){if(u.stateNode.current.memoizedState.isDehydrated)return u.tag===3?u.stateNode.containerInfo:null;l=null}else u!==l&&(l=null)}}return yg=l,null}function oT(l){switch(l){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(We()){case $e:return 2;case Ie:return 8;case Oe:case ut:return 32;case wt:return 268435456;default:return 32}default:return 32}}var mx=!1,Jo=null,el=null,tl=null,fh=new Map,hh=new Map,nl=[],W8="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function lT(l,u){switch(l){case"focusin":case"focusout":Jo=null;break;case"dragenter":case"dragleave":el=null;break;case"mouseover":case"mouseout":tl=null;break;case"pointerover":case"pointerout":fh.delete(u.pointerId);break;case"gotpointercapture":case"lostpointercapture":hh.delete(u.pointerId)}}function ph(l,u,h,m,_,S){return l===null||l.nativeEvent!==S?(l={blockedOn:u,domEventName:h,eventSystemFlags:m,nativeEvent:S,targetContainers:[_]},u!==null&&(u=qa(u),u!==null&&sT(u)),l):(l.eventSystemFlags|=m,u=l.targetContainers,_!==null&&u.indexOf(_)===-1&&u.push(_),l)}function Y8(l,u,h,m,_){switch(u){case"focusin":return Jo=ph(Jo,l,u,h,m,_),!0;case"dragenter":return el=ph(el,l,u,h,m,_),!0;case"mouseover":return tl=ph(tl,l,u,h,m,_),!0;case"pointerover":var S=_.pointerId;return fh.set(S,ph(fh.get(S)||null,l,u,h,m,_)),!0;case"gotpointercapture":return S=_.pointerId,hh.set(S,ph(hh.get(S)||null,l,u,h,m,_)),!0}return!1}function cT(l){var u=Os(l.target);if(u!==null){var h=a(u);if(h!==null){if(u=h.tag,u===13){if(u=s(h),u!==null){l.blockedOn=u,zl(l.priority,function(){if(h.tag===13){var m=$i();m=Ms(m);var _=Tu(h,m);_!==null&&Gi(_,h,m),fx(h,m)}});return}}else if(u===3&&h.stateNode.current.memoizedState.isDehydrated){l.blockedOn=h.tag===3?h.stateNode.containerInfo:null;return}}}l.blockedOn=null}function vg(l){if(l.blockedOn!==null)return!1;for(var u=l.targetContainers;0<u.length;){var h=px(l.nativeEvent);if(h===null){h=l.nativeEvent;var m=new h.constructor(h.type,h);Ls=m,h.target.dispatchEvent(m),Ls=null}else return u=qa(h),u!==null&&sT(u),l.blockedOn=h,!1;u.shift()}return!0}function uT(l,u,h){vg(l)&&h.delete(u)}function q8(){mx=!1,Jo!==null&&vg(Jo)&&(Jo=null),el!==null&&vg(el)&&(el=null),tl!==null&&vg(tl)&&(tl=null),fh.forEach(uT),hh.forEach(uT)}function xg(l,u){l.blockedOn===u&&(l.blockedOn=null,mx||(mx=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,q8)))}var wg=null;function dT(l){wg!==l&&(wg=l,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){wg===l&&(wg=null);for(var u=0;u<l.length;u+=3){var h=l[u],m=l[u+1],_=l[u+2];if(typeof m!="function"){if(gx(m||h)===null)continue;break}var S=qa(h);S!==null&&(l.splice(u,3),u-=3,gv(S,{pending:!0,data:_,method:h.method,action:m},m,_))}}))}function gh(l){function u(K){return xg(K,l)}Jo!==null&&xg(Jo,l),el!==null&&xg(el,l),tl!==null&&xg(tl,l),fh.forEach(u),hh.forEach(u);for(var h=0;h<nl.length;h++){var m=nl[h];m.blockedOn===l&&(m.blockedOn=null)}for(;0<nl.length&&(h=nl[0],h.blockedOn===null);)cT(h),h.blockedOn===null&&nl.shift();if(h=(l.ownerDocument||l).$$reactFormReplay,h!=null)for(m=0;m<h.length;m+=3){var _=h[m],S=h[m+1],U=_[ir]||null;if(typeof S=="function")U||dT(h);else if(U){var z=null;if(S&&S.hasAttribute("formAction")){if(_=S,U=S[ir]||null)z=U.formAction;else if(gx(_)!==null)continue}else z=U.action;typeof z=="function"?h[m+1]=z:(h.splice(m,3),m-=3),dT(h)}}}function yx(l){this._internalRoot=l}_g.prototype.render=yx.prototype.render=function(l){var u=this._internalRoot;if(u===null)throw Error(r(409));var h=u.current,m=$i();iT(h,m,l,u,null,null)},_g.prototype.unmount=yx.prototype.unmount=function(){var l=this._internalRoot;if(l!==null){this._internalRoot=null;var u=l.containerInfo;iT(l.current,2,null,l,null,null),ng(),u[Zi]=null}};function _g(l){this._internalRoot=l}_g.prototype.unstable_scheduleHydration=function(l){if(l){var u=rr();l={blockedOn:null,target:l,priority:u};for(var h=0;h<nl.length&&u!==0&&u<nl[h].priority;h++);nl.splice(h,0,l),h===0&&cT(l)}};var fT=e.version;if(fT!=="19.1.0")throw Error(r(527,fT,"19.1.0"));Y.findDOMNode=function(l){var u=l._reactInternals;if(u===void 0)throw typeof l.render=="function"?Error(r(188)):(l=Object.keys(l).join(","),Error(r(268,l)));return l=c(u),l=l!==null?d(l):null,l=l===null?null:l.stateNode,l};var X8={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:G,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var bg=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!bg.isDisabled&&bg.supportsFiber)try{tt=bg.inject(X8),rt=bg}catch{}}return yh.createRoot=function(l,u){if(!i(l))throw Error(r(299));var h=!1,m="",_=IE,S=DE,U=RE,z=null;return u!=null&&(u.unstable_strictMode===!0&&(h=!0),u.identifierPrefix!==void 0&&(m=u.identifierPrefix),u.onUncaughtError!==void 0&&(_=u.onUncaughtError),u.onCaughtError!==void 0&&(S=u.onCaughtError),u.onRecoverableError!==void 0&&(U=u.onRecoverableError),u.unstable_transitionCallbacks!==void 0&&(z=u.unstable_transitionCallbacks)),u=nT(l,1,!1,null,null,h,m,_,S,U,z,null),l[Zi]=u.current,Jv(l),new yx(u)},yh.hydrateRoot=function(l,u,h){if(!i(l))throw Error(r(299));var m=!1,_="",S=IE,U=DE,z=RE,K=null,oe=null;return h!=null&&(h.unstable_strictMode===!0&&(m=!0),h.identifierPrefix!==void 0&&(_=h.identifierPrefix),h.onUncaughtError!==void 0&&(S=h.onUncaughtError),h.onCaughtError!==void 0&&(U=h.onCaughtError),h.onRecoverableError!==void 0&&(z=h.onRecoverableError),h.unstable_transitionCallbacks!==void 0&&(K=h.unstable_transitionCallbacks),h.formState!==void 0&&(oe=h.formState)),u=nT(l,1,!0,u,h??null,m,_,S,U,z,K,oe),u.context=rT(null),h=u.current,m=$i(),m=Ms(m),_=Fo(m),_.callback=null,jo(h,_,m),h=m,u.current.lanes=h,nr(u,h),ls(u),l[Zi]=u.current,Jv(l),new _g(u)},yh.version="19.1.0",yh}var bT;function zN(){if(bT)return vx.exports;bT=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),vx.exports=HN(),vx.exports}var $N=zN();const GN=()=>{};var AT={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z3=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},WN=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const a=n[t++];e[r++]=String.fromCharCode((i&31)<<6|a&63)}else if(i>239&&i<365){const a=n[t++],s=n[t++],o=n[t++],c=((i&7)<<18|(a&63)<<12|(s&63)<<6|o&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const a=n[t++],s=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(a&63)<<6|s&63)}}return e.join("")},J3={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){const a=n[i],s=i+1<n.length,o=s?n[i+1]:0,c=i+2<n.length,d=c?n[i+2]:0,f=a>>2,p=(a&3)<<4|o>>4;let g=(o&15)<<2|d>>6,y=d&63;c||(y=64,s||(g=64)),r.push(t[f],t[p],t[g],t[y])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(Z3(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):WN(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){const a=t[n.charAt(i++)],o=i<n.length?t[n.charAt(i)]:0;++i;const d=i<n.length?t[n.charAt(i)]:64;++i;const p=i<n.length?t[n.charAt(i)]:64;if(++i,a==null||o==null||d==null||p==null)throw new YN;const g=a<<2|o>>4;if(r.push(g),d!==64){const y=o<<4&240|d>>2;if(r.push(y),p!==64){const v=d<<6&192|p;r.push(v)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class YN extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const qN=function(n){const e=Z3(n);return J3.encodeByteArray(e,!0)},p1=function(n){return qN(n).replace(/\./g,"")},eR=function(n){try{return J3.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XN(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KN=()=>XN().__FIREBASE_DEFAULTS__,QN=()=>{if(typeof process>"u"||typeof AT>"u")return;const n=AT.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},ZN=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&eR(n[1]);return e&&JSON.parse(e)},wm=()=>{try{return GN()||KN()||QN()||ZN()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},tR=n=>{var e,t;return(t=(e=wm())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},JN=n=>{const e=tR(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},nR=()=>{var n;return(n=wm())===null||n===void 0?void 0:n.config},rR=n=>{var e;return(e=wm())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e5{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tf(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function iR(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t5(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,a=n.sub||n.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},n);return[p1(JSON.stringify(t)),p1(JSON.stringify(s)),""].join(".")}const Yh={};function n5(){const n={prod:[],emulator:[]};for(const e of Object.keys(Yh))Yh[e]?n.emulator.push(e):n.prod.push(e);return n}function r5(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let ET=!1;function aR(n,e){if(typeof window>"u"||typeof document>"u"||!tf(window.location.host)||Yh[n]===e||Yh[n]||ET)return;Yh[n]=e;function t(g){return`__firebase__banner__${g}`}const r="__firebase__banner",a=n5().prod.length>0;function s(){const g=document.getElementById(r);g&&g.remove()}function o(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function c(g,y){g.setAttribute("width","24"),g.setAttribute("id",y),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function d(){const g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{ET=!0,s()},g}function f(g,y){g.setAttribute("id",y),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function p(){const g=r5(r),y=t("text"),v=document.getElementById(y)||document.createElement("span"),b=t("learnmore"),A=document.getElementById(b)||document.createElement("a"),E=t("preprendIcon"),T=document.getElementById(E)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){const C=g.element;o(C),f(A,b);const D=d();c(T,E),C.append(T,v,A,D),document.body.appendChild(C)}a?(v.innerText="Preview backend disconnected.",T.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(T.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,v.innerText="Preview backend running in this workspace."),v.setAttribute("id",y)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hi(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function i5(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(hi())}function a5(){var n;const e=(n=wm())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function s5(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function o5(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function l5(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function c5(){const n=hi();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function u5(){return!a5()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function d5(){try{return typeof indexedDB=="object"}catch{return!1}}function f5(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var a;e(((a=i.error)===null||a===void 0?void 0:a.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h5="FirebaseError";class Co extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=h5,Object.setPrototypeOf(this,Co.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,T0.prototype.create)}}class T0{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},i=`${this.service}/${e}`,a=this.errors[e],s=a?p5(a,r):"Error",o=`${this.serviceName}: ${s} (${i}).`;return new Co(i,o,r)}}function p5(n,e){return n.replace(g5,(t,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const g5=/\{\$([^}]+)}/g;function m5(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Hc(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const i of t){if(!r.includes(i))return!1;const a=n[i],s=e[i];if(ST(a)&&ST(s)){if(!Hc(a,s))return!1}else if(a!==s)return!1}for(const i of r)if(!t.includes(i))return!1;return!0}function ST(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C0(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Oh(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,a]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(a)}}),e}function Ph(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function y5(n,e){const t=new v5(n,e);return t.subscribe.bind(t)}class v5{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");x5(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=_x),i.error===void 0&&(i.error=_x),i.complete===void 0&&(i.complete=_x);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function x5(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function _x(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pr(n){return n&&n._delegate?n._delegate:n}class zc{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ec="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w5{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new e5;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(a){if(i)return null;throw a}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(b5(e))try{this.getOrInitializeService({instanceIdentifier:Ec})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const a=this.getOrInitializeService({instanceIdentifier:i});r.resolve(a)}catch{}}}}clearInstance(e=Ec){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ec){return this.instances.has(e)}getOptions(e=Ec){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[a,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(a);r===o&&s.resolve(i)}return i}onInit(e,t){var r;const i=this.normalizeInstanceIdentifier(t),a=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;a.add(e),this.onInitCallbacks.set(i,a);const s=this.instances.get(i);return s&&e(s,i),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:_5(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Ec){return this.component?this.component.multipleInstances?e:Ec:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function _5(n){return n===Ec?void 0:n}function b5(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A5{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new w5(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Mt;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Mt||(Mt={}));const E5={debug:Mt.DEBUG,verbose:Mt.VERBOSE,info:Mt.INFO,warn:Mt.WARN,error:Mt.ERROR,silent:Mt.SILENT},S5=Mt.INFO,T5={[Mt.DEBUG]:"log",[Mt.VERBOSE]:"log",[Mt.INFO]:"info",[Mt.WARN]:"warn",[Mt.ERROR]:"error"},C5=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),i=T5[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Bw{constructor(e){this.name=e,this._logLevel=S5,this._logHandler=C5,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Mt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?E5[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Mt.DEBUG,...e),this._logHandler(this,Mt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Mt.VERBOSE,...e),this._logHandler(this,Mt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Mt.INFO,...e),this._logHandler(this,Mt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Mt.WARN,...e),this._logHandler(this,Mt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Mt.ERROR,...e),this._logHandler(this,Mt.ERROR,...e)}}const I5=(n,e)=>e.some(t=>n instanceof t);let TT,CT;function D5(){return TT||(TT=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function R5(){return CT||(CT=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const sR=new WeakMap,_2=new WeakMap,oR=new WeakMap,bx=new WeakMap,Vw=new WeakMap;function M5(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",a),n.removeEventListener("error",s)},a=()=>{t(wl(n.result)),i()},s=()=>{r(n.error),i()};n.addEventListener("success",a),n.addEventListener("error",s)});return e.then(t=>{t instanceof IDBCursor&&sR.set(t,n)}).catch(()=>{}),Vw.set(e,n),e}function O5(n){if(_2.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",a),n.removeEventListener("error",s),n.removeEventListener("abort",s)},a=()=>{t(),i()},s=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",a),n.addEventListener("error",s),n.addEventListener("abort",s)});_2.set(n,e)}let b2={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return _2.get(n);if(e==="objectStoreNames")return n.objectStoreNames||oR.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return wl(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function P5(n){b2=n(b2)}function k5(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(Ax(this),e,...t);return oR.set(r,e.sort?e.sort():[e]),wl(r)}:R5().includes(n)?function(...e){return n.apply(Ax(this),e),wl(sR.get(this))}:function(...e){return wl(n.apply(Ax(this),e))}}function N5(n){return typeof n=="function"?k5(n):(n instanceof IDBTransaction&&O5(n),I5(n,D5())?new Proxy(n,b2):n)}function wl(n){if(n instanceof IDBRequest)return M5(n);if(bx.has(n))return bx.get(n);const e=N5(n);return e!==n&&(bx.set(n,e),Vw.set(e,n)),e}const Ax=n=>Vw.get(n);function L5(n,e,{blocked:t,upgrade:r,blocking:i,terminated:a}={}){const s=indexedDB.open(n,e),o=wl(s);return r&&s.addEventListener("upgradeneeded",c=>{r(wl(s.result),c.oldVersion,c.newVersion,wl(s.transaction),c)}),t&&s.addEventListener("blocked",c=>t(c.oldVersion,c.newVersion,c)),o.then(c=>{a&&c.addEventListener("close",()=>a()),i&&c.addEventListener("versionchange",d=>i(d.oldVersion,d.newVersion,d))}).catch(()=>{}),o}const B5=["get","getKey","getAll","getAllKeys","count"],V5=["put","add","delete","clear"],Ex=new Map;function IT(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Ex.get(e))return Ex.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=V5.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||B5.includes(t)))return;const a=async function(s,...o){const c=this.transaction(s,i?"readwrite":"readonly");let d=c.store;return r&&(d=d.index(o.shift())),(await Promise.all([d[t](...o),i&&c.done]))[0]};return Ex.set(e,a),a}P5(n=>({...n,get:(e,t,r)=>IT(e,t)||n.get(e,t,r),has:(e,t)=>!!IT(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F5{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(j5(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function j5(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const A2="@firebase/app",DT="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const go=new Bw("@firebase/app"),U5="@firebase/app-compat",H5="@firebase/analytics-compat",z5="@firebase/analytics",$5="@firebase/app-check-compat",G5="@firebase/app-check",W5="@firebase/auth",Y5="@firebase/auth-compat",q5="@firebase/database",X5="@firebase/data-connect",K5="@firebase/database-compat",Q5="@firebase/functions",Z5="@firebase/functions-compat",J5="@firebase/installations",e9="@firebase/installations-compat",t9="@firebase/messaging",n9="@firebase/messaging-compat",r9="@firebase/performance",i9="@firebase/performance-compat",a9="@firebase/remote-config",s9="@firebase/remote-config-compat",o9="@firebase/storage",l9="@firebase/storage-compat",c9="@firebase/firestore",u9="@firebase/ai",d9="@firebase/firestore-compat",f9="firebase",h9="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E2="[DEFAULT]",p9={[A2]:"fire-core",[U5]:"fire-core-compat",[z5]:"fire-analytics",[H5]:"fire-analytics-compat",[G5]:"fire-app-check",[$5]:"fire-app-check-compat",[W5]:"fire-auth",[Y5]:"fire-auth-compat",[q5]:"fire-rtdb",[X5]:"fire-data-connect",[K5]:"fire-rtdb-compat",[Q5]:"fire-fn",[Z5]:"fire-fn-compat",[J5]:"fire-iid",[e9]:"fire-iid-compat",[t9]:"fire-fcm",[n9]:"fire-fcm-compat",[r9]:"fire-perf",[i9]:"fire-perf-compat",[a9]:"fire-rc",[s9]:"fire-rc-compat",[o9]:"fire-gcs",[l9]:"fire-gcs-compat",[c9]:"fire-fst",[d9]:"fire-fst-compat",[u9]:"fire-vertex","fire-js":"fire-js",[f9]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g1=new Map,g9=new Map,S2=new Map;function RT(n,e){try{n.container.addComponent(e)}catch(t){go.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Ld(n){const e=n.name;if(S2.has(e))return go.debug(`There were multiple attempts to register component ${e}.`),!1;S2.set(e,n);for(const t of g1.values())RT(t,n);for(const t of g9.values())RT(t,n);return!0}function Fw(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function fa(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m9={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},_l=new T0("app","Firebase",m9);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y9{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new zc("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw _l.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nf=h9;function lR(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r=Object.assign({name:E2,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw _l.create("bad-app-name",{appName:String(i)});if(t||(t=nR()),!t)throw _l.create("no-options");const a=g1.get(i);if(a){if(Hc(t,a.options)&&Hc(r,a.config))return a;throw _l.create("duplicate-app",{appName:i})}const s=new A5(i);for(const c of S2.values())s.addComponent(c);const o=new y9(t,r,s);return g1.set(i,o),o}function cR(n=E2){const e=g1.get(n);if(!e&&n===E2&&nR())return lR();if(!e)throw _l.create("no-app",{appName:n});return e}function bl(n,e,t){var r;let i=(r=p9[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);const a=i.match(/\s|\//),s=e.match(/\s|\//);if(a||s){const o=[`Unable to register library "${i}" with version "${e}":`];a&&o.push(`library name "${i}" contains illegal characters (whitespace or "/")`),a&&s&&o.push("and"),s&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),go.warn(o.join(" "));return}Ld(new zc(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v9="firebase-heartbeat-database",x9=1,n0="firebase-heartbeat-store";let Sx=null;function uR(){return Sx||(Sx=L5(v9,x9,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(n0)}catch(t){console.warn(t)}}}}).catch(n=>{throw _l.create("idb-open",{originalErrorMessage:n.message})})),Sx}async function w9(n){try{const t=(await uR()).transaction(n0),r=await t.objectStore(n0).get(dR(n));return await t.done,r}catch(e){if(e instanceof Co)go.warn(e.message);else{const t=_l.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});go.warn(t.message)}}}async function MT(n,e){try{const r=(await uR()).transaction(n0,"readwrite");await r.objectStore(n0).put(e,dR(n)),await r.done}catch(t){if(t instanceof Co)go.warn(t.message);else{const r=_l.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});go.warn(r.message)}}}function dR(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _9=1024,b9=30;class A9{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new S9(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=OT();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(s=>s.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:i}),this._heartbeatsCache.heartbeats.length>b9){const s=T9(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){go.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=OT(),{heartbeatsToSend:r,unsentEntries:i}=E9(this._heartbeatsCache.heartbeats),a=p1(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(t){return go.warn(t),""}}}function OT(){return new Date().toISOString().substring(0,10)}function E9(n,e=_9){const t=[];let r=n.slice();for(const i of n){const a=t.find(s=>s.agent===i.agent);if(a){if(a.dates.push(i.date),PT(t)>e){a.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),PT(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class S9{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return d5()?f5().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await w9(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return MT(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return MT(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function PT(n){return p1(JSON.stringify({version:2,heartbeats:n})).length}function T9(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C9(n){Ld(new zc("platform-logger",e=>new F5(e),"PRIVATE")),Ld(new zc("heartbeat",e=>new A9(e),"PRIVATE")),bl(A2,DT,n),bl(A2,DT,"esm2017"),bl("fire-js","")}C9("");function jw(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function fR(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const I9=fR,hR=new T0("auth","Firebase",fR());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m1=new Bw("@firebase/auth");function D9(n,...e){m1.logLevel<=Mt.WARN&&m1.warn(`Auth (${nf}): ${n}`,...e)}function Zg(n,...e){m1.logLevel<=Mt.ERROR&&m1.error(`Auth (${nf}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function za(n,...e){throw Uw(n,...e)}function vs(n,...e){return Uw(n,...e)}function pR(n,e,t){const r=Object.assign(Object.assign({},I9()),{[e]:t});return new T0("auth","Firebase",r).create(e,{appName:n.name})}function uo(n){return pR(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Uw(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return hR.create(n,...e)}function ot(n,e,...t){if(!n)throw Uw(e,...t)}function ro(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Zg(e),new Error(e)}function mo(n,e){n||ro(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T2(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function R9(){return kT()==="http:"||kT()==="https:"}function kT(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M9(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(R9()||o5()||"connection"in navigator)?navigator.onLine:!0}function O9(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I0{constructor(e,t){this.shortDelay=e,this.longDelay=t,mo(t>e,"Short delay should be less than long delay!"),this.isMobile=i5()||l5()}get(){return M9()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hw(n,e){mo(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gR{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ro("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ro("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ro("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P9={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k9=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],N9=new I0(3e4,6e4);function Nl(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function Ll(n,e,t,r,i={}){return mR(n,i,async()=>{let a={},s={};r&&(e==="GET"?s=r:a={body:JSON.stringify(r)});const o=C0(Object.assign({key:n.config.apiKey},s)).slice(1),c=await n._getAdditionalHeaders();c["Content-Type"]="application/json",n.languageCode&&(c["X-Firebase-Locale"]=n.languageCode);const d=Object.assign({method:e,headers:c},a);return s5()||(d.referrerPolicy="no-referrer"),n.emulatorConfig&&tf(n.emulatorConfig.host)&&(d.credentials="include"),gR.fetch()(await yR(n,n.config.apiHost,t,o),d)})}async function mR(n,e,t){n._canInitEmulator=!1;const r=Object.assign(Object.assign({},P9),e);try{const i=new B9(n),a=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();const s=await a.json();if("needConfirmation"in s)throw Eg(n,"account-exists-with-different-credential",s);if(a.ok&&!("errorMessage"in s))return s;{const o=a.ok?s.errorMessage:s.error.message,[c,d]=o.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Eg(n,"credential-already-in-use",s);if(c==="EMAIL_EXISTS")throw Eg(n,"email-already-in-use",s);if(c==="USER_DISABLED")throw Eg(n,"user-disabled",s);const f=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw pR(n,f,d);za(n,f)}}catch(i){if(i instanceof Co)throw i;za(n,"network-request-failed",{message:String(i)})}}async function D0(n,e,t,r,i={}){const a=await Ll(n,e,t,r,i);return"mfaPendingCredential"in a&&za(n,"multi-factor-auth-required",{_serverResponse:a}),a}async function yR(n,e,t,r){const i=`${e}${t}?${r}`,a=n,s=a.config.emulator?Hw(n.config,i):`${n.config.apiScheme}://${i}`;return k9.includes(t)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(s).toString():s}function L9(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class B9{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(vs(this.auth,"network-request-failed")),N9.get())})}}function Eg(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const i=vs(n,e,r);return i.customData._tokenResponse=t,i}function NT(n){return n!==void 0&&n.enterprise!==void 0}class V9{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return L9(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function F9(n,e){return Ll(n,"GET","/v2/recaptchaConfig",Nl(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function j9(n,e){return Ll(n,"POST","/v1/accounts:delete",e)}async function y1(n,e){return Ll(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qh(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function U9(n,e=!1){const t=pr(n),r=await t.getIdToken(e),i=zw(r);ot(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const a=typeof i.firebase=="object"?i.firebase:void 0,s=a==null?void 0:a.sign_in_provider;return{claims:i,token:r,authTime:qh(Tx(i.auth_time)),issuedAtTime:qh(Tx(i.iat)),expirationTime:qh(Tx(i.exp)),signInProvider:s||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function Tx(n){return Number(n)*1e3}function zw(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return Zg("JWT malformed, contained fewer than 3 sections"),null;try{const i=eR(t);return i?JSON.parse(i):(Zg("Failed to decode base64 JWT payload"),null)}catch(i){return Zg("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function LT(n){const e=zw(n);return ot(e,"internal-error"),ot(typeof e.exp<"u","internal-error"),ot(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function r0(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof Co&&H9(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function H9({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z9{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C2{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=qh(this.lastLoginAt),this.creationTime=qh(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function v1(n){var e;const t=n.auth,r=await n.getIdToken(),i=await r0(n,y1(t,{idToken:r}));ot(i==null?void 0:i.users.length,t,"internal-error");const a=i.users[0];n._notifyReloadListener(a);const s=!((e=a.providerUserInfo)===null||e===void 0)&&e.length?vR(a.providerUserInfo):[],o=G9(n.providerData,s),c=n.isAnonymous,d=!(n.email&&a.passwordHash)&&!(o!=null&&o.length),f=c?d:!1,p={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:o,metadata:new C2(a.createdAt,a.lastLoginAt),isAnonymous:f};Object.assign(n,p)}async function $9(n){const e=pr(n);await v1(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function G9(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function vR(n){return n.map(e=>{var{providerId:t}=e,r=jw(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function W9(n,e){const t=await mR(n,{},async()=>{const r=C0({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:a}=n.config,s=await yR(n,i,"/v1/token",`key=${a}`),o=await n._getAdditionalHeaders();o["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:o,body:r};return n.emulatorConfig&&tf(n.emulatorConfig.host)&&(c.credentials="include"),gR.fetch()(s,c)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function Y9(n,e){return Ll(n,"POST","/v2/accounts:revokeToken",Nl(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ed{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ot(e.idToken,"internal-error"),ot(typeof e.idToken<"u","internal-error"),ot(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):LT(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){ot(e.length!==0,"internal-error");const t=LT(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(ot(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:i,expiresIn:a}=await W9(e,t);this.updateTokensAndExpiration(r,i,Number(a))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:i,expirationTime:a}=t,s=new Ed;return r&&(ot(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(ot(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),a&&(ot(typeof a=="number","internal-error",{appName:e}),s.expirationTime=a),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ed,this.toJSON())}_performRefresh(){return ro("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function il(n,e){ot(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Fa{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,a=jw(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new z9(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new C2(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const t=await r0(this,this.stsTokenManager.getToken(this.auth,e));return ot(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return U9(this,e)}reload(){return $9(this)}_assign(e){this!==e&&(ot(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Fa(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){ot(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await v1(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(fa(this.auth.app))return Promise.reject(uo(this.auth));const e=await this.getIdToken();return await r0(this,j9(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,a,s,o,c,d,f;const p=(r=t.displayName)!==null&&r!==void 0?r:void 0,g=(i=t.email)!==null&&i!==void 0?i:void 0,y=(a=t.phoneNumber)!==null&&a!==void 0?a:void 0,v=(s=t.photoURL)!==null&&s!==void 0?s:void 0,b=(o=t.tenantId)!==null&&o!==void 0?o:void 0,A=(c=t._redirectEventId)!==null&&c!==void 0?c:void 0,E=(d=t.createdAt)!==null&&d!==void 0?d:void 0,T=(f=t.lastLoginAt)!==null&&f!==void 0?f:void 0,{uid:C,emailVerified:D,isAnonymous:O,providerData:N,stsTokenManager:M}=t;ot(C&&M,e,"internal-error");const R=Ed.fromJSON(this.name,M);ot(typeof C=="string",e,"internal-error"),il(p,e.name),il(g,e.name),ot(typeof D=="boolean",e,"internal-error"),ot(typeof O=="boolean",e,"internal-error"),il(y,e.name),il(v,e.name),il(b,e.name),il(A,e.name),il(E,e.name),il(T,e.name);const I=new Fa({uid:C,auth:e,email:g,emailVerified:D,displayName:p,isAnonymous:O,photoURL:v,phoneNumber:y,tenantId:b,stsTokenManager:R,createdAt:E,lastLoginAt:T});return N&&Array.isArray(N)&&(I.providerData=N.map(B=>Object.assign({},B))),A&&(I._redirectEventId=A),I}static async _fromIdTokenResponse(e,t,r=!1){const i=new Ed;i.updateFromServerResponse(t);const a=new Fa({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await v1(a),a}static async _fromGetAccountInfoResponse(e,t,r){const i=t.users[0];ot(i.localId!==void 0,"internal-error");const a=i.providerUserInfo!==void 0?vR(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!(a!=null&&a.length),o=new Ed;o.updateFromIdToken(r);const c=new Fa({uid:i.localId,auth:e,stsTokenManager:o,isAnonymous:s}),d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new C2(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(a!=null&&a.length)};return Object.assign(c,d),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BT=new Map;function io(n){mo(n instanceof Function,"Expected a class definition");let e=BT.get(n);return e?(mo(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,BT.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xR{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}xR.type="NONE";const VT=xR;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jg(n,e,t){return`firebase:${n}:${e}:${t}`}class Sd{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:i,name:a}=this.auth;this.fullUserKey=Jg(this.userKey,i.apiKey,a),this.fullPersistenceKey=Jg("persistence",i.apiKey,a),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await y1(this.auth,{idToken:e}).catch(()=>{});return t?Fa._fromGetAccountInfoResponse(this.auth,t,e):null}return Fa._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new Sd(io(VT),e,r);const i=(await Promise.all(t.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let a=i[0]||io(VT);const s=Jg(r,e.config.apiKey,e.name);let o=null;for(const d of t)try{const f=await d._get(s);if(f){let p;if(typeof f=="string"){const g=await y1(e,{idToken:f}).catch(()=>{});if(!g)break;p=await Fa._fromGetAccountInfoResponse(e,g,f)}else p=Fa._fromJSON(e,f);d!==a&&(o=p),a=d;break}}catch{}const c=i.filter(d=>d._shouldAllowMigration);return!a._shouldAllowMigration||!c.length?new Sd(a,e,r):(a=c[0],o&&await a._set(s,o.toJSON()),await Promise.all(t.map(async d=>{if(d!==a)try{await d._remove(s)}catch{}})),new Sd(a,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FT(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(AR(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(wR(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(SR(e))return"Blackberry";if(TR(e))return"Webos";if(_R(e))return"Safari";if((e.includes("chrome/")||bR(e))&&!e.includes("edge/"))return"Chrome";if(ER(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function wR(n=hi()){return/firefox\//i.test(n)}function _R(n=hi()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function bR(n=hi()){return/crios\//i.test(n)}function AR(n=hi()){return/iemobile/i.test(n)}function ER(n=hi()){return/android/i.test(n)}function SR(n=hi()){return/blackberry/i.test(n)}function TR(n=hi()){return/webos/i.test(n)}function $w(n=hi()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function q9(n=hi()){var e;return $w(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function X9(){return c5()&&document.documentMode===10}function CR(n=hi()){return $w(n)||ER(n)||TR(n)||SR(n)||/windows phone/i.test(n)||AR(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IR(n,e=[]){let t;switch(n){case"Browser":t=FT(hi());break;case"Worker":t=`${FT(hi())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${nf}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K9{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=a=>new Promise((s,o)=>{try{const c=e(a);s(c)}catch(c){o(c)}});r.onAbort=t,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Q9(n,e={}){return Ll(n,"GET","/v2/passwordPolicy",Nl(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z9=6;class J9{constructor(e){var t,r,i,a;const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=s.minPasswordLength)!==null&&t!==void 0?t:Z9,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(a=e.forceUpgradeOnSignin)!==null&&a!==void 0?a:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,a,s,o;const c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(t=c.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(i=c.containsLowercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(a=c.containsUppercaseLetter)!==null&&a!==void 0?a:!0),c.isValid&&(c.isValid=(s=c.containsNumericCharacter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(o=c.containsNonAlphanumericCharacter)!==null&&o!==void 0?o:!0),c}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e7{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new jT(this),this.idTokenSubscription=new jT(this),this.beforeStateQueue=new K9(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=hR,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=io(t)),this._initializationPromise=this.queue(async()=>{var r,i,a;if(!this._deleted&&(this.persistenceManager=await Sd.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((a=this.currentUser)===null||a===void 0?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await y1(this,{idToken:e}),r=await Fa._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(fa(this.app)){const s=this.app.settings.authIdToken;return s?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(o,o))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const s=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,o=i==null?void 0:i._redirectEventId,c=await this.tryRedirectSignIn(e);(!s||s===o)&&(c!=null&&c.user)&&(i=c.user,a=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(i)}catch(s){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return ot(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await v1(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=O9()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(fa(this.app))return Promise.reject(uo(this));const t=e?pr(e):null;return t&&ot(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&ot(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return fa(this.app)?Promise.reject(uo(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return fa(this.app)?Promise.reject(uo(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(io(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Q9(this),t=new J9(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new T0("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await Y9(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&io(e)||this._popupRedirectResolver;ot(t,this,"argument-error"),this.redirectPersistenceManager=await Sd.create(this,[io(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};const a=typeof t=="function"?t:t.next.bind(t);let s=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(ot(o,this,"internal-error"),o.then(()=>{s||a(this.currentUser)}),typeof t=="function"){const c=e.addObserver(t,r,i);return()=>{s=!0,c()}}else{const c=e.addObserver(t);return()=>{s=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ot(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=IR(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){var e;if(fa(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&D9(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function Qc(n){return pr(n)}class jT{constructor(e){this.auth=e,this.observer=null,this.addObserver=y5(t=>this.observer=t)}get next(){return ot(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _m={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function t7(n){_m=n}function DR(n){return _m.loadJS(n)}function n7(){return _m.recaptchaEnterpriseScript}function r7(){return _m.gapiScript}function i7(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class a7{constructor(){this.enterprise=new s7}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class s7{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const o7="recaptcha-enterprise",RR="NO_RECAPTCHA";class l7{constructor(e){this.type=o7,this.auth=Qc(e)}async verify(e="verify",t=!1){async function r(a){if(!t){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(s,o)=>{F9(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)o(new Error("recaptcha Enterprise site key undefined"));else{const d=new V9(c);return a.tenantId==null?a._agentRecaptchaConfig=d:a._tenantRecaptchaConfigs[a.tenantId]=d,s(d.siteKey)}}).catch(c=>{o(c)})})}function i(a,s,o){const c=window.grecaptcha;NT(c)?c.enterprise.ready(()=>{c.enterprise.execute(a,{action:e}).then(d=>{s(d)}).catch(()=>{s(RR)})}):o(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new a7().execute("siteKey",{action:"verify"}):new Promise((a,s)=>{r(this.auth).then(o=>{if(!t&&NT(window.grecaptcha))i(o,a,s);else{if(typeof window>"u"){s(new Error("RecaptchaVerifier is only supported in browser"));return}let c=n7();c.length!==0&&(c+=o),DR(c).then(()=>{i(o,a,s)}).catch(d=>{s(d)})}}).catch(o=>{s(o)})})}}async function UT(n,e,t,r=!1,i=!1){const a=new l7(n);let s;if(i)s=RR;else try{s=await a.verify(t)}catch{s=await a.verify(t,!0)}const o=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in o){const c=o.phoneEnrollmentInfo.phoneNumber,d=o.phoneEnrollmentInfo.recaptchaToken;Object.assign(o,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:d,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in o){const c=o.phoneSignInInfo.recaptchaToken;Object.assign(o,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return o}return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function I2(n,e,t,r,i){var a;if(!((a=n._getRecaptchaConfig())===null||a===void 0)&&a.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await UT(n,e,t,t==="getOobCode");return r(n,s)}else return r(n,e).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await UT(n,e,t,t==="getOobCode");return r(n,o)}else return Promise.reject(s)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c7(n,e){const t=Fw(n,"auth");if(t.isInitialized()){const i=t.getImmediate(),a=t.getOptions();if(Hc(a,e??{}))return i;za(i,"already-initialized")}return t.initialize({options:e})}function u7(n,e){const t=(e==null?void 0:e.persistence)||[],r=(Array.isArray(t)?t:[t]).map(io);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function d7(n,e,t){const r=Qc(n);ot(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,a=MR(e),{host:s,port:o}=f7(e),c=o===null?"":`:${o}`,d={url:`${a}//${s}${c}/`},f=Object.freeze({host:s,port:o,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){ot(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),ot(Hc(d,r.config.emulator)&&Hc(f,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=d,r.emulatorConfig=f,r.settings.appVerificationDisabledForTesting=!0,tf(s)?(iR(`${a}//${s}${c}`),aR("Auth",!0)):h7()}function MR(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function f7(n){const e=MR(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const a=i[1];return{host:a,port:HT(r.substr(a.length+1))}}else{const[a,s]=r.split(":");return{host:a,port:HT(s)}}}function HT(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function h7(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gw{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return ro("not implemented")}_getIdTokenResponse(e){return ro("not implemented")}_linkToIdToken(e,t){return ro("not implemented")}_getReauthenticationResolver(e){return ro("not implemented")}}async function p7(n,e){return Ll(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function g7(n,e){return D0(n,"POST","/v1/accounts:signInWithPassword",Nl(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function m7(n,e){return D0(n,"POST","/v1/accounts:signInWithEmailLink",Nl(n,e))}async function y7(n,e){return D0(n,"POST","/v1/accounts:signInWithEmailLink",Nl(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i0 extends Gw{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new i0(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new i0(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return I2(e,t,"signInWithPassword",g7);case"emailLink":return m7(e,{email:this._email,oobCode:this._password});default:za(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return I2(e,r,"signUpPassword",p7);case"emailLink":return y7(e,{idToken:t,email:this._email,oobCode:this._password});default:za(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Td(n,e){return D0(n,"POST","/v1/accounts:signInWithIdp",Nl(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v7="http://localhost";class $c extends Gw{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new $c(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):za("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=t,a=jw(t,["providerId","signInMethod"]);if(!r||!i)return null;const s=new $c(r,i);return s.idToken=a.idToken||void 0,s.accessToken=a.accessToken||void 0,s.secret=a.secret,s.nonce=a.nonce,s.pendingToken=a.pendingToken||null,s}_getIdTokenResponse(e){const t=this.buildRequest();return Td(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,Td(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Td(e,t)}buildRequest(){const e={requestUri:v7,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=C0(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x7(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function w7(n){const e=Oh(Ph(n)).link,t=e?Oh(Ph(e)).deep_link_id:null,r=Oh(Ph(n)).deep_link_id;return(r?Oh(Ph(r)).link:null)||r||t||e||n}class Ww{constructor(e){var t,r,i,a,s,o;const c=Oh(Ph(e)),d=(t=c.apiKey)!==null&&t!==void 0?t:null,f=(r=c.oobCode)!==null&&r!==void 0?r:null,p=x7((i=c.mode)!==null&&i!==void 0?i:null);ot(d&&f&&p,"argument-error"),this.apiKey=d,this.operation=p,this.code=f,this.continueUrl=(a=c.continueUrl)!==null&&a!==void 0?a:null,this.languageCode=(s=c.lang)!==null&&s!==void 0?s:null,this.tenantId=(o=c.tenantId)!==null&&o!==void 0?o:null}static parseLink(e){const t=w7(e);try{return new Ww(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rf{constructor(){this.providerId=rf.PROVIDER_ID}static credential(e,t){return i0._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=Ww.parseLink(t);return ot(r,"argument-error"),i0._fromEmailAndCode(e,r.code,r.tenantId)}}rf.PROVIDER_ID="password";rf.EMAIL_PASSWORD_SIGN_IN_METHOD="password";rf.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OR{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R0 extends OR{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hl extends R0{constructor(){super("facebook.com")}static credential(e){return $c._fromParams({providerId:hl.PROVIDER_ID,signInMethod:hl.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return hl.credentialFromTaggedObject(e)}static credentialFromError(e){return hl.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return hl.credential(e.oauthAccessToken)}catch{return null}}}hl.FACEBOOK_SIGN_IN_METHOD="facebook.com";hl.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pl extends R0{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return $c._fromParams({providerId:pl.PROVIDER_ID,signInMethod:pl.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return pl.credentialFromTaggedObject(e)}static credentialFromError(e){return pl.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return pl.credential(t,r)}catch{return null}}}pl.GOOGLE_SIGN_IN_METHOD="google.com";pl.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gl extends R0{constructor(){super("github.com")}static credential(e){return $c._fromParams({providerId:gl.PROVIDER_ID,signInMethod:gl.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return gl.credentialFromTaggedObject(e)}static credentialFromError(e){return gl.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return gl.credential(e.oauthAccessToken)}catch{return null}}}gl.GITHUB_SIGN_IN_METHOD="github.com";gl.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ml extends R0{constructor(){super("twitter.com")}static credential(e,t){return $c._fromParams({providerId:ml.PROVIDER_ID,signInMethod:ml.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return ml.credentialFromTaggedObject(e)}static credentialFromError(e){return ml.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return ml.credential(t,r)}catch{return null}}}ml.TWITTER_SIGN_IN_METHOD="twitter.com";ml.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _7(n,e){return D0(n,"POST","/v1/accounts:signUp",Nl(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gc{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,i=!1){const a=await Fa._fromIdTokenResponse(e,r,i),s=zT(r);return new Gc({user:a,providerId:s,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const i=zT(r);return new Gc({user:e,providerId:i,_tokenResponse:r,operationType:t})}}function zT(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x1 extends Co{constructor(e,t,r,i){var a;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,x1.prototype),this.customData={appName:e.name,tenantId:(a=e.tenantId)!==null&&a!==void 0?a:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new x1(e,t,r,i)}}function PR(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?x1._fromErrorAndOperation(n,a,e,r):a})}async function b7(n,e,t=!1){const r=await r0(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Gc._forOperation(n,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function A7(n,e,t=!1){const{auth:r}=n;if(fa(r.app))return Promise.reject(uo(r));const i="reauthenticate";try{const a=await r0(n,PR(r,i,e,n),t);ot(a.idToken,r,"internal-error");const s=zw(a.idToken);ot(s,r,"internal-error");const{sub:o}=s;return ot(n.uid===o,r,"user-mismatch"),Gc._forOperation(n,i,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&za(r,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kR(n,e,t=!1){if(fa(n.app))return Promise.reject(uo(n));const r="signIn",i=await PR(n,r,e),a=await Gc._fromIdTokenResponse(n,r,i);return t||await n._updateCurrentUser(a.user),a}async function E7(n,e){return kR(Qc(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NR(n){const e=Qc(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function S7(n,e,t){if(fa(n.app))return Promise.reject(uo(n));const r=Qc(n),s=await I2(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",_7).catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&NR(n),c}),o=await Gc._fromIdTokenResponse(r,"signIn",s);return await r._updateCurrentUser(o.user),o}function T7(n,e,t){return fa(n.app)?Promise.reject(uo(n)):E7(pr(n),rf.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&NR(n),r})}function C7(n,e,t,r){return pr(n).onIdTokenChanged(e,t,r)}function I7(n,e,t){return pr(n).beforeAuthStateChanged(e,t)}function D7(n,e,t,r){return pr(n).onAuthStateChanged(e,t,r)}const w1="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LR{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(w1,"1"),this.storage.removeItem(w1),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R7=1e3,M7=10;class BR extends LR{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=CR(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),i=this.localCache[t];r!==i&&e(t,i,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((s,o,c)=>{this.notifyListeners(s,c)});return}const r=e.key;t?this.detachListener():this.stopPolling();const i=()=>{const s=this.storage.getItem(r);!t&&this.localCache[r]===s||this.notifyListeners(r,s)},a=this.storage.getItem(r);X9()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,M7):i()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},R7)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}BR.type="LOCAL";const O7=BR;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VR extends LR{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}VR.type="SESSION";const FR=VR;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P7(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bm{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(i=>i.isListeningto(e));if(t)return t;const r=new bm(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:i,data:a}=t.data,s=this.handlersMap[i];if(!(s!=null&&s.size))return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const o=Array.from(s).map(async d=>d(t.origin,a)),c=await P7(o);t.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:c})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}bm.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yw(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k7{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let a,s;return new Promise((o,c)=>{const d=Yw("",20);i.port1.start();const f=setTimeout(()=>{c(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(p){const g=p;if(g.data.eventId===d)switch(g.data.status){case"ack":clearTimeout(f),a=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),o(g.data.response);break;default:clearTimeout(f),clearTimeout(a),c(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:d,data:t},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xs(){return window}function N7(n){xs().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jR(){return typeof xs().WorkerGlobalScope<"u"&&typeof xs().importScripts=="function"}async function L7(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function B7(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function V7(){return jR()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UR="firebaseLocalStorageDb",F7=1,_1="firebaseLocalStorage",HR="fbase_key";class M0{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Am(n,e){return n.transaction([_1],e?"readwrite":"readonly").objectStore(_1)}function j7(){const n=indexedDB.deleteDatabase(UR);return new M0(n).toPromise()}function D2(){const n=indexedDB.open(UR,F7);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(_1,{keyPath:HR})}catch(i){t(i)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(_1)?e(r):(r.close(),await j7(),e(await D2()))})})}async function $T(n,e,t){const r=Am(n,!0).put({[HR]:e,value:t});return new M0(r).toPromise()}async function U7(n,e){const t=Am(n,!1).get(e),r=await new M0(t).toPromise();return r===void 0?null:r.value}function GT(n,e){const t=Am(n,!0).delete(e);return new M0(t).toPromise()}const H7=800,z7=3;class zR{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await D2(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>z7)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return jR()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=bm._getInstance(V7()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await L7(),!this.activeServiceWorker)return;this.sender=new k7(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((t=r[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||B7()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await D2();return await $T(e,w1,"1"),await GT(e,w1),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>$T(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>U7(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>GT(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const a=Am(i,!1).getAll();return new M0(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:a}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(a)&&(this.notifyListeners(i,a),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),H7)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}zR.type="LOCAL";const $7=zR;new I0(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G7(n,e){return e?io(e):(ot(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qw extends Gw{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Td(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Td(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Td(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function W7(n){return kR(n.auth,new qw(n),n.bypassAuthState)}function Y7(n){const{auth:e,user:t}=n;return ot(t,e,"internal-error"),A7(t,new qw(n),n.bypassAuthState)}async function q7(n){const{auth:e,user:t}=n;return ot(t,e,"internal-error"),b7(t,new qw(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $R{constructor(e,t,r,i,a=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:i,tenantId:a,error:s,type:o}=e;if(s){this.reject(s);return}const c={auth:this.auth,requestUri:t,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(c))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return W7;case"linkViaPopup":case"linkViaRedirect":return q7;case"reauthViaPopup":case"reauthViaRedirect":return Y7;default:za(this.auth,"internal-error")}}resolve(e){mo(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){mo(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X7=new I0(2e3,1e4);class pd extends $R{constructor(e,t,r,i,a){super(e,t,i,a),this.provider=r,this.authWindow=null,this.pollId=null,pd.currentPopupAction&&pd.currentPopupAction.cancel(),pd.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ot(e,this.auth,"internal-error"),e}async onExecution(){mo(this.filter.length===1,"Popup operations only handle one event");const e=Yw();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(vs(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(vs(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,pd.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if(!((r=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(vs(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,X7.get())};e()}}pd.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K7="pendingRedirect",e1=new Map;class Q7 extends $R{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=e1.get(this.auth._key());if(!e){try{const r=await Z7(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}e1.set(this.auth._key(),e)}return this.bypassAuthState||e1.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Z7(n,e){const t=tL(e),r=eL(n);if(!await r._isAvailable())return!1;const i=await r._get(t)==="true";return await r._remove(t),i}function J7(n,e){e1.set(n._key(),e)}function eL(n){return io(n._redirectPersistence)}function tL(n){return Jg(K7,n.config.apiKey,n.name)}async function nL(n,e,t=!1){if(fa(n.app))return Promise.reject(uo(n));const r=Qc(n),i=G7(r,e),s=await new Q7(r,i,t).execute();return s&&!t&&(delete s.user._redirectEventId,await r._persistUserIfCurrent(s.user),await r._setRedirectUser(null,e)),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rL=600*1e3;class iL{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!aL(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!GR(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(vs(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=rL&&this.cachedEventUids.clear(),this.cachedEventUids.has(WT(e))}saveEventToCache(e){this.cachedEventUids.add(WT(e)),this.lastProcessedEventTime=Date.now()}}function WT(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function GR({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function aL(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return GR(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sL(n,e={}){return Ll(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oL=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,lL=/^https?/;async function cL(n){if(n.config.emulator)return;const{authorizedDomains:e}=await sL(n);for(const t of e)try{if(uL(t))return}catch{}za(n,"unauthorized-domain")}function uL(n){const e=T2(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const s=new URL(n);return s.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&s.hostname===r}if(!lL.test(t))return!1;if(oL.test(n))return r===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dL=new I0(3e4,6e4);function YT(){const n=xs().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function fL(n){return new Promise((e,t)=>{var r,i,a;function s(){YT(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{YT(),t(vs(n,"network-request-failed"))},timeout:dL.get()})}if(!((i=(r=xs().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((a=xs().gapi)===null||a===void 0)&&a.load)s();else{const o=i7("iframefcb");return xs()[o]=()=>{gapi.load?s():t(vs(n,"network-request-failed"))},DR(`${r7()}?onload=${o}`).catch(c=>t(c))}}).catch(e=>{throw t1=null,e})}let t1=null;function hL(n){return t1=t1||fL(n),t1}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pL=new I0(5e3,15e3),gL="__/auth/iframe",mL="emulator/auth/iframe",yL={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},vL=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function xL(n){const e=n.config;ot(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Hw(e,mL):`https://${n.config.authDomain}/${gL}`,r={apiKey:e.apiKey,appName:n.name,v:nf},i=vL.get(n.config.apiHost);i&&(r.eid=i);const a=n._getFrameworks();return a.length&&(r.fw=a.join(",")),`${t}?${C0(r).slice(1)}`}async function wL(n){const e=await hL(n),t=xs().gapi;return ot(t,n,"internal-error"),e.open({where:document.body,url:xL(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:yL,dontclear:!0},r=>new Promise(async(i,a)=>{await r.restyle({setHideOnLeave:!1});const s=vs(n,"network-request-failed"),o=xs().setTimeout(()=>{a(s)},pL.get());function c(){xs().clearTimeout(o),i(r)}r.ping(c).then(c,()=>{a(s)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _L={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},bL=500,AL=600,EL="_blank",SL="http://localhost";class qT{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function TL(n,e,t,r=bL,i=AL){const a=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString();let o="";const c=Object.assign(Object.assign({},_L),{width:r.toString(),height:i.toString(),top:a,left:s}),d=hi().toLowerCase();t&&(o=bR(d)?EL:t),wR(d)&&(e=e||SL,c.scrollbars="yes");const f=Object.entries(c).reduce((g,[y,v])=>`${g}${y}=${v},`,"");if(q9(d)&&o!=="_self")return CL(e||"",o),new qT(null);const p=window.open(e||"",o,f);ot(p,n,"popup-blocked");try{p.focus()}catch{}return new qT(p)}function CL(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IL="__/auth/handler",DL="emulator/auth/handler",RL=encodeURIComponent("fac");async function XT(n,e,t,r,i,a){ot(n.config.authDomain,n,"auth-domain-config-required"),ot(n.config.apiKey,n,"invalid-api-key");const s={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:nf,eventId:i};if(e instanceof OR){e.setDefaultLanguage(n.languageCode),s.providerId=e.providerId||"",m5(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(const[f,p]of Object.entries({}))s[f]=p}if(e instanceof R0){const f=e.getScopes().filter(p=>p!=="");f.length>0&&(s.scopes=f.join(","))}n.tenantId&&(s.tid=n.tenantId);const o=s;for(const f of Object.keys(o))o[f]===void 0&&delete o[f];const c=await n._getAppCheckToken(),d=c?`#${RL}=${encodeURIComponent(c)}`:"";return`${ML(n)}?${C0(o).slice(1)}${d}`}function ML({config:n}){return n.emulator?Hw(n,DL):`https://${n.authDomain}/${IL}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cx="webStorageSupport";class OL{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=FR,this._completeRedirectFn=nL,this._overrideRedirectResult=J7}async _openPopup(e,t,r,i){var a;mo((a=this.eventManagers[e._key()])===null||a===void 0?void 0:a.manager,"_initialize() not called before _openPopup()");const s=await XT(e,t,r,T2(),i);return TL(e,s,Yw())}async _openRedirect(e,t,r,i){await this._originValidation(e);const a=await XT(e,t,r,T2(),i);return N7(a),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:a}=this.eventManagers[t];return i?Promise.resolve(i):(mo(a,"If manager is not set, promise should be"),a)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await wL(e),r=new iL(e);return t.register("authEvent",i=>(ot(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Cx,{type:Cx},i=>{var a;const s=(a=i==null?void 0:i[0])===null||a===void 0?void 0:a[Cx];s!==void 0&&t(!!s),za(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=cL(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return CR()||_R()||$w()}}const PL=OL;var KT="@firebase/auth",QT="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kL{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){ot(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NL(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function LL(n){Ld(new zc("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:s,authDomain:o}=r.options;ot(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:s,authDomain:o,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:IR(n)},d=new e7(r,i,a,c);return u7(d,t),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Ld(new zc("auth-internal",e=>{const t=Qc(e.getProvider("auth").getImmediate());return(r=>new kL(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),bl(KT,QT,NL(n)),bl(KT,QT,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BL=300,VL=rR("authIdTokenMaxAge")||BL;let ZT=null;const FL=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>VL)return;const i=t==null?void 0:t.token;ZT!==i&&(ZT=i,await fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function jL(n=cR()){const e=Fw(n,"auth");if(e.isInitialized())return e.getImmediate();const t=c7(n,{popupRedirectResolver:PL,persistence:[$7,O7,FR]}),r=rR("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(r,location.origin);if(location.origin===a.origin){const s=FL(a.toString());I7(t,s,()=>s(t.currentUser)),C7(t,o=>s(o))}}const i=tR("auth");return i&&d7(t,`http://${i}`),t}function UL(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}t7({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{const a=vs("internal-error");a.customData=i,t(a)},r.type="text/javascript",r.charset="UTF-8",UL().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});LL("Browser");var HL="firebase",zL="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */bl(HL,zL,"app");var JT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Al,WR;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(M,R){function I(){}I.prototype=R.prototype,M.D=R.prototype,M.prototype=new I,M.prototype.constructor=M,M.C=function(B,L,k){for(var F=Array(arguments.length-2),q=2;q<arguments.length;q++)F[q-2]=arguments[q];return R.prototype[L].apply(B,F)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(M,R,I){I||(I=0);var B=Array(16);if(typeof R=="string")for(var L=0;16>L;++L)B[L]=R.charCodeAt(I++)|R.charCodeAt(I++)<<8|R.charCodeAt(I++)<<16|R.charCodeAt(I++)<<24;else for(L=0;16>L;++L)B[L]=R[I++]|R[I++]<<8|R[I++]<<16|R[I++]<<24;R=M.g[0],I=M.g[1],L=M.g[2];var k=M.g[3],F=R+(k^I&(L^k))+B[0]+3614090360&4294967295;R=I+(F<<7&4294967295|F>>>25),F=k+(L^R&(I^L))+B[1]+3905402710&4294967295,k=R+(F<<12&4294967295|F>>>20),F=L+(I^k&(R^I))+B[2]+606105819&4294967295,L=k+(F<<17&4294967295|F>>>15),F=I+(R^L&(k^R))+B[3]+3250441966&4294967295,I=L+(F<<22&4294967295|F>>>10),F=R+(k^I&(L^k))+B[4]+4118548399&4294967295,R=I+(F<<7&4294967295|F>>>25),F=k+(L^R&(I^L))+B[5]+1200080426&4294967295,k=R+(F<<12&4294967295|F>>>20),F=L+(I^k&(R^I))+B[6]+2821735955&4294967295,L=k+(F<<17&4294967295|F>>>15),F=I+(R^L&(k^R))+B[7]+4249261313&4294967295,I=L+(F<<22&4294967295|F>>>10),F=R+(k^I&(L^k))+B[8]+1770035416&4294967295,R=I+(F<<7&4294967295|F>>>25),F=k+(L^R&(I^L))+B[9]+2336552879&4294967295,k=R+(F<<12&4294967295|F>>>20),F=L+(I^k&(R^I))+B[10]+4294925233&4294967295,L=k+(F<<17&4294967295|F>>>15),F=I+(R^L&(k^R))+B[11]+2304563134&4294967295,I=L+(F<<22&4294967295|F>>>10),F=R+(k^I&(L^k))+B[12]+1804603682&4294967295,R=I+(F<<7&4294967295|F>>>25),F=k+(L^R&(I^L))+B[13]+4254626195&4294967295,k=R+(F<<12&4294967295|F>>>20),F=L+(I^k&(R^I))+B[14]+2792965006&4294967295,L=k+(F<<17&4294967295|F>>>15),F=I+(R^L&(k^R))+B[15]+1236535329&4294967295,I=L+(F<<22&4294967295|F>>>10),F=R+(L^k&(I^L))+B[1]+4129170786&4294967295,R=I+(F<<5&4294967295|F>>>27),F=k+(I^L&(R^I))+B[6]+3225465664&4294967295,k=R+(F<<9&4294967295|F>>>23),F=L+(R^I&(k^R))+B[11]+643717713&4294967295,L=k+(F<<14&4294967295|F>>>18),F=I+(k^R&(L^k))+B[0]+3921069994&4294967295,I=L+(F<<20&4294967295|F>>>12),F=R+(L^k&(I^L))+B[5]+3593408605&4294967295,R=I+(F<<5&4294967295|F>>>27),F=k+(I^L&(R^I))+B[10]+38016083&4294967295,k=R+(F<<9&4294967295|F>>>23),F=L+(R^I&(k^R))+B[15]+3634488961&4294967295,L=k+(F<<14&4294967295|F>>>18),F=I+(k^R&(L^k))+B[4]+3889429448&4294967295,I=L+(F<<20&4294967295|F>>>12),F=R+(L^k&(I^L))+B[9]+568446438&4294967295,R=I+(F<<5&4294967295|F>>>27),F=k+(I^L&(R^I))+B[14]+3275163606&4294967295,k=R+(F<<9&4294967295|F>>>23),F=L+(R^I&(k^R))+B[3]+4107603335&4294967295,L=k+(F<<14&4294967295|F>>>18),F=I+(k^R&(L^k))+B[8]+1163531501&4294967295,I=L+(F<<20&4294967295|F>>>12),F=R+(L^k&(I^L))+B[13]+2850285829&4294967295,R=I+(F<<5&4294967295|F>>>27),F=k+(I^L&(R^I))+B[2]+4243563512&4294967295,k=R+(F<<9&4294967295|F>>>23),F=L+(R^I&(k^R))+B[7]+1735328473&4294967295,L=k+(F<<14&4294967295|F>>>18),F=I+(k^R&(L^k))+B[12]+2368359562&4294967295,I=L+(F<<20&4294967295|F>>>12),F=R+(I^L^k)+B[5]+4294588738&4294967295,R=I+(F<<4&4294967295|F>>>28),F=k+(R^I^L)+B[8]+2272392833&4294967295,k=R+(F<<11&4294967295|F>>>21),F=L+(k^R^I)+B[11]+1839030562&4294967295,L=k+(F<<16&4294967295|F>>>16),F=I+(L^k^R)+B[14]+4259657740&4294967295,I=L+(F<<23&4294967295|F>>>9),F=R+(I^L^k)+B[1]+2763975236&4294967295,R=I+(F<<4&4294967295|F>>>28),F=k+(R^I^L)+B[4]+1272893353&4294967295,k=R+(F<<11&4294967295|F>>>21),F=L+(k^R^I)+B[7]+4139469664&4294967295,L=k+(F<<16&4294967295|F>>>16),F=I+(L^k^R)+B[10]+3200236656&4294967295,I=L+(F<<23&4294967295|F>>>9),F=R+(I^L^k)+B[13]+681279174&4294967295,R=I+(F<<4&4294967295|F>>>28),F=k+(R^I^L)+B[0]+3936430074&4294967295,k=R+(F<<11&4294967295|F>>>21),F=L+(k^R^I)+B[3]+3572445317&4294967295,L=k+(F<<16&4294967295|F>>>16),F=I+(L^k^R)+B[6]+76029189&4294967295,I=L+(F<<23&4294967295|F>>>9),F=R+(I^L^k)+B[9]+3654602809&4294967295,R=I+(F<<4&4294967295|F>>>28),F=k+(R^I^L)+B[12]+3873151461&4294967295,k=R+(F<<11&4294967295|F>>>21),F=L+(k^R^I)+B[15]+530742520&4294967295,L=k+(F<<16&4294967295|F>>>16),F=I+(L^k^R)+B[2]+3299628645&4294967295,I=L+(F<<23&4294967295|F>>>9),F=R+(L^(I|~k))+B[0]+4096336452&4294967295,R=I+(F<<6&4294967295|F>>>26),F=k+(I^(R|~L))+B[7]+1126891415&4294967295,k=R+(F<<10&4294967295|F>>>22),F=L+(R^(k|~I))+B[14]+2878612391&4294967295,L=k+(F<<15&4294967295|F>>>17),F=I+(k^(L|~R))+B[5]+4237533241&4294967295,I=L+(F<<21&4294967295|F>>>11),F=R+(L^(I|~k))+B[12]+1700485571&4294967295,R=I+(F<<6&4294967295|F>>>26),F=k+(I^(R|~L))+B[3]+2399980690&4294967295,k=R+(F<<10&4294967295|F>>>22),F=L+(R^(k|~I))+B[10]+4293915773&4294967295,L=k+(F<<15&4294967295|F>>>17),F=I+(k^(L|~R))+B[1]+2240044497&4294967295,I=L+(F<<21&4294967295|F>>>11),F=R+(L^(I|~k))+B[8]+1873313359&4294967295,R=I+(F<<6&4294967295|F>>>26),F=k+(I^(R|~L))+B[15]+4264355552&4294967295,k=R+(F<<10&4294967295|F>>>22),F=L+(R^(k|~I))+B[6]+2734768916&4294967295,L=k+(F<<15&4294967295|F>>>17),F=I+(k^(L|~R))+B[13]+1309151649&4294967295,I=L+(F<<21&4294967295|F>>>11),F=R+(L^(I|~k))+B[4]+4149444226&4294967295,R=I+(F<<6&4294967295|F>>>26),F=k+(I^(R|~L))+B[11]+3174756917&4294967295,k=R+(F<<10&4294967295|F>>>22),F=L+(R^(k|~I))+B[2]+718787259&4294967295,L=k+(F<<15&4294967295|F>>>17),F=I+(k^(L|~R))+B[9]+3951481745&4294967295,M.g[0]=M.g[0]+R&4294967295,M.g[1]=M.g[1]+(L+(F<<21&4294967295|F>>>11))&4294967295,M.g[2]=M.g[2]+L&4294967295,M.g[3]=M.g[3]+k&4294967295}r.prototype.u=function(M,R){R===void 0&&(R=M.length);for(var I=R-this.blockSize,B=this.B,L=this.h,k=0;k<R;){if(L==0)for(;k<=I;)i(this,M,k),k+=this.blockSize;if(typeof M=="string"){for(;k<R;)if(B[L++]=M.charCodeAt(k++),L==this.blockSize){i(this,B),L=0;break}}else for(;k<R;)if(B[L++]=M[k++],L==this.blockSize){i(this,B),L=0;break}}this.h=L,this.o+=R},r.prototype.v=function(){var M=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);M[0]=128;for(var R=1;R<M.length-8;++R)M[R]=0;var I=8*this.o;for(R=M.length-8;R<M.length;++R)M[R]=I&255,I/=256;for(this.u(M),M=Array(16),R=I=0;4>R;++R)for(var B=0;32>B;B+=8)M[I++]=this.g[R]>>>B&255;return M};function a(M,R){var I=o;return Object.prototype.hasOwnProperty.call(I,M)?I[M]:I[M]=R(M)}function s(M,R){this.h=R;for(var I=[],B=!0,L=M.length-1;0<=L;L--){var k=M[L]|0;B&&k==R||(I[L]=k,B=!1)}this.g=I}var o={};function c(M){return-128<=M&&128>M?a(M,function(R){return new s([R|0],0>R?-1:0)}):new s([M|0],0>M?-1:0)}function d(M){if(isNaN(M)||!isFinite(M))return p;if(0>M)return A(d(-M));for(var R=[],I=1,B=0;M>=I;B++)R[B]=M/I|0,I*=4294967296;return new s(R,0)}function f(M,R){if(M.length==0)throw Error("number format error: empty string");if(R=R||10,2>R||36<R)throw Error("radix out of range: "+R);if(M.charAt(0)=="-")return A(f(M.substring(1),R));if(0<=M.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=d(Math.pow(R,8)),B=p,L=0;L<M.length;L+=8){var k=Math.min(8,M.length-L),F=parseInt(M.substring(L,L+k),R);8>k?(k=d(Math.pow(R,k)),B=B.j(k).add(d(F))):(B=B.j(I),B=B.add(d(F)))}return B}var p=c(0),g=c(1),y=c(16777216);n=s.prototype,n.m=function(){if(b(this))return-A(this).m();for(var M=0,R=1,I=0;I<this.g.length;I++){var B=this.i(I);M+=(0<=B?B:4294967296+B)*R,R*=4294967296}return M},n.toString=function(M){if(M=M||10,2>M||36<M)throw Error("radix out of range: "+M);if(v(this))return"0";if(b(this))return"-"+A(this).toString(M);for(var R=d(Math.pow(M,6)),I=this,B="";;){var L=D(I,R).g;I=E(I,L.j(R));var k=((0<I.g.length?I.g[0]:I.h)>>>0).toString(M);if(I=L,v(I))return k+B;for(;6>k.length;)k="0"+k;B=k+B}},n.i=function(M){return 0>M?0:M<this.g.length?this.g[M]:this.h};function v(M){if(M.h!=0)return!1;for(var R=0;R<M.g.length;R++)if(M.g[R]!=0)return!1;return!0}function b(M){return M.h==-1}n.l=function(M){return M=E(this,M),b(M)?-1:v(M)?0:1};function A(M){for(var R=M.g.length,I=[],B=0;B<R;B++)I[B]=~M.g[B];return new s(I,~M.h).add(g)}n.abs=function(){return b(this)?A(this):this},n.add=function(M){for(var R=Math.max(this.g.length,M.g.length),I=[],B=0,L=0;L<=R;L++){var k=B+(this.i(L)&65535)+(M.i(L)&65535),F=(k>>>16)+(this.i(L)>>>16)+(M.i(L)>>>16);B=F>>>16,k&=65535,F&=65535,I[L]=F<<16|k}return new s(I,I[I.length-1]&-2147483648?-1:0)};function E(M,R){return M.add(A(R))}n.j=function(M){if(v(this)||v(M))return p;if(b(this))return b(M)?A(this).j(A(M)):A(A(this).j(M));if(b(M))return A(this.j(A(M)));if(0>this.l(y)&&0>M.l(y))return d(this.m()*M.m());for(var R=this.g.length+M.g.length,I=[],B=0;B<2*R;B++)I[B]=0;for(B=0;B<this.g.length;B++)for(var L=0;L<M.g.length;L++){var k=this.i(B)>>>16,F=this.i(B)&65535,q=M.i(L)>>>16,X=M.i(L)&65535;I[2*B+2*L]+=F*X,T(I,2*B+2*L),I[2*B+2*L+1]+=k*X,T(I,2*B+2*L+1),I[2*B+2*L+1]+=F*q,T(I,2*B+2*L+1),I[2*B+2*L+2]+=k*q,T(I,2*B+2*L+2)}for(B=0;B<R;B++)I[B]=I[2*B+1]<<16|I[2*B];for(B=R;B<2*R;B++)I[B]=0;return new s(I,0)};function T(M,R){for(;(M[R]&65535)!=M[R];)M[R+1]+=M[R]>>>16,M[R]&=65535,R++}function C(M,R){this.g=M,this.h=R}function D(M,R){if(v(R))throw Error("division by zero");if(v(M))return new C(p,p);if(b(M))return R=D(A(M),R),new C(A(R.g),A(R.h));if(b(R))return R=D(M,A(R)),new C(A(R.g),R.h);if(30<M.g.length){if(b(M)||b(R))throw Error("slowDivide_ only works with positive integers.");for(var I=g,B=R;0>=B.l(M);)I=O(I),B=O(B);var L=N(I,1),k=N(B,1);for(B=N(B,2),I=N(I,2);!v(B);){var F=k.add(B);0>=F.l(M)&&(L=L.add(I),k=F),B=N(B,1),I=N(I,1)}return R=E(M,L.j(R)),new C(L,R)}for(L=p;0<=M.l(R);){for(I=Math.max(1,Math.floor(M.m()/R.m())),B=Math.ceil(Math.log(I)/Math.LN2),B=48>=B?1:Math.pow(2,B-48),k=d(I),F=k.j(R);b(F)||0<F.l(M);)I-=B,k=d(I),F=k.j(R);v(k)&&(k=g),L=L.add(k),M=E(M,F)}return new C(L,M)}n.A=function(M){return D(this,M).h},n.and=function(M){for(var R=Math.max(this.g.length,M.g.length),I=[],B=0;B<R;B++)I[B]=this.i(B)&M.i(B);return new s(I,this.h&M.h)},n.or=function(M){for(var R=Math.max(this.g.length,M.g.length),I=[],B=0;B<R;B++)I[B]=this.i(B)|M.i(B);return new s(I,this.h|M.h)},n.xor=function(M){for(var R=Math.max(this.g.length,M.g.length),I=[],B=0;B<R;B++)I[B]=this.i(B)^M.i(B);return new s(I,this.h^M.h)};function O(M){for(var R=M.g.length+1,I=[],B=0;B<R;B++)I[B]=M.i(B)<<1|M.i(B-1)>>>31;return new s(I,M.h)}function N(M,R){var I=R>>5;R%=32;for(var B=M.g.length-I,L=[],k=0;k<B;k++)L[k]=0<R?M.i(k+I)>>>R|M.i(k+I+1)<<32-R:M.i(k+I);return new s(L,M.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,WR=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=d,s.fromString=f,Al=s}).apply(typeof JT<"u"?JT:typeof self<"u"?self:typeof window<"u"?window:{});var Sg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var YR,kh,qR,n1,R2,XR,KR,QR;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(w,P,j){return w==Array.prototype||w==Object.prototype||(w[P]=j.value),w};function t(w){w=[typeof globalThis=="object"&&globalThis,w,typeof window=="object"&&window,typeof self=="object"&&self,typeof Sg=="object"&&Sg];for(var P=0;P<w.length;++P){var j=w[P];if(j&&j.Math==Math)return j}throw Error("Cannot find global object")}var r=t(this);function i(w,P){if(P)e:{var j=r;w=w.split(".");for(var $=0;$<w.length-1;$++){var re=w[$];if(!(re in j))break e;j=j[re]}w=w[w.length-1],$=j[w],P=P($),P!=$&&P!=null&&e(j,w,{configurable:!0,writable:!0,value:P})}}function a(w,P){w instanceof String&&(w+="");var j=0,$=!1,re={next:function(){if(!$&&j<w.length){var pe=j++;return{value:P(pe,w[pe]),done:!1}}return $=!0,{done:!0,value:void 0}}};return re[Symbol.iterator]=function(){return re},re}i("Array.prototype.values",function(w){return w||function(){return a(this,function(P,j){return j})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var s=s||{},o=this||self;function c(w){var P=typeof w;return P=P!="object"?P:w?Array.isArray(w)?"array":P:"null",P=="array"||P=="object"&&typeof w.length=="number"}function d(w){var P=typeof w;return P=="object"&&w!=null||P=="function"}function f(w,P,j){return w.call.apply(w.bind,arguments)}function p(w,P,j){if(!w)throw Error();if(2<arguments.length){var $=Array.prototype.slice.call(arguments,2);return function(){var re=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(re,$),w.apply(P,re)}}return function(){return w.apply(P,arguments)}}function g(w,P,j){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:p,g.apply(null,arguments)}function y(w,P){var j=Array.prototype.slice.call(arguments,1);return function(){var $=j.slice();return $.push.apply($,arguments),w.apply(this,$)}}function v(w,P){function j(){}j.prototype=P.prototype,w.aa=P.prototype,w.prototype=new j,w.prototype.constructor=w,w.Qb=function($,re,pe){for(var ke=Array(arguments.length-2),Lt=2;Lt<arguments.length;Lt++)ke[Lt-2]=arguments[Lt];return P.prototype[re].apply($,ke)}}function b(w){const P=w.length;if(0<P){const j=Array(P);for(let $=0;$<P;$++)j[$]=w[$];return j}return[]}function A(w,P){for(let j=1;j<arguments.length;j++){const $=arguments[j];if(c($)){const re=w.length||0,pe=$.length||0;w.length=re+pe;for(let ke=0;ke<pe;ke++)w[re+ke]=$[ke]}else w.push($)}}class E{constructor(P,j){this.i=P,this.j=j,this.h=0,this.g=null}get(){let P;return 0<this.h?(this.h--,P=this.g,this.g=P.next,P.next=null):P=this.i(),P}}function T(w){return/^[\s\xa0]*$/.test(w)}function C(){var w=o.navigator;return w&&(w=w.userAgent)?w:""}function D(w){return D[" "](w),w}D[" "]=function(){};var O=C().indexOf("Gecko")!=-1&&!(C().toLowerCase().indexOf("webkit")!=-1&&C().indexOf("Edge")==-1)&&!(C().indexOf("Trident")!=-1||C().indexOf("MSIE")!=-1)&&C().indexOf("Edge")==-1;function N(w,P,j){for(const $ in w)P.call(j,w[$],$,w)}function M(w,P){for(const j in w)P.call(void 0,w[j],j,w)}function R(w){const P={};for(const j in w)P[j]=w[j];return P}const I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function B(w,P){let j,$;for(let re=1;re<arguments.length;re++){$=arguments[re];for(j in $)w[j]=$[j];for(let pe=0;pe<I.length;pe++)j=I[pe],Object.prototype.hasOwnProperty.call($,j)&&(w[j]=$[j])}}function L(w){var P=1;w=w.split(":");const j=[];for(;0<P&&w.length;)j.push(w.shift()),P--;return w.length&&j.push(w.join(":")),j}function k(w){o.setTimeout(()=>{throw w},0)}function F(){var w=Z;let P=null;return w.g&&(P=w.g,w.g=w.g.next,w.g||(w.h=null),P.next=null),P}class q{constructor(){this.h=this.g=null}add(P,j){const $=X.get();$.set(P,j),this.h?this.h.next=$:this.g=$,this.h=$}}var X=new E(()=>new G,w=>w.reset());class G{constructor(){this.next=this.g=this.h=null}set(P,j){this.h=P,this.g=j,this.next=null}reset(){this.next=this.g=this.h=null}}let Y,Q=!1,Z=new q,fe=()=>{const w=o.Promise.resolve(void 0);Y=()=>{w.then(ge)}};var ge=()=>{for(var w;w=F();){try{w.h.call(w.g)}catch(j){k(j)}var P=X;P.j(w),100>P.h&&(P.h++,w.next=P.g,P.g=w)}Q=!1};function we(){this.s=this.s,this.C=this.C}we.prototype.s=!1,we.prototype.ma=function(){this.s||(this.s=!0,this.N())},we.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Ae(w,P){this.type=w,this.g=this.target=P,this.defaultPrevented=!1}Ae.prototype.h=function(){this.defaultPrevented=!0};var Pe=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var w=!1,P=Object.defineProperty({},"passive",{get:function(){w=!0}});try{const j=()=>{};o.addEventListener("test",j,P),o.removeEventListener("test",j,P)}catch{}return w}();function Re(w,P){if(Ae.call(this,w?w.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,w){var j=this.type=w.type,$=w.changedTouches&&w.changedTouches.length?w.changedTouches[0]:null;if(this.target=w.target||w.srcElement,this.g=P,P=w.relatedTarget){if(O){e:{try{D(P.nodeName);var re=!0;break e}catch{}re=!1}re||(P=null)}}else j=="mouseover"?P=w.fromElement:j=="mouseout"&&(P=w.toElement);this.relatedTarget=P,$?(this.clientX=$.clientX!==void 0?$.clientX:$.pageX,this.clientY=$.clientY!==void 0?$.clientY:$.pageY,this.screenX=$.screenX||0,this.screenY=$.screenY||0):(this.clientX=w.clientX!==void 0?w.clientX:w.pageX,this.clientY=w.clientY!==void 0?w.clientY:w.pageY,this.screenX=w.screenX||0,this.screenY=w.screenY||0),this.button=w.button,this.key=w.key||"",this.ctrlKey=w.ctrlKey,this.altKey=w.altKey,this.shiftKey=w.shiftKey,this.metaKey=w.metaKey,this.pointerId=w.pointerId||0,this.pointerType=typeof w.pointerType=="string"?w.pointerType:He[w.pointerType]||"",this.state=w.state,this.i=w,w.defaultPrevented&&Re.aa.h.call(this)}}v(Re,Ae);var He={2:"touch",3:"pen",4:"mouse"};Re.prototype.h=function(){Re.aa.h.call(this);var w=this.i;w.preventDefault?w.preventDefault():w.returnValue=!1};var Ue="closure_listenable_"+(1e6*Math.random()|0),Qe=0;function ae(w,P,j,$,re){this.listener=w,this.proxy=null,this.src=P,this.type=j,this.capture=!!$,this.ha=re,this.key=++Qe,this.da=this.fa=!1}function me(w){w.da=!0,w.listener=null,w.proxy=null,w.src=null,w.ha=null}function he(w){this.src=w,this.g={},this.h=0}he.prototype.add=function(w,P,j,$,re){var pe=w.toString();w=this.g[pe],w||(w=this.g[pe]=[],this.h++);var ke=Le(w,P,$,re);return-1<ke?(P=w[ke],j||(P.fa=!1)):(P=new ae(P,this.src,pe,!!$,re),P.fa=j,w.push(P)),P};function te(w,P){var j=P.type;if(j in w.g){var $=w.g[j],re=Array.prototype.indexOf.call($,P,void 0),pe;(pe=0<=re)&&Array.prototype.splice.call($,re,1),pe&&(me(P),w.g[j].length==0&&(delete w.g[j],w.h--))}}function Le(w,P,j,$){for(var re=0;re<w.length;++re){var pe=w[re];if(!pe.da&&pe.listener==P&&pe.capture==!!j&&pe.ha==$)return re}return-1}var ve="closure_lm_"+(1e6*Math.random()|0),je={};function De(w,P,j,$,re){if(Array.isArray(P)){for(var pe=0;pe<P.length;pe++)De(w,P[pe],j,$,re);return null}return j=Dn(j),w&&w[Ue]?w.K(P,j,d($)?!!$.capture:!1,re):Ce(w,P,j,!1,$,re)}function Ce(w,P,j,$,re,pe){if(!P)throw Error("Invalid event type");var ke=d(re)?!!re.capture:!!re,Lt=wt(w);if(Lt||(w[ve]=Lt=new he(w)),j=Lt.add(P,j,$,ke,pe),j.proxy)return j;if($=We(),j.proxy=$,$.src=w,$.listener=j,w.addEventListener)Pe||(re=ke),re===void 0&&(re=!1),w.addEventListener(P.toString(),$,re);else if(w.attachEvent)w.attachEvent(Oe(P.toString()),$);else if(w.addListener&&w.removeListener)w.addListener($);else throw Error("addEventListener and attachEvent are unavailable.");return j}function We(){function w(j){return P.call(w.src,w.listener,j)}const P=ut;return w}function $e(w,P,j,$,re){if(Array.isArray(P))for(var pe=0;pe<P.length;pe++)$e(w,P[pe],j,$,re);else $=d($)?!!$.capture:!!$,j=Dn(j),w&&w[Ue]?(w=w.i,P=String(P).toString(),P in w.g&&(pe=w.g[P],j=Le(pe,j,$,re),-1<j&&(me(pe[j]),Array.prototype.splice.call(pe,j,1),pe.length==0&&(delete w.g[P],w.h--)))):w&&(w=wt(w))&&(P=w.g[P.toString()],w=-1,P&&(w=Le(P,j,$,re)),(j=-1<w?P[w]:null)&&Ie(j))}function Ie(w){if(typeof w!="number"&&w&&!w.da){var P=w.src;if(P&&P[Ue])te(P.i,w);else{var j=w.type,$=w.proxy;P.removeEventListener?P.removeEventListener(j,$,w.capture):P.detachEvent?P.detachEvent(Oe(j),$):P.addListener&&P.removeListener&&P.removeListener($),(j=wt(P))?(te(j,w),j.h==0&&(j.src=null,P[ve]=null)):me(w)}}}function Oe(w){return w in je?je[w]:je[w]="on"+w}function ut(w,P){if(w.da)w=!0;else{P=new Re(P,this);var j=w.listener,$=w.ha||w.src;w.fa&&Ie(w),w=j.call($,P)}return w}function wt(w){return w=w[ve],w instanceof he?w:null}var pn="__closure_events_fn_"+(1e9*Math.random()>>>0);function Dn(w){return typeof w=="function"?w:(w[pn]||(w[pn]=function(P){return w.handleEvent(P)}),w[pn])}function tt(){we.call(this),this.i=new he(this),this.M=this,this.F=null}v(tt,we),tt.prototype[Ue]=!0,tt.prototype.removeEventListener=function(w,P,j,$){$e(this,w,P,j,$)};function rt(w,P){var j,$=w.F;if($)for(j=[];$;$=$.F)j.push($);if(w=w.M,$=P.type||P,typeof P=="string")P=new Ae(P,w);else if(P instanceof Ae)P.target=P.target||w;else{var re=P;P=new Ae($,w),B(P,re)}if(re=!0,j)for(var pe=j.length-1;0<=pe;pe--){var ke=P.g=j[pe];re=bn(ke,$,!0,P)&&re}if(ke=P.g=w,re=bn(ke,$,!0,P)&&re,re=bn(ke,$,!1,P)&&re,j)for(pe=0;pe<j.length;pe++)ke=P.g=j[pe],re=bn(ke,$,!1,P)&&re}tt.prototype.N=function(){if(tt.aa.N.call(this),this.i){var w=this.i,P;for(P in w.g){for(var j=w.g[P],$=0;$<j.length;$++)me(j[$]);delete w.g[P],w.h--}}this.F=null},tt.prototype.K=function(w,P,j,$){return this.i.add(String(w),P,!1,j,$)},tt.prototype.L=function(w,P,j,$){return this.i.add(String(w),P,!0,j,$)};function bn(w,P,j,$){if(P=w.i.g[String(P)],!P)return!0;P=P.concat();for(var re=!0,pe=0;pe<P.length;++pe){var ke=P[pe];if(ke&&!ke.da&&ke.capture==j){var Lt=ke.listener,yr=ke.ha||ke.src;ke.fa&&te(w.i,ke),re=Lt.call(yr,$)!==!1&&re}}return re&&!$.defaultPrevented}function Xe(w,P,j){if(typeof w=="function")j&&(w=g(w,j));else if(w&&typeof w.handleEvent=="function")w=g(w.handleEvent,w);else throw Error("Invalid listener argument");return 2147483647<Number(P)?-1:o.setTimeout(w,P||0)}function ht(w){w.g=Xe(()=>{w.g=null,w.i&&(w.i=!1,ht(w))},w.l);const P=w.h;w.h=null,w.m.apply(null,P)}class Nt extends we{constructor(P,j){super(),this.m=P,this.l=j,this.h=null,this.i=!1,this.g=null}j(P){this.h=arguments,this.g?this.i=!0:ht(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Jt(w){we.call(this),this.h=w,this.g={}}v(Jt,we);var xn=[];function An(w){N(w.g,function(P,j){this.g.hasOwnProperty(j)&&Ie(P)},w),w.g={}}Jt.prototype.N=function(){Jt.aa.N.call(this),An(this)},Jt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Yt=o.JSON.stringify,Hr=o.JSON.parse,pt=class{stringify(w){return o.JSON.stringify(w,void 0)}parse(w){return o.JSON.parse(w,void 0)}};function kn(){}kn.prototype.h=null;function Yn(w){return w.h||(w.h=w.i())}function zr(){}var mi={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function nr(){Ae.call(this,"d")}v(nr,Ae);function Hl(){Ae.call(this,"c")}v(Hl,Ae);var Qi={},lu=null;function Ms(){return lu=lu||new tt}Qi.La="serverreachability";function gn(w){Ae.call(this,Qi.La,w)}v(gn,Ae);function rr(w){const P=Ms();rt(P,new gn(P))}Qi.STAT_EVENT="statevent";function zl(w,P){Ae.call(this,Qi.STAT_EVENT,w),this.stat=P}v(zl,Ae);function Rn(w){const P=Ms();rt(P,new zl(P,w))}Qi.Ma="timingevent";function mr(w,P){Ae.call(this,Qi.Ma,w),this.size=P}v(mr,Ae);function ir(w,P){if(typeof w!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){w()},P)}function Zi(){this.g=!0}Zi.prototype.xa=function(){this.g=!1};function mf(w,P,j,$,re,pe){w.info(function(){if(w.g)if(pe)for(var ke="",Lt=pe.split("&"),yr=0;yr<Lt.length;yr++){var Bt=Lt[yr].split("=");if(1<Bt.length){var Mr=Bt[0];Bt=Bt[1];var vr=Mr.split("_");ke=2<=vr.length&&vr[1]=="type"?ke+(Mr+"="+Bt+"&"):ke+(Mr+"=redacted&")}}else ke=null;else ke=pe;return"XMLHTTP REQ ("+$+") [attempt "+re+"]: "+P+`
`+j+`
`+ke})}function _y(w,P,j,$,re,pe,ke){w.info(function(){return"XMLHTTP RESP ("+$+") [ attempt "+re+"]: "+P+`
`+j+`
`+pe+" "+ke})}function Oo(w,P,j,$){w.info(function(){return"XMLHTTP TEXT ("+P+"): "+$l(w,j)+($?" "+$:"")})}function rp(w,P){w.info(function(){return"TIMEOUT: "+P})}Zi.prototype.info=function(){};function $l(w,P){if(!w.g)return P;if(!P)return null;try{var j=JSON.parse(P);if(j){for(w=0;w<j.length;w++)if(Array.isArray(j[w])){var $=j[w];if(!(2>$.length)){var re=$[1];if(Array.isArray(re)&&!(1>re.length)){var pe=re[0];if(pe!="noop"&&pe!="stop"&&pe!="close")for(var ke=1;ke<re.length;ke++)re[ke]=""}}}}return Yt(j)}catch{return P}}var Po={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Os={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},qa;function Xa(){}v(Xa,kn),Xa.prototype.g=function(){return new XMLHttpRequest},Xa.prototype.i=function(){return{}},qa=new Xa;function yi(w,P,j,$){this.j=w,this.i=P,this.l=j,this.R=$||1,this.U=new Jt(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new qn}function qn(){this.i=null,this.g="",this.h=!1}var yf={},cu={};function Aa(w,P,j){w.L=1,w.v=Xl(Vi(P)),w.m=j,w.P=!0,Ps(w,null)}function Ps(w,P){w.F=Date.now(),Gl(w),w.A=Vi(w.v);var j=w.A,$=w.R;Array.isArray($)||($=[String($)]),Af(j.i,"t",$),w.C=0,j=w.j.J,w.h=new qn,w.g=xp(w.j,j?P:null,!w.m),0<w.O&&(w.M=new Nt(g(w.Y,w,w.g),w.O)),P=w.U,j=w.g,$=w.ca;var re="readystatechange";Array.isArray(re)||(re&&(xn[0]=re.toString()),re=xn);for(var pe=0;pe<re.length;pe++){var ke=De(j,re[pe],$||P.handleEvent,!1,P.h||P);if(!ke)break;P.g[ke.key]=ke}P=w.H?R(w.H):{},w.m?(w.u||(w.u="POST"),P["Content-Type"]="application/x-www-form-urlencoded",w.g.ea(w.A,w.u,w.m,P)):(w.u="GET",w.g.ea(w.A,w.u,null,P)),rr(),mf(w.i,w.u,w.A,w.l,w.R,w.m)}yi.prototype.ca=function(w){w=w.target;const P=this.M;P&&na(w)==3?P.j():this.Y(w)},yi.prototype.Y=function(w){try{if(w==this.g)e:{const vr=na(this.g);var P=this.g.Ba();const Us=this.g.Z();if(!(3>vr)&&(vr!=3||this.g&&(this.h.h||this.g.oa()||dp(this.g)))){this.J||vr!=4||P==7||(P==8||0>=Us?rr(3):rr(2)),ko(this);var j=this.g.Z();this.X=j;t:if(ip(this)){var $=dp(this.g);w="";var re=$.length,pe=na(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){$r(this),Ka(this);var ke="";break t}this.h.i=new o.TextDecoder}for(P=0;P<re;P++)this.h.h=!0,w+=this.h.i.decode($[P],{stream:!(pe&&P==re-1)});$.length=0,this.h.g+=w,this.C=0,ke=this.h.g}else ke=this.g.oa();if(this.o=j==200,_y(this.i,this.u,this.A,this.l,this.R,vr,j),this.o){if(this.T&&!this.K){t:{if(this.g){var Lt,yr=this.g;if((Lt=yr.g?yr.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!T(Lt)){var Bt=Lt;break t}}Bt=null}if(j=Bt)Oo(this.i,this.l,j,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Wl(this,j);else{this.o=!1,this.s=3,Rn(12),$r(this),Ka(this);break e}}if(this.P){j=!0;let Gr;for(;!this.J&&this.C<ke.length;)if(Gr=ap(this,ke),Gr==cu){vr==4&&(this.s=4,Rn(14),j=!1),Oo(this.i,this.l,null,"[Incomplete Response]");break}else if(Gr==yf){this.s=4,Rn(15),Oo(this.i,this.l,ke,"[Invalid Chunk]"),j=!1;break}else Oo(this.i,this.l,Gr,null),Wl(this,Gr);if(ip(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),vr!=4||ke.length!=0||this.h.h||(this.s=1,Rn(16),j=!1),this.o=this.o&&j,!j)Oo(this.i,this.l,ke,"[Invalid Chunked Response]"),$r(this),Ka(this);else if(0<ke.length&&!this.W){this.W=!0;var Mr=this.j;Mr.g==this&&Mr.ba&&!Mr.M&&(Mr.j.info("Great, no buffering proxy detected. Bytes received: "+ke.length),rc(Mr),Mr.M=!0,Rn(11))}}else Oo(this.i,this.l,ke,null),Wl(this,ke);vr==4&&$r(this),this.o&&!this.J&&(vr==4?mp(this.j,this):(this.o=!1,Gl(this)))}else Ty(this.g),j==400&&0<ke.indexOf("Unknown SID")?(this.s=3,Rn(12)):(this.s=0,Rn(13)),$r(this),Ka(this)}}}catch{}finally{}};function ip(w){return w.g?w.u=="GET"&&w.L!=2&&w.j.Ca:!1}function ap(w,P){var j=w.C,$=P.indexOf(`
`,j);return $==-1?cu:(j=Number(P.substring(j,$)),isNaN(j)?yf:($+=1,$+j>P.length?cu:(P=P.slice($,$+j),w.C=$+j,P)))}yi.prototype.cancel=function(){this.J=!0,$r(this)};function Gl(w){w.S=Date.now()+w.I,sp(w,w.I)}function sp(w,P){if(w.B!=null)throw Error("WatchDog timer not null");w.B=ir(g(w.ba,w),P)}function ko(w){w.B&&(o.clearTimeout(w.B),w.B=null)}yi.prototype.ba=function(){this.B=null;const w=Date.now();0<=w-this.S?(rp(this.i,this.A),this.L!=2&&(rr(),Rn(17)),$r(this),this.s=2,Ka(this)):sp(this,this.S-w)};function Ka(w){w.j.G==0||w.J||mp(w.j,w)}function $r(w){ko(w);var P=w.M;P&&typeof P.ma=="function"&&P.ma(),w.M=null,An(w.U),w.g&&(P=w.g,w.g=null,P.abort(),P.ma())}function Wl(w,P){try{var j=w.j;if(j.G!=0&&(j.g==w||vf(j.h,w))){if(!w.K&&vf(j.h,w)&&j.G==3){try{var $=j.Da.g.parse(P)}catch{$=null}if(Array.isArray($)&&$.length==3){var re=$;if(re[0]==0){e:if(!j.u){if(j.g)if(j.g.F+3e3<w.F)_u(j),xu(j);else break e;If(j),Rn(18)}}else j.za=re[1],0<j.za-j.T&&37500>re[2]&&j.F&&j.v==0&&!j.C&&(j.C=ir(g(j.Za,j),6e3));if(1>=du(j.h)&&j.ca){try{j.ca()}catch{}j.ca=void 0}}else js(j,11)}else if((w.K||j.g==w)&&_u(j),!T(P))for(re=j.Da.g.parse(P),P=0;P<re.length;P++){let Bt=re[P];if(j.T=Bt[0],Bt=Bt[1],j.G==2)if(Bt[0]=="c"){j.K=Bt[1],j.ia=Bt[2];const Mr=Bt[3];Mr!=null&&(j.la=Mr,j.j.info("VER="+j.la));const vr=Bt[4];vr!=null&&(j.Aa=vr,j.j.info("SVER="+j.Aa));const Us=Bt[5];Us!=null&&typeof Us=="number"&&0<Us&&($=1.5*Us,j.L=$,j.j.info("backChannelRequestTimeoutMs_="+$)),$=j;const Gr=w.g;if(Gr){const rs=Gr.g?Gr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(rs){var pe=$.h;pe.g||rs.indexOf("spdy")==-1&&rs.indexOf("quic")==-1&&rs.indexOf("h2")==-1||(pe.j=pe.l,pe.g=new Set,pe.h&&(fu(pe,pe.h),pe.h=null))}if($.D){const Rf=Gr.g?Gr.g.getResponseHeader("X-HTTP-Session-Id"):null;Rf&&($.ya=Rf,cn($.I,$.D,Rf))}}j.G=3,j.l&&j.l.ua(),j.ba&&(j.R=Date.now()-w.F,j.j.info("Handshake RTT: "+j.R+"ms")),$=j;var ke=w;if($.qa=vp($,$.J?$.ia:null,$.W),ke.K){vi($.h,ke);var Lt=ke,yr=$.L;yr&&(Lt.I=yr),Lt.B&&(ko(Lt),Gl(Lt)),$.g=ke}else pp($);0<j.i.length&&wu(j)}else Bt[0]!="stop"&&Bt[0]!="close"||js(j,7);else j.G==3&&(Bt[0]=="stop"||Bt[0]=="close"?Bt[0]=="stop"?js(j,7):Tf(j):Bt[0]!="noop"&&j.l&&j.l.ta(Bt),j.v=0)}}rr(4)}catch{}}var op=class{constructor(w,P){this.g=w,this.map=P}};function ks(w){this.l=w||10,o.PerformanceNavigationTiming?(w=o.performance.getEntriesByType("navigation"),w=0<w.length&&(w[0].nextHopProtocol=="hq"||w[0].nextHopProtocol=="h2")):w=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=w?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function uu(w){return w.h?!0:w.g?w.g.size>=w.j:!1}function du(w){return w.h?1:w.g?w.g.size:0}function vf(w,P){return w.h?w.h==P:w.g?w.g.has(P):!1}function fu(w,P){w.g?w.g.add(P):w.h=P}function vi(w,P){w.h&&w.h==P?w.h=null:w.g&&w.g.has(P)&&w.g.delete(P)}ks.prototype.cancel=function(){if(this.i=xf(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const w of this.g.values())w.cancel();this.g.clear()}};function xf(w){if(w.h!=null)return w.i.concat(w.h.D);if(w.g!=null&&w.g.size!==0){let P=w.i;for(const j of w.g.values())P=P.concat(j.D);return P}return b(w.i)}function by(w){if(w.V&&typeof w.V=="function")return w.V();if(typeof Map<"u"&&w instanceof Map||typeof Set<"u"&&w instanceof Set)return Array.from(w.values());if(typeof w=="string")return w.split("");if(c(w)){for(var P=[],j=w.length,$=0;$<j;$++)P.push(w[$]);return P}P=[],j=0;for($ in w)P[j++]=w[$];return P}function hu(w){if(w.na&&typeof w.na=="function")return w.na();if(!w.V||typeof w.V!="function"){if(typeof Map<"u"&&w instanceof Map)return Array.from(w.keys());if(!(typeof Set<"u"&&w instanceof Set)){if(c(w)||typeof w=="string"){var P=[];w=w.length;for(var j=0;j<w;j++)P.push(j);return P}P=[],j=0;for(const $ in w)P[j++]=$;return P}}}function wf(w,P){if(w.forEach&&typeof w.forEach=="function")w.forEach(P,void 0);else if(c(w)||typeof w=="string")Array.prototype.forEach.call(w,P,void 0);else for(var j=hu(w),$=by(w),re=$.length,pe=0;pe<re;pe++)P.call(void 0,$[pe],j&&j[pe],w)}var Yl=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ay(w,P){if(w){w=w.split("&");for(var j=0;j<w.length;j++){var $=w[j].indexOf("="),re=null;if(0<=$){var pe=w[j].substring(0,$);re=w[j].substring($+1)}else pe=w[j];P(pe,re?decodeURIComponent(re.replace(/\+/g," ")):"")}}}function ar(w){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,w instanceof ar){this.h=w.h,ql(this,w.j),this.o=w.o,this.g=w.g,No(this,w.s),this.l=w.l;var P=w.i,j=new Ls;j.i=P.i,P.g&&(j.g=new Map(P.g),j.h=P.h),Ns(this,j),this.m=w.m}else w&&(P=String(w).match(Yl))?(this.h=!1,ql(this,P[1]||"",!0),this.o=Ji(P[2]||""),this.g=Ji(P[3]||"",!0),No(this,P[4]),this.l=Ji(P[5]||"",!0),Ns(this,P[6]||"",!0),this.m=Ji(P[7]||"")):(this.h=!1,this.i=new Ls(null,this.h))}ar.prototype.toString=function(){var w=[],P=this.j;P&&w.push(Kl(P,_f,!0),":");var j=this.g;return(j||P=="file")&&(w.push("//"),(P=this.o)&&w.push(Kl(P,_f,!0),"@"),w.push(encodeURIComponent(String(j)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),j=this.s,j!=null&&w.push(":",String(j))),(j=this.l)&&(this.g&&j.charAt(0)!="/"&&w.push("/"),w.push(Kl(j,j.charAt(0)=="/"?Ey:bf,!0))),(j=this.i.toString())&&w.push("?",j),(j=this.m)&&w.push("#",Kl(j,pu)),w.join("")};function Vi(w){return new ar(w)}function ql(w,P,j){w.j=j?Ji(P,!0):P,w.j&&(w.j=w.j.replace(/:$/,""))}function No(w,P){if(P){if(P=Number(P),isNaN(P)||0>P)throw Error("Bad port number "+P);w.s=P}else w.s=null}function Ns(w,P,j){P instanceof Ls?(w.i=P,cp(w.i,w.h)):(j||(P=Kl(P,Sy)),w.i=new Ls(P,w.h))}function cn(w,P,j){w.i.set(P,j)}function Xl(w){return cn(w,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),w}function Ji(w,P){return w?P?decodeURI(w.replace(/%25/g,"%2525")):decodeURIComponent(w):""}function Kl(w,P,j){return typeof w=="string"?(w=encodeURI(w).replace(P,lp),j&&(w=w.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),w):null}function lp(w){return w=w.charCodeAt(0),"%"+(w>>4&15).toString(16)+(w&15).toString(16)}var _f=/[#\/\?@]/g,bf=/[#\?:]/g,Ey=/[#\?]/g,Sy=/[#\?@]/g,pu=/#/g;function Ls(w,P){this.h=this.g=null,this.i=w||null,this.j=!!P}function ea(w){w.g||(w.g=new Map,w.h=0,w.i&&Ay(w.i,function(P,j){w.add(decodeURIComponent(P.replace(/\+/g," ")),j)}))}n=Ls.prototype,n.add=function(w,P){ea(this),this.i=null,w=Qa(this,w);var j=this.g.get(w);return j||this.g.set(w,j=[]),j.push(P),this.h+=1,this};function Bs(w,P){ea(w),P=Qa(w,P),w.g.has(P)&&(w.i=null,w.h-=w.g.get(P).length,w.g.delete(P))}function Vs(w,P){return ea(w),P=Qa(w,P),w.g.has(P)}n.forEach=function(w,P){ea(this),this.g.forEach(function(j,$){j.forEach(function(re){w.call(P,re,$,this)},this)},this)},n.na=function(){ea(this);const w=Array.from(this.g.values()),P=Array.from(this.g.keys()),j=[];for(let $=0;$<P.length;$++){const re=w[$];for(let pe=0;pe<re.length;pe++)j.push(P[$])}return j},n.V=function(w){ea(this);let P=[];if(typeof w=="string")Vs(this,w)&&(P=P.concat(this.g.get(Qa(this,w))));else{w=Array.from(this.g.values());for(let j=0;j<w.length;j++)P=P.concat(w[j])}return P},n.set=function(w,P){return ea(this),this.i=null,w=Qa(this,w),Vs(this,w)&&(this.h-=this.g.get(w).length),this.g.set(w,[P]),this.h+=1,this},n.get=function(w,P){return w?(w=this.V(w),0<w.length?String(w[0]):P):P};function Af(w,P,j){Bs(w,P),0<j.length&&(w.i=null,w.g.set(Qa(w,P),b(j)),w.h+=j.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const w=[],P=Array.from(this.g.keys());for(var j=0;j<P.length;j++){var $=P[j];const pe=encodeURIComponent(String($)),ke=this.V($);for($=0;$<ke.length;$++){var re=pe;ke[$]!==""&&(re+="="+encodeURIComponent(String(ke[$]))),w.push(re)}}return this.i=w.join("&")};function Qa(w,P){return P=String(P),w.j&&(P=P.toLowerCase()),P}function cp(w,P){P&&!w.j&&(ea(w),w.i=null,w.g.forEach(function(j,$){var re=$.toLowerCase();$!=re&&(Bs(this,$),Af(this,re,j))},w)),w.j=P}function Ql(w,P){const j=new Zi;if(o.Image){const $=new Image;$.onload=y(ta,j,"TestLoadImage: loaded",!0,P,$),$.onerror=y(ta,j,"TestLoadImage: error",!1,P,$),$.onabort=y(ta,j,"TestLoadImage: abort",!1,P,$),$.ontimeout=y(ta,j,"TestLoadImage: timeout",!1,P,$),o.setTimeout(function(){$.ontimeout&&$.ontimeout()},1e4),$.src=w}else P(!1)}function Ea(w,P){const j=new Zi,$=new AbortController,re=setTimeout(()=>{$.abort(),ta(j,"TestPingServer: timeout",!1,P)},1e4);fetch(w,{signal:$.signal}).then(pe=>{clearTimeout(re),pe.ok?ta(j,"TestPingServer: ok",!0,P):ta(j,"TestPingServer: server error",!1,P)}).catch(()=>{clearTimeout(re),ta(j,"TestPingServer: error",!1,P)})}function ta(w,P,j,$,re){try{re&&(re.onload=null,re.onerror=null,re.onabort=null,re.ontimeout=null),$(j)}catch{}}function Zl(){this.g=new pt}function Za(w,P,j){const $=j||"";try{wf(w,function(re,pe){let ke=re;d(re)&&(ke=Yt(re)),P.push($+pe+"="+encodeURIComponent(ke))})}catch(re){throw P.push($+"type="+encodeURIComponent("_badmap")),re}}function Lo(w){this.l=w.Ub||null,this.j=w.eb||!1}v(Lo,kn),Lo.prototype.g=function(){return new Fs(this.l,this.j)},Lo.prototype.i=function(w){return function(){return w}}({});function Fs(w,P){tt.call(this),this.D=w,this.o=P,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}v(Fs,tt),n=Fs.prototype,n.open=function(w,P){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=w,this.A=P,this.readyState=1,es(this)},n.send=function(w){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const P={headers:this.u,method:this.B,credentials:this.m,cache:void 0};w&&(P.body=w),(this.D||o).fetch(new Request(this.A,P)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ja(this)),this.readyState=0},n.Sa=function(w){if(this.g&&(this.l=w,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=w.headers,this.readyState=2,es(this)),this.g&&(this.readyState=3,es(this),this.g)))if(this.responseType==="arraybuffer")w.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in w){if(this.j=w.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Ef(this)}else w.text().then(this.Ra.bind(this),this.ga.bind(this))};function Ef(w){w.j.read().then(w.Pa.bind(w)).catch(w.ga.bind(w))}n.Pa=function(w){if(this.g){if(this.o&&w.value)this.response.push(w.value);else if(!this.o){var P=w.value?w.value:new Uint8Array(0);(P=this.v.decode(P,{stream:!w.done}))&&(this.response=this.responseText+=P)}w.done?Ja(this):es(this),this.readyState==3&&Ef(this)}},n.Ra=function(w){this.g&&(this.response=this.responseText=w,Ja(this))},n.Qa=function(w){this.g&&(this.response=w,Ja(this))},n.ga=function(){this.g&&Ja(this)};function Ja(w){w.readyState=4,w.l=null,w.j=null,w.v=null,es(w)}n.setRequestHeader=function(w,P){this.u.append(w,P)},n.getResponseHeader=function(w){return this.h&&this.h.get(w.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const w=[],P=this.h.entries();for(var j=P.next();!j.done;)j=j.value,w.push(j[0]+": "+j[1]),j=P.next();return w.join(`\r
`)};function es(w){w.onreadystatechange&&w.onreadystatechange.call(w)}Object.defineProperty(Fs.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(w){this.m=w?"include":"same-origin"}});function Sf(w){let P="";return N(w,function(j,$){P+=$,P+=":",P+=j,P+=`\r
`}),P}function Rr(w,P,j){e:{for($ in j){var $=!1;break e}$=!0}$||(j=Sf(j),typeof w=="string"?j!=null&&encodeURIComponent(String(j)):cn(w,P,j))}function en(w){tt.call(this),this.headers=new Map,this.o=w||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}v(en,tt);var gu=/^https?$/i,Jl=["POST","PUT"];n=en.prototype,n.Ha=function(w){this.J=w},n.ea=function(w,P,j,$){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+w);P=P?P.toUpperCase():"GET",this.D=w,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():qa.g(),this.v=this.o?Yn(this.o):Yn(qa),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(P,String(w),!0),this.B=!1}catch(pe){up(this,pe);return}if(w=j||"",j=new Map(this.headers),$)if(Object.getPrototypeOf($)===Object.prototype)for(var re in $)j.set(re,$[re]);else if(typeof $.keys=="function"&&typeof $.get=="function")for(const pe of $.keys())j.set(pe,$.get(pe));else throw Error("Unknown input type for opt_headers: "+String($));$=Array.from(j.keys()).find(pe=>pe.toLowerCase()=="content-type"),re=o.FormData&&w instanceof o.FormData,!(0<=Array.prototype.indexOf.call(Jl,P,void 0))||$||re||j.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[pe,ke]of j)this.g.setRequestHeader(pe,ke);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{ec(this),this.u=!0,this.g.send(w),this.u=!1}catch(pe){up(this,pe)}};function up(w,P){w.h=!1,w.g&&(w.j=!0,w.g.abort(),w.j=!1),w.l=P,w.m=5,mu(w),ts(w)}function mu(w){w.A||(w.A=!0,rt(w,"complete"),rt(w,"error"))}n.abort=function(w){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=w||7,rt(this,"complete"),rt(this,"abort"),ts(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ts(this,!0)),en.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?yu(this):this.bb())},n.bb=function(){yu(this)};function yu(w){if(w.h&&typeof s<"u"&&(!w.v[1]||na(w)!=4||w.Z()!=2)){if(w.u&&na(w)==4)Xe(w.Ea,0,w);else if(rt(w,"readystatechange"),na(w)==4){w.h=!1;try{const ke=w.Z();e:switch(ke){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var P=!0;break e;default:P=!1}var j;if(!(j=P)){var $;if($=ke===0){var re=String(w.D).match(Yl)[1]||null;!re&&o.self&&o.self.location&&(re=o.self.location.protocol.slice(0,-1)),$=!gu.test(re?re.toLowerCase():"")}j=$}if(j)rt(w,"complete"),rt(w,"success");else{w.m=6;try{var pe=2<na(w)?w.g.statusText:""}catch{pe=""}w.l=pe+" ["+w.Z()+"]",mu(w)}}finally{ts(w)}}}}function ts(w,P){if(w.g){ec(w);const j=w.g,$=w.v[0]?()=>{}:null;w.g=null,w.v=null,P||rt(w,"ready");try{j.onreadystatechange=$}catch{}}}function ec(w){w.I&&(o.clearTimeout(w.I),w.I=null)}n.isActive=function(){return!!this.g};function na(w){return w.g?w.g.readyState:0}n.Z=function(){try{return 2<na(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(w){if(this.g){var P=this.g.responseText;return w&&P.indexOf(w)==0&&(P=P.substring(w.length)),Hr(P)}};function dp(w){try{if(!w.g)return null;if("response"in w.g)return w.g.response;switch(w.H){case"":case"text":return w.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in w.g)return w.g.mozResponseArrayBuffer}return null}catch{return null}}function Ty(w){const P={};w=(w.g&&2<=na(w)&&w.g.getAllResponseHeaders()||"").split(`\r
`);for(let $=0;$<w.length;$++){if(T(w[$]))continue;var j=L(w[$]);const re=j[0];if(j=j[1],typeof j!="string")continue;j=j.trim();const pe=P[re]||[];P[re]=pe,pe.push(j)}M(P,function($){return $.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function tc(w,P,j){return j&&j.internalChannelParams&&j.internalChannelParams[w]||P}function vu(w){this.Aa=0,this.i=[],this.j=new Zi,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=tc("failFast",!1,w),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=tc("baseRetryDelayMs",5e3,w),this.cb=tc("retryDelaySeedMs",1e4,w),this.Wa=tc("forwardChannelMaxRetries",2,w),this.wa=tc("forwardChannelRequestTimeoutMs",2e4,w),this.pa=w&&w.xmlHttpFactory||void 0,this.Xa=w&&w.Tb||void 0,this.Ca=w&&w.useFetchStreams||!1,this.L=void 0,this.J=w&&w.supportsCrossDomainXhr||!1,this.K="",this.h=new ks(w&&w.concurrentRequestLimit),this.Da=new Zl,this.P=w&&w.fastHandshake||!1,this.O=w&&w.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=w&&w.Rb||!1,w&&w.xa&&this.j.xa(),w&&w.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&w&&w.detectBufferingProxy||!1,this.ja=void 0,w&&w.longPollingTimeout&&0<w.longPollingTimeout&&(this.ja=w.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=vu.prototype,n.la=8,n.G=1,n.connect=function(w,P,j,$){Rn(0),this.W=w,this.H=P||{},j&&$!==void 0&&(this.H.OSID=j,this.H.OAID=$),this.F=this.X,this.I=vp(this,null,this.W),wu(this)};function Tf(w){if(fp(w),w.G==3){var P=w.U++,j=Vi(w.I);if(cn(j,"SID",w.K),cn(j,"RID",P),cn(j,"TYPE","terminate"),nc(w,j),P=new yi(w,w.j,P),P.L=2,P.v=Xl(Vi(j)),j=!1,o.navigator&&o.navigator.sendBeacon)try{j=o.navigator.sendBeacon(P.v.toString(),"")}catch{}!j&&o.Image&&(new Image().src=P.v,j=!0),j||(P.g=xp(P.j,null),P.g.ea(P.v)),P.F=Date.now(),Gl(P)}yp(w)}function xu(w){w.g&&(rc(w),w.g.cancel(),w.g=null)}function fp(w){xu(w),w.u&&(o.clearTimeout(w.u),w.u=null),_u(w),w.h.cancel(),w.s&&(typeof w.s=="number"&&o.clearTimeout(w.s),w.s=null)}function wu(w){if(!uu(w.h)&&!w.s){w.s=!0;var P=w.Ga;Y||fe(),Q||(Y(),Q=!0),Z.add(P,w),w.B=0}}function Cy(w,P){return du(w.h)>=w.h.j-(w.s?1:0)?!1:w.s?(w.i=P.D.concat(w.i),!0):w.G==1||w.G==2||w.B>=(w.Va?0:w.Wa)?!1:(w.s=ir(g(w.Ga,w,P),Df(w,w.B)),w.B++,!0)}n.Ga=function(w){if(this.s)if(this.s=null,this.G==1){if(!w){this.U=Math.floor(1e5*Math.random()),w=this.U++;const re=new yi(this,this.j,w);let pe=this.o;if(this.S&&(pe?(pe=R(pe),B(pe,this.S)):pe=this.S),this.m!==null||this.O||(re.H=pe,pe=null),this.P)e:{for(var P=0,j=0;j<this.i.length;j++){t:{var $=this.i[j];if("__data__"in $.map&&($=$.map.__data__,typeof $=="string")){$=$.length;break t}$=void 0}if($===void 0)break;if(P+=$,4096<P){P=j;break e}if(P===4096||j===this.i.length-1){P=j+1;break e}}P=1e3}else P=1e3;P=hp(this,re,P),j=Vi(this.I),cn(j,"RID",w),cn(j,"CVER",22),this.D&&cn(j,"X-HTTP-Session-Id",this.D),nc(this,j),pe&&(this.O?P="headers="+encodeURIComponent(String(Sf(pe)))+"&"+P:this.m&&Rr(j,this.m,pe)),fu(this.h,re),this.Ua&&cn(j,"TYPE","init"),this.P?(cn(j,"$req",P),cn(j,"SID","null"),re.T=!0,Aa(re,j,null)):Aa(re,j,P),this.G=2}}else this.G==3&&(w?Cf(this,w):this.i.length==0||uu(this.h)||Cf(this))};function Cf(w,P){var j;P?j=P.l:j=w.U++;const $=Vi(w.I);cn($,"SID",w.K),cn($,"RID",j),cn($,"AID",w.T),nc(w,$),w.m&&w.o&&Rr($,w.m,w.o),j=new yi(w,w.j,j,w.B+1),w.m===null&&(j.H=w.o),P&&(w.i=P.D.concat(w.i)),P=hp(w,j,1e3),j.I=Math.round(.5*w.wa)+Math.round(.5*w.wa*Math.random()),fu(w.h,j),Aa(j,$,P)}function nc(w,P){w.H&&N(w.H,function(j,$){cn(P,$,j)}),w.l&&wf({},function(j,$){cn(P,$,j)})}function hp(w,P,j){j=Math.min(w.i.length,j);var $=w.l?g(w.l.Na,w.l,w):null;e:{var re=w.i;let pe=-1;for(;;){const ke=["count="+j];pe==-1?0<j?(pe=re[0].g,ke.push("ofs="+pe)):pe=0:ke.push("ofs="+pe);let Lt=!0;for(let yr=0;yr<j;yr++){let Bt=re[yr].g;const Mr=re[yr].map;if(Bt-=pe,0>Bt)pe=Math.max(0,re[yr].g-100),Lt=!1;else try{Za(Mr,ke,"req"+Bt+"_")}catch{$&&$(Mr)}}if(Lt){$=ke.join("&");break e}}}return w=w.i.splice(0,j),P.D=w,$}function pp(w){if(!w.g&&!w.u){w.Y=1;var P=w.Fa;Y||fe(),Q||(Y(),Q=!0),Z.add(P,w),w.v=0}}function If(w){return w.g||w.u||3<=w.v?!1:(w.Y++,w.u=ir(g(w.Fa,w),Df(w,w.v)),w.v++,!0)}n.Fa=function(){if(this.u=null,gp(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var w=2*this.R;this.j.info("BP detection timer enabled: "+w),this.A=ir(g(this.ab,this),w)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Rn(10),xu(this),gp(this))};function rc(w){w.A!=null&&(o.clearTimeout(w.A),w.A=null)}function gp(w){w.g=new yi(w,w.j,"rpc",w.Y),w.m===null&&(w.g.H=w.o),w.g.O=0;var P=Vi(w.qa);cn(P,"RID","rpc"),cn(P,"SID",w.K),cn(P,"AID",w.T),cn(P,"CI",w.F?"0":"1"),!w.F&&w.ja&&cn(P,"TO",w.ja),cn(P,"TYPE","xmlhttp"),nc(w,P),w.m&&w.o&&Rr(P,w.m,w.o),w.L&&(w.g.I=w.L);var j=w.g;w=w.ia,j.L=1,j.v=Xl(Vi(P)),j.m=null,j.P=!0,Ps(j,w)}n.Za=function(){this.C!=null&&(this.C=null,xu(this),If(this),Rn(19))};function _u(w){w.C!=null&&(o.clearTimeout(w.C),w.C=null)}function mp(w,P){var j=null;if(w.g==P){_u(w),rc(w),w.g=null;var $=2}else if(vf(w.h,P))j=P.D,vi(w.h,P),$=1;else return;if(w.G!=0){if(P.o)if($==1){j=P.m?P.m.length:0,P=Date.now()-P.F;var re=w.B;$=Ms(),rt($,new mr($,j)),wu(w)}else pp(w);else if(re=P.s,re==3||re==0&&0<P.X||!($==1&&Cy(w,P)||$==2&&If(w)))switch(j&&0<j.length&&(P=w.h,P.i=P.i.concat(j)),re){case 1:js(w,5);break;case 4:js(w,10);break;case 3:js(w,6);break;default:js(w,2)}}}function Df(w,P){let j=w.Ta+Math.floor(Math.random()*w.cb);return w.isActive()||(j*=2),j*P}function js(w,P){if(w.j.info("Error code "+P),P==2){var j=g(w.fb,w),$=w.Xa;const re=!$;$=new ar($||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||ql($,"https"),Xl($),re?Ql($.toString(),j):Ea($.toString(),j)}else Rn(2);w.G=0,w.l&&w.l.sa(P),yp(w),fp(w)}n.fb=function(w){w?(this.j.info("Successfully pinged google.com"),Rn(2)):(this.j.info("Failed to ping google.com"),Rn(1))};function yp(w){if(w.G=0,w.ka=[],w.l){const P=xf(w.h);(P.length!=0||w.i.length!=0)&&(A(w.ka,P),A(w.ka,w.i),w.h.i.length=0,b(w.i),w.i.length=0),w.l.ra()}}function vp(w,P,j){var $=j instanceof ar?Vi(j):new ar(j);if($.g!="")P&&($.g=P+"."+$.g),No($,$.s);else{var re=o.location;$=re.protocol,P=P?P+"."+re.hostname:re.hostname,re=+re.port;var pe=new ar(null);$&&ql(pe,$),P&&(pe.g=P),re&&No(pe,re),j&&(pe.l=j),$=pe}return j=w.D,P=w.ya,j&&P&&cn($,j,P),cn($,"VER",w.la),nc(w,$),$}function xp(w,P,j){if(P&&!w.J)throw Error("Can't create secondary domain capable XhrIo object.");return P=w.Ca&&!w.pa?new en(new Lo({eb:j})):new en(w.pa),P.Ha(w.J),P}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function wp(){}n=wp.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function bu(){}bu.prototype.g=function(w,P){return new xi(w,P)};function xi(w,P){tt.call(this),this.g=new vu(P),this.l=w,this.h=P&&P.messageUrlParams||null,w=P&&P.messageHeaders||null,P&&P.clientProtocolHeaderRequired&&(w?w["X-Client-Protocol"]="webchannel":w={"X-Client-Protocol":"webchannel"}),this.g.o=w,w=P&&P.initMessageHeaders||null,P&&P.messageContentType&&(w?w["X-WebChannel-Content-Type"]=P.messageContentType:w={"X-WebChannel-Content-Type":P.messageContentType}),P&&P.va&&(w?w["X-WebChannel-Client-Profile"]=P.va:w={"X-WebChannel-Client-Profile":P.va}),this.g.S=w,(w=P&&P.Sb)&&!T(w)&&(this.g.m=w),this.v=P&&P.supportsCrossDomainXhr||!1,this.u=P&&P.sendRawJson||!1,(P=P&&P.httpSessionIdParam)&&!T(P)&&(this.g.D=P,w=this.h,w!==null&&P in w&&(w=this.h,P in w&&delete w[P])),this.j=new ns(this)}v(xi,tt),xi.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},xi.prototype.close=function(){Tf(this.g)},xi.prototype.o=function(w){var P=this.g;if(typeof w=="string"){var j={};j.__data__=w,w=j}else this.u&&(j={},j.__data__=Yt(w),w=j);P.i.push(new op(P.Ya++,w)),P.G==3&&wu(P)},xi.prototype.N=function(){this.g.l=null,delete this.j,Tf(this.g),delete this.g,xi.aa.N.call(this)};function _p(w){nr.call(this),w.__headers__&&(this.headers=w.__headers__,this.statusCode=w.__status__,delete w.__headers__,delete w.__status__);var P=w.__sm__;if(P){e:{for(const j in P){w=j;break e}w=void 0}(this.i=w)&&(w=this.i,P=P!==null&&w in P?P[w]:void 0),this.data=P}else this.data=w}v(_p,nr);function bp(){Hl.call(this),this.status=1}v(bp,Hl);function ns(w){this.g=w}v(ns,wp),ns.prototype.ua=function(){rt(this.g,"a")},ns.prototype.ta=function(w){rt(this.g,new _p(w))},ns.prototype.sa=function(w){rt(this.g,new bp)},ns.prototype.ra=function(){rt(this.g,"b")},bu.prototype.createWebChannel=bu.prototype.g,xi.prototype.send=xi.prototype.o,xi.prototype.open=xi.prototype.m,xi.prototype.close=xi.prototype.close,QR=function(){return new bu},KR=function(){return Ms()},XR=Qi,R2={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Po.NO_ERROR=0,Po.TIMEOUT=8,Po.HTTP_ERROR=6,n1=Po,Os.COMPLETE="complete",qR=Os,zr.EventType=mi,mi.OPEN="a",mi.CLOSE="b",mi.ERROR="c",mi.MESSAGE="d",tt.prototype.listen=tt.prototype.K,kh=zr,en.prototype.listenOnce=en.prototype.L,en.prototype.getLastError=en.prototype.Ka,en.prototype.getLastErrorCode=en.prototype.Ba,en.prototype.getStatus=en.prototype.Z,en.prototype.getResponseJson=en.prototype.Oa,en.prototype.getResponseText=en.prototype.oa,en.prototype.send=en.prototype.ea,en.prototype.setWithCredentials=en.prototype.Ha,YR=en}).apply(typeof Sg<"u"?Sg:typeof self<"u"?self:typeof window<"u"?window:{});const eC="@firebase/firestore",tC="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class li{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}li.UNAUTHENTICATED=new li(null),li.GOOGLE_CREDENTIALS=new li("google-credentials-uid"),li.FIRST_PARTY=new li("first-party-uid"),li.MOCK_USER=new li("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let af="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wc=new Bw("@firebase/firestore");function ld(){return Wc.logLevel}function ze(n,...e){if(Wc.logLevel<=Mt.DEBUG){const t=e.map(Xw);Wc.debug(`Firestore (${af}): ${n}`,...t)}}function yo(n,...e){if(Wc.logLevel<=Mt.ERROR){const t=e.map(Xw);Wc.error(`Firestore (${af}): ${n}`,...t)}}function Cl(n,...e){if(Wc.logLevel<=Mt.WARN){const t=e.map(Xw);Wc.warn(`Firestore (${af}): ${n}`,...t)}}function Xw(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lt(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,ZR(n,r,t)}function ZR(n,e,t){let r=`FIRESTORE (${af}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw yo(r),new Error(r)}function nn(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||ZR(e,i,r)}function gt(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const be={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Fe extends Co{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fo{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JR{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class $L{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(li.UNAUTHENTICATED))}shutdown(){}}class GL{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class WL{constructor(e){this.t=e,this.currentUser=li.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){nn(this.o===void 0,42304);let r=this.i;const i=c=>this.i!==r?(r=this.i,t(c)):Promise.resolve();let a=new fo;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new fo,e.enqueueRetryable(()=>i(this.currentUser))};const s=()=>{const c=a;e.enqueueRetryable(async()=>{await c.promise,await i(this.currentUser)})},o=c=>{ze("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(c=>o(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?o(c):(ze("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new fo)}},0),s()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(ze("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(nn(typeof r.accessToken=="string",31837,{l:r}),new JR(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return nn(e===null||typeof e=="string",2055,{h:e}),new li(e)}}class YL{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=li.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class qL{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new YL(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(li.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class nC{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class XL{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,fa(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){nn(this.o===void 0,3512);const r=a=>{a.error!=null&&ze("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const s=a.token!==this.m;return this.m=a.token,ze("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const i=a=>{ze("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(a=>i(a)),setTimeout(()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?i(a):ze("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new nC(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(nn(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new nC(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KL(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eM(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kw{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=KL(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<t&&(r+=e.charAt(i[a]%62))}return r}}function At(n,e){return n<e?-1:n>e?1:0}function M2(n,e){let t=0;for(;t<n.length&&t<e.length;){const r=n.codePointAt(t),i=e.codePointAt(t);if(r!==i){if(r<128&&i<128)return At(r,i);{const a=eM(),s=QL(a.encode(rC(n,t)),a.encode(rC(e,t)));return s!==0?s:At(r,i)}}t+=r>65535?2:1}return At(n.length,e.length)}function rC(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function QL(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return At(n[t],e[t]);return At(n.length,e.length)}function Bd(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iC="__name__";class us{constructor(e,t,r){t===void 0?t=0:t>e.length&&lt(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&lt(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return us.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof us?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const a=us.compareSegments(e.get(i),t.get(i));if(a!==0)return a}return At(e.length,t.length)}static compareSegments(e,t){const r=us.isNumericId(e),i=us.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?us.extractNumericId(e).compare(us.extractNumericId(t)):M2(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Al.fromString(e.substring(4,e.length-2))}}class yn extends us{construct(e,t,r){return new yn(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Fe(be.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new yn(t)}static emptyPath(){return new yn([])}}const ZL=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Zr extends us{construct(e,t,r){return new Zr(e,t,r)}static isValidIdentifier(e){return ZL.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Zr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===iC}static keyField(){return new Zr([iC])}static fromServerFormat(e){const t=[];let r="",i=0;const a=()=>{if(r.length===0)throw new Fe(be.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let s=!1;for(;i<e.length;){const o=e[i];if(o==="\\"){if(i+1===e.length)throw new Fe(be.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new Fe(be.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else o==="`"?(s=!s,i++):o!=="."||s?(r+=o,i++):(a(),i++)}if(a(),s)throw new Fe(be.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Zr(t)}static emptyPath(){return new Zr([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ze{constructor(e){this.path=e}static fromPath(e){return new Ze(yn.fromString(e))}static fromName(e){return new Ze(yn.fromString(e).popFirst(5))}static empty(){return new Ze(yn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&yn.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return yn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ze(new yn(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qw(n,e,t){if(!t)throw new Fe(be.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function JL(n,e,t,r){if(e===!0&&r===!0)throw new Fe(be.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function aC(n){if(!Ze.isDocumentKey(n))throw new Fe(be.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function sC(n){if(Ze.isDocumentKey(n))throw new Fe(be.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function tM(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Em(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":lt(12329,{type:typeof n})}function fi(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Fe(be.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Em(n);throw new Fe(be.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function eB(n,e){if(e<=0)throw new Fe(be.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hr(n,e){const t={typeString:n};return e&&(t.value=e),t}function O0(n,e){if(!tM(n))throw new Fe(be.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const i=e[r].typeString,a="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}const s=n[r];if(i&&typeof s!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(a!==void 0&&s!==a.value){t=`Expected '${r}' field to equal '${a.value}'`;break}}if(t)throw new Fe(be.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oC=-62135596800,lC=1e6;class Cn{static now(){return Cn.fromMillis(Date.now())}static fromDate(e){return Cn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*lC);return new Cn(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Fe(be.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Fe(be.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<oC)throw new Fe(be.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Fe(be.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/lC}_compareTo(e){return this.seconds===e.seconds?At(this.nanoseconds,e.nanoseconds):At(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Cn._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(O0(e,Cn._jsonSchema))return new Cn(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-oC;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Cn._jsonSchemaVersion="firestore/timestamp/1.0",Cn._jsonSchema={type:hr("string",Cn._jsonSchemaVersion),seconds:hr("number"),nanoseconds:hr("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ft{static fromTimestamp(e){return new ft(e)}static min(){return new ft(new Cn(0,0))}static max(){return new ft(new Cn(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a0=-1;function tB(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=ft.fromTimestamp(r===1e9?new Cn(t+1,0):new Cn(t,r));return new Il(i,Ze.empty(),e)}function nB(n){return new Il(n.readTime,n.key,a0)}class Il{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Il(ft.min(),Ze.empty(),a0)}static max(){return new Il(ft.max(),Ze.empty(),a0)}}function rB(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Ze.comparator(n.documentKey,e.documentKey),t!==0?t:At(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iB="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class aB{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sf(n){if(n.code!==be.FAILED_PRECONDITION||n.message!==iB)throw n;ze("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Te{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&lt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Te((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(t,a).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Te?t:Te.resolve(t)}catch(t){return Te.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Te.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Te.reject(t)}static resolve(e){return new Te((t,r)=>{t(e)})}static reject(e){return new Te((t,r)=>{r(e)})}static waitFor(e){return new Te((t,r)=>{let i=0,a=0,s=!1;e.forEach(o=>{++i,o.next(()=>{++a,s&&a===i&&t()},c=>r(c))}),s=!0,a===i&&t()})}static or(e){let t=Te.resolve(!1);for(const r of e)t=t.next(i=>i?Te.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,a)=>{r.push(t.call(this,i,a))}),this.waitFor(r)}static mapArray(e,t){return new Te((r,i)=>{const a=e.length,s=new Array(a);let o=0;for(let c=0;c<a;c++){const d=c;t(e[d]).next(f=>{s[d]=f,++o,o===a&&r(s)},f=>i(f))}})}static doWhile(e,t){return new Te((r,i)=>{const a=()=>{e()===!0?t().next(()=>{a()},i):r()};a()})}}function sB(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function of(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sm{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this._e(r),this.ae=r=>t.writeSequenceNumber(r))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}Sm.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zw=-1;function Tm(n){return n==null}function b1(n){return n===0&&1/n==-1/0}function oB(n){return typeof n=="number"&&Number.isInteger(n)&&!b1(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nM="";function lB(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=cC(e)),e=cB(n.get(t),e);return cC(e)}function cB(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const a=n.charAt(i);switch(a){case"\0":t+="";break;case nM:t+="";break;default:t+=a}}return t}function cC(n){return n+nM+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uC(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Bl(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function rM(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bn{constructor(e,t){this.comparator=e,this.root=t||Qr.EMPTY}insert(e,t){return new Bn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Qr.BLACK,null,null))}remove(e){return new Bn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Qr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Tg(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Tg(this.root,e,this.comparator,!1)}getReverseIterator(){return new Tg(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Tg(this.root,e,this.comparator,!0)}}class Tg{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,t&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Qr{constructor(e,t,r,i,a){this.key=e,this.value=t,this.color=r??Qr.RED,this.left=i??Qr.EMPTY,this.right=a??Qr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,a){return new Qr(e??this.key,t??this.value,r??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,t,r),null):a===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Qr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return Qr.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Qr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Qr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw lt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw lt(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw lt(27949);return e+(this.isRed()?0:1)}}Qr.EMPTY=null,Qr.RED=!0,Qr.BLACK=!1;Qr.EMPTY=new class{constructor(){this.size=0}get key(){throw lt(57766)}get value(){throw lt(16141)}get color(){throw lt(16727)}get left(){throw lt(29726)}get right(){throw lt(36894)}copy(e,t,r,i,a){return this}insert(e,t,r){return new Qr(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ir{constructor(e){this.comparator=e,this.data=new Bn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new dC(this.data.getIterator())}getIteratorFrom(e){return new dC(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Ir)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(this.comparator(i,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Ir(this.comparator);return t.data=e,t}}class dC{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wi{constructor(e){this.fields=e,e.sort(Zr.comparator)}static empty(){return new Wi([])}unionWith(e){let t=new Ir(Zr.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Wi(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Bd(this.fields,e.fields,(t,r)=>t.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iM extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ni{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(i){try{return atob(i)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new iM("Invalid base64 string: "+a):a}}(e);return new ni(t)}static fromUint8Array(e){const t=function(i){let a="";for(let s=0;s<i.length;++s)a+=String.fromCharCode(i[s]);return a}(e);return new ni(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return At(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ni.EMPTY_BYTE_STRING=new ni("");const uB=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Dl(n){if(nn(!!n,39018),typeof n=="string"){let e=0;const t=uB.exec(n);if(nn(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Zn(n.seconds),nanos:Zn(n.nanos)}}function Zn(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Rl(n){return typeof n=="string"?ni.fromBase64String(n):ni.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aM="server_timestamp",sM="__type__",oM="__previous_value__",lM="__local_write_time__";function Jw(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[sM])===null||t===void 0?void 0:t.stringValue)===aM}function Cm(n){const e=n.mapValue.fields[oM];return Jw(e)?Cm(e):e}function s0(n){const e=Dl(n.mapValue.fields[lM].timestampValue);return new Cn(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dB{constructor(e,t,r,i,a,s,o,c,d,f){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.longPollingOptions=c,this.useFetchStreams=d,this.isUsingEmulator=f}}const A1="(default)";class o0{constructor(e,t){this.projectId=e,this.database=t||A1}static empty(){return new o0("","")}get isDefaultDatabase(){return this.database===A1}isEqual(e){return e instanceof o0&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cM="__type__",fB="__max__",Cg={mapValue:{}},uM="__vector__",E1="value";function Ml(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Jw(n)?4:pB(n)?9007199254740991:hB(n)?10:11:lt(28295,{value:n})}function Cs(n,e){if(n===e)return!0;const t=Ml(n);if(t!==Ml(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return s0(n).isEqual(s0(e));case 3:return function(i,a){if(typeof i.timestampValue=="string"&&typeof a.timestampValue=="string"&&i.timestampValue.length===a.timestampValue.length)return i.timestampValue===a.timestampValue;const s=Dl(i.timestampValue),o=Dl(a.timestampValue);return s.seconds===o.seconds&&s.nanos===o.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,a){return Rl(i.bytesValue).isEqual(Rl(a.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,a){return Zn(i.geoPointValue.latitude)===Zn(a.geoPointValue.latitude)&&Zn(i.geoPointValue.longitude)===Zn(a.geoPointValue.longitude)}(n,e);case 2:return function(i,a){if("integerValue"in i&&"integerValue"in a)return Zn(i.integerValue)===Zn(a.integerValue);if("doubleValue"in i&&"doubleValue"in a){const s=Zn(i.doubleValue),o=Zn(a.doubleValue);return s===o?b1(s)===b1(o):isNaN(s)&&isNaN(o)}return!1}(n,e);case 9:return Bd(n.arrayValue.values||[],e.arrayValue.values||[],Cs);case 10:case 11:return function(i,a){const s=i.mapValue.fields||{},o=a.mapValue.fields||{};if(uC(s)!==uC(o))return!1;for(const c in s)if(s.hasOwnProperty(c)&&(o[c]===void 0||!Cs(s[c],o[c])))return!1;return!0}(n,e);default:return lt(52216,{left:n})}}function l0(n,e){return(n.values||[]).find(t=>Cs(t,e))!==void 0}function Vd(n,e){if(n===e)return 0;const t=Ml(n),r=Ml(e);if(t!==r)return At(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return At(n.booleanValue,e.booleanValue);case 2:return function(a,s){const o=Zn(a.integerValue||a.doubleValue),c=Zn(s.integerValue||s.doubleValue);return o<c?-1:o>c?1:o===c?0:isNaN(o)?isNaN(c)?0:-1:1}(n,e);case 3:return fC(n.timestampValue,e.timestampValue);case 4:return fC(s0(n),s0(e));case 5:return M2(n.stringValue,e.stringValue);case 6:return function(a,s){const o=Rl(a),c=Rl(s);return o.compareTo(c)}(n.bytesValue,e.bytesValue);case 7:return function(a,s){const o=a.split("/"),c=s.split("/");for(let d=0;d<o.length&&d<c.length;d++){const f=At(o[d],c[d]);if(f!==0)return f}return At(o.length,c.length)}(n.referenceValue,e.referenceValue);case 8:return function(a,s){const o=At(Zn(a.latitude),Zn(s.latitude));return o!==0?o:At(Zn(a.longitude),Zn(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return hC(n.arrayValue,e.arrayValue);case 10:return function(a,s){var o,c,d,f;const p=a.fields||{},g=s.fields||{},y=(o=p[E1])===null||o===void 0?void 0:o.arrayValue,v=(c=g[E1])===null||c===void 0?void 0:c.arrayValue,b=At(((d=y==null?void 0:y.values)===null||d===void 0?void 0:d.length)||0,((f=v==null?void 0:v.values)===null||f===void 0?void 0:f.length)||0);return b!==0?b:hC(y,v)}(n.mapValue,e.mapValue);case 11:return function(a,s){if(a===Cg.mapValue&&s===Cg.mapValue)return 0;if(a===Cg.mapValue)return 1;if(s===Cg.mapValue)return-1;const o=a.fields||{},c=Object.keys(o),d=s.fields||{},f=Object.keys(d);c.sort(),f.sort();for(let p=0;p<c.length&&p<f.length;++p){const g=M2(c[p],f[p]);if(g!==0)return g;const y=Vd(o[c[p]],d[f[p]]);if(y!==0)return y}return At(c.length,f.length)}(n.mapValue,e.mapValue);default:throw lt(23264,{le:t})}}function fC(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return At(n,e);const t=Dl(n),r=Dl(e),i=At(t.seconds,r.seconds);return i!==0?i:At(t.nanos,r.nanos)}function hC(n,e){const t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){const a=Vd(t[i],r[i]);if(a)return a}return At(t.length,r.length)}function Fd(n){return O2(n)}function O2(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=Dl(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return Rl(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return Ze.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(const a of t.values||[])i?i=!1:r+=",",r+=O2(a);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let i="{",a=!0;for(const s of r)a?a=!1:i+=",",i+=`${s}:${O2(t.fields[s])}`;return i+"}"}(n.mapValue):lt(61005,{value:n})}function r1(n){switch(Ml(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Cm(n);return e?16+r1(e):16;case 5:return 2*n.stringValue.length;case 6:return Rl(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,a)=>i+r1(a),0)}(n.arrayValue);case 10:case 11:return function(r){let i=0;return Bl(r.fields,(a,s)=>{i+=a.length+r1(s)}),i}(n.mapValue);default:throw lt(13486,{value:n})}}function pC(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function P2(n){return!!n&&"integerValue"in n}function e_(n){return!!n&&"arrayValue"in n}function gC(n){return!!n&&"nullValue"in n}function mC(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function i1(n){return!!n&&"mapValue"in n}function hB(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[cM])===null||t===void 0?void 0:t.stringValue)===uM}function Xh(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Bl(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Xh(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Xh(n.arrayValue.values[t]);return e}return Object.assign({},n)}function pB(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===fB}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pi{constructor(e){this.value=e}static empty(){return new Pi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!i1(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Xh(t)}setAll(e){let t=Zr.emptyPath(),r={},i=[];e.forEach((s,o)=>{if(!t.isImmediateParentOf(o)){const c=this.getFieldsMap(t);this.applyChanges(c,r,i),r={},i=[],t=o.popLast()}s?r[o.lastSegment()]=Xh(s):i.push(o.lastSegment())});const a=this.getFieldsMap(t);this.applyChanges(a,r,i)}delete(e){const t=this.field(e.popLast());i1(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Cs(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];i1(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Bl(t,(i,a)=>e[i]=a);for(const i of r)delete e[i]}clone(){return new Pi(Xh(this.value))}}function dM(n){const e=[];return Bl(n.fields,(t,r)=>{const i=new Zr([t]);if(i1(r)){const a=dM(r.mapValue).fields;if(a.length===0)e.push(i);else for(const s of a)e.push(i.child(s))}else e.push(i)}),new Wi(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ci{constructor(e,t,r,i,a,s,o){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=a,this.data=s,this.documentState=o}static newInvalidDocument(e){return new ci(e,0,ft.min(),ft.min(),ft.min(),Pi.empty(),0)}static newFoundDocument(e,t,r,i){return new ci(e,1,t,ft.min(),r,i,0)}static newNoDocument(e,t){return new ci(e,2,t,ft.min(),ft.min(),Pi.empty(),0)}static newUnknownDocument(e,t){return new ci(e,3,t,ft.min(),ft.min(),Pi.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ft.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Pi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Pi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ft.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ci&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ci(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S1{constructor(e,t){this.position=e,this.inclusive=t}}function yC(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const a=e[i],s=n.position[i];if(a.field.isKeyField()?r=Ze.comparator(Ze.fromName(s.referenceValue),t.key):r=Vd(s,t.data.field(a.field)),a.dir==="desc"&&(r*=-1),r!==0)break}return r}function vC(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Cs(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c0{constructor(e,t="asc"){this.field=e,this.dir=t}}function gB(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fM{}class fr extends fM{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new yB(e,t,r):t==="array-contains"?new wB(e,r):t==="in"?new _B(e,r):t==="not-in"?new bB(e,r):t==="array-contains-any"?new AB(e,r):new fr(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new vB(e,r):new xB(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Vd(t,this.value)):t!==null&&Ml(this.value)===Ml(t)&&this.matchesComparison(Vd(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return lt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class $a extends fM{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new $a(e,t)}matches(e){return hM(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function hM(n){return n.op==="and"}function pM(n){return mB(n)&&hM(n)}function mB(n){for(const e of n.filters)if(e instanceof $a)return!1;return!0}function k2(n){if(n instanceof fr)return n.field.canonicalString()+n.op.toString()+Fd(n.value);if(pM(n))return n.filters.map(e=>k2(e)).join(",");{const e=n.filters.map(t=>k2(t)).join(",");return`${n.op}(${e})`}}function gM(n,e){return n instanceof fr?function(r,i){return i instanceof fr&&r.op===i.op&&r.field.isEqual(i.field)&&Cs(r.value,i.value)}(n,e):n instanceof $a?function(r,i){return i instanceof $a&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((a,s,o)=>a&&gM(s,i.filters[o]),!0):!1}(n,e):void lt(19439)}function mM(n){return n instanceof fr?function(t){return`${t.field.canonicalString()} ${t.op} ${Fd(t.value)}`}(n):n instanceof $a?function(t){return t.op.toString()+" {"+t.getFilters().map(mM).join(" ,")+"}"}(n):"Filter"}class yB extends fr{constructor(e,t,r){super(e,t,r),this.key=Ze.fromName(r.referenceValue)}matches(e){const t=Ze.comparator(e.key,this.key);return this.matchesComparison(t)}}class vB extends fr{constructor(e,t){super(e,"in",t),this.keys=yM("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class xB extends fr{constructor(e,t){super(e,"not-in",t),this.keys=yM("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function yM(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>Ze.fromName(r.referenceValue))}class wB extends fr{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return e_(t)&&l0(t.arrayValue,this.value)}}class _B extends fr{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&l0(this.value.arrayValue,t)}}class bB extends fr{constructor(e,t){super(e,"not-in",t)}matches(e){if(l0(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!l0(this.value.arrayValue,t)}}class AB extends fr{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!e_(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>l0(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EB{constructor(e,t=null,r=[],i=[],a=null,s=null,o=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=s,this.endAt=o,this.Pe=null}}function xC(n,e=null,t=[],r=[],i=null,a=null,s=null){return new EB(n,e,t,r,i,a,s)}function t_(n){const e=gt(n);if(e.Pe===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>k2(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(a){return a.field.canonicalString()+a.dir}(r)).join(","),Tm(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Fd(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Fd(r)).join(",")),e.Pe=t}return e.Pe}function n_(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!gB(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!gM(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!vC(n.startAt,e.startAt)&&vC(n.endAt,e.endAt)}function N2(n){return Ze.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zc{constructor(e,t=null,r=[],i=[],a=null,s="F",o=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=s,this.startAt=o,this.endAt=c,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function SB(n,e,t,r,i,a,s,o){return new Zc(n,e,t,r,i,a,s,o)}function Im(n){return new Zc(n)}function wC(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function vM(n){return n.collectionGroup!==null}function Kh(n){const e=gt(n);if(e.Te===null){e.Te=[];const t=new Set;for(const a of e.explicitOrderBy)e.Te.push(a),t.add(a.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let o=new Ir(Zr.comparator);return s.filters.forEach(c=>{c.getFlattenedFilters().forEach(d=>{d.isInequality()&&(o=o.add(d.field))})}),o})(e).forEach(a=>{t.has(a.canonicalString())||a.isKeyField()||e.Te.push(new c0(a,r))}),t.has(Zr.keyField().canonicalString())||e.Te.push(new c0(Zr.keyField(),r))}return e.Te}function ws(n){const e=gt(n);return e.Ie||(e.Ie=TB(e,Kh(n))),e.Ie}function TB(n,e){if(n.limitType==="F")return xC(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{const a=i.dir==="desc"?"asc":"desc";return new c0(i.field,a)});const t=n.endAt?new S1(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new S1(n.startAt.position,n.startAt.inclusive):null;return xC(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function L2(n,e){const t=n.filters.concat([e]);return new Zc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function T1(n,e,t){return new Zc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Dm(n,e){return n_(ws(n),ws(e))&&n.limitType===e.limitType}function xM(n){return`${t_(ws(n))}|lt:${n.limitType}`}function cd(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>mM(i)).join(", ")}]`),Tm(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>Fd(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>Fd(i)).join(",")),`Target(${r})`}(ws(n))}; limitType=${n.limitType})`}function Rm(n,e){return e.isFoundDocument()&&function(r,i){const a=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(a):Ze.isDocumentKey(r.path)?r.path.isEqual(a):r.path.isImmediateParentOf(a)}(n,e)&&function(r,i){for(const a of Kh(r))if(!a.field.isKeyField()&&i.data.field(a.field)===null)return!1;return!0}(n,e)&&function(r,i){for(const a of r.filters)if(!a.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(s,o,c){const d=yC(s,o,c);return s.inclusive?d<=0:d<0}(r.startAt,Kh(r),i)||r.endAt&&!function(s,o,c){const d=yC(s,o,c);return s.inclusive?d>=0:d>0}(r.endAt,Kh(r),i))}(n,e)}function CB(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function wM(n){return(e,t)=>{let r=!1;for(const i of Kh(n)){const a=IB(i,e,t);if(a!==0)return a;r=r||i.field.isKeyField()}return 0}}function IB(n,e,t){const r=n.field.isKeyField()?Ze.comparator(e.key,t.key):function(a,s,o){const c=s.data.field(a),d=o.data.field(a);return c!==null&&d!==null?Vd(c,d):lt(42886)}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return lt(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jc{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[i,a]of r)if(this.equalsFn(i,e))return a}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Bl(this.inner,(t,r)=>{for(const[i,a]of r)e(i,a)})}isEmpty(){return rM(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DB=new Bn(Ze.comparator);function vo(){return DB}const _M=new Bn(Ze.comparator);function Nh(...n){let e=_M;for(const t of n)e=e.insert(t.key,t);return e}function bM(n){let e=_M;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Rc(){return Qh()}function AM(){return Qh()}function Qh(){return new Jc(n=>n.toString(),(n,e)=>n.isEqual(e))}const RB=new Bn(Ze.comparator),MB=new Ir(Ze.comparator);function Ot(...n){let e=MB;for(const t of n)e=e.add(t);return e}const OB=new Ir(At);function PB(){return OB}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r_(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:b1(e)?"-0":e}}function EM(n){return{integerValue:""+n}}function kB(n,e){return oB(e)?EM(e):r_(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mm{constructor(){this._=void 0}}function NB(n,e,t){return n instanceof u0?function(i,a){const s={fields:{[sM]:{stringValue:aM},[lM]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return a&&Jw(a)&&(a=Cm(a)),a&&(s.fields[oM]=a),{mapValue:s}}(t,e):n instanceof d0?TM(n,e):n instanceof f0?CM(n,e):function(i,a){const s=SM(i,a),o=_C(s)+_C(i.Ee);return P2(s)&&P2(i.Ee)?EM(o):r_(i.serializer,o)}(n,e)}function LB(n,e,t){return n instanceof d0?TM(n,e):n instanceof f0?CM(n,e):t}function SM(n,e){return n instanceof C1?function(r){return P2(r)||function(a){return!!a&&"doubleValue"in a}(r)}(e)?e:{integerValue:0}:null}class u0 extends Mm{}class d0 extends Mm{constructor(e){super(),this.elements=e}}function TM(n,e){const t=IM(e);for(const r of n.elements)t.some(i=>Cs(i,r))||t.push(r);return{arrayValue:{values:t}}}class f0 extends Mm{constructor(e){super(),this.elements=e}}function CM(n,e){let t=IM(e);for(const r of n.elements)t=t.filter(i=>!Cs(i,r));return{arrayValue:{values:t}}}class C1 extends Mm{constructor(e,t){super(),this.serializer=e,this.Ee=t}}function _C(n){return Zn(n.integerValue||n.doubleValue)}function IM(n){return e_(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BB{constructor(e,t){this.field=e,this.transform=t}}function VB(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof d0&&i instanceof d0||r instanceof f0&&i instanceof f0?Bd(r.elements,i.elements,Cs):r instanceof C1&&i instanceof C1?Cs(r.Ee,i.Ee):r instanceof u0&&i instanceof u0}(n.transform,e.transform)}class FB{constructor(e,t){this.version=e,this.transformResults=t}}class Si{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Si}static exists(e){return new Si(void 0,e)}static updateTime(e){return new Si(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function a1(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Om{}function DM(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Pm(n.key,Si.none()):new P0(n.key,n.data,Si.none());{const t=n.data,r=Pi.empty();let i=new Ir(Zr.comparator);for(let a of e.fields)if(!i.has(a)){let s=t.field(a);s===null&&a.length>1&&(a=a.popLast(),s=t.field(a)),s===null?r.delete(a):r.set(a,s),i=i.add(a)}return new Vl(n.key,r,new Wi(i.toArray()),Si.none())}}function jB(n,e,t){n instanceof P0?function(i,a,s){const o=i.value.clone(),c=AC(i.fieldTransforms,a,s.transformResults);o.setAll(c),a.convertToFoundDocument(s.version,o).setHasCommittedMutations()}(n,e,t):n instanceof Vl?function(i,a,s){if(!a1(i.precondition,a))return void a.convertToUnknownDocument(s.version);const o=AC(i.fieldTransforms,a,s.transformResults),c=a.data;c.setAll(RM(i)),c.setAll(o),a.convertToFoundDocument(s.version,c).setHasCommittedMutations()}(n,e,t):function(i,a,s){a.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,t)}function Zh(n,e,t,r){return n instanceof P0?function(a,s,o,c){if(!a1(a.precondition,s))return o;const d=a.value.clone(),f=EC(a.fieldTransforms,c,s);return d.setAll(f),s.convertToFoundDocument(s.version,d).setHasLocalMutations(),null}(n,e,t,r):n instanceof Vl?function(a,s,o,c){if(!a1(a.precondition,s))return o;const d=EC(a.fieldTransforms,c,s),f=s.data;return f.setAll(RM(a)),f.setAll(d),s.convertToFoundDocument(s.version,f).setHasLocalMutations(),o===null?null:o.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(p=>p.field))}(n,e,t,r):function(a,s,o){return a1(a.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):o}(n,e,t)}function UB(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),a=SM(r.transform,i||null);a!=null&&(t===null&&(t=Pi.empty()),t.set(r.field,a))}return t||null}function bC(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Bd(r,i,(a,s)=>VB(a,s))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class P0 extends Om{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Vl extends Om{constructor(e,t,r,i,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function RM(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function AC(n,e,t){const r=new Map;nn(n.length===t.length,32656,{Ae:t.length,Re:n.length});for(let i=0;i<t.length;i++){const a=n[i],s=a.transform,o=e.data.field(a.field);r.set(a.field,LB(s,o,t[i]))}return r}function EC(n,e,t){const r=new Map;for(const i of n){const a=i.transform,s=t.data.field(i.field);r.set(i.field,NB(a,s,e))}return r}class Pm extends Om{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class HB extends Om{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zB{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&jB(a,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Zh(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Zh(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=AM();return this.mutations.forEach(i=>{const a=e.get(i.key),s=a.overlayedDocument;let o=this.applyToLocalView(s,a.mutatedFields);o=t.has(i.key)?null:o;const c=DM(s,o);c!==null&&r.set(i.key,c),s.isValidDocument()||s.convertToNoDocument(ft.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Ot())}isEqual(e){return this.batchId===e.batchId&&Bd(this.mutations,e.mutations,(t,r)=>bC(t,r))&&Bd(this.baseMutations,e.baseMutations,(t,r)=>bC(t,r))}}class i_{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){nn(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let i=function(){return RB}();const a=e.mutations;for(let s=0;s<a.length;s++)i=i.insert(a[s].key,r[s].version);return new i_(e,t,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $B{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GB{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var cr,Ft;function WB(n){switch(n){case be.OK:return lt(64938);case be.CANCELLED:case be.UNKNOWN:case be.DEADLINE_EXCEEDED:case be.RESOURCE_EXHAUSTED:case be.INTERNAL:case be.UNAVAILABLE:case be.UNAUTHENTICATED:return!1;case be.INVALID_ARGUMENT:case be.NOT_FOUND:case be.ALREADY_EXISTS:case be.PERMISSION_DENIED:case be.FAILED_PRECONDITION:case be.ABORTED:case be.OUT_OF_RANGE:case be.UNIMPLEMENTED:case be.DATA_LOSS:return!0;default:return lt(15467,{code:n})}}function MM(n){if(n===void 0)return yo("GRPC error has no .code"),be.UNKNOWN;switch(n){case cr.OK:return be.OK;case cr.CANCELLED:return be.CANCELLED;case cr.UNKNOWN:return be.UNKNOWN;case cr.DEADLINE_EXCEEDED:return be.DEADLINE_EXCEEDED;case cr.RESOURCE_EXHAUSTED:return be.RESOURCE_EXHAUSTED;case cr.INTERNAL:return be.INTERNAL;case cr.UNAVAILABLE:return be.UNAVAILABLE;case cr.UNAUTHENTICATED:return be.UNAUTHENTICATED;case cr.INVALID_ARGUMENT:return be.INVALID_ARGUMENT;case cr.NOT_FOUND:return be.NOT_FOUND;case cr.ALREADY_EXISTS:return be.ALREADY_EXISTS;case cr.PERMISSION_DENIED:return be.PERMISSION_DENIED;case cr.FAILED_PRECONDITION:return be.FAILED_PRECONDITION;case cr.ABORTED:return be.ABORTED;case cr.OUT_OF_RANGE:return be.OUT_OF_RANGE;case cr.UNIMPLEMENTED:return be.UNIMPLEMENTED;case cr.DATA_LOSS:return be.DATA_LOSS;default:return lt(39323,{code:n})}}(Ft=cr||(cr={}))[Ft.OK=0]="OK",Ft[Ft.CANCELLED=1]="CANCELLED",Ft[Ft.UNKNOWN=2]="UNKNOWN",Ft[Ft.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ft[Ft.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ft[Ft.NOT_FOUND=5]="NOT_FOUND",Ft[Ft.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ft[Ft.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ft[Ft.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ft[Ft.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ft[Ft.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ft[Ft.ABORTED=10]="ABORTED",Ft[Ft.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ft[Ft.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ft[Ft.INTERNAL=13]="INTERNAL",Ft[Ft.UNAVAILABLE=14]="UNAVAILABLE",Ft[Ft.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YB=new Al([4294967295,4294967295],0);function SC(n){const e=eM().encode(n),t=new WR;return t.update(e),new Uint8Array(t.digest())}function TC(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new Al([t,r],0),new Al([i,a],0)]}class a_{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Lh(`Invalid padding: ${t}`);if(r<0)throw new Lh(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Lh(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Lh(`Invalid padding when bitmap length is 0: ${t}`);this.fe=8*e.length-t,this.ge=Al.fromNumber(this.fe)}pe(e,t,r){let i=e.add(t.multiply(Al.fromNumber(r)));return i.compare(YB)===1&&(i=new Al([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const t=SC(e),[r,i]=TC(t);for(let a=0;a<this.hashCount;a++){const s=this.pe(r,i,a);if(!this.ye(s))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),s=new a_(a,i,t);return r.forEach(o=>s.insert(o)),s}insert(e){if(this.fe===0)return;const t=SC(e),[r,i]=TC(t);for(let a=0;a<this.hashCount;a++){const s=this.pe(r,i,a);this.we(s)}}we(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class Lh extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class km{constructor(e,t,r,i,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,k0.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new km(ft.min(),i,new Bn(At),vo(),Ot())}}class k0{constructor(e,t,r,i,a){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new k0(r,t,Ot(),Ot(),Ot())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s1{constructor(e,t,r,i){this.Se=e,this.removedTargetIds=t,this.key=r,this.be=i}}class OM{constructor(e,t){this.targetId=e,this.De=t}}class PM{constructor(e,t,r=ni.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class CC{constructor(){this.ve=0,this.Ce=IC(),this.Fe=ni.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=Ot(),t=Ot(),r=Ot();return this.Ce.forEach((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:lt(38017,{changeType:a})}}),new k0(this.Fe,this.Me,e,t,r)}ke(){this.xe=!1,this.Ce=IC()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,nn(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class qB{constructor(e){this.We=e,this.Ge=new Map,this.ze=vo(),this.je=Ig(),this.Je=Ig(),this.He=new Bn(At)}Ye(e){for(const t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(const t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,t=>{const r=this.tt(t);switch(e.state){case 0:this.nt(t)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),r.Be(e.resumeToken));break;default:lt(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach((r,i)=>{this.nt(i)&&t(i)})}it(e){const t=e.targetId,r=e.De.count,i=this.st(t);if(i){const a=i.target;if(N2(a))if(r===0){const s=new Ze(a.path);this.Xe(t,s,ci.newNoDocument(s,ft.min()))}else nn(r===1,20013,{expectedCount:r});else{const s=this.ot(t);if(s!==r){const o=this._t(e),c=o?this.ut(o,e,s):1;if(c!==0){this.rt(t);const d=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(t,d)}}}}}_t(e){const t=e.De.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:a=0}=t;let s,o;try{s=Rl(r).toUint8Array()}catch(c){if(c instanceof iM)return Cl("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{o=new a_(s,i,a)}catch(c){return Cl(c instanceof Lh?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return o.fe===0?null:o}ut(e,t,r){return t.De.count===r-this.ht(e,t.targetId)?0:2}ht(e,t){const r=this.We.getRemoteKeysForTarget(t);let i=0;return r.forEach(a=>{const s=this.We.lt(),o=`projects/${s.projectId}/databases/${s.database}/documents/${a.path.canonicalString()}`;e.mightContain(o)||(this.Xe(t,a,null),i++)}),i}Pt(e){const t=new Map;this.Ge.forEach((a,s)=>{const o=this.st(s);if(o){if(a.current&&N2(o.target)){const c=new Ze(o.target.path);this.Tt(c).has(s)||this.It(s,c)||this.Xe(s,c,ci.newNoDocument(c,e))}a.Ne&&(t.set(s,a.Le()),a.ke())}});let r=Ot();this.Je.forEach((a,s)=>{let o=!0;s.forEachWhile(c=>{const d=this.st(c);return!d||d.purpose==="TargetPurposeLimboResolution"||(o=!1,!1)}),o&&(r=r.add(a))}),this.ze.forEach((a,s)=>s.setReadTime(e));const i=new km(e,t,this.He,this.ze,r);return this.ze=vo(),this.je=Ig(),this.Je=Ig(),this.He=new Bn(At),i}Ze(e,t){if(!this.nt(e))return;const r=this.It(e,t.key)?2:0;this.tt(e).qe(t.key,r),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,r){if(!this.nt(e))return;const i=this.tt(e);this.It(e,t)?i.qe(t,1):i.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),r&&(this.ze=this.ze.insert(t,r))}removeTarget(e){this.Ge.delete(e)}ot(e){const t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new CC,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new Ir(At),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new Ir(At),this.je=this.je.insert(e,t)),t}nt(e){const t=this.st(e)!==null;return t||ze("WatchChangeAggregator","Detected inactive target",e),t}st(e){const t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new CC),this.We.getRemoteKeysForTarget(e).forEach(t=>{this.Xe(e,t,null)})}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}}function Ig(){return new Bn(Ze.comparator)}function IC(){return new Bn(Ze.comparator)}const XB={asc:"ASCENDING",desc:"DESCENDING"},KB={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},QB={and:"AND",or:"OR"};class ZB{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function B2(n,e){return n.useProto3Json||Tm(e)?e:{value:e}}function I1(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function kM(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function JB(n,e){return I1(n,e.toTimestamp())}function _s(n){return nn(!!n,49232),ft.fromTimestamp(function(t){const r=Dl(t);return new Cn(r.seconds,r.nanos)}(n))}function s_(n,e){return V2(n,e).canonicalString()}function V2(n,e){const t=function(i){return new yn(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function NM(n){const e=yn.fromString(n);return nn(jM(e),10190,{key:e.toString()}),e}function F2(n,e){return s_(n.databaseId,e.path)}function Ix(n,e){const t=NM(e);if(t.get(1)!==n.databaseId.projectId)throw new Fe(be.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Fe(be.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ze(BM(t))}function LM(n,e){return s_(n.databaseId,e)}function eV(n){const e=NM(n);return e.length===4?yn.emptyPath():BM(e)}function j2(n){return new yn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function BM(n){return nn(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function DC(n,e,t){return{name:F2(n,e),fields:t.value.mapValue.fields}}function tV(n,e){let t;if("targetChange"in e){e.targetChange;const r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:lt(39313,{state:d})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],a=function(d,f){return d.useProto3Json?(nn(f===void 0||typeof f=="string",58123),ni.fromBase64String(f||"")):(nn(f===void 0||f instanceof Buffer||f instanceof Uint8Array,16193),ni.fromUint8Array(f||new Uint8Array))}(n,e.targetChange.resumeToken),s=e.targetChange.cause,o=s&&function(d){const f=d.code===void 0?be.UNKNOWN:MM(d.code);return new Fe(f,d.message||"")}(s);t=new PM(r,i,a,o||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Ix(n,r.document.name),a=_s(r.document.updateTime),s=r.document.createTime?_s(r.document.createTime):ft.min(),o=new Pi({mapValue:{fields:r.document.fields}}),c=ci.newFoundDocument(i,a,s,o),d=r.targetIds||[],f=r.removedTargetIds||[];t=new s1(d,f,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Ix(n,r.document),a=r.readTime?_s(r.readTime):ft.min(),s=ci.newNoDocument(i,a),o=r.removedTargetIds||[];t=new s1([],o,s.key,s)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Ix(n,r.document),a=r.removedTargetIds||[];t=new s1([],a,i,null)}else{if(!("filter"in e))return lt(11601,{At:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:a}=r,s=new GB(i,a),o=r.targetId;t=new OM(o,s)}}return t}function nV(n,e){let t;if(e instanceof P0)t={update:DC(n,e.key,e.value)};else if(e instanceof Pm)t={delete:F2(n,e.key)};else if(e instanceof Vl)t={update:DC(n,e.key,e.data),updateMask:dV(e.fieldMask)};else{if(!(e instanceof HB))return lt(16599,{Rt:e.type});t={verify:F2(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(a,s){const o=s.transform;if(o instanceof u0)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof d0)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof f0)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof C1)return{fieldPath:s.field.canonicalString(),increment:o.Ee};throw lt(20930,{transform:s.transform})}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,a){return a.updateTime!==void 0?{updateTime:JB(i,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:lt(27497)}(n,e.precondition)),t}function rV(n,e){return n&&n.length>0?(nn(e!==void 0,14353),n.map(t=>function(i,a){let s=i.updateTime?_s(i.updateTime):_s(a);return s.isEqual(ft.min())&&(s=_s(a)),new FB(s,i.transformResults||[])}(t,e))):[]}function iV(n,e){return{documents:[LM(n,e.path)]}}function aV(n,e){const t={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=LM(n,i);const a=function(d){if(d.length!==0)return FM($a.create(d,"and"))}(e.filters);a&&(t.structuredQuery.where=a);const s=function(d){if(d.length!==0)return d.map(f=>function(g){return{field:ud(g.field),direction:lV(g.dir)}}(f))}(e.orderBy);s&&(t.structuredQuery.orderBy=s);const o=B2(n,e.limit);return o!==null&&(t.structuredQuery.limit=o),e.startAt&&(t.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{Vt:t,parent:i}}function sV(n){let e=eV(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){nn(r===1,65062);const f=t.from[0];f.allDescendants?i=f.collectionId:e=e.child(f.collectionId)}let a=[];t.where&&(a=function(p){const g=VM(p);return g instanceof $a&&pM(g)?g.getFilters():[g]}(t.where));let s=[];t.orderBy&&(s=function(p){return p.map(g=>function(v){return new c0(dd(v.field),function(A){switch(A){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(v.direction))}(g))}(t.orderBy));let o=null;t.limit&&(o=function(p){let g;return g=typeof p=="object"?p.value:p,Tm(g)?null:g}(t.limit));let c=null;t.startAt&&(c=function(p){const g=!!p.before,y=p.values||[];return new S1(y,g)}(t.startAt));let d=null;return t.endAt&&(d=function(p){const g=!p.before,y=p.values||[];return new S1(y,g)}(t.endAt)),SB(e,i,s,a,o,"F",c,d)}function oV(n,e){const t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return lt(28987,{purpose:i})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function VM(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=dd(t.unaryFilter.field);return fr.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=dd(t.unaryFilter.field);return fr.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=dd(t.unaryFilter.field);return fr.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=dd(t.unaryFilter.field);return fr.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return lt(61313);default:return lt(60726)}}(n):n.fieldFilter!==void 0?function(t){return fr.create(dd(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return lt(58110);default:return lt(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return $a.create(t.compositeFilter.filters.map(r=>VM(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return lt(1026)}}(t.compositeFilter.op))}(n):lt(30097,{filter:n})}function lV(n){return XB[n]}function cV(n){return KB[n]}function uV(n){return QB[n]}function ud(n){return{fieldPath:n.canonicalString()}}function dd(n){return Zr.fromServerFormat(n.fieldPath)}function FM(n){return n instanceof fr?function(t){if(t.op==="=="){if(mC(t.value))return{unaryFilter:{field:ud(t.field),op:"IS_NAN"}};if(gC(t.value))return{unaryFilter:{field:ud(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(mC(t.value))return{unaryFilter:{field:ud(t.field),op:"IS_NOT_NAN"}};if(gC(t.value))return{unaryFilter:{field:ud(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ud(t.field),op:cV(t.op),value:t.value}}}(n):n instanceof $a?function(t){const r=t.getFilters().map(i=>FM(i));return r.length===1?r[0]:{compositeFilter:{op:uV(t.op),filters:r}}}(n):lt(54877,{filter:n})}function dV(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function jM(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vl{constructor(e,t,r,i,a=ft.min(),s=ft.min(),o=ni.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o,this.expectedCount=c}withSequenceNumber(e){return new vl(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new vl(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new vl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new vl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fV{constructor(e){this.gt=e}}function hV(n){const e=sV({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?T1(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pV{constructor(){this.Dn=new gV}addToCollectionParentIndex(e,t){return this.Dn.add(t),Te.resolve()}getCollectionParents(e,t){return Te.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return Te.resolve()}deleteFieldIndex(e,t){return Te.resolve()}deleteAllFieldIndexes(e){return Te.resolve()}createTargetIndexes(e,t){return Te.resolve()}getDocumentsMatchingTarget(e,t){return Te.resolve(null)}getIndexType(e,t){return Te.resolve(0)}getFieldIndexes(e,t){return Te.resolve([])}getNextCollectionGroupToUpdate(e){return Te.resolve(null)}getMinOffset(e,t){return Te.resolve(Il.min())}getMinOffsetFromCollectionGroup(e,t){return Te.resolve(Il.min())}updateCollectionGroup(e,t,r){return Te.resolve()}updateIndexEntries(e,t){return Te.resolve()}}class gV{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Ir(yn.comparator),a=!i.has(r);return this.index[t]=i.add(r),a}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Ir(yn.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RC={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},UM=41943040;class Oi{static withCacheSize(e){return new Oi(e,Oi.DEFAULT_COLLECTION_PERCENTILE,Oi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Oi.DEFAULT_COLLECTION_PERCENTILE=10,Oi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Oi.DEFAULT=new Oi(UM,Oi.DEFAULT_COLLECTION_PERCENTILE,Oi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Oi.DISABLED=new Oi(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jd{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new jd(0)}static ur(){return new jd(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MC="LruGarbageCollector",mV=1048576;function OC([n,e],[t,r]){const i=At(n,t);return i===0?At(e,r):i}class yV{constructor(e){this.Tr=e,this.buffer=new Ir(OC),this.Ir=0}dr(){return++this.Ir}Er(e){const t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();OC(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class vV{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){ze(MC,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){of(t)?ze(MC,"Ignoring IndexedDB error during garbage collection: ",t):await sf(t)}await this.Rr(3e5)})}}class xV{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return Te.resolve(Sm.ue);const r=new yV(t);return this.Vr.forEachTarget(e,i=>r.Er(i.sequenceNumber)).next(()=>this.Vr.gr(e,i=>r.Er(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Vr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ze("LruGarbageCollector","Garbage collection skipped; disabled"),Te.resolve(RC)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(ze("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),RC):this.pr(e,t))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let r,i,a,s,o,c,d;const f=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(ze("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,s=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,o=Date.now(),this.removeTargets(e,r,t))).next(p=>(a=p,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(d=Date.now(),ld()<=Mt.DEBUG&&ze("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-f}ms
	Determined least recently used ${i} in `+(o-s)+`ms
	Removed ${a} targets in `+(c-o)+`ms
	Removed ${p} documents in `+(d-c)+`ms
Total Duration: ${d-f}ms`),Te.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:p})))}}function wV(n,e){return new xV(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _V{constructor(){this.changes=new Jc(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,ci.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?Te.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bV{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AV{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&Zh(r.mutation,i,Wi.empty(),Cn.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Ot()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Ot()){const i=Rc();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(a=>{let s=Nh();return a.forEach((o,c)=>{s=s.insert(o,c.overlayedDocument)}),s}))}getOverlayedDocuments(e,t){const r=Rc();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Ot()))}populateOverlays(e,t,r){const i=[];return r.forEach(a=>{t.has(a)||i.push(a)}),this.documentOverlayCache.getOverlays(e,i).next(a=>{a.forEach((s,o)=>{t.set(s,o)})})}computeViews(e,t,r,i){let a=vo();const s=Qh(),o=function(){return Qh()}();return t.forEach((c,d)=>{const f=r.get(d.key);i.has(d.key)&&(f===void 0||f.mutation instanceof Vl)?a=a.insert(d.key,d):f!==void 0?(s.set(d.key,f.mutation.getFieldMask()),Zh(f.mutation,d,f.mutation.getFieldMask(),Cn.now())):s.set(d.key,Wi.empty())}),this.recalculateAndSaveOverlays(e,a).next(c=>(c.forEach((d,f)=>s.set(d,f)),t.forEach((d,f)=>{var p;return o.set(d,new bV(f,(p=s.get(d))!==null&&p!==void 0?p:null))}),o))}recalculateAndSaveOverlays(e,t){const r=Qh();let i=new Bn((s,o)=>s-o),a=Ot();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(s=>{for(const o of s)o.keys().forEach(c=>{const d=t.get(c);if(d===null)return;let f=r.get(c)||Wi.empty();f=o.applyToLocalView(d,f),r.set(c,f);const p=(i.get(o.batchId)||Ot()).add(c);i=i.insert(o.batchId,p)})}).next(()=>{const s=[],o=i.getReverseIterator();for(;o.hasNext();){const c=o.getNext(),d=c.key,f=c.value,p=AM();f.forEach(g=>{if(!a.has(g)){const y=DM(t.get(g),r.get(g));y!==null&&p.set(g,y),a=a.add(g)}}),s.push(this.documentOverlayCache.saveOverlays(e,d,p))}return Te.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(s){return Ze.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):vM(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(a=>{const s=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-a.size):Te.resolve(Rc());let o=a0,c=a;return s.next(d=>Te.forEach(d,(f,p)=>(o<p.largestBatchId&&(o=p.largestBatchId),a.get(f)?Te.resolve():this.remoteDocumentCache.getEntry(e,f).next(g=>{c=c.insert(f,g)}))).next(()=>this.populateOverlays(e,d,a)).next(()=>this.computeViews(e,c,d,Ot())).next(f=>({batchId:o,changes:bM(f)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ze(t)).next(r=>{let i=Nh();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const a=t.collectionGroup;let s=Nh();return this.indexManager.getCollectionParents(e,a).next(o=>Te.forEach(o,c=>{const d=function(p,g){return new Zc(g,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(t,c.child(a));return this.getDocumentsMatchingCollectionQuery(e,d,r,i).next(f=>{f.forEach((p,g)=>{s=s.insert(p,g)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r,i){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(a=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,a,i))).next(s=>{a.forEach((c,d)=>{const f=d.getKey();s.get(f)===null&&(s=s.insert(f,ci.newInvalidDocument(f)))});let o=Nh();return s.forEach((c,d)=>{const f=a.get(c);f!==void 0&&Zh(f.mutation,d,Wi.empty(),Cn.now()),Rm(t,d)&&(o=o.insert(c,d))}),o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EV{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return Te.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,function(i){return{id:i.id,version:i.version,createTime:_s(i.createTime)}}(t)),Te.resolve()}getNamedQuery(e,t){return Te.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,function(i){return{name:i.name,query:hV(i.bundledQuery),readTime:_s(i.readTime)}}(t)),Te.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SV{constructor(){this.overlays=new Bn(Ze.comparator),this.kr=new Map}getOverlay(e,t){return Te.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Rc();return Te.forEach(t,i=>this.getOverlay(e,i).next(a=>{a!==null&&r.set(i,a)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,a)=>{this.wt(e,t,a)}),Te.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.kr.get(r);return i!==void 0&&(i.forEach(a=>this.overlays=this.overlays.remove(a)),this.kr.delete(r)),Te.resolve()}getOverlaysForCollection(e,t,r){const i=Rc(),a=t.length+1,s=new Ze(t.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){const c=o.getNext().value,d=c.getKey();if(!t.isPrefixOf(d.path))break;d.path.length===a&&c.largestBatchId>r&&i.set(c.getKey(),c)}return Te.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let a=new Bn((d,f)=>d-f);const s=this.overlays.getIterator();for(;s.hasNext();){const d=s.getNext().value;if(d.getKey().getCollectionGroup()===t&&d.largestBatchId>r){let f=a.get(d.largestBatchId);f===null&&(f=Rc(),a=a.insert(d.largestBatchId,f)),f.set(d.getKey(),d)}}const o=Rc(),c=a.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((d,f)=>o.set(d,f)),!(o.size()>=i)););return Te.resolve(o)}wt(e,t,r){const i=this.overlays.get(r.key);if(i!==null){const s=this.kr.get(i.largestBatchId).delete(r.key);this.kr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new $B(t,r));let a=this.kr.get(t);a===void 0&&(a=Ot(),this.kr.set(t,a)),this.kr.set(t,a.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TV{constructor(){this.sessionToken=ni.EMPTY_BYTE_STRING}getSessionToken(e){return Te.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Te.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o_{constructor(){this.qr=new Ir(Br.Qr),this.$r=new Ir(Br.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){const r=new Br(e,t);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Wr(new Br(e,t))}Gr(e,t){e.forEach(r=>this.removeReference(r,t))}zr(e){const t=new Ze(new yn([])),r=new Br(t,e),i=new Br(t,e+1),a=[];return this.$r.forEachInRange([r,i],s=>{this.Wr(s),a.push(s.key)}),a}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const t=new Ze(new yn([])),r=new Br(t,e),i=new Br(t,e+1);let a=Ot();return this.$r.forEachInRange([r,i],s=>{a=a.add(s.key)}),a}containsKey(e){const t=new Br(e,0),r=this.qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class Br{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return Ze.comparator(e.key,t.key)||At(e.Hr,t.Hr)}static Ur(e,t){return At(e.Hr,t.Hr)||Ze.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CV{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new Ir(Br.Qr)}checkEmpty(e){return Te.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){const a=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new zB(a,t,r,i);this.mutationQueue.push(s);for(const o of i)this.Yr=this.Yr.add(new Br(o.key,a)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return Te.resolve(s)}lookupMutationBatch(e,t){return Te.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=this.Xr(r),a=i<0?0:i;return Te.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return Te.resolve(this.mutationQueue.length===0?Zw:this.er-1)}getAllMutationBatches(e){return Te.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Br(t,0),i=new Br(t,Number.POSITIVE_INFINITY),a=[];return this.Yr.forEachInRange([r,i],s=>{const o=this.Zr(s.Hr);a.push(o)}),Te.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Ir(At);return t.forEach(i=>{const a=new Br(i,0),s=new Br(i,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([a,s],o=>{r=r.add(o.Hr)})}),Te.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let a=r;Ze.isDocumentKey(a)||(a=a.child(""));const s=new Br(new Ze(a),0);let o=new Ir(At);return this.Yr.forEachWhile(c=>{const d=c.key.path;return!!r.isPrefixOf(d)&&(d.length===i&&(o=o.add(c.Hr)),!0)},s),Te.resolve(this.ei(o))}ei(e){const t=[];return e.forEach(r=>{const i=this.Zr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){nn(this.ti(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return Te.forEach(t.mutations,i=>{const a=new Br(i.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Yr=r})}rr(e){}containsKey(e,t){const r=new Br(t,0),i=this.Yr.firstAfterOrEqual(r);return Te.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,Te.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IV{constructor(e){this.ni=e,this.docs=function(){return new Bn(Ze.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),a=i?i.size:0,s=this.ni(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return Te.resolve(r?r.document.mutableCopy():ci.newInvalidDocument(t))}getEntries(e,t){let r=vo();return t.forEach(i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():ci.newInvalidDocument(i))}),Te.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let a=vo();const s=t.path,o=new Ze(s.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(o);for(;c.hasNext();){const{key:d,value:{document:f}}=c.getNext();if(!s.isPrefixOf(d.path))break;d.path.length>s.length+1||rB(nB(f),r)<=0||(i.has(f.key)||Rm(t,f))&&(a=a.insert(f.key,f.mutableCopy()))}return Te.resolve(a)}getAllFromCollectionGroup(e,t,r,i){lt(9500)}ri(e,t){return Te.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new DV(this)}getSize(e){return Te.resolve(this.size)}}class DV extends _V{constructor(e){super(),this.Or=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Or.addEntry(e,i)):this.Or.removeEntry(r)}),Te.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RV{constructor(e){this.persistence=e,this.ii=new Jc(t=>t_(t),n_),this.lastRemoteSnapshotVersion=ft.min(),this.highestTargetId=0,this.si=0,this.oi=new o_,this.targetCount=0,this._i=jd.ar()}forEachTarget(e,t){return this.ii.forEach((r,i)=>t(i)),Te.resolve()}getLastRemoteSnapshotVersion(e){return Te.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Te.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),Te.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.si&&(this.si=t),Te.resolve()}hr(e){this.ii.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this._i=new jd(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,Te.resolve()}updateTargetData(e,t){return this.hr(t),Te.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,Te.resolve()}removeTargets(e,t,r){let i=0;const a=[];return this.ii.forEach((s,o)=>{o.sequenceNumber<=t&&r.get(o.targetId)===null&&(this.ii.delete(s),a.push(this.removeMatchingKeysForTargetId(e,o.targetId)),i++)}),Te.waitFor(a).next(()=>i)}getTargetCount(e){return Te.resolve(this.targetCount)}getTargetData(e,t){const r=this.ii.get(t)||null;return Te.resolve(r)}addMatchingKeys(e,t,r){return this.oi.Kr(t,r),Te.resolve()}removeMatchingKeys(e,t,r){this.oi.Gr(t,r);const i=this.persistence.referenceDelegate,a=[];return i&&t.forEach(s=>{a.push(i.markPotentiallyOrphaned(e,s))}),Te.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),Te.resolve()}getMatchingKeysForTargetId(e,t){const r=this.oi.Jr(t);return Te.resolve(r)}containsKey(e,t){return Te.resolve(this.oi.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HM{constructor(e,t){this.ai={},this.overlays={},this.ui=new Sm(0),this.ci=!1,this.ci=!0,this.li=new TV,this.referenceDelegate=e(this),this.hi=new RV(this),this.indexManager=new pV,this.remoteDocumentCache=function(i){return new IV(i)}(r=>this.referenceDelegate.Pi(r)),this.serializer=new fV(t),this.Ti=new EV(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new SV,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ai[e.toKey()];return r||(r=new CV(t,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,r){ze("MemoryPersistence","Starting transaction:",e);const i=new MV(this.ui.next());return this.referenceDelegate.Ii(),r(i).next(a=>this.referenceDelegate.di(i).next(()=>a)).toPromise().then(a=>(i.raiseOnCommittedEvent(),a))}Ei(e,t){return Te.or(Object.values(this.ai).map(r=>()=>r.containsKey(e,t)))}}class MV extends aB{constructor(e){super(),this.currentSequenceNumber=e}}class l_{constructor(e){this.persistence=e,this.Ai=new o_,this.Ri=null}static Vi(e){return new l_(e)}get mi(){if(this.Ri)return this.Ri;throw lt(60996)}addReference(e,t,r){return this.Ai.addReference(r,t),this.mi.delete(r.toString()),Te.resolve()}removeReference(e,t,r){return this.Ai.removeReference(r,t),this.mi.add(r.toString()),Te.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),Te.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach(i=>this.mi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(a=>this.mi.add(a.toString()))}).next(()=>r.removeTargetData(e,t))}Ii(){this.Ri=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Te.forEach(this.mi,r=>{const i=Ze.fromPath(r);return this.fi(e,i).next(a=>{a||t.removeEntry(i,ft.min())})}).next(()=>(this.Ri=null,t.apply(e)))}updateLimboDocument(e,t){return this.fi(e,t).next(r=>{r?this.mi.delete(t.toString()):this.mi.add(t.toString())})}Pi(e){return 0}fi(e,t){return Te.or([()=>Te.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class D1{constructor(e,t){this.persistence=e,this.gi=new Jc(r=>lB(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=wV(this,t)}static Vi(e,t){return new D1(e,t)}Ii(){}di(e){return Te.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){const t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}yr(e){let t=0;return this.gr(e,r=>{t++}).next(()=>t)}gr(e,t){return Te.forEach(this.gi,(r,i)=>this.Sr(e,r,i).next(a=>a?Te.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const i=this.persistence.getRemoteDocumentCache(),a=i.newChangeBuffer();return i.ri(e,s=>this.Sr(e,s,t).next(o=>{o||(r++,a.removeEntry(s,ft.min()))})).next(()=>a.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),Te.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),Te.resolve()}removeReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),Te.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),Te.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=r1(e.data.value)),t}Sr(e,t,r){return Te.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const i=this.gi.get(t);return Te.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c_{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Is=r,this.ds=i}static Es(e,t){let r=Ot(),i=Ot();for(const a of t.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new c_(e,t.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OV{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PV{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=function(){return u5()?8:sB(hi())>0?6:4}()}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,r,i){const a={result:null};return this.ps(e,t).next(s=>{a.result=s}).next(()=>{if(!a.result)return this.ys(e,t,i,r).next(s=>{a.result=s})}).next(()=>{if(a.result)return;const s=new OV;return this.ws(e,t,s).next(o=>{if(a.result=o,this.Rs)return this.Ss(e,t,s,o.size)})}).next(()=>a.result)}Ss(e,t,r,i){return r.documentReadCount<this.Vs?(ld()<=Mt.DEBUG&&ze("QueryEngine","SDK will not create cache indexes for query:",cd(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),Te.resolve()):(ld()<=Mt.DEBUG&&ze("QueryEngine","Query:",cd(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.fs*i?(ld()<=Mt.DEBUG&&ze("QueryEngine","The SDK decides to create cache indexes for query:",cd(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ws(t))):Te.resolve())}ps(e,t){if(wC(t))return Te.resolve(null);let r=ws(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=T1(t,null,"F"),r=ws(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(a=>{const s=Ot(...a);return this.gs.getDocuments(e,s).next(o=>this.indexManager.getMinOffset(e,r).next(c=>{const d=this.bs(t,o);return this.Ds(t,d,s,c.readTime)?this.ps(e,T1(t,null,"F")):this.vs(e,d,t,c)}))})))}ys(e,t,r,i){return wC(t)||i.isEqual(ft.min())?Te.resolve(null):this.gs.getDocuments(e,r).next(a=>{const s=this.bs(t,a);return this.Ds(t,s,r,i)?Te.resolve(null):(ld()<=Mt.DEBUG&&ze("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),cd(t)),this.vs(e,s,t,tB(i,a0)).next(o=>o))})}bs(e,t){let r=new Ir(wM(e));return t.forEach((i,a)=>{Rm(e,a)&&(r=r.add(a))}),r}Ds(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const a=e.limitType==="F"?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}ws(e,t,r){return ld()<=Mt.DEBUG&&ze("QueryEngine","Using full collection scan to execute query:",cd(t)),this.gs.getDocumentsMatchingQuery(e,t,Il.min(),r)}vs(e,t,r,i){return this.gs.getDocumentsMatchingQuery(e,r,i).next(a=>(t.forEach(s=>{a=a.insert(s.key,s)}),a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u_="LocalStore",kV=3e8;class NV{constructor(e,t,r,i){this.persistence=e,this.Cs=t,this.serializer=i,this.Fs=new Bn(At),this.Ms=new Jc(a=>t_(a),n_),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new AV(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Fs))}}function LV(n,e,t,r){return new NV(n,e,t,r)}async function zM(n,e){const t=gt(n);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(a=>(i=a,t.Ns(e),t.mutationQueue.getAllMutationBatches(r))).next(a=>{const s=[],o=[];let c=Ot();for(const d of i){s.push(d.batchId);for(const f of d.mutations)c=c.add(f.key)}for(const d of a){o.push(d.batchId);for(const f of d.mutations)c=c.add(f.key)}return t.localDocuments.getDocuments(r,c).next(d=>({Bs:d,removedBatchIds:s,addedBatchIds:o}))})})}function BV(n,e){const t=gt(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),a=t.Os.newChangeBuffer({trackRemovals:!0});return function(o,c,d,f){const p=d.batch,g=p.keys();let y=Te.resolve();return g.forEach(v=>{y=y.next(()=>f.getEntry(c,v)).next(b=>{const A=d.docVersions.get(v);nn(A!==null,48541),b.version.compareTo(A)<0&&(p.applyToRemoteDocument(b,d),b.isValidDocument()&&(b.setReadTime(d.commitVersion),f.addEntry(b)))})}),y.next(()=>o.mutationQueue.removeMutationBatch(c,p))}(t,r,e,a).next(()=>a.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(o){let c=Ot();for(let d=0;d<o.mutationResults.length;++d)o.mutationResults[d].transformResults.length>0&&(c=c.add(o.batch.mutations[d].key));return c}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function $M(n){const e=gt(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.hi.getLastRemoteSnapshotVersion(t))}function VV(n,e){const t=gt(n),r=e.snapshotVersion;let i=t.Fs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const s=t.Os.newChangeBuffer({trackRemovals:!0});i=t.Fs;const o=[];e.targetChanges.forEach((f,p)=>{const g=i.get(p);if(!g)return;o.push(t.hi.removeMatchingKeys(a,f.removedDocuments,p).next(()=>t.hi.addMatchingKeys(a,f.addedDocuments,p)));let y=g.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(p)!==null?y=y.withResumeToken(ni.EMPTY_BYTE_STRING,ft.min()).withLastLimboFreeSnapshotVersion(ft.min()):f.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(f.resumeToken,r)),i=i.insert(p,y),function(b,A,E){return b.resumeToken.approximateByteSize()===0||A.snapshotVersion.toMicroseconds()-b.snapshotVersion.toMicroseconds()>=kV?!0:E.addedDocuments.size+E.modifiedDocuments.size+E.removedDocuments.size>0}(g,y,f)&&o.push(t.hi.updateTargetData(a,y))});let c=vo(),d=Ot();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&o.push(t.persistence.referenceDelegate.updateLimboDocument(a,f))}),o.push(FV(a,s,e.documentUpdates).next(f=>{c=f.Ls,d=f.ks})),!r.isEqual(ft.min())){const f=t.hi.getLastRemoteSnapshotVersion(a).next(p=>t.hi.setTargetsMetadata(a,a.currentSequenceNumber,r));o.push(f)}return Te.waitFor(o).next(()=>s.apply(a)).next(()=>t.localDocuments.getLocalViewOfDocuments(a,c,d)).next(()=>c)}).then(a=>(t.Fs=i,a))}function FV(n,e,t){let r=Ot(),i=Ot();return t.forEach(a=>r=r.add(a)),e.getEntries(n,r).next(a=>{let s=vo();return t.forEach((o,c)=>{const d=a.get(o);c.isFoundDocument()!==d.isFoundDocument()&&(i=i.add(o)),c.isNoDocument()&&c.version.isEqual(ft.min())?(e.removeEntry(o,c.readTime),s=s.insert(o,c)):!d.isValidDocument()||c.version.compareTo(d.version)>0||c.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(c),s=s.insert(o,c)):ze(u_,"Ignoring outdated watch update for ",o,". Current version:",d.version," Watch version:",c.version)}),{Ls:s,ks:i}})}function jV(n,e){const t=gt(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=Zw),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function UV(n,e){const t=gt(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.hi.getTargetData(r,e).next(a=>a?(i=a,Te.resolve(i)):t.hi.allocateTargetId(r).next(s=>(i=new vl(e,s,"TargetPurposeListen",r.currentSequenceNumber),t.hi.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.Fs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Fs=t.Fs.insert(r.targetId,r),t.Ms.set(e,r.targetId)),r})}async function U2(n,e,t){const r=gt(n),i=r.Fs.get(e),a=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",a,s=>r.persistence.referenceDelegate.removeTarget(s,i))}catch(s){if(!of(s))throw s;ze(u_,`Failed to update sequence numbers for target ${e}: ${s}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(i.target)}function PC(n,e,t){const r=gt(n);let i=ft.min(),a=Ot();return r.persistence.runTransaction("Execute query","readwrite",s=>function(c,d,f){const p=gt(c),g=p.Ms.get(f);return g!==void 0?Te.resolve(p.Fs.get(g)):p.hi.getTargetData(d,f)}(r,s,ws(e)).next(o=>{if(o)return i=o.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(s,o.targetId).next(c=>{a=c})}).next(()=>r.Cs.getDocumentsMatchingQuery(s,e,t?i:ft.min(),t?a:Ot())).next(o=>(HV(r,CB(e),o),{documents:o,qs:a})))}function HV(n,e,t){let r=n.xs.get(e)||ft.min();t.forEach((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),n.xs.set(e,r)}class kC{constructor(){this.activeTargetIds=PB()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class zV{constructor(){this.Fo=new kC,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,r){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new kC,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $V{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NC="ConnectivityMonitor";class LC{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){ze(NC,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){ze(NC,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Dg=null;function H2(){return Dg===null?Dg=function(){return 268435456+Math.round(2147483648*Math.random())}():Dg++,"0x"+Dg.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dx="RestConnection",GV={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class WV{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.Ko=this.databaseId.database===A1?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,t,r,i,a){const s=H2(),o=this.Go(e,t.toUriEncodedString());ze(Dx,`Sending RPC '${e}' ${s}:`,o,r);const c={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(c,i,a);const{host:d}=new URL(o),f=tf(d);return this.jo(e,o,c,r,f).then(p=>(ze(Dx,`Received RPC '${e}' ${s}: `,p),p),p=>{throw Cl(Dx,`RPC '${e}' ${s} failed with error: `,p,"url: ",o,"request:",r),p})}Jo(e,t,r,i,a,s){return this.Wo(e,t,r,i,a)}zo(e,t,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+af}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,a)=>e[a]=i),r&&r.headers.forEach((i,a)=>e[a]=i)}Go(e,t){const r=GV[e];return`${this.$o}/v1/${t}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YV{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ii="WebChannelConnection";class qV extends WV{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,r,i,a){const s=H2();return new Promise((o,c)=>{const d=new YR;d.setWithCredentials(!0),d.listenOnce(qR.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case n1.NO_ERROR:const p=d.getResponseJson();ze(ii,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(p)),o(p);break;case n1.TIMEOUT:ze(ii,`RPC '${e}' ${s} timed out`),c(new Fe(be.DEADLINE_EXCEEDED,"Request time out"));break;case n1.HTTP_ERROR:const g=d.getStatus();if(ze(ii,`RPC '${e}' ${s} failed with status:`,g,"response text:",d.getResponseText()),g>0){let y=d.getResponseJson();Array.isArray(y)&&(y=y[0]);const v=y==null?void 0:y.error;if(v&&v.status&&v.message){const b=function(E){const T=E.toLowerCase().replace(/_/g,"-");return Object.values(be).indexOf(T)>=0?T:be.UNKNOWN}(v.status);c(new Fe(b,v.message))}else c(new Fe(be.UNKNOWN,"Server responded with status "+d.getStatus()))}else c(new Fe(be.UNAVAILABLE,"Connection failed."));break;default:lt(9055,{c_:e,streamId:s,l_:d.getLastErrorCode(),h_:d.getLastError()})}}finally{ze(ii,`RPC '${e}' ${s} completed.`)}});const f=JSON.stringify(i);ze(ii,`RPC '${e}' ${s} sending request:`,i),d.send(t,"POST",f,r,15)})}P_(e,t,r){const i=H2(),a=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=QR(),o=KR(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(c.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(c.useFetchStreams=!0),this.zo(c.initMessageHeaders,t,r),c.encodeInitMessageHeaders=!0;const f=a.join("");ze(ii,`Creating RPC '${e}' stream ${i}: ${f}`,c);const p=s.createWebChannel(f,c);this.T_(p);let g=!1,y=!1;const v=new YV({Ho:A=>{y?ze(ii,`Not sending because RPC '${e}' stream ${i} is closed:`,A):(g||(ze(ii,`Opening RPC '${e}' stream ${i} transport.`),p.open(),g=!0),ze(ii,`RPC '${e}' stream ${i} sending:`,A),p.send(A))},Yo:()=>p.close()}),b=(A,E,T)=>{A.listen(E,C=>{try{T(C)}catch(D){setTimeout(()=>{throw D},0)}})};return b(p,kh.EventType.OPEN,()=>{y||(ze(ii,`RPC '${e}' stream ${i} transport opened.`),v.s_())}),b(p,kh.EventType.CLOSE,()=>{y||(y=!0,ze(ii,`RPC '${e}' stream ${i} transport closed`),v.__(),this.I_(p))}),b(p,kh.EventType.ERROR,A=>{y||(y=!0,Cl(ii,`RPC '${e}' stream ${i} transport errored. Name:`,A.name,"Message:",A.message),v.__(new Fe(be.UNAVAILABLE,"The operation could not be completed")))}),b(p,kh.EventType.MESSAGE,A=>{var E;if(!y){const T=A.data[0];nn(!!T,16349);const C=T,D=(C==null?void 0:C.error)||((E=C[0])===null||E===void 0?void 0:E.error);if(D){ze(ii,`RPC '${e}' stream ${i} received error:`,D);const O=D.status;let N=function(I){const B=cr[I];if(B!==void 0)return MM(B)}(O),M=D.message;N===void 0&&(N=be.INTERNAL,M="Unknown error status: "+O+" with message "+D.message),y=!0,v.__(new Fe(N,M)),p.close()}else ze(ii,`RPC '${e}' stream ${i} received:`,T),v.a_(T)}}),b(o,XR.STAT_EVENT,A=>{A.stat===R2.PROXY?ze(ii,`RPC '${e}' stream ${i} detected buffering proxy`):A.stat===R2.NOPROXY&&ze(ii,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{v.o_()},0),v}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(t=>t===e)}}function Rx(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nm(n){return new ZB(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GM{constructor(e,t,r=1e3,i=1.5,a=6e4){this.Fi=e,this.timerId=t,this.d_=r,this.E_=i,this.A_=a,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const t=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),i=Math.max(0,t-r);i>0&&ze("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,i,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BC="PersistentStream";class WM{constructor(e,t,r,i,a,s,o,c){this.Fi=e,this.w_=r,this.S_=i,this.connection=a,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=c,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new GM(e,t)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():t&&t.code===be.RESOURCE_EXHAUSTED?(yo(t.toString()),yo("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===be.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(t)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.b_===t&&this.W_(r,i)},r=>{e(()=>{const i=new Fe(be.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(i)})})}W_(e,t){const r=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(i=>{r(()=>this.G_(i))}),this.stream.onMessage(i=>{r(()=>++this.C_==1?this.j_(i):this.onNext(i))})}O_(){this.state=5,this.F_.g_(async()=>{this.state=0,this.start()})}G_(e){return ze(BC,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget(()=>this.b_===e?t():(ze(BC,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class XV extends WM{constructor(e,t,r,i,a,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,s),this.serializer=a}z_(e,t){return this.connection.P_("Listen",e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const t=tV(this.serializer,e),r=function(a){if(!("targetChange"in a))return ft.min();const s=a.targetChange;return s.targetIds&&s.targetIds.length?ft.min():s.readTime?_s(s.readTime):ft.min()}(e);return this.listener.J_(t,r)}H_(e){const t={};t.database=j2(this.serializer),t.addTarget=function(a,s){let o;const c=s.target;if(o=N2(c)?{documents:iV(a,c)}:{query:aV(a,c).Vt},o.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){o.resumeToken=kM(a,s.resumeToken);const d=B2(a,s.expectedCount);d!==null&&(o.expectedCount=d)}else if(s.snapshotVersion.compareTo(ft.min())>0){o.readTime=I1(a,s.snapshotVersion.toTimestamp());const d=B2(a,s.expectedCount);d!==null&&(o.expectedCount=d)}return o}(this.serializer,e);const r=oV(this.serializer,e);r&&(t.labels=r),this.k_(t)}Y_(e){const t={};t.database=j2(this.serializer),t.removeTarget=e,this.k_(t)}}class KV extends WM{constructor(e,t,r,i,a,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,s),this.serializer=a}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_("Write",e,t)}j_(e){return nn(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,nn(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){nn(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const t=rV(e.writeResults,e.commitTime),r=_s(e.commitTime);return this.listener.ta(r,t)}na(){const e={};e.database=j2(this.serializer),this.k_(e)}X_(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>nV(this.serializer,r))};this.k_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QV{}class ZV extends QV{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ra=!1}ia(){if(this.ra)throw new Fe(be.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,r,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,s])=>this.connection.Wo(e,V2(t,r),i,a,s)).catch(a=>{throw a.name==="FirebaseError"?(a.code===be.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Fe(be.UNKNOWN,a.toString())})}Jo(e,t,r,i,a){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Jo(e,V2(t,r),i,s,o,a)).catch(s=>{throw s.name==="FirebaseError"?(s.code===be.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Fe(be.UNKNOWN,s.toString())})}terminate(){this.ra=!0,this.connection.terminate()}}class JV{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(yo(t),this._a=!1):ze("OnlineStateTracker",t)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yc="RemoteStore";class eF{constructor(e,t,r,i,a){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=a,this.Ea.xo(s=>{r.enqueueAndForget(async()=>{eu(this)&&(ze(Yc,"Restarting streams for network reachability change."),await async function(c){const d=gt(c);d.Ia.add(4),await N0(d),d.Aa.set("Unknown"),d.Ia.delete(4),await Lm(d)}(this))})}),this.Aa=new JV(r,i)}}async function Lm(n){if(eu(n))for(const e of n.da)await e(!0)}async function N0(n){for(const e of n.da)await e(!1)}function YM(n,e){const t=gt(n);t.Ta.has(e.targetId)||(t.Ta.set(e.targetId,e),p_(t)?h_(t):lf(t).x_()&&f_(t,e))}function d_(n,e){const t=gt(n),r=lf(t);t.Ta.delete(e),r.x_()&&qM(t,e),t.Ta.size===0&&(r.x_()?r.B_():eu(t)&&t.Aa.set("Unknown"))}function f_(n,e){if(n.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ft.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}lf(n).H_(e)}function qM(n,e){n.Ra.$e(e),lf(n).Y_(e)}function h_(n){n.Ra=new qB({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.Ta.get(e)||null,lt:()=>n.datastore.serializer.databaseId}),lf(n).start(),n.Aa.aa()}function p_(n){return eu(n)&&!lf(n).M_()&&n.Ta.size>0}function eu(n){return gt(n).Ia.size===0}function XM(n){n.Ra=void 0}async function tF(n){n.Aa.set("Online")}async function nF(n){n.Ta.forEach((e,t)=>{f_(n,e)})}async function rF(n,e){XM(n),p_(n)?(n.Aa.la(e),h_(n)):n.Aa.set("Unknown")}async function iF(n,e,t){if(n.Aa.set("Online"),e instanceof PM&&e.state===2&&e.cause)try{await async function(i,a){const s=a.cause;for(const o of a.targetIds)i.Ta.has(o)&&(await i.remoteSyncer.rejectListen(o,s),i.Ta.delete(o),i.Ra.removeTarget(o))}(n,e)}catch(r){ze(Yc,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await R1(n,r)}else if(e instanceof s1?n.Ra.Ye(e):e instanceof OM?n.Ra.it(e):n.Ra.et(e),!t.isEqual(ft.min()))try{const r=await $M(n.localStore);t.compareTo(r)>=0&&await function(a,s){const o=a.Ra.Pt(s);return o.targetChanges.forEach((c,d)=>{if(c.resumeToken.approximateByteSize()>0){const f=a.Ta.get(d);f&&a.Ta.set(d,f.withResumeToken(c.resumeToken,s))}}),o.targetMismatches.forEach((c,d)=>{const f=a.Ta.get(c);if(!f)return;a.Ta.set(c,f.withResumeToken(ni.EMPTY_BYTE_STRING,f.snapshotVersion)),qM(a,c);const p=new vl(f.target,c,d,f.sequenceNumber);f_(a,p)}),a.remoteSyncer.applyRemoteEvent(o)}(n,t)}catch(r){ze(Yc,"Failed to raise snapshot:",r),await R1(n,r)}}async function R1(n,e,t){if(!of(e))throw e;n.Ia.add(1),await N0(n),n.Aa.set("Offline"),t||(t=()=>$M(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{ze(Yc,"Retrying IndexedDB access"),await t(),n.Ia.delete(1),await Lm(n)})}function KM(n,e){return e().catch(t=>R1(n,t,e))}async function Bm(n){const e=gt(n),t=Ol(e);let r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:Zw;for(;aF(e);)try{const i=await jV(e.localStore,r);if(i===null){e.Pa.length===0&&t.B_();break}r=i.batchId,sF(e,i)}catch(i){await R1(e,i)}QM(e)&&ZM(e)}function aF(n){return eu(n)&&n.Pa.length<10}function sF(n,e){n.Pa.push(e);const t=Ol(n);t.x_()&&t.Z_&&t.X_(e.mutations)}function QM(n){return eu(n)&&!Ol(n).M_()&&n.Pa.length>0}function ZM(n){Ol(n).start()}async function oF(n){Ol(n).na()}async function lF(n){const e=Ol(n);for(const t of n.Pa)e.X_(t.mutations)}async function cF(n,e,t){const r=n.Pa.shift(),i=i_.from(r,e,t);await KM(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),await Bm(n)}async function uF(n,e){e&&Ol(n).Z_&&await async function(r,i){if(function(s){return WB(s)&&s!==be.ABORTED}(i.code)){const a=r.Pa.shift();Ol(r).N_(),await KM(r,()=>r.remoteSyncer.rejectFailedWrite(a.batchId,i)),await Bm(r)}}(n,e),QM(n)&&ZM(n)}async function VC(n,e){const t=gt(n);t.asyncQueue.verifyOperationInProgress(),ze(Yc,"RemoteStore received new credentials");const r=eu(t);t.Ia.add(3),await N0(t),r&&t.Aa.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ia.delete(3),await Lm(t)}async function dF(n,e){const t=gt(n);e?(t.Ia.delete(2),await Lm(t)):e||(t.Ia.add(2),await N0(t),t.Aa.set("Unknown"))}function lf(n){return n.Va||(n.Va=function(t,r,i){const a=gt(t);return a.ia(),new XV(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)}(n.datastore,n.asyncQueue,{Zo:tF.bind(null,n),e_:nF.bind(null,n),n_:rF.bind(null,n),J_:iF.bind(null,n)}),n.da.push(async e=>{e?(n.Va.N_(),p_(n)?h_(n):n.Aa.set("Unknown")):(await n.Va.stop(),XM(n))})),n.Va}function Ol(n){return n.ma||(n.ma=function(t,r,i){const a=gt(t);return a.ia(),new KV(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)}(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),e_:oF.bind(null,n),n_:uF.bind(null,n),ea:lF.bind(null,n),ta:cF.bind(null,n)}),n.da.push(async e=>{e?(n.ma.N_(),await Bm(n)):(await n.ma.stop(),n.Pa.length>0&&(ze(Yc,`Stopping write stream with ${n.Pa.length} pending writes`),n.Pa=[]))})),n.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g_{constructor(e,t,r,i,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new fo,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,a){const s=Date.now()+r,o=new g_(e,t,s,i,a);return o.start(r),o}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Fe(be.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function m_(n,e){if(yo("AsyncQueue",`${e}: ${n}`),of(n))return new Fe(be.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cd{static emptySet(e){return new Cd(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||Ze.comparator(t.key,r.key):(t,r)=>Ze.comparator(t.key,r.key),this.keyedMap=Nh(),this.sortedSet=new Bn(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Cd)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new Cd;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FC{constructor(){this.fa=new Bn(Ze.comparator)}track(e){const t=e.doc.key,r=this.fa.get(t);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(t,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(t):e.type===1&&r.type===2?this.fa=this.fa.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):lt(63341,{At:e,ga:r}):this.fa=this.fa.insert(t,e)}pa(){const e=[];return this.fa.inorderTraversal((t,r)=>{e.push(r)}),e}}class Ud{constructor(e,t,r,i,a,s,o,c,d){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=c,this.hasCachedResults=d}static fromInitialDocuments(e,t,r,i,a){const s=[];return t.forEach(o=>{s.push({type:0,doc:o})}),new Ud(e,t,Cd.emptySet(t),s,r,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Dm(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fF{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}}class hF{constructor(){this.queries=jC(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(t,r){const i=gt(t),a=i.queries;i.queries=jC(),a.forEach((s,o)=>{for(const c of o.wa)c.onError(r)})})(this,new Fe(be.ABORTED,"Firestore shutting down"))}}function jC(){return new Jc(n=>xM(n),Dm)}async function y_(n,e){const t=gt(n);let r=3;const i=e.query;let a=t.queries.get(i);a?!a.Sa()&&e.ba()&&(r=2):(a=new fF,r=e.ba()?0:1);try{switch(r){case 0:a.ya=await t.onListen(i,!0);break;case 1:a.ya=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(s){const o=m_(s,`Initialization of query '${cd(e.query)}' failed`);return void e.onError(o)}t.queries.set(i,a),a.wa.push(e),e.va(t.onlineState),a.ya&&e.Ca(a.ya)&&x_(t)}async function v_(n,e){const t=gt(n),r=e.query;let i=3;const a=t.queries.get(r);if(a){const s=a.wa.indexOf(e);s>=0&&(a.wa.splice(s,1),a.wa.length===0?i=e.ba()?0:1:!a.Sa()&&e.ba()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function pF(n,e){const t=gt(n);let r=!1;for(const i of e){const a=i.query,s=t.queries.get(a);if(s){for(const o of s.wa)o.Ca(i)&&(r=!0);s.ya=i}}r&&x_(t)}function gF(n,e,t){const r=gt(n),i=r.queries.get(e);if(i)for(const a of i.wa)a.onError(t);r.queries.delete(e)}function x_(n){n.Da.forEach(e=>{e.next()})}var z2,UC;(UC=z2||(z2={})).Fa="default",UC.Cache="cache";class w_{constructor(e,t,r){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Ud(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){if(!e.fromCache||!this.ba())return!0;const r=t!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}La(e){e=Ud.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==z2.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JM{constructor(e){this.key=e}}class e4{constructor(e){this.key=e}}class mF{constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=Ot(),this.mutatedKeys=Ot(),this.Xa=wM(e),this.eu=new Cd(this.Xa)}get tu(){return this.Ha}nu(e,t){const r=t?t.ru:new FC,i=t?t.eu:this.eu;let a=t?t.mutatedKeys:this.mutatedKeys,s=i,o=!1;const c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,d=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((f,p)=>{const g=i.get(f),y=Rm(this.query,p)?p:null,v=!!g&&this.mutatedKeys.has(g.key),b=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations);let A=!1;g&&y?g.data.isEqual(y.data)?v!==b&&(r.track({type:3,doc:y}),A=!0):this.iu(g,y)||(r.track({type:2,doc:y}),A=!0,(c&&this.Xa(y,c)>0||d&&this.Xa(y,d)<0)&&(o=!0)):!g&&y?(r.track({type:0,doc:y}),A=!0):g&&!y&&(r.track({type:1,doc:g}),A=!0,(c||d)&&(o=!0)),A&&(y?(s=s.add(y),a=b?a.add(f):a.delete(f)):(s=s.delete(f),a=a.delete(f)))}),this.query.limit!==null)for(;s.size>this.query.limit;){const f=this.query.limitType==="F"?s.last():s.first();s=s.delete(f.key),a=a.delete(f.key),r.track({type:1,doc:f})}return{eu:s,ru:r,Ds:o,mutatedKeys:a}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const a=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const s=e.ru.pa();s.sort((f,p)=>function(y,v){const b=A=>{switch(A){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return lt(20277,{At:A})}};return b(y)-b(v)}(f.type,p.type)||this.Xa(f.doc,p.doc)),this.su(r),i=i!=null&&i;const o=t&&!i?this.ou():[],c=this.Za.size===0&&this.current&&!i?1:0,d=c!==this.Ya;return this.Ya=c,s.length!==0||d?{snapshot:new Ud(this.query,e.eu,a,s,e.mutatedKeys,c===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:o}:{_u:o}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new FC,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(t=>this.Ha=this.Ha.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ha=this.Ha.delete(t)),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=Ot(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});const t=[];return e.forEach(r=>{this.Za.has(r)||t.push(new e4(r))}),this.Za.forEach(r=>{e.has(r)||t.push(new JM(r))}),t}uu(e){this.Ha=e.qs,this.Za=Ot();const t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return Ud.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const __="SyncEngine";class yF{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class vF{constructor(e){this.key=e,this.lu=!1}}class xF{constructor(e,t,r,i,a,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=s,this.hu={},this.Pu=new Jc(o=>xM(o),Dm),this.Tu=new Map,this.Iu=new Set,this.du=new Bn(Ze.comparator),this.Eu=new Map,this.Au=new o_,this.Ru={},this.Vu=new Map,this.mu=jd.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function wF(n,e,t=!0){const r=s4(n);let i;const a=r.Pu.get(e);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),i=a.view.cu()):i=await t4(r,e,t,!0),i}async function _F(n,e){const t=s4(n);await t4(t,e,!0,!1)}async function t4(n,e,t,r){const i=await UV(n.localStore,ws(e)),a=i.targetId,s=n.sharedClientState.addLocalQueryTarget(a,t);let o;return r&&(o=await bF(n,e,a,s==="current",i.resumeToken)),n.isPrimaryClient&&t&&YM(n.remoteStore,i),o}async function bF(n,e,t,r,i){n.gu=(p,g,y)=>async function(b,A,E,T){let C=A.view.nu(E);C.Ds&&(C=await PC(b.localStore,A.query,!1).then(({documents:M})=>A.view.nu(M,C)));const D=T&&T.targetChanges.get(A.targetId),O=T&&T.targetMismatches.get(A.targetId)!=null,N=A.view.applyChanges(C,b.isPrimaryClient,D,O);return zC(b,A.targetId,N._u),N.snapshot}(n,p,g,y);const a=await PC(n.localStore,e,!0),s=new mF(e,a.qs),o=s.nu(a.documents),c=k0.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),d=s.applyChanges(o,n.isPrimaryClient,c);zC(n,t,d._u);const f=new yF(e,t,s);return n.Pu.set(e,f),n.Tu.has(t)?n.Tu.get(t).push(e):n.Tu.set(t,[e]),d.snapshot}async function AF(n,e,t){const r=gt(n),i=r.Pu.get(e),a=r.Tu.get(i.targetId);if(a.length>1)return r.Tu.set(i.targetId,a.filter(s=>!Dm(s,e))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await U2(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&d_(r.remoteStore,i.targetId),$2(r,i.targetId)}).catch(sf)):($2(r,i.targetId),await U2(r.localStore,i.targetId,!0))}async function EF(n,e){const t=gt(n),r=t.Pu.get(e),i=t.Tu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),d_(t.remoteStore,r.targetId))}async function SF(n,e,t){const r=OF(n);try{const i=await function(s,o){const c=gt(s),d=Cn.now(),f=o.reduce((y,v)=>y.add(v.key),Ot());let p,g;return c.persistence.runTransaction("Locally write mutations","readwrite",y=>{let v=vo(),b=Ot();return c.Os.getEntries(y,f).next(A=>{v=A,v.forEach((E,T)=>{T.isValidDocument()||(b=b.add(E))})}).next(()=>c.localDocuments.getOverlayedDocuments(y,v)).next(A=>{p=A;const E=[];for(const T of o){const C=UB(T,p.get(T.key).overlayedDocument);C!=null&&E.push(new Vl(T.key,C,dM(C.value.mapValue),Si.exists(!0)))}return c.mutationQueue.addMutationBatch(y,d,E,o)}).next(A=>{g=A;const E=A.applyToLocalDocumentSet(p,b);return c.documentOverlayCache.saveOverlays(y,A.batchId,E)})}).then(()=>({batchId:g.batchId,changes:bM(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,o,c){let d=s.Ru[s.currentUser.toKey()];d||(d=new Bn(At)),d=d.insert(o,c),s.Ru[s.currentUser.toKey()]=d}(r,i.batchId,t),await L0(r,i.changes),await Bm(r.remoteStore)}catch(i){const a=m_(i,"Failed to persist write");t.reject(a)}}async function n4(n,e){const t=gt(n);try{const r=await VV(t.localStore,e);e.targetChanges.forEach((i,a)=>{const s=t.Eu.get(a);s&&(nn(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?s.lu=!0:i.modifiedDocuments.size>0?nn(s.lu,14607):i.removedDocuments.size>0&&(nn(s.lu,42227),s.lu=!1))}),await L0(t,r,e)}catch(r){await sf(r)}}function HC(n,e,t){const r=gt(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const i=[];r.Pu.forEach((a,s)=>{const o=s.view.va(e);o.snapshot&&i.push(o.snapshot)}),function(s,o){const c=gt(s);c.onlineState=o;let d=!1;c.queries.forEach((f,p)=>{for(const g of p.wa)g.va(o)&&(d=!0)}),d&&x_(c)}(r.eventManager,e),i.length&&r.hu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function TF(n,e,t){const r=gt(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Eu.get(e),a=i&&i.key;if(a){let s=new Bn(Ze.comparator);s=s.insert(a,ci.newNoDocument(a,ft.min()));const o=Ot().add(a),c=new km(ft.min(),new Map,new Bn(At),s,o);await n4(r,c),r.du=r.du.remove(a),r.Eu.delete(e),b_(r)}else await U2(r.localStore,e,!1).then(()=>$2(r,e,t)).catch(sf)}async function CF(n,e){const t=gt(n),r=e.batch.batchId;try{const i=await BV(t.localStore,e);i4(t,r,null),r4(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await L0(t,i)}catch(i){await sf(i)}}async function IF(n,e,t){const r=gt(n);try{const i=await function(s,o){const c=gt(s);return c.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let f;return c.mutationQueue.lookupMutationBatch(d,o).next(p=>(nn(p!==null,37113),f=p.keys(),c.mutationQueue.removeMutationBatch(d,p))).next(()=>c.mutationQueue.performConsistencyCheck(d)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(d,f,o)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,f)).next(()=>c.localDocuments.getDocuments(d,f))})}(r.localStore,e);i4(r,e,t),r4(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await L0(r,i)}catch(i){await sf(i)}}function r4(n,e){(n.Vu.get(e)||[]).forEach(t=>{t.resolve()}),n.Vu.delete(e)}function i4(n,e,t){const r=gt(n);let i=r.Ru[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(t?a.reject(t):a.resolve(),i=i.remove(e)),r.Ru[r.currentUser.toKey()]=i}}function $2(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Tu.get(e))n.Pu.delete(r),t&&n.hu.pu(r,t);n.Tu.delete(e),n.isPrimaryClient&&n.Au.zr(e).forEach(r=>{n.Au.containsKey(r)||a4(n,r)})}function a4(n,e){n.Iu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(d_(n.remoteStore,t),n.du=n.du.remove(e),n.Eu.delete(t),b_(n))}function zC(n,e,t){for(const r of t)r instanceof JM?(n.Au.addReference(r.key,e),DF(n,r)):r instanceof e4?(ze(__,"Document no longer in limbo: "+r.key),n.Au.removeReference(r.key,e),n.Au.containsKey(r.key)||a4(n,r.key)):lt(19791,{yu:r})}function DF(n,e){const t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Iu.has(r)||(ze(__,"New document in limbo: "+t),n.Iu.add(r),b_(n))}function b_(n){for(;n.Iu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Iu.values().next().value;n.Iu.delete(e);const t=new Ze(yn.fromString(e)),r=n.mu.next();n.Eu.set(r,new vF(t)),n.du=n.du.insert(t,r),YM(n.remoteStore,new vl(ws(Im(t.path)),r,"TargetPurposeLimboResolution",Sm.ue))}}async function L0(n,e,t){const r=gt(n),i=[],a=[],s=[];r.Pu.isEmpty()||(r.Pu.forEach((o,c)=>{s.push(r.gu(c,e,t).then(d=>{var f;if((d||t)&&r.isPrimaryClient){const p=d?!d.fromCache:(f=t==null?void 0:t.targetChanges.get(c.targetId))===null||f===void 0?void 0:f.current;r.sharedClientState.updateQueryState(c.targetId,p?"current":"not-current")}if(d){i.push(d);const p=c_.Es(c.targetId,d);a.push(p)}}))}),await Promise.all(s),r.hu.J_(i),await async function(c,d){const f=gt(c);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>Te.forEach(d,g=>Te.forEach(g.Is,y=>f.persistence.referenceDelegate.addReference(p,g.targetId,y)).next(()=>Te.forEach(g.ds,y=>f.persistence.referenceDelegate.removeReference(p,g.targetId,y)))))}catch(p){if(!of(p))throw p;ze(u_,"Failed to update sequence numbers: "+p)}for(const p of d){const g=p.targetId;if(!p.fromCache){const y=f.Fs.get(g),v=y.snapshotVersion,b=y.withLastLimboFreeSnapshotVersion(v);f.Fs=f.Fs.insert(g,b)}}}(r.localStore,a))}async function RF(n,e){const t=gt(n);if(!t.currentUser.isEqual(e)){ze(__,"User change. New user:",e.toKey());const r=await zM(t.localStore,e);t.currentUser=e,function(a,s){a.Vu.forEach(o=>{o.forEach(c=>{c.reject(new Fe(be.CANCELLED,s))})}),a.Vu.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await L0(t,r.Bs)}}function MF(n,e){const t=gt(n),r=t.Eu.get(e);if(r&&r.lu)return Ot().add(r.key);{let i=Ot();const a=t.Tu.get(e);if(!a)return i;for(const s of a){const o=t.Pu.get(s);i=i.unionWith(o.view.tu)}return i}}function s4(n){const e=gt(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=n4.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=MF.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=TF.bind(null,e),e.hu.J_=pF.bind(null,e.eventManager),e.hu.pu=gF.bind(null,e.eventManager),e}function OF(n){const e=gt(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=CF.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=IF.bind(null,e),e}class M1{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Nm(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,t){return null}Fu(e,t){return null}vu(e){return LV(this.persistence,new PV,e.initialUser,this.serializer)}Du(e){return new HM(l_.Vi,this.serializer)}bu(e){return new zV}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}M1.provider={build:()=>new M1};class PF extends M1{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){nn(this.persistence.referenceDelegate instanceof D1,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new vV(r,e.asyncQueue,t)}Du(e){const t=this.cacheSizeBytes!==void 0?Oi.withCacheSize(this.cacheSizeBytes):Oi.DEFAULT;return new HM(r=>D1.Vi(r,t),this.serializer)}}class G2{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>HC(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=RF.bind(null,this.syncEngine),await dF(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new hF}()}createDatastore(e){const t=Nm(e.databaseInfo.databaseId),r=function(a){return new qV(a)}(e.databaseInfo);return function(a,s,o,c){return new ZV(a,s,o,c)}(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return function(r,i,a,s,o){return new eF(r,i,a,s,o)}(this.localStore,this.datastore,e.asyncQueue,t=>HC(this.syncEngine,t,0),function(){return LC.C()?new LC:new $V}())}createSyncEngine(e,t){return function(i,a,s,o,c,d,f){const p=new xF(i,a,s,o,c,d);return f&&(p.fu=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(i){const a=gt(i);ze(Yc,"RemoteStore shutting down."),a.Ia.add(5),await N0(a),a.Ea.shutdown(),a.Aa.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}G2.provider={build:()=>new G2};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A_{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):yo("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pl="FirestoreClient";class kF{constructor(e,t,r,i,a){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=li.UNAUTHENTICATED,this.clientId=Kw.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(r,async s=>{ze(Pl,"Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(ze(Pl,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new fo;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=m_(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Mx(n,e){n.asyncQueue.verifyOperationInProgress(),ze(Pl,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(async i=>{r.isEqual(i)||(await zM(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>{Cl("Terminating Firestore due to IndexedDb database deletion"),n.terminate().then(()=>{ze("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(i=>{Cl("Terminating Firestore due to IndexedDb database deletion failed",i)})}),n._offlineComponents=e}async function $C(n,e){n.asyncQueue.verifyOperationInProgress();const t=await NF(n);ze(Pl,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>VC(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>VC(e.remoteStore,i)),n._onlineComponents=e}async function NF(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ze(Pl,"Using user provided OfflineComponentProvider");try{await Mx(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(i){return i.name==="FirebaseError"?i.code===be.FAILED_PRECONDITION||i.code===be.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;Cl("Error using user provided cache. Falling back to memory cache: "+t),await Mx(n,new M1)}}else ze(Pl,"Using default OfflineComponentProvider"),await Mx(n,new PF(void 0));return n._offlineComponents}async function o4(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ze(Pl,"Using user provided OnlineComponentProvider"),await $C(n,n._uninitializedComponentsProvider._online)):(ze(Pl,"Using default OnlineComponentProvider"),await $C(n,new G2))),n._onlineComponents}function LF(n){return o4(n).then(e=>e.syncEngine)}async function O1(n){const e=await o4(n),t=e.eventManager;return t.onListen=wF.bind(null,e.syncEngine),t.onUnlisten=AF.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=_F.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=EF.bind(null,e.syncEngine),t}function BF(n,e,t={}){const r=new fo;return n.asyncQueue.enqueueAndForget(async()=>function(a,s,o,c,d){const f=new A_({next:g=>{f.Ou(),s.enqueueAndForget(()=>v_(a,p));const y=g.docs.has(o);!y&&g.fromCache?d.reject(new Fe(be.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&g.fromCache&&c&&c.source==="server"?d.reject(new Fe(be.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(g)},error:g=>d.reject(g)}),p=new w_(Im(o.path),f,{includeMetadataChanges:!0,ka:!0});return y_(a,p)}(await O1(n),n.asyncQueue,e,t,r)),r.promise}function VF(n,e,t={}){const r=new fo;return n.asyncQueue.enqueueAndForget(async()=>function(a,s,o,c,d){const f=new A_({next:g=>{f.Ou(),s.enqueueAndForget(()=>v_(a,p)),g.fromCache&&c.source==="server"?d.reject(new Fe(be.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(g)},error:g=>d.reject(g)}),p=new w_(o,f,{includeMetadataChanges:!0,ka:!0});return y_(a,p)}(await O1(n),n.asyncQueue,e,t,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l4(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GC=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c4="firestore.googleapis.com",WC=!0;class YC{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Fe(be.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=c4,this.ssl=WC}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:WC;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=UM;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<mV)throw new Fe(be.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}JL("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=l4((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new Fe(be.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new Fe(be.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new Fe(be.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class B0{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new YC({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Fe(be.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Fe(be.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new YC(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new $L;switch(r.type){case"firstParty":return new qL(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Fe(be.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=GC.get(t);r&&(ze("ComponentProvider","Removing Datastore"),GC.delete(t),r.terminate())}(this),Promise.resolve()}}function FF(n,e,t,r={}){var i;n=fi(n,B0);const a=tf(e),s=n._getSettings(),o=Object.assign(Object.assign({},s),{emulatorOptions:n._getEmulatorOptions()}),c=`${e}:${t}`;a&&(iR(`https://${c}`),aR("Firestore",!0)),s.host!==c4&&s.host!==c&&Cl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const d=Object.assign(Object.assign({},s),{host:c,ssl:a,emulatorOptions:r});if(!Hc(d,o)&&(n._setSettings(d),r.mockUserToken)){let f,p;if(typeof r.mockUserToken=="string")f=r.mockUserToken,p=li.MOCK_USER;else{f=t5(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);const g=r.mockUserToken.sub||r.mockUserToken.user_id;if(!g)throw new Fe(be.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new li(g)}n._authCredentials=new GL(new JR(f,p))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rs{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Rs(this.firestore,e,this._query)}}class $n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new El(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new $n(this.firestore,e,this._key)}toJSON(){return{type:$n._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(O0(t,$n._jsonSchema))return new $n(e,r||null,new Ze(yn.fromString(t.referencePath)))}}$n._jsonSchemaVersion="firestore/documentReference/1.0",$n._jsonSchema={type:hr("string",$n._jsonSchemaVersion),referencePath:hr("string")};class El extends Rs{constructor(e,t,r){super(e,t,Im(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new $n(this.firestore,null,new Ze(e))}withConverter(e){return new El(this.firestore,e,this._path)}}function Fr(n,e,...t){if(n=pr(n),Qw("collection","path",e),n instanceof B0){const r=yn.fromString(e,...t);return sC(r),new El(n,null,r)}{if(!(n instanceof $n||n instanceof El))throw new Fe(be.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(yn.fromString(e,...t));return sC(r),new El(n.firestore,null,r)}}function xl(n,e){if(n=fi(n,B0),Qw("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Fe(be.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Rs(n,null,function(r){return new Zc(yn.emptyPath(),r)}(e))}function xo(n,e,...t){if(n=pr(n),arguments.length===1&&(e=Kw.newId()),Qw("doc","path",e),n instanceof B0){const r=yn.fromString(e,...t);return aC(r),new $n(n,null,new Ze(r))}{if(!(n instanceof $n||n instanceof El))throw new Fe(be.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(yn.fromString(e,...t));return aC(r),new $n(n.firestore,n instanceof El?n.converter:null,new Ze(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qC="AsyncQueue";class XC{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new GM(this,"async_queue_retry"),this.oc=()=>{const r=Rx();r&&ze(qC,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;const t=Rx();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const t=Rx();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});const t=new fo;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!of(e))throw e;ze(qC,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(e){const t=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,yo("INTERNAL UNHANDLED ERROR: ",KC(r)),r}).then(r=>(this.nc=!1,r))));return this._c=t,t}enqueueAfterDelay(e,t,r){this.ac(),this.sc.indexOf(e)>-1&&(t=0);const i=g_.createAndSchedule(this,e,t,r,a=>this.lc(a));return this.ec.push(i),i}ac(){this.tc&&lt(47125,{hc:KC(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.ec)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){const t=this.ec.indexOf(e);this.ec.splice(t,1)}}function KC(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QC(n){return function(t,r){if(typeof t!="object"||t===null)return!1;const i=t;for(const a of r)if(a in i&&typeof i[a]=="function")return!0;return!1}(n,["next","error","complete"])}class Is extends B0{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new XC,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new XC(e),this._firestoreClient=void 0,await e}}}function jF(n,e){const t=typeof n=="object"?n:cR(),r=typeof n=="string"?n:A1,i=Fw(t,"firestore").getImmediate({identifier:r});if(!i._initialized){const a=JN("firestore");a&&FF(i,...a)}return i}function V0(n){if(n._terminated)throw new Fe(be.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||UF(n),n._firestoreClient}function UF(n){var e,t,r;const i=n._freezeSettings(),a=function(o,c,d,f){return new dB(o,c,d,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,l4(f.experimentalLongPollingOptions),f.useFetchStreams,f.isUsingEmulator)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new kF(n._authCredentials,n._appCheckCredentials,n._queue,a,n._componentsProvider&&function(o){const c=o==null?void 0:o._online.build();return{_offline:o==null?void 0:o._offline.build(c),_online:c}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ha{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ha(ni.fromBase64String(e))}catch(t){throw new Fe(be.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new ha(ni.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:ha._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(O0(e,ha._jsonSchema))return ha.fromBase64String(e.bytes)}}ha._jsonSchemaVersion="firestore/bytes/1.0",ha._jsonSchema={type:hr("string",ha._jsonSchemaVersion),bytes:hr("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F0{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Fe(be.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Zr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vm{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bs{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Fe(be.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Fe(be.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return At(this._lat,e._lat)||At(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:bs._jsonSchemaVersion}}static fromJSON(e){if(O0(e,bs._jsonSchema))return new bs(e.latitude,e.longitude)}}bs._jsonSchemaVersion="firestore/geoPoint/1.0",bs._jsonSchema={type:hr("string",bs._jsonSchemaVersion),latitude:hr("number"),longitude:hr("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class As{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let a=0;a<r.length;++a)if(r[a]!==i[a])return!1;return!0}(this._values,e._values)}toJSON(){return{type:As._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(O0(e,As._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new As(e.vectorValues);throw new Fe(be.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}As._jsonSchemaVersion="firestore/vectorValue/1.0",As._jsonSchema={type:hr("string",As._jsonSchemaVersion),vectorValues:hr("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HF=/^__.*__$/;class zF{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Vl(e,this.data,this.fieldMask,t,this.fieldTransforms):new P0(e,this.data,t,this.fieldTransforms)}}class u4{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Vl(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function d4(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw lt(40011,{Ec:n})}}class E_{constructor(e,t,r,i,a,s){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,a===void 0&&this.Ac(),this.fieldTransforms=a||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new E_(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Rc({path:r,mc:!1});return i.fc(e),i}gc(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Rc({path:r,mc:!1});return i.Ac(),i}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return P1(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(d4(this.Ec)&&HF.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class $F{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Nm(e)}Dc(e,t,r,i=!1){return new E_({Ec:e,methodName:t,bc:r,path:Zr.emptyPath(),mc:!1,Sc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function j0(n){const e=n._freezeSettings(),t=Nm(n._databaseId);return new $F(n._databaseId,!!e.ignoreUndefinedProperties,t)}function S_(n,e,t,r,i,a={}){const s=n.Dc(a.merge||a.mergeFields?2:0,e,t,i);C_("Data must be an object, but it was:",s,r);const o=p4(r,s);let c,d;if(a.merge)c=new Wi(s.fieldMask),d=s.fieldTransforms;else if(a.mergeFields){const f=[];for(const p of a.mergeFields){const g=W2(e,p,t);if(!s.contains(g))throw new Fe(be.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);m4(f,g)||f.push(g)}c=new Wi(f),d=s.fieldTransforms.filter(p=>c.covers(p.field))}else c=null,d=s.fieldTransforms;return new zF(new Pi(o),c,d)}class Fm extends Vm{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Fm}}class T_ extends Vm{_toFieldTransform(e){return new BB(e.path,new u0)}isEqual(e){return e instanceof T_}}function f4(n,e,t,r){const i=n.Dc(1,e,t);C_("Data must be an object, but it was:",i,r);const a=[],s=Pi.empty();Bl(r,(c,d)=>{const f=I_(e,c,t);d=pr(d);const p=i.gc(f);if(d instanceof Fm)a.push(f);else{const g=U0(d,p);g!=null&&(a.push(f),s.set(f,g))}});const o=new Wi(a);return new u4(s,o,i.fieldTransforms)}function h4(n,e,t,r,i,a){const s=n.Dc(1,e,t),o=[W2(e,r,t)],c=[i];if(a.length%2!=0)throw new Fe(be.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<a.length;g+=2)o.push(W2(e,a[g])),c.push(a[g+1]);const d=[],f=Pi.empty();for(let g=o.length-1;g>=0;--g)if(!m4(d,o[g])){const y=o[g];let v=c[g];v=pr(v);const b=s.gc(y);if(v instanceof Fm)d.push(y);else{const A=U0(v,b);A!=null&&(d.push(y),f.set(y,A))}}const p=new Wi(d);return new u4(f,p,s.fieldTransforms)}function GF(n,e,t,r=!1){return U0(t,n.Dc(r?4:3,e))}function U0(n,e){if(g4(n=pr(n)))return C_("Unsupported field value:",e,n),p4(n,e);if(n instanceof Vm)return function(r,i){if(!d4(i.Ec))throw i.wc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.wc(`${r._methodName}() is not currently supported inside arrays`);const a=r._toFieldTransform(i);a&&i.fieldTransforms.push(a)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return function(r,i){const a=[];let s=0;for(const o of r){let c=U0(o,i.yc(s));c==null&&(c={nullValue:"NULL_VALUE"}),a.push(c),s++}return{arrayValue:{values:a}}}(n,e)}return function(r,i){if((r=pr(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return kB(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const a=Cn.fromDate(r);return{timestampValue:I1(i.serializer,a)}}if(r instanceof Cn){const a=new Cn(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:I1(i.serializer,a)}}if(r instanceof bs)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof ha)return{bytesValue:kM(i.serializer,r._byteString)};if(r instanceof $n){const a=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(a))throw i.wc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:s_(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof As)return function(s,o){return{mapValue:{fields:{[cM]:{stringValue:uM},[E1]:{arrayValue:{values:s.toArray().map(d=>{if(typeof d!="number")throw o.wc("VectorValues must only contain numeric values.");return r_(o.serializer,d)})}}}}}}(r,i);throw i.wc(`Unsupported field value: ${Em(r)}`)}(n,e)}function p4(n,e){const t={};return rM(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Bl(n,(r,i)=>{const a=U0(i,e.Vc(r));a!=null&&(t[r]=a)}),{mapValue:{fields:t}}}function g4(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Cn||n instanceof bs||n instanceof ha||n instanceof $n||n instanceof Vm||n instanceof As)}function C_(n,e,t){if(!g4(t)||!tM(t)){const r=Em(t);throw r==="an object"?e.wc(n+" a custom object"):e.wc(n+" "+r)}}function W2(n,e,t){if((e=pr(e))instanceof F0)return e._internalPath;if(typeof e=="string")return I_(n,e);throw P1("Field path arguments must be of type string or ",n,!1,void 0,t)}const WF=new RegExp("[~\\*/\\[\\]]");function I_(n,e,t){if(e.search(WF)>=0)throw P1(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new F0(...e.split("."))._internalPath}catch{throw P1(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function P1(n,e,t,r,i){const a=r&&!r.isEmpty(),s=i!==void 0;let o=`Function ${e}() called with invalid data`;t&&(o+=" (via `toFirestore()`)"),o+=". ";let c="";return(a||s)&&(c+=" (found",a&&(c+=` in field ${r}`),s&&(c+=` in document ${i}`),c+=")"),new Fe(be.INVALID_ARGUMENT,o+n+c)}function m4(n,e){return n.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y4{constructor(e,t,r,i,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new $n(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new YF(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(jm("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class YF extends y4{data(){return super.data()}}function jm(n,e){return typeof e=="string"?I_(n,e):e instanceof F0?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v4(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new Fe(be.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class D_{}class R_ extends D_{}function zn(n,e,...t){let r=[];e instanceof D_&&r.push(e),r=r.concat(t),function(a){const s=a.filter(c=>c instanceof M_).length,o=a.filter(c=>c instanceof Um).length;if(s>1||s>0&&o>0)throw new Fe(be.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class Um extends R_{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new Um(e,t,r)}_apply(e){const t=this._parse(e);return x4(e._query,t),new Rs(e.firestore,e.converter,L2(e._query,t))}_parse(e){const t=j0(e.firestore);return function(a,s,o,c,d,f,p){let g;if(d.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new Fe(be.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){JC(p,f);const v=[];for(const b of p)v.push(ZC(c,a,b));g={arrayValue:{values:v}}}else g=ZC(c,a,p)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||JC(p,f),g=GF(o,s,p,f==="in"||f==="not-in");return fr.create(d,f,g)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function Tn(n,e,t){const r=e,i=jm("where",n);return Um._create(i,r,t)}class M_ extends D_{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new M_(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:$a.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(i,a){let s=i;const o=a.getFlattenedFilters();for(const c of o)x4(s,c),s=L2(s,c)}(e._query,t),new Rs(e.firestore,e.converter,L2(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class O_ extends R_{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new O_(e,t)}_apply(e){const t=function(i,a,s){if(i.startAt!==null)throw new Fe(be.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new Fe(be.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new c0(a,s)}(e._query,this._field,this._direction);return new Rs(e.firestore,e.converter,function(i,a){const s=i.explicitOrderBy.concat([a]);return new Zc(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}}function h0(n,e="asc"){const t=e,r=jm("orderBy",n);return O_._create(r,t)}class P_ extends R_{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new P_(e,t,r)}_apply(e){return new Rs(e.firestore,e.converter,T1(e._query,this._limit,this._limitType))}}function Rg(n){return eB("limit",n),P_._create("limit",n,"F")}function ZC(n,e,t){if(typeof(t=pr(t))=="string"){if(t==="")throw new Fe(be.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!vM(e)&&t.indexOf("/")!==-1)throw new Fe(be.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(yn.fromString(t));if(!Ze.isDocumentKey(r))throw new Fe(be.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return pC(n,new Ze(r))}if(t instanceof $n)return pC(n,t._key);throw new Fe(be.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Em(t)}.`)}function JC(n,e){if(!Array.isArray(n)||n.length===0)throw new Fe(be.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function x4(n,e){const t=function(i,a){for(const s of i)for(const o of s.getFlattenedFilters())if(a.indexOf(o.op)>=0)return o.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new Fe(be.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Fe(be.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class qF{convertValue(e,t="none"){switch(Ml(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Zn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Rl(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw lt(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Bl(e,(i,a)=>{r[i]=this.convertValue(a,t)}),r}convertVectorValue(e){var t,r,i;const a=(i=(r=(t=e.fields)===null||t===void 0?void 0:t[E1].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>Zn(s.doubleValue));return new As(a)}convertGeoPoint(e){return new bs(Zn(e.latitude),Zn(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Cm(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(s0(e));default:return null}}convertTimestamp(e){const t=Dl(e);return new Cn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=yn.fromString(e);nn(jM(r),9688,{name:e});const i=new o0(r.get(1),r.get(3)),a=new Ze(r.popFirst(5));return i.isEqual(t)||yo(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k_(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class Bh{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Bc extends y4{constructor(e,t,r,i,a,s){super(e,t,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new o1(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(jm("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Fe(be.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Bc._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Bc._jsonSchemaVersion="firestore/documentSnapshot/1.0",Bc._jsonSchema={type:hr("string",Bc._jsonSchemaVersion),bundleSource:hr("string","DocumentSnapshot"),bundleName:hr("string"),bundle:hr("string")};class o1 extends Bc{data(e={}){return super.data(e)}}class Vc{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Bh(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new o1(this._firestore,this._userDataWriter,r.key,r,new Bh(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Fe(be.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,a){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(o=>{const c=new o1(i._firestore,i._userDataWriter,o.doc.key,o.doc,new Bh(i._snapshot.mutatedKeys.has(o.doc.key),i._snapshot.fromCache),i.query.converter);return o.doc,{type:"added",doc:c,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(o=>a||o.type!==3).map(o=>{const c=new o1(i._firestore,i._userDataWriter,o.doc.key,o.doc,new Bh(i._snapshot.mutatedKeys.has(o.doc.key),i._snapshot.fromCache),i.query.converter);let d=-1,f=-1;return o.type!==0&&(d=s.indexOf(o.doc.key),s=s.delete(o.doc.key)),o.type!==1&&(s=s.add(o.doc),f=s.indexOf(o.doc.key)),{type:XF(o.type),doc:c,oldIndex:d,newIndex:f}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Fe(be.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Vc._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Kw.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],i=[];return this.docs.forEach(a=>{a._document!==null&&(t.push(a._document),r.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),i.push(a.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function XF(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return lt(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KF(n){n=fi(n,$n);const e=fi(n.firestore,Is);return BF(V0(e),n._key).then(t=>w4(e,n,t))}Vc._jsonSchemaVersion="firestore/querySnapshot/1.0",Vc._jsonSchema={type:hr("string",Vc._jsonSchemaVersion),bundleSource:hr("string","QuerySnapshot"),bundleName:hr("string"),bundle:hr("string")};class N_ extends qF{constructor(e){super(),this.firestore=e}convertBytes(e){return new ha(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new $n(this.firestore,null,t)}}function ur(n){n=fi(n,Rs);const e=fi(n.firestore,Is),t=V0(e),r=new N_(e);return v4(n._query),VF(t,n._query).then(i=>new Vc(e,r,n,i))}function eI(n,e,t){n=fi(n,$n);const r=fi(n.firestore,Is),i=k_(n.converter,e,t);return H0(r,[S_(j0(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,Si.none())])}function Hm(n,e,t,...r){n=fi(n,$n);const i=fi(n.firestore,Is),a=j0(i);let s;return s=typeof(e=pr(e))=="string"||e instanceof F0?h4(a,"updateDoc",n._key,e,t,r):f4(a,"updateDoc",n._key,e),H0(i,[s.toMutation(n._key,Si.exists(!0))])}function QF(n){return H0(fi(n.firestore,Is),[new Pm(n._key,Si.none())])}function k1(n,e){const t=fi(n.firestore,Is),r=xo(n),i=k_(n.converter,e);return H0(t,[S_(j0(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,Si.exists(!1))]).then(()=>r)}function ZF(n,...e){var t,r,i;n=pr(n);let a={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||QC(e[s])||(a=e[s++]);const o={includeMetadataChanges:a.includeMetadataChanges,source:a.source};if(QC(e[s])){const p=e[s];e[s]=(t=p.next)===null||t===void 0?void 0:t.bind(p),e[s+1]=(r=p.error)===null||r===void 0?void 0:r.bind(p),e[s+2]=(i=p.complete)===null||i===void 0?void 0:i.bind(p)}let c,d,f;if(n instanceof $n)d=fi(n.firestore,Is),f=Im(n._key.path),c={next:p=>{e[s]&&e[s](w4(d,n,p))},error:e[s+1],complete:e[s+2]};else{const p=fi(n,Rs);d=fi(p.firestore,Is),f=p._query;const g=new N_(d);c={next:y=>{e[s]&&e[s](new Vc(d,g,p,y))},error:e[s+1],complete:e[s+2]},v4(n._query)}return function(g,y,v,b){const A=new A_(b),E=new w_(y,A,v);return g.asyncQueue.enqueueAndForget(async()=>y_(await O1(g),E)),()=>{A.Ou(),g.asyncQueue.enqueueAndForget(async()=>v_(await O1(g),E))}}(V0(d),f,o,c)}function H0(n,e){return function(r,i){const a=new fo;return r.asyncQueue.enqueueAndForget(async()=>SF(await LF(r),i,a)),a.promise}(V0(n),e)}function w4(n,e,t){const r=t.docs.get(e._key),i=new N_(n);return new Bc(n,i,e._key,r,new Bh(t.hasPendingWrites,t.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JF{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=j0(e)}set(e,t,r){this._verifyNotCommitted();const i=Ox(e,this._firestore),a=k_(i.converter,t,r),s=S_(this._dataReader,"WriteBatch.set",i._key,a,i.converter!==null,r);return this._mutations.push(s.toMutation(i._key,Si.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const a=Ox(e,this._firestore);let s;return s=typeof(t=pr(t))=="string"||t instanceof F0?h4(this._dataReader,"WriteBatch.update",a._key,t,r,i):f4(this._dataReader,"WriteBatch.update",a._key,t),this._mutations.push(s.toMutation(a._key,Si.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Ox(e,this._firestore);return this._mutations=this._mutations.concat(new Pm(t._key,Si.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Fe(be.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Ox(n,e){if((n=pr(n)).firestore!==e)throw new Fe(be.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}function Yi(){return new T_("serverTimestamp")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ej(n){return V0(n=fi(n,Is)),new JF(n,e=>H0(n,e))}(function(e,t=!0){(function(i){af=i})(nf),Ld(new zc("firestore",(r,{instanceIdentifier:i,options:a})=>{const s=r.getProvider("app").getImmediate(),o=new Is(new WL(r.getProvider("auth-internal")),new XL(s,r.getProvider("app-check-internal")),function(d,f){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new Fe(be.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new o0(d.options.projectId,f)}(s,i),s);return a=Object.assign({useFetchStreams:t},a),o._setSettings(a),o},"PUBLIC").setMultipleInstances(!0)),bl(eC,tC,e),bl(eC,tC,"esm2017")})();const tj={apiKey:"AIzaSyBg60nFX2rmrW66n3lPeXRLTfMhjlgFrEE",authDomain:"project-01-bookmemo-prod.firebaseapp.com",projectId:"project-01-bookmemo-prod",storageBucket:"project-01-bookmemo-prod.firebasestorage.app",messagingSenderId:"414976225343",appId:"1:414976225343:web:31244d8c1ffe3b6f89088a"},_4=lR(tj),L_=jL(_4),Pt=jF(_4),b4=V.createContext();function nj({children:n}){const[e,t]=V.useState(null),[r,i]=V.useState(!0);return V.useEffect(()=>{const a=D7(L_,s=>{t(s),i(!1)});return()=>a()},[]),x.jsx(b4.Provider,{value:{user:e,loading:r},children:n})}function gr(){return V.useContext(b4)}function rj(){const[n,e]=V.useState(""),[t,r]=V.useState(""),[i,a]=V.useState(""),[s,o]=V.useState(!1),c=S0(),d=async f=>{if(f.preventDefault(),!s){o(!0),a("");try{await T7(L_,n,t),c("/")}catch(p){a(p.message)}finally{o(!1)}}};return x.jsxs(de,{component:"form",onSubmit:d,sx:{maxWidth:400,mx:"auto",mt:8},children:[x.jsx(se,{variant:"h5",align:"center",gutterBottom:!0,"data-testid":"login-title",children:"ログイン"}),x.jsx(kt,{label:"メールアドレス",type:"email",value:n,onChange:f=>e(f.target.value),fullWidth:!0,margin:"normal",required:!0,inputProps:{"data-testid":"login-email-input"}}),x.jsx(kt,{label:"パスワード",type:"password",value:t,onChange:f=>r(f.target.value),fullWidth:!0,margin:"normal",required:!0,inputProps:{"data-testid":"login-password-input"}}),i&&x.jsx(se,{color:"error",children:i}),x.jsx(st,{type:"submit",variant:"contained",fullWidth:!0,sx:{mt:2},"data-testid":"login-submit",disabled:s,children:s?"ログイン中...":"ログイン"})]})}function ij(){const[n,e]=V.useState(""),[t,r]=V.useState(""),[i,a]=V.useState(""),[s,o]=V.useState(!1),c=async d=>{if(d.preventDefault(),!s){o(!0),a("");try{await S7(L_,n,t)}catch(f){a(f.message)}finally{o(!1)}}};return x.jsxs(de,{component:"form",onSubmit:c,sx:{maxWidth:400,mx:"auto",mt:8},children:[x.jsx(se,{variant:"h5",align:"center",gutterBottom:!0,children:"新規登録"}),x.jsx(kt,{label:"メールアドレス",type:"email",value:n,onChange:d=>e(d.target.value),fullWidth:!0,margin:"normal",required:!0}),x.jsx(kt,{label:"パスワード",type:"password",value:t,onChange:d=>r(d.target.value),fullWidth:!0,margin:"normal",required:!0}),i&&x.jsx(se,{color:"error",children:i}),x.jsx(st,{type:"submit",variant:"contained",fullWidth:!0,sx:{mt:2},disabled:s,children:s?"登録中...":"新規登録"})]})}const vt={TSUNDOKU:"tsundoku",READING:"reading",RE_READING:"re-reading",FINISHED:"finished"},N1={[vt.TSUNDOKU]:"積読",[vt.READING]:"読書中",[vt.RE_READING]:"再読中",[vt.FINISHED]:"読了"},tI={[vt.TSUNDOKU]:"default",[vt.READING]:"primary",[vt.RE_READING]:"secondary",[vt.FINISHED]:"success"},dr=vt.READING,A4=[vt.TSUNDOKU,vt.READING,vt.RE_READING,vt.FINISHED],Qn={ALL:"all",TSUNDOKU:vt.TSUNDOKU,READING:vt.READING,RE_READING:vt.RE_READING,FINISHED:vt.FINISHED},fd={[Qn.ALL]:"すべて",[Qn.TSUNDOKU]:"積読",[Qn.READING]:"読書中",[Qn.RE_READING]:"再読中",[Qn.FINISHED]:"読了"},L1=n=>A4.includes(n),wo=n=>N1[n]||N1[dr],ds=n=>tI[n]||tI[dr];function aj({book:n,onClick:e,testId:t}){return x.jsx(jn,{sx:{cursor:"pointer","&:hover":{boxShadow:3},height:"100%",display:"flex",flexDirection:"column",minHeight:{xs:"140px",sm:"160px"}},onClick:e,"data-testid":t||`book-card-${n.id}`,children:x.jsx(Un,{sx:{flex:1,display:"flex",flexDirection:"column",p:{xs:1.5,sm:2},"&:last-child":{pb:{xs:1.5,sm:2}}},children:x.jsxs(de,{sx:{display:"flex",alignItems:"flex-start",gap:{xs:1.5,sm:2},height:"100%"},children:[n.coverImageUrl&&x.jsx(J8,{component:"img",sx:{width:{xs:50,sm:60},height:{xs:70,sm:80},objectFit:"cover",flexShrink:0,borderRadius:1},image:n.coverImageUrl,alt:n.title}),x.jsxs(de,{sx:{flex:1,minWidth:0,display:"flex",flexDirection:"column",height:"100%"},children:[x.jsx(se,{variant:"h6",component:"h3",gutterBottom:!0,sx:{fontSize:{xs:"0.9rem",sm:"1rem",md:"1.1rem"},lineHeight:1.2,fontWeight:600,mb:.5,overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical"},children:n.title||"タイトル未設定"}),x.jsx(se,{variant:"body2",color:"text.secondary",sx:{fontSize:{xs:"0.75rem",sm:"0.8rem",md:"0.9rem"},mb:.5,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:n.author||"著者未設定"}),x.jsx(de,{sx:{mb:1},children:x.jsx(In,{label:wo(n.status||dr),color:ds(n.status||dr),size:"small",sx:{fontSize:{xs:"0.65rem",sm:"0.7rem",md:"0.75rem"},height:{xs:"18px",sm:"20px",md:"22px"},"& .MuiChip-label":{px:{xs:.5,sm:.75}}}})}),(n.publisher||n.publishedDate)&&x.jsxs(se,{variant:"body2",color:"text.secondary",sx:{fontSize:{xs:"0.7rem",sm:"0.75rem",md:"0.8rem"},mb:1,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:[n.publisher," ",n.publisher&&n.publishedDate&&"•"," ",n.publishedDate]}),x.jsx(de,{sx:{minHeight:{xs:"32px",sm:"36px"},mb:1,display:"flex",flexWrap:"wrap",gap:.5},children:n.tags&&n.tags.length>0?n.tags.slice(0,3).map((r,i)=>x.jsx(In,{label:r,size:"small",variant:"outlined",sx:{fontSize:{xs:"0.65rem",sm:"0.7rem",md:"0.75rem"},height:{xs:"18px",sm:"20px",md:"22px"},"& .MuiChip-label":{px:{xs:.5,sm:.75}}}},i)):x.jsx(se,{variant:"caption",color:"text.secondary",sx:{fontSize:{xs:"0.65rem",sm:"0.7rem",md:"0.75rem"},alignSelf:"center"},children:"タグなし"})}),x.jsxs(se,{variant:"caption",color:"text.secondary",sx:{mt:"auto",fontSize:{xs:"0.65rem",sm:"0.7rem",md:"0.75rem"},fontWeight:500},children:["ステータス: ",wo(n.status||dr)]})]})]})})})}const zm=({title:n,subtitle:e,children:t})=>x.jsxs(pa,{elevation:0,"data-testid":"page-header",sx:{background:`
          linear-gradient(135deg, rgba(139, 69, 19, 0.9) 0%, rgba(160, 82, 45, 0.8) 100%),
          repeating-linear-gradient(
            45deg,
            transparent,
            transparent 4px,
            rgba(139, 69, 19, 0.1) 4px,
            rgba(139, 69, 19, 0.1) 8px
          ),
          linear-gradient(135deg, #8B4513 0%, #A0522D 50%, #CD853F 100%)
        `,backgroundSize:"cover, 16px 16px, cover",backgroundRepeat:"no-repeat, repeat, no-repeat",backgroundPosition:"center, center, center",borderRadius:0,mb:3,position:"relative",overflow:"hidden",borderBottom:"3px solid rgba(139, 69, 19, 0.3)"},children:[x.jsxs(de,{sx:{p:{xs:2,sm:3,md:4},textAlign:"center",color:"white",position:"relative",zIndex:1},children:[x.jsx(se,{variant:"h4",component:"h1","data-testid":"page-header-title",sx:{fontWeight:700,fontSize:{xs:"1.5rem",sm:"2rem",md:"2.5rem"},mb:e?1:0,textShadow:"0 2px 4px rgba(0,0,0,0.7)",color:"#FFF8DC"},children:n}),e&&x.jsx(se,{variant:"body1","data-testid":"page-header-subtitle",sx:{opacity:.95,fontSize:{xs:"0.9rem",sm:"1rem"},textShadow:"0 1px 2px rgba(0,0,0,0.7)",color:"#F5F5DC"},children:e}),t&&x.jsx(de,{sx:{mt:2},children:t})]}),x.jsx(de,{sx:{position:"absolute",top:0,left:0,right:0,bottom:0,background:`
            radial-gradient(circle at 30% 70%, rgba(255,255,255,0.15) 0%, transparent 40%),
            radial-gradient(circle at 70% 30%, rgba(255,255,255,0.1) 0%, transparent 30%)
          `,pointerEvents:"none"}})]}),pi=Li.createContext({setGlobalError:()=>{}}),sj=({open:n,message:e,onClose:t})=>x.jsxs(ja,{open:n,onClose:t,maxWidth:"xs",fullWidth:!0,disableEscapeKeyDown:!1,disableBackdropClick:!1,children:[x.jsx(Ss,{sx:{color:"error.main",fontWeight:"bold"},children:"エラーが発生しました"}),x.jsx(Ua,{children:x.jsx(lo,{severity:"error",sx:{mb:2},children:e})}),x.jsx(Ha,{sx:{justifyContent:"center",pb:2},children:x.jsx(st,{onClick:t,color:"error",variant:"contained",autoFocus:!0,children:"閉じる"})})]}),oj=({children:n})=>{const[e,t]=V.useState(null),r=a=>{t(a)},i=()=>{t(null)};return x.jsxs(pi.Provider,{value:{setGlobalError:r},children:[n,e&&x.jsx(sj,{open:!!e,message:e,onClose:i})]})};function vh(n){return n?(t=>t.replace(/[Ａ-Ｚａ-ｚ０-９]/g,r=>String.fromCharCode(r.charCodeAt(0)-65248)))(n).toLowerCase():""}const lj=()=>{try{if(typeof Li>"u"||!Li.useState)return{allBooks:[],filteredBooks:[],stats:{total:0,tsundoku:0,reading:0,reReading:0,finished:0,filtered:0},loading:!1,error:null,filter:Qn.READING,searchText:"",fetchBooks:async()=>{},handleFilterChange:()=>{},handleSearchChange:()=>{},clearSearch:()=>{},clearFilter:()=>{},normalizeTag:()=>""}}catch(D){return console.warn("React context not available in useBookList:",D),{allBooks:[],filteredBooks:[],stats:{total:0,reading:0,finished:0,filtered:0},loading:!1,error:null,filter:"reading",searchText:"",fetchBooks:async()=>{},handleFilterChange:()=>{},handleSearchChange:()=>{},clearSearch:()=>{},clearFilter:()=>{},normalizeTag:()=>""}}const{user:n}=gr(),e=V.useContext(pi),t=(e==null?void 0:e.setGlobalError)||(()=>{}),[r,i]=V.useState([]),[a,s]=V.useState(!0),[o,c]=V.useState(null),[d,f]=V.useState(Qn.READING),[p,g]=V.useState(""),y=V.useCallback(async()=>{if(!n){i([]),s(!1);return}try{s(!0),c(null);const D=zn(Fr(Pt,"books"),Tn("userId","==",n.uid),h0("updatedAt","desc")),N=(await ur(D)).docs.map(M=>({id:M.id,...M.data()}));i(N)}catch(D){console.error("Error fetching books:",D),t("書籍一覧の取得に失敗しました。"),c("書籍一覧の取得に失敗しました。")}finally{s(!1)}},[n,t]),v=V.useCallback((D,O)=>{f(O)},[]),b=V.useCallback(D=>{g(D.target.value)},[]),A=V.useCallback(()=>{g("")},[]),E=V.useCallback(()=>{f(Qn.READING)},[]),T=r.filter(D=>{if(d!==Qn.ALL&&(D.status||dr)!==d)return!1;if(!p.trim())return!0;const O=vh(p);return D.title&&vh(D.title).includes(O)||D.author&&vh(D.author).includes(O)||Array.isArray(D.tags)&&D.tags.some(N=>vh(N).includes(O))}),C={total:r.length,tsundoku:r.filter(D=>(D.status||dr)===vt.TSUNDOKU).length,reading:r.filter(D=>(D.status||dr)===vt.READING).length,reReading:r.filter(D=>(D.status||dr)===vt.RE_READING).length,finished:r.filter(D=>(D.status||dr)===vt.FINISHED).length,filtered:T.length};return V.useEffect(()=>{y()},[n==null?void 0:n.uid]),{allBooks:r,filteredBooks:T,stats:C,loading:a,error:o,filter:d,searchText:p,fetchBooks:y,handleFilterChange:v,handleSearchChange:b,clearSearch:A,clearFilter:E,normalizeTag:vh}};var cj={};const Y2=()=>typeof process<"u"&&cj?!0:typeof window<"u"&&window.location?window.location.hostname!=="localhost"&&window.location.hostname!=="127.0.0.1":!1,uj=()=>Y2()?"/project-01-bookmemo":"",Ia=n=>{const e=uj(),t=n.startsWith("/")?n:`/${n}`;return`${e}${t}`},Mc={MANIFEST:()=>Ia("/manifest.webmanifest"),SW_JS:()=>Ia("/sw.js"),VITE_SVG:()=>Ia("/vite.svg"),PAPER_TEXTURE:()=>Ia("/paper-texture.jpg"),ICON_192:()=>Ia("/icons/icon-192x192.png"),ICON_512:()=>Ia("/icons/icon-512x512.png"),APPLE_TOUCH_ICON:()=>Ia("/icons/apple-touch-icon.png"),APPLE_TOUCH_ICON_512:()=>Ia("/icons/apple-touch-icon-512x512.png"),ROOT:()=>Ia("/"),ADD:()=>Ia("/add"),SEARCH:()=>Ia("/search"),IS_PRODUCTION:Y2,IS_DEVELOPMENT:()=>!Y2()},B_=()=>{try{if(typeof Li>"u"||!Li.useState)return{isOnline:!0,isInstallable:!1,isInstalled:!1,swRegistration:null,userEngagement:0,lastVisitTime:null,shouldShowInstallPrompt:!1,shouldShowManualInstallGuide:!1,registerServiceWorker:async()=>null,installApp:async()=>{},requestNotificationPermission:async()=>"denied",sendNotification:()=>null,checkForUpdates:async()=>{},clearCache:async()=>{},reloadApp:()=>{},recordInstallPromptDismiss:()=>{}}}catch(I){return console.warn("React context not available in usePWA:",I),{isOnline:!0,isInstallable:!1,isInstalled:!1,swRegistration:null,userEngagement:0,lastVisitTime:null,shouldShowInstallPrompt:!1,shouldShowManualInstallGuide:!1,registerServiceWorker:async()=>null,installApp:async()=>{},requestNotificationPermission:async()=>"denied",sendNotification:()=>null,checkForUpdates:async()=>{},clearCache:async()=>{},reloadApp:()=>{},recordInstallPromptDismiss:()=>{}}}if(!(typeof window<"u"&&typeof navigator<"u"&&"serviceWorker"in navigator&&"PushManager"in window&&!Mc.IS_DEVELOPMENT()))return{isOnline:!0,isInstallable:!1,isInstalled:!1,swRegistration:null,userEngagement:0,lastVisitTime:null,shouldShowInstallPrompt:!1,shouldShowManualInstallGuide:!1,registerServiceWorker:async()=>null,installApp:async()=>{},requestNotificationPermission:async()=>"denied",sendNotification:()=>null,checkForUpdates:async()=>{},clearCache:async()=>{},reloadApp:()=>{},recordInstallPromptDismiss:()=>{}};const[e,t]=V.useState(navigator.onLine),[r,i]=V.useState(null),[a,s]=V.useState(null),[o,c]=V.useState(!1),[d,f]=V.useState(!1),[p,g]=V.useState(0),[y,v]=V.useState(null);V.useEffect(()=>{const I=()=>t(!0),B=()=>t(!1);return window.addEventListener("online",I),window.addEventListener("offline",B),()=>{window.removeEventListener("online",I),window.removeEventListener("offline",B)}},[]),V.useEffect(()=>{if(typeof window>"u")return;const I=()=>{g(L=>L+1)},B=["click","scroll","keydown","touchstart"];return B.forEach(L=>{window.addEventListener(L,I,{passive:!0})}),()=>{B.forEach(L=>{window.removeEventListener(L,I)})}},[]),V.useEffect(()=>{if(typeof localStorage>"u")return;const I=Date.now(),B=localStorage.getItem("bookmemo_last_visit");if(B){if(I-parseInt(B)>1440*60*1e3){const k=parseInt(localStorage.getItem("bookmemo_visit_count")||"0")+1;localStorage.setItem("bookmemo_visit_count",k.toString())}}else localStorage.setItem("bookmemo_visit_count","1");localStorage.setItem("bookmemo_last_visit",I.toString()),v(I)},[]);const b=V.useCallback(async()=>{if(Mc.IS_DEVELOPMENT())return console.log("Service Worker registration skipped in development environment"),null;try{const I=Mc.SW_JS(),B=await navigator.serviceWorker.register(I);return i(B),console.log("Service Worker registered:",B),B.addEventListener("updatefound",()=>{const L=B.installing;L&&L.addEventListener("statechange",()=>{L.state==="installed"&&navigator.serviceWorker.controller&&console.log("New Service Worker available")})}),B}catch(I){return console.error("Service Worker registration failed:",I),console.warn("Service Worker registration failed, but app will continue without PWA features"),null}},[]);V.useEffect(()=>{if(typeof window>"u"||typeof localStorage>"u")return;const I=k=>{k.preventDefault(),s(k),c(!0)},B=()=>{f(!0),c(!1),s(null),console.log("PWA was installed"),localStorage.setItem("bookmemo_installed","true"),localStorage.setItem("bookmemo_install_date",Date.now().toString())};return window.addEventListener("beforeinstallprompt",I),window.addEventListener("appinstalled",B),localStorage.getItem("bookmemo_installed")==="true"&&(f(!0),c(!1)),()=>{window.removeEventListener("beforeinstallprompt",I),window.removeEventListener("appinstalled",B)}},[]);const A=V.useCallback(async()=>{if(a){a.prompt();const{outcome:I}=await a.userChoice;console.log(I==="accepted"?"User accepted the install prompt":"User dismissed the install prompt"),s(null),c(!1)}},[a]),E=V.useCallback(()=>{if(d||!o)return!1;const I=parseInt(localStorage.getItem("bookmemo_visit_count")||"0"),B=parseInt(localStorage.getItem("bookmemo_dismiss_count")||"0");return I>=1&&p>=5&&B<3},[d,o,p]),T=V.useCallback(()=>{if(d)return!1;const I=/iPad|iPhone|iPod/.test(navigator.userAgent),B=/Safari/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent);return I&&B},[d]),C=V.useCallback(()=>{if(typeof localStorage>"u")return;const I=parseInt(localStorage.getItem("bookmemo_dismiss_count")||"0")+1;localStorage.setItem("bookmemo_dismiss_count",I.toString())},[]),D=V.useCallback(async()=>{if(typeof window>"u"||!("Notification"in window))return"denied";try{return await Notification.requestPermission()}catch(I){return console.warn("Notification permission request failed:",I),"denied"}},[]),O=V.useCallback((I,B={})=>{if(typeof window>"u"||!("Notification"in window)||Notification.permission!=="granted")return null;try{const L=Mc.ICON_192();return new Notification(I,{icon:L,badge:L,...B})}catch(L){return console.warn("Notification send failed:",L),null}},[]),N=V.useCallback(async()=>{r&&await r.update()},[r]),M=V.useCallback(async()=>{if(!(typeof window>"u"||!("caches"in window)))try{const I=await caches.keys();await Promise.all(I.map(B=>caches.delete(B)))}catch(I){console.warn("Cache clear failed:",I)}},[]),R=V.useCallback(()=>{window.location.reload()},[]);return{isOnline:e,isInstallable:o,isInstalled:d,swRegistration:r,userEngagement:p,lastVisitTime:y,shouldShowInstallPrompt:E(),shouldShowManualInstallGuide:T(),registerServiceWorker:b,installApp:A,requestNotificationPermission:D,sendNotification:O,checkForUpdates:N,clearCache:M,reloadApp:R,recordInstallPromptDismiss:C}};function dj(){const n=S0(),{isInstallable:e,isInstalled:t,installApp:r,shouldShowManualInstallGuide:i}=B_(),{filteredBooks:a,loading:s,error:o,filter:c,searchText:d,handleFilterChange:f,handleSearchChange:p}=lj(),g=b=>{n(`/book/${b}`)},y=async()=>{try{await r()}catch(b){console.error("Installation failed:",b)}},v=()=>{const b=/iPad|iPhone|iPod/.test(navigator.userAgent),A=/Safari/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent);b&&A&&alert(`📱 BookMemoをホーム画面に追加する手順：

1. 共有ボタンをタップ
   Safariの下部にある「共有」ボタン（□↑）をタップ

2. 「ホーム画面に追加」を選択
   共有メニューから「ホーム画面に追加」を選択

3. 追加を確認
   「追加」をタップしてホーム画面に追加

これでBookMemoをアプリとして使用できます！`)};return s?x.jsx("div",{children:"Loading..."}):x.jsxs(de,{sx:{maxWidth:1200,mx:"auto",pb:{xs:"72px",sm:"80px"}},children:[x.jsx(zm,{title:"本一覧",subtitle:"あなたの読書ライブラリ","data-testid":"book-list-header"}),x.jsxs(de,{sx:{px:{xs:1.5,sm:2,md:0}},children:[x.jsxs(de,{sx:{display:"flex",justifyContent:"center",alignItems:"center",gap:1,flexWrap:"wrap",mb:2},children:[e&&!t&&x.jsx(hT,{title:"BookMemoをアプリとしてインストール",children:x.jsx(Jr,{color:"primary",onClick:y,sx:{backgroundColor:"primary.main",color:"white","&:hover":{backgroundColor:"primary.dark"}},"data-testid":"pwa-install-header-button",children:x.jsx(h1,{})})}),i&&!t&&x.jsx(hT,{title:"iPhoneでホーム画面に追加する手順を表示",children:x.jsx(Jr,{color:"secondary",onClick:v,sx:{backgroundColor:"secondary.main",color:"white","&:hover":{backgroundColor:"secondary.dark"}},"data-testid":"pwa-manual-install-button",children:x.jsx(h1,{})})})]}),x.jsx(de,{sx:{display:"flex",justifyContent:"center",mb:3},children:x.jsx(st,{variant:"contained","data-testid":"book-add-button",onClick:()=>n("/add"),sx:{fontSize:{xs:"0.9rem",sm:"1rem"},py:{xs:1,sm:1.5},px:{xs:2,sm:3}},children:"本を追加"})}),x.jsx(kt,{label:"検索（タイトル・著者・タグ）",value:d,onChange:p,fullWidth:!0,size:"small",sx:{mb:{xs:1.5,sm:2},"& .MuiOutlinedInput-root":{fontSize:{xs:"0.9rem",sm:"1rem"}}}}),x.jsx(de,{sx:{borderBottom:1,borderColor:"divider",mb:{xs:1.5,sm:2},position:"sticky",top:0,zIndex:1100,backgroundColor:"background.paper"},"data-testid":"book-list-tabs-container",style:{position:"sticky",top:0,zIndex:1100},children:x.jsxs(mm,{value:c,onChange:f,variant:{xs:"scrollable",sm:"standard"},scrollButtons:"auto",allowScrollButtonsMobile:!0,centered:{sm:!0},sx:{"& .MuiTab-root":{fontSize:{xs:"0.8rem",sm:"0.9rem"},minHeight:{xs:"40px",sm:"48px"},minWidth:{xs:"60px",sm:"auto"},px:{xs:1,sm:2}},"& .MuiTabs-scrollButtons":{"&.Mui-disabled":{opacity:.3}}},children:[x.jsx(ka,{label:fd[Qn.ALL],value:Qn.ALL}),x.jsx(ka,{label:fd[Qn.TSUNDOKU],value:Qn.TSUNDOKU}),x.jsx(ka,{label:fd[Qn.READING],value:Qn.READING}),x.jsx(ka,{label:fd[Qn.RE_READING],value:Qn.RE_READING}),x.jsx(ka,{label:fd[Qn.FINISHED],value:Qn.FINISHED})]})}),a.length===0?x.jsx(de,{sx:{textAlign:"center",py:{xs:3,sm:4},px:{xs:2,sm:0}},children:x.jsx(se,{variant:"body1",color:"text.secondary",sx:{fontSize:{xs:"0.9rem",sm:"1rem"}},children:"該当する本がありません"})}):x.jsx(de,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",sm:"repeat(2, 1fr)",md:"repeat(3, 1fr)",lg:"repeat(4, 1fr)"},gap:{xs:1.5,sm:2},dataTestid:"book-list-grid"},"data-testid":"book-list-grid",children:a.map(b=>x.jsx(de,{"data-testid":`book-grid-item-${b.id}`,children:x.jsx(aj,{book:b,onClick:()=>g(b.id),testId:`book-list-card-${b.id}`})},b.id))})]})]})}const _o=(n,e)=>{const[t,r]=V.useState([]),[i,a]=V.useState(!1),s=V.useCallback(async()=>{if(e!=null&&e.uid)try{a(!0);const d=n==="book"?"bookTagHistory":"memoTagHistory",f=zn(Fr(Pt,"users",e.uid,d),h0("updatedAt","desc")),p=await ur(f),g=[];p.forEach(y=>{const v=y.data();v.tag&&g.push(v.tag)}),r(g)}catch(d){throw console.error("タグ履歴の取得に失敗しました:",d),d}finally{a(!1)}},[e==null?void 0:e.uid,n]),o=V.useCallback(async d=>{if(!(!(e!=null&&e.uid)||!d))try{const f=n==="book"?"bookTagHistory":"memoTagHistory",p=xo(Pt,"users",e.uid,f,d);await eI(p,{tag:d,updatedAt:Yi()})}catch(f){throw console.error("タグ履歴の保存に失敗しました:",f),f}},[e==null?void 0:e.uid,n]),c=V.useCallback(async d=>{if(!(!(e!=null&&e.uid)||!d||d.length===0))try{const f=d.map(p=>{const g=n==="book"?"bookTagHistory":"memoTagHistory",y=xo(Pt,"users",e.uid,g,p);return eI(y,{tag:p,updatedAt:Yi()})});await Promise.all(f)}catch(f){throw console.error("タグ履歴の一括保存に失敗しました:",f),f}},[e==null?void 0:e.uid,n]);return{tagOptions:t,loading:i,fetchTagHistory:s,saveTagToHistory:o,saveTagsToHistory:c}},fj=()=>{const{user:n}=gr(),e=V.useContext(pi),t=(e==null?void 0:e.setGlobalError)||(()=>{}),[r,i]=V.useState(!1),[a,s]=V.useState(null),{saveTagsToHistory:o}=_o("book",n),c=V.useCallback(async f=>{if(!n)throw new Error("ユーザーが認証されていません。");if(!f.title)throw new Error("タイトルは必須です。");try{i(!0),s(null);let p=(f.tags||[]).filter(y=>y&&y.trim()!=="");f.inputTagValue&&!p.includes(f.inputTagValue.trim())&&(p=[...p,f.inputTagValue.trim()]),p=p.filter(y=>y&&y.trim()!=="");const g=await k1(Fr(Pt,"books"),{userId:n.uid,isbn:f.isbn||"",title:f.title,author:f.author||"",publisher:f.publisher||"",publishedDate:f.publishedDate||"",coverImageUrl:f.coverImageUrl||"",tags:p,status:"reading",createdAt:Yi(),updatedAt:Yi()});return p.length>0&&await o(p),g.id}catch(p){console.error("Error adding book:",p);const g="書籍の追加に失敗しました: "+p.message;throw t(g),s(g),p}finally{i(!1)}},[n,t,o]),d=V.useCallback(()=>{s(null)},[]);return{addBook:c,loading:r,error:a,clearError:d}},hj=()=>{const{user:n}=gr(),e=V.useContext(pi),t=(e==null?void 0:e.setGlobalError)||(()=>{}),[r,i]=V.useState(!1),[a,s]=V.useState(""),[o,c]=V.useState(!1),d=V.useCallback(async g=>{if(!g||!g.trim())return s("ISBNを入力してください"),null;s(""),i(!0),c(!0);try{const y=g.trim(),b=(await vT.get(`https://api.openbd.jp/v1/get?isbn=${y}`)).data[0];let A="",E="",T="",C="",D="",O=[];if(b&&b.summary&&(A=b.summary.title||"",E=b.summary.author||"",T=b.summary.publisher||"",C=b.summary.pubdate||"",D=b.summary.cover||"",b.summary.subject&&O.push(b.summary.subject),b.summary.ndc&&O.push(b.summary.ndc)),!D||!A)try{const M=(await vT.get(`https://www.googleapis.com/books/v1/volumes?q=isbn:${y}`)).data;if(M.items&&M.items.length>0){const R=M.items[0].volumeInfo;A||(A=R.title||""),E||(E=R.authors?R.authors.join(", "):""),T||(T=R.publisher||""),C||(C=R.publishedDate||""),!D&&R.imageLinks&&(D=R.imageLinks.thumbnail||R.imageLinks.smallThumbnail||""),R.categories&&R.categories.length>0&&(O=[...O,...R.categories])}}catch(N){console.error("Failed to fetch from Google Books API",N)}return A?{isbn:y,title:A,author:E,publisher:T,publishedDate:C,coverImageUrl:D,tags:Array.from(new Set(O))}:(t("書籍情報が見つかりませんでした"),null)}catch{const v="書籍情報の取得に失敗しました";return t(v),s(v),null}finally{i(!1)}},[t]),f=V.useCallback(()=>{s(null)},[]),p=V.useCallback(()=>{c(!1),s(null)},[]);return{searchBookByIsbn:d,loading:r,error:a,searchPerformed:o,clearError:f,clearSearch:p}};function pj({isbn:n="",onBookAdded:e}){const[t,r]=V.useState(n),[i,a]=V.useState(""),[s,o]=V.useState(""),[c,d]=V.useState(""),[f,p]=V.useState(""),[g,y]=V.useState(""),[v,b]=V.useState([]),[A,E]=V.useState(""),{user:T}=gr(),{tagOptions:C,fetchTagHistory:D}=_o("book",T),{addBook:O,loading:N,error:M}=fj(),{searchBookByIsbn:R,loading:I,error:B}=hj();V.useEffect(()=>{D()},[D]),V.useEffect(()=>{n&&n!==t&&(console.log("[BookForm] useEffect: propsのisbnが変化:",n),r(n),n.trim()!==""&&(console.log("[BookForm] useEffect: 自動で書籍情報取得を実行",n),L(n)))},[n,t]);const L=async F=>{const q=F!==void 0?F:t;if(!q||!q.trim())return;const X=await R(q);X&&(a(X.title),o(X.author),d(X.publisher),p(X.publishedDate),y(X.coverImageUrl),b(X.tags))},k=async F=>{if(F.preventDefault(),!i)return;const X=await O({isbn:t,title:i,author:s,publisher:c,publishedDate:f,coverImageUrl:g,tags:v,inputTagValue:A});X&&e(X)};return x.jsxs(de,{component:"form",onSubmit:k,sx:{mt:{xs:1,sm:2}},role:"form","data-testid":"book-form",children:[x.jsxs(de,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",sm:"1fr 1fr"},gap:{xs:1,sm:1.5}},children:[x.jsx(de,{children:x.jsx(kt,{label:"ISBN",value:t,onChange:F=>r(F.target.value),fullWidth:!0,size:"small",placeholder:"例: 9784873119485",inputProps:{"data-testid":"book-isbn-input"},sx:{"& .MuiOutlinedInput-root":{fontSize:{xs:"0.9rem",sm:"1rem"}}}})}),x.jsx(de,{children:x.jsx(st,{onClick:()=>L(),variant:"outlined",disabled:I,sx:{mt:{xs:1,sm:0},height:{xs:"40px",sm:"56px"},fontSize:{xs:"0.8rem",sm:"0.9rem"}},fullWidth:!0,"data-testid":"book-fetch-button",children:I?"取得中...":"ISBNで書籍情報取得"})})]}),g&&x.jsx(de,{sx:{textAlign:"center",my:{xs:1.5,sm:2},px:{xs:1,sm:0}},children:x.jsx("img",{src:g,alt:"表紙",style:{maxHeight:"120px",maxWidth:"100%",width:"auto",borderRadius:"4px"},"data-testid":"book-cover-image"})}),x.jsxs(de,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",sm:"1fr 1fr"},gap:{xs:1,sm:1.5},mt:{xs:.5,sm:1}},children:[x.jsx(de,{children:x.jsx(kt,{label:"タイトル",value:i,onChange:F=>a(F.target.value),fullWidth:!0,required:!0,size:"small",inputProps:{"data-testid":"book-title-input"},sx:{"& .MuiOutlinedInput-root":{fontSize:{xs:"0.9rem",sm:"1rem"}}}})}),x.jsx(de,{children:x.jsx(kt,{label:"著者",value:s,onChange:F=>o(F.target.value),fullWidth:!0,size:"small",inputProps:{"data-testid":"book-author-input"},sx:{"& .MuiOutlinedInput-root":{fontSize:{xs:"0.9rem",sm:"1rem"}}}})}),x.jsx(de,{children:x.jsx(kt,{label:"出版社",value:c,onChange:F=>d(F.target.value),fullWidth:!0,size:"small",inputProps:{"data-testid":"book-publisher-input"},sx:{"& .MuiOutlinedInput-root":{fontSize:{xs:"0.9rem",sm:"1rem"}}}})}),x.jsx(de,{children:x.jsx(kt,{label:"出版日",value:f,onChange:F=>p(F.target.value),fullWidth:!0,size:"small",inputProps:{"data-testid":"book-publishdate-input"},sx:{"& .MuiOutlinedInput-root":{fontSize:{xs:"0.9rem",sm:"1rem"}}}})})]}),x.jsx(de,{sx:{mt:{xs:1.5,sm:2}},children:x.jsx(po,{multiple:!0,freeSolo:!0,options:C,value:v,getOptionLabel:F=>typeof F=="string"?F:F.inputValue||F.tag||"",onChange:(F,q)=>{const X=(q||[]).map(G=>{if(typeof G=="string")return G;if(G&&typeof G=="object"){if("inputValue"in G&&G.inputValue)return G.inputValue;if("tag"in G&&G.tag)return G.tag}return""}).filter(Boolean);b(X)},inputValue:A,onInputChange:(F,q)=>E(q),renderInput:F=>x.jsx(kt,{...F,label:"タグ",fullWidth:!0,size:"small",placeholder:"例: 小説,名作,技術書",inputProps:{...F.inputProps,"data-testid":"book-tags-input",style:{fontSize:"0.9rem"}},sx:{"& .MuiOutlinedInput-root":{fontSize:{xs:"0.9rem",sm:"1rem"}}}}),sx:{"& .MuiChip-root":{fontSize:{xs:"0.75rem",sm:"0.8rem"},height:{xs:"24px",sm:"28px"}}}})}),(B||M)&&x.jsx(se,{color:"error",sx:{mt:{xs:1.5,sm:2},fontSize:{xs:"0.8rem",sm:"0.9rem"}},"data-testid":"book-form-error",children:B||M}),x.jsx(st,{type:"submit",variant:"contained",disabled:N,sx:{mt:{xs:2,sm:3},mb:{xs:"72px",sm:2},width:{xs:"100%",sm:"auto"},fontSize:{xs:"0.9rem",sm:"1rem"},py:{xs:1.5,sm:2}},"data-testid":"book-add-submit",children:N?"追加中...":"本を追加"})]})}function gj(n,e){var t=Object.setPrototypeOf;t?t(n,e):n.__proto__=e}function mj(n,e){e===void 0&&(e=n.constructor);var t=Error.captureStackTrace;t&&t(n,e)}var yj=function(){var n=function(t,r){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(i[s]=a[s])},n(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),vj=function(n){yj(e,n);function e(t,r){var i=this.constructor,a=n.call(this,t,r)||this;return Object.defineProperty(a,"name",{value:i.name,enumerable:!1,configurable:!0}),gj(a,i.prototype),mj(a),a}return e}(Error),xj=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Bi=function(n){xj(e,n);function e(t){t===void 0&&(t=void 0);var r=n.call(this,t)||this;return r.message=t,r}return e.prototype.getKind=function(){var t=this.constructor;return t.kind},e.kind="Exception",e}(vj),wj=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Ma=function(n){wj(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="ArgumentException",e}(Bi),_j=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),nt=function(n){_j(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="IllegalArgumentException",e}(Bi),bj=function(){function n(e){if(this.binarizer=e,e===null)throw new nt("Binarizer must be non-null.")}return n.prototype.getWidth=function(){return this.binarizer.getWidth()},n.prototype.getHeight=function(){return this.binarizer.getHeight()},n.prototype.getBlackRow=function(e,t){return this.binarizer.getBlackRow(e,t)},n.prototype.getBlackMatrix=function(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix},n.prototype.isCropSupported=function(){return this.binarizer.getLuminanceSource().isCropSupported()},n.prototype.crop=function(e,t,r,i){var a=this.binarizer.getLuminanceSource().crop(e,t,r,i);return new n(this.binarizer.createBinarizer(a))},n.prototype.isRotateSupported=function(){return this.binarizer.getLuminanceSource().isRotateSupported()},n.prototype.rotateCounterClockwise=function(){var e=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new n(this.binarizer.createBinarizer(e))},n.prototype.rotateCounterClockwise45=function(){var e=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new n(this.binarizer.createBinarizer(e))},n.prototype.toString=function(){try{return this.getBlackMatrix().toString()}catch{return""}},n}(),Aj=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Vr=function(n){Aj(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.getChecksumInstance=function(){return new e},e.kind="ChecksumException",e}(Bi),Ej=function(){function n(e){this.source=e}return n.prototype.getLuminanceSource=function(){return this.source},n.prototype.getWidth=function(){return this.source.getWidth()},n.prototype.getHeight=function(){return this.source.getHeight()},n}(),_n=function(){function n(){}return n.arraycopy=function(e,t,r,i,a){for(;a--;)r[i++]=e[t++]},n.currentTimeMillis=function(){return Date.now()},n}(),Sj=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),V_=function(n){Sj(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="IndexOutOfBoundsException",e}(Bi),Tj=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),nI=function(n){Tj(e,n);function e(t,r){t===void 0&&(t=void 0),r===void 0&&(r=void 0);var i=n.call(this,r)||this;return i.index=t,i.message=r,i}return e.kind="ArrayIndexOutOfBoundsException",e}(V_),Cj=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Tr=function(){function n(){}return n.fill=function(e,t){for(var r=0,i=e.length;r<i;r++)e[r]=t},n.fillWithin=function(e,t,r,i){n.rangeCheck(e.length,t,r);for(var a=t;a<r;a++)e[a]=i},n.rangeCheck=function(e,t,r){if(t>r)throw new nt("fromIndex("+t+") > toIndex("+r+")");if(t<0)throw new nI(t);if(r>e)throw new nI(r)},n.asList=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e},n.create=function(e,t,r){var i=Array.from({length:e});return i.map(function(a){return Array.from({length:t}).fill(r)})},n.createInt32Array=function(e,t,r){var i=Array.from({length:e});return i.map(function(a){return Int32Array.from({length:t}).fill(r)})},n.equals=function(e,t){if(!e||!t||!e.length||!t.length||e.length!==t.length)return!1;for(var r=0,i=e.length;r<i;r++)if(e[r]!==t[r])return!1;return!0},n.hashCode=function(e){var t,r;if(e===null)return 0;var i=1;try{for(var a=Cj(e),s=a.next();!s.done;s=a.next()){var o=s.value;i=31*i+o}}catch(c){t={error:c}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}return i},n.fillUint8Array=function(e,t){for(var r=0;r!==e.length;r++)e[r]=t},n.copyOf=function(e,t){return e.slice(0,t)},n.copyOfUint8Array=function(e,t){if(e.length<=t){var r=new Uint8Array(t);return r.set(e),r}return e.slice(0,t)},n.copyOfRange=function(e,t,r){var i=r-t,a=new Int32Array(i);return _n.arraycopy(e,t,a,0,i),a},n.binarySearch=function(e,t,r){r===void 0&&(r=n.numberComparator);for(var i=0,a=e.length-1;i<=a;){var s=a+i>>1,o=r(t,e[s]);if(o>0)i=s+1;else if(o<0)a=s-1;else return s}return-i-1},n.numberComparator=function(e,t){return e-t},n}(),Tt=function(){function n(){}return n.numberOfTrailingZeros=function(e){var t;if(e===0)return 32;var r=31;return t=e<<16,t!==0&&(r-=16,e=t),t=e<<8,t!==0&&(r-=8,e=t),t=e<<4,t!==0&&(r-=4,e=t),t=e<<2,t!==0&&(r-=2,e=t),r-(e<<1>>>31)},n.numberOfLeadingZeros=function(e){if(e===0)return 32;var t=1;return e>>>16||(t+=16,e<<=16),e>>>24||(t+=8,e<<=8),e>>>28||(t+=4,e<<=4),e>>>30||(t+=2,e<<=2),t-=e>>>31,t},n.toHexString=function(e){return e.toString(16)},n.toBinaryString=function(e){return String(parseInt(String(e),2))},n.bitCount=function(e){return e=e-(e>>>1&1431655765),e=(e&858993459)+(e>>>2&858993459),e=e+(e>>>4)&252645135,e=e+(e>>>8),e=e+(e>>>16),e&63},n.truncDivision=function(e,t){return Math.trunc(e/t)},n.parseInt=function(e,t){return t===void 0&&(t=void 0),parseInt(e,t)},n.MIN_VALUE_32_BITS=-2147483648,n.MAX_VALUE=Number.MAX_SAFE_INTEGER,n}(),jr=function(){function n(e,t){e===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=e,t==null?this.bits=n.makeArray(e):this.bits=t)}return n.prototype.getSize=function(){return this.size},n.prototype.getSizeInBytes=function(){return Math.floor((this.size+7)/8)},n.prototype.ensureCapacity=function(e){if(e>this.bits.length*32){var t=n.makeArray(e);_n.arraycopy(this.bits,0,t,0,this.bits.length),this.bits=t}},n.prototype.get=function(e){return(this.bits[Math.floor(e/32)]&1<<(e&31))!==0},n.prototype.set=function(e){this.bits[Math.floor(e/32)]|=1<<(e&31)},n.prototype.flip=function(e){this.bits[Math.floor(e/32)]^=1<<(e&31)},n.prototype.getNextSet=function(e){var t=this.size;if(e>=t)return t;var r=this.bits,i=Math.floor(e/32),a=r[i];a&=~((1<<(e&31))-1);for(var s=r.length;a===0;){if(++i===s)return t;a=r[i]}var o=i*32+Tt.numberOfTrailingZeros(a);return o>t?t:o},n.prototype.getNextUnset=function(e){var t=this.size;if(e>=t)return t;var r=this.bits,i=Math.floor(e/32),a=~r[i];a&=~((1<<(e&31))-1);for(var s=r.length;a===0;){if(++i===s)return t;a=~r[i]}var o=i*32+Tt.numberOfTrailingZeros(a);return o>t?t:o},n.prototype.setBulk=function(e,t){this.bits[Math.floor(e/32)]=t},n.prototype.setRange=function(e,t){if(t<e||e<0||t>this.size)throw new nt;if(t!==e){t--;for(var r=Math.floor(e/32),i=Math.floor(t/32),a=this.bits,s=r;s<=i;s++){var o=s>r?0:e&31,c=s<i?31:t&31,d=(2<<c)-(1<<o);a[s]|=d}}},n.prototype.clear=function(){for(var e=this.bits.length,t=this.bits,r=0;r<e;r++)t[r]=0},n.prototype.isRange=function(e,t,r){if(t<e||e<0||t>this.size)throw new nt;if(t===e)return!0;t--;for(var i=Math.floor(e/32),a=Math.floor(t/32),s=this.bits,o=i;o<=a;o++){var c=o>i?0:e&31,d=o<a?31:t&31,f=(2<<d)-(1<<c)&4294967295;if((s[o]&f)!==(r?f:0))return!1}return!0},n.prototype.appendBit=function(e){this.ensureCapacity(this.size+1),e&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++},n.prototype.appendBits=function(e,t){if(t<0||t>32)throw new nt("Num bits must be between 0 and 32");this.ensureCapacity(this.size+t);for(var r=t;r>0;r--)this.appendBit((e>>r-1&1)===1)},n.prototype.appendBitArray=function(e){var t=e.size;this.ensureCapacity(this.size+t);for(var r=0;r<t;r++)this.appendBit(e.get(r))},n.prototype.xor=function(e){if(this.size!==e.size)throw new nt("Sizes don't match");for(var t=this.bits,r=0,i=t.length;r<i;r++)t[r]^=e.bits[r]},n.prototype.toBytes=function(e,t,r,i){for(var a=0;a<i;a++){for(var s=0,o=0;o<8;o++)this.get(e)&&(s|=1<<7-o),e++;t[r+a]=s}},n.prototype.getBitArray=function(){return this.bits},n.prototype.reverse=function(){for(var e=new Int32Array(this.bits.length),t=Math.floor((this.size-1)/32),r=t+1,i=this.bits,a=0;a<r;a++){var s=i[a];s=s>>1&1431655765|(s&1431655765)<<1,s=s>>2&858993459|(s&858993459)<<2,s=s>>4&252645135|(s&252645135)<<4,s=s>>8&16711935|(s&16711935)<<8,s=s>>16&65535|(s&65535)<<16,e[t-a]=s}if(this.size!==r*32){for(var o=r*32-this.size,c=e[0]>>>o,a=1;a<r;a++){var d=e[a];c|=d<<32-o,e[a-1]=c,c=d>>>o}e[r-1]=c}this.bits=e},n.makeArray=function(e){return new Int32Array(Math.floor((e+31)/32))},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.size===t.size&&Tr.equals(this.bits,t.bits)},n.prototype.hashCode=function(){return 31*this.size+Tr.hashCode(this.bits)},n.prototype.toString=function(){for(var e="",t=0,r=this.size;t<r;t++)(t&7)===0&&(e+=" "),e+=this.get(t)?"X":".";return e},n.prototype.clone=function(){return new n(this.size,this.bits.slice())},n.prototype.toArray=function(){for(var e=[],t=0,r=this.size;t<r;t++)e.push(this.get(t));return e},n}(),q2;(function(n){n[n.OTHER=0]="OTHER",n[n.PURE_BARCODE=1]="PURE_BARCODE",n[n.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",n[n.TRY_HARDER=3]="TRY_HARDER",n[n.CHARACTER_SET=4]="CHARACTER_SET",n[n.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",n[n.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",n[n.ENABLE_CODE_39_EXTENDED_MODE=7]="ENABLE_CODE_39_EXTENDED_MODE",n[n.ASSUME_GS1=8]="ASSUME_GS1",n[n.RETURN_CODABAR_START_END=9]="RETURN_CODABAR_START_END",n[n.NEED_RESULT_POINT_CALLBACK=10]="NEED_RESULT_POINT_CALLBACK",n[n.ALLOWED_EAN_EXTENSIONS=11]="ALLOWED_EAN_EXTENSIONS"})(q2||(q2={}));const On=q2;var Ij=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Be=function(n){Ij(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.getFormatInstance=function(){return new e},e.kind="FormatException",e}(Bi),Dj=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},sn;(function(n){n[n.Cp437=0]="Cp437",n[n.ISO8859_1=1]="ISO8859_1",n[n.ISO8859_2=2]="ISO8859_2",n[n.ISO8859_3=3]="ISO8859_3",n[n.ISO8859_4=4]="ISO8859_4",n[n.ISO8859_5=5]="ISO8859_5",n[n.ISO8859_6=6]="ISO8859_6",n[n.ISO8859_7=7]="ISO8859_7",n[n.ISO8859_8=8]="ISO8859_8",n[n.ISO8859_9=9]="ISO8859_9",n[n.ISO8859_10=10]="ISO8859_10",n[n.ISO8859_11=11]="ISO8859_11",n[n.ISO8859_13=12]="ISO8859_13",n[n.ISO8859_14=13]="ISO8859_14",n[n.ISO8859_15=14]="ISO8859_15",n[n.ISO8859_16=15]="ISO8859_16",n[n.SJIS=16]="SJIS",n[n.Cp1250=17]="Cp1250",n[n.Cp1251=18]="Cp1251",n[n.Cp1252=19]="Cp1252",n[n.Cp1256=20]="Cp1256",n[n.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",n[n.UTF8=22]="UTF8",n[n.ASCII=23]="ASCII",n[n.Big5=24]="Big5",n[n.GB18030=25]="GB18030",n[n.EUC_KR=26]="EUC_KR"})(sn||(sn={}));var Sr=function(){function n(e,t,r){for(var i,a,s=[],o=3;o<arguments.length;o++)s[o-3]=arguments[o];this.valueIdentifier=e,this.name=r,typeof t=="number"?this.values=Int32Array.from([t]):this.values=t,this.otherEncodingNames=s,n.VALUE_IDENTIFIER_TO_ECI.set(e,this),n.NAME_TO_ECI.set(r,this);for(var c=this.values,d=0,f=c.length;d!==f;d++){var p=c[d];n.VALUES_TO_ECI.set(p,this)}try{for(var g=Dj(s),y=g.next();!y.done;y=g.next()){var v=y.value;n.NAME_TO_ECI.set(v,this)}}catch(b){i={error:b}}finally{try{y&&!y.done&&(a=g.return)&&a.call(g)}finally{if(i)throw i.error}}}return n.prototype.getValueIdentifier=function(){return this.valueIdentifier},n.prototype.getName=function(){return this.name},n.prototype.getValue=function(){return this.values[0]},n.getCharacterSetECIByValue=function(e){if(e<0||e>=900)throw new Be("incorect value");var t=n.VALUES_TO_ECI.get(e);if(t===void 0)throw new Be("incorect value");return t},n.getCharacterSetECIByName=function(e){var t=n.NAME_TO_ECI.get(e);if(t===void 0)throw new Be("incorect value");return t},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.getName()===t.getName()},n.VALUE_IDENTIFIER_TO_ECI=new Map,n.VALUES_TO_ECI=new Map,n.NAME_TO_ECI=new Map,n.Cp437=new n(sn.Cp437,Int32Array.from([0,2]),"Cp437"),n.ISO8859_1=new n(sn.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),n.ISO8859_2=new n(sn.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),n.ISO8859_3=new n(sn.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),n.ISO8859_4=new n(sn.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),n.ISO8859_5=new n(sn.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),n.ISO8859_6=new n(sn.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),n.ISO8859_7=new n(sn.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),n.ISO8859_8=new n(sn.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),n.ISO8859_9=new n(sn.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),n.ISO8859_10=new n(sn.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),n.ISO8859_11=new n(sn.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),n.ISO8859_13=new n(sn.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),n.ISO8859_14=new n(sn.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),n.ISO8859_15=new n(sn.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),n.ISO8859_16=new n(sn.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),n.SJIS=new n(sn.SJIS,20,"SJIS","Shift_JIS"),n.Cp1250=new n(sn.Cp1250,21,"Cp1250","windows-1250"),n.Cp1251=new n(sn.Cp1251,22,"Cp1251","windows-1251"),n.Cp1252=new n(sn.Cp1252,23,"Cp1252","windows-1252"),n.Cp1256=new n(sn.Cp1256,24,"Cp1256","windows-1256"),n.UnicodeBigUnmarked=new n(sn.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),n.UTF8=new n(sn.UTF8,26,"UTF8","UTF-8"),n.ASCII=new n(sn.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),n.Big5=new n(sn.Big5,28,"Big5"),n.GB18030=new n(sn.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),n.EUC_KR=new n(sn.EUC_KR,30,"EUC_KR","EUC-KR"),n}(),Rj=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),l1=function(n){Rj(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="UnsupportedOperationException",e}(Bi),xa=function(){function n(){}return n.decode=function(e,t){var r=this.encodingName(t);return this.customDecoder?this.customDecoder(e,r):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(r)?this.decodeFallback(e,r):new TextDecoder(r).decode(e)},n.shouldDecodeOnFallback=function(e){return!n.isBrowser()&&e==="ISO-8859-1"},n.encode=function(e,t){var r=this.encodingName(t);return this.customEncoder?this.customEncoder(e,r):typeof TextEncoder>"u"?this.encodeFallback(e):new TextEncoder().encode(e)},n.isBrowser=function(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"},n.encodingName=function(e){return typeof e=="string"?e:e.getName()},n.encodingCharacterSet=function(e){return e instanceof Sr?e:Sr.getCharacterSetECIByName(e)},n.decodeFallback=function(e,t){var r=this.encodingCharacterSet(t);if(n.isDecodeFallbackSupported(r)){for(var i="",a=0,s=e.length;a<s;a++){var o=e[a].toString(16);o.length<2&&(o="0"+o),i+="%"+o}return decodeURIComponent(i)}if(r.equals(Sr.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(e.buffer));throw new l1("Encoding "+this.encodingName(t)+" not supported by fallback.")},n.isDecodeFallbackSupported=function(e){return e.equals(Sr.UTF8)||e.equals(Sr.ISO8859_1)||e.equals(Sr.ASCII)},n.encodeFallback=function(e){for(var t=btoa(unescape(encodeURIComponent(e))),r=t.split(""),i=[],a=0;a<r.length;a++)i.push(r[a].charCodeAt(0));return new Uint8Array(i)},n}(),jt=function(){function n(){}return n.castAsNonUtf8Char=function(e,t){t===void 0&&(t=null);var r=t?t.getName():this.ISO88591;return xa.decode(new Uint8Array([e]),r)},n.guessEncoding=function(e,t){if(t!=null&&t.get(On.CHARACTER_SET)!==void 0)return t.get(On.CHARACTER_SET).toString();for(var r=e.length,i=!0,a=!0,s=!0,o=0,c=0,d=0,f=0,p=0,g=0,y=0,v=0,b=0,A=0,E=0,T=e.length>3&&e[0]===239&&e[1]===187&&e[2]===191,C=0;C<r&&(i||a||s);C++){var D=e[C]&255;s&&(o>0?(D&128)===0?s=!1:o--:(D&128)!==0&&((D&64)===0?s=!1:(o++,(D&32)===0?c++:(o++,(D&16)===0?d++:(o++,(D&8)===0?f++:s=!1))))),i&&(D>127&&D<160?i=!1:D>159&&(D<192||D===215||D===247)&&E++),a&&(p>0?D<64||D===127||D>252?a=!1:p--:D===128||D===160||D>239?a=!1:D>160&&D<224?(g++,v=0,y++,y>b&&(b=y)):D>127?(p++,y=0,v++,v>A&&(A=v)):(y=0,v=0))}return s&&o>0&&(s=!1),a&&p>0&&(a=!1),s&&(T||c+d+f>0)?n.UTF8:a&&(n.ASSUME_SHIFT_JIS||b>=3||A>=3)?n.SHIFT_JIS:i&&a?b===2&&g===2||E*10>=r?n.SHIFT_JIS:n.ISO88591:i?n.ISO88591:a?n.SHIFT_JIS:s?n.UTF8:n.PLATFORM_DEFAULT_ENCODING},n.format=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var i=-1;function a(o,c,d,f,p,g){if(o==="%%")return"%";if(t[++i]!==void 0){o=f?parseInt(f.substr(1)):void 0;var y=p?parseInt(p.substr(1)):void 0,v;switch(g){case"s":v=t[i];break;case"c":v=t[i][0];break;case"f":v=parseFloat(t[i]).toFixed(o);break;case"p":v=parseFloat(t[i]).toPrecision(o);break;case"e":v=parseFloat(t[i]).toExponential(o);break;case"x":v=parseInt(t[i]).toString(y||16);break;case"d":v=parseFloat(parseInt(t[i],y||10).toPrecision(o)).toFixed(0);break}v=typeof v=="object"?JSON.stringify(v):(+v).toString(y);for(var b=parseInt(d),A=d&&d[0]+""=="0"?"0":" ";v.length<b;)v=c!==void 0?v+A:A+v;return v}}var s=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(s,a)},n.getBytes=function(e,t){return xa.encode(e,t)},n.getCharCode=function(e,t){return t===void 0&&(t=0),e.charCodeAt(t)},n.getCharAt=function(e){return String.fromCharCode(e)},n.SHIFT_JIS=Sr.SJIS.getName(),n.GB2312="GB2312",n.ISO88591=Sr.ISO8859_1.getName(),n.EUC_JP="EUC_JP",n.UTF8=Sr.UTF8.getName(),n.PLATFORM_DEFAULT_ENCODING=n.UTF8,n.ASSUME_SHIFT_JIS=!1,n}(),bt=function(){function n(e){e===void 0&&(e=""),this.value=e}return n.prototype.enableDecoding=function(e){return this.encoding=e,this},n.prototype.append=function(e){return typeof e=="string"?this.value+=e.toString():this.encoding?this.value+=jt.castAsNonUtf8Char(e,this.encoding):this.value+=String.fromCharCode(e),this},n.prototype.appendChars=function(e,t,r){for(var i=t;t<t+r;i++)this.append(e[i]);return this},n.prototype.length=function(){return this.value.length},n.prototype.charAt=function(e){return this.value.charAt(e)},n.prototype.deleteCharAt=function(e){this.value=this.value.substr(0,e)+this.value.substring(e+1)},n.prototype.setCharAt=function(e,t){this.value=this.value.substr(0,e)+t+this.value.substr(e+1)},n.prototype.substring=function(e,t){return this.value.substring(e,t)},n.prototype.setLengthToZero=function(){this.value=""},n.prototype.toString=function(){return this.value},n.prototype.insert=function(e,t){this.value=this.value.substring(0,e)+t+this.value.substring(e)},n}(),Ds=function(){function n(e,t,r,i){if(this.width=e,this.height=t,this.rowSize=r,this.bits=i,t==null&&(t=e),this.height=t,e<1||t<1)throw new nt("Both dimensions must be greater than 0");r==null&&(r=Math.floor((e+31)/32)),this.rowSize=r,i==null&&(this.bits=new Int32Array(this.rowSize*this.height))}return n.parseFromBooleanArray=function(e){for(var t=e.length,r=e[0].length,i=new n(r,t),a=0;a<t;a++)for(var s=e[a],o=0;o<r;o++)s[o]&&i.set(o,a);return i},n.parseFromString=function(e,t,r){if(e===null)throw new nt("stringRepresentation cannot be null");for(var i=new Array(e.length),a=0,s=0,o=-1,c=0,d=0;d<e.length;)if(e.charAt(d)===`
`||e.charAt(d)==="\r"){if(a>s){if(o===-1)o=a-s;else if(a-s!==o)throw new nt("row lengths do not match");s=a,c++}d++}else if(e.substring(d,d+t.length)===t)d+=t.length,i[a]=!0,a++;else if(e.substring(d,d+r.length)===r)d+=r.length,i[a]=!1,a++;else throw new nt("illegal character encountered: "+e.substring(d));if(a>s){if(o===-1)o=a-s;else if(a-s!==o)throw new nt("row lengths do not match");c++}for(var f=new n(o,c),p=0;p<a;p++)i[p]&&f.set(Math.floor(p%o),Math.floor(p/o));return f},n.prototype.get=function(e,t){var r=t*this.rowSize+Math.floor(e/32);return(this.bits[r]>>>(e&31)&1)!==0},n.prototype.set=function(e,t){var r=t*this.rowSize+Math.floor(e/32);this.bits[r]|=1<<(e&31)&4294967295},n.prototype.unset=function(e,t){var r=t*this.rowSize+Math.floor(e/32);this.bits[r]&=~(1<<(e&31)&4294967295)},n.prototype.flip=function(e,t){var r=t*this.rowSize+Math.floor(e/32);this.bits[r]^=1<<(e&31)&4294967295},n.prototype.xor=function(e){if(this.width!==e.getWidth()||this.height!==e.getHeight()||this.rowSize!==e.getRowSize())throw new nt("input matrix dimensions do not match");for(var t=new jr(Math.floor(this.width/32)+1),r=this.rowSize,i=this.bits,a=0,s=this.height;a<s;a++)for(var o=a*r,c=e.getRow(a,t).getBitArray(),d=0;d<r;d++)i[o+d]^=c[d]},n.prototype.clear=function(){for(var e=this.bits,t=e.length,r=0;r<t;r++)e[r]=0},n.prototype.setRegion=function(e,t,r,i){if(t<0||e<0)throw new nt("Left and top must be nonnegative");if(i<1||r<1)throw new nt("Height and width must be at least 1");var a=e+r,s=t+i;if(s>this.height||a>this.width)throw new nt("The region must fit inside the matrix");for(var o=this.rowSize,c=this.bits,d=t;d<s;d++)for(var f=d*o,p=e;p<a;p++)c[f+Math.floor(p/32)]|=1<<(p&31)&4294967295},n.prototype.getRow=function(e,t){t==null||t.getSize()<this.width?t=new jr(this.width):t.clear();for(var r=this.rowSize,i=this.bits,a=e*r,s=0;s<r;s++)t.setBulk(s*32,i[a+s]);return t},n.prototype.setRow=function(e,t){_n.arraycopy(t.getBitArray(),0,this.bits,e*this.rowSize,this.rowSize)},n.prototype.rotate180=function(){for(var e=this.getWidth(),t=this.getHeight(),r=new jr(e),i=new jr(e),a=0,s=Math.floor((t+1)/2);a<s;a++)r=this.getRow(a,r),i=this.getRow(t-1-a,i),r.reverse(),i.reverse(),this.setRow(a,i),this.setRow(t-1-a,r)},n.prototype.getEnclosingRectangle=function(){for(var e=this.width,t=this.height,r=this.rowSize,i=this.bits,a=e,s=t,o=-1,c=-1,d=0;d<t;d++)for(var f=0;f<r;f++){var p=i[d*r+f];if(p!==0){if(d<s&&(s=d),d>c&&(c=d),f*32<a){for(var g=0;(p<<31-g&4294967295)===0;)g++;f*32+g<a&&(a=f*32+g)}if(f*32+31>o){for(var g=31;!(p>>>g);)g--;f*32+g>o&&(o=f*32+g)}}}return o<a||c<s?null:Int32Array.from([a,s,o-a+1,c-s+1])},n.prototype.getTopLeftOnBit=function(){for(var e=this.rowSize,t=this.bits,r=0;r<t.length&&t[r]===0;)r++;if(r===t.length)return null;for(var i=r/e,a=r%e*32,s=t[r],o=0;(s<<31-o&4294967295)===0;)o++;return a+=o,Int32Array.from([a,i])},n.prototype.getBottomRightOnBit=function(){for(var e=this.rowSize,t=this.bits,r=t.length-1;r>=0&&t[r]===0;)r--;if(r<0)return null;for(var i=Math.floor(r/e),a=Math.floor(r%e)*32,s=t[r],o=31;!(s>>>o);)o--;return a+=o,Int32Array.from([a,i])},n.prototype.getWidth=function(){return this.width},n.prototype.getHeight=function(){return this.height},n.prototype.getRowSize=function(){return this.rowSize},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.width===t.width&&this.height===t.height&&this.rowSize===t.rowSize&&Tr.equals(this.bits,t.bits)},n.prototype.hashCode=function(){var e=this.width;return e=31*e+this.width,e=31*e+this.height,e=31*e+this.rowSize,e=31*e+Tr.hashCode(this.bits),e},n.prototype.toString=function(e,t,r){return e===void 0&&(e="X "),t===void 0&&(t="  "),r===void 0&&(r=`
`),this.buildToString(e,t,r)},n.prototype.buildToString=function(e,t,r){for(var i=new bt,a=0,s=this.height;a<s;a++){for(var o=0,c=this.width;o<c;o++)i.append(this.get(o,a)?e:t);i.append(r)}return i.toString()},n.prototype.clone=function(){return new n(this.width,this.height,this.rowSize,this.bits.slice())},n}(),Mj=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),xe=function(n){Mj(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.getNotFoundInstance=function(){return new e},e.kind="NotFoundException",e}(Bi),Oj=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Pj=function(n){Oj(e,n);function e(t){var r=n.call(this,t)||this;return r.luminances=e.EMPTY,r.buckets=new Int32Array(e.LUMINANCE_BUCKETS),r}return e.prototype.getBlackRow=function(t,r){var i=this.getLuminanceSource(),a=i.getWidth();r==null||r.getSize()<a?r=new jr(a):r.clear(),this.initArrays(a);for(var s=i.getRow(t,this.luminances),o=this.buckets,c=0;c<a;c++)o[(s[c]&255)>>e.LUMINANCE_SHIFT]++;var d=e.estimateBlackPoint(o);if(a<3)for(var c=0;c<a;c++)(s[c]&255)<d&&r.set(c);else for(var f=s[0]&255,p=s[1]&255,c=1;c<a-1;c++){var g=s[c+1]&255;(p*4-f-g)/2<d&&r.set(c),f=p,p=g}return r},e.prototype.getBlackMatrix=function(){var t=this.getLuminanceSource(),r=t.getWidth(),i=t.getHeight(),a=new Ds(r,i);this.initArrays(r);for(var s=this.buckets,o=1;o<5;o++)for(var c=Math.floor(i*o/5),d=t.getRow(c,this.luminances),f=Math.floor(r*4/5),p=Math.floor(r/5);p<f;p++){var g=d[p]&255;s[g>>e.LUMINANCE_SHIFT]++}for(var y=e.estimateBlackPoint(s),v=t.getMatrix(),o=0;o<i;o++)for(var b=o*r,p=0;p<r;p++){var g=v[b+p]&255;g<y&&a.set(p,o)}return a},e.prototype.createBinarizer=function(t){return new e(t)},e.prototype.initArrays=function(t){this.luminances.length<t&&(this.luminances=new Uint8ClampedArray(t));for(var r=this.buckets,i=0;i<e.LUMINANCE_BUCKETS;i++)r[i]=0},e.estimateBlackPoint=function(t){for(var r=t.length,i=0,a=0,s=0,o=0;o<r;o++)t[o]>s&&(a=o,s=t[o]),t[o]>i&&(i=t[o]);for(var c=0,d=0,o=0;o<r;o++){var f=o-a,p=t[o]*f*f;p>d&&(c=o,d=p)}if(a>c){var g=a;a=c,c=g}if(c-a<=r/16)throw new xe;for(var y=c-1,v=-1,o=c-1;o>a;o--){var b=o-a,p=b*b*(c-o)*(i-t[o]);p>v&&(y=o,v=p)}return y<<e.LUMINANCE_SHIFT},e.LUMINANCE_BITS=5,e.LUMINANCE_SHIFT=8-e.LUMINANCE_BITS,e.LUMINANCE_BUCKETS=1<<e.LUMINANCE_BITS,e.EMPTY=Uint8ClampedArray.from([0]),e}(Ej),kj=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Nj=function(n){kj(e,n);function e(t){var r=n.call(this,t)||this;return r.matrix=null,r}return e.prototype.getBlackMatrix=function(){if(this.matrix!==null)return this.matrix;var t=this.getLuminanceSource(),r=t.getWidth(),i=t.getHeight();if(r>=e.MINIMUM_DIMENSION&&i>=e.MINIMUM_DIMENSION){var a=t.getMatrix(),s=r>>e.BLOCK_SIZE_POWER;(r&e.BLOCK_SIZE_MASK)!==0&&s++;var o=i>>e.BLOCK_SIZE_POWER;(i&e.BLOCK_SIZE_MASK)!==0&&o++;var c=e.calculateBlackPoints(a,s,o,r,i),d=new Ds(r,i);e.calculateThresholdForBlock(a,s,o,r,i,c,d),this.matrix=d}else this.matrix=n.prototype.getBlackMatrix.call(this);return this.matrix},e.prototype.createBinarizer=function(t){return new e(t)},e.calculateThresholdForBlock=function(t,r,i,a,s,o,c){for(var d=s-e.BLOCK_SIZE,f=a-e.BLOCK_SIZE,p=0;p<i;p++){var g=p<<e.BLOCK_SIZE_POWER;g>d&&(g=d);for(var y=e.cap(p,2,i-3),v=0;v<r;v++){var b=v<<e.BLOCK_SIZE_POWER;b>f&&(b=f);for(var A=e.cap(v,2,r-3),E=0,T=-2;T<=2;T++){var C=o[y+T];E+=C[A-2]+C[A-1]+C[A]+C[A+1]+C[A+2]}var D=E/25;e.thresholdBlock(t,b,g,D,a,c)}}},e.cap=function(t,r,i){return t<r?r:t>i?i:t},e.thresholdBlock=function(t,r,i,a,s,o){for(var c=0,d=i*s+r;c<e.BLOCK_SIZE;c++,d+=s)for(var f=0;f<e.BLOCK_SIZE;f++)(t[d+f]&255)<=a&&o.set(r+f,i+c)},e.calculateBlackPoints=function(t,r,i,a,s){for(var o=s-e.BLOCK_SIZE,c=a-e.BLOCK_SIZE,d=new Array(i),f=0;f<i;f++){d[f]=new Int32Array(r);var p=f<<e.BLOCK_SIZE_POWER;p>o&&(p=o);for(var g=0;g<r;g++){var y=g<<e.BLOCK_SIZE_POWER;y>c&&(y=c);for(var v=0,b=255,A=0,E=0,T=p*a+y;E<e.BLOCK_SIZE;E++,T+=a){for(var C=0;C<e.BLOCK_SIZE;C++){var D=t[T+C]&255;v+=D,D<b&&(b=D),D>A&&(A=D)}if(A-b>e.MIN_DYNAMIC_RANGE)for(E++,T+=a;E<e.BLOCK_SIZE;E++,T+=a)for(var C=0;C<e.BLOCK_SIZE;C++)v+=t[T+C]&255}var O=v>>e.BLOCK_SIZE_POWER*2;if(A-b<=e.MIN_DYNAMIC_RANGE&&(O=b/2,f>0&&g>0)){var N=(d[f-1][g]+2*d[f][g-1]+d[f-1][g-1])/4;b<N&&(O=N)}d[f][g]=O}}return d},e.BLOCK_SIZE_POWER=3,e.BLOCK_SIZE=1<<e.BLOCK_SIZE_POWER,e.BLOCK_SIZE_MASK=e.BLOCK_SIZE-1,e.MINIMUM_DIMENSION=e.BLOCK_SIZE*5,e.MIN_DYNAMIC_RANGE=24,e}(Pj),$m=function(){function n(e,t){this.width=e,this.height=t}return n.prototype.getWidth=function(){return this.width},n.prototype.getHeight=function(){return this.height},n.prototype.isCropSupported=function(){return!1},n.prototype.crop=function(e,t,r,i){throw new l1("This luminance source does not support cropping.")},n.prototype.isRotateSupported=function(){return!1},n.prototype.rotateCounterClockwise=function(){throw new l1("This luminance source does not support rotation by 90 degrees.")},n.prototype.rotateCounterClockwise45=function(){throw new l1("This luminance source does not support rotation by 45 degrees.")},n.prototype.toString=function(){for(var e=new Uint8ClampedArray(this.width),t=new bt,r=0;r<this.height;r++){for(var i=this.getRow(r,e),a=0;a<this.width;a++){var s=i[a]&255,o=void 0;s<64?o="#":s<128?o="+":s<192?o=".":o=" ",t.append(o)}t.append(`
`)}return t.toString()},n}(),Lj=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),F_=function(n){Lj(e,n);function e(t){var r=n.call(this,t.getWidth(),t.getHeight())||this;return r.delegate=t,r}return e.prototype.getRow=function(t,r){for(var i=this.delegate.getRow(t,r),a=this.getWidth(),s=0;s<a;s++)i[s]=255-(i[s]&255);return i},e.prototype.getMatrix=function(){for(var t=this.delegate.getMatrix(),r=this.getWidth()*this.getHeight(),i=new Uint8ClampedArray(r),a=0;a<r;a++)i[a]=255-(t[a]&255);return i},e.prototype.isCropSupported=function(){return this.delegate.isCropSupported()},e.prototype.crop=function(t,r,i,a){return new e(this.delegate.crop(t,r,i,a))},e.prototype.isRotateSupported=function(){return this.delegate.isRotateSupported()},e.prototype.invert=function(){return this.delegate},e.prototype.rotateCounterClockwise=function(){return new e(this.delegate.rotateCounterClockwise())},e.prototype.rotateCounterClockwise45=function(){return new e(this.delegate.rotateCounterClockwise45())},e}($m),Bj=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Vj=function(n){Bj(e,n);function e(t,r){r===void 0&&(r=!1);var i=n.call(this,t.width,t.height)||this;return i.canvas=t,i.tempCanvasElement=null,i.buffer=e.makeBufferFromCanvasImageData(t,r),i}return e.makeBufferFromCanvasImageData=function(t,r){r===void 0&&(r=!1);var i=t.getContext("2d").getImageData(0,0,t.width,t.height);return e.toGrayscaleBuffer(i.data,t.width,t.height,r)},e.toGrayscaleBuffer=function(t,r,i,a){a===void 0&&(a=!1);var s=new Uint8ClampedArray(r*i);if(e.FRAME_INDEX=!e.FRAME_INDEX,e.FRAME_INDEX||!a)for(var o=0,c=0,d=t.length;o<d;o+=4,c++){var f=void 0,p=t[o+3];if(p===0)f=255;else{var g=t[o],y=t[o+1],v=t[o+2];f=306*g+601*y+117*v+512>>10}s[c]=f}else for(var o=0,c=0,b=t.length;o<b;o+=4,c++){var f=void 0,p=t[o+3];if(p===0)f=255;else{var g=t[o],y=t[o+1],v=t[o+2];f=306*g+601*y+117*v+512>>10}s[c]=255-f}return s},e.prototype.getRow=function(t,r){if(t<0||t>=this.getHeight())throw new nt("Requested row is outside the image: "+t);var i=this.getWidth(),a=t*i;return r===null?r=this.buffer.slice(a,a+i):(r.length<i&&(r=new Uint8ClampedArray(i)),r.set(this.buffer.slice(a,a+i))),r},e.prototype.getMatrix=function(){return this.buffer},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(t,r,i,a){return n.prototype.crop.call(this,t,r,i,a),this},e.prototype.isRotateSupported=function(){return!0},e.prototype.rotateCounterClockwise=function(){return this.rotate(-90),this},e.prototype.rotateCounterClockwise45=function(){return this.rotate(-45),this},e.prototype.getTempCanvasElement=function(){if(this.tempCanvasElement===null){var t=this.canvas.ownerDocument.createElement("canvas");t.width=this.canvas.width,t.height=this.canvas.height,this.tempCanvasElement=t}return this.tempCanvasElement},e.prototype.rotate=function(t){var r=this.getTempCanvasElement(),i=r.getContext("2d"),a=t*e.DEGREE_TO_RADIANS,s=this.canvas.width,o=this.canvas.height,c=Math.ceil(Math.abs(Math.cos(a))*s+Math.abs(Math.sin(a))*o),d=Math.ceil(Math.abs(Math.sin(a))*s+Math.abs(Math.cos(a))*o);return r.width=c,r.height=d,i.translate(c/2,d/2),i.rotate(a),i.drawImage(this.canvas,s/-2,o/-2),this.buffer=e.makeBufferFromCanvasImageData(r),this},e.prototype.invert=function(){return new F_(this)},e.DEGREE_TO_RADIANS=Math.PI/180,e.FRAME_INDEX=!0,e}($m),Fj=function(){function n(e,t,r){this.deviceId=e,this.label=t,this.kind="videoinput",this.groupId=r||void 0}return n.prototype.toJSON=function(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}},n}(),_i=function(n,e,t,r){function i(a){return a instanceof t?a:new t(function(s){s(a)})}return new(t||(t=Promise))(function(a,s){function o(f){try{d(r.next(f))}catch(p){s(p)}}function c(f){try{d(r.throw(f))}catch(p){s(p)}}function d(f){f.done?a(f.value):i(f.value).then(o,c)}d((r=r.apply(n,e||[])).next())})},bi=function(n,e){var t={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,i,a,s;return s={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function o(d){return function(f){return c([d,f])}}function c(d){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,i&&(a=d[0]&2?i.return:d[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,d[1])).done)return a;switch(i=0,a&&(d=[d[0]&2,a.value]),d[0]){case 0:case 1:a=d;break;case 4:return t.label++,{value:d[1],done:!1};case 5:t.label++,i=d[1],d=[0];continue;case 7:d=t.ops.pop(),t.trys.pop();continue;default:if(a=t.trys,!(a=a.length>0&&a[a.length-1])&&(d[0]===6||d[0]===2)){t=0;continue}if(d[0]===3&&(!a||d[1]>a[0]&&d[1]<a[3])){t.label=d[1];break}if(d[0]===6&&t.label<a[1]){t.label=a[1],a=d;break}if(a&&t.label<a[2]){t.label=a[2],t.ops.push(d);break}a[2]&&t.ops.pop(),t.trys.pop();continue}d=e.call(n,t)}catch(f){d=[6,f],i=0}finally{r=a=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}},jj=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},cf=function(){function n(e,t,r){t===void 0&&(t=500),this.reader=e,this.timeBetweenScansMillis=t,this._hints=r,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}return Object.defineProperty(n.prototype,"hasNavigator",{get:function(){return typeof navigator<"u"},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isMediaDevicesSuported",{get:function(){return this.hasNavigator&&!!navigator.mediaDevices},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"canEnumerateDevices",{get:function(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"timeBetweenDecodingAttempts",{get:function(){return this._timeBetweenDecodingAttempts},set:function(e){this._timeBetweenDecodingAttempts=e<0?0:e},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"hints",{get:function(){return this._hints},set:function(e){this._hints=e||null},enumerable:!1,configurable:!0}),n.prototype.listVideoInputDevices=function(){return _i(this,void 0,void 0,function(){var e,t,r,i,a,s,o,c,d,f,p,g;return bi(this,function(y){switch(y.label){case 0:if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");return[4,navigator.mediaDevices.enumerateDevices()];case 1:e=y.sent(),t=[];try{for(r=jj(e),i=r.next();!i.done;i=r.next())a=i.value,s=a.kind==="video"?"videoinput":a.kind,s==="videoinput"&&(o=a.deviceId||a.id,c=a.label||"Video device "+(t.length+1),d=a.groupId,f={deviceId:o,label:c,kind:s,groupId:d},t.push(f))}catch(v){p={error:v}}finally{try{i&&!i.done&&(g=r.return)&&g.call(r)}finally{if(p)throw p.error}}return[2,t]}})})},n.prototype.getVideoInputDevices=function(){return _i(this,void 0,void 0,function(){var e;return bi(this,function(t){switch(t.label){case 0:return[4,this.listVideoInputDevices()];case 1:return e=t.sent(),[2,e.map(function(r){return new Fj(r.deviceId,r.label)})]}})})},n.prototype.findDeviceById=function(e){return _i(this,void 0,void 0,function(){var t;return bi(this,function(r){switch(r.label){case 0:return[4,this.listVideoInputDevices()];case 1:return t=r.sent(),t?[2,t.find(function(i){return i.deviceId===e})]:[2,null]}})})},n.prototype.decodeFromInputVideoDevice=function(e,t){return _i(this,void 0,void 0,function(){return bi(this,function(r){switch(r.label){case 0:return[4,this.decodeOnceFromVideoDevice(e,t)];case 1:return[2,r.sent()]}})})},n.prototype.decodeOnceFromVideoDevice=function(e,t){return _i(this,void 0,void 0,function(){var r,i;return bi(this,function(a){switch(a.label){case 0:return this.reset(),e?r={deviceId:{exact:e}}:r={facingMode:"environment"},i={video:r},[4,this.decodeOnceFromConstraints(i,t)];case 1:return[2,a.sent()]}})})},n.prototype.decodeOnceFromConstraints=function(e,t){return _i(this,void 0,void 0,function(){var r;return bi(this,function(i){switch(i.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return r=i.sent(),[4,this.decodeOnceFromStream(r,t)];case 2:return[2,i.sent()]}})})},n.prototype.decodeOnceFromStream=function(e,t){return _i(this,void 0,void 0,function(){var r,i;return bi(this,function(a){switch(a.label){case 0:return this.reset(),[4,this.attachStreamToVideo(e,t)];case 1:return r=a.sent(),[4,this.decodeOnce(r)];case 2:return i=a.sent(),[2,i]}})})},n.prototype.decodeFromInputVideoDeviceContinuously=function(e,t,r){return _i(this,void 0,void 0,function(){return bi(this,function(i){switch(i.label){case 0:return[4,this.decodeFromVideoDevice(e,t,r)];case 1:return[2,i.sent()]}})})},n.prototype.decodeFromVideoDevice=function(e,t,r){return _i(this,void 0,void 0,function(){var i,a;return bi(this,function(s){switch(s.label){case 0:return e?i={deviceId:{exact:e}}:i={facingMode:"environment"},a={video:i},[4,this.decodeFromConstraints(a,t,r)];case 1:return[2,s.sent()]}})})},n.prototype.decodeFromConstraints=function(e,t,r){return _i(this,void 0,void 0,function(){var i;return bi(this,function(a){switch(a.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return i=a.sent(),[4,this.decodeFromStream(i,t,r)];case 2:return[2,a.sent()]}})})},n.prototype.decodeFromStream=function(e,t,r){return _i(this,void 0,void 0,function(){var i;return bi(this,function(a){switch(a.label){case 0:return this.reset(),[4,this.attachStreamToVideo(e,t)];case 1:return i=a.sent(),[4,this.decodeContinuously(i,r)];case 2:return[2,a.sent()]}})})},n.prototype.stopAsyncDecode=function(){this._stopAsyncDecode=!0},n.prototype.stopContinuousDecode=function(){this._stopContinuousDecode=!0},n.prototype.attachStreamToVideo=function(e,t){return _i(this,void 0,void 0,function(){var r;return bi(this,function(i){switch(i.label){case 0:return r=this.prepareVideoElement(t),this.addVideoSource(r,e),this.videoElement=r,this.stream=e,[4,this.playVideoOnLoadAsync(r)];case 1:return i.sent(),[2,r]}})})},n.prototype.playVideoOnLoadAsync=function(e){var t=this;return new Promise(function(r,i){return t.playVideoOnLoad(e,function(){return r()})})},n.prototype.playVideoOnLoad=function(e,t){var r=this;this.videoEndedListener=function(){return r.stopStreams()},this.videoCanPlayListener=function(){return r.tryPlayVideo(e)},e.addEventListener("ended",this.videoEndedListener),e.addEventListener("canplay",this.videoCanPlayListener),e.addEventListener("playing",t),this.tryPlayVideo(e)},n.prototype.isVideoPlaying=function(e){return e.currentTime>0&&!e.paused&&!e.ended&&e.readyState>2},n.prototype.tryPlayVideo=function(e){return _i(this,void 0,void 0,function(){return bi(this,function(t){switch(t.label){case 0:if(this.isVideoPlaying(e))return console.warn("Trying to play video that is already playing."),[2];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,e.play()];case 2:return t.sent(),[3,4];case 3:return t.sent(),console.warn("It was not possible to play the video."),[3,4];case 4:return[2]}})})},n.prototype.getMediaElement=function(e,t){var r=document.getElementById(e);if(!r)throw new Ma("element with id '"+e+"' not found");if(r.nodeName.toLowerCase()!==t.toLowerCase())throw new Ma("element with id '"+e+"' must be an "+t+" element");return r},n.prototype.decodeFromImage=function(e,t){if(!e&&!t)throw new Ma("either imageElement with a src set or an url must be provided");return t&&!e?this.decodeFromImageUrl(t):this.decodeFromImageElement(e)},n.prototype.decodeFromVideo=function(e,t){if(!e&&!t)throw new Ma("Either an element with a src set or an URL must be provided");return t&&!e?this.decodeFromVideoUrl(t):this.decodeFromVideoElement(e)},n.prototype.decodeFromVideoContinuously=function(e,t,r){if(e===void 0&&t===void 0)throw new Ma("Either an element with a src set or an URL must be provided");return t&&!e?this.decodeFromVideoUrlContinuously(t,r):this.decodeFromVideoElementContinuously(e,r)},n.prototype.decodeFromImageElement=function(e){if(!e)throw new Ma("An image element must be provided.");this.reset();var t=this.prepareImageElement(e);this.imageElement=t;var r;return this.isImageLoaded(t)?r=this.decodeOnce(t,!1,!0):r=this._decodeOnLoadImage(t),r},n.prototype.decodeFromVideoElement=function(e){var t=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideo(t)},n.prototype.decodeFromVideoElementContinuously=function(e,t){var r=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideoContinuously(r,t)},n.prototype._decodeFromVideoElementSetup=function(e){if(!e)throw new Ma("A video element must be provided.");this.reset();var t=this.prepareVideoElement(e);return this.videoElement=t,t},n.prototype.decodeFromImageUrl=function(e){if(!e)throw new Ma("An URL must be provided.");this.reset();var t=this.prepareImageElement();this.imageElement=t;var r=this._decodeOnLoadImage(t);return t.src=e,r},n.prototype.decodeFromVideoUrl=function(e){if(!e)throw new Ma("An URL must be provided.");this.reset();var t=this.prepareVideoElement(),r=this.decodeFromVideoElement(t);return t.src=e,r},n.prototype.decodeFromVideoUrlContinuously=function(e,t){if(!e)throw new Ma("An URL must be provided.");this.reset();var r=this.prepareVideoElement(),i=this.decodeFromVideoElementContinuously(r,t);return r.src=e,i},n.prototype._decodeOnLoadImage=function(e){var t=this;return new Promise(function(r,i){t.imageLoadedListener=function(){return t.decodeOnce(e,!1,!0).then(r,i)},e.addEventListener("load",t.imageLoadedListener)})},n.prototype._decodeOnLoadVideo=function(e){return _i(this,void 0,void 0,function(){return bi(this,function(t){switch(t.label){case 0:return[4,this.playVideoOnLoadAsync(e)];case 1:return t.sent(),[4,this.decodeOnce(e)];case 2:return[2,t.sent()]}})})},n.prototype._decodeOnLoadVideoContinuously=function(e,t){return _i(this,void 0,void 0,function(){return bi(this,function(r){switch(r.label){case 0:return[4,this.playVideoOnLoadAsync(e)];case 1:return r.sent(),this.decodeContinuously(e,t),[2]}})})},n.prototype.isImageLoaded=function(e){return!(!e.complete||e.naturalWidth===0)},n.prototype.prepareImageElement=function(e){var t;return typeof e>"u"&&(t=document.createElement("img"),t.width=200,t.height=200),typeof e=="string"&&(t=this.getMediaElement(e,"img")),e instanceof HTMLImageElement&&(t=e),t},n.prototype.prepareVideoElement=function(e){var t;return!e&&typeof document<"u"&&(t=document.createElement("video"),t.width=200,t.height=200),typeof e=="string"&&(t=this.getMediaElement(e,"video")),e instanceof HTMLVideoElement&&(t=e),t.setAttribute("autoplay","true"),t.setAttribute("muted","true"),t.setAttribute("playsinline","true"),t},n.prototype.decodeOnce=function(e,t,r){var i=this;t===void 0&&(t=!0),r===void 0&&(r=!0),this._stopAsyncDecode=!1;var a=function(s,o){if(i._stopAsyncDecode){o(new xe("Video stream has ended before any code could be detected.")),i._stopAsyncDecode=void 0;return}try{var c=i.decode(e);s(c)}catch(g){var d=t&&g instanceof xe,f=g instanceof Vr||g instanceof Be,p=f&&r;if(d||p)return setTimeout(a,i._timeBetweenDecodingAttempts,s,o);o(g)}};return new Promise(function(s,o){return a(s,o)})},n.prototype.decodeContinuously=function(e,t){var r=this;this._stopContinuousDecode=!1;var i=function(){if(r._stopContinuousDecode){r._stopContinuousDecode=void 0;return}try{var a=r.decode(e);t(a,null),setTimeout(i,r.timeBetweenScansMillis)}catch(c){t(null,c);var s=c instanceof Vr||c instanceof Be,o=c instanceof xe;(s||o)&&setTimeout(i,r._timeBetweenDecodingAttempts)}};i()},n.prototype.decode=function(e){var t=this.createBinaryBitmap(e);return this.decodeBitmap(t)},n.prototype.createBinaryBitmap=function(e){this.getCaptureCanvasContext(e);var t=!1;e instanceof HTMLVideoElement?(this.drawFrameOnCanvas(e),t=!0):this.drawImageOnCanvas(e);var r=this.getCaptureCanvas(e),i=new Vj(r,t),a=new Nj(i);return new bj(a)},n.prototype.getCaptureCanvasContext=function(e){if(!this.captureCanvasContext){var t=this.getCaptureCanvas(e),r=void 0;try{r=t.getContext("2d",{willReadFrequently:!0})}catch{r=t.getContext("2d")}this.captureCanvasContext=r}return this.captureCanvasContext},n.prototype.getCaptureCanvas=function(e){if(!this.captureCanvas){var t=this.createCaptureCanvas(e);this.captureCanvas=t}return this.captureCanvas},n.prototype.drawFrameOnCanvas=function(e,t,r){t===void 0&&(t={sx:0,sy:0,sWidth:e.videoWidth,sHeight:e.videoHeight,dx:0,dy:0,dWidth:e.videoWidth,dHeight:e.videoHeight}),r===void 0&&(r=this.captureCanvasContext),r.drawImage(e,t.sx,t.sy,t.sWidth,t.sHeight,t.dx,t.dy,t.dWidth,t.dHeight)},n.prototype.drawImageOnCanvas=function(e,t,r){t===void 0&&(t={sx:0,sy:0,sWidth:e.naturalWidth,sHeight:e.naturalHeight,dx:0,dy:0,dWidth:e.naturalWidth,dHeight:e.naturalHeight}),r===void 0&&(r=this.captureCanvasContext),r.drawImage(e,t.sx,t.sy,t.sWidth,t.sHeight,t.dx,t.dy,t.dWidth,t.dHeight)},n.prototype.decodeBitmap=function(e){return this.reader.decode(e,this._hints)},n.prototype.createCaptureCanvas=function(e){if(typeof document>"u")return this._destroyCaptureCanvas(),null;var t=document.createElement("canvas"),r,i;return typeof e<"u"&&(e instanceof HTMLVideoElement?(r=e.videoWidth,i=e.videoHeight):e instanceof HTMLImageElement&&(r=e.naturalWidth||e.width,i=e.naturalHeight||e.height)),t.style.width=r+"px",t.style.height=i+"px",t.width=r,t.height=i,t},n.prototype.stopStreams=function(){this.stream&&(this.stream.getVideoTracks().forEach(function(e){return e.stop()}),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()},n.prototype.reset=function(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()},n.prototype._destroyVideoElement=function(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)},n.prototype._destroyImageElement=function(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)},n.prototype._destroyCaptureCanvas=function(){this.captureCanvasContext=void 0,this.captureCanvas=void 0},n.prototype.addVideoSource=function(e,t){try{e.srcObject=t}catch{e.src=URL.createObjectURL(t)}},n.prototype.cleanVideoSource=function(e){try{e.srcObject=null}catch{e.src=""}this.videoElement.removeAttribute("src")},n}(),gi=function(){function n(e,t,r,i,a,s){r===void 0&&(r=t==null?0:8*t.length),s===void 0&&(s=_n.currentTimeMillis()),this.text=e,this.rawBytes=t,this.numBits=r,this.resultPoints=i,this.format=a,this.timestamp=s,this.text=e,this.rawBytes=t,r==null?this.numBits=t==null?0:8*t.length:this.numBits=r,this.resultPoints=i,this.format=a,this.resultMetadata=null,s==null?this.timestamp=_n.currentTimeMillis():this.timestamp=s}return n.prototype.getText=function(){return this.text},n.prototype.getRawBytes=function(){return this.rawBytes},n.prototype.getNumBits=function(){return this.numBits},n.prototype.getResultPoints=function(){return this.resultPoints},n.prototype.getBarcodeFormat=function(){return this.format},n.prototype.getResultMetadata=function(){return this.resultMetadata},n.prototype.putMetadata=function(e,t){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(e,t)},n.prototype.putAllMetadata=function(e){e!==null&&(this.resultMetadata===null?this.resultMetadata=e:this.resultMetadata=new Map(e))},n.prototype.addResultPoints=function(e){var t=this.resultPoints;if(t===null)this.resultPoints=e;else if(e!==null&&e.length>0){var r=new Array(t.length+e.length);_n.arraycopy(t,0,r,0,t.length),_n.arraycopy(e,0,r,t.length,e.length),this.resultPoints=r}},n.prototype.getTimestamp=function(){return this.timestamp},n.prototype.toString=function(){return this.text},n}(),X2;(function(n){n[n.AZTEC=0]="AZTEC",n[n.CODABAR=1]="CODABAR",n[n.CODE_39=2]="CODE_39",n[n.CODE_93=3]="CODE_93",n[n.CODE_128=4]="CODE_128",n[n.DATA_MATRIX=5]="DATA_MATRIX",n[n.EAN_8=6]="EAN_8",n[n.EAN_13=7]="EAN_13",n[n.ITF=8]="ITF",n[n.MAXICODE=9]="MAXICODE",n[n.PDF_417=10]="PDF_417",n[n.QR_CODE=11]="QR_CODE",n[n.RSS_14=12]="RSS_14",n[n.RSS_EXPANDED=13]="RSS_EXPANDED",n[n.UPC_A=14]="UPC_A",n[n.UPC_E=15]="UPC_E",n[n.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(X2||(X2={}));const Je=X2;var K2;(function(n){n[n.OTHER=0]="OTHER",n[n.ORIENTATION=1]="ORIENTATION",n[n.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",n[n.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",n[n.ISSUE_NUMBER=4]="ISSUE_NUMBER",n[n.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",n[n.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",n[n.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",n[n.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",n[n.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",n[n.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(K2||(K2={}));const ei=K2;var Gm=function(){function n(e,t,r,i,a,s){a===void 0&&(a=-1),s===void 0&&(s=-1),this.rawBytes=e,this.text=t,this.byteSegments=r,this.ecLevel=i,this.structuredAppendSequenceNumber=a,this.structuredAppendParity=s,this.numBits=e==null?0:8*e.length}return n.prototype.getRawBytes=function(){return this.rawBytes},n.prototype.getNumBits=function(){return this.numBits},n.prototype.setNumBits=function(e){this.numBits=e},n.prototype.getText=function(){return this.text},n.prototype.getByteSegments=function(){return this.byteSegments},n.prototype.getECLevel=function(){return this.ecLevel},n.prototype.getErrorsCorrected=function(){return this.errorsCorrected},n.prototype.setErrorsCorrected=function(e){this.errorsCorrected=e},n.prototype.getErasures=function(){return this.erasures},n.prototype.setErasures=function(e){this.erasures=e},n.prototype.getOther=function(){return this.other},n.prototype.setOther=function(e){this.other=e},n.prototype.hasStructuredAppend=function(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0},n.prototype.getStructuredAppendParity=function(){return this.structuredAppendParity},n.prototype.getStructuredAppendSequenceNumber=function(){return this.structuredAppendSequenceNumber},n}(),Vh=function(){function n(){}return n.prototype.exp=function(e){return this.expTable[e]},n.prototype.log=function(e){if(e===0)throw new nt;return this.logTable[e]},n.addOrSubtract=function(e,t){return e^t},n}(),Sl=function(){function n(e,t){if(t.length===0)throw new nt;this.field=e;var r=t.length;if(r>1&&t[0]===0){for(var i=1;i<r&&t[i]===0;)i++;i===r?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(r-i),_n.arraycopy(t,i,this.coefficients,0,this.coefficients.length))}else this.coefficients=t}return n.prototype.getCoefficients=function(){return this.coefficients},n.prototype.getDegree=function(){return this.coefficients.length-1},n.prototype.isZero=function(){return this.coefficients[0]===0},n.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},n.prototype.evaluateAt=function(e){if(e===0)return this.getCoefficient(0);var t=this.coefficients,r;if(e===1){r=0;for(var i=0,a=t.length;i!==a;i++){var s=t[i];r=Vh.addOrSubtract(r,s)}return r}r=t[0];for(var o=t.length,c=this.field,i=1;i<o;i++)r=Vh.addOrSubtract(c.multiply(e,r),t[i]);return r},n.prototype.addOrSubtract=function(e){if(!this.field.equals(e.field))throw new nt("GenericGFPolys do not have same GenericGF field");if(this.isZero())return e;if(e.isZero())return this;var t=this.coefficients,r=e.coefficients;if(t.length>r.length){var i=t;t=r,r=i}var a=new Int32Array(r.length),s=r.length-t.length;_n.arraycopy(r,0,a,0,s);for(var o=s;o<r.length;o++)a[o]=Vh.addOrSubtract(t[o-s],r[o]);return new n(this.field,a)},n.prototype.multiply=function(e){if(!this.field.equals(e.field))throw new nt("GenericGFPolys do not have same GenericGF field");if(this.isZero()||e.isZero())return this.field.getZero();for(var t=this.coefficients,r=t.length,i=e.coefficients,a=i.length,s=new Int32Array(r+a-1),o=this.field,c=0;c<r;c++)for(var d=t[c],f=0;f<a;f++)s[c+f]=Vh.addOrSubtract(s[c+f],o.multiply(d,i[f]));return new n(o,s)},n.prototype.multiplyScalar=function(e){if(e===0)return this.field.getZero();if(e===1)return this;for(var t=this.coefficients.length,r=this.field,i=new Int32Array(t),a=this.coefficients,s=0;s<t;s++)i[s]=r.multiply(a[s],e);return new n(r,i)},n.prototype.multiplyByMonomial=function(e,t){if(e<0)throw new nt;if(t===0)return this.field.getZero();for(var r=this.coefficients,i=r.length,a=new Int32Array(i+e),s=this.field,o=0;o<i;o++)a[o]=s.multiply(r[o],t);return new n(s,a)},n.prototype.divide=function(e){if(!this.field.equals(e.field))throw new nt("GenericGFPolys do not have same GenericGF field");if(e.isZero())throw new nt("Divide by 0");for(var t=this.field,r=t.getZero(),i=this,a=e.getCoefficient(e.getDegree()),s=t.inverse(a);i.getDegree()>=e.getDegree()&&!i.isZero();){var o=i.getDegree()-e.getDegree(),c=t.multiply(i.getCoefficient(i.getDegree()),s),d=e.multiplyByMonomial(o,c),f=t.buildMonomial(o,c);r=r.addOrSubtract(f),i=i.addOrSubtract(d)}return[r,i]},n.prototype.toString=function(){for(var e="",t=this.getDegree();t>=0;t--){var r=this.getCoefficient(t);if(r!==0){if(r<0?(e+=" - ",r=-r):e.length>0&&(e+=" + "),t===0||r!==1){var i=this.field.log(r);i===0?e+="1":i===1?e+="a":(e+="a^",e+=i)}t!==0&&(t===1?e+="x":(e+="x^",e+=t))}}return e},n}(),Uj=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),E4=function(n){Uj(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="ArithmeticException",e}(Bi),Hj=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),ki=function(n){Hj(e,n);function e(t,r,i){var a=n.call(this)||this;a.primitive=t,a.size=r,a.generatorBase=i;for(var s=new Int32Array(r),o=1,c=0;c<r;c++)s[c]=o,o*=2,o>=r&&(o^=t,o&=r-1);a.expTable=s;for(var d=new Int32Array(r),c=0;c<r-1;c++)d[s[c]]=c;return a.logTable=d,a.zero=new Sl(a,Int32Array.from([0])),a.one=new Sl(a,Int32Array.from([1])),a}return e.prototype.getZero=function(){return this.zero},e.prototype.getOne=function(){return this.one},e.prototype.buildMonomial=function(t,r){if(t<0)throw new nt;if(r===0)return this.zero;var i=new Int32Array(t+1);return i[0]=r,new Sl(this,i)},e.prototype.inverse=function(t){if(t===0)throw new E4;return this.expTable[this.size-this.logTable[t]-1]},e.prototype.multiply=function(t,r){return t===0||r===0?0:this.expTable[(this.logTable[t]+this.logTable[r])%(this.size-1)]},e.prototype.getSize=function(){return this.size},e.prototype.getGeneratorBase=function(){return this.generatorBase},e.prototype.toString=function(){return"GF(0x"+Tt.toHexString(this.primitive)+","+this.size+")"},e.prototype.equals=function(t){return t===this},e.AZTEC_DATA_12=new e(4201,4096,1),e.AZTEC_DATA_10=new e(1033,1024,1),e.AZTEC_DATA_6=new e(67,64,1),e.AZTEC_PARAM=new e(19,16,1),e.QR_CODE_FIELD_256=new e(285,256,0),e.DATA_MATRIX_FIELD_256=new e(301,256,1),e.AZTEC_DATA_8=e.DATA_MATRIX_FIELD_256,e.MAXICODE_FIELD_64=e.AZTEC_DATA_6,e}(Vh),zj=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Mg=function(n){zj(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="ReedSolomonException",e}(Bi),$j=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),z0=function(n){$j(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="IllegalStateException",e}(Bi),Wm=function(){function n(e){this.field=e}return n.prototype.decode=function(e,t){for(var r=this.field,i=new Sl(r,e),a=new Int32Array(t),s=!0,o=0;o<t;o++){var c=i.evaluateAt(r.exp(o+r.getGeneratorBase()));a[a.length-1-o]=c,c!==0&&(s=!1)}if(!s)for(var d=new Sl(r,a),f=this.runEuclideanAlgorithm(r.buildMonomial(t,1),d,t),p=f[0],g=f[1],y=this.findErrorLocations(p),v=this.findErrorMagnitudes(g,y),o=0;o<y.length;o++){var b=e.length-1-r.log(y[o]);if(b<0)throw new Mg("Bad error location");e[b]=ki.addOrSubtract(e[b],v[o])}},n.prototype.runEuclideanAlgorithm=function(e,t,r){if(e.getDegree()<t.getDegree()){var i=e;e=t,t=i}for(var a=this.field,s=e,o=t,c=a.getZero(),d=a.getOne();o.getDegree()>=(r/2|0);){var f=s,p=c;if(s=o,c=d,s.isZero())throw new Mg("r_{i-1} was zero");o=f;for(var g=a.getZero(),y=s.getCoefficient(s.getDegree()),v=a.inverse(y);o.getDegree()>=s.getDegree()&&!o.isZero();){var b=o.getDegree()-s.getDegree(),A=a.multiply(o.getCoefficient(o.getDegree()),v);g=g.addOrSubtract(a.buildMonomial(b,A)),o=o.addOrSubtract(s.multiplyByMonomial(b,A))}if(d=g.multiply(c).addOrSubtract(p),o.getDegree()>=s.getDegree())throw new z0("Division algorithm failed to reduce polynomial?")}var E=d.getCoefficient(0);if(E===0)throw new Mg("sigmaTilde(0) was zero");var T=a.inverse(E),C=d.multiplyScalar(T),D=o.multiplyScalar(T);return[C,D]},n.prototype.findErrorLocations=function(e){var t=e.getDegree();if(t===1)return Int32Array.from([e.getCoefficient(1)]);for(var r=new Int32Array(t),i=0,a=this.field,s=1;s<a.getSize()&&i<t;s++)e.evaluateAt(s)===0&&(r[i]=a.inverse(s),i++);if(i!==t)throw new Mg("Error locator degree does not match number of roots");return r},n.prototype.findErrorMagnitudes=function(e,t){for(var r=t.length,i=new Int32Array(r),a=this.field,s=0;s<r;s++){for(var o=a.inverse(t[s]),c=1,d=0;d<r;d++)if(s!==d){var f=a.multiply(t[d],o),p=(f&1)===0?f|1:f&-2;c=a.multiply(c,p)}i[s]=a.multiply(e.evaluateAt(o),a.inverse(c)),a.getGeneratorBase()!==0&&(i[s]=a.multiply(i[s],o))}return i},n}(),Xr;(function(n){n[n.UPPER=0]="UPPER",n[n.LOWER=1]="LOWER",n[n.MIXED=2]="MIXED",n[n.DIGIT=3]="DIGIT",n[n.PUNCT=4]="PUNCT",n[n.BINARY=5]="BINARY"})(Xr||(Xr={}));var rI=function(){function n(){}return n.prototype.decode=function(e){this.ddata=e;var t=e.getBits(),r=this.extractBits(t),i=this.correctBits(r),a=n.convertBoolArrayToByteArray(i),s=n.getEncodedData(i),o=new Gm(a,s,null,null);return o.setNumBits(i.length),o},n.highLevelDecode=function(e){return this.getEncodedData(e)},n.getEncodedData=function(e){for(var t=e.length,r=Xr.UPPER,i=Xr.UPPER,a="",s=0;s<t;)if(i===Xr.BINARY){if(t-s<5)break;var o=n.readCode(e,s,5);if(s+=5,o===0){if(t-s<11)break;o=n.readCode(e,s,11)+31,s+=11}for(var c=0;c<o;c++){if(t-s<8){s=t;break}var d=n.readCode(e,s,8);a+=jt.castAsNonUtf8Char(d),s+=8}i=r}else{var f=i===Xr.DIGIT?4:5;if(t-s<f)break;var d=n.readCode(e,s,f);s+=f;var p=n.getCharacter(i,d);p.startsWith("CTRL_")?(r=i,i=n.getTable(p.charAt(5)),p.charAt(6)==="L"&&(r=i)):(a+=p,i=r)}return a},n.getTable=function(e){switch(e){case"L":return Xr.LOWER;case"P":return Xr.PUNCT;case"M":return Xr.MIXED;case"D":return Xr.DIGIT;case"B":return Xr.BINARY;case"U":default:return Xr.UPPER}},n.getCharacter=function(e,t){switch(e){case Xr.UPPER:return n.UPPER_TABLE[t];case Xr.LOWER:return n.LOWER_TABLE[t];case Xr.MIXED:return n.MIXED_TABLE[t];case Xr.PUNCT:return n.PUNCT_TABLE[t];case Xr.DIGIT:return n.DIGIT_TABLE[t];default:throw new z0("Bad table")}},n.prototype.correctBits=function(e){var t,r;this.ddata.getNbLayers()<=2?(r=6,t=ki.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(r=8,t=ki.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(r=10,t=ki.AZTEC_DATA_10):(r=12,t=ki.AZTEC_DATA_12);var i=this.ddata.getNbDatablocks(),a=e.length/r;if(a<i)throw new Be;for(var s=e.length%r,o=new Int32Array(a),c=0;c<a;c++,s+=r)o[c]=n.readCode(e,s,r);try{var d=new Wm(t);d.decode(o,a-i)}catch(A){throw new Be(A)}for(var f=(1<<r)-1,p=0,c=0;c<i;c++){var g=o[c];if(g===0||g===f)throw new Be;(g===1||g===f-1)&&p++}for(var y=new Array(i*r-p),v=0,c=0;c<i;c++){var g=o[c];if(g===1||g===f-1)y.fill(g>1,v,v+r-1),v+=r-1;else for(var b=r-1;b>=0;--b)y[v++]=(g&1<<b)!==0}return y},n.prototype.extractBits=function(e){var t=this.ddata.isCompact(),r=this.ddata.getNbLayers(),i=(t?11:14)+r*4,a=new Int32Array(i),s=new Array(this.totalBitsInLayer(r,t));if(t)for(var o=0;o<a.length;o++)a[o]=o;else for(var c=i+1+2*Tt.truncDivision(Tt.truncDivision(i,2)-1,15),d=i/2,f=Tt.truncDivision(c,2),o=0;o<d;o++){var p=o+Tt.truncDivision(o,15);a[d-o-1]=f-p-1,a[d+o]=f+p+1}for(var o=0,g=0;o<r;o++){for(var y=(r-o)*4+(t?9:12),v=o*2,b=i-1-v,A=0;A<y;A++)for(var E=A*2,T=0;T<2;T++)s[g+E+T]=e.get(a[v+T],a[v+A]),s[g+2*y+E+T]=e.get(a[v+A],a[b-T]),s[g+4*y+E+T]=e.get(a[b-T],a[b-A]),s[g+6*y+E+T]=e.get(a[b-A],a[v+T]);g+=y*8}return s},n.readCode=function(e,t,r){for(var i=0,a=t;a<t+r;a++)i<<=1,e[a]&&(i|=1);return i},n.readByte=function(e,t){var r=e.length-t;return r>=8?n.readCode(e,t,8):n.readCode(e,t,r)<<8-r},n.convertBoolArrayToByteArray=function(e){for(var t=new Uint8Array((e.length+7)/8),r=0;r<t.length;r++)t[r]=n.readByte(e,8*r);return t},n.prototype.totalBitsInLayer=function(e,t){return((t?88:112)+16*e)*e},n.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],n.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],n.MIXED_TABLE=["CTRL_PS"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~","","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],n.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],n.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"],n}(),$t=function(){function n(){}return n.round=function(e){return isNaN(e)?0:e<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:e>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:e+(e<0?-.5:.5)|0},n.distance=function(e,t,r,i){var a=e-r,s=t-i;return Math.sqrt(a*a+s*s)},n.sum=function(e){for(var t=0,r=0,i=e.length;r!==i;r++){var a=e[r];t+=a}return t},n}(),Q2=function(){function n(){}return n.floatToIntBits=function(e){return e},n.MAX_VALUE=Number.MAX_SAFE_INTEGER,n}(),qe=function(){function n(e,t){this.x=e,this.y=t}return n.prototype.getX=function(){return this.x},n.prototype.getY=function(){return this.y},n.prototype.equals=function(e){if(e instanceof n){var t=e;return this.x===t.x&&this.y===t.y}return!1},n.prototype.hashCode=function(){return 31*Q2.floatToIntBits(this.x)+Q2.floatToIntBits(this.y)},n.prototype.toString=function(){return"("+this.x+","+this.y+")"},n.orderBestPatterns=function(e){var t=this.distance(e[0],e[1]),r=this.distance(e[1],e[2]),i=this.distance(e[0],e[2]),a,s,o;if(r>=t&&r>=i?(s=e[0],a=e[1],o=e[2]):i>=r&&i>=t?(s=e[1],a=e[0],o=e[2]):(s=e[2],a=e[0],o=e[1]),this.crossProductZ(a,s,o)<0){var c=a;a=o,o=c}e[0]=a,e[1]=s,e[2]=o},n.distance=function(e,t){return $t.distance(e.x,e.y,t.x,t.y)},n.crossProductZ=function(e,t,r){var i=t.x,a=t.y;return(r.x-i)*(e.y-a)-(r.y-a)*(e.x-i)},n}(),j_=function(){function n(e,t){this.bits=e,this.points=t}return n.prototype.getBits=function(){return this.bits},n.prototype.getPoints=function(){return this.points},n}(),Gj=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Wj=function(n){Gj(e,n);function e(t,r,i,a,s){var o=n.call(this,t,r)||this;return o.compact=i,o.nbDatablocks=a,o.nbLayers=s,o}return e.prototype.getNbLayers=function(){return this.nbLayers},e.prototype.getNbDatablocks=function(){return this.nbDatablocks},e.prototype.isCompact=function(){return this.compact},e}(j_),Z2=function(){function n(e,t,r,i){this.image=e,this.height=e.getHeight(),this.width=e.getWidth(),t==null&&(t=n.INIT_SIZE),r==null&&(r=e.getWidth()/2|0),i==null&&(i=e.getHeight()/2|0);var a=t/2|0;if(this.leftInit=r-a,this.rightInit=r+a,this.upInit=i-a,this.downInit=i+a,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new xe}return n.prototype.detect=function(){for(var e=this.leftInit,t=this.rightInit,r=this.upInit,i=this.downInit,a=!1,s=!0,o=!1,c=!1,d=!1,f=!1,p=!1,g=this.width,y=this.height;s;){s=!1;for(var v=!0;(v||!c)&&t<g;)v=this.containsBlackPoint(r,i,t,!1),v?(t++,s=!0,c=!0):c||t++;if(t>=g){a=!0;break}for(var b=!0;(b||!d)&&i<y;)b=this.containsBlackPoint(e,t,i,!0),b?(i++,s=!0,d=!0):d||i++;if(i>=y){a=!0;break}for(var A=!0;(A||!f)&&e>=0;)A=this.containsBlackPoint(r,i,e,!1),A?(e--,s=!0,f=!0):f||e--;if(e<0){a=!0;break}for(var E=!0;(E||!p)&&r>=0;)E=this.containsBlackPoint(e,t,r,!0),E?(r--,s=!0,p=!0):p||r--;if(r<0){a=!0;break}s&&(o=!0)}if(!a&&o){for(var T=t-e,C=null,D=1;C===null&&D<T;D++)C=this.getBlackPointOnSegment(e,i-D,e+D,i);if(C==null)throw new xe;for(var O=null,D=1;O===null&&D<T;D++)O=this.getBlackPointOnSegment(e,r+D,e+D,r);if(O==null)throw new xe;for(var N=null,D=1;N===null&&D<T;D++)N=this.getBlackPointOnSegment(t,r+D,t-D,r);if(N==null)throw new xe;for(var M=null,D=1;M===null&&D<T;D++)M=this.getBlackPointOnSegment(t,i-D,t-D,i);if(M==null)throw new xe;return this.centerEdges(M,C,N,O)}else throw new xe},n.prototype.getBlackPointOnSegment=function(e,t,r,i){for(var a=$t.round($t.distance(e,t,r,i)),s=(r-e)/a,o=(i-t)/a,c=this.image,d=0;d<a;d++){var f=$t.round(e+d*s),p=$t.round(t+d*o);if(c.get(f,p))return new qe(f,p)}return null},n.prototype.centerEdges=function(e,t,r,i){var a=e.getX(),s=e.getY(),o=t.getX(),c=t.getY(),d=r.getX(),f=r.getY(),p=i.getX(),g=i.getY(),y=n.CORR;return a<this.width/2?[new qe(p-y,g+y),new qe(o+y,c+y),new qe(d-y,f-y),new qe(a+y,s-y)]:[new qe(p+y,g+y),new qe(o+y,c-y),new qe(d-y,f+y),new qe(a-y,s-y)]},n.prototype.containsBlackPoint=function(e,t,r,i){var a=this.image;if(i){for(var s=e;s<=t;s++)if(a.get(s,r))return!0}else for(var o=e;o<=t;o++)if(a.get(r,o))return!0;return!1},n.INIT_SIZE=10,n.CORR=1,n}(),iI=function(){function n(){}return n.checkAndNudgePoints=function(e,t){for(var r=e.getWidth(),i=e.getHeight(),a=!0,s=0;s<t.length&&a;s+=2){var o=Math.floor(t[s]),c=Math.floor(t[s+1]);if(o<-1||o>r||c<-1||c>i)throw new xe;a=!1,o===-1?(t[s]=0,a=!0):o===r&&(t[s]=r-1,a=!0),c===-1?(t[s+1]=0,a=!0):c===i&&(t[s+1]=i-1,a=!0)}a=!0;for(var s=t.length-2;s>=0&&a;s-=2){var o=Math.floor(t[s]),c=Math.floor(t[s+1]);if(o<-1||o>r||c<-1||c>i)throw new xe;a=!1,o===-1?(t[s]=0,a=!0):o===r&&(t[s]=r-1,a=!0),c===-1?(t[s+1]=0,a=!0):c===i&&(t[s+1]=i-1,a=!0)}},n}(),S4=function(){function n(e,t,r,i,a,s,o,c,d){this.a11=e,this.a21=t,this.a31=r,this.a12=i,this.a22=a,this.a32=s,this.a13=o,this.a23=c,this.a33=d}return n.quadrilateralToQuadrilateral=function(e,t,r,i,a,s,o,c,d,f,p,g,y,v,b,A){var E=n.quadrilateralToSquare(e,t,r,i,a,s,o,c),T=n.squareToQuadrilateral(d,f,p,g,y,v,b,A);return T.times(E)},n.prototype.transformPoints=function(e){for(var t=e.length,r=this.a11,i=this.a12,a=this.a13,s=this.a21,o=this.a22,c=this.a23,d=this.a31,f=this.a32,p=this.a33,g=0;g<t;g+=2){var y=e[g],v=e[g+1],b=a*y+c*v+p;e[g]=(r*y+s*v+d)/b,e[g+1]=(i*y+o*v+f)/b}},n.prototype.transformPointsWithValues=function(e,t){for(var r=this.a11,i=this.a12,a=this.a13,s=this.a21,o=this.a22,c=this.a23,d=this.a31,f=this.a32,p=this.a33,g=e.length,y=0;y<g;y++){var v=e[y],b=t[y],A=a*v+c*b+p;e[y]=(r*v+s*b+d)/A,t[y]=(i*v+o*b+f)/A}},n.squareToQuadrilateral=function(e,t,r,i,a,s,o,c){var d=e-r+a-o,f=t-i+s-c;if(d===0&&f===0)return new n(r-e,a-r,e,i-t,s-i,t,0,0,1);var p=r-a,g=o-a,y=i-s,v=c-s,b=p*v-g*y,A=(d*v-g*f)/b,E=(p*f-d*y)/b;return new n(r-e+A*r,o-e+E*o,e,i-t+A*i,c-t+E*c,t,A,E,1)},n.quadrilateralToSquare=function(e,t,r,i,a,s,o,c){return n.squareToQuadrilateral(e,t,r,i,a,s,o,c).buildAdjoint()},n.prototype.buildAdjoint=function(){return new n(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)},n.prototype.times=function(e){return new n(this.a11*e.a11+this.a21*e.a12+this.a31*e.a13,this.a11*e.a21+this.a21*e.a22+this.a31*e.a23,this.a11*e.a31+this.a21*e.a32+this.a31*e.a33,this.a12*e.a11+this.a22*e.a12+this.a32*e.a13,this.a12*e.a21+this.a22*e.a22+this.a32*e.a23,this.a12*e.a31+this.a22*e.a32+this.a32*e.a33,this.a13*e.a11+this.a23*e.a12+this.a33*e.a13,this.a13*e.a21+this.a23*e.a22+this.a33*e.a23,this.a13*e.a31+this.a23*e.a32+this.a33*e.a33)},n}(),Yj=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),qj=function(n){Yj(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.sampleGrid=function(t,r,i,a,s,o,c,d,f,p,g,y,v,b,A,E,T,C,D){var O=S4.quadrilateralToQuadrilateral(a,s,o,c,d,f,p,g,y,v,b,A,E,T,C,D);return this.sampleGridWithTransform(t,r,i,O)},e.prototype.sampleGridWithTransform=function(t,r,i,a){if(r<=0||i<=0)throw new xe;for(var s=new Ds(r,i),o=new Float32Array(2*r),c=0;c<i;c++){for(var d=o.length,f=c+.5,p=0;p<d;p+=2)o[p]=p/2+.5,o[p+1]=f;a.transformPoints(o),iI.checkAndNudgePoints(t,o);try{for(var p=0;p<d;p+=2)t.get(Math.floor(o[p]),Math.floor(o[p+1]))&&s.set(p/2,c)}catch{throw new xe}}return s},e}(iI),U_=function(){function n(){}return n.setGridSampler=function(e){n.gridSampler=e},n.getInstance=function(){return n.gridSampler},n.gridSampler=new qj,n}(),Ri=function(){function n(e,t){this.x=e,this.y=t}return n.prototype.toResultPoint=function(){return new qe(this.getX(),this.getY())},n.prototype.getX=function(){return this.x},n.prototype.getY=function(){return this.y},n}(),Xj=function(){function n(e){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=e}return n.prototype.detect=function(){return this.detectMirror(!1)},n.prototype.detectMirror=function(e){var t=this.getMatrixCenter(),r=this.getBullsEyeCorners(t);if(e){var i=r[0];r[0]=r[2],r[2]=i}this.extractParameters(r);var a=this.sampleGrid(this.image,r[this.shift%4],r[(this.shift+1)%4],r[(this.shift+2)%4],r[(this.shift+3)%4]),s=this.getMatrixCornerPoints(r);return new Wj(a,s,this.compact,this.nbDataBlocks,this.nbLayers)},n.prototype.extractParameters=function(e){if(!this.isValidPoint(e[0])||!this.isValidPoint(e[1])||!this.isValidPoint(e[2])||!this.isValidPoint(e[3]))throw new xe;var t=2*this.nbCenterLayers,r=new Int32Array([this.sampleLine(e[0],e[1],t),this.sampleLine(e[1],e[2],t),this.sampleLine(e[2],e[3],t),this.sampleLine(e[3],e[0],t)]);this.shift=this.getRotation(r,t);for(var i=0,a=0;a<4;a++){var s=r[(this.shift+a)%4];this.compact?(i<<=7,i+=s>>1&127):(i<<=10,i+=(s>>2&992)+(s>>1&31))}var o=this.getCorrectedParameterData(i,this.compact);this.compact?(this.nbLayers=(o>>6)+1,this.nbDataBlocks=(o&63)+1):(this.nbLayers=(o>>11)+1,this.nbDataBlocks=(o&2047)+1)},n.prototype.getRotation=function(e,t){var r=0;e.forEach(function(a,s,o){var c=(a>>t-2<<1)+(a&1);r=(r<<3)+c}),r=((r&1)<<11)+(r>>1);for(var i=0;i<4;i++)if(Tt.bitCount(r^this.EXPECTED_CORNER_BITS[i])<=2)return i;throw new xe},n.prototype.getCorrectedParameterData=function(e,t){var r,i;t?(r=7,i=2):(r=10,i=4);for(var a=r-i,s=new Int32Array(r),o=r-1;o>=0;--o)s[o]=e&15,e>>=4;try{var c=new Wm(ki.AZTEC_PARAM);c.decode(s,a)}catch{throw new xe}for(var d=0,o=0;o<i;o++)d=(d<<4)+s[o];return d},n.prototype.getBullsEyeCorners=function(e){var t=e,r=e,i=e,a=e,s=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){var o=this.getFirstDifferent(t,s,1,-1),c=this.getFirstDifferent(r,s,1,1),d=this.getFirstDifferent(i,s,-1,1),f=this.getFirstDifferent(a,s,-1,-1);if(this.nbCenterLayers>2){var p=this.distancePoint(f,o)*this.nbCenterLayers/(this.distancePoint(a,t)*(this.nbCenterLayers+2));if(p<.75||p>1.25||!this.isWhiteOrBlackRectangle(o,c,d,f))break}t=o,r=c,i=d,a=f,s=!s}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new xe;this.compact=this.nbCenterLayers===5;var g=new qe(t.getX()+.5,t.getY()-.5),y=new qe(r.getX()+.5,r.getY()+.5),v=new qe(i.getX()-.5,i.getY()+.5),b=new qe(a.getX()-.5,a.getY()-.5);return this.expandSquare([g,y,v,b],2*this.nbCenterLayers-3,2*this.nbCenterLayers)},n.prototype.getMatrixCenter=function(){var e,t,r,i;try{var a=new Z2(this.image).detect();e=a[0],t=a[1],r=a[2],i=a[3]}catch{var s=this.image.getWidth()/2,o=this.image.getHeight()/2;e=this.getFirstDifferent(new Ri(s+7,o-7),!1,1,-1).toResultPoint(),t=this.getFirstDifferent(new Ri(s+7,o+7),!1,1,1).toResultPoint(),r=this.getFirstDifferent(new Ri(s-7,o+7),!1,-1,1).toResultPoint(),i=this.getFirstDifferent(new Ri(s-7,o-7),!1,-1,-1).toResultPoint()}var c=$t.round((e.getX()+i.getX()+t.getX()+r.getX())/4),d=$t.round((e.getY()+i.getY()+t.getY()+r.getY())/4);try{var a=new Z2(this.image,15,c,d).detect();e=a[0],t=a[1],r=a[2],i=a[3]}catch{e=this.getFirstDifferent(new Ri(c+7,d-7),!1,1,-1).toResultPoint(),t=this.getFirstDifferent(new Ri(c+7,d+7),!1,1,1).toResultPoint(),r=this.getFirstDifferent(new Ri(c-7,d+7),!1,-1,1).toResultPoint(),i=this.getFirstDifferent(new Ri(c-7,d-7),!1,-1,-1).toResultPoint()}return c=$t.round((e.getX()+i.getX()+t.getX()+r.getX())/4),d=$t.round((e.getY()+i.getY()+t.getY()+r.getY())/4),new Ri(c,d)},n.prototype.getMatrixCornerPoints=function(e){return this.expandSquare(e,2*this.nbCenterLayers,this.getDimension())},n.prototype.sampleGrid=function(e,t,r,i,a){var s=U_.getInstance(),o=this.getDimension(),c=o/2-this.nbCenterLayers,d=o/2+this.nbCenterLayers;return s.sampleGrid(e,o,o,c,c,d,c,d,d,c,d,t.getX(),t.getY(),r.getX(),r.getY(),i.getX(),i.getY(),a.getX(),a.getY())},n.prototype.sampleLine=function(e,t,r){for(var i=0,a=this.distanceResultPoint(e,t),s=a/r,o=e.getX(),c=e.getY(),d=s*(t.getX()-e.getX())/a,f=s*(t.getY()-e.getY())/a,p=0;p<r;p++)this.image.get($t.round(o+p*d),$t.round(c+p*f))&&(i|=1<<r-p-1);return i},n.prototype.isWhiteOrBlackRectangle=function(e,t,r,i){var a=3;e=new Ri(e.getX()-a,e.getY()+a),t=new Ri(t.getX()-a,t.getY()-a),r=new Ri(r.getX()+a,r.getY()-a),i=new Ri(i.getX()+a,i.getY()+a);var s=this.getColor(i,e);if(s===0)return!1;var o=this.getColor(e,t);return o!==s||(o=this.getColor(t,r),o!==s)?!1:(o=this.getColor(r,i),o===s)},n.prototype.getColor=function(e,t){for(var r=this.distancePoint(e,t),i=(t.getX()-e.getX())/r,a=(t.getY()-e.getY())/r,s=0,o=e.getX(),c=e.getY(),d=this.image.get(e.getX(),e.getY()),f=Math.ceil(r),p=0;p<f;p++)o+=i,c+=a,this.image.get($t.round(o),$t.round(c))!==d&&s++;var g=s/r;return g>.1&&g<.9?0:g<=.1===d?1:-1},n.prototype.getFirstDifferent=function(e,t,r,i){for(var a=e.getX()+r,s=e.getY()+i;this.isValid(a,s)&&this.image.get(a,s)===t;)a+=r,s+=i;for(a-=r,s-=i;this.isValid(a,s)&&this.image.get(a,s)===t;)a+=r;for(a-=r;this.isValid(a,s)&&this.image.get(a,s)===t;)s+=i;return s-=i,new Ri(a,s)},n.prototype.expandSquare=function(e,t,r){var i=r/(2*t),a=e[0].getX()-e[2].getX(),s=e[0].getY()-e[2].getY(),o=(e[0].getX()+e[2].getX())/2,c=(e[0].getY()+e[2].getY())/2,d=new qe(o+i*a,c+i*s),f=new qe(o-i*a,c-i*s);a=e[1].getX()-e[3].getX(),s=e[1].getY()-e[3].getY(),o=(e[1].getX()+e[3].getX())/2,c=(e[1].getY()+e[3].getY())/2;var p=new qe(o+i*a,c+i*s),g=new qe(o-i*a,c-i*s),y=[d,p,f,g];return y},n.prototype.isValid=function(e,t){return e>=0&&e<this.image.getWidth()&&t>0&&t<this.image.getHeight()},n.prototype.isValidPoint=function(e){var t=$t.round(e.getX()),r=$t.round(e.getY());return this.isValid(t,r)},n.prototype.distancePoint=function(e,t){return $t.distance(e.getX(),e.getY(),t.getX(),t.getY())},n.prototype.distanceResultPoint=function(e,t){return $t.distance(e.getX(),e.getY(),t.getX(),t.getY())},n.prototype.getDimension=function(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(Tt.truncDivision(this.nbLayers-4,8)+1)+15},n}(),J2=function(){function n(){}return n.prototype.decode=function(e,t){t===void 0&&(t=null);var r=null,i=new Xj(e.getBlackMatrix()),a=null,s=null;try{var o=i.detectMirror(!1);a=o.getPoints(),this.reportFoundResultPoints(t,a),s=new rI().decode(o)}catch(p){r=p}if(s==null)try{var o=i.detectMirror(!0);a=o.getPoints(),this.reportFoundResultPoints(t,a),s=new rI().decode(o)}catch(p){throw r??p}var c=new gi(s.getText(),s.getRawBytes(),s.getNumBits(),a,Je.AZTEC,_n.currentTimeMillis()),d=s.getByteSegments();d!=null&&c.putMetadata(ei.BYTE_SEGMENTS,d);var f=s.getECLevel();return f!=null&&c.putMetadata(ei.ERROR_CORRECTION_LEVEL,f),c},n.prototype.reportFoundResultPoints=function(e,t){if(e!=null){var r=e.get(On.NEED_RESULT_POINT_CALLBACK);r!=null&&t.forEach(function(i,a,s){r.foundPossibleResultPoint(i)})}},n.prototype.reset=function(){},n}(),Kj=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();(function(n){Kj(e,n);function e(t){return t===void 0&&(t=500),n.call(this,new J2,t)||this}return e})(cf);var Cr=function(){function n(){}return n.prototype.decode=function(e,t){try{return this.doDecode(e,t)}catch{var r=t&&t.get(On.TRY_HARDER)===!0;if(r&&e.isRotateSupported()){var i=e.rotateCounterClockwise(),a=this.doDecode(i,t),s=a.getResultMetadata(),o=270;s!==null&&s.get(ei.ORIENTATION)===!0&&(o=o+s.get(ei.ORIENTATION)%360),a.putMetadata(ei.ORIENTATION,o);var c=a.getResultPoints();if(c!==null)for(var d=i.getHeight(),f=0;f<c.length;f++)c[f]=new qe(d-c[f].getY()-1,c[f].getX());return a}else throw new xe}},n.prototype.reset=function(){},n.prototype.doDecode=function(e,t){var r=e.getWidth(),i=e.getHeight(),a=new jr(r),s=t&&t.get(On.TRY_HARDER)===!0,o=Math.max(1,i>>(s?8:5)),c;s?c=i:c=15;for(var d=Math.trunc(i/2),f=0;f<c;f++){var p=Math.trunc((f+1)/2),g=(f&1)===0,y=d+o*(g?p:-p);if(y<0||y>=i)break;try{a=e.getBlackRow(y,a)}catch{continue}for(var v=function(T){if(T===1&&(a.reverse(),t&&t.get(On.NEED_RESULT_POINT_CALLBACK)===!0)){var C=new Map;t.forEach(function(N,M){return C.set(M,N)}),C.delete(On.NEED_RESULT_POINT_CALLBACK),t=C}try{var D=b.decodeRow(y,a,t);if(T===1){D.putMetadata(ei.ORIENTATION,180);var O=D.getResultPoints();O!==null&&(O[0]=new qe(r-O[0].getX()-1,O[0].getY()),O[1]=new qe(r-O[1].getX()-1,O[1].getY()))}return{value:D}}catch{}},b=this,A=0;A<2;A++){var E=v(A);if(typeof E=="object")return E.value}}throw new xe},n.recordPattern=function(e,t,r){for(var i=r.length,a=0;a<i;a++)r[a]=0;var s=e.getSize();if(t>=s)throw new xe;for(var o=!e.get(t),c=0,d=t;d<s;){if(e.get(d)!==o)r[c]++;else{if(++c===i)break;r[c]=1,o=!o}d++}if(!(c===i||c===i-1&&d===s))throw new xe},n.recordPatternInReverse=function(e,t,r){for(var i=r.length,a=e.get(t);t>0&&i>=0;)e.get(--t)!==a&&(i--,a=!a);if(i>=0)throw new xe;n.recordPattern(e,t+1,r)},n.patternMatchVariance=function(e,t,r){for(var i=e.length,a=0,s=0,o=0;o<i;o++)a+=e[o],s+=t[o];if(a<s)return Number.POSITIVE_INFINITY;var c=a/s;r*=c;for(var d=0,f=0;f<i;f++){var p=e[f],g=t[f]*c,y=p>g?p-g:g-p;if(y>r)return Number.POSITIVE_INFINITY;d+=y}return d/a},n}(),Qj=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),aI=function(n){Qj(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.findStartPattern=function(t){for(var r=t.getSize(),i=t.getNextSet(0),a=0,s=Int32Array.from([0,0,0,0,0,0]),o=i,c=!1,d=6,f=i;f<r;f++)if(t.get(f)!==c)s[a]++;else{if(a===d-1){for(var p=e.MAX_AVG_VARIANCE,g=-1,y=e.CODE_START_A;y<=e.CODE_START_C;y++){var v=Cr.patternMatchVariance(s,e.CODE_PATTERNS[y],e.MAX_INDIVIDUAL_VARIANCE);v<p&&(p=v,g=y)}if(g>=0&&t.isRange(Math.max(0,o-(f-o)/2),o,!1))return Int32Array.from([o,f,g]);o+=s[0]+s[1],s=s.slice(2,s.length),s[a-1]=0,s[a]=0,a--}else a++;s[a]=1,c=!c}throw new xe},e.decodeCode=function(t,r,i){Cr.recordPattern(t,i,r);for(var a=e.MAX_AVG_VARIANCE,s=-1,o=0;o<e.CODE_PATTERNS.length;o++){var c=e.CODE_PATTERNS[o],d=this.patternMatchVariance(r,c,e.MAX_INDIVIDUAL_VARIANCE);d<a&&(a=d,s=o)}if(s>=0)return s;throw new xe},e.prototype.decodeRow=function(t,r,i){var a=i&&i.get(On.ASSUME_GS1)===!0,s=e.findStartPattern(r),o=s[2],c=0,d=new Uint8Array(20);d[c++]=o;var f;switch(o){case e.CODE_START_A:f=e.CODE_CODE_A;break;case e.CODE_START_B:f=e.CODE_CODE_B;break;case e.CODE_START_C:f=e.CODE_CODE_C;break;default:throw new Be}for(var p=!1,g=!1,y="",v=s[0],b=s[1],A=Int32Array.from([0,0,0,0,0,0]),E=0,T=0,C=o,D=0,O=!0,N=!1,M=!1;!p;){var R=g;switch(g=!1,E=T,T=e.decodeCode(r,A,b),d[c++]=T,T!==e.CODE_STOP&&(O=!0),T!==e.CODE_STOP&&(D++,C+=D*T),v=b,b+=A.reduce(function(Y,Q){return Y+Q},0),T){case e.CODE_START_A:case e.CODE_START_B:case e.CODE_START_C:throw new Be}switch(f){case e.CODE_CODE_A:if(T<64)M===N?y+=String.fromCharCode(32+T):y+=String.fromCharCode(32+T+128),M=!1;else if(T<96)M===N?y+=String.fromCharCode(T-64):y+=String.fromCharCode(T+64),M=!1;else switch(T!==e.CODE_STOP&&(O=!1),T){case e.CODE_FNC_1:a&&(y.length===0?y+="]C1":y+="");break;case e.CODE_FNC_2:case e.CODE_FNC_3:break;case e.CODE_FNC_4_A:!N&&M?(N=!0,M=!1):N&&M?(N=!1,M=!1):M=!0;break;case e.CODE_SHIFT:g=!0,f=e.CODE_CODE_B;break;case e.CODE_CODE_B:f=e.CODE_CODE_B;break;case e.CODE_CODE_C:f=e.CODE_CODE_C;break;case e.CODE_STOP:p=!0;break}break;case e.CODE_CODE_B:if(T<96)M===N?y+=String.fromCharCode(32+T):y+=String.fromCharCode(32+T+128),M=!1;else switch(T!==e.CODE_STOP&&(O=!1),T){case e.CODE_FNC_1:a&&(y.length===0?y+="]C1":y+="");break;case e.CODE_FNC_2:case e.CODE_FNC_3:break;case e.CODE_FNC_4_B:!N&&M?(N=!0,M=!1):N&&M?(N=!1,M=!1):M=!0;break;case e.CODE_SHIFT:g=!0,f=e.CODE_CODE_A;break;case e.CODE_CODE_A:f=e.CODE_CODE_A;break;case e.CODE_CODE_C:f=e.CODE_CODE_C;break;case e.CODE_STOP:p=!0;break}break;case e.CODE_CODE_C:if(T<100)T<10&&(y+="0"),y+=T;else switch(T!==e.CODE_STOP&&(O=!1),T){case e.CODE_FNC_1:a&&(y.length===0?y+="]C1":y+="");break;case e.CODE_CODE_A:f=e.CODE_CODE_A;break;case e.CODE_CODE_B:f=e.CODE_CODE_B;break;case e.CODE_STOP:p=!0;break}break}R&&(f=f===e.CODE_CODE_A?e.CODE_CODE_B:e.CODE_CODE_A)}var I=b-v;if(b=r.getNextUnset(b),!r.isRange(b,Math.min(r.getSize(),b+(b-v)/2),!1))throw new xe;if(C-=D*E,C%103!==E)throw new Vr;var B=y.length;if(B===0)throw new xe;B>0&&O&&(f===e.CODE_CODE_C?y=y.substring(0,B-2):y=y.substring(0,B-1));for(var L=(s[1]+s[0])/2,k=v+I/2,F=d.length,q=new Uint8Array(F),X=0;X<F;X++)q[X]=d[X];var G=[new qe(L,t),new qe(k,t)];return new gi(y,q,0,G,Je.CODE_128,new Date().getTime())},e.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],e.MAX_AVG_VARIANCE=.25,e.MAX_INDIVIDUAL_VARIANCE=.7,e.CODE_SHIFT=98,e.CODE_CODE_C=99,e.CODE_CODE_B=100,e.CODE_CODE_A=101,e.CODE_FNC_1=102,e.CODE_FNC_2=97,e.CODE_FNC_3=96,e.CODE_FNC_4_A=101,e.CODE_FNC_4_B=100,e.CODE_START_A=103,e.CODE_START_B=104,e.CODE_START_C=105,e.CODE_STOP=106,e}(Cr),Zj=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Px=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},sI=function(n){Zj(e,n);function e(t,r){t===void 0&&(t=!1),r===void 0&&(r=!1);var i=n.call(this)||this;return i.usingCheckDigit=t,i.extendedMode=r,i.decodeRowResult="",i.counters=new Int32Array(9),i}return e.prototype.decodeRow=function(t,r,i){var a,s,o,c,d=this.counters;d.fill(0),this.decodeRowResult="";var f=e.findAsteriskPattern(r,d),p=r.getNextSet(f[1]),g=r.getSize(),y,v;do{e.recordPattern(r,p,d);var b=e.toNarrowWidePattern(d);if(b<0)throw new xe;y=e.patternToChar(b),this.decodeRowResult+=y,v=p;try{for(var A=(a=void 0,Px(d)),E=A.next();!E.done;E=A.next()){var T=E.value;p+=T}}catch(F){a={error:F}}finally{try{E&&!E.done&&(s=A.return)&&s.call(A)}finally{if(a)throw a.error}}p=r.getNextSet(p)}while(y!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var C=0;try{for(var D=Px(d),O=D.next();!O.done;O=D.next()){var T=O.value;C+=T}}catch(F){o={error:F}}finally{try{O&&!O.done&&(c=D.return)&&c.call(D)}finally{if(o)throw o.error}}var N=p-v-C;if(p!==g&&N*2<C)throw new xe;if(this.usingCheckDigit){for(var M=this.decodeRowResult.length-1,R=0,I=0;I<M;I++)R+=e.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(I));if(this.decodeRowResult.charAt(M)!==e.ALPHABET_STRING.charAt(R%43))throw new Vr;this.decodeRowResult=this.decodeRowResult.substring(0,M)}if(this.decodeRowResult.length===0)throw new xe;var B;this.extendedMode?B=e.decodeExtended(this.decodeRowResult):B=this.decodeRowResult;var L=(f[1]+f[0])/2,k=v+C/2;return new gi(B,null,0,[new qe(L,t),new qe(k,t)],Je.CODE_39,new Date().getTime())},e.findAsteriskPattern=function(t,r){for(var i=t.getSize(),a=t.getNextSet(0),s=0,o=a,c=!1,d=r.length,f=a;f<i;f++)if(t.get(f)!==c)r[s]++;else{if(s===d-1){if(this.toNarrowWidePattern(r)===e.ASTERISK_ENCODING&&t.isRange(Math.max(0,o-Math.floor((f-o)/2)),o,!1))return[o,f];o+=r[0]+r[1],r.copyWithin(0,2,2+s-1),r[s-1]=0,r[s]=0,s--}else s++;r[s]=1,c=!c}throw new xe},e.toNarrowWidePattern=function(t){var r,i,a=t.length,s=0,o;do{var c=2147483647;try{for(var d=(r=void 0,Px(t)),f=d.next();!f.done;f=d.next()){var p=f.value;p<c&&p>s&&(c=p)}}catch(b){r={error:b}}finally{try{f&&!f.done&&(i=d.return)&&i.call(d)}finally{if(r)throw r.error}}s=c,o=0;for(var g=0,y=0,v=0;v<a;v++){var p=t[v];p>s&&(y|=1<<a-1-v,o++,g+=p)}if(o===3){for(var v=0;v<a&&o>0;v++){var p=t[v];if(p>s&&(o--,p*2>=g))return-1}return y}}while(o>3);return-1},e.patternToChar=function(t){for(var r=0;r<e.CHARACTER_ENCODINGS.length;r++)if(e.CHARACTER_ENCODINGS[r]===t)return e.ALPHABET_STRING.charAt(r);if(t===e.ASTERISK_ENCODING)return"*";throw new xe},e.decodeExtended=function(t){for(var r=t.length,i="",a=0;a<r;a++){var s=t.charAt(a);if(s==="+"||s==="$"||s==="%"||s==="/"){var o=t.charAt(a+1),c="\0";switch(s){case"+":if(o>="A"&&o<="Z")c=String.fromCharCode(o.charCodeAt(0)+32);else throw new Be;break;case"$":if(o>="A"&&o<="Z")c=String.fromCharCode(o.charCodeAt(0)-64);else throw new Be;break;case"%":if(o>="A"&&o<="E")c=String.fromCharCode(o.charCodeAt(0)-38);else if(o>="F"&&o<="J")c=String.fromCharCode(o.charCodeAt(0)-11);else if(o>="K"&&o<="O")c=String.fromCharCode(o.charCodeAt(0)+16);else if(o>="P"&&o<="T")c=String.fromCharCode(o.charCodeAt(0)+43);else if(o==="U")c="\0";else if(o==="V")c="@";else if(o==="W")c="`";else if(o==="X"||o==="Y"||o==="Z")c="";else throw new Be;break;case"/":if(o>="A"&&o<="O")c=String.fromCharCode(o.charCodeAt(0)-32);else if(o==="Z")c=":";else throw new Be;break}i+=c,a++}else i+=s}return i},e.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",e.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],e.ASTERISK_ENCODING=148,e}(Cr),Jj=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),kx=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},oI=function(n){Jj(e,n);function e(){var t=n.call(this)||this;return t.decodeRowResult="",t.counters=new Int32Array(6),t}return e.prototype.decodeRow=function(t,r,i){var a,s,o,c,d=this.findAsteriskPattern(r),f=r.getNextSet(d[1]),p=r.getSize(),g=this.counters;g.fill(0),this.decodeRowResult="";var y,v;do{e.recordPattern(r,f,g);var b=this.toPattern(g);if(b<0)throw new xe;y=this.patternToChar(b),this.decodeRowResult+=y,v=f;try{for(var A=(a=void 0,kx(g)),E=A.next();!E.done;E=A.next()){var T=E.value;f+=T}}catch(I){a={error:I}}finally{try{E&&!E.done&&(s=A.return)&&s.call(A)}finally{if(a)throw a.error}}f=r.getNextSet(f)}while(y!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var C=0;try{for(var D=kx(g),O=D.next();!O.done;O=D.next()){var T=O.value;C+=T}}catch(I){o={error:I}}finally{try{O&&!O.done&&(c=D.return)&&c.call(D)}finally{if(o)throw o.error}}if(f===p||!r.get(f))throw new xe;if(this.decodeRowResult.length<2)throw new xe;this.checkChecksums(this.decodeRowResult),this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-2);var N=this.decodeExtended(this.decodeRowResult),M=(d[1]+d[0])/2,R=v+C/2;return new gi(N,null,0,[new qe(M,t),new qe(R,t)],Je.CODE_93,new Date().getTime())},e.prototype.findAsteriskPattern=function(t){var r=t.getSize(),i=t.getNextSet(0);this.counters.fill(0);for(var a=this.counters,s=i,o=!1,c=a.length,d=0,f=i;f<r;f++)if(t.get(f)!==o)a[d]++;else{if(d===c-1){if(this.toPattern(a)===e.ASTERISK_ENCODING)return new Int32Array([s,f]);s+=a[0]+a[1],a.copyWithin(0,2,2+d-1),a[d-1]=0,a[d]=0,d--}else d++;a[d]=1,o=!o}throw new xe},e.prototype.toPattern=function(t){var r,i,a=0;try{for(var s=kx(t),o=s.next();!o.done;o=s.next()){var c=o.value;a+=c}}catch(v){r={error:v}}finally{try{o&&!o.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}for(var d=0,f=t.length,p=0;p<f;p++){var g=Math.round(t[p]*9/a);if(g<1||g>4)return-1;if((p&1)===0)for(var y=0;y<g;y++)d=d<<1|1;else d<<=g}return d},e.prototype.patternToChar=function(t){for(var r=0;r<e.CHARACTER_ENCODINGS.length;r++)if(e.CHARACTER_ENCODINGS[r]===t)return e.ALPHABET_STRING.charAt(r);throw new xe},e.prototype.decodeExtended=function(t){for(var r=t.length,i="",a=0;a<r;a++){var s=t.charAt(a);if(s>="a"&&s<="d"){if(a>=r-1)throw new Be;var o=t.charAt(a+1),c="\0";switch(s){case"d":if(o>="A"&&o<="Z")c=String.fromCharCode(o.charCodeAt(0)+32);else throw new Be;break;case"a":if(o>="A"&&o<="Z")c=String.fromCharCode(o.charCodeAt(0)-64);else throw new Be;break;case"b":if(o>="A"&&o<="E")c=String.fromCharCode(o.charCodeAt(0)-38);else if(o>="F"&&o<="J")c=String.fromCharCode(o.charCodeAt(0)-11);else if(o>="K"&&o<="O")c=String.fromCharCode(o.charCodeAt(0)+16);else if(o>="P"&&o<="T")c=String.fromCharCode(o.charCodeAt(0)+43);else if(o==="U")c="\0";else if(o==="V")c="@";else if(o==="W")c="`";else if(o>="X"&&o<="Z")c="";else throw new Be;break;case"c":if(o>="A"&&o<="O")c=String.fromCharCode(o.charCodeAt(0)-32);else if(o==="Z")c=":";else throw new Be;break}i+=c,a++}else i+=s}return i},e.prototype.checkChecksums=function(t){var r=t.length;this.checkOneChecksum(t,r-2,20),this.checkOneChecksum(t,r-1,15)},e.prototype.checkOneChecksum=function(t,r,i){for(var a=1,s=0,o=r-1;o>=0;o--)s+=a*e.ALPHABET_STRING.indexOf(t.charAt(o)),++a>i&&(a=1);if(t.charAt(r)!==e.ALPHABET_STRING[s%47])throw new Vr},e.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%abcd*",e.CHARACTER_ENCODINGS=[276,328,324,322,296,292,290,336,274,266,424,420,418,404,402,394,360,356,354,308,282,344,332,326,300,278,436,434,428,422,406,410,364,358,310,314,302,468,466,458,366,374,430,294,474,470,306,350],e.ASTERISK_ENCODING=e.CHARACTER_ENCODINGS[47],e}(Cr),eU=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),tU=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},lI=function(n){eU(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.narrowLineWidth=-1,t}return e.prototype.decodeRow=function(t,r,i){var a,s,o=this.decodeStart(r),c=this.decodeEnd(r),d=new bt;e.decodeMiddle(r,o[1],c[0],d);var f=d.toString(),p=null;i!=null&&(p=i.get(On.ALLOWED_LENGTHS)),p==null&&(p=e.DEFAULT_ALLOWED_LENGTHS);var g=f.length,y=!1,v=0;try{for(var b=tU(p),A=b.next();!A.done;A=b.next()){var E=A.value;if(g===E){y=!0;break}E>v&&(v=E)}}catch(D){a={error:D}}finally{try{A&&!A.done&&(s=b.return)&&s.call(b)}finally{if(a)throw a.error}}if(!y&&g>v&&(y=!0),!y)throw new Be;var T=[new qe(o[1],t),new qe(c[0],t)],C=new gi(f,null,0,T,Je.ITF,new Date().getTime());return C},e.decodeMiddle=function(t,r,i,a){var s=new Int32Array(10),o=new Int32Array(5),c=new Int32Array(5);for(s.fill(0),o.fill(0),c.fill(0);r<i;){Cr.recordPattern(t,r,s);for(var d=0;d<5;d++){var f=2*d;o[d]=s[f],c[d]=s[f+1]}var p=e.decodeDigit(o);a.append(p.toString()),p=this.decodeDigit(c),a.append(p.toString()),s.forEach(function(g){r+=g})}},e.prototype.decodeStart=function(t){var r=e.skipWhiteSpace(t),i=e.findGuardPattern(t,r,e.START_PATTERN);return this.narrowLineWidth=(i[1]-i[0])/4,this.validateQuietZone(t,i[0]),i},e.prototype.validateQuietZone=function(t,r){var i=this.narrowLineWidth*10;i=i<r?i:r;for(var a=r-1;i>0&&a>=0&&!t.get(a);a--)i--;if(i!==0)throw new xe},e.skipWhiteSpace=function(t){var r=t.getSize(),i=t.getNextSet(0);if(i===r)throw new xe;return i},e.prototype.decodeEnd=function(t){t.reverse();try{var r=e.skipWhiteSpace(t),i=void 0;try{i=e.findGuardPattern(t,r,e.END_PATTERN_REVERSED[0])}catch(s){s instanceof xe&&(i=e.findGuardPattern(t,r,e.END_PATTERN_REVERSED[1]))}this.validateQuietZone(t,i[0]);var a=i[0];return i[0]=t.getSize()-i[1],i[1]=t.getSize()-a,i}finally{t.reverse()}},e.findGuardPattern=function(t,r,i){var a=i.length,s=new Int32Array(a),o=t.getSize(),c=!1,d=0,f=r;s.fill(0);for(var p=r;p<o;p++)if(t.get(p)!==c)s[d]++;else{if(d===a-1){if(Cr.patternMatchVariance(s,i,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return[f,p];f+=s[0]+s[1],_n.arraycopy(s,2,s,0,d-1),s[d-1]=0,s[d]=0,d--}else d++;s[d]=1,c=!c}throw new xe},e.decodeDigit=function(t){for(var r=e.MAX_AVG_VARIANCE,i=-1,a=e.PATTERNS.length,s=0;s<a;s++){var o=e.PATTERNS[s],c=Cr.patternMatchVariance(t,o,e.MAX_INDIVIDUAL_VARIANCE);c<r?(r=c,i=s):c===r&&(i=-1)}if(i>=0)return i%10;throw new xe},e.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],e.MAX_AVG_VARIANCE=.38,e.MAX_INDIVIDUAL_VARIANCE=.5,e.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],e.START_PATTERN=Int32Array.from([1,1,1,1]),e.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])],e}(Cr),nU=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Hd=function(n){nU(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.decodeRowStringBuffer="",t}return e.findStartGuardPattern=function(t){for(var r=!1,i,a=0,s=Int32Array.from([0,0,0]);!r;){s=Int32Array.from([0,0,0]),i=e.findGuardPattern(t,a,!1,this.START_END_PATTERN,s);var o=i[0];a=i[1];var c=o-(a-o);c>=0&&(r=t.isRange(c,o,!1))}return i},e.checkChecksum=function(t){return e.checkStandardUPCEANChecksum(t)},e.checkStandardUPCEANChecksum=function(t){var r=t.length;if(r===0)return!1;var i=parseInt(t.charAt(r-1),10);return e.getStandardUPCEANChecksum(t.substring(0,r-1))===i},e.getStandardUPCEANChecksum=function(t){for(var r=t.length,i=0,a=r-1;a>=0;a-=2){var s=t.charAt(a).charCodeAt(0)-48;if(s<0||s>9)throw new Be;i+=s}i*=3;for(var a=r-2;a>=0;a-=2){var s=t.charAt(a).charCodeAt(0)-48;if(s<0||s>9)throw new Be;i+=s}return(1e3-i)%10},e.decodeEnd=function(t,r){return e.findGuardPattern(t,r,!1,e.START_END_PATTERN,new Int32Array(e.START_END_PATTERN.length).fill(0))},e.findGuardPatternWithoutCounters=function(t,r,i,a){return this.findGuardPattern(t,r,i,a,new Int32Array(a.length))},e.findGuardPattern=function(t,r,i,a,s){var o=t.getSize();r=i?t.getNextUnset(r):t.getNextSet(r);for(var c=0,d=r,f=a.length,p=i,g=r;g<o;g++)if(t.get(g)!==p)s[c]++;else{if(c===f-1){if(Cr.patternMatchVariance(s,a,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return Int32Array.from([d,g]);d+=s[0]+s[1];for(var y=s.slice(2,s.length),v=0;v<c-1;v++)s[v]=y[v];s[c-1]=0,s[c]=0,c--}else c++;s[c]=1,p=!p}throw new xe},e.decodeDigit=function(t,r,i,a){this.recordPattern(t,i,r);for(var s=this.MAX_AVG_VARIANCE,o=-1,c=a.length,d=0;d<c;d++){var f=a[d],p=Cr.patternMatchVariance(r,f,e.MAX_INDIVIDUAL_VARIANCE);p<s&&(s=p,o=d)}if(o>=0)return o;throw new xe},e.MAX_AVG_VARIANCE=.48,e.MAX_INDIVIDUAL_VARIANCE=.7,e.START_END_PATTERN=Int32Array.from([1,1,1]),e.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),e.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),e.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])],e}(Cr),rU=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},iU=function(){function n(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return n.prototype.decodeRow=function(e,t,r){var i=this.decodeRowStringBuffer,a=this.decodeMiddle(t,r,i),s=i.toString(),o=n.parseExtensionString(s),c=[new qe((r[0]+r[1])/2,e),new qe(a,e)],d=new gi(s,null,0,c,Je.UPC_EAN_EXTENSION,new Date().getTime());return o!=null&&d.putAllMetadata(o),d},n.prototype.decodeMiddle=function(e,t,r){var i,a,s=this.decodeMiddleCounters;s[0]=0,s[1]=0,s[2]=0,s[3]=0;for(var o=e.getSize(),c=t[1],d=0,f=0;f<5&&c<o;f++){var p=Hd.decodeDigit(e,s,c,Hd.L_AND_G_PATTERNS);r+=String.fromCharCode(48+p%10);try{for(var g=(i=void 0,rU(s)),y=g.next();!y.done;y=g.next()){var v=y.value;c+=v}}catch(A){i={error:A}}finally{try{y&&!y.done&&(a=g.return)&&a.call(g)}finally{if(i)throw i.error}}p>=10&&(d|=1<<4-f),f!==4&&(c=e.getNextSet(c),c=e.getNextUnset(c))}if(r.length!==5)throw new xe;var b=this.determineCheckDigit(d);if(n.extensionChecksum(r.toString())!==b)throw new xe;return c},n.extensionChecksum=function(e){for(var t=e.length,r=0,i=t-2;i>=0;i-=2)r+=e.charAt(i).charCodeAt(0)-48;r*=3;for(var i=t-1;i>=0;i-=2)r+=e.charAt(i).charCodeAt(0)-48;return r*=3,r%10},n.prototype.determineCheckDigit=function(e){for(var t=0;t<10;t++)if(e===this.CHECK_DIGIT_ENCODINGS[t])return t;throw new xe},n.parseExtensionString=function(e){if(e.length!==5)return null;var t=n.parseExtension5String(e);return t==null?null:new Map([[ei.SUGGESTED_PRICE,t]])},n.parseExtension5String=function(e){var t;switch(e.charAt(0)){case"0":t="£";break;case"5":t="$";break;case"9":switch(e){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}t="";break;default:t="";break}var r=parseInt(e.substring(1)),i=(r/100).toString(),a=r%100,s=a<10?"0"+a:a.toString();return t+i+"."+s},n}(),aU=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},sU=function(){function n(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return n.prototype.decodeRow=function(e,t,r){var i=this.decodeRowStringBuffer,a=this.decodeMiddle(t,r,i),s=i.toString(),o=n.parseExtensionString(s),c=[new qe((r[0]+r[1])/2,e),new qe(a,e)],d=new gi(s,null,0,c,Je.UPC_EAN_EXTENSION,new Date().getTime());return o!=null&&d.putAllMetadata(o),d},n.prototype.decodeMiddle=function(e,t,r){var i,a,s=this.decodeMiddleCounters;s[0]=0,s[1]=0,s[2]=0,s[3]=0;for(var o=e.getSize(),c=t[1],d=0,f=0;f<2&&c<o;f++){var p=Hd.decodeDigit(e,s,c,Hd.L_AND_G_PATTERNS);r+=String.fromCharCode(48+p%10);try{for(var g=(i=void 0,aU(s)),y=g.next();!y.done;y=g.next()){var v=y.value;c+=v}}catch(b){i={error:b}}finally{try{y&&!y.done&&(a=g.return)&&a.call(g)}finally{if(i)throw i.error}}p>=10&&(d|=1<<1-f),f!==1&&(c=e.getNextSet(c),c=e.getNextUnset(c))}if(r.length!==2)throw new xe;if(parseInt(r.toString())%4!==d)throw new xe;return c},n.parseExtensionString=function(e){return e.length!==2?null:new Map([[ei.ISSUE_NUMBER,parseInt(e)]])},n}(),oU=function(){function n(){}return n.decodeRow=function(e,t,r){var i=Hd.findGuardPattern(t,r,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{var a=new iU;return a.decodeRow(e,t,i)}catch{var s=new sU;return s.decodeRow(e,t,i)}},n.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]),n}(),lU=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Ar=function(n){lU(e,n);function e(){var t=n.call(this)||this;t.decodeRowStringBuffer="",e.L_AND_G_PATTERNS=e.L_PATTERNS.map(function(o){return Int32Array.from(o)});for(var r=10;r<20;r++){for(var i=e.L_PATTERNS[r-10],a=new Int32Array(i.length),s=0;s<i.length;s++)a[s]=i[i.length-s-1];e.L_AND_G_PATTERNS[r]=a}return t}return e.prototype.decodeRow=function(t,r,i){var a=e.findStartGuardPattern(r),s=i==null?null:i.get(On.NEED_RESULT_POINT_CALLBACK);if(s!=null){var o=new qe((a[0]+a[1])/2,t);s.foundPossibleResultPoint(o)}var c=this.decodeMiddle(r,a,this.decodeRowStringBuffer),d=c.rowOffset,f=c.resultString;if(s!=null){var p=new qe(d,t);s.foundPossibleResultPoint(p)}var g=e.decodeEnd(r,d);if(s!=null){var y=new qe((g[0]+g[1])/2,t);s.foundPossibleResultPoint(y)}var v=g[1],b=v+(v-g[0]);if(b>=r.getSize()||!r.isRange(v,b,!1))throw new xe;var A=f.toString();if(A.length<8)throw new Be;if(!e.checkChecksum(A))throw new Vr;var E=(a[1]+a[0])/2,T=(g[1]+g[0])/2,C=this.getBarcodeFormat(),D=[new qe(E,t),new qe(T,t)],O=new gi(A,null,0,D,C,new Date().getTime()),N=0;try{var M=oU.decodeRow(t,r,g[1]);O.putMetadata(ei.UPC_EAN_EXTENSION,M.getText()),O.putAllMetadata(M.getResultMetadata()),O.addResultPoints(M.getResultPoints()),N=M.getText().length}catch{}var R=i==null?null:i.get(On.ALLOWED_EAN_EXTENSIONS);if(R!=null){var I=!1;for(var B in R)if(N.toString()===B){I=!0;break}if(!I)throw new xe}return C===Je.EAN_13||Je.UPC_A,O},e.checkChecksum=function(t){return e.checkStandardUPCEANChecksum(t)},e.checkStandardUPCEANChecksum=function(t){var r=t.length;if(r===0)return!1;var i=parseInt(t.charAt(r-1),10);return e.getStandardUPCEANChecksum(t.substring(0,r-1))===i},e.getStandardUPCEANChecksum=function(t){for(var r=t.length,i=0,a=r-1;a>=0;a-=2){var s=t.charAt(a).charCodeAt(0)-48;if(s<0||s>9)throw new Be;i+=s}i*=3;for(var a=r-2;a>=0;a-=2){var s=t.charAt(a).charCodeAt(0)-48;if(s<0||s>9)throw new Be;i+=s}return(1e3-i)%10},e.decodeEnd=function(t,r){return e.findGuardPattern(t,r,!1,e.START_END_PATTERN,new Int32Array(e.START_END_PATTERN.length).fill(0))},e}(Hd),cU=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),cI=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ew=function(n){cU(e,n);function e(){var t=n.call(this)||this;return t.decodeMiddleCounters=Int32Array.from([0,0,0,0]),t}return e.prototype.decodeMiddle=function(t,r,i){var a,s,o,c,d=this.decodeMiddleCounters;d[0]=0,d[1]=0,d[2]=0,d[3]=0;for(var f=t.getSize(),p=r[1],g=0,y=0;y<6&&p<f;y++){var v=Ar.decodeDigit(t,d,p,Ar.L_AND_G_PATTERNS);i+=String.fromCharCode(48+v%10);try{for(var b=(a=void 0,cI(d)),A=b.next();!A.done;A=b.next()){var E=A.value;p+=E}}catch(O){a={error:O}}finally{try{A&&!A.done&&(s=b.return)&&s.call(b)}finally{if(a)throw a.error}}v>=10&&(g|=1<<5-y)}i=e.determineFirstDigit(i,g);var T=Ar.findGuardPattern(t,p,!0,Ar.MIDDLE_PATTERN,new Int32Array(Ar.MIDDLE_PATTERN.length).fill(0));p=T[1];for(var y=0;y<6&&p<f;y++){var v=Ar.decodeDigit(t,d,p,Ar.L_PATTERNS);i+=String.fromCharCode(48+v);try{for(var C=(o=void 0,cI(d)),D=C.next();!D.done;D=C.next()){var E=D.value;p+=E}}catch(M){o={error:M}}finally{try{D&&!D.done&&(c=C.return)&&c.call(C)}finally{if(o)throw o.error}}}return{rowOffset:p,resultString:i}},e.prototype.getBarcodeFormat=function(){return Je.EAN_13},e.determineFirstDigit=function(t,r){for(var i=0;i<10;i++)if(r===this.FIRST_DIGIT_ENCODINGS[i])return t=String.fromCharCode(48+i)+t,t;throw new xe},e.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26],e}(Ar),uU=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),uI=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},dI=function(n){uU(e,n);function e(){var t=n.call(this)||this;return t.decodeMiddleCounters=Int32Array.from([0,0,0,0]),t}return e.prototype.decodeMiddle=function(t,r,i){var a,s,o,c,d=this.decodeMiddleCounters;d[0]=0,d[1]=0,d[2]=0,d[3]=0;for(var f=t.getSize(),p=r[1],g=0;g<4&&p<f;g++){var y=Ar.decodeDigit(t,d,p,Ar.L_PATTERNS);i+=String.fromCharCode(48+y);try{for(var v=(a=void 0,uI(d)),b=v.next();!b.done;b=v.next()){var A=b.value;p+=A}}catch(D){a={error:D}}finally{try{b&&!b.done&&(s=v.return)&&s.call(v)}finally{if(a)throw a.error}}}var E=Ar.findGuardPattern(t,p,!0,Ar.MIDDLE_PATTERN,new Int32Array(Ar.MIDDLE_PATTERN.length).fill(0));p=E[1];for(var g=0;g<4&&p<f;g++){var y=Ar.decodeDigit(t,d,p,Ar.L_PATTERNS);i+=String.fromCharCode(48+y);try{for(var T=(o=void 0,uI(d)),C=T.next();!C.done;C=T.next()){var A=C.value;p+=A}}catch(N){o={error:N}}finally{try{C&&!C.done&&(c=T.return)&&c.call(T)}finally{if(o)throw o.error}}}return{rowOffset:p,resultString:i}},e.prototype.getBarcodeFormat=function(){return Je.EAN_8},e}(Ar),dU=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),fI=function(n){dU(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.ean13Reader=new ew,t}return e.prototype.getBarcodeFormat=function(){return Je.UPC_A},e.prototype.decode=function(t,r){return this.maybeReturnResult(this.ean13Reader.decode(t))},e.prototype.decodeRow=function(t,r,i){return this.maybeReturnResult(this.ean13Reader.decodeRow(t,r,i))},e.prototype.decodeMiddle=function(t,r,i){return this.ean13Reader.decodeMiddle(t,r,i)},e.prototype.maybeReturnResult=function(t){var r=t.getText();if(r.charAt(0)==="0"){var i=new gi(r.substring(1),null,null,t.getResultPoints(),Je.UPC_A);return t.getResultMetadata()!=null&&i.putAllMetadata(t.getResultMetadata()),i}else throw new xe},e.prototype.reset=function(){this.ean13Reader.reset()},e}(Ar),fU=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),hU=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},hI=function(n){fU(e,n);function e(){var t=n.call(this)||this;return t.decodeMiddleCounters=new Int32Array(4),t}return e.prototype.decodeMiddle=function(t,r,i){var a,s,o=this.decodeMiddleCounters.map(function(A){return A});o[0]=0,o[1]=0,o[2]=0,o[3]=0;for(var c=t.getSize(),d=r[1],f=0,p=0;p<6&&d<c;p++){var g=e.decodeDigit(t,o,d,e.L_AND_G_PATTERNS);i+=String.fromCharCode(48+g%10);try{for(var y=(a=void 0,hU(o)),v=y.next();!v.done;v=y.next()){var b=v.value;d+=b}}catch(A){a={error:A}}finally{try{v&&!v.done&&(s=y.return)&&s.call(y)}finally{if(a)throw a.error}}g>=10&&(f|=1<<5-p)}return e.determineNumSysAndCheckDigit(new bt(i),f),d},e.prototype.decodeEnd=function(t,r){return e.findGuardPatternWithoutCounters(t,r,!0,e.MIDDLE_END_PATTERN)},e.prototype.checkChecksum=function(t){return Ar.checkChecksum(e.convertUPCEtoUPCA(t))},e.determineNumSysAndCheckDigit=function(t,r){for(var i=0;i<=1;i++)for(var a=0;a<10;a++)if(r===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[i][a]){t.insert(0,"0"+i),t.append("0"+a);return}throw xe.getNotFoundInstance()},e.prototype.getBarcodeFormat=function(){return Je.UPC_E},e.convertUPCEtoUPCA=function(t){var r=t.slice(1,7).split("").map(function(s){return s.charCodeAt(0)}),i=new bt;i.append(t.charAt(0));var a=r[5];switch(a){case 0:case 1:case 2:i.appendChars(r,0,2),i.append(a),i.append("0000"),i.appendChars(r,2,3);break;case 3:i.appendChars(r,0,3),i.append("00000"),i.appendChars(r,3,2);break;case 4:i.appendChars(r,0,4),i.append("00000"),i.append(r[4]);break;default:i.appendChars(r,0,5),i.append("0000"),i.append(a);break}return t.length>=8&&i.append(t.charAt(7)),i.toString()},e.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),e.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,1])],e}(Ar),pU=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),pI=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Nx=function(n){pU(e,n);function e(t){var r=n.call(this)||this,i=t==null?null:t.get(On.POSSIBLE_FORMATS),a=[];return i!=null&&(i.indexOf(Je.EAN_13)>-1&&a.push(new ew),i.indexOf(Je.UPC_A)>-1&&a.push(new fI),i.indexOf(Je.EAN_8)>-1&&a.push(new dI),i.indexOf(Je.UPC_E)>-1&&a.push(new hI)),a.length===0&&(a.push(new ew),a.push(new fI),a.push(new dI),a.push(new hI)),r.readers=a,r}return e.prototype.decodeRow=function(t,r,i){var a,s;try{for(var o=pI(this.readers),c=o.next();!c.done;c=o.next()){var d=c.value;try{var f=d.decodeRow(t,r,i),p=f.getBarcodeFormat()===Je.EAN_13&&f.getText().charAt(0)==="0",g=i==null?null:i.get(On.POSSIBLE_FORMATS),y=g==null||g.includes(Je.UPC_A);if(p&&y){var v=f.getRawBytes(),b=new gi(f.getText().substring(1),v,v?v.length:null,f.getResultPoints(),Je.UPC_A);return b.putAllMetadata(f.getResultMetadata()),b}return f}catch{}}}catch(A){a={error:A}}finally{try{c&&!c.done&&(s=o.return)&&s.call(o)}finally{if(a)throw a.error}}throw new xe},e.prototype.reset=function(){var t,r;try{for(var i=pI(this.readers),a=i.next();!a.done;a=i.next()){var s=a.value;s.reset()}}catch(o){t={error:o}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}},e}(Cr),gU=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),mU=function(n){gU(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.CODA_BAR_CHAR_SET={nnnnnww:"0",nnnnwwn:"1",nnnwnnw:"2",wwnnnnn:"3",nnwnnwn:"4",wnnnnwn:"5",nwnnnnw:"6",nwnnwnn:"7",nwwnnnn:"8",wnnwnnn:"9",nnnwwnn:"-",nnwwnnn:"$",wnnnwnw:":",wnwnnnw:"/",wnwnwnn:".",nnwwwww:"+",nnwwnwn:"A",nwnwnnw:"B",nnnwnww:"C",nnnwwwn:"D"},t}return e.prototype.decodeRow=function(t,r,i){var a=this.getValidRowData(r);if(!a)throw new xe;var s=this.codaBarDecodeRow(a.row);if(!s)throw new xe;return new gi(s,null,0,[new qe(a.left,t),new qe(a.right,t)],Je.CODABAR,new Date().getTime())},e.prototype.getValidRowData=function(t){var r=t.toArray(),i=r.indexOf(!0);if(i===-1)return null;var a=r.lastIndexOf(!0);if(a<=i)return null;r=r.slice(i,a+1);for(var s=[],o=r[0],c=1,d=1;d<r.length;d++)r[d]===o?c++:(o=r[d],s.push(c),c=1);return s.push(c),s.length<23&&(s.length+1)%8!==0?null:{row:s,left:i,right:a}},e.prototype.codaBarDecodeRow=function(t){for(var r=[],i=Math.ceil(t.reduce(function(c,d){return(c+d)/2},0));t.length>0;){var a=t.splice(0,8).splice(0,7),s=a.map(function(c){return c<i?"n":"w"}).join("");if(this.CODA_BAR_CHAR_SET[s]===void 0)return null;r.push(this.CODA_BAR_CHAR_SET[s])}var o=r.join("");return this.validCodaBarString(o)?o:null},e.prototype.validCodaBarString=function(t){var r=/^[A-D].{1,}[A-D]$/;return r.test(t)},e}(Cr),yU=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),vU=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Sc=function(n){yU(e,n);function e(){var t=n.call(this)||this;return t.decodeFinderCounters=new Int32Array(4),t.dataCharacterCounters=new Int32Array(8),t.oddRoundingErrors=new Array(4),t.evenRoundingErrors=new Array(4),t.oddCounts=new Array(t.dataCharacterCounters.length/2),t.evenCounts=new Array(t.dataCharacterCounters.length/2),t}return e.prototype.getDecodeFinderCounters=function(){return this.decodeFinderCounters},e.prototype.getDataCharacterCounters=function(){return this.dataCharacterCounters},e.prototype.getOddRoundingErrors=function(){return this.oddRoundingErrors},e.prototype.getEvenRoundingErrors=function(){return this.evenRoundingErrors},e.prototype.getOddCounts=function(){return this.oddCounts},e.prototype.getEvenCounts=function(){return this.evenCounts},e.prototype.parseFinderValue=function(t,r){for(var i=0;i<r.length;i++)if(Cr.patternMatchVariance(t,r[i],e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return i;throw new xe},e.count=function(t){return $t.sum(new Int32Array(t))},e.increment=function(t,r){for(var i=0,a=r[0],s=1;s<t.length;s++)r[s]>a&&(a=r[s],i=s);t[i]++},e.decrement=function(t,r){for(var i=0,a=r[0],s=1;s<t.length;s++)r[s]<a&&(a=r[s],i=s);t[i]--},e.isFinderPattern=function(t){var r,i,a=t[0]+t[1],s=a+t[2]+t[3],o=a/s;if(o>=e.MIN_FINDER_PATTERN_RATIO&&o<=e.MAX_FINDER_PATTERN_RATIO){var c=Number.MAX_SAFE_INTEGER,d=Number.MIN_SAFE_INTEGER;try{for(var f=vU(t),p=f.next();!p.done;p=f.next()){var g=p.value;g>d&&(d=g),g<c&&(c=g)}}catch(y){r={error:y}}finally{try{p&&!p.done&&(i=f.return)&&i.call(f)}finally{if(r)throw r.error}}return d<10*c}return!1},e.MAX_AVG_VARIANCE=.2,e.MAX_INDIVIDUAL_VARIANCE=.45,e.MIN_FINDER_PATTERN_RATIO=9.5/12,e.MAX_FINDER_PATTERN_RATIO=12.5/14,e}(Cr),B1=function(){function n(e,t){this.value=e,this.checksumPortion=t}return n.prototype.getValue=function(){return this.value},n.prototype.getChecksumPortion=function(){return this.checksumPortion},n.prototype.toString=function(){return this.value+"("+this.checksumPortion+")"},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.value===t.value&&this.checksumPortion===t.checksumPortion},n.prototype.hashCode=function(){return this.value^this.checksumPortion},n}(),T4=function(){function n(e,t,r,i,a){this.value=e,this.startEnd=t,this.value=e,this.startEnd=t,this.resultPoints=new Array,this.resultPoints.push(new qe(r,a)),this.resultPoints.push(new qe(i,a))}return n.prototype.getValue=function(){return this.value},n.prototype.getStartEnd=function(){return this.startEnd},n.prototype.getResultPoints=function(){return this.resultPoints},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.value===t.value},n.prototype.hashCode=function(){return this.value},n}(),xU=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},gd=function(){function n(){}return n.getRSSvalue=function(e,t,r){var i,a,s=0;try{for(var o=xU(e),c=o.next();!c.done;c=o.next()){var d=c.value;s+=d}}catch(T){i={error:T}}finally{try{c&&!c.done&&(a=o.return)&&a.call(o)}finally{if(i)throw i.error}}for(var f=0,p=0,g=e.length,y=0;y<g-1;y++){var v=void 0;for(v=1,p|=1<<y;v<e[y];v++,p&=~(1<<y)){var b=n.combins(s-v-1,g-y-2);if(r&&p===0&&s-v-(g-y-1)>=g-y-1&&(b-=n.combins(s-v-(g-y),g-y-2)),g-y-1>1){for(var A=0,E=s-v-(g-y-2);E>t;E--)A+=n.combins(s-v-E-1,g-y-3);b-=A*(g-1-y)}else s-v>t&&b--;f+=b}s-=v}return f},n.combins=function(e,t){var r,i;e-t>t?(i=t,r=e-t):(i=e-t,r=t);for(var a=1,s=1,o=e;o>r;o--)a*=o,s<=i&&(a/=s,s++);for(;s<=i;)a/=s,s++;return a},n}(),wU=function(){function n(){}return n.buildBitArray=function(e){var t=e.length*2-1;e[e.length-1].getRightChar()==null&&(t-=1);for(var r=12*t,i=new jr(r),a=0,s=e[0],o=s.getRightChar().getValue(),c=11;c>=0;--c)(o&1<<c)!==0&&i.set(a),a++;for(var c=1;c<e.length;++c){for(var d=e[c],f=d.getLeftChar().getValue(),p=11;p>=0;--p)(f&1<<p)!==0&&i.set(a),a++;if(d.getRightChar()!==null)for(var g=d.getRightChar().getValue(),p=11;p>=0;--p)(g&1<<p)!==0&&i.set(a),a++}return i},n}(),xc=function(){function n(e,t){t?this.decodedInformation=null:(this.finished=e,this.decodedInformation=t)}return n.prototype.getDecodedInformation=function(){return this.decodedInformation},n.prototype.isFinished=function(){return this.finished},n}(),H_=function(){function n(e){this.newPosition=e}return n.prototype.getNewPosition=function(){return this.newPosition},n}(),_U=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Da=function(n){_U(e,n);function e(t,r){var i=n.call(this,t)||this;return i.value=r,i}return e.prototype.getValue=function(){return this.value},e.prototype.isFNC1=function(){return this.value===e.FNC1},e.FNC1="$",e}(H_),bU=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),wc=function(n){bU(e,n);function e(t,r,i){var a=n.call(this,t)||this;return i?(a.remaining=!0,a.remainingValue=a.remainingValue):(a.remaining=!1,a.remainingValue=0),a.newString=r,a}return e.prototype.getNewString=function(){return this.newString},e.prototype.isRemaining=function(){return this.remaining},e.prototype.getRemainingValue=function(){return this.remainingValue},e}(H_),AU=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Qu=function(n){AU(e,n);function e(t,r,i){var a=n.call(this,t)||this;if(r<0||r>10||i<0||i>10)throw new Be;return a.firstDigit=r,a.secondDigit=i,a}return e.prototype.getFirstDigit=function(){return this.firstDigit},e.prototype.getSecondDigit=function(){return this.secondDigit},e.prototype.getValue=function(){return this.firstDigit*10+this.secondDigit},e.prototype.isFirstDigitFNC1=function(){return this.firstDigit===e.FNC1},e.prototype.isSecondDigitFNC1=function(){return this.secondDigit===e.FNC1},e.prototype.isAnyFNC1=function(){return this.firstDigit===e.FNC1||this.secondDigit===e.FNC1},e.FNC1=10,e}(H_),Og=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},EU=function(){function n(){}return n.parseFieldsInGeneralPurpose=function(e){var t,r,i,a,s,o,c,d;if(!e)return null;if(e.length<2)throw new xe;var f=e.substring(0,2);try{for(var p=Og(n.TWO_DIGIT_DATA_LENGTH),g=p.next();!g.done;g=p.next()){var y=g.value;if(y[0]===f)return y[1]===n.VARIABLE_LENGTH?n.processVariableAI(2,y[2],e):n.processFixedAI(2,y[1],e)}}catch(N){t={error:N}}finally{try{g&&!g.done&&(r=p.return)&&r.call(p)}finally{if(t)throw t.error}}if(e.length<3)throw new xe;var v=e.substring(0,3);try{for(var b=Og(n.THREE_DIGIT_DATA_LENGTH),A=b.next();!A.done;A=b.next()){var y=A.value;if(y[0]===v)return y[1]===n.VARIABLE_LENGTH?n.processVariableAI(3,y[2],e):n.processFixedAI(3,y[1],e)}}catch(N){i={error:N}}finally{try{A&&!A.done&&(a=b.return)&&a.call(b)}finally{if(i)throw i.error}}try{for(var E=Og(n.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH),T=E.next();!T.done;T=E.next()){var y=T.value;if(y[0]===v)return y[1]===n.VARIABLE_LENGTH?n.processVariableAI(4,y[2],e):n.processFixedAI(4,y[1],e)}}catch(N){s={error:N}}finally{try{T&&!T.done&&(o=E.return)&&o.call(E)}finally{if(s)throw s.error}}if(e.length<4)throw new xe;var C=e.substring(0,4);try{for(var D=Og(n.FOUR_DIGIT_DATA_LENGTH),O=D.next();!O.done;O=D.next()){var y=O.value;if(y[0]===C)return y[1]===n.VARIABLE_LENGTH?n.processVariableAI(4,y[2],e):n.processFixedAI(4,y[1],e)}}catch(N){c={error:N}}finally{try{O&&!O.done&&(d=D.return)&&d.call(D)}finally{if(c)throw c.error}}throw new xe},n.processFixedAI=function(e,t,r){if(r.length<e)throw new xe;var i=r.substring(0,e);if(r.length<e+t)throw new xe;var a=r.substring(e,e+t),s=r.substring(e+t),o="("+i+")"+a,c=n.parseFieldsInGeneralPurpose(s);return c==null?o:o+c},n.processVariableAI=function(e,t,r){var i=r.substring(0,e),a;r.length<e+t?a=r.length:a=e+t;var s=r.substring(e,a),o=r.substring(a),c="("+i+")"+s,d=n.parseFieldsInGeneralPurpose(o);return d==null?c:c+d},n.VARIABLE_LENGTH=[],n.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",n.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",n.VARIABLE_LENGTH,20],["22",n.VARIABLE_LENGTH,29],["30",n.VARIABLE_LENGTH,8],["37",n.VARIABLE_LENGTH,8],["90",n.VARIABLE_LENGTH,30],["91",n.VARIABLE_LENGTH,30],["92",n.VARIABLE_LENGTH,30],["93",n.VARIABLE_LENGTH,30],["94",n.VARIABLE_LENGTH,30],["95",n.VARIABLE_LENGTH,30],["96",n.VARIABLE_LENGTH,30],["97",n.VARIABLE_LENGTH,3],["98",n.VARIABLE_LENGTH,30],["99",n.VARIABLE_LENGTH,30]],n.THREE_DIGIT_DATA_LENGTH=[["240",n.VARIABLE_LENGTH,30],["241",n.VARIABLE_LENGTH,30],["242",n.VARIABLE_LENGTH,6],["250",n.VARIABLE_LENGTH,30],["251",n.VARIABLE_LENGTH,30],["253",n.VARIABLE_LENGTH,17],["254",n.VARIABLE_LENGTH,20],["400",n.VARIABLE_LENGTH,30],["401",n.VARIABLE_LENGTH,30],["402",17],["403",n.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",n.VARIABLE_LENGTH,20],["421",n.VARIABLE_LENGTH,15],["422",3],["423",n.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],n.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",n.VARIABLE_LENGTH,15],["391",n.VARIABLE_LENGTH,18],["392",n.VARIABLE_LENGTH,15],["393",n.VARIABLE_LENGTH,18],["703",n.VARIABLE_LENGTH,30]],n.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",n.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",n.VARIABLE_LENGTH,20],["8003",n.VARIABLE_LENGTH,30],["8004",n.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",n.VARIABLE_LENGTH,30],["8008",n.VARIABLE_LENGTH,12],["8018",18],["8020",n.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",n.VARIABLE_LENGTH,70],["8200",n.VARIABLE_LENGTH,70]],n}(),c1=function(){function n(e){this.buffer=new bt,this.information=e}return n.prototype.decodeAllCodes=function(e,t){var r=t,i=null;do{var a=this.decodeGeneralPurposeField(r,i),s=EU.parseFieldsInGeneralPurpose(a.getNewString());if(s!=null&&e.append(s),a.isRemaining()?i=""+a.getRemainingValue():i=null,r===a.getNewPosition())break;r=a.getNewPosition()}while(!0);return e.toString()},n.prototype.isStillNumeric=function(e){if(e+7>this.information.getSize())return e+4<=this.information.getSize();for(var t=e;t<e+3;++t)if(this.information.get(t))return!0;return this.information.get(e+3)},n.prototype.decodeNumeric=function(e){if(e+7>this.information.getSize()){var t=this.extractNumericValueFromBitArray(e,4);return t===0?new Qu(this.information.getSize(),Qu.FNC1,Qu.FNC1):new Qu(this.information.getSize(),t-1,Qu.FNC1)}var r=this.extractNumericValueFromBitArray(e,7),i=(r-8)/11,a=(r-8)%11;return new Qu(e+7,i,a)},n.prototype.extractNumericValueFromBitArray=function(e,t){return n.extractNumericValueFromBitArray(this.information,e,t)},n.extractNumericValueFromBitArray=function(e,t,r){for(var i=0,a=0;a<r;++a)e.get(t+a)&&(i|=1<<r-a-1);return i},n.prototype.decodeGeneralPurposeField=function(e,t){this.buffer.setLengthToZero(),t!=null&&this.buffer.append(t),this.current.setPosition(e);var r=this.parseBlocks();return r!=null&&r.isRemaining()?new wc(this.current.getPosition(),this.buffer.toString(),r.getRemainingValue()):new wc(this.current.getPosition(),this.buffer.toString())},n.prototype.parseBlocks=function(){var e,t;do{var r=this.current.getPosition();this.current.isAlpha()?(t=this.parseAlphaBlock(),e=t.isFinished()):this.current.isIsoIec646()?(t=this.parseIsoIec646Block(),e=t.isFinished()):(t=this.parseNumericBlock(),e=t.isFinished());var i=r!==this.current.getPosition();if(!i&&!e)break}while(!e);return t.getDecodedInformation()},n.prototype.parseNumericBlock=function(){for(;this.isStillNumeric(this.current.getPosition());){var e=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFirstDigitFNC1()){var t=void 0;return e.isSecondDigitFNC1()?t=new wc(this.current.getPosition(),this.buffer.toString()):t=new wc(this.current.getPosition(),this.buffer.toString(),e.getSecondDigit()),new xc(!0,t)}if(this.buffer.append(e.getFirstDigit()),e.isSecondDigitFNC1()){var t=new wc(this.current.getPosition(),this.buffer.toString());return new xc(!0,t)}this.buffer.append(e.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new xc(!1)},n.prototype.parseIsoIec646Block=function(){for(;this.isStillIsoIec646(this.current.getPosition());){var e=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){var t=new wc(this.current.getPosition(),this.buffer.toString());return new xc(!0,t)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new xc(!1)},n.prototype.parseAlphaBlock=function(){for(;this.isStillAlpha(this.current.getPosition());){var e=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){var t=new wc(this.current.getPosition(),this.buffer.toString());return new xc(!0,t)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new xc(!1)},n.prototype.isStillIsoIec646=function(e){if(e+5>this.information.getSize())return!1;var t=this.extractNumericValueFromBitArray(e,5);if(t>=5&&t<16)return!0;if(e+7>this.information.getSize())return!1;var r=this.extractNumericValueFromBitArray(e,7);if(r>=64&&r<116)return!0;if(e+8>this.information.getSize())return!1;var i=this.extractNumericValueFromBitArray(e,8);return i>=232&&i<253},n.prototype.decodeIsoIec646=function(e){var t=this.extractNumericValueFromBitArray(e,5);if(t===15)return new Da(e+5,Da.FNC1);if(t>=5&&t<15)return new Da(e+5,"0"+(t-5));var r=this.extractNumericValueFromBitArray(e,7);if(r>=64&&r<90)return new Da(e+7,""+(r+1));if(r>=90&&r<116)return new Da(e+7,""+(r+7));var i=this.extractNumericValueFromBitArray(e,8),a;switch(i){case 232:a="!";break;case 233:a='"';break;case 234:a="%";break;case 235:a="&";break;case 236:a="'";break;case 237:a="(";break;case 238:a=")";break;case 239:a="*";break;case 240:a="+";break;case 241:a=",";break;case 242:a="-";break;case 243:a=".";break;case 244:a="/";break;case 245:a=":";break;case 246:a=";";break;case 247:a="<";break;case 248:a="=";break;case 249:a=">";break;case 250:a="?";break;case 251:a="_";break;case 252:a=" ";break;default:throw new Be}return new Da(e+8,a)},n.prototype.isStillAlpha=function(e){if(e+5>this.information.getSize())return!1;var t=this.extractNumericValueFromBitArray(e,5);if(t>=5&&t<16)return!0;if(e+6>this.information.getSize())return!1;var r=this.extractNumericValueFromBitArray(e,6);return r>=16&&r<63},n.prototype.decodeAlphanumeric=function(e){var t=this.extractNumericValueFromBitArray(e,5);if(t===15)return new Da(e+5,Da.FNC1);if(t>=5&&t<15)return new Da(e+5,"0"+(t-5));var r=this.extractNumericValueFromBitArray(e,6);if(r>=32&&r<58)return new Da(e+6,""+(r+33));var i;switch(r){case 58:i="*";break;case 59:i=",";break;case 60:i="-";break;case 61:i=".";break;case 62:i="/";break;default:throw new z0("Decoding invalid alphanumeric value: "+r)}return new Da(e+6,i)},n.prototype.isAlphaTo646ToAlphaLatch=function(e){if(e+1>this.information.getSize())return!1;for(var t=0;t<5&&t+e<this.information.getSize();++t)if(t===2){if(!this.information.get(e+2))return!1}else if(this.information.get(e+t))return!1;return!0},n.prototype.isAlphaOr646ToNumericLatch=function(e){if(e+3>this.information.getSize())return!1;for(var t=e;t<e+3;++t)if(this.information.get(t))return!1;return!0},n.prototype.isNumericToAlphaNumericLatch=function(e){if(e+1>this.information.getSize())return!1;for(var t=0;t<4&&t+e<this.information.getSize();++t)if(this.information.get(e+t))return!1;return!0},n}(),C4=function(){function n(e){this.information=e,this.generalDecoder=new c1(e)}return n.prototype.getInformation=function(){return this.information},n.prototype.getGeneralDecoder=function(){return this.generalDecoder},n}(),SU=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Na=function(n){SU(e,n);function e(t){return n.call(this,t)||this}return e.prototype.encodeCompressedGtin=function(t,r){t.append("(01)");var i=t.length();t.append("9"),this.encodeCompressedGtinWithoutAI(t,r,i)},e.prototype.encodeCompressedGtinWithoutAI=function(t,r,i){for(var a=0;a<4;++a){var s=this.getGeneralDecoder().extractNumericValueFromBitArray(r+10*a,10);s/100===0&&t.append("0"),s/10===0&&t.append("0"),t.append(s)}e.appendCheckDigit(t,i)},e.appendCheckDigit=function(t,r){for(var i=0,a=0;a<13;a++){var s=t.charAt(a+r).charCodeAt(0)-48;i+=(a&1)===0?3*s:s}i=10-i%10,i===10&&(i=0),t.append(i)},e.GTIN_SIZE=40,e}(C4),TU=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),CU=function(n){TU(e,n);function e(t){return n.call(this,t)||this}return e.prototype.parseInformation=function(){var t=new bt;t.append("(01)");var r=t.length(),i=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE,4);return t.append(i),this.encodeCompressedGtinWithoutAI(t,e.HEADER_SIZE+4,r),this.getGeneralDecoder().decodeAllCodes(t,e.HEADER_SIZE+44)},e.HEADER_SIZE=4,e}(Na),IU=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),DU=function(n){IU(e,n);function e(t){return n.call(this,t)||this}return e.prototype.parseInformation=function(){var t=new bt;return this.getGeneralDecoder().decodeAllCodes(t,e.HEADER_SIZE)},e.HEADER_SIZE=5,e}(C4),RU=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),u1=function(n){RU(e,n);function e(t){return n.call(this,t)||this}return e.prototype.encodeCompressedWeight=function(t,r,i){var a=this.getGeneralDecoder().extractNumericValueFromBitArray(r,i);this.addWeightCode(t,a);for(var s=this.checkWeight(a),o=1e5,c=0;c<5;++c)s/o===0&&t.append("0"),o/=10;t.append(s)},e}(Na),MU=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),I4=function(n){MU(e,n);function e(t){return n.call(this,t)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()!==e.HEADER_SIZE+u1.GTIN_SIZE+e.WEIGHT_SIZE)throw new xe;var t=new bt;return this.encodeCompressedGtin(t,e.HEADER_SIZE),this.encodeCompressedWeight(t,e.HEADER_SIZE+u1.GTIN_SIZE,e.WEIGHT_SIZE),t.toString()},e.HEADER_SIZE=5,e.WEIGHT_SIZE=15,e}(u1),OU=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),PU=function(n){OU(e,n);function e(t){return n.call(this,t)||this}return e.prototype.addWeightCode=function(t,r){t.append("(3103)")},e.prototype.checkWeight=function(t){return t},e}(I4),kU=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),NU=function(n){kU(e,n);function e(t){return n.call(this,t)||this}return e.prototype.addWeightCode=function(t,r){r<1e4?t.append("(3202)"):t.append("(3203)")},e.prototype.checkWeight=function(t){return t<1e4?t:t-1e4},e}(I4),LU=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),BU=function(n){LU(e,n);function e(t){return n.call(this,t)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()<e.HEADER_SIZE+Na.GTIN_SIZE)throw new xe;var t=new bt;this.encodeCompressedGtin(t,e.HEADER_SIZE);var r=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+Na.GTIN_SIZE,e.LAST_DIGIT_SIZE);t.append("(392"),t.append(r),t.append(")");var i=this.getGeneralDecoder().decodeGeneralPurposeField(e.HEADER_SIZE+Na.GTIN_SIZE+e.LAST_DIGIT_SIZE,null);return t.append(i.getNewString()),t.toString()},e.HEADER_SIZE=8,e.LAST_DIGIT_SIZE=2,e}(Na),VU=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),FU=function(n){VU(e,n);function e(t){return n.call(this,t)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()<e.HEADER_SIZE+Na.GTIN_SIZE)throw new xe;var t=new bt;this.encodeCompressedGtin(t,e.HEADER_SIZE);var r=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+Na.GTIN_SIZE,e.LAST_DIGIT_SIZE);t.append("(393"),t.append(r),t.append(")");var i=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+Na.GTIN_SIZE+e.LAST_DIGIT_SIZE,e.FIRST_THREE_DIGITS_SIZE);i/100===0&&t.append("0"),i/10===0&&t.append("0"),t.append(i);var a=this.getGeneralDecoder().decodeGeneralPurposeField(e.HEADER_SIZE+Na.GTIN_SIZE+e.LAST_DIGIT_SIZE+e.FIRST_THREE_DIGITS_SIZE,null);return t.append(a.getNewString()),t.toString()},e.HEADER_SIZE=8,e.LAST_DIGIT_SIZE=2,e.FIRST_THREE_DIGITS_SIZE=10,e}(Na),jU=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),al=function(n){jU(e,n);function e(t,r,i){var a=n.call(this,t)||this;return a.dateCode=i,a.firstAIdigits=r,a}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()!==e.HEADER_SIZE+e.GTIN_SIZE+e.WEIGHT_SIZE+e.DATE_SIZE)throw new xe;var t=new bt;return this.encodeCompressedGtin(t,e.HEADER_SIZE),this.encodeCompressedWeight(t,e.HEADER_SIZE+e.GTIN_SIZE,e.WEIGHT_SIZE),this.encodeCompressedDate(t,e.HEADER_SIZE+e.GTIN_SIZE+e.WEIGHT_SIZE),t.toString()},e.prototype.encodeCompressedDate=function(t,r){var i=this.getGeneralDecoder().extractNumericValueFromBitArray(r,e.DATE_SIZE);if(i!==38400){t.append("("),t.append(this.dateCode),t.append(")");var a=i%32;i/=32;var s=i%12+1;i/=12;var o=i;o/10===0&&t.append("0"),t.append(o),s/10===0&&t.append("0"),t.append(s),a/10===0&&t.append("0"),t.append(a)}},e.prototype.addWeightCode=function(t,r){t.append("("),t.append(this.firstAIdigits),t.append(r/1e5),t.append(")")},e.prototype.checkWeight=function(t){return t%1e5},e.HEADER_SIZE=8,e.WEIGHT_SIZE=20,e.DATE_SIZE=16,e}(u1);function UU(n){try{if(n.get(1))return new CU(n);if(!n.get(2))return new DU(n);var e=c1.extractNumericValueFromBitArray(n,1,4);switch(e){case 4:return new PU(n);case 5:return new NU(n)}var t=c1.extractNumericValueFromBitArray(n,1,5);switch(t){case 12:return new BU(n);case 13:return new FU(n)}var r=c1.extractNumericValueFromBitArray(n,1,7);switch(r){case 56:return new al(n,"310","11");case 57:return new al(n,"320","11");case 58:return new al(n,"310","13");case 59:return new al(n,"320","13");case 60:return new al(n,"310","15");case 61:return new al(n,"320","15");case 62:return new al(n,"310","17");case 63:return new al(n,"320","17")}}catch(i){throw console.log(i),new z0("unknown decoder: "+n)}}var gI=function(){function n(e,t,r,i){this.leftchar=e,this.rightchar=t,this.finderpattern=r,this.maybeLast=i}return n.prototype.mayBeLast=function(){return this.maybeLast},n.prototype.getLeftChar=function(){return this.leftchar},n.prototype.getRightChar=function(){return this.rightchar},n.prototype.getFinderPattern=function(){return this.finderpattern},n.prototype.mustBeLast=function(){return this.rightchar==null},n.prototype.toString=function(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"},n.equals=function(e,t){return e instanceof n?n.equalsOrNull(e.leftchar,t.leftchar)&&n.equalsOrNull(e.rightchar,t.rightchar)&&n.equalsOrNull(e.finderpattern,t.finderpattern):!1},n.equalsOrNull=function(e,t){return e===null?t===null:n.equals(e,t)},n.prototype.hashCode=function(){var e=this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue();return e},n}(),HU=function(){function n(e,t,r){this.pairs=e,this.rowNumber=t,this.wasReversed=r}return n.prototype.getPairs=function(){return this.pairs},n.prototype.getRowNumber=function(){return this.rowNumber},n.prototype.isReversed=function(){return this.wasReversed},n.prototype.isEquivalent=function(e){return this.checkEqualitity(this,e)},n.prototype.toString=function(){return"{ "+this.pairs+" }"},n.prototype.equals=function(e,t){return e instanceof n?this.checkEqualitity(e,t)&&e.wasReversed===t.wasReversed:!1},n.prototype.checkEqualitity=function(e,t){if(!(!e||!t)){var r;return e.forEach(function(i,a){t.forEach(function(s){i.getLeftChar().getValue()===s.getLeftChar().getValue()&&i.getRightChar().getValue()===s.getRightChar().getValue()&&i.getFinderPatter().getValue()===s.getFinderPatter().getValue()&&(r=!0)})}),r}},n}(),zU=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),sl=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},$U=function(n){zU(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.pairs=new Array(e.MAX_PAIRS),t.rows=new Array,t.startEnd=[2],t}return e.prototype.decodeRow=function(t,r,i){this.pairs.length=0,this.startFromEven=!1;try{return e.constructResult(this.decodeRow2pairs(t,r))}catch{}return this.pairs.length=0,this.startFromEven=!0,e.constructResult(this.decodeRow2pairs(t,r))},e.prototype.reset=function(){this.pairs.length=0,this.rows.length=0},e.prototype.decodeRow2pairs=function(t,r){for(var i=!1;!i;)try{this.pairs.push(this.retrieveNextPair(r,this.pairs,t))}catch(o){if(o instanceof xe){if(!this.pairs.length)throw new xe;i=!0}}if(this.checkChecksum())return this.pairs;var a;if(this.rows.length?a=!0:a=!1,this.storeRow(t,!1),a){var s=this.checkRowsBoolean(!1);if(s!=null||(s=this.checkRowsBoolean(!0),s!=null))return s}throw new xe},e.prototype.checkRowsBoolean=function(t){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,t&&(this.rows=this.rows.reverse());var r=null;try{r=this.checkRows(new Array,0)}catch(i){console.log(i)}return t&&(this.rows=this.rows.reverse()),r},e.prototype.checkRows=function(t,r){for(var i,a,s=r;s<this.rows.length;s++){var o=this.rows[s];this.pairs.length=0;try{for(var c=(i=void 0,sl(t)),d=c.next();!d.done;d=c.next()){var f=d.value;this.pairs.push(f.getPairs())}}catch(g){i={error:g}}finally{try{d&&!d.done&&(a=c.return)&&a.call(c)}finally{if(i)throw i.error}}if(this.pairs.push(o.getPairs()),!!e.isValidSequence(this.pairs)){if(this.checkChecksum())return this.pairs;var p=new Array(t);p.push(o);try{return this.checkRows(p,s+1)}catch(g){console.log(g)}}}throw new xe},e.isValidSequence=function(t){var r,i;try{for(var a=sl(e.FINDER_PATTERN_SEQUENCES),s=a.next();!s.done;s=a.next()){var o=s.value;if(!(t.length>o.length)){for(var c=!0,d=0;d<t.length;d++)if(t[d].getFinderPattern().getValue()!==o[d]){c=!1;break}if(c)return!0}}}catch(f){r={error:f}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}return!1},e.prototype.storeRow=function(t,r){for(var i=0,a=!1,s=!1;i<this.rows.length;){var o=this.rows[i];if(o.getRowNumber()>t){s=o.isEquivalent(this.pairs);break}a=o.isEquivalent(this.pairs),i++}s||a||e.isPartialRow(this.pairs,this.rows)||(this.rows.push(i,new HU(this.pairs,t,r)),this.removePartialRows(this.pairs,this.rows))},e.prototype.removePartialRows=function(t,r){var i,a,s,o,c,d;try{for(var f=sl(r),p=f.next();!p.done;p=f.next()){var g=p.value;if(g.getPairs().length!==t.length){var y=!0;try{for(var v=(s=void 0,sl(g.getPairs())),b=v.next();!b.done;b=v.next()){var A=b.value,E=!1;try{for(var T=(c=void 0,sl(t)),C=T.next();!C.done;C=T.next()){var D=C.value;if(gI.equals(A,D)){E=!0;break}}}catch(O){c={error:O}}finally{try{C&&!C.done&&(d=T.return)&&d.call(T)}finally{if(c)throw c.error}}E||(y=!1)}}catch(O){s={error:O}}finally{try{b&&!b.done&&(o=v.return)&&o.call(v)}finally{if(s)throw s.error}}}}}catch(O){i={error:O}}finally{try{p&&!p.done&&(a=f.return)&&a.call(f)}finally{if(i)throw i.error}}},e.isPartialRow=function(t,r){var i,a,s,o,c,d;try{for(var f=sl(r),p=f.next();!p.done;p=f.next()){var g=p.value,y=!0;try{for(var v=(s=void 0,sl(t)),b=v.next();!b.done;b=v.next()){var A=b.value,E=!1;try{for(var T=(c=void 0,sl(g.getPairs())),C=T.next();!C.done;C=T.next()){var D=C.value;if(A.equals(D)){E=!0;break}}}catch(O){c={error:O}}finally{try{C&&!C.done&&(d=T.return)&&d.call(T)}finally{if(c)throw c.error}}if(!E){y=!1;break}}}catch(O){s={error:O}}finally{try{b&&!b.done&&(o=v.return)&&o.call(v)}finally{if(s)throw s.error}}if(y)return!0}}catch(O){i={error:O}}finally{try{p&&!p.done&&(a=f.return)&&a.call(f)}finally{if(i)throw i.error}}return!1},e.prototype.getRows=function(){return this.rows},e.constructResult=function(t){var r=wU.buildBitArray(t),i=UU(r),a=i.parseInformation(),s=t[0].getFinderPattern().getResultPoints(),o=t[t.length-1].getFinderPattern().getResultPoints(),c=[s[0],s[1],o[0],o[1]];return new gi(a,null,null,c,Je.RSS_EXPANDED,null)},e.prototype.checkChecksum=function(){var t=this.pairs.get(0),r=t.getLeftChar(),i=t.getRightChar();if(i===null)return!1;for(var a=i.getChecksumPortion(),s=2,o=1;o<this.pairs.size();++o){var c=this.pairs.get(o);a+=c.getLeftChar().getChecksumPortion(),s++;var d=c.getRightChar();d!=null&&(a+=d.getChecksumPortion(),s++)}a%=211;var f=211*(s-4)+a;return f===r.getValue()},e.getNextSecondBar=function(t,r){var i;return t.get(r)?(i=t.getNextUnset(r),i=t.getNextSet(i)):(i=t.getNextSet(r),i=t.getNextUnset(i)),i},e.prototype.retrieveNextPair=function(t,r,i){var a=r.length%2===0;this.startFromEven&&(a=!a);var s,o=!0,c=-1;do this.findNextPair(t,r,c),s=this.parseFoundFinderPattern(t,i,a),s===null?c=e.getNextSecondBar(t,this.startEnd[0]):o=!1;while(o);var d=this.decodeDataCharacter(t,s,a,!0);if(!this.isEmptyPair(r)&&r[r.length-1].mustBeLast())throw new xe;var f;try{f=this.decodeDataCharacter(t,s,a,!1)}catch(p){f=null,console.log(p)}return new gI(d,f,s,!0)},e.prototype.isEmptyPair=function(t){return t.length===0},e.prototype.findNextPair=function(t,r,i){var a=this.getDecodeFinderCounters();a[0]=0,a[1]=0,a[2]=0,a[3]=0;var s=t.getSize(),o;if(i>=0)o=i;else if(this.isEmptyPair(r))o=0;else{var c=r[r.length-1];o=c.getFinderPattern().getStartEnd()[1]}var d=r.length%2!==0;this.startFromEven&&(d=!d);for(var f=!1;o<s&&(f=!t.get(o),!!f);)o++;for(var p=0,g=o,y=o;y<s;y++)if(t.get(y)!==f)a[p]++;else{if(p===3){if(d&&e.reverseCounters(a),e.isFinderPattern(a)){this.startEnd[0]=g,this.startEnd[1]=y;return}d&&e.reverseCounters(a),g+=a[0]+a[1],a[0]=a[2],a[1]=a[3],a[2]=0,a[3]=0,p--}else p++;a[p]=1,f=!f}throw new xe},e.reverseCounters=function(t){for(var r=t.length,i=0;i<r/2;++i){var a=t[i];t[i]=t[r-i-1],t[r-i-1]=a}},e.prototype.parseFoundFinderPattern=function(t,r,i){var a,s,o;if(i){for(var c=this.startEnd[0]-1;c>=0&&!t.get(c);)c--;c++,a=this.startEnd[0]-c,s=c,o=this.startEnd[1]}else s=this.startEnd[0],o=t.getNextUnset(this.startEnd[1]+1),a=o-this.startEnd[1];var d=this.getDecodeFinderCounters();_n.arraycopy(d,0,d,1,d.length-1),d[0]=a;var f;try{f=this.parseFinderValue(d,e.FINDER_PATTERNS)}catch{return null}return new T4(f,[s,o],s,o,r)},e.prototype.decodeDataCharacter=function(t,r,i,a){for(var s=this.getDataCharacterCounters(),o=0;o<s.length;o++)s[o]=0;if(a)e.recordPatternInReverse(t,r.getStartEnd()[0],s);else{e.recordPattern(t,r.getStartEnd()[1],s);for(var c=0,d=s.length-1;c<d;c++,d--){var f=s[c];s[c]=s[d],s[d]=f}}var p=17,g=$t.sum(new Int32Array(s))/p,y=(r.getStartEnd()[1]-r.getStartEnd()[0])/15;if(Math.abs(g-y)/y>.3)throw new xe;for(var v=this.getOddCounts(),b=this.getEvenCounts(),A=this.getOddRoundingErrors(),E=this.getEvenRoundingErrors(),c=0;c<s.length;c++){var T=1*s[c]/g,C=T+.5;if(C<1){if(T<.3)throw new xe;C=1}else if(C>8){if(T>8.7)throw new xe;C=8}var D=c/2;(c&1)===0?(v[D]=C,A[D]=T-C):(b[D]=C,E[D]=T-C)}this.adjustOddEvenCounts(p);for(var O=4*r.getValue()+(i?0:2)+(a?0:1)-1,N=0,M=0,c=v.length-1;c>=0;c--){if(e.isNotA1left(r,i,a)){var R=e.WEIGHTS[O][2*c];M+=v[c]*R}N+=v[c]}for(var I=0,c=b.length-1;c>=0;c--)if(e.isNotA1left(r,i,a)){var R=e.WEIGHTS[O][2*c+1];I+=b[c]*R}var B=M+I;if((N&1)!==0||N>13||N<4)throw new xe;var L=(13-N)/2,k=e.SYMBOL_WIDEST[L],F=9-k,q=gd.getRSSvalue(v,k,!0),X=gd.getRSSvalue(b,F,!1),G=e.EVEN_TOTAL_SUBSET[L],Y=e.GSUM[L],Q=q*G+X+Y;return new B1(Q,B)},e.isNotA1left=function(t,r,i){return!(t.getValue()===0&&r&&i)},e.prototype.adjustOddEvenCounts=function(t){var r=$t.sum(new Int32Array(this.getOddCounts())),i=$t.sum(new Int32Array(this.getEvenCounts())),a=!1,s=!1;r>13?s=!0:r<4&&(a=!0);var o=!1,c=!1;i>13?c=!0:i<4&&(o=!0);var d=r+i-t,f=(r&1)===1,p=(i&1)===0;if(d===1)if(f){if(p)throw new xe;s=!0}else{if(!p)throw new xe;c=!0}else if(d===-1)if(f){if(p)throw new xe;a=!0}else{if(!p)throw new xe;o=!0}else if(d===0){if(f){if(!p)throw new xe;r<i?(a=!0,c=!0):(s=!0,o=!0)}else if(p)throw new xe}else throw new xe;if(a){if(s)throw new xe;e.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(s&&e.decrement(this.getOddCounts(),this.getOddRoundingErrors()),o){if(c)throw new xe;e.increment(this.getEvenCounts(),this.getOddRoundingErrors())}c&&e.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},e.SYMBOL_WIDEST=[7,5,4,3,1],e.EVEN_TOTAL_SUBSET=[4,20,52,104,204],e.GSUM=[0,348,1388,2948,3988],e.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],e.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],e.FINDER_PAT_A=0,e.FINDER_PAT_B=1,e.FINDER_PAT_C=2,e.FINDER_PAT_D=3,e.FINDER_PAT_E=4,e.FINDER_PAT_F=5,e.FINDER_PATTERN_SEQUENCES=[[e.FINDER_PAT_A,e.FINDER_PAT_A],[e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B],[e.FINDER_PAT_A,e.FINDER_PAT_C,e.FINDER_PAT_B,e.FINDER_PAT_D],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_C],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_D,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_D],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_E],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F]],e.MAX_PAIRS=11,e}(Sc),GU=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),WU=function(n){GU(e,n);function e(t,r,i){var a=n.call(this,t,r)||this;return a.count=0,a.finderPattern=i,a}return e.prototype.getFinderPattern=function(){return this.finderPattern},e.prototype.getCount=function(){return this.count},e.prototype.incrementCount=function(){this.count++},e}(B1),YU=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Lx=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},mI=function(n){YU(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.possibleLeftPairs=[],t.possibleRightPairs=[],t}return e.prototype.decodeRow=function(t,r,i){var a,s,o,c,d=this.decodePair(r,!1,t,i);e.addOrTally(this.possibleLeftPairs,d),r.reverse();var f=this.decodePair(r,!0,t,i);e.addOrTally(this.possibleRightPairs,f),r.reverse();try{for(var p=Lx(this.possibleLeftPairs),g=p.next();!g.done;g=p.next()){var y=g.value;if(y.getCount()>1)try{for(var v=(o=void 0,Lx(this.possibleRightPairs)),b=v.next();!b.done;b=v.next()){var A=b.value;if(A.getCount()>1&&e.checkChecksum(y,A))return e.constructResult(y,A)}}catch(E){o={error:E}}finally{try{b&&!b.done&&(c=v.return)&&c.call(v)}finally{if(o)throw o.error}}}}catch(E){a={error:E}}finally{try{g&&!g.done&&(s=p.return)&&s.call(p)}finally{if(a)throw a.error}}throw new xe},e.addOrTally=function(t,r){var i,a;if(r!=null){var s=!1;try{for(var o=Lx(t),c=o.next();!c.done;c=o.next()){var d=c.value;if(d.getValue()===r.getValue()){d.incrementCount(),s=!0;break}}}catch(f){i={error:f}}finally{try{c&&!c.done&&(a=o.return)&&a.call(o)}finally{if(i)throw i.error}}s||t.push(r)}},e.prototype.reset=function(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0},e.constructResult=function(t,r){for(var i=4537077*t.getValue()+r.getValue(),a=new String(i).toString(),s=new bt,o=13-a.length;o>0;o--)s.append("0");s.append(a);for(var c=0,o=0;o<13;o++){var d=s.charAt(o).charCodeAt(0)-48;c+=(o&1)===0?3*d:d}c=10-c%10,c===10&&(c=0),s.append(c.toString());var f=t.getFinderPattern().getResultPoints(),p=r.getFinderPattern().getResultPoints();return new gi(s.toString(),null,0,[f[0],f[1],p[0],p[1]],Je.RSS_14,new Date().getTime())},e.checkChecksum=function(t,r){var i=(t.getChecksumPortion()+16*r.getChecksumPortion())%79,a=9*t.getFinderPattern().getValue()+r.getFinderPattern().getValue();return a>72&&a--,a>8&&a--,i===a},e.prototype.decodePair=function(t,r,i,a){try{var s=this.findFinderPattern(t,r),o=this.parseFoundFinderPattern(t,i,r,s),c=a==null?null:a.get(On.NEED_RESULT_POINT_CALLBACK);if(c!=null){var d=(s[0]+s[1])/2;r&&(d=t.getSize()-1-d),c.foundPossibleResultPoint(new qe(d,i))}var f=this.decodeDataCharacter(t,o,!0),p=this.decodeDataCharacter(t,o,!1);return new WU(1597*f.getValue()+p.getValue(),f.getChecksumPortion()+4*p.getChecksumPortion(),o)}catch{return null}},e.prototype.decodeDataCharacter=function(t,r,i){for(var a=this.getDataCharacterCounters(),s=0;s<a.length;s++)a[s]=0;if(i)Cr.recordPatternInReverse(t,r.getStartEnd()[0],a);else{Cr.recordPattern(t,r.getStartEnd()[1]+1,a);for(var o=0,c=a.length-1;o<c;o++,c--){var d=a[o];a[o]=a[c],a[c]=d}}for(var f=i?16:15,p=$t.sum(new Int32Array(a))/f,g=this.getOddCounts(),y=this.getEvenCounts(),v=this.getOddRoundingErrors(),b=this.getEvenRoundingErrors(),o=0;o<a.length;o++){var A=a[o]/p,E=Math.floor(A+.5);E<1?E=1:E>8&&(E=8);var T=Math.floor(o/2);(o&1)===0?(g[T]=E,v[T]=A-E):(y[T]=E,b[T]=A-E)}this.adjustOddEvenCounts(i,f);for(var C=0,D=0,o=g.length-1;o>=0;o--)D*=9,D+=g[o],C+=g[o];for(var O=0,N=0,o=y.length-1;o>=0;o--)O*=9,O+=y[o],N+=y[o];var M=D+3*O;if(i){if((C&1)!==0||C>12||C<4)throw new xe;var R=(12-C)/2,I=e.OUTSIDE_ODD_WIDEST[R],B=9-I,L=gd.getRSSvalue(g,I,!1),k=gd.getRSSvalue(y,B,!0),F=e.OUTSIDE_EVEN_TOTAL_SUBSET[R],q=e.OUTSIDE_GSUM[R];return new B1(L*F+k+q,M)}else{if((N&1)!==0||N>10||N<4)throw new xe;var R=(10-N)/2,I=e.INSIDE_ODD_WIDEST[R],B=9-I,L=gd.getRSSvalue(g,I,!0),k=gd.getRSSvalue(y,B,!1),X=e.INSIDE_ODD_TOTAL_SUBSET[R],q=e.INSIDE_GSUM[R];return new B1(k*X+L+q,M)}},e.prototype.findFinderPattern=function(t,r){var i=this.getDecodeFinderCounters();i[0]=0,i[1]=0,i[2]=0,i[3]=0;for(var a=t.getSize(),s=!1,o=0;o<a&&(s=!t.get(o),r!==s);)o++;for(var c=0,d=o,f=o;f<a;f++)if(t.get(f)!==s)i[c]++;else{if(c===3){if(Sc.isFinderPattern(i))return[d,f];d+=i[0]+i[1],i[0]=i[2],i[1]=i[3],i[2]=0,i[3]=0,c--}else c++;i[c]=1,s=!s}throw new xe},e.prototype.parseFoundFinderPattern=function(t,r,i,a){for(var s=t.get(a[0]),o=a[0]-1;o>=0&&s!==t.get(o);)o--;o++;var c=a[0]-o,d=this.getDecodeFinderCounters(),f=new Int32Array(d.length);_n.arraycopy(d,0,f,1,d.length-1),f[0]=c;var p=this.parseFinderValue(f,e.FINDER_PATTERNS),g=o,y=a[1];return i&&(g=t.getSize()-1-g,y=t.getSize()-1-y),new T4(p,[o,a[1]],g,y,r)},e.prototype.adjustOddEvenCounts=function(t,r){var i=$t.sum(new Int32Array(this.getOddCounts())),a=$t.sum(new Int32Array(this.getEvenCounts())),s=!1,o=!1,c=!1,d=!1;t?(i>12?o=!0:i<4&&(s=!0),a>12?d=!0:a<4&&(c=!0)):(i>11?o=!0:i<5&&(s=!0),a>10?d=!0:a<4&&(c=!0));var f=i+a-r,p=(i&1)===(t?1:0),g=(a&1)===1;if(f===1)if(p){if(g)throw new xe;o=!0}else{if(!g)throw new xe;d=!0}else if(f===-1)if(p){if(g)throw new xe;s=!0}else{if(!g)throw new xe;c=!0}else if(f===0){if(p){if(!g)throw new xe;i<a?(s=!0,d=!0):(o=!0,c=!0)}else if(g)throw new xe}else throw new xe;if(s){if(o)throw new xe;Sc.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(o&&Sc.decrement(this.getOddCounts(),this.getOddRoundingErrors()),c){if(d)throw new xe;Sc.increment(this.getEvenCounts(),this.getOddRoundingErrors())}d&&Sc.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},e.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],e.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],e.OUTSIDE_GSUM=[0,161,961,2015,2715],e.INSIDE_GSUM=[0,336,1036,1516],e.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],e.INSIDE_ODD_WIDEST=[2,4,6,8],e.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])],e}(Sc),qU=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Fh=function(n){qU(e,n);function e(t){var r=n.call(this)||this;r.readers=[];var i=t?t.get(On.POSSIBLE_FORMATS):null,a=t&&t.get(On.ASSUME_CODE_39_CHECK_DIGIT)!==void 0,s=t&&t.get(On.ENABLE_CODE_39_EXTENDED_MODE)!==void 0;return i&&((i.includes(Je.EAN_13)||i.includes(Je.UPC_A)||i.includes(Je.EAN_8)||i.includes(Je.UPC_E))&&r.readers.push(new Nx(t)),i.includes(Je.CODE_39)&&r.readers.push(new sI(a,s)),i.includes(Je.CODE_93)&&r.readers.push(new oI),i.includes(Je.CODE_128)&&r.readers.push(new aI),i.includes(Je.ITF)&&r.readers.push(new lI),i.includes(Je.CODABAR)&&r.readers.push(new mU),i.includes(Je.RSS_14)&&r.readers.push(new mI),i.includes(Je.RSS_EXPANDED)&&(console.warn("RSS Expanded reader IS NOT ready for production yet! use at your own risk."),r.readers.push(new $U))),r.readers.length===0&&(r.readers.push(new Nx(t)),r.readers.push(new sI),r.readers.push(new oI),r.readers.push(new Nx(t)),r.readers.push(new aI),r.readers.push(new lI),r.readers.push(new mI)),r}return e.prototype.decodeRow=function(t,r,i){for(var a=0;a<this.readers.length;a++)try{return this.readers[a].decodeRow(t,r,i)}catch{}throw new xe},e.prototype.reset=function(){this.readers.forEach(function(t){return t.reset()})},e}(Cr),XU=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();(function(n){XU(e,n);function e(t,r){return t===void 0&&(t=500),n.call(this,new Fh(r),t,r)||this}return e})(cf);var yI=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},tn=function(){function n(e,t,r){this.ecCodewords=e,this.ecBlocks=[t],r&&this.ecBlocks.push(r)}return n.prototype.getECCodewords=function(){return this.ecCodewords},n.prototype.getECBlocks=function(){return this.ecBlocks},n}(),Xt=function(){function n(e,t){this.count=e,this.dataCodewords=t}return n.prototype.getCount=function(){return this.count},n.prototype.getDataCodewords=function(){return this.dataCodewords},n}(),KU=function(){function n(e,t,r,i,a,s){var o,c;this.versionNumber=e,this.symbolSizeRows=t,this.symbolSizeColumns=r,this.dataRegionSizeRows=i,this.dataRegionSizeColumns=a,this.ecBlocks=s;var d=0,f=s.getECCodewords(),p=s.getECBlocks();try{for(var g=yI(p),y=g.next();!y.done;y=g.next()){var v=y.value;d+=v.getCount()*(v.getDataCodewords()+f)}}catch(b){o={error:b}}finally{try{y&&!y.done&&(c=g.return)&&c.call(g)}finally{if(o)throw o.error}}this.totalCodewords=d}return n.prototype.getVersionNumber=function(){return this.versionNumber},n.prototype.getSymbolSizeRows=function(){return this.symbolSizeRows},n.prototype.getSymbolSizeColumns=function(){return this.symbolSizeColumns},n.prototype.getDataRegionSizeRows=function(){return this.dataRegionSizeRows},n.prototype.getDataRegionSizeColumns=function(){return this.dataRegionSizeColumns},n.prototype.getTotalCodewords=function(){return this.totalCodewords},n.prototype.getECBlocks=function(){return this.ecBlocks},n.getVersionForDimensions=function(e,t){var r,i;if((e&1)!==0||(t&1)!==0)throw new Be;try{for(var a=yI(n.VERSIONS),s=a.next();!s.done;s=a.next()){var o=s.value;if(o.symbolSizeRows===e&&o.symbolSizeColumns===t)return o}}catch(c){r={error:c}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}throw new Be},n.prototype.toString=function(){return""+this.versionNumber},n.buildVersions=function(){return[new n(1,10,10,8,8,new tn(5,new Xt(1,3))),new n(2,12,12,10,10,new tn(7,new Xt(1,5))),new n(3,14,14,12,12,new tn(10,new Xt(1,8))),new n(4,16,16,14,14,new tn(12,new Xt(1,12))),new n(5,18,18,16,16,new tn(14,new Xt(1,18))),new n(6,20,20,18,18,new tn(18,new Xt(1,22))),new n(7,22,22,20,20,new tn(20,new Xt(1,30))),new n(8,24,24,22,22,new tn(24,new Xt(1,36))),new n(9,26,26,24,24,new tn(28,new Xt(1,44))),new n(10,32,32,14,14,new tn(36,new Xt(1,62))),new n(11,36,36,16,16,new tn(42,new Xt(1,86))),new n(12,40,40,18,18,new tn(48,new Xt(1,114))),new n(13,44,44,20,20,new tn(56,new Xt(1,144))),new n(14,48,48,22,22,new tn(68,new Xt(1,174))),new n(15,52,52,24,24,new tn(42,new Xt(2,102))),new n(16,64,64,14,14,new tn(56,new Xt(2,140))),new n(17,72,72,16,16,new tn(36,new Xt(4,92))),new n(18,80,80,18,18,new tn(48,new Xt(4,114))),new n(19,88,88,20,20,new tn(56,new Xt(4,144))),new n(20,96,96,22,22,new tn(68,new Xt(4,174))),new n(21,104,104,24,24,new tn(56,new Xt(6,136))),new n(22,120,120,18,18,new tn(68,new Xt(6,175))),new n(23,132,132,20,20,new tn(62,new Xt(8,163))),new n(24,144,144,22,22,new tn(62,new Xt(8,156),new Xt(2,155))),new n(25,8,18,6,16,new tn(7,new Xt(1,5))),new n(26,8,32,6,14,new tn(11,new Xt(1,10))),new n(27,12,26,10,24,new tn(14,new Xt(1,16))),new n(28,12,36,10,16,new tn(18,new Xt(1,22))),new n(29,16,36,14,16,new tn(24,new Xt(1,32))),new n(30,16,48,14,22,new tn(28,new Xt(1,49)))]},n.VERSIONS=n.buildVersions(),n}(),QU=function(){function n(e){var t=e.getHeight();if(t<8||t>144||(t&1)!==0)throw new Be;this.version=n.readVersion(e),this.mappingBitMatrix=this.extractDataRegion(e),this.readMappingMatrix=new Ds(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}return n.prototype.getVersion=function(){return this.version},n.readVersion=function(e){var t=e.getHeight(),r=e.getWidth();return KU.getVersionForDimensions(t,r)},n.prototype.readCodewords=function(){var e=new Int8Array(this.version.getTotalCodewords()),t=0,r=4,i=0,a=this.mappingBitMatrix.getHeight(),s=this.mappingBitMatrix.getWidth(),o=!1,c=!1,d=!1,f=!1;do if(r===a&&i===0&&!o)e[t++]=this.readCorner1(a,s)&255,r-=2,i+=2,o=!0;else if(r===a-2&&i===0&&(s&3)!==0&&!c)e[t++]=this.readCorner2(a,s)&255,r-=2,i+=2,c=!0;else if(r===a+4&&i===2&&(s&7)===0&&!d)e[t++]=this.readCorner3(a,s)&255,r-=2,i+=2,d=!0;else if(r===a-2&&i===0&&(s&7)===4&&!f)e[t++]=this.readCorner4(a,s)&255,r-=2,i+=2,f=!0;else{do r<a&&i>=0&&!this.readMappingMatrix.get(i,r)&&(e[t++]=this.readUtah(r,i,a,s)&255),r-=2,i+=2;while(r>=0&&i<s);r+=1,i+=3;do r>=0&&i<s&&!this.readMappingMatrix.get(i,r)&&(e[t++]=this.readUtah(r,i,a,s)&255),r+=2,i-=2;while(r<a&&i>=0);r+=3,i+=1}while(r<a||i<s);if(t!==this.version.getTotalCodewords())throw new Be;return e},n.prototype.readModule=function(e,t,r,i){return e<0&&(e+=r,t+=4-(r+4&7)),t<0&&(t+=i,e+=4-(i+4&7)),this.readMappingMatrix.set(t,e),this.mappingBitMatrix.get(t,e)},n.prototype.readUtah=function(e,t,r,i){var a=0;return this.readModule(e-2,t-2,r,i)&&(a|=1),a<<=1,this.readModule(e-2,t-1,r,i)&&(a|=1),a<<=1,this.readModule(e-1,t-2,r,i)&&(a|=1),a<<=1,this.readModule(e-1,t-1,r,i)&&(a|=1),a<<=1,this.readModule(e-1,t,r,i)&&(a|=1),a<<=1,this.readModule(e,t-2,r,i)&&(a|=1),a<<=1,this.readModule(e,t-1,r,i)&&(a|=1),a<<=1,this.readModule(e,t,r,i)&&(a|=1),a},n.prototype.readCorner1=function(e,t){var r=0;return this.readModule(e-1,0,e,t)&&(r|=1),r<<=1,this.readModule(e-1,1,e,t)&&(r|=1),r<<=1,this.readModule(e-1,2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-1,e,t)&&(r|=1),r<<=1,this.readModule(1,t-1,e,t)&&(r|=1),r<<=1,this.readModule(2,t-1,e,t)&&(r|=1),r<<=1,this.readModule(3,t-1,e,t)&&(r|=1),r},n.prototype.readCorner2=function(e,t){var r=0;return this.readModule(e-3,0,e,t)&&(r|=1),r<<=1,this.readModule(e-2,0,e,t)&&(r|=1),r<<=1,this.readModule(e-1,0,e,t)&&(r|=1),r<<=1,this.readModule(0,t-4,e,t)&&(r|=1),r<<=1,this.readModule(0,t-3,e,t)&&(r|=1),r<<=1,this.readModule(0,t-2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-1,e,t)&&(r|=1),r<<=1,this.readModule(1,t-1,e,t)&&(r|=1),r},n.prototype.readCorner3=function(e,t){var r=0;return this.readModule(e-1,0,e,t)&&(r|=1),r<<=1,this.readModule(e-1,t-1,e,t)&&(r|=1),r<<=1,this.readModule(0,t-3,e,t)&&(r|=1),r<<=1,this.readModule(0,t-2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-1,e,t)&&(r|=1),r<<=1,this.readModule(1,t-3,e,t)&&(r|=1),r<<=1,this.readModule(1,t-2,e,t)&&(r|=1),r<<=1,this.readModule(1,t-1,e,t)&&(r|=1),r},n.prototype.readCorner4=function(e,t){var r=0;return this.readModule(e-3,0,e,t)&&(r|=1),r<<=1,this.readModule(e-2,0,e,t)&&(r|=1),r<<=1,this.readModule(e-1,0,e,t)&&(r|=1),r<<=1,this.readModule(0,t-2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-1,e,t)&&(r|=1),r<<=1,this.readModule(1,t-1,e,t)&&(r|=1),r<<=1,this.readModule(2,t-1,e,t)&&(r|=1),r<<=1,this.readModule(3,t-1,e,t)&&(r|=1),r},n.prototype.extractDataRegion=function(e){var t=this.version.getSymbolSizeRows(),r=this.version.getSymbolSizeColumns();if(e.getHeight()!==t)throw new nt("Dimension of bitMatrix must match the version size");for(var i=this.version.getDataRegionSizeRows(),a=this.version.getDataRegionSizeColumns(),s=t/i|0,o=r/a|0,c=s*i,d=o*a,f=new Ds(d,c),p=0;p<s;++p)for(var g=p*i,y=0;y<o;++y)for(var v=y*a,b=0;b<i;++b)for(var A=p*(i+2)+1+b,E=g+b,T=0;T<a;++T){var C=y*(a+2)+1+T;if(e.get(C,A)){var D=v+T;f.set(D,E)}}return f},n}(),vI=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ZU=function(){function n(e,t){this.numDataCodewords=e,this.codewords=t}return n.getDataBlocks=function(e,t){var r,i,a,s,o=t.getECBlocks(),c=0,d=o.getECBlocks();try{for(var f=vI(d),p=f.next();!p.done;p=f.next()){var g=p.value;c+=g.getCount()}}catch(q){r={error:q}}finally{try{p&&!p.done&&(i=f.return)&&i.call(f)}finally{if(r)throw r.error}}var y=new Array(c),v=0;try{for(var b=vI(d),A=b.next();!A.done;A=b.next())for(var g=A.value,E=0;E<g.getCount();E++){var T=g.getDataCodewords(),C=o.getECCodewords()+T;y[v++]=new n(T,new Uint8Array(C))}}catch(q){a={error:q}}finally{try{A&&!A.done&&(s=b.return)&&s.call(b)}finally{if(a)throw a.error}}for(var D=y[0].codewords.length,O=D-o.getECCodewords(),N=O-1,M=0,E=0;E<N;E++)for(var R=0;R<v;R++)y[R].codewords[E]=e[M++];for(var I=t.getVersionNumber()===24,B=I?8:v,R=0;R<B;R++)y[R].codewords[O-1]=e[M++];for(var L=y[0].codewords.length,E=O;E<L;E++)for(var R=0;R<v;R++){var k=I?(R+8)%v:R,F=I&&k>7?E-1:E;y[k].codewords[F]=e[M++]}if(M!==e.length)throw new nt;return y},n.prototype.getNumDataCodewords=function(){return this.numDataCodewords},n.prototype.getCodewords=function(){return this.codewords},n}(),D4=function(){function n(e){this.bytes=e,this.byteOffset=0,this.bitOffset=0}return n.prototype.getBitOffset=function(){return this.bitOffset},n.prototype.getByteOffset=function(){return this.byteOffset},n.prototype.readBits=function(e){if(e<1||e>32||e>this.available())throw new nt(""+e);var t=0,r=this.bitOffset,i=this.byteOffset,a=this.bytes;if(r>0){var s=8-r,o=e<s?e:s,c=s-o,d=255>>8-o<<c;t=(a[i]&d)>>c,e-=o,r+=o,r===8&&(r=0,i++)}if(e>0){for(;e>=8;)t=t<<8|a[i]&255,i++,e-=8;if(e>0){var c=8-e,d=255>>c<<c;t=t<<e|(a[i]&d)>>c,r+=e}}return this.bitOffset=r,this.byteOffset=i,t},n.prototype.available=function(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset},n}(),_r;(function(n){n[n.PAD_ENCODE=0]="PAD_ENCODE",n[n.ASCII_ENCODE=1]="ASCII_ENCODE",n[n.C40_ENCODE=2]="C40_ENCODE",n[n.TEXT_ENCODE=3]="TEXT_ENCODE",n[n.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",n[n.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",n[n.BASE256_ENCODE=6]="BASE256_ENCODE"})(_r||(_r={}));var JU=function(){function n(){}return n.decode=function(e){var t=new D4(e),r=new bt,i=new bt,a=new Array,s=_r.ASCII_ENCODE;do if(s===_r.ASCII_ENCODE)s=this.decodeAsciiSegment(t,r,i);else{switch(s){case _r.C40_ENCODE:this.decodeC40Segment(t,r);break;case _r.TEXT_ENCODE:this.decodeTextSegment(t,r);break;case _r.ANSIX12_ENCODE:this.decodeAnsiX12Segment(t,r);break;case _r.EDIFACT_ENCODE:this.decodeEdifactSegment(t,r);break;case _r.BASE256_ENCODE:this.decodeBase256Segment(t,r,a);break;default:throw new Be}s=_r.ASCII_ENCODE}while(s!==_r.PAD_ENCODE&&t.available()>0);return i.length()>0&&r.append(i.toString()),new Gm(e,r.toString(),a.length===0?null:a,null)},n.decodeAsciiSegment=function(e,t,r){var i=!1;do{var a=e.readBits(8);if(a===0)throw new Be;if(a<=128)return i&&(a+=128),t.append(String.fromCharCode(a-1)),_r.ASCII_ENCODE;if(a===129)return _r.PAD_ENCODE;if(a<=229){var s=a-130;s<10&&t.append("0"),t.append(""+s)}else switch(a){case 230:return _r.C40_ENCODE;case 231:return _r.BASE256_ENCODE;case 232:t.append("");break;case 233:case 234:break;case 235:i=!0;break;case 236:t.append("[)>05"),r.insert(0,"");break;case 237:t.append("[)>06"),r.insert(0,"");break;case 238:return _r.ANSIX12_ENCODE;case 239:return _r.TEXT_ENCODE;case 240:return _r.EDIFACT_ENCODE;case 241:break;default:if(a!==254||e.available()!==0)throw new Be;break}}while(e.available()>0);return _r.ASCII_ENCODE},n.decodeC40Segment=function(e,t){var r=!1,i=[],a=0;do{if(e.available()===8)return;var s=e.readBits(8);if(s===254)return;this.parseTwoBytes(s,e.readBits(8),i);for(var o=0;o<3;o++){var c=i[o];switch(a){case 0:if(c<3)a=c+1;else if(c<this.C40_BASIC_SET_CHARS.length){var d=this.C40_BASIC_SET_CHARS[c];r?(t.append(String.fromCharCode(d.charCodeAt(0)+128)),r=!1):t.append(d)}else throw new Be;break;case 1:r?(t.append(String.fromCharCode(c+128)),r=!1):t.append(String.fromCharCode(c)),a=0;break;case 2:if(c<this.C40_SHIFT2_SET_CHARS.length){var d=this.C40_SHIFT2_SET_CHARS[c];r?(t.append(String.fromCharCode(d.charCodeAt(0)+128)),r=!1):t.append(d)}else switch(c){case 27:t.append("");break;case 30:r=!0;break;default:throw new Be}a=0;break;case 3:r?(t.append(String.fromCharCode(c+224)),r=!1):t.append(String.fromCharCode(c+96)),a=0;break;default:throw new Be}}}while(e.available()>0)},n.decodeTextSegment=function(e,t){var r=!1,i=[],a=0;do{if(e.available()===8)return;var s=e.readBits(8);if(s===254)return;this.parseTwoBytes(s,e.readBits(8),i);for(var o=0;o<3;o++){var c=i[o];switch(a){case 0:if(c<3)a=c+1;else if(c<this.TEXT_BASIC_SET_CHARS.length){var d=this.TEXT_BASIC_SET_CHARS[c];r?(t.append(String.fromCharCode(d.charCodeAt(0)+128)),r=!1):t.append(d)}else throw new Be;break;case 1:r?(t.append(String.fromCharCode(c+128)),r=!1):t.append(String.fromCharCode(c)),a=0;break;case 2:if(c<this.TEXT_SHIFT2_SET_CHARS.length){var d=this.TEXT_SHIFT2_SET_CHARS[c];r?(t.append(String.fromCharCode(d.charCodeAt(0)+128)),r=!1):t.append(d)}else switch(c){case 27:t.append("");break;case 30:r=!0;break;default:throw new Be}a=0;break;case 3:if(c<this.TEXT_SHIFT3_SET_CHARS.length){var d=this.TEXT_SHIFT3_SET_CHARS[c];r?(t.append(String.fromCharCode(d.charCodeAt(0)+128)),r=!1):t.append(d),a=0}else throw new Be;break;default:throw new Be}}}while(e.available()>0)},n.decodeAnsiX12Segment=function(e,t){var r=[];do{if(e.available()===8)return;var i=e.readBits(8);if(i===254)return;this.parseTwoBytes(i,e.readBits(8),r);for(var a=0;a<3;a++){var s=r[a];switch(s){case 0:t.append("\r");break;case 1:t.append("*");break;case 2:t.append(">");break;case 3:t.append(" ");break;default:if(s<14)t.append(String.fromCharCode(s+44));else if(s<40)t.append(String.fromCharCode(s+51));else throw new Be;break}}}while(e.available()>0)},n.parseTwoBytes=function(e,t,r){var i=(e<<8)+t-1,a=Math.floor(i/1600);r[0]=a,i-=a*1600,a=Math.floor(i/40),r[1]=a,r[2]=i-a*40},n.decodeEdifactSegment=function(e,t){do{if(e.available()<=16)return;for(var r=0;r<4;r++){var i=e.readBits(6);if(i===31){var a=8-e.getBitOffset();a!==8&&e.readBits(a);return}(i&32)===0&&(i|=64),t.append(String.fromCharCode(i))}}while(e.available()>0)},n.decodeBase256Segment=function(e,t,r){var i=1+e.getByteOffset(),a=this.unrandomize255State(e.readBits(8),i++),s;if(a===0?s=e.available()/8|0:a<250?s=a:s=250*(a-249)+this.unrandomize255State(e.readBits(8),i++),s<0)throw new Be;for(var o=new Uint8Array(s),c=0;c<s;c++){if(e.available()<8)throw new Be;o[c]=this.unrandomize255State(e.readBits(8),i++)}r.push(o);try{t.append(xa.decode(o,jt.ISO88591))}catch(d){throw new z0("Platform does not support required encoding: "+d.message)}},n.unrandomize255State=function(e,t){var r=149*t%255+1,i=e-r;return i>=0?i:i+256},n.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],n.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],n.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],n.TEXT_SHIFT2_SET_CHARS=n.C40_SHIFT2_SET_CHARS,n.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""],n}(),eH=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},tH=function(){function n(){this.rsDecoder=new Wm(ki.DATA_MATRIX_FIELD_256)}return n.prototype.decode=function(e){var t,r,i=new QU(e),a=i.getVersion(),s=i.readCodewords(),o=ZU.getDataBlocks(s,a),c=0;try{for(var d=eH(o),f=d.next();!f.done;f=d.next()){var p=f.value;c+=p.getNumDataCodewords()}}catch(C){t={error:C}}finally{try{f&&!f.done&&(r=d.return)&&r.call(d)}finally{if(t)throw t.error}}for(var g=new Uint8Array(c),y=o.length,v=0;v<y;v++){var b=o[v],A=b.getCodewords(),E=b.getNumDataCodewords();this.correctErrors(A,E);for(var T=0;T<E;T++)g[T*y+v]=A[T]}return JU.decode(g)},n.prototype.correctErrors=function(e,t){var r=new Int32Array(e);try{this.rsDecoder.decode(r,e.length-t)}catch{throw new Vr}for(var i=0;i<t;i++)e[i]=r[i]},n}(),nH=function(){function n(e){this.image=e,this.rectangleDetector=new Z2(this.image)}return n.prototype.detect=function(){var e=this.rectangleDetector.detect(),t=this.detectSolid1(e);if(t=this.detectSolid2(t),t[3]=this.correctTopRight(t),!t[3])throw new xe;t=this.shiftToModuleCenter(t);var r=t[0],i=t[1],a=t[2],s=t[3],o=this.transitionsBetween(r,s)+1,c=this.transitionsBetween(a,s)+1;(o&1)===1&&(o+=1),(c&1)===1&&(c+=1),4*o<7*c&&4*c<7*o&&(o=c=Math.max(o,c));var d=n.sampleGrid(this.image,r,i,a,s,o,c);return new j_(d,[r,i,a,s])},n.shiftPoint=function(e,t,r){var i=(t.getX()-e.getX())/(r+1),a=(t.getY()-e.getY())/(r+1);return new qe(e.getX()+i,e.getY()+a)},n.moveAway=function(e,t,r){var i=e.getX(),a=e.getY();return i<t?i-=1:i+=1,a<r?a-=1:a+=1,new qe(i,a)},n.prototype.detectSolid1=function(e){var t=e[0],r=e[1],i=e[3],a=e[2],s=this.transitionsBetween(t,r),o=this.transitionsBetween(r,i),c=this.transitionsBetween(i,a),d=this.transitionsBetween(a,t),f=s,p=[a,t,r,i];return f>o&&(f=o,p[0]=t,p[1]=r,p[2]=i,p[3]=a),f>c&&(f=c,p[0]=r,p[1]=i,p[2]=a,p[3]=t),f>d&&(p[0]=i,p[1]=a,p[2]=t,p[3]=r),p},n.prototype.detectSolid2=function(e){var t=e[0],r=e[1],i=e[2],a=e[3],s=this.transitionsBetween(t,a),o=n.shiftPoint(r,i,(s+1)*4),c=n.shiftPoint(i,r,(s+1)*4),d=this.transitionsBetween(o,t),f=this.transitionsBetween(c,a);return d<f?(e[0]=t,e[1]=r,e[2]=i,e[3]=a):(e[0]=r,e[1]=i,e[2]=a,e[3]=t),e},n.prototype.correctTopRight=function(e){var t=e[0],r=e[1],i=e[2],a=e[3],s=this.transitionsBetween(t,a),o=this.transitionsBetween(r,a),c=n.shiftPoint(t,r,(o+1)*4),d=n.shiftPoint(i,r,(s+1)*4);s=this.transitionsBetween(c,a),o=this.transitionsBetween(d,a);var f=new qe(a.getX()+(i.getX()-r.getX())/(s+1),a.getY()+(i.getY()-r.getY())/(s+1)),p=new qe(a.getX()+(t.getX()-r.getX())/(o+1),a.getY()+(t.getY()-r.getY())/(o+1));if(!this.isValid(f))return this.isValid(p)?p:null;if(!this.isValid(p))return f;var g=this.transitionsBetween(c,f)+this.transitionsBetween(d,f),y=this.transitionsBetween(c,p)+this.transitionsBetween(d,p);return g>y?f:p},n.prototype.shiftToModuleCenter=function(e){var t=e[0],r=e[1],i=e[2],a=e[3],s=this.transitionsBetween(t,a)+1,o=this.transitionsBetween(i,a)+1,c=n.shiftPoint(t,r,o*4),d=n.shiftPoint(i,r,s*4);s=this.transitionsBetween(c,a)+1,o=this.transitionsBetween(d,a)+1,(s&1)===1&&(s+=1),(o&1)===1&&(o+=1);var f=(t.getX()+r.getX()+i.getX()+a.getX())/4,p=(t.getY()+r.getY()+i.getY()+a.getY())/4;t=n.moveAway(t,f,p),r=n.moveAway(r,f,p),i=n.moveAway(i,f,p),a=n.moveAway(a,f,p);var g,y;return c=n.shiftPoint(t,r,o*4),c=n.shiftPoint(c,a,s*4),g=n.shiftPoint(r,t,o*4),g=n.shiftPoint(g,i,s*4),d=n.shiftPoint(i,a,o*4),d=n.shiftPoint(d,r,s*4),y=n.shiftPoint(a,i,o*4),y=n.shiftPoint(y,t,s*4),[c,g,d,y]},n.prototype.isValid=function(e){return e.getX()>=0&&e.getX()<this.image.getWidth()&&e.getY()>0&&e.getY()<this.image.getHeight()},n.sampleGrid=function(e,t,r,i,a,s,o){var c=U_.getInstance();return c.sampleGrid(e,s,o,.5,.5,s-.5,.5,s-.5,o-.5,.5,o-.5,t.getX(),t.getY(),a.getX(),a.getY(),i.getX(),i.getY(),r.getX(),r.getY())},n.prototype.transitionsBetween=function(e,t){var r=Math.trunc(e.getX()),i=Math.trunc(e.getY()),a=Math.trunc(t.getX()),s=Math.trunc(t.getY()),o=Math.abs(s-i)>Math.abs(a-r);if(o){var c=r;r=i,i=c,c=a,a=s,s=c}for(var d=Math.abs(a-r),f=Math.abs(s-i),p=-d/2,g=i<s?1:-1,y=r<a?1:-1,v=0,b=this.image.get(o?i:r,o?r:i),A=r,E=i;A!==a;A+=y){var T=this.image.get(o?E:A,o?A:E);if(T!==b&&(v++,b=T),p+=f,p>0){if(E===s)break;E+=g,p-=d}}return v},n}(),tw=function(){function n(){this.decoder=new tH}return n.prototype.decode=function(e,t){t===void 0&&(t=null);var r,i;if(t!=null&&t.has(On.PURE_BARCODE)){var a=n.extractPureBits(e.getBlackMatrix());r=this.decoder.decode(a),i=n.NO_POINTS}else{var s=new nH(e.getBlackMatrix()).detect();r=this.decoder.decode(s.getBits()),i=s.getPoints()}var o=r.getRawBytes(),c=new gi(r.getText(),o,8*o.length,i,Je.DATA_MATRIX,_n.currentTimeMillis()),d=r.getByteSegments();d!=null&&c.putMetadata(ei.BYTE_SEGMENTS,d);var f=r.getECLevel();return f!=null&&c.putMetadata(ei.ERROR_CORRECTION_LEVEL,f),c},n.prototype.reset=function(){},n.extractPureBits=function(e){var t=e.getTopLeftOnBit(),r=e.getBottomRightOnBit();if(t==null||r==null)throw new xe;var i=this.moduleSize(t,e),a=t[1],s=r[1],o=t[0],c=r[0],d=(c-o+1)/i,f=(s-a+1)/i;if(d<=0||f<=0)throw new xe;var p=i/2;a+=p,o+=p;for(var g=new Ds(d,f),y=0;y<f;y++)for(var v=a+y*i,b=0;b<d;b++)e.get(o+b*i,v)&&g.set(b,y);return g},n.moduleSize=function(e,t){for(var r=t.getWidth(),i=e[0],a=e[1];i<r&&t.get(i,a);)i++;if(i===r)throw new xe;var s=i-e[0];if(s===0)throw new xe;return s},n.NO_POINTS=[],n}(),rH=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();(function(n){rH(e,n);function e(t){return t===void 0&&(t=500),n.call(this,new tw,t)||this}return e})(cf);var md;(function(n){n[n.L=0]="L",n[n.M=1]="M",n[n.Q=2]="Q",n[n.H=3]="H"})(md||(md={}));var iH=function(){function n(e,t,r){this.value=e,this.stringValue=t,this.bits=r,n.FOR_BITS.set(r,this),n.FOR_VALUE.set(e,this)}return n.prototype.getValue=function(){return this.value},n.prototype.getBits=function(){return this.bits},n.fromString=function(e){switch(e){case"L":return n.L;case"M":return n.M;case"Q":return n.Q;case"H":return n.H;default:throw new Ma(e+"not available")}},n.prototype.toString=function(){return this.stringValue},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.value===t.value},n.forBits=function(e){if(e<0||e>=n.FOR_BITS.size)throw new nt;return n.FOR_BITS.get(e)},n.FOR_BITS=new Map,n.FOR_VALUE=new Map,n.L=new n(md.L,"L",1),n.M=new n(md.M,"M",0),n.Q=new n(md.Q,"Q",3),n.H=new n(md.H,"H",2),n}(),aH=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},R4=function(){function n(e){this.errorCorrectionLevel=iH.forBits(e>>3&3),this.dataMask=e&7}return n.numBitsDiffering=function(e,t){return Tt.bitCount(e^t)},n.decodeFormatInformation=function(e,t){var r=n.doDecodeFormatInformation(e,t);return r!==null?r:n.doDecodeFormatInformation(e^n.FORMAT_INFO_MASK_QR,t^n.FORMAT_INFO_MASK_QR)},n.doDecodeFormatInformation=function(e,t){var r,i,a=Number.MAX_SAFE_INTEGER,s=0;try{for(var o=aH(n.FORMAT_INFO_DECODE_LOOKUP),c=o.next();!c.done;c=o.next()){var d=c.value,f=d[0];if(f===e||f===t)return new n(d[1]);var p=n.numBitsDiffering(e,f);p<a&&(s=d[1],a=p),e!==t&&(p=n.numBitsDiffering(t,f),p<a&&(s=d[1],a=p))}}catch(g){r={error:g}}finally{try{c&&!c.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}return a<=3?new n(s):null},n.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},n.prototype.getDataMask=function(){return this.dataMask},n.prototype.hashCode=function(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.errorCorrectionLevel===t.errorCorrectionLevel&&this.dataMask===t.dataMask},n.FORMAT_INFO_MASK_QR=21522,n.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])],n}(),sH=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},le=function(){function n(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this.ecCodewordsPerBlock=e,this.ecBlocks=t}return n.prototype.getECCodewordsPerBlock=function(){return this.ecCodewordsPerBlock},n.prototype.getNumBlocks=function(){var e,t,r=0,i=this.ecBlocks;try{for(var a=sH(i),s=a.next();!s.done;s=a.next()){var o=s.value;r+=o.getCount()}}catch(c){e={error:c}}finally{try{s&&!s.done&&(t=a.return)&&t.call(a)}finally{if(e)throw e.error}}return r},n.prototype.getTotalECCodewords=function(){return this.ecCodewordsPerBlock*this.getNumBlocks()},n.prototype.getECBlocks=function(){return this.ecBlocks},n}(),W=function(){function n(e,t){this.count=e,this.dataCodewords=t}return n.prototype.getCount=function(){return this.count},n.prototype.getDataCodewords=function(){return this.dataCodewords},n}(),oH=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Fc=function(){function n(e,t){for(var r,i,a=[],s=2;s<arguments.length;s++)a[s-2]=arguments[s];this.versionNumber=e,this.alignmentPatternCenters=t,this.ecBlocks=a;var o=0,c=a[0].getECCodewordsPerBlock(),d=a[0].getECBlocks();try{for(var f=oH(d),p=f.next();!p.done;p=f.next()){var g=p.value;o+=g.getCount()*(g.getDataCodewords()+c)}}catch(y){r={error:y}}finally{try{p&&!p.done&&(i=f.return)&&i.call(f)}finally{if(r)throw r.error}}this.totalCodewords=o}return n.prototype.getVersionNumber=function(){return this.versionNumber},n.prototype.getAlignmentPatternCenters=function(){return this.alignmentPatternCenters},n.prototype.getTotalCodewords=function(){return this.totalCodewords},n.prototype.getDimensionForVersion=function(){return 17+4*this.versionNumber},n.prototype.getECBlocksForLevel=function(e){return this.ecBlocks[e.getValue()]},n.getProvisionalVersionForDimension=function(e){if(e%4!==1)throw new Be;try{return this.getVersionForNumber((e-17)/4)}catch{throw new Be}},n.getVersionForNumber=function(e){if(e<1||e>40)throw new nt;return n.VERSIONS[e-1]},n.decodeVersionInformation=function(e){for(var t=Number.MAX_SAFE_INTEGER,r=0,i=0;i<n.VERSION_DECODE_INFO.length;i++){var a=n.VERSION_DECODE_INFO[i];if(a===e)return n.getVersionForNumber(i+7);var s=R4.numBitsDiffering(e,a);s<t&&(r=i+7,t=s)}return t<=3?n.getVersionForNumber(r):null},n.prototype.buildFunctionPattern=function(){var e=this.getDimensionForVersion(),t=new Ds(e);t.setRegion(0,0,9,9),t.setRegion(e-8,0,8,9),t.setRegion(0,e-8,9,8);for(var r=this.alignmentPatternCenters.length,i=0;i<r;i++)for(var a=this.alignmentPatternCenters[i]-2,s=0;s<r;s++)i===0&&(s===0||s===r-1)||i===r-1&&s===0||t.setRegion(this.alignmentPatternCenters[s]-2,a,5,5);return t.setRegion(6,9,1,e-17),t.setRegion(9,6,e-17,1),this.versionNumber>6&&(t.setRegion(e-11,0,3,6),t.setRegion(0,e-11,6,3)),t},n.prototype.toString=function(){return""+this.versionNumber},n.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),n.VERSIONS=[new n(1,new Int32Array(0),new le(7,new W(1,19)),new le(10,new W(1,16)),new le(13,new W(1,13)),new le(17,new W(1,9))),new n(2,Int32Array.from([6,18]),new le(10,new W(1,34)),new le(16,new W(1,28)),new le(22,new W(1,22)),new le(28,new W(1,16))),new n(3,Int32Array.from([6,22]),new le(15,new W(1,55)),new le(26,new W(1,44)),new le(18,new W(2,17)),new le(22,new W(2,13))),new n(4,Int32Array.from([6,26]),new le(20,new W(1,80)),new le(18,new W(2,32)),new le(26,new W(2,24)),new le(16,new W(4,9))),new n(5,Int32Array.from([6,30]),new le(26,new W(1,108)),new le(24,new W(2,43)),new le(18,new W(2,15),new W(2,16)),new le(22,new W(2,11),new W(2,12))),new n(6,Int32Array.from([6,34]),new le(18,new W(2,68)),new le(16,new W(4,27)),new le(24,new W(4,19)),new le(28,new W(4,15))),new n(7,Int32Array.from([6,22,38]),new le(20,new W(2,78)),new le(18,new W(4,31)),new le(18,new W(2,14),new W(4,15)),new le(26,new W(4,13),new W(1,14))),new n(8,Int32Array.from([6,24,42]),new le(24,new W(2,97)),new le(22,new W(2,38),new W(2,39)),new le(22,new W(4,18),new W(2,19)),new le(26,new W(4,14),new W(2,15))),new n(9,Int32Array.from([6,26,46]),new le(30,new W(2,116)),new le(22,new W(3,36),new W(2,37)),new le(20,new W(4,16),new W(4,17)),new le(24,new W(4,12),new W(4,13))),new n(10,Int32Array.from([6,28,50]),new le(18,new W(2,68),new W(2,69)),new le(26,new W(4,43),new W(1,44)),new le(24,new W(6,19),new W(2,20)),new le(28,new W(6,15),new W(2,16))),new n(11,Int32Array.from([6,30,54]),new le(20,new W(4,81)),new le(30,new W(1,50),new W(4,51)),new le(28,new W(4,22),new W(4,23)),new le(24,new W(3,12),new W(8,13))),new n(12,Int32Array.from([6,32,58]),new le(24,new W(2,92),new W(2,93)),new le(22,new W(6,36),new W(2,37)),new le(26,new W(4,20),new W(6,21)),new le(28,new W(7,14),new W(4,15))),new n(13,Int32Array.from([6,34,62]),new le(26,new W(4,107)),new le(22,new W(8,37),new W(1,38)),new le(24,new W(8,20),new W(4,21)),new le(22,new W(12,11),new W(4,12))),new n(14,Int32Array.from([6,26,46,66]),new le(30,new W(3,115),new W(1,116)),new le(24,new W(4,40),new W(5,41)),new le(20,new W(11,16),new W(5,17)),new le(24,new W(11,12),new W(5,13))),new n(15,Int32Array.from([6,26,48,70]),new le(22,new W(5,87),new W(1,88)),new le(24,new W(5,41),new W(5,42)),new le(30,new W(5,24),new W(7,25)),new le(24,new W(11,12),new W(7,13))),new n(16,Int32Array.from([6,26,50,74]),new le(24,new W(5,98),new W(1,99)),new le(28,new W(7,45),new W(3,46)),new le(24,new W(15,19),new W(2,20)),new le(30,new W(3,15),new W(13,16))),new n(17,Int32Array.from([6,30,54,78]),new le(28,new W(1,107),new W(5,108)),new le(28,new W(10,46),new W(1,47)),new le(28,new W(1,22),new W(15,23)),new le(28,new W(2,14),new W(17,15))),new n(18,Int32Array.from([6,30,56,82]),new le(30,new W(5,120),new W(1,121)),new le(26,new W(9,43),new W(4,44)),new le(28,new W(17,22),new W(1,23)),new le(28,new W(2,14),new W(19,15))),new n(19,Int32Array.from([6,30,58,86]),new le(28,new W(3,113),new W(4,114)),new le(26,new W(3,44),new W(11,45)),new le(26,new W(17,21),new W(4,22)),new le(26,new W(9,13),new W(16,14))),new n(20,Int32Array.from([6,34,62,90]),new le(28,new W(3,107),new W(5,108)),new le(26,new W(3,41),new W(13,42)),new le(30,new W(15,24),new W(5,25)),new le(28,new W(15,15),new W(10,16))),new n(21,Int32Array.from([6,28,50,72,94]),new le(28,new W(4,116),new W(4,117)),new le(26,new W(17,42)),new le(28,new W(17,22),new W(6,23)),new le(30,new W(19,16),new W(6,17))),new n(22,Int32Array.from([6,26,50,74,98]),new le(28,new W(2,111),new W(7,112)),new le(28,new W(17,46)),new le(30,new W(7,24),new W(16,25)),new le(24,new W(34,13))),new n(23,Int32Array.from([6,30,54,78,102]),new le(30,new W(4,121),new W(5,122)),new le(28,new W(4,47),new W(14,48)),new le(30,new W(11,24),new W(14,25)),new le(30,new W(16,15),new W(14,16))),new n(24,Int32Array.from([6,28,54,80,106]),new le(30,new W(6,117),new W(4,118)),new le(28,new W(6,45),new W(14,46)),new le(30,new W(11,24),new W(16,25)),new le(30,new W(30,16),new W(2,17))),new n(25,Int32Array.from([6,32,58,84,110]),new le(26,new W(8,106),new W(4,107)),new le(28,new W(8,47),new W(13,48)),new le(30,new W(7,24),new W(22,25)),new le(30,new W(22,15),new W(13,16))),new n(26,Int32Array.from([6,30,58,86,114]),new le(28,new W(10,114),new W(2,115)),new le(28,new W(19,46),new W(4,47)),new le(28,new W(28,22),new W(6,23)),new le(30,new W(33,16),new W(4,17))),new n(27,Int32Array.from([6,34,62,90,118]),new le(30,new W(8,122),new W(4,123)),new le(28,new W(22,45),new W(3,46)),new le(30,new W(8,23),new W(26,24)),new le(30,new W(12,15),new W(28,16))),new n(28,Int32Array.from([6,26,50,74,98,122]),new le(30,new W(3,117),new W(10,118)),new le(28,new W(3,45),new W(23,46)),new le(30,new W(4,24),new W(31,25)),new le(30,new W(11,15),new W(31,16))),new n(29,Int32Array.from([6,30,54,78,102,126]),new le(30,new W(7,116),new W(7,117)),new le(28,new W(21,45),new W(7,46)),new le(30,new W(1,23),new W(37,24)),new le(30,new W(19,15),new W(26,16))),new n(30,Int32Array.from([6,26,52,78,104,130]),new le(30,new W(5,115),new W(10,116)),new le(28,new W(19,47),new W(10,48)),new le(30,new W(15,24),new W(25,25)),new le(30,new W(23,15),new W(25,16))),new n(31,Int32Array.from([6,30,56,82,108,134]),new le(30,new W(13,115),new W(3,116)),new le(28,new W(2,46),new W(29,47)),new le(30,new W(42,24),new W(1,25)),new le(30,new W(23,15),new W(28,16))),new n(32,Int32Array.from([6,34,60,86,112,138]),new le(30,new W(17,115)),new le(28,new W(10,46),new W(23,47)),new le(30,new W(10,24),new W(35,25)),new le(30,new W(19,15),new W(35,16))),new n(33,Int32Array.from([6,30,58,86,114,142]),new le(30,new W(17,115),new W(1,116)),new le(28,new W(14,46),new W(21,47)),new le(30,new W(29,24),new W(19,25)),new le(30,new W(11,15),new W(46,16))),new n(34,Int32Array.from([6,34,62,90,118,146]),new le(30,new W(13,115),new W(6,116)),new le(28,new W(14,46),new W(23,47)),new le(30,new W(44,24),new W(7,25)),new le(30,new W(59,16),new W(1,17))),new n(35,Int32Array.from([6,30,54,78,102,126,150]),new le(30,new W(12,121),new W(7,122)),new le(28,new W(12,47),new W(26,48)),new le(30,new W(39,24),new W(14,25)),new le(30,new W(22,15),new W(41,16))),new n(36,Int32Array.from([6,24,50,76,102,128,154]),new le(30,new W(6,121),new W(14,122)),new le(28,new W(6,47),new W(34,48)),new le(30,new W(46,24),new W(10,25)),new le(30,new W(2,15),new W(64,16))),new n(37,Int32Array.from([6,28,54,80,106,132,158]),new le(30,new W(17,122),new W(4,123)),new le(28,new W(29,46),new W(14,47)),new le(30,new W(49,24),new W(10,25)),new le(30,new W(24,15),new W(46,16))),new n(38,Int32Array.from([6,32,58,84,110,136,162]),new le(30,new W(4,122),new W(18,123)),new le(28,new W(13,46),new W(32,47)),new le(30,new W(48,24),new W(14,25)),new le(30,new W(42,15),new W(32,16))),new n(39,Int32Array.from([6,26,54,82,110,138,166]),new le(30,new W(20,117),new W(4,118)),new le(28,new W(40,47),new W(7,48)),new le(30,new W(43,24),new W(22,25)),new le(30,new W(10,15),new W(67,16))),new n(40,Int32Array.from([6,30,58,86,114,142,170]),new le(30,new W(19,118),new W(6,119)),new le(28,new W(18,47),new W(31,48)),new le(30,new W(34,24),new W(34,25)),new le(30,new W(20,15),new W(61,16)))],n}(),Nr;(function(n){n[n.DATA_MASK_000=0]="DATA_MASK_000",n[n.DATA_MASK_001=1]="DATA_MASK_001",n[n.DATA_MASK_010=2]="DATA_MASK_010",n[n.DATA_MASK_011=3]="DATA_MASK_011",n[n.DATA_MASK_100=4]="DATA_MASK_100",n[n.DATA_MASK_101=5]="DATA_MASK_101",n[n.DATA_MASK_110=6]="DATA_MASK_110",n[n.DATA_MASK_111=7]="DATA_MASK_111"})(Nr||(Nr={}));var xI=function(){function n(e,t){this.value=e,this.isMasked=t}return n.prototype.unmaskBitMatrix=function(e,t){for(var r=0;r<t;r++)for(var i=0;i<t;i++)this.isMasked(r,i)&&e.flip(i,r)},n.values=new Map([[Nr.DATA_MASK_000,new n(Nr.DATA_MASK_000,function(e,t){return(e+t&1)===0})],[Nr.DATA_MASK_001,new n(Nr.DATA_MASK_001,function(e,t){return(e&1)===0})],[Nr.DATA_MASK_010,new n(Nr.DATA_MASK_010,function(e,t){return t%3===0})],[Nr.DATA_MASK_011,new n(Nr.DATA_MASK_011,function(e,t){return(e+t)%3===0})],[Nr.DATA_MASK_100,new n(Nr.DATA_MASK_100,function(e,t){return(Math.floor(e/2)+Math.floor(t/3)&1)===0})],[Nr.DATA_MASK_101,new n(Nr.DATA_MASK_101,function(e,t){return e*t%6===0})],[Nr.DATA_MASK_110,new n(Nr.DATA_MASK_110,function(e,t){return e*t%6<3})],[Nr.DATA_MASK_111,new n(Nr.DATA_MASK_111,function(e,t){return(e+t+e*t%3&1)===0})]]),n}(),lH=function(){function n(e){var t=e.getHeight();if(t<21||(t&3)!==1)throw new Be;this.bitMatrix=e}return n.prototype.readFormatInformation=function(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;for(var e=0,t=0;t<6;t++)e=this.copyBit(t,8,e);e=this.copyBit(7,8,e),e=this.copyBit(8,8,e),e=this.copyBit(8,7,e);for(var r=5;r>=0;r--)e=this.copyBit(8,r,e);for(var i=this.bitMatrix.getHeight(),a=0,s=i-7,r=i-1;r>=s;r--)a=this.copyBit(8,r,a);for(var t=i-8;t<i;t++)a=this.copyBit(t,8,a);if(this.parsedFormatInfo=R4.decodeFormatInformation(e,a),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new Be},n.prototype.readVersion=function(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;var e=this.bitMatrix.getHeight(),t=Math.floor((e-17)/4);if(t<=6)return Fc.getVersionForNumber(t);for(var r=0,i=e-11,a=5;a>=0;a--)for(var s=e-9;s>=i;s--)r=this.copyBit(s,a,r);var o=Fc.decodeVersionInformation(r);if(o!==null&&o.getDimensionForVersion()===e)return this.parsedVersion=o,o;r=0;for(var s=5;s>=0;s--)for(var a=e-9;a>=i;a--)r=this.copyBit(s,a,r);if(o=Fc.decodeVersionInformation(r),o!==null&&o.getDimensionForVersion()===e)return this.parsedVersion=o,o;throw new Be},n.prototype.copyBit=function(e,t,r){var i=this.isMirror?this.bitMatrix.get(t,e):this.bitMatrix.get(e,t);return i?r<<1|1:r<<1},n.prototype.readCodewords=function(){var e=this.readFormatInformation(),t=this.readVersion(),r=xI.values.get(e.getDataMask()),i=this.bitMatrix.getHeight();r.unmaskBitMatrix(this.bitMatrix,i);for(var a=t.buildFunctionPattern(),s=!0,o=new Uint8Array(t.getTotalCodewords()),c=0,d=0,f=0,p=i-1;p>0;p-=2){p===6&&p--;for(var g=0;g<i;g++)for(var y=s?i-1-g:g,v=0;v<2;v++)a.get(p-v,y)||(f++,d<<=1,this.bitMatrix.get(p-v,y)&&(d|=1),f===8&&(o[c++]=d,f=0,d=0));s=!s}if(c!==t.getTotalCodewords())throw new Be;return o},n.prototype.remask=function(){if(this.parsedFormatInfo!==null){var e=xI.values.get(this.parsedFormatInfo.getDataMask()),t=this.bitMatrix.getHeight();e.unmaskBitMatrix(this.bitMatrix,t)}},n.prototype.setMirror=function(e){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=e},n.prototype.mirror=function(){for(var e=this.bitMatrix,t=0,r=e.getWidth();t<r;t++)for(var i=t+1,a=e.getHeight();i<a;i++)e.get(t,i)!==e.get(i,t)&&(e.flip(i,t),e.flip(t,i))},n}(),wI=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},cH=function(){function n(e,t){this.numDataCodewords=e,this.codewords=t}return n.getDataBlocks=function(e,t,r){var i,a,s,o;if(e.length!==t.getTotalCodewords())throw new nt;var c=t.getECBlocksForLevel(r),d=0,f=c.getECBlocks();try{for(var p=wI(f),g=p.next();!g.done;g=p.next()){var y=g.value;d+=y.getCount()}}catch(F){i={error:F}}finally{try{g&&!g.done&&(a=p.return)&&a.call(p)}finally{if(i)throw i.error}}var v=new Array(d),b=0;try{for(var A=wI(f),E=A.next();!E.done;E=A.next())for(var y=E.value,T=0;T<y.getCount();T++){var C=y.getDataCodewords(),D=c.getECCodewordsPerBlock()+C;v[b++]=new n(C,new Uint8Array(D))}}catch(F){s={error:F}}finally{try{E&&!E.done&&(o=A.return)&&o.call(A)}finally{if(s)throw s.error}}for(var O=v[0].codewords.length,N=v.length-1;N>=0;){var M=v[N].codewords.length;if(M===O)break;N--}N++;for(var R=O-c.getECCodewordsPerBlock(),I=0,T=0;T<R;T++)for(var B=0;B<b;B++)v[B].codewords[T]=e[I++];for(var B=N;B<b;B++)v[B].codewords[R]=e[I++];for(var L=v[0].codewords.length,T=R;T<L;T++)for(var B=0;B<b;B++){var k=B<N?T:T+1;v[B].codewords[k]=e[I++]}return v},n.prototype.getNumDataCodewords=function(){return this.numDataCodewords},n.prototype.getCodewords=function(){return this.codewords},n}(),da;(function(n){n[n.TERMINATOR=0]="TERMINATOR",n[n.NUMERIC=1]="NUMERIC",n[n.ALPHANUMERIC=2]="ALPHANUMERIC",n[n.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",n[n.BYTE=4]="BYTE",n[n.ECI=5]="ECI",n[n.KANJI=6]="KANJI",n[n.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",n[n.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",n[n.HANZI=9]="HANZI"})(da||(da={}));var Sn=function(){function n(e,t,r,i){this.value=e,this.stringValue=t,this.characterCountBitsForVersions=r,this.bits=i,n.FOR_BITS.set(i,this),n.FOR_VALUE.set(e,this)}return n.forBits=function(e){var t=n.FOR_BITS.get(e);if(t===void 0)throw new nt;return t},n.prototype.getCharacterCountBits=function(e){var t=e.getVersionNumber(),r;return t<=9?r=0:t<=26?r=1:r=2,this.characterCountBitsForVersions[r]},n.prototype.getValue=function(){return this.value},n.prototype.getBits=function(){return this.bits},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.value===t.value},n.prototype.toString=function(){return this.stringValue},n.FOR_BITS=new Map,n.FOR_VALUE=new Map,n.TERMINATOR=new n(da.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),n.NUMERIC=new n(da.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),n.ALPHANUMERIC=new n(da.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),n.STRUCTURED_APPEND=new n(da.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),n.BYTE=new n(da.BYTE,"BYTE",Int32Array.from([8,16,16]),4),n.ECI=new n(da.ECI,"ECI",Int32Array.from([0,0,0]),7),n.KANJI=new n(da.KANJI,"KANJI",Int32Array.from([8,10,12]),8),n.FNC1_FIRST_POSITION=new n(da.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),n.FNC1_SECOND_POSITION=new n(da.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),n.HANZI=new n(da.HANZI,"HANZI",Int32Array.from([8,10,12]),13),n}(),uH=function(){function n(){}return n.decode=function(e,t,r,i){var a=new D4(e),s=new bt,o=new Array,c=-1,d=-1;try{var f=null,p=!1,g=void 0;do{if(a.available()<4)g=Sn.TERMINATOR;else{var y=a.readBits(4);g=Sn.forBits(y)}switch(g){case Sn.TERMINATOR:break;case Sn.FNC1_FIRST_POSITION:case Sn.FNC1_SECOND_POSITION:p=!0;break;case Sn.STRUCTURED_APPEND:if(a.available()<16)throw new Be;c=a.readBits(8),d=a.readBits(8);break;case Sn.ECI:var v=n.parseECIValue(a);if(f=Sr.getCharacterSetECIByValue(v),f===null)throw new Be;break;case Sn.HANZI:var b=a.readBits(4),A=a.readBits(g.getCharacterCountBits(t));b===n.GB2312_SUBSET&&n.decodeHanziSegment(a,s,A);break;default:var E=a.readBits(g.getCharacterCountBits(t));switch(g){case Sn.NUMERIC:n.decodeNumericSegment(a,s,E);break;case Sn.ALPHANUMERIC:n.decodeAlphanumericSegment(a,s,E,p);break;case Sn.BYTE:n.decodeByteSegment(a,s,E,f,o,i);break;case Sn.KANJI:n.decodeKanjiSegment(a,s,E);break;default:throw new Be}break}}while(g!==Sn.TERMINATOR)}catch{throw new Be}return new Gm(e,s.toString(),o.length===0?null:o,r===null?null:r.toString(),c,d)},n.decodeHanziSegment=function(e,t,r){if(r*13>e.available())throw new Be;for(var i=new Uint8Array(2*r),a=0;r>0;){var s=e.readBits(13),o=s/96<<8&4294967295|s%96;o<959?o+=41377:o+=42657,i[a]=o>>8&255,i[a+1]=o&255,a+=2,r--}try{t.append(xa.decode(i,jt.GB2312))}catch(c){throw new Be(c)}},n.decodeKanjiSegment=function(e,t,r){if(r*13>e.available())throw new Be;for(var i=new Uint8Array(2*r),a=0;r>0;){var s=e.readBits(13),o=s/192<<8&4294967295|s%192;o<7936?o+=33088:o+=49472,i[a]=o>>8,i[a+1]=o,a+=2,r--}try{t.append(xa.decode(i,jt.SHIFT_JIS))}catch(c){throw new Be(c)}},n.decodeByteSegment=function(e,t,r,i,a,s){if(8*r>e.available())throw new Be;for(var o=new Uint8Array(r),c=0;c<r;c++)o[c]=e.readBits(8);var d;i===null?d=jt.guessEncoding(o,s):d=i.getName();try{t.append(xa.decode(o,d))}catch(f){throw new Be(f)}a.push(o)},n.toAlphaNumericChar=function(e){if(e>=n.ALPHANUMERIC_CHARS.length)throw new Be;return n.ALPHANUMERIC_CHARS[e]},n.decodeAlphanumericSegment=function(e,t,r,i){for(var a=t.length();r>1;){if(e.available()<11)throw new Be;var s=e.readBits(11);t.append(n.toAlphaNumericChar(Math.floor(s/45))),t.append(n.toAlphaNumericChar(s%45)),r-=2}if(r===1){if(e.available()<6)throw new Be;t.append(n.toAlphaNumericChar(e.readBits(6)))}if(i)for(var o=a;o<t.length();o++)t.charAt(o)==="%"&&(o<t.length()-1&&t.charAt(o+1)==="%"?t.deleteCharAt(o+1):t.setCharAt(o,""))},n.decodeNumericSegment=function(e,t,r){for(;r>=3;){if(e.available()<10)throw new Be;var i=e.readBits(10);if(i>=1e3)throw new Be;t.append(n.toAlphaNumericChar(Math.floor(i/100))),t.append(n.toAlphaNumericChar(Math.floor(i/10)%10)),t.append(n.toAlphaNumericChar(i%10)),r-=3}if(r===2){if(e.available()<7)throw new Be;var a=e.readBits(7);if(a>=100)throw new Be;t.append(n.toAlphaNumericChar(Math.floor(a/10))),t.append(n.toAlphaNumericChar(a%10))}else if(r===1){if(e.available()<4)throw new Be;var s=e.readBits(4);if(s>=10)throw new Be;t.append(n.toAlphaNumericChar(s))}},n.parseECIValue=function(e){var t=e.readBits(8);if((t&128)===0)return t&127;if((t&192)===128){var r=e.readBits(8);return(t&63)<<8&4294967295|r}if((t&224)===192){var i=e.readBits(16);return(t&31)<<16&4294967295|i}throw new Be},n.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",n.GB2312_SUBSET=1,n}(),M4=function(){function n(e){this.mirrored=e}return n.prototype.isMirrored=function(){return this.mirrored},n.prototype.applyMirroredCorrection=function(e){if(!(!this.mirrored||e===null||e.length<3)){var t=e[0];e[0]=e[2],e[2]=t}},n}(),_I=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},dH=function(){function n(){this.rsDecoder=new Wm(ki.QR_CODE_FIELD_256)}return n.prototype.decodeBooleanArray=function(e,t){return this.decodeBitMatrix(Ds.parseFromBooleanArray(e),t)},n.prototype.decodeBitMatrix=function(e,t){var r=new lH(e),i=null;try{return this.decodeBitMatrixParser(r,t)}catch(s){i=s}try{r.remask(),r.setMirror(!0),r.readVersion(),r.readFormatInformation(),r.mirror();var a=this.decodeBitMatrixParser(r,t);return a.setOther(new M4(!0)),a}catch(s){throw i!==null?i:s}},n.prototype.decodeBitMatrixParser=function(e,t){var r,i,a,s,o=e.readVersion(),c=e.readFormatInformation().getErrorCorrectionLevel(),d=e.readCodewords(),f=cH.getDataBlocks(d,o,c),p=0;try{for(var g=_I(f),y=g.next();!y.done;y=g.next()){var v=y.value;p+=v.getNumDataCodewords()}}catch(N){r={error:N}}finally{try{y&&!y.done&&(i=g.return)&&i.call(g)}finally{if(r)throw r.error}}var b=new Uint8Array(p),A=0;try{for(var E=_I(f),T=E.next();!T.done;T=E.next()){var v=T.value,C=v.getCodewords(),D=v.getNumDataCodewords();this.correctErrors(C,D);for(var O=0;O<D;O++)b[A++]=C[O]}}catch(N){a={error:N}}finally{try{T&&!T.done&&(s=E.return)&&s.call(E)}finally{if(a)throw a.error}}return uH.decode(b,o,c,t)},n.prototype.correctErrors=function(e,t){var r=new Int32Array(e);try{this.rsDecoder.decode(r,e.length-t)}catch{throw new Vr}for(var i=0;i<t;i++)e[i]=r[i]},n}(),fH=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),hH=function(n){fH(e,n);function e(t,r,i){var a=n.call(this,t,r)||this;return a.estimatedModuleSize=i,a}return e.prototype.aboutEquals=function(t,r,i){if(Math.abs(r-this.getY())<=t&&Math.abs(i-this.getX())<=t){var a=Math.abs(t-this.estimatedModuleSize);return a<=1||a<=this.estimatedModuleSize}return!1},e.prototype.combineEstimate=function(t,r,i){var a=(this.getX()+r)/2,s=(this.getY()+t)/2,o=(this.estimatedModuleSize+i)/2;return new e(a,s,o)},e}(qe),pH=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},gH=function(){function n(e,t,r,i,a,s,o){this.image=e,this.startX=t,this.startY=r,this.width=i,this.height=a,this.moduleSize=s,this.resultPointCallback=o,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}return n.prototype.find=function(){for(var e=this.startX,t=this.height,r=this.width,i=e+r,a=this.startY+t/2,s=new Int32Array(3),o=this.image,c=0;c<t;c++){var d=a+((c&1)===0?Math.floor((c+1)/2):-Math.floor((c+1)/2));s[0]=0,s[1]=0,s[2]=0;for(var f=e;f<i&&!o.get(f,d);)f++;for(var p=0;f<i;){if(o.get(f,d))if(p===1)s[1]++;else if(p===2){if(this.foundPatternCross(s)){var g=this.handlePossibleCenter(s,d,f);if(g!==null)return g}s[0]=s[2],s[1]=1,s[2]=0,p=1}else s[++p]++;else p===1&&p++,s[p]++;f++}if(this.foundPatternCross(s)){var g=this.handlePossibleCenter(s,d,i);if(g!==null)return g}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new xe},n.centerFromEnd=function(e,t){return t-e[2]-e[1]/2},n.prototype.foundPatternCross=function(e){for(var t=this.moduleSize,r=t/2,i=0;i<3;i++)if(Math.abs(t-e[i])>=r)return!1;return!0},n.prototype.crossCheckVertical=function(e,t,r,i){var a=this.image,s=a.getHeight(),o=this.crossCheckStateCount;o[0]=0,o[1]=0,o[2]=0;for(var c=e;c>=0&&a.get(t,c)&&o[1]<=r;)o[1]++,c--;if(c<0||o[1]>r)return NaN;for(;c>=0&&!a.get(t,c)&&o[0]<=r;)o[0]++,c--;if(o[0]>r)return NaN;for(c=e+1;c<s&&a.get(t,c)&&o[1]<=r;)o[1]++,c++;if(c===s||o[1]>r)return NaN;for(;c<s&&!a.get(t,c)&&o[2]<=r;)o[2]++,c++;if(o[2]>r)return NaN;var d=o[0]+o[1]+o[2];return 5*Math.abs(d-i)>=2*i?NaN:this.foundPatternCross(o)?n.centerFromEnd(o,c):NaN},n.prototype.handlePossibleCenter=function(e,t,r){var i,a,s=e[0]+e[1]+e[2],o=n.centerFromEnd(e,r),c=this.crossCheckVertical(t,o,2*e[1],s);if(!isNaN(c)){var d=(e[0]+e[1]+e[2])/3;try{for(var f=pH(this.possibleCenters),p=f.next();!p.done;p=f.next()){var g=p.value;if(g.aboutEquals(d,c,o))return g.combineEstimate(c,o,d)}}catch(v){i={error:v}}finally{try{p&&!p.done&&(a=f.return)&&a.call(f)}finally{if(i)throw i.error}}var y=new hH(o,c,d);this.possibleCenters.push(y),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(y)}return null},n}(),mH=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),yH=function(n){mH(e,n);function e(t,r,i,a){var s=n.call(this,t,r)||this;return s.estimatedModuleSize=i,s.count=a,a===void 0&&(s.count=1),s}return e.prototype.getEstimatedModuleSize=function(){return this.estimatedModuleSize},e.prototype.getCount=function(){return this.count},e.prototype.aboutEquals=function(t,r,i){if(Math.abs(r-this.getY())<=t&&Math.abs(i-this.getX())<=t){var a=Math.abs(t-this.estimatedModuleSize);return a<=1||a<=this.estimatedModuleSize}return!1},e.prototype.combineEstimate=function(t,r,i){var a=this.count+1,s=(this.count*this.getX()+r)/a,o=(this.count*this.getY()+t)/a,c=(this.count*this.estimatedModuleSize+i)/a;return new e(s,o,c,a)},e}(qe),vH=function(){function n(e){this.bottomLeft=e[0],this.topLeft=e[1],this.topRight=e[2]}return n.prototype.getBottomLeft=function(){return this.bottomLeft},n.prototype.getTopLeft=function(){return this.topLeft},n.prototype.getTopRight=function(){return this.topRight},n}(),xh=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},xH=function(){function n(e,t){this.image=e,this.resultPointCallback=t,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=t}return n.prototype.getImage=function(){return this.image},n.prototype.getPossibleCenters=function(){return this.possibleCenters},n.prototype.find=function(e){var t=e!=null&&e.get(On.TRY_HARDER)!==void 0,r=e!=null&&e.get(On.PURE_BARCODE)!==void 0,i=this.image,a=i.getHeight(),s=i.getWidth(),o=Math.floor(3*a/(4*n.MAX_MODULES));(o<n.MIN_SKIP||t)&&(o=n.MIN_SKIP);for(var c=!1,d=new Int32Array(5),f=o-1;f<a&&!c;f+=o){d[0]=0,d[1]=0,d[2]=0,d[3]=0,d[4]=0;for(var p=0,g=0;g<s;g++)if(i.get(g,f))(p&1)===1&&p++,d[p]++;else if((p&1)===0)if(p===4)if(n.foundPatternCross(d)){var y=this.handlePossibleCenter(d,f,g,r);if(y===!0)if(o=2,this.hasSkipped===!0)c=this.haveMultiplyConfirmedCenters();else{var v=this.findRowSkip();v>d[2]&&(f+=v-d[2]-o,g=s-1)}else{d[0]=d[2],d[1]=d[3],d[2]=d[4],d[3]=1,d[4]=0,p=3;continue}p=0,d[0]=0,d[1]=0,d[2]=0,d[3]=0,d[4]=0}else d[0]=d[2],d[1]=d[3],d[2]=d[4],d[3]=1,d[4]=0,p=3;else d[++p]++;else d[p]++;if(n.foundPatternCross(d)){var y=this.handlePossibleCenter(d,f,s,r);y===!0&&(o=d[0],this.hasSkipped&&(c=this.haveMultiplyConfirmedCenters()))}}var b=this.selectBestPatterns();return qe.orderBestPatterns(b),new vH(b)},n.centerFromEnd=function(e,t){return t-e[4]-e[3]-e[2]/2},n.foundPatternCross=function(e){for(var t=0,r=0;r<5;r++){var i=e[r];if(i===0)return!1;t+=i}if(t<7)return!1;var a=t/7,s=a/2;return Math.abs(a-e[0])<s&&Math.abs(a-e[1])<s&&Math.abs(3*a-e[2])<3*s&&Math.abs(a-e[3])<s&&Math.abs(a-e[4])<s},n.prototype.getCrossCheckStateCount=function(){var e=this.crossCheckStateCount;return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e},n.prototype.crossCheckDiagonal=function(e,t,r,i){for(var a=this.getCrossCheckStateCount(),s=0,o=this.image;e>=s&&t>=s&&o.get(t-s,e-s);)a[2]++,s++;if(e<s||t<s)return!1;for(;e>=s&&t>=s&&!o.get(t-s,e-s)&&a[1]<=r;)a[1]++,s++;if(e<s||t<s||a[1]>r)return!1;for(;e>=s&&t>=s&&o.get(t-s,e-s)&&a[0]<=r;)a[0]++,s++;if(a[0]>r)return!1;var c=o.getHeight(),d=o.getWidth();for(s=1;e+s<c&&t+s<d&&o.get(t+s,e+s);)a[2]++,s++;if(e+s>=c||t+s>=d)return!1;for(;e+s<c&&t+s<d&&!o.get(t+s,e+s)&&a[3]<r;)a[3]++,s++;if(e+s>=c||t+s>=d||a[3]>=r)return!1;for(;e+s<c&&t+s<d&&o.get(t+s,e+s)&&a[4]<r;)a[4]++,s++;if(a[4]>=r)return!1;var f=a[0]+a[1]+a[2]+a[3]+a[4];return Math.abs(f-i)<2*i&&n.foundPatternCross(a)},n.prototype.crossCheckVertical=function(e,t,r,i){for(var a=this.image,s=a.getHeight(),o=this.getCrossCheckStateCount(),c=e;c>=0&&a.get(t,c);)o[2]++,c--;if(c<0)return NaN;for(;c>=0&&!a.get(t,c)&&o[1]<=r;)o[1]++,c--;if(c<0||o[1]>r)return NaN;for(;c>=0&&a.get(t,c)&&o[0]<=r;)o[0]++,c--;if(o[0]>r)return NaN;for(c=e+1;c<s&&a.get(t,c);)o[2]++,c++;if(c===s)return NaN;for(;c<s&&!a.get(t,c)&&o[3]<r;)o[3]++,c++;if(c===s||o[3]>=r)return NaN;for(;c<s&&a.get(t,c)&&o[4]<r;)o[4]++,c++;if(o[4]>=r)return NaN;var d=o[0]+o[1]+o[2]+o[3]+o[4];return 5*Math.abs(d-i)>=2*i?NaN:n.foundPatternCross(o)?n.centerFromEnd(o,c):NaN},n.prototype.crossCheckHorizontal=function(e,t,r,i){for(var a=this.image,s=a.getWidth(),o=this.getCrossCheckStateCount(),c=e;c>=0&&a.get(c,t);)o[2]++,c--;if(c<0)return NaN;for(;c>=0&&!a.get(c,t)&&o[1]<=r;)o[1]++,c--;if(c<0||o[1]>r)return NaN;for(;c>=0&&a.get(c,t)&&o[0]<=r;)o[0]++,c--;if(o[0]>r)return NaN;for(c=e+1;c<s&&a.get(c,t);)o[2]++,c++;if(c===s)return NaN;for(;c<s&&!a.get(c,t)&&o[3]<r;)o[3]++,c++;if(c===s||o[3]>=r)return NaN;for(;c<s&&a.get(c,t)&&o[4]<r;)o[4]++,c++;if(o[4]>=r)return NaN;var d=o[0]+o[1]+o[2]+o[3]+o[4];return 5*Math.abs(d-i)>=i?NaN:n.foundPatternCross(o)?n.centerFromEnd(o,c):NaN},n.prototype.handlePossibleCenter=function(e,t,r,i){var a=e[0]+e[1]+e[2]+e[3]+e[4],s=n.centerFromEnd(e,r),o=this.crossCheckVertical(t,Math.floor(s),e[2],a);if(!isNaN(o)&&(s=this.crossCheckHorizontal(Math.floor(s),Math.floor(o),e[2],a),!isNaN(s)&&(!i||this.crossCheckDiagonal(Math.floor(o),Math.floor(s),e[2],a)))){for(var c=a/7,d=!1,f=this.possibleCenters,p=0,g=f.length;p<g;p++){var y=f[p];if(y.aboutEquals(c,o,s)){f[p]=y.combineEstimate(o,s,c),d=!0;break}}if(!d){var v=new yH(s,o,c);f.push(v),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(v)}return!0}return!1},n.prototype.findRowSkip=function(){var e,t,r=this.possibleCenters.length;if(r<=1)return 0;var i=null;try{for(var a=xh(this.possibleCenters),s=a.next();!s.done;s=a.next()){var o=s.value;if(o.getCount()>=n.CENTER_QUORUM)if(i==null)i=o;else return this.hasSkipped=!0,Math.floor((Math.abs(i.getX()-o.getX())-Math.abs(i.getY()-o.getY()))/2)}}catch(c){e={error:c}}finally{try{s&&!s.done&&(t=a.return)&&t.call(a)}finally{if(e)throw e.error}}return 0},n.prototype.haveMultiplyConfirmedCenters=function(){var e,t,r,i,a=0,s=0,o=this.possibleCenters.length;try{for(var c=xh(this.possibleCenters),d=c.next();!d.done;d=c.next()){var f=d.value;f.getCount()>=n.CENTER_QUORUM&&(a++,s+=f.getEstimatedModuleSize())}}catch(b){e={error:b}}finally{try{d&&!d.done&&(t=c.return)&&t.call(c)}finally{if(e)throw e.error}}if(a<3)return!1;var p=s/o,g=0;try{for(var y=xh(this.possibleCenters),v=y.next();!v.done;v=y.next()){var f=v.value;g+=Math.abs(f.getEstimatedModuleSize()-p)}}catch(b){r={error:b}}finally{try{v&&!v.done&&(i=y.return)&&i.call(y)}finally{if(r)throw r.error}}return g<=.05*s},n.prototype.selectBestPatterns=function(){var e,t,r,i,a=this.possibleCenters.length;if(a<3)throw new xe;var s=this.possibleCenters,o;if(a>3){var c=0,d=0;try{for(var f=xh(this.possibleCenters),p=f.next();!p.done;p=f.next()){var g=p.value,y=g.getEstimatedModuleSize();c+=y,d+=y*y}}catch(O){e={error:O}}finally{try{p&&!p.done&&(t=f.return)&&t.call(f)}finally{if(e)throw e.error}}o=c/a;var v=Math.sqrt(d/a-o*o);s.sort(function(O,N){var M=Math.abs(N.getEstimatedModuleSize()-o),R=Math.abs(O.getEstimatedModuleSize()-o);return M<R?-1:M>R?1:0});for(var b=Math.max(.2*o,v),A=0;A<s.length&&s.length>3;A++){var E=s[A];Math.abs(E.getEstimatedModuleSize()-o)>b&&(s.splice(A,1),A--)}}if(s.length>3){var c=0;try{for(var T=xh(s),C=T.next();!C.done;C=T.next()){var D=C.value;c+=D.getEstimatedModuleSize()}}catch(N){r={error:N}}finally{try{C&&!C.done&&(i=T.return)&&i.call(T)}finally{if(r)throw r.error}}o=c/s.length,s.sort(function(N,M){if(M.getCount()===N.getCount()){var R=Math.abs(M.getEstimatedModuleSize()-o),I=Math.abs(N.getEstimatedModuleSize()-o);return R<I?1:R>I?-1:0}else return M.getCount()-N.getCount()}),s.splice(3)}return[s[0],s[1],s[2]]},n.CENTER_QUORUM=2,n.MIN_SKIP=3,n.MAX_MODULES=57,n}(),wH=function(){function n(e){this.image=e}return n.prototype.getImage=function(){return this.image},n.prototype.getResultPointCallback=function(){return this.resultPointCallback},n.prototype.detect=function(e){this.resultPointCallback=e==null?null:e.get(On.NEED_RESULT_POINT_CALLBACK);var t=new xH(this.image,this.resultPointCallback),r=t.find(e);return this.processFinderPatternInfo(r)},n.prototype.processFinderPatternInfo=function(e){var t=e.getTopLeft(),r=e.getTopRight(),i=e.getBottomLeft(),a=this.calculateModuleSize(t,r,i);if(a<1)throw new xe("No pattern found in proccess finder.");var s=n.computeDimension(t,r,i,a),o=Fc.getProvisionalVersionForDimension(s),c=o.getDimensionForVersion()-7,d=null;if(o.getAlignmentPatternCenters().length>0)for(var f=r.getX()-t.getX()+i.getX(),p=r.getY()-t.getY()+i.getY(),g=1-3/c,y=Math.floor(t.getX()+g*(f-t.getX())),v=Math.floor(t.getY()+g*(p-t.getY())),b=4;b<=16;b<<=1)try{d=this.findAlignmentInRegion(a,y,v,b);break}catch(C){if(!(C instanceof xe))throw C}var A=n.createTransform(t,r,i,d,s),E=n.sampleGrid(this.image,A,s),T;return d===null?T=[i,t,r]:T=[i,t,r,d],new j_(E,T)},n.createTransform=function(e,t,r,i,a){var s=a-3.5,o,c,d,f;return i!==null?(o=i.getX(),c=i.getY(),d=s-3,f=d):(o=t.getX()-e.getX()+r.getX(),c=t.getY()-e.getY()+r.getY(),d=s,f=s),S4.quadrilateralToQuadrilateral(3.5,3.5,s,3.5,d,f,3.5,s,e.getX(),e.getY(),t.getX(),t.getY(),o,c,r.getX(),r.getY())},n.sampleGrid=function(e,t,r){var i=U_.getInstance();return i.sampleGridWithTransform(e,r,r,t)},n.computeDimension=function(e,t,r,i){var a=$t.round(qe.distance(e,t)/i),s=$t.round(qe.distance(e,r)/i),o=Math.floor((a+s)/2)+7;switch(o&3){case 0:o++;break;case 2:o--;break;case 3:throw new xe("Dimensions could be not found.")}return o},n.prototype.calculateModuleSize=function(e,t,r){return(this.calculateModuleSizeOneWay(e,t)+this.calculateModuleSizeOneWay(e,r))/2},n.prototype.calculateModuleSizeOneWay=function(e,t){var r=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(e.getX()),Math.floor(e.getY()),Math.floor(t.getX()),Math.floor(t.getY())),i=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(t.getX()),Math.floor(t.getY()),Math.floor(e.getX()),Math.floor(e.getY()));return isNaN(r)?i/7:isNaN(i)?r/7:(r+i)/14},n.prototype.sizeOfBlackWhiteBlackRunBothWays=function(e,t,r,i){var a=this.sizeOfBlackWhiteBlackRun(e,t,r,i),s=1,o=e-(r-e);o<0?(s=e/(e-o),o=0):o>=this.image.getWidth()&&(s=(this.image.getWidth()-1-e)/(o-e),o=this.image.getWidth()-1);var c=Math.floor(t-(i-t)*s);return s=1,c<0?(s=t/(t-c),c=0):c>=this.image.getHeight()&&(s=(this.image.getHeight()-1-t)/(c-t),c=this.image.getHeight()-1),o=Math.floor(e+(o-e)*s),a+=this.sizeOfBlackWhiteBlackRun(e,t,o,c),a-1},n.prototype.sizeOfBlackWhiteBlackRun=function(e,t,r,i){var a=Math.abs(i-t)>Math.abs(r-e);if(a){var s=e;e=t,t=s,s=r,r=i,i=s}for(var o=Math.abs(r-e),c=Math.abs(i-t),d=-o/2,f=e<r?1:-1,p=t<i?1:-1,g=0,y=r+f,v=e,b=t;v!==y;v+=f){var A=a?b:v,E=a?v:b;if(g===1===this.image.get(A,E)){if(g===2)return $t.distance(v,b,e,t);g++}if(d+=c,d>0){if(b===i)break;b+=p,d-=o}}return g===2?$t.distance(r+f,i,e,t):NaN},n.prototype.findAlignmentInRegion=function(e,t,r,i){var a=Math.floor(i*e),s=Math.max(0,t-a),o=Math.min(this.image.getWidth()-1,t+a);if(o-s<e*3)throw new xe("Alignment top exceeds estimated module size.");var c=Math.max(0,r-a),d=Math.min(this.image.getHeight()-1,r+a);if(d-c<e*3)throw new xe("Alignment bottom exceeds estimated module size.");var f=new gH(this.image,s,c,o-s,d-c,e,this.resultPointCallback);return f.find()},n}(),nw=function(){function n(){this.decoder=new dH}return n.prototype.getDecoder=function(){return this.decoder},n.prototype.decode=function(e,t){var r,i;if(t!=null&&t.get(On.PURE_BARCODE)!==void 0){var a=n.extractPureBits(e.getBlackMatrix());r=this.decoder.decodeBitMatrix(a,t),i=n.NO_POINTS}else{var s=new wH(e.getBlackMatrix()).detect(t);r=this.decoder.decodeBitMatrix(s.getBits(),t),i=s.getPoints()}r.getOther()instanceof M4&&r.getOther().applyMirroredCorrection(i);var o=new gi(r.getText(),r.getRawBytes(),void 0,i,Je.QR_CODE,void 0),c=r.getByteSegments();c!==null&&o.putMetadata(ei.BYTE_SEGMENTS,c);var d=r.getECLevel();return d!==null&&o.putMetadata(ei.ERROR_CORRECTION_LEVEL,d),r.hasStructuredAppend()&&(o.putMetadata(ei.STRUCTURED_APPEND_SEQUENCE,r.getStructuredAppendSequenceNumber()),o.putMetadata(ei.STRUCTURED_APPEND_PARITY,r.getStructuredAppendParity())),o},n.prototype.reset=function(){},n.extractPureBits=function(e){var t=e.getTopLeftOnBit(),r=e.getBottomRightOnBit();if(t===null||r===null)throw new xe;var i=this.moduleSize(t,e),a=t[1],s=r[1],o=t[0],c=r[0];if(o>=c||a>=s)throw new xe;if(s-a!==c-o&&(c=o+(s-a),c>=e.getWidth()))throw new xe;var d=Math.round((c-o+1)/i),f=Math.round((s-a+1)/i);if(d<=0||f<=0)throw new xe;if(f!==d)throw new xe;var p=Math.floor(i/2);a+=p,o+=p;var g=o+Math.floor((d-1)*i)-c;if(g>0){if(g>p)throw new xe;o-=g}var y=a+Math.floor((f-1)*i)-s;if(y>0){if(y>p)throw new xe;a-=y}for(var v=new Ds(d,f),b=0;b<f;b++)for(var A=a+Math.floor(b*i),E=0;E<d;E++)e.get(o+Math.floor(E*i),A)&&v.set(E,b);return v},n.moduleSize=function(e,t){for(var r=t.getHeight(),i=t.getWidth(),a=e[0],s=e[1],o=!0,c=0;a<i&&s<r;){if(o!==t.get(a,s)){if(++c===5)break;o=!o}a++,s++}if(a===i||s===r)throw new xe;return(a-e[0])/7},n.NO_POINTS=new Array,n}(),_H=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Ht=function(){function n(){}return n.prototype.PDF417Common=function(){},n.getBitCountSum=function(e){return $t.sum(e)},n.toIntArray=function(e){var t,r;if(e==null||!e.length)return n.EMPTY_INT_ARRAY;var i=new Int32Array(e.length),a=0;try{for(var s=_H(e),o=s.next();!o.done;o=s.next()){var c=o.value;i[a++]=c}}catch(d){t={error:d}}finally{try{o&&!o.done&&(r=s.return)&&r.call(s)}finally{if(t)throw t.error}}return i},n.getCodeword=function(e){var t=Tr.binarySearch(n.SYMBOL_TABLE,e&262143);return t<0?-1:(n.CODEWORD_TABLE[t]-1)%n.NUMBER_OF_CODEWORDS},n.NUMBER_OF_CODEWORDS=929,n.MAX_CODEWORDS_IN_BARCODE=n.NUMBER_OF_CODEWORDS-1,n.MIN_ROWS_IN_BARCODE=3,n.MAX_ROWS_IN_BARCODE=90,n.MODULES_IN_CODEWORD=17,n.MODULES_IN_STOP_PATTERN=18,n.BARS_IN_MODULE=8,n.EMPTY_INT_ARRAY=new Int32Array([]),n.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),n.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]),n}(),bH=function(){function n(e,t){this.bits=e,this.points=t}return n.prototype.getBits=function(){return this.bits},n.prototype.getPoints=function(){return this.points},n}(),AH=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},EH=function(){function n(){}return n.detectMultiple=function(e,t,r){var i=e.getBlackMatrix(),a=n.detect(r,i);return a.length||(i=i.clone(),i.rotate180(),a=n.detect(r,i)),new bH(i,a)},n.detect=function(e,t){for(var r,i,a=new Array,s=0,o=0,c=!1;s<t.getHeight();){var d=n.findVertices(t,s,o);if(d[0]==null&&d[3]==null){if(!c)break;c=!1,o=0;try{for(var f=(r=void 0,AH(a)),p=f.next();!p.done;p=f.next()){var g=p.value;g[1]!=null&&(s=Math.trunc(Math.max(s,g[1].getY()))),g[3]!=null&&(s=Math.max(s,Math.trunc(g[3].getY())))}}catch(y){r={error:y}}finally{try{p&&!p.done&&(i=f.return)&&i.call(f)}finally{if(r)throw r.error}}s+=n.ROW_STEP;continue}if(c=!0,a.push(d),!e)break;d[2]!=null?(o=Math.trunc(d[2].getX()),s=Math.trunc(d[2].getY())):(o=Math.trunc(d[4].getX()),s=Math.trunc(d[4].getY()))}return a},n.findVertices=function(e,t,r){var i=e.getHeight(),a=e.getWidth(),s=new Array(8);return n.copyToResult(s,n.findRowsWithPattern(e,i,a,t,r,n.START_PATTERN),n.INDEXES_START_PATTERN),s[4]!=null&&(r=Math.trunc(s[4].getX()),t=Math.trunc(s[4].getY())),n.copyToResult(s,n.findRowsWithPattern(e,i,a,t,r,n.STOP_PATTERN),n.INDEXES_STOP_PATTERN),s},n.copyToResult=function(e,t,r){for(var i=0;i<r.length;i++)e[r[i]]=t[i]},n.findRowsWithPattern=function(e,t,r,i,a,s){for(var o=new Array(4),c=!1,d=new Int32Array(s.length);i<t;i+=n.ROW_STEP){var f=n.findGuardPattern(e,a,i,r,!1,s,d);if(f!=null){for(;i>0;){var p=n.findGuardPattern(e,a,--i,r,!1,s,d);if(p!=null)f=p;else{i++;break}}o[0]=new qe(f[0],i),o[1]=new qe(f[1],i),c=!0;break}}var g=i+1;if(c){for(var y=0,p=Int32Array.from([Math.trunc(o[0].getX()),Math.trunc(o[1].getX())]);g<t;g++){var f=n.findGuardPattern(e,p[0],g,r,!1,s,d);if(f!=null&&Math.abs(p[0]-f[0])<n.MAX_PATTERN_DRIFT&&Math.abs(p[1]-f[1])<n.MAX_PATTERN_DRIFT)p=f,y=0;else{if(y>n.SKIPPED_ROW_COUNT_MAX)break;y++}}g-=y+1,o[2]=new qe(p[0],g),o[3]=new qe(p[1],g)}return g-i<n.BARCODE_MIN_HEIGHT&&Tr.fill(o,null),o},n.findGuardPattern=function(e,t,r,i,a,s,o){Tr.fillWithin(o,0,o.length,0);for(var c=t,d=0;e.get(c,r)&&c>0&&d++<n.MAX_PIXEL_DRIFT;)c--;for(var f=c,p=0,g=s.length,y=a;f<i;f++){var v=e.get(f,r);if(v!==y)o[p]++;else{if(p===g-1){if(n.patternMatchVariance(o,s,n.MAX_INDIVIDUAL_VARIANCE)<n.MAX_AVG_VARIANCE)return new Int32Array([c,f]);c+=o[0]+o[1],_n.arraycopy(o,2,o,0,p-1),o[p-1]=0,o[p]=0,p--}else p++;o[p]=1,y=!y}}return p===g-1&&n.patternMatchVariance(o,s,n.MAX_INDIVIDUAL_VARIANCE)<n.MAX_AVG_VARIANCE?new Int32Array([c,f-1]):null},n.patternMatchVariance=function(e,t,r){for(var i=e.length,a=0,s=0,o=0;o<i;o++)a+=e[o],s+=t[o];if(a<s)return 1/0;var c=a/s;r*=c;for(var d=0,f=0;f<i;f++){var p=e[f],g=t[f]*c,y=p>g?p-g:g-p;if(y>r)return 1/0;d+=y}return d/a},n.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),n.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),n.MAX_AVG_VARIANCE=.42,n.MAX_INDIVIDUAL_VARIANCE=.8,n.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),n.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),n.MAX_PIXEL_DRIFT=3,n.MAX_PATTERN_DRIFT=5,n.SKIPPED_ROW_COUNT_MAX=25,n.ROW_STEP=5,n.BARCODE_MIN_HEIGHT=10,n}(),SH=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Oc=function(){function n(e,t){if(t.length===0)throw new nt;this.field=e;var r=t.length;if(r>1&&t[0]===0){for(var i=1;i<r&&t[i]===0;)i++;i===r?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(r-i),_n.arraycopy(t,i,this.coefficients,0,this.coefficients.length))}else this.coefficients=t}return n.prototype.getCoefficients=function(){return this.coefficients},n.prototype.getDegree=function(){return this.coefficients.length-1},n.prototype.isZero=function(){return this.coefficients[0]===0},n.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},n.prototype.evaluateAt=function(e){var t,r;if(e===0)return this.getCoefficient(0);if(e===1){var i=0;try{for(var a=SH(this.coefficients),s=a.next();!s.done;s=a.next()){var o=s.value;i=this.field.add(i,o)}}catch(p){t={error:p}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}return i}for(var c=this.coefficients[0],d=this.coefficients.length,f=1;f<d;f++)c=this.field.add(this.field.multiply(e,c),this.coefficients[f]);return c},n.prototype.add=function(e){if(!this.field.equals(e.field))throw new nt("ModulusPolys do not have same ModulusGF field");if(this.isZero())return e;if(e.isZero())return this;var t=this.coefficients,r=e.coefficients;if(t.length>r.length){var i=t;t=r,r=i}var a=new Int32Array(r.length),s=r.length-t.length;_n.arraycopy(r,0,a,0,s);for(var o=s;o<r.length;o++)a[o]=this.field.add(t[o-s],r[o]);return new n(this.field,a)},n.prototype.subtract=function(e){if(!this.field.equals(e.field))throw new nt("ModulusPolys do not have same ModulusGF field");return e.isZero()?this:this.add(e.negative())},n.prototype.multiply=function(e){return e instanceof n?this.multiplyOther(e):this.multiplyScalar(e)},n.prototype.multiplyOther=function(e){if(!this.field.equals(e.field))throw new nt("ModulusPolys do not have same ModulusGF field");if(this.isZero()||e.isZero())return new n(this.field,new Int32Array([0]));for(var t=this.coefficients,r=t.length,i=e.coefficients,a=i.length,s=new Int32Array(r+a-1),o=0;o<r;o++)for(var c=t[o],d=0;d<a;d++)s[o+d]=this.field.add(s[o+d],this.field.multiply(c,i[d]));return new n(this.field,s)},n.prototype.negative=function(){for(var e=this.coefficients.length,t=new Int32Array(e),r=0;r<e;r++)t[r]=this.field.subtract(0,this.coefficients[r]);return new n(this.field,t)},n.prototype.multiplyScalar=function(e){if(e===0)return new n(this.field,new Int32Array([0]));if(e===1)return this;for(var t=this.coefficients.length,r=new Int32Array(t),i=0;i<t;i++)r[i]=this.field.multiply(this.coefficients[i],e);return new n(this.field,r)},n.prototype.multiplyByMonomial=function(e,t){if(e<0)throw new nt;if(t===0)return new n(this.field,new Int32Array([0]));for(var r=this.coefficients.length,i=new Int32Array(r+e),a=0;a<r;a++)i[a]=this.field.multiply(this.coefficients[a],t);return new n(this.field,i)},n.prototype.toString=function(){for(var e=new bt,t=this.getDegree();t>=0;t--){var r=this.getCoefficient(t);r!==0&&(r<0?(e.append(" - "),r=-r):e.length()>0&&e.append(" + "),(t===0||r!==1)&&e.append(r),t!==0&&(t===1?e.append("x"):(e.append("x^"),e.append(t))))}return e.toString()},n}(),TH=function(){function n(){}return n.prototype.add=function(e,t){return(e+t)%this.modulus},n.prototype.subtract=function(e,t){return(this.modulus+e-t)%this.modulus},n.prototype.exp=function(e){return this.expTable[e]},n.prototype.log=function(e){if(e===0)throw new nt;return this.logTable[e]},n.prototype.inverse=function(e){if(e===0)throw new E4;return this.expTable[this.modulus-this.logTable[e]-1]},n.prototype.multiply=function(e,t){return e===0||t===0?0:this.expTable[(this.logTable[e]+this.logTable[t])%(this.modulus-1)]},n.prototype.getSize=function(){return this.modulus},n.prototype.equals=function(e){return e===this},n}(),CH=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),IH=function(n){CH(e,n);function e(t,r){var i=n.call(this)||this;i.modulus=t,i.expTable=new Int32Array(t),i.logTable=new Int32Array(t);for(var a=1,s=0;s<t;s++)i.expTable[s]=a,a=a*r%t;for(var s=0;s<t-1;s++)i.logTable[i.expTable[s]]=s;return i.zero=new Oc(i,new Int32Array([0])),i.one=new Oc(i,new Int32Array([1])),i}return e.prototype.getZero=function(){return this.zero},e.prototype.getOne=function(){return this.one},e.prototype.buildMonomial=function(t,r){if(t<0)throw new nt;if(r===0)return this.zero;var i=new Int32Array(t+1);return i[0]=r,new Oc(this,i)},e.PDF417_GF=new e(Ht.NUMBER_OF_CODEWORDS,3),e}(TH),DH=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},RH=function(){function n(){this.field=IH.PDF417_GF}return n.prototype.decode=function(e,t,r){for(var i,a,s=new Oc(this.field,e),o=new Int32Array(t),c=!1,d=t;d>0;d--){var f=s.evaluateAt(this.field.exp(d));o[t-d]=f,f!==0&&(c=!0)}if(!c)return 0;var p=this.field.getOne();if(r!=null)try{for(var g=DH(r),y=g.next();!y.done;y=g.next()){var v=y.value,b=this.field.exp(e.length-1-v),A=new Oc(this.field,new Int32Array([this.field.subtract(0,b),1]));p=p.multiply(A)}}catch(R){i={error:R}}finally{try{y&&!y.done&&(a=g.return)&&a.call(g)}finally{if(i)throw i.error}}for(var E=new Oc(this.field,o),T=this.runEuclideanAlgorithm(this.field.buildMonomial(t,1),E,t),C=T[0],D=T[1],O=this.findErrorLocations(C),N=this.findErrorMagnitudes(D,C,O),d=0;d<O.length;d++){var M=e.length-1-this.field.log(O[d]);if(M<0)throw Vr.getChecksumInstance();e[M]=this.field.subtract(e[M],N[d])}return O.length},n.prototype.runEuclideanAlgorithm=function(e,t,r){if(e.getDegree()<t.getDegree()){var i=e;e=t,t=i}for(var a=e,s=t,o=this.field.getZero(),c=this.field.getOne();s.getDegree()>=Math.round(r/2);){var d=a,f=o;if(a=s,o=c,a.isZero())throw Vr.getChecksumInstance();s=d;for(var p=this.field.getZero(),g=a.getCoefficient(a.getDegree()),y=this.field.inverse(g);s.getDegree()>=a.getDegree()&&!s.isZero();){var v=s.getDegree()-a.getDegree(),b=this.field.multiply(s.getCoefficient(s.getDegree()),y);p=p.add(this.field.buildMonomial(v,b)),s=s.subtract(a.multiplyByMonomial(v,b))}c=p.multiply(o).subtract(f).negative()}var A=c.getCoefficient(0);if(A===0)throw Vr.getChecksumInstance();var E=this.field.inverse(A),T=c.multiply(E),C=s.multiply(E);return[T,C]},n.prototype.findErrorLocations=function(e){for(var t=e.getDegree(),r=new Int32Array(t),i=0,a=1;a<this.field.getSize()&&i<t;a++)e.evaluateAt(a)===0&&(r[i]=this.field.inverse(a),i++);if(i!==t)throw Vr.getChecksumInstance();return r},n.prototype.findErrorMagnitudes=function(e,t,r){for(var i=t.getDegree(),a=new Int32Array(i),s=1;s<=i;s++)a[i-s]=this.field.multiply(s,t.getCoefficient(s));for(var o=new Oc(this.field,a),c=r.length,d=new Int32Array(c),s=0;s<c;s++){var f=this.field.inverse(r[s]),p=this.field.subtract(0,e.evaluateAt(f)),g=this.field.inverse(o.evaluateAt(f));d[s]=this.field.multiply(p,g)}return d},n}(),rw=function(){function n(e,t,r,i,a){e instanceof n?this.constructor_2(e):this.constructor_1(e,t,r,i,a)}return n.prototype.constructor_1=function(e,t,r,i,a){var s=t==null||r==null,o=i==null||a==null;if(s&&o)throw new xe;s?(t=new qe(0,i.getY()),r=new qe(0,a.getY())):o&&(i=new qe(e.getWidth()-1,t.getY()),a=new qe(e.getWidth()-1,r.getY())),this.image=e,this.topLeft=t,this.bottomLeft=r,this.topRight=i,this.bottomRight=a,this.minX=Math.trunc(Math.min(t.getX(),r.getX())),this.maxX=Math.trunc(Math.max(i.getX(),a.getX())),this.minY=Math.trunc(Math.min(t.getY(),i.getY())),this.maxY=Math.trunc(Math.max(r.getY(),a.getY()))},n.prototype.constructor_2=function(e){this.image=e.image,this.topLeft=e.getTopLeft(),this.bottomLeft=e.getBottomLeft(),this.topRight=e.getTopRight(),this.bottomRight=e.getBottomRight(),this.minX=e.getMinX(),this.maxX=e.getMaxX(),this.minY=e.getMinY(),this.maxY=e.getMaxY()},n.merge=function(e,t){return e==null?t:t==null?e:new n(e.image,e.topLeft,e.bottomLeft,t.topRight,t.bottomRight)},n.prototype.addMissingRows=function(e,t,r){var i=this.topLeft,a=this.bottomLeft,s=this.topRight,o=this.bottomRight;if(e>0){var c=r?this.topLeft:this.topRight,d=Math.trunc(c.getY()-e);d<0&&(d=0);var f=new qe(c.getX(),d);r?i=f:s=f}if(t>0){var p=r?this.bottomLeft:this.bottomRight,g=Math.trunc(p.getY()+t);g>=this.image.getHeight()&&(g=this.image.getHeight()-1);var y=new qe(p.getX(),g);r?a=y:o=y}return new n(this.image,i,a,s,o)},n.prototype.getMinX=function(){return this.minX},n.prototype.getMaxX=function(){return this.maxX},n.prototype.getMinY=function(){return this.minY},n.prototype.getMaxY=function(){return this.maxY},n.prototype.getTopLeft=function(){return this.topLeft},n.prototype.getTopRight=function(){return this.topRight},n.prototype.getBottomLeft=function(){return this.bottomLeft},n.prototype.getBottomRight=function(){return this.bottomRight},n}(),MH=function(){function n(e,t,r,i){this.columnCount=e,this.errorCorrectionLevel=i,this.rowCountUpperPart=t,this.rowCountLowerPart=r,this.rowCount=t+r}return n.prototype.getColumnCount=function(){return this.columnCount},n.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},n.prototype.getRowCount=function(){return this.rowCount},n.prototype.getRowCountUpperPart=function(){return this.rowCountUpperPart},n.prototype.getRowCountLowerPart=function(){return this.rowCountLowerPart},n}(),z_=function(){function n(){this.buffer=""}return n.form=function(e,t){var r=-1;function i(s,o,c,d,f,p){if(s==="%%")return"%";if(t[++r]!==void 0){s=d?parseInt(d.substr(1)):void 0;var g=f?parseInt(f.substr(1)):void 0,y;switch(p){case"s":y=t[r];break;case"c":y=t[r][0];break;case"f":y=parseFloat(t[r]).toFixed(s);break;case"p":y=parseFloat(t[r]).toPrecision(s);break;case"e":y=parseFloat(t[r]).toExponential(s);break;case"x":y=parseInt(t[r]).toString(g||16);break;case"d":y=parseFloat(parseInt(t[r],g||10).toPrecision(s)).toFixed(0);break}y=typeof y=="object"?JSON.stringify(y):(+y).toString(g);for(var v=parseInt(c),b=c&&c[0]+""=="0"?"0":" ";y.length<v;)y=o!==void 0?y+b:b+y;return y}}var a=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(a,i)},n.prototype.format=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this.buffer+=n.form(e,t)},n.prototype.toString=function(){return this.buffer},n}(),OH=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},O4=function(){function n(e){this.boundingBox=new rw(e),this.codewords=new Array(e.getMaxY()-e.getMinY()+1)}return n.prototype.getCodewordNearby=function(e){var t=this.getCodeword(e);if(t!=null)return t;for(var r=1;r<n.MAX_NEARBY_DISTANCE;r++){var i=this.imageRowToCodewordIndex(e)-r;if(i>=0&&(t=this.codewords[i],t!=null)||(i=this.imageRowToCodewordIndex(e)+r,i<this.codewords.length&&(t=this.codewords[i],t!=null)))return t}return null},n.prototype.imageRowToCodewordIndex=function(e){return e-this.boundingBox.getMinY()},n.prototype.setCodeword=function(e,t){this.codewords[this.imageRowToCodewordIndex(e)]=t},n.prototype.getCodeword=function(e){return this.codewords[this.imageRowToCodewordIndex(e)]},n.prototype.getBoundingBox=function(){return this.boundingBox},n.prototype.getCodewords=function(){return this.codewords},n.prototype.toString=function(){var e,t,r=new z_,i=0;try{for(var a=OH(this.codewords),s=a.next();!s.done;s=a.next()){var o=s.value;if(o==null){r.format("%3d:    |   %n",i++);continue}r.format("%3d: %3d|%3d%n",i++,o.getRowNumber(),o.getValue())}}catch(c){e={error:c}}finally{try{s&&!s.done&&(t=a.return)&&t.call(a)}finally{if(e)throw e.error}}return r.toString()},n.MAX_NEARBY_DISTANCE=5,n}(),PH=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},kH=function(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,a=[],s;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(o){s={error:o}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(s)throw s.error}}return a},jh=function(){function n(){this.values=new Map}return n.prototype.setValue=function(e){e=Math.trunc(e);var t=this.values.get(e);t==null&&(t=0),t++,this.values.set(e,t)},n.prototype.getValue=function(){var e,t,r=-1,i=new Array,a=function(p,g){var y={getKey:function(){return p},getValue:function(){return g}};y.getValue()>r?(r=y.getValue(),i=[],i.push(y.getKey())):y.getValue()===r&&i.push(y.getKey())};try{for(var s=PH(this.values.entries()),o=s.next();!o.done;o=s.next()){var c=kH(o.value,2),d=c[0],f=c[1];a(d,f)}}catch(p){e={error:p}}finally{try{o&&!o.done&&(t=s.return)&&t.call(s)}finally{if(e)throw e.error}}return Ht.toIntArray(i)},n.prototype.getConfidence=function(e){return this.values.get(e)},n}(),NH=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Bx=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},bI=function(n){NH(e,n);function e(t,r){var i=n.call(this,t)||this;return i._isLeft=r,i}return e.prototype.setRowNumbers=function(){var t,r;try{for(var i=Bx(this.getCodewords()),a=i.next();!a.done;a=i.next()){var s=a.value;s!=null&&s.setRowNumberAsRowIndicatorColumn()}}catch(o){t={error:o}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}},e.prototype.adjustCompleteIndicatorColumnRowNumbers=function(t){var r=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(r,t);for(var i=this.getBoundingBox(),a=this._isLeft?i.getTopLeft():i.getTopRight(),s=this._isLeft?i.getBottomLeft():i.getBottomRight(),o=this.imageRowToCodewordIndex(Math.trunc(a.getY())),c=this.imageRowToCodewordIndex(Math.trunc(s.getY())),d=-1,f=1,p=0,g=o;g<c;g++)if(r[g]!=null){var y=r[g],v=y.getRowNumber()-d;if(v===0)p++;else if(v===1)f=Math.max(f,p),p=1,d=y.getRowNumber();else if(v<0||y.getRowNumber()>=t.getRowCount()||v>g)r[g]=null;else{var b=void 0;f>2?b=(f-2)*v:b=v;for(var A=b>=g,E=1;E<=b&&!A;E++)A=r[g-E]!=null;A?r[g]=null:(d=y.getRowNumber(),p=1)}}},e.prototype.getRowHeights=function(){var t,r,i=this.getBarcodeMetadata();if(i==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(i);var a=new Int32Array(i.getRowCount());try{for(var s=Bx(this.getCodewords()),o=s.next();!o.done;o=s.next()){var c=o.value;if(c!=null){var d=c.getRowNumber();if(d>=a.length)continue;a[d]++}}}catch(f){t={error:f}}finally{try{o&&!o.done&&(r=s.return)&&r.call(s)}finally{if(t)throw t.error}}return a},e.prototype.adjustIncompleteIndicatorColumnRowNumbers=function(t){for(var r=this.getBoundingBox(),i=this._isLeft?r.getTopLeft():r.getTopRight(),a=this._isLeft?r.getBottomLeft():r.getBottomRight(),s=this.imageRowToCodewordIndex(Math.trunc(i.getY())),o=this.imageRowToCodewordIndex(Math.trunc(a.getY())),c=this.getCodewords(),d=-1,f=s;f<o;f++)if(c[f]!=null){var p=c[f];p.setRowNumberAsRowIndicatorColumn();var g=p.getRowNumber()-d;g===0||(g===1?d=p.getRowNumber():p.getRowNumber()>=t.getRowCount()?c[f]=null:d=p.getRowNumber())}},e.prototype.getBarcodeMetadata=function(){var t,r,i=this.getCodewords(),a=new jh,s=new jh,o=new jh,c=new jh;try{for(var d=Bx(i),f=d.next();!f.done;f=d.next()){var p=f.value;if(p!=null){p.setRowNumberAsRowIndicatorColumn();var g=p.getValue()%30,y=p.getRowNumber();switch(this._isLeft||(y+=2),y%3){case 0:s.setValue(g*3+1);break;case 1:c.setValue(g/3),o.setValue(g%3);break;case 2:a.setValue(g+1);break}}}}catch(b){t={error:b}}finally{try{f&&!f.done&&(r=d.return)&&r.call(d)}finally{if(t)throw t.error}}if(a.getValue().length===0||s.getValue().length===0||o.getValue().length===0||c.getValue().length===0||a.getValue()[0]<1||s.getValue()[0]+o.getValue()[0]<Ht.MIN_ROWS_IN_BARCODE||s.getValue()[0]+o.getValue()[0]>Ht.MAX_ROWS_IN_BARCODE)return null;var v=new MH(a.getValue()[0],s.getValue()[0],o.getValue()[0],c.getValue()[0]);return this.removeIncorrectCodewords(i,v),v},e.prototype.removeIncorrectCodewords=function(t,r){for(var i=0;i<t.length;i++){var a=t[i];if(t[i]!=null){var s=a.getValue()%30,o=a.getRowNumber();if(o>r.getRowCount()){t[i]=null;continue}switch(this._isLeft||(o+=2),o%3){case 0:s*3+1!==r.getRowCountUpperPart()&&(t[i]=null);break;case 1:(Math.trunc(s/3)!==r.getErrorCorrectionLevel()||s%3!==r.getRowCountLowerPart())&&(t[i]=null);break;case 2:s+1!==r.getColumnCount()&&(t[i]=null);break}}}},e.prototype.isLeft=function(){return this._isLeft},e.prototype.toString=function(){return"IsLeft: "+this._isLeft+`
`+n.prototype.toString.call(this)},e}(O4),LH=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},BH=function(){function n(e,t){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=e,this.barcodeColumnCount=e.getColumnCount(),this.boundingBox=t,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}return n.prototype.getDetectionResultColumns=function(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);var e=Ht.MAX_CODEWORDS_IN_BARCODE,t;do t=e,e=this.adjustRowNumbersAndGetCount();while(e>0&&e<t);return this.detectionResultColumns},n.prototype.adjustIndicatorColumnRowNumbers=function(e){e!=null&&e.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)},n.prototype.adjustRowNumbersAndGetCount=function(){var e=this.adjustRowNumbersByRow();if(e===0)return 0;for(var t=1;t<this.barcodeColumnCount+1;t++)for(var r=this.detectionResultColumns[t].getCodewords(),i=0;i<r.length;i++)r[i]!=null&&(r[i].hasValidRowNumber()||this.adjustRowNumbers(t,i,r));return e},n.prototype.adjustRowNumbersByRow=function(){this.adjustRowNumbersFromBothRI();var e=this.adjustRowNumbersFromLRI();return e+this.adjustRowNumbersFromRRI()},n.prototype.adjustRowNumbersFromBothRI=function(){if(!(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)){for(var e=this.detectionResultColumns[0].getCodewords(),t=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),r=0;r<e.length;r++)if(e[r]!=null&&t[r]!=null&&e[r].getRowNumber()===t[r].getRowNumber())for(var i=1;i<=this.barcodeColumnCount;i++){var a=this.detectionResultColumns[i].getCodewords()[r];a!=null&&(a.setRowNumber(e[r].getRowNumber()),a.hasValidRowNumber()||(this.detectionResultColumns[i].getCodewords()[r]=null))}}},n.prototype.adjustRowNumbersFromRRI=function(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;for(var e=0,t=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),r=0;r<t.length;r++)if(t[r]!=null)for(var i=t[r].getRowNumber(),a=0,s=this.barcodeColumnCount+1;s>0&&a<this.ADJUST_ROW_NUMBER_SKIP;s--){var o=this.detectionResultColumns[s].getCodewords()[r];o!=null&&(a=n.adjustRowNumberIfValid(i,a,o),o.hasValidRowNumber()||e++)}return e},n.prototype.adjustRowNumbersFromLRI=function(){if(this.detectionResultColumns[0]==null)return 0;for(var e=0,t=this.detectionResultColumns[0].getCodewords(),r=0;r<t.length;r++)if(t[r]!=null)for(var i=t[r].getRowNumber(),a=0,s=1;s<this.barcodeColumnCount+1&&a<this.ADJUST_ROW_NUMBER_SKIP;s++){var o=this.detectionResultColumns[s].getCodewords()[r];o!=null&&(a=n.adjustRowNumberIfValid(i,a,o),o.hasValidRowNumber()||e++)}return e},n.adjustRowNumberIfValid=function(e,t,r){return r==null||r.hasValidRowNumber()||(r.isValidRowNumber(e)?(r.setRowNumber(e),t=0):++t),t},n.prototype.adjustRowNumbers=function(e,t,r){var i,a;if(this.detectionResultColumns[e-1]!=null){var s=r[t],o=this.detectionResultColumns[e-1].getCodewords(),c=o;this.detectionResultColumns[e+1]!=null&&(c=this.detectionResultColumns[e+1].getCodewords());var d=new Array(14);d[2]=o[t],d[3]=c[t],t>0&&(d[0]=r[t-1],d[4]=o[t-1],d[5]=c[t-1]),t>1&&(d[8]=r[t-2],d[10]=o[t-2],d[11]=c[t-2]),t<r.length-1&&(d[1]=r[t+1],d[6]=o[t+1],d[7]=c[t+1]),t<r.length-2&&(d[9]=r[t+2],d[12]=o[t+2],d[13]=c[t+2]);try{for(var f=LH(d),p=f.next();!p.done;p=f.next()){var g=p.value;if(n.adjustRowNumber(s,g))return}}catch(y){i={error:y}}finally{try{p&&!p.done&&(a=f.return)&&a.call(f)}finally{if(i)throw i.error}}}},n.adjustRowNumber=function(e,t){return t==null?!1:t.hasValidRowNumber()&&t.getBucket()===e.getBucket()?(e.setRowNumber(t.getRowNumber()),!0):!1},n.prototype.getBarcodeColumnCount=function(){return this.barcodeColumnCount},n.prototype.getBarcodeRowCount=function(){return this.barcodeMetadata.getRowCount()},n.prototype.getBarcodeECLevel=function(){return this.barcodeMetadata.getErrorCorrectionLevel()},n.prototype.setBoundingBox=function(e){this.boundingBox=e},n.prototype.getBoundingBox=function(){return this.boundingBox},n.prototype.setDetectionResultColumn=function(e,t){this.detectionResultColumns[e]=t},n.prototype.getDetectionResultColumn=function(e){return this.detectionResultColumns[e]},n.prototype.toString=function(){var e=this.detectionResultColumns[0];e==null&&(e=this.detectionResultColumns[this.barcodeColumnCount+1]);for(var t=new z_,r=0;r<e.getCodewords().length;r++){t.format("CW %3d:",r);for(var i=0;i<this.barcodeColumnCount+2;i++){if(this.detectionResultColumns[i]==null){t.format("    |   ");continue}var a=this.detectionResultColumns[i].getCodewords()[r];if(a==null){t.format("    |   ");continue}t.format(" %3d|%3d",a.getRowNumber(),a.getValue())}t.format("%n")}return t.toString()},n}(),VH=function(){function n(e,t,r,i){this.rowNumber=n.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(e),this.endX=Math.trunc(t),this.bucket=Math.trunc(r),this.value=Math.trunc(i)}return n.prototype.hasValidRowNumber=function(){return this.isValidRowNumber(this.rowNumber)},n.prototype.isValidRowNumber=function(e){return e!==n.BARCODE_ROW_UNKNOWN&&this.bucket===e%3*3},n.prototype.setRowNumberAsRowIndicatorColumn=function(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))},n.prototype.getWidth=function(){return this.endX-this.startX},n.prototype.getStartX=function(){return this.startX},n.prototype.getEndX=function(){return this.endX},n.prototype.getBucket=function(){return this.bucket},n.prototype.getValue=function(){return this.value},n.prototype.getRowNumber=function(){return this.rowNumber},n.prototype.setRowNumber=function(e){this.rowNumber=e},n.prototype.toString=function(){return this.rowNumber+"|"+this.value},n.BARCODE_ROW_UNKNOWN=-1,n}(),FH=function(){function n(){}return n.initialize=function(){for(var e=0;e<Ht.SYMBOL_TABLE.length;e++)for(var t=Ht.SYMBOL_TABLE[e],r=t&1,i=0;i<Ht.BARS_IN_MODULE;i++){for(var a=0;(t&1)===r;)a+=1,t>>=1;r=t&1,n.RATIOS_TABLE[e]||(n.RATIOS_TABLE[e]=new Array(Ht.BARS_IN_MODULE)),n.RATIOS_TABLE[e][Ht.BARS_IN_MODULE-i-1]=Math.fround(a/Ht.MODULES_IN_CODEWORD)}this.bSymbolTableReady=!0},n.getDecodedValue=function(e){var t=n.getDecodedCodewordValue(n.sampleBitCounts(e));return t!==-1?t:n.getClosestDecodedValue(e)},n.sampleBitCounts=function(e){for(var t=$t.sum(e),r=new Int32Array(Ht.BARS_IN_MODULE),i=0,a=0,s=0;s<Ht.MODULES_IN_CODEWORD;s++){var o=t/(2*Ht.MODULES_IN_CODEWORD)+s*t/Ht.MODULES_IN_CODEWORD;a+e[i]<=o&&(a+=e[i],i++),r[i]++}return r},n.getDecodedCodewordValue=function(e){var t=n.getBitValue(e);return Ht.getCodeword(t)===-1?-1:t},n.getBitValue=function(e){for(var t=0,r=0;r<e.length;r++)for(var i=0;i<e[r];i++)t=t<<1|(r%2===0?1:0);return Math.trunc(t)},n.getClosestDecodedValue=function(e){var t=$t.sum(e),r=new Array(Ht.BARS_IN_MODULE);if(t>1)for(var i=0;i<r.length;i++)r[i]=Math.fround(e[i]/t);var a=Q2.MAX_VALUE,s=-1;this.bSymbolTableReady||n.initialize();for(var o=0;o<n.RATIOS_TABLE.length;o++){for(var c=0,d=n.RATIOS_TABLE[o],f=0;f<Ht.BARS_IN_MODULE;f++){var p=Math.fround(d[f]-r[f]);if(c+=Math.fround(p*p),c>=a)break}c<a&&(a=c,s=Ht.SYMBOL_TABLE[o])}return s},n.bSymbolTableReady=!1,n.RATIOS_TABLE=new Array(Ht.SYMBOL_TABLE.length).map(function(e){return new Array(Ht.BARS_IN_MODULE)}),n}(),jH=function(){function n(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}return n.prototype.getSegmentIndex=function(){return this.segmentIndex},n.prototype.setSegmentIndex=function(e){this.segmentIndex=e},n.prototype.getFileId=function(){return this.fileId},n.prototype.setFileId=function(e){this.fileId=e},n.prototype.getOptionalData=function(){return this.optionalData},n.prototype.setOptionalData=function(e){this.optionalData=e},n.prototype.isLastSegment=function(){return this.lastSegment},n.prototype.setLastSegment=function(e){this.lastSegment=e},n.prototype.getSegmentCount=function(){return this.segmentCount},n.prototype.setSegmentCount=function(e){this.segmentCount=e},n.prototype.getSender=function(){return this.sender||null},n.prototype.setSender=function(e){this.sender=e},n.prototype.getAddressee=function(){return this.addressee||null},n.prototype.setAddressee=function(e){this.addressee=e},n.prototype.getFileName=function(){return this.fileName},n.prototype.setFileName=function(e){this.fileName=e},n.prototype.getFileSize=function(){return this.fileSize},n.prototype.setFileSize=function(e){this.fileSize=e},n.prototype.getChecksum=function(){return this.checksum},n.prototype.setChecksum=function(e){this.checksum=e},n.prototype.getTimestamp=function(){return this.timestamp},n.prototype.setTimestamp=function(e){this.timestamp=e},n}(),AI=function(){function n(){}return n.parseLong=function(e,t){return t===void 0&&(t=void 0),parseInt(e,t)},n}(),UH=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),HH=function(n){UH(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="NullPointerException",e}(Bi),zH=function(){function n(){}return n.prototype.writeBytes=function(e){this.writeBytesOffset(e,0,e.length)},n.prototype.writeBytesOffset=function(e,t,r){if(e==null)throw new HH;if(t<0||t>e.length||r<0||t+r>e.length||t+r<0)throw new V_;if(r===0)return;for(var i=0;i<r;i++)this.write(e[t+i])},n.prototype.flush=function(){},n.prototype.close=function(){},n}(),$H=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),GH=function(n){$H(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e}(Bi),WH=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),YH=function(n){WH(e,n);function e(t){t===void 0&&(t=32);var r=n.call(this)||this;if(r.count=0,t<0)throw new nt("Negative initial size: "+t);return r.buf=new Uint8Array(t),r}return e.prototype.ensureCapacity=function(t){t-this.buf.length>0&&this.grow(t)},e.prototype.grow=function(t){var r=this.buf.length,i=r<<1;if(i-t<0&&(i=t),i<0){if(t<0)throw new GH;i=Tt.MAX_VALUE}this.buf=Tr.copyOfUint8Array(this.buf,i)},e.prototype.write=function(t){this.ensureCapacity(this.count+1),this.buf[this.count]=t,this.count+=1},e.prototype.writeBytesOffset=function(t,r,i){if(r<0||r>t.length||i<0||r+i-t.length>0)throw new V_;this.ensureCapacity(this.count+i),_n.arraycopy(t,r,this.buf,this.count,i),this.count+=i},e.prototype.writeTo=function(t){t.writeBytesOffset(this.buf,0,this.count)},e.prototype.reset=function(){this.count=0},e.prototype.toByteArray=function(){return Tr.copyOfUint8Array(this.buf,this.count)},e.prototype.size=function(){return this.count},e.prototype.toString=function(t){return t?typeof t=="string"?this.toString_string(t):this.toString_number(t):this.toString_void()},e.prototype.toString_void=function(){return new String(this.buf).toString()},e.prototype.toString_string=function(t){return new String(this.buf).toString()},e.prototype.toString_number=function(t){return new String(this.buf).toString()},e.prototype.close=function(){},e}(zH),hn;(function(n){n[n.ALPHA=0]="ALPHA",n[n.LOWER=1]="LOWER",n[n.MIXED=2]="MIXED",n[n.PUNCT=3]="PUNCT",n[n.ALPHA_SHIFT=4]="ALPHA_SHIFT",n[n.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(hn||(hn={}));function P4(){if(typeof window<"u")return window.BigInt||null;if(typeof global<"u")return global.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}var Pg;function dl(n){if(typeof Pg>"u"&&(Pg=P4()),Pg===null)throw new Error("BigInt is not supported!");return Pg(n)}function qH(){var n=[];n[0]=dl(1);var e=dl(900);n[1]=e;for(var t=2;t<16;t++)n[t]=n[t-1]*e;return n}var XH=function(){function n(){}return n.decode=function(e,t){var r=new bt(""),i=Sr.ISO8859_1;r.enableDecoding(i);for(var a=1,s=e[a++],o=new jH;a<e[0];){switch(s){case n.TEXT_COMPACTION_MODE_LATCH:a=n.textCompaction(e,a,r);break;case n.BYTE_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:a=n.byteCompaction(s,e,i,a,r);break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r.append(e[a++]);break;case n.NUMERIC_COMPACTION_MODE_LATCH:a=n.numericCompaction(e,a,r);break;case n.ECI_CHARSET:Sr.getCharacterSetECIByValue(e[a++]);break;case n.ECI_GENERAL_PURPOSE:a+=2;break;case n.ECI_USER_DEFINED:a++;break;case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:a=n.decodeMacroBlock(e,a,o);break;case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:throw new Be;default:a--,a=n.textCompaction(e,a,r);break}if(a<e.length)s=e[a++];else throw Be.getFormatInstance()}if(r.length()===0)throw Be.getFormatInstance();var c=new Gm(null,r.toString(),null,t);return c.setOther(o),c},n.decodeMacroBlock=function(e,t,r){if(t+n.NUMBER_OF_SEQUENCE_CODEWORDS>e[0])throw Be.getFormatInstance();for(var i=new Int32Array(n.NUMBER_OF_SEQUENCE_CODEWORDS),a=0;a<n.NUMBER_OF_SEQUENCE_CODEWORDS;a++,t++)i[a]=e[t];r.setSegmentIndex(Tt.parseInt(n.decodeBase900toBase10(i,n.NUMBER_OF_SEQUENCE_CODEWORDS)));var s=new bt;t=n.textCompaction(e,t,s),r.setFileId(s.toString());var o=-1;for(e[t]===n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(o=t+1);t<e[0];)switch(e[t]){case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(t++,e[t]){case n.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:var c=new bt;t=n.textCompaction(e,t+1,c),r.setFileName(c.toString());break;case n.MACRO_PDF417_OPTIONAL_FIELD_SENDER:var d=new bt;t=n.textCompaction(e,t+1,d),r.setSender(d.toString());break;case n.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:var f=new bt;t=n.textCompaction(e,t+1,f),r.setAddressee(f.toString());break;case n.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:var p=new bt;t=n.numericCompaction(e,t+1,p),r.setSegmentCount(Tt.parseInt(p.toString()));break;case n.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:var g=new bt;t=n.numericCompaction(e,t+1,g),r.setTimestamp(AI.parseLong(g.toString()));break;case n.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:var y=new bt;t=n.numericCompaction(e,t+1,y),r.setChecksum(Tt.parseInt(y.toString()));break;case n.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:var v=new bt;t=n.numericCompaction(e,t+1,v),r.setFileSize(AI.parseLong(v.toString()));break;default:throw Be.getFormatInstance()}break;case n.MACRO_PDF417_TERMINATOR:t++,r.setLastSegment(!0);break;default:throw Be.getFormatInstance()}if(o!==-1){var b=t-o;r.isLastSegment()&&b--,r.setOptionalData(Tr.copyOfRange(e,o,o+b))}return t},n.textCompaction=function(e,t,r){for(var i=new Int32Array((e[0]-t)*2),a=new Int32Array((e[0]-t)*2),s=0,o=!1;t<e[0]&&!o;){var c=e[t++];if(c<n.TEXT_COMPACTION_MODE_LATCH)i[s]=c/30,i[s+1]=c%30,s+=2;else switch(c){case n.TEXT_COMPACTION_MODE_LATCH:i[s++]=n.TEXT_COMPACTION_MODE_LATCH;break;case n.BYTE_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:case n.NUMERIC_COMPACTION_MODE_LATCH:case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:t--,o=!0;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i[s]=n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,c=e[t++],a[s]=c,s++;break}}return n.decodeTextCompaction(i,a,s,r),t},n.decodeTextCompaction=function(e,t,r,i){for(var a=hn.ALPHA,s=hn.ALPHA,o=0;o<r;){var c=e[o],d="";switch(a){case hn.ALPHA:if(c<26)d=String.fromCharCode(65+c);else switch(c){case 26:d=" ";break;case n.LL:a=hn.LOWER;break;case n.ML:a=hn.MIXED;break;case n.PS:s=a,a=hn.PUNCT_SHIFT;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[o]);break;case n.TEXT_COMPACTION_MODE_LATCH:a=hn.ALPHA;break}break;case hn.LOWER:if(c<26)d=String.fromCharCode(97+c);else switch(c){case 26:d=" ";break;case n.AS:s=a,a=hn.ALPHA_SHIFT;break;case n.ML:a=hn.MIXED;break;case n.PS:s=a,a=hn.PUNCT_SHIFT;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[o]);break;case n.TEXT_COMPACTION_MODE_LATCH:a=hn.ALPHA;break}break;case hn.MIXED:if(c<n.PL)d=n.MIXED_CHARS[c];else switch(c){case n.PL:a=hn.PUNCT;break;case 26:d=" ";break;case n.LL:a=hn.LOWER;break;case n.AL:a=hn.ALPHA;break;case n.PS:s=a,a=hn.PUNCT_SHIFT;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[o]);break;case n.TEXT_COMPACTION_MODE_LATCH:a=hn.ALPHA;break}break;case hn.PUNCT:if(c<n.PAL)d=n.PUNCT_CHARS[c];else switch(c){case n.PAL:a=hn.ALPHA;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[o]);break;case n.TEXT_COMPACTION_MODE_LATCH:a=hn.ALPHA;break}break;case hn.ALPHA_SHIFT:if(a=s,c<26)d=String.fromCharCode(65+c);else switch(c){case 26:d=" ";break;case n.TEXT_COMPACTION_MODE_LATCH:a=hn.ALPHA;break}break;case hn.PUNCT_SHIFT:if(a=s,c<n.PAL)d=n.PUNCT_CHARS[c];else switch(c){case n.PAL:a=hn.ALPHA;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[o]);break;case n.TEXT_COMPACTION_MODE_LATCH:a=hn.ALPHA;break}break}d!==""&&i.append(d),o++}},n.byteCompaction=function(e,t,r,i,a){var s=new YH,o=0,c=0,d=!1;switch(e){case n.BYTE_COMPACTION_MODE_LATCH:for(var f=new Int32Array(6),p=t[i++];i<t[0]&&!d;)switch(f[o++]=p,c=900*c+p,p=t[i++],p){case n.TEXT_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH:case n.NUMERIC_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:i--,d=!0;break;default:if(o%5===0&&o>0){for(var g=0;g<6;++g)s.write(Number(dl(c)>>dl(8*(5-g))));c=0,o=0}break}i===t[0]&&p<n.TEXT_COMPACTION_MODE_LATCH&&(f[o++]=p);for(var y=0;y<o;y++)s.write(f[y]);break;case n.BYTE_COMPACTION_MODE_LATCH_6:for(;i<t[0]&&!d;){var v=t[i++];if(v<n.TEXT_COMPACTION_MODE_LATCH)o++,c=900*c+v;else switch(v){case n.TEXT_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH:case n.NUMERIC_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:i--,d=!0;break}if(o%5===0&&o>0){for(var g=0;g<6;++g)s.write(Number(dl(c)>>dl(8*(5-g))));c=0,o=0}}break}return a.append(xa.decode(s.toByteArray(),r)),i},n.numericCompaction=function(e,t,r){for(var i=0,a=!1,s=new Int32Array(n.MAX_NUMERIC_CODEWORDS);t<e[0]&&!a;){var o=e[t++];if(t===e[0]&&(a=!0),o<n.TEXT_COMPACTION_MODE_LATCH)s[i]=o,i++;else switch(o){case n.TEXT_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:t--,a=!0;break}(i%n.MAX_NUMERIC_CODEWORDS===0||o===n.NUMERIC_COMPACTION_MODE_LATCH||a)&&i>0&&(r.append(n.decodeBase900toBase10(s,i)),i=0)}return t},n.decodeBase900toBase10=function(e,t){for(var r=dl(0),i=0;i<t;i++)r+=n.EXP900[t-i-1]*dl(e[i]);var a=r.toString();if(a.charAt(0)!=="1")throw new Be;return a.substring(1)},n.TEXT_COMPACTION_MODE_LATCH=900,n.BYTE_COMPACTION_MODE_LATCH=901,n.NUMERIC_COMPACTION_MODE_LATCH=902,n.BYTE_COMPACTION_MODE_LATCH_6=924,n.ECI_USER_DEFINED=925,n.ECI_GENERAL_PURPOSE=926,n.ECI_CHARSET=927,n.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,n.MACRO_PDF417_TERMINATOR=922,n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,n.MAX_NUMERIC_CODEWORDS=15,n.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,n.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,n.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,n.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,n.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,n.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,n.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,n.PL=25,n.LL=27,n.AS=27,n.ML=28,n.AL=28,n.PS=29,n.PAL=29,n.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,n.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",n.EXP900=P4()?qH():[],n.NUMBER_OF_SEQUENCE_CODEWORDS=2,n}(),wh=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},KH=function(){function n(){}return n.decode=function(e,t,r,i,a,s,o){for(var c=new rw(e,t,r,i,a),d=null,f=null,p,g=!0;;g=!1){if(t!=null&&(d=n.getRowIndicatorColumn(e,c,t,!0,s,o)),i!=null&&(f=n.getRowIndicatorColumn(e,c,i,!1,s,o)),p=n.merge(d,f),p==null)throw xe.getNotFoundInstance();var y=p.getBoundingBox();if(g&&y!=null&&(y.getMinY()<c.getMinY()||y.getMaxY()>c.getMaxY()))c=y;else break}p.setBoundingBox(c);var v=p.getBarcodeColumnCount()+1;p.setDetectionResultColumn(0,d),p.setDetectionResultColumn(v,f);for(var b=d!=null,A=1;A<=v;A++){var E=b?A:v-A;if(p.getDetectionResultColumn(E)===void 0){var T=void 0;E===0||E===v?T=new bI(c,E===0):T=new O4(c),p.setDetectionResultColumn(E,T);for(var C=-1,D=C,O=c.getMinY();O<=c.getMaxY();O++){if(C=n.getStartColumn(p,E,O,b),C<0||C>c.getMaxX()){if(D===-1)continue;C=D}var N=n.detectCodeword(e,c.getMinX(),c.getMaxX(),b,C,O,s,o);N!=null&&(T.setCodeword(O,N),D=C,s=Math.min(s,N.getWidth()),o=Math.max(o,N.getWidth()))}}}return n.createDecoderResult(p)},n.merge=function(e,t){if(e==null&&t==null)return null;var r=n.getBarcodeMetadata(e,t);if(r==null)return null;var i=rw.merge(n.adjustBoundingBox(e),n.adjustBoundingBox(t));return new BH(r,i)},n.adjustBoundingBox=function(e){var t,r;if(e==null)return null;var i=e.getRowHeights();if(i==null)return null;var a=n.getMax(i),s=0;try{for(var o=wh(i),c=o.next();!c.done;c=o.next()){var d=c.value;if(s+=a-d,d>0)break}}catch(y){t={error:y}}finally{try{c&&!c.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}for(var f=e.getCodewords(),p=0;s>0&&f[p]==null;p++)s--;for(var g=0,p=i.length-1;p>=0&&(g+=a-i[p],!(i[p]>0));p--);for(var p=f.length-1;g>0&&f[p]==null;p--)g--;return e.getBoundingBox().addMissingRows(s,g,e.isLeft())},n.getMax=function(e){var t,r,i=-1;try{for(var a=wh(e),s=a.next();!s.done;s=a.next()){var o=s.value;i=Math.max(i,o)}}catch(c){t={error:c}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}return i},n.getBarcodeMetadata=function(e,t){var r;if(e==null||(r=e.getBarcodeMetadata())==null)return t==null?null:t.getBarcodeMetadata();var i;return t==null||(i=t.getBarcodeMetadata())==null?r:r.getColumnCount()!==i.getColumnCount()&&r.getErrorCorrectionLevel()!==i.getErrorCorrectionLevel()&&r.getRowCount()!==i.getRowCount()?null:r},n.getRowIndicatorColumn=function(e,t,r,i,a,s){for(var o=new bI(t,i),c=0;c<2;c++)for(var d=c===0?1:-1,f=Math.trunc(Math.trunc(r.getX())),p=Math.trunc(Math.trunc(r.getY()));p<=t.getMaxY()&&p>=t.getMinY();p+=d){var g=n.detectCodeword(e,0,e.getWidth(),i,f,p,a,s);g!=null&&(o.setCodeword(p,g),i?f=g.getStartX():f=g.getEndX())}return o},n.adjustCodewordCount=function(e,t){var r=t[0][1],i=r.getValue(),a=e.getBarcodeColumnCount()*e.getBarcodeRowCount()-n.getNumberOfECCodeWords(e.getBarcodeECLevel());if(i.length===0){if(a<1||a>Ht.MAX_CODEWORDS_IN_BARCODE)throw xe.getNotFoundInstance();r.setValue(a)}else i[0]!==a&&r.setValue(a)},n.createDecoderResult=function(e){var t=n.createBarcodeMatrix(e);n.adjustCodewordCount(e,t);for(var r=new Array,i=new Int32Array(e.getBarcodeRowCount()*e.getBarcodeColumnCount()),a=[],s=new Array,o=0;o<e.getBarcodeRowCount();o++)for(var c=0;c<e.getBarcodeColumnCount();c++){var d=t[o][c+1].getValue(),f=o*e.getBarcodeColumnCount()+c;d.length===0?r.push(f):d.length===1?i[f]=d[0]:(s.push(f),a.push(d))}for(var p=new Array(a.length),g=0;g<p.length;g++)p[g]=a[g];return n.createDecoderResultFromAmbiguousValues(e.getBarcodeECLevel(),i,Ht.toIntArray(r),Ht.toIntArray(s),p)},n.createDecoderResultFromAmbiguousValues=function(e,t,r,i,a){for(var s=new Int32Array(i.length),o=100;o-- >0;){for(var c=0;c<s.length;c++)t[i[c]]=a[c][s[c]];try{return n.decodeCodewords(t,e,r)}catch(f){var d=f instanceof Vr;if(!d)throw f}if(s.length===0)throw Vr.getChecksumInstance();for(var c=0;c<s.length;c++)if(s[c]<a[c].length-1){s[c]++;break}else if(s[c]=0,c===s.length-1)throw Vr.getChecksumInstance()}throw Vr.getChecksumInstance()},n.createBarcodeMatrix=function(e){for(var t,r,i,a,s=Array.from({length:e.getBarcodeRowCount()},function(){return new Array(e.getBarcodeColumnCount()+2)}),o=0;o<s.length;o++)for(var c=0;c<s[o].length;c++)s[o][c]=new jh;var d=0;try{for(var f=wh(e.getDetectionResultColumns()),p=f.next();!p.done;p=f.next()){var g=p.value;if(g!=null)try{for(var y=(i=void 0,wh(g.getCodewords())),v=y.next();!v.done;v=y.next()){var b=v.value;if(b!=null){var A=b.getRowNumber();if(A>=0){if(A>=s.length)continue;s[A][d].setValue(b.getValue())}}}}catch(E){i={error:E}}finally{try{v&&!v.done&&(a=y.return)&&a.call(y)}finally{if(i)throw i.error}}d++}}catch(E){t={error:E}}finally{try{p&&!p.done&&(r=f.return)&&r.call(f)}finally{if(t)throw t.error}}return s},n.isValidBarcodeColumn=function(e,t){return t>=0&&t<=e.getBarcodeColumnCount()+1},n.getStartColumn=function(e,t,r,i){var a,s,o=i?1:-1,c=null;if(n.isValidBarcodeColumn(e,t-o)&&(c=e.getDetectionResultColumn(t-o).getCodeword(r)),c!=null)return i?c.getEndX():c.getStartX();if(c=e.getDetectionResultColumn(t).getCodewordNearby(r),c!=null)return i?c.getStartX():c.getEndX();if(n.isValidBarcodeColumn(e,t-o)&&(c=e.getDetectionResultColumn(t-o).getCodewordNearby(r)),c!=null)return i?c.getEndX():c.getStartX();for(var d=0;n.isValidBarcodeColumn(e,t-o);){t-=o;try{for(var f=(a=void 0,wh(e.getDetectionResultColumn(t).getCodewords())),p=f.next();!p.done;p=f.next()){var g=p.value;if(g!=null)return(i?g.getEndX():g.getStartX())+o*d*(g.getEndX()-g.getStartX())}}catch(y){a={error:y}}finally{try{p&&!p.done&&(s=f.return)&&s.call(f)}finally{if(a)throw a.error}}d++}return i?e.getBoundingBox().getMinX():e.getBoundingBox().getMaxX()},n.detectCodeword=function(e,t,r,i,a,s,o,c){a=n.adjustCodewordStartColumn(e,t,r,i,a,s);var d=n.getModuleBitCount(e,t,r,i,a,s);if(d==null)return null;var f,p=$t.sum(d);if(i)f=a+p;else{for(var g=0;g<d.length/2;g++){var y=d[g];d[g]=d[d.length-1-g],d[d.length-1-g]=y}f=a,a=f-p}if(!n.checkCodewordSkew(p,o,c))return null;var v=FH.getDecodedValue(d),b=Ht.getCodeword(v);return b===-1?null:new VH(a,f,n.getCodewordBucketNumber(v),b)},n.getModuleBitCount=function(e,t,r,i,a,s){for(var o=a,c=new Int32Array(8),d=0,f=i?1:-1,p=i;(i?o<r:o>=t)&&d<c.length;)e.get(o,s)===p?(c[d]++,o+=f):(d++,p=!p);return d===c.length||o===(i?r:t)&&d===c.length-1?c:null},n.getNumberOfECCodeWords=function(e){return 2<<e},n.adjustCodewordStartColumn=function(e,t,r,i,a,s){for(var o=a,c=i?-1:1,d=0;d<2;d++){for(;(i?o>=t:o<r)&&i===e.get(o,s);){if(Math.abs(a-o)>n.CODEWORD_SKEW_SIZE)return a;o+=c}c=-c,i=!i}return o},n.checkCodewordSkew=function(e,t,r){return t-n.CODEWORD_SKEW_SIZE<=e&&e<=r+n.CODEWORD_SKEW_SIZE},n.decodeCodewords=function(e,t,r){if(e.length===0)throw Be.getFormatInstance();var i=1<<t+1,a=n.correctErrors(e,r,i);n.verifyCodewordCount(e,i);var s=XH.decode(e,""+t);return s.setErrorsCorrected(a),s.setErasures(r.length),s},n.correctErrors=function(e,t,r){if(t!=null&&t.length>r/2+n.MAX_ERRORS||r<0||r>n.MAX_EC_CODEWORDS)throw Vr.getChecksumInstance();return n.errorCorrection.decode(e,r,t)},n.verifyCodewordCount=function(e,t){if(e.length<4)throw Be.getFormatInstance();var r=e[0];if(r>e.length)throw Be.getFormatInstance();if(r===0)if(t<e.length)e[0]=e.length-t;else throw Be.getFormatInstance()},n.getBitCountForCodeword=function(e){for(var t=new Int32Array(8),r=0,i=t.length-1;!((e&1)!==r&&(r=e&1,i--,i<0));)t[i]++,e>>=1;return t},n.getCodewordBucketNumber=function(e){return e instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(e):this.getCodewordBucketNumber_number(e)},n.getCodewordBucketNumber_number=function(e){return n.getCodewordBucketNumber(n.getBitCountForCodeword(e))},n.getCodewordBucketNumber_Int32Array=function(e){return(e[0]-e[2]+e[4]-e[6]+9)%9},n.toString=function(e){for(var t=new z_,r=0;r<e.length;r++){t.format("Row %2d: ",r);for(var i=0;i<e[r].length;i++){var a=e[r][i];a.getValue().length===0?t.format("        ",null):t.format("%4d(%2d)",a.getValue()[0],a.getConfidence(a.getValue()[0]))}t.format("%n")}return t.toString()},n.CODEWORD_SKEW_SIZE=2,n.MAX_ERRORS=3,n.MAX_EC_CODEWORDS=512,n.errorCorrection=new RH,n}(),QH=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},iw=function(){function n(){}return n.prototype.decode=function(e,t){t===void 0&&(t=null);var r=n.decode(e,t,!1);if(r==null||r.length===0||r[0]==null)throw xe.getNotFoundInstance();return r[0]},n.prototype.decodeMultiple=function(e,t){t===void 0&&(t=null);try{return n.decode(e,t,!0)}catch(r){throw r instanceof Be||r instanceof Vr?xe.getNotFoundInstance():r}},n.decode=function(e,t,r){var i,a,s=new Array,o=EH.detectMultiple(e,t,r);try{for(var c=QH(o.getPoints()),d=c.next();!d.done;d=c.next()){var f=d.value,p=KH.decode(o.getBits(),f[4],f[5],f[6],f[7],n.getMinCodewordWidth(f),n.getMaxCodewordWidth(f)),g=new gi(p.getText(),p.getRawBytes(),void 0,f,Je.PDF_417);g.putMetadata(ei.ERROR_CORRECTION_LEVEL,p.getECLevel());var y=p.getOther();y!=null&&g.putMetadata(ei.PDF417_EXTRA_METADATA,y),s.push(g)}}catch(v){i={error:v}}finally{try{d&&!d.done&&(a=c.return)&&a.call(c)}finally{if(i)throw i.error}}return s.map(function(v){return v})},n.getMaxWidth=function(e,t){return e==null||t==null?0:Math.trunc(Math.abs(e.getX()-t.getX()))},n.getMinWidth=function(e,t){return e==null||t==null?Tt.MAX_VALUE:Math.trunc(Math.abs(e.getX()-t.getX()))},n.getMaxCodewordWidth=function(e){return Math.floor(Math.max(Math.max(n.getMaxWidth(e[0],e[4]),n.getMaxWidth(e[6],e[2])*Ht.MODULES_IN_CODEWORD/Ht.MODULES_IN_STOP_PATTERN),Math.max(n.getMaxWidth(e[1],e[5]),n.getMaxWidth(e[7],e[3])*Ht.MODULES_IN_CODEWORD/Ht.MODULES_IN_STOP_PATTERN)))},n.getMinCodewordWidth=function(e){return Math.floor(Math.min(Math.min(n.getMinWidth(e[0],e[4]),n.getMinWidth(e[6],e[2])*Ht.MODULES_IN_CODEWORD/Ht.MODULES_IN_STOP_PATTERN),Math.min(n.getMinWidth(e[1],e[5]),n.getMinWidth(e[7],e[3])*Ht.MODULES_IN_CODEWORD/Ht.MODULES_IN_STOP_PATTERN)))},n.prototype.reset=function(){},n}(),ZH=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),EI=function(n){ZH(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="ReaderException",e}(Bi),SI=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},JH=function(){function n(){}return n.prototype.decode=function(e,t){return this.setHints(t),this.decodeInternal(e)},n.prototype.decodeWithState=function(e){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(e)},n.prototype.setHints=function(e){this.hints=e;var t=e!=null&&e.get(On.TRY_HARDER)!==void 0,r=e==null?null:e.get(On.POSSIBLE_FORMATS),i=new Array;if(r!=null){var a=r.some(function(s){return s===Je.UPC_A||s===Je.UPC_E||s===Je.EAN_13||s===Je.EAN_8||s===Je.CODABAR||s===Je.CODE_39||s===Je.CODE_93||s===Je.CODE_128||s===Je.ITF||s===Je.RSS_14||s===Je.RSS_EXPANDED});a&&!t&&i.push(new Fh(e)),r.includes(Je.QR_CODE)&&i.push(new nw),r.includes(Je.DATA_MATRIX)&&i.push(new tw),r.includes(Je.AZTEC)&&i.push(new J2),r.includes(Je.PDF_417)&&i.push(new iw),a&&t&&i.push(new Fh(e))}i.length===0&&(t||i.push(new Fh(e)),i.push(new nw),i.push(new tw),i.push(new J2),i.push(new iw),t&&i.push(new Fh(e))),this.readers=i},n.prototype.reset=function(){var e,t;if(this.readers!==null)try{for(var r=SI(this.readers),i=r.next();!i.done;i=r.next()){var a=i.value;a.reset()}}catch(s){e={error:s}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}},n.prototype.decodeInternal=function(e){var t,r;if(this.readers===null)throw new EI("No readers where selected, nothing can be read.");try{for(var i=SI(this.readers),a=i.next();!a.done;a=i.next()){var s=a.value;try{return s.decode(e,this.hints)}catch(o){if(o instanceof EI)continue}}}catch(o){t={error:o}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}throw new xe("No MultiFormat Readers were able to detect the code.")},n}(),ez=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),tz=function(n){ez(e,n);function e(t,r){t===void 0&&(t=null),r===void 0&&(r=500);var i=this,a=new JH;return a.setHints(t),i=n.call(this,a,r)||this,i}return e.prototype.decodeBitmap=function(t){return this.reader.decodeWithState(t)},e}(cf),nz=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();(function(n){nz(e,n);function e(t){return t===void 0&&(t=500),n.call(this,new iw,t)||this}return e})(cf);var rz=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();(function(n){rz(e,n);function e(t){return t===void 0&&(t=500),n.call(this,new nw,t)||this}return e})(cf);var aw;(function(n){n[n.ERROR_CORRECTION=0]="ERROR_CORRECTION",n[n.CHARACTER_SET=1]="CHARACTER_SET",n[n.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",n[n.DATA_MATRIX_COMPACT=3]="DATA_MATRIX_COMPACT",n[n.MIN_SIZE=4]="MIN_SIZE",n[n.MAX_SIZE=5]="MAX_SIZE",n[n.MARGIN=6]="MARGIN",n[n.PDF417_COMPACT=7]="PDF417_COMPACT",n[n.PDF417_COMPACTION=8]="PDF417_COMPACTION",n[n.PDF417_DIMENSIONS=9]="PDF417_DIMENSIONS",n[n.AZTEC_LAYERS=10]="AZTEC_LAYERS",n[n.QR_VERSION=11]="QR_VERSION",n[n.GS1_FORMAT=12]="GS1_FORMAT",n[n.FORCE_C40=13]="FORCE_C40"})(aw||(aw={}));const kg=aw;var k4=function(){function n(e){this.field=e,this.cachedGenerators=[],this.cachedGenerators.push(new Sl(e,Int32Array.from([1])))}return n.prototype.buildGenerator=function(e){var t=this.cachedGenerators;if(e>=t.length)for(var r=t[t.length-1],i=this.field,a=t.length;a<=e;a++){var s=r.multiply(new Sl(i,Int32Array.from([1,i.exp(a-1+i.getGeneratorBase())])));t.push(s),r=s}return t[e]},n.prototype.encode=function(e,t){if(t===0)throw new nt("No error correction bytes");var r=e.length-t;if(r<=0)throw new nt("No data bytes provided");var i=this.buildGenerator(t),a=new Int32Array(r);_n.arraycopy(e,0,a,0,r);var s=new Sl(this.field,a);s=s.multiplyByMonomial(t,1);for(var o=s.divide(i)[1],c=o.getCoefficients(),d=t-c.length,f=0;f<d;f++)e[r+f]=0;_n.arraycopy(c,0,e,r+d,c.length)},n}(),Uh=function(){function n(){}return n.applyMaskPenaltyRule1=function(e){return n.applyMaskPenaltyRule1Internal(e,!0)+n.applyMaskPenaltyRule1Internal(e,!1)},n.applyMaskPenaltyRule2=function(e){for(var t=0,r=e.getArray(),i=e.getWidth(),a=e.getHeight(),s=0;s<a-1;s++)for(var o=r[s],c=0;c<i-1;c++){var d=o[c];d===o[c+1]&&d===r[s+1][c]&&d===r[s+1][c+1]&&t++}return n.N2*t},n.applyMaskPenaltyRule3=function(e){for(var t=0,r=e.getArray(),i=e.getWidth(),a=e.getHeight(),s=0;s<a;s++)for(var o=0;o<i;o++){var c=r[s];o+6<i&&c[o]===1&&c[o+1]===0&&c[o+2]===1&&c[o+3]===1&&c[o+4]===1&&c[o+5]===0&&c[o+6]===1&&(n.isWhiteHorizontal(c,o-4,o)||n.isWhiteHorizontal(c,o+7,o+11))&&t++,s+6<a&&r[s][o]===1&&r[s+1][o]===0&&r[s+2][o]===1&&r[s+3][o]===1&&r[s+4][o]===1&&r[s+5][o]===0&&r[s+6][o]===1&&(n.isWhiteVertical(r,o,s-4,s)||n.isWhiteVertical(r,o,s+7,s+11))&&t++}return t*n.N3},n.isWhiteHorizontal=function(e,t,r){t=Math.max(t,0),r=Math.min(r,e.length);for(var i=t;i<r;i++)if(e[i]===1)return!1;return!0},n.isWhiteVertical=function(e,t,r,i){r=Math.max(r,0),i=Math.min(i,e.length);for(var a=r;a<i;a++)if(e[a][t]===1)return!1;return!0},n.applyMaskPenaltyRule4=function(e){for(var t=0,r=e.getArray(),i=e.getWidth(),a=e.getHeight(),s=0;s<a;s++)for(var o=r[s],c=0;c<i;c++)o[c]===1&&t++;var d=e.getHeight()*e.getWidth(),f=Math.floor(Math.abs(t*2-d)*10/d);return f*n.N4},n.getDataMaskBit=function(e,t,r){var i,a;switch(e){case 0:i=r+t&1;break;case 1:i=r&1;break;case 2:i=t%3;break;case 3:i=(r+t)%3;break;case 4:i=Math.floor(r/2)+Math.floor(t/3)&1;break;case 5:a=r*t,i=(a&1)+a%3;break;case 6:a=r*t,i=(a&1)+a%3&1;break;case 7:a=r*t,i=a%3+(r+t&1)&1;break;default:throw new nt("Invalid mask pattern: "+e)}return i===0},n.applyMaskPenaltyRule1Internal=function(e,t){for(var r=0,i=t?e.getHeight():e.getWidth(),a=t?e.getWidth():e.getHeight(),s=e.getArray(),o=0;o<i;o++){for(var c=0,d=-1,f=0;f<a;f++){var p=t?s[o][f]:s[f][o];p===d?c++:(c>=5&&(r+=n.N1+(c-5)),c=1,d=p)}c>=5&&(r+=n.N1+(c-5))}return r},n.N1=3,n.N2=3,n.N3=40,n.N4=10,n}(),iz=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},az=function(){function n(e,t){this.width=e,this.height=t;for(var r=new Array(t),i=0;i!==t;i++)r[i]=new Uint8Array(e);this.bytes=r}return n.prototype.getHeight=function(){return this.height},n.prototype.getWidth=function(){return this.width},n.prototype.get=function(e,t){return this.bytes[t][e]},n.prototype.getArray=function(){return this.bytes},n.prototype.setNumber=function(e,t,r){this.bytes[t][e]=r},n.prototype.setBoolean=function(e,t,r){this.bytes[t][e]=r?1:0},n.prototype.clear=function(e){var t,r;try{for(var i=iz(this.bytes),a=i.next();!a.done;a=i.next()){var s=a.value;Tr.fill(s,e)}}catch(o){t={error:o}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;if(this.width!==t.width||this.height!==t.height)return!1;for(var r=0,i=this.height;r<i;++r)for(var a=this.bytes[r],s=t.bytes[r],o=0,c=this.width;o<c;++o)if(a[o]!==s[o])return!1;return!0},n.prototype.toString=function(){for(var e=new bt,t=0,r=this.height;t<r;++t){for(var i=this.bytes[t],a=0,s=this.width;a<s;++a)switch(i[a]){case 0:e.append(" 0");break;case 1:e.append(" 1");break;default:e.append("  ");break}e.append(`
`)}return e.toString()},n}(),sw=function(){function n(){this.maskPattern=-1}return n.prototype.getMode=function(){return this.mode},n.prototype.getECLevel=function(){return this.ecLevel},n.prototype.getVersion=function(){return this.version},n.prototype.getMaskPattern=function(){return this.maskPattern},n.prototype.getMatrix=function(){return this.matrix},n.prototype.toString=function(){var e=new bt;return e.append(`<<
`),e.append(" mode: "),e.append(this.mode?this.mode.toString():"null"),e.append(`
 ecLevel: `),e.append(this.ecLevel?this.ecLevel.toString():"null"),e.append(`
 version: `),e.append(this.version?this.version.toString():"null"),e.append(`
 maskPattern: `),e.append(this.maskPattern.toString()),this.matrix?(e.append(`
 matrix:
`),e.append(this.matrix.toString())):e.append(`
 matrix: null
`),e.append(`>>
`),e.toString()},n.prototype.setMode=function(e){this.mode=e},n.prototype.setECLevel=function(e){this.ecLevel=e},n.prototype.setVersion=function(e){this.version=e},n.prototype.setMaskPattern=function(e){this.maskPattern=e},n.prototype.setMatrix=function(e){this.matrix=e},n.isValidMaskPattern=function(e){return e>=0&&e<n.NUM_MASK_PATTERNS},n.NUM_MASK_PATTERNS=8,n}(),sz=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),En=function(n){sz(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="WriterException",e}(Bi),TI=function(){function n(){}return n.clearMatrix=function(e){e.clear(255)},n.buildMatrix=function(e,t,r,i,a){n.clearMatrix(a),n.embedBasicPatterns(r,a),n.embedTypeInfo(t,i,a),n.maybeEmbedVersionInfo(r,a),n.embedDataBits(e,i,a)},n.embedBasicPatterns=function(e,t){n.embedPositionDetectionPatternsAndSeparators(t),n.embedDarkDotAtLeftBottomCorner(t),n.maybeEmbedPositionAdjustmentPatterns(e,t),n.embedTimingPatterns(t)},n.embedTypeInfo=function(e,t,r){var i=new jr;n.makeTypeInfoBits(e,t,i);for(var a=0,s=i.getSize();a<s;++a){var o=i.get(i.getSize()-1-a),c=n.TYPE_INFO_COORDINATES[a],d=c[0],f=c[1];if(r.setBoolean(d,f,o),a<8){var p=r.getWidth()-a-1,g=8;r.setBoolean(p,g,o)}else{var p=8,g=r.getHeight()-7+(a-8);r.setBoolean(p,g,o)}}},n.maybeEmbedVersionInfo=function(e,t){if(!(e.getVersionNumber()<7)){var r=new jr;n.makeVersionInfoBits(e,r);for(var i=17,a=0;a<6;++a)for(var s=0;s<3;++s){var o=r.get(i);i--,t.setBoolean(a,t.getHeight()-11+s,o),t.setBoolean(t.getHeight()-11+s,a,o)}}},n.embedDataBits=function(e,t,r){for(var i=0,a=-1,s=r.getWidth()-1,o=r.getHeight()-1;s>0;){for(s===6&&(s-=1);o>=0&&o<r.getHeight();){for(var c=0;c<2;++c){var d=s-c;if(n.isEmpty(r.get(d,o))){var f=void 0;i<e.getSize()?(f=e.get(i),++i):f=!1,t!==255&&Uh.getDataMaskBit(t,d,o)&&(f=!f),r.setBoolean(d,o,f)}}o+=a}a=-a,o+=a,s-=2}if(i!==e.getSize())throw new En("Not all bits consumed: "+i+"/"+e.getSize())},n.findMSBSet=function(e){return 32-Tt.numberOfLeadingZeros(e)},n.calculateBCHCode=function(e,t){if(t===0)throw new nt("0 polynomial");var r=n.findMSBSet(t);for(e<<=r-1;n.findMSBSet(e)>=r;)e^=t<<n.findMSBSet(e)-r;return e},n.makeTypeInfoBits=function(e,t,r){if(!sw.isValidMaskPattern(t))throw new En("Invalid mask pattern");var i=e.getBits()<<3|t;r.appendBits(i,5);var a=n.calculateBCHCode(i,n.TYPE_INFO_POLY);r.appendBits(a,10);var s=new jr;if(s.appendBits(n.TYPE_INFO_MASK_PATTERN,15),r.xor(s),r.getSize()!==15)throw new En("should not happen but we got: "+r.getSize())},n.makeVersionInfoBits=function(e,t){t.appendBits(e.getVersionNumber(),6);var r=n.calculateBCHCode(e.getVersionNumber(),n.VERSION_INFO_POLY);if(t.appendBits(r,12),t.getSize()!==18)throw new En("should not happen but we got: "+t.getSize())},n.isEmpty=function(e){return e===255},n.embedTimingPatterns=function(e){for(var t=8;t<e.getWidth()-8;++t){var r=(t+1)%2;n.isEmpty(e.get(t,6))&&e.setNumber(t,6,r),n.isEmpty(e.get(6,t))&&e.setNumber(6,t,r)}},n.embedDarkDotAtLeftBottomCorner=function(e){if(e.get(8,e.getHeight()-8)===0)throw new En;e.setNumber(8,e.getHeight()-8,1)},n.embedHorizontalSeparationPattern=function(e,t,r){for(var i=0;i<8;++i){if(!n.isEmpty(r.get(e+i,t)))throw new En;r.setNumber(e+i,t,0)}},n.embedVerticalSeparationPattern=function(e,t,r){for(var i=0;i<7;++i){if(!n.isEmpty(r.get(e,t+i)))throw new En;r.setNumber(e,t+i,0)}},n.embedPositionAdjustmentPattern=function(e,t,r){for(var i=0;i<5;++i)for(var a=n.POSITION_ADJUSTMENT_PATTERN[i],s=0;s<5;++s)r.setNumber(e+s,t+i,a[s])},n.embedPositionDetectionPattern=function(e,t,r){for(var i=0;i<7;++i)for(var a=n.POSITION_DETECTION_PATTERN[i],s=0;s<7;++s)r.setNumber(e+s,t+i,a[s])},n.embedPositionDetectionPatternsAndSeparators=function(e){var t=n.POSITION_DETECTION_PATTERN[0].length;n.embedPositionDetectionPattern(0,0,e),n.embedPositionDetectionPattern(e.getWidth()-t,0,e),n.embedPositionDetectionPattern(0,e.getWidth()-t,e);var r=8;n.embedHorizontalSeparationPattern(0,r-1,e),n.embedHorizontalSeparationPattern(e.getWidth()-r,r-1,e),n.embedHorizontalSeparationPattern(0,e.getWidth()-r,e);var i=7;n.embedVerticalSeparationPattern(i,0,e),n.embedVerticalSeparationPattern(e.getHeight()-i-1,0,e),n.embedVerticalSeparationPattern(i,e.getHeight()-i,e)},n.maybeEmbedPositionAdjustmentPatterns=function(e,t){if(!(e.getVersionNumber()<2))for(var r=e.getVersionNumber()-1,i=n.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[r],a=0,s=i.length;a!==s;a++){var o=i[a];if(o>=0)for(var c=0;c!==s;c++){var d=i[c];d>=0&&n.isEmpty(t.get(d,o))&&n.embedPositionAdjustmentPattern(d-2,o-2,t)}}},n.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),n.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),n.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),n.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),n.VERSION_INFO_POLY=7973,n.TYPE_INFO_POLY=1335,n.TYPE_INFO_MASK_PATTERN=21522,n}(),oz=function(){function n(e,t){this.dataBytes=e,this.errorCorrectionBytes=t}return n.prototype.getDataBytes=function(){return this.dataBytes},n.prototype.getErrorCorrectionBytes=function(){return this.errorCorrectionBytes},n}(),CI=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};(function(){function n(){}return n.calculateMaskPenalty=function(e){return Uh.applyMaskPenaltyRule1(e)+Uh.applyMaskPenaltyRule2(e)+Uh.applyMaskPenaltyRule3(e)+Uh.applyMaskPenaltyRule4(e)},n.encode=function(e,t,r){r===void 0&&(r=null);var i=n.DEFAULT_BYTE_MODE_ENCODING,a=r!==null&&r.get(kg.CHARACTER_SET)!==void 0;a&&(i=r.get(kg.CHARACTER_SET).toString());var s=this.chooseMode(e,i),o=new jr;if(s===Sn.BYTE&&(a||n.DEFAULT_BYTE_MODE_ENCODING!==i)){var c=Sr.getCharacterSetECIByName(i);c!==void 0&&this.appendECI(c,o)}this.appendModeInfo(s,o);var d=new jr;this.appendBytes(e,s,d,i);var f;if(r!==null&&r.get(kg.QR_VERSION)!==void 0){var p=Number.parseInt(r.get(kg.QR_VERSION).toString(),10);f=Fc.getVersionForNumber(p);var g=this.calculateBitsNeeded(s,o,d,f);if(!this.willFit(g,f,t))throw new En("Data too big for requested version")}else f=this.recommendVersion(t,s,o,d);var y=new jr;y.appendBitArray(o);var v=s===Sn.BYTE?d.getSizeInBytes():e.length;this.appendLengthInfo(v,f,s,y),y.appendBitArray(d);var b=f.getECBlocksForLevel(t),A=f.getTotalCodewords()-b.getTotalECCodewords();this.terminateBits(A,y);var E=this.interleaveWithECBytes(y,f.getTotalCodewords(),A,b.getNumBlocks()),T=new sw;T.setECLevel(t),T.setMode(s),T.setVersion(f);var C=f.getDimensionForVersion(),D=new az(C,C),O=this.chooseMaskPattern(E,t,f,D);return T.setMaskPattern(O),TI.buildMatrix(E,t,f,O,D),T.setMatrix(D),T},n.recommendVersion=function(e,t,r,i){var a=this.calculateBitsNeeded(t,r,i,Fc.getVersionForNumber(1)),s=this.chooseVersion(a,e),o=this.calculateBitsNeeded(t,r,i,s);return this.chooseVersion(o,e)},n.calculateBitsNeeded=function(e,t,r,i){return t.getSize()+e.getCharacterCountBits(i)+r.getSize()},n.getAlphanumericCode=function(e){return e<n.ALPHANUMERIC_TABLE.length?n.ALPHANUMERIC_TABLE[e]:-1},n.chooseMode=function(e,t){if(t===void 0&&(t=null),Sr.SJIS.getName()===t&&this.isOnlyDoubleByteKanji(e))return Sn.KANJI;for(var r=!1,i=!1,a=0,s=e.length;a<s;++a){var o=e.charAt(a);if(n.isDigit(o))r=!0;else if(this.getAlphanumericCode(o.charCodeAt(0))!==-1)i=!0;else return Sn.BYTE}return i?Sn.ALPHANUMERIC:r?Sn.NUMERIC:Sn.BYTE},n.isOnlyDoubleByteKanji=function(e){var t;try{t=xa.encode(e,Sr.SJIS)}catch{return!1}var r=t.length;if(r%2!==0)return!1;for(var i=0;i<r;i+=2){var a=t[i]&255;if((a<129||a>159)&&(a<224||a>235))return!1}return!0},n.chooseMaskPattern=function(e,t,r,i){for(var a=Number.MAX_SAFE_INTEGER,s=-1,o=0;o<sw.NUM_MASK_PATTERNS;o++){TI.buildMatrix(e,t,r,o,i);var c=this.calculateMaskPenalty(i);c<a&&(a=c,s=o)}return s},n.chooseVersion=function(e,t){for(var r=1;r<=40;r++){var i=Fc.getVersionForNumber(r);if(n.willFit(e,i,t))return i}throw new En("Data too big")},n.willFit=function(e,t,r){var i=t.getTotalCodewords(),a=t.getECBlocksForLevel(r),s=a.getTotalECCodewords(),o=i-s,c=(e+7)/8;return o>=c},n.terminateBits=function(e,t){var r=e*8;if(t.getSize()>r)throw new En("data bits cannot fit in the QR Code"+t.getSize()+" > "+r);for(var i=0;i<4&&t.getSize()<r;++i)t.appendBit(!1);var a=t.getSize()&7;if(a>0)for(var i=a;i<8;i++)t.appendBit(!1);for(var s=e-t.getSizeInBytes(),i=0;i<s;++i)t.appendBits((i&1)===0?236:17,8);if(t.getSize()!==r)throw new En("Bits size does not equal capacity")},n.getNumDataBytesAndNumECBytesForBlockID=function(e,t,r,i,a,s){if(i>=r)throw new En("Block ID too large");var o=e%r,c=r-o,d=Math.floor(e/r),f=d+1,p=Math.floor(t/r),g=p+1,y=d-p,v=f-g;if(y!==v)throw new En("EC bytes mismatch");if(r!==c+o)throw new En("RS blocks mismatch");if(e!==(p+y)*c+(g+v)*o)throw new En("Total bytes mismatch");i<c?(a[0]=p,s[0]=y):(a[0]=g,s[0]=v)},n.interleaveWithECBytes=function(e,t,r,i){var a,s,o,c;if(e.getSizeInBytes()!==r)throw new En("Number of bits and data bytes does not match");for(var d=0,f=0,p=0,g=new Array,y=0;y<i;++y){var v=new Int32Array(1),b=new Int32Array(1);n.getNumDataBytesAndNumECBytesForBlockID(t,r,i,y,v,b);var A=v[0],E=new Uint8Array(A);e.toBytes(8*d,E,0,A);var T=n.generateECBytes(E,b[0]);g.push(new oz(E,T)),f=Math.max(f,A),p=Math.max(p,T.length),d+=v[0]}if(r!==d)throw new En("Data bytes does not match offset");for(var C=new jr,y=0;y<f;++y)try{for(var D=(a=void 0,CI(g)),O=D.next();!O.done;O=D.next()){var N=O.value,E=N.getDataBytes();y<E.length&&C.appendBits(E[y],8)}}catch(B){a={error:B}}finally{try{O&&!O.done&&(s=D.return)&&s.call(D)}finally{if(a)throw a.error}}for(var y=0;y<p;++y)try{for(var M=(o=void 0,CI(g)),R=M.next();!R.done;R=M.next()){var N=R.value,T=N.getErrorCorrectionBytes();y<T.length&&C.appendBits(T[y],8)}}catch(B){o={error:B}}finally{try{R&&!R.done&&(c=M.return)&&c.call(M)}finally{if(o)throw o.error}}if(t!==C.getSizeInBytes())throw new En("Interleaving error: "+t+" and "+C.getSizeInBytes()+" differ.");return C},n.generateECBytes=function(e,t){for(var r=e.length,i=new Int32Array(r+t),a=0;a<r;a++)i[a]=e[a]&255;new k4(ki.QR_CODE_FIELD_256).encode(i,t);for(var s=new Uint8Array(t),a=0;a<t;a++)s[a]=i[r+a];return s},n.appendModeInfo=function(e,t){t.appendBits(e.getBits(),4)},n.appendLengthInfo=function(e,t,r,i){var a=r.getCharacterCountBits(t);if(e>=1<<a)throw new En(e+" is bigger than "+((1<<a)-1));i.appendBits(e,a)},n.appendBytes=function(e,t,r,i){switch(t){case Sn.NUMERIC:n.appendNumericBytes(e,r);break;case Sn.ALPHANUMERIC:n.appendAlphanumericBytes(e,r);break;case Sn.BYTE:n.append8BitBytes(e,r,i);break;case Sn.KANJI:n.appendKanjiBytes(e,r);break;default:throw new En("Invalid mode: "+t)}},n.getDigit=function(e){return e.charCodeAt(0)-48},n.isDigit=function(e){var t=n.getDigit(e);return t>=0&&t<=9},n.appendNumericBytes=function(e,t){for(var r=e.length,i=0;i<r;){var a=n.getDigit(e.charAt(i));if(i+2<r){var s=n.getDigit(e.charAt(i+1)),o=n.getDigit(e.charAt(i+2));t.appendBits(a*100+s*10+o,10),i+=3}else if(i+1<r){var s=n.getDigit(e.charAt(i+1));t.appendBits(a*10+s,7),i+=2}else t.appendBits(a,4),i++}},n.appendAlphanumericBytes=function(e,t){for(var r=e.length,i=0;i<r;){var a=n.getAlphanumericCode(e.charCodeAt(i));if(a===-1)throw new En;if(i+1<r){var s=n.getAlphanumericCode(e.charCodeAt(i+1));if(s===-1)throw new En;t.appendBits(a*45+s,11),i+=2}else t.appendBits(a,6),i++}},n.append8BitBytes=function(e,t,r){var i;try{i=xa.encode(e,r)}catch(c){throw new En(c)}for(var a=0,s=i.length;a!==s;a++){var o=i[a];t.appendBits(o,8)}},n.appendKanjiBytes=function(e,t){var r;try{r=xa.encode(e,Sr.SJIS)}catch(p){throw new En(p)}for(var i=r.length,a=0;a<i;a+=2){var s=r[a]&255,o=r[a+1]&255,c=s<<8&4294967295|o,d=-1;if(c>=33088&&c<=40956?d=c-33088:c>=57408&&c<=60351&&(d=c-49472),d===-1)throw new En("Invalid byte sequence");var f=(d>>8)*192+(d&255);t.appendBits(f,13)}},n.appendECI=function(e,t){t.appendBits(Sn.ECI.getBits(),4),t.appendBits(e.getValue(),8)},n.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),n.DEFAULT_BYTE_MODE_ENCODING=Sr.UTF8.getName(),n})();var lz=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();(function(n){lz(e,n);function e(t,r,i,a,s,o,c,d){var f=n.call(this,o,c)||this;if(f.yuvData=t,f.dataWidth=r,f.dataHeight=i,f.left=a,f.top=s,a+o>r||s+c>i)throw new nt("Crop rectangle does not fit within image data.");return d&&f.reverseHorizontal(o,c),f}return e.prototype.getRow=function(t,r){if(t<0||t>=this.getHeight())throw new nt("Requested row is outside the image: "+t);var i=this.getWidth();(r==null||r.length<i)&&(r=new Uint8ClampedArray(i));var a=(t+this.top)*this.dataWidth+this.left;return _n.arraycopy(this.yuvData,a,r,0,i),r},e.prototype.getMatrix=function(){var t=this.getWidth(),r=this.getHeight();if(t===this.dataWidth&&r===this.dataHeight)return this.yuvData;var i=t*r,a=new Uint8ClampedArray(i),s=this.top*this.dataWidth+this.left;if(t===this.dataWidth)return _n.arraycopy(this.yuvData,s,a,0,i),a;for(var o=0;o<r;o++){var c=o*t;_n.arraycopy(this.yuvData,s,a,c,t),s+=this.dataWidth}return a},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(t,r,i,a){return new e(this.yuvData,this.dataWidth,this.dataHeight,this.left+t,this.top+r,i,a,!1)},e.prototype.renderThumbnail=function(){for(var t=this.getWidth()/e.THUMBNAIL_SCALE_FACTOR,r=this.getHeight()/e.THUMBNAIL_SCALE_FACTOR,i=new Int32Array(t*r),a=this.yuvData,s=this.top*this.dataWidth+this.left,o=0;o<r;o++){for(var c=o*t,d=0;d<t;d++){var f=a[s+d*e.THUMBNAIL_SCALE_FACTOR]&255;i[c+d]=4278190080|f*65793}s+=this.dataWidth*e.THUMBNAIL_SCALE_FACTOR}return i},e.prototype.getThumbnailWidth=function(){return this.getWidth()/e.THUMBNAIL_SCALE_FACTOR},e.prototype.getThumbnailHeight=function(){return this.getHeight()/e.THUMBNAIL_SCALE_FACTOR},e.prototype.reverseHorizontal=function(t,r){for(var i=this.yuvData,a=0,s=this.top*this.dataWidth+this.left;a<r;a++,s+=this.dataWidth)for(var o=s+t/2,c=s,d=s+t-1;c<o;c++,d--){var f=i[c];i[c]=i[d],i[d]=f}},e.prototype.invert=function(){return new F_(this)},e.THUMBNAIL_SCALE_FACTOR=2,e})($m);var cz=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();(function(n){cz(e,n);function e(t,r,i,a,s,o,c){var d=n.call(this,r,i)||this;if(d.dataWidth=a,d.dataHeight=s,d.left=o,d.top=c,t.BYTES_PER_ELEMENT===4){for(var f=r*i,p=new Uint8ClampedArray(f),g=0;g<f;g++){var y=t[g],v=y>>16&255,b=y>>7&510,A=y&255;p[g]=(v+b+A)/4&255}d.luminances=p}else d.luminances=t;if(a===void 0&&(d.dataWidth=r),s===void 0&&(d.dataHeight=i),o===void 0&&(d.left=0),c===void 0&&(d.top=0),d.left+r>d.dataWidth||d.top+i>d.dataHeight)throw new nt("Crop rectangle does not fit within image data.");return d}return e.prototype.getRow=function(t,r){if(t<0||t>=this.getHeight())throw new nt("Requested row is outside the image: "+t);var i=this.getWidth();(r==null||r.length<i)&&(r=new Uint8ClampedArray(i));var a=(t+this.top)*this.dataWidth+this.left;return _n.arraycopy(this.luminances,a,r,0,i),r},e.prototype.getMatrix=function(){var t=this.getWidth(),r=this.getHeight();if(t===this.dataWidth&&r===this.dataHeight)return this.luminances;var i=t*r,a=new Uint8ClampedArray(i),s=this.top*this.dataWidth+this.left;if(t===this.dataWidth)return _n.arraycopy(this.luminances,s,a,0,i),a;for(var o=0;o<r;o++){var c=o*t;_n.arraycopy(this.luminances,s,a,c,t),s+=this.dataWidth}return a},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(t,r,i,a){return new e(this.luminances,i,a,this.dataWidth,this.dataHeight,this.left+t,this.top+r)},e.prototype.invert=function(){return new F_(this)},e})($m);var uz=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),dz=function(n){uz(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.forName=function(t){return this.getCharacterSetECIByName(t)},e}(Sr),fz=function(){function n(){}return n.ISO_8859_1=Sr.ISO8859_1,n}(),ow,hz=301,pz=function(n,e){for(var t=1,r=0;r<255;r++)e[r]=t,n[t]=r,t*=2,t>=256&&(t^=hz);return{LOG:n,ALOG:e}};ow=pz([],[]),ow.LOG;ow.ALOG;var II;(function(n){n[n.FORCE_NONE=0]="FORCE_NONE",n[n.FORCE_SQUARE=1]="FORCE_SQUARE",n[n.FORCE_RECTANGLE=2]="FORCE_RECTANGLE"})(II||(II={}));var DI=129,N4=230,gz=231,mz=235,yz=236,vz=237,xz=238,wz=239,_z=240,Vx=254,bz=254,RI="[)>05",MI="[)>06",OI="",on=0,Kr=1,Ei=2,br=3,Lr=4,oi=5,Az=function(){function n(){}return n.prototype.getEncodingMode=function(){return on},n.prototype.encode=function(e){var t=La.determineConsecutiveDigitCount(e.getMessage(),e.pos);if(t>=2)e.writeCodeword(this.encodeASCIIDigits(e.getMessage().charCodeAt(e.pos),e.getMessage().charCodeAt(e.pos+1))),e.pos+=2;else{var r=e.getCurrentChar(),i=La.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(i!==this.getEncodingMode())switch(i){case oi:e.writeCodeword(gz),e.signalEncoderChange(oi);return;case Kr:e.writeCodeword(N4),e.signalEncoderChange(Kr);return;case br:e.writeCodeword(xz),e.signalEncoderChange(br);break;case Ei:e.writeCodeword(wz),e.signalEncoderChange(Ei);break;case Lr:e.writeCodeword(_z),e.signalEncoderChange(Lr);break;default:throw new Error("Illegal mode: "+i)}else La.isExtendedASCII(r)?(e.writeCodeword(mz),e.writeCodeword(r-128+1),e.pos++):(e.writeCodeword(r+1),e.pos++)}},n.prototype.encodeASCIIDigits=function(e,t){if(La.isDigit(e)&&La.isDigit(t)){var r=(e-48)*10+(t-48);return r+130}throw new Error("not digits: "+e+t)},n}(),Ez=function(){function n(){}return n.prototype.getEncodingMode=function(){return oi},n.prototype.encode=function(e){var t=new bt;for(t.append(0);e.hasMoreCharacters();){var r=e.getCurrentChar();t.append(r),e.pos++;var i=La.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(i!==this.getEncodingMode()){e.signalEncoderChange(on);break}}var a=t.length()-1,s=1,o=e.getCodewordCount()+a+s;e.updateSymbolInfo(o);var c=e.getSymbolInfo().getDataCapacity()-o>0;if(e.hasMoreCharacters()||c)if(a<=249)t.setCharAt(0,jt.getCharAt(a));else if(a<=1555)t.setCharAt(0,jt.getCharAt(Math.floor(a/250)+249)),t.insert(1,jt.getCharAt(a%250));else throw new Error("Message length not in valid ranges: "+a);for(var d=0,r=t.length();d<r;d++)e.writeCodeword(this.randomize255State(t.charAt(d).charCodeAt(0),e.getCodewordCount()+1))},n.prototype.randomize255State=function(e,t){var r=149*t%255+1,i=e+r;return i<=255?i:i-256},n}(),$_=function(){function n(){}return n.prototype.getEncodingMode=function(){return Kr},n.prototype.encodeMaximal=function(e){for(var t=new bt,r=0,i=e.pos,a=0;e.hasMoreCharacters();){var s=e.getCurrentChar();e.pos++,r=this.encodeChar(s,t),t.length()%3===0&&(i=e.pos,a=t.length())}if(a!==t.length()){var o=Math.floor(t.length()/3*2),c=Math.floor(e.getCodewordCount()+o+1);e.updateSymbolInfo(c);var d=e.getSymbolInfo().getDataCapacity()-c,f=Math.floor(t.length()%3);(f===2&&d!==2||f===1&&(r>3||d!==1))&&(e.pos=i)}t.length()>0&&e.writeCodeword(N4),this.handleEOD(e,t)},n.prototype.encode=function(e){for(var t=new bt;e.hasMoreCharacters();){var r=e.getCurrentChar();e.pos++;var i=this.encodeChar(r,t),a=Math.floor(t.length()/3)*2,s=e.getCodewordCount()+a;e.updateSymbolInfo(s);var o=e.getSymbolInfo().getDataCapacity()-s;if(!e.hasMoreCharacters()){var c=new bt;for(t.length()%3===2&&o!==2&&(i=this.backtrackOneCharacter(e,t,c,i));t.length()%3===1&&(i>3||o!==1);)i=this.backtrackOneCharacter(e,t,c,i);break}var d=t.length();if(d%3===0){var f=La.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(f!==this.getEncodingMode()){e.signalEncoderChange(on);break}}}this.handleEOD(e,t)},n.prototype.backtrackOneCharacter=function(e,t,r,i){var a=t.length(),s=t.toString().substring(0,a-i);t.setLengthToZero(),t.append(s),e.pos--;var o=e.getCurrentChar();return i=this.encodeChar(o,r),e.resetSymbolInfo(),i},n.prototype.writeNextTriplet=function(e,t){e.writeCodewords(this.encodeToCodewords(t.toString()));var r=t.toString().substring(3);t.setLengthToZero(),t.append(r)},n.prototype.handleEOD=function(e,t){var r=Math.floor(t.length()/3*2),i=t.length()%3,a=e.getCodewordCount()+r;e.updateSymbolInfo(a);var s=e.getSymbolInfo().getDataCapacity()-a;if(i===2){for(t.append("\0");t.length()>=3;)this.writeNextTriplet(e,t);e.hasMoreCharacters()&&e.writeCodeword(Vx)}else if(s===1&&i===1){for(;t.length()>=3;)this.writeNextTriplet(e,t);e.hasMoreCharacters()&&e.writeCodeword(Vx),e.pos--}else if(i===0){for(;t.length()>=3;)this.writeNextTriplet(e,t);(s>0||e.hasMoreCharacters())&&e.writeCodeword(Vx)}else throw new Error("Unexpected case. Please report!");e.signalEncoderChange(on)},n.prototype.encodeChar=function(e,t){if(e===32)return t.append(3),1;if(e>=48&&e<=57)return t.append(e-48+4),1;if(e>=65&&e<=90)return t.append(e-65+14),1;if(e<32)return t.append(0),t.append(e),2;if(e<=47)return t.append(1),t.append(e-33),2;if(e<=64)return t.append(1),t.append(e-58+15),2;if(e<=95)return t.append(1),t.append(e-91+22),2;if(e<=127)return t.append(2),t.append(e-96),2;t.append("1");var r=2;return r+=this.encodeChar(e-128,t),r},n.prototype.encodeToCodewords=function(e){var t=1600*e.charCodeAt(0)+40*e.charCodeAt(1)+e.charCodeAt(2)+1,r=t/256,i=t%256,a=new bt;return a.append(r),a.append(i),a.toString()},n}(),Sz=function(){function n(){}return n.prototype.getEncodingMode=function(){return Lr},n.prototype.encode=function(e){for(var t=new bt;e.hasMoreCharacters();){var r=e.getCurrentChar();this.encodeChar(r,t),e.pos++;var i=t.length();if(i>=4){e.writeCodewords(this.encodeToCodewords(t.toString()));var a=t.toString().substring(4);t.setLengthToZero(),t.append(a);var s=La.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(s!==this.getEncodingMode()){e.signalEncoderChange(on);break}}}t.append(jt.getCharAt(31)),this.handleEOD(e,t)},n.prototype.handleEOD=function(e,t){try{var r=t.length();if(r===0)return;if(r===1){e.updateSymbolInfo();var i=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount(),a=e.getRemainingCharacters();if(a>i&&(e.updateSymbolInfo(e.getCodewordCount()+1),i=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount()),a<=i&&i<=2)return}if(r>4)throw new Error("Count must not exceed 4");var s=r-1,o=this.encodeToCodewords(t.toString()),c=!e.hasMoreCharacters(),d=c&&s<=2;if(s<=2){e.updateSymbolInfo(e.getCodewordCount()+s);var i=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount();i>=3&&(d=!1,e.updateSymbolInfo(e.getCodewordCount()+o.length))}d?(e.resetSymbolInfo(),e.pos-=s):e.writeCodewords(o)}finally{e.signalEncoderChange(on)}},n.prototype.encodeChar=function(e,t){e>=32&&e<=63?t.append(e):e>=64&&e<=94?t.append(jt.getCharAt(e-64)):La.illegalCharacter(jt.getCharAt(e))},n.prototype.encodeToCodewords=function(e){var t=e.length;if(t===0)throw new Error("StringBuilder must not be empty");var r=e.charAt(0).charCodeAt(0),i=t>=2?e.charAt(1).charCodeAt(0):0,a=t>=3?e.charAt(2).charCodeAt(0):0,s=t>=4?e.charAt(3).charCodeAt(0):0,o=(r<<18)+(i<<12)+(a<<6)+s,c=o>>16&255,d=o>>8&255,f=o&255,p=new bt;return p.append(c),t>=2&&p.append(d),t>=3&&p.append(f),p.toString()},n}(),Tz=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Cz=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Kt=function(){function n(e,t,r,i,a,s,o,c){o===void 0&&(o=0),c===void 0&&(c=0),this.rectangular=e,this.dataCapacity=t,this.errorCodewords=r,this.matrixWidth=i,this.matrixHeight=a,this.dataRegions=s,this.rsBlockData=o,this.rsBlockError=c}return n.lookup=function(e,t,r,i,a){var s,o;t===void 0&&(t=0),r===void 0&&(r=null),i===void 0&&(i=null),a===void 0&&(a=!0);try{for(var c=Cz(Dz),d=c.next();!d.done;d=c.next()){var f=d.value;if(!(t===1&&f.rectangular)&&!(t===2&&!f.rectangular)&&!(r!=null&&(f.getSymbolWidth()<r.getWidth()||f.getSymbolHeight()<r.getHeight()))&&!(i!=null&&(f.getSymbolWidth()>i.getWidth()||f.getSymbolHeight()>i.getHeight()))&&e<=f.dataCapacity)return f}}catch(p){s={error:p}}finally{try{d&&!d.done&&(o=c.return)&&o.call(c)}finally{if(s)throw s.error}}if(a)throw new Error("Can't find a symbol arrangement that matches the message. Data codewords: "+e);return null},n.prototype.getHorizontalDataRegions=function(){switch(this.dataRegions){case 1:return 1;case 2:case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},n.prototype.getVerticalDataRegions=function(){switch(this.dataRegions){case 1:case 2:return 1;case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},n.prototype.getSymbolDataWidth=function(){return this.getHorizontalDataRegions()*this.matrixWidth},n.prototype.getSymbolDataHeight=function(){return this.getVerticalDataRegions()*this.matrixHeight},n.prototype.getSymbolWidth=function(){return this.getSymbolDataWidth()+this.getHorizontalDataRegions()*2},n.prototype.getSymbolHeight=function(){return this.getSymbolDataHeight()+this.getVerticalDataRegions()*2},n.prototype.getCodewordCount=function(){return this.dataCapacity+this.errorCodewords},n.prototype.getInterleavedBlockCount=function(){return this.rsBlockData?this.dataCapacity/this.rsBlockData:1},n.prototype.getDataCapacity=function(){return this.dataCapacity},n.prototype.getErrorCodewords=function(){return this.errorCodewords},n.prototype.getDataLengthForInterleavedBlock=function(e){return this.rsBlockData},n.prototype.getErrorLengthForInterleavedBlock=function(e){return this.rsBlockError},n}(),Iz=function(n){Tz(e,n);function e(){return n.call(this,!1,1558,620,22,22,36,-1,62)||this}return e.prototype.getInterleavedBlockCount=function(){return 10},e.prototype.getDataLengthForInterleavedBlock=function(t){return t<=8?156:155},e}(Kt),Dz=[new Kt(!1,3,5,8,8,1),new Kt(!1,5,7,10,10,1),new Kt(!0,5,7,16,6,1),new Kt(!1,8,10,12,12,1),new Kt(!0,10,11,14,6,2),new Kt(!1,12,12,14,14,1),new Kt(!0,16,14,24,10,1),new Kt(!1,18,14,16,16,1),new Kt(!1,22,18,18,18,1),new Kt(!0,22,18,16,10,2),new Kt(!1,30,20,20,20,1),new Kt(!0,32,24,16,14,2),new Kt(!1,36,24,22,22,1),new Kt(!1,44,28,24,24,1),new Kt(!0,49,28,22,14,2),new Kt(!1,62,36,14,14,4),new Kt(!1,86,42,16,16,4),new Kt(!1,114,48,18,18,4),new Kt(!1,144,56,20,20,4),new Kt(!1,174,68,22,22,4),new Kt(!1,204,84,24,24,4,102,42),new Kt(!1,280,112,14,14,16,140,56),new Kt(!1,368,144,16,16,16,92,36),new Kt(!1,456,192,18,18,16,114,48),new Kt(!1,576,224,20,20,16,144,56),new Kt(!1,696,272,22,22,16,174,68),new Kt(!1,816,336,24,24,16,136,56),new Kt(!1,1050,408,18,18,36,175,68),new Kt(!1,1304,496,20,20,36,163,62),new Iz],Rz=function(){function n(e){this.msg=e,this.pos=0,this.skipAtEnd=0;for(var t=e.split("").map(function(o){return o.charCodeAt(0)}),r=new bt,i=0,a=t.length;i<a;i++){var s=String.fromCharCode(t[i]&255);if(s==="?"&&e.charAt(i)!=="?")throw new Error("Message contains characters outside ISO-8859-1 encoding.");r.append(s)}this.msg=r.toString(),this.shape=0,this.codewords=new bt,this.newEncoding=-1}return n.prototype.setSymbolShape=function(e){this.shape=e},n.prototype.setSizeConstraints=function(e,t){this.minSize=e,this.maxSize=t},n.prototype.getMessage=function(){return this.msg},n.prototype.setSkipAtEnd=function(e){this.skipAtEnd=e},n.prototype.getCurrentChar=function(){return this.msg.charCodeAt(this.pos)},n.prototype.getCurrent=function(){return this.msg.charCodeAt(this.pos)},n.prototype.getCodewords=function(){return this.codewords},n.prototype.writeCodewords=function(e){this.codewords.append(e)},n.prototype.writeCodeword=function(e){this.codewords.append(e)},n.prototype.getCodewordCount=function(){return this.codewords.length()},n.prototype.getNewEncoding=function(){return this.newEncoding},n.prototype.signalEncoderChange=function(e){this.newEncoding=e},n.prototype.resetEncoderSignal=function(){this.newEncoding=-1},n.prototype.hasMoreCharacters=function(){return this.pos<this.getTotalMessageCharCount()},n.prototype.getTotalMessageCharCount=function(){return this.msg.length-this.skipAtEnd},n.prototype.getRemainingCharacters=function(){return this.getTotalMessageCharCount()-this.pos},n.prototype.getSymbolInfo=function(){return this.symbolInfo},n.prototype.updateSymbolInfo=function(e){e===void 0&&(e=this.getCodewordCount()),(this.symbolInfo==null||e>this.symbolInfo.getDataCapacity())&&(this.symbolInfo=Kt.lookup(e,this.shape,this.minSize,this.maxSize,!0))},n.prototype.resetSymbolInfo=function(){this.symbolInfo=null},n}(),Mz=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Oz=function(n){Mz(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getEncodingMode=function(){return br},e.prototype.encode=function(t){for(var r=new bt;t.hasMoreCharacters();){var i=t.getCurrentChar();t.pos++,this.encodeChar(i,r);var a=r.length();if(a%3===0){this.writeNextTriplet(t,r);var s=La.lookAheadTest(t.getMessage(),t.pos,this.getEncodingMode());if(s!==this.getEncodingMode()){t.signalEncoderChange(on);break}}}this.handleEOD(t,r)},e.prototype.encodeChar=function(t,r){switch(t){case 13:r.append(0);break;case 42:r.append(1);break;case 62:r.append(2);break;case 32:r.append(3);break;default:t>=48&&t<=57?r.append(t-48+4):t>=65&&t<=90?r.append(t-65+14):La.illegalCharacter(jt.getCharAt(t));break}return 1},e.prototype.handleEOD=function(t,r){t.updateSymbolInfo();var i=t.getSymbolInfo().getDataCapacity()-t.getCodewordCount(),a=r.length();t.pos-=a,(t.getRemainingCharacters()>1||i>1||t.getRemainingCharacters()!==i)&&t.writeCodeword(bz),t.getNewEncoding()<0&&t.signalEncoderChange(on)},e}($_),Pz=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),kz=function(n){Pz(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getEncodingMode=function(){return Ei},e.prototype.encodeChar=function(t,r){if(t===32)return r.append(3),1;if(t>=48&&t<=57)return r.append(t-48+4),1;if(t>=97&&t<=122)return r.append(t-97+14),1;if(t<32)return r.append(0),r.append(t),2;if(t<=47)return r.append(1),r.append(t-33),2;if(t<=64)return r.append(1),r.append(t-58+15),2;if(t>=91&&t<=95)return r.append(1),r.append(t-91+22),2;if(t===96)return r.append(2),r.append(0),2;if(t<=90)return r.append(2),r.append(t-65+1),2;if(t<=127)return r.append(2),r.append(t-123+27),2;r.append("1");var i=2;return i+=this.encodeChar(t-128,r),i},e}($_),La=function(){function n(){}return n.randomize253State=function(e){var t=149*e%253+1,r=DI+t;return r<=254?r:r-254},n.encodeHighLevel=function(e,t,r,i,a){t===void 0&&(t=0),r===void 0&&(r=null),i===void 0&&(i=null),a===void 0&&(a=!1);var s=new $_,o=[new Az,s,new kz,new Oz,new Sz,new Ez],c=new Rz(e);c.setSymbolShape(t),c.setSizeConstraints(r,i),e.startsWith(RI)&&e.endsWith(OI)?(c.writeCodeword(yz),c.setSkipAtEnd(2),c.pos+=RI.length):e.startsWith(MI)&&e.endsWith(OI)&&(c.writeCodeword(vz),c.setSkipAtEnd(2),c.pos+=MI.length);var d=on;for(a&&(s.encodeMaximal(c),d=c.getNewEncoding(),c.resetEncoderSignal());c.hasMoreCharacters();)o[d].encode(c),c.getNewEncoding()>=0&&(d=c.getNewEncoding(),c.resetEncoderSignal());var f=c.getCodewordCount();c.updateSymbolInfo();var p=c.getSymbolInfo().getDataCapacity();f<p&&d!==on&&d!==oi&&d!==Lr&&c.writeCodeword("þ");var g=c.getCodewords();for(g.length()<p&&g.append(DI);g.length()<p;)g.append(this.randomize253State(g.length()+1));return c.getCodewords().toString()},n.lookAheadTest=function(e,t,r){var i=this.lookAheadTestIntern(e,t,r);if(r===br&&i===br){for(var a=Math.min(t+3,e.length),s=t;s<a;s++)if(!this.isNativeX12(e.charCodeAt(s)))return on}else if(r===Lr&&i===Lr){for(var a=Math.min(t+4,e.length),s=t;s<a;s++)if(!this.isNativeEDIFACT(e.charCodeAt(s)))return on}return i},n.lookAheadTestIntern=function(e,t,r){if(t>=e.length)return r;var i;r===on?i=[0,1,1,1,1,1.25]:(i=[1,2,2,2,2,2.25],i[r]=0);for(var a=0,s=new Uint8Array(6),o=[];;){if(t+a===e.length){Tr.fill(s,0),Tr.fill(o,0);var c=this.findMinimums(i,o,Tt.MAX_VALUE,s),d=this.getMinimumCount(s);if(o[on]===c)return on;if(d===1){if(s[oi]>0)return oi;if(s[Lr]>0)return Lr;if(s[Ei]>0)return Ei;if(s[br]>0)return br}return Kr}var f=e.charCodeAt(t+a);if(a++,this.isDigit(f)?i[on]+=.5:this.isExtendedASCII(f)?(i[on]=Math.ceil(i[on]),i[on]+=2):(i[on]=Math.ceil(i[on]),i[on]++),this.isNativeC40(f)?i[Kr]+=2/3:this.isExtendedASCII(f)?i[Kr]+=8/3:i[Kr]+=4/3,this.isNativeText(f)?i[Ei]+=2/3:this.isExtendedASCII(f)?i[Ei]+=8/3:i[Ei]+=4/3,this.isNativeX12(f)?i[br]+=2/3:this.isExtendedASCII(f)?i[br]+=13/3:i[br]+=10/3,this.isNativeEDIFACT(f)?i[Lr]+=3/4:this.isExtendedASCII(f)?i[Lr]+=17/4:i[Lr]+=13/4,this.isSpecialB256(f)?i[oi]+=4:i[oi]++,a>=4){if(Tr.fill(s,0),Tr.fill(o,0),this.findMinimums(i,o,Tt.MAX_VALUE,s),o[on]<this.min(o[oi],o[Kr],o[Ei],o[br],o[Lr]))return on;if(o[oi]<o[on]||o[oi]+1<this.min(o[Kr],o[Ei],o[br],o[Lr]))return oi;if(o[Lr]+1<this.min(o[oi],o[Kr],o[Ei],o[br],o[on]))return Lr;if(o[Ei]+1<this.min(o[oi],o[Kr],o[Lr],o[br],o[on]))return Ei;if(o[br]+1<this.min(o[oi],o[Kr],o[Lr],o[Ei],o[on]))return br;if(o[Kr]+1<this.min(o[on],o[oi],o[Lr],o[Ei])){if(o[Kr]<o[br])return Kr;if(o[Kr]===o[br]){for(var p=t+a+1;p<e.length;){var g=e.charCodeAt(p);if(this.isX12TermSep(g))return br;if(!this.isNativeX12(g))break;p++}return Kr}}}}},n.min=function(e,t,r,i,a){var s=Math.min(e,Math.min(t,Math.min(r,i)));return a===void 0?s:Math.min(s,a)},n.findMinimums=function(e,t,r,i){for(var a=0;a<6;a++){var s=t[a]=Math.ceil(e[a]);r>s&&(r=s,Tr.fill(i,0)),r===s&&(i[a]=i[a]+1)}return r},n.getMinimumCount=function(e){for(var t=0,r=0;r<6;r++)t+=e[r];return t||0},n.isDigit=function(e){return e>=48&&e<=57},n.isExtendedASCII=function(e){return e>=128&&e<=255},n.isNativeC40=function(e){return e===32||e>=48&&e<=57||e>=65&&e<=90},n.isNativeText=function(e){return e===32||e>=48&&e<=57||e>=97&&e<=122},n.isNativeX12=function(e){return this.isX12TermSep(e)||e===32||e>=48&&e<=57||e>=65&&e<=90},n.isX12TermSep=function(e){return e===13||e===42||e===62},n.isNativeEDIFACT=function(e){return e>=32&&e<=94},n.isSpecialB256=function(e){return!1},n.determineConsecutiveDigitCount=function(e,t){t===void 0&&(t=0);for(var r=e.length,i=t;i<r&&this.isDigit(e.charCodeAt(i));)i++;return i-t},n.illegalCharacter=function(e){var t=Tt.toHexString(e.charCodeAt(0));throw t="0000".substring(0,4-t.length)+t,new Error("Illegal character: "+e+" (0x"+t+")")},n}(),Fx=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},PI=function(){function n(e){this.charset=e,this.name=e.name}return n.prototype.canEncode=function(e){try{return xa.encode(e,this.charset)!=null}catch{return!1}},n}(),Nz=function(){function n(e,t,r){var i,a,s,o,c,d;this.ENCODERS=["IBM437","ISO-8859-2","ISO-8859-3","ISO-8859-4","ISO-8859-5","ISO-8859-6","ISO-8859-7","ISO-8859-8","ISO-8859-9","ISO-8859-10","ISO-8859-11","ISO-8859-13","ISO-8859-14","ISO-8859-15","ISO-8859-16","windows-1250","windows-1251","windows-1252","windows-1256","Shift_JIS"].map(function(I){return new PI(dz.forName(I))}),this.encoders=[];var f=[];f.push(new PI(fz.ISO_8859_1));for(var p=t!=null&&t.name.startsWith("UTF"),g=0;g<e.length;g++){var y=!1;try{for(var v=(i=void 0,Fx(f)),b=v.next();!b.done;b=v.next()){var A=b.value,E=e.charAt(g),T=E.charCodeAt(0);if(T===r||A.canEncode(E)){y=!0;break}}}catch(I){i={error:I}}finally{try{b&&!b.done&&(a=v.return)&&a.call(v)}finally{if(i)throw i.error}}if(!y)try{for(var C=(s=void 0,Fx(this.ENCODERS)),D=C.next();!D.done;D=C.next()){var A=D.value;if(A.canEncode(e.charAt(g))){f.push(A),y=!0;break}}}catch(I){s={error:I}}finally{try{D&&!D.done&&(o=C.return)&&o.call(C)}finally{if(s)throw s.error}}y||(p=!0)}if(f.length===1&&!p)this.encoders=[f[0]];else{this.encoders=[];var O=0;try{for(var N=Fx(f),M=N.next();!M.done;M=N.next()){var A=M.value;this.encoders[O++]=A}}catch(I){c={error:I}}finally{try{M&&!M.done&&(d=N.return)&&d.call(N)}finally{if(c)throw c.error}}}var R=-1;if(t!=null){for(var g=0;g<this.encoders.length;g++)if(this.encoders[g]!=null&&t.name===this.encoders[g].name){R=g;break}}this.priorityEncoderIndex=R}return n.prototype.length=function(){return this.encoders.length},n.prototype.getCharsetName=function(e){if(!(e<this.length()))throw new Error("index must be less than length");return this.encoders[e].name},n.prototype.getCharset=function(e){if(!(e<this.length()))throw new Error("index must be less than length");return this.encoders[e].charset},n.prototype.getECIValue=function(e){return this.encoders[e].charset.getValueIdentifier()},n.prototype.getPriorityEncoderIndex=function(){return this.priorityEncoderIndex},n.prototype.canEncode=function(e,t){if(!(t<this.length()))throw new Error("index must be less than length");return!0},n.prototype.encode=function(e,t){if(!(t<this.length()))throw new Error("index must be less than length");return xa.encode(jt.getCharAt(e),this.encoders[t].name)},n}(),Lz=3,Bz=function(){function n(e,t,r){this.fnc1=r;var i=new Nz(e,t,r);if(i.length()===1)for(var a=0;a<this.bytes.length;a++){var s=e.charAt(a).charCodeAt(0);this.bytes[a]=s===r?1e3:s}else this.bytes=this.encodeMinimally(e,i,r)}return n.prototype.getFNC1Character=function(){return this.fnc1},n.prototype.length=function(){return this.bytes.length},n.prototype.haveNCharacters=function(e,t){if(e+t-1>=this.bytes.length)return!1;for(var r=0;r<t;r++)if(this.isECI(e+r))return!1;return!0},n.prototype.charAt=function(e){if(e<0||e>=this.length())throw new Error(""+e);if(this.isECI(e))throw new Error("value at "+e+" is not a character but an ECI");return this.isFNC1(e)?this.fnc1:this.bytes[e]},n.prototype.subSequence=function(e,t){if(e<0||e>t||t>this.length())throw new Error(""+e);for(var r=new bt,i=e;i<t;i++){if(this.isECI(i))throw new Error("value at "+i+" is not a character but an ECI");r.append(this.charAt(i))}return r.toString()},n.prototype.isECI=function(e){if(e<0||e>=this.length())throw new Error(""+e);return this.bytes[e]>255&&this.bytes[e]<=999},n.prototype.isFNC1=function(e){if(e<0||e>=this.length())throw new Error(""+e);return this.bytes[e]===1e3},n.prototype.getECIValue=function(e){if(e<0||e>=this.length())throw new Error(""+e);if(!this.isECI(e))throw new Error("value at "+e+" is not an ECI but a character");return this.bytes[e]-256},n.prototype.addEdge=function(e,t,r){(e[t][r.encoderIndex]==null||e[t][r.encoderIndex].cachedTotalSize>r.cachedTotalSize)&&(e[t][r.encoderIndex]=r)},n.prototype.addEdges=function(e,t,r,i,a,s){var o=e.charAt(i).charCodeAt(0),c=0,d=t.length();t.getPriorityEncoderIndex()>=0&&(o===s||t.canEncode(o,t.getPriorityEncoderIndex()))&&(c=t.getPriorityEncoderIndex(),d=c+1);for(var f=c;f<d;f++)(o===s||t.canEncode(o,f))&&this.addEdge(r,i+1,new kI(o,t,f,a,s))},n.prototype.encodeMinimally=function(e,t,r){var i=e.length,a=new kI[i+1][t.length()];this.addEdges(e,t,a,0,null,r);for(var s=1;s<=i;s++){for(var o=0;o<t.length();o++)a[s][o]!=null&&s<i&&this.addEdges(e,t,a,s,a[s][o],r);for(var o=0;o<t.length();o++)a[s-1][o]=null}for(var c=-1,d=Tt.MAX_VALUE,o=0;o<t.length();o++)if(a[i][o]!=null){var f=a[i][o];f.cachedTotalSize<d&&(d=f.cachedTotalSize,c=o)}if(c<0)throw new Error('Failed to encode "'+e+'"');for(var p=[],g=a[i][c];g!=null;){if(g.isFNC1())p.unshift(1e3);else for(var y=t.encode(g.c,g.encoderIndex),s=y.length-1;s>=0;s--)p.unshift(y[s]&255);var v=g.previous===null?0:g.previous.encoderIndex;v!==g.encoderIndex&&p.unshift(256+t.getECIValue(g.encoderIndex)),g=g.previous}for(var b=[],s=0;s<b.length;s++)b[s]=p[s];return b},n}(),kI=function(){function n(e,t,r,i,a){this.c=e,this.encoderSet=t,this.encoderIndex=r,this.previous=i,this.fnc1=a,this.c=e===a?1e3:e;var s=this.isFNC1()?1:t.encode(e,r).length,o=i===null?0:i.encoderIndex;o!==r&&(s+=Lz),i!=null&&(s+=i.cachedTotalSize),this.cachedTotalSize=s}return n.prototype.isFNC1=function(){return this.c===1e3},n}(),Vz=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();var NI;(function(n){n[n.ASCII=0]="ASCII",n[n.C40=1]="C40",n[n.TEXT=2]="TEXT",n[n.X12=3]="X12",n[n.EDF=4]="EDF",n[n.B256=5]="B256"})(NI||(NI={}));(function(n){Vz(e,n);function e(t,r,i,a,s){var o=n.call(this,t,r,i)||this;return o.shape=a,o.macroId=s,o}return e.prototype.getMacroId=function(){return this.macroId},e.prototype.getShapeHint=function(){return this.shape},e})(Bz);var Fz=function(){function n(){}return n.prototype.isCompact=function(){return this.compact},n.prototype.setCompact=function(e){this.compact=e},n.prototype.getSize=function(){return this.size},n.prototype.setSize=function(e){this.size=e},n.prototype.getLayers=function(){return this.layers},n.prototype.setLayers=function(e){this.layers=e},n.prototype.getCodeWords=function(){return this.codeWords},n.prototype.setCodeWords=function(e){this.codeWords=e},n.prototype.getMatrix=function(){return this.matrix},n.prototype.setMatrix=function(e){this.matrix=e},n}(),LI=function(){function n(){}return n.singletonList=function(e){return[e]},n.min=function(e,t){return e.sort(t)[0]},n}(),jz=function(){function n(e){this.previous=e}return n.prototype.getPrevious=function(){return this.previous},n}(),Uz=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),G_=function(n){Uz(e,n);function e(t,r,i){var a=n.call(this,t)||this;return a.value=r,a.bitCount=i,a}return e.prototype.appendTo=function(t,r){t.appendBits(this.value,this.bitCount)},e.prototype.add=function(t,r){return new e(this,t,r)},e.prototype.addBinaryShift=function(t,r){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new e(this,t,r)},e.prototype.toString=function(){var t=this.value&(1<<this.bitCount)-1;return t|=1<<this.bitCount,"<"+Tt.toBinaryString(t|1<<this.bitCount).substring(1)+">"},e}(jz),Hz=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),zz=function(n){Hz(e,n);function e(t,r,i){var a=n.call(this,t,0,0)||this;return a.binaryShiftStart=r,a.binaryShiftByteCount=i,a}return e.prototype.appendTo=function(t,r){for(var i=0;i<this.binaryShiftByteCount;i++)(i===0||i===31&&this.binaryShiftByteCount<=62)&&(t.appendBits(31,5),this.binaryShiftByteCount>62?t.appendBits(this.binaryShiftByteCount-31,16):i===0?t.appendBits(Math.min(this.binaryShiftByteCount,31),5):t.appendBits(this.binaryShiftByteCount-31,5)),t.appendBits(r[this.binaryShiftStart+i],8)},e.prototype.addBinaryShift=function(t,r){return new e(this,t,r)},e.prototype.toString=function(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"},e}(G_);function $z(n,e,t){return new zz(n,e,t)}function _h(n,e,t){return new G_(n,e,t)}var Gz=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],Tl=0,V1=1,ma=2,L4=3,ys=4,Wz=new G_(null,0,0),jx=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])],Yz=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};function qz(n){var e,t;try{for(var r=Yz(n),i=r.next();!i.done;i=r.next()){var a=i.value;Tr.fill(a,-1)}}catch(s){e={error:s}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}return n[Tl][ys]=0,n[V1][ys]=0,n[V1][Tl]=28,n[L4][ys]=0,n[ma][ys]=0,n[ma][Tl]=15,n}var B4=qz(Tr.createInt32Array(6,6)),Xz=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Kz=function(){function n(e,t,r,i){this.token=e,this.mode=t,this.binaryShiftByteCount=r,this.bitCount=i}return n.prototype.getMode=function(){return this.mode},n.prototype.getToken=function(){return this.token},n.prototype.getBinaryShiftByteCount=function(){return this.binaryShiftByteCount},n.prototype.getBitCount=function(){return this.bitCount},n.prototype.latchAndAppend=function(e,t){var r=this.bitCount,i=this.token;if(e!==this.mode){var a=jx[this.mode][e];i=_h(i,a&65535,a>>16),r+=a>>16}var s=e===ma?4:5;return i=_h(i,t,s),new n(i,e,0,r+s)},n.prototype.shiftAndAppend=function(e,t){var r=this.token,i=this.mode===ma?4:5;return r=_h(r,B4[this.mode][e],i),r=_h(r,t,5),new n(r,this.mode,0,this.bitCount+i+5)},n.prototype.addBinaryShiftChar=function(e){var t=this.token,r=this.mode,i=this.bitCount;if(this.mode===ys||this.mode===ma){var a=jx[r][Tl];t=_h(t,a&65535,a>>16),i+=a>>16,r=Tl}var s=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,o=new n(t,r,this.binaryShiftByteCount+1,i+s);return o.binaryShiftByteCount===2078&&(o=o.endBinaryShift(e+1)),o},n.prototype.endBinaryShift=function(e){if(this.binaryShiftByteCount===0)return this;var t=this.token;return t=$z(t,e-this.binaryShiftByteCount,this.binaryShiftByteCount),new n(t,this.mode,0,this.bitCount)},n.prototype.isBetterThanOrEqualTo=function(e){var t=this.bitCount+(jx[this.mode][e.mode]>>16);return this.binaryShiftByteCount<e.binaryShiftByteCount?t+=n.calculateBinaryShiftCost(e)-n.calculateBinaryShiftCost(this):this.binaryShiftByteCount>e.binaryShiftByteCount&&e.binaryShiftByteCount>0&&(t+=10),t<=e.bitCount},n.prototype.toBitArray=function(e){for(var t,r,i=[],a=this.endBinaryShift(e.length).token;a!==null;a=a.getPrevious())i.unshift(a);var s=new jr;try{for(var o=Xz(i),c=o.next();!c.done;c=o.next()){var d=c.value;d.appendTo(s,e)}}catch(f){t={error:f}}finally{try{c&&!c.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}return s},n.prototype.toString=function(){return jt.format("%s bits=%d bytes=%d",Gz[this.mode],this.bitCount,this.binaryShiftByteCount)},n.calculateBinaryShiftCost=function(e){return e.binaryShiftByteCount>62?21:e.binaryShiftByteCount>31?20:e.binaryShiftByteCount>0?10:0},n.INITIAL_STATE=new n(Wz,Tl,0,0),n}();function Qz(n){var e=jt.getCharCode(" "),t=jt.getCharCode("."),r=jt.getCharCode(",");n[Tl][e]=1;for(var i=jt.getCharCode("Z"),a=jt.getCharCode("A"),s=a;s<=i;s++)n[Tl][s]=s-a+2;n[V1][e]=1;for(var o=jt.getCharCode("z"),c=jt.getCharCode("a"),s=c;s<=o;s++)n[V1][s]=s-c+2;n[ma][e]=1;for(var d=jt.getCharCode("9"),f=jt.getCharCode("0"),s=f;s<=d;s++)n[ma][s]=s-f+2;n[ma][r]=12,n[ma][t]=13;for(var p=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""],g=0;g<p.length;g++)n[L4][jt.getCharCode(p[g])]=g;for(var y=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"],g=0;g<y.length;g++)jt.getCharCode(y[g])>0&&(n[ys][jt.getCharCode(y[g])]=g);return n}var Ux=Qz(Tr.createInt32Array(5,256)),Ng=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Zz=function(){function n(e){this.text=e}return n.prototype.encode=function(){for(var e=jt.getCharCode(" "),t=jt.getCharCode(`
`),r=LI.singletonList(Kz.INITIAL_STATE),i=0;i<this.text.length;i++){var a=void 0,s=i+1<this.text.length?this.text[i+1]:0;switch(this.text[i]){case jt.getCharCode("\r"):a=s===t?2:0;break;case jt.getCharCode("."):a=s===e?3:0;break;case jt.getCharCode(","):a=s===e?4:0;break;case jt.getCharCode(":"):a=s===e?5:0;break;default:a=0}a>0?(r=n.updateStateListForPair(r,i,a),i++):r=this.updateStateListForChar(r,i)}var o=LI.min(r,function(c,d){return c.getBitCount()-d.getBitCount()});return o.toBitArray(this.text)},n.prototype.updateStateListForChar=function(e,t){var r,i,a=[];try{for(var s=Ng(e),o=s.next();!o.done;o=s.next()){var c=o.value;this.updateStateForChar(c,t,a)}}catch(d){r={error:d}}finally{try{o&&!o.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}return n.simplifyStates(a)},n.prototype.updateStateForChar=function(e,t,r){for(var i=this.text[t]&255,a=Ux[e.getMode()][i]>0,s=null,o=0;o<=ys;o++){var c=Ux[o][i];if(c>0){if(s==null&&(s=e.endBinaryShift(t)),!a||o===e.getMode()||o===ma){var d=s.latchAndAppend(o,c);r.push(d)}if(!a&&B4[e.getMode()][o]>=0){var f=s.shiftAndAppend(o,c);r.push(f)}}}if(e.getBinaryShiftByteCount()>0||Ux[e.getMode()][i]===0){var p=e.addBinaryShiftChar(t);r.push(p)}},n.updateStateListForPair=function(e,t,r){var i,a,s=[];try{for(var o=Ng(e),c=o.next();!c.done;c=o.next()){var d=c.value;this.updateStateForPair(d,t,r,s)}}catch(f){i={error:f}}finally{try{c&&!c.done&&(a=o.return)&&a.call(o)}finally{if(i)throw i.error}}return this.simplifyStates(s)},n.updateStateForPair=function(e,t,r,i){var a=e.endBinaryShift(t);if(i.push(a.latchAndAppend(ys,r)),e.getMode()!==ys&&i.push(a.shiftAndAppend(ys,r)),r===3||r===4){var s=a.latchAndAppend(ma,16-r).latchAndAppend(ma,1);i.push(s)}if(e.getBinaryShiftByteCount()>0){var o=e.addBinaryShiftChar(t).addBinaryShiftChar(t+1);i.push(o)}},n.simplifyStates=function(e){var t,r,i,a,s=[];try{for(var o=Ng(e),c=o.next();!c.done;c=o.next()){var d=c.value,f=!0,p=function(A){if(A.isBetterThanOrEqualTo(d))return f=!1,"break";d.isBetterThanOrEqualTo(A)&&(s=s.filter(function(E){return E!==A}))};try{for(var g=(i=void 0,Ng(s)),y=g.next();!y.done;y=g.next()){var v=y.value,b=p(v);if(b==="break")break}}catch(A){i={error:A}}finally{try{y&&!y.done&&(a=g.return)&&a.call(g)}finally{if(i)throw i.error}}f&&s.push(d)}}catch(A){t={error:A}}finally{try{c&&!c.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}return s},n}(),Jz=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};(function(){function n(){}return n.encodeBytes=function(e){return n.encode(e,n.DEFAULT_EC_PERCENT,n.DEFAULT_AZTEC_LAYERS)},n.encode=function(e,t,r){var i=new Zz(e).encode(),a=Tt.truncDivision(i.getSize()*t,100)+11,s=i.getSize()+a,o,c,d,f,p;if(r!==n.DEFAULT_AZTEC_LAYERS){if(o=r<0,c=Math.abs(r),c>(o?n.MAX_NB_BITS_COMPACT:n.MAX_NB_BITS))throw new nt(jt.format("Illegal value %s for layers",r));d=n.totalBitsInLayer(c,o),f=n.WORD_SIZE[c];var g=d-d%f;if(p=n.stuffBits(i,f),p.getSize()+a>g)throw new nt("Data to large for user specified layer");if(o&&p.getSize()>f*64)throw new nt("Data to large for user specified layer")}else{f=0,p=null;for(var y=0;;y++){if(y>n.MAX_NB_BITS)throw new nt("Data too large for an Aztec code");if(o=y<=3,c=o?y+1:y,d=n.totalBitsInLayer(c,o),!(s>d)){(p==null||f!==n.WORD_SIZE[c])&&(f=n.WORD_SIZE[c],p=n.stuffBits(i,f));var g=d-d%f;if(!(o&&p.getSize()>f*64)&&p.getSize()+a<=g)break}}}var v=n.generateCheckWords(p,d,f),b=p.getSize()/f,A=n.generateModeMessage(o,c,b),E=(o?11:14)+c*4,T=new Int32Array(E),C;if(o){C=E;for(var y=0;y<T.length;y++)T[y]=y}else{C=E+1+2*Tt.truncDivision(Tt.truncDivision(E,2)-1,15);for(var D=Tt.truncDivision(E,2),O=Tt.truncDivision(C,2),y=0;y<D;y++){var N=y+Tt.truncDivision(y,15);T[D-y-1]=O-N-1,T[D+y]=O+N+1}}for(var M=new Ds(C),y=0,R=0;y<c;y++){for(var I=(c-y)*4+(o?9:12),B=0;B<I;B++)for(var L=B*2,k=0;k<2;k++)v.get(R+L+k)&&M.set(T[y*2+k],T[y*2+B]),v.get(R+I*2+L+k)&&M.set(T[y*2+B],T[E-1-y*2-k]),v.get(R+I*4+L+k)&&M.set(T[E-1-y*2-k],T[E-1-y*2-B]),v.get(R+I*6+L+k)&&M.set(T[E-1-y*2-B],T[y*2+k]);R+=I*8}if(n.drawModeMessage(M,o,C,A),o)n.drawBullsEye(M,Tt.truncDivision(C,2),5);else{n.drawBullsEye(M,Tt.truncDivision(C,2),7);for(var y=0,B=0;y<Tt.truncDivision(E,2)-1;y+=15,B+=16)for(var k=Tt.truncDivision(C,2)&1;k<C;k+=2)M.set(Tt.truncDivision(C,2)-B,k),M.set(Tt.truncDivision(C,2)+B,k),M.set(k,Tt.truncDivision(C,2)-B),M.set(k,Tt.truncDivision(C,2)+B)}var F=new Fz;return F.setCompact(o),F.setSize(C),F.setLayers(c),F.setCodeWords(b),F.setMatrix(M),F},n.drawBullsEye=function(e,t,r){for(var i=0;i<r;i+=2)for(var a=t-i;a<=t+i;a++)e.set(a,t-i),e.set(a,t+i),e.set(t-i,a),e.set(t+i,a);e.set(t-r,t-r),e.set(t-r+1,t-r),e.set(t-r,t-r+1),e.set(t+r,t-r),e.set(t+r,t-r+1),e.set(t+r,t+r-1)},n.generateModeMessage=function(e,t,r){var i=new jr;return e?(i.appendBits(t-1,2),i.appendBits(r-1,6),i=n.generateCheckWords(i,28,4)):(i.appendBits(t-1,5),i.appendBits(r-1,11),i=n.generateCheckWords(i,40,4)),i},n.drawModeMessage=function(e,t,r,i){var a=Tt.truncDivision(r,2);if(t)for(var s=0;s<7;s++){var o=a-3+s;i.get(s)&&e.set(o,a-5),i.get(s+7)&&e.set(a+5,o),i.get(20-s)&&e.set(o,a+5),i.get(27-s)&&e.set(a-5,o)}else for(var s=0;s<10;s++){var o=a-5+s+Tt.truncDivision(s,5);i.get(s)&&e.set(o,a-7),i.get(s+10)&&e.set(a+7,o),i.get(29-s)&&e.set(o,a+7),i.get(39-s)&&e.set(a-7,o)}},n.generateCheckWords=function(e,t,r){var i,a,s=e.getSize()/r,o=new k4(n.getGF(r)),c=Tt.truncDivision(t,r),d=n.bitsToWords(e,r,c);o.encode(d,c-s);var f=t%r,p=new jr;p.appendBits(0,f);try{for(var g=Jz(Array.from(d)),y=g.next();!y.done;y=g.next()){var v=y.value;p.appendBits(v,r)}}catch(b){i={error:b}}finally{try{y&&!y.done&&(a=g.return)&&a.call(g)}finally{if(i)throw i.error}}return p},n.bitsToWords=function(e,t,r){var i=new Int32Array(r),a,s;for(a=0,s=e.getSize()/t;a<s;a++){for(var o=0,c=0;c<t;c++)o|=e.get(a*t+c)?1<<t-c-1:0;i[a]=o}return i},n.getGF=function(e){switch(e){case 4:return ki.AZTEC_PARAM;case 6:return ki.AZTEC_DATA_6;case 8:return ki.AZTEC_DATA_8;case 10:return ki.AZTEC_DATA_10;case 12:return ki.AZTEC_DATA_12;default:throw new nt("Unsupported word size "+e)}},n.stuffBits=function(e,t){for(var r=new jr,i=e.getSize(),a=(1<<t)-2,s=0;s<i;s+=t){for(var o=0,c=0;c<t;c++)(s+c>=i||e.get(s+c))&&(o|=1<<t-1-c);(o&a)===a?(r.appendBits(o&a,t),s--):(o&a)===0?(r.appendBits(o|1,t),s--):r.appendBits(o,t)}return r},n.totalBitsInLayer=function(e,t){return((t?88:112)+16*e)*e},n.DEFAULT_EC_PERCENT=33,n.DEFAULT_AZTEC_LAYERS=0,n.MAX_NB_BITS=32,n.MAX_NB_BITS_COMPACT=4,n.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]),n})();const e$=({onDetected:n,onError:e})=>{const t=V.useRef(null),r=V.useRef(new tz),i=V.useRef(!1);return V.useEffect(()=>{const a=t.current;let s;const o=()=>{a.play().catch(f=>console.error("play() failed:",f))},c=()=>{a.videoWidth===0||a.videoHeight===0||i.current||(i.current=!0,r.current.decodeFromStream(s,a,(f,p)=>{f&&(r.current.reset(),n(f.getText())),p&&!(p instanceof xe)&&(r.current.reset(),e(p.message||"スキャナーでエラーが発生しました。"))}))};return(async()=>{if(a)try{s=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment",aspectRatio:.5}}),a.srcObject=s,a.muted=!0,a.addEventListener("loadedmetadata",o),a.addEventListener("playing",c)}catch(f){const p=`カメラの起動に失敗しました。ブラウザや端末のカメラ権限設定を確認し、許可されているかご確認ください。
詳細: ${f&&f.message?f.message:""}`;console.log("[BarcodeScanner] onError呼び出し",p),e(p)}})(),()=>{if(r.current.reset(),i.current=!1,a){a.removeEventListener("loadedmetadata",o),a.removeEventListener("playing",c);const f=a.srcObject;f&&f.getTracks().forEach(g=>g.stop()),a.srcObject=null}}},[n,e]),x.jsx(de,{"data-testid":"barcode-scanner-container",children:x.jsx("video",{ref:t,style:{width:"100%",height:"auto",border:"1px solid gray"},autoPlay:!0,muted:!0,playsInline:!0,"data-testid":"barcode-scanner-video"})})},t$={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"90%",maxWidth:400,bgcolor:"background.paper",border:"2px solid #000",boxShadow:24,p:4},n$=({onScan:n,onScanError:e})=>{const[t,r]=V.useState(!1),{setGlobalError:i}=V.useContext(pi)||{setGlobalError:()=>{}},a=o=>{n(o),r(!1)},s=o=>{i(o),r(!1)};return x.jsxs(x.Fragment,{children:[x.jsx(st,{variant:"outlined",startIcon:x.jsx(eN,{}),onClick:()=>r(!0),sx:{mt:2,mb:2},fullWidth:!0,"data-testid":"barcode-scan-button",children:"バーコードスキャン"}),x.jsx(tN,{open:t,onClose:()=>r(!1),"aria-labelledby":"scanner-modal-title","data-testid":"barcode-scan-modal",children:x.jsxs(de,{sx:t$,children:[x.jsxs(de,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[x.jsx(se,{id:"scanner-modal-title",variant:"h6",component:"h2",children:"バーコードスキャン"}),x.jsx(Jr,{onClick:()=>r(!1),children:x.jsx(se,{variant:"h6",children:"×"})})]}),x.jsx(e$,{onDetected:a,onError:s,"data-testid":"barcode-scanner"})]})})]})};function r$(){const[n,e]=V.useState(""),t=S0(),r=a=>{console.log("[BookAdd] handleScanDetected スキャン結果:",a),e(a)},i=a=>{t(`/book/${a}`)};return x.jsxs(de,{sx:{maxWidth:500,mx:"auto",pb:{xs:"72px",sm:"80px"}},children:[x.jsx(zm,{title:"本を追加",subtitle:"新しい本をライブラリに追加","data-testid":"book-add-header"}),x.jsxs(de,{sx:{px:{xs:1.5,sm:2,md:0}},children:[x.jsx(n$,{onScan:r,onScanError:a=>console.error(a)}),x.jsx(pj,{isbn:n,onBookAdded:i})]})]})}const fl={NONE:0,ONE:1,TWO:2,THREE:3,FOUR:4,FIVE:5},Ba=fl.NONE,i$=n=>n!=null&&n>fl.NONE,Hh=n=>(n==null?void 0:n.rating)||Ba,BI=n=>i$(n)?n:0,F1=n=>{const e={[fl.NONE]:"ランク未設定",[fl.ONE]:"あまり面白くなかった",[fl.TWO]:"普通",[fl.THREE]:"まあまあ面白かった",[fl.FOUR]:"面白かった",[fl.FIVE]:"とても面白かった"};return e[n]||e[Ba]},W_=n=>{const{user:e}=gr(),t=V.useContext(pi),r=(t==null?void 0:t.setGlobalError)||(()=>{}),[i,a]=V.useState([]),[s,o]=V.useState(!0),[c,d]=V.useState(null),f=V.useCallback(async()=>{if(!e||!n){a([]),o(!1);return}try{o(!0),d(null);const v=Fr(Pt,"books",n,"memos"),b=zn(v,h0("createdAt","desc")),T=(await ur(b)).docs.map(C=>({id:C.id,...C.data(),rating:C.data().rating||Ba})).sort((C,D)=>{var M,R,I,B;const O=BI(C.rating),N=BI(D.rating);return O!==N?N-O:new Date(((R=(M=D.createdAt)==null?void 0:M.toDate)==null?void 0:R.call(M))||D.createdAt||0)-new Date(((B=(I=C.createdAt)==null?void 0:I.toDate)==null?void 0:B.call(I))||C.createdAt||0)});a(T)}catch(v){console.error("Error fetching memos:",v),r("メモ一覧の取得に失敗しました。"),d("メモ一覧の取得に失敗しました。")}finally{o(!1)}},[e==null?void 0:e.uid,n]),p=V.useCallback(async v=>{if(!e||!n)throw new Error("ユーザーまたは書籍IDが無効です。");try{const b=Fr(Pt,"books",n,"memos"),A=await k1(b,{...v,userId:e.uid,createdAt:Yi(),updatedAt:Yi()}),E={id:A.id,...v,userId:e.uid,createdAt:new Date,updatedAt:new Date};return a(T=>[E,...T]),A.id}catch(b){throw console.error("Error adding memo:",b),r("メモの追加に失敗しました。"),b}},[e==null?void 0:e.uid,n]),g=V.useCallback(async(v,b)=>{if(!e||!n||!v)throw new Error("ユーザー・書籍ID・メモIDが無効です。");try{const A=xo(Pt,"books",n,"memos",v);return await Hm(A,{...b,userId:e.uid,updatedAt:Yi()}),a(E=>E.map(C=>C.id===v?{...C,...b,userId:e.uid,updatedAt:new Date}:C)),!0}catch(A){throw console.error("Error updating memo:",A),r("メモの更新に失敗しました。"),A}},[e==null?void 0:e.uid,n]),y=V.useCallback(async v=>{if(!e||!n||!v)throw new Error("ユーザー・書籍ID・メモIDが無効です。");try{const b=xo(Pt,"books",n,"memos",v);return await QF(b),a(A=>A.filter(E=>E.id!==v)),!0}catch(b){throw console.error("Error deleting memo:",b),r("メモの削除に失敗しました。"),b}},[e==null?void 0:e.uid,n]);return V.useEffect(()=>{f()},[f]),{memos:i,loading:s,error:c,fetchMemos:f,addMemo:p,updateMemo:g,deleteMemo:y}},VI=n=>{try{const e=n&&typeof n.toDate=="function"?n.toDate():n instanceof Date?n:null;if(!e)return"";const t=e.getFullYear(),r=e.getMonth()+1,i=e.getDate();return`${t}/${r}/${i}`}catch{return""}},a$=({memo:n,onEdit:e,onDelete:t,onClick:r})=>{const i=ym("(max-width:600px)"),[a,s]=V.useState(!1),d=(n.text?n.text.split(`
`):[]).slice(0,2).join(`
`),f=n.createdAt&&n.createdAt.toDate?n.createdAt.toDate():null,p=v=>{v&&v.stopPropagation(),s(!1),typeof e=="function"&&e(n,!0)},g=v=>{v&&v.stopPropagation(),s(!1),t(n.id)},y=K3({onSwipedLeft:()=>s(!0),onSwipedRight:()=>s(!1),preventDefaultTouchmoveEvent:!0,trackMouse:!0});return i?x.jsxs(de,{position:"relative",...y,sx:{mb:2},children:[x.jsxs(jn,{"data-testid":"memo-card",sx:{position:"relative",maxWidth:"100%",mx:"auto",cursor:r?"pointer":"default",bgcolor:"background.paper",transition:"transform 0.2s",transform:a?"translateX(-100px)":"none"},onClick:r?()=>r(n,!1):void 0,children:[x.jsxs(Un,{sx:{pb:.5,minHeight:48,maxHeight:80,overflow:"hidden"},children:[x.jsx(se,{variant:"body1",sx:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",lineHeight:1.2},children:d}),n.comment&&x.jsx(se,{variant:"body2",color:"text.secondary",sx:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",lineHeight:1.2,mt:.25},children:n.comment}),Hh(n)>0&&x.jsx(kd,{value:Hh(n),readOnly:!0,size:"small",sx:{mt:.25,mb:.25}})]}),x.jsx(pT,{sx:{justifyContent:"space-between",alignItems:"center",py:0},children:x.jsxs(t0,{direction:"row",spacing:1,alignItems:"center",children:[n.page&&x.jsxs(se,{variant:"caption",children:["p.",n.page]}),f&&x.jsx(se,{variant:"caption",color:"text.secondary",children:VI(f)}),Array.isArray(n.tags)&&n.tags.map((v,b)=>x.jsx(In,{label:v,size:"small",color:"secondary"},b))]})})]}),a&&x.jsxs(de,{position:"absolute",top:0,right:0,height:"100%",display:"flex",flexDirection:"column",justifyContent:"center",zIndex:2,sx:{p:1,gap:1},children:[x.jsx(Jr,{onClick:p,sx:{bgcolor:"primary.main",color:"white",mb:1},size:"large",children:x.jsx(x2,{})}),x.jsx(Jr,{onClick:g,sx:{bgcolor:"error.main",color:"white"},size:"large",children:x.jsx(gT,{})})]})]}):x.jsxs(jn,{"data-testid":"memo-card",sx:{position:"relative",maxWidth:"100%",mx:"auto",cursor:r?"pointer":"default",bgcolor:"background.paper"},onClick:r?()=>r(n,!1):void 0,children:[x.jsxs(Un,{sx:{pb:1,minHeight:{xs:48,sm:64},maxHeight:{xs:72,sm:88},overflow:"hidden"},children:[x.jsx(se,{variant:"body1",sx:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:d}),n.comment&&x.jsx(se,{variant:"body2",color:"text.secondary",sx:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:n.comment}),Hh(n)>0&&x.jsx(kd,{value:Hh(n),readOnly:!0,size:"small",sx:{mt:.5}})]}),x.jsxs(pT,{sx:{justifyContent:"space-between",alignItems:"center",py:0},children:[x.jsxs(t0,{direction:"row",spacing:1,alignItems:"center",children:[n.page&&x.jsxs(se,{variant:"caption",children:["p.",n.page]}),f&&x.jsx(se,{variant:"caption",color:"text.secondary",children:VI(f)}),Array.isArray(n.tags)&&n.tags.map((v,b)=>x.jsx(In,{label:v,size:"small",color:"secondary"},b))]}),x.jsxs(de,{sx:{display:{xs:"none",sm:"flex"}},children:[x.jsx(Jr,{"aria-label":"edit",onClick:p,size:"small","data-testid":"memo-edit-button",children:x.jsx(x2,{fontSize:"small"})}),x.jsx(Jr,{"aria-label":"delete",onClick:g,size:"small","data-testid":"memo-delete-button",children:x.jsx(gT,{fontSize:"small"})})]})]})]})},s$=n=>{try{const e=n&&typeof n.toDate=="function"?n.toDate():n instanceof Date?n:null;if(!e)return"";const t=e.getFullYear(),r=e.getMonth()+1,i=e.getDate(),a=e.getHours(),s=String(e.getMinutes()).padStart(2,"0"),o=String(e.getSeconds()).padStart(2,"0");return`${t}/${r}/${i} ${a}:${s}:${o}`}catch{return""}},V4=({open:n,memo:e,bookId:t,onClose:r,onUpdate:i,onDelete:a,editMode:s=!1})=>{const{setGlobalError:o}=V.useContext(pi),{updateMemo:c,deleteMemo:d}=W_(t),[f,p]=V.useState(s?"edit":"view"),[g,y]=V.useState(null),[v,b]=V.useState(!1),[A,E]=V.useState("");Li.useEffect(()=>{e&&(y({...e,rating:Hh(e)}),p(s?"edit":"view"),b(!1),E(""))},[e,s]);const T=()=>{y(null),p("view"),b(!1),E(""),r()},C=async O=>{if(O.preventDefault(),!g||!g.text.trim())return;let N=g.tags||[];A&&!N.includes(A)&&(N=[...N,A]);try{await c(g.id,{text:g.text,comment:g.comment,page:Number(g.page)||null,tags:N,rating:g.rating||Ba}),T(),i&&i()}catch(M){console.error("Error updating memo: ",M),o("メモの更新に失敗しました。")}},D=async O=>{try{await d(O),T(),a&&a()}catch(N){console.error("Error deleting memo: ",N),o("メモの削除に失敗しました。")}};return e?x.jsxs(x.Fragment,{children:[x.jsxs(ja,{open:n,onClose:T,maxWidth:"sm",fullWidth:!0,"data-testid":"memo-detail-dialog",children:[x.jsx(Ss,{"data-testid":"memo-detail-title",children:"メモ詳細"}),x.jsx(Ua,{children:f==="view"?x.jsxs(x.Fragment,{children:[x.jsx(se,{variant:"body1",sx:{whiteSpace:"pre-line",mb:2},children:g==null?void 0:g.text}),(g==null?void 0:g.comment)&&x.jsx(se,{variant:"body2",color:"text.secondary",sx:{mb:1},children:g.comment}),(g==null?void 0:g.rating)&&g.rating>0&&x.jsxs(de,{sx:{mb:1},children:[x.jsx(kd,{value:g.rating,readOnly:!0,size:"small",sx:{mb:.5}}),x.jsx(se,{variant:"caption",color:"text.secondary",sx:{display:"block"},children:F1(g.rating)})]}),x.jsx(t0,{direction:"row",spacing:1,sx:{mb:1,flexWrap:"wrap"},children:Array.isArray(g==null?void 0:g.tags)&&g.tags.map((O,N)=>x.jsx(In,{label:O,size:"small",color:"secondary"},N))}),(g==null?void 0:g.page)&&x.jsxs(se,{variant:"caption",sx:{display:"block",mb:1},children:["p. ",g.page]}),(g==null?void 0:g.createdAt)&&x.jsx(se,{variant:"caption",color:"text.secondary",sx:{display:"block",mb:1},children:s$(g.createdAt)})]}):x.jsxs(de,{component:"form",onSubmit:C,sx:{mt:1},children:[x.jsx(kt,{label:"引用・抜き書き",fullWidth:!0,multiline:!0,rows:4,value:(g==null?void 0:g.text)||"",onChange:O=>y({...g,text:O.target.value}),margin:"normal",required:!0,inputProps:{"data-testid":"memo-text-input"}}),x.jsx(kt,{label:"感想・コメント",fullWidth:!0,multiline:!0,rows:2,value:(g==null?void 0:g.comment)||"",onChange:O=>y({...g,comment:O.target.value}),margin:"normal",inputProps:{"data-testid":"memo-comment-input"}}),x.jsx(kt,{label:"ページ番号",type:"number",value:(g==null?void 0:g.page)||"",onChange:O=>y({...g,page:O.target.value}),margin:"normal",sx:{mr:2},inputProps:{"data-testid":"memo-page-input"}}),x.jsxs(ga,{margin:"normal",fullWidth:!0,children:[x.jsx(w2,{component:"legend",children:"ランク評価"}),x.jsx(kd,{value:(g==null?void 0:g.rating)||Ba,onChange:(O,N)=>{y({...g,rating:N||Ba})},size:"large",sx:{mt:1},"data-testid":"memo-rating-input"}),(g==null?void 0:g.rating)&&g.rating>0&&x.jsx(se,{variant:"caption",color:"text.secondary",sx:{mt:1,display:"block"},children:F1(g.rating)})]}),x.jsx(po,{multiple:!0,freeSolo:!0,options:[],value:(g==null?void 0:g.tags)||[],getOptionLabel:O=>typeof O=="string"?O:O.inputValue||O.tag||"",onChange:(O,N)=>{const M=(N||[]).map(R=>{if(typeof R=="string")return R;if(R&&typeof R=="object"){if("inputValue"in R&&R.inputValue)return R.inputValue;if("tag"in R&&R.tag)return R.tag}return""}).filter(Boolean);y({...g,tags:M})},inputValue:A,onInputChange:(O,N)=>E(N),renderInput:O=>x.jsx(kt,{...O,label:"タグ",margin:"normal",fullWidth:!0,placeholder:"例: 名言,感想,引用",inputProps:{...O.inputProps,"data-testid":"memo-tags-input"}})})]})}),x.jsx(Ha,{children:f==="view"?x.jsxs(x.Fragment,{children:[x.jsx(st,{onClick:()=>p("edit"),"data-testid":"memo-edit-button",children:"編集"}),x.jsx(st,{onClick:()=>b(!0),color:"error","data-testid":"memo-delete-button",children:"削除"}),x.jsx(st,{onClick:T,"data-testid":"memo-close-button",children:"閉じる"})]}):x.jsxs(x.Fragment,{children:[x.jsx(st,{onClick:()=>p("view"),"data-testid":"memo-cancel-button",children:"キャンセル"}),x.jsx(st,{onClick:C,variant:"contained","data-testid":"memo-update-button",children:"更新"})]})})]}),x.jsxs(ja,{open:v,onClose:()=>b(!1),"data-testid":"memo-delete-dialog",children:[x.jsx(Ss,{"data-testid":"memo-delete-confirm-title",children:"本当に削除しますか？"}),x.jsx(Ua,{children:x.jsx(se,{children:"このメモを削除すると、元に戻すことはできません。"})}),x.jsxs(Ha,{children:[x.jsx(st,{onClick:()=>b(!1),"data-testid":"memo-delete-cancel-button",children:"キャンセル"}),x.jsx(st,{onClick:()=>{D(g==null?void 0:g.id)},color:"error",variant:"contained","data-testid":"memo-delete-confirm-button",children:"削除"})]})]})]}):null},o$=({bookId:n,onMemoUpdated:e})=>{const{setGlobalError:t}=V.useContext(pi),{memos:r,loading:i,deleteMemo:a}=W_(n),[s,o]=V.useState(null),[c,d]=V.useState(!1),[f,p]=V.useState(!1),[g,y]=V.useState(null),[v,b]=V.useState(!1),A=(N,M=!1)=>{o(N),b(M),d(!0)},E=N=>{const M=r.find(R=>R.id===N);M&&(y(M),p(!0))},T=async()=>{if(g)try{await a(g.id),p(!1),y(null)}catch(N){console.error("Error deleting memo:",N),t("メモの削除に失敗しました。")}},C=()=>{o(null),d(!1)},D=()=>{p(!1),y(null)},O=()=>{e&&e()};return i?x.jsx(se,{children:"メモを読み込み中..."}):r.length===0?x.jsx(se,{children:"まだメモはありません。"}):x.jsxs(x.Fragment,{children:[x.jsx(de,{sx:{display:"flex",flexDirection:"column",gap:2},children:r.map(N=>x.jsx(a$,{memo:N,onEdit:(M,R)=>A(M,R),onDelete:E,onClick:M=>A(M,!1)},N.id))}),x.jsx(V4,{open:c,memo:s,bookId:n,onClose:C,onUpdate:O,onDelete:O,editMode:v}),x.jsxs(ja,{open:f,onClose:D,"data-testid":"memo-delete-dialog",children:[x.jsx(Ss,{"data-testid":"memo-delete-confirm-title",children:"本当に削除しますか？"}),x.jsx(Ua,{children:x.jsx(se,{children:"このメモを削除すると、元に戻すことはできません。"})}),x.jsxs(Ha,{children:[x.jsx(st,{onClick:D,"data-testid":"memo-delete-cancel-button",children:"キャンセル"}),x.jsx(st,{onClick:T,color:"error",variant:"contained","data-testid":"memo-delete-confirm-button",children:"削除"})]})]})]})},FI=({onTextDetected:n,disabled:e=!1})=>{const[t,r]=V.useState(!1),[i,a]=V.useState(null),s=async()=>{r(!0),a(null);try{if(navigator.clipboard&&navigator.clipboard.readText){const c=await navigator.clipboard.readText();c&&c.trim()?(console.log("[CameraPasteOCR] ペーストされたテキスト:",c),n(c.trim())):a("クリップボードが空です")}else a("クリップボード機能が利用できません")}catch(c){console.error("[CameraPasteOCR] クリップボード読み取りエラー:",c),a("テキストの読み取りに失敗しました")}finally{r(!1)}},o=()=>{a(null)};return x.jsxs(x.Fragment,{children:[x.jsx(st,{variant:"outlined",startIcon:x.jsx(nN,{}),onClick:s,disabled:e||t,fullWidth:!0,sx:{mt:1,mb:1,height:{xs:"40px",sm:"48px"},fontSize:{xs:"0.8rem",sm:"0.9rem"}},"data-testid":"camera-paste-ocr-button",children:t?"読み取り中...":"テキストをペースト"}),x.jsx(od,{open:!!i,autoHideDuration:6e3,onClose:o,anchorOrigin:{vertical:"bottom",horizontal:"center"},children:x.jsx(lo,{onClose:o,severity:"error",children:i})})]})};var jI={};const di={ERROR:0,WARN:1,INFO:2,DEBUG:3},l$=()=>{let n,e=!1;try{if(typeof window<"u"){const t=window.__VITE_ENV__||{};n=t.VITE_LOG_LEVEL,e=t.PROD}}catch{}return typeof process<"u"&&jI&&(n||(n=jI.VITE_LOG_LEVEL),e||(e=!0)),n&&di[n.toUpperCase()]!==void 0?di[n.toUpperCase()]:e?di.WARN:di.DEBUG},c$=l$(),lr={AUTH:"🔐 AUTH",BOOK:"📖 BOOK",MEMO:"📝 MEMO",STATUS:"📊 STATUS",FIREBASE:"🔥 FIREBASE"},u$=(n,e,t,r=null)=>{const i=new Date().toISOString();let s=`${{[di.ERROR]:"❌",[di.WARN]:"⚠️",[di.INFO]:"ℹ️",[di.DEBUG]:"🐛"}[n]||"📝"} ${e} [${i}] ${t}`;return r!=null&&(s+=`
  Data: ${JSON.stringify(r,null,2)}`),s},Lg=(n,e,t,r=null)=>{if(n>c$)return;const i=u$(n,e,t,r);switch(n){case di.ERROR:console.error(i);break;case di.WARN:console.warn(i);break;case di.INFO:console.info(i);break;case di.DEBUG:console.log(i);break;default:console.log(i)}},mt={error:(n,e,t)=>Lg(di.ERROR,n,e,t),warn:(n,e,t)=>Lg(di.WARN,n,e,t),info:(n,e,t)=>Lg(di.INFO,n,e,t),debug:(n,e,t)=>Lg(di.DEBUG,n,e,t),auth:{error:(n,e)=>mt.error(lr.AUTH,n,e),warn:(n,e)=>mt.warn(lr.AUTH,n,e),info:(n,e)=>mt.info(lr.AUTH,n,e),debug:(n,e)=>mt.debug(lr.AUTH,n,e)},book:{error:(n,e)=>mt.error(lr.BOOK,n,e),warn:(n,e)=>mt.warn(lr.BOOK,n,e),info:(n,e)=>mt.info(lr.BOOK,n,e),debug:(n,e)=>mt.debug(lr.BOOK,n,e)},memo:{error:(n,e)=>mt.error(lr.MEMO,n,e),warn:(n,e)=>mt.warn(lr.MEMO,n,e),info:(n,e)=>mt.info(lr.MEMO,n,e),debug:(n,e)=>mt.debug(lr.MEMO,n,e)},status:{error:(n,e)=>mt.error(lr.STATUS,n,e),warn:(n,e)=>mt.warn(lr.STATUS,n,e),info:(n,e)=>mt.info(lr.STATUS,n,e),debug:(n,e)=>mt.debug(lr.STATUS,n,e)},firebase:{error:(n,e)=>mt.error(lr.FIREBASE,n,e),warn:(n,e)=>mt.warn(lr.FIREBASE,n,e),info:(n,e)=>mt.info(lr.FIREBASE,n,e),debug:(n,e)=>mt.debug(lr.FIREBASE,n,e)}},d$=({bookId:n,bookTags:e=[],onMemoAdded:t,onClose:r})=>{const{user:i}=gr(),{setGlobalError:a}=V.useContext(pi),{addMemo:s}=W_(n),[o,c]=V.useState(""),[d,f]=V.useState(""),[p,g]=V.useState(""),[y,v]=V.useState([]),[b,A]=V.useState(""),[E,T]=V.useState(Ba),[C,D]=V.useState(!1),{tagOptions:O,fetchTagHistory:N,saveTagsToHistory:M}=_o("memo",i);V.useEffect(()=>{N()},[N]);const R=async k=>{if(k.preventDefault(),!o.trim()||C)return;D(!0),mt.memo.debug("handleSubmit開始",{text:o,comment:d,page:p,tags:y});let F=y;b&&!y.includes(b)&&(F=[...y,b]),mt.memo.debug("保存するタグ",F);try{mt.memo.debug("addMemo呼び出し前");const q=await s({text:o,comment:d,page:Number(p)||null,tags:F,rating:E||Ba});mt.memo.info("addMemo呼び出し完了",{memoId:q}),await M(F),mt.memo.debug("フォームリセット前"),c(""),f(""),g(""),v([]),A(""),T(Ba),mt.memo.debug("フォームリセット完了"),t&&(mt.memo.debug("onMemoAddedコールバック呼び出し"),t())}catch(q){mt.memo.error("Error adding memo",q),a("メモの追加に失敗しました。")}finally{D(!1)}},I=()=>{r&&r()},B=k=>{mt.memo.info("OCRで検出されたテキスト",{detectedText:k}),c(k)};return r?x.jsxs(x.Fragment,{children:[x.jsx(Ss,{"data-testid":"memo-add-dialog-title",children:"メモを追加"}),x.jsx(Ua,{children:x.jsxs(de,{component:"form",onSubmit:R,sx:{mt:1},"data-testid":"memo-add-form",children:[x.jsx(kt,{label:"引用・抜き書き",fullWidth:!0,multiline:!0,rows:3,value:o,onChange:k=>c(k.target.value),required:!0,inputProps:{"data-testid":"memo-text-input"}}),x.jsx(FI,{onTextDetected:B}),x.jsx(kt,{label:"感想・コメント",fullWidth:!0,multiline:!0,rows:2,value:d,onChange:k=>f(k.target.value),inputProps:{"data-testid":"memo-comment-input"}}),x.jsx(kt,{label:"ページ番号",type:"number",value:p,onChange:k=>g(k.target.value),sx:{mr:2,width:{xs:"100%",sm:"auto"}},inputProps:{"data-testid":"memo-page-input"}}),x.jsxs(ga,{margin:"normal",fullWidth:!0,children:[x.jsx(w2,{component:"legend",children:"ランク評価"}),x.jsx(kd,{value:E,onChange:(k,F)=>{T(F||Ba)},size:"large",sx:{mt:1},"data-testid":"memo-rating-input"}),E>0&&x.jsx(se,{variant:"caption",color:"text.secondary",sx:{mt:1,display:"block"},children:F1(E)})]}),x.jsx(po,{multiple:!0,freeSolo:!0,options:O,value:y,getOptionLabel:k=>typeof k=="string"?k:k.inputValue||k.tag||"",onChange:async(k,F)=>{const q=(F||[]).map(X=>{if(typeof X=="string")return X;if(X&&typeof X=="object"){if("inputValue"in X&&X.inputValue)return X.inputValue;if("tag"in X&&X.tag)return X.tag}return""}).filter(Boolean);v(q),await M(q)},inputValue:b,onInputChange:(k,F)=>A(F),renderInput:k=>x.jsx(kt,{...k,label:"タグ",fullWidth:!0,placeholder:"例: 名言,感想,引用",inputProps:{...k.inputProps,"data-testid":"memo-tags-input"}})})]})}),x.jsxs(Ha,{children:[x.jsx(st,{onClick:I,"data-testid":"memo-add-cancel",disabled:C,children:"キャンセル"}),x.jsx(st,{onClick:R,variant:"contained","data-testid":"memo-add-submit",disabled:C,children:C?"追加中...":"メモを追加"})]})]}):x.jsxs(de,{component:"form",onSubmit:R,sx:{mt:1},"data-testid":"memo-add-form",children:[x.jsx(kt,{label:"引用・抜き書き",fullWidth:!0,multiline:!0,rows:3,value:o,onChange:k=>c(k.target.value),required:!0,inputProps:{"data-testid":"memo-text-input"}}),x.jsx(FI,{onTextDetected:B}),x.jsx(kt,{label:"感想・コメント",fullWidth:!0,multiline:!0,rows:2,value:d,onChange:k=>f(k.target.value),inputProps:{"data-testid":"memo-comment-input"}}),x.jsx(kt,{label:"ページ番号",type:"number",value:p,onChange:k=>g(k.target.value),sx:{mr:2,width:{xs:"100%",sm:"auto"}},inputProps:{"data-testid":"memo-page-input"}}),x.jsxs(ga,{margin:"normal",fullWidth:!0,children:[x.jsx(w2,{component:"legend",children:"ランク評価"}),x.jsx(kd,{value:E,onChange:(k,F)=>{T(F||Ba)},size:"large",sx:{mt:1},"data-testid":"memo-rating-input"}),E>0&&x.jsx(se,{variant:"caption",color:"text.secondary",sx:{mt:1,display:"block"},children:F1(E)})]}),x.jsx(po,{multiple:!0,freeSolo:!0,options:O,value:y,getOptionLabel:k=>typeof k=="string"?k:k.inputValue||k.tag||"",onChange:async(k,F)=>{const q=(F||[]).map(X=>{if(typeof X=="string")return X;if(X&&typeof X=="object"){if("inputValue"in X&&X.inputValue)return X.inputValue;if("tag"in X&&X.tag)return X.tag}return""}).filter(Boolean);v(q),await M(q)},inputValue:b,onInputChange:(k,F)=>A(F),renderInput:k=>x.jsx(kt,{...k,label:"タグ",fullWidth:!0,placeholder:"例: 名言,感想,引用",inputProps:{...k.inputProps,"data-testid":"memo-tags-input"}})}),x.jsx(st,{type:"submit",variant:"contained",disabled:C,sx:{mt:2,mb:{xs:8,sm:2},width:{xs:"100%",sm:"auto"}},"data-testid":"memo-add-submit",children:C?"追加中...":"メモを追加"})]})},Y_=n=>{const{user:e}=gr(),t=V.useContext(pi),r=(t==null?void 0:t.setGlobalError)||(()=>{}),[i,a]=V.useState([]),[s,o]=V.useState(!0),[c,d]=V.useState(null),f=V.useCallback(()=>{if(!e||!n)return mt.status.debug("No user or bookId",{user:!!e,bookId:n}),o(!1),()=>{};try{mt.status.debug("Setting up listener for bookId",{bookId:n}),o(!0),d(null);const E=Fr(Pt,"books",n,"statusHistory"),T=zn(E);return ZF(T,D=>{mt.status.debug("Snapshot received",{size:D.size,empty:D.empty,bookId:n});const O=D.docs.map(N=>({id:N.id,...N.data()}));O.sort((N,M)=>{var B,L;const R=(B=N.changedAt)!=null&&B.toDate?N.changedAt.toDate():new Date(N.changedAt||0);return((L=M.changedAt)!=null&&L.toDate?M.changedAt.toDate():new Date(M.changedAt||0))-R}),a(O),o(!1)},D=>{if(mt.status.error("Error fetching status history",D),mt.status.error("Error details",{code:D.code,message:D.message,bookId:n,userId:e.uid}),D.code==="permission-denied"){mt.status.warn("Permission denied for statusHistory, treating as empty history"),a([]),o(!1);return}r("ステータス履歴の取得に失敗しました。"),d("ステータス履歴の取得に失敗しました。"),o(!1)})}catch(E){return mt.status.error("Error setting up status history listener",E),r("ステータス履歴の取得に失敗しました。"),d("ステータス履歴の取得に失敗しました。"),o(!1),()=>{}}},[n,e,r]),p=V.useCallback(async(E,T,C=null)=>{if(!e||!n||!L1(E))throw new Error("無効なパラメータです。");try{const D=Fr(Pt,"books",n,"statusHistory"),O={status:E,previousStatus:T||null,changedAt:Yi(),changedBy:e.uid,notes:C||null,createdAt:Yi()};return(await k1(D,O)).id}catch(D){throw mt.status.error("Error adding status history",D),r("ステータス履歴の保存に失敗しました。"),D}},[n,e,r]),g=V.useCallback(()=>{if(!i.length)return{};const E={},T=i.find(O=>O.status===vt.READING||O.status===vt.RE_READING);T&&(E.readingStartedAt=T.changedAt);const C=i.find(O=>O.status===vt.FINISHED);C&&(E.finishedAt=C.changedAt);const D=i.find(O=>O.status===vt.RE_READING);return D&&(E.reReadingStartedAt=D.changedAt),E},[i]),y=V.useCallback(()=>{var E;return i.length&&((E=i[0])==null?void 0:E.status)||null},[i]),v=V.useCallback(()=>{const E=g();if(!E.readingStartedAt||!E.finishedAt)return null;const T=E.readingStartedAt.toDate?E.readingStartedAt.toDate():new Date(E.readingStartedAt),C=E.finishedAt.toDate?E.finishedAt.toDate():new Date(E.finishedAt),D=Math.abs(C-T);return Math.ceil(D/(1e3*60*60*24))},[g]),b=V.useCallback(async(E,T,C)=>{if(!e||!n){mt.status.debug("No user or bookId for manual history addition",{user:!!e,bookId:n});return}if(!L1(T))throw new Error("Invalid status");try{mt.status.info("Adding manual status history",{bookId:n,date:E,status:T,previousStatus:C,userId:e.uid});const D=Fr(Pt,"books",n,"statusHistory"),O={status:T,previousStatus:C||"",changedAt:E,userId:e.uid};await k1(D,O),mt.status.info("Manual status history added successfully")}catch(D){throw mt.status.error("Error adding manual status history",D),r("手動履歴の追加に失敗しました。"),D}},[e,n,r]),A=i.length>0?i[0]:null;return V.useEffect(()=>f(),[n,e]),{history:i,loading:s,error:c,addStatusHistory:p,addManualStatusHistory:b,latestHistory:A,getImportantDates:g,getCurrentStatus:y,getReadingDuration:v,refetch:f}},f$=({book:n,bookId:e,onStatusChange:t})=>{const r=V.useContext(pi),i=(r==null?void 0:r.setGlobalError)||(()=>{}),{addStatusHistory:a}=Y_(e),[s,o]=V.useState(!1),[c,d]=V.useState(null),f=async v=>{if(!n||!L1(v))return;o(!0),d(null);const b=xo(Pt,"books",e),A=n.status||dr;try{const E={status:v,updatedAt:Yi()};v===vt.FINISHED&&(E.finishedAt=Yi()),await Hm(b,E);try{await a(v,A)}catch(T){console.error("Error adding status history:",T)}t(v)}catch(E){console.error("Error updating status:",E),i("ステータスの更新に失敗しました。")}finally{o(!1)}},p=v=>{d(v.currentTarget)},g=()=>{d(null)};if(!n)return null;const y=n.status||dr;return x.jsxs(de,{sx:{display:"flex",alignItems:"center",gap:1},children:[x.jsx(In,{label:wo(y),color:ds(y),"data-testid":"book-status-chip"}),x.jsx(st,{onClick:p,variant:"outlined",disabled:s,endIcon:x.jsx(rN,{}),"data-testid":"book-status-change-button",children:s?"更新中...":"ステータス変更"}),x.jsx(iN,{anchorEl:c,open:!!c,onClose:g,"data-testid":"book-status-menu",children:A4.map(v=>x.jsx(Hn,{onClick:()=>f(v),disabled:v===y,"data-testid":`status-menu-item-${v}`,children:wo(v)},v))})]})},h$=({book:n,bookId:e,onStatusChange:t})=>n?x.jsxs(de,{"data-testid":"book-info",children:[x.jsx(de,{sx:{display:"flex",justifyContent:"center",alignItems:"center",mb:2},children:x.jsx(f$,{book:n,bookId:e,onStatusChange:t})}),x.jsx(de,{sx:{textAlign:"left",mb:2},"data-testid":"book-cover-section",children:n.coverImageUrl?x.jsx("img",{src:n.coverImageUrl,alt:`${n.title}の表紙`,style:{maxHeight:"250px",width:"auto"},"data-testid":"book-cover-image"}):x.jsx(de,{sx:{border:"1px dashed grey",height:250,width:167,display:"flex",alignItems:"center",justifyContent:"center",mx:"auto"},"data-testid":"book-cover-placeholder",children:x.jsx(se,{variant:"body1",color:"text.secondary",children:"書影なし"})})}),x.jsxs(de,{sx:{mb:2},"data-testid":"book-details",children:[x.jsx(se,{variant:"h4",gutterBottom:!0,sx:{wordBreak:"break-word"},"data-testid":"book-title",children:n.title}),x.jsx(se,{variant:"h6",color:"text.secondary",gutterBottom:!0,"data-testid":"book-author",children:n.author}),n.publisher&&x.jsxs(se,{variant:"body1",color:"text.secondary",gutterBottom:!0,"data-testid":"book-publisher",children:["出版社: ",n.publisher]}),n.publishedDate&&x.jsxs(se,{variant:"body1",color:"text.secondary","data-testid":"book-published-date",children:["出版日: ",n.publishedDate]})]})]}):null,p$=({book:n,bookId:e,onTagsChange:t})=>{const{user:r}=gr(),i=V.useContext(pi),a=(i==null?void 0:i.setGlobalError)||(()=>{}),[s,o]=V.useState(!1),[c,d]=V.useState([]),{tagOptions:f,fetchTagHistory:p,saveTagsToHistory:g}=_o("book",r);V.useEffect(()=>{p()},[p]);const y=()=>{d(n.tags||[]),o(!0)},v=async()=>{if(n)try{const b=xo(Pt,"books",e);await Hm(b,{tags:c,updatedAt:Yi()}),await g(c),t(c),o(!1)}catch(b){console.error("Error updating tags:",b),a("タグの更新に失敗しました。")}};return n?x.jsxs(de,{sx:{mb:2},children:[x.jsxs(de,{sx:{display:"flex",alignItems:"center",gap:1,mb:1},children:[x.jsx(se,{variant:"h6",children:"タグ:"}),x.jsx(Jr,{onClick:y,size:"small","data-testid":"edit-tags-button",children:x.jsx(x2,{})})]}),x.jsx(de,{sx:{display:"flex",flexWrap:"wrap",gap:1},children:(n.tags||[]).map((b,A)=>x.jsx(In,{label:b,size:"small"},A))}),x.jsxs(ja,{open:s,onClose:()=>o(!1),maxWidth:"sm",fullWidth:!0,children:[x.jsx(Ss,{children:"タグを編集"}),x.jsx(Ua,{children:x.jsx(po,{multiple:!0,freeSolo:!0,options:f,value:c,onChange:(b,A)=>d(A),renderInput:b=>x.jsx(kt,{...b,label:"タグ",placeholder:"タグを入力または選択",fullWidth:!0,margin:"normal"}),renderTags:(b,A)=>b.map((E,T)=>V.createElement(In,{...A({index:T}),key:T,label:E,size:"small"}))})}),x.jsxs(Ha,{children:[x.jsx(st,{onClick:()=>o(!1),children:"キャンセル"}),x.jsx(st,{onClick:v,variant:"contained","data-testid":"save-tags-button",children:"保存"})]})]})]}):null},g$=n=>({components:{MuiLocalizationProvider:{defaultProps:{localeText:H({},n)}}}}),F4={previousMonth:"Previous month",nextMonth:"Next month",openPreviousView:"Open previous view",openNextView:"Open next view",calendarViewSwitchingButtonAriaLabel:n=>n==="year"?"year view is open, switch to calendar view":"calendar view is open, switch to year view",start:"Start",end:"End",startDate:"Start date",startTime:"Start time",endDate:"End date",endTime:"End time",cancelButtonLabel:"Cancel",clearButtonLabel:"Clear",okButtonLabel:"OK",todayButtonLabel:"Today",nextStepButtonLabel:"Next",datePickerToolbarTitle:"Select date",dateTimePickerToolbarTitle:"Select date & time",timePickerToolbarTitle:"Select time",dateRangePickerToolbarTitle:"Select date range",timeRangePickerToolbarTitle:"Select time range",clockLabelText:(n,e)=>`Select ${n}. ${e?`Selected time is ${e}`:"No time selected"}`,hoursClockNumberText:n=>`${n} hours`,minutesClockNumberText:n=>`${n} minutes`,secondsClockNumberText:n=>`${n} seconds`,selectViewText:n=>`Select ${n}`,calendarWeekNumberHeaderLabel:"Week number",calendarWeekNumberHeaderText:"#",calendarWeekNumberAriaLabelText:n=>`Week ${n}`,calendarWeekNumberText:n=>`${n}`,openDatePickerDialogue:n=>n?`Choose date, selected date is ${n}`:"Choose date",openTimePickerDialogue:n=>n?`Choose time, selected time is ${n}`:"Choose time",openRangePickerDialogue:n=>n?`Choose range, selected range is ${n}`:"Choose range",fieldClearLabel:"Clear",timeTableLabel:"pick time",dateTableLabel:"pick date",fieldYearPlaceholder:n=>"Y".repeat(n.digitAmount),fieldMonthPlaceholder:n=>n.contentType==="letter"?"MMMM":"MM",fieldDayPlaceholder:()=>"DD",fieldWeekDayPlaceholder:n=>n.contentType==="letter"?"EEEE":"EE",fieldHoursPlaceholder:()=>"hh",fieldMinutesPlaceholder:()=>"mm",fieldSecondsPlaceholder:()=>"ss",fieldMeridiemPlaceholder:()=>"aa",year:"Year",month:"Month",day:"Day",weekDay:"Week day",hours:"Hours",minutes:"Minutes",seconds:"Seconds",meridiem:"Meridiem",empty:"Empty"},m$=F4;g$(F4);const y$=["localeText"],lw=V.createContext(null),j4=function(e){const{localeText:t}=e,r=Ne(e,y$),{adapter:i,localeText:a}=V.useContext(lw)??{adapter:void 0,localeText:void 0},s=xt({props:r,name:"MuiLocalizationProvider"}),{children:o,dateAdapter:c,dateFormats:d,dateLibInstance:f,adapterLocale:p,localeText:g}=s,y=V.useMemo(()=>H({},g,a,t),[g,a,t]),v=V.useMemo(()=>{if(!c)return i||null;const E=new c({locale:p,formats:d,instance:f});if(!E.isMUIAdapter)throw new Error(["MUI X: The date adapter should be imported from `@mui/x-date-pickers` or `@mui/x-date-pickers-pro`, not from `@date-io`","For example, `import { AdapterDayjs } from '@mui/x-date-pickers/AdapterDayjs'` instead of `import AdapterDayjs from '@date-io/dayjs'`","More information on the installation documentation: https://mui.com/x/react-date-pickers/quickstart/#installation"].join(`
`));return E},[c,p,d,f,i]),b=V.useMemo(()=>v?{minDate:v.date("1900-01-01T00:00:00.000"),maxDate:v.date("2099-12-31T00:00:00.000")}:null,[v]),A=V.useMemo(()=>({utils:v,adapter:v,defaultDates:b,localeText:y}),[b,v,y]);return x.jsx(lw.Provider,{value:A,children:o})},q_=()=>{const n=V.useContext(lw);if(n===null)throw new Error(["MUI X: Can not find the date and time pickers localization context.","It looks like you forgot to wrap your component in LocalizationProvider.","This can also happen if you are bundling multiple versions of the `@mui/x-date-pickers` package"].join(`
`));if(n.adapter===null)throw new Error(["MUI X: Can not find the date and time pickers adapter from its localization context.","It looks like you forgot to pass a `dateAdapter` to your LocalizationProvider."].join(`
`));const e=V.useMemo(()=>H({},m$,n.localeText),[n.localeText]);return V.useMemo(()=>H({},n,{localeText:e}),[n,e])},Wt=()=>q_().adapter,Ga=()=>q_().localeText,cw=["disablePast","disableFuture","minDate","maxDate","shouldDisableDate","shouldDisableMonth","shouldDisableYear"],uw=["disablePast","disableFuture","minTime","maxTime","shouldDisableTime","minutesStep","ampm","disableIgnoringDatePartForTimeValidation"],U4=["minDateTime","maxDateTime"],v$=[...cw,...uw,...U4],H4=n=>v$.reduce((e,t)=>(n.hasOwnProperty(t)&&(e[t]=n[t]),e),{}),x$=["value","defaultValue","referenceDate","format","formatDensity","onChange","timezone","onError","shouldRespectLeadingZeros","selectedSections","onSelectedSectionsChange","unstableFieldRef","unstableStartFieldRef","unstableEndFieldRef","enableAccessibleFieldDOMStructure","disabled","readOnly","dateSeparator","autoFocus","focused"],z4=(n,e)=>V.useMemo(()=>{const t=H({},n),r={},i=a=>{t.hasOwnProperty(a)&&(r[a]=t[a],delete t[a])};return x$.forEach(i),e==="date"?cw.forEach(i):e==="time"?uw.forEach(i):e==="date-time"&&(cw.forEach(i),uw.forEach(i),U4.forEach(i)),{forwardedProps:t,internalProps:r}},[n,e]),fs=(n,e)=>n.length!==e.length?!1:e.every(t=>n.includes(t)),w$=({openTo:n,defaultOpenTo:e,views:t,defaultViews:r})=>{const i=t??r;let a;if(n!=null)a=n;else if(i.includes(e))a=e;else if(i.length>0)a=i[0];else throw new Error("MUI X: The `views` prop must contain at least one view.");return{views:i,openTo:a}},j1=(n,e,t)=>{let r=e;return r=n.setHours(r,n.getHours(t)),r=n.setMinutes(r,n.getMinutes(t)),r=n.setSeconds(r,n.getSeconds(t)),r=n.setMilliseconds(r,n.getMilliseconds(t)),r},p0=({date:n,disableFuture:e,disablePast:t,maxDate:r,minDate:i,isDateDisabled:a,adapter:s,timezone:o})=>{const c=j1(s,s.date(void 0,o),n);t&&s.isBefore(i,c)&&(i=c),e&&s.isAfter(r,c)&&(r=c);let d=n,f=n;for(s.isBefore(n,i)&&(d=i,f=null),s.isAfter(n,r)&&(f&&(f=r),d=null);d||f;){if(d&&s.isAfter(d,r)&&(d=null),f&&s.isBefore(f,i)&&(f=null),d){if(!a(d))return d;d=s.addDays(d,1)}if(f){if(!a(f))return f;f=s.addDays(f,-1)}}return null},_$=(n,e)=>n.isValid(e)?e:null,U1=(n,e,t)=>e==null||!n.isValid(e)?t:e,b$=(n,e,t)=>!n.isValid(e)&&e!=null&&!n.isValid(t)&&t!=null?!0:n.isEqual(e,t),X_=(n,e)=>{const r=[n.startOfYear(e)];for(;r.length<12;){const i=r[r.length-1];r.push(n.addMonths(i,1))}return r},K_=(n,e,t)=>t==="date"?n.startOfDay(n.date(void 0,e)):n.date(void 0,e),Jh=(n,e)=>{const t=n.setHours(n.date(),e==="am"?2:14);return n.format(t,"meridiem")},$4=["year","month","day"],zd=n=>$4.includes(n),UI=(n,{format:e,views:t},r)=>{if(e!=null)return e;const i=n.formats;return fs(t,["year"])?i.year:fs(t,["month"])?i.month:fs(t,["day"])?i.dayOfMonth:fs(t,["month","year"])?`${i.month} ${i.year}`:fs(t,["day","month"])?`${i.month} ${i.dayOfMonth}`:i.keyboardDate},A$=(n,e)=>{const t=n.startOfWeek(e);return[0,1,2,3,4,5,6].map(r=>n.addDays(t,r))},G4=(n,e)=>{const t=n.formatTokenMap[e];if(t==null)throw new Error([`MUI X: The token "${e}" is not supported by the Date and Time Pickers.`,"Please try using another token or open an issue on https://github.com/mui/mui-x/issues/new/choose if you think it should be supported."].join(`
`));return typeof t=="string"?{type:t,contentType:t==="meridiem"?"letter":"digit",maxLength:void 0}:{type:t.sectionType,contentType:t.contentType,maxLength:t.maxLength}},Ym=(n,e)=>{const t=[],r=n.date(void 0,"default"),i=n.startOfWeek(r),a=n.endOfWeek(r);let s=i;for(;n.isBefore(s,a);)t.push(s),s=n.addDays(s,1);return t.map(o=>n.formatByString(o,e))},W4=(n,e,t,r)=>{switch(t){case"month":return X_(n,n.date(void 0,e)).map(i=>n.formatByString(i,r));case"weekDay":return Ym(n,r);case"meridiem":{const i=n.date(void 0,e);return[n.startOfDay(i),n.endOfDay(i)].map(a=>n.formatByString(a,r))}default:return[]}},HI="s",E$=["0","1","2","3","4","5","6","7","8","9"],S$=n=>{const e=n.date(void 0);return n.formatByString(n.setSeconds(e,0),HI)==="0"?E$:Array.from({length:10}).map((r,i)=>n.formatByString(n.setSeconds(e,i),HI))},qc=(n,e)=>{if(e[0]==="0")return n;const t=[];let r="";for(let i=0;i<n.length;i+=1){r+=n[i];const a=e.indexOf(r);a>-1&&(t.push(a.toString()),r="")}return t.join("")},Q_=(n,e)=>e[0]==="0"?n:n.split("").map(t=>e[Number(t)]).join(""),zI=(n,e)=>{const t=qc(n,e);return t!==" "&&!Number.isNaN(Number(t))},Z_=(n,e)=>Number(n).toString().padStart(e,"0"),Y4=(n,e,t,r,i)=>{if(i.type==="day"&&i.contentType==="digit-with-letter"){const s=n.setDate(t.longestMonth,e);return n.formatByString(s,i.format)}let a=e.toString();return i.hasLeadingZerosInInput&&(a=Z_(a,i.maxLength)),Q_(a,r)},J_=(n,e,t)=>{let r=n.value||n.placeholder;const i=e==="non-input"?n.hasLeadingZerosInFormat:n.hasLeadingZerosInInput;return e==="non-input"&&n.hasLeadingZerosInInput&&!n.hasLeadingZerosInFormat&&(r=Number(qc(r,t)).toString()),["input-rtl","input-ltr"].includes(e)&&n.contentType==="digit"&&!i&&r.length===1&&(r=`${r}‎`),e==="input-rtl"&&(r=`⁨${r}⁩`),r},$I=(n,e,t,r)=>n.formatByString(n.parse(e,t),r),T$=(n,e)=>n.formatByString(n.date(void 0,"system"),e).length===4,q4=(n,e,t,r)=>{if(e!=="digit")return!1;const i=n.date(void 0,"default");switch(t){case"year":return n.lib==="dayjs"&&r==="YY"?!0:n.formatByString(n.setYear(i,1),r).startsWith("0");case"month":return n.formatByString(n.startOfYear(i),r).length>1;case"day":return n.formatByString(n.startOfMonth(i),r).length>1;case"weekDay":return n.formatByString(n.startOfWeek(i),r).length>1;case"hours":return n.formatByString(n.setHours(i,1),r).length>1;case"minutes":return n.formatByString(n.setMinutes(i,1),r).length>1;case"seconds":return n.formatByString(n.setSeconds(i,1),r).length>1;default:throw new Error("Invalid section type")}},C$=(n,e,t)=>{const r=e.some(c=>c.type==="day"),i=[],a=[];for(let c=0;c<e.length;c+=1){const d=e[c];r&&d.type==="weekDay"||(i.push(d.format),a.push(J_(d,"non-input",t)))}const s=i.join(" "),o=a.join(" ");return n.parse(o,s)},I$=n=>n.map(e=>`${e.startSeparator}${e.value||e.placeholder}${e.endSeparator}`).join(""),D$=(n,e,t)=>{const i=n.map(a=>{const s=J_(a,t?"input-rtl":"input-ltr",e);return`${a.startSeparator}${s}${a.endSeparator}`}).join("");return t?`⁦${i}⁩`:i},R$=(n,e,t)=>{const r=n.date(void 0,t),i=n.endOfYear(r),a=n.endOfDay(r),{maxDaysInMonth:s,longestMonth:o}=X_(n,r).reduce((c,d)=>{const f=n.getDaysInMonth(d);return f>c.maxDaysInMonth?{maxDaysInMonth:f,longestMonth:d}:c},{maxDaysInMonth:0,longestMonth:null});return{year:({format:c})=>({minimum:0,maximum:T$(n,c)?9999:99}),month:()=>({minimum:1,maximum:n.getMonth(i)+1}),day:({currentDate:c})=>({minimum:1,maximum:n.isValid(c)?n.getDaysInMonth(c):s,longestMonth:o}),weekDay:({format:c,contentType:d})=>{if(d==="digit"){const f=Ym(n,c).map(Number);return{minimum:Math.min(...f),maximum:Math.max(...f)}}return{minimum:1,maximum:7}},hours:({format:c})=>{const d=n.getHours(a);return qc(n.formatByString(n.endOfDay(r),c),e)!==d.toString()?{minimum:1,maximum:Number(qc(n.formatByString(n.startOfDay(r),c),e))}:{minimum:0,maximum:d}},minutes:()=>({minimum:0,maximum:n.getMinutes(a)}),seconds:()=>({minimum:0,maximum:n.getSeconds(a)}),meridiem:()=>({minimum:0,maximum:1}),empty:()=>({minimum:0,maximum:0})}},M$=(n,e,t,r)=>{switch(e.type){case"year":return n.setYear(r,n.getYear(t));case"month":return n.setMonth(r,n.getMonth(t));case"weekDay":{let i=n.formatByString(t,e.format);e.hasLeadingZerosInInput&&(i=Z_(i,e.maxLength));const a=Ym(n,e.format),s=a.indexOf(i),c=a.indexOf(e.value)-s;return n.addDays(t,c)}case"day":return n.setDate(r,n.getDate(t));case"meridiem":{const i=n.getHours(t)<12,a=n.getHours(r);return i&&a>=12?n.addHours(r,-12):!i&&a<12?n.addHours(r,12):r}case"hours":return n.setHours(r,n.getHours(t));case"minutes":return n.setMinutes(r,n.getMinutes(t));case"seconds":return n.setSeconds(r,n.getSeconds(t));default:return r}},GI={year:1,month:2,day:3,weekDay:4,hours:5,minutes:6,seconds:7,meridiem:8,empty:9},WI=(n,e,t,r,i)=>[...t].sort((a,s)=>GI[a.type]-GI[s.type]).reduce((a,s)=>!i||s.modified?M$(n,s,e,a):a,r),O$=()=>navigator.userAgent.toLowerCase().includes("android"),P$=(n,e)=>{const t={};if(!e)return n.forEach((c,d)=>{const f=d===0?null:d-1,p=d===n.length-1?null:d+1;t[d]={leftIndex:f,rightIndex:p}}),{neighbors:t,startIndex:0,endIndex:n.length-1};const r={},i={};let a=0,s=0,o=n.length-1;for(;o>=0;){s=n.findIndex((c,d)=>{var f;return d>=a&&((f=c.endSeparator)==null?void 0:f.includes(" "))&&c.endSeparator!==" / "}),s===-1&&(s=n.length-1);for(let c=s;c>=a;c-=1)i[c]=o,r[o]=c,o-=1;a=s+1}return n.forEach((c,d)=>{const f=i[d],p=f===0?null:r[f-1],g=f===n.length-1?null:r[f+1];t[d]={leftIndex:p,rightIndex:g}}),{neighbors:t,startIndex:r[0],endIndex:r[n.length-1]}},dw=(n,e)=>{if(n==null)return null;if(n==="all")return"all";if(typeof n=="string"){const t=e.findIndex(r=>r.type===n);return t===-1?null:t}return n},k$=({adapter:n,format:e})=>{let t=10,r=e,i=n.expandFormat(e);for(;i!==r;)if(r=i,i=n.expandFormat(r),t-=1,t<0)throw new Error("MUI X: The format expansion seems to be in an infinite loop. Please open an issue with the format passed to the component.");return i},N$=({adapter:n,expandedFormat:e})=>{const t=[],{start:r,end:i}=n.escapedCharacters,a=new RegExp(`(\\${r}[^\\${i}]*\\${i})+`,"g");let s=null;for(;s=a.exec(e);)t.push({start:s.index,end:a.lastIndex-1});return t},L$=(n,e,t,r)=>{switch(t.type){case"year":return e.fieldYearPlaceholder({digitAmount:n.formatByString(n.date(void 0,"default"),r).length,format:r});case"month":return e.fieldMonthPlaceholder({contentType:t.contentType,format:r});case"day":return e.fieldDayPlaceholder({format:r});case"weekDay":return e.fieldWeekDayPlaceholder({contentType:t.contentType,format:r});case"hours":return e.fieldHoursPlaceholder({format:r});case"minutes":return e.fieldMinutesPlaceholder({format:r});case"seconds":return e.fieldSecondsPlaceholder({format:r});case"meridiem":return e.fieldMeridiemPlaceholder({format:r});default:return r}},B$=({adapter:n,date:e,shouldRespectLeadingZeros:t,localeText:r,localizedDigits:i,now:a,token:s,startSeparator:o})=>{if(s==="")throw new Error("MUI X: Should not call `commitToken` with an empty token");const c=G4(n,s),d=q4(n,c.contentType,c.type,s),f=t?d:c.contentType==="digit",p=n.isValid(e);let g=p?n.formatByString(e,s):"",y=null;if(f)if(d)y=g===""?n.formatByString(a,s).length:g.length;else{if(c.maxLength==null)throw new Error(`MUI X: The token ${s} should have a 'maxLength' property on it's adapter`);y=c.maxLength,p&&(g=Q_(Z_(qc(g,i),y),i))}return H({},c,{format:s,maxLength:y,value:g,placeholder:L$(n,r,c,s),hasLeadingZerosInFormat:d,hasLeadingZerosInInput:f,startSeparator:o,endSeparator:"",modified:!1})},V$=n=>{var y;const{adapter:e,expandedFormat:t,escapedParts:r}=n,i=e.date(void 0),a=[];let s="";const o=Object.keys(e.formatTokenMap).sort((v,b)=>b.length-v.length),c=/^([a-zA-Z]+)/,d=new RegExp(`^(${o.join("|")})*$`),f=new RegExp(`^(${o.join("|")})`),p=v=>r.find(b=>b.start<=v&&b.end>=v);let g=0;for(;g<t.length;){const v=p(g),b=v!=null,A=(y=c.exec(t.slice(g)))==null?void 0:y[1];if(!b&&A!=null&&d.test(A)){let E=A;for(;E.length>0;){const T=f.exec(E)[1];E=E.slice(T.length),a.push(B$(H({},n,{now:i,token:T,startSeparator:s}))),s=""}g+=A.length}else{const E=t[g];b&&(v==null?void 0:v.start)===g||(v==null?void 0:v.end)===g||(a.length===0?s+=E:(a[a.length-1].endSeparator+=E,a[a.length-1].isEndFormatSeparator=!0)),g+=1}}return a.length===0&&s.length>0&&a.push({type:"empty",contentType:"letter",maxLength:null,format:"",value:"",placeholder:"",hasLeadingZerosInFormat:!1,hasLeadingZerosInInput:!1,startSeparator:s,endSeparator:"",modified:!1}),a},F$=({isRtl:n,formatDensity:e,sections:t})=>t.map(r=>{const i=a=>{let s=a;return n&&s!==null&&s.includes(" ")&&(s=`⁩${s}⁦`),e==="spacious"&&["/",".","-"].includes(s)&&(s=` ${s} `),s};return r.startSeparator=i(r.startSeparator),r.endSeparator=i(r.endSeparator),r}),YI=n=>{let e=k$(n);n.isRtl&&n.enableAccessibleFieldDOMStructure&&(e=e.split(" ").reverse().join(" "));const t=N$(H({},n,{expandedFormat:e})),r=V$(H({},n,{expandedFormat:e,escapedParts:t}));return F$(H({},n,{sections:r}))},eb=V.createContext(null),Fl=()=>{const n=V.useContext(eb);if(n==null)throw new Error("MUI X: The `usePickerContext` hook can only be called inside the context of a Picker component");return n},tb=()=>V.useContext(eb),X4=V.createContext(()=>!0);function j$(){return V.useContext(X4)}const K4=V.createContext(null);function Q4(){return V.useContext(K4)}const Z4=V.createContext(null),J4=V.createContext({ownerState:{isPickerDisabled:!1,isPickerReadOnly:!1,isPickerValueEmpty:!1,isPickerOpen:!1,pickerVariant:"desktop",pickerOrientation:"portrait"},rootRefObject:{current:null},labelId:void 0,dismissViews:()=>{},hasUIView:!0,getCurrentViewMode:()=>"UI",triggerElement:null,viewContainerRole:null,defaultActionBarActions:[],onPopperExited:void 0});function eO(n){const{contextValue:e,actionsContextValue:t,privateContextValue:r,fieldPrivateContextValue:i,isValidContextValue:a,localeText:s,children:o}=n;return x.jsx(eb.Provider,{value:e,children:x.jsx(Z4.Provider,{value:t,children:x.jsx(J4.Provider,{value:r,children:x.jsx(K4.Provider,{value:i,children:x.jsx(X4.Provider,{value:a,children:x.jsx(j4,{localeText:s,children:o})})})})})})}const U$=()=>{const n=V.useContext(Z4);if(n==null)throw new Error(["MUI X: The `usePickerActionsContext` can only be called in fields that are used as a slot of a Picker component"].join(`
`));return n},tO=()=>q_().defaultDates,uf=n=>{const e=Wt(),t=V.useRef(void 0);return t.current===void 0&&(t.current=e.date(void 0,n)),t.current},H$=kl(x.jsx("path",{d:"M7 10l5 5 5-5z"})),z$=kl(x.jsx("path",{d:"M15.41 16.59L10.83 12l4.58-4.59L14 6l-6 6 6 6 1.41-1.41z"})),$$=kl(x.jsx("path",{d:"M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z"})),G$=kl(x.jsx("path",{d:"M17 12h-5v5h5v-5zM16 1v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2h-1V1h-2zm3 18H5V8h14v11z"}));kl(x.jsxs(V.Fragment,{children:[x.jsx("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),x.jsx("path",{d:"M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"})]}));const W$=kl(x.jsx("path",{d:"M9 11H7v2h2v-2zm4 0h-2v2h2v-2zm4 0h-2v2h2v-2zm2-7h-1V2h-2v2H8V2H6v2H5c-1.11 0-1.99.9-1.99 2L3 20c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 16H5V9h14v11z"})),Y$=kl(x.jsxs(V.Fragment,{children:[x.jsx("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),x.jsx("path",{d:"M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"})]})),q$=kl(x.jsx("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}));function X$(n){return Dt("MuiPickersArrowSwitcher",n)}Rt("MuiPickersArrowSwitcher",["root","spacer","button","previousIconButton","nextIconButton","leftArrowIcon","rightArrowIcon"]);const tr=()=>V.useContext(J4),K$=["children","className","slots","slotProps","isNextDisabled","isNextHidden","onGoToNext","nextLabel","isPreviousDisabled","isPreviousHidden","onGoToPrevious","previousLabel","labelId","classes"],Q$=["ownerState"],Z$=["ownerState"],J$=Me("div",{name:"MuiPickersArrowSwitcher",slot:"Root"})({display:"flex"}),eG=Me("div",{name:"MuiPickersArrowSwitcher",slot:"Spacer"})(({theme:n})=>({width:n.spacing(3)})),qI=Me(Jr,{name:"MuiPickersArrowSwitcher",slot:"Button"})({variants:[{props:{isButtonHidden:!0},style:{visibility:"hidden"}}]}),tG=n=>yt({root:["root"],spacer:["spacer"],button:["button"],previousIconButton:["previousIconButton"],nextIconButton:["nextIconButton"],leftArrowIcon:["leftArrowIcon"],rightArrowIcon:["rightArrowIcon"]},X$,n),nG=V.forwardRef(function(e,t){const r=wa(),i=xt({props:e,name:"MuiPickersArrowSwitcher"}),{children:a,className:s,slots:o,slotProps:c,isNextDisabled:d,isNextHidden:f,onGoToNext:p,nextLabel:g,isPreviousDisabled:y,isPreviousHidden:v,onGoToPrevious:b,previousLabel:A,labelId:E,classes:T}=i,C=Ne(i,K$),{ownerState:D}=tr(),O=tG(T),N={isDisabled:d,isHidden:f,goTo:p,label:g},M={isDisabled:y,isHidden:v,goTo:b,label:A},R=(o==null?void 0:o.previousIconButton)??qI,I=Et({elementType:R,externalSlotProps:c==null?void 0:c.previousIconButton,additionalProps:{size:"medium",title:M.label,"aria-label":M.label,disabled:M.isDisabled,edge:"end",onClick:M.goTo},ownerState:H({},D,{isButtonHidden:M.isHidden??!1}),className:Ut(O.button,O.previousIconButton)}),B=(o==null?void 0:o.nextIconButton)??qI,L=Et({elementType:B,externalSlotProps:c==null?void 0:c.nextIconButton,additionalProps:{size:"medium",title:N.label,"aria-label":N.label,disabled:N.isDisabled,edge:"start",onClick:N.goTo},ownerState:H({},D,{isButtonHidden:N.isHidden??!1}),className:Ut(O.button,O.nextIconButton)}),k=(o==null?void 0:o.leftArrowIcon)??z$,F=Et({elementType:k,externalSlotProps:c==null?void 0:c.leftArrowIcon,additionalProps:{fontSize:"inherit"},ownerState:D,className:O.leftArrowIcon}),q=Ne(F,Q$),X=(o==null?void 0:o.rightArrowIcon)??$$,G=Et({elementType:X,externalSlotProps:c==null?void 0:c.rightArrowIcon,additionalProps:{fontSize:"inherit"},ownerState:D,className:O.rightArrowIcon}),Y=Ne(G,Z$);return x.jsxs(J$,H({ref:t,className:Ut(O.root,s),ownerState:D},C,{children:[x.jsx(R,H({},I,{children:r?x.jsx(X,H({},Y)):x.jsx(k,H({},q))})),a?x.jsx(se,{variant:"subtitle1",component:"span",id:E,children:a}):x.jsx(eG,{className:O.spacer,ownerState:D}),x.jsx(B,H({},L,{children:r?x.jsx(k,H({},q)):x.jsx(X,H({},Y))}))]}))}),nO=["hours","minutes","seconds"],rG=["hours","minutes","seconds","meridiem"],g0=n=>nO.includes(n),yd=n=>rG.includes(n),iG=(n,e)=>n?e.getHours(n)>=12?"pm":"am":null,fw=(n,e,t)=>t&&(n>=12?"pm":"am")!==e?e==="am"?n-12:n+12:n,aG=(n,e,t,r)=>{const i=fw(r.getHours(n),e,t);return r.setHours(n,i)},XI=(n,e)=>e.getHours(n)*3600+e.getMinutes(n)*60+e.getSeconds(n),qm=(n,e)=>(t,r)=>n?e.isAfter(t,r):XI(t,e)>XI(r,e),KI=(n,{format:e,views:t,ampm:r})=>{if(e!=null)return e;const i=n.formats;return fs(t,["hours"])?r?`${i.hours12h} ${i.meridiem}`:i.hours24h:fs(t,["minutes"])?i.minutes:fs(t,["seconds"])?i.seconds:fs(t,["minutes","seconds"])?`${i.minutes}:${i.seconds}`:fs(t,["hours","minutes","seconds"])?r?`${i.hours12h}:${i.minutes}:${i.seconds} ${i.meridiem}`:`${i.hours24h}:${i.minutes}:${i.seconds}`:r?`${i.hours12h}:${i.minutes} ${i.meridiem}`:`${i.hours24h}:${i.minutes}`},rO={hasNextStep:!1,hasSeveralSteps:!1,goToNextStep:()=>{},areViewsInSameStep:()=>!0};function sG(n){const{steps:e,isViewMatchingStep:t,onStepChange:r}=n;return i=>{if(e==null)return rO;const a=e.findIndex(o=>t(i.view,o)),s=a===-1||a===e.length-1?null:e[a+1];return{hasNextStep:s!=null,hasSeveralSteps:e.length>1,goToNextStep:()=>{s!=null&&r(H({},i,{step:s}))},areViewsInSameStep:(o,c)=>{const d=e.find(p=>t(o,p)),f=e.find(p=>t(c,p));return d===f}}}}function Xm({onChange:n,onViewChange:e,openTo:t,view:r,views:i,autoFocus:a,focusedView:s,onFocusedViewChange:o,getStepNavigation:c}){const d=V.useRef(t),f=V.useRef(i),p=V.useRef(i.includes(t)?t:i[0]),[g,y]=Nd({name:"useViews",state:"view",controlled:r,default:p.current}),v=V.useRef(a?g:null),[b,A]=Nd({name:"useViews",state:"focusedView",controlled:s,default:v.current}),E=c?c({setView:y,view:g,defaultView:p.current,views:i}):rO;V.useEffect(()=>{(d.current&&d.current!==t||f.current&&f.current.some(I=>!i.includes(I)))&&(y(i.includes(t)?t:i[0]),f.current=i,d.current=t)},[t,y,g,i]);const T=i.indexOf(g),C=i[T-1]??null,D=i[T+1]??null,O=Ve((I,B)=>{A(B?I:L=>I===L?null:L),o==null||o(I,B)}),N=Ve(I=>{O(I,!0),I!==g&&(y(I),e&&e(I))}),M=Ve(()=>{D&&N(D)}),R=Ve((I,B,L)=>{const k=B==="finish",F=L?i.indexOf(L)<i.length-1:!!D;n(I,k&&F?"partial":B,L);let X=null;if(L!=null&&L!==g?X=L:k&&(X=g),X==null)return;const G=i[i.indexOf(X)+1];G==null||!E.areViewsInSameStep(X,G)||N(G)});return H({},E,{view:g,setView:N,focusedView:b,setFocusedView:O,nextView:D,previousView:C,defaultView:i.includes(t)?t:i[0],goToNextView:M,setValueAndGoToNextView:R})}function oG(n,{disableFuture:e,maxDate:t,timezone:r}){const i=Wt();return V.useMemo(()=>{const a=i.date(void 0,r),s=i.startOfMonth(e&&i.isBefore(a,t)?a:t);return!i.isAfter(s,n)},[e,t,n,i,r])}function lG(n,{disablePast:e,minDate:t,timezone:r}){const i=Wt();return V.useMemo(()=>{const a=i.date(void 0,r),s=i.startOfMonth(e&&i.isAfter(a,t)?a:t);return!i.isBefore(s,n)},[e,t,n,i,r])}function iO(n,e,t,r){const i=Wt(),a=V.useMemo(()=>i.isValid(n)?n:null,[i,n]),s=iG(a,i),o=V.useCallback(c=>{const d=a==null?null:aG(a,c,!!e,i);t(d,r??"partial")},[e,a,t,r,i]);return{meridiemMode:s,handleMeridiemChange:o}}const m0=36,Km=2,$d=320,cG=280,Gd=336,aO=232,zh=48,nb=Me("div")({overflow:"hidden",width:$d,maxHeight:Gd,display:"flex",flexDirection:"column",margin:"0 auto"}),tu=({name:n,timezone:e,value:t,defaultValue:r,referenceDate:i,onChange:a,valueManager:s})=>{const o=Wt(),[c,d]=Nd({name:n,state:"value",controlled:t,default:r??s.emptyValue}),f=V.useMemo(()=>s.getTimezone(o,c),[o,s,c]),p=Ve(b=>f==null?b:s.setTimezone(o,f,b)),g=V.useMemo(()=>e||f||(i?o.getTimezone(Array.isArray(i)?i[0]:i):"default"),[e,f,i,o]),y=V.useMemo(()=>s.setTimezone(o,g,c),[s,o,g,c]),v=Ve((b,...A)=>{const E=p(b);d(E),a==null||a(E,...A)});return{value:y,handleValueChange:v,timezone:g}},Pa={year:1,month:2,day:3,hours:4,minutes:5,seconds:6,milliseconds:7},uG=n=>Math.max(...n.map(e=>Pa[e.type]??1)),bh=(n,e,t)=>{if(e===Pa.year)return n.startOfYear(t);if(e===Pa.month)return n.startOfMonth(t);if(e===Pa.day)return n.startOfDay(t);let r=t;return e<Pa.minutes&&(r=n.setMinutes(r,0)),e<Pa.seconds&&(r=n.setSeconds(r,0)),e<Pa.milliseconds&&(r=n.setMilliseconds(r,0)),r},dG=({props:n,adapter:e,granularity:t,timezone:r,getTodayDate:i})=>{let a=i?i():bh(e,t,K_(e,r));n.minDate!=null&&e.isAfterDay(n.minDate,a)&&(a=bh(e,t,n.minDate)),n.maxDate!=null&&e.isBeforeDay(n.maxDate,a)&&(a=bh(e,t,n.maxDate));const s=qm(n.disableIgnoringDatePartForTimeValidation??!1,e);return n.minTime!=null&&s(n.minTime,a)&&(a=bh(e,t,n.disableIgnoringDatePartForTimeValidation?n.minTime:j1(e,a,n.minTime))),n.maxTime!=null&&s(a,n.maxTime)&&(a=bh(e,t,n.disableIgnoringDatePartForTimeValidation?n.maxTime:j1(e,a,n.maxTime))),a},fG=["value","referenceDate"],Ti={emptyValue:null,getTodayValue:K_,getInitialReferenceValue:n=>{let{value:e,referenceDate:t}=n,r=Ne(n,fG);return r.adapter.isValid(e)?e:t??dG(r)},cleanValue:_$,areValuesEqual:b$,isSameError:(n,e)=>n===e,hasError:n=>n!=null,defaultErrorState:null,getTimezone:(n,e)=>n.isValid(e)?n.getTimezone(e):null,setTimezone:(n,e,t)=>t==null?null:n.setTimezone(t,e)},hG={updateReferenceValue:(n,e,t)=>n.isValid(e)?e:t,getSectionsFromValue:(n,e)=>e(n),getV7HiddenInputValueFromSections:I$,getV6InputValueFromSections:D$,parseValueStr:(n,e,t)=>t(n.trim(),e),getDateFromSection:n=>n,getDateSectionsFromValue:n=>n,updateDateInValue:(n,e,t)=>t,clearDateSections:n=>n.map(e=>H({},e,{value:""}))},sO=({value:n,referenceDate:e,adapter:t,props:r,timezone:i})=>{const a=V.useMemo(()=>Ti.getInitialReferenceValue({value:n,adapter:t,props:r,referenceDate:e,granularity:Pa.day,timezone:i,getTodayDate:()=>K_(t,i,"date")}),[e,i]);return n??a};function pG(n){return Dt("MuiDigitalClock",n)}const hw=Rt("MuiDigitalClock",["root","list","item"]);function gG(n,e){return Array.isArray(e)?e.every(t=>n.indexOf(t)!==-1):n.indexOf(e)!==-1}const mG=n=>{setTimeout(n,0)},oO=(n=document)=>{const e=n.activeElement;return e?e.shadowRoot?oO(e.shadowRoot):e:null},ui=n=>oO(Wh(n)),H1=n=>Array.from(n.children).indexOf(ui(n)),yG="@media (pointer: fine)";function vG(...n){return n.reduce((e,t)=>(Array.isArray(t)?e.push(...t):t!=null&&e.push(t),e),[])}const xG=["ampm","timeStep","autoFocus","slots","slotProps","value","defaultValue","referenceDate","disableIgnoringDatePartForTimeValidation","maxTime","minTime","disableFuture","disablePast","minutesStep","shouldDisableTime","onChange","view","openTo","onViewChange","focusedView","onFocusedViewChange","className","classes","disabled","readOnly","views","skipDisabled","timezone"],wG=n=>yt({root:["root"],list:["list"],item:["item"]},pG,n),_G=Me(nb,{name:"MuiDigitalClock",slot:"Root"})({overflowY:"auto",width:"100%",scrollbarWidth:"thin","@media (prefers-reduced-motion: no-preference)":{scrollBehavior:"auto"},maxHeight:aO,variants:[{props:{hasDigitalClockAlreadyBeenRendered:!0},style:{"@media (prefers-reduced-motion: no-preference)":{scrollBehavior:"smooth"}}}]}),bG=Me(V3,{name:"MuiDigitalClock",slot:"List"})({padding:0}),AG=Me(Hn,{name:"MuiDigitalClock",slot:"Item",shouldForwardProp:n=>n!=="itemValue"&&n!=="formattedValue"})(({theme:n})=>({padding:"8px 16px",margin:"2px 4px","&:first-of-type":{marginTop:4},"&:hover":{backgroundColor:n.vars?`rgba(${n.vars.palette.primary.mainChannel} / ${n.vars.palette.action.hoverOpacity})`:Ts(n.palette.primary.main,n.palette.action.hoverOpacity)},"&.Mui-selected":{backgroundColor:(n.vars||n).palette.primary.main,color:(n.vars||n).palette.primary.contrastText,"&:focus-visible, &:hover":{backgroundColor:(n.vars||n).palette.primary.dark}},"&.Mui-focusVisible":{backgroundColor:n.vars?`rgba(${n.vars.palette.primary.mainChannel} / ${n.vars.palette.action.focusOpacity})`:Ts(n.palette.primary.main,n.palette.action.focusOpacity)}})),EG=V.forwardRef(function(e,t){const r=Wt(),i=V.useRef(null),a=ti(t,i),s=V.useRef(null),o=xt({props:e,name:"MuiDigitalClock"}),{ampm:c=r.is12HourCycleInCurrentLocale(),timeStep:d=30,autoFocus:f,slots:p,slotProps:g,value:y,defaultValue:v,referenceDate:b,disableIgnoringDatePartForTimeValidation:A=!1,maxTime:E,minTime:T,disableFuture:C,disablePast:D,minutesStep:O=1,shouldDisableTime:N,onChange:M,view:R,openTo:I,onViewChange:B,focusedView:L,onFocusedViewChange:k,className:F,classes:q,disabled:X,readOnly:G,views:Y=["hours"],skipDisabled:Q=!1,timezone:Z}=o,fe=Ne(o,xG),{value:ge,handleValueChange:we,timezone:Ae}=tu({name:"DigitalClock",timezone:Z,value:y,defaultValue:v,referenceDate:b,onChange:M,valueManager:Ti}),Pe=Ga(),Re=uf(Ae),{ownerState:He}=tr(),Ue=H({},He,{hasDigitalClockAlreadyBeenRendered:!!i.current}),Qe=wG(q),ae=(p==null?void 0:p.digitalClockItem)??AG,me=Et({elementType:ae,externalSlotProps:g==null?void 0:g.digitalClockItem,ownerState:Ue,className:Qe.item}),he=sO({value:ge,referenceDate:b,adapter:r,props:o,timezone:Ae}),te=Ve($e=>we($e,"finish","hours")),{setValueAndGoToNextView:Le}=Xm({view:R,views:Y,openTo:I,onViewChange:B,onChange:te,focusedView:L,onFocusedViewChange:k}),ve=Ve($e=>{Le($e,"finish")});Gn(()=>{if(i.current===null)return;const $e=i.current.querySelector('[role="listbox"] [role="option"][tabindex="0"], [role="listbox"] [role="option"][aria-selected="true"]');if(!$e)return;const Ie=$e.offsetTop;(f||L)&&$e.focus(),i.current.scrollTop=Ie-4});const je=V.useCallback($e=>{const Ie=qm(A,r),Oe=()=>!(T&&Ie(T,$e)||E&&Ie($e,E)||C&&Ie($e,Re)||D&&Ie(Re,$e)),ut=()=>r.getMinutes($e)%O!==0?!1:N?!N($e,"hours"):!0;return!Oe()||!ut()},[A,r,T,E,C,Re,D,O,N]),De=V.useMemo(()=>{const $e=[];let Oe=r.startOfDay(he);for(;r.isSameDay(he,Oe);)$e.push(Oe),Oe=r.addMinutes(Oe,d);return $e},[he,d,r]),Ce=De.findIndex($e=>r.isEqual($e,he)),We=$e=>{switch($e.key){case"PageUp":{const Ie=H1(s.current)-5,Oe=s.current.children,ut=Math.max(0,Ie),wt=Oe[ut];wt&&wt.focus(),$e.preventDefault();break}case"PageDown":{const Ie=H1(s.current)+5,Oe=s.current.children,ut=Math.min(Oe.length-1,Ie),wt=Oe[ut];wt&&wt.focus(),$e.preventDefault();break}}};return x.jsx(_G,H({ref:a,className:Ut(Qe.root,F),ownerState:Ue},fe,{children:x.jsx(bG,{ref:s,role:"listbox","aria-label":Pe.timePickerToolbarTitle,className:Qe.list,onKeyDown:We,children:De.map(($e,Ie)=>{const Oe=je($e);if(Q&&Oe)return null;const ut=r.isEqual($e,ge),wt=r.format($e,c?"fullTime12h":"fullTime24h"),Dn=Ce===Ie||Ce===-1&&Ie===0?0:-1;return x.jsx(ae,H({onClick:()=>!G&&ve($e),selected:ut,disabled:X||Oe,disableRipple:G,role:"option","aria-disabled":G,"aria-selected":ut,tabIndex:Dn,itemValue:$e,formattedValue:wt},me,{children:wt}),`${$e.valueOf()}-${wt}`)})})}))});function SG(n){return Dt("MuiMultiSectionDigitalClock",n)}const pw=Rt("MuiMultiSectionDigitalClock",["root"]);function TG(n){return Dt("MuiMultiSectionDigitalClockSection",n)}const gw=Rt("MuiMultiSectionDigitalClockSection",["root","item"]),CG=["autoFocus","onChange","className","classes","disabled","readOnly","items","active","slots","slotProps","skipDisabled"],IG=n=>yt({root:["root"],item:["item"]},TG,n),DG=Me(V3,{name:"MuiMultiSectionDigitalClockSection",slot:"Root"})(({theme:n})=>({maxHeight:aO,width:56,padding:0,overflow:"hidden",scrollbarWidth:"thin","@media (prefers-reduced-motion: no-preference)":{scrollBehavior:"auto"},"@media (pointer: fine)":{"&:hover":{overflowY:"auto"}},"@media (pointer: none), (pointer: coarse)":{overflowY:"auto"},"&:not(:first-of-type)":{borderLeft:`1px solid ${(n.vars||n).palette.divider}`},variants:[{props:{hasDigitalClockAlreadyBeenRendered:!0},style:{"@media (prefers-reduced-motion: no-preference)":{scrollBehavior:"smooth"}}}]})),RG=Me(Hn,{name:"MuiMultiSectionDigitalClockSection",slot:"Item"})(({theme:n})=>({padding:8,margin:"2px 4px",width:zh,justifyContent:"center","&:first-of-type":{marginTop:4},"&:hover":{backgroundColor:n.vars?`rgba(${n.vars.palette.primary.mainChannel} / ${n.vars.palette.action.hoverOpacity})`:Ts(n.palette.primary.main,n.palette.action.hoverOpacity)},"&.Mui-selected":{backgroundColor:(n.vars||n).palette.primary.main,color:(n.vars||n).palette.primary.contrastText,"&:focus-visible, &:hover":{backgroundColor:(n.vars||n).palette.primary.dark}},"&.Mui-focusVisible":{backgroundColor:n.vars?`rgba(${n.vars.palette.primary.mainChannel} / ${n.vars.palette.action.focusOpacity})`:Ts(n.palette.primary.main,n.palette.action.focusOpacity)}})),MG=V.forwardRef(function(e,t){const r=V.useRef(null),i=ti(t,r),a=V.useRef(null),s=xt({props:e,name:"MuiMultiSectionDigitalClockSection"}),{autoFocus:o,onChange:c,className:d,classes:f,disabled:p,readOnly:g,items:y,active:v,slots:b,slotProps:A,skipDisabled:E}=s,T=Ne(s,CG),{ownerState:C}=tr(),D=H({},C,{hasDigitalClockAlreadyBeenRendered:!!r.current}),O=IG(f),N=(b==null?void 0:b.digitalClockSectionItem)??RG;Gn(()=>{if(r.current===null)return;const I=r.current.querySelector('[role="option"][tabindex="0"], [role="option"][aria-selected="true"]');if(v&&o&&I&&I.focus(),!I||a.current===I)return;a.current=I;const B=I.offsetTop,L=I.offsetHeight,k=r.current.clientHeight,F=r.current.scrollHeight,q=B-k/2+L/2,X=F-k,G=Math.min(q,X);r.current.scrollTop=Math.max(0,G)});const M=y.findIndex(I=>I.isFocused(I.value)),R=I=>{switch(I.key){case"PageUp":{const B=H1(r.current)-5,L=r.current.children,k=Math.max(0,B),F=L[k];F&&F.focus(),I.preventDefault();break}case"PageDown":{const B=H1(r.current)+5,L=r.current.children,k=Math.min(L.length-1,B),F=L[k];F&&F.focus(),I.preventDefault();break}}};return x.jsx(DG,H({ref:i,className:Ut(O.root,d),ownerState:D,autoFocusItem:o&&v,role:"listbox",onKeyDown:R},T,{children:y.map((I,B)=>{var X;const L=(X=I.isDisabled)==null?void 0:X.call(I,I.value),k=p||L;if(E&&k)return null;const F=I.isSelected(I.value),q=M===B||M===-1&&B===0?0:-1;return x.jsx(N,H({onClick:()=>!g&&c(I.value),selected:F,disabled:k,disableRipple:g,role:"option","aria-disabled":g||k||void 0,"aria-label":I.ariaLabel,"aria-selected":F,tabIndex:q,className:O.item},A==null?void 0:A.digitalClockSectionItem,{children:I.label}),I.label)})}))}),OG=({now:n,value:e,adapter:t,ampm:r,isDisabled:i,resolveAriaLabel:a,timeStep:s,valueOrReferenceDate:o})=>{const c=e?t.getHours(e):null,d=[],f=(y,v)=>{const b=v??c;return b===null?!1:r?y===12?b===12||b===0:b===y||b-12===y:b===y},p=y=>f(y,t.getHours(o)),g=r?11:23;for(let y=0;y<=g;y+=s){let v=t.format(t.setHours(n,y),r?"hours12h":"hours24h");const b=a(parseInt(v,10).toString());v=t.formatNumber(v),d.push({value:y,label:v,isSelected:f,isDisabled:i,isFocused:p,ariaLabel:b})}return d},QI=({value:n,adapter:e,isDisabled:t,timeStep:r,resolveLabel:i,resolveAriaLabel:a,hasValue:s=!0})=>{const o=d=>n===null?!1:s&&n===d,c=d=>n===d;return[...Array.from({length:Math.ceil(60/r)},(d,f)=>{const p=r*f;return{value:p,label:e.formatNumber(i(p)),isDisabled:t,isSelected:o,isFocused:c,ariaLabel:a(p.toString())}})]},PG=["ampm","timeSteps","autoFocus","slots","slotProps","value","defaultValue","referenceDate","disableIgnoringDatePartForTimeValidation","maxTime","minTime","disableFuture","disablePast","minutesStep","shouldDisableTime","onChange","view","views","openTo","onViewChange","focusedView","onFocusedViewChange","className","classes","disabled","readOnly","skipDisabled","timezone"],kG=n=>yt({root:["root"]},SG,n),NG=Me(nb,{name:"MuiMultiSectionDigitalClock",slot:"Root"})(({theme:n})=>({flexDirection:"row",width:"100%",borderBottom:`1px solid ${(n.vars||n).palette.divider}`})),LG=V.forwardRef(function(e,t){const r=Wt(),i=wa(),a=xt({props:e,name:"MuiMultiSectionDigitalClock"}),{ampm:s=r.is12HourCycleInCurrentLocale(),timeSteps:o,autoFocus:c,slots:d,slotProps:f,value:p,defaultValue:g,referenceDate:y,disableIgnoringDatePartForTimeValidation:v=!1,maxTime:b,minTime:A,disableFuture:E,disablePast:T,minutesStep:C=1,shouldDisableTime:D,onChange:O,view:N,views:M=["hours","minutes"],openTo:R,onViewChange:I,focusedView:B,onFocusedViewChange:L,className:k,classes:F,disabled:q,readOnly:X,skipDisabled:G=!1,timezone:Y}=a,Q=Ne(a,PG),{value:Z,handleValueChange:fe,timezone:ge}=tu({name:"MultiSectionDigitalClock",timezone:Y,value:p,defaultValue:g,referenceDate:y,onChange:O,valueManager:Ti}),we=Ga(),Ae=uf(ge),Pe=V.useMemo(()=>H({hours:1,minutes:5,seconds:5},o),[o]),Re=sO({value:Z,referenceDate:y,adapter:r,props:a,timezone:ge}),He=Ve((Ie,Oe,ut)=>fe(Ie,Oe,ut)),Ue=V.useMemo(()=>!s||!M.includes("hours")||M.includes("meridiem")?M:[...M,"meridiem"],[s,M]),{view:Qe,setValueAndGoToNextView:ae,focusedView:me}=Xm({view:N,views:Ue,openTo:R,onViewChange:I,onChange:He,focusedView:B,onFocusedViewChange:L}),he=Ve(Ie=>{ae(Ie,"finish","meridiem")}),{meridiemMode:te,handleMeridiemChange:Le}=iO(Re,s,he,"finish"),ve=V.useCallback((Ie,Oe)=>{const ut=qm(v,r),wt=Oe==="hours"||Oe==="minutes"&&Ue.includes("seconds"),pn=({start:tt,end:rt})=>!(A&&ut(A,rt)||b&&ut(tt,b)||E&&ut(tt,Ae)||T&&ut(Ae,wt?rt:tt)),Dn=(tt,rt=1)=>{if(tt%rt!==0)return!1;if(D)switch(Oe){case"hours":return!D(r.setHours(Re,tt),"hours");case"minutes":return!D(r.setMinutes(Re,tt),"minutes");case"seconds":return!D(r.setSeconds(Re,tt),"seconds");default:return!1}return!0};switch(Oe){case"hours":{const tt=fw(Ie,te,s),rt=r.setHours(Re,tt);if(r.getHours(rt)!==tt)return!0;const bn=r.setSeconds(r.setMinutes(rt,0),0),Xe=r.setSeconds(r.setMinutes(rt,59),59);return!pn({start:bn,end:Xe})||!Dn(tt)}case"minutes":{const tt=r.setMinutes(Re,Ie),rt=r.setSeconds(tt,0),bn=r.setSeconds(tt,59);return!pn({start:rt,end:bn})||!Dn(Ie,C)}case"seconds":{const tt=r.setSeconds(Re,Ie);return!pn({start:tt,end:tt})||!Dn(Ie)}default:throw new Error("not supported")}},[s,Re,v,b,te,A,C,D,r,E,T,Ae,Ue]),je=V.useCallback(Ie=>{switch(Ie){case"hours":return{onChange:Oe=>{const ut=fw(Oe,te,s);ae(r.setHours(Re,ut),"finish","hours")},items:OG({now:Ae,value:Z,ampm:s,adapter:r,isDisabled:Oe=>ve(Oe,"hours"),timeStep:Pe.hours,resolveAriaLabel:we.hoursClockNumberText,valueOrReferenceDate:Re})};case"minutes":return{onChange:Oe=>{ae(r.setMinutes(Re,Oe),"finish","minutes")},items:QI({value:r.getMinutes(Re),adapter:r,isDisabled:Oe=>ve(Oe,"minutes"),resolveLabel:Oe=>r.format(r.setMinutes(Ae,Oe),"minutes"),timeStep:Pe.minutes,hasValue:!!Z,resolveAriaLabel:we.minutesClockNumberText})};case"seconds":return{onChange:Oe=>{ae(r.setSeconds(Re,Oe),"finish","seconds")},items:QI({value:r.getSeconds(Re),adapter:r,isDisabled:Oe=>ve(Oe,"seconds"),resolveLabel:Oe=>r.format(r.setSeconds(Ae,Oe),"seconds"),timeStep:Pe.seconds,hasValue:!!Z,resolveAriaLabel:we.secondsClockNumberText})};case"meridiem":{const Oe=Jh(r,"am"),ut=Jh(r,"pm");return{onChange:Le,items:[{value:"am",label:Oe,isSelected:()=>!!Z&&te==="am",isFocused:()=>!!Re&&te==="am",ariaLabel:Oe},{value:"pm",label:ut,isSelected:()=>!!Z&&te==="pm",isFocused:()=>!!Re&&te==="pm",ariaLabel:ut}]}}default:throw new Error(`Unknown view: ${Ie} found.`)}},[Ae,Z,s,r,Pe.hours,Pe.minutes,Pe.seconds,we.hoursClockNumberText,we.minutesClockNumberText,we.secondsClockNumberText,te,ae,Re,ve,Le]),De=V.useMemo(()=>{if(!i)return Ue;const Ie=Ue.filter(Oe=>Oe!=="meridiem");return Ie.reverse(),Ue.includes("meridiem")&&Ie.push("meridiem"),Ie},[i,Ue]),Ce=V.useMemo(()=>Ue.reduce((Ie,Oe)=>H({},Ie,{[Oe]:je(Oe)}),{}),[Ue,je]),{ownerState:We}=tr(),$e=kG(F);return x.jsx(NG,H({ref:t,className:Ut($e.root,k),ownerState:We,role:"group"},Q,{children:De.map(Ie=>x.jsx(MG,{items:Ce[Ie].items,onChange:Ce[Ie].onChange,active:Qe===Ie,autoFocus:c||me===Ie,disabled:q,readOnly:X,slots:d,slotProps:f,skipDisabled:G,"aria-label":we.selectViewText(Ie)},Ie))}))});function BG(n){return Dt("MuiPickersDay",n)}const _c=Rt("MuiPickersDay",["root","dayWithMargin","dayOutsideMonth","hiddenDaySpacingFiller","today","selected","disabled"]);function lO(n){const{disabled:e,selected:t,today:r,outsideCurrentMonth:i,day:a,disableMargin:s,disableHighlightToday:o,showDaysOutsideCurrentMonth:c}=n,d=Wt(),{ownerState:f}=tr();return V.useMemo(()=>H({},f,{day:a,isDaySelected:t??!1,isDayDisabled:e??!1,isDayCurrent:r??!1,isDayOutsideMonth:i??!1,isDayStartOfWeek:d.isSameDay(a,d.startOfWeek(a)),isDayEndOfWeek:d.isSameDay(a,d.endOfWeek(a)),disableMargin:s??!1,disableHighlightToday:o??!1,showDaysOutsideCurrentMonth:c??!1}),[d,f,a,t,e,r,i,s,o,c])}const VG=["autoFocus","className","classes","hidden","isAnimating","onClick","onDaySelect","onFocus","onBlur","onKeyDown","onMouseDown","onMouseEnter","children","isFirstVisibleCell","isLastVisibleCell","day","selected","disabled","today","outsideCurrentMonth","disableMargin","disableHighlightToday","showDaysOutsideCurrentMonth"],FG=(n,e)=>{const{isDaySelected:t,isDayDisabled:r,isDayCurrent:i,isDayOutsideMonth:a,disableMargin:s,disableHighlightToday:o,showDaysOutsideCurrentMonth:c}=e,d=a&&!c;return yt({root:["root",t&&!d&&"selected",r&&"disabled",!s&&"dayWithMargin",!o&&i&&"today",a&&c&&"dayOutsideMonth",d&&"hiddenDaySpacingFiller"],hiddenDaySpacingFiller:["hiddenDaySpacingFiller"]},BG,n)},cO=({theme:n})=>H({},n.typography.caption,{width:m0,height:m0,borderRadius:"50%",padding:0,backgroundColor:"transparent",transition:n.transitions.create("background-color",{duration:n.transitions.duration.short}),color:(n.vars||n).palette.text.primary,"@media (pointer: fine)":{"&:hover":{backgroundColor:n.vars?`rgba(${n.vars.palette.primary.mainChannel} / ${n.vars.palette.action.hoverOpacity})`:Ts(n.palette.primary.main,n.palette.action.hoverOpacity)}},"&:focus":{backgroundColor:n.vars?`rgba(${n.vars.palette.primary.mainChannel} / ${n.vars.palette.action.focusOpacity})`:Ts(n.palette.primary.main,n.palette.action.focusOpacity),[`&.${_c.selected}`]:{willChange:"background-color",backgroundColor:(n.vars||n).palette.primary.dark}},[`&.${_c.selected}`]:{color:(n.vars||n).palette.primary.contrastText,backgroundColor:(n.vars||n).palette.primary.main,fontWeight:n.typography.fontWeightMedium,"&:hover":{willChange:"background-color",backgroundColor:(n.vars||n).palette.primary.dark}},[`&.${_c.disabled}:not(.${_c.selected})`]:{color:(n.vars||n).palette.text.disabled},[`&.${_c.disabled}&.${_c.selected}`]:{opacity:.6},variants:[{props:{disableMargin:!1},style:{margin:`0 ${Km}px`}},{props:{isDayOutsideMonth:!0,showDaysOutsideCurrentMonth:!0},style:{color:(n.vars||n).palette.text.secondary}},{props:{disableHighlightToday:!1,isDayCurrent:!0},style:{[`&:not(.${_c.selected})`]:{border:`1px solid ${(n.vars||n).palette.text.secondary}`}}}]}),uO=(n,e)=>{const{ownerState:t}=n;return[e.root,!t.disableMargin&&e.dayWithMargin,!t.disableHighlightToday&&t.isDayCurrent&&e.today,!t.isDayOutsideMonth&&t.showDaysOutsideCurrentMonth&&e.dayOutsideMonth,t.isDayOutsideMonth&&!t.showDaysOutsideCurrentMonth&&e.hiddenDaySpacingFiller]},jG=Me(aN,{name:"MuiPickersDay",slot:"Root",overridesResolver:uO})(cO),UG=Me("div",{name:"MuiPickersDay",slot:"Root",overridesResolver:uO})(({theme:n})=>H({},cO({theme:n}),{opacity:0,pointerEvents:"none"})),Ah=()=>{},HG=V.forwardRef(function(e,t){const r=xt({props:e,name:"MuiPickersDay"}),{autoFocus:i=!1,className:a,classes:s,isAnimating:o,onClick:c,onDaySelect:d,onFocus:f=Ah,onBlur:p=Ah,onKeyDown:g=Ah,onMouseDown:y=Ah,onMouseEnter:v=Ah,children:b,day:A,selected:E,disabled:T,today:C,outsideCurrentMonth:D,disableMargin:O,disableHighlightToday:N,showDaysOutsideCurrentMonth:M}=r,R=Ne(r,VG),I=lO({day:A,selected:E,disabled:T,today:C,outsideCurrentMonth:D,disableMargin:O,disableHighlightToday:N,showDaysOutsideCurrentMonth:M}),B=FG(s,I),L=Wt(),k=V.useRef(null),F=ti(k,t);Gn(()=>{i&&!T&&!o&&!D&&k.current.focus()},[i,T,o,D]);const q=G=>{y(G),D&&G.preventDefault()},X=G=>{G.defaultMuiPrevented=!0,T||d(A),D&&G.currentTarget.focus(),c&&c(G)};return D&&!M?x.jsx(UG,{className:Ut(B.root,B.hiddenDaySpacingFiller,a),ownerState:I,role:R.role}):x.jsx(jG,H({className:Ut(B.root,a),ref:F,centerRipple:!0,disabled:T,tabIndex:E?0:-1,onKeyDown:G=>g(G,A),onFocus:G=>f(G,A),onBlur:G=>p(G,A),onMouseEnter:G=>v(G,A),onClick:X,onMouseDown:q},R,{ownerState:I,children:b??L.format(A,"dayOfMonth")}))}),zG=V.memo(HG),Zu=n=>n.saveQuery!=null,dO=({stateResponse:{localizedDigits:n,sectionsValueBoundaries:e,state:t,timezone:r,setCharacterQuery:i,setTempAndroidValueStr:a,updateSectionValue:s}})=>{const o=Wt(),c=({keyPressed:p,sectionIndex:g},y,v)=>{const b=p.toLowerCase(),A=t.sections[g];if(t.characterQuery!=null&&(!v||v(t.characterQuery.value))&&t.characterQuery.sectionIndex===g){const T=`${t.characterQuery.value}${b}`,C=y(T,A);if(!Zu(C))return i({sectionIndex:g,value:T,sectionType:A.type}),C}const E=y(b,A);return Zu(E)&&!E.saveQuery?(i(null),null):(i({sectionIndex:g,value:b,sectionType:A.type}),Zu(E)?null:E)},d=p=>{const g=(b,A,E)=>{const T=A.filter(C=>C.toLowerCase().startsWith(E));return T.length===0?{saveQuery:!1}:{sectionValue:T[0],shouldGoToNextSection:T.length===1}},y=(b,A,E,T)=>{const C=D=>W4(o,r,A.type,D);if(A.contentType==="letter")return g(A.format,C(A.format),b);if(E&&T!=null&&G4(o,E).contentType==="letter"){const D=C(E),O=g(E,D,b);return Zu(O)?{saveQuery:!1}:H({},O,{sectionValue:T(O.sectionValue,D)})}return{saveQuery:!1}};return c(p,(b,A)=>{switch(A.type){case"month":{const E=T=>$I(o,T,o.formats.month,A.format);return y(b,A,o.formats.month,E)}case"weekDay":{const E=(T,C)=>C.indexOf(T).toString();return y(b,A,o.formats.weekday,E)}case"meridiem":return y(b,A);default:return{saveQuery:!1}}})},f=p=>{const g=({queryValue:v,skipIfBelowMinimum:b,section:A})=>{const E=qc(v,n),T=Number(E),C=e[A.type]({currentDate:null,format:A.format,contentType:A.contentType});if(T>C.maximum)return{saveQuery:!1};if(b&&T<C.minimum)return{saveQuery:!0};const D=T*10>C.maximum||E.length===C.maximum.toString().length;return{sectionValue:Y4(o,T,C,n,A),shouldGoToNextSection:D}};return c(p,(v,b)=>{if(b.contentType==="digit"||b.contentType==="digit-with-letter")return g({queryValue:v,skipIfBelowMinimum:!1,section:b});if(b.type==="month"){q4(o,"digit","month","MM");const A=g({queryValue:v,skipIfBelowMinimum:!0,section:{type:b.type,format:"MM",hasLeadingZerosInInput:!0,contentType:"digit",maxLength:2}});if(Zu(A))return A;const E=$I(o,A.sectionValue,"MM",b.format);return H({},A,{sectionValue:E})}if(b.type==="weekDay"){const A=g({queryValue:v,skipIfBelowMinimum:!0,section:b});if(Zu(A))return A;const E=Ym(o,b.format)[Number(A.sectionValue)-1];return H({},A,{sectionValue:E})}return{saveQuery:!1}},v=>zI(v,n))};return Ve(p=>{const g=t.sections[p.sectionIndex],v=zI(p.keyPressed,n)?f(H({},p,{keyPressed:Q_(p.keyPressed,n)})):d(p);if(v==null){a(null);return}s({section:g,newSectionValue:v.sectionValue,shouldGoToNextSection:v.shouldGoToNextSection})})},rb=({props:n,value:e,timezone:t,adapter:r})=>{if(e===null)return null;const{shouldDisableDate:i,shouldDisableMonth:a,shouldDisableYear:s,disablePast:o,disableFuture:c,minDate:d,maxDate:f}=n,p=r.date(void 0,t);switch(!0){case!r.isValid(e):return"invalidDate";case!!(i&&i(e)):return"shouldDisableDate";case!!(a&&a(e)):return"shouldDisableMonth";case!!(s&&s(e)):return"shouldDisableYear";case!!(c&&r.isAfterDay(e,p)):return"disableFuture";case!!(o&&r.isBeforeDay(e,p)):return"disablePast";case!!(d&&r.isBeforeDay(e,d)):return"minDate";case!!(f&&r.isAfterDay(e,f)):return"maxDate";default:return null}};rb.valueManager=Ti;const fO=({adapter:n,value:e,timezone:t,props:r})=>{if(e===null)return null;const{minTime:i,maxTime:a,minutesStep:s,shouldDisableTime:o,disableIgnoringDatePartForTimeValidation:c=!1,disablePast:d,disableFuture:f}=r,p=n.date(void 0,t),g=qm(c,n);switch(!0){case!n.isValid(e):return"invalidDate";case!!(i&&g(i,e)):return"minTime";case!!(a&&g(e,a)):return"maxTime";case!!(f&&n.isAfter(e,p)):return"disableFuture";case!!(d&&n.isBefore(e,p)):return"disablePast";case!!(o&&o(e,"hours")):return"shouldDisableTime-hours";case!!(o&&o(e,"minutes")):return"shouldDisableTime-minutes";case!!(o&&o(e,"seconds")):return"shouldDisableTime-seconds";case!!(s&&n.getMinutes(e)%s!==0):return"minutesStep";default:return null}};fO.valueManager=Ti;const Qm=({adapter:n,value:e,timezone:t,props:r})=>{const i=rb({adapter:n,value:e,timezone:t,props:r});return i!==null?i:fO({adapter:n,value:e,timezone:t,props:r})};Qm.valueManager=Ti;function hO(n){const{props:e,validator:t,value:r,timezone:i,onError:a}=n,s=Wt(),o=V.useRef(t.valueManager.defaultErrorState),c=t({adapter:s,value:r,timezone:i,props:e}),d=t.valueManager.hasError(c);V.useEffect(()=>{a&&!t.valueManager.isSameError(c,o.current)&&a(c,r),o.current=c},[t,a,c,r]);const f=Ve(p=>t({adapter:s,value:p,timezone:i,props:e}));return{validationError:c,hasValidationError:d,getValidationErrorForNewValue:f}}const $G=5e3,pO=n=>{var De;const e=Wt(),t=Ga(),r=wa(),{manager:{validator:i,valueType:a,internal_valueManager:s,internal_fieldValueManager:o},internalPropsWithDefaults:c,internalPropsWithDefaults:{value:d,defaultValue:f,referenceDate:p,onChange:g,format:y,formatDensity:v="dense",selectedSections:b,onSelectedSectionsChange:A,shouldRespectLeadingZeros:E=!1,timezone:T,enableAccessibleFieldDOMStructure:C=!0},forwardedProps:{error:D}}=n,{value:O,handleValueChange:N,timezone:M}=tu({name:"a field component",timezone:T,value:d,defaultValue:f,referenceDate:p,onChange:g,valueManager:s}),R=V.useRef(O);V.useEffect(()=>{R.current=O},[O]);const{hasValidationError:I}=hO({props:c,validator:i,timezone:M,value:O,onError:c.onError}),B=V.useMemo(()=>D!==void 0?D:I,[I,D]),L=V.useMemo(()=>S$(e),[e]),k=V.useMemo(()=>R$(e,L,M),[e,L,M]),F=V.useCallback(Ce=>o.getSectionsFromValue(Ce,We=>YI({adapter:e,localeText:t,localizedDigits:L,format:y,date:We,formatDensity:v,shouldRespectLeadingZeros:E,enableAccessibleFieldDOMStructure:C,isRtl:r})),[o,y,t,L,r,E,e,v,C]),[q,X]=V.useState(()=>{const Ce=F(O),We={sections:Ce,lastExternalValue:O,lastSectionsDependencies:{format:y,isRtl:r,locale:e.locale},tempValueStrAndroid:null,characterQuery:null},$e=uG(Ce),Ie=s.getInitialReferenceValue({referenceDate:p,value:O,adapter:e,props:c,granularity:$e,timezone:M});return H({},We,{referenceValue:Ie})}),[G,Y]=Nd({controlled:b,default:null,name:"useField",state:"selectedSections"}),Q=Ce=>{Y(Ce),A==null||A(Ce)},Z=V.useMemo(()=>dw(G,q.sections),[G,q.sections]),fe=Z==="all"?0:Z,ge=V.useMemo(()=>P$(q.sections,r&&!C),[q.sections,r,C]),we=V.useMemo(()=>q.sections.every(Ce=>Ce.value===""),[q.sections]),Ae=Ce=>{const We={validationError:i({adapter:e,value:Ce,timezone:M,props:c})};N(Ce,We)},Pe=(Ce,We)=>{const $e=[...q.sections];return $e[Ce]=H({},$e[Ce],{value:We,modified:!0}),$e},Re=V.useRef(null),He=Ad(),Ue=Ce=>{fe!=null&&(Re.current={sectionIndex:fe,value:Ce},He.start(0,()=>{Re.current=null}))},Qe=()=>{s.areValuesEqual(e,O,s.emptyValue)?X(Ce=>H({},Ce,{sections:Ce.sections.map(We=>H({},We,{value:""})),tempValueStrAndroid:null,characterQuery:null})):(X(Ce=>H({},Ce,{characterQuery:null})),Ae(s.emptyValue))},ae=()=>{if(fe==null)return;const Ce=q.sections[fe];Ce.value!==""&&(Ue(""),o.getDateFromSection(O,Ce)===null?X(We=>H({},We,{sections:Pe(fe,""),tempValueStrAndroid:null,characterQuery:null})):(X(We=>H({},We,{characterQuery:null})),Ae(o.updateDateInValue(O,Ce,null))))},me=Ce=>{const We=(Ie,Oe)=>{const ut=e.parse(Ie,y);if(!e.isValid(ut))return null;const wt=YI({adapter:e,localeText:t,localizedDigits:L,format:y,date:ut,formatDensity:v,shouldRespectLeadingZeros:E,enableAccessibleFieldDOMStructure:C,isRtl:r});return WI(e,ut,wt,Oe,!1)},$e=o.parseValueStr(Ce,q.referenceValue,We);Ae($e)},he=Ad(),te=({section:Ce,newSectionValue:We,shouldGoToNextSection:$e})=>{He.clear(),he.clear();const Ie=o.getDateFromSection(O,Ce);$e&&fe<q.sections.length-1&&Q(fe+1);const Oe=Pe(fe,We),ut=o.getDateSectionsFromValue(Oe,Ce),wt=C$(e,ut,L);if(e.isValid(wt)){const pn=WI(e,wt,ut,o.getDateFromSection(q.referenceValue,Ce),!0);return Ie==null&&he.start(0,()=>{R.current===O&&X(Dn=>H({},Dn,{sections:o.clearDateSections(q.sections,Ce),tempValueStrAndroid:null}))}),Ae(o.updateDateInValue(O,Ce,pn))}return ut.every(pn=>pn.value!=="")&&(Ie==null||e.isValid(Ie))?(Ue(We),Ae(o.updateDateInValue(O,Ce,wt))):Ie!=null?(Ue(We),Ae(o.updateDateInValue(O,Ce,null))):X(pn=>H({},pn,{sections:Oe,tempValueStrAndroid:null}))},Le=Ce=>X(We=>H({},We,{tempValueStrAndroid:Ce})),ve=Ve(Ce=>{X(We=>H({},We,{characterQuery:Ce}))});if(O!==q.lastExternalValue){let Ce;Re.current!=null&&!e.isValid(o.getDateFromSection(O,q.sections[Re.current.sectionIndex]))?Ce=Pe(Re.current.sectionIndex,Re.current.value):Ce=F(O),X(We=>H({},We,{lastExternalValue:O,sections:Ce,sectionsDependencies:{format:y,isRtl:r,locale:e.locale},referenceValue:o.updateReferenceValue(e,O,We.referenceValue),tempValueStrAndroid:null}))}if(r!==q.lastSectionsDependencies.isRtl||y!==q.lastSectionsDependencies.format||e.locale!==q.lastSectionsDependencies.locale){const Ce=F(O);X(We=>H({},We,{lastSectionsDependencies:{format:y,isRtl:r,locale:e.locale},sections:Ce,tempValueStrAndroid:null,characterQuery:null}))}q.characterQuery!=null&&!B&&fe==null&&ve(null),q.characterQuery!=null&&((De=q.sections[q.characterQuery.sectionIndex])==null?void 0:De.type)!==q.characterQuery.sectionType&&ve(null),V.useEffect(()=>{Re.current!=null&&(Re.current=null)});const je=Ad();return V.useEffect(()=>(q.characterQuery!=null&&je.start($G,()=>ve(null)),()=>{}),[q.characterQuery,ve,je]),V.useEffect(()=>{q.tempValueStrAndroid!=null&&fe!=null&&ae()},[q.sections]),{activeSectionIndex:fe,areAllSectionsEmpty:we,error:B,localizedDigits:L,parsedSelectedSections:Z,sectionOrder:ge,sectionsValueBoundaries:k,state:q,timezone:M,value:O,clearValue:Qe,clearActiveSection:ae,setCharacterQuery:ve,setSelectedSections:Q,setTempAndroidValueStr:Le,updateSectionValue:te,updateValueFromValueStr:me,getSectionsFromValue:F}};function gO(n){const{manager:{internal_useApplyDefaultValuesToFieldInternalProps:e},internalProps:t,skipContextFieldRefAssignment:r}=n,i=tb(),a=Q4(),s=ti(t.unstableFieldRef,r?null:a==null?void 0:a.fieldRef),o=i==null?void 0:i.setValue,c=V.useCallback((f,p)=>o==null?void 0:o(f,{validationError:p.validationError,shouldClose:!1}),[o]),d=V.useMemo(()=>a!=null&&i!=null?H({value:i.value,onChange:c,timezone:i.timezone,disabled:i.disabled,readOnly:i.readOnly,autoFocus:i.autoFocus&&!i.open,focused:i.open?!0:void 0,format:i.fieldFormat,formatDensity:a.formatDensity,enableAccessibleFieldDOMStructure:a.enableAccessibleFieldDOMStructure,selectedSections:a.selectedSections,onSelectedSectionsChange:a.onSelectedSectionsChange,unstableFieldRef:s},t):t,[i,a,t,c,s]);return e(d)}function ib(n){const{focused:e,domGetters:t,stateResponse:{parsedSelectedSections:r,state:i}}=n;if(!t.isReady())return;const a=Wh(t.getRoot()).getSelection();if(!a)return;if(r==null){a.rangeCount>0&&a.getRangeAt(0).startContainer instanceof Node&&t.getRoot().contains(a.getRangeAt(0).startContainer)&&a.removeAllRanges(),e&&t.getRoot().blur();return}if(!t.getRoot().contains(ui(t.getRoot())))return;const s=new window.Range;let o;r==="all"?o=t.getRoot():i.sections[r].type==="empty"?o=t.getSectionContainer(r):o=t.getSectionContent(r),s.selectNodeContents(o),o.focus(),a.removeAllRanges(),a.addRange(s)}function mO(n){const e=Wt(),{manager:{internal_fieldValueManager:t},internalPropsWithDefaults:{minutesStep:r,disabled:i,readOnly:a},stateResponse:{state:s,value:o,activeSectionIndex:c,parsedSelectedSections:d,sectionsValueBoundaries:f,localizedDigits:p,timezone:g,sectionOrder:y,clearValue:v,clearActiveSection:b,setSelectedSections:A,updateSectionValue:E}}=n;return Ve(T=>{if(!i)switch(!0){case((T.ctrlKey||T.metaKey)&&String.fromCharCode(T.keyCode)==="A"&&!T.shiftKey&&!T.altKey):{T.preventDefault(),A("all");break}case T.key==="ArrowRight":{if(T.preventDefault(),d==null)A(y.startIndex);else if(d==="all")A(y.endIndex);else{const C=y.neighbors[d].rightIndex;C!==null&&A(C)}break}case T.key==="ArrowLeft":{if(T.preventDefault(),d==null)A(y.endIndex);else if(d==="all")A(y.startIndex);else{const C=y.neighbors[d].leftIndex;C!==null&&A(C)}break}case T.key==="Delete":{if(T.preventDefault(),a)break;d==null||d==="all"?v():b();break}case["ArrowUp","ArrowDown","Home","End","PageUp","PageDown"].includes(T.key):{if(T.preventDefault(),a||c==null)break;d==="all"&&A(c);const C=s.sections[c],D=WG(e,g,C,T.key,f,p,t.getDateFromSection(o,C),{minutesStep:r});E({section:C,newSectionValue:D,shouldGoToNextSection:!1});break}}})}function GG(n){switch(n){case"ArrowUp":return 1;case"ArrowDown":return-1;case"PageUp":return 5;case"PageDown":return-5;default:return 0}}function WG(n,e,t,r,i,a,s,o){const c=GG(r),d=r==="Home",f=r==="End",p=t.value===""||d||f,g=()=>{const v=i[t.type]({currentDate:s,format:t.format,contentType:t.contentType}),b=T=>Y4(n,T,v,a,t),A=t.type==="minutes"&&(o!=null&&o.minutesStep)?o.minutesStep:1;let E;if(p){if(t.type==="year"&&!f&&!d)return n.formatByString(n.date(void 0,e),t.format);c>0||d?E=v.minimum:E=v.maximum}else E=parseInt(qc(t.value,a),10)+c*A;return E%A!==0&&((c<0||d)&&(E+=A-(A+E)%A),(c>0||f)&&(E-=E%A)),E>v.maximum?b(v.minimum+(E-v.maximum-1)%(v.maximum-v.minimum+1)):E<v.minimum?b(v.maximum-(v.minimum-E-1)%(v.maximum-v.minimum+1)):b(E)},y=()=>{const v=W4(n,e,t.type,t.format);if(v.length===0)return t.value;if(p)return c>0||d?v[0]:v[v.length-1];const E=((v.indexOf(t.value)+c)%v.length+v.length)%v.length;return v[E]};return t.contentType==="digit"||t.contentType==="digit-with-letter"?g():y()}function YG(n){const{manager:e,focused:t,setFocused:r,domGetters:i,stateResponse:a,applyCharacterEditing:s,internalPropsWithDefaults:o,stateResponse:{parsedSelectedSections:c,sectionOrder:d,state:f,clearValue:p,setCharacterQuery:g,setSelectedSections:y,updateValueFromValueStr:v},internalPropsWithDefaults:{disabled:b=!1,readOnly:A=!1}}=n,E=mO({manager:e,internalPropsWithDefaults:o,stateResponse:a}),T=Ad(),C=Ve(R=>{b||!i.isReady()||(r(!0),c==="all"?T.start(0,()=>{const I=document.getSelection().getRangeAt(0).startOffset;if(I===0){y(d.startIndex);return}let B=0,L=0;for(;L<I&&B<f.sections.length;){const k=f.sections[B];B+=1,L+=`${k.startSeparator}${k.value||k.placeholder}${k.endSeparator}`.length}y(B-1)}):t?i.getRoot().contains(R.target)||y(d.startIndex):(r(!0),y(d.startIndex)))}),D=Ve(R=>{if(!i.isReady()||c!=="all")return;const B=R.target.textContent??"";i.getRoot().innerHTML=f.sections.map(L=>`${L.startSeparator}${L.value||L.placeholder}${L.endSeparator}`).join(""),ib({focused:t,domGetters:i,stateResponse:a}),B.length===0||B.charCodeAt(0)===10?(p(),y("all")):B.length>1?v(B):(c==="all"&&y(0),s({keyPressed:B,sectionIndex:0}))}),O=Ve(R=>{if(A||c!=="all"){R.preventDefault();return}const I=R.clipboardData.getData("text");R.preventDefault(),g(null),v(I)}),N=Ve(()=>{if(t||b||!i.isReady())return;const R=ui(i.getRoot());r(!0),i.getSectionIndexFromDOMElement(R)!=null||y(d.startIndex)}),M=Ve(()=>{setTimeout(()=>{if(!i.isReady())return;const R=ui(i.getRoot());!i.getRoot().contains(R)&&(r(!1),y(null))})});return{onKeyDown:E,onBlur:M,onFocus:N,onClick:C,onPaste:O,onInput:D,contentEditable:c==="all",tabIndex:c===0?-1:0}}function qG(n){const{manager:{internal_fieldValueManager:e},stateResponse:{areAllSectionsEmpty:t,state:r,updateValueFromValueStr:i}}=n,a=Ve(o=>{i(o.target.value)});return{value:V.useMemo(()=>t?"":e.getV7HiddenInputValueFromSections(r.sections),[t,r.sections,e]),onChange:a}}function XG(n){const{stateResponse:{setSelectedSections:e},internalPropsWithDefaults:{disabled:t=!1}}=n,r=V.useCallback(i=>a=>{t||a.isDefaultPrevented()||e(i)},[t,e]);return V.useCallback(i=>({"data-sectionindex":i,onClick:r(i)}),[r])}function KG(n){const e=Wt(),t=Ga(),{focused:r,domGetters:i,stateResponse:a,applyCharacterEditing:s,manager:{internal_fieldValueManager:o},stateResponse:{parsedSelectedSections:c,sectionsValueBoundaries:d,state:f,value:p,clearActiveSection:g,setCharacterQuery:y,setSelectedSections:v,updateSectionValue:b,updateValueFromValueStr:A},internalPropsWithDefaults:{disabled:E=!1,readOnly:T=!1}}=n,C=c==="all",D=!C&&!E&&!T,O=Ve(L=>{if(!i.isReady())return;const k=f.sections[L];i.getSectionContent(L).innerHTML=k.value||k.placeholder,ib({focused:r,domGetters:i,stateResponse:a})}),N=Ve(L=>{if(!i.isReady())return;const k=L.target,F=k.textContent??"",q=i.getSectionIndexFromDOMElement(k),X=f.sections[q];if(T){O(q);return}if(F.length===0){if(X.value===""){O(q);return}const G=L.nativeEvent.inputType;if(G==="insertParagraph"||G==="insertLineBreak"){O(q);return}O(q),g();return}s({keyPressed:F,sectionIndex:q}),O(q)}),M=Ve(L=>{L.preventDefault()}),R=Ve(L=>{if(L.preventDefault(),T||E||typeof c!="number")return;const k=f.sections[c],F=L.clipboardData.getData("text"),q=/^[a-zA-Z]+$/.test(F),X=/^[0-9]+$/.test(F),G=/^(([a-zA-Z]+)|)([0-9]+)(([a-zA-Z]+)|)$/.test(F);k.contentType==="letter"&&q||k.contentType==="digit"&&X||k.contentType==="digit-with-letter"&&G?(y(null),b({section:k,newSectionValue:F,shouldGoToNextSection:!0})):!q&&!X&&(y(null),A(F))}),I=Ve(L=>{L.preventDefault(),L.dataTransfer.dropEffect="none"}),B=V.useCallback(L=>()=>{E||v(L)},[E,v]);return V.useCallback((L,k)=>{const F=d[L.type]({currentDate:o.getDateFromSection(p,L),contentType:L.contentType,format:L.format});return{onInput:N,onPaste:R,onMouseUp:M,onDragOver:I,onFocus:B(k),"aria-readonly":T,"aria-valuenow":ZG(L,e),"aria-valuemin":F.minimum,"aria-valuemax":F.maximum,"aria-valuetext":L.value?QG(L,e):t.empty,"aria-label":t[L.type],"aria-disabled":E,tabIndex:C||k>0?-1:0,contentEditable:!C&&!E&&!T,role:"spinbutton","data-range-position":L.dateName||void 0,spellCheck:D?!1:void 0,autoCapitalize:D?"off":void 0,autoCorrect:D?"off":void 0,children:L.value||L.placeholder,inputMode:L.contentType==="letter"?"text":"numeric"}},[d,C,E,T,D,t,e,N,R,M,I,B,o,p])}function QG(n,e){if(n.value)switch(n.type){case"month":{if(n.contentType==="digit"){const r=e.setMonth(e.date(),Number(n.value)-1);return e.isValid(r)?e.format(r,"month"):""}const t=e.parse(n.value,n.format);return t&&e.isValid(t)?e.format(t,"month"):void 0}case"day":if(n.contentType==="digit"){const t=e.setDate(e.startOfYear(e.date()),Number(n.value));return e.isValid(t)?e.format(t,"dayOfMonthFull"):""}return n.value;case"weekDay":return;default:return}}function ZG(n,e){if(n.value)switch(n.type){case"weekDay":return n.contentType==="letter"?void 0:Number(n.value);case"meridiem":{const t=e.parse(`01:00 ${n.value}`,`${e.formats.hours12h}:${e.formats.minutes} ${n.format}`);return t?e.getHours(t)>=12?1:0:void 0}case"day":return n.contentType==="digit-with-letter"?parseInt(n.value,10):Number(n.value);case"month":{if(n.contentType==="digit")return Number(n.value);const t=e.parse(n.value,n.format);return t?e.getMonth(t)+1:void 0}default:return n.contentType!=="letter"?Number(n.value):void 0}}const JG=n=>{const{props:e,manager:t,skipContextFieldRefAssignment:r,manager:{valueType:i,internal_useOpenPickerButtonAriaLabel:a}}=n,{internalProps:s,forwardedProps:o}=z4(e,i),c=gO({manager:t,internalProps:s,skipContextFieldRefAssignment:r}),{sectionListRef:d,onBlur:f,onClick:p,onFocus:g,onInput:y,onPaste:v,onKeyDown:b,onClear:A,clearable:E}=o,{disabled:T=!1,readOnly:C=!1,autoFocus:D=!1,focused:O,unstableFieldRef:N}=c,M=V.useRef(null),R=ti(d,M),I=V.useMemo(()=>({isReady:()=>M.current!=null,getRoot:()=>M.current.getRoot(),getSectionContainer:De=>M.current.getSectionContainer(De),getSectionContent:De=>M.current.getSectionContent(De),getSectionIndexFromDOMElement:De=>M.current.getSectionIndexFromDOMElement(De)}),[M]),B=pO({manager:t,internalPropsWithDefaults:c,forwardedProps:o}),{areAllSectionsEmpty:L,error:k,parsedSelectedSections:F,sectionOrder:q,state:X,value:G,clearValue:Y,setSelectedSections:Q}=B,Z=dO({stateResponse:B}),fe=a(G),[ge,we]=V.useState(!1);function Ae(De=0){if(T||!M.current||ZI(M)!=null)return;const Ce=dw(De,X.sections);we(!0),M.current.getSectionContent(Ce).focus()}const Pe=YG({manager:t,internalPropsWithDefaults:c,stateResponse:B,applyCharacterEditing:Z,focused:ge,setFocused:we,domGetters:I}),Re=qG({manager:t,stateResponse:B}),He=XG({stateResponse:B,internalPropsWithDefaults:c}),Ue=KG({manager:t,stateResponse:B,applyCharacterEditing:Z,internalPropsWithDefaults:c,domGetters:I,focused:ge}),Qe=Ve(De=>{b==null||b(De),Pe.onKeyDown(De)}),ae=Ve(De=>{f==null||f(De),Pe.onBlur(De)}),me=Ve(De=>{g==null||g(De),Pe.onFocus(De)}),he=Ve(De=>{De.isDefaultPrevented()||(p==null||p(De),Pe.onClick(De))}),te=Ve(De=>{v==null||v(De),Pe.onPaste(De)}),Le=Ve(De=>{y==null||y(De),Pe.onInput(De)}),ve=Ve((De,...Ce)=>{De.preventDefault(),A==null||A(De,...Ce),Y(),JI(M)?Q(q.startIndex):Ae(0)}),je=V.useMemo(()=>X.sections.map((De,Ce)=>{const We=Ue(De,Ce);return{container:He(Ce),content:Ue(De,Ce),before:{children:De.startSeparator},after:{children:De.endSeparator,"data-range-position":De.isEndFormatSeparator?We["data-range-position"]:void 0}}}),[X.sections,He,Ue]);return V.useEffect(()=>{if(M.current==null)throw new Error(["MUI X: The `sectionListRef` prop has not been initialized by `PickersSectionList`","You probably tried to pass a component to the `textField` slot that contains an `<input />` element instead of a `PickersSectionList`.","","If you want to keep using an `<input />` HTML element for the editing, please add the `enableAccessibleFieldDOMStructure={false}` prop to your Picker or Field component:","","<DatePicker enableAccessibleFieldDOMStructure={false} slots={{ textField: MyCustomTextField }} />","","Learn more about the field accessible DOM structure on the MUI documentation: https://mui.com/x/react-date-pickers/fields/#fields-to-edit-a-single-element"].join(`
`));D&&!T&&M.current&&M.current.getSectionContent(q.startIndex).focus()},[]),Gn(()=>{if(!(!ge||!M.current)){if(F==="all")M.current.getRoot().focus();else if(typeof F=="number"){const De=M.current.getSectionContent(F);De&&De.focus()}}},[F,ge]),Gn(()=>{ib({focused:ge,domGetters:I,stateResponse:B})}),V.useImperativeHandle(N,()=>({getSections:()=>X.sections,getActiveSectionIndex:()=>ZI(M),setSelectedSections:De=>{if(T||!M.current)return;const Ce=dw(De,X.sections);we((Ce==="all"?0:Ce)!==null),Q(De)},focusField:Ae,isFieldFocused:()=>JI(M)})),H({},o,Pe,{onBlur:ae,onClick:he,onFocus:me,onInput:Le,onPaste:te,onKeyDown:Qe,onClear:ve},Re,{error:k,clearable:!!(E&&!L&&!C&&!T),focused:O??ge,sectionListRef:R,enableAccessibleFieldDOMStructure:!0,elements:je,areAllSectionsEmpty:L,disabled:T,readOnly:C,autoFocus:D,openPickerAriaLabel:fe})};function ZI(n){var t;const e=ui((t=n.current)==null?void 0:t.getRoot());return!e||!n.current||!n.current.getRoot().contains(e)?null:n.current.getSectionIndexFromDOMElement(e)}function JI(n){var t;const e=ui((t=n.current)==null?void 0:t.getRoot());return!!n.current&&n.current.getRoot().contains(e)}const vd=n=>n.replace(/[\u2066\u2067\u2068\u2069]/g,""),eW=(n,e,t)=>{let r=0,i=t?1:0;const a=[];for(let s=0;s<n.length;s+=1){const o=n[s],c=J_(o,t?"input-rtl":"input-ltr",e),d=`${o.startSeparator}${c}${o.endSeparator}`,f=vd(d).length,p=d.length,g=vd(c),y=i+(g===""?0:c.indexOf(g[0]))+o.startSeparator.length,v=y+g.length;a.push(H({},o,{start:r,end:r+f,startInInput:y,endInInput:v})),r+=f,i+=p}return a},tW=n=>{const e=wa(),t=Ad(),r=Ad(),{props:i,manager:a,skipContextFieldRefAssignment:s,manager:{valueType:o,internal_valueManager:c,internal_fieldValueManager:d,internal_useOpenPickerButtonAriaLabel:f}}=n,{internalProps:p,forwardedProps:g}=z4(i,o),y=gO({manager:a,internalProps:p,skipContextFieldRefAssignment:s}),{onFocus:v,onClick:b,onPaste:A,onBlur:E,onKeyDown:T,onClear:C,clearable:D,inputRef:O,placeholder:N}=g,{readOnly:M=!1,disabled:R=!1,autoFocus:I=!1,focused:B,unstableFieldRef:L}=y,k=V.useRef(null),F=ti(O,k),q=pO({manager:a,internalPropsWithDefaults:y,forwardedProps:g}),{activeSectionIndex:X,areAllSectionsEmpty:G,error:Y,localizedDigits:Q,parsedSelectedSections:Z,sectionOrder:fe,state:ge,value:we,clearValue:Ae,clearActiveSection:Pe,setCharacterQuery:Re,setSelectedSections:He,setTempAndroidValueStr:Ue,updateSectionValue:Qe,updateValueFromValueStr:ae,getSectionsFromValue:me}=q,he=dO({stateResponse:q}),te=f(we),Le=V.useMemo(()=>eW(ge.sections,Q,e),[ge.sections,Q,e]);function ve(){const Xe=k.current.selectionStart??0;let ht;Xe<=Le[0].startInInput||Xe>=Le[Le.length-1].endInInput?ht=1:ht=Le.findIndex(Jt=>Jt.startInInput-Jt.startSeparator.length>Xe);const Nt=ht===-1?Le.length-1:ht-1;He(Nt)}function je(Xe=0){var ht;ui(k.current)!==k.current&&((ht=k.current)==null||ht.focus(),He(Xe))}const De=Ve(Xe=>{v==null||v(Xe);const ht=k.current;t.start(0,()=>{!ht||ht!==k.current||X==null&&(ht.value.length&&Number(ht.selectionEnd)-Number(ht.selectionStart)===ht.value.length?He("all"):ve())})}),Ce=Ve((Xe,...ht)=>{Xe.isDefaultPrevented()||(b==null||b(Xe,...ht),ve())}),We=Ve(Xe=>{if(A==null||A(Xe),Xe.preventDefault(),M||R)return;const ht=Xe.clipboardData.getData("text");if(typeof Z=="number"){const Nt=ge.sections[Z],Jt=/^[a-zA-Z]+$/.test(ht),xn=/^[0-9]+$/.test(ht),An=/^(([a-zA-Z]+)|)([0-9]+)(([a-zA-Z]+)|)$/.test(ht);if(Nt.contentType==="letter"&&Jt||Nt.contentType==="digit"&&xn||Nt.contentType==="digit-with-letter"&&An){Re(null),Qe({section:Nt,newSectionValue:ht,shouldGoToNextSection:!0});return}if(Jt||xn)return}Re(null),ae(ht)}),$e=Ve(Xe=>{E==null||E(Xe),He(null)}),Ie=Ve(Xe=>{if(M)return;const ht=Xe.target.value;if(ht===""){Ae();return}const Nt=Xe.nativeEvent.data,Jt=Nt&&Nt.length>1,xn=Jt?Nt:ht,An=vd(xn);if(Z==="all"&&He(X),X==null||Jt){ae(Jt?Nt:An);return}let Yt;if(Z==="all"&&An.length===1)Yt=An;else{const Hr=vd(d.getV6InputValueFromSections(Le,Q,e));let pt=-1,kn=-1;for(let nr=0;nr<Hr.length;nr+=1)pt===-1&&Hr[nr]!==An[nr]&&(pt=nr),kn===-1&&Hr[Hr.length-nr-1]!==An[An.length-nr-1]&&(kn=nr);const Yn=Le[X];if(pt<Yn.start||Hr.length-kn-1>Yn.end)return;const mi=An.length-Hr.length+Yn.end-vd(Yn.endSeparator||"").length;Yt=An.slice(Yn.start+vd(Yn.startSeparator||"").length,mi)}if(Yt.length===0){O$()&&Ue(xn),Pe();return}he({keyPressed:Yt,sectionIndex:X})}),Oe=Ve((Xe,...ht)=>{Xe.preventDefault(),C==null||C(Xe,...ht),Ae(),eD(k)?He(fe.startIndex):je(0)}),ut=mO({manager:a,internalPropsWithDefaults:y,stateResponse:q}),wt=Ve(Xe=>{T==null||T(Xe),ut(Xe)}),pn=V.useMemo(()=>N!==void 0?N:d.getV6InputValueFromSections(me(c.emptyValue),Q,e),[N,d,me,c.emptyValue,Q,e]),Dn=V.useMemo(()=>ge.tempValueStrAndroid??d.getV6InputValueFromSections(ge.sections,Q,e),[ge.sections,d,ge.tempValueStrAndroid,Q,e]);V.useEffect(()=>{k.current&&k.current===ui(k.current)&&He("all")},[]),Gn(()=>{function Xe(){if(!k.current)return;if(Z==null){k.current.scrollLeft&&(k.current.scrollLeft=0);return}if(k.current!==ui(k.current))return;const ht=k.current.scrollTop;if(Z==="all")k.current.select();else{const Nt=Le[Z],Jt=Nt.type==="empty"?Nt.startInInput-Nt.startSeparator.length:Nt.startInInput,xn=Nt.type==="empty"?Nt.endInInput+Nt.endSeparator.length:Nt.endInInput;(Jt!==k.current.selectionStart||xn!==k.current.selectionEnd)&&k.current===ui(k.current)&&k.current.setSelectionRange(Jt,xn),r.start(0,()=>{k.current&&k.current===ui(k.current)&&k.current.selectionStart===k.current.selectionEnd&&(k.current.selectionStart!==Jt||k.current.selectionEnd!==xn)&&Xe()})}k.current.scrollTop=ht}Xe()});const tt=V.useMemo(()=>X==null||ge.sections[X].contentType==="letter"?"text":"numeric",[X,ge.sections]),bn=!(k.current&&k.current===ui(k.current))&&G;return V.useImperativeHandle(L,()=>({getSections:()=>ge.sections,getActiveSectionIndex:()=>{const Xe=k.current.selectionStart??0,ht=k.current.selectionEnd??0;if(Xe===0&&ht===0)return null;const Nt=Xe<=Le[0].startInInput?1:Le.findIndex(Jt=>Jt.startInInput-Jt.startSeparator.length>Xe);return Nt===-1?Le.length-1:Nt-1},setSelectedSections:Xe=>He(Xe),focusField:je,isFieldFocused:()=>eD(k)})),H({},g,{error:Y,clearable:!!(D&&!G&&!M&&!R),onBlur:$e,onClick:Ce,onFocus:De,onPaste:We,onKeyDown:wt,onClear:Oe,inputRef:F,enableAccessibleFieldDOMStructure:!1,placeholder:pn,inputMode:tt,autoComplete:"off",value:bn?"":Dn,onChange:Ie,focused:B,disabled:R,readOnly:M,autoFocus:I,openPickerAriaLabel:te})};function eD(n){return n.current===ui(n.current)}const nW=n=>{const e=Q4();return(n.props.enableAccessibleFieldDOMStructure??(e==null?void 0:e.enableAccessibleFieldDOMStructure)??!0?JG:tW)(n)};function ab(n){const e=Wt(),t=tO();return V.useMemo(()=>({disablePast:n.disablePast??!1,disableFuture:n.disableFuture??!1,minDate:U1(e,n.minDate,t.minDate),maxDate:U1(e,n.maxDate,t.maxDate)}),[n.minDate,n.maxDate,n.disableFuture,n.disablePast,e,t])}function rW(n={}){const{enableAccessibleFieldDOMStructure:e=!0}=n;return V.useMemo(()=>({valueType:"date-time",validator:Qm,internal_valueManager:Ti,internal_fieldValueManager:hG,internal_enableAccessibleFieldDOMStructure:e,internal_useApplyDefaultValuesToFieldInternalProps:aW,internal_useOpenPickerButtonAriaLabel:iW}),[e])}function iW(n){const e=Wt(),t=Ga();return V.useMemo(()=>{const r=e.isValid(n)?e.format(n,"fullDate"):null;return t.openDatePickerDialogue(r)},[n,t,e])}function aW(n){const e=Wt(),t=yO(n),r=V.useMemo(()=>n.ampm??e.is12HourCycleInCurrentLocale(),[n.ampm,e]);return V.useMemo(()=>H({},n,t,{format:n.format??(r?e.formats.keyboardDateTime12h:e.formats.keyboardDateTime24h)}),[n,t,r,e])}function yO(n){const e=Wt(),t=tO();return V.useMemo(()=>({disablePast:n.disablePast??!1,disableFuture:n.disableFuture??!1,disableIgnoringDatePartForTimeValidation:!!n.minDateTime||!!n.maxDateTime||!!n.disableFuture||!!n.disablePast,minDate:U1(e,n.minDateTime??n.minDate,t.minDate),maxDate:U1(e,n.maxDateTime??n.maxDate,t.maxDate),minTime:n.minDateTime??n.minTime,maxTime:n.maxDateTime??n.maxTime}),[n.minDateTime,n.maxDateTime,n.minTime,n.maxTime,n.minDate,n.maxDate,n.disableFuture,n.disablePast,e,t])}function sb(n){const{ownerState:e}=tr(),t=wa();return V.useMemo(()=>H({},e,{isFieldDisabled:n.disabled??!1,isFieldReadOnly:n.readOnly??!1,isFieldRequired:n.required??!1,fieldDirection:t?"rtl":"ltr"}),[e,n.disabled,n.readOnly,n.required,t])}function sW(n){return Dt("MuiPickersTextField",n)}Rt("MuiPickersTextField",["root","focused","disabled","error","required"]);function oW(n){return Dt("MuiPickersInputBase",n)}const Id=Rt("MuiPickersInputBase",["root","focused","disabled","error","notchedOutline","sectionContent","sectionBefore","sectionAfter","adornedStart","adornedEnd","input","inputSizeSmall","activeBar"]);function lW(n){return Dt("MuiPickersSectionList",n)}const Eh=Rt("MuiPickersSectionList",["root","section","sectionContent"]),cW=["slots","slotProps","elements","sectionListRef","classes"],vO=Me("div",{name:"MuiPickersSectionList",slot:"Root"})({direction:"ltr /*! @noflip */",outline:"none"}),xO=Me("span",{name:"MuiPickersSectionList",slot:"Section"})({}),wO=Me("span",{name:"MuiPickersSectionList",slot:"SectionSeparator"})({whiteSpace:"pre"}),_O=Me("span",{name:"MuiPickersSectionList",slot:"SectionContent"})({outline:"none"}),uW=n=>yt({root:["root"],section:["section"],sectionContent:["sectionContent"]},lW,n);function dW(n){const{slots:e,slotProps:t,element:r,classes:i}=n,{ownerState:a}=tr(),s=(e==null?void 0:e.section)??xO,o=Et({elementType:s,externalSlotProps:t==null?void 0:t.section,externalForwardedProps:r.container,className:i.section,ownerState:a}),c=(e==null?void 0:e.sectionContent)??_O,d=Et({elementType:c,externalSlotProps:t==null?void 0:t.sectionContent,externalForwardedProps:r.content,additionalProps:{suppressContentEditableWarning:!0},className:i.sectionContent,ownerState:a}),f=(e==null?void 0:e.sectionSeparator)??wO,p=Et({elementType:f,externalSlotProps:t==null?void 0:t.sectionSeparator,externalForwardedProps:r.before,ownerState:H({},a,{separatorPosition:"before"})}),g=Et({elementType:f,externalSlotProps:t==null?void 0:t.sectionSeparator,externalForwardedProps:r.after,ownerState:H({},a,{separatorPosition:"after"})});return x.jsxs(s,H({},o,{children:[x.jsx(f,H({},p)),x.jsx(c,H({},d)),x.jsx(f,H({},g))]}))}const fW=V.forwardRef(function(e,t){const r=xt({props:e,name:"MuiPickersSectionList"}),{slots:i,slotProps:a,elements:s,sectionListRef:o,classes:c}=r,d=Ne(r,cW),f=uW(c),{ownerState:p}=tr(),g=V.useRef(null),y=ti(t,g),v=E=>{if(!g.current)throw new Error(`MUI X: Cannot call sectionListRef.${E} before the mount of the component.`);return g.current};V.useImperativeHandle(o,()=>({getRoot(){return v("getRoot")},getSectionContainer(E){return v("getSectionContainer").querySelector(`.${Eh.section}[data-sectionindex="${E}"]`)},getSectionContent(E){return v("getSectionContent").querySelector(`.${Eh.section}[data-sectionindex="${E}"] .${Eh.sectionContent}`)},getSectionIndexFromDOMElement(E){const T=v("getSectionIndexFromDOMElement");if(E==null||!T.contains(E))return null;let C=null;return E.classList.contains(Eh.section)?C=E:E.classList.contains(Eh.sectionContent)&&(C=E.parentElement),C==null?null:Number(C.dataset.sectionindex)}}));const b=(i==null?void 0:i.root)??vO,A=Et({elementType:b,externalSlotProps:a==null?void 0:a.root,externalForwardedProps:d,additionalProps:{ref:y,suppressContentEditableWarning:!0},className:f.root,ownerState:p});return x.jsx(b,H({},A,{children:A.contentEditable?s.map(({content:E,before:T,after:C})=>`${T.children}${E.children}${C.children}`).join(""):x.jsx(V.Fragment,{children:s.map((E,T)=>x.jsx(dW,{slots:i,slotProps:a,element:E,classes:f},T))})}))}),bO=V.createContext(null),Zm=()=>{const n=V.useContext(bO);if(n==null)throw new Error(["MUI X: The `usePickerTextFieldOwnerState` can only be called in components that are used inside a PickerTextField component"].join(`
`));return n},hW=["elements","areAllSectionsEmpty","defaultValue","label","value","onChange","id","autoFocus","endAdornment","startAdornment","renderSuffix","slots","slotProps","contentEditable","tabIndex","onInput","onPaste","onKeyDown","fullWidth","name","readOnly","inputProps","inputRef","sectionListRef","onFocus","onBlur","classes","ownerState"],pW=n=>Math.round(n*1e5)/1e5,Jm=Me("div",{name:"MuiPickersInputBase",slot:"Root"})(({theme:n})=>H({},n.typography.body1,{color:(n.vars||n).palette.text.primary,cursor:"text",padding:0,display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",boxSizing:"border-box",letterSpacing:`${pW(.15/16)}em`,variants:[{props:{isInputInFullWidth:!0},style:{width:"100%"}}]})),ob=Me(vO,{name:"MuiPickersInputBase",slot:"SectionsContainer"})(({theme:n})=>({padding:"4px 0 5px",fontFamily:n.typography.fontFamily,fontSize:"inherit",lineHeight:"1.4375em",flexGrow:1,outline:"none",display:"flex",flexWrap:"nowrap",overflow:"hidden",letterSpacing:"inherit",width:"182px",variants:[{props:{fieldDirection:"rtl"},style:{justifyContent:"end"}},{props:{inputSize:"small"},style:{paddingTop:1}},{props:{hasStartAdornment:!1,isFieldFocused:!1,isFieldValueEmpty:!0},style:{color:"currentColor",opacity:0}},{props:{hasStartAdornment:!1,isFieldFocused:!1,isFieldValueEmpty:!0,inputHasLabel:!1},style:n.vars?{opacity:n.vars.opacity.inputPlaceholder}:{opacity:n.palette.mode==="light"?.42:.5}},{props:{hasStartAdornment:!1,isFieldFocused:!1,isFieldValueEmpty:!0,inputHasLabel:!0,isLabelShrunk:!0},style:n.vars?{opacity:n.vars.opacity.inputPlaceholder}:{opacity:n.palette.mode==="light"?.42:.5}}]})),gW=Me(xO,{name:"MuiPickersInputBase",slot:"Section"})(({theme:n})=>({fontFamily:n.typography.fontFamily,fontSize:"inherit",letterSpacing:"inherit",lineHeight:"1.4375em",display:"inline-block",whiteSpace:"nowrap"})),mW=Me(_O,{name:"MuiPickersInputBase",slot:"SectionContent",overridesResolver:(n,e)=>e.content})(({theme:n})=>({fontFamily:n.typography.fontFamily,lineHeight:"1.4375em",letterSpacing:"inherit",width:"fit-content",outline:"none"})),yW=Me(wO,{name:"MuiPickersInputBase",slot:"Separator"})(()=>({whiteSpace:"pre",letterSpacing:"inherit"})),vW=Me("input",{name:"MuiPickersInputBase",slot:"Input",overridesResolver:(n,e)=>e.hiddenInput})(H({},oN)),xW=Me("div",{name:"MuiPickersInputBase",slot:"ActiveBar"})(({theme:n,ownerState:e})=>({display:"none",position:"absolute",height:2,bottom:2,borderTopLeftRadius:2,borderTopRightRadius:2,transition:n.transitions.create(["width","left"],{duration:n.transitions.duration.shortest}),backgroundColor:(n.vars||n).palette.primary.main,'[data-active-range-position="start"] &, [data-active-range-position="end"] &':{display:"block"},'[data-active-range-position="start"] &':{left:e.sectionOffsets[0]},'[data-active-range-position="end"] &':{left:e.sectionOffsets[1]}})),wW=(n,e)=>{const{isFieldFocused:t,isFieldDisabled:r,isFieldReadOnly:i,hasFieldError:a,inputSize:s,isInputInFullWidth:o,inputColor:c,hasStartAdornment:d,hasEndAdornment:f}=e,p={root:["root",t&&!r&&"focused",r&&"disabled",i&&"readOnly",a&&"error",o&&"fullWidth",`color${sN(c)}`,s==="small"&&"inputSizeSmall",d&&"adornedStart",f&&"adornedEnd"],notchedOutline:["notchedOutline"],input:["input"],sectionsContainer:["sectionsContainer"],sectionContent:["sectionContent"],sectionBefore:["sectionBefore"],sectionAfter:["sectionAfter"],activeBar:["activeBar"]};return yt(p,oW,n)};function tD(n,e,t,r){var i;if(n.content.id){const a=(i=e.current)==null?void 0:i.querySelectorAll(`[data-sectionindex="${t}"] [data-range-position="${r}"]`);if(a)return Array.from(a).reduce((s,o)=>s+o.offsetWidth,0)}return 0}function _W(n,e){var i,a,s,o,c;let t=0;if(((i=e.current)==null?void 0:i.getAttribute("data-active-range-position"))==="end")for(let d=n.length-1;d>=n.length/2;d-=1)t+=tD(n[d],e,d,"end");else for(let d=0;d<n.length/2;d+=1)t+=tD(n[d],e,d,"start");return{activeBarWidth:t,sectionOffsets:[((s=(a=e.current)==null?void 0:a.querySelector('[data-sectionindex="0"]'))==null?void 0:s.offsetLeft)||0,((c=(o=e.current)==null?void 0:o.querySelector(`[data-sectionindex="${n.length/2}"]`))==null?void 0:c.offsetLeft)||0]}}const lb=V.forwardRef(function(e,t){const r=xt({props:e,name:"MuiPickersInputBase"}),{elements:i,areAllSectionsEmpty:a,value:s,onChange:o,id:c,endAdornment:d,startAdornment:f,renderSuffix:p,slots:g,slotProps:y,contentEditable:v,tabIndex:b,onInput:A,onPaste:E,onKeyDown:T,name:C,readOnly:D,inputProps:O,inputRef:N,sectionListRef:M,onFocus:R,onBlur:I,classes:B,ownerState:L}=r,k=Ne(r,hW),F=Zm(),q=V.useRef(null),X=V.useRef(null),G=V.useRef([]),Y=ti(t,q),Q=ti(O==null?void 0:O.ref,N),Z=F3();if(!Z)throw new Error("MUI X: PickersInputBase should always be used inside a PickersTextField component");const fe=L??F,ge=me=>{var he;(he=Z.onFocus)==null||he.call(Z,me),R==null||R(me)},we=me=>{ge(me)},Ae=me=>{var he,te;if(T==null||T(me),me.key==="Enter"&&!me.defaultMuiPrevented){if((he=q.current)!=null&&he.dataset.multiInput)return;const Le=(te=q.current)==null?void 0:te.closest("form"),ve=Le==null?void 0:Le.querySelector('[type="submit"]');if(!Le||!ve)return;me.preventDefault(),Le.requestSubmit(ve)}},Pe=me=>{var he;(he=Z.onBlur)==null||he.call(Z,me),I==null||I(me)};V.useEffect(()=>{Z&&Z.setAdornedStart(!!f)},[Z,f]),V.useEffect(()=>{Z&&(a?Z.onEmpty():Z.onFilled())},[Z,a]);const Re=wW(B,fe),He=(g==null?void 0:g.root)||Jm,Ue=Et({elementType:He,externalSlotProps:y==null?void 0:y.root,externalForwardedProps:k,additionalProps:{"aria-invalid":Z.error,ref:Y},className:Re.root,ownerState:fe}),Qe=(g==null?void 0:g.input)||ob,ae=i.some(me=>me.content["data-range-position"]!==void 0);return V.useEffect(()=>{if(!ae||!fe.isPickerOpen)return;const{activeBarWidth:me,sectionOffsets:he}=_W(i,q);G.current=[he[0],he[1]],X.current&&(X.current.style.width=`${me}px`)},[i,ae,fe.isPickerOpen]),x.jsxs(He,H({},Ue,{children:[f,x.jsx(fW,{sectionListRef:M,elements:i,contentEditable:v,tabIndex:b,className:Re.sectionsContainer,onFocus:ge,onBlur:Pe,onInput:A,onPaste:E,onKeyDown:Ae,slots:{root:Qe,section:gW,sectionContent:mW,sectionSeparator:yW},slotProps:{root:H({},y==null?void 0:y.input,{ownerState:fe}),sectionContent:{className:Id.sectionContent},sectionSeparator:({separatorPosition:me})=>({className:me==="before"?Id.sectionBefore:Id.sectionAfter})}}),d,p?p(H({},Z)):null,x.jsx(vW,H({name:C,className:Re.input,value:s,onChange:o,id:c,"aria-hidden":"true",tabIndex:-1,readOnly:D,required:Z.required,disabled:Z.disabled,onFocus:we},O,{ref:Q})),ae&&x.jsx(xW,{className:Re.activeBar,ref:X,ownerState:{sectionOffsets:G.current}})]}))});function bW(n){return Dt("MuiPickersOutlinedInput",n)}const Ra=H({},Id,Rt("MuiPickersOutlinedInput",["root","notchedOutline","input"])),AW=["children","className","label","notched","shrink"],EW=Me("fieldset",{name:"MuiPickersOutlinedInput",slot:"NotchedOutline"})(({theme:n})=>{const e=n.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{textAlign:"left",position:"absolute",bottom:0,right:0,top:-5,left:0,margin:0,padding:"0 8px",pointerEvents:"none",borderRadius:"inherit",borderStyle:"solid",borderWidth:1,overflow:"hidden",minWidth:"0%",borderColor:n.vars?`rgba(${n.vars.palette.common.onBackgroundChannel} / 0.23)`:e}}),nD=Me("span")(({theme:n})=>({fontFamily:n.typography.fontFamily,fontSize:"inherit"})),SW=Me("legend",{shouldForwardProp:n=>_a(n)&&n!=="notched"})(({theme:n})=>({float:"unset",width:"auto",overflow:"hidden",variants:[{props:{inputHasLabel:!1},style:{padding:0,lineHeight:"11px",transition:n.transitions.create("width",{duration:150,easing:n.transitions.easing.easeOut})}},{props:{inputHasLabel:!0},style:{display:"block",padding:0,height:11,fontSize:"0.75em",visibility:"hidden",maxWidth:.01,transition:n.transitions.create("max-width",{duration:50,easing:n.transitions.easing.easeOut}),whiteSpace:"nowrap","& > span":{paddingLeft:5,paddingRight:5,display:"inline-block",opacity:0,visibility:"visible"}}},{props:{inputHasLabel:!0,notched:!0},style:{maxWidth:"100%",transition:n.transitions.create("max-width",{duration:100,easing:n.transitions.easing.easeOut,delay:50})}}]}));function TW(n){const{className:e,label:t,notched:r}=n,i=Ne(n,AW),a=Zm();return x.jsx(EW,H({"aria-hidden":!0,className:e},i,{ownerState:a,children:x.jsx(SW,{ownerState:a,notched:r,children:t?x.jsx(nD,{children:t}):x.jsx(nD,{className:"notranslate",children:"​"})})}))}const CW=["label","autoFocus","ownerState","classes","notched"],IW=Me(Jm,{name:"MuiPickersOutlinedInput",slot:"Root"})(({theme:n})=>{const e=n.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{padding:"0 14px",borderRadius:(n.vars||n).shape.borderRadius,[`&:hover .${Ra.notchedOutline}`]:{borderColor:(n.vars||n).palette.text.primary},"@media (hover: none)":{[`&:hover .${Ra.notchedOutline}`]:{borderColor:n.vars?`rgba(${n.vars.palette.common.onBackgroundChannel} / 0.23)`:e}},[`&.${Ra.focused} .${Ra.notchedOutline}`]:{borderStyle:"solid",borderWidth:2},[`&.${Ra.disabled}`]:{[`& .${Ra.notchedOutline}`]:{borderColor:(n.vars||n).palette.action.disabled},"*":{color:(n.vars||n).palette.action.disabled}},[`&.${Ra.error} .${Ra.notchedOutline}`]:{borderColor:(n.vars||n).palette.error.main},variants:Object.keys((n.vars??n).palette).filter(t=>{var r;return((r=(n.vars??n).palette[t])==null?void 0:r.main)??!1}).map(t=>({props:{inputColor:t},style:{[`&.${Ra.focused}:not(.${Ra.error}) .${Ra.notchedOutline}`]:{borderColor:(n.vars||n).palette[t].main}}}))}}),DW=Me(ob,{name:"MuiPickersOutlinedInput",slot:"SectionsContainer"})({padding:"16.5px 0",variants:[{props:{inputSize:"small"},style:{padding:"8.5px 0"}}]}),RW=n=>{const t=yt({root:["root"],notchedOutline:["notchedOutline"],input:["input"]},bW,n);return H({},n,t)},AO=V.forwardRef(function(e,t){const r=xt({props:e,name:"MuiPickersOutlinedInput"}),{label:i,classes:a,notched:s}=r,o=Ne(r,CW),c=F3(),d=RW(a);return x.jsx(lb,H({slots:{root:IW,input:DW},renderSuffix:f=>x.jsx(TW,{shrink:!!(s||f.adornedStart||f.focused||f.filled),notched:!!(s||f.adornedStart||f.focused||f.filled),className:d.notchedOutline,label:i!=null&&i!==""&&(c!=null&&c.required)?x.jsxs(V.Fragment,{children:[i," ","*"]}):i})},o,{label:i,classes:d,ref:t}))});AO.muiName="Input";function MW(n){return Dt("MuiPickersFilledInput",n)}const bc=H({},Id,Rt("MuiPickersFilledInput",["root","underline","input"])),OW=["label","autoFocus","disableUnderline","hiddenLabel","classes"],PW=Me(Jm,{name:"MuiPickersFilledInput",slot:"Root",shouldForwardProp:n=>_a(n)&&n!=="disableUnderline"})(({theme:n})=>{const e=n.palette.mode==="light",t=e?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)",r=e?"rgba(0, 0, 0, 0.06)":"rgba(255, 255, 255, 0.09)",i=e?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.13)",a=e?"rgba(0, 0, 0, 0.12)":"rgba(255, 255, 255, 0.12)";return{backgroundColor:n.vars?n.vars.palette.FilledInput.bg:r,borderTopLeftRadius:(n.vars||n).shape.borderRadius,borderTopRightRadius:(n.vars||n).shape.borderRadius,transition:n.transitions.create("background-color",{duration:n.transitions.duration.shorter,easing:n.transitions.easing.easeOut}),"&:hover":{backgroundColor:n.vars?n.vars.palette.FilledInput.hoverBg:i,"@media (hover: none)":{backgroundColor:n.vars?n.vars.palette.FilledInput.bg:r}},[`&.${bc.focused}`]:{backgroundColor:n.vars?n.vars.palette.FilledInput.bg:r},[`&.${bc.disabled}`]:{backgroundColor:n.vars?n.vars.palette.FilledInput.disabledBg:a},variants:[...Object.keys((n.vars??n).palette).filter(s=>(n.vars??n).palette[s].main).map(s=>{var o;return{props:{inputColor:s,disableUnderline:!1},style:{"&::after":{borderBottom:`2px solid ${(o=(n.vars||n).palette[s])==null?void 0:o.main}`}}}}),{props:{disableUnderline:!1},style:{"&::after":{left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:n.transitions.create("transform",{duration:n.transitions.duration.shorter,easing:n.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${bc.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${bc.error}`]:{"&:before, &:after":{borderBottomColor:(n.vars||n).palette.error.main}},"&::before":{borderBottom:`1px solid ${n.vars?`rgba(${n.vars.palette.common.onBackgroundChannel} / ${n.vars.opacity.inputUnderline})`:t}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:n.transitions.create("border-bottom-color",{duration:n.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${bc.disabled}, .${bc.error}):before`]:{borderBottom:`1px solid ${(n.vars||n).palette.text.primary}`},[`&.${bc.disabled}:before`]:{borderBottomStyle:"dotted"}}},{props:{hasStartAdornment:!0},style:{paddingLeft:12}},{props:{hasEndAdornment:!0},style:{paddingRight:12}}]}}),kW=Me(ob,{name:"MuiPickersFilledInput",slot:"sectionsContainer",shouldForwardProp:n=>_a(n)&&n!=="hiddenLabel"})({paddingTop:25,paddingRight:12,paddingBottom:8,paddingLeft:12,variants:[{props:{inputSize:"small"},style:{paddingTop:21,paddingBottom:4}},{props:{hasStartAdornment:!0},style:{paddingLeft:0}},{props:{hasEndAdornment:!0},style:{paddingRight:0}},{props:{hiddenLabel:!0},style:{paddingTop:16,paddingBottom:17}},{props:{hiddenLabel:!0,inputSize:"small"},style:{paddingTop:8,paddingBottom:9}}]}),NW=(n,e)=>{const{inputHasUnderline:t}=e,i=yt({root:["root",t&&"underline"],input:["input"]},MW,n);return H({},n,i)},EO=V.forwardRef(function(e,t){const r=xt({props:e,name:"MuiPickersFilledInput"}),{label:i,disableUnderline:a=!1,hiddenLabel:s=!1,classes:o}=r,c=Ne(r,OW),d=Zm(),f=H({},d,{inputHasUnderline:!a}),p=NW(o,f);return x.jsx(lb,H({slots:{root:PW,input:kW},slotProps:{root:{disableUnderline:a},input:{hiddenLabel:s}}},c,{label:i,classes:p,ref:t,ownerState:f}))});EO.muiName="Input";function LW(n){return Dt("MuiPickersFilledInput",n)}const Sh=H({},Id,Rt("MuiPickersInput",["root","underline","input"])),BW=["label","autoFocus","disableUnderline","ownerState","classes"],VW=Me(Jm,{name:"MuiPickersInput",slot:"Root",shouldForwardProp:n=>_a(n)&&n!=="disableUnderline"})(({theme:n})=>{let t=n.palette.mode==="light"?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return n.vars&&(t=`rgba(${n.vars.palette.common.onBackgroundChannel} / ${n.vars.opacity.inputUnderline})`),{"label + &":{marginTop:16},variants:[...Object.keys((n.vars??n).palette).filter(r=>(n.vars??n).palette[r].main).map(r=>({props:{inputColor:r,inputHasUnderline:!0},style:{"&::after":{borderBottom:`2px solid ${(n.vars||n).palette[r].main}`}}})),{props:{inputHasUnderline:!0},style:{"&::after":{background:"red",left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:n.transitions.create("transform",{duration:n.transitions.duration.shorter,easing:n.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${Sh.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${Sh.error}`]:{"&:before, &:after":{borderBottomColor:(n.vars||n).palette.error.main}},"&::before":{borderBottom:`1px solid ${t}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:n.transitions.create("border-bottom-color",{duration:n.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${Sh.disabled}, .${Sh.error}):before`]:{borderBottom:`2px solid ${(n.vars||n).palette.text.primary}`,"@media (hover: none)":{borderBottom:`1px solid ${t}`}},[`&.${Sh.disabled}:before`]:{borderBottomStyle:"dotted"}}}]}}),FW=(n,e)=>{const{inputHasUnderline:t}=e,i=yt({root:["root",!t&&"underline"],input:["input"]},LW,n);return H({},n,i)},SO=V.forwardRef(function(e,t){const r=xt({props:e,name:"MuiPickersInput"}),{label:i,disableUnderline:a=!1,classes:s}=r,o=Ne(r,BW),c=Zm(),d=H({},c,{inputHasUnderline:!a}),f=FW(s,d);return x.jsx(lb,H({slots:{root:VW},slotProps:{root:{disableUnderline:a}}},o,{ownerState:d,label:i,classes:f,ref:t}))});SO.muiName="Input";const jW=["onFocus","onBlur","className","classes","color","disabled","error","variant","required","hiddenLabel","InputProps","inputProps","inputRef","sectionListRef","elements","areAllSectionsEmpty","onClick","onKeyDown","onKeyUp","onPaste","onInput","endAdornment","startAdornment","tabIndex","contentEditable","focused","value","onChange","fullWidth","id","name","helperText","FormHelperTextProps","label","InputLabelProps","data-active-range-position"],UW={standard:SO,filled:EO,outlined:AO},HW=Me(ga,{name:"MuiPickersTextField",slot:"Root"})({maxWidth:"100%"}),zW=(n,e)=>{const{isFieldFocused:t,isFieldDisabled:r,isFieldRequired:i}=e;return yt({root:["root",t&&!r&&"focused",r&&"disabled",i&&"required"]},sW,n)},TO=V.forwardRef(function(e,t){const r=xt({props:e,name:"MuiPickersTextField"}),{onFocus:i,onBlur:a,className:s,classes:o,color:c="primary",disabled:d=!1,error:f=!1,variant:p="outlined",required:g=!1,hiddenLabel:y=!1,InputProps:v,inputProps:b,inputRef:A,sectionListRef:E,elements:T,areAllSectionsEmpty:C,onClick:D,onKeyDown:O,onKeyUp:N,onPaste:M,onInput:R,endAdornment:I,startAdornment:B,tabIndex:L,contentEditable:k,focused:F,value:q,onChange:X,fullWidth:G,id:Y,name:Q,helperText:Z,FormHelperTextProps:fe,label:ge,InputLabelProps:we,"data-active-range-position":Ae}=r,Pe=Ne(r,jW),Re=V.useRef(null),He=ti(t,Re),Ue=E0(Y),Qe=Z&&Ue?`${Ue}-helper-text`:void 0,ae=ge&&Ue?`${Ue}-label`:void 0,me=sb({disabled:r.disabled,required:r.required,readOnly:v==null?void 0:v.readOnly}),he=V.useMemo(()=>H({},me,{isFieldValueEmpty:C,isFieldFocused:F??!1,hasFieldError:f??!1,inputSize:r.size??"medium",inputColor:c??"primary",isInputInFullWidth:G??!1,hasStartAdornment:!!(B??(v==null?void 0:v.startAdornment)),hasEndAdornment:!!(I??(v==null?void 0:v.endAdornment)),inputHasLabel:!!ge,isLabelShrunk:!!(we!=null&&we.shrink)}),[me,C,F,f,r.size,c,G,B,I,v==null?void 0:v.startAdornment,v==null?void 0:v.endAdornment,ge,we==null?void 0:we.shrink]),te=zW(o,he),Le=UW[p],ve={};return p==="outlined"?(we&&typeof we.shrink<"u"&&(ve.notched=we.shrink),ve.label=ge):p==="filled"&&(ve.hiddenLabel=y),x.jsx(bO.Provider,{value:he,children:x.jsxs(HW,H({className:Ut(te.root,s),ref:He,focused:F,disabled:d,variant:p,error:f,color:c,fullWidth:G,required:g,ownerState:he},Pe,{children:[ge!=null&&ge!==""&&x.jsx(no,H({htmlFor:Ue,id:ae},we,{children:ge})),x.jsx(Le,H({elements:T,areAllSectionsEmpty:C,onClick:D,onKeyDown:O,onKeyUp:N,onInput:R,onPaste:M,onFocus:i,onBlur:a,endAdornment:I,startAdornment:B,tabIndex:L,contentEditable:k,value:q,onChange:X,id:Ue,fullWidth:G,inputProps:b,inputRef:A,sectionListRef:E,label:ge,name:Q,role:"group","aria-labelledby":ae,"aria-describedby":Qe,"aria-live":Qe?"polite":void 0,"data-active-range-position":Ae},ve,v)),Z&&x.jsx(lN,H({id:Qe},fe,{children:Z}))]}))})}),$W=["enableAccessibleFieldDOMStructure"],GW=["InputProps","readOnly","onClear","clearable","clearButtonPosition","openPickerButtonPosition","openPickerAriaLabel"],WW=["onPaste","onKeyDown","inputMode","readOnly","InputProps","inputProps","inputRef","onClear","clearable","clearButtonPosition","openPickerButtonPosition","openPickerAriaLabel"],YW=["ownerState"],qW=["ownerState"],XW=["ownerState"],KW=["ownerState"],QW=["InputProps","inputProps"],Hx=()=>{},ZW=n=>{var T,C,D,O,N,M,R,I,B;let{enableAccessibleFieldDOMStructure:e}=n,t=Ne(n,$W);if(e){const{InputProps:L,readOnly:k,onClear:F,clearable:q,clearButtonPosition:X,openPickerButtonPosition:G,openPickerAriaLabel:Y}=t,Q=Ne(t,GW),Z=Ic>=6&&((T=Q==null?void 0:Q.slotProps)!=null&&T.input)?e0((C=Q==null?void 0:Q.slotProps)==null?void 0:C.input,L):Hx;return{clearable:q,onClear:F,clearButtonPosition:X,openPickerButtonPosition:G,openPickerAriaLabel:Y,textFieldProps:H({},Q,Ic>=6&&((D=Q==null?void 0:Q.slotProps)!=null&&D.input)?{slotProps:H({},Q==null?void 0:Q.slotProps,{input:fe=>H({},co(Z,fe),{readOnly:k})})}:{InputProps:H({},L??{},{readOnly:k})})}}const{onPaste:r,onKeyDown:i,inputMode:a,readOnly:s,InputProps:o,inputProps:c,inputRef:d,onClear:f,clearable:p,clearButtonPosition:g,openPickerButtonPosition:y,openPickerAriaLabel:v}=t,b=Ne(t,WW),A=Ic>=6&&((O=b==null?void 0:b.slotProps)!=null&&O.input)?e0((N=b==null?void 0:b.slotProps)==null?void 0:N.input,o):Hx,E=Ic>=6&&((M=b==null?void 0:b.slotProps)!=null&&M.htmlInput)?e0((R=b==null?void 0:b.slotProps)==null?void 0:R.htmlInput,c):Hx;return{clearable:p,onClear:f,clearButtonPosition:g,openPickerButtonPosition:y,openPickerAriaLabel:v,textFieldProps:H({},b,Ic>=6&&((I=b==null?void 0:b.slotProps)!=null&&I.input||(B=b==null?void 0:b.slotProps)!=null&&B.htmlInput)?{slotProps:H({},b==null?void 0:b.slotProps,{input:L=>H({},co(A,L),{readOnly:s}),htmlInput:L=>H({},co(E,L),{inputMode:a,onPaste:r,onKeyDown:i,ref:d})})}:{InputProps:H({},o??{},{readOnly:s}),inputProps:H({},c??{},{inputMode:a,onPaste:r,onKeyDown:i,ref:d})})}},cb=V.createContext({slots:{},slotProps:{},inputRef:void 0});function JW(n){var fe,ge,we;const{fieldResponse:e,defaultOpenPickerIcon:t}=n,r=Ga(),i=tb(),a=V.useContext(cb),{textFieldProps:s,onClear:o,clearable:c,openPickerAriaLabel:d,clearButtonPosition:f="end",openPickerButtonPosition:p="end"}=ZW(e),g=sb(s),y=Ve(Ae=>{Ae.preventDefault(),i==null||i.setOpen(Pe=>!Pe)}),v=i?i.triggerStatus:"hidden",b=c?f:null,A=v!=="hidden"?p:null,E=a.slots.textField??(e.enableAccessibleFieldDOMStructure===!1?kt:TO),T=a.slots.inputAdornment??cN,C=Et({elementType:T,externalSlotProps:a.slotProps.inputAdornment,additionalProps:{position:"start"},ownerState:H({},g,{position:"start"})}),D=Ne(C,YW),O=Et({elementType:T,externalSlotProps:a.slotProps.inputAdornment,additionalProps:{position:"end"},ownerState:H({},g,{position:"end"})}),N=Ne(O,qW),M=a.slots.openPickerButton??Jr,R=Et({elementType:M,externalSlotProps:a.slotProps.openPickerButton,additionalProps:{disabled:v==="disabled",onClick:y,"aria-label":d,edge:s.variant!=="standard"?A:!1},ownerState:g}),I=Ne(R,XW),B=a.slots.openPickerIcon??t,L=Et({elementType:B,externalSlotProps:a.slotProps.openPickerIcon,ownerState:g}),k=a.slots.clearButton??Jr,F=Et({elementType:k,externalSlotProps:a.slotProps.clearButton,className:"clearButton",additionalProps:{title:r.fieldClearLabel,tabIndex:-1,onClick:o,disabled:e.disabled||e.readOnly,edge:s.variant!=="standard"&&b!==A?b:!1},ownerState:g}),q=Ne(F,KW),X=a.slots.clearIcon??q$,G=Et({elementType:X,externalSlotProps:a.slotProps.clearIcon,additionalProps:{fontSize:"small"},ownerState:g});s.ref=ti(s.ref,i==null?void 0:i.rootRef);const Y={},Q=co((Ic>=6&&((fe=s==null?void 0:s.slotProps)==null?void 0:fe.input))??s.InputProps,g);i&&(Y.ref=i.triggerRef),!(Q!=null&&Q.startAdornment)&&(b==="start"||A==="start")&&(Y.startAdornment=x.jsxs(T,H({},D,{children:[A==="start"&&x.jsx(M,H({},I,{children:x.jsx(B,H({},L))})),b==="start"&&x.jsx(k,H({},q,{children:x.jsx(X,H({},G))}))]}))),!(Q!=null&&Q.endAdornment)&&(b==="end"||A==="end")&&(Y.endAdornment=x.jsxs(T,H({},N,{children:[b==="end"&&x.jsx(k,H({},q,{children:x.jsx(X,H({},G))})),A==="end"&&x.jsx(M,H({},I,{children:x.jsx(B,H({},L))}))]}))),!(Y!=null&&Y.endAdornment)&&!(Y!=null&&Y.startAdornment)&&a.slots.inputAdornment&&(Y.endAdornment=x.jsx(T,H({},N))),b!=null&&(s.sx=[{"& .clearButton":{opacity:1},"@media (pointer: fine)":{"& .clearButton":{opacity:0},"&:hover, &:focus-within":{".clearButton":{opacity:1}}}},...Array.isArray(s.sx)?s.sx:[s.sx]]);const Z=Ic>=6&&((ge=s==null?void 0:s.slotProps)!=null&&ge.input)?co(e0(Q,Y),g):H({},Q,Y);return(we=s==null?void 0:s.slotProps)==null||delete we.input,e.enableAccessibleFieldDOMStructure&&(s==null||delete s.slotProps),x.jsx(E,H({},s,{InputProps:Z}))}function e0(n,e){return n?e?t=>H({},co(e,t),co(n,t)):n:e}function eY(n){const{ref:e,externalForwardedProps:t,slotProps:r}=n,i=V.useContext(cb),a=tb(),s=sb(t),{InputProps:o,inputProps:c}=t,d=Ne(t,QW),f=Et({elementType:TO,externalSlotProps:e0(i.slotProps.textField,r==null?void 0:r.textField),externalForwardedProps:d,additionalProps:{ref:e,sx:a==null?void 0:a.rootSx,label:a==null?void 0:a.label,name:a==null?void 0:a.name,className:a==null?void 0:a.rootClassName,inputRef:i.inputRef},ownerState:s});return f.inputProps=H({},c,f.inputProps),f.InputProps=H({},o,f.InputProps),f}function tY(n){const{slots:e={},slotProps:t={},inputRef:r,children:i}=n,a=V.useMemo(()=>({inputRef:r,slots:{openPickerButton:e.openPickerButton,openPickerIcon:e.openPickerIcon,textField:e.textField,inputAdornment:e.inputAdornment,clearIcon:e.clearIcon,clearButton:e.clearButton},slotProps:{openPickerButton:t.openPickerButton,openPickerIcon:t.openPickerIcon,textField:t.textField,inputAdornment:t.inputAdornment,clearIcon:t.clearIcon,clearButton:t.clearButton}}),[r,e.openPickerButton,e.openPickerIcon,e.textField,e.inputAdornment,e.clearIcon,e.clearButton,t.openPickerButton,t.openPickerIcon,t.textField,t.inputAdornment,t.clearIcon,t.clearButton]);return x.jsx(cb.Provider,{value:a,children:i})}const nY=n=>{const e=rW(n);return nW({manager:e,props:n})},rY=["slots","slotProps"],CO=V.forwardRef(function(e,t){const r=xt({props:e,name:"MuiDateTimeField"}),{slots:i,slotProps:a}=r,s=Ne(r,rY),o=eY({slotProps:a,ref:t,externalForwardedProps:s}),c=nY(o);return x.jsx(tY,{slots:i,slotProps:a,inputRef:s.inputRef,children:x.jsx(JW,{fieldResponse:c,defaultOpenPickerIcon:G$})})}),IO=({shouldDisableDate:n,shouldDisableMonth:e,shouldDisableYear:t,minDate:r,maxDate:i,disableFuture:a,disablePast:s,timezone:o})=>{const c=Wt();return V.useCallback(d=>rb({adapter:c,value:d,timezone:o,props:{shouldDisableDate:n,shouldDisableMonth:e,shouldDisableYear:t,minDate:r,maxDate:i,disableFuture:a,disablePast:s}})!==null,[c,n,e,t,r,i,a,s,o])},iY=(n,e)=>(t,r)=>{switch(r.type){case"setVisibleDate":return H({},t,{slideDirection:r.direction,currentMonth:r.month,isMonthSwitchingAnimating:!e.isSameMonth(r.month,t.currentMonth)&&!n&&!r.skipAnimation,focusedDay:r.focusedDay});case"changeMonthTimezone":{const i=r.newTimezone;if(e.getTimezone(t.currentMonth)===i)return t;let a=e.setTimezone(t.currentMonth,i);return e.getMonth(a)!==e.getMonth(t.currentMonth)&&(a=e.setMonth(a,e.getMonth(t.currentMonth))),H({},t,{currentMonth:a})}case"finishMonthSwitchingAnimation":return H({},t,{isMonthSwitchingAnimating:!1});default:throw new Error("missing support")}},aY=n=>{const{value:e,referenceDate:t,disableFuture:r,disablePast:i,maxDate:a,minDate:s,onMonthChange:o,onYearChange:c,reduceAnimations:d,shouldDisableDate:f,timezone:p,getCurrentMonthFromVisibleDate:g}=n,y=Wt(),v=V.useRef(iY(!!d,y)).current,b=V.useMemo(()=>Ti.getInitialReferenceValue({value:e,adapter:y,timezone:p,props:n,referenceDate:t,granularity:Pa.day}),[t,p]),[A,E]=V.useReducer(v,{isMonthSwitchingAnimating:!1,focusedDay:b,currentMonth:y.startOfMonth(b),slideDirection:"left"}),T=IO({shouldDisableDate:f,minDate:s,maxDate:a,disableFuture:r,disablePast:i,timezone:p});V.useEffect(()=>{E({type:"changeMonthTimezone",newTimezone:y.getTimezone(b)})},[b,y]);const C=Ve(({target:O,reason:N})=>{if(N==="cell-interaction"&&A.focusedDay!=null&&y.isSameDay(O,A.focusedDay))return;const M=N==="cell-interaction";let R,I;if(N==="cell-interaction")R=g(O,A.currentMonth),I=O;else if(R=y.isSameMonth(O,A.currentMonth)?A.currentMonth:y.startOfMonth(O),I=O,T(I)){const k=y.startOfMonth(O),F=y.endOfMonth(O);I=p0({adapter:y,date:I,minDate:y.isBefore(s,k)?k:s,maxDate:y.isAfter(a,F)?F:a,disablePast:i,disableFuture:r,isDateDisabled:T,timezone:p})}const B=!y.isSameMonth(A.currentMonth,R),L=!y.isSameYear(A.currentMonth,R);B&&(o==null||o(R)),L&&(c==null||c(y.startOfYear(R))),E({type:"setVisibleDate",month:R,direction:y.isAfterDay(R,A.currentMonth)?"left":"right",focusedDay:A.focusedDay!=null&&I!=null&&y.isSameDay(I,A.focusedDay)?A.focusedDay:I,skipAnimation:M})}),D=V.useCallback(()=>{E({type:"finishMonthSwitchingAnimation"})},[]);return{referenceDate:b,calendarState:A,setVisibleDate:C,isDateDisabled:T,onMonthSwitchingAnimationEnd:D}},sY=n=>Dt("MuiPickersFadeTransitionGroup",n);Rt("MuiPickersFadeTransitionGroup",["root"]);const oY=["children"],lY=n=>yt({root:["root"]},sY,n),cY=Me(j3,{name:"MuiPickersFadeTransitionGroup",slot:"Root"})({display:"block",position:"relative"});function DO(n){const e=xt({props:n,name:"MuiPickersFadeTransitionGroup"}),{className:t,reduceAnimations:r,transKey:i,classes:a}=e,{children:s}=e,o=Ne(e,oY),c=lY(a),d=Kc();return r?s:x.jsx(cY,{className:Ut(c.root,t),ownerState:o,children:x.jsx(vm,{appear:!1,mountOnEnter:!0,unmountOnExit:!0,timeout:{appear:d.transitions.duration.enteringScreen,enter:d.transitions.duration.enteringScreen,exit:0},children:s},i)})}const uY=n=>Dt("MuiPickersSlideTransition",n),ua=Rt("MuiPickersSlideTransition",["root","slideEnter-left","slideEnter-right","slideEnterActive","slideExit","slideExitActiveLeft-left","slideExitActiveLeft-right"]),dY=["children","className","reduceAnimations","slideDirection","transKey","classes"],fY=(n,e)=>{const{slideDirection:t}=e,r={root:["root"],exit:["slideExit"],enterActive:["slideEnterActive"],enter:[`slideEnter-${t}`],exitActive:[`slideExitActiveLeft-${t}`]};return yt(r,uY,n)},hY=Me(j3,{name:"MuiPickersSlideTransition",slot:"Root",overridesResolver:(n,e)=>[e.root,{[`.${ua["slideEnter-left"]}`]:e["slideEnter-left"]},{[`.${ua["slideEnter-right"]}`]:e["slideEnter-right"]},{[`.${ua.slideEnterActive}`]:e.slideEnterActive},{[`.${ua.slideExit}`]:e.slideExit},{[`.${ua["slideExitActiveLeft-left"]}`]:e["slideExitActiveLeft-left"]},{[`.${ua["slideExitActiveLeft-right"]}`]:e["slideExitActiveLeft-right"]}]})(({theme:n})=>{const e=n.transitions.create("transform",{duration:n.transitions.duration.complex,easing:"cubic-bezier(0.35, 0.8, 0.4, 1)"});return{display:"block",position:"relative",overflowX:"hidden","& > *":{position:"absolute",top:0,right:0,left:0},[`& .${ua["slideEnter-left"]}`]:{willChange:"transform",transform:"translate(100%)",zIndex:1},[`& .${ua["slideEnter-right"]}`]:{willChange:"transform",transform:"translate(-100%)",zIndex:1},[`& .${ua.slideEnterActive}`]:{transform:"translate(0%)",transition:e},[`& .${ua.slideExit}`]:{transform:"translate(0%)"},[`& .${ua["slideExitActiveLeft-left"]}`]:{willChange:"transform",transform:"translate(-100%)",transition:e,zIndex:0},[`& .${ua["slideExitActiveLeft-right"]}`]:{willChange:"transform",transform:"translate(100%)",transition:e,zIndex:0}}});function pY(n){const e=xt({props:n,name:"MuiPickersSlideTransition"}),{children:t,className:r,reduceAnimations:i,slideDirection:a,transKey:s,classes:o}=e,c=Ne(e,dY),{ownerState:d}=tr(),f=H({},d,{slideDirection:a}),p=fY(o,f),g=Kc();if(i)return x.jsx("div",{className:Ut(p.root,r),children:t});const y={exit:p.exit,enterActive:p.enterActive,enter:p.enter,exitActive:p.exitActive};return x.jsx(hY,{className:Ut(p.root,r),childFactory:v=>V.cloneElement(v,{classNames:y}),role:"presentation",ownerState:f,children:x.jsx(uN,H({mountOnEnter:!0,unmountOnExit:!0,timeout:g.transitions.duration.complex,classNames:y},c,{children:t}),s)})}const gY=n=>Dt("MuiDayCalendar",n);Rt("MuiDayCalendar",["root","header","weekDayLabel","loadingContainer","slideTransition","monthContainer","weekContainer","weekNumberLabel","weekNumber"]);const mY=["parentProps","day","focusedDay","selectedDays","isDateDisabled","currentMonthNumber","isViewFocused"],yY=["ownerState"],vY=n=>yt({root:["root"],header:["header"],weekDayLabel:["weekDayLabel"],loadingContainer:["loadingContainer"],slideTransition:["slideTransition"],monthContainer:["monthContainer"],weekContainer:["weekContainer"],weekNumberLabel:["weekNumberLabel"],weekNumber:["weekNumber"]},gY,n),RO=(m0+Km*2)*6,xY=Me("div",{name:"MuiDayCalendar",slot:"Root"})({}),wY=Me("div",{name:"MuiDayCalendar",slot:"Header"})({display:"flex",justifyContent:"center",alignItems:"center"}),_Y=Me(se,{name:"MuiDayCalendar",slot:"WeekDayLabel"})(({theme:n})=>({width:36,height:40,margin:"0 2px",textAlign:"center",display:"flex",justifyContent:"center",alignItems:"center",color:(n.vars||n).palette.text.secondary})),bY=Me(se,{name:"MuiDayCalendar",slot:"WeekNumberLabel"})(({theme:n})=>({width:36,height:40,margin:"0 2px",textAlign:"center",display:"flex",justifyContent:"center",alignItems:"center",color:(n.vars||n).palette.text.disabled})),AY=Me(se,{name:"MuiDayCalendar",slot:"WeekNumber"})(({theme:n})=>H({},n.typography.caption,{width:m0,height:m0,padding:0,margin:`0 ${Km}px`,color:(n.vars||n).palette.text.disabled,fontSize:"0.75rem",alignItems:"center",justifyContent:"center",display:"inline-flex"})),EY=Me("div",{name:"MuiDayCalendar",slot:"LoadingContainer"})({display:"flex",justifyContent:"center",alignItems:"center",minHeight:RO}),SY=Me(pY,{name:"MuiDayCalendar",slot:"SlideTransition"})({minHeight:RO}),TY=Me("div",{name:"MuiDayCalendar",slot:"MonthContainer"})({overflow:"hidden"}),CY=Me("div",{name:"MuiDayCalendar",slot:"WeekContainer"})({margin:`${Km}px 0`,display:"flex",justifyContent:"center"});function IY(n){let{parentProps:e,day:t,focusedDay:r,selectedDays:i,isDateDisabled:a,currentMonthNumber:s,isViewFocused:o}=n,c=Ne(n,mY);const{disabled:d,disableHighlightToday:f,isMonthSwitchingAnimating:p,showDaysOutsideCurrentMonth:g,slots:y,slotProps:v,timezone:b}=e,A=Wt(),E=uf(b),T=r!=null&&A.isSameDay(t,r),C=o&&T,D=i.some(q=>A.isSameDay(q,t)),O=A.isSameDay(t,E),N=V.useMemo(()=>d||a(t),[d,a,t]),M=V.useMemo(()=>A.getMonth(t)!==s,[A,t,s]),R=lO({day:t,selected:D,disabled:N,today:O,outsideCurrentMonth:M,disableMargin:void 0,disableHighlightToday:f,showDaysOutsideCurrentMonth:g}),I=(y==null?void 0:y.day)??zG,B=Et({elementType:I,externalSlotProps:v==null?void 0:v.day,additionalProps:H({disableHighlightToday:f,showDaysOutsideCurrentMonth:g,role:"gridcell",isAnimating:p,"data-timestamp":A.toJsDate(t).valueOf()},c),ownerState:H({},R,{day:t,isDayDisabled:N,isDaySelected:D})}),L=Ne(B,yY),k=V.useMemo(()=>{const q=A.startOfMonth(A.setMonth(t,s));return g?A.isSameDay(t,A.startOfWeek(q)):A.isSameDay(t,q)},[s,t,g,A]),F=V.useMemo(()=>{const q=A.endOfMonth(A.setMonth(t,s));return g?A.isSameDay(t,A.endOfWeek(q)):A.isSameDay(t,q)},[s,t,g,A]);return x.jsx(I,H({},L,{day:t,disabled:N,autoFocus:!M&&C,today:O,outsideCurrentMonth:M,isFirstVisibleCell:k,isLastVisibleCell:F,selected:D,tabIndex:T?0:-1,"aria-selected":D,"aria-current":O?"date":void 0}))}function DY(n){const e=xt({props:n,name:"MuiDayCalendar"}),t=Wt(),{onFocusedDayChange:r,className:i,classes:a,currentMonth:s,selectedDays:o,focusedDay:c,loading:d,onSelectedDaysChange:f,onMonthSwitchingAnimationEnd:p,readOnly:g,reduceAnimations:y,renderLoading:v=()=>x.jsx("span",{children:"..."}),slideDirection:b,TransitionProps:A,disablePast:E,disableFuture:T,minDate:C,maxDate:D,shouldDisableDate:O,shouldDisableMonth:N,shouldDisableYear:M,dayOfWeekFormatter:R=he=>t.format(he,"weekdayShort").charAt(0).toUpperCase(),hasFocus:I,onFocusedViewChange:B,gridLabelId:L,displayWeekNumber:k,fixedWeekNumber:F,timezone:q}=e,X=uf(q),G=vY(a),Y=wa(),Q=IO({shouldDisableDate:O,shouldDisableMonth:N,shouldDisableYear:M,minDate:C,maxDate:D,disablePast:E,disableFuture:T,timezone:q}),Z=Ga(),fe=Ve(he=>{g||f(he)}),ge=he=>{Q(he)||(r(he),B==null||B(!0))},we=Ve((he,te)=>{switch(he.key){case"ArrowUp":ge(t.addDays(te,-7)),he.preventDefault();break;case"ArrowDown":ge(t.addDays(te,7)),he.preventDefault();break;case"ArrowLeft":{const Le=t.addDays(te,Y?1:-1),ve=t.addMonths(te,Y?1:-1),je=p0({adapter:t,date:Le,minDate:Y?Le:t.startOfMonth(ve),maxDate:Y?t.endOfMonth(ve):Le,isDateDisabled:Q,timezone:q});ge(je||Le),he.preventDefault();break}case"ArrowRight":{const Le=t.addDays(te,Y?-1:1),ve=t.addMonths(te,Y?-1:1),je=p0({adapter:t,date:Le,minDate:Y?t.startOfMonth(ve):Le,maxDate:Y?Le:t.endOfMonth(ve),isDateDisabled:Q,timezone:q});ge(je||Le),he.preventDefault();break}case"Home":ge(t.startOfWeek(te)),he.preventDefault();break;case"End":ge(t.endOfWeek(te)),he.preventDefault();break;case"PageUp":ge(t.addMonths(te,1)),he.preventDefault();break;case"PageDown":ge(t.addMonths(te,-1)),he.preventDefault();break}}),Ae=Ve((he,te)=>ge(te)),Pe=Ve((he,te)=>{c!=null&&t.isSameDay(c,te)&&(B==null||B(!1))}),Re=t.getMonth(s),He=t.getYear(s),Ue=V.useMemo(()=>o.filter(he=>!!he).map(he=>t.startOfDay(he)),[t,o]),Qe=`${He}-${Re}`,ae=V.useMemo(()=>V.createRef(),[Qe]),me=V.useMemo(()=>{const he=t.getWeekArray(s);let te=t.addMonths(s,1);for(;F&&he.length<F;){const Le=t.getWeekArray(te),ve=t.isSameDay(he[he.length-1][0],Le[0][0]);Le.slice(ve?1:0).forEach(je=>{he.length<F&&he.push(je)}),te=t.addMonths(te,1)}return he},[s,F,t]);return x.jsxs(xY,{role:"grid","aria-labelledby":L,className:G.root,children:[x.jsxs(wY,{role:"row",className:G.header,children:[k&&x.jsx(bY,{variant:"caption",role:"columnheader","aria-label":Z.calendarWeekNumberHeaderLabel,className:G.weekNumberLabel,children:Z.calendarWeekNumberHeaderText}),A$(t,X).map((he,te)=>x.jsx(_Y,{variant:"caption",role:"columnheader","aria-label":t.format(he,"weekday"),className:G.weekDayLabel,children:R(he)},te.toString()))]}),d?x.jsx(EY,{className:G.loadingContainer,children:v()}):x.jsx(SY,H({transKey:Qe,onExited:p,reduceAnimations:y,slideDirection:b,className:Ut(i,G.slideTransition)},A,{nodeRef:ae,children:x.jsx(TY,{ref:ae,role:"rowgroup",className:G.monthContainer,children:me.map((he,te)=>x.jsxs(CY,{role:"row",className:G.weekContainer,"aria-rowindex":te+1,children:[k&&x.jsx(AY,{className:G.weekNumber,role:"rowheader","aria-label":Z.calendarWeekNumberAriaLabelText(t.getWeekNumber(he[0])),children:Z.calendarWeekNumberText(t.getWeekNumber(he[0]))}),he.map((Le,ve)=>x.jsx(IY,{parentProps:e,day:Le,selectedDays:Ue,isViewFocused:I,focusedDay:c,onKeyDown:we,onFocus:Ae,onBlur:Pe,onDaySelect:fe,isDateDisabled:Q,currentMonthNumber:Re,"aria-colindex":ve+1},Le.toString()))]},`week-${he[0]}`))})}))]})}function MO(n){return Dt("MuiMonthCalendar",n)}const Bg=Rt("MuiMonthCalendar",["root","button","disabled","selected"]),RY=["autoFocus","classes","disabled","selected","value","onClick","onKeyDown","onFocus","onBlur","slots","slotProps"],MY=(n,e)=>{const t={button:["button",e.isMonthDisabled&&"disabled",e.isMonthSelected&&"selected"]};return yt(t,MO,n)},OY=Me("button",{name:"MuiMonthCalendar",slot:"Button",overridesResolver:(n,e)=>[e.button,{[`&.${Bg.disabled}`]:e.disabled},{[`&.${Bg.selected}`]:e.selected}]})(({theme:n})=>H({color:"unset",backgroundColor:"transparent",border:0,outline:0},n.typography.subtitle1,{height:36,width:72,borderRadius:18,cursor:"pointer","&:focus":{backgroundColor:n.vars?`rgba(${n.vars.palette.action.activeChannel} / ${n.vars.palette.action.hoverOpacity})`:Ts(n.palette.action.active,n.palette.action.hoverOpacity)},"&:hover":{backgroundColor:n.vars?`rgba(${n.vars.palette.action.activeChannel} / ${n.vars.palette.action.hoverOpacity})`:Ts(n.palette.action.active,n.palette.action.hoverOpacity)},"&:disabled":{cursor:"auto",pointerEvents:"none"},[`&.${Bg.disabled}`]:{color:(n.vars||n).palette.text.secondary},[`&.${Bg.selected}`]:{color:(n.vars||n).palette.primary.contrastText,backgroundColor:(n.vars||n).palette.primary.main,"&:focus, &:hover":{backgroundColor:(n.vars||n).palette.primary.dark}}})),PY=V.memo(function(e){const{autoFocus:t,classes:r,disabled:i,selected:a,value:s,onClick:o,onKeyDown:c,onFocus:d,onBlur:f,slots:p,slotProps:g}=e,y=Ne(e,RY),v=V.useRef(null),{ownerState:b}=tr(),A=H({},b,{isMonthDisabled:i,isMonthSelected:a}),E=MY(r,A);Gn(()=>{var D;t&&((D=v.current)==null||D.focus())},[t]);const T=(p==null?void 0:p.monthButton)??OY,C=Et({elementType:T,externalSlotProps:g==null?void 0:g.monthButton,externalForwardedProps:y,additionalProps:{disabled:i,ref:v,type:"button",role:"radio","aria-checked":a,onClick:D=>o(D,s),onKeyDown:D=>c(D,s),onFocus:D=>d(D,s),onBlur:D=>f(D,s)},ownerState:A,className:E.button});return x.jsx(T,H({},C))}),kY=["autoFocus","className","currentMonth","classes","value","defaultValue","referenceDate","disabled","disableFuture","disablePast","maxDate","minDate","onChange","shouldDisableMonth","readOnly","disableHighlightToday","onMonthFocus","hasFocus","onFocusedViewChange","monthsPerRow","timezone","gridLabelId","slots","slotProps"],NY=n=>yt({root:["root"]},MO,n);function LY(n,e){const t=xt({props:n,name:e}),r=ab(t);return H({},t,r,{monthsPerRow:t.monthsPerRow??3})}const rD=(n,e,t,r,i)=>!!(n===e&&r&&i.isSameYear(t,r)),BY=Me("div",{name:"MuiMonthCalendar",slot:"Root",shouldForwardProp:n=>_a(n)&&n!=="monthsPerRow"})({display:"flex",flexWrap:"wrap",justifyContent:"space-evenly",rowGap:16,padding:"8px 0",width:$d,boxSizing:"border-box",variants:[{props:{monthsPerRow:3},style:{columnGap:24}},{props:{monthsPerRow:4},style:{columnGap:0}}]}),VY=V.forwardRef(function(e,t){const r=LY(e,"MuiMonthCalendar"),{autoFocus:i,className:a,currentMonth:s,classes:o,value:c,defaultValue:d,referenceDate:f,disabled:p,disableFuture:g,disablePast:y,maxDate:v,minDate:b,onChange:A,shouldDisableMonth:E,readOnly:T,onMonthFocus:C,hasFocus:D,onFocusedViewChange:O,monthsPerRow:N,timezone:M,gridLabelId:R,slots:I,slotProps:B}=r,L=Ne(r,kY),{value:k,handleValueChange:F,timezone:q}=tu({name:"MonthCalendar",timezone:M,value:c,defaultValue:d,referenceDate:f,onChange:A,valueManager:Ti}),X=uf(q),G=wa(),Y=Wt(),{ownerState:Q}=tr(),Z=V.useMemo(()=>Ti.getInitialReferenceValue({value:k,adapter:Y,props:r,timezone:q,referenceDate:f,granularity:Pa.month}),[]),fe=NY(o),ge=V.useMemo(()=>Y.getMonth(X),[Y,X]),we=V.useMemo(()=>k!=null?Y.getMonth(k):null,[k,Y]),[Ae,Pe]=V.useState(()=>we||Y.getMonth(Z)),[Re,He]=Nd({name:"MonthCalendar",state:"hasFocus",controlled:D,default:i??!1}),Ue=Ve(ve=>{He(ve),O&&O(ve)}),Qe=V.useCallback(ve=>{const je=Y.startOfMonth(y&&Y.isAfter(X,b)?X:b),De=Y.startOfMonth(g&&Y.isBefore(X,v)?X:v),Ce=Y.startOfMonth(ve);return Y.isBefore(Ce,je)||Y.isAfter(Ce,De)?!0:E?E(Ce):!1},[g,y,v,b,X,E,Y]),ae=Ve((ve,je)=>{if(T)return;const De=k&&s&&!Y.isSameYear(k,s)?Y.setYear(k,Y.getYear(s)):k,Ce=Y.setMonth(De??Z,je);F(Ce)}),me=Ve(ve=>{Qe(Y.setMonth(k??s??Z,ve))||(Pe(ve),Ue(!0),C&&C(ve))});V.useEffect(()=>{Pe(ve=>we!==null&&ve!==we?we:ve)},[we]);const he=Ve((ve,je)=>{switch(ve.key){case"ArrowUp":me((12+je-3)%12),ve.preventDefault();break;case"ArrowDown":me((12+je+3)%12),ve.preventDefault();break;case"ArrowLeft":me((12+je+(G?1:-1))%12),ve.preventDefault();break;case"ArrowRight":me((12+je+(G?-1:1))%12),ve.preventDefault();break}}),te=Ve((ve,je)=>{me(je)}),Le=Ve((ve,je)=>{Ae===je&&Ue(!1)});return x.jsx(BY,H({ref:t,className:Ut(fe.root,a),ownerState:Q,role:"radiogroup","aria-labelledby":R,monthsPerRow:N},L,{children:X_(Y,s??k??Z).map(ve=>{const je=Y.getMonth(ve),De=Y.format(ve,"monthShort"),Ce=Y.format(ve,"month"),We=rD(je,we,ve,k,Y),$e=p||Qe(ve);return x.jsx(PY,{selected:We,value:je,onClick:ae,onKeyDown:he,autoFocus:Re&&je===Ae,disabled:$e,tabIndex:je===Ae&&!$e?0:-1,onFocus:te,onBlur:Le,"aria-current":rD(je,ge,ve,X,Y)?"date":void 0,"aria-label":Ce,slots:I,slotProps:B,classes:o,children:De},De)})}))});function OO(n){return Dt("MuiYearCalendar",n)}const Vg=Rt("MuiYearCalendar",["root","button","disabled","selected"]),FY=["autoFocus","classes","disabled","selected","value","onClick","onKeyDown","onFocus","onBlur","slots","slotProps"],jY=(n,e)=>{const t={button:["button",e.isYearDisabled&&"disabled",e.isYearSelected&&"selected"]};return yt(t,OO,n)},UY=Me("button",{name:"MuiYearCalendar",slot:"Button",overridesResolver:(n,e)=>[e.button,{[`&.${Vg.disabled}`]:e.disabled},{[`&.${Vg.selected}`]:e.selected}]})(({theme:n})=>H({color:"unset",backgroundColor:"transparent",border:0,outline:0},n.typography.subtitle1,{height:36,width:72,borderRadius:18,cursor:"pointer","&:focus":{backgroundColor:n.vars?`rgba(${n.vars.palette.action.activeChannel} / ${n.vars.palette.action.focusOpacity})`:Ts(n.palette.action.active,n.palette.action.focusOpacity)},"&:hover":{backgroundColor:n.vars?`rgba(${n.vars.palette.action.activeChannel} / ${n.vars.palette.action.hoverOpacity})`:Ts(n.palette.action.active,n.palette.action.hoverOpacity)},"&:disabled":{cursor:"auto",pointerEvents:"none"},[`&.${Vg.disabled}`]:{color:(n.vars||n).palette.text.secondary},[`&.${Vg.selected}`]:{color:(n.vars||n).palette.primary.contrastText,backgroundColor:(n.vars||n).palette.primary.main,"&:focus, &:hover":{backgroundColor:(n.vars||n).palette.primary.dark}}})),HY=V.memo(function(e){const{autoFocus:t,classes:r,disabled:i,selected:a,value:s,onClick:o,onKeyDown:c,onFocus:d,onBlur:f,slots:p,slotProps:g}=e,y=Ne(e,FY),v=V.useRef(null),{ownerState:b}=tr(),A=H({},b,{isYearDisabled:i,isYearSelected:a}),E=jY(r,A);Gn(()=>{var D;t&&((D=v.current)==null||D.focus())},[t]);const T=(p==null?void 0:p.yearButton)??UY,C=Et({elementType:T,externalSlotProps:g==null?void 0:g.yearButton,externalForwardedProps:y,additionalProps:{disabled:i,ref:v,type:"button",role:"radio","aria-checked":a,onClick:D=>o(D,s),onKeyDown:D=>c(D,s),onFocus:D=>d(D,s),onBlur:D=>f(D,s)},ownerState:A,className:E.button});return x.jsx(T,H({},C))}),zY=["autoFocus","className","classes","value","defaultValue","referenceDate","disabled","disableFuture","disablePast","maxDate","minDate","onChange","readOnly","shouldDisableYear","disableHighlightToday","onYearFocus","hasFocus","onFocusedViewChange","yearsOrder","yearsPerRow","timezone","gridLabelId","slots","slotProps"],$Y=n=>yt({root:["root"]},OO,n);function GY(n,e){const t=xt({props:n,name:e}),r=ab(t);return H({},t,r,{yearsPerRow:t.yearsPerRow??3,yearsOrder:t.yearsOrder??"asc"})}const WY=Me("div",{name:"MuiYearCalendar",slot:"Root",shouldForwardProp:n=>_a(n)&&n!=="yearsPerRow"})({display:"flex",flexWrap:"wrap",justifyContent:"space-evenly",rowGap:12,padding:"6px 0",overflowY:"auto",height:"100%",width:$d,maxHeight:cG,boxSizing:"border-box",position:"relative",variants:[{props:{yearsPerRow:3},style:{columnGap:24}},{props:{yearsPerRow:4},style:{columnGap:0,padding:"0 2px"}}]}),YY=Me("div",{name:"MuiYearCalendar",slot:"ButtonFiller"})({height:36,width:72}),qY=V.forwardRef(function(e,t){const r=GY(e,"MuiYearCalendar"),{autoFocus:i,className:a,classes:s,value:o,defaultValue:c,referenceDate:d,disabled:f,disableFuture:p,disablePast:g,maxDate:y,minDate:v,onChange:b,readOnly:A,shouldDisableYear:E,onYearFocus:T,hasFocus:C,onFocusedViewChange:D,yearsOrder:O,yearsPerRow:N,timezone:M,gridLabelId:R,slots:I,slotProps:B}=r,L=Ne(r,zY),{value:k,handleValueChange:F,timezone:q}=tu({name:"YearCalendar",timezone:M,value:o,defaultValue:c,referenceDate:d,onChange:b,valueManager:Ti}),X=uf(q),G=wa(),Y=Wt(),{ownerState:Q}=tr(),Z=V.useMemo(()=>Ti.getInitialReferenceValue({value:k,adapter:Y,props:r,timezone:q,referenceDate:d,granularity:Pa.year}),[]),fe=$Y(s),ge=V.useMemo(()=>Y.getYear(X),[Y,X]),we=V.useMemo(()=>k!=null?Y.getYear(k):null,[k,Y]),[Ae,Pe]=V.useState(()=>we||Y.getYear(Z)),[Re,He]=Nd({name:"YearCalendar",state:"hasFocus",controlled:C,default:i??!1}),Ue=Ve(Ie=>{He(Ie),D&&D(Ie)}),Qe=V.useCallback(Ie=>{if(g&&Y.isBeforeYear(Ie,X)||p&&Y.isAfterYear(Ie,X)||v&&Y.isBeforeYear(Ie,v)||y&&Y.isAfterYear(Ie,y))return!0;if(!E)return!1;const Oe=Y.startOfYear(Ie);return E(Oe)},[p,g,y,v,X,E,Y]),ae=Ve((Ie,Oe)=>{if(A)return;const ut=Y.setYear(k??Z,Oe);F(ut)}),me=Ve(Ie=>{Qe(Y.setYear(k??Z,Ie))||(Pe(Ie),Ue(!0),T==null||T(Ie))});V.useEffect(()=>{Pe(Ie=>we!==null&&Ie!==we?we:Ie)},[we]);const he=O!=="desc"?N*1:N*-1,te=G&&O==="asc"||!G&&O==="desc"?-1:1,Le=Ve((Ie,Oe)=>{switch(Ie.key){case"ArrowUp":me(Oe-he),Ie.preventDefault();break;case"ArrowDown":me(Oe+he),Ie.preventDefault();break;case"ArrowLeft":me(Oe-te),Ie.preventDefault();break;case"ArrowRight":me(Oe+te),Ie.preventDefault();break}}),ve=Ve((Ie,Oe)=>{me(Oe)}),je=Ve((Ie,Oe)=>{Ae===Oe&&Ue(!1)}),De=V.useRef(null),Ce=ti(t,De);V.useEffect(()=>{if(i||De.current===null)return;const Ie=De.current.querySelector('[tabindex="0"]');if(!Ie)return;const Oe=Ie.offsetHeight,ut=Ie.offsetTop,wt=De.current.clientHeight,pn=De.current.scrollTop,Dn=ut+Oe;Oe>wt||ut<pn||(De.current.scrollTop=Dn-wt/2-Oe/2)},[i]);const We=Y.getYearRange([v,y]);O==="desc"&&We.reverse();let $e=N-We.length%N;return $e===N&&($e=0),x.jsxs(WY,H({ref:Ce,className:Ut(fe.root,a),ownerState:Q,role:"radiogroup","aria-labelledby":R,yearsPerRow:N},L,{children:[We.map(Ie=>{const Oe=Y.getYear(Ie),ut=Oe===we,wt=f||Qe(Ie);return x.jsx(HY,{selected:ut,value:Oe,onClick:ae,onKeyDown:Le,autoFocus:Re&&Oe===Ae,disabled:wt,tabIndex:Oe===Ae&&!wt?0:-1,onFocus:ve,onBlur:je,"aria-current":ge===Oe?"date":void 0,slots:I,slotProps:B,classes:s,children:Y.format(Ie,"year")},Y.format(Ie,"year"))}),Array.from({length:$e},(Ie,Oe)=>x.jsx(YY,{},Oe))]}))}),XY=n=>Dt("MuiPickersCalendarHeader",n),KY=Rt("MuiPickersCalendarHeader",["root","labelContainer","label","switchViewButton","switchViewIcon"]),QY=["slots","slotProps","currentMonth","disabled","disableFuture","disablePast","maxDate","minDate","onMonthChange","onViewChange","view","reduceAnimations","views","labelId","className","classes","timezone","format"],ZY=["ownerState"],JY=n=>yt({root:["root"],labelContainer:["labelContainer"],label:["label"],switchViewButton:["switchViewButton"],switchViewIcon:["switchViewIcon"]},XY,n),eq=Me("div",{name:"MuiPickersCalendarHeader",slot:"Root"})({display:"flex",alignItems:"center",marginTop:12,marginBottom:4,paddingLeft:24,paddingRight:12,maxHeight:40,minHeight:40}),tq=Me("div",{name:"MuiPickersCalendarHeader",slot:"LabelContainer"})(({theme:n})=>H({display:"flex",overflow:"hidden",alignItems:"center",cursor:"pointer",marginRight:"auto"},n.typography.body1,{fontWeight:n.typography.fontWeightMedium})),nq=Me("div",{name:"MuiPickersCalendarHeader",slot:"Label"})({marginRight:6}),rq=Me(Jr,{name:"MuiPickersCalendarHeader",slot:"SwitchViewButton"})({marginRight:"auto",variants:[{props:{view:"year"},style:{[`.${KY.switchViewIcon}`]:{transform:"rotate(180deg)"}}}]}),iq=Me(H$,{name:"MuiPickersCalendarHeader",slot:"SwitchViewIcon"})(({theme:n})=>({willChange:"transform",transition:n.transitions.create("transform"),transform:"rotate(0deg)"})),aq=V.forwardRef(function(e,t){const r=Ga(),i=Wt(),a=xt({props:e,name:"MuiPickersCalendarHeader"}),{slots:s,slotProps:o,currentMonth:c,disabled:d,disableFuture:f,disablePast:p,maxDate:g,minDate:y,onMonthChange:v,onViewChange:b,view:A,reduceAnimations:E,views:T,labelId:C,className:D,classes:O,timezone:N,format:M=`${i.formats.month} ${i.formats.year}`}=a,R=Ne(a,QY),{ownerState:I}=tr(),B=JY(O),L=(s==null?void 0:s.switchViewButton)??rq,k=Et({elementType:L,externalSlotProps:o==null?void 0:o.switchViewButton,additionalProps:{size:"small","aria-label":r.calendarViewSwitchingButtonAriaLabel(A)},ownerState:H({},I,{view:A}),className:B.switchViewButton}),F=(s==null?void 0:s.switchViewIcon)??iq,q=Et({elementType:F,externalSlotProps:o==null?void 0:o.switchViewIcon,ownerState:I,className:B.switchViewIcon}),X=Ne(q,ZY),G=()=>v(i.addMonths(c,1)),Y=()=>v(i.addMonths(c,-1)),Q=oG(c,{disableFuture:f,maxDate:g,timezone:N}),Z=lG(c,{disablePast:p,minDate:y,timezone:N}),fe=()=>{if(!(T.length===1||!b||d))if(T.length===2)b(T.find(we=>we!==A)||T[0]);else{const we=T.indexOf(A)!==0?0:1;b(T[we])}};if(T.length===1&&T[0]==="year")return null;const ge=i.formatByString(c,M);return x.jsxs(eq,H({},R,{ownerState:I,className:Ut(B.root,D),ref:t,children:[x.jsxs(tq,{role:"presentation",onClick:fe,ownerState:I,"aria-live":"polite",className:B.labelContainer,children:[x.jsx(DO,{reduceAnimations:E,transKey:ge,children:x.jsx(nq,{id:C,ownerState:I,className:B.label,children:ge})}),T.length>1&&!d&&x.jsx(L,H({},k,{children:x.jsx(F,H({},X))}))]}),x.jsx(vm,{in:A==="day",appear:!E,enter:!E,children:x.jsx(nG,{slots:s,slotProps:o,onGoToPrevious:Y,isPreviousDisabled:Z,previousLabel:r.previousMonth,onGoToNext:G,isNextDisabled:Q,nextLabel:r.nextMonth})})]}))}),sq="@media (prefers-reduced-motion: reduce)",Dd=typeof navigator<"u"&&navigator.userAgent.match(/android\s(\d+)|OS\s(\d+)/i),iD=Dd&&Dd[1]?parseInt(Dd[1],10):null,aD=Dd&&Dd[2]?parseInt(Dd[2],10):null,oq=iD&&iD<10||aD&&aD<13||!1;function PO(n){const e=ym(sq,{defaultMatches:!1});return n??(e||oq)}const lq=n=>Dt("MuiDateCalendar",n);Rt("MuiDateCalendar",["root","viewTransitionContainer"]);const cq=["autoFocus","onViewChange","value","defaultValue","referenceDate","disableFuture","disablePast","onChange","onYearChange","onMonthChange","reduceAnimations","shouldDisableDate","shouldDisableMonth","shouldDisableYear","view","views","openTo","className","classes","disabled","readOnly","minDate","maxDate","disableHighlightToday","focusedView","onFocusedViewChange","showDaysOutsideCurrentMonth","fixedWeekNumber","dayOfWeekFormatter","slots","slotProps","loading","renderLoading","displayWeekNumber","yearsOrder","yearsPerRow","monthsPerRow","timezone"],uq=n=>yt({root:["root"],viewTransitionContainer:["viewTransitionContainer"]},lq,n);function dq(n,e){const t=xt({props:n,name:e}),r=PO(t.reduceAnimations),i=ab(t);return H({},t,i,{loading:t.loading??!1,openTo:t.openTo??"day",views:t.views??["year","day"],reduceAnimations:r,renderLoading:t.renderLoading??(()=>x.jsx("span",{children:"..."}))})}const fq=Me(nb,{name:"MuiDateCalendar",slot:"Root"})({display:"flex",flexDirection:"column",height:Gd}),hq=Me(DO,{name:"MuiDateCalendar",slot:"ViewTransitionContainer"})({}),pq=V.forwardRef(function(e,t){const r=Wt(),{ownerState:i}=tr(),a=E0(),s=dq(e,"MuiDateCalendar"),{autoFocus:o,onViewChange:c,value:d,defaultValue:f,referenceDate:p,disableFuture:g,disablePast:y,onChange:v,onMonthChange:b,reduceAnimations:A,shouldDisableDate:E,shouldDisableMonth:T,shouldDisableYear:C,view:D,views:O,openTo:N,className:M,classes:R,disabled:I,readOnly:B,minDate:L,maxDate:k,disableHighlightToday:F,focusedView:q,onFocusedViewChange:X,showDaysOutsideCurrentMonth:G,fixedWeekNumber:Y,dayOfWeekFormatter:Q,slots:Z,slotProps:fe,loading:ge,renderLoading:we,displayWeekNumber:Ae,yearsOrder:Pe,yearsPerRow:Re,monthsPerRow:He,timezone:Ue}=s,Qe=Ne(s,cq),{value:ae,handleValueChange:me,timezone:he}=tu({name:"DateCalendar",timezone:Ue,value:d,defaultValue:f,referenceDate:p,onChange:v,valueManager:Ti}),{view:te,setView:Le,focusedView:ve,setFocusedView:je,goToNextView:De,setValueAndGoToNextView:Ce}=Xm({view:D,views:O,openTo:N,onChange:me,onViewChange:c,autoFocus:o,focusedView:q,onFocusedViewChange:X}),{referenceDate:We,calendarState:$e,setVisibleDate:Ie,isDateDisabled:Oe,onMonthSwitchingAnimationEnd:ut}=aY({value:ae,referenceDate:p,reduceAnimations:A,onMonthChange:b,minDate:L,maxDate:k,shouldDisableDate:E,disablePast:y,disableFuture:g,timezone:he,getCurrentMonthFromVisibleDate:(pt,kn)=>r.isSameMonth(pt,kn)?kn:r.startOfMonth(pt)}),wt=I&&ae||L,pn=I&&ae||k,Dn=`${a}-grid-label`,tt=ve!==null,rt=(Z==null?void 0:Z.calendarHeader)??aq,bn=Et({elementType:rt,externalSlotProps:fe==null?void 0:fe.calendarHeader,additionalProps:{views:O,view:te,currentMonth:$e.currentMonth,onViewChange:Le,onMonthChange:pt=>Ie({target:pt,reason:"header-navigation"}),minDate:wt,maxDate:pn,disabled:I,disablePast:y,disableFuture:g,reduceAnimations:A,timezone:he,labelId:Dn},ownerState:i}),Xe=Ve(pt=>{const kn=r.startOfMonth(pt),Yn=r.endOfMonth(pt),zr=Oe(pt)?p0({adapter:r,date:pt,minDate:r.isBefore(L,kn)?kn:L,maxDate:r.isAfter(k,Yn)?Yn:k,disablePast:y,disableFuture:g,isDateDisabled:Oe,timezone:he}):pt;zr?(Ce(zr,"finish"),Ie({target:zr,reason:"cell-interaction"})):(De(),Ie({target:kn,reason:"cell-interaction"}))}),ht=Ve(pt=>{const kn=r.startOfYear(pt),Yn=r.endOfYear(pt),zr=Oe(pt)?p0({adapter:r,date:pt,minDate:r.isBefore(L,kn)?kn:L,maxDate:r.isAfter(k,Yn)?Yn:k,disablePast:y,disableFuture:g,isDateDisabled:Oe,timezone:he}):pt;zr?(Ce(zr,"finish"),Ie({target:zr,reason:"cell-interaction"})):(De(),Ie({target:kn,reason:"cell-interaction"}))}),Nt=Ve(pt=>me(pt&&j1(r,pt,ae??We),"finish",te));V.useEffect(()=>{r.isValid(ae)&&Ie({target:ae,reason:"controlled-value-change"})},[ae]);const Jt=uq(R),xn={disablePast:y,disableFuture:g,maxDate:k,minDate:L},An={disableHighlightToday:F,readOnly:B,disabled:I,timezone:he,gridLabelId:Dn,slots:Z,slotProps:fe},Yt=V.useRef(te);V.useEffect(()=>{Yt.current!==te&&(ve===Yt.current&&je(te,!0),Yt.current=te)},[ve,je,te]);const Hr=V.useMemo(()=>[ae],[ae]);return x.jsxs(fq,H({ref:t,className:Ut(Jt.root,M),ownerState:i},Qe,{children:[x.jsx(rt,H({},bn,{slots:Z,slotProps:fe})),x.jsx(hq,{reduceAnimations:A,className:Jt.viewTransitionContainer,transKey:te,ownerState:i,children:x.jsxs("div",{children:[te==="year"&&x.jsx(qY,H({},xn,An,{value:ae,onChange:ht,shouldDisableYear:C,hasFocus:tt,onFocusedViewChange:pt=>je("year",pt),yearsOrder:Pe,yearsPerRow:Re,referenceDate:We})),te==="month"&&x.jsx(VY,H({},xn,An,{currentMonth:$e.currentMonth,hasFocus:tt,className:M,value:ae,onChange:Xe,shouldDisableMonth:T,onFocusedViewChange:pt=>je("month",pt),monthsPerRow:He,referenceDate:We})),te==="day"&&x.jsx(DY,H({},$e,xn,An,{onMonthSwitchingAnimationEnd:ut,hasFocus:tt,onFocusedDayChange:pt=>Ie({target:pt,reason:"cell-interaction"}),reduceAnimations:A,selectedDays:Hr,onSelectedDaysChange:Nt,shouldDisableDate:E,shouldDisableMonth:T,shouldDisableYear:C,onFocusedViewChange:pt=>je("day",pt),showDaysOutsideCurrentMonth:G,fixedWeekNumber:Y,dayOfWeekFormatter:Q,displayWeekNumber:Ae,loading:ge,renderLoading:we}))]})})]}))});function kO(n){return Dt("MuiPickersToolbar",n)}const gq=Rt("MuiPickersToolbar",["root","title","content"]);function NO(){const{ownerState:n}=tr(),e=wa();return V.useMemo(()=>H({},n,{toolbarDirection:e?"rtl":"ltr"}),[n,e])}const mq=["children","className","classes","toolbarTitle","hidden","titleId","classes","landscapeDirection"],yq=n=>yt({root:["root"],title:["title"],content:["content"]},kO,n),vq=Me("div",{name:"MuiPickersToolbar",slot:"Root"})(({theme:n})=>({display:"flex",flexDirection:"column",alignItems:"flex-start",justifyContent:"space-between",padding:n.spacing(2,3),variants:[{props:{pickerOrientation:"landscape"},style:{height:"auto",maxWidth:160,padding:16,justifyContent:"flex-start",flexWrap:"wrap"}}]})),xq=Me("div",{name:"MuiPickersToolbar",slot:"Content",shouldForwardProp:n=>_a(n)&&n!=="landscapeDirection"})({display:"flex",flexWrap:"wrap",width:"100%",flex:1,justifyContent:"space-between",alignItems:"center",flexDirection:"row",variants:[{props:{pickerOrientation:"landscape"},style:{justifyContent:"flex-start",alignItems:"flex-start",flexDirection:"column"}},{props:{pickerOrientation:"landscape",landscapeDirection:"row"},style:{flexDirection:"row"}}]}),wq=V.forwardRef(function(e,t){const r=xt({props:e,name:"MuiPickersToolbar"}),{children:i,className:a,classes:s,toolbarTitle:o,hidden:c,titleId:d,landscapeDirection:f}=r,p=Ne(r,mq),g=NO(),y=yq(s);return c?null:x.jsxs(vq,H({ref:t,className:Ut(y.root,a),ownerState:g},p,{children:[x.jsx(se,{color:"text.secondary",variant:"overline",id:d,className:y.title,children:o}),x.jsx(xq,{className:y.content,ownerState:g,landscapeDirection:f,children:i})]}))});function _q(n){return Dt("MuiPickerPopper",n)}Rt("MuiPickerPopper",["root","paper"]);const bq=["PaperComponent","ownerState","children","paperSlotProps","paperClasses","onPaperClick","onPaperTouchStart"],Aq=n=>yt({root:["root"],paper:["paper"]},_q,n),Eq=Me(U3,{name:"MuiPickerPopper",slot:"Root"})(({theme:n})=>({zIndex:n.zIndex.modal})),Sq=Me(pa,{name:"MuiPickerPopper",slot:"Paper"})({outline:0,transformOrigin:"top center",variants:[{props:({popperPlacement:n})=>new Set(["top","top-start","top-end"]).has(n),style:{transformOrigin:"bottom center"}}]});function Tq(n,e){return e.documentElement.clientWidth<n.clientX||e.documentElement.clientHeight<n.clientY}function Cq(n,e){const t=V.useRef(!1),r=V.useRef(!1),i=V.useRef(null),a=V.useRef(!1);V.useEffect(()=>{if(!n)return;function c(){a.current=!0}return document.addEventListener("mousedown",c,!0),document.addEventListener("touchstart",c,!0),()=>{document.removeEventListener("mousedown",c,!0),document.removeEventListener("touchstart",c,!0),a.current=!1}},[n]);const s=Ve(c=>{if(!a.current)return;const d=r.current;r.current=!1;const f=Wh(i.current);if(!i.current||"clientX"in c&&Tq(c,f))return;if(t.current){t.current=!1;return}let p;c.composedPath?p=c.composedPath().indexOf(i.current)>-1:p=!f.documentElement.contains(c.target)||i.current.contains(c.target),!p&&!d&&e(c)}),o=c=>{c.defaultMuiPrevented||(r.current=!0)};return V.useEffect(()=>{if(n){const c=Wh(i.current),d=()=>{t.current=!0};return c.addEventListener("touchstart",s),c.addEventListener("touchmove",d),()=>{c.removeEventListener("touchstart",s),c.removeEventListener("touchmove",d)}}},[n,s]),V.useEffect(()=>{if(n){const c=Wh(i.current);return c.addEventListener("click",s),()=>{c.removeEventListener("click",s),r.current=!1}}},[n,s]),[i,o,o]}const Iq=V.forwardRef((n,e)=>{const{PaperComponent:t,ownerState:r,children:i,paperSlotProps:a,paperClasses:s,onPaperClick:o,onPaperTouchStart:c}=n,d=Ne(n,bq),f=Et({elementType:t,externalSlotProps:a,additionalProps:{tabIndex:-1,elevation:8,ref:e},className:s,ownerState:r});return x.jsx(t,H({},d,f,{onClick:p=>{var g;o(p),(g=f.onClick)==null||g.call(f,p)},onTouchStart:p=>{var g;c(p),(g=f.onTouchStart)==null||g.call(f,p)},ownerState:r,children:i}))});function Dq(n){const e=xt({props:n,name:"MuiPickerPopper"}),{children:t,placement:r="bottom-start",slots:i,slotProps:a,classes:s}=e,{open:o,popupRef:c,reduceAnimations:d}=Fl(),{ownerState:f,rootRefObject:p}=tr(),{dismissViews:g,getCurrentViewMode:y,onPopperExited:v,triggerElement:b,viewContainerRole:A}=tr();V.useEffect(()=>{function Y(Q){o&&Q.key==="Escape"&&g()}return document.addEventListener("keydown",Y),()=>{document.removeEventListener("keydown",Y)}},[g,o]);const E=V.useRef(null);V.useEffect(()=>{A==="tooltip"||y()==="field"||(o?E.current=ui(p.current):E.current&&E.current instanceof HTMLElement&&setTimeout(()=>{E.current instanceof HTMLElement&&E.current.focus()}))},[o,A,y,p]);const T=Aq(s),C=Ve(()=>{A==="tooltip"?mG(()=>{var Y,Q;(Y=p.current)!=null&&Y.contains(ui(p.current))||(Q=c.current)!=null&&Q.contains(ui(c.current))||g()}):g()}),[D,O,N]=Cq(o,C),M=V.useRef(null),R=ti(M,c),I=ti(R,D),B=Y=>{Y.key==="Escape"&&(Y.stopPropagation(),g())},L=(i==null?void 0:i.desktopTransition)??d?vm:dN,k=(i==null?void 0:i.desktopTrapFocus)??fN,F=(i==null?void 0:i.desktopPaper)??Sq,q=(i==null?void 0:i.popper)??Eq,X=Et({elementType:q,externalSlotProps:a==null?void 0:a.popper,additionalProps:{transition:!0,role:A??void 0,open:o,placement:r,anchorEl:b,onKeyDown:B},className:T.root,ownerState:f}),G=V.useMemo(()=>H({},f,{popperPlacement:X.placement}),[f,X.placement]);return x.jsx(q,H({},X,{children:({TransitionProps:Y})=>x.jsx(k,H({open:o,disableAutoFocus:!0,disableRestoreFocus:!0,disableEnforceFocus:A==="tooltip",isEnabled:()=>!0},a==null?void 0:a.desktopTrapFocus,{children:x.jsx(L,H({},Y,a==null?void 0:a.desktopTransition,{onExited:Q=>{var Z,fe,ge;v==null||v(),(fe=(Z=a==null?void 0:a.desktopTransition)==null?void 0:Z.onExited)==null||fe.call(Z,Q),(ge=Y==null?void 0:Y.onExited)==null||ge.call(Y)},children:x.jsx(Iq,{PaperComponent:F,ownerState:G,ref:I,onPaperClick:O,onPaperTouchStart:N,paperClasses:T.paper,paperSlotProps:a==null?void 0:a.desktopPaper,children:t})}))}))}))}function sD(){return typeof window>"u"?"portrait":window.screen&&window.screen.orientation&&window.screen.orientation.angle?Math.abs(window.screen.orientation.angle)===90?"landscape":"portrait":window.orientation&&Math.abs(Number(window.orientation))===90?"landscape":"portrait"}function Rq(n,e){const[t,r]=V.useState(sD);return Gn(()=>{const i=()=>{r(sD())};return window.addEventListener("orientationchange",i),()=>{window.removeEventListener("orientationchange",i)}},[]),gG(n,["hours","minutes","seconds"])?"portrait":e??t}function Mq(n){const{props:e,valueManager:t,validator:r}=n,{value:i,defaultValue:a,onChange:s,referenceDate:o,timezone:c,onAccept:d,closeOnSelect:f,open:p,onOpen:g,onClose:y}=e,{current:v}=V.useRef(a),{current:b}=V.useRef(i!==void 0),{current:A}=V.useRef(p!==void 0),E=Wt(),{timezone:T,value:C,handleValueChange:D}=tu({name:"a picker component",timezone:c,value:i,defaultValue:v,referenceDate:o,onChange:s,valueManager:t}),[O,N]=V.useState(()=>({open:!1,lastExternalValue:C,clockShallowValue:void 0,lastCommittedValue:C,hasBeenModifiedSinceMount:!1})),{getValidationErrorForNewValue:M}=hO({props:e,validator:r,timezone:T,value:C,onError:e.onError}),R=Ve(k=>{const F=typeof k=="function"?k(O.open):k;A||N(q=>H({},q,{open:F})),F&&g&&g(),F||y==null||y()}),I=Ve((k,F)=>{const{changeImportance:q="accept",skipPublicationIfPristine:X=!1,validationError:G,shortcut:Y,shouldClose:Q=q==="accept"}=F??{};let Z,fe;!X&&!b&&!O.hasBeenModifiedSinceMount?(Z=!0,fe=q==="accept"):(Z=!t.areValuesEqual(E,k,C),fe=q==="accept"&&!t.areValuesEqual(E,k,O.lastCommittedValue)),N(Ae=>H({},Ae,{clockShallowValue:Z?void 0:Ae.clockShallowValue,lastCommittedValue:fe?k:Ae.lastCommittedValue,hasBeenModifiedSinceMount:!0}));let ge=null;const we=()=>(ge||(ge={validationError:G??M(k)},Y&&(ge.shortcut=Y)),ge);Z&&D(k,we()),fe&&d&&d(k,we()),Q&&R(!1)});C!==O.lastExternalValue&&N(k=>H({},k,{lastExternalValue:C,clockShallowValue:void 0,hasBeenModifiedSinceMount:!0}));const B=Ve((k,F="partial")=>{if(F==="shallow"){N(q=>H({},q,{clockShallowValue:k,hasBeenModifiedSinceMount:!0}));return}I(k,{changeImportance:F==="finish"&&f?"accept":"set"})});V.useEffect(()=>{if(A){if(p===void 0)throw new Error("You must not mix controlling and uncontrolled mode for `open` prop");N(k=>H({},k,{open:p}))}},[A,p]);const L=V.useMemo(()=>t.cleanValue(E,O.clockShallowValue===void 0?C:O.clockShallowValue),[E,t,O.clockShallowValue,C]);return{timezone:T,state:O,setValue:I,setValueFromView:B,setOpen:R,value:C,viewValue:L}}const Oq=["className","sx"],LO=({ref:n,props:e,valueManager:t,valueType:r,variant:i,validator:a,onPopperExited:s,autoFocusView:o,rendererInterceptor:c,localeText:d,viewContainerRole:f,getStepNavigation:p})=>{const{views:g,view:y,openTo:v,onViewChange:b,viewRenderers:A,reduceAnimations:E,orientation:T,disableOpenPicker:C,closeOnSelect:D,disabled:O,readOnly:N,formatDensity:M,enableAccessibleFieldDOMStructure:R,selectedSections:I,onSelectedSectionsChange:B,format:L,label:k,autoFocus:F,name:q}=e,{className:X,sx:G}=e,Y=Ne(e,Oq),Q=E0(),Z=Wt(),fe=PO(E),ge=Rq(g,T),{current:we}=V.useRef(v??null),[Ae,Pe]=V.useState(null),Re=V.useRef(null),He=V.useRef(null),Ue=V.useRef(null),Qe=ti(n,Ue),{timezone:ae,state:me,setOpen:he,setValue:te,setValueFromView:Le,value:ve,viewValue:je}=Mq({props:e,valueManager:t,validator:a}),{view:De,setView:Ce,defaultView:We,focusedView:$e,setFocusedView:Ie,setValueAndGoToNextView:Oe,goToNextStep:ut,hasNextStep:wt,hasSeveralSteps:pn}=Xm({view:y,views:g,openTo:v,onChange:Le,onViewChange:b,autoFocus:o,getStepNavigation:p}),Dn=Ve(()=>te(t.emptyValue)),tt=Ve(()=>te(t.getTodayValue(Z,ae,r))),rt=Ve(()=>te(ve)),bn=Ve(()=>te(me.lastCommittedValue,{skipPublicationIfPristine:!0})),Xe=Ve(()=>{te(ve,{skipPublicationIfPristine:!0})}),{hasUIView:ht,viewModeLookup:Nt,timeViewsCount:Jt}=V.useMemo(()=>g.reduce((gn,rr)=>{const zl=A[rr]==null?"field":"UI";return gn.viewModeLookup[rr]=zl,zl==="UI"&&(gn.hasUIView=!0,g0(rr)&&(gn.timeViewsCount+=1)),gn},{hasUIView:!1,viewModeLookup:{},timeViewsCount:0}),[A,g]),xn=Nt[De],An=Ve(()=>xn),[Yt,Hr]=V.useState(xn==="UI"?De:null);Yt!==De&&Nt[De]==="UI"&&Hr(De),Gn(()=>{xn==="field"&&me.open&&(he(!1),setTimeout(()=>{var gn,rr;(gn=He==null?void 0:He.current)==null||gn.setSelectedSections(De),(rr=He==null?void 0:He.current)==null||rr.focusField(De)}))},[De]),Gn(()=>{if(!me.open)return;let gn=De;xn==="field"&&Yt!=null&&(gn=Yt),gn!==We&&Nt[gn]==="UI"&&Nt[We]==="UI"&&(gn=We),gn!==De&&Ce(gn),Ie(gn,!0)},[me.open]);const pt=V.useMemo(()=>({isPickerValueEmpty:t.areValuesEqual(Z,ve,t.emptyValue),isPickerOpen:me.open,isPickerDisabled:e.disabled??!1,isPickerReadOnly:e.readOnly??!1,pickerOrientation:ge,pickerVariant:i}),[Z,t,ve,me.open,ge,i,e.disabled,e.readOnly]),kn=V.useMemo(()=>C||!ht?"hidden":O||N?"disabled":"enabled",[C,ht,O,N]),Yn=Ve(ut),zr=V.useMemo(()=>D&&!pn?[]:["cancel","nextOrAccept"],[D,pn]),mi=V.useMemo(()=>({setValue:te,setOpen:he,clearValue:Dn,setValueToToday:tt,acceptValueChanges:rt,cancelValueChanges:bn,setView:Ce,goToNextStep:Yn}),[te,he,Dn,tt,rt,bn,Ce,Yn]),nr=V.useMemo(()=>H({},mi,{value:ve,timezone:ae,open:me.open,views:g,view:Yt,initialView:we,disabled:O??!1,readOnly:N??!1,autoFocus:F??!1,variant:i,orientation:ge,popupRef:Re,reduceAnimations:fe,triggerRef:Pe,triggerStatus:kn,hasNextStep:wt,fieldFormat:L??"",name:q,label:k,rootSx:G,rootRef:Qe,rootClassName:X}),[mi,ve,Qe,i,ge,fe,O,N,L,X,q,k,G,kn,wt,ae,me.open,Yt,g,we,F]),Hl=V.useMemo(()=>({dismissViews:Xe,ownerState:pt,hasUIView:ht,getCurrentViewMode:An,rootRefObject:Ue,labelId:Q,triggerElement:Ae,viewContainerRole:f,defaultActionBarActions:zr,onPopperExited:s}),[Xe,pt,ht,An,Q,Ae,f,zr,s]),Qi=V.useMemo(()=>({formatDensity:M,enableAccessibleFieldDOMStructure:R,selectedSections:I,onSelectedSectionsChange:B,fieldRef:He}),[M,R,I,B,He]);return{providerProps:{localeText:d,contextValue:nr,privateContextValue:Hl,actionsContextValue:mi,fieldPrivateContextValue:Qi,isValidContextValue:gn=>{const rr=a({adapter:Z,value:gn,timezone:ae,props:e});return!t.hasError(rr)}},renderCurrentView:()=>{if(Yt==null)return null;const gn=A[Yt];if(gn==null)return null;const rr=H({},Y,{views:g,timezone:ae,value:je,onChange:Oe,view:Yt,onViewChange:Ce,showViewSwitcher:Jt>1,timeViewsCount:Jt},f==="tooltip"?{focusedView:null,onFocusedViewChange:()=>{}}:{focusedView:$e,onFocusedViewChange:Ie});return c?x.jsx(c,{viewRenderers:A,popperView:Yt,rendererProps:rr}):gn(rr)},ownerState:pt}};function BO(n){return Dt("MuiPickersLayout",n)}const Oa=Rt("MuiPickersLayout",["root","landscape","contentWrapper","toolbar","actionBar","tabs","shortcuts"]),Pq=["actions"],kq=Me(Ha,{name:"MuiPickersLayout",slot:"ActionBar"})({});function Nq(n){const{actions:e}=n,t=Ne(n,Pq),r=Ga(),{clearValue:i,setValueToToday:a,acceptValueChanges:s,cancelValueChanges:o,goToNextStep:c,hasNextStep:d}=Fl();if(e==null||e.length===0)return null;const f=e==null?void 0:e.map(p=>{switch(p){case"clear":return x.jsx(st,{onClick:i,children:r.clearButtonLabel},p);case"cancel":return x.jsx(st,{onClick:o,children:r.cancelButtonLabel},p);case"accept":return x.jsx(st,{onClick:s,children:r.okButtonLabel},p);case"today":return x.jsx(st,{onClick:a,children:r.todayButtonLabel},p);case"next":return x.jsx(st,{onClick:c,children:r.nextStepButtonLabel},p);case"nextOrAccept":return d?x.jsx(st,{onClick:c,children:r.nextStepButtonLabel},p):x.jsx(st,{onClick:s,children:r.okButtonLabel},p);default:return null}});return x.jsx(kq,H({},t,{children:f}))}const Lq=V.memo(Nq),Bq=["items","changeImportance"],Vq=["getValue"],Fq=Me(z3,{name:"MuiPickersLayout",slot:"Shortcuts"})({});function jq(n){const{items:e,changeImportance:t="accept"}=n,r=Ne(n,Bq),{setValue:i}=U$(),a=j$();if(e==null||e.length===0)return null;const s=e.map(o=>{let{getValue:c}=o,d=Ne(o,Vq);const f=c({isValid:a});return H({},d,{label:d.label,onClick:()=>{i(f,{changeImportance:t,shortcut:d})},disabled:!a(f)})});return x.jsx(Fq,H({dense:!0,sx:[{maxHeight:Gd,maxWidth:200,overflow:"auto"},...Array.isArray(r.sx)?r.sx:[r.sx]]},r,{children:s.map(o=>x.jsx(H3,{children:x.jsx(In,H({},o))},o.id??o.label))}))}const Uq=["ownerState"];function Hq(n){return n.view!==null}const zq=(n,e)=>{const{pickerOrientation:t}=e;return yt({root:["root",t==="landscape"&&"landscape"],contentWrapper:["contentWrapper"],toolbar:["toolbar"],actionBar:["actionBar"],tabs:["tabs"],landscape:["landscape"],shortcuts:["shortcuts"]},BO,n)},VO=n=>{const{ownerState:e,defaultActionBarActions:t}=tr(),{view:r}=Fl(),i=wa(),{children:a,slots:s,slotProps:o,classes:c}=n,d=V.useMemo(()=>H({},e,{layoutDirection:i?"rtl":"ltr",hasShortcuts:!1}),[e,i]),f=zq(c,d),p=(s==null?void 0:s.actionBar)??Lq,g=Et({elementType:p,externalSlotProps:o==null?void 0:o.actionBar,additionalProps:{actions:t},className:f.actionBar,ownerState:d}),y=Ne(g,Uq),v=x.jsx(p,H({},y)),b=s==null?void 0:s.toolbar,A=Et({elementType:b,externalSlotProps:o==null?void 0:o.toolbar,className:f.toolbar,ownerState:d}),E=Hq(A)&&b?x.jsx(b,H({},A)):null,T=a,C=s==null?void 0:s.tabs,D=r&&C?x.jsx(C,H({className:f.tabs},o==null?void 0:o.tabs)):null,O=(s==null?void 0:s.shortcuts)??jq,N=Et({elementType:O,externalSlotProps:o==null?void 0:o.shortcuts,className:f.shortcuts,ownerState:d}),M=Array.isArray(N==null?void 0:N.items)&&N.items.length>0,R=r&&O?x.jsx(O,H({},N)):null;return{toolbar:E,content:T,tabs:D,actionBar:v,shortcuts:R,ownerState:H({},d,{hasShortcuts:M})}},$q=(n,e)=>{const{pickerOrientation:t}=e;return yt({root:["root",t==="landscape"&&"landscape"],contentWrapper:["contentWrapper"]},BO,n)},FO=Me("div",{name:"MuiPickersLayout",slot:"Root"})({display:"grid",gridAutoColumns:"max-content auto max-content",gridAutoRows:"max-content auto max-content",[`& .${Oa.actionBar}`]:{gridColumn:"1 / 4",gridRow:3},variants:[{props:{pickerOrientation:"landscape",hasShortcuts:!1},style:{[`& .${Oa.toolbar}`]:{gridColumn:1,gridRow:"1 / 3"}}},{props:{pickerOrientation:"landscape",hasShortcuts:!0},style:{[`& .${Oa.toolbar}`]:{gridColumn:"2 / 4",gridRow:1,maxWidth:"max-content"},[`& .${Oa.shortcuts}`]:{gridColumn:1,gridRow:2}}},{props:{pickerOrientation:"portrait"},style:{[`& .${Oa.toolbar}`]:{gridColumn:"2 / 4",gridRow:1},[`& .${Oa.shortcuts}`]:{gridColumn:1,gridRow:"2 / 3"}}},{props:{hasShortcuts:!0,layoutDirection:"rtl"},style:{[`& .${Oa.shortcuts}`]:{gridColumn:4}}}]}),jO=Me("div",{name:"MuiPickersLayout",slot:"ContentWrapper"})({gridColumn:"2 / 4",gridRow:2,display:"flex",flexDirection:"column"}),UO=V.forwardRef(function(e,t){const r=xt({props:e,name:"MuiPickersLayout"}),{toolbar:i,content:a,tabs:s,actionBar:o,shortcuts:c,ownerState:d}=VO(r),{orientation:f,variant:p}=Fl(),{sx:g,className:y,classes:v}=r,b=$q(v,d);return x.jsxs(FO,{ref:t,sx:g,className:Ut(b.root,y),ownerState:d,children:[f==="landscape"?c:i,f==="landscape"?i:c,x.jsx(jO,{className:b.contentWrapper,ownerState:d,children:p==="desktop"?x.jsxs(V.Fragment,{children:[a,s]}):x.jsxs(V.Fragment,{children:[s,a]})}),o]})});function HO(n){const{steps:e}=n;return sG({steps:e,isViewMatchingStep:(t,r)=>r.views==null||r.views.includes(t),onStepChange:({step:t,defaultView:r,setView:i,view:a,views:s})=>{const o=t.views==null?r:t.views.find(c=>s.includes(c));o!==a&&i(o)}})}const Gq=["props","steps"],Wq=["ownerState"],Yq=n=>{var N;let{props:e,steps:t}=n,r=Ne(n,Gq);const{slots:i,slotProps:a,label:s,inputRef:o,localeText:c}=e,d=HO({steps:t}),{providerProps:f,renderCurrentView:p,ownerState:g}=LO(H({},r,{props:e,localeText:c,autoFocusView:!0,viewContainerRole:"dialog",variant:"desktop",getStepNavigation:d})),y=f.privateContextValue.labelId,v=((N=a==null?void 0:a.toolbar)==null?void 0:N.hidden)??!1,b=i.field,A=Et({elementType:b,externalSlotProps:a==null?void 0:a.field,additionalProps:H({},v&&{id:y}),ownerState:g}),E=Ne(A,Wq),T=i.layout??UO;let C=y;v&&(s?C=`${y}-label`:C=void 0);const D=H({},a,{toolbar:H({},a==null?void 0:a.toolbar,{titleId:y}),popper:H({"aria-labelledby":C},a==null?void 0:a.popper)});return{renderPicker:()=>x.jsxs(eO,H({},f,{children:[x.jsx(b,H({},E,{slots:i,slotProps:D,inputRef:o})),x.jsx(Dq,{slots:i,slotProps:D,children:x.jsx(T,H({},D==null?void 0:D.layout,{slots:i,slotProps:D,children:p()}))})]}))}},Rd=({view:n,onViewChange:e,views:t,focusedView:r,onFocusedViewChange:i,value:a,defaultValue:s,referenceDate:o,onChange:c,className:d,classes:f,disableFuture:p,disablePast:g,minDate:y,maxDate:v,shouldDisableDate:b,shouldDisableMonth:A,shouldDisableYear:E,reduceAnimations:T,onMonthChange:C,monthsPerRow:D,onYearChange:O,yearsOrder:N,yearsPerRow:M,slots:R,slotProps:I,loading:B,renderLoading:L,disableHighlightToday:k,readOnly:F,disabled:q,showDaysOutsideCurrentMonth:X,dayOfWeekFormatter:G,sx:Y,autoFocus:Q,fixedWeekNumber:Z,displayWeekNumber:fe,timezone:ge})=>x.jsx(pq,{view:n,onViewChange:e,views:t.filter(zd),focusedView:r&&zd(r)?r:null,onFocusedViewChange:i,value:a,defaultValue:s,referenceDate:o,onChange:c,className:d,classes:f,disableFuture:p,disablePast:g,minDate:y,maxDate:v,shouldDisableDate:b,shouldDisableMonth:A,shouldDisableYear:E,reduceAnimations:T,onMonthChange:C,monthsPerRow:D,onYearChange:O,yearsOrder:N,yearsPerRow:M,slots:R,slotProps:I,loading:B,renderLoading:L,disableHighlightToday:k,readOnly:F,disabled:q,showDaysOutsideCurrentMonth:X,dayOfWeekFormatter:G,sx:Y,autoFocus:Q,fixedWeekNumber:Z,displayWeekNumber:fe,timezone:ge}),qq=Me(ja)({[`& .${mT.container}`]:{outline:0},[`& .${mT.paper}`]:{outline:0,minWidth:$d}}),Xq=Me(Ua)({"&:first-of-type":{padding:0}});function Kq(n){const{children:e,slots:t,slotProps:r}=n,{open:i}=Fl(),{dismissViews:a,onPopperExited:s}=tr(),o=(t==null?void 0:t.dialog)??qq,c=(t==null?void 0:t.mobileTransition)??vm;return x.jsx(o,H({open:i,onClose:()=>{a(),s==null||s()}},r==null?void 0:r.dialog,{TransitionComponent:c,TransitionProps:r==null?void 0:r.mobileTransition,PaperComponent:t==null?void 0:t.mobilePaper,PaperProps:r==null?void 0:r.mobilePaper,children:x.jsx(Xq,{children:e})}))}const Qq=["props","steps"],Zq=["ownerState"],Jq=n=>{var N;let{props:e,steps:t}=n,r=Ne(n,Qq);const{slots:i,slotProps:a,label:s,inputRef:o,localeText:c}=e,d=HO({steps:t}),{providerProps:f,renderCurrentView:p,ownerState:g}=LO(H({},r,{props:e,localeText:c,autoFocusView:!0,viewContainerRole:"dialog",variant:"mobile",getStepNavigation:d})),y=f.privateContextValue.labelId,v=((N=a==null?void 0:a.toolbar)==null?void 0:N.hidden)??!1,b=i.field,A=Et({elementType:b,externalSlotProps:a==null?void 0:a.field,additionalProps:H({},v&&{id:y}),ownerState:g}),E=Ne(A,Zq),T=i.layout??UO;let C=y;v&&(s?C=`${y}-label`:C=void 0);const D=H({},a,{toolbar:H({},a==null?void 0:a.toolbar,{titleId:y}),mobilePaper:H({"aria-labelledby":C},a==null?void 0:a.mobilePaper)});return{renderPicker:()=>x.jsxs(eO,H({},f,{children:[x.jsx(b,H({},E,{slots:i,slotProps:D,inputRef:o})),x.jsx(Kq,{slots:i,slotProps:D,children:x.jsx(T,H({},D==null?void 0:D.layout,{slots:i,slotProps:D,children:p()}))})]}))}};function eX(n){return Dt("MuiPickersToolbarText",n)}const tX=Rt("MuiPickersToolbarText",["root"]),nX=["className","classes","selected","value"],rX=n=>yt({root:["root"]},eX,n),iX=Me(se,{name:"MuiPickersToolbarText",slot:"Root"})(({theme:n})=>({transition:n.transitions.create("color"),color:(n.vars||n).palette.text.secondary,"&[data-selected]":{color:(n.vars||n).palette.text.primary}})),zO=V.forwardRef(function(e,t){const r=xt({props:e,name:"MuiPickersToolbarText"}),{className:i,classes:a,selected:s,value:o}=r,c=Ne(r,nX),d=rX(a);return x.jsx(iX,H({ref:t,className:Ut(d.root,i),component:"span",ownerState:r},s&&{"data-selected":!0},c,{children:o}))}),aX=["align","className","classes","selected","typographyClassName","value","variant","width"],sX=n=>yt({root:["root"]},kO,n),oX=Me(st,{name:"MuiPickersToolbarButton",slot:"Root"})({padding:0,minWidth:16,textTransform:"none"}),ol=V.forwardRef(function(e,t){const r=xt({props:e,name:"MuiPickersToolbarButton"}),{align:i,className:a,classes:s,selected:o,typographyClassName:c,value:d,variant:f,width:p}=r,g=Ne(r,aX),y=sX(s);return x.jsx(oX,H({variant:"text",ref:t,className:Ut(y.root,a),ownerState:r},p?{sx:{width:p}}:{},g,{children:x.jsx(zO,{align:i,className:c,variant:f,value:d,selected:o})}))}),$O=({view:n,onViewChange:e,focusedView:t,onFocusedViewChange:r,views:i,value:a,defaultValue:s,referenceDate:o,onChange:c,className:d,classes:f,disableFuture:p,disablePast:g,minTime:y,maxTime:v,shouldDisableTime:b,minutesStep:A,ampm:E,slots:T,slotProps:C,readOnly:D,disabled:O,sx:N,autoFocus:M,disableIgnoringDatePartForTimeValidation:R,timeSteps:I,skipDisabled:B,timezone:L})=>x.jsx(EG,{view:n,onViewChange:e,focusedView:t&&g0(t)?t:null,onFocusedViewChange:r,views:i.filter(g0),value:a,defaultValue:s,referenceDate:o,onChange:c,className:d,classes:f,disableFuture:p,disablePast:g,minTime:y,maxTime:v,shouldDisableTime:b,minutesStep:A,ampm:E,slots:T,slotProps:C,readOnly:D,disabled:O,sx:N,autoFocus:M,disableIgnoringDatePartForTimeValidation:R,timeStep:I==null?void 0:I.minutes,skipDisabled:B,timezone:L}),z1=({view:n,onViewChange:e,focusedView:t,onFocusedViewChange:r,views:i,value:a,defaultValue:s,referenceDate:o,onChange:c,className:d,classes:f,disableFuture:p,disablePast:g,minTime:y,maxTime:v,shouldDisableTime:b,minutesStep:A,ampm:E,slots:T,slotProps:C,readOnly:D,disabled:O,sx:N,autoFocus:M,disableIgnoringDatePartForTimeValidation:R,timeSteps:I,skipDisabled:B,timezone:L})=>x.jsx(LG,{view:n,onViewChange:e,focusedView:t&&yd(t)?t:null,onFocusedViewChange:r,views:i.filter(g0),value:a,defaultValue:s,referenceDate:o,onChange:c,className:d,classes:f,disableFuture:p,disablePast:g,minTime:y,maxTime:v,shouldDisableTime:b,minutesStep:A,ampm:E,slots:T,slotProps:C,readOnly:D,disabled:O,sx:N,autoFocus:M,disableIgnoringDatePartForTimeValidation:R,timeSteps:I,skipDisabled:B,timezone:L}),lX=["views","format"],GO=(n,e,t)=>{let{views:r,format:i}=e,a=Ne(e,lX);if(i)return i;const s=[],o=[];if(r.forEach(f=>{g0(f)?o.push(f):zd(f)&&s.push(f)}),o.length===0)return UI(n,H({views:s},a));if(s.length===0)return KI(n,H({views:o},a));const c=KI(n,H({views:o},a));return`${UI(n,H({views:s},a))} ${c}`},cX=(n,e,t)=>t?e.filter(r=>!yd(r)||r==="hours"):n?[...e,"meridiem"]:e,uX=(n,e)=>1440/((n.hours??1)*(n.minutes??5))<=e;function dX({thresholdToRenderTimeInASingleColumn:n,ampm:e,timeSteps:t,views:r}){const i=n??24,a=H({hours:1,minutes:5,seconds:5},t),s=uX(a,i);return{thresholdToRenderTimeInASingleColumn:i,timeSteps:a,shouldRenderTimeInASingleColumn:s,views:cX(e,r,s)}}function fX(n){return Dt("MuiDateTimePickerTabs",n)}Rt("MuiDateTimePickerTabs",["root"]);const hX=n=>zd(n)?"date":"time",pX=n=>n==="date"?"day":"hours",gX=n=>yt({root:["root"]},fX,n),mX=Me(mm,{name:"MuiDateTimePickerTabs",slot:"Root"})(({theme:n})=>({boxShadow:`0 -1px 0 0 inset ${(n.vars||n).palette.divider}`,"&:last-child":{boxShadow:`0 1px 0 0 inset ${(n.vars||n).palette.divider}`,[`& .${hN.indicator}`]:{bottom:"auto",top:0}}})),yX=function(e){const t=xt({props:e,name:"MuiDateTimePickerTabs"}),{dateIcon:r=x.jsx(W$,{}),timeIcon:i=x.jsx(Y$,{}),hidden:a=typeof window>"u"||window.innerHeight<667,className:s,classes:o,sx:c}=t,d=Ga(),{ownerState:f}=tr(),{view:p,setView:g}=Fl(),y=gX(o),v=(b,A)=>{g(pX(A))};return a?null:x.jsxs(mX,{ownerState:f,variant:"fullWidth",value:hX(p),onChange:v,className:Ut(s,y.root),sx:c,children:[x.jsx(ka,{value:"date","aria-label":d.dateTableLabel,icon:x.jsx(V.Fragment,{children:r})}),x.jsx(ka,{value:"time","aria-label":d.timeTableLabel,icon:x.jsx(V.Fragment,{children:i})})]})};function vX(n){return Dt("MuiDateTimePickerToolbar",n)}const zx=Rt("MuiDateTimePickerToolbar",["root","dateContainer","timeContainer","timeDigitsContainer","separator","timeLabelReverse","ampmSelection","ampmLandscape","ampmLabel"]),xX=["ampm","ampmInClock","toolbarFormat","toolbarPlaceholder","toolbarTitle","className","classes"],wX=(n,e)=>{const{pickerOrientation:t,toolbarDirection:r}=e;return yt({root:["root"],dateContainer:["dateContainer"],timeContainer:["timeContainer",r==="rtl"&&"timeLabelReverse"],timeDigitsContainer:["timeDigitsContainer",r==="rtl"&&"timeLabelReverse"],separator:["separator"],ampmSelection:["ampmSelection",t==="landscape"&&"ampmLandscape"],ampmLabel:["ampmLabel"]},vX,n)},_X=Me(wq,{name:"MuiDateTimePickerToolbar",slot:"Root",shouldForwardProp:n=>_a(n)&&n!=="toolbarVariant"})(({theme:n})=>({paddingLeft:16,paddingRight:16,justifyContent:"space-around",position:"relative",variants:[{props:{toolbarVariant:"desktop"},style:{borderBottom:`1px solid ${(n.vars||n).palette.divider}`,[`& .${gq.content} .${tX.root}[data-selected]`]:{color:(n.vars||n).palette.primary.main,fontWeight:n.typography.fontWeightBold}}},{props:{toolbarVariant:"desktop",pickerOrientation:"landscape"},style:{borderRight:`1px solid ${(n.vars||n).palette.divider}`}},{props:{toolbarVariant:"desktop",pickerOrientation:"portrait"},style:{paddingLeft:24,paddingRight:0}}]})),bX=Me("div",{name:"MuiDateTimePickerToolbar",slot:"DateContainer"})({display:"flex",flexDirection:"column",alignItems:"flex-start"}),AX=Me("div",{name:"MuiDateTimePickerToolbar",slot:"TimeContainer",shouldForwardProp:n=>_a(n)&&n!=="toolbarVariant"})({display:"flex",flexDirection:"row",variants:[{props:{toolbarDirection:"rtl"},style:{flexDirection:"row-reverse"}},{props:{toolbarVariant:"desktop",pickerOrientation:"portrait"},style:{gap:9,marginRight:4,alignSelf:"flex-end"}},{props:({pickerOrientation:n,toolbarVariant:e})=>n==="landscape"&&e!=="desktop",style:{flexDirection:"column"}},{props:({pickerOrientation:n,toolbarVariant:e,toolbarDirection:t})=>n==="landscape"&&e!=="desktop"&&t==="rtl",style:{flexDirection:"column-reverse"}}]}),EX=Me("div",{name:"MuiDateTimePickerToolbar",slot:"TimeDigitsContainer",shouldForwardProp:n=>_a(n)&&n!=="toolbarVariant"})({display:"flex",variants:[{props:{toolbarDirection:"rtl"},style:{flexDirection:"row-reverse"}},{props:{toolbarVariant:"desktop"},style:{gap:1.5}}]}),oD=Me(zO,{name:"MuiDateTimePickerToolbar",slot:"Separator",shouldForwardProp:n=>_a(n)&&n!=="toolbarVariant"})({margin:"0 4px 0 2px",cursor:"default",variants:[{props:{toolbarVariant:"desktop"},style:{margin:0}}]}),SX=Me("div",{name:"MuiDateTimePickerToolbar",slot:"AmPmSelection",overridesResolver:(n,e)=>[{[`.${zx.ampmLabel}`]:e.ampmLabel},{[`&.${zx.ampmLandscape}`]:e.ampmLandscape},e.ampmSelection]})({display:"flex",flexDirection:"column",marginRight:"auto",marginLeft:12,[`& .${zx.ampmLabel}`]:{fontSize:17},variants:[{props:{pickerOrientation:"landscape"},style:{margin:"4px 0 auto",flexDirection:"row",justifyContent:"space-around",width:"100%"}}]}),TX=V.createContext(null);function CX(n){const e=xt({props:n,name:"MuiDateTimePickerToolbar"}),{ampm:t,ampmInClock:r,toolbarFormat:i,toolbarPlaceholder:a="––",toolbarTitle:s,className:o,classes:c}=e,d=Ne(e,xX),{value:f,setValue:p,disabled:g,readOnly:y,variant:v,orientation:b,view:A,setView:E,views:T}=Fl(),C=Ga(),D=NO(),O=wX(c,D),N=Wt(),M=V.useContext(TX),R=M?M.value:f,I=M?M.setValue:p,B=M?M.view:A,L=M?M.setView:E,{meridiemMode:k,handleMeridiemChange:F}=iO(R,t,fe=>I(fe,{changeImportance:"set"})),q=M!=null&&M.forceDesktopVariant?"desktop":v,X=q==="desktop",G=!!(t&&!r),Y=s??C.dateTimePickerToolbarTitle,Q=V.useMemo(()=>N.isValid(R)?i?N.formatByString(R,i):N.format(R,"shortDate"):a,[R,i,a,N]),Z=(fe,ge)=>N.isValid(R)?N.format(R,fe):ge;return x.jsxs(_X,H({className:Ut(O.root,o),toolbarTitle:Y,toolbarVariant:q},d,{ownerState:D,children:[x.jsxs(bX,{className:O.dateContainer,ownerState:D,children:[T.includes("year")&&x.jsx(ol,{tabIndex:-1,variant:"subtitle1",onClick:()=>L("year"),selected:B==="year",value:Z("year","–")}),T.includes("day")&&x.jsx(ol,{tabIndex:-1,variant:X?"h5":"h4",onClick:()=>L("day"),selected:B==="day",value:Q})]}),x.jsxs(AX,{className:O.timeContainer,ownerState:D,toolbarVariant:q,children:[x.jsxs(EX,{className:O.timeDigitsContainer,ownerState:D,toolbarVariant:q,children:[T.includes("hours")&&x.jsxs(V.Fragment,{children:[x.jsx(ol,{variant:X?"h5":"h3",width:X&&b==="portrait"?zh:void 0,onClick:()=>L("hours"),selected:B==="hours",value:Z(t?"hours12h":"hours24h","--")}),x.jsx(oD,{variant:X?"h5":"h3",value:":",className:O.separator,ownerState:D,toolbarVariant:q}),x.jsx(ol,{variant:X?"h5":"h3",width:X&&b==="portrait"?zh:void 0,onClick:()=>L("minutes"),selected:B==="minutes"||!T.includes("minutes")&&B==="hours",value:Z("minutes","--"),disabled:!T.includes("minutes")})]}),T.includes("seconds")&&x.jsxs(V.Fragment,{children:[x.jsx(oD,{variant:X?"h5":"h3",value:":",className:O.separator,ownerState:D,toolbarVariant:q}),x.jsx(ol,{variant:X?"h5":"h3",width:X&&b==="portrait"?zh:void 0,onClick:()=>L("seconds"),selected:B==="seconds",value:Z("seconds","--")})]})]}),G&&!X&&x.jsxs(SX,{className:O.ampmSelection,ownerState:D,children:[x.jsx(ol,{variant:"subtitle2",selected:k==="am",typographyClassName:O.ampmLabel,value:Jh(N,"am"),onClick:y?void 0:()=>F("am"),disabled:g}),x.jsx(ol,{variant:"subtitle2",selected:k==="pm",typographyClassName:O.ampmLabel,value:Jh(N,"pm"),onClick:y?void 0:()=>F("pm"),disabled:g})]}),t&&X&&x.jsx(ol,{variant:"h5",onClick:()=>L("meridiem"),selected:B==="meridiem",value:R&&k?Jh(N,k):"--",width:zh})]})]}))}function WO(n,e){var y;const t=Wt(),r=xt({props:n,name:e}),i=yO(r),a=r.ampm??t.is12HourCycleInCurrentLocale(),s=V.useMemo(()=>{var v;return((v=r.localeText)==null?void 0:v.toolbarTitle)==null?r.localeText:H({},r.localeText,{dateTimePickerToolbarTitle:r.localeText.toolbarTitle})},[r.localeText]),{openTo:o,views:c}=w$({views:r.views,openTo:r.openTo,defaultViews:["year","day","hours","minutes"],defaultOpenTo:"day"}),{shouldRenderTimeInASingleColumn:d,thresholdToRenderTimeInASingleColumn:f,views:p,timeSteps:g}=dX({thresholdToRenderTimeInASingleColumn:r.thresholdToRenderTimeInASingleColumn,ampm:a,timeSteps:r.timeSteps,views:c});return H({},r,i,{timeSteps:g,openTo:o,shouldRenderTimeInASingleColumn:d,thresholdToRenderTimeInASingleColumn:f,views:p,ampm:a,localeText:s,orientation:r.orientation??"portrait",slots:H({toolbar:CX,tabs:yX},r.slots),slotProps:H({},r.slotProps,{toolbar:H({ampm:a},(y=r.slotProps)==null?void 0:y.toolbar)})})}const IX=V.forwardRef(function(e,t){var v;const{toolbar:r,tabs:i,content:a,actionBar:s,shortcuts:o,ownerState:c}=VO(e),{orientation:d}=Fl(),{sx:f,className:p,classes:g}=e,y=s&&(((v=s.props.actions)==null?void 0:v.length)??0)>0;return x.jsxs(FO,{ref:t,className:Ut(Oa.root,g==null?void 0:g.root,p),sx:[{[`& .${Oa.tabs}`]:{gridRow:4,gridColumn:"1 / 4"},[`& .${Oa.actionBar}`]:{gridRow:5}},...Array.isArray(f)?f:[f]],ownerState:c,children:[d==="landscape"?o:r,d==="landscape"?r:o,x.jsxs(jO,{className:Ut(Oa.contentWrapper,g==null?void 0:g.contentWrapper),ownerState:c,sx:{display:"grid"},children:[a,i,y&&x.jsx(Lc,{sx:{gridRow:3,gridColumn:"1 / 4"}})]}),s]})}),DX=["openTo","focusedView","timeViewsCount"],RX=function(e){var y,v;const{viewRenderers:t,popperView:r,rendererProps:i}=e,{openTo:a,focusedView:s,timeViewsCount:o}=i,c=Ne(i,DX),d=H({},c,{autoFocus:!1,focusedView:null,sx:[{[`&.${pw.root}`]:{borderBottom:0},[`&.${pw.root}, .${gw.root}, &.${hw.root}`]:{maxHeight:Gd}}]}),f=yd(r),p=f?"day":r,g=f?r:"hours";return x.jsxs(V.Fragment,{children:[(y=t[p])==null?void 0:y.call(t,H({},i,{view:f?"day":r,focusedView:s&&zd(s)?s:null,views:i.views.filter(zd),sx:[{gridColumn:1},...d.sx]})),o>0&&x.jsxs(V.Fragment,{children:[x.jsx(Lc,{orientation:"vertical",sx:{gridColumn:2}}),(v=t[g])==null?void 0:v.call(t,H({},d,{view:f?r:"hours",focusedView:s&&yd(s)?s:null,openTo:yd(a)?a:"hours",views:i.views.filter(yd),sx:[{gridColumn:3},...d.sx]}))]})]})},YO=V.forwardRef(function(e,t){var g,y,v;const r=Wt(),i=WO(e,"MuiDesktopDateTimePicker"),a=i.shouldRenderTimeInASingleColumn?$O:z1,s=H({day:Rd,month:Rd,year:Rd,hours:a,minutes:a,seconds:a,meridiem:a},i.viewRenderers),o=i.ampmInClock??!0,d=((g=s.hours)==null?void 0:g.name)===z1.name?i.views:i.views.filter(b=>b!=="meridiem"),f=H({},i,{viewRenderers:s,format:GO(r,i),views:d,yearsPerRow:i.yearsPerRow??4,ampmInClock:o,slots:H({field:CO,layout:IX},i.slots),slotProps:H({},i.slotProps,{field:b=>{var A;return H({},co((A=i.slotProps)==null?void 0:A.field,b),H4(i))},toolbar:H({hidden:!0,ampmInClock:o},(y=i.slotProps)==null?void 0:y.toolbar),tabs:H({hidden:!0},(v=i.slotProps)==null?void 0:v.tabs)})}),{renderPicker:p}=Yq({ref:t,props:f,valueManager:Ti,valueType:"date-time",validator:Qm,rendererInterceptor:RX,steps:null});return p()});YO.propTypes={ampm:ne.bool,ampmInClock:ne.bool,autoFocus:ne.bool,className:ne.string,closeOnSelect:ne.bool,dayOfWeekFormatter:ne.func,defaultValue:ne.object,disabled:ne.bool,disableFuture:ne.bool,disableHighlightToday:ne.bool,disableIgnoringDatePartForTimeValidation:ne.bool,disableOpenPicker:ne.bool,disablePast:ne.bool,displayWeekNumber:ne.bool,enableAccessibleFieldDOMStructure:ne.any,fixedWeekNumber:ne.number,format:ne.string,formatDensity:ne.oneOf(["dense","spacious"]),inputRef:$3,label:ne.node,loading:ne.bool,localeText:ne.object,maxDate:ne.object,maxDateTime:ne.object,maxTime:ne.object,minDate:ne.object,minDateTime:ne.object,minTime:ne.object,minutesStep:ne.number,monthsPerRow:ne.oneOf([3,4]),name:ne.string,onAccept:ne.func,onChange:ne.func,onClose:ne.func,onError:ne.func,onMonthChange:ne.func,onOpen:ne.func,onSelectedSectionsChange:ne.func,onViewChange:ne.func,onYearChange:ne.func,open:ne.bool,openTo:ne.oneOf(["day","hours","meridiem","minutes","month","seconds","year"]),orientation:ne.oneOf(["landscape","portrait"]),readOnly:ne.bool,reduceAnimations:ne.bool,referenceDate:ne.object,renderLoading:ne.func,selectedSections:ne.oneOfType([ne.oneOf(["all","day","empty","hours","meridiem","minutes","month","seconds","weekDay","year"]),ne.number]),shouldDisableDate:ne.func,shouldDisableMonth:ne.func,shouldDisableTime:ne.func,shouldDisableYear:ne.func,showDaysOutsideCurrentMonth:ne.bool,skipDisabled:ne.bool,slotProps:ne.object,slots:ne.object,sx:ne.oneOfType([ne.arrayOf(ne.oneOfType([ne.func,ne.object,ne.bool])),ne.func,ne.object]),thresholdToRenderTimeInASingleColumn:ne.number,timeSteps:ne.shape({hours:ne.number,minutes:ne.number,seconds:ne.number}),timezone:ne.string,value:ne.object,view:ne.oneOf(["day","hours","meridiem","minutes","month","seconds","year"]),viewRenderers:ne.shape({day:ne.func,hours:ne.func,meridiem:ne.func,minutes:ne.func,month:ne.func,seconds:ne.func,year:ne.func}),views:ne.arrayOf(ne.oneOf(["day","hours","minutes","month","seconds","year"]).isRequired),yearsOrder:ne.oneOf(["asc","desc"]),yearsPerRow:ne.oneOf([3,4])};const MX=[{views:$4},{views:nO}],qO=V.forwardRef(function(e,t){var g,y,v,b,A,E;const r=Wt(),i=WO(e,"MuiMobileDateTimePicker"),a=i.shouldRenderTimeInASingleColumn?$O:z1,s=H({day:Rd,month:Rd,year:Rd,hours:a,minutes:a,seconds:a,meridiem:a},i.viewRenderers),o=i.ampmInClock??!1,d=((g=s.hours)==null?void 0:g.name)===z1.name?i.views:i.views.filter(T=>T!=="meridiem"),f=H({},i,{viewRenderers:s,format:GO(r,i),views:d,ampmInClock:o,slots:H({field:CO},i.slots),slotProps:H({},i.slotProps,{field:T=>{var C;return H({},co((C=i.slotProps)==null?void 0:C.field,T),H4(i))},toolbar:H({hidden:!1,ampmInClock:o},(y=i.slotProps)==null?void 0:y.toolbar),tabs:H({hidden:!1},(v=i.slotProps)==null?void 0:v.tabs),layout:H({},(b=i.slotProps)==null?void 0:b.layout,{sx:vG([{[`& .${pw.root}`]:{width:$d},[`& .${gw.root}`]:{flex:1,maxHeight:Gd-1,[`.${gw.item}`]:{width:"auto"}},[`& .${hw.root}`]:{width:$d,maxHeight:Gd,flex:1,[`.${hw.item}`]:{justifyContent:"center"}}}],(E=(A=i.slotProps)==null?void 0:A.layout)==null?void 0:E.sx)})})}),{renderPicker:p}=Jq({ref:t,props:f,valueManager:Ti,valueType:"date-time",validator:Qm,steps:MX});return p()});qO.propTypes={ampm:ne.bool,ampmInClock:ne.bool,autoFocus:ne.bool,className:ne.string,closeOnSelect:ne.bool,dayOfWeekFormatter:ne.func,defaultValue:ne.object,disabled:ne.bool,disableFuture:ne.bool,disableHighlightToday:ne.bool,disableIgnoringDatePartForTimeValidation:ne.bool,disableOpenPicker:ne.bool,disablePast:ne.bool,displayWeekNumber:ne.bool,enableAccessibleFieldDOMStructure:ne.any,fixedWeekNumber:ne.number,format:ne.string,formatDensity:ne.oneOf(["dense","spacious"]),inputRef:$3,label:ne.node,loading:ne.bool,localeText:ne.object,maxDate:ne.object,maxDateTime:ne.object,maxTime:ne.object,minDate:ne.object,minDateTime:ne.object,minTime:ne.object,minutesStep:ne.number,monthsPerRow:ne.oneOf([3,4]),name:ne.string,onAccept:ne.func,onChange:ne.func,onClose:ne.func,onError:ne.func,onMonthChange:ne.func,onOpen:ne.func,onSelectedSectionsChange:ne.func,onViewChange:ne.func,onYearChange:ne.func,open:ne.bool,openTo:ne.oneOf(["day","hours","meridiem","minutes","month","seconds","year"]),orientation:ne.oneOf(["landscape","portrait"]),readOnly:ne.bool,reduceAnimations:ne.bool,referenceDate:ne.object,renderLoading:ne.func,selectedSections:ne.oneOfType([ne.oneOf(["all","day","empty","hours","meridiem","minutes","month","seconds","weekDay","year"]),ne.number]),shouldDisableDate:ne.func,shouldDisableMonth:ne.func,shouldDisableTime:ne.func,shouldDisableYear:ne.func,showDaysOutsideCurrentMonth:ne.bool,skipDisabled:ne.bool,slotProps:ne.object,slots:ne.object,sx:ne.oneOfType([ne.arrayOf(ne.oneOfType([ne.func,ne.object,ne.bool])),ne.func,ne.object]),thresholdToRenderTimeInASingleColumn:ne.number,timeSteps:ne.shape({hours:ne.number,minutes:ne.number,seconds:ne.number}),timezone:ne.string,value:ne.object,view:ne.oneOf(["day","hours","meridiem","minutes","month","seconds","year"]),viewRenderers:ne.shape({day:ne.func,hours:ne.func,meridiem:ne.func,minutes:ne.func,month:ne.func,seconds:ne.func,year:ne.func}),views:ne.arrayOf(ne.oneOf(["day","hours","minutes","month","seconds","year"]).isRequired),yearsOrder:ne.oneOf(["asc","desc"]),yearsPerRow:ne.oneOf([3,4])};const OX=["desktopModeMediaQuery"],PX=V.forwardRef(function(e,t){const r=xt({props:e,name:"MuiDateTimePicker"}),{desktopModeMediaQuery:i=yG}=r,a=Ne(r,OX);return ym(i,{defaultMatches:!0})?x.jsx(YO,H({ref:t},a)):x.jsx(qO,H({ref:t},a))}),XO=6048e5,kX=864e5,KO=6e4,QO=36e5,NX=1e3,lD=Symbol.for("constructDateFrom");function Pn(n,e){return typeof n=="function"?n(e):n&&typeof n=="object"&&lD in n?n[lD](e):n instanceof Date?new n.constructor(e):new Date(e)}function et(n,e){return Pn(e||n,n)}function ey(n,e,t){const r=et(n,t==null?void 0:t.in);return isNaN(e)?Pn((t==null?void 0:t.in)||n,NaN):(e&&r.setDate(r.getDate()+e),r)}function ZO(n,e,t){return Pn(n,+et(n)+e)}function LX(n,e,t){return ZO(n,e*1e3)}function BX(n,e,t){const r=et(n,t==null?void 0:t.in);return r.setTime(r.getTime()+e*KO),r}function VX(n,e,t){return ZO(n,e*QO)}function FX(n,e,t){return ey(n,e*7,t)}function JO(n,e,t){const r=et(n,t==null?void 0:t.in);if(isNaN(e))return Pn(n,NaN);if(!e)return r;const i=r.getDate(),a=Pn(n,r.getTime());a.setMonth(r.getMonth()+e+1,0);const s=a.getDate();return i>=s?a:(r.setFullYear(a.getFullYear(),a.getMonth(),i),r)}function jX(n,e,t){return JO(n,e*12,t)}function cD(n,e){const t=et(n,e==null?void 0:e.in);return t.setHours(23,59,59,999),t}let UX={};function nu(){return UX}function HX(n,e){var o,c,d,f;const t=nu(),r=(e==null?void 0:e.weekStartsOn)??((c=(o=e==null?void 0:e.locale)==null?void 0:o.options)==null?void 0:c.weekStartsOn)??t.weekStartsOn??((f=(d=t.locale)==null?void 0:d.options)==null?void 0:f.weekStartsOn)??0,i=et(n,e==null?void 0:e.in),a=i.getDay(),s=(a<r?-7:0)+6-(a-r);return i.setDate(i.getDate()+s),i.setHours(23,59,59,999),i}function uD(n,e){const t=et(n,e==null?void 0:e.in),r=t.getFullYear();return t.setFullYear(r+1,0,0),t.setHours(23,59,59,999),t}const zX={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},$X=(n,e,t)=>{let r;const i=zX[n];return typeof i=="string"?r=i:e===1?r=i.one:r=i.other.replace("{{count}}",e.toString()),t!=null&&t.addSuffix?t.comparison&&t.comparison>0?"in "+r:r+" ago":r};function Md(n){return(e={})=>{const t=e.width?String(e.width):n.defaultWidth;return n.formats[t]||n.formats[n.defaultWidth]}}const GX={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},WX={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},YX={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},qX={date:Md({formats:GX,defaultWidth:"full"}),time:Md({formats:WX,defaultWidth:"full"}),dateTime:Md({formats:YX,defaultWidth:"full"})},XX={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},KX=(n,e,t,r)=>XX[n];function hs(n){return(e,t)=>{const r=t!=null&&t.context?String(t.context):"standalone";let i;if(r==="formatting"&&n.formattingValues){const s=n.defaultFormattingWidth||n.defaultWidth,o=t!=null&&t.width?String(t.width):s;i=n.formattingValues[o]||n.formattingValues[s]}else{const s=n.defaultWidth,o=t!=null&&t.width?String(t.width):n.defaultWidth;i=n.values[o]||n.values[s]}const a=n.argumentCallback?n.argumentCallback(e):e;return i[a]}}const QX={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},ZX={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},JX={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},eK={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},tK={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},nK={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},rK=(n,e)=>{const t=Number(n),r=t%100;if(r>20||r<10)switch(r%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd"}return t+"th"},iK={ordinalNumber:rK,era:hs({values:QX,defaultWidth:"wide"}),quarter:hs({values:ZX,defaultWidth:"wide",argumentCallback:n=>n-1}),month:hs({values:JX,defaultWidth:"wide"}),day:hs({values:eK,defaultWidth:"wide"}),dayPeriod:hs({values:tK,defaultWidth:"wide",formattingValues:nK,defaultFormattingWidth:"wide"})};function ps(n){return(e,t={})=>{const r=t.width,i=r&&n.matchPatterns[r]||n.matchPatterns[n.defaultMatchWidth],a=e.match(i);if(!a)return null;const s=a[0],o=r&&n.parsePatterns[r]||n.parsePatterns[n.defaultParseWidth],c=Array.isArray(o)?sK(o,p=>p.test(s)):aK(o,p=>p.test(s));let d;d=n.valueCallback?n.valueCallback(c):c,d=t.valueCallback?t.valueCallback(d):d;const f=e.slice(s.length);return{value:d,rest:f}}}function aK(n,e){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)&&e(n[t]))return t}function sK(n,e){for(let t=0;t<n.length;t++)if(e(n[t]))return t}function eP(n){return(e,t={})=>{const r=e.match(n.matchPattern);if(!r)return null;const i=r[0],a=e.match(n.parsePattern);if(!a)return null;let s=n.valueCallback?n.valueCallback(a[0]):a[0];s=t.valueCallback?t.valueCallback(s):s;const o=e.slice(i.length);return{value:s,rest:o}}}const oK=/^(\d+)(th|st|nd|rd)?/i,lK=/\d+/i,cK={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},uK={any:[/^b/i,/^(a|c)/i]},dK={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},fK={any:[/1/i,/2/i,/3/i,/4/i]},hK={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},pK={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},gK={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},mK={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},yK={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},vK={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},xK={ordinalNumber:eP({matchPattern:oK,parsePattern:lK,valueCallback:n=>parseInt(n,10)}),era:ps({matchPatterns:cK,defaultMatchWidth:"wide",parsePatterns:uK,defaultParseWidth:"any"}),quarter:ps({matchPatterns:dK,defaultMatchWidth:"wide",parsePatterns:fK,defaultParseWidth:"any",valueCallback:n=>n+1}),month:ps({matchPatterns:hK,defaultMatchWidth:"wide",parsePatterns:pK,defaultParseWidth:"any"}),day:ps({matchPatterns:gK,defaultMatchWidth:"wide",parsePatterns:mK,defaultParseWidth:"any"}),dayPeriod:ps({matchPatterns:yK,defaultMatchWidth:"any",parsePatterns:vK,defaultParseWidth:"any"})},ub={code:"en-US",formatDistance:$X,formatLong:qX,formatRelative:KX,localize:iK,match:xK,options:{weekStartsOn:0,firstWeekContainsDate:1}};function $1(n){const e=et(n),t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),+n-+t}function $0(n,...e){const t=Pn.bind(null,e.find(r=>typeof r=="object"));return e.map(t)}function y0(n,e){const t=et(n,e==null?void 0:e.in);return t.setHours(0,0,0,0),t}function wK(n,e,t){const[r,i]=$0(t==null?void 0:t.in,n,e),a=y0(r),s=y0(i),o=+a-$1(a),c=+s-$1(s);return Math.round((o-c)/kX)}function tP(n,e){const t=et(n,e==null?void 0:e.in);return t.setFullYear(t.getFullYear(),0,1),t.setHours(0,0,0,0),t}function _K(n,e){const t=et(n,e==null?void 0:e.in);return wK(t,tP(t))+1}function bo(n,e){var o,c,d,f;const t=nu(),r=(e==null?void 0:e.weekStartsOn)??((c=(o=e==null?void 0:e.locale)==null?void 0:o.options)==null?void 0:c.weekStartsOn)??t.weekStartsOn??((f=(d=t.locale)==null?void 0:d.options)==null?void 0:f.weekStartsOn)??0,i=et(n,e==null?void 0:e.in),a=i.getDay(),s=(a<r?7:0)+a-r;return i.setDate(i.getDate()-s),i.setHours(0,0,0,0),i}function Wd(n,e){return bo(n,{...e,weekStartsOn:1})}function nP(n,e){const t=et(n,e==null?void 0:e.in),r=t.getFullYear(),i=Pn(t,0);i.setFullYear(r+1,0,4),i.setHours(0,0,0,0);const a=Wd(i),s=Pn(t,0);s.setFullYear(r,0,4),s.setHours(0,0,0,0);const o=Wd(s);return t.getTime()>=a.getTime()?r+1:t.getTime()>=o.getTime()?r:r-1}function bK(n,e){const t=nP(n,e),r=Pn(n,0);return r.setFullYear(t,0,4),r.setHours(0,0,0,0),Wd(r)}function rP(n,e){const t=et(n,e==null?void 0:e.in),r=+Wd(t)-+bK(t);return Math.round(r/XO)+1}function db(n,e){var f,p,g,y;const t=et(n,e==null?void 0:e.in),r=t.getFullYear(),i=nu(),a=(e==null?void 0:e.firstWeekContainsDate)??((p=(f=e==null?void 0:e.locale)==null?void 0:f.options)==null?void 0:p.firstWeekContainsDate)??i.firstWeekContainsDate??((y=(g=i.locale)==null?void 0:g.options)==null?void 0:y.firstWeekContainsDate)??1,s=Pn((e==null?void 0:e.in)||n,0);s.setFullYear(r+1,0,a),s.setHours(0,0,0,0);const o=bo(s,e),c=Pn((e==null?void 0:e.in)||n,0);c.setFullYear(r,0,a),c.setHours(0,0,0,0);const d=bo(c,e);return+t>=+o?r+1:+t>=+d?r:r-1}function AK(n,e){var o,c,d,f;const t=nu(),r=(e==null?void 0:e.firstWeekContainsDate)??((c=(o=e==null?void 0:e.locale)==null?void 0:o.options)==null?void 0:c.firstWeekContainsDate)??t.firstWeekContainsDate??((f=(d=t.locale)==null?void 0:d.options)==null?void 0:f.firstWeekContainsDate)??1,i=db(n,e),a=Pn((e==null?void 0:e.in)||n,0);return a.setFullYear(i,0,r),a.setHours(0,0,0,0),bo(a,e)}function fb(n,e){const t=et(n,e==null?void 0:e.in),r=+bo(t,e)-+AK(t,e);return Math.round(r/XO)+1}function ln(n,e){const t=n<0?"-":"",r=Math.abs(n).toString().padStart(e,"0");return t+r}const ll={y(n,e){const t=n.getFullYear(),r=t>0?t:1-t;return ln(e==="yy"?r%100:r,e.length)},M(n,e){const t=n.getMonth();return e==="M"?String(t+1):ln(t+1,2)},d(n,e){return ln(n.getDate(),e.length)},a(n,e){const t=n.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.toUpperCase();case"aaa":return t;case"aaaaa":return t[0];case"aaaa":default:return t==="am"?"a.m.":"p.m."}},h(n,e){return ln(n.getHours()%12||12,e.length)},H(n,e){return ln(n.getHours(),e.length)},m(n,e){return ln(n.getMinutes(),e.length)},s(n,e){return ln(n.getSeconds(),e.length)},S(n,e){const t=e.length,r=n.getMilliseconds(),i=Math.trunc(r*Math.pow(10,t-3));return ln(i,e.length)}},Ju={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},dD={G:function(n,e,t){const r=n.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return t.era(r,{width:"abbreviated"});case"GGGGG":return t.era(r,{width:"narrow"});case"GGGG":default:return t.era(r,{width:"wide"})}},y:function(n,e,t){if(e==="yo"){const r=n.getFullYear(),i=r>0?r:1-r;return t.ordinalNumber(i,{unit:"year"})}return ll.y(n,e)},Y:function(n,e,t,r){const i=db(n,r),a=i>0?i:1-i;if(e==="YY"){const s=a%100;return ln(s,2)}return e==="Yo"?t.ordinalNumber(a,{unit:"year"}):ln(a,e.length)},R:function(n,e){const t=nP(n);return ln(t,e.length)},u:function(n,e){const t=n.getFullYear();return ln(t,e.length)},Q:function(n,e,t){const r=Math.ceil((n.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return ln(r,2);case"Qo":return t.ordinalNumber(r,{unit:"quarter"});case"QQQ":return t.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return t.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return t.quarter(r,{width:"wide",context:"formatting"})}},q:function(n,e,t){const r=Math.ceil((n.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return ln(r,2);case"qo":return t.ordinalNumber(r,{unit:"quarter"});case"qqq":return t.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return t.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return t.quarter(r,{width:"wide",context:"standalone"})}},M:function(n,e,t){const r=n.getMonth();switch(e){case"M":case"MM":return ll.M(n,e);case"Mo":return t.ordinalNumber(r+1,{unit:"month"});case"MMM":return t.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return t.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return t.month(r,{width:"wide",context:"formatting"})}},L:function(n,e,t){const r=n.getMonth();switch(e){case"L":return String(r+1);case"LL":return ln(r+1,2);case"Lo":return t.ordinalNumber(r+1,{unit:"month"});case"LLL":return t.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return t.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return t.month(r,{width:"wide",context:"standalone"})}},w:function(n,e,t,r){const i=fb(n,r);return e==="wo"?t.ordinalNumber(i,{unit:"week"}):ln(i,e.length)},I:function(n,e,t){const r=rP(n);return e==="Io"?t.ordinalNumber(r,{unit:"week"}):ln(r,e.length)},d:function(n,e,t){return e==="do"?t.ordinalNumber(n.getDate(),{unit:"date"}):ll.d(n,e)},D:function(n,e,t){const r=_K(n);return e==="Do"?t.ordinalNumber(r,{unit:"dayOfYear"}):ln(r,e.length)},E:function(n,e,t){const r=n.getDay();switch(e){case"E":case"EE":case"EEE":return t.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return t.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return t.day(r,{width:"short",context:"formatting"});case"EEEE":default:return t.day(r,{width:"wide",context:"formatting"})}},e:function(n,e,t,r){const i=n.getDay(),a=(i-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(a);case"ee":return ln(a,2);case"eo":return t.ordinalNumber(a,{unit:"day"});case"eee":return t.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return t.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return t.day(i,{width:"short",context:"formatting"});case"eeee":default:return t.day(i,{width:"wide",context:"formatting"})}},c:function(n,e,t,r){const i=n.getDay(),a=(i-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(a);case"cc":return ln(a,e.length);case"co":return t.ordinalNumber(a,{unit:"day"});case"ccc":return t.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return t.day(i,{width:"narrow",context:"standalone"});case"cccccc":return t.day(i,{width:"short",context:"standalone"});case"cccc":default:return t.day(i,{width:"wide",context:"standalone"})}},i:function(n,e,t){const r=n.getDay(),i=r===0?7:r;switch(e){case"i":return String(i);case"ii":return ln(i,e.length);case"io":return t.ordinalNumber(i,{unit:"day"});case"iii":return t.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return t.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return t.day(r,{width:"short",context:"formatting"});case"iiii":default:return t.day(r,{width:"wide",context:"formatting"})}},a:function(n,e,t){const i=n.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return t.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return t.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(n,e,t){const r=n.getHours();let i;switch(r===12?i=Ju.noon:r===0?i=Ju.midnight:i=r/12>=1?"pm":"am",e){case"b":case"bb":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return t.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return t.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(n,e,t){const r=n.getHours();let i;switch(r>=17?i=Ju.evening:r>=12?i=Ju.afternoon:r>=4?i=Ju.morning:i=Ju.night,e){case"B":case"BB":case"BBB":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return t.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return t.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(n,e,t){if(e==="ho"){let r=n.getHours()%12;return r===0&&(r=12),t.ordinalNumber(r,{unit:"hour"})}return ll.h(n,e)},H:function(n,e,t){return e==="Ho"?t.ordinalNumber(n.getHours(),{unit:"hour"}):ll.H(n,e)},K:function(n,e,t){const r=n.getHours()%12;return e==="Ko"?t.ordinalNumber(r,{unit:"hour"}):ln(r,e.length)},k:function(n,e,t){let r=n.getHours();return r===0&&(r=24),e==="ko"?t.ordinalNumber(r,{unit:"hour"}):ln(r,e.length)},m:function(n,e,t){return e==="mo"?t.ordinalNumber(n.getMinutes(),{unit:"minute"}):ll.m(n,e)},s:function(n,e,t){return e==="so"?t.ordinalNumber(n.getSeconds(),{unit:"second"}):ll.s(n,e)},S:function(n,e){return ll.S(n,e)},X:function(n,e,t){const r=n.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return hD(r);case"XXXX":case"XX":return Tc(r);case"XXXXX":case"XXX":default:return Tc(r,":")}},x:function(n,e,t){const r=n.getTimezoneOffset();switch(e){case"x":return hD(r);case"xxxx":case"xx":return Tc(r);case"xxxxx":case"xxx":default:return Tc(r,":")}},O:function(n,e,t){const r=n.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+fD(r,":");case"OOOO":default:return"GMT"+Tc(r,":")}},z:function(n,e,t){const r=n.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+fD(r,":");case"zzzz":default:return"GMT"+Tc(r,":")}},t:function(n,e,t){const r=Math.trunc(+n/1e3);return ln(r,e.length)},T:function(n,e,t){return ln(+n,e.length)}};function fD(n,e=""){const t=n>0?"-":"+",r=Math.abs(n),i=Math.trunc(r/60),a=r%60;return a===0?t+String(i):t+String(i)+e+ln(a,2)}function hD(n,e){return n%60===0?(n>0?"-":"+")+ln(Math.abs(n)/60,2):Tc(n,e)}function Tc(n,e=""){const t=n>0?"-":"+",r=Math.abs(n),i=ln(Math.trunc(r/60),2),a=ln(r%60,2);return t+i+e+a}const pD=(n,e)=>{switch(n){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},iP=(n,e)=>{switch(n){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},EK=(n,e)=>{const t=n.match(/(P+)(p+)?/)||[],r=t[1],i=t[2];if(!i)return pD(n,e);let a;switch(r){case"P":a=e.dateTime({width:"short"});break;case"PP":a=e.dateTime({width:"medium"});break;case"PPP":a=e.dateTime({width:"long"});break;case"PPPP":default:a=e.dateTime({width:"full"});break}return a.replace("{{date}}",pD(r,e)).replace("{{time}}",iP(i,e))},G1={p:iP,P:EK},SK=/^D+$/,TK=/^Y+$/,CK=["D","DD","YY","YYYY"];function aP(n){return SK.test(n)}function sP(n){return TK.test(n)}function mw(n,e,t){const r=IK(n,e,t);if(console.warn(r),CK.includes(n))throw new RangeError(r)}function IK(n,e,t){const r=n[0]==="Y"?"years":"days of the month";return`Use \`${n.toLowerCase()}\` instead of \`${n}\` (in \`${e}\`) for formatting ${r} to the input \`${t}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}function DK(n){return n instanceof Date||typeof n=="object"&&Object.prototype.toString.call(n)==="[object Date]"}function oP(n){return!(!DK(n)&&typeof n!="number"||isNaN(+et(n)))}const RK=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,MK=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,OK=/^'([^]*?)'?$/,PK=/''/g,kK=/[a-zA-Z]/;function NK(n,e,t){var f,p,g,y,v,b,A,E;const r=nu(),i=(t==null?void 0:t.locale)??r.locale??ub,a=(t==null?void 0:t.firstWeekContainsDate)??((p=(f=t==null?void 0:t.locale)==null?void 0:f.options)==null?void 0:p.firstWeekContainsDate)??r.firstWeekContainsDate??((y=(g=r.locale)==null?void 0:g.options)==null?void 0:y.firstWeekContainsDate)??1,s=(t==null?void 0:t.weekStartsOn)??((b=(v=t==null?void 0:t.locale)==null?void 0:v.options)==null?void 0:b.weekStartsOn)??r.weekStartsOn??((E=(A=r.locale)==null?void 0:A.options)==null?void 0:E.weekStartsOn)??0,o=et(n,t==null?void 0:t.in);if(!oP(o))throw new RangeError("Invalid time value");let c=e.match(MK).map(T=>{const C=T[0];if(C==="p"||C==="P"){const D=G1[C];return D(T,i.formatLong)}return T}).join("").match(RK).map(T=>{if(T==="''")return{isToken:!1,value:"'"};const C=T[0];if(C==="'")return{isToken:!1,value:LK(T)};if(dD[C])return{isToken:!0,value:T};if(C.match(kK))throw new RangeError("Format string contains an unescaped latin alphabet character `"+C+"`");return{isToken:!1,value:T}});i.localize.preprocessor&&(c=i.localize.preprocessor(o,c));const d={firstWeekContainsDate:a,weekStartsOn:s,locale:i};return c.map(T=>{if(!T.isToken)return T.value;const C=T.value;(!(t!=null&&t.useAdditionalWeekYearTokens)&&sP(C)||!(t!=null&&t.useAdditionalDayOfYearTokens)&&aP(C))&&mw(C,e,String(n));const D=dD[C[0]];return D(o,C,i.localize,d)}).join("")}function LK(n){const e=n.match(OK);return e?e[1].replace(PK,"'"):n}function BK(n,e){return et(n,e==null?void 0:e.in).getDate()}function lP(n,e){const t=et(n,e==null?void 0:e.in),r=t.getFullYear(),i=t.getMonth(),a=Pn(t,0);return a.setFullYear(r,i+1,0),a.setHours(0,0,0,0),a.getDate()}function VK(n,e){return et(n,e==null?void 0:e.in).getHours()}function FK(n,e){return et(n,e==null?void 0:e.in).getMinutes()}function jK(n,e){return et(n,e==null?void 0:e.in).getMonth()}function UK(n){return et(n).getSeconds()}function HK(n){return et(n).getMilliseconds()}function zK(n,e){return et(n,e==null?void 0:e.in).getFullYear()}function $x(n,e){return+et(n)>+et(e)}function Gx(n,e){return+et(n)<+et(e)}function $K(n,e){return+et(n)==+et(e)}function GK(n,e,t){const[r,i]=$0(t==null?void 0:t.in,n,e);return+y0(r)==+y0(i)}function WK(n,e,t){const[r,i]=$0(t==null?void 0:t.in,n,e);return r.getFullYear()===i.getFullYear()}function YK(n,e,t){const[r,i]=$0(t==null?void 0:t.in,n,e);return r.getFullYear()===i.getFullYear()&&r.getMonth()===i.getMonth()}function gD(n,e){const t=et(n,e==null?void 0:e.in);return t.setMinutes(0,0,0),t}function qK(n,e,t){const[r,i]=$0(t==null?void 0:t.in,n,e);return+gD(r)==+gD(i)}function XK(){return Object.assign({},nu())}function KK(n,e){const t=QK(e)?new e(0):Pn(e,0);return t.setFullYear(n.getFullYear(),n.getMonth(),n.getDate()),t.setHours(n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds()),t}function QK(n){var e;return typeof n=="function"&&((e=n.prototype)==null?void 0:e.constructor)===n}const ZK=10;class cP{constructor(){ye(this,"subPriority",0)}validate(e,t){return!0}}class JK extends cP{constructor(e,t,r,i,a){super(),this.value=e,this.validateValue=t,this.setValue=r,this.priority=i,a&&(this.subPriority=a)}validate(e,t){return this.validateValue(e,this.value,t)}set(e,t,r){return this.setValue(e,t,this.value,r)}}class eQ extends cP{constructor(t,r){super();ye(this,"priority",ZK);ye(this,"subPriority",-1);this.context=t||(i=>Pn(r,i))}set(t,r){return r.timestampIsSet?t:Pn(t,KK(t,this.context))}}class Zt{run(e,t,r,i){const a=this.parse(e,t,r,i);return a?{setter:new JK(a.value,this.validate,this.set,this.priority,this.subPriority),rest:a.rest}:null}validate(e,t,r){return!0}}class tQ extends Zt{constructor(){super(...arguments);ye(this,"priority",140);ye(this,"incompatibleTokens",["R","u","t","T"])}parse(t,r,i){switch(r){case"G":case"GG":case"GGG":return i.era(t,{width:"abbreviated"})||i.era(t,{width:"narrow"});case"GGGGG":return i.era(t,{width:"narrow"});case"GGGG":default:return i.era(t,{width:"wide"})||i.era(t,{width:"abbreviated"})||i.era(t,{width:"narrow"})}}set(t,r,i){return r.era=i,t.setFullYear(i,0,1),t.setHours(0,0,0,0),t}}const Jn={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},gs={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function er(n,e){return n&&{value:e(n.value),rest:n.rest}}function Ln(n,e){const t=e.match(n);return t?{value:parseInt(t[0],10),rest:e.slice(t[0].length)}:null}function ms(n,e){const t=e.match(n);if(!t)return null;if(t[0]==="Z")return{value:0,rest:e.slice(1)};const r=t[1]==="+"?1:-1,i=t[2]?parseInt(t[2],10):0,a=t[3]?parseInt(t[3],10):0,s=t[5]?parseInt(t[5],10):0;return{value:r*(i*QO+a*KO+s*NX),rest:e.slice(t[0].length)}}function uP(n){return Ln(Jn.anyDigitsSigned,n)}function Wn(n,e){switch(n){case 1:return Ln(Jn.singleDigit,e);case 2:return Ln(Jn.twoDigits,e);case 3:return Ln(Jn.threeDigits,e);case 4:return Ln(Jn.fourDigits,e);default:return Ln(new RegExp("^\\d{1,"+n+"}"),e)}}function W1(n,e){switch(n){case 1:return Ln(Jn.singleDigitSigned,e);case 2:return Ln(Jn.twoDigitsSigned,e);case 3:return Ln(Jn.threeDigitsSigned,e);case 4:return Ln(Jn.fourDigitsSigned,e);default:return Ln(new RegExp("^-?\\d{1,"+n+"}"),e)}}function hb(n){switch(n){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function dP(n,e){const t=e>0,r=t?e:1-e;let i;if(r<=50)i=n||100;else{const a=r+50,s=Math.trunc(a/100)*100,o=n>=a%100;i=n+s-(o?100:0)}return t?i:1-i}function fP(n){return n%400===0||n%4===0&&n%100!==0}class nQ extends Zt{constructor(){super(...arguments);ye(this,"priority",130);ye(this,"incompatibleTokens",["Y","R","u","w","I","i","e","c","t","T"])}parse(t,r,i){const a=s=>({year:s,isTwoDigitYear:r==="yy"});switch(r){case"y":return er(Wn(4,t),a);case"yo":return er(i.ordinalNumber(t,{unit:"year"}),a);default:return er(Wn(r.length,t),a)}}validate(t,r){return r.isTwoDigitYear||r.year>0}set(t,r,i){const a=t.getFullYear();if(i.isTwoDigitYear){const o=dP(i.year,a);return t.setFullYear(o,0,1),t.setHours(0,0,0,0),t}const s=!("era"in r)||r.era===1?i.year:1-i.year;return t.setFullYear(s,0,1),t.setHours(0,0,0,0),t}}class rQ extends Zt{constructor(){super(...arguments);ye(this,"priority",130);ye(this,"incompatibleTokens",["y","R","u","Q","q","M","L","I","d","D","i","t","T"])}parse(t,r,i){const a=s=>({year:s,isTwoDigitYear:r==="YY"});switch(r){case"Y":return er(Wn(4,t),a);case"Yo":return er(i.ordinalNumber(t,{unit:"year"}),a);default:return er(Wn(r.length,t),a)}}validate(t,r){return r.isTwoDigitYear||r.year>0}set(t,r,i,a){const s=db(t,a);if(i.isTwoDigitYear){const c=dP(i.year,s);return t.setFullYear(c,0,a.firstWeekContainsDate),t.setHours(0,0,0,0),bo(t,a)}const o=!("era"in r)||r.era===1?i.year:1-i.year;return t.setFullYear(o,0,a.firstWeekContainsDate),t.setHours(0,0,0,0),bo(t,a)}}class iQ extends Zt{constructor(){super(...arguments);ye(this,"priority",130);ye(this,"incompatibleTokens",["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"])}parse(t,r){return W1(r==="R"?4:r.length,t)}set(t,r,i){const a=Pn(t,0);return a.setFullYear(i,0,4),a.setHours(0,0,0,0),Wd(a)}}class aQ extends Zt{constructor(){super(...arguments);ye(this,"priority",130);ye(this,"incompatibleTokens",["G","y","Y","R","w","I","i","e","c","t","T"])}parse(t,r){return W1(r==="u"?4:r.length,t)}set(t,r,i){return t.setFullYear(i,0,1),t.setHours(0,0,0,0),t}}class sQ extends Zt{constructor(){super(...arguments);ye(this,"priority",120);ye(this,"incompatibleTokens",["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"])}parse(t,r,i){switch(r){case"Q":case"QQ":return Wn(r.length,t);case"Qo":return i.ordinalNumber(t,{unit:"quarter"});case"QQQ":return i.quarter(t,{width:"abbreviated",context:"formatting"})||i.quarter(t,{width:"narrow",context:"formatting"});case"QQQQQ":return i.quarter(t,{width:"narrow",context:"formatting"});case"QQQQ":default:return i.quarter(t,{width:"wide",context:"formatting"})||i.quarter(t,{width:"abbreviated",context:"formatting"})||i.quarter(t,{width:"narrow",context:"formatting"})}}validate(t,r){return r>=1&&r<=4}set(t,r,i){return t.setMonth((i-1)*3,1),t.setHours(0,0,0,0),t}}class oQ extends Zt{constructor(){super(...arguments);ye(this,"priority",120);ye(this,"incompatibleTokens",["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"])}parse(t,r,i){switch(r){case"q":case"qq":return Wn(r.length,t);case"qo":return i.ordinalNumber(t,{unit:"quarter"});case"qqq":return i.quarter(t,{width:"abbreviated",context:"standalone"})||i.quarter(t,{width:"narrow",context:"standalone"});case"qqqqq":return i.quarter(t,{width:"narrow",context:"standalone"});case"qqqq":default:return i.quarter(t,{width:"wide",context:"standalone"})||i.quarter(t,{width:"abbreviated",context:"standalone"})||i.quarter(t,{width:"narrow",context:"standalone"})}}validate(t,r){return r>=1&&r<=4}set(t,r,i){return t.setMonth((i-1)*3,1),t.setHours(0,0,0,0),t}}class lQ extends Zt{constructor(){super(...arguments);ye(this,"incompatibleTokens",["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]);ye(this,"priority",110)}parse(t,r,i){const a=s=>s-1;switch(r){case"M":return er(Ln(Jn.month,t),a);case"MM":return er(Wn(2,t),a);case"Mo":return er(i.ordinalNumber(t,{unit:"month"}),a);case"MMM":return i.month(t,{width:"abbreviated",context:"formatting"})||i.month(t,{width:"narrow",context:"formatting"});case"MMMMM":return i.month(t,{width:"narrow",context:"formatting"});case"MMMM":default:return i.month(t,{width:"wide",context:"formatting"})||i.month(t,{width:"abbreviated",context:"formatting"})||i.month(t,{width:"narrow",context:"formatting"})}}validate(t,r){return r>=0&&r<=11}set(t,r,i){return t.setMonth(i,1),t.setHours(0,0,0,0),t}}class cQ extends Zt{constructor(){super(...arguments);ye(this,"priority",110);ye(this,"incompatibleTokens",["Y","R","q","Q","M","w","I","D","i","e","c","t","T"])}parse(t,r,i){const a=s=>s-1;switch(r){case"L":return er(Ln(Jn.month,t),a);case"LL":return er(Wn(2,t),a);case"Lo":return er(i.ordinalNumber(t,{unit:"month"}),a);case"LLL":return i.month(t,{width:"abbreviated",context:"standalone"})||i.month(t,{width:"narrow",context:"standalone"});case"LLLLL":return i.month(t,{width:"narrow",context:"standalone"});case"LLLL":default:return i.month(t,{width:"wide",context:"standalone"})||i.month(t,{width:"abbreviated",context:"standalone"})||i.month(t,{width:"narrow",context:"standalone"})}}validate(t,r){return r>=0&&r<=11}set(t,r,i){return t.setMonth(i,1),t.setHours(0,0,0,0),t}}function uQ(n,e,t){const r=et(n,t==null?void 0:t.in),i=fb(r,t)-e;return r.setDate(r.getDate()-i*7),et(r,t==null?void 0:t.in)}class dQ extends Zt{constructor(){super(...arguments);ye(this,"priority",100);ye(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","i","t","T"])}parse(t,r,i){switch(r){case"w":return Ln(Jn.week,t);case"wo":return i.ordinalNumber(t,{unit:"week"});default:return Wn(r.length,t)}}validate(t,r){return r>=1&&r<=53}set(t,r,i,a){return bo(uQ(t,i,a),a)}}function fQ(n,e,t){const r=et(n,t==null?void 0:t.in),i=rP(r,t)-e;return r.setDate(r.getDate()-i*7),r}class hQ extends Zt{constructor(){super(...arguments);ye(this,"priority",100);ye(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"])}parse(t,r,i){switch(r){case"I":return Ln(Jn.week,t);case"Io":return i.ordinalNumber(t,{unit:"week"});default:return Wn(r.length,t)}}validate(t,r){return r>=1&&r<=53}set(t,r,i){return Wd(fQ(t,i))}}const pQ=[31,28,31,30,31,30,31,31,30,31,30,31],gQ=[31,29,31,30,31,30,31,31,30,31,30,31];class mQ extends Zt{constructor(){super(...arguments);ye(this,"priority",90);ye(this,"subPriority",1);ye(this,"incompatibleTokens",["Y","R","q","Q","w","I","D","i","e","c","t","T"])}parse(t,r,i){switch(r){case"d":return Ln(Jn.date,t);case"do":return i.ordinalNumber(t,{unit:"date"});default:return Wn(r.length,t)}}validate(t,r){const i=t.getFullYear(),a=fP(i),s=t.getMonth();return a?r>=1&&r<=gQ[s]:r>=1&&r<=pQ[s]}set(t,r,i){return t.setDate(i),t.setHours(0,0,0,0),t}}class yQ extends Zt{constructor(){super(...arguments);ye(this,"priority",90);ye(this,"subpriority",1);ye(this,"incompatibleTokens",["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"])}parse(t,r,i){switch(r){case"D":case"DD":return Ln(Jn.dayOfYear,t);case"Do":return i.ordinalNumber(t,{unit:"date"});default:return Wn(r.length,t)}}validate(t,r){const i=t.getFullYear();return fP(i)?r>=1&&r<=366:r>=1&&r<=365}set(t,r,i){return t.setMonth(0,i),t.setHours(0,0,0,0),t}}function pb(n,e,t){var p,g,y,v;const r=nu(),i=(t==null?void 0:t.weekStartsOn)??((g=(p=t==null?void 0:t.locale)==null?void 0:p.options)==null?void 0:g.weekStartsOn)??r.weekStartsOn??((v=(y=r.locale)==null?void 0:y.options)==null?void 0:v.weekStartsOn)??0,a=et(n,t==null?void 0:t.in),s=a.getDay(),c=(e%7+7)%7,d=7-i,f=e<0||e>6?e-(s+d)%7:(c+d)%7-(s+d)%7;return ey(a,f,t)}class vQ extends Zt{constructor(){super(...arguments);ye(this,"priority",90);ye(this,"incompatibleTokens",["D","i","e","c","t","T"])}parse(t,r,i){switch(r){case"E":case"EE":case"EEE":return i.day(t,{width:"abbreviated",context:"formatting"})||i.day(t,{width:"short",context:"formatting"})||i.day(t,{width:"narrow",context:"formatting"});case"EEEEE":return i.day(t,{width:"narrow",context:"formatting"});case"EEEEEE":return i.day(t,{width:"short",context:"formatting"})||i.day(t,{width:"narrow",context:"formatting"});case"EEEE":default:return i.day(t,{width:"wide",context:"formatting"})||i.day(t,{width:"abbreviated",context:"formatting"})||i.day(t,{width:"short",context:"formatting"})||i.day(t,{width:"narrow",context:"formatting"})}}validate(t,r){return r>=0&&r<=6}set(t,r,i,a){return t=pb(t,i,a),t.setHours(0,0,0,0),t}}class xQ extends Zt{constructor(){super(...arguments);ye(this,"priority",90);ye(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"])}parse(t,r,i,a){const s=o=>{const c=Math.floor((o-1)/7)*7;return(o+a.weekStartsOn+6)%7+c};switch(r){case"e":case"ee":return er(Wn(r.length,t),s);case"eo":return er(i.ordinalNumber(t,{unit:"day"}),s);case"eee":return i.day(t,{width:"abbreviated",context:"formatting"})||i.day(t,{width:"short",context:"formatting"})||i.day(t,{width:"narrow",context:"formatting"});case"eeeee":return i.day(t,{width:"narrow",context:"formatting"});case"eeeeee":return i.day(t,{width:"short",context:"formatting"})||i.day(t,{width:"narrow",context:"formatting"});case"eeee":default:return i.day(t,{width:"wide",context:"formatting"})||i.day(t,{width:"abbreviated",context:"formatting"})||i.day(t,{width:"short",context:"formatting"})||i.day(t,{width:"narrow",context:"formatting"})}}validate(t,r){return r>=0&&r<=6}set(t,r,i,a){return t=pb(t,i,a),t.setHours(0,0,0,0),t}}class wQ extends Zt{constructor(){super(...arguments);ye(this,"priority",90);ye(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"])}parse(t,r,i,a){const s=o=>{const c=Math.floor((o-1)/7)*7;return(o+a.weekStartsOn+6)%7+c};switch(r){case"c":case"cc":return er(Wn(r.length,t),s);case"co":return er(i.ordinalNumber(t,{unit:"day"}),s);case"ccc":return i.day(t,{width:"abbreviated",context:"standalone"})||i.day(t,{width:"short",context:"standalone"})||i.day(t,{width:"narrow",context:"standalone"});case"ccccc":return i.day(t,{width:"narrow",context:"standalone"});case"cccccc":return i.day(t,{width:"short",context:"standalone"})||i.day(t,{width:"narrow",context:"standalone"});case"cccc":default:return i.day(t,{width:"wide",context:"standalone"})||i.day(t,{width:"abbreviated",context:"standalone"})||i.day(t,{width:"short",context:"standalone"})||i.day(t,{width:"narrow",context:"standalone"})}}validate(t,r){return r>=0&&r<=6}set(t,r,i,a){return t=pb(t,i,a),t.setHours(0,0,0,0),t}}function _Q(n,e){const t=et(n,e==null?void 0:e.in).getDay();return t===0?7:t}function bQ(n,e,t){const r=et(n,t==null?void 0:t.in),i=_Q(r,t),a=e-i;return ey(r,a,t)}class AQ extends Zt{constructor(){super(...arguments);ye(this,"priority",90);ye(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"])}parse(t,r,i){const a=s=>s===0?7:s;switch(r){case"i":case"ii":return Wn(r.length,t);case"io":return i.ordinalNumber(t,{unit:"day"});case"iii":return er(i.day(t,{width:"abbreviated",context:"formatting"})||i.day(t,{width:"short",context:"formatting"})||i.day(t,{width:"narrow",context:"formatting"}),a);case"iiiii":return er(i.day(t,{width:"narrow",context:"formatting"}),a);case"iiiiii":return er(i.day(t,{width:"short",context:"formatting"})||i.day(t,{width:"narrow",context:"formatting"}),a);case"iiii":default:return er(i.day(t,{width:"wide",context:"formatting"})||i.day(t,{width:"abbreviated",context:"formatting"})||i.day(t,{width:"short",context:"formatting"})||i.day(t,{width:"narrow",context:"formatting"}),a)}}validate(t,r){return r>=1&&r<=7}set(t,r,i){return t=bQ(t,i),t.setHours(0,0,0,0),t}}class EQ extends Zt{constructor(){super(...arguments);ye(this,"priority",80);ye(this,"incompatibleTokens",["b","B","H","k","t","T"])}parse(t,r,i){switch(r){case"a":case"aa":case"aaa":return i.dayPeriod(t,{width:"abbreviated",context:"formatting"})||i.dayPeriod(t,{width:"narrow",context:"formatting"});case"aaaaa":return i.dayPeriod(t,{width:"narrow",context:"formatting"});case"aaaa":default:return i.dayPeriod(t,{width:"wide",context:"formatting"})||i.dayPeriod(t,{width:"abbreviated",context:"formatting"})||i.dayPeriod(t,{width:"narrow",context:"formatting"})}}set(t,r,i){return t.setHours(hb(i),0,0,0),t}}class SQ extends Zt{constructor(){super(...arguments);ye(this,"priority",80);ye(this,"incompatibleTokens",["a","B","H","k","t","T"])}parse(t,r,i){switch(r){case"b":case"bb":case"bbb":return i.dayPeriod(t,{width:"abbreviated",context:"formatting"})||i.dayPeriod(t,{width:"narrow",context:"formatting"});case"bbbbb":return i.dayPeriod(t,{width:"narrow",context:"formatting"});case"bbbb":default:return i.dayPeriod(t,{width:"wide",context:"formatting"})||i.dayPeriod(t,{width:"abbreviated",context:"formatting"})||i.dayPeriod(t,{width:"narrow",context:"formatting"})}}set(t,r,i){return t.setHours(hb(i),0,0,0),t}}class TQ extends Zt{constructor(){super(...arguments);ye(this,"priority",80);ye(this,"incompatibleTokens",["a","b","t","T"])}parse(t,r,i){switch(r){case"B":case"BB":case"BBB":return i.dayPeriod(t,{width:"abbreviated",context:"formatting"})||i.dayPeriod(t,{width:"narrow",context:"formatting"});case"BBBBB":return i.dayPeriod(t,{width:"narrow",context:"formatting"});case"BBBB":default:return i.dayPeriod(t,{width:"wide",context:"formatting"})||i.dayPeriod(t,{width:"abbreviated",context:"formatting"})||i.dayPeriod(t,{width:"narrow",context:"formatting"})}}set(t,r,i){return t.setHours(hb(i),0,0,0),t}}class CQ extends Zt{constructor(){super(...arguments);ye(this,"priority",70);ye(this,"incompatibleTokens",["H","K","k","t","T"])}parse(t,r,i){switch(r){case"h":return Ln(Jn.hour12h,t);case"ho":return i.ordinalNumber(t,{unit:"hour"});default:return Wn(r.length,t)}}validate(t,r){return r>=1&&r<=12}set(t,r,i){const a=t.getHours()>=12;return a&&i<12?t.setHours(i+12,0,0,0):!a&&i===12?t.setHours(0,0,0,0):t.setHours(i,0,0,0),t}}class IQ extends Zt{constructor(){super(...arguments);ye(this,"priority",70);ye(this,"incompatibleTokens",["a","b","h","K","k","t","T"])}parse(t,r,i){switch(r){case"H":return Ln(Jn.hour23h,t);case"Ho":return i.ordinalNumber(t,{unit:"hour"});default:return Wn(r.length,t)}}validate(t,r){return r>=0&&r<=23}set(t,r,i){return t.setHours(i,0,0,0),t}}class DQ extends Zt{constructor(){super(...arguments);ye(this,"priority",70);ye(this,"incompatibleTokens",["h","H","k","t","T"])}parse(t,r,i){switch(r){case"K":return Ln(Jn.hour11h,t);case"Ko":return i.ordinalNumber(t,{unit:"hour"});default:return Wn(r.length,t)}}validate(t,r){return r>=0&&r<=11}set(t,r,i){return t.getHours()>=12&&i<12?t.setHours(i+12,0,0,0):t.setHours(i,0,0,0),t}}class RQ extends Zt{constructor(){super(...arguments);ye(this,"priority",70);ye(this,"incompatibleTokens",["a","b","h","H","K","t","T"])}parse(t,r,i){switch(r){case"k":return Ln(Jn.hour24h,t);case"ko":return i.ordinalNumber(t,{unit:"hour"});default:return Wn(r.length,t)}}validate(t,r){return r>=1&&r<=24}set(t,r,i){const a=i<=24?i%24:i;return t.setHours(a,0,0,0),t}}class MQ extends Zt{constructor(){super(...arguments);ye(this,"priority",60);ye(this,"incompatibleTokens",["t","T"])}parse(t,r,i){switch(r){case"m":return Ln(Jn.minute,t);case"mo":return i.ordinalNumber(t,{unit:"minute"});default:return Wn(r.length,t)}}validate(t,r){return r>=0&&r<=59}set(t,r,i){return t.setMinutes(i,0,0),t}}class OQ extends Zt{constructor(){super(...arguments);ye(this,"priority",50);ye(this,"incompatibleTokens",["t","T"])}parse(t,r,i){switch(r){case"s":return Ln(Jn.second,t);case"so":return i.ordinalNumber(t,{unit:"second"});default:return Wn(r.length,t)}}validate(t,r){return r>=0&&r<=59}set(t,r,i){return t.setSeconds(i,0),t}}class PQ extends Zt{constructor(){super(...arguments);ye(this,"priority",30);ye(this,"incompatibleTokens",["t","T"])}parse(t,r){const i=a=>Math.trunc(a*Math.pow(10,-r.length+3));return er(Wn(r.length,t),i)}set(t,r,i){return t.setMilliseconds(i),t}}class kQ extends Zt{constructor(){super(...arguments);ye(this,"priority",10);ye(this,"incompatibleTokens",["t","T","x"])}parse(t,r){switch(r){case"X":return ms(gs.basicOptionalMinutes,t);case"XX":return ms(gs.basic,t);case"XXXX":return ms(gs.basicOptionalSeconds,t);case"XXXXX":return ms(gs.extendedOptionalSeconds,t);case"XXX":default:return ms(gs.extended,t)}}set(t,r,i){return r.timestampIsSet?t:Pn(t,t.getTime()-$1(t)-i)}}class NQ extends Zt{constructor(){super(...arguments);ye(this,"priority",10);ye(this,"incompatibleTokens",["t","T","X"])}parse(t,r){switch(r){case"x":return ms(gs.basicOptionalMinutes,t);case"xx":return ms(gs.basic,t);case"xxxx":return ms(gs.basicOptionalSeconds,t);case"xxxxx":return ms(gs.extendedOptionalSeconds,t);case"xxx":default:return ms(gs.extended,t)}}set(t,r,i){return r.timestampIsSet?t:Pn(t,t.getTime()-$1(t)-i)}}class LQ extends Zt{constructor(){super(...arguments);ye(this,"priority",40);ye(this,"incompatibleTokens","*")}parse(t){return uP(t)}set(t,r,i){return[Pn(t,i*1e3),{timestampIsSet:!0}]}}class BQ extends Zt{constructor(){super(...arguments);ye(this,"priority",20);ye(this,"incompatibleTokens","*")}parse(t){return uP(t)}set(t,r,i){return[Pn(t,i),{timestampIsSet:!0}]}}const VQ={G:new tQ,y:new nQ,Y:new rQ,R:new iQ,u:new aQ,Q:new sQ,q:new oQ,M:new lQ,L:new cQ,w:new dQ,I:new hQ,d:new mQ,D:new yQ,E:new vQ,e:new xQ,c:new wQ,i:new AQ,a:new EQ,b:new SQ,B:new TQ,h:new CQ,H:new IQ,K:new DQ,k:new RQ,m:new MQ,s:new OQ,S:new PQ,X:new kQ,x:new NQ,t:new LQ,T:new BQ},FQ=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,jQ=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,UQ=/^'([^]*?)'?$/,HQ=/''/g,zQ=/\S/,$Q=/[a-zA-Z]/;function GQ(n,e,t,r){var A,E,T,C,D,O,N,M;const i=()=>Pn((r==null?void 0:r.in)||t,NaN),a=XK(),s=(r==null?void 0:r.locale)??a.locale??ub,o=(r==null?void 0:r.firstWeekContainsDate)??((E=(A=r==null?void 0:r.locale)==null?void 0:A.options)==null?void 0:E.firstWeekContainsDate)??a.firstWeekContainsDate??((C=(T=a.locale)==null?void 0:T.options)==null?void 0:C.firstWeekContainsDate)??1,c=(r==null?void 0:r.weekStartsOn)??((O=(D=r==null?void 0:r.locale)==null?void 0:D.options)==null?void 0:O.weekStartsOn)??a.weekStartsOn??((M=(N=a.locale)==null?void 0:N.options)==null?void 0:M.weekStartsOn)??0;if(!e)return n?i():et(t,r==null?void 0:r.in);const d={firstWeekContainsDate:o,weekStartsOn:c,locale:s},f=[new eQ(r==null?void 0:r.in,t)],p=e.match(jQ).map(R=>{const I=R[0];if(I in G1){const B=G1[I];return B(R,s.formatLong)}return R}).join("").match(FQ),g=[];for(let R of p){!(r!=null&&r.useAdditionalWeekYearTokens)&&sP(R)&&mw(R,e,n),!(r!=null&&r.useAdditionalDayOfYearTokens)&&aP(R)&&mw(R,e,n);const I=R[0],B=VQ[I];if(B){const{incompatibleTokens:L}=B;if(Array.isArray(L)){const F=g.find(q=>L.includes(q.token)||q.token===I);if(F)throw new RangeError(`The format string mustn't contain \`${F.fullToken}\` and \`${R}\` at the same time`)}else if(B.incompatibleTokens==="*"&&g.length>0)throw new RangeError(`The format string mustn't contain \`${R}\` and any other token at the same time`);g.push({token:I,fullToken:R});const k=B.run(n,R,s.match,d);if(!k)return i();f.push(k.setter),n=k.rest}else{if(I.match($Q))throw new RangeError("Format string contains an unescaped latin alphabet character `"+I+"`");if(R==="''"?R="'":I==="'"&&(R=WQ(R)),n.indexOf(R)===0)n=n.slice(R.length);else return i()}}if(n.length>0&&zQ.test(n))return i();const y=f.map(R=>R.priority).sort((R,I)=>I-R).filter((R,I,B)=>B.indexOf(R)===I).map(R=>f.filter(I=>I.priority===R).sort((I,B)=>B.subPriority-I.subPriority)).map(R=>R[0]);let v=et(t,r==null?void 0:r.in);if(isNaN(+v))return i();const b={};for(const R of y){if(!R.validate(v,d))return i();const I=R.set(v,b,d);Array.isArray(I)?(v=I[0],Object.assign(b,I[1])):v=I}return v}function WQ(n){return n.match(UQ)[1].replace(HQ,"'")}function YQ(n,e,t){const r=et(n,t==null?void 0:t.in);return r.setDate(e),r}function qQ(n,e,t){const r=et(n,t==null?void 0:t.in);return r.setHours(e),r}function XQ(n,e,t){const r=et(n,t==null?void 0:t.in);return r.setMinutes(e),r}function KQ(n,e,t){const r=et(n,t==null?void 0:t.in),i=r.getFullYear(),a=r.getDate(),s=Pn(n,0);s.setFullYear(i,e,15),s.setHours(0,0,0,0);const o=lP(s);return r.setMonth(e,Math.min(a,o)),r}function QQ(n,e,t){const r=et(n,t==null?void 0:t.in);return r.setSeconds(e),r}function ZQ(n,e,t){const r=et(n,t==null?void 0:t.in);return r.setMilliseconds(e),r}function JQ(n,e,t){const r=et(n,t==null?void 0:t.in);return isNaN(+r)?Pn(n,NaN):(r.setFullYear(e),r)}function eZ(n,e){const t=et(n,e==null?void 0:e.in);return t.setDate(1),t.setHours(0,0,0,0),t}function tZ(n,e){const t=et(n,e==null?void 0:e.in),r=t.getMonth();return t.setFullYear(t.getFullYear(),r+1,0),t.setHours(23,59,59,999),t}function nZ(n,e,t){const r=+et(n,t==null?void 0:t.in),[i,a]=[+et(e.start,t==null?void 0:t.in),+et(e.end,t==null?void 0:t.in)].sort((s,o)=>s-o);return r>=i&&r<=a}const rZ={y:{sectionType:"year",contentType:"digit",maxLength:4},yy:"year",yyy:{sectionType:"year",contentType:"digit",maxLength:4},yyyy:"year",M:{sectionType:"month",contentType:"digit",maxLength:2},MM:"month",MMMM:{sectionType:"month",contentType:"letter"},MMM:{sectionType:"month",contentType:"letter"},L:{sectionType:"month",contentType:"digit",maxLength:2},LL:"month",LLL:{sectionType:"month",contentType:"letter"},LLLL:{sectionType:"month",contentType:"letter"},d:{sectionType:"day",contentType:"digit",maxLength:2},dd:"day",do:{sectionType:"day",contentType:"digit-with-letter"},E:{sectionType:"weekDay",contentType:"letter"},EE:{sectionType:"weekDay",contentType:"letter"},EEE:{sectionType:"weekDay",contentType:"letter"},EEEE:{sectionType:"weekDay",contentType:"letter"},EEEEE:{sectionType:"weekDay",contentType:"letter"},i:{sectionType:"weekDay",contentType:"digit",maxLength:1},ii:"weekDay",iii:{sectionType:"weekDay",contentType:"letter"},iiii:{sectionType:"weekDay",contentType:"letter"},e:{sectionType:"weekDay",contentType:"digit",maxLength:1},ee:"weekDay",eee:{sectionType:"weekDay",contentType:"letter"},eeee:{sectionType:"weekDay",contentType:"letter"},eeeee:{sectionType:"weekDay",contentType:"letter"},eeeeee:{sectionType:"weekDay",contentType:"letter"},c:{sectionType:"weekDay",contentType:"digit",maxLength:1},cc:"weekDay",ccc:{sectionType:"weekDay",contentType:"letter"},cccc:{sectionType:"weekDay",contentType:"letter"},ccccc:{sectionType:"weekDay",contentType:"letter"},cccccc:{sectionType:"weekDay",contentType:"letter"},a:"meridiem",aa:"meridiem",aaa:"meridiem",H:{sectionType:"hours",contentType:"digit",maxLength:2},HH:"hours",h:{sectionType:"hours",contentType:"digit",maxLength:2},hh:"hours",m:{sectionType:"minutes",contentType:"digit",maxLength:2},mm:"minutes",s:{sectionType:"seconds",contentType:"digit",maxLength:2},ss:"seconds"},iZ={year:"yyyy",month:"LLLL",monthShort:"MMM",dayOfMonth:"d",dayOfMonthFull:"do",weekday:"EEEE",weekdayShort:"EEEEEE",hours24h:"HH",hours12h:"hh",meridiem:"aa",minutes:"mm",seconds:"ss",fullDate:"PP",keyboardDate:"P",shortDate:"MMM d",normalDate:"d MMMM",normalDateWithWeekday:"EEE, MMM d",fullTime12h:"hh:mm aa",fullTime24h:"HH:mm",keyboardDateTime12h:"P hh:mm aa",keyboardDateTime24h:"P HH:mm"};class aZ{constructor(e){ye(this,"isMUIAdapter",!0);ye(this,"isTimezoneCompatible",!1);ye(this,"formatTokenMap",rZ);ye(this,"escapedCharacters",{start:"'",end:"'"});ye(this,"date",e=>typeof e>"u"?new Date:e===null?null:new Date(e));ye(this,"getInvalidDate",()=>new Date("Invalid Date"));ye(this,"getTimezone",()=>"default");ye(this,"setTimezone",e=>e);ye(this,"toJsDate",e=>e);ye(this,"getCurrentLocaleCode",()=>this.locale.code);ye(this,"is12HourCycleInCurrentLocale",()=>/a/.test(this.locale.formatLong.time({width:"short"})));ye(this,"expandFormat",e=>{const t=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g;return e.match(t).map(r=>{const i=r[0];if(i==="p"||i==="P"){const a=this.longFormatters[i];return a(r,this.locale.formatLong)}return r}).join("")});ye(this,"formatNumber",e=>e);ye(this,"getDayOfWeek",e=>e.getDay()+1);const{locale:t,formats:r,longFormatters:i,lib:a}=e;this.locale=t,this.formats=H({},iZ,r),this.longFormatters=i,this.lib=a||"date-fns"}}class sZ extends aZ{constructor({locale:t,formats:r}={}){super({locale:t??ub,formats:r,longFormatters:G1});ye(this,"parse",(t,r)=>t===""?null:GQ(t,r,new Date,{locale:this.locale}));ye(this,"isValid",t=>t==null?!1:oP(t));ye(this,"format",(t,r)=>this.formatByString(t,this.formats[r]));ye(this,"formatByString",(t,r)=>NK(t,r,{locale:this.locale}));ye(this,"isEqual",(t,r)=>t===null&&r===null?!0:t===null||r===null?!1:$K(t,r));ye(this,"isSameYear",(t,r)=>WK(t,r));ye(this,"isSameMonth",(t,r)=>YK(t,r));ye(this,"isSameDay",(t,r)=>GK(t,r));ye(this,"isSameHour",(t,r)=>qK(t,r));ye(this,"isAfter",(t,r)=>$x(t,r));ye(this,"isAfterYear",(t,r)=>$x(t,uD(r)));ye(this,"isAfterDay",(t,r)=>$x(t,cD(r)));ye(this,"isBefore",(t,r)=>Gx(t,r));ye(this,"isBeforeYear",(t,r)=>Gx(t,this.startOfYear(r)));ye(this,"isBeforeDay",(t,r)=>Gx(t,this.startOfDay(r)));ye(this,"isWithinRange",(t,[r,i])=>nZ(t,{start:r,end:i}));ye(this,"startOfYear",t=>tP(t));ye(this,"startOfMonth",t=>eZ(t));ye(this,"startOfWeek",t=>bo(t,{locale:this.locale}));ye(this,"startOfDay",t=>y0(t));ye(this,"endOfYear",t=>uD(t));ye(this,"endOfMonth",t=>tZ(t));ye(this,"endOfWeek",t=>HX(t,{locale:this.locale}));ye(this,"endOfDay",t=>cD(t));ye(this,"addYears",(t,r)=>jX(t,r));ye(this,"addMonths",(t,r)=>JO(t,r));ye(this,"addWeeks",(t,r)=>FX(t,r));ye(this,"addDays",(t,r)=>ey(t,r));ye(this,"addHours",(t,r)=>VX(t,r));ye(this,"addMinutes",(t,r)=>BX(t,r));ye(this,"addSeconds",(t,r)=>LX(t,r));ye(this,"getYear",t=>zK(t));ye(this,"getMonth",t=>jK(t));ye(this,"getDate",t=>BK(t));ye(this,"getHours",t=>VK(t));ye(this,"getMinutes",t=>FK(t));ye(this,"getSeconds",t=>UK(t));ye(this,"getMilliseconds",t=>HK(t));ye(this,"setYear",(t,r)=>JQ(t,r));ye(this,"setMonth",(t,r)=>KQ(t,r));ye(this,"setDate",(t,r)=>YQ(t,r));ye(this,"setHours",(t,r)=>qQ(t,r));ye(this,"setMinutes",(t,r)=>XQ(t,r));ye(this,"setSeconds",(t,r)=>QQ(t,r));ye(this,"setMilliseconds",(t,r)=>ZQ(t,r));ye(this,"getDaysInMonth",t=>lP(t));ye(this,"getWeekArray",t=>{const r=this.startOfWeek(this.startOfMonth(t)),i=this.endOfWeek(this.endOfMonth(t));let a=0,s=r;const o=[];for(;this.isBefore(s,i);){const c=Math.floor(a/7);o[c]=o[c]||[],o[c].push(s),s=this.addDays(s,1),a+=1}return o});ye(this,"getWeekNumber",t=>fb(t,{locale:this.locale}));ye(this,"getYearRange",([t,r])=>{const i=this.startOfYear(t),a=this.endOfYear(r),s=[];let o=i;for(;this.isBefore(o,a);)s.push(o),o=this.addYears(o,1);return s})}}const oZ={lessThanXSeconds:{one:"1秒未満",other:"{{count}}秒未満",oneWithSuffix:"約1秒",otherWithSuffix:"約{{count}}秒"},xSeconds:{one:"1秒",other:"{{count}}秒"},halfAMinute:"30秒",lessThanXMinutes:{one:"1分未満",other:"{{count}}分未満",oneWithSuffix:"約1分",otherWithSuffix:"約{{count}}分"},xMinutes:{one:"1分",other:"{{count}}分"},aboutXHours:{one:"約1時間",other:"約{{count}}時間"},xHours:{one:"1時間",other:"{{count}}時間"},xDays:{one:"1日",other:"{{count}}日"},aboutXWeeks:{one:"約1週間",other:"約{{count}}週間"},xWeeks:{one:"1週間",other:"{{count}}週間"},aboutXMonths:{one:"約1か月",other:"約{{count}}か月"},xMonths:{one:"1か月",other:"{{count}}か月"},aboutXYears:{one:"約1年",other:"約{{count}}年"},xYears:{one:"1年",other:"{{count}}年"},overXYears:{one:"1年以上",other:"{{count}}年以上"},almostXYears:{one:"1年近く",other:"{{count}}年近く"}},lZ=(n,e,t)=>{t=t||{};let r;const i=oZ[n];return typeof i=="string"?r=i:e===1?t.addSuffix&&i.oneWithSuffix?r=i.oneWithSuffix:r=i.one:t.addSuffix&&i.otherWithSuffix?r=i.otherWithSuffix.replace("{{count}}",String(e)):r=i.other.replace("{{count}}",String(e)),t.addSuffix?t.comparison&&t.comparison>0?r+"後":r+"前":r},cZ={full:"y年M月d日EEEE",long:"y年M月d日",medium:"y/MM/dd",short:"y/MM/dd"},uZ={full:"H時mm分ss秒 zzzz",long:"H:mm:ss z",medium:"H:mm:ss",short:"H:mm"},dZ={full:"{{date}} {{time}}",long:"{{date}} {{time}}",medium:"{{date}} {{time}}",short:"{{date}} {{time}}"},fZ={date:Md({formats:cZ,defaultWidth:"full"}),time:Md({formats:uZ,defaultWidth:"full"}),dateTime:Md({formats:dZ,defaultWidth:"full"})},hZ={lastWeek:"先週のeeeeのp",yesterday:"昨日のp",today:"今日のp",tomorrow:"明日のp",nextWeek:"翌週のeeeeのp",other:"P"},pZ=(n,e,t,r)=>hZ[n],gZ={narrow:["BC","AC"],abbreviated:["紀元前","西暦"],wide:["紀元前","西暦"]},mZ={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["第1四半期","第2四半期","第3四半期","第4四半期"]},yZ={narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],abbreviated:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],wide:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"]},vZ={narrow:["日","月","火","水","木","金","土"],short:["日","月","火","水","木","金","土"],abbreviated:["日","月","火","水","木","金","土"],wide:["日曜日","月曜日","火曜日","水曜日","木曜日","金曜日","土曜日"]},xZ={narrow:{am:"午前",pm:"午後",midnight:"深夜",noon:"正午",morning:"朝",afternoon:"午後",evening:"夜",night:"深夜"},abbreviated:{am:"午前",pm:"午後",midnight:"深夜",noon:"正午",morning:"朝",afternoon:"午後",evening:"夜",night:"深夜"},wide:{am:"午前",pm:"午後",midnight:"深夜",noon:"正午",morning:"朝",afternoon:"午後",evening:"夜",night:"深夜"}},wZ={narrow:{am:"午前",pm:"午後",midnight:"深夜",noon:"正午",morning:"朝",afternoon:"午後",evening:"夜",night:"深夜"},abbreviated:{am:"午前",pm:"午後",midnight:"深夜",noon:"正午",morning:"朝",afternoon:"午後",evening:"夜",night:"深夜"},wide:{am:"午前",pm:"午後",midnight:"深夜",noon:"正午",morning:"朝",afternoon:"午後",evening:"夜",night:"深夜"}},_Z=(n,e)=>{const t=Number(n);switch(String(e==null?void 0:e.unit)){case"year":return`${t}年`;case"quarter":return`第${t}四半期`;case"month":return`${t}月`;case"week":return`第${t}週`;case"date":return`${t}日`;case"hour":return`${t}時`;case"minute":return`${t}分`;case"second":return`${t}秒`;default:return`${t}`}},bZ={ordinalNumber:_Z,era:hs({values:gZ,defaultWidth:"wide"}),quarter:hs({values:mZ,defaultWidth:"wide",argumentCallback:n=>Number(n)-1}),month:hs({values:yZ,defaultWidth:"wide"}),day:hs({values:vZ,defaultWidth:"wide"}),dayPeriod:hs({values:xZ,defaultWidth:"wide",formattingValues:wZ,defaultFormattingWidth:"wide"})},AZ=/^第?\d+(年|四半期|月|週|日|時|分|秒)?/i,EZ=/\d+/i,SZ={narrow:/^(B\.?C\.?|A\.?D\.?)/i,abbreviated:/^(紀元[前後]|西暦)/i,wide:/^(紀元[前後]|西暦)/i},TZ={narrow:[/^B/i,/^A/i],any:[/^(紀元前)/i,/^(西暦|紀元後)/i]},CZ={narrow:/^[1234]/i,abbreviated:/^Q[1234]/i,wide:/^第[1234一二三四１２３４]四半期/i},IZ={any:[/(1|一|１)/i,/(2|二|２)/i,/(3|三|３)/i,/(4|四|４)/i]},DZ={narrow:/^([123456789]|1[012])/,abbreviated:/^([123456789]|1[012])月/i,wide:/^([123456789]|1[012])月/i},RZ={any:[/^1\D/,/^2/,/^3/,/^4/,/^5/,/^6/,/^7/,/^8/,/^9/,/^10/,/^11/,/^12/]},MZ={narrow:/^[日月火水木金土]/,short:/^[日月火水木金土]/,abbreviated:/^[日月火水木金土]/,wide:/^[日月火水木金土]曜日/},OZ={any:[/^日/,/^月/,/^火/,/^水/,/^木/,/^金/,/^土/]},PZ={any:/^(AM|PM|午前|午後|正午|深夜|真夜中|夜|朝)/i},kZ={any:{am:/^(A|午前)/i,pm:/^(P|午後)/i,midnight:/^深夜|真夜中/i,noon:/^正午/i,morning:/^朝/i,afternoon:/^午後/i,evening:/^夜/i,night:/^深夜/i}},NZ={ordinalNumber:eP({matchPattern:AZ,parsePattern:EZ,valueCallback:function(n){return parseInt(n,10)}}),era:ps({matchPatterns:SZ,defaultMatchWidth:"wide",parsePatterns:TZ,defaultParseWidth:"any"}),quarter:ps({matchPatterns:CZ,defaultMatchWidth:"wide",parsePatterns:IZ,defaultParseWidth:"any",valueCallback:n=>n+1}),month:ps({matchPatterns:DZ,defaultMatchWidth:"wide",parsePatterns:RZ,defaultParseWidth:"any"}),day:ps({matchPatterns:MZ,defaultMatchWidth:"wide",parsePatterns:OZ,defaultParseWidth:"any"}),dayPeriod:ps({matchPatterns:PZ,defaultMatchWidth:"any",parsePatterns:kZ,defaultParseWidth:"any"})},LZ={code:"ja",formatDistance:lZ,formatLong:fZ,formatRelative:pZ,localize:bZ,match:NZ,options:{weekStartsOn:0,firstWeekContainsDate:1}},BZ=({open:n,onClose:e,onAdd:t,bookId:r,existingHistory:i=[],currentBookStatus:a=null})=>{const[s,o]=V.useState(new Date),[c,d]=V.useState(vt.READING),[f,p]=V.useState(""),[g,y]=V.useState(!1),[v,b]=V.useState(""),A=()=>Object.values(vt).filter(C=>C!==c);Li.useEffect(()=>{f===c&&p("")},[c,f]),Li.useEffect(()=>{n&&p(a&&a!==c?a:"")},[n,a,c]);const E=async()=>{b(""),y(!0);try{if(!s)throw new Error("日時を選択してください");if(!L1(c))throw new Error("無効なステータスです");if(s>new Date)throw new Error("未来の日時は設定できません");if(i.some(D=>{const O=D.changedAt.toDate?D.changedAt.toDate():new Date(D.changedAt);return Math.abs(O-s)<6e4}))throw new Error("同じ日時の履歴が既に存在します");await t(s,c,f,i),T()}catch(C){b(C.message)}finally{y(!1)}},T=()=>{o(new Date),d(vt.READING),p(""),b(""),y(!1),e()};return x.jsx(j4,{dateAdapter:sZ,adapterLocale:LZ,children:x.jsxs(ja,{open:n,onClose:T,maxWidth:"sm",fullWidth:!0,children:[x.jsx(Ss,{children:"📝 ステータス履歴を追加"}),x.jsx(Ua,{children:x.jsxs(de,{sx:{display:"flex",flexDirection:"column",gap:2,mt:1},children:[x.jsx(PX,{label:"日時",value:s,onChange:C=>o(C),maxDateTime:new Date,slotProps:{textField:{fullWidth:!0}}}),x.jsxs(ga,{fullWidth:!0,children:[x.jsx(no,{children:"ステータス"}),x.jsx(yl,{value:c,onChange:C=>d(C.target.value),label:"ステータス",children:Object.entries(N1).map(([C,D])=>x.jsx(Hn,{value:C,children:D},C))})]}),x.jsxs(ga,{fullWidth:!0,children:[x.jsx(no,{children:"前のステータス"}),x.jsxs(yl,{value:f,onChange:C=>p(C.target.value),label:"前のステータス",children:[x.jsx(Hn,{value:"",children:x.jsx("em",{children:"なし"})}),A().map(C=>x.jsx(Hn,{value:C,children:N1[C]},C))]})]}),v&&x.jsx(se,{color:"error",variant:"body2",children:v})]})}),x.jsxs(Ha,{children:[x.jsx(st,{onClick:T,disabled:g,children:"キャンセル"}),x.jsx(st,{onClick:E,variant:"contained",disabled:g,children:g?"保存中...":"保存"})]})]})})},VZ=({history:n=[],loading:e=!1,error:t=null,importantDates:r={},readingDuration:i=null,showAddButton:a=!1,bookId:s=null,onAddHistory:o=null,currentBookStatus:c=null})=>{const[d,f]=V.useState(!1),p=async(b,A,E,T)=>{o&&await o(b,A,E,T)},g=b=>{switch(b){case vt.TSUNDOKU:return x.jsx(yT,{});case vt.READING:return x.jsx(vN,{});case vt.RE_READING:return x.jsx(yN,{});case vt.FINISHED:return x.jsx(mN,{});default:return x.jsx(yT,{})}},y=b=>b?(b.toDate?b.toDate():new Date(b)).toLocaleDateString("ja-JP",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"",v=()=>!r||Object.keys(r).length===0?null:x.jsxs(de,{sx:{mb:3},children:[x.jsx(se,{variant:"h6",gutterBottom:!0,children:"重要日付"}),x.jsxs(pa,{sx:{p:2,mb:2},children:[r.readingStartedAt&&x.jsxs(de,{sx:{mb:1},children:[x.jsx(se,{variant:"body2",color:"text.secondary",children:"読書開始日"}),x.jsx(se,{variant:"body1",children:y(r.readingStartedAt)})]}),r.reReadingStartedAt&&x.jsxs(de,{sx:{mb:1},children:[x.jsx(se,{variant:"body2",color:"text.secondary",children:"再読開始日"}),x.jsx(se,{variant:"body1",children:y(r.reReadingStartedAt)})]}),r.finishedAt&&x.jsxs(de,{sx:{mb:1},children:[x.jsx(se,{variant:"body2",color:"text.secondary",children:"読了日"}),x.jsx(se,{variant:"body1",children:y(r.finishedAt)})]}),i&&x.jsxs(de,{children:[x.jsx(se,{variant:"body2",color:"text.secondary",children:"読書期間"}),x.jsxs(se,{variant:"body1",children:[i,"日間"]})]})]})]});return e?x.jsx(de,{sx:{p:2},children:x.jsx(se,{children:"履歴を読み込み中..."})}):t?x.jsx(de,{sx:{p:2},children:x.jsxs(se,{color:"error",children:["エラー: ",t]})}):x.jsxs(de,{sx:{p:2},children:[v(),x.jsxs(de,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[x.jsx(se,{variant:"h6",children:"ステータス変更履歴"}),a&&x.jsx(st,{variant:"outlined",size:"small",startIcon:x.jsx(G3,{}),onClick:()=>f(!0),"data-testid":"add-history-button",children:"履歴追加"})]}),(!n||n.length===0)&&x.jsxs(de,{sx:{textAlign:"center",py:4},children:[x.jsx(se,{variant:"body1",color:"text.secondary",gutterBottom:!0,children:"履歴がありません"}),x.jsx(se,{variant:"body2",color:"text.secondary",children:"過去のステータス変更履歴を追加できます"})]}),x.jsx(z3,{children:(n||[]).map((b,A)=>x.jsxs(H3,{sx:{flexDirection:"column",alignItems:"flex-start"},children:[x.jsxs(de,{sx:{display:"flex",alignItems:"center",gap:1,mb:1,width:"100%"},children:[x.jsx(pN,{sx:{minWidth:"auto"},children:x.jsx(gN,{sx:{bgcolor:ds(b.status)==="primary"?"primary.main":ds(b.status)==="secondary"?"secondary.main":ds(b.status)==="success"?"success.main":"default",width:32,height:32},children:g(b.status)})}),x.jsxs(de,{sx:{flexGrow:1},children:[x.jsxs(de,{sx:{display:"flex",alignItems:"center",gap:1,mb:1},children:[x.jsx(In,{label:wo(b.status),color:ds(b.status),size:"small"}),b.previousStatus&&x.jsxs(x.Fragment,{children:[x.jsx(se,{variant:"body2",color:"text.secondary",children:"←"}),x.jsx(In,{label:wo(b.previousStatus),color:ds(b.previousStatus),size:"small",variant:"outlined"})]})]}),x.jsx(se,{variant:"body2",color:"text.secondary",children:y(b.changedAt)}),b.notes&&x.jsx(se,{variant:"body2",color:"text.secondary",sx:{mt:1},children:b.notes})]})]}),A<n.length-1&&x.jsx(Lc,{sx:{width:"100%",mt:1}})]},b.id))}),a&&x.jsx(BZ,{open:d,onClose:()=>f(!1),onAdd:p,bookId:s,existingHistory:n,currentBookStatus:c})]})},FZ=({bookId:n})=>{const{latestHistory:e,loading:t,error:r}=Y_(n);if(t)return x.jsxs(pa,{sx:{p:2,mb:2},children:[x.jsx(se,{variant:"h6",gutterBottom:!0,children:"📊 最新ステータス履歴"}),x.jsx(xN,{variant:"rectangular",height:40})]});if(r)return x.jsxs(pa,{sx:{p:2,mb:2},children:[x.jsx(se,{variant:"h6",gutterBottom:!0,children:"📊 最新ステータス履歴"}),x.jsx(se,{color:"error",children:"履歴の取得に失敗しました"})]});if(!e)return x.jsxs(pa,{sx:{p:2,mb:2},children:[x.jsx(se,{variant:"h6",gutterBottom:!0,children:"📊 最新ステータス履歴"}),x.jsx(se,{color:"text.secondary",children:"履歴がありません"})]});const i=a=>a?(a.toDate?a.toDate():new Date(a)).toLocaleDateString("ja-JP",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}):"";return x.jsxs(pa,{sx:{p:2,mb:2},children:[x.jsx(se,{variant:"h6",gutterBottom:!0,children:"📊 最新ステータス履歴"}),x.jsxs(de,{sx:{display:"flex",alignItems:"center",gap:1,flexWrap:"wrap"},children:[x.jsx(se,{variant:"body2",color:"text.secondary",children:i(e.changedAt)}),x.jsx(In,{label:wo(e.status),color:ds(e.status),size:"small"}),e.previousStatus&&x.jsxs(x.Fragment,{children:[x.jsx(se,{variant:"body2",color:"text.secondary",children:"←"}),x.jsx(In,{label:wo(e.previousStatus),color:ds(e.previousStatus),size:"small",variant:"outlined"})]})]})]})},jZ=n=>{const{user:e}=gr(),t=V.useContext(pi),r=(t==null?void 0:t.setGlobalError)||(()=>{}),[i,a]=V.useState(null),[s,o]=V.useState(!0),[c,d]=V.useState(null),f=V.useCallback(async()=>{if(!e||!n){o(!1);return}try{o(!0),d(null);const v=xo(Pt,"books",n),b=await KF(v);b.exists()&&b.data().userId===e.uid?a({id:b.id,...b.data()}):(console.error("No such document or access denied!"),r("書籍が見つからないか、アクセス権限がありません。"),a(null),d("書籍が見つからないか、アクセス権限がありません。"))}catch(v){console.error("Error fetching document:",v),r("書籍情報の取得に失敗しました。"),d("書籍情報の取得に失敗しました。")}finally{o(!1)}},[n,e]),p=V.useCallback(async v=>{if(!e||!n)throw new Error("ユーザーまたは書籍IDが無効です。");try{const b=xo(Pt,"books",n);return await Hm(b,{...v,updatedAt:Yi()}),a(A=>({...A,...v})),!0}catch(b){throw console.error("Error updating book:",b),r("書籍情報の更新に失敗しました。"),b}},[n,e]),g=V.useCallback(async v=>await p({status:v}),[p]),y=V.useCallback(async v=>await p({tags:v}),[p]);return V.useEffect(()=>{f()},[f]),{book:i,loading:s,error:c,fetchBook:f,updateBook:p,updateBookStatus:g,updateBookTags:y}},Fg=n=>n&&typeof n.toDate=="function"?n.toDate():n instanceof Date?n:new Date(n),UZ=(n,e,t)=>({handleAddManualHistory:V.useCallback(async(i,a,s,o=[])=>{try{await e(i,a,s),mt.status.info("Manual history added successfully");const c=[...o],d={status:a,previousStatus:s,changedAt:i};c.push(d),c.sort((p,g)=>Fg(g.changedAt)-Fg(p.changedAt));const f=c.length>0&&Fg(c[0].changedAt).getTime()===Fg(i).getTime();if(!n)return;f&&a!==n.status&&await t(a)}catch(c){throw mt.status.error("Failed to add manual history",c),c}},[n,e,t])}),HZ=()=>{const{id:n}=BN();xm();const{book:e,loading:t,error:r,updateBookStatus:i,updateBookTags:a}=jZ(n),{history:s,loading:o,error:c,addManualStatusHistory:d,getImportantDates:f,getReadingDuration:p}=Y_(n),{handleAddManualHistory:g}=UZ(e,d,i),[y,v]=V.useState(0),[b,A]=V.useState(!1),[E,T]=V.useState(0),C=L=>{i(L)},D=L=>{a(L)},O=()=>{v(L=>L+1),A(!1)},N=()=>{v(L=>L+1)},M=()=>{A(!0)},R=()=>{A(!1)},I=(L,k)=>{T(k)},B=()=>{switch(E){case 0:return x.jsxs(x.Fragment,{children:[x.jsx(se,{variant:"h5",gutterBottom:!0,sx:{mb:{xs:1,sm:2}},"data-testid":"memo-list-title",children:"メモ一覧"}),x.jsx(o$,{bookId:e.id,onMemoUpdated:N},y)]});case 1:return x.jsx(VZ,{history:s,loading:o,error:c,importantDates:f(),readingDuration:p(),showAddButton:!0,bookId:n,onAddHistory:g,currentBookStatus:e==null?void 0:e.status});default:return null}};return t?x.jsx("div",{"data-testid":"book-detail-loading",children:"Loading..."}):r?(console.error("📖 BookDetail error:",r),x.jsxs("div",{"data-testid":"book-detail-error",children:["エラーが発生しました: ",r]})):e?x.jsxs(de,{sx:{maxWidth:800,mx:"auto",mt:{xs:2,sm:4},pb:"80px",px:{xs:2,sm:0}},"data-testid":"book-detail",children:[x.jsxs(pa,{sx:{p:{xs:2,sm:3}},children:[x.jsx(h$,{book:e,bookId:n,onStatusChange:C}),x.jsx(FZ,{bookId:n}),x.jsx(p$,{book:e,bookId:n,onTagsChange:D}),x.jsx(Lc,{sx:{my:{xs:1,sm:2}}}),x.jsx(de,{sx:{borderBottom:1,borderColor:"divider",mb:2},children:x.jsxs(mm,{value:E,onChange:I,"aria-label":"book detail tabs","data-testid":"book-detail-tabs",children:[x.jsx(ka,{label:"メモ一覧","data-testid":"memo-list-tab"}),x.jsx(ka,{label:"ステータス履歴","data-testid":"status-history-tab"})]})}),B()]}),x.jsx(wN,{color:"primary","aria-label":"メモを追加",sx:{position:"fixed",bottom:{xs:72,sm:16},right:{xs:16,sm:16}},onClick:M,"data-testid":"memo-add-fab",children:x.jsx(G3,{})}),x.jsx(ja,{open:b,onClose:R,maxWidth:"sm",fullWidth:!0,"data-testid":"memo-add-dialog",children:x.jsx(d$,{bookId:e.id,bookTags:e.tags||[],onMemoAdded:O,onClose:R})})]}):(console.warn("📖 BookDetail: Book not found for ID:",n),x.jsx("div",{"data-testid":"book-detail-not-found",children:"本が見つかりません。"}))};function mD({children:n,value:e,index:t,...r}){return x.jsx("div",{role:"tabpanel",hidden:e!==t,id:`tabpanel-${t}`,"aria-labelledby":`tab-${t}`,...r,children:e===t&&x.jsx(de,{sx:{p:3},children:n})})}const zZ=n=>{const[e,t]=V.useState({}),[r,i]=V.useState(!1),[a,s]=V.useState(null),o=V.useCallback(async()=>{if(n!=null&&n.uid)try{i(!0),s(null),console.log("useTagStats: タグ統計取得開始, userId:",n.uid);const[p,g]=await Promise.all([ur(zn(Fr(Pt,"books"),Tn("userId","==",n.uid))),ur(zn(xl(Pt,"memos"),Tn("userId","==",n.uid)))]);console.log("useTagStats: データ取得完了, 本:",p.size,"メモ:",g.size);const y={};p.forEach(v=>{const b=v.data();console.log("useTagStats: 本データ:",{id:v.id,title:b.title,tags:b.tags}),b.tags&&Array.isArray(b.tags)&&b.tags.forEach(A=>{var T,C;y[A]||(y[A]={bookCount:0,memoCount:0,lastUsed:null}),y[A].bookCount++;const E=((C=(T=b.updatedAt)==null?void 0:T.toDate)==null?void 0:C.call(T))||new Date;(!y[A].lastUsed||E>y[A].lastUsed)&&(y[A].lastUsed=E)})}),console.log("useTagStats: 本のタグ集計完了"),g.forEach(v=>{var A,E;const b=v.data();console.log("useTagStats: メモデータ:",{id:v.id,bookId:(A=v.ref.parent.parent)==null?void 0:A.id,tags:b.tags,text:((E=b.text)==null?void 0:E.substring(0,30))+"..."}),b.tags&&Array.isArray(b.tags)&&b.tags.forEach(T=>{var D,O;y[T]||(y[T]={bookCount:0,memoCount:0,lastUsed:null}),y[T].memoCount++;const C=((O=(D=b.updatedAt)==null?void 0:D.toDate)==null?void 0:O.call(D))||new Date;(!y[T].lastUsed||C>y[T].lastUsed)&&(y[T].lastUsed=C)})}),console.log("useTagStats: メモのタグ集計完了, 最終統計:",y),t(y),console.log("useTagStats: タグ統計設定完了")}catch(p){console.error("タグ統計の取得に失敗しました:",p),s(p)}finally{i(!1)}},[n==null?void 0:n.uid]),c=V.useCallback((p="count",g="desc")=>Object.entries(e).map(([v,b])=>({tag:v,...b,totalCount:b.bookCount+b.memoCount,type:b.bookCount>0&&b.memoCount>0?"both":b.bookCount>0?"book":"memo"})).sort((v,b)=>{let A=0;switch(p){case"count":A=b.totalCount-v.totalCount;break;case"name":A=v.tag.localeCompare(b.tag,"ja");break;case"lastUsed":A=(b.lastUsed||0)-(v.lastUsed||0);break;default:A=b.totalCount-v.totalCount}return g==="asc"?-A:A}),[e]),d=V.useCallback(p=>e[p]||null,[e]),f=V.useCallback(()=>{t({}),s(null)},[]);return V.useEffect(()=>{n!=null&&n.uid?o():f()},[n==null?void 0:n.uid,o,f]),{tagStats:e,loading:r,error:a,fetchTagStats:o,getSortedTagStats:c,getTagStat:d,clearStats:f}};function cl(n){var e,t;if(n==null)return"";try{return(((t=(e=String(n)).normalize)==null?void 0:t.call(e,"NFKC"))??String(n)).trim().replace(/\s+/g," ").toLowerCase()}catch{return String(n).trim().toLowerCase()}}function $Z(){const{user:n}=gr(),e=V.useContext(pi),t=(e==null?void 0:e.setGlobalError)||(()=>{}),[r,i]=V.useState(!1),a=async(f,p)=>{for(let y=0;y<f.length;y+=450){const v=f.slice(y,y+450),b=ej(Pt);v.forEach(A=>p(b,A)),await b.commit()}},s=V.useCallback(async(f,p)=>{if(!(n!=null&&n.uid))throw new Error("ユーザーが未認証です。");const g=cl(f),y=cl(p);if(!g||!y)throw new Error("タグ名が不正です。");if(g===y)return{booksUpdated:0,memosUpdated:0};i(!0);try{const v=zn(Fr(Pt,"books"),Tn("userId","==",n.uid)),b=await ur(v),A=[];b.forEach(D=>{const O=D.data(),N=Array.isArray(O.tags)?O.tags:[];if(N.includes(g)){const M=Array.from(new Set(N.map(R=>R===g?y:R)));A.push({ref:D.ref,tags:M})}});const E=zn(xl(Pt,"memos"),Tn("userId","==",n.uid)),T=await ur(E),C=[];return T.forEach(D=>{const O=D.data(),N=Array.isArray(O.tags)?O.tags:[];if(N.includes(g)){const M=Array.from(new Set(N.map(R=>R===g?y:R)));C.push({ref:D.ref,tags:M})}}),await a(A,(D,O)=>{D.update(O.ref,{tags:O.tags})}),await a(C,(D,O)=>{D.update(O.ref,{tags:O.tags})}),{booksUpdated:A.length,memosUpdated:C.length}}catch(v){throw console.error("タグ名変更に失敗:",v),t("タグ名の変更に失敗しました。"),v}finally{i(!1)}},[n==null?void 0:n.uid]),o=V.useCallback(async f=>{if(!(n!=null&&n.uid))throw new Error("ユーザーが未認証です。");const p=cl(f);if(!p)throw new Error("タグ名が不正です。");i(!0);try{const g=zn(Fr(Pt,"books"),Tn("userId","==",n.uid)),y=await ur(g),v=[];y.forEach(T=>{const C=T.data(),D=Array.isArray(C.tags)?C.tags:[];if(D.includes(p)){const O=D.filter(N=>N!==p);v.push({ref:T.ref,tags:O})}});const b=zn(xl(Pt,"memos"),Tn("userId","==",n.uid)),A=await ur(b),E=[];return A.forEach(T=>{const C=T.data(),D=Array.isArray(C.tags)?C.tags:[];if(D.includes(p)){const O=D.filter(N=>N!==p);E.push({ref:T.ref,tags:O})}}),await a(v,(T,C)=>{T.update(C.ref,{tags:C.tags})}),await a(E,(T,C)=>{T.update(C.ref,{tags:C.tags})}),{booksUpdated:v.length,memosUpdated:E.length}}catch(g){throw console.error("タグ削除に失敗:",g),t("タグの削除に失敗しました。"),g}finally{i(!1)}},[n==null?void 0:n.uid]),c=V.useCallback(async f=>{if(!(n!=null&&n.uid))throw new Error("ユーザーが未認証です。");const p=new Set((Array.isArray(f)?f:String(f||"").split(",")).map(g=>cl(g)).filter(g=>!!g));if(p.size===0)throw new Error("削除対象のタグがありません。");i(!0);try{const g=zn(Fr(Pt,"books"),Tn("userId","==",n.uid)),y=await ur(g),v=[];y.forEach(T=>{const C=T.data(),D=Array.isArray(C.tags)?C.tags:[],O=D.filter(N=>!p.has(cl(N)));O.length!==D.length&&v.push({ref:T.ref,tags:O})});const b=zn(xl(Pt,"memos"),Tn("userId","==",n.uid)),A=await ur(b),E=[];return A.forEach(T=>{const C=T.data(),D=Array.isArray(C.tags)?C.tags:[],O=D.filter(N=>!p.has(cl(N)));O.length!==D.length&&E.push({ref:T.ref,tags:O})}),await a(v,(T,C)=>{T.update(C.ref,{tags:C.tags})}),await a(E,(T,C)=>{T.update(C.ref,{tags:C.tags})}),{booksUpdated:v.length,memosUpdated:E.length}}catch(g){throw console.error("タグ一括削除に失敗:",g),t("タグの一括削除に失敗しました。"),g}finally{i(!1)}},[n==null?void 0:n.uid]),d=V.useCallback(async(f,p)=>{if(!(n!=null&&n.uid))throw new Error("ユーザーが未認証です。");const g=cl(p),y=Array.from(new Set(String(f||"").split(",").map(v=>cl(v)).filter(v=>!!v)));if(!g||y.length===0)throw new Error("統合先と別名を入力してください。");if(y.includes(g))throw new Error("統合先と別名が同一です。");i(!0);try{const v=zn(Fr(Pt,"books"),Tn("userId","==",n.uid)),b=await ur(v),A=[];b.forEach(D=>{const O=D.data(),N=Array.isArray(O.tags)?O.tags:[];if(N.some(R=>y.includes(R))){const R=N.filter(B=>!y.includes(B)),I=Array.from(new Set([...R,g]));I.join("|")!==N.join("|")&&A.push({ref:D.ref,tags:I})}});const E=zn(xl(Pt,"memos"),Tn("userId","==",n.uid)),T=await ur(E),C=[];return T.forEach(D=>{const O=D.data(),N=Array.isArray(O.tags)?O.tags:[];if(N.some(R=>y.includes(R))){const R=N.filter(B=>!y.includes(B)),I=Array.from(new Set([...R,g]));I.join("|")!==N.join("|")&&C.push({ref:D.ref,tags:I})}}),await a(A,(D,O)=>{D.update(O.ref,{tags:O.tags})}),await a(C,(D,O)=>{D.update(O.ref,{tags:O.tags})}),{booksUpdated:A.length,memosUpdated:C.length}}catch(v){throw console.error("タグ統合に失敗:",v),t("タグの統合に失敗しました。"),v}finally{i(!1)}},[n==null?void 0:n.uid]);return{loading:r,renameTag:s,deleteTag:o,deleteTags:c,mergeTags:d}}function GZ({open:n,tag:e,onClose:t,onRename:r,onDelete:i,onMerge:a,busy:s=!1}){const[o,c]=V.useState(e||""),[d,f]=V.useState(""),[p,g]=V.useState(""),y=()=>{c(e||""),t==null||t()};return x.jsxs(ja,{open:n,onClose:y,maxWidth:"xs",fullWidth:!0,children:[x.jsx(Ss,{children:"タグを編集"}),x.jsxs(Ua,{children:[x.jsx(se,{variant:"body2",color:"text.secondary",sx:{mb:1},children:"タグ名の変更またはタグの削除を行えます。"}),x.jsx(kt,{autoFocus:!0,fullWidth:!0,label:"新しいタグ名",value:o,onChange:v=>c(v.target.value),disabled:s}),x.jsxs(de,{sx:{mt:2},children:[x.jsx(se,{variant:"body2",color:"text.secondary",sx:{mb:1},children:"類似タグの統合（カンマ区切りで別名を指定）"}),x.jsx(kt,{fullWidth:!0,label:"統合先（正規化タグ名）",value:d,onChange:v=>f(v.target.value),disabled:s}),x.jsx(kt,{fullWidth:!0,label:"別名（カンマ区切り）",value:p,onChange:v=>g(v.target.value),disabled:s,sx:{mt:1}})]})]}),x.jsxs(Ha,{children:[x.jsx(st,{onClick:()=>i==null?void 0:i(e),color:"error",disabled:s,"data-testid":"tag-delete-button",children:"削除"}),x.jsx(st,{onClick:y,disabled:s,children:"キャンセル"}),x.jsx(st,{onClick:()=>r==null?void 0:r(e,o),variant:"contained",disabled:s,"data-testid":"tag-rename-button",children:"変更"}),x.jsx(st,{onClick:()=>a==null?void 0:a(p,d),variant:"outlined",disabled:s,"data-testid":"tag-merge-button",children:"統合"})]})]})}function WZ({open:n,onClose:e,onConfirm:t,busy:r=!1}){const{user:i}=gr(),{tagOptions:a,fetchTagHistory:s}=_o("book",i),{tagOptions:o,fetchTagHistory:c}=_o("memo",i),[d,f]=V.useState([]),[p,g]=V.useState("");V.useEffect(()=>{n&&i&&(s(),c())},[n,i,s,c]),V.useEffect(()=>{n||(f([]),g(""))},[n]);const y=V.useMemo(()=>{const v=new Set([...a||[],...o||[]]);return Array.from(v).sort((b,A)=>b.localeCompare(A,"ja"))},[a,o]);return x.jsxs(ja,{open:n,onClose:e,maxWidth:"sm",fullWidth:!0,children:[x.jsx(Ss,{children:"タグを一括削除"}),x.jsxs(Ua,{children:[x.jsx(se,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"削除するタグを選択または入力してください。複数選択できます。"}),x.jsx(po,{multiple:!0,freeSolo:!0,options:y,value:d,inputValue:p,onInputChange:(v,b)=>g(b),onChange:(v,b)=>f(b),renderTags:(v,b)=>v.map((A,E)=>{const{key:T,...C}=b({index:E});return x.jsx(In,{label:A,...C,color:"error",variant:"outlined"},T)}),renderInput:v=>x.jsx(kt,{...v,label:"削除タグ",placeholder:"タグ名を入力...",fullWidth:!0,"data-testid":"bulk-delete-tags-input"}),"data-testid":"bulk-delete-tags-autocomplete"}),!!d.length&&x.jsx(de,{sx:{mt:1},children:x.jsxs(se,{variant:"caption",color:"text.secondary",children:["削除対象: ",d.join(", ")]})})]}),x.jsxs(Ha,{children:[x.jsx(st,{onClick:e,disabled:r,children:"キャンセル"}),x.jsx(st,{onClick:()=>t==null?void 0:t(d),color:"error",variant:"contained",disabled:r||d.length===0,"data-testid":"bulk-delete-confirm",children:"削除"})]})]})}function YZ({open:n,onClose:e,onConfirm:t,busy:r=!1}){const{user:i}=gr(),{tagOptions:a,fetchTagHistory:s}=_o("book",i),{tagOptions:o,fetchTagHistory:c}=_o("memo",i),[d,f]=V.useState(""),[p,g]=V.useState([]),[y,v]=V.useState("");V.useEffect(()=>{n&&i&&(s(),c())},[n,i,s,c]),V.useEffect(()=>{n||(f(""),g([]),v(""))},[n]);const b=V.useMemo(()=>{const E=new Set([...a||[],...o||[]]);return Array.from(E).sort((T,C)=>T.localeCompare(C,"ja"))},[a,o]),A=d.trim().length>0&&p.length>0;return x.jsxs(ja,{open:n,onClose:e,maxWidth:"sm",fullWidth:!0,children:[x.jsx(Ss,{children:"タグを一括統合"}),x.jsxs(Ua,{children:[x.jsx(se,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"複数の別名タグを正規タグへ統合します。正規タグと、統合したい別名タグを選択してください。"}),x.jsxs(de,{sx:{mb:2},children:[x.jsx(se,{variant:"subtitle2",sx:{mb:1},children:"正規タグ"}),x.jsx(po,{freeSolo:!0,options:b,value:d,inputValue:y,onInputChange:(E,T)=>v(T),onChange:(E,T)=>f(T||y),renderInput:E=>x.jsx(kt,{...E,label:"正規タグ",placeholder:"統合先のタグ名",fullWidth:!0}),"data-testid":"bulk-merge-canonical"})]}),x.jsxs(de,{children:[x.jsx(se,{variant:"subtitle2",sx:{mb:1},children:"別名タグ（複数可）"}),x.jsx(po,{multiple:!0,freeSolo:!0,options:b,value:p,onChange:(E,T)=>g(T),renderTags:(E,T)=>E.map((C,D)=>{const{key:O,...N}=T({index:D});return x.jsx(In,{label:C,...N,color:"primary",variant:"outlined"},O)}),renderInput:E=>x.jsx(kt,{...E,label:"別名タグ",placeholder:"統合したい別名を入力...",fullWidth:!0}),"data-testid":"bulk-merge-aliases"})]})]}),x.jsxs(Ha,{children:[x.jsx(st,{onClick:e,disabled:r,children:"キャンセル"}),x.jsx(st,{onClick:()=>t==null?void 0:t(p,d||y),variant:"contained",disabled:r||!A,"data-testid":"bulk-merge-confirm",children:"統合"})]})]})}function qZ({onTagClick:n}){const{user:e}=gr(),{tagStats:t,loading:r,error:i,getSortedTagStats:a,fetchTagStats:s}=zZ(e),{loading:o,renameTag:c,deleteTag:d,deleteTags:f,mergeTags:p}=$Z(),[g,y]=V.useState("count"),[v,b]=V.useState("desc"),[A,E]=V.useState(!1),[T,C]=V.useState(""),[D,O]=V.useState(!1),[N,M]=V.useState(!1),R=a(g,v),I=Object.keys(t).length,B=Object.values(t).reduce((k,F)=>k+F.bookCount,0),L=Object.values(t).reduce((k,F)=>k+F.memoCount,0);return r?x.jsx(de,{sx:{display:"flex",justifyContent:"center",p:3},children:x.jsx(Nw,{})}):i?x.jsx(de,{sx:{p:2},children:x.jsxs(lo,{severity:"error",children:["タグ統計の取得に失敗しました: ",i.message]})}):I===0?x.jsx(de,{sx:{p:3},children:x.jsx(lo,{severity:"info",children:"タグがまだ登録されていません。本にタグを追加すると、ここに統計が表示されます。"})}):x.jsxs(de,{children:[x.jsxs(pa,{sx:{p:2,mb:3},children:[x.jsx(se,{variant:"h6",gutterBottom:!0,children:"タグ統計サマリー"}),x.jsxs(de,{sx:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:2},children:[x.jsxs(de,{sx:{textAlign:"center"},children:[x.jsx(se,{variant:"h4",color:"primary",children:I}),x.jsx(se,{variant:"body2",color:"text.secondary",children:"総タグ数"})]}),x.jsxs(de,{sx:{textAlign:"center"},children:[x.jsx(se,{variant:"h4",color:"secondary",children:B}),x.jsx(se,{variant:"body2",color:"text.secondary",children:"本の総件数"})]}),x.jsxs(de,{sx:{textAlign:"center"},children:[x.jsx(se,{variant:"h4",color:"info.main",children:L}),x.jsx(se,{variant:"body2",color:"text.secondary",children:"メモの総件数"})]})]})]}),x.jsxs(de,{sx:{mb:2,display:"flex",gap:2,alignItems:"center",flexWrap:"wrap"},children:[x.jsxs(se,{variant:"h6",children:["タグ一覧 (",I,"件)"]}),x.jsx(In,{label:"一括削除",size:"small",color:"error",variant:"outlined",onClick:()=>O(!0),"data-testid":"open-bulk-delete"}),x.jsx(In,{label:"一括統合",size:"small",color:"primary",variant:"outlined",onClick:()=>M(!0),"data-testid":"open-bulk-merge"}),x.jsxs(ga,{size:"small",sx:{minWidth:120},children:[x.jsx(no,{children:"ソート基準"}),x.jsxs(yl,{value:g,label:"ソート基準",onChange:k=>y(k.target.value),children:[x.jsx(Hn,{value:"count",children:"使用頻度"}),x.jsx(Hn,{value:"name",children:"名前順"}),x.jsx(Hn,{value:"lastUsed",children:"最終使用日"})]})]}),x.jsxs(ga,{size:"small",sx:{minWidth:100},children:[x.jsx(no,{children:"順序"}),x.jsxs(yl,{value:v,label:"順序",onChange:k=>b(k.target.value),children:[x.jsx(Hn,{value:"desc",children:"降順"}),x.jsx(Hn,{value:"asc",children:"昇順"})]})]})]}),x.jsx(de,{className:"tag-stats-grid",children:R.map(k=>x.jsx(jn,{"data-testid":`tag-stat-card-${k.tag}`,onClick:()=>n==null?void 0:n(k.tag),className:"tag-stat-card",children:x.jsxs(Un,{children:[x.jsxs(de,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",mb:1},children:[x.jsx(se,{variant:"h6",component:"div",sx:{wordBreak:"break-all"},children:k.tag}),x.jsx(In,{label:k.type,size:"small",color:k.type==="both"?"primary":k.type==="book"?"secondary":"info",variant:"outlined"})]}),x.jsxs(de,{sx:{display:"flex",justifyContent:"space-between",mb:1},children:[x.jsxs(se,{variant:"body2",color:"text.secondary",children:["本: ",k.bookCount,"件"]}),x.jsxs(se,{variant:"body2",color:"text.secondary",children:["メモ: ",k.memoCount,"件"]})]}),x.jsxs(de,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[x.jsxs(se,{variant:"body2",color:"primary",sx:{fontWeight:"bold"},children:["合計: ",k.totalCount,"件"]}),x.jsx(de,{sx:{display:"flex",gap:1},children:x.jsx(In,{size:"small",label:"編集",onClick:F=>{F.stopPropagation(),C(k.tag),E(!0)},clickable:!0,color:"primary",variant:"outlined","data-testid":`tag-edit-${k.tag}`})})]}),k.lastUsed&&x.jsxs(se,{variant:"caption",color:"text.secondary",sx:{display:"block",mt:1},children:["最終使用: ",k.lastUsed.toLocaleDateString("ja-JP")]})]})},k.tag))}),x.jsx(GZ,{open:A,tag:T,busy:o,onClose:()=>E(!1),onRename:async(k,F)=>{await c(k,F),await s(),E(!1)},onDelete:async k=>{await d(k),await s(),E(!1)},onMerge:async(k,F)=>{await p(k,F),await s(),E(!1)}}),x.jsx(WZ,{open:D,onClose:()=>O(!1),busy:o,onConfirm:async k=>{!k||k.length===0||(await f(k),await s(),O(!1))}}),x.jsx(YZ,{open:N,onClose:()=>M(!1),busy:o,onConfirm:async(k,F)=>{!k||k.length===0||!F||(await p(k.join(","),F),await s(),M(!1))}})]})}function XZ({value:n,onChange:e}){const[t,r]=V.useState((n==null?void 0:n.type)||"none"),[i,a]=V.useState((n==null?void 0:n.year)||new Date().getFullYear()),[s,o]=V.useState((n==null?void 0:n.month)||1),[c,d]=V.useState((n==null?void 0:n.quarter)||1),[f,p]=V.useState((n==null?void 0:n.startDate)||""),[g,y]=V.useState((n==null?void 0:n.endDate)||""),v=D=>{const O=D.target.value;r(O);let N={type:O};switch(O){case"year":N.year=i;break;case"month":N.year=i,N.month=s;break;case"quarter":N.year=i,N.quarter=c;break;case"custom":N.startDate=f,N.endDate=g;break}e==null||e(N)},b=D=>{const O=D.target.value;a(O),e==null||e({...n,year:O})},A=D=>{const O=D.target.value;o(O),e==null||e({...n,month:O})},E=D=>{const O=D.target.value;d(O),e==null||e({...n,quarter:O})},T=D=>{const O=D.target.value;p(O),e==null||e({...n,startDate:O})},C=D=>{const O=D.target.value;y(O),e==null||e({...n,endDate:O})};return x.jsxs(de,{children:[x.jsx(se,{variant:"subtitle2",gutterBottom:!0,children:"読了日時"}),x.jsxs(pa,{sx:{p:2},children:[x.jsxs(ga,{fullWidth:!0,margin:"normal",children:[x.jsx(no,{children:"日時範囲"}),x.jsxs(yl,{value:t,onChange:v,label:"日時範囲","data-testid":"date-range-type-select",children:[x.jsx(Hn,{value:"none",children:"指定なし"}),x.jsx(Hn,{value:"year",children:"年別"}),x.jsx(Hn,{value:"month",children:"年月別"}),x.jsx(Hn,{value:"quarter",children:"四半期別"}),x.jsx(Hn,{value:"custom",children:"カスタム期間"})]})]}),(t==="year"||t==="month"||t==="quarter")&&x.jsxs(ga,{fullWidth:!0,margin:"normal",children:[x.jsx(no,{children:"年"}),x.jsx(yl,{value:i,onChange:b,label:"年","data-testid":"year-select",children:Array.from({length:10},(D,O)=>new Date().getFullYear()-O).map(D=>x.jsxs(Hn,{value:D,children:[D,"年"]},D))})]}),t==="month"&&x.jsxs(ga,{fullWidth:!0,margin:"normal",children:[x.jsx(no,{children:"月"}),x.jsx(yl,{value:s,onChange:A,label:"月","data-testid":"month-select",children:Array.from({length:12},(D,O)=>O+1).map(D=>x.jsxs(Hn,{value:D,children:[D,"月"]},D))})]}),t==="quarter"&&x.jsxs(ga,{fullWidth:!0,margin:"normal",children:[x.jsx(no,{children:"四半期"}),x.jsxs(yl,{value:c,onChange:E,label:"四半期","data-testid":"quarter-select",children:[x.jsx(Hn,{value:1,children:"第1四半期（1-3月）"}),x.jsx(Hn,{value:2,children:"第2四半期（4-6月）"}),x.jsx(Hn,{value:3,children:"第3四半期（7-9月）"}),x.jsx(Hn,{value:4,children:"第4四半期（10-12月）"})]})]}),t==="custom"&&x.jsxs(de,{sx:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:2,mt:1},"data-testid":"custom-date-range-grid",children:[x.jsx(de,{"data-testid":"start-date-grid-item",children:x.jsx(kt,{label:"開始日",type:"date",value:f,onChange:T,fullWidth:!0,InputLabelProps:{shrink:!0},inputProps:{"data-testid":"start-date-input"}})}),x.jsx(de,{"data-testid":"end-date-grid-item",children:x.jsx(kt,{label:"終了日",type:"date",value:g,onChange:C,fullWidth:!0,InputLabelProps:{shrink:!0},inputProps:{"data-testid":"end-date-input"}})})]}),t!=="none"&&x.jsxs(se,{variant:"body2",color:"text.secondary",sx:{mt:1},children:[t==="year"&&`${i}年に読了した本を検索します`,t==="month"&&`${i}年${s}月に読了した本を検索します`,t==="quarter"&&`${i}年第${c}四半期に読了した本を検索します`,t==="custom"&&"指定した期間に読了した本を検索します"]})]})]})}function KZ({selectedTags:n=[],onTagsChange:e,type:t="book"}){const{user:r}=gr(),{tagOptions:i,loading:a,fetchTagHistory:s}=_o(t,r),[o,c]=V.useState("");V.useEffect(()=>{r&&s()},[r,s]);const d=(g,y)=>{if(y&&!n.includes(y)){const v=[...n,y];e==null||e(v),c("")}},f=g=>{const y=n.filter(v=>v!==g);e==null||e(y)},p=(g,y)=>{c(y)};return x.jsxs(de,{children:[x.jsx(se,{variant:"subtitle2",gutterBottom:!0,children:"タグ検索"}),x.jsxs(pa,{sx:{p:2},children:[x.jsx(po,{freeSolo:!0,multiple:!0,options:i||[],value:n,inputValue:o,onInputChange:p,onChange:d,renderTags:(g,y)=>g.map((v,b)=>{const{key:A,...E}=y({index:b});return x.jsx(In,{label:v,...E,onDelete:()=>f(v),color:"primary",variant:"outlined","data-testid":`selected-tag-${v}`},A)}),renderInput:g=>x.jsx(kt,{...g,label:"タグを選択または入力",placeholder:"タグを入力...",fullWidth:!0,"data-testid":"tag-search-input"}),loading:a,noOptionsText:"タグが見つかりません","data-testid":"tag-autocomplete"}),x.jsx(se,{variant:"body2",color:"text.secondary",sx:{mt:1},children:n.length>0?`選択されたタグ: ${n.join(", ")}`:"タグを選択すると、そのタグを持つ本やメモを検索できます"})]})]})}function QZ({searchConditions:n,onSearchConditionsChange:e,onSearch:t}){const[r,i]=V.useState(Qn.ALL),a=f=>{e==null||e({...n,text:f.target.value})},s=(f,p)=>{i(p),e==null||e({...n,status:p})},o=f=>{e==null||e({...n,dateRange:f})},c=f=>{e==null||e({...n,selectedTags:f})},d=()=>{t==null||t(n)};return x.jsxs(de,{children:[x.jsx(se,{variant:"h6",gutterBottom:!0,children:"検索条件"}),x.jsxs(pa,{sx:{p:2,mb:2},children:[x.jsx(kt,{label:"テキスト検索（タイトル・著者・メモ内容・タグ）",value:(n==null?void 0:n.text)||"",onChange:a,fullWidth:!0,margin:"normal",placeholder:"検索したいキーワードを入力","data-testid":"text-search-field"}),x.jsxs(de,{sx:{mt:2},children:[x.jsx(se,{variant:"subtitle2",gutterBottom:!0,children:"ステータス"}),x.jsx(de,{sx:{display:"flex",gap:1,flexWrap:"wrap"},children:Object.values(Qn).map(f=>x.jsx(st,{variant:r===f?"contained":"outlined",size:"small",onClick:()=>s(null,f),"data-testid":`status-filter-${f}`,children:fd[f]},f))})]}),x.jsx(de,{sx:{mt:2},children:x.jsx(XZ,{dateRange:(n==null?void 0:n.dateRange)||{type:"none"},onDateRangeChange:o})}),x.jsx(de,{sx:{mt:2},children:x.jsx(KZ,{selectedTags:(n==null?void 0:n.selectedTags)||[],onTagsChange:c,type:"book"})})]}),x.jsx(de,{sx:{display:"flex",justifyContent:"center"},children:x.jsx(st,{variant:"contained",onClick:d,"data-testid":"search-button",children:"検索実行"})})]})}function ZZ({results:n=[],loading:e=!1,searchQuery:t="",onResultClick:r}){const{user:i}=gr();if(e)return x.jsx(de,{sx:{display:"flex",justifyContent:"center",p:4},children:x.jsx(Nw,{})});if(!n||n.length===0)return x.jsx(de,{sx:{p:3},children:x.jsx(lo,{severity:"info",children:t?`「${t}」に一致する結果が見つかりませんでした。`:"検索条件を設定して検索を実行してください。"})});const a=n.filter(d=>d.type==="book"),s=n.filter(d=>d.type==="memo"),o=d=>x.jsx(jn,{sx:{cursor:"pointer","&:hover":{boxShadow:3},height:"100%",display:"flex",flexDirection:"column",border:"2px solid",borderColor:"purple.300",backgroundColor:"purple.50"},onClick:()=>r==null?void 0:r("memo",d.bookId,d.id),"data-testid":`memo-result-${d.id}`,children:x.jsxs(Un,{sx:{flexGrow:1,display:"flex",flexDirection:"column"},children:[x.jsx(de,{sx:{mb:2},children:x.jsxs(se,{variant:"h6",component:"h3",gutterBottom:!0,sx:{fontWeight:"bold",display:"flex",alignItems:"center",gap:1},children:[x.jsx("span",{children:"📝"}),x.jsxs("span",{children:[d.bookTitle||"メモ"," - ページ",d.page||"未設定"]})]})}),d.text&&x.jsx(de,{sx:{mb:2,flexGrow:1},children:x.jsx(se,{variant:"body2",sx:{backgroundColor:"grey.50",p:1,borderRadius:1,border:"1px solid",borderColor:"grey.200",fontStyle:"italic"},children:d.text.length>120?`${d.text.substring(0,120)}...`:d.text})}),d.comment&&x.jsx(de,{sx:{mb:2},children:x.jsxs(se,{variant:"body2",sx:{backgroundColor:"primary.50",p:1,borderRadius:1,border:"1px solid",borderColor:"primary.200"},children:["💭 ",d.comment.length>100?`${d.comment.substring(0,100)}...`:d.comment]})}),d.tags&&d.tags.length>0&&x.jsx(de,{sx:{mb:2},children:x.jsx(de,{sx:{display:"flex",gap:.5,flexWrap:"wrap"},children:d.tags.map((f,p)=>x.jsx(In,{label:f,size:"small",variant:"outlined",sx:{fontSize:"0.75rem"}},p))})}),x.jsx(de,{sx:{mt:"auto"},children:x.jsxs(se,{variant:"caption",color:"text.secondary",children:["作成日: ",d.createdAt?new Date(d.createdAt.toDate()).toLocaleDateString("ja-JP"):"不明"]})})]})},d.id),c=d=>x.jsx(jn,{sx:{cursor:"pointer","&:hover":{boxShadow:3},height:"100%",display:"flex",flexDirection:"column",border:"2px solid",borderColor:"blue.300",backgroundColor:"blue.50"},onClick:()=>r==null?void 0:r("book",d.id),"data-testid":`book-result-${d.id}`,children:x.jsxs(Un,{sx:{flexGrow:1,display:"flex",flexDirection:"column"},children:[x.jsx(de,{sx:{mb:2},children:x.jsxs(se,{variant:"h6",component:"h3",gutterBottom:!0,sx:{fontWeight:"bold",display:"flex",alignItems:"center",gap:1},children:[x.jsx("span",{children:"📚"}),x.jsx("span",{children:d.title})]})}),x.jsxs(de,{sx:{mb:2},children:[x.jsx(se,{variant:"body2",color:"text.secondary",sx:{mb:1},children:d.author||"著者不明"}),x.jsx(In,{label:wo(d.status),size:"small",color:ds(d.status),sx:{fontSize:"0.75rem"}})]}),d.tags&&d.tags.length>0&&x.jsx(de,{sx:{mb:2},children:x.jsx(de,{sx:{display:"flex",gap:.5,flexWrap:"wrap"},children:d.tags.map((f,p)=>x.jsx(In,{label:f,size:"small",variant:"outlined",sx:{fontSize:"0.75rem"}},p))})}),x.jsx(de,{sx:{mt:"auto"},children:x.jsxs(se,{variant:"caption",color:"text.secondary",children:["更新日: ",d.updatedAt?new Date(d.updatedAt.toDate()).toLocaleDateString("ja-JP"):"不明"]})})]})},d.id);return x.jsxs(de,{children:[x.jsxs(de,{sx:{mb:3},children:[x.jsxs(se,{variant:"h6",gutterBottom:!0,children:["検索結果 (",n.length,"件)"]}),x.jsxs(se,{variant:"body2",color:"text.secondary",children:["📚 書籍: ",a.length,"件, 📝 メモ: ",s.length,"件"]})]}),x.jsx(de,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",sm:"1fr 1fr",md:"repeat(3, 1fr)"},gap:2},children:n.map(d=>x.jsx(de,{children:d.type==="book"?c(d):o(d)},`${d.type}-${d.id}`))})]})}function JZ(n={}){const{user:e}=gr(),[t,r]=V.useState([]),[i,a]=V.useState(!1),[s,o]=V.useState(null),{limit:c=50}=n,d=V.useCallback(A=>{if(!e)return[];const{text:E,status:T,dateRange:C,selectedTags:D}=A,O=[],N=[Tn("userId","==",e.uid)];if(T&&T!=="all"&&N.push(Tn("status","==",T)),C&&C.type!=="none"){const{startDate:B,endDate:L}=f(C);B&&N.push(Tn("updatedAt",">=",B)),L&&N.push(Tn("updatedAt","<=",L))}D&&D.length>0&&(!Array.isArray(D)||D.some(B=>Array.isArray(B))||N.push(Tn("tags","array-contains-any",D)));const M=zn(Fr(Pt,"books"),...N,h0("updatedAt","desc"),Rg(c));O.push({type:"book",query:M});const R=[Tn("userId","==",e.uid)],I=zn(xl(Pt,"memos"),...R,Rg(c*3));return O.push({type:"memo",query:I}),O},[e,c]),f=V.useCallback(A=>{const E=new Date;let T=null,C=null;switch(A.type){case"year":A.year&&(T=new Date(A.year,0,1),C=new Date(A.year,11,31,23,59,59));break;case"month":A.year&&A.month&&(T=new Date(A.year,A.month-1,1),C=new Date(A.year,A.month,0,23,59,59));break;case"quarter":if(A.year&&A.quarter){const D=(A.quarter-1)*3;T=new Date(A.year,D,1),C=new Date(A.year,D+3,0,23,59,59)}break;case"custom":A.startDate&&(T=new Date(A.startDate)),A.endDate&&(C=new Date(A.endDate),C.setHours(23,59,59));break;case"recent":A.months&&(T=new Date(E.getFullYear(),E.getMonth()-A.months,E.getDate()),C=E);break}return{startDate:T,endDate:C}},[]),p=V.useCallback((A,E)=>{if(!E)return A;const T=E.toLowerCase();return A.filter(C=>C.type==="book"?C.title&&C.title.toLowerCase().includes(T)||C.author&&C.author.toLowerCase().includes(T)||C.tags&&C.tags.some(D=>D.toLowerCase().includes(T)):C.type==="memo"?C.text&&C.text.toLowerCase().includes(T)||C.comment&&C.comment.toLowerCase().includes(T)||C.tags&&C.tags.some(D=>D.toLowerCase().includes(T)):!1)},[]),g=V.useCallback((A,E)=>{if(!E||E.length===0)return A;const T=D=>{if(!Array.isArray(D))return[];const O=[],N=M=>{Array.isArray(M)?M.forEach(N):typeof M=="string"&&M.trim()&&O.push(M.toLowerCase().trim())};return D.forEach(N),O},C=T(E);return console.log("正規化された選択タグ:",C),A.filter(D=>{if(!D.tags||!Array.isArray(D.tags))return!1;const O=T(D.tags);console.log(`アイテム ${D.id} のタグ:`,O);const N=O.some(M=>C.includes(M));return console.log(`アイテム ${D.id} のマッチ結果:`,N),N})},[]),y=V.useCallback((A,E)=>{if(!E)return A;const T=E.toLowerCase();return A.filter(C=>C.text&&C.text.toLowerCase().includes(T)||C.comment&&C.comment.toLowerCase().includes(T))},[]),v=V.useCallback(async A=>{var E,T,C;if(!e){o("ユーザーが認証されていません");return}a(!0),o(null);try{console.log("検索条件:",A);const D=d(A);console.log("構築されたクエリ:",D);const O=[];for(const{type:M,query:R}of D){console.log(`${M}クエリ実行開始`);try{const I=await ur(R);if(console.log(`${M}クエリ実行成功, 結果数:`,I.size),M==="memo"){console.log("メモクエリの結果を処理中...");for(const B of I.docs){const L=B.data(),k=(E=B.ref.parent.parent)==null?void 0:E.id;console.log("メモデータ:",{id:B.id,bookId:k,tags:L.tags,userId:L.userId,text:((T=L.text)==null?void 0:T.substring(0,50))+"..."});let F="メモ";if(k)try{const q=await ur(zn(Fr(Pt,"books"),Tn("__name__","==",k),Tn("userId","==",e.uid)));q.empty||(F=q.docs[0].data().title||"メモ")}catch(q){console.warn("親の本の情報取得に失敗:",q)}O.push({id:B.id,type:M,bookId:k,bookTitle:F,...L})}console.log("メモ処理完了, 追加されたメモ数:",I.size)}else I.forEach(B=>{const L=B.data();O.push({id:B.id,type:M,...L})})}catch(I){if(console.error(`${M}クエリエラー:`,I),I.code==="failed-precondition"||I.message.includes("index")||I.message.includes("array-contains-any"))if(console.log("インデックスエラー検出、クライアントサイドフィルタリングにフォールバック"),M==="memo"){const B=zn(xl(Pt,"memos"),Tn("userId","==",e.uid),Rg(c*2)),L=await ur(B);console.log("メモフォールバッククエリ実行成功, 結果数:",L.size);for(const k of L.docs){const F=k.data(),q=(C=k.ref.parent.parent)==null?void 0:C.id;let X="メモ";if(q)try{const G=await ur(zn(Fr(Pt,"books"),Tn("__name__","==",q),Tn("userId","==",e.uid)));G.empty||(X=G.docs[0].data().title||"メモ")}catch(G){console.warn("親の本の情報取得に失敗:",G)}O.push({id:k.id,type:M,bookId:q,bookTitle:X,...F})}}else{const B=zn(Fr(Pt,"books"),Tn("userId","==",e.uid),h0("updatedAt","desc"),Rg(c*2)),L=await ur(B);console.log("本フォールバッククエリ実行成功, 結果数:",L.size),L.forEach(k=>{const F=k.data();O.push({id:k.id,type:M,...F})})}else throw I}}console.log("全クエリ実行完了, 総結果数:",O.length),console.log("結果の内訳:",{books:O.filter(M=>M.type==="book").length,memos:O.filter(M=>M.type==="memo").length});let N=p(O,A.text);if(A.selectedTags&&A.selectedTags.length>0&&(console.log("クライアントサイドタグフィルタリング実行:",A.selectedTags),N=g(N,A.selectedTags),console.log("タグフィルタリング後の結果数:",N.length)),A.memoContent){const M=N.filter(I=>I.type==="book"),R=y(N.filter(I=>I.type==="memo"),A.memoContent);N=[...M,...R]}N.sort((M,R)=>{const I=A.sortBy||"updatedAt",B=A.sortOrder||"desc";let L=M[I],k=R[I];return(I==="updatedAt"||I==="createdAt")&&(L=L!=null&&L.toDate?L.toDate():new Date(L),k=k!=null&&k.toDate?k.toDate():new Date(k)),typeof L=="string"&&typeof k=="string"&&(L=L.toLowerCase(),k=k.toLowerCase()),B==="asc"?L>k?1:-1:L<k?1:-1}),r(N)}catch(D){console.error("検索エラー:",D),o("検索中にエラーが発生しました")}finally{a(!1)}},[e,d,p,g,y]),b=V.useCallback(()=>{r([]),o(null)},[]);return{results:t,loading:i,error:s,executeSearch:v,clearResults:b}}function eJ(){const{user:n}=gr(),e=S0(),[t,r]=V.useState(0),[i,a]=V.useState({text:"",status:"all",dateRange:{type:"none"},selectedTags:[],sortBy:"updatedAt",sortOrder:"desc"}),{results:s,loading:o,error:c,executeSearch:d,clearResults:f}=JZ(),[p,g]=V.useState(!1),[y,v]=V.useState(null),[b,A]=V.useState(null),E=(R,I)=>{r(I)},T=R=>{a(R)},C=R=>{console.log("検索実行:",R),d(R)},D=(R,I,B)=>{if(R==="book")e(`/book/${I}`);else if(R==="memo"){const L=(s||[]).find(k=>k.type==="memo"&&k.id===B);L?(v(L),A(I),g(!0)):e(`/book/${I}?memo=${B}`)}},O=()=>{g(!1),v(null),A(null)},N=()=>{f(),a({text:"",status:"all",dateRange:{type:"none"},selectedTags:[],sortBy:"updatedAt",sortOrder:"desc"})},M=R=>{console.log("タグがクリックされました:",R);const I={...i,selectedTags:[R],text:""};a(I),r(0),d(I)};return n?x.jsxs(de,{sx:{maxWidth:1e3,mx:"auto",mb:4,pb:"56px"},children:[x.jsx(zm,{title:"検索・タグ",subtitle:"高度な検索とタグ管理"}),x.jsxs(de,{sx:{px:{xs:1.5,sm:2,md:0}},children:[x.jsx(de,{sx:{borderBottom:1,borderColor:"divider",mb:2,position:"sticky",top:0,zIndex:1100,backgroundColor:"background.paper"},"data-testid":"tag-search-tabs-container",style:{position:"sticky",top:0,zIndex:1100},children:x.jsxs(mm,{value:t,onChange:E,centered:!0,"data-testid":"tag-search-tabs",children:[x.jsx(ka,{label:"高度な検索",id:"tag-search-tab-0","aria-controls":"tag-search-tabpanel-0","data-testid":"search-tab"}),x.jsx(ka,{label:"タグ管理",id:"tag-search-tab-1","aria-controls":"tag-search-tabpanel-1","data-testid":"tag-management-tab"})]})}),x.jsx(mD,{value:t,index:0,"data-testid":"search-tab-panel",children:x.jsx(tJ,{searchConditions:i,onSearchConditionsChange:T,onSearch:C,results:s,loading:o,error:c,onResultClick:D,onClearSearch:N})}),x.jsx(mD,{value:t,index:1,"data-testid":"tag-management-tab-panel",children:x.jsx(nJ,{onTagClick:M})}),x.jsx(V4,{open:p,memo:y,bookId:b,onClose:O,onUpdate:O,onDelete:O})]})]}):x.jsx(de,{sx:{maxWidth:600,mx:"auto",mt:4,p:2},children:x.jsx(se,{variant:"h6",color:"error",children:"ログインが必要です"})})}function tJ({searchConditions:n,onSearchConditionsChange:e,onSearch:t,results:r,loading:i,error:a,onResultClick:s,onClearSearch:o}){return x.jsxs(de,{children:[x.jsx(se,{variant:"h5",gutterBottom:!0,children:"高度な検索"}),x.jsx(se,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"タイトル・著者・タグ・メモ内容で絞り込みできます。"}),x.jsx(QZ,{searchConditions:n,onSearchConditionsChange:e,onSearch:t}),a&&x.jsx(de,{sx:{mt:2},children:x.jsx(lo,{severity:"error",children:a})}),(r.length>0||i)&&x.jsx(de,{sx:{mt:4},children:x.jsx(ZZ,{results:r,loading:i,searchQuery:n.text,onResultClick:s})}),r.length>0&&!i&&x.jsx(de,{sx:{mt:2,textAlign:"center"},children:x.jsx(se,{variant:"body2",color:"primary",sx:{cursor:"pointer",textDecoration:"underline"},onClick:o,children:"検索結果をクリア"})})]})}function nJ({onTagClick:n}){return x.jsxs(de,{children:[x.jsx(se,{variant:"h5",gutterBottom:!0,children:"タグ管理"}),x.jsx(se,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"統計を確認し、タグクリックで検索できます。"}),x.jsx(qZ,{onTagClick:n})]})}function jg(n,e,t=1){if(!e)return;const r=n.get(e)||0;n.set(e,r+t)}function rJ(){const{user:n}=gr(),e=V.useContext(pi),t=(e==null?void 0:e.setGlobalError)||(()=>{}),[r,i]=V.useState(!0),[a,s]=V.useState(null),[o,c]=V.useState([]),[d,f]=V.useState([]);V.useEffect(()=>{let C=!1;async function D(){if(!n){c([]),f([]),i(!1);return}i(!0),s(null);try{const O=zn(Fr(Pt,"books"),Tn("userId","==",n.uid)),M=(await ur(O)).docs.map(L=>({id:L.id,...L.data()})),R=zn(xl(Pt,"memos"),Tn("userId","==",n.uid)),B=(await ur(R)).docs.map(L=>({id:L.id,...L.data()}));C||(c(M),f(B))}catch(O){console.error("Failed to load stats:",O),C||(s("統計情報の取得に失敗しました。"),t("統計情報の取得に失敗しました。"))}finally{C||i(!1)}}return D(),()=>{C=!0}},[n]);const p=V.useMemo(()=>{const C=o.length,D=o.filter(R=>(R.status||dr)===vt.TSUNDOKU).length,O=o.filter(R=>(R.status||dr)===vt.READING).length,N=o.filter(R=>(R.status||dr)===vt.RE_READING).length,M=o.filter(R=>(R.status||dr)===vt.FINISHED).length;return{totalBooks:C,tsundokuBooks:D,readingBooks:O,reReadingBooks:N,finishedBooks:M}},[o]),g=V.useMemo(()=>{const C=o.filter(M=>(M.status||dr)===vt.TSUNDOKU).length,D=o.filter(M=>(M.status||dr)===vt.READING).length,O=o.filter(M=>(M.status||dr)===vt.RE_READING).length,N=o.filter(M=>(M.status||dr)===vt.FINISHED).length;return{tsundoku:C,reading:D,reReading:O,finished:N}},[o]),y=V.useMemo(()=>{const C=new Map,D=new Map;for(const M of o){const R=Array.isArray(M.tags)?M.tags:[];for(const I of R)jg(C,String(I).trim())}for(const M of d){const R=Array.isArray(M.tags)?M.tags:[];for(const I of R)jg(D,String(I).trim())}const O=new Set([...C.keys(),...D.keys()]),N=[];for(const M of O){const R=C.get(M)||0,I=D.get(M)||0;N.push({tag:M,bookCount:R,memoCount:I,totalCount:R+I})}return N.sort((M,R)=>R.totalCount-M.totalCount||M.tag.localeCompare(R.tag)),N},[o,d]),v=V.useMemo(()=>{var N;const C=new Date,D=[],O=new Map;for(let M=11;M>=0;M-=1){const R=new Date(C.getFullYear(),C.getMonth()-M,1),I=`${R.getFullYear()}-${String(R.getMonth()+1).padStart(2,"0")}`;O.set(I,D.length),D.push({key:I,year:R.getFullYear(),month:R.getMonth()+1,count:0})}for(const M of o){const R=M.status||"reading",I=M.finishedAt||M.updatedAt||M.createdAt;if(!I||R!=="finished")continue;const B=typeof(I==null?void 0:I.toDate)=="function"?I.toDate():new Date(I);if(Number.isNaN((N=B==null?void 0:B.getTime)==null?void 0:N.call(B)))continue;const L=`${B.getFullYear()}-${String(B.getMonth()+1).padStart(2,"0")}`;if(!O.has(L))continue;const k=O.get(L);D[k].count+=1}return D},[o]),b=V.useMemo(()=>{var N;const C=new Date,D=[],O=new Map;for(let M=11;M>=0;M-=1){const R=new Date(C.getFullYear(),C.getMonth()-M,1),I=`${R.getFullYear()}-${String(R.getMonth()+1).padStart(2,"0")}`;O.set(I,D.length),D.push({key:I,year:R.getFullYear(),month:R.getMonth()+1,count:0})}for(const M of o){const R=M.createdAt||M.updatedAt||M.finishedAt;if(!R)continue;const I=typeof(R==null?void 0:R.toDate)=="function"?R.toDate():new Date(R);if(Number.isNaN((N=I==null?void 0:I.getTime)==null?void 0:N.call(I)))continue;const B=`${I.getFullYear()}-${String(I.getMonth()+1).padStart(2,"0")}`;if(!O.has(B))continue;const L=O.get(B);D[L].count+=1}return D},[o]),A=V.useMemo(()=>{var N;const C=new Date,D=[],O=new Map;for(let M=11;M>=0;M-=1){const R=new Date(C.getFullYear(),C.getMonth()-M,1),I=`${R.getFullYear()}-${String(R.getMonth()+1).padStart(2,"0")}`;O.set(I,D.length),D.push({key:I,year:R.getFullYear(),month:R.getMonth()+1,count:0})}for(const M of d){const R=M.createdAt||M.updatedAt;if(!R)continue;const I=typeof(R==null?void 0:R.toDate)=="function"?R.toDate():new Date(R);if(Number.isNaN((N=I==null?void 0:I.getTime)==null?void 0:N.call(I)))continue;const B=`${I.getFullYear()}-${String(I.getMonth()+1).padStart(2,"0")}`;if(!O.has(B))continue;const L=O.get(B);D[L].count+=1}return D},[d]),E=V.useMemo(()=>{const C=new Map;for(const O of o){const N=(O.author||"").toString().trim();N&&jg(C,N)}const D=[...C.entries()].map(([O,N])=>({author:O,total:N}));return D.sort((O,N)=>N.total-O.total||O.author.localeCompare(N.author)),D},[o]),T=V.useMemo(()=>{const C=new Map;for(const O of o){const N=(O.publisher||"").toString().trim();N&&jg(C,N)}const D=[...C.entries()].map(([O,N])=>({publisher:O,total:N}));return D.sort((O,N)=>N.total-O.total||O.publisher.localeCompare(N.publisher)),D},[o]);return{loading:r,error:a,summary:p,tagStats:y,monthlyFinished:v,monthlyAddedBooks:b,monthlyMemos:A,topAuthors:E,topPublishers:T,statusDistribution:g}}const gb="DEFAULT_X_AXIS_KEY",mb="DEFAULT_Y_AXIS_KEY",iJ={top:20,bottom:20,left:20,right:20},aJ=45,sJ=25,hP=20;class oJ{constructor(e){this.value=void 0,this.listeners=void 0,this.subscribe=t=>(this.listeners.add(t),()=>{this.listeners.delete(t)}),this.getSnapshot=()=>this.value,this.update=t=>{const r=t(this.value);r!==this.value&&(this.value=r,this.listeners.forEach(i=>i(r)))},this.value=e,this.listeners=new Set}}const ty=({params:n,store:e})=>{V.useEffect(()=>{e.update(r=>H({},r,{animation:H({},r.animation,{skip:n.skipAnimation})}))},[e,n.skipAnimation]);const t=V.useCallback(()=>{let r=!1;return e.update(i=>H({},i,{animation:H({},i.animation,{skipAnimationRequests:i.animation.skipAnimationRequests+1})})),()=>{r||(r=!0,e.update(i=>H({},i,{animation:H({},i.animation,{skipAnimationRequests:i.animation.skipAnimationRequests-1})})))}},[e]);return Gn(()=>{if(typeof window>"u"||!(window!=null&&window.matchMedia))return;let i;const a=o=>{o.matches?i=t():i==null||i()},s=window.matchMedia("(prefers-reduced-motion)");return a(s),s.addEventListener("change",a),()=>{s.removeEventListener("change",a)}},[t,e]),{instance:{disableAnimation:t}}};ty.params={skipAnimation:!0};ty.getDefaultizedParams=({params:n})=>H({},n,{skipAnimation:n.skipAnimation??!1});ty.getInitialState=({skipAnimation:n})=>({animation:{skip:n,skipAnimationRequests:0}});var Y1=Symbol("NOT_FOUND");function lJ(n,e=`expected a function, instead received ${typeof n}`){if(typeof n!="function")throw new TypeError(e)}function cJ(n,e=`expected an object, instead received ${typeof n}`){if(typeof n!="object")throw new TypeError(e)}function uJ(n,e="expected all items to be functions, instead received the following types: "){if(!n.every(t=>typeof t=="function")){const t=n.map(r=>typeof r=="function"?`function ${r.name||"unnamed"}()`:typeof r).join(", ");throw new TypeError(`${e}[${t}]`)}}var yD=n=>Array.isArray(n)?n:[n];function dJ(n){const e=Array.isArray(n[0])?n[0]:n;return uJ(e,"createSelector expects all input-selectors to be functions, but received the following types: "),e}function fJ(n,e){const t=[],{length:r}=n;for(let i=0;i<r;i++)t.push(n[i].apply(null,e));return t}function hJ(n){let e;return{get(t){return e&&n(e.key,t)?e.value:Y1},put(t,r){e={key:t,value:r}},getEntries(){return e?[e]:[]},clear(){e=void 0}}}function pJ(n,e){let t=[];function r(o){const c=t.findIndex(d=>e(o,d.key));if(c>-1){const d=t[c];return c>0&&(t.splice(c,1),t.unshift(d)),d.value}return Y1}function i(o,c){r(o)===Y1&&(t.unshift({key:o,value:c}),t.length>n&&t.pop())}function a(){return t}function s(){t=[]}return{get:r,put:i,getEntries:a,clear:s}}var gJ=(n,e)=>n===e;function mJ(n){return function(t,r){if(t===null||r===null||t.length!==r.length)return!1;const{length:i}=t;for(let a=0;a<i;a++)if(!n(t[a],r[a]))return!1;return!0}}function yJ(n,e){const t=typeof e=="object"?e:{equalityCheck:e},{equalityCheck:r=gJ,maxSize:i=1,resultEqualityCheck:a}=t,s=mJ(r);let o=0;const c=i<=1?hJ(s):pJ(i,s);function d(){let f=c.get(arguments);if(f===Y1){if(f=n.apply(null,arguments),o++,a){const g=c.getEntries().find(y=>a(y.value,f));g&&(f=g.value,o!==0&&o--)}c.put(arguments,f)}return f}return d.clearCache=()=>{c.clear(),d.resetResultsCount()},d.resultsCount=()=>o,d.resetResultsCount=()=>{o=0},d}var vJ=class{constructor(n){this.value=n}deref(){return this.value}},xJ=typeof WeakRef<"u"?WeakRef:vJ,wJ=0,vD=1;function Ug(){return{s:wJ,v:void 0,o:null,p:null}}function pP(n,e={}){let t=Ug();const{resultEqualityCheck:r}=e;let i,a=0;function s(){var p;let o=t;const{length:c}=arguments;for(let g=0,y=c;g<y;g++){const v=arguments[g];if(typeof v=="function"||typeof v=="object"&&v!==null){let b=o.o;b===null&&(o.o=b=new WeakMap);const A=b.get(v);A===void 0?(o=Ug(),b.set(v,o)):o=A}else{let b=o.p;b===null&&(o.p=b=new Map);const A=b.get(v);A===void 0?(o=Ug(),b.set(v,o)):o=A}}const d=o;let f;if(o.s===vD)f=o.v;else if(f=n.apply(null,arguments),a++,r){const g=((p=i==null?void 0:i.deref)==null?void 0:p.call(i))??i;g!=null&&r(g,f)&&(f=g,a!==0&&a--),i=typeof f=="object"&&f!==null||typeof f=="function"?new xJ(f):f}return d.s=vD,d.v=f,f}return s.clearCache=()=>{t=Ug(),s.resetResultsCount()},s.resultsCount=()=>a,s.resetResultsCount=()=>{a=0},s}function gP(n,...e){const t=typeof n=="function"?{memoize:n,memoizeOptions:e}:n,r=(...i)=>{let a=0,s=0,o,c={},d=i.pop();typeof d=="object"&&(c=d,d=i.pop()),lJ(d,`createSelector expects an output function after the inputs, but received: [${typeof d}]`);const f={...t,...c},{memoize:p,memoizeOptions:g=[],argsMemoize:y=pP,argsMemoizeOptions:v=[]}=f,b=yD(g),A=yD(v),E=dJ(i),T=p(function(){return a++,d.apply(null,arguments)},...b),C=y(function(){s++;const O=fJ(E,arguments);return o=T.apply(null,O),o},...A);return Object.assign(C,{resultFunc:d,memoizedResultFunc:T,dependencies:E,dependencyRecomputations:()=>s,resetDependencyRecomputations:()=>{s=0},lastResult:()=>o,recomputations:()=>a,resetRecomputations:()=>{a=0},memoize:p,argsMemoize:y})};return Object.assign(r,{withTypes:()=>r}),r}var _J=gP(pP),bJ=Object.assign((n,e=_J)=>{cJ(n,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof n}`);const t=Object.keys(n),r=t.map(a=>n[a]);return e(r,(...a)=>a.reduce((s,o,c)=>(s[t[c]]=o,s),{}))},{withTypes:()=>bJ});const AJ=gP({memoize:yJ,memoizeOptions:{maxSize:1,equalityCheck:Object.is}}),xD=new WeakMap,Ge=(...n)=>(t,...r)=>{const i=t.cacheKey;let a=xD.get(i);a||(a=new Map,xD.set(i,a));const s=a.get(n);if(s)return s(t,...r);const o=AJ(...n);return a.set(n,o),o(t,...r)},EJ=n=>n.animation,SJ=Ge([EJ],n=>n.skip||n.skipAnimationRequests>0);var Wx={exports:{}},Yx={},qx={exports:{}},Xx={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wD;function TJ(){if(wD)return Xx;wD=1;var n=Lw();function e(p,g){return p===g&&(p!==0||1/p===1/g)||p!==p&&g!==g}var t=typeof Object.is=="function"?Object.is:e,r=n.useState,i=n.useEffect,a=n.useLayoutEffect,s=n.useDebugValue;function o(p,g){var y=g(),v=r({inst:{value:y,getSnapshot:g}}),b=v[0].inst,A=v[1];return a(function(){b.value=y,b.getSnapshot=g,c(b)&&A({inst:b})},[p,y,g]),i(function(){return c(b)&&A({inst:b}),p(function(){c(b)&&A({inst:b})})},[p]),s(y),y}function c(p){var g=p.getSnapshot;p=p.value;try{var y=g();return!t(p,y)}catch{return!0}}function d(p,g){return g()}var f=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?d:o;return Xx.useSyncExternalStore=n.useSyncExternalStore!==void 0?n.useSyncExternalStore:f,Xx}var _D;function CJ(){return _D||(_D=1,qx.exports=TJ()),qx.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bD;function IJ(){if(bD)return Yx;bD=1;var n=Lw(),e=CJ();function t(d,f){return d===f&&(d!==0||1/d===1/f)||d!==d&&f!==f}var r=typeof Object.is=="function"?Object.is:t,i=e.useSyncExternalStore,a=n.useRef,s=n.useEffect,o=n.useMemo,c=n.useDebugValue;return Yx.useSyncExternalStoreWithSelector=function(d,f,p,g,y){var v=a(null);if(v.current===null){var b={hasValue:!1,value:null};v.current=b}else b=v.current;v=o(function(){function E(N){if(!T){if(T=!0,C=N,N=g(N),y!==void 0&&b.hasValue){var M=b.value;if(y(M,N))return D=M}return D=N}if(M=D,r(C,N))return M;var R=g(N);return y!==void 0&&y(M,R)?(C=N,M):(C=N,D=R)}var T=!1,C,D,O=p===void 0?null:p;return[function(){return E(f())},O===null?void 0:function(){return E(O())}]},[f,p,g,y]);var A=i(d,v[0],v[1]);return s(function(){b.hasValue=!0,b.value=A},[A]),c(A),A},Yx}var AD;function DJ(){return AD||(AD=1,Wx.exports=IJ()),Wx.exports}var RJ=DJ();const MJ=Object.is,dt=(n,e,t=[],r=MJ)=>{const i=a=>e(a,...t);return RJ.useSyncExternalStoreWithSelector(n.subscribe,n.getSnapshot,n.getSnapshot,i,r)},ru=n=>{var e;return(e=n.cartesianAxis)==null?void 0:e.x},df=n=>{var e;return(e=n.cartesianAxis)==null?void 0:e.y},OJ=Ge([df],n=>(n??[]).reduce((e,t)=>{var r;return t.position==="left"?e+(t.width||0)+((r=t.zoom)!=null&&r.slider.enabled?t.zoom.slider.size:0):e},0)),PJ=Ge([df],n=>(n??[]).reduce((e,t)=>{var r;return t.position==="right"?e+(t.width||0)+((r=t.zoom)!=null&&r.slider.enabled?t.zoom.slider.size:0):e},0)),kJ=Ge([ru],n=>(n??[]).reduce((e,t)=>{var r;return t.position==="top"?e+(t.height||0)+((r=t.zoom)!=null&&r.slider.enabled?t.zoom.slider.size:0):e},0)),NJ=Ge([ru],n=>(n??[]).reduce((e,t)=>{var r;return t.position==="bottom"?e+(t.height||0)+((r=t.zoom)!=null&&r.slider.enabled?t.zoom.slider.size:0):e},0)),LJ=n=>n.dimensions,mP=n=>n.dimensions.width,yP=n=>n.dimensions.height,BJ=n=>n.dimensions.margin.top,VJ=n=>n.dimensions.margin.right,FJ=n=>n.dimensions.margin.bottom,jJ=n=>n.dimensions.margin.left,Io=Ge([mP,yP,BJ,VJ,FJ,jJ,kJ,PJ,NJ,OJ],(n,e,t,r,i,a,s,o,c,d)=>({width:n-a-r-d-o,left:a+d,right:r+o,height:e-t-i-s-c,top:t+s,bottom:i+c})),vP=Ge([LJ],n=>({width:n.propsWidth,height:n.propsHeight})),UJ=Ge([mP,yP],(n,e)=>({width:n,height:e}));function xP(n,e){return typeof n=="number"?{top:n,bottom:n,left:n,right:n}:e?H({},e,n):n}const HJ=10,ny=({params:n,store:e,svgRef:t})=>{const r=n.width!==void 0&&n.height!==void 0,i=V.useRef({displayError:!1,initialCompute:!0,computeRun:0}),[a,s]=V.useState(0),[o,c]=V.useState(0),d=V.useCallback(()=>{const v=t==null?void 0:t.current;if(!v)return{};const A=_N(v).getComputedStyle(v),E=Math.floor(parseFloat(A.height))||0,T=Math.floor(parseFloat(A.width))||0;return e.update(C=>C.dimensions.width===T&&C.dimensions.height===E?C:H({},C,{dimensions:{margin:{top:n.margin.top,right:n.margin.right,bottom:n.margin.bottom,left:n.margin.left},width:n.width??T,height:n.height??E,propsWidth:n.width,propsHeight:n.height}})),{height:E,width:T}},[e,t,n.height,n.width,n.margin.left,n.margin.right,n.margin.top,n.margin.bottom]);V.useEffect(()=>{e.update(v=>{const b=n.width??v.dimensions.width,A=n.height??v.dimensions.height;return H({},v,{dimensions:{margin:{top:n.margin.top,right:n.margin.right,bottom:n.margin.bottom,left:n.margin.left},width:b,height:A,propsHeight:n.height,propsWidth:n.width}})})},[e,n.height,n.width,n.margin.left,n.margin.right,n.margin.top,n.margin.bottom]),V.useEffect(()=>{i.current.displayError=!0},[]),Gn(()=>{if(r||!i.current.initialCompute||i.current.computeRun>HJ)return;const v=d();v.width!==a||v.height!==o?(i.current.computeRun+=1,v.width!==void 0&&s(v.width),v.height!==void 0&&c(v.height)):i.current.initialCompute&&(i.current.initialCompute=!1)},[o,a,d,r]),Gn(()=>{if(r)return()=>{};d();const v=t.current;if(typeof ResizeObserver>"u")return()=>{};let b;const A=new ResizeObserver(()=>{b=requestAnimationFrame(()=>{d()})});return v&&A.observe(v),()=>{b&&cancelAnimationFrame(b),v&&A.unobserve(v)}},[d,r,t]);const f=dt(e,Io),p=V.useCallback(v=>v>=f.left-1&&v<=f.left+f.width,[f.left,f.width]),g=V.useCallback(v=>v>=f.top-1&&v<=f.top+f.height,[f.height,f.top]);return{instance:{isPointInside:V.useCallback((v,b,A)=>A&&"closest"in A&&A.closest("[data-drawing-container]")?!0:p(v)&&g(b),[p,g]),isXInside:p,isYInside:g}}};ny.params={width:!0,height:!0,margin:!0};ny.getDefaultizedParams=({params:n})=>H({},n,{margin:xP(n.margin,iJ)});ny.getInitialState=({width:n,height:e,margin:t})=>({dimensions:{margin:t,width:n??0,height:e??0,propsWidth:n,propsHeight:e}});const yb=({params:n,store:e})=>(Gn(()=>{e.update(t=>H({},t,{experimentalFeatures:n.experimentalFeatures}))},[e,n.experimentalFeatures]),{});yb.params={experimentalFeatures:!0};yb.getInitialState=({experimentalFeatures:n})=>({experimentalFeatures:n});const zJ=n=>n.experimentalFeatures,wP=Ge([zJ],n=>!!(n!=null&&n.preferStrictDomainInLineCharts));let ED=0;const $J=()=>(ED+=1,`mui-chart-${ED}`),vb=({params:n,store:e})=>(V.useEffect(()=>{e.update(t=>n.id===void 0||n.id===t.id.providedChartId&&t.id.chartId!==void 0?t:H({},t,{id:H({},t.id,{chartId:n.id??$J()})}))},[e,n.id]),{});vb.params={id:!0};vb.getInitialState=({id:n})=>({id:{chartId:n,providedChartId:n}});const GJ=n=>n.id,WJ=Ge([GJ],n=>n.chartId),YJ=["#4254FB","#FFB422","#FA4F58","#0DBEFF","#22BF75","#FA83B4","#FF7511"],qJ=["#495AFB","#FFC758","#F35865","#30C8FF","#44CE8D","#F286B3","#FF8C39"],_P=n=>n==="dark"?qJ:YJ,bP=({series:n,colors:e,seriesConfig:t,dataset:r})=>{const i={};n.forEach((s,o)=>{var f;const c=t[s.type].getSeriesWithDefaultValues(s,o,e),d=c.id;if(i[s.type]===void 0&&(i[s.type]={series:{},seriesOrder:[]}),((f=i[s.type])==null?void 0:f.series[d])!==void 0)throw new Error(`MUI X Charts: series' id "${d}" is not unique.`);i[s.type].series[d]=c,i[s.type].seriesOrder.push(d)});const a={};return Object.keys(t).forEach(s=>{var c,d;const o=i[s];o!==void 0&&(a[s]=((d=(c=t[s])==null?void 0:c.seriesProcessor)==null?void 0:d.call(c,o,r))??i[s])}),a},ry=({params:n,store:e,seriesConfig:t})=>{const{series:r,dataset:i,theme:a,colors:s}=n,o=V.useRef(!0);return V.useEffect(()=>{if(o.current){o.current=!1;return}e.update(c=>H({},c,{series:H({},c.series,{processedSeries:bP({series:r,colors:typeof s=="function"?s(a):s,seriesConfig:t,dataset:i})})}))},[s,i,r,a,t,e]),{}};ry.params={dataset:!0,series:!0,colors:!0,theme:!0};const XJ=[];ry.getDefaultizedParams=({params:n})=>{var e;return H({},n,{series:(e=n.series)!=null&&e.length?n.series:XJ,colors:n.colors??_P,theme:n.theme??"light"})};ry.getInitialState=({series:n=[],colors:e,theme:t,dataset:r},i,a)=>({series:{seriesConfig:a,processedSeries:bP({series:n,colors:typeof e=="function"?e(t):e,seriesConfig:a,dataset:r})}});const AP=n=>n.series,Wa=Ge([AP],n=>n.processedSeries),Do=Ge([AP],n=>n.seriesConfig),KJ={abort:!0,animationcancel:!0,animationend:!0,animationiteration:!0,animationstart:!0,auxclick:!0,beforeinput:!0,beforetoggle:!0,blur:!0,cancel:!0,canplay:!0,canplaythrough:!0,change:!0,click:!0,close:!0,compositionend:!0,compositionstart:!0,compositionupdate:!0,contextlost:!0,contextmenu:!0,contextrestored:!0,copy:!0,cuechange:!0,cut:!0,dblclick:!0,drag:!0,dragend:!0,dragenter:!0,dragleave:!0,dragover:!0,dragstart:!0,drop:!0,durationchange:!0,emptied:!0,ended:!0,error:!0,focus:!0,focusin:!0,focusout:!0,formdata:!0,gotpointercapture:!0,input:!0,invalid:!0,keydown:!0,keypress:!0,keyup:!0,load:!0,loadeddata:!0,loadedmetadata:!0,loadstart:!0,lostpointercapture:!0,mousedown:!0,mouseenter:!0,mouseleave:!0,mousemove:!0,mouseout:!0,mouseover:!0,mouseup:!0,paste:!0,pause:!0,play:!0,playing:!0,pointercancel:!0,pointerdown:!0,pointerenter:!0,pointerleave:!0,pointermove:!0,pointerout:!0,pointerover:!0,pointerup:!0,progress:!0,ratechange:!0,reset:!0,resize:!0,scroll:!0,scrollend:!0,securitypolicyviolation:!0,seeked:!0,seeking:!0,select:!0,selectionchange:!0,selectstart:!0,slotchange:!0,stalled:!0,submit:!0,suspend:!0,timeupdate:!0,toggle:!0,touchcancel:!0,touchend:!0,touchmove:!0,touchstart:!0,transitioncancel:!0,transitionend:!0,transitionrun:!0,transitionstart:!0,volumechange:!0,waiting:!0,webkitanimationend:!0,webkitanimationiteration:!0,webkitanimationstart:!0,webkittransitionend:!0,wheel:!0,beforematch:!0,pointerrawupdate:!0};class EP{constructor(e){if(this.name=void 0,this.preventDefault=void 0,this.stopPropagation=void 0,this.preventIf=void 0,this.requiredKeys=void 0,this.keyboardManager=void 0,this.pointerMode=void 0,this.customData={},this.pointerManager=void 0,this.gesturesRegistry=void 0,this.element=void 0,this.state=void 0,this.isSinglePhase=void 0,this.eventType=void 0,this.optionsType=void 0,this.mutableOptionsType=void 0,this.mutableStateType=void 0,!e||!e.name)throw new Error("Gesture must be initialized with a valid name.");if(e.name in KJ)throw new Error(`Gesture can't be created with a native event name. Tried to use "${e.name}". Please use a custom name instead.`);this.name=e.name,this.preventDefault=e.preventDefault??!1,this.stopPropagation=e.stopPropagation??!1,this.preventIf=e.preventIf??[],this.requiredKeys=e.requiredKeys??[],this.pointerMode=e.pointerMode??[]}init(e,t,r,i){this.element=e,this.pointerManager=t,this.gesturesRegistry=r,this.keyboardManager=i;const a=`${this.name}ChangeOptions`;this.element.addEventListener(a,this.handleOptionsChange.bind(this));const s=`${this.name}ChangeState`;this.element.addEventListener(s,this.handleStateChange.bind(this))}handleOptionsChange(e){e&&e.detail&&this.updateOptions(e.detail)}updateOptions(e){this.preventDefault=e.preventDefault??this.preventDefault,this.stopPropagation=e.stopPropagation??this.stopPropagation,this.preventIf=e.preventIf??this.preventIf,this.requiredKeys=e.requiredKeys??this.requiredKeys,this.pointerMode=e.pointerMode??this.pointerMode}handleStateChange(e){e&&e.detail&&this.updateState(e.detail)}updateState(e){Object.assign(this.state,e)}getTargetElement(e){return this.isActive||this.element===e.target||"contains"in this.element&&this.element.contains(e.target)||"getRootNode"in this.element&&this.element.getRootNode()instanceof ShadowRoot&&e.composedPath().includes(this.element)?this.element:null}set isActive(e){e?this.gesturesRegistry.registerActiveGesture(this.element,this):this.gesturesRegistry.unregisterActiveGesture(this.element,this)}get isActive(){return this.gesturesRegistry.isGestureActive(this.element,this)??!1}shouldPreventGesture(e){if(!this.keyboardManager.areKeysPressed(this.requiredKeys))return!0;if(this.preventIf.length===0)return!1;const t=this.gesturesRegistry.getActiveGestures(e);return this.preventIf.some(r=>t[r])}isPointerTypeAllowed(e){return!this.pointerMode||this.pointerMode.length===0?!0:this.pointerMode.includes(e)}destroy(){const e=`${this.name}ChangeOptions`;this.element.removeEventListener(e,this.handleOptionsChange.bind(this));const t=`${this.name}ChangeState`;this.element.removeEventListener(t,this.handleStateChange.bind(this))}}class QJ{constructor(){this.activeGestures=new Map}registerActiveGesture(e,t){this.activeGestures.has(e)||this.activeGestures.set(e,new Set);const r=this.activeGestures.get(e),i={gesture:t,element:e};r.add(i)}unregisterActiveGesture(e,t){const r=this.activeGestures.get(e);r&&(r.forEach(i=>{i.gesture===t&&r.delete(i)}),r.size===0&&this.activeGestures.delete(e))}getActiveGestures(e){const t=this.activeGestures.get(e);return t?Array.from(t).reduce((r,i)=>(r[i.gesture.name]=!0,r),{}):{}}isGestureActive(e,t){const r=this.activeGestures.get(e);return r?Array.from(r).some(i=>i.gesture===t):!1}destroy(){this.activeGestures.clear()}unregisterElement(e){this.activeGestures.delete(e)}}class ZJ{constructor(){this.pressedKeys=new Set,this.handleKeyDown=e=>{this.pressedKeys.add(e.key)},this.handleKeyUp=e=>{this.pressedKeys.delete(e.key)},this.clearKeys=()=>{this.pressedKeys.clear()},this.initialize()}initialize(){typeof window>"u"||(window.addEventListener("keydown",this.handleKeyDown),window.addEventListener("keyup",this.handleKeyUp),window.addEventListener("blur",this.clearKeys))}areKeysPressed(e){return!e||e.length===0?!0:e.every(t=>t==="ControlOrMeta"?this.pressedKeys.has("Control")||this.pressedKeys.has("Meta"):this.pressedKeys.has(t))}destroy(){typeof window<"u"&&(window.removeEventListener("keydown",this.handleKeyDown),window.removeEventListener("keyup",this.handleKeyUp),window.removeEventListener("blur",this.clearKeys)),this.clearKeys()}}class JJ{constructor(e){this.root=void 0,this.touchAction=void 0,this.passive=void 0,this.preventEventInterruption=!0,this.pointers=new Map,this.gestureHandlers=new Set,this.handleInterruptEvents=t=>{if(this.preventEventInterruption&&"pointerType"in t&&t.pointerType==="touch"){t.preventDefault();return}const r=new PointerEvent("forceCancel",{bubbles:!1,cancelable:!1}),i=this.pointers.values().next().value;if(this.pointers.size>0&&i){Object.defineProperties(r,{clientX:{value:i.clientX},clientY:{value:i.clientY},pointerId:{value:i.pointerId},pointerType:{value:i.pointerType}});for(const[a,s]of this.pointers.entries()){const o=H({},s,{type:"forceCancel"});this.pointers.set(a,o)}}this.notifyHandlers(r),this.pointers.clear()},this.handlePointerEvent=t=>{const{type:r,pointerId:i}=t;if(r==="pointerdown"||r==="pointermove")this.pointers.set(i,this.createPointerData(t));else if(r==="pointerup"||r==="pointercancel"||r==="forceCancel"){this.pointers.set(i,this.createPointerData(t)),this.notifyHandlers(t),this.pointers.delete(i);return}this.notifyHandlers(t)},this.root=e.root??document.getRootNode({composed:!0}),this.touchAction=e.touchAction||"auto",this.passive=e.passive??!1,this.preventEventInterruption=e.preventEventInterruption??!1,this.setupEventListeners()}registerGestureHandler(e){return this.gestureHandlers.add(e),()=>{this.gestureHandlers.delete(e)}}getPointers(){return new Map(this.pointers)}setupEventListeners(){this.touchAction!=="auto"&&(this.root.style.touchAction=this.touchAction),this.root.addEventListener("pointerdown",this.handlePointerEvent,{passive:this.passive}),this.root.addEventListener("pointermove",this.handlePointerEvent,{passive:this.passive}),this.root.addEventListener("pointerup",this.handlePointerEvent,{passive:this.passive}),this.root.addEventListener("pointercancel",this.handlePointerEvent,{passive:this.passive}),this.root.addEventListener("forceCancel",this.handlePointerEvent,{passive:this.passive}),this.root.addEventListener("blur",this.handleInterruptEvents),this.root.addEventListener("contextmenu",this.handleInterruptEvents)}notifyHandlers(e){this.gestureHandlers.forEach(t=>t(this.pointers,e))}createPointerData(e){return{pointerId:e.pointerId,clientX:e.clientX,clientY:e.clientY,pageX:e.pageX,pageY:e.pageY,target:e.target,timeStamp:e.timeStamp,type:e.type,isPrimary:e.isPrimary,pressure:e.pressure,width:e.width,height:e.height,pointerType:e.pointerType,srcEvent:e}}destroy(){this.root.removeEventListener("pointerdown",this.handlePointerEvent),this.root.removeEventListener("pointermove",this.handlePointerEvent),this.root.removeEventListener("pointerup",this.handlePointerEvent),this.root.removeEventListener("pointercancel",this.handlePointerEvent),this.root.removeEventListener("forceCancel",this.handlePointerEvent),this.root.removeEventListener("blur",this.handleInterruptEvents),this.root.removeEventListener("contextmenu",this.handleInterruptEvents),this.pointers.clear(),this.gestureHandlers.clear()}}class eee{constructor(e){this.gestureTemplates=new Map,this.elementGestureMap=new Map,this.activeGesturesRegistry=new QJ,this.pointerManager=void 0,this.keyboardManager=new ZJ,this.pointerManager=new JJ({root:e.root,touchAction:e.touchAction,passive:e.passive}),e.gestures&&e.gestures.length>0&&e.gestures.forEach(t=>{this.addGestureTemplate(t)})}addGestureTemplate(e){this.gestureTemplates.has(e.name)&&console.warn(`Gesture template with name "${e.name}" already exists. It will be overwritten.`),this.gestureTemplates.set(e.name,e)}setGestureOptions(e,t,r){const i=this.elementGestureMap.get(t);if(!i||!i.has(e)){console.error(`Gesture "${e}" not found on the provided element.`);return}const a=new CustomEvent(`${e}ChangeOptions`,{detail:r,bubbles:!1,cancelable:!1,composed:!1});t.dispatchEvent(a)}setGestureState(e,t,r){const i=this.elementGestureMap.get(t);if(!i||!i.has(e)){console.error(`Gesture "${e}" not found on the provided element.`);return}const a=new CustomEvent(`${e}ChangeState`,{detail:r,bubbles:!1,cancelable:!1,composed:!1});t.dispatchEvent(a)}registerElement(e,t,r){return Array.isArray(e)||(e=[e]),e.forEach(i=>{const a=r==null?void 0:r[i];this.registerSingleGesture(i,t,a)}),t}registerSingleGesture(e,t,r){const i=this.gestureTemplates.get(e);if(!i)return console.error(`Gesture template "${e}" not found.`),!1;this.elementGestureMap.has(t)||this.elementGestureMap.set(t,new Map);const a=this.elementGestureMap.get(t);a.has(e)&&(console.warn(`Element already has gesture "${e}" registered. It will be replaced.`),this.unregisterElement(e,t));const s=i.clone(r);return s.init(t,this.pointerManager,this.activeGesturesRegistry,this.keyboardManager),a.set(e,s),!0}unregisterElement(e,t){const r=this.elementGestureMap.get(t);return!r||!r.has(e)?!1:(r.get(e).destroy(),r.delete(e),this.activeGesturesRegistry.unregisterElement(t),r.size===0&&this.elementGestureMap.delete(t),!0)}unregisterAllGestures(e){const t=this.elementGestureMap.get(e);if(t){for(const[,r]of t)r.destroy(),this.activeGesturesRegistry.unregisterElement(e);this.elementGestureMap.delete(e)}}destroy(){for(const[e]of this.elementGestureMap)this.unregisterAllGestures(e);this.gestureTemplates.clear(),this.elementGestureMap.clear(),this.activeGesturesRegistry.destroy(),this.keyboardManager.destroy(),this.pointerManager.destroy()}}class G0 extends EP{constructor(e){super(e),this.unregisterHandler=null,this.originalTarget=null,this.optionsType=void 0,this.mutableOptionsType=void 0,this.minPointers=void 0,this.maxPointers=void 0,this.minPointers=e.minPointers??1,this.maxPointers=e.maxPointers??1/0}init(e,t,r,i){super.init(e,t,r,i),this.unregisterHandler=this.pointerManager.registerGestureHandler(this.handlePointerEvent.bind(this))}updateOptions(e){super.updateOptions(e),this.minPointers=e.minPointers??this.minPointers,this.maxPointers=e.maxPointers??this.maxPointers}getRelevantPointers(e,t){return e.filter(r=>this.isPointerTypeAllowed(r.pointerType)&&(t===r.target||r.target===this.originalTarget||t===this.originalTarget||"contains"in t&&t.contains(r.target))||"getRootNode"in t&&t.getRootNode()instanceof ShadowRoot&&r.srcEvent.composedPath().includes(t))}destroy(){this.unregisterHandler&&(this.unregisterHandler(),this.unregisterHandler=null),super.destroy()}}function tee(n,e){const t=e.x-n.x,r=e.y-n.y;return Math.sqrt(t*t+r*r)}function Kx(n){if(n.length<2)return 0;let e=0,t=0;for(let r=0;r<n.length;r+=1)for(let i=r+1;i<n.length;i+=1)e+=tee({x:n[r].clientX,y:n[r].clientY},{x:n[i].clientX,y:n[i].clientY}),t+=1;return t>0?e/t:0}function Ao(n){if(n.length===0)return{x:0,y:0};const e=n.reduce((t,r)=>(t.x+=r.clientX,t.y+=r.clientY,t),{x:0,y:0});return{x:e.x/n.length,y:e.y/n.length}}function ff(n,e){return`${n}${e==="ongoing"?"":e.charAt(0).toUpperCase()+e.slice(1)}`}const Hg=1e-5,ul=1e-5,SD=.15;function nee(n,e){const t=e.x-n.x,r=e.y-n.y,i={vertical:null,horizontal:null,mainAxis:null},a=ree(e,n),s=Math.abs(t)>Math.abs(r)?"horizontal":"vertical",o=a||s==="horizontal"?Hg:SD,c=a?Hg:s==="horizontal"?SD:Hg;return Math.abs(t)>o&&(i.horizontal=t>0?"right":"left"),Math.abs(r)>c&&(i.vertical=r>0?"down":"up"),i.mainAxis=a?"diagonal":s,i}function ree(n,e){const t=e.x-n.x,r=e.y-n.y,i=Math.atan2(r,t)*180/Math.PI;return i>=-45+ul&&i<=-22.5+ul||i>=22.5+ul&&i<=45+ul||i>=135+ul&&i<=157.5+ul||i>=-157.5+ul&&i<=-135+ul}function iee(n,e){if(!n.vertical&&!n.horizontal)return!1;if(e.length===0)return!0;const t=n.vertical===null||e.includes(n.vertical),r=n.horizontal===null||e.includes(n.horizontal);return t&&r}const TD=0,aee=n=>n>TD?1:n<-TD?-1:0;class xb extends G0{constructor(e){super(e),this.state={lastPosition:null},this.isSinglePhase=void 0,this.eventType=void 0,this.optionsType=void 0,this.mutableOptionsType=void 0,this.mutableStateType=void 0,this.threshold=void 0,this.handleElementEnterBound=void 0,this.handleElementLeaveBound=void 0,this.handleElementEnterBound=this.handleElementEnter.bind(this),this.handleElementLeaveBound=this.handleElementLeave.bind(this),this.threshold=e.threshold||0}clone(e){return new xb(H({name:this.name,preventDefault:this.preventDefault,stopPropagation:this.stopPropagation,threshold:this.threshold,minPointers:this.minPointers,maxPointers:this.maxPointers,requiredKeys:[...this.requiredKeys],pointerMode:[...this.pointerMode],preventIf:[...this.preventIf]},e))}init(e,t,r,i){super.init(e,t,r,i),this.element.addEventListener("pointerenter",this.handleElementEnterBound),this.element.addEventListener("pointerleave",this.handleElementLeaveBound)}destroy(){this.element.removeEventListener("pointerenter",this.handleElementEnterBound),this.element.removeEventListener("pointerleave",this.handleElementLeaveBound),this.resetState(),super.destroy()}updateOptions(e){super.updateOptions(e)}resetState(){this.isActive=!1,this.state={lastPosition:null}}handleElementEnter(e){if(e.pointerType!=="mouse"&&e.pointerType!=="pen")return;const t=this.pointerManager.getPointers()||new Map,r=Array.from(t.values());if(r.length>=this.minPointers&&r.length<=this.maxPointers){this.isActive=!0;const i={x:e.clientX,y:e.clientY};this.state.lastPosition=i,this.emitMoveEvent(this.element,"start",r,e),this.emitMoveEvent(this.element,"ongoing",r,e)}}handleElementLeave(e){if(e.pointerType!=="mouse"&&e.pointerType!=="pen"||!this.isActive)return;const t=this.pointerManager.getPointers()||new Map,r=Array.from(t.values());this.emitMoveEvent(this.element,"end",r,e),this.resetState()}handlePointerEvent(e,t){if(t.type!=="pointermove"||t.pointerType!=="mouse"&&t.pointerType!=="pen")return;this.preventDefault&&t.preventDefault(),this.stopPropagation&&t.stopPropagation();const r=Array.from(e.values()),i=this.getTargetElement(t);if(!i||r.length<this.minPointers||r.length>this.maxPointers)return;if(this.shouldPreventGesture(i)){if(!this.isActive)return;this.resetState(),this.emitMoveEvent(i,"end",r,t);return}const a={x:t.clientX,y:t.clientY};this.state.lastPosition=a,this.isActive||(this.isActive=!0,this.emitMoveEvent(i,"start",r,t)),this.emitMoveEvent(i,"ongoing",r,t)}emitMoveEvent(e,t,r,i){const a=this.state.lastPosition||Ao(r),s=this.gesturesRegistry.getActiveGestures(e),o={gestureName:this.name,centroid:a,target:i.target,srcEvent:i,phase:t,pointers:r,timeStamp:i.timeStamp,activeGestures:s,customData:this.customData},c=ff(this.name,t),d=new CustomEvent(c,{bubbles:!0,cancelable:!0,composed:!0,detail:o});e.dispatchEvent(d)}}class wb extends G0{constructor(e){super(e),this.state={startPointers:new Map,startCentroid:null,lastCentroid:null,movementThresholdReached:!1,totalDeltaX:0,totalDeltaY:0,activeDeltaX:0,activeDeltaY:0,lastDirection:{vertical:null,horizontal:null,mainAxis:null},lastDeltas:null},this.isSinglePhase=void 0,this.eventType=void 0,this.optionsType=void 0,this.mutableOptionsType=void 0,this.mutableStateType=void 0,this.threshold=void 0,this.direction=void 0,this.direction=e.direction||["up","down","left","right"],this.threshold=e.threshold||0}clone(e){return new wb(H({name:this.name,preventDefault:this.preventDefault,stopPropagation:this.stopPropagation,threshold:this.threshold,minPointers:this.minPointers,maxPointers:this.maxPointers,direction:[...this.direction],requiredKeys:[...this.requiredKeys],pointerMode:[...this.pointerMode],preventIf:[...this.preventIf]},e))}destroy(){this.resetState(),super.destroy()}updateOptions(e){super.updateOptions(e),this.direction=e.direction||this.direction}resetState(){this.isActive=!1,this.state=H({},this.state,{startPointers:new Map,startCentroid:null,lastCentroid:null,lastDeltas:null,activeDeltaX:0,activeDeltaY:0,movementThresholdReached:!1,lastDirection:{vertical:null,horizontal:null,mainAxis:null}})}handlePointerEvent(e,t){const r=Array.from(e.values());if(t.type==="forceCancel"){this.cancel(t.target,r,t);return}const i=this.getTargetElement(t);if(!i)return;if(this.shouldPreventGesture(i)){this.cancel(i,r,t);return}const a=this.getRelevantPointers(r,i);if(a.length<this.minPointers||a.length>this.maxPointers){this.cancel(i,a,t);return}switch(t.type){case"pointerdown":!this.isActive&&!this.state.startCentroid&&(a.forEach(s=>{this.state.startPointers.set(s.pointerId,s)}),this.originalTarget=i,this.state.startCentroid=Ao(a),this.state.lastCentroid=H({},this.state.startCentroid));break;case"pointermove":if(this.state.startCentroid&&a.length>=this.minPointers){const s=Ao(a),o=s.x-this.state.startCentroid.x,c=s.y-this.state.startCentroid.y,d=Math.sqrt(o*o+c*c),f=nee(this.state.lastCentroid??this.state.startCentroid,s),p=this.state.lastCentroid?s.x-this.state.lastCentroid.x:0,g=this.state.lastCentroid?s.y-this.state.lastCentroid.y:0;!this.state.movementThresholdReached&&d>=this.threshold&&iee(f,this.direction)?(this.state.movementThresholdReached=!0,this.isActive=!0,this.state.lastDeltas={x:p,y:g},this.state.totalDeltaX+=p,this.state.totalDeltaY+=g,this.state.activeDeltaX+=p,this.state.activeDeltaY+=g,this.emitPanEvent(i,"start",a,t,s),this.emitPanEvent(i,"ongoing",a,t,s)):this.state.movementThresholdReached&&this.isActive&&(this.state.lastDeltas={x:p,y:g},this.state.totalDeltaX+=p,this.state.totalDeltaY+=g,this.state.activeDeltaX+=p,this.state.activeDeltaY+=g,this.emitPanEvent(i,"ongoing",a,t,s)),this.state.lastCentroid=s,this.state.lastDirection=f}break;case"pointerup":case"pointercancel":case"forceCancel":if(this.isActive&&this.state.movementThresholdReached){if(a.filter(s=>s.type!=="pointerup"&&s.type!=="pointercancel").length<this.minPointers){const s=this.state.lastCentroid||this.state.startCentroid;t.type==="pointercancel"&&this.emitPanEvent(i,"cancel",a,t,s),this.emitPanEvent(i,"end",a,t,s),this.resetState()}}else this.resetState();break}}emitPanEvent(e,t,r,i,a){var E,T;if(!this.state.startCentroid)return;const s=((E=this.state.lastDeltas)==null?void 0:E.x)??0,o=((T=this.state.lastDeltas)==null?void 0:T.y)??0,c=this.state.startPointers.values().next().value,d=c?(i.timeStamp-c.timeStamp)/1e3:0,f=d>0?s/d:0,p=d>0?o/d:0,g=Math.sqrt(f*f+p*p),y=this.gesturesRegistry.getActiveGestures(e),v={gestureName:this.name,initialCentroid:this.state.startCentroid,centroid:a,target:i.target,srcEvent:i,phase:t,pointers:r,timeStamp:i.timeStamp,deltaX:s,deltaY:o,direction:this.state.lastDirection,velocityX:f,velocityY:p,velocity:g,totalDeltaX:this.state.totalDeltaX,totalDeltaY:this.state.totalDeltaY,activeDeltaX:this.state.activeDeltaX,activeDeltaY:this.state.activeDeltaY,activeGestures:y,customData:this.customData},b=ff(this.name,t),A=new CustomEvent(b,{bubbles:!0,cancelable:!0,composed:!0,detail:v});e.dispatchEvent(A),this.preventDefault&&i.preventDefault(),this.stopPropagation&&i.stopPropagation()}cancel(e,t,r){if(this.isActive){const i=e??this.element;this.emitPanEvent(i,"cancel",t,r,this.state.lastCentroid),this.emitPanEvent(i,"end",t,r,this.state.lastCentroid)}this.resetState()}}class _b extends G0{constructor(e){super(H({},e,{minPointers:e.minPointers??2})),this.state={startDistance:0,lastDistance:0,lastScale:1,lastTime:0,velocity:0,totalScale:1,deltaScale:0},this.isSinglePhase=void 0,this.eventType=void 0,this.optionsType=void 0,this.mutableOptionsType=void 0,this.mutableStateType=void 0,this.threshold=void 0,this.threshold=e.threshold??0}clone(e){return new _b(H({name:this.name,preventDefault:this.preventDefault,stopPropagation:this.stopPropagation,threshold:this.threshold,minPointers:this.minPointers,maxPointers:this.maxPointers,requiredKeys:[...this.requiredKeys],pointerMode:[...this.pointerMode],preventIf:[...this.preventIf]},e))}destroy(){this.resetState(),super.destroy()}updateOptions(e){super.updateOptions(e)}resetState(){this.isActive=!1,this.state=H({},this.state,{startDistance:0,lastDistance:0,lastScale:1,lastTime:0,velocity:0,deltaScale:0})}handlePointerEvent(e,t){const r=Array.from(e.values()),i=this.getTargetElement(t);if(!i)return;if(this.shouldPreventGesture(i)){this.isActive&&(this.emitPinchEvent(i,"cancel",r,t),this.resetState());return}const a=this.getRelevantPointers(r,i);switch(t.type){case"pointerdown":if(a.length>=2&&!this.isActive){const s=Kx(a);this.state.startDistance=s,this.state.lastDistance=s,this.state.lastTime=t.timeStamp,this.originalTarget=i}break;case"pointermove":if(this.state.startDistance&&a.length>=this.minPointers){const s=Kx(a),o=Math.abs(s-this.state.lastDistance);if(o!==0&&o>=this.threshold){const c=this.state.startDistance?s/this.state.startDistance:1,d=c/this.state.lastScale;this.state.totalScale*=d;const f=(t.timeStamp-this.state.lastTime)/1e3;if(this.state.lastDistance){const g=(s-this.state.lastDistance)/f;this.state.velocity=Number.isNaN(g)?0:g}this.state.lastDistance=s,this.state.deltaScale=c-this.state.lastScale,this.state.lastScale=c,this.state.lastTime=t.timeStamp,this.isActive?this.emitPinchEvent(i,"ongoing",a,t):(this.isActive=!0,this.emitPinchEvent(i,"start",a,t),this.emitPinchEvent(i,"ongoing",a,t))}}break;case"pointerup":case"pointercancel":case"forceCancel":if(this.isActive){const s=a.filter(o=>o.type!=="pointerup"&&o.type!=="pointercancel");if(s.length<this.minPointers)t.type==="pointercancel"&&this.emitPinchEvent(i,"cancel",a,t),this.emitPinchEvent(i,"end",a,t),this.resetState();else if(s.length>=2){const o=Kx(s);this.state.startDistance=o/this.state.lastScale}}break}}emitPinchEvent(e,t,r,i){const a=Ao(r),s=this.state.lastDistance,o=this.state.lastScale,c=this.gesturesRegistry.getActiveGestures(e),d={gestureName:this.name,centroid:a,target:i.target,srcEvent:i,phase:t,pointers:r,timeStamp:i.timeStamp,scale:o,deltaScale:this.state.deltaScale,totalScale:this.state.totalScale,distance:s,velocity:this.state.velocity,activeGestures:c,direction:aee(this.state.velocity),customData:this.customData};this.preventDefault&&i.preventDefault(),this.stopPropagation&&i.stopPropagation();const f=ff(this.name,t),p=new CustomEvent(f,{bubbles:!0,cancelable:!0,composed:!0,detail:d});e.dispatchEvent(p)}}class bb extends G0{constructor(e){super(e),this.state={startCentroid:null,lastPosition:null,timerId:null,startTime:0,pressThresholdReached:!1},this.isSinglePhase=void 0,this.eventType=void 0,this.optionsType=void 0,this.mutableOptionsType=void 0,this.mutableStateType=void 0,this.duration=void 0,this.maxDistance=void 0,this.duration=e.duration??500,this.maxDistance=e.maxDistance??10}clone(e){return new bb(H({name:this.name,preventDefault:this.preventDefault,stopPropagation:this.stopPropagation,minPointers:this.minPointers,maxPointers:this.maxPointers,duration:this.duration,maxDistance:this.maxDistance,requiredKeys:[...this.requiredKeys],pointerMode:[...this.pointerMode],preventIf:[...this.preventIf]},e))}destroy(){this.clearPressTimer(),this.resetState(),super.destroy()}updateOptions(e){super.updateOptions(e),this.duration=e.duration??this.duration,this.maxDistance=e.maxDistance??this.maxDistance}resetState(){this.clearPressTimer(),this.isActive=!1,this.state=H({},this.state,{startCentroid:null,lastPosition:null,timerId:null,startTime:0,pressThresholdReached:!1})}clearPressTimer(){this.state.timerId!==null&&(clearTimeout(this.state.timerId),this.state.timerId=null)}handlePointerEvent(e,t){const r=Array.from(e.values());if(t.type==="forceCancel"){this.cancelPress(t.target,r,t);return}const i=this.getTargetElement(t);if(!i)return;if(this.shouldPreventGesture(i)){this.isActive&&this.cancelPress(i,r,t);return}const a=this.getRelevantPointers(r,i);if(a.length<this.minPointers||a.length>this.maxPointers){this.isActive&&this.cancelPress(i,a,t);return}switch(t.type){case"pointerdown":!this.isActive&&!this.state.startCentroid&&(this.state.startCentroid=Ao(a),this.state.lastPosition=H({},this.state.startCentroid),this.state.startTime=t.timeStamp,this.isActive=!0,this.originalTarget=i,this.clearPressTimer(),this.state.timerId=setTimeout(()=>{if(this.isActive&&this.state.startCentroid){this.state.pressThresholdReached=!0;const s=this.state.lastPosition;this.emitPressEvent(i,"start",a,t,s),this.emitPressEvent(i,"ongoing",a,t,s)}},this.duration));break;case"pointermove":if(this.isActive&&this.state.startCentroid){const s=Ao(a);this.state.lastPosition=s;const o=s.x-this.state.startCentroid.x,c=s.y-this.state.startCentroid.y;Math.sqrt(o*o+c*c)>this.maxDistance&&this.cancelPress(i,a,t)}break;case"pointerup":if(this.isActive){if(this.state.pressThresholdReached){const s=this.state.lastPosition||this.state.startCentroid;this.emitPressEvent(i,"end",a,t,s)}this.resetState()}break;case"pointercancel":case"forceCancel":this.cancelPress(i,a,t);break}}emitPressEvent(e,t,r,i,a){const s=this.gesturesRegistry.getActiveGestures(e),o=i.timeStamp-this.state.startTime,c={gestureName:this.name,centroid:a,target:i.target,srcEvent:i,phase:t,pointers:r,timeStamp:i.timeStamp,x:a.x,y:a.y,duration:o,activeGestures:s,customData:this.customData},d=ff(this.name,t),f=new CustomEvent(d,{bubbles:!0,cancelable:!0,composed:!0,detail:c});e.dispatchEvent(f),this.preventDefault&&i.preventDefault(),this.stopPropagation&&i.stopPropagation()}cancelPress(e,t,r){if(this.isActive&&this.state.pressThresholdReached){const i=this.state.lastPosition||this.state.startCentroid;this.emitPressEvent(e??this.element,"cancel",t,r,i),this.emitPressEvent(e??this.element,"end",t,r,i)}this.resetState()}}class Ab extends G0{constructor(e){super(e),this.state={startCentroid:null,currentTapCount:0,lastTapTime:0,lastPosition:null},this.isSinglePhase=void 0,this.eventType=void 0,this.optionsType=void 0,this.mutableOptionsType=void 0,this.mutableStateType=void 0,this.maxDistance=void 0,this.taps=void 0,this.maxDistance=e.maxDistance??10,this.taps=e.taps??1}clone(e){return new Ab(H({name:this.name,preventDefault:this.preventDefault,stopPropagation:this.stopPropagation,minPointers:this.minPointers,maxPointers:this.maxPointers,maxDistance:this.maxDistance,taps:this.taps,requiredKeys:[...this.requiredKeys],pointerMode:[...this.pointerMode],preventIf:[...this.preventIf]},e))}destroy(){this.resetState(),super.destroy()}updateOptions(e){super.updateOptions(e),this.maxDistance=e.maxDistance??this.maxDistance,this.taps=e.taps??this.taps}resetState(){this.isActive=!1,this.state={startCentroid:null,currentTapCount:0,lastTapTime:0,lastPosition:null}}handlePointerEvent(e,t){const r=Array.from(e.values()),i=this.getTargetElement(t);if(!i)return;const a=this.getRelevantPointers(r,i);if(this.shouldPreventGesture(i)||a.length<this.minPointers||a.length>this.maxPointers){this.isActive&&this.cancelTap(i,a,t);return}switch(t.type){case"pointerdown":this.isActive||(this.state.startCentroid=Ao(a),this.state.lastPosition=H({},this.state.startCentroid),this.isActive=!0,this.originalTarget=i);break;case"pointermove":if(this.isActive&&this.state.startCentroid){const s=Ao(a);this.state.lastPosition=s;const o=s.x-this.state.startCentroid.x,c=s.y-this.state.startCentroid.y;Math.sqrt(o*o+c*c)>this.maxDistance&&this.cancelTap(i,a,t)}break;case"pointerup":if(this.isActive){this.state.currentTapCount+=1;const s=this.state.lastPosition||this.state.startCentroid;if(!s){this.cancelTap(i,a,t);return}this.state.currentTapCount>=this.taps?(this.fireTapEvent(i,a,t,s),this.resetState()):(this.state.lastTapTime=t.timeStamp,this.isActive=!1,this.state.startCentroid=null,setTimeout(()=>{this.state&&this.state.currentTapCount>0&&this.state.currentTapCount<this.taps&&(this.state.currentTapCount=0)},300))}break;case"pointercancel":case"forceCancel":this.cancelTap(i,a,t);break}}fireTapEvent(e,t,r,i){const a=this.gesturesRegistry.getActiveGestures(e),s={gestureName:this.name,centroid:i,target:r.target,srcEvent:r,phase:"end",pointers:t,timeStamp:r.timeStamp,x:i.x,y:i.y,tapCount:this.state.currentTapCount,activeGestures:a,customData:this.customData},o=new CustomEvent(this.name,{bubbles:!0,cancelable:!0,composed:!0,detail:s});e.dispatchEvent(o),this.preventDefault&&r.preventDefault(),this.stopPropagation&&r.stopPropagation()}cancelTap(e,t,r){if(this.state.startCentroid||this.state.lastPosition){const i=this.state.lastPosition||this.state.startCentroid,a=this.gesturesRegistry.getActiveGestures(e),s={gestureName:this.name,centroid:i,target:r.target,srcEvent:r,phase:"cancel",pointers:t,timeStamp:r.timeStamp,x:i.x,y:i.y,tapCount:this.state.currentTapCount,activeGestures:a,customData:this.customData},o=ff(this.name,"cancel"),c=new CustomEvent(o,{bubbles:!0,cancelable:!0,composed:!0,detail:s});e.dispatchEvent(c)}this.resetState()}}class Eb extends EP{constructor(e){super(e),this.state={totalDeltaX:0,totalDeltaY:0,totalDeltaZ:0},this.isSinglePhase=void 0,this.eventType=void 0,this.optionsType=void 0,this.mutableOptionsType=void 0,this.mutableStateType=void 0,this.sensitivity=void 0,this.max=void 0,this.min=void 0,this.initialDelta=void 0,this.invert=void 0,this.handleWheelEventBound=void 0,this.sensitivity=e.sensitivity??1,this.max=e.max??Number.MAX_SAFE_INTEGER,this.min=e.min??Number.MIN_SAFE_INTEGER,this.initialDelta=e.initialDelta??0,this.invert=e.invert??!1,this.state.totalDeltaX=this.initialDelta,this.state.totalDeltaY=this.initialDelta,this.state.totalDeltaZ=this.initialDelta,this.handleWheelEventBound=this.handleWheelEvent.bind(this)}clone(e){return new Eb(H({name:this.name,preventDefault:this.preventDefault,stopPropagation:this.stopPropagation,sensitivity:this.sensitivity,max:this.max,min:this.min,initialDelta:this.initialDelta,invert:this.invert,requiredKeys:[...this.requiredKeys],pointerMode:[...this.pointerMode],preventIf:[...this.preventIf]},e))}init(e,t,r,i){super.init(e,t,r,i),this.element.addEventListener("wheel",this.handleWheelEventBound)}destroy(){this.element.removeEventListener("wheel",this.handleWheelEventBound),this.resetState(),super.destroy()}resetState(){this.isActive=!1,this.state={totalDeltaX:0,totalDeltaY:0,totalDeltaZ:0}}updateOptions(e){super.updateOptions(e),this.sensitivity=e.sensitivity??this.sensitivity,this.max=e.max??this.max,this.min=e.min??this.min,this.initialDelta=e.initialDelta??this.initialDelta,this.invert=e.invert??this.invert}handleWheelEvent(e){if(this.shouldPreventGesture(this.element))return;const t=this.pointerManager.getPointers()||new Map,r=Array.from(t.values());this.state.totalDeltaX+=e.deltaX*this.sensitivity*(this.invert?-1:1),this.state.totalDeltaY+=e.deltaY*this.sensitivity*(this.invert?-1:1),this.state.totalDeltaZ+=e.deltaZ*this.sensitivity*(this.invert?-1:1),["totalDeltaX","totalDeltaY","totalDeltaZ"].forEach(i=>{this.state[i]<this.min&&(this.state[i]=this.min),this.state[i]>this.max&&(this.state[i]=this.max)}),this.emitWheelEvent(r,e)}emitWheelEvent(e,t){const r=e.length>0?Ao(e):{x:t.clientX,y:t.clientY},i=this.gesturesRegistry.getActiveGestures(this.element),a={gestureName:this.name,centroid:r,target:t.target,srcEvent:t,phase:"ongoing",pointers:e,timeStamp:t.timeStamp,deltaX:t.deltaX*this.sensitivity*(this.invert?-1:1),deltaY:t.deltaY*this.sensitivity*(this.invert?-1:1),deltaZ:t.deltaZ*this.sensitivity*(this.invert?-1:1),deltaMode:t.deltaMode,totalDeltaX:this.state.totalDeltaX,totalDeltaY:this.state.totalDeltaY,totalDeltaZ:this.state.totalDeltaZ,activeGestures:i,customData:this.customData};this.preventDefault&&t.preventDefault(),this.stopPropagation&&t.stopPropagation();const s=ff(this.name,"ongoing"),o=new CustomEvent(s,{bubbles:!0,cancelable:!0,composed:!0,detail:a});this.element.dispatchEvent(o)}}const ed=n=>n.preventDefault(),Sb=({svgRef:n})=>{V.useEffect(()=>{const t=n.current;if(!t)return;const r=new eee({gestures:[new wb({name:"pan",threshold:0,maxPointers:1}),new xb({name:"move",preventIf:["pan","pinch"]}),new _b({name:"pinch",threshold:5,preventIf:["pan"]}),new Eb({name:"turnWheel",sensitivity:.01,initialDelta:1}),new Ab({name:"tap",maxDistance:10,preventIf:["pan","pinch"]}),new bb({name:"quickPress",duration:50,maxDistance:10})]});return r.registerElement(["pan","move","pinch","turnWheel","tap","quickPress"],t),()=>{r.destroy()}},[n]);const e=V.useCallback((t,r,i)=>{const a=n.current;return a==null||a.addEventListener(t,r,i),{cleanup:()=>a==null?void 0:a.removeEventListener(t,r)}},[n]);return V.useEffect(()=>{const t=n.current;return t==null||t.addEventListener("gesturestart",ed),t==null||t.addEventListener("gesturechange",ed),t==null||t.addEventListener("gestureend",ed),()=>{t==null||t.removeEventListener("gesturestart",ed),t==null||t.removeEventListener("gesturechange",ed),t==null||t.removeEventListener("gestureend",ed)}},[n]),{instance:{addInteractionListener:e}}};Sb.params={};Sb.getInitialState=()=>({});const see=[vb,yb,ny,ry,Sb,ty],oee=["apiRef"],lee=n=>{let{plugins:e}=n,t=Ne(n.props,oee);const r={};e.forEach(s=>{Object.assign(r,s.params)});const i={};return Object.keys(t).forEach(s=>{const o=t[s];r[s]&&(i[s]=o)}),e.reduce((s,o)=>o.getDefaultizedParams?o.getDefaultizedParams({params:s}):s,i)};let CD=0;function cee(n,e,t){const r=E0(),i=V.useMemo(()=>[...see,...n],[n]),a=lee({plugins:i,props:e});a.id=a.id??r;const o=V.useRef({}).current,c=dee(e.apiRef),d=V.useRef(null),f=V.useRef(null),p=V.useRef(null);if(p.current==null){CD+=1;const v={cacheKey:{id:CD}};i.forEach(b=>{b.getInitialState&&Object.assign(v,b.getInitialState(a,v,t))}),p.current=new oJ(v)}const g=v=>{const b=v({instance:o,params:a,plugins:i,store:p.current,svgRef:f,chartRootRef:d,seriesConfig:t});b.publicAPI&&Object.assign(c.current,b.publicAPI),b.instance&&Object.assign(o,b.instance)};return i.forEach(g),{contextValue:V.useMemo(()=>({store:p.current,publicAPI:c.current,instance:o,svgRef:f,chartRootRef:d}),[o,c])}}function uee(n){return n.current==null&&(n.current={}),n}function dee(n){const e=V.useRef({});return n?uee(n):e}const SP=V.createContext(null),TP=()=>{},CP=4,IP=20+2*CP,fee=40+2*CP,hee="hover",pee={top:5,bottom:5,left:5,right:5},zg={minStart:0,maxEnd:100,step:5,minSpan:10,maxSpan:100,panning:!0,filterMode:"keep",slider:{enabled:!1,preview:!1,size:IP,showTooltip:hee}},Tb=(n,e,t)=>{var r;if(n)return n===!0?H({axisId:e,axisDirection:t},zg):H({axisId:e,axisDirection:t},zg,n,{slider:H({},zg.slider,{size:((r=n.slider)==null?void 0:r.preview)??zg.slider.preview?fee:IP},n.slider)})};function DP(n,e){const t={top:0,bottom:0,none:0};return(n&&n.length>0?n:[{id:gb,scaleType:"linear"}]).map((a,s)=>{var y;const o=a.dataKey,c=s===0?"bottom":"none",d=a.position??c,f=sJ+(a.label?hP:0),p=a.id??`defaultized-x-axis-${s}`,g=H({offset:t[d]},a,{id:p,position:d,height:a.height??f,zoom:Tb(a.zoom,p,"x")});if(d!=="none"&&(t[d]+=g.height,(y=g.zoom)!=null&&y.slider.enabled&&(t[d]+=g.zoom.slider.size)),o===void 0||a.data!==void 0)return g;if(e===void 0)throw new Error("MUI X Charts: x-axis uses `dataKey` but no `dataset` is provided.");return H({},g,{data:e.map(v=>v[o])})})}function RP(n,e){const t={right:0,left:0,none:0};return(n&&n.length>0?n:[{id:mb,scaleType:"linear"}]).map((a,s)=>{var y;const o=a.dataKey,c=s===0?"left":"none",d=a.position??c,f=aJ+(a.label?hP:0),p=a.id??`defaultized-y-axis-${s}`,g=H({offset:t[d]},a,{id:p,position:d,width:a.width??f,zoom:Tb(a.zoom,p,"y")});if(d!=="none"&&(t[d]+=g.width,(y=g.zoom)!=null&&y.slider.enabled&&(t[d]+=g.zoom.slider.size)),o===void 0||a.data!==void 0)return g;if(e===void 0)throw new Error("MUI X Charts: y-axis uses `dataKey` but no `dataset` is provided.");return H({},g,{data:e.map(v=>v[o])})})}function d1(n,e){return n==null||e==null?NaN:n<e?-1:n>e?1:n>=e?0:NaN}function gee(n,e){return n==null||e==null?NaN:e<n?-1:e>n?1:e>=n?0:NaN}function Cb(n){let e,t,r;n.length!==2?(e=d1,t=(o,c)=>d1(n(o),c),r=(o,c)=>n(o)-c):(e=n===d1||n===gee?n:mee,t=n,r=n);function i(o,c,d=0,f=o.length){if(d<f){if(e(c,c)!==0)return f;do{const p=d+f>>>1;t(o[p],c)<0?d=p+1:f=p}while(d<f)}return d}function a(o,c,d=0,f=o.length){if(d<f){if(e(c,c)!==0)return f;do{const p=d+f>>>1;t(o[p],c)<=0?d=p+1:f=p}while(d<f)}return d}function s(o,c,d=0,f=o.length){const p=i(o,c,d,f-1);return p>d&&r(o[p-1],c)>-r(o[p],c)?p-1:p}return{left:i,center:s,right:a}}function mee(){return 0}function yee(n){return n===null?NaN:+n}const vee=Cb(d1),MP=vee.right;Cb(yee).center;class ID extends Map{constructor(e,t=_ee){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:t}}),e!=null)for(const[r,i]of e)this.set(r,i)}get(e){return super.get(DD(this,e))}has(e){return super.has(DD(this,e))}set(e,t){return super.set(xee(this,e),t)}delete(e){return super.delete(wee(this,e))}}function DD({_intern:n,_key:e},t){const r=e(t);return n.has(r)?n.get(r):t}function xee({_intern:n,_key:e},t){const r=e(t);return n.has(r)?n.get(r):(n.set(r,t),t)}function wee({_intern:n,_key:e},t){const r=e(t);return n.has(r)&&(t=n.get(r),n.delete(r)),t}function _ee(n){return n!==null&&typeof n=="object"?n.valueOf():n}const bee=Math.sqrt(50),Aee=Math.sqrt(10),Eee=Math.sqrt(2);function q1(n,e,t){const r=(e-n)/Math.max(0,t),i=Math.floor(Math.log10(r)),a=r/Math.pow(10,i),s=a>=bee?10:a>=Aee?5:a>=Eee?2:1;let o,c,d;return i<0?(d=Math.pow(10,-i)/s,o=Math.round(n*d),c=Math.round(e*d),o/d<n&&++o,c/d>e&&--c,d=-d):(d=Math.pow(10,i)*s,o=Math.round(n/d),c=Math.round(e/d),o*d<n&&++o,c*d>e&&--c),c<o&&.5<=t&&t<2?q1(n,e,t*2):[o,c,d]}function yw(n,e,t){if(e=+e,n=+n,t=+t,!(t>0))return[];if(n===e)return[n];const r=e<n,[i,a,s]=r?q1(e,n,t):q1(n,e,t);if(!(a>=i))return[];const o=a-i+1,c=new Array(o);if(r)if(s<0)for(let d=0;d<o;++d)c[d]=(a-d)/-s;else for(let d=0;d<o;++d)c[d]=(a-d)*s;else if(s<0)for(let d=0;d<o;++d)c[d]=(i+d)/-s;else for(let d=0;d<o;++d)c[d]=(i+d)*s;return c}function vw(n,e,t){return e=+e,n=+n,t=+t,q1(n,e,t)[2]}function xw(n,e,t){e=+e,n=+n,t=+t;const r=e<n,i=r?vw(e,n,t):vw(n,e,t);return(r?-1:1)*(i<0?1/-i:i)}function See(n,e,t){n=+n,e=+e,t=(i=arguments.length)<2?(e=n,n=0,1):i<3?1:+t;for(var r=-1,i=Math.max(0,Math.ceil((e-n)/t))|0,a=new Array(i);++r<i;)a[r]=n+r*t;return a}function Ro(n,e){switch(arguments.length){case 0:break;case 1:this.range(n);break;default:this.range(e).domain(n);break}return this}function Tee(n,e){switch(arguments.length){case 0:break;case 1:{typeof n=="function"?this.interpolator(n):this.range(n);break}default:{this.domain(n),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const RD=Symbol("implicit");function X1(){var n=new ID,e=[],t=[],r=RD;function i(a){let s=n.get(a);if(s===void 0){if(r!==RD)return r;n.set(a,s=e.push(a)-1)}return t[s%t.length]}return i.domain=function(a){if(!arguments.length)return e.slice();e=[],n=new ID;for(const s of a)n.has(s)||n.set(s,e.push(s)-1);return i},i.range=function(a){return arguments.length?(t=Array.from(a),i):t.slice()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return X1(e,t).unknown(r)},Ro.apply(i,arguments),i}function iy(){var n=X1().unknown(void 0),e=n.domain,t=n.range,r=0,i=1,a,s,o=!1,c=0,d=0,f=.5;delete n.unknown;function p(){var g=e().length,y=i<r,v=y?i:r,b=y?r:i;a=(b-v)/Math.max(1,g-c+d*2),o&&(a=Math.floor(a)),v+=(b-v-a*(g-c))*f,s=a*(1-c),o&&(v=Math.round(v),s=Math.round(s));var A=See(g).map(function(E){return v+a*E});return t(y?A.reverse():A)}return n.domain=function(g){return arguments.length?(e(g),p()):e()},n.range=function(g){return arguments.length?([r,i]=g,r=+r,i=+i,p()):[r,i]},n.rangeRound=function(g){return[r,i]=g,r=+r,i=+i,o=!0,p()},n.bandwidth=function(){return s},n.step=function(){return a},n.round=function(g){return arguments.length?(o=!!g,p()):o},n.padding=function(g){return arguments.length?(c=Math.min(1,d=+g),p()):c},n.paddingInner=function(g){return arguments.length?(c=Math.min(1,g),p()):c},n.paddingOuter=function(g){return arguments.length?(d=+g,p()):d},n.align=function(g){return arguments.length?(f=Math.max(0,Math.min(1,g)),p()):f},n.copy=function(){return iy(e(),[r,i]).round(o).paddingInner(c).paddingOuter(d).align(f)},Ro.apply(p(),arguments)}function OP(n){var e=n.copy;return n.padding=n.paddingOuter,delete n.paddingInner,delete n.paddingOuter,n.copy=function(){return OP(e())},n}function PP(){return OP(iy.apply(null,arguments).paddingInner(1))}function Ib(n,e,t){n.prototype=e.prototype=t,t.constructor=n}function kP(n,e){var t=Object.create(n.prototype);for(var r in e)t[r]=e[r];return t}function W0(){}var v0=.7,K1=1/v0,Od="\\s*([+-]?\\d+)\\s*",x0="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Es="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Cee=/^#([0-9a-f]{3,8})$/,Iee=new RegExp(`^rgb\\(${Od},${Od},${Od}\\)$`),Dee=new RegExp(`^rgb\\(${Es},${Es},${Es}\\)$`),Ree=new RegExp(`^rgba\\(${Od},${Od},${Od},${x0}\\)$`),Mee=new RegExp(`^rgba\\(${Es},${Es},${Es},${x0}\\)$`),Oee=new RegExp(`^hsl\\(${x0},${Es},${Es}\\)$`),Pee=new RegExp(`^hsla\\(${x0},${Es},${Es},${x0}\\)$`),MD={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Ib(W0,w0,{copy(n){return Object.assign(new this.constructor,this,n)},displayable(){return this.rgb().displayable()},hex:OD,formatHex:OD,formatHex8:kee,formatHsl:Nee,formatRgb:PD,toString:PD});function OD(){return this.rgb().formatHex()}function kee(){return this.rgb().formatHex8()}function Nee(){return NP(this).formatHsl()}function PD(){return this.rgb().formatRgb()}function w0(n){var e,t;return n=(n+"").trim().toLowerCase(),(e=Cee.exec(n))?(t=e[1].length,e=parseInt(e[1],16),t===6?kD(e):t===3?new Ni(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):t===8?$g(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):t===4?$g(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=Iee.exec(n))?new Ni(e[1],e[2],e[3],1):(e=Dee.exec(n))?new Ni(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=Ree.exec(n))?$g(e[1],e[2],e[3],e[4]):(e=Mee.exec(n))?$g(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=Oee.exec(n))?BD(e[1],e[2]/100,e[3]/100,1):(e=Pee.exec(n))?BD(e[1],e[2]/100,e[3]/100,e[4]):MD.hasOwnProperty(n)?kD(MD[n]):n==="transparent"?new Ni(NaN,NaN,NaN,0):null}function kD(n){return new Ni(n>>16&255,n>>8&255,n&255,1)}function $g(n,e,t,r){return r<=0&&(n=e=t=NaN),new Ni(n,e,t,r)}function Lee(n){return n instanceof W0||(n=w0(n)),n?(n=n.rgb(),new Ni(n.r,n.g,n.b,n.opacity)):new Ni}function ww(n,e,t,r){return arguments.length===1?Lee(n):new Ni(n,e,t,r??1)}function Ni(n,e,t,r){this.r=+n,this.g=+e,this.b=+t,this.opacity=+r}Ib(Ni,ww,kP(W0,{brighter(n){return n=n==null?K1:Math.pow(K1,n),new Ni(this.r*n,this.g*n,this.b*n,this.opacity)},darker(n){return n=n==null?v0:Math.pow(v0,n),new Ni(this.r*n,this.g*n,this.b*n,this.opacity)},rgb(){return this},clamp(){return new Ni(jc(this.r),jc(this.g),jc(this.b),Q1(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:ND,formatHex:ND,formatHex8:Bee,formatRgb:LD,toString:LD}));function ND(){return`#${Pc(this.r)}${Pc(this.g)}${Pc(this.b)}`}function Bee(){return`#${Pc(this.r)}${Pc(this.g)}${Pc(this.b)}${Pc((isNaN(this.opacity)?1:this.opacity)*255)}`}function LD(){const n=Q1(this.opacity);return`${n===1?"rgb(":"rgba("}${jc(this.r)}, ${jc(this.g)}, ${jc(this.b)}${n===1?")":`, ${n})`}`}function Q1(n){return isNaN(n)?1:Math.max(0,Math.min(1,n))}function jc(n){return Math.max(0,Math.min(255,Math.round(n)||0))}function Pc(n){return n=jc(n),(n<16?"0":"")+n.toString(16)}function BD(n,e,t,r){return r<=0?n=e=t=NaN:t<=0||t>=1?n=e=NaN:e<=0&&(n=NaN),new Va(n,e,t,r)}function NP(n){if(n instanceof Va)return new Va(n.h,n.s,n.l,n.opacity);if(n instanceof W0||(n=w0(n)),!n)return new Va;if(n instanceof Va)return n;n=n.rgb();var e=n.r/255,t=n.g/255,r=n.b/255,i=Math.min(e,t,r),a=Math.max(e,t,r),s=NaN,o=a-i,c=(a+i)/2;return o?(e===a?s=(t-r)/o+(t<r)*6:t===a?s=(r-e)/o+2:s=(e-t)/o+4,o/=c<.5?a+i:2-a-i,s*=60):o=c>0&&c<1?0:s,new Va(s,o,c,n.opacity)}function Vee(n,e,t,r){return arguments.length===1?NP(n):new Va(n,e,t,r??1)}function Va(n,e,t,r){this.h=+n,this.s=+e,this.l=+t,this.opacity=+r}Ib(Va,Vee,kP(W0,{brighter(n){return n=n==null?K1:Math.pow(K1,n),new Va(this.h,this.s,this.l*n,this.opacity)},darker(n){return n=n==null?v0:Math.pow(v0,n),new Va(this.h,this.s,this.l*n,this.opacity)},rgb(){var n=this.h%360+(this.h<0)*360,e=isNaN(n)||isNaN(this.s)?0:this.s,t=this.l,r=t+(t<.5?t:1-t)*e,i=2*t-r;return new Ni(Qx(n>=240?n-240:n+120,i,r),Qx(n,i,r),Qx(n<120?n+240:n-120,i,r),this.opacity)},clamp(){return new Va(VD(this.h),Gg(this.s),Gg(this.l),Q1(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const n=Q1(this.opacity);return`${n===1?"hsl(":"hsla("}${VD(this.h)}, ${Gg(this.s)*100}%, ${Gg(this.l)*100}%${n===1?")":`, ${n})`}`}}));function VD(n){return n=(n||0)%360,n<0?n+360:n}function Gg(n){return Math.max(0,Math.min(1,n||0))}function Qx(n,e,t){return(n<60?e+(t-e)*n/60:n<180?t:n<240?e+(t-e)*(240-n)/60:e)*255}const Db=n=>()=>n;function Fee(n,e){return function(t){return n+t*e}}function jee(n,e,t){return n=Math.pow(n,t),e=Math.pow(e,t)-n,t=1/t,function(r){return Math.pow(n+r*e,t)}}function Uee(n){return(n=+n)==1?LP:function(e,t){return t-e?jee(e,t,n):Db(isNaN(e)?t:e)}}function LP(n,e){var t=e-n;return t?Fee(n,t):Db(isNaN(n)?e:n)}const FD=function n(e){var t=Uee(e);function r(i,a){var s=t((i=ww(i)).r,(a=ww(a)).r),o=t(i.g,a.g),c=t(i.b,a.b),d=LP(i.opacity,a.opacity);return function(f){return i.r=s(f),i.g=o(f),i.b=c(f),i.opacity=d(f),i+""}}return r.gamma=n,r}(1);function Hee(n,e){e||(e=[]);var t=n?Math.min(e.length,n.length):0,r=e.slice(),i;return function(a){for(i=0;i<t;++i)r[i]=n[i]*(1-a)+e[i]*a;return r}}function zee(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function $ee(n,e){var t=e?e.length:0,r=n?Math.min(t,n.length):0,i=new Array(r),a=new Array(t),s;for(s=0;s<r;++s)i[s]=ay(n[s],e[s]);for(;s<t;++s)a[s]=e[s];return function(o){for(s=0;s<r;++s)a[s]=i[s](o);return a}}function Rb(n,e){var t=new Date;return n=+n,e=+e,function(r){return t.setTime(n*(1-r)+e*r),t}}function Qt(n,e){return n=+n,e=+e,function(t){return n*(1-t)+e*t}}function Gee(n,e){var t={},r={},i;(n===null||typeof n!="object")&&(n={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in n?t[i]=ay(n[i],e[i]):r[i]=e[i];return function(a){for(i in t)r[i]=t[i](a);return r}}var _w=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Zx=new RegExp(_w.source,"g");function Wee(n){return function(){return n}}function Yee(n){return function(e){return n(e)+""}}function qee(n,e){var t=_w.lastIndex=Zx.lastIndex=0,r,i,a,s=-1,o=[],c=[];for(n=n+"",e=e+"";(r=_w.exec(n))&&(i=Zx.exec(e));)(a=i.index)>t&&(a=e.slice(t,a),o[s]?o[s]+=a:o[++s]=a),(r=r[0])===(i=i[0])?o[s]?o[s]+=i:o[++s]=i:(o[++s]=null,c.push({i:s,x:Qt(r,i)})),t=Zx.lastIndex;return t<e.length&&(a=e.slice(t),o[s]?o[s]+=a:o[++s]=a),o.length<2?c[0]?Yee(c[0].x):Wee(e):(e=c.length,function(d){for(var f=0,p;f<e;++f)o[(p=c[f]).i]=p.x(d);return o.join("")})}function ay(n,e){var t=typeof e,r;return e==null||t==="boolean"?Db(e):(t==="number"?Qt:t==="string"?(r=w0(e))?(e=r,FD):qee:e instanceof w0?FD:e instanceof Date?Rb:zee(e)?Hee:Array.isArray(e)?$ee:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?Gee:Qt)(n,e)}function BP(n,e){return n=+n,e=+e,function(t){return Math.round(n*(1-t)+e*t)}}function Xee(n){return function(){return n}}function Kee(n){return+n}var jD=[0,1];function ya(n){return n}function bw(n,e){return(e-=n=+n)?function(t){return(t-n)/e}:Xee(isNaN(e)?NaN:.5)}function Qee(n,e){var t;return n>e&&(t=n,n=e,e=t),function(r){return Math.max(n,Math.min(e,r))}}function Zee(n,e,t){var r=n[0],i=n[1],a=e[0],s=e[1];return i<r?(r=bw(i,r),a=t(s,a)):(r=bw(r,i),a=t(a,s)),function(o){return a(r(o))}}function Jee(n,e,t){var r=Math.min(n.length,e.length)-1,i=new Array(r),a=new Array(r),s=-1;for(n[r]<n[0]&&(n=n.slice().reverse(),e=e.slice().reverse());++s<r;)i[s]=bw(n[s],n[s+1]),a[s]=t(e[s],e[s+1]);return function(o){var c=MP(n,o,1,r)-1;return a[c](i[c](o))}}function Y0(n,e){return e.domain(n.domain()).range(n.range()).interpolate(n.interpolate()).clamp(n.clamp()).unknown(n.unknown())}function sy(){var n=jD,e=jD,t=ay,r,i,a,s=ya,o,c,d;function f(){var g=Math.min(n.length,e.length);return s!==ya&&(s=Qee(n[0],n[g-1])),o=g>2?Jee:Zee,c=d=null,p}function p(g){return g==null||isNaN(g=+g)?a:(c||(c=o(n.map(r),e,t)))(r(s(g)))}return p.invert=function(g){return s(i((d||(d=o(e,n.map(r),Qt)))(g)))},p.domain=function(g){return arguments.length?(n=Array.from(g,Kee),f()):n.slice()},p.range=function(g){return arguments.length?(e=Array.from(g),f()):e.slice()},p.rangeRound=function(g){return e=Array.from(g),t=BP,f()},p.clamp=function(g){return arguments.length?(s=g?!0:ya,f()):s!==ya},p.interpolate=function(g){return arguments.length?(t=g,f()):t},p.unknown=function(g){return arguments.length?(a=g,p):a},function(g,y){return r=g,i=y,f()}}function VP(){return sy()(ya,ya)}function ete(n){return Math.abs(n=Math.round(n))>=1e21?n.toLocaleString("en").replace(/,/g,""):n.toString(10)}function Z1(n,e){if((t=(n=e?n.toExponential(e-1):n.toExponential()).indexOf("e"))<0)return null;var t,r=n.slice(0,t);return[r.length>1?r[0]+r.slice(2):r,+n.slice(t+1)]}function Yd(n){return n=Z1(Math.abs(n)),n?n[1]:NaN}function tte(n,e){return function(t,r){for(var i=t.length,a=[],s=0,o=n[0],c=0;i>0&&o>0&&(c+o+1>r&&(o=Math.max(1,r-c)),a.push(t.substring(i-=o,i+o)),!((c+=o+1)>r));)o=n[s=(s+1)%n.length];return a.reverse().join(e)}}function nte(n){return function(e){return e.replace(/[0-9]/g,function(t){return n[+t]})}}var rte=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function _0(n){if(!(e=rte.exec(n)))throw new Error("invalid format: "+n);var e;return new Mb({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}_0.prototype=Mb.prototype;function Mb(n){this.fill=n.fill===void 0?" ":n.fill+"",this.align=n.align===void 0?">":n.align+"",this.sign=n.sign===void 0?"-":n.sign+"",this.symbol=n.symbol===void 0?"":n.symbol+"",this.zero=!!n.zero,this.width=n.width===void 0?void 0:+n.width,this.comma=!!n.comma,this.precision=n.precision===void 0?void 0:+n.precision,this.trim=!!n.trim,this.type=n.type===void 0?"":n.type+""}Mb.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function ite(n){e:for(var e=n.length,t=1,r=-1,i;t<e;++t)switch(n[t]){case".":r=i=t;break;case"0":r===0&&(r=t),i=t;break;default:if(!+n[t])break e;r>0&&(r=0);break}return r>0?n.slice(0,r)+n.slice(i+1):n}var FP;function ate(n,e){var t=Z1(n,e);if(!t)return n+"";var r=t[0],i=t[1],a=i-(FP=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,s=r.length;return a===s?r:a>s?r+new Array(a-s+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+Z1(n,Math.max(0,e+a-1))[0]}function UD(n,e){var t=Z1(n,e);if(!t)return n+"";var r=t[0],i=t[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const HD={"%":(n,e)=>(n*100).toFixed(e),b:n=>Math.round(n).toString(2),c:n=>n+"",d:ete,e:(n,e)=>n.toExponential(e),f:(n,e)=>n.toFixed(e),g:(n,e)=>n.toPrecision(e),o:n=>Math.round(n).toString(8),p:(n,e)=>UD(n*100,e),r:UD,s:ate,X:n=>Math.round(n).toString(16).toUpperCase(),x:n=>Math.round(n).toString(16)};function zD(n){return n}var $D=Array.prototype.map,GD=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function ste(n){var e=n.grouping===void 0||n.thousands===void 0?zD:tte($D.call(n.grouping,Number),n.thousands+""),t=n.currency===void 0?"":n.currency[0]+"",r=n.currency===void 0?"":n.currency[1]+"",i=n.decimal===void 0?".":n.decimal+"",a=n.numerals===void 0?zD:nte($D.call(n.numerals,String)),s=n.percent===void 0?"%":n.percent+"",o=n.minus===void 0?"−":n.minus+"",c=n.nan===void 0?"NaN":n.nan+"";function d(p){p=_0(p);var g=p.fill,y=p.align,v=p.sign,b=p.symbol,A=p.zero,E=p.width,T=p.comma,C=p.precision,D=p.trim,O=p.type;O==="n"?(T=!0,O="g"):HD[O]||(C===void 0&&(C=12),D=!0,O="g"),(A||g==="0"&&y==="=")&&(A=!0,g="0",y="=");var N=b==="$"?t:b==="#"&&/[boxX]/.test(O)?"0"+O.toLowerCase():"",M=b==="$"?r:/[%p]/.test(O)?s:"",R=HD[O],I=/[defgprs%]/.test(O);C=C===void 0?6:/[gprs]/.test(O)?Math.max(1,Math.min(21,C)):Math.max(0,Math.min(20,C));function B(L){var k=N,F=M,q,X,G;if(O==="c")F=R(L)+F,L="";else{L=+L;var Y=L<0||1/L<0;if(L=isNaN(L)?c:R(Math.abs(L),C),D&&(L=ite(L)),Y&&+L==0&&v!=="+"&&(Y=!1),k=(Y?v==="("?v:o:v==="-"||v==="("?"":v)+k,F=(O==="s"?GD[8+FP/3]:"")+F+(Y&&v==="("?")":""),I){for(q=-1,X=L.length;++q<X;)if(G=L.charCodeAt(q),48>G||G>57){F=(G===46?i+L.slice(q+1):L.slice(q))+F,L=L.slice(0,q);break}}}T&&!A&&(L=e(L,1/0));var Q=k.length+L.length+F.length,Z=Q<E?new Array(E-Q+1).join(g):"";switch(T&&A&&(L=e(Z+L,Z.length?E-F.length:1/0),Z=""),y){case"<":L=k+L+F+Z;break;case"=":L=k+Z+L+F;break;case"^":L=Z.slice(0,Q=Z.length>>1)+k+L+F+Z.slice(Q);break;default:L=Z+k+L+F;break}return a(L)}return B.toString=function(){return p+""},B}function f(p,g){var y=d((p=_0(p),p.type="f",p)),v=Math.max(-8,Math.min(8,Math.floor(Yd(g)/3)))*3,b=Math.pow(10,-v),A=GD[8+v/3];return function(E){return y(b*E)+A}}return{format:d,formatPrefix:f}}var Wg,Ob,jP;ote({thousands:",",grouping:[3],currency:["$",""]});function ote(n){return Wg=ste(n),Ob=Wg.format,jP=Wg.formatPrefix,Wg}function lte(n){return Math.max(0,-Yd(Math.abs(n)))}function cte(n,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Yd(e)/3)))*3-Yd(Math.abs(n)))}function ute(n,e){return n=Math.abs(n),e=Math.abs(e)-n,Math.max(0,Yd(e)-Yd(n))+1}function dte(n,e,t,r){var i=xw(n,e,t),a;switch(r=_0(r??",f"),r.type){case"s":{var s=Math.max(Math.abs(n),Math.abs(e));return r.precision==null&&!isNaN(a=cte(i,s))&&(r.precision=a),jP(r,s)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(a=ute(i,Math.max(Math.abs(n),Math.abs(e))))&&(r.precision=a-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(a=lte(i))&&(r.precision=a-(r.type==="%")*2);break}}return Ob(r)}function oy(n){var e=n.domain;return n.ticks=function(t){var r=e();return yw(r[0],r[r.length-1],t??10)},n.tickFormat=function(t,r){var i=e();return dte(i[0],i[i.length-1],t??10,r)},n.nice=function(t){t==null&&(t=10);var r=e(),i=0,a=r.length-1,s=r[i],o=r[a],c,d,f=10;for(o<s&&(d=s,s=o,o=d,d=i,i=a,a=d);f-- >0;){if(d=vw(s,o,t),d===c)return r[i]=s,r[a]=o,e(r);if(d>0)s=Math.floor(s/d)*d,o=Math.ceil(o/d)*d;else if(d<0)s=Math.ceil(s*d)/d,o=Math.floor(o*d)/d;else break;c=d}return n},n}function Pb(){var n=VP();return n.copy=function(){return Y0(n,Pb())},Ro.apply(n,arguments),oy(n)}function UP(n,e){n=n.slice();var t=0,r=n.length-1,i=n[t],a=n[r],s;return a<i&&(s=t,t=r,r=s,s=i,i=a,a=s),n[t]=e.floor(i),n[r]=e.ceil(a),n}function WD(n){return Math.log(n)}function YD(n){return Math.exp(n)}function fte(n){return-Math.log(-n)}function hte(n){return-Math.exp(-n)}function pte(n){return isFinite(n)?+("1e"+n):n<0?0:n}function gte(n){return n===10?pte:n===Math.E?Math.exp:e=>Math.pow(n,e)}function mte(n){return n===Math.E?Math.log:n===10&&Math.log10||n===2&&Math.log2||(n=Math.log(n),e=>Math.log(e)/n)}function qD(n){return(e,t)=>-n(-e,t)}function yte(n){const e=n(WD,YD),t=e.domain;let r=10,i,a;function s(){return i=mte(r),a=gte(r),t()[0]<0?(i=qD(i),a=qD(a),n(fte,hte)):n(WD,YD),e}return e.base=function(o){return arguments.length?(r=+o,s()):r},e.domain=function(o){return arguments.length?(t(o),s()):t()},e.ticks=o=>{const c=t();let d=c[0],f=c[c.length-1];const p=f<d;p&&([d,f]=[f,d]);let g=i(d),y=i(f),v,b;const A=o==null?10:+o;let E=[];if(!(r%1)&&y-g<A){if(g=Math.floor(g),y=Math.ceil(y),d>0){for(;g<=y;++g)for(v=1;v<r;++v)if(b=g<0?v/a(-g):v*a(g),!(b<d)){if(b>f)break;E.push(b)}}else for(;g<=y;++g)for(v=r-1;v>=1;--v)if(b=g>0?v/a(-g):v*a(g),!(b<d)){if(b>f)break;E.push(b)}E.length*2<A&&(E=yw(d,f,A))}else E=yw(g,y,Math.min(y-g,A)).map(a);return p?E.reverse():E},e.tickFormat=(o,c)=>{if(o==null&&(o=10),c==null&&(c=r===10?"s":","),typeof c!="function"&&(!(r%1)&&(c=_0(c)).precision==null&&(c.trim=!0),c=Ob(c)),o===1/0)return c;const d=Math.max(1,r*o/e.ticks().length);return f=>{let p=f/a(Math.round(i(f)));return p*r<r-.5&&(p*=r),p<=d?c(f):""}},e.nice=()=>t(UP(t(),{floor:o=>a(Math.floor(i(o))),ceil:o=>a(Math.ceil(i(o)))})),e}function J1(){const n=yte(sy()).domain([1,10]);return n.copy=()=>Y0(n,J1()).base(n.base()),Ro.apply(n,arguments),n}function XD(n){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/n))}}function KD(n){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*n}}function vte(n){var e=1,t=n(XD(e),KD(e));return t.constant=function(r){return arguments.length?n(XD(e=+r),KD(e)):e},oy(t)}function HP(){var n=vte(sy());return n.copy=function(){return Y0(n,HP()).constant(n.constant())},Ro.apply(n,arguments)}function QD(n){return function(e){return e<0?-Math.pow(-e,n):Math.pow(e,n)}}function xte(n){return n<0?-Math.sqrt(-n):Math.sqrt(n)}function wte(n){return n<0?-n*n:n*n}function _te(n){var e=n(ya,ya),t=1;function r(){return t===1?n(ya,ya):t===.5?n(xte,wte):n(QD(t),QD(1/t))}return e.exponent=function(i){return arguments.length?(t=+i,r()):t},oy(e)}function kb(){var n=_te(sy());return n.copy=function(){return Y0(n,kb()).exponent(n.exponent())},Ro.apply(n,arguments),n}function bte(){return kb.apply(null,arguments).exponent(.5)}function zP(){var n=[.5],e=[0,1],t,r=1;function i(a){return a!=null&&a<=a?e[MP(n,a,0,r)]:t}return i.domain=function(a){return arguments.length?(n=Array.from(a),r=Math.min(n.length,e.length-1),i):n.slice()},i.range=function(a){return arguments.length?(e=Array.from(a),r=Math.min(n.length,e.length-1),i):e.slice()},i.invertExtent=function(a){var s=e.indexOf(a);return[n[s-1],n[s]]},i.unknown=function(a){return arguments.length?(t=a,i):t},i.copy=function(){return zP().domain(n).range(e).unknown(t)},Ro.apply(i,arguments)}const Jx=new Date,e2=new Date;function Dr(n,e,t,r){function i(a){return n(a=arguments.length===0?new Date:new Date(+a)),a}return i.floor=a=>(n(a=new Date(+a)),a),i.ceil=a=>(n(a=new Date(a-1)),e(a,1),n(a),a),i.round=a=>{const s=i(a),o=i.ceil(a);return a-s<o-a?s:o},i.offset=(a,s)=>(e(a=new Date(+a),s==null?1:Math.floor(s)),a),i.range=(a,s,o)=>{const c=[];if(a=i.ceil(a),o=o==null?1:Math.floor(o),!(a<s)||!(o>0))return c;let d;do c.push(d=new Date(+a)),e(a,o),n(a);while(d<a&&a<s);return c},i.filter=a=>Dr(s=>{if(s>=s)for(;n(s),!a(s);)s.setTime(s-1)},(s,o)=>{if(s>=s)if(o<0)for(;++o<=0;)for(;e(s,-1),!a(s););else for(;--o>=0;)for(;e(s,1),!a(s););}),t&&(i.count=(a,s)=>(Jx.setTime(+a),e2.setTime(+s),n(Jx),n(e2),Math.floor(t(Jx,e2))),i.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?i.filter(r?s=>r(s)%a===0:s=>i.count(0,s)%a===0):i)),i}const em=Dr(()=>{},(n,e)=>{n.setTime(+n+e)},(n,e)=>e-n);em.every=n=>(n=Math.floor(n),!isFinite(n)||!(n>0)?null:n>1?Dr(e=>{e.setTime(Math.floor(e/n)*n)},(e,t)=>{e.setTime(+e+t*n)},(e,t)=>(t-e)/n):em);em.range;const ao=1e3,va=ao*60,so=va*60,Eo=so*24,Nb=Eo*7,ZD=Eo*30,t2=Eo*365,kc=Dr(n=>{n.setTime(n-n.getMilliseconds())},(n,e)=>{n.setTime(+n+e*ao)},(n,e)=>(e-n)/ao,n=>n.getUTCSeconds());kc.range;const Lb=Dr(n=>{n.setTime(n-n.getMilliseconds()-n.getSeconds()*ao)},(n,e)=>{n.setTime(+n+e*va)},(n,e)=>(e-n)/va,n=>n.getMinutes());Lb.range;const Bb=Dr(n=>{n.setUTCSeconds(0,0)},(n,e)=>{n.setTime(+n+e*va)},(n,e)=>(e-n)/va,n=>n.getUTCMinutes());Bb.range;const Vb=Dr(n=>{n.setTime(n-n.getMilliseconds()-n.getSeconds()*ao-n.getMinutes()*va)},(n,e)=>{n.setTime(+n+e*so)},(n,e)=>(e-n)/so,n=>n.getHours());Vb.range;const Fb=Dr(n=>{n.setUTCMinutes(0,0,0)},(n,e)=>{n.setTime(+n+e*so)},(n,e)=>(e-n)/so,n=>n.getUTCHours());Fb.range;const q0=Dr(n=>n.setHours(0,0,0,0),(n,e)=>n.setDate(n.getDate()+e),(n,e)=>(e-n-(e.getTimezoneOffset()-n.getTimezoneOffset())*va)/Eo,n=>n.getDate()-1);q0.range;const ly=Dr(n=>{n.setUTCHours(0,0,0,0)},(n,e)=>{n.setUTCDate(n.getUTCDate()+e)},(n,e)=>(e-n)/Eo,n=>n.getUTCDate()-1);ly.range;const $P=Dr(n=>{n.setUTCHours(0,0,0,0)},(n,e)=>{n.setUTCDate(n.getUTCDate()+e)},(n,e)=>(e-n)/Eo,n=>Math.floor(n/Eo));$P.range;function iu(n){return Dr(e=>{e.setDate(e.getDate()-(e.getDay()+7-n)%7),e.setHours(0,0,0,0)},(e,t)=>{e.setDate(e.getDate()+t*7)},(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*va)/Nb)}const cy=iu(0),tm=iu(1),Ate=iu(2),Ete=iu(3),qd=iu(4),Ste=iu(5),Tte=iu(6);cy.range;tm.range;Ate.range;Ete.range;qd.range;Ste.range;Tte.range;function au(n){return Dr(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-n)%7),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t*7)},(e,t)=>(t-e)/Nb)}const uy=au(0),nm=au(1),Cte=au(2),Ite=au(3),Xd=au(4),Dte=au(5),Rte=au(6);uy.range;nm.range;Cte.range;Ite.range;Xd.range;Dte.range;Rte.range;const jb=Dr(n=>{n.setDate(1),n.setHours(0,0,0,0)},(n,e)=>{n.setMonth(n.getMonth()+e)},(n,e)=>e.getMonth()-n.getMonth()+(e.getFullYear()-n.getFullYear())*12,n=>n.getMonth());jb.range;const Ub=Dr(n=>{n.setUTCDate(1),n.setUTCHours(0,0,0,0)},(n,e)=>{n.setUTCMonth(n.getUTCMonth()+e)},(n,e)=>e.getUTCMonth()-n.getUTCMonth()+(e.getUTCFullYear()-n.getUTCFullYear())*12,n=>n.getUTCMonth());Ub.range;const So=Dr(n=>{n.setMonth(0,1),n.setHours(0,0,0,0)},(n,e)=>{n.setFullYear(n.getFullYear()+e)},(n,e)=>e.getFullYear()-n.getFullYear(),n=>n.getFullYear());So.every=n=>!isFinite(n=Math.floor(n))||!(n>0)?null:Dr(e=>{e.setFullYear(Math.floor(e.getFullYear()/n)*n),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t*n)});So.range;const To=Dr(n=>{n.setUTCMonth(0,1),n.setUTCHours(0,0,0,0)},(n,e)=>{n.setUTCFullYear(n.getUTCFullYear()+e)},(n,e)=>e.getUTCFullYear()-n.getUTCFullYear(),n=>n.getUTCFullYear());To.every=n=>!isFinite(n=Math.floor(n))||!(n>0)?null:Dr(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/n)*n),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t*n)});To.range;function GP(n,e,t,r,i,a){const s=[[kc,1,ao],[kc,5,5*ao],[kc,15,15*ao],[kc,30,30*ao],[a,1,va],[a,5,5*va],[a,15,15*va],[a,30,30*va],[i,1,so],[i,3,3*so],[i,6,6*so],[i,12,12*so],[r,1,Eo],[r,2,2*Eo],[t,1,Nb],[e,1,ZD],[e,3,3*ZD],[n,1,t2]];function o(d,f,p){const g=f<d;g&&([d,f]=[f,d]);const y=p&&typeof p.range=="function"?p:c(d,f,p),v=y?y.range(d,+f+1):[];return g?v.reverse():v}function c(d,f,p){const g=Math.abs(f-d)/p,y=Cb(([,,A])=>A).right(s,g);if(y===s.length)return n.every(xw(d/t2,f/t2,p));if(y===0)return em.every(Math.max(xw(d,f,p),1));const[v,b]=s[g/s[y-1][2]<s[y][2]/g?y-1:y];return v.every(b)}return[o,c]}const[Mte,Ote]=GP(To,Ub,uy,$P,Fb,Bb),[Pte,kte]=GP(So,jb,cy,q0,Vb,Lb);function n2(n){if(0<=n.y&&n.y<100){var e=new Date(-1,n.m,n.d,n.H,n.M,n.S,n.L);return e.setFullYear(n.y),e}return new Date(n.y,n.m,n.d,n.H,n.M,n.S,n.L)}function r2(n){if(0<=n.y&&n.y<100){var e=new Date(Date.UTC(-1,n.m,n.d,n.H,n.M,n.S,n.L));return e.setUTCFullYear(n.y),e}return new Date(Date.UTC(n.y,n.m,n.d,n.H,n.M,n.S,n.L))}function Th(n,e,t){return{y:n,m:e,d:t,H:0,M:0,S:0,L:0}}function Nte(n){var e=n.dateTime,t=n.date,r=n.time,i=n.periods,a=n.days,s=n.shortDays,o=n.months,c=n.shortMonths,d=Ch(i),f=Ih(i),p=Ch(a),g=Ih(a),y=Ch(s),v=Ih(s),b=Ch(o),A=Ih(o),E=Ch(c),T=Ih(c),C={a:Y,A:Q,b:Z,B:fe,c:null,d:i3,e:i3,f:ine,g:pne,G:mne,H:tne,I:nne,j:rne,L:WP,m:ane,M:sne,p:ge,q:we,Q:o3,s:l3,S:one,u:lne,U:cne,V:une,w:dne,W:fne,x:null,X:null,y:hne,Y:gne,Z:yne,"%":s3},D={a:Ae,A:Pe,b:Re,B:He,c:null,d:a3,e:a3,f:_ne,g:Mne,G:Pne,H:vne,I:xne,j:wne,L:qP,m:bne,M:Ane,p:Ue,q:Qe,Q:o3,s:l3,S:Ene,u:Sne,U:Tne,V:Cne,w:Ine,W:Dne,x:null,X:null,y:Rne,Y:One,Z:kne,"%":s3},O={a:B,A:L,b:k,B:F,c:q,d:n3,e:n3,f:Qte,g:t3,G:e3,H:r3,I:r3,j:Yte,L:Kte,m:Wte,M:qte,p:I,q:Gte,Q:Jte,s:ene,S:Xte,u:jte,U:Ute,V:Hte,w:Fte,W:zte,x:X,X:G,y:t3,Y:e3,Z:$te,"%":Zte};C.x=N(t,C),C.X=N(r,C),C.c=N(e,C),D.x=N(t,D),D.X=N(r,D),D.c=N(e,D);function N(ae,me){return function(he){var te=[],Le=-1,ve=0,je=ae.length,De,Ce,We;for(he instanceof Date||(he=new Date(+he));++Le<je;)ae.charCodeAt(Le)===37&&(te.push(ae.slice(ve,Le)),(Ce=JD[De=ae.charAt(++Le)])!=null?De=ae.charAt(++Le):Ce=De==="e"?" ":"0",(We=me[De])&&(De=We(he,Ce)),te.push(De),ve=Le+1);return te.push(ae.slice(ve,Le)),te.join("")}}function M(ae,me){return function(he){var te=Th(1900,void 0,1),Le=R(te,ae,he+="",0),ve,je;if(Le!=he.length)return null;if("Q"in te)return new Date(te.Q);if("s"in te)return new Date(te.s*1e3+("L"in te?te.L:0));if(me&&!("Z"in te)&&(te.Z=0),"p"in te&&(te.H=te.H%12+te.p*12),te.m===void 0&&(te.m="q"in te?te.q:0),"V"in te){if(te.V<1||te.V>53)return null;"w"in te||(te.w=1),"Z"in te?(ve=r2(Th(te.y,0,1)),je=ve.getUTCDay(),ve=je>4||je===0?nm.ceil(ve):nm(ve),ve=ly.offset(ve,(te.V-1)*7),te.y=ve.getUTCFullYear(),te.m=ve.getUTCMonth(),te.d=ve.getUTCDate()+(te.w+6)%7):(ve=n2(Th(te.y,0,1)),je=ve.getDay(),ve=je>4||je===0?tm.ceil(ve):tm(ve),ve=q0.offset(ve,(te.V-1)*7),te.y=ve.getFullYear(),te.m=ve.getMonth(),te.d=ve.getDate()+(te.w+6)%7)}else("W"in te||"U"in te)&&("w"in te||(te.w="u"in te?te.u%7:"W"in te?1:0),je="Z"in te?r2(Th(te.y,0,1)).getUTCDay():n2(Th(te.y,0,1)).getDay(),te.m=0,te.d="W"in te?(te.w+6)%7+te.W*7-(je+5)%7:te.w+te.U*7-(je+6)%7);return"Z"in te?(te.H+=te.Z/100|0,te.M+=te.Z%100,r2(te)):n2(te)}}function R(ae,me,he,te){for(var Le=0,ve=me.length,je=he.length,De,Ce;Le<ve;){if(te>=je)return-1;if(De=me.charCodeAt(Le++),De===37){if(De=me.charAt(Le++),Ce=O[De in JD?me.charAt(Le++):De],!Ce||(te=Ce(ae,he,te))<0)return-1}else if(De!=he.charCodeAt(te++))return-1}return te}function I(ae,me,he){var te=d.exec(me.slice(he));return te?(ae.p=f.get(te[0].toLowerCase()),he+te[0].length):-1}function B(ae,me,he){var te=y.exec(me.slice(he));return te?(ae.w=v.get(te[0].toLowerCase()),he+te[0].length):-1}function L(ae,me,he){var te=p.exec(me.slice(he));return te?(ae.w=g.get(te[0].toLowerCase()),he+te[0].length):-1}function k(ae,me,he){var te=E.exec(me.slice(he));return te?(ae.m=T.get(te[0].toLowerCase()),he+te[0].length):-1}function F(ae,me,he){var te=b.exec(me.slice(he));return te?(ae.m=A.get(te[0].toLowerCase()),he+te[0].length):-1}function q(ae,me,he){return R(ae,e,me,he)}function X(ae,me,he){return R(ae,t,me,he)}function G(ae,me,he){return R(ae,r,me,he)}function Y(ae){return s[ae.getDay()]}function Q(ae){return a[ae.getDay()]}function Z(ae){return c[ae.getMonth()]}function fe(ae){return o[ae.getMonth()]}function ge(ae){return i[+(ae.getHours()>=12)]}function we(ae){return 1+~~(ae.getMonth()/3)}function Ae(ae){return s[ae.getUTCDay()]}function Pe(ae){return a[ae.getUTCDay()]}function Re(ae){return c[ae.getUTCMonth()]}function He(ae){return o[ae.getUTCMonth()]}function Ue(ae){return i[+(ae.getUTCHours()>=12)]}function Qe(ae){return 1+~~(ae.getUTCMonth()/3)}return{format:function(ae){var me=N(ae+="",C);return me.toString=function(){return ae},me},parse:function(ae){var me=M(ae+="",!1);return me.toString=function(){return ae},me},utcFormat:function(ae){var me=N(ae+="",D);return me.toString=function(){return ae},me},utcParse:function(ae){var me=M(ae+="",!0);return me.toString=function(){return ae},me}}}var JD={"-":"",_:" ",0:"0"},Ur=/^\s*\d+/,Lte=/^%/,Bte=/[\\^$*+?|[\]().{}]/g;function Gt(n,e,t){var r=n<0?"-":"",i=(r?-n:n)+"",a=i.length;return r+(a<t?new Array(t-a+1).join(e)+i:i)}function Vte(n){return n.replace(Bte,"\\$&")}function Ch(n){return new RegExp("^(?:"+n.map(Vte).join("|")+")","i")}function Ih(n){return new Map(n.map((e,t)=>[e.toLowerCase(),t]))}function Fte(n,e,t){var r=Ur.exec(e.slice(t,t+1));return r?(n.w=+r[0],t+r[0].length):-1}function jte(n,e,t){var r=Ur.exec(e.slice(t,t+1));return r?(n.u=+r[0],t+r[0].length):-1}function Ute(n,e,t){var r=Ur.exec(e.slice(t,t+2));return r?(n.U=+r[0],t+r[0].length):-1}function Hte(n,e,t){var r=Ur.exec(e.slice(t,t+2));return r?(n.V=+r[0],t+r[0].length):-1}function zte(n,e,t){var r=Ur.exec(e.slice(t,t+2));return r?(n.W=+r[0],t+r[0].length):-1}function e3(n,e,t){var r=Ur.exec(e.slice(t,t+4));return r?(n.y=+r[0],t+r[0].length):-1}function t3(n,e,t){var r=Ur.exec(e.slice(t,t+2));return r?(n.y=+r[0]+(+r[0]>68?1900:2e3),t+r[0].length):-1}function $te(n,e,t){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(t,t+6));return r?(n.Z=r[1]?0:-(r[2]+(r[3]||"00")),t+r[0].length):-1}function Gte(n,e,t){var r=Ur.exec(e.slice(t,t+1));return r?(n.q=r[0]*3-3,t+r[0].length):-1}function Wte(n,e,t){var r=Ur.exec(e.slice(t,t+2));return r?(n.m=r[0]-1,t+r[0].length):-1}function n3(n,e,t){var r=Ur.exec(e.slice(t,t+2));return r?(n.d=+r[0],t+r[0].length):-1}function Yte(n,e,t){var r=Ur.exec(e.slice(t,t+3));return r?(n.m=0,n.d=+r[0],t+r[0].length):-1}function r3(n,e,t){var r=Ur.exec(e.slice(t,t+2));return r?(n.H=+r[0],t+r[0].length):-1}function qte(n,e,t){var r=Ur.exec(e.slice(t,t+2));return r?(n.M=+r[0],t+r[0].length):-1}function Xte(n,e,t){var r=Ur.exec(e.slice(t,t+2));return r?(n.S=+r[0],t+r[0].length):-1}function Kte(n,e,t){var r=Ur.exec(e.slice(t,t+3));return r?(n.L=+r[0],t+r[0].length):-1}function Qte(n,e,t){var r=Ur.exec(e.slice(t,t+6));return r?(n.L=Math.floor(r[0]/1e3),t+r[0].length):-1}function Zte(n,e,t){var r=Lte.exec(e.slice(t,t+1));return r?t+r[0].length:-1}function Jte(n,e,t){var r=Ur.exec(e.slice(t));return r?(n.Q=+r[0],t+r[0].length):-1}function ene(n,e,t){var r=Ur.exec(e.slice(t));return r?(n.s=+r[0],t+r[0].length):-1}function i3(n,e){return Gt(n.getDate(),e,2)}function tne(n,e){return Gt(n.getHours(),e,2)}function nne(n,e){return Gt(n.getHours()%12||12,e,2)}function rne(n,e){return Gt(1+q0.count(So(n),n),e,3)}function WP(n,e){return Gt(n.getMilliseconds(),e,3)}function ine(n,e){return WP(n,e)+"000"}function ane(n,e){return Gt(n.getMonth()+1,e,2)}function sne(n,e){return Gt(n.getMinutes(),e,2)}function one(n,e){return Gt(n.getSeconds(),e,2)}function lne(n){var e=n.getDay();return e===0?7:e}function cne(n,e){return Gt(cy.count(So(n)-1,n),e,2)}function YP(n){var e=n.getDay();return e>=4||e===0?qd(n):qd.ceil(n)}function une(n,e){return n=YP(n),Gt(qd.count(So(n),n)+(So(n).getDay()===4),e,2)}function dne(n){return n.getDay()}function fne(n,e){return Gt(tm.count(So(n)-1,n),e,2)}function hne(n,e){return Gt(n.getFullYear()%100,e,2)}function pne(n,e){return n=YP(n),Gt(n.getFullYear()%100,e,2)}function gne(n,e){return Gt(n.getFullYear()%1e4,e,4)}function mne(n,e){var t=n.getDay();return n=t>=4||t===0?qd(n):qd.ceil(n),Gt(n.getFullYear()%1e4,e,4)}function yne(n){var e=n.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+Gt(e/60|0,"0",2)+Gt(e%60,"0",2)}function a3(n,e){return Gt(n.getUTCDate(),e,2)}function vne(n,e){return Gt(n.getUTCHours(),e,2)}function xne(n,e){return Gt(n.getUTCHours()%12||12,e,2)}function wne(n,e){return Gt(1+ly.count(To(n),n),e,3)}function qP(n,e){return Gt(n.getUTCMilliseconds(),e,3)}function _ne(n,e){return qP(n,e)+"000"}function bne(n,e){return Gt(n.getUTCMonth()+1,e,2)}function Ane(n,e){return Gt(n.getUTCMinutes(),e,2)}function Ene(n,e){return Gt(n.getUTCSeconds(),e,2)}function Sne(n){var e=n.getUTCDay();return e===0?7:e}function Tne(n,e){return Gt(uy.count(To(n)-1,n),e,2)}function XP(n){var e=n.getUTCDay();return e>=4||e===0?Xd(n):Xd.ceil(n)}function Cne(n,e){return n=XP(n),Gt(Xd.count(To(n),n)+(To(n).getUTCDay()===4),e,2)}function Ine(n){return n.getUTCDay()}function Dne(n,e){return Gt(nm.count(To(n)-1,n),e,2)}function Rne(n,e){return Gt(n.getUTCFullYear()%100,e,2)}function Mne(n,e){return n=XP(n),Gt(n.getUTCFullYear()%100,e,2)}function One(n,e){return Gt(n.getUTCFullYear()%1e4,e,4)}function Pne(n,e){var t=n.getUTCDay();return n=t>=4||t===0?Xd(n):Xd.ceil(n),Gt(n.getUTCFullYear()%1e4,e,4)}function kne(){return"+0000"}function s3(){return"%"}function o3(n){return+n}function l3(n){return Math.floor(+n/1e3)}var td,KP,QP;Nne({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Nne(n){return td=Nte(n),KP=td.format,td.parse,QP=td.utcFormat,td.utcParse,td}function Lne(n){return new Date(n)}function Bne(n){return n instanceof Date?+n:+new Date(+n)}function Hb(n,e,t,r,i,a,s,o,c,d){var f=VP(),p=f.invert,g=f.domain,y=d(".%L"),v=d(":%S"),b=d("%I:%M"),A=d("%I %p"),E=d("%a %d"),T=d("%b %d"),C=d("%B"),D=d("%Y");function O(N){return(c(N)<N?y:o(N)<N?v:s(N)<N?b:a(N)<N?A:r(N)<N?i(N)<N?E:T:t(N)<N?C:D)(N)}return f.invert=function(N){return new Date(p(N))},f.domain=function(N){return arguments.length?g(Array.from(N,Bne)):g().map(Lne)},f.ticks=function(N){var M=g();return n(M[0],M[M.length-1],N??10)},f.tickFormat=function(N,M){return M==null?O:d(M)},f.nice=function(N){var M=g();return(!N||typeof N.range!="function")&&(N=e(M[0],M[M.length-1],N??10)),N?g(UP(M,N)):f},f.copy=function(){return Y0(f,Hb(n,e,t,r,i,a,s,o,c,d))},f}function ZP(){return Ro.apply(Hb(Pte,kte,So,jb,cy,q0,Vb,Lb,kc,KP).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function Vne(){return Ro.apply(Hb(Mte,Ote,To,Ub,uy,ly,Fb,Bb,kc,QP).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Fne(){var n=0,e=1,t,r,i,a,s=ya,o=!1,c;function d(p){return p==null||isNaN(p=+p)?c:s(i===0?.5:(p=(a(p)-t)*i,o?Math.max(0,Math.min(1,p)):p))}d.domain=function(p){return arguments.length?([n,e]=p,t=a(n=+n),r=a(e=+e),i=t===r?0:1/(r-t),d):[n,e]},d.clamp=function(p){return arguments.length?(o=!!p,d):o},d.interpolator=function(p){return arguments.length?(s=p,d):s};function f(p){return function(g){var y,v;return arguments.length?([y,v]=g,s=p(y,v),d):[s(0),s(1)]}}return d.range=f(ay),d.rangeRound=f(BP),d.unknown=function(p){return arguments.length?(c=p,d):c},function(p){return a=p,t=p(n),r=p(e),i=t===r?0:1/(r-t),d}}function jne(n,e){return e.domain(n.domain()).interpolator(n.interpolator()).clamp(n.clamp()).unknown(n.unknown())}function JP(){var n=oy(Fne()(ya));return n.copy=function(){return jne(n,JP())},Tee.apply(n,arguments)}function Une(n,e){return function(r,i){return i.location==="tick"?i.scale.tickFormat(n)(r):i.location==="zoom-slider-tooltip"?e.tickFormat(2)(r):`${r}`}}function rm(n){return n.scaleType==="band"}function zb(n){return n.scaleType==="point"}function Hne(n){return n.scaleType==="symlog"}function zne(n){return n.type==="piecewise"?zP(n.thresholds,n.colors):JP([n.min??0,n.max??100],n.color)}function Kd(n){return n.values?X1(n.values,n.colors).unknown(n.unknownColor??null):X1(n.colors.map((e,t)=>t),n.colors).unknown(n.unknownColor??null)}function Uc(n){return n.type==="ordinal"?Kd(n):zne(n)}function e6(n){const{tickMaxStep:e,tickMinStep:t,tickNumber:r,range:i,domain:a}=n,s=t===void 0?999:Math.floor(Math.abs(a[1]-a[0])/t),o=e===void 0?2:Math.ceil(Math.abs(a[1]-a[0])/e),c=r??Math.floor(Math.abs(i[1]-i[0])/50);return Math.min(s,Math.max(o,c))}function t6(n,e){return e[1]-e[0]===0?1:n/((e[1]-e[0])/100)}function $ne(n,e){const t=HP(n,e),r=t.ticks,{negativeScale:i,linearScale:a,positiveScale:s}=Gne(t);return t.ticks=o=>{const c=r(o),d=t.constant();let f=0,p=0,g=0;c.forEach(v=>{v>-d&&v<d&&(p+=1),v<=-d&&(f+=1),v>=d&&(g+=1)});const y=[];if(f>0&&y.push(...i.ticks(f)),p>0){const v=a.ticks(p);y.at(-1)===v[0]?y.push(...v.slice(1)):y.push(...v)}if(g>0){const v=s.ticks(g);y.at(-1)===v[0]?y.push(...v.slice(1)):y.push(...v)}return y},t.tickFormat=(o=10,c)=>{const d=t.constant(),[f,p]=t.domain(),g=p-f,y=i.domain(),v=y[1]-y[0],A=(g===0?0:v/g)*o,E=a.domain(),T=E[1]-E[0],D=(g===0?0:T/g)*o,O=s.domain(),N=O[1]-O[0],R=(g===0?0:N/g)*o,I=i.tickFormat(A,c),B=a.tickFormat(D,c),L=s.tickFormat(R,c);return k=>(k.valueOf()<=-d?I:k.valueOf()>=d?L:B)(k)},t}function Gne(n){const e=n.constant(),t=n.domain(),r=[t[0],Math.min(t[1],-e)],i=J1(r,n.range()),a=[Math.max(t[0],-e),Math.min(t[1],e)],s=Pb(a,n.range()),o=[Math.max(t[0],e),t[1]],c=J1(o,n.range());return{negativeScale:i,linearScale:s,positiveScale:c}}function im(n,e,t){switch(n){case"log":return J1(e,t);case"pow":return kb(e,t);case"sqrt":return bte(e,t);case"time":return ZP(e,t);case"utc":return Vne(e,t);case"symlog":return $ne(e,t);default:return Pb(e,t)}}const am=n=>(n==null?void 0:n[0])instanceof Date;function sm(n,e){const t=ZP(n.data,e);return(r,{location:i})=>i==="tick"?t.tickFormat(n.tickNumber)(r):`${r.toLocaleString()}`}const i2=(n,e)=>{const t=n[1]-n[0],r=e[1]-e[0],i=n[0]-e[0]*t/r,a=n[1]+(100-e[1])*t/r;return[i,a]};let c3,u3;class Wne{constructor(){if(this.types=new Set,c3)throw new Error("You can only create one instance!");c3=this.types}addType(e){this.types.add(e)}getTypes(){return this.types}}class Yne{constructor(){if(this.types=new Set,u3)throw new Error("You can only create one instance!");u3=this.types}addType(e){this.types.add(e)}getTypes(){return this.types}}const dy=new Wne;dy.addType("bar");dy.addType("line");dy.addType("scatter");const n6=new Yne;n6.addType("radar");function $b(n){return dy.getTypes().has(n)}const qne=(n,e,t,r,i,a,s,o)=>{var v;const c=r==="x"?i[e].xExtremumGetter:i[e].yExtremumGetter,d=((v=s[e])==null?void 0:v.series)??{},[f,p]=(c==null?void 0:c({series:d,axis:t,axisIndex:a,isDefaultAxis:a===0,getFilters:o}))??[1/0,-1/0],[g,y]=n;return[Math.min(f,g),Math.max(p,y)]},r6=(n,e,t,r,i,a)=>{const o=Object.keys(t).filter($b).reduce((c,d)=>qne(c,d,n,e,t,r,i,a),[1/0,-1/0]);return Number.isNaN(o[0])||Number.isNaN(o[1])?[1/0,-1/0]:o},Xne=(n,e,t,r)=>{const i=new Set;return Object.keys(e).filter($b).forEach(s=>{var d,f,p;const o=((d=t[s])==null?void 0:d.series)??{},c=(p=(f=e[s]).axisTooltipGetter)==null?void 0:p.call(f,o);c!==void 0&&c.forEach(({axisId:g,direction:y})=>{y===n&&i.add(g??r)})}),i},Kne=(n,e,t,r)=>{var i;if(n.domainLimit!==void 0)return n.domainLimit;if(e==="x")for(const a of((i=r.line)==null?void 0:i.seriesOrder)??[]){const s=r.line.series[a];if(s.xAxisId===n.id||s.xAxisId===void 0&&t===0)return"strict"}return"nice"};function Qne(n,e,t){const r=e==="x"?[n.left,n.left+n.width]:[n.top+n.height,n.top];return t.reverse?[r[1],r[0]]:r}const Zne=.2,Jne=.1;function i6({drawingArea:n,formattedSeries:e,axis:t,seriesConfig:r,axisDirection:i,zoomMap:a,zoomOptions:s,getFilters:o,preferStrictDomainInLineCharts:c}){if(t===void 0)return{axis:{},axisIds:[]};const d=Xne(i,r,e,t[0].id),f={};return t.forEach((p,g)=>{const y=p,v=s==null?void 0:s[y.id],b=a==null?void 0:a.get(y.id),A=b?[b.start,b.end]:[0,100],E=Qne(n,i,y),[T,C]=r6(y,i,r,g,e,b===void 0&&!v?o:void 0),D=!y.ignoreTooltip&&d.has(y.id),O=y.data??[];if(rm(y)){const Y=y.categoryGapRatio??Zne,Q=y.barGapRatio??Jne,Z=i==="y"?[E[1],E[0]]:E,fe=i2(Z,A);if(f[y.id]=H({offset:0,height:0,categoryGapRatio:Y,barGapRatio:Q,triggerTooltip:D},y,{data:O,scale:iy(y.data,fe).paddingInner(Y).paddingOuter(Y/2),tickNumber:y.data.length,colorScale:y.colorMap&&(y.colorMap.type==="ordinal"?Kd(H({values:y.data},y.colorMap)):Uc(y.colorMap))}),am(y.data)){const ge=sm(y,Z);f[y.id].valueFormatter=y.valueFormatter??ge}}if(zb(y)){const Y=i==="y"?[...E].reverse():E,Q=i2(Y,A);if(f[y.id]=H({offset:0,height:0,triggerTooltip:D},y,{data:O,scale:PP(y.data,Q),tickNumber:y.data.length,colorScale:y.colorMap&&(y.colorMap.type==="ordinal"?Kd(H({values:y.data},y.colorMap)):Uc(y.colorMap))}),am(y.data)){const Z=sm(y,Y);f[y.id].valueFormatter=y.valueFormatter??Z}}if(y.scaleType==="band"||y.scaleType==="point")return;const N=y.scaleType??"linear",M=c?Kne(y,i,g,e):y.domainLimit??"nice",R=[y.min??T,y.max??C];if(typeof M=="function"){const{min:Y,max:Q}=M(T,C);R[0]=Y,R[1]=Q}const I=e6(H({},y,{range:E,domain:R})),B=t6(I,A),L=i2(E,A),k=im(N,R,L);Hne(y)&&y.constant!=null&&k.constant(y.constant);const F=M==="nice"?k.nice(I):k,[q,X]=F.domain(),G=[y.min??q,y.max??X];f[y.id]=H({offset:0,height:0,triggerTooltip:D},y,{data:O,scaleType:N,scale:F.domain(G),tickNumber:B,colorScale:y.colorMap&&Uc(y.colorMap),valueFormatter:y.valueFormatter??Une(B,im(N,E.map(Y=>k.invert(Y)),E))})}),{axis:f,axisIds:t.map(({id:p})=>p)}}function ere(n){return n!=null}function a6({zoomMap:n,zoomOptions:e,seriesConfig:t,formattedSeries:r,direction:i}){return(a,s)=>{const o=e[a.id];if(!o||o.filterMode!=="discard")return null;const c=n==null?void 0:n.get(a.id);if(c===void 0||c.start<=0&&c.end>=100)return null;const d=a.scaleType;return d==="point"||d==="band"?tre(a.data,c.start,c.end,i):nre(d,r6(a,i,t,s,r),c.start,c.end,i,a.data)}}function tre(n,e,t,r){const i=(n==null?void 0:n.length)??0,a=Math.floor(e*i/100),s=Math.ceil(t*i/100);return function(c,d){return(c[r]??(n==null?void 0:n[d]))==null?!0:d>=a&&d<s}}function nre(n,e,t,r,i,a){let s,o;[s,o]=im(n??"linear",e,[0,100]).nice().domain(),s=s instanceof Date?s.getTime():s,o=o instanceof Date?o.getTime():o;const c=s+t*(o-s)/100,d=s+r*(o-s)/100;return function(p,g){const y=p[i]??(a==null?void 0:a[g]);return y==null?!0:y>=c&&y<=d}}const rre=n=>({currentAxisId:e,seriesXAxisId:t,seriesYAxisId:r,isDefaultAxis:i})=>(a,s)=>{var d,f;return!(e===t?r:t)||i?((f=(d=Object.values(n??{}))[0])==null?void 0:f.call(d,a,s))??!0:[r,t].filter(p=>p!==e).map(p=>n[p??""]).filter(ere).every(p=>p(a,s))},d3=n=>(e=[])=>e.reduce((t,r)=>{const{zoom:i,id:a}=r,s=Tb(i,a,n);return s&&(t[a]=s),t},{}),ire=n=>{const e=new Map;return n.forEach(t=>{e.set(t.axisId,t)}),e},s6=n=>n.zoom,o6=Ge([s6],n=>n==null?void 0:n.isInteracting),fy=Ge([s6],n=>(n==null?void 0:n.zoomData)&&ire(n==null?void 0:n.zoomData)),X0=Ge([ru,df],(n,e)=>H({},d3("x")(n),d3("y")(e)));Ge([X0,(n,e)=>e],(n,e)=>n[e]);const are=Ge([fy,X0,Do,Wa],(n,e,t,r)=>n&&e&&a6({zoomMap:n,zoomOptions:e,seriesConfig:t,formattedSeries:r,direction:"x"})),sre=Ge([fy,X0,Do,Wa],(n,e,t,r)=>n&&e&&a6({zoomMap:n,zoomOptions:e,seriesConfig:t,formattedSeries:r,direction:"y"})),l6=Ge([are,sre,ru,df],(n,e,t,r)=>{if(n===void 0||e===void 0)return;const i=t==null?void 0:t.reduce((s,o,c)=>{const d=n(o,c);return d!==null&&(s[o.id]=d),s},{}),a=r==null?void 0:r.reduce((s,o,c)=>{const d=e(o,c);return d!==null&&(s[o.id]=d),s},{});if(!(Object.keys(i??{}).length===0&&Object.keys(a??{}).length===0))return rre(H({},i,a))}),Xi=Ge([ru,Io,Wa,Do,fy,X0,l6,wP],(n,e,t,r,i,a,s,o)=>i6({drawingArea:e,formattedSeries:t,axis:n,seriesConfig:r,axisDirection:"x",zoomMap:i,zoomOptions:a,getFilters:s,preferStrictDomainInLineCharts:o})),Ki=Ge([df,Io,Wa,Do,fy,X0,l6,wP],(n,e,t,r,i,a,s,o)=>i6({drawingArea:e,formattedSeries:t,axis:n,seriesConfig:r,axisDirection:"y",zoomMap:i,zoomOptions:a,getFilters:s,preferStrictDomainInLineCharts:o}));Ge([Xi,Ki,(n,e)=>e],(n,e,t)=>(n==null?void 0:n.axis[t])??(e==null?void 0:e.axis[t]));Ge([ru,df,(n,e)=>e],(n,e,t)=>{const r=(n==null?void 0:n.find(i=>i.id===t))??(e==null?void 0:e.find(i=>i.id===t))??null;if(r)return r});function Ya(n){return n.bandwidth!==void 0}function nd(n){return n instanceof Date?n.getTime():n}function Qd(n,e){const{scale:t,data:r,reverse:i}=n;if(!Ya(t)){const s=t.invert(e);if(r===void 0)return-1;const o=nd(s);return r==null?void 0:r.findIndex((d,f)=>{const p=nd(d);return p>o&&(f===0||Math.abs(o-p)<=Math.abs(o-nd(r[f-1])))||p<=o&&(f===r.length-1||Math.abs(nd(s)-p)<Math.abs(nd(s)-nd(r[f+1])))})}const a=t.bandwidth()===0?Math.floor((e-Math.min(...t.range())+t.step()/2)/t.step()):Math.floor((e-Math.min(...t.range()))/t.step());return a<0||a>=r.length?-1:i?r.length-1-a:a}function f3(n,e,t){const{scale:r,data:i}=n;if(!Ya(r)){const a=r.invert(e);return t<0?a:i[t]}return t<0||t>=i.length?null:i[t]}function Aw(n,e){const t=n.createSVGPoint();return t.x=e.clientX,t.y=e.clientY,t.matrixTransform(n.getScreenCTM().inverse())}const ore=Object.is;function c6(n,e){if(n===e)return!0;if(!(n instanceof Object)||!(e instanceof Object))return!1;let t=0,r=0;for(const i in n)if(t+=1,!ore(n[i],e[i])||!(i in e))return!1;for(const i in e)r+=1;return t===r}const hf=({store:n})=>{const e=Ve(function(){n.update(s=>H({},s,{interaction:{pointer:null,item:null}}))}),t=Ve(function(s){n.update(o=>{const c=o.interaction.item;return s?c===null||Object.keys(s).some(d=>s[d]!==c[d])?o:H({},o,{interaction:H({},o.interaction,{item:null})}):c===null?o:H({},o,{interaction:H({},o.interaction,{item:null})})})}),r=Ve(function(s){n.update(o=>c6(o.interaction.item,s)?o:H({},o,{interaction:H({},o.interaction,{item:s})}))}),i=Ve(function(s){n.update(o=>H({},o,{interaction:H({},o.interaction,{pointer:s})}))});return{instance:{cleanInteraction:e,setItemInteraction:r,removeItemInteraction:t,setPointerCoordinate:i}}};hf.getInitialState=()=>({interaction:{item:null,pointer:null}});hf.params={};const Gb=n=>n.interaction,lre=Ge([Gb],n=>n!==void 0),u6=Ge([Gb],n=>(n==null?void 0:n.item)??null),d6=Ge([Gb],n=>(n==null?void 0:n.pointer)??null),K0=Ge([d6],n=>n&&n.x),Q0=Ge([d6],n=>n&&n.y),cre=Ge([u6],n=>n!==null);function Pd(n,e){if(n===e)return!0;if(n&&e&&typeof n=="object"&&typeof e=="object"){if(n.constructor!==e.constructor)return!1;if(Array.isArray(n)){const i=n.length;if(i!==e.length)return!1;for(let a=0;a<i;a+=1)if(!Pd(n[a],e[a]))return!1;return!0}if(n instanceof Map&&e instanceof Map){if(n.size!==e.size)return!1;const i=Array.from(n.entries());for(let a=0;a<i.length;a+=1)if(!e.has(i[a][0]))return!1;for(let a=0;a<i.length;a+=1){const s=i[a];if(!Pd(s[1],e.get(s[0])))return!1}return!0}if(n instanceof Set&&e instanceof Set){if(n.size!==e.size)return!1;const i=Array.from(n.entries());for(let a=0;a<i.length;a+=1)if(!e.has(i[a][0]))return!1;return!0}if(ArrayBuffer.isView(n)&&ArrayBuffer.isView(e)){const i=n.length;if(i!==e.length)return!1;for(let a=0;a<i;a+=1)if(n[a]!==e[a])return!1;return!0}if(n.constructor===RegExp)return n.source===e.source&&n.flags===e.flags;if(n.valueOf!==Object.prototype.valueOf)return n.valueOf()===e.valueOf();if(n.toString!==Object.prototype.toString)return n.toString()===e.toString();const t=Object.keys(n),r=t.length;if(r!==Object.keys(e).length)return!1;for(let i=0;i<r;i+=1)if(!Object.prototype.hasOwnProperty.call(e,t[i]))return!1;for(let i=0;i<r;i+=1){const a=t[i];if(!Pd(n[a],e[a]))return!1}return!0}return n!==n&&e!==e}const hy=(n,e)=>e;function Ew(n,e,t=e.axisIds[0]){return Array.isArray(t)?t.map(r=>Qd(e.axis[r],n)):Qd(e.axis[t],n)}const f6=(n,e,t)=>{if(n===null)return null;const r=Ew(n,e,t);return r===-1?null:r},Wb=Ge([K0,Xi,hy],f6),Yb=Ge([Q0,Ki,hy],f6),ure=Ge([K0,Q0,Xi,Ki],(n,e,t,r)=>[...n===null?[]:t.axisIds.map(i=>({axisId:i,dataIndex:Ew(n,t,i)})),...e===null?[]:r.axisIds.map(i=>({axisId:i,dataIndex:Ew(e,r,i)}))].filter(i=>i.dataIndex!==null&&i.dataIndex>=0));function h6(n,e,t,r=e.axisIds[0]){return Array.isArray(r)?r.map((i,a)=>f3(e.axis[i],n,t[a])):f3(e.axis[r],n,t)}const dre=Ge([K0,Xi,Wb,hy],(n,e,t,r)=>n===null||t===null||e.axisIds.length===0?null:h6(n,e,t,r)),fre=Ge([Q0,Ki,Yb,hy],(n,e,t,r)=>n===null||t===null||e.axisIds.length===0?null:h6(n,e,t,r)),p6=Ge([K0,Xi],(n,e)=>n===null?[]:e.axisIds.filter(t=>e.axis[t].triggerTooltip).map(t=>({axisId:t,dataIndex:Qd(e.axis[t],n)})).filter(({dataIndex:t})=>t>=0),{memoizeOptions:{resultEqualityCheck:Pd}}),g6=Ge([Q0,Ki],(n,e)=>n===null?[]:e.axisIds.filter(t=>e.axis[t].triggerTooltip).map(t=>({axisId:t,dataIndex:Qd(e.axis[t],n)})).filter(({dataIndex:t})=>t>=0),{memoizeOptions:{resultEqualityCheck:Pd}}),hre=Ge([p6,g6],(n,e)=>n.length>0||e.length>0),pre=()=>{};function gre(n,e,t,r){const i=W3(mre,{store:n,selector:e,skip:r}).current;i.effect=t,V.useEffect(i.onMount(r),[r])}function mre(n){const{store:e,selector:t,skip:r}=n;let i=!1,a;const s=()=>{o.dispose??(o.dispose=e.subscribe(c=>{const d=t(c);o.effect(a,d),a=d}))},o={effect:pre,dispose:null,onMount:c=>()=>{if(!c)return i||(i=!0,a=t(e.value)),s(),()=>{var d;(d=o.dispose)==null||d.call(o),o.dispose=null}}};return r||(i=!0,a=t(e.value),s()),o}const pf=({params:n,store:e,seriesConfig:t,svgRef:r,instance:i})=>{const{xAxis:a,yAxis:s,dataset:o,onHighlightedAxisChange:c}=n,d=dt(e,Io),f=dt(e,Wa),p=dt(e,lre),{axis:g,axisIds:y}=dt(e,Xi),{axis:v,axisIds:b}=dt(e,Ki);TP({controlled:n.highlightedAxis}),Gn(()=>{n.highlightedAxis!==void 0&&e.update(C=>C.controlledCartesianAxisHighlight===n.highlightedAxis?C:H({},C,{controlledCartesianAxisHighlight:n.highlightedAxis}))},[e,n.highlightedAxis]);const A=V.useRef(!0);V.useEffect(()=>{if(A.current){A.current=!1;return}e.update(C=>H({},C,{cartesianAxis:H({},C.cartesianAxis,{x:DP(a,o),y:RP(s,o)})}))},[t,d,a,s,o,e]);const E=y[0],T=b[0];return gre(e,ure,(C,D)=>{if(!Object.is(C,D)){if(C.length!==D.length){c(D);return}C!=null&&C.some(({axisId:O,dataIndex:N},M)=>D[M].axisId!==O||D[M].dataIndex!==N)&&c(D)}},!c),V.useEffect(()=>{const C=r.current;if(!p||!C||n.disableAxisListener)return()=>{};const D=i.addInteractionListener("moveEnd",L=>{var k;L.detail.activeGestures.pan||(k=i.cleanInteraction)==null||k.call(i)}),O=i.addInteractionListener("panEnd",L=>{var k;L.detail.activeGestures.move||(k=i.cleanInteraction)==null||k.call(i)}),N=i.addInteractionListener("quickPressEnd",L=>{var k;!L.detail.activeGestures.move&&!L.detail.activeGestures.pan&&((k=i.cleanInteraction)==null||k.call(i))}),M=L=>{var X,G;const k=L.detail.srcEvent,F=L.detail.target,q=Aw(C,k);if(L.detail.srcEvent.buttons>=1&&(F!=null&&F.hasPointerCapture(L.detail.srcEvent.pointerId))&&!(F!=null&&F.closest("[data-charts-zoom-slider]"))&&(F==null||F.releasePointerCapture(L.detail.srcEvent.pointerId)),!i.isPointInside(q.x,q.y,F)){(X=i.cleanInteraction)==null||X.call(i);return}(G=i.setPointerCoordinate)==null||G.call(i,q)},R=i.addInteractionListener("move",M),I=i.addInteractionListener("pan",M),B=i.addInteractionListener("quickPress",M);return()=>{R.cleanup(),D.cleanup(),I.cleanup(),O.cleanup(),B.cleanup(),N.cleanup()}},[r,e,g,E,v,T,i,n.disableAxisListener,p]),V.useEffect(()=>{const C=r.current,D=n.onAxisClick;if(C===null||!D)return()=>{};const O=i.addInteractionListener("tap",N=>{let M=null,R=!1;const I=Aw(C,N.detail.srcEvent),B=Qd(g[E],I.x);R=B!==-1,M=R?B:Qd(v[T],I.y);const L=R?y[0]:b[0];if(M==null||M===-1)return;const k=(R?g:v)[L].data[M],F={};Object.keys(f).filter(q=>["bar","line"].includes(q)).forEach(q=>{var X;(X=f[q])==null||X.seriesOrder.forEach(G=>{const Y=f[q].series[G],Q=Y.xAxisId,Z=Y.yAxisId,fe=R?Q:Z;(fe===void 0||fe===L)&&(F[G]=Y.data[M])})}),D(N.detail.srcEvent,{dataIndex:M,axisValue:k,seriesValues:F})});return()=>{O.cleanup()}},[n.onAxisClick,f,r,g,y,v,b,E,T,i]),{}};pf.params={xAxis:!0,yAxis:!0,dataset:!0,onAxisClick:!0,disableAxisListener:!0,onHighlightedAxisChange:!0,highlightedAxis:!0};pf.getDefaultizedParams=({params:n})=>H({},n,{colors:n.colors??_P,theme:n.theme??"light",defaultizedXAxis:DP(n.xAxis,n.dataset),defaultizedYAxis:RP(n.yAxis,n.dataset)});pf.getInitialState=n=>H({cartesianAxis:{x:n.defaultizedXAxis,y:n.defaultizedYAxis}},n.highlightedAxis===void 0?{}:{controlledCartesianAxisHighlight:n.highlightedAxis});const gf=n=>n.controlledCartesianAxisHighlight,m6=(n,e,t)=>t!==void 0?t.filter(r=>e.axis[r.axisId]!==void 0).map(r=>r):n===null?[]:[{axisId:e.axisIds[0],dataIndex:n}];Ge([Wb,Xi,gf],m6);Ge([Yb,Ki,gf],m6);const y6=(n,e,t,r)=>r!==void 0?r.map(i=>{var a,s;return H({},i,{value:(s=(a=t.axis[i.axisId])==null?void 0:a.data)==null?void 0:s[i.dataIndex]})}).filter(({value:i})=>i!==void 0):e===null?[]:[{axisId:t.axisIds[0],dataIndex:n,value:e}],yre=Ge([Wb,dre,Xi,gf],y6),vre=Ge([Yb,fre,Ki,gf],y6),v6=(n,e)=>n===void 0?[e.axis[e.axisIds[0]]]:n.map(r=>e.axis[r.axisId]??null).filter(r=>r!==null);Ge([gf,Xi],v6);Ge([gf,Ki],v6);function h3(n,e){return n.id!==void 0?n:H({id:e},n)}function p3(n){return n.colorMap?H({},n,{colorScale:n.colorMap.type==="ordinal"&&n.data?Kd(H({values:n.data},n.colorMap)):Uc(n.colorMap.type==="continuous"?H({min:n.min,max:n.max},n.colorMap):n.colorMap)}):n}function x6(n,e){if(!n||n.length===0)return{axis:{},axisIds:[]};const t={},r=[];return n.forEach((i,a)=>{const s=i.dataKey,o=i.id??`defaultized-z-axis-${a}`;if(s===void 0||i.data!==void 0){t[o]=p3(h3(i,o)),r.push(o);return}if(e===void 0)throw new Error("MUI X Charts: z-axis uses `dataKey` but no `dataset` is provided.");t[o]=p3(h3(H({},i,{data:e.map(c=>c[s])}),o)),r.push(o)}),{axis:t,axisIds:r}}const Z0=({params:n,store:e})=>{const{zAxis:t,dataset:r}=n,i=V.useRef(!0);return V.useEffect(()=>{if(i.current){i.current=!1;return}e.update(a=>H({},a,{zAxis:x6(t,r)}))},[t,r,e]),{}};Z0.params={zAxis:!0,dataset:!0};Z0.getInitialState=n=>({zAxis:x6(n.zAxis,n.dataset)});const xre=n=>n,wre=Ge([xre],n=>n.zAxis),su=({store:n,params:e})=>{TP({controlled:e.highlightedItem}),Gn(()=>{n.update(i=>i.highlight.item===e.highlightedItem?i:H({},i,{highlight:H({},i.highlight,{item:e.highlightedItem})}))},[n,e.highlightedItem]);const t=Ve(()=>{var i;(i=e.onHighlightChange)==null||i.call(e,null),n.update(a=>H({},a,{highlight:{item:null}}))}),r=Ve(i=>{var s;const a=n.getSnapshot().highlight.item;c6(a,i)||((s=e.onHighlightChange)==null||s.call(e,i),n.update(o=>H({},o,{highlight:{item:i}})))});return{instance:{clearHighlight:t,setHighlight:r}}};su.getDefaultizedParams=({params:n})=>H({},n,{highlightedItem:n.highlightedItem??null});su.getInitialState=n=>({highlight:{item:n.highlightedItem}});su.params={highlightedItem:!0,onHighlightChange:!0};function w6(n){let e=1/0,t=-1/0;for(const r of n??[])r<e&&(e=r),r>t&&(t=r);return[e,t]}const g3=(n,e)=>e==="x"?{x:n,y:null}:{x:null,y:n},_6=n=>{var s;const{axis:e,getFilters:t,isDefaultAxis:r}=n,i=t==null?void 0:t({currentAxisId:e.id,isDefaultAxis:r}),a=i?(s=e.data)==null?void 0:s.filter((o,c)=>i({x:null,y:null},c)):e.data;return w6(a??[])},b6=n=>e=>{const{series:t,axis:r,getFilters:i,isDefaultAxis:a}=e;return Object.keys(t).filter(s=>{const o=n==="x"?t[s].xAxisId:t[s].yAxisId;return o===r.id||a&&o===void 0}).reduce((s,o)=>{const{stackedData:c}=t[o],d=i==null?void 0:i({currentAxisId:r.id,isDefaultAxis:a,seriesXAxisId:t[o].xAxisId,seriesYAxisId:t[o].yAxisId}),[f,p]=(c==null?void 0:c.reduce((g,y,v)=>d&&(!d(g3(y[0],n),v)||!d(g3(y[1],n),v))?g:[Math.min(...y,g[0]),Math.max(...y,g[1])],[1/0,-1/0]))??[1/0,-1/0];return[Math.min(f,s[0]),Math.max(p,s[1])]},[1/0,-1/0])},_re=n=>Object.keys(n.series).some(t=>n.series[t].layout==="horizontal")?b6("x")(n):_6(n),bre=n=>Object.keys(n.series).some(t=>n.series[t].layout==="horizontal")?_6(n):b6("y")(n);function Er(n){return function(){return n}}const m3=Math.abs,ai=Math.atan2,Ac=Math.cos,Are=Math.max,a2=Math.min,cs=Math.sin,xd=Math.sqrt,Mi=1e-12,b0=Math.PI,om=b0/2,f1=2*b0;function Ere(n){return n>1?0:n<-1?b0:Math.acos(n)}function y3(n){return n>=1?om:n<=-1?-om:Math.asin(n)}const Sw=Math.PI,Tw=2*Sw,Cc=1e-6,Sre=Tw-Cc;function A6(n){this._+=n[0];for(let e=1,t=n.length;e<t;++e)this._+=arguments[e]+n[e]}function Tre(n){let e=Math.floor(n);if(!(e>=0))throw new Error(`invalid digits: ${n}`);if(e>15)return A6;const t=10**e;return function(r){this._+=r[0];for(let i=1,a=r.length;i<a;++i)this._+=Math.round(arguments[i]*t)/t+r[i]}}let Cre=class{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?A6:Tre(e)}moveTo(e,t){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,t){this._append`L${this._x1=+e},${this._y1=+t}`}quadraticCurveTo(e,t,r,i){this._append`Q${+e},${+t},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(e,t,r,i,a,s){this._append`C${+e},${+t},${+r},${+i},${this._x1=+a},${this._y1=+s}`}arcTo(e,t,r,i,a){if(e=+e,t=+t,r=+r,i=+i,a=+a,a<0)throw new Error(`negative radius: ${a}`);let s=this._x1,o=this._y1,c=r-e,d=i-t,f=s-e,p=o-t,g=f*f+p*p;if(this._x1===null)this._append`M${this._x1=e},${this._y1=t}`;else if(g>Cc)if(!(Math.abs(p*c-d*f)>Cc)||!a)this._append`L${this._x1=e},${this._y1=t}`;else{let y=r-s,v=i-o,b=c*c+d*d,A=y*y+v*v,E=Math.sqrt(b),T=Math.sqrt(g),C=a*Math.tan((Sw-Math.acos((b+g-A)/(2*E*T)))/2),D=C/T,O=C/E;Math.abs(D-1)>Cc&&this._append`L${e+D*f},${t+D*p}`,this._append`A${a},${a},0,0,${+(p*y>f*v)},${this._x1=e+O*c},${this._y1=t+O*d}`}}arc(e,t,r,i,a,s){if(e=+e,t=+t,r=+r,s=!!s,r<0)throw new Error(`negative radius: ${r}`);let o=r*Math.cos(i),c=r*Math.sin(i),d=e+o,f=t+c,p=1^s,g=s?i-a:a-i;this._x1===null?this._append`M${d},${f}`:(Math.abs(this._x1-d)>Cc||Math.abs(this._y1-f)>Cc)&&this._append`L${d},${f}`,r&&(g<0&&(g=g%Tw+Tw),g>Sre?this._append`A${r},${r},0,1,${p},${e-o},${t-c}A${r},${r},0,1,${p},${this._x1=d},${this._y1=f}`:g>Cc&&this._append`A${r},${r},0,${+(g>=Sw)},${p},${this._x1=e+r*Math.cos(a)},${this._y1=t+r*Math.sin(a)}`)}rect(e,t,r,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}};function Ire(n){let e=3;return n.digits=function(t){if(!arguments.length)return e;if(t==null)e=null;else{const r=Math.floor(t);if(!(r>=0))throw new RangeError(`invalid digits: ${t}`);e=r}return n},()=>new Cre(e)}function Dre(n){return n.innerRadius}function Rre(n){return n.outerRadius}function Mre(n){return n.startAngle}function Ore(n){return n.endAngle}function Pre(n){return n&&n.padAngle}function kre(n,e,t,r,i,a,s,o){var c=t-n,d=r-e,f=s-i,p=o-a,g=p*c-f*d;if(!(g*g<Mi))return g=(f*(e-a)-p*(n-i))/g,[n+g*c,e+g*d]}function Yg(n,e,t,r,i,a,s){var o=n-t,c=e-r,d=(s?a:-a)/xd(o*o+c*c),f=d*c,p=-d*o,g=n+f,y=e+p,v=t+f,b=r+p,A=(g+v)/2,E=(y+b)/2,T=v-g,C=b-y,D=T*T+C*C,O=i-a,N=g*b-v*y,M=(C<0?-1:1)*xd(Are(0,O*O*D-N*N)),R=(N*C-T*M)/D,I=(-N*T-C*M)/D,B=(N*C+T*M)/D,L=(-N*T+C*M)/D,k=R-A,F=I-E,q=B-A,X=L-E;return k*k+F*F>q*q+X*X&&(R=B,I=L),{cx:R,cy:I,x01:-f,y01:-p,x11:R*(i/O-1),y11:I*(i/O-1)}}function E6(){var n=Dre,e=Rre,t=Er(0),r=null,i=Mre,a=Ore,s=Pre,o=null,c=Ire(d);function d(){var f,p,g=+n.apply(this,arguments),y=+e.apply(this,arguments),v=i.apply(this,arguments)-om,b=a.apply(this,arguments)-om,A=m3(b-v),E=b>v;if(o||(o=f=c()),y<g&&(p=y,y=g,g=p),!(y>Mi))o.moveTo(0,0);else if(A>f1-Mi)o.moveTo(y*Ac(v),y*cs(v)),o.arc(0,0,y,v,b,!E),g>Mi&&(o.moveTo(g*Ac(b),g*cs(b)),o.arc(0,0,g,b,v,E));else{var T=v,C=b,D=v,O=b,N=A,M=A,R=s.apply(this,arguments)/2,I=R>Mi&&(r?+r.apply(this,arguments):xd(g*g+y*y)),B=a2(m3(y-g)/2,+t.apply(this,arguments)),L=B,k=B,F,q;if(I>Mi){var X=y3(I/g*cs(R)),G=y3(I/y*cs(R));(N-=X*2)>Mi?(X*=E?1:-1,D+=X,O-=X):(N=0,D=O=(v+b)/2),(M-=G*2)>Mi?(G*=E?1:-1,T+=G,C-=G):(M=0,T=C=(v+b)/2)}var Y=y*Ac(T),Q=y*cs(T),Z=g*Ac(O),fe=g*cs(O);if(B>Mi){var ge=y*Ac(C),we=y*cs(C),Ae=g*Ac(D),Pe=g*cs(D),Re;if(A<b0)if(Re=kre(Y,Q,Ae,Pe,ge,we,Z,fe)){var He=Y-Re[0],Ue=Q-Re[1],Qe=ge-Re[0],ae=we-Re[1],me=1/cs(Ere((He*Qe+Ue*ae)/(xd(He*He+Ue*Ue)*xd(Qe*Qe+ae*ae)))/2),he=xd(Re[0]*Re[0]+Re[1]*Re[1]);L=a2(B,(g-he)/(me-1)),k=a2(B,(y-he)/(me+1))}else L=k=0}M>Mi?k>Mi?(F=Yg(Ae,Pe,Y,Q,y,k,E),q=Yg(ge,we,Z,fe,y,k,E),o.moveTo(F.cx+F.x01,F.cy+F.y01),k<B?o.arc(F.cx,F.cy,k,ai(F.y01,F.x01),ai(q.y01,q.x01),!E):(o.arc(F.cx,F.cy,k,ai(F.y01,F.x01),ai(F.y11,F.x11),!E),o.arc(0,0,y,ai(F.cy+F.y11,F.cx+F.x11),ai(q.cy+q.y11,q.cx+q.x11),!E),o.arc(q.cx,q.cy,k,ai(q.y11,q.x11),ai(q.y01,q.x01),!E))):(o.moveTo(Y,Q),o.arc(0,0,y,T,C,!E)):o.moveTo(Y,Q),!(g>Mi)||!(N>Mi)?o.lineTo(Z,fe):L>Mi?(F=Yg(Z,fe,ge,we,g,-L,E),q=Yg(Y,Q,Ae,Pe,g,-L,E),o.lineTo(F.cx+F.x01,F.cy+F.y01),L<B?o.arc(F.cx,F.cy,L,ai(F.y01,F.x01),ai(q.y01,q.x01),!E):(o.arc(F.cx,F.cy,L,ai(F.y01,F.x01),ai(F.y11,F.x11),!E),o.arc(0,0,g,ai(F.cy+F.y11,F.cx+F.x11),ai(q.cy+q.y11,q.cx+q.x11),E),o.arc(q.cx,q.cy,L,ai(q.y11,q.x11),ai(q.y01,q.x01),!E))):o.arc(0,0,g,O,D,E)}if(o.closePath(),f)return o=null,f+""||null}return d.centroid=function(){var f=(+n.apply(this,arguments)+ +e.apply(this,arguments))/2,p=(+i.apply(this,arguments)+ +a.apply(this,arguments))/2-b0/2;return[Ac(p)*f,cs(p)*f]},d.innerRadius=function(f){return arguments.length?(n=typeof f=="function"?f:Er(+f),d):n},d.outerRadius=function(f){return arguments.length?(e=typeof f=="function"?f:Er(+f),d):e},d.cornerRadius=function(f){return arguments.length?(t=typeof f=="function"?f:Er(+f),d):t},d.padRadius=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:Er(+f),d):r},d.startAngle=function(f){return arguments.length?(i=typeof f=="function"?f:Er(+f),d):i},d.endAngle=function(f){return arguments.length?(a=typeof f=="function"?f:Er(+f),d):a},d.padAngle=function(f){return arguments.length?(s=typeof f=="function"?f:Er(+f),d):s},d.context=function(f){return arguments.length?(o=f??null,d):o},d}function S6(n){return typeof n=="object"&&"length"in n?n:Array.from(n)}function Nre(n,e){return e<n?-1:e>n?1:e>=n?0:NaN}function Lre(n){return n}function Bre(){var n=Lre,e=Nre,t=null,r=Er(0),i=Er(f1),a=Er(0);function s(o){var c,d=(o=S6(o)).length,f,p,g=0,y=new Array(d),v=new Array(d),b=+r.apply(this,arguments),A=Math.min(f1,Math.max(-f1,i.apply(this,arguments)-b)),E,T=Math.min(Math.abs(A)/d,a.apply(this,arguments)),C=T*(A<0?-1:1),D;for(c=0;c<d;++c)(D=v[y[c]=c]=+n(o[c],c,o))>0&&(g+=D);for(e!=null?y.sort(function(O,N){return e(v[O],v[N])}):t!=null&&y.sort(function(O,N){return t(o[O],o[N])}),c=0,p=g?(A-d*C)/g:0;c<d;++c,b=E)f=y[c],D=v[f],E=b+(D>0?D*p:0)+C,v[f]={data:o[f],index:c,value:D,startAngle:b,endAngle:E,padAngle:T};return v}return s.value=function(o){return arguments.length?(n=typeof o=="function"?o:Er(+o),s):n},s.sortValues=function(o){return arguments.length?(e=o,t=null,s):e},s.sort=function(o){return arguments.length?(t=o,e=null,s):t},s.startAngle=function(o){return arguments.length?(r=typeof o=="function"?o:Er(+o),s):r},s.endAngle=function(o){return arguments.length?(i=typeof o=="function"?o:Er(+o),s):i},s.padAngle=function(o){return arguments.length?(a=typeof o=="function"?o:Er(+o),s):a},s}function Zd(n,e){if((s=n.length)>1)for(var t=1,r,i,a=n[e[0]],s,o=a.length;t<s;++t)for(i=a,a=n[e[t]],r=0;r<o;++r)a[r][1]+=a[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function Jd(n){for(var e=n.length,t=new Array(e);--e>=0;)t[e]=e;return t}function Vre(n,e){return n[e]}function Fre(n){const e=[];return e.key=n,e}function T6(){var n=Er([]),e=Jd,t=Zd,r=Vre;function i(a){var s=Array.from(n.apply(this,arguments),Fre),o,c=s.length,d=-1,f;for(const p of a)for(o=0,++d;o<c;++o)(s[o][d]=[0,+r(p,s[o].key,d,a)]).data=p;for(o=0,f=S6(e(s));o<c;++o)s[f[o]].index=o;return t(s,f),s}return i.keys=function(a){return arguments.length?(n=typeof a=="function"?a:Er(Array.from(a)),i):n},i.value=function(a){return arguments.length?(r=typeof a=="function"?a:Er(+a),i):r},i.order=function(a){return arguments.length?(e=a==null?Jd:typeof a=="function"?a:Er(Array.from(a)),i):e},i.offset=function(a){return arguments.length?(t=a??Zd,i):t},i}function jre(n,e){if((r=n.length)>0){for(var t,r,i=0,a=n[0].length,s;i<a;++i){for(s=t=0;t<r;++t)s+=n[t][i][1]||0;if(s)for(t=0;t<r;++t)n[t][i][1]/=s}Zd(n,e)}}function Ure(n,e){if((c=n.length)>0)for(var t,r=0,i,a,s,o,c,d=n[e[0]].length;r<d;++r)for(s=o=0,t=0;t<c;++t)(a=(i=n[e[t]][r])[1]-i[0])>0?(i[0]=s,i[1]=s+=a):a<0?(i[1]=o,i[0]=o+=a):(i[0]=0,i[1]=a)}function Hre(n,e){if((i=n.length)>0){for(var t=0,r=n[e[0]],i,a=r.length;t<a;++t){for(var s=0,o=0;s<i;++s)o+=n[s][t][1]||0;r[t][1]+=r[t][0]=-o/2}Zd(n,e)}}function zre(n,e){if(!(!((s=n.length)>0)||!((a=(i=n[e[0]]).length)>0))){for(var t=0,r=1,i,a,s;r<a;++r){for(var o=0,c=0,d=0;o<s;++o){for(var f=n[e[o]],p=f[r][1]||0,g=f[r-1][1]||0,y=(p-g)/2,v=0;v<o;++v){var b=n[e[v]],A=b[r][1]||0,E=b[r-1][1]||0;y+=A-E}c+=p,d+=y*p}i[r-1][1]+=i[r-1][0]=t,c&&(t-=d/c)}i[r-1][1]+=i[r-1][0]=t,Zd(n,e)}}function C6(n){var e=n.map($re);return Jd(n).sort(function(t,r){return e[t]-e[r]})}function $re(n){for(var e=-1,t=0,r=n.length,i,a=-1/0;++e<r;)(i=+n[e][1])>a&&(a=i,t=e);return t}function I6(n){var e=n.map(D6);return Jd(n).sort(function(t,r){return e[t]-e[r]})}function D6(n){for(var e=0,t=-1,r=n.length,i;++t<r;)(i=+n[t][1])&&(e+=i);return e}function Gre(n){return I6(n).reverse()}function Wre(n){var e=n.length,t,r,i=n.map(D6),a=C6(n),s=0,o=0,c=[],d=[];for(t=0;t<e;++t)r=a[t],s<o?(s+=i[r],c.push(r)):(o+=i[r],d.push(r));return d.reverse().concat(c)}function Yre(n){return Jd(n).reverse()}const s2={appearance:C6,ascending:I6,descending:Gre,insideOut:Wre,none:Jd,reverse:Yre},o2={expand:jre,diverging:Ure,none:Zd,silhouette:Hre,wiggle:zre},R6=n=>{const{series:e,seriesOrder:t,defaultStrategy:r}=n,i=[],a={};return t.forEach(s=>{const{stack:o,stackOrder:c,stackOffset:d}=e[s];o===void 0?i.push({ids:[s],stackingOrder:s2.none,stackingOffset:o2.none}):a[o]===void 0?(a[o]=i.length,i.push({ids:[s],stackingOrder:s2[c??(r==null?void 0:r.stackOrder)??"none"],stackingOffset:o2[d??(r==null?void 0:r.stackOffset)??"diverging"]})):(i[a[o]].ids.push(s),c!==void 0&&(i[a[o]].stackingOrder=s2[c]),d!==void 0&&(i[a[o]].stackingOffset=o2[d]))}),i},qre=n=>n==null?"":n.toLocaleString(),Xre=(n,e)=>{const{seriesOrder:t,series:r}=n,i=R6(n),a=e??[];t.forEach(o=>{const c=r[o].data;if(c!==void 0)c.forEach((d,f)=>{a.length<=f?a.push({[o]:d}):a[f][o]=d});else if(e===void 0)throw new Error([`MUI X Charts: bar series with id='${o}' has no data.`,"Either provide a data property to the series or use the dataset prop."].join(`
`))});const s={};return i.forEach(o=>{const{ids:c,stackingOffset:d,stackingOrder:f}=o,p=T6().keys(c.map(g=>{const y=r[g].dataKey;return r[g].data===void 0&&y!==void 0?y:g})).value((g,y)=>g[y]??0).order(f).offset(d)(a);c.forEach((g,y)=>{const v=r[g].dataKey;s[g]=H({layout:"vertical",labelMarkType:"square",minBarSize:0,valueFormatter:r[g].valueFormatter??qre},r[g],{data:v?e.map(b=>{const A=b[v];return typeof A!="number"?null:A}):r[g].data,stackedData:p[y].map(([b,A])=>[b,A])})})}),{seriesOrder:t,stackingGroups:i,series:s}};function qi(n,e){return typeof n=="function"?n(e):n}const Kre=n=>{const{seriesOrder:e,series:t}=n;return e.reduce((r,i)=>{const a=qi(t[i].label,"legend");return a===void 0||r.push({markType:t[i].labelMarkType,id:i,seriesId:i,color:t[i].color,label:a}),r},[])},M6=(n,e,t)=>{const r=n.layout==="vertical",i=r?e==null?void 0:e.colorScale:t==null?void 0:t.colorScale,a=r?t==null?void 0:t.colorScale:e==null?void 0:e.colorScale,s=r?e==null?void 0:e.data:t==null?void 0:t.data;return a?o=>{if(o===void 0)return n.color;const c=n.data[o],d=c===null?n.color:a(c);return d===null?n.color:d}:i&&s?o=>{if(o===void 0)return n.color;const c=s[o],d=c===null?n.color:i(c);return d===null?n.color:d}:()=>n.color},Qre=n=>{const{series:e,getColor:t,identifier:r}=n;if(!r||r.dataIndex===void 0)return null;const i=qi(e.label,"tooltip"),a=e.data[r.dataIndex];if(a==null)return null;const s=e.valueFormatter(a,{dataIndex:r.dataIndex});return{identifier:r,color:t(r.dataIndex),label:i,value:a,formattedValue:s,markType:e.labelMarkType}},Zre=n=>Object.values(n).map(e=>e.layout==="horizontal"?{direction:"y",axisId:e.yAxisId}:{direction:"x",axisId:e.xAxisId}),Jre=(n,e,t)=>H({id:n.id??`auto-generated-id-${e}`,color:t[e%t.length]},n),eie={seriesProcessor:Xre,colorProcessor:M6,legendGetter:Kre,tooltipGetter:Qre,axisTooltipGetter:Zre,xExtremumGetter:_re,yExtremumGetter:bre,getSeriesWithDefaultValues:Jre},tie=n=>{const{series:e,axis:t,isDefaultAxis:r,getFilters:i}=n;let a=1/0,s=-1/0;for(const o in e){if(!Object.hasOwn(e,o))continue;const c=e[o].xAxisId;if(!(c===t.id||c===void 0&&r))continue;const d=i==null?void 0:i({currentAxisId:t.id,isDefaultAxis:r,seriesXAxisId:e[o].xAxisId,seriesYAxisId:e[o].yAxisId}),f=e[o].data??[];for(let p=0;p<f.length;p+=1){const g=f[p];d&&!d(g,p)||g.x!==null&&(g.x<a&&(a=g.x),g.x>s&&(s=g.x))}}return[a,s]},nie=n=>{const{series:e,axis:t,isDefaultAxis:r,getFilters:i}=n;let a=1/0,s=-1/0;for(const o in e){if(!Object.hasOwn(e,o))continue;const c=e[o].yAxisId;if(!(c===t.id||c===void 0&&r))continue;const d=i==null?void 0:i({currentAxisId:t.id,isDefaultAxis:r,seriesXAxisId:e[o].xAxisId,seriesYAxisId:e[o].yAxisId}),f=e[o].data??[];for(let p=0;p<f.length;p+=1){const g=f[p];d&&!d(g,p)||g.y!==null&&(g.y<a&&(a=g.y),g.y>s&&(s=g.y))}}return[a,s]},rie=({series:n,seriesOrder:e},t)=>({series:Object.fromEntries(Object.entries(n).map(([i,a])=>{const s=a==null?void 0:a.datasetKeys,o=["x","y","id"].filter(d=>typeof(s==null?void 0:s[d])!="string");if(a!=null&&a.datasetKeys&&o.length>0)throw new Error([`MUI X Charts: scatter series with id='${i}' has incomplete datasetKeys.`,`Properties ${o.map(d=>`"${d}"`).join(", ")} are missing.`].join(`
`));const c=s?(t==null?void 0:t.map(d=>({x:d[s.x]??null,y:d[s.y]??null,z:s.z&&d[s.z],id:s.id&&d[s.id]})))??[]:a.data??[];return[i,H({labelMarkType:"circle",markerSize:4},a,{preview:H({markerSize:1},a==null?void 0:a.preview),data:c,valueFormatter:a.valueFormatter??(d=>d&&`(${d.x}, ${d.y})`)})]})),seriesOrder:e}),iie=(n,e,t,r)=>{const i=r==null?void 0:r.colorScale,a=t==null?void 0:t.colorScale,s=e==null?void 0:e.colorScale;return i?o=>{var f,p;if(o===void 0)return n.color;if(((f=r==null?void 0:r.data)==null?void 0:f[o])!==void 0){const g=i((p=r==null?void 0:r.data)==null?void 0:p[o]);if(g!==null)return g}const c=n.data[o],d=c===null?n.color:i(c.z);return d===null?n.color:d}:a?o=>{if(o===void 0)return n.color;const c=n.data[o],d=c===null?n.color:a(c.y);return d===null?n.color:d}:s?o=>{if(o===void 0)return n.color;const c=n.data[o],d=c===null?n.color:s(c.x);return d===null?n.color:d}:()=>n.color},aie=n=>{const{seriesOrder:e,series:t}=n;return e.reduce((r,i)=>{const a=qi(t[i].label,"legend");return a===void 0||r.push({markType:t[i].labelMarkType,id:i,seriesId:i,color:t[i].color,label:a}),r},[])},sie=n=>{const{series:e,getColor:t,identifier:r}=n;if(!r||r.dataIndex===void 0)return null;const i=qi(e.label,"tooltip"),a=e.data[r.dataIndex],s=e.valueFormatter(a,{dataIndex:r.dataIndex});return{identifier:r,color:t(r.dataIndex),label:i,value:a,formattedValue:s,markType:e.labelMarkType}},oie=(n,e,t)=>H({id:n.id??`auto-generated-id-${e}`,color:t[e%t.length]},n),lie={seriesProcessor:rie,colorProcessor:iie,legendGetter:aie,tooltipGetter:sie,xExtremumGetter:tie,yExtremumGetter:nie,getSeriesWithDefaultValues:oie},cie=n=>{const{axis:e}=n;return w6(e.data??[])};function uie(n,e,t,r){return t.reduce((i,a,s)=>{if(e[s]===null)return i;const[o,c]=n(a);return r&&(!r({y:o,x:null},s)||!r({y:c,x:null},s))?i:[Math.min(o,c,i[0]),Math.max(o,c,i[1])]},[1/0,-1/0])}const die=n=>{const{series:e,axis:t,isDefaultAxis:r,getFilters:i}=n;return Object.keys(e).filter(a=>{const s=e[a].yAxisId;return s===t.id||r&&s===void 0}).reduce((a,s)=>{const{area:o,stackedData:c,data:d}=e[s],f=o!==void 0,p=i==null?void 0:i({currentAxisId:t.id,isDefaultAxis:r,seriesXAxisId:e[s].xAxisId,seriesYAxisId:e[s].yAxisId}),g=f&&t.scaleType!=="log"&&typeof e[s].baseline!="string"?A=>A:A=>[A[1],A[1]],y=uie(g,d,c,p),[v,b]=y;return[Math.min(v,a[0]),Math.max(b,a[1])]},[1/0,-1/0])};function fie(n,e){const t={};return Object.keys(n).forEach(r=>{t[r]=H({},n[r],{valueFormatter:n[r].valueFormatter??e})}),t}const hie=(n,e)=>{const{seriesOrder:t,series:r}=n,i=R6(H({},n,{defaultStrategy:{stackOffset:"none"}})),a=e??[];t.forEach(o=>{const c=r[o].data;c!==void 0&&c.forEach((d,f)=>{a.length<=f?a.push({[o]:d}):a[f][o]=d})});const s={};return i.forEach(o=>{const{ids:c,stackingOrder:d,stackingOffset:f}=o,p=T6().keys(c.map(g=>{const y=r[g].dataKey;return r[g].data===void 0&&y!==void 0?y:g})).value((g,y)=>g[y]??0).order(d).offset(f)(a);c.forEach((g,y)=>{const v=r[g].dataKey;s[g]=H({labelMarkType:"line"},r[g],{data:v?e.map(b=>{const A=b[v];return typeof A!="number"?null:A}):r[g].data,stackedData:p[y].map(([b,A])=>[b,A])})})}),{seriesOrder:t,stackingGroups:i,series:fie(s,o=>o==null?"":o.toLocaleString())}},pie=(n,e,t)=>{const r=t==null?void 0:t.colorScale,i=e==null?void 0:e.colorScale;return r?a=>{if(a===void 0)return n.color;const s=n.data[a],o=s===null?n.color:r(s);return o===null?n.color:o}:i?a=>{var c;if(a===void 0)return n.color;const s=(c=e.data)==null?void 0:c[a],o=s===null?n.color:i(s);return o===null?n.color:o}:()=>n.color},gie=n=>{const{seriesOrder:e,series:t}=n;return e.reduce((r,i)=>{const a=qi(t[i].label,"legend");return a===void 0||r.push({markType:t[i].labelMarkType,id:i,seriesId:i,color:t[i].color,label:a}),r},[])},mie=n=>{const{series:e,getColor:t,identifier:r}=n;if(!r||r.dataIndex===void 0)return null;const i=qi(e.label,"tooltip"),a=e.data[r.dataIndex],s=e.valueFormatter(a,{dataIndex:r.dataIndex});return{identifier:r,color:t(r.dataIndex),label:i,value:a,formattedValue:s,markType:e.labelMarkType}},yie=n=>Object.values(n).map(e=>({direction:"x",axisId:e.xAxisId})),vie=(n,e,t)=>H({id:n.id??`auto-generated-id-${e}`,color:t[e%t.length]},n),xie={colorProcessor:pie,seriesProcessor:hie,legendGetter:gie,tooltipGetter:mie,axisTooltipGetter:yie,xExtremumGetter:cie,yExtremumGetter:die,getSeriesWithDefaultValues:vie},wie=(n="none")=>{if(typeof n=="function")return n;switch(n){case"none":return null;case"desc":return(e,t)=>t-e;case"asc":return(e,t)=>e-t;default:return null}},_ie=n=>{const{seriesOrder:e,series:t}=n,r={};return e.forEach(i=>{const a=Bre().startAngle(2*Math.PI*(t[i].startAngle??0)/360).endAngle(2*Math.PI*(t[i].endAngle??360)/360).padAngle(2*Math.PI*(t[i].paddingAngle??0)/360).sortValues(wie(t[i].sortingValues??"none"))(t[i].data.map(s=>s.value));r[i]=H({labelMarkType:"circle",valueFormatter:s=>s.value.toLocaleString()},t[i],{data:t[i].data.map((s,o)=>H({},s,{id:s.id??`auto-generated-pie-id-${i}-${o}`},a[o])).map((s,o)=>{var c,d;return H({labelMarkType:"circle"},s,{formattedValue:((d=(c=t[i]).valueFormatter)==null?void 0:d.call(c,H({},s,{label:qi(s.label,"arc")}),{dataIndex:o}))??s.value.toLocaleString()})})})}),{seriesOrder:e,series:r}},bie=n=>e=>n.data[e].color,Aie=n=>{const{seriesOrder:e,series:t}=n;return e.reduce((r,i)=>(t[i].data.forEach((a,s)=>{const o=qi(a.label,"legend");o!==void 0&&r.push({markType:a.labelMarkType??t[i].labelMarkType,id:a.id??s,seriesId:i,color:a.color,label:o,itemId:a.id??s})}),r),[])},Eie=n=>{const{series:e,getColor:t,identifier:r}=n;if(!r||r.dataIndex===void 0)return null;const i=e.data[r.dataIndex];if(i==null)return null;const a=qi(i.label,"tooltip"),s=H({},i,{label:a}),o=e.valueFormatter(s,{dataIndex:r.dataIndex});return{identifier:r,color:t(r.dataIndex),label:a,value:s,formattedValue:o,markType:i.labelMarkType??e.labelMarkType}},Sie=(n,e,t)=>H({id:n.id??`auto-generated-id-${e}`},n,{data:n.data.map((r,i)=>H({color:t[i%t.length]},r))}),Tie={colorProcessor:bie,seriesProcessor:_ie,legendGetter:Aie,tooltipGetter:Eie,getSeriesWithDefaultValues:Sie},Cie={bar:eie,scatter:lie,line:xie,pie:Tie},Iie=[Z0,pf,hf,su];function Die(n){const{children:e,plugins:t=Iie,pluginParams:r={},seriesConfig:i=Cie}=n,{contextValue:a}=cee(t,r,i);return x.jsx(SP.Provider,{value:a,children:e})}const jl=()=>{const n=V.useContext(SP);if(n==null)throw new Error(["MUI X Charts: Could not find the Chart context.","It looks like you rendered your component outside of a ChartDataProvider.","This can also happen if you are bundling multiple versions of the library."].join(`
`));return n};function vn(){const n=jl();if(!n)throw new Error(["MUI X Charts: Could not find the charts context.","It looks like you rendered your component outside of a ChartContainer parent component."].join(`
`));return n.store}function ba(){const n=vn();return dt(n,Io)}function qb(){const n=vn();return dt(n,WJ)}function Xb(n){return n6.getTypes().has(n)}const Rie=(n,e,t,r,i,a,s)=>{var y;const o=r==="rotation"?i[e].rotationExtremumGetter:i[e].radiusExtremumGetter,c=((y=s[e])==null?void 0:y.series)??{},[d,f]=(o==null?void 0:o({series:c,axis:t,axisIndex:a,isDefaultAxis:a===0}))??[1/0,-1/0],[p,g]=n;return[Math.min(d,p),Math.max(f,g)]},Mie=(n,e,t,r,i)=>{const s=Object.keys(t).filter(Xb).reduce((o,c)=>Rie(o,c,n,e,t,r,i),[1/0,-1/0]);return Number.isNaN(s[0])||Number.isNaN(s[1])?[1/0,-1/0]:s},wd=(n,e)=>n===void 0?e:Math.PI*n/180,Oie=(n,e,t,r)=>{const i=new Set;return Object.keys(e).filter(Xb).forEach(s=>{var d,f,p;const o=((d=t[s])==null?void 0:d.series)??{},c=(p=(f=e[s]).axisTooltipGetter)==null?void 0:p.call(f,o);c!==void 0&&c.forEach(({axisId:g,direction:y})=>{y===n&&i.add(g??r)})}),i};function Pie(n,e,t){if(e==="rotation"){if(t.scaleType==="point"){const r=[wd(t.startAngle,0),wd(t.endAngle,2*Math.PI)],i=r[1]-r[0];return i>Math.PI*2-.1&&(r[1]-=i/t.data.length),r}return[wd(t.startAngle,0),wd(t.endAngle,2*Math.PI)]}return[0,Math.min(n.height,n.width)/2]}const kie=.2,Nie=.1;function O6({drawingArea:n,formattedSeries:e,axis:t,seriesConfig:r,axisDirection:i}){if(t===void 0)return{axis:{},axisIds:[]};const a=Oie(i,r,e,t[0].id),s={};return t.forEach((o,c)=>{const d=o,f=Pie(n,i,d),[p,g]=Mie(d,i,r,c,e),y=!d.ignoreTooltip&&a.has(d.id),v=d.data??[];if(rm(d)){const I=d.categoryGapRatio??kie,B=d.barGapRatio??Nie;if(s[d.id]=H({offset:0,categoryGapRatio:I,barGapRatio:B,triggerTooltip:y},d,{data:v,scale:iy(d.data,f).paddingInner(I).paddingOuter(I/2),tickNumber:d.data.length,colorScale:d.colorMap&&(d.colorMap.type==="ordinal"?Kd(H({values:d.data},d.colorMap)):Uc(d.colorMap))}),am(d.data)){const L=sm(d,f);s[d.id].valueFormatter=d.valueFormatter??L}}if(zb(d)&&(s[d.id]=H({offset:0,triggerTooltip:y},d,{data:v,scale:PP(d.data,f),tickNumber:d.data.length,colorScale:d.colorMap&&(d.colorMap.type==="ordinal"?Kd(H({values:d.data},d.colorMap)):Uc(d.colorMap))}),am(d.data))){const I=sm(d,f);s[d.id].valueFormatter=d.valueFormatter??I}if(d.scaleType==="band"||d.scaleType==="point")return;const b=d.scaleType??"linear",A=d.domainLimit??"nice",E=[d.min??p,d.max??g];if(typeof A=="function"){const{min:I,max:B}=A(p,g);E[0]=I,E[1]=B}const T=e6(H({},d,{range:f,domain:E})),C=t6(T,f),D=im(b,E,f),O=A==="nice"?D.nice(T):D,[N,M]=O.domain(),R=[d.min??N,d.max??M];s[d.id]=H({offset:0,triggerTooltip:y},d,{data:v,scaleType:b,scale:O.domain(R),tickNumber:C,colorScale:d.colorMap&&Uc(d.colorMap)})}),{axis:s,axisIds:t.map(({id:o})=>o)}}const P6=n=>n.polarAxis,k6=Ge([P6],n=>n==null?void 0:n.rotation),Lie=Ge([P6],n=>n==null?void 0:n.radius),ou=Ge([k6,Io,Wa,Do],(n,e,t,r)=>O6({drawingArea:e,formattedSeries:t,axis:n,seriesConfig:r,axisDirection:"rotation"})),Bie=Ge([Lie,Io,Wa,Do],(n,e,t,r)=>O6({drawingArea:e,formattedSeries:t,axis:n,seriesConfig:r,axisDirection:"radius"})),Vie=Ge([Io],n=>({cx:n.left+n.width/2,cy:n.top+n.height/2})),Fie=n=>(e,t)=>Math.atan2(e-n.cx,n.cy-t);function py(n){return(n%360+360)%360}const l2=2*Math.PI;function jie(n){return(n%l2+l2)%l2}function v3(n,e){const{scale:t,data:r,reverse:i}=n;if(!Ya(t))throw new Error("MUI X Charts: getAxisValue is not implemented for polare continuous axes.");if(!r)return-1;const a=jie(e-Math.min(...t.range())),s=t.bandwidth()===0?Math.floor((a+t.step()/2)/t.step())%r.length:Math.floor(a/t.step());return s<0||s>=r.length?-1:i?r.length-1-s:s}function Mo(){const n=vn(),{axis:e,axisIds:t}=dt(n,Xi);return{xAxis:e,xAxisIds:t}}function Ul(){const n=vn(),{axis:e,axisIds:t}=dt(n,Ki);return{yAxis:e,yAxisIds:t}}function Uie(n){const e=vn(),{axis:t,axisIds:r}=dt(e,Xi),i=r[0];return t[i]}function Hie(n){const e=vn(),{axis:t,axisIds:r}=dt(e,Ki),i=r[0];return t[i]}function N6(){const n=vn(),{axis:e,axisIds:t}=dt(n,ou);return{rotationAxis:e,rotationAxisIds:t}}function zie(){const n=vn(),{axis:e,axisIds:t}=dt(n,Bie);return{radiusAxis:e,radiusAxisIds:t}}function $ie(n){const e=vn(),{axis:t,axisIds:r}=dt(e,ou),i=r[0];return t[i]}function lm(n){return Ya(n)?e=>(n(e)??0)+n.bandwidth()/2:e=>n(e)}function Kb(){const n=vn(),{axis:e,axisIds:t}=dt(n,wre)??{axis:{},axisIds:[]};return{zAxis:e,zAxisIds:t}}function Qb(){const n=jl();if(!n)throw new Error(["MUI X Charts: Could not find the svg ref context.","It looks like you rendered your component outside of a ChartContainer parent component."].join(`
`));return n.svgRef}function gy(){const n=vn();return dt(n,Wa)}function Gie(n,e){if(n===e)return!0;if(!Array.isArray(n)||!Array.isArray(e))return!1;let t=n.length;if(t!==e.length)return!1;for(;t--;)if(n[t]!==e[t])return!1;return!0}function L6(n){const e=Ge([Wa,(t,r)=>r],(t,r)=>{var a,s,o,c,d,f;if(!r||Array.isArray(r)&&r.length===0)return((s=(a=t[n])==null?void 0:a.seriesOrder)==null?void 0:s.map(p=>{var g;return(g=t[n])==null?void 0:g.series[p]}))??[];if(!Array.isArray(r))return(c=(o=t[n])==null?void 0:o.series)==null?void 0:c[r];const i=[];for(const p of r){const g=(f=(d=t[n])==null?void 0:d.series)==null?void 0:f[p];g&&i.push(g)}return i});return t=>{const r=vn();return dt(r,e,[t],Gie)}}function B6(n){const e=Ge([Wa],t=>t[n]);return()=>{const t=vn();return dt(t,e)}}L6("pie");const Wie=B6("pie");function Yie(){return Wie()}L6("bar");const qie=B6("bar");function Xie(){return qie()}function Kie(){return!1}function V6(n,e){return!n||!e?Kie:function(r){return r?n.highlight==="series"?r.seriesId===e.seriesId:n.highlight==="item"?r.dataIndex===e.dataIndex&&r.seriesId===e.seriesId:!1:!1}}function Qie(){return!1}function F6(n,e){return!n||!e?Qie:function(r){return r?n.fade==="series"?r.seriesId===e.seriesId&&r.dataIndex!==e.dataIndex:n.fade==="global"?r.seriesId!==e.seriesId||r.dataIndex!==e.dataIndex:!1:!1}}const Zie=n=>n.highlight,Jie=n=>n.series,eae=Ge([Jie],n=>{const e=new Map;return Object.keys(n.processedSeries).forEach(t=>{var i;const r=n.processedSeries[t];(i=r==null?void 0:r.seriesOrder)==null||i.forEach(a=>{const s=r==null?void 0:r.series[a];e.set(a,s==null?void 0:s.highlightScope)})}),e}),J0=Ge([Zie],function(e){return e.item}),my=Ge([eae,J0],function(e,t){if(!t)return null;const r=e.get(t.seriesId);return r===void 0?null:r}),tae=Ge([my,J0],V6),nae=Ge([my,J0],F6),rae=Ge([my,J0,(n,e)=>e],function(e,t,r){return V6(e,t)(r)}),iae=Ge([my,J0,(n,e)=>e],function(e,t,r){return F6(e,t)(r)});function j6(n){const e=vn(),t=dt(e,rae,[n]),r=dt(e,iae,[n]);return{isHighlighted:t,isFaded:!t&&r}}function aae(){const n=vn(),e=dt(n,tae),t=dt(n,nae);return{isHighlighted:e,isFaded:t}}function sae(n,e){return Object.keys(n).flatMap(t=>{const r=e[t].legendGetter;return r===void 0?[]:r(n[t])})}function oae(){const n=gy(),e=vn(),t=dt(e,Do);return{items:sae(n,t)}}function lae(){const n=qb();return V.useCallback(e=>`${n}-gradient-${e}`,[n])}function cae(){const n=qb();return V.useCallback(e=>`${n}-gradient-${e}-object-bound`,[n])}var c2,x3;function uae(){if(x3)return c2;x3=1;var n=4,e=.001,t=1e-7,r=10,i=11,a=1/(i-1),s=typeof Float32Array=="function";function o(b,A){return 1-3*A+3*b}function c(b,A){return 3*A-6*b}function d(b){return 3*b}function f(b,A,E){return((o(A,E)*b+c(A,E))*b+d(A))*b}function p(b,A,E){return 3*o(A,E)*b*b+2*c(A,E)*b+d(A)}function g(b,A,E,T,C){var D,O,N=0;do O=A+(E-A)/2,D=f(O,T,C)-b,D>0?E=O:A=O;while(Math.abs(D)>t&&++N<r);return O}function y(b,A,E,T){for(var C=0;C<n;++C){var D=p(A,E,T);if(D===0)return A;var O=f(A,E,T)-b;A-=O/D}return A}function v(b){return b}return c2=function(A,E,T,C){if(!(0<=A&&A<=1&&0<=T&&T<=1))throw new Error("bezier x values must be in [0, 1] range");if(A===E&&T===C)return v;for(var D=s?new Float32Array(i):new Array(i),O=0;O<i;++O)D[O]=f(O*a,A,T);function N(M){for(var R=0,I=1,B=i-1;I!==B&&D[I]<=M;++I)R+=a;--I;var L=(M-D[I])/(D[I+1]-D[I]),k=R+L*a,F=p(k,A,T);return F>=e?y(M,k,A,T):F===0?k:g(M,R,R+a,A,T)}return function(R){return R===0?0:R===1?1:f(N(R),E,C)}},c2}var dae=uae();const fae=LN(dae),Zb=300,U6="cubic-bezier(0.66, 0, 0.34, 1)",hae=fae(.66,0,.34,1);var ef=0,$h=0,Dh=0,H6=1e3,cm,Gh,um=0,Xc=0,yy=0,A0=typeof performance=="object"&&performance.now?performance:Date,z6=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(n){setTimeout(n,17)};function Jb(){return Xc||(z6(pae),Xc=A0.now()+yy)}function pae(){Xc=0}function dm(){this._call=this._time=this._next=null}dm.prototype=$6.prototype={constructor:dm,restart:function(n,e,t){if(typeof n!="function")throw new TypeError("callback is not a function");t=(t==null?Jb():+t)+(e==null?0:+e),!this._next&&Gh!==this&&(Gh?Gh._next=this:cm=this,Gh=this),this._call=n,this._time=t,Iw()},stop:function(){this._call&&(this._call=null,this._time=1/0,Iw())}};function $6(n,e,t){var r=new dm;return r.restart(n,e,t),r}function Cw(){Jb(),++ef;for(var n=cm,e;n;)(e=Xc-n._time)>=0&&n._call.call(void 0,e),n=n._next;--ef}function w3(){Xc=(um=A0.now())+yy,ef=$h=0;try{Cw()}finally{ef=0,mae(),Xc=0}}function gae(){var n=A0.now(),e=n-um;e>H6&&(yy-=e,um=n)}function mae(){for(var n,e=cm,t,r=1/0;e;)e._call?(r>e._time&&(r=e._time),n=e,e=e._next):(t=e._next,e._next=null,e=n?n._next=t:cm=t);Gh=n,Iw(r)}function Iw(n){if(!ef){$h&&($h=clearTimeout($h));var e=n-Xc;e>24?(n<1/0&&($h=setTimeout(w3,n-A0.now()-yy)),Dh&&(Dh=clearInterval(Dh))):(Dh||(um=A0.now(),Dh=setInterval(gae,H6)),ef=1,z6(w3))}}function yae(n,e,t){var r=new dm;return e=e==null?0:+e,r.restart(i=>{r.stop(),n(i+e)},e,t),r}class vae{constructor(e,t,r){this.duration=void 0,this.elapsed=0,this.easingFn=void 0,this.timer=null,this.onTickCallback=void 0,this.duration=e,this.easingFn=t,this.onTickCallback=r,this.resume()}get running(){return this.timer!==null}timerCallback(e){this.elapsed=Math.min(e,this.duration);const t=this.duration===0?1:this.elapsed/this.duration,r=this.easingFn(t);this.onTickCallback(r),this.elapsed>=this.duration&&this.stop()}resume(){if(this.running||this.elapsed>=this.duration)return this;const e=Jb()-this.elapsed;return this.timer=$6(t=>this.timerCallback(t),0,e),Cw(),this}stop(){return this.running?(this.timer&&(this.timer.stop(),this.timer=null),this):this}finish(){return this.stop(),yae(()=>this.timerCallback(this.duration)),Cw(),this}}function xae(n,e){if(Object.is(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;const t=Object.keys(n),r=Object.keys(e);if(t.length!==r.length)return!1;for(let i=0;i<t.length;i+=1){const a=t[i];if(!Object.prototype.hasOwnProperty.call(e,a)||!Object.is(n[a],e[a]))return!1}return!0}function wae(n,{createInterpolator:e,applyProps:t,skip:r,initialProps:i=n}){const a=V.useRef(i),s=V.useRef(null),o=V.useRef(null),c=V.useRef(n);Gn(()=>{c.current=n},[n]),Gn(()=>{var p;r&&((p=s.current)==null||p.finish(),s.current=null,o.current=null,a.current=n)},[n,r]);const d=V.useCallback(p=>{const g=a.current,y=e(g,n);s.current=new vae(Zb,hae,v=>{const b=y(v);a.current=b,t(p,b)})},[t,e,n]);return V.useCallback(p=>{var y,v,b,A;if(p===null){(y=s.current)==null||y.stop();return}const g=o.current;if(g===p){if(xae(c.current,n)){(v=s.current)==null||v.resume();return}(b=s.current)==null||b.stop()}g&&((A=s.current)==null||A.stop()),o.current=p,(s.current||!r)&&d(p)},[d,n,r])}function ep(n,{createInterpolator:e,transformProps:t,applyProps:r,skip:i,initialProps:a=n,ref:s}){const o=t??(f=>f),c=wae(n,{initialProps:a,createInterpolator:e,applyProps:(f,p)=>r(f,o(p)),skip:i});return H({},t(i?n:a),{ref:ti(c,s)})}function _ae(n,e){const t=Qt(n.x,e.x),r=Qt(n.y,e.y),i=Qt(n.width,e.width),a=Qt(n.height,e.height);return s=>({x:t(s),y:r(s),width:i(s),height:a(s)})}function bae(n){const e={x:n.layout==="vertical"?n.x:n.xOrigin,y:n.layout==="vertical"?n.yOrigin:n.y,width:n.layout==="vertical"?n.width:0,height:n.layout==="vertical"?0:n.height};return ep({x:n.x,y:n.y,width:n.width,height:n.height},{createInterpolator:_ae,applyProps(t,r){t.setAttribute("x",r.x.toString()),t.setAttribute("y",r.y.toString()),t.setAttribute("width",r.width.toString()),t.setAttribute("height",r.height.toString())},transformProps:t=>t,initialProps:e,skip:n.skipAnimation,ref:n.ref})}function Aae(n,e){const t=Qt(n.x,e.x),r=Qt(n.y,e.y),i=Qt(n.width,e.width),a=Qt(n.height,e.height);return s=>({x:t(s),y:r(s),width:i(s),height:a(s)})}function Eae(n){const e={x:n.layout==="vertical"?n.x+n.width/2:n.xOrigin,y:n.layout==="vertical"?n.yOrigin:n.y+n.height/2,width:n.width,height:n.height},t={x:n.x+n.width/2,y:n.y+n.height/2,width:n.width,height:n.height};return ep(t,{createInterpolator:Aae,transformProps:r=>r,applyProps(r,i){r.setAttribute("x",i.x.toString()),r.setAttribute("y",i.y.toString()),r.setAttribute("width",i.width.toString()),r.setAttribute("height",i.height.toString())},initialProps:e,skip:n.skipAnimation,ref:n.ref})}function Sae(n,e){const t=Qt(n.startAngle,e.startAngle),r=Qt(n.endAngle,e.endAngle),i=Qt(n.innerRadius,e.innerRadius),a=Qt(n.outerRadius,e.outerRadius),s=Qt(n.paddingAngle,e.paddingAngle),o=Qt(n.cornerRadius,e.cornerRadius);return c=>({startAngle:t(c),endAngle:r(c),innerRadius:i(c),outerRadius:a(c),paddingAngle:s(c),cornerRadius:o(c)})}function Tae(n){const e={startAngle:(n.startAngle+n.endAngle)/2,endAngle:(n.startAngle+n.endAngle)/2,innerRadius:n.innerRadius,outerRadius:n.outerRadius,paddingAngle:n.paddingAngle,cornerRadius:n.cornerRadius};return ep({startAngle:n.startAngle,endAngle:n.endAngle,innerRadius:n.innerRadius,outerRadius:n.outerRadius,paddingAngle:n.paddingAngle,cornerRadius:n.cornerRadius},{createInterpolator:Sae,transformProps:t=>({d:E6().cornerRadius(t.cornerRadius)({padAngle:t.paddingAngle,innerRadius:t.innerRadius,outerRadius:t.outerRadius,startAngle:t.startAngle,endAngle:t.endAngle}),visibility:t.startAngle===t.endAngle?"hidden":"visible"}),applyProps(t,r){t.setAttribute("d",r.d),t.setAttribute("visibility",r.visibility)},initialProps:e,skip:n.skipAnimation,ref:n.ref})}function Cae(n,e){const t=Qt(n.startAngle,e.startAngle),r=Qt(n.endAngle,e.endAngle),i=Qt(n.innerRadius,e.innerRadius),a=Qt(n.outerRadius,e.outerRadius),s=Qt(n.paddingAngle,e.paddingAngle),o=Qt(n.cornerRadius,e.cornerRadius);return c=>({startAngle:t(c),endAngle:r(c),innerRadius:i(c),outerRadius:a(c),paddingAngle:s(c),cornerRadius:o(c)})}function Iae(n){const e={startAngle:(n.startAngle+n.endAngle)/2,endAngle:(n.startAngle+n.endAngle)/2,innerRadius:n.arcLabelRadius??n.innerRadius,outerRadius:n.arcLabelRadius??n.outerRadius,paddingAngle:n.paddingAngle,cornerRadius:n.cornerRadius};return ep({startAngle:n.startAngle,endAngle:n.endAngle,innerRadius:(n==null?void 0:n.arcLabelRadius)??n.innerRadius,outerRadius:(n==null?void 0:n.arcLabelRadius)??n.outerRadius,paddingAngle:n.paddingAngle,cornerRadius:n.cornerRadius},{createInterpolator:Cae,transformProps:t=>{const[r,i]=E6().cornerRadius(t.cornerRadius).centroid({padAngle:t.paddingAngle,startAngle:t.startAngle,endAngle:t.endAngle,innerRadius:t.innerRadius,outerRadius:t.outerRadius});return{x:r,y:i}},applyProps(t,{x:r,y:i}){t.setAttribute("x",r.toString()),t.setAttribute("y",i.toString())},initialProps:e,skip:n.skipAnimation,ref:n.ref})}function Dae(){return jl().chartRootRef}const Rae={"image/png":"PNG","image/jpeg":"JPEG","image/webp":"WebP"},Mae=n=>({components:{MuiChartsLocalizationProvider:{defaultProps:{localeText:H({},n)}}}}),G6={loading:"Loading data…",noData:"No data to display",zoomIn:"Zoom in",zoomOut:"Zoom out",toolbarExport:"Export",toolbarExportPrint:"Print",toolbarExportImage:n=>`Export as ${Rae[n]??n}`},Oae=G6;Mae(G6);const Pae=["localeText"],Dw=V.createContext(null);function kae(n){const{localeText:e}=n,t=Ne(n,Pae),{localeText:r}=V.useContext(Dw)??{localeText:void 0},i=xt({props:t,name:"MuiChartsLocalizationProvider"}),{children:a,localeText:s}=i,o=V.useMemo(()=>H({},Oae,s,r,e),[s,r,e]),c=V.useMemo(()=>({localeText:o}),[o]);return x.jsx(Dw.Provider,{value:c,children:a})}const W6=()=>{const n=V.useContext(Dw);if(n===null)throw new Error(["MUI X Charts: Can not find the charts localization context.","It looks like you forgot to wrap your component in ChartsLocalizationProvider.","This can also happen if you are bundling multiple versions of the `@mui/x-charts` package"].join(`
`));return n};function Nae(n){const{id:e,offset:t}=n,{left:r,top:i,width:a,height:s}=ba(),o=H({top:0,right:0,bottom:0,left:0},t);return x.jsx("clipPath",{id:e,children:x.jsx("rect",{x:r-o.left,y:i-o.top,width:a+o.left+o.right,height:s+o.top+o.bottom})})}function Lae(){return typeof window>"u"}const qg=new Map,Bae=2e3,Vae={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},Fae=["minWidth","maxWidth","width","minHeight","maxHeight","height","top","left","fontSize","padding","margin","paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom"],_3="mui_measurement_span";function Y6(n,e){return Fae.indexOf(n)>=0&&e===+e?`${e}px`:e}function q6(n){return n.split("").reduce((r,i)=>i===i.toUpperCase()?[...r,"-",i.toLowerCase()]:[...r,i],[]).join("")}const jae=n=>Object.keys(n).sort().reduce((e,t)=>`${e}${q6(t)}:${Y6(t,n[t])};`,"");let u2;const tp=(n,e={})=>{if(n==null||Lae())return{width:0,height:0};const t=`${n}`,r=jae(e),i=`${t}-${r}`,a=qg.get(i);if(a)return a;try{let s=document.getElementById(_3);s===null&&(s=document.createElement("span"),s.setAttribute("id",_3),s.setAttribute("aria-hidden","true"),document.body.appendChild(s));const o=H({},Vae,e);Object.keys(o).map(f=>(s.style[q6(f)]=Y6(f,o[f]),f)),s.textContent=t;const c=s.getBoundingClientRect(),d={width:c.width,height:c.height};return qg.set(i,d),qg.size+1>Bae&&qg.clear(),u2&&clearTimeout(u2),u2=setTimeout(()=>{s.textContent=""},0),d}catch{return{width:0,height:0}}};function X6({style:n,needsComputation:e,text:t}){return t.split(`
`).map(r=>H({text:r},e?tp(r,n):{width:0,height:0}))}function eA(){const[n,e]=V.useState(typeof window<"u"||!1);return V.useEffect(()=>{e(!0)},[]),n}const Uae=["x","y","style","text","ownerState"],Hae=["angle","textAnchor","dominantBaseline"];function fm(n){const{x:e,y:t,style:r,text:i}=n,a=Ne(n,Uae),s=r??{},{angle:o,textAnchor:c,dominantBaseline:d}=s,f=Ne(s,Hae),p=eA(),g=V.useMemo(()=>X6({style:f,needsComputation:p&&i.includes(`
`),text:i}),[f,i,p]);let y;switch(d){case"hanging":case"text-before-edge":y=0;break;case"central":y=(g.length-1)/2*-g[0].height;break;default:y=(g.length-1)*-g[0].height;break}return x.jsx("text",H({},a,{transform:o?`rotate(${o}, ${e}, ${t})`:void 0,x:e,y:t,textAnchor:c,dominantBaseline:d,style:f,children:g.map((v,b)=>x.jsx("tspan",{x:e,dy:`${b===0?y:g[0].height}px`,dominantBaseline:d,children:v.text},b))}))}function tA(n){return typeof n=="number"&&!Number.isFinite(n)}const d2={start:0,extremities:0,end:1,middle:.5};function zae(n){const{scale:e,tickNumber:t,valueFormatter:r,tickInterval:i,tickPlacement:a="extremities",tickLabelPlacement:s,isInside:o}=n;if(Ya(e)){const g=e.domain(),y=s??"middle";return e.bandwidth()>0?[...(typeof i=="function"&&g.filter(i)||typeof i=="object"&&i||g).map(A=>{const E=`${A}`;return{value:A,formattedValue:(r==null?void 0:r(A,{location:"tick",scale:e,tickNumber:t,defaultTickLabel:E}))??E,offset:e(A)-(e.step()-e.bandwidth())/2+d2[a]*e.step(),labelOffset:y==="tick"?0:e.step()*(d2[y]-d2[a])}}),...a==="extremities"?[{formattedValue:void 0,offset:e.range()[1],labelOffset:0}]:[]]:(typeof i=="function"&&g.filter(i)||typeof i=="object"&&i||g).map(b=>{const A=`${b}`;return{value:b,formattedValue:(r==null?void 0:r(b,{location:"tick",scale:e,tickNumber:t,defaultTickLabel:A}))??A,offset:e(b),labelOffset:0}})}if(e.domain().some(tA))return[];const d=s,f=typeof i=="object"?i:e.ticks(t),p=[];for(let g=0;g<f.length;g+=1){const y=f[g],v=e(y);if(o(v)){const b=e.tickFormat(t)(y);p.push({value:y,formattedValue:(r==null?void 0:r(y,{location:"tick",scale:e,tickNumber:t,defaultTickLabel:b}))??b,offset:v,labelOffset:d==="middle"?e(f[g-1]??0)-(v+e(f[g-1]??0))/2:0})}}return p}function vy(n){const{scale:e,tickNumber:t,valueFormatter:r,tickInterval:i,tickPlacement:a="extremities",tickLabelPlacement:s,direction:o}=n,{instance:c}=jl(),d=o==="x"?c.isXInside:c.isYInside;return V.useMemo(()=>zae({scale:e,tickNumber:t,tickPlacement:a,tickInterval:i,tickLabelPlacement:s,valueFormatter:r,isInside:d}),[e,t,a,i,s,r,d])}function $ae(n=!1){const[e,t]=V.useState(!1);return Gn(()=>{n||t(!0)},[n]),V.useEffect(()=>{n&&t(!0)},[n]),e}const K6=typeof window<"u"&&"Intl"in window&&"Segmenter"in Intl?new Intl.Segmenter(void 0,{granularity:"grapheme"}):null;function Gae(n){return n.length}function Wae(n){const e=K6.segment(n);let t=0;for(const r of e)t+=1;return t}const Yae=K6?Wae:Gae;function qae(n){return n*(Math.PI/180)}const Q6=typeof window<"u"&&"Intl"in window&&"Segmenter"in Intl?new Intl.Segmenter(void 0,{granularity:"grapheme"}):null;function Xae(n,e){return n.slice(0,e)}function Kae(n,e){const t=Q6.segment(n);let r="",i=0;for(const a of t)if(r+=a.segment,i+=1,i>=e)break;return r}const Qae=Q6?Kae:Xae,b3="…";function Z6(n,e){const{width:t,height:r,measureText:i}=e,a=qae(e.angle),s=i(n),o=Math.abs(s.width*Math.cos(a))+Math.abs(s.height*Math.sin(a)),c=Math.abs(s.width*Math.sin(a))+Math.abs(s.height*Math.cos(a));return o<=t&&c<=r}function J6(n,e){if(e(n))return n;let t=n,r=1,i=1/2;const a=Yae(n);let s=a,o=a,c=null;do{if(o=s,s=Math.floor(a*i),s===0)break;t=Qae(n,s).trim();const d=e(t+b3);r+=1,d?(c=t,i+=1/2**r):i-=1/2**r}while(Math.abs(s-o)!==1);return c?c+b3:""}function Zae(n,e,t,r,i){const a=new Map,s=py((i==null?void 0:i.angle)??0);let o=1,c=1;(i==null?void 0:i.textAnchor)==="start"?(o=1/0,c=1):(i==null?void 0:i.textAnchor)==="end"?(o=1,c=1/0):(o=2,c=2),s>90&&s<270&&([o,c]=[c,o]),r&&([o,c]=[c,o]);for(const d of n)if(d.formattedValue){const f=Math.min((d.offset+d.labelOffset)*o,(e.left+e.width+e.right-d.offset-d.labelOffset)*c),p=g=>Z6(g,{width:f,height:t,angle:s,measureText:y=>tp(y,i)});a.set(d,J6(d.formattedValue.toString(),p))}return a}const A3=5;function Jae(n,e,t=0){const r=Math.min(Math.abs(t)%180,Math.abs(Math.abs(t)%180-180)%180);if(r<A3)return n;if(r>90-A3)return e;const i=wd(r),a=Math.atan2(e,n);return i<a?n/Math.cos(i):e/Math.sin(i)}function ese(n,{tickLabelStyle:e,tickLabelInterval:t,tickLabelMinGap:r,reverse:i,isMounted:a,isXInside:s}){const o=f=>{if(!a||f.formattedValue===void 0)return{width:0,height:0};const p=X6({style:e,needsComputation:!0,text:f.formattedValue});return{width:Math.max(...p.map(g=>g.width)),height:Math.max(p.length*p[0].height)}};if(typeof t=="function")return new Set(n.filter((f,p)=>t(f.value,p)));let c=0;const d=i?-1:1;return new Set(n.filter((f,p)=>{const{offset:g,labelOffset:y}=f,v=g+y;if(p>0&&d*v<d*(c+r)||!s(v))return!1;const{width:b,height:A}=o(f),E=Jae(b,A,e==null?void 0:e.angle),T=v-d*E/2;return p>0&&d*T<d*(c+r)?!1:(c=v+d*E/2,!0)}))}function ek(n){return Dt("MuiChartsAxis",n)}const Xg=Rt("MuiChartsAxis",["root","line","tickContainer","tick","tickLabel","label","directionX","directionY","top","bottom","left","right","id"]),tk=Me("g",{name:"MuiChartsAxis",slot:"Root"})(({theme:n})=>({[`& .${Xg.tickLabel}`]:H({},n.typography.caption,{fill:(n.vars||n).palette.text.primary}),[`& .${Xg.label}`]:{fill:(n.vars||n).palette.text.primary},[`& .${Xg.line}`]:{stroke:(n.vars||n).palette.text.primary,shapeRendering:"crispEdges",strokeWidth:1},[`& .${Xg.tick}`]:{stroke:(n.vars||n).palette.text.primary,shapeRendering:"crispEdges"}})),tse=n=>{const{classes:e,position:t,id:r}=n,i={root:["root","directionX",t,`id-${r}`],line:["line"],tickContainer:["tickContainer"],tick:["tick"],tickLabel:["tickLabel"],label:["label"]};return yt(i,ek,e)},Rw=3,nse=4,nk=Me(tk,{name:"MuiChartsXAxis",slot:"Root"})({}),rse={disableLine:!1,disableTicks:!1,tickSize:6,tickLabelMinGap:4};function rk(n){const e=py(n);return e<=30||e>=330||e<=210&&e>=150?"middle":e<=180?"end":"start"}function ik(n){const e=py(n);return e<=30||e>=330?"hanging":e<=210&&e>=150?"auto":"central"}function ak(n){switch(n){case"start":return"end";case"end":return"start";default:return n}}const ise=["scale","tickNumber","reverse"],sk=n=>{const{xAxis:e,xAxisIds:t}=Mo(),r=e[n.axisId??t[0]],{scale:i,tickNumber:a,reverse:s}=r,o=Ne(r,ise),c=xt({props:H({},o,n),name:"MuiChartsXAxis"}),d=H({},rse,c),{position:f,tickLabelStyle:p,labelStyle:g,slots:y,slotProps:v}=d,b=Kc(),A=wa(),E=tse(d),T=f==="bottom"?1:-1,C=(y==null?void 0:y.axisLine)??"line",D=(y==null?void 0:y.axisTick)??"line",O=(y==null?void 0:y.axisTickLabel)??fm,N=(y==null?void 0:y.axisLabel)??fm,M=rk((f==="bottom"?0:180)-((p==null?void 0:p.angle)??0)),R=ik((f==="bottom"?0:180)-((p==null?void 0:p.angle)??0)),I=Et({elementType:O,externalSlotProps:v==null?void 0:v.axisTickLabel,additionalProps:{style:H({},b.typography.caption,{fontSize:12,lineHeight:1.25,textAnchor:A?ak(M):M,dominantBaseline:R},p)},className:E.tickLabel,ownerState:{}}),B=Et({elementType:N,externalSlotProps:v==null?void 0:v.axisLabel,additionalProps:{style:H({},b.typography.body1,{lineHeight:1,fontSize:14,textAnchor:"middle",dominantBaseline:f==="bottom"?"text-after-edge":"text-before-edge"},g)},ownerState:{}}),L=i.domain(),k=Ya(i),F=k&&L.length===0||!k&&L.some(tA)||f==="none";return{xScale:i,defaultizedProps:d,tickNumber:a,positionSign:T,skipAxisRendering:F,classes:E,Line:C,Tick:D,TickLabel:O,Label:N,axisTickLabelProps:I,axisLabelProps:B,reverse:s,isRtl:A}};function ase(n){const{xScale:e,defaultizedProps:t,tickNumber:r,positionSign:i,skipAxisRendering:a,classes:s,Line:o,Tick:c,TickLabel:d,Label:f,axisTickLabelProps:p,axisLabelProps:g,reverse:y,isRtl:v}=sk(n),b=$ae(),{position:A,disableLine:E,disableTicks:T,label:C,tickSize:D,valueFormatter:O,slotProps:N,tickInterval:M,tickLabelInterval:R,tickPlacement:I,tickLabelPlacement:B,tickLabelMinGap:L,sx:k,offset:F,height:q}=t,X=ba(),{left:G,top:Y,width:Q,height:Z}=X,{instance:fe}=jl(),ge=eA(),we=T?4:D,Ae=vy({scale:e,tickNumber:r,valueFormatter:O,tickInterval:M,tickPlacement:I,tickLabelPlacement:B,direction:"x"}),Pe=ese(Ae,{tickLabelStyle:p.style,tickLabelInterval:R,tickLabelMinGap:L,reverse:y,isMounted:b,isXInside:fe.isXInside});if(a)return null;const Re=C?tp(C,g.style).height:0,He={x:G+Q/2,y:i*q},Ue=Math.max(0,q-(C?Re+nse:0)-we-Rw),Qe=ge?Zae(Pe,X,Ue,v,p.style):new Map(Array.from(Pe).map(ae=>[ae,ae.formattedValue]));return x.jsxs(nk,{transform:`translate(0, ${A==="bottom"?Y+Z+F:Y-F})`,className:s.root,sx:k,children:[!E&&x.jsx(o,H({x1:G,x2:G+Q,className:s.line},N==null?void 0:N.axisLine)),Ae.map((ae,me)=>{const{offset:he,labelOffset:te}=ae,Le=te??0,ve=i*(we+Rw),je=fe.isXInside(he),De=Qe.get(ae),Ce=Pe.has(ae);return x.jsxs("g",{transform:`translate(${he}, 0)`,className:s.tickContainer,children:[!T&&je&&x.jsx(c,H({y2:i*we,className:s.tick},N==null?void 0:N.axisTick)),De!==void 0&&Ce&&x.jsx(d,H({x:Le,y:ve},p,{text:De}))]},me)}),C&&x.jsx("g",{className:s.label,children:x.jsx(f,H({},He,g,{text:C}))})]})}const Rh={start:0,extremities:0,end:1,middle:.5,tick:0};function sse(n){const{scale:e,tickInterval:t,tickLabelPlacement:r="middle",tickPlacement:i="extremities",groups:a}=n;return V.useMemo(()=>{const s=e.domain(),o=typeof t=="function"&&s.filter(t)||typeof t=="object"&&t||s;if(e.bandwidth()>0){const c=E3(o,a,i,r,e);return c[0]&&(c[0].ignoreTick=!0),[{formattedValue:void 0,offset:e.range()[0],labelOffset:0,groupIndex:a.length-1},...c,{formattedValue:void 0,offset:e.range()[1],labelOffset:0,groupIndex:a.length-1}]}return E3(o,a,i,r,e)},[e,t,a,i,r])}function E3(n,e,t,r,i){const a=[],s=new Map;let o=0;for(let c=0;c<e.length;c+=1)for(let d=0;d<n.length;d+=1){const f=n[d],p=e[c].getValue(f,d),g=a[a.length-1];if((g==null?void 0:g.value)!==p||(g==null?void 0:g.groupIndex)!==c){o=1;const v=Ya(i)?i(f)-(i.step()-i.bandwidth())/2+Rh[t]*i.step():i(f),b=i.step()*o*(Rh[r]-Rh[t]);a.push({value:p,formattedValue:`${p}`,offset:v,groupIndex:c,dataIndex:d,ignoreTick:!1,labelOffset:b}),s.has(d)||s.set(d,new Set);const A=s.get(d);for(const E of A.values())a[E].ignoreTick=!0;A.add(a.length-1)}else{o+=1;const v=i.step()*o*(Rh[r]-Rh[t]);g.labelOffset=v}}return a}const S3={tickSize:6},ose=(n,e,t)=>{const r=n[e]??{},i=t??S3.tickSize,a=i*e*2+i;return H({},S3,r,{tickSize:r.tickSize??a})};function lse(n){const{xScale:e,defaultizedProps:t,positionSign:r,skipAxisRendering:i,classes:a,Line:s,Tick:o,TickLabel:c,Label:d,axisTickLabelProps:f,axisLabelProps:p}=sk(n);if(!Ya(e))throw new Error("MUI X Charts: ChartsGroupedXAxis only supports the `band` and `point` scale types.");const{position:g,disableLine:y,disableTicks:v,label:b,tickSize:A,valueFormatter:E,slotProps:T,tickInterval:C,tickPlacement:D,tickLabelPlacement:O,sx:N,offset:M,height:R}=t,I=t.groups,B=ba(),{left:L,top:k,width:F,height:q}=B,{instance:X}=jl(),G={x:L+F/2,y:r*R},Y=sse({scale:e,tickInterval:C,tickPlacement:D,tickLabelPlacement:O,groups:I});return i?null:x.jsxs(nk,{transform:`translate(0, ${g==="bottom"?k+q+M:k-M})`,className:a.root,sx:N,children:[!y&&x.jsx(s,H({x1:L,x2:L+F,className:a.line},T==null?void 0:T.axisLine)),Y.map((Q,Z)=>{const{offset:fe,labelOffset:ge}=Q,we=ge??0,Ae=X.isXInside(fe),Pe=Q.formattedValue,Re=Q.ignoreTick??!1,He=Q.groupIndex??0,Ue=ose(I,He,A),Qe=r*Ue.tickSize,ae=r*(Ue.tickSize+Rw);return x.jsxs("g",{transform:`translate(${fe}, 0)`,className:a.tickContainer,"data-group-index":He,children:[!v&&!Re&&Ae&&x.jsx(o,H({y2:Qe,className:a.tick},T==null?void 0:T.axisTick)),Pe!==void 0&&x.jsx(c,H({x:we,y:ae},f,{text:Pe}))]},Z)}),b&&x.jsx("g",{className:a.label,children:x.jsx(d,H({},G,p,{text:b}))})]})}function cse(n){const{xAxis:e,xAxisIds:t}=Mo(),r=e[n.axisId??t[0]];return"groups"in r&&Array.isArray(r.groups)?x.jsx(lse,H({},n)):x.jsx(ase,H({},n))}function use(n,e,t,r,i){const a=new Map,s=py((i==null?void 0:i.angle)??0);let o=1,c=1;(i==null?void 0:i.textAnchor)==="start"?(o=1/0,c=1):(i==null?void 0:i.textAnchor)==="end"?(o=1,c=1/0):(o=2,c=2),s>180&&([o,c]=[c,o]),r&&([o,c]=[c,o]);for(const d of n)if(d.formattedValue){const f=Math.min((d.offset+d.labelOffset)*o,(e.top+e.height+e.bottom-d.offset-d.labelOffset)*c),p=g=>Z6(g,{width:t,height:f,angle:s,measureText:y=>tp(y,i)});a.set(d,J6(d.formattedValue.toString(),p))}return a}const dse=["scale","tickNumber"],fse=n=>{const{classes:e,position:t,id:r}=n,i={root:["root","directionY",t,`id-${r}`],line:["line"],tickContainer:["tickContainer"],tick:["tick"],tickLabel:["tickLabel"],label:["label"]};return yt(i,ek,e)},T3=2,hse=2,pse=Me(tk,{name:"MuiChartsYAxis",slot:"Root"})({}),gse={disableLine:!1,disableTicks:!1,tickSize:6};function mse(n){const{yAxisIds:e,yAxis:t}=Ul(),r=t[n.axisId??e[0]],{scale:i,tickNumber:a}=r,s=Ne(r,dse),o=xt({props:H({},s,n),name:"MuiChartsYAxis"}),c=H({},gse,o),{position:d,disableLine:f,disableTicks:p,label:g,labelStyle:y,tickLabelStyle:v,tickSize:b,valueFormatter:A,slots:E,slotProps:T,tickPlacement:C,tickLabelPlacement:D,tickInterval:O,tickLabelInterval:N,sx:M,offset:R,width:I}=c,B=Kc(),L=wa(),k=eA(),F=fse(c),{instance:q}=jl(),X=ba(),{left:G,top:Y,width:Q,height:Z}=X,fe=p?4:b,ge=vy({scale:i,tickNumber:a,valueFormatter:A,tickPlacement:C,tickLabelPlacement:D,tickInterval:O,direction:"y"}),we=d==="right"?1:-1,Ae=typeof(v==null?void 0:v.fontSize)=="number"?v.fontSize:12,Pe=(E==null?void 0:E.axisLine)??"line",Re=(E==null?void 0:E.axisTick)??"line",He=(E==null?void 0:E.axisTickLabel)??fm,Ue=(E==null?void 0:E.axisLabel)??fm,Qe=rk((d==="right"?-90:90)-((v==null?void 0:v.angle)??0)),ae=ik((d==="right"?-90:90)-((v==null?void 0:v.angle)??0)),me=Et({elementType:He,externalSlotProps:T==null?void 0:T.axisTickLabel,additionalProps:{style:H({},B.typography.caption,{fontSize:Ae,textAnchor:L?ak(Qe):Qe,dominantBaseline:ae},v)},className:F.tickLabel,ownerState:{}}),he=Et({elementType:Ue,externalSlotProps:T==null?void 0:T.axisLabel,additionalProps:{style:H({},B.typography.body1,{lineHeight:1,fontSize:14,angle:we*90,textAnchor:"middle",dominantBaseline:"text-before-edge"},y)},ownerState:{}}),te=Et({elementType:Pe,externalSlotProps:T==null?void 0:T.axisLine,additionalProps:{strokeLinecap:"square"},ownerState:{}}),Le=i.domain(),ve=Ya(i);if(ve&&Le.length===0||!ve&&Le.some(tA)||d==="none")return null;const je={x:we*I,y:Y+Z/2},De=Math.max(0,I-(g?tp(g,he.style).height+hse:0)-fe-T3),Ce=k?use(ge,X,De,L,me.style):new Map(Array.from(ge).map(We=>[We,We.formattedValue]));return x.jsxs(pse,{transform:`translate(${d==="right"?G+Q+R:G-R}, 0)`,className:F.root,sx:M,children:[!f&&x.jsx(Pe,H({y1:Y,y2:Y+Z,className:F.line},te)),ge.map((We,$e)=>{const{offset:Ie,labelOffset:Oe,value:ut}=We,wt=we*(fe+T3),pn=Oe,Dn=typeof N=="function"&&!(N!=null&&N(ut,$e)),tt=q.isYInside(Ie),rt=Ce.get(We);return tt?x.jsxs("g",{transform:`translate(0, ${Ie})`,className:F.tickContainer,children:[!p&&x.jsx(Re,H({x2:we*fe,className:F.tick},T==null?void 0:T.axisTick)),rt!==void 0&&!Dn&&x.jsx(He,H({x:wt,y:pn,text:rt},me))]},$e):null}),g&&k&&x.jsx("g",{className:F.label,children:x.jsx(Ue,H({},je,he,{text:g}))})]})}function yse(n){const{slots:e,slotProps:t}=n,{xAxisIds:r,xAxis:i}=Mo(),{yAxisIds:a,yAxis:s}=Ul();return x.jsxs(V.Fragment,{children:[r.map(o=>!i[o].position||i[o].position==="none"?null:x.jsx(cse,{slots:e,slotProps:t,axisId:o},o)),a.map(o=>!s[o].position||s[o].position==="none"?null:x.jsx(mse,{slots:e,slotProps:t,axisId:o},o))]})}function vse(n){return Dt("MuiChartsGrid",n)}const C3=Rt("MuiChartsGrid",["root","line","horizontalLine","verticalLine"]),xse=Me("g",{name:"MuiChartsGrid",slot:"Root",overridesResolver:(n,e)=>[{[`&.${C3.verticalLine}`]:e.verticalLine},{[`&.${C3.horizontalLine}`]:e.horizontalLine},e.root]})({}),ok=Me("line",{name:"MuiChartsGrid",slot:"Line"})(({theme:n})=>({stroke:(n.vars||n).palette.divider,shapeRendering:"crispEdges",strokeWidth:1}));function wse(n){const{axis:e,start:t,end:r,classes:i}=n,{scale:a,tickNumber:s,tickInterval:o}=e,c=vy({scale:a,tickNumber:s,tickInterval:o,direction:"x"});return x.jsx(V.Fragment,{children:c.map(({value:d,offset:f})=>{var p;return x.jsx(ok,{y1:t,y2:r,x1:f,x2:f,className:i.verticalLine},`vertical-${((p=d==null?void 0:d.getTime)==null?void 0:p.call(d))??d}`)})})}function _se(n){const{axis:e,start:t,end:r,classes:i}=n,{scale:a,tickNumber:s,tickInterval:o}=e,c=vy({scale:a,tickNumber:s,tickInterval:o,direction:"y"});return x.jsx(V.Fragment,{children:c.map(({value:d,offset:f})=>{var p;return x.jsx(ok,{y1:f,y2:f,x1:t,x2:r,className:i.horizontalLine},`horizontal-${((p=d==null?void 0:d.getTime)==null?void 0:p.call(d))??d}`)})})}const bse=["vertical","horizontal"],Ase=({classes:n})=>yt({root:["root"],verticalLine:["line","verticalLine"],horizontalLine:["line","horizontalLine"]},vse,n);function Ese(n){const e=xt({props:n,name:"MuiChartsGrid"}),t=ba(),{vertical:r,horizontal:i}=e,a=Ne(e,bse),{xAxis:s,xAxisIds:o}=Mo(),{yAxis:c,yAxisIds:d}=Ul(),f=Ase(e),p=c[d[0]],g=s[o[0]];return x.jsxs(xse,H({},a,{className:f.root,children:[r&&x.jsx(wse,{axis:g,start:t.top,end:t.height+t.top,classes:f}),i&&x.jsx(_se,{axis:p,start:t.left,end:t.width+t.left,classes:f})]}))}function Sse(n){return Dt("MuiChartsTooltip",n)}const hd=Rt("MuiChartsTooltip",["root","paper","table","row","cell","mark","markContainer","labelCell","valueCell","axisValueCell"]),xy=n=>yt({root:["root"],paper:["paper"],table:["table"],row:["row"],cell:["cell"],mark:["mark"],markContainer:["markContainer"],labelCell:["labelCell"],valueCell:["valueCell"],axisValueCell:["axisValueCell"]},Sse,n);function Tse(){var N,M,R;const n=vn(),e=dt(n,u6),t=dt(n,Do),r=gy(),{xAxis:i,xAxisIds:a}=Mo(),{yAxis:s,yAxisIds:o}=Ul(),{zAxis:c,zAxisIds:d}=Kb(),{rotationAxis:f,rotationAxisIds:p}=N6(),{radiusAxis:g,radiusAxisIds:y}=zie(),v=r.xAxisId??a[0],b=r.yAxisId??o[0],A=r.zAxisId??d[0],E=r.rotationAxisId??p[0],T=r.radiusAxisId??y[0];if(!e)return null;const C=(N=r[e.type])==null?void 0:N.series[e.seriesId];if(!C)return null;const D=((R=(M=t[C.type]).colorProcessor)==null?void 0:R.call(M,C,v&&i[v],b&&s[b],A&&c[A]))??(()=>""),O={};return v!==void 0&&(O.x=i[v]),b!==void 0&&(O.y=s[b]),E!==void 0&&(O.rotation=f[E]),T!==void 0&&(O.radius=g[T]),t[C.type].tooltipGetter({series:C,axesConfig:O,getColor:D,identifier:e})}const Mw=Me("div",{name:"MuiChartsTooltip",slot:"Container",overridesResolver:(n,e)=>e.paper})(({theme:n})=>{var e;return{backgroundColor:(n.vars||n).palette.background.paper,color:(n.vars||n).palette.text.primary,borderRadius:(e=(n.vars||n).shape)==null?void 0:e.borderRadius,border:`solid ${(n.vars||n).palette.divider} 1px`}}),Ow=Me("table",{name:"MuiChartsTooltip",slot:"Table"})(({theme:n})=>({borderSpacing:0,[`& .${hd.markContainer}`]:{display:"inline-block",width:`calc(20px + ${n.spacing(1.5)})`,verticalAlign:"middle"},"& caption":{borderBottom:`solid ${(n.vars||n).palette.divider} 1px`,padding:n.spacing(.5,1.5),textAlign:"start",whiteSpace:"nowrap","& span":{marginRight:n.spacing(1.5)}}})),Pw=Me("tr",{name:"MuiChartsTooltip",slot:"Row"})(({theme:n})=>({"tr:first-of-type& td":{paddingTop:n.spacing(.5)},"tr:last-of-type& td":{paddingBottom:n.spacing(.5)}})),_d=Me(se,{name:"MuiChartsTooltip",slot:"Cell"})(({theme:n})=>({verticalAlign:"middle",color:(n.vars||n).palette.text.secondary,textAlign:"start",[`&.${hd.cell}`]:{paddingLeft:n.spacing(1),paddingRight:n.spacing(1)},[`&.${hd.labelCell}`]:{fontWeight:n.typography.fontWeightRegular},[`&.${hd.valueCell}, &.${hd.axisValueCell}`]:{color:(n.vars||n).palette.text.primary,fontWeight:n.typography.fontWeightMedium},[`&.${hd.valueCell}`]:{paddingLeft:n.spacing(1.5),paddingRight:n.spacing(1.5)},"td:first-of-type&, th:first-of-type&":{paddingLeft:n.spacing(1.5)},"td:last-of-type&, th:last-of-type&":{paddingRight:n.spacing(1.5)}}));function Cse(n){return Dt("MuiChartsLabelMark",n)}const rd=Rt("MuiChartsLabelMark",["root","line","square","circle","mask","fill"]),Ise=n=>{const{type:e}=n;return yt({root:typeof e=="function"?["root"]:["root",e],mask:["mask"],fill:["fill"]},Cse,n.classes)},lk=(n,e,t)=>V.forwardRef(function(i,a){var g;const s=xt({props:i,name:n}),o=typeof e.defaultProps=="function"?e.defaultProps(s):e.defaultProps??{},c=Y3(o,s),d=Kc(),f=(g=e.classesResolver)==null?void 0:g.call(e,c,d),p=V.forwardRef(t);return x.jsx(p,H({},c,{classes:f,ref:a}))}),Dse=["type","color","className","classes"],Rse=Me("div",{name:"MuiChartsLabelMark",slot:"Root"})(()=>({display:"flex",width:14,height:14,[`&.${rd.line}`]:{width:16,height:"unset",alignItems:"center",[`.${rd.mask}`]:{height:4,width:"100%",borderRadius:1,overflow:"hidden"}},[`&.${rd.square}`]:{height:13,width:13,borderRadius:2,overflow:"hidden"},[`&.${rd.circle}`]:{height:15,width:15},svg:{display:"block"},[`& .${rd.mask} > *`]:{height:"100%",width:"100%"},[`& .${rd.mask}`]:{height:"100%",width:"100%"}})),hm=lk("MuiChartsLabelMark",{defaultProps:{type:"square"},classesResolver:Ise},function(e,t){const{type:r,color:i,className:a,classes:s}=e,o=Ne(e,Dse),c=r;return x.jsx(Rse,H({className:Ut(s==null?void 0:s.root,a),ownerState:e,"aria-hidden":"true",ref:t},o,{children:x.jsx("div",{className:s==null?void 0:s.mask,children:typeof c=="function"?x.jsx(c,{className:s==null?void 0:s.fill,color:i}):x.jsx("svg",{viewBox:"0 0 24 24",preserveAspectRatio:r==="line"?"none":void 0,children:r==="circle"?x.jsx("circle",{className:s==null?void 0:s.fill,r:"12",cx:"12",cy:"12",fill:i}):x.jsx("rect",{className:s==null?void 0:s.fill,width:"24",height:"24",fill:i})})})}))});function Mse(n){const{classes:e,sx:t}=n,r=Tse(),i=xy(e);if(!r)return null;if("values"in r){const{label:d,color:f,markType:p}=r;return x.jsx(Mw,{sx:t,className:i.paper,children:x.jsxs(Ow,{className:i.table,children:[x.jsxs(se,{component:"caption",children:[x.jsx("div",{className:i.markContainer,children:x.jsx(hm,{type:p,color:f,className:i.mark})}),d]}),x.jsx("tbody",{children:r.values.map(({formattedValue:g,label:y})=>x.jsxs(Pw,{className:i.row,children:[x.jsx(_d,{className:Ut(i.labelCell,i.cell),component:"th",children:y}),x.jsx(_d,{className:Ut(i.valueCell,i.cell),component:"td",children:g})]},y))})]})})}const{color:a,label:s,formattedValue:o,markType:c}=r;return x.jsx(Mw,{sx:t,className:i.paper,children:x.jsx(Ow,{className:i.table,children:x.jsx("tbody",{children:x.jsxs(Pw,{className:i.row,children:[x.jsxs(_d,{className:Ut(i.labelCell,i.cell),component:"th",children:[x.jsx("div",{className:i.markContainer,children:x.jsx(hm,{type:c,color:a,className:i.mark})}),s]}),x.jsx(_d,{className:Ut(i.valueCell,i.cell),component:"td",children:o})]})})})})}function Ose(n){const e=vn(),t=dt(e,Do);return V.useMemo(()=>{const i={};return Object.keys(t).forEach(a=>{i[a]=t[a].colorProcessor}),i},[t])}function Pse(){const n=Qb(),[e,t]=V.useState(null);return V.useEffect(()=>{const r=n.current;if(r===null)return()=>{};const i=s=>{s.pointerType!=="mouse"&&t(null)},a=s=>{t({pointerType:s.pointerType})};return r.addEventListener("pointerenter",a),r.addEventListener("pointerup",i),()=>{r.removeEventListener("pointerenter",a),r.removeEventListener("pointerup",i)}},[n]),e}function kse(n){return n instanceof Date?n.toUTCString():n.toLocaleString()}const Nse="@media (pointer: fine)",Lse=()=>ym(Nse,{defaultMatches:!0}),ck=(n,e)=>e,uk=(n,e)=>e;function dk(n,e,t){return Array.isArray(t)?t.map(r=>v3(e.axis[r],n)):v3(e.axis[t],n)}const fk=Ge([K0,Q0,Vie],(n,e,t)=>n===null||e===null?null:Fie(t)(n,e)),Bse=Ge([fk,ou,ck],(n,e,t=e.axisIds[0])=>n===null?null:dk(n,e,t)),hk=Ge([fk,ou,uk],(n,e,t=e.axisIds)=>n===null?null:dk(n,e,t));Ge([ou,Bse,ck],(n,e,t=n.axisIds[0])=>{var i;if(e===null||e===-1||n.axisIds.length===0)return null;const r=(i=n.axis[t])==null?void 0:i.data;return r?r[e]:null});Ge([ou,hk,uk],(n,e,t=n.axisIds)=>e===null?null:t.map((r,i)=>{var s;const a=e[i];return a===-1?null:(s=n.axis[r].data)==null?void 0:s[a]}));const pk=Ge([hk,ou],(n,e)=>n===null?[]:e.axisIds.map((t,r)=>({axisId:t,dataIndex:n[r]})).filter(({axisId:t,dataIndex:r})=>e.axis[t].triggerTooltip&&r>=0),{memoizeOptions:{resultEqualityCheck:Pd}});Ge([],()=>[]);const Vse=Ge([pk],n=>n.length>0);function f2(n,e,t){var s;const r=((s=n.data)==null?void 0:s[e])??null,a=(n.valueFormatter??(o=>n.scaleType==="utc"?kse(o):o.toLocaleString()))(r,{location:"tooltip",scale:n.scale});return{axisDirection:t,axisId:n.id,mainAxis:n,dataIndex:e,axisValue:r,axisFormattedValue:a,seriesItems:[]}}function Fse(n={}){const{multipleAxes:e,directions:t}=n,r=Uie(),i=Hie(),a=$ie(),s=vn(),o=dt(s,p6),c=dt(s,g6),d=dt(s,pk),f=gy(),{xAxis:p}=Mo(),{yAxis:g}=Ul(),{zAxis:y,zAxisIds:v}=Kb(),{rotationAxis:b}=N6(),A=Ose();if(o.length===0&&c.length===0&&d.length===0)return null;const E=[];return(t===void 0||t.includes("x"))&&o.forEach(({axisId:T,dataIndex:C})=>{!e&&E.length>1||E.push(f2(p[T],C,"x"))}),(t===void 0||t.includes("y"))&&c.forEach(({axisId:T,dataIndex:C})=>{!e&&E.length>1||E.push(f2(g[T],C,"y"))}),(t===void 0||t.includes("rotation"))&&d.forEach(({axisId:T,dataIndex:C})=>{!e&&E.length>1||E.push(f2(b[T],C,"rotation"))}),Object.keys(f).filter($b).forEach(T=>{const C=f[T];return C?C.seriesOrder.forEach(D=>{var I;const O=C.series[D],N=O.xAxisId??r.id,M=O.yAxisId??i.id,R=E.findIndex(({axisDirection:B,axisId:L})=>B==="x"&&L===N||B==="y"&&L===M);if(R>=0){const B="zAxisId"in O?O.zAxisId:v[0],{dataIndex:L}=E[R],k=((I=A[T])==null?void 0:I.call(A,O,p[N],g[M],B?y[B]:void 0)(L))??"",F=O.data[L]??null,q=O.valueFormatter(F,{dataIndex:L}),X=qi(O.label,"tooltip")??null;E[R].seriesItems.push({seriesId:D,color:k,value:F,formattedValue:q,formattedLabel:X,markType:O.labelMarkType})}}):[]}),Object.keys(f).filter(Xb).forEach(T=>{const C=f[T];return C?C.seriesOrder.forEach(D=>{var R;const O=C.series[D],N=O.rotationAxisId??(a==null?void 0:a.id),M=E.findIndex(({axisDirection:I,axisId:B})=>I==="rotation"&&B===N);if(M>=0){const{dataIndex:I}=E[M],B=((R=A[T])==null?void 0:R.call(A,O)(I))??"",L=O.data[I]??null,k=O.valueFormatter(L,{dataIndex:I}),F=qi(O.label,"tooltip")??null;E[M].seriesItems.push({seriesId:D,color:B,value:L,formattedValue:k,formattedLabel:F,markType:O.labelMarkType})}}):[]}),e?E:E.length===0?E[0]:null}function jse(n){return Fse(H({},n,{multipleAxes:!0}))}function Use(n){const e=xy(n.classes),t=jse();return t===null?null:x.jsx(Mw,{sx:n.sx,className:e.paper,children:t.map(({axisId:r,mainAxis:i,axisValue:a,axisFormattedValue:s,seriesItems:o})=>x.jsxs(Ow,{className:e.table,children:[a!=null&&!i.hideTooltip&&x.jsx(se,{component:"caption",children:s}),x.jsx("tbody",{children:o.map(({seriesId:c,color:d,formattedValue:f,formattedLabel:p,markType:g})=>f==null?null:x.jsxs(Pw,{className:e.row,children:[x.jsxs(_d,{className:Ut(e.labelCell,e.cell),component:"th",children:[x.jsx("div",{className:e.markContainer,children:x.jsx(hm,{type:g,color:d,className:e.mark})}),p||null]}),x.jsx(_d,{className:Ut(e.valueCell,e.cell),component:"td",children:f})]},c))})]},r))})}function Hse(n){let e,t;const r=()=>{t=null,n(...e)};function i(...a){e=a,t||(t=requestAnimationFrame(r))}return i.clear=()=>{t&&(cancelAnimationFrame(t),t=null)},i}function zse(){const n=vn(),e=dt(n,k6),t=dt(n,ru);return e!==void 0?"polar":t!==void 0?"cartesian":"none"}const $se=["trigger","classes","children"],Gse=()=>!1,Wse=Me(U3,{name:"MuiChartsTooltip",slot:"Root"})(({theme:n})=>({pointerEvents:"none",zIndex:n.zIndex.modal}));function Yse(n){const e=xt({props:n,name:"MuiChartsTooltipContainer"}),{trigger:t="axis",classes:r,children:i}=e,a=Ne(e,$se),s=Qb(),o=xy(r),c=Pse(),d=Lse(),f=V.useRef(null),p=W3(()=>({x:0,y:0})),g=zse(),y=vn(),v=dt(y,t==="axis"?g==="polar"&&Vse||g==="cartesian"&&hre||Gse:cre);V.useEffect(()=>{const C=s.current;if(C===null)return()=>{};const D=Hse(()=>{var N;return(N=f.current)==null?void 0:N.update()}),O=N=>{p.current={x:N.clientX,y:N.clientY},D()};return C.addEventListener("pointerdown",O),C.addEventListener("pointermove",O),()=>{C.removeEventListener("pointerdown",O),C.removeEventListener("pointermove",O),D.clear()}},[s,p]);const b=V.useMemo(()=>({getBoundingClientRect:()=>({x:p.current.x,y:p.current.y,top:p.current.y,left:p.current.x,right:p.current.x,bottom:p.current.y,width:0,height:0,toJSON:()=>""})}),[p]),A=(c==null?void 0:c.pointerType)==="mouse"||d,E=(c==null?void 0:c.pointerType)==="touch"||!d,T=V.useMemo(()=>[{name:"offset",options:{offset:()=>E?[0,64]:[0,8]}},...A?[]:[{name:"flip",options:{fallbackPlacements:["top-end","top-start","bottom-end","bottom"]}}]],[A,E]);return t==="none"?null:x.jsx(bN,{children:v&&x.jsx(Wse,H({className:o==null?void 0:o.root,open:v,placement:A?"right-start":"top",popperRef:f,anchorEl:b,modifiers:T},a,{children:i}))})}function gk(n){const{classes:e,trigger:t="axis"}=n,r=xy(e);return x.jsx(Yse,H({},n,{classes:e,children:t==="axis"?x.jsx(Use,{classes:r}):x.jsx(Mse,{classes:r})}))}function qse(n){return Dt("MuiChartsLabel",n)}Rt("MuiChartsLabel",["root"]);const Xse=n=>yt({root:["root"]},qse,n.classes),Kse=["children","className","classes"],Qse=lk("MuiChartsLabel",{classesResolver:Xse},function(e,t){const{children:r,className:i,classes:a}=e,s=Ne(e,Kse);return x.jsx("span",H({className:Ut(a==null?void 0:a.root,i),ref:t},s,{children:r}))}),Zse=n=>({type:"series",color:n.color,label:n.label,seriesId:n.seriesId,itemId:n.itemId});function Jse(n){return Dt("MuiChartsLegend",n)}const eoe=n=>{const{classes:e,direction:t}=n;return yt({root:["root",t],item:["item"],mark:["mark"],label:["label"],series:["series"]},Jse,e)},I3=Rt("MuiChartsLegend",["root","item","series","mark","label","vertical","horizontal"]),toe=["slots","slotProps"],noe=["ownerState"],roe=(n,e,t,r)=>{function i(a,s){var O;const o=xt({props:a,name:n}),c=typeof t.defaultProps=="function"?t.defaultProps(o):t.defaultProps??{},d=Y3(c,o),f=d,{slots:p,slotProps:g}=f,y=Ne(f,toe),v=Kc(),b=(O=t.classesResolver)==null?void 0:O.call(t,d,v),A=(p==null?void 0:p[e])??r,E=t.propagateSlots&&!(p!=null&&p[e]),T=Et({elementType:A,externalSlotProps:g==null?void 0:g[e],additionalProps:H({},y,{classes:b},E&&{slots:p,slotProps:g}),ownerState:{}}),C=Ne(T,noe),D=H({},C);for(const N of t.omitProps??[])delete D[N];return x.jsx(A,H({},D,{ref:s}))}return V.forwardRef(i)},ioe=["direction","onItemClick","className","classes"],aoe=Me("ul",{name:"MuiChartsLegend",slot:"Root"})(({ownerState:n,theme:e})=>H({},e.typography.caption,{color:(e.vars||e).palette.text.primary,lineHeight:"100%",display:"flex",flexDirection:n.direction==="vertical"?"column":"row",alignItems:n.direction==="vertical"?void 0:"center",flexShrink:0,gap:e.spacing(2),listStyleType:"none",paddingInlineStart:0,marginBlock:e.spacing(1),marginInline:e.spacing(1),flexWrap:"wrap",li:{display:n.direction==="horizontal"?"inline-flex":void 0},[`button.${I3.series}`]:{background:"none",border:"none",padding:0,fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",letterSpacing:"inherit",color:"inherit"},[`& .${I3.series}`]:{display:n.direction==="vertical"?"flex":"inline-flex",alignItems:"center",gap:e.spacing(1)}})),mk=roe("MuiChartsLegend","legend",{defaultProps:{direction:"horizontal"},omitProps:["position"],classesResolver:eoe},V.forwardRef(function(e,t){const r=oae(),{onItemClick:i,className:a,classes:s}=e,o=Ne(e,ioe);if(r.items.length===0)return null;const c=i?"button":"div";return x.jsx(aoe,H({className:Ut(s==null?void 0:s.root,a),ref:t},o,{ownerState:e,children:r.items.map((d,f)=>x.jsx("li",{className:s==null?void 0:s.item,"data-series":d.id,children:x.jsxs(c,{className:s==null?void 0:s.series,role:i?"button":void 0,type:i?"button":void 0,onClick:i?p=>i(p,Zse(d),f):void 0,children:[x.jsx(hm,{className:s==null?void 0:s.mark,color:d.color,type:d.markType}),x.jsx(Qse,{className:s==null?void 0:s.label,children:d.label})]})},d.id))}))}));function soe(n){return Dt("MuiChartsAxisHighlight",n)}Rt("MuiChartsAxisHighlight",["root"]);const pm=Me("path",{name:"MuiChartsAxisHighlight",slot:"Root"})(({theme:n})=>({pointerEvents:"none",variants:[{props:{axisHighlight:"band"},style:H({fill:"white",fillOpacity:.1},n.applyStyles("light",{fill:"gray"}))},{props:{axisHighlight:"line"},style:H({strokeDasharray:"5 2",stroke:"#ffffff"},n.applyStyles("light",{stroke:"#000000"}))}]}));function ooe(n){const{type:e,classes:t}=n,{left:r,width:i}=ba(),a=vn(),s=dt(a,vre),o=dt(a,Ki);return s.length===0?null:s.map(({axisId:c,value:d})=>{const p=o.axis[c].scale,g=lm(p),y=e==="band"&&d!==null&&Ya(p);return x.jsxs(V.Fragment,{children:[y&&p(d)!==void 0&&x.jsx(pm,{d:`M ${r} ${p(d)-(p.step()-p.bandwidth())/2} l 0 ${p.step()} l ${i} 0 l 0 ${-p.step()} Z`,className:t.root,ownerState:{axisHighlight:"band"}}),e==="line"&&d!==null&&x.jsx(pm,{d:`M ${r} ${g(d)} L ${r+i} ${g(d)}`,className:t.root,ownerState:{axisHighlight:"line"}})]},`${c}-${d}`)})}function loe(n){const{type:e,classes:t}=n,{top:r,height:i}=ba(),a=vn(),s=dt(a,yre),o=dt(a,Xi);return s.length===0?null:s.map(({axisId:c,value:d})=>{const p=o.axis[c].scale,g=lm(p),y=e==="band"&&d!==null&&Ya(p);return x.jsxs(V.Fragment,{children:[y&&p(d)!==void 0&&x.jsx(pm,{d:`M ${p(d)-(p.step()-p.bandwidth())/2} ${r} l ${p.step()} 0 l 0 ${i} l ${-p.step()} 0 Z`,className:t.root,ownerState:{axisHighlight:"band"}}),e==="line"&&d!==null&&x.jsx(pm,{d:`M ${g(d)} ${r} L ${g(d)} ${r+i}`,className:t.root,ownerState:{axisHighlight:"line"}})]},`${c}-${d}`)})}const coe=()=>yt({root:["root"]},soe);function uoe(n){const{x:e,y:t}=n,r=coe();return x.jsxs(V.Fragment,{children:[e&&x.jsx(loe,{type:e,classes:r}),t&&x.jsx(ooe,{type:t,classes:r})]})}function doe(n){return Dt("MuiBarElement",n)}const foe=Rt("MuiBarElement",["root","highlighted","faded","series"]),hoe=n=>{const{classes:e,id:t,isHighlighted:r,isFaded:i}=n,a={root:["root",`series-${t}`,r&&"highlighted",i&&"faded"]};return yt(a,doe,e)};function poe(n){"hasPointerCapture"in n.currentTarget&&n.currentTarget.hasPointerCapture(n.pointerId)&&n.currentTarget.releasePointerCapture(n.pointerId)}const yk=(n,e)=>{const{instance:t}=jl(),r=V.useRef(!1),i=V.useCallback(()=>{r.current=!0,t.setItemInteraction({type:n.type,seriesId:n.seriesId,dataIndex:n.dataIndex}),t.setHighlight({seriesId:n.seriesId,dataIndex:n.dataIndex})},[t,n.type,n.seriesId,n.dataIndex]),a=V.useCallback(()=>{r.current=!1,t.removeItemInteraction({type:n.type,seriesId:n.seriesId,dataIndex:n.dataIndex}),t.clearHighlight()},[t,n.type,n.seriesId,n.dataIndex]);return V.useEffect(()=>()=>{r.current&&a()},[a]),{onPointerEnter:i,onPointerLeave:a,onPointerDown:poe}},goe=["ownerState","skipAnimation","id","dataIndex","xOrigin","yOrigin"];function moe(n){const{ownerState:e}=n,t=Ne(n,goe),r=bae(n);return x.jsx("rect",H({},t,{filter:e.isHighlighted?"brightness(120%)":void 0,opacity:e.isFaded?.3:1,"data-highlighted":e.isHighlighted||void 0,"data-faded":e.isFaded||void 0},r))}const yoe=["id","dataIndex","classes","color","slots","slotProps","style","onClick","skipAnimation","layout","x","xOrigin","y","yOrigin","width","height"];function voe(n){const{id:e,dataIndex:t,classes:r,color:i,slots:a,slotProps:s,style:o,onClick:c,skipAnimation:d,layout:f,x:p,xOrigin:g,y,yOrigin:v,width:b,height:A}=n,E=Ne(n,yoe),T=yk({type:"bar",seriesId:e,dataIndex:t}),{isFaded:C,isHighlighted:D}=j6({seriesId:e,dataIndex:t}),O={id:e,dataIndex:t,classes:r,color:i,isFaded:C,isHighlighted:D},N=hoe(O),M=(a==null?void 0:a.bar)??moe,R=Et({elementType:M,externalSlotProps:s==null?void 0:s.bar,externalForwardedProps:E,additionalProps:H({},T,{id:e,dataIndex:t,color:i,x:p,xOrigin:g,y,yOrigin:v,width:b,height:A,style:o,onClick:c,cursor:c?"pointer":"unset",stroke:"none",fill:i,skipAnimation:d,layout:f}),className:N.root,ownerState:O});return x.jsx(M,H({},R))}function xoe(n,e){const t=Qt(n.x,e.x),r=Qt(n.y,e.y),i=Qt(n.width,e.width),a=Qt(n.height,e.height),s=Qt(n.borderRadius,e.borderRadius);return o=>({x:t(o),y:r(o),width:i(o),height:a(o),borderRadius:s(o)})}function woe(n){const e={x:n.layout==="vertical"?n.x:n.xOrigin,y:n.layout==="vertical"?n.yOrigin:n.y,width:n.layout==="vertical"?n.width:0,height:n.layout==="vertical"?0:n.height,borderRadius:n.borderRadius};return ep({x:n.x,y:n.y,width:n.width,height:n.height,borderRadius:n.borderRadius},{createInterpolator:xoe,transformProps:t=>({d:boe(n.hasNegative,n.hasPositive,n.layout,t.x,t.y,t.width,t.height,n.xOrigin,n.yOrigin,t.borderRadius)}),applyProps(t,{d:r}){r&&t.setAttribute("d",r)},initialProps:e,skip:n.skipAnimation,ref:n.ref})}function _oe(n){const{maskId:e,x:t,y:r,width:i,height:a,skipAnimation:s}=n,{ref:o,d:c}=woe({layout:n.layout??"vertical",hasNegative:n.hasNegative,hasPositive:n.hasPositive,xOrigin:n.xOrigin,yOrigin:n.yOrigin,x:t,y:r,width:i,height:a,borderRadius:n.borderRadius??0,skipAnimation:s});return!n.borderRadius||n.borderRadius<=0?null:x.jsx("clipPath",{id:e,children:x.jsx("path",{ref:o,d:c})})}function boe(n,e,t,r,i,a,s,o,c,d){if(t==="vertical"){if(e&&n){const p=Math.min(d,a/2,s/2);return`M${r},${i+s/2} v${-(s/2-p)} a${p},${p} 0 0 1 ${p},${-p} h${a-p*2} a${p},${p} 0 0 1 ${p},${p} v${s-2*p} a${p},${p} 0 0 1 ${-p},${p} h${-(a-p*2)} a${p},${p} 0 0 1 ${-p},${-p} v${-(s/2-p)}`}const f=Math.min(d,a/2);if(e)return`M${r},${Math.max(c,i+f)} v${Math.min(0,-(c-i-f))} a${f},${f} 0 0 1 ${f},${-f} h${a-f*2} a${f},${f} 0 0 1 ${f},${f} v${Math.max(0,c-i-f)} Z`;if(n)return`M${r},${Math.min(c,i+s-f)} v${Math.max(0,s-f)} a${f},${f} 0 0 0 ${f},${f} h${a-f*2} a${f},${f} 0 0 0 ${f},${-f} v${-Math.max(0,s-f)} Z`}if(t==="horizontal"){if(e&&n){const p=Math.min(d,a/2,s/2);return`M${r+a/2},${i} h${a/2-p} a${p},${p} 0 0 1 ${p},${p} v${s-p*2} a${p},${p} 0 0 1 ${-p},${p} h${-(a-2*p)} a${p},${p} 0 0 1 ${-p},${-p} v${-(s-p*2)} a${p},${p} 0 0 1 ${p},${-p} h${a/2-p}`}const f=Math.min(d,s/2);if(e)return`M${Math.min(o,r-f)},${i} h${a} a${f},${f} 0 0 1 ${f},${f} v${s-f*2} a${f},${f} 0 0 1 ${-f},${f} h${-a} Z`;if(n)return`M${Math.max(o,r+a+f)},${i} h${-a} a${f},${f} 0 0 0 ${-f},${f} v${s-f*2} a${f},${f} 0 0 0 ${f},${f} h${a} Z`}}function Aoe(n){return Dt("MuiBarLabel",n)}const h2=Rt("MuiBarLabel",["root","highlighted","faded","animate"]),Eoe=n=>{const{classes:e,seriesId:t,isFaded:r,isHighlighted:i,skipAnimation:a}=n,s={root:["root",`series-${t}`,i&&"highlighted",r&&"faded",!a&&"animate"]};return yt(s,Aoe,e)},Soe=n=>{const{barLabel:e,value:t,dataIndex:r,seriesId:i,height:a,width:s}=n;return e==="value"?t?t==null?void 0:t.toString():null:e({seriesId:i,dataIndex:r,value:t},{bar:{height:a,width:s}})},Toe=["seriesId","dataIndex","color","isFaded","isHighlighted","classes","skipAnimation","layout","xOrigin","yOrigin"],Coe=Me("text",{name:"MuiBarLabel",slot:"Root",overridesResolver:(n,e)=>[{[`&.${h2.faded}`]:e.faded},{[`&.${h2.highlighted}`]:e.highlighted},e.root]})(({theme:n})=>{var e,t,r,i;return H({},(e=n==null?void 0:n.typography)==null?void 0:e.body2,{stroke:"none",fill:(i=(r=(t=n.vars||n)==null?void 0:t.palette)==null?void 0:r.text)==null?void 0:i.primary,transition:"opacity 0.2s ease-in, fill 0.2s ease-in",textAnchor:"middle",dominantBaseline:"central",pointerEvents:"none",opacity:1,[`&.${h2.faded}`]:{opacity:.3}})});function Ioe(n){const e=xt({props:n,name:"MuiBarLabel"}),t=Ne(e,Toe),r=Eae(e);return x.jsx(Coe,H({},t,r))}const Doe=["seriesId","classes","color","dataIndex","barLabel","slots","slotProps","xOrigin","yOrigin","x","y","width","height","value","skipAnimation","layout"],Roe=["ownerState"];function Moe(n){const{seriesId:e,classes:t,color:r,dataIndex:i,barLabel:a,slots:s,slotProps:o,xOrigin:c,yOrigin:d,x:f,y:p,width:g,height:y,value:v,skipAnimation:b,layout:A}=n,E=Ne(n,Doe),{isFaded:T,isHighlighted:C}=j6({seriesId:e,dataIndex:i}),D={seriesId:e,classes:t,color:r,isFaded:T,isHighlighted:C,dataIndex:i,skipAnimation:b,layout:A},O=Eoe(D),N=(s==null?void 0:s.barLabel)??Ioe,M=Et({elementType:N,externalSlotProps:o==null?void 0:o.barLabel,additionalProps:H({},E,{xOrigin:c,yOrigin:d,x:f,y:p,width:g,height:y,className:O.root}),ownerState:D}),{ownerState:R}=M,I=Ne(M,Roe);if(!a)return null;const B=Soe({barLabel:a,value:v,dataIndex:i,seriesId:e,height:y,width:g});return B?x.jsx(N,H({},I,R,{children:B})):null}function Ooe(n){return Dt("MuiBar",n)}Rt("MuiBar",["root","series","seriesLabels"]);const vk=n=>yt({root:["root"],series:["series"],seriesLabels:["seriesLabels"]},Ooe,n),Poe=["bars","skipAnimation"];function koe(n){const{bars:e,skipAnimation:t}=n,r=Ne(n,Poe),i=vk();return x.jsx(V.Fragment,{children:e.flatMap(({seriesId:a,data:s})=>x.jsx("g",{className:i.seriesLabels,"data-series":a,children:s.map(({xOrigin:o,yOrigin:c,x:d,y:f,dataIndex:p,color:g,value:y,width:v,height:b,layout:A})=>x.jsx(Moe,H({seriesId:a,dataIndex:p,value:y,color:g,xOrigin:o,yOrigin:c,x:d,y:f,width:v,height:b,skipAnimation:t??!1,layout:A??"vertical"},r),p))},a))})}function xk(n){const e=vn(),t=dt(e,SJ);return n||t}function Noe(){const n=vn();return dt(n,o6)}const p2=(n,e)=>{const t=`${n}-axis`,r=`${n}Axis`;return e===(n==="x"?gb:mb)?`The first \`${r}\``:`The ${t} with id "${e}"`};function Loe(n,e,t,r,i,a,s){const o=i[r],c=s[a],d=n?o:c,f=n?c:o,p=n?r:a,g=n?a:r,y=n?"x":"y",v=n?"y":"x";if(!rm(d))throw new Error(`MUI X Charts: ${p2(y,p)} should be of type "band" to display the bar series of id "${e}".`);if(d.data===void 0)throw new Error(`MUI X Charts: ${p2(y,p)} should have data property.`);if(rm(f)||zb(f))throw new Error(`MUI X Charts: ${p2(v,g)} should be a continuous type to display the bar series of id "${e}".`)}function Boe(n,e,t){const r=Xie()??{series:{},stackingGroups:[]},i=Mo().xAxisIds[0],a=Ul().yAxisIds[0],s=qb(),{series:o,stackingGroups:c}=r,d={};return{completedData:c.flatMap(({ids:p},g)=>{const y=n.left,v=n.left+n.width,b=n.top,A=n.top+n.height;return p.map(E=>{const T=o[E].xAxisId??i,C=o[E].yAxisId??a,D=e[T],O=t[C],N=o[E].layout==="vertical";Loe(N,E,o[E],T,e,C,t);const M=N?D:O,R=D.scale,I=O.scale,B=M6(o[E],e[T],t[C]),L=M.scale.bandwidth(),{barWidth:k,offset:F}=Voe({bandWidth:L,numberOfGroups:c.length,gapRatio:M.barGapRatio}),q=g*(k+F),{stackedData:X,data:G,layout:Y,minBarSize:Q}=o[E],Z=M.data.map((fe,ge)=>{if(G[ge]==null)return null;const Ae=X[ge].map(he=>N?I(he):R(he)),Pe=Math.round(Math.min(...Ae)),Re=Math.round(Math.max(...Ae)),He=o[E].stack,{barSize:Ue,startCoordinate:Qe}=Foe(N,Pe,Re,G[ge],Q),ae={seriesId:E,dataIndex:ge,layout:Y,x:N?R(fe)+q:Qe,y:N?Qe:I(fe)+q,xOrigin:R(0)??0,yOrigin:I(0)??0,height:N?Ue:k,width:N?k:Ue,color:B(ge),value:G[ge],maskId:`${s}_${He||E}_${g}_${ge}`};if(ae.x>v||ae.x+ae.width<y||ae.y>A||ae.y+ae.height<b)return null;d[ae.maskId]||(d[ae.maskId]={id:ae.maskId,width:0,height:0,hasNegative:!1,hasPositive:!1,layout:ae.layout,xOrigin:R(0),yOrigin:I(0),x:0,y:0});const me=d[ae.maskId];return me.width=ae.layout==="vertical"?ae.width:me.width+ae.width,me.height=ae.layout==="vertical"?me.height+ae.height:ae.height,me.x=Math.min(me.x===0?1/0:me.x,ae.x),me.y=Math.min(me.y===0?1/0:me.y,ae.y),me.hasNegative=me.hasNegative||(ae.value??0)<0,me.hasPositive=me.hasPositive||(ae.value??0)>0,ae}).filter(fe=>fe!==null);return{seriesId:E,data:Z}})}),masksData:Object.values(d)}}function Voe({bandWidth:n,numberOfGroups:e,gapRatio:t}){if(t===0)return{barWidth:n/e,offset:0};const r=n/(e+(e-1)*t),i=t*r;return{barWidth:r,offset:i}}function Foe(n,e,t,r,i){if(r===0||r==null)return{barSize:0,startCoordinate:e};const a=t-e<i,s=a?i:t-e,o=n&&r>=0,c=!n&&r<0;return a&&(o||c)?{barSize:s,startCoordinate:t-s}:{barSize:s,startCoordinate:e}}const joe=["skipAnimation","onItemClick","borderRadius","barLabel"],Uoe=Me("g",{name:"MuiBarPlot",slot:"Root"})({[`& .${foe.root}`]:{transition:"opacity 0.2s ease-in, fill 0.2s ease-in"}});function Hoe(n){const{skipAnimation:e,onItemClick:t,borderRadius:r,barLabel:i}=n,a=Ne(n,joe),s=Noe(),o=xk(s||e),{xAxis:c}=Mo(),{yAxis:d}=Ul(),{completedData:f,masksData:p}=Boe(ba(),c,d),g=!r||r<=0,y=vk();return x.jsxs(Uoe,{className:y.root,children:[!g&&p.map(({id:v,x:b,y:A,xOrigin:E,yOrigin:T,width:C,height:D,hasPositive:O,hasNegative:N,layout:M})=>x.jsx(_oe,{maskId:v,borderRadius:r,hasNegative:N,hasPositive:O,layout:M,x:b,y:A,xOrigin:E,yOrigin:T,width:C,height:D,skipAnimation:o??!1},v)),f.map(({seriesId:v,data:b})=>x.jsx("g",{"data-series":v,className:y.series,children:b.map(({dataIndex:A,color:E,maskId:T,layout:C,x:D,xOrigin:O,y:N,yOrigin:M,width:R,height:I})=>{const B=x.jsx(voe,H({id:v,dataIndex:A,color:E,skipAnimation:o??!1,layout:C??"vertical",x:D,xOrigin:O,y:N,yOrigin:M,width:R,height:I},a,{onClick:t&&(L=>{t(L,{type:"bar",seriesId:v,dataIndex:A})})}),A);return g?B:x.jsx("g",{clipPath:`url(#${T})`,children:B},A)})},v)),i&&x.jsx(koe,H({bars:f,skipAnimation:o,barLabel:i},a))]})}const zoe=["message"],$oe=Me("text")(({theme:n})=>H({},n.typography.body2,{stroke:"none",fill:(n.vars||n).palette.text.primary,shapeRendering:"crispEdges",textAnchor:"middle",dominantBaseline:"middle"}));function Goe(n){const{message:e}=n,t=Ne(n,zoe),{top:r,left:i,height:a,width:s}=ba(),{localeText:o}=W6();return x.jsx($oe,H({x:i+s/2,y:r+a/2},t,{children:e??o.loading}))}const Woe=["message"],Yoe=Me("text")(({theme:n})=>H({},n.typography.body2,{stroke:"none",fill:(n.vars||n).palette.text.primary,shapeRendering:"crispEdges",textAnchor:"middle",dominantBaseline:"middle"}));function qoe(n){const{message:e}=n,t=Ne(n,Woe),{top:r,left:i,height:a,width:s}=ba(),{localeText:o}=W6();return x.jsx(Yoe,H({x:i+s/2,y:r+a/2},t,{children:e??o.noData}))}function Xoe(){const n=gy();return Object.values(n).every(e=>{if(!e)return!0;const{series:t,seriesOrder:r}=e;return r.every(i=>t[i].data.length===0)})}function wk(n){var t,r,i,a;const e=Xoe();if(n.loading){const s=((t=n.slots)==null?void 0:t.loadingOverlay)??Goe;return x.jsx(s,H({},(r=n.slotProps)==null?void 0:r.loadingOverlay))}if(e){const s=((i=n.slots)==null?void 0:i.noDataOverlay)??qoe;return x.jsx(s,H({},(a=n.slotProps)==null?void 0:a.noDataOverlay))}return null}const Koe=[Z0,pf,hf,su],Qoe=["xAxis","yAxis","series","width","height","margin","colors","dataset","sx","axisHighlight","grid","children","slots","slotProps","skipAnimation","loading","layout","onItemClick","highlightedItem","onHighlightChange","borderRadius","barLabel","className","hideLegend","showToolbar"],Zoe=n=>{var ae,me,he,te,Le;const{xAxis:e,yAxis:t,series:r,width:i,height:a,margin:s,colors:o,dataset:c,sx:d,axisHighlight:f,grid:p,children:g,slots:y,slotProps:v,skipAnimation:b,loading:A,layout:E,onItemClick:T,highlightedItem:C,onHighlightChange:D,borderRadius:O,barLabel:N,className:M}=n,R=Ne(n,Qoe),B=`${E0()}-clip-path`,L=E==="horizontal"||E===void 0&&r.some(ve=>ve.layout==="horizontal"),k=V.useMemo(()=>[{id:gb,scaleType:"band",data:Array.from({length:Math.max(...r.map(ve=>(ve.data??c??[]).length))},(ve,je)=>je)}],[c,r]),F=V.useMemo(()=>[{id:mb,scaleType:"band",data:Array.from({length:Math.max(...r.map(ve=>(ve.data??c??[]).length))},(ve,je)=>je)}],[c,r]),q=V.useMemo(()=>r.map(ve=>H({type:"bar"},ve,{layout:L?"horizontal":"vertical"})),[L,r]),X=L?void 0:k,G=V.useMemo(()=>e?L?e:e.map(ve=>H({scaleType:"band"},ve)):X,[X,L,e]),Y=L?F:void 0,Q=V.useMemo(()=>t?L?t.map(ve=>H({scaleType:"band"},ve)):t:Y,[Y,L,t]),Z=H({},R,{series:q,width:i,height:a,margin:s,colors:o,dataset:c,xAxis:G,yAxis:Q,highlightedItem:C,onHighlightChange:D,disableAxisListener:((ae=v==null?void 0:v.tooltip)==null?void 0:ae.trigger)!=="axis"&&(f==null?void 0:f.x)==="none"&&(f==null?void 0:f.y)==="none",className:M,skipAnimation:b,plugins:Koe}),fe={onItemClick:T,slots:y,slotProps:v,borderRadius:O,barLabel:N},ge={vertical:p==null?void 0:p.vertical,horizontal:p==null?void 0:p.horizontal},we={clipPath:`url(#${B})`},Ae={id:B},Pe={slots:y,slotProps:v,loading:A},Re={slots:y,slotProps:v},He=H({},L?{y:"band"}:{x:"band"},f),Ue={slots:y,slotProps:v};return{chartsWrapperProps:{sx:d,legendPosition:(he=(me=n.slotProps)==null?void 0:me.legend)==null?void 0:he.position,legendDirection:(Le=(te=n.slotProps)==null?void 0:te.legend)==null?void 0:Le.direction},chartContainerProps:Z,barPlotProps:fe,gridProps:ge,clipPathProps:Ae,clipPathGroupProps:we,overlayProps:Pe,chartsAxisProps:Re,axisHighlightProps:He,legendProps:Ue,children:g}},Joe={baseButton:st,baseIconButton:Jr},ele={},tle=H({},Joe,ele),nle=V.createContext(null);function rle(n){const{slots:e,slotProps:t={},defaultSlots:r,children:i}=n,a=V.useMemo(()=>({slots:H({},r,e),slotProps:t}),[r,e,t]);return x.jsx(nle.Provider,{value:a,children:i})}const ho=11102230246251565e-32,si=134217729,ile=(3+8*ho)*ho;function g2(n,e,t,r,i){let a,s,o,c,d=e[0],f=r[0],p=0,g=0;f>d==f>-d?(a=d,d=e[++p]):(a=f,f=r[++g]);let y=0;if(p<n&&g<t)for(f>d==f>-d?(s=d+a,o=a-(s-d),d=e[++p]):(s=f+a,o=a-(s-f),f=r[++g]),a=s,o!==0&&(i[y++]=o);p<n&&g<t;)f>d==f>-d?(s=a+d,c=s-a,o=a-(s-c)+(d-c),d=e[++p]):(s=a+f,c=s-a,o=a-(s-c)+(f-c),f=r[++g]),a=s,o!==0&&(i[y++]=o);for(;p<n;)s=a+d,c=s-a,o=a-(s-c)+(d-c),d=e[++p],a=s,o!==0&&(i[y++]=o);for(;g<t;)s=a+f,c=s-a,o=a-(s-c)+(f-c),f=r[++g],a=s,o!==0&&(i[y++]=o);return(a!==0||y===0)&&(i[y++]=a),y}function ale(n,e){let t=e[0];for(let r=1;r<n;r++)t+=e[r];return t}function np(n){return new Float64Array(n)}const sle=(3+16*ho)*ho,ole=(2+12*ho)*ho,lle=(9+64*ho)*ho*ho,id=np(4),D3=np(8),R3=np(12),M3=np(16),Ai=np(4);function cle(n,e,t,r,i,a,s){let o,c,d,f,p,g,y,v,b,A,E,T,C,D,O,N,M,R;const I=n-i,B=t-i,L=e-a,k=r-a;D=I*k,g=si*I,y=g-(g-I),v=I-y,g=si*k,b=g-(g-k),A=k-b,O=v*A-(D-y*b-v*b-y*A),N=L*B,g=si*L,y=g-(g-L),v=L-y,g=si*B,b=g-(g-B),A=B-b,M=v*A-(N-y*b-v*b-y*A),E=O-M,p=O-E,id[0]=O-(E+p)+(p-M),T=D+E,p=T-D,C=D-(T-p)+(E-p),E=C-N,p=C-E,id[1]=C-(E+p)+(p-N),R=T+E,p=R-T,id[2]=T-(R-p)+(E-p),id[3]=R;let F=ale(4,id),q=ole*s;if(F>=q||-F>=q||(p=n-I,o=n-(I+p)+(p-i),p=t-B,d=t-(B+p)+(p-i),p=e-L,c=e-(L+p)+(p-a),p=r-k,f=r-(k+p)+(p-a),o===0&&c===0&&d===0&&f===0)||(q=lle*s+ile*Math.abs(F),F+=I*f+k*o-(L*d+B*c),F>=q||-F>=q))return F;D=o*k,g=si*o,y=g-(g-o),v=o-y,g=si*k,b=g-(g-k),A=k-b,O=v*A-(D-y*b-v*b-y*A),N=c*B,g=si*c,y=g-(g-c),v=c-y,g=si*B,b=g-(g-B),A=B-b,M=v*A-(N-y*b-v*b-y*A),E=O-M,p=O-E,Ai[0]=O-(E+p)+(p-M),T=D+E,p=T-D,C=D-(T-p)+(E-p),E=C-N,p=C-E,Ai[1]=C-(E+p)+(p-N),R=T+E,p=R-T,Ai[2]=T-(R-p)+(E-p),Ai[3]=R;const X=g2(4,id,4,Ai,D3);D=I*f,g=si*I,y=g-(g-I),v=I-y,g=si*f,b=g-(g-f),A=f-b,O=v*A-(D-y*b-v*b-y*A),N=L*d,g=si*L,y=g-(g-L),v=L-y,g=si*d,b=g-(g-d),A=d-b,M=v*A-(N-y*b-v*b-y*A),E=O-M,p=O-E,Ai[0]=O-(E+p)+(p-M),T=D+E,p=T-D,C=D-(T-p)+(E-p),E=C-N,p=C-E,Ai[1]=C-(E+p)+(p-N),R=T+E,p=R-T,Ai[2]=T-(R-p)+(E-p),Ai[3]=R;const G=g2(X,D3,4,Ai,R3);D=o*f,g=si*o,y=g-(g-o),v=o-y,g=si*f,b=g-(g-f),A=f-b,O=v*A-(D-y*b-v*b-y*A),N=c*d,g=si*c,y=g-(g-c),v=c-y,g=si*d,b=g-(g-d),A=d-b,M=v*A-(N-y*b-v*b-y*A),E=O-M,p=O-E,Ai[0]=O-(E+p)+(p-M),T=D+E,p=T-D,C=D-(T-p)+(E-p),E=C-N,p=C-E,Ai[1]=C-(E+p)+(p-N),R=T+E,p=R-T,Ai[2]=T-(R-p)+(E-p),Ai[3]=R;const Y=g2(G,R3,4,Ai,M3);return M3[Y-1]}function Kg(n,e,t,r,i,a){const s=(e-a)*(t-i),o=(n-i)*(r-a),c=s-o,d=Math.abs(s+o);return Math.abs(c)>=sle*d?c:-cle(n,e,t,r,i,a,d)}const O3=Math.pow(2,-52),Qg=new Uint32Array(512);class gm{static from(e,t=ple,r=gle){const i=e.length,a=new Float64Array(i*2);for(let s=0;s<i;s++){const o=e[s];a[2*s]=t(o),a[2*s+1]=r(o)}return new gm(a)}constructor(e){const t=e.length>>1;if(t>0&&typeof e[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=e;const r=Math.max(2*t-5,0);this._triangles=new Uint32Array(r*3),this._halfedges=new Int32Array(r*3),this._hashSize=Math.ceil(Math.sqrt(t)),this._hullPrev=new Uint32Array(t),this._hullNext=new Uint32Array(t),this._hullTri=new Uint32Array(t),this._hullHash=new Int32Array(this._hashSize),this._ids=new Uint32Array(t),this._dists=new Float64Array(t),this.update()}update(){const{coords:e,_hullPrev:t,_hullNext:r,_hullTri:i,_hullHash:a}=this,s=e.length>>1;let o=1/0,c=1/0,d=-1/0,f=-1/0;for(let I=0;I<s;I++){const B=e[2*I],L=e[2*I+1];B<o&&(o=B),L<c&&(c=L),B>d&&(d=B),L>f&&(f=L),this._ids[I]=I}const p=(o+d)/2,g=(c+f)/2;let y,v,b;for(let I=0,B=1/0;I<s;I++){const L=m2(p,g,e[2*I],e[2*I+1]);L<B&&(y=I,B=L)}const A=e[2*y],E=e[2*y+1];for(let I=0,B=1/0;I<s;I++){if(I===y)continue;const L=m2(A,E,e[2*I],e[2*I+1]);L<B&&L>0&&(v=I,B=L)}let T=e[2*v],C=e[2*v+1],D=1/0;for(let I=0;I<s;I++){if(I===y||I===v)continue;const B=fle(A,E,T,C,e[2*I],e[2*I+1]);B<D&&(b=I,D=B)}let O=e[2*b],N=e[2*b+1];if(D===1/0){for(let L=0;L<s;L++)this._dists[L]=e[2*L]-e[0]||e[2*L+1]-e[1];bd(this._ids,this._dists,0,s-1);const I=new Uint32Array(s);let B=0;for(let L=0,k=-1/0;L<s;L++){const F=this._ids[L],q=this._dists[F];q>k&&(I[B++]=F,k=q)}this.hull=I.subarray(0,B),this.triangles=new Uint32Array(0),this.halfedges=new Uint32Array(0);return}if(Kg(A,E,T,C,O,N)<0){const I=v,B=T,L=C;v=b,T=O,C=N,b=I,O=B,N=L}const M=hle(A,E,T,C,O,N);this._cx=M.x,this._cy=M.y;for(let I=0;I<s;I++)this._dists[I]=m2(e[2*I],e[2*I+1],M.x,M.y);bd(this._ids,this._dists,0,s-1),this._hullStart=y;let R=3;r[y]=t[b]=v,r[v]=t[y]=b,r[b]=t[v]=y,i[y]=0,i[v]=1,i[b]=2,a.fill(-1),a[this._hashKey(A,E)]=y,a[this._hashKey(T,C)]=v,a[this._hashKey(O,N)]=b,this.trianglesLen=0,this._addTriangle(y,v,b,-1,-1,-1);for(let I=0,B,L;I<this._ids.length;I++){const k=this._ids[I],F=e[2*k],q=e[2*k+1];if(I>0&&Math.abs(F-B)<=O3&&Math.abs(q-L)<=O3||(B=F,L=q,k===y||k===v||k===b))continue;let X=0;for(let fe=0,ge=this._hashKey(F,q);fe<this._hashSize&&(X=a[(ge+fe)%this._hashSize],!(X!==-1&&X!==r[X]));fe++);X=t[X];let G=X,Y;for(;Y=r[G],Kg(F,q,e[2*G],e[2*G+1],e[2*Y],e[2*Y+1])>=0;)if(G=Y,G===X){G=-1;break}if(G===-1)continue;let Q=this._addTriangle(G,k,r[G],-1,-1,i[G]);i[k]=this._legalize(Q+2),i[G]=Q,R++;let Z=r[G];for(;Y=r[Z],Kg(F,q,e[2*Z],e[2*Z+1],e[2*Y],e[2*Y+1])<0;)Q=this._addTriangle(Z,k,Y,i[k],-1,i[Z]),i[k]=this._legalize(Q+2),r[Z]=Z,R--,Z=Y;if(G===X)for(;Y=t[G],Kg(F,q,e[2*Y],e[2*Y+1],e[2*G],e[2*G+1])<0;)Q=this._addTriangle(Y,k,G,-1,i[G],i[Y]),this._legalize(Q+2),i[Y]=Q,r[G]=G,R--,G=Y;this._hullStart=t[k]=G,r[G]=t[Z]=k,r[k]=Z,a[this._hashKey(F,q)]=k,a[this._hashKey(e[2*G],e[2*G+1])]=G}this.hull=new Uint32Array(R);for(let I=0,B=this._hullStart;I<R;I++)this.hull[I]=B,B=r[B];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(e,t){return Math.floor(ule(e-this._cx,t-this._cy)*this._hashSize)%this._hashSize}_legalize(e){const{_triangles:t,_halfedges:r,coords:i}=this;let a=0,s=0;for(;;){const o=r[e],c=e-e%3;if(s=c+(e+2)%3,o===-1){if(a===0)break;e=Qg[--a];continue}const d=o-o%3,f=c+(e+1)%3,p=d+(o+2)%3,g=t[s],y=t[e],v=t[f],b=t[p];if(dle(i[2*g],i[2*g+1],i[2*y],i[2*y+1],i[2*v],i[2*v+1],i[2*b],i[2*b+1])){t[e]=b,t[o]=g;const E=r[p];if(E===-1){let C=this._hullStart;do{if(this._hullTri[C]===p){this._hullTri[C]=e;break}C=this._hullPrev[C]}while(C!==this._hullStart)}this._link(e,E),this._link(o,r[s]),this._link(s,p);const T=d+(o+1)%3;a<Qg.length&&(Qg[a++]=T)}else{if(a===0)break;e=Qg[--a]}}return s}_link(e,t){this._halfedges[e]=t,t!==-1&&(this._halfedges[t]=e)}_addTriangle(e,t,r,i,a,s){const o=this.trianglesLen;return this._triangles[o]=e,this._triangles[o+1]=t,this._triangles[o+2]=r,this._link(o,i),this._link(o+1,a),this._link(o+2,s),this.trianglesLen+=3,o}}function ule(n,e){const t=n/(Math.abs(n)+Math.abs(e));return(e>0?3-t:1+t)/4}function m2(n,e,t,r){const i=n-t,a=e-r;return i*i+a*a}function dle(n,e,t,r,i,a,s,o){const c=n-s,d=e-o,f=t-s,p=r-o,g=i-s,y=a-o,v=c*c+d*d,b=f*f+p*p,A=g*g+y*y;return c*(p*A-b*y)-d*(f*A-b*g)+v*(f*y-p*g)<0}function fle(n,e,t,r,i,a){const s=t-n,o=r-e,c=i-n,d=a-e,f=s*s+o*o,p=c*c+d*d,g=.5/(s*d-o*c),y=(d*f-o*p)*g,v=(s*p-c*f)*g;return y*y+v*v}function hle(n,e,t,r,i,a){const s=t-n,o=r-e,c=i-n,d=a-e,f=s*s+o*o,p=c*c+d*d,g=.5/(s*d-o*c),y=n+(d*f-o*p)*g,v=e+(s*p-c*f)*g;return{x:y,y:v}}function bd(n,e,t,r){if(r-t<=20)for(let i=t+1;i<=r;i++){const a=n[i],s=e[a];let o=i-1;for(;o>=t&&e[n[o]]>s;)n[o+1]=n[o--];n[o+1]=a}else{const i=t+r>>1;let a=t+1,s=r;Mh(n,i,a),e[n[t]]>e[n[r]]&&Mh(n,t,r),e[n[a]]>e[n[r]]&&Mh(n,a,r),e[n[t]]>e[n[a]]&&Mh(n,t,a);const o=n[a],c=e[o];for(;;){do a++;while(e[n[a]]<c);do s--;while(e[n[s]]>c);if(s<a)break;Mh(n,a,s)}n[t+1]=n[s],n[s]=o,r-a+1>=s-t?(bd(n,e,a,r),bd(n,e,t,s-1)):(bd(n,e,t,s-1),bd(n,e,a,r))}}function Mh(n,e,t){const r=n[e];n[e]=n[t],n[t]=r}function ple(n){return n[0]}function gle(n){return n[1]}const P3=1e-6;class Nc{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(e,t){this._+=`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(e,t){this._+=`L${this._x1=+e},${this._y1=+t}`}arc(e,t,r){e=+e,t=+t,r=+r;const i=e+r,a=t;if(r<0)throw new Error("negative radius");this._x1===null?this._+=`M${i},${a}`:(Math.abs(this._x1-i)>P3||Math.abs(this._y1-a)>P3)&&(this._+="L"+i+","+a),r&&(this._+=`A${r},${r},0,1,1,${e-r},${t}A${r},${r},0,1,1,${this._x1=i},${this._y1=a}`)}rect(e,t,r,i){this._+=`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}h${+r}v${+i}h${-r}Z`}value(){return this._||null}}class kw{constructor(){this._=[]}moveTo(e,t){this._.push([e,t])}closePath(){this._.push(this._[0].slice())}lineTo(e,t){this._.push([e,t])}value(){return this._.length?this._:null}}class mle{constructor(e,[t,r,i,a]=[0,0,960,500]){if(!((i=+i)>=(t=+t))||!((a=+a)>=(r=+r)))throw new Error("invalid bounds");this.delaunay=e,this._circumcenters=new Float64Array(e.points.length*2),this.vectors=new Float64Array(e.points.length*2),this.xmax=i,this.xmin=t,this.ymax=a,this.ymin=r,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:e,hull:t,triangles:r},vectors:i}=this;let a,s;const o=this.circumcenters=this._circumcenters.subarray(0,r.length/3*2);for(let b=0,A=0,E=r.length,T,C;b<E;b+=3,A+=2){const D=r[b]*2,O=r[b+1]*2,N=r[b+2]*2,M=e[D],R=e[D+1],I=e[O],B=e[O+1],L=e[N],k=e[N+1],F=I-M,q=B-R,X=L-M,G=k-R,Y=(F*G-q*X)*2;if(Math.abs(Y)<1e-9){if(a===void 0){a=s=0;for(const Z of t)a+=e[Z*2],s+=e[Z*2+1];a/=t.length,s/=t.length}const Q=1e9*Math.sign((a-M)*G-(s-R)*X);T=(M+L)/2-Q*G,C=(R+k)/2+Q*X}else{const Q=1/Y,Z=F*F+q*q,fe=X*X+G*G;T=M+(G*Z-q*fe)*Q,C=R+(F*fe-X*Z)*Q}o[A]=T,o[A+1]=C}let c=t[t.length-1],d,f=c*4,p,g=e[2*c],y,v=e[2*c+1];i.fill(0);for(let b=0;b<t.length;++b)c=t[b],d=f,p=g,y=v,f=c*4,g=e[2*c],v=e[2*c+1],i[d+2]=i[f]=y-v,i[d+3]=i[f+1]=g-p}render(e){const t=e==null?e=new Nc:void 0,{delaunay:{halfedges:r,inedges:i,hull:a},circumcenters:s,vectors:o}=this;if(a.length<=1)return null;for(let f=0,p=r.length;f<p;++f){const g=r[f];if(g<f)continue;const y=Math.floor(f/3)*2,v=Math.floor(g/3)*2,b=s[y],A=s[y+1],E=s[v],T=s[v+1];this._renderSegment(b,A,E,T,e)}let c,d=a[a.length-1];for(let f=0;f<a.length;++f){c=d,d=a[f];const p=Math.floor(i[d]/3)*2,g=s[p],y=s[p+1],v=c*4,b=this._project(g,y,o[v+2],o[v+3]);b&&this._renderSegment(g,y,b[0],b[1],e)}return t&&t.value()}renderBounds(e){const t=e==null?e=new Nc:void 0;return e.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),t&&t.value()}renderCell(e,t){const r=t==null?t=new Nc:void 0,i=this._clip(e);if(i===null||!i.length)return;t.moveTo(i[0],i[1]);let a=i.length;for(;i[0]===i[a-2]&&i[1]===i[a-1]&&a>1;)a-=2;for(let s=2;s<a;s+=2)(i[s]!==i[s-2]||i[s+1]!==i[s-1])&&t.lineTo(i[s],i[s+1]);return t.closePath(),r&&r.value()}*cellPolygons(){const{delaunay:{points:e}}=this;for(let t=0,r=e.length/2;t<r;++t){const i=this.cellPolygon(t);i&&(i.index=t,yield i)}}cellPolygon(e){const t=new kw;return this.renderCell(e,t),t.value()}_renderSegment(e,t,r,i,a){let s;const o=this._regioncode(e,t),c=this._regioncode(r,i);o===0&&c===0?(a.moveTo(e,t),a.lineTo(r,i)):(s=this._clipSegment(e,t,r,i,o,c))&&(a.moveTo(s[0],s[1]),a.lineTo(s[2],s[3]))}contains(e,t,r){return t=+t,t!==t||(r=+r,r!==r)?!1:this.delaunay._step(e,t,r)===e}*neighbors(e){const t=this._clip(e);if(t)for(const r of this.delaunay.neighbors(e)){const i=this._clip(r);if(i){e:for(let a=0,s=t.length;a<s;a+=2)for(let o=0,c=i.length;o<c;o+=2)if(t[a]===i[o]&&t[a+1]===i[o+1]&&t[(a+2)%s]===i[(o+c-2)%c]&&t[(a+3)%s]===i[(o+c-1)%c]){yield r;break e}}}}_cell(e){const{circumcenters:t,delaunay:{inedges:r,halfedges:i,triangles:a}}=this,s=r[e];if(s===-1)return null;const o=[];let c=s;do{const d=Math.floor(c/3);if(o.push(t[d*2],t[d*2+1]),c=c%3===2?c-2:c+1,a[c]!==e)break;c=i[c]}while(c!==s&&c!==-1);return o}_clip(e){if(e===0&&this.delaunay.hull.length===1)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const t=this._cell(e);if(t===null)return null;const{vectors:r}=this,i=e*4;return this._simplify(r[i]||r[i+1]?this._clipInfinite(e,t,r[i],r[i+1],r[i+2],r[i+3]):this._clipFinite(e,t))}_clipFinite(e,t){const r=t.length;let i=null,a,s,o=t[r-2],c=t[r-1],d,f=this._regioncode(o,c),p,g=0;for(let y=0;y<r;y+=2)if(a=o,s=c,o=t[y],c=t[y+1],d=f,f=this._regioncode(o,c),d===0&&f===0)p=g,g=0,i?i.push(o,c):i=[o,c];else{let v,b,A,E,T;if(d===0){if((v=this._clipSegment(a,s,o,c,d,f))===null)continue;[b,A,E,T]=v}else{if((v=this._clipSegment(o,c,a,s,f,d))===null)continue;[E,T,b,A]=v,p=g,g=this._edgecode(b,A),p&&g&&this._edge(e,p,g,i,i.length),i?i.push(b,A):i=[b,A]}p=g,g=this._edgecode(E,T),p&&g&&this._edge(e,p,g,i,i.length),i?i.push(E,T):i=[E,T]}if(i)p=g,g=this._edgecode(i[0],i[1]),p&&g&&this._edge(e,p,g,i,i.length);else if(this.contains(e,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return i}_clipSegment(e,t,r,i,a,s){const o=a<s;for(o&&([e,t,r,i,a,s]=[r,i,e,t,s,a]);;){if(a===0&&s===0)return o?[r,i,e,t]:[e,t,r,i];if(a&s)return null;let c,d,f=a||s;f&8?(c=e+(r-e)*(this.ymax-t)/(i-t),d=this.ymax):f&4?(c=e+(r-e)*(this.ymin-t)/(i-t),d=this.ymin):f&2?(d=t+(i-t)*(this.xmax-e)/(r-e),c=this.xmax):(d=t+(i-t)*(this.xmin-e)/(r-e),c=this.xmin),a?(e=c,t=d,a=this._regioncode(e,t)):(r=c,i=d,s=this._regioncode(r,i))}}_clipInfinite(e,t,r,i,a,s){let o=Array.from(t),c;if((c=this._project(o[0],o[1],r,i))&&o.unshift(c[0],c[1]),(c=this._project(o[o.length-2],o[o.length-1],a,s))&&o.push(c[0],c[1]),o=this._clipFinite(e,o))for(let d=0,f=o.length,p,g=this._edgecode(o[f-2],o[f-1]);d<f;d+=2)p=g,g=this._edgecode(o[d],o[d+1]),p&&g&&(d=this._edge(e,p,g,o,d),f=o.length);else this.contains(e,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(o=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return o}_edge(e,t,r,i,a){for(;t!==r;){let s,o;switch(t){case 5:t=4;continue;case 4:t=6,s=this.xmax,o=this.ymin;break;case 6:t=2;continue;case 2:t=10,s=this.xmax,o=this.ymax;break;case 10:t=8;continue;case 8:t=9,s=this.xmin,o=this.ymax;break;case 9:t=1;continue;case 1:t=5,s=this.xmin,o=this.ymin;break}(i[a]!==s||i[a+1]!==o)&&this.contains(e,s,o)&&(i.splice(a,0,s,o),a+=2)}return a}_project(e,t,r,i){let a=1/0,s,o,c;if(i<0){if(t<=this.ymin)return null;(s=(this.ymin-t)/i)<a&&(c=this.ymin,o=e+(a=s)*r)}else if(i>0){if(t>=this.ymax)return null;(s=(this.ymax-t)/i)<a&&(c=this.ymax,o=e+(a=s)*r)}if(r>0){if(e>=this.xmax)return null;(s=(this.xmax-e)/r)<a&&(o=this.xmax,c=t+(a=s)*i)}else if(r<0){if(e<=this.xmin)return null;(s=(this.xmin-e)/r)<a&&(o=this.xmin,c=t+(a=s)*i)}return[o,c]}_edgecode(e,t){return(e===this.xmin?1:e===this.xmax?2:0)|(t===this.ymin?4:t===this.ymax?8:0)}_regioncode(e,t){return(e<this.xmin?1:e>this.xmax?2:0)|(t<this.ymin?4:t>this.ymax?8:0)}_simplify(e){if(e&&e.length>4){for(let t=0;t<e.length;t+=2){const r=(t+2)%e.length,i=(t+4)%e.length;(e[t]===e[r]&&e[r]===e[i]||e[t+1]===e[r+1]&&e[r+1]===e[i+1])&&(e.splice(r,2),t-=2)}e.length||(e=null)}return e}}const yle=2*Math.PI,ad=Math.pow;function vle(n){return n[0]}function xle(n){return n[1]}function wle(n){const{triangles:e,coords:t}=n;for(let r=0;r<e.length;r+=3){const i=2*e[r],a=2*e[r+1],s=2*e[r+2];if((t[s]-t[i])*(t[a+1]-t[i+1])-(t[a]-t[i])*(t[s+1]-t[i+1])>1e-10)return!1}return!0}function _le(n,e,t){return[n+Math.sin(n+e)*t,e+Math.cos(n-e)*t]}class nA{static from(e,t=vle,r=xle,i){return new nA("length"in e?ble(e,t,r,i):Float64Array.from(Ale(e,t,r,i)))}constructor(e){this._delaunator=new gm(e),this.inedges=new Int32Array(e.length/2),this._hullIndex=new Int32Array(e.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const e=this._delaunator,t=this.points;if(e.hull&&e.hull.length>2&&wle(e)){this.collinear=Int32Array.from({length:t.length/2},(g,y)=>y).sort((g,y)=>t[2*g]-t[2*y]||t[2*g+1]-t[2*y+1]);const c=this.collinear[0],d=this.collinear[this.collinear.length-1],f=[t[2*c],t[2*c+1],t[2*d],t[2*d+1]],p=1e-8*Math.hypot(f[3]-f[1],f[2]-f[0]);for(let g=0,y=t.length/2;g<y;++g){const v=_le(t[2*g],t[2*g+1],p);t[2*g]=v[0],t[2*g+1]=v[1]}this._delaunator=new gm(t)}else delete this.collinear;const r=this.halfedges=this._delaunator.halfedges,i=this.hull=this._delaunator.hull,a=this.triangles=this._delaunator.triangles,s=this.inedges.fill(-1),o=this._hullIndex.fill(-1);for(let c=0,d=r.length;c<d;++c){const f=a[c%3===2?c-2:c+1];(r[c]===-1||s[f]===-1)&&(s[f]=c)}for(let c=0,d=i.length;c<d;++c)o[i[c]]=c;i.length<=2&&i.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=i[0],s[i[0]]=1,i.length===2&&(s[i[1]]=0,this.triangles[1]=i[1],this.triangles[2]=i[1]))}voronoi(e){return new mle(this,e)}*neighbors(e){const{inedges:t,hull:r,_hullIndex:i,halfedges:a,triangles:s,collinear:o}=this;if(o){const p=o.indexOf(e);p>0&&(yield o[p-1]),p<o.length-1&&(yield o[p+1]);return}const c=t[e];if(c===-1)return;let d=c,f=-1;do{if(yield f=s[d],d=d%3===2?d-2:d+1,s[d]!==e)return;if(d=a[d],d===-1){const p=r[(i[e]+1)%r.length];p!==f&&(yield p);return}}while(d!==c)}find(e,t,r=0){if(e=+e,e!==e||(t=+t,t!==t))return-1;const i=r;let a;for(;(a=this._step(r,e,t))>=0&&a!==r&&a!==i;)r=a;return a}_step(e,t,r){const{inedges:i,hull:a,_hullIndex:s,halfedges:o,triangles:c,points:d}=this;if(i[e]===-1||!d.length)return(e+1)%(d.length>>1);let f=e,p=ad(t-d[e*2],2)+ad(r-d[e*2+1],2);const g=i[e];let y=g;do{let v=c[y];const b=ad(t-d[v*2],2)+ad(r-d[v*2+1],2);if(b<p&&(p=b,f=v),y=y%3===2?y-2:y+1,c[y]!==e)break;if(y=o[y],y===-1){if(y=a[(s[e]+1)%a.length],y!==v&&ad(t-d[y*2],2)+ad(r-d[y*2+1],2)<p)return y;break}}while(y!==g);return f}render(e){const t=e==null?e=new Nc:void 0,{points:r,halfedges:i,triangles:a}=this;for(let s=0,o=i.length;s<o;++s){const c=i[s];if(c<s)continue;const d=a[s]*2,f=a[c]*2;e.moveTo(r[d],r[d+1]),e.lineTo(r[f],r[f+1])}return this.renderHull(e),t&&t.value()}renderPoints(e,t){t===void 0&&(!e||typeof e.moveTo!="function")&&(t=e,e=null),t=t==null?2:+t;const r=e==null?e=new Nc:void 0,{points:i}=this;for(let a=0,s=i.length;a<s;a+=2){const o=i[a],c=i[a+1];e.moveTo(o+t,c),e.arc(o,c,t,0,yle)}return r&&r.value()}renderHull(e){const t=e==null?e=new Nc:void 0,{hull:r,points:i}=this,a=r[0]*2,s=r.length;e.moveTo(i[a],i[a+1]);for(let o=1;o<s;++o){const c=2*r[o];e.lineTo(i[c],i[c+1])}return e.closePath(),t&&t.value()}hullPolygon(){const e=new kw;return this.renderHull(e),e.value()}renderTriangle(e,t){const r=t==null?t=new Nc:void 0,{points:i,triangles:a}=this,s=a[e*=3]*2,o=a[e+1]*2,c=a[e+2]*2;return t.moveTo(i[s],i[s+1]),t.lineTo(i[o],i[o+1]),t.lineTo(i[c],i[c+1]),t.closePath(),r&&r.value()}*trianglePolygons(){const{triangles:e}=this;for(let t=0,r=e.length/3;t<r;++t)yield this.trianglePolygon(t)}trianglePolygon(e){const t=new kw;return this.renderTriangle(e,t),t.value()}}function ble(n,e,t,r){const i=n.length,a=new Float64Array(i*2);for(let s=0;s<i;++s){const o=n[s];a[s*2]=e.call(r,o,s,n),a[s*2+1]=t.call(r,o,s,n)}return a}function*Ale(n,e,t,r){let i=0;for(const a of n)yield e.call(r,a,i,n),yield t.call(r,a,i,n),++i}const wy=({svgRef:n,params:e,store:t,instance:r})=>{var N;const{disableVoronoi:i,voronoiMaxRadius:a,onItemClick:s}=e,o=dt(t,Io),{axis:c,axisIds:d}=dt(t,Xi),{axis:f,axisIds:p}=dt(t,Ki),g=dt(t,o6),{series:y,seriesOrder:v}=((N=dt(t,Wa))==null?void 0:N.scatter)??{},b=V.useRef({}),A=V.useRef(void 0),E=V.useRef(void 0),T=d[0],C=p[0];Gn(()=>{t.update(M=>M.voronoi.isVoronoiEnabled===!i?M:H({},M,{voronoi:{isVoronoiEnabled:!i}}))},[t,i]),Gn(()=>{if(g||v===void 0||y===void 0||i)return;b.current={};let M=[];v.forEach(R=>{const{data:I,xAxisId:B,yAxisId:L}=y[R],k=c[B??T].scale,F=f[L??C].scale,q=lm(k),X=lm(F),G=[],Y=[];for(let Q=0;Q<I.length;Q+=1){const{x:Z,y:fe}=I[Q],ge=q(Z),we=X(fe);r.isPointInside(ge,we)&&(G.push(ge),G.push(we),Y.push(Q))}b.current[R]={seriesId:R,seriesIndexes:Y,startIndex:M.length,endIndex:M.length+G.length},M=M.concat(G)}),A.current=new nA(M),E.current=void 0},[g,T,C,y,v,c,f,o,r,i]),V.useEffect(()=>{if(n.current===null||i)return;const M=n.current;function R(Y){const Q=Aw(M,Y);if(!r.isPointInside(Q.x,Q.y))return E.current=void 0,"outside-chart";if(!A.current)return"no-point-found";const Z=A.current.find(Q.x,Q.y,E.current);if(Z===void 0)return"no-point-found";E.current=Z;const fe=Object.values(b.current).find(Ae=>2*Z>=Ae.startIndex&&2*Z<Ae.endIndex);if(fe===void 0)return"no-point-found";const ge=(2*Z-b.current[fe.seriesId].startIndex)/2,we=b.current[fe.seriesId].seriesIndexes[ge];if(a!==void 0){const Ae=A.current.points[2*Z],Pe=A.current.points[2*Z+1];if((Ae-Q.x)**2+(Pe-Q.y)**2>a**2)return"outside-voronoi-max-radius"}return{seriesId:fe.seriesId,dataIndex:we}}const I=r.addInteractionListener("moveEnd",Y=>{var Q,Z;Y.detail.activeGestures.pan||((Q=r.cleanInteraction)==null||Q.call(r),(Z=r.clearHighlight)==null||Z.call(r))}),B=r.addInteractionListener("panEnd",Y=>{var Q,Z;Y.detail.activeGestures.move||((Q=r.cleanInteraction)==null||Q.call(r),(Z=r.clearHighlight)==null||Z.call(r))}),L=r.addInteractionListener("quickPressEnd",Y=>{var Q,Z;!Y.detail.activeGestures.move&&!Y.detail.activeGestures.pan&&((Q=r.cleanInteraction)==null||Q.call(r),(Z=r.clearHighlight)==null||Z.call(r))}),k=Y=>{var ge,we,Ae,Pe,Re,He;const Q=R(Y.detail.srcEvent);if(Q==="outside-chart"){(ge=r.cleanInteraction)==null||ge.call(r),(we=r.clearHighlight)==null||we.call(r);return}if(Q==="outside-voronoi-max-radius"||Q==="no-point-found"){(Ae=r.removeItemInteraction)==null||Ae.call(r),(Pe=r.clearHighlight)==null||Pe.call(r);return}const{seriesId:Z,dataIndex:fe}=Q;(Re=r.setItemInteraction)==null||Re.call(r,{type:"scatter",seriesId:Z,dataIndex:fe}),(He=r.setHighlight)==null||He.call(r,{seriesId:Z,dataIndex:fe})},F=r.addInteractionListener("tap",Y=>{const Q=R(Y.detail.srcEvent);if(typeof Q!="string"&&s){const{seriesId:Z,dataIndex:fe}=Q;s(Y.detail.srcEvent,{type:"scatter",seriesId:Z,dataIndex:fe})}}),q=r.addInteractionListener("move",k),X=r.addInteractionListener("pan",k),G=r.addInteractionListener("quickPress",k);return()=>{F.cleanup(),q.cleanup(),I.cleanup(),X.cleanup(),B.cleanup(),G.cleanup(),L.cleanup()}},[n,f,c,a,s,i,o,r]);const D=Ve(()=>{t.update(M=>H({},M,{voronoi:H({},M.voronoi,{isVoronoiEnabled:!0})}))}),O=Ve(()=>{t.update(M=>H({},M,{voronoi:H({},M.voronoi,{isVoronoiEnabled:!1})}))});return{instance:{enableVoronoi:D,disableVoronoi:O}}};wy.getDefaultizedParams=({params:n})=>H({},n,{disableVoronoi:n.disableVoronoi??!n.series.some(e=>e.type==="scatter")});wy.getInitialState=n=>({voronoi:{isVoronoiEnabled:!n.disableVoronoi}});wy.params={disableVoronoi:!0,voronoiMaxRadius:!0,onItemClick:!0};const _k=[Z0,pf,hf,su,wy],Ele=["children","localeText","plugins","seriesConfig","slots","slotProps"],Sle=n=>{const e=xt({props:n,name:"MuiChartDataProvider"}),{children:t,localeText:r,plugins:i=_k,seriesConfig:a,slots:s,slotProps:o}=e,c=Ne(e,Ele),d=Kc(),f={plugins:i,seriesConfig:a,pluginParams:H({theme:d.palette.mode},c)};return{children:t,localeText:r,chartProviderProps:f,slots:s,slotProps:o}};function bk(n){const{children:e,localeText:t,chartProviderProps:r,slots:i,slotProps:a}=Sle(n);return x.jsx(Die,H({},r,{children:x.jsx(kae,{localeText:t,children:x.jsx(rle,{slots:i,slotProps:a,defaultSlots:tle,children:e})})}))}function k3(n){const{isReversed:e,gradientId:t,size:r,direction:i,scale:a,colorMap:s}=n;return r<=0?null:x.jsx("linearGradient",{id:t,x1:"0",x2:"0",y1:"0",y2:"0",[`${i}${e?1:2}`]:`${r}px`,gradientUnits:"userSpaceOnUse",children:s.thresholds.map((o,c)=>{const d=a(o);if(d===void 0)return null;const f=e?1-d/r:d/r;return Number.isNaN(f)?null:x.jsxs(V.Fragment,{children:[x.jsx("stop",{offset:f,stopColor:s.colors[c],stopOpacity:1}),x.jsx("stop",{offset:f,stopColor:s.colors[c+1],stopOpacity:1})]},o.toString()+c)})})}const Tle=10;function N3(n){const{gradientUnits:e,isReversed:t,gradientId:r,size:i,direction:a,scale:s,colorScale:o,colorMap:c}=n,d=[c.min??0,c.max??100],f=d.map(s).filter(v=>v!==void 0);if(f.length!==2)return null;const p=typeof d[0]=="number"?Qt(d[0],d[1]):Rb(d[0],d[1]),g=Math.round((Math.max(...f)-Math.min(...f))/Tle),y=`${d[0]}-${d[1]}-`;return x.jsx("linearGradient",{id:r,x1:"0",x2:"0",y1:"0",y2:"0",[`${a}${t?1:2}`]:e==="objectBoundingBox"?1:`${i}px`,gradientUnits:e??"userSpaceOnUse",children:Array.from({length:g+1},(v,b)=>{const A=p(b/g);if(A===void 0)return null;const E=s(A);if(E===void 0)return null;const T=t?1-E/i:E/i,C=o(A);return C===null?null:x.jsx("stop",{offset:T,stopColor:C,stopOpacity:1},y+b)})})}const Cle=10,Ile=n=>n?{x1:"1",x2:"0",y1:"0",y2:"0"}:{x1:"0",x2:"1",y1:"0",y2:"0"};function y2(n){const{isReversed:e,gradientId:t,colorScale:r,colorMap:i}=n,a=[i.min??0,i.max??100],s=typeof a[0]=="number"?Qt(a[0],a[1]):Rb(a[0],a[1]),o=Cle,c=`${a[0]}-${a[1]}-`;return x.jsx("linearGradient",H({id:t},Ile(e),{gradientUnits:"objectBoundingBox",children:Array.from({length:o+1},(d,f)=>{const p=f/o,g=s(p);if(g===void 0)return null;const y=r(g);return y===null?null:x.jsx("stop",{offset:p,stopColor:y,stopOpacity:1},c+f)})}))}function Dle(){const{top:n,height:e,bottom:t,left:r,width:i,right:a}=ba(),s=n+e+t,o=r+i+a,c=lae(),d=cae(),{xAxis:f,xAxisIds:p}=Mo(),{yAxis:g,yAxisIds:y}=Ul(),{zAxis:v,zAxisIds:b}=Kb(),A=y.filter(C=>g[C].colorMap!==void 0),E=p.filter(C=>f[C].colorMap!==void 0),T=b.filter(C=>v[C].colorMap!==void 0);return A.length===0&&E.length===0&&T.length===0?null:x.jsxs("defs",{children:[A.map(C=>{const D=c(C),O=d(C),{colorMap:N,scale:M,colorScale:R,reverse:I}=g[C];return(N==null?void 0:N.type)==="piecewise"?x.jsx(k3,{isReversed:!I,scale:M,colorMap:N,size:s,gradientId:D,direction:"y"},D):(N==null?void 0:N.type)==="continuous"?x.jsxs(V.Fragment,{children:[x.jsx(N3,{isReversed:!I,scale:M,colorScale:R,colorMap:N,size:s,gradientId:D,direction:"y"}),x.jsx(y2,{isReversed:I,colorScale:R,colorMap:N,gradientId:O})]},D):null}),E.map(C=>{const D=c(C),O=d(C),{colorMap:N,scale:M,reverse:R,colorScale:I}=f[C];return(N==null?void 0:N.type)==="piecewise"?x.jsx(k3,{isReversed:R,scale:M,colorMap:N,size:o,gradientId:D,direction:"x"},D):(N==null?void 0:N.type)==="continuous"?x.jsxs(V.Fragment,{children:[x.jsx(N3,{isReversed:R,scale:M,colorScale:I,colorMap:N,size:o,gradientId:D,direction:"x"}),x.jsx(y2,{isReversed:R,colorScale:I,colorMap:N,gradientId:O})]},D):null}),T.map(C=>{const D=d(C),{colorMap:O,colorScale:N}=v[C];return(O==null?void 0:O.type)==="continuous"?x.jsx(y2,{colorScale:N,colorMap:O,gradientId:D},D):null})]})}const Rle=["children","className","title","desc"],Mle=Me("svg",{name:"MuiChartsSurface",slot:"Root"})(({ownerState:n})=>({width:n.width??"100%",height:n.height??"100%",display:"flex",position:"relative",flexDirection:"column",alignItems:"center",justifyContent:"center",overflow:"hidden",touchAction:"pan-y",userSelect:"none"})),Ak=V.forwardRef(function(e,t){const r=vn(),{width:i,height:a}=dt(r,UJ),{width:s,height:o}=dt(r,vP),c=Qb(),d=ti(c,t),f=xt({props:e,name:"MuiChartsSurface"}),{children:p,className:g,title:y,desc:v}=f,b=Ne(f,Rle),A=a>0&&i>0;return x.jsxs(Mle,H({ownerState:{width:s,height:o},viewBox:`0 0 ${i} ${a}`,className:g},b,{ref:d,children:[y&&x.jsx("title",{children:y}),v&&x.jsx("desc",{children:v}),x.jsx(Dle,{}),A&&p]}))}),Ole=["width","height","margin","children","series","colors","dataset","desc","onAxisClick","highlightedAxis","onHighlightedAxisChange","disableVoronoi","voronoiMaxRadius","onItemClick","disableAxisListener","highlightedItem","onHighlightChange","sx","title","xAxis","yAxis","zAxis","rotationAxis","radiusAxis","skipAnimation","seriesConfig","plugins","localeText","slots","slotProps","experimentalFeatures"],Ek=(n,e)=>{const t=n,{width:r,height:i,margin:a,children:s,series:o,colors:c,dataset:d,desc:f,onAxisClick:p,highlightedAxis:g,onHighlightedAxisChange:y,disableVoronoi:v,voronoiMaxRadius:b,onItemClick:A,disableAxisListener:E,highlightedItem:T,onHighlightChange:C,sx:D,title:O,xAxis:N,yAxis:M,zAxis:R,rotationAxis:I,radiusAxis:B,skipAnimation:L,seriesConfig:k,plugins:F,localeText:q,slots:X,slotProps:G,experimentalFeatures:Y}=t,Q=Ne(t,Ole),Z=H({title:O,desc:f,sx:D,ref:e},Q);return{chartDataProviderProps:{margin:a,series:o,colors:c,dataset:d,disableAxisListener:E,highlightedItem:T,onHighlightChange:C,onAxisClick:p,highlightedAxis:g,onHighlightedAxisChange:y,disableVoronoi:v,voronoiMaxRadius:b,onItemClick:A,xAxis:N,yAxis:M,zAxis:R,rotationAxis:I,radiusAxis:B,skipAnimation:L,width:r,height:i,localeText:q,seriesConfig:k,experimentalFeatures:Y,plugins:F??_k,slots:X,slotProps:G},chartsSurfaceProps:Z,children:s}},Ple=(n,e)=>n==="vertical"?(e==null?void 0:e.horizontal)==="start"?"row":"row-reverse":(e==null?void 0:e.vertical)==="bottom"?"column-reverse":"column",kle=(n,e)=>{if(n==="vertical"){if((e==null?void 0:e.vertical)==="top")return"flex-start";if((e==null?void 0:e.vertical)==="bottom")return"flex-end"}if(n==="horizontal"){if((e==null?void 0:e.horizontal)==="start")return"flex-start";if((e==null?void 0:e.horizontal)==="end")return"flex-end"}return"center"},Nle=Me("div",{name:"MuiChartsWrapper",slot:"Root",shouldForwardProp:n=>_a(n)&&n!=="extendVertically"})(({ownerState:n})=>({display:"flex",flexDirection:Ple(n.legendDirection,n.legendPosition),flex:1,justifyContent:"center",alignItems:kle(n.legendDirection,n.legendPosition),variants:[{props:{extendVertically:!0},style:{height:"100%"}}]}));function Sk(n){const{children:e,sx:t,extendVertically:r}=n,i=Dae(),a=vn(),{height:s}=dt(a,vP);return x.jsx(Nle,{ref:i,ownerState:n,sx:t,extendVertically:r??s===void 0,children:e})}const v2=V.forwardRef(function(e,t){var C,D,O,N;const r=xt({props:e,name:"MuiBarChart"}),{chartsWrapperProps:i,chartContainerProps:a,barPlotProps:s,gridProps:o,clipPathProps:c,clipPathGroupProps:d,overlayProps:f,chartsAxisProps:p,axisHighlightProps:g,legendProps:y,children:v}=Zoe(r),{chartDataProviderProps:b,chartsSurfaceProps:A}=Ek(a,t),E=((C=r.slots)==null?void 0:C.tooltip)??gk,T=(D=r.slots)==null?void 0:D.toolbar;return x.jsx(bk,H({},b,{children:x.jsxs(Sk,H({},i,{children:[r.showToolbar&&T?x.jsx(T,H({},(O=r.slotProps)==null?void 0:O.toolbar)):null,!r.hideLegend&&x.jsx(mk,H({},y)),x.jsxs(Ak,H({},A,{children:[x.jsx(Ese,H({},o)),x.jsxs("g",H({},d,{children:[x.jsx(Hoe,H({},s)),x.jsx(wk,H({},f)),x.jsx(uoe,H({},g))]})),x.jsx(yse,H({},p)),x.jsx(Nae,H({},c)),v]})),!r.loading&&x.jsx(E,H({},(N=r.slotProps)==null?void 0:N.tooltip))]}))}))}),Lle=["classes","color","dataIndex","id","isFaded","isHighlighted","onClick","cornerRadius","startAngle","endAngle","innerRadius","outerRadius","paddingAngle","skipAnimation"];function Ble(n){return Dt("MuiPieArc",n)}Rt("MuiPieArc",["root","highlighted","faded","series"]);const Vle=n=>{const{classes:e,id:t,isFaded:r,isHighlighted:i,dataIndex:a}=n,s={root:["root",`series-${t}`,`data-index-${a}`,i&&"highlighted",r&&"faded"]};return yt(s,Ble,e)},Fle=Me("path",{name:"MuiPieArc",slot:"Root",overridesResolver:(n,e)=>e.arc})(({theme:n})=>({stroke:(n.vars||n).palette.background.paper,transitionProperty:"opacity, fill, filter",transitionDuration:`${Zb}ms`,transitionTimingFunction:U6})),jle=V.forwardRef(function(e,t){const{classes:r,color:i,dataIndex:a,id:s,isFaded:o,isHighlighted:c,onClick:d,cornerRadius:f,startAngle:p,endAngle:g,innerRadius:y,outerRadius:v,paddingAngle:b,skipAnimation:A}=e,E=Ne(e,Lle),T={id:s,dataIndex:a,classes:r,color:i,isFaded:o,isHighlighted:c},C=Vle(T),D=yk({type:"pie",seriesId:s,dataIndex:a}),O=Tae({cornerRadius:f,startAngle:p,endAngle:g,innerRadius:y,outerRadius:v,paddingAngle:b,skipAnimation:A,ref:t});return x.jsx(Fle,H({onClick:d,cursor:d?"pointer":"unset",ownerState:T,className:C.root,fill:T.color,opacity:T.isFaded?.3:1,filter:T.isHighlighted?"brightness(120%)":"none",strokeWidth:1,strokeLinejoin:"round","data-highlighted":T.isHighlighted||void 0,"data-faded":T.isFaded||void 0},E,D,O))});function Tk(n){const{id:e,data:t,faded:r,highlighted:i,paddingAngle:a=0,innerRadius:s=0,arcLabelRadius:o,outerRadius:c,cornerRadius:d=0}=n,{isFaded:f,isHighlighted:p}=aae();return V.useMemo(()=>t.map((y,v)=>{const b={seriesId:e,dataIndex:v},A=p(b),E=!A&&f(b),T=H({additionalRadius:0},E&&r||A&&i||{}),C=Math.max(0,wd(T.paddingAngle??a)),D=Math.max(0,T.innerRadius??s),O=Math.max(0,T.outerRadius??c+T.additionalRadius),N=T.cornerRadius??d,M=T.arcLabelRadius??o??(D+O)/2;return H({},y,T,{dataIndex:v,isFaded:E,isHighlighted:A,paddingAngle:C,innerRadius:D,outerRadius:O,cornerRadius:N,arcLabelRadius:M})}),[d,s,c,a,o,t,r,i,f,p,e])}const Ule=["slots","slotProps","innerRadius","outerRadius","cornerRadius","paddingAngle","id","highlighted","faded","data","onItemClick","skipAnimation"];function Hle(n){const{slots:e,slotProps:t,innerRadius:r=0,outerRadius:i,cornerRadius:a=0,paddingAngle:s=0,id:o,highlighted:c,faded:d={additionalRadius:-5},data:f,onItemClick:p,skipAnimation:g}=n,y=Ne(n,Ule),v=Tk({innerRadius:r,outerRadius:i,cornerRadius:a,paddingAngle:s,id:o,highlighted:c,faded:d,data:f});if(f.length===0)return null;const b=(e==null?void 0:e.pieArc)??jle;return x.jsx("g",H({},y,{children:v.map((A,E)=>x.jsx(b,H({startAngle:A.startAngle,endAngle:A.endAngle,paddingAngle:A.paddingAngle,innerRadius:A.innerRadius,outerRadius:A.outerRadius,cornerRadius:A.cornerRadius,skipAnimation:g??!1,id:o,color:A.color,dataIndex:E,isFaded:A.isFaded,isHighlighted:A.isHighlighted,onClick:p&&(T=>{p(T,{type:"pie",seriesId:o,dataIndex:E},A)})},t==null?void 0:t.pieArc),A.dataIndex))}))}const zle=["id","classes","color","startAngle","endAngle","paddingAngle","arcLabelRadius","innerRadius","outerRadius","cornerRadius","formattedArcLabel","isHighlighted","isFaded","style","skipAnimation"];function $le(n){return Dt("MuiPieArcLabel",n)}const Gle=Rt("MuiPieArcLabel",["root","highlighted","faded","animate","series"]),Wle=n=>{const{classes:e,id:t,isFaded:r,isHighlighted:i,skipAnimation:a}=n,s={root:["root",`series-${t}`,i&&"highlighted",r&&"faded",!a&&"animate"]};return yt(s,$le,e)},Yle=Me("text",{name:"MuiPieArcLabel",slot:"Root"})(({theme:n})=>({fill:(n.vars||n).palette.text.primary,textAnchor:"middle",dominantBaseline:"middle",pointerEvents:"none",animationName:"animate-opacity",animationDuration:"0s",animationTimingFunction:U6,[`&.${Gle.animate}`]:{animationDuration:`${Zb}ms`},"@keyframes animate-opacity":{from:{opacity:0}}})),qle=V.forwardRef(function(e,t){const{id:r,classes:i,color:a,startAngle:s,endAngle:o,paddingAngle:c,arcLabelRadius:d,cornerRadius:f,formattedArcLabel:p,isHighlighted:g,isFaded:y,skipAnimation:v}=e,b=Ne(e,zle),E=Wle({id:r,classes:i,isFaded:y,isHighlighted:g,skipAnimation:v}),T=Iae({cornerRadius:f,startAngle:s,endAngle:o,innerRadius:d,outerRadius:d,paddingAngle:c,skipAnimation:v,ref:t});return x.jsx(Yle,H({className:E.root},b,T,{children:p}))}),Xle=["arcLabel","arcLabelMinAngle","arcLabelRadius","cornerRadius","data","faded","highlighted","id","innerRadius","outerRadius","paddingAngle","skipAnimation","slotProps","slots"],Kle=180/Math.PI;function Qle(n,e,t){var i;if(!n||(t.endAngle-t.startAngle)*Kle<e)return null;switch(n){case"label":return qi(t.label,"arc");case"value":return(i=t.value)==null?void 0:i.toString();case"formattedValue":return t.formattedValue;default:return n(H({},t,{label:qi(t.label,"arc")}))}}function Zle(n){const{arcLabel:e,arcLabelMinAngle:t=0,arcLabelRadius:r,cornerRadius:i=0,data:a,faded:s={additionalRadius:-5},highlighted:o,id:c,innerRadius:d,outerRadius:f,paddingAngle:p=0,skipAnimation:g,slotProps:y,slots:v}=n,b=Ne(n,Xle),A=Tk({innerRadius:d,outerRadius:f,arcLabelRadius:r,cornerRadius:i,paddingAngle:p,id:c,highlighted:o,faded:s,data:a});if(a.length===0)return null;const E=(v==null?void 0:v.pieArcLabel)??qle;return x.jsx("g",H({},b,{children:A.map(T=>x.jsx(E,H({startAngle:T.startAngle,endAngle:T.endAngle,paddingAngle:T.paddingAngle,innerRadius:T.innerRadius,outerRadius:T.outerRadius,arcLabelRadius:T.arcLabelRadius,cornerRadius:T.cornerRadius,id:c,color:T.color,isFaded:T.isFaded,isHighlighted:T.isHighlighted,formattedArcLabel:Qle(e,t,T),skipAnimation:g??!1},y==null?void 0:y.pieArcLabel),T.id??T.dataIndex))}))}function Dc(n,e){if(typeof n=="number")return n;if(n==="100%")return e;if(n.endsWith("%")){const t=Number.parseFloat(n.slice(0,n.length-1));if(!Number.isNaN(t))return t*e/100}if(n.endsWith("px")){const t=Number.parseFloat(n.slice(0,n.length-2));if(!Number.isNaN(t))return t}throw new Error(`MUI X Charts: Received an unknown value "${n}". It should be a number, or a string with a percentage value.`)}function L3(n,e){const{height:t,width:r}=e,{cx:i,cy:a}=n,s=Math.min(r,t)/2,o=Dc(i??"50%",r),c=Dc(a??"50%",t);return{cx:o,cy:c,availableRadius:s}}function Jle(n){return Dt("MuiPieChart",n)}Rt("MuiPieChart",["root","series","seriesLabels"]);const ece=n=>yt({root:["root"],series:["series"],seriesLabels:["seriesLabels"]},Jle,n);function tce(n){const{skipAnimation:e,slots:t,slotProps:r,onItemClick:i}=n,a=Yie(),{left:s,top:o,width:c,height:d}=ba(),f=xk(e),p=ece();if(a===void 0)return null;const{series:g,seriesOrder:y}=a;return x.jsxs("g",{children:[y.map(v=>{const{innerRadius:b,outerRadius:A,cornerRadius:E,paddingAngle:T,data:C,cx:D,cy:O,highlighted:N,faded:M}=g[v],{cx:R,cy:I,availableRadius:B}=L3({cx:D,cy:O},{width:c,height:d}),L=Dc(A??B,B),k=Dc(b??0,B);return x.jsx("g",{className:p.series,transform:`translate(${s+R}, ${o+I})`,"data-series":v,children:x.jsx(Hle,{innerRadius:k,outerRadius:L,cornerRadius:E,paddingAngle:T,id:v,data:C,skipAnimation:f,highlighted:N,faded:M,onItemClick:i,slots:t,slotProps:r})},v)}),y.map(v=>{const{innerRadius:b,outerRadius:A,arcLabelRadius:E,cornerRadius:T,paddingAngle:C,arcLabel:D,arcLabelMinAngle:O,data:N,cx:M,cy:R}=g[v],{cx:I,cy:B,availableRadius:L}=L3({cx:M,cy:R},{width:c,height:d}),k=Dc(A??L,L),F=Dc(b??0,L),q=E===void 0?(k+F)/2:Dc(E,L);return x.jsx("g",{className:p.seriesLabels,transform:`translate(${s+I}, ${o+B})`,"data-series":v,children:x.jsx(Zle,{innerRadius:F,outerRadius:k??L,arcLabelRadius:q,cornerRadius:T,paddingAngle:C,id:v,data:N,skipAnimation:f,arcLabel:D,arcLabelMinAngle:O,slots:t,slotProps:r})},v)})]})}const nce=[hf,su],rce=["series","width","height","margin","colors","sx","skipAnimation","hideLegend","children","slots","slotProps","onItemClick","loading","highlightedItem","onHighlightChange","className","showToolbar"],B3=V.forwardRef(function(e,t){var L,k,F,q,X,G,Y,Q;const r=xt({props:e,name:"MuiPieChart"}),{series:i,width:a,height:s,margin:o,colors:c,sx:d,skipAnimation:f,hideLegend:p,children:g,slots:y,slotProps:v,onItemClick:b,loading:A,highlightedItem:E,onHighlightChange:T,className:C,showToolbar:D}=r,O=Ne(r,rce),N=xP(o,pee),{chartDataProviderProps:M,chartsSurfaceProps:R}=Ek(H({},O,{series:i.map(Z=>H({type:"pie"},Z)),width:a,height:s,margin:N,colors:c,highlightedItem:E,onHighlightChange:T,className:C,skipAnimation:f,plugins:nce}),t),I=(y==null?void 0:y.tooltip)??gk,B=(L=r.slots)==null?void 0:L.toolbar;return x.jsx(bk,H({},M,{children:x.jsxs(Sk,{legendPosition:(F=(k=r.slotProps)==null?void 0:k.legend)==null?void 0:F.position,legendDirection:((X=(q=r==null?void 0:r.slotProps)==null?void 0:q.legend)==null?void 0:X.direction)??"vertical",sx:d,children:[D&&B?x.jsx(B,H({},(G=r.slotProps)==null?void 0:G.toolbar)):null,!p&&x.jsx(mk,{direction:((Q=(Y=r==null?void 0:r.slotProps)==null?void 0:Y.legend)==null?void 0:Q.direction)??"vertical",slots:y,slotProps:v}),x.jsxs(Ak,H({},R,{children:[x.jsx(tce,{slots:y,slotProps:v,onItemClick:b}),x.jsx(wk,{loading:A,slots:y,slotProps:v}),g]})),!A&&x.jsx(I,H({trigger:"item"},v==null?void 0:v.tooltip))]})}))});function ice(){const{loading:n,error:e,summary:t,tagStats:r,monthlyFinished:i,monthlyAddedBooks:a,monthlyMemos:s,topAuthors:o,topPublishers:c,statusDistribution:d}=rJ(),f=t&&(t.totalBooks>0||t.finishedBooks>0||t.readingBooks>0||t.tsundokuBooks>0||t.reReadingBooks>0);return x.jsxs(de,{sx:{maxWidth:1200,mx:"auto",mb:10},children:[x.jsx(zm,{title:"統計",subtitle:"あなたの読書活動を可視化"}),x.jsxs(de,{sx:{p:2},children:[n&&x.jsxs(de,{sx:{display:"flex",alignItems:"center",gap:1,mb:2},children:[x.jsx(Nw,{size:20}),x.jsx(se,{variant:"body2",children:"読み込み中..."})]}),e&&x.jsx(se,{color:"error",sx:{mb:2},children:e}),!n&&!e&&!f&&x.jsx(jn,{sx:{mb:2},children:x.jsxs(Un,{sx:{textAlign:"center",py:4},children:[x.jsx(se,{variant:"h6",color:"text.secondary",gutterBottom:!0,children:"📚 読書データがありません"}),x.jsx(se,{variant:"body2",color:"text.secondary",children:"本を追加して読書を始めると、ここに統計が表示されます"})]})}),f&&x.jsxs(x.Fragment,{children:[x.jsxs(de,{className:"stats-summary-grid",children:[x.jsx(jn,{"data-testid":"stats-total-books",className:"stats-summary-card",children:x.jsxs(Un,{children:[x.jsx(se,{variant:"h6",children:"総冊数"}),x.jsx(se,{variant:"h4",sx:{fontWeight:"bold"},children:(t==null?void 0:t.totalBooks)??"-"})]})}),x.jsx(jn,{"data-testid":"stats-tsundoku-books",className:"stats-summary-card",children:x.jsxs(Un,{children:[x.jsx(se,{variant:"h6",children:"積読冊数"}),x.jsx(se,{variant:"h4",sx:{fontWeight:"bold"},children:(t==null?void 0:t.tsundokuBooks)??"-"})]})}),x.jsx(jn,{"data-testid":"stats-reading-books",className:"stats-summary-card",children:x.jsxs(Un,{children:[x.jsx(se,{variant:"h6",children:"読書中冊数"}),x.jsx(se,{variant:"h4",sx:{fontWeight:"bold"},children:(t==null?void 0:t.readingBooks)??"-"})]})}),x.jsx(jn,{"data-testid":"stats-rereading-books",className:"stats-summary-card",children:x.jsxs(Un,{children:[x.jsx(se,{variant:"h6",children:"再読中冊数"}),x.jsx(se,{variant:"h4",sx:{fontWeight:"bold"},children:(t==null?void 0:t.reReadingBooks)??"-"})]})}),x.jsx(jn,{"data-testid":"stats-finished-books",className:"stats-summary-card",children:x.jsxs(Un,{children:[x.jsx(se,{variant:"h6",children:"読了冊数"}),x.jsx(se,{variant:"h4",sx:{fontWeight:"bold"},children:(t==null?void 0:t.finishedBooks)??"-"})]})})]}),!!t&&x.jsx(jn,{sx:{mb:2},"data-testid":"chart-status-pie",children:x.jsxs(Un,{children:[x.jsx(se,{variant:"h6",sx:{mb:1},children:"ステータス内訳"}),x.jsx(B3,{height:220,series:[{data:[{id:"tsundoku",label:"積読",value:(d==null?void 0:d.tsundoku)??0},{id:"reading",label:"読書中",value:(d==null?void 0:d.reading)??0},{id:"reReading",label:"再読中",value:(d==null?void 0:d.reReading)??0},{id:"finished",label:"読了",value:(d==null?void 0:d.finished)??0}],innerRadius:30,paddingAngle:2}]})]})}),x.jsx(Lc,{sx:{my:2}}),x.jsx(se,{variant:"h6",sx:{mb:1},children:"月別読了冊数（直近12ヶ月）"}),x.jsx(jn,{sx:{mb:2},"data-testid":"chart-monthly-finished",children:x.jsx(Un,{children:x.jsx(v2,{xAxis:[{scaleType:"band",data:(i??[]).map(p=>p.key)}],series:[{data:(i??[]).map(p=>p.count),label:"読了冊数"}],height:260})})}),x.jsxs(de,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",md:"1fr 1fr"},gap:2,mb:2},children:[x.jsxs(de,{children:[x.jsx(se,{variant:"subtitle1",sx:{mb:1},children:"月別追加冊数（直近12ヶ月）"}),x.jsx(jn,{"data-testid":"chart-monthly-added",children:x.jsx(Un,{children:x.jsx(v2,{xAxis:[{scaleType:"band",data:(a??[]).map(p=>p.key)}],series:[{data:(a??[]).map(p=>p.count),label:"追加冊数",color:"#42a5f5"}],height:220})})})]}),x.jsxs(de,{children:[x.jsx(se,{variant:"subtitle1",sx:{mb:1},children:"月別メモ数（直近12ヶ月）"}),x.jsx(jn,{"data-testid":"chart-monthly-memos",children:x.jsx(Un,{children:x.jsx(v2,{xAxis:[{scaleType:"band",data:(s??[]).map(p=>p.key)}],series:[{data:(s??[]).map(p=>p.count),label:"メモ数",color:"#9c27b0"}],height:220})})})]})]}),x.jsx(Lc,{sx:{my:2}}),x.jsx(se,{variant:"h6",sx:{mb:1},children:"タグ使用頻度（上位）"}),!!(r!=null&&r.length)&&x.jsx(jn,{sx:{mb:2},"data-testid":"chart-tag-pie",children:x.jsx(Un,{children:x.jsx(B3,{height:260,series:[{data:r.slice(0,6).map(p=>({id:p.tag,label:p.tag,value:p.totalCount})),innerRadius:40,paddingAngle:2}]})})}),x.jsxs(de,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",sm:"1fr 1fr"},gap:2},children:[((r==null?void 0:r.slice(0,10))??[]).map(p=>x.jsx(de,{children:x.jsx(jn,{"data-testid":`tag-stat-${p.tag}`,children:x.jsxs(Un,{children:[x.jsx(se,{variant:"subtitle1",sx:{fontWeight:600},children:p.tag}),x.jsxs(se,{variant:"body2",color:"text.secondary",children:["本: ",p.bookCount," / メモ: ",p.memoCount," / 合計: ",p.totalCount]})]})})},p.tag)),(!r||r.length===0)&&!n&&x.jsx(de,{children:x.jsx(se,{variant:"body2",color:"text.secondary",children:"タグデータがありません。"})})]}),x.jsx(Lc,{sx:{my:2}}),x.jsx(se,{variant:"h6",sx:{mb:1},children:"著者トップ"}),x.jsxs(de,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",sm:"1fr 1fr"},gap:2,mb:2},children:[((o==null?void 0:o.slice(0,10))??[]).map(p=>x.jsx(de,{children:x.jsx(jn,{"data-testid":`author-top-${p.author}`,children:x.jsxs(Un,{children:[x.jsx(se,{variant:"subtitle1",sx:{fontWeight:600},children:p.author}),x.jsxs(se,{variant:"body2",color:"text.secondary",children:["冊数: ",p.total]})]})})},p.author)),(!o||o.length===0)&&!n&&x.jsx(de,{children:x.jsx(se,{variant:"body2",color:"text.secondary",children:"著者データがありません。"})})]}),x.jsx(se,{variant:"h6",sx:{mb:1},children:"出版社トップ"}),x.jsxs(de,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",sm:"1fr 1fr"},gap:2},children:[((c==null?void 0:c.slice(0,10))??[]).map(p=>x.jsx(de,{children:x.jsx(jn,{"data-testid":`publisher-top-${p.publisher}`,children:x.jsxs(Un,{children:[x.jsx(se,{variant:"subtitle1",sx:{fontWeight:600},children:p.publisher}),x.jsxs(se,{variant:"body2",color:"text.secondary",children:["冊数: ",p.total]})]})})},p.publisher)),(!c||c.length===0)&&!n&&x.jsx(de,{children:x.jsx(se,{variant:"body2",color:"text.secondary",children:"出版社データがありません。"})})]})]})]})]})}function ace(){const n=K3({onSwipedLeft:()=>alert("左スワイプ!"),onSwipedRight:()=>alert("右スワイプ!"),preventDefaultTouchmoveEvent:!0,trackMouse:!0});return x.jsxs("div",{style:{maxWidth:400,margin:"40px auto"},children:[x.jsx("h2",{children:"react-swipeable サンプル"}),x.jsx("div",{...n,style:{background:"#fff",border:"1px solid #ccc",padding:48,fontSize:18,textAlign:"center",userSelect:"none"},children:"このエリアを左右にスワイプ（またはドラッグ）してみてください"})]})}const sce=()=>{if(!(typeof window<"u"&&"serviceWorker"in navigator&&"PushManager"in window))return null;try{const{isOnline:e,isInstallable:t,isInstalled:r,installApp:i,shouldShowInstallPrompt:a,shouldShowManualInstallGuide:s,recordInstallPromptDismiss:o}=B_(),[c,d]=V.useState(!1),[f,p]=V.useState(!1),[g,y]=V.useState(!1),[v,b]=V.useState(!1);V.useEffect(()=>{t&&!r&&a?y(!0):t&&!r&&d(!0)},[t,r,a]),V.useEffect(()=>{s&&!r&&b(!0)},[s,r]),V.useEffect(()=>{p(!e)},[e]);const A=async()=>{try{await i(),d(!1),y(!1)}catch(N){console.error("Installation failed:",N)}},E=()=>{d(!1),o&&o()},T=()=>{y(!1),o&&o()},C=()=>{p(!1)},D=()=>{b(!1),o&&o()},O=[{icon:x.jsx(AN,{}),title:"高速起動",description:"アプリのように素早く起動"},{icon:x.jsx(EN,{}),title:"オフライン対応",description:"インターネットなしでも利用可能"},{icon:x.jsx(SN,{}),title:"ホーム画面に追加",description:"いつでも簡単にアクセス"}];return x.jsxs(x.Fragment,{children:[x.jsx(od,{open:c,anchorOrigin:{vertical:"bottom",horizontal:"center"},sx:{mb:8},children:x.jsx(lo,{severity:"info",action:x.jsxs(de,{sx:{display:"flex",alignItems:"center",gap:1},children:[x.jsx(st,{color:"inherit",size:"small",startIcon:x.jsx(h1,{}),onClick:A,"data-testid":"pwa-install-button",variant:"contained",sx:{backgroundColor:"primary.main",color:"white","&:hover":{backgroundColor:"primary.dark"}},children:"インストール"}),x.jsx(Jr,{"aria-label":"close",color:"inherit",size:"small",onClick:E,children:x.jsx(Ag,{fontSize:"inherit"})})]}),sx:{width:"100%"},children:x.jsx(se,{variant:"body2",children:"BookMemoをホーム画面に追加して、より快適にご利用いただけます"})})}),x.jsx(od,{open:g,anchorOrigin:{vertical:"bottom",horizontal:"center"},sx:{mb:8,width:"100%",maxWidth:"600px"},children:x.jsx(jn,{sx:{width:"100%",boxShadow:3},children:x.jsxs(Un,{sx:{p:2},children:[x.jsxs(de,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",mb:2},children:[x.jsx(se,{variant:"h6",component:"h2",sx:{fontWeight:"bold"},children:"📱 BookMemoをアプリとしてインストール"}),x.jsx(Jr,{size:"small",onClick:T,sx:{mt:-.5},children:x.jsx(Ag,{})})]}),x.jsx(se,{variant:"body2",sx:{mb:2,color:"text.secondary"},children:"より快適な読書メモ管理体験をお届けします"}),x.jsx(t0,{direction:"row",spacing:1,sx:{mb:2,flexWrap:"wrap",gap:1},children:O.map((N,M)=>x.jsx(In,{icon:N.icon,label:N.title,size:"small",variant:"outlined",sx:{fontSize:"0.75rem"}},M))}),x.jsxs(de,{sx:{display:"flex",gap:1,justifyContent:"flex-end"},children:[x.jsx(st,{variant:"outlined",size:"small",onClick:T,children:"後で"}),x.jsx(st,{variant:"contained",size:"small",startIcon:x.jsx(h1,{}),onClick:A,sx:{backgroundColor:"primary.main","&:hover":{backgroundColor:"primary.dark"}},children:"今すぐインストール"})]})]})})}),x.jsx(od,{open:f,anchorOrigin:{vertical:"top",horizontal:"center"},children:x.jsx(lo,{severity:"warning",icon:x.jsx(TN,{}),action:x.jsx(Jr,{"aria-label":"close",color:"inherit",size:"small",onClick:C,children:x.jsx(Ag,{fontSize:"inherit"})}),sx:{width:"100%"},children:x.jsx(se,{variant:"body2",children:"オフラインです。一部の機能が制限される場合があります"})})}),x.jsx(od,{open:e&&f,anchorOrigin:{vertical:"top",horizontal:"center"},autoHideDuration:3e3,onClose:C,children:x.jsx(lo,{severity:"success",icon:x.jsx(CN,{}),sx:{width:"100%"},children:x.jsx(se,{variant:"body2",children:"オンラインに復帰しました"})})}),x.jsx(od,{open:v,anchorOrigin:{vertical:"bottom",horizontal:"center"},sx:{mb:8,width:"100%",maxWidth:"600px"},children:x.jsx(jn,{sx:{width:"100%",boxShadow:3},children:x.jsxs(Un,{sx:{p:2},children:[x.jsxs(de,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",mb:2},children:[x.jsx(se,{variant:"h6",component:"h2",sx:{fontWeight:"bold"},children:"📱 BookMemoをホーム画面に追加"}),x.jsx(Jr,{size:"small",onClick:D,sx:{mt:-.5},children:x.jsx(Ag,{})})]}),x.jsx(se,{variant:"body2",sx:{mb:2,color:"text.secondary"},children:"iPhoneでBookMemoをアプリとして使用するには、以下の手順でホーム画面に追加してください："}),x.jsxs(de,{sx:{mb:2},children:[x.jsx(se,{variant:"body2",sx:{fontWeight:"bold",mb:1},children:"1. 共有ボタンをタップ"}),x.jsx(se,{variant:"body2",sx:{mb:1,pl:2},children:"Safariの下部にある「共有」ボタン（□↑）をタップします"}),x.jsx(se,{variant:"body2",sx:{fontWeight:"bold",mb:1},children:"2. 「ホーム画面に追加」を選択"}),x.jsx(se,{variant:"body2",sx:{mb:1,pl:2},children:"共有メニューから「ホーム画面に追加」を選択します"}),x.jsx(se,{variant:"body2",sx:{fontWeight:"bold",mb:1},children:"3. 追加を確認"}),x.jsx(se,{variant:"body2",sx:{pl:2},children:"「追加」をタップしてホーム画面に追加します"})]}),x.jsx(t0,{direction:"row",spacing:1,sx:{mb:2,flexWrap:"wrap",gap:1},children:O.map((N,M)=>x.jsx(In,{icon:N.icon,label:N.title,size:"small",variant:"outlined",sx:{fontSize:"0.75rem"}},M))}),x.jsxs(de,{sx:{display:"flex",gap:1,justifyContent:"flex-end"},children:[x.jsx(st,{variant:"outlined",size:"small",onClick:D,children:"後で"}),x.jsx(st,{variant:"contained",size:"small",onClick:D,sx:{backgroundColor:"primary.main","&:hover":{backgroundColor:"primary.dark"}},children:"手順を確認しました"})]})]})})})]})}catch(e){return console.warn("PWA hook error in PWAInstallPrompt, skipping PWA features:",e),null}},oce=()=>{try{return!(typeof Li>"u"||!Li.useState||!Li.useContext||typeof window>"u"||typeof navigator>"u")}catch(n){return console.warn("React context check failed:",n),!1}},lce=n=>function(t){const[r,i]=Li.useState(!1),[a,s]=Li.useState(0),o=20,c=50;return Li.useEffect(()=>{const d=()=>{if(oce()){i(!0);return}a<o?(s(f=>f+1),setTimeout(d,c)):(console.warn("React context initialization timeout, proceeding with fallback"),i(!0))};d()},[a]),r?x.jsx(n,{...t}):x.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",fontSize:"1rem",color:"#666"},children:"読み込み中..."})},oo={saveError:(n,e="")=>{try{const t={timestamp:new Date().toISOString(),error:(n==null?void 0:n.message)||(n==null?void 0:n.toString())||"Unknown error",stack:(n==null?void 0:n.stack)||"",context:e,url:window.location.href,userAgent:navigator.userAgent},r=JSON.parse(localStorage.getItem("bookmemo_error_logs")||"[]");return r.push(t),r.length>10&&r.splice(0,r.length-10),localStorage.setItem("bookmemo_error_logs",JSON.stringify(r)),console.error("🔴 PERSISTENT ERROR LOG:",t),t}catch(t){console.error("Error saving error log:",t)}},getErrors:()=>{try{return JSON.parse(localStorage.getItem("bookmemo_error_logs")||"[]")}catch{return[]}},clearErrors:()=>{localStorage.removeItem("bookmemo_error_logs")}},cce=()=>{window.addEventListener("error",n=>{oo.saveError(n.error,"Global Error Handler")}),window.addEventListener("unhandledrejection",n=>{oo.saveError(n.reason,"Unhandled Promise Rejection")}),window.addEventListener("beforeunload",()=>{oo.getErrors().length>0&&console.log("📋 Error logs available in localStorage: bookmemo_error_logs")})},uce=q3({palette:{primary:{main:"#1976d2"},secondary:{main:"#dc004e"}},typography:{h4:{fontSize:"1.5rem","@media (min-width:600px)":{fontSize:"2rem"}},h6:{fontSize:"1rem","@media (min-width:600px)":{fontSize:"1.1rem"}},body2:{fontSize:"0.8rem","@media (min-width:600px)":{fontSize:"0.9rem"}},caption:{fontSize:"0.7rem","@media (min-width:600px)":{fontSize:"0.8rem"}}},components:{MuiCard:{styleOverrides:{root:{height:"100%",display:"flex",flexDirection:"column"}}},MuiCardContent:{styleOverrides:{root:{flex:1,display:"flex",flexDirection:"column",padding:"12px","@media (min-width:600px)":{padding:"16px"}}}},MuiTextField:{styleOverrides:{root:{"& .MuiInputBase-root":{fontSize:"0.9rem","@media (min-width:600px)":{fontSize:"1rem"}}}}},MuiButton:{styleOverrides:{root:{fontSize:"0.9rem",padding:"8px 16px","@media (min-width:600px)":{fontSize:"1rem",padding:"10px 20px"}}}},MuiChip:{styleOverrides:{root:{fontSize:"0.7rem",height:"20px","@media (min-width:600px)":{fontSize:"0.8rem",height:"24px"}}}},MuiBottomNavigation:{styleOverrides:{root:{height:"64px","@media (min-width:600px)":{height:"72px"}}}},MuiBottomNavigationAction:{styleOverrides:{root:{fontSize:"0.7rem","@media (min-width:600px)":{fontSize:"0.8rem"}}}}}});function sd({children:n}){const{user:e,loading:t}=gr(),r=xm();return V.useEffect(()=>{!t&&!e&&console.warn("🔐 Authentication required for:",r.pathname)},[e,t,r.pathname]),t?(console.log("⏳ Loading authentication state..."),x.jsx("div",{children:"Loading..."})):e?n:(console.warn("🚫 Unauthenticated access attempt, redirecting to login"),x.jsx(Q3,{to:"/login"}))}function dce(){const n=S0(),e=xm(),[t,r]=V.useState(0);return V.useEffect(()=>{e.pathname.startsWith("/add")?r(1):e.pathname.startsWith("/tags")?r(2):e.pathname.startsWith("/stats")?r(3):e.pathname.startsWith("/mypage")?r(4):r(0)},[e.pathname]),x.jsxs(DN,{value:t,onChange:(i,a)=>{r(a),a===0&&n("/"),a===1&&n("/add"),a===2&&n("/tags"),a===3&&n("/stats"),a===4&&n("/mypage")},showLabels:!0,sx:{position:"fixed",bottom:0,left:0,right:0,zIndex:1e3,backgroundColor:"background.paper",borderTop:1,borderColor:"divider",height:{xs:"64px",sm:"72px"},"& .MuiBottomNavigationAction-root":{minWidth:{xs:"60px",sm:"80px"},padding:{xs:"6px 4px",sm:"8px 6px"}},"& .MuiBottomNavigationAction-label":{fontSize:{xs:"0.7rem",sm:"0.8rem"},marginTop:{xs:"2px",sm:"4px"}},"& .MuiBottomNavigationAction-iconOnly":{fontSize:{xs:"1.5rem",sm:"1.75rem"}}},children:[x.jsx(mh,{label:"本一覧",icon:x.jsx(RN,{}),sx:{"&.Mui-selected":{color:"primary.main"}}}),x.jsx(mh,{label:"本を追加",icon:x.jsx(MN,{}),sx:{"&.Mui-selected":{color:"primary.main"}}}),x.jsx(mh,{label:"検索・タグ",icon:x.jsx(ON,{}),sx:{"&.Mui-selected":{color:"primary.main"}}}),x.jsx(mh,{label:"統計",icon:x.jsx(PN,{}),sx:{"&.Mui-selected":{color:"primary.main"}}}),x.jsx(mh,{label:"マイページ",icon:x.jsx(kN,{}),sx:{"&.Mui-selected":{color:"primary.main"}}})]})}function fce(){const n=xm(),{user:e}=gr(),{setGlobalError:t}=V.useContext(pi),r=n.pathname.startsWith("/login")||n.pathname.startsWith("/signup")||!e;return V.useEffect(()=>{cce()},[]),V.useEffect(()=>{const i=document.getElementById("app-scroll-container");i&&i.scrollTo(0,0)},[n.pathname]),V.useEffect(()=>{const i=c=>{console.error("Global error caught:",c.error),oo.saveError(c.error,"AppRoutes Global Error"),c.error&&c.error.message&&c.error.message.includes("404")?t&&t("リソースが見つかりません。ページを再読み込みしてください。"):t&&t("予期しないエラーが発生しました。ページを再読み込みしてください。")},a=c=>{console.error("Unhandled promise rejection:",c.reason),oo.saveError(c.reason,"AppRoutes Unhandled Promise Rejection"),c.reason&&c.reason.message&&(c.reason.message.includes("404")||c.reason.message.includes("Failed to fetch")),t&&t("ネットワークエラーが発生しました。接続を確認してください。")},s=c=>{c.target&&c.target.src&&(console.error("Resource loading error:",c.target.src),oo.saveError(new Error(`Resource loading failed: ${c.target.src}`),"AppRoutes Resource Error"),(c.target.src.includes("sw.js")||c.target.src.includes("manifest.webmanifest"))&&t&&t("アプリの設定ファイルの読み込みに失敗しました。ページを再読み込みしてください。"))},o=c=>{c.target&&c.target.src&&c.target.src.includes("404")&&(console.error("404 Error detected:",c.target.src),oo.saveError(new Error(`404 Error: ${c.target.src} - SPA routing issue detected`),"AppRoutes 404 Error"),t&&t("ページが見つかりません。SPAルーティングの問題の可能性があります。ページを再読み込みしてください。"))};return window.addEventListener("error",o,!0),window.addEventListener("error",i),window.addEventListener("unhandledrejection",a),window.addEventListener("error",s,!0),()=>{window.removeEventListener("error",i),window.removeEventListener("unhandledrejection",a),window.removeEventListener("error",s,!0)}},[t]),x.jsxs(x.Fragment,{children:[x.jsx(de,{id:"app-scroll-container",sx:{height:"100vh",overflowY:"auto",WebkitOverflowScrolling:"touch",pb:r?0:{xs:"64px",sm:"72px"},background:`
            url('${Mc.PAPER_TEXTURE()}'),
            #f5f5dc
          `,backgroundSize:"100% auto, cover",backgroundRepeat:"repeat-y, no-repeat",backgroundPosition:"center top, center",backgroundAttachment:"fixed",minHeight:"100vh",width:"100%"},children:x.jsxs(FN,{children:[x.jsx(to,{path:"/login",element:x.jsx(rj,{})}),x.jsx(to,{path:"/signup",element:x.jsx(ij,{})}),x.jsx(to,{path:"/",element:x.jsx(sd,{children:x.jsx(dj,{})})}),x.jsx(to,{path:"/add",element:x.jsx(sd,{children:x.jsx(r$,{})})}),x.jsx(to,{path:"/book/:id",element:x.jsx(sd,{children:x.jsx(HZ,{})})}),x.jsx(to,{path:"/tags",element:x.jsx(sd,{children:x.jsx(eJ,{})})}),x.jsx(to,{path:"/stats",element:x.jsx(sd,{children:x.jsx(ice,{})})}),x.jsx(to,{path:"/mypage",element:x.jsx(sd,{children:x.jsx(ace,{})})}),x.jsx(to,{path:"*",element:x.jsx(Q3,{to:"/"})})]})}),!r&&x.jsx(dce,{})]})}function hce(){return x.jsx(nj,{children:x.jsx(oj,{children:x.jsx(VN,{children:x.jsxs(X3,{theme:uce,children:[x.jsx(IN,{}),x.jsx(pce,{}),x.jsx(fce,{}),typeof window<"u"&&"serviceWorker"in navigator&&!Mc.IS_DEVELOPMENT()&&x.jsx(sce,{})]})})})})}function pce(){if(Mc.IS_DEVELOPMENT()||!("serviceWorker"in navigator&&"PushManager"in window))return null;try{const{registerServiceWorker:e}=B_();return V.useEffect(()=>{e().catch(t=>{console.warn("Service Worker registration failed in PWAProvider:",t),oo.saveError(t,"PWAProvider Service Worker Registration")})},[e]),null}catch(e){return console.warn("PWA hook error, skipping PWA initialization:",e),oo.saveError(e,"PWAProvider Hook Error"),null}}const gce=lce(hce),mce=q3({palette:{mode:"light",background:{default:"#f5f7fa",paper:"#fff"},primary:{main:"#1976d2"},secondary:{main:"#f50057"},text:{primary:"#222"}},typography:{fontFamily:"Segoe UI, Helvetica Neue, Arial, sans-serif",h1:{fontSize:"1.8rem","@media (min-width:600px)":{fontSize:"2.5rem"}},h2:{fontSize:"1.5rem","@media (min-width:600px)":{fontSize:"2rem"}},h3:{fontSize:"1.3rem","@media (min-width:600px)":{fontSize:"1.6rem"}},h4:{fontSize:"1.1rem","@media (min-width:600px)":{fontSize:"1.4rem"}},h5:{fontSize:"1rem","@media (min-width:600px)":{fontSize:"1.2rem"}},h6:{fontSize:"0.9rem","@media (min-width:600px)":{fontSize:"1.1rem"}},body1:{fontSize:"0.9rem","@media (min-width:600px)":{fontSize:"1rem"}},body2:{fontSize:"0.8rem","@media (min-width:600px)":{fontSize:"0.9rem"}}},components:{MuiTextField:{styleOverrides:{root:{marginBottom:"8px","@media (min-width:600px)":{marginBottom:"16px"}}},defaultProps:{size:"small",margin:"dense"}},MuiButton:{styleOverrides:{root:{fontSize:"0.9rem",padding:"8px 16px","@media (min-width:600px)":{fontSize:"1rem",padding:"10px 20px"}}},defaultProps:{size:"medium"}},MuiCard:{styleOverrides:{root:{marginBottom:"8px","@media (min-width:600px)":{marginBottom:"16px"}}}},MuiCardContent:{styleOverrides:{root:{padding:"12px","@media (min-width:600px)":{padding:"16px"},"&:last-child":{paddingBottom:"12px","@media (min-width:600px)":{paddingBottom:"16px"}}}}},MuiPaper:{styleOverrides:{root:{padding:"12px","@media (min-width:600px)":{padding:"16px"}}}},MuiAutocomplete:{styleOverrides:{root:{marginBottom:"8px","@media (min-width:600px)":{marginBottom:"16px"}}}},MuiChip:{styleOverrides:{root:{fontSize:"0.8rem",height:"24px","@media (min-width:600px)":{fontSize:"0.9rem",height:"32px"}}}},MuiDialog:{styleOverrides:{paper:{margin:"16px",width:"calc(100% - 32px)",maxWidth:"400px","@media (min-width:600px)":{margin:"32px",width:"calc(100% - 64px)",maxWidth:"600px"}}}},MuiBottomNavigation:{styleOverrides:{root:{height:"56px","@media (min-width:600px)":{height:"64px"}}}}},breakpoints:{values:{xs:0,sm:600,md:900,lg:1200,xl:1536}},spacing:n=>`${4*n}px`});$N.createRoot(document.getElementById("root")).render(x.jsx(V.StrictMode,{children:x.jsx(X3,{theme:mce,children:x.jsx(gce,{})})}));

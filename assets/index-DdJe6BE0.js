import{r as H,j as A,B as vt,T as st,a as le,b as qt,C as pn,c as mn,d as Q8,e as On,P as Sc,R as gx,D as da,f as ga,g as pa,A as oo,h as ma,i as Aw,I as Xr,k as R1,l as fC,m as vh,G as te,n as es,o as ly,M as J8,u as hC,p as Ew,S as bh,E as uy,q as ww,s as tD,t as d1,F as eD,v as nD,w as px,x as Xu,y as Wu,z as Yu,H as fr,_ as X,J as ki,K as rD,L as _e,N as dC,O as io,Q as gC,U as pC,V as Ai,W as Zr,X as Qr,Y as un,Z as kr,$ as Hh,a0 as mC,a1 as lo,a2 as vC,a3 as Xa,a4 as iD,a5 as aD,a6 as sD,a7 as qf,a8 as z0,a9 as oD,aa as lD,ab as uD,ac as cD,ad as fD,ae as yC,af as xC,ag as hD,ah as dD,ai as Xf,aj as gD,ak as pD,al as mD,am as vD,an as yD}from"./mui-vendor-DHHbRjqU.js";import{r as mx,a as xD,g as _D}from"./react-vendor-DJG_os-6.js";import{u as Gh,a as bw,b as _C,c as AD,B as ED,d as AC,R as wD,e as qa,N as EC}from"./utils-vendor-B9B3qWfd.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function e(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=e(i);fetch(i.href,a)}})();var fv={exports:{}},Wf={},hv={exports:{}},dv={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sw;function bD(){return Sw||(Sw=1,function(n){function t(q,Z){var it=q.length;q.push(Z);t:for(;0<it;){var gt=it-1>>>1,_t=q[gt];if(0<i(_t,Z))q[gt]=Z,q[it]=_t,it=gt;else break t}}function e(q){return q.length===0?null:q[0]}function r(q){if(q.length===0)return null;var Z=q[0],it=q.pop();if(it!==Z){q[0]=it;t:for(var gt=0,_t=q.length,Mt=_t>>>1;gt<Mt;){var It=2*(gt+1)-1,Et=q[It],zt=It+1,$t=q[zt];if(0>i(Et,it))zt<_t&&0>i($t,Et)?(q[gt]=$t,q[zt]=it,gt=zt):(q[gt]=Et,q[It]=it,gt=It);else if(zt<_t&&0>i($t,it))q[gt]=$t,q[zt]=it,gt=zt;else break t}}return Z}function i(q,Z){var it=q.sortIndex-Z.sortIndex;return it!==0?it:q.id-Z.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var s=Date,l=s.now();n.unstable_now=function(){return s.now()-l}}var c=[],f=[],d=1,g=null,m=3,v=!1,_=!1,w=!1,b=!1,C=typeof setTimeout=="function"?setTimeout:null,I=typeof clearTimeout=="function"?clearTimeout:null,R=typeof setImmediate<"u"?setImmediate:null;function M(q){for(var Z=e(f);Z!==null;){if(Z.callback===null)r(f);else if(Z.startTime<=q)r(f),Z.sortIndex=Z.expirationTime,t(c,Z);else break;Z=e(f)}}function N(q){if(w=!1,M(q),!_)if(e(c)!==null)_=!0,k||(k=!0,F());else{var Z=e(f);Z!==null&&mt(N,Z.startTime-q)}}var k=!1,O=-1,S=5,D=-1;function V(){return b?!0:!(n.unstable_now()-D<S)}function B(){if(b=!1,k){var q=n.unstable_now();D=q;var Z=!0;try{t:{_=!1,w&&(w=!1,I(O),O=-1),v=!0;var it=m;try{e:{for(M(q),g=e(c);g!==null&&!(g.expirationTime>q&&V());){var gt=g.callback;if(typeof gt=="function"){g.callback=null,m=g.priorityLevel;var _t=gt(g.expirationTime<=q);if(q=n.unstable_now(),typeof _t=="function"){g.callback=_t,M(q),Z=!0;break e}g===e(c)&&r(c),M(q)}else r(c);g=e(c)}if(g!==null)Z=!0;else{var Mt=e(f);Mt!==null&&mt(N,Mt.startTime-q),Z=!1}}break t}finally{g=null,m=it,v=!1}Z=void 0}}finally{Z?F():k=!1}}}var F;if(typeof R=="function")F=function(){R(B)};else if(typeof MessageChannel<"u"){var j=new MessageChannel,rt=j.port2;j.port1.onmessage=B,F=function(){rt.postMessage(null)}}else F=function(){C(B,0)};function mt(q,Z){O=C(function(){q(n.unstable_now())},Z)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(q){q.callback=null},n.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<q?Math.floor(1e3/q):5},n.unstable_getCurrentPriorityLevel=function(){return m},n.unstable_next=function(q){switch(m){case 1:case 2:case 3:var Z=3;break;default:Z=m}var it=m;m=Z;try{return q()}finally{m=it}},n.unstable_requestPaint=function(){b=!0},n.unstable_runWithPriority=function(q,Z){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var it=m;m=q;try{return Z()}finally{m=it}},n.unstable_scheduleCallback=function(q,Z,it){var gt=n.unstable_now();switch(typeof it=="object"&&it!==null?(it=it.delay,it=typeof it=="number"&&0<it?gt+it:gt):it=gt,q){case 1:var _t=-1;break;case 2:_t=250;break;case 5:_t=1073741823;break;case 4:_t=1e4;break;default:_t=5e3}return _t=it+_t,q={id:d++,callback:Z,priorityLevel:q,startTime:it,expirationTime:_t,sortIndex:-1},it>gt?(q.sortIndex=it,t(f,q),e(c)===null&&q===e(f)&&(w?(I(O),O=-1):w=!0,mt(N,it-gt))):(q.sortIndex=_t,t(c,q),_||v||(_=!0,k||(k=!0,F()))),q},n.unstable_shouldYield=V,n.unstable_wrapCallback=function(q){var Z=m;return function(){var it=m;m=Z;try{return q.apply(this,arguments)}finally{m=it}}}}(dv)),dv}var Tw;function SD(){return Tw||(Tw=1,hv.exports=bD()),hv.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cw;function TD(){if(Cw)return Wf;Cw=1;var n=SD(),t=mx(),e=xD();function r(o){var u="https://react.dev/errors/"+o;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var h=2;h<arguments.length;h++)u+="&args[]="+encodeURIComponent(arguments[h])}return"Minified React error #"+o+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function a(o){var u=o,h=o;if(o.alternate)for(;u.return;)u=u.return;else{o=u;do u=o,(u.flags&4098)!==0&&(h=u.return),o=u.return;while(o)}return u.tag===3?h:null}function s(o){if(o.tag===13){var u=o.memoizedState;if(u===null&&(o=o.alternate,o!==null&&(u=o.memoizedState)),u!==null)return u.dehydrated}return null}function l(o){if(a(o)!==o)throw Error(r(188))}function c(o){var u=o.alternate;if(!u){if(u=a(o),u===null)throw Error(r(188));return u!==o?null:o}for(var h=o,p=u;;){var x=h.return;if(x===null)break;var E=x.alternate;if(E===null){if(p=x.return,p!==null){h=p;continue}break}if(x.child===E.child){for(E=x.child;E;){if(E===h)return l(x),o;if(E===p)return l(x),u;E=E.sibling}throw Error(r(188))}if(h.return!==p.return)h=x,p=E;else{for(var L=!1,U=x.child;U;){if(U===h){L=!0,h=x,p=E;break}if(U===p){L=!0,p=x,h=E;break}U=U.sibling}if(!L){for(U=E.child;U;){if(U===h){L=!0,h=E,p=x;break}if(U===p){L=!0,p=E,h=x;break}U=U.sibling}if(!L)throw Error(r(189))}}if(h.alternate!==p)throw Error(r(190))}if(h.tag!==3)throw Error(r(188));return h.stateNode.current===h?o:u}function f(o){var u=o.tag;if(u===5||u===26||u===27||u===6)return o;for(o=o.child;o!==null;){if(u=f(o),u!==null)return u;o=o.sibling}return null}var d=Object.assign,g=Symbol.for("react.element"),m=Symbol.for("react.transitional.element"),v=Symbol.for("react.portal"),_=Symbol.for("react.fragment"),w=Symbol.for("react.strict_mode"),b=Symbol.for("react.profiler"),C=Symbol.for("react.provider"),I=Symbol.for("react.consumer"),R=Symbol.for("react.context"),M=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),k=Symbol.for("react.suspense_list"),O=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),D=Symbol.for("react.activity"),V=Symbol.for("react.memo_cache_sentinel"),B=Symbol.iterator;function F(o){return o===null||typeof o!="object"?null:(o=B&&o[B]||o["@@iterator"],typeof o=="function"?o:null)}var j=Symbol.for("react.client.reference");function rt(o){if(o==null)return null;if(typeof o=="function")return o.$$typeof===j?null:o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case _:return"Fragment";case b:return"Profiler";case w:return"StrictMode";case N:return"Suspense";case k:return"SuspenseList";case D:return"Activity"}if(typeof o=="object")switch(o.$$typeof){case v:return"Portal";case R:return(o.displayName||"Context")+".Provider";case I:return(o._context.displayName||"Context")+".Consumer";case M:var u=o.render;return o=o.displayName,o||(o=u.displayName||u.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case O:return u=o.displayName||null,u!==null?u:rt(o.type)||"Memo";case S:u=o._payload,o=o._init;try{return rt(o(u))}catch{}}return null}var mt=Array.isArray,q=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Z=e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,it={pending:!1,data:null,method:null,action:null},gt=[],_t=-1;function Mt(o){return{current:o}}function It(o){0>_t||(o.current=gt[_t],gt[_t]=null,_t--)}function Et(o,u){_t++,gt[_t]=o.current,o.current=u}var zt=Mt(null),$t=Mt(null),pe=Mt(null),Re=Mt(null);function Ke(o,u){switch(Et(pe,u),Et($t,o),Et(zt,null),u.nodeType){case 9:case 11:o=(o=u.documentElement)&&(o=o.namespaceURI)?YE(o):0;break;default:if(o=u.tagName,u=u.namespaceURI)u=YE(u),o=KE(u,o);else switch(o){case"svg":o=1;break;case"math":o=2;break;default:o=0}}It(zt),Et(zt,o)}function ft(){It(zt),It($t),It(pe)}function wt(o){o.memoizedState!==null&&Et(Re,o);var u=zt.current,h=KE(u,o.type);u!==h&&(Et($t,o),Et(zt,h))}function Rt(o){$t.current===o&&(It(zt),It($t)),Re.current===o&&(It(Re),Uf._currentValue=it)}var pt=Object.prototype.hasOwnProperty,Ae=n.unstable_scheduleCallback,Nt=n.unstable_cancelCallback,ke=n.unstable_shouldYield,Ze=n.unstable_requestPaint,$e=n.unstable_now,ei=n.unstable_getCurrentPriorityLevel,ys=n.unstable_ImmediatePriority,xa=n.unstable_UserBlockingPriority,_a=n.unstable_NormalPriority,Fc=n.unstable_LowPriority,xs=n.unstable_IdlePriority,Oo=n.log,Hl=n.unstable_setDisableYieldValue,qe=null,ce=null;function Vr(o){if(typeof Oo=="function"&&Hl(o),ce&&typeof ce.setStrictMode=="function")try{ce.setStrictMode(qe,o)}catch{}}var ar=Math.clz32?Math.clz32:Mo,_d=Math.log,dp=Math.LN2;function Mo(o){return o>>>=0,o===0?32:31-(_d(o)/dp|0)|0}var No=256,Po=4194304;function wi(o){var u=o&42;if(u!==0)return u;switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return o&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return o}}function Gl(o,u,h){var p=o.pendingLanes;if(p===0)return 0;var x=0,E=o.suspendedLanes,L=o.pingedLanes;o=o.warmLanes;var U=p&134217727;return U!==0?(p=U&~E,p!==0?x=wi(p):(L&=U,L!==0?x=wi(L):h||(h=U&~o,h!==0&&(x=wi(h))))):(U=p&~E,U!==0?x=wi(U):L!==0?x=wi(L):h||(h=p&~o,h!==0&&(x=wi(h)))),x===0?0:u!==0&&u!==x&&(u&E)===0&&(E=x&-x,h=u&-u,E>=h||E===32&&(h&4194048)!==0)?u:x}function ko(o,u){return(o.pendingLanes&~(o.suspendedLanes&~o.pingedLanes)&u)===0}function jc(o,u){switch(o){case 1:case 2:case 4:case 8:case 64:return u+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Uc(){var o=No;return No<<=1,(No&4194048)===0&&(No=256),o}function zc(){var o=Po;return Po<<=1,(Po&62914560)===0&&(Po=4194304),o}function Aa(o){for(var u=[],h=0;31>h;h++)u.push(o);return u}function Ea(o,u){o.pendingLanes|=u,u!==268435456&&(o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0)}function Hc(o,u,h,p,x,E){var L=o.pendingLanes;o.pendingLanes=h,o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0,o.expiredLanes&=h,o.entangledLanes&=h,o.errorRecoveryDisabledLanes&=h,o.shellSuspendCounter=0;var U=o.entanglements,$=o.expirationTimes,J=o.hiddenUpdates;for(h=L&~h;0<h;){var lt=31-ar(h),ht=1<<lt;U[lt]=0,$[lt]=-1;var et=J[lt];if(et!==null)for(J[lt]=null,lt=0;lt<et.length;lt++){var nt=et[lt];nt!==null&&(nt.lane&=-536870913)}h&=~ht}p!==0&&ji(o,p,0),E!==0&&x===0&&o.tag!==0&&(o.suspendedLanes|=E&~(L&~u))}function ji(o,u,h){o.pendingLanes|=u,o.suspendedLanes&=~u;var p=31-ar(u);o.entangledLanes|=u,o.entanglements[p]=o.entanglements[p]|1073741824|h&4194090}function Gc(o,u){var h=o.entangledLanes|=u;for(o=o.entanglements;h;){var p=31-ar(h),x=1<<p;x&u|o[p]&u&&(o[p]|=u),h&=~x}}function _s(o){switch(o){case 2:o=1;break;case 8:o=4;break;case 32:o=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:o=128;break;case 268435456:o=134217728;break;default:o=0}return o}function $l(o){return o&=-o,2<o?8<o?(o&134217727)!==0?32:268435456:8:2}function As(){var o=Z.p;return o!==0?o:(o=window.event,o===void 0?32:pw(o.type))}function Ad(o,u){var h=Z.p;try{return Z.p=o,u()}finally{Z.p=h}}var Xe=Math.random().toString(36).slice(2),_n="__reactFiber$"+Xe,cn="__reactProps$"+Xe,ni="__reactContainer$"+Xe,$c="__reactEvents$"+Xe,gp="__reactListeners$"+Xe,Es="__reactHandles$"+Xe,Ed="__reactResources$"+Xe,Lo="__reactMarker$"+Xe;function ws(o){delete o[_n],delete o[cn],delete o[$c],delete o[gp],delete o[Es]}function wa(o){var u=o[_n];if(u)return u;for(var h=o.parentNode;h;){if(u=h[ni]||h[_n]){if(h=u.alternate,u.child!==null||h!==null&&h.child!==null)for(o=tw(o);o!==null;){if(h=o[_n])return h;o=tw(o)}return u}o=h,h=o.parentNode}return null}function Ui(o){if(o=o[_n]||o[ni]){var u=o.tag;if(u===5||u===6||u===13||u===26||u===27||u===3)return o}return null}function zi(o){var u=o.tag;if(u===5||u===26||u===27||u===6)return o.stateNode;throw Error(r(33))}function mr(o){var u=o[Ed];return u||(u=o[Ed]={hoistableStyles:new Map,hoistableScripts:new Map}),u}function nn(o){o[Lo]=!0}var qc=new Set,ql={};function bi(o,u){ba(o,u),ba(o+"Capture",u)}function ba(o,u){for(ql[o]=u,o=0;o<u.length;o++)qc.add(u[o])}var wd=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),bd={},Bo={};function Sd(o){return pt.call(Bo,o)?!0:pt.call(bd,o)?!1:wd.test(o)?Bo[o]=!0:(bd[o]=!0,!1)}function bs(o,u,h){if(Sd(u))if(h===null)o.removeAttribute(u);else{switch(typeof h){case"undefined":case"function":case"symbol":o.removeAttribute(u);return;case"boolean":var p=u.toLowerCase().slice(0,5);if(p!=="data-"&&p!=="aria-"){o.removeAttribute(u);return}}o.setAttribute(u,""+h)}}function Hi(o,u,h){if(h===null)o.removeAttribute(u);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(u);return}o.setAttribute(u,""+h)}}function Wn(o,u,h,p){if(p===null)o.removeAttribute(h);else{switch(typeof p){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(h);return}o.setAttributeNS(u,h,""+p)}}var Vo,Td;function Sa(o){if(Vo===void 0)try{throw Error()}catch(h){var u=h.stack.trim().match(/\n( *(at )?)/);Vo=u&&u[1]||"",Td=-1<h.stack.indexOf(`
    at`)?" (<anonymous>)":-1<h.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Vo+o+Td}var Xl=!1;function Wl(o,u){if(!o||Xl)return"";Xl=!0;var h=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var p={DetermineComponentFrameRoot:function(){try{if(u){var ht=function(){throw Error()};if(Object.defineProperty(ht.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ht,[])}catch(nt){var et=nt}Reflect.construct(o,[],ht)}else{try{ht.call()}catch(nt){et=nt}o.call(ht.prototype)}}else{try{throw Error()}catch(nt){et=nt}(ht=o())&&typeof ht.catch=="function"&&ht.catch(function(){})}}catch(nt){if(nt&&et&&typeof nt.stack=="string")return[nt.stack,et.stack]}return[null,null]}};p.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var x=Object.getOwnPropertyDescriptor(p.DetermineComponentFrameRoot,"name");x&&x.configurable&&Object.defineProperty(p.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var E=p.DetermineComponentFrameRoot(),L=E[0],U=E[1];if(L&&U){var $=L.split(`
`),J=U.split(`
`);for(x=p=0;p<$.length&&!$[p].includes("DetermineComponentFrameRoot");)p++;for(;x<J.length&&!J[x].includes("DetermineComponentFrameRoot");)x++;if(p===$.length||x===J.length)for(p=$.length-1,x=J.length-1;1<=p&&0<=x&&$[p]!==J[x];)x--;for(;1<=p&&0<=x;p--,x--)if($[p]!==J[x]){if(p!==1||x!==1)do if(p--,x--,0>x||$[p]!==J[x]){var lt=`
`+$[p].replace(" at new "," at ");return o.displayName&&lt.includes("<anonymous>")&&(lt=lt.replace("<anonymous>",o.displayName)),lt}while(1<=p&&0<=x);break}}}finally{Xl=!1,Error.prepareStackTrace=h}return(h=o?o.displayName||o.name:"")?Sa(h):""}function Xc(o){switch(o.tag){case 26:case 27:case 5:return Sa(o.type);case 16:return Sa("Lazy");case 13:return Sa("Suspense");case 19:return Sa("SuspenseList");case 0:case 15:return Wl(o.type,!1);case 11:return Wl(o.type.render,!1);case 1:return Wl(o.type,!0);case 31:return Sa("Activity");default:return""}}function Yl(o){try{var u="";do u+=Xc(o),o=o.return;while(o);return u}catch(h){return`
Error generating stack: `+h.message+`
`+h.stack}}function vr(o){switch(typeof o){case"bigint":case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function Wc(o){var u=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(u==="checkbox"||u==="radio")}function pp(o){var u=Wc(o)?"checked":"value",h=Object.getOwnPropertyDescriptor(o.constructor.prototype,u),p=""+o[u];if(!o.hasOwnProperty(u)&&typeof h<"u"&&typeof h.get=="function"&&typeof h.set=="function"){var x=h.get,E=h.set;return Object.defineProperty(o,u,{configurable:!0,get:function(){return x.call(this)},set:function(L){p=""+L,E.call(this,L)}}),Object.defineProperty(o,u,{enumerable:h.enumerable}),{getValue:function(){return p},setValue:function(L){p=""+L},stopTracking:function(){o._valueTracker=null,delete o[u]}}}}function Kl(o){o._valueTracker||(o._valueTracker=pp(o))}function Yc(o){if(!o)return!1;var u=o._valueTracker;if(!u)return!0;var h=u.getValue(),p="";return o&&(p=Wc(o)?o.checked?"true":"false":o.value),o=p,o!==h?(u.setValue(o),!0):!1}function Fo(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}var mp=/[\n"\\]/g;function fn(o){return o.replace(mp,function(u){return"\\"+u.charCodeAt(0).toString(16)+" "})}function Fr(o,u,h,p,x,E,L,U){o.name="",L!=null&&typeof L!="function"&&typeof L!="symbol"&&typeof L!="boolean"?o.type=L:o.removeAttribute("type"),u!=null?L==="number"?(u===0&&o.value===""||o.value!=u)&&(o.value=""+vr(u)):o.value!==""+vr(u)&&(o.value=""+vr(u)):L!=="submit"&&L!=="reset"||o.removeAttribute("value"),u!=null?Ss(o,L,vr(u)):h!=null?Ss(o,L,vr(h)):p!=null&&o.removeAttribute("value"),x==null&&E!=null&&(o.defaultChecked=!!E),x!=null&&(o.checked=x&&typeof x!="function"&&typeof x!="symbol"),U!=null&&typeof U!="function"&&typeof U!="symbol"&&typeof U!="boolean"?o.name=""+vr(U):o.removeAttribute("name")}function jo(o,u,h,p,x,E,L,U){if(E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(o.type=E),u!=null||h!=null){if(!(E!=="submit"&&E!=="reset"||u!=null))return;h=h!=null?""+vr(h):"",u=u!=null?""+vr(u):h,U||u===o.value||(o.value=u),o.defaultValue=u}p=p??x,p=typeof p!="function"&&typeof p!="symbol"&&!!p,o.checked=U?o.checked:!!p,o.defaultChecked=!!p,L!=null&&typeof L!="function"&&typeof L!="symbol"&&typeof L!="boolean"&&(o.name=L)}function Ss(o,u,h){u==="number"&&Fo(o.ownerDocument)===o||o.defaultValue===""+h||(o.defaultValue=""+h)}function Ta(o,u,h,p){if(o=o.options,u){u={};for(var x=0;x<h.length;x++)u["$"+h[x]]=!0;for(h=0;h<o.length;h++)x=u.hasOwnProperty("$"+o[h].value),o[h].selected!==x&&(o[h].selected=x),x&&p&&(o[h].defaultSelected=!0)}else{for(h=""+vr(h),u=null,x=0;x<o.length;x++){if(o[x].value===h){o[x].selected=!0,p&&(o[x].defaultSelected=!0);return}u!==null||o[x].disabled||(u=o[x])}u!==null&&(u.selected=!0)}}function De(o,u,h){if(u!=null&&(u=""+vr(u),u!==o.value&&(o.value=u),h==null)){o.defaultValue!==u&&(o.defaultValue=u);return}o.defaultValue=h!=null?""+vr(h):""}function Uo(o,u,h,p){if(u==null){if(p!=null){if(h!=null)throw Error(r(92));if(mt(p)){if(1<p.length)throw Error(r(93));p=p[0]}h=p}h==null&&(h=""),u=h}h=vr(u),o.defaultValue=h,p=o.textContent,p===h&&p!==""&&p!==null&&(o.value=p)}function ri(o,u){if(u){var h=o.firstChild;if(h&&h===o.lastChild&&h.nodeType===3){h.nodeValue=u;return}}o.textContent=u}var zo=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Cd(o,u,h){var p=u.indexOf("--")===0;h==null||typeof h=="boolean"||h===""?p?o.setProperty(u,""):u==="float"?o.cssFloat="":o[u]="":p?o.setProperty(u,h):typeof h!="number"||h===0||zo.has(u)?u==="float"?o.cssFloat=h:o[u]=(""+h).trim():o[u]=h+"px"}function Kc(o,u,h){if(u!=null&&typeof u!="object")throw Error(r(62));if(o=o.style,h!=null){for(var p in h)!h.hasOwnProperty(p)||u!=null&&u.hasOwnProperty(p)||(p.indexOf("--")===0?o.setProperty(p,""):p==="float"?o.cssFloat="":o[p]="");for(var x in u)p=u[x],u.hasOwnProperty(x)&&h[x]!==p&&Cd(o,x,p)}else for(var E in u)u.hasOwnProperty(E)&&Cd(o,E,u[E])}function Zc(o){if(o.indexOf("-")===-1)return!1;switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var vp=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),yp=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Zl(o){return yp.test(""+o)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":o}var Ca=null;function ii(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var Ia=null,Ra=null;function Qc(o){var u=Ui(o);if(u&&(o=u.stateNode)){var h=o[cn]||null;t:switch(o=u.stateNode,u.type){case"input":if(Fr(o,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name),u=h.name,h.type==="radio"&&u!=null){for(h=o;h.parentNode;)h=h.parentNode;for(h=h.querySelectorAll('input[name="'+fn(""+u)+'"][type="radio"]'),u=0;u<h.length;u++){var p=h[u];if(p!==o&&p.form===o.form){var x=p[cn]||null;if(!x)throw Error(r(90));Fr(p,x.value,x.defaultValue,x.defaultValue,x.checked,x.defaultChecked,x.type,x.name)}}for(u=0;u<h.length;u++)p=h[u],p.form===o.form&&Yc(p)}break t;case"textarea":De(o,h.value,h.defaultValue);break t;case"select":u=h.value,u!=null&&Ta(o,!!h.multiple,u,!1)}}}var Gi=!1;function Id(o,u,h){if(Gi)return o(u,h);Gi=!0;try{var p=o(u);return p}finally{if(Gi=!1,(Ia!==null||Ra!==null)&&(A0(),Ia&&(u=Ia,o=Ra,Ra=Ia=null,Qc(u),o)))for(u=0;u<o.length;u++)Qc(o[u])}}function Ho(o,u){var h=o.stateNode;if(h===null)return null;var p=h[cn]||null;if(p===null)return null;h=p[u];t:switch(u){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(p=!p.disabled)||(o=o.type,p=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!p;break t;default:o=!1}if(o)return null;if(h&&typeof h!="function")throw Error(r(231,u,typeof h));return h}var Si=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ai=!1;if(Si)try{var Go={};Object.defineProperty(Go,"passive",{get:function(){ai=!0}}),window.addEventListener("test",Go,Go),window.removeEventListener("test",Go,Go)}catch{ai=!1}var $i=null,Ts=null,Da=null;function Jc(){if(Da)return Da;var o,u=Ts,h=u.length,p,x="value"in $i?$i.value:$i.textContent,E=x.length;for(o=0;o<h&&u[o]===x[o];o++);var L=h-o;for(p=1;p<=L&&u[h-p]===x[E-p];p++);return Da=x.slice(o,1<p?1-p:void 0)}function qi(o){var u=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&u===13&&(o=13)):o=u,o===10&&(o=13),32<=o||o===13?o:0}function Xi(){return!0}function tf(){return!1}function Ln(o){function u(h,p,x,E,L){this._reactName=h,this._targetInst=x,this.type=p,this.nativeEvent=E,this.target=L,this.currentTarget=null;for(var U in o)o.hasOwnProperty(U)&&(h=o[U],this[U]=h?h(E):E[U]);return this.isDefaultPrevented=(E.defaultPrevented!=null?E.defaultPrevented:E.returnValue===!1)?Xi:tf,this.isPropagationStopped=tf,this}return d(u.prototype,{preventDefault:function(){this.defaultPrevented=!0;var h=this.nativeEvent;h&&(h.preventDefault?h.preventDefault():typeof h.returnValue!="unknown"&&(h.returnValue=!1),this.isDefaultPrevented=Xi)},stopPropagation:function(){var h=this.nativeEvent;h&&(h.stopPropagation?h.stopPropagation():typeof h.cancelBubble!="unknown"&&(h.cancelBubble=!0),this.isPropagationStopped=Xi)},persist:function(){},isPersistent:Xi}),u}var Ee={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ql=Ln(Ee),$o=d({},Ee,{view:0,detail:0}),Rd=Ln($o),Jl,tu,Wi,qo=d({},$o,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Yo,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==Wi&&(Wi&&o.type==="mousemove"?(Jl=o.screenX-Wi.screenX,tu=o.screenY-Wi.screenY):tu=Jl=0,Wi=o),Jl)},movementY:function(o){return"movementY"in o?o.movementY:tu}}),si=Ln(qo),Dd=d({},qo,{dataTransfer:0}),xp=Ln(Dd),Xo=d({},$o,{relatedTarget:0}),eu=Ln(Xo),ef=d({},Ee,{animationName:0,elapsedTime:0,pseudoElement:0}),nu=Ln(ef),Od=d({},Ee,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),ru=Ln(Od),_p=d({},Ee,{data:0}),nf=Ln(_p),Wo={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Md={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Nd={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function rf(o){var u=this.nativeEvent;return u.getModifierState?u.getModifierState(o):(o=Nd[o])?!!u[o]:!1}function Yo(){return rf}var Pd=d({},$o,{key:function(o){if(o.key){var u=Wo[o.key]||o.key;if(u!=="Unidentified")return u}return o.type==="keypress"?(o=qi(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?Md[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Yo,charCode:function(o){return o.type==="keypress"?qi(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?qi(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),iu=Ln(Pd),kd=d({},qo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),af=Ln(kd),Oa=d({},$o,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Yo}),Ld=Ln(Oa),Bd=d({},Ee,{propertyName:0,elapsedTime:0,pseudoElement:0}),Vd=Ln(Bd),Fd=d({},qo,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),au=Ln(Fd),yr=d({},Ee,{newState:0,oldState:0}),jd=Ln(yr),Ud=[9,13,27,32],Yi=Si&&"CompositionEvent"in window,y=null;Si&&"documentMode"in document&&(y=document.documentMode);var T=Si&&"TextEvent"in window&&!y,P=Si&&(!Yi||y&&8<y&&11>=y),z=" ",K=!1;function at(o,u){switch(o){case"keyup":return Ud.indexOf(u.keyCode)!==-1;case"keydown":return u.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function yt(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var re=!1;function An(o,u){switch(o){case"compositionend":return yt(u);case"keypress":return u.which!==32?null:(K=!0,z);case"textInput":return o=u.data,o===z&&K?null:o;default:return null}}function ie(o,u){if(re)return o==="compositionend"||!Yi&&at(o,u)?(o=Jc(),Da=Ts=$i=null,re=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(u.ctrlKey||u.altKey||u.metaKey)||u.ctrlKey&&u.altKey){if(u.char&&1<u.char.length)return u.char;if(u.which)return String.fromCharCode(u.which)}return null;case"compositionend":return P&&u.locale!=="ko"?null:u.data;default:return null}}var Bn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function En(o){var u=o&&o.nodeName&&o.nodeName.toLowerCase();return u==="input"?!!Bn[o.type]:u==="textarea"}function Ma(o,u,h,p){Ia?Ra?Ra.push(p):Ra=[p]:Ia=p,u=C0(u,"onChange"),0<u.length&&(h=new Ql("onChange","change",null,h,p),o.push({event:h,listeners:u}))}var Yn=null,Ki=null;function sf(o){GE(o,0)}function zd(o){var u=zi(o);if(Yc(u))return o}function f_(o,u){if(o==="change")return u}var h_=!1;if(Si){var Ap;if(Si){var Ep="oninput"in document;if(!Ep){var d_=document.createElement("div");d_.setAttribute("oninput","return;"),Ep=typeof d_.oninput=="function"}Ap=Ep}else Ap=!1;h_=Ap&&(!document.documentMode||9<document.documentMode)}function g_(){Yn&&(Yn.detachEvent("onpropertychange",p_),Ki=Yn=null)}function p_(o){if(o.propertyName==="value"&&zd(Ki)){var u=[];Ma(u,Ki,o,ii(o)),Id(sf,u)}}function I6(o,u,h){o==="focusin"?(g_(),Yn=u,Ki=h,Yn.attachEvent("onpropertychange",p_)):o==="focusout"&&g_()}function R6(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return zd(Ki)}function D6(o,u){if(o==="click")return zd(u)}function O6(o,u){if(o==="input"||o==="change")return zd(u)}function M6(o,u){return o===u&&(o!==0||1/o===1/u)||o!==o&&u!==u}var jr=typeof Object.is=="function"?Object.is:M6;function of(o,u){if(jr(o,u))return!0;if(typeof o!="object"||o===null||typeof u!="object"||u===null)return!1;var h=Object.keys(o),p=Object.keys(u);if(h.length!==p.length)return!1;for(p=0;p<h.length;p++){var x=h[p];if(!pt.call(u,x)||!jr(o[x],u[x]))return!1}return!0}function m_(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function v_(o,u){var h=m_(o);o=0;for(var p;h;){if(h.nodeType===3){if(p=o+h.textContent.length,o<=u&&p>=u)return{node:h,offset:u-o};o=p}t:{for(;h;){if(h.nextSibling){h=h.nextSibling;break t}h=h.parentNode}h=void 0}h=m_(h)}}function y_(o,u){return o&&u?o===u?!0:o&&o.nodeType===3?!1:u&&u.nodeType===3?y_(o,u.parentNode):"contains"in o?o.contains(u):o.compareDocumentPosition?!!(o.compareDocumentPosition(u)&16):!1:!1}function x_(o){o=o!=null&&o.ownerDocument!=null&&o.ownerDocument.defaultView!=null?o.ownerDocument.defaultView:window;for(var u=Fo(o.document);u instanceof o.HTMLIFrameElement;){try{var h=typeof u.contentWindow.location.href=="string"}catch{h=!1}if(h)o=u.contentWindow;else break;u=Fo(o.document)}return u}function wp(o){var u=o&&o.nodeName&&o.nodeName.toLowerCase();return u&&(u==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||u==="textarea"||o.contentEditable==="true")}var N6=Si&&"documentMode"in document&&11>=document.documentMode,su=null,bp=null,lf=null,Sp=!1;function __(o,u,h){var p=h.window===h?h.document:h.nodeType===9?h:h.ownerDocument;Sp||su==null||su!==Fo(p)||(p=su,"selectionStart"in p&&wp(p)?p={start:p.selectionStart,end:p.selectionEnd}:(p=(p.ownerDocument&&p.ownerDocument.defaultView||window).getSelection(),p={anchorNode:p.anchorNode,anchorOffset:p.anchorOffset,focusNode:p.focusNode,focusOffset:p.focusOffset}),lf&&of(lf,p)||(lf=p,p=C0(bp,"onSelect"),0<p.length&&(u=new Ql("onSelect","select",null,u,h),o.push({event:u,listeners:p}),u.target=su)))}function Ko(o,u){var h={};return h[o.toLowerCase()]=u.toLowerCase(),h["Webkit"+o]="webkit"+u,h["Moz"+o]="moz"+u,h}var ou={animationend:Ko("Animation","AnimationEnd"),animationiteration:Ko("Animation","AnimationIteration"),animationstart:Ko("Animation","AnimationStart"),transitionrun:Ko("Transition","TransitionRun"),transitionstart:Ko("Transition","TransitionStart"),transitioncancel:Ko("Transition","TransitionCancel"),transitionend:Ko("Transition","TransitionEnd")},Tp={},A_={};Si&&(A_=document.createElement("div").style,"AnimationEvent"in window||(delete ou.animationend.animation,delete ou.animationiteration.animation,delete ou.animationstart.animation),"TransitionEvent"in window||delete ou.transitionend.transition);function Zo(o){if(Tp[o])return Tp[o];if(!ou[o])return o;var u=ou[o],h;for(h in u)if(u.hasOwnProperty(h)&&h in A_)return Tp[o]=u[h];return o}var E_=Zo("animationend"),w_=Zo("animationiteration"),b_=Zo("animationstart"),P6=Zo("transitionrun"),k6=Zo("transitionstart"),L6=Zo("transitioncancel"),S_=Zo("transitionend"),T_=new Map,Cp="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Cp.push("scrollEnd");function Ti(o,u){T_.set(o,u),bi(u,[o])}var C_=new WeakMap;function oi(o,u){if(typeof o=="object"&&o!==null){var h=C_.get(o);return h!==void 0?h:(u={value:o,source:u,stack:Yl(u)},C_.set(o,u),u)}return{value:o,source:u,stack:Yl(u)}}var li=[],lu=0,Ip=0;function Hd(){for(var o=lu,u=Ip=lu=0;u<o;){var h=li[u];li[u++]=null;var p=li[u];li[u++]=null;var x=li[u];li[u++]=null;var E=li[u];if(li[u++]=null,p!==null&&x!==null){var L=p.pending;L===null?x.next=x:(x.next=L.next,L.next=x),p.pending=x}E!==0&&I_(h,x,E)}}function Gd(o,u,h,p){li[lu++]=o,li[lu++]=u,li[lu++]=h,li[lu++]=p,Ip|=p,o.lanes|=p,o=o.alternate,o!==null&&(o.lanes|=p)}function Rp(o,u,h,p){return Gd(o,u,h,p),$d(o)}function uu(o,u){return Gd(o,null,null,u),$d(o)}function I_(o,u,h){o.lanes|=h;var p=o.alternate;p!==null&&(p.lanes|=h);for(var x=!1,E=o.return;E!==null;)E.childLanes|=h,p=E.alternate,p!==null&&(p.childLanes|=h),E.tag===22&&(o=E.stateNode,o===null||o._visibility&1||(x=!0)),o=E,E=E.return;return o.tag===3?(E=o.stateNode,x&&u!==null&&(x=31-ar(h),o=E.hiddenUpdates,p=o[x],p===null?o[x]=[u]:p.push(u),u.lane=h|536870912),E):null}function $d(o){if(50<Nf)throw Nf=0,km=null,Error(r(185));for(var u=o.return;u!==null;)o=u,u=o.return;return o.tag===3?o.stateNode:null}var cu={};function B6(o,u,h,p){this.tag=o,this.key=h,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=u,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=p,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ur(o,u,h,p){return new B6(o,u,h,p)}function Dp(o){return o=o.prototype,!(!o||!o.isReactComponent)}function Na(o,u){var h=o.alternate;return h===null?(h=Ur(o.tag,u,o.key,o.mode),h.elementType=o.elementType,h.type=o.type,h.stateNode=o.stateNode,h.alternate=o,o.alternate=h):(h.pendingProps=u,h.type=o.type,h.flags=0,h.subtreeFlags=0,h.deletions=null),h.flags=o.flags&65011712,h.childLanes=o.childLanes,h.lanes=o.lanes,h.child=o.child,h.memoizedProps=o.memoizedProps,h.memoizedState=o.memoizedState,h.updateQueue=o.updateQueue,u=o.dependencies,h.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext},h.sibling=o.sibling,h.index=o.index,h.ref=o.ref,h.refCleanup=o.refCleanup,h}function R_(o,u){o.flags&=65011714;var h=o.alternate;return h===null?(o.childLanes=0,o.lanes=u,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=h.childLanes,o.lanes=h.lanes,o.child=h.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=h.memoizedProps,o.memoizedState=h.memoizedState,o.updateQueue=h.updateQueue,o.type=h.type,u=h.dependencies,o.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext}),o}function qd(o,u,h,p,x,E){var L=0;if(p=o,typeof o=="function")Dp(o)&&(L=1);else if(typeof o=="string")L=F8(o,h,zt.current)?26:o==="html"||o==="head"||o==="body"?27:5;else t:switch(o){case D:return o=Ur(31,h,u,x),o.elementType=D,o.lanes=E,o;case _:return Qo(h.children,x,E,u);case w:L=8,x|=24;break;case b:return o=Ur(12,h,u,x|2),o.elementType=b,o.lanes=E,o;case N:return o=Ur(13,h,u,x),o.elementType=N,o.lanes=E,o;case k:return o=Ur(19,h,u,x),o.elementType=k,o.lanes=E,o;default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case C:case R:L=10;break t;case I:L=9;break t;case M:L=11;break t;case O:L=14;break t;case S:L=16,p=null;break t}L=29,h=Error(r(130,o===null?"null":typeof o,"")),p=null}return u=Ur(L,h,u,x),u.elementType=o,u.type=p,u.lanes=E,u}function Qo(o,u,h,p){return o=Ur(7,o,p,u),o.lanes=h,o}function Op(o,u,h){return o=Ur(6,o,null,u),o.lanes=h,o}function Mp(o,u,h){return u=Ur(4,o.children!==null?o.children:[],o.key,u),u.lanes=h,u.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},u}var fu=[],hu=0,Xd=null,Wd=0,ui=[],ci=0,Jo=null,Pa=1,ka="";function tl(o,u){fu[hu++]=Wd,fu[hu++]=Xd,Xd=o,Wd=u}function D_(o,u,h){ui[ci++]=Pa,ui[ci++]=ka,ui[ci++]=Jo,Jo=o;var p=Pa;o=ka;var x=32-ar(p)-1;p&=~(1<<x),h+=1;var E=32-ar(u)+x;if(30<E){var L=x-x%5;E=(p&(1<<L)-1).toString(32),p>>=L,x-=L,Pa=1<<32-ar(u)+x|h<<x|p,ka=E+o}else Pa=1<<E|h<<x|p,ka=o}function Np(o){o.return!==null&&(tl(o,1),D_(o,1,0))}function Pp(o){for(;o===Xd;)Xd=fu[--hu],fu[hu]=null,Wd=fu[--hu],fu[hu]=null;for(;o===Jo;)Jo=ui[--ci],ui[ci]=null,ka=ui[--ci],ui[ci]=null,Pa=ui[--ci],ui[ci]=null}var xr=null,tn=null,me=!1,el=null,Zi=!1,kp=Error(r(519));function nl(o){var u=Error(r(418,""));throw ff(oi(u,o)),kp}function O_(o){var u=o.stateNode,h=o.type,p=o.memoizedProps;switch(u[_n]=o,u[cn]=p,h){case"dialog":Jt("cancel",u),Jt("close",u);break;case"iframe":case"object":case"embed":Jt("load",u);break;case"video":case"audio":for(h=0;h<kf.length;h++)Jt(kf[h],u);break;case"source":Jt("error",u);break;case"img":case"image":case"link":Jt("error",u),Jt("load",u);break;case"details":Jt("toggle",u);break;case"input":Jt("invalid",u),jo(u,p.value,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name,!0),Kl(u);break;case"select":Jt("invalid",u);break;case"textarea":Jt("invalid",u),Uo(u,p.value,p.defaultValue,p.children),Kl(u)}h=p.children,typeof h!="string"&&typeof h!="number"&&typeof h!="bigint"||u.textContent===""+h||p.suppressHydrationWarning===!0||WE(u.textContent,h)?(p.popover!=null&&(Jt("beforetoggle",u),Jt("toggle",u)),p.onScroll!=null&&Jt("scroll",u),p.onScrollEnd!=null&&Jt("scrollend",u),p.onClick!=null&&(u.onclick=I0),u=!0):u=!1,u||nl(o)}function M_(o){for(xr=o.return;xr;)switch(xr.tag){case 5:case 13:Zi=!1;return;case 27:case 3:Zi=!0;return;default:xr=xr.return}}function uf(o){if(o!==xr)return!1;if(!me)return M_(o),me=!0,!1;var u=o.tag,h;if((h=u!==3&&u!==27)&&((h=u===5)&&(h=o.type,h=!(h!=="form"&&h!=="button")||Zm(o.type,o.memoizedProps)),h=!h),h&&tn&&nl(o),M_(o),u===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(r(317));t:{for(o=o.nextSibling,u=0;o;){if(o.nodeType===8)if(h=o.data,h==="/$"){if(u===0){tn=Ii(o.nextSibling);break t}u--}else h!=="$"&&h!=="$!"&&h!=="$?"||u++;o=o.nextSibling}tn=null}}else u===27?(u=tn,zs(o.type)?(o=ev,ev=null,tn=o):tn=u):tn=xr?Ii(o.stateNode.nextSibling):null;return!0}function cf(){tn=xr=null,me=!1}function N_(){var o=el;return o!==null&&(Ir===null?Ir=o:Ir.push.apply(Ir,o),el=null),o}function ff(o){el===null?el=[o]:el.push(o)}var Lp=Mt(null),rl=null,La=null;function Cs(o,u,h){Et(Lp,u._currentValue),u._currentValue=h}function Ba(o){o._currentValue=Lp.current,It(Lp)}function Bp(o,u,h){for(;o!==null;){var p=o.alternate;if((o.childLanes&u)!==u?(o.childLanes|=u,p!==null&&(p.childLanes|=u)):p!==null&&(p.childLanes&u)!==u&&(p.childLanes|=u),o===h)break;o=o.return}}function Vp(o,u,h,p){var x=o.child;for(x!==null&&(x.return=o);x!==null;){var E=x.dependencies;if(E!==null){var L=x.child;E=E.firstContext;t:for(;E!==null;){var U=E;E=x;for(var $=0;$<u.length;$++)if(U.context===u[$]){E.lanes|=h,U=E.alternate,U!==null&&(U.lanes|=h),Bp(E.return,h,o),p||(L=null);break t}E=U.next}}else if(x.tag===18){if(L=x.return,L===null)throw Error(r(341));L.lanes|=h,E=L.alternate,E!==null&&(E.lanes|=h),Bp(L,h,o),L=null}else L=x.child;if(L!==null)L.return=x;else for(L=x;L!==null;){if(L===o){L=null;break}if(x=L.sibling,x!==null){x.return=L.return,L=x;break}L=L.return}x=L}}function hf(o,u,h,p){o=null;for(var x=u,E=!1;x!==null;){if(!E){if((x.flags&524288)!==0)E=!0;else if((x.flags&262144)!==0)break}if(x.tag===10){var L=x.alternate;if(L===null)throw Error(r(387));if(L=L.memoizedProps,L!==null){var U=x.type;jr(x.pendingProps.value,L.value)||(o!==null?o.push(U):o=[U])}}else if(x===Re.current){if(L=x.alternate,L===null)throw Error(r(387));L.memoizedState.memoizedState!==x.memoizedState.memoizedState&&(o!==null?o.push(Uf):o=[Uf])}x=x.return}o!==null&&Vp(u,o,h,p),u.flags|=262144}function Yd(o){for(o=o.firstContext;o!==null;){if(!jr(o.context._currentValue,o.memoizedValue))return!0;o=o.next}return!1}function il(o){rl=o,La=null,o=o.dependencies,o!==null&&(o.firstContext=null)}function sr(o){return P_(rl,o)}function Kd(o,u){return rl===null&&il(o),P_(o,u)}function P_(o,u){var h=u._currentValue;if(u={context:u,memoizedValue:h,next:null},La===null){if(o===null)throw Error(r(308));La=u,o.dependencies={lanes:0,firstContext:u},o.flags|=524288}else La=La.next=u;return h}var V6=typeof AbortController<"u"?AbortController:function(){var o=[],u=this.signal={aborted:!1,addEventListener:function(h,p){o.push(p)}};this.abort=function(){u.aborted=!0,o.forEach(function(h){return h()})}},F6=n.unstable_scheduleCallback,j6=n.unstable_NormalPriority,wn={$$typeof:R,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Fp(){return{controller:new V6,data:new Map,refCount:0}}function df(o){o.refCount--,o.refCount===0&&F6(j6,function(){o.controller.abort()})}var gf=null,jp=0,du=0,gu=null;function U6(o,u){if(gf===null){var h=gf=[];jp=0,du=zm(),gu={status:"pending",value:void 0,then:function(p){h.push(p)}}}return jp++,u.then(k_,k_),u}function k_(){if(--jp===0&&gf!==null){gu!==null&&(gu.status="fulfilled");var o=gf;gf=null,du=0,gu=null;for(var u=0;u<o.length;u++)(0,o[u])()}}function z6(o,u){var h=[],p={status:"pending",value:null,reason:null,then:function(x){h.push(x)}};return o.then(function(){p.status="fulfilled",p.value=u;for(var x=0;x<h.length;x++)(0,h[x])(u)},function(x){for(p.status="rejected",p.reason=x,x=0;x<h.length;x++)(0,h[x])(void 0)}),p}var L_=q.S;q.S=function(o,u){typeof u=="object"&&u!==null&&typeof u.then=="function"&&U6(o,u),L_!==null&&L_(o,u)};var al=Mt(null);function Up(){var o=al.current;return o!==null?o:Fe.pooledCache}function Zd(o,u){u===null?Et(al,al.current):Et(al,u.pool)}function B_(){var o=Up();return o===null?null:{parent:wn._currentValue,pool:o}}var pf=Error(r(460)),V_=Error(r(474)),Qd=Error(r(542)),zp={then:function(){}};function F_(o){return o=o.status,o==="fulfilled"||o==="rejected"}function Jd(){}function j_(o,u,h){switch(h=o[h],h===void 0?o.push(u):h!==u&&(u.then(Jd,Jd),u=h),u.status){case"fulfilled":return u.value;case"rejected":throw o=u.reason,z_(o),o;default:if(typeof u.status=="string")u.then(Jd,Jd);else{if(o=Fe,o!==null&&100<o.shellSuspendCounter)throw Error(r(482));o=u,o.status="pending",o.then(function(p){if(u.status==="pending"){var x=u;x.status="fulfilled",x.value=p}},function(p){if(u.status==="pending"){var x=u;x.status="rejected",x.reason=p}})}switch(u.status){case"fulfilled":return u.value;case"rejected":throw o=u.reason,z_(o),o}throw mf=u,pf}}var mf=null;function U_(){if(mf===null)throw Error(r(459));var o=mf;return mf=null,o}function z_(o){if(o===pf||o===Qd)throw Error(r(483))}var Is=!1;function Hp(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Gp(o,u){o=o.updateQueue,u.updateQueue===o&&(u.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,callbacks:null})}function Rs(o){return{lane:o,tag:0,payload:null,callback:null,next:null}}function Ds(o,u,h){var p=o.updateQueue;if(p===null)return null;if(p=p.shared,(Se&2)!==0){var x=p.pending;return x===null?u.next=u:(u.next=x.next,x.next=u),p.pending=u,u=$d(o),I_(o,null,h),u}return Gd(o,p,u,h),$d(o)}function vf(o,u,h){if(u=u.updateQueue,u!==null&&(u=u.shared,(h&4194048)!==0)){var p=u.lanes;p&=o.pendingLanes,h|=p,u.lanes=h,Gc(o,h)}}function $p(o,u){var h=o.updateQueue,p=o.alternate;if(p!==null&&(p=p.updateQueue,h===p)){var x=null,E=null;if(h=h.firstBaseUpdate,h!==null){do{var L={lane:h.lane,tag:h.tag,payload:h.payload,callback:null,next:null};E===null?x=E=L:E=E.next=L,h=h.next}while(h!==null);E===null?x=E=u:E=E.next=u}else x=E=u;h={baseState:p.baseState,firstBaseUpdate:x,lastBaseUpdate:E,shared:p.shared,callbacks:p.callbacks},o.updateQueue=h;return}o=h.lastBaseUpdate,o===null?h.firstBaseUpdate=u:o.next=u,h.lastBaseUpdate=u}var qp=!1;function yf(){if(qp){var o=gu;if(o!==null)throw o}}function xf(o,u,h,p){qp=!1;var x=o.updateQueue;Is=!1;var E=x.firstBaseUpdate,L=x.lastBaseUpdate,U=x.shared.pending;if(U!==null){x.shared.pending=null;var $=U,J=$.next;$.next=null,L===null?E=J:L.next=J,L=$;var lt=o.alternate;lt!==null&&(lt=lt.updateQueue,U=lt.lastBaseUpdate,U!==L&&(U===null?lt.firstBaseUpdate=J:U.next=J,lt.lastBaseUpdate=$))}if(E!==null){var ht=x.baseState;L=0,lt=J=$=null,U=E;do{var et=U.lane&-536870913,nt=et!==U.lane;if(nt?(ae&et)===et:(p&et)===et){et!==0&&et===du&&(qp=!0),lt!==null&&(lt=lt.next={lane:0,tag:U.tag,payload:U.payload,callback:null,next:null});t:{var jt=o,Lt=U;et=u;var Ne=h;switch(Lt.tag){case 1:if(jt=Lt.payload,typeof jt=="function"){ht=jt.call(Ne,ht,et);break t}ht=jt;break t;case 3:jt.flags=jt.flags&-65537|128;case 0:if(jt=Lt.payload,et=typeof jt=="function"?jt.call(Ne,ht,et):jt,et==null)break t;ht=d({},ht,et);break t;case 2:Is=!0}}et=U.callback,et!==null&&(o.flags|=64,nt&&(o.flags|=8192),nt=x.callbacks,nt===null?x.callbacks=[et]:nt.push(et))}else nt={lane:et,tag:U.tag,payload:U.payload,callback:U.callback,next:null},lt===null?(J=lt=nt,$=ht):lt=lt.next=nt,L|=et;if(U=U.next,U===null){if(U=x.shared.pending,U===null)break;nt=U,U=nt.next,nt.next=null,x.lastBaseUpdate=nt,x.shared.pending=null}}while(!0);lt===null&&($=ht),x.baseState=$,x.firstBaseUpdate=J,x.lastBaseUpdate=lt,E===null&&(x.shared.lanes=0),Vs|=L,o.lanes=L,o.memoizedState=ht}}function H_(o,u){if(typeof o!="function")throw Error(r(191,o));o.call(u)}function G_(o,u){var h=o.callbacks;if(h!==null)for(o.callbacks=null,o=0;o<h.length;o++)H_(h[o],u)}var pu=Mt(null),t0=Mt(0);function $_(o,u){o=Ga,Et(t0,o),Et(pu,u),Ga=o|u.baseLanes}function Xp(){Et(t0,Ga),Et(pu,pu.current)}function Wp(){Ga=t0.current,It(pu),It(t0)}var Os=0,Xt=null,Oe=null,hn=null,e0=!1,mu=!1,sl=!1,n0=0,_f=0,vu=null,H6=0;function rn(){throw Error(r(321))}function Yp(o,u){if(u===null)return!1;for(var h=0;h<u.length&&h<o.length;h++)if(!jr(o[h],u[h]))return!1;return!0}function Kp(o,u,h,p,x,E){return Os=E,Xt=u,u.memoizedState=null,u.updateQueue=null,u.lanes=0,q.H=o===null||o.memoizedState===null?IA:RA,sl=!1,E=h(p,x),sl=!1,mu&&(E=X_(u,h,p,x)),q_(o),E}function q_(o){q.H=l0;var u=Oe!==null&&Oe.next!==null;if(Os=0,hn=Oe=Xt=null,e0=!1,_f=0,vu=null,u)throw Error(r(300));o===null||Vn||(o=o.dependencies,o!==null&&Yd(o)&&(Vn=!0))}function X_(o,u,h,p){Xt=o;var x=0;do{if(mu&&(vu=null),_f=0,mu=!1,25<=x)throw Error(r(301));if(x+=1,hn=Oe=null,o.updateQueue!=null){var E=o.updateQueue;E.lastEffect=null,E.events=null,E.stores=null,E.memoCache!=null&&(E.memoCache.index=0)}q.H=K6,E=u(h,p)}while(mu);return E}function G6(){var o=q.H,u=o.useState()[0];return u=typeof u.then=="function"?Af(u):u,o=o.useState()[0],(Oe!==null?Oe.memoizedState:null)!==o&&(Xt.flags|=1024),u}function Zp(){var o=n0!==0;return n0=0,o}function Qp(o,u,h){u.updateQueue=o.updateQueue,u.flags&=-2053,o.lanes&=~h}function Jp(o){if(e0){for(o=o.memoizedState;o!==null;){var u=o.queue;u!==null&&(u.pending=null),o=o.next}e0=!1}Os=0,hn=Oe=Xt=null,mu=!1,_f=n0=0,vu=null}function Tr(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return hn===null?Xt.memoizedState=hn=o:hn=hn.next=o,hn}function dn(){if(Oe===null){var o=Xt.alternate;o=o!==null?o.memoizedState:null}else o=Oe.next;var u=hn===null?Xt.memoizedState:hn.next;if(u!==null)hn=u,Oe=o;else{if(o===null)throw Xt.alternate===null?Error(r(467)):Error(r(310));Oe=o,o={memoizedState:Oe.memoizedState,baseState:Oe.baseState,baseQueue:Oe.baseQueue,queue:Oe.queue,next:null},hn===null?Xt.memoizedState=hn=o:hn=hn.next=o}return hn}function tm(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Af(o){var u=_f;return _f+=1,vu===null&&(vu=[]),o=j_(vu,o,u),u=Xt,(hn===null?u.memoizedState:hn.next)===null&&(u=u.alternate,q.H=u===null||u.memoizedState===null?IA:RA),o}function r0(o){if(o!==null&&typeof o=="object"){if(typeof o.then=="function")return Af(o);if(o.$$typeof===R)return sr(o)}throw Error(r(438,String(o)))}function em(o){var u=null,h=Xt.updateQueue;if(h!==null&&(u=h.memoCache),u==null){var p=Xt.alternate;p!==null&&(p=p.updateQueue,p!==null&&(p=p.memoCache,p!=null&&(u={data:p.data.map(function(x){return x.slice()}),index:0})))}if(u==null&&(u={data:[],index:0}),h===null&&(h=tm(),Xt.updateQueue=h),h.memoCache=u,h=u.data[u.index],h===void 0)for(h=u.data[u.index]=Array(o),p=0;p<o;p++)h[p]=V;return u.index++,h}function Va(o,u){return typeof u=="function"?u(o):u}function i0(o){var u=dn();return nm(u,Oe,o)}function nm(o,u,h){var p=o.queue;if(p===null)throw Error(r(311));p.lastRenderedReducer=h;var x=o.baseQueue,E=p.pending;if(E!==null){if(x!==null){var L=x.next;x.next=E.next,E.next=L}u.baseQueue=x=E,p.pending=null}if(E=o.baseState,x===null)o.memoizedState=E;else{u=x.next;var U=L=null,$=null,J=u,lt=!1;do{var ht=J.lane&-536870913;if(ht!==J.lane?(ae&ht)===ht:(Os&ht)===ht){var et=J.revertLane;if(et===0)$!==null&&($=$.next={lane:0,revertLane:0,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null}),ht===du&&(lt=!0);else if((Os&et)===et){J=J.next,et===du&&(lt=!0);continue}else ht={lane:0,revertLane:J.revertLane,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null},$===null?(U=$=ht,L=E):$=$.next=ht,Xt.lanes|=et,Vs|=et;ht=J.action,sl&&h(E,ht),E=J.hasEagerState?J.eagerState:h(E,ht)}else et={lane:ht,revertLane:J.revertLane,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null},$===null?(U=$=et,L=E):$=$.next=et,Xt.lanes|=ht,Vs|=ht;J=J.next}while(J!==null&&J!==u);if($===null?L=E:$.next=U,!jr(E,o.memoizedState)&&(Vn=!0,lt&&(h=gu,h!==null)))throw h;o.memoizedState=E,o.baseState=L,o.baseQueue=$,p.lastRenderedState=E}return x===null&&(p.lanes=0),[o.memoizedState,p.dispatch]}function rm(o){var u=dn(),h=u.queue;if(h===null)throw Error(r(311));h.lastRenderedReducer=o;var p=h.dispatch,x=h.pending,E=u.memoizedState;if(x!==null){h.pending=null;var L=x=x.next;do E=o(E,L.action),L=L.next;while(L!==x);jr(E,u.memoizedState)||(Vn=!0),u.memoizedState=E,u.baseQueue===null&&(u.baseState=E),h.lastRenderedState=E}return[E,p]}function W_(o,u,h){var p=Xt,x=dn(),E=me;if(E){if(h===void 0)throw Error(r(407));h=h()}else h=u();var L=!jr((Oe||x).memoizedState,h);L&&(x.memoizedState=h,Vn=!0),x=x.queue;var U=Z_.bind(null,p,x,o);if(Ef(2048,8,U,[o]),x.getSnapshot!==u||L||hn!==null&&hn.memoizedState.tag&1){if(p.flags|=2048,yu(9,a0(),K_.bind(null,p,x,h,u),null),Fe===null)throw Error(r(349));E||(Os&124)!==0||Y_(p,u,h)}return h}function Y_(o,u,h){o.flags|=16384,o={getSnapshot:u,value:h},u=Xt.updateQueue,u===null?(u=tm(),Xt.updateQueue=u,u.stores=[o]):(h=u.stores,h===null?u.stores=[o]:h.push(o))}function K_(o,u,h,p){u.value=h,u.getSnapshot=p,Q_(u)&&J_(o)}function Z_(o,u,h){return h(function(){Q_(u)&&J_(o)})}function Q_(o){var u=o.getSnapshot;o=o.value;try{var h=u();return!jr(o,h)}catch{return!0}}function J_(o){var u=uu(o,2);u!==null&&qr(u,o,2)}function im(o){var u=Tr();if(typeof o=="function"){var h=o;if(o=h(),sl){Vr(!0);try{h()}finally{Vr(!1)}}}return u.memoizedState=u.baseState=o,u.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Va,lastRenderedState:o},u}function tA(o,u,h,p){return o.baseState=h,nm(o,Oe,typeof p=="function"?p:Va)}function $6(o,u,h,p,x){if(o0(o))throw Error(r(485));if(o=u.action,o!==null){var E={payload:x,action:o,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(L){E.listeners.push(L)}};q.T!==null?h(!0):E.isTransition=!1,p(E),h=u.pending,h===null?(E.next=u.pending=E,eA(u,E)):(E.next=h.next,u.pending=h.next=E)}}function eA(o,u){var h=u.action,p=u.payload,x=o.state;if(u.isTransition){var E=q.T,L={};q.T=L;try{var U=h(x,p),$=q.S;$!==null&&$(L,U),nA(o,u,U)}catch(J){am(o,u,J)}finally{q.T=E}}else try{E=h(x,p),nA(o,u,E)}catch(J){am(o,u,J)}}function nA(o,u,h){h!==null&&typeof h=="object"&&typeof h.then=="function"?h.then(function(p){rA(o,u,p)},function(p){return am(o,u,p)}):rA(o,u,h)}function rA(o,u,h){u.status="fulfilled",u.value=h,iA(u),o.state=h,u=o.pending,u!==null&&(h=u.next,h===u?o.pending=null:(h=h.next,u.next=h,eA(o,h)))}function am(o,u,h){var p=o.pending;if(o.pending=null,p!==null){p=p.next;do u.status="rejected",u.reason=h,iA(u),u=u.next;while(u!==p)}o.action=null}function iA(o){o=o.listeners;for(var u=0;u<o.length;u++)(0,o[u])()}function aA(o,u){return u}function sA(o,u){if(me){var h=Fe.formState;if(h!==null){t:{var p=Xt;if(me){if(tn){e:{for(var x=tn,E=Zi;x.nodeType!==8;){if(!E){x=null;break e}if(x=Ii(x.nextSibling),x===null){x=null;break e}}E=x.data,x=E==="F!"||E==="F"?x:null}if(x){tn=Ii(x.nextSibling),p=x.data==="F!";break t}}nl(p)}p=!1}p&&(u=h[0])}}return h=Tr(),h.memoizedState=h.baseState=u,p={pending:null,lanes:0,dispatch:null,lastRenderedReducer:aA,lastRenderedState:u},h.queue=p,h=SA.bind(null,Xt,p),p.dispatch=h,p=im(!1),E=cm.bind(null,Xt,!1,p.queue),p=Tr(),x={state:u,dispatch:null,action:o,pending:null},p.queue=x,h=$6.bind(null,Xt,x,E,h),x.dispatch=h,p.memoizedState=o,[u,h,!1]}function oA(o){var u=dn();return lA(u,Oe,o)}function lA(o,u,h){if(u=nm(o,u,aA)[0],o=i0(Va)[0],typeof u=="object"&&u!==null&&typeof u.then=="function")try{var p=Af(u)}catch(L){throw L===pf?Qd:L}else p=u;u=dn();var x=u.queue,E=x.dispatch;return h!==u.memoizedState&&(Xt.flags|=2048,yu(9,a0(),q6.bind(null,x,h),null)),[p,E,o]}function q6(o,u){o.action=u}function uA(o){var u=dn(),h=Oe;if(h!==null)return lA(u,h,o);dn(),u=u.memoizedState,h=dn();var p=h.queue.dispatch;return h.memoizedState=o,[u,p,!1]}function yu(o,u,h,p){return o={tag:o,create:h,deps:p,inst:u,next:null},u=Xt.updateQueue,u===null&&(u=tm(),Xt.updateQueue=u),h=u.lastEffect,h===null?u.lastEffect=o.next=o:(p=h.next,h.next=o,o.next=p,u.lastEffect=o),o}function a0(){return{destroy:void 0,resource:void 0}}function cA(){return dn().memoizedState}function s0(o,u,h,p){var x=Tr();p=p===void 0?null:p,Xt.flags|=o,x.memoizedState=yu(1|u,a0(),h,p)}function Ef(o,u,h,p){var x=dn();p=p===void 0?null:p;var E=x.memoizedState.inst;Oe!==null&&p!==null&&Yp(p,Oe.memoizedState.deps)?x.memoizedState=yu(u,E,h,p):(Xt.flags|=o,x.memoizedState=yu(1|u,E,h,p))}function fA(o,u){s0(8390656,8,o,u)}function hA(o,u){Ef(2048,8,o,u)}function dA(o,u){return Ef(4,2,o,u)}function gA(o,u){return Ef(4,4,o,u)}function pA(o,u){if(typeof u=="function"){o=o();var h=u(o);return function(){typeof h=="function"?h():u(null)}}if(u!=null)return o=o(),u.current=o,function(){u.current=null}}function mA(o,u,h){h=h!=null?h.concat([o]):null,Ef(4,4,pA.bind(null,u,o),h)}function sm(){}function vA(o,u){var h=dn();u=u===void 0?null:u;var p=h.memoizedState;return u!==null&&Yp(u,p[1])?p[0]:(h.memoizedState=[o,u],o)}function yA(o,u){var h=dn();u=u===void 0?null:u;var p=h.memoizedState;if(u!==null&&Yp(u,p[1]))return p[0];if(p=o(),sl){Vr(!0);try{o()}finally{Vr(!1)}}return h.memoizedState=[p,u],p}function om(o,u,h){return h===void 0||(Os&1073741824)!==0?o.memoizedState=u:(o.memoizedState=h,o=AE(),Xt.lanes|=o,Vs|=o,h)}function xA(o,u,h,p){return jr(h,u)?h:pu.current!==null?(o=om(o,h,p),jr(o,u)||(Vn=!0),o):(Os&42)===0?(Vn=!0,o.memoizedState=h):(o=AE(),Xt.lanes|=o,Vs|=o,u)}function _A(o,u,h,p,x){var E=Z.p;Z.p=E!==0&&8>E?E:8;var L=q.T,U={};q.T=U,cm(o,!1,u,h);try{var $=x(),J=q.S;if(J!==null&&J(U,$),$!==null&&typeof $=="object"&&typeof $.then=="function"){var lt=z6($,p);wf(o,u,lt,$r(o))}else wf(o,u,p,$r(o))}catch(ht){wf(o,u,{then:function(){},status:"rejected",reason:ht},$r())}finally{Z.p=E,q.T=L}}function X6(){}function lm(o,u,h,p){if(o.tag!==5)throw Error(r(476));var x=AA(o).queue;_A(o,x,u,it,h===null?X6:function(){return EA(o),h(p)})}function AA(o){var u=o.memoizedState;if(u!==null)return u;u={memoizedState:it,baseState:it,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Va,lastRenderedState:it},next:null};var h={};return u.next={memoizedState:h,baseState:h,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Va,lastRenderedState:h},next:null},o.memoizedState=u,o=o.alternate,o!==null&&(o.memoizedState=u),u}function EA(o){var u=AA(o).next.queue;wf(o,u,{},$r())}function um(){return sr(Uf)}function wA(){return dn().memoizedState}function bA(){return dn().memoizedState}function W6(o){for(var u=o.return;u!==null;){switch(u.tag){case 24:case 3:var h=$r();o=Rs(h);var p=Ds(u,o,h);p!==null&&(qr(p,u,h),vf(p,u,h)),u={cache:Fp()},o.payload=u;return}u=u.return}}function Y6(o,u,h){var p=$r();h={lane:p,revertLane:0,action:h,hasEagerState:!1,eagerState:null,next:null},o0(o)?TA(u,h):(h=Rp(o,u,h,p),h!==null&&(qr(h,o,p),CA(h,u,p)))}function SA(o,u,h){var p=$r();wf(o,u,h,p)}function wf(o,u,h,p){var x={lane:p,revertLane:0,action:h,hasEagerState:!1,eagerState:null,next:null};if(o0(o))TA(u,x);else{var E=o.alternate;if(o.lanes===0&&(E===null||E.lanes===0)&&(E=u.lastRenderedReducer,E!==null))try{var L=u.lastRenderedState,U=E(L,h);if(x.hasEagerState=!0,x.eagerState=U,jr(U,L))return Gd(o,u,x,0),Fe===null&&Hd(),!1}catch{}finally{}if(h=Rp(o,u,x,p),h!==null)return qr(h,o,p),CA(h,u,p),!0}return!1}function cm(o,u,h,p){if(p={lane:2,revertLane:zm(),action:p,hasEagerState:!1,eagerState:null,next:null},o0(o)){if(u)throw Error(r(479))}else u=Rp(o,h,p,2),u!==null&&qr(u,o,2)}function o0(o){var u=o.alternate;return o===Xt||u!==null&&u===Xt}function TA(o,u){mu=e0=!0;var h=o.pending;h===null?u.next=u:(u.next=h.next,h.next=u),o.pending=u}function CA(o,u,h){if((h&4194048)!==0){var p=u.lanes;p&=o.pendingLanes,h|=p,u.lanes=h,Gc(o,h)}}var l0={readContext:sr,use:r0,useCallback:rn,useContext:rn,useEffect:rn,useImperativeHandle:rn,useLayoutEffect:rn,useInsertionEffect:rn,useMemo:rn,useReducer:rn,useRef:rn,useState:rn,useDebugValue:rn,useDeferredValue:rn,useTransition:rn,useSyncExternalStore:rn,useId:rn,useHostTransitionStatus:rn,useFormState:rn,useActionState:rn,useOptimistic:rn,useMemoCache:rn,useCacheRefresh:rn},IA={readContext:sr,use:r0,useCallback:function(o,u){return Tr().memoizedState=[o,u===void 0?null:u],o},useContext:sr,useEffect:fA,useImperativeHandle:function(o,u,h){h=h!=null?h.concat([o]):null,s0(4194308,4,pA.bind(null,u,o),h)},useLayoutEffect:function(o,u){return s0(4194308,4,o,u)},useInsertionEffect:function(o,u){s0(4,2,o,u)},useMemo:function(o,u){var h=Tr();u=u===void 0?null:u;var p=o();if(sl){Vr(!0);try{o()}finally{Vr(!1)}}return h.memoizedState=[p,u],p},useReducer:function(o,u,h){var p=Tr();if(h!==void 0){var x=h(u);if(sl){Vr(!0);try{h(u)}finally{Vr(!1)}}}else x=u;return p.memoizedState=p.baseState=x,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:x},p.queue=o,o=o.dispatch=Y6.bind(null,Xt,o),[p.memoizedState,o]},useRef:function(o){var u=Tr();return o={current:o},u.memoizedState=o},useState:function(o){o=im(o);var u=o.queue,h=SA.bind(null,Xt,u);return u.dispatch=h,[o.memoizedState,h]},useDebugValue:sm,useDeferredValue:function(o,u){var h=Tr();return om(h,o,u)},useTransition:function(){var o=im(!1);return o=_A.bind(null,Xt,o.queue,!0,!1),Tr().memoizedState=o,[!1,o]},useSyncExternalStore:function(o,u,h){var p=Xt,x=Tr();if(me){if(h===void 0)throw Error(r(407));h=h()}else{if(h=u(),Fe===null)throw Error(r(349));(ae&124)!==0||Y_(p,u,h)}x.memoizedState=h;var E={value:h,getSnapshot:u};return x.queue=E,fA(Z_.bind(null,p,E,o),[o]),p.flags|=2048,yu(9,a0(),K_.bind(null,p,E,h,u),null),h},useId:function(){var o=Tr(),u=Fe.identifierPrefix;if(me){var h=ka,p=Pa;h=(p&~(1<<32-ar(p)-1)).toString(32)+h,u="«"+u+"R"+h,h=n0++,0<h&&(u+="H"+h.toString(32)),u+="»"}else h=H6++,u="«"+u+"r"+h.toString(32)+"»";return o.memoizedState=u},useHostTransitionStatus:um,useFormState:sA,useActionState:sA,useOptimistic:function(o){var u=Tr();u.memoizedState=u.baseState=o;var h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return u.queue=h,u=cm.bind(null,Xt,!0,h),h.dispatch=u,[o,u]},useMemoCache:em,useCacheRefresh:function(){return Tr().memoizedState=W6.bind(null,Xt)}},RA={readContext:sr,use:r0,useCallback:vA,useContext:sr,useEffect:hA,useImperativeHandle:mA,useInsertionEffect:dA,useLayoutEffect:gA,useMemo:yA,useReducer:i0,useRef:cA,useState:function(){return i0(Va)},useDebugValue:sm,useDeferredValue:function(o,u){var h=dn();return xA(h,Oe.memoizedState,o,u)},useTransition:function(){var o=i0(Va)[0],u=dn().memoizedState;return[typeof o=="boolean"?o:Af(o),u]},useSyncExternalStore:W_,useId:wA,useHostTransitionStatus:um,useFormState:oA,useActionState:oA,useOptimistic:function(o,u){var h=dn();return tA(h,Oe,o,u)},useMemoCache:em,useCacheRefresh:bA},K6={readContext:sr,use:r0,useCallback:vA,useContext:sr,useEffect:hA,useImperativeHandle:mA,useInsertionEffect:dA,useLayoutEffect:gA,useMemo:yA,useReducer:rm,useRef:cA,useState:function(){return rm(Va)},useDebugValue:sm,useDeferredValue:function(o,u){var h=dn();return Oe===null?om(h,o,u):xA(h,Oe.memoizedState,o,u)},useTransition:function(){var o=rm(Va)[0],u=dn().memoizedState;return[typeof o=="boolean"?o:Af(o),u]},useSyncExternalStore:W_,useId:wA,useHostTransitionStatus:um,useFormState:uA,useActionState:uA,useOptimistic:function(o,u){var h=dn();return Oe!==null?tA(h,Oe,o,u):(h.baseState=o,[o,h.queue.dispatch])},useMemoCache:em,useCacheRefresh:bA},xu=null,bf=0;function u0(o){var u=bf;return bf+=1,xu===null&&(xu=[]),j_(xu,o,u)}function Sf(o,u){u=u.props.ref,o.ref=u!==void 0?u:null}function c0(o,u){throw u.$$typeof===g?Error(r(525)):(o=Object.prototype.toString.call(u),Error(r(31,o==="[object Object]"?"object with keys {"+Object.keys(u).join(", ")+"}":o)))}function DA(o){var u=o._init;return u(o._payload)}function OA(o){function u(Y,W){if(o){var Q=Y.deletions;Q===null?(Y.deletions=[W],Y.flags|=16):Q.push(W)}}function h(Y,W){if(!o)return null;for(;W!==null;)u(Y,W),W=W.sibling;return null}function p(Y){for(var W=new Map;Y!==null;)Y.key!==null?W.set(Y.key,Y):W.set(Y.index,Y),Y=Y.sibling;return W}function x(Y,W){return Y=Na(Y,W),Y.index=0,Y.sibling=null,Y}function E(Y,W,Q){return Y.index=Q,o?(Q=Y.alternate,Q!==null?(Q=Q.index,Q<W?(Y.flags|=67108866,W):Q):(Y.flags|=67108866,W)):(Y.flags|=1048576,W)}function L(Y){return o&&Y.alternate===null&&(Y.flags|=67108866),Y}function U(Y,W,Q,ct){return W===null||W.tag!==6?(W=Op(Q,Y.mode,ct),W.return=Y,W):(W=x(W,Q),W.return=Y,W)}function $(Y,W,Q,ct){var Tt=Q.type;return Tt===_?lt(Y,W,Q.props.children,ct,Q.key):W!==null&&(W.elementType===Tt||typeof Tt=="object"&&Tt!==null&&Tt.$$typeof===S&&DA(Tt)===W.type)?(W=x(W,Q.props),Sf(W,Q),W.return=Y,W):(W=qd(Q.type,Q.key,Q.props,null,Y.mode,ct),Sf(W,Q),W.return=Y,W)}function J(Y,W,Q,ct){return W===null||W.tag!==4||W.stateNode.containerInfo!==Q.containerInfo||W.stateNode.implementation!==Q.implementation?(W=Mp(Q,Y.mode,ct),W.return=Y,W):(W=x(W,Q.children||[]),W.return=Y,W)}function lt(Y,W,Q,ct,Tt){return W===null||W.tag!==7?(W=Qo(Q,Y.mode,ct,Tt),W.return=Y,W):(W=x(W,Q),W.return=Y,W)}function ht(Y,W,Q){if(typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint")return W=Op(""+W,Y.mode,Q),W.return=Y,W;if(typeof W=="object"&&W!==null){switch(W.$$typeof){case m:return Q=qd(W.type,W.key,W.props,null,Y.mode,Q),Sf(Q,W),Q.return=Y,Q;case v:return W=Mp(W,Y.mode,Q),W.return=Y,W;case S:var ct=W._init;return W=ct(W._payload),ht(Y,W,Q)}if(mt(W)||F(W))return W=Qo(W,Y.mode,Q,null),W.return=Y,W;if(typeof W.then=="function")return ht(Y,u0(W),Q);if(W.$$typeof===R)return ht(Y,Kd(Y,W),Q);c0(Y,W)}return null}function et(Y,W,Q,ct){var Tt=W!==null?W.key:null;if(typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint")return Tt!==null?null:U(Y,W,""+Q,ct);if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case m:return Q.key===Tt?$(Y,W,Q,ct):null;case v:return Q.key===Tt?J(Y,W,Q,ct):null;case S:return Tt=Q._init,Q=Tt(Q._payload),et(Y,W,Q,ct)}if(mt(Q)||F(Q))return Tt!==null?null:lt(Y,W,Q,ct,null);if(typeof Q.then=="function")return et(Y,W,u0(Q),ct);if(Q.$$typeof===R)return et(Y,W,Kd(Y,Q),ct);c0(Y,Q)}return null}function nt(Y,W,Q,ct,Tt){if(typeof ct=="string"&&ct!==""||typeof ct=="number"||typeof ct=="bigint")return Y=Y.get(Q)||null,U(W,Y,""+ct,Tt);if(typeof ct=="object"&&ct!==null){switch(ct.$$typeof){case m:return Y=Y.get(ct.key===null?Q:ct.key)||null,$(W,Y,ct,Tt);case v:return Y=Y.get(ct.key===null?Q:ct.key)||null,J(W,Y,ct,Tt);case S:var Kt=ct._init;return ct=Kt(ct._payload),nt(Y,W,Q,ct,Tt)}if(mt(ct)||F(ct))return Y=Y.get(Q)||null,lt(W,Y,ct,Tt,null);if(typeof ct.then=="function")return nt(Y,W,Q,u0(ct),Tt);if(ct.$$typeof===R)return nt(Y,W,Q,Kd(W,ct),Tt);c0(W,ct)}return null}function jt(Y,W,Q,ct){for(var Tt=null,Kt=null,Dt=W,Bt=W=0,jn=null;Dt!==null&&Bt<Q.length;Bt++){Dt.index>Bt?(jn=Dt,Dt=null):jn=Dt.sibling;var fe=et(Y,Dt,Q[Bt],ct);if(fe===null){Dt===null&&(Dt=jn);break}o&&Dt&&fe.alternate===null&&u(Y,Dt),W=E(fe,W,Bt),Kt===null?Tt=fe:Kt.sibling=fe,Kt=fe,Dt=jn}if(Bt===Q.length)return h(Y,Dt),me&&tl(Y,Bt),Tt;if(Dt===null){for(;Bt<Q.length;Bt++)Dt=ht(Y,Q[Bt],ct),Dt!==null&&(W=E(Dt,W,Bt),Kt===null?Tt=Dt:Kt.sibling=Dt,Kt=Dt);return me&&tl(Y,Bt),Tt}for(Dt=p(Dt);Bt<Q.length;Bt++)jn=nt(Dt,Y,Bt,Q[Bt],ct),jn!==null&&(o&&jn.alternate!==null&&Dt.delete(jn.key===null?Bt:jn.key),W=E(jn,W,Bt),Kt===null?Tt=jn:Kt.sibling=jn,Kt=jn);return o&&Dt.forEach(function(Xs){return u(Y,Xs)}),me&&tl(Y,Bt),Tt}function Lt(Y,W,Q,ct){if(Q==null)throw Error(r(151));for(var Tt=null,Kt=null,Dt=W,Bt=W=0,jn=null,fe=Q.next();Dt!==null&&!fe.done;Bt++,fe=Q.next()){Dt.index>Bt?(jn=Dt,Dt=null):jn=Dt.sibling;var Xs=et(Y,Dt,fe.value,ct);if(Xs===null){Dt===null&&(Dt=jn);break}o&&Dt&&Xs.alternate===null&&u(Y,Dt),W=E(Xs,W,Bt),Kt===null?Tt=Xs:Kt.sibling=Xs,Kt=Xs,Dt=jn}if(fe.done)return h(Y,Dt),me&&tl(Y,Bt),Tt;if(Dt===null){for(;!fe.done;Bt++,fe=Q.next())fe=ht(Y,fe.value,ct),fe!==null&&(W=E(fe,W,Bt),Kt===null?Tt=fe:Kt.sibling=fe,Kt=fe);return me&&tl(Y,Bt),Tt}for(Dt=p(Dt);!fe.done;Bt++,fe=Q.next())fe=nt(Dt,Y,Bt,fe.value,ct),fe!==null&&(o&&fe.alternate!==null&&Dt.delete(fe.key===null?Bt:fe.key),W=E(fe,W,Bt),Kt===null?Tt=fe:Kt.sibling=fe,Kt=fe);return o&&Dt.forEach(function(Z8){return u(Y,Z8)}),me&&tl(Y,Bt),Tt}function Ne(Y,W,Q,ct){if(typeof Q=="object"&&Q!==null&&Q.type===_&&Q.key===null&&(Q=Q.props.children),typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case m:t:{for(var Tt=Q.key;W!==null;){if(W.key===Tt){if(Tt=Q.type,Tt===_){if(W.tag===7){h(Y,W.sibling),ct=x(W,Q.props.children),ct.return=Y,Y=ct;break t}}else if(W.elementType===Tt||typeof Tt=="object"&&Tt!==null&&Tt.$$typeof===S&&DA(Tt)===W.type){h(Y,W.sibling),ct=x(W,Q.props),Sf(ct,Q),ct.return=Y,Y=ct;break t}h(Y,W);break}else u(Y,W);W=W.sibling}Q.type===_?(ct=Qo(Q.props.children,Y.mode,ct,Q.key),ct.return=Y,Y=ct):(ct=qd(Q.type,Q.key,Q.props,null,Y.mode,ct),Sf(ct,Q),ct.return=Y,Y=ct)}return L(Y);case v:t:{for(Tt=Q.key;W!==null;){if(W.key===Tt)if(W.tag===4&&W.stateNode.containerInfo===Q.containerInfo&&W.stateNode.implementation===Q.implementation){h(Y,W.sibling),ct=x(W,Q.children||[]),ct.return=Y,Y=ct;break t}else{h(Y,W);break}else u(Y,W);W=W.sibling}ct=Mp(Q,Y.mode,ct),ct.return=Y,Y=ct}return L(Y);case S:return Tt=Q._init,Q=Tt(Q._payload),Ne(Y,W,Q,ct)}if(mt(Q))return jt(Y,W,Q,ct);if(F(Q)){if(Tt=F(Q),typeof Tt!="function")throw Error(r(150));return Q=Tt.call(Q),Lt(Y,W,Q,ct)}if(typeof Q.then=="function")return Ne(Y,W,u0(Q),ct);if(Q.$$typeof===R)return Ne(Y,W,Kd(Y,Q),ct);c0(Y,Q)}return typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint"?(Q=""+Q,W!==null&&W.tag===6?(h(Y,W.sibling),ct=x(W,Q),ct.return=Y,Y=ct):(h(Y,W),ct=Op(Q,Y.mode,ct),ct.return=Y,Y=ct),L(Y)):h(Y,W)}return function(Y,W,Q,ct){try{bf=0;var Tt=Ne(Y,W,Q,ct);return xu=null,Tt}catch(Dt){if(Dt===pf||Dt===Qd)throw Dt;var Kt=Ur(29,Dt,null,Y.mode);return Kt.lanes=ct,Kt.return=Y,Kt}finally{}}}var _u=OA(!0),MA=OA(!1),fi=Mt(null),Qi=null;function Ms(o){var u=o.alternate;Et(bn,bn.current&1),Et(fi,o),Qi===null&&(u===null||pu.current!==null||u.memoizedState!==null)&&(Qi=o)}function NA(o){if(o.tag===22){if(Et(bn,bn.current),Et(fi,o),Qi===null){var u=o.alternate;u!==null&&u.memoizedState!==null&&(Qi=o)}}else Ns()}function Ns(){Et(bn,bn.current),Et(fi,fi.current)}function Fa(o){It(fi),Qi===o&&(Qi=null),It(bn)}var bn=Mt(0);function f0(o){for(var u=o;u!==null;){if(u.tag===13){var h=u.memoizedState;if(h!==null&&(h=h.dehydrated,h===null||h.data==="$?"||tv(h)))return u}else if(u.tag===19&&u.memoizedProps.revealOrder!==void 0){if((u.flags&128)!==0)return u}else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===o)break;for(;u.sibling===null;){if(u.return===null||u.return===o)return null;u=u.return}u.sibling.return=u.return,u=u.sibling}return null}function fm(o,u,h,p){u=o.memoizedState,h=h(p,u),h=h==null?u:d({},u,h),o.memoizedState=h,o.lanes===0&&(o.updateQueue.baseState=h)}var hm={enqueueSetState:function(o,u,h){o=o._reactInternals;var p=$r(),x=Rs(p);x.payload=u,h!=null&&(x.callback=h),u=Ds(o,x,p),u!==null&&(qr(u,o,p),vf(u,o,p))},enqueueReplaceState:function(o,u,h){o=o._reactInternals;var p=$r(),x=Rs(p);x.tag=1,x.payload=u,h!=null&&(x.callback=h),u=Ds(o,x,p),u!==null&&(qr(u,o,p),vf(u,o,p))},enqueueForceUpdate:function(o,u){o=o._reactInternals;var h=$r(),p=Rs(h);p.tag=2,u!=null&&(p.callback=u),u=Ds(o,p,h),u!==null&&(qr(u,o,h),vf(u,o,h))}};function PA(o,u,h,p,x,E,L){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(p,E,L):u.prototype&&u.prototype.isPureReactComponent?!of(h,p)||!of(x,E):!0}function kA(o,u,h,p){o=u.state,typeof u.componentWillReceiveProps=="function"&&u.componentWillReceiveProps(h,p),typeof u.UNSAFE_componentWillReceiveProps=="function"&&u.UNSAFE_componentWillReceiveProps(h,p),u.state!==o&&hm.enqueueReplaceState(u,u.state,null)}function ol(o,u){var h=u;if("ref"in u){h={};for(var p in u)p!=="ref"&&(h[p]=u[p])}if(o=o.defaultProps){h===u&&(h=d({},h));for(var x in o)h[x]===void 0&&(h[x]=o[x])}return h}var h0=typeof reportError=="function"?reportError:function(o){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var u=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof o=="object"&&o!==null&&typeof o.message=="string"?String(o.message):String(o),error:o});if(!window.dispatchEvent(u))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",o);return}console.error(o)};function LA(o){h0(o)}function BA(o){console.error(o)}function VA(o){h0(o)}function d0(o,u){try{var h=o.onUncaughtError;h(u.value,{componentStack:u.stack})}catch(p){setTimeout(function(){throw p})}}function FA(o,u,h){try{var p=o.onCaughtError;p(h.value,{componentStack:h.stack,errorBoundary:u.tag===1?u.stateNode:null})}catch(x){setTimeout(function(){throw x})}}function dm(o,u,h){return h=Rs(h),h.tag=3,h.payload={element:null},h.callback=function(){d0(o,u)},h}function jA(o){return o=Rs(o),o.tag=3,o}function UA(o,u,h,p){var x=h.type.getDerivedStateFromError;if(typeof x=="function"){var E=p.value;o.payload=function(){return x(E)},o.callback=function(){FA(u,h,p)}}var L=h.stateNode;L!==null&&typeof L.componentDidCatch=="function"&&(o.callback=function(){FA(u,h,p),typeof x!="function"&&(Fs===null?Fs=new Set([this]):Fs.add(this));var U=p.stack;this.componentDidCatch(p.value,{componentStack:U!==null?U:""})})}function Z6(o,u,h,p,x){if(h.flags|=32768,p!==null&&typeof p=="object"&&typeof p.then=="function"){if(u=h.alternate,u!==null&&hf(u,h,x,!0),h=fi.current,h!==null){switch(h.tag){case 13:return Qi===null?Bm():h.alternate===null&&en===0&&(en=3),h.flags&=-257,h.flags|=65536,h.lanes=x,p===zp?h.flags|=16384:(u=h.updateQueue,u===null?h.updateQueue=new Set([p]):u.add(p),Fm(o,p,x)),!1;case 22:return h.flags|=65536,p===zp?h.flags|=16384:(u=h.updateQueue,u===null?(u={transitions:null,markerInstances:null,retryQueue:new Set([p])},h.updateQueue=u):(h=u.retryQueue,h===null?u.retryQueue=new Set([p]):h.add(p)),Fm(o,p,x)),!1}throw Error(r(435,h.tag))}return Fm(o,p,x),Bm(),!1}if(me)return u=fi.current,u!==null?((u.flags&65536)===0&&(u.flags|=256),u.flags|=65536,u.lanes=x,p!==kp&&(o=Error(r(422),{cause:p}),ff(oi(o,h)))):(p!==kp&&(u=Error(r(423),{cause:p}),ff(oi(u,h))),o=o.current.alternate,o.flags|=65536,x&=-x,o.lanes|=x,p=oi(p,h),x=dm(o.stateNode,p,x),$p(o,x),en!==4&&(en=2)),!1;var E=Error(r(520),{cause:p});if(E=oi(E,h),Mf===null?Mf=[E]:Mf.push(E),en!==4&&(en=2),u===null)return!0;p=oi(p,h),h=u;do{switch(h.tag){case 3:return h.flags|=65536,o=x&-x,h.lanes|=o,o=dm(h.stateNode,p,o),$p(h,o),!1;case 1:if(u=h.type,E=h.stateNode,(h.flags&128)===0&&(typeof u.getDerivedStateFromError=="function"||E!==null&&typeof E.componentDidCatch=="function"&&(Fs===null||!Fs.has(E))))return h.flags|=65536,x&=-x,h.lanes|=x,x=jA(x),UA(x,o,h,p),$p(h,x),!1}h=h.return}while(h!==null);return!1}var zA=Error(r(461)),Vn=!1;function Kn(o,u,h,p){u.child=o===null?MA(u,null,h,p):_u(u,o.child,h,p)}function HA(o,u,h,p,x){h=h.render;var E=u.ref;if("ref"in p){var L={};for(var U in p)U!=="ref"&&(L[U]=p[U])}else L=p;return il(u),p=Kp(o,u,h,L,E,x),U=Zp(),o!==null&&!Vn?(Qp(o,u,x),ja(o,u,x)):(me&&U&&Np(u),u.flags|=1,Kn(o,u,p,x),u.child)}function GA(o,u,h,p,x){if(o===null){var E=h.type;return typeof E=="function"&&!Dp(E)&&E.defaultProps===void 0&&h.compare===null?(u.tag=15,u.type=E,$A(o,u,E,p,x)):(o=qd(h.type,null,p,u,u.mode,x),o.ref=u.ref,o.return=u,u.child=o)}if(E=o.child,!Am(o,x)){var L=E.memoizedProps;if(h=h.compare,h=h!==null?h:of,h(L,p)&&o.ref===u.ref)return ja(o,u,x)}return u.flags|=1,o=Na(E,p),o.ref=u.ref,o.return=u,u.child=o}function $A(o,u,h,p,x){if(o!==null){var E=o.memoizedProps;if(of(E,p)&&o.ref===u.ref)if(Vn=!1,u.pendingProps=p=E,Am(o,x))(o.flags&131072)!==0&&(Vn=!0);else return u.lanes=o.lanes,ja(o,u,x)}return gm(o,u,h,p,x)}function qA(o,u,h){var p=u.pendingProps,x=p.children,E=o!==null?o.memoizedState:null;if(p.mode==="hidden"){if((u.flags&128)!==0){if(p=E!==null?E.baseLanes|h:h,o!==null){for(x=u.child=o.child,E=0;x!==null;)E=E|x.lanes|x.childLanes,x=x.sibling;u.childLanes=E&~p}else u.childLanes=0,u.child=null;return XA(o,u,p,h)}if((h&536870912)!==0)u.memoizedState={baseLanes:0,cachePool:null},o!==null&&Zd(u,E!==null?E.cachePool:null),E!==null?$_(u,E):Xp(),NA(u);else return u.lanes=u.childLanes=536870912,XA(o,u,E!==null?E.baseLanes|h:h,h)}else E!==null?(Zd(u,E.cachePool),$_(u,E),Ns(),u.memoizedState=null):(o!==null&&Zd(u,null),Xp(),Ns());return Kn(o,u,x,h),u.child}function XA(o,u,h,p){var x=Up();return x=x===null?null:{parent:wn._currentValue,pool:x},u.memoizedState={baseLanes:h,cachePool:x},o!==null&&Zd(u,null),Xp(),NA(u),o!==null&&hf(o,u,p,!0),null}function g0(o,u){var h=u.ref;if(h===null)o!==null&&o.ref!==null&&(u.flags|=4194816);else{if(typeof h!="function"&&typeof h!="object")throw Error(r(284));(o===null||o.ref!==h)&&(u.flags|=4194816)}}function gm(o,u,h,p,x){return il(u),h=Kp(o,u,h,p,void 0,x),p=Zp(),o!==null&&!Vn?(Qp(o,u,x),ja(o,u,x)):(me&&p&&Np(u),u.flags|=1,Kn(o,u,h,x),u.child)}function WA(o,u,h,p,x,E){return il(u),u.updateQueue=null,h=X_(u,p,h,x),q_(o),p=Zp(),o!==null&&!Vn?(Qp(o,u,E),ja(o,u,E)):(me&&p&&Np(u),u.flags|=1,Kn(o,u,h,E),u.child)}function YA(o,u,h,p,x){if(il(u),u.stateNode===null){var E=cu,L=h.contextType;typeof L=="object"&&L!==null&&(E=sr(L)),E=new h(p,E),u.memoizedState=E.state!==null&&E.state!==void 0?E.state:null,E.updater=hm,u.stateNode=E,E._reactInternals=u,E=u.stateNode,E.props=p,E.state=u.memoizedState,E.refs={},Hp(u),L=h.contextType,E.context=typeof L=="object"&&L!==null?sr(L):cu,E.state=u.memoizedState,L=h.getDerivedStateFromProps,typeof L=="function"&&(fm(u,h,L,p),E.state=u.memoizedState),typeof h.getDerivedStateFromProps=="function"||typeof E.getSnapshotBeforeUpdate=="function"||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(L=E.state,typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount(),L!==E.state&&hm.enqueueReplaceState(E,E.state,null),xf(u,p,E,x),yf(),E.state=u.memoizedState),typeof E.componentDidMount=="function"&&(u.flags|=4194308),p=!0}else if(o===null){E=u.stateNode;var U=u.memoizedProps,$=ol(h,U);E.props=$;var J=E.context,lt=h.contextType;L=cu,typeof lt=="object"&&lt!==null&&(L=sr(lt));var ht=h.getDerivedStateFromProps;lt=typeof ht=="function"||typeof E.getSnapshotBeforeUpdate=="function",U=u.pendingProps!==U,lt||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(U||J!==L)&&kA(u,E,p,L),Is=!1;var et=u.memoizedState;E.state=et,xf(u,p,E,x),yf(),J=u.memoizedState,U||et!==J||Is?(typeof ht=="function"&&(fm(u,h,ht,p),J=u.memoizedState),($=Is||PA(u,h,$,p,et,J,L))?(lt||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount()),typeof E.componentDidMount=="function"&&(u.flags|=4194308)):(typeof E.componentDidMount=="function"&&(u.flags|=4194308),u.memoizedProps=p,u.memoizedState=J),E.props=p,E.state=J,E.context=L,p=$):(typeof E.componentDidMount=="function"&&(u.flags|=4194308),p=!1)}else{E=u.stateNode,Gp(o,u),L=u.memoizedProps,lt=ol(h,L),E.props=lt,ht=u.pendingProps,et=E.context,J=h.contextType,$=cu,typeof J=="object"&&J!==null&&($=sr(J)),U=h.getDerivedStateFromProps,(J=typeof U=="function"||typeof E.getSnapshotBeforeUpdate=="function")||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(L!==ht||et!==$)&&kA(u,E,p,$),Is=!1,et=u.memoizedState,E.state=et,xf(u,p,E,x),yf();var nt=u.memoizedState;L!==ht||et!==nt||Is||o!==null&&o.dependencies!==null&&Yd(o.dependencies)?(typeof U=="function"&&(fm(u,h,U,p),nt=u.memoizedState),(lt=Is||PA(u,h,lt,p,et,nt,$)||o!==null&&o.dependencies!==null&&Yd(o.dependencies))?(J||typeof E.UNSAFE_componentWillUpdate!="function"&&typeof E.componentWillUpdate!="function"||(typeof E.componentWillUpdate=="function"&&E.componentWillUpdate(p,nt,$),typeof E.UNSAFE_componentWillUpdate=="function"&&E.UNSAFE_componentWillUpdate(p,nt,$)),typeof E.componentDidUpdate=="function"&&(u.flags|=4),typeof E.getSnapshotBeforeUpdate=="function"&&(u.flags|=1024)):(typeof E.componentDidUpdate!="function"||L===o.memoizedProps&&et===o.memoizedState||(u.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||L===o.memoizedProps&&et===o.memoizedState||(u.flags|=1024),u.memoizedProps=p,u.memoizedState=nt),E.props=p,E.state=nt,E.context=$,p=lt):(typeof E.componentDidUpdate!="function"||L===o.memoizedProps&&et===o.memoizedState||(u.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||L===o.memoizedProps&&et===o.memoizedState||(u.flags|=1024),p=!1)}return E=p,g0(o,u),p=(u.flags&128)!==0,E||p?(E=u.stateNode,h=p&&typeof h.getDerivedStateFromError!="function"?null:E.render(),u.flags|=1,o!==null&&p?(u.child=_u(u,o.child,null,x),u.child=_u(u,null,h,x)):Kn(o,u,h,x),u.memoizedState=E.state,o=u.child):o=ja(o,u,x),o}function KA(o,u,h,p){return cf(),u.flags|=256,Kn(o,u,h,p),u.child}var pm={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function mm(o){return{baseLanes:o,cachePool:B_()}}function vm(o,u,h){return o=o!==null?o.childLanes&~h:0,u&&(o|=hi),o}function ZA(o,u,h){var p=u.pendingProps,x=!1,E=(u.flags&128)!==0,L;if((L=E)||(L=o!==null&&o.memoizedState===null?!1:(bn.current&2)!==0),L&&(x=!0,u.flags&=-129),L=(u.flags&32)!==0,u.flags&=-33,o===null){if(me){if(x?Ms(u):Ns(),me){var U=tn,$;if($=U){t:{for($=U,U=Zi;$.nodeType!==8;){if(!U){U=null;break t}if($=Ii($.nextSibling),$===null){U=null;break t}}U=$}U!==null?(u.memoizedState={dehydrated:U,treeContext:Jo!==null?{id:Pa,overflow:ka}:null,retryLane:536870912,hydrationErrors:null},$=Ur(18,null,null,0),$.stateNode=U,$.return=u,u.child=$,xr=u,tn=null,$=!0):$=!1}$||nl(u)}if(U=u.memoizedState,U!==null&&(U=U.dehydrated,U!==null))return tv(U)?u.lanes=32:u.lanes=536870912,null;Fa(u)}return U=p.children,p=p.fallback,x?(Ns(),x=u.mode,U=p0({mode:"hidden",children:U},x),p=Qo(p,x,h,null),U.return=u,p.return=u,U.sibling=p,u.child=U,x=u.child,x.memoizedState=mm(h),x.childLanes=vm(o,L,h),u.memoizedState=pm,p):(Ms(u),ym(u,U))}if($=o.memoizedState,$!==null&&(U=$.dehydrated,U!==null)){if(E)u.flags&256?(Ms(u),u.flags&=-257,u=xm(o,u,h)):u.memoizedState!==null?(Ns(),u.child=o.child,u.flags|=128,u=null):(Ns(),x=p.fallback,U=u.mode,p=p0({mode:"visible",children:p.children},U),x=Qo(x,U,h,null),x.flags|=2,p.return=u,x.return=u,p.sibling=x,u.child=p,_u(u,o.child,null,h),p=u.child,p.memoizedState=mm(h),p.childLanes=vm(o,L,h),u.memoizedState=pm,u=x);else if(Ms(u),tv(U)){if(L=U.nextSibling&&U.nextSibling.dataset,L)var J=L.dgst;L=J,p=Error(r(419)),p.stack="",p.digest=L,ff({value:p,source:null,stack:null}),u=xm(o,u,h)}else if(Vn||hf(o,u,h,!1),L=(h&o.childLanes)!==0,Vn||L){if(L=Fe,L!==null&&(p=h&-h,p=(p&42)!==0?1:_s(p),p=(p&(L.suspendedLanes|h))!==0?0:p,p!==0&&p!==$.retryLane))throw $.retryLane=p,uu(o,p),qr(L,o,p),zA;U.data==="$?"||Bm(),u=xm(o,u,h)}else U.data==="$?"?(u.flags|=192,u.child=o.child,u=null):(o=$.treeContext,tn=Ii(U.nextSibling),xr=u,me=!0,el=null,Zi=!1,o!==null&&(ui[ci++]=Pa,ui[ci++]=ka,ui[ci++]=Jo,Pa=o.id,ka=o.overflow,Jo=u),u=ym(u,p.children),u.flags|=4096);return u}return x?(Ns(),x=p.fallback,U=u.mode,$=o.child,J=$.sibling,p=Na($,{mode:"hidden",children:p.children}),p.subtreeFlags=$.subtreeFlags&65011712,J!==null?x=Na(J,x):(x=Qo(x,U,h,null),x.flags|=2),x.return=u,p.return=u,p.sibling=x,u.child=p,p=x,x=u.child,U=o.child.memoizedState,U===null?U=mm(h):($=U.cachePool,$!==null?(J=wn._currentValue,$=$.parent!==J?{parent:J,pool:J}:$):$=B_(),U={baseLanes:U.baseLanes|h,cachePool:$}),x.memoizedState=U,x.childLanes=vm(o,L,h),u.memoizedState=pm,p):(Ms(u),h=o.child,o=h.sibling,h=Na(h,{mode:"visible",children:p.children}),h.return=u,h.sibling=null,o!==null&&(L=u.deletions,L===null?(u.deletions=[o],u.flags|=16):L.push(o)),u.child=h,u.memoizedState=null,h)}function ym(o,u){return u=p0({mode:"visible",children:u},o.mode),u.return=o,o.child=u}function p0(o,u){return o=Ur(22,o,null,u),o.lanes=0,o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},o}function xm(o,u,h){return _u(u,o.child,null,h),o=ym(u,u.pendingProps.children),o.flags|=2,u.memoizedState=null,o}function QA(o,u,h){o.lanes|=u;var p=o.alternate;p!==null&&(p.lanes|=u),Bp(o.return,u,h)}function _m(o,u,h,p,x){var E=o.memoizedState;E===null?o.memoizedState={isBackwards:u,rendering:null,renderingStartTime:0,last:p,tail:h,tailMode:x}:(E.isBackwards=u,E.rendering=null,E.renderingStartTime=0,E.last=p,E.tail=h,E.tailMode=x)}function JA(o,u,h){var p=u.pendingProps,x=p.revealOrder,E=p.tail;if(Kn(o,u,p.children,h),p=bn.current,(p&2)!==0)p=p&1|2,u.flags|=128;else{if(o!==null&&(o.flags&128)!==0)t:for(o=u.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&QA(o,h,u);else if(o.tag===19)QA(o,h,u);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===u)break t;for(;o.sibling===null;){if(o.return===null||o.return===u)break t;o=o.return}o.sibling.return=o.return,o=o.sibling}p&=1}switch(Et(bn,p),x){case"forwards":for(h=u.child,x=null;h!==null;)o=h.alternate,o!==null&&f0(o)===null&&(x=h),h=h.sibling;h=x,h===null?(x=u.child,u.child=null):(x=h.sibling,h.sibling=null),_m(u,!1,x,h,E);break;case"backwards":for(h=null,x=u.child,u.child=null;x!==null;){if(o=x.alternate,o!==null&&f0(o)===null){u.child=x;break}o=x.sibling,x.sibling=h,h=x,x=o}_m(u,!0,h,null,E);break;case"together":_m(u,!1,null,null,void 0);break;default:u.memoizedState=null}return u.child}function ja(o,u,h){if(o!==null&&(u.dependencies=o.dependencies),Vs|=u.lanes,(h&u.childLanes)===0)if(o!==null){if(hf(o,u,h,!1),(h&u.childLanes)===0)return null}else return null;if(o!==null&&u.child!==o.child)throw Error(r(153));if(u.child!==null){for(o=u.child,h=Na(o,o.pendingProps),u.child=h,h.return=u;o.sibling!==null;)o=o.sibling,h=h.sibling=Na(o,o.pendingProps),h.return=u;h.sibling=null}return u.child}function Am(o,u){return(o.lanes&u)!==0?!0:(o=o.dependencies,!!(o!==null&&Yd(o)))}function Q6(o,u,h){switch(u.tag){case 3:Ke(u,u.stateNode.containerInfo),Cs(u,wn,o.memoizedState.cache),cf();break;case 27:case 5:wt(u);break;case 4:Ke(u,u.stateNode.containerInfo);break;case 10:Cs(u,u.type,u.memoizedProps.value);break;case 13:var p=u.memoizedState;if(p!==null)return p.dehydrated!==null?(Ms(u),u.flags|=128,null):(h&u.child.childLanes)!==0?ZA(o,u,h):(Ms(u),o=ja(o,u,h),o!==null?o.sibling:null);Ms(u);break;case 19:var x=(o.flags&128)!==0;if(p=(h&u.childLanes)!==0,p||(hf(o,u,h,!1),p=(h&u.childLanes)!==0),x){if(p)return JA(o,u,h);u.flags|=128}if(x=u.memoizedState,x!==null&&(x.rendering=null,x.tail=null,x.lastEffect=null),Et(bn,bn.current),p)break;return null;case 22:case 23:return u.lanes=0,qA(o,u,h);case 24:Cs(u,wn,o.memoizedState.cache)}return ja(o,u,h)}function tE(o,u,h){if(o!==null)if(o.memoizedProps!==u.pendingProps)Vn=!0;else{if(!Am(o,h)&&(u.flags&128)===0)return Vn=!1,Q6(o,u,h);Vn=(o.flags&131072)!==0}else Vn=!1,me&&(u.flags&1048576)!==0&&D_(u,Wd,u.index);switch(u.lanes=0,u.tag){case 16:t:{o=u.pendingProps;var p=u.elementType,x=p._init;if(p=x(p._payload),u.type=p,typeof p=="function")Dp(p)?(o=ol(p,o),u.tag=1,u=YA(null,u,p,o,h)):(u.tag=0,u=gm(null,u,p,o,h));else{if(p!=null){if(x=p.$$typeof,x===M){u.tag=11,u=HA(null,u,p,o,h);break t}else if(x===O){u.tag=14,u=GA(null,u,p,o,h);break t}}throw u=rt(p)||p,Error(r(306,u,""))}}return u;case 0:return gm(o,u,u.type,u.pendingProps,h);case 1:return p=u.type,x=ol(p,u.pendingProps),YA(o,u,p,x,h);case 3:t:{if(Ke(u,u.stateNode.containerInfo),o===null)throw Error(r(387));p=u.pendingProps;var E=u.memoizedState;x=E.element,Gp(o,u),xf(u,p,null,h);var L=u.memoizedState;if(p=L.cache,Cs(u,wn,p),p!==E.cache&&Vp(u,[wn],h,!0),yf(),p=L.element,E.isDehydrated)if(E={element:p,isDehydrated:!1,cache:L.cache},u.updateQueue.baseState=E,u.memoizedState=E,u.flags&256){u=KA(o,u,p,h);break t}else if(p!==x){x=oi(Error(r(424)),u),ff(x),u=KA(o,u,p,h);break t}else{switch(o=u.stateNode.containerInfo,o.nodeType){case 9:o=o.body;break;default:o=o.nodeName==="HTML"?o.ownerDocument.body:o}for(tn=Ii(o.firstChild),xr=u,me=!0,el=null,Zi=!0,h=MA(u,null,p,h),u.child=h;h;)h.flags=h.flags&-3|4096,h=h.sibling}else{if(cf(),p===x){u=ja(o,u,h);break t}Kn(o,u,p,h)}u=u.child}return u;case 26:return g0(o,u),o===null?(h=iw(u.type,null,u.pendingProps,null))?u.memoizedState=h:me||(h=u.type,o=u.pendingProps,p=R0(pe.current).createElement(h),p[_n]=u,p[cn]=o,Qn(p,h,o),nn(p),u.stateNode=p):u.memoizedState=iw(u.type,o.memoizedProps,u.pendingProps,o.memoizedState),null;case 27:return wt(u),o===null&&me&&(p=u.stateNode=ew(u.type,u.pendingProps,pe.current),xr=u,Zi=!0,x=tn,zs(u.type)?(ev=x,tn=Ii(p.firstChild)):tn=x),Kn(o,u,u.pendingProps.children,h),g0(o,u),o===null&&(u.flags|=4194304),u.child;case 5:return o===null&&me&&((x=p=tn)&&(p=T8(p,u.type,u.pendingProps,Zi),p!==null?(u.stateNode=p,xr=u,tn=Ii(p.firstChild),Zi=!1,x=!0):x=!1),x||nl(u)),wt(u),x=u.type,E=u.pendingProps,L=o!==null?o.memoizedProps:null,p=E.children,Zm(x,E)?p=null:L!==null&&Zm(x,L)&&(u.flags|=32),u.memoizedState!==null&&(x=Kp(o,u,G6,null,null,h),Uf._currentValue=x),g0(o,u),Kn(o,u,p,h),u.child;case 6:return o===null&&me&&((o=h=tn)&&(h=C8(h,u.pendingProps,Zi),h!==null?(u.stateNode=h,xr=u,tn=null,o=!0):o=!1),o||nl(u)),null;case 13:return ZA(o,u,h);case 4:return Ke(u,u.stateNode.containerInfo),p=u.pendingProps,o===null?u.child=_u(u,null,p,h):Kn(o,u,p,h),u.child;case 11:return HA(o,u,u.type,u.pendingProps,h);case 7:return Kn(o,u,u.pendingProps,h),u.child;case 8:return Kn(o,u,u.pendingProps.children,h),u.child;case 12:return Kn(o,u,u.pendingProps.children,h),u.child;case 10:return p=u.pendingProps,Cs(u,u.type,p.value),Kn(o,u,p.children,h),u.child;case 9:return x=u.type._context,p=u.pendingProps.children,il(u),x=sr(x),p=p(x),u.flags|=1,Kn(o,u,p,h),u.child;case 14:return GA(o,u,u.type,u.pendingProps,h);case 15:return $A(o,u,u.type,u.pendingProps,h);case 19:return JA(o,u,h);case 31:return p=u.pendingProps,h=u.mode,p={mode:p.mode,children:p.children},o===null?(h=p0(p,h),h.ref=u.ref,u.child=h,h.return=u,u=h):(h=Na(o.child,p),h.ref=u.ref,u.child=h,h.return=u,u=h),u;case 22:return qA(o,u,h);case 24:return il(u),p=sr(wn),o===null?(x=Up(),x===null&&(x=Fe,E=Fp(),x.pooledCache=E,E.refCount++,E!==null&&(x.pooledCacheLanes|=h),x=E),u.memoizedState={parent:p,cache:x},Hp(u),Cs(u,wn,x)):((o.lanes&h)!==0&&(Gp(o,u),xf(u,null,null,h),yf()),x=o.memoizedState,E=u.memoizedState,x.parent!==p?(x={parent:p,cache:p},u.memoizedState=x,u.lanes===0&&(u.memoizedState=u.updateQueue.baseState=x),Cs(u,wn,p)):(p=E.cache,Cs(u,wn,p),p!==x.cache&&Vp(u,[wn],h,!0))),Kn(o,u,u.pendingProps.children,h),u.child;case 29:throw u.pendingProps}throw Error(r(156,u.tag))}function Ua(o){o.flags|=4}function eE(o,u){if(u.type!=="stylesheet"||(u.state.loading&4)!==0)o.flags&=-16777217;else if(o.flags|=16777216,!uw(u)){if(u=fi.current,u!==null&&((ae&4194048)===ae?Qi!==null:(ae&62914560)!==ae&&(ae&536870912)===0||u!==Qi))throw mf=zp,V_;o.flags|=8192}}function m0(o,u){u!==null&&(o.flags|=4),o.flags&16384&&(u=o.tag!==22?zc():536870912,o.lanes|=u,bu|=u)}function Tf(o,u){if(!me)switch(o.tailMode){case"hidden":u=o.tail;for(var h=null;u!==null;)u.alternate!==null&&(h=u),u=u.sibling;h===null?o.tail=null:h.sibling=null;break;case"collapsed":h=o.tail;for(var p=null;h!==null;)h.alternate!==null&&(p=h),h=h.sibling;p===null?u||o.tail===null?o.tail=null:o.tail.sibling=null:p.sibling=null}}function Qe(o){var u=o.alternate!==null&&o.alternate.child===o.child,h=0,p=0;if(u)for(var x=o.child;x!==null;)h|=x.lanes|x.childLanes,p|=x.subtreeFlags&65011712,p|=x.flags&65011712,x.return=o,x=x.sibling;else for(x=o.child;x!==null;)h|=x.lanes|x.childLanes,p|=x.subtreeFlags,p|=x.flags,x.return=o,x=x.sibling;return o.subtreeFlags|=p,o.childLanes=h,u}function J6(o,u,h){var p=u.pendingProps;switch(Pp(u),u.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Qe(u),null;case 1:return Qe(u),null;case 3:return h=u.stateNode,p=null,o!==null&&(p=o.memoizedState.cache),u.memoizedState.cache!==p&&(u.flags|=2048),Ba(wn),ft(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(o===null||o.child===null)&&(uf(u)?Ua(u):o===null||o.memoizedState.isDehydrated&&(u.flags&256)===0||(u.flags|=1024,N_())),Qe(u),null;case 26:return h=u.memoizedState,o===null?(Ua(u),h!==null?(Qe(u),eE(u,h)):(Qe(u),u.flags&=-16777217)):h?h!==o.memoizedState?(Ua(u),Qe(u),eE(u,h)):(Qe(u),u.flags&=-16777217):(o.memoizedProps!==p&&Ua(u),Qe(u),u.flags&=-16777217),null;case 27:Rt(u),h=pe.current;var x=u.type;if(o!==null&&u.stateNode!=null)o.memoizedProps!==p&&Ua(u);else{if(!p){if(u.stateNode===null)throw Error(r(166));return Qe(u),null}o=zt.current,uf(u)?O_(u):(o=ew(x,p,h),u.stateNode=o,Ua(u))}return Qe(u),null;case 5:if(Rt(u),h=u.type,o!==null&&u.stateNode!=null)o.memoizedProps!==p&&Ua(u);else{if(!p){if(u.stateNode===null)throw Error(r(166));return Qe(u),null}if(o=zt.current,uf(u))O_(u);else{switch(x=R0(pe.current),o){case 1:o=x.createElementNS("http://www.w3.org/2000/svg",h);break;case 2:o=x.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;default:switch(h){case"svg":o=x.createElementNS("http://www.w3.org/2000/svg",h);break;case"math":o=x.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;case"script":o=x.createElement("div"),o.innerHTML="<script><\/script>",o=o.removeChild(o.firstChild);break;case"select":o=typeof p.is=="string"?x.createElement("select",{is:p.is}):x.createElement("select"),p.multiple?o.multiple=!0:p.size&&(o.size=p.size);break;default:o=typeof p.is=="string"?x.createElement(h,{is:p.is}):x.createElement(h)}}o[_n]=u,o[cn]=p;t:for(x=u.child;x!==null;){if(x.tag===5||x.tag===6)o.appendChild(x.stateNode);else if(x.tag!==4&&x.tag!==27&&x.child!==null){x.child.return=x,x=x.child;continue}if(x===u)break t;for(;x.sibling===null;){if(x.return===null||x.return===u)break t;x=x.return}x.sibling.return=x.return,x=x.sibling}u.stateNode=o;t:switch(Qn(o,h,p),h){case"button":case"input":case"select":case"textarea":o=!!p.autoFocus;break t;case"img":o=!0;break t;default:o=!1}o&&Ua(u)}}return Qe(u),u.flags&=-16777217,null;case 6:if(o&&u.stateNode!=null)o.memoizedProps!==p&&Ua(u);else{if(typeof p!="string"&&u.stateNode===null)throw Error(r(166));if(o=pe.current,uf(u)){if(o=u.stateNode,h=u.memoizedProps,p=null,x=xr,x!==null)switch(x.tag){case 27:case 5:p=x.memoizedProps}o[_n]=u,o=!!(o.nodeValue===h||p!==null&&p.suppressHydrationWarning===!0||WE(o.nodeValue,h)),o||nl(u)}else o=R0(o).createTextNode(p),o[_n]=u,u.stateNode=o}return Qe(u),null;case 13:if(p=u.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(x=uf(u),p!==null&&p.dehydrated!==null){if(o===null){if(!x)throw Error(r(318));if(x=u.memoizedState,x=x!==null?x.dehydrated:null,!x)throw Error(r(317));x[_n]=u}else cf(),(u.flags&128)===0&&(u.memoizedState=null),u.flags|=4;Qe(u),x=!1}else x=N_(),o!==null&&o.memoizedState!==null&&(o.memoizedState.hydrationErrors=x),x=!0;if(!x)return u.flags&256?(Fa(u),u):(Fa(u),null)}if(Fa(u),(u.flags&128)!==0)return u.lanes=h,u;if(h=p!==null,o=o!==null&&o.memoizedState!==null,h){p=u.child,x=null,p.alternate!==null&&p.alternate.memoizedState!==null&&p.alternate.memoizedState.cachePool!==null&&(x=p.alternate.memoizedState.cachePool.pool);var E=null;p.memoizedState!==null&&p.memoizedState.cachePool!==null&&(E=p.memoizedState.cachePool.pool),E!==x&&(p.flags|=2048)}return h!==o&&h&&(u.child.flags|=8192),m0(u,u.updateQueue),Qe(u),null;case 4:return ft(),o===null&&qm(u.stateNode.containerInfo),Qe(u),null;case 10:return Ba(u.type),Qe(u),null;case 19:if(It(bn),x=u.memoizedState,x===null)return Qe(u),null;if(p=(u.flags&128)!==0,E=x.rendering,E===null)if(p)Tf(x,!1);else{if(en!==0||o!==null&&(o.flags&128)!==0)for(o=u.child;o!==null;){if(E=f0(o),E!==null){for(u.flags|=128,Tf(x,!1),o=E.updateQueue,u.updateQueue=o,m0(u,o),u.subtreeFlags=0,o=h,h=u.child;h!==null;)R_(h,o),h=h.sibling;return Et(bn,bn.current&1|2),u.child}o=o.sibling}x.tail!==null&&$e()>x0&&(u.flags|=128,p=!0,Tf(x,!1),u.lanes=4194304)}else{if(!p)if(o=f0(E),o!==null){if(u.flags|=128,p=!0,o=o.updateQueue,u.updateQueue=o,m0(u,o),Tf(x,!0),x.tail===null&&x.tailMode==="hidden"&&!E.alternate&&!me)return Qe(u),null}else 2*$e()-x.renderingStartTime>x0&&h!==536870912&&(u.flags|=128,p=!0,Tf(x,!1),u.lanes=4194304);x.isBackwards?(E.sibling=u.child,u.child=E):(o=x.last,o!==null?o.sibling=E:u.child=E,x.last=E)}return x.tail!==null?(u=x.tail,x.rendering=u,x.tail=u.sibling,x.renderingStartTime=$e(),u.sibling=null,o=bn.current,Et(bn,p?o&1|2:o&1),u):(Qe(u),null);case 22:case 23:return Fa(u),Wp(),p=u.memoizedState!==null,o!==null?o.memoizedState!==null!==p&&(u.flags|=8192):p&&(u.flags|=8192),p?(h&536870912)!==0&&(u.flags&128)===0&&(Qe(u),u.subtreeFlags&6&&(u.flags|=8192)):Qe(u),h=u.updateQueue,h!==null&&m0(u,h.retryQueue),h=null,o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(h=o.memoizedState.cachePool.pool),p=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(p=u.memoizedState.cachePool.pool),p!==h&&(u.flags|=2048),o!==null&&It(al),null;case 24:return h=null,o!==null&&(h=o.memoizedState.cache),u.memoizedState.cache!==h&&(u.flags|=2048),Ba(wn),Qe(u),null;case 25:return null;case 30:return null}throw Error(r(156,u.tag))}function t8(o,u){switch(Pp(u),u.tag){case 1:return o=u.flags,o&65536?(u.flags=o&-65537|128,u):null;case 3:return Ba(wn),ft(),o=u.flags,(o&65536)!==0&&(o&128)===0?(u.flags=o&-65537|128,u):null;case 26:case 27:case 5:return Rt(u),null;case 13:if(Fa(u),o=u.memoizedState,o!==null&&o.dehydrated!==null){if(u.alternate===null)throw Error(r(340));cf()}return o=u.flags,o&65536?(u.flags=o&-65537|128,u):null;case 19:return It(bn),null;case 4:return ft(),null;case 10:return Ba(u.type),null;case 22:case 23:return Fa(u),Wp(),o!==null&&It(al),o=u.flags,o&65536?(u.flags=o&-65537|128,u):null;case 24:return Ba(wn),null;case 25:return null;default:return null}}function nE(o,u){switch(Pp(u),u.tag){case 3:Ba(wn),ft();break;case 26:case 27:case 5:Rt(u);break;case 4:ft();break;case 13:Fa(u);break;case 19:It(bn);break;case 10:Ba(u.type);break;case 22:case 23:Fa(u),Wp(),o!==null&&It(al);break;case 24:Ba(wn)}}function Cf(o,u){try{var h=u.updateQueue,p=h!==null?h.lastEffect:null;if(p!==null){var x=p.next;h=x;do{if((h.tag&o)===o){p=void 0;var E=h.create,L=h.inst;p=E(),L.destroy=p}h=h.next}while(h!==x)}}catch(U){Le(u,u.return,U)}}function Ps(o,u,h){try{var p=u.updateQueue,x=p!==null?p.lastEffect:null;if(x!==null){var E=x.next;p=E;do{if((p.tag&o)===o){var L=p.inst,U=L.destroy;if(U!==void 0){L.destroy=void 0,x=u;var $=h,J=U;try{J()}catch(lt){Le(x,$,lt)}}}p=p.next}while(p!==E)}}catch(lt){Le(u,u.return,lt)}}function rE(o){var u=o.updateQueue;if(u!==null){var h=o.stateNode;try{G_(u,h)}catch(p){Le(o,o.return,p)}}}function iE(o,u,h){h.props=ol(o.type,o.memoizedProps),h.state=o.memoizedState;try{h.componentWillUnmount()}catch(p){Le(o,u,p)}}function If(o,u){try{var h=o.ref;if(h!==null){switch(o.tag){case 26:case 27:case 5:var p=o.stateNode;break;case 30:p=o.stateNode;break;default:p=o.stateNode}typeof h=="function"?o.refCleanup=h(p):h.current=p}}catch(x){Le(o,u,x)}}function Ji(o,u){var h=o.ref,p=o.refCleanup;if(h!==null)if(typeof p=="function")try{p()}catch(x){Le(o,u,x)}finally{o.refCleanup=null,o=o.alternate,o!=null&&(o.refCleanup=null)}else if(typeof h=="function")try{h(null)}catch(x){Le(o,u,x)}else h.current=null}function aE(o){var u=o.type,h=o.memoizedProps,p=o.stateNode;try{t:switch(u){case"button":case"input":case"select":case"textarea":h.autoFocus&&p.focus();break t;case"img":h.src?p.src=h.src:h.srcSet&&(p.srcset=h.srcSet)}}catch(x){Le(o,o.return,x)}}function Em(o,u,h){try{var p=o.stateNode;A8(p,o.type,h,u),p[cn]=u}catch(x){Le(o,o.return,x)}}function sE(o){return o.tag===5||o.tag===3||o.tag===26||o.tag===27&&zs(o.type)||o.tag===4}function wm(o){t:for(;;){for(;o.sibling===null;){if(o.return===null||sE(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.tag===27&&zs(o.type)||o.flags&2||o.child===null||o.tag===4)continue t;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function bm(o,u,h){var p=o.tag;if(p===5||p===6)o=o.stateNode,u?(h.nodeType===9?h.body:h.nodeName==="HTML"?h.ownerDocument.body:h).insertBefore(o,u):(u=h.nodeType===9?h.body:h.nodeName==="HTML"?h.ownerDocument.body:h,u.appendChild(o),h=h._reactRootContainer,h!=null||u.onclick!==null||(u.onclick=I0));else if(p!==4&&(p===27&&zs(o.type)&&(h=o.stateNode,u=null),o=o.child,o!==null))for(bm(o,u,h),o=o.sibling;o!==null;)bm(o,u,h),o=o.sibling}function v0(o,u,h){var p=o.tag;if(p===5||p===6)o=o.stateNode,u?h.insertBefore(o,u):h.appendChild(o);else if(p!==4&&(p===27&&zs(o.type)&&(h=o.stateNode),o=o.child,o!==null))for(v0(o,u,h),o=o.sibling;o!==null;)v0(o,u,h),o=o.sibling}function oE(o){var u=o.stateNode,h=o.memoizedProps;try{for(var p=o.type,x=u.attributes;x.length;)u.removeAttributeNode(x[0]);Qn(u,p,h),u[_n]=o,u[cn]=h}catch(E){Le(o,o.return,E)}}var za=!1,an=!1,Sm=!1,lE=typeof WeakSet=="function"?WeakSet:Set,Fn=null;function e8(o,u){if(o=o.containerInfo,Ym=k0,o=x_(o),wp(o)){if("selectionStart"in o)var h={start:o.selectionStart,end:o.selectionEnd};else t:{h=(h=o.ownerDocument)&&h.defaultView||window;var p=h.getSelection&&h.getSelection();if(p&&p.rangeCount!==0){h=p.anchorNode;var x=p.anchorOffset,E=p.focusNode;p=p.focusOffset;try{h.nodeType,E.nodeType}catch{h=null;break t}var L=0,U=-1,$=-1,J=0,lt=0,ht=o,et=null;e:for(;;){for(var nt;ht!==h||x!==0&&ht.nodeType!==3||(U=L+x),ht!==E||p!==0&&ht.nodeType!==3||($=L+p),ht.nodeType===3&&(L+=ht.nodeValue.length),(nt=ht.firstChild)!==null;)et=ht,ht=nt;for(;;){if(ht===o)break e;if(et===h&&++J===x&&(U=L),et===E&&++lt===p&&($=L),(nt=ht.nextSibling)!==null)break;ht=et,et=ht.parentNode}ht=nt}h=U===-1||$===-1?null:{start:U,end:$}}else h=null}h=h||{start:0,end:0}}else h=null;for(Km={focusedElem:o,selectionRange:h},k0=!1,Fn=u;Fn!==null;)if(u=Fn,o=u.child,(u.subtreeFlags&1024)!==0&&o!==null)o.return=u,Fn=o;else for(;Fn!==null;){switch(u=Fn,E=u.alternate,o=u.flags,u.tag){case 0:break;case 11:case 15:break;case 1:if((o&1024)!==0&&E!==null){o=void 0,h=u,x=E.memoizedProps,E=E.memoizedState,p=h.stateNode;try{var jt=ol(h.type,x,h.elementType===h.type);o=p.getSnapshotBeforeUpdate(jt,E),p.__reactInternalSnapshotBeforeUpdate=o}catch(Lt){Le(h,h.return,Lt)}}break;case 3:if((o&1024)!==0){if(o=u.stateNode.containerInfo,h=o.nodeType,h===9)Jm(o);else if(h===1)switch(o.nodeName){case"HEAD":case"HTML":case"BODY":Jm(o);break;default:o.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((o&1024)!==0)throw Error(r(163))}if(o=u.sibling,o!==null){o.return=u.return,Fn=o;break}Fn=u.return}}function uE(o,u,h){var p=h.flags;switch(h.tag){case 0:case 11:case 15:ks(o,h),p&4&&Cf(5,h);break;case 1:if(ks(o,h),p&4)if(o=h.stateNode,u===null)try{o.componentDidMount()}catch(L){Le(h,h.return,L)}else{var x=ol(h.type,u.memoizedProps);u=u.memoizedState;try{o.componentDidUpdate(x,u,o.__reactInternalSnapshotBeforeUpdate)}catch(L){Le(h,h.return,L)}}p&64&&rE(h),p&512&&If(h,h.return);break;case 3:if(ks(o,h),p&64&&(o=h.updateQueue,o!==null)){if(u=null,h.child!==null)switch(h.child.tag){case 27:case 5:u=h.child.stateNode;break;case 1:u=h.child.stateNode}try{G_(o,u)}catch(L){Le(h,h.return,L)}}break;case 27:u===null&&p&4&&oE(h);case 26:case 5:ks(o,h),u===null&&p&4&&aE(h),p&512&&If(h,h.return);break;case 12:ks(o,h);break;case 13:ks(o,h),p&4&&hE(o,h),p&64&&(o=h.memoizedState,o!==null&&(o=o.dehydrated,o!==null&&(h=c8.bind(null,h),I8(o,h))));break;case 22:if(p=h.memoizedState!==null||za,!p){u=u!==null&&u.memoizedState!==null||an,x=za;var E=an;za=p,(an=u)&&!E?Ls(o,h,(h.subtreeFlags&8772)!==0):ks(o,h),za=x,an=E}break;case 30:break;default:ks(o,h)}}function cE(o){var u=o.alternate;u!==null&&(o.alternate=null,cE(u)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(u=o.stateNode,u!==null&&ws(u)),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}var We=null,Cr=!1;function Ha(o,u,h){for(h=h.child;h!==null;)fE(o,u,h),h=h.sibling}function fE(o,u,h){if(ce&&typeof ce.onCommitFiberUnmount=="function")try{ce.onCommitFiberUnmount(qe,h)}catch{}switch(h.tag){case 26:an||Ji(h,u),Ha(o,u,h),h.memoizedState?h.memoizedState.count--:h.stateNode&&(h=h.stateNode,h.parentNode.removeChild(h));break;case 27:an||Ji(h,u);var p=We,x=Cr;zs(h.type)&&(We=h.stateNode,Cr=!1),Ha(o,u,h),Bf(h.stateNode),We=p,Cr=x;break;case 5:an||Ji(h,u);case 6:if(p=We,x=Cr,We=null,Ha(o,u,h),We=p,Cr=x,We!==null)if(Cr)try{(We.nodeType===9?We.body:We.nodeName==="HTML"?We.ownerDocument.body:We).removeChild(h.stateNode)}catch(E){Le(h,u,E)}else try{We.removeChild(h.stateNode)}catch(E){Le(h,u,E)}break;case 18:We!==null&&(Cr?(o=We,JE(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,h.stateNode),$f(o)):JE(We,h.stateNode));break;case 4:p=We,x=Cr,We=h.stateNode.containerInfo,Cr=!0,Ha(o,u,h),We=p,Cr=x;break;case 0:case 11:case 14:case 15:an||Ps(2,h,u),an||Ps(4,h,u),Ha(o,u,h);break;case 1:an||(Ji(h,u),p=h.stateNode,typeof p.componentWillUnmount=="function"&&iE(h,u,p)),Ha(o,u,h);break;case 21:Ha(o,u,h);break;case 22:an=(p=an)||h.memoizedState!==null,Ha(o,u,h),an=p;break;default:Ha(o,u,h)}}function hE(o,u){if(u.memoizedState===null&&(o=u.alternate,o!==null&&(o=o.memoizedState,o!==null&&(o=o.dehydrated,o!==null))))try{$f(o)}catch(h){Le(u,u.return,h)}}function n8(o){switch(o.tag){case 13:case 19:var u=o.stateNode;return u===null&&(u=o.stateNode=new lE),u;case 22:return o=o.stateNode,u=o._retryCache,u===null&&(u=o._retryCache=new lE),u;default:throw Error(r(435,o.tag))}}function Tm(o,u){var h=n8(o);u.forEach(function(p){var x=f8.bind(null,o,p);h.has(p)||(h.add(p),p.then(x,x))})}function zr(o,u){var h=u.deletions;if(h!==null)for(var p=0;p<h.length;p++){var x=h[p],E=o,L=u,U=L;t:for(;U!==null;){switch(U.tag){case 27:if(zs(U.type)){We=U.stateNode,Cr=!1;break t}break;case 5:We=U.stateNode,Cr=!1;break t;case 3:case 4:We=U.stateNode.containerInfo,Cr=!0;break t}U=U.return}if(We===null)throw Error(r(160));fE(E,L,x),We=null,Cr=!1,E=x.alternate,E!==null&&(E.return=null),x.return=null}if(u.subtreeFlags&13878)for(u=u.child;u!==null;)dE(u,o),u=u.sibling}var Ci=null;function dE(o,u){var h=o.alternate,p=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:zr(u,o),Hr(o),p&4&&(Ps(3,o,o.return),Cf(3,o),Ps(5,o,o.return));break;case 1:zr(u,o),Hr(o),p&512&&(an||h===null||Ji(h,h.return)),p&64&&za&&(o=o.updateQueue,o!==null&&(p=o.callbacks,p!==null&&(h=o.shared.hiddenCallbacks,o.shared.hiddenCallbacks=h===null?p:h.concat(p))));break;case 26:var x=Ci;if(zr(u,o),Hr(o),p&512&&(an||h===null||Ji(h,h.return)),p&4){var E=h!==null?h.memoizedState:null;if(p=o.memoizedState,h===null)if(p===null)if(o.stateNode===null){t:{p=o.type,h=o.memoizedProps,x=x.ownerDocument||x;e:switch(p){case"title":E=x.getElementsByTagName("title")[0],(!E||E[Lo]||E[_n]||E.namespaceURI==="http://www.w3.org/2000/svg"||E.hasAttribute("itemprop"))&&(E=x.createElement(p),x.head.insertBefore(E,x.querySelector("head > title"))),Qn(E,p,h),E[_n]=o,nn(E),p=E;break t;case"link":var L=ow("link","href",x).get(p+(h.href||""));if(L){for(var U=0;U<L.length;U++)if(E=L[U],E.getAttribute("href")===(h.href==null||h.href===""?null:h.href)&&E.getAttribute("rel")===(h.rel==null?null:h.rel)&&E.getAttribute("title")===(h.title==null?null:h.title)&&E.getAttribute("crossorigin")===(h.crossOrigin==null?null:h.crossOrigin)){L.splice(U,1);break e}}E=x.createElement(p),Qn(E,p,h),x.head.appendChild(E);break;case"meta":if(L=ow("meta","content",x).get(p+(h.content||""))){for(U=0;U<L.length;U++)if(E=L[U],E.getAttribute("content")===(h.content==null?null:""+h.content)&&E.getAttribute("name")===(h.name==null?null:h.name)&&E.getAttribute("property")===(h.property==null?null:h.property)&&E.getAttribute("http-equiv")===(h.httpEquiv==null?null:h.httpEquiv)&&E.getAttribute("charset")===(h.charSet==null?null:h.charSet)){L.splice(U,1);break e}}E=x.createElement(p),Qn(E,p,h),x.head.appendChild(E);break;default:throw Error(r(468,p))}E[_n]=o,nn(E),p=E}o.stateNode=p}else lw(x,o.type,o.stateNode);else o.stateNode=sw(x,p,o.memoizedProps);else E!==p?(E===null?h.stateNode!==null&&(h=h.stateNode,h.parentNode.removeChild(h)):E.count--,p===null?lw(x,o.type,o.stateNode):sw(x,p,o.memoizedProps)):p===null&&o.stateNode!==null&&Em(o,o.memoizedProps,h.memoizedProps)}break;case 27:zr(u,o),Hr(o),p&512&&(an||h===null||Ji(h,h.return)),h!==null&&p&4&&Em(o,o.memoizedProps,h.memoizedProps);break;case 5:if(zr(u,o),Hr(o),p&512&&(an||h===null||Ji(h,h.return)),o.flags&32){x=o.stateNode;try{ri(x,"")}catch(nt){Le(o,o.return,nt)}}p&4&&o.stateNode!=null&&(x=o.memoizedProps,Em(o,x,h!==null?h.memoizedProps:x)),p&1024&&(Sm=!0);break;case 6:if(zr(u,o),Hr(o),p&4){if(o.stateNode===null)throw Error(r(162));p=o.memoizedProps,h=o.stateNode;try{h.nodeValue=p}catch(nt){Le(o,o.return,nt)}}break;case 3:if(M0=null,x=Ci,Ci=D0(u.containerInfo),zr(u,o),Ci=x,Hr(o),p&4&&h!==null&&h.memoizedState.isDehydrated)try{$f(u.containerInfo)}catch(nt){Le(o,o.return,nt)}Sm&&(Sm=!1,gE(o));break;case 4:p=Ci,Ci=D0(o.stateNode.containerInfo),zr(u,o),Hr(o),Ci=p;break;case 12:zr(u,o),Hr(o);break;case 13:zr(u,o),Hr(o),o.child.flags&8192&&o.memoizedState!==null!=(h!==null&&h.memoizedState!==null)&&(Mm=$e()),p&4&&(p=o.updateQueue,p!==null&&(o.updateQueue=null,Tm(o,p)));break;case 22:x=o.memoizedState!==null;var $=h!==null&&h.memoizedState!==null,J=za,lt=an;if(za=J||x,an=lt||$,zr(u,o),an=lt,za=J,Hr(o),p&8192)t:for(u=o.stateNode,u._visibility=x?u._visibility&-2:u._visibility|1,x&&(h===null||$||za||an||ll(o)),h=null,u=o;;){if(u.tag===5||u.tag===26){if(h===null){$=h=u;try{if(E=$.stateNode,x)L=E.style,typeof L.setProperty=="function"?L.setProperty("display","none","important"):L.display="none";else{U=$.stateNode;var ht=$.memoizedProps.style,et=ht!=null&&ht.hasOwnProperty("display")?ht.display:null;U.style.display=et==null||typeof et=="boolean"?"":(""+et).trim()}}catch(nt){Le($,$.return,nt)}}}else if(u.tag===6){if(h===null){$=u;try{$.stateNode.nodeValue=x?"":$.memoizedProps}catch(nt){Le($,$.return,nt)}}}else if((u.tag!==22&&u.tag!==23||u.memoizedState===null||u===o)&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===o)break t;for(;u.sibling===null;){if(u.return===null||u.return===o)break t;h===u&&(h=null),u=u.return}h===u&&(h=null),u.sibling.return=u.return,u=u.sibling}p&4&&(p=o.updateQueue,p!==null&&(h=p.retryQueue,h!==null&&(p.retryQueue=null,Tm(o,h))));break;case 19:zr(u,o),Hr(o),p&4&&(p=o.updateQueue,p!==null&&(o.updateQueue=null,Tm(o,p)));break;case 30:break;case 21:break;default:zr(u,o),Hr(o)}}function Hr(o){var u=o.flags;if(u&2){try{for(var h,p=o.return;p!==null;){if(sE(p)){h=p;break}p=p.return}if(h==null)throw Error(r(160));switch(h.tag){case 27:var x=h.stateNode,E=wm(o);v0(o,E,x);break;case 5:var L=h.stateNode;h.flags&32&&(ri(L,""),h.flags&=-33);var U=wm(o);v0(o,U,L);break;case 3:case 4:var $=h.stateNode.containerInfo,J=wm(o);bm(o,J,$);break;default:throw Error(r(161))}}catch(lt){Le(o,o.return,lt)}o.flags&=-3}u&4096&&(o.flags&=-4097)}function gE(o){if(o.subtreeFlags&1024)for(o=o.child;o!==null;){var u=o;gE(u),u.tag===5&&u.flags&1024&&u.stateNode.reset(),o=o.sibling}}function ks(o,u){if(u.subtreeFlags&8772)for(u=u.child;u!==null;)uE(o,u.alternate,u),u=u.sibling}function ll(o){for(o=o.child;o!==null;){var u=o;switch(u.tag){case 0:case 11:case 14:case 15:Ps(4,u,u.return),ll(u);break;case 1:Ji(u,u.return);var h=u.stateNode;typeof h.componentWillUnmount=="function"&&iE(u,u.return,h),ll(u);break;case 27:Bf(u.stateNode);case 26:case 5:Ji(u,u.return),ll(u);break;case 22:u.memoizedState===null&&ll(u);break;case 30:ll(u);break;default:ll(u)}o=o.sibling}}function Ls(o,u,h){for(h=h&&(u.subtreeFlags&8772)!==0,u=u.child;u!==null;){var p=u.alternate,x=o,E=u,L=E.flags;switch(E.tag){case 0:case 11:case 15:Ls(x,E,h),Cf(4,E);break;case 1:if(Ls(x,E,h),p=E,x=p.stateNode,typeof x.componentDidMount=="function")try{x.componentDidMount()}catch(J){Le(p,p.return,J)}if(p=E,x=p.updateQueue,x!==null){var U=p.stateNode;try{var $=x.shared.hiddenCallbacks;if($!==null)for(x.shared.hiddenCallbacks=null,x=0;x<$.length;x++)H_($[x],U)}catch(J){Le(p,p.return,J)}}h&&L&64&&rE(E),If(E,E.return);break;case 27:oE(E);case 26:case 5:Ls(x,E,h),h&&p===null&&L&4&&aE(E),If(E,E.return);break;case 12:Ls(x,E,h);break;case 13:Ls(x,E,h),h&&L&4&&hE(x,E);break;case 22:E.memoizedState===null&&Ls(x,E,h),If(E,E.return);break;case 30:break;default:Ls(x,E,h)}u=u.sibling}}function Cm(o,u){var h=null;o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(h=o.memoizedState.cachePool.pool),o=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(o=u.memoizedState.cachePool.pool),o!==h&&(o!=null&&o.refCount++,h!=null&&df(h))}function Im(o,u){o=null,u.alternate!==null&&(o=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==o&&(u.refCount++,o!=null&&df(o))}function ta(o,u,h,p){if(u.subtreeFlags&10256)for(u=u.child;u!==null;)pE(o,u,h,p),u=u.sibling}function pE(o,u,h,p){var x=u.flags;switch(u.tag){case 0:case 11:case 15:ta(o,u,h,p),x&2048&&Cf(9,u);break;case 1:ta(o,u,h,p);break;case 3:ta(o,u,h,p),x&2048&&(o=null,u.alternate!==null&&(o=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==o&&(u.refCount++,o!=null&&df(o)));break;case 12:if(x&2048){ta(o,u,h,p),o=u.stateNode;try{var E=u.memoizedProps,L=E.id,U=E.onPostCommit;typeof U=="function"&&U(L,u.alternate===null?"mount":"update",o.passiveEffectDuration,-0)}catch($){Le(u,u.return,$)}}else ta(o,u,h,p);break;case 13:ta(o,u,h,p);break;case 23:break;case 22:E=u.stateNode,L=u.alternate,u.memoizedState!==null?E._visibility&2?ta(o,u,h,p):Rf(o,u):E._visibility&2?ta(o,u,h,p):(E._visibility|=2,Au(o,u,h,p,(u.subtreeFlags&10256)!==0)),x&2048&&Cm(L,u);break;case 24:ta(o,u,h,p),x&2048&&Im(u.alternate,u);break;default:ta(o,u,h,p)}}function Au(o,u,h,p,x){for(x=x&&(u.subtreeFlags&10256)!==0,u=u.child;u!==null;){var E=o,L=u,U=h,$=p,J=L.flags;switch(L.tag){case 0:case 11:case 15:Au(E,L,U,$,x),Cf(8,L);break;case 23:break;case 22:var lt=L.stateNode;L.memoizedState!==null?lt._visibility&2?Au(E,L,U,$,x):Rf(E,L):(lt._visibility|=2,Au(E,L,U,$,x)),x&&J&2048&&Cm(L.alternate,L);break;case 24:Au(E,L,U,$,x),x&&J&2048&&Im(L.alternate,L);break;default:Au(E,L,U,$,x)}u=u.sibling}}function Rf(o,u){if(u.subtreeFlags&10256)for(u=u.child;u!==null;){var h=o,p=u,x=p.flags;switch(p.tag){case 22:Rf(h,p),x&2048&&Cm(p.alternate,p);break;case 24:Rf(h,p),x&2048&&Im(p.alternate,p);break;default:Rf(h,p)}u=u.sibling}}var Df=8192;function Eu(o){if(o.subtreeFlags&Df)for(o=o.child;o!==null;)mE(o),o=o.sibling}function mE(o){switch(o.tag){case 26:Eu(o),o.flags&Df&&o.memoizedState!==null&&U8(Ci,o.memoizedState,o.memoizedProps);break;case 5:Eu(o);break;case 3:case 4:var u=Ci;Ci=D0(o.stateNode.containerInfo),Eu(o),Ci=u;break;case 22:o.memoizedState===null&&(u=o.alternate,u!==null&&u.memoizedState!==null?(u=Df,Df=16777216,Eu(o),Df=u):Eu(o));break;default:Eu(o)}}function vE(o){var u=o.alternate;if(u!==null&&(o=u.child,o!==null)){u.child=null;do u=o.sibling,o.sibling=null,o=u;while(o!==null)}}function Of(o){var u=o.deletions;if((o.flags&16)!==0){if(u!==null)for(var h=0;h<u.length;h++){var p=u[h];Fn=p,xE(p,o)}vE(o)}if(o.subtreeFlags&10256)for(o=o.child;o!==null;)yE(o),o=o.sibling}function yE(o){switch(o.tag){case 0:case 11:case 15:Of(o),o.flags&2048&&Ps(9,o,o.return);break;case 3:Of(o);break;case 12:Of(o);break;case 22:var u=o.stateNode;o.memoizedState!==null&&u._visibility&2&&(o.return===null||o.return.tag!==13)?(u._visibility&=-3,y0(o)):Of(o);break;default:Of(o)}}function y0(o){var u=o.deletions;if((o.flags&16)!==0){if(u!==null)for(var h=0;h<u.length;h++){var p=u[h];Fn=p,xE(p,o)}vE(o)}for(o=o.child;o!==null;){switch(u=o,u.tag){case 0:case 11:case 15:Ps(8,u,u.return),y0(u);break;case 22:h=u.stateNode,h._visibility&2&&(h._visibility&=-3,y0(u));break;default:y0(u)}o=o.sibling}}function xE(o,u){for(;Fn!==null;){var h=Fn;switch(h.tag){case 0:case 11:case 15:Ps(8,h,u);break;case 23:case 22:if(h.memoizedState!==null&&h.memoizedState.cachePool!==null){var p=h.memoizedState.cachePool.pool;p!=null&&p.refCount++}break;case 24:df(h.memoizedState.cache)}if(p=h.child,p!==null)p.return=h,Fn=p;else t:for(h=o;Fn!==null;){p=Fn;var x=p.sibling,E=p.return;if(cE(p),p===h){Fn=null;break t}if(x!==null){x.return=E,Fn=x;break t}Fn=E}}}var r8={getCacheForType:function(o){var u=sr(wn),h=u.data.get(o);return h===void 0&&(h=o(),u.data.set(o,h)),h}},i8=typeof WeakMap=="function"?WeakMap:Map,Se=0,Fe=null,Qt=null,ae=0,Te=0,Gr=null,Bs=!1,wu=!1,Rm=!1,Ga=0,en=0,Vs=0,ul=0,Dm=0,hi=0,bu=0,Mf=null,Ir=null,Om=!1,Mm=0,x0=1/0,_0=null,Fs=null,Zn=0,js=null,Su=null,Tu=0,Nm=0,Pm=null,_E=null,Nf=0,km=null;function $r(){if((Se&2)!==0&&ae!==0)return ae&-ae;if(q.T!==null){var o=du;return o!==0?o:zm()}return As()}function AE(){hi===0&&(hi=(ae&536870912)===0||me?Uc():536870912);var o=fi.current;return o!==null&&(o.flags|=32),hi}function qr(o,u,h){(o===Fe&&(Te===2||Te===9)||o.cancelPendingCommit!==null)&&(Cu(o,0),Us(o,ae,hi,!1)),Ea(o,h),((Se&2)===0||o!==Fe)&&(o===Fe&&((Se&2)===0&&(ul|=h),en===4&&Us(o,ae,hi,!1)),ea(o))}function EE(o,u,h){if((Se&6)!==0)throw Error(r(327));var p=!h&&(u&124)===0&&(u&o.expiredLanes)===0||ko(o,u),x=p?o8(o,u):Vm(o,u,!0),E=p;do{if(x===0){wu&&!p&&Us(o,u,0,!1);break}else{if(h=o.current.alternate,E&&!a8(h)){x=Vm(o,u,!1),E=!1;continue}if(x===2){if(E=u,o.errorRecoveryDisabledLanes&E)var L=0;else L=o.pendingLanes&-536870913,L=L!==0?L:L&536870912?536870912:0;if(L!==0){u=L;t:{var U=o;x=Mf;var $=U.current.memoizedState.isDehydrated;if($&&(Cu(U,L).flags|=256),L=Vm(U,L,!1),L!==2){if(Rm&&!$){U.errorRecoveryDisabledLanes|=E,ul|=E,x=4;break t}E=Ir,Ir=x,E!==null&&(Ir===null?Ir=E:Ir.push.apply(Ir,E))}x=L}if(E=!1,x!==2)continue}}if(x===1){Cu(o,0),Us(o,u,0,!0);break}t:{switch(p=o,E=x,E){case 0:case 1:throw Error(r(345));case 4:if((u&4194048)!==u)break;case 6:Us(p,u,hi,!Bs);break t;case 2:Ir=null;break;case 3:case 5:break;default:throw Error(r(329))}if((u&62914560)===u&&(x=Mm+300-$e(),10<x)){if(Us(p,u,hi,!Bs),Gl(p,0,!0)!==0)break t;p.timeoutHandle=ZE(wE.bind(null,p,h,Ir,_0,Om,u,hi,ul,bu,Bs,E,2,-0,0),x);break t}wE(p,h,Ir,_0,Om,u,hi,ul,bu,Bs,E,0,-0,0)}}break}while(!0);ea(o)}function wE(o,u,h,p,x,E,L,U,$,J,lt,ht,et,nt){if(o.timeoutHandle=-1,ht=u.subtreeFlags,(ht&8192||(ht&16785408)===16785408)&&(jf={stylesheets:null,count:0,unsuspend:j8},mE(u),ht=z8(),ht!==null)){o.cancelPendingCommit=ht(DE.bind(null,o,u,E,h,p,x,L,U,$,lt,1,et,nt)),Us(o,E,L,!J);return}DE(o,u,E,h,p,x,L,U,$)}function a8(o){for(var u=o;;){var h=u.tag;if((h===0||h===11||h===15)&&u.flags&16384&&(h=u.updateQueue,h!==null&&(h=h.stores,h!==null)))for(var p=0;p<h.length;p++){var x=h[p],E=x.getSnapshot;x=x.value;try{if(!jr(E(),x))return!1}catch{return!1}}if(h=u.child,u.subtreeFlags&16384&&h!==null)h.return=u,u=h;else{if(u===o)break;for(;u.sibling===null;){if(u.return===null||u.return===o)return!0;u=u.return}u.sibling.return=u.return,u=u.sibling}}return!0}function Us(o,u,h,p){u&=~Dm,u&=~ul,o.suspendedLanes|=u,o.pingedLanes&=~u,p&&(o.warmLanes|=u),p=o.expirationTimes;for(var x=u;0<x;){var E=31-ar(x),L=1<<E;p[E]=-1,x&=~L}h!==0&&ji(o,h,u)}function A0(){return(Se&6)===0?(Pf(0),!1):!0}function Lm(){if(Qt!==null){if(Te===0)var o=Qt.return;else o=Qt,La=rl=null,Jp(o),xu=null,bf=0,o=Qt;for(;o!==null;)nE(o.alternate,o),o=o.return;Qt=null}}function Cu(o,u){var h=o.timeoutHandle;h!==-1&&(o.timeoutHandle=-1,w8(h)),h=o.cancelPendingCommit,h!==null&&(o.cancelPendingCommit=null,h()),Lm(),Fe=o,Qt=h=Na(o.current,null),ae=u,Te=0,Gr=null,Bs=!1,wu=ko(o,u),Rm=!1,bu=hi=Dm=ul=Vs=en=0,Ir=Mf=null,Om=!1,(u&8)!==0&&(u|=u&32);var p=o.entangledLanes;if(p!==0)for(o=o.entanglements,p&=u;0<p;){var x=31-ar(p),E=1<<x;u|=o[x],p&=~E}return Ga=u,Hd(),h}function bE(o,u){Xt=null,q.H=l0,u===pf||u===Qd?(u=U_(),Te=3):u===V_?(u=U_(),Te=4):Te=u===zA?8:u!==null&&typeof u=="object"&&typeof u.then=="function"?6:1,Gr=u,Qt===null&&(en=1,d0(o,oi(u,o.current)))}function SE(){var o=q.H;return q.H=l0,o===null?l0:o}function TE(){var o=q.A;return q.A=r8,o}function Bm(){en=4,Bs||(ae&4194048)!==ae&&fi.current!==null||(wu=!0),(Vs&134217727)===0&&(ul&134217727)===0||Fe===null||Us(Fe,ae,hi,!1)}function Vm(o,u,h){var p=Se;Se|=2;var x=SE(),E=TE();(Fe!==o||ae!==u)&&(_0=null,Cu(o,u)),u=!1;var L=en;t:do try{if(Te!==0&&Qt!==null){var U=Qt,$=Gr;switch(Te){case 8:Lm(),L=6;break t;case 3:case 2:case 9:case 6:fi.current===null&&(u=!0);var J=Te;if(Te=0,Gr=null,Iu(o,U,$,J),h&&wu){L=0;break t}break;default:J=Te,Te=0,Gr=null,Iu(o,U,$,J)}}s8(),L=en;break}catch(lt){bE(o,lt)}while(!0);return u&&o.shellSuspendCounter++,La=rl=null,Se=p,q.H=x,q.A=E,Qt===null&&(Fe=null,ae=0,Hd()),L}function s8(){for(;Qt!==null;)CE(Qt)}function o8(o,u){var h=Se;Se|=2;var p=SE(),x=TE();Fe!==o||ae!==u?(_0=null,x0=$e()+500,Cu(o,u)):wu=ko(o,u);t:do try{if(Te!==0&&Qt!==null){u=Qt;var E=Gr;e:switch(Te){case 1:Te=0,Gr=null,Iu(o,u,E,1);break;case 2:case 9:if(F_(E)){Te=0,Gr=null,IE(u);break}u=function(){Te!==2&&Te!==9||Fe!==o||(Te=7),ea(o)},E.then(u,u);break t;case 3:Te=7;break t;case 4:Te=5;break t;case 7:F_(E)?(Te=0,Gr=null,IE(u)):(Te=0,Gr=null,Iu(o,u,E,7));break;case 5:var L=null;switch(Qt.tag){case 26:L=Qt.memoizedState;case 5:case 27:var U=Qt;if(!L||uw(L)){Te=0,Gr=null;var $=U.sibling;if($!==null)Qt=$;else{var J=U.return;J!==null?(Qt=J,E0(J)):Qt=null}break e}}Te=0,Gr=null,Iu(o,u,E,5);break;case 6:Te=0,Gr=null,Iu(o,u,E,6);break;case 8:Lm(),en=6;break t;default:throw Error(r(462))}}l8();break}catch(lt){bE(o,lt)}while(!0);return La=rl=null,q.H=p,q.A=x,Se=h,Qt!==null?0:(Fe=null,ae=0,Hd(),en)}function l8(){for(;Qt!==null&&!ke();)CE(Qt)}function CE(o){var u=tE(o.alternate,o,Ga);o.memoizedProps=o.pendingProps,u===null?E0(o):Qt=u}function IE(o){var u=o,h=u.alternate;switch(u.tag){case 15:case 0:u=WA(h,u,u.pendingProps,u.type,void 0,ae);break;case 11:u=WA(h,u,u.pendingProps,u.type.render,u.ref,ae);break;case 5:Jp(u);default:nE(h,u),u=Qt=R_(u,Ga),u=tE(h,u,Ga)}o.memoizedProps=o.pendingProps,u===null?E0(o):Qt=u}function Iu(o,u,h,p){La=rl=null,Jp(u),xu=null,bf=0;var x=u.return;try{if(Z6(o,x,u,h,ae)){en=1,d0(o,oi(h,o.current)),Qt=null;return}}catch(E){if(x!==null)throw Qt=x,E;en=1,d0(o,oi(h,o.current)),Qt=null;return}u.flags&32768?(me||p===1?o=!0:wu||(ae&536870912)!==0?o=!1:(Bs=o=!0,(p===2||p===9||p===3||p===6)&&(p=fi.current,p!==null&&p.tag===13&&(p.flags|=16384))),RE(u,o)):E0(u)}function E0(o){var u=o;do{if((u.flags&32768)!==0){RE(u,Bs);return}o=u.return;var h=J6(u.alternate,u,Ga);if(h!==null){Qt=h;return}if(u=u.sibling,u!==null){Qt=u;return}Qt=u=o}while(u!==null);en===0&&(en=5)}function RE(o,u){do{var h=t8(o.alternate,o);if(h!==null){h.flags&=32767,Qt=h;return}if(h=o.return,h!==null&&(h.flags|=32768,h.subtreeFlags=0,h.deletions=null),!u&&(o=o.sibling,o!==null)){Qt=o;return}Qt=o=h}while(o!==null);en=6,Qt=null}function DE(o,u,h,p,x,E,L,U,$){o.cancelPendingCommit=null;do w0();while(Zn!==0);if((Se&6)!==0)throw Error(r(327));if(u!==null){if(u===o.current)throw Error(r(177));if(E=u.lanes|u.childLanes,E|=Ip,Hc(o,h,E,L,U,$),o===Fe&&(Qt=Fe=null,ae=0),Su=u,js=o,Tu=h,Nm=E,Pm=x,_E=p,(u.subtreeFlags&10256)!==0||(u.flags&10256)!==0?(o.callbackNode=null,o.callbackPriority=0,h8(_a,function(){return kE(),null})):(o.callbackNode=null,o.callbackPriority=0),p=(u.flags&13878)!==0,(u.subtreeFlags&13878)!==0||p){p=q.T,q.T=null,x=Z.p,Z.p=2,L=Se,Se|=4;try{e8(o,u,h)}finally{Se=L,Z.p=x,q.T=p}}Zn=1,OE(),ME(),NE()}}function OE(){if(Zn===1){Zn=0;var o=js,u=Su,h=(u.flags&13878)!==0;if((u.subtreeFlags&13878)!==0||h){h=q.T,q.T=null;var p=Z.p;Z.p=2;var x=Se;Se|=4;try{dE(u,o);var E=Km,L=x_(o.containerInfo),U=E.focusedElem,$=E.selectionRange;if(L!==U&&U&&U.ownerDocument&&y_(U.ownerDocument.documentElement,U)){if($!==null&&wp(U)){var J=$.start,lt=$.end;if(lt===void 0&&(lt=J),"selectionStart"in U)U.selectionStart=J,U.selectionEnd=Math.min(lt,U.value.length);else{var ht=U.ownerDocument||document,et=ht&&ht.defaultView||window;if(et.getSelection){var nt=et.getSelection(),jt=U.textContent.length,Lt=Math.min($.start,jt),Ne=$.end===void 0?Lt:Math.min($.end,jt);!nt.extend&&Lt>Ne&&(L=Ne,Ne=Lt,Lt=L);var Y=v_(U,Lt),W=v_(U,Ne);if(Y&&W&&(nt.rangeCount!==1||nt.anchorNode!==Y.node||nt.anchorOffset!==Y.offset||nt.focusNode!==W.node||nt.focusOffset!==W.offset)){var Q=ht.createRange();Q.setStart(Y.node,Y.offset),nt.removeAllRanges(),Lt>Ne?(nt.addRange(Q),nt.extend(W.node,W.offset)):(Q.setEnd(W.node,W.offset),nt.addRange(Q))}}}}for(ht=[],nt=U;nt=nt.parentNode;)nt.nodeType===1&&ht.push({element:nt,left:nt.scrollLeft,top:nt.scrollTop});for(typeof U.focus=="function"&&U.focus(),U=0;U<ht.length;U++){var ct=ht[U];ct.element.scrollLeft=ct.left,ct.element.scrollTop=ct.top}}k0=!!Ym,Km=Ym=null}finally{Se=x,Z.p=p,q.T=h}}o.current=u,Zn=2}}function ME(){if(Zn===2){Zn=0;var o=js,u=Su,h=(u.flags&8772)!==0;if((u.subtreeFlags&8772)!==0||h){h=q.T,q.T=null;var p=Z.p;Z.p=2;var x=Se;Se|=4;try{uE(o,u.alternate,u)}finally{Se=x,Z.p=p,q.T=h}}Zn=3}}function NE(){if(Zn===4||Zn===3){Zn=0,Ze();var o=js,u=Su,h=Tu,p=_E;(u.subtreeFlags&10256)!==0||(u.flags&10256)!==0?Zn=5:(Zn=0,Su=js=null,PE(o,o.pendingLanes));var x=o.pendingLanes;if(x===0&&(Fs=null),$l(h),u=u.stateNode,ce&&typeof ce.onCommitFiberRoot=="function")try{ce.onCommitFiberRoot(qe,u,void 0,(u.current.flags&128)===128)}catch{}if(p!==null){u=q.T,x=Z.p,Z.p=2,q.T=null;try{for(var E=o.onRecoverableError,L=0;L<p.length;L++){var U=p[L];E(U.value,{componentStack:U.stack})}}finally{q.T=u,Z.p=x}}(Tu&3)!==0&&w0(),ea(o),x=o.pendingLanes,(h&4194090)!==0&&(x&42)!==0?o===km?Nf++:(Nf=0,km=o):Nf=0,Pf(0)}}function PE(o,u){(o.pooledCacheLanes&=u)===0&&(u=o.pooledCache,u!=null&&(o.pooledCache=null,df(u)))}function w0(o){return OE(),ME(),NE(),kE()}function kE(){if(Zn!==5)return!1;var o=js,u=Nm;Nm=0;var h=$l(Tu),p=q.T,x=Z.p;try{Z.p=32>h?32:h,q.T=null,h=Pm,Pm=null;var E=js,L=Tu;if(Zn=0,Su=js=null,Tu=0,(Se&6)!==0)throw Error(r(331));var U=Se;if(Se|=4,yE(E.current),pE(E,E.current,L,h),Se=U,Pf(0,!1),ce&&typeof ce.onPostCommitFiberRoot=="function")try{ce.onPostCommitFiberRoot(qe,E)}catch{}return!0}finally{Z.p=x,q.T=p,PE(o,u)}}function LE(o,u,h){u=oi(h,u),u=dm(o.stateNode,u,2),o=Ds(o,u,2),o!==null&&(Ea(o,2),ea(o))}function Le(o,u,h){if(o.tag===3)LE(o,o,h);else for(;u!==null;){if(u.tag===3){LE(u,o,h);break}else if(u.tag===1){var p=u.stateNode;if(typeof u.type.getDerivedStateFromError=="function"||typeof p.componentDidCatch=="function"&&(Fs===null||!Fs.has(p))){o=oi(h,o),h=jA(2),p=Ds(u,h,2),p!==null&&(UA(h,p,u,o),Ea(p,2),ea(p));break}}u=u.return}}function Fm(o,u,h){var p=o.pingCache;if(p===null){p=o.pingCache=new i8;var x=new Set;p.set(u,x)}else x=p.get(u),x===void 0&&(x=new Set,p.set(u,x));x.has(h)||(Rm=!0,x.add(h),o=u8.bind(null,o,u,h),u.then(o,o))}function u8(o,u,h){var p=o.pingCache;p!==null&&p.delete(u),o.pingedLanes|=o.suspendedLanes&h,o.warmLanes&=~h,Fe===o&&(ae&h)===h&&(en===4||en===3&&(ae&62914560)===ae&&300>$e()-Mm?(Se&2)===0&&Cu(o,0):Dm|=h,bu===ae&&(bu=0)),ea(o)}function BE(o,u){u===0&&(u=zc()),o=uu(o,u),o!==null&&(Ea(o,u),ea(o))}function c8(o){var u=o.memoizedState,h=0;u!==null&&(h=u.retryLane),BE(o,h)}function f8(o,u){var h=0;switch(o.tag){case 13:var p=o.stateNode,x=o.memoizedState;x!==null&&(h=x.retryLane);break;case 19:p=o.stateNode;break;case 22:p=o.stateNode._retryCache;break;default:throw Error(r(314))}p!==null&&p.delete(u),BE(o,h)}function h8(o,u){return Ae(o,u)}var b0=null,Ru=null,jm=!1,S0=!1,Um=!1,cl=0;function ea(o){o!==Ru&&o.next===null&&(Ru===null?b0=Ru=o:Ru=Ru.next=o),S0=!0,jm||(jm=!0,g8())}function Pf(o,u){if(!Um&&S0){Um=!0;do for(var h=!1,p=b0;p!==null;){if(o!==0){var x=p.pendingLanes;if(x===0)var E=0;else{var L=p.suspendedLanes,U=p.pingedLanes;E=(1<<31-ar(42|o)+1)-1,E&=x&~(L&~U),E=E&201326741?E&201326741|1:E?E|2:0}E!==0&&(h=!0,UE(p,E))}else E=ae,E=Gl(p,p===Fe?E:0,p.cancelPendingCommit!==null||p.timeoutHandle!==-1),(E&3)===0||ko(p,E)||(h=!0,UE(p,E));p=p.next}while(h);Um=!1}}function d8(){VE()}function VE(){S0=jm=!1;var o=0;cl!==0&&(E8()&&(o=cl),cl=0);for(var u=$e(),h=null,p=b0;p!==null;){var x=p.next,E=FE(p,u);E===0?(p.next=null,h===null?b0=x:h.next=x,x===null&&(Ru=h)):(h=p,(o!==0||(E&3)!==0)&&(S0=!0)),p=x}Pf(o)}function FE(o,u){for(var h=o.suspendedLanes,p=o.pingedLanes,x=o.expirationTimes,E=o.pendingLanes&-62914561;0<E;){var L=31-ar(E),U=1<<L,$=x[L];$===-1?((U&h)===0||(U&p)!==0)&&(x[L]=jc(U,u)):$<=u&&(o.expiredLanes|=U),E&=~U}if(u=Fe,h=ae,h=Gl(o,o===u?h:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),p=o.callbackNode,h===0||o===u&&(Te===2||Te===9)||o.cancelPendingCommit!==null)return p!==null&&p!==null&&Nt(p),o.callbackNode=null,o.callbackPriority=0;if((h&3)===0||ko(o,h)){if(u=h&-h,u===o.callbackPriority)return u;switch(p!==null&&Nt(p),$l(h)){case 2:case 8:h=xa;break;case 32:h=_a;break;case 268435456:h=xs;break;default:h=_a}return p=jE.bind(null,o),h=Ae(h,p),o.callbackPriority=u,o.callbackNode=h,u}return p!==null&&p!==null&&Nt(p),o.callbackPriority=2,o.callbackNode=null,2}function jE(o,u){if(Zn!==0&&Zn!==5)return o.callbackNode=null,o.callbackPriority=0,null;var h=o.callbackNode;if(w0()&&o.callbackNode!==h)return null;var p=ae;return p=Gl(o,o===Fe?p:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),p===0?null:(EE(o,p,u),FE(o,$e()),o.callbackNode!=null&&o.callbackNode===h?jE.bind(null,o):null)}function UE(o,u){if(w0())return null;EE(o,u,!0)}function g8(){b8(function(){(Se&6)!==0?Ae(ys,d8):VE()})}function zm(){return cl===0&&(cl=Uc()),cl}function zE(o){return o==null||typeof o=="symbol"||typeof o=="boolean"?null:typeof o=="function"?o:Zl(""+o)}function HE(o,u){var h=u.ownerDocument.createElement("input");return h.name=u.name,h.value=u.value,o.id&&h.setAttribute("form",o.id),u.parentNode.insertBefore(h,u),o=new FormData(o),h.parentNode.removeChild(h),o}function p8(o,u,h,p,x){if(u==="submit"&&h&&h.stateNode===x){var E=zE((x[cn]||null).action),L=p.submitter;L&&(u=(u=L[cn]||null)?zE(u.formAction):L.getAttribute("formAction"),u!==null&&(E=u,L=null));var U=new Ql("action","action",null,p,x);o.push({event:U,listeners:[{instance:null,listener:function(){if(p.defaultPrevented){if(cl!==0){var $=L?HE(x,L):new FormData(x);lm(h,{pending:!0,data:$,method:x.method,action:E},null,$)}}else typeof E=="function"&&(U.preventDefault(),$=L?HE(x,L):new FormData(x),lm(h,{pending:!0,data:$,method:x.method,action:E},E,$))},currentTarget:x}]})}}for(var Hm=0;Hm<Cp.length;Hm++){var Gm=Cp[Hm],m8=Gm.toLowerCase(),v8=Gm[0].toUpperCase()+Gm.slice(1);Ti(m8,"on"+v8)}Ti(E_,"onAnimationEnd"),Ti(w_,"onAnimationIteration"),Ti(b_,"onAnimationStart"),Ti("dblclick","onDoubleClick"),Ti("focusin","onFocus"),Ti("focusout","onBlur"),Ti(P6,"onTransitionRun"),Ti(k6,"onTransitionStart"),Ti(L6,"onTransitionCancel"),Ti(S_,"onTransitionEnd"),ba("onMouseEnter",["mouseout","mouseover"]),ba("onMouseLeave",["mouseout","mouseover"]),ba("onPointerEnter",["pointerout","pointerover"]),ba("onPointerLeave",["pointerout","pointerover"]),bi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),bi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),bi("onBeforeInput",["compositionend","keypress","textInput","paste"]),bi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),bi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),bi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var kf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),y8=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(kf));function GE(o,u){u=(u&4)!==0;for(var h=0;h<o.length;h++){var p=o[h],x=p.event;p=p.listeners;t:{var E=void 0;if(u)for(var L=p.length-1;0<=L;L--){var U=p[L],$=U.instance,J=U.currentTarget;if(U=U.listener,$!==E&&x.isPropagationStopped())break t;E=U,x.currentTarget=J;try{E(x)}catch(lt){h0(lt)}x.currentTarget=null,E=$}else for(L=0;L<p.length;L++){if(U=p[L],$=U.instance,J=U.currentTarget,U=U.listener,$!==E&&x.isPropagationStopped())break t;E=U,x.currentTarget=J;try{E(x)}catch(lt){h0(lt)}x.currentTarget=null,E=$}}}}function Jt(o,u){var h=u[$c];h===void 0&&(h=u[$c]=new Set);var p=o+"__bubble";h.has(p)||($E(u,o,2,!1),h.add(p))}function $m(o,u,h){var p=0;u&&(p|=4),$E(h,o,p,u)}var T0="_reactListening"+Math.random().toString(36).slice(2);function qm(o){if(!o[T0]){o[T0]=!0,qc.forEach(function(h){h!=="selectionchange"&&(y8.has(h)||$m(h,!1,o),$m(h,!0,o))});var u=o.nodeType===9?o:o.ownerDocument;u===null||u[T0]||(u[T0]=!0,$m("selectionchange",!1,u))}}function $E(o,u,h,p){switch(pw(u)){case 2:var x=$8;break;case 8:x=q8;break;default:x=sv}h=x.bind(null,u,h,o),x=void 0,!ai||u!=="touchstart"&&u!=="touchmove"&&u!=="wheel"||(x=!0),p?x!==void 0?o.addEventListener(u,h,{capture:!0,passive:x}):o.addEventListener(u,h,!0):x!==void 0?o.addEventListener(u,h,{passive:x}):o.addEventListener(u,h,!1)}function Xm(o,u,h,p,x){var E=p;if((u&1)===0&&(u&2)===0&&p!==null)t:for(;;){if(p===null)return;var L=p.tag;if(L===3||L===4){var U=p.stateNode.containerInfo;if(U===x)break;if(L===4)for(L=p.return;L!==null;){var $=L.tag;if(($===3||$===4)&&L.stateNode.containerInfo===x)return;L=L.return}for(;U!==null;){if(L=wa(U),L===null)return;if($=L.tag,$===5||$===6||$===26||$===27){p=E=L;continue t}U=U.parentNode}}p=p.return}Id(function(){var J=E,lt=ii(h),ht=[];t:{var et=T_.get(o);if(et!==void 0){var nt=Ql,jt=o;switch(o){case"keypress":if(qi(h)===0)break t;case"keydown":case"keyup":nt=iu;break;case"focusin":jt="focus",nt=eu;break;case"focusout":jt="blur",nt=eu;break;case"beforeblur":case"afterblur":nt=eu;break;case"click":if(h.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":nt=si;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":nt=xp;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":nt=Ld;break;case E_:case w_:case b_:nt=nu;break;case S_:nt=Vd;break;case"scroll":case"scrollend":nt=Rd;break;case"wheel":nt=au;break;case"copy":case"cut":case"paste":nt=ru;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":nt=af;break;case"toggle":case"beforetoggle":nt=jd}var Lt=(u&4)!==0,Ne=!Lt&&(o==="scroll"||o==="scrollend"),Y=Lt?et!==null?et+"Capture":null:et;Lt=[];for(var W=J,Q;W!==null;){var ct=W;if(Q=ct.stateNode,ct=ct.tag,ct!==5&&ct!==26&&ct!==27||Q===null||Y===null||(ct=Ho(W,Y),ct!=null&&Lt.push(Lf(W,ct,Q))),Ne)break;W=W.return}0<Lt.length&&(et=new nt(et,jt,null,h,lt),ht.push({event:et,listeners:Lt}))}}if((u&7)===0){t:{if(et=o==="mouseover"||o==="pointerover",nt=o==="mouseout"||o==="pointerout",et&&h!==Ca&&(jt=h.relatedTarget||h.fromElement)&&(wa(jt)||jt[ni]))break t;if((nt||et)&&(et=lt.window===lt?lt:(et=lt.ownerDocument)?et.defaultView||et.parentWindow:window,nt?(jt=h.relatedTarget||h.toElement,nt=J,jt=jt?wa(jt):null,jt!==null&&(Ne=a(jt),Lt=jt.tag,jt!==Ne||Lt!==5&&Lt!==27&&Lt!==6)&&(jt=null)):(nt=null,jt=J),nt!==jt)){if(Lt=si,ct="onMouseLeave",Y="onMouseEnter",W="mouse",(o==="pointerout"||o==="pointerover")&&(Lt=af,ct="onPointerLeave",Y="onPointerEnter",W="pointer"),Ne=nt==null?et:zi(nt),Q=jt==null?et:zi(jt),et=new Lt(ct,W+"leave",nt,h,lt),et.target=Ne,et.relatedTarget=Q,ct=null,wa(lt)===J&&(Lt=new Lt(Y,W+"enter",jt,h,lt),Lt.target=Q,Lt.relatedTarget=Ne,ct=Lt),Ne=ct,nt&&jt)e:{for(Lt=nt,Y=jt,W=0,Q=Lt;Q;Q=Du(Q))W++;for(Q=0,ct=Y;ct;ct=Du(ct))Q++;for(;0<W-Q;)Lt=Du(Lt),W--;for(;0<Q-W;)Y=Du(Y),Q--;for(;W--;){if(Lt===Y||Y!==null&&Lt===Y.alternate)break e;Lt=Du(Lt),Y=Du(Y)}Lt=null}else Lt=null;nt!==null&&qE(ht,et,nt,Lt,!1),jt!==null&&Ne!==null&&qE(ht,Ne,jt,Lt,!0)}}t:{if(et=J?zi(J):window,nt=et.nodeName&&et.nodeName.toLowerCase(),nt==="select"||nt==="input"&&et.type==="file")var Tt=f_;else if(En(et))if(h_)Tt=O6;else{Tt=R6;var Kt=I6}else nt=et.nodeName,!nt||nt.toLowerCase()!=="input"||et.type!=="checkbox"&&et.type!=="radio"?J&&Zc(J.elementType)&&(Tt=f_):Tt=D6;if(Tt&&(Tt=Tt(o,J))){Ma(ht,Tt,h,lt);break t}Kt&&Kt(o,et,J),o==="focusout"&&J&&et.type==="number"&&J.memoizedProps.value!=null&&Ss(et,"number",et.value)}switch(Kt=J?zi(J):window,o){case"focusin":(En(Kt)||Kt.contentEditable==="true")&&(su=Kt,bp=J,lf=null);break;case"focusout":lf=bp=su=null;break;case"mousedown":Sp=!0;break;case"contextmenu":case"mouseup":case"dragend":Sp=!1,__(ht,h,lt);break;case"selectionchange":if(N6)break;case"keydown":case"keyup":__(ht,h,lt)}var Dt;if(Yi)t:{switch(o){case"compositionstart":var Bt="onCompositionStart";break t;case"compositionend":Bt="onCompositionEnd";break t;case"compositionupdate":Bt="onCompositionUpdate";break t}Bt=void 0}else re?at(o,h)&&(Bt="onCompositionEnd"):o==="keydown"&&h.keyCode===229&&(Bt="onCompositionStart");Bt&&(P&&h.locale!=="ko"&&(re||Bt!=="onCompositionStart"?Bt==="onCompositionEnd"&&re&&(Dt=Jc()):($i=lt,Ts="value"in $i?$i.value:$i.textContent,re=!0)),Kt=C0(J,Bt),0<Kt.length&&(Bt=new nf(Bt,o,null,h,lt),ht.push({event:Bt,listeners:Kt}),Dt?Bt.data=Dt:(Dt=yt(h),Dt!==null&&(Bt.data=Dt)))),(Dt=T?An(o,h):ie(o,h))&&(Bt=C0(J,"onBeforeInput"),0<Bt.length&&(Kt=new nf("onBeforeInput","beforeinput",null,h,lt),ht.push({event:Kt,listeners:Bt}),Kt.data=Dt)),p8(ht,o,J,h,lt)}GE(ht,u)})}function Lf(o,u,h){return{instance:o,listener:u,currentTarget:h}}function C0(o,u){for(var h=u+"Capture",p=[];o!==null;){var x=o,E=x.stateNode;if(x=x.tag,x!==5&&x!==26&&x!==27||E===null||(x=Ho(o,h),x!=null&&p.unshift(Lf(o,x,E)),x=Ho(o,u),x!=null&&p.push(Lf(o,x,E))),o.tag===3)return p;o=o.return}return[]}function Du(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5&&o.tag!==27);return o||null}function qE(o,u,h,p,x){for(var E=u._reactName,L=[];h!==null&&h!==p;){var U=h,$=U.alternate,J=U.stateNode;if(U=U.tag,$!==null&&$===p)break;U!==5&&U!==26&&U!==27||J===null||($=J,x?(J=Ho(h,E),J!=null&&L.unshift(Lf(h,J,$))):x||(J=Ho(h,E),J!=null&&L.push(Lf(h,J,$)))),h=h.return}L.length!==0&&o.push({event:u,listeners:L})}var x8=/\r\n?/g,_8=/\u0000|\uFFFD/g;function XE(o){return(typeof o=="string"?o:""+o).replace(x8,`
`).replace(_8,"")}function WE(o,u){return u=XE(u),XE(o)===u}function I0(){}function Me(o,u,h,p,x,E){switch(h){case"children":typeof p=="string"?u==="body"||u==="textarea"&&p===""||ri(o,p):(typeof p=="number"||typeof p=="bigint")&&u!=="body"&&ri(o,""+p);break;case"className":Hi(o,"class",p);break;case"tabIndex":Hi(o,"tabindex",p);break;case"dir":case"role":case"viewBox":case"width":case"height":Hi(o,h,p);break;case"style":Kc(o,p,E);break;case"data":if(u!=="object"){Hi(o,"data",p);break}case"src":case"href":if(p===""&&(u!=="a"||h!=="href")){o.removeAttribute(h);break}if(p==null||typeof p=="function"||typeof p=="symbol"||typeof p=="boolean"){o.removeAttribute(h);break}p=Zl(""+p),o.setAttribute(h,p);break;case"action":case"formAction":if(typeof p=="function"){o.setAttribute(h,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof E=="function"&&(h==="formAction"?(u!=="input"&&Me(o,u,"name",x.name,x,null),Me(o,u,"formEncType",x.formEncType,x,null),Me(o,u,"formMethod",x.formMethod,x,null),Me(o,u,"formTarget",x.formTarget,x,null)):(Me(o,u,"encType",x.encType,x,null),Me(o,u,"method",x.method,x,null),Me(o,u,"target",x.target,x,null)));if(p==null||typeof p=="symbol"||typeof p=="boolean"){o.removeAttribute(h);break}p=Zl(""+p),o.setAttribute(h,p);break;case"onClick":p!=null&&(o.onclick=I0);break;case"onScroll":p!=null&&Jt("scroll",o);break;case"onScrollEnd":p!=null&&Jt("scrollend",o);break;case"dangerouslySetInnerHTML":if(p!=null){if(typeof p!="object"||!("__html"in p))throw Error(r(61));if(h=p.__html,h!=null){if(x.children!=null)throw Error(r(60));o.innerHTML=h}}break;case"multiple":o.multiple=p&&typeof p!="function"&&typeof p!="symbol";break;case"muted":o.muted=p&&typeof p!="function"&&typeof p!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(p==null||typeof p=="function"||typeof p=="boolean"||typeof p=="symbol"){o.removeAttribute("xlink:href");break}h=Zl(""+p),o.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",h);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":p!=null&&typeof p!="function"&&typeof p!="symbol"?o.setAttribute(h,""+p):o.removeAttribute(h);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":p&&typeof p!="function"&&typeof p!="symbol"?o.setAttribute(h,""):o.removeAttribute(h);break;case"capture":case"download":p===!0?o.setAttribute(h,""):p!==!1&&p!=null&&typeof p!="function"&&typeof p!="symbol"?o.setAttribute(h,p):o.removeAttribute(h);break;case"cols":case"rows":case"size":case"span":p!=null&&typeof p!="function"&&typeof p!="symbol"&&!isNaN(p)&&1<=p?o.setAttribute(h,p):o.removeAttribute(h);break;case"rowSpan":case"start":p==null||typeof p=="function"||typeof p=="symbol"||isNaN(p)?o.removeAttribute(h):o.setAttribute(h,p);break;case"popover":Jt("beforetoggle",o),Jt("toggle",o),bs(o,"popover",p);break;case"xlinkActuate":Wn(o,"http://www.w3.org/1999/xlink","xlink:actuate",p);break;case"xlinkArcrole":Wn(o,"http://www.w3.org/1999/xlink","xlink:arcrole",p);break;case"xlinkRole":Wn(o,"http://www.w3.org/1999/xlink","xlink:role",p);break;case"xlinkShow":Wn(o,"http://www.w3.org/1999/xlink","xlink:show",p);break;case"xlinkTitle":Wn(o,"http://www.w3.org/1999/xlink","xlink:title",p);break;case"xlinkType":Wn(o,"http://www.w3.org/1999/xlink","xlink:type",p);break;case"xmlBase":Wn(o,"http://www.w3.org/XML/1998/namespace","xml:base",p);break;case"xmlLang":Wn(o,"http://www.w3.org/XML/1998/namespace","xml:lang",p);break;case"xmlSpace":Wn(o,"http://www.w3.org/XML/1998/namespace","xml:space",p);break;case"is":bs(o,"is",p);break;case"innerText":case"textContent":break;default:(!(2<h.length)||h[0]!=="o"&&h[0]!=="O"||h[1]!=="n"&&h[1]!=="N")&&(h=vp.get(h)||h,bs(o,h,p))}}function Wm(o,u,h,p,x,E){switch(h){case"style":Kc(o,p,E);break;case"dangerouslySetInnerHTML":if(p!=null){if(typeof p!="object"||!("__html"in p))throw Error(r(61));if(h=p.__html,h!=null){if(x.children!=null)throw Error(r(60));o.innerHTML=h}}break;case"children":typeof p=="string"?ri(o,p):(typeof p=="number"||typeof p=="bigint")&&ri(o,""+p);break;case"onScroll":p!=null&&Jt("scroll",o);break;case"onScrollEnd":p!=null&&Jt("scrollend",o);break;case"onClick":p!=null&&(o.onclick=I0);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ql.hasOwnProperty(h))t:{if(h[0]==="o"&&h[1]==="n"&&(x=h.endsWith("Capture"),u=h.slice(2,x?h.length-7:void 0),E=o[cn]||null,E=E!=null?E[h]:null,typeof E=="function"&&o.removeEventListener(u,E,x),typeof p=="function")){typeof E!="function"&&E!==null&&(h in o?o[h]=null:o.hasAttribute(h)&&o.removeAttribute(h)),o.addEventListener(u,p,x);break t}h in o?o[h]=p:p===!0?o.setAttribute(h,""):bs(o,h,p)}}}function Qn(o,u,h){switch(u){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Jt("error",o),Jt("load",o);var p=!1,x=!1,E;for(E in h)if(h.hasOwnProperty(E)){var L=h[E];if(L!=null)switch(E){case"src":p=!0;break;case"srcSet":x=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,u));default:Me(o,u,E,L,h,null)}}x&&Me(o,u,"srcSet",h.srcSet,h,null),p&&Me(o,u,"src",h.src,h,null);return;case"input":Jt("invalid",o);var U=E=L=x=null,$=null,J=null;for(p in h)if(h.hasOwnProperty(p)){var lt=h[p];if(lt!=null)switch(p){case"name":x=lt;break;case"type":L=lt;break;case"checked":$=lt;break;case"defaultChecked":J=lt;break;case"value":E=lt;break;case"defaultValue":U=lt;break;case"children":case"dangerouslySetInnerHTML":if(lt!=null)throw Error(r(137,u));break;default:Me(o,u,p,lt,h,null)}}jo(o,E,U,$,J,L,x,!1),Kl(o);return;case"select":Jt("invalid",o),p=L=E=null;for(x in h)if(h.hasOwnProperty(x)&&(U=h[x],U!=null))switch(x){case"value":E=U;break;case"defaultValue":L=U;break;case"multiple":p=U;default:Me(o,u,x,U,h,null)}u=E,h=L,o.multiple=!!p,u!=null?Ta(o,!!p,u,!1):h!=null&&Ta(o,!!p,h,!0);return;case"textarea":Jt("invalid",o),E=x=p=null;for(L in h)if(h.hasOwnProperty(L)&&(U=h[L],U!=null))switch(L){case"value":p=U;break;case"defaultValue":x=U;break;case"children":E=U;break;case"dangerouslySetInnerHTML":if(U!=null)throw Error(r(91));break;default:Me(o,u,L,U,h,null)}Uo(o,p,x,E),Kl(o);return;case"option":for($ in h)if(h.hasOwnProperty($)&&(p=h[$],p!=null))switch($){case"selected":o.selected=p&&typeof p!="function"&&typeof p!="symbol";break;default:Me(o,u,$,p,h,null)}return;case"dialog":Jt("beforetoggle",o),Jt("toggle",o),Jt("cancel",o),Jt("close",o);break;case"iframe":case"object":Jt("load",o);break;case"video":case"audio":for(p=0;p<kf.length;p++)Jt(kf[p],o);break;case"image":Jt("error",o),Jt("load",o);break;case"details":Jt("toggle",o);break;case"embed":case"source":case"link":Jt("error",o),Jt("load",o);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(J in h)if(h.hasOwnProperty(J)&&(p=h[J],p!=null))switch(J){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,u));default:Me(o,u,J,p,h,null)}return;default:if(Zc(u)){for(lt in h)h.hasOwnProperty(lt)&&(p=h[lt],p!==void 0&&Wm(o,u,lt,p,h,void 0));return}}for(U in h)h.hasOwnProperty(U)&&(p=h[U],p!=null&&Me(o,u,U,p,h,null))}function A8(o,u,h,p){switch(u){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var x=null,E=null,L=null,U=null,$=null,J=null,lt=null;for(nt in h){var ht=h[nt];if(h.hasOwnProperty(nt)&&ht!=null)switch(nt){case"checked":break;case"value":break;case"defaultValue":$=ht;default:p.hasOwnProperty(nt)||Me(o,u,nt,null,p,ht)}}for(var et in p){var nt=p[et];if(ht=h[et],p.hasOwnProperty(et)&&(nt!=null||ht!=null))switch(et){case"type":E=nt;break;case"name":x=nt;break;case"checked":J=nt;break;case"defaultChecked":lt=nt;break;case"value":L=nt;break;case"defaultValue":U=nt;break;case"children":case"dangerouslySetInnerHTML":if(nt!=null)throw Error(r(137,u));break;default:nt!==ht&&Me(o,u,et,nt,p,ht)}}Fr(o,L,U,$,J,lt,E,x);return;case"select":nt=L=U=et=null;for(E in h)if($=h[E],h.hasOwnProperty(E)&&$!=null)switch(E){case"value":break;case"multiple":nt=$;default:p.hasOwnProperty(E)||Me(o,u,E,null,p,$)}for(x in p)if(E=p[x],$=h[x],p.hasOwnProperty(x)&&(E!=null||$!=null))switch(x){case"value":et=E;break;case"defaultValue":U=E;break;case"multiple":L=E;default:E!==$&&Me(o,u,x,E,p,$)}u=U,h=L,p=nt,et!=null?Ta(o,!!h,et,!1):!!p!=!!h&&(u!=null?Ta(o,!!h,u,!0):Ta(o,!!h,h?[]:"",!1));return;case"textarea":nt=et=null;for(U in h)if(x=h[U],h.hasOwnProperty(U)&&x!=null&&!p.hasOwnProperty(U))switch(U){case"value":break;case"children":break;default:Me(o,u,U,null,p,x)}for(L in p)if(x=p[L],E=h[L],p.hasOwnProperty(L)&&(x!=null||E!=null))switch(L){case"value":et=x;break;case"defaultValue":nt=x;break;case"children":break;case"dangerouslySetInnerHTML":if(x!=null)throw Error(r(91));break;default:x!==E&&Me(o,u,L,x,p,E)}De(o,et,nt);return;case"option":for(var jt in h)if(et=h[jt],h.hasOwnProperty(jt)&&et!=null&&!p.hasOwnProperty(jt))switch(jt){case"selected":o.selected=!1;break;default:Me(o,u,jt,null,p,et)}for($ in p)if(et=p[$],nt=h[$],p.hasOwnProperty($)&&et!==nt&&(et!=null||nt!=null))switch($){case"selected":o.selected=et&&typeof et!="function"&&typeof et!="symbol";break;default:Me(o,u,$,et,p,nt)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Lt in h)et=h[Lt],h.hasOwnProperty(Lt)&&et!=null&&!p.hasOwnProperty(Lt)&&Me(o,u,Lt,null,p,et);for(J in p)if(et=p[J],nt=h[J],p.hasOwnProperty(J)&&et!==nt&&(et!=null||nt!=null))switch(J){case"children":case"dangerouslySetInnerHTML":if(et!=null)throw Error(r(137,u));break;default:Me(o,u,J,et,p,nt)}return;default:if(Zc(u)){for(var Ne in h)et=h[Ne],h.hasOwnProperty(Ne)&&et!==void 0&&!p.hasOwnProperty(Ne)&&Wm(o,u,Ne,void 0,p,et);for(lt in p)et=p[lt],nt=h[lt],!p.hasOwnProperty(lt)||et===nt||et===void 0&&nt===void 0||Wm(o,u,lt,et,p,nt);return}}for(var Y in h)et=h[Y],h.hasOwnProperty(Y)&&et!=null&&!p.hasOwnProperty(Y)&&Me(o,u,Y,null,p,et);for(ht in p)et=p[ht],nt=h[ht],!p.hasOwnProperty(ht)||et===nt||et==null&&nt==null||Me(o,u,ht,et,p,nt)}var Ym=null,Km=null;function R0(o){return o.nodeType===9?o:o.ownerDocument}function YE(o){switch(o){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function KE(o,u){if(o===0)switch(u){case"svg":return 1;case"math":return 2;default:return 0}return o===1&&u==="foreignObject"?0:o}function Zm(o,u){return o==="textarea"||o==="noscript"||typeof u.children=="string"||typeof u.children=="number"||typeof u.children=="bigint"||typeof u.dangerouslySetInnerHTML=="object"&&u.dangerouslySetInnerHTML!==null&&u.dangerouslySetInnerHTML.__html!=null}var Qm=null;function E8(){var o=window.event;return o&&o.type==="popstate"?o===Qm?!1:(Qm=o,!0):(Qm=null,!1)}var ZE=typeof setTimeout=="function"?setTimeout:void 0,w8=typeof clearTimeout=="function"?clearTimeout:void 0,QE=typeof Promise=="function"?Promise:void 0,b8=typeof queueMicrotask=="function"?queueMicrotask:typeof QE<"u"?function(o){return QE.resolve(null).then(o).catch(S8)}:ZE;function S8(o){setTimeout(function(){throw o})}function zs(o){return o==="head"}function JE(o,u){var h=u,p=0,x=0;do{var E=h.nextSibling;if(o.removeChild(h),E&&E.nodeType===8)if(h=E.data,h==="/$"){if(0<p&&8>p){h=p;var L=o.ownerDocument;if(h&1&&Bf(L.documentElement),h&2&&Bf(L.body),h&4)for(h=L.head,Bf(h),L=h.firstChild;L;){var U=L.nextSibling,$=L.nodeName;L[Lo]||$==="SCRIPT"||$==="STYLE"||$==="LINK"&&L.rel.toLowerCase()==="stylesheet"||h.removeChild(L),L=U}}if(x===0){o.removeChild(E),$f(u);return}x--}else h==="$"||h==="$?"||h==="$!"?x++:p=h.charCodeAt(0)-48;else p=0;h=E}while(h);$f(u)}function Jm(o){var u=o.firstChild;for(u&&u.nodeType===10&&(u=u.nextSibling);u;){var h=u;switch(u=u.nextSibling,h.nodeName){case"HTML":case"HEAD":case"BODY":Jm(h),ws(h);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(h.rel.toLowerCase()==="stylesheet")continue}o.removeChild(h)}}function T8(o,u,h,p){for(;o.nodeType===1;){var x=h;if(o.nodeName.toLowerCase()!==u.toLowerCase()){if(!p&&(o.nodeName!=="INPUT"||o.type!=="hidden"))break}else if(p){if(!o[Lo])switch(u){case"meta":if(!o.hasAttribute("itemprop"))break;return o;case"link":if(E=o.getAttribute("rel"),E==="stylesheet"&&o.hasAttribute("data-precedence"))break;if(E!==x.rel||o.getAttribute("href")!==(x.href==null||x.href===""?null:x.href)||o.getAttribute("crossorigin")!==(x.crossOrigin==null?null:x.crossOrigin)||o.getAttribute("title")!==(x.title==null?null:x.title))break;return o;case"style":if(o.hasAttribute("data-precedence"))break;return o;case"script":if(E=o.getAttribute("src"),(E!==(x.src==null?null:x.src)||o.getAttribute("type")!==(x.type==null?null:x.type)||o.getAttribute("crossorigin")!==(x.crossOrigin==null?null:x.crossOrigin))&&E&&o.hasAttribute("async")&&!o.hasAttribute("itemprop"))break;return o;default:return o}}else if(u==="input"&&o.type==="hidden"){var E=x.name==null?null:""+x.name;if(x.type==="hidden"&&o.getAttribute("name")===E)return o}else return o;if(o=Ii(o.nextSibling),o===null)break}return null}function C8(o,u,h){if(u==="")return null;for(;o.nodeType!==3;)if((o.nodeType!==1||o.nodeName!=="INPUT"||o.type!=="hidden")&&!h||(o=Ii(o.nextSibling),o===null))return null;return o}function tv(o){return o.data==="$!"||o.data==="$?"&&o.ownerDocument.readyState==="complete"}function I8(o,u){var h=o.ownerDocument;if(o.data!=="$?"||h.readyState==="complete")u();else{var p=function(){u(),h.removeEventListener("DOMContentLoaded",p)};h.addEventListener("DOMContentLoaded",p),o._reactRetry=p}}function Ii(o){for(;o!=null;o=o.nextSibling){var u=o.nodeType;if(u===1||u===3)break;if(u===8){if(u=o.data,u==="$"||u==="$!"||u==="$?"||u==="F!"||u==="F")break;if(u==="/$")return null}}return o}var ev=null;function tw(o){o=o.previousSibling;for(var u=0;o;){if(o.nodeType===8){var h=o.data;if(h==="$"||h==="$!"||h==="$?"){if(u===0)return o;u--}else h==="/$"&&u++}o=o.previousSibling}return null}function ew(o,u,h){switch(u=R0(h),o){case"html":if(o=u.documentElement,!o)throw Error(r(452));return o;case"head":if(o=u.head,!o)throw Error(r(453));return o;case"body":if(o=u.body,!o)throw Error(r(454));return o;default:throw Error(r(451))}}function Bf(o){for(var u=o.attributes;u.length;)o.removeAttributeNode(u[0]);ws(o)}var di=new Map,nw=new Set;function D0(o){return typeof o.getRootNode=="function"?o.getRootNode():o.nodeType===9?o:o.ownerDocument}var $a=Z.d;Z.d={f:R8,r:D8,D:O8,C:M8,L:N8,m:P8,X:L8,S:k8,M:B8};function R8(){var o=$a.f(),u=A0();return o||u}function D8(o){var u=Ui(o);u!==null&&u.tag===5&&u.type==="form"?EA(u):$a.r(o)}var Ou=typeof document>"u"?null:document;function rw(o,u,h){var p=Ou;if(p&&typeof u=="string"&&u){var x=fn(u);x='link[rel="'+o+'"][href="'+x+'"]',typeof h=="string"&&(x+='[crossorigin="'+h+'"]'),nw.has(x)||(nw.add(x),o={rel:o,crossOrigin:h,href:u},p.querySelector(x)===null&&(u=p.createElement("link"),Qn(u,"link",o),nn(u),p.head.appendChild(u)))}}function O8(o){$a.D(o),rw("dns-prefetch",o,null)}function M8(o,u){$a.C(o,u),rw("preconnect",o,u)}function N8(o,u,h){$a.L(o,u,h);var p=Ou;if(p&&o&&u){var x='link[rel="preload"][as="'+fn(u)+'"]';u==="image"&&h&&h.imageSrcSet?(x+='[imagesrcset="'+fn(h.imageSrcSet)+'"]',typeof h.imageSizes=="string"&&(x+='[imagesizes="'+fn(h.imageSizes)+'"]')):x+='[href="'+fn(o)+'"]';var E=x;switch(u){case"style":E=Mu(o);break;case"script":E=Nu(o)}di.has(E)||(o=d({rel:"preload",href:u==="image"&&h&&h.imageSrcSet?void 0:o,as:u},h),di.set(E,o),p.querySelector(x)!==null||u==="style"&&p.querySelector(Vf(E))||u==="script"&&p.querySelector(Ff(E))||(u=p.createElement("link"),Qn(u,"link",o),nn(u),p.head.appendChild(u)))}}function P8(o,u){$a.m(o,u);var h=Ou;if(h&&o){var p=u&&typeof u.as=="string"?u.as:"script",x='link[rel="modulepreload"][as="'+fn(p)+'"][href="'+fn(o)+'"]',E=x;switch(p){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":E=Nu(o)}if(!di.has(E)&&(o=d({rel:"modulepreload",href:o},u),di.set(E,o),h.querySelector(x)===null)){switch(p){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(h.querySelector(Ff(E)))return}p=h.createElement("link"),Qn(p,"link",o),nn(p),h.head.appendChild(p)}}}function k8(o,u,h){$a.S(o,u,h);var p=Ou;if(p&&o){var x=mr(p).hoistableStyles,E=Mu(o);u=u||"default";var L=x.get(E);if(!L){var U={loading:0,preload:null};if(L=p.querySelector(Vf(E)))U.loading=5;else{o=d({rel:"stylesheet",href:o,"data-precedence":u},h),(h=di.get(E))&&nv(o,h);var $=L=p.createElement("link");nn($),Qn($,"link",o),$._p=new Promise(function(J,lt){$.onload=J,$.onerror=lt}),$.addEventListener("load",function(){U.loading|=1}),$.addEventListener("error",function(){U.loading|=2}),U.loading|=4,O0(L,u,p)}L={type:"stylesheet",instance:L,count:1,state:U},x.set(E,L)}}}function L8(o,u){$a.X(o,u);var h=Ou;if(h&&o){var p=mr(h).hoistableScripts,x=Nu(o),E=p.get(x);E||(E=h.querySelector(Ff(x)),E||(o=d({src:o,async:!0},u),(u=di.get(x))&&rv(o,u),E=h.createElement("script"),nn(E),Qn(E,"link",o),h.head.appendChild(E)),E={type:"script",instance:E,count:1,state:null},p.set(x,E))}}function B8(o,u){$a.M(o,u);var h=Ou;if(h&&o){var p=mr(h).hoistableScripts,x=Nu(o),E=p.get(x);E||(E=h.querySelector(Ff(x)),E||(o=d({src:o,async:!0,type:"module"},u),(u=di.get(x))&&rv(o,u),E=h.createElement("script"),nn(E),Qn(E,"link",o),h.head.appendChild(E)),E={type:"script",instance:E,count:1,state:null},p.set(x,E))}}function iw(o,u,h,p){var x=(x=pe.current)?D0(x):null;if(!x)throw Error(r(446));switch(o){case"meta":case"title":return null;case"style":return typeof h.precedence=="string"&&typeof h.href=="string"?(u=Mu(h.href),h=mr(x).hoistableStyles,p=h.get(u),p||(p={type:"style",instance:null,count:0,state:null},h.set(u,p)),p):{type:"void",instance:null,count:0,state:null};case"link":if(h.rel==="stylesheet"&&typeof h.href=="string"&&typeof h.precedence=="string"){o=Mu(h.href);var E=mr(x).hoistableStyles,L=E.get(o);if(L||(x=x.ownerDocument||x,L={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},E.set(o,L),(E=x.querySelector(Vf(o)))&&!E._p&&(L.instance=E,L.state.loading=5),di.has(o)||(h={rel:"preload",as:"style",href:h.href,crossOrigin:h.crossOrigin,integrity:h.integrity,media:h.media,hrefLang:h.hrefLang,referrerPolicy:h.referrerPolicy},di.set(o,h),E||V8(x,o,h,L.state))),u&&p===null)throw Error(r(528,""));return L}if(u&&p!==null)throw Error(r(529,""));return null;case"script":return u=h.async,h=h.src,typeof h=="string"&&u&&typeof u!="function"&&typeof u!="symbol"?(u=Nu(h),h=mr(x).hoistableScripts,p=h.get(u),p||(p={type:"script",instance:null,count:0,state:null},h.set(u,p)),p):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,o))}}function Mu(o){return'href="'+fn(o)+'"'}function Vf(o){return'link[rel="stylesheet"]['+o+"]"}function aw(o){return d({},o,{"data-precedence":o.precedence,precedence:null})}function V8(o,u,h,p){o.querySelector('link[rel="preload"][as="style"]['+u+"]")?p.loading=1:(u=o.createElement("link"),p.preload=u,u.addEventListener("load",function(){return p.loading|=1}),u.addEventListener("error",function(){return p.loading|=2}),Qn(u,"link",h),nn(u),o.head.appendChild(u))}function Nu(o){return'[src="'+fn(o)+'"]'}function Ff(o){return"script[async]"+o}function sw(o,u,h){if(u.count++,u.instance===null)switch(u.type){case"style":var p=o.querySelector('style[data-href~="'+fn(h.href)+'"]');if(p)return u.instance=p,nn(p),p;var x=d({},h,{"data-href":h.href,"data-precedence":h.precedence,href:null,precedence:null});return p=(o.ownerDocument||o).createElement("style"),nn(p),Qn(p,"style",x),O0(p,h.precedence,o),u.instance=p;case"stylesheet":x=Mu(h.href);var E=o.querySelector(Vf(x));if(E)return u.state.loading|=4,u.instance=E,nn(E),E;p=aw(h),(x=di.get(x))&&nv(p,x),E=(o.ownerDocument||o).createElement("link"),nn(E);var L=E;return L._p=new Promise(function(U,$){L.onload=U,L.onerror=$}),Qn(E,"link",p),u.state.loading|=4,O0(E,h.precedence,o),u.instance=E;case"script":return E=Nu(h.src),(x=o.querySelector(Ff(E)))?(u.instance=x,nn(x),x):(p=h,(x=di.get(E))&&(p=d({},h),rv(p,x)),o=o.ownerDocument||o,x=o.createElement("script"),nn(x),Qn(x,"link",p),o.head.appendChild(x),u.instance=x);case"void":return null;default:throw Error(r(443,u.type))}else u.type==="stylesheet"&&(u.state.loading&4)===0&&(p=u.instance,u.state.loading|=4,O0(p,h.precedence,o));return u.instance}function O0(o,u,h){for(var p=h.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),x=p.length?p[p.length-1]:null,E=x,L=0;L<p.length;L++){var U=p[L];if(U.dataset.precedence===u)E=U;else if(E!==x)break}E?E.parentNode.insertBefore(o,E.nextSibling):(u=h.nodeType===9?h.head:h,u.insertBefore(o,u.firstChild))}function nv(o,u){o.crossOrigin==null&&(o.crossOrigin=u.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=u.referrerPolicy),o.title==null&&(o.title=u.title)}function rv(o,u){o.crossOrigin==null&&(o.crossOrigin=u.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=u.referrerPolicy),o.integrity==null&&(o.integrity=u.integrity)}var M0=null;function ow(o,u,h){if(M0===null){var p=new Map,x=M0=new Map;x.set(h,p)}else x=M0,p=x.get(h),p||(p=new Map,x.set(h,p));if(p.has(o))return p;for(p.set(o,null),h=h.getElementsByTagName(o),x=0;x<h.length;x++){var E=h[x];if(!(E[Lo]||E[_n]||o==="link"&&E.getAttribute("rel")==="stylesheet")&&E.namespaceURI!=="http://www.w3.org/2000/svg"){var L=E.getAttribute(u)||"";L=o+L;var U=p.get(L);U?U.push(E):p.set(L,[E])}}return p}function lw(o,u,h){o=o.ownerDocument||o,o.head.insertBefore(h,u==="title"?o.querySelector("head > title"):null)}function F8(o,u,h){if(h===1||u.itemProp!=null)return!1;switch(o){case"meta":case"title":return!0;case"style":if(typeof u.precedence!="string"||typeof u.href!="string"||u.href==="")break;return!0;case"link":if(typeof u.rel!="string"||typeof u.href!="string"||u.href===""||u.onLoad||u.onError)break;switch(u.rel){case"stylesheet":return o=u.disabled,typeof u.precedence=="string"&&o==null;default:return!0}case"script":if(u.async&&typeof u.async!="function"&&typeof u.async!="symbol"&&!u.onLoad&&!u.onError&&u.src&&typeof u.src=="string")return!0}return!1}function uw(o){return!(o.type==="stylesheet"&&(o.state.loading&3)===0)}var jf=null;function j8(){}function U8(o,u,h){if(jf===null)throw Error(r(475));var p=jf;if(u.type==="stylesheet"&&(typeof h.media!="string"||matchMedia(h.media).matches!==!1)&&(u.state.loading&4)===0){if(u.instance===null){var x=Mu(h.href),E=o.querySelector(Vf(x));if(E){o=E._p,o!==null&&typeof o=="object"&&typeof o.then=="function"&&(p.count++,p=N0.bind(p),o.then(p,p)),u.state.loading|=4,u.instance=E,nn(E);return}E=o.ownerDocument||o,h=aw(h),(x=di.get(x))&&nv(h,x),E=E.createElement("link"),nn(E);var L=E;L._p=new Promise(function(U,$){L.onload=U,L.onerror=$}),Qn(E,"link",h),u.instance=E}p.stylesheets===null&&(p.stylesheets=new Map),p.stylesheets.set(u,o),(o=u.state.preload)&&(u.state.loading&3)===0&&(p.count++,u=N0.bind(p),o.addEventListener("load",u),o.addEventListener("error",u))}}function z8(){if(jf===null)throw Error(r(475));var o=jf;return o.stylesheets&&o.count===0&&iv(o,o.stylesheets),0<o.count?function(u){var h=setTimeout(function(){if(o.stylesheets&&iv(o,o.stylesheets),o.unsuspend){var p=o.unsuspend;o.unsuspend=null,p()}},6e4);return o.unsuspend=u,function(){o.unsuspend=null,clearTimeout(h)}}:null}function N0(){if(this.count--,this.count===0){if(this.stylesheets)iv(this,this.stylesheets);else if(this.unsuspend){var o=this.unsuspend;this.unsuspend=null,o()}}}var P0=null;function iv(o,u){o.stylesheets=null,o.unsuspend!==null&&(o.count++,P0=new Map,u.forEach(H8,o),P0=null,N0.call(o))}function H8(o,u){if(!(u.state.loading&4)){var h=P0.get(o);if(h)var p=h.get(null);else{h=new Map,P0.set(o,h);for(var x=o.querySelectorAll("link[data-precedence],style[data-precedence]"),E=0;E<x.length;E++){var L=x[E];(L.nodeName==="LINK"||L.getAttribute("media")!=="not all")&&(h.set(L.dataset.precedence,L),p=L)}p&&h.set(null,p)}x=u.instance,L=x.getAttribute("data-precedence"),E=h.get(L)||p,E===p&&h.set(null,x),h.set(L,x),this.count++,p=N0.bind(this),x.addEventListener("load",p),x.addEventListener("error",p),E?E.parentNode.insertBefore(x,E.nextSibling):(o=o.nodeType===9?o.head:o,o.insertBefore(x,o.firstChild)),u.state.loading|=4}}var Uf={$$typeof:R,Provider:null,Consumer:null,_currentValue:it,_currentValue2:it,_threadCount:0};function G8(o,u,h,p,x,E,L,U){this.tag=1,this.containerInfo=o,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Aa(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Aa(0),this.hiddenUpdates=Aa(null),this.identifierPrefix=p,this.onUncaughtError=x,this.onCaughtError=E,this.onRecoverableError=L,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=U,this.incompleteTransitions=new Map}function cw(o,u,h,p,x,E,L,U,$,J,lt,ht){return o=new G8(o,u,h,L,U,$,J,ht),u=1,E===!0&&(u|=24),E=Ur(3,null,null,u),o.current=E,E.stateNode=o,u=Fp(),u.refCount++,o.pooledCache=u,u.refCount++,E.memoizedState={element:p,isDehydrated:h,cache:u},Hp(E),o}function fw(o){return o?(o=cu,o):cu}function hw(o,u,h,p,x,E){x=fw(x),p.context===null?p.context=x:p.pendingContext=x,p=Rs(u),p.payload={element:h},E=E===void 0?null:E,E!==null&&(p.callback=E),h=Ds(o,p,u),h!==null&&(qr(h,o,u),vf(h,o,u))}function dw(o,u){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var h=o.retryLane;o.retryLane=h!==0&&h<u?h:u}}function av(o,u){dw(o,u),(o=o.alternate)&&dw(o,u)}function gw(o){if(o.tag===13){var u=uu(o,67108864);u!==null&&qr(u,o,67108864),av(o,67108864)}}var k0=!0;function $8(o,u,h,p){var x=q.T;q.T=null;var E=Z.p;try{Z.p=2,sv(o,u,h,p)}finally{Z.p=E,q.T=x}}function q8(o,u,h,p){var x=q.T;q.T=null;var E=Z.p;try{Z.p=8,sv(o,u,h,p)}finally{Z.p=E,q.T=x}}function sv(o,u,h,p){if(k0){var x=ov(p);if(x===null)Xm(o,u,p,L0,h),mw(o,p);else if(W8(x,o,u,h,p))p.stopPropagation();else if(mw(o,p),u&4&&-1<X8.indexOf(o)){for(;x!==null;){var E=Ui(x);if(E!==null)switch(E.tag){case 3:if(E=E.stateNode,E.current.memoizedState.isDehydrated){var L=wi(E.pendingLanes);if(L!==0){var U=E;for(U.pendingLanes|=2,U.entangledLanes|=2;L;){var $=1<<31-ar(L);U.entanglements[1]|=$,L&=~$}ea(E),(Se&6)===0&&(x0=$e()+500,Pf(0))}}break;case 13:U=uu(E,2),U!==null&&qr(U,E,2),A0(),av(E,2)}if(E=ov(p),E===null&&Xm(o,u,p,L0,h),E===x)break;x=E}x!==null&&p.stopPropagation()}else Xm(o,u,p,null,h)}}function ov(o){return o=ii(o),lv(o)}var L0=null;function lv(o){if(L0=null,o=wa(o),o!==null){var u=a(o);if(u===null)o=null;else{var h=u.tag;if(h===13){if(o=s(u),o!==null)return o;o=null}else if(h===3){if(u.stateNode.current.memoizedState.isDehydrated)return u.tag===3?u.stateNode.containerInfo:null;o=null}else u!==o&&(o=null)}}return L0=o,null}function pw(o){switch(o){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ei()){case ys:return 2;case xa:return 8;case _a:case Fc:return 32;case xs:return 268435456;default:return 32}default:return 32}}var uv=!1,Hs=null,Gs=null,$s=null,zf=new Map,Hf=new Map,qs=[],X8="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function mw(o,u){switch(o){case"focusin":case"focusout":Hs=null;break;case"dragenter":case"dragleave":Gs=null;break;case"mouseover":case"mouseout":$s=null;break;case"pointerover":case"pointerout":zf.delete(u.pointerId);break;case"gotpointercapture":case"lostpointercapture":Hf.delete(u.pointerId)}}function Gf(o,u,h,p,x,E){return o===null||o.nativeEvent!==E?(o={blockedOn:u,domEventName:h,eventSystemFlags:p,nativeEvent:E,targetContainers:[x]},u!==null&&(u=Ui(u),u!==null&&gw(u)),o):(o.eventSystemFlags|=p,u=o.targetContainers,x!==null&&u.indexOf(x)===-1&&u.push(x),o)}function W8(o,u,h,p,x){switch(u){case"focusin":return Hs=Gf(Hs,o,u,h,p,x),!0;case"dragenter":return Gs=Gf(Gs,o,u,h,p,x),!0;case"mouseover":return $s=Gf($s,o,u,h,p,x),!0;case"pointerover":var E=x.pointerId;return zf.set(E,Gf(zf.get(E)||null,o,u,h,p,x)),!0;case"gotpointercapture":return E=x.pointerId,Hf.set(E,Gf(Hf.get(E)||null,o,u,h,p,x)),!0}return!1}function vw(o){var u=wa(o.target);if(u!==null){var h=a(u);if(h!==null){if(u=h.tag,u===13){if(u=s(h),u!==null){o.blockedOn=u,Ad(o.priority,function(){if(h.tag===13){var p=$r();p=_s(p);var x=uu(h,p);x!==null&&qr(x,h,p),av(h,p)}});return}}else if(u===3&&h.stateNode.current.memoizedState.isDehydrated){o.blockedOn=h.tag===3?h.stateNode.containerInfo:null;return}}}o.blockedOn=null}function B0(o){if(o.blockedOn!==null)return!1;for(var u=o.targetContainers;0<u.length;){var h=ov(o.nativeEvent);if(h===null){h=o.nativeEvent;var p=new h.constructor(h.type,h);Ca=p,h.target.dispatchEvent(p),Ca=null}else return u=Ui(h),u!==null&&gw(u),o.blockedOn=h,!1;u.shift()}return!0}function yw(o,u,h){B0(o)&&h.delete(u)}function Y8(){uv=!1,Hs!==null&&B0(Hs)&&(Hs=null),Gs!==null&&B0(Gs)&&(Gs=null),$s!==null&&B0($s)&&($s=null),zf.forEach(yw),Hf.forEach(yw)}function V0(o,u){o.blockedOn===u&&(o.blockedOn=null,uv||(uv=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,Y8)))}var F0=null;function xw(o){F0!==o&&(F0=o,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){F0===o&&(F0=null);for(var u=0;u<o.length;u+=3){var h=o[u],p=o[u+1],x=o[u+2];if(typeof p!="function"){if(lv(p||h)===null)continue;break}var E=Ui(h);E!==null&&(o.splice(u,3),u-=3,lm(E,{pending:!0,data:x,method:h.method,action:p},p,x))}}))}function $f(o){function u($){return V0($,o)}Hs!==null&&V0(Hs,o),Gs!==null&&V0(Gs,o),$s!==null&&V0($s,o),zf.forEach(u),Hf.forEach(u);for(var h=0;h<qs.length;h++){var p=qs[h];p.blockedOn===o&&(p.blockedOn=null)}for(;0<qs.length&&(h=qs[0],h.blockedOn===null);)vw(h),h.blockedOn===null&&qs.shift();if(h=(o.ownerDocument||o).$$reactFormReplay,h!=null)for(p=0;p<h.length;p+=3){var x=h[p],E=h[p+1],L=x[cn]||null;if(typeof E=="function")L||xw(h);else if(L){var U=null;if(E&&E.hasAttribute("formAction")){if(x=E,L=E[cn]||null)U=L.formAction;else if(lv(x)!==null)continue}else U=L.action;typeof U=="function"?h[p+1]=U:(h.splice(p,3),p-=3),xw(h)}}}function cv(o){this._internalRoot=o}j0.prototype.render=cv.prototype.render=function(o){var u=this._internalRoot;if(u===null)throw Error(r(409));var h=u.current,p=$r();hw(h,p,o,u,null,null)},j0.prototype.unmount=cv.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var u=o.containerInfo;hw(o.current,2,null,o,null,null),A0(),u[ni]=null}};function j0(o){this._internalRoot=o}j0.prototype.unstable_scheduleHydration=function(o){if(o){var u=As();o={blockedOn:null,target:o,priority:u};for(var h=0;h<qs.length&&u!==0&&u<qs[h].priority;h++);qs.splice(h,0,o),h===0&&vw(o)}};var _w=t.version;if(_w!=="19.1.0")throw Error(r(527,_w,"19.1.0"));Z.findDOMNode=function(o){var u=o._reactInternals;if(u===void 0)throw typeof o.render=="function"?Error(r(188)):(o=Object.keys(o).join(","),Error(r(268,o)));return o=c(u),o=o!==null?f(o):null,o=o===null?null:o.stateNode,o};var K8={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:q,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var U0=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!U0.isDisabled&&U0.supportsFiber)try{qe=U0.inject(K8),ce=U0}catch{}}return Wf.createRoot=function(o,u){if(!i(o))throw Error(r(299));var h=!1,p="",x=LA,E=BA,L=VA,U=null;return u!=null&&(u.unstable_strictMode===!0&&(h=!0),u.identifierPrefix!==void 0&&(p=u.identifierPrefix),u.onUncaughtError!==void 0&&(x=u.onUncaughtError),u.onCaughtError!==void 0&&(E=u.onCaughtError),u.onRecoverableError!==void 0&&(L=u.onRecoverableError),u.unstable_transitionCallbacks!==void 0&&(U=u.unstable_transitionCallbacks)),u=cw(o,1,!1,null,null,h,p,x,E,L,U,null),o[ni]=u.current,qm(o),new cv(u)},Wf.hydrateRoot=function(o,u,h){if(!i(o))throw Error(r(299));var p=!1,x="",E=LA,L=BA,U=VA,$=null,J=null;return h!=null&&(h.unstable_strictMode===!0&&(p=!0),h.identifierPrefix!==void 0&&(x=h.identifierPrefix),h.onUncaughtError!==void 0&&(E=h.onUncaughtError),h.onCaughtError!==void 0&&(L=h.onCaughtError),h.onRecoverableError!==void 0&&(U=h.onRecoverableError),h.unstable_transitionCallbacks!==void 0&&($=h.unstable_transitionCallbacks),h.formState!==void 0&&(J=h.formState)),u=cw(o,1,!0,u,h??null,p,x,E,L,U,$,J),u.context=fw(null),h=u.current,p=$r(),p=_s(p),x=Rs(p),x.callback=null,Ds(h,x,p),h=p,u.current.lanes=h,Ea(u,h),ea(u),o[ni]=u.current,qm(o),new j0(u)},Wf.version="19.1.0",Wf}var Iw;function CD(){if(Iw)return fv.exports;Iw=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(t){console.error(t)}}return n(),fv.exports=TD(),fv.exports}var ID=CD();const RD=()=>{};var Rw={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wC=function(n){const t=[];let e=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?t[e++]=i:i<2048?(t[e++]=i>>6|192,t[e++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),t[e++]=i>>18|240,t[e++]=i>>12&63|128,t[e++]=i>>6&63|128,t[e++]=i&63|128):(t[e++]=i>>12|224,t[e++]=i>>6&63|128,t[e++]=i&63|128)}return t},DD=function(n){const t=[];let e=0,r=0;for(;e<n.length;){const i=n[e++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const a=n[e++];t[r++]=String.fromCharCode((i&31)<<6|a&63)}else if(i>239&&i<365){const a=n[e++],s=n[e++],l=n[e++],c=((i&7)<<18|(a&63)<<12|(s&63)<<6|l&63)-65536;t[r++]=String.fromCharCode(55296+(c>>10)),t[r++]=String.fromCharCode(56320+(c&1023))}else{const a=n[e++],s=n[e++];t[r++]=String.fromCharCode((i&15)<<12|(a&63)<<6|s&63)}}return t.join("")},bC={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,t){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const e=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){const a=n[i],s=i+1<n.length,l=s?n[i+1]:0,c=i+2<n.length,f=c?n[i+2]:0,d=a>>2,g=(a&3)<<4|l>>4;let m=(l&15)<<2|f>>6,v=f&63;c||(v=64,s||(m=64)),r.push(e[d],e[g],e[m],e[v])}return r.join("")},encodeString(n,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(n):this.encodeByteArray(wC(n),t)},decodeString(n,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(n):DD(this.decodeStringToByteArray(n,t))},decodeStringToByteArray(n,t){this.init_();const e=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){const a=e[n.charAt(i++)],l=i<n.length?e[n.charAt(i)]:0;++i;const f=i<n.length?e[n.charAt(i)]:64;++i;const g=i<n.length?e[n.charAt(i)]:64;if(++i,a==null||l==null||f==null||g==null)throw new OD;const m=a<<2|l>>4;if(r.push(m),f!==64){const v=l<<4&240|f>>2;if(r.push(v),g!==64){const _=f<<6&192|g;r.push(_)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class OD extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const MD=function(n){const t=wC(n);return bC.encodeByteArray(t,!0)},D1=function(n){return MD(n).replace(/\./g,"")},SC=function(n){try{return bC.decodeString(n,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ND(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PD=()=>ND().__FIREBASE_DEFAULTS__,kD=()=>{if(typeof process>"u"||typeof Rw>"u")return;const n=Rw.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},LD=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=n&&SC(n[1]);return t&&JSON.parse(t)},_g=()=>{try{return RD()||PD()||kD()||LD()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},TC=n=>{var t,e;return(e=(t=_g())===null||t===void 0?void 0:t.emulatorHosts)===null||e===void 0?void 0:e[n]},BD=n=>{const t=TC(n);if(!t)return;const e=t.lastIndexOf(":");if(e<=0||e+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(e+1),10);return t[0]==="["?[t.substring(1,e-1),r]:[t.substring(0,e),r]},CC=()=>{var n;return(n=_g())===null||n===void 0?void 0:n.config},IC=n=>{var t;return(t=_g())===null||t===void 0?void 0:t[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VD{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}wrapCallback(t){return(e,r)=>{e?this.reject(e):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(e):t(e,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tc(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function RC(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FD(n,t){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const e={alg:"none",type:"JWT"},r=t||"demo-project",i=n.iat||0,a=n.sub||n.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},n);return[D1(JSON.stringify(e)),D1(JSON.stringify(s)),""].join(".")}const yh={};function jD(){const n={prod:[],emulator:[]};for(const t of Object.keys(yh))yh[t]?n.emulator.push(t):n.prod.push(t);return n}function UD(n){let t=document.getElementById(n),e=!1;return t||(t=document.createElement("div"),t.setAttribute("id",n),e=!0),{created:e,element:t}}let Dw=!1;function DC(n,t){if(typeof window>"u"||typeof document>"u"||!Tc(window.location.host)||yh[n]===t||yh[n]||Dw)return;yh[n]=t;function e(m){return`__firebase__banner__${m}`}const r="__firebase__banner",a=jD().prod.length>0;function s(){const m=document.getElementById(r);m&&m.remove()}function l(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function c(m,v){m.setAttribute("width","24"),m.setAttribute("id",v),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function f(){const m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{Dw=!0,s()},m}function d(m,v){m.setAttribute("id",v),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function g(){const m=UD(r),v=e("text"),_=document.getElementById(v)||document.createElement("span"),w=e("learnmore"),b=document.getElementById(w)||document.createElement("a"),C=e("preprendIcon"),I=document.getElementById(C)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){const R=m.element;l(R),d(b,w);const M=f();c(I,C),R.append(I,_,b,M),document.body.appendChild(R)}a?(_.innerText="Preview backend disconnected.",I.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(I.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,_.innerText="Preview backend running in this workspace."),_.setAttribute("id",v)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",g):g()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gr(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function zD(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(gr())}function HD(){var n;const t=(n=_g())===null||n===void 0?void 0:n.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function GD(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function $D(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function qD(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function XD(){const n=gr();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function WD(){return!HD()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function YD(){try{return typeof indexedDB=="object"}catch{return!1}}function KD(){return new Promise((n,t)=>{try{let e=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),e||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{e=!1},i.onerror=()=>{var a;t(((a=i.error)===null||a===void 0?void 0:a.message)||"")}}catch(e){t(e)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZD="FirebaseError";class hs extends Error{constructor(t,e,r){super(e),this.code=t,this.customData=r,this.name=ZD,Object.setPrototypeOf(this,hs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,$h.prototype.create)}}class $h{constructor(t,e,r){this.service=t,this.serviceName=e,this.errors=r}create(t,...e){const r=e[0]||{},i=`${this.service}/${t}`,a=this.errors[t],s=a?QD(a,r):"Error",l=`${this.serviceName}: ${s} (${i}).`;return new hs(i,l,r)}}function QD(n,t){return n.replace(JD,(e,r)=>{const i=t[r];return i!=null?String(i):`<${r}?>`})}const JD=/\{\$([^}]+)}/g;function tO(n){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t))return!1;return!0}function Cl(n,t){if(n===t)return!0;const e=Object.keys(n),r=Object.keys(t);for(const i of e){if(!r.includes(i))return!1;const a=n[i],s=t[i];if(Ow(a)&&Ow(s)){if(!Cl(a,s))return!1}else if(a!==s)return!1}for(const i of r)if(!e.includes(i))return!1;return!0}function Ow(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qh(n){const t=[];for(const[e,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{t.push(encodeURIComponent(e)+"="+encodeURIComponent(i))}):t.push(encodeURIComponent(e)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function ah(n){const t={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,a]=r.split("=");t[decodeURIComponent(i)]=decodeURIComponent(a)}}),t}function sh(n){const t=n.indexOf("?");if(!t)return"";const e=n.indexOf("#",t);return n.substring(t,e>0?e:void 0)}function eO(n,t){const e=new nO(n,t);return e.subscribe.bind(e)}class nO{constructor(t,e){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(()=>{t(this)}).catch(r=>{this.error(r)})}next(t){this.forEachObserver(e=>{e.next(t)})}error(t){this.forEachObserver(e=>{e.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,e,r){let i;if(t===void 0&&e===void 0&&r===void 0)throw new Error("Missing Observer.");rO(t,["next","error","complete"])?i=t:i={next:t,error:e,complete:r},i.next===void 0&&(i.next=gv),i.error===void 0&&(i.error=gv),i.complete===void 0&&(i.complete=gv);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),a}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let e=0;e<this.observers.length;e++)this.sendOne(e,t)}sendOne(t,e){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{e(this.observers[t])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function rO(n,t){if(typeof n!="object"||n===null)return!1;for(const e of t)if(e in n&&typeof n[e]=="function")return!0;return!1}function gv(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pn(n){return n&&n._delegate?n._delegate:n}class Il{constructor(t,e,r){this.name=t,this.instanceFactory=e,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gl="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iO{constructor(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){const r=new VD;if(this.instancesDeferred.set(e,r),this.isInitialized(e)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:e});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(e).promise}getImmediate(t){var e;const r=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),i=(e=t==null?void 0:t.optional)!==null&&e!==void 0?e:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(a){if(i)return null;throw a}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(sO(t))try{this.getOrInitializeService({instanceIdentifier:gl})}catch{}for(const[e,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(e);try{const a=this.getOrInitializeService({instanceIdentifier:i});r.resolve(a)}catch{}}}}clearInstance(t=gl){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...t.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=gl){return this.instances.has(t)}getOptions(t=gl){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:e={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:e});for(const[a,s]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(a);r===l&&s.resolve(i)}return i}onInit(t,e){var r;const i=this.normalizeInstanceIdentifier(e),a=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;a.add(t),this.onInitCallbacks.set(i,a);const s=this.instances.get(i);return s&&t(s,i),()=>{a.delete(t)}}invokeOnInitCallbacks(t,e){const r=this.onInitCallbacks.get(e);if(r)for(const i of r)try{i(t,e)}catch{}}getOrInitializeService({instanceIdentifier:t,options:e={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:aO(t),options:e}),this.instances.set(t,r),this.instancesOptions.set(t,e),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=gl){return this.component?this.component.multipleInstances?t:gl:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function aO(n){return n===gl?void 0:n}function sO(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oO{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const e=this.getProvider(t.name);if(e.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);e.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const e=new iO(t,this);return this.providers.set(t,e),e}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ee;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(ee||(ee={}));const lO={debug:ee.DEBUG,verbose:ee.VERBOSE,info:ee.INFO,warn:ee.WARN,error:ee.ERROR,silent:ee.SILENT},uO=ee.INFO,cO={[ee.DEBUG]:"log",[ee.VERBOSE]:"log",[ee.INFO]:"info",[ee.WARN]:"warn",[ee.ERROR]:"error"},fO=(n,t,...e)=>{if(t<n.logLevel)return;const r=new Date().toISOString(),i=cO[t];if(i)console[i](`[${r}]  ${n.name}:`,...e);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class vx{constructor(t){this.name=t,this._logLevel=uO,this._logHandler=fO,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in ee))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?lO[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,ee.DEBUG,...t),this._logHandler(this,ee.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,ee.VERBOSE,...t),this._logHandler(this,ee.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,ee.INFO,...t),this._logHandler(this,ee.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,ee.WARN,...t),this._logHandler(this,ee.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,ee.ERROR,...t),this._logHandler(this,ee.ERROR,...t)}}const hO=(n,t)=>t.some(e=>n instanceof e);let Mw,Nw;function dO(){return Mw||(Mw=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function gO(){return Nw||(Nw=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const OC=new WeakMap,cy=new WeakMap,MC=new WeakMap,pv=new WeakMap,yx=new WeakMap;function pO(n){const t=new Promise((e,r)=>{const i=()=>{n.removeEventListener("success",a),n.removeEventListener("error",s)},a=()=>{e(uo(n.result)),i()},s=()=>{r(n.error),i()};n.addEventListener("success",a),n.addEventListener("error",s)});return t.then(e=>{e instanceof IDBCursor&&OC.set(e,n)}).catch(()=>{}),yx.set(t,n),t}function mO(n){if(cy.has(n))return;const t=new Promise((e,r)=>{const i=()=>{n.removeEventListener("complete",a),n.removeEventListener("error",s),n.removeEventListener("abort",s)},a=()=>{e(),i()},s=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",a),n.addEventListener("error",s),n.addEventListener("abort",s)});cy.set(n,t)}let fy={get(n,t,e){if(n instanceof IDBTransaction){if(t==="done")return cy.get(n);if(t==="objectStoreNames")return n.objectStoreNames||MC.get(n);if(t==="store")return e.objectStoreNames[1]?void 0:e.objectStore(e.objectStoreNames[0])}return uo(n[t])},set(n,t,e){return n[t]=e,!0},has(n,t){return n instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in n}};function vO(n){fy=n(fy)}function yO(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...e){const r=n.call(mv(this),t,...e);return MC.set(r,t.sort?t.sort():[t]),uo(r)}:gO().includes(n)?function(...t){return n.apply(mv(this),t),uo(OC.get(this))}:function(...t){return uo(n.apply(mv(this),t))}}function xO(n){return typeof n=="function"?yO(n):(n instanceof IDBTransaction&&mO(n),hO(n,dO())?new Proxy(n,fy):n)}function uo(n){if(n instanceof IDBRequest)return pO(n);if(pv.has(n))return pv.get(n);const t=xO(n);return t!==n&&(pv.set(n,t),yx.set(t,n)),t}const mv=n=>yx.get(n);function _O(n,t,{blocked:e,upgrade:r,blocking:i,terminated:a}={}){const s=indexedDB.open(n,t),l=uo(s);return r&&s.addEventListener("upgradeneeded",c=>{r(uo(s.result),c.oldVersion,c.newVersion,uo(s.transaction),c)}),e&&s.addEventListener("blocked",c=>e(c.oldVersion,c.newVersion,c)),l.then(c=>{a&&c.addEventListener("close",()=>a()),i&&c.addEventListener("versionchange",f=>i(f.oldVersion,f.newVersion,f))}).catch(()=>{}),l}const AO=["get","getKey","getAll","getAllKeys","count"],EO=["put","add","delete","clear"],vv=new Map;function Pw(n,t){if(!(n instanceof IDBDatabase&&!(t in n)&&typeof t=="string"))return;if(vv.get(t))return vv.get(t);const e=t.replace(/FromIndex$/,""),r=t!==e,i=EO.includes(e);if(!(e in(r?IDBIndex:IDBObjectStore).prototype)||!(i||AO.includes(e)))return;const a=async function(s,...l){const c=this.transaction(s,i?"readwrite":"readonly");let f=c.store;return r&&(f=f.index(l.shift())),(await Promise.all([f[e](...l),i&&c.done]))[0]};return vv.set(t,a),a}vO(n=>({...n,get:(t,e,r)=>Pw(t,e)||n.get(t,e,r),has:(t,e)=>!!Pw(t,e)||n.has(t,e)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wO{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(bO(e)){const r=e.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(e=>e).join(" ")}}function bO(n){const t=n.getComponent();return(t==null?void 0:t.type)==="VERSION"}const hy="@firebase/app",kw="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ns=new vx("@firebase/app"),SO="@firebase/app-compat",TO="@firebase/analytics-compat",CO="@firebase/analytics",IO="@firebase/app-check-compat",RO="@firebase/app-check",DO="@firebase/auth",OO="@firebase/auth-compat",MO="@firebase/database",NO="@firebase/data-connect",PO="@firebase/database-compat",kO="@firebase/functions",LO="@firebase/functions-compat",BO="@firebase/installations",VO="@firebase/installations-compat",FO="@firebase/messaging",jO="@firebase/messaging-compat",UO="@firebase/performance",zO="@firebase/performance-compat",HO="@firebase/remote-config",GO="@firebase/remote-config-compat",$O="@firebase/storage",qO="@firebase/storage-compat",XO="@firebase/firestore",WO="@firebase/ai",YO="@firebase/firestore-compat",KO="firebase",ZO="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dy="[DEFAULT]",QO={[hy]:"fire-core",[SO]:"fire-core-compat",[CO]:"fire-analytics",[TO]:"fire-analytics-compat",[RO]:"fire-app-check",[IO]:"fire-app-check-compat",[DO]:"fire-auth",[OO]:"fire-auth-compat",[MO]:"fire-rtdb",[NO]:"fire-data-connect",[PO]:"fire-rtdb-compat",[kO]:"fire-fn",[LO]:"fire-fn-compat",[BO]:"fire-iid",[VO]:"fire-iid-compat",[FO]:"fire-fcm",[jO]:"fire-fcm-compat",[UO]:"fire-perf",[zO]:"fire-perf-compat",[HO]:"fire-rc",[GO]:"fire-rc-compat",[$O]:"fire-gcs",[qO]:"fire-gcs-compat",[XO]:"fire-fst",[YO]:"fire-fst-compat",[WO]:"fire-vertex","fire-js":"fire-js",[KO]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O1=new Map,JO=new Map,gy=new Map;function Lw(n,t){try{n.container.addComponent(t)}catch(e){ns.debug(`Component ${t.name} failed to register with FirebaseApp ${n.name}`,e)}}function cc(n){const t=n.name;if(gy.has(t))return ns.debug(`There were multiple attempts to register component ${t}.`),!1;gy.set(t,n);for(const e of O1.values())Lw(e,n);for(const e of JO.values())Lw(e,n);return!0}function xx(n,t){const e=n.container.getProvider("heartbeat").getImmediate({optional:!0});return e&&e.triggerHeartbeat(),n.container.getProvider(t)}function pi(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tM={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},co=new $h("app","Firebase",tM);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eM{constructor(t,e,r){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},e),this._name=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Il("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw co.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cc=ZO;function NC(n,t={}){let e=n;typeof t!="object"&&(t={name:t});const r=Object.assign({name:dy,automaticDataCollectionEnabled:!0},t),i=r.name;if(typeof i!="string"||!i)throw co.create("bad-app-name",{appName:String(i)});if(e||(e=CC()),!e)throw co.create("no-options");const a=O1.get(i);if(a){if(Cl(e,a.options)&&Cl(r,a.config))return a;throw co.create("duplicate-app",{appName:i})}const s=new oO(i);for(const c of gy.values())s.addComponent(c);const l=new eM(e,r,s);return O1.set(i,l),l}function PC(n=dy){const t=O1.get(n);if(!t&&n===dy&&CC())return NC();if(!t)throw co.create("no-app",{appName:n});return t}function fo(n,t,e){var r;let i=(r=QO[n])!==null&&r!==void 0?r:n;e&&(i+=`-${e}`);const a=i.match(/\s|\//),s=t.match(/\s|\//);if(a||s){const l=[`Unable to register library "${i}" with version "${t}":`];a&&l.push(`library name "${i}" contains illegal characters (whitespace or "/")`),a&&s&&l.push("and"),s&&l.push(`version name "${t}" contains illegal characters (whitespace or "/")`),ns.warn(l.join(" "));return}cc(new Il(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nM="firebase-heartbeat-database",rM=1,Sh="firebase-heartbeat-store";let yv=null;function kC(){return yv||(yv=_O(nM,rM,{upgrade:(n,t)=>{switch(t){case 0:try{n.createObjectStore(Sh)}catch(e){console.warn(e)}}}}).catch(n=>{throw co.create("idb-open",{originalErrorMessage:n.message})})),yv}async function iM(n){try{const e=(await kC()).transaction(Sh),r=await e.objectStore(Sh).get(LC(n));return await e.done,r}catch(t){if(t instanceof hs)ns.warn(t.message);else{const e=co.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});ns.warn(e.message)}}}async function Bw(n,t){try{const r=(await kC()).transaction(Sh,"readwrite");await r.objectStore(Sh).put(t,LC(n)),await r.done}catch(e){if(e instanceof hs)ns.warn(e.message);else{const r=co.create("idb-set",{originalErrorMessage:e==null?void 0:e.message});ns.warn(r.message)}}}function LC(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aM=1024,sM=30;class oM{constructor(t){this.container=t,this._heartbeatsCache=null;const e=this.container.getProvider("app").getImmediate();this._storage=new uM(e),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var t,e;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=Vw();if(((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(s=>s.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:i}),this._heartbeatsCache.heartbeats.length>sM){const s=cM(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){ns.warn(r)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Vw(),{heartbeatsToSend:r,unsentEntries:i}=lM(this._heartbeatsCache.heartbeats),a=D1(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=e,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(e){return ns.warn(e),""}}}function Vw(){return new Date().toISOString().substring(0,10)}function lM(n,t=aM){const e=[];let r=n.slice();for(const i of n){const a=e.find(s=>s.agent===i.agent);if(a){if(a.dates.push(i.date),Fw(e)>t){a.dates.pop();break}}else if(e.push({agent:i.agent,dates:[i.date]}),Fw(e)>t){e.pop();break}r=r.slice(1)}return{heartbeatsToSend:e,unsentEntries:r}}class uM{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return YD()?KD().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const e=await iM(this.app);return e!=null&&e.heartbeats?e:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var e;if(await this._canUseIndexedDBPromise){const i=await this.read();return Bw(this.app,{lastSentHeartbeatDate:(e=t.lastSentHeartbeatDate)!==null&&e!==void 0?e:i.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var e;if(await this._canUseIndexedDBPromise){const i=await this.read();return Bw(this.app,{lastSentHeartbeatDate:(e=t.lastSentHeartbeatDate)!==null&&e!==void 0?e:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...t.heartbeats]})}else return}}function Fw(n){return D1(JSON.stringify({version:2,heartbeats:n})).length}function cM(n){if(n.length===0)return-1;let t=0,e=n[0].date;for(let r=1;r<n.length;r++)n[r].date<e&&(e=n[r].date,t=r);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fM(n){cc(new Il("platform-logger",t=>new wO(t),"PRIVATE")),cc(new Il("heartbeat",t=>new oM(t),"PRIVATE")),fo(hy,kw,n),fo(hy,kw,"esm2017"),fo("fire-js","")}fM("");function _x(n,t){var e={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&t.indexOf(r)<0&&(e[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(e[r[i]]=n[r[i]]);return e}function BC(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const hM=BC,VC=new $h("auth","Firebase",BC());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M1=new vx("@firebase/auth");function dM(n,...t){M1.logLevel<=ee.WARN&&M1.warn(`Auth (${Cc}): ${n}`,...t)}function g1(n,...t){M1.logLevel<=ee.ERROR&&M1.error(`Auth (${Cc}): ${n}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Li(n,...t){throw Ax(n,...t)}function aa(n,...t){return Ax(n,...t)}function FC(n,t,e){const r=Object.assign(Object.assign({},hM()),{[t]:e});return new $h("auth","Firebase",r).create(t,{appName:n.name})}function Qa(n){return FC(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Ax(n,...t){if(typeof n!="string"){const e=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(e,...r)}return VC.create(n,...t)}function Vt(n,t,...e){if(!n)throw Ax(t,...e)}function Wa(n){const t="INTERNAL ASSERTION FAILED: "+n;throw g1(t),new Error(t)}function rs(n,t){n||Wa(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function py(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function gM(){return jw()==="http:"||jw()==="https:"}function jw(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pM(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(gM()||$D()||"connection"in navigator)?navigator.onLine:!0}function mM(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xh{constructor(t,e){this.shortDelay=t,this.longDelay=e,rs(e>t,"Short delay should be less than long delay!"),this.isMobile=zD()||qD()}get(){return pM()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ex(n,t){rs(n.emulator,"Emulator should always be set here");const{url:e}=n.emulator;return t?`${e}${t.startsWith("/")?t.slice(1):t}`:e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jC{static initialize(t,e,r){this.fetchImpl=t,e&&(this.headersImpl=e),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Wa("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Wa("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Wa("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vM={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yM=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],xM=new Xh(3e4,6e4);function bo(n,t){return n.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:n.tenantId}):t}async function So(n,t,e,r,i={}){return UC(n,i,async()=>{let a={},s={};r&&(t==="GET"?s=r:a={body:JSON.stringify(r)});const l=qh(Object.assign({key:n.config.apiKey},s)).slice(1),c=await n._getAdditionalHeaders();c["Content-Type"]="application/json",n.languageCode&&(c["X-Firebase-Locale"]=n.languageCode);const f=Object.assign({method:t,headers:c},a);return GD()||(f.referrerPolicy="no-referrer"),n.emulatorConfig&&Tc(n.emulatorConfig.host)&&(f.credentials="include"),jC.fetch()(await zC(n,n.config.apiHost,e,l),f)})}async function UC(n,t,e){n._canInitEmulator=!1;const r=Object.assign(Object.assign({},vM),t);try{const i=new AM(n),a=await Promise.race([e(),i.promise]);i.clearNetworkTimeout();const s=await a.json();if("needConfirmation"in s)throw H0(n,"account-exists-with-different-credential",s);if(a.ok&&!("errorMessage"in s))return s;{const l=a.ok?s.errorMessage:s.error.message,[c,f]=l.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw H0(n,"credential-already-in-use",s);if(c==="EMAIL_EXISTS")throw H0(n,"email-already-in-use",s);if(c==="USER_DISABLED")throw H0(n,"user-disabled",s);const d=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw FC(n,d,f);Li(n,d)}}catch(i){if(i instanceof hs)throw i;Li(n,"network-request-failed",{message:String(i)})}}async function Wh(n,t,e,r,i={}){const a=await So(n,t,e,r,i);return"mfaPendingCredential"in a&&Li(n,"multi-factor-auth-required",{_serverResponse:a}),a}async function zC(n,t,e,r){const i=`${t}${e}?${r}`,a=n,s=a.config.emulator?Ex(n.config,i):`${n.config.apiScheme}://${i}`;return yM.includes(e)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(s).toString():s}function _M(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class AM{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((e,r)=>{this.timer=setTimeout(()=>r(aa(this.auth,"network-request-failed")),xM.get())})}}function H0(n,t,e){const r={appName:n.name};e.email&&(r.email=e.email),e.phoneNumber&&(r.phoneNumber=e.phoneNumber);const i=aa(n,t,r);return i.customData._tokenResponse=e,i}function Uw(n){return n!==void 0&&n.enterprise!==void 0}class EM{constructor(t){if(this.siteKey="",this.recaptchaEnforcementState=[],t.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=t.recaptchaEnforcementState}getProviderEnforcementState(t){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const e of this.recaptchaEnforcementState)if(e.provider&&e.provider===t)return _M(e.enforcementState);return null}isProviderEnabled(t){return this.getProviderEnforcementState(t)==="ENFORCE"||this.getProviderEnforcementState(t)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function wM(n,t){return So(n,"GET","/v2/recaptchaConfig",bo(n,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bM(n,t){return So(n,"POST","/v1/accounts:delete",t)}async function N1(n,t){return So(n,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xh(n){if(n)try{const t=new Date(Number(n));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function SM(n,t=!1){const e=Pn(n),r=await e.getIdToken(t),i=wx(r);Vt(i&&i.exp&&i.auth_time&&i.iat,e.auth,"internal-error");const a=typeof i.firebase=="object"?i.firebase:void 0,s=a==null?void 0:a.sign_in_provider;return{claims:i,token:r,authTime:xh(xv(i.auth_time)),issuedAtTime:xh(xv(i.iat)),expirationTime:xh(xv(i.exp)),signInProvider:s||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function xv(n){return Number(n)*1e3}function wx(n){const[t,e,r]=n.split(".");if(t===void 0||e===void 0||r===void 0)return g1("JWT malformed, contained fewer than 3 sections"),null;try{const i=SC(e);return i?JSON.parse(i):(g1("Failed to decode base64 JWT payload"),null)}catch(i){return g1("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function zw(n){const t=wx(n);return Vt(t,"internal-error"),Vt(typeof t.exp<"u","internal-error"),Vt(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Th(n,t,e=!1){if(e)return t;try{return await t}catch(r){throw r instanceof hs&&TM(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function TM({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CM{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){var e;if(t){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((e=this.user.stsTokenManager.expirationTime)!==null&&e!==void 0?e:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(t=!1){if(!this.isRunning)return;const e=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},e)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class my{constructor(t,e){this.createdAt=t,this.lastLoginAt=e,this._initializeTime()}_initializeTime(){this.lastSignInTime=xh(this.lastLoginAt),this.creationTime=xh(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function P1(n){var t;const e=n.auth,r=await n.getIdToken(),i=await Th(n,N1(e,{idToken:r}));Vt(i==null?void 0:i.users.length,e,"internal-error");const a=i.users[0];n._notifyReloadListener(a);const s=!((t=a.providerUserInfo)===null||t===void 0)&&t.length?HC(a.providerUserInfo):[],l=RM(n.providerData,s),c=n.isAnonymous,f=!(n.email&&a.passwordHash)&&!(l!=null&&l.length),d=c?f:!1,g={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:l,metadata:new my(a.createdAt,a.lastLoginAt),isAnonymous:d};Object.assign(n,g)}async function IM(n){const t=Pn(n);await P1(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function RM(n,t){return[...n.filter(r=>!t.some(i=>i.providerId===r.providerId)),...t]}function HC(n){return n.map(t=>{var{providerId:e}=t,r=_x(t,["providerId"]);return{providerId:e,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DM(n,t){const e=await UC(n,{},async()=>{const r=qh({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:i,apiKey:a}=n.config,s=await zC(n,i,"/v1/token",`key=${a}`),l=await n._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:l,body:r};return n.emulatorConfig&&Tc(n.emulatorConfig.host)&&(c.credentials="include"),jC.fetch()(s,c)});return{accessToken:e.access_token,expiresIn:e.expires_in,refreshToken:e.refresh_token}}async function OM(n,t){return So(n,"POST","/v2/accounts:revokeToken",bo(n,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rc{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){Vt(t.idToken,"internal-error"),Vt(typeof t.idToken<"u","internal-error"),Vt(typeof t.refreshToken<"u","internal-error");const e="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):zw(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,e)}updateFromIdToken(t){Vt(t.length!==0,"internal-error");const e=zw(t);this.updateTokensAndExpiration(t,null,e)}async getToken(t,e=!1){return!e&&this.accessToken&&!this.isExpired?this.accessToken:(Vt(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,e){const{accessToken:r,refreshToken:i,expiresIn:a}=await DM(t,e);this.updateTokensAndExpiration(r,i,Number(a))}updateTokensAndExpiration(t,e,r){this.refreshToken=e||null,this.accessToken=t||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(t,e){const{refreshToken:r,accessToken:i,expirationTime:a}=e,s=new rc;return r&&(Vt(typeof r=="string","internal-error",{appName:t}),s.refreshToken=r),i&&(Vt(typeof i=="string","internal-error",{appName:t}),s.accessToken=i),a&&(Vt(typeof a=="number","internal-error",{appName:t}),s.expirationTime=a),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new rc,this.toJSON())}_performRefresh(){return Wa("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ws(n,t){Vt(typeof n=="string"||typeof n>"u","internal-error",{appName:t})}class Pi{constructor(t){var{uid:e,auth:r,stsTokenManager:i}=t,a=_x(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new CM(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new my(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(t){const e=await Th(this,this.stsTokenManager.getToken(this.auth,t));return Vt(e,this.auth,"internal-error"),this.accessToken!==e&&(this.accessToken=e,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),e}getIdTokenResult(t){return SM(this,t)}reload(){return IM(this)}_assign(t){this!==t&&(Vt(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(e=>Object.assign({},e)),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const e=new Pi(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return e.metadata._copy(this.metadata),e}_onReload(t){Vt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,e=!1){let r=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),e&&await P1(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(pi(this.auth.app))return Promise.reject(Qa(this.auth));const t=await this.getIdToken();return await Th(this,bM(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>Object.assign({},t)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,e){var r,i,a,s,l,c,f,d;const g=(r=e.displayName)!==null&&r!==void 0?r:void 0,m=(i=e.email)!==null&&i!==void 0?i:void 0,v=(a=e.phoneNumber)!==null&&a!==void 0?a:void 0,_=(s=e.photoURL)!==null&&s!==void 0?s:void 0,w=(l=e.tenantId)!==null&&l!==void 0?l:void 0,b=(c=e._redirectEventId)!==null&&c!==void 0?c:void 0,C=(f=e.createdAt)!==null&&f!==void 0?f:void 0,I=(d=e.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:R,emailVerified:M,isAnonymous:N,providerData:k,stsTokenManager:O}=e;Vt(R&&O,t,"internal-error");const S=rc.fromJSON(this.name,O);Vt(typeof R=="string",t,"internal-error"),Ws(g,t.name),Ws(m,t.name),Vt(typeof M=="boolean",t,"internal-error"),Vt(typeof N=="boolean",t,"internal-error"),Ws(v,t.name),Ws(_,t.name),Ws(w,t.name),Ws(b,t.name),Ws(C,t.name),Ws(I,t.name);const D=new Pi({uid:R,auth:t,email:m,emailVerified:M,displayName:g,isAnonymous:N,photoURL:_,phoneNumber:v,tenantId:w,stsTokenManager:S,createdAt:C,lastLoginAt:I});return k&&Array.isArray(k)&&(D.providerData=k.map(V=>Object.assign({},V))),b&&(D._redirectEventId=b),D}static async _fromIdTokenResponse(t,e,r=!1){const i=new rc;i.updateFromServerResponse(e);const a=new Pi({uid:e.localId,auth:t,stsTokenManager:i,isAnonymous:r});return await P1(a),a}static async _fromGetAccountInfoResponse(t,e,r){const i=e.users[0];Vt(i.localId!==void 0,"internal-error");const a=i.providerUserInfo!==void 0?HC(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!(a!=null&&a.length),l=new rc;l.updateFromIdToken(r);const c=new Pi({uid:i.localId,auth:t,stsTokenManager:l,isAnonymous:s}),f={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new my(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(a!=null&&a.length)};return Object.assign(c,f),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hw=new Map;function Ya(n){rs(n instanceof Function,"Expected a class definition");let t=Hw.get(n);return t?(rs(t instanceof n,"Instance stored in cache mismatched with class"),t):(t=new n,Hw.set(n,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GC{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,e){this.storage[t]=e}async _get(t){const e=this.storage[t];return e===void 0?null:e}async _remove(t){delete this.storage[t]}_addListener(t,e){}_removeListener(t,e){}}GC.type="NONE";const Gw=GC;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p1(n,t,e){return`firebase:${n}:${t}:${e}`}class ic{constructor(t,e,r){this.persistence=t,this.auth=e,this.userKey=r;const{config:i,name:a}=this.auth;this.fullUserKey=p1(this.userKey,i.apiKey,a),this.fullPersistenceKey=p1("persistence",i.apiKey,a),this.boundEventHandler=e._onStorageEvent.bind(e),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const e=await N1(this.auth,{idToken:t}).catch(()=>{});return e?Pi._fromGetAccountInfoResponse(this.auth,e,t):null}return Pi._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const e=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,e)return this.setCurrentUser(e)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,e,r="authUser"){if(!e.length)return new ic(Ya(Gw),t,r);const i=(await Promise.all(e.map(async f=>{if(await f._isAvailable())return f}))).filter(f=>f);let a=i[0]||Ya(Gw);const s=p1(r,t.config.apiKey,t.name);let l=null;for(const f of e)try{const d=await f._get(s);if(d){let g;if(typeof d=="string"){const m=await N1(t,{idToken:d}).catch(()=>{});if(!m)break;g=await Pi._fromGetAccountInfoResponse(t,m,d)}else g=Pi._fromJSON(t,d);f!==a&&(l=g),a=f;break}}catch{}const c=i.filter(f=>f._shouldAllowMigration);return!a._shouldAllowMigration||!c.length?new ic(a,t,r):(a=c[0],l&&await a._set(s,l.toJSON()),await Promise.all(e.map(async f=>{if(f!==a)try{await f._remove(s)}catch{}})),new ic(a,t,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $w(n){const t=n.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(WC(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if($C(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(KC(t))return"Blackberry";if(ZC(t))return"Webos";if(qC(t))return"Safari";if((t.includes("chrome/")||XC(t))&&!t.includes("edge/"))return"Chrome";if(YC(t))return"Android";{const e=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(e);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function $C(n=gr()){return/firefox\//i.test(n)}function qC(n=gr()){const t=n.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function XC(n=gr()){return/crios\//i.test(n)}function WC(n=gr()){return/iemobile/i.test(n)}function YC(n=gr()){return/android/i.test(n)}function KC(n=gr()){return/blackberry/i.test(n)}function ZC(n=gr()){return/webos/i.test(n)}function bx(n=gr()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function MM(n=gr()){var t;return bx(n)&&!!(!((t=window.navigator)===null||t===void 0)&&t.standalone)}function NM(){return XD()&&document.documentMode===10}function QC(n=gr()){return bx(n)||YC(n)||ZC(n)||KC(n)||/windows phone/i.test(n)||WC(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JC(n,t=[]){let e;switch(n){case"Browser":e=$w(gr());break;case"Worker":e=`${$w(gr())}-${n}`;break;default:e=n}const r=t.length?t.join(","):"FirebaseCore-web";return`${e}/JsCore/${Cc}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PM{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,e){const r=a=>new Promise((s,l)=>{try{const c=t(a);s(c)}catch(c){l(c)}});r.onAbort=e,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const e=[];try{for(const r of this.queue)await r(t),r.onAbort&&e.push(r.onAbort)}catch(r){e.reverse();for(const i of e)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kM(n,t={}){return So(n,"GET","/v2/passwordPolicy",bo(n,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LM=6;class BM{constructor(t){var e,r,i,a;const s=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(e=s.minPasswordLength)!==null&&e!==void 0?e:LM,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=t.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(a=t.forceUpgradeOnSignin)!==null&&a!==void 0?a:!1,this.schemaVersion=t.schemaVersion}validatePassword(t){var e,r,i,a,s,l;const c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,c),this.validatePasswordCharacterOptions(t,c),c.isValid&&(c.isValid=(e=c.meetsMinPasswordLength)!==null&&e!==void 0?e:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(i=c.containsLowercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(a=c.containsUppercaseLetter)!==null&&a!==void 0?a:!0),c.isValid&&(c.isValid=(s=c.containsNumericCharacter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(l=c.containsNonAlphanumericCharacter)!==null&&l!==void 0?l:!0),c}validatePasswordLengthOptions(t,e){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(e.meetsMinPasswordLength=t.length>=r),i&&(e.meetsMaxPasswordLength=t.length<=i)}validatePasswordCharacterOptions(t,e){this.updatePasswordCharacterOptionsStatuses(e,!1,!1,!1,!1);let r;for(let i=0;i<t.length;i++)r=t.charAt(i),this.updatePasswordCharacterOptionsStatuses(e,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(t,e,r,i,a){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=e)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VM{constructor(t,e,r,i){this.app=t,this.heartbeatServiceProvider=e,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new qw(this),this.idTokenSubscription=new qw(this),this.beforeStateQueue=new PM(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=VC,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(t,e){return e&&(this._popupRedirectResolver=Ya(e)),this._initializationPromise=this.queue(async()=>{var r,i,a;if(!this._deleted&&(this.persistenceManager=await ic.create(this,t),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(e),this.lastNotifiedUid=((a=this.currentUser)===null||a===void 0?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const e=await N1(this,{idToken:t}),r=await Pi._fromGetAccountInfoResponse(this,e,t);await this.directlySetCurrentUser(r)}catch(e){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",e),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var e;if(pi(this.app)){const s=this.app.settings.authIdToken;return s?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(l,l))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,a=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const s=(e=this.redirectUser)===null||e===void 0?void 0:e._redirectEventId,l=i==null?void 0:i._redirectEventId,c=await this.tryRedirectSignIn(t);(!s||s===l)&&(c!=null&&c.user)&&(i=c.user,a=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(i)}catch(s){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Vt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(t){let e=null;try{e=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return e}async reloadAndSetCurrentUserOrClear(t){try{await P1(t)}catch(e){if((e==null?void 0:e.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=mM()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(pi(this.app))return Promise.reject(Qa(this));const e=t?Pn(t):null;return e&&Vt(e.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(e&&e._clone(this))}async _updateCurrentUser(t,e=!1){if(!this._deleted)return t&&Vt(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),e||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return pi(this.app)?Promise.reject(Qa(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return pi(this.app)?Promise.reject(Qa(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ya(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const e=this._getPasswordPolicyInternal();return e.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):e.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await kM(this),e=new BM(t);this.tenantId===null?this._projectPasswordPolicy=e:this._tenantPasswordPolicies[this.tenantId]=e}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new $h("auth","Firebase",t())}onAuthStateChanged(t,e,r){return this.registerStateListener(this.authStateSubscription,t,e,r)}beforeAuthStateChanged(t,e){return this.beforeStateQueue.pushCallback(t,e)}onIdTokenChanged(t,e,r){return this.registerStateListener(this.idTokenSubscription,t,e,r)}authStateReady(){return new Promise((t,e)=>{if(this.currentUser)t();else{const r=this.onAuthStateChanged(()=>{r(),t()},e)}})}async revokeAccessToken(t){if(this.currentUser){const e=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:e};this.tenantId!=null&&(r.tenantId=this.tenantId),await OM(this,r)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)===null||t===void 0?void 0:t.toJSON()}}async _setRedirectUser(t,e){const r=await this.getOrInitRedirectPersistenceManager(e);return t===null?r.removeCurrentUser():r.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const e=t&&Ya(t)||this._popupRedirectResolver;Vt(e,this,"argument-error"),this.redirectPersistenceManager=await ic.create(this,[Ya(e._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var e,r;return this._isInitialized&&await this.queue(async()=>{}),((e=this._currentUser)===null||e===void 0?void 0:e._redirectEventId)===t?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,e;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(e=(t=this.currentUser)===null||t===void 0?void 0:t.uid)!==null&&e!==void 0?e:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,e,r,i){if(this._deleted)return()=>{};const a=typeof e=="function"?e:e.next.bind(e);let s=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(Vt(l,this,"internal-error"),l.then(()=>{s||a(this.currentUser)}),typeof e=="function"){const c=t.addObserver(e,r,i);return()=>{s=!0,c()}}else{const c=t.addObserver(e);return()=>{s=!0,c()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return Vt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=JC(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var t;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const r=await((t=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getHeartbeatsHeader());r&&(e["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){var t;if(pi(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getToken());return e!=null&&e.error&&dM(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Pl(n){return Pn(n)}class qw{constructor(t){this.auth=t,this.observer=null,this.addObserver=eO(e=>this.observer=e)}get next(){return Vt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ag={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function FM(n){Ag=n}function tI(n){return Ag.loadJS(n)}function jM(){return Ag.recaptchaEnterpriseScript}function UM(){return Ag.gapiScript}function zM(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class HM{constructor(){this.enterprise=new GM}ready(t){t()}execute(t,e){return Promise.resolve("token")}render(t,e){return""}}class GM{ready(t){t()}execute(t,e){return Promise.resolve("token")}render(t,e){return""}}const $M="recaptcha-enterprise",eI="NO_RECAPTCHA";class qM{constructor(t){this.type=$M,this.auth=Pl(t)}async verify(t="verify",e=!1){async function r(a){if(!e){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(s,l)=>{wM(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const f=new EM(c);return a.tenantId==null?a._agentRecaptchaConfig=f:a._tenantRecaptchaConfigs[a.tenantId]=f,s(f.siteKey)}}).catch(c=>{l(c)})})}function i(a,s,l){const c=window.grecaptcha;Uw(c)?c.enterprise.ready(()=>{c.enterprise.execute(a,{action:t}).then(f=>{s(f)}).catch(()=>{s(eI)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new HM().execute("siteKey",{action:"verify"}):new Promise((a,s)=>{r(this.auth).then(l=>{if(!e&&Uw(window.grecaptcha))i(l,a,s);else{if(typeof window>"u"){s(new Error("RecaptchaVerifier is only supported in browser"));return}let c=jM();c.length!==0&&(c+=l),tI(c).then(()=>{i(l,a,s)}).catch(f=>{s(f)})}}).catch(l=>{s(l)})})}}async function Xw(n,t,e,r=!1,i=!1){const a=new qM(n);let s;if(i)s=eI;else try{s=await a.verify(e)}catch{s=await a.verify(e,!0)}const l=Object.assign({},t);if(e==="mfaSmsEnrollment"||e==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in l){const c=l.phoneEnrollmentInfo.phoneNumber,f=l.phoneEnrollmentInfo.recaptchaToken;Object.assign(l,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:f,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in l){const c=l.phoneSignInInfo.recaptchaToken;Object.assign(l,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return l}return r?Object.assign(l,{captchaResp:s}):Object.assign(l,{captchaResponse:s}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function vy(n,t,e,r,i){var a;if(!((a=n._getRecaptchaConfig())===null||a===void 0)&&a.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await Xw(n,t,e,e==="getOobCode");return r(n,s)}else return r(n,t).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log(`${e} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await Xw(n,t,e,e==="getOobCode");return r(n,l)}else return Promise.reject(s)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XM(n,t){const e=xx(n,"auth");if(e.isInitialized()){const i=e.getImmediate(),a=e.getOptions();if(Cl(a,t??{}))return i;Li(i,"already-initialized")}return e.initialize({options:t})}function WM(n,t){const e=(t==null?void 0:t.persistence)||[],r=(Array.isArray(e)?e:[e]).map(Ya);t!=null&&t.errorMap&&n._updateErrorMap(t.errorMap),n._initializeWithPersistence(r,t==null?void 0:t.popupRedirectResolver)}function YM(n,t,e){const r=Pl(n);Vt(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!1,a=nI(t),{host:s,port:l}=KM(t),c=l===null?"":`:${l}`,f={url:`${a}//${s}${c}/`},d=Object.freeze({host:s,port:l,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){Vt(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Vt(Cl(f,r.config.emulator)&&Cl(d,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=f,r.emulatorConfig=d,r.settings.appVerificationDisabledForTesting=!0,Tc(s)?(RC(`${a}//${s}${c}`),DC("Auth",!0)):ZM()}function nI(n){const t=n.indexOf(":");return t<0?"":n.substr(0,t+1)}function KM(n){const t=nI(n),e=/(\/\/)?([^?#/]+)/.exec(n.substr(t.length));if(!e)return{host:"",port:null};const r=e[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const a=i[1];return{host:a,port:Ww(r.substr(a.length+1))}}else{const[a,s]=r.split(":");return{host:a,port:Ww(s)}}}function Ww(n){if(!n)return null;const t=Number(n);return isNaN(t)?null:t}function ZM(){function n(){const t=document.createElement("p"),e=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",e.position="fixed",e.width="100%",e.backgroundColor="#ffffff",e.border=".1em solid #000000",e.color="#b50000",e.bottom="0px",e.left="0px",e.margin="0px",e.zIndex="10000",e.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sx{constructor(t,e){this.providerId=t,this.signInMethod=e}toJSON(){return Wa("not implemented")}_getIdTokenResponse(t){return Wa("not implemented")}_linkToIdToken(t,e){return Wa("not implemented")}_getReauthenticationResolver(t){return Wa("not implemented")}}async function QM(n,t){return So(n,"POST","/v1/accounts:signUp",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JM(n,t){return Wh(n,"POST","/v1/accounts:signInWithPassword",bo(n,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tN(n,t){return Wh(n,"POST","/v1/accounts:signInWithEmailLink",bo(n,t))}async function eN(n,t){return Wh(n,"POST","/v1/accounts:signInWithEmailLink",bo(n,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ch extends Sx{constructor(t,e,r,i=null){super("password",r),this._email=t,this._password=e,this._tenantId=i}static _fromEmailAndPassword(t,e){return new Ch(t,e,"password")}static _fromEmailAndCode(t,e,r=null){return new Ch(t,e,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const e=typeof t=="string"?JSON.parse(t):t;if(e!=null&&e.email&&(e!=null&&e.password)){if(e.signInMethod==="password")return this._fromEmailAndPassword(e.email,e.password);if(e.signInMethod==="emailLink")return this._fromEmailAndCode(e.email,e.password,e.tenantId)}return null}async _getIdTokenResponse(t){switch(this.signInMethod){case"password":const e={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return vy(t,e,"signInWithPassword",JM);case"emailLink":return tN(t,{email:this._email,oobCode:this._password});default:Li(t,"internal-error")}}async _linkToIdToken(t,e){switch(this.signInMethod){case"password":const r={idToken:e,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return vy(t,r,"signUpPassword",QM);case"emailLink":return eN(t,{idToken:e,email:this._email,oobCode:this._password});default:Li(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ac(n,t){return Wh(n,"POST","/v1/accounts:signInWithIdp",bo(n,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nN="http://localhost";class Rl extends Sx{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const e=new Rl(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(e.idToken=t.idToken),t.accessToken&&(e.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(e.nonce=t.nonce),t.pendingToken&&(e.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(e.accessToken=t.oauthToken,e.secret=t.oauthTokenSecret):Li("argument-error"),e}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const e=typeof t=="string"?JSON.parse(t):t,{providerId:r,signInMethod:i}=e,a=_x(e,["providerId","signInMethod"]);if(!r||!i)return null;const s=new Rl(r,i);return s.idToken=a.idToken||void 0,s.accessToken=a.accessToken||void 0,s.secret=a.secret,s.nonce=a.nonce,s.pendingToken=a.pendingToken||null,s}_getIdTokenResponse(t){const e=this.buildRequest();return ac(t,e)}_linkToIdToken(t,e){const r=this.buildRequest();return r.idToken=e,ac(t,r)}_getReauthenticationResolver(t){const e=this.buildRequest();return e.autoCreate=!1,ac(t,e)}buildRequest(){const t={requestUri:nN,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const e={};this.idToken&&(e.id_token=this.idToken),this.accessToken&&(e.access_token=this.accessToken),this.secret&&(e.oauth_token_secret=this.secret),e.providerId=this.providerId,this.nonce&&!this.pendingToken&&(e.nonce=this.nonce),t.postBody=qh(e)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rN(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function iN(n){const t=ah(sh(n)).link,e=t?ah(sh(t)).deep_link_id:null,r=ah(sh(n)).deep_link_id;return(r?ah(sh(r)).link:null)||r||e||t||n}class Tx{constructor(t){var e,r,i,a,s,l;const c=ah(sh(t)),f=(e=c.apiKey)!==null&&e!==void 0?e:null,d=(r=c.oobCode)!==null&&r!==void 0?r:null,g=rN((i=c.mode)!==null&&i!==void 0?i:null);Vt(f&&d&&g,"argument-error"),this.apiKey=f,this.operation=g,this.code=d,this.continueUrl=(a=c.continueUrl)!==null&&a!==void 0?a:null,this.languageCode=(s=c.lang)!==null&&s!==void 0?s:null,this.tenantId=(l=c.tenantId)!==null&&l!==void 0?l:null}static parseLink(t){const e=iN(t);try{return new Tx(e)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ic{constructor(){this.providerId=Ic.PROVIDER_ID}static credential(t,e){return Ch._fromEmailAndPassword(t,e)}static credentialWithLink(t,e){const r=Tx.parseLink(e);return Vt(r,"argument-error"),Ch._fromEmailAndCode(t,r.code,r.tenantId)}}Ic.PROVIDER_ID="password";Ic.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ic.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rI{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yh extends rI{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class to extends Yh{constructor(){super("facebook.com")}static credential(t){return Rl._fromParams({providerId:to.PROVIDER_ID,signInMethod:to.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return to.credentialFromTaggedObject(t)}static credentialFromError(t){return to.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return to.credential(t.oauthAccessToken)}catch{return null}}}to.FACEBOOK_SIGN_IN_METHOD="facebook.com";to.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eo extends Yh{constructor(){super("google.com"),this.addScope("profile")}static credential(t,e){return Rl._fromParams({providerId:eo.PROVIDER_ID,signInMethod:eo.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:e})}static credentialFromResult(t){return eo.credentialFromTaggedObject(t)}static credentialFromError(t){return eo.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:e,oauthAccessToken:r}=t;if(!e&&!r)return null;try{return eo.credential(e,r)}catch{return null}}}eo.GOOGLE_SIGN_IN_METHOD="google.com";eo.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class no extends Yh{constructor(){super("github.com")}static credential(t){return Rl._fromParams({providerId:no.PROVIDER_ID,signInMethod:no.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return no.credentialFromTaggedObject(t)}static credentialFromError(t){return no.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return no.credential(t.oauthAccessToken)}catch{return null}}}no.GITHUB_SIGN_IN_METHOD="github.com";no.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ro extends Yh{constructor(){super("twitter.com")}static credential(t,e){return Rl._fromParams({providerId:ro.PROVIDER_ID,signInMethod:ro.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:e})}static credentialFromResult(t){return ro.credentialFromTaggedObject(t)}static credentialFromError(t){return ro.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:e,oauthTokenSecret:r}=t;if(!e||!r)return null;try{return ro.credential(e,r)}catch{return null}}}ro.TWITTER_SIGN_IN_METHOD="twitter.com";ro.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aN(n,t){return Wh(n,"POST","/v1/accounts:signUp",bo(n,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dl{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,e,r,i=!1){const a=await Pi._fromIdTokenResponse(t,r,i),s=Yw(r);return new Dl({user:a,providerId:s,_tokenResponse:r,operationType:e})}static async _forOperation(t,e,r){await t._updateTokensIfNecessary(r,!0);const i=Yw(r);return new Dl({user:t,providerId:i,_tokenResponse:r,operationType:e})}}function Yw(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k1 extends hs{constructor(t,e,r,i){var a;super(e.code,e.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,k1.prototype),this.customData={appName:t.name,tenantId:(a=t.tenantId)!==null&&a!==void 0?a:void 0,_serverResponse:e.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(t,e,r,i){return new k1(t,e,r,i)}}function iI(n,t,e,r){return(t==="reauthenticate"?e._getReauthenticationResolver(n):e._getIdTokenResponse(n)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?k1._fromErrorAndOperation(n,a,t,r):a})}async function sN(n,t,e=!1){const r=await Th(n,t._linkToIdToken(n.auth,await n.getIdToken()),e);return Dl._forOperation(n,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oN(n,t,e=!1){const{auth:r}=n;if(pi(r.app))return Promise.reject(Qa(r));const i="reauthenticate";try{const a=await Th(n,iI(r,i,t,n),e);Vt(a.idToken,r,"internal-error");const s=wx(a.idToken);Vt(s,r,"internal-error");const{sub:l}=s;return Vt(n.uid===l,r,"user-mismatch"),Dl._forOperation(n,i,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&Li(r,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aI(n,t,e=!1){if(pi(n.app))return Promise.reject(Qa(n));const r="signIn",i=await iI(n,r,t),a=await Dl._fromIdTokenResponse(n,r,i);return e||await n._updateCurrentUser(a.user),a}async function lN(n,t){return aI(Pl(n),t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sI(n){const t=Pl(n);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function uN(n,t,e){if(pi(n.app))return Promise.reject(Qa(n));const r=Pl(n),s=await vy(r,{returnSecureToken:!0,email:t,password:e,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",aN).catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&sI(n),c}),l=await Dl._fromIdTokenResponse(r,"signIn",s);return await r._updateCurrentUser(l.user),l}function cN(n,t,e){return pi(n.app)?Promise.reject(Qa(n)):lN(Pn(n),Ic.credential(t,e)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&sI(n),r})}function fN(n,t,e,r){return Pn(n).onIdTokenChanged(t,e,r)}function hN(n,t,e){return Pn(n).beforeAuthStateChanged(t,e)}function dN(n,t,e,r){return Pn(n).onAuthStateChanged(t,e,r)}const L1="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oI{constructor(t,e){this.storageRetriever=t,this.type=e}_isAvailable(){try{return this.storage?(this.storage.setItem(L1,"1"),this.storage.removeItem(L1),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,e){return this.storage.setItem(t,JSON.stringify(e)),Promise.resolve()}_get(t){const e=this.storage.getItem(t);return Promise.resolve(e?JSON.parse(e):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gN=1e3,pN=10;class lI extends oI{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,e)=>this.onStorageEvent(t,e),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=QC(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const e of Object.keys(this.listeners)){const r=this.storage.getItem(e),i=this.localCache[e];r!==i&&t(e,i,r)}}onStorageEvent(t,e=!1){if(!t.key){this.forAllChangedKeys((s,l,c)=>{this.notifyListeners(s,c)});return}const r=t.key;e?this.detachListener():this.stopPolling();const i=()=>{const s=this.storage.getItem(r);!e&&this.localCache[r]===s||this.notifyListeners(r,s)},a=this.storage.getItem(r);NM()&&a!==t.newValue&&t.newValue!==t.oldValue?setTimeout(i,pN):i()}notifyListeners(t,e){this.localCache[t]=e;const r=this.listeners[t];if(r)for(const i of Array.from(r))i(e&&JSON.parse(e))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,e,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:e,newValue:r}),!0)})},gN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,e){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,e){await super._set(t,e),this.localCache[t]=JSON.stringify(e)}async _get(t){const e=await super._get(t);return this.localCache[t]=JSON.stringify(e),e}async _remove(t){await super._remove(t),delete this.localCache[t]}}lI.type="LOCAL";const mN=lI;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uI extends oI{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,e){}_removeListener(t,e){}}uI.type="SESSION";const cI=uI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vN(n){return Promise.all(n.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(e){return{fulfilled:!1,reason:e}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eg{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const e=this.receivers.find(i=>i.isListeningto(t));if(e)return e;const r=new Eg(t);return this.receivers.push(r),r}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const e=t,{eventId:r,eventType:i,data:a}=e.data,s=this.handlersMap[i];if(!(s!=null&&s.size))return;e.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const l=Array.from(s).map(async f=>f(e.origin,a)),c=await vN(l);e.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:c})}_subscribe(t,e){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(e)}_unsubscribe(t,e){this.handlersMap[t]&&e&&this.handlersMap[t].delete(e),(!e||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Eg.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cx(n="",t=10){let e="";for(let r=0;r<t;r++)e+=Math.floor(Math.random()*10);return n+e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yN{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,e,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let a,s;return new Promise((l,c)=>{const f=Cx("",20);i.port1.start();const d=setTimeout(()=>{c(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(g){const m=g;if(m.data.eventId===f)switch(m.data.status){case"ack":clearTimeout(d),a=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),l(m.data.response);break;default:clearTimeout(d),clearTimeout(a),c(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:t,eventId:f,data:e},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sa(){return window}function xN(n){sa().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fI(){return typeof sa().WorkerGlobalScope<"u"&&typeof sa().importScripts=="function"}async function _N(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function AN(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function EN(){return fI()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hI="firebaseLocalStorageDb",wN=1,B1="firebaseLocalStorage",dI="fbase_key";class Kh{constructor(t){this.request=t}toPromise(){return new Promise((t,e)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{e(this.request.error)})})}}function wg(n,t){return n.transaction([B1],t?"readwrite":"readonly").objectStore(B1)}function bN(){const n=indexedDB.deleteDatabase(hI);return new Kh(n).toPromise()}function yy(){const n=indexedDB.open(hI,wN);return new Promise((t,e)=>{n.addEventListener("error",()=>{e(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(B1,{keyPath:dI})}catch(i){e(i)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(B1)?t(r):(r.close(),await bN(),t(await yy()))})})}async function Kw(n,t,e){const r=wg(n,!0).put({[dI]:t,value:e});return new Kh(r).toPromise()}async function SN(n,t){const e=wg(n,!1).get(t),r=await new Kh(e).toPromise();return r===void 0?null:r.value}function Zw(n,t){const e=wg(n,!0).delete(t);return new Kh(e).toPromise()}const TN=800,CN=3;class gI{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await yy(),this.db)}async _withRetries(t){let e=0;for(;;)try{const r=await this._openDb();return await t(r)}catch(r){if(e++>CN)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return fI()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Eg._getInstance(EN()),this.receiver._subscribe("keyChanged",async(t,e)=>({keyProcessed:(await this._poll()).includes(e.key)})),this.receiver._subscribe("ping",async(t,e)=>["keyChanged"])}async initializeSender(){var t,e;if(this.activeServiceWorker=await _N(),!this.activeServiceWorker)return;this.sender=new yN(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((t=r[0])===null||t===void 0)&&t.fulfilled&&!((e=r[0])===null||e===void 0)&&e.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||AN()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await yy();return await Kw(t,L1,"1"),await Zw(t,L1),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,e){return this._withPendingWrite(async()=>(await this._withRetries(r=>Kw(r,t,e)),this.localCache[t]=e,this.notifyServiceWorker(t)))}async _get(t){const e=await this._withRetries(r=>SN(r,t));return this.localCache[t]=e,e}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(e=>Zw(e,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(i=>{const a=wg(i,!1).getAll();return new Kh(a).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const e=[],r=new Set;if(t.length!==0)for(const{fbase_key:i,value:a}of t)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(a)&&(this.notifyListeners(i,a),e.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),e.push(i));return e}notifyListeners(t,e){this.localCache[t]=e;const r=this.listeners[t];if(r)for(const i of Array.from(r))i(e)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),TN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,e){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}gI.type="LOCAL";const IN=gI;new Xh(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RN(n,t){return t?Ya(t):(Vt(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ix extends Sx{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return ac(t,this._buildIdpRequest())}_linkToIdToken(t,e){return ac(t,this._buildIdpRequest(e))}_getReauthenticationResolver(t){return ac(t,this._buildIdpRequest())}_buildIdpRequest(t){const e={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(e.idToken=t),e}}function DN(n){return aI(n.auth,new Ix(n),n.bypassAuthState)}function ON(n){const{auth:t,user:e}=n;return Vt(e,t,"internal-error"),oN(e,new Ix(n),n.bypassAuthState)}async function MN(n){const{auth:t,user:e}=n;return Vt(e,t,"internal-error"),sN(e,new Ix(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pI{constructor(t,e,r,i,a=!1){this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(e)?e:[e]}execute(){return new Promise(async(t,e)=>{this.pendingPromise={resolve:t,reject:e};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(t){const{urlResponse:e,sessionId:r,postBody:i,tenantId:a,error:s,type:l}=t;if(s){this.reject(s);return}const c={auth:this.auth,requestUri:e,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(c))}catch(f){this.reject(f)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return DN;case"linkViaPopup":case"linkViaRedirect":return MN;case"reauthViaPopup":case"reauthViaRedirect":return ON;default:Li(this.auth,"internal-error")}}resolve(t){rs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){rs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NN=new Xh(2e3,1e4);class Ku extends pI{constructor(t,e,r,i,a){super(t,e,i,a),this.provider=r,this.authWindow=null,this.pollId=null,Ku.currentPopupAction&&Ku.currentPopupAction.cancel(),Ku.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return Vt(t,this.auth,"internal-error"),t}async onExecution(){rs(this.filter.length===1,"Popup operations only handle one event");const t=Cx();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(aa(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(aa(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ku.currentPopupAction=null}pollUserCancellation(){const t=()=>{var e,r;if(!((r=(e=this.authWindow)===null||e===void 0?void 0:e.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(aa(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,NN.get())};t()}}Ku.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PN="pendingRedirect",m1=new Map;class kN extends pI{constructor(t,e,r=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],e,void 0,r),this.eventId=null}async execute(){let t=m1.get(this.auth._key());if(!t){try{const r=await LN(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(r)}catch(e){t=()=>Promise.reject(e)}m1.set(this.auth._key(),t)}return this.bypassAuthState||m1.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const e=await this.auth._redirectUserForId(t.eventId);if(e)return this.user=e,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function LN(n,t){const e=FN(t),r=VN(n);if(!await r._isAvailable())return!1;const i=await r._get(e)==="true";return await r._remove(e),i}function BN(n,t){m1.set(n._key(),t)}function VN(n){return Ya(n._redirectPersistence)}function FN(n){return p1(PN,n.config.apiKey,n.name)}async function jN(n,t,e=!1){if(pi(n.app))return Promise.reject(Qa(n));const r=Pl(n),i=RN(r,t),s=await new kN(r,i,e).execute();return s&&!e&&(delete s.user._redirectEventId,await r._persistUserIfCurrent(s.user),await r._setRedirectUser(null,t)),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UN=600*1e3;class zN{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let e=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(t,r)&&(e=!0,this.sendToConsumer(t,r),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!HN(t)||(this.hasHandledPotentialRedirect=!0,e||(this.queuedRedirectEvent=t,e=!0)),e}sendToConsumer(t,e){var r;if(t.error&&!mI(t)){const i=((r=t.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";e.onError(aa(this.auth,i))}else e.onAuthEvent(t)}isEventForConsumer(t,e){const r=e.eventId===null||!!t.eventId&&t.eventId===e.eventId;return e.filter.includes(t.type)&&r}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=UN&&this.cachedEventUids.clear(),this.cachedEventUids.has(Qw(t))}saveEventToCache(t){this.cachedEventUids.add(Qw(t)),this.lastProcessedEventTime=Date.now()}}function Qw(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(t=>t).join("-")}function mI({type:n,error:t}){return n==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function HN(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return mI(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GN(n,t={}){return So(n,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $N=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,qN=/^https?/;async function XN(n){if(n.config.emulator)return;const{authorizedDomains:t}=await GN(n);for(const e of t)try{if(WN(e))return}catch{}Li(n,"unauthorized-domain")}function WN(n){const t=py(),{protocol:e,hostname:r}=new URL(t);if(n.startsWith("chrome-extension://")){const s=new URL(n);return s.hostname===""&&r===""?e==="chrome-extension:"&&n.replace("chrome-extension://","")===t.replace("chrome-extension://",""):e==="chrome-extension:"&&s.hostname===r}if(!qN.test(e))return!1;if($N.test(n))return r===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YN=new Xh(3e4,6e4);function Jw(){const n=sa().___jsl;if(n!=null&&n.H){for(const t of Object.keys(n.H))if(n.H[t].r=n.H[t].r||[],n.H[t].L=n.H[t].L||[],n.H[t].r=[...n.H[t].L],n.CP)for(let e=0;e<n.CP.length;e++)n.CP[e]=null}}function KN(n){return new Promise((t,e)=>{var r,i,a;function s(){Jw(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Jw(),e(aa(n,"network-request-failed"))},timeout:YN.get()})}if(!((i=(r=sa().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)t(gapi.iframes.getContext());else if(!((a=sa().gapi)===null||a===void 0)&&a.load)s();else{const l=zM("iframefcb");return sa()[l]=()=>{gapi.load?s():e(aa(n,"network-request-failed"))},tI(`${UM()}?onload=${l}`).catch(c=>e(c))}}).catch(t=>{throw v1=null,t})}let v1=null;function ZN(n){return v1=v1||KN(n),v1}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QN=new Xh(5e3,15e3),JN="__/auth/iframe",t5="emulator/auth/iframe",e5={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},n5=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function r5(n){const t=n.config;Vt(t.authDomain,n,"auth-domain-config-required");const e=t.emulator?Ex(t,t5):`https://${n.config.authDomain}/${JN}`,r={apiKey:t.apiKey,appName:n.name,v:Cc},i=n5.get(n.config.apiHost);i&&(r.eid=i);const a=n._getFrameworks();return a.length&&(r.fw=a.join(",")),`${e}?${qh(r).slice(1)}`}async function i5(n){const t=await ZN(n),e=sa().gapi;return Vt(e,n,"internal-error"),t.open({where:document.body,url:r5(n),messageHandlersFilter:e.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:e5,dontclear:!0},r=>new Promise(async(i,a)=>{await r.restyle({setHideOnLeave:!1});const s=aa(n,"network-request-failed"),l=sa().setTimeout(()=>{a(s)},QN.get());function c(){sa().clearTimeout(l),i(r)}r.ping(c).then(c,()=>{a(s)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a5={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},s5=500,o5=600,l5="_blank",u5="http://localhost";class tb{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function c5(n,t,e,r=s5,i=o5){const a=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const c=Object.assign(Object.assign({},a5),{width:r.toString(),height:i.toString(),top:a,left:s}),f=gr().toLowerCase();e&&(l=XC(f)?l5:e),$C(f)&&(t=t||u5,c.scrollbars="yes");const d=Object.entries(c).reduce((m,[v,_])=>`${m}${v}=${_},`,"");if(MM(f)&&l!=="_self")return f5(t||"",l),new tb(null);const g=window.open(t||"",l,d);Vt(g,n,"popup-blocked");try{g.focus()}catch{}return new tb(g)}function f5(n,t){const e=document.createElement("a");e.href=n,e.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),e.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h5="__/auth/handler",d5="emulator/auth/handler",g5=encodeURIComponent("fac");async function eb(n,t,e,r,i,a){Vt(n.config.authDomain,n,"auth-domain-config-required"),Vt(n.config.apiKey,n,"invalid-api-key");const s={apiKey:n.config.apiKey,appName:n.name,authType:e,redirectUrl:r,v:Cc,eventId:i};if(t instanceof rI){t.setDefaultLanguage(n.languageCode),s.providerId=t.providerId||"",tO(t.getCustomParameters())||(s.customParameters=JSON.stringify(t.getCustomParameters()));for(const[d,g]of Object.entries({}))s[d]=g}if(t instanceof Yh){const d=t.getScopes().filter(g=>g!=="");d.length>0&&(s.scopes=d.join(","))}n.tenantId&&(s.tid=n.tenantId);const l=s;for(const d of Object.keys(l))l[d]===void 0&&delete l[d];const c=await n._getAppCheckToken(),f=c?`#${g5}=${encodeURIComponent(c)}`:"";return`${p5(n)}?${qh(l).slice(1)}${f}`}function p5({config:n}){return n.emulator?Ex(n,d5):`https://${n.authDomain}/${h5}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _v="webStorageSupport";class m5{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=cI,this._completeRedirectFn=jN,this._overrideRedirectResult=BN}async _openPopup(t,e,r,i){var a;rs((a=this.eventManagers[t._key()])===null||a===void 0?void 0:a.manager,"_initialize() not called before _openPopup()");const s=await eb(t,e,r,py(),i);return c5(t,s,Cx())}async _openRedirect(t,e,r,i){await this._originValidation(t);const a=await eb(t,e,r,py(),i);return xN(a),new Promise(()=>{})}_initialize(t){const e=t._key();if(this.eventManagers[e]){const{manager:i,promise:a}=this.eventManagers[e];return i?Promise.resolve(i):(rs(a,"If manager is not set, promise should be"),a)}const r=this.initAndGetManager(t);return this.eventManagers[e]={promise:r},r.catch(()=>{delete this.eventManagers[e]}),r}async initAndGetManager(t){const e=await i5(t),r=new zN(t);return e.register("authEvent",i=>(Vt(i==null?void 0:i.authEvent,t,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=e,r}_isIframeWebStorageSupported(t,e){this.iframes[t._key()].send(_v,{type:_v},i=>{var a;const s=(a=i==null?void 0:i[0])===null||a===void 0?void 0:a[_v];s!==void 0&&e(!!s),Li(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const e=t._key();return this.originValidationPromises[e]||(this.originValidationPromises[e]=XN(t)),this.originValidationPromises[e]}get _shouldInitProactively(){return QC()||qC()||bx()}}const v5=m5;var nb="@firebase/auth",rb="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y5{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)===null||t===void 0?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const e=this.auth.onIdTokenChanged(r=>{t((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,e),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const e=this.internalListeners.get(t);e&&(this.internalListeners.delete(t),e(),this.updateProactiveRefresh())}assertAuthConfigured(){Vt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x5(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function _5(n){cc(new Il("auth",(t,{options:e})=>{const r=t.getProvider("app").getImmediate(),i=t.getProvider("heartbeat"),a=t.getProvider("app-check-internal"),{apiKey:s,authDomain:l}=r.options;Vt(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:s,authDomain:l,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:JC(n)},f=new VM(r,i,a,c);return WM(f,e),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,r)=>{t.getProvider("auth-internal").initialize()})),cc(new Il("auth-internal",t=>{const e=Pl(t.getProvider("auth").getImmediate());return(r=>new y5(r))(e)},"PRIVATE").setInstantiationMode("EXPLICIT")),fo(nb,rb,x5(n)),fo(nb,rb,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A5=300,E5=IC("authIdTokenMaxAge")||A5;let ib=null;const w5=n=>async t=>{const e=t&&await t.getIdTokenResult(),r=e&&(new Date().getTime()-Date.parse(e.issuedAtTime))/1e3;if(r&&r>E5)return;const i=e==null?void 0:e.token;ib!==i&&(ib=i,await fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function b5(n=PC()){const t=xx(n,"auth");if(t.isInitialized())return t.getImmediate();const e=XM(n,{popupRedirectResolver:v5,persistence:[IN,mN,cI]}),r=IC("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(r,location.origin);if(location.origin===a.origin){const s=w5(a.toString());hN(e,s,()=>s(e.currentUser)),fN(e,l=>s(l))}}const i=TC("auth");return i&&YM(e,`http://${i}`),e}function S5(){var n,t;return(t=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&t!==void 0?t:document}FM({loadJS(n){return new Promise((t,e)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=t,r.onerror=i=>{const a=aa("internal-error");a.customData=i,e(a)},r.type="text/javascript",r.charset="UTF-8",S5().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});_5("Browser");var T5="firebase",C5="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */fo(T5,C5,"app");var ab=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ho,vI;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(O,S){function D(){}D.prototype=S.prototype,O.D=S.prototype,O.prototype=new D,O.prototype.constructor=O,O.C=function(V,B,F){for(var j=Array(arguments.length-2),rt=2;rt<arguments.length;rt++)j[rt-2]=arguments[rt];return S.prototype[B].apply(V,j)}}function e(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(r,e),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(O,S,D){D||(D=0);var V=Array(16);if(typeof S=="string")for(var B=0;16>B;++B)V[B]=S.charCodeAt(D++)|S.charCodeAt(D++)<<8|S.charCodeAt(D++)<<16|S.charCodeAt(D++)<<24;else for(B=0;16>B;++B)V[B]=S[D++]|S[D++]<<8|S[D++]<<16|S[D++]<<24;S=O.g[0],D=O.g[1],B=O.g[2];var F=O.g[3],j=S+(F^D&(B^F))+V[0]+3614090360&4294967295;S=D+(j<<7&4294967295|j>>>25),j=F+(B^S&(D^B))+V[1]+3905402710&4294967295,F=S+(j<<12&4294967295|j>>>20),j=B+(D^F&(S^D))+V[2]+606105819&4294967295,B=F+(j<<17&4294967295|j>>>15),j=D+(S^B&(F^S))+V[3]+3250441966&4294967295,D=B+(j<<22&4294967295|j>>>10),j=S+(F^D&(B^F))+V[4]+4118548399&4294967295,S=D+(j<<7&4294967295|j>>>25),j=F+(B^S&(D^B))+V[5]+1200080426&4294967295,F=S+(j<<12&4294967295|j>>>20),j=B+(D^F&(S^D))+V[6]+2821735955&4294967295,B=F+(j<<17&4294967295|j>>>15),j=D+(S^B&(F^S))+V[7]+4249261313&4294967295,D=B+(j<<22&4294967295|j>>>10),j=S+(F^D&(B^F))+V[8]+1770035416&4294967295,S=D+(j<<7&4294967295|j>>>25),j=F+(B^S&(D^B))+V[9]+2336552879&4294967295,F=S+(j<<12&4294967295|j>>>20),j=B+(D^F&(S^D))+V[10]+4294925233&4294967295,B=F+(j<<17&4294967295|j>>>15),j=D+(S^B&(F^S))+V[11]+2304563134&4294967295,D=B+(j<<22&4294967295|j>>>10),j=S+(F^D&(B^F))+V[12]+1804603682&4294967295,S=D+(j<<7&4294967295|j>>>25),j=F+(B^S&(D^B))+V[13]+4254626195&4294967295,F=S+(j<<12&4294967295|j>>>20),j=B+(D^F&(S^D))+V[14]+2792965006&4294967295,B=F+(j<<17&4294967295|j>>>15),j=D+(S^B&(F^S))+V[15]+1236535329&4294967295,D=B+(j<<22&4294967295|j>>>10),j=S+(B^F&(D^B))+V[1]+4129170786&4294967295,S=D+(j<<5&4294967295|j>>>27),j=F+(D^B&(S^D))+V[6]+3225465664&4294967295,F=S+(j<<9&4294967295|j>>>23),j=B+(S^D&(F^S))+V[11]+643717713&4294967295,B=F+(j<<14&4294967295|j>>>18),j=D+(F^S&(B^F))+V[0]+3921069994&4294967295,D=B+(j<<20&4294967295|j>>>12),j=S+(B^F&(D^B))+V[5]+3593408605&4294967295,S=D+(j<<5&4294967295|j>>>27),j=F+(D^B&(S^D))+V[10]+38016083&4294967295,F=S+(j<<9&4294967295|j>>>23),j=B+(S^D&(F^S))+V[15]+3634488961&4294967295,B=F+(j<<14&4294967295|j>>>18),j=D+(F^S&(B^F))+V[4]+3889429448&4294967295,D=B+(j<<20&4294967295|j>>>12),j=S+(B^F&(D^B))+V[9]+568446438&4294967295,S=D+(j<<5&4294967295|j>>>27),j=F+(D^B&(S^D))+V[14]+3275163606&4294967295,F=S+(j<<9&4294967295|j>>>23),j=B+(S^D&(F^S))+V[3]+4107603335&4294967295,B=F+(j<<14&4294967295|j>>>18),j=D+(F^S&(B^F))+V[8]+1163531501&4294967295,D=B+(j<<20&4294967295|j>>>12),j=S+(B^F&(D^B))+V[13]+2850285829&4294967295,S=D+(j<<5&4294967295|j>>>27),j=F+(D^B&(S^D))+V[2]+4243563512&4294967295,F=S+(j<<9&4294967295|j>>>23),j=B+(S^D&(F^S))+V[7]+1735328473&4294967295,B=F+(j<<14&4294967295|j>>>18),j=D+(F^S&(B^F))+V[12]+2368359562&4294967295,D=B+(j<<20&4294967295|j>>>12),j=S+(D^B^F)+V[5]+4294588738&4294967295,S=D+(j<<4&4294967295|j>>>28),j=F+(S^D^B)+V[8]+2272392833&4294967295,F=S+(j<<11&4294967295|j>>>21),j=B+(F^S^D)+V[11]+1839030562&4294967295,B=F+(j<<16&4294967295|j>>>16),j=D+(B^F^S)+V[14]+4259657740&4294967295,D=B+(j<<23&4294967295|j>>>9),j=S+(D^B^F)+V[1]+2763975236&4294967295,S=D+(j<<4&4294967295|j>>>28),j=F+(S^D^B)+V[4]+1272893353&4294967295,F=S+(j<<11&4294967295|j>>>21),j=B+(F^S^D)+V[7]+4139469664&4294967295,B=F+(j<<16&4294967295|j>>>16),j=D+(B^F^S)+V[10]+3200236656&4294967295,D=B+(j<<23&4294967295|j>>>9),j=S+(D^B^F)+V[13]+681279174&4294967295,S=D+(j<<4&4294967295|j>>>28),j=F+(S^D^B)+V[0]+3936430074&4294967295,F=S+(j<<11&4294967295|j>>>21),j=B+(F^S^D)+V[3]+3572445317&4294967295,B=F+(j<<16&4294967295|j>>>16),j=D+(B^F^S)+V[6]+76029189&4294967295,D=B+(j<<23&4294967295|j>>>9),j=S+(D^B^F)+V[9]+3654602809&4294967295,S=D+(j<<4&4294967295|j>>>28),j=F+(S^D^B)+V[12]+3873151461&4294967295,F=S+(j<<11&4294967295|j>>>21),j=B+(F^S^D)+V[15]+530742520&4294967295,B=F+(j<<16&4294967295|j>>>16),j=D+(B^F^S)+V[2]+3299628645&4294967295,D=B+(j<<23&4294967295|j>>>9),j=S+(B^(D|~F))+V[0]+4096336452&4294967295,S=D+(j<<6&4294967295|j>>>26),j=F+(D^(S|~B))+V[7]+1126891415&4294967295,F=S+(j<<10&4294967295|j>>>22),j=B+(S^(F|~D))+V[14]+2878612391&4294967295,B=F+(j<<15&4294967295|j>>>17),j=D+(F^(B|~S))+V[5]+4237533241&4294967295,D=B+(j<<21&4294967295|j>>>11),j=S+(B^(D|~F))+V[12]+1700485571&4294967295,S=D+(j<<6&4294967295|j>>>26),j=F+(D^(S|~B))+V[3]+2399980690&4294967295,F=S+(j<<10&4294967295|j>>>22),j=B+(S^(F|~D))+V[10]+4293915773&4294967295,B=F+(j<<15&4294967295|j>>>17),j=D+(F^(B|~S))+V[1]+2240044497&4294967295,D=B+(j<<21&4294967295|j>>>11),j=S+(B^(D|~F))+V[8]+1873313359&4294967295,S=D+(j<<6&4294967295|j>>>26),j=F+(D^(S|~B))+V[15]+4264355552&4294967295,F=S+(j<<10&4294967295|j>>>22),j=B+(S^(F|~D))+V[6]+2734768916&4294967295,B=F+(j<<15&4294967295|j>>>17),j=D+(F^(B|~S))+V[13]+1309151649&4294967295,D=B+(j<<21&4294967295|j>>>11),j=S+(B^(D|~F))+V[4]+4149444226&4294967295,S=D+(j<<6&4294967295|j>>>26),j=F+(D^(S|~B))+V[11]+3174756917&4294967295,F=S+(j<<10&4294967295|j>>>22),j=B+(S^(F|~D))+V[2]+718787259&4294967295,B=F+(j<<15&4294967295|j>>>17),j=D+(F^(B|~S))+V[9]+3951481745&4294967295,O.g[0]=O.g[0]+S&4294967295,O.g[1]=O.g[1]+(B+(j<<21&4294967295|j>>>11))&4294967295,O.g[2]=O.g[2]+B&4294967295,O.g[3]=O.g[3]+F&4294967295}r.prototype.u=function(O,S){S===void 0&&(S=O.length);for(var D=S-this.blockSize,V=this.B,B=this.h,F=0;F<S;){if(B==0)for(;F<=D;)i(this,O,F),F+=this.blockSize;if(typeof O=="string"){for(;F<S;)if(V[B++]=O.charCodeAt(F++),B==this.blockSize){i(this,V),B=0;break}}else for(;F<S;)if(V[B++]=O[F++],B==this.blockSize){i(this,V),B=0;break}}this.h=B,this.o+=S},r.prototype.v=function(){var O=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);O[0]=128;for(var S=1;S<O.length-8;++S)O[S]=0;var D=8*this.o;for(S=O.length-8;S<O.length;++S)O[S]=D&255,D/=256;for(this.u(O),O=Array(16),S=D=0;4>S;++S)for(var V=0;32>V;V+=8)O[D++]=this.g[S]>>>V&255;return O};function a(O,S){var D=l;return Object.prototype.hasOwnProperty.call(D,O)?D[O]:D[O]=S(O)}function s(O,S){this.h=S;for(var D=[],V=!0,B=O.length-1;0<=B;B--){var F=O[B]|0;V&&F==S||(D[B]=F,V=!1)}this.g=D}var l={};function c(O){return-128<=O&&128>O?a(O,function(S){return new s([S|0],0>S?-1:0)}):new s([O|0],0>O?-1:0)}function f(O){if(isNaN(O)||!isFinite(O))return g;if(0>O)return b(f(-O));for(var S=[],D=1,V=0;O>=D;V++)S[V]=O/D|0,D*=4294967296;return new s(S,0)}function d(O,S){if(O.length==0)throw Error("number format error: empty string");if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(O.charAt(0)=="-")return b(d(O.substring(1),S));if(0<=O.indexOf("-"))throw Error('number format error: interior "-" character');for(var D=f(Math.pow(S,8)),V=g,B=0;B<O.length;B+=8){var F=Math.min(8,O.length-B),j=parseInt(O.substring(B,B+F),S);8>F?(F=f(Math.pow(S,F)),V=V.j(F).add(f(j))):(V=V.j(D),V=V.add(f(j)))}return V}var g=c(0),m=c(1),v=c(16777216);n=s.prototype,n.m=function(){if(w(this))return-b(this).m();for(var O=0,S=1,D=0;D<this.g.length;D++){var V=this.i(D);O+=(0<=V?V:4294967296+V)*S,S*=4294967296}return O},n.toString=function(O){if(O=O||10,2>O||36<O)throw Error("radix out of range: "+O);if(_(this))return"0";if(w(this))return"-"+b(this).toString(O);for(var S=f(Math.pow(O,6)),D=this,V="";;){var B=M(D,S).g;D=C(D,B.j(S));var F=((0<D.g.length?D.g[0]:D.h)>>>0).toString(O);if(D=B,_(D))return F+V;for(;6>F.length;)F="0"+F;V=F+V}},n.i=function(O){return 0>O?0:O<this.g.length?this.g[O]:this.h};function _(O){if(O.h!=0)return!1;for(var S=0;S<O.g.length;S++)if(O.g[S]!=0)return!1;return!0}function w(O){return O.h==-1}n.l=function(O){return O=C(this,O),w(O)?-1:_(O)?0:1};function b(O){for(var S=O.g.length,D=[],V=0;V<S;V++)D[V]=~O.g[V];return new s(D,~O.h).add(m)}n.abs=function(){return w(this)?b(this):this},n.add=function(O){for(var S=Math.max(this.g.length,O.g.length),D=[],V=0,B=0;B<=S;B++){var F=V+(this.i(B)&65535)+(O.i(B)&65535),j=(F>>>16)+(this.i(B)>>>16)+(O.i(B)>>>16);V=j>>>16,F&=65535,j&=65535,D[B]=j<<16|F}return new s(D,D[D.length-1]&-2147483648?-1:0)};function C(O,S){return O.add(b(S))}n.j=function(O){if(_(this)||_(O))return g;if(w(this))return w(O)?b(this).j(b(O)):b(b(this).j(O));if(w(O))return b(this.j(b(O)));if(0>this.l(v)&&0>O.l(v))return f(this.m()*O.m());for(var S=this.g.length+O.g.length,D=[],V=0;V<2*S;V++)D[V]=0;for(V=0;V<this.g.length;V++)for(var B=0;B<O.g.length;B++){var F=this.i(V)>>>16,j=this.i(V)&65535,rt=O.i(B)>>>16,mt=O.i(B)&65535;D[2*V+2*B]+=j*mt,I(D,2*V+2*B),D[2*V+2*B+1]+=F*mt,I(D,2*V+2*B+1),D[2*V+2*B+1]+=j*rt,I(D,2*V+2*B+1),D[2*V+2*B+2]+=F*rt,I(D,2*V+2*B+2)}for(V=0;V<S;V++)D[V]=D[2*V+1]<<16|D[2*V];for(V=S;V<2*S;V++)D[V]=0;return new s(D,0)};function I(O,S){for(;(O[S]&65535)!=O[S];)O[S+1]+=O[S]>>>16,O[S]&=65535,S++}function R(O,S){this.g=O,this.h=S}function M(O,S){if(_(S))throw Error("division by zero");if(_(O))return new R(g,g);if(w(O))return S=M(b(O),S),new R(b(S.g),b(S.h));if(w(S))return S=M(O,b(S)),new R(b(S.g),S.h);if(30<O.g.length){if(w(O)||w(S))throw Error("slowDivide_ only works with positive integers.");for(var D=m,V=S;0>=V.l(O);)D=N(D),V=N(V);var B=k(D,1),F=k(V,1);for(V=k(V,2),D=k(D,2);!_(V);){var j=F.add(V);0>=j.l(O)&&(B=B.add(D),F=j),V=k(V,1),D=k(D,1)}return S=C(O,B.j(S)),new R(B,S)}for(B=g;0<=O.l(S);){for(D=Math.max(1,Math.floor(O.m()/S.m())),V=Math.ceil(Math.log(D)/Math.LN2),V=48>=V?1:Math.pow(2,V-48),F=f(D),j=F.j(S);w(j)||0<j.l(O);)D-=V,F=f(D),j=F.j(S);_(F)&&(F=m),B=B.add(F),O=C(O,j)}return new R(B,O)}n.A=function(O){return M(this,O).h},n.and=function(O){for(var S=Math.max(this.g.length,O.g.length),D=[],V=0;V<S;V++)D[V]=this.i(V)&O.i(V);return new s(D,this.h&O.h)},n.or=function(O){for(var S=Math.max(this.g.length,O.g.length),D=[],V=0;V<S;V++)D[V]=this.i(V)|O.i(V);return new s(D,this.h|O.h)},n.xor=function(O){for(var S=Math.max(this.g.length,O.g.length),D=[],V=0;V<S;V++)D[V]=this.i(V)^O.i(V);return new s(D,this.h^O.h)};function N(O){for(var S=O.g.length+1,D=[],V=0;V<S;V++)D[V]=O.i(V)<<1|O.i(V-1)>>>31;return new s(D,O.h)}function k(O,S){var D=S>>5;S%=32;for(var V=O.g.length-D,B=[],F=0;F<V;F++)B[F]=0<S?O.i(F+D)>>>S|O.i(F+D+1)<<32-S:O.i(F+D);return new s(B,O.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,vI=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=f,s.fromString=d,ho=s}).apply(typeof ab<"u"?ab:typeof self<"u"?self:typeof window<"u"?window:{});var G0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var yI,oh,xI,y1,xy,_I,AI,EI;(function(){var n,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(y,T,P){return y==Array.prototype||y==Object.prototype||(y[T]=P.value),y};function e(y){y=[typeof globalThis=="object"&&globalThis,y,typeof window=="object"&&window,typeof self=="object"&&self,typeof G0=="object"&&G0];for(var T=0;T<y.length;++T){var P=y[T];if(P&&P.Math==Math)return P}throw Error("Cannot find global object")}var r=e(this);function i(y,T){if(T)t:{var P=r;y=y.split(".");for(var z=0;z<y.length-1;z++){var K=y[z];if(!(K in P))break t;P=P[K]}y=y[y.length-1],z=P[y],T=T(z),T!=z&&T!=null&&t(P,y,{configurable:!0,writable:!0,value:T})}}function a(y,T){y instanceof String&&(y+="");var P=0,z=!1,K={next:function(){if(!z&&P<y.length){var at=P++;return{value:T(at,y[at]),done:!1}}return z=!0,{done:!0,value:void 0}}};return K[Symbol.iterator]=function(){return K},K}i("Array.prototype.values",function(y){return y||function(){return a(this,function(T,P){return P})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var s=s||{},l=this||self;function c(y){var T=typeof y;return T=T!="object"?T:y?Array.isArray(y)?"array":T:"null",T=="array"||T=="object"&&typeof y.length=="number"}function f(y){var T=typeof y;return T=="object"&&y!=null||T=="function"}function d(y,T,P){return y.call.apply(y.bind,arguments)}function g(y,T,P){if(!y)throw Error();if(2<arguments.length){var z=Array.prototype.slice.call(arguments,2);return function(){var K=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(K,z),y.apply(T,K)}}return function(){return y.apply(T,arguments)}}function m(y,T,P){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:g,m.apply(null,arguments)}function v(y,T){var P=Array.prototype.slice.call(arguments,1);return function(){var z=P.slice();return z.push.apply(z,arguments),y.apply(this,z)}}function _(y,T){function P(){}P.prototype=T.prototype,y.aa=T.prototype,y.prototype=new P,y.prototype.constructor=y,y.Qb=function(z,K,at){for(var yt=Array(arguments.length-2),re=2;re<arguments.length;re++)yt[re-2]=arguments[re];return T.prototype[K].apply(z,yt)}}function w(y){const T=y.length;if(0<T){const P=Array(T);for(let z=0;z<T;z++)P[z]=y[z];return P}return[]}function b(y,T){for(let P=1;P<arguments.length;P++){const z=arguments[P];if(c(z)){const K=y.length||0,at=z.length||0;y.length=K+at;for(let yt=0;yt<at;yt++)y[K+yt]=z[yt]}else y.push(z)}}class C{constructor(T,P){this.i=T,this.j=P,this.h=0,this.g=null}get(){let T;return 0<this.h?(this.h--,T=this.g,this.g=T.next,T.next=null):T=this.i(),T}}function I(y){return/^[\s\xa0]*$/.test(y)}function R(){var y=l.navigator;return y&&(y=y.userAgent)?y:""}function M(y){return M[" "](y),y}M[" "]=function(){};var N=R().indexOf("Gecko")!=-1&&!(R().toLowerCase().indexOf("webkit")!=-1&&R().indexOf("Edge")==-1)&&!(R().indexOf("Trident")!=-1||R().indexOf("MSIE")!=-1)&&R().indexOf("Edge")==-1;function k(y,T,P){for(const z in y)T.call(P,y[z],z,y)}function O(y,T){for(const P in y)T.call(void 0,y[P],P,y)}function S(y){const T={};for(const P in y)T[P]=y[P];return T}const D="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function V(y,T){let P,z;for(let K=1;K<arguments.length;K++){z=arguments[K];for(P in z)y[P]=z[P];for(let at=0;at<D.length;at++)P=D[at],Object.prototype.hasOwnProperty.call(z,P)&&(y[P]=z[P])}}function B(y){var T=1;y=y.split(":");const P=[];for(;0<T&&y.length;)P.push(y.shift()),T--;return y.length&&P.push(y.join(":")),P}function F(y){l.setTimeout(()=>{throw y},0)}function j(){var y=gt;let T=null;return y.g&&(T=y.g,y.g=y.g.next,y.g||(y.h=null),T.next=null),T}class rt{constructor(){this.h=this.g=null}add(T,P){const z=mt.get();z.set(T,P),this.h?this.h.next=z:this.g=z,this.h=z}}var mt=new C(()=>new q,y=>y.reset());class q{constructor(){this.next=this.g=this.h=null}set(T,P){this.h=T,this.g=P,this.next=null}reset(){this.next=this.g=this.h=null}}let Z,it=!1,gt=new rt,_t=()=>{const y=l.Promise.resolve(void 0);Z=()=>{y.then(Mt)}};var Mt=()=>{for(var y;y=j();){try{y.h.call(y.g)}catch(P){F(P)}var T=mt;T.j(y),100>T.h&&(T.h++,y.next=T.g,T.g=y)}it=!1};function It(){this.s=this.s,this.C=this.C}It.prototype.s=!1,It.prototype.ma=function(){this.s||(this.s=!0,this.N())},It.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Et(y,T){this.type=y,this.g=this.target=T,this.defaultPrevented=!1}Et.prototype.h=function(){this.defaultPrevented=!0};var zt=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var y=!1,T=Object.defineProperty({},"passive",{get:function(){y=!0}});try{const P=()=>{};l.addEventListener("test",P,T),l.removeEventListener("test",P,T)}catch{}return y}();function $t(y,T){if(Et.call(this,y?y.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,y){var P=this.type=y.type,z=y.changedTouches&&y.changedTouches.length?y.changedTouches[0]:null;if(this.target=y.target||y.srcElement,this.g=T,T=y.relatedTarget){if(N){t:{try{M(T.nodeName);var K=!0;break t}catch{}K=!1}K||(T=null)}}else P=="mouseover"?T=y.fromElement:P=="mouseout"&&(T=y.toElement);this.relatedTarget=T,z?(this.clientX=z.clientX!==void 0?z.clientX:z.pageX,this.clientY=z.clientY!==void 0?z.clientY:z.pageY,this.screenX=z.screenX||0,this.screenY=z.screenY||0):(this.clientX=y.clientX!==void 0?y.clientX:y.pageX,this.clientY=y.clientY!==void 0?y.clientY:y.pageY,this.screenX=y.screenX||0,this.screenY=y.screenY||0),this.button=y.button,this.key=y.key||"",this.ctrlKey=y.ctrlKey,this.altKey=y.altKey,this.shiftKey=y.shiftKey,this.metaKey=y.metaKey,this.pointerId=y.pointerId||0,this.pointerType=typeof y.pointerType=="string"?y.pointerType:pe[y.pointerType]||"",this.state=y.state,this.i=y,y.defaultPrevented&&$t.aa.h.call(this)}}_($t,Et);var pe={2:"touch",3:"pen",4:"mouse"};$t.prototype.h=function(){$t.aa.h.call(this);var y=this.i;y.preventDefault?y.preventDefault():y.returnValue=!1};var Re="closure_listenable_"+(1e6*Math.random()|0),Ke=0;function ft(y,T,P,z,K){this.listener=y,this.proxy=null,this.src=T,this.type=P,this.capture=!!z,this.ha=K,this.key=++Ke,this.da=this.fa=!1}function wt(y){y.da=!0,y.listener=null,y.proxy=null,y.src=null,y.ha=null}function Rt(y){this.src=y,this.g={},this.h=0}Rt.prototype.add=function(y,T,P,z,K){var at=y.toString();y=this.g[at],y||(y=this.g[at]=[],this.h++);var yt=Ae(y,T,z,K);return-1<yt?(T=y[yt],P||(T.fa=!1)):(T=new ft(T,this.src,at,!!z,K),T.fa=P,y.push(T)),T};function pt(y,T){var P=T.type;if(P in y.g){var z=y.g[P],K=Array.prototype.indexOf.call(z,T,void 0),at;(at=0<=K)&&Array.prototype.splice.call(z,K,1),at&&(wt(T),y.g[P].length==0&&(delete y.g[P],y.h--))}}function Ae(y,T,P,z){for(var K=0;K<y.length;++K){var at=y[K];if(!at.da&&at.listener==T&&at.capture==!!P&&at.ha==z)return K}return-1}var Nt="closure_lm_"+(1e6*Math.random()|0),ke={};function Ze(y,T,P,z,K){if(Array.isArray(T)){for(var at=0;at<T.length;at++)Ze(y,T[at],P,z,K);return null}return P=Hl(P),y&&y[Re]?y.K(T,P,f(z)?!!z.capture:!1,K):$e(y,T,P,!1,z,K)}function $e(y,T,P,z,K,at){if(!T)throw Error("Invalid event type");var yt=f(K)?!!K.capture:!!K,re=xs(y);if(re||(y[Nt]=re=new Rt(y)),P=re.add(T,P,z,yt,at),P.proxy)return P;if(z=ei(),P.proxy=z,z.src=y,z.listener=P,y.addEventListener)zt||(K=yt),K===void 0&&(K=!1),y.addEventListener(T.toString(),z,K);else if(y.attachEvent)y.attachEvent(_a(T.toString()),z);else if(y.addListener&&y.removeListener)y.addListener(z);else throw Error("addEventListener and attachEvent are unavailable.");return P}function ei(){function y(P){return T.call(y.src,y.listener,P)}const T=Fc;return y}function ys(y,T,P,z,K){if(Array.isArray(T))for(var at=0;at<T.length;at++)ys(y,T[at],P,z,K);else z=f(z)?!!z.capture:!!z,P=Hl(P),y&&y[Re]?(y=y.i,T=String(T).toString(),T in y.g&&(at=y.g[T],P=Ae(at,P,z,K),-1<P&&(wt(at[P]),Array.prototype.splice.call(at,P,1),at.length==0&&(delete y.g[T],y.h--)))):y&&(y=xs(y))&&(T=y.g[T.toString()],y=-1,T&&(y=Ae(T,P,z,K)),(P=-1<y?T[y]:null)&&xa(P))}function xa(y){if(typeof y!="number"&&y&&!y.da){var T=y.src;if(T&&T[Re])pt(T.i,y);else{var P=y.type,z=y.proxy;T.removeEventListener?T.removeEventListener(P,z,y.capture):T.detachEvent?T.detachEvent(_a(P),z):T.addListener&&T.removeListener&&T.removeListener(z),(P=xs(T))?(pt(P,y),P.h==0&&(P.src=null,T[Nt]=null)):wt(y)}}}function _a(y){return y in ke?ke[y]:ke[y]="on"+y}function Fc(y,T){if(y.da)y=!0;else{T=new $t(T,this);var P=y.listener,z=y.ha||y.src;y.fa&&xa(y),y=P.call(z,T)}return y}function xs(y){return y=y[Nt],y instanceof Rt?y:null}var Oo="__closure_events_fn_"+(1e9*Math.random()>>>0);function Hl(y){return typeof y=="function"?y:(y[Oo]||(y[Oo]=function(T){return y.handleEvent(T)}),y[Oo])}function qe(){It.call(this),this.i=new Rt(this),this.M=this,this.F=null}_(qe,It),qe.prototype[Re]=!0,qe.prototype.removeEventListener=function(y,T,P,z){ys(this,y,T,P,z)};function ce(y,T){var P,z=y.F;if(z)for(P=[];z;z=z.F)P.push(z);if(y=y.M,z=T.type||T,typeof T=="string")T=new Et(T,y);else if(T instanceof Et)T.target=T.target||y;else{var K=T;T=new Et(z,y),V(T,K)}if(K=!0,P)for(var at=P.length-1;0<=at;at--){var yt=T.g=P[at];K=Vr(yt,z,!0,T)&&K}if(yt=T.g=y,K=Vr(yt,z,!0,T)&&K,K=Vr(yt,z,!1,T)&&K,P)for(at=0;at<P.length;at++)yt=T.g=P[at],K=Vr(yt,z,!1,T)&&K}qe.prototype.N=function(){if(qe.aa.N.call(this),this.i){var y=this.i,T;for(T in y.g){for(var P=y.g[T],z=0;z<P.length;z++)wt(P[z]);delete y.g[T],y.h--}}this.F=null},qe.prototype.K=function(y,T,P,z){return this.i.add(String(y),T,!1,P,z)},qe.prototype.L=function(y,T,P,z){return this.i.add(String(y),T,!0,P,z)};function Vr(y,T,P,z){if(T=y.i.g[String(T)],!T)return!0;T=T.concat();for(var K=!0,at=0;at<T.length;++at){var yt=T[at];if(yt&&!yt.da&&yt.capture==P){var re=yt.listener,An=yt.ha||yt.src;yt.fa&&pt(y.i,yt),K=re.call(An,z)!==!1&&K}}return K&&!z.defaultPrevented}function ar(y,T,P){if(typeof y=="function")P&&(y=m(y,P));else if(y&&typeof y.handleEvent=="function")y=m(y.handleEvent,y);else throw Error("Invalid listener argument");return 2147483647<Number(T)?-1:l.setTimeout(y,T||0)}function _d(y){y.g=ar(()=>{y.g=null,y.i&&(y.i=!1,_d(y))},y.l);const T=y.h;y.h=null,y.m.apply(null,T)}class dp extends It{constructor(T,P){super(),this.m=T,this.l=P,this.h=null,this.i=!1,this.g=null}j(T){this.h=arguments,this.g?this.i=!0:_d(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Mo(y){It.call(this),this.h=y,this.g={}}_(Mo,It);var No=[];function Po(y){k(y.g,function(T,P){this.g.hasOwnProperty(P)&&xa(T)},y),y.g={}}Mo.prototype.N=function(){Mo.aa.N.call(this),Po(this)},Mo.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var wi=l.JSON.stringify,Gl=l.JSON.parse,ko=class{stringify(y){return l.JSON.stringify(y,void 0)}parse(y){return l.JSON.parse(y,void 0)}};function jc(){}jc.prototype.h=null;function Uc(y){return y.h||(y.h=y.i())}function zc(){}var Aa={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Ea(){Et.call(this,"d")}_(Ea,Et);function Hc(){Et.call(this,"c")}_(Hc,Et);var ji={},Gc=null;function _s(){return Gc=Gc||new qe}ji.La="serverreachability";function $l(y){Et.call(this,ji.La,y)}_($l,Et);function As(y){const T=_s();ce(T,new $l(T))}ji.STAT_EVENT="statevent";function Ad(y,T){Et.call(this,ji.STAT_EVENT,y),this.stat=T}_(Ad,Et);function Xe(y){const T=_s();ce(T,new Ad(T,y))}ji.Ma="timingevent";function _n(y,T){Et.call(this,ji.Ma,y),this.size=T}_(_n,Et);function cn(y,T){if(typeof y!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){y()},T)}function ni(){this.g=!0}ni.prototype.xa=function(){this.g=!1};function $c(y,T,P,z,K,at){y.info(function(){if(y.g)if(at)for(var yt="",re=at.split("&"),An=0;An<re.length;An++){var ie=re[An].split("=");if(1<ie.length){var Bn=ie[0];ie=ie[1];var En=Bn.split("_");yt=2<=En.length&&En[1]=="type"?yt+(Bn+"="+ie+"&"):yt+(Bn+"=redacted&")}}else yt=null;else yt=at;return"XMLHTTP REQ ("+z+") [attempt "+K+"]: "+T+`
`+P+`
`+yt})}function gp(y,T,P,z,K,at,yt){y.info(function(){return"XMLHTTP RESP ("+z+") [ attempt "+K+"]: "+T+`
`+P+`
`+at+" "+yt})}function Es(y,T,P,z){y.info(function(){return"XMLHTTP TEXT ("+T+"): "+Lo(y,P)+(z?" "+z:"")})}function Ed(y,T){y.info(function(){return"TIMEOUT: "+T})}ni.prototype.info=function(){};function Lo(y,T){if(!y.g)return T;if(!T)return null;try{var P=JSON.parse(T);if(P){for(y=0;y<P.length;y++)if(Array.isArray(P[y])){var z=P[y];if(!(2>z.length)){var K=z[1];if(Array.isArray(K)&&!(1>K.length)){var at=K[0];if(at!="noop"&&at!="stop"&&at!="close")for(var yt=1;yt<K.length;yt++)K[yt]=""}}}}return wi(P)}catch{return T}}var ws={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},wa={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Ui;function zi(){}_(zi,jc),zi.prototype.g=function(){return new XMLHttpRequest},zi.prototype.i=function(){return{}},Ui=new zi;function mr(y,T,P,z){this.j=y,this.i=T,this.l=P,this.R=z||1,this.U=new Mo(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new nn}function nn(){this.i=null,this.g="",this.h=!1}var qc={},ql={};function bi(y,T,P){y.L=1,y.v=Uo(Fr(T)),y.m=P,y.P=!0,ba(y,null)}function ba(y,T){y.F=Date.now(),Bo(y),y.A=Fr(y.v);var P=y.A,z=y.R;Array.isArray(z)||(z=[String(z)]),Qc(P.i,"t",z),y.C=0,P=y.j.J,y.h=new nn,y.g=Vd(y.j,P?T:null,!y.m),0<y.O&&(y.M=new dp(m(y.Y,y,y.g),y.O)),T=y.U,P=y.g,z=y.ca;var K="readystatechange";Array.isArray(K)||(K&&(No[0]=K.toString()),K=No);for(var at=0;at<K.length;at++){var yt=Ze(P,K[at],z||T.handleEvent,!1,T.h||T);if(!yt)break;T.g[yt.key]=yt}T=y.H?S(y.H):{},y.m?(y.u||(y.u="POST"),T["Content-Type"]="application/x-www-form-urlencoded",y.g.ea(y.A,y.u,y.m,T)):(y.u="GET",y.g.ea(y.A,y.u,null,T)),As(),$c(y.i,y.u,y.A,y.l,y.R,y.m)}mr.prototype.ca=function(y){y=y.target;const T=this.M;T&&si(y)==3?T.j():this.Y(y)},mr.prototype.Y=function(y){try{if(y==this.g)t:{const En=si(this.g);var T=this.g.Ba();const Ma=this.g.Z();if(!(3>En)&&(En!=3||this.g&&(this.h.h||this.g.oa()||Dd(this.g)))){this.J||En!=4||T==7||(T==8||0>=Ma?As(3):As(2)),bs(this);var P=this.g.Z();this.X=P;e:if(wd(this)){var z=Dd(this.g);y="";var K=z.length,at=si(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Wn(this),Hi(this);var yt="";break e}this.h.i=new l.TextDecoder}for(T=0;T<K;T++)this.h.h=!0,y+=this.h.i.decode(z[T],{stream:!(at&&T==K-1)});z.length=0,this.h.g+=y,this.C=0,yt=this.h.g}else yt=this.g.oa();if(this.o=P==200,gp(this.i,this.u,this.A,this.l,this.R,En,P),this.o){if(this.T&&!this.K){e:{if(this.g){var re,An=this.g;if((re=An.g?An.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!I(re)){var ie=re;break e}}ie=null}if(P=ie)Es(this.i,this.l,P,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Vo(this,P);else{this.o=!1,this.s=3,Xe(12),Wn(this),Hi(this);break t}}if(this.P){P=!0;let Yn;for(;!this.J&&this.C<yt.length;)if(Yn=bd(this,yt),Yn==ql){En==4&&(this.s=4,Xe(14),P=!1),Es(this.i,this.l,null,"[Incomplete Response]");break}else if(Yn==qc){this.s=4,Xe(15),Es(this.i,this.l,yt,"[Invalid Chunk]"),P=!1;break}else Es(this.i,this.l,Yn,null),Vo(this,Yn);if(wd(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),En!=4||yt.length!=0||this.h.h||(this.s=1,Xe(16),P=!1),this.o=this.o&&P,!P)Es(this.i,this.l,yt,"[Invalid Chunked Response]"),Wn(this),Hi(this);else if(0<yt.length&&!this.W){this.W=!0;var Bn=this.j;Bn.g==this&&Bn.ba&&!Bn.M&&(Bn.j.info("Great, no buffering proxy detected. Bytes received: "+yt.length),Yo(Bn),Bn.M=!0,Xe(11))}}else Es(this.i,this.l,yt,null),Vo(this,yt);En==4&&Wn(this),this.o&&!this.J&&(En==4?kd(this.j,this):(this.o=!1,Bo(this)))}else xp(this.g),P==400&&0<yt.indexOf("Unknown SID")?(this.s=3,Xe(12)):(this.s=0,Xe(13)),Wn(this),Hi(this)}}}catch{}finally{}};function wd(y){return y.g?y.u=="GET"&&y.L!=2&&y.j.Ca:!1}function bd(y,T){var P=y.C,z=T.indexOf(`
`,P);return z==-1?ql:(P=Number(T.substring(P,z)),isNaN(P)?qc:(z+=1,z+P>T.length?ql:(T=T.slice(z,z+P),y.C=z+P,T)))}mr.prototype.cancel=function(){this.J=!0,Wn(this)};function Bo(y){y.S=Date.now()+y.I,Sd(y,y.I)}function Sd(y,T){if(y.B!=null)throw Error("WatchDog timer not null");y.B=cn(m(y.ba,y),T)}function bs(y){y.B&&(l.clearTimeout(y.B),y.B=null)}mr.prototype.ba=function(){this.B=null;const y=Date.now();0<=y-this.S?(Ed(this.i,this.A),this.L!=2&&(As(),Xe(17)),Wn(this),this.s=2,Hi(this)):Sd(this,this.S-y)};function Hi(y){y.j.G==0||y.J||kd(y.j,y)}function Wn(y){bs(y);var T=y.M;T&&typeof T.ma=="function"&&T.ma(),y.M=null,Po(y.U),y.g&&(T=y.g,y.g=null,T.abort(),T.ma())}function Vo(y,T){try{var P=y.j;if(P.G!=0&&(P.g==y||Xc(P.h,y))){if(!y.K&&Xc(P.h,y)&&P.G==3){try{var z=P.Da.g.parse(T)}catch{z=null}if(Array.isArray(z)&&z.length==3){var K=z;if(K[0]==0){t:if(!P.u){if(P.g)if(P.g.F+3e3<y.F)iu(P),nu(P);else break t;rf(P),Xe(18)}}else P.za=K[1],0<P.za-P.T&&37500>K[2]&&P.F&&P.v==0&&!P.C&&(P.C=cn(m(P.Za,P),6e3));if(1>=Wl(P.h)&&P.ca){try{P.ca()}catch{}P.ca=void 0}}else Oa(P,11)}else if((y.K||P.g==y)&&iu(P),!I(T))for(K=P.Da.g.parse(T),T=0;T<K.length;T++){let ie=K[T];if(P.T=ie[0],ie=ie[1],P.G==2)if(ie[0]=="c"){P.K=ie[1],P.ia=ie[2];const Bn=ie[3];Bn!=null&&(P.la=Bn,P.j.info("VER="+P.la));const En=ie[4];En!=null&&(P.Aa=En,P.j.info("SVER="+P.Aa));const Ma=ie[5];Ma!=null&&typeof Ma=="number"&&0<Ma&&(z=1.5*Ma,P.L=z,P.j.info("backChannelRequestTimeoutMs_="+z)),z=P;const Yn=y.g;if(Yn){const Ki=Yn.g?Yn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ki){var at=z.h;at.g||Ki.indexOf("spdy")==-1&&Ki.indexOf("quic")==-1&&Ki.indexOf("h2")==-1||(at.j=at.l,at.g=new Set,at.h&&(Yl(at,at.h),at.h=null))}if(z.D){const sf=Yn.g?Yn.g.getResponseHeader("X-HTTP-Session-Id"):null;sf&&(z.ya=sf,De(z.I,z.D,sf))}}P.G=3,P.l&&P.l.ua(),P.ba&&(P.R=Date.now()-y.F,P.j.info("Handshake RTT: "+P.R+"ms")),z=P;var yt=y;if(z.qa=Bd(z,z.J?z.ia:null,z.W),yt.K){vr(z.h,yt);var re=yt,An=z.L;An&&(re.I=An),re.B&&(bs(re),Bo(re)),z.g=yt}else Nd(z);0<P.i.length&&ru(P)}else ie[0]!="stop"&&ie[0]!="close"||Oa(P,7);else P.G==3&&(ie[0]=="stop"||ie[0]=="close"?ie[0]=="stop"?Oa(P,7):ef(P):ie[0]!="noop"&&P.l&&P.l.ta(ie),P.v=0)}}As(4)}catch{}}var Td=class{constructor(y,T){this.g=y,this.map=T}};function Sa(y){this.l=y||10,l.PerformanceNavigationTiming?(y=l.performance.getEntriesByType("navigation"),y=0<y.length&&(y[0].nextHopProtocol=="hq"||y[0].nextHopProtocol=="h2")):y=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=y?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Xl(y){return y.h?!0:y.g?y.g.size>=y.j:!1}function Wl(y){return y.h?1:y.g?y.g.size:0}function Xc(y,T){return y.h?y.h==T:y.g?y.g.has(T):!1}function Yl(y,T){y.g?y.g.add(T):y.h=T}function vr(y,T){y.h&&y.h==T?y.h=null:y.g&&y.g.has(T)&&y.g.delete(T)}Sa.prototype.cancel=function(){if(this.i=Wc(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const y of this.g.values())y.cancel();this.g.clear()}};function Wc(y){if(y.h!=null)return y.i.concat(y.h.D);if(y.g!=null&&y.g.size!==0){let T=y.i;for(const P of y.g.values())T=T.concat(P.D);return T}return w(y.i)}function pp(y){if(y.V&&typeof y.V=="function")return y.V();if(typeof Map<"u"&&y instanceof Map||typeof Set<"u"&&y instanceof Set)return Array.from(y.values());if(typeof y=="string")return y.split("");if(c(y)){for(var T=[],P=y.length,z=0;z<P;z++)T.push(y[z]);return T}T=[],P=0;for(z in y)T[P++]=y[z];return T}function Kl(y){if(y.na&&typeof y.na=="function")return y.na();if(!y.V||typeof y.V!="function"){if(typeof Map<"u"&&y instanceof Map)return Array.from(y.keys());if(!(typeof Set<"u"&&y instanceof Set)){if(c(y)||typeof y=="string"){var T=[];y=y.length;for(var P=0;P<y;P++)T.push(P);return T}T=[],P=0;for(const z in y)T[P++]=z;return T}}}function Yc(y,T){if(y.forEach&&typeof y.forEach=="function")y.forEach(T,void 0);else if(c(y)||typeof y=="string")Array.prototype.forEach.call(y,T,void 0);else for(var P=Kl(y),z=pp(y),K=z.length,at=0;at<K;at++)T.call(void 0,z[at],P&&P[at],y)}var Fo=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function mp(y,T){if(y){y=y.split("&");for(var P=0;P<y.length;P++){var z=y[P].indexOf("="),K=null;if(0<=z){var at=y[P].substring(0,z);K=y[P].substring(z+1)}else at=y[P];T(at,K?decodeURIComponent(K.replace(/\+/g," ")):"")}}}function fn(y){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,y instanceof fn){this.h=y.h,jo(this,y.j),this.o=y.o,this.g=y.g,Ss(this,y.s),this.l=y.l;var T=y.i,P=new Ca;P.i=T.i,T.g&&(P.g=new Map(T.g),P.h=T.h),Ta(this,P),this.m=y.m}else y&&(T=String(y).match(Fo))?(this.h=!1,jo(this,T[1]||"",!0),this.o=ri(T[2]||""),this.g=ri(T[3]||"",!0),Ss(this,T[4]),this.l=ri(T[5]||"",!0),Ta(this,T[6]||"",!0),this.m=ri(T[7]||"")):(this.h=!1,this.i=new Ca(null,this.h))}fn.prototype.toString=function(){var y=[],T=this.j;T&&y.push(zo(T,Kc,!0),":");var P=this.g;return(P||T=="file")&&(y.push("//"),(T=this.o)&&y.push(zo(T,Kc,!0),"@"),y.push(encodeURIComponent(String(P)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),P=this.s,P!=null&&y.push(":",String(P))),(P=this.l)&&(this.g&&P.charAt(0)!="/"&&y.push("/"),y.push(zo(P,P.charAt(0)=="/"?vp:Zc,!0))),(P=this.i.toString())&&y.push("?",P),(P=this.m)&&y.push("#",zo(P,Zl)),y.join("")};function Fr(y){return new fn(y)}function jo(y,T,P){y.j=P?ri(T,!0):T,y.j&&(y.j=y.j.replace(/:$/,""))}function Ss(y,T){if(T){if(T=Number(T),isNaN(T)||0>T)throw Error("Bad port number "+T);y.s=T}else y.s=null}function Ta(y,T,P){T instanceof Ca?(y.i=T,Id(y.i,y.h)):(P||(T=zo(T,yp)),y.i=new Ca(T,y.h))}function De(y,T,P){y.i.set(T,P)}function Uo(y){return De(y,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),y}function ri(y,T){return y?T?decodeURI(y.replace(/%25/g,"%2525")):decodeURIComponent(y):""}function zo(y,T,P){return typeof y=="string"?(y=encodeURI(y).replace(T,Cd),P&&(y=y.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),y):null}function Cd(y){return y=y.charCodeAt(0),"%"+(y>>4&15).toString(16)+(y&15).toString(16)}var Kc=/[#\/\?@]/g,Zc=/[#\?:]/g,vp=/[#\?]/g,yp=/[#\?@]/g,Zl=/#/g;function Ca(y,T){this.h=this.g=null,this.i=y||null,this.j=!!T}function ii(y){y.g||(y.g=new Map,y.h=0,y.i&&mp(y.i,function(T,P){y.add(decodeURIComponent(T.replace(/\+/g," ")),P)}))}n=Ca.prototype,n.add=function(y,T){ii(this),this.i=null,y=Gi(this,y);var P=this.g.get(y);return P||this.g.set(y,P=[]),P.push(T),this.h+=1,this};function Ia(y,T){ii(y),T=Gi(y,T),y.g.has(T)&&(y.i=null,y.h-=y.g.get(T).length,y.g.delete(T))}function Ra(y,T){return ii(y),T=Gi(y,T),y.g.has(T)}n.forEach=function(y,T){ii(this),this.g.forEach(function(P,z){P.forEach(function(K){y.call(T,K,z,this)},this)},this)},n.na=function(){ii(this);const y=Array.from(this.g.values()),T=Array.from(this.g.keys()),P=[];for(let z=0;z<T.length;z++){const K=y[z];for(let at=0;at<K.length;at++)P.push(T[z])}return P},n.V=function(y){ii(this);let T=[];if(typeof y=="string")Ra(this,y)&&(T=T.concat(this.g.get(Gi(this,y))));else{y=Array.from(this.g.values());for(let P=0;P<y.length;P++)T=T.concat(y[P])}return T},n.set=function(y,T){return ii(this),this.i=null,y=Gi(this,y),Ra(this,y)&&(this.h-=this.g.get(y).length),this.g.set(y,[T]),this.h+=1,this},n.get=function(y,T){return y?(y=this.V(y),0<y.length?String(y[0]):T):T};function Qc(y,T,P){Ia(y,T),0<P.length&&(y.i=null,y.g.set(Gi(y,T),w(P)),y.h+=P.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const y=[],T=Array.from(this.g.keys());for(var P=0;P<T.length;P++){var z=T[P];const at=encodeURIComponent(String(z)),yt=this.V(z);for(z=0;z<yt.length;z++){var K=at;yt[z]!==""&&(K+="="+encodeURIComponent(String(yt[z]))),y.push(K)}}return this.i=y.join("&")};function Gi(y,T){return T=String(T),y.j&&(T=T.toLowerCase()),T}function Id(y,T){T&&!y.j&&(ii(y),y.i=null,y.g.forEach(function(P,z){var K=z.toLowerCase();z!=K&&(Ia(this,z),Qc(this,K,P))},y)),y.j=T}function Ho(y,T){const P=new ni;if(l.Image){const z=new Image;z.onload=v(ai,P,"TestLoadImage: loaded",!0,T,z),z.onerror=v(ai,P,"TestLoadImage: error",!1,T,z),z.onabort=v(ai,P,"TestLoadImage: abort",!1,T,z),z.ontimeout=v(ai,P,"TestLoadImage: timeout",!1,T,z),l.setTimeout(function(){z.ontimeout&&z.ontimeout()},1e4),z.src=y}else T(!1)}function Si(y,T){const P=new ni,z=new AbortController,K=setTimeout(()=>{z.abort(),ai(P,"TestPingServer: timeout",!1,T)},1e4);fetch(y,{signal:z.signal}).then(at=>{clearTimeout(K),at.ok?ai(P,"TestPingServer: ok",!0,T):ai(P,"TestPingServer: server error",!1,T)}).catch(()=>{clearTimeout(K),ai(P,"TestPingServer: error",!1,T)})}function ai(y,T,P,z,K){try{K&&(K.onload=null,K.onerror=null,K.onabort=null,K.ontimeout=null),z(P)}catch{}}function Go(){this.g=new ko}function $i(y,T,P){const z=P||"";try{Yc(y,function(K,at){let yt=K;f(K)&&(yt=wi(K)),T.push(z+at+"="+encodeURIComponent(yt))})}catch(K){throw T.push(z+"type="+encodeURIComponent("_badmap")),K}}function Ts(y){this.l=y.Ub||null,this.j=y.eb||!1}_(Ts,jc),Ts.prototype.g=function(){return new Da(this.l,this.j)},Ts.prototype.i=function(y){return function(){return y}}({});function Da(y,T){qe.call(this),this.D=y,this.o=T,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}_(Da,qe),n=Da.prototype,n.open=function(y,T){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=y,this.A=T,this.readyState=1,Xi(this)},n.send=function(y){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const T={headers:this.u,method:this.B,credentials:this.m,cache:void 0};y&&(T.body=y),(this.D||l).fetch(new Request(this.A,T)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,qi(this)),this.readyState=0},n.Sa=function(y){if(this.g&&(this.l=y,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=y.headers,this.readyState=2,Xi(this)),this.g&&(this.readyState=3,Xi(this),this.g)))if(this.responseType==="arraybuffer")y.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in y){if(this.j=y.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Jc(this)}else y.text().then(this.Ra.bind(this),this.ga.bind(this))};function Jc(y){y.j.read().then(y.Pa.bind(y)).catch(y.ga.bind(y))}n.Pa=function(y){if(this.g){if(this.o&&y.value)this.response.push(y.value);else if(!this.o){var T=y.value?y.value:new Uint8Array(0);(T=this.v.decode(T,{stream:!y.done}))&&(this.response=this.responseText+=T)}y.done?qi(this):Xi(this),this.readyState==3&&Jc(this)}},n.Ra=function(y){this.g&&(this.response=this.responseText=y,qi(this))},n.Qa=function(y){this.g&&(this.response=y,qi(this))},n.ga=function(){this.g&&qi(this)};function qi(y){y.readyState=4,y.l=null,y.j=null,y.v=null,Xi(y)}n.setRequestHeader=function(y,T){this.u.append(y,T)},n.getResponseHeader=function(y){return this.h&&this.h.get(y.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const y=[],T=this.h.entries();for(var P=T.next();!P.done;)P=P.value,y.push(P[0]+": "+P[1]),P=T.next();return y.join(`\r
`)};function Xi(y){y.onreadystatechange&&y.onreadystatechange.call(y)}Object.defineProperty(Da.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(y){this.m=y?"include":"same-origin"}});function tf(y){let T="";return k(y,function(P,z){T+=z,T+=":",T+=P,T+=`\r
`}),T}function Ln(y,T,P){t:{for(z in P){var z=!1;break t}z=!0}z||(P=tf(P),typeof y=="string"?P!=null&&encodeURIComponent(String(P)):De(y,T,P))}function Ee(y){qe.call(this),this.headers=new Map,this.o=y||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}_(Ee,qe);var Ql=/^https?$/i,$o=["POST","PUT"];n=Ee.prototype,n.Ha=function(y){this.J=y},n.ea=function(y,T,P,z){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+y);T=T?T.toUpperCase():"GET",this.D=y,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ui.g(),this.v=this.o?Uc(this.o):Uc(Ui),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(T,String(y),!0),this.B=!1}catch(at){Rd(this,at);return}if(y=P||"",P=new Map(this.headers),z)if(Object.getPrototypeOf(z)===Object.prototype)for(var K in z)P.set(K,z[K]);else if(typeof z.keys=="function"&&typeof z.get=="function")for(const at of z.keys())P.set(at,z.get(at));else throw Error("Unknown input type for opt_headers: "+String(z));z=Array.from(P.keys()).find(at=>at.toLowerCase()=="content-type"),K=l.FormData&&y instanceof l.FormData,!(0<=Array.prototype.indexOf.call($o,T,void 0))||z||K||P.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[at,yt]of P)this.g.setRequestHeader(at,yt);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{qo(this),this.u=!0,this.g.send(y),this.u=!1}catch(at){Rd(this,at)}};function Rd(y,T){y.h=!1,y.g&&(y.j=!0,y.g.abort(),y.j=!1),y.l=T,y.m=5,Jl(y),Wi(y)}function Jl(y){y.A||(y.A=!0,ce(y,"complete"),ce(y,"error"))}n.abort=function(y){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=y||7,ce(this,"complete"),ce(this,"abort"),Wi(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Wi(this,!0)),Ee.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?tu(this):this.bb())},n.bb=function(){tu(this)};function tu(y){if(y.h&&typeof s<"u"&&(!y.v[1]||si(y)!=4||y.Z()!=2)){if(y.u&&si(y)==4)ar(y.Ea,0,y);else if(ce(y,"readystatechange"),si(y)==4){y.h=!1;try{const yt=y.Z();t:switch(yt){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var T=!0;break t;default:T=!1}var P;if(!(P=T)){var z;if(z=yt===0){var K=String(y.D).match(Fo)[1]||null;!K&&l.self&&l.self.location&&(K=l.self.location.protocol.slice(0,-1)),z=!Ql.test(K?K.toLowerCase():"")}P=z}if(P)ce(y,"complete"),ce(y,"success");else{y.m=6;try{var at=2<si(y)?y.g.statusText:""}catch{at=""}y.l=at+" ["+y.Z()+"]",Jl(y)}}finally{Wi(y)}}}}function Wi(y,T){if(y.g){qo(y);const P=y.g,z=y.v[0]?()=>{}:null;y.g=null,y.v=null,T||ce(y,"ready");try{P.onreadystatechange=z}catch{}}}function qo(y){y.I&&(l.clearTimeout(y.I),y.I=null)}n.isActive=function(){return!!this.g};function si(y){return y.g?y.g.readyState:0}n.Z=function(){try{return 2<si(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(y){if(this.g){var T=this.g.responseText;return y&&T.indexOf(y)==0&&(T=T.substring(y.length)),Gl(T)}};function Dd(y){try{if(!y.g)return null;if("response"in y.g)return y.g.response;switch(y.H){case"":case"text":return y.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in y.g)return y.g.mozResponseArrayBuffer}return null}catch{return null}}function xp(y){const T={};y=(y.g&&2<=si(y)&&y.g.getAllResponseHeaders()||"").split(`\r
`);for(let z=0;z<y.length;z++){if(I(y[z]))continue;var P=B(y[z]);const K=P[0];if(P=P[1],typeof P!="string")continue;P=P.trim();const at=T[K]||[];T[K]=at,at.push(P)}O(T,function(z){return z.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Xo(y,T,P){return P&&P.internalChannelParams&&P.internalChannelParams[y]||T}function eu(y){this.Aa=0,this.i=[],this.j=new ni,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Xo("failFast",!1,y),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Xo("baseRetryDelayMs",5e3,y),this.cb=Xo("retryDelaySeedMs",1e4,y),this.Wa=Xo("forwardChannelMaxRetries",2,y),this.wa=Xo("forwardChannelRequestTimeoutMs",2e4,y),this.pa=y&&y.xmlHttpFactory||void 0,this.Xa=y&&y.Tb||void 0,this.Ca=y&&y.useFetchStreams||!1,this.L=void 0,this.J=y&&y.supportsCrossDomainXhr||!1,this.K="",this.h=new Sa(y&&y.concurrentRequestLimit),this.Da=new Go,this.P=y&&y.fastHandshake||!1,this.O=y&&y.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=y&&y.Rb||!1,y&&y.xa&&this.j.xa(),y&&y.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&y&&y.detectBufferingProxy||!1,this.ja=void 0,y&&y.longPollingTimeout&&0<y.longPollingTimeout&&(this.ja=y.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=eu.prototype,n.la=8,n.G=1,n.connect=function(y,T,P,z){Xe(0),this.W=y,this.H=T||{},P&&z!==void 0&&(this.H.OSID=P,this.H.OAID=z),this.F=this.X,this.I=Bd(this,null,this.W),ru(this)};function ef(y){if(Od(y),y.G==3){var T=y.U++,P=Fr(y.I);if(De(P,"SID",y.K),De(P,"RID",T),De(P,"TYPE","terminate"),Wo(y,P),T=new mr(y,y.j,T),T.L=2,T.v=Uo(Fr(P)),P=!1,l.navigator&&l.navigator.sendBeacon)try{P=l.navigator.sendBeacon(T.v.toString(),"")}catch{}!P&&l.Image&&(new Image().src=T.v,P=!0),P||(T.g=Vd(T.j,null),T.g.ea(T.v)),T.F=Date.now(),Bo(T)}Ld(y)}function nu(y){y.g&&(Yo(y),y.g.cancel(),y.g=null)}function Od(y){nu(y),y.u&&(l.clearTimeout(y.u),y.u=null),iu(y),y.h.cancel(),y.s&&(typeof y.s=="number"&&l.clearTimeout(y.s),y.s=null)}function ru(y){if(!Xl(y.h)&&!y.s){y.s=!0;var T=y.Ga;Z||_t(),it||(Z(),it=!0),gt.add(T,y),y.B=0}}function _p(y,T){return Wl(y.h)>=y.h.j-(y.s?1:0)?!1:y.s?(y.i=T.D.concat(y.i),!0):y.G==1||y.G==2||y.B>=(y.Va?0:y.Wa)?!1:(y.s=cn(m(y.Ga,y,T),af(y,y.B)),y.B++,!0)}n.Ga=function(y){if(this.s)if(this.s=null,this.G==1){if(!y){this.U=Math.floor(1e5*Math.random()),y=this.U++;const K=new mr(this,this.j,y);let at=this.o;if(this.S&&(at?(at=S(at),V(at,this.S)):at=this.S),this.m!==null||this.O||(K.H=at,at=null),this.P)t:{for(var T=0,P=0;P<this.i.length;P++){e:{var z=this.i[P];if("__data__"in z.map&&(z=z.map.__data__,typeof z=="string")){z=z.length;break e}z=void 0}if(z===void 0)break;if(T+=z,4096<T){T=P;break t}if(T===4096||P===this.i.length-1){T=P+1;break t}}T=1e3}else T=1e3;T=Md(this,K,T),P=Fr(this.I),De(P,"RID",y),De(P,"CVER",22),this.D&&De(P,"X-HTTP-Session-Id",this.D),Wo(this,P),at&&(this.O?T="headers="+encodeURIComponent(String(tf(at)))+"&"+T:this.m&&Ln(P,this.m,at)),Yl(this.h,K),this.Ua&&De(P,"TYPE","init"),this.P?(De(P,"$req",T),De(P,"SID","null"),K.T=!0,bi(K,P,null)):bi(K,P,T),this.G=2}}else this.G==3&&(y?nf(this,y):this.i.length==0||Xl(this.h)||nf(this))};function nf(y,T){var P;T?P=T.l:P=y.U++;const z=Fr(y.I);De(z,"SID",y.K),De(z,"RID",P),De(z,"AID",y.T),Wo(y,z),y.m&&y.o&&Ln(z,y.m,y.o),P=new mr(y,y.j,P,y.B+1),y.m===null&&(P.H=y.o),T&&(y.i=T.D.concat(y.i)),T=Md(y,P,1e3),P.I=Math.round(.5*y.wa)+Math.round(.5*y.wa*Math.random()),Yl(y.h,P),bi(P,z,T)}function Wo(y,T){y.H&&k(y.H,function(P,z){De(T,z,P)}),y.l&&Yc({},function(P,z){De(T,z,P)})}function Md(y,T,P){P=Math.min(y.i.length,P);var z=y.l?m(y.l.Na,y.l,y):null;t:{var K=y.i;let at=-1;for(;;){const yt=["count="+P];at==-1?0<P?(at=K[0].g,yt.push("ofs="+at)):at=0:yt.push("ofs="+at);let re=!0;for(let An=0;An<P;An++){let ie=K[An].g;const Bn=K[An].map;if(ie-=at,0>ie)at=Math.max(0,K[An].g-100),re=!1;else try{$i(Bn,yt,"req"+ie+"_")}catch{z&&z(Bn)}}if(re){z=yt.join("&");break t}}}return y=y.i.splice(0,P),T.D=y,z}function Nd(y){if(!y.g&&!y.u){y.Y=1;var T=y.Fa;Z||_t(),it||(Z(),it=!0),gt.add(T,y),y.v=0}}function rf(y){return y.g||y.u||3<=y.v?!1:(y.Y++,y.u=cn(m(y.Fa,y),af(y,y.v)),y.v++,!0)}n.Fa=function(){if(this.u=null,Pd(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var y=2*this.R;this.j.info("BP detection timer enabled: "+y),this.A=cn(m(this.ab,this),y)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Xe(10),nu(this),Pd(this))};function Yo(y){y.A!=null&&(l.clearTimeout(y.A),y.A=null)}function Pd(y){y.g=new mr(y,y.j,"rpc",y.Y),y.m===null&&(y.g.H=y.o),y.g.O=0;var T=Fr(y.qa);De(T,"RID","rpc"),De(T,"SID",y.K),De(T,"AID",y.T),De(T,"CI",y.F?"0":"1"),!y.F&&y.ja&&De(T,"TO",y.ja),De(T,"TYPE","xmlhttp"),Wo(y,T),y.m&&y.o&&Ln(T,y.m,y.o),y.L&&(y.g.I=y.L);var P=y.g;y=y.ia,P.L=1,P.v=Uo(Fr(T)),P.m=null,P.P=!0,ba(P,y)}n.Za=function(){this.C!=null&&(this.C=null,nu(this),rf(this),Xe(19))};function iu(y){y.C!=null&&(l.clearTimeout(y.C),y.C=null)}function kd(y,T){var P=null;if(y.g==T){iu(y),Yo(y),y.g=null;var z=2}else if(Xc(y.h,T))P=T.D,vr(y.h,T),z=1;else return;if(y.G!=0){if(T.o)if(z==1){P=T.m?T.m.length:0,T=Date.now()-T.F;var K=y.B;z=_s(),ce(z,new _n(z,P)),ru(y)}else Nd(y);else if(K=T.s,K==3||K==0&&0<T.X||!(z==1&&_p(y,T)||z==2&&rf(y)))switch(P&&0<P.length&&(T=y.h,T.i=T.i.concat(P)),K){case 1:Oa(y,5);break;case 4:Oa(y,10);break;case 3:Oa(y,6);break;default:Oa(y,2)}}}function af(y,T){let P=y.Ta+Math.floor(Math.random()*y.cb);return y.isActive()||(P*=2),P*T}function Oa(y,T){if(y.j.info("Error code "+T),T==2){var P=m(y.fb,y),z=y.Xa;const K=!z;z=new fn(z||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||jo(z,"https"),Uo(z),K?Ho(z.toString(),P):Si(z.toString(),P)}else Xe(2);y.G=0,y.l&&y.l.sa(T),Ld(y),Od(y)}n.fb=function(y){y?(this.j.info("Successfully pinged google.com"),Xe(2)):(this.j.info("Failed to ping google.com"),Xe(1))};function Ld(y){if(y.G=0,y.ka=[],y.l){const T=Wc(y.h);(T.length!=0||y.i.length!=0)&&(b(y.ka,T),b(y.ka,y.i),y.h.i.length=0,w(y.i),y.i.length=0),y.l.ra()}}function Bd(y,T,P){var z=P instanceof fn?Fr(P):new fn(P);if(z.g!="")T&&(z.g=T+"."+z.g),Ss(z,z.s);else{var K=l.location;z=K.protocol,T=T?T+"."+K.hostname:K.hostname,K=+K.port;var at=new fn(null);z&&jo(at,z),T&&(at.g=T),K&&Ss(at,K),P&&(at.l=P),z=at}return P=y.D,T=y.ya,P&&T&&De(z,P,T),De(z,"VER",y.la),Wo(y,z),z}function Vd(y,T,P){if(T&&!y.J)throw Error("Can't create secondary domain capable XhrIo object.");return T=y.Ca&&!y.pa?new Ee(new Ts({eb:P})):new Ee(y.pa),T.Ha(y.J),T}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Fd(){}n=Fd.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function au(){}au.prototype.g=function(y,T){return new yr(y,T)};function yr(y,T){qe.call(this),this.g=new eu(T),this.l=y,this.h=T&&T.messageUrlParams||null,y=T&&T.messageHeaders||null,T&&T.clientProtocolHeaderRequired&&(y?y["X-Client-Protocol"]="webchannel":y={"X-Client-Protocol":"webchannel"}),this.g.o=y,y=T&&T.initMessageHeaders||null,T&&T.messageContentType&&(y?y["X-WebChannel-Content-Type"]=T.messageContentType:y={"X-WebChannel-Content-Type":T.messageContentType}),T&&T.va&&(y?y["X-WebChannel-Client-Profile"]=T.va:y={"X-WebChannel-Client-Profile":T.va}),this.g.S=y,(y=T&&T.Sb)&&!I(y)&&(this.g.m=y),this.v=T&&T.supportsCrossDomainXhr||!1,this.u=T&&T.sendRawJson||!1,(T=T&&T.httpSessionIdParam)&&!I(T)&&(this.g.D=T,y=this.h,y!==null&&T in y&&(y=this.h,T in y&&delete y[T])),this.j=new Yi(this)}_(yr,qe),yr.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},yr.prototype.close=function(){ef(this.g)},yr.prototype.o=function(y){var T=this.g;if(typeof y=="string"){var P={};P.__data__=y,y=P}else this.u&&(P={},P.__data__=wi(y),y=P);T.i.push(new Td(T.Ya++,y)),T.G==3&&ru(T)},yr.prototype.N=function(){this.g.l=null,delete this.j,ef(this.g),delete this.g,yr.aa.N.call(this)};function jd(y){Ea.call(this),y.__headers__&&(this.headers=y.__headers__,this.statusCode=y.__status__,delete y.__headers__,delete y.__status__);var T=y.__sm__;if(T){t:{for(const P in T){y=P;break t}y=void 0}(this.i=y)&&(y=this.i,T=T!==null&&y in T?T[y]:void 0),this.data=T}else this.data=y}_(jd,Ea);function Ud(){Hc.call(this),this.status=1}_(Ud,Hc);function Yi(y){this.g=y}_(Yi,Fd),Yi.prototype.ua=function(){ce(this.g,"a")},Yi.prototype.ta=function(y){ce(this.g,new jd(y))},Yi.prototype.sa=function(y){ce(this.g,new Ud)},Yi.prototype.ra=function(){ce(this.g,"b")},au.prototype.createWebChannel=au.prototype.g,yr.prototype.send=yr.prototype.o,yr.prototype.open=yr.prototype.m,yr.prototype.close=yr.prototype.close,EI=function(){return new au},AI=function(){return _s()},_I=ji,xy={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ws.NO_ERROR=0,ws.TIMEOUT=8,ws.HTTP_ERROR=6,y1=ws,wa.COMPLETE="complete",xI=wa,zc.EventType=Aa,Aa.OPEN="a",Aa.CLOSE="b",Aa.ERROR="c",Aa.MESSAGE="d",qe.prototype.listen=qe.prototype.K,oh=zc,Ee.prototype.listenOnce=Ee.prototype.L,Ee.prototype.getLastError=Ee.prototype.Ka,Ee.prototype.getLastErrorCode=Ee.prototype.Ba,Ee.prototype.getStatus=Ee.prototype.Z,Ee.prototype.getResponseJson=Ee.prototype.Oa,Ee.prototype.getResponseText=Ee.prototype.oa,Ee.prototype.send=Ee.prototype.ea,Ee.prototype.setWithCredentials=Ee.prototype.Ha,yI=Ee}).apply(typeof G0<"u"?G0:typeof self<"u"?self:typeof window<"u"?window:{});const sb="@firebase/firestore",ob="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hr{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}hr.UNAUTHENTICATED=new hr(null),hr.GOOGLE_CREDENTIALS=new hr("google-credentials-uid"),hr.FIRST_PARTY=new hr("first-party-uid"),hr.MOCK_USER=new hr("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Rc="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ol=new vx("@firebase/firestore");function zu(){return Ol.logLevel}function bt(n,...t){if(Ol.logLevel<=ee.DEBUG){const e=t.map(Rx);Ol.debug(`Firestore (${Rc}): ${n}`,...e)}}function is(n,...t){if(Ol.logLevel<=ee.ERROR){const e=t.map(Rx);Ol.error(`Firestore (${Rc}): ${n}`,...e)}}function vo(n,...t){if(Ol.logLevel<=ee.WARN){const e=t.map(Rx);Ol.warn(`Firestore (${Rc}): ${n}`,...e)}}function Rx(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(e){return JSON.stringify(e)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ft(n,t,e){let r="Unexpected state";typeof t=="string"?r=t:e=t,wI(n,r,e)}function wI(n,t,e){let r=`FIRESTORE (${Rc}) INTERNAL ASSERTION FAILED: ${t} (ID: ${n.toString(16)})`;if(e!==void 0)try{r+=" CONTEXT: "+JSON.stringify(e)}catch{r+=" CONTEXT: "+e}throw is(r),new Error(r)}function be(n,t,e,r){let i="Unexpected state";typeof e=="string"?i=e:r=e,n||wI(t,i,r)}function Gt(n,t){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ut={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class At extends hs{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ja{constructor(){this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bI{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class I5{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable(()=>e(hr.UNAUTHENTICATED))}shutdown(){}}class R5{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable(()=>e(this.token.user))}shutdown(){this.changeListener=null}}class D5{constructor(t){this.t=t,this.currentUser=hr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){be(this.o===void 0,42304);let r=this.i;const i=c=>this.i!==r?(r=this.i,e(c)):Promise.resolve();let a=new Ja;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new Ja,t.enqueueRetryable(()=>i(this.currentUser))};const s=()=>{const c=a;t.enqueueRetryable(async()=>{await c.promise,await i(this.currentUser)})},l=c=>{bt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(bt("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Ja)}},0),s()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then(r=>this.i!==t?(bt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(be(typeof r.accessToken=="string",31837,{l:r}),new bI(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return be(t===null||typeof t=="string",2055,{h:t}),new hr(t)}}class O5{constructor(t,e,r){this.P=t,this.T=e,this.I=r,this.type="FirstParty",this.user=hr.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class M5{constructor(t,e,r){this.P=t,this.T=e,this.I=r}getToken(){return Promise.resolve(new O5(this.P,this.T,this.I))}start(t,e){t.enqueueRetryable(()=>e(hr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class lb{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class N5{constructor(t,e){this.V=e,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,pi(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,e){be(this.o===void 0,3512);const r=a=>{a.error!=null&&bt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const s=a.token!==this.m;return this.m=a.token,bt("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?e(a.token):Promise.resolve()};this.o=a=>{t.enqueueRetryable(()=>r(a))};const i=a=>{bt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(a=>i(a)),setTimeout(()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?i(a):bt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new lb(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(e=>e?(be(typeof e.token=="string",44558,{tokenResult:e}),this.m=e.token,new lb(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P5(n){const t=typeof self<"u"&&(self.crypto||self.msCrypto),e=new Uint8Array(n);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(e);else for(let r=0;r<n;r++)e[r]=Math.floor(256*Math.random());return e}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SI(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dx{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=P5(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<e&&(r+=t.charAt(i[a]%62))}return r}}function Yt(n,t){return n<t?-1:n>t?1:0}function _y(n,t){let e=0;for(;e<n.length&&e<t.length;){const r=n.codePointAt(e),i=t.codePointAt(e);if(r!==i){if(r<128&&i<128)return Yt(r,i);{const a=SI(),s=k5(a.encode(ub(n,e)),a.encode(ub(t,e)));return s!==0?s:Yt(r,i)}}e+=r>65535?2:1}return Yt(n.length,t.length)}function ub(n,t){return n.codePointAt(t)>65535?n.substring(t,t+2):n.substring(t,t+1)}function k5(n,t){for(let e=0;e<n.length&&e<t.length;++e)if(n[e]!==t[e])return Yt(n[e],t[e]);return Yt(n.length,t.length)}function fc(n,t,e){return n.length===t.length&&n.every((r,i)=>e(r,t[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cb="__name__";class ra{constructor(t,e,r){e===void 0?e=0:e>t.length&&Ft(637,{offset:e,range:t.length}),r===void 0?r=t.length-e:r>t.length-e&&Ft(1746,{length:r,range:t.length-e}),this.segments=t,this.offset=e,this.len=r}get length(){return this.len}isEqual(t){return ra.comparator(this,t)===0}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof ra?t.forEach(r=>{e.push(r)}):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,r=this.limit();e<r;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const r=Math.min(t.length,e.length);for(let i=0;i<r;i++){const a=ra.compareSegments(t.get(i),e.get(i));if(a!==0)return a}return Yt(t.length,e.length)}static compareSegments(t,e){const r=ra.isNumericId(t),i=ra.isNumericId(e);return r&&!i?-1:!r&&i?1:r&&i?ra.extractNumericId(t).compare(ra.extractNumericId(e)):_y(t,e)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return ho.fromString(t.substring(4,t.length-2))}}class Be extends ra{construct(t,e,r){return new Be(t,e,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const e=[];for(const r of t){if(r.indexOf("//")>=0)throw new At(ut.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);e.push(...r.split("/").filter(i=>i.length>0))}return new Be(e)}static emptyPath(){return new Be([])}}const L5=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class nr extends ra{construct(t,e,r){return new nr(t,e,r)}static isValidIdentifier(t){return L5.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),nr.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===cb}static keyField(){return new nr([cb])}static fromServerFormat(t){const e=[];let r="",i=0;const a=()=>{if(r.length===0)throw new At(ut.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(r),r=""};let s=!1;for(;i<t.length;){const l=t[i];if(l==="\\"){if(i+1===t.length)throw new At(ut.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const c=t[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new At(ut.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=c,i+=2}else l==="`"?(s=!s,i++):l!=="."||s?(r+=l,i++):(a(),i++)}if(a(),s)throw new At(ut.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new nr(e)}static emptyPath(){return new nr([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ot{constructor(t){this.path=t}static fromPath(t){return new Ot(Be.fromString(t))}static fromName(t){return new Ot(Be.fromString(t).popFirst(5))}static empty(){return new Ot(Be.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&Be.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,e){return Be.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new Ot(new Be(t.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ox(n,t,e){if(!e)throw new At(ut.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${t}.`)}function B5(n,t,e,r){if(t===!0&&r===!0)throw new At(ut.INVALID_ARGUMENT,`${n} and ${e} cannot be used together.`)}function fb(n){if(!Ot.isDocumentKey(n))throw new At(ut.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function hb(n){if(Ot.isDocumentKey(n))throw new At(ut.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function TI(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function bg(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const t=function(r){return r.constructor?r.constructor.name:null}(n);return t?`a custom ${t} object`:"an object"}}return typeof n=="function"?"a function":Ft(12329,{type:typeof n})}function Yr(n,t){if("_delegate"in n&&(n=n._delegate),!(n instanceof t)){if(t.name===n.constructor.name)throw new At(ut.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const e=bg(n);throw new At(ut.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${e}`)}}return n}function V5(n,t){if(t<=0)throw new At(ut.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${t}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xn(n,t){const e={typeString:n};return t&&(e.value=t),e}function Zh(n,t){if(!TI(n))throw new At(ut.INVALID_ARGUMENT,"JSON must be an object");let e;for(const r in t)if(t[r]){const i=t[r].typeString,a="value"in t[r]?{value:t[r].value}:void 0;if(!(r in n)){e=`JSON missing required field: '${r}'`;break}const s=n[r];if(i&&typeof s!==i){e=`JSON field '${r}' must be a ${i}.`;break}if(a!==void 0&&s!==a.value){e=`Expected '${r}' field to equal '${a.value}'`;break}}if(e)throw new At(ut.INVALID_ARGUMENT,e);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const db=-62135596800,gb=1e6;class Ge{static now(){return Ge.fromMillis(Date.now())}static fromDate(t){return Ge.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),r=Math.floor((t-1e3*e)*gb);return new Ge(e,r)}constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new At(ut.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new At(ut.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<db)throw new At(ut.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new At(ut.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/gb}_compareTo(t){return this.seconds===t.seconds?Yt(this.nanoseconds,t.nanoseconds):Yt(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ge._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(Zh(t,Ge._jsonSchema))return new Ge(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-db;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ge._jsonSchemaVersion="firestore/timestamp/1.0",Ge._jsonSchema={type:xn("string",Ge._jsonSchemaVersion),seconds:xn("number"),nanoseconds:xn("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ht{static fromTimestamp(t){return new Ht(t)}static min(){return new Ht(new Ge(0,0))}static max(){return new Ht(new Ge(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ih=-1;function F5(n,t){const e=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Ht.fromTimestamp(r===1e9?new Ge(e+1,0):new Ge(e,r));return new yo(i,Ot.empty(),t)}function j5(n){return new yo(n.readTime,n.key,Ih)}class yo{constructor(t,e,r){this.readTime=t,this.documentKey=e,this.largestBatchId=r}static min(){return new yo(Ht.min(),Ot.empty(),Ih)}static max(){return new yo(Ht.max(),Ot.empty(),Ih)}}function U5(n,t){let e=n.readTime.compareTo(t.readTime);return e!==0?e:(e=Ot.comparator(n.documentKey,t.documentKey),e!==0?e:Yt(n.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z5="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class H5{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Dc(n){if(n.code!==ut.FAILED_PRECONDITION||n.message!==z5)throw n;bt("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dt{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&Ft(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new dt((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(t,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(e,a).next(r,i)}})}toPromise(){return new Promise((t,e)=>{this.next(t,e)})}wrapUserFunction(t){try{const e=t();return e instanceof dt?e:dt.resolve(e)}catch(e){return dt.reject(e)}}wrapSuccess(t,e){return t?this.wrapUserFunction(()=>t(e)):dt.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction(()=>t(e)):dt.reject(e)}static resolve(t){return new dt((e,r)=>{e(t)})}static reject(t){return new dt((e,r)=>{r(t)})}static waitFor(t){return new dt((e,r)=>{let i=0,a=0,s=!1;t.forEach(l=>{++i,l.next(()=>{++a,s&&a===i&&e()},c=>r(c))}),s=!0,a===i&&e()})}static or(t){let e=dt.resolve(!1);for(const r of t)e=e.next(i=>i?dt.resolve(i):r());return e}static forEach(t,e){const r=[];return t.forEach((i,a)=>{r.push(e.call(this,i,a))}),this.waitFor(r)}static mapArray(t,e){return new dt((r,i)=>{const a=t.length,s=new Array(a);let l=0;for(let c=0;c<a;c++){const f=c;e(t[f]).next(d=>{s[f]=d,++l,l===a&&r(s)},d=>i(d))}})}static doWhile(t,e){return new dt((r,i)=>{const a=()=>{t()===!0?e().next(()=>{a()},i):r()};a()})}}function G5(n){const t=n.match(/Android ([\d.]+)/i),e=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(e)}function Oc(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sg{constructor(t,e){this.previousValue=t,e&&(e.sequenceNumberHandler=r=>this._e(r),this.ae=r=>e.writeSequenceNumber(r))}_e(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ae&&this.ae(t),t}}Sg.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mx=-1;function Tg(n){return n==null}function V1(n){return n===0&&1/n==-1/0}function $5(n){return typeof n=="number"&&Number.isInteger(n)&&!V1(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CI="";function q5(n){let t="";for(let e=0;e<n.length;e++)t.length>0&&(t=pb(t)),t=X5(n.get(e),t);return pb(t)}function X5(n,t){let e=t;const r=n.length;for(let i=0;i<r;i++){const a=n.charAt(i);switch(a){case"\0":e+="";break;case CI:e+="";break;default:e+=a}}return e}function pb(n){return n+CI+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mb(n){let t=0;for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t++;return t}function To(n,t){for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t(e,n[e])}function II(n){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Je{constructor(t,e){this.comparator=t,this.root=e||er.EMPTY}insert(t,e){return new Je(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,er.BLACK,null,null))}remove(t){return new Je(this.comparator,this.root.remove(t,this.comparator).copy(null,null,er.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const r=this.comparator(t,e.key);if(r===0)return e.value;r<0?e=e.left:r>0&&(e=e.right)}return null}indexOf(t){let e=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(t,r.key);if(i===0)return e+r.left.size;i<0?r=r.left:(e+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((e,r)=>(t(e,r),!1))}toString(){const t=[];return this.inorderTraversal((e,r)=>(t.push(`${e}:${r}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new $0(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new $0(this.root,t,this.comparator,!1)}getReverseIterator(){return new $0(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new $0(this.root,t,this.comparator,!0)}}class $0{constructor(t,e,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!t.isEmpty();)if(a=e?r(t.key,e):1,e&&i&&(a*=-1),a<0)t=this.isReverse?t.left:t.right;else{if(a===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class er{constructor(t,e,r,i,a){this.key=t,this.value=e,this.color=r??er.RED,this.left=i??er.EMPTY,this.right=a??er.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,r,i,a){return new er(t??this.key,e??this.value,r??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,r){let i=this;const a=r(t,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(t,e,r),null):a===0?i.copy(null,e,null,null,null):i.copy(null,null,null,null,i.right.insert(t,e,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return er.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let r,i=this;if(e(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,e),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),e(t,i.key)===0){if(i.right.isEmpty())return er.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,e))}return i.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,er.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,er.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ft(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ft(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw Ft(27949);return t+(this.isRed()?0:1)}}er.EMPTY=null,er.RED=!0,er.BLACK=!1;er.EMPTY=new class{constructor(){this.size=0}get key(){throw Ft(57766)}get value(){throw Ft(16141)}get color(){throw Ft(16727)}get left(){throw Ft(29726)}get right(){throw Ft(36894)}copy(t,e,r,i,a){return this}insert(t,e,r){return new er(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nn{constructor(t){this.comparator=t,this.data=new Je(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((e,r)=>(t(e),!1))}forEachInRange(t,e){const r=this.data.getIteratorFrom(t[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,t[1])>=0)return;e(i.key)}}forEachWhile(t,e){let r;for(r=e!==void 0?this.data.getIteratorFrom(e):this.data.getIterator();r.hasNext();)if(!t(r.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new vb(this.data.getIterator())}getIteratorFrom(t){return new vb(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach(r=>{e=e.add(r)}),e}isEqual(t){if(!(t instanceof Nn)||this.size!==t.size)return!1;const e=this.data.getIterator(),r=t.data.getIterator();for(;e.hasNext();){const i=e.getNext().key,a=r.getNext().key;if(this.comparator(i,a)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(e=>{t.push(e)}),t}toString(){const t=[];return this.forEach(e=>t.push(e)),"SortedSet("+t.toString()+")"}copy(t){const e=new Nn(this.comparator);return e.data=t,e}}class vb{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wr{constructor(t){this.fields=t,t.sort(nr.comparator)}static empty(){return new Wr([])}unionWith(t){let e=new Nn(nr.comparator);for(const r of this.fields)e=e.add(r);for(const r of t)e=e.add(r);return new Wr(e.toArray())}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return fc(this.fields,t.fields,(e,r)=>e.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RI extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ir{constructor(t){this.binaryString=t}static fromBase64String(t){const e=function(i){try{return atob(i)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new RI("Invalid base64 string: "+a):a}}(t);return new ir(e)}static fromUint8Array(t){const e=function(i){let a="";for(let s=0;s<i.length;++s)a+=String.fromCharCode(i[s]);return a}(t);return new ir(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(e){return btoa(e)}(this.binaryString)}toUint8Array(){return function(e){const r=new Uint8Array(e.length);for(let i=0;i<e.length;i++)r[i]=e.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Yt(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}ir.EMPTY_BYTE_STRING=new ir("");const W5=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function xo(n){if(be(!!n,39018),typeof n=="string"){let t=0;const e=W5.exec(n);if(be(!!e,46558,{timestamp:n}),e[1]){let i=e[1];i=(i+"000000000").substr(0,9),t=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:sn(n.seconds),nanos:sn(n.nanos)}}function sn(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function _o(n){return typeof n=="string"?ir.fromBase64String(n):ir.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DI="server_timestamp",OI="__type__",MI="__previous_value__",NI="__local_write_time__";function Nx(n){var t,e;return((e=(((t=n==null?void 0:n.mapValue)===null||t===void 0?void 0:t.fields)||{})[OI])===null||e===void 0?void 0:e.stringValue)===DI}function Cg(n){const t=n.mapValue.fields[MI];return Nx(t)?Cg(t):t}function Rh(n){const t=xo(n.mapValue.fields[NI].timestampValue);return new Ge(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y5{constructor(t,e,r,i,a,s,l,c,f,d){this.databaseId=t,this.appId=e,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=s,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=f,this.isUsingEmulator=d}}const F1="(default)";class Dh{constructor(t,e){this.projectId=t,this.database=e||F1}static empty(){return new Dh("","")}get isDefaultDatabase(){return this.database===F1}isEqual(t){return t instanceof Dh&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PI="__type__",K5="__max__",q0={mapValue:{}},kI="__vector__",j1="value";function Ao(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Nx(n)?4:Q5(n)?9007199254740991:Z5(n)?10:11:Ft(28295,{value:n})}function va(n,t){if(n===t)return!0;const e=Ao(n);if(e!==Ao(t))return!1;switch(e){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===t.booleanValue;case 4:return Rh(n).isEqual(Rh(t));case 3:return function(i,a){if(typeof i.timestampValue=="string"&&typeof a.timestampValue=="string"&&i.timestampValue.length===a.timestampValue.length)return i.timestampValue===a.timestampValue;const s=xo(i.timestampValue),l=xo(a.timestampValue);return s.seconds===l.seconds&&s.nanos===l.nanos}(n,t);case 5:return n.stringValue===t.stringValue;case 6:return function(i,a){return _o(i.bytesValue).isEqual(_o(a.bytesValue))}(n,t);case 7:return n.referenceValue===t.referenceValue;case 8:return function(i,a){return sn(i.geoPointValue.latitude)===sn(a.geoPointValue.latitude)&&sn(i.geoPointValue.longitude)===sn(a.geoPointValue.longitude)}(n,t);case 2:return function(i,a){if("integerValue"in i&&"integerValue"in a)return sn(i.integerValue)===sn(a.integerValue);if("doubleValue"in i&&"doubleValue"in a){const s=sn(i.doubleValue),l=sn(a.doubleValue);return s===l?V1(s)===V1(l):isNaN(s)&&isNaN(l)}return!1}(n,t);case 9:return fc(n.arrayValue.values||[],t.arrayValue.values||[],va);case 10:case 11:return function(i,a){const s=i.mapValue.fields||{},l=a.mapValue.fields||{};if(mb(s)!==mb(l))return!1;for(const c in s)if(s.hasOwnProperty(c)&&(l[c]===void 0||!va(s[c],l[c])))return!1;return!0}(n,t);default:return Ft(52216,{left:n})}}function Oh(n,t){return(n.values||[]).find(e=>va(e,t))!==void 0}function hc(n,t){if(n===t)return 0;const e=Ao(n),r=Ao(t);if(e!==r)return Yt(e,r);switch(e){case 0:case 9007199254740991:return 0;case 1:return Yt(n.booleanValue,t.booleanValue);case 2:return function(a,s){const l=sn(a.integerValue||a.doubleValue),c=sn(s.integerValue||s.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1}(n,t);case 3:return yb(n.timestampValue,t.timestampValue);case 4:return yb(Rh(n),Rh(t));case 5:return _y(n.stringValue,t.stringValue);case 6:return function(a,s){const l=_o(a),c=_o(s);return l.compareTo(c)}(n.bytesValue,t.bytesValue);case 7:return function(a,s){const l=a.split("/"),c=s.split("/");for(let f=0;f<l.length&&f<c.length;f++){const d=Yt(l[f],c[f]);if(d!==0)return d}return Yt(l.length,c.length)}(n.referenceValue,t.referenceValue);case 8:return function(a,s){const l=Yt(sn(a.latitude),sn(s.latitude));return l!==0?l:Yt(sn(a.longitude),sn(s.longitude))}(n.geoPointValue,t.geoPointValue);case 9:return xb(n.arrayValue,t.arrayValue);case 10:return function(a,s){var l,c,f,d;const g=a.fields||{},m=s.fields||{},v=(l=g[j1])===null||l===void 0?void 0:l.arrayValue,_=(c=m[j1])===null||c===void 0?void 0:c.arrayValue,w=Yt(((f=v==null?void 0:v.values)===null||f===void 0?void 0:f.length)||0,((d=_==null?void 0:_.values)===null||d===void 0?void 0:d.length)||0);return w!==0?w:xb(v,_)}(n.mapValue,t.mapValue);case 11:return function(a,s){if(a===q0.mapValue&&s===q0.mapValue)return 0;if(a===q0.mapValue)return 1;if(s===q0.mapValue)return-1;const l=a.fields||{},c=Object.keys(l),f=s.fields||{},d=Object.keys(f);c.sort(),d.sort();for(let g=0;g<c.length&&g<d.length;++g){const m=_y(c[g],d[g]);if(m!==0)return m;const v=hc(l[c[g]],f[d[g]]);if(v!==0)return v}return Yt(c.length,d.length)}(n.mapValue,t.mapValue);default:throw Ft(23264,{le:e})}}function yb(n,t){if(typeof n=="string"&&typeof t=="string"&&n.length===t.length)return Yt(n,t);const e=xo(n),r=xo(t),i=Yt(e.seconds,r.seconds);return i!==0?i:Yt(e.nanos,r.nanos)}function xb(n,t){const e=n.values||[],r=t.values||[];for(let i=0;i<e.length&&i<r.length;++i){const a=hc(e[i],r[i]);if(a)return a}return Yt(e.length,r.length)}function dc(n){return Ay(n)}function Ay(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(e){const r=xo(e);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(e){return _o(e).toBase64()}(n.bytesValue):"referenceValue"in n?function(e){return Ot.fromName(e).toString()}(n.referenceValue):"geoPointValue"in n?function(e){return`geo(${e.latitude},${e.longitude})`}(n.geoPointValue):"arrayValue"in n?function(e){let r="[",i=!0;for(const a of e.values||[])i?i=!1:r+=",",r+=Ay(a);return r+"]"}(n.arrayValue):"mapValue"in n?function(e){const r=Object.keys(e.fields||{}).sort();let i="{",a=!0;for(const s of r)a?a=!1:i+=",",i+=`${s}:${Ay(e.fields[s])}`;return i+"}"}(n.mapValue):Ft(61005,{value:n})}function x1(n){switch(Ao(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=Cg(n);return t?16+x1(t):16;case 5:return 2*n.stringValue.length;case 6:return _o(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,a)=>i+x1(a),0)}(n.arrayValue);case 10:case 11:return function(r){let i=0;return To(r.fields,(a,s)=>{i+=a.length+x1(s)}),i}(n.mapValue);default:throw Ft(13486,{value:n})}}function _b(n,t){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${t.path.canonicalString()}`}}function Ey(n){return!!n&&"integerValue"in n}function Px(n){return!!n&&"arrayValue"in n}function Ab(n){return!!n&&"nullValue"in n}function Eb(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function _1(n){return!!n&&"mapValue"in n}function Z5(n){var t,e;return((e=(((t=n==null?void 0:n.mapValue)===null||t===void 0?void 0:t.fields)||{})[PI])===null||e===void 0?void 0:e.stringValue)===kI}function _h(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const t={mapValue:{fields:{}}};return To(n.mapValue.fields,(e,r)=>t.mapValue.fields[e]=_h(r)),t}if(n.arrayValue){const t={arrayValue:{values:[]}};for(let e=0;e<(n.arrayValue.values||[]).length;++e)t.arrayValue.values[e]=_h(n.arrayValue.values[e]);return t}return Object.assign({},n)}function Q5(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===K5}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mr{constructor(t){this.value=t}static empty(){return new Mr({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let r=0;r<t.length-1;++r)if(e=(e.mapValue.fields||{})[t.get(r)],!_1(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=_h(e)}setAll(t){let e=nr.emptyPath(),r={},i=[];t.forEach((s,l)=>{if(!e.isImmediateParentOf(l)){const c=this.getFieldsMap(e);this.applyChanges(c,r,i),r={},i=[],e=l.popLast()}s?r[l.lastSegment()]=_h(s):i.push(l.lastSegment())});const a=this.getFieldsMap(e);this.applyChanges(a,r,i)}delete(t){const e=this.field(t.popLast());_1(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return va(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let r=0;r<t.length;++r){let i=e.mapValue.fields[t.get(r)];_1(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},e.mapValue.fields[t.get(r)]=i),e=i}return e.mapValue.fields}applyChanges(t,e,r){To(e,(i,a)=>t[i]=a);for(const i of r)delete t[i]}clone(){return new Mr(_h(this.value))}}function LI(n){const t=[];return To(n.fields,(e,r)=>{const i=new nr([e]);if(_1(r)){const a=LI(r.mapValue).fields;if(a.length===0)t.push(i);else for(const s of a)t.push(i.child(s))}else t.push(i)}),new Wr(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dr{constructor(t,e,r,i,a,s,l){this.key=t,this.documentType=e,this.version=r,this.readTime=i,this.createTime=a,this.data=s,this.documentState=l}static newInvalidDocument(t){return new dr(t,0,Ht.min(),Ht.min(),Ht.min(),Mr.empty(),0)}static newFoundDocument(t,e,r,i){return new dr(t,1,e,Ht.min(),r,i,0)}static newNoDocument(t,e){return new dr(t,2,e,Ht.min(),Ht.min(),Mr.empty(),0)}static newUnknownDocument(t,e){return new dr(t,3,e,Ht.min(),Ht.min(),Mr.empty(),2)}convertToFoundDocument(t,e){return!this.createTime.isEqual(Ht.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Mr.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Mr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ht.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof dr&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new dr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U1{constructor(t,e){this.position=t,this.inclusive=e}}function wb(n,t,e){let r=0;for(let i=0;i<n.position.length;i++){const a=t[i],s=n.position[i];if(a.field.isKeyField()?r=Ot.comparator(Ot.fromName(s.referenceValue),e.key):r=hc(s,e.data.field(a.field)),a.dir==="desc"&&(r*=-1),r!==0)break}return r}function bb(n,t){if(n===null)return t===null;if(t===null||n.inclusive!==t.inclusive||n.position.length!==t.position.length)return!1;for(let e=0;e<n.position.length;e++)if(!va(n.position[e],t.position[e]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mh{constructor(t,e="asc"){this.field=t,this.dir=e}}function J5(n,t){return n.dir===t.dir&&n.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BI{}class yn extends BI{constructor(t,e,r){super(),this.field=t,this.op=e,this.value=r}static create(t,e,r){return t.isKeyField()?e==="in"||e==="not-in"?this.createKeyFieldInFilter(t,e,r):new eP(t,e,r):e==="array-contains"?new iP(t,r):e==="in"?new aP(t,r):e==="not-in"?new sP(t,r):e==="array-contains-any"?new oP(t,r):new yn(t,e,r)}static createKeyFieldInFilter(t,e,r){return e==="in"?new nP(t,r):new rP(t,r)}matches(t){const e=t.data.field(this.field);return this.op==="!="?e!==null&&e.nullValue===void 0&&this.matchesComparison(hc(e,this.value)):e!==null&&Ao(this.value)===Ao(e)&&this.matchesComparison(hc(e,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return Ft(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Bi extends BI{constructor(t,e){super(),this.filters=t,this.op=e,this.he=null}static create(t,e){return new Bi(t,e)}matches(t){return VI(this)?this.filters.find(e=>!e.matches(t))===void 0:this.filters.find(e=>e.matches(t))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((t,e)=>t.concat(e.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function VI(n){return n.op==="and"}function FI(n){return tP(n)&&VI(n)}function tP(n){for(const t of n.filters)if(t instanceof Bi)return!1;return!0}function wy(n){if(n instanceof yn)return n.field.canonicalString()+n.op.toString()+dc(n.value);if(FI(n))return n.filters.map(t=>wy(t)).join(",");{const t=n.filters.map(e=>wy(e)).join(",");return`${n.op}(${t})`}}function jI(n,t){return n instanceof yn?function(r,i){return i instanceof yn&&r.op===i.op&&r.field.isEqual(i.field)&&va(r.value,i.value)}(n,t):n instanceof Bi?function(r,i){return i instanceof Bi&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((a,s,l)=>a&&jI(s,i.filters[l]),!0):!1}(n,t):void Ft(19439)}function UI(n){return n instanceof yn?function(e){return`${e.field.canonicalString()} ${e.op} ${dc(e.value)}`}(n):n instanceof Bi?function(e){return e.op.toString()+" {"+e.getFilters().map(UI).join(" ,")+"}"}(n):"Filter"}class eP extends yn{constructor(t,e,r){super(t,e,r),this.key=Ot.fromName(r.referenceValue)}matches(t){const e=Ot.comparator(t.key,this.key);return this.matchesComparison(e)}}class nP extends yn{constructor(t,e){super(t,"in",e),this.keys=zI("in",e)}matches(t){return this.keys.some(e=>e.isEqual(t.key))}}class rP extends yn{constructor(t,e){super(t,"not-in",e),this.keys=zI("not-in",e)}matches(t){return!this.keys.some(e=>e.isEqual(t.key))}}function zI(n,t){var e;return(((e=t.arrayValue)===null||e===void 0?void 0:e.values)||[]).map(r=>Ot.fromName(r.referenceValue))}class iP extends yn{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return Px(e)&&Oh(e.arrayValue,this.value)}}class aP extends yn{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return e!==null&&Oh(this.value.arrayValue,e)}}class sP extends yn{constructor(t,e){super(t,"not-in",e)}matches(t){if(Oh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return e!==null&&e.nullValue===void 0&&!Oh(this.value.arrayValue,e)}}class oP extends yn{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!Px(e)||!e.arrayValue.values)&&e.arrayValue.values.some(r=>Oh(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lP{constructor(t,e=null,r=[],i=[],a=null,s=null,l=null){this.path=t,this.collectionGroup=e,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=s,this.endAt=l,this.Pe=null}}function Sb(n,t=null,e=[],r=[],i=null,a=null,s=null){return new lP(n,t,e,r,i,a,s)}function kx(n){const t=Gt(n);if(t.Pe===null){let e=t.path.canonicalString();t.collectionGroup!==null&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(r=>wy(r)).join(","),e+="|ob:",e+=t.orderBy.map(r=>function(a){return a.field.canonicalString()+a.dir}(r)).join(","),Tg(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(r=>dc(r)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(r=>dc(r)).join(",")),t.Pe=e}return t.Pe}function Lx(n,t){if(n.limit!==t.limit||n.orderBy.length!==t.orderBy.length)return!1;for(let e=0;e<n.orderBy.length;e++)if(!J5(n.orderBy[e],t.orderBy[e]))return!1;if(n.filters.length!==t.filters.length)return!1;for(let e=0;e<n.filters.length;e++)if(!jI(n.filters[e],t.filters[e]))return!1;return n.collectionGroup===t.collectionGroup&&!!n.path.isEqual(t.path)&&!!bb(n.startAt,t.startAt)&&bb(n.endAt,t.endAt)}function by(n){return Ot.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kl{constructor(t,e=null,r=[],i=[],a=null,s="F",l=null,c=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=s,this.startAt=l,this.endAt=c,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function uP(n,t,e,r,i,a,s,l){return new kl(n,t,e,r,i,a,s,l)}function Bx(n){return new kl(n)}function Tb(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function HI(n){return n.collectionGroup!==null}function Ah(n){const t=Gt(n);if(t.Te===null){t.Te=[];const e=new Set;for(const a of t.explicitOrderBy)t.Te.push(a),e.add(a.field.canonicalString());const r=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(s){let l=new Nn(nr.comparator);return s.filters.forEach(c=>{c.getFlattenedFilters().forEach(f=>{f.isInequality()&&(l=l.add(f.field))})}),l})(t).forEach(a=>{e.has(a.canonicalString())||a.isKeyField()||t.Te.push(new Mh(a,r))}),e.has(nr.keyField().canonicalString())||t.Te.push(new Mh(nr.keyField(),r))}return t.Te}function oa(n){const t=Gt(n);return t.Ie||(t.Ie=cP(t,Ah(n))),t.Ie}function cP(n,t){if(n.limitType==="F")return Sb(n.path,n.collectionGroup,t,n.filters,n.limit,n.startAt,n.endAt);{t=t.map(i=>{const a=i.dir==="desc"?"asc":"desc";return new Mh(i.field,a)});const e=n.endAt?new U1(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new U1(n.startAt.position,n.startAt.inclusive):null;return Sb(n.path,n.collectionGroup,t,n.filters,n.limit,e,r)}}function Sy(n,t){const e=n.filters.concat([t]);return new kl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),e,n.limit,n.limitType,n.startAt,n.endAt)}function z1(n,t,e){return new kl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),t,e,n.startAt,n.endAt)}function Ig(n,t){return Lx(oa(n),oa(t))&&n.limitType===t.limitType}function GI(n){return`${kx(oa(n))}|lt:${n.limitType}`}function Hu(n){return`Query(target=${function(e){let r=e.path.canonicalString();return e.collectionGroup!==null&&(r+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(r+=`, filters: [${e.filters.map(i=>UI(i)).join(", ")}]`),Tg(e.limit)||(r+=", limit: "+e.limit),e.orderBy.length>0&&(r+=`, orderBy: [${e.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),e.startAt&&(r+=", startAt: ",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map(i=>dc(i)).join(",")),e.endAt&&(r+=", endAt: ",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map(i=>dc(i)).join(",")),`Target(${r})`}(oa(n))}; limitType=${n.limitType})`}function Rg(n,t){return t.isFoundDocument()&&function(r,i){const a=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(a):Ot.isDocumentKey(r.path)?r.path.isEqual(a):r.path.isImmediateParentOf(a)}(n,t)&&function(r,i){for(const a of Ah(r))if(!a.field.isKeyField()&&i.data.field(a.field)===null)return!1;return!0}(n,t)&&function(r,i){for(const a of r.filters)if(!a.matches(i))return!1;return!0}(n,t)&&function(r,i){return!(r.startAt&&!function(s,l,c){const f=wb(s,l,c);return s.inclusive?f<=0:f<0}(r.startAt,Ah(r),i)||r.endAt&&!function(s,l,c){const f=wb(s,l,c);return s.inclusive?f>=0:f>0}(r.endAt,Ah(r),i))}(n,t)}function fP(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function $I(n){return(t,e)=>{let r=!1;for(const i of Ah(n)){const a=hP(i,t,e);if(a!==0)return a;r=r||i.field.isKeyField()}return 0}}function hP(n,t,e){const r=n.field.isKeyField()?Ot.comparator(t.key,e.key):function(a,s,l){const c=s.data.field(a),f=l.data.field(a);return c!==null&&f!==null?hc(c,f):Ft(42886)}(n.field,t,e);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Ft(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ll{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){const e=this.mapKeyFn(t),r=this.inner[e];if(r!==void 0){for(const[i,a]of r)if(this.equalsFn(i,t))return a}}has(t){return this.get(t)!==void 0}set(t,e){const r=this.mapKeyFn(t),i=this.inner[r];if(i===void 0)return this.inner[r]=[[t,e]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],t))return void(i[a]=[t,e]);i.push([t,e]),this.innerSize++}delete(t){const e=this.mapKeyFn(t),r=this.inner[e];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return r.length===1?delete this.inner[e]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(t){To(this.inner,(e,r)=>{for(const[i,a]of r)t(i,a)})}isEmpty(){return II(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dP=new Je(Ot.comparator);function as(){return dP}const qI=new Je(Ot.comparator);function lh(...n){let t=qI;for(const e of n)t=t.insert(e.key,e);return t}function XI(n){let t=qI;return n.forEach((e,r)=>t=t.insert(e,r.overlayedDocument)),t}function yl(){return Eh()}function WI(){return Eh()}function Eh(){return new Ll(n=>n.toString(),(n,t)=>n.isEqual(t))}const gP=new Je(Ot.comparator),pP=new Nn(Ot.comparator);function ne(...n){let t=pP;for(const e of n)t=t.add(e);return t}const mP=new Nn(Yt);function vP(){return mP}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vx(n,t){if(n.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:V1(t)?"-0":t}}function YI(n){return{integerValue:""+n}}function yP(n,t){return $5(t)?YI(t):Vx(n,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dg{constructor(){this._=void 0}}function xP(n,t,e){return n instanceof Nh?function(i,a){const s={fields:{[OI]:{stringValue:DI},[NI]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return a&&Nx(a)&&(a=Cg(a)),a&&(s.fields[MI]=a),{mapValue:s}}(e,t):n instanceof Ph?ZI(n,t):n instanceof kh?QI(n,t):function(i,a){const s=KI(i,a),l=Cb(s)+Cb(i.Ee);return Ey(s)&&Ey(i.Ee)?YI(l):Vx(i.serializer,l)}(n,t)}function _P(n,t,e){return n instanceof Ph?ZI(n,t):n instanceof kh?QI(n,t):e}function KI(n,t){return n instanceof H1?function(r){return Ey(r)||function(a){return!!a&&"doubleValue"in a}(r)}(t)?t:{integerValue:0}:null}class Nh extends Dg{}class Ph extends Dg{constructor(t){super(),this.elements=t}}function ZI(n,t){const e=JI(t);for(const r of n.elements)e.some(i=>va(i,r))||e.push(r);return{arrayValue:{values:e}}}class kh extends Dg{constructor(t){super(),this.elements=t}}function QI(n,t){let e=JI(t);for(const r of n.elements)e=e.filter(i=>!va(i,r));return{arrayValue:{values:e}}}class H1 extends Dg{constructor(t,e){super(),this.serializer=t,this.Ee=e}}function Cb(n){return sn(n.integerValue||n.doubleValue)}function JI(n){return Px(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AP{constructor(t,e){this.field=t,this.transform=e}}function EP(n,t){return n.field.isEqual(t.field)&&function(r,i){return r instanceof Ph&&i instanceof Ph||r instanceof kh&&i instanceof kh?fc(r.elements,i.elements,va):r instanceof H1&&i instanceof H1?va(r.Ee,i.Ee):r instanceof Nh&&i instanceof Nh}(n.transform,t.transform)}class wP{constructor(t,e){this.version=t,this.transformResults=e}}class Sr{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new Sr}static exists(t){return new Sr(void 0,t)}static updateTime(t){return new Sr(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function A1(n,t){return n.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(n.updateTime):n.exists===void 0||n.exists===t.isFoundDocument()}class Og{}function t3(n,t){if(!n.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return n.isNoDocument()?new Mg(n.key,Sr.none()):new Qh(n.key,n.data,Sr.none());{const e=n.data,r=Mr.empty();let i=new Nn(nr.comparator);for(let a of t.fields)if(!i.has(a)){let s=e.field(a);s===null&&a.length>1&&(a=a.popLast(),s=e.field(a)),s===null?r.delete(a):r.set(a,s),i=i.add(a)}return new Co(n.key,r,new Wr(i.toArray()),Sr.none())}}function bP(n,t,e){n instanceof Qh?function(i,a,s){const l=i.value.clone(),c=Rb(i.fieldTransforms,a,s.transformResults);l.setAll(c),a.convertToFoundDocument(s.version,l).setHasCommittedMutations()}(n,t,e):n instanceof Co?function(i,a,s){if(!A1(i.precondition,a))return void a.convertToUnknownDocument(s.version);const l=Rb(i.fieldTransforms,a,s.transformResults),c=a.data;c.setAll(e3(i)),c.setAll(l),a.convertToFoundDocument(s.version,c).setHasCommittedMutations()}(n,t,e):function(i,a,s){a.convertToNoDocument(s.version).setHasCommittedMutations()}(0,t,e)}function wh(n,t,e,r){return n instanceof Qh?function(a,s,l,c){if(!A1(a.precondition,s))return l;const f=a.value.clone(),d=Db(a.fieldTransforms,c,s);return f.setAll(d),s.convertToFoundDocument(s.version,f).setHasLocalMutations(),null}(n,t,e,r):n instanceof Co?function(a,s,l,c){if(!A1(a.precondition,s))return l;const f=Db(a.fieldTransforms,c,s),d=s.data;return d.setAll(e3(a)),d.setAll(f),s.convertToFoundDocument(s.version,d).setHasLocalMutations(),l===null?null:l.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(g=>g.field))}(n,t,e,r):function(a,s,l){return A1(a.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):l}(n,t,e)}function SP(n,t){let e=null;for(const r of n.fieldTransforms){const i=t.data.field(r.field),a=KI(r.transform,i||null);a!=null&&(e===null&&(e=Mr.empty()),e.set(r.field,a))}return e||null}function Ib(n,t){return n.type===t.type&&!!n.key.isEqual(t.key)&&!!n.precondition.isEqual(t.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&fc(r,i,(a,s)=>EP(a,s))}(n.fieldTransforms,t.fieldTransforms)&&(n.type===0?n.value.isEqual(t.value):n.type!==1||n.data.isEqual(t.data)&&n.fieldMask.isEqual(t.fieldMask))}class Qh extends Og{constructor(t,e,r,i=[]){super(),this.key=t,this.value=e,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Co extends Og{constructor(t,e,r,i,a=[]){super(),this.key=t,this.data=e,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function e3(n){const t=new Map;return n.fieldMask.fields.forEach(e=>{if(!e.isEmpty()){const r=n.data.field(e);t.set(e,r)}}),t}function Rb(n,t,e){const r=new Map;be(n.length===e.length,32656,{Ae:e.length,Re:n.length});for(let i=0;i<e.length;i++){const a=n[i],s=a.transform,l=t.data.field(a.field);r.set(a.field,_P(s,l,e[i]))}return r}function Db(n,t,e){const r=new Map;for(const i of n){const a=i.transform,s=e.data.field(i.field);r.set(i.field,xP(a,s,t))}return r}class Mg extends Og{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class TP extends Og{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CP{constructor(t,e,r,i){this.batchId=t,this.localWriteTime=e,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(t,e){const r=e.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(t.key)&&bP(a,t,r[i])}}applyToLocalView(t,e){for(const r of this.baseMutations)r.key.isEqual(t.key)&&(e=wh(r,t,e,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(t.key)&&(e=wh(r,t,e,this.localWriteTime));return e}applyToLocalDocumentSet(t,e){const r=WI();return this.mutations.forEach(i=>{const a=t.get(i.key),s=a.overlayedDocument;let l=this.applyToLocalView(s,a.mutatedFields);l=e.has(i.key)?null:l;const c=t3(s,l);c!==null&&r.set(i.key,c),s.isValidDocument()||s.convertToNoDocument(Ht.min())}),r}keys(){return this.mutations.reduce((t,e)=>t.add(e.key),ne())}isEqual(t){return this.batchId===t.batchId&&fc(this.mutations,t.mutations,(e,r)=>Ib(e,r))&&fc(this.baseMutations,t.baseMutations,(e,r)=>Ib(e,r))}}class Fx{constructor(t,e,r,i){this.batch=t,this.commitVersion=e,this.mutationResults=r,this.docVersions=i}static from(t,e,r){be(t.mutations.length===r.length,58842,{Ve:t.mutations.length,me:r.length});let i=function(){return gP}();const a=t.mutations;for(let s=0;s<a.length;s++)i=i.insert(a[s].key,r[s].version);return new Fx(t,e,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IP{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RP{constructor(t,e){this.count=t,this.unchangedNames=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var gn,se;function DP(n){switch(n){case ut.OK:return Ft(64938);case ut.CANCELLED:case ut.UNKNOWN:case ut.DEADLINE_EXCEEDED:case ut.RESOURCE_EXHAUSTED:case ut.INTERNAL:case ut.UNAVAILABLE:case ut.UNAUTHENTICATED:return!1;case ut.INVALID_ARGUMENT:case ut.NOT_FOUND:case ut.ALREADY_EXISTS:case ut.PERMISSION_DENIED:case ut.FAILED_PRECONDITION:case ut.ABORTED:case ut.OUT_OF_RANGE:case ut.UNIMPLEMENTED:case ut.DATA_LOSS:return!0;default:return Ft(15467,{code:n})}}function n3(n){if(n===void 0)return is("GRPC error has no .code"),ut.UNKNOWN;switch(n){case gn.OK:return ut.OK;case gn.CANCELLED:return ut.CANCELLED;case gn.UNKNOWN:return ut.UNKNOWN;case gn.DEADLINE_EXCEEDED:return ut.DEADLINE_EXCEEDED;case gn.RESOURCE_EXHAUSTED:return ut.RESOURCE_EXHAUSTED;case gn.INTERNAL:return ut.INTERNAL;case gn.UNAVAILABLE:return ut.UNAVAILABLE;case gn.UNAUTHENTICATED:return ut.UNAUTHENTICATED;case gn.INVALID_ARGUMENT:return ut.INVALID_ARGUMENT;case gn.NOT_FOUND:return ut.NOT_FOUND;case gn.ALREADY_EXISTS:return ut.ALREADY_EXISTS;case gn.PERMISSION_DENIED:return ut.PERMISSION_DENIED;case gn.FAILED_PRECONDITION:return ut.FAILED_PRECONDITION;case gn.ABORTED:return ut.ABORTED;case gn.OUT_OF_RANGE:return ut.OUT_OF_RANGE;case gn.UNIMPLEMENTED:return ut.UNIMPLEMENTED;case gn.DATA_LOSS:return ut.DATA_LOSS;default:return Ft(39323,{code:n})}}(se=gn||(gn={}))[se.OK=0]="OK",se[se.CANCELLED=1]="CANCELLED",se[se.UNKNOWN=2]="UNKNOWN",se[se.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",se[se.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",se[se.NOT_FOUND=5]="NOT_FOUND",se[se.ALREADY_EXISTS=6]="ALREADY_EXISTS",se[se.PERMISSION_DENIED=7]="PERMISSION_DENIED",se[se.UNAUTHENTICATED=16]="UNAUTHENTICATED",se[se.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",se[se.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",se[se.ABORTED=10]="ABORTED",se[se.OUT_OF_RANGE=11]="OUT_OF_RANGE",se[se.UNIMPLEMENTED=12]="UNIMPLEMENTED",se[se.INTERNAL=13]="INTERNAL",se[se.UNAVAILABLE=14]="UNAVAILABLE",se[se.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OP=new ho([4294967295,4294967295],0);function Ob(n){const t=SI().encode(n),e=new vI;return e.update(t),new Uint8Array(e.digest())}function Mb(n){const t=new DataView(n.buffer),e=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),a=t.getUint32(12,!0);return[new ho([e,r],0),new ho([i,a],0)]}class jx{constructor(t,e,r){if(this.bitmap=t,this.padding=e,this.hashCount=r,e<0||e>=8)throw new uh(`Invalid padding: ${e}`);if(r<0)throw new uh(`Invalid hash count: ${r}`);if(t.length>0&&this.hashCount===0)throw new uh(`Invalid hash count: ${r}`);if(t.length===0&&e!==0)throw new uh(`Invalid padding when bitmap length is 0: ${e}`);this.fe=8*t.length-e,this.ge=ho.fromNumber(this.fe)}pe(t,e,r){let i=t.add(e.multiply(ho.fromNumber(r)));return i.compare(OP)===1&&(i=new ho([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ge).toNumber()}ye(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.fe===0)return!1;const e=Ob(t),[r,i]=Mb(e);for(let a=0;a<this.hashCount;a++){const s=this.pe(r,i,a);if(!this.ye(s))return!1}return!0}static create(t,e,r){const i=t%8==0?0:8-t%8,a=new Uint8Array(Math.ceil(t/8)),s=new jx(a,i,e);return r.forEach(l=>s.insert(l)),s}insert(t){if(this.fe===0)return;const e=Ob(t),[r,i]=Mb(e);for(let a=0;a<this.hashCount;a++){const s=this.pe(r,i,a);this.we(s)}}we(t){const e=Math.floor(t/8),r=t%8;this.bitmap[e]|=1<<r}}class uh extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ng{constructor(t,e,r,i,a){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(t,e,r){const i=new Map;return i.set(t,Jh.createSynthesizedTargetChangeForCurrentChange(t,e,r)),new Ng(Ht.min(),i,new Je(Yt),as(),ne())}}class Jh{constructor(t,e,r,i,a){this.resumeToken=t,this.current=e,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(t,e,r){return new Jh(r,e,ne(),ne(),ne())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E1{constructor(t,e,r,i){this.Se=t,this.removedTargetIds=e,this.key=r,this.be=i}}class r3{constructor(t,e){this.targetId=t,this.De=e}}class i3{constructor(t,e,r=ir.EMPTY_BYTE_STRING,i=null){this.state=t,this.targetIds=e,this.resumeToken=r,this.cause=i}}class Nb{constructor(){this.ve=0,this.Ce=Pb(),this.Fe=ir.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(t){t.approximateByteSize()>0&&(this.xe=!0,this.Fe=t)}Le(){let t=ne(),e=ne(),r=ne();return this.Ce.forEach((i,a)=>{switch(a){case 0:t=t.add(i);break;case 2:e=e.add(i);break;case 1:r=r.add(i);break;default:Ft(38017,{changeType:a})}}),new Jh(this.Fe,this.Me,t,e,r)}ke(){this.xe=!1,this.Ce=Pb()}qe(t,e){this.xe=!0,this.Ce=this.Ce.insert(t,e)}Qe(t){this.xe=!0,this.Ce=this.Ce.remove(t)}$e(){this.ve+=1}Ue(){this.ve-=1,be(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class MP{constructor(t){this.We=t,this.Ge=new Map,this.ze=as(),this.je=X0(),this.Je=X0(),this.He=new Je(Yt)}Ye(t){for(const e of t.Se)t.be&&t.be.isFoundDocument()?this.Ze(e,t.be):this.Xe(e,t.key,t.be);for(const e of t.removedTargetIds)this.Xe(e,t.key,t.be)}et(t){this.forEachTarget(t,e=>{const r=this.tt(e);switch(t.state){case 0:this.nt(e)&&r.Be(t.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(t.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(e);break;case 3:this.nt(e)&&(r.Ke(),r.Be(t.resumeToken));break;case 4:this.nt(e)&&(this.rt(e),r.Be(t.resumeToken));break;default:Ft(56790,{state:t.state})}})}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.Ge.forEach((r,i)=>{this.nt(i)&&e(i)})}it(t){const e=t.targetId,r=t.De.count,i=this.st(e);if(i){const a=i.target;if(by(a))if(r===0){const s=new Ot(a.path);this.Xe(e,s,dr.newNoDocument(s,Ht.min()))}else be(r===1,20013,{expectedCount:r});else{const s=this.ot(e);if(s!==r){const l=this._t(t),c=l?this.ut(l,t,s):1;if(c!==0){this.rt(e);const f=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(e,f)}}}}}_t(t){const e=t.De.unchangedNames;if(!e||!e.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:a=0}=e;let s,l;try{s=_o(r).toUint8Array()}catch(c){if(c instanceof RI)return vo("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new jx(s,i,a)}catch(c){return vo(c instanceof uh?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.fe===0?null:l}ut(t,e,r){return e.De.count===r-this.ht(t,e.targetId)?0:2}ht(t,e){const r=this.We.getRemoteKeysForTarget(e);let i=0;return r.forEach(a=>{const s=this.We.lt(),l=`projects/${s.projectId}/databases/${s.database}/documents/${a.path.canonicalString()}`;t.mightContain(l)||(this.Xe(e,a,null),i++)}),i}Pt(t){const e=new Map;this.Ge.forEach((a,s)=>{const l=this.st(s);if(l){if(a.current&&by(l.target)){const c=new Ot(l.target.path);this.Tt(c).has(s)||this.It(s,c)||this.Xe(s,c,dr.newNoDocument(c,t))}a.Ne&&(e.set(s,a.Le()),a.ke())}});let r=ne();this.Je.forEach((a,s)=>{let l=!0;s.forEachWhile(c=>{const f=this.st(c);return!f||f.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(a))}),this.ze.forEach((a,s)=>s.setReadTime(t));const i=new Ng(t,e,this.He,this.ze,r);return this.ze=as(),this.je=X0(),this.Je=X0(),this.He=new Je(Yt),i}Ze(t,e){if(!this.nt(t))return;const r=this.It(t,e.key)?2:0;this.tt(t).qe(e.key,r),this.ze=this.ze.insert(e.key,e),this.je=this.je.insert(e.key,this.Tt(e.key).add(t)),this.Je=this.Je.insert(e.key,this.dt(e.key).add(t))}Xe(t,e,r){if(!this.nt(t))return;const i=this.tt(t);this.It(t,e)?i.qe(e,1):i.Qe(e),this.Je=this.Je.insert(e,this.dt(e).delete(t)),this.Je=this.Je.insert(e,this.dt(e).add(t)),r&&(this.ze=this.ze.insert(e,r))}removeTarget(t){this.Ge.delete(t)}ot(t){const e=this.tt(t).Le();return this.We.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}$e(t){this.tt(t).$e()}tt(t){let e=this.Ge.get(t);return e||(e=new Nb,this.Ge.set(t,e)),e}dt(t){let e=this.Je.get(t);return e||(e=new Nn(Yt),this.Je=this.Je.insert(t,e)),e}Tt(t){let e=this.je.get(t);return e||(e=new Nn(Yt),this.je=this.je.insert(t,e)),e}nt(t){const e=this.st(t)!==null;return e||bt("WatchChangeAggregator","Detected inactive target",t),e}st(t){const e=this.Ge.get(t);return e&&e.Oe?null:this.We.Et(t)}rt(t){this.Ge.set(t,new Nb),this.We.getRemoteKeysForTarget(t).forEach(e=>{this.Xe(t,e,null)})}It(t,e){return this.We.getRemoteKeysForTarget(t).has(e)}}function X0(){return new Je(Ot.comparator)}function Pb(){return new Je(Ot.comparator)}const NP={asc:"ASCENDING",desc:"DESCENDING"},PP={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},kP={and:"AND",or:"OR"};class LP{constructor(t,e){this.databaseId=t,this.useProto3Json=e}}function Ty(n,t){return n.useProto3Json||Tg(t)?t:{value:t}}function G1(n,t){return n.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function a3(n,t){return n.useProto3Json?t.toBase64():t.toUint8Array()}function BP(n,t){return G1(n,t.toTimestamp())}function la(n){return be(!!n,49232),Ht.fromTimestamp(function(e){const r=xo(e);return new Ge(r.seconds,r.nanos)}(n))}function Ux(n,t){return Cy(n,t).canonicalString()}function Cy(n,t){const e=function(i){return new Be(["projects",i.projectId,"databases",i.database])}(n).child("documents");return t===void 0?e:e.child(t)}function s3(n){const t=Be.fromString(n);return be(f3(t),10190,{key:t.toString()}),t}function Iy(n,t){return Ux(n.databaseId,t.path)}function Av(n,t){const e=s3(t);if(e.get(1)!==n.databaseId.projectId)throw new At(ut.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+e.get(1)+" vs "+n.databaseId.projectId);if(e.get(3)!==n.databaseId.database)throw new At(ut.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+e.get(3)+" vs "+n.databaseId.database);return new Ot(l3(e))}function o3(n,t){return Ux(n.databaseId,t)}function VP(n){const t=s3(n);return t.length===4?Be.emptyPath():l3(t)}function Ry(n){return new Be(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function l3(n){return be(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function kb(n,t,e){return{name:Iy(n,t),fields:e.value.mapValue.fields}}function FP(n,t){let e;if("targetChange"in t){t.targetChange;const r=function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:Ft(39313,{state:f})}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],a=function(f,d){return f.useProto3Json?(be(d===void 0||typeof d=="string",58123),ir.fromBase64String(d||"")):(be(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),ir.fromUint8Array(d||new Uint8Array))}(n,t.targetChange.resumeToken),s=t.targetChange.cause,l=s&&function(f){const d=f.code===void 0?ut.UNKNOWN:n3(f.code);return new At(d,f.message||"")}(s);e=new i3(r,i,a,l||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=Av(n,r.document.name),a=la(r.document.updateTime),s=r.document.createTime?la(r.document.createTime):Ht.min(),l=new Mr({mapValue:{fields:r.document.fields}}),c=dr.newFoundDocument(i,a,s,l),f=r.targetIds||[],d=r.removedTargetIds||[];e=new E1(f,d,c.key,c)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=Av(n,r.document),a=r.readTime?la(r.readTime):Ht.min(),s=dr.newNoDocument(i,a),l=r.removedTargetIds||[];e=new E1([],l,s.key,s)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=Av(n,r.document),a=r.removedTargetIds||[];e=new E1([],a,i,null)}else{if(!("filter"in t))return Ft(11601,{At:t});{t.filter;const r=t.filter;r.targetId;const{count:i=0,unchangedNames:a}=r,s=new RP(i,a),l=r.targetId;e=new r3(l,s)}}return e}function jP(n,t){let e;if(t instanceof Qh)e={update:kb(n,t.key,t.value)};else if(t instanceof Mg)e={delete:Iy(n,t.key)};else if(t instanceof Co)e={update:kb(n,t.key,t.data),updateMask:YP(t.fieldMask)};else{if(!(t instanceof TP))return Ft(16599,{Rt:t.type});e={verify:Iy(n,t.key)}}return t.fieldTransforms.length>0&&(e.updateTransforms=t.fieldTransforms.map(r=>function(a,s){const l=s.transform;if(l instanceof Nh)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Ph)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof kh)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof H1)return{fieldPath:s.field.canonicalString(),increment:l.Ee};throw Ft(20930,{transform:s.transform})}(0,r))),t.precondition.isNone||(e.currentDocument=function(i,a){return a.updateTime!==void 0?{updateTime:BP(i,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:Ft(27497)}(n,t.precondition)),e}function UP(n,t){return n&&n.length>0?(be(t!==void 0,14353),n.map(e=>function(i,a){let s=i.updateTime?la(i.updateTime):la(a);return s.isEqual(Ht.min())&&(s=la(a)),new wP(s,i.transformResults||[])}(e,t))):[]}function zP(n,t){return{documents:[o3(n,t.path)]}}function HP(n,t){const e={structuredQuery:{}},r=t.path;let i;t.collectionGroup!==null?(i=r,e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),e.structuredQuery.from=[{collectionId:r.lastSegment()}]),e.parent=o3(n,i);const a=function(f){if(f.length!==0)return c3(Bi.create(f,"and"))}(t.filters);a&&(e.structuredQuery.where=a);const s=function(f){if(f.length!==0)return f.map(d=>function(m){return{field:Gu(m.field),direction:qP(m.dir)}}(d))}(t.orderBy);s&&(e.structuredQuery.orderBy=s);const l=Ty(n,t.limit);return l!==null&&(e.structuredQuery.limit=l),t.startAt&&(e.structuredQuery.startAt=function(f){return{before:f.inclusive,values:f.position}}(t.startAt)),t.endAt&&(e.structuredQuery.endAt=function(f){return{before:!f.inclusive,values:f.position}}(t.endAt)),{Vt:e,parent:i}}function GP(n){let t=VP(n.parent);const e=n.structuredQuery,r=e.from?e.from.length:0;let i=null;if(r>0){be(r===1,65062);const d=e.from[0];d.allDescendants?i=d.collectionId:t=t.child(d.collectionId)}let a=[];e.where&&(a=function(g){const m=u3(g);return m instanceof Bi&&FI(m)?m.getFilters():[m]}(e.where));let s=[];e.orderBy&&(s=function(g){return g.map(m=>function(_){return new Mh($u(_.field),function(b){switch(b){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(_.direction))}(m))}(e.orderBy));let l=null;e.limit&&(l=function(g){let m;return m=typeof g=="object"?g.value:g,Tg(m)?null:m}(e.limit));let c=null;e.startAt&&(c=function(g){const m=!!g.before,v=g.values||[];return new U1(v,m)}(e.startAt));let f=null;return e.endAt&&(f=function(g){const m=!g.before,v=g.values||[];return new U1(v,m)}(e.endAt)),uP(t,i,s,a,l,"F",c,f)}function $P(n,t){const e=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ft(28987,{purpose:i})}}(t.purpose);return e==null?null:{"goog-listen-tags":e}}function u3(n){return n.unaryFilter!==void 0?function(e){switch(e.unaryFilter.op){case"IS_NAN":const r=$u(e.unaryFilter.field);return yn.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=$u(e.unaryFilter.field);return yn.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=$u(e.unaryFilter.field);return yn.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=$u(e.unaryFilter.field);return yn.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ft(61313);default:return Ft(60726)}}(n):n.fieldFilter!==void 0?function(e){return yn.create($u(e.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ft(58110);default:return Ft(50506)}}(e.fieldFilter.op),e.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(e){return Bi.create(e.compositeFilter.filters.map(r=>u3(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Ft(1026)}}(e.compositeFilter.op))}(n):Ft(30097,{filter:n})}function qP(n){return NP[n]}function XP(n){return PP[n]}function WP(n){return kP[n]}function Gu(n){return{fieldPath:n.canonicalString()}}function $u(n){return nr.fromServerFormat(n.fieldPath)}function c3(n){return n instanceof yn?function(e){if(e.op==="=="){if(Eb(e.value))return{unaryFilter:{field:Gu(e.field),op:"IS_NAN"}};if(Ab(e.value))return{unaryFilter:{field:Gu(e.field),op:"IS_NULL"}}}else if(e.op==="!="){if(Eb(e.value))return{unaryFilter:{field:Gu(e.field),op:"IS_NOT_NAN"}};if(Ab(e.value))return{unaryFilter:{field:Gu(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Gu(e.field),op:XP(e.op),value:e.value}}}(n):n instanceof Bi?function(e){const r=e.getFilters().map(i=>c3(i));return r.length===1?r[0]:{compositeFilter:{op:WP(e.op),filters:r}}}(n):Ft(54877,{filter:n})}function YP(n){const t=[];return n.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function f3(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ao{constructor(t,e,r,i,a=Ht.min(),s=Ht.min(),l=ir.EMPTY_BYTE_STRING,c=null){this.target=t,this.targetId=e,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(t){return new ao(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,e){return new ao(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new ao(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new ao(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KP{constructor(t){this.gt=t}}function ZP(n){const t=GP({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?z1(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QP{constructor(){this.Dn=new JP}addToCollectionParentIndex(t,e){return this.Dn.add(e),dt.resolve()}getCollectionParents(t,e){return dt.resolve(this.Dn.getEntries(e))}addFieldIndex(t,e){return dt.resolve()}deleteFieldIndex(t,e){return dt.resolve()}deleteAllFieldIndexes(t){return dt.resolve()}createTargetIndexes(t,e){return dt.resolve()}getDocumentsMatchingTarget(t,e){return dt.resolve(null)}getIndexType(t,e){return dt.resolve(0)}getFieldIndexes(t,e){return dt.resolve([])}getNextCollectionGroupToUpdate(t){return dt.resolve(null)}getMinOffset(t,e){return dt.resolve(yo.min())}getMinOffsetFromCollectionGroup(t,e){return dt.resolve(yo.min())}updateCollectionGroup(t,e,r){return dt.resolve()}updateIndexEntries(t,e){return dt.resolve()}}class JP{constructor(){this.index={}}add(t){const e=t.lastSegment(),r=t.popLast(),i=this.index[e]||new Nn(Be.comparator),a=!i.has(r);return this.index[e]=i.add(r),a}has(t){const e=t.lastSegment(),r=t.popLast(),i=this.index[e];return i&&i.has(r)}getEntries(t){return(this.index[t]||new Nn(Be.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lb={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},h3=41943040;class Or{static withCacheSize(t){return new Or(t,Or.DEFAULT_COLLECTION_PERCENTILE,Or.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,e,r){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Or.DEFAULT_COLLECTION_PERCENTILE=10,Or.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Or.DEFAULT=new Or(h3,Or.DEFAULT_COLLECTION_PERCENTILE,Or.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Or.DISABLED=new Or(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gc{constructor(t){this._r=t}next(){return this._r+=2,this._r}static ar(){return new gc(0)}static ur(){return new gc(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bb="LruGarbageCollector",t9=1048576;function Vb([n,t],[e,r]){const i=Yt(n,e);return i===0?Yt(t,r):i}class e9{constructor(t){this.Tr=t,this.buffer=new Nn(Vb),this.Ir=0}dr(){return++this.Ir}Er(t){const e=[t,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(e);else{const r=this.buffer.last();Vb(e,r)<0&&(this.buffer=this.buffer.delete(r).add(e))}}get maxValue(){return this.buffer.last()[0]}}class n9{constructor(t,e,r){this.garbageCollector=t,this.asyncQueue=e,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(t){bt(Bb,`Garbage collection scheduled in ${t}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){Oc(e)?bt(Bb,"Ignoring IndexedDB error during garbage collection: ",e):await Dc(e)}await this.Rr(3e5)})}}class r9{constructor(t,e){this.Vr=t,this.params=e}calculateTargetCount(t,e){return this.Vr.mr(t).next(r=>Math.floor(e/100*r))}nthSequenceNumber(t,e){if(e===0)return dt.resolve(Sg.ue);const r=new e9(e);return this.Vr.forEachTarget(t,i=>r.Er(i.sequenceNumber)).next(()=>this.Vr.gr(t,i=>r.Er(i))).next(()=>r.maxValue)}removeTargets(t,e,r){return this.Vr.removeTargets(t,e,r)}removeOrphanedDocuments(t,e){return this.Vr.removeOrphanedDocuments(t,e)}collect(t,e){return this.params.cacheSizeCollectionThreshold===-1?(bt("LruGarbageCollector","Garbage collection skipped; disabled"),dt.resolve(Lb)):this.getCacheSize(t).next(r=>r<this.params.cacheSizeCollectionThreshold?(bt("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Lb):this.pr(t,e))}getCacheSize(t){return this.Vr.getCacheSize(t)}pr(t,e){let r,i,a,s,l,c,f;const d=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(g=>(g>this.params.maximumSequenceNumbersToCollect?(bt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${g}`),i=this.params.maximumSequenceNumbersToCollect):i=g,s=Date.now(),this.nthSequenceNumber(t,i))).next(g=>(r=g,l=Date.now(),this.removeTargets(t,r,e))).next(g=>(a=g,c=Date.now(),this.removeOrphanedDocuments(t,r))).next(g=>(f=Date.now(),zu()<=ee.DEBUG&&bt("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-d}ms
	Determined least recently used ${i} in `+(l-s)+`ms
	Removed ${a} targets in `+(c-l)+`ms
	Removed ${g} documents in `+(f-c)+`ms
Total Duration: ${f-d}ms`),dt.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:g})))}}function i9(n,t){return new r9(n,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a9{constructor(){this.changes=new Ll(t=>t.toString(),(t,e)=>t.isEqual(e)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,dr.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();const r=this.changes.get(e);return r!==void 0?dt.resolve(r):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s9{constructor(t,e){this.overlayedDocument=t,this.mutatedFields=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o9{constructor(t,e,r,i){this.remoteDocumentCache=t,this.mutationQueue=e,this.documentOverlayCache=r,this.indexManager=i}getDocument(t,e){let r=null;return this.documentOverlayCache.getOverlay(t,e).next(i=>(r=i,this.remoteDocumentCache.getEntry(t,e))).next(i=>(r!==null&&wh(r.mutation,i,Wr.empty(),Ge.now()),i))}getDocuments(t,e){return this.remoteDocumentCache.getEntries(t,e).next(r=>this.getLocalViewOfDocuments(t,r,ne()).next(()=>r))}getLocalViewOfDocuments(t,e,r=ne()){const i=yl();return this.populateOverlays(t,i,e).next(()=>this.computeViews(t,e,i,r).next(a=>{let s=lh();return a.forEach((l,c)=>{s=s.insert(l,c.overlayedDocument)}),s}))}getOverlayedDocuments(t,e){const r=yl();return this.populateOverlays(t,r,e).next(()=>this.computeViews(t,e,r,ne()))}populateOverlays(t,e,r){const i=[];return r.forEach(a=>{e.has(a)||i.push(a)}),this.documentOverlayCache.getOverlays(t,i).next(a=>{a.forEach((s,l)=>{e.set(s,l)})})}computeViews(t,e,r,i){let a=as();const s=Eh(),l=function(){return Eh()}();return e.forEach((c,f)=>{const d=r.get(f.key);i.has(f.key)&&(d===void 0||d.mutation instanceof Co)?a=a.insert(f.key,f):d!==void 0?(s.set(f.key,d.mutation.getFieldMask()),wh(d.mutation,f,d.mutation.getFieldMask(),Ge.now())):s.set(f.key,Wr.empty())}),this.recalculateAndSaveOverlays(t,a).next(c=>(c.forEach((f,d)=>s.set(f,d)),e.forEach((f,d)=>{var g;return l.set(f,new s9(d,(g=s.get(f))!==null&&g!==void 0?g:null))}),l))}recalculateAndSaveOverlays(t,e){const r=Eh();let i=new Je((s,l)=>s-l),a=ne();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next(s=>{for(const l of s)l.keys().forEach(c=>{const f=e.get(c);if(f===null)return;let d=r.get(c)||Wr.empty();d=l.applyToLocalView(f,d),r.set(c,d);const g=(i.get(l.batchId)||ne()).add(c);i=i.insert(l.batchId,g)})}).next(()=>{const s=[],l=i.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),f=c.key,d=c.value,g=WI();d.forEach(m=>{if(!a.has(m)){const v=t3(e.get(m),r.get(m));v!==null&&g.set(m,v),a=a.add(m)}}),s.push(this.documentOverlayCache.saveOverlays(t,f,g))}return dt.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(t,e){return this.remoteDocumentCache.getEntries(t,e).next(r=>this.recalculateAndSaveOverlays(t,r))}getDocumentsMatchingQuery(t,e,r,i){return function(s){return Ot.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(e)?this.getDocumentsMatchingDocumentQuery(t,e.path):HI(e)?this.getDocumentsMatchingCollectionGroupQuery(t,e,r,i):this.getDocumentsMatchingCollectionQuery(t,e,r,i)}getNextDocuments(t,e,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,r,i).next(a=>{const s=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,e,r.largestBatchId,i-a.size):dt.resolve(yl());let l=Ih,c=a;return s.next(f=>dt.forEach(f,(d,g)=>(l<g.largestBatchId&&(l=g.largestBatchId),a.get(d)?dt.resolve():this.remoteDocumentCache.getEntry(t,d).next(m=>{c=c.insert(d,m)}))).next(()=>this.populateOverlays(t,f,a)).next(()=>this.computeViews(t,c,f,ne())).next(d=>({batchId:l,changes:XI(d)})))})}getDocumentsMatchingDocumentQuery(t,e){return this.getDocument(t,new Ot(e)).next(r=>{let i=lh();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(t,e,r,i){const a=e.collectionGroup;let s=lh();return this.indexManager.getCollectionParents(t,a).next(l=>dt.forEach(l,c=>{const f=function(g,m){return new kl(m,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)}(e,c.child(a));return this.getDocumentsMatchingCollectionQuery(t,f,r,i).next(d=>{d.forEach((g,m)=>{s=s.insert(g,m)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(t,e,r,i){let a;return this.documentOverlayCache.getOverlaysForCollection(t,e.path,r.largestBatchId).next(s=>(a=s,this.remoteDocumentCache.getDocumentsMatchingQuery(t,e,r,a,i))).next(s=>{a.forEach((c,f)=>{const d=f.getKey();s.get(d)===null&&(s=s.insert(d,dr.newInvalidDocument(d)))});let l=lh();return s.forEach((c,f)=>{const d=a.get(c);d!==void 0&&wh(d.mutation,f,Wr.empty(),Ge.now()),Rg(e,f)&&(l=l.insert(c,f))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l9{constructor(t){this.serializer=t,this.Br=new Map,this.Lr=new Map}getBundleMetadata(t,e){return dt.resolve(this.Br.get(e))}saveBundleMetadata(t,e){return this.Br.set(e.id,function(i){return{id:i.id,version:i.version,createTime:la(i.createTime)}}(e)),dt.resolve()}getNamedQuery(t,e){return dt.resolve(this.Lr.get(e))}saveNamedQuery(t,e){return this.Lr.set(e.name,function(i){return{name:i.name,query:ZP(i.bundledQuery),readTime:la(i.readTime)}}(e)),dt.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u9{constructor(){this.overlays=new Je(Ot.comparator),this.kr=new Map}getOverlay(t,e){return dt.resolve(this.overlays.get(e))}getOverlays(t,e){const r=yl();return dt.forEach(e,i=>this.getOverlay(t,i).next(a=>{a!==null&&r.set(i,a)})).next(()=>r)}saveOverlays(t,e,r){return r.forEach((i,a)=>{this.wt(t,e,a)}),dt.resolve()}removeOverlaysForBatchId(t,e,r){const i=this.kr.get(r);return i!==void 0&&(i.forEach(a=>this.overlays=this.overlays.remove(a)),this.kr.delete(r)),dt.resolve()}getOverlaysForCollection(t,e,r){const i=yl(),a=e.length+1,s=new Ot(e.child("")),l=this.overlays.getIteratorFrom(s);for(;l.hasNext();){const c=l.getNext().value,f=c.getKey();if(!e.isPrefixOf(f.path))break;f.path.length===a&&c.largestBatchId>r&&i.set(c.getKey(),c)}return dt.resolve(i)}getOverlaysForCollectionGroup(t,e,r,i){let a=new Je((f,d)=>f-d);const s=this.overlays.getIterator();for(;s.hasNext();){const f=s.getNext().value;if(f.getKey().getCollectionGroup()===e&&f.largestBatchId>r){let d=a.get(f.largestBatchId);d===null&&(d=yl(),a=a.insert(f.largestBatchId,d)),d.set(f.getKey(),f)}}const l=yl(),c=a.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((f,d)=>l.set(f,d)),!(l.size()>=i)););return dt.resolve(l)}wt(t,e,r){const i=this.overlays.get(r.key);if(i!==null){const s=this.kr.get(i.largestBatchId).delete(r.key);this.kr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new IP(e,r));let a=this.kr.get(e);a===void 0&&(a=ne(),this.kr.set(e,a)),this.kr.set(e,a.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c9{constructor(){this.sessionToken=ir.EMPTY_BYTE_STRING}getSessionToken(t){return dt.resolve(this.sessionToken)}setSessionToken(t,e){return this.sessionToken=e,dt.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zx{constructor(){this.qr=new Nn(Hn.Qr),this.$r=new Nn(Hn.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(t,e){const r=new Hn(t,e);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(t,e){t.forEach(r=>this.addReference(r,e))}removeReference(t,e){this.Wr(new Hn(t,e))}Gr(t,e){t.forEach(r=>this.removeReference(r,e))}zr(t){const e=new Ot(new Be([])),r=new Hn(e,t),i=new Hn(e,t+1),a=[];return this.$r.forEachInRange([r,i],s=>{this.Wr(s),a.push(s.key)}),a}jr(){this.qr.forEach(t=>this.Wr(t))}Wr(t){this.qr=this.qr.delete(t),this.$r=this.$r.delete(t)}Jr(t){const e=new Ot(new Be([])),r=new Hn(e,t),i=new Hn(e,t+1);let a=ne();return this.$r.forEachInRange([r,i],s=>{a=a.add(s.key)}),a}containsKey(t){const e=new Hn(t,0),r=this.qr.firstAfterOrEqual(e);return r!==null&&t.isEqual(r.key)}}class Hn{constructor(t,e){this.key=t,this.Hr=e}static Qr(t,e){return Ot.comparator(t.key,e.key)||Yt(t.Hr,e.Hr)}static Ur(t,e){return Yt(t.Hr,e.Hr)||Ot.comparator(t.key,e.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f9{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.er=1,this.Yr=new Nn(Hn.Qr)}checkEmpty(t){return dt.resolve(this.mutationQueue.length===0)}addMutationBatch(t,e,r,i){const a=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new CP(a,e,r,i);this.mutationQueue.push(s);for(const l of i)this.Yr=this.Yr.add(new Hn(l.key,a)),this.indexManager.addToCollectionParentIndex(t,l.key.path.popLast());return dt.resolve(s)}lookupMutationBatch(t,e){return dt.resolve(this.Zr(e))}getNextMutationBatchAfterBatchId(t,e){const r=e+1,i=this.Xr(r),a=i<0?0:i;return dt.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return dt.resolve(this.mutationQueue.length===0?Mx:this.er-1)}getAllMutationBatches(t){return dt.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const r=new Hn(e,0),i=new Hn(e,Number.POSITIVE_INFINITY),a=[];return this.Yr.forEachInRange([r,i],s=>{const l=this.Zr(s.Hr);a.push(l)}),dt.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(t,e){let r=new Nn(Yt);return e.forEach(i=>{const a=new Hn(i,0),s=new Hn(i,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([a,s],l=>{r=r.add(l.Hr)})}),dt.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(t,e){const r=e.path,i=r.length+1;let a=r;Ot.isDocumentKey(a)||(a=a.child(""));const s=new Hn(new Ot(a),0);let l=new Nn(Yt);return this.Yr.forEachWhile(c=>{const f=c.key.path;return!!r.isPrefixOf(f)&&(f.length===i&&(l=l.add(c.Hr)),!0)},s),dt.resolve(this.ei(l))}ei(t){const e=[];return t.forEach(r=>{const i=this.Zr(r);i!==null&&e.push(i)}),e}removeMutationBatch(t,e){be(this.ti(e.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return dt.forEach(e.mutations,i=>{const a=new Hn(i.key,e.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(t,i.key)}).next(()=>{this.Yr=r})}rr(t){}containsKey(t,e){const r=new Hn(e,0),i=this.Yr.firstAfterOrEqual(r);return dt.resolve(e.isEqual(i&&i.key))}performConsistencyCheck(t){return this.mutationQueue.length,dt.resolve()}ti(t,e){return this.Xr(t)}Xr(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Zr(t){const e=this.Xr(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h9{constructor(t){this.ni=t,this.docs=function(){return new Je(Ot.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){const r=e.key,i=this.docs.get(r),a=i?i.size:0,s=this.ni(e);return this.docs=this.docs.insert(r,{document:e.mutableCopy(),size:s}),this.size+=s-a,this.indexManager.addToCollectionParentIndex(t,r.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const r=this.docs.get(e);return dt.resolve(r?r.document.mutableCopy():dr.newInvalidDocument(e))}getEntries(t,e){let r=as();return e.forEach(i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():dr.newInvalidDocument(i))}),dt.resolve(r)}getDocumentsMatchingQuery(t,e,r,i){let a=as();const s=e.path,l=new Ot(s.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:f,value:{document:d}}=c.getNext();if(!s.isPrefixOf(f.path))break;f.path.length>s.length+1||U5(j5(d),r)<=0||(i.has(d.key)||Rg(e,d))&&(a=a.insert(d.key,d.mutableCopy()))}return dt.resolve(a)}getAllFromCollectionGroup(t,e,r,i){Ft(9500)}ri(t,e){return dt.forEach(this.docs,r=>e(r))}newChangeBuffer(t){return new d9(this)}getSize(t){return dt.resolve(this.size)}}class d9 extends a9{constructor(t){super(),this.Or=t}applyChanges(t){const e=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?e.push(this.Or.addEntry(t,i)):this.Or.removeEntry(r)}),dt.waitFor(e)}getFromCache(t,e){return this.Or.getEntry(t,e)}getAllFromCache(t,e){return this.Or.getEntries(t,e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g9{constructor(t){this.persistence=t,this.ii=new Ll(e=>kx(e),Lx),this.lastRemoteSnapshotVersion=Ht.min(),this.highestTargetId=0,this.si=0,this.oi=new zx,this.targetCount=0,this._i=gc.ar()}forEachTarget(t,e){return this.ii.forEach((r,i)=>e(i)),dt.resolve()}getLastRemoteSnapshotVersion(t){return dt.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return dt.resolve(this.si)}allocateTargetId(t){return this.highestTargetId=this._i.next(),dt.resolve(this.highestTargetId)}setTargetsMetadata(t,e,r){return r&&(this.lastRemoteSnapshotVersion=r),e>this.si&&(this.si=e),dt.resolve()}hr(t){this.ii.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this._i=new gc(e),this.highestTargetId=e),t.sequenceNumber>this.si&&(this.si=t.sequenceNumber)}addTargetData(t,e){return this.hr(e),this.targetCount+=1,dt.resolve()}updateTargetData(t,e){return this.hr(e),dt.resolve()}removeTargetData(t,e){return this.ii.delete(e.target),this.oi.zr(e.targetId),this.targetCount-=1,dt.resolve()}removeTargets(t,e,r){let i=0;const a=[];return this.ii.forEach((s,l)=>{l.sequenceNumber<=e&&r.get(l.targetId)===null&&(this.ii.delete(s),a.push(this.removeMatchingKeysForTargetId(t,l.targetId)),i++)}),dt.waitFor(a).next(()=>i)}getTargetCount(t){return dt.resolve(this.targetCount)}getTargetData(t,e){const r=this.ii.get(e)||null;return dt.resolve(r)}addMatchingKeys(t,e,r){return this.oi.Kr(e,r),dt.resolve()}removeMatchingKeys(t,e,r){this.oi.Gr(e,r);const i=this.persistence.referenceDelegate,a=[];return i&&e.forEach(s=>{a.push(i.markPotentiallyOrphaned(t,s))}),dt.waitFor(a)}removeMatchingKeysForTargetId(t,e){return this.oi.zr(e),dt.resolve()}getMatchingKeysForTargetId(t,e){const r=this.oi.Jr(e);return dt.resolve(r)}containsKey(t,e){return dt.resolve(this.oi.containsKey(e))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d3{constructor(t,e){this.ai={},this.overlays={},this.ui=new Sg(0),this.ci=!1,this.ci=!0,this.li=new c9,this.referenceDelegate=t(this),this.hi=new g9(this),this.indexManager=new QP,this.remoteDocumentCache=function(i){return new h9(i)}(r=>this.referenceDelegate.Pi(r)),this.serializer=new KP(e),this.Ti=new l9(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new u9,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let r=this.ai[t.toKey()];return r||(r=new f9(e,this.referenceDelegate),this.ai[t.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(t,e,r){bt("MemoryPersistence","Starting transaction:",t);const i=new p9(this.ui.next());return this.referenceDelegate.Ii(),r(i).next(a=>this.referenceDelegate.di(i).next(()=>a)).toPromise().then(a=>(i.raiseOnCommittedEvent(),a))}Ei(t,e){return dt.or(Object.values(this.ai).map(r=>()=>r.containsKey(t,e)))}}class p9 extends H5{constructor(t){super(),this.currentSequenceNumber=t}}class Hx{constructor(t){this.persistence=t,this.Ai=new zx,this.Ri=null}static Vi(t){return new Hx(t)}get mi(){if(this.Ri)return this.Ri;throw Ft(60996)}addReference(t,e,r){return this.Ai.addReference(r,e),this.mi.delete(r.toString()),dt.resolve()}removeReference(t,e,r){return this.Ai.removeReference(r,e),this.mi.add(r.toString()),dt.resolve()}markPotentiallyOrphaned(t,e){return this.mi.add(e.toString()),dt.resolve()}removeTarget(t,e){this.Ai.zr(e.targetId).forEach(i=>this.mi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,e.targetId).next(i=>{i.forEach(a=>this.mi.add(a.toString()))}).next(()=>r.removeTargetData(t,e))}Ii(){this.Ri=new Set}di(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return dt.forEach(this.mi,r=>{const i=Ot.fromPath(r);return this.fi(t,i).next(a=>{a||e.removeEntry(i,Ht.min())})}).next(()=>(this.Ri=null,e.apply(t)))}updateLimboDocument(t,e){return this.fi(t,e).next(r=>{r?this.mi.delete(e.toString()):this.mi.add(e.toString())})}Pi(t){return 0}fi(t,e){return dt.or([()=>dt.resolve(this.Ai.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.Ei(t,e)])}}class $1{constructor(t,e){this.persistence=t,this.gi=new Ll(r=>q5(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=i9(this,e)}static Vi(t,e){return new $1(t,e)}Ii(){}di(t){return dt.resolve()}forEachTarget(t,e){return this.persistence.getTargetCache().forEachTarget(t,e)}mr(t){const e=this.yr(t);return this.persistence.getTargetCache().getTargetCount(t).next(r=>e.next(i=>r+i))}yr(t){let e=0;return this.gr(t,r=>{e++}).next(()=>e)}gr(t,e){return dt.forEach(this.gi,(r,i)=>this.Sr(t,r,i).next(a=>a?dt.resolve():e(i)))}removeTargets(t,e,r){return this.persistence.getTargetCache().removeTargets(t,e,r)}removeOrphanedDocuments(t,e){let r=0;const i=this.persistence.getRemoteDocumentCache(),a=i.newChangeBuffer();return i.ri(t,s=>this.Sr(t,s,e).next(l=>{l||(r++,a.removeEntry(s,Ht.min()))})).next(()=>a.apply(t)).next(()=>r)}markPotentiallyOrphaned(t,e){return this.gi.set(e,t.currentSequenceNumber),dt.resolve()}removeTarget(t,e){const r=e.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,r)}addReference(t,e,r){return this.gi.set(r,t.currentSequenceNumber),dt.resolve()}removeReference(t,e,r){return this.gi.set(r,t.currentSequenceNumber),dt.resolve()}updateLimboDocument(t,e){return this.gi.set(e,t.currentSequenceNumber),dt.resolve()}Pi(t){let e=t.key.toString().length;return t.isFoundDocument()&&(e+=x1(t.data.value)),e}Sr(t,e,r){return dt.or([()=>this.persistence.Ei(t,e),()=>this.persistence.getTargetCache().containsKey(t,e),()=>{const i=this.gi.get(e);return dt.resolve(i!==void 0&&i>r)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gx{constructor(t,e,r,i){this.targetId=t,this.fromCache=e,this.Is=r,this.ds=i}static Es(t,e){let r=ne(),i=ne();for(const a of e.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new Gx(t,e.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m9{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v9{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=function(){return WD()?8:G5(gr())>0?6:4}()}initialize(t,e){this.gs=t,this.indexManager=e,this.As=!0}getDocumentsMatchingQuery(t,e,r,i){const a={result:null};return this.ps(t,e).next(s=>{a.result=s}).next(()=>{if(!a.result)return this.ys(t,e,i,r).next(s=>{a.result=s})}).next(()=>{if(a.result)return;const s=new m9;return this.ws(t,e,s).next(l=>{if(a.result=l,this.Rs)return this.Ss(t,e,s,l.size)})}).next(()=>a.result)}Ss(t,e,r,i){return r.documentReadCount<this.Vs?(zu()<=ee.DEBUG&&bt("QueryEngine","SDK will not create cache indexes for query:",Hu(e),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),dt.resolve()):(zu()<=ee.DEBUG&&bt("QueryEngine","Query:",Hu(e),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.fs*i?(zu()<=ee.DEBUG&&bt("QueryEngine","The SDK decides to create cache indexes for query:",Hu(e),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,oa(e))):dt.resolve())}ps(t,e){if(Tb(e))return dt.resolve(null);let r=oa(e);return this.indexManager.getIndexType(t,r).next(i=>i===0?null:(e.limit!==null&&i===1&&(e=z1(e,null,"F"),r=oa(e)),this.indexManager.getDocumentsMatchingTarget(t,r).next(a=>{const s=ne(...a);return this.gs.getDocuments(t,s).next(l=>this.indexManager.getMinOffset(t,r).next(c=>{const f=this.bs(e,l);return this.Ds(e,f,s,c.readTime)?this.ps(t,z1(e,null,"F")):this.vs(t,f,e,c)}))})))}ys(t,e,r,i){return Tb(e)||i.isEqual(Ht.min())?dt.resolve(null):this.gs.getDocuments(t,r).next(a=>{const s=this.bs(e,a);return this.Ds(e,s,r,i)?dt.resolve(null):(zu()<=ee.DEBUG&&bt("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Hu(e)),this.vs(t,s,e,F5(i,Ih)).next(l=>l))})}bs(t,e){let r=new Nn($I(t));return e.forEach((i,a)=>{Rg(t,a)&&(r=r.add(a))}),r}Ds(t,e,r,i){if(t.limit===null)return!1;if(r.size!==e.size)return!0;const a=t.limitType==="F"?e.last():e.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}ws(t,e,r){return zu()<=ee.DEBUG&&bt("QueryEngine","Using full collection scan to execute query:",Hu(e)),this.gs.getDocumentsMatchingQuery(t,e,yo.min(),r)}vs(t,e,r,i){return this.gs.getDocumentsMatchingQuery(t,r,i).next(a=>(e.forEach(s=>{a=a.insert(s.key,s)}),a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $x="LocalStore",y9=3e8;class x9{constructor(t,e,r,i){this.persistence=t,this.Cs=e,this.serializer=i,this.Fs=new Je(Yt),this.Ms=new Ll(a=>kx(a),Lx),this.xs=new Map,this.Os=t.getRemoteDocumentCache(),this.hi=t.getTargetCache(),this.Ti=t.getBundleCache(),this.Ns(r)}Ns(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new o9(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",e=>t.collect(e,this.Fs))}}function _9(n,t,e,r){return new x9(n,t,e,r)}async function g3(n,t){const e=Gt(n);return await e.persistence.runTransaction("Handle user change","readonly",r=>{let i;return e.mutationQueue.getAllMutationBatches(r).next(a=>(i=a,e.Ns(t),e.mutationQueue.getAllMutationBatches(r))).next(a=>{const s=[],l=[];let c=ne();for(const f of i){s.push(f.batchId);for(const d of f.mutations)c=c.add(d.key)}for(const f of a){l.push(f.batchId);for(const d of f.mutations)c=c.add(d.key)}return e.localDocuments.getDocuments(r,c).next(f=>({Bs:f,removedBatchIds:s,addedBatchIds:l}))})})}function A9(n,t){const e=Gt(n);return e.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=t.batch.keys(),a=e.Os.newChangeBuffer({trackRemovals:!0});return function(l,c,f,d){const g=f.batch,m=g.keys();let v=dt.resolve();return m.forEach(_=>{v=v.next(()=>d.getEntry(c,_)).next(w=>{const b=f.docVersions.get(_);be(b!==null,48541),w.version.compareTo(b)<0&&(g.applyToRemoteDocument(w,f),w.isValidDocument()&&(w.setReadTime(f.commitVersion),d.addEntry(w)))})}),v.next(()=>l.mutationQueue.removeMutationBatch(c,g))}(e,r,t,a).next(()=>a.apply(r)).next(()=>e.mutationQueue.performConsistencyCheck(r)).next(()=>e.documentOverlayCache.removeOverlaysForBatchId(r,i,t.batch.batchId)).next(()=>e.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let c=ne();for(let f=0;f<l.mutationResults.length;++f)l.mutationResults[f].transformResults.length>0&&(c=c.add(l.batch.mutations[f].key));return c}(t))).next(()=>e.localDocuments.getDocuments(r,i))})}function p3(n){const t=Gt(n);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.hi.getLastRemoteSnapshotVersion(e))}function E9(n,t){const e=Gt(n),r=t.snapshotVersion;let i=e.Fs;return e.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const s=e.Os.newChangeBuffer({trackRemovals:!0});i=e.Fs;const l=[];t.targetChanges.forEach((d,g)=>{const m=i.get(g);if(!m)return;l.push(e.hi.removeMatchingKeys(a,d.removedDocuments,g).next(()=>e.hi.addMatchingKeys(a,d.addedDocuments,g)));let v=m.withSequenceNumber(a.currentSequenceNumber);t.targetMismatches.get(g)!==null?v=v.withResumeToken(ir.EMPTY_BYTE_STRING,Ht.min()).withLastLimboFreeSnapshotVersion(Ht.min()):d.resumeToken.approximateByteSize()>0&&(v=v.withResumeToken(d.resumeToken,r)),i=i.insert(g,v),function(w,b,C){return w.resumeToken.approximateByteSize()===0||b.snapshotVersion.toMicroseconds()-w.snapshotVersion.toMicroseconds()>=y9?!0:C.addedDocuments.size+C.modifiedDocuments.size+C.removedDocuments.size>0}(m,v,d)&&l.push(e.hi.updateTargetData(a,v))});let c=as(),f=ne();if(t.documentUpdates.forEach(d=>{t.resolvedLimboDocuments.has(d)&&l.push(e.persistence.referenceDelegate.updateLimboDocument(a,d))}),l.push(w9(a,s,t.documentUpdates).next(d=>{c=d.Ls,f=d.ks})),!r.isEqual(Ht.min())){const d=e.hi.getLastRemoteSnapshotVersion(a).next(g=>e.hi.setTargetsMetadata(a,a.currentSequenceNumber,r));l.push(d)}return dt.waitFor(l).next(()=>s.apply(a)).next(()=>e.localDocuments.getLocalViewOfDocuments(a,c,f)).next(()=>c)}).then(a=>(e.Fs=i,a))}function w9(n,t,e){let r=ne(),i=ne();return e.forEach(a=>r=r.add(a)),t.getEntries(n,r).next(a=>{let s=as();return e.forEach((l,c)=>{const f=a.get(l);c.isFoundDocument()!==f.isFoundDocument()&&(i=i.add(l)),c.isNoDocument()&&c.version.isEqual(Ht.min())?(t.removeEntry(l,c.readTime),s=s.insert(l,c)):!f.isValidDocument()||c.version.compareTo(f.version)>0||c.version.compareTo(f.version)===0&&f.hasPendingWrites?(t.addEntry(c),s=s.insert(l,c)):bt($x,"Ignoring outdated watch update for ",l,". Current version:",f.version," Watch version:",c.version)}),{Ls:s,ks:i}})}function b9(n,t){const e=Gt(n);return e.persistence.runTransaction("Get next mutation batch","readonly",r=>(t===void 0&&(t=Mx),e.mutationQueue.getNextMutationBatchAfterBatchId(r,t)))}function S9(n,t){const e=Gt(n);return e.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return e.hi.getTargetData(r,t).next(a=>a?(i=a,dt.resolve(i)):e.hi.allocateTargetId(r).next(s=>(i=new ao(t,s,"TargetPurposeListen",r.currentSequenceNumber),e.hi.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=e.Fs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(e.Fs=e.Fs.insert(r.targetId,r),e.Ms.set(t,r.targetId)),r})}async function Dy(n,t,e){const r=Gt(n),i=r.Fs.get(t),a=e?"readwrite":"readwrite-primary";try{e||await r.persistence.runTransaction("Release target",a,s=>r.persistence.referenceDelegate.removeTarget(s,i))}catch(s){if(!Oc(s))throw s;bt($x,`Failed to update sequence numbers for target ${t}: ${s}`)}r.Fs=r.Fs.remove(t),r.Ms.delete(i.target)}function Fb(n,t,e){const r=Gt(n);let i=Ht.min(),a=ne();return r.persistence.runTransaction("Execute query","readwrite",s=>function(c,f,d){const g=Gt(c),m=g.Ms.get(d);return m!==void 0?dt.resolve(g.Fs.get(m)):g.hi.getTargetData(f,d)}(r,s,oa(t)).next(l=>{if(l)return i=l.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(s,l.targetId).next(c=>{a=c})}).next(()=>r.Cs.getDocumentsMatchingQuery(s,t,e?i:Ht.min(),e?a:ne())).next(l=>(T9(r,fP(t),l),{documents:l,qs:a})))}function T9(n,t,e){let r=n.xs.get(t)||Ht.min();e.forEach((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),n.xs.set(t,r)}class jb{constructor(){this.activeTargetIds=vP()}Gs(t){this.activeTargetIds=this.activeTargetIds.add(t)}zs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Ws(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class C9{constructor(){this.Fo=new jb,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,r){}addLocalQueryTarget(t,e=!0){return e&&this.Fo.Gs(t),this.Mo[t]||"not-current"}updateQueryState(t,e,r){this.Mo[t]=e}removeLocalQueryTarget(t){this.Fo.zs(t)}isLocalQueryTarget(t){return this.Fo.activeTargetIds.has(t)}clearQueryState(t){delete this.Mo[t]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(t){return this.Fo.activeTargetIds.has(t)}start(){return this.Fo=new jb,Promise.resolve()}handleUserChange(t,e,r){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I9{xo(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ub="ConnectivityMonitor";class zb{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(t){this.ko.push(t)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){bt(Ub,"Network connectivity changed: AVAILABLE");for(const t of this.ko)t(0)}Lo(){bt(Ub,"Network connectivity changed: UNAVAILABLE");for(const t of this.ko)t(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let W0=null;function Oy(){return W0===null?W0=function(){return 268435456+Math.round(2147483648*Math.random())}():W0++,"0x"+W0.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ev="RestConnection",R9={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class D9{get Qo(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const e=t.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.$o=e+"://"+t.host,this.Uo=`projects/${r}/databases/${i}`,this.Ko=this.databaseId.database===F1?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(t,e,r,i,a){const s=Oy(),l=this.Go(t,e.toUriEncodedString());bt(Ev,`Sending RPC '${t}' ${s}:`,l,r);const c={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(c,i,a);const{host:f}=new URL(l),d=Tc(f);return this.jo(t,l,c,r,d).then(g=>(bt(Ev,`Received RPC '${t}' ${s}: `,g),g),g=>{throw vo(Ev,`RPC '${t}' ${s} failed with error: `,g,"url: ",l,"request:",r),g})}Jo(t,e,r,i,a,s){return this.Wo(t,e,r,i,a)}zo(t,e,r){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Rc}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e&&e.headers.forEach((i,a)=>t[a]=i),r&&r.headers.forEach((i,a)=>t[a]=i)}Go(t,e){const r=R9[t];return`${this.$o}/v1/${e}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O9{constructor(t){this.Ho=t.Ho,this.Yo=t.Yo}Zo(t){this.Xo=t}e_(t){this.t_=t}n_(t){this.r_=t}onMessage(t){this.i_=t}close(){this.Yo()}send(t){this.Ho(t)}s_(){this.Xo()}o_(){this.t_()}__(t){this.r_(t)}a_(t){this.i_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const or="WebChannelConnection";class M9 extends D9{constructor(t){super(t),this.u_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}jo(t,e,r,i,a){const s=Oy();return new Promise((l,c)=>{const f=new yI;f.setWithCredentials(!0),f.listenOnce(xI.COMPLETE,()=>{try{switch(f.getLastErrorCode()){case y1.NO_ERROR:const g=f.getResponseJson();bt(or,`XHR for RPC '${t}' ${s} received:`,JSON.stringify(g)),l(g);break;case y1.TIMEOUT:bt(or,`RPC '${t}' ${s} timed out`),c(new At(ut.DEADLINE_EXCEEDED,"Request time out"));break;case y1.HTTP_ERROR:const m=f.getStatus();if(bt(or,`RPC '${t}' ${s} failed with status:`,m,"response text:",f.getResponseText()),m>0){let v=f.getResponseJson();Array.isArray(v)&&(v=v[0]);const _=v==null?void 0:v.error;if(_&&_.status&&_.message){const w=function(C){const I=C.toLowerCase().replace(/_/g,"-");return Object.values(ut).indexOf(I)>=0?I:ut.UNKNOWN}(_.status);c(new At(w,_.message))}else c(new At(ut.UNKNOWN,"Server responded with status "+f.getStatus()))}else c(new At(ut.UNAVAILABLE,"Connection failed."));break;default:Ft(9055,{c_:t,streamId:s,l_:f.getLastErrorCode(),h_:f.getLastError()})}}finally{bt(or,`RPC '${t}' ${s} completed.`)}});const d=JSON.stringify(i);bt(or,`RPC '${t}' ${s} sending request:`,i),f.send(e,"POST",d,r,15)})}P_(t,e,r){const i=Oy(),a=[this.$o,"/","google.firestore.v1.Firestore","/",t,"/channel"],s=EI(),l=AI(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(c.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(c.useFetchStreams=!0),this.zo(c.initMessageHeaders,e,r),c.encodeInitMessageHeaders=!0;const d=a.join("");bt(or,`Creating RPC '${t}' stream ${i}: ${d}`,c);const g=s.createWebChannel(d,c);this.T_(g);let m=!1,v=!1;const _=new O9({Ho:b=>{v?bt(or,`Not sending because RPC '${t}' stream ${i} is closed:`,b):(m||(bt(or,`Opening RPC '${t}' stream ${i} transport.`),g.open(),m=!0),bt(or,`RPC '${t}' stream ${i} sending:`,b),g.send(b))},Yo:()=>g.close()}),w=(b,C,I)=>{b.listen(C,R=>{try{I(R)}catch(M){setTimeout(()=>{throw M},0)}})};return w(g,oh.EventType.OPEN,()=>{v||(bt(or,`RPC '${t}' stream ${i} transport opened.`),_.s_())}),w(g,oh.EventType.CLOSE,()=>{v||(v=!0,bt(or,`RPC '${t}' stream ${i} transport closed`),_.__(),this.I_(g))}),w(g,oh.EventType.ERROR,b=>{v||(v=!0,vo(or,`RPC '${t}' stream ${i} transport errored. Name:`,b.name,"Message:",b.message),_.__(new At(ut.UNAVAILABLE,"The operation could not be completed")))}),w(g,oh.EventType.MESSAGE,b=>{var C;if(!v){const I=b.data[0];be(!!I,16349);const R=I,M=(R==null?void 0:R.error)||((C=R[0])===null||C===void 0?void 0:C.error);if(M){bt(or,`RPC '${t}' stream ${i} received error:`,M);const N=M.status;let k=function(D){const V=gn[D];if(V!==void 0)return n3(V)}(N),O=M.message;k===void 0&&(k=ut.INTERNAL,O="Unknown error status: "+N+" with message "+M.message),v=!0,_.__(new At(k,O)),g.close()}else bt(or,`RPC '${t}' stream ${i} received:`,I),_.a_(I)}}),w(l,_I.STAT_EVENT,b=>{b.stat===xy.PROXY?bt(or,`RPC '${t}' stream ${i} detected buffering proxy`):b.stat===xy.NOPROXY&&bt(or,`RPC '${t}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{_.o_()},0),_}terminate(){this.u_.forEach(t=>t.close()),this.u_=[]}T_(t){this.u_.push(t)}I_(t){this.u_=this.u_.filter(e=>e===t)}}function wv(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pg(n){return new LP(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m3{constructor(t,e,r=1e3,i=1.5,a=6e4){this.Fi=t,this.timerId=e,this.d_=r,this.E_=i,this.A_=a,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(t){this.cancel();const e=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),i=Math.max(0,e-r);i>0&&bt("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.R_} ms, delay with jitter: ${e} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,i,()=>(this.m_=Date.now(),t())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hb="PersistentStream";class v3{constructor(t,e,r,i,a,s,l,c){this.Fi=t,this.w_=r,this.S_=i,this.connection=a,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new m3(t,e)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(t){this.q_(),this.stream.send(t)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,e){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,t!==4?this.F_.reset():e&&e.code===ut.RESOURCE_EXHAUSTED?(is(e.toString()),is("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):e&&e.code===ut.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.n_(e)}U_(){}auth(){this.state=1;const t=this.K_(this.b_),e=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.b_===e&&this.W_(r,i)},r=>{t(()=>{const i=new At(ut.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(i)})})}W_(t,e){const r=this.K_(this.b_);this.stream=this.z_(t,e),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(i=>{r(()=>this.G_(i))}),this.stream.onMessage(i=>{r(()=>++this.C_==1?this.j_(i):this.onNext(i))})}O_(){this.state=5,this.F_.g_(async()=>{this.state=0,this.start()})}G_(t){return bt(Hb,`close with error: ${t}`),this.stream=null,this.close(4,t)}K_(t){return e=>{this.Fi.enqueueAndForget(()=>this.b_===t?e():(bt(Hb,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class N9 extends v3{constructor(t,e,r,i,a,s){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,r,i,s),this.serializer=a}z_(t,e){return this.connection.P_("Listen",t,e)}j_(t){return this.onNext(t)}onNext(t){this.F_.reset();const e=FP(this.serializer,t),r=function(a){if(!("targetChange"in a))return Ht.min();const s=a.targetChange;return s.targetIds&&s.targetIds.length?Ht.min():s.readTime?la(s.readTime):Ht.min()}(t);return this.listener.J_(e,r)}H_(t){const e={};e.database=Ry(this.serializer),e.addTarget=function(a,s){let l;const c=s.target;if(l=by(c)?{documents:zP(a,c)}:{query:HP(a,c).Vt},l.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){l.resumeToken=a3(a,s.resumeToken);const f=Ty(a,s.expectedCount);f!==null&&(l.expectedCount=f)}else if(s.snapshotVersion.compareTo(Ht.min())>0){l.readTime=G1(a,s.snapshotVersion.toTimestamp());const f=Ty(a,s.expectedCount);f!==null&&(l.expectedCount=f)}return l}(this.serializer,t);const r=$P(this.serializer,t);r&&(e.labels=r),this.k_(e)}Y_(t){const e={};e.database=Ry(this.serializer),e.removeTarget=t,this.k_(e)}}class P9 extends v3{constructor(t,e,r,i,a,s){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,r,i,s),this.serializer=a}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(t,e){return this.connection.P_("Write",t,e)}j_(t){return be(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,be(!t.writeResults||t.writeResults.length===0,55816),this.listener.ea()}onNext(t){be(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.F_.reset();const e=UP(t.writeResults,t.commitTime),r=la(t.commitTime);return this.listener.ta(r,e)}na(){const t={};t.database=Ry(this.serializer),this.k_(t)}X_(t){const e={streamToken:this.lastStreamToken,writes:t.map(r=>jP(this.serializer,r))};this.k_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k9{}class L9 extends k9{constructor(t,e,r,i){super(),this.authCredentials=t,this.appCheckCredentials=e,this.connection=r,this.serializer=i,this.ra=!1}ia(){if(this.ra)throw new At(ut.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(t,e,r,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,s])=>this.connection.Wo(t,Cy(e,r),i,a,s)).catch(a=>{throw a.name==="FirebaseError"?(a.code===ut.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new At(ut.UNKNOWN,a.toString())})}Jo(t,e,r,i,a){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,l])=>this.connection.Jo(t,Cy(e,r),i,s,l,a)).catch(s=>{throw s.name==="FirebaseError"?(s.code===ut.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new At(ut.UNKNOWN,s.toString())})}terminate(){this.ra=!0,this.connection.terminate()}}class B9{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(t){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ua("Offline")))}set(t){this.ha(),this.sa=0,t==="Online"&&(this._a=!1),this.ua(t)}ua(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}ca(t){const e=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(is(e),this._a=!1):bt("OnlineStateTracker",e)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ml="RemoteStore";class V9{constructor(t,e,r,i,a){this.localStore=t,this.datastore=e,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=a,this.Ea.xo(s=>{r.enqueueAndForget(async()=>{Bl(this)&&(bt(Ml,"Restarting streams for network reachability change."),await async function(c){const f=Gt(c);f.Ia.add(4),await td(f),f.Aa.set("Unknown"),f.Ia.delete(4),await kg(f)}(this))})}),this.Aa=new B9(r,i)}}async function kg(n){if(Bl(n))for(const t of n.da)await t(!0)}async function td(n){for(const t of n.da)await t(!1)}function y3(n,t){const e=Gt(n);e.Ta.has(t.targetId)||(e.Ta.set(t.targetId,t),Yx(e)?Wx(e):Mc(e).x_()&&Xx(e,t))}function qx(n,t){const e=Gt(n),r=Mc(e);e.Ta.delete(t),r.x_()&&x3(e,t),e.Ta.size===0&&(r.x_()?r.B_():Bl(e)&&e.Aa.set("Unknown"))}function Xx(n,t){if(n.Ra.$e(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Ht.min())>0){const e=n.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(e)}Mc(n).H_(t)}function x3(n,t){n.Ra.$e(t),Mc(n).Y_(t)}function Wx(n){n.Ra=new MP({getRemoteKeysForTarget:t=>n.remoteSyncer.getRemoteKeysForTarget(t),Et:t=>n.Ta.get(t)||null,lt:()=>n.datastore.serializer.databaseId}),Mc(n).start(),n.Aa.aa()}function Yx(n){return Bl(n)&&!Mc(n).M_()&&n.Ta.size>0}function Bl(n){return Gt(n).Ia.size===0}function _3(n){n.Ra=void 0}async function F9(n){n.Aa.set("Online")}async function j9(n){n.Ta.forEach((t,e)=>{Xx(n,t)})}async function U9(n,t){_3(n),Yx(n)?(n.Aa.la(t),Wx(n)):n.Aa.set("Unknown")}async function z9(n,t,e){if(n.Aa.set("Online"),t instanceof i3&&t.state===2&&t.cause)try{await async function(i,a){const s=a.cause;for(const l of a.targetIds)i.Ta.has(l)&&(await i.remoteSyncer.rejectListen(l,s),i.Ta.delete(l),i.Ra.removeTarget(l))}(n,t)}catch(r){bt(Ml,"Failed to remove targets %s: %s ",t.targetIds.join(","),r),await q1(n,r)}else if(t instanceof E1?n.Ra.Ye(t):t instanceof r3?n.Ra.it(t):n.Ra.et(t),!e.isEqual(Ht.min()))try{const r=await p3(n.localStore);e.compareTo(r)>=0&&await function(a,s){const l=a.Ra.Pt(s);return l.targetChanges.forEach((c,f)=>{if(c.resumeToken.approximateByteSize()>0){const d=a.Ta.get(f);d&&a.Ta.set(f,d.withResumeToken(c.resumeToken,s))}}),l.targetMismatches.forEach((c,f)=>{const d=a.Ta.get(c);if(!d)return;a.Ta.set(c,d.withResumeToken(ir.EMPTY_BYTE_STRING,d.snapshotVersion)),x3(a,c);const g=new ao(d.target,c,f,d.sequenceNumber);Xx(a,g)}),a.remoteSyncer.applyRemoteEvent(l)}(n,e)}catch(r){bt(Ml,"Failed to raise snapshot:",r),await q1(n,r)}}async function q1(n,t,e){if(!Oc(t))throw t;n.Ia.add(1),await td(n),n.Aa.set("Offline"),e||(e=()=>p3(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{bt(Ml,"Retrying IndexedDB access"),await e(),n.Ia.delete(1),await kg(n)})}function A3(n,t){return t().catch(e=>q1(n,e,t))}async function Lg(n){const t=Gt(n),e=Eo(t);let r=t.Pa.length>0?t.Pa[t.Pa.length-1].batchId:Mx;for(;H9(t);)try{const i=await b9(t.localStore,r);if(i===null){t.Pa.length===0&&e.B_();break}r=i.batchId,G9(t,i)}catch(i){await q1(t,i)}E3(t)&&w3(t)}function H9(n){return Bl(n)&&n.Pa.length<10}function G9(n,t){n.Pa.push(t);const e=Eo(n);e.x_()&&e.Z_&&e.X_(t.mutations)}function E3(n){return Bl(n)&&!Eo(n).M_()&&n.Pa.length>0}function w3(n){Eo(n).start()}async function $9(n){Eo(n).na()}async function q9(n){const t=Eo(n);for(const e of n.Pa)t.X_(e.mutations)}async function X9(n,t,e){const r=n.Pa.shift(),i=Fx.from(r,t,e);await A3(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),await Lg(n)}async function W9(n,t){t&&Eo(n).Z_&&await async function(r,i){if(function(s){return DP(s)&&s!==ut.ABORTED}(i.code)){const a=r.Pa.shift();Eo(r).N_(),await A3(r,()=>r.remoteSyncer.rejectFailedWrite(a.batchId,i)),await Lg(r)}}(n,t),E3(n)&&w3(n)}async function Gb(n,t){const e=Gt(n);e.asyncQueue.verifyOperationInProgress(),bt(Ml,"RemoteStore received new credentials");const r=Bl(e);e.Ia.add(3),await td(e),r&&e.Aa.set("Unknown"),await e.remoteSyncer.handleCredentialChange(t),e.Ia.delete(3),await kg(e)}async function Y9(n,t){const e=Gt(n);t?(e.Ia.delete(2),await kg(e)):t||(e.Ia.add(2),await td(e),e.Aa.set("Unknown"))}function Mc(n){return n.Va||(n.Va=function(e,r,i){const a=Gt(e);return a.ia(),new N9(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)}(n.datastore,n.asyncQueue,{Zo:F9.bind(null,n),e_:j9.bind(null,n),n_:U9.bind(null,n),J_:z9.bind(null,n)}),n.da.push(async t=>{t?(n.Va.N_(),Yx(n)?Wx(n):n.Aa.set("Unknown")):(await n.Va.stop(),_3(n))})),n.Va}function Eo(n){return n.ma||(n.ma=function(e,r,i){const a=Gt(e);return a.ia(),new P9(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)}(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),e_:$9.bind(null,n),n_:W9.bind(null,n),ea:q9.bind(null,n),ta:X9.bind(null,n)}),n.da.push(async t=>{t?(n.ma.N_(),await Lg(n)):(await n.ma.stop(),n.Pa.length>0&&(bt(Ml,`Stopping write stream with ${n.Pa.length} pending writes`),n.Pa=[]))})),n.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kx{constructor(t,e,r,i,a){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new Ja,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,e,r,i,a){const s=Date.now()+r,l=new Kx(t,e,s,i,a);return l.start(r),l}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new At(ut.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Zx(n,t){if(is("AsyncQueue",`${t}: ${n}`),Oc(n))return new At(ut.UNAVAILABLE,`${t}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sc{static emptySet(t){return new sc(t.comparator)}constructor(t){this.comparator=t?(e,r)=>t(e,r)||Ot.comparator(e.key,r.key):(e,r)=>Ot.comparator(e.key,r.key),this.keyedMap=lh(),this.sortedSet=new Je(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((e,r)=>(t(e),!1))}add(t){const e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){const e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof sc)||this.size!==t.size)return!1;const e=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();for(;e.hasNext();){const i=e.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const t=[];return this.forEach(e=>{t.push(e.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,e){const r=new sc;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=e,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $b{constructor(){this.fa=new Je(Ot.comparator)}track(t){const e=t.doc.key,r=this.fa.get(e);r?t.type!==0&&r.type===3?this.fa=this.fa.insert(e,t):t.type===3&&r.type!==1?this.fa=this.fa.insert(e,{type:r.type,doc:t.doc}):t.type===2&&r.type===2?this.fa=this.fa.insert(e,{type:2,doc:t.doc}):t.type===2&&r.type===0?this.fa=this.fa.insert(e,{type:0,doc:t.doc}):t.type===1&&r.type===0?this.fa=this.fa.remove(e):t.type===1&&r.type===2?this.fa=this.fa.insert(e,{type:1,doc:r.doc}):t.type===0&&r.type===1?this.fa=this.fa.insert(e,{type:2,doc:t.doc}):Ft(63341,{At:t,ga:r}):this.fa=this.fa.insert(e,t)}pa(){const t=[];return this.fa.inorderTraversal((e,r)=>{t.push(r)}),t}}class pc{constructor(t,e,r,i,a,s,l,c,f){this.query=t,this.docs=e,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=s,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=f}static fromInitialDocuments(t,e,r,i,a){const s=[];return e.forEach(l=>{s.push({type:0,doc:l})}),new pc(t,e,sc.emptySet(e),s,r,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Ig(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const e=this.docChanges,r=t.docChanges;if(e.length!==r.length)return!1;for(let i=0;i<e.length;i++)if(e[i].type!==r[i].type||!e[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K9{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(t=>t.ba())}}class Z9{constructor(){this.queries=qb(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(e,r){const i=Gt(e),a=i.queries;i.queries=qb(),a.forEach((s,l)=>{for(const c of l.wa)c.onError(r)})})(this,new At(ut.ABORTED,"Firestore shutting down"))}}function qb(){return new Ll(n=>GI(n),Ig)}async function b3(n,t){const e=Gt(n);let r=3;const i=t.query;let a=e.queries.get(i);a?!a.Sa()&&t.ba()&&(r=2):(a=new K9,r=t.ba()?0:1);try{switch(r){case 0:a.ya=await e.onListen(i,!0);break;case 1:a.ya=await e.onListen(i,!1);break;case 2:await e.onFirstRemoteStoreListen(i)}}catch(s){const l=Zx(s,`Initialization of query '${Hu(t.query)}' failed`);return void t.onError(l)}e.queries.set(i,a),a.wa.push(t),t.va(e.onlineState),a.ya&&t.Ca(a.ya)&&Qx(e)}async function S3(n,t){const e=Gt(n),r=t.query;let i=3;const a=e.queries.get(r);if(a){const s=a.wa.indexOf(t);s>=0&&(a.wa.splice(s,1),a.wa.length===0?i=t.ba()?0:1:!a.Sa()&&t.ba()&&(i=2))}switch(i){case 0:return e.queries.delete(r),e.onUnlisten(r,!0);case 1:return e.queries.delete(r),e.onUnlisten(r,!1);case 2:return e.onLastRemoteStoreUnlisten(r);default:return}}function Q9(n,t){const e=Gt(n);let r=!1;for(const i of t){const a=i.query,s=e.queries.get(a);if(s){for(const l of s.wa)l.Ca(i)&&(r=!0);s.ya=i}}r&&Qx(e)}function J9(n,t,e){const r=Gt(n),i=r.queries.get(t);if(i)for(const a of i.wa)a.onError(e);r.queries.delete(t)}function Qx(n){n.Da.forEach(t=>{t.next()})}var My,Xb;(Xb=My||(My={})).Fa="default",Xb.Cache="cache";class T3{constructor(t,e,r){this.query=t,this.Ma=e,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(t){if(!this.options.includeMetadataChanges){const r=[];for(const i of t.docChanges)i.type!==3&&r.push(i);t=new pc(t.query,t.docs,t.oldDocs,r,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let e=!1;return this.xa?this.Na(t)&&(this.Ma.next(t),e=!0):this.Ba(t,this.onlineState)&&(this.La(t),e=!0),this.Oa=t,e}onError(t){this.Ma.error(t)}va(t){this.onlineState=t;let e=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,t)&&(this.La(this.Oa),e=!0),e}Ba(t,e){if(!t.fromCache||!this.ba())return!0;const r=e!=="Offline";return(!this.options.ka||!r)&&(!t.docs.isEmpty()||t.hasCachedResults||e==="Offline")}Na(t){if(t.docChanges.length>0)return!0;const e=this.Oa&&this.Oa.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&this.options.includeMetadataChanges===!0}La(t){t=pc.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.xa=!0,this.Ma.next(t)}ba(){return this.options.source!==My.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C3{constructor(t){this.key=t}}class I3{constructor(t){this.key=t}}class t7{constructor(t,e){this.query=t,this.Ha=e,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=ne(),this.mutatedKeys=ne(),this.Xa=$I(t),this.eu=new sc(this.Xa)}get tu(){return this.Ha}nu(t,e){const r=e?e.ru:new $b,i=e?e.eu:this.eu;let a=e?e.mutatedKeys:this.mutatedKeys,s=i,l=!1;const c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,f=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal((d,g)=>{const m=i.get(d),v=Rg(this.query,g)?g:null,_=!!m&&this.mutatedKeys.has(m.key),w=!!v&&(v.hasLocalMutations||this.mutatedKeys.has(v.key)&&v.hasCommittedMutations);let b=!1;m&&v?m.data.isEqual(v.data)?_!==w&&(r.track({type:3,doc:v}),b=!0):this.iu(m,v)||(r.track({type:2,doc:v}),b=!0,(c&&this.Xa(v,c)>0||f&&this.Xa(v,f)<0)&&(l=!0)):!m&&v?(r.track({type:0,doc:v}),b=!0):m&&!v&&(r.track({type:1,doc:m}),b=!0,(c||f)&&(l=!0)),b&&(v?(s=s.add(v),a=w?a.add(d):a.delete(d)):(s=s.delete(d),a=a.delete(d)))}),this.query.limit!==null)for(;s.size>this.query.limit;){const d=this.query.limitType==="F"?s.last():s.first();s=s.delete(d.key),a=a.delete(d.key),r.track({type:1,doc:d})}return{eu:s,ru:r,Ds:l,mutatedKeys:a}}iu(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,r,i){const a=this.eu;this.eu=t.eu,this.mutatedKeys=t.mutatedKeys;const s=t.ru.pa();s.sort((d,g)=>function(v,_){const w=b=>{switch(b){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ft(20277,{At:b})}};return w(v)-w(_)}(d.type,g.type)||this.Xa(d.doc,g.doc)),this.su(r),i=i!=null&&i;const l=e&&!i?this.ou():[],c=this.Za.size===0&&this.current&&!i?1:0,f=c!==this.Ya;return this.Ya=c,s.length!==0||f?{snapshot:new pc(this.query,t.eu,a,s,t.mutatedKeys,c===0,f,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:l}:{_u:l}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new $b,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(t){return!this.Ha.has(t)&&!!this.eu.has(t)&&!this.eu.get(t).hasLocalMutations}su(t){t&&(t.addedDocuments.forEach(e=>this.Ha=this.Ha.add(e)),t.modifiedDocuments.forEach(e=>{}),t.removedDocuments.forEach(e=>this.Ha=this.Ha.delete(e)),this.current=t.current)}ou(){if(!this.current)return[];const t=this.Za;this.Za=ne(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});const e=[];return t.forEach(r=>{this.Za.has(r)||e.push(new I3(r))}),this.Za.forEach(r=>{t.has(r)||e.push(new C3(r))}),e}uu(t){this.Ha=t.qs,this.Za=ne();const e=this.nu(t.documents);return this.applyChanges(e,!0)}cu(){return pc.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const Jx="SyncEngine";class e7{constructor(t,e,r){this.query=t,this.targetId=e,this.view=r}}class n7{constructor(t){this.key=t,this.lu=!1}}class r7{constructor(t,e,r,i,a,s){this.localStore=t,this.remoteStore=e,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=s,this.hu={},this.Pu=new Ll(l=>GI(l),Ig),this.Tu=new Map,this.Iu=new Set,this.du=new Je(Ot.comparator),this.Eu=new Map,this.Au=new zx,this.Ru={},this.Vu=new Map,this.mu=gc.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function i7(n,t,e=!0){const r=P3(n);let i;const a=r.Pu.get(t);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),i=a.view.cu()):i=await R3(r,t,e,!0),i}async function a7(n,t){const e=P3(n);await R3(e,t,!0,!1)}async function R3(n,t,e,r){const i=await S9(n.localStore,oa(t)),a=i.targetId,s=n.sharedClientState.addLocalQueryTarget(a,e);let l;return r&&(l=await s7(n,t,a,s==="current",i.resumeToken)),n.isPrimaryClient&&e&&y3(n.remoteStore,i),l}async function s7(n,t,e,r,i){n.gu=(g,m,v)=>async function(w,b,C,I){let R=b.view.nu(C);R.Ds&&(R=await Fb(w.localStore,b.query,!1).then(({documents:O})=>b.view.nu(O,R)));const M=I&&I.targetChanges.get(b.targetId),N=I&&I.targetMismatches.get(b.targetId)!=null,k=b.view.applyChanges(R,w.isPrimaryClient,M,N);return Yb(w,b.targetId,k._u),k.snapshot}(n,g,m,v);const a=await Fb(n.localStore,t,!0),s=new t7(t,a.qs),l=s.nu(a.documents),c=Jh.createSynthesizedTargetChangeForCurrentChange(e,r&&n.onlineState!=="Offline",i),f=s.applyChanges(l,n.isPrimaryClient,c);Yb(n,e,f._u);const d=new e7(t,e,s);return n.Pu.set(t,d),n.Tu.has(e)?n.Tu.get(e).push(t):n.Tu.set(e,[t]),f.snapshot}async function o7(n,t,e){const r=Gt(n),i=r.Pu.get(t),a=r.Tu.get(i.targetId);if(a.length>1)return r.Tu.set(i.targetId,a.filter(s=>!Ig(s,t))),void r.Pu.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Dy(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),e&&qx(r.remoteStore,i.targetId),Ny(r,i.targetId)}).catch(Dc)):(Ny(r,i.targetId),await Dy(r.localStore,i.targetId,!0))}async function l7(n,t){const e=Gt(n),r=e.Pu.get(t),i=e.Tu.get(r.targetId);e.isPrimaryClient&&i.length===1&&(e.sharedClientState.removeLocalQueryTarget(r.targetId),qx(e.remoteStore,r.targetId))}async function u7(n,t,e){const r=m7(n);try{const i=await function(s,l){const c=Gt(s),f=Ge.now(),d=l.reduce((v,_)=>v.add(_.key),ne());let g,m;return c.persistence.runTransaction("Locally write mutations","readwrite",v=>{let _=as(),w=ne();return c.Os.getEntries(v,d).next(b=>{_=b,_.forEach((C,I)=>{I.isValidDocument()||(w=w.add(C))})}).next(()=>c.localDocuments.getOverlayedDocuments(v,_)).next(b=>{g=b;const C=[];for(const I of l){const R=SP(I,g.get(I.key).overlayedDocument);R!=null&&C.push(new Co(I.key,R,LI(R.value.mapValue),Sr.exists(!0)))}return c.mutationQueue.addMutationBatch(v,f,C,l)}).next(b=>{m=b;const C=b.applyToLocalDocumentSet(g,w);return c.documentOverlayCache.saveOverlays(v,b.batchId,C)})}).then(()=>({batchId:m.batchId,changes:XI(g)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(i.batchId),function(s,l,c){let f=s.Ru[s.currentUser.toKey()];f||(f=new Je(Yt)),f=f.insert(l,c),s.Ru[s.currentUser.toKey()]=f}(r,i.batchId,e),await ed(r,i.changes),await Lg(r.remoteStore)}catch(i){const a=Zx(i,"Failed to persist write");e.reject(a)}}async function D3(n,t){const e=Gt(n);try{const r=await E9(e.localStore,t);t.targetChanges.forEach((i,a)=>{const s=e.Eu.get(a);s&&(be(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?s.lu=!0:i.modifiedDocuments.size>0?be(s.lu,14607):i.removedDocuments.size>0&&(be(s.lu,42227),s.lu=!1))}),await ed(e,r,t)}catch(r){await Dc(r)}}function Wb(n,t,e){const r=Gt(n);if(r.isPrimaryClient&&e===0||!r.isPrimaryClient&&e===1){const i=[];r.Pu.forEach((a,s)=>{const l=s.view.va(t);l.snapshot&&i.push(l.snapshot)}),function(s,l){const c=Gt(s);c.onlineState=l;let f=!1;c.queries.forEach((d,g)=>{for(const m of g.wa)m.va(l)&&(f=!0)}),f&&Qx(c)}(r.eventManager,t),i.length&&r.hu.J_(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function c7(n,t,e){const r=Gt(n);r.sharedClientState.updateQueryState(t,"rejected",e);const i=r.Eu.get(t),a=i&&i.key;if(a){let s=new Je(Ot.comparator);s=s.insert(a,dr.newNoDocument(a,Ht.min()));const l=ne().add(a),c=new Ng(Ht.min(),new Map,new Je(Yt),s,l);await D3(r,c),r.du=r.du.remove(a),r.Eu.delete(t),t2(r)}else await Dy(r.localStore,t,!1).then(()=>Ny(r,t,e)).catch(Dc)}async function f7(n,t){const e=Gt(n),r=t.batch.batchId;try{const i=await A9(e.localStore,t);M3(e,r,null),O3(e,r),e.sharedClientState.updateMutationState(r,"acknowledged"),await ed(e,i)}catch(i){await Dc(i)}}async function h7(n,t,e){const r=Gt(n);try{const i=await function(s,l){const c=Gt(s);return c.persistence.runTransaction("Reject batch","readwrite-primary",f=>{let d;return c.mutationQueue.lookupMutationBatch(f,l).next(g=>(be(g!==null,37113),d=g.keys(),c.mutationQueue.removeMutationBatch(f,g))).next(()=>c.mutationQueue.performConsistencyCheck(f)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(f,d,l)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,d)).next(()=>c.localDocuments.getDocuments(f,d))})}(r.localStore,t);M3(r,t,e),O3(r,t),r.sharedClientState.updateMutationState(t,"rejected",e),await ed(r,i)}catch(i){await Dc(i)}}function O3(n,t){(n.Vu.get(t)||[]).forEach(e=>{e.resolve()}),n.Vu.delete(t)}function M3(n,t,e){const r=Gt(n);let i=r.Ru[r.currentUser.toKey()];if(i){const a=i.get(t);a&&(e?a.reject(e):a.resolve(),i=i.remove(t)),r.Ru[r.currentUser.toKey()]=i}}function Ny(n,t,e=null){n.sharedClientState.removeLocalQueryTarget(t);for(const r of n.Tu.get(t))n.Pu.delete(r),e&&n.hu.pu(r,e);n.Tu.delete(t),n.isPrimaryClient&&n.Au.zr(t).forEach(r=>{n.Au.containsKey(r)||N3(n,r)})}function N3(n,t){n.Iu.delete(t.path.canonicalString());const e=n.du.get(t);e!==null&&(qx(n.remoteStore,e),n.du=n.du.remove(t),n.Eu.delete(e),t2(n))}function Yb(n,t,e){for(const r of e)r instanceof C3?(n.Au.addReference(r.key,t),d7(n,r)):r instanceof I3?(bt(Jx,"Document no longer in limbo: "+r.key),n.Au.removeReference(r.key,t),n.Au.containsKey(r.key)||N3(n,r.key)):Ft(19791,{yu:r})}function d7(n,t){const e=t.key,r=e.path.canonicalString();n.du.get(e)||n.Iu.has(r)||(bt(Jx,"New document in limbo: "+e),n.Iu.add(r),t2(n))}function t2(n){for(;n.Iu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const t=n.Iu.values().next().value;n.Iu.delete(t);const e=new Ot(Be.fromString(t)),r=n.mu.next();n.Eu.set(r,new n7(e)),n.du=n.du.insert(e,r),y3(n.remoteStore,new ao(oa(Bx(e.path)),r,"TargetPurposeLimboResolution",Sg.ue))}}async function ed(n,t,e){const r=Gt(n),i=[],a=[],s=[];r.Pu.isEmpty()||(r.Pu.forEach((l,c)=>{s.push(r.gu(c,t,e).then(f=>{var d;if((f||e)&&r.isPrimaryClient){const g=f?!f.fromCache:(d=e==null?void 0:e.targetChanges.get(c.targetId))===null||d===void 0?void 0:d.current;r.sharedClientState.updateQueryState(c.targetId,g?"current":"not-current")}if(f){i.push(f);const g=Gx.Es(c.targetId,f);a.push(g)}}))}),await Promise.all(s),r.hu.J_(i),await async function(c,f){const d=Gt(c);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",g=>dt.forEach(f,m=>dt.forEach(m.Is,v=>d.persistence.referenceDelegate.addReference(g,m.targetId,v)).next(()=>dt.forEach(m.ds,v=>d.persistence.referenceDelegate.removeReference(g,m.targetId,v)))))}catch(g){if(!Oc(g))throw g;bt($x,"Failed to update sequence numbers: "+g)}for(const g of f){const m=g.targetId;if(!g.fromCache){const v=d.Fs.get(m),_=v.snapshotVersion,w=v.withLastLimboFreeSnapshotVersion(_);d.Fs=d.Fs.insert(m,w)}}}(r.localStore,a))}async function g7(n,t){const e=Gt(n);if(!e.currentUser.isEqual(t)){bt(Jx,"User change. New user:",t.toKey());const r=await g3(e.localStore,t);e.currentUser=t,function(a,s){a.Vu.forEach(l=>{l.forEach(c=>{c.reject(new At(ut.CANCELLED,s))})}),a.Vu.clear()}(e,"'waitForPendingWrites' promise is rejected due to a user change."),e.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),await ed(e,r.Bs)}}function p7(n,t){const e=Gt(n),r=e.Eu.get(t);if(r&&r.lu)return ne().add(r.key);{let i=ne();const a=e.Tu.get(t);if(!a)return i;for(const s of a){const l=e.Pu.get(s);i=i.unionWith(l.view.tu)}return i}}function P3(n){const t=Gt(n);return t.remoteStore.remoteSyncer.applyRemoteEvent=D3.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=p7.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=c7.bind(null,t),t.hu.J_=Q9.bind(null,t.eventManager),t.hu.pu=J9.bind(null,t.eventManager),t}function m7(n){const t=Gt(n);return t.remoteStore.remoteSyncer.applySuccessfulWrite=f7.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=h7.bind(null,t),t}class X1{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=Pg(t.databaseInfo.databaseId),this.sharedClientState=this.bu(t),this.persistence=this.Du(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Cu(t,this.localStore),this.indexBackfillerScheduler=this.Fu(t,this.localStore)}Cu(t,e){return null}Fu(t,e){return null}vu(t){return _9(this.persistence,new v9,t.initialUser,this.serializer)}Du(t){return new d3(Hx.Vi,this.serializer)}bu(t){return new C9}async terminate(){var t,e;(t=this.gcScheduler)===null||t===void 0||t.stop(),(e=this.indexBackfillerScheduler)===null||e===void 0||e.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}X1.provider={build:()=>new X1};class v7 extends X1{constructor(t){super(),this.cacheSizeBytes=t}Cu(t,e){be(this.persistence.referenceDelegate instanceof $1,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new n9(r,t.asyncQueue,e)}Du(t){const e=this.cacheSizeBytes!==void 0?Or.withCacheSize(this.cacheSizeBytes):Or.DEFAULT;return new d3(r=>$1.Vi(r,e),this.serializer)}}class Py{async initialize(t,e){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Wb(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=g7.bind(null,this.syncEngine),await Y9(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new Z9}()}createDatastore(t){const e=Pg(t.databaseInfo.databaseId),r=function(a){return new M9(a)}(t.databaseInfo);return function(a,s,l,c){return new L9(a,s,l,c)}(t.authCredentials,t.appCheckCredentials,r,e)}createRemoteStore(t){return function(r,i,a,s,l){return new V9(r,i,a,s,l)}(this.localStore,this.datastore,t.asyncQueue,e=>Wb(this.syncEngine,e,0),function(){return zb.C()?new zb:new I9}())}createSyncEngine(t,e){return function(i,a,s,l,c,f,d){const g=new r7(i,a,s,l,c,f);return d&&(g.fu=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}async terminate(){var t,e;await async function(i){const a=Gt(i);bt(Ml,"RemoteStore shutting down."),a.Ia.add(5),await td(a),a.Ea.shutdown(),a.Aa.set("Unknown")}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(e=this.eventManager)===null||e===void 0||e.terminate()}}Py.provider={build:()=>new Py};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k3{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.xu(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.xu(this.observer.error,t):is("Uncaught Error in snapshot listener:",t.toString()))}Ou(){this.muted=!0}xu(t,e){setTimeout(()=>{this.muted||t(e)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wo="FirestoreClient";class y7{constructor(t,e,r,i,a){this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=r,this.databaseInfo=i,this.user=hr.UNAUTHENTICATED,this.clientId=Dx.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(r,async s=>{bt(wo,"Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(bt(wo,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Ja;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(e){const r=Zx(e,"Failed to shutdown persistence");t.reject(r)}}),t.promise}}async function bv(n,t){n.asyncQueue.verifyOperationInProgress(),bt(wo,"Initializing OfflineComponentProvider");const e=n.configuration;await t.initialize(e);let r=e.initialUser;n.setCredentialChangeListener(async i=>{r.isEqual(i)||(await g3(t.localStore,i),r=i)}),t.persistence.setDatabaseDeletedListener(()=>{vo("Terminating Firestore due to IndexedDb database deletion"),n.terminate().then(()=>{bt("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(i=>{vo("Terminating Firestore due to IndexedDb database deletion failed",i)})}),n._offlineComponents=t}async function Kb(n,t){n.asyncQueue.verifyOperationInProgress();const e=await x7(n);bt(wo,"Initializing OnlineComponentProvider"),await t.initialize(e,n.configuration),n.setCredentialChangeListener(r=>Gb(t.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>Gb(t.remoteStore,i)),n._onlineComponents=t}async function x7(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){bt(wo,"Using user provided OfflineComponentProvider");try{await bv(n,n._uninitializedComponentsProvider._offline)}catch(t){const e=t;if(!function(i){return i.name==="FirebaseError"?i.code===ut.FAILED_PRECONDITION||i.code===ut.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(e))throw e;vo("Error using user provided cache. Falling back to memory cache: "+e),await bv(n,new X1)}}else bt(wo,"Using default OfflineComponentProvider"),await bv(n,new v7(void 0));return n._offlineComponents}async function L3(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(bt(wo,"Using user provided OnlineComponentProvider"),await Kb(n,n._uninitializedComponentsProvider._online)):(bt(wo,"Using default OnlineComponentProvider"),await Kb(n,new Py))),n._onlineComponents}function _7(n){return L3(n).then(t=>t.syncEngine)}async function B3(n){const t=await L3(n),e=t.eventManager;return e.onListen=i7.bind(null,t.syncEngine),e.onUnlisten=o7.bind(null,t.syncEngine),e.onFirstRemoteStoreListen=a7.bind(null,t.syncEngine),e.onLastRemoteStoreUnlisten=l7.bind(null,t.syncEngine),e}function A7(n,t,e={}){const r=new Ja;return n.asyncQueue.enqueueAndForget(async()=>function(a,s,l,c,f){const d=new k3({next:m=>{d.Ou(),s.enqueueAndForget(()=>S3(a,g));const v=m.docs.has(l);!v&&m.fromCache?f.reject(new At(ut.UNAVAILABLE,"Failed to get document because the client is offline.")):v&&m.fromCache&&c&&c.source==="server"?f.reject(new At(ut.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):f.resolve(m)},error:m=>f.reject(m)}),g=new T3(Bx(l.path),d,{includeMetadataChanges:!0,ka:!0});return b3(a,g)}(await B3(n),n.asyncQueue,t,e,r)),r.promise}function E7(n,t,e={}){const r=new Ja;return n.asyncQueue.enqueueAndForget(async()=>function(a,s,l,c,f){const d=new k3({next:m=>{d.Ou(),s.enqueueAndForget(()=>S3(a,g)),m.fromCache&&c.source==="server"?f.reject(new At(ut.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(m)},error:m=>f.reject(m)}),g=new T3(l,d,{includeMetadataChanges:!0,ka:!0});return b3(a,g)}(await B3(n),n.asyncQueue,t,e,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V3(n){const t={};return n.timeoutSeconds!==void 0&&(t.timeoutSeconds=n.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zb=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F3="firestore.googleapis.com",Qb=!0;class Jb{constructor(t){var e,r;if(t.host===void 0){if(t.ssl!==void 0)throw new At(ut.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=F3,this.ssl=Qb}else this.host=t.host,this.ssl=(e=t.ssl)!==null&&e!==void 0?e:Qb;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=h3;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<t9)throw new At(ut.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}B5("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=V3((r=t.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new At(ut.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new At(ut.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new At(ut.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class nd{constructor(t,e,r,i){this._authCredentials=t,this._appCheckCredentials=e,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Jb({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new At(ut.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new At(ut.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Jb(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new I5;switch(r.type){case"firstParty":return new M5(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new At(ut.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const r=Zb.get(e);r&&(bt("ComponentProvider","Removing Datastore"),Zb.delete(e),r.terminate())}(this),Promise.resolve()}}function w7(n,t,e,r={}){var i;n=Yr(n,nd);const a=Tc(t),s=n._getSettings(),l=Object.assign(Object.assign({},s),{emulatorOptions:n._getEmulatorOptions()}),c=`${t}:${e}`;a&&(RC(`https://${c}`),DC("Firestore",!0)),s.host!==F3&&s.host!==c&&vo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const f=Object.assign(Object.assign({},s),{host:c,ssl:a,emulatorOptions:r});if(!Cl(f,l)&&(n._setSettings(f),r.mockUserToken)){let d,g;if(typeof r.mockUserToken=="string")d=r.mockUserToken,g=hr.MOCK_USER;else{d=FD(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);const m=r.mockUserToken.sub||r.mockUserToken.user_id;if(!m)throw new At(ut.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new hr(m)}n._authCredentials=new R5(new bI(d,g))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ds{constructor(t,e,r){this.converter=e,this._query=r,this.type="query",this.firestore=t}withConverter(t){return new ds(this.firestore,t,this._query)}}class ln{constructor(t,e,r){this.converter=e,this._key=r,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new go(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new ln(this.firestore,t,this._key)}toJSON(){return{type:ln._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,e,r){if(Zh(e,ln._jsonSchema))return new ln(t,r||null,new Ot(Be.fromString(e.referencePath)))}}ln._jsonSchemaVersion="firestore/documentReference/1.0",ln._jsonSchema={type:xn("string",ln._jsonSchemaVersion),referencePath:xn("string")};class go extends ds{constructor(t,e,r){super(t,e,Bx(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new ln(this.firestore,null,new Ot(t))}withConverter(t){return new go(this.firestore,t,this._path)}}function br(n,t,...e){if(n=Pn(n),Ox("collection","path",t),n instanceof nd){const r=Be.fromString(t,...e);return hb(r),new go(n,null,r)}{if(!(n instanceof ln||n instanceof go))throw new At(ut.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Be.fromString(t,...e));return hb(r),new go(n.firestore,null,r)}}function so(n,t){if(n=Yr(n,nd),Ox("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new At(ut.INVALID_ARGUMENT,`Invalid collection ID '${t}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new ds(n,null,function(r){return new kl(Be.emptyPath(),r)}(t))}function ss(n,t,...e){if(n=Pn(n),arguments.length===1&&(t=Dx.newId()),Ox("doc","path",t),n instanceof nd){const r=Be.fromString(t,...e);return fb(r),new ln(n,null,new Ot(r))}{if(!(n instanceof ln||n instanceof go))throw new At(ut.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Be.fromString(t,...e));return fb(r),new ln(n.firestore,n instanceof go?n.converter:null,new Ot(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tS="AsyncQueue";class eS{constructor(t=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new m3(this,"async_queue_retry"),this.oc=()=>{const r=wv();r&&bt(tS,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=t;const e=wv();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.ac(),this.uc(t)}enterRestrictedMode(t){if(!this.Xu){this.Xu=!0,this.rc=t||!1;const e=wv();e&&typeof e.removeEventListener=="function"&&e.removeEventListener("visibilitychange",this.oc)}}enqueue(t){if(this.ac(),this.Xu)return new Promise(()=>{});const e=new Ja;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(t().then(e.resolve,e.reject),e.promise)).then(()=>e.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Zu.push(t),this.cc()))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(t){if(!Oc(t))throw t;bt(tS,"Operation failed with retryable error: "+t)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(t){const e=this._c.then(()=>(this.nc=!0,t().catch(r=>{throw this.tc=r,this.nc=!1,is("INTERNAL UNHANDLED ERROR: ",nS(r)),r}).then(r=>(this.nc=!1,r))));return this._c=e,e}enqueueAfterDelay(t,e,r){this.ac(),this.sc.indexOf(t)>-1&&(e=0);const i=Kx.createAndSchedule(this,t,e,r,a=>this.lc(a));return this.ec.push(i),i}ac(){this.tc&&Ft(47125,{hc:nS(this.tc)})}verifyOperationInProgress(){}async Pc(){let t;do t=this._c,await t;while(t!==this._c)}Tc(t){for(const e of this.ec)if(e.timerId===t)return!0;return!1}Ic(t){return this.Pc().then(()=>{this.ec.sort((e,r)=>e.targetTimeMs-r.targetTimeMs);for(const e of this.ec)if(e.skipDelay(),t!=="all"&&e.timerId===t)break;return this.Pc()})}dc(t){this.sc.push(t)}lc(t){const e=this.ec.indexOf(t);this.ec.splice(e,1)}}function nS(n){let t=n.message||"";return n.stack&&(t=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),t}class Io extends nd{constructor(t,e,r,i){super(t,e,r,i),this.type="firestore",this._queue=new eS,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new eS(t),this._firestoreClient=void 0,await t}}}function b7(n,t){const e=typeof n=="object"?n:PC(),r=typeof n=="string"?n:F1,i=xx(e,"firestore").getImmediate({identifier:r});if(!i._initialized){const a=BD("firestore");a&&w7(i,...a)}return i}function Bg(n){if(n._terminated)throw new At(ut.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||S7(n),n._firestoreClient}function S7(n){var t,e,r;const i=n._freezeSettings(),a=function(l,c,f,d){return new Y5(l,c,f,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,V3(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)}(n._databaseId,((t=n._app)===null||t===void 0?void 0:t.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((e=i.localCache)===null||e===void 0)&&e._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new y7(n._authCredentials,n._appCheckCredentials,n._queue,a,n._componentsProvider&&function(l){const c=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(c),_online:c}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mi{constructor(t){this._byteString=t}static fromBase64String(t){try{return new mi(ir.fromBase64String(t))}catch(e){throw new At(ut.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(t){return new mi(ir.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:mi._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(Zh(t,mi._jsonSchema))return mi.fromBase64String(t.bytes)}}mi._jsonSchemaVersion="firestore/bytes/1.0",mi._jsonSchema={type:xn("string",mi._jsonSchemaVersion),bytes:xn("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rd{constructor(...t){for(let e=0;e<t.length;++e)if(t[e].length===0)throw new At(ut.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new nr(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vg{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ua{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new At(ut.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new At(ut.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return Yt(this._lat,t._lat)||Yt(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:ua._jsonSchemaVersion}}static fromJSON(t){if(Zh(t,ua._jsonSchema))return new ua(t.latitude,t.longitude)}}ua._jsonSchemaVersion="firestore/geoPoint/1.0",ua._jsonSchema={type:xn("string",ua._jsonSchemaVersion),latitude:xn("number"),longitude:xn("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ca{constructor(t){this._values=(t||[]).map(e=>e)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(r,i){if(r.length!==i.length)return!1;for(let a=0;a<r.length;++a)if(r[a]!==i[a])return!1;return!0}(this._values,t._values)}toJSON(){return{type:ca._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(Zh(t,ca._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every(e=>typeof e=="number"))return new ca(t.vectorValues);throw new At(ut.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}ca._jsonSchemaVersion="firestore/vectorValue/1.0",ca._jsonSchema={type:xn("string",ca._jsonSchemaVersion),vectorValues:xn("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T7=/^__.*__$/;class C7{constructor(t,e,r){this.data=t,this.fieldMask=e,this.fieldTransforms=r}toMutation(t,e){return this.fieldMask!==null?new Co(t,this.data,this.fieldMask,e,this.fieldTransforms):new Qh(t,this.data,e,this.fieldTransforms)}}class j3{constructor(t,e,r){this.data=t,this.fieldMask=e,this.fieldTransforms=r}toMutation(t,e){return new Co(t,this.data,this.fieldMask,e,this.fieldTransforms)}}function U3(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ft(40011,{Ec:n})}}class e2{constructor(t,e,r,i,a,s){this.settings=t,this.databaseId=e,this.serializer=r,this.ignoreUndefinedProperties=i,a===void 0&&this.Ac(),this.fieldTransforms=a||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(t){return new e2(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(t){var e;const r=(e=this.path)===null||e===void 0?void 0:e.child(t),i=this.Rc({path:r,mc:!1});return i.fc(t),i}gc(t){var e;const r=(e=this.path)===null||e===void 0?void 0:e.child(t),i=this.Rc({path:r,mc:!1});return i.Ac(),i}yc(t){return this.Rc({path:void 0,mc:!0})}wc(t){return W1(t,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(t){return this.fieldMask.find(e=>t.isPrefixOf(e))!==void 0||this.fieldTransforms.find(e=>t.isPrefixOf(e.field))!==void 0}Ac(){if(this.path)for(let t=0;t<this.path.length;t++)this.fc(this.path.get(t))}fc(t){if(t.length===0)throw this.wc("Document fields must not be empty");if(U3(this.Ec)&&T7.test(t))throw this.wc('Document fields cannot begin and end with "__"')}}class I7{constructor(t,e,r){this.databaseId=t,this.ignoreUndefinedProperties=e,this.serializer=r||Pg(t)}Dc(t,e,r,i=!1){return new e2({Ec:t,methodName:e,bc:r,path:nr.emptyPath(),mc:!1,Sc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function id(n){const t=n._freezeSettings(),e=Pg(n._databaseId);return new I7(n._databaseId,!!t.ignoreUndefinedProperties,e)}function n2(n,t,e,r,i,a={}){const s=n.Dc(a.merge||a.mergeFields?2:0,t,e,i);i2("Data must be an object, but it was:",s,r);const l=G3(r,s);let c,f;if(a.merge)c=new Wr(s.fieldMask),f=s.fieldTransforms;else if(a.mergeFields){const d=[];for(const g of a.mergeFields){const m=ky(t,g,e);if(!s.contains(m))throw new At(ut.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);q3(d,m)||d.push(m)}c=new Wr(d),f=s.fieldTransforms.filter(g=>c.covers(g.field))}else c=null,f=s.fieldTransforms;return new C7(new Mr(l),c,f)}class Fg extends Vg{_toFieldTransform(t){if(t.Ec!==2)throw t.Ec===1?t.wc(`${this._methodName}() can only appear at the top level of your update data`):t.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof Fg}}class r2 extends Vg{_toFieldTransform(t){return new AP(t.path,new Nh)}isEqual(t){return t instanceof r2}}function z3(n,t,e,r){const i=n.Dc(1,t,e);i2("Data must be an object, but it was:",i,r);const a=[],s=Mr.empty();To(r,(c,f)=>{const d=a2(t,c,e);f=Pn(f);const g=i.gc(d);if(f instanceof Fg)a.push(d);else{const m=ad(f,g);m!=null&&(a.push(d),s.set(d,m))}});const l=new Wr(a);return new j3(s,l,i.fieldTransforms)}function H3(n,t,e,r,i,a){const s=n.Dc(1,t,e),l=[ky(t,r,e)],c=[i];if(a.length%2!=0)throw new At(ut.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<a.length;m+=2)l.push(ky(t,a[m])),c.push(a[m+1]);const f=[],d=Mr.empty();for(let m=l.length-1;m>=0;--m)if(!q3(f,l[m])){const v=l[m];let _=c[m];_=Pn(_);const w=s.gc(v);if(_ instanceof Fg)f.push(v);else{const b=ad(_,w);b!=null&&(f.push(v),d.set(v,b))}}const g=new Wr(f);return new j3(d,g,s.fieldTransforms)}function R7(n,t,e,r=!1){return ad(e,n.Dc(r?4:3,t))}function ad(n,t){if($3(n=Pn(n)))return i2("Unsupported field value:",t,n),G3(n,t);if(n instanceof Vg)return function(r,i){if(!U3(i.Ec))throw i.wc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.wc(`${r._methodName}() is not currently supported inside arrays`);const a=r._toFieldTransform(i);a&&i.fieldTransforms.push(a)}(n,t),null;if(n===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),n instanceof Array){if(t.settings.mc&&t.Ec!==4)throw t.wc("Nested arrays are not supported");return function(r,i){const a=[];let s=0;for(const l of r){let c=ad(l,i.yc(s));c==null&&(c={nullValue:"NULL_VALUE"}),a.push(c),s++}return{arrayValue:{values:a}}}(n,t)}return function(r,i){if((r=Pn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return yP(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const a=Ge.fromDate(r);return{timestampValue:G1(i.serializer,a)}}if(r instanceof Ge){const a=new Ge(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:G1(i.serializer,a)}}if(r instanceof ua)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof mi)return{bytesValue:a3(i.serializer,r._byteString)};if(r instanceof ln){const a=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(a))throw i.wc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:Ux(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof ca)return function(s,l){return{mapValue:{fields:{[PI]:{stringValue:kI},[j1]:{arrayValue:{values:s.toArray().map(f=>{if(typeof f!="number")throw l.wc("VectorValues must only contain numeric values.");return Vx(l.serializer,f)})}}}}}}(r,i);throw i.wc(`Unsupported field value: ${bg(r)}`)}(n,t)}function G3(n,t){const e={};return II(n)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):To(n,(r,i)=>{const a=ad(i,t.Vc(r));a!=null&&(e[r]=a)}),{mapValue:{fields:e}}}function $3(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Ge||n instanceof ua||n instanceof mi||n instanceof ln||n instanceof Vg||n instanceof ca)}function i2(n,t,e){if(!$3(e)||!TI(e)){const r=bg(e);throw r==="an object"?t.wc(n+" a custom object"):t.wc(n+" "+r)}}function ky(n,t,e){if((t=Pn(t))instanceof rd)return t._internalPath;if(typeof t=="string")return a2(n,t);throw W1("Field path arguments must be of type string or ",n,!1,void 0,e)}const D7=new RegExp("[~\\*/\\[\\]]");function a2(n,t,e){if(t.search(D7)>=0)throw W1(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,e);try{return new rd(...t.split("."))._internalPath}catch{throw W1(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,e)}}function W1(n,t,e,r,i){const a=r&&!r.isEmpty(),s=i!==void 0;let l=`Function ${t}() called with invalid data`;e&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(a||s)&&(c+=" (found",a&&(c+=` in field ${r}`),s&&(c+=` in document ${i}`),c+=")"),new At(ut.INVALID_ARGUMENT,l+n+c)}function q3(n,t){return n.some(e=>e.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X3{constructor(t,e,r,i,a){this._firestore=t,this._userDataWriter=e,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new ln(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new O7(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const e=this._document.data.field(jg("DocumentSnapshot.get",t));if(e!==null)return this._userDataWriter.convertValue(e)}}}class O7 extends X3{data(){return super.data()}}function jg(n,t){return typeof t=="string"?a2(n,t):t instanceof rd?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M7(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new At(ut.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class s2{}class o2 extends s2{}function on(n,t,...e){let r=[];t instanceof s2&&r.push(t),r=r.concat(e),function(a){const s=a.filter(c=>c instanceof l2).length,l=a.filter(c=>c instanceof Ug).length;if(s>1||s>0&&l>0)throw new At(ut.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class Ug extends o2{constructor(t,e,r){super(),this._field=t,this._op=e,this._value=r,this.type="where"}static _create(t,e,r){return new Ug(t,e,r)}_apply(t){const e=this._parse(t);return W3(t._query,e),new ds(t.firestore,t.converter,Sy(t._query,e))}_parse(t){const e=id(t.firestore);return function(a,s,l,c,f,d,g){let m;if(f.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new At(ut.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){iS(g,d);const _=[];for(const w of g)_.push(rS(c,a,w));m={arrayValue:{values:_}}}else m=rS(c,a,g)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||iS(g,d),m=R7(l,s,g,d==="in"||d==="not-in");return yn.create(f,d,m)}(t._query,"where",e,t.firestore._databaseId,this._field,this._op,this._value)}}function He(n,t,e){const r=t,i=jg("where",n);return Ug._create(i,r,e)}class l2 extends s2{constructor(t,e){super(),this.type=t,this._queryConstraints=e}static _create(t,e){return new l2(t,e)}_parse(t){const e=this._queryConstraints.map(r=>r._parse(t)).filter(r=>r.getFilters().length>0);return e.length===1?e[0]:Bi.create(e,this._getOperator())}_apply(t){const e=this._parse(t);return e.getFilters().length===0?t:(function(i,a){let s=i;const l=a.getFlattenedFilters();for(const c of l)W3(s,c),s=Sy(s,c)}(t._query,e),new ds(t.firestore,t.converter,Sy(t._query,e)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class u2 extends o2{constructor(t,e){super(),this._field=t,this._direction=e,this.type="orderBy"}static _create(t,e){return new u2(t,e)}_apply(t){const e=function(i,a,s){if(i.startAt!==null)throw new At(ut.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new At(ut.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Mh(a,s)}(t._query,this._field,this._direction);return new ds(t.firestore,t.converter,function(i,a){const s=i.explicitOrderBy.concat([a]);return new kl(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(t._query,e))}}function Lh(n,t="asc"){const e=t,r=jg("orderBy",n);return u2._create(r,e)}class c2 extends o2{constructor(t,e,r){super(),this.type=t,this._limit=e,this._limitType=r}static _create(t,e,r){return new c2(t,e,r)}_apply(t){return new ds(t.firestore,t.converter,z1(t._query,this._limit,this._limitType))}}function Y0(n){return V5("limit",n),c2._create("limit",n,"F")}function rS(n,t,e){if(typeof(e=Pn(e))=="string"){if(e==="")throw new At(ut.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!HI(t)&&e.indexOf("/")!==-1)throw new At(ut.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${e}' contains a '/' character.`);const r=t.path.child(Be.fromString(e));if(!Ot.isDocumentKey(r))throw new At(ut.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return _b(n,new Ot(r))}if(e instanceof ln)return _b(n,e._key);throw new At(ut.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${bg(e)}.`)}function iS(n,t){if(!Array.isArray(n)||n.length===0)throw new At(ut.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function W3(n,t){const e=function(i,a){for(const s of i)for(const l of s.getFlattenedFilters())if(a.indexOf(l.op)>=0)return l.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(e!==null)throw e===t.op?new At(ut.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new At(ut.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${e.toString()}' filters.`)}class N7{convertValue(t,e="none"){switch(Ao(t)){case 0:return null;case 1:return t.booleanValue;case 2:return sn(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(_o(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 11:return this.convertObject(t.mapValue,e);case 10:return this.convertVectorValue(t.mapValue);default:throw Ft(62114,{value:t})}}convertObject(t,e){return this.convertObjectMap(t.fields,e)}convertObjectMap(t,e="none"){const r={};return To(t,(i,a)=>{r[i]=this.convertValue(a,e)}),r}convertVectorValue(t){var e,r,i;const a=(i=(r=(e=t.fields)===null||e===void 0?void 0:e[j1].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>sn(s.doubleValue));return new ca(a)}convertGeoPoint(t){return new ua(sn(t.latitude),sn(t.longitude))}convertArray(t,e){return(t.values||[]).map(r=>this.convertValue(r,e))}convertServerTimestamp(t,e){switch(e){case"previous":const r=Cg(t);return r==null?null:this.convertValue(r,e);case"estimate":return this.convertTimestamp(Rh(t));default:return null}}convertTimestamp(t){const e=xo(t);return new Ge(e.seconds,e.nanos)}convertDocumentKey(t,e){const r=Be.fromString(t);be(f3(r),9688,{name:t});const i=new Dh(r.get(1),r.get(3)),a=new Ot(r.popFirst(5));return i.isEqual(e)||is(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f2(n,t,e){let r;return r=n?e&&(e.merge||e.mergeFields)?n.toFirestore(t,e):n.toFirestore(t):t,r}class ch{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class wl extends X3{constructor(t,e,r,i,a,s){super(t,e,r,i,s),this._firestore=t,this._firestoreImpl=t,this.metadata=a}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const e=new w1(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){const r=this._document.data.field(jg("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r,e.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new At(ut.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,e={};return e.type=wl._jsonSchemaVersion,e.bundle="",e.bundleSource="DocumentSnapshot",e.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?e:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),e.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),e)}}wl._jsonSchemaVersion="firestore/documentSnapshot/1.0",wl._jsonSchema={type:xn("string",wl._jsonSchemaVersion),bundleSource:xn("string","DocumentSnapshot"),bundleName:xn("string"),bundle:xn("string")};class w1 extends wl{data(t={}){return super.data(t)}}class oc{constructor(t,e,r,i){this._firestore=t,this._userDataWriter=e,this._snapshot=i,this.metadata=new ch(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const t=[];return this.forEach(e=>t.push(e)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,e){this._snapshot.docs.forEach(r=>{t.call(e,new w1(this._firestore,this._userDataWriter,r.key,r,new ch(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new At(ut.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(i,a){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(l=>{const c=new w1(i._firestore,i._userDataWriter,l.doc.key,l.doc,new ch(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(l=>a||l.type!==3).map(l=>{const c=new w1(i._firestore,i._userDataWriter,l.doc.key,l.doc,new ch(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);let f=-1,d=-1;return l.type!==0&&(f=s.indexOf(l.doc.key),s=s.delete(l.doc.key)),l.type!==1&&(s=s.add(l.doc),d=s.indexOf(l.doc.key)),{type:P7(l.type),doc:c,oldIndex:f,newIndex:d}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new At(ut.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=oc._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=Dx.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const e=[],r=[],i=[];return this.docs.forEach(a=>{a._document!==null&&(e.push(a._document),r.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),i.push(a.ref.path))}),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function P7(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ft(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k7(n){n=Yr(n,ln);const t=Yr(n.firestore,Io);return A7(Bg(t),n._key).then(e=>B7(t,n,e))}oc._jsonSchemaVersion="firestore/querySnapshot/1.0",oc._jsonSchema={type:xn("string",oc._jsonSchemaVersion),bundleSource:xn("string","QuerySnapshot"),bundleName:xn("string"),bundle:xn("string")};class Y3 extends N7{constructor(t){super(),this.firestore=t}convertBytes(t){return new mi(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new ln(this.firestore,null,e)}}function vn(n){n=Yr(n,ds);const t=Yr(n.firestore,Io),e=Bg(t),r=new Y3(t);return M7(n._query),E7(e,n._query).then(i=>new oc(t,r,n,i))}function aS(n,t,e){n=Yr(n,ln);const r=Yr(n.firestore,Io),i=f2(n.converter,t,e);return sd(r,[n2(id(r),"setDoc",n._key,i,n.converter!==null,e).toMutation(n._key,Sr.none())])}function zg(n,t,e,...r){n=Yr(n,ln);const i=Yr(n.firestore,Io),a=id(i);let s;return s=typeof(t=Pn(t))=="string"||t instanceof rd?H3(a,"updateDoc",n._key,t,e,r):z3(a,"updateDoc",n._key,t),sd(i,[s.toMutation(n._key,Sr.exists(!0))])}function L7(n){return sd(Yr(n.firestore,Io),[new Mg(n._key,Sr.none())])}function K3(n,t){const e=Yr(n.firestore,Io),r=ss(n),i=f2(n.converter,t);return sd(e,[n2(id(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,Sr.exists(!1))]).then(()=>r)}function sd(n,t){return function(r,i){const a=new Ja;return r.asyncQueue.enqueueAndForget(async()=>u7(await _7(r),i,a)),a.promise}(Bg(n),t)}function B7(n,t,e){const r=e.docs.get(t._key),i=new Y3(n);return new wl(n,i,t._key,r,new ch(e.hasPendingWrites,e.fromCache),t.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V7{constructor(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=id(t)}set(t,e,r){this._verifyNotCommitted();const i=Sv(t,this._firestore),a=f2(i.converter,e,r),s=n2(this._dataReader,"WriteBatch.set",i._key,a,i.converter!==null,r);return this._mutations.push(s.toMutation(i._key,Sr.none())),this}update(t,e,r,...i){this._verifyNotCommitted();const a=Sv(t,this._firestore);let s;return s=typeof(e=Pn(e))=="string"||e instanceof rd?H3(this._dataReader,"WriteBatch.update",a._key,e,r,i):z3(this._dataReader,"WriteBatch.update",a._key,e),this._mutations.push(s.toMutation(a._key,Sr.exists(!0))),this}delete(t){this._verifyNotCommitted();const e=Sv(t,this._firestore);return this._mutations=this._mutations.concat(new Mg(e._key,Sr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new At(ut.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Sv(n,t){if((n=Pn(n)).firestore!==t)throw new At(ut.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}function fa(){return new r2("serverTimestamp")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F7(n){return Bg(n=Yr(n,Io)),new V7(n,t=>sd(n,t))}(function(t,e=!0){(function(i){Rc=i})(Cc),cc(new Il("firestore",(r,{instanceIdentifier:i,options:a})=>{const s=r.getProvider("app").getImmediate(),l=new Io(new D5(r.getProvider("auth-internal")),new N5(s,r.getProvider("app-check-internal")),function(f,d){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new At(ut.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Dh(f.options.projectId,d)}(s,i),s);return a=Object.assign({useFetchStreams:e},a),l._setSettings(a),l},"PUBLIC").setMultipleInstances(!0)),fo(sb,ob,t),fo(sb,ob,"esm2017")})();const j7={apiKey:"AIzaSyBg60nFX2rmrW66n3lPeXRLTfMhjlgFrEE",authDomain:"project-01-bookmemo-prod.firebaseapp.com",projectId:"project-01-bookmemo-prod",storageBucket:"project-01-bookmemo-prod.firebasestorage.app",messagingSenderId:"414976225343",appId:"1:414976225343:web:31244d8c1ffe3b6f89088a"},Z3=NC(j7),h2=b5(Z3),de=b7(Z3),Q3=H.createContext();function U7({children:n}){const[t,e]=H.useState(null),[r,i]=H.useState(!0);return H.useEffect(()=>{const a=dN(h2,s=>{e(s),i(!1)});return()=>a()},[]),A.jsx(Q3.Provider,{value:{user:t,loading:r},children:n})}function qn(){return H.useContext(Q3)}function z7(){const[n,t]=H.useState(""),[e,r]=H.useState(""),[i,a]=H.useState(""),s=Gh(),l=async c=>{c.preventDefault(),a("");try{await cN(h2,n,e),s("/")}catch(f){a(f.message)}};return A.jsxs(vt,{component:"form",onSubmit:l,sx:{maxWidth:400,mx:"auto",mt:8},children:[A.jsx(st,{variant:"h5",align:"center",gutterBottom:!0,"data-testid":"login-title",children:"ログイン"}),A.jsx(le,{label:"メールアドレス",type:"email",value:n,onChange:c=>t(c.target.value),fullWidth:!0,margin:"normal",required:!0,inputProps:{"data-testid":"login-email-input"}}),A.jsx(le,{label:"パスワード",type:"password",value:e,onChange:c=>r(c.target.value),fullWidth:!0,margin:"normal",required:!0,inputProps:{"data-testid":"login-password-input"}}),i&&A.jsx(st,{color:"error",children:i}),A.jsx(qt,{type:"submit",variant:"contained",fullWidth:!0,sx:{mt:2},"data-testid":"login-submit",children:"ログイン"})]})}function H7(){const[n,t]=H.useState(""),[e,r]=H.useState(""),[i,a]=H.useState(""),s=async l=>{l.preventDefault(),a("");try{await uN(h2,n,e)}catch(c){a(c.message)}};return A.jsxs(vt,{component:"form",onSubmit:s,sx:{maxWidth:400,mx:"auto",mt:8},children:[A.jsx(st,{variant:"h5",align:"center",gutterBottom:!0,children:"新規登録"}),A.jsx(le,{label:"メールアドレス",type:"email",value:n,onChange:l=>t(l.target.value),fullWidth:!0,margin:"normal",required:!0}),A.jsx(le,{label:"パスワード",type:"password",value:e,onChange:l=>r(l.target.value),fullWidth:!0,margin:"normal",required:!0}),i&&A.jsx(st,{color:"error",children:i}),A.jsx(qt,{type:"submit",variant:"contained",fullWidth:!0,sx:{mt:2},children:"新規登録"})]})}function G7({book:n,onClick:t,testId:e}){const r=i=>{switch(i){case"reading":return"読書中";case"finished":return"読了";default:return"読書中"}};return A.jsx(pn,{sx:{cursor:"pointer","&:hover":{boxShadow:3},height:"100%",display:"flex",flexDirection:"column",minHeight:{xs:"140px",sm:"160px"}},onClick:t,"data-testid":e||`book-card-${n.id}`,children:A.jsx(mn,{sx:{flex:1,display:"flex",flexDirection:"column",p:{xs:1.5,sm:2},"&:last-child":{pb:{xs:1.5,sm:2}}},children:A.jsxs(vt,{sx:{display:"flex",alignItems:"flex-start",gap:{xs:1.5,sm:2},height:"100%"},children:[n.coverImageUrl&&A.jsx(Q8,{component:"img",sx:{width:{xs:50,sm:60},height:{xs:70,sm:80},objectFit:"cover",flexShrink:0,borderRadius:1},image:n.coverImageUrl,alt:n.title}),A.jsxs(vt,{sx:{flex:1,minWidth:0,display:"flex",flexDirection:"column",height:"100%"},children:[A.jsx(st,{variant:"h6",component:"h3",gutterBottom:!0,sx:{fontSize:{xs:"0.9rem",sm:"1rem",md:"1.1rem"},lineHeight:1.2,fontWeight:600,mb:.5,overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical"},children:n.title||"タイトル未設定"}),A.jsx(st,{variant:"body2",color:"text.secondary",sx:{fontSize:{xs:"0.75rem",sm:"0.8rem",md:"0.9rem"},mb:.5,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:n.author||"著者未設定"}),(n.publisher||n.publishedDate)&&A.jsxs(st,{variant:"body2",color:"text.secondary",sx:{fontSize:{xs:"0.7rem",sm:"0.75rem",md:"0.8rem"},mb:1,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:[n.publisher," ",n.publisher&&n.publishedDate&&"•"," ",n.publishedDate]}),A.jsx(vt,{sx:{minHeight:{xs:"32px",sm:"36px"},mb:1,display:"flex",flexWrap:"wrap",gap:.5},children:n.tags&&n.tags.length>0?n.tags.slice(0,3).map((i,a)=>A.jsx(On,{label:i,size:"small",variant:"outlined",sx:{fontSize:{xs:"0.65rem",sm:"0.7rem",md:"0.75rem"},height:{xs:"18px",sm:"20px",md:"22px"},"& .MuiChip-label":{px:{xs:.5,sm:.75}}}},a)):A.jsx(st,{variant:"caption",color:"text.secondary",sx:{fontSize:{xs:"0.65rem",sm:"0.7rem",md:"0.75rem"},alignSelf:"center"},children:"タグなし"})}),A.jsxs(st,{variant:"caption",color:"text.secondary",sx:{mt:"auto",fontSize:{xs:"0.65rem",sm:"0.7rem",md:"0.75rem"},fontWeight:500},children:["ステータス: ",r(n.status)]})]})]})})})}const Hg=({title:n,subtitle:t,children:e})=>A.jsxs(Sc,{elevation:0,sx:{background:`
          linear-gradient(135deg, rgba(139, 69, 19, 0.9) 0%, rgba(160, 82, 45, 0.8) 100%),
          repeating-linear-gradient(
            45deg,
            transparent,
            transparent 4px,
            rgba(139, 69, 19, 0.1) 4px,
            rgba(139, 69, 19, 0.1) 8px
          ),
          linear-gradient(135deg, #8B4513 0%, #A0522D 50%, #CD853F 100%)
        `,backgroundSize:"cover, 16px 16px, cover",backgroundRepeat:"no-repeat, repeat, no-repeat",backgroundPosition:"center, center, center",borderRadius:0,mb:3,position:"relative",overflow:"hidden",borderBottom:"3px solid rgba(139, 69, 19, 0.3)"},children:[A.jsxs(vt,{sx:{p:{xs:2,sm:3,md:4},textAlign:"center",color:"white",position:"relative",zIndex:1},children:[A.jsx(st,{variant:"h4",component:"h1",sx:{fontWeight:700,fontSize:{xs:"1.5rem",sm:"2rem",md:"2.5rem"},mb:t?1:0,textShadow:"0 2px 4px rgba(0,0,0,0.7)",color:"#FFF8DC"},children:n}),t&&A.jsx(st,{variant:"body1",sx:{opacity:.95,fontSize:{xs:"0.9rem",sm:"1rem"},textShadow:"0 1px 2px rgba(0,0,0,0.7)",color:"#F5F5DC"},children:t}),e&&A.jsx(vt,{sx:{mt:2},children:e})]}),A.jsx(vt,{sx:{position:"absolute",top:0,left:0,right:0,bottom:0,background:`
            radial-gradient(circle at 30% 70%, rgba(255,255,255,0.15) 0%, transparent 40%),
            radial-gradient(circle at 70% 30%, rgba(255,255,255,0.1) 0%, transparent 30%)
          `,pointerEvents:"none"}})]}),Lr=gx.createContext({setGlobalError:()=>{}}),$7=({open:n,message:t,onClose:e})=>A.jsxs(da,{open:n,onClose:e,maxWidth:"xs",fullWidth:!0,children:[A.jsx(ga,{sx:{color:"error.main",fontWeight:"bold"},children:"エラーが発生しました"}),A.jsx(pa,{children:A.jsx(oo,{severity:"error",sx:{mb:2},children:t})}),A.jsx(ma,{sx:{justifyContent:"center",pb:2},children:A.jsx(qt,{onClick:e,color:"error",variant:"contained",autoFocus:!0,children:"閉じる"})})]});function Yf(n){return n?(e=>e.replace(/[Ａ-Ｚａ-ｚ０-９]/g,r=>String.fromCharCode(r.charCodeAt(0)-65248)))(n).toLowerCase():""}const q7=()=>{const{user:n}=qn(),t=H.useContext(Lr),e=(t==null?void 0:t.setGlobalError)||(()=>{}),[r,i]=H.useState([]),[a,s]=H.useState(!0),[l,c]=H.useState(null),[f,d]=H.useState("reading"),[g,m]=H.useState(""),v=H.useCallback(async()=>{if(!n){i([]),s(!1);return}try{s(!0),c(null),console.log("=== useBookList fetchBooks START ===");const M=on(br(de,"books"),He("userId","==",n.uid),Lh("updatedAt","desc"));console.log("=== useBookList getDocs START ===");const N=await vn(M);console.log("=== useBookList getDocs END ===");const k=N.docs.map(O=>({id:O.id,...O.data()}));console.log("=== useBookList setAllBooks START ==="),i(k),console.log("=== useBookList setAllBooks END ===")}catch(M){console.error("Error fetching books:",M),e("書籍一覧の取得に失敗しました。"),c("書籍一覧の取得に失敗しました。")}finally{console.log("=== useBookList setLoading false ==="),s(!1)}},[n,e]),_=H.useCallback((M,N)=>{d(N)},[]),w=H.useCallback(M=>{m(M.target.value)},[]),b=H.useCallback(()=>{m("")},[]),C=H.useCallback(()=>{d("reading")},[]),I=r.filter(M=>{if(f!=="all"&&(M.status||"reading")!==f)return!1;if(!g.trim())return!0;const N=Yf(g);return M.title&&Yf(M.title).includes(N)||M.author&&Yf(M.author).includes(N)||Array.isArray(M.tags)&&M.tags.some(k=>Yf(k).includes(N))}),R={total:r.length,reading:r.filter(M=>(M.status||"reading")==="reading").length,finished:r.filter(M=>M.status==="finished").length,filtered:I.length};return H.useEffect(()=>{v()},[n==null?void 0:n.uid]),{allBooks:r,filteredBooks:I,stats:R,loading:a,error:l,filter:f,searchText:g,fetchBooks:v,handleFilterChange:_,handleSearchChange:w,clearSearch:b,clearFilter:C,normalizeTag:Yf}},d2=()=>{const[n,t]=H.useState(navigator.onLine),[e,r]=H.useState(null),[i,a]=H.useState(null),[s,l]=H.useState(!1),[c,f]=H.useState(!1),[d,g]=H.useState(0),[m,v]=H.useState(null);H.useEffect(()=>{const S=()=>t(!0),D=()=>t(!1);return window.addEventListener("online",S),window.addEventListener("offline",D),()=>{window.removeEventListener("online",S),window.removeEventListener("offline",D)}},[]),H.useEffect(()=>{const S=()=>{g(V=>V+1)},D=["click","scroll","keydown","touchstart"];return D.forEach(V=>{window.addEventListener(V,S,{passive:!0})}),()=>{D.forEach(V=>{window.removeEventListener(V,S)})}},[]),H.useEffect(()=>{const S=Date.now(),D=localStorage.getItem("bookmemo_last_visit");if(D){if(S-parseInt(D)>1440*60*1e3){const B=parseInt(localStorage.getItem("bookmemo_visit_count")||"0")+1;localStorage.setItem("bookmemo_visit_count",B.toString())}}else localStorage.setItem("bookmemo_visit_count","1");localStorage.setItem("bookmemo_last_visit",S.toString()),v(S)},[]);const _=H.useCallback(async()=>{if("serviceWorker"in navigator)try{const S=await navigator.serviceWorker.register("/sw.js");return r(S),console.log("Service Worker registered:",S),S.addEventListener("updatefound",()=>{const D=S.installing;D.addEventListener("statechange",()=>{D.state==="installed"&&navigator.serviceWorker.controller&&console.log("New Service Worker available")})}),S}catch(S){throw console.error("Service Worker registration failed:",S),S}return null},[]);H.useEffect(()=>{const S=B=>{B.preventDefault(),a(B),l(!0)},D=()=>{f(!0),l(!1),a(null),console.log("PWA was installed"),localStorage.setItem("bookmemo_installed","true"),localStorage.setItem("bookmemo_install_date",Date.now().toString())};return window.addEventListener("beforeinstallprompt",S),window.addEventListener("appinstalled",D),localStorage.getItem("bookmemo_installed")==="true"&&(f(!0),l(!1)),()=>{window.removeEventListener("beforeinstallprompt",S),window.removeEventListener("appinstalled",D)}},[]);const w=H.useCallback(async()=>{if(i){i.prompt();const{outcome:S}=await i.userChoice;console.log(S==="accepted"?"User accepted the install prompt":"User dismissed the install prompt"),a(null),l(!1)}},[i]),b=H.useCallback(()=>{if(c||!s)return!1;const S=parseInt(localStorage.getItem("bookmemo_visit_count")||"0"),D=parseInt(localStorage.getItem("bookmemo_dismiss_count")||"0");return S>=1&&d>=5&&D<3},[c,s,d]),C=H.useCallback(()=>{if(c)return!1;const S=/iPad|iPhone|iPod/.test(navigator.userAgent),D=/Safari/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent);return S&&D},[c]),I=H.useCallback(()=>{const S=parseInt(localStorage.getItem("bookmemo_dismiss_count")||"0")+1;localStorage.setItem("bookmemo_dismiss_count",S.toString())},[]),R=H.useCallback(async()=>"Notification"in window?await Notification.requestPermission():"denied",[]),M=H.useCallback((S,D={})=>"Notification"in window&&Notification.permission==="granted"?new Notification(S,{icon:"/icons/icon-192x192.png",badge:"/icons/icon-192x192.png",...D}):null,[]),N=H.useCallback(async()=>{e&&await e.update()},[e]),k=H.useCallback(async()=>{if("caches"in window){const S=await caches.keys();await Promise.all(S.map(D=>caches.delete(D)))}},[]),O=H.useCallback(()=>{window.location.reload()},[]);return{isOnline:n,isInstallable:s,isInstalled:c,swRegistration:e,userEngagement:d,lastVisitTime:m,shouldShowInstallPrompt:b(),shouldShowManualInstallGuide:C(),registerServiceWorker:_,installApp:w,requestNotificationPermission:R,sendNotification:M,checkForUpdates:N,clearCache:k,reloadApp:O,recordInstallPromptDismiss:I}};function X7(){const n=Gh(),{isInstallable:t,isInstalled:e,installApp:r,shouldShowManualInstallGuide:i}=d2(),{filteredBooks:a,loading:s,filter:l,searchText:c,handleFilterChange:f,handleSearchChange:d}=q7(),g=_=>{n(`/book/${_}`)},m=async()=>{try{await r()}catch(_){console.error("Installation failed:",_)}},v=()=>{const _=/iPad|iPhone|iPod/.test(navigator.userAgent),w=/Safari/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent);_&&w&&alert(`📱 BookMemoをホーム画面に追加する手順：

1. 共有ボタンをタップ
   Safariの下部にある「共有」ボタン（□↑）をタップ

2. 「ホーム画面に追加」を選択
   共有メニューから「ホーム画面に追加」を選択

3. 追加を確認
   「追加」をタップしてホーム画面に追加

これでBookMemoをアプリとして使用できます！`)};return s?A.jsx("div",{children:"Loading..."}):A.jsxs(vt,{sx:{maxWidth:1200,mx:"auto",pb:{xs:"72px",sm:"80px"}},children:[A.jsx(Hg,{title:"本一覧",subtitle:"あなたの読書ライブラリ"}),A.jsxs(vt,{sx:{px:{xs:1.5,sm:2,md:0}},children:[A.jsxs(vt,{sx:{display:"flex",justifyContent:"center",alignItems:"center",gap:1,flexWrap:"wrap",mb:2},children:[t&&!e&&A.jsx(Aw,{title:"BookMemoをアプリとしてインストール",children:A.jsx(Xr,{color:"primary",onClick:m,sx:{backgroundColor:"primary.main",color:"white","&:hover":{backgroundColor:"primary.dark"}},"data-testid":"pwa-install-header-button",children:A.jsx(R1,{})})}),i&&!e&&A.jsx(Aw,{title:"iPhoneでホーム画面に追加する手順を表示",children:A.jsx(Xr,{color:"secondary",onClick:v,sx:{backgroundColor:"secondary.main",color:"white","&:hover":{backgroundColor:"secondary.dark"}},"data-testid":"pwa-manual-install-button",children:A.jsx(R1,{})})})]}),A.jsx(vt,{sx:{display:"flex",justifyContent:"center",mb:3},children:A.jsx(qt,{variant:"contained","data-testid":"book-add-button",onClick:()=>n("/add"),sx:{fontSize:{xs:"0.9rem",sm:"1rem"},py:{xs:1,sm:1.5},px:{xs:2,sm:3}},children:"本を追加"})}),A.jsx(le,{label:"検索（タイトル・著者・タグ）",value:c,onChange:d,fullWidth:!0,size:"small",sx:{mb:{xs:1.5,sm:2},"& .MuiOutlinedInput-root":{fontSize:{xs:"0.9rem",sm:"1rem"}}}}),A.jsx(vt,{sx:{borderBottom:1,borderColor:"divider",mb:{xs:1.5,sm:2},position:"sticky",top:0,zIndex:1100,backgroundColor:"background.paper"},"data-testid":"book-list-tabs-container",style:{position:"sticky",top:0,zIndex:1100},children:A.jsxs(fC,{value:l,onChange:f,centered:!0,sx:{"& .MuiTab-root":{fontSize:{xs:"0.8rem",sm:"0.9rem"},minHeight:{xs:"40px",sm:"48px"}}},children:[A.jsx(vh,{label:"すべて",value:"all"}),A.jsx(vh,{label:"読書中",value:"reading"}),A.jsx(vh,{label:"読了",value:"finished"})]})}),a.length===0?A.jsx(vt,{sx:{textAlign:"center",py:{xs:3,sm:4},px:{xs:2,sm:0}},children:A.jsx(st,{variant:"body1",color:"text.secondary",sx:{fontSize:{xs:"0.9rem",sm:"1rem"}},children:"該当する本がありません"})}):A.jsx(te,{container:!0,spacing:{xs:1.5,sm:2},"data-testid":"book-list-grid",children:a.map(_=>A.jsx(te,{item:!0,xs:12,sm:6,md:4,lg:3,"data-testid":`book-grid-item-${_.id}`,children:A.jsx(G7,{book:_,onClick:()=>g(_.id),testId:`book-list-card-${_.id}`})},_.id))})]})]})}const os=(n,t)=>{const[e,r]=H.useState([]),[i,a]=H.useState(!1),s=H.useCallback(async()=>{if(t!=null&&t.uid)try{a(!0);const f=n==="book"?"bookTagHistory":"memoTagHistory",d=on(br(de,"users",t.uid,f),Lh("updatedAt","desc")),g=await vn(d),m=[];g.forEach(v=>{const _=v.data();_.tag&&m.push(_.tag)}),r(m)}catch(f){throw console.error("タグ履歴の取得に失敗しました:",f),f}finally{a(!1)}},[t==null?void 0:t.uid,n]),l=H.useCallback(async f=>{if(!(!(t!=null&&t.uid)||!f))try{const d=n==="book"?"bookTagHistory":"memoTagHistory",g=ss(de,"users",t.uid,d,f);await aS(g,{tag:f,updatedAt:fa()})}catch(d){throw console.error("タグ履歴の保存に失敗しました:",d),d}},[t==null?void 0:t.uid,n]),c=H.useCallback(async f=>{if(!(!(t!=null&&t.uid)||!f||f.length===0))try{const d=f.map(g=>{const m=n==="book"?"bookTagHistory":"memoTagHistory",v=ss(de,"users",t.uid,m,g);return aS(v,{tag:g,updatedAt:fa()})});await Promise.all(d)}catch(d){throw console.error("タグ履歴の一括保存に失敗しました:",d),d}},[t==null?void 0:t.uid,n]);return{tagOptions:e,loading:i,fetchTagHistory:s,saveTagToHistory:l,saveTagsToHistory:c}},W7=()=>{const{user:n}=qn(),t=H.useContext(Lr),e=(t==null?void 0:t.setGlobalError)||(()=>{}),[r,i]=H.useState(!1),[a,s]=H.useState(null),{saveTagsToHistory:l}=os("book",n),c=H.useCallback(async d=>{if(!n)throw new Error("ユーザーが認証されていません。");if(!d.title)throw new Error("タイトルは必須です。");try{i(!0),s(null);let g=(d.tags||[]).filter(v=>v&&v.trim()!=="");d.inputTagValue&&!g.includes(d.inputTagValue.trim())&&(g=[...g,d.inputTagValue.trim()]),g=g.filter(v=>v&&v.trim()!=="");const m=await K3(br(de,"books"),{userId:n.uid,isbn:d.isbn||"",title:d.title,author:d.author||"",publisher:d.publisher||"",publishedDate:d.publishedDate||"",coverImageUrl:d.coverImageUrl||"",tags:g,status:"reading",createdAt:fa(),updatedAt:fa()});return g.length>0&&await l(g),m.id}catch(g){console.error("Error adding book:",g);const m="書籍の追加に失敗しました: "+g.message;throw e(m),s(m),g}finally{i(!1)}},[n,e,l]),f=H.useCallback(()=>{s(null)},[]);return{addBook:c,loading:r,error:a,clearError:f}},Y7=()=>{const{user:n}=qn(),t=H.useContext(Lr),e=(t==null?void 0:t.setGlobalError)||(()=>{}),[r,i]=H.useState(!1),[a,s]=H.useState(""),[l,c]=H.useState(!1),f=H.useCallback(async m=>{if(!m||!m.trim())return s("ISBNを入力してください"),null;s(""),i(!0),c(!0);try{const v=m.trim(),w=(await bw.get(`https://api.openbd.jp/v1/get?isbn=${v}`)).data[0];let b="",C="",I="",R="",M="",N=[];if(w&&w.summary&&(b=w.summary.title||"",C=w.summary.author||"",I=w.summary.publisher||"",R=w.summary.pubdate||"",M=w.summary.cover||"",w.summary.subject&&N.push(w.summary.subject),w.summary.ndc&&N.push(w.summary.ndc)),!M||!b)try{const O=(await bw.get(`https://www.googleapis.com/books/v1/volumes?q=isbn:${v}`)).data;if(O.items&&O.items.length>0){const S=O.items[0].volumeInfo;b||(b=S.title||""),C||(C=S.authors?S.authors.join(", "):""),I||(I=S.publisher||""),R||(R=S.publishedDate||""),!M&&S.imageLinks&&(M=S.imageLinks.thumbnail||S.imageLinks.smallThumbnail||""),S.categories&&S.categories.length>0&&(N=[...N,...S.categories])}}catch(k){console.error("Failed to fetch from Google Books API",k)}return b?{isbn:v,title:b,author:C,publisher:I,publishedDate:R,coverImageUrl:M,tags:Array.from(new Set(N))}:(e("書籍情報が見つかりませんでした"),null)}catch{const _="書籍情報の取得に失敗しました";return e(_),s(_),null}finally{i(!1)}},[e]),d=H.useCallback(()=>{s(null)},[]),g=H.useCallback(()=>{c(!1),s(null)},[]);return{searchBookByIsbn:f,loading:r,error:a,searchPerformed:l,clearError:d,clearSearch:g}};function K7({isbn:n="",onBookAdded:t}){const[e,r]=H.useState(n),[i,a]=H.useState(""),[s,l]=H.useState(""),[c,f]=H.useState(""),[d,g]=H.useState(""),[m,v]=H.useState(""),[_,w]=H.useState([]),[b,C]=H.useState(""),{tagOptions:I,fetchTagHistory:R}=os("book"),{addBook:M,loading:N,error:k}=W7(),{searchBookByIsbn:O,loading:S,error:D}=Y7();H.useEffect(()=>{R()},[R]),H.useEffect(()=>{n&&n!==e&&(console.log("[BookForm] useEffect: propsのisbnが変化:",n),r(n),n.trim()!==""&&(console.log("[BookForm] useEffect: 自動で書籍情報取得を実行",n),V(n)))},[n,e]);const V=async F=>{const j=F!==void 0?F:e;if(!j||!j.trim())return;const rt=await O(j);rt&&(a(rt.title),l(rt.author),f(rt.publisher),g(rt.publishedDate),v(rt.coverImageUrl),w(rt.tags))},B=async F=>{if(F.preventDefault(),!i)return;const rt=await M({isbn:e,title:i,author:s,publisher:c,publishedDate:d,coverImageUrl:m,tags:_,inputTagValue:b});rt&&t(rt)};return A.jsxs(vt,{component:"form",onSubmit:B,sx:{mt:{xs:1,sm:2}},role:"form","data-testid":"book-form",children:[A.jsxs(te,{container:!0,spacing:{xs:1,sm:1.5},children:[A.jsx(te,{item:!0,xs:12,sm:6,children:A.jsx(le,{label:"ISBN",value:e,onChange:F=>r(F.target.value),fullWidth:!0,size:"small",placeholder:"例: 9784873119485",inputProps:{"data-testid":"book-isbn-input"},sx:{"& .MuiOutlinedInput-root":{fontSize:{xs:"0.9rem",sm:"1rem"}}}})}),A.jsx(te,{item:!0,xs:12,sm:6,children:A.jsx(qt,{onClick:()=>V(),variant:"outlined",disabled:S,sx:{mt:{xs:1,sm:0},height:{xs:"40px",sm:"56px"},fontSize:{xs:"0.8rem",sm:"0.9rem"}},fullWidth:!0,"data-testid":"book-fetch-button",children:S?"取得中...":"ISBNで書籍情報取得"})})]}),m&&A.jsx(vt,{sx:{textAlign:"center",my:{xs:1.5,sm:2},px:{xs:1,sm:0}},children:A.jsx("img",{src:m,alt:"表紙",style:{maxHeight:"120px",maxWidth:"100%",width:"auto",borderRadius:"4px"},"data-testid":"book-cover-image"})}),A.jsxs(te,{container:!0,spacing:{xs:1,sm:1.5},sx:{mt:{xs:.5,sm:1}},children:[A.jsx(te,{item:!0,xs:12,sm:6,children:A.jsx(le,{label:"タイトル",value:i,onChange:F=>a(F.target.value),fullWidth:!0,required:!0,size:"small",inputProps:{"data-testid":"book-title-input"},sx:{"& .MuiOutlinedInput-root":{fontSize:{xs:"0.9rem",sm:"1rem"}}}})}),A.jsx(te,{item:!0,xs:12,sm:6,children:A.jsx(le,{label:"著者",value:s,onChange:F=>l(F.target.value),fullWidth:!0,size:"small",inputProps:{"data-testid":"book-author-input"},sx:{"& .MuiOutlinedInput-root":{fontSize:{xs:"0.9rem",sm:"1rem"}}}})}),A.jsx(te,{item:!0,xs:12,sm:6,children:A.jsx(le,{label:"出版社",value:c,onChange:F=>f(F.target.value),fullWidth:!0,size:"small",inputProps:{"data-testid":"book-publisher-input"},sx:{"& .MuiOutlinedInput-root":{fontSize:{xs:"0.9rem",sm:"1rem"}}}})}),A.jsx(te,{item:!0,xs:12,sm:6,children:A.jsx(le,{label:"出版日",value:d,onChange:F=>g(F.target.value),fullWidth:!0,size:"small",inputProps:{"data-testid":"book-publishdate-input"},sx:{"& .MuiOutlinedInput-root":{fontSize:{xs:"0.9rem",sm:"1rem"}}}})})]}),A.jsx(vt,{sx:{mt:{xs:1.5,sm:2}},children:A.jsx(es,{multiple:!0,freeSolo:!0,options:I,value:_,getOptionLabel:F=>typeof F=="string"?F:F.inputValue||F.tag||"",onChange:(F,j)=>{const rt=(j||[]).map(mt=>{if(typeof mt=="string")return mt;if(mt&&typeof mt=="object"){if("inputValue"in mt&&mt.inputValue)return mt.inputValue;if("tag"in mt&&mt.tag)return mt.tag}return""}).filter(Boolean);w(rt)},inputValue:b,onInputChange:(F,j)=>C(j),renderInput:F=>A.jsx(le,{...F,label:"タグ",fullWidth:!0,size:"small",placeholder:"例: 小説,名作,技術書",inputProps:{...F.inputProps,"data-testid":"book-tags-input",style:{fontSize:"0.9rem"}},sx:{"& .MuiOutlinedInput-root":{fontSize:{xs:"0.9rem",sm:"1rem"}}}}),sx:{"& .MuiChip-root":{fontSize:{xs:"0.75rem",sm:"0.8rem"},height:{xs:"24px",sm:"28px"}}}})}),(D||k)&&A.jsx(st,{color:"error",sx:{mt:{xs:1.5,sm:2},fontSize:{xs:"0.8rem",sm:"0.9rem"}},"data-testid":"book-form-error",children:D||k}),A.jsx(qt,{type:"submit",variant:"contained",disabled:N,sx:{mt:{xs:2,sm:3},mb:{xs:"72px",sm:2},width:{xs:"100%",sm:"auto"},fontSize:{xs:"0.9rem",sm:"1rem"},py:{xs:1.5,sm:2}},"data-testid":"book-add-submit",children:N?"追加中...":"本を追加"})]})}function Z7(n,t){var e=Object.setPrototypeOf;e?e(n,t):n.__proto__=t}function Q7(n,t){t===void 0&&(t=n.constructor);var e=Error.captureStackTrace;e&&e(n,t)}var J7=function(){var n=function(e,r){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(i[s]=a[s])},n(e,r)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),tk=function(n){J7(t,n);function t(e,r){var i=this.constructor,a=n.call(this,e,r)||this;return Object.defineProperty(a,"name",{value:i.name,enumerable:!1,configurable:!0}),Z7(a,i.prototype),Q7(a),a}return t}(Error),ek=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Br=function(n){ek(t,n);function t(e){e===void 0&&(e=void 0);var r=n.call(this,e)||this;return r.message=e,r}return t.prototype.getKind=function(){var e=this.constructor;return e.kind},t.kind="Exception",t}(tk),nk=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Di=function(n){nk(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.kind="ArgumentException",t}(Br),rk=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),kt=function(n){rk(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.kind="IllegalArgumentException",t}(Br),ik=function(){function n(t){if(this.binarizer=t,t===null)throw new kt("Binarizer must be non-null.")}return n.prototype.getWidth=function(){return this.binarizer.getWidth()},n.prototype.getHeight=function(){return this.binarizer.getHeight()},n.prototype.getBlackRow=function(t,e){return this.binarizer.getBlackRow(t,e)},n.prototype.getBlackMatrix=function(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix},n.prototype.isCropSupported=function(){return this.binarizer.getLuminanceSource().isCropSupported()},n.prototype.crop=function(t,e,r,i){var a=this.binarizer.getLuminanceSource().crop(t,e,r,i);return new n(this.binarizer.createBinarizer(a))},n.prototype.isRotateSupported=function(){return this.binarizer.getLuminanceSource().isRotateSupported()},n.prototype.rotateCounterClockwise=function(){var t=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new n(this.binarizer.createBinarizer(t))},n.prototype.rotateCounterClockwise45=function(){var t=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new n(this.binarizer.createBinarizer(t))},n.prototype.toString=function(){try{return this.getBlackMatrix().toString()}catch{return""}},n}(),ak=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Gn=function(n){ak(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.getChecksumInstance=function(){return new t},t.kind="ChecksumException",t}(Br),sk=function(){function n(t){this.source=t}return n.prototype.getLuminanceSource=function(){return this.source},n.prototype.getWidth=function(){return this.source.getWidth()},n.prototype.getHeight=function(){return this.source.getHeight()},n}(),je=function(){function n(){}return n.arraycopy=function(t,e,r,i,a){for(;a--;)r[i++]=t[e++]},n.currentTimeMillis=function(){return Date.now()},n}(),ok=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),g2=function(n){ok(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.kind="IndexOutOfBoundsException",t}(Br),lk=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),sS=function(n){lk(t,n);function t(e,r){e===void 0&&(e=void 0),r===void 0&&(r=void 0);var i=n.call(this,r)||this;return i.index=e,i.message=r,i}return t.kind="ArrayIndexOutOfBoundsException",t}(g2),uk=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Dn=function(){function n(){}return n.fill=function(t,e){for(var r=0,i=t.length;r<i;r++)t[r]=e},n.fillWithin=function(t,e,r,i){n.rangeCheck(t.length,e,r);for(var a=e;a<r;a++)t[a]=i},n.rangeCheck=function(t,e,r){if(e>r)throw new kt("fromIndex("+e+") > toIndex("+r+")");if(e<0)throw new sS(e);if(r>t)throw new sS(r)},n.asList=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t},n.create=function(t,e,r){var i=Array.from({length:t});return i.map(function(a){return Array.from({length:e}).fill(r)})},n.createInt32Array=function(t,e,r){var i=Array.from({length:t});return i.map(function(a){return Int32Array.from({length:e}).fill(r)})},n.equals=function(t,e){if(!t||!e||!t.length||!e.length||t.length!==e.length)return!1;for(var r=0,i=t.length;r<i;r++)if(t[r]!==e[r])return!1;return!0},n.hashCode=function(t){var e,r;if(t===null)return 0;var i=1;try{for(var a=uk(t),s=a.next();!s.done;s=a.next()){var l=s.value;i=31*i+l}}catch(c){e={error:c}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(e)throw e.error}}return i},n.fillUint8Array=function(t,e){for(var r=0;r!==t.length;r++)t[r]=e},n.copyOf=function(t,e){return t.slice(0,e)},n.copyOfUint8Array=function(t,e){if(t.length<=e){var r=new Uint8Array(e);return r.set(t),r}return t.slice(0,e)},n.copyOfRange=function(t,e,r){var i=r-e,a=new Int32Array(i);return je.arraycopy(t,e,a,0,i),a},n.binarySearch=function(t,e,r){r===void 0&&(r=n.numberComparator);for(var i=0,a=t.length-1;i<=a;){var s=a+i>>1,l=r(e,t[s]);if(l>0)i=s+1;else if(l<0)a=s-1;else return s}return-i-1},n.numberComparator=function(t,e){return t-e},n}(),Zt=function(){function n(){}return n.numberOfTrailingZeros=function(t){var e;if(t===0)return 32;var r=31;return e=t<<16,e!==0&&(r-=16,t=e),e=t<<8,e!==0&&(r-=8,t=e),e=t<<4,e!==0&&(r-=4,t=e),e=t<<2,e!==0&&(r-=2,t=e),r-(t<<1>>>31)},n.numberOfLeadingZeros=function(t){if(t===0)return 32;var e=1;return t>>>16||(e+=16,t<<=16),t>>>24||(e+=8,t<<=8),t>>>28||(e+=4,t<<=4),t>>>30||(e+=2,t<<=2),e-=t>>>31,e},n.toHexString=function(t){return t.toString(16)},n.toBinaryString=function(t){return String(parseInt(String(t),2))},n.bitCount=function(t){return t=t-(t>>>1&1431655765),t=(t&858993459)+(t>>>2&858993459),t=t+(t>>>4)&252645135,t=t+(t>>>8),t=t+(t>>>16),t&63},n.truncDivision=function(t,e){return Math.trunc(t/e)},n.parseInt=function(t,e){return e===void 0&&(e=void 0),parseInt(t,e)},n.MIN_VALUE_32_BITS=-2147483648,n.MAX_VALUE=Number.MAX_SAFE_INTEGER,n}(),$n=function(){function n(t,e){t===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=t,e==null?this.bits=n.makeArray(t):this.bits=e)}return n.prototype.getSize=function(){return this.size},n.prototype.getSizeInBytes=function(){return Math.floor((this.size+7)/8)},n.prototype.ensureCapacity=function(t){if(t>this.bits.length*32){var e=n.makeArray(t);je.arraycopy(this.bits,0,e,0,this.bits.length),this.bits=e}},n.prototype.get=function(t){return(this.bits[Math.floor(t/32)]&1<<(t&31))!==0},n.prototype.set=function(t){this.bits[Math.floor(t/32)]|=1<<(t&31)},n.prototype.flip=function(t){this.bits[Math.floor(t/32)]^=1<<(t&31)},n.prototype.getNextSet=function(t){var e=this.size;if(t>=e)return e;var r=this.bits,i=Math.floor(t/32),a=r[i];a&=~((1<<(t&31))-1);for(var s=r.length;a===0;){if(++i===s)return e;a=r[i]}var l=i*32+Zt.numberOfTrailingZeros(a);return l>e?e:l},n.prototype.getNextUnset=function(t){var e=this.size;if(t>=e)return e;var r=this.bits,i=Math.floor(t/32),a=~r[i];a&=~((1<<(t&31))-1);for(var s=r.length;a===0;){if(++i===s)return e;a=~r[i]}var l=i*32+Zt.numberOfTrailingZeros(a);return l>e?e:l},n.prototype.setBulk=function(t,e){this.bits[Math.floor(t/32)]=e},n.prototype.setRange=function(t,e){if(e<t||t<0||e>this.size)throw new kt;if(e!==t){e--;for(var r=Math.floor(t/32),i=Math.floor(e/32),a=this.bits,s=r;s<=i;s++){var l=s>r?0:t&31,c=s<i?31:e&31,f=(2<<c)-(1<<l);a[s]|=f}}},n.prototype.clear=function(){for(var t=this.bits.length,e=this.bits,r=0;r<t;r++)e[r]=0},n.prototype.isRange=function(t,e,r){if(e<t||t<0||e>this.size)throw new kt;if(e===t)return!0;e--;for(var i=Math.floor(t/32),a=Math.floor(e/32),s=this.bits,l=i;l<=a;l++){var c=l>i?0:t&31,f=l<a?31:e&31,d=(2<<f)-(1<<c)&4294967295;if((s[l]&d)!==(r?d:0))return!1}return!0},n.prototype.appendBit=function(t){this.ensureCapacity(this.size+1),t&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++},n.prototype.appendBits=function(t,e){if(e<0||e>32)throw new kt("Num bits must be between 0 and 32");this.ensureCapacity(this.size+e);for(var r=e;r>0;r--)this.appendBit((t>>r-1&1)===1)},n.prototype.appendBitArray=function(t){var e=t.size;this.ensureCapacity(this.size+e);for(var r=0;r<e;r++)this.appendBit(t.get(r))},n.prototype.xor=function(t){if(this.size!==t.size)throw new kt("Sizes don't match");for(var e=this.bits,r=0,i=e.length;r<i;r++)e[r]^=t.bits[r]},n.prototype.toBytes=function(t,e,r,i){for(var a=0;a<i;a++){for(var s=0,l=0;l<8;l++)this.get(t)&&(s|=1<<7-l),t++;e[r+a]=s}},n.prototype.getBitArray=function(){return this.bits},n.prototype.reverse=function(){for(var t=new Int32Array(this.bits.length),e=Math.floor((this.size-1)/32),r=e+1,i=this.bits,a=0;a<r;a++){var s=i[a];s=s>>1&1431655765|(s&1431655765)<<1,s=s>>2&858993459|(s&858993459)<<2,s=s>>4&252645135|(s&252645135)<<4,s=s>>8&16711935|(s&16711935)<<8,s=s>>16&65535|(s&65535)<<16,t[e-a]=s}if(this.size!==r*32){for(var l=r*32-this.size,c=t[0]>>>l,a=1;a<r;a++){var f=t[a];c|=f<<32-l,t[a-1]=c,c=f>>>l}t[r-1]=c}this.bits=t},n.makeArray=function(t){return new Int32Array(Math.floor((t+31)/32))},n.prototype.equals=function(t){if(!(t instanceof n))return!1;var e=t;return this.size===e.size&&Dn.equals(this.bits,e.bits)},n.prototype.hashCode=function(){return 31*this.size+Dn.hashCode(this.bits)},n.prototype.toString=function(){for(var t="",e=0,r=this.size;e<r;e++)(e&7)===0&&(t+=" "),t+=this.get(e)?"X":".";return t},n.prototype.clone=function(){return new n(this.size,this.bits.slice())},n.prototype.toArray=function(){for(var t=[],e=0,r=this.size;e<r;e++)t.push(this.get(e));return t},n}(),Ly;(function(n){n[n.OTHER=0]="OTHER",n[n.PURE_BARCODE=1]="PURE_BARCODE",n[n.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",n[n.TRY_HARDER=3]="TRY_HARDER",n[n.CHARACTER_SET=4]="CHARACTER_SET",n[n.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",n[n.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",n[n.ENABLE_CODE_39_EXTENDED_MODE=7]="ENABLE_CODE_39_EXTENDED_MODE",n[n.ASSUME_GS1=8]="ASSUME_GS1",n[n.RETURN_CODABAR_START_END=9]="RETURN_CODABAR_START_END",n[n.NEED_RESULT_POINT_CALLBACK=10]="NEED_RESULT_POINT_CALLBACK",n[n.ALLOWED_EAN_EXTENSIONS=11]="ALLOWED_EAN_EXTENSIONS"})(Ly||(Ly={}));const Ye=Ly;var ck=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),xt=function(n){ck(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.getFormatInstance=function(){return new t},t.kind="FormatException",t}(Br),fk=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Ce;(function(n){n[n.Cp437=0]="Cp437",n[n.ISO8859_1=1]="ISO8859_1",n[n.ISO8859_2=2]="ISO8859_2",n[n.ISO8859_3=3]="ISO8859_3",n[n.ISO8859_4=4]="ISO8859_4",n[n.ISO8859_5=5]="ISO8859_5",n[n.ISO8859_6=6]="ISO8859_6",n[n.ISO8859_7=7]="ISO8859_7",n[n.ISO8859_8=8]="ISO8859_8",n[n.ISO8859_9=9]="ISO8859_9",n[n.ISO8859_10=10]="ISO8859_10",n[n.ISO8859_11=11]="ISO8859_11",n[n.ISO8859_13=12]="ISO8859_13",n[n.ISO8859_14=13]="ISO8859_14",n[n.ISO8859_15=14]="ISO8859_15",n[n.ISO8859_16=15]="ISO8859_16",n[n.SJIS=16]="SJIS",n[n.Cp1250=17]="Cp1250",n[n.Cp1251=18]="Cp1251",n[n.Cp1252=19]="Cp1252",n[n.Cp1256=20]="Cp1256",n[n.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",n[n.UTF8=22]="UTF8",n[n.ASCII=23]="ASCII",n[n.Big5=24]="Big5",n[n.GB18030=25]="GB18030",n[n.EUC_KR=26]="EUC_KR"})(Ce||(Ce={}));var Rn=function(){function n(t,e,r){for(var i,a,s=[],l=3;l<arguments.length;l++)s[l-3]=arguments[l];this.valueIdentifier=t,this.name=r,typeof e=="number"?this.values=Int32Array.from([e]):this.values=e,this.otherEncodingNames=s,n.VALUE_IDENTIFIER_TO_ECI.set(t,this),n.NAME_TO_ECI.set(r,this);for(var c=this.values,f=0,d=c.length;f!==d;f++){var g=c[f];n.VALUES_TO_ECI.set(g,this)}try{for(var m=fk(s),v=m.next();!v.done;v=m.next()){var _=v.value;n.NAME_TO_ECI.set(_,this)}}catch(w){i={error:w}}finally{try{v&&!v.done&&(a=m.return)&&a.call(m)}finally{if(i)throw i.error}}}return n.prototype.getValueIdentifier=function(){return this.valueIdentifier},n.prototype.getName=function(){return this.name},n.prototype.getValue=function(){return this.values[0]},n.getCharacterSetECIByValue=function(t){if(t<0||t>=900)throw new xt("incorect value");var e=n.VALUES_TO_ECI.get(t);if(e===void 0)throw new xt("incorect value");return e},n.getCharacterSetECIByName=function(t){var e=n.NAME_TO_ECI.get(t);if(e===void 0)throw new xt("incorect value");return e},n.prototype.equals=function(t){if(!(t instanceof n))return!1;var e=t;return this.getName()===e.getName()},n.VALUE_IDENTIFIER_TO_ECI=new Map,n.VALUES_TO_ECI=new Map,n.NAME_TO_ECI=new Map,n.Cp437=new n(Ce.Cp437,Int32Array.from([0,2]),"Cp437"),n.ISO8859_1=new n(Ce.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),n.ISO8859_2=new n(Ce.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),n.ISO8859_3=new n(Ce.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),n.ISO8859_4=new n(Ce.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),n.ISO8859_5=new n(Ce.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),n.ISO8859_6=new n(Ce.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),n.ISO8859_7=new n(Ce.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),n.ISO8859_8=new n(Ce.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),n.ISO8859_9=new n(Ce.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),n.ISO8859_10=new n(Ce.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),n.ISO8859_11=new n(Ce.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),n.ISO8859_13=new n(Ce.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),n.ISO8859_14=new n(Ce.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),n.ISO8859_15=new n(Ce.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),n.ISO8859_16=new n(Ce.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),n.SJIS=new n(Ce.SJIS,20,"SJIS","Shift_JIS"),n.Cp1250=new n(Ce.Cp1250,21,"Cp1250","windows-1250"),n.Cp1251=new n(Ce.Cp1251,22,"Cp1251","windows-1251"),n.Cp1252=new n(Ce.Cp1252,23,"Cp1252","windows-1252"),n.Cp1256=new n(Ce.Cp1256,24,"Cp1256","windows-1256"),n.UnicodeBigUnmarked=new n(Ce.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),n.UTF8=new n(Ce.UTF8,26,"UTF8","UTF-8"),n.ASCII=new n(Ce.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),n.Big5=new n(Ce.Big5,28,"Big5"),n.GB18030=new n(Ce.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),n.EUC_KR=new n(Ce.EUC_KR,30,"EUC_KR","EUC-KR"),n}(),hk=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),b1=function(n){hk(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.kind="UnsupportedOperationException",t}(Br),_i=function(){function n(){}return n.decode=function(t,e){var r=this.encodingName(e);return this.customDecoder?this.customDecoder(t,r):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(r)?this.decodeFallback(t,r):new TextDecoder(r).decode(t)},n.shouldDecodeOnFallback=function(t){return!n.isBrowser()&&t==="ISO-8859-1"},n.encode=function(t,e){var r=this.encodingName(e);return this.customEncoder?this.customEncoder(t,r):typeof TextEncoder>"u"?this.encodeFallback(t):new TextEncoder().encode(t)},n.isBrowser=function(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"},n.encodingName=function(t){return typeof t=="string"?t:t.getName()},n.encodingCharacterSet=function(t){return t instanceof Rn?t:Rn.getCharacterSetECIByName(t)},n.decodeFallback=function(t,e){var r=this.encodingCharacterSet(e);if(n.isDecodeFallbackSupported(r)){for(var i="",a=0,s=t.length;a<s;a++){var l=t[a].toString(16);l.length<2&&(l="0"+l),i+="%"+l}return decodeURIComponent(i)}if(r.equals(Rn.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(t.buffer));throw new b1("Encoding "+this.encodingName(e)+" not supported by fallback.")},n.isDecodeFallbackSupported=function(t){return t.equals(Rn.UTF8)||t.equals(Rn.ISO8859_1)||t.equals(Rn.ASCII)},n.encodeFallback=function(t){for(var e=btoa(unescape(encodeURIComponent(t))),r=e.split(""),i=[],a=0;a<r.length;a++)i.push(r[a].charCodeAt(0));return new Uint8Array(i)},n}(),oe=function(){function n(){}return n.castAsNonUtf8Char=function(t,e){e===void 0&&(e=null);var r=e?e.getName():this.ISO88591;return _i.decode(new Uint8Array([t]),r)},n.guessEncoding=function(t,e){if(e!=null&&e.get(Ye.CHARACTER_SET)!==void 0)return e.get(Ye.CHARACTER_SET).toString();for(var r=t.length,i=!0,a=!0,s=!0,l=0,c=0,f=0,d=0,g=0,m=0,v=0,_=0,w=0,b=0,C=0,I=t.length>3&&t[0]===239&&t[1]===187&&t[2]===191,R=0;R<r&&(i||a||s);R++){var M=t[R]&255;s&&(l>0?(M&128)===0?s=!1:l--:(M&128)!==0&&((M&64)===0?s=!1:(l++,(M&32)===0?c++:(l++,(M&16)===0?f++:(l++,(M&8)===0?d++:s=!1))))),i&&(M>127&&M<160?i=!1:M>159&&(M<192||M===215||M===247)&&C++),a&&(g>0?M<64||M===127||M>252?a=!1:g--:M===128||M===160||M>239?a=!1:M>160&&M<224?(m++,_=0,v++,v>w&&(w=v)):M>127?(g++,v=0,_++,_>b&&(b=_)):(v=0,_=0))}return s&&l>0&&(s=!1),a&&g>0&&(a=!1),s&&(I||c+f+d>0)?n.UTF8:a&&(n.ASSUME_SHIFT_JIS||w>=3||b>=3)?n.SHIFT_JIS:i&&a?w===2&&m===2||C*10>=r?n.SHIFT_JIS:n.ISO88591:i?n.ISO88591:a?n.SHIFT_JIS:s?n.UTF8:n.PLATFORM_DEFAULT_ENCODING},n.format=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];var i=-1;function a(l,c,f,d,g,m){if(l==="%%")return"%";if(e[++i]!==void 0){l=d?parseInt(d.substr(1)):void 0;var v=g?parseInt(g.substr(1)):void 0,_;switch(m){case"s":_=e[i];break;case"c":_=e[i][0];break;case"f":_=parseFloat(e[i]).toFixed(l);break;case"p":_=parseFloat(e[i]).toPrecision(l);break;case"e":_=parseFloat(e[i]).toExponential(l);break;case"x":_=parseInt(e[i]).toString(v||16);break;case"d":_=parseFloat(parseInt(e[i],v||10).toPrecision(l)).toFixed(0);break}_=typeof _=="object"?JSON.stringify(_):(+_).toString(v);for(var w=parseInt(f),b=f&&f[0]+""=="0"?"0":" ";_.length<w;)_=c!==void 0?_+b:b+_;return _}}var s=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return t.replace(s,a)},n.getBytes=function(t,e){return _i.encode(t,e)},n.getCharCode=function(t,e){return e===void 0&&(e=0),t.charCodeAt(e)},n.getCharAt=function(t){return String.fromCharCode(t)},n.SHIFT_JIS=Rn.SJIS.getName(),n.GB2312="GB2312",n.ISO88591=Rn.ISO8859_1.getName(),n.EUC_JP="EUC_JP",n.UTF8=Rn.UTF8.getName(),n.PLATFORM_DEFAULT_ENCODING=n.UTF8,n.ASSUME_SHIFT_JIS=!1,n}(),Wt=function(){function n(t){t===void 0&&(t=""),this.value=t}return n.prototype.enableDecoding=function(t){return this.encoding=t,this},n.prototype.append=function(t){return typeof t=="string"?this.value+=t.toString():this.encoding?this.value+=oe.castAsNonUtf8Char(t,this.encoding):this.value+=String.fromCharCode(t),this},n.prototype.appendChars=function(t,e,r){for(var i=e;e<e+r;i++)this.append(t[i]);return this},n.prototype.length=function(){return this.value.length},n.prototype.charAt=function(t){return this.value.charAt(t)},n.prototype.deleteCharAt=function(t){this.value=this.value.substr(0,t)+this.value.substring(t+1)},n.prototype.setCharAt=function(t,e){this.value=this.value.substr(0,t)+e+this.value.substr(t+1)},n.prototype.substring=function(t,e){return this.value.substring(t,e)},n.prototype.setLengthToZero=function(){this.value=""},n.prototype.toString=function(){return this.value},n.prototype.insert=function(t,e){this.value=this.value.substring(0,t)+e+this.value.substring(t)},n}(),ya=function(){function n(t,e,r,i){if(this.width=t,this.height=e,this.rowSize=r,this.bits=i,e==null&&(e=t),this.height=e,t<1||e<1)throw new kt("Both dimensions must be greater than 0");r==null&&(r=Math.floor((t+31)/32)),this.rowSize=r,i==null&&(this.bits=new Int32Array(this.rowSize*this.height))}return n.parseFromBooleanArray=function(t){for(var e=t.length,r=t[0].length,i=new n(r,e),a=0;a<e;a++)for(var s=t[a],l=0;l<r;l++)s[l]&&i.set(l,a);return i},n.parseFromString=function(t,e,r){if(t===null)throw new kt("stringRepresentation cannot be null");for(var i=new Array(t.length),a=0,s=0,l=-1,c=0,f=0;f<t.length;)if(t.charAt(f)===`
`||t.charAt(f)==="\r"){if(a>s){if(l===-1)l=a-s;else if(a-s!==l)throw new kt("row lengths do not match");s=a,c++}f++}else if(t.substring(f,f+e.length)===e)f+=e.length,i[a]=!0,a++;else if(t.substring(f,f+r.length)===r)f+=r.length,i[a]=!1,a++;else throw new kt("illegal character encountered: "+t.substring(f));if(a>s){if(l===-1)l=a-s;else if(a-s!==l)throw new kt("row lengths do not match");c++}for(var d=new n(l,c),g=0;g<a;g++)i[g]&&d.set(Math.floor(g%l),Math.floor(g/l));return d},n.prototype.get=function(t,e){var r=e*this.rowSize+Math.floor(t/32);return(this.bits[r]>>>(t&31)&1)!==0},n.prototype.set=function(t,e){var r=e*this.rowSize+Math.floor(t/32);this.bits[r]|=1<<(t&31)&4294967295},n.prototype.unset=function(t,e){var r=e*this.rowSize+Math.floor(t/32);this.bits[r]&=~(1<<(t&31)&4294967295)},n.prototype.flip=function(t,e){var r=e*this.rowSize+Math.floor(t/32);this.bits[r]^=1<<(t&31)&4294967295},n.prototype.xor=function(t){if(this.width!==t.getWidth()||this.height!==t.getHeight()||this.rowSize!==t.getRowSize())throw new kt("input matrix dimensions do not match");for(var e=new $n(Math.floor(this.width/32)+1),r=this.rowSize,i=this.bits,a=0,s=this.height;a<s;a++)for(var l=a*r,c=t.getRow(a,e).getBitArray(),f=0;f<r;f++)i[l+f]^=c[f]},n.prototype.clear=function(){for(var t=this.bits,e=t.length,r=0;r<e;r++)t[r]=0},n.prototype.setRegion=function(t,e,r,i){if(e<0||t<0)throw new kt("Left and top must be nonnegative");if(i<1||r<1)throw new kt("Height and width must be at least 1");var a=t+r,s=e+i;if(s>this.height||a>this.width)throw new kt("The region must fit inside the matrix");for(var l=this.rowSize,c=this.bits,f=e;f<s;f++)for(var d=f*l,g=t;g<a;g++)c[d+Math.floor(g/32)]|=1<<(g&31)&4294967295},n.prototype.getRow=function(t,e){e==null||e.getSize()<this.width?e=new $n(this.width):e.clear();for(var r=this.rowSize,i=this.bits,a=t*r,s=0;s<r;s++)e.setBulk(s*32,i[a+s]);return e},n.prototype.setRow=function(t,e){je.arraycopy(e.getBitArray(),0,this.bits,t*this.rowSize,this.rowSize)},n.prototype.rotate180=function(){for(var t=this.getWidth(),e=this.getHeight(),r=new $n(t),i=new $n(t),a=0,s=Math.floor((e+1)/2);a<s;a++)r=this.getRow(a,r),i=this.getRow(e-1-a,i),r.reverse(),i.reverse(),this.setRow(a,i),this.setRow(e-1-a,r)},n.prototype.getEnclosingRectangle=function(){for(var t=this.width,e=this.height,r=this.rowSize,i=this.bits,a=t,s=e,l=-1,c=-1,f=0;f<e;f++)for(var d=0;d<r;d++){var g=i[f*r+d];if(g!==0){if(f<s&&(s=f),f>c&&(c=f),d*32<a){for(var m=0;(g<<31-m&4294967295)===0;)m++;d*32+m<a&&(a=d*32+m)}if(d*32+31>l){for(var m=31;!(g>>>m);)m--;d*32+m>l&&(l=d*32+m)}}}return l<a||c<s?null:Int32Array.from([a,s,l-a+1,c-s+1])},n.prototype.getTopLeftOnBit=function(){for(var t=this.rowSize,e=this.bits,r=0;r<e.length&&e[r]===0;)r++;if(r===e.length)return null;for(var i=r/t,a=r%t*32,s=e[r],l=0;(s<<31-l&4294967295)===0;)l++;return a+=l,Int32Array.from([a,i])},n.prototype.getBottomRightOnBit=function(){for(var t=this.rowSize,e=this.bits,r=e.length-1;r>=0&&e[r]===0;)r--;if(r<0)return null;for(var i=Math.floor(r/t),a=Math.floor(r%t)*32,s=e[r],l=31;!(s>>>l);)l--;return a+=l,Int32Array.from([a,i])},n.prototype.getWidth=function(){return this.width},n.prototype.getHeight=function(){return this.height},n.prototype.getRowSize=function(){return this.rowSize},n.prototype.equals=function(t){if(!(t instanceof n))return!1;var e=t;return this.width===e.width&&this.height===e.height&&this.rowSize===e.rowSize&&Dn.equals(this.bits,e.bits)},n.prototype.hashCode=function(){var t=this.width;return t=31*t+this.width,t=31*t+this.height,t=31*t+this.rowSize,t=31*t+Dn.hashCode(this.bits),t},n.prototype.toString=function(t,e,r){return t===void 0&&(t="X "),e===void 0&&(e="  "),r===void 0&&(r=`
`),this.buildToString(t,e,r)},n.prototype.buildToString=function(t,e,r){for(var i=new Wt,a=0,s=this.height;a<s;a++){for(var l=0,c=this.width;l<c;l++)i.append(this.get(l,a)?t:e);i.append(r)}return i.toString()},n.prototype.clone=function(){return new n(this.width,this.height,this.rowSize,this.bits.slice())},n}(),dk=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),ot=function(n){dk(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.getNotFoundInstance=function(){return new t},t.kind="NotFoundException",t}(Br),gk=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),pk=function(n){gk(t,n);function t(e){var r=n.call(this,e)||this;return r.luminances=t.EMPTY,r.buckets=new Int32Array(t.LUMINANCE_BUCKETS),r}return t.prototype.getBlackRow=function(e,r){var i=this.getLuminanceSource(),a=i.getWidth();r==null||r.getSize()<a?r=new $n(a):r.clear(),this.initArrays(a);for(var s=i.getRow(e,this.luminances),l=this.buckets,c=0;c<a;c++)l[(s[c]&255)>>t.LUMINANCE_SHIFT]++;var f=t.estimateBlackPoint(l);if(a<3)for(var c=0;c<a;c++)(s[c]&255)<f&&r.set(c);else for(var d=s[0]&255,g=s[1]&255,c=1;c<a-1;c++){var m=s[c+1]&255;(g*4-d-m)/2<f&&r.set(c),d=g,g=m}return r},t.prototype.getBlackMatrix=function(){var e=this.getLuminanceSource(),r=e.getWidth(),i=e.getHeight(),a=new ya(r,i);this.initArrays(r);for(var s=this.buckets,l=1;l<5;l++)for(var c=Math.floor(i*l/5),f=e.getRow(c,this.luminances),d=Math.floor(r*4/5),g=Math.floor(r/5);g<d;g++){var m=f[g]&255;s[m>>t.LUMINANCE_SHIFT]++}for(var v=t.estimateBlackPoint(s),_=e.getMatrix(),l=0;l<i;l++)for(var w=l*r,g=0;g<r;g++){var m=_[w+g]&255;m<v&&a.set(g,l)}return a},t.prototype.createBinarizer=function(e){return new t(e)},t.prototype.initArrays=function(e){this.luminances.length<e&&(this.luminances=new Uint8ClampedArray(e));for(var r=this.buckets,i=0;i<t.LUMINANCE_BUCKETS;i++)r[i]=0},t.estimateBlackPoint=function(e){for(var r=e.length,i=0,a=0,s=0,l=0;l<r;l++)e[l]>s&&(a=l,s=e[l]),e[l]>i&&(i=e[l]);for(var c=0,f=0,l=0;l<r;l++){var d=l-a,g=e[l]*d*d;g>f&&(c=l,f=g)}if(a>c){var m=a;a=c,c=m}if(c-a<=r/16)throw new ot;for(var v=c-1,_=-1,l=c-1;l>a;l--){var w=l-a,g=w*w*(c-l)*(i-e[l]);g>_&&(v=l,_=g)}return v<<t.LUMINANCE_SHIFT},t.LUMINANCE_BITS=5,t.LUMINANCE_SHIFT=8-t.LUMINANCE_BITS,t.LUMINANCE_BUCKETS=1<<t.LUMINANCE_BITS,t.EMPTY=Uint8ClampedArray.from([0]),t}(sk),mk=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),vk=function(n){mk(t,n);function t(e){var r=n.call(this,e)||this;return r.matrix=null,r}return t.prototype.getBlackMatrix=function(){if(this.matrix!==null)return this.matrix;var e=this.getLuminanceSource(),r=e.getWidth(),i=e.getHeight();if(r>=t.MINIMUM_DIMENSION&&i>=t.MINIMUM_DIMENSION){var a=e.getMatrix(),s=r>>t.BLOCK_SIZE_POWER;(r&t.BLOCK_SIZE_MASK)!==0&&s++;var l=i>>t.BLOCK_SIZE_POWER;(i&t.BLOCK_SIZE_MASK)!==0&&l++;var c=t.calculateBlackPoints(a,s,l,r,i),f=new ya(r,i);t.calculateThresholdForBlock(a,s,l,r,i,c,f),this.matrix=f}else this.matrix=n.prototype.getBlackMatrix.call(this);return this.matrix},t.prototype.createBinarizer=function(e){return new t(e)},t.calculateThresholdForBlock=function(e,r,i,a,s,l,c){for(var f=s-t.BLOCK_SIZE,d=a-t.BLOCK_SIZE,g=0;g<i;g++){var m=g<<t.BLOCK_SIZE_POWER;m>f&&(m=f);for(var v=t.cap(g,2,i-3),_=0;_<r;_++){var w=_<<t.BLOCK_SIZE_POWER;w>d&&(w=d);for(var b=t.cap(_,2,r-3),C=0,I=-2;I<=2;I++){var R=l[v+I];C+=R[b-2]+R[b-1]+R[b]+R[b+1]+R[b+2]}var M=C/25;t.thresholdBlock(e,w,m,M,a,c)}}},t.cap=function(e,r,i){return e<r?r:e>i?i:e},t.thresholdBlock=function(e,r,i,a,s,l){for(var c=0,f=i*s+r;c<t.BLOCK_SIZE;c++,f+=s)for(var d=0;d<t.BLOCK_SIZE;d++)(e[f+d]&255)<=a&&l.set(r+d,i+c)},t.calculateBlackPoints=function(e,r,i,a,s){for(var l=s-t.BLOCK_SIZE,c=a-t.BLOCK_SIZE,f=new Array(i),d=0;d<i;d++){f[d]=new Int32Array(r);var g=d<<t.BLOCK_SIZE_POWER;g>l&&(g=l);for(var m=0;m<r;m++){var v=m<<t.BLOCK_SIZE_POWER;v>c&&(v=c);for(var _=0,w=255,b=0,C=0,I=g*a+v;C<t.BLOCK_SIZE;C++,I+=a){for(var R=0;R<t.BLOCK_SIZE;R++){var M=e[I+R]&255;_+=M,M<w&&(w=M),M>b&&(b=M)}if(b-w>t.MIN_DYNAMIC_RANGE)for(C++,I+=a;C<t.BLOCK_SIZE;C++,I+=a)for(var R=0;R<t.BLOCK_SIZE;R++)_+=e[I+R]&255}var N=_>>t.BLOCK_SIZE_POWER*2;if(b-w<=t.MIN_DYNAMIC_RANGE&&(N=w/2,d>0&&m>0)){var k=(f[d-1][m]+2*f[d][m-1]+f[d-1][m-1])/4;w<k&&(N=k)}f[d][m]=N}}return f},t.BLOCK_SIZE_POWER=3,t.BLOCK_SIZE=1<<t.BLOCK_SIZE_POWER,t.BLOCK_SIZE_MASK=t.BLOCK_SIZE-1,t.MINIMUM_DIMENSION=t.BLOCK_SIZE*5,t.MIN_DYNAMIC_RANGE=24,t}(pk),Gg=function(){function n(t,e){this.width=t,this.height=e}return n.prototype.getWidth=function(){return this.width},n.prototype.getHeight=function(){return this.height},n.prototype.isCropSupported=function(){return!1},n.prototype.crop=function(t,e,r,i){throw new b1("This luminance source does not support cropping.")},n.prototype.isRotateSupported=function(){return!1},n.prototype.rotateCounterClockwise=function(){throw new b1("This luminance source does not support rotation by 90 degrees.")},n.prototype.rotateCounterClockwise45=function(){throw new b1("This luminance source does not support rotation by 45 degrees.")},n.prototype.toString=function(){for(var t=new Uint8ClampedArray(this.width),e=new Wt,r=0;r<this.height;r++){for(var i=this.getRow(r,t),a=0;a<this.width;a++){var s=i[a]&255,l=void 0;s<64?l="#":s<128?l="+":s<192?l=".":l=" ",e.append(l)}e.append(`
`)}return e.toString()},n}(),yk=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),p2=function(n){yk(t,n);function t(e){var r=n.call(this,e.getWidth(),e.getHeight())||this;return r.delegate=e,r}return t.prototype.getRow=function(e,r){for(var i=this.delegate.getRow(e,r),a=this.getWidth(),s=0;s<a;s++)i[s]=255-(i[s]&255);return i},t.prototype.getMatrix=function(){for(var e=this.delegate.getMatrix(),r=this.getWidth()*this.getHeight(),i=new Uint8ClampedArray(r),a=0;a<r;a++)i[a]=255-(e[a]&255);return i},t.prototype.isCropSupported=function(){return this.delegate.isCropSupported()},t.prototype.crop=function(e,r,i,a){return new t(this.delegate.crop(e,r,i,a))},t.prototype.isRotateSupported=function(){return this.delegate.isRotateSupported()},t.prototype.invert=function(){return this.delegate},t.prototype.rotateCounterClockwise=function(){return new t(this.delegate.rotateCounterClockwise())},t.prototype.rotateCounterClockwise45=function(){return new t(this.delegate.rotateCounterClockwise45())},t}(Gg),xk=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),_k=function(n){xk(t,n);function t(e,r){r===void 0&&(r=!1);var i=n.call(this,e.width,e.height)||this;return i.canvas=e,i.tempCanvasElement=null,i.buffer=t.makeBufferFromCanvasImageData(e,r),i}return t.makeBufferFromCanvasImageData=function(e,r){r===void 0&&(r=!1);var i=e.getContext("2d").getImageData(0,0,e.width,e.height);return t.toGrayscaleBuffer(i.data,e.width,e.height,r)},t.toGrayscaleBuffer=function(e,r,i,a){a===void 0&&(a=!1);var s=new Uint8ClampedArray(r*i);if(t.FRAME_INDEX=!t.FRAME_INDEX,t.FRAME_INDEX||!a)for(var l=0,c=0,f=e.length;l<f;l+=4,c++){var d=void 0,g=e[l+3];if(g===0)d=255;else{var m=e[l],v=e[l+1],_=e[l+2];d=306*m+601*v+117*_+512>>10}s[c]=d}else for(var l=0,c=0,w=e.length;l<w;l+=4,c++){var d=void 0,g=e[l+3];if(g===0)d=255;else{var m=e[l],v=e[l+1],_=e[l+2];d=306*m+601*v+117*_+512>>10}s[c]=255-d}return s},t.prototype.getRow=function(e,r){if(e<0||e>=this.getHeight())throw new kt("Requested row is outside the image: "+e);var i=this.getWidth(),a=e*i;return r===null?r=this.buffer.slice(a,a+i):(r.length<i&&(r=new Uint8ClampedArray(i)),r.set(this.buffer.slice(a,a+i))),r},t.prototype.getMatrix=function(){return this.buffer},t.prototype.isCropSupported=function(){return!0},t.prototype.crop=function(e,r,i,a){return n.prototype.crop.call(this,e,r,i,a),this},t.prototype.isRotateSupported=function(){return!0},t.prototype.rotateCounterClockwise=function(){return this.rotate(-90),this},t.prototype.rotateCounterClockwise45=function(){return this.rotate(-45),this},t.prototype.getTempCanvasElement=function(){if(this.tempCanvasElement===null){var e=this.canvas.ownerDocument.createElement("canvas");e.width=this.canvas.width,e.height=this.canvas.height,this.tempCanvasElement=e}return this.tempCanvasElement},t.prototype.rotate=function(e){var r=this.getTempCanvasElement(),i=r.getContext("2d"),a=e*t.DEGREE_TO_RADIANS,s=this.canvas.width,l=this.canvas.height,c=Math.ceil(Math.abs(Math.cos(a))*s+Math.abs(Math.sin(a))*l),f=Math.ceil(Math.abs(Math.sin(a))*s+Math.abs(Math.cos(a))*l);return r.width=c,r.height=f,i.translate(c/2,f/2),i.rotate(a),i.drawImage(this.canvas,s/-2,l/-2),this.buffer=t.makeBufferFromCanvasImageData(r),this},t.prototype.invert=function(){return new p2(this)},t.DEGREE_TO_RADIANS=Math.PI/180,t.FRAME_INDEX=!0,t}(Gg),Ak=function(){function n(t,e,r){this.deviceId=t,this.label=e,this.kind="videoinput",this.groupId=r||void 0}return n.prototype.toJSON=function(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}},n}(),_r=function(n,t,e,r){function i(a){return a instanceof e?a:new e(function(s){s(a)})}return new(e||(e=Promise))(function(a,s){function l(d){try{f(r.next(d))}catch(g){s(g)}}function c(d){try{f(r.throw(d))}catch(g){s(g)}}function f(d){d.done?a(d.value):i(d.value).then(l,c)}f((r=r.apply(n,t||[])).next())})},Ar=function(n,t){var e={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,i,a,s;return s={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function l(f){return function(d){return c([f,d])}}function c(f){if(r)throw new TypeError("Generator is already executing.");for(;e;)try{if(r=1,i&&(a=f[0]&2?i.return:f[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,f[1])).done)return a;switch(i=0,a&&(f=[f[0]&2,a.value]),f[0]){case 0:case 1:a=f;break;case 4:return e.label++,{value:f[1],done:!1};case 5:e.label++,i=f[1],f=[0];continue;case 7:f=e.ops.pop(),e.trys.pop();continue;default:if(a=e.trys,!(a=a.length>0&&a[a.length-1])&&(f[0]===6||f[0]===2)){e=0;continue}if(f[0]===3&&(!a||f[1]>a[0]&&f[1]<a[3])){e.label=f[1];break}if(f[0]===6&&e.label<a[1]){e.label=a[1],a=f;break}if(a&&e.label<a[2]){e.label=a[2],e.ops.push(f);break}a[2]&&e.ops.pop(),e.trys.pop();continue}f=t.call(n,e)}catch(d){f=[6,d],i=0}finally{r=a=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}},Ek=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Nc=function(){function n(t,e,r){e===void 0&&(e=500),this.reader=t,this.timeBetweenScansMillis=e,this._hints=r,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}return Object.defineProperty(n.prototype,"hasNavigator",{get:function(){return typeof navigator<"u"},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isMediaDevicesSuported",{get:function(){return this.hasNavigator&&!!navigator.mediaDevices},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"canEnumerateDevices",{get:function(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"timeBetweenDecodingAttempts",{get:function(){return this._timeBetweenDecodingAttempts},set:function(t){this._timeBetweenDecodingAttempts=t<0?0:t},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"hints",{get:function(){return this._hints},set:function(t){this._hints=t||null},enumerable:!1,configurable:!0}),n.prototype.listVideoInputDevices=function(){return _r(this,void 0,void 0,function(){var t,e,r,i,a,s,l,c,f,d,g,m;return Ar(this,function(v){switch(v.label){case 0:if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");return[4,navigator.mediaDevices.enumerateDevices()];case 1:t=v.sent(),e=[];try{for(r=Ek(t),i=r.next();!i.done;i=r.next())a=i.value,s=a.kind==="video"?"videoinput":a.kind,s==="videoinput"&&(l=a.deviceId||a.id,c=a.label||"Video device "+(e.length+1),f=a.groupId,d={deviceId:l,label:c,kind:s,groupId:f},e.push(d))}catch(_){g={error:_}}finally{try{i&&!i.done&&(m=r.return)&&m.call(r)}finally{if(g)throw g.error}}return[2,e]}})})},n.prototype.getVideoInputDevices=function(){return _r(this,void 0,void 0,function(){var t;return Ar(this,function(e){switch(e.label){case 0:return[4,this.listVideoInputDevices()];case 1:return t=e.sent(),[2,t.map(function(r){return new Ak(r.deviceId,r.label)})]}})})},n.prototype.findDeviceById=function(t){return _r(this,void 0,void 0,function(){var e;return Ar(this,function(r){switch(r.label){case 0:return[4,this.listVideoInputDevices()];case 1:return e=r.sent(),e?[2,e.find(function(i){return i.deviceId===t})]:[2,null]}})})},n.prototype.decodeFromInputVideoDevice=function(t,e){return _r(this,void 0,void 0,function(){return Ar(this,function(r){switch(r.label){case 0:return[4,this.decodeOnceFromVideoDevice(t,e)];case 1:return[2,r.sent()]}})})},n.prototype.decodeOnceFromVideoDevice=function(t,e){return _r(this,void 0,void 0,function(){var r,i;return Ar(this,function(a){switch(a.label){case 0:return this.reset(),t?r={deviceId:{exact:t}}:r={facingMode:"environment"},i={video:r},[4,this.decodeOnceFromConstraints(i,e)];case 1:return[2,a.sent()]}})})},n.prototype.decodeOnceFromConstraints=function(t,e){return _r(this,void 0,void 0,function(){var r;return Ar(this,function(i){switch(i.label){case 0:return[4,navigator.mediaDevices.getUserMedia(t)];case 1:return r=i.sent(),[4,this.decodeOnceFromStream(r,e)];case 2:return[2,i.sent()]}})})},n.prototype.decodeOnceFromStream=function(t,e){return _r(this,void 0,void 0,function(){var r,i;return Ar(this,function(a){switch(a.label){case 0:return this.reset(),[4,this.attachStreamToVideo(t,e)];case 1:return r=a.sent(),[4,this.decodeOnce(r)];case 2:return i=a.sent(),[2,i]}})})},n.prototype.decodeFromInputVideoDeviceContinuously=function(t,e,r){return _r(this,void 0,void 0,function(){return Ar(this,function(i){switch(i.label){case 0:return[4,this.decodeFromVideoDevice(t,e,r)];case 1:return[2,i.sent()]}})})},n.prototype.decodeFromVideoDevice=function(t,e,r){return _r(this,void 0,void 0,function(){var i,a;return Ar(this,function(s){switch(s.label){case 0:return t?i={deviceId:{exact:t}}:i={facingMode:"environment"},a={video:i},[4,this.decodeFromConstraints(a,e,r)];case 1:return[2,s.sent()]}})})},n.prototype.decodeFromConstraints=function(t,e,r){return _r(this,void 0,void 0,function(){var i;return Ar(this,function(a){switch(a.label){case 0:return[4,navigator.mediaDevices.getUserMedia(t)];case 1:return i=a.sent(),[4,this.decodeFromStream(i,e,r)];case 2:return[2,a.sent()]}})})},n.prototype.decodeFromStream=function(t,e,r){return _r(this,void 0,void 0,function(){var i;return Ar(this,function(a){switch(a.label){case 0:return this.reset(),[4,this.attachStreamToVideo(t,e)];case 1:return i=a.sent(),[4,this.decodeContinuously(i,r)];case 2:return[2,a.sent()]}})})},n.prototype.stopAsyncDecode=function(){this._stopAsyncDecode=!0},n.prototype.stopContinuousDecode=function(){this._stopContinuousDecode=!0},n.prototype.attachStreamToVideo=function(t,e){return _r(this,void 0,void 0,function(){var r;return Ar(this,function(i){switch(i.label){case 0:return r=this.prepareVideoElement(e),this.addVideoSource(r,t),this.videoElement=r,this.stream=t,[4,this.playVideoOnLoadAsync(r)];case 1:return i.sent(),[2,r]}})})},n.prototype.playVideoOnLoadAsync=function(t){var e=this;return new Promise(function(r,i){return e.playVideoOnLoad(t,function(){return r()})})},n.prototype.playVideoOnLoad=function(t,e){var r=this;this.videoEndedListener=function(){return r.stopStreams()},this.videoCanPlayListener=function(){return r.tryPlayVideo(t)},t.addEventListener("ended",this.videoEndedListener),t.addEventListener("canplay",this.videoCanPlayListener),t.addEventListener("playing",e),this.tryPlayVideo(t)},n.prototype.isVideoPlaying=function(t){return t.currentTime>0&&!t.paused&&!t.ended&&t.readyState>2},n.prototype.tryPlayVideo=function(t){return _r(this,void 0,void 0,function(){return Ar(this,function(e){switch(e.label){case 0:if(this.isVideoPlaying(t))return console.warn("Trying to play video that is already playing."),[2];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,t.play()];case 2:return e.sent(),[3,4];case 3:return e.sent(),console.warn("It was not possible to play the video."),[3,4];case 4:return[2]}})})},n.prototype.getMediaElement=function(t,e){var r=document.getElementById(t);if(!r)throw new Di("element with id '"+t+"' not found");if(r.nodeName.toLowerCase()!==e.toLowerCase())throw new Di("element with id '"+t+"' must be an "+e+" element");return r},n.prototype.decodeFromImage=function(t,e){if(!t&&!e)throw new Di("either imageElement with a src set or an url must be provided");return e&&!t?this.decodeFromImageUrl(e):this.decodeFromImageElement(t)},n.prototype.decodeFromVideo=function(t,e){if(!t&&!e)throw new Di("Either an element with a src set or an URL must be provided");return e&&!t?this.decodeFromVideoUrl(e):this.decodeFromVideoElement(t)},n.prototype.decodeFromVideoContinuously=function(t,e,r){if(t===void 0&&e===void 0)throw new Di("Either an element with a src set or an URL must be provided");return e&&!t?this.decodeFromVideoUrlContinuously(e,r):this.decodeFromVideoElementContinuously(t,r)},n.prototype.decodeFromImageElement=function(t){if(!t)throw new Di("An image element must be provided.");this.reset();var e=this.prepareImageElement(t);this.imageElement=e;var r;return this.isImageLoaded(e)?r=this.decodeOnce(e,!1,!0):r=this._decodeOnLoadImage(e),r},n.prototype.decodeFromVideoElement=function(t){var e=this._decodeFromVideoElementSetup(t);return this._decodeOnLoadVideo(e)},n.prototype.decodeFromVideoElementContinuously=function(t,e){var r=this._decodeFromVideoElementSetup(t);return this._decodeOnLoadVideoContinuously(r,e)},n.prototype._decodeFromVideoElementSetup=function(t){if(!t)throw new Di("A video element must be provided.");this.reset();var e=this.prepareVideoElement(t);return this.videoElement=e,e},n.prototype.decodeFromImageUrl=function(t){if(!t)throw new Di("An URL must be provided.");this.reset();var e=this.prepareImageElement();this.imageElement=e;var r=this._decodeOnLoadImage(e);return e.src=t,r},n.prototype.decodeFromVideoUrl=function(t){if(!t)throw new Di("An URL must be provided.");this.reset();var e=this.prepareVideoElement(),r=this.decodeFromVideoElement(e);return e.src=t,r},n.prototype.decodeFromVideoUrlContinuously=function(t,e){if(!t)throw new Di("An URL must be provided.");this.reset();var r=this.prepareVideoElement(),i=this.decodeFromVideoElementContinuously(r,e);return r.src=t,i},n.prototype._decodeOnLoadImage=function(t){var e=this;return new Promise(function(r,i){e.imageLoadedListener=function(){return e.decodeOnce(t,!1,!0).then(r,i)},t.addEventListener("load",e.imageLoadedListener)})},n.prototype._decodeOnLoadVideo=function(t){return _r(this,void 0,void 0,function(){return Ar(this,function(e){switch(e.label){case 0:return[4,this.playVideoOnLoadAsync(t)];case 1:return e.sent(),[4,this.decodeOnce(t)];case 2:return[2,e.sent()]}})})},n.prototype._decodeOnLoadVideoContinuously=function(t,e){return _r(this,void 0,void 0,function(){return Ar(this,function(r){switch(r.label){case 0:return[4,this.playVideoOnLoadAsync(t)];case 1:return r.sent(),this.decodeContinuously(t,e),[2]}})})},n.prototype.isImageLoaded=function(t){return!(!t.complete||t.naturalWidth===0)},n.prototype.prepareImageElement=function(t){var e;return typeof t>"u"&&(e=document.createElement("img"),e.width=200,e.height=200),typeof t=="string"&&(e=this.getMediaElement(t,"img")),t instanceof HTMLImageElement&&(e=t),e},n.prototype.prepareVideoElement=function(t){var e;return!t&&typeof document<"u"&&(e=document.createElement("video"),e.width=200,e.height=200),typeof t=="string"&&(e=this.getMediaElement(t,"video")),t instanceof HTMLVideoElement&&(e=t),e.setAttribute("autoplay","true"),e.setAttribute("muted","true"),e.setAttribute("playsinline","true"),e},n.prototype.decodeOnce=function(t,e,r){var i=this;e===void 0&&(e=!0),r===void 0&&(r=!0),this._stopAsyncDecode=!1;var a=function(s,l){if(i._stopAsyncDecode){l(new ot("Video stream has ended before any code could be detected.")),i._stopAsyncDecode=void 0;return}try{var c=i.decode(t);s(c)}catch(m){var f=e&&m instanceof ot,d=m instanceof Gn||m instanceof xt,g=d&&r;if(f||g)return setTimeout(a,i._timeBetweenDecodingAttempts,s,l);l(m)}};return new Promise(function(s,l){return a(s,l)})},n.prototype.decodeContinuously=function(t,e){var r=this;this._stopContinuousDecode=!1;var i=function(){if(r._stopContinuousDecode){r._stopContinuousDecode=void 0;return}try{var a=r.decode(t);e(a,null),setTimeout(i,r.timeBetweenScansMillis)}catch(c){e(null,c);var s=c instanceof Gn||c instanceof xt,l=c instanceof ot;(s||l)&&setTimeout(i,r._timeBetweenDecodingAttempts)}};i()},n.prototype.decode=function(t){var e=this.createBinaryBitmap(t);return this.decodeBitmap(e)},n.prototype.createBinaryBitmap=function(t){this.getCaptureCanvasContext(t);var e=!1;t instanceof HTMLVideoElement?(this.drawFrameOnCanvas(t),e=!0):this.drawImageOnCanvas(t);var r=this.getCaptureCanvas(t),i=new _k(r,e),a=new vk(i);return new ik(a)},n.prototype.getCaptureCanvasContext=function(t){if(!this.captureCanvasContext){var e=this.getCaptureCanvas(t),r=void 0;try{r=e.getContext("2d",{willReadFrequently:!0})}catch{r=e.getContext("2d")}this.captureCanvasContext=r}return this.captureCanvasContext},n.prototype.getCaptureCanvas=function(t){if(!this.captureCanvas){var e=this.createCaptureCanvas(t);this.captureCanvas=e}return this.captureCanvas},n.prototype.drawFrameOnCanvas=function(t,e,r){e===void 0&&(e={sx:0,sy:0,sWidth:t.videoWidth,sHeight:t.videoHeight,dx:0,dy:0,dWidth:t.videoWidth,dHeight:t.videoHeight}),r===void 0&&(r=this.captureCanvasContext),r.drawImage(t,e.sx,e.sy,e.sWidth,e.sHeight,e.dx,e.dy,e.dWidth,e.dHeight)},n.prototype.drawImageOnCanvas=function(t,e,r){e===void 0&&(e={sx:0,sy:0,sWidth:t.naturalWidth,sHeight:t.naturalHeight,dx:0,dy:0,dWidth:t.naturalWidth,dHeight:t.naturalHeight}),r===void 0&&(r=this.captureCanvasContext),r.drawImage(t,e.sx,e.sy,e.sWidth,e.sHeight,e.dx,e.dy,e.dWidth,e.dHeight)},n.prototype.decodeBitmap=function(t){return this.reader.decode(t,this._hints)},n.prototype.createCaptureCanvas=function(t){if(typeof document>"u")return this._destroyCaptureCanvas(),null;var e=document.createElement("canvas"),r,i;return typeof t<"u"&&(t instanceof HTMLVideoElement?(r=t.videoWidth,i=t.videoHeight):t instanceof HTMLImageElement&&(r=t.naturalWidth||t.width,i=t.naturalHeight||t.height)),e.style.width=r+"px",e.style.height=i+"px",e.width=r,e.height=i,e},n.prototype.stopStreams=function(){this.stream&&(this.stream.getVideoTracks().forEach(function(t){return t.stop()}),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()},n.prototype.reset=function(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()},n.prototype._destroyVideoElement=function(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)},n.prototype._destroyImageElement=function(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)},n.prototype._destroyCaptureCanvas=function(){this.captureCanvasContext=void 0,this.captureCanvas=void 0},n.prototype.addVideoSource=function(t,e){try{t.srcObject=e}catch{t.src=URL.createObjectURL(e)}},n.prototype.cleanVideoSource=function(t){try{t.srcObject=null}catch{t.src=""}this.videoElement.removeAttribute("src")},n}(),pr=function(){function n(t,e,r,i,a,s){r===void 0&&(r=e==null?0:8*e.length),s===void 0&&(s=je.currentTimeMillis()),this.text=t,this.rawBytes=e,this.numBits=r,this.resultPoints=i,this.format=a,this.timestamp=s,this.text=t,this.rawBytes=e,r==null?this.numBits=e==null?0:8*e.length:this.numBits=r,this.resultPoints=i,this.format=a,this.resultMetadata=null,s==null?this.timestamp=je.currentTimeMillis():this.timestamp=s}return n.prototype.getText=function(){return this.text},n.prototype.getRawBytes=function(){return this.rawBytes},n.prototype.getNumBits=function(){return this.numBits},n.prototype.getResultPoints=function(){return this.resultPoints},n.prototype.getBarcodeFormat=function(){return this.format},n.prototype.getResultMetadata=function(){return this.resultMetadata},n.prototype.putMetadata=function(t,e){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(t,e)},n.prototype.putAllMetadata=function(t){t!==null&&(this.resultMetadata===null?this.resultMetadata=t:this.resultMetadata=new Map(t))},n.prototype.addResultPoints=function(t){var e=this.resultPoints;if(e===null)this.resultPoints=t;else if(t!==null&&t.length>0){var r=new Array(e.length+t.length);je.arraycopy(e,0,r,0,e.length),je.arraycopy(t,0,r,e.length,t.length),this.resultPoints=r}},n.prototype.getTimestamp=function(){return this.timestamp},n.prototype.toString=function(){return this.text},n}(),By;(function(n){n[n.AZTEC=0]="AZTEC",n[n.CODABAR=1]="CODABAR",n[n.CODE_39=2]="CODE_39",n[n.CODE_93=3]="CODE_93",n[n.CODE_128=4]="CODE_128",n[n.DATA_MATRIX=5]="DATA_MATRIX",n[n.EAN_8=6]="EAN_8",n[n.EAN_13=7]="EAN_13",n[n.ITF=8]="ITF",n[n.MAXICODE=9]="MAXICODE",n[n.PDF_417=10]="PDF_417",n[n.QR_CODE=11]="QR_CODE",n[n.RSS_14=12]="RSS_14",n[n.RSS_EXPANDED=13]="RSS_EXPANDED",n[n.UPC_A=14]="UPC_A",n[n.UPC_E=15]="UPC_E",n[n.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(By||(By={}));const Pt=By;var Vy;(function(n){n[n.OTHER=0]="OTHER",n[n.ORIENTATION=1]="ORIENTATION",n[n.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",n[n.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",n[n.ISSUE_NUMBER=4]="ISSUE_NUMBER",n[n.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",n[n.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",n[n.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",n[n.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",n[n.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",n[n.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(Vy||(Vy={}));const rr=Vy;var $g=function(){function n(t,e,r,i,a,s){a===void 0&&(a=-1),s===void 0&&(s=-1),this.rawBytes=t,this.text=e,this.byteSegments=r,this.ecLevel=i,this.structuredAppendSequenceNumber=a,this.structuredAppendParity=s,this.numBits=t==null?0:8*t.length}return n.prototype.getRawBytes=function(){return this.rawBytes},n.prototype.getNumBits=function(){return this.numBits},n.prototype.setNumBits=function(t){this.numBits=t},n.prototype.getText=function(){return this.text},n.prototype.getByteSegments=function(){return this.byteSegments},n.prototype.getECLevel=function(){return this.ecLevel},n.prototype.getErrorsCorrected=function(){return this.errorsCorrected},n.prototype.setErrorsCorrected=function(t){this.errorsCorrected=t},n.prototype.getErasures=function(){return this.erasures},n.prototype.setErasures=function(t){this.erasures=t},n.prototype.getOther=function(){return this.other},n.prototype.setOther=function(t){this.other=t},n.prototype.hasStructuredAppend=function(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0},n.prototype.getStructuredAppendParity=function(){return this.structuredAppendParity},n.prototype.getStructuredAppendSequenceNumber=function(){return this.structuredAppendSequenceNumber},n}(),fh=function(){function n(){}return n.prototype.exp=function(t){return this.expTable[t]},n.prototype.log=function(t){if(t===0)throw new kt;return this.logTable[t]},n.addOrSubtract=function(t,e){return t^e},n}(),po=function(){function n(t,e){if(e.length===0)throw new kt;this.field=t;var r=e.length;if(r>1&&e[0]===0){for(var i=1;i<r&&e[i]===0;)i++;i===r?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(r-i),je.arraycopy(e,i,this.coefficients,0,this.coefficients.length))}else this.coefficients=e}return n.prototype.getCoefficients=function(){return this.coefficients},n.prototype.getDegree=function(){return this.coefficients.length-1},n.prototype.isZero=function(){return this.coefficients[0]===0},n.prototype.getCoefficient=function(t){return this.coefficients[this.coefficients.length-1-t]},n.prototype.evaluateAt=function(t){if(t===0)return this.getCoefficient(0);var e=this.coefficients,r;if(t===1){r=0;for(var i=0,a=e.length;i!==a;i++){var s=e[i];r=fh.addOrSubtract(r,s)}return r}r=e[0];for(var l=e.length,c=this.field,i=1;i<l;i++)r=fh.addOrSubtract(c.multiply(t,r),e[i]);return r},n.prototype.addOrSubtract=function(t){if(!this.field.equals(t.field))throw new kt("GenericGFPolys do not have same GenericGF field");if(this.isZero())return t;if(t.isZero())return this;var e=this.coefficients,r=t.coefficients;if(e.length>r.length){var i=e;e=r,r=i}var a=new Int32Array(r.length),s=r.length-e.length;je.arraycopy(r,0,a,0,s);for(var l=s;l<r.length;l++)a[l]=fh.addOrSubtract(e[l-s],r[l]);return new n(this.field,a)},n.prototype.multiply=function(t){if(!this.field.equals(t.field))throw new kt("GenericGFPolys do not have same GenericGF field");if(this.isZero()||t.isZero())return this.field.getZero();for(var e=this.coefficients,r=e.length,i=t.coefficients,a=i.length,s=new Int32Array(r+a-1),l=this.field,c=0;c<r;c++)for(var f=e[c],d=0;d<a;d++)s[c+d]=fh.addOrSubtract(s[c+d],l.multiply(f,i[d]));return new n(l,s)},n.prototype.multiplyScalar=function(t){if(t===0)return this.field.getZero();if(t===1)return this;for(var e=this.coefficients.length,r=this.field,i=new Int32Array(e),a=this.coefficients,s=0;s<e;s++)i[s]=r.multiply(a[s],t);return new n(r,i)},n.prototype.multiplyByMonomial=function(t,e){if(t<0)throw new kt;if(e===0)return this.field.getZero();for(var r=this.coefficients,i=r.length,a=new Int32Array(i+t),s=this.field,l=0;l<i;l++)a[l]=s.multiply(r[l],e);return new n(s,a)},n.prototype.divide=function(t){if(!this.field.equals(t.field))throw new kt("GenericGFPolys do not have same GenericGF field");if(t.isZero())throw new kt("Divide by 0");for(var e=this.field,r=e.getZero(),i=this,a=t.getCoefficient(t.getDegree()),s=e.inverse(a);i.getDegree()>=t.getDegree()&&!i.isZero();){var l=i.getDegree()-t.getDegree(),c=e.multiply(i.getCoefficient(i.getDegree()),s),f=t.multiplyByMonomial(l,c),d=e.buildMonomial(l,c);r=r.addOrSubtract(d),i=i.addOrSubtract(f)}return[r,i]},n.prototype.toString=function(){for(var t="",e=this.getDegree();e>=0;e--){var r=this.getCoefficient(e);if(r!==0){if(r<0?(t+=" - ",r=-r):t.length>0&&(t+=" + "),e===0||r!==1){var i=this.field.log(r);i===0?t+="1":i===1?t+="a":(t+="a^",t+=i)}e!==0&&(e===1?t+="x":(t+="x^",t+=e))}}return t},n}(),wk=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),J3=function(n){wk(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.kind="ArithmeticException",t}(Br),bk=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Nr=function(n){bk(t,n);function t(e,r,i){var a=n.call(this)||this;a.primitive=e,a.size=r,a.generatorBase=i;for(var s=new Int32Array(r),l=1,c=0;c<r;c++)s[c]=l,l*=2,l>=r&&(l^=e,l&=r-1);a.expTable=s;for(var f=new Int32Array(r),c=0;c<r-1;c++)f[s[c]]=c;return a.logTable=f,a.zero=new po(a,Int32Array.from([0])),a.one=new po(a,Int32Array.from([1])),a}return t.prototype.getZero=function(){return this.zero},t.prototype.getOne=function(){return this.one},t.prototype.buildMonomial=function(e,r){if(e<0)throw new kt;if(r===0)return this.zero;var i=new Int32Array(e+1);return i[0]=r,new po(this,i)},t.prototype.inverse=function(e){if(e===0)throw new J3;return this.expTable[this.size-this.logTable[e]-1]},t.prototype.multiply=function(e,r){return e===0||r===0?0:this.expTable[(this.logTable[e]+this.logTable[r])%(this.size-1)]},t.prototype.getSize=function(){return this.size},t.prototype.getGeneratorBase=function(){return this.generatorBase},t.prototype.toString=function(){return"GF(0x"+Zt.toHexString(this.primitive)+","+this.size+")"},t.prototype.equals=function(e){return e===this},t.AZTEC_DATA_12=new t(4201,4096,1),t.AZTEC_DATA_10=new t(1033,1024,1),t.AZTEC_DATA_6=new t(67,64,1),t.AZTEC_PARAM=new t(19,16,1),t.QR_CODE_FIELD_256=new t(285,256,0),t.DATA_MATRIX_FIELD_256=new t(301,256,1),t.AZTEC_DATA_8=t.DATA_MATRIX_FIELD_256,t.MAXICODE_FIELD_64=t.AZTEC_DATA_6,t}(fh),Sk=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),K0=function(n){Sk(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.kind="ReedSolomonException",t}(Br),Tk=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),od=function(n){Tk(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.kind="IllegalStateException",t}(Br),qg=function(){function n(t){this.field=t}return n.prototype.decode=function(t,e){for(var r=this.field,i=new po(r,t),a=new Int32Array(e),s=!0,l=0;l<e;l++){var c=i.evaluateAt(r.exp(l+r.getGeneratorBase()));a[a.length-1-l]=c,c!==0&&(s=!1)}if(!s)for(var f=new po(r,a),d=this.runEuclideanAlgorithm(r.buildMonomial(e,1),f,e),g=d[0],m=d[1],v=this.findErrorLocations(g),_=this.findErrorMagnitudes(m,v),l=0;l<v.length;l++){var w=t.length-1-r.log(v[l]);if(w<0)throw new K0("Bad error location");t[w]=Nr.addOrSubtract(t[w],_[l])}},n.prototype.runEuclideanAlgorithm=function(t,e,r){if(t.getDegree()<e.getDegree()){var i=t;t=e,e=i}for(var a=this.field,s=t,l=e,c=a.getZero(),f=a.getOne();l.getDegree()>=(r/2|0);){var d=s,g=c;if(s=l,c=f,s.isZero())throw new K0("r_{i-1} was zero");l=d;for(var m=a.getZero(),v=s.getCoefficient(s.getDegree()),_=a.inverse(v);l.getDegree()>=s.getDegree()&&!l.isZero();){var w=l.getDegree()-s.getDegree(),b=a.multiply(l.getCoefficient(l.getDegree()),_);m=m.addOrSubtract(a.buildMonomial(w,b)),l=l.addOrSubtract(s.multiplyByMonomial(w,b))}if(f=m.multiply(c).addOrSubtract(g),l.getDegree()>=s.getDegree())throw new od("Division algorithm failed to reduce polynomial?")}var C=f.getCoefficient(0);if(C===0)throw new K0("sigmaTilde(0) was zero");var I=a.inverse(C),R=f.multiplyScalar(I),M=l.multiplyScalar(I);return[R,M]},n.prototype.findErrorLocations=function(t){var e=t.getDegree();if(e===1)return Int32Array.from([t.getCoefficient(1)]);for(var r=new Int32Array(e),i=0,a=this.field,s=1;s<a.getSize()&&i<e;s++)t.evaluateAt(s)===0&&(r[i]=a.inverse(s),i++);if(i!==e)throw new K0("Error locator degree does not match number of roots");return r},n.prototype.findErrorMagnitudes=function(t,e){for(var r=e.length,i=new Int32Array(r),a=this.field,s=0;s<r;s++){for(var l=a.inverse(e[s]),c=1,f=0;f<r;f++)if(s!==f){var d=a.multiply(e[f],l),g=(d&1)===0?d|1:d&-2;c=a.multiply(c,g)}i[s]=a.multiply(t.evaluateAt(l),a.inverse(c)),a.getGeneratorBase()!==0&&(i[s]=a.multiply(i[s],l))}return i},n}(),Jn;(function(n){n[n.UPPER=0]="UPPER",n[n.LOWER=1]="LOWER",n[n.MIXED=2]="MIXED",n[n.DIGIT=3]="DIGIT",n[n.PUNCT=4]="PUNCT",n[n.BINARY=5]="BINARY"})(Jn||(Jn={}));var oS=function(){function n(){}return n.prototype.decode=function(t){this.ddata=t;var e=t.getBits(),r=this.extractBits(e),i=this.correctBits(r),a=n.convertBoolArrayToByteArray(i),s=n.getEncodedData(i),l=new $g(a,s,null,null);return l.setNumBits(i.length),l},n.highLevelDecode=function(t){return this.getEncodedData(t)},n.getEncodedData=function(t){for(var e=t.length,r=Jn.UPPER,i=Jn.UPPER,a="",s=0;s<e;)if(i===Jn.BINARY){if(e-s<5)break;var l=n.readCode(t,s,5);if(s+=5,l===0){if(e-s<11)break;l=n.readCode(t,s,11)+31,s+=11}for(var c=0;c<l;c++){if(e-s<8){s=e;break}var f=n.readCode(t,s,8);a+=oe.castAsNonUtf8Char(f),s+=8}i=r}else{var d=i===Jn.DIGIT?4:5;if(e-s<d)break;var f=n.readCode(t,s,d);s+=d;var g=n.getCharacter(i,f);g.startsWith("CTRL_")?(r=i,i=n.getTable(g.charAt(5)),g.charAt(6)==="L"&&(r=i)):(a+=g,i=r)}return a},n.getTable=function(t){switch(t){case"L":return Jn.LOWER;case"P":return Jn.PUNCT;case"M":return Jn.MIXED;case"D":return Jn.DIGIT;case"B":return Jn.BINARY;case"U":default:return Jn.UPPER}},n.getCharacter=function(t,e){switch(t){case Jn.UPPER:return n.UPPER_TABLE[e];case Jn.LOWER:return n.LOWER_TABLE[e];case Jn.MIXED:return n.MIXED_TABLE[e];case Jn.PUNCT:return n.PUNCT_TABLE[e];case Jn.DIGIT:return n.DIGIT_TABLE[e];default:throw new od("Bad table")}},n.prototype.correctBits=function(t){var e,r;this.ddata.getNbLayers()<=2?(r=6,e=Nr.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(r=8,e=Nr.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(r=10,e=Nr.AZTEC_DATA_10):(r=12,e=Nr.AZTEC_DATA_12);var i=this.ddata.getNbDatablocks(),a=t.length/r;if(a<i)throw new xt;for(var s=t.length%r,l=new Int32Array(a),c=0;c<a;c++,s+=r)l[c]=n.readCode(t,s,r);try{var f=new qg(e);f.decode(l,a-i)}catch(b){throw new xt(b)}for(var d=(1<<r)-1,g=0,c=0;c<i;c++){var m=l[c];if(m===0||m===d)throw new xt;(m===1||m===d-1)&&g++}for(var v=new Array(i*r-g),_=0,c=0;c<i;c++){var m=l[c];if(m===1||m===d-1)v.fill(m>1,_,_+r-1),_+=r-1;else for(var w=r-1;w>=0;--w)v[_++]=(m&1<<w)!==0}return v},n.prototype.extractBits=function(t){var e=this.ddata.isCompact(),r=this.ddata.getNbLayers(),i=(e?11:14)+r*4,a=new Int32Array(i),s=new Array(this.totalBitsInLayer(r,e));if(e)for(var l=0;l<a.length;l++)a[l]=l;else for(var c=i+1+2*Zt.truncDivision(Zt.truncDivision(i,2)-1,15),f=i/2,d=Zt.truncDivision(c,2),l=0;l<f;l++){var g=l+Zt.truncDivision(l,15);a[f-l-1]=d-g-1,a[f+l]=d+g+1}for(var l=0,m=0;l<r;l++){for(var v=(r-l)*4+(e?9:12),_=l*2,w=i-1-_,b=0;b<v;b++)for(var C=b*2,I=0;I<2;I++)s[m+C+I]=t.get(a[_+I],a[_+b]),s[m+2*v+C+I]=t.get(a[_+b],a[w-I]),s[m+4*v+C+I]=t.get(a[w-I],a[w-b]),s[m+6*v+C+I]=t.get(a[w-b],a[_+I]);m+=v*8}return s},n.readCode=function(t,e,r){for(var i=0,a=e;a<e+r;a++)i<<=1,t[a]&&(i|=1);return i},n.readByte=function(t,e){var r=t.length-e;return r>=8?n.readCode(t,e,8):n.readCode(t,e,r)<<8-r},n.convertBoolArrayToByteArray=function(t){for(var e=new Uint8Array((t.length+7)/8),r=0;r<e.length;r++)e[r]=n.readByte(t,8*r);return e},n.prototype.totalBitsInLayer=function(t,e){return((e?88:112)+16*t)*t},n.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],n.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],n.MIXED_TABLE=["CTRL_PS"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~","","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],n.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],n.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"],n}(),he=function(){function n(){}return n.round=function(t){return isNaN(t)?0:t<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:t>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:t+(t<0?-.5:.5)|0},n.distance=function(t,e,r,i){var a=t-r,s=e-i;return Math.sqrt(a*a+s*s)},n.sum=function(t){for(var e=0,r=0,i=t.length;r!==i;r++){var a=t[r];e+=a}return e},n}(),Fy=function(){function n(){}return n.floatToIntBits=function(t){return t},n.MAX_VALUE=Number.MAX_SAFE_INTEGER,n}(),Ct=function(){function n(t,e){this.x=t,this.y=e}return n.prototype.getX=function(){return this.x},n.prototype.getY=function(){return this.y},n.prototype.equals=function(t){if(t instanceof n){var e=t;return this.x===e.x&&this.y===e.y}return!1},n.prototype.hashCode=function(){return 31*Fy.floatToIntBits(this.x)+Fy.floatToIntBits(this.y)},n.prototype.toString=function(){return"("+this.x+","+this.y+")"},n.orderBestPatterns=function(t){var e=this.distance(t[0],t[1]),r=this.distance(t[1],t[2]),i=this.distance(t[0],t[2]),a,s,l;if(r>=e&&r>=i?(s=t[0],a=t[1],l=t[2]):i>=r&&i>=e?(s=t[1],a=t[0],l=t[2]):(s=t[2],a=t[0],l=t[1]),this.crossProductZ(a,s,l)<0){var c=a;a=l,l=c}t[0]=a,t[1]=s,t[2]=l},n.distance=function(t,e){return he.distance(t.x,t.y,e.x,e.y)},n.crossProductZ=function(t,e,r){var i=e.x,a=e.y;return(r.x-i)*(t.y-a)-(r.y-a)*(t.x-i)},n}(),m2=function(){function n(t,e){this.bits=t,this.points=e}return n.prototype.getBits=function(){return this.bits},n.prototype.getPoints=function(){return this.points},n}(),Ck=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Ik=function(n){Ck(t,n);function t(e,r,i,a,s){var l=n.call(this,e,r)||this;return l.compact=i,l.nbDatablocks=a,l.nbLayers=s,l}return t.prototype.getNbLayers=function(){return this.nbLayers},t.prototype.getNbDatablocks=function(){return this.nbDatablocks},t.prototype.isCompact=function(){return this.compact},t}(m2),jy=function(){function n(t,e,r,i){this.image=t,this.height=t.getHeight(),this.width=t.getWidth(),e==null&&(e=n.INIT_SIZE),r==null&&(r=t.getWidth()/2|0),i==null&&(i=t.getHeight()/2|0);var a=e/2|0;if(this.leftInit=r-a,this.rightInit=r+a,this.upInit=i-a,this.downInit=i+a,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new ot}return n.prototype.detect=function(){for(var t=this.leftInit,e=this.rightInit,r=this.upInit,i=this.downInit,a=!1,s=!0,l=!1,c=!1,f=!1,d=!1,g=!1,m=this.width,v=this.height;s;){s=!1;for(var _=!0;(_||!c)&&e<m;)_=this.containsBlackPoint(r,i,e,!1),_?(e++,s=!0,c=!0):c||e++;if(e>=m){a=!0;break}for(var w=!0;(w||!f)&&i<v;)w=this.containsBlackPoint(t,e,i,!0),w?(i++,s=!0,f=!0):f||i++;if(i>=v){a=!0;break}for(var b=!0;(b||!d)&&t>=0;)b=this.containsBlackPoint(r,i,t,!1),b?(t--,s=!0,d=!0):d||t--;if(t<0){a=!0;break}for(var C=!0;(C||!g)&&r>=0;)C=this.containsBlackPoint(t,e,r,!0),C?(r--,s=!0,g=!0):g||r--;if(r<0){a=!0;break}s&&(l=!0)}if(!a&&l){for(var I=e-t,R=null,M=1;R===null&&M<I;M++)R=this.getBlackPointOnSegment(t,i-M,t+M,i);if(R==null)throw new ot;for(var N=null,M=1;N===null&&M<I;M++)N=this.getBlackPointOnSegment(t,r+M,t+M,r);if(N==null)throw new ot;for(var k=null,M=1;k===null&&M<I;M++)k=this.getBlackPointOnSegment(e,r+M,e-M,r);if(k==null)throw new ot;for(var O=null,M=1;O===null&&M<I;M++)O=this.getBlackPointOnSegment(e,i-M,e-M,i);if(O==null)throw new ot;return this.centerEdges(O,R,k,N)}else throw new ot},n.prototype.getBlackPointOnSegment=function(t,e,r,i){for(var a=he.round(he.distance(t,e,r,i)),s=(r-t)/a,l=(i-e)/a,c=this.image,f=0;f<a;f++){var d=he.round(t+f*s),g=he.round(e+f*l);if(c.get(d,g))return new Ct(d,g)}return null},n.prototype.centerEdges=function(t,e,r,i){var a=t.getX(),s=t.getY(),l=e.getX(),c=e.getY(),f=r.getX(),d=r.getY(),g=i.getX(),m=i.getY(),v=n.CORR;return a<this.width/2?[new Ct(g-v,m+v),new Ct(l+v,c+v),new Ct(f-v,d-v),new Ct(a+v,s-v)]:[new Ct(g+v,m+v),new Ct(l+v,c-v),new Ct(f-v,d+v),new Ct(a-v,s-v)]},n.prototype.containsBlackPoint=function(t,e,r,i){var a=this.image;if(i){for(var s=t;s<=e;s++)if(a.get(s,r))return!0}else for(var l=t;l<=e;l++)if(a.get(r,l))return!0;return!1},n.INIT_SIZE=10,n.CORR=1,n}(),lS=function(){function n(){}return n.checkAndNudgePoints=function(t,e){for(var r=t.getWidth(),i=t.getHeight(),a=!0,s=0;s<e.length&&a;s+=2){var l=Math.floor(e[s]),c=Math.floor(e[s+1]);if(l<-1||l>r||c<-1||c>i)throw new ot;a=!1,l===-1?(e[s]=0,a=!0):l===r&&(e[s]=r-1,a=!0),c===-1?(e[s+1]=0,a=!0):c===i&&(e[s+1]=i-1,a=!0)}a=!0;for(var s=e.length-2;s>=0&&a;s-=2){var l=Math.floor(e[s]),c=Math.floor(e[s+1]);if(l<-1||l>r||c<-1||c>i)throw new ot;a=!1,l===-1?(e[s]=0,a=!0):l===r&&(e[s]=r-1,a=!0),c===-1?(e[s+1]=0,a=!0):c===i&&(e[s+1]=i-1,a=!0)}},n}(),t4=function(){function n(t,e,r,i,a,s,l,c,f){this.a11=t,this.a21=e,this.a31=r,this.a12=i,this.a22=a,this.a32=s,this.a13=l,this.a23=c,this.a33=f}return n.quadrilateralToQuadrilateral=function(t,e,r,i,a,s,l,c,f,d,g,m,v,_,w,b){var C=n.quadrilateralToSquare(t,e,r,i,a,s,l,c),I=n.squareToQuadrilateral(f,d,g,m,v,_,w,b);return I.times(C)},n.prototype.transformPoints=function(t){for(var e=t.length,r=this.a11,i=this.a12,a=this.a13,s=this.a21,l=this.a22,c=this.a23,f=this.a31,d=this.a32,g=this.a33,m=0;m<e;m+=2){var v=t[m],_=t[m+1],w=a*v+c*_+g;t[m]=(r*v+s*_+f)/w,t[m+1]=(i*v+l*_+d)/w}},n.prototype.transformPointsWithValues=function(t,e){for(var r=this.a11,i=this.a12,a=this.a13,s=this.a21,l=this.a22,c=this.a23,f=this.a31,d=this.a32,g=this.a33,m=t.length,v=0;v<m;v++){var _=t[v],w=e[v],b=a*_+c*w+g;t[v]=(r*_+s*w+f)/b,e[v]=(i*_+l*w+d)/b}},n.squareToQuadrilateral=function(t,e,r,i,a,s,l,c){var f=t-r+a-l,d=e-i+s-c;if(f===0&&d===0)return new n(r-t,a-r,t,i-e,s-i,e,0,0,1);var g=r-a,m=l-a,v=i-s,_=c-s,w=g*_-m*v,b=(f*_-m*d)/w,C=(g*d-f*v)/w;return new n(r-t+b*r,l-t+C*l,t,i-e+b*i,c-e+C*c,e,b,C,1)},n.quadrilateralToSquare=function(t,e,r,i,a,s,l,c){return n.squareToQuadrilateral(t,e,r,i,a,s,l,c).buildAdjoint()},n.prototype.buildAdjoint=function(){return new n(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)},n.prototype.times=function(t){return new n(this.a11*t.a11+this.a21*t.a12+this.a31*t.a13,this.a11*t.a21+this.a21*t.a22+this.a31*t.a23,this.a11*t.a31+this.a21*t.a32+this.a31*t.a33,this.a12*t.a11+this.a22*t.a12+this.a32*t.a13,this.a12*t.a21+this.a22*t.a22+this.a32*t.a23,this.a12*t.a31+this.a22*t.a32+this.a32*t.a33,this.a13*t.a11+this.a23*t.a12+this.a33*t.a13,this.a13*t.a21+this.a23*t.a22+this.a33*t.a23,this.a13*t.a31+this.a23*t.a32+this.a33*t.a33)},n}(),Rk=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Dk=function(n){Rk(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.prototype.sampleGrid=function(e,r,i,a,s,l,c,f,d,g,m,v,_,w,b,C,I,R,M){var N=t4.quadrilateralToQuadrilateral(a,s,l,c,f,d,g,m,v,_,w,b,C,I,R,M);return this.sampleGridWithTransform(e,r,i,N)},t.prototype.sampleGridWithTransform=function(e,r,i,a){if(r<=0||i<=0)throw new ot;for(var s=new ya(r,i),l=new Float32Array(2*r),c=0;c<i;c++){for(var f=l.length,d=c+.5,g=0;g<f;g+=2)l[g]=g/2+.5,l[g+1]=d;a.transformPoints(l),lS.checkAndNudgePoints(e,l);try{for(var g=0;g<f;g+=2)e.get(Math.floor(l[g]),Math.floor(l[g+1]))&&s.set(g/2,c)}catch{throw new ot}}return s},t}(lS),v2=function(){function n(){}return n.setGridSampler=function(t){n.gridSampler=t},n.getInstance=function(){return n.gridSampler},n.gridSampler=new Dk,n}(),Rr=function(){function n(t,e){this.x=t,this.y=e}return n.prototype.toResultPoint=function(){return new Ct(this.getX(),this.getY())},n.prototype.getX=function(){return this.x},n.prototype.getY=function(){return this.y},n}(),Ok=function(){function n(t){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=t}return n.prototype.detect=function(){return this.detectMirror(!1)},n.prototype.detectMirror=function(t){var e=this.getMatrixCenter(),r=this.getBullsEyeCorners(e);if(t){var i=r[0];r[0]=r[2],r[2]=i}this.extractParameters(r);var a=this.sampleGrid(this.image,r[this.shift%4],r[(this.shift+1)%4],r[(this.shift+2)%4],r[(this.shift+3)%4]),s=this.getMatrixCornerPoints(r);return new Ik(a,s,this.compact,this.nbDataBlocks,this.nbLayers)},n.prototype.extractParameters=function(t){if(!this.isValidPoint(t[0])||!this.isValidPoint(t[1])||!this.isValidPoint(t[2])||!this.isValidPoint(t[3]))throw new ot;var e=2*this.nbCenterLayers,r=new Int32Array([this.sampleLine(t[0],t[1],e),this.sampleLine(t[1],t[2],e),this.sampleLine(t[2],t[3],e),this.sampleLine(t[3],t[0],e)]);this.shift=this.getRotation(r,e);for(var i=0,a=0;a<4;a++){var s=r[(this.shift+a)%4];this.compact?(i<<=7,i+=s>>1&127):(i<<=10,i+=(s>>2&992)+(s>>1&31))}var l=this.getCorrectedParameterData(i,this.compact);this.compact?(this.nbLayers=(l>>6)+1,this.nbDataBlocks=(l&63)+1):(this.nbLayers=(l>>11)+1,this.nbDataBlocks=(l&2047)+1)},n.prototype.getRotation=function(t,e){var r=0;t.forEach(function(a,s,l){var c=(a>>e-2<<1)+(a&1);r=(r<<3)+c}),r=((r&1)<<11)+(r>>1);for(var i=0;i<4;i++)if(Zt.bitCount(r^this.EXPECTED_CORNER_BITS[i])<=2)return i;throw new ot},n.prototype.getCorrectedParameterData=function(t,e){var r,i;e?(r=7,i=2):(r=10,i=4);for(var a=r-i,s=new Int32Array(r),l=r-1;l>=0;--l)s[l]=t&15,t>>=4;try{var c=new qg(Nr.AZTEC_PARAM);c.decode(s,a)}catch{throw new ot}for(var f=0,l=0;l<i;l++)f=(f<<4)+s[l];return f},n.prototype.getBullsEyeCorners=function(t){var e=t,r=t,i=t,a=t,s=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){var l=this.getFirstDifferent(e,s,1,-1),c=this.getFirstDifferent(r,s,1,1),f=this.getFirstDifferent(i,s,-1,1),d=this.getFirstDifferent(a,s,-1,-1);if(this.nbCenterLayers>2){var g=this.distancePoint(d,l)*this.nbCenterLayers/(this.distancePoint(a,e)*(this.nbCenterLayers+2));if(g<.75||g>1.25||!this.isWhiteOrBlackRectangle(l,c,f,d))break}e=l,r=c,i=f,a=d,s=!s}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new ot;this.compact=this.nbCenterLayers===5;var m=new Ct(e.getX()+.5,e.getY()-.5),v=new Ct(r.getX()+.5,r.getY()+.5),_=new Ct(i.getX()-.5,i.getY()+.5),w=new Ct(a.getX()-.5,a.getY()-.5);return this.expandSquare([m,v,_,w],2*this.nbCenterLayers-3,2*this.nbCenterLayers)},n.prototype.getMatrixCenter=function(){var t,e,r,i;try{var a=new jy(this.image).detect();t=a[0],e=a[1],r=a[2],i=a[3]}catch{var s=this.image.getWidth()/2,l=this.image.getHeight()/2;t=this.getFirstDifferent(new Rr(s+7,l-7),!1,1,-1).toResultPoint(),e=this.getFirstDifferent(new Rr(s+7,l+7),!1,1,1).toResultPoint(),r=this.getFirstDifferent(new Rr(s-7,l+7),!1,-1,1).toResultPoint(),i=this.getFirstDifferent(new Rr(s-7,l-7),!1,-1,-1).toResultPoint()}var c=he.round((t.getX()+i.getX()+e.getX()+r.getX())/4),f=he.round((t.getY()+i.getY()+e.getY()+r.getY())/4);try{var a=new jy(this.image,15,c,f).detect();t=a[0],e=a[1],r=a[2],i=a[3]}catch{t=this.getFirstDifferent(new Rr(c+7,f-7),!1,1,-1).toResultPoint(),e=this.getFirstDifferent(new Rr(c+7,f+7),!1,1,1).toResultPoint(),r=this.getFirstDifferent(new Rr(c-7,f+7),!1,-1,1).toResultPoint(),i=this.getFirstDifferent(new Rr(c-7,f-7),!1,-1,-1).toResultPoint()}return c=he.round((t.getX()+i.getX()+e.getX()+r.getX())/4),f=he.round((t.getY()+i.getY()+e.getY()+r.getY())/4),new Rr(c,f)},n.prototype.getMatrixCornerPoints=function(t){return this.expandSquare(t,2*this.nbCenterLayers,this.getDimension())},n.prototype.sampleGrid=function(t,e,r,i,a){var s=v2.getInstance(),l=this.getDimension(),c=l/2-this.nbCenterLayers,f=l/2+this.nbCenterLayers;return s.sampleGrid(t,l,l,c,c,f,c,f,f,c,f,e.getX(),e.getY(),r.getX(),r.getY(),i.getX(),i.getY(),a.getX(),a.getY())},n.prototype.sampleLine=function(t,e,r){for(var i=0,a=this.distanceResultPoint(t,e),s=a/r,l=t.getX(),c=t.getY(),f=s*(e.getX()-t.getX())/a,d=s*(e.getY()-t.getY())/a,g=0;g<r;g++)this.image.get(he.round(l+g*f),he.round(c+g*d))&&(i|=1<<r-g-1);return i},n.prototype.isWhiteOrBlackRectangle=function(t,e,r,i){var a=3;t=new Rr(t.getX()-a,t.getY()+a),e=new Rr(e.getX()-a,e.getY()-a),r=new Rr(r.getX()+a,r.getY()-a),i=new Rr(i.getX()+a,i.getY()+a);var s=this.getColor(i,t);if(s===0)return!1;var l=this.getColor(t,e);return l!==s||(l=this.getColor(e,r),l!==s)?!1:(l=this.getColor(r,i),l===s)},n.prototype.getColor=function(t,e){for(var r=this.distancePoint(t,e),i=(e.getX()-t.getX())/r,a=(e.getY()-t.getY())/r,s=0,l=t.getX(),c=t.getY(),f=this.image.get(t.getX(),t.getY()),d=Math.ceil(r),g=0;g<d;g++)l+=i,c+=a,this.image.get(he.round(l),he.round(c))!==f&&s++;var m=s/r;return m>.1&&m<.9?0:m<=.1===f?1:-1},n.prototype.getFirstDifferent=function(t,e,r,i){for(var a=t.getX()+r,s=t.getY()+i;this.isValid(a,s)&&this.image.get(a,s)===e;)a+=r,s+=i;for(a-=r,s-=i;this.isValid(a,s)&&this.image.get(a,s)===e;)a+=r;for(a-=r;this.isValid(a,s)&&this.image.get(a,s)===e;)s+=i;return s-=i,new Rr(a,s)},n.prototype.expandSquare=function(t,e,r){var i=r/(2*e),a=t[0].getX()-t[2].getX(),s=t[0].getY()-t[2].getY(),l=(t[0].getX()+t[2].getX())/2,c=(t[0].getY()+t[2].getY())/2,f=new Ct(l+i*a,c+i*s),d=new Ct(l-i*a,c-i*s);a=t[1].getX()-t[3].getX(),s=t[1].getY()-t[3].getY(),l=(t[1].getX()+t[3].getX())/2,c=(t[1].getY()+t[3].getY())/2;var g=new Ct(l+i*a,c+i*s),m=new Ct(l-i*a,c-i*s),v=[f,g,d,m];return v},n.prototype.isValid=function(t,e){return t>=0&&t<this.image.getWidth()&&e>0&&e<this.image.getHeight()},n.prototype.isValidPoint=function(t){var e=he.round(t.getX()),r=he.round(t.getY());return this.isValid(e,r)},n.prototype.distancePoint=function(t,e){return he.distance(t.getX(),t.getY(),e.getX(),e.getY())},n.prototype.distanceResultPoint=function(t,e){return he.distance(t.getX(),t.getY(),e.getX(),e.getY())},n.prototype.getDimension=function(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(Zt.truncDivision(this.nbLayers-4,8)+1)+15},n}(),Uy=function(){function n(){}return n.prototype.decode=function(t,e){e===void 0&&(e=null);var r=null,i=new Ok(t.getBlackMatrix()),a=null,s=null;try{var l=i.detectMirror(!1);a=l.getPoints(),this.reportFoundResultPoints(e,a),s=new oS().decode(l)}catch(g){r=g}if(s==null)try{var l=i.detectMirror(!0);a=l.getPoints(),this.reportFoundResultPoints(e,a),s=new oS().decode(l)}catch(g){throw r??g}var c=new pr(s.getText(),s.getRawBytes(),s.getNumBits(),a,Pt.AZTEC,je.currentTimeMillis()),f=s.getByteSegments();f!=null&&c.putMetadata(rr.BYTE_SEGMENTS,f);var d=s.getECLevel();return d!=null&&c.putMetadata(rr.ERROR_CORRECTION_LEVEL,d),c},n.prototype.reportFoundResultPoints=function(t,e){if(t!=null){var r=t.get(Ye.NEED_RESULT_POINT_CALLBACK);r!=null&&e.forEach(function(i,a,s){r.foundPossibleResultPoint(i)})}},n.prototype.reset=function(){},n}(),Mk=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}();(function(n){Mk(t,n);function t(e){return e===void 0&&(e=500),n.call(this,new Uy,e)||this}return t})(Nc);var Mn=function(){function n(){}return n.prototype.decode=function(t,e){try{return this.doDecode(t,e)}catch{var r=e&&e.get(Ye.TRY_HARDER)===!0;if(r&&t.isRotateSupported()){var i=t.rotateCounterClockwise(),a=this.doDecode(i,e),s=a.getResultMetadata(),l=270;s!==null&&s.get(rr.ORIENTATION)===!0&&(l=l+s.get(rr.ORIENTATION)%360),a.putMetadata(rr.ORIENTATION,l);var c=a.getResultPoints();if(c!==null)for(var f=i.getHeight(),d=0;d<c.length;d++)c[d]=new Ct(f-c[d].getY()-1,c[d].getX());return a}else throw new ot}},n.prototype.reset=function(){},n.prototype.doDecode=function(t,e){var r=t.getWidth(),i=t.getHeight(),a=new $n(r),s=e&&e.get(Ye.TRY_HARDER)===!0,l=Math.max(1,i>>(s?8:5)),c;s?c=i:c=15;for(var f=Math.trunc(i/2),d=0;d<c;d++){var g=Math.trunc((d+1)/2),m=(d&1)===0,v=f+l*(m?g:-g);if(v<0||v>=i)break;try{a=t.getBlackRow(v,a)}catch{continue}for(var _=function(I){if(I===1&&(a.reverse(),e&&e.get(Ye.NEED_RESULT_POINT_CALLBACK)===!0)){var R=new Map;e.forEach(function(k,O){return R.set(O,k)}),R.delete(Ye.NEED_RESULT_POINT_CALLBACK),e=R}try{var M=w.decodeRow(v,a,e);if(I===1){M.putMetadata(rr.ORIENTATION,180);var N=M.getResultPoints();N!==null&&(N[0]=new Ct(r-N[0].getX()-1,N[0].getY()),N[1]=new Ct(r-N[1].getX()-1,N[1].getY()))}return{value:M}}catch{}},w=this,b=0;b<2;b++){var C=_(b);if(typeof C=="object")return C.value}}throw new ot},n.recordPattern=function(t,e,r){for(var i=r.length,a=0;a<i;a++)r[a]=0;var s=t.getSize();if(e>=s)throw new ot;for(var l=!t.get(e),c=0,f=e;f<s;){if(t.get(f)!==l)r[c]++;else{if(++c===i)break;r[c]=1,l=!l}f++}if(!(c===i||c===i-1&&f===s))throw new ot},n.recordPatternInReverse=function(t,e,r){for(var i=r.length,a=t.get(e);e>0&&i>=0;)t.get(--e)!==a&&(i--,a=!a);if(i>=0)throw new ot;n.recordPattern(t,e+1,r)},n.patternMatchVariance=function(t,e,r){for(var i=t.length,a=0,s=0,l=0;l<i;l++)a+=t[l],s+=e[l];if(a<s)return Number.POSITIVE_INFINITY;var c=a/s;r*=c;for(var f=0,d=0;d<i;d++){var g=t[d],m=e[d]*c,v=g>m?g-m:m-g;if(v>r)return Number.POSITIVE_INFINITY;f+=v}return f/a},n}(),Nk=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),uS=function(n){Nk(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.findStartPattern=function(e){for(var r=e.getSize(),i=e.getNextSet(0),a=0,s=Int32Array.from([0,0,0,0,0,0]),l=i,c=!1,f=6,d=i;d<r;d++)if(e.get(d)!==c)s[a]++;else{if(a===f-1){for(var g=t.MAX_AVG_VARIANCE,m=-1,v=t.CODE_START_A;v<=t.CODE_START_C;v++){var _=Mn.patternMatchVariance(s,t.CODE_PATTERNS[v],t.MAX_INDIVIDUAL_VARIANCE);_<g&&(g=_,m=v)}if(m>=0&&e.isRange(Math.max(0,l-(d-l)/2),l,!1))return Int32Array.from([l,d,m]);l+=s[0]+s[1],s=s.slice(2,s.length),s[a-1]=0,s[a]=0,a--}else a++;s[a]=1,c=!c}throw new ot},t.decodeCode=function(e,r,i){Mn.recordPattern(e,i,r);for(var a=t.MAX_AVG_VARIANCE,s=-1,l=0;l<t.CODE_PATTERNS.length;l++){var c=t.CODE_PATTERNS[l],f=this.patternMatchVariance(r,c,t.MAX_INDIVIDUAL_VARIANCE);f<a&&(a=f,s=l)}if(s>=0)return s;throw new ot},t.prototype.decodeRow=function(e,r,i){var a=i&&i.get(Ye.ASSUME_GS1)===!0,s=t.findStartPattern(r),l=s[2],c=0,f=new Uint8Array(20);f[c++]=l;var d;switch(l){case t.CODE_START_A:d=t.CODE_CODE_A;break;case t.CODE_START_B:d=t.CODE_CODE_B;break;case t.CODE_START_C:d=t.CODE_CODE_C;break;default:throw new xt}for(var g=!1,m=!1,v="",_=s[0],w=s[1],b=Int32Array.from([0,0,0,0,0,0]),C=0,I=0,R=l,M=0,N=!0,k=!1,O=!1;!g;){var S=m;switch(m=!1,C=I,I=t.decodeCode(r,b,w),f[c++]=I,I!==t.CODE_STOP&&(N=!0),I!==t.CODE_STOP&&(M++,R+=M*I),_=w,w+=b.reduce(function(Z,it){return Z+it},0),I){case t.CODE_START_A:case t.CODE_START_B:case t.CODE_START_C:throw new xt}switch(d){case t.CODE_CODE_A:if(I<64)O===k?v+=String.fromCharCode(32+I):v+=String.fromCharCode(32+I+128),O=!1;else if(I<96)O===k?v+=String.fromCharCode(I-64):v+=String.fromCharCode(I+64),O=!1;else switch(I!==t.CODE_STOP&&(N=!1),I){case t.CODE_FNC_1:a&&(v.length===0?v+="]C1":v+="");break;case t.CODE_FNC_2:case t.CODE_FNC_3:break;case t.CODE_FNC_4_A:!k&&O?(k=!0,O=!1):k&&O?(k=!1,O=!1):O=!0;break;case t.CODE_SHIFT:m=!0,d=t.CODE_CODE_B;break;case t.CODE_CODE_B:d=t.CODE_CODE_B;break;case t.CODE_CODE_C:d=t.CODE_CODE_C;break;case t.CODE_STOP:g=!0;break}break;case t.CODE_CODE_B:if(I<96)O===k?v+=String.fromCharCode(32+I):v+=String.fromCharCode(32+I+128),O=!1;else switch(I!==t.CODE_STOP&&(N=!1),I){case t.CODE_FNC_1:a&&(v.length===0?v+="]C1":v+="");break;case t.CODE_FNC_2:case t.CODE_FNC_3:break;case t.CODE_FNC_4_B:!k&&O?(k=!0,O=!1):k&&O?(k=!1,O=!1):O=!0;break;case t.CODE_SHIFT:m=!0,d=t.CODE_CODE_A;break;case t.CODE_CODE_A:d=t.CODE_CODE_A;break;case t.CODE_CODE_C:d=t.CODE_CODE_C;break;case t.CODE_STOP:g=!0;break}break;case t.CODE_CODE_C:if(I<100)I<10&&(v+="0"),v+=I;else switch(I!==t.CODE_STOP&&(N=!1),I){case t.CODE_FNC_1:a&&(v.length===0?v+="]C1":v+="");break;case t.CODE_CODE_A:d=t.CODE_CODE_A;break;case t.CODE_CODE_B:d=t.CODE_CODE_B;break;case t.CODE_STOP:g=!0;break}break}S&&(d=d===t.CODE_CODE_A?t.CODE_CODE_B:t.CODE_CODE_A)}var D=w-_;if(w=r.getNextUnset(w),!r.isRange(w,Math.min(r.getSize(),w+(w-_)/2),!1))throw new ot;if(R-=M*C,R%103!==C)throw new Gn;var V=v.length;if(V===0)throw new ot;V>0&&N&&(d===t.CODE_CODE_C?v=v.substring(0,V-2):v=v.substring(0,V-1));for(var B=(s[1]+s[0])/2,F=_+D/2,j=f.length,rt=new Uint8Array(j),mt=0;mt<j;mt++)rt[mt]=f[mt];var q=[new Ct(B,e),new Ct(F,e)];return new pr(v,rt,0,q,Pt.CODE_128,new Date().getTime())},t.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],t.MAX_AVG_VARIANCE=.25,t.MAX_INDIVIDUAL_VARIANCE=.7,t.CODE_SHIFT=98,t.CODE_CODE_C=99,t.CODE_CODE_B=100,t.CODE_CODE_A=101,t.CODE_FNC_1=102,t.CODE_FNC_2=97,t.CODE_FNC_3=96,t.CODE_FNC_4_A=101,t.CODE_FNC_4_B=100,t.CODE_START_A=103,t.CODE_START_B=104,t.CODE_START_C=105,t.CODE_STOP=106,t}(Mn),Pk=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Tv=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},cS=function(n){Pk(t,n);function t(e,r){e===void 0&&(e=!1),r===void 0&&(r=!1);var i=n.call(this)||this;return i.usingCheckDigit=e,i.extendedMode=r,i.decodeRowResult="",i.counters=new Int32Array(9),i}return t.prototype.decodeRow=function(e,r,i){var a,s,l,c,f=this.counters;f.fill(0),this.decodeRowResult="";var d=t.findAsteriskPattern(r,f),g=r.getNextSet(d[1]),m=r.getSize(),v,_;do{t.recordPattern(r,g,f);var w=t.toNarrowWidePattern(f);if(w<0)throw new ot;v=t.patternToChar(w),this.decodeRowResult+=v,_=g;try{for(var b=(a=void 0,Tv(f)),C=b.next();!C.done;C=b.next()){var I=C.value;g+=I}}catch(j){a={error:j}}finally{try{C&&!C.done&&(s=b.return)&&s.call(b)}finally{if(a)throw a.error}}g=r.getNextSet(g)}while(v!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var R=0;try{for(var M=Tv(f),N=M.next();!N.done;N=M.next()){var I=N.value;R+=I}}catch(j){l={error:j}}finally{try{N&&!N.done&&(c=M.return)&&c.call(M)}finally{if(l)throw l.error}}var k=g-_-R;if(g!==m&&k*2<R)throw new ot;if(this.usingCheckDigit){for(var O=this.decodeRowResult.length-1,S=0,D=0;D<O;D++)S+=t.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(D));if(this.decodeRowResult.charAt(O)!==t.ALPHABET_STRING.charAt(S%43))throw new Gn;this.decodeRowResult=this.decodeRowResult.substring(0,O)}if(this.decodeRowResult.length===0)throw new ot;var V;this.extendedMode?V=t.decodeExtended(this.decodeRowResult):V=this.decodeRowResult;var B=(d[1]+d[0])/2,F=_+R/2;return new pr(V,null,0,[new Ct(B,e),new Ct(F,e)],Pt.CODE_39,new Date().getTime())},t.findAsteriskPattern=function(e,r){for(var i=e.getSize(),a=e.getNextSet(0),s=0,l=a,c=!1,f=r.length,d=a;d<i;d++)if(e.get(d)!==c)r[s]++;else{if(s===f-1){if(this.toNarrowWidePattern(r)===t.ASTERISK_ENCODING&&e.isRange(Math.max(0,l-Math.floor((d-l)/2)),l,!1))return[l,d];l+=r[0]+r[1],r.copyWithin(0,2,2+s-1),r[s-1]=0,r[s]=0,s--}else s++;r[s]=1,c=!c}throw new ot},t.toNarrowWidePattern=function(e){var r,i,a=e.length,s=0,l;do{var c=2147483647;try{for(var f=(r=void 0,Tv(e)),d=f.next();!d.done;d=f.next()){var g=d.value;g<c&&g>s&&(c=g)}}catch(w){r={error:w}}finally{try{d&&!d.done&&(i=f.return)&&i.call(f)}finally{if(r)throw r.error}}s=c,l=0;for(var m=0,v=0,_=0;_<a;_++){var g=e[_];g>s&&(v|=1<<a-1-_,l++,m+=g)}if(l===3){for(var _=0;_<a&&l>0;_++){var g=e[_];if(g>s&&(l--,g*2>=m))return-1}return v}}while(l>3);return-1},t.patternToChar=function(e){for(var r=0;r<t.CHARACTER_ENCODINGS.length;r++)if(t.CHARACTER_ENCODINGS[r]===e)return t.ALPHABET_STRING.charAt(r);if(e===t.ASTERISK_ENCODING)return"*";throw new ot},t.decodeExtended=function(e){for(var r=e.length,i="",a=0;a<r;a++){var s=e.charAt(a);if(s==="+"||s==="$"||s==="%"||s==="/"){var l=e.charAt(a+1),c="\0";switch(s){case"+":if(l>="A"&&l<="Z")c=String.fromCharCode(l.charCodeAt(0)+32);else throw new xt;break;case"$":if(l>="A"&&l<="Z")c=String.fromCharCode(l.charCodeAt(0)-64);else throw new xt;break;case"%":if(l>="A"&&l<="E")c=String.fromCharCode(l.charCodeAt(0)-38);else if(l>="F"&&l<="J")c=String.fromCharCode(l.charCodeAt(0)-11);else if(l>="K"&&l<="O")c=String.fromCharCode(l.charCodeAt(0)+16);else if(l>="P"&&l<="T")c=String.fromCharCode(l.charCodeAt(0)+43);else if(l==="U")c="\0";else if(l==="V")c="@";else if(l==="W")c="`";else if(l==="X"||l==="Y"||l==="Z")c="";else throw new xt;break;case"/":if(l>="A"&&l<="O")c=String.fromCharCode(l.charCodeAt(0)-32);else if(l==="Z")c=":";else throw new xt;break}i+=c,a++}else i+=s}return i},t.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",t.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],t.ASTERISK_ENCODING=148,t}(Mn),kk=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Cv=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},fS=function(n){kk(t,n);function t(){var e=n.call(this)||this;return e.decodeRowResult="",e.counters=new Int32Array(6),e}return t.prototype.decodeRow=function(e,r,i){var a,s,l,c,f=this.findAsteriskPattern(r),d=r.getNextSet(f[1]),g=r.getSize(),m=this.counters;m.fill(0),this.decodeRowResult="";var v,_;do{t.recordPattern(r,d,m);var w=this.toPattern(m);if(w<0)throw new ot;v=this.patternToChar(w),this.decodeRowResult+=v,_=d;try{for(var b=(a=void 0,Cv(m)),C=b.next();!C.done;C=b.next()){var I=C.value;d+=I}}catch(D){a={error:D}}finally{try{C&&!C.done&&(s=b.return)&&s.call(b)}finally{if(a)throw a.error}}d=r.getNextSet(d)}while(v!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var R=0;try{for(var M=Cv(m),N=M.next();!N.done;N=M.next()){var I=N.value;R+=I}}catch(D){l={error:D}}finally{try{N&&!N.done&&(c=M.return)&&c.call(M)}finally{if(l)throw l.error}}if(d===g||!r.get(d))throw new ot;if(this.decodeRowResult.length<2)throw new ot;this.checkChecksums(this.decodeRowResult),this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-2);var k=this.decodeExtended(this.decodeRowResult),O=(f[1]+f[0])/2,S=_+R/2;return new pr(k,null,0,[new Ct(O,e),new Ct(S,e)],Pt.CODE_93,new Date().getTime())},t.prototype.findAsteriskPattern=function(e){var r=e.getSize(),i=e.getNextSet(0);this.counters.fill(0);for(var a=this.counters,s=i,l=!1,c=a.length,f=0,d=i;d<r;d++)if(e.get(d)!==l)a[f]++;else{if(f===c-1){if(this.toPattern(a)===t.ASTERISK_ENCODING)return new Int32Array([s,d]);s+=a[0]+a[1],a.copyWithin(0,2,2+f-1),a[f-1]=0,a[f]=0,f--}else f++;a[f]=1,l=!l}throw new ot},t.prototype.toPattern=function(e){var r,i,a=0;try{for(var s=Cv(e),l=s.next();!l.done;l=s.next()){var c=l.value;a+=c}}catch(_){r={error:_}}finally{try{l&&!l.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}for(var f=0,d=e.length,g=0;g<d;g++){var m=Math.round(e[g]*9/a);if(m<1||m>4)return-1;if((g&1)===0)for(var v=0;v<m;v++)f=f<<1|1;else f<<=m}return f},t.prototype.patternToChar=function(e){for(var r=0;r<t.CHARACTER_ENCODINGS.length;r++)if(t.CHARACTER_ENCODINGS[r]===e)return t.ALPHABET_STRING.charAt(r);throw new ot},t.prototype.decodeExtended=function(e){for(var r=e.length,i="",a=0;a<r;a++){var s=e.charAt(a);if(s>="a"&&s<="d"){if(a>=r-1)throw new xt;var l=e.charAt(a+1),c="\0";switch(s){case"d":if(l>="A"&&l<="Z")c=String.fromCharCode(l.charCodeAt(0)+32);else throw new xt;break;case"a":if(l>="A"&&l<="Z")c=String.fromCharCode(l.charCodeAt(0)-64);else throw new xt;break;case"b":if(l>="A"&&l<="E")c=String.fromCharCode(l.charCodeAt(0)-38);else if(l>="F"&&l<="J")c=String.fromCharCode(l.charCodeAt(0)-11);else if(l>="K"&&l<="O")c=String.fromCharCode(l.charCodeAt(0)+16);else if(l>="P"&&l<="T")c=String.fromCharCode(l.charCodeAt(0)+43);else if(l==="U")c="\0";else if(l==="V")c="@";else if(l==="W")c="`";else if(l>="X"&&l<="Z")c="";else throw new xt;break;case"c":if(l>="A"&&l<="O")c=String.fromCharCode(l.charCodeAt(0)-32);else if(l==="Z")c=":";else throw new xt;break}i+=c,a++}else i+=s}return i},t.prototype.checkChecksums=function(e){var r=e.length;this.checkOneChecksum(e,r-2,20),this.checkOneChecksum(e,r-1,15)},t.prototype.checkOneChecksum=function(e,r,i){for(var a=1,s=0,l=r-1;l>=0;l--)s+=a*t.ALPHABET_STRING.indexOf(e.charAt(l)),++a>i&&(a=1);if(e.charAt(r)!==t.ALPHABET_STRING[s%47])throw new Gn},t.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%abcd*",t.CHARACTER_ENCODINGS=[276,328,324,322,296,292,290,336,274,266,424,420,418,404,402,394,360,356,354,308,282,344,332,326,300,278,436,434,428,422,406,410,364,358,310,314,302,468,466,458,366,374,430,294,474,470,306,350],t.ASTERISK_ENCODING=t.CHARACTER_ENCODINGS[47],t}(Mn),Lk=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Bk=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},hS=function(n){Lk(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.narrowLineWidth=-1,e}return t.prototype.decodeRow=function(e,r,i){var a,s,l=this.decodeStart(r),c=this.decodeEnd(r),f=new Wt;t.decodeMiddle(r,l[1],c[0],f);var d=f.toString(),g=null;i!=null&&(g=i.get(Ye.ALLOWED_LENGTHS)),g==null&&(g=t.DEFAULT_ALLOWED_LENGTHS);var m=d.length,v=!1,_=0;try{for(var w=Bk(g),b=w.next();!b.done;b=w.next()){var C=b.value;if(m===C){v=!0;break}C>_&&(_=C)}}catch(M){a={error:M}}finally{try{b&&!b.done&&(s=w.return)&&s.call(w)}finally{if(a)throw a.error}}if(!v&&m>_&&(v=!0),!v)throw new xt;var I=[new Ct(l[1],e),new Ct(c[0],e)],R=new pr(d,null,0,I,Pt.ITF,new Date().getTime());return R},t.decodeMiddle=function(e,r,i,a){var s=new Int32Array(10),l=new Int32Array(5),c=new Int32Array(5);for(s.fill(0),l.fill(0),c.fill(0);r<i;){Mn.recordPattern(e,r,s);for(var f=0;f<5;f++){var d=2*f;l[f]=s[d],c[f]=s[d+1]}var g=t.decodeDigit(l);a.append(g.toString()),g=this.decodeDigit(c),a.append(g.toString()),s.forEach(function(m){r+=m})}},t.prototype.decodeStart=function(e){var r=t.skipWhiteSpace(e),i=t.findGuardPattern(e,r,t.START_PATTERN);return this.narrowLineWidth=(i[1]-i[0])/4,this.validateQuietZone(e,i[0]),i},t.prototype.validateQuietZone=function(e,r){var i=this.narrowLineWidth*10;i=i<r?i:r;for(var a=r-1;i>0&&a>=0&&!e.get(a);a--)i--;if(i!==0)throw new ot},t.skipWhiteSpace=function(e){var r=e.getSize(),i=e.getNextSet(0);if(i===r)throw new ot;return i},t.prototype.decodeEnd=function(e){e.reverse();try{var r=t.skipWhiteSpace(e),i=void 0;try{i=t.findGuardPattern(e,r,t.END_PATTERN_REVERSED[0])}catch(s){s instanceof ot&&(i=t.findGuardPattern(e,r,t.END_PATTERN_REVERSED[1]))}this.validateQuietZone(e,i[0]);var a=i[0];return i[0]=e.getSize()-i[1],i[1]=e.getSize()-a,i}finally{e.reverse()}},t.findGuardPattern=function(e,r,i){var a=i.length,s=new Int32Array(a),l=e.getSize(),c=!1,f=0,d=r;s.fill(0);for(var g=r;g<l;g++)if(e.get(g)!==c)s[f]++;else{if(f===a-1){if(Mn.patternMatchVariance(s,i,t.MAX_INDIVIDUAL_VARIANCE)<t.MAX_AVG_VARIANCE)return[d,g];d+=s[0]+s[1],je.arraycopy(s,2,s,0,f-1),s[f-1]=0,s[f]=0,f--}else f++;s[f]=1,c=!c}throw new ot},t.decodeDigit=function(e){for(var r=t.MAX_AVG_VARIANCE,i=-1,a=t.PATTERNS.length,s=0;s<a;s++){var l=t.PATTERNS[s],c=Mn.patternMatchVariance(e,l,t.MAX_INDIVIDUAL_VARIANCE);c<r?(r=c,i=s):c===r&&(i=-1)}if(i>=0)return i%10;throw new ot},t.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],t.MAX_AVG_VARIANCE=.38,t.MAX_INDIVIDUAL_VARIANCE=.5,t.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],t.START_PATTERN=Int32Array.from([1,1,1,1]),t.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])],t}(Mn),Vk=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),mc=function(n){Vk(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.decodeRowStringBuffer="",e}return t.findStartGuardPattern=function(e){for(var r=!1,i,a=0,s=Int32Array.from([0,0,0]);!r;){s=Int32Array.from([0,0,0]),i=t.findGuardPattern(e,a,!1,this.START_END_PATTERN,s);var l=i[0];a=i[1];var c=l-(a-l);c>=0&&(r=e.isRange(c,l,!1))}return i},t.checkChecksum=function(e){return t.checkStandardUPCEANChecksum(e)},t.checkStandardUPCEANChecksum=function(e){var r=e.length;if(r===0)return!1;var i=parseInt(e.charAt(r-1),10);return t.getStandardUPCEANChecksum(e.substring(0,r-1))===i},t.getStandardUPCEANChecksum=function(e){for(var r=e.length,i=0,a=r-1;a>=0;a-=2){var s=e.charAt(a).charCodeAt(0)-48;if(s<0||s>9)throw new xt;i+=s}i*=3;for(var a=r-2;a>=0;a-=2){var s=e.charAt(a).charCodeAt(0)-48;if(s<0||s>9)throw new xt;i+=s}return(1e3-i)%10},t.decodeEnd=function(e,r){return t.findGuardPattern(e,r,!1,t.START_END_PATTERN,new Int32Array(t.START_END_PATTERN.length).fill(0))},t.findGuardPatternWithoutCounters=function(e,r,i,a){return this.findGuardPattern(e,r,i,a,new Int32Array(a.length))},t.findGuardPattern=function(e,r,i,a,s){var l=e.getSize();r=i?e.getNextUnset(r):e.getNextSet(r);for(var c=0,f=r,d=a.length,g=i,m=r;m<l;m++)if(e.get(m)!==g)s[c]++;else{if(c===d-1){if(Mn.patternMatchVariance(s,a,t.MAX_INDIVIDUAL_VARIANCE)<t.MAX_AVG_VARIANCE)return Int32Array.from([f,m]);f+=s[0]+s[1];for(var v=s.slice(2,s.length),_=0;_<c-1;_++)s[_]=v[_];s[c-1]=0,s[c]=0,c--}else c++;s[c]=1,g=!g}throw new ot},t.decodeDigit=function(e,r,i,a){this.recordPattern(e,i,r);for(var s=this.MAX_AVG_VARIANCE,l=-1,c=a.length,f=0;f<c;f++){var d=a[f],g=Mn.patternMatchVariance(r,d,t.MAX_INDIVIDUAL_VARIANCE);g<s&&(s=g,l=f)}if(l>=0)return l;throw new ot},t.MAX_AVG_VARIANCE=.48,t.MAX_INDIVIDUAL_VARIANCE=.7,t.START_END_PATTERN=Int32Array.from([1,1,1]),t.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),t.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),t.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])],t}(Mn),Fk=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},jk=function(){function n(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return n.prototype.decodeRow=function(t,e,r){var i=this.decodeRowStringBuffer,a=this.decodeMiddle(e,r,i),s=i.toString(),l=n.parseExtensionString(s),c=[new Ct((r[0]+r[1])/2,t),new Ct(a,t)],f=new pr(s,null,0,c,Pt.UPC_EAN_EXTENSION,new Date().getTime());return l!=null&&f.putAllMetadata(l),f},n.prototype.decodeMiddle=function(t,e,r){var i,a,s=this.decodeMiddleCounters;s[0]=0,s[1]=0,s[2]=0,s[3]=0;for(var l=t.getSize(),c=e[1],f=0,d=0;d<5&&c<l;d++){var g=mc.decodeDigit(t,s,c,mc.L_AND_G_PATTERNS);r+=String.fromCharCode(48+g%10);try{for(var m=(i=void 0,Fk(s)),v=m.next();!v.done;v=m.next()){var _=v.value;c+=_}}catch(b){i={error:b}}finally{try{v&&!v.done&&(a=m.return)&&a.call(m)}finally{if(i)throw i.error}}g>=10&&(f|=1<<4-d),d!==4&&(c=t.getNextSet(c),c=t.getNextUnset(c))}if(r.length!==5)throw new ot;var w=this.determineCheckDigit(f);if(n.extensionChecksum(r.toString())!==w)throw new ot;return c},n.extensionChecksum=function(t){for(var e=t.length,r=0,i=e-2;i>=0;i-=2)r+=t.charAt(i).charCodeAt(0)-48;r*=3;for(var i=e-1;i>=0;i-=2)r+=t.charAt(i).charCodeAt(0)-48;return r*=3,r%10},n.prototype.determineCheckDigit=function(t){for(var e=0;e<10;e++)if(t===this.CHECK_DIGIT_ENCODINGS[e])return e;throw new ot},n.parseExtensionString=function(t){if(t.length!==5)return null;var e=n.parseExtension5String(t);return e==null?null:new Map([[rr.SUGGESTED_PRICE,e]])},n.parseExtension5String=function(t){var e;switch(t.charAt(0)){case"0":e="£";break;case"5":e="$";break;case"9":switch(t){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}e="";break;default:e="";break}var r=parseInt(t.substring(1)),i=(r/100).toString(),a=r%100,s=a<10?"0"+a:a.toString();return e+i+"."+s},n}(),Uk=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},zk=function(){function n(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return n.prototype.decodeRow=function(t,e,r){var i=this.decodeRowStringBuffer,a=this.decodeMiddle(e,r,i),s=i.toString(),l=n.parseExtensionString(s),c=[new Ct((r[0]+r[1])/2,t),new Ct(a,t)],f=new pr(s,null,0,c,Pt.UPC_EAN_EXTENSION,new Date().getTime());return l!=null&&f.putAllMetadata(l),f},n.prototype.decodeMiddle=function(t,e,r){var i,a,s=this.decodeMiddleCounters;s[0]=0,s[1]=0,s[2]=0,s[3]=0;for(var l=t.getSize(),c=e[1],f=0,d=0;d<2&&c<l;d++){var g=mc.decodeDigit(t,s,c,mc.L_AND_G_PATTERNS);r+=String.fromCharCode(48+g%10);try{for(var m=(i=void 0,Uk(s)),v=m.next();!v.done;v=m.next()){var _=v.value;c+=_}}catch(w){i={error:w}}finally{try{v&&!v.done&&(a=m.return)&&a.call(m)}finally{if(i)throw i.error}}g>=10&&(f|=1<<1-d),d!==1&&(c=t.getNextSet(c),c=t.getNextUnset(c))}if(r.length!==2)throw new ot;if(parseInt(r.toString())%4!==f)throw new ot;return c},n.parseExtensionString=function(t){return t.length!==2?null:new Map([[rr.ISSUE_NUMBER,parseInt(t)]])},n}(),Hk=function(){function n(){}return n.decodeRow=function(t,e,r){var i=mc.findGuardPattern(e,r,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{var a=new jk;return a.decodeRow(t,e,i)}catch{var s=new zk;return s.decodeRow(t,e,i)}},n.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]),n}(),Gk=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Cn=function(n){Gk(t,n);function t(){var e=n.call(this)||this;e.decodeRowStringBuffer="",t.L_AND_G_PATTERNS=t.L_PATTERNS.map(function(l){return Int32Array.from(l)});for(var r=10;r<20;r++){for(var i=t.L_PATTERNS[r-10],a=new Int32Array(i.length),s=0;s<i.length;s++)a[s]=i[i.length-s-1];t.L_AND_G_PATTERNS[r]=a}return e}return t.prototype.decodeRow=function(e,r,i){var a=t.findStartGuardPattern(r),s=i==null?null:i.get(Ye.NEED_RESULT_POINT_CALLBACK);if(s!=null){var l=new Ct((a[0]+a[1])/2,e);s.foundPossibleResultPoint(l)}var c=this.decodeMiddle(r,a,this.decodeRowStringBuffer),f=c.rowOffset,d=c.resultString;if(s!=null){var g=new Ct(f,e);s.foundPossibleResultPoint(g)}var m=t.decodeEnd(r,f);if(s!=null){var v=new Ct((m[0]+m[1])/2,e);s.foundPossibleResultPoint(v)}var _=m[1],w=_+(_-m[0]);if(w>=r.getSize()||!r.isRange(_,w,!1))throw new ot;var b=d.toString();if(b.length<8)throw new xt;if(!t.checkChecksum(b))throw new Gn;var C=(a[1]+a[0])/2,I=(m[1]+m[0])/2,R=this.getBarcodeFormat(),M=[new Ct(C,e),new Ct(I,e)],N=new pr(b,null,0,M,R,new Date().getTime()),k=0;try{var O=Hk.decodeRow(e,r,m[1]);N.putMetadata(rr.UPC_EAN_EXTENSION,O.getText()),N.putAllMetadata(O.getResultMetadata()),N.addResultPoints(O.getResultPoints()),k=O.getText().length}catch{}var S=i==null?null:i.get(Ye.ALLOWED_EAN_EXTENSIONS);if(S!=null){var D=!1;for(var V in S)if(k.toString()===V){D=!0;break}if(!D)throw new ot}return R===Pt.EAN_13||Pt.UPC_A,N},t.checkChecksum=function(e){return t.checkStandardUPCEANChecksum(e)},t.checkStandardUPCEANChecksum=function(e){var r=e.length;if(r===0)return!1;var i=parseInt(e.charAt(r-1),10);return t.getStandardUPCEANChecksum(e.substring(0,r-1))===i},t.getStandardUPCEANChecksum=function(e){for(var r=e.length,i=0,a=r-1;a>=0;a-=2){var s=e.charAt(a).charCodeAt(0)-48;if(s<0||s>9)throw new xt;i+=s}i*=3;for(var a=r-2;a>=0;a-=2){var s=e.charAt(a).charCodeAt(0)-48;if(s<0||s>9)throw new xt;i+=s}return(1e3-i)%10},t.decodeEnd=function(e,r){return t.findGuardPattern(e,r,!1,t.START_END_PATTERN,new Int32Array(t.START_END_PATTERN.length).fill(0))},t}(mc),$k=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),dS=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},zy=function(n){$k(t,n);function t(){var e=n.call(this)||this;return e.decodeMiddleCounters=Int32Array.from([0,0,0,0]),e}return t.prototype.decodeMiddle=function(e,r,i){var a,s,l,c,f=this.decodeMiddleCounters;f[0]=0,f[1]=0,f[2]=0,f[3]=0;for(var d=e.getSize(),g=r[1],m=0,v=0;v<6&&g<d;v++){var _=Cn.decodeDigit(e,f,g,Cn.L_AND_G_PATTERNS);i+=String.fromCharCode(48+_%10);try{for(var w=(a=void 0,dS(f)),b=w.next();!b.done;b=w.next()){var C=b.value;g+=C}}catch(N){a={error:N}}finally{try{b&&!b.done&&(s=w.return)&&s.call(w)}finally{if(a)throw a.error}}_>=10&&(m|=1<<5-v)}i=t.determineFirstDigit(i,m);var I=Cn.findGuardPattern(e,g,!0,Cn.MIDDLE_PATTERN,new Int32Array(Cn.MIDDLE_PATTERN.length).fill(0));g=I[1];for(var v=0;v<6&&g<d;v++){var _=Cn.decodeDigit(e,f,g,Cn.L_PATTERNS);i+=String.fromCharCode(48+_);try{for(var R=(l=void 0,dS(f)),M=R.next();!M.done;M=R.next()){var C=M.value;g+=C}}catch(O){l={error:O}}finally{try{M&&!M.done&&(c=R.return)&&c.call(R)}finally{if(l)throw l.error}}}return{rowOffset:g,resultString:i}},t.prototype.getBarcodeFormat=function(){return Pt.EAN_13},t.determineFirstDigit=function(e,r){for(var i=0;i<10;i++)if(r===this.FIRST_DIGIT_ENCODINGS[i])return e=String.fromCharCode(48+i)+e,e;throw new ot},t.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26],t}(Cn),qk=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),gS=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},pS=function(n){qk(t,n);function t(){var e=n.call(this)||this;return e.decodeMiddleCounters=Int32Array.from([0,0,0,0]),e}return t.prototype.decodeMiddle=function(e,r,i){var a,s,l,c,f=this.decodeMiddleCounters;f[0]=0,f[1]=0,f[2]=0,f[3]=0;for(var d=e.getSize(),g=r[1],m=0;m<4&&g<d;m++){var v=Cn.decodeDigit(e,f,g,Cn.L_PATTERNS);i+=String.fromCharCode(48+v);try{for(var _=(a=void 0,gS(f)),w=_.next();!w.done;w=_.next()){var b=w.value;g+=b}}catch(M){a={error:M}}finally{try{w&&!w.done&&(s=_.return)&&s.call(_)}finally{if(a)throw a.error}}}var C=Cn.findGuardPattern(e,g,!0,Cn.MIDDLE_PATTERN,new Int32Array(Cn.MIDDLE_PATTERN.length).fill(0));g=C[1];for(var m=0;m<4&&g<d;m++){var v=Cn.decodeDigit(e,f,g,Cn.L_PATTERNS);i+=String.fromCharCode(48+v);try{for(var I=(l=void 0,gS(f)),R=I.next();!R.done;R=I.next()){var b=R.value;g+=b}}catch(k){l={error:k}}finally{try{R&&!R.done&&(c=I.return)&&c.call(I)}finally{if(l)throw l.error}}}return{rowOffset:g,resultString:i}},t.prototype.getBarcodeFormat=function(){return Pt.EAN_8},t}(Cn),Xk=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),mS=function(n){Xk(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.ean13Reader=new zy,e}return t.prototype.getBarcodeFormat=function(){return Pt.UPC_A},t.prototype.decode=function(e,r){return this.maybeReturnResult(this.ean13Reader.decode(e))},t.prototype.decodeRow=function(e,r,i){return this.maybeReturnResult(this.ean13Reader.decodeRow(e,r,i))},t.prototype.decodeMiddle=function(e,r,i){return this.ean13Reader.decodeMiddle(e,r,i)},t.prototype.maybeReturnResult=function(e){var r=e.getText();if(r.charAt(0)==="0"){var i=new pr(r.substring(1),null,null,e.getResultPoints(),Pt.UPC_A);return e.getResultMetadata()!=null&&i.putAllMetadata(e.getResultMetadata()),i}else throw new ot},t.prototype.reset=function(){this.ean13Reader.reset()},t}(Cn),Wk=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Yk=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},vS=function(n){Wk(t,n);function t(){var e=n.call(this)||this;return e.decodeMiddleCounters=new Int32Array(4),e}return t.prototype.decodeMiddle=function(e,r,i){var a,s,l=this.decodeMiddleCounters.map(function(b){return b});l[0]=0,l[1]=0,l[2]=0,l[3]=0;for(var c=e.getSize(),f=r[1],d=0,g=0;g<6&&f<c;g++){var m=t.decodeDigit(e,l,f,t.L_AND_G_PATTERNS);i+=String.fromCharCode(48+m%10);try{for(var v=(a=void 0,Yk(l)),_=v.next();!_.done;_=v.next()){var w=_.value;f+=w}}catch(b){a={error:b}}finally{try{_&&!_.done&&(s=v.return)&&s.call(v)}finally{if(a)throw a.error}}m>=10&&(d|=1<<5-g)}return t.determineNumSysAndCheckDigit(new Wt(i),d),f},t.prototype.decodeEnd=function(e,r){return t.findGuardPatternWithoutCounters(e,r,!0,t.MIDDLE_END_PATTERN)},t.prototype.checkChecksum=function(e){return Cn.checkChecksum(t.convertUPCEtoUPCA(e))},t.determineNumSysAndCheckDigit=function(e,r){for(var i=0;i<=1;i++)for(var a=0;a<10;a++)if(r===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[i][a]){e.insert(0,"0"+i),e.append("0"+a);return}throw ot.getNotFoundInstance()},t.prototype.getBarcodeFormat=function(){return Pt.UPC_E},t.convertUPCEtoUPCA=function(e){var r=e.slice(1,7).split("").map(function(s){return s.charCodeAt(0)}),i=new Wt;i.append(e.charAt(0));var a=r[5];switch(a){case 0:case 1:case 2:i.appendChars(r,0,2),i.append(a),i.append("0000"),i.appendChars(r,2,3);break;case 3:i.appendChars(r,0,3),i.append("00000"),i.appendChars(r,3,2);break;case 4:i.appendChars(r,0,4),i.append("00000"),i.append(r[4]);break;default:i.appendChars(r,0,5),i.append("0000"),i.append(a);break}return e.length>=8&&i.append(e.charAt(7)),i.toString()},t.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),t.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,1])],t}(Cn),Kk=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),yS=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Iv=function(n){Kk(t,n);function t(e){var r=n.call(this)||this,i=e==null?null:e.get(Ye.POSSIBLE_FORMATS),a=[];return i!=null&&(i.indexOf(Pt.EAN_13)>-1&&a.push(new zy),i.indexOf(Pt.UPC_A)>-1&&a.push(new mS),i.indexOf(Pt.EAN_8)>-1&&a.push(new pS),i.indexOf(Pt.UPC_E)>-1&&a.push(new vS)),a.length===0&&(a.push(new zy),a.push(new mS),a.push(new pS),a.push(new vS)),r.readers=a,r}return t.prototype.decodeRow=function(e,r,i){var a,s;try{for(var l=yS(this.readers),c=l.next();!c.done;c=l.next()){var f=c.value;try{var d=f.decodeRow(e,r,i),g=d.getBarcodeFormat()===Pt.EAN_13&&d.getText().charAt(0)==="0",m=i==null?null:i.get(Ye.POSSIBLE_FORMATS),v=m==null||m.includes(Pt.UPC_A);if(g&&v){var _=d.getRawBytes(),w=new pr(d.getText().substring(1),_,_?_.length:null,d.getResultPoints(),Pt.UPC_A);return w.putAllMetadata(d.getResultMetadata()),w}return d}catch{}}}catch(b){a={error:b}}finally{try{c&&!c.done&&(s=l.return)&&s.call(l)}finally{if(a)throw a.error}}throw new ot},t.prototype.reset=function(){var e,r;try{for(var i=yS(this.readers),a=i.next();!a.done;a=i.next()){var s=a.value;s.reset()}}catch(l){e={error:l}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(e)throw e.error}}},t}(Mn),Zk=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Qk=function(n){Zk(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.CODA_BAR_CHAR_SET={nnnnnww:"0",nnnnwwn:"1",nnnwnnw:"2",wwnnnnn:"3",nnwnnwn:"4",wnnnnwn:"5",nwnnnnw:"6",nwnnwnn:"7",nwwnnnn:"8",wnnwnnn:"9",nnnwwnn:"-",nnwwnnn:"$",wnnnwnw:":",wnwnnnw:"/",wnwnwnn:".",nnwwwww:"+",nnwwnwn:"A",nwnwnnw:"B",nnnwnww:"C",nnnwwwn:"D"},e}return t.prototype.decodeRow=function(e,r,i){var a=this.getValidRowData(r);if(!a)throw new ot;var s=this.codaBarDecodeRow(a.row);if(!s)throw new ot;return new pr(s,null,0,[new Ct(a.left,e),new Ct(a.right,e)],Pt.CODABAR,new Date().getTime())},t.prototype.getValidRowData=function(e){var r=e.toArray(),i=r.indexOf(!0);if(i===-1)return null;var a=r.lastIndexOf(!0);if(a<=i)return null;r=r.slice(i,a+1);for(var s=[],l=r[0],c=1,f=1;f<r.length;f++)r[f]===l?c++:(l=r[f],s.push(c),c=1);return s.push(c),s.length<23&&(s.length+1)%8!==0?null:{row:s,left:i,right:a}},t.prototype.codaBarDecodeRow=function(e){for(var r=[],i=Math.ceil(e.reduce(function(c,f){return(c+f)/2},0));e.length>0;){var a=e.splice(0,8).splice(0,7),s=a.map(function(c){return c<i?"n":"w"}).join("");if(this.CODA_BAR_CHAR_SET[s]===void 0)return null;r.push(this.CODA_BAR_CHAR_SET[s])}var l=r.join("");return this.validCodaBarString(l)?l:null},t.prototype.validCodaBarString=function(e){var r=/^[A-D].{1,}[A-D]$/;return r.test(e)},t}(Mn),Jk=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),tL=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},pl=function(n){Jk(t,n);function t(){var e=n.call(this)||this;return e.decodeFinderCounters=new Int32Array(4),e.dataCharacterCounters=new Int32Array(8),e.oddRoundingErrors=new Array(4),e.evenRoundingErrors=new Array(4),e.oddCounts=new Array(e.dataCharacterCounters.length/2),e.evenCounts=new Array(e.dataCharacterCounters.length/2),e}return t.prototype.getDecodeFinderCounters=function(){return this.decodeFinderCounters},t.prototype.getDataCharacterCounters=function(){return this.dataCharacterCounters},t.prototype.getOddRoundingErrors=function(){return this.oddRoundingErrors},t.prototype.getEvenRoundingErrors=function(){return this.evenRoundingErrors},t.prototype.getOddCounts=function(){return this.oddCounts},t.prototype.getEvenCounts=function(){return this.evenCounts},t.prototype.parseFinderValue=function(e,r){for(var i=0;i<r.length;i++)if(Mn.patternMatchVariance(e,r[i],t.MAX_INDIVIDUAL_VARIANCE)<t.MAX_AVG_VARIANCE)return i;throw new ot},t.count=function(e){return he.sum(new Int32Array(e))},t.increment=function(e,r){for(var i=0,a=r[0],s=1;s<e.length;s++)r[s]>a&&(a=r[s],i=s);e[i]++},t.decrement=function(e,r){for(var i=0,a=r[0],s=1;s<e.length;s++)r[s]<a&&(a=r[s],i=s);e[i]--},t.isFinderPattern=function(e){var r,i,a=e[0]+e[1],s=a+e[2]+e[3],l=a/s;if(l>=t.MIN_FINDER_PATTERN_RATIO&&l<=t.MAX_FINDER_PATTERN_RATIO){var c=Number.MAX_SAFE_INTEGER,f=Number.MIN_SAFE_INTEGER;try{for(var d=tL(e),g=d.next();!g.done;g=d.next()){var m=g.value;m>f&&(f=m),m<c&&(c=m)}}catch(v){r={error:v}}finally{try{g&&!g.done&&(i=d.return)&&i.call(d)}finally{if(r)throw r.error}}return f<10*c}return!1},t.MAX_AVG_VARIANCE=.2,t.MAX_INDIVIDUAL_VARIANCE=.45,t.MIN_FINDER_PATTERN_RATIO=9.5/12,t.MAX_FINDER_PATTERN_RATIO=12.5/14,t}(Mn),Y1=function(){function n(t,e){this.value=t,this.checksumPortion=e}return n.prototype.getValue=function(){return this.value},n.prototype.getChecksumPortion=function(){return this.checksumPortion},n.prototype.toString=function(){return this.value+"("+this.checksumPortion+")"},n.prototype.equals=function(t){if(!(t instanceof n))return!1;var e=t;return this.value===e.value&&this.checksumPortion===e.checksumPortion},n.prototype.hashCode=function(){return this.value^this.checksumPortion},n}(),e4=function(){function n(t,e,r,i,a){this.value=t,this.startEnd=e,this.value=t,this.startEnd=e,this.resultPoints=new Array,this.resultPoints.push(new Ct(r,a)),this.resultPoints.push(new Ct(i,a))}return n.prototype.getValue=function(){return this.value},n.prototype.getStartEnd=function(){return this.startEnd},n.prototype.getResultPoints=function(){return this.resultPoints},n.prototype.equals=function(t){if(!(t instanceof n))return!1;var e=t;return this.value===e.value},n.prototype.hashCode=function(){return this.value},n}(),eL=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Zu=function(){function n(){}return n.getRSSvalue=function(t,e,r){var i,a,s=0;try{for(var l=eL(t),c=l.next();!c.done;c=l.next()){var f=c.value;s+=f}}catch(I){i={error:I}}finally{try{c&&!c.done&&(a=l.return)&&a.call(l)}finally{if(i)throw i.error}}for(var d=0,g=0,m=t.length,v=0;v<m-1;v++){var _=void 0;for(_=1,g|=1<<v;_<t[v];_++,g&=~(1<<v)){var w=n.combins(s-_-1,m-v-2);if(r&&g===0&&s-_-(m-v-1)>=m-v-1&&(w-=n.combins(s-_-(m-v),m-v-2)),m-v-1>1){for(var b=0,C=s-_-(m-v-2);C>e;C--)b+=n.combins(s-_-C-1,m-v-3);w-=b*(m-1-v)}else s-_>e&&w--;d+=w}s-=_}return d},n.combins=function(t,e){var r,i;t-e>e?(i=e,r=t-e):(i=t-e,r=e);for(var a=1,s=1,l=t;l>r;l--)a*=l,s<=i&&(a/=s,s++);for(;s<=i;)a/=s,s++;return a},n}(),nL=function(){function n(){}return n.buildBitArray=function(t){var e=t.length*2-1;t[t.length-1].getRightChar()==null&&(e-=1);for(var r=12*e,i=new $n(r),a=0,s=t[0],l=s.getRightChar().getValue(),c=11;c>=0;--c)(l&1<<c)!==0&&i.set(a),a++;for(var c=1;c<t.length;++c){for(var f=t[c],d=f.getLeftChar().getValue(),g=11;g>=0;--g)(d&1<<g)!==0&&i.set(a),a++;if(f.getRightChar()!==null)for(var m=f.getRightChar().getValue(),g=11;g>=0;--g)(m&1<<g)!==0&&i.set(a),a++}return i},n}(),fl=function(){function n(t,e){e?this.decodedInformation=null:(this.finished=t,this.decodedInformation=e)}return n.prototype.getDecodedInformation=function(){return this.decodedInformation},n.prototype.isFinished=function(){return this.finished},n}(),y2=function(){function n(t){this.newPosition=t}return n.prototype.getNewPosition=function(){return this.newPosition},n}(),rL=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Ri=function(n){rL(t,n);function t(e,r){var i=n.call(this,e)||this;return i.value=r,i}return t.prototype.getValue=function(){return this.value},t.prototype.isFNC1=function(){return this.value===t.FNC1},t.FNC1="$",t}(y2),iL=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),hl=function(n){iL(t,n);function t(e,r,i){var a=n.call(this,e)||this;return i?(a.remaining=!0,a.remainingValue=a.remainingValue):(a.remaining=!1,a.remainingValue=0),a.newString=r,a}return t.prototype.getNewString=function(){return this.newString},t.prototype.isRemaining=function(){return this.remaining},t.prototype.getRemainingValue=function(){return this.remainingValue},t}(y2),aL=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Pu=function(n){aL(t,n);function t(e,r,i){var a=n.call(this,e)||this;if(r<0||r>10||i<0||i>10)throw new xt;return a.firstDigit=r,a.secondDigit=i,a}return t.prototype.getFirstDigit=function(){return this.firstDigit},t.prototype.getSecondDigit=function(){return this.secondDigit},t.prototype.getValue=function(){return this.firstDigit*10+this.secondDigit},t.prototype.isFirstDigitFNC1=function(){return this.firstDigit===t.FNC1},t.prototype.isSecondDigitFNC1=function(){return this.secondDigit===t.FNC1},t.prototype.isAnyFNC1=function(){return this.firstDigit===t.FNC1||this.secondDigit===t.FNC1},t.FNC1=10,t}(y2),Z0=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},sL=function(){function n(){}return n.parseFieldsInGeneralPurpose=function(t){var e,r,i,a,s,l,c,f;if(!t)return null;if(t.length<2)throw new ot;var d=t.substring(0,2);try{for(var g=Z0(n.TWO_DIGIT_DATA_LENGTH),m=g.next();!m.done;m=g.next()){var v=m.value;if(v[0]===d)return v[1]===n.VARIABLE_LENGTH?n.processVariableAI(2,v[2],t):n.processFixedAI(2,v[1],t)}}catch(k){e={error:k}}finally{try{m&&!m.done&&(r=g.return)&&r.call(g)}finally{if(e)throw e.error}}if(t.length<3)throw new ot;var _=t.substring(0,3);try{for(var w=Z0(n.THREE_DIGIT_DATA_LENGTH),b=w.next();!b.done;b=w.next()){var v=b.value;if(v[0]===_)return v[1]===n.VARIABLE_LENGTH?n.processVariableAI(3,v[2],t):n.processFixedAI(3,v[1],t)}}catch(k){i={error:k}}finally{try{b&&!b.done&&(a=w.return)&&a.call(w)}finally{if(i)throw i.error}}try{for(var C=Z0(n.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH),I=C.next();!I.done;I=C.next()){var v=I.value;if(v[0]===_)return v[1]===n.VARIABLE_LENGTH?n.processVariableAI(4,v[2],t):n.processFixedAI(4,v[1],t)}}catch(k){s={error:k}}finally{try{I&&!I.done&&(l=C.return)&&l.call(C)}finally{if(s)throw s.error}}if(t.length<4)throw new ot;var R=t.substring(0,4);try{for(var M=Z0(n.FOUR_DIGIT_DATA_LENGTH),N=M.next();!N.done;N=M.next()){var v=N.value;if(v[0]===R)return v[1]===n.VARIABLE_LENGTH?n.processVariableAI(4,v[2],t):n.processFixedAI(4,v[1],t)}}catch(k){c={error:k}}finally{try{N&&!N.done&&(f=M.return)&&f.call(M)}finally{if(c)throw c.error}}throw new ot},n.processFixedAI=function(t,e,r){if(r.length<t)throw new ot;var i=r.substring(0,t);if(r.length<t+e)throw new ot;var a=r.substring(t,t+e),s=r.substring(t+e),l="("+i+")"+a,c=n.parseFieldsInGeneralPurpose(s);return c==null?l:l+c},n.processVariableAI=function(t,e,r){var i=r.substring(0,t),a;r.length<t+e?a=r.length:a=t+e;var s=r.substring(t,a),l=r.substring(a),c="("+i+")"+s,f=n.parseFieldsInGeneralPurpose(l);return f==null?c:c+f},n.VARIABLE_LENGTH=[],n.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",n.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",n.VARIABLE_LENGTH,20],["22",n.VARIABLE_LENGTH,29],["30",n.VARIABLE_LENGTH,8],["37",n.VARIABLE_LENGTH,8],["90",n.VARIABLE_LENGTH,30],["91",n.VARIABLE_LENGTH,30],["92",n.VARIABLE_LENGTH,30],["93",n.VARIABLE_LENGTH,30],["94",n.VARIABLE_LENGTH,30],["95",n.VARIABLE_LENGTH,30],["96",n.VARIABLE_LENGTH,30],["97",n.VARIABLE_LENGTH,3],["98",n.VARIABLE_LENGTH,30],["99",n.VARIABLE_LENGTH,30]],n.THREE_DIGIT_DATA_LENGTH=[["240",n.VARIABLE_LENGTH,30],["241",n.VARIABLE_LENGTH,30],["242",n.VARIABLE_LENGTH,6],["250",n.VARIABLE_LENGTH,30],["251",n.VARIABLE_LENGTH,30],["253",n.VARIABLE_LENGTH,17],["254",n.VARIABLE_LENGTH,20],["400",n.VARIABLE_LENGTH,30],["401",n.VARIABLE_LENGTH,30],["402",17],["403",n.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",n.VARIABLE_LENGTH,20],["421",n.VARIABLE_LENGTH,15],["422",3],["423",n.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],n.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",n.VARIABLE_LENGTH,15],["391",n.VARIABLE_LENGTH,18],["392",n.VARIABLE_LENGTH,15],["393",n.VARIABLE_LENGTH,18],["703",n.VARIABLE_LENGTH,30]],n.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",n.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",n.VARIABLE_LENGTH,20],["8003",n.VARIABLE_LENGTH,30],["8004",n.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",n.VARIABLE_LENGTH,30],["8008",n.VARIABLE_LENGTH,12],["8018",18],["8020",n.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",n.VARIABLE_LENGTH,70],["8200",n.VARIABLE_LENGTH,70]],n}(),S1=function(){function n(t){this.buffer=new Wt,this.information=t}return n.prototype.decodeAllCodes=function(t,e){var r=e,i=null;do{var a=this.decodeGeneralPurposeField(r,i),s=sL.parseFieldsInGeneralPurpose(a.getNewString());if(s!=null&&t.append(s),a.isRemaining()?i=""+a.getRemainingValue():i=null,r===a.getNewPosition())break;r=a.getNewPosition()}while(!0);return t.toString()},n.prototype.isStillNumeric=function(t){if(t+7>this.information.getSize())return t+4<=this.information.getSize();for(var e=t;e<t+3;++e)if(this.information.get(e))return!0;return this.information.get(t+3)},n.prototype.decodeNumeric=function(t){if(t+7>this.information.getSize()){var e=this.extractNumericValueFromBitArray(t,4);return e===0?new Pu(this.information.getSize(),Pu.FNC1,Pu.FNC1):new Pu(this.information.getSize(),e-1,Pu.FNC1)}var r=this.extractNumericValueFromBitArray(t,7),i=(r-8)/11,a=(r-8)%11;return new Pu(t+7,i,a)},n.prototype.extractNumericValueFromBitArray=function(t,e){return n.extractNumericValueFromBitArray(this.information,t,e)},n.extractNumericValueFromBitArray=function(t,e,r){for(var i=0,a=0;a<r;++a)t.get(e+a)&&(i|=1<<r-a-1);return i},n.prototype.decodeGeneralPurposeField=function(t,e){this.buffer.setLengthToZero(),e!=null&&this.buffer.append(e),this.current.setPosition(t);var r=this.parseBlocks();return r!=null&&r.isRemaining()?new hl(this.current.getPosition(),this.buffer.toString(),r.getRemainingValue()):new hl(this.current.getPosition(),this.buffer.toString())},n.prototype.parseBlocks=function(){var t,e;do{var r=this.current.getPosition();this.current.isAlpha()?(e=this.parseAlphaBlock(),t=e.isFinished()):this.current.isIsoIec646()?(e=this.parseIsoIec646Block(),t=e.isFinished()):(e=this.parseNumericBlock(),t=e.isFinished());var i=r!==this.current.getPosition();if(!i&&!t)break}while(!t);return e.getDecodedInformation()},n.prototype.parseNumericBlock=function(){for(;this.isStillNumeric(this.current.getPosition());){var t=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(t.getNewPosition()),t.isFirstDigitFNC1()){var e=void 0;return t.isSecondDigitFNC1()?e=new hl(this.current.getPosition(),this.buffer.toString()):e=new hl(this.current.getPosition(),this.buffer.toString(),t.getSecondDigit()),new fl(!0,e)}if(this.buffer.append(t.getFirstDigit()),t.isSecondDigitFNC1()){var e=new hl(this.current.getPosition(),this.buffer.toString());return new fl(!0,e)}this.buffer.append(t.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new fl(!1)},n.prototype.parseIsoIec646Block=function(){for(;this.isStillIsoIec646(this.current.getPosition());){var t=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(t.getNewPosition()),t.isFNC1()){var e=new hl(this.current.getPosition(),this.buffer.toString());return new fl(!0,e)}this.buffer.append(t.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new fl(!1)},n.prototype.parseAlphaBlock=function(){for(;this.isStillAlpha(this.current.getPosition());){var t=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(t.getNewPosition()),t.isFNC1()){var e=new hl(this.current.getPosition(),this.buffer.toString());return new fl(!0,e)}this.buffer.append(t.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new fl(!1)},n.prototype.isStillIsoIec646=function(t){if(t+5>this.information.getSize())return!1;var e=this.extractNumericValueFromBitArray(t,5);if(e>=5&&e<16)return!0;if(t+7>this.information.getSize())return!1;var r=this.extractNumericValueFromBitArray(t,7);if(r>=64&&r<116)return!0;if(t+8>this.information.getSize())return!1;var i=this.extractNumericValueFromBitArray(t,8);return i>=232&&i<253},n.prototype.decodeIsoIec646=function(t){var e=this.extractNumericValueFromBitArray(t,5);if(e===15)return new Ri(t+5,Ri.FNC1);if(e>=5&&e<15)return new Ri(t+5,"0"+(e-5));var r=this.extractNumericValueFromBitArray(t,7);if(r>=64&&r<90)return new Ri(t+7,""+(r+1));if(r>=90&&r<116)return new Ri(t+7,""+(r+7));var i=this.extractNumericValueFromBitArray(t,8),a;switch(i){case 232:a="!";break;case 233:a='"';break;case 234:a="%";break;case 235:a="&";break;case 236:a="'";break;case 237:a="(";break;case 238:a=")";break;case 239:a="*";break;case 240:a="+";break;case 241:a=",";break;case 242:a="-";break;case 243:a=".";break;case 244:a="/";break;case 245:a=":";break;case 246:a=";";break;case 247:a="<";break;case 248:a="=";break;case 249:a=">";break;case 250:a="?";break;case 251:a="_";break;case 252:a=" ";break;default:throw new xt}return new Ri(t+8,a)},n.prototype.isStillAlpha=function(t){if(t+5>this.information.getSize())return!1;var e=this.extractNumericValueFromBitArray(t,5);if(e>=5&&e<16)return!0;if(t+6>this.information.getSize())return!1;var r=this.extractNumericValueFromBitArray(t,6);return r>=16&&r<63},n.prototype.decodeAlphanumeric=function(t){var e=this.extractNumericValueFromBitArray(t,5);if(e===15)return new Ri(t+5,Ri.FNC1);if(e>=5&&e<15)return new Ri(t+5,"0"+(e-5));var r=this.extractNumericValueFromBitArray(t,6);if(r>=32&&r<58)return new Ri(t+6,""+(r+33));var i;switch(r){case 58:i="*";break;case 59:i=",";break;case 60:i="-";break;case 61:i=".";break;case 62:i="/";break;default:throw new od("Decoding invalid alphanumeric value: "+r)}return new Ri(t+6,i)},n.prototype.isAlphaTo646ToAlphaLatch=function(t){if(t+1>this.information.getSize())return!1;for(var e=0;e<5&&e+t<this.information.getSize();++e)if(e===2){if(!this.information.get(t+2))return!1}else if(this.information.get(t+e))return!1;return!0},n.prototype.isAlphaOr646ToNumericLatch=function(t){if(t+3>this.information.getSize())return!1;for(var e=t;e<t+3;++e)if(this.information.get(e))return!1;return!0},n.prototype.isNumericToAlphaNumericLatch=function(t){if(t+1>this.information.getSize())return!1;for(var e=0;e<4&&e+t<this.information.getSize();++e)if(this.information.get(t+e))return!1;return!0},n}(),n4=function(){function n(t){this.information=t,this.generalDecoder=new S1(t)}return n.prototype.getInformation=function(){return this.information},n.prototype.getGeneralDecoder=function(){return this.generalDecoder},n}(),oL=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Oi=function(n){oL(t,n);function t(e){return n.call(this,e)||this}return t.prototype.encodeCompressedGtin=function(e,r){e.append("(01)");var i=e.length();e.append("9"),this.encodeCompressedGtinWithoutAI(e,r,i)},t.prototype.encodeCompressedGtinWithoutAI=function(e,r,i){for(var a=0;a<4;++a){var s=this.getGeneralDecoder().extractNumericValueFromBitArray(r+10*a,10);s/100===0&&e.append("0"),s/10===0&&e.append("0"),e.append(s)}t.appendCheckDigit(e,i)},t.appendCheckDigit=function(e,r){for(var i=0,a=0;a<13;a++){var s=e.charAt(a+r).charCodeAt(0)-48;i+=(a&1)===0?3*s:s}i=10-i%10,i===10&&(i=0),e.append(i)},t.GTIN_SIZE=40,t}(n4),lL=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),uL=function(n){lL(t,n);function t(e){return n.call(this,e)||this}return t.prototype.parseInformation=function(){var e=new Wt;e.append("(01)");var r=e.length(),i=this.getGeneralDecoder().extractNumericValueFromBitArray(t.HEADER_SIZE,4);return e.append(i),this.encodeCompressedGtinWithoutAI(e,t.HEADER_SIZE+4,r),this.getGeneralDecoder().decodeAllCodes(e,t.HEADER_SIZE+44)},t.HEADER_SIZE=4,t}(Oi),cL=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),fL=function(n){cL(t,n);function t(e){return n.call(this,e)||this}return t.prototype.parseInformation=function(){var e=new Wt;return this.getGeneralDecoder().decodeAllCodes(e,t.HEADER_SIZE)},t.HEADER_SIZE=5,t}(n4),hL=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),T1=function(n){hL(t,n);function t(e){return n.call(this,e)||this}return t.prototype.encodeCompressedWeight=function(e,r,i){var a=this.getGeneralDecoder().extractNumericValueFromBitArray(r,i);this.addWeightCode(e,a);for(var s=this.checkWeight(a),l=1e5,c=0;c<5;++c)s/l===0&&e.append("0"),l/=10;e.append(s)},t}(Oi),dL=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),r4=function(n){dL(t,n);function t(e){return n.call(this,e)||this}return t.prototype.parseInformation=function(){if(this.getInformation().getSize()!==t.HEADER_SIZE+T1.GTIN_SIZE+t.WEIGHT_SIZE)throw new ot;var e=new Wt;return this.encodeCompressedGtin(e,t.HEADER_SIZE),this.encodeCompressedWeight(e,t.HEADER_SIZE+T1.GTIN_SIZE,t.WEIGHT_SIZE),e.toString()},t.HEADER_SIZE=5,t.WEIGHT_SIZE=15,t}(T1),gL=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),pL=function(n){gL(t,n);function t(e){return n.call(this,e)||this}return t.prototype.addWeightCode=function(e,r){e.append("(3103)")},t.prototype.checkWeight=function(e){return e},t}(r4),mL=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),vL=function(n){mL(t,n);function t(e){return n.call(this,e)||this}return t.prototype.addWeightCode=function(e,r){r<1e4?e.append("(3202)"):e.append("(3203)")},t.prototype.checkWeight=function(e){return e<1e4?e:e-1e4},t}(r4),yL=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),xL=function(n){yL(t,n);function t(e){return n.call(this,e)||this}return t.prototype.parseInformation=function(){if(this.getInformation().getSize()<t.HEADER_SIZE+Oi.GTIN_SIZE)throw new ot;var e=new Wt;this.encodeCompressedGtin(e,t.HEADER_SIZE);var r=this.getGeneralDecoder().extractNumericValueFromBitArray(t.HEADER_SIZE+Oi.GTIN_SIZE,t.LAST_DIGIT_SIZE);e.append("(392"),e.append(r),e.append(")");var i=this.getGeneralDecoder().decodeGeneralPurposeField(t.HEADER_SIZE+Oi.GTIN_SIZE+t.LAST_DIGIT_SIZE,null);return e.append(i.getNewString()),e.toString()},t.HEADER_SIZE=8,t.LAST_DIGIT_SIZE=2,t}(Oi),_L=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),AL=function(n){_L(t,n);function t(e){return n.call(this,e)||this}return t.prototype.parseInformation=function(){if(this.getInformation().getSize()<t.HEADER_SIZE+Oi.GTIN_SIZE)throw new ot;var e=new Wt;this.encodeCompressedGtin(e,t.HEADER_SIZE);var r=this.getGeneralDecoder().extractNumericValueFromBitArray(t.HEADER_SIZE+Oi.GTIN_SIZE,t.LAST_DIGIT_SIZE);e.append("(393"),e.append(r),e.append(")");var i=this.getGeneralDecoder().extractNumericValueFromBitArray(t.HEADER_SIZE+Oi.GTIN_SIZE+t.LAST_DIGIT_SIZE,t.FIRST_THREE_DIGITS_SIZE);i/100===0&&e.append("0"),i/10===0&&e.append("0"),e.append(i);var a=this.getGeneralDecoder().decodeGeneralPurposeField(t.HEADER_SIZE+Oi.GTIN_SIZE+t.LAST_DIGIT_SIZE+t.FIRST_THREE_DIGITS_SIZE,null);return e.append(a.getNewString()),e.toString()},t.HEADER_SIZE=8,t.LAST_DIGIT_SIZE=2,t.FIRST_THREE_DIGITS_SIZE=10,t}(Oi),EL=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Ys=function(n){EL(t,n);function t(e,r,i){var a=n.call(this,e)||this;return a.dateCode=i,a.firstAIdigits=r,a}return t.prototype.parseInformation=function(){if(this.getInformation().getSize()!==t.HEADER_SIZE+t.GTIN_SIZE+t.WEIGHT_SIZE+t.DATE_SIZE)throw new ot;var e=new Wt;return this.encodeCompressedGtin(e,t.HEADER_SIZE),this.encodeCompressedWeight(e,t.HEADER_SIZE+t.GTIN_SIZE,t.WEIGHT_SIZE),this.encodeCompressedDate(e,t.HEADER_SIZE+t.GTIN_SIZE+t.WEIGHT_SIZE),e.toString()},t.prototype.encodeCompressedDate=function(e,r){var i=this.getGeneralDecoder().extractNumericValueFromBitArray(r,t.DATE_SIZE);if(i!==38400){e.append("("),e.append(this.dateCode),e.append(")");var a=i%32;i/=32;var s=i%12+1;i/=12;var l=i;l/10===0&&e.append("0"),e.append(l),s/10===0&&e.append("0"),e.append(s),a/10===0&&e.append("0"),e.append(a)}},t.prototype.addWeightCode=function(e,r){e.append("("),e.append(this.firstAIdigits),e.append(r/1e5),e.append(")")},t.prototype.checkWeight=function(e){return e%1e5},t.HEADER_SIZE=8,t.WEIGHT_SIZE=20,t.DATE_SIZE=16,t}(T1);function wL(n){try{if(n.get(1))return new uL(n);if(!n.get(2))return new fL(n);var t=S1.extractNumericValueFromBitArray(n,1,4);switch(t){case 4:return new pL(n);case 5:return new vL(n)}var e=S1.extractNumericValueFromBitArray(n,1,5);switch(e){case 12:return new xL(n);case 13:return new AL(n)}var r=S1.extractNumericValueFromBitArray(n,1,7);switch(r){case 56:return new Ys(n,"310","11");case 57:return new Ys(n,"320","11");case 58:return new Ys(n,"310","13");case 59:return new Ys(n,"320","13");case 60:return new Ys(n,"310","15");case 61:return new Ys(n,"320","15");case 62:return new Ys(n,"310","17");case 63:return new Ys(n,"320","17")}}catch(i){throw console.log(i),new od("unknown decoder: "+n)}}var xS=function(){function n(t,e,r,i){this.leftchar=t,this.rightchar=e,this.finderpattern=r,this.maybeLast=i}return n.prototype.mayBeLast=function(){return this.maybeLast},n.prototype.getLeftChar=function(){return this.leftchar},n.prototype.getRightChar=function(){return this.rightchar},n.prototype.getFinderPattern=function(){return this.finderpattern},n.prototype.mustBeLast=function(){return this.rightchar==null},n.prototype.toString=function(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"},n.equals=function(t,e){return t instanceof n?n.equalsOrNull(t.leftchar,e.leftchar)&&n.equalsOrNull(t.rightchar,e.rightchar)&&n.equalsOrNull(t.finderpattern,e.finderpattern):!1},n.equalsOrNull=function(t,e){return t===null?e===null:n.equals(t,e)},n.prototype.hashCode=function(){var t=this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue();return t},n}(),bL=function(){function n(t,e,r){this.pairs=t,this.rowNumber=e,this.wasReversed=r}return n.prototype.getPairs=function(){return this.pairs},n.prototype.getRowNumber=function(){return this.rowNumber},n.prototype.isReversed=function(){return this.wasReversed},n.prototype.isEquivalent=function(t){return this.checkEqualitity(this,t)},n.prototype.toString=function(){return"{ "+this.pairs+" }"},n.prototype.equals=function(t,e){return t instanceof n?this.checkEqualitity(t,e)&&t.wasReversed===e.wasReversed:!1},n.prototype.checkEqualitity=function(t,e){if(!(!t||!e)){var r;return t.forEach(function(i,a){e.forEach(function(s){i.getLeftChar().getValue()===s.getLeftChar().getValue()&&i.getRightChar().getValue()===s.getRightChar().getValue()&&i.getFinderPatter().getValue()===s.getFinderPatter().getValue()&&(r=!0)})}),r}},n}(),SL=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Ks=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},TL=function(n){SL(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.pairs=new Array(t.MAX_PAIRS),e.rows=new Array,e.startEnd=[2],e}return t.prototype.decodeRow=function(e,r,i){this.pairs.length=0,this.startFromEven=!1;try{return t.constructResult(this.decodeRow2pairs(e,r))}catch{}return this.pairs.length=0,this.startFromEven=!0,t.constructResult(this.decodeRow2pairs(e,r))},t.prototype.reset=function(){this.pairs.length=0,this.rows.length=0},t.prototype.decodeRow2pairs=function(e,r){for(var i=!1;!i;)try{this.pairs.push(this.retrieveNextPair(r,this.pairs,e))}catch(l){if(l instanceof ot){if(!this.pairs.length)throw new ot;i=!0}}if(this.checkChecksum())return this.pairs;var a;if(this.rows.length?a=!0:a=!1,this.storeRow(e,!1),a){var s=this.checkRowsBoolean(!1);if(s!=null||(s=this.checkRowsBoolean(!0),s!=null))return s}throw new ot},t.prototype.checkRowsBoolean=function(e){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,e&&(this.rows=this.rows.reverse());var r=null;try{r=this.checkRows(new Array,0)}catch(i){console.log(i)}return e&&(this.rows=this.rows.reverse()),r},t.prototype.checkRows=function(e,r){for(var i,a,s=r;s<this.rows.length;s++){var l=this.rows[s];this.pairs.length=0;try{for(var c=(i=void 0,Ks(e)),f=c.next();!f.done;f=c.next()){var d=f.value;this.pairs.push(d.getPairs())}}catch(m){i={error:m}}finally{try{f&&!f.done&&(a=c.return)&&a.call(c)}finally{if(i)throw i.error}}if(this.pairs.push(l.getPairs()),!!t.isValidSequence(this.pairs)){if(this.checkChecksum())return this.pairs;var g=new Array(e);g.push(l);try{return this.checkRows(g,s+1)}catch(m){console.log(m)}}}throw new ot},t.isValidSequence=function(e){var r,i;try{for(var a=Ks(t.FINDER_PATTERN_SEQUENCES),s=a.next();!s.done;s=a.next()){var l=s.value;if(!(e.length>l.length)){for(var c=!0,f=0;f<e.length;f++)if(e[f].getFinderPattern().getValue()!==l[f]){c=!1;break}if(c)return!0}}}catch(d){r={error:d}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}return!1},t.prototype.storeRow=function(e,r){for(var i=0,a=!1,s=!1;i<this.rows.length;){var l=this.rows[i];if(l.getRowNumber()>e){s=l.isEquivalent(this.pairs);break}a=l.isEquivalent(this.pairs),i++}s||a||t.isPartialRow(this.pairs,this.rows)||(this.rows.push(i,new bL(this.pairs,e,r)),this.removePartialRows(this.pairs,this.rows))},t.prototype.removePartialRows=function(e,r){var i,a,s,l,c,f;try{for(var d=Ks(r),g=d.next();!g.done;g=d.next()){var m=g.value;if(m.getPairs().length!==e.length){var v=!0;try{for(var _=(s=void 0,Ks(m.getPairs())),w=_.next();!w.done;w=_.next()){var b=w.value,C=!1;try{for(var I=(c=void 0,Ks(e)),R=I.next();!R.done;R=I.next()){var M=R.value;if(xS.equals(b,M)){C=!0;break}}}catch(N){c={error:N}}finally{try{R&&!R.done&&(f=I.return)&&f.call(I)}finally{if(c)throw c.error}}C||(v=!1)}}catch(N){s={error:N}}finally{try{w&&!w.done&&(l=_.return)&&l.call(_)}finally{if(s)throw s.error}}}}}catch(N){i={error:N}}finally{try{g&&!g.done&&(a=d.return)&&a.call(d)}finally{if(i)throw i.error}}},t.isPartialRow=function(e,r){var i,a,s,l,c,f;try{for(var d=Ks(r),g=d.next();!g.done;g=d.next()){var m=g.value,v=!0;try{for(var _=(s=void 0,Ks(e)),w=_.next();!w.done;w=_.next()){var b=w.value,C=!1;try{for(var I=(c=void 0,Ks(m.getPairs())),R=I.next();!R.done;R=I.next()){var M=R.value;if(b.equals(M)){C=!0;break}}}catch(N){c={error:N}}finally{try{R&&!R.done&&(f=I.return)&&f.call(I)}finally{if(c)throw c.error}}if(!C){v=!1;break}}}catch(N){s={error:N}}finally{try{w&&!w.done&&(l=_.return)&&l.call(_)}finally{if(s)throw s.error}}if(v)return!0}}catch(N){i={error:N}}finally{try{g&&!g.done&&(a=d.return)&&a.call(d)}finally{if(i)throw i.error}}return!1},t.prototype.getRows=function(){return this.rows},t.constructResult=function(e){var r=nL.buildBitArray(e),i=wL(r),a=i.parseInformation(),s=e[0].getFinderPattern().getResultPoints(),l=e[e.length-1].getFinderPattern().getResultPoints(),c=[s[0],s[1],l[0],l[1]];return new pr(a,null,null,c,Pt.RSS_EXPANDED,null)},t.prototype.checkChecksum=function(){var e=this.pairs.get(0),r=e.getLeftChar(),i=e.getRightChar();if(i===null)return!1;for(var a=i.getChecksumPortion(),s=2,l=1;l<this.pairs.size();++l){var c=this.pairs.get(l);a+=c.getLeftChar().getChecksumPortion(),s++;var f=c.getRightChar();f!=null&&(a+=f.getChecksumPortion(),s++)}a%=211;var d=211*(s-4)+a;return d===r.getValue()},t.getNextSecondBar=function(e,r){var i;return e.get(r)?(i=e.getNextUnset(r),i=e.getNextSet(i)):(i=e.getNextSet(r),i=e.getNextUnset(i)),i},t.prototype.retrieveNextPair=function(e,r,i){var a=r.length%2===0;this.startFromEven&&(a=!a);var s,l=!0,c=-1;do this.findNextPair(e,r,c),s=this.parseFoundFinderPattern(e,i,a),s===null?c=t.getNextSecondBar(e,this.startEnd[0]):l=!1;while(l);var f=this.decodeDataCharacter(e,s,a,!0);if(!this.isEmptyPair(r)&&r[r.length-1].mustBeLast())throw new ot;var d;try{d=this.decodeDataCharacter(e,s,a,!1)}catch(g){d=null,console.log(g)}return new xS(f,d,s,!0)},t.prototype.isEmptyPair=function(e){return e.length===0},t.prototype.findNextPair=function(e,r,i){var a=this.getDecodeFinderCounters();a[0]=0,a[1]=0,a[2]=0,a[3]=0;var s=e.getSize(),l;if(i>=0)l=i;else if(this.isEmptyPair(r))l=0;else{var c=r[r.length-1];l=c.getFinderPattern().getStartEnd()[1]}var f=r.length%2!==0;this.startFromEven&&(f=!f);for(var d=!1;l<s&&(d=!e.get(l),!!d);)l++;for(var g=0,m=l,v=l;v<s;v++)if(e.get(v)!==d)a[g]++;else{if(g===3){if(f&&t.reverseCounters(a),t.isFinderPattern(a)){this.startEnd[0]=m,this.startEnd[1]=v;return}f&&t.reverseCounters(a),m+=a[0]+a[1],a[0]=a[2],a[1]=a[3],a[2]=0,a[3]=0,g--}else g++;a[g]=1,d=!d}throw new ot},t.reverseCounters=function(e){for(var r=e.length,i=0;i<r/2;++i){var a=e[i];e[i]=e[r-i-1],e[r-i-1]=a}},t.prototype.parseFoundFinderPattern=function(e,r,i){var a,s,l;if(i){for(var c=this.startEnd[0]-1;c>=0&&!e.get(c);)c--;c++,a=this.startEnd[0]-c,s=c,l=this.startEnd[1]}else s=this.startEnd[0],l=e.getNextUnset(this.startEnd[1]+1),a=l-this.startEnd[1];var f=this.getDecodeFinderCounters();je.arraycopy(f,0,f,1,f.length-1),f[0]=a;var d;try{d=this.parseFinderValue(f,t.FINDER_PATTERNS)}catch{return null}return new e4(d,[s,l],s,l,r)},t.prototype.decodeDataCharacter=function(e,r,i,a){for(var s=this.getDataCharacterCounters(),l=0;l<s.length;l++)s[l]=0;if(a)t.recordPatternInReverse(e,r.getStartEnd()[0],s);else{t.recordPattern(e,r.getStartEnd()[1],s);for(var c=0,f=s.length-1;c<f;c++,f--){var d=s[c];s[c]=s[f],s[f]=d}}var g=17,m=he.sum(new Int32Array(s))/g,v=(r.getStartEnd()[1]-r.getStartEnd()[0])/15;if(Math.abs(m-v)/v>.3)throw new ot;for(var _=this.getOddCounts(),w=this.getEvenCounts(),b=this.getOddRoundingErrors(),C=this.getEvenRoundingErrors(),c=0;c<s.length;c++){var I=1*s[c]/m,R=I+.5;if(R<1){if(I<.3)throw new ot;R=1}else if(R>8){if(I>8.7)throw new ot;R=8}var M=c/2;(c&1)===0?(_[M]=R,b[M]=I-R):(w[M]=R,C[M]=I-R)}this.adjustOddEvenCounts(g);for(var N=4*r.getValue()+(i?0:2)+(a?0:1)-1,k=0,O=0,c=_.length-1;c>=0;c--){if(t.isNotA1left(r,i,a)){var S=t.WEIGHTS[N][2*c];O+=_[c]*S}k+=_[c]}for(var D=0,c=w.length-1;c>=0;c--)if(t.isNotA1left(r,i,a)){var S=t.WEIGHTS[N][2*c+1];D+=w[c]*S}var V=O+D;if((k&1)!==0||k>13||k<4)throw new ot;var B=(13-k)/2,F=t.SYMBOL_WIDEST[B],j=9-F,rt=Zu.getRSSvalue(_,F,!0),mt=Zu.getRSSvalue(w,j,!1),q=t.EVEN_TOTAL_SUBSET[B],Z=t.GSUM[B],it=rt*q+mt+Z;return new Y1(it,V)},t.isNotA1left=function(e,r,i){return!(e.getValue()===0&&r&&i)},t.prototype.adjustOddEvenCounts=function(e){var r=he.sum(new Int32Array(this.getOddCounts())),i=he.sum(new Int32Array(this.getEvenCounts())),a=!1,s=!1;r>13?s=!0:r<4&&(a=!0);var l=!1,c=!1;i>13?c=!0:i<4&&(l=!0);var f=r+i-e,d=(r&1)===1,g=(i&1)===0;if(f===1)if(d){if(g)throw new ot;s=!0}else{if(!g)throw new ot;c=!0}else if(f===-1)if(d){if(g)throw new ot;a=!0}else{if(!g)throw new ot;l=!0}else if(f===0){if(d){if(!g)throw new ot;r<i?(a=!0,c=!0):(s=!0,l=!0)}else if(g)throw new ot}else throw new ot;if(a){if(s)throw new ot;t.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(s&&t.decrement(this.getOddCounts(),this.getOddRoundingErrors()),l){if(c)throw new ot;t.increment(this.getEvenCounts(),this.getOddRoundingErrors())}c&&t.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},t.SYMBOL_WIDEST=[7,5,4,3,1],t.EVEN_TOTAL_SUBSET=[4,20,52,104,204],t.GSUM=[0,348,1388,2948,3988],t.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],t.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],t.FINDER_PAT_A=0,t.FINDER_PAT_B=1,t.FINDER_PAT_C=2,t.FINDER_PAT_D=3,t.FINDER_PAT_E=4,t.FINDER_PAT_F=5,t.FINDER_PATTERN_SEQUENCES=[[t.FINDER_PAT_A,t.FINDER_PAT_A],[t.FINDER_PAT_A,t.FINDER_PAT_B,t.FINDER_PAT_B],[t.FINDER_PAT_A,t.FINDER_PAT_C,t.FINDER_PAT_B,t.FINDER_PAT_D],[t.FINDER_PAT_A,t.FINDER_PAT_E,t.FINDER_PAT_B,t.FINDER_PAT_D,t.FINDER_PAT_C],[t.FINDER_PAT_A,t.FINDER_PAT_E,t.FINDER_PAT_B,t.FINDER_PAT_D,t.FINDER_PAT_D,t.FINDER_PAT_F],[t.FINDER_PAT_A,t.FINDER_PAT_E,t.FINDER_PAT_B,t.FINDER_PAT_D,t.FINDER_PAT_E,t.FINDER_PAT_F,t.FINDER_PAT_F],[t.FINDER_PAT_A,t.FINDER_PAT_A,t.FINDER_PAT_B,t.FINDER_PAT_B,t.FINDER_PAT_C,t.FINDER_PAT_C,t.FINDER_PAT_D,t.FINDER_PAT_D],[t.FINDER_PAT_A,t.FINDER_PAT_A,t.FINDER_PAT_B,t.FINDER_PAT_B,t.FINDER_PAT_C,t.FINDER_PAT_C,t.FINDER_PAT_D,t.FINDER_PAT_E,t.FINDER_PAT_E],[t.FINDER_PAT_A,t.FINDER_PAT_A,t.FINDER_PAT_B,t.FINDER_PAT_B,t.FINDER_PAT_C,t.FINDER_PAT_C,t.FINDER_PAT_D,t.FINDER_PAT_E,t.FINDER_PAT_F,t.FINDER_PAT_F],[t.FINDER_PAT_A,t.FINDER_PAT_A,t.FINDER_PAT_B,t.FINDER_PAT_B,t.FINDER_PAT_C,t.FINDER_PAT_D,t.FINDER_PAT_D,t.FINDER_PAT_E,t.FINDER_PAT_E,t.FINDER_PAT_F,t.FINDER_PAT_F]],t.MAX_PAIRS=11,t}(pl),CL=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),IL=function(n){CL(t,n);function t(e,r,i){var a=n.call(this,e,r)||this;return a.count=0,a.finderPattern=i,a}return t.prototype.getFinderPattern=function(){return this.finderPattern},t.prototype.getCount=function(){return this.count},t.prototype.incrementCount=function(){this.count++},t}(Y1),RL=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Rv=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},_S=function(n){RL(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.possibleLeftPairs=[],e.possibleRightPairs=[],e}return t.prototype.decodeRow=function(e,r,i){var a,s,l,c,f=this.decodePair(r,!1,e,i);t.addOrTally(this.possibleLeftPairs,f),r.reverse();var d=this.decodePair(r,!0,e,i);t.addOrTally(this.possibleRightPairs,d),r.reverse();try{for(var g=Rv(this.possibleLeftPairs),m=g.next();!m.done;m=g.next()){var v=m.value;if(v.getCount()>1)try{for(var _=(l=void 0,Rv(this.possibleRightPairs)),w=_.next();!w.done;w=_.next()){var b=w.value;if(b.getCount()>1&&t.checkChecksum(v,b))return t.constructResult(v,b)}}catch(C){l={error:C}}finally{try{w&&!w.done&&(c=_.return)&&c.call(_)}finally{if(l)throw l.error}}}}catch(C){a={error:C}}finally{try{m&&!m.done&&(s=g.return)&&s.call(g)}finally{if(a)throw a.error}}throw new ot},t.addOrTally=function(e,r){var i,a;if(r!=null){var s=!1;try{for(var l=Rv(e),c=l.next();!c.done;c=l.next()){var f=c.value;if(f.getValue()===r.getValue()){f.incrementCount(),s=!0;break}}}catch(d){i={error:d}}finally{try{c&&!c.done&&(a=l.return)&&a.call(l)}finally{if(i)throw i.error}}s||e.push(r)}},t.prototype.reset=function(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0},t.constructResult=function(e,r){for(var i=4537077*e.getValue()+r.getValue(),a=new String(i).toString(),s=new Wt,l=13-a.length;l>0;l--)s.append("0");s.append(a);for(var c=0,l=0;l<13;l++){var f=s.charAt(l).charCodeAt(0)-48;c+=(l&1)===0?3*f:f}c=10-c%10,c===10&&(c=0),s.append(c.toString());var d=e.getFinderPattern().getResultPoints(),g=r.getFinderPattern().getResultPoints();return new pr(s.toString(),null,0,[d[0],d[1],g[0],g[1]],Pt.RSS_14,new Date().getTime())},t.checkChecksum=function(e,r){var i=(e.getChecksumPortion()+16*r.getChecksumPortion())%79,a=9*e.getFinderPattern().getValue()+r.getFinderPattern().getValue();return a>72&&a--,a>8&&a--,i===a},t.prototype.decodePair=function(e,r,i,a){try{var s=this.findFinderPattern(e,r),l=this.parseFoundFinderPattern(e,i,r,s),c=a==null?null:a.get(Ye.NEED_RESULT_POINT_CALLBACK);if(c!=null){var f=(s[0]+s[1])/2;r&&(f=e.getSize()-1-f),c.foundPossibleResultPoint(new Ct(f,i))}var d=this.decodeDataCharacter(e,l,!0),g=this.decodeDataCharacter(e,l,!1);return new IL(1597*d.getValue()+g.getValue(),d.getChecksumPortion()+4*g.getChecksumPortion(),l)}catch{return null}},t.prototype.decodeDataCharacter=function(e,r,i){for(var a=this.getDataCharacterCounters(),s=0;s<a.length;s++)a[s]=0;if(i)Mn.recordPatternInReverse(e,r.getStartEnd()[0],a);else{Mn.recordPattern(e,r.getStartEnd()[1]+1,a);for(var l=0,c=a.length-1;l<c;l++,c--){var f=a[l];a[l]=a[c],a[c]=f}}for(var d=i?16:15,g=he.sum(new Int32Array(a))/d,m=this.getOddCounts(),v=this.getEvenCounts(),_=this.getOddRoundingErrors(),w=this.getEvenRoundingErrors(),l=0;l<a.length;l++){var b=a[l]/g,C=Math.floor(b+.5);C<1?C=1:C>8&&(C=8);var I=Math.floor(l/2);(l&1)===0?(m[I]=C,_[I]=b-C):(v[I]=C,w[I]=b-C)}this.adjustOddEvenCounts(i,d);for(var R=0,M=0,l=m.length-1;l>=0;l--)M*=9,M+=m[l],R+=m[l];for(var N=0,k=0,l=v.length-1;l>=0;l--)N*=9,N+=v[l],k+=v[l];var O=M+3*N;if(i){if((R&1)!==0||R>12||R<4)throw new ot;var S=(12-R)/2,D=t.OUTSIDE_ODD_WIDEST[S],V=9-D,B=Zu.getRSSvalue(m,D,!1),F=Zu.getRSSvalue(v,V,!0),j=t.OUTSIDE_EVEN_TOTAL_SUBSET[S],rt=t.OUTSIDE_GSUM[S];return new Y1(B*j+F+rt,O)}else{if((k&1)!==0||k>10||k<4)throw new ot;var S=(10-k)/2,D=t.INSIDE_ODD_WIDEST[S],V=9-D,B=Zu.getRSSvalue(m,D,!0),F=Zu.getRSSvalue(v,V,!1),mt=t.INSIDE_ODD_TOTAL_SUBSET[S],rt=t.INSIDE_GSUM[S];return new Y1(F*mt+B+rt,O)}},t.prototype.findFinderPattern=function(e,r){var i=this.getDecodeFinderCounters();i[0]=0,i[1]=0,i[2]=0,i[3]=0;for(var a=e.getSize(),s=!1,l=0;l<a&&(s=!e.get(l),r!==s);)l++;for(var c=0,f=l,d=l;d<a;d++)if(e.get(d)!==s)i[c]++;else{if(c===3){if(pl.isFinderPattern(i))return[f,d];f+=i[0]+i[1],i[0]=i[2],i[1]=i[3],i[2]=0,i[3]=0,c--}else c++;i[c]=1,s=!s}throw new ot},t.prototype.parseFoundFinderPattern=function(e,r,i,a){for(var s=e.get(a[0]),l=a[0]-1;l>=0&&s!==e.get(l);)l--;l++;var c=a[0]-l,f=this.getDecodeFinderCounters(),d=new Int32Array(f.length);je.arraycopy(f,0,d,1,f.length-1),d[0]=c;var g=this.parseFinderValue(d,t.FINDER_PATTERNS),m=l,v=a[1];return i&&(m=e.getSize()-1-m,v=e.getSize()-1-v),new e4(g,[l,a[1]],m,v,r)},t.prototype.adjustOddEvenCounts=function(e,r){var i=he.sum(new Int32Array(this.getOddCounts())),a=he.sum(new Int32Array(this.getEvenCounts())),s=!1,l=!1,c=!1,f=!1;e?(i>12?l=!0:i<4&&(s=!0),a>12?f=!0:a<4&&(c=!0)):(i>11?l=!0:i<5&&(s=!0),a>10?f=!0:a<4&&(c=!0));var d=i+a-r,g=(i&1)===(e?1:0),m=(a&1)===1;if(d===1)if(g){if(m)throw new ot;l=!0}else{if(!m)throw new ot;f=!0}else if(d===-1)if(g){if(m)throw new ot;s=!0}else{if(!m)throw new ot;c=!0}else if(d===0){if(g){if(!m)throw new ot;i<a?(s=!0,f=!0):(l=!0,c=!0)}else if(m)throw new ot}else throw new ot;if(s){if(l)throw new ot;pl.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(l&&pl.decrement(this.getOddCounts(),this.getOddRoundingErrors()),c){if(f)throw new ot;pl.increment(this.getEvenCounts(),this.getOddRoundingErrors())}f&&pl.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},t.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],t.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],t.OUTSIDE_GSUM=[0,161,961,2015,2715],t.INSIDE_GSUM=[0,336,1036,1516],t.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],t.INSIDE_ODD_WIDEST=[2,4,6,8],t.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])],t}(pl),DL=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),hh=function(n){DL(t,n);function t(e){var r=n.call(this)||this;r.readers=[];var i=e?e.get(Ye.POSSIBLE_FORMATS):null,a=e&&e.get(Ye.ASSUME_CODE_39_CHECK_DIGIT)!==void 0,s=e&&e.get(Ye.ENABLE_CODE_39_EXTENDED_MODE)!==void 0;return i&&((i.includes(Pt.EAN_13)||i.includes(Pt.UPC_A)||i.includes(Pt.EAN_8)||i.includes(Pt.UPC_E))&&r.readers.push(new Iv(e)),i.includes(Pt.CODE_39)&&r.readers.push(new cS(a,s)),i.includes(Pt.CODE_93)&&r.readers.push(new fS),i.includes(Pt.CODE_128)&&r.readers.push(new uS),i.includes(Pt.ITF)&&r.readers.push(new hS),i.includes(Pt.CODABAR)&&r.readers.push(new Qk),i.includes(Pt.RSS_14)&&r.readers.push(new _S),i.includes(Pt.RSS_EXPANDED)&&(console.warn("RSS Expanded reader IS NOT ready for production yet! use at your own risk."),r.readers.push(new TL))),r.readers.length===0&&(r.readers.push(new Iv(e)),r.readers.push(new cS),r.readers.push(new fS),r.readers.push(new Iv(e)),r.readers.push(new uS),r.readers.push(new hS),r.readers.push(new _S)),r}return t.prototype.decodeRow=function(e,r,i){for(var a=0;a<this.readers.length;a++)try{return this.readers[a].decodeRow(e,r,i)}catch{}throw new ot},t.prototype.reset=function(){this.readers.forEach(function(e){return e.reset()})},t}(Mn),OL=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}();(function(n){OL(t,n);function t(e,r){return e===void 0&&(e=500),n.call(this,new hh(r),e,r)||this}return t})(Nc);var AS=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},we=function(){function n(t,e,r){this.ecCodewords=t,this.ecBlocks=[e],r&&this.ecBlocks.push(r)}return n.prototype.getECCodewords=function(){return this.ecCodewords},n.prototype.getECBlocks=function(){return this.ecBlocks},n}(),ve=function(){function n(t,e){this.count=t,this.dataCodewords=e}return n.prototype.getCount=function(){return this.count},n.prototype.getDataCodewords=function(){return this.dataCodewords},n}(),ML=function(){function n(t,e,r,i,a,s){var l,c;this.versionNumber=t,this.symbolSizeRows=e,this.symbolSizeColumns=r,this.dataRegionSizeRows=i,this.dataRegionSizeColumns=a,this.ecBlocks=s;var f=0,d=s.getECCodewords(),g=s.getECBlocks();try{for(var m=AS(g),v=m.next();!v.done;v=m.next()){var _=v.value;f+=_.getCount()*(_.getDataCodewords()+d)}}catch(w){l={error:w}}finally{try{v&&!v.done&&(c=m.return)&&c.call(m)}finally{if(l)throw l.error}}this.totalCodewords=f}return n.prototype.getVersionNumber=function(){return this.versionNumber},n.prototype.getSymbolSizeRows=function(){return this.symbolSizeRows},n.prototype.getSymbolSizeColumns=function(){return this.symbolSizeColumns},n.prototype.getDataRegionSizeRows=function(){return this.dataRegionSizeRows},n.prototype.getDataRegionSizeColumns=function(){return this.dataRegionSizeColumns},n.prototype.getTotalCodewords=function(){return this.totalCodewords},n.prototype.getECBlocks=function(){return this.ecBlocks},n.getVersionForDimensions=function(t,e){var r,i;if((t&1)!==0||(e&1)!==0)throw new xt;try{for(var a=AS(n.VERSIONS),s=a.next();!s.done;s=a.next()){var l=s.value;if(l.symbolSizeRows===t&&l.symbolSizeColumns===e)return l}}catch(c){r={error:c}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}throw new xt},n.prototype.toString=function(){return""+this.versionNumber},n.buildVersions=function(){return[new n(1,10,10,8,8,new we(5,new ve(1,3))),new n(2,12,12,10,10,new we(7,new ve(1,5))),new n(3,14,14,12,12,new we(10,new ve(1,8))),new n(4,16,16,14,14,new we(12,new ve(1,12))),new n(5,18,18,16,16,new we(14,new ve(1,18))),new n(6,20,20,18,18,new we(18,new ve(1,22))),new n(7,22,22,20,20,new we(20,new ve(1,30))),new n(8,24,24,22,22,new we(24,new ve(1,36))),new n(9,26,26,24,24,new we(28,new ve(1,44))),new n(10,32,32,14,14,new we(36,new ve(1,62))),new n(11,36,36,16,16,new we(42,new ve(1,86))),new n(12,40,40,18,18,new we(48,new ve(1,114))),new n(13,44,44,20,20,new we(56,new ve(1,144))),new n(14,48,48,22,22,new we(68,new ve(1,174))),new n(15,52,52,24,24,new we(42,new ve(2,102))),new n(16,64,64,14,14,new we(56,new ve(2,140))),new n(17,72,72,16,16,new we(36,new ve(4,92))),new n(18,80,80,18,18,new we(48,new ve(4,114))),new n(19,88,88,20,20,new we(56,new ve(4,144))),new n(20,96,96,22,22,new we(68,new ve(4,174))),new n(21,104,104,24,24,new we(56,new ve(6,136))),new n(22,120,120,18,18,new we(68,new ve(6,175))),new n(23,132,132,20,20,new we(62,new ve(8,163))),new n(24,144,144,22,22,new we(62,new ve(8,156),new ve(2,155))),new n(25,8,18,6,16,new we(7,new ve(1,5))),new n(26,8,32,6,14,new we(11,new ve(1,10))),new n(27,12,26,10,24,new we(14,new ve(1,16))),new n(28,12,36,10,16,new we(18,new ve(1,22))),new n(29,16,36,14,16,new we(24,new ve(1,32))),new n(30,16,48,14,22,new we(28,new ve(1,49)))]},n.VERSIONS=n.buildVersions(),n}(),NL=function(){function n(t){var e=t.getHeight();if(e<8||e>144||(e&1)!==0)throw new xt;this.version=n.readVersion(t),this.mappingBitMatrix=this.extractDataRegion(t),this.readMappingMatrix=new ya(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}return n.prototype.getVersion=function(){return this.version},n.readVersion=function(t){var e=t.getHeight(),r=t.getWidth();return ML.getVersionForDimensions(e,r)},n.prototype.readCodewords=function(){var t=new Int8Array(this.version.getTotalCodewords()),e=0,r=4,i=0,a=this.mappingBitMatrix.getHeight(),s=this.mappingBitMatrix.getWidth(),l=!1,c=!1,f=!1,d=!1;do if(r===a&&i===0&&!l)t[e++]=this.readCorner1(a,s)&255,r-=2,i+=2,l=!0;else if(r===a-2&&i===0&&(s&3)!==0&&!c)t[e++]=this.readCorner2(a,s)&255,r-=2,i+=2,c=!0;else if(r===a+4&&i===2&&(s&7)===0&&!f)t[e++]=this.readCorner3(a,s)&255,r-=2,i+=2,f=!0;else if(r===a-2&&i===0&&(s&7)===4&&!d)t[e++]=this.readCorner4(a,s)&255,r-=2,i+=2,d=!0;else{do r<a&&i>=0&&!this.readMappingMatrix.get(i,r)&&(t[e++]=this.readUtah(r,i,a,s)&255),r-=2,i+=2;while(r>=0&&i<s);r+=1,i+=3;do r>=0&&i<s&&!this.readMappingMatrix.get(i,r)&&(t[e++]=this.readUtah(r,i,a,s)&255),r+=2,i-=2;while(r<a&&i>=0);r+=3,i+=1}while(r<a||i<s);if(e!==this.version.getTotalCodewords())throw new xt;return t},n.prototype.readModule=function(t,e,r,i){return t<0&&(t+=r,e+=4-(r+4&7)),e<0&&(e+=i,t+=4-(i+4&7)),this.readMappingMatrix.set(e,t),this.mappingBitMatrix.get(e,t)},n.prototype.readUtah=function(t,e,r,i){var a=0;return this.readModule(t-2,e-2,r,i)&&(a|=1),a<<=1,this.readModule(t-2,e-1,r,i)&&(a|=1),a<<=1,this.readModule(t-1,e-2,r,i)&&(a|=1),a<<=1,this.readModule(t-1,e-1,r,i)&&(a|=1),a<<=1,this.readModule(t-1,e,r,i)&&(a|=1),a<<=1,this.readModule(t,e-2,r,i)&&(a|=1),a<<=1,this.readModule(t,e-1,r,i)&&(a|=1),a<<=1,this.readModule(t,e,r,i)&&(a|=1),a},n.prototype.readCorner1=function(t,e){var r=0;return this.readModule(t-1,0,t,e)&&(r|=1),r<<=1,this.readModule(t-1,1,t,e)&&(r|=1),r<<=1,this.readModule(t-1,2,t,e)&&(r|=1),r<<=1,this.readModule(0,e-2,t,e)&&(r|=1),r<<=1,this.readModule(0,e-1,t,e)&&(r|=1),r<<=1,this.readModule(1,e-1,t,e)&&(r|=1),r<<=1,this.readModule(2,e-1,t,e)&&(r|=1),r<<=1,this.readModule(3,e-1,t,e)&&(r|=1),r},n.prototype.readCorner2=function(t,e){var r=0;return this.readModule(t-3,0,t,e)&&(r|=1),r<<=1,this.readModule(t-2,0,t,e)&&(r|=1),r<<=1,this.readModule(t-1,0,t,e)&&(r|=1),r<<=1,this.readModule(0,e-4,t,e)&&(r|=1),r<<=1,this.readModule(0,e-3,t,e)&&(r|=1),r<<=1,this.readModule(0,e-2,t,e)&&(r|=1),r<<=1,this.readModule(0,e-1,t,e)&&(r|=1),r<<=1,this.readModule(1,e-1,t,e)&&(r|=1),r},n.prototype.readCorner3=function(t,e){var r=0;return this.readModule(t-1,0,t,e)&&(r|=1),r<<=1,this.readModule(t-1,e-1,t,e)&&(r|=1),r<<=1,this.readModule(0,e-3,t,e)&&(r|=1),r<<=1,this.readModule(0,e-2,t,e)&&(r|=1),r<<=1,this.readModule(0,e-1,t,e)&&(r|=1),r<<=1,this.readModule(1,e-3,t,e)&&(r|=1),r<<=1,this.readModule(1,e-2,t,e)&&(r|=1),r<<=1,this.readModule(1,e-1,t,e)&&(r|=1),r},n.prototype.readCorner4=function(t,e){var r=0;return this.readModule(t-3,0,t,e)&&(r|=1),r<<=1,this.readModule(t-2,0,t,e)&&(r|=1),r<<=1,this.readModule(t-1,0,t,e)&&(r|=1),r<<=1,this.readModule(0,e-2,t,e)&&(r|=1),r<<=1,this.readModule(0,e-1,t,e)&&(r|=1),r<<=1,this.readModule(1,e-1,t,e)&&(r|=1),r<<=1,this.readModule(2,e-1,t,e)&&(r|=1),r<<=1,this.readModule(3,e-1,t,e)&&(r|=1),r},n.prototype.extractDataRegion=function(t){var e=this.version.getSymbolSizeRows(),r=this.version.getSymbolSizeColumns();if(t.getHeight()!==e)throw new kt("Dimension of bitMatrix must match the version size");for(var i=this.version.getDataRegionSizeRows(),a=this.version.getDataRegionSizeColumns(),s=e/i|0,l=r/a|0,c=s*i,f=l*a,d=new ya(f,c),g=0;g<s;++g)for(var m=g*i,v=0;v<l;++v)for(var _=v*a,w=0;w<i;++w)for(var b=g*(i+2)+1+w,C=m+w,I=0;I<a;++I){var R=v*(a+2)+1+I;if(t.get(R,b)){var M=_+I;d.set(M,C)}}return d},n}(),ES=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},PL=function(){function n(t,e){this.numDataCodewords=t,this.codewords=e}return n.getDataBlocks=function(t,e){var r,i,a,s,l=e.getECBlocks(),c=0,f=l.getECBlocks();try{for(var d=ES(f),g=d.next();!g.done;g=d.next()){var m=g.value;c+=m.getCount()}}catch(rt){r={error:rt}}finally{try{g&&!g.done&&(i=d.return)&&i.call(d)}finally{if(r)throw r.error}}var v=new Array(c),_=0;try{for(var w=ES(f),b=w.next();!b.done;b=w.next())for(var m=b.value,C=0;C<m.getCount();C++){var I=m.getDataCodewords(),R=l.getECCodewords()+I;v[_++]=new n(I,new Uint8Array(R))}}catch(rt){a={error:rt}}finally{try{b&&!b.done&&(s=w.return)&&s.call(w)}finally{if(a)throw a.error}}for(var M=v[0].codewords.length,N=M-l.getECCodewords(),k=N-1,O=0,C=0;C<k;C++)for(var S=0;S<_;S++)v[S].codewords[C]=t[O++];for(var D=e.getVersionNumber()===24,V=D?8:_,S=0;S<V;S++)v[S].codewords[N-1]=t[O++];for(var B=v[0].codewords.length,C=N;C<B;C++)for(var S=0;S<_;S++){var F=D?(S+8)%_:S,j=D&&F>7?C-1:C;v[F].codewords[j]=t[O++]}if(O!==t.length)throw new kt;return v},n.prototype.getNumDataCodewords=function(){return this.numDataCodewords},n.prototype.getCodewords=function(){return this.codewords},n}(),i4=function(){function n(t){this.bytes=t,this.byteOffset=0,this.bitOffset=0}return n.prototype.getBitOffset=function(){return this.bitOffset},n.prototype.getByteOffset=function(){return this.byteOffset},n.prototype.readBits=function(t){if(t<1||t>32||t>this.available())throw new kt(""+t);var e=0,r=this.bitOffset,i=this.byteOffset,a=this.bytes;if(r>0){var s=8-r,l=t<s?t:s,c=s-l,f=255>>8-l<<c;e=(a[i]&f)>>c,t-=l,r+=l,r===8&&(r=0,i++)}if(t>0){for(;t>=8;)e=e<<8|a[i]&255,i++,t-=8;if(t>0){var c=8-t,f=255>>c<<c;e=e<<t|(a[i]&f)>>c,r+=t}}return this.bitOffset=r,this.byteOffset=i,e},n.prototype.available=function(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset},n}(),Sn;(function(n){n[n.PAD_ENCODE=0]="PAD_ENCODE",n[n.ASCII_ENCODE=1]="ASCII_ENCODE",n[n.C40_ENCODE=2]="C40_ENCODE",n[n.TEXT_ENCODE=3]="TEXT_ENCODE",n[n.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",n[n.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",n[n.BASE256_ENCODE=6]="BASE256_ENCODE"})(Sn||(Sn={}));var kL=function(){function n(){}return n.decode=function(t){var e=new i4(t),r=new Wt,i=new Wt,a=new Array,s=Sn.ASCII_ENCODE;do if(s===Sn.ASCII_ENCODE)s=this.decodeAsciiSegment(e,r,i);else{switch(s){case Sn.C40_ENCODE:this.decodeC40Segment(e,r);break;case Sn.TEXT_ENCODE:this.decodeTextSegment(e,r);break;case Sn.ANSIX12_ENCODE:this.decodeAnsiX12Segment(e,r);break;case Sn.EDIFACT_ENCODE:this.decodeEdifactSegment(e,r);break;case Sn.BASE256_ENCODE:this.decodeBase256Segment(e,r,a);break;default:throw new xt}s=Sn.ASCII_ENCODE}while(s!==Sn.PAD_ENCODE&&e.available()>0);return i.length()>0&&r.append(i.toString()),new $g(t,r.toString(),a.length===0?null:a,null)},n.decodeAsciiSegment=function(t,e,r){var i=!1;do{var a=t.readBits(8);if(a===0)throw new xt;if(a<=128)return i&&(a+=128),e.append(String.fromCharCode(a-1)),Sn.ASCII_ENCODE;if(a===129)return Sn.PAD_ENCODE;if(a<=229){var s=a-130;s<10&&e.append("0"),e.append(""+s)}else switch(a){case 230:return Sn.C40_ENCODE;case 231:return Sn.BASE256_ENCODE;case 232:e.append("");break;case 233:case 234:break;case 235:i=!0;break;case 236:e.append("[)>05"),r.insert(0,"");break;case 237:e.append("[)>06"),r.insert(0,"");break;case 238:return Sn.ANSIX12_ENCODE;case 239:return Sn.TEXT_ENCODE;case 240:return Sn.EDIFACT_ENCODE;case 241:break;default:if(a!==254||t.available()!==0)throw new xt;break}}while(t.available()>0);return Sn.ASCII_ENCODE},n.decodeC40Segment=function(t,e){var r=!1,i=[],a=0;do{if(t.available()===8)return;var s=t.readBits(8);if(s===254)return;this.parseTwoBytes(s,t.readBits(8),i);for(var l=0;l<3;l++){var c=i[l];switch(a){case 0:if(c<3)a=c+1;else if(c<this.C40_BASIC_SET_CHARS.length){var f=this.C40_BASIC_SET_CHARS[c];r?(e.append(String.fromCharCode(f.charCodeAt(0)+128)),r=!1):e.append(f)}else throw new xt;break;case 1:r?(e.append(String.fromCharCode(c+128)),r=!1):e.append(String.fromCharCode(c)),a=0;break;case 2:if(c<this.C40_SHIFT2_SET_CHARS.length){var f=this.C40_SHIFT2_SET_CHARS[c];r?(e.append(String.fromCharCode(f.charCodeAt(0)+128)),r=!1):e.append(f)}else switch(c){case 27:e.append("");break;case 30:r=!0;break;default:throw new xt}a=0;break;case 3:r?(e.append(String.fromCharCode(c+224)),r=!1):e.append(String.fromCharCode(c+96)),a=0;break;default:throw new xt}}}while(t.available()>0)},n.decodeTextSegment=function(t,e){var r=!1,i=[],a=0;do{if(t.available()===8)return;var s=t.readBits(8);if(s===254)return;this.parseTwoBytes(s,t.readBits(8),i);for(var l=0;l<3;l++){var c=i[l];switch(a){case 0:if(c<3)a=c+1;else if(c<this.TEXT_BASIC_SET_CHARS.length){var f=this.TEXT_BASIC_SET_CHARS[c];r?(e.append(String.fromCharCode(f.charCodeAt(0)+128)),r=!1):e.append(f)}else throw new xt;break;case 1:r?(e.append(String.fromCharCode(c+128)),r=!1):e.append(String.fromCharCode(c)),a=0;break;case 2:if(c<this.TEXT_SHIFT2_SET_CHARS.length){var f=this.TEXT_SHIFT2_SET_CHARS[c];r?(e.append(String.fromCharCode(f.charCodeAt(0)+128)),r=!1):e.append(f)}else switch(c){case 27:e.append("");break;case 30:r=!0;break;default:throw new xt}a=0;break;case 3:if(c<this.TEXT_SHIFT3_SET_CHARS.length){var f=this.TEXT_SHIFT3_SET_CHARS[c];r?(e.append(String.fromCharCode(f.charCodeAt(0)+128)),r=!1):e.append(f),a=0}else throw new xt;break;default:throw new xt}}}while(t.available()>0)},n.decodeAnsiX12Segment=function(t,e){var r=[];do{if(t.available()===8)return;var i=t.readBits(8);if(i===254)return;this.parseTwoBytes(i,t.readBits(8),r);for(var a=0;a<3;a++){var s=r[a];switch(s){case 0:e.append("\r");break;case 1:e.append("*");break;case 2:e.append(">");break;case 3:e.append(" ");break;default:if(s<14)e.append(String.fromCharCode(s+44));else if(s<40)e.append(String.fromCharCode(s+51));else throw new xt;break}}}while(t.available()>0)},n.parseTwoBytes=function(t,e,r){var i=(t<<8)+e-1,a=Math.floor(i/1600);r[0]=a,i-=a*1600,a=Math.floor(i/40),r[1]=a,r[2]=i-a*40},n.decodeEdifactSegment=function(t,e){do{if(t.available()<=16)return;for(var r=0;r<4;r++){var i=t.readBits(6);if(i===31){var a=8-t.getBitOffset();a!==8&&t.readBits(a);return}(i&32)===0&&(i|=64),e.append(String.fromCharCode(i))}}while(t.available()>0)},n.decodeBase256Segment=function(t,e,r){var i=1+t.getByteOffset(),a=this.unrandomize255State(t.readBits(8),i++),s;if(a===0?s=t.available()/8|0:a<250?s=a:s=250*(a-249)+this.unrandomize255State(t.readBits(8),i++),s<0)throw new xt;for(var l=new Uint8Array(s),c=0;c<s;c++){if(t.available()<8)throw new xt;l[c]=this.unrandomize255State(t.readBits(8),i++)}r.push(l);try{e.append(_i.decode(l,oe.ISO88591))}catch(f){throw new od("Platform does not support required encoding: "+f.message)}},n.unrandomize255State=function(t,e){var r=149*e%255+1,i=t-r;return i>=0?i:i+256},n.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],n.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],n.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],n.TEXT_SHIFT2_SET_CHARS=n.C40_SHIFT2_SET_CHARS,n.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""],n}(),LL=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},BL=function(){function n(){this.rsDecoder=new qg(Nr.DATA_MATRIX_FIELD_256)}return n.prototype.decode=function(t){var e,r,i=new NL(t),a=i.getVersion(),s=i.readCodewords(),l=PL.getDataBlocks(s,a),c=0;try{for(var f=LL(l),d=f.next();!d.done;d=f.next()){var g=d.value;c+=g.getNumDataCodewords()}}catch(R){e={error:R}}finally{try{d&&!d.done&&(r=f.return)&&r.call(f)}finally{if(e)throw e.error}}for(var m=new Uint8Array(c),v=l.length,_=0;_<v;_++){var w=l[_],b=w.getCodewords(),C=w.getNumDataCodewords();this.correctErrors(b,C);for(var I=0;I<C;I++)m[I*v+_]=b[I]}return kL.decode(m)},n.prototype.correctErrors=function(t,e){var r=new Int32Array(t);try{this.rsDecoder.decode(r,t.length-e)}catch{throw new Gn}for(var i=0;i<e;i++)t[i]=r[i]},n}(),VL=function(){function n(t){this.image=t,this.rectangleDetector=new jy(this.image)}return n.prototype.detect=function(){var t=this.rectangleDetector.detect(),e=this.detectSolid1(t);if(e=this.detectSolid2(e),e[3]=this.correctTopRight(e),!e[3])throw new ot;e=this.shiftToModuleCenter(e);var r=e[0],i=e[1],a=e[2],s=e[3],l=this.transitionsBetween(r,s)+1,c=this.transitionsBetween(a,s)+1;(l&1)===1&&(l+=1),(c&1)===1&&(c+=1),4*l<7*c&&4*c<7*l&&(l=c=Math.max(l,c));var f=n.sampleGrid(this.image,r,i,a,s,l,c);return new m2(f,[r,i,a,s])},n.shiftPoint=function(t,e,r){var i=(e.getX()-t.getX())/(r+1),a=(e.getY()-t.getY())/(r+1);return new Ct(t.getX()+i,t.getY()+a)},n.moveAway=function(t,e,r){var i=t.getX(),a=t.getY();return i<e?i-=1:i+=1,a<r?a-=1:a+=1,new Ct(i,a)},n.prototype.detectSolid1=function(t){var e=t[0],r=t[1],i=t[3],a=t[2],s=this.transitionsBetween(e,r),l=this.transitionsBetween(r,i),c=this.transitionsBetween(i,a),f=this.transitionsBetween(a,e),d=s,g=[a,e,r,i];return d>l&&(d=l,g[0]=e,g[1]=r,g[2]=i,g[3]=a),d>c&&(d=c,g[0]=r,g[1]=i,g[2]=a,g[3]=e),d>f&&(g[0]=i,g[1]=a,g[2]=e,g[3]=r),g},n.prototype.detectSolid2=function(t){var e=t[0],r=t[1],i=t[2],a=t[3],s=this.transitionsBetween(e,a),l=n.shiftPoint(r,i,(s+1)*4),c=n.shiftPoint(i,r,(s+1)*4),f=this.transitionsBetween(l,e),d=this.transitionsBetween(c,a);return f<d?(t[0]=e,t[1]=r,t[2]=i,t[3]=a):(t[0]=r,t[1]=i,t[2]=a,t[3]=e),t},n.prototype.correctTopRight=function(t){var e=t[0],r=t[1],i=t[2],a=t[3],s=this.transitionsBetween(e,a),l=this.transitionsBetween(r,a),c=n.shiftPoint(e,r,(l+1)*4),f=n.shiftPoint(i,r,(s+1)*4);s=this.transitionsBetween(c,a),l=this.transitionsBetween(f,a);var d=new Ct(a.getX()+(i.getX()-r.getX())/(s+1),a.getY()+(i.getY()-r.getY())/(s+1)),g=new Ct(a.getX()+(e.getX()-r.getX())/(l+1),a.getY()+(e.getY()-r.getY())/(l+1));if(!this.isValid(d))return this.isValid(g)?g:null;if(!this.isValid(g))return d;var m=this.transitionsBetween(c,d)+this.transitionsBetween(f,d),v=this.transitionsBetween(c,g)+this.transitionsBetween(f,g);return m>v?d:g},n.prototype.shiftToModuleCenter=function(t){var e=t[0],r=t[1],i=t[2],a=t[3],s=this.transitionsBetween(e,a)+1,l=this.transitionsBetween(i,a)+1,c=n.shiftPoint(e,r,l*4),f=n.shiftPoint(i,r,s*4);s=this.transitionsBetween(c,a)+1,l=this.transitionsBetween(f,a)+1,(s&1)===1&&(s+=1),(l&1)===1&&(l+=1);var d=(e.getX()+r.getX()+i.getX()+a.getX())/4,g=(e.getY()+r.getY()+i.getY()+a.getY())/4;e=n.moveAway(e,d,g),r=n.moveAway(r,d,g),i=n.moveAway(i,d,g),a=n.moveAway(a,d,g);var m,v;return c=n.shiftPoint(e,r,l*4),c=n.shiftPoint(c,a,s*4),m=n.shiftPoint(r,e,l*4),m=n.shiftPoint(m,i,s*4),f=n.shiftPoint(i,a,l*4),f=n.shiftPoint(f,r,s*4),v=n.shiftPoint(a,i,l*4),v=n.shiftPoint(v,e,s*4),[c,m,f,v]},n.prototype.isValid=function(t){return t.getX()>=0&&t.getX()<this.image.getWidth()&&t.getY()>0&&t.getY()<this.image.getHeight()},n.sampleGrid=function(t,e,r,i,a,s,l){var c=v2.getInstance();return c.sampleGrid(t,s,l,.5,.5,s-.5,.5,s-.5,l-.5,.5,l-.5,e.getX(),e.getY(),a.getX(),a.getY(),i.getX(),i.getY(),r.getX(),r.getY())},n.prototype.transitionsBetween=function(t,e){var r=Math.trunc(t.getX()),i=Math.trunc(t.getY()),a=Math.trunc(e.getX()),s=Math.trunc(e.getY()),l=Math.abs(s-i)>Math.abs(a-r);if(l){var c=r;r=i,i=c,c=a,a=s,s=c}for(var f=Math.abs(a-r),d=Math.abs(s-i),g=-f/2,m=i<s?1:-1,v=r<a?1:-1,_=0,w=this.image.get(l?i:r,l?r:i),b=r,C=i;b!==a;b+=v){var I=this.image.get(l?C:b,l?b:C);if(I!==w&&(_++,w=I),g+=d,g>0){if(C===s)break;C+=m,g-=f}}return _},n}(),Hy=function(){function n(){this.decoder=new BL}return n.prototype.decode=function(t,e){e===void 0&&(e=null);var r,i;if(e!=null&&e.has(Ye.PURE_BARCODE)){var a=n.extractPureBits(t.getBlackMatrix());r=this.decoder.decode(a),i=n.NO_POINTS}else{var s=new VL(t.getBlackMatrix()).detect();r=this.decoder.decode(s.getBits()),i=s.getPoints()}var l=r.getRawBytes(),c=new pr(r.getText(),l,8*l.length,i,Pt.DATA_MATRIX,je.currentTimeMillis()),f=r.getByteSegments();f!=null&&c.putMetadata(rr.BYTE_SEGMENTS,f);var d=r.getECLevel();return d!=null&&c.putMetadata(rr.ERROR_CORRECTION_LEVEL,d),c},n.prototype.reset=function(){},n.extractPureBits=function(t){var e=t.getTopLeftOnBit(),r=t.getBottomRightOnBit();if(e==null||r==null)throw new ot;var i=this.moduleSize(e,t),a=e[1],s=r[1],l=e[0],c=r[0],f=(c-l+1)/i,d=(s-a+1)/i;if(f<=0||d<=0)throw new ot;var g=i/2;a+=g,l+=g;for(var m=new ya(f,d),v=0;v<d;v++)for(var _=a+v*i,w=0;w<f;w++)t.get(l+w*i,_)&&m.set(w,v);return m},n.moduleSize=function(t,e){for(var r=e.getWidth(),i=t[0],a=t[1];i<r&&e.get(i,a);)i++;if(i===r)throw new ot;var s=i-t[0];if(s===0)throw new ot;return s},n.NO_POINTS=[],n}(),FL=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}();(function(n){FL(t,n);function t(e){return e===void 0&&(e=500),n.call(this,new Hy,e)||this}return t})(Nc);var Qu;(function(n){n[n.L=0]="L",n[n.M=1]="M",n[n.Q=2]="Q",n[n.H=3]="H"})(Qu||(Qu={}));var jL=function(){function n(t,e,r){this.value=t,this.stringValue=e,this.bits=r,n.FOR_BITS.set(r,this),n.FOR_VALUE.set(t,this)}return n.prototype.getValue=function(){return this.value},n.prototype.getBits=function(){return this.bits},n.fromString=function(t){switch(t){case"L":return n.L;case"M":return n.M;case"Q":return n.Q;case"H":return n.H;default:throw new Di(t+"not available")}},n.prototype.toString=function(){return this.stringValue},n.prototype.equals=function(t){if(!(t instanceof n))return!1;var e=t;return this.value===e.value},n.forBits=function(t){if(t<0||t>=n.FOR_BITS.size)throw new kt;return n.FOR_BITS.get(t)},n.FOR_BITS=new Map,n.FOR_VALUE=new Map,n.L=new n(Qu.L,"L",1),n.M=new n(Qu.M,"M",0),n.Q=new n(Qu.Q,"Q",3),n.H=new n(Qu.H,"H",2),n}(),UL=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},a4=function(){function n(t){this.errorCorrectionLevel=jL.forBits(t>>3&3),this.dataMask=t&7}return n.numBitsDiffering=function(t,e){return Zt.bitCount(t^e)},n.decodeFormatInformation=function(t,e){var r=n.doDecodeFormatInformation(t,e);return r!==null?r:n.doDecodeFormatInformation(t^n.FORMAT_INFO_MASK_QR,e^n.FORMAT_INFO_MASK_QR)},n.doDecodeFormatInformation=function(t,e){var r,i,a=Number.MAX_SAFE_INTEGER,s=0;try{for(var l=UL(n.FORMAT_INFO_DECODE_LOOKUP),c=l.next();!c.done;c=l.next()){var f=c.value,d=f[0];if(d===t||d===e)return new n(f[1]);var g=n.numBitsDiffering(t,d);g<a&&(s=f[1],a=g),t!==e&&(g=n.numBitsDiffering(e,d),g<a&&(s=f[1],a=g))}}catch(m){r={error:m}}finally{try{c&&!c.done&&(i=l.return)&&i.call(l)}finally{if(r)throw r.error}}return a<=3?new n(s):null},n.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},n.prototype.getDataMask=function(){return this.dataMask},n.prototype.hashCode=function(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask},n.prototype.equals=function(t){if(!(t instanceof n))return!1;var e=t;return this.errorCorrectionLevel===e.errorCorrectionLevel&&this.dataMask===e.dataMask},n.FORMAT_INFO_MASK_QR=21522,n.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])],n}(),zL=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},tt=function(){function n(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];this.ecCodewordsPerBlock=t,this.ecBlocks=e}return n.prototype.getECCodewordsPerBlock=function(){return this.ecCodewordsPerBlock},n.prototype.getNumBlocks=function(){var t,e,r=0,i=this.ecBlocks;try{for(var a=zL(i),s=a.next();!s.done;s=a.next()){var l=s.value;r+=l.getCount()}}catch(c){t={error:c}}finally{try{s&&!s.done&&(e=a.return)&&e.call(a)}finally{if(t)throw t.error}}return r},n.prototype.getTotalECCodewords=function(){return this.ecCodewordsPerBlock*this.getNumBlocks()},n.prototype.getECBlocks=function(){return this.ecBlocks},n}(),G=function(){function n(t,e){this.count=t,this.dataCodewords=e}return n.prototype.getCount=function(){return this.count},n.prototype.getDataCodewords=function(){return this.dataCodewords},n}(),HL=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},bl=function(){function n(t,e){for(var r,i,a=[],s=2;s<arguments.length;s++)a[s-2]=arguments[s];this.versionNumber=t,this.alignmentPatternCenters=e,this.ecBlocks=a;var l=0,c=a[0].getECCodewordsPerBlock(),f=a[0].getECBlocks();try{for(var d=HL(f),g=d.next();!g.done;g=d.next()){var m=g.value;l+=m.getCount()*(m.getDataCodewords()+c)}}catch(v){r={error:v}}finally{try{g&&!g.done&&(i=d.return)&&i.call(d)}finally{if(r)throw r.error}}this.totalCodewords=l}return n.prototype.getVersionNumber=function(){return this.versionNumber},n.prototype.getAlignmentPatternCenters=function(){return this.alignmentPatternCenters},n.prototype.getTotalCodewords=function(){return this.totalCodewords},n.prototype.getDimensionForVersion=function(){return 17+4*this.versionNumber},n.prototype.getECBlocksForLevel=function(t){return this.ecBlocks[t.getValue()]},n.getProvisionalVersionForDimension=function(t){if(t%4!==1)throw new xt;try{return this.getVersionForNumber((t-17)/4)}catch{throw new xt}},n.getVersionForNumber=function(t){if(t<1||t>40)throw new kt;return n.VERSIONS[t-1]},n.decodeVersionInformation=function(t){for(var e=Number.MAX_SAFE_INTEGER,r=0,i=0;i<n.VERSION_DECODE_INFO.length;i++){var a=n.VERSION_DECODE_INFO[i];if(a===t)return n.getVersionForNumber(i+7);var s=a4.numBitsDiffering(t,a);s<e&&(r=i+7,e=s)}return e<=3?n.getVersionForNumber(r):null},n.prototype.buildFunctionPattern=function(){var t=this.getDimensionForVersion(),e=new ya(t);e.setRegion(0,0,9,9),e.setRegion(t-8,0,8,9),e.setRegion(0,t-8,9,8);for(var r=this.alignmentPatternCenters.length,i=0;i<r;i++)for(var a=this.alignmentPatternCenters[i]-2,s=0;s<r;s++)i===0&&(s===0||s===r-1)||i===r-1&&s===0||e.setRegion(this.alignmentPatternCenters[s]-2,a,5,5);return e.setRegion(6,9,1,t-17),e.setRegion(9,6,t-17,1),this.versionNumber>6&&(e.setRegion(t-11,0,3,6),e.setRegion(0,t-11,6,3)),e},n.prototype.toString=function(){return""+this.versionNumber},n.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),n.VERSIONS=[new n(1,new Int32Array(0),new tt(7,new G(1,19)),new tt(10,new G(1,16)),new tt(13,new G(1,13)),new tt(17,new G(1,9))),new n(2,Int32Array.from([6,18]),new tt(10,new G(1,34)),new tt(16,new G(1,28)),new tt(22,new G(1,22)),new tt(28,new G(1,16))),new n(3,Int32Array.from([6,22]),new tt(15,new G(1,55)),new tt(26,new G(1,44)),new tt(18,new G(2,17)),new tt(22,new G(2,13))),new n(4,Int32Array.from([6,26]),new tt(20,new G(1,80)),new tt(18,new G(2,32)),new tt(26,new G(2,24)),new tt(16,new G(4,9))),new n(5,Int32Array.from([6,30]),new tt(26,new G(1,108)),new tt(24,new G(2,43)),new tt(18,new G(2,15),new G(2,16)),new tt(22,new G(2,11),new G(2,12))),new n(6,Int32Array.from([6,34]),new tt(18,new G(2,68)),new tt(16,new G(4,27)),new tt(24,new G(4,19)),new tt(28,new G(4,15))),new n(7,Int32Array.from([6,22,38]),new tt(20,new G(2,78)),new tt(18,new G(4,31)),new tt(18,new G(2,14),new G(4,15)),new tt(26,new G(4,13),new G(1,14))),new n(8,Int32Array.from([6,24,42]),new tt(24,new G(2,97)),new tt(22,new G(2,38),new G(2,39)),new tt(22,new G(4,18),new G(2,19)),new tt(26,new G(4,14),new G(2,15))),new n(9,Int32Array.from([6,26,46]),new tt(30,new G(2,116)),new tt(22,new G(3,36),new G(2,37)),new tt(20,new G(4,16),new G(4,17)),new tt(24,new G(4,12),new G(4,13))),new n(10,Int32Array.from([6,28,50]),new tt(18,new G(2,68),new G(2,69)),new tt(26,new G(4,43),new G(1,44)),new tt(24,new G(6,19),new G(2,20)),new tt(28,new G(6,15),new G(2,16))),new n(11,Int32Array.from([6,30,54]),new tt(20,new G(4,81)),new tt(30,new G(1,50),new G(4,51)),new tt(28,new G(4,22),new G(4,23)),new tt(24,new G(3,12),new G(8,13))),new n(12,Int32Array.from([6,32,58]),new tt(24,new G(2,92),new G(2,93)),new tt(22,new G(6,36),new G(2,37)),new tt(26,new G(4,20),new G(6,21)),new tt(28,new G(7,14),new G(4,15))),new n(13,Int32Array.from([6,34,62]),new tt(26,new G(4,107)),new tt(22,new G(8,37),new G(1,38)),new tt(24,new G(8,20),new G(4,21)),new tt(22,new G(12,11),new G(4,12))),new n(14,Int32Array.from([6,26,46,66]),new tt(30,new G(3,115),new G(1,116)),new tt(24,new G(4,40),new G(5,41)),new tt(20,new G(11,16),new G(5,17)),new tt(24,new G(11,12),new G(5,13))),new n(15,Int32Array.from([6,26,48,70]),new tt(22,new G(5,87),new G(1,88)),new tt(24,new G(5,41),new G(5,42)),new tt(30,new G(5,24),new G(7,25)),new tt(24,new G(11,12),new G(7,13))),new n(16,Int32Array.from([6,26,50,74]),new tt(24,new G(5,98),new G(1,99)),new tt(28,new G(7,45),new G(3,46)),new tt(24,new G(15,19),new G(2,20)),new tt(30,new G(3,15),new G(13,16))),new n(17,Int32Array.from([6,30,54,78]),new tt(28,new G(1,107),new G(5,108)),new tt(28,new G(10,46),new G(1,47)),new tt(28,new G(1,22),new G(15,23)),new tt(28,new G(2,14),new G(17,15))),new n(18,Int32Array.from([6,30,56,82]),new tt(30,new G(5,120),new G(1,121)),new tt(26,new G(9,43),new G(4,44)),new tt(28,new G(17,22),new G(1,23)),new tt(28,new G(2,14),new G(19,15))),new n(19,Int32Array.from([6,30,58,86]),new tt(28,new G(3,113),new G(4,114)),new tt(26,new G(3,44),new G(11,45)),new tt(26,new G(17,21),new G(4,22)),new tt(26,new G(9,13),new G(16,14))),new n(20,Int32Array.from([6,34,62,90]),new tt(28,new G(3,107),new G(5,108)),new tt(26,new G(3,41),new G(13,42)),new tt(30,new G(15,24),new G(5,25)),new tt(28,new G(15,15),new G(10,16))),new n(21,Int32Array.from([6,28,50,72,94]),new tt(28,new G(4,116),new G(4,117)),new tt(26,new G(17,42)),new tt(28,new G(17,22),new G(6,23)),new tt(30,new G(19,16),new G(6,17))),new n(22,Int32Array.from([6,26,50,74,98]),new tt(28,new G(2,111),new G(7,112)),new tt(28,new G(17,46)),new tt(30,new G(7,24),new G(16,25)),new tt(24,new G(34,13))),new n(23,Int32Array.from([6,30,54,78,102]),new tt(30,new G(4,121),new G(5,122)),new tt(28,new G(4,47),new G(14,48)),new tt(30,new G(11,24),new G(14,25)),new tt(30,new G(16,15),new G(14,16))),new n(24,Int32Array.from([6,28,54,80,106]),new tt(30,new G(6,117),new G(4,118)),new tt(28,new G(6,45),new G(14,46)),new tt(30,new G(11,24),new G(16,25)),new tt(30,new G(30,16),new G(2,17))),new n(25,Int32Array.from([6,32,58,84,110]),new tt(26,new G(8,106),new G(4,107)),new tt(28,new G(8,47),new G(13,48)),new tt(30,new G(7,24),new G(22,25)),new tt(30,new G(22,15),new G(13,16))),new n(26,Int32Array.from([6,30,58,86,114]),new tt(28,new G(10,114),new G(2,115)),new tt(28,new G(19,46),new G(4,47)),new tt(28,new G(28,22),new G(6,23)),new tt(30,new G(33,16),new G(4,17))),new n(27,Int32Array.from([6,34,62,90,118]),new tt(30,new G(8,122),new G(4,123)),new tt(28,new G(22,45),new G(3,46)),new tt(30,new G(8,23),new G(26,24)),new tt(30,new G(12,15),new G(28,16))),new n(28,Int32Array.from([6,26,50,74,98,122]),new tt(30,new G(3,117),new G(10,118)),new tt(28,new G(3,45),new G(23,46)),new tt(30,new G(4,24),new G(31,25)),new tt(30,new G(11,15),new G(31,16))),new n(29,Int32Array.from([6,30,54,78,102,126]),new tt(30,new G(7,116),new G(7,117)),new tt(28,new G(21,45),new G(7,46)),new tt(30,new G(1,23),new G(37,24)),new tt(30,new G(19,15),new G(26,16))),new n(30,Int32Array.from([6,26,52,78,104,130]),new tt(30,new G(5,115),new G(10,116)),new tt(28,new G(19,47),new G(10,48)),new tt(30,new G(15,24),new G(25,25)),new tt(30,new G(23,15),new G(25,16))),new n(31,Int32Array.from([6,30,56,82,108,134]),new tt(30,new G(13,115),new G(3,116)),new tt(28,new G(2,46),new G(29,47)),new tt(30,new G(42,24),new G(1,25)),new tt(30,new G(23,15),new G(28,16))),new n(32,Int32Array.from([6,34,60,86,112,138]),new tt(30,new G(17,115)),new tt(28,new G(10,46),new G(23,47)),new tt(30,new G(10,24),new G(35,25)),new tt(30,new G(19,15),new G(35,16))),new n(33,Int32Array.from([6,30,58,86,114,142]),new tt(30,new G(17,115),new G(1,116)),new tt(28,new G(14,46),new G(21,47)),new tt(30,new G(29,24),new G(19,25)),new tt(30,new G(11,15),new G(46,16))),new n(34,Int32Array.from([6,34,62,90,118,146]),new tt(30,new G(13,115),new G(6,116)),new tt(28,new G(14,46),new G(23,47)),new tt(30,new G(44,24),new G(7,25)),new tt(30,new G(59,16),new G(1,17))),new n(35,Int32Array.from([6,30,54,78,102,126,150]),new tt(30,new G(12,121),new G(7,122)),new tt(28,new G(12,47),new G(26,48)),new tt(30,new G(39,24),new G(14,25)),new tt(30,new G(22,15),new G(41,16))),new n(36,Int32Array.from([6,24,50,76,102,128,154]),new tt(30,new G(6,121),new G(14,122)),new tt(28,new G(6,47),new G(34,48)),new tt(30,new G(46,24),new G(10,25)),new tt(30,new G(2,15),new G(64,16))),new n(37,Int32Array.from([6,28,54,80,106,132,158]),new tt(30,new G(17,122),new G(4,123)),new tt(28,new G(29,46),new G(14,47)),new tt(30,new G(49,24),new G(10,25)),new tt(30,new G(24,15),new G(46,16))),new n(38,Int32Array.from([6,32,58,84,110,136,162]),new tt(30,new G(4,122),new G(18,123)),new tt(28,new G(13,46),new G(32,47)),new tt(30,new G(48,24),new G(14,25)),new tt(30,new G(42,15),new G(32,16))),new n(39,Int32Array.from([6,26,54,82,110,138,166]),new tt(30,new G(20,117),new G(4,118)),new tt(28,new G(40,47),new G(7,48)),new tt(30,new G(43,24),new G(22,25)),new tt(30,new G(10,15),new G(67,16))),new n(40,Int32Array.from([6,30,58,86,114,142,170]),new tt(30,new G(19,118),new G(6,119)),new tt(28,new G(18,47),new G(31,48)),new tt(30,new G(34,24),new G(34,25)),new tt(30,new G(20,15),new G(61,16)))],n}(),Un;(function(n){n[n.DATA_MASK_000=0]="DATA_MASK_000",n[n.DATA_MASK_001=1]="DATA_MASK_001",n[n.DATA_MASK_010=2]="DATA_MASK_010",n[n.DATA_MASK_011=3]="DATA_MASK_011",n[n.DATA_MASK_100=4]="DATA_MASK_100",n[n.DATA_MASK_101=5]="DATA_MASK_101",n[n.DATA_MASK_110=6]="DATA_MASK_110",n[n.DATA_MASK_111=7]="DATA_MASK_111"})(Un||(Un={}));var wS=function(){function n(t,e){this.value=t,this.isMasked=e}return n.prototype.unmaskBitMatrix=function(t,e){for(var r=0;r<e;r++)for(var i=0;i<e;i++)this.isMasked(r,i)&&t.flip(i,r)},n.values=new Map([[Un.DATA_MASK_000,new n(Un.DATA_MASK_000,function(t,e){return(t+e&1)===0})],[Un.DATA_MASK_001,new n(Un.DATA_MASK_001,function(t,e){return(t&1)===0})],[Un.DATA_MASK_010,new n(Un.DATA_MASK_010,function(t,e){return e%3===0})],[Un.DATA_MASK_011,new n(Un.DATA_MASK_011,function(t,e){return(t+e)%3===0})],[Un.DATA_MASK_100,new n(Un.DATA_MASK_100,function(t,e){return(Math.floor(t/2)+Math.floor(e/3)&1)===0})],[Un.DATA_MASK_101,new n(Un.DATA_MASK_101,function(t,e){return t*e%6===0})],[Un.DATA_MASK_110,new n(Un.DATA_MASK_110,function(t,e){return t*e%6<3})],[Un.DATA_MASK_111,new n(Un.DATA_MASK_111,function(t,e){return(t+e+t*e%3&1)===0})]]),n}(),GL=function(){function n(t){var e=t.getHeight();if(e<21||(e&3)!==1)throw new xt;this.bitMatrix=t}return n.prototype.readFormatInformation=function(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;for(var t=0,e=0;e<6;e++)t=this.copyBit(e,8,t);t=this.copyBit(7,8,t),t=this.copyBit(8,8,t),t=this.copyBit(8,7,t);for(var r=5;r>=0;r--)t=this.copyBit(8,r,t);for(var i=this.bitMatrix.getHeight(),a=0,s=i-7,r=i-1;r>=s;r--)a=this.copyBit(8,r,a);for(var e=i-8;e<i;e++)a=this.copyBit(e,8,a);if(this.parsedFormatInfo=a4.decodeFormatInformation(t,a),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new xt},n.prototype.readVersion=function(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;var t=this.bitMatrix.getHeight(),e=Math.floor((t-17)/4);if(e<=6)return bl.getVersionForNumber(e);for(var r=0,i=t-11,a=5;a>=0;a--)for(var s=t-9;s>=i;s--)r=this.copyBit(s,a,r);var l=bl.decodeVersionInformation(r);if(l!==null&&l.getDimensionForVersion()===t)return this.parsedVersion=l,l;r=0;for(var s=5;s>=0;s--)for(var a=t-9;a>=i;a--)r=this.copyBit(s,a,r);if(l=bl.decodeVersionInformation(r),l!==null&&l.getDimensionForVersion()===t)return this.parsedVersion=l,l;throw new xt},n.prototype.copyBit=function(t,e,r){var i=this.isMirror?this.bitMatrix.get(e,t):this.bitMatrix.get(t,e);return i?r<<1|1:r<<1},n.prototype.readCodewords=function(){var t=this.readFormatInformation(),e=this.readVersion(),r=wS.values.get(t.getDataMask()),i=this.bitMatrix.getHeight();r.unmaskBitMatrix(this.bitMatrix,i);for(var a=e.buildFunctionPattern(),s=!0,l=new Uint8Array(e.getTotalCodewords()),c=0,f=0,d=0,g=i-1;g>0;g-=2){g===6&&g--;for(var m=0;m<i;m++)for(var v=s?i-1-m:m,_=0;_<2;_++)a.get(g-_,v)||(d++,f<<=1,this.bitMatrix.get(g-_,v)&&(f|=1),d===8&&(l[c++]=f,d=0,f=0));s=!s}if(c!==e.getTotalCodewords())throw new xt;return l},n.prototype.remask=function(){if(this.parsedFormatInfo!==null){var t=wS.values.get(this.parsedFormatInfo.getDataMask()),e=this.bitMatrix.getHeight();t.unmaskBitMatrix(this.bitMatrix,e)}},n.prototype.setMirror=function(t){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=t},n.prototype.mirror=function(){for(var t=this.bitMatrix,e=0,r=t.getWidth();e<r;e++)for(var i=e+1,a=t.getHeight();i<a;i++)t.get(e,i)!==t.get(i,e)&&(t.flip(i,e),t.flip(e,i))},n}(),bS=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},$L=function(){function n(t,e){this.numDataCodewords=t,this.codewords=e}return n.getDataBlocks=function(t,e,r){var i,a,s,l;if(t.length!==e.getTotalCodewords())throw new kt;var c=e.getECBlocksForLevel(r),f=0,d=c.getECBlocks();try{for(var g=bS(d),m=g.next();!m.done;m=g.next()){var v=m.value;f+=v.getCount()}}catch(j){i={error:j}}finally{try{m&&!m.done&&(a=g.return)&&a.call(g)}finally{if(i)throw i.error}}var _=new Array(f),w=0;try{for(var b=bS(d),C=b.next();!C.done;C=b.next())for(var v=C.value,I=0;I<v.getCount();I++){var R=v.getDataCodewords(),M=c.getECCodewordsPerBlock()+R;_[w++]=new n(R,new Uint8Array(M))}}catch(j){s={error:j}}finally{try{C&&!C.done&&(l=b.return)&&l.call(b)}finally{if(s)throw s.error}}for(var N=_[0].codewords.length,k=_.length-1;k>=0;){var O=_[k].codewords.length;if(O===N)break;k--}k++;for(var S=N-c.getECCodewordsPerBlock(),D=0,I=0;I<S;I++)for(var V=0;V<w;V++)_[V].codewords[I]=t[D++];for(var V=k;V<w;V++)_[V].codewords[S]=t[D++];for(var B=_[0].codewords.length,I=S;I<B;I++)for(var V=0;V<w;V++){var F=V<k?I:I+1;_[V].codewords[F]=t[D++]}return _},n.prototype.getNumDataCodewords=function(){return this.numDataCodewords},n.prototype.getCodewords=function(){return this.codewords},n}(),gi;(function(n){n[n.TERMINATOR=0]="TERMINATOR",n[n.NUMERIC=1]="NUMERIC",n[n.ALPHANUMERIC=2]="ALPHANUMERIC",n[n.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",n[n.BYTE=4]="BYTE",n[n.ECI=5]="ECI",n[n.KANJI=6]="KANJI",n[n.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",n[n.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",n[n.HANZI=9]="HANZI"})(gi||(gi={}));var ze=function(){function n(t,e,r,i){this.value=t,this.stringValue=e,this.characterCountBitsForVersions=r,this.bits=i,n.FOR_BITS.set(i,this),n.FOR_VALUE.set(t,this)}return n.forBits=function(t){var e=n.FOR_BITS.get(t);if(e===void 0)throw new kt;return e},n.prototype.getCharacterCountBits=function(t){var e=t.getVersionNumber(),r;return e<=9?r=0:e<=26?r=1:r=2,this.characterCountBitsForVersions[r]},n.prototype.getValue=function(){return this.value},n.prototype.getBits=function(){return this.bits},n.prototype.equals=function(t){if(!(t instanceof n))return!1;var e=t;return this.value===e.value},n.prototype.toString=function(){return this.stringValue},n.FOR_BITS=new Map,n.FOR_VALUE=new Map,n.TERMINATOR=new n(gi.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),n.NUMERIC=new n(gi.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),n.ALPHANUMERIC=new n(gi.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),n.STRUCTURED_APPEND=new n(gi.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),n.BYTE=new n(gi.BYTE,"BYTE",Int32Array.from([8,16,16]),4),n.ECI=new n(gi.ECI,"ECI",Int32Array.from([0,0,0]),7),n.KANJI=new n(gi.KANJI,"KANJI",Int32Array.from([8,10,12]),8),n.FNC1_FIRST_POSITION=new n(gi.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),n.FNC1_SECOND_POSITION=new n(gi.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),n.HANZI=new n(gi.HANZI,"HANZI",Int32Array.from([8,10,12]),13),n}(),qL=function(){function n(){}return n.decode=function(t,e,r,i){var a=new i4(t),s=new Wt,l=new Array,c=-1,f=-1;try{var d=null,g=!1,m=void 0;do{if(a.available()<4)m=ze.TERMINATOR;else{var v=a.readBits(4);m=ze.forBits(v)}switch(m){case ze.TERMINATOR:break;case ze.FNC1_FIRST_POSITION:case ze.FNC1_SECOND_POSITION:g=!0;break;case ze.STRUCTURED_APPEND:if(a.available()<16)throw new xt;c=a.readBits(8),f=a.readBits(8);break;case ze.ECI:var _=n.parseECIValue(a);if(d=Rn.getCharacterSetECIByValue(_),d===null)throw new xt;break;case ze.HANZI:var w=a.readBits(4),b=a.readBits(m.getCharacterCountBits(e));w===n.GB2312_SUBSET&&n.decodeHanziSegment(a,s,b);break;default:var C=a.readBits(m.getCharacterCountBits(e));switch(m){case ze.NUMERIC:n.decodeNumericSegment(a,s,C);break;case ze.ALPHANUMERIC:n.decodeAlphanumericSegment(a,s,C,g);break;case ze.BYTE:n.decodeByteSegment(a,s,C,d,l,i);break;case ze.KANJI:n.decodeKanjiSegment(a,s,C);break;default:throw new xt}break}}while(m!==ze.TERMINATOR)}catch{throw new xt}return new $g(t,s.toString(),l.length===0?null:l,r===null?null:r.toString(),c,f)},n.decodeHanziSegment=function(t,e,r){if(r*13>t.available())throw new xt;for(var i=new Uint8Array(2*r),a=0;r>0;){var s=t.readBits(13),l=s/96<<8&4294967295|s%96;l<959?l+=41377:l+=42657,i[a]=l>>8&255,i[a+1]=l&255,a+=2,r--}try{e.append(_i.decode(i,oe.GB2312))}catch(c){throw new xt(c)}},n.decodeKanjiSegment=function(t,e,r){if(r*13>t.available())throw new xt;for(var i=new Uint8Array(2*r),a=0;r>0;){var s=t.readBits(13),l=s/192<<8&4294967295|s%192;l<7936?l+=33088:l+=49472,i[a]=l>>8,i[a+1]=l,a+=2,r--}try{e.append(_i.decode(i,oe.SHIFT_JIS))}catch(c){throw new xt(c)}},n.decodeByteSegment=function(t,e,r,i,a,s){if(8*r>t.available())throw new xt;for(var l=new Uint8Array(r),c=0;c<r;c++)l[c]=t.readBits(8);var f;i===null?f=oe.guessEncoding(l,s):f=i.getName();try{e.append(_i.decode(l,f))}catch(d){throw new xt(d)}a.push(l)},n.toAlphaNumericChar=function(t){if(t>=n.ALPHANUMERIC_CHARS.length)throw new xt;return n.ALPHANUMERIC_CHARS[t]},n.decodeAlphanumericSegment=function(t,e,r,i){for(var a=e.length();r>1;){if(t.available()<11)throw new xt;var s=t.readBits(11);e.append(n.toAlphaNumericChar(Math.floor(s/45))),e.append(n.toAlphaNumericChar(s%45)),r-=2}if(r===1){if(t.available()<6)throw new xt;e.append(n.toAlphaNumericChar(t.readBits(6)))}if(i)for(var l=a;l<e.length();l++)e.charAt(l)==="%"&&(l<e.length()-1&&e.charAt(l+1)==="%"?e.deleteCharAt(l+1):e.setCharAt(l,""))},n.decodeNumericSegment=function(t,e,r){for(;r>=3;){if(t.available()<10)throw new xt;var i=t.readBits(10);if(i>=1e3)throw new xt;e.append(n.toAlphaNumericChar(Math.floor(i/100))),e.append(n.toAlphaNumericChar(Math.floor(i/10)%10)),e.append(n.toAlphaNumericChar(i%10)),r-=3}if(r===2){if(t.available()<7)throw new xt;var a=t.readBits(7);if(a>=100)throw new xt;e.append(n.toAlphaNumericChar(Math.floor(a/10))),e.append(n.toAlphaNumericChar(a%10))}else if(r===1){if(t.available()<4)throw new xt;var s=t.readBits(4);if(s>=10)throw new xt;e.append(n.toAlphaNumericChar(s))}},n.parseECIValue=function(t){var e=t.readBits(8);if((e&128)===0)return e&127;if((e&192)===128){var r=t.readBits(8);return(e&63)<<8&4294967295|r}if((e&224)===192){var i=t.readBits(16);return(e&31)<<16&4294967295|i}throw new xt},n.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",n.GB2312_SUBSET=1,n}(),s4=function(){function n(t){this.mirrored=t}return n.prototype.isMirrored=function(){return this.mirrored},n.prototype.applyMirroredCorrection=function(t){if(!(!this.mirrored||t===null||t.length<3)){var e=t[0];t[0]=t[2],t[2]=e}},n}(),SS=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},XL=function(){function n(){this.rsDecoder=new qg(Nr.QR_CODE_FIELD_256)}return n.prototype.decodeBooleanArray=function(t,e){return this.decodeBitMatrix(ya.parseFromBooleanArray(t),e)},n.prototype.decodeBitMatrix=function(t,e){var r=new GL(t),i=null;try{return this.decodeBitMatrixParser(r,e)}catch(s){i=s}try{r.remask(),r.setMirror(!0),r.readVersion(),r.readFormatInformation(),r.mirror();var a=this.decodeBitMatrixParser(r,e);return a.setOther(new s4(!0)),a}catch(s){throw i!==null?i:s}},n.prototype.decodeBitMatrixParser=function(t,e){var r,i,a,s,l=t.readVersion(),c=t.readFormatInformation().getErrorCorrectionLevel(),f=t.readCodewords(),d=$L.getDataBlocks(f,l,c),g=0;try{for(var m=SS(d),v=m.next();!v.done;v=m.next()){var _=v.value;g+=_.getNumDataCodewords()}}catch(k){r={error:k}}finally{try{v&&!v.done&&(i=m.return)&&i.call(m)}finally{if(r)throw r.error}}var w=new Uint8Array(g),b=0;try{for(var C=SS(d),I=C.next();!I.done;I=C.next()){var _=I.value,R=_.getCodewords(),M=_.getNumDataCodewords();this.correctErrors(R,M);for(var N=0;N<M;N++)w[b++]=R[N]}}catch(k){a={error:k}}finally{try{I&&!I.done&&(s=C.return)&&s.call(C)}finally{if(a)throw a.error}}return qL.decode(w,l,c,e)},n.prototype.correctErrors=function(t,e){var r=new Int32Array(t);try{this.rsDecoder.decode(r,t.length-e)}catch{throw new Gn}for(var i=0;i<e;i++)t[i]=r[i]},n}(),WL=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),YL=function(n){WL(t,n);function t(e,r,i){var a=n.call(this,e,r)||this;return a.estimatedModuleSize=i,a}return t.prototype.aboutEquals=function(e,r,i){if(Math.abs(r-this.getY())<=e&&Math.abs(i-this.getX())<=e){var a=Math.abs(e-this.estimatedModuleSize);return a<=1||a<=this.estimatedModuleSize}return!1},t.prototype.combineEstimate=function(e,r,i){var a=(this.getX()+r)/2,s=(this.getY()+e)/2,l=(this.estimatedModuleSize+i)/2;return new t(a,s,l)},t}(Ct),KL=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},ZL=function(){function n(t,e,r,i,a,s,l){this.image=t,this.startX=e,this.startY=r,this.width=i,this.height=a,this.moduleSize=s,this.resultPointCallback=l,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}return n.prototype.find=function(){for(var t=this.startX,e=this.height,r=this.width,i=t+r,a=this.startY+e/2,s=new Int32Array(3),l=this.image,c=0;c<e;c++){var f=a+((c&1)===0?Math.floor((c+1)/2):-Math.floor((c+1)/2));s[0]=0,s[1]=0,s[2]=0;for(var d=t;d<i&&!l.get(d,f);)d++;for(var g=0;d<i;){if(l.get(d,f))if(g===1)s[1]++;else if(g===2){if(this.foundPatternCross(s)){var m=this.handlePossibleCenter(s,f,d);if(m!==null)return m}s[0]=s[2],s[1]=1,s[2]=0,g=1}else s[++g]++;else g===1&&g++,s[g]++;d++}if(this.foundPatternCross(s)){var m=this.handlePossibleCenter(s,f,i);if(m!==null)return m}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new ot},n.centerFromEnd=function(t,e){return e-t[2]-t[1]/2},n.prototype.foundPatternCross=function(t){for(var e=this.moduleSize,r=e/2,i=0;i<3;i++)if(Math.abs(e-t[i])>=r)return!1;return!0},n.prototype.crossCheckVertical=function(t,e,r,i){var a=this.image,s=a.getHeight(),l=this.crossCheckStateCount;l[0]=0,l[1]=0,l[2]=0;for(var c=t;c>=0&&a.get(e,c)&&l[1]<=r;)l[1]++,c--;if(c<0||l[1]>r)return NaN;for(;c>=0&&!a.get(e,c)&&l[0]<=r;)l[0]++,c--;if(l[0]>r)return NaN;for(c=t+1;c<s&&a.get(e,c)&&l[1]<=r;)l[1]++,c++;if(c===s||l[1]>r)return NaN;for(;c<s&&!a.get(e,c)&&l[2]<=r;)l[2]++,c++;if(l[2]>r)return NaN;var f=l[0]+l[1]+l[2];return 5*Math.abs(f-i)>=2*i?NaN:this.foundPatternCross(l)?n.centerFromEnd(l,c):NaN},n.prototype.handlePossibleCenter=function(t,e,r){var i,a,s=t[0]+t[1]+t[2],l=n.centerFromEnd(t,r),c=this.crossCheckVertical(e,l,2*t[1],s);if(!isNaN(c)){var f=(t[0]+t[1]+t[2])/3;try{for(var d=KL(this.possibleCenters),g=d.next();!g.done;g=d.next()){var m=g.value;if(m.aboutEquals(f,c,l))return m.combineEstimate(c,l,f)}}catch(_){i={error:_}}finally{try{g&&!g.done&&(a=d.return)&&a.call(d)}finally{if(i)throw i.error}}var v=new YL(l,c,f);this.possibleCenters.push(v),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(v)}return null},n}(),QL=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),JL=function(n){QL(t,n);function t(e,r,i,a){var s=n.call(this,e,r)||this;return s.estimatedModuleSize=i,s.count=a,a===void 0&&(s.count=1),s}return t.prototype.getEstimatedModuleSize=function(){return this.estimatedModuleSize},t.prototype.getCount=function(){return this.count},t.prototype.aboutEquals=function(e,r,i){if(Math.abs(r-this.getY())<=e&&Math.abs(i-this.getX())<=e){var a=Math.abs(e-this.estimatedModuleSize);return a<=1||a<=this.estimatedModuleSize}return!1},t.prototype.combineEstimate=function(e,r,i){var a=this.count+1,s=(this.count*this.getX()+r)/a,l=(this.count*this.getY()+e)/a,c=(this.count*this.estimatedModuleSize+i)/a;return new t(s,l,c,a)},t}(Ct),tB=function(){function n(t){this.bottomLeft=t[0],this.topLeft=t[1],this.topRight=t[2]}return n.prototype.getBottomLeft=function(){return this.bottomLeft},n.prototype.getTopLeft=function(){return this.topLeft},n.prototype.getTopRight=function(){return this.topRight},n}(),Kf=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},eB=function(){function n(t,e){this.image=t,this.resultPointCallback=e,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=e}return n.prototype.getImage=function(){return this.image},n.prototype.getPossibleCenters=function(){return this.possibleCenters},n.prototype.find=function(t){var e=t!=null&&t.get(Ye.TRY_HARDER)!==void 0,r=t!=null&&t.get(Ye.PURE_BARCODE)!==void 0,i=this.image,a=i.getHeight(),s=i.getWidth(),l=Math.floor(3*a/(4*n.MAX_MODULES));(l<n.MIN_SKIP||e)&&(l=n.MIN_SKIP);for(var c=!1,f=new Int32Array(5),d=l-1;d<a&&!c;d+=l){f[0]=0,f[1]=0,f[2]=0,f[3]=0,f[4]=0;for(var g=0,m=0;m<s;m++)if(i.get(m,d))(g&1)===1&&g++,f[g]++;else if((g&1)===0)if(g===4)if(n.foundPatternCross(f)){var v=this.handlePossibleCenter(f,d,m,r);if(v===!0)if(l=2,this.hasSkipped===!0)c=this.haveMultiplyConfirmedCenters();else{var _=this.findRowSkip();_>f[2]&&(d+=_-f[2]-l,m=s-1)}else{f[0]=f[2],f[1]=f[3],f[2]=f[4],f[3]=1,f[4]=0,g=3;continue}g=0,f[0]=0,f[1]=0,f[2]=0,f[3]=0,f[4]=0}else f[0]=f[2],f[1]=f[3],f[2]=f[4],f[3]=1,f[4]=0,g=3;else f[++g]++;else f[g]++;if(n.foundPatternCross(f)){var v=this.handlePossibleCenter(f,d,s,r);v===!0&&(l=f[0],this.hasSkipped&&(c=this.haveMultiplyConfirmedCenters()))}}var w=this.selectBestPatterns();return Ct.orderBestPatterns(w),new tB(w)},n.centerFromEnd=function(t,e){return e-t[4]-t[3]-t[2]/2},n.foundPatternCross=function(t){for(var e=0,r=0;r<5;r++){var i=t[r];if(i===0)return!1;e+=i}if(e<7)return!1;var a=e/7,s=a/2;return Math.abs(a-t[0])<s&&Math.abs(a-t[1])<s&&Math.abs(3*a-t[2])<3*s&&Math.abs(a-t[3])<s&&Math.abs(a-t[4])<s},n.prototype.getCrossCheckStateCount=function(){var t=this.crossCheckStateCount;return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t},n.prototype.crossCheckDiagonal=function(t,e,r,i){for(var a=this.getCrossCheckStateCount(),s=0,l=this.image;t>=s&&e>=s&&l.get(e-s,t-s);)a[2]++,s++;if(t<s||e<s)return!1;for(;t>=s&&e>=s&&!l.get(e-s,t-s)&&a[1]<=r;)a[1]++,s++;if(t<s||e<s||a[1]>r)return!1;for(;t>=s&&e>=s&&l.get(e-s,t-s)&&a[0]<=r;)a[0]++,s++;if(a[0]>r)return!1;var c=l.getHeight(),f=l.getWidth();for(s=1;t+s<c&&e+s<f&&l.get(e+s,t+s);)a[2]++,s++;if(t+s>=c||e+s>=f)return!1;for(;t+s<c&&e+s<f&&!l.get(e+s,t+s)&&a[3]<r;)a[3]++,s++;if(t+s>=c||e+s>=f||a[3]>=r)return!1;for(;t+s<c&&e+s<f&&l.get(e+s,t+s)&&a[4]<r;)a[4]++,s++;if(a[4]>=r)return!1;var d=a[0]+a[1]+a[2]+a[3]+a[4];return Math.abs(d-i)<2*i&&n.foundPatternCross(a)},n.prototype.crossCheckVertical=function(t,e,r,i){for(var a=this.image,s=a.getHeight(),l=this.getCrossCheckStateCount(),c=t;c>=0&&a.get(e,c);)l[2]++,c--;if(c<0)return NaN;for(;c>=0&&!a.get(e,c)&&l[1]<=r;)l[1]++,c--;if(c<0||l[1]>r)return NaN;for(;c>=0&&a.get(e,c)&&l[0]<=r;)l[0]++,c--;if(l[0]>r)return NaN;for(c=t+1;c<s&&a.get(e,c);)l[2]++,c++;if(c===s)return NaN;for(;c<s&&!a.get(e,c)&&l[3]<r;)l[3]++,c++;if(c===s||l[3]>=r)return NaN;for(;c<s&&a.get(e,c)&&l[4]<r;)l[4]++,c++;if(l[4]>=r)return NaN;var f=l[0]+l[1]+l[2]+l[3]+l[4];return 5*Math.abs(f-i)>=2*i?NaN:n.foundPatternCross(l)?n.centerFromEnd(l,c):NaN},n.prototype.crossCheckHorizontal=function(t,e,r,i){for(var a=this.image,s=a.getWidth(),l=this.getCrossCheckStateCount(),c=t;c>=0&&a.get(c,e);)l[2]++,c--;if(c<0)return NaN;for(;c>=0&&!a.get(c,e)&&l[1]<=r;)l[1]++,c--;if(c<0||l[1]>r)return NaN;for(;c>=0&&a.get(c,e)&&l[0]<=r;)l[0]++,c--;if(l[0]>r)return NaN;for(c=t+1;c<s&&a.get(c,e);)l[2]++,c++;if(c===s)return NaN;for(;c<s&&!a.get(c,e)&&l[3]<r;)l[3]++,c++;if(c===s||l[3]>=r)return NaN;for(;c<s&&a.get(c,e)&&l[4]<r;)l[4]++,c++;if(l[4]>=r)return NaN;var f=l[0]+l[1]+l[2]+l[3]+l[4];return 5*Math.abs(f-i)>=i?NaN:n.foundPatternCross(l)?n.centerFromEnd(l,c):NaN},n.prototype.handlePossibleCenter=function(t,e,r,i){var a=t[0]+t[1]+t[2]+t[3]+t[4],s=n.centerFromEnd(t,r),l=this.crossCheckVertical(e,Math.floor(s),t[2],a);if(!isNaN(l)&&(s=this.crossCheckHorizontal(Math.floor(s),Math.floor(l),t[2],a),!isNaN(s)&&(!i||this.crossCheckDiagonal(Math.floor(l),Math.floor(s),t[2],a)))){for(var c=a/7,f=!1,d=this.possibleCenters,g=0,m=d.length;g<m;g++){var v=d[g];if(v.aboutEquals(c,l,s)){d[g]=v.combineEstimate(l,s,c),f=!0;break}}if(!f){var _=new JL(s,l,c);d.push(_),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(_)}return!0}return!1},n.prototype.findRowSkip=function(){var t,e,r=this.possibleCenters.length;if(r<=1)return 0;var i=null;try{for(var a=Kf(this.possibleCenters),s=a.next();!s.done;s=a.next()){var l=s.value;if(l.getCount()>=n.CENTER_QUORUM)if(i==null)i=l;else return this.hasSkipped=!0,Math.floor((Math.abs(i.getX()-l.getX())-Math.abs(i.getY()-l.getY()))/2)}}catch(c){t={error:c}}finally{try{s&&!s.done&&(e=a.return)&&e.call(a)}finally{if(t)throw t.error}}return 0},n.prototype.haveMultiplyConfirmedCenters=function(){var t,e,r,i,a=0,s=0,l=this.possibleCenters.length;try{for(var c=Kf(this.possibleCenters),f=c.next();!f.done;f=c.next()){var d=f.value;d.getCount()>=n.CENTER_QUORUM&&(a++,s+=d.getEstimatedModuleSize())}}catch(w){t={error:w}}finally{try{f&&!f.done&&(e=c.return)&&e.call(c)}finally{if(t)throw t.error}}if(a<3)return!1;var g=s/l,m=0;try{for(var v=Kf(this.possibleCenters),_=v.next();!_.done;_=v.next()){var d=_.value;m+=Math.abs(d.getEstimatedModuleSize()-g)}}catch(w){r={error:w}}finally{try{_&&!_.done&&(i=v.return)&&i.call(v)}finally{if(r)throw r.error}}return m<=.05*s},n.prototype.selectBestPatterns=function(){var t,e,r,i,a=this.possibleCenters.length;if(a<3)throw new ot;var s=this.possibleCenters,l;if(a>3){var c=0,f=0;try{for(var d=Kf(this.possibleCenters),g=d.next();!g.done;g=d.next()){var m=g.value,v=m.getEstimatedModuleSize();c+=v,f+=v*v}}catch(N){t={error:N}}finally{try{g&&!g.done&&(e=d.return)&&e.call(d)}finally{if(t)throw t.error}}l=c/a;var _=Math.sqrt(f/a-l*l);s.sort(function(N,k){var O=Math.abs(k.getEstimatedModuleSize()-l),S=Math.abs(N.getEstimatedModuleSize()-l);return O<S?-1:O>S?1:0});for(var w=Math.max(.2*l,_),b=0;b<s.length&&s.length>3;b++){var C=s[b];Math.abs(C.getEstimatedModuleSize()-l)>w&&(s.splice(b,1),b--)}}if(s.length>3){var c=0;try{for(var I=Kf(s),R=I.next();!R.done;R=I.next()){var M=R.value;c+=M.getEstimatedModuleSize()}}catch(k){r={error:k}}finally{try{R&&!R.done&&(i=I.return)&&i.call(I)}finally{if(r)throw r.error}}l=c/s.length,s.sort(function(k,O){if(O.getCount()===k.getCount()){var S=Math.abs(O.getEstimatedModuleSize()-l),D=Math.abs(k.getEstimatedModuleSize()-l);return S<D?1:S>D?-1:0}else return O.getCount()-k.getCount()}),s.splice(3)}return[s[0],s[1],s[2]]},n.CENTER_QUORUM=2,n.MIN_SKIP=3,n.MAX_MODULES=57,n}(),nB=function(){function n(t){this.image=t}return n.prototype.getImage=function(){return this.image},n.prototype.getResultPointCallback=function(){return this.resultPointCallback},n.prototype.detect=function(t){this.resultPointCallback=t==null?null:t.get(Ye.NEED_RESULT_POINT_CALLBACK);var e=new eB(this.image,this.resultPointCallback),r=e.find(t);return this.processFinderPatternInfo(r)},n.prototype.processFinderPatternInfo=function(t){var e=t.getTopLeft(),r=t.getTopRight(),i=t.getBottomLeft(),a=this.calculateModuleSize(e,r,i);if(a<1)throw new ot("No pattern found in proccess finder.");var s=n.computeDimension(e,r,i,a),l=bl.getProvisionalVersionForDimension(s),c=l.getDimensionForVersion()-7,f=null;if(l.getAlignmentPatternCenters().length>0)for(var d=r.getX()-e.getX()+i.getX(),g=r.getY()-e.getY()+i.getY(),m=1-3/c,v=Math.floor(e.getX()+m*(d-e.getX())),_=Math.floor(e.getY()+m*(g-e.getY())),w=4;w<=16;w<<=1)try{f=this.findAlignmentInRegion(a,v,_,w);break}catch(R){if(!(R instanceof ot))throw R}var b=n.createTransform(e,r,i,f,s),C=n.sampleGrid(this.image,b,s),I;return f===null?I=[i,e,r]:I=[i,e,r,f],new m2(C,I)},n.createTransform=function(t,e,r,i,a){var s=a-3.5,l,c,f,d;return i!==null?(l=i.getX(),c=i.getY(),f=s-3,d=f):(l=e.getX()-t.getX()+r.getX(),c=e.getY()-t.getY()+r.getY(),f=s,d=s),t4.quadrilateralToQuadrilateral(3.5,3.5,s,3.5,f,d,3.5,s,t.getX(),t.getY(),e.getX(),e.getY(),l,c,r.getX(),r.getY())},n.sampleGrid=function(t,e,r){var i=v2.getInstance();return i.sampleGridWithTransform(t,r,r,e)},n.computeDimension=function(t,e,r,i){var a=he.round(Ct.distance(t,e)/i),s=he.round(Ct.distance(t,r)/i),l=Math.floor((a+s)/2)+7;switch(l&3){case 0:l++;break;case 2:l--;break;case 3:throw new ot("Dimensions could be not found.")}return l},n.prototype.calculateModuleSize=function(t,e,r){return(this.calculateModuleSizeOneWay(t,e)+this.calculateModuleSizeOneWay(t,r))/2},n.prototype.calculateModuleSizeOneWay=function(t,e){var r=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(t.getX()),Math.floor(t.getY()),Math.floor(e.getX()),Math.floor(e.getY())),i=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(e.getX()),Math.floor(e.getY()),Math.floor(t.getX()),Math.floor(t.getY()));return isNaN(r)?i/7:isNaN(i)?r/7:(r+i)/14},n.prototype.sizeOfBlackWhiteBlackRunBothWays=function(t,e,r,i){var a=this.sizeOfBlackWhiteBlackRun(t,e,r,i),s=1,l=t-(r-t);l<0?(s=t/(t-l),l=0):l>=this.image.getWidth()&&(s=(this.image.getWidth()-1-t)/(l-t),l=this.image.getWidth()-1);var c=Math.floor(e-(i-e)*s);return s=1,c<0?(s=e/(e-c),c=0):c>=this.image.getHeight()&&(s=(this.image.getHeight()-1-e)/(c-e),c=this.image.getHeight()-1),l=Math.floor(t+(l-t)*s),a+=this.sizeOfBlackWhiteBlackRun(t,e,l,c),a-1},n.prototype.sizeOfBlackWhiteBlackRun=function(t,e,r,i){var a=Math.abs(i-e)>Math.abs(r-t);if(a){var s=t;t=e,e=s,s=r,r=i,i=s}for(var l=Math.abs(r-t),c=Math.abs(i-e),f=-l/2,d=t<r?1:-1,g=e<i?1:-1,m=0,v=r+d,_=t,w=e;_!==v;_+=d){var b=a?w:_,C=a?_:w;if(m===1===this.image.get(b,C)){if(m===2)return he.distance(_,w,t,e);m++}if(f+=c,f>0){if(w===i)break;w+=g,f-=l}}return m===2?he.distance(r+d,i,t,e):NaN},n.prototype.findAlignmentInRegion=function(t,e,r,i){var a=Math.floor(i*t),s=Math.max(0,e-a),l=Math.min(this.image.getWidth()-1,e+a);if(l-s<t*3)throw new ot("Alignment top exceeds estimated module size.");var c=Math.max(0,r-a),f=Math.min(this.image.getHeight()-1,r+a);if(f-c<t*3)throw new ot("Alignment bottom exceeds estimated module size.");var d=new ZL(this.image,s,c,l-s,f-c,t,this.resultPointCallback);return d.find()},n}(),Gy=function(){function n(){this.decoder=new XL}return n.prototype.getDecoder=function(){return this.decoder},n.prototype.decode=function(t,e){var r,i;if(e!=null&&e.get(Ye.PURE_BARCODE)!==void 0){var a=n.extractPureBits(t.getBlackMatrix());r=this.decoder.decodeBitMatrix(a,e),i=n.NO_POINTS}else{var s=new nB(t.getBlackMatrix()).detect(e);r=this.decoder.decodeBitMatrix(s.getBits(),e),i=s.getPoints()}r.getOther()instanceof s4&&r.getOther().applyMirroredCorrection(i);var l=new pr(r.getText(),r.getRawBytes(),void 0,i,Pt.QR_CODE,void 0),c=r.getByteSegments();c!==null&&l.putMetadata(rr.BYTE_SEGMENTS,c);var f=r.getECLevel();return f!==null&&l.putMetadata(rr.ERROR_CORRECTION_LEVEL,f),r.hasStructuredAppend()&&(l.putMetadata(rr.STRUCTURED_APPEND_SEQUENCE,r.getStructuredAppendSequenceNumber()),l.putMetadata(rr.STRUCTURED_APPEND_PARITY,r.getStructuredAppendParity())),l},n.prototype.reset=function(){},n.extractPureBits=function(t){var e=t.getTopLeftOnBit(),r=t.getBottomRightOnBit();if(e===null||r===null)throw new ot;var i=this.moduleSize(e,t),a=e[1],s=r[1],l=e[0],c=r[0];if(l>=c||a>=s)throw new ot;if(s-a!==c-l&&(c=l+(s-a),c>=t.getWidth()))throw new ot;var f=Math.round((c-l+1)/i),d=Math.round((s-a+1)/i);if(f<=0||d<=0)throw new ot;if(d!==f)throw new ot;var g=Math.floor(i/2);a+=g,l+=g;var m=l+Math.floor((f-1)*i)-c;if(m>0){if(m>g)throw new ot;l-=m}var v=a+Math.floor((d-1)*i)-s;if(v>0){if(v>g)throw new ot;a-=v}for(var _=new ya(f,d),w=0;w<d;w++)for(var b=a+Math.floor(w*i),C=0;C<f;C++)t.get(l+Math.floor(C*i),b)&&_.set(C,w);return _},n.moduleSize=function(t,e){for(var r=e.getHeight(),i=e.getWidth(),a=t[0],s=t[1],l=!0,c=0;a<i&&s<r;){if(l!==e.get(a,s)){if(++c===5)break;l=!l}a++,s++}if(a===i||s===r)throw new ot;return(a-t[0])/7},n.NO_POINTS=new Array,n}(),rB=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},ue=function(){function n(){}return n.prototype.PDF417Common=function(){},n.getBitCountSum=function(t){return he.sum(t)},n.toIntArray=function(t){var e,r;if(t==null||!t.length)return n.EMPTY_INT_ARRAY;var i=new Int32Array(t.length),a=0;try{for(var s=rB(t),l=s.next();!l.done;l=s.next()){var c=l.value;i[a++]=c}}catch(f){e={error:f}}finally{try{l&&!l.done&&(r=s.return)&&r.call(s)}finally{if(e)throw e.error}}return i},n.getCodeword=function(t){var e=Dn.binarySearch(n.SYMBOL_TABLE,t&262143);return e<0?-1:(n.CODEWORD_TABLE[e]-1)%n.NUMBER_OF_CODEWORDS},n.NUMBER_OF_CODEWORDS=929,n.MAX_CODEWORDS_IN_BARCODE=n.NUMBER_OF_CODEWORDS-1,n.MIN_ROWS_IN_BARCODE=3,n.MAX_ROWS_IN_BARCODE=90,n.MODULES_IN_CODEWORD=17,n.MODULES_IN_STOP_PATTERN=18,n.BARS_IN_MODULE=8,n.EMPTY_INT_ARRAY=new Int32Array([]),n.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),n.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]),n}(),iB=function(){function n(t,e){this.bits=t,this.points=e}return n.prototype.getBits=function(){return this.bits},n.prototype.getPoints=function(){return this.points},n}(),aB=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},sB=function(){function n(){}return n.detectMultiple=function(t,e,r){var i=t.getBlackMatrix(),a=n.detect(r,i);return a.length||(i=i.clone(),i.rotate180(),a=n.detect(r,i)),new iB(i,a)},n.detect=function(t,e){for(var r,i,a=new Array,s=0,l=0,c=!1;s<e.getHeight();){var f=n.findVertices(e,s,l);if(f[0]==null&&f[3]==null){if(!c)break;c=!1,l=0;try{for(var d=(r=void 0,aB(a)),g=d.next();!g.done;g=d.next()){var m=g.value;m[1]!=null&&(s=Math.trunc(Math.max(s,m[1].getY()))),m[3]!=null&&(s=Math.max(s,Math.trunc(m[3].getY())))}}catch(v){r={error:v}}finally{try{g&&!g.done&&(i=d.return)&&i.call(d)}finally{if(r)throw r.error}}s+=n.ROW_STEP;continue}if(c=!0,a.push(f),!t)break;f[2]!=null?(l=Math.trunc(f[2].getX()),s=Math.trunc(f[2].getY())):(l=Math.trunc(f[4].getX()),s=Math.trunc(f[4].getY()))}return a},n.findVertices=function(t,e,r){var i=t.getHeight(),a=t.getWidth(),s=new Array(8);return n.copyToResult(s,n.findRowsWithPattern(t,i,a,e,r,n.START_PATTERN),n.INDEXES_START_PATTERN),s[4]!=null&&(r=Math.trunc(s[4].getX()),e=Math.trunc(s[4].getY())),n.copyToResult(s,n.findRowsWithPattern(t,i,a,e,r,n.STOP_PATTERN),n.INDEXES_STOP_PATTERN),s},n.copyToResult=function(t,e,r){for(var i=0;i<r.length;i++)t[r[i]]=e[i]},n.findRowsWithPattern=function(t,e,r,i,a,s){for(var l=new Array(4),c=!1,f=new Int32Array(s.length);i<e;i+=n.ROW_STEP){var d=n.findGuardPattern(t,a,i,r,!1,s,f);if(d!=null){for(;i>0;){var g=n.findGuardPattern(t,a,--i,r,!1,s,f);if(g!=null)d=g;else{i++;break}}l[0]=new Ct(d[0],i),l[1]=new Ct(d[1],i),c=!0;break}}var m=i+1;if(c){for(var v=0,g=Int32Array.from([Math.trunc(l[0].getX()),Math.trunc(l[1].getX())]);m<e;m++){var d=n.findGuardPattern(t,g[0],m,r,!1,s,f);if(d!=null&&Math.abs(g[0]-d[0])<n.MAX_PATTERN_DRIFT&&Math.abs(g[1]-d[1])<n.MAX_PATTERN_DRIFT)g=d,v=0;else{if(v>n.SKIPPED_ROW_COUNT_MAX)break;v++}}m-=v+1,l[2]=new Ct(g[0],m),l[3]=new Ct(g[1],m)}return m-i<n.BARCODE_MIN_HEIGHT&&Dn.fill(l,null),l},n.findGuardPattern=function(t,e,r,i,a,s,l){Dn.fillWithin(l,0,l.length,0);for(var c=e,f=0;t.get(c,r)&&c>0&&f++<n.MAX_PIXEL_DRIFT;)c--;for(var d=c,g=0,m=s.length,v=a;d<i;d++){var _=t.get(d,r);if(_!==v)l[g]++;else{if(g===m-1){if(n.patternMatchVariance(l,s,n.MAX_INDIVIDUAL_VARIANCE)<n.MAX_AVG_VARIANCE)return new Int32Array([c,d]);c+=l[0]+l[1],je.arraycopy(l,2,l,0,g-1),l[g-1]=0,l[g]=0,g--}else g++;l[g]=1,v=!v}}return g===m-1&&n.patternMatchVariance(l,s,n.MAX_INDIVIDUAL_VARIANCE)<n.MAX_AVG_VARIANCE?new Int32Array([c,d-1]):null},n.patternMatchVariance=function(t,e,r){for(var i=t.length,a=0,s=0,l=0;l<i;l++)a+=t[l],s+=e[l];if(a<s)return 1/0;var c=a/s;r*=c;for(var f=0,d=0;d<i;d++){var g=t[d],m=e[d]*c,v=g>m?g-m:m-g;if(v>r)return 1/0;f+=v}return f/a},n.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),n.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),n.MAX_AVG_VARIANCE=.42,n.MAX_INDIVIDUAL_VARIANCE=.8,n.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),n.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),n.MAX_PIXEL_DRIFT=3,n.MAX_PATTERN_DRIFT=5,n.SKIPPED_ROW_COUNT_MAX=25,n.ROW_STEP=5,n.BARCODE_MIN_HEIGHT=10,n}(),oB=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},xl=function(){function n(t,e){if(e.length===0)throw new kt;this.field=t;var r=e.length;if(r>1&&e[0]===0){for(var i=1;i<r&&e[i]===0;)i++;i===r?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(r-i),je.arraycopy(e,i,this.coefficients,0,this.coefficients.length))}else this.coefficients=e}return n.prototype.getCoefficients=function(){return this.coefficients},n.prototype.getDegree=function(){return this.coefficients.length-1},n.prototype.isZero=function(){return this.coefficients[0]===0},n.prototype.getCoefficient=function(t){return this.coefficients[this.coefficients.length-1-t]},n.prototype.evaluateAt=function(t){var e,r;if(t===0)return this.getCoefficient(0);if(t===1){var i=0;try{for(var a=oB(this.coefficients),s=a.next();!s.done;s=a.next()){var l=s.value;i=this.field.add(i,l)}}catch(g){e={error:g}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(e)throw e.error}}return i}for(var c=this.coefficients[0],f=this.coefficients.length,d=1;d<f;d++)c=this.field.add(this.field.multiply(t,c),this.coefficients[d]);return c},n.prototype.add=function(t){if(!this.field.equals(t.field))throw new kt("ModulusPolys do not have same ModulusGF field");if(this.isZero())return t;if(t.isZero())return this;var e=this.coefficients,r=t.coefficients;if(e.length>r.length){var i=e;e=r,r=i}var a=new Int32Array(r.length),s=r.length-e.length;je.arraycopy(r,0,a,0,s);for(var l=s;l<r.length;l++)a[l]=this.field.add(e[l-s],r[l]);return new n(this.field,a)},n.prototype.subtract=function(t){if(!this.field.equals(t.field))throw new kt("ModulusPolys do not have same ModulusGF field");return t.isZero()?this:this.add(t.negative())},n.prototype.multiply=function(t){return t instanceof n?this.multiplyOther(t):this.multiplyScalar(t)},n.prototype.multiplyOther=function(t){if(!this.field.equals(t.field))throw new kt("ModulusPolys do not have same ModulusGF field");if(this.isZero()||t.isZero())return new n(this.field,new Int32Array([0]));for(var e=this.coefficients,r=e.length,i=t.coefficients,a=i.length,s=new Int32Array(r+a-1),l=0;l<r;l++)for(var c=e[l],f=0;f<a;f++)s[l+f]=this.field.add(s[l+f],this.field.multiply(c,i[f]));return new n(this.field,s)},n.prototype.negative=function(){for(var t=this.coefficients.length,e=new Int32Array(t),r=0;r<t;r++)e[r]=this.field.subtract(0,this.coefficients[r]);return new n(this.field,e)},n.prototype.multiplyScalar=function(t){if(t===0)return new n(this.field,new Int32Array([0]));if(t===1)return this;for(var e=this.coefficients.length,r=new Int32Array(e),i=0;i<e;i++)r[i]=this.field.multiply(this.coefficients[i],t);return new n(this.field,r)},n.prototype.multiplyByMonomial=function(t,e){if(t<0)throw new kt;if(e===0)return new n(this.field,new Int32Array([0]));for(var r=this.coefficients.length,i=new Int32Array(r+t),a=0;a<r;a++)i[a]=this.field.multiply(this.coefficients[a],e);return new n(this.field,i)},n.prototype.toString=function(){for(var t=new Wt,e=this.getDegree();e>=0;e--){var r=this.getCoefficient(e);r!==0&&(r<0?(t.append(" - "),r=-r):t.length()>0&&t.append(" + "),(e===0||r!==1)&&t.append(r),e!==0&&(e===1?t.append("x"):(t.append("x^"),t.append(e))))}return t.toString()},n}(),lB=function(){function n(){}return n.prototype.add=function(t,e){return(t+e)%this.modulus},n.prototype.subtract=function(t,e){return(this.modulus+t-e)%this.modulus},n.prototype.exp=function(t){return this.expTable[t]},n.prototype.log=function(t){if(t===0)throw new kt;return this.logTable[t]},n.prototype.inverse=function(t){if(t===0)throw new J3;return this.expTable[this.modulus-this.logTable[t]-1]},n.prototype.multiply=function(t,e){return t===0||e===0?0:this.expTable[(this.logTable[t]+this.logTable[e])%(this.modulus-1)]},n.prototype.getSize=function(){return this.modulus},n.prototype.equals=function(t){return t===this},n}(),uB=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),cB=function(n){uB(t,n);function t(e,r){var i=n.call(this)||this;i.modulus=e,i.expTable=new Int32Array(e),i.logTable=new Int32Array(e);for(var a=1,s=0;s<e;s++)i.expTable[s]=a,a=a*r%e;for(var s=0;s<e-1;s++)i.logTable[i.expTable[s]]=s;return i.zero=new xl(i,new Int32Array([0])),i.one=new xl(i,new Int32Array([1])),i}return t.prototype.getZero=function(){return this.zero},t.prototype.getOne=function(){return this.one},t.prototype.buildMonomial=function(e,r){if(e<0)throw new kt;if(r===0)return this.zero;var i=new Int32Array(e+1);return i[0]=r,new xl(this,i)},t.PDF417_GF=new t(ue.NUMBER_OF_CODEWORDS,3),t}(lB),fB=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},hB=function(){function n(){this.field=cB.PDF417_GF}return n.prototype.decode=function(t,e,r){for(var i,a,s=new xl(this.field,t),l=new Int32Array(e),c=!1,f=e;f>0;f--){var d=s.evaluateAt(this.field.exp(f));l[e-f]=d,d!==0&&(c=!0)}if(!c)return 0;var g=this.field.getOne();if(r!=null)try{for(var m=fB(r),v=m.next();!v.done;v=m.next()){var _=v.value,w=this.field.exp(t.length-1-_),b=new xl(this.field,new Int32Array([this.field.subtract(0,w),1]));g=g.multiply(b)}}catch(S){i={error:S}}finally{try{v&&!v.done&&(a=m.return)&&a.call(m)}finally{if(i)throw i.error}}for(var C=new xl(this.field,l),I=this.runEuclideanAlgorithm(this.field.buildMonomial(e,1),C,e),R=I[0],M=I[1],N=this.findErrorLocations(R),k=this.findErrorMagnitudes(M,R,N),f=0;f<N.length;f++){var O=t.length-1-this.field.log(N[f]);if(O<0)throw Gn.getChecksumInstance();t[O]=this.field.subtract(t[O],k[f])}return N.length},n.prototype.runEuclideanAlgorithm=function(t,e,r){if(t.getDegree()<e.getDegree()){var i=t;t=e,e=i}for(var a=t,s=e,l=this.field.getZero(),c=this.field.getOne();s.getDegree()>=Math.round(r/2);){var f=a,d=l;if(a=s,l=c,a.isZero())throw Gn.getChecksumInstance();s=f;for(var g=this.field.getZero(),m=a.getCoefficient(a.getDegree()),v=this.field.inverse(m);s.getDegree()>=a.getDegree()&&!s.isZero();){var _=s.getDegree()-a.getDegree(),w=this.field.multiply(s.getCoefficient(s.getDegree()),v);g=g.add(this.field.buildMonomial(_,w)),s=s.subtract(a.multiplyByMonomial(_,w))}c=g.multiply(l).subtract(d).negative()}var b=c.getCoefficient(0);if(b===0)throw Gn.getChecksumInstance();var C=this.field.inverse(b),I=c.multiply(C),R=s.multiply(C);return[I,R]},n.prototype.findErrorLocations=function(t){for(var e=t.getDegree(),r=new Int32Array(e),i=0,a=1;a<this.field.getSize()&&i<e;a++)t.evaluateAt(a)===0&&(r[i]=this.field.inverse(a),i++);if(i!==e)throw Gn.getChecksumInstance();return r},n.prototype.findErrorMagnitudes=function(t,e,r){for(var i=e.getDegree(),a=new Int32Array(i),s=1;s<=i;s++)a[i-s]=this.field.multiply(s,e.getCoefficient(s));for(var l=new xl(this.field,a),c=r.length,f=new Int32Array(c),s=0;s<c;s++){var d=this.field.inverse(r[s]),g=this.field.subtract(0,t.evaluateAt(d)),m=this.field.inverse(l.evaluateAt(d));f[s]=this.field.multiply(g,m)}return f},n}(),$y=function(){function n(t,e,r,i,a){t instanceof n?this.constructor_2(t):this.constructor_1(t,e,r,i,a)}return n.prototype.constructor_1=function(t,e,r,i,a){var s=e==null||r==null,l=i==null||a==null;if(s&&l)throw new ot;s?(e=new Ct(0,i.getY()),r=new Ct(0,a.getY())):l&&(i=new Ct(t.getWidth()-1,e.getY()),a=new Ct(t.getWidth()-1,r.getY())),this.image=t,this.topLeft=e,this.bottomLeft=r,this.topRight=i,this.bottomRight=a,this.minX=Math.trunc(Math.min(e.getX(),r.getX())),this.maxX=Math.trunc(Math.max(i.getX(),a.getX())),this.minY=Math.trunc(Math.min(e.getY(),i.getY())),this.maxY=Math.trunc(Math.max(r.getY(),a.getY()))},n.prototype.constructor_2=function(t){this.image=t.image,this.topLeft=t.getTopLeft(),this.bottomLeft=t.getBottomLeft(),this.topRight=t.getTopRight(),this.bottomRight=t.getBottomRight(),this.minX=t.getMinX(),this.maxX=t.getMaxX(),this.minY=t.getMinY(),this.maxY=t.getMaxY()},n.merge=function(t,e){return t==null?e:e==null?t:new n(t.image,t.topLeft,t.bottomLeft,e.topRight,e.bottomRight)},n.prototype.addMissingRows=function(t,e,r){var i=this.topLeft,a=this.bottomLeft,s=this.topRight,l=this.bottomRight;if(t>0){var c=r?this.topLeft:this.topRight,f=Math.trunc(c.getY()-t);f<0&&(f=0);var d=new Ct(c.getX(),f);r?i=d:s=d}if(e>0){var g=r?this.bottomLeft:this.bottomRight,m=Math.trunc(g.getY()+e);m>=this.image.getHeight()&&(m=this.image.getHeight()-1);var v=new Ct(g.getX(),m);r?a=v:l=v}return new n(this.image,i,a,s,l)},n.prototype.getMinX=function(){return this.minX},n.prototype.getMaxX=function(){return this.maxX},n.prototype.getMinY=function(){return this.minY},n.prototype.getMaxY=function(){return this.maxY},n.prototype.getTopLeft=function(){return this.topLeft},n.prototype.getTopRight=function(){return this.topRight},n.prototype.getBottomLeft=function(){return this.bottomLeft},n.prototype.getBottomRight=function(){return this.bottomRight},n}(),dB=function(){function n(t,e,r,i){this.columnCount=t,this.errorCorrectionLevel=i,this.rowCountUpperPart=e,this.rowCountLowerPart=r,this.rowCount=e+r}return n.prototype.getColumnCount=function(){return this.columnCount},n.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},n.prototype.getRowCount=function(){return this.rowCount},n.prototype.getRowCountUpperPart=function(){return this.rowCountUpperPart},n.prototype.getRowCountLowerPart=function(){return this.rowCountLowerPart},n}(),x2=function(){function n(){this.buffer=""}return n.form=function(t,e){var r=-1;function i(s,l,c,f,d,g){if(s==="%%")return"%";if(e[++r]!==void 0){s=f?parseInt(f.substr(1)):void 0;var m=d?parseInt(d.substr(1)):void 0,v;switch(g){case"s":v=e[r];break;case"c":v=e[r][0];break;case"f":v=parseFloat(e[r]).toFixed(s);break;case"p":v=parseFloat(e[r]).toPrecision(s);break;case"e":v=parseFloat(e[r]).toExponential(s);break;case"x":v=parseInt(e[r]).toString(m||16);break;case"d":v=parseFloat(parseInt(e[r],m||10).toPrecision(s)).toFixed(0);break}v=typeof v=="object"?JSON.stringify(v):(+v).toString(m);for(var _=parseInt(c),w=c&&c[0]+""=="0"?"0":" ";v.length<_;)v=l!==void 0?v+w:w+v;return v}}var a=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return t.replace(a,i)},n.prototype.format=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];this.buffer+=n.form(t,e)},n.prototype.toString=function(){return this.buffer},n}(),gB=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},o4=function(){function n(t){this.boundingBox=new $y(t),this.codewords=new Array(t.getMaxY()-t.getMinY()+1)}return n.prototype.getCodewordNearby=function(t){var e=this.getCodeword(t);if(e!=null)return e;for(var r=1;r<n.MAX_NEARBY_DISTANCE;r++){var i=this.imageRowToCodewordIndex(t)-r;if(i>=0&&(e=this.codewords[i],e!=null)||(i=this.imageRowToCodewordIndex(t)+r,i<this.codewords.length&&(e=this.codewords[i],e!=null)))return e}return null},n.prototype.imageRowToCodewordIndex=function(t){return t-this.boundingBox.getMinY()},n.prototype.setCodeword=function(t,e){this.codewords[this.imageRowToCodewordIndex(t)]=e},n.prototype.getCodeword=function(t){return this.codewords[this.imageRowToCodewordIndex(t)]},n.prototype.getBoundingBox=function(){return this.boundingBox},n.prototype.getCodewords=function(){return this.codewords},n.prototype.toString=function(){var t,e,r=new x2,i=0;try{for(var a=gB(this.codewords),s=a.next();!s.done;s=a.next()){var l=s.value;if(l==null){r.format("%3d:    |   %n",i++);continue}r.format("%3d: %3d|%3d%n",i++,l.getRowNumber(),l.getValue())}}catch(c){t={error:c}}finally{try{s&&!s.done&&(e=a.return)&&e.call(a)}finally{if(t)throw t.error}}return r.toString()},n.MAX_NEARBY_DISTANCE=5,n}(),pB=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},mB=function(n,t){var e=typeof Symbol=="function"&&n[Symbol.iterator];if(!e)return n;var r=e.call(n),i,a=[],s;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(l){s={error:l}}finally{try{i&&!i.done&&(e=r.return)&&e.call(r)}finally{if(s)throw s.error}}return a},dh=function(){function n(){this.values=new Map}return n.prototype.setValue=function(t){t=Math.trunc(t);var e=this.values.get(t);e==null&&(e=0),e++,this.values.set(t,e)},n.prototype.getValue=function(){var t,e,r=-1,i=new Array,a=function(g,m){var v={getKey:function(){return g},getValue:function(){return m}};v.getValue()>r?(r=v.getValue(),i=[],i.push(v.getKey())):v.getValue()===r&&i.push(v.getKey())};try{for(var s=pB(this.values.entries()),l=s.next();!l.done;l=s.next()){var c=mB(l.value,2),f=c[0],d=c[1];a(f,d)}}catch(g){t={error:g}}finally{try{l&&!l.done&&(e=s.return)&&e.call(s)}finally{if(t)throw t.error}}return ue.toIntArray(i)},n.prototype.getConfidence=function(t){return this.values.get(t)},n}(),vB=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Dv=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},TS=function(n){vB(t,n);function t(e,r){var i=n.call(this,e)||this;return i._isLeft=r,i}return t.prototype.setRowNumbers=function(){var e,r;try{for(var i=Dv(this.getCodewords()),a=i.next();!a.done;a=i.next()){var s=a.value;s!=null&&s.setRowNumberAsRowIndicatorColumn()}}catch(l){e={error:l}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(e)throw e.error}}},t.prototype.adjustCompleteIndicatorColumnRowNumbers=function(e){var r=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(r,e);for(var i=this.getBoundingBox(),a=this._isLeft?i.getTopLeft():i.getTopRight(),s=this._isLeft?i.getBottomLeft():i.getBottomRight(),l=this.imageRowToCodewordIndex(Math.trunc(a.getY())),c=this.imageRowToCodewordIndex(Math.trunc(s.getY())),f=-1,d=1,g=0,m=l;m<c;m++)if(r[m]!=null){var v=r[m],_=v.getRowNumber()-f;if(_===0)g++;else if(_===1)d=Math.max(d,g),g=1,f=v.getRowNumber();else if(_<0||v.getRowNumber()>=e.getRowCount()||_>m)r[m]=null;else{var w=void 0;d>2?w=(d-2)*_:w=_;for(var b=w>=m,C=1;C<=w&&!b;C++)b=r[m-C]!=null;b?r[m]=null:(f=v.getRowNumber(),g=1)}}},t.prototype.getRowHeights=function(){var e,r,i=this.getBarcodeMetadata();if(i==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(i);var a=new Int32Array(i.getRowCount());try{for(var s=Dv(this.getCodewords()),l=s.next();!l.done;l=s.next()){var c=l.value;if(c!=null){var f=c.getRowNumber();if(f>=a.length)continue;a[f]++}}}catch(d){e={error:d}}finally{try{l&&!l.done&&(r=s.return)&&r.call(s)}finally{if(e)throw e.error}}return a},t.prototype.adjustIncompleteIndicatorColumnRowNumbers=function(e){for(var r=this.getBoundingBox(),i=this._isLeft?r.getTopLeft():r.getTopRight(),a=this._isLeft?r.getBottomLeft():r.getBottomRight(),s=this.imageRowToCodewordIndex(Math.trunc(i.getY())),l=this.imageRowToCodewordIndex(Math.trunc(a.getY())),c=this.getCodewords(),f=-1,d=s;d<l;d++)if(c[d]!=null){var g=c[d];g.setRowNumberAsRowIndicatorColumn();var m=g.getRowNumber()-f;m===0||(m===1?f=g.getRowNumber():g.getRowNumber()>=e.getRowCount()?c[d]=null:f=g.getRowNumber())}},t.prototype.getBarcodeMetadata=function(){var e,r,i=this.getCodewords(),a=new dh,s=new dh,l=new dh,c=new dh;try{for(var f=Dv(i),d=f.next();!d.done;d=f.next()){var g=d.value;if(g!=null){g.setRowNumberAsRowIndicatorColumn();var m=g.getValue()%30,v=g.getRowNumber();switch(this._isLeft||(v+=2),v%3){case 0:s.setValue(m*3+1);break;case 1:c.setValue(m/3),l.setValue(m%3);break;case 2:a.setValue(m+1);break}}}}catch(w){e={error:w}}finally{try{d&&!d.done&&(r=f.return)&&r.call(f)}finally{if(e)throw e.error}}if(a.getValue().length===0||s.getValue().length===0||l.getValue().length===0||c.getValue().length===0||a.getValue()[0]<1||s.getValue()[0]+l.getValue()[0]<ue.MIN_ROWS_IN_BARCODE||s.getValue()[0]+l.getValue()[0]>ue.MAX_ROWS_IN_BARCODE)return null;var _=new dB(a.getValue()[0],s.getValue()[0],l.getValue()[0],c.getValue()[0]);return this.removeIncorrectCodewords(i,_),_},t.prototype.removeIncorrectCodewords=function(e,r){for(var i=0;i<e.length;i++){var a=e[i];if(e[i]!=null){var s=a.getValue()%30,l=a.getRowNumber();if(l>r.getRowCount()){e[i]=null;continue}switch(this._isLeft||(l+=2),l%3){case 0:s*3+1!==r.getRowCountUpperPart()&&(e[i]=null);break;case 1:(Math.trunc(s/3)!==r.getErrorCorrectionLevel()||s%3!==r.getRowCountLowerPart())&&(e[i]=null);break;case 2:s+1!==r.getColumnCount()&&(e[i]=null);break}}}},t.prototype.isLeft=function(){return this._isLeft},t.prototype.toString=function(){return"IsLeft: "+this._isLeft+`
`+n.prototype.toString.call(this)},t}(o4),yB=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},xB=function(){function n(t,e){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=t,this.barcodeColumnCount=t.getColumnCount(),this.boundingBox=e,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}return n.prototype.getDetectionResultColumns=function(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);var t=ue.MAX_CODEWORDS_IN_BARCODE,e;do e=t,t=this.adjustRowNumbersAndGetCount();while(t>0&&t<e);return this.detectionResultColumns},n.prototype.adjustIndicatorColumnRowNumbers=function(t){t!=null&&t.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)},n.prototype.adjustRowNumbersAndGetCount=function(){var t=this.adjustRowNumbersByRow();if(t===0)return 0;for(var e=1;e<this.barcodeColumnCount+1;e++)for(var r=this.detectionResultColumns[e].getCodewords(),i=0;i<r.length;i++)r[i]!=null&&(r[i].hasValidRowNumber()||this.adjustRowNumbers(e,i,r));return t},n.prototype.adjustRowNumbersByRow=function(){this.adjustRowNumbersFromBothRI();var t=this.adjustRowNumbersFromLRI();return t+this.adjustRowNumbersFromRRI()},n.prototype.adjustRowNumbersFromBothRI=function(){if(!(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)){for(var t=this.detectionResultColumns[0].getCodewords(),e=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),r=0;r<t.length;r++)if(t[r]!=null&&e[r]!=null&&t[r].getRowNumber()===e[r].getRowNumber())for(var i=1;i<=this.barcodeColumnCount;i++){var a=this.detectionResultColumns[i].getCodewords()[r];a!=null&&(a.setRowNumber(t[r].getRowNumber()),a.hasValidRowNumber()||(this.detectionResultColumns[i].getCodewords()[r]=null))}}},n.prototype.adjustRowNumbersFromRRI=function(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;for(var t=0,e=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),r=0;r<e.length;r++)if(e[r]!=null)for(var i=e[r].getRowNumber(),a=0,s=this.barcodeColumnCount+1;s>0&&a<this.ADJUST_ROW_NUMBER_SKIP;s--){var l=this.detectionResultColumns[s].getCodewords()[r];l!=null&&(a=n.adjustRowNumberIfValid(i,a,l),l.hasValidRowNumber()||t++)}return t},n.prototype.adjustRowNumbersFromLRI=function(){if(this.detectionResultColumns[0]==null)return 0;for(var t=0,e=this.detectionResultColumns[0].getCodewords(),r=0;r<e.length;r++)if(e[r]!=null)for(var i=e[r].getRowNumber(),a=0,s=1;s<this.barcodeColumnCount+1&&a<this.ADJUST_ROW_NUMBER_SKIP;s++){var l=this.detectionResultColumns[s].getCodewords()[r];l!=null&&(a=n.adjustRowNumberIfValid(i,a,l),l.hasValidRowNumber()||t++)}return t},n.adjustRowNumberIfValid=function(t,e,r){return r==null||r.hasValidRowNumber()||(r.isValidRowNumber(t)?(r.setRowNumber(t),e=0):++e),e},n.prototype.adjustRowNumbers=function(t,e,r){var i,a;if(this.detectionResultColumns[t-1]!=null){var s=r[e],l=this.detectionResultColumns[t-1].getCodewords(),c=l;this.detectionResultColumns[t+1]!=null&&(c=this.detectionResultColumns[t+1].getCodewords());var f=new Array(14);f[2]=l[e],f[3]=c[e],e>0&&(f[0]=r[e-1],f[4]=l[e-1],f[5]=c[e-1]),e>1&&(f[8]=r[e-2],f[10]=l[e-2],f[11]=c[e-2]),e<r.length-1&&(f[1]=r[e+1],f[6]=l[e+1],f[7]=c[e+1]),e<r.length-2&&(f[9]=r[e+2],f[12]=l[e+2],f[13]=c[e+2]);try{for(var d=yB(f),g=d.next();!g.done;g=d.next()){var m=g.value;if(n.adjustRowNumber(s,m))return}}catch(v){i={error:v}}finally{try{g&&!g.done&&(a=d.return)&&a.call(d)}finally{if(i)throw i.error}}}},n.adjustRowNumber=function(t,e){return e==null?!1:e.hasValidRowNumber()&&e.getBucket()===t.getBucket()?(t.setRowNumber(e.getRowNumber()),!0):!1},n.prototype.getBarcodeColumnCount=function(){return this.barcodeColumnCount},n.prototype.getBarcodeRowCount=function(){return this.barcodeMetadata.getRowCount()},n.prototype.getBarcodeECLevel=function(){return this.barcodeMetadata.getErrorCorrectionLevel()},n.prototype.setBoundingBox=function(t){this.boundingBox=t},n.prototype.getBoundingBox=function(){return this.boundingBox},n.prototype.setDetectionResultColumn=function(t,e){this.detectionResultColumns[t]=e},n.prototype.getDetectionResultColumn=function(t){return this.detectionResultColumns[t]},n.prototype.toString=function(){var t=this.detectionResultColumns[0];t==null&&(t=this.detectionResultColumns[this.barcodeColumnCount+1]);for(var e=new x2,r=0;r<t.getCodewords().length;r++){e.format("CW %3d:",r);for(var i=0;i<this.barcodeColumnCount+2;i++){if(this.detectionResultColumns[i]==null){e.format("    |   ");continue}var a=this.detectionResultColumns[i].getCodewords()[r];if(a==null){e.format("    |   ");continue}e.format(" %3d|%3d",a.getRowNumber(),a.getValue())}e.format("%n")}return e.toString()},n}(),_B=function(){function n(t,e,r,i){this.rowNumber=n.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(t),this.endX=Math.trunc(e),this.bucket=Math.trunc(r),this.value=Math.trunc(i)}return n.prototype.hasValidRowNumber=function(){return this.isValidRowNumber(this.rowNumber)},n.prototype.isValidRowNumber=function(t){return t!==n.BARCODE_ROW_UNKNOWN&&this.bucket===t%3*3},n.prototype.setRowNumberAsRowIndicatorColumn=function(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))},n.prototype.getWidth=function(){return this.endX-this.startX},n.prototype.getStartX=function(){return this.startX},n.prototype.getEndX=function(){return this.endX},n.prototype.getBucket=function(){return this.bucket},n.prototype.getValue=function(){return this.value},n.prototype.getRowNumber=function(){return this.rowNumber},n.prototype.setRowNumber=function(t){this.rowNumber=t},n.prototype.toString=function(){return this.rowNumber+"|"+this.value},n.BARCODE_ROW_UNKNOWN=-1,n}(),AB=function(){function n(){}return n.initialize=function(){for(var t=0;t<ue.SYMBOL_TABLE.length;t++)for(var e=ue.SYMBOL_TABLE[t],r=e&1,i=0;i<ue.BARS_IN_MODULE;i++){for(var a=0;(e&1)===r;)a+=1,e>>=1;r=e&1,n.RATIOS_TABLE[t]||(n.RATIOS_TABLE[t]=new Array(ue.BARS_IN_MODULE)),n.RATIOS_TABLE[t][ue.BARS_IN_MODULE-i-1]=Math.fround(a/ue.MODULES_IN_CODEWORD)}this.bSymbolTableReady=!0},n.getDecodedValue=function(t){var e=n.getDecodedCodewordValue(n.sampleBitCounts(t));return e!==-1?e:n.getClosestDecodedValue(t)},n.sampleBitCounts=function(t){for(var e=he.sum(t),r=new Int32Array(ue.BARS_IN_MODULE),i=0,a=0,s=0;s<ue.MODULES_IN_CODEWORD;s++){var l=e/(2*ue.MODULES_IN_CODEWORD)+s*e/ue.MODULES_IN_CODEWORD;a+t[i]<=l&&(a+=t[i],i++),r[i]++}return r},n.getDecodedCodewordValue=function(t){var e=n.getBitValue(t);return ue.getCodeword(e)===-1?-1:e},n.getBitValue=function(t){for(var e=0,r=0;r<t.length;r++)for(var i=0;i<t[r];i++)e=e<<1|(r%2===0?1:0);return Math.trunc(e)},n.getClosestDecodedValue=function(t){var e=he.sum(t),r=new Array(ue.BARS_IN_MODULE);if(e>1)for(var i=0;i<r.length;i++)r[i]=Math.fround(t[i]/e);var a=Fy.MAX_VALUE,s=-1;this.bSymbolTableReady||n.initialize();for(var l=0;l<n.RATIOS_TABLE.length;l++){for(var c=0,f=n.RATIOS_TABLE[l],d=0;d<ue.BARS_IN_MODULE;d++){var g=Math.fround(f[d]-r[d]);if(c+=Math.fround(g*g),c>=a)break}c<a&&(a=c,s=ue.SYMBOL_TABLE[l])}return s},n.bSymbolTableReady=!1,n.RATIOS_TABLE=new Array(ue.SYMBOL_TABLE.length).map(function(t){return new Array(ue.BARS_IN_MODULE)}),n}(),EB=function(){function n(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}return n.prototype.getSegmentIndex=function(){return this.segmentIndex},n.prototype.setSegmentIndex=function(t){this.segmentIndex=t},n.prototype.getFileId=function(){return this.fileId},n.prototype.setFileId=function(t){this.fileId=t},n.prototype.getOptionalData=function(){return this.optionalData},n.prototype.setOptionalData=function(t){this.optionalData=t},n.prototype.isLastSegment=function(){return this.lastSegment},n.prototype.setLastSegment=function(t){this.lastSegment=t},n.prototype.getSegmentCount=function(){return this.segmentCount},n.prototype.setSegmentCount=function(t){this.segmentCount=t},n.prototype.getSender=function(){return this.sender||null},n.prototype.setSender=function(t){this.sender=t},n.prototype.getAddressee=function(){return this.addressee||null},n.prototype.setAddressee=function(t){this.addressee=t},n.prototype.getFileName=function(){return this.fileName},n.prototype.setFileName=function(t){this.fileName=t},n.prototype.getFileSize=function(){return this.fileSize},n.prototype.setFileSize=function(t){this.fileSize=t},n.prototype.getChecksum=function(){return this.checksum},n.prototype.setChecksum=function(t){this.checksum=t},n.prototype.getTimestamp=function(){return this.timestamp},n.prototype.setTimestamp=function(t){this.timestamp=t},n}(),CS=function(){function n(){}return n.parseLong=function(t,e){return e===void 0&&(e=void 0),parseInt(t,e)},n}(),wB=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),bB=function(n){wB(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.kind="NullPointerException",t}(Br),SB=function(){function n(){}return n.prototype.writeBytes=function(t){this.writeBytesOffset(t,0,t.length)},n.prototype.writeBytesOffset=function(t,e,r){if(t==null)throw new bB;if(e<0||e>t.length||r<0||e+r>t.length||e+r<0)throw new g2;if(r===0)return;for(var i=0;i<r;i++)this.write(t[e+i])},n.prototype.flush=function(){},n.prototype.close=function(){},n}(),TB=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),CB=function(n){TB(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t}(Br),IB=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),RB=function(n){IB(t,n);function t(e){e===void 0&&(e=32);var r=n.call(this)||this;if(r.count=0,e<0)throw new kt("Negative initial size: "+e);return r.buf=new Uint8Array(e),r}return t.prototype.ensureCapacity=function(e){e-this.buf.length>0&&this.grow(e)},t.prototype.grow=function(e){var r=this.buf.length,i=r<<1;if(i-e<0&&(i=e),i<0){if(e<0)throw new CB;i=Zt.MAX_VALUE}this.buf=Dn.copyOfUint8Array(this.buf,i)},t.prototype.write=function(e){this.ensureCapacity(this.count+1),this.buf[this.count]=e,this.count+=1},t.prototype.writeBytesOffset=function(e,r,i){if(r<0||r>e.length||i<0||r+i-e.length>0)throw new g2;this.ensureCapacity(this.count+i),je.arraycopy(e,r,this.buf,this.count,i),this.count+=i},t.prototype.writeTo=function(e){e.writeBytesOffset(this.buf,0,this.count)},t.prototype.reset=function(){this.count=0},t.prototype.toByteArray=function(){return Dn.copyOfUint8Array(this.buf,this.count)},t.prototype.size=function(){return this.count},t.prototype.toString=function(e){return e?typeof e=="string"?this.toString_string(e):this.toString_number(e):this.toString_void()},t.prototype.toString_void=function(){return new String(this.buf).toString()},t.prototype.toString_string=function(e){return new String(this.buf).toString()},t.prototype.toString_number=function(e){return new String(this.buf).toString()},t.prototype.close=function(){},t}(SB),Pe;(function(n){n[n.ALPHA=0]="ALPHA",n[n.LOWER=1]="LOWER",n[n.MIXED=2]="MIXED",n[n.PUNCT=3]="PUNCT",n[n.ALPHA_SHIFT=4]="ALPHA_SHIFT",n[n.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(Pe||(Pe={}));function l4(){if(typeof window<"u")return window.BigInt||null;if(typeof global<"u")return global.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}var Q0;function Js(n){if(typeof Q0>"u"&&(Q0=l4()),Q0===null)throw new Error("BigInt is not supported!");return Q0(n)}function DB(){var n=[];n[0]=Js(1);var t=Js(900);n[1]=t;for(var e=2;e<16;e++)n[e]=n[e-1]*t;return n}var OB=function(){function n(){}return n.decode=function(t,e){var r=new Wt(""),i=Rn.ISO8859_1;r.enableDecoding(i);for(var a=1,s=t[a++],l=new EB;a<t[0];){switch(s){case n.TEXT_COMPACTION_MODE_LATCH:a=n.textCompaction(t,a,r);break;case n.BYTE_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:a=n.byteCompaction(s,t,i,a,r);break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r.append(t[a++]);break;case n.NUMERIC_COMPACTION_MODE_LATCH:a=n.numericCompaction(t,a,r);break;case n.ECI_CHARSET:Rn.getCharacterSetECIByValue(t[a++]);break;case n.ECI_GENERAL_PURPOSE:a+=2;break;case n.ECI_USER_DEFINED:a++;break;case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:a=n.decodeMacroBlock(t,a,l);break;case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:throw new xt;default:a--,a=n.textCompaction(t,a,r);break}if(a<t.length)s=t[a++];else throw xt.getFormatInstance()}if(r.length()===0)throw xt.getFormatInstance();var c=new $g(null,r.toString(),null,e);return c.setOther(l),c},n.decodeMacroBlock=function(t,e,r){if(e+n.NUMBER_OF_SEQUENCE_CODEWORDS>t[0])throw xt.getFormatInstance();for(var i=new Int32Array(n.NUMBER_OF_SEQUENCE_CODEWORDS),a=0;a<n.NUMBER_OF_SEQUENCE_CODEWORDS;a++,e++)i[a]=t[e];r.setSegmentIndex(Zt.parseInt(n.decodeBase900toBase10(i,n.NUMBER_OF_SEQUENCE_CODEWORDS)));var s=new Wt;e=n.textCompaction(t,e,s),r.setFileId(s.toString());var l=-1;for(t[e]===n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(l=e+1);e<t[0];)switch(t[e]){case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(e++,t[e]){case n.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:var c=new Wt;e=n.textCompaction(t,e+1,c),r.setFileName(c.toString());break;case n.MACRO_PDF417_OPTIONAL_FIELD_SENDER:var f=new Wt;e=n.textCompaction(t,e+1,f),r.setSender(f.toString());break;case n.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:var d=new Wt;e=n.textCompaction(t,e+1,d),r.setAddressee(d.toString());break;case n.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:var g=new Wt;e=n.numericCompaction(t,e+1,g),r.setSegmentCount(Zt.parseInt(g.toString()));break;case n.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:var m=new Wt;e=n.numericCompaction(t,e+1,m),r.setTimestamp(CS.parseLong(m.toString()));break;case n.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:var v=new Wt;e=n.numericCompaction(t,e+1,v),r.setChecksum(Zt.parseInt(v.toString()));break;case n.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:var _=new Wt;e=n.numericCompaction(t,e+1,_),r.setFileSize(CS.parseLong(_.toString()));break;default:throw xt.getFormatInstance()}break;case n.MACRO_PDF417_TERMINATOR:e++,r.setLastSegment(!0);break;default:throw xt.getFormatInstance()}if(l!==-1){var w=e-l;r.isLastSegment()&&w--,r.setOptionalData(Dn.copyOfRange(t,l,l+w))}return e},n.textCompaction=function(t,e,r){for(var i=new Int32Array((t[0]-e)*2),a=new Int32Array((t[0]-e)*2),s=0,l=!1;e<t[0]&&!l;){var c=t[e++];if(c<n.TEXT_COMPACTION_MODE_LATCH)i[s]=c/30,i[s+1]=c%30,s+=2;else switch(c){case n.TEXT_COMPACTION_MODE_LATCH:i[s++]=n.TEXT_COMPACTION_MODE_LATCH;break;case n.BYTE_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:case n.NUMERIC_COMPACTION_MODE_LATCH:case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:e--,l=!0;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i[s]=n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,c=t[e++],a[s]=c,s++;break}}return n.decodeTextCompaction(i,a,s,r),e},n.decodeTextCompaction=function(t,e,r,i){for(var a=Pe.ALPHA,s=Pe.ALPHA,l=0;l<r;){var c=t[l],f="";switch(a){case Pe.ALPHA:if(c<26)f=String.fromCharCode(65+c);else switch(c){case 26:f=" ";break;case n.LL:a=Pe.LOWER;break;case n.ML:a=Pe.MIXED;break;case n.PS:s=a,a=Pe.PUNCT_SHIFT;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(e[l]);break;case n.TEXT_COMPACTION_MODE_LATCH:a=Pe.ALPHA;break}break;case Pe.LOWER:if(c<26)f=String.fromCharCode(97+c);else switch(c){case 26:f=" ";break;case n.AS:s=a,a=Pe.ALPHA_SHIFT;break;case n.ML:a=Pe.MIXED;break;case n.PS:s=a,a=Pe.PUNCT_SHIFT;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(e[l]);break;case n.TEXT_COMPACTION_MODE_LATCH:a=Pe.ALPHA;break}break;case Pe.MIXED:if(c<n.PL)f=n.MIXED_CHARS[c];else switch(c){case n.PL:a=Pe.PUNCT;break;case 26:f=" ";break;case n.LL:a=Pe.LOWER;break;case n.AL:a=Pe.ALPHA;break;case n.PS:s=a,a=Pe.PUNCT_SHIFT;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(e[l]);break;case n.TEXT_COMPACTION_MODE_LATCH:a=Pe.ALPHA;break}break;case Pe.PUNCT:if(c<n.PAL)f=n.PUNCT_CHARS[c];else switch(c){case n.PAL:a=Pe.ALPHA;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(e[l]);break;case n.TEXT_COMPACTION_MODE_LATCH:a=Pe.ALPHA;break}break;case Pe.ALPHA_SHIFT:if(a=s,c<26)f=String.fromCharCode(65+c);else switch(c){case 26:f=" ";break;case n.TEXT_COMPACTION_MODE_LATCH:a=Pe.ALPHA;break}break;case Pe.PUNCT_SHIFT:if(a=s,c<n.PAL)f=n.PUNCT_CHARS[c];else switch(c){case n.PAL:a=Pe.ALPHA;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(e[l]);break;case n.TEXT_COMPACTION_MODE_LATCH:a=Pe.ALPHA;break}break}f!==""&&i.append(f),l++}},n.byteCompaction=function(t,e,r,i,a){var s=new RB,l=0,c=0,f=!1;switch(t){case n.BYTE_COMPACTION_MODE_LATCH:for(var d=new Int32Array(6),g=e[i++];i<e[0]&&!f;)switch(d[l++]=g,c=900*c+g,g=e[i++],g){case n.TEXT_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH:case n.NUMERIC_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:i--,f=!0;break;default:if(l%5===0&&l>0){for(var m=0;m<6;++m)s.write(Number(Js(c)>>Js(8*(5-m))));c=0,l=0}break}i===e[0]&&g<n.TEXT_COMPACTION_MODE_LATCH&&(d[l++]=g);for(var v=0;v<l;v++)s.write(d[v]);break;case n.BYTE_COMPACTION_MODE_LATCH_6:for(;i<e[0]&&!f;){var _=e[i++];if(_<n.TEXT_COMPACTION_MODE_LATCH)l++,c=900*c+_;else switch(_){case n.TEXT_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH:case n.NUMERIC_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:i--,f=!0;break}if(l%5===0&&l>0){for(var m=0;m<6;++m)s.write(Number(Js(c)>>Js(8*(5-m))));c=0,l=0}}break}return a.append(_i.decode(s.toByteArray(),r)),i},n.numericCompaction=function(t,e,r){for(var i=0,a=!1,s=new Int32Array(n.MAX_NUMERIC_CODEWORDS);e<t[0]&&!a;){var l=t[e++];if(e===t[0]&&(a=!0),l<n.TEXT_COMPACTION_MODE_LATCH)s[i]=l,i++;else switch(l){case n.TEXT_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:e--,a=!0;break}(i%n.MAX_NUMERIC_CODEWORDS===0||l===n.NUMERIC_COMPACTION_MODE_LATCH||a)&&i>0&&(r.append(n.decodeBase900toBase10(s,i)),i=0)}return e},n.decodeBase900toBase10=function(t,e){for(var r=Js(0),i=0;i<e;i++)r+=n.EXP900[e-i-1]*Js(t[i]);var a=r.toString();if(a.charAt(0)!=="1")throw new xt;return a.substring(1)},n.TEXT_COMPACTION_MODE_LATCH=900,n.BYTE_COMPACTION_MODE_LATCH=901,n.NUMERIC_COMPACTION_MODE_LATCH=902,n.BYTE_COMPACTION_MODE_LATCH_6=924,n.ECI_USER_DEFINED=925,n.ECI_GENERAL_PURPOSE=926,n.ECI_CHARSET=927,n.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,n.MACRO_PDF417_TERMINATOR=922,n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,n.MAX_NUMERIC_CODEWORDS=15,n.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,n.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,n.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,n.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,n.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,n.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,n.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,n.PL=25,n.LL=27,n.AS=27,n.ML=28,n.AL=28,n.PS=29,n.PAL=29,n.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,n.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",n.EXP900=l4()?DB():[],n.NUMBER_OF_SEQUENCE_CODEWORDS=2,n}(),Zf=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},MB=function(){function n(){}return n.decode=function(t,e,r,i,a,s,l){for(var c=new $y(t,e,r,i,a),f=null,d=null,g,m=!0;;m=!1){if(e!=null&&(f=n.getRowIndicatorColumn(t,c,e,!0,s,l)),i!=null&&(d=n.getRowIndicatorColumn(t,c,i,!1,s,l)),g=n.merge(f,d),g==null)throw ot.getNotFoundInstance();var v=g.getBoundingBox();if(m&&v!=null&&(v.getMinY()<c.getMinY()||v.getMaxY()>c.getMaxY()))c=v;else break}g.setBoundingBox(c);var _=g.getBarcodeColumnCount()+1;g.setDetectionResultColumn(0,f),g.setDetectionResultColumn(_,d);for(var w=f!=null,b=1;b<=_;b++){var C=w?b:_-b;if(g.getDetectionResultColumn(C)===void 0){var I=void 0;C===0||C===_?I=new TS(c,C===0):I=new o4(c),g.setDetectionResultColumn(C,I);for(var R=-1,M=R,N=c.getMinY();N<=c.getMaxY();N++){if(R=n.getStartColumn(g,C,N,w),R<0||R>c.getMaxX()){if(M===-1)continue;R=M}var k=n.detectCodeword(t,c.getMinX(),c.getMaxX(),w,R,N,s,l);k!=null&&(I.setCodeword(N,k),M=R,s=Math.min(s,k.getWidth()),l=Math.max(l,k.getWidth()))}}}return n.createDecoderResult(g)},n.merge=function(t,e){if(t==null&&e==null)return null;var r=n.getBarcodeMetadata(t,e);if(r==null)return null;var i=$y.merge(n.adjustBoundingBox(t),n.adjustBoundingBox(e));return new xB(r,i)},n.adjustBoundingBox=function(t){var e,r;if(t==null)return null;var i=t.getRowHeights();if(i==null)return null;var a=n.getMax(i),s=0;try{for(var l=Zf(i),c=l.next();!c.done;c=l.next()){var f=c.value;if(s+=a-f,f>0)break}}catch(v){e={error:v}}finally{try{c&&!c.done&&(r=l.return)&&r.call(l)}finally{if(e)throw e.error}}for(var d=t.getCodewords(),g=0;s>0&&d[g]==null;g++)s--;for(var m=0,g=i.length-1;g>=0&&(m+=a-i[g],!(i[g]>0));g--);for(var g=d.length-1;m>0&&d[g]==null;g--)m--;return t.getBoundingBox().addMissingRows(s,m,t.isLeft())},n.getMax=function(t){var e,r,i=-1;try{for(var a=Zf(t),s=a.next();!s.done;s=a.next()){var l=s.value;i=Math.max(i,l)}}catch(c){e={error:c}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(e)throw e.error}}return i},n.getBarcodeMetadata=function(t,e){var r;if(t==null||(r=t.getBarcodeMetadata())==null)return e==null?null:e.getBarcodeMetadata();var i;return e==null||(i=e.getBarcodeMetadata())==null?r:r.getColumnCount()!==i.getColumnCount()&&r.getErrorCorrectionLevel()!==i.getErrorCorrectionLevel()&&r.getRowCount()!==i.getRowCount()?null:r},n.getRowIndicatorColumn=function(t,e,r,i,a,s){for(var l=new TS(e,i),c=0;c<2;c++)for(var f=c===0?1:-1,d=Math.trunc(Math.trunc(r.getX())),g=Math.trunc(Math.trunc(r.getY()));g<=e.getMaxY()&&g>=e.getMinY();g+=f){var m=n.detectCodeword(t,0,t.getWidth(),i,d,g,a,s);m!=null&&(l.setCodeword(g,m),i?d=m.getStartX():d=m.getEndX())}return l},n.adjustCodewordCount=function(t,e){var r=e[0][1],i=r.getValue(),a=t.getBarcodeColumnCount()*t.getBarcodeRowCount()-n.getNumberOfECCodeWords(t.getBarcodeECLevel());if(i.length===0){if(a<1||a>ue.MAX_CODEWORDS_IN_BARCODE)throw ot.getNotFoundInstance();r.setValue(a)}else i[0]!==a&&r.setValue(a)},n.createDecoderResult=function(t){var e=n.createBarcodeMatrix(t);n.adjustCodewordCount(t,e);for(var r=new Array,i=new Int32Array(t.getBarcodeRowCount()*t.getBarcodeColumnCount()),a=[],s=new Array,l=0;l<t.getBarcodeRowCount();l++)for(var c=0;c<t.getBarcodeColumnCount();c++){var f=e[l][c+1].getValue(),d=l*t.getBarcodeColumnCount()+c;f.length===0?r.push(d):f.length===1?i[d]=f[0]:(s.push(d),a.push(f))}for(var g=new Array(a.length),m=0;m<g.length;m++)g[m]=a[m];return n.createDecoderResultFromAmbiguousValues(t.getBarcodeECLevel(),i,ue.toIntArray(r),ue.toIntArray(s),g)},n.createDecoderResultFromAmbiguousValues=function(t,e,r,i,a){for(var s=new Int32Array(i.length),l=100;l-- >0;){for(var c=0;c<s.length;c++)e[i[c]]=a[c][s[c]];try{return n.decodeCodewords(e,t,r)}catch(d){var f=d instanceof Gn;if(!f)throw d}if(s.length===0)throw Gn.getChecksumInstance();for(var c=0;c<s.length;c++)if(s[c]<a[c].length-1){s[c]++;break}else if(s[c]=0,c===s.length-1)throw Gn.getChecksumInstance()}throw Gn.getChecksumInstance()},n.createBarcodeMatrix=function(t){for(var e,r,i,a,s=Array.from({length:t.getBarcodeRowCount()},function(){return new Array(t.getBarcodeColumnCount()+2)}),l=0;l<s.length;l++)for(var c=0;c<s[l].length;c++)s[l][c]=new dh;var f=0;try{for(var d=Zf(t.getDetectionResultColumns()),g=d.next();!g.done;g=d.next()){var m=g.value;if(m!=null)try{for(var v=(i=void 0,Zf(m.getCodewords())),_=v.next();!_.done;_=v.next()){var w=_.value;if(w!=null){var b=w.getRowNumber();if(b>=0){if(b>=s.length)continue;s[b][f].setValue(w.getValue())}}}}catch(C){i={error:C}}finally{try{_&&!_.done&&(a=v.return)&&a.call(v)}finally{if(i)throw i.error}}f++}}catch(C){e={error:C}}finally{try{g&&!g.done&&(r=d.return)&&r.call(d)}finally{if(e)throw e.error}}return s},n.isValidBarcodeColumn=function(t,e){return e>=0&&e<=t.getBarcodeColumnCount()+1},n.getStartColumn=function(t,e,r,i){var a,s,l=i?1:-1,c=null;if(n.isValidBarcodeColumn(t,e-l)&&(c=t.getDetectionResultColumn(e-l).getCodeword(r)),c!=null)return i?c.getEndX():c.getStartX();if(c=t.getDetectionResultColumn(e).getCodewordNearby(r),c!=null)return i?c.getStartX():c.getEndX();if(n.isValidBarcodeColumn(t,e-l)&&(c=t.getDetectionResultColumn(e-l).getCodewordNearby(r)),c!=null)return i?c.getEndX():c.getStartX();for(var f=0;n.isValidBarcodeColumn(t,e-l);){e-=l;try{for(var d=(a=void 0,Zf(t.getDetectionResultColumn(e).getCodewords())),g=d.next();!g.done;g=d.next()){var m=g.value;if(m!=null)return(i?m.getEndX():m.getStartX())+l*f*(m.getEndX()-m.getStartX())}}catch(v){a={error:v}}finally{try{g&&!g.done&&(s=d.return)&&s.call(d)}finally{if(a)throw a.error}}f++}return i?t.getBoundingBox().getMinX():t.getBoundingBox().getMaxX()},n.detectCodeword=function(t,e,r,i,a,s,l,c){a=n.adjustCodewordStartColumn(t,e,r,i,a,s);var f=n.getModuleBitCount(t,e,r,i,a,s);if(f==null)return null;var d,g=he.sum(f);if(i)d=a+g;else{for(var m=0;m<f.length/2;m++){var v=f[m];f[m]=f[f.length-1-m],f[f.length-1-m]=v}d=a,a=d-g}if(!n.checkCodewordSkew(g,l,c))return null;var _=AB.getDecodedValue(f),w=ue.getCodeword(_);return w===-1?null:new _B(a,d,n.getCodewordBucketNumber(_),w)},n.getModuleBitCount=function(t,e,r,i,a,s){for(var l=a,c=new Int32Array(8),f=0,d=i?1:-1,g=i;(i?l<r:l>=e)&&f<c.length;)t.get(l,s)===g?(c[f]++,l+=d):(f++,g=!g);return f===c.length||l===(i?r:e)&&f===c.length-1?c:null},n.getNumberOfECCodeWords=function(t){return 2<<t},n.adjustCodewordStartColumn=function(t,e,r,i,a,s){for(var l=a,c=i?-1:1,f=0;f<2;f++){for(;(i?l>=e:l<r)&&i===t.get(l,s);){if(Math.abs(a-l)>n.CODEWORD_SKEW_SIZE)return a;l+=c}c=-c,i=!i}return l},n.checkCodewordSkew=function(t,e,r){return e-n.CODEWORD_SKEW_SIZE<=t&&t<=r+n.CODEWORD_SKEW_SIZE},n.decodeCodewords=function(t,e,r){if(t.length===0)throw xt.getFormatInstance();var i=1<<e+1,a=n.correctErrors(t,r,i);n.verifyCodewordCount(t,i);var s=OB.decode(t,""+e);return s.setErrorsCorrected(a),s.setErasures(r.length),s},n.correctErrors=function(t,e,r){if(e!=null&&e.length>r/2+n.MAX_ERRORS||r<0||r>n.MAX_EC_CODEWORDS)throw Gn.getChecksumInstance();return n.errorCorrection.decode(t,r,e)},n.verifyCodewordCount=function(t,e){if(t.length<4)throw xt.getFormatInstance();var r=t[0];if(r>t.length)throw xt.getFormatInstance();if(r===0)if(e<t.length)t[0]=t.length-e;else throw xt.getFormatInstance()},n.getBitCountForCodeword=function(t){for(var e=new Int32Array(8),r=0,i=e.length-1;!((t&1)!==r&&(r=t&1,i--,i<0));)e[i]++,t>>=1;return e},n.getCodewordBucketNumber=function(t){return t instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(t):this.getCodewordBucketNumber_number(t)},n.getCodewordBucketNumber_number=function(t){return n.getCodewordBucketNumber(n.getBitCountForCodeword(t))},n.getCodewordBucketNumber_Int32Array=function(t){return(t[0]-t[2]+t[4]-t[6]+9)%9},n.toString=function(t){for(var e=new x2,r=0;r<t.length;r++){e.format("Row %2d: ",r);for(var i=0;i<t[r].length;i++){var a=t[r][i];a.getValue().length===0?e.format("        ",null):e.format("%4d(%2d)",a.getValue()[0],a.getConfidence(a.getValue()[0]))}e.format("%n")}return e.toString()},n.CODEWORD_SKEW_SIZE=2,n.MAX_ERRORS=3,n.MAX_EC_CODEWORDS=512,n.errorCorrection=new hB,n}(),NB=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},qy=function(){function n(){}return n.prototype.decode=function(t,e){e===void 0&&(e=null);var r=n.decode(t,e,!1);if(r==null||r.length===0||r[0]==null)throw ot.getNotFoundInstance();return r[0]},n.prototype.decodeMultiple=function(t,e){e===void 0&&(e=null);try{return n.decode(t,e,!0)}catch(r){throw r instanceof xt||r instanceof Gn?ot.getNotFoundInstance():r}},n.decode=function(t,e,r){var i,a,s=new Array,l=sB.detectMultiple(t,e,r);try{for(var c=NB(l.getPoints()),f=c.next();!f.done;f=c.next()){var d=f.value,g=MB.decode(l.getBits(),d[4],d[5],d[6],d[7],n.getMinCodewordWidth(d),n.getMaxCodewordWidth(d)),m=new pr(g.getText(),g.getRawBytes(),void 0,d,Pt.PDF_417);m.putMetadata(rr.ERROR_CORRECTION_LEVEL,g.getECLevel());var v=g.getOther();v!=null&&m.putMetadata(rr.PDF417_EXTRA_METADATA,v),s.push(m)}}catch(_){i={error:_}}finally{try{f&&!f.done&&(a=c.return)&&a.call(c)}finally{if(i)throw i.error}}return s.map(function(_){return _})},n.getMaxWidth=function(t,e){return t==null||e==null?0:Math.trunc(Math.abs(t.getX()-e.getX()))},n.getMinWidth=function(t,e){return t==null||e==null?Zt.MAX_VALUE:Math.trunc(Math.abs(t.getX()-e.getX()))},n.getMaxCodewordWidth=function(t){return Math.floor(Math.max(Math.max(n.getMaxWidth(t[0],t[4]),n.getMaxWidth(t[6],t[2])*ue.MODULES_IN_CODEWORD/ue.MODULES_IN_STOP_PATTERN),Math.max(n.getMaxWidth(t[1],t[5]),n.getMaxWidth(t[7],t[3])*ue.MODULES_IN_CODEWORD/ue.MODULES_IN_STOP_PATTERN)))},n.getMinCodewordWidth=function(t){return Math.floor(Math.min(Math.min(n.getMinWidth(t[0],t[4]),n.getMinWidth(t[6],t[2])*ue.MODULES_IN_CODEWORD/ue.MODULES_IN_STOP_PATTERN),Math.min(n.getMinWidth(t[1],t[5]),n.getMinWidth(t[7],t[3])*ue.MODULES_IN_CODEWORD/ue.MODULES_IN_STOP_PATTERN)))},n.prototype.reset=function(){},n}(),PB=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),IS=function(n){PB(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.kind="ReaderException",t}(Br),RS=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},kB=function(){function n(){}return n.prototype.decode=function(t,e){return this.setHints(e),this.decodeInternal(t)},n.prototype.decodeWithState=function(t){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(t)},n.prototype.setHints=function(t){this.hints=t;var e=t!=null&&t.get(Ye.TRY_HARDER)!==void 0,r=t==null?null:t.get(Ye.POSSIBLE_FORMATS),i=new Array;if(r!=null){var a=r.some(function(s){return s===Pt.UPC_A||s===Pt.UPC_E||s===Pt.EAN_13||s===Pt.EAN_8||s===Pt.CODABAR||s===Pt.CODE_39||s===Pt.CODE_93||s===Pt.CODE_128||s===Pt.ITF||s===Pt.RSS_14||s===Pt.RSS_EXPANDED});a&&!e&&i.push(new hh(t)),r.includes(Pt.QR_CODE)&&i.push(new Gy),r.includes(Pt.DATA_MATRIX)&&i.push(new Hy),r.includes(Pt.AZTEC)&&i.push(new Uy),r.includes(Pt.PDF_417)&&i.push(new qy),a&&e&&i.push(new hh(t))}i.length===0&&(e||i.push(new hh(t)),i.push(new Gy),i.push(new Hy),i.push(new Uy),i.push(new qy),e&&i.push(new hh(t))),this.readers=i},n.prototype.reset=function(){var t,e;if(this.readers!==null)try{for(var r=RS(this.readers),i=r.next();!i.done;i=r.next()){var a=i.value;a.reset()}}catch(s){t={error:s}}finally{try{i&&!i.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}},n.prototype.decodeInternal=function(t){var e,r;if(this.readers===null)throw new IS("No readers where selected, nothing can be read.");try{for(var i=RS(this.readers),a=i.next();!a.done;a=i.next()){var s=a.value;try{return s.decode(t,this.hints)}catch(l){if(l instanceof IS)continue}}}catch(l){e={error:l}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(e)throw e.error}}throw new ot("No MultiFormat Readers were able to detect the code.")},n}(),LB=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),BB=function(n){LB(t,n);function t(e,r){e===void 0&&(e=null),r===void 0&&(r=500);var i=this,a=new kB;return a.setHints(e),i=n.call(this,a,r)||this,i}return t.prototype.decodeBitmap=function(e){return this.reader.decodeWithState(e)},t}(Nc),VB=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}();(function(n){VB(t,n);function t(e){return e===void 0&&(e=500),n.call(this,new qy,e)||this}return t})(Nc);var FB=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}();(function(n){FB(t,n);function t(e){return e===void 0&&(e=500),n.call(this,new Gy,e)||this}return t})(Nc);var Xy;(function(n){n[n.ERROR_CORRECTION=0]="ERROR_CORRECTION",n[n.CHARACTER_SET=1]="CHARACTER_SET",n[n.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",n[n.DATA_MATRIX_COMPACT=3]="DATA_MATRIX_COMPACT",n[n.MIN_SIZE=4]="MIN_SIZE",n[n.MAX_SIZE=5]="MAX_SIZE",n[n.MARGIN=6]="MARGIN",n[n.PDF417_COMPACT=7]="PDF417_COMPACT",n[n.PDF417_COMPACTION=8]="PDF417_COMPACTION",n[n.PDF417_DIMENSIONS=9]="PDF417_DIMENSIONS",n[n.AZTEC_LAYERS=10]="AZTEC_LAYERS",n[n.QR_VERSION=11]="QR_VERSION",n[n.GS1_FORMAT=12]="GS1_FORMAT",n[n.FORCE_C40=13]="FORCE_C40"})(Xy||(Xy={}));const J0=Xy;var u4=function(){function n(t){this.field=t,this.cachedGenerators=[],this.cachedGenerators.push(new po(t,Int32Array.from([1])))}return n.prototype.buildGenerator=function(t){var e=this.cachedGenerators;if(t>=e.length)for(var r=e[e.length-1],i=this.field,a=e.length;a<=t;a++){var s=r.multiply(new po(i,Int32Array.from([1,i.exp(a-1+i.getGeneratorBase())])));e.push(s),r=s}return e[t]},n.prototype.encode=function(t,e){if(e===0)throw new kt("No error correction bytes");var r=t.length-e;if(r<=0)throw new kt("No data bytes provided");var i=this.buildGenerator(e),a=new Int32Array(r);je.arraycopy(t,0,a,0,r);var s=new po(this.field,a);s=s.multiplyByMonomial(e,1);for(var l=s.divide(i)[1],c=l.getCoefficients(),f=e-c.length,d=0;d<f;d++)t[r+d]=0;je.arraycopy(c,0,t,r+f,c.length)},n}(),gh=function(){function n(){}return n.applyMaskPenaltyRule1=function(t){return n.applyMaskPenaltyRule1Internal(t,!0)+n.applyMaskPenaltyRule1Internal(t,!1)},n.applyMaskPenaltyRule2=function(t){for(var e=0,r=t.getArray(),i=t.getWidth(),a=t.getHeight(),s=0;s<a-1;s++)for(var l=r[s],c=0;c<i-1;c++){var f=l[c];f===l[c+1]&&f===r[s+1][c]&&f===r[s+1][c+1]&&e++}return n.N2*e},n.applyMaskPenaltyRule3=function(t){for(var e=0,r=t.getArray(),i=t.getWidth(),a=t.getHeight(),s=0;s<a;s++)for(var l=0;l<i;l++){var c=r[s];l+6<i&&c[l]===1&&c[l+1]===0&&c[l+2]===1&&c[l+3]===1&&c[l+4]===1&&c[l+5]===0&&c[l+6]===1&&(n.isWhiteHorizontal(c,l-4,l)||n.isWhiteHorizontal(c,l+7,l+11))&&e++,s+6<a&&r[s][l]===1&&r[s+1][l]===0&&r[s+2][l]===1&&r[s+3][l]===1&&r[s+4][l]===1&&r[s+5][l]===0&&r[s+6][l]===1&&(n.isWhiteVertical(r,l,s-4,s)||n.isWhiteVertical(r,l,s+7,s+11))&&e++}return e*n.N3},n.isWhiteHorizontal=function(t,e,r){e=Math.max(e,0),r=Math.min(r,t.length);for(var i=e;i<r;i++)if(t[i]===1)return!1;return!0},n.isWhiteVertical=function(t,e,r,i){r=Math.max(r,0),i=Math.min(i,t.length);for(var a=r;a<i;a++)if(t[a][e]===1)return!1;return!0},n.applyMaskPenaltyRule4=function(t){for(var e=0,r=t.getArray(),i=t.getWidth(),a=t.getHeight(),s=0;s<a;s++)for(var l=r[s],c=0;c<i;c++)l[c]===1&&e++;var f=t.getHeight()*t.getWidth(),d=Math.floor(Math.abs(e*2-f)*10/f);return d*n.N4},n.getDataMaskBit=function(t,e,r){var i,a;switch(t){case 0:i=r+e&1;break;case 1:i=r&1;break;case 2:i=e%3;break;case 3:i=(r+e)%3;break;case 4:i=Math.floor(r/2)+Math.floor(e/3)&1;break;case 5:a=r*e,i=(a&1)+a%3;break;case 6:a=r*e,i=(a&1)+a%3&1;break;case 7:a=r*e,i=a%3+(r+e&1)&1;break;default:throw new kt("Invalid mask pattern: "+t)}return i===0},n.applyMaskPenaltyRule1Internal=function(t,e){for(var r=0,i=e?t.getHeight():t.getWidth(),a=e?t.getWidth():t.getHeight(),s=t.getArray(),l=0;l<i;l++){for(var c=0,f=-1,d=0;d<a;d++){var g=e?s[l][d]:s[d][l];g===f?c++:(c>=5&&(r+=n.N1+(c-5)),c=1,f=g)}c>=5&&(r+=n.N1+(c-5))}return r},n.N1=3,n.N2=3,n.N3=40,n.N4=10,n}(),jB=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},UB=function(){function n(t,e){this.width=t,this.height=e;for(var r=new Array(e),i=0;i!==e;i++)r[i]=new Uint8Array(t);this.bytes=r}return n.prototype.getHeight=function(){return this.height},n.prototype.getWidth=function(){return this.width},n.prototype.get=function(t,e){return this.bytes[e][t]},n.prototype.getArray=function(){return this.bytes},n.prototype.setNumber=function(t,e,r){this.bytes[e][t]=r},n.prototype.setBoolean=function(t,e,r){this.bytes[e][t]=r?1:0},n.prototype.clear=function(t){var e,r;try{for(var i=jB(this.bytes),a=i.next();!a.done;a=i.next()){var s=a.value;Dn.fill(s,t)}}catch(l){e={error:l}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(e)throw e.error}}},n.prototype.equals=function(t){if(!(t instanceof n))return!1;var e=t;if(this.width!==e.width||this.height!==e.height)return!1;for(var r=0,i=this.height;r<i;++r)for(var a=this.bytes[r],s=e.bytes[r],l=0,c=this.width;l<c;++l)if(a[l]!==s[l])return!1;return!0},n.prototype.toString=function(){for(var t=new Wt,e=0,r=this.height;e<r;++e){for(var i=this.bytes[e],a=0,s=this.width;a<s;++a)switch(i[a]){case 0:t.append(" 0");break;case 1:t.append(" 1");break;default:t.append("  ");break}t.append(`
`)}return t.toString()},n}(),Wy=function(){function n(){this.maskPattern=-1}return n.prototype.getMode=function(){return this.mode},n.prototype.getECLevel=function(){return this.ecLevel},n.prototype.getVersion=function(){return this.version},n.prototype.getMaskPattern=function(){return this.maskPattern},n.prototype.getMatrix=function(){return this.matrix},n.prototype.toString=function(){var t=new Wt;return t.append(`<<
`),t.append(" mode: "),t.append(this.mode?this.mode.toString():"null"),t.append(`
 ecLevel: `),t.append(this.ecLevel?this.ecLevel.toString():"null"),t.append(`
 version: `),t.append(this.version?this.version.toString():"null"),t.append(`
 maskPattern: `),t.append(this.maskPattern.toString()),this.matrix?(t.append(`
 matrix:
`),t.append(this.matrix.toString())):t.append(`
 matrix: null
`),t.append(`>>
`),t.toString()},n.prototype.setMode=function(t){this.mode=t},n.prototype.setECLevel=function(t){this.ecLevel=t},n.prototype.setVersion=function(t){this.version=t},n.prototype.setMaskPattern=function(t){this.maskPattern=t},n.prototype.setMatrix=function(t){this.matrix=t},n.isValidMaskPattern=function(t){return t>=0&&t<n.NUM_MASK_PATTERNS},n.NUM_MASK_PATTERNS=8,n}(),zB=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Ue=function(n){zB(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.kind="WriterException",t}(Br),DS=function(){function n(){}return n.clearMatrix=function(t){t.clear(255)},n.buildMatrix=function(t,e,r,i,a){n.clearMatrix(a),n.embedBasicPatterns(r,a),n.embedTypeInfo(e,i,a),n.maybeEmbedVersionInfo(r,a),n.embedDataBits(t,i,a)},n.embedBasicPatterns=function(t,e){n.embedPositionDetectionPatternsAndSeparators(e),n.embedDarkDotAtLeftBottomCorner(e),n.maybeEmbedPositionAdjustmentPatterns(t,e),n.embedTimingPatterns(e)},n.embedTypeInfo=function(t,e,r){var i=new $n;n.makeTypeInfoBits(t,e,i);for(var a=0,s=i.getSize();a<s;++a){var l=i.get(i.getSize()-1-a),c=n.TYPE_INFO_COORDINATES[a],f=c[0],d=c[1];if(r.setBoolean(f,d,l),a<8){var g=r.getWidth()-a-1,m=8;r.setBoolean(g,m,l)}else{var g=8,m=r.getHeight()-7+(a-8);r.setBoolean(g,m,l)}}},n.maybeEmbedVersionInfo=function(t,e){if(!(t.getVersionNumber()<7)){var r=new $n;n.makeVersionInfoBits(t,r);for(var i=17,a=0;a<6;++a)for(var s=0;s<3;++s){var l=r.get(i);i--,e.setBoolean(a,e.getHeight()-11+s,l),e.setBoolean(e.getHeight()-11+s,a,l)}}},n.embedDataBits=function(t,e,r){for(var i=0,a=-1,s=r.getWidth()-1,l=r.getHeight()-1;s>0;){for(s===6&&(s-=1);l>=0&&l<r.getHeight();){for(var c=0;c<2;++c){var f=s-c;if(n.isEmpty(r.get(f,l))){var d=void 0;i<t.getSize()?(d=t.get(i),++i):d=!1,e!==255&&gh.getDataMaskBit(e,f,l)&&(d=!d),r.setBoolean(f,l,d)}}l+=a}a=-a,l+=a,s-=2}if(i!==t.getSize())throw new Ue("Not all bits consumed: "+i+"/"+t.getSize())},n.findMSBSet=function(t){return 32-Zt.numberOfLeadingZeros(t)},n.calculateBCHCode=function(t,e){if(e===0)throw new kt("0 polynomial");var r=n.findMSBSet(e);for(t<<=r-1;n.findMSBSet(t)>=r;)t^=e<<n.findMSBSet(t)-r;return t},n.makeTypeInfoBits=function(t,e,r){if(!Wy.isValidMaskPattern(e))throw new Ue("Invalid mask pattern");var i=t.getBits()<<3|e;r.appendBits(i,5);var a=n.calculateBCHCode(i,n.TYPE_INFO_POLY);r.appendBits(a,10);var s=new $n;if(s.appendBits(n.TYPE_INFO_MASK_PATTERN,15),r.xor(s),r.getSize()!==15)throw new Ue("should not happen but we got: "+r.getSize())},n.makeVersionInfoBits=function(t,e){e.appendBits(t.getVersionNumber(),6);var r=n.calculateBCHCode(t.getVersionNumber(),n.VERSION_INFO_POLY);if(e.appendBits(r,12),e.getSize()!==18)throw new Ue("should not happen but we got: "+e.getSize())},n.isEmpty=function(t){return t===255},n.embedTimingPatterns=function(t){for(var e=8;e<t.getWidth()-8;++e){var r=(e+1)%2;n.isEmpty(t.get(e,6))&&t.setNumber(e,6,r),n.isEmpty(t.get(6,e))&&t.setNumber(6,e,r)}},n.embedDarkDotAtLeftBottomCorner=function(t){if(t.get(8,t.getHeight()-8)===0)throw new Ue;t.setNumber(8,t.getHeight()-8,1)},n.embedHorizontalSeparationPattern=function(t,e,r){for(var i=0;i<8;++i){if(!n.isEmpty(r.get(t+i,e)))throw new Ue;r.setNumber(t+i,e,0)}},n.embedVerticalSeparationPattern=function(t,e,r){for(var i=0;i<7;++i){if(!n.isEmpty(r.get(t,e+i)))throw new Ue;r.setNumber(t,e+i,0)}},n.embedPositionAdjustmentPattern=function(t,e,r){for(var i=0;i<5;++i)for(var a=n.POSITION_ADJUSTMENT_PATTERN[i],s=0;s<5;++s)r.setNumber(t+s,e+i,a[s])},n.embedPositionDetectionPattern=function(t,e,r){for(var i=0;i<7;++i)for(var a=n.POSITION_DETECTION_PATTERN[i],s=0;s<7;++s)r.setNumber(t+s,e+i,a[s])},n.embedPositionDetectionPatternsAndSeparators=function(t){var e=n.POSITION_DETECTION_PATTERN[0].length;n.embedPositionDetectionPattern(0,0,t),n.embedPositionDetectionPattern(t.getWidth()-e,0,t),n.embedPositionDetectionPattern(0,t.getWidth()-e,t);var r=8;n.embedHorizontalSeparationPattern(0,r-1,t),n.embedHorizontalSeparationPattern(t.getWidth()-r,r-1,t),n.embedHorizontalSeparationPattern(0,t.getWidth()-r,t);var i=7;n.embedVerticalSeparationPattern(i,0,t),n.embedVerticalSeparationPattern(t.getHeight()-i-1,0,t),n.embedVerticalSeparationPattern(i,t.getHeight()-i,t)},n.maybeEmbedPositionAdjustmentPatterns=function(t,e){if(!(t.getVersionNumber()<2))for(var r=t.getVersionNumber()-1,i=n.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[r],a=0,s=i.length;a!==s;a++){var l=i[a];if(l>=0)for(var c=0;c!==s;c++){var f=i[c];f>=0&&n.isEmpty(e.get(f,l))&&n.embedPositionAdjustmentPattern(f-2,l-2,e)}}},n.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),n.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),n.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),n.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),n.VERSION_INFO_POLY=7973,n.TYPE_INFO_POLY=1335,n.TYPE_INFO_MASK_PATTERN=21522,n}(),HB=function(){function n(t,e){this.dataBytes=t,this.errorCorrectionBytes=e}return n.prototype.getDataBytes=function(){return this.dataBytes},n.prototype.getErrorCorrectionBytes=function(){return this.errorCorrectionBytes},n}(),OS=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};(function(){function n(){}return n.calculateMaskPenalty=function(t){return gh.applyMaskPenaltyRule1(t)+gh.applyMaskPenaltyRule2(t)+gh.applyMaskPenaltyRule3(t)+gh.applyMaskPenaltyRule4(t)},n.encode=function(t,e,r){r===void 0&&(r=null);var i=n.DEFAULT_BYTE_MODE_ENCODING,a=r!==null&&r.get(J0.CHARACTER_SET)!==void 0;a&&(i=r.get(J0.CHARACTER_SET).toString());var s=this.chooseMode(t,i),l=new $n;if(s===ze.BYTE&&(a||n.DEFAULT_BYTE_MODE_ENCODING!==i)){var c=Rn.getCharacterSetECIByName(i);c!==void 0&&this.appendECI(c,l)}this.appendModeInfo(s,l);var f=new $n;this.appendBytes(t,s,f,i);var d;if(r!==null&&r.get(J0.QR_VERSION)!==void 0){var g=Number.parseInt(r.get(J0.QR_VERSION).toString(),10);d=bl.getVersionForNumber(g);var m=this.calculateBitsNeeded(s,l,f,d);if(!this.willFit(m,d,e))throw new Ue("Data too big for requested version")}else d=this.recommendVersion(e,s,l,f);var v=new $n;v.appendBitArray(l);var _=s===ze.BYTE?f.getSizeInBytes():t.length;this.appendLengthInfo(_,d,s,v),v.appendBitArray(f);var w=d.getECBlocksForLevel(e),b=d.getTotalCodewords()-w.getTotalECCodewords();this.terminateBits(b,v);var C=this.interleaveWithECBytes(v,d.getTotalCodewords(),b,w.getNumBlocks()),I=new Wy;I.setECLevel(e),I.setMode(s),I.setVersion(d);var R=d.getDimensionForVersion(),M=new UB(R,R),N=this.chooseMaskPattern(C,e,d,M);return I.setMaskPattern(N),DS.buildMatrix(C,e,d,N,M),I.setMatrix(M),I},n.recommendVersion=function(t,e,r,i){var a=this.calculateBitsNeeded(e,r,i,bl.getVersionForNumber(1)),s=this.chooseVersion(a,t),l=this.calculateBitsNeeded(e,r,i,s);return this.chooseVersion(l,t)},n.calculateBitsNeeded=function(t,e,r,i){return e.getSize()+t.getCharacterCountBits(i)+r.getSize()},n.getAlphanumericCode=function(t){return t<n.ALPHANUMERIC_TABLE.length?n.ALPHANUMERIC_TABLE[t]:-1},n.chooseMode=function(t,e){if(e===void 0&&(e=null),Rn.SJIS.getName()===e&&this.isOnlyDoubleByteKanji(t))return ze.KANJI;for(var r=!1,i=!1,a=0,s=t.length;a<s;++a){var l=t.charAt(a);if(n.isDigit(l))r=!0;else if(this.getAlphanumericCode(l.charCodeAt(0))!==-1)i=!0;else return ze.BYTE}return i?ze.ALPHANUMERIC:r?ze.NUMERIC:ze.BYTE},n.isOnlyDoubleByteKanji=function(t){var e;try{e=_i.encode(t,Rn.SJIS)}catch{return!1}var r=e.length;if(r%2!==0)return!1;for(var i=0;i<r;i+=2){var a=e[i]&255;if((a<129||a>159)&&(a<224||a>235))return!1}return!0},n.chooseMaskPattern=function(t,e,r,i){for(var a=Number.MAX_SAFE_INTEGER,s=-1,l=0;l<Wy.NUM_MASK_PATTERNS;l++){DS.buildMatrix(t,e,r,l,i);var c=this.calculateMaskPenalty(i);c<a&&(a=c,s=l)}return s},n.chooseVersion=function(t,e){for(var r=1;r<=40;r++){var i=bl.getVersionForNumber(r);if(n.willFit(t,i,e))return i}throw new Ue("Data too big")},n.willFit=function(t,e,r){var i=e.getTotalCodewords(),a=e.getECBlocksForLevel(r),s=a.getTotalECCodewords(),l=i-s,c=(t+7)/8;return l>=c},n.terminateBits=function(t,e){var r=t*8;if(e.getSize()>r)throw new Ue("data bits cannot fit in the QR Code"+e.getSize()+" > "+r);for(var i=0;i<4&&e.getSize()<r;++i)e.appendBit(!1);var a=e.getSize()&7;if(a>0)for(var i=a;i<8;i++)e.appendBit(!1);for(var s=t-e.getSizeInBytes(),i=0;i<s;++i)e.appendBits((i&1)===0?236:17,8);if(e.getSize()!==r)throw new Ue("Bits size does not equal capacity")},n.getNumDataBytesAndNumECBytesForBlockID=function(t,e,r,i,a,s){if(i>=r)throw new Ue("Block ID too large");var l=t%r,c=r-l,f=Math.floor(t/r),d=f+1,g=Math.floor(e/r),m=g+1,v=f-g,_=d-m;if(v!==_)throw new Ue("EC bytes mismatch");if(r!==c+l)throw new Ue("RS blocks mismatch");if(t!==(g+v)*c+(m+_)*l)throw new Ue("Total bytes mismatch");i<c?(a[0]=g,s[0]=v):(a[0]=m,s[0]=_)},n.interleaveWithECBytes=function(t,e,r,i){var a,s,l,c;if(t.getSizeInBytes()!==r)throw new Ue("Number of bits and data bytes does not match");for(var f=0,d=0,g=0,m=new Array,v=0;v<i;++v){var _=new Int32Array(1),w=new Int32Array(1);n.getNumDataBytesAndNumECBytesForBlockID(e,r,i,v,_,w);var b=_[0],C=new Uint8Array(b);t.toBytes(8*f,C,0,b);var I=n.generateECBytes(C,w[0]);m.push(new HB(C,I)),d=Math.max(d,b),g=Math.max(g,I.length),f+=_[0]}if(r!==f)throw new Ue("Data bytes does not match offset");for(var R=new $n,v=0;v<d;++v)try{for(var M=(a=void 0,OS(m)),N=M.next();!N.done;N=M.next()){var k=N.value,C=k.getDataBytes();v<C.length&&R.appendBits(C[v],8)}}catch(V){a={error:V}}finally{try{N&&!N.done&&(s=M.return)&&s.call(M)}finally{if(a)throw a.error}}for(var v=0;v<g;++v)try{for(var O=(l=void 0,OS(m)),S=O.next();!S.done;S=O.next()){var k=S.value,I=k.getErrorCorrectionBytes();v<I.length&&R.appendBits(I[v],8)}}catch(V){l={error:V}}finally{try{S&&!S.done&&(c=O.return)&&c.call(O)}finally{if(l)throw l.error}}if(e!==R.getSizeInBytes())throw new Ue("Interleaving error: "+e+" and "+R.getSizeInBytes()+" differ.");return R},n.generateECBytes=function(t,e){for(var r=t.length,i=new Int32Array(r+e),a=0;a<r;a++)i[a]=t[a]&255;new u4(Nr.QR_CODE_FIELD_256).encode(i,e);for(var s=new Uint8Array(e),a=0;a<e;a++)s[a]=i[r+a];return s},n.appendModeInfo=function(t,e){e.appendBits(t.getBits(),4)},n.appendLengthInfo=function(t,e,r,i){var a=r.getCharacterCountBits(e);if(t>=1<<a)throw new Ue(t+" is bigger than "+((1<<a)-1));i.appendBits(t,a)},n.appendBytes=function(t,e,r,i){switch(e){case ze.NUMERIC:n.appendNumericBytes(t,r);break;case ze.ALPHANUMERIC:n.appendAlphanumericBytes(t,r);break;case ze.BYTE:n.append8BitBytes(t,r,i);break;case ze.KANJI:n.appendKanjiBytes(t,r);break;default:throw new Ue("Invalid mode: "+e)}},n.getDigit=function(t){return t.charCodeAt(0)-48},n.isDigit=function(t){var e=n.getDigit(t);return e>=0&&e<=9},n.appendNumericBytes=function(t,e){for(var r=t.length,i=0;i<r;){var a=n.getDigit(t.charAt(i));if(i+2<r){var s=n.getDigit(t.charAt(i+1)),l=n.getDigit(t.charAt(i+2));e.appendBits(a*100+s*10+l,10),i+=3}else if(i+1<r){var s=n.getDigit(t.charAt(i+1));e.appendBits(a*10+s,7),i+=2}else e.appendBits(a,4),i++}},n.appendAlphanumericBytes=function(t,e){for(var r=t.length,i=0;i<r;){var a=n.getAlphanumericCode(t.charCodeAt(i));if(a===-1)throw new Ue;if(i+1<r){var s=n.getAlphanumericCode(t.charCodeAt(i+1));if(s===-1)throw new Ue;e.appendBits(a*45+s,11),i+=2}else e.appendBits(a,6),i++}},n.append8BitBytes=function(t,e,r){var i;try{i=_i.encode(t,r)}catch(c){throw new Ue(c)}for(var a=0,s=i.length;a!==s;a++){var l=i[a];e.appendBits(l,8)}},n.appendKanjiBytes=function(t,e){var r;try{r=_i.encode(t,Rn.SJIS)}catch(g){throw new Ue(g)}for(var i=r.length,a=0;a<i;a+=2){var s=r[a]&255,l=r[a+1]&255,c=s<<8&4294967295|l,f=-1;if(c>=33088&&c<=40956?f=c-33088:c>=57408&&c<=60351&&(f=c-49472),f===-1)throw new Ue("Invalid byte sequence");var d=(f>>8)*192+(f&255);e.appendBits(d,13)}},n.appendECI=function(t,e){e.appendBits(ze.ECI.getBits(),4),e.appendBits(t.getValue(),8)},n.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),n.DEFAULT_BYTE_MODE_ENCODING=Rn.UTF8.getName(),n})();var GB=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}();(function(n){GB(t,n);function t(e,r,i,a,s,l,c,f){var d=n.call(this,l,c)||this;if(d.yuvData=e,d.dataWidth=r,d.dataHeight=i,d.left=a,d.top=s,a+l>r||s+c>i)throw new kt("Crop rectangle does not fit within image data.");return f&&d.reverseHorizontal(l,c),d}return t.prototype.getRow=function(e,r){if(e<0||e>=this.getHeight())throw new kt("Requested row is outside the image: "+e);var i=this.getWidth();(r==null||r.length<i)&&(r=new Uint8ClampedArray(i));var a=(e+this.top)*this.dataWidth+this.left;return je.arraycopy(this.yuvData,a,r,0,i),r},t.prototype.getMatrix=function(){var e=this.getWidth(),r=this.getHeight();if(e===this.dataWidth&&r===this.dataHeight)return this.yuvData;var i=e*r,a=new Uint8ClampedArray(i),s=this.top*this.dataWidth+this.left;if(e===this.dataWidth)return je.arraycopy(this.yuvData,s,a,0,i),a;for(var l=0;l<r;l++){var c=l*e;je.arraycopy(this.yuvData,s,a,c,e),s+=this.dataWidth}return a},t.prototype.isCropSupported=function(){return!0},t.prototype.crop=function(e,r,i,a){return new t(this.yuvData,this.dataWidth,this.dataHeight,this.left+e,this.top+r,i,a,!1)},t.prototype.renderThumbnail=function(){for(var e=this.getWidth()/t.THUMBNAIL_SCALE_FACTOR,r=this.getHeight()/t.THUMBNAIL_SCALE_FACTOR,i=new Int32Array(e*r),a=this.yuvData,s=this.top*this.dataWidth+this.left,l=0;l<r;l++){for(var c=l*e,f=0;f<e;f++){var d=a[s+f*t.THUMBNAIL_SCALE_FACTOR]&255;i[c+f]=4278190080|d*65793}s+=this.dataWidth*t.THUMBNAIL_SCALE_FACTOR}return i},t.prototype.getThumbnailWidth=function(){return this.getWidth()/t.THUMBNAIL_SCALE_FACTOR},t.prototype.getThumbnailHeight=function(){return this.getHeight()/t.THUMBNAIL_SCALE_FACTOR},t.prototype.reverseHorizontal=function(e,r){for(var i=this.yuvData,a=0,s=this.top*this.dataWidth+this.left;a<r;a++,s+=this.dataWidth)for(var l=s+e/2,c=s,f=s+e-1;c<l;c++,f--){var d=i[c];i[c]=i[f],i[f]=d}},t.prototype.invert=function(){return new p2(this)},t.THUMBNAIL_SCALE_FACTOR=2,t})(Gg);var $B=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}();(function(n){$B(t,n);function t(e,r,i,a,s,l,c){var f=n.call(this,r,i)||this;if(f.dataWidth=a,f.dataHeight=s,f.left=l,f.top=c,e.BYTES_PER_ELEMENT===4){for(var d=r*i,g=new Uint8ClampedArray(d),m=0;m<d;m++){var v=e[m],_=v>>16&255,w=v>>7&510,b=v&255;g[m]=(_+w+b)/4&255}f.luminances=g}else f.luminances=e;if(a===void 0&&(f.dataWidth=r),s===void 0&&(f.dataHeight=i),l===void 0&&(f.left=0),c===void 0&&(f.top=0),f.left+r>f.dataWidth||f.top+i>f.dataHeight)throw new kt("Crop rectangle does not fit within image data.");return f}return t.prototype.getRow=function(e,r){if(e<0||e>=this.getHeight())throw new kt("Requested row is outside the image: "+e);var i=this.getWidth();(r==null||r.length<i)&&(r=new Uint8ClampedArray(i));var a=(e+this.top)*this.dataWidth+this.left;return je.arraycopy(this.luminances,a,r,0,i),r},t.prototype.getMatrix=function(){var e=this.getWidth(),r=this.getHeight();if(e===this.dataWidth&&r===this.dataHeight)return this.luminances;var i=e*r,a=new Uint8ClampedArray(i),s=this.top*this.dataWidth+this.left;if(e===this.dataWidth)return je.arraycopy(this.luminances,s,a,0,i),a;for(var l=0;l<r;l++){var c=l*e;je.arraycopy(this.luminances,s,a,c,e),s+=this.dataWidth}return a},t.prototype.isCropSupported=function(){return!0},t.prototype.crop=function(e,r,i,a){return new t(this.luminances,i,a,this.dataWidth,this.dataHeight,this.left+e,this.top+r)},t.prototype.invert=function(){return new p2(this)},t})(Gg);var qB=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),XB=function(n){qB(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.forName=function(e){return this.getCharacterSetECIByName(e)},t}(Rn),WB=function(){function n(){}return n.ISO_8859_1=Rn.ISO8859_1,n}(),Yy,YB=301,KB=function(n,t){for(var e=1,r=0;r<255;r++)t[r]=e,n[e]=r,e*=2,e>=256&&(e^=YB);return{LOG:n,ALOG:t}};Yy=KB([],[]),Yy.LOG;Yy.ALOG;var MS;(function(n){n[n.FORCE_NONE=0]="FORCE_NONE",n[n.FORCE_SQUARE=1]="FORCE_SQUARE",n[n.FORCE_RECTANGLE=2]="FORCE_RECTANGLE"})(MS||(MS={}));var NS=129,c4=230,ZB=231,QB=235,JB=236,tV=237,eV=238,nV=239,rV=240,Ov=254,iV=254,PS="[)>05",kS="[)>06",LS="",Ie=0,tr=1,wr=2,Tn=3,zn=4,cr=5,aV=function(){function n(){}return n.prototype.getEncodingMode=function(){return Ie},n.prototype.encode=function(t){var e=Mi.determineConsecutiveDigitCount(t.getMessage(),t.pos);if(e>=2)t.writeCodeword(this.encodeASCIIDigits(t.getMessage().charCodeAt(t.pos),t.getMessage().charCodeAt(t.pos+1))),t.pos+=2;else{var r=t.getCurrentChar(),i=Mi.lookAheadTest(t.getMessage(),t.pos,this.getEncodingMode());if(i!==this.getEncodingMode())switch(i){case cr:t.writeCodeword(ZB),t.signalEncoderChange(cr);return;case tr:t.writeCodeword(c4),t.signalEncoderChange(tr);return;case Tn:t.writeCodeword(eV),t.signalEncoderChange(Tn);break;case wr:t.writeCodeword(nV),t.signalEncoderChange(wr);break;case zn:t.writeCodeword(rV),t.signalEncoderChange(zn);break;default:throw new Error("Illegal mode: "+i)}else Mi.isExtendedASCII(r)?(t.writeCodeword(QB),t.writeCodeword(r-128+1),t.pos++):(t.writeCodeword(r+1),t.pos++)}},n.prototype.encodeASCIIDigits=function(t,e){if(Mi.isDigit(t)&&Mi.isDigit(e)){var r=(t-48)*10+(e-48);return r+130}throw new Error("not digits: "+t+e)},n}(),sV=function(){function n(){}return n.prototype.getEncodingMode=function(){return cr},n.prototype.encode=function(t){var e=new Wt;for(e.append(0);t.hasMoreCharacters();){var r=t.getCurrentChar();e.append(r),t.pos++;var i=Mi.lookAheadTest(t.getMessage(),t.pos,this.getEncodingMode());if(i!==this.getEncodingMode()){t.signalEncoderChange(Ie);break}}var a=e.length()-1,s=1,l=t.getCodewordCount()+a+s;t.updateSymbolInfo(l);var c=t.getSymbolInfo().getDataCapacity()-l>0;if(t.hasMoreCharacters()||c)if(a<=249)e.setCharAt(0,oe.getCharAt(a));else if(a<=1555)e.setCharAt(0,oe.getCharAt(Math.floor(a/250)+249)),e.insert(1,oe.getCharAt(a%250));else throw new Error("Message length not in valid ranges: "+a);for(var f=0,r=e.length();f<r;f++)t.writeCodeword(this.randomize255State(e.charAt(f).charCodeAt(0),t.getCodewordCount()+1))},n.prototype.randomize255State=function(t,e){var r=149*e%255+1,i=t+r;return i<=255?i:i-256},n}(),_2=function(){function n(){}return n.prototype.getEncodingMode=function(){return tr},n.prototype.encodeMaximal=function(t){for(var e=new Wt,r=0,i=t.pos,a=0;t.hasMoreCharacters();){var s=t.getCurrentChar();t.pos++,r=this.encodeChar(s,e),e.length()%3===0&&(i=t.pos,a=e.length())}if(a!==e.length()){var l=Math.floor(e.length()/3*2),c=Math.floor(t.getCodewordCount()+l+1);t.updateSymbolInfo(c);var f=t.getSymbolInfo().getDataCapacity()-c,d=Math.floor(e.length()%3);(d===2&&f!==2||d===1&&(r>3||f!==1))&&(t.pos=i)}e.length()>0&&t.writeCodeword(c4),this.handleEOD(t,e)},n.prototype.encode=function(t){for(var e=new Wt;t.hasMoreCharacters();){var r=t.getCurrentChar();t.pos++;var i=this.encodeChar(r,e),a=Math.floor(e.length()/3)*2,s=t.getCodewordCount()+a;t.updateSymbolInfo(s);var l=t.getSymbolInfo().getDataCapacity()-s;if(!t.hasMoreCharacters()){var c=new Wt;for(e.length()%3===2&&l!==2&&(i=this.backtrackOneCharacter(t,e,c,i));e.length()%3===1&&(i>3||l!==1);)i=this.backtrackOneCharacter(t,e,c,i);break}var f=e.length();if(f%3===0){var d=Mi.lookAheadTest(t.getMessage(),t.pos,this.getEncodingMode());if(d!==this.getEncodingMode()){t.signalEncoderChange(Ie);break}}}this.handleEOD(t,e)},n.prototype.backtrackOneCharacter=function(t,e,r,i){var a=e.length(),s=e.toString().substring(0,a-i);e.setLengthToZero(),e.append(s),t.pos--;var l=t.getCurrentChar();return i=this.encodeChar(l,r),t.resetSymbolInfo(),i},n.prototype.writeNextTriplet=function(t,e){t.writeCodewords(this.encodeToCodewords(e.toString()));var r=e.toString().substring(3);e.setLengthToZero(),e.append(r)},n.prototype.handleEOD=function(t,e){var r=Math.floor(e.length()/3*2),i=e.length()%3,a=t.getCodewordCount()+r;t.updateSymbolInfo(a);var s=t.getSymbolInfo().getDataCapacity()-a;if(i===2){for(e.append("\0");e.length()>=3;)this.writeNextTriplet(t,e);t.hasMoreCharacters()&&t.writeCodeword(Ov)}else if(s===1&&i===1){for(;e.length()>=3;)this.writeNextTriplet(t,e);t.hasMoreCharacters()&&t.writeCodeword(Ov),t.pos--}else if(i===0){for(;e.length()>=3;)this.writeNextTriplet(t,e);(s>0||t.hasMoreCharacters())&&t.writeCodeword(Ov)}else throw new Error("Unexpected case. Please report!");t.signalEncoderChange(Ie)},n.prototype.encodeChar=function(t,e){if(t===32)return e.append(3),1;if(t>=48&&t<=57)return e.append(t-48+4),1;if(t>=65&&t<=90)return e.append(t-65+14),1;if(t<32)return e.append(0),e.append(t),2;if(t<=47)return e.append(1),e.append(t-33),2;if(t<=64)return e.append(1),e.append(t-58+15),2;if(t<=95)return e.append(1),e.append(t-91+22),2;if(t<=127)return e.append(2),e.append(t-96),2;e.append("1");var r=2;return r+=this.encodeChar(t-128,e),r},n.prototype.encodeToCodewords=function(t){var e=1600*t.charCodeAt(0)+40*t.charCodeAt(1)+t.charCodeAt(2)+1,r=e/256,i=e%256,a=new Wt;return a.append(r),a.append(i),a.toString()},n}(),oV=function(){function n(){}return n.prototype.getEncodingMode=function(){return zn},n.prototype.encode=function(t){for(var e=new Wt;t.hasMoreCharacters();){var r=t.getCurrentChar();this.encodeChar(r,e),t.pos++;var i=e.length();if(i>=4){t.writeCodewords(this.encodeToCodewords(e.toString()));var a=e.toString().substring(4);e.setLengthToZero(),e.append(a);var s=Mi.lookAheadTest(t.getMessage(),t.pos,this.getEncodingMode());if(s!==this.getEncodingMode()){t.signalEncoderChange(Ie);break}}}e.append(oe.getCharAt(31)),this.handleEOD(t,e)},n.prototype.handleEOD=function(t,e){try{var r=e.length();if(r===0)return;if(r===1){t.updateSymbolInfo();var i=t.getSymbolInfo().getDataCapacity()-t.getCodewordCount(),a=t.getRemainingCharacters();if(a>i&&(t.updateSymbolInfo(t.getCodewordCount()+1),i=t.getSymbolInfo().getDataCapacity()-t.getCodewordCount()),a<=i&&i<=2)return}if(r>4)throw new Error("Count must not exceed 4");var s=r-1,l=this.encodeToCodewords(e.toString()),c=!t.hasMoreCharacters(),f=c&&s<=2;if(s<=2){t.updateSymbolInfo(t.getCodewordCount()+s);var i=t.getSymbolInfo().getDataCapacity()-t.getCodewordCount();i>=3&&(f=!1,t.updateSymbolInfo(t.getCodewordCount()+l.length))}f?(t.resetSymbolInfo(),t.pos-=s):t.writeCodewords(l)}finally{t.signalEncoderChange(Ie)}},n.prototype.encodeChar=function(t,e){t>=32&&t<=63?e.append(t):t>=64&&t<=94?e.append(oe.getCharAt(t-64)):Mi.illegalCharacter(oe.getCharAt(t))},n.prototype.encodeToCodewords=function(t){var e=t.length;if(e===0)throw new Error("StringBuilder must not be empty");var r=t.charAt(0).charCodeAt(0),i=e>=2?t.charAt(1).charCodeAt(0):0,a=e>=3?t.charAt(2).charCodeAt(0):0,s=e>=4?t.charAt(3).charCodeAt(0):0,l=(r<<18)+(i<<12)+(a<<6)+s,c=l>>16&255,f=l>>8&255,d=l&255,g=new Wt;return g.append(c),e>=2&&g.append(f),e>=3&&g.append(d),g.toString()},n}(),lV=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),uV=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},ye=function(){function n(t,e,r,i,a,s,l,c){l===void 0&&(l=0),c===void 0&&(c=0),this.rectangular=t,this.dataCapacity=e,this.errorCodewords=r,this.matrixWidth=i,this.matrixHeight=a,this.dataRegions=s,this.rsBlockData=l,this.rsBlockError=c}return n.lookup=function(t,e,r,i,a){var s,l;e===void 0&&(e=0),r===void 0&&(r=null),i===void 0&&(i=null),a===void 0&&(a=!0);try{for(var c=uV(fV),f=c.next();!f.done;f=c.next()){var d=f.value;if(!(e===1&&d.rectangular)&&!(e===2&&!d.rectangular)&&!(r!=null&&(d.getSymbolWidth()<r.getWidth()||d.getSymbolHeight()<r.getHeight()))&&!(i!=null&&(d.getSymbolWidth()>i.getWidth()||d.getSymbolHeight()>i.getHeight()))&&t<=d.dataCapacity)return d}}catch(g){s={error:g}}finally{try{f&&!f.done&&(l=c.return)&&l.call(c)}finally{if(s)throw s.error}}if(a)throw new Error("Can't find a symbol arrangement that matches the message. Data codewords: "+t);return null},n.prototype.getHorizontalDataRegions=function(){switch(this.dataRegions){case 1:return 1;case 2:case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},n.prototype.getVerticalDataRegions=function(){switch(this.dataRegions){case 1:case 2:return 1;case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},n.prototype.getSymbolDataWidth=function(){return this.getHorizontalDataRegions()*this.matrixWidth},n.prototype.getSymbolDataHeight=function(){return this.getVerticalDataRegions()*this.matrixHeight},n.prototype.getSymbolWidth=function(){return this.getSymbolDataWidth()+this.getHorizontalDataRegions()*2},n.prototype.getSymbolHeight=function(){return this.getSymbolDataHeight()+this.getVerticalDataRegions()*2},n.prototype.getCodewordCount=function(){return this.dataCapacity+this.errorCodewords},n.prototype.getInterleavedBlockCount=function(){return this.rsBlockData?this.dataCapacity/this.rsBlockData:1},n.prototype.getDataCapacity=function(){return this.dataCapacity},n.prototype.getErrorCodewords=function(){return this.errorCodewords},n.prototype.getDataLengthForInterleavedBlock=function(t){return this.rsBlockData},n.prototype.getErrorLengthForInterleavedBlock=function(t){return this.rsBlockError},n}(),cV=function(n){lV(t,n);function t(){return n.call(this,!1,1558,620,22,22,36,-1,62)||this}return t.prototype.getInterleavedBlockCount=function(){return 10},t.prototype.getDataLengthForInterleavedBlock=function(e){return e<=8?156:155},t}(ye),fV=[new ye(!1,3,5,8,8,1),new ye(!1,5,7,10,10,1),new ye(!0,5,7,16,6,1),new ye(!1,8,10,12,12,1),new ye(!0,10,11,14,6,2),new ye(!1,12,12,14,14,1),new ye(!0,16,14,24,10,1),new ye(!1,18,14,16,16,1),new ye(!1,22,18,18,18,1),new ye(!0,22,18,16,10,2),new ye(!1,30,20,20,20,1),new ye(!0,32,24,16,14,2),new ye(!1,36,24,22,22,1),new ye(!1,44,28,24,24,1),new ye(!0,49,28,22,14,2),new ye(!1,62,36,14,14,4),new ye(!1,86,42,16,16,4),new ye(!1,114,48,18,18,4),new ye(!1,144,56,20,20,4),new ye(!1,174,68,22,22,4),new ye(!1,204,84,24,24,4,102,42),new ye(!1,280,112,14,14,16,140,56),new ye(!1,368,144,16,16,16,92,36),new ye(!1,456,192,18,18,16,114,48),new ye(!1,576,224,20,20,16,144,56),new ye(!1,696,272,22,22,16,174,68),new ye(!1,816,336,24,24,16,136,56),new ye(!1,1050,408,18,18,36,175,68),new ye(!1,1304,496,20,20,36,163,62),new cV],hV=function(){function n(t){this.msg=t,this.pos=0,this.skipAtEnd=0;for(var e=t.split("").map(function(l){return l.charCodeAt(0)}),r=new Wt,i=0,a=e.length;i<a;i++){var s=String.fromCharCode(e[i]&255);if(s==="?"&&t.charAt(i)!=="?")throw new Error("Message contains characters outside ISO-8859-1 encoding.");r.append(s)}this.msg=r.toString(),this.shape=0,this.codewords=new Wt,this.newEncoding=-1}return n.prototype.setSymbolShape=function(t){this.shape=t},n.prototype.setSizeConstraints=function(t,e){this.minSize=t,this.maxSize=e},n.prototype.getMessage=function(){return this.msg},n.prototype.setSkipAtEnd=function(t){this.skipAtEnd=t},n.prototype.getCurrentChar=function(){return this.msg.charCodeAt(this.pos)},n.prototype.getCurrent=function(){return this.msg.charCodeAt(this.pos)},n.prototype.getCodewords=function(){return this.codewords},n.prototype.writeCodewords=function(t){this.codewords.append(t)},n.prototype.writeCodeword=function(t){this.codewords.append(t)},n.prototype.getCodewordCount=function(){return this.codewords.length()},n.prototype.getNewEncoding=function(){return this.newEncoding},n.prototype.signalEncoderChange=function(t){this.newEncoding=t},n.prototype.resetEncoderSignal=function(){this.newEncoding=-1},n.prototype.hasMoreCharacters=function(){return this.pos<this.getTotalMessageCharCount()},n.prototype.getTotalMessageCharCount=function(){return this.msg.length-this.skipAtEnd},n.prototype.getRemainingCharacters=function(){return this.getTotalMessageCharCount()-this.pos},n.prototype.getSymbolInfo=function(){return this.symbolInfo},n.prototype.updateSymbolInfo=function(t){t===void 0&&(t=this.getCodewordCount()),(this.symbolInfo==null||t>this.symbolInfo.getDataCapacity())&&(this.symbolInfo=ye.lookup(t,this.shape,this.minSize,this.maxSize,!0))},n.prototype.resetSymbolInfo=function(){this.symbolInfo=null},n}(),dV=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),gV=function(n){dV(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.prototype.getEncodingMode=function(){return Tn},t.prototype.encode=function(e){for(var r=new Wt;e.hasMoreCharacters();){var i=e.getCurrentChar();e.pos++,this.encodeChar(i,r);var a=r.length();if(a%3===0){this.writeNextTriplet(e,r);var s=Mi.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(s!==this.getEncodingMode()){e.signalEncoderChange(Ie);break}}}this.handleEOD(e,r)},t.prototype.encodeChar=function(e,r){switch(e){case 13:r.append(0);break;case 42:r.append(1);break;case 62:r.append(2);break;case 32:r.append(3);break;default:e>=48&&e<=57?r.append(e-48+4):e>=65&&e<=90?r.append(e-65+14):Mi.illegalCharacter(oe.getCharAt(e));break}return 1},t.prototype.handleEOD=function(e,r){e.updateSymbolInfo();var i=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount(),a=r.length();e.pos-=a,(e.getRemainingCharacters()>1||i>1||e.getRemainingCharacters()!==i)&&e.writeCodeword(iV),e.getNewEncoding()<0&&e.signalEncoderChange(Ie)},t}(_2),pV=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),mV=function(n){pV(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.prototype.getEncodingMode=function(){return wr},t.prototype.encodeChar=function(e,r){if(e===32)return r.append(3),1;if(e>=48&&e<=57)return r.append(e-48+4),1;if(e>=97&&e<=122)return r.append(e-97+14),1;if(e<32)return r.append(0),r.append(e),2;if(e<=47)return r.append(1),r.append(e-33),2;if(e<=64)return r.append(1),r.append(e-58+15),2;if(e>=91&&e<=95)return r.append(1),r.append(e-91+22),2;if(e===96)return r.append(2),r.append(0),2;if(e<=90)return r.append(2),r.append(e-65+1),2;if(e<=127)return r.append(2),r.append(e-123+27),2;r.append("1");var i=2;return i+=this.encodeChar(e-128,r),i},t}(_2),Mi=function(){function n(){}return n.randomize253State=function(t){var e=149*t%253+1,r=NS+e;return r<=254?r:r-254},n.encodeHighLevel=function(t,e,r,i,a){e===void 0&&(e=0),r===void 0&&(r=null),i===void 0&&(i=null),a===void 0&&(a=!1);var s=new _2,l=[new aV,s,new mV,new gV,new oV,new sV],c=new hV(t);c.setSymbolShape(e),c.setSizeConstraints(r,i),t.startsWith(PS)&&t.endsWith(LS)?(c.writeCodeword(JB),c.setSkipAtEnd(2),c.pos+=PS.length):t.startsWith(kS)&&t.endsWith(LS)&&(c.writeCodeword(tV),c.setSkipAtEnd(2),c.pos+=kS.length);var f=Ie;for(a&&(s.encodeMaximal(c),f=c.getNewEncoding(),c.resetEncoderSignal());c.hasMoreCharacters();)l[f].encode(c),c.getNewEncoding()>=0&&(f=c.getNewEncoding(),c.resetEncoderSignal());var d=c.getCodewordCount();c.updateSymbolInfo();var g=c.getSymbolInfo().getDataCapacity();d<g&&f!==Ie&&f!==cr&&f!==zn&&c.writeCodeword("þ");var m=c.getCodewords();for(m.length()<g&&m.append(NS);m.length()<g;)m.append(this.randomize253State(m.length()+1));return c.getCodewords().toString()},n.lookAheadTest=function(t,e,r){var i=this.lookAheadTestIntern(t,e,r);if(r===Tn&&i===Tn){for(var a=Math.min(e+3,t.length),s=e;s<a;s++)if(!this.isNativeX12(t.charCodeAt(s)))return Ie}else if(r===zn&&i===zn){for(var a=Math.min(e+4,t.length),s=e;s<a;s++)if(!this.isNativeEDIFACT(t.charCodeAt(s)))return Ie}return i},n.lookAheadTestIntern=function(t,e,r){if(e>=t.length)return r;var i;r===Ie?i=[0,1,1,1,1,1.25]:(i=[1,2,2,2,2,2.25],i[r]=0);for(var a=0,s=new Uint8Array(6),l=[];;){if(e+a===t.length){Dn.fill(s,0),Dn.fill(l,0);var c=this.findMinimums(i,l,Zt.MAX_VALUE,s),f=this.getMinimumCount(s);if(l[Ie]===c)return Ie;if(f===1){if(s[cr]>0)return cr;if(s[zn]>0)return zn;if(s[wr]>0)return wr;if(s[Tn]>0)return Tn}return tr}var d=t.charCodeAt(e+a);if(a++,this.isDigit(d)?i[Ie]+=.5:this.isExtendedASCII(d)?(i[Ie]=Math.ceil(i[Ie]),i[Ie]+=2):(i[Ie]=Math.ceil(i[Ie]),i[Ie]++),this.isNativeC40(d)?i[tr]+=2/3:this.isExtendedASCII(d)?i[tr]+=8/3:i[tr]+=4/3,this.isNativeText(d)?i[wr]+=2/3:this.isExtendedASCII(d)?i[wr]+=8/3:i[wr]+=4/3,this.isNativeX12(d)?i[Tn]+=2/3:this.isExtendedASCII(d)?i[Tn]+=13/3:i[Tn]+=10/3,this.isNativeEDIFACT(d)?i[zn]+=3/4:this.isExtendedASCII(d)?i[zn]+=17/4:i[zn]+=13/4,this.isSpecialB256(d)?i[cr]+=4:i[cr]++,a>=4){if(Dn.fill(s,0),Dn.fill(l,0),this.findMinimums(i,l,Zt.MAX_VALUE,s),l[Ie]<this.min(l[cr],l[tr],l[wr],l[Tn],l[zn]))return Ie;if(l[cr]<l[Ie]||l[cr]+1<this.min(l[tr],l[wr],l[Tn],l[zn]))return cr;if(l[zn]+1<this.min(l[cr],l[tr],l[wr],l[Tn],l[Ie]))return zn;if(l[wr]+1<this.min(l[cr],l[tr],l[zn],l[Tn],l[Ie]))return wr;if(l[Tn]+1<this.min(l[cr],l[tr],l[zn],l[wr],l[Ie]))return Tn;if(l[tr]+1<this.min(l[Ie],l[cr],l[zn],l[wr])){if(l[tr]<l[Tn])return tr;if(l[tr]===l[Tn]){for(var g=e+a+1;g<t.length;){var m=t.charCodeAt(g);if(this.isX12TermSep(m))return Tn;if(!this.isNativeX12(m))break;g++}return tr}}}}},n.min=function(t,e,r,i,a){var s=Math.min(t,Math.min(e,Math.min(r,i)));return a===void 0?s:Math.min(s,a)},n.findMinimums=function(t,e,r,i){for(var a=0;a<6;a++){var s=e[a]=Math.ceil(t[a]);r>s&&(r=s,Dn.fill(i,0)),r===s&&(i[a]=i[a]+1)}return r},n.getMinimumCount=function(t){for(var e=0,r=0;r<6;r++)e+=t[r];return e||0},n.isDigit=function(t){return t>=48&&t<=57},n.isExtendedASCII=function(t){return t>=128&&t<=255},n.isNativeC40=function(t){return t===32||t>=48&&t<=57||t>=65&&t<=90},n.isNativeText=function(t){return t===32||t>=48&&t<=57||t>=97&&t<=122},n.isNativeX12=function(t){return this.isX12TermSep(t)||t===32||t>=48&&t<=57||t>=65&&t<=90},n.isX12TermSep=function(t){return t===13||t===42||t===62},n.isNativeEDIFACT=function(t){return t>=32&&t<=94},n.isSpecialB256=function(t){return!1},n.determineConsecutiveDigitCount=function(t,e){e===void 0&&(e=0);for(var r=t.length,i=e;i<r&&this.isDigit(t.charCodeAt(i));)i++;return i-e},n.illegalCharacter=function(t){var e=Zt.toHexString(t.charCodeAt(0));throw e="0000".substring(0,4-e.length)+e,new Error("Illegal character: "+t+" (0x"+e+")")},n}(),Mv=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},BS=function(){function n(t){this.charset=t,this.name=t.name}return n.prototype.canEncode=function(t){try{return _i.encode(t,this.charset)!=null}catch{return!1}},n}(),vV=function(){function n(t,e,r){var i,a,s,l,c,f;this.ENCODERS=["IBM437","ISO-8859-2","ISO-8859-3","ISO-8859-4","ISO-8859-5","ISO-8859-6","ISO-8859-7","ISO-8859-8","ISO-8859-9","ISO-8859-10","ISO-8859-11","ISO-8859-13","ISO-8859-14","ISO-8859-15","ISO-8859-16","windows-1250","windows-1251","windows-1252","windows-1256","Shift_JIS"].map(function(D){return new BS(XB.forName(D))}),this.encoders=[];var d=[];d.push(new BS(WB.ISO_8859_1));for(var g=e!=null&&e.name.startsWith("UTF"),m=0;m<t.length;m++){var v=!1;try{for(var _=(i=void 0,Mv(d)),w=_.next();!w.done;w=_.next()){var b=w.value,C=t.charAt(m),I=C.charCodeAt(0);if(I===r||b.canEncode(C)){v=!0;break}}}catch(D){i={error:D}}finally{try{w&&!w.done&&(a=_.return)&&a.call(_)}finally{if(i)throw i.error}}if(!v)try{for(var R=(s=void 0,Mv(this.ENCODERS)),M=R.next();!M.done;M=R.next()){var b=M.value;if(b.canEncode(t.charAt(m))){d.push(b),v=!0;break}}}catch(D){s={error:D}}finally{try{M&&!M.done&&(l=R.return)&&l.call(R)}finally{if(s)throw s.error}}v||(g=!0)}if(d.length===1&&!g)this.encoders=[d[0]];else{this.encoders=[];var N=0;try{for(var k=Mv(d),O=k.next();!O.done;O=k.next()){var b=O.value;this.encoders[N++]=b}}catch(D){c={error:D}}finally{try{O&&!O.done&&(f=k.return)&&f.call(k)}finally{if(c)throw c.error}}}var S=-1;if(e!=null){for(var m=0;m<this.encoders.length;m++)if(this.encoders[m]!=null&&e.name===this.encoders[m].name){S=m;break}}this.priorityEncoderIndex=S}return n.prototype.length=function(){return this.encoders.length},n.prototype.getCharsetName=function(t){if(!(t<this.length()))throw new Error("index must be less than length");return this.encoders[t].name},n.prototype.getCharset=function(t){if(!(t<this.length()))throw new Error("index must be less than length");return this.encoders[t].charset},n.prototype.getECIValue=function(t){return this.encoders[t].charset.getValueIdentifier()},n.prototype.getPriorityEncoderIndex=function(){return this.priorityEncoderIndex},n.prototype.canEncode=function(t,e){if(!(e<this.length()))throw new Error("index must be less than length");return!0},n.prototype.encode=function(t,e){if(!(e<this.length()))throw new Error("index must be less than length");return _i.encode(oe.getCharAt(t),this.encoders[e].name)},n}(),yV=3,xV=function(){function n(t,e,r){this.fnc1=r;var i=new vV(t,e,r);if(i.length()===1)for(var a=0;a<this.bytes.length;a++){var s=t.charAt(a).charCodeAt(0);this.bytes[a]=s===r?1e3:s}else this.bytes=this.encodeMinimally(t,i,r)}return n.prototype.getFNC1Character=function(){return this.fnc1},n.prototype.length=function(){return this.bytes.length},n.prototype.haveNCharacters=function(t,e){if(t+e-1>=this.bytes.length)return!1;for(var r=0;r<e;r++)if(this.isECI(t+r))return!1;return!0},n.prototype.charAt=function(t){if(t<0||t>=this.length())throw new Error(""+t);if(this.isECI(t))throw new Error("value at "+t+" is not a character but an ECI");return this.isFNC1(t)?this.fnc1:this.bytes[t]},n.prototype.subSequence=function(t,e){if(t<0||t>e||e>this.length())throw new Error(""+t);for(var r=new Wt,i=t;i<e;i++){if(this.isECI(i))throw new Error("value at "+i+" is not a character but an ECI");r.append(this.charAt(i))}return r.toString()},n.prototype.isECI=function(t){if(t<0||t>=this.length())throw new Error(""+t);return this.bytes[t]>255&&this.bytes[t]<=999},n.prototype.isFNC1=function(t){if(t<0||t>=this.length())throw new Error(""+t);return this.bytes[t]===1e3},n.prototype.getECIValue=function(t){if(t<0||t>=this.length())throw new Error(""+t);if(!this.isECI(t))throw new Error("value at "+t+" is not an ECI but a character");return this.bytes[t]-256},n.prototype.addEdge=function(t,e,r){(t[e][r.encoderIndex]==null||t[e][r.encoderIndex].cachedTotalSize>r.cachedTotalSize)&&(t[e][r.encoderIndex]=r)},n.prototype.addEdges=function(t,e,r,i,a,s){var l=t.charAt(i).charCodeAt(0),c=0,f=e.length();e.getPriorityEncoderIndex()>=0&&(l===s||e.canEncode(l,e.getPriorityEncoderIndex()))&&(c=e.getPriorityEncoderIndex(),f=c+1);for(var d=c;d<f;d++)(l===s||e.canEncode(l,d))&&this.addEdge(r,i+1,new VS(l,e,d,a,s))},n.prototype.encodeMinimally=function(t,e,r){var i=t.length,a=new VS[i+1][e.length()];this.addEdges(t,e,a,0,null,r);for(var s=1;s<=i;s++){for(var l=0;l<e.length();l++)a[s][l]!=null&&s<i&&this.addEdges(t,e,a,s,a[s][l],r);for(var l=0;l<e.length();l++)a[s-1][l]=null}for(var c=-1,f=Zt.MAX_VALUE,l=0;l<e.length();l++)if(a[i][l]!=null){var d=a[i][l];d.cachedTotalSize<f&&(f=d.cachedTotalSize,c=l)}if(c<0)throw new Error('Failed to encode "'+t+'"');for(var g=[],m=a[i][c];m!=null;){if(m.isFNC1())g.unshift(1e3);else for(var v=e.encode(m.c,m.encoderIndex),s=v.length-1;s>=0;s--)g.unshift(v[s]&255);var _=m.previous===null?0:m.previous.encoderIndex;_!==m.encoderIndex&&g.unshift(256+e.getECIValue(m.encoderIndex)),m=m.previous}for(var w=[],s=0;s<w.length;s++)w[s]=g[s];return w},n}(),VS=function(){function n(t,e,r,i,a){this.c=t,this.encoderSet=e,this.encoderIndex=r,this.previous=i,this.fnc1=a,this.c=t===a?1e3:t;var s=this.isFNC1()?1:e.encode(t,r).length,l=i===null?0:i.encoderIndex;l!==r&&(s+=yV),i!=null&&(s+=i.cachedTotalSize),this.cachedTotalSize=s}return n.prototype.isFNC1=function(){return this.c===1e3},n}(),_V=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}();var FS;(function(n){n[n.ASCII=0]="ASCII",n[n.C40=1]="C40",n[n.TEXT=2]="TEXT",n[n.X12=3]="X12",n[n.EDF=4]="EDF",n[n.B256=5]="B256"})(FS||(FS={}));(function(n){_V(t,n);function t(e,r,i,a,s){var l=n.call(this,e,r,i)||this;return l.shape=a,l.macroId=s,l}return t.prototype.getMacroId=function(){return this.macroId},t.prototype.getShapeHint=function(){return this.shape},t})(xV);var AV=function(){function n(){}return n.prototype.isCompact=function(){return this.compact},n.prototype.setCompact=function(t){this.compact=t},n.prototype.getSize=function(){return this.size},n.prototype.setSize=function(t){this.size=t},n.prototype.getLayers=function(){return this.layers},n.prototype.setLayers=function(t){this.layers=t},n.prototype.getCodeWords=function(){return this.codeWords},n.prototype.setCodeWords=function(t){this.codeWords=t},n.prototype.getMatrix=function(){return this.matrix},n.prototype.setMatrix=function(t){this.matrix=t},n}(),jS=function(){function n(){}return n.singletonList=function(t){return[t]},n.min=function(t,e){return t.sort(e)[0]},n}(),EV=function(){function n(t){this.previous=t}return n.prototype.getPrevious=function(){return this.previous},n}(),wV=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),A2=function(n){wV(t,n);function t(e,r,i){var a=n.call(this,e)||this;return a.value=r,a.bitCount=i,a}return t.prototype.appendTo=function(e,r){e.appendBits(this.value,this.bitCount)},t.prototype.add=function(e,r){return new t(this,e,r)},t.prototype.addBinaryShift=function(e,r){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new t(this,e,r)},t.prototype.toString=function(){var e=this.value&(1<<this.bitCount)-1;return e|=1<<this.bitCount,"<"+Zt.toBinaryString(e|1<<this.bitCount).substring(1)+">"},t}(EV),bV=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),SV=function(n){bV(t,n);function t(e,r,i){var a=n.call(this,e,0,0)||this;return a.binaryShiftStart=r,a.binaryShiftByteCount=i,a}return t.prototype.appendTo=function(e,r){for(var i=0;i<this.binaryShiftByteCount;i++)(i===0||i===31&&this.binaryShiftByteCount<=62)&&(e.appendBits(31,5),this.binaryShiftByteCount>62?e.appendBits(this.binaryShiftByteCount-31,16):i===0?e.appendBits(Math.min(this.binaryShiftByteCount,31),5):e.appendBits(this.binaryShiftByteCount-31,5)),e.appendBits(r[this.binaryShiftStart+i],8)},t.prototype.addBinaryShift=function(e,r){return new t(this,e,r)},t.prototype.toString=function(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"},t}(A2);function TV(n,t,e){return new SV(n,t,e)}function Qf(n,t,e){return new A2(n,t,e)}var CV=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],mo=0,K1=1,vi=2,f4=3,ia=4,IV=new A2(null,0,0),Nv=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])],RV=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};function DV(n){var t,e;try{for(var r=RV(n),i=r.next();!i.done;i=r.next()){var a=i.value;Dn.fill(a,-1)}}catch(s){t={error:s}}finally{try{i&&!i.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}return n[mo][ia]=0,n[K1][ia]=0,n[K1][mo]=28,n[f4][ia]=0,n[vi][ia]=0,n[vi][mo]=15,n}var h4=DV(Dn.createInt32Array(6,6)),OV=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},MV=function(){function n(t,e,r,i){this.token=t,this.mode=e,this.binaryShiftByteCount=r,this.bitCount=i}return n.prototype.getMode=function(){return this.mode},n.prototype.getToken=function(){return this.token},n.prototype.getBinaryShiftByteCount=function(){return this.binaryShiftByteCount},n.prototype.getBitCount=function(){return this.bitCount},n.prototype.latchAndAppend=function(t,e){var r=this.bitCount,i=this.token;if(t!==this.mode){var a=Nv[this.mode][t];i=Qf(i,a&65535,a>>16),r+=a>>16}var s=t===vi?4:5;return i=Qf(i,e,s),new n(i,t,0,r+s)},n.prototype.shiftAndAppend=function(t,e){var r=this.token,i=this.mode===vi?4:5;return r=Qf(r,h4[this.mode][t],i),r=Qf(r,e,5),new n(r,this.mode,0,this.bitCount+i+5)},n.prototype.addBinaryShiftChar=function(t){var e=this.token,r=this.mode,i=this.bitCount;if(this.mode===ia||this.mode===vi){var a=Nv[r][mo];e=Qf(e,a&65535,a>>16),i+=a>>16,r=mo}var s=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,l=new n(e,r,this.binaryShiftByteCount+1,i+s);return l.binaryShiftByteCount===2078&&(l=l.endBinaryShift(t+1)),l},n.prototype.endBinaryShift=function(t){if(this.binaryShiftByteCount===0)return this;var e=this.token;return e=TV(e,t-this.binaryShiftByteCount,this.binaryShiftByteCount),new n(e,this.mode,0,this.bitCount)},n.prototype.isBetterThanOrEqualTo=function(t){var e=this.bitCount+(Nv[this.mode][t.mode]>>16);return this.binaryShiftByteCount<t.binaryShiftByteCount?e+=n.calculateBinaryShiftCost(t)-n.calculateBinaryShiftCost(this):this.binaryShiftByteCount>t.binaryShiftByteCount&&t.binaryShiftByteCount>0&&(e+=10),e<=t.bitCount},n.prototype.toBitArray=function(t){for(var e,r,i=[],a=this.endBinaryShift(t.length).token;a!==null;a=a.getPrevious())i.unshift(a);var s=new $n;try{for(var l=OV(i),c=l.next();!c.done;c=l.next()){var f=c.value;f.appendTo(s,t)}}catch(d){e={error:d}}finally{try{c&&!c.done&&(r=l.return)&&r.call(l)}finally{if(e)throw e.error}}return s},n.prototype.toString=function(){return oe.format("%s bits=%d bytes=%d",CV[this.mode],this.bitCount,this.binaryShiftByteCount)},n.calculateBinaryShiftCost=function(t){return t.binaryShiftByteCount>62?21:t.binaryShiftByteCount>31?20:t.binaryShiftByteCount>0?10:0},n.INITIAL_STATE=new n(IV,mo,0,0),n}();function NV(n){var t=oe.getCharCode(" "),e=oe.getCharCode("."),r=oe.getCharCode(",");n[mo][t]=1;for(var i=oe.getCharCode("Z"),a=oe.getCharCode("A"),s=a;s<=i;s++)n[mo][s]=s-a+2;n[K1][t]=1;for(var l=oe.getCharCode("z"),c=oe.getCharCode("a"),s=c;s<=l;s++)n[K1][s]=s-c+2;n[vi][t]=1;for(var f=oe.getCharCode("9"),d=oe.getCharCode("0"),s=d;s<=f;s++)n[vi][s]=s-d+2;n[vi][r]=12,n[vi][e]=13;for(var g=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""],m=0;m<g.length;m++)n[f4][oe.getCharCode(g[m])]=m;for(var v=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"],m=0;m<v.length;m++)oe.getCharCode(v[m])>0&&(n[ia][oe.getCharCode(v[m])]=m);return n}var Pv=NV(Dn.createInt32Array(5,256)),t1=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},PV=function(){function n(t){this.text=t}return n.prototype.encode=function(){for(var t=oe.getCharCode(" "),e=oe.getCharCode(`
`),r=jS.singletonList(MV.INITIAL_STATE),i=0;i<this.text.length;i++){var a=void 0,s=i+1<this.text.length?this.text[i+1]:0;switch(this.text[i]){case oe.getCharCode("\r"):a=s===e?2:0;break;case oe.getCharCode("."):a=s===t?3:0;break;case oe.getCharCode(","):a=s===t?4:0;break;case oe.getCharCode(":"):a=s===t?5:0;break;default:a=0}a>0?(r=n.updateStateListForPair(r,i,a),i++):r=this.updateStateListForChar(r,i)}var l=jS.min(r,function(c,f){return c.getBitCount()-f.getBitCount()});return l.toBitArray(this.text)},n.prototype.updateStateListForChar=function(t,e){var r,i,a=[];try{for(var s=t1(t),l=s.next();!l.done;l=s.next()){var c=l.value;this.updateStateForChar(c,e,a)}}catch(f){r={error:f}}finally{try{l&&!l.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}return n.simplifyStates(a)},n.prototype.updateStateForChar=function(t,e,r){for(var i=this.text[e]&255,a=Pv[t.getMode()][i]>0,s=null,l=0;l<=ia;l++){var c=Pv[l][i];if(c>0){if(s==null&&(s=t.endBinaryShift(e)),!a||l===t.getMode()||l===vi){var f=s.latchAndAppend(l,c);r.push(f)}if(!a&&h4[t.getMode()][l]>=0){var d=s.shiftAndAppend(l,c);r.push(d)}}}if(t.getBinaryShiftByteCount()>0||Pv[t.getMode()][i]===0){var g=t.addBinaryShiftChar(e);r.push(g)}},n.updateStateListForPair=function(t,e,r){var i,a,s=[];try{for(var l=t1(t),c=l.next();!c.done;c=l.next()){var f=c.value;this.updateStateForPair(f,e,r,s)}}catch(d){i={error:d}}finally{try{c&&!c.done&&(a=l.return)&&a.call(l)}finally{if(i)throw i.error}}return this.simplifyStates(s)},n.updateStateForPair=function(t,e,r,i){var a=t.endBinaryShift(e);if(i.push(a.latchAndAppend(ia,r)),t.getMode()!==ia&&i.push(a.shiftAndAppend(ia,r)),r===3||r===4){var s=a.latchAndAppend(vi,16-r).latchAndAppend(vi,1);i.push(s)}if(t.getBinaryShiftByteCount()>0){var l=t.addBinaryShiftChar(e).addBinaryShiftChar(e+1);i.push(l)}},n.simplifyStates=function(t){var e,r,i,a,s=[];try{for(var l=t1(t),c=l.next();!c.done;c=l.next()){var f=c.value,d=!0,g=function(b){if(b.isBetterThanOrEqualTo(f))return d=!1,"break";f.isBetterThanOrEqualTo(b)&&(s=s.filter(function(C){return C!==b}))};try{for(var m=(i=void 0,t1(s)),v=m.next();!v.done;v=m.next()){var _=v.value,w=g(_);if(w==="break")break}}catch(b){i={error:b}}finally{try{v&&!v.done&&(a=m.return)&&a.call(m)}finally{if(i)throw i.error}}d&&s.push(f)}}catch(b){e={error:b}}finally{try{c&&!c.done&&(r=l.return)&&r.call(l)}finally{if(e)throw e.error}}return s},n}(),kV=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};(function(){function n(){}return n.encodeBytes=function(t){return n.encode(t,n.DEFAULT_EC_PERCENT,n.DEFAULT_AZTEC_LAYERS)},n.encode=function(t,e,r){var i=new PV(t).encode(),a=Zt.truncDivision(i.getSize()*e,100)+11,s=i.getSize()+a,l,c,f,d,g;if(r!==n.DEFAULT_AZTEC_LAYERS){if(l=r<0,c=Math.abs(r),c>(l?n.MAX_NB_BITS_COMPACT:n.MAX_NB_BITS))throw new kt(oe.format("Illegal value %s for layers",r));f=n.totalBitsInLayer(c,l),d=n.WORD_SIZE[c];var m=f-f%d;if(g=n.stuffBits(i,d),g.getSize()+a>m)throw new kt("Data to large for user specified layer");if(l&&g.getSize()>d*64)throw new kt("Data to large for user specified layer")}else{d=0,g=null;for(var v=0;;v++){if(v>n.MAX_NB_BITS)throw new kt("Data too large for an Aztec code");if(l=v<=3,c=l?v+1:v,f=n.totalBitsInLayer(c,l),!(s>f)){(g==null||d!==n.WORD_SIZE[c])&&(d=n.WORD_SIZE[c],g=n.stuffBits(i,d));var m=f-f%d;if(!(l&&g.getSize()>d*64)&&g.getSize()+a<=m)break}}}var _=n.generateCheckWords(g,f,d),w=g.getSize()/d,b=n.generateModeMessage(l,c,w),C=(l?11:14)+c*4,I=new Int32Array(C),R;if(l){R=C;for(var v=0;v<I.length;v++)I[v]=v}else{R=C+1+2*Zt.truncDivision(Zt.truncDivision(C,2)-1,15);for(var M=Zt.truncDivision(C,2),N=Zt.truncDivision(R,2),v=0;v<M;v++){var k=v+Zt.truncDivision(v,15);I[M-v-1]=N-k-1,I[M+v]=N+k+1}}for(var O=new ya(R),v=0,S=0;v<c;v++){for(var D=(c-v)*4+(l?9:12),V=0;V<D;V++)for(var B=V*2,F=0;F<2;F++)_.get(S+B+F)&&O.set(I[v*2+F],I[v*2+V]),_.get(S+D*2+B+F)&&O.set(I[v*2+V],I[C-1-v*2-F]),_.get(S+D*4+B+F)&&O.set(I[C-1-v*2-F],I[C-1-v*2-V]),_.get(S+D*6+B+F)&&O.set(I[C-1-v*2-V],I[v*2+F]);S+=D*8}if(n.drawModeMessage(O,l,R,b),l)n.drawBullsEye(O,Zt.truncDivision(R,2),5);else{n.drawBullsEye(O,Zt.truncDivision(R,2),7);for(var v=0,V=0;v<Zt.truncDivision(C,2)-1;v+=15,V+=16)for(var F=Zt.truncDivision(R,2)&1;F<R;F+=2)O.set(Zt.truncDivision(R,2)-V,F),O.set(Zt.truncDivision(R,2)+V,F),O.set(F,Zt.truncDivision(R,2)-V),O.set(F,Zt.truncDivision(R,2)+V)}var j=new AV;return j.setCompact(l),j.setSize(R),j.setLayers(c),j.setCodeWords(w),j.setMatrix(O),j},n.drawBullsEye=function(t,e,r){for(var i=0;i<r;i+=2)for(var a=e-i;a<=e+i;a++)t.set(a,e-i),t.set(a,e+i),t.set(e-i,a),t.set(e+i,a);t.set(e-r,e-r),t.set(e-r+1,e-r),t.set(e-r,e-r+1),t.set(e+r,e-r),t.set(e+r,e-r+1),t.set(e+r,e+r-1)},n.generateModeMessage=function(t,e,r){var i=new $n;return t?(i.appendBits(e-1,2),i.appendBits(r-1,6),i=n.generateCheckWords(i,28,4)):(i.appendBits(e-1,5),i.appendBits(r-1,11),i=n.generateCheckWords(i,40,4)),i},n.drawModeMessage=function(t,e,r,i){var a=Zt.truncDivision(r,2);if(e)for(var s=0;s<7;s++){var l=a-3+s;i.get(s)&&t.set(l,a-5),i.get(s+7)&&t.set(a+5,l),i.get(20-s)&&t.set(l,a+5),i.get(27-s)&&t.set(a-5,l)}else for(var s=0;s<10;s++){var l=a-5+s+Zt.truncDivision(s,5);i.get(s)&&t.set(l,a-7),i.get(s+10)&&t.set(a+7,l),i.get(29-s)&&t.set(l,a+7),i.get(39-s)&&t.set(a-7,l)}},n.generateCheckWords=function(t,e,r){var i,a,s=t.getSize()/r,l=new u4(n.getGF(r)),c=Zt.truncDivision(e,r),f=n.bitsToWords(t,r,c);l.encode(f,c-s);var d=e%r,g=new $n;g.appendBits(0,d);try{for(var m=kV(Array.from(f)),v=m.next();!v.done;v=m.next()){var _=v.value;g.appendBits(_,r)}}catch(w){i={error:w}}finally{try{v&&!v.done&&(a=m.return)&&a.call(m)}finally{if(i)throw i.error}}return g},n.bitsToWords=function(t,e,r){var i=new Int32Array(r),a,s;for(a=0,s=t.getSize()/e;a<s;a++){for(var l=0,c=0;c<e;c++)l|=t.get(a*e+c)?1<<e-c-1:0;i[a]=l}return i},n.getGF=function(t){switch(t){case 4:return Nr.AZTEC_PARAM;case 6:return Nr.AZTEC_DATA_6;case 8:return Nr.AZTEC_DATA_8;case 10:return Nr.AZTEC_DATA_10;case 12:return Nr.AZTEC_DATA_12;default:throw new kt("Unsupported word size "+t)}},n.stuffBits=function(t,e){for(var r=new $n,i=t.getSize(),a=(1<<e)-2,s=0;s<i;s+=e){for(var l=0,c=0;c<e;c++)(s+c>=i||t.get(s+c))&&(l|=1<<e-1-c);(l&a)===a?(r.appendBits(l&a,e),s--):(l&a)===0?(r.appendBits(l|1,e),s--):r.appendBits(l,e)}return r},n.totalBitsInLayer=function(t,e){return((e?88:112)+16*t)*t},n.DEFAULT_EC_PERCENT=33,n.DEFAULT_AZTEC_LAYERS=0,n.MAX_NB_BITS=32,n.MAX_NB_BITS_COMPACT=4,n.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]),n})();const LV=({onDetected:n,onError:t})=>{const e=H.useRef(null),r=H.useRef(new BB),i=H.useRef(!1);return H.useEffect(()=>{const a=e.current;let s;const l=()=>{a.play().catch(d=>console.error("play() failed:",d))},c=()=>{a.videoWidth===0||a.videoHeight===0||i.current||(i.current=!0,r.current.decodeFromStream(s,a,(d,g)=>{d&&(r.current.reset(),n(d.getText())),g&&!(g instanceof ot)&&(r.current.reset(),t(g.message||"スキャナーでエラーが発生しました。"))}))};return(async()=>{if(a)try{s=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment",aspectRatio:.5}}),a.srcObject=s,a.muted=!0,a.addEventListener("loadedmetadata",l),a.addEventListener("playing",c)}catch(d){const g=`カメラの起動に失敗しました。ブラウザや端末のカメラ権限設定を確認し、許可されているかご確認ください。
詳細: ${d&&d.message?d.message:""}`;console.log("[BarcodeScanner] onError呼び出し",g),t(g)}})(),()=>{if(r.current.reset(),i.current=!1,a){a.removeEventListener("loadedmetadata",l),a.removeEventListener("playing",c);const d=a.srcObject;d&&d.getTracks().forEach(m=>m.stop()),a.srcObject=null}}},[n,t]),A.jsx(vt,{"data-testid":"barcode-scanner-container",children:A.jsx("video",{ref:e,style:{width:"100%",height:"auto",border:"1px solid gray"},autoPlay:!0,muted:!0,playsInline:!0,"data-testid":"barcode-scanner-video"})})},BV={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"90%",maxWidth:400,bgcolor:"background.paper",border:"2px solid #000",boxShadow:24,p:4},VV=({onScan:n,onScanError:t})=>{const[e,r]=H.useState(!1),{setGlobalError:i}=H.useContext(Lr)||{setGlobalError:()=>{}},a=l=>{n(l),r(!1)},s=l=>{i(l),r(!1)};return A.jsxs(A.Fragment,{children:[A.jsx(qt,{variant:"outlined",startIcon:A.jsx(ly,{}),onClick:()=>r(!0),sx:{mt:2,mb:2},fullWidth:!0,"data-testid":"barcode-scan-button",children:"バーコードスキャン"}),A.jsx(J8,{open:e,onClose:()=>r(!1),"aria-labelledby":"scanner-modal-title","data-testid":"barcode-scan-modal",children:A.jsxs(vt,{sx:BV,children:[A.jsxs(vt,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[A.jsx(st,{id:"scanner-modal-title",variant:"h6",component:"h2",children:"バーコードスキャン"}),A.jsx(Xr,{onClick:()=>r(!1),children:A.jsx(st,{variant:"h6",children:"×"})})]}),A.jsx(LV,{onDetected:a,onError:s,"data-testid":"barcode-scanner"})]})})]})};function FV(){const[n,t]=H.useState(""),e=Gh(),r=a=>{console.log("[BookAdd] handleScanDetected スキャン結果:",a),t(a)},i=a=>{e(`/book/${a}`)};return A.jsxs(vt,{sx:{maxWidth:500,mx:"auto",pb:{xs:"72px",sm:"80px"}},children:[A.jsx(Hg,{title:"本を追加",subtitle:"新しい本をライブラリに追加"}),A.jsxs(vt,{sx:{px:{xs:1.5,sm:2,md:0}},children:[A.jsx(VV,{onScan:r,onScanError:a=>console.error(a)}),A.jsx(K7,{isbn:n,onBookAdded:i})]})]})}const E2=n=>{const{user:t}=qn(),e=H.useContext(Lr),r=(e==null?void 0:e.setGlobalError)||(()=>{}),[i,a]=H.useState([]),[s,l]=H.useState(!0),[c,f]=H.useState(null),d=H.useCallback(async()=>{if(!t||!n){a([]),l(!1);return}try{l(!0),f(null);const _=br(de,"books",n,"memos"),w=on(_,Lh("createdAt","desc")),C=(await vn(w)).docs.map(I=>({id:I.id,...I.data()}));a(C)}catch(_){console.error("Error fetching memos:",_),r("メモ一覧の取得に失敗しました。"),f("メモ一覧の取得に失敗しました。")}finally{l(!1)}},[t==null?void 0:t.uid,n]),g=H.useCallback(async _=>{if(!t||!n)throw new Error("ユーザーまたは書籍IDが無効です。");try{const w=br(de,"books",n,"memos"),b=await K3(w,{..._,userId:t.uid,createdAt:fa(),updatedAt:fa()}),C={id:b.id,..._,userId:t.uid,createdAt:new Date,updatedAt:new Date};return a(I=>[C,...I]),b.id}catch(w){throw console.error("Error adding memo:",w),r("メモの追加に失敗しました。"),w}},[t==null?void 0:t.uid,n]),m=H.useCallback(async(_,w)=>{if(!t||!n||!_)throw new Error("ユーザー・書籍ID・メモIDが無効です。");try{const b=ss(de,"books",n,"memos",_);return await zg(b,{...w,userId:t.uid,updatedAt:fa()}),a(C=>C.map(R=>R.id===_?{...R,...w,userId:t.uid,updatedAt:new Date}:R)),!0}catch(b){throw console.error("Error updating memo:",b),r("メモの更新に失敗しました。"),b}},[t==null?void 0:t.uid,n]),v=H.useCallback(async _=>{if(!t||!n||!_)throw new Error("ユーザー・書籍ID・メモIDが無効です。");try{const w=ss(de,"books",n,"memos",_);return await L7(w),a(b=>b.filter(C=>C.id!==_)),!0}catch(w){throw console.error("Error deleting memo:",w),r("メモの削除に失敗しました。"),w}},[t==null?void 0:t.uid,n]);return H.useEffect(()=>{d()},[d]),{memos:i,loading:s,error:c,fetchMemos:d,addMemo:g,updateMemo:m,deleteMemo:v}},US=n=>{try{const t=n&&typeof n.toDate=="function"?n.toDate():n instanceof Date?n:null;if(!t)return"";const e=t.getFullYear(),r=t.getMonth()+1,i=t.getDate();return`${e}/${r}/${i}`}catch{return""}},jV=({memo:n,onEdit:t,onDelete:e,onClick:r})=>{const i=hC("(max-width:600px)"),[a,s]=H.useState(!1),f=(n.text?n.text.split(`
`):[]).slice(0,2).join(`
`),d=n.createdAt&&n.createdAt.toDate?n.createdAt.toDate():null,g=_=>{_&&_.stopPropagation(),s(!1),typeof t=="function"&&t(n,!0)},m=_=>{_&&_.stopPropagation(),s(!1),e(n.id)},v=_C({onSwipedLeft:()=>s(!0),onSwipedRight:()=>s(!1),preventDefaultTouchmoveEvent:!0,trackMouse:!0});return i?A.jsxs(vt,{position:"relative",...v,sx:{mb:2},children:[A.jsxs(pn,{"data-testid":"memo-card",sx:{position:"relative",maxWidth:"100%",mx:"auto",cursor:r?"pointer":"default",bgcolor:"background.paper",transition:"transform 0.2s",transform:a?"translateX(-100px)":"none"},onClick:r?()=>r(n,!1):void 0,children:[A.jsxs(mn,{sx:{pb:1,minHeight:48,maxHeight:56,overflow:"hidden"},children:[A.jsx(st,{variant:"body1",sx:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",wordBreak:"break-all",overflowWrap:"break-word"},children:f}),n.comment&&A.jsx(st,{variant:"body2",color:"text.secondary",sx:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",wordBreak:"break-all",overflowWrap:"break-word"},children:n.comment})]}),A.jsx(Ew,{sx:{justifyContent:"space-between",alignItems:"center",py:0},children:A.jsxs(bh,{direction:"row",spacing:1,alignItems:"center",children:[n.page&&A.jsxs(st,{variant:"caption",children:["p.",n.page]}),d&&A.jsx(st,{variant:"caption",color:"text.secondary",children:US(d)}),Array.isArray(n.tags)&&n.tags.map((_,w)=>A.jsx(On,{label:_,size:"small",color:"secondary"},w))]})})]}),a&&A.jsxs(vt,{position:"absolute",top:0,right:0,height:"100%",display:"flex",flexDirection:"column",justifyContent:"center",zIndex:2,sx:{p:1,gap:1},children:[A.jsx(Xr,{onClick:g,sx:{bgcolor:"primary.main",color:"white",mb:1},size:"large",children:A.jsx(uy,{})}),A.jsx(Xr,{onClick:m,sx:{bgcolor:"error.main",color:"white"},size:"large",children:A.jsx(ww,{})})]})]}):A.jsxs(pn,{"data-testid":"memo-card",sx:{position:"relative",maxWidth:"100%",mx:"auto",cursor:r?"pointer":"default",bgcolor:"background.paper"},onClick:r?()=>r(n,!1):void 0,children:[A.jsxs(mn,{sx:{pb:1,minHeight:48,maxHeight:56,overflow:"hidden"},children:[A.jsx(st,{variant:"body1",sx:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",wordBreak:"break-all",overflowWrap:"break-word"},children:f}),n.comment&&A.jsx(st,{variant:"body2",color:"text.secondary",sx:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",wordBreak:"break-all",overflowWrap:"break-word"},children:n.comment})]}),A.jsxs(Ew,{sx:{justifyContent:"space-between",alignItems:"center",py:0},children:[A.jsxs(bh,{direction:"row",spacing:1,alignItems:"center",children:[n.page&&A.jsxs(st,{variant:"caption",children:["p.",n.page]}),d&&A.jsx(st,{variant:"caption",color:"text.secondary",children:US(d)}),Array.isArray(n.tags)&&n.tags.map((_,w)=>A.jsx(On,{label:_,size:"small",color:"secondary"},w))]}),A.jsxs(vt,{sx:{display:{xs:"none",sm:"flex"}},children:[A.jsx(Xr,{"aria-label":"edit",onClick:g,size:"small","data-testid":"memo-edit-button",children:A.jsx(uy,{fontSize:"small"})}),A.jsx(Xr,{"aria-label":"delete",onClick:m,size:"small","data-testid":"memo-delete-button",children:A.jsx(ww,{fontSize:"small"})})]})]})]})},UV=n=>{try{const t=n&&typeof n.toDate=="function"?n.toDate():n instanceof Date?n:null;if(!t)return"";const e=t.getFullYear(),r=t.getMonth()+1,i=t.getDate(),a=t.getHours(),s=String(t.getMinutes()).padStart(2,"0"),l=String(t.getSeconds()).padStart(2,"0");return`${e}/${r}/${i} ${a}:${s}:${l}`}catch{return""}},d4=({open:n,memo:t,bookId:e,onClose:r,onUpdate:i,onDelete:a,editMode:s=!1})=>{const{setGlobalError:l}=H.useContext(Lr),{updateMemo:c,deleteMemo:f}=E2(e),[d,g]=H.useState(s?"edit":"view"),[m,v]=H.useState(null),[_,w]=H.useState(!1),[b,C]=H.useState("");gx.useEffect(()=>{t&&(v(t),g(s?"edit":"view"),w(!1),C(""))},[t,s]);const I=()=>{v(null),g("view"),w(!1),C(""),r()},R=async N=>{if(N.preventDefault(),!m||!m.text.trim())return;let k=m.tags||[];b&&!k.includes(b)&&(k=[...k,b]);try{await c(m.id,{text:m.text,comment:m.comment,page:Number(m.page)||null,tags:k}),I(),i&&i()}catch(O){console.error("Error updating memo: ",O),l("メモの更新に失敗しました。")}},M=async N=>{try{await f(N),I(),a&&a()}catch(k){console.error("Error deleting memo: ",k),l("メモの削除に失敗しました。")}};return t?A.jsxs(A.Fragment,{children:[A.jsxs(da,{open:n,onClose:I,maxWidth:"sm",fullWidth:!0,"data-testid":"memo-detail-dialog",children:[A.jsx(ga,{"data-testid":"memo-detail-title",children:"メモ詳細"}),A.jsx(pa,{children:d==="view"?A.jsxs(A.Fragment,{children:[A.jsx(st,{variant:"body1",sx:{whiteSpace:"pre-line",mb:2},children:m==null?void 0:m.text}),(m==null?void 0:m.comment)&&A.jsx(st,{variant:"body2",color:"text.secondary",sx:{mb:1},children:m.comment}),A.jsx(bh,{direction:"row",spacing:1,sx:{mb:1,flexWrap:"wrap"},children:Array.isArray(m==null?void 0:m.tags)&&m.tags.map((N,k)=>A.jsx(On,{label:N,size:"small",color:"secondary"},k))}),(m==null?void 0:m.page)&&A.jsxs(st,{variant:"caption",sx:{display:"block",mb:1},children:["p. ",m.page]}),(m==null?void 0:m.createdAt)&&A.jsx(st,{variant:"caption",color:"text.secondary",sx:{display:"block",mb:1},children:UV(m.createdAt)})]}):A.jsxs(vt,{component:"form",onSubmit:R,sx:{mt:1},children:[A.jsx(le,{label:"引用・抜き書き",fullWidth:!0,multiline:!0,rows:4,value:(m==null?void 0:m.text)||"",onChange:N=>v({...m,text:N.target.value}),margin:"normal",required:!0,inputProps:{"data-testid":"memo-text-input"}}),A.jsx(le,{label:"感想・コメント",fullWidth:!0,multiline:!0,rows:2,value:(m==null?void 0:m.comment)||"",onChange:N=>v({...m,comment:N.target.value}),margin:"normal",inputProps:{"data-testid":"memo-comment-input"}}),A.jsx(le,{label:"ページ番号",type:"number",value:(m==null?void 0:m.page)||"",onChange:N=>v({...m,page:N.target.value}),margin:"normal",sx:{mr:2},inputProps:{"data-testid":"memo-page-input"}}),A.jsx(es,{multiple:!0,freeSolo:!0,options:[],value:(m==null?void 0:m.tags)||[],getOptionLabel:N=>typeof N=="string"?N:N.inputValue||N.tag||"",onChange:(N,k)=>{const O=(k||[]).map(S=>{if(typeof S=="string")return S;if(S&&typeof S=="object"){if("inputValue"in S&&S.inputValue)return S.inputValue;if("tag"in S&&S.tag)return S.tag}return""}).filter(Boolean);v({...m,tags:O})},inputValue:b,onInputChange:(N,k)=>C(k),renderInput:N=>A.jsx(le,{...N,label:"タグ",margin:"normal",fullWidth:!0,placeholder:"例: 名言,感想,引用",inputProps:{...N.inputProps,"data-testid":"memo-tags-input"}})})]})}),A.jsx(ma,{children:d==="view"?A.jsxs(A.Fragment,{children:[A.jsx(qt,{onClick:()=>g("edit"),"data-testid":"memo-edit-button",children:"編集"}),A.jsx(qt,{onClick:()=>w(!0),color:"error","data-testid":"memo-delete-button",children:"削除"}),A.jsx(qt,{onClick:I,"data-testid":"memo-close-button",children:"閉じる"})]}):A.jsxs(A.Fragment,{children:[A.jsx(qt,{onClick:()=>g("view"),"data-testid":"memo-cancel-button",children:"キャンセル"}),A.jsx(qt,{onClick:R,variant:"contained","data-testid":"memo-update-button",children:"更新"})]})})]}),A.jsxs(da,{open:_,onClose:()=>w(!1),"data-testid":"memo-delete-dialog",children:[A.jsx(ga,{"data-testid":"memo-delete-confirm-title",children:"本当に削除しますか？"}),A.jsx(pa,{children:A.jsx(st,{children:"このメモを削除すると、元に戻すことはできません。"})}),A.jsxs(ma,{children:[A.jsx(qt,{onClick:()=>w(!1),"data-testid":"memo-delete-cancel-button",children:"キャンセル"}),A.jsx(qt,{onClick:()=>{M(m==null?void 0:m.id)},color:"error",variant:"contained","data-testid":"memo-delete-confirm-button",children:"削除"})]})]})]}):null},zV=({bookId:n,onMemoUpdated:t})=>{const{setGlobalError:e}=H.useContext(Lr),{memos:r,loading:i,deleteMemo:a}=E2(n),[s,l]=H.useState(null),[c,f]=H.useState(!1),[d,g]=H.useState(!1),[m,v]=H.useState(null),[_,w]=H.useState(!1),b=(k,O=!1)=>{l(k),w(O),f(!0)},C=k=>{const O=r.find(S=>S.id===k);O&&(v(O),g(!0))},I=async()=>{if(m)try{await a(m.id),g(!1),v(null)}catch(k){console.error("Error deleting memo:",k),e("メモの削除に失敗しました。")}},R=()=>{l(null),f(!1)},M=()=>{g(!1),v(null)},N=()=>{t&&t()};return i?A.jsx(st,{children:"メモを読み込み中..."}):r.length===0?A.jsx(st,{children:"まだメモはありません。"}):A.jsxs(A.Fragment,{children:[A.jsx(vt,{sx:{display:"flex",flexDirection:"column",gap:2},children:r.map(k=>A.jsx(jV,{memo:k,onEdit:(O,S)=>b(O,S),onDelete:C,onClick:O=>b(O,!1)},k.id))}),A.jsx(d4,{open:c,memo:s,bookId:n,onClose:R,onUpdate:N,onDelete:N,editMode:_}),A.jsxs(da,{open:d,onClose:M,"data-testid":"memo-delete-dialog",children:[A.jsx(ga,{"data-testid":"memo-delete-confirm-title",children:"本当に削除しますか？"}),A.jsx(pa,{children:A.jsx(st,{children:"このメモを削除すると、元に戻すことはできません。"})}),A.jsxs(ma,{children:[A.jsx(qt,{onClick:M,"data-testid":"memo-delete-cancel-button",children:"キャンセル"}),A.jsx(qt,{onClick:I,color:"error",variant:"contained","data-testid":"memo-delete-confirm-button",children:"削除"})]})]})]})},zS=({onTextDetected:n,disabled:t=!1})=>{const[e,r]=H.useState(!1),[i,a]=H.useState(!1),[s,l]=H.useState(0),c=()=>/iPad|iPhone|iPod/.test(navigator.userAgent),f=()=>/Safari/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent),d=()=>c()&&f();H.useEffect(()=>{const w=C=>{if(!i)return;const I=C.clipboardData.getData("text/plain"),R=Date.now();I&&R-s<3e4&&(console.log("[CameraPasteOCR] ペーストされたテキスト:",I),a(!1),n(I),r(!1))},b=C=>{i&&(C.ctrlKey||C.metaKey)&&C.key==="v"&&(console.log("[CameraPasteOCR] キーボードショートカット検出"),setTimeout(()=>{i&&(console.log("[CameraPasteOCR] ペーストイベントが検出されませんでした。手動ペーストを促します。"),_())},100))};return document.addEventListener("paste",w),document.addEventListener("keydown",b),()=>{document.removeEventListener("paste",w),document.removeEventListener("keydown",b)}},[i,s,n]);const g=()=>{d()?(r(!0),a(!0),l(Date.now())):alert("この機能は現在iPhone Safariでのみ利用可能です。")},m=()=>{r(!1),a(!1)},v=()=>{navigator.clipboard&&navigator.clipboard.readText?navigator.clipboard.readText().then(w=>{w?(console.log("[CameraPasteOCR] 手動ペーストされたテキスト:",w),n(w),r(!1)):console.log("[CameraPasteOCR] クリップボードが空です")}).catch(w=>{console.error("[CameraPasteOCR] クリップボード読み取りエラー:",w),console.log("[CameraPasteOCR] 手動入力モードに切り替え")}):console.log("[CameraPasteOCR] navigator.clipboardが利用できません")},_=()=>{const w=document.createElement("textarea");w.style.position="fixed",w.style.left="-9999px",w.style.top="-9999px",w.style.opacity="0",w.setAttribute("data-testid","temp-paste-textarea"),document.body.appendChild(w),w.focus();const b=prompt("コピーしたテキストをここに貼り付けてください（Ctrl+V または Cmd+V）:");b&&b.trim()&&(console.log("[CameraPasteOCR] 手動入力されたテキスト:",b),n(b.trim()),r(!1)),document.body.removeChild(w)};return A.jsxs(A.Fragment,{children:[A.jsx(qt,{variant:"outlined",startIcon:A.jsx(ly,{}),onClick:g,disabled:t,fullWidth:!0,sx:{mt:1,mb:1,height:{xs:"40px",sm:"48px"},fontSize:{xs:"0.8rem",sm:"0.9rem"}},"data-testid":"camera-paste-ocr-button",children:d()?"カメラでスキャン（コピーしてペースト）":"カメラでスキャン"}),A.jsxs(da,{open:e,onClose:m,maxWidth:"sm",fullWidth:!0,"data-testid":"camera-instructions-dialog",children:[A.jsx(ga,{children:A.jsxs(vt,{display:"flex",alignItems:"center",gap:1,children:[A.jsx(ly,{}),"カメラでテキストスキャン"]})}),A.jsxs(pa,{children:[A.jsx(st,{variant:"body1",paragraph:!0,children:"以下の手順でテキストをスキャンしてください："}),A.jsxs(vt,{component:"ol",sx:{pl:2},children:[A.jsx(st,{component:"li",variant:"body1",paragraph:!0,children:"カメラアプリを手動で起動してください"}),A.jsx(st,{component:"li",variant:"body1",paragraph:!0,children:"スキャンしたいテキストにカメラを向けてください"}),A.jsx(st,{component:"li",variant:"body1",paragraph:!0,children:"テキストが認識されたら、テキストをタップして選択してください"}),A.jsx(st,{component:"li",variant:"body1",paragraph:!0,children:"「コピー」をタップしてテキストをコピーしてください"}),A.jsx(st,{component:"li",variant:"body1",paragraph:!0,children:"この画面に戻って、下の「ペースト」ボタンをタップしてください"})]}),A.jsx(st,{variant:"body2",color:"text.secondary",sx:{mt:2},children:"💡 ヒント：iPhoneのカメラアプリは高精度なOCR機能を搭載しています"}),A.jsx(st,{variant:"body2",color:"text.secondary",children:"⏱️ 30秒以内にペーストしてください"})]}),A.jsxs(ma,{children:[A.jsx(qt,{onClick:m,children:"キャンセル"}),A.jsx(qt,{onClick:v,startIcon:A.jsx(tD,{}),variant:"contained",color:"primary","data-testid":"manual-paste-button",children:"クリップボードからペースト"})]})]})]})},HV=({bookId:n,bookTags:t=[],onMemoAdded:e,onClose:r})=>{const{user:i}=qn(),{setGlobalError:a}=H.useContext(Lr),{addMemo:s}=E2(n),[l,c]=H.useState(""),[f,d]=H.useState(""),[g,m]=H.useState(""),[v,_]=H.useState([]),[w,b]=H.useState(""),{tagOptions:C,fetchTagHistory:I,saveTagsToHistory:R}=os("memo",i);H.useEffect(()=>{I()},[I]),H.useEffect(()=>{t&&t.length>0&&_(t)},[t]);const M=async S=>{if(S.preventDefault(),!l.trim())return;console.log("MemoAdd - handleSubmit開始:",{text:l,comment:f,page:g,tags:v});let D=v;w&&!v.includes(w)&&(D=[...v,w]),console.log("MemoAdd - 保存するタグ:",D);try{console.log("MemoAdd - addMemo呼び出し前");const V=await s({text:l,comment:f,page:Number(g)||null,tags:D});console.log("MemoAdd - addMemo呼び出し完了, memoId:",V),await R(D),console.log("MemoAdd - フォームリセット前"),c(""),d(""),m(""),_([]),b(""),console.log("MemoAdd - フォームリセット完了"),e&&(console.log("MemoAdd - onMemoAddedコールバック呼び出し"),e())}catch(V){console.error("Error adding memo: ",V),a("メモの追加に失敗しました。")}},N=()=>{r&&r()},k=S=>{console.log("[MemoAdd] OCRで検出されたテキスト:",S),c(S)};return r?A.jsxs(A.Fragment,{children:[A.jsx(ga,{"data-testid":"memo-add-dialog-title",children:"メモを追加"}),A.jsx(pa,{children:A.jsxs(vt,{component:"form",onSubmit:M,sx:{mt:1},"data-testid":"memo-add-form",children:[A.jsx(le,{label:"引用・抜き書き",fullWidth:!0,multiline:!0,rows:3,value:l,onChange:S=>c(S.target.value),required:!0,inputProps:{"data-testid":"memo-text-input"}}),A.jsx(zS,{onTextDetected:k}),A.jsx(le,{label:"感想・コメント",fullWidth:!0,multiline:!0,rows:2,value:f,onChange:S=>d(S.target.value),inputProps:{"data-testid":"memo-comment-input"}}),A.jsx(le,{label:"ページ番号",type:"number",value:g,onChange:S=>m(S.target.value),sx:{mr:2,width:{xs:"100%",sm:"auto"}},inputProps:{"data-testid":"memo-page-input"}}),A.jsx(es,{multiple:!0,freeSolo:!0,options:C,value:v,getOptionLabel:S=>typeof S=="string"?S:S.inputValue||S.tag||"",onChange:async(S,D)=>{const V=(D||[]).map(B=>{if(typeof B=="string")return B;if(B&&typeof B=="object"){if("inputValue"in B&&B.inputValue)return B.inputValue;if("tag"in B&&B.tag)return B.tag}return""}).filter(Boolean);_(V),await R(V)},inputValue:w,onInputChange:(S,D)=>b(D),renderInput:S=>A.jsx(le,{...S,label:"タグ",fullWidth:!0,placeholder:"例: 名言,感想,引用",inputProps:{...S.inputProps,"data-testid":"memo-tags-input"}})})]})}),A.jsxs(ma,{children:[A.jsx(qt,{onClick:N,"data-testid":"memo-add-cancel",children:"キャンセル"}),A.jsx(qt,{onClick:M,variant:"contained","data-testid":"memo-add-submit",children:"メモを追加"})]})]}):A.jsxs(vt,{component:"form",onSubmit:M,sx:{mt:1},"data-testid":"memo-add-form",children:[A.jsx(le,{label:"引用・抜き書き",fullWidth:!0,multiline:!0,rows:3,value:l,onChange:S=>c(S.target.value),required:!0,inputProps:{"data-testid":"memo-text-input"}}),A.jsx(zS,{onTextDetected:k}),A.jsx(le,{label:"感想・コメント",fullWidth:!0,multiline:!0,rows:2,value:f,onChange:S=>d(S.target.value),inputProps:{"data-testid":"memo-comment-input"}}),A.jsx(le,{label:"ページ番号",type:"number",value:g,onChange:S=>m(S.target.value),sx:{mr:2,width:{xs:"100%",sm:"auto"}},inputProps:{"data-testid":"memo-page-input"}}),A.jsx(es,{multiple:!0,freeSolo:!0,options:C,value:v,getOptionLabel:S=>typeof S=="string"?S:S.inputValue||S.tag||"",onChange:async(S,D)=>{const V=(D||[]).map(B=>{if(typeof B=="string")return B;if(B&&typeof B=="object"){if("inputValue"in B&&B.inputValue)return B.inputValue;if("tag"in B&&B.tag)return B.tag}return""}).filter(Boolean);_(V),await R(V)},inputValue:w,onInputChange:(S,D)=>b(D),renderInput:S=>A.jsx(le,{...S,label:"タグ",fullWidth:!0,placeholder:"例: 名言,感想,引用",inputProps:{...S.inputProps,"data-testid":"memo-tags-input"}})}),A.jsx(qt,{type:"submit",variant:"contained",sx:{mt:2,mb:{xs:8,sm:2},width:{xs:"100%",sm:"auto"}},"data-testid":"memo-add-submit",children:"メモを追加"})]})},GV=({book:n,bookId:t,onStatusChange:e})=>{const r=H.useContext(Lr),i=(r==null?void 0:r.setGlobalError)||(()=>{}),[a,s]=gx.useState(!1);if(!n)return null;const l=n.status||"reading",c=async()=>{if(!n)return;s(!0);const f=n.status==="reading"?"finished":"reading",d=ss(de,"books",t);try{await zg(d,{status:f,updatedAt:fa()}),e(f)}catch(g){console.error("Error updating status:",g),i("ステータスの更新に失敗しました。")}finally{s(!1)}};return A.jsxs(vt,{"data-testid":"book-info",children:[A.jsxs(vt,{sx:{display:"flex",justifyContent:"center",alignItems:"center",gap:2,mb:2},children:[A.jsx(On,{label:l==="reading"?"読書中":"読了",color:l==="reading"?"primary":"success","data-testid":"book-status-chip"}),A.jsx(qt,{onClick:c,variant:"outlined",disabled:a,"data-testid":"book-status-change-button",children:a?"更新中...":l==="reading"?"読了にする":"読書中にする"})]}),A.jsx(vt,{sx:{textAlign:"left",mb:2},"data-testid":"book-cover-section",children:n.coverImageUrl?A.jsx("img",{src:n.coverImageUrl,alt:`${n.title}の表紙`,style:{maxHeight:"250px",width:"auto"},"data-testid":"book-cover-image"}):A.jsx(vt,{sx:{border:"1px dashed grey",height:250,width:167,display:"flex",alignItems:"center",justifyContent:"center",mx:"auto"},"data-testid":"book-cover-placeholder",children:A.jsx(st,{variant:"body1",color:"text.secondary",children:"書影なし"})})}),A.jsxs(vt,{sx:{mb:2},"data-testid":"book-details",children:[A.jsx(st,{variant:"h4",gutterBottom:!0,sx:{wordBreak:"break-word"},"data-testid":"book-title",children:n.title}),A.jsx(st,{variant:"h6",color:"text.secondary",gutterBottom:!0,"data-testid":"book-author",children:n.author}),n.publisher&&A.jsxs(st,{variant:"body1",color:"text.secondary",gutterBottom:!0,"data-testid":"book-publisher",children:["出版社: ",n.publisher]}),n.publishedDate&&A.jsxs(st,{variant:"body1",color:"text.secondary","data-testid":"book-published-date",children:["出版日: ",n.publishedDate]})]})]})},$V=({book:n,bookId:t,onTagsChange:e})=>{const{user:r}=qn(),i=H.useContext(Lr),a=(i==null?void 0:i.setGlobalError)||(()=>{}),[s,l]=H.useState(!1),[c,f]=H.useState([]),{tagOptions:d,fetchTagHistory:g,saveTagsToHistory:m}=os("book",r);H.useEffect(()=>{g()},[g]);const v=()=>{f(n.tags||[]),l(!0)},_=async()=>{if(n)try{const w=ss(de,"books",t);await zg(w,{tags:c,updatedAt:fa()}),await m(c),e(c),l(!1)}catch(w){console.error("Error updating tags:",w),a("タグの更新に失敗しました。")}};return n?A.jsxs(vt,{sx:{mb:2},children:[A.jsxs(vt,{sx:{display:"flex",alignItems:"center",gap:1,mb:1},children:[A.jsx(st,{variant:"h6",children:"タグ:"}),A.jsx(Xr,{onClick:v,size:"small","data-testid":"edit-tags-button",children:A.jsx(uy,{})})]}),A.jsx(vt,{sx:{display:"flex",flexWrap:"wrap",gap:1},children:(n.tags||[]).map((w,b)=>A.jsx(On,{label:w,size:"small"},b))}),A.jsxs(da,{open:s,onClose:()=>l(!1),maxWidth:"sm",fullWidth:!0,children:[A.jsx(ga,{children:"タグを編集"}),A.jsx(pa,{children:A.jsx(es,{multiple:!0,freeSolo:!0,options:d,value:c,onChange:(w,b)=>f(b),renderInput:w=>A.jsx(le,{...w,label:"タグ",placeholder:"タグを入力または選択",fullWidth:!0,margin:"normal"}),renderTags:(w,b)=>w.map((C,I)=>H.createElement(On,{...b({index:I}),key:I,label:C,size:"small"}))})}),A.jsxs(ma,{children:[A.jsx(qt,{onClick:()=>l(!1),children:"キャンセル"}),A.jsx(qt,{onClick:_,variant:"contained","data-testid":"save-tags-button",children:"保存"})]})]})]}):null},qV=n=>{const{user:t}=qn(),e=H.useContext(Lr),r=(e==null?void 0:e.setGlobalError)||(()=>{}),[i,a]=H.useState(null),[s,l]=H.useState(!0),[c,f]=H.useState(null),d=H.useCallback(async()=>{if(!t||!n){l(!1);return}try{l(!0),f(null);const _=ss(de,"books",n),w=await k7(_);w.exists()&&w.data().userId===t.uid?a({id:w.id,...w.data()}):(console.error("No such document or access denied!"),r("書籍が見つからないか、アクセス権限がありません。"),a(null),f("書籍が見つからないか、アクセス権限がありません。"))}catch(_){console.error("Error fetching document:",_),r("書籍情報の取得に失敗しました。"),f("書籍情報の取得に失敗しました。")}finally{l(!1)}},[n,t]),g=H.useCallback(async _=>{if(!t||!n)throw new Error("ユーザーまたは書籍IDが無効です。");try{const w=ss(de,"books",n);return await zg(w,{..._,updatedAt:fa()}),a(b=>({...b,..._})),!0}catch(w){throw console.error("Error updating book:",w),r("書籍情報の更新に失敗しました。"),w}},[n,t]),m=H.useCallback(async _=>await g({status:_}),[g]),v=H.useCallback(async _=>await g({tags:_}),[g]);return H.useEffect(()=>{d()},[d]),{book:i,loading:s,error:c,fetchBook:d,updateBook:g,updateBookStatus:m,updateBookTags:v}},XV=()=>{const{id:n}=AD(),{book:t,loading:e,error:r,updateBookStatus:i,updateBookTags:a}=qV(n),[s,l]=H.useState(0),[c,f]=H.useState(!1),d=b=>{i(b)},g=b=>{a(b)},m=()=>{console.log("BookDetail - handleMemoAdded: MemoListを再レンダリング"),l(b=>b+1),f(!1)},v=()=>{console.log("BookDetail - handleMemoUpdated: MemoListを再レンダリング"),l(b=>b+1)},_=()=>{f(!0)},w=()=>{f(!1)};return e?A.jsx("div",{"data-testid":"book-detail-loading",children:"Loading..."}):r?A.jsxs("div",{"data-testid":"book-detail-error",children:["エラーが発生しました: ",r]}):t?A.jsxs(vt,{sx:{maxWidth:800,mx:"auto",mt:{xs:2,sm:4},pb:"80px",px:{xs:2,sm:0}},"data-testid":"book-detail",children:[A.jsxs(Sc,{sx:{p:{xs:2,sm:3}},children:[A.jsx(GV,{book:t,bookId:n,onStatusChange:d}),A.jsx($V,{book:t,bookId:n,onTagsChange:g}),A.jsx(d1,{sx:{my:{xs:1,sm:2}}}),A.jsx(st,{variant:"h5",gutterBottom:!0,sx:{mb:{xs:1,sm:2}},"data-testid":"memo-list-title",children:"メモ一覧"}),A.jsx(zV,{bookId:t.id,onMemoUpdated:v},s)]}),A.jsx(eD,{color:"primary","aria-label":"メモを追加",sx:{position:"fixed",bottom:{xs:72,sm:16},right:{xs:16,sm:16}},onClick:_,"data-testid":"memo-add-fab",children:A.jsx(nD,{})}),A.jsx(da,{open:c,onClose:w,maxWidth:"sm",fullWidth:!0,"data-testid":"memo-add-dialog",children:A.jsx(HV,{bookId:t.id,bookTags:t.tags||[],onMemoAdded:m,onClose:w})})]}):A.jsx("div",{"data-testid":"book-detail-not-found",children:"本が見つかりません。"})};function HS({children:n,value:t,index:e,...r}){return A.jsx("div",{role:"tabpanel",hidden:t!==e,id:`tabpanel-${e}`,"aria-labelledby":`tab-${e}`,...r,children:t===e&&A.jsx(vt,{sx:{p:3},children:n})})}const WV=n=>{const[t,e]=H.useState({}),[r,i]=H.useState(!1),[a,s]=H.useState(null),l=H.useCallback(async()=>{if(n!=null&&n.uid)try{i(!0),s(null),console.log("useTagStats: タグ統計取得開始, userId:",n.uid);const[g,m]=await Promise.all([vn(on(br(de,"books"),He("userId","==",n.uid))),vn(on(so(de,"memos"),He("userId","==",n.uid)))]);console.log("useTagStats: データ取得完了, 本:",g.size,"メモ:",m.size);const v={};g.forEach(_=>{const w=_.data();console.log("useTagStats: 本データ:",{id:_.id,title:w.title,tags:w.tags}),w.tags&&Array.isArray(w.tags)&&w.tags.forEach(b=>{var I,R;v[b]||(v[b]={bookCount:0,memoCount:0,lastUsed:null}),v[b].bookCount++;const C=((R=(I=w.updatedAt)==null?void 0:I.toDate)==null?void 0:R.call(I))||new Date;(!v[b].lastUsed||C>v[b].lastUsed)&&(v[b].lastUsed=C)})}),console.log("useTagStats: 本のタグ集計完了"),m.forEach(_=>{var b,C;const w=_.data();console.log("useTagStats: メモデータ:",{id:_.id,bookId:(b=_.ref.parent.parent)==null?void 0:b.id,tags:w.tags,text:((C=w.text)==null?void 0:C.substring(0,30))+"..."}),w.tags&&Array.isArray(w.tags)&&w.tags.forEach(I=>{var M,N;v[I]||(v[I]={bookCount:0,memoCount:0,lastUsed:null}),v[I].memoCount++;const R=((N=(M=w.updatedAt)==null?void 0:M.toDate)==null?void 0:N.call(M))||new Date;(!v[I].lastUsed||R>v[I].lastUsed)&&(v[I].lastUsed=R)})}),console.log("useTagStats: メモのタグ集計完了, 最終統計:",v),e(v),console.log("useTagStats: タグ統計設定完了")}catch(g){console.error("タグ統計の取得に失敗しました:",g),s(g)}finally{i(!1)}},[n==null?void 0:n.uid]),c=H.useCallback((g="count",m="desc")=>Object.entries(t).map(([_,w])=>({tag:_,...w,totalCount:w.bookCount+w.memoCount,type:w.bookCount>0&&w.memoCount>0?"both":w.bookCount>0?"book":"memo"})).sort((_,w)=>{let b=0;switch(g){case"count":b=w.totalCount-_.totalCount;break;case"name":b=_.tag.localeCompare(w.tag,"ja");break;case"lastUsed":b=(w.lastUsed||0)-(_.lastUsed||0);break;default:b=w.totalCount-_.totalCount}return m==="asc"?-b:b}),[t]),f=H.useCallback(g=>t[g]||null,[t]),d=H.useCallback(()=>{e({}),s(null)},[]);return H.useEffect(()=>{n!=null&&n.uid?l():d()},[n==null?void 0:n.uid,l,d]),{tagStats:t,loading:r,error:a,fetchTagStats:l,getSortedTagStats:c,getTagStat:f,clearStats:d}};function Zs(n){var t,e;if(n==null)return"";try{return(((e=(t=String(n)).normalize)==null?void 0:e.call(t,"NFKC"))??String(n)).trim().replace(/\s+/g," ").toLowerCase()}catch{return String(n).trim().toLowerCase()}}function YV(){const{user:n}=qn(),t=H.useContext(Lr),e=(t==null?void 0:t.setGlobalError)||(()=>{}),[r,i]=H.useState(!1),a=async(d,g)=>{for(let v=0;v<d.length;v+=450){const _=d.slice(v,v+450),w=F7(de);_.forEach(b=>g(w,b)),await w.commit()}},s=H.useCallback(async(d,g)=>{if(!(n!=null&&n.uid))throw new Error("ユーザーが未認証です。");const m=Zs(d),v=Zs(g);if(!m||!v)throw new Error("タグ名が不正です。");if(m===v)return{booksUpdated:0,memosUpdated:0};i(!0);try{const _=on(br(de,"books"),He("userId","==",n.uid)),w=await vn(_),b=[];w.forEach(M=>{const N=M.data(),k=Array.isArray(N.tags)?N.tags:[];if(k.includes(m)){const O=Array.from(new Set(k.map(S=>S===m?v:S)));b.push({ref:M.ref,tags:O})}});const C=on(so(de,"memos"),He("userId","==",n.uid)),I=await vn(C),R=[];return I.forEach(M=>{const N=M.data(),k=Array.isArray(N.tags)?N.tags:[];if(k.includes(m)){const O=Array.from(new Set(k.map(S=>S===m?v:S)));R.push({ref:M.ref,tags:O})}}),await a(b,(M,N)=>{M.update(N.ref,{tags:N.tags})}),await a(R,(M,N)=>{M.update(N.ref,{tags:N.tags})}),{booksUpdated:b.length,memosUpdated:R.length}}catch(_){throw console.error("タグ名変更に失敗:",_),e("タグ名の変更に失敗しました。"),_}finally{i(!1)}},[n==null?void 0:n.uid]),l=H.useCallback(async d=>{if(!(n!=null&&n.uid))throw new Error("ユーザーが未認証です。");const g=Zs(d);if(!g)throw new Error("タグ名が不正です。");i(!0);try{const m=on(br(de,"books"),He("userId","==",n.uid)),v=await vn(m),_=[];v.forEach(I=>{const R=I.data(),M=Array.isArray(R.tags)?R.tags:[];if(M.includes(g)){const N=M.filter(k=>k!==g);_.push({ref:I.ref,tags:N})}});const w=on(so(de,"memos"),He("userId","==",n.uid)),b=await vn(w),C=[];return b.forEach(I=>{const R=I.data(),M=Array.isArray(R.tags)?R.tags:[];if(M.includes(g)){const N=M.filter(k=>k!==g);C.push({ref:I.ref,tags:N})}}),await a(_,(I,R)=>{I.update(R.ref,{tags:R.tags})}),await a(C,(I,R)=>{I.update(R.ref,{tags:R.tags})}),{booksUpdated:_.length,memosUpdated:C.length}}catch(m){throw console.error("タグ削除に失敗:",m),e("タグの削除に失敗しました。"),m}finally{i(!1)}},[n==null?void 0:n.uid]),c=H.useCallback(async d=>{if(!(n!=null&&n.uid))throw new Error("ユーザーが未認証です。");const g=new Set((Array.isArray(d)?d:String(d||"").split(",")).map(m=>Zs(m)).filter(m=>!!m));if(g.size===0)throw new Error("削除対象のタグがありません。");i(!0);try{const m=on(br(de,"books"),He("userId","==",n.uid)),v=await vn(m),_=[];v.forEach(I=>{const R=I.data(),M=Array.isArray(R.tags)?R.tags:[],N=M.filter(k=>!g.has(Zs(k)));N.length!==M.length&&_.push({ref:I.ref,tags:N})});const w=on(so(de,"memos"),He("userId","==",n.uid)),b=await vn(w),C=[];return b.forEach(I=>{const R=I.data(),M=Array.isArray(R.tags)?R.tags:[],N=M.filter(k=>!g.has(Zs(k)));N.length!==M.length&&C.push({ref:I.ref,tags:N})}),await a(_,(I,R)=>{I.update(R.ref,{tags:R.tags})}),await a(C,(I,R)=>{I.update(R.ref,{tags:R.tags})}),{booksUpdated:_.length,memosUpdated:C.length}}catch(m){throw console.error("タグ一括削除に失敗:",m),e("タグの一括削除に失敗しました。"),m}finally{i(!1)}},[n==null?void 0:n.uid]),f=H.useCallback(async(d,g)=>{if(!(n!=null&&n.uid))throw new Error("ユーザーが未認証です。");const m=Zs(g),v=Array.from(new Set(String(d||"").split(",").map(_=>Zs(_)).filter(_=>!!_)));if(!m||v.length===0)throw new Error("統合先と別名を入力してください。");if(v.includes(m))throw new Error("統合先と別名が同一です。");i(!0);try{const _=on(br(de,"books"),He("userId","==",n.uid)),w=await vn(_),b=[];w.forEach(M=>{const N=M.data(),k=Array.isArray(N.tags)?N.tags:[];if(k.some(S=>v.includes(S))){const S=k.filter(V=>!v.includes(V)),D=Array.from(new Set([...S,m]));D.join("|")!==k.join("|")&&b.push({ref:M.ref,tags:D})}});const C=on(so(de,"memos"),He("userId","==",n.uid)),I=await vn(C),R=[];return I.forEach(M=>{const N=M.data(),k=Array.isArray(N.tags)?N.tags:[];if(k.some(S=>v.includes(S))){const S=k.filter(V=>!v.includes(V)),D=Array.from(new Set([...S,m]));D.join("|")!==k.join("|")&&R.push({ref:M.ref,tags:D})}}),await a(b,(M,N)=>{M.update(N.ref,{tags:N.tags})}),await a(R,(M,N)=>{M.update(N.ref,{tags:N.tags})}),{booksUpdated:b.length,memosUpdated:R.length}}catch(_){throw console.error("タグ統合に失敗:",_),e("タグの統合に失敗しました。"),_}finally{i(!1)}},[n==null?void 0:n.uid]);return{loading:r,renameTag:s,deleteTag:l,deleteTags:c,mergeTags:f}}function KV({open:n,tag:t,onClose:e,onRename:r,onDelete:i,onMerge:a,busy:s=!1}){const[l,c]=H.useState(t||""),[f,d]=H.useState(""),[g,m]=H.useState(""),v=()=>{c(t||""),e==null||e()};return A.jsxs(da,{open:n,onClose:v,maxWidth:"xs",fullWidth:!0,children:[A.jsx(ga,{children:"タグを編集"}),A.jsxs(pa,{children:[A.jsx(st,{variant:"body2",color:"text.secondary",sx:{mb:1},children:"タグ名の変更またはタグの削除を行えます。"}),A.jsx(le,{autoFocus:!0,fullWidth:!0,label:"新しいタグ名",value:l,onChange:_=>c(_.target.value),disabled:s}),A.jsxs(vt,{sx:{mt:2},children:[A.jsx(st,{variant:"body2",color:"text.secondary",sx:{mb:1},children:"類似タグの統合（カンマ区切りで別名を指定）"}),A.jsx(le,{fullWidth:!0,label:"統合先（正規化タグ名）",value:f,onChange:_=>d(_.target.value),disabled:s}),A.jsx(le,{fullWidth:!0,label:"別名（カンマ区切り）",value:g,onChange:_=>m(_.target.value),disabled:s,sx:{mt:1}})]})]}),A.jsxs(ma,{children:[A.jsx(qt,{onClick:()=>i==null?void 0:i(t),color:"error",disabled:s,"data-testid":"tag-delete-button",children:"削除"}),A.jsx(qt,{onClick:v,disabled:s,children:"キャンセル"}),A.jsx(qt,{onClick:()=>r==null?void 0:r(t,l),variant:"contained",disabled:s,"data-testid":"tag-rename-button",children:"変更"}),A.jsx(qt,{onClick:()=>a==null?void 0:a(g,f),variant:"outlined",disabled:s,"data-testid":"tag-merge-button",children:"統合"})]})]})}function ZV({open:n,onClose:t,onConfirm:e,busy:r=!1}){const{user:i}=qn(),{tagOptions:a,fetchTagHistory:s}=os("book",i),{tagOptions:l,fetchTagHistory:c}=os("memo",i),[f,d]=H.useState([]),[g,m]=H.useState("");H.useEffect(()=>{n&&i&&(s(),c())},[n,i,s,c]),H.useEffect(()=>{n||(d([]),m(""))},[n]);const v=H.useMemo(()=>{const _=new Set([...a||[],...l||[]]);return Array.from(_).sort((w,b)=>w.localeCompare(b,"ja"))},[a,l]);return A.jsxs(da,{open:n,onClose:t,maxWidth:"sm",fullWidth:!0,children:[A.jsx(ga,{children:"タグを一括削除"}),A.jsxs(pa,{children:[A.jsx(st,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"削除するタグを選択または入力してください。複数選択できます。"}),A.jsx(es,{multiple:!0,freeSolo:!0,options:v,value:f,inputValue:g,onInputChange:(_,w)=>m(w),onChange:(_,w)=>d(w),renderTags:(_,w)=>_.map((b,C)=>{const{key:I,...R}=w({index:C});return A.jsx(On,{label:b,...R,color:"error",variant:"outlined"},I)}),renderInput:_=>A.jsx(le,{..._,label:"削除タグ",placeholder:"タグ名を入力...",fullWidth:!0,"data-testid":"bulk-delete-tags-input"}),"data-testid":"bulk-delete-tags-autocomplete"}),!!f.length&&A.jsx(vt,{sx:{mt:1},children:A.jsxs(st,{variant:"caption",color:"text.secondary",children:["削除対象: ",f.join(", ")]})})]}),A.jsxs(ma,{children:[A.jsx(qt,{onClick:t,disabled:r,children:"キャンセル"}),A.jsx(qt,{onClick:()=>e==null?void 0:e(f),color:"error",variant:"contained",disabled:r||f.length===0,"data-testid":"bulk-delete-confirm",children:"削除"})]})]})}function QV({open:n,onClose:t,onConfirm:e,busy:r=!1}){const{user:i}=qn(),{tagOptions:a,fetchTagHistory:s}=os("book",i),{tagOptions:l,fetchTagHistory:c}=os("memo",i),[f,d]=H.useState(""),[g,m]=H.useState([]),[v,_]=H.useState("");H.useEffect(()=>{n&&i&&(s(),c())},[n,i,s,c]),H.useEffect(()=>{n||(d(""),m([]),_(""))},[n]);const w=H.useMemo(()=>{const C=new Set([...a||[],...l||[]]);return Array.from(C).sort((I,R)=>I.localeCompare(R,"ja"))},[a,l]),b=f.trim().length>0&&g.length>0;return A.jsxs(da,{open:n,onClose:t,maxWidth:"sm",fullWidth:!0,children:[A.jsx(ga,{children:"タグを一括統合"}),A.jsxs(pa,{children:[A.jsx(st,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"複数の別名タグを正規タグへ統合します。正規タグと、統合したい別名タグを選択してください。"}),A.jsxs(vt,{sx:{mb:2},children:[A.jsx(st,{variant:"subtitle2",sx:{mb:1},children:"正規タグ"}),A.jsx(es,{freeSolo:!0,options:w,value:f,inputValue:v,onInputChange:(C,I)=>_(I),onChange:(C,I)=>d(I||v),renderInput:C=>A.jsx(le,{...C,label:"正規タグ",placeholder:"統合先のタグ名",fullWidth:!0}),"data-testid":"bulk-merge-canonical"})]}),A.jsxs(vt,{children:[A.jsx(st,{variant:"subtitle2",sx:{mb:1},children:"別名タグ（複数可）"}),A.jsx(es,{multiple:!0,freeSolo:!0,options:w,value:g,onChange:(C,I)=>m(I),renderTags:(C,I)=>C.map((R,M)=>{const{key:N,...k}=I({index:M});return A.jsx(On,{label:R,...k,color:"primary",variant:"outlined"},N)}),renderInput:C=>A.jsx(le,{...C,label:"別名タグ",placeholder:"統合したい別名を入力...",fullWidth:!0}),"data-testid":"bulk-merge-aliases"})]})]}),A.jsxs(ma,{children:[A.jsx(qt,{onClick:t,disabled:r,children:"キャンセル"}),A.jsx(qt,{onClick:()=>e==null?void 0:e(g,f||v),variant:"contained",disabled:r||!b,"data-testid":"bulk-merge-confirm",children:"統合"})]})]})}function JV({onTagClick:n}){const{user:t}=qn(),{tagStats:e,loading:r,error:i,getSortedTagStats:a,fetchTagStats:s}=WV(t),{loading:l,renameTag:c,deleteTag:f,deleteTags:d,mergeTags:g}=YV(),[m,v]=H.useState("count"),[_,w]=H.useState("desc"),[b,C]=H.useState(!1),[I,R]=H.useState(""),[M,N]=H.useState(!1),[k,O]=H.useState(!1),S=a(m,_),D=Object.keys(e).length,V=Object.values(e).reduce((F,j)=>F+j.bookCount,0),B=Object.values(e).reduce((F,j)=>F+j.memoCount,0);return r?A.jsx(vt,{sx:{display:"flex",justifyContent:"center",p:3},children:A.jsx(px,{})}):i?A.jsx(vt,{sx:{p:2},children:A.jsxs(oo,{severity:"error",children:["タグ統計の取得に失敗しました: ",i.message]})}):D===0?A.jsx(vt,{sx:{p:3},children:A.jsx(oo,{severity:"info",children:"タグがまだ登録されていません。本にタグを追加すると、ここに統計が表示されます。"})}):A.jsxs(vt,{children:[A.jsxs(Sc,{sx:{p:2,mb:3},children:[A.jsx(st,{variant:"h6",gutterBottom:!0,children:"タグ統計サマリー"}),A.jsxs(te,{container:!0,spacing:2,children:[A.jsx(te,{item:!0,xs:4,children:A.jsxs(vt,{sx:{textAlign:"center"},children:[A.jsx(st,{variant:"h4",color:"primary",children:D}),A.jsx(st,{variant:"body2",color:"text.secondary",children:"総タグ数"})]})}),A.jsx(te,{item:!0,xs:4,children:A.jsxs(vt,{sx:{textAlign:"center"},children:[A.jsx(st,{variant:"h4",color:"secondary",children:V}),A.jsx(st,{variant:"body2",color:"text.secondary",children:"本の総件数"})]})}),A.jsx(te,{item:!0,xs:4,children:A.jsxs(vt,{sx:{textAlign:"center"},children:[A.jsx(st,{variant:"h4",color:"info.main",children:B}),A.jsx(st,{variant:"body2",color:"text.secondary",children:"メモの総件数"})]})})]})]}),A.jsxs(vt,{sx:{mb:2,display:"flex",gap:2,alignItems:"center",flexWrap:"wrap"},children:[A.jsxs(st,{variant:"h6",children:["タグ一覧 (",D,"件)"]}),A.jsx(On,{label:"一括削除",size:"small",color:"error",variant:"outlined",onClick:()=>N(!0),"data-testid":"open-bulk-delete"}),A.jsx(On,{label:"一括統合",size:"small",color:"primary",variant:"outlined",onClick:()=>O(!0),"data-testid":"open-bulk-merge"}),A.jsxs(Xu,{size:"small",sx:{minWidth:120},children:[A.jsx(Wu,{children:"ソート基準"}),A.jsxs(Yu,{value:m,label:"ソート基準",onChange:F=>v(F.target.value),children:[A.jsx(fr,{value:"count",children:"使用頻度"}),A.jsx(fr,{value:"name",children:"名前順"}),A.jsx(fr,{value:"lastUsed",children:"最終使用日"})]})]}),A.jsxs(Xu,{size:"small",sx:{minWidth:100},children:[A.jsx(Wu,{children:"順序"}),A.jsxs(Yu,{value:_,label:"順序",onChange:F=>w(F.target.value),children:[A.jsx(fr,{value:"desc",children:"降順"}),A.jsx(fr,{value:"asc",children:"昇順"})]})]})]}),A.jsx(te,{container:!0,spacing:2,children:S.map(F=>A.jsx(te,{item:!0,xs:12,sm:6,md:4,children:A.jsx(pn,{"data-testid":`tag-stat-card-${F.tag}`,onClick:()=>n==null?void 0:n(F.tag),sx:{cursor:"pointer"},children:A.jsxs(mn,{children:[A.jsxs(vt,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",mb:1},children:[A.jsx(st,{variant:"h6",component:"div",sx:{wordBreak:"break-all"},children:F.tag}),A.jsx(On,{label:F.type,size:"small",color:F.type==="both"?"primary":F.type==="book"?"secondary":"info",variant:"outlined"})]}),A.jsxs(vt,{sx:{display:"flex",justifyContent:"space-between",mb:1},children:[A.jsxs(st,{variant:"body2",color:"text.secondary",children:["本: ",F.bookCount,"件"]}),A.jsxs(st,{variant:"body2",color:"text.secondary",children:["メモ: ",F.memoCount,"件"]})]}),A.jsxs(vt,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[A.jsxs(st,{variant:"body2",color:"primary",sx:{fontWeight:"bold"},children:["合計: ",F.totalCount,"件"]}),A.jsx(vt,{sx:{display:"flex",gap:1},children:A.jsx(On,{size:"small",label:"編集",onClick:j=>{j.stopPropagation(),R(F.tag),C(!0)},clickable:!0,color:"primary",variant:"outlined","data-testid":`tag-edit-${F.tag}`})})]}),F.lastUsed&&A.jsxs(st,{variant:"caption",color:"text.secondary",sx:{display:"block",mt:1},children:["最終使用: ",F.lastUsed.toLocaleDateString("ja-JP")]})]})})},F.tag))}),A.jsx(KV,{open:b,tag:I,busy:l,onClose:()=>C(!1),onRename:async(F,j)=>{await c(F,j),await s(),C(!1)},onDelete:async F=>{await f(F),await s(),C(!1)},onMerge:async(F,j)=>{await g(F,j),await s(),C(!1)}}),A.jsx(ZV,{open:M,onClose:()=>N(!1),busy:l,onConfirm:async F=>{!F||F.length===0||(await d(F),await s(),N(!1))}}),A.jsx(QV,{open:k,onClose:()=>O(!1),busy:l,onConfirm:async(F,j)=>{!F||F.length===0||!j||(await g(F.join(","),j),await s(),O(!1))}})]})}function tF({value:n,onChange:t}){const[e,r]=H.useState((n==null?void 0:n.type)||"none"),[i,a]=H.useState((n==null?void 0:n.year)||new Date().getFullYear()),[s,l]=H.useState((n==null?void 0:n.month)||1),[c,f]=H.useState((n==null?void 0:n.quarter)||1),[d,g]=H.useState((n==null?void 0:n.startDate)||""),[m,v]=H.useState((n==null?void 0:n.endDate)||""),_=M=>{const N=M.target.value;r(N);let k={type:N};switch(N){case"year":k.year=i;break;case"month":k.year=i,k.month=s;break;case"quarter":k.year=i,k.quarter=c;break;case"custom":k.startDate=d,k.endDate=m;break}t==null||t(k)},w=M=>{const N=M.target.value;a(N),t==null||t({...n,year:N})},b=M=>{const N=M.target.value;l(N),t==null||t({...n,month:N})},C=M=>{const N=M.target.value;f(N),t==null||t({...n,quarter:N})},I=M=>{const N=M.target.value;g(N),t==null||t({...n,startDate:N})},R=M=>{const N=M.target.value;v(N),t==null||t({...n,endDate:N})};return A.jsxs(vt,{children:[A.jsx(st,{variant:"subtitle2",gutterBottom:!0,children:"読了日時"}),A.jsxs(Sc,{sx:{p:2},children:[A.jsxs(Xu,{fullWidth:!0,margin:"normal",children:[A.jsx(Wu,{children:"日時範囲"}),A.jsxs(Yu,{value:e,onChange:_,label:"日時範囲","data-testid":"date-range-type-select",children:[A.jsx(fr,{value:"none",children:"指定なし"}),A.jsx(fr,{value:"year",children:"年別"}),A.jsx(fr,{value:"month",children:"年月別"}),A.jsx(fr,{value:"quarter",children:"四半期別"}),A.jsx(fr,{value:"custom",children:"カスタム期間"})]})]}),(e==="year"||e==="month"||e==="quarter")&&A.jsxs(Xu,{fullWidth:!0,margin:"normal",children:[A.jsx(Wu,{children:"年"}),A.jsx(Yu,{value:i,onChange:w,label:"年","data-testid":"year-select",children:Array.from({length:10},(M,N)=>new Date().getFullYear()-N).map(M=>A.jsxs(fr,{value:M,children:[M,"年"]},M))})]}),e==="month"&&A.jsxs(Xu,{fullWidth:!0,margin:"normal",children:[A.jsx(Wu,{children:"月"}),A.jsx(Yu,{value:s,onChange:b,label:"月","data-testid":"month-select",children:Array.from({length:12},(M,N)=>N+1).map(M=>A.jsxs(fr,{value:M,children:[M,"月"]},M))})]}),e==="quarter"&&A.jsxs(Xu,{fullWidth:!0,margin:"normal",children:[A.jsx(Wu,{children:"四半期"}),A.jsxs(Yu,{value:c,onChange:C,label:"四半期","data-testid":"quarter-select",children:[A.jsx(fr,{value:1,children:"第1四半期（1-3月）"}),A.jsx(fr,{value:2,children:"第2四半期（4-6月）"}),A.jsx(fr,{value:3,children:"第3四半期（7-9月）"}),A.jsx(fr,{value:4,children:"第4四半期（10-12月）"})]})]}),e==="custom"&&A.jsxs(te,{container:!0,spacing:2,sx:{mt:1},"data-testid":"custom-date-range-grid",children:[A.jsx(te,{xs:6,"data-testid":"start-date-grid-item",children:A.jsx(le,{label:"開始日",type:"date",value:d,onChange:I,fullWidth:!0,InputLabelProps:{shrink:!0},inputProps:{"data-testid":"start-date-input"}})}),A.jsx(te,{xs:6,"data-testid":"end-date-grid-item",children:A.jsx(le,{label:"終了日",type:"date",value:m,onChange:R,fullWidth:!0,InputLabelProps:{shrink:!0},inputProps:{"data-testid":"end-date-input"}})})]}),e!=="none"&&A.jsxs(st,{variant:"body2",color:"text.secondary",sx:{mt:1},children:[e==="year"&&`${i}年に読了した本を検索します`,e==="month"&&`${i}年${s}月に読了した本を検索します`,e==="quarter"&&`${i}年第${c}四半期に読了した本を検索します`,e==="custom"&&"指定した期間に読了した本を検索します"]})]})]})}function eF({selectedTags:n=[],onTagsChange:t,type:e="book"}){const{user:r}=qn(),{tagOptions:i,loading:a,fetchTagHistory:s}=os(e,r),[l,c]=H.useState("");H.useEffect(()=>{r&&s()},[r,s]);const f=(m,v)=>{if(v&&!n.includes(v)){const _=[...n,v];t==null||t(_),c("")}},d=m=>{const v=n.filter(_=>_!==m);t==null||t(v)},g=(m,v)=>{c(v)};return A.jsxs(vt,{children:[A.jsx(st,{variant:"subtitle2",gutterBottom:!0,children:"タグ検索"}),A.jsxs(Sc,{sx:{p:2},children:[A.jsx(es,{freeSolo:!0,multiple:!0,options:i||[],value:n,inputValue:l,onInputChange:g,onChange:f,renderTags:(m,v)=>m.map((_,w)=>{const{key:b,...C}=v({index:w});return A.jsx(On,{label:_,...C,onDelete:()=>d(_),color:"primary",variant:"outlined","data-testid":`selected-tag-${_}`},b)}),renderInput:m=>A.jsx(le,{...m,label:"タグを選択または入力",placeholder:"タグを入力...",fullWidth:!0,"data-testid":"tag-search-input"}),loading:a,noOptionsText:"タグが見つかりません","data-testid":"tag-autocomplete"}),A.jsx(st,{variant:"body2",color:"text.secondary",sx:{mt:1},children:n.length>0?`選択されたタグ: ${n.join(", ")}`:"タグを選択すると、そのタグを持つ本やメモを検索できます"})]})]})}function nF({searchConditions:n,onSearchConditionsChange:t,onSearch:e}){const[r,i]=H.useState("all"),a=d=>{t==null||t({...n,text:d.target.value})},s=(d,g)=>{i(g),t==null||t({...n,status:g})},l=d=>{t==null||t({...n,dateRange:d})},c=d=>{t==null||t({...n,selectedTags:d})},f=()=>{e==null||e(n)};return A.jsxs(vt,{children:[A.jsx(st,{variant:"h6",gutterBottom:!0,children:"検索条件"}),A.jsxs(Sc,{sx:{p:2,mb:2},children:[A.jsx(le,{label:"テキスト検索（タイトル・著者・メモ内容・タグ）",value:(n==null?void 0:n.text)||"",onChange:a,fullWidth:!0,margin:"normal",placeholder:"検索したいキーワードを入力","data-testid":"text-search-field"}),A.jsxs(vt,{sx:{mt:2},children:[A.jsx(st,{variant:"subtitle2",gutterBottom:!0,children:"ステータス"}),A.jsx(vt,{sx:{display:"flex",gap:1,flexWrap:"wrap"},children:["all","reading","finished","wish"].map(d=>A.jsxs(qt,{variant:r===d?"contained":"outlined",size:"small",onClick:()=>s(null,d),"data-testid":`status-filter-${d}`,children:[d==="all"&&"全て",d==="reading"&&"読書中",d==="finished"&&"読了",d==="wish"&&"読みたい"]},d))})]}),A.jsx(vt,{sx:{mt:2},children:A.jsx(tF,{dateRange:(n==null?void 0:n.dateRange)||{type:"none"},onDateRangeChange:l})}),A.jsx(vt,{sx:{mt:2},children:A.jsx(eF,{selectedTags:(n==null?void 0:n.selectedTags)||[],onTagsChange:c,type:"book"})})]}),A.jsx(vt,{sx:{display:"flex",justifyContent:"center"},children:A.jsx(qt,{variant:"contained",onClick:f,"data-testid":"search-button",children:"検索実行"})})]})}function rF({results:n=[],loading:t=!1,searchQuery:e="",onResultClick:r}){const{user:i}=qn();if(t)return A.jsx(vt,{sx:{display:"flex",justifyContent:"center",p:4},children:A.jsx(px,{})});if(!n||n.length===0)return A.jsx(vt,{sx:{p:3},children:A.jsx(oo,{severity:"info",children:e?`「${e}」に一致する結果が見つかりませんでした。`:"検索条件を設定して検索を実行してください。"})});const a=n.filter(f=>f.type==="book"),s=n.filter(f=>f.type==="memo"),l=f=>A.jsx(pn,{sx:{cursor:"pointer","&:hover":{boxShadow:3},height:"100%",display:"flex",flexDirection:"column",border:"2px solid",borderColor:"purple.300",backgroundColor:"purple.50"},onClick:()=>r==null?void 0:r("memo",f.bookId,f.id),"data-testid":`memo-result-${f.id}`,children:A.jsxs(mn,{sx:{flexGrow:1,display:"flex",flexDirection:"column"},children:[A.jsx(vt,{sx:{mb:2},children:A.jsxs(st,{variant:"h6",component:"h3",gutterBottom:!0,sx:{fontWeight:"bold",display:"flex",alignItems:"center",gap:1},children:[A.jsx("span",{children:"📝"}),A.jsxs("span",{children:[f.bookTitle||"メモ"," - ページ",f.page||"未設定"]})]})}),f.text&&A.jsx(vt,{sx:{mb:2,flexGrow:1},children:A.jsx(st,{variant:"body2",sx:{backgroundColor:"grey.50",p:1,borderRadius:1,border:"1px solid",borderColor:"grey.200",fontStyle:"italic"},children:f.text.length>120?`${f.text.substring(0,120)}...`:f.text})}),f.comment&&A.jsx(vt,{sx:{mb:2},children:A.jsxs(st,{variant:"body2",sx:{backgroundColor:"primary.50",p:1,borderRadius:1,border:"1px solid",borderColor:"primary.200"},children:["💭 ",f.comment.length>100?`${f.comment.substring(0,100)}...`:f.comment]})}),f.tags&&f.tags.length>0&&A.jsx(vt,{sx:{mb:2},children:A.jsx(vt,{sx:{display:"flex",gap:.5,flexWrap:"wrap"},children:f.tags.map((d,g)=>A.jsx(On,{label:d,size:"small",variant:"outlined",sx:{fontSize:"0.75rem"}},g))})}),A.jsx(vt,{sx:{mt:"auto"},children:A.jsxs(st,{variant:"caption",color:"text.secondary",children:["作成日: ",f.createdAt?new Date(f.createdAt.toDate()).toLocaleDateString("ja-JP"):"不明"]})})]})},f.id),c=f=>A.jsx(pn,{sx:{cursor:"pointer","&:hover":{boxShadow:3},height:"100%",display:"flex",flexDirection:"column",border:"2px solid",borderColor:"blue.300",backgroundColor:"blue.50"},onClick:()=>r==null?void 0:r("book",f.id),"data-testid":`book-result-${f.id}`,children:A.jsxs(mn,{sx:{flexGrow:1,display:"flex",flexDirection:"column"},children:[A.jsx(vt,{sx:{mb:2},children:A.jsxs(st,{variant:"h6",component:"h3",gutterBottom:!0,sx:{fontWeight:"bold",display:"flex",alignItems:"center",gap:1},children:[A.jsx("span",{children:"📚"}),A.jsx("span",{children:f.title})]})}),A.jsxs(vt,{sx:{mb:2},children:[A.jsx(st,{variant:"body2",color:"text.secondary",sx:{mb:1},children:f.author||"著者不明"}),A.jsx(On,{label:f.status==="reading"?"読書中":f.status==="finished"?"読了":f.status==="wish"?"読みたい":"未設定",size:"small",color:f.status==="reading"?"primary":f.status==="finished"?"success":f.status==="wish"?"warning":"default",sx:{fontSize:"0.75rem"}})]}),f.tags&&f.tags.length>0&&A.jsx(vt,{sx:{mb:2},children:A.jsx(vt,{sx:{display:"flex",gap:.5,flexWrap:"wrap"},children:f.tags.map((d,g)=>A.jsx(On,{label:d,size:"small",variant:"outlined",sx:{fontSize:"0.75rem"}},g))})}),A.jsx(vt,{sx:{mt:"auto"},children:A.jsxs(st,{variant:"caption",color:"text.secondary",children:["更新日: ",f.updatedAt?new Date(f.updatedAt.toDate()).toLocaleDateString("ja-JP"):"不明"]})})]})},f.id);return A.jsxs(vt,{children:[A.jsxs(vt,{sx:{mb:3},children:[A.jsxs(st,{variant:"h6",gutterBottom:!0,children:["検索結果 (",n.length,"件)"]}),A.jsxs(st,{variant:"body2",color:"text.secondary",children:["📚 書籍: ",a.length,"件, 📝 メモ: ",s.length,"件"]})]}),A.jsx(te,{container:!0,spacing:2,children:n.map(f=>A.jsx(te,{item:!0,xs:12,sm:6,md:4,children:f.type==="book"?c(f):l(f)},`${f.type}-${f.id}`))})]})}function iF(n={}){const{user:t}=qn(),[e,r]=H.useState([]),[i,a]=H.useState(!1),[s,l]=H.useState(null),{limit:c=50}=n,f=H.useCallback(b=>{if(!t)return[];const{text:C,status:I,dateRange:R,selectedTags:M}=b,N=[],k=[He("userId","==",t.uid)];if(I&&I!=="all"&&k.push(He("status","==",I)),R&&R.type!=="none"){const{startDate:V,endDate:B}=d(R);V&&k.push(He("updatedAt",">=",V)),B&&k.push(He("updatedAt","<=",B))}M&&M.length>0&&(console.log("タグフィルター適用:",M),console.log("タグフィルターの型:",typeof M,Array.isArray(M)),console.log("タグフィルターの内容:",JSON.stringify(M)),!Array.isArray(M)||M.some(V=>Array.isArray(V))?console.log("ネストした配列または無効なタグ形式を検出、クライアントサイドフィルタリングのみ使用"):k.push(He("tags","array-contains-any",M)));const O=on(br(de,"books"),...k,Lh("updatedAt","desc"),Y0(c));N.push({type:"book",query:O});const S=[He("userId","==",t.uid)],D=on(so(de,"memos"),...S,Y0(c*3));return N.push({type:"memo",query:D}),N},[t,c]),d=H.useCallback(b=>{const C=new Date;let I=null,R=null;switch(b.type){case"year":b.year&&(I=new Date(b.year,0,1),R=new Date(b.year,11,31,23,59,59));break;case"month":b.year&&b.month&&(I=new Date(b.year,b.month-1,1),R=new Date(b.year,b.month,0,23,59,59));break;case"quarter":if(b.year&&b.quarter){const M=(b.quarter-1)*3;I=new Date(b.year,M,1),R=new Date(b.year,M+3,0,23,59,59)}break;case"custom":b.startDate&&(I=new Date(b.startDate)),b.endDate&&(R=new Date(b.endDate),R.setHours(23,59,59));break;case"recent":b.months&&(I=new Date(C.getFullYear(),C.getMonth()-b.months,C.getDate()),R=C);break}return{startDate:I,endDate:R}},[]),g=H.useCallback((b,C)=>{if(!C)return b;const I=C.toLowerCase();return b.filter(R=>R.type==="book"?R.title&&R.title.toLowerCase().includes(I)||R.author&&R.author.toLowerCase().includes(I)||R.tags&&R.tags.some(M=>M.toLowerCase().includes(I)):R.type==="memo"?R.text&&R.text.toLowerCase().includes(I)||R.comment&&R.comment.toLowerCase().includes(I)||R.tags&&R.tags.some(M=>M.toLowerCase().includes(I)):!1)},[]),m=H.useCallback((b,C)=>{if(!C||C.length===0)return b;const I=M=>{if(!Array.isArray(M))return[];const N=[],k=O=>{Array.isArray(O)?O.forEach(k):typeof O=="string"&&O.trim()&&N.push(O.toLowerCase().trim())};return M.forEach(k),N},R=I(C);return console.log("正規化された選択タグ:",R),b.filter(M=>{if(!M.tags||!Array.isArray(M.tags))return!1;const N=I(M.tags);console.log(`アイテム ${M.id} のタグ:`,N);const k=N.some(O=>R.includes(O));return console.log(`アイテム ${M.id} のマッチ結果:`,k),k})},[]),v=H.useCallback((b,C)=>{if(!C)return b;const I=C.toLowerCase();return b.filter(R=>R.text&&R.text.toLowerCase().includes(I)||R.comment&&R.comment.toLowerCase().includes(I))},[]),_=H.useCallback(async b=>{var C,I,R;if(!t){l("ユーザーが認証されていません");return}a(!0),l(null);try{console.log("検索条件:",b);const M=f(b);console.log("構築されたクエリ:",M);const N=[];for(const{type:O,query:S}of M){console.log(`${O}クエリ実行開始`);try{const D=await vn(S);if(console.log(`${O}クエリ実行成功, 結果数:`,D.size),O==="memo"){console.log("メモクエリの結果を処理中...");for(const V of D.docs){const B=V.data(),F=(C=V.ref.parent.parent)==null?void 0:C.id;console.log("メモデータ:",{id:V.id,bookId:F,tags:B.tags,userId:B.userId,text:((I=B.text)==null?void 0:I.substring(0,50))+"..."});let j="メモ";if(F)try{const rt=await vn(on(br(de,"books"),He("__name__","==",F),He("userId","==",t.uid)));rt.empty||(j=rt.docs[0].data().title||"メモ")}catch(rt){console.warn("親の本の情報取得に失敗:",rt)}N.push({id:V.id,type:O,bookId:F,bookTitle:j,...B})}console.log("メモ処理完了, 追加されたメモ数:",D.size)}else D.forEach(V=>{const B=V.data();N.push({id:V.id,type:O,...B})})}catch(D){if(console.error(`${O}クエリエラー:`,D),D.code==="failed-precondition"||D.message.includes("index")||D.message.includes("array-contains-any"))if(console.log("インデックスエラー検出、クライアントサイドフィルタリングにフォールバック"),O==="memo"){const V=on(so(de,"memos"),He("userId","==",t.uid),Y0(c*2)),B=await vn(V);console.log("メモフォールバッククエリ実行成功, 結果数:",B.size);for(const F of B.docs){const j=F.data(),rt=(R=F.ref.parent.parent)==null?void 0:R.id;let mt="メモ";if(rt)try{const q=await vn(on(br(de,"books"),He("__name__","==",rt),He("userId","==",t.uid)));q.empty||(mt=q.docs[0].data().title||"メモ")}catch(q){console.warn("親の本の情報取得に失敗:",q)}N.push({id:F.id,type:O,bookId:rt,bookTitle:mt,...j})}}else{const V=on(br(de,"books"),He("userId","==",t.uid),Lh("updatedAt","desc"),Y0(c*2)),B=await vn(V);console.log("本フォールバッククエリ実行成功, 結果数:",B.size),B.forEach(F=>{const j=F.data();N.push({id:F.id,type:O,...j})})}else throw D}}console.log("全クエリ実行完了, 総結果数:",N.length),console.log("結果の内訳:",{books:N.filter(O=>O.type==="book").length,memos:N.filter(O=>O.type==="memo").length});let k=g(N,b.text);if(b.selectedTags&&b.selectedTags.length>0&&(console.log("クライアントサイドタグフィルタリング実行:",b.selectedTags),k=m(k,b.selectedTags),console.log("タグフィルタリング後の結果数:",k.length)),b.memoContent){const O=k.filter(D=>D.type==="book"),S=v(k.filter(D=>D.type==="memo"),b.memoContent);k=[...O,...S]}k.sort((O,S)=>{const D=b.sortBy||"updatedAt",V=b.sortOrder||"desc";let B=O[D],F=S[D];return(D==="updatedAt"||D==="createdAt")&&(B=B!=null&&B.toDate?B.toDate():new Date(B),F=F!=null&&F.toDate?F.toDate():new Date(F)),typeof B=="string"&&typeof F=="string"&&(B=B.toLowerCase(),F=F.toLowerCase()),V==="asc"?B>F?1:-1:B<F?1:-1}),r(k)}catch(M){console.error("検索エラー:",M),l("検索中にエラーが発生しました")}finally{a(!1)}},[t,f,g,m,v]),w=H.useCallback(()=>{r([]),l(null)},[]);return{results:e,loading:i,error:s,executeSearch:_,clearResults:w}}function aF(){const{user:n}=qn(),t=Gh(),[e,r]=H.useState(0),[i,a]=H.useState({text:"",status:"all",dateRange:{type:"none"},selectedTags:[],sortBy:"updatedAt",sortOrder:"desc"}),{results:s,loading:l,error:c,executeSearch:f,clearResults:d}=iF(),[g,m]=H.useState(!1),[v,_]=H.useState(null),[w,b]=H.useState(null),C=(S,D)=>{r(D)},I=S=>{a(S)},R=S=>{console.log("検索実行:",S),f(S)},M=(S,D,V)=>{if(S==="book")t(`/book/${D}`);else if(S==="memo"){const B=(s||[]).find(F=>F.type==="memo"&&F.id===V);B?(_(B),b(D),m(!0)):t(`/book/${D}?memo=${V}`)}},N=()=>{m(!1),_(null),b(null)},k=()=>{d(),a({text:"",status:"all",dateRange:{type:"none"},selectedTags:[],sortBy:"updatedAt",sortOrder:"desc"})},O=S=>{console.log("タグがクリックされました:",S);const D={...i,selectedTags:[S],text:""};a(D),r(0),f(D)};return n?A.jsxs(vt,{sx:{maxWidth:800,mx:"auto",mb:4,pb:"56px"},children:[A.jsx(Hg,{title:"検索・タグ",subtitle:"高度な検索とタグ管理"}),A.jsxs(vt,{sx:{px:{xs:1.5,sm:2,md:0}},children:[A.jsx(vt,{sx:{borderBottom:1,borderColor:"divider",mb:2,position:"sticky",top:0,zIndex:1100,backgroundColor:"background.paper"},"data-testid":"tag-search-tabs-container",style:{position:"sticky",top:0,zIndex:1100},children:A.jsxs(fC,{value:e,onChange:C,centered:!0,"data-testid":"tag-search-tabs",children:[A.jsx(vh,{label:"高度な検索",id:"tag-search-tab-0","aria-controls":"tag-search-tabpanel-0","data-testid":"search-tab"}),A.jsx(vh,{label:"タグ管理",id:"tag-search-tab-1","aria-controls":"tag-search-tabpanel-1","data-testid":"tag-management-tab"})]})}),A.jsx(HS,{value:e,index:0,"data-testid":"search-tab-panel",children:A.jsx(sF,{searchConditions:i,onSearchConditionsChange:I,onSearch:R,results:s,loading:l,error:c,onResultClick:M,onClearSearch:k})}),A.jsx(HS,{value:e,index:1,"data-testid":"tag-management-tab-panel",children:A.jsx(oF,{onTagClick:O})}),A.jsx(d4,{open:g,memo:v,bookId:w,onClose:N,onUpdate:N,onDelete:N})]})]}):A.jsx(vt,{sx:{maxWidth:600,mx:"auto",mt:4,p:2},children:A.jsx(st,{variant:"h6",color:"error",children:"ログインが必要です"})})}function sF({searchConditions:n,onSearchConditionsChange:t,onSearch:e,results:r,loading:i,error:a,onResultClick:s,onClearSearch:l}){return A.jsxs(vt,{children:[A.jsx(st,{variant:"h5",gutterBottom:!0,children:"高度な検索"}),A.jsx(st,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"タイトル・著者・タグ・メモ内容で絞り込みできます。"}),A.jsx(nF,{searchConditions:n,onSearchConditionsChange:t,onSearch:e}),a&&A.jsx(vt,{sx:{mt:2},children:A.jsx(oo,{severity:"error",children:a})}),(r.length>0||i)&&A.jsx(vt,{sx:{mt:4},children:A.jsx(rF,{results:r,loading:i,searchQuery:n.text,onResultClick:s})}),r.length>0&&!i&&A.jsx(vt,{sx:{mt:2,textAlign:"center"},children:A.jsx(st,{variant:"body2",color:"primary",sx:{cursor:"pointer",textDecoration:"underline"},onClick:l,children:"検索結果をクリア"})})]})}function oF({onTagClick:n}){return A.jsxs(vt,{children:[A.jsx(st,{variant:"h5",gutterBottom:!0,children:"タグ管理"}),A.jsx(st,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"統計を確認し、タグクリックで検索できます。"}),A.jsx(JV,{onTagClick:n})]})}function e1(n,t,e=1){if(!t)return;const r=n.get(t)||0;n.set(t,r+e)}function lF(){const{user:n}=qn(),t=H.useContext(Lr),e=(t==null?void 0:t.setGlobalError)||(()=>{}),[r,i]=H.useState(!0),[a,s]=H.useState(null),[l,c]=H.useState([]),[f,d]=H.useState([]);H.useEffect(()=>{let R=!1;async function M(){if(!n){c([]),d([]),i(!1);return}i(!0),s(null);try{const N=on(br(de,"books"),He("userId","==",n.uid)),O=(await vn(N)).docs.map(B=>({id:B.id,...B.data()})),S=on(so(de,"memos"),He("userId","==",n.uid)),V=(await vn(S)).docs.map(B=>({id:B.id,...B.data()}));R||(c(O),d(V))}catch(N){console.error("Failed to load stats:",N),R||(s("統計情報の取得に失敗しました。"),e("統計情報の取得に失敗しました。"))}finally{R||i(!1)}}return M(),()=>{R=!0}},[n]);const g=H.useMemo(()=>{const R=l.length,M=l.filter(k=>(k.status||"reading")==="finished").length,N=l.filter(k=>(k.status||"reading")==="reading").length;return{totalBooks:R,finishedBooks:M,readingBooks:N}},[l]),m=H.useMemo(()=>{const R=l.filter(N=>(N.status||"reading")==="finished").length,M=l.filter(N=>(N.status||"reading")==="reading").length;return{finished:R,reading:M}},[l]),v=H.useMemo(()=>{const R=new Map,M=new Map;for(const O of l){const S=Array.isArray(O.tags)?O.tags:[];for(const D of S)e1(R,String(D).trim())}for(const O of f){const S=Array.isArray(O.tags)?O.tags:[];for(const D of S)e1(M,String(D).trim())}const N=new Set([...R.keys(),...M.keys()]),k=[];for(const O of N){const S=R.get(O)||0,D=M.get(O)||0;k.push({tag:O,bookCount:S,memoCount:D,totalCount:S+D})}return k.sort((O,S)=>S.totalCount-O.totalCount||O.tag.localeCompare(S.tag)),k},[l,f]),_=H.useMemo(()=>{var k;const R=new Date,M=[],N=new Map;for(let O=11;O>=0;O-=1){const S=new Date(R.getFullYear(),R.getMonth()-O,1),D=`${S.getFullYear()}-${String(S.getMonth()+1).padStart(2,"0")}`;N.set(D,M.length),M.push({key:D,year:S.getFullYear(),month:S.getMonth()+1,count:0})}for(const O of l){const S=O.status||"reading",D=O.finishedAt||O.updatedAt||O.createdAt;if(!D||S!=="finished")continue;const V=typeof(D==null?void 0:D.toDate)=="function"?D.toDate():new Date(D);if(Number.isNaN((k=V==null?void 0:V.getTime)==null?void 0:k.call(V)))continue;const B=`${V.getFullYear()}-${String(V.getMonth()+1).padStart(2,"0")}`;if(!N.has(B))continue;const F=N.get(B);M[F].count+=1}return M},[l]),w=H.useMemo(()=>{var k;const R=new Date,M=[],N=new Map;for(let O=11;O>=0;O-=1){const S=new Date(R.getFullYear(),R.getMonth()-O,1),D=`${S.getFullYear()}-${String(S.getMonth()+1).padStart(2,"0")}`;N.set(D,M.length),M.push({key:D,year:S.getFullYear(),month:S.getMonth()+1,count:0})}for(const O of l){const S=O.createdAt||O.updatedAt||O.finishedAt;if(!S)continue;const D=typeof(S==null?void 0:S.toDate)=="function"?S.toDate():new Date(S);if(Number.isNaN((k=D==null?void 0:D.getTime)==null?void 0:k.call(D)))continue;const V=`${D.getFullYear()}-${String(D.getMonth()+1).padStart(2,"0")}`;if(!N.has(V))continue;const B=N.get(V);M[B].count+=1}return M},[l]),b=H.useMemo(()=>{var k;const R=new Date,M=[],N=new Map;for(let O=11;O>=0;O-=1){const S=new Date(R.getFullYear(),R.getMonth()-O,1),D=`${S.getFullYear()}-${String(S.getMonth()+1).padStart(2,"0")}`;N.set(D,M.length),M.push({key:D,year:S.getFullYear(),month:S.getMonth()+1,count:0})}for(const O of f){const S=O.createdAt||O.updatedAt;if(!S)continue;const D=typeof(S==null?void 0:S.toDate)=="function"?S.toDate():new Date(S);if(Number.isNaN((k=D==null?void 0:D.getTime)==null?void 0:k.call(D)))continue;const V=`${D.getFullYear()}-${String(D.getMonth()+1).padStart(2,"0")}`;if(!N.has(V))continue;const B=N.get(V);M[B].count+=1}return M},[f]),C=H.useMemo(()=>{const R=new Map;for(const N of l){const k=(N.author||"").toString().trim();k&&e1(R,k)}const M=[...R.entries()].map(([N,k])=>({author:N,total:k}));return M.sort((N,k)=>k.total-N.total||N.author.localeCompare(k.author)),M},[l]),I=H.useMemo(()=>{const R=new Map;for(const N of l){const k=(N.publisher||"").toString().trim();k&&e1(R,k)}const M=[...R.entries()].map(([N,k])=>({publisher:N,total:k}));return M.sort((N,k)=>k.total-N.total||N.publisher.localeCompare(k.publisher)),M},[l]);return{loading:r,error:a,summary:g,tagStats:v,monthlyFinished:_,monthlyAddedBooks:w,monthlyMemos:b,topAuthors:C,topPublishers:I,statusDistribution:m}}const w2="DEFAULT_X_AXIS_KEY",b2="DEFAULT_Y_AXIS_KEY",uF={top:20,bottom:20,left:20,right:20},cF=45,fF=25,g4=20;class hF{constructor(t){this.value=void 0,this.listeners=void 0,this.subscribe=e=>(this.listeners.add(e),()=>{this.listeners.delete(e)}),this.getSnapshot=()=>this.value,this.update=e=>{const r=e(this.value);r!==this.value&&(this.value=r,this.listeners.forEach(i=>i(r)))},this.value=t,this.listeners=new Set}}const Xg=({params:n,store:t})=>{H.useEffect(()=>{t.update(r=>X({},r,{animation:X({},r.animation,{skip:n.skipAnimation})}))},[t,n.skipAnimation]);const e=H.useCallback(()=>{let r=!1;return t.update(i=>X({},i,{animation:X({},i.animation,{skipAnimationRequests:i.animation.skipAnimationRequests+1})})),()=>{r||(r=!0,t.update(i=>X({},i,{animation:X({},i.animation,{skipAnimationRequests:i.animation.skipAnimationRequests-1})})))}},[t]);return ki(()=>{if(typeof window>"u"||!(window!=null&&window.matchMedia))return;let i;const a=l=>{l.matches?i=e():i==null||i()},s=window.matchMedia("(prefers-reduced-motion)");return a(s),s.addEventListener("change",a),()=>{s.removeEventListener("change",a)}},[e,t]),{instance:{disableAnimation:e}}};Xg.params={skipAnimation:!0};Xg.getDefaultizedParams=({params:n})=>X({},n,{skipAnimation:n.skipAnimation??!1});Xg.getInitialState=({skipAnimation:n})=>({animation:{skip:n,skipAnimationRequests:0}});var Z1=Symbol("NOT_FOUND");function dF(n,t=`expected a function, instead received ${typeof n}`){if(typeof n!="function")throw new TypeError(t)}function gF(n,t=`expected an object, instead received ${typeof n}`){if(typeof n!="object")throw new TypeError(t)}function pF(n,t="expected all items to be functions, instead received the following types: "){if(!n.every(e=>typeof e=="function")){const e=n.map(r=>typeof r=="function"?`function ${r.name||"unnamed"}()`:typeof r).join(", ");throw new TypeError(`${t}[${e}]`)}}var GS=n=>Array.isArray(n)?n:[n];function mF(n){const t=Array.isArray(n[0])?n[0]:n;return pF(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function vF(n,t){const e=[],{length:r}=n;for(let i=0;i<r;i++)e.push(n[i].apply(null,t));return e}function yF(n){let t;return{get(e){return t&&n(t.key,e)?t.value:Z1},put(e,r){t={key:e,value:r}},getEntries(){return t?[t]:[]},clear(){t=void 0}}}function xF(n,t){let e=[];function r(l){const c=e.findIndex(f=>t(l,f.key));if(c>-1){const f=e[c];return c>0&&(e.splice(c,1),e.unshift(f)),f.value}return Z1}function i(l,c){r(l)===Z1&&(e.unshift({key:l,value:c}),e.length>n&&e.pop())}function a(){return e}function s(){e=[]}return{get:r,put:i,getEntries:a,clear:s}}var _F=(n,t)=>n===t;function AF(n){return function(e,r){if(e===null||r===null||e.length!==r.length)return!1;const{length:i}=e;for(let a=0;a<i;a++)if(!n(e[a],r[a]))return!1;return!0}}function EF(n,t){const e=typeof t=="object"?t:{equalityCheck:t},{equalityCheck:r=_F,maxSize:i=1,resultEqualityCheck:a}=e,s=AF(r);let l=0;const c=i<=1?yF(s):xF(i,s);function f(){let d=c.get(arguments);if(d===Z1){if(d=n.apply(null,arguments),l++,a){const m=c.getEntries().find(v=>a(v.value,d));m&&(d=m.value,l!==0&&l--)}c.put(arguments,d)}return d}return f.clearCache=()=>{c.clear(),f.resetResultsCount()},f.resultsCount=()=>l,f.resetResultsCount=()=>{l=0},f}var wF=class{constructor(n){this.value=n}deref(){return this.value}},bF=typeof WeakRef<"u"?WeakRef:wF,SF=0,$S=1;function n1(){return{s:SF,v:void 0,o:null,p:null}}function p4(n,t={}){let e=n1();const{resultEqualityCheck:r}=t;let i,a=0;function s(){var g;let l=e;const{length:c}=arguments;for(let m=0,v=c;m<v;m++){const _=arguments[m];if(typeof _=="function"||typeof _=="object"&&_!==null){let w=l.o;w===null&&(l.o=w=new WeakMap);const b=w.get(_);b===void 0?(l=n1(),w.set(_,l)):l=b}else{let w=l.p;w===null&&(l.p=w=new Map);const b=w.get(_);b===void 0?(l=n1(),w.set(_,l)):l=b}}const f=l;let d;if(l.s===$S)d=l.v;else if(d=n.apply(null,arguments),a++,r){const m=((g=i==null?void 0:i.deref)==null?void 0:g.call(i))??i;m!=null&&r(m,d)&&(d=m,a!==0&&a--),i=typeof d=="object"&&d!==null||typeof d=="function"?new bF(d):d}return f.s=$S,f.v=d,d}return s.clearCache=()=>{e=n1(),s.resetResultsCount()},s.resultsCount=()=>a,s.resetResultsCount=()=>{a=0},s}function m4(n,...t){const e=typeof n=="function"?{memoize:n,memoizeOptions:t}:n,r=(...i)=>{let a=0,s=0,l,c={},f=i.pop();typeof f=="object"&&(c=f,f=i.pop()),dF(f,`createSelector expects an output function after the inputs, but received: [${typeof f}]`);const d={...e,...c},{memoize:g,memoizeOptions:m=[],argsMemoize:v=p4,argsMemoizeOptions:_=[]}=d,w=GS(m),b=GS(_),C=mF(i),I=g(function(){return a++,f.apply(null,arguments)},...w),R=v(function(){s++;const N=vF(C,arguments);return l=I.apply(null,N),l},...b);return Object.assign(R,{resultFunc:f,memoizedResultFunc:I,dependencies:C,dependencyRecomputations:()=>s,resetDependencyRecomputations:()=>{s=0},lastResult:()=>l,recomputations:()=>a,resetRecomputations:()=>{a=0},memoize:g,argsMemoize:v})};return Object.assign(r,{withTypes:()=>r}),r}var TF=m4(p4),CF=Object.assign((n,t=TF)=>{gF(n,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof n}`);const e=Object.keys(n),r=e.map(a=>n[a]);return t(r,(...a)=>a.reduce((s,l,c)=>(s[e[c]]=l,s),{}))},{withTypes:()=>CF});const IF=m4({memoize:EF,memoizeOptions:{maxSize:1,equalityCheck:Object.is}}),qS=new WeakMap,St=(...n)=>(e,...r)=>{const i=e.cacheKey;let a=qS.get(i);a||(a=new Map,qS.set(i,a));const s=a.get(n);if(s)return s(e,...r);const l=IF(...n);return a.set(n,l),l(e,...r)},RF=n=>n.animation,DF=St([RF],n=>n.skip||n.skipAnimationRequests>0);var kv={exports:{}},Lv={},Bv={exports:{}},Vv={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var XS;function OF(){if(XS)return Vv;XS=1;var n=mx();function t(g,m){return g===m&&(g!==0||1/g===1/m)||g!==g&&m!==m}var e=typeof Object.is=="function"?Object.is:t,r=n.useState,i=n.useEffect,a=n.useLayoutEffect,s=n.useDebugValue;function l(g,m){var v=m(),_=r({inst:{value:v,getSnapshot:m}}),w=_[0].inst,b=_[1];return a(function(){w.value=v,w.getSnapshot=m,c(w)&&b({inst:w})},[g,v,m]),i(function(){return c(w)&&b({inst:w}),g(function(){c(w)&&b({inst:w})})},[g]),s(v),v}function c(g){var m=g.getSnapshot;g=g.value;try{var v=m();return!e(g,v)}catch{return!0}}function f(g,m){return m()}var d=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?f:l;return Vv.useSyncExternalStore=n.useSyncExternalStore!==void 0?n.useSyncExternalStore:d,Vv}var WS;function MF(){return WS||(WS=1,Bv.exports=OF()),Bv.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var YS;function NF(){if(YS)return Lv;YS=1;var n=mx(),t=MF();function e(f,d){return f===d&&(f!==0||1/f===1/d)||f!==f&&d!==d}var r=typeof Object.is=="function"?Object.is:e,i=t.useSyncExternalStore,a=n.useRef,s=n.useEffect,l=n.useMemo,c=n.useDebugValue;return Lv.useSyncExternalStoreWithSelector=function(f,d,g,m,v){var _=a(null);if(_.current===null){var w={hasValue:!1,value:null};_.current=w}else w=_.current;_=l(function(){function C(k){if(!I){if(I=!0,R=k,k=m(k),v!==void 0&&w.hasValue){var O=w.value;if(v(O,k))return M=O}return M=k}if(O=M,r(R,k))return O;var S=m(k);return v!==void 0&&v(O,S)?(R=k,O):(R=k,M=S)}var I=!1,R,M,N=g===void 0?null:g;return[function(){return C(d())},N===null?void 0:function(){return C(N())}]},[d,g,m,v]);var b=i(f,_[0],_[1]);return s(function(){w.hasValue=!0,w.value=b},[b]),c(b),b},Lv}var KS;function PF(){return KS||(KS=1,kv.exports=NF()),kv.exports}var kF=PF();const LF=Object.is,Ut=(n,t,e=[],r=LF)=>{const i=a=>t(a,...e);return kF.useSyncExternalStoreWithSelector(n.subscribe,n.getSnapshot,n.getSnapshot,i,r)},Vl=n=>{var t;return(t=n.cartesianAxis)==null?void 0:t.x},Pc=n=>{var t;return(t=n.cartesianAxis)==null?void 0:t.y},BF=St([Pc],n=>(n??[]).reduce((t,e)=>{var r;return e.position==="left"?t+(e.width||0)+((r=e.zoom)!=null&&r.slider.enabled?e.zoom.slider.size:0):t},0)),VF=St([Pc],n=>(n??[]).reduce((t,e)=>{var r;return e.position==="right"?t+(e.width||0)+((r=e.zoom)!=null&&r.slider.enabled?e.zoom.slider.size:0):t},0)),FF=St([Vl],n=>(n??[]).reduce((t,e)=>{var r;return e.position==="top"?t+(e.height||0)+((r=e.zoom)!=null&&r.slider.enabled?e.zoom.slider.size:0):t},0)),jF=St([Vl],n=>(n??[]).reduce((t,e)=>{var r;return e.position==="bottom"?t+(e.height||0)+((r=e.zoom)!=null&&r.slider.enabled?e.zoom.slider.size:0):t},0)),UF=n=>n.dimensions,v4=n=>n.dimensions.width,y4=n=>n.dimensions.height,zF=n=>n.dimensions.margin.top,HF=n=>n.dimensions.margin.right,GF=n=>n.dimensions.margin.bottom,$F=n=>n.dimensions.margin.left,gs=St([v4,y4,zF,HF,GF,$F,FF,VF,jF,BF],(n,t,e,r,i,a,s,l,c,f)=>({width:n-a-r-f-l,left:a+f,right:r+l,height:t-e-i-s-c,top:e+s,bottom:i+c})),x4=St([UF],n=>({width:n.propsWidth,height:n.propsHeight})),qF=St([v4,y4],(n,t)=>({width:n,height:t}));function _4(n,t){return typeof n=="number"?{top:n,bottom:n,left:n,right:n}:t?X({},t,n):n}const XF=10,Wg=({params:n,store:t,svgRef:e})=>{const r=n.width!==void 0&&n.height!==void 0,i=H.useRef({displayError:!1,initialCompute:!0,computeRun:0}),[a,s]=H.useState(0),[l,c]=H.useState(0),f=H.useCallback(()=>{const _=e==null?void 0:e.current;if(!_)return{};const b=rD(_).getComputedStyle(_),C=Math.floor(parseFloat(b.height))||0,I=Math.floor(parseFloat(b.width))||0;return t.update(R=>R.dimensions.width===I&&R.dimensions.height===C?R:X({},R,{dimensions:{margin:{top:n.margin.top,right:n.margin.right,bottom:n.margin.bottom,left:n.margin.left},width:n.width??I,height:n.height??C,propsWidth:n.width,propsHeight:n.height}})),{height:C,width:I}},[t,e,n.height,n.width,n.margin.left,n.margin.right,n.margin.top,n.margin.bottom]);H.useEffect(()=>{t.update(_=>{const w=n.width??_.dimensions.width,b=n.height??_.dimensions.height;return X({},_,{dimensions:{margin:{top:n.margin.top,right:n.margin.right,bottom:n.margin.bottom,left:n.margin.left},width:w,height:b,propsHeight:n.height,propsWidth:n.width}})})},[t,n.height,n.width,n.margin.left,n.margin.right,n.margin.top,n.margin.bottom]),H.useEffect(()=>{i.current.displayError=!0},[]),ki(()=>{if(r||!i.current.initialCompute||i.current.computeRun>XF)return;const _=f();_.width!==a||_.height!==l?(i.current.computeRun+=1,_.width!==void 0&&s(_.width),_.height!==void 0&&c(_.height)):i.current.initialCompute&&(i.current.initialCompute=!1)},[l,a,f,r]),ki(()=>{if(r)return()=>{};f();const _=e.current;if(typeof ResizeObserver>"u")return()=>{};let w;const b=new ResizeObserver(()=>{w=requestAnimationFrame(()=>{f()})});return _&&b.observe(_),()=>{w&&cancelAnimationFrame(w),_&&b.unobserve(_)}},[f,r,e]);const d=Ut(t,gs),g=H.useCallback(_=>_>=d.left-1&&_<=d.left+d.width,[d.left,d.width]),m=H.useCallback(_=>_>=d.top-1&&_<=d.top+d.height,[d.height,d.top]);return{instance:{isPointInside:H.useCallback((_,w,b)=>b&&"closest"in b&&b.closest("[data-drawing-container]")?!0:g(_)&&m(w),[g,m]),isXInside:g,isYInside:m}}};Wg.params={width:!0,height:!0,margin:!0};Wg.getDefaultizedParams=({params:n})=>X({},n,{margin:_4(n.margin,uF)});Wg.getInitialState=({width:n,height:t,margin:e})=>({dimensions:{margin:e,width:n??0,height:t??0,propsWidth:n,propsHeight:t}});const S2=({params:n,store:t})=>(ki(()=>{t.update(e=>X({},e,{experimentalFeatures:n.experimentalFeatures}))},[t,n.experimentalFeatures]),{});S2.params={experimentalFeatures:!0};S2.getInitialState=({experimentalFeatures:n})=>({experimentalFeatures:n});const WF=n=>n.experimentalFeatures,A4=St([WF],n=>!!(n!=null&&n.preferStrictDomainInLineCharts));let ZS=0;const YF=()=>(ZS+=1,`mui-chart-${ZS}`),T2=({params:n,store:t})=>(H.useEffect(()=>{t.update(e=>n.id===void 0||n.id===e.id.providedChartId&&e.id.chartId!==void 0?e:X({},e,{id:X({},e.id,{chartId:n.id??YF()})}))},[t,n.id]),{});T2.params={id:!0};T2.getInitialState=({id:n})=>({id:{chartId:n,providedChartId:n}});const KF=n=>n.id,ZF=St([KF],n=>n.chartId),QF=["#4254FB","#FFB422","#FA4F58","#0DBEFF","#22BF75","#FA83B4","#FF7511"],JF=["#495AFB","#FFC758","#F35865","#30C8FF","#44CE8D","#F286B3","#FF8C39"],E4=n=>n==="dark"?JF:QF,w4=({series:n,colors:t,seriesConfig:e,dataset:r})=>{const i={};n.forEach((s,l)=>{var d;const c=e[s.type].getSeriesWithDefaultValues(s,l,t),f=c.id;if(i[s.type]===void 0&&(i[s.type]={series:{},seriesOrder:[]}),((d=i[s.type])==null?void 0:d.series[f])!==void 0)throw new Error(`MUI X Charts: series' id "${f}" is not unique.`);i[s.type].series[f]=c,i[s.type].seriesOrder.push(f)});const a={};return Object.keys(e).forEach(s=>{var c,f;const l=i[s];l!==void 0&&(a[s]=((f=(c=e[s])==null?void 0:c.seriesProcessor)==null?void 0:f.call(c,l,r))??i[s])}),a},Yg=({params:n,store:t,seriesConfig:e})=>{const{series:r,dataset:i,theme:a,colors:s}=n,l=H.useRef(!0);return H.useEffect(()=>{if(l.current){l.current=!1;return}t.update(c=>X({},c,{series:X({},c.series,{processedSeries:w4({series:r,colors:typeof s=="function"?s(a):s,seriesConfig:e,dataset:i})})}))},[s,i,r,a,e,t]),{}};Yg.params={dataset:!0,series:!0,colors:!0,theme:!0};const tj=[];Yg.getDefaultizedParams=({params:n})=>{var t;return X({},n,{series:(t=n.series)!=null&&t.length?n.series:tj,colors:n.colors??E4,theme:n.theme??"light"})};Yg.getInitialState=({series:n=[],colors:t,theme:e,dataset:r},i,a)=>({series:{seriesConfig:a,processedSeries:w4({series:n,colors:typeof t=="function"?t(e):t,seriesConfig:a,dataset:r})}});const b4=n=>n.series,Vi=St([b4],n=>n.processedSeries),ps=St([b4],n=>n.seriesConfig),ej={abort:!0,animationcancel:!0,animationend:!0,animationiteration:!0,animationstart:!0,auxclick:!0,beforeinput:!0,beforetoggle:!0,blur:!0,cancel:!0,canplay:!0,canplaythrough:!0,change:!0,click:!0,close:!0,compositionend:!0,compositionstart:!0,compositionupdate:!0,contextlost:!0,contextmenu:!0,contextrestored:!0,copy:!0,cuechange:!0,cut:!0,dblclick:!0,drag:!0,dragend:!0,dragenter:!0,dragleave:!0,dragover:!0,dragstart:!0,drop:!0,durationchange:!0,emptied:!0,ended:!0,error:!0,focus:!0,focusin:!0,focusout:!0,formdata:!0,gotpointercapture:!0,input:!0,invalid:!0,keydown:!0,keypress:!0,keyup:!0,load:!0,loadeddata:!0,loadedmetadata:!0,loadstart:!0,lostpointercapture:!0,mousedown:!0,mouseenter:!0,mouseleave:!0,mousemove:!0,mouseout:!0,mouseover:!0,mouseup:!0,paste:!0,pause:!0,play:!0,playing:!0,pointercancel:!0,pointerdown:!0,pointerenter:!0,pointerleave:!0,pointermove:!0,pointerout:!0,pointerover:!0,pointerup:!0,progress:!0,ratechange:!0,reset:!0,resize:!0,scroll:!0,scrollend:!0,securitypolicyviolation:!0,seeked:!0,seeking:!0,select:!0,selectionchange:!0,selectstart:!0,slotchange:!0,stalled:!0,submit:!0,suspend:!0,timeupdate:!0,toggle:!0,touchcancel:!0,touchend:!0,touchmove:!0,touchstart:!0,transitioncancel:!0,transitionend:!0,transitionrun:!0,transitionstart:!0,volumechange:!0,waiting:!0,webkitanimationend:!0,webkitanimationiteration:!0,webkitanimationstart:!0,webkittransitionend:!0,wheel:!0,beforematch:!0,pointerrawupdate:!0};class S4{constructor(t){if(this.name=void 0,this.preventDefault=void 0,this.stopPropagation=void 0,this.preventIf=void 0,this.requiredKeys=void 0,this.keyboardManager=void 0,this.pointerMode=void 0,this.customData={},this.pointerManager=void 0,this.gesturesRegistry=void 0,this.element=void 0,this.state=void 0,this.isSinglePhase=void 0,this.eventType=void 0,this.optionsType=void 0,this.mutableOptionsType=void 0,this.mutableStateType=void 0,!t||!t.name)throw new Error("Gesture must be initialized with a valid name.");if(t.name in ej)throw new Error(`Gesture can't be created with a native event name. Tried to use "${t.name}". Please use a custom name instead.`);this.name=t.name,this.preventDefault=t.preventDefault??!1,this.stopPropagation=t.stopPropagation??!1,this.preventIf=t.preventIf??[],this.requiredKeys=t.requiredKeys??[],this.pointerMode=t.pointerMode??[]}init(t,e,r,i){this.element=t,this.pointerManager=e,this.gesturesRegistry=r,this.keyboardManager=i;const a=`${this.name}ChangeOptions`;this.element.addEventListener(a,this.handleOptionsChange.bind(this));const s=`${this.name}ChangeState`;this.element.addEventListener(s,this.handleStateChange.bind(this))}handleOptionsChange(t){t&&t.detail&&this.updateOptions(t.detail)}updateOptions(t){this.preventDefault=t.preventDefault??this.preventDefault,this.stopPropagation=t.stopPropagation??this.stopPropagation,this.preventIf=t.preventIf??this.preventIf,this.requiredKeys=t.requiredKeys??this.requiredKeys,this.pointerMode=t.pointerMode??this.pointerMode}handleStateChange(t){t&&t.detail&&this.updateState(t.detail)}updateState(t){Object.assign(this.state,t)}getTargetElement(t){return this.isActive||this.element===t.target||"contains"in this.element&&this.element.contains(t.target)||"getRootNode"in this.element&&this.element.getRootNode()instanceof ShadowRoot&&t.composedPath().includes(this.element)?this.element:null}set isActive(t){t?this.gesturesRegistry.registerActiveGesture(this.element,this):this.gesturesRegistry.unregisterActiveGesture(this.element,this)}get isActive(){return this.gesturesRegistry.isGestureActive(this.element,this)??!1}shouldPreventGesture(t){if(!this.keyboardManager.areKeysPressed(this.requiredKeys))return!0;if(this.preventIf.length===0)return!1;const e=this.gesturesRegistry.getActiveGestures(t);return this.preventIf.some(r=>e[r])}isPointerTypeAllowed(t){return!this.pointerMode||this.pointerMode.length===0?!0:this.pointerMode.includes(t)}destroy(){const t=`${this.name}ChangeOptions`;this.element.removeEventListener(t,this.handleOptionsChange.bind(this));const e=`${this.name}ChangeState`;this.element.removeEventListener(e,this.handleStateChange.bind(this))}}class nj{constructor(){this.activeGestures=new Map}registerActiveGesture(t,e){this.activeGestures.has(t)||this.activeGestures.set(t,new Set);const r=this.activeGestures.get(t),i={gesture:e,element:t};r.add(i)}unregisterActiveGesture(t,e){const r=this.activeGestures.get(t);r&&(r.forEach(i=>{i.gesture===e&&r.delete(i)}),r.size===0&&this.activeGestures.delete(t))}getActiveGestures(t){const e=this.activeGestures.get(t);return e?Array.from(e).reduce((r,i)=>(r[i.gesture.name]=!0,r),{}):{}}isGestureActive(t,e){const r=this.activeGestures.get(t);return r?Array.from(r).some(i=>i.gesture===e):!1}destroy(){this.activeGestures.clear()}unregisterElement(t){this.activeGestures.delete(t)}}class rj{constructor(){this.pressedKeys=new Set,this.handleKeyDown=t=>{this.pressedKeys.add(t.key)},this.handleKeyUp=t=>{this.pressedKeys.delete(t.key)},this.clearKeys=()=>{this.pressedKeys.clear()},this.initialize()}initialize(){typeof window>"u"||(window.addEventListener("keydown",this.handleKeyDown),window.addEventListener("keyup",this.handleKeyUp),window.addEventListener("blur",this.clearKeys))}areKeysPressed(t){return!t||t.length===0?!0:t.every(e=>e==="ControlOrMeta"?this.pressedKeys.has("Control")||this.pressedKeys.has("Meta"):this.pressedKeys.has(e))}destroy(){typeof window<"u"&&(window.removeEventListener("keydown",this.handleKeyDown),window.removeEventListener("keyup",this.handleKeyUp),window.removeEventListener("blur",this.clearKeys)),this.clearKeys()}}class ij{constructor(t){this.root=void 0,this.touchAction=void 0,this.passive=void 0,this.preventEventInterruption=!0,this.pointers=new Map,this.gestureHandlers=new Set,this.handleInterruptEvents=e=>{if(this.preventEventInterruption&&"pointerType"in e&&e.pointerType==="touch"){e.preventDefault();return}const r=new PointerEvent("forceCancel",{bubbles:!1,cancelable:!1}),i=this.pointers.values().next().value;if(this.pointers.size>0&&i){Object.defineProperties(r,{clientX:{value:i.clientX},clientY:{value:i.clientY},pointerId:{value:i.pointerId},pointerType:{value:i.pointerType}});for(const[a,s]of this.pointers.entries()){const l=X({},s,{type:"forceCancel"});this.pointers.set(a,l)}}this.notifyHandlers(r),this.pointers.clear()},this.handlePointerEvent=e=>{const{type:r,pointerId:i}=e;if(r==="pointerdown"||r==="pointermove")this.pointers.set(i,this.createPointerData(e));else if(r==="pointerup"||r==="pointercancel"||r==="forceCancel"){this.pointers.set(i,this.createPointerData(e)),this.notifyHandlers(e),this.pointers.delete(i);return}this.notifyHandlers(e)},this.root=t.root??document.getRootNode({composed:!0}),this.touchAction=t.touchAction||"auto",this.passive=t.passive??!1,this.preventEventInterruption=t.preventEventInterruption??!1,this.setupEventListeners()}registerGestureHandler(t){return this.gestureHandlers.add(t),()=>{this.gestureHandlers.delete(t)}}getPointers(){return new Map(this.pointers)}setupEventListeners(){this.touchAction!=="auto"&&(this.root.style.touchAction=this.touchAction),this.root.addEventListener("pointerdown",this.handlePointerEvent,{passive:this.passive}),this.root.addEventListener("pointermove",this.handlePointerEvent,{passive:this.passive}),this.root.addEventListener("pointerup",this.handlePointerEvent,{passive:this.passive}),this.root.addEventListener("pointercancel",this.handlePointerEvent,{passive:this.passive}),this.root.addEventListener("forceCancel",this.handlePointerEvent,{passive:this.passive}),this.root.addEventListener("blur",this.handleInterruptEvents),this.root.addEventListener("contextmenu",this.handleInterruptEvents)}notifyHandlers(t){this.gestureHandlers.forEach(e=>e(this.pointers,t))}createPointerData(t){return{pointerId:t.pointerId,clientX:t.clientX,clientY:t.clientY,pageX:t.pageX,pageY:t.pageY,target:t.target,timeStamp:t.timeStamp,type:t.type,isPrimary:t.isPrimary,pressure:t.pressure,width:t.width,height:t.height,pointerType:t.pointerType,srcEvent:t}}destroy(){this.root.removeEventListener("pointerdown",this.handlePointerEvent),this.root.removeEventListener("pointermove",this.handlePointerEvent),this.root.removeEventListener("pointerup",this.handlePointerEvent),this.root.removeEventListener("pointercancel",this.handlePointerEvent),this.root.removeEventListener("forceCancel",this.handlePointerEvent),this.root.removeEventListener("blur",this.handleInterruptEvents),this.root.removeEventListener("contextmenu",this.handleInterruptEvents),this.pointers.clear(),this.gestureHandlers.clear()}}class aj{constructor(t){this.gestureTemplates=new Map,this.elementGestureMap=new Map,this.activeGesturesRegistry=new nj,this.pointerManager=void 0,this.keyboardManager=new rj,this.pointerManager=new ij({root:t.root,touchAction:t.touchAction,passive:t.passive}),t.gestures&&t.gestures.length>0&&t.gestures.forEach(e=>{this.addGestureTemplate(e)})}addGestureTemplate(t){this.gestureTemplates.has(t.name)&&console.warn(`Gesture template with name "${t.name}" already exists. It will be overwritten.`),this.gestureTemplates.set(t.name,t)}setGestureOptions(t,e,r){const i=this.elementGestureMap.get(e);if(!i||!i.has(t)){console.error(`Gesture "${t}" not found on the provided element.`);return}const a=new CustomEvent(`${t}ChangeOptions`,{detail:r,bubbles:!1,cancelable:!1,composed:!1});e.dispatchEvent(a)}setGestureState(t,e,r){const i=this.elementGestureMap.get(e);if(!i||!i.has(t)){console.error(`Gesture "${t}" not found on the provided element.`);return}const a=new CustomEvent(`${t}ChangeState`,{detail:r,bubbles:!1,cancelable:!1,composed:!1});e.dispatchEvent(a)}registerElement(t,e,r){return Array.isArray(t)||(t=[t]),t.forEach(i=>{const a=r==null?void 0:r[i];this.registerSingleGesture(i,e,a)}),e}registerSingleGesture(t,e,r){const i=this.gestureTemplates.get(t);if(!i)return console.error(`Gesture template "${t}" not found.`),!1;this.elementGestureMap.has(e)||this.elementGestureMap.set(e,new Map);const a=this.elementGestureMap.get(e);a.has(t)&&(console.warn(`Element already has gesture "${t}" registered. It will be replaced.`),this.unregisterElement(t,e));const s=i.clone(r);return s.init(e,this.pointerManager,this.activeGesturesRegistry,this.keyboardManager),a.set(t,s),!0}unregisterElement(t,e){const r=this.elementGestureMap.get(e);return!r||!r.has(t)?!1:(r.get(t).destroy(),r.delete(t),this.activeGesturesRegistry.unregisterElement(e),r.size===0&&this.elementGestureMap.delete(e),!0)}unregisterAllGestures(t){const e=this.elementGestureMap.get(t);if(e){for(const[,r]of e)r.destroy(),this.activeGesturesRegistry.unregisterElement(t);this.elementGestureMap.delete(t)}}destroy(){for(const[t]of this.elementGestureMap)this.unregisterAllGestures(t);this.gestureTemplates.clear(),this.elementGestureMap.clear(),this.activeGesturesRegistry.destroy(),this.keyboardManager.destroy(),this.pointerManager.destroy()}}class ld extends S4{constructor(t){super(t),this.unregisterHandler=null,this.originalTarget=null,this.optionsType=void 0,this.mutableOptionsType=void 0,this.minPointers=void 0,this.maxPointers=void 0,this.minPointers=t.minPointers??1,this.maxPointers=t.maxPointers??1/0}init(t,e,r,i){super.init(t,e,r,i),this.unregisterHandler=this.pointerManager.registerGestureHandler(this.handlePointerEvent.bind(this))}updateOptions(t){super.updateOptions(t),this.minPointers=t.minPointers??this.minPointers,this.maxPointers=t.maxPointers??this.maxPointers}getRelevantPointers(t,e){return t.filter(r=>this.isPointerTypeAllowed(r.pointerType)&&(e===r.target||r.target===this.originalTarget||e===this.originalTarget||"contains"in e&&e.contains(r.target))||"getRootNode"in e&&e.getRootNode()instanceof ShadowRoot&&r.srcEvent.composedPath().includes(e))}destroy(){this.unregisterHandler&&(this.unregisterHandler(),this.unregisterHandler=null),super.destroy()}}function sj(n,t){const e=t.x-n.x,r=t.y-n.y;return Math.sqrt(e*e+r*r)}function Fv(n){if(n.length<2)return 0;let t=0,e=0;for(let r=0;r<n.length;r+=1)for(let i=r+1;i<n.length;i+=1)t+=sj({x:n[r].clientX,y:n[r].clientY},{x:n[i].clientX,y:n[i].clientY}),e+=1;return e>0?t/e:0}function ls(n){if(n.length===0)return{x:0,y:0};const t=n.reduce((e,r)=>(e.x+=r.clientX,e.y+=r.clientY,e),{x:0,y:0});return{x:t.x/n.length,y:t.y/n.length}}function kc(n,t){return`${n}${t==="ongoing"?"":t.charAt(0).toUpperCase()+t.slice(1)}`}const r1=1e-5,Qs=1e-5,QS=.15;function oj(n,t){const e=t.x-n.x,r=t.y-n.y,i={vertical:null,horizontal:null,mainAxis:null},a=lj(t,n),s=Math.abs(e)>Math.abs(r)?"horizontal":"vertical",l=a||s==="horizontal"?r1:QS,c=a?r1:s==="horizontal"?QS:r1;return Math.abs(e)>l&&(i.horizontal=e>0?"right":"left"),Math.abs(r)>c&&(i.vertical=r>0?"down":"up"),i.mainAxis=a?"diagonal":s,i}function lj(n,t){const e=t.x-n.x,r=t.y-n.y,i=Math.atan2(r,e)*180/Math.PI;return i>=-45+Qs&&i<=-22.5+Qs||i>=22.5+Qs&&i<=45+Qs||i>=135+Qs&&i<=157.5+Qs||i>=-157.5+Qs&&i<=-135+Qs}function uj(n,t){if(!n.vertical&&!n.horizontal)return!1;if(t.length===0)return!0;const e=n.vertical===null||t.includes(n.vertical),r=n.horizontal===null||t.includes(n.horizontal);return e&&r}const JS=0,cj=n=>n>JS?1:n<-JS?-1:0;class C2 extends ld{constructor(t){super(t),this.state={lastPosition:null},this.isSinglePhase=void 0,this.eventType=void 0,this.optionsType=void 0,this.mutableOptionsType=void 0,this.mutableStateType=void 0,this.threshold=void 0,this.handleElementEnterBound=void 0,this.handleElementLeaveBound=void 0,this.handleElementEnterBound=this.handleElementEnter.bind(this),this.handleElementLeaveBound=this.handleElementLeave.bind(this),this.threshold=t.threshold||0}clone(t){return new C2(X({name:this.name,preventDefault:this.preventDefault,stopPropagation:this.stopPropagation,threshold:this.threshold,minPointers:this.minPointers,maxPointers:this.maxPointers,requiredKeys:[...this.requiredKeys],pointerMode:[...this.pointerMode],preventIf:[...this.preventIf]},t))}init(t,e,r,i){super.init(t,e,r,i),this.element.addEventListener("pointerenter",this.handleElementEnterBound),this.element.addEventListener("pointerleave",this.handleElementLeaveBound)}destroy(){this.element.removeEventListener("pointerenter",this.handleElementEnterBound),this.element.removeEventListener("pointerleave",this.handleElementLeaveBound),this.resetState(),super.destroy()}updateOptions(t){super.updateOptions(t)}resetState(){this.isActive=!1,this.state={lastPosition:null}}handleElementEnter(t){if(t.pointerType!=="mouse"&&t.pointerType!=="pen")return;const e=this.pointerManager.getPointers()||new Map,r=Array.from(e.values());if(r.length>=this.minPointers&&r.length<=this.maxPointers){this.isActive=!0;const i={x:t.clientX,y:t.clientY};this.state.lastPosition=i,this.emitMoveEvent(this.element,"start",r,t),this.emitMoveEvent(this.element,"ongoing",r,t)}}handleElementLeave(t){if(t.pointerType!=="mouse"&&t.pointerType!=="pen"||!this.isActive)return;const e=this.pointerManager.getPointers()||new Map,r=Array.from(e.values());this.emitMoveEvent(this.element,"end",r,t),this.resetState()}handlePointerEvent(t,e){if(e.type!=="pointermove"||e.pointerType!=="mouse"&&e.pointerType!=="pen")return;this.preventDefault&&e.preventDefault(),this.stopPropagation&&e.stopPropagation();const r=Array.from(t.values()),i=this.getTargetElement(e);if(!i||r.length<this.minPointers||r.length>this.maxPointers)return;if(this.shouldPreventGesture(i)){if(!this.isActive)return;this.resetState(),this.emitMoveEvent(i,"end",r,e);return}const a={x:e.clientX,y:e.clientY};this.state.lastPosition=a,this.isActive||(this.isActive=!0,this.emitMoveEvent(i,"start",r,e)),this.emitMoveEvent(i,"ongoing",r,e)}emitMoveEvent(t,e,r,i){const a=this.state.lastPosition||ls(r),s=this.gesturesRegistry.getActiveGestures(t),l={gestureName:this.name,centroid:a,target:i.target,srcEvent:i,phase:e,pointers:r,timeStamp:i.timeStamp,activeGestures:s,customData:this.customData},c=kc(this.name,e),f=new CustomEvent(c,{bubbles:!0,cancelable:!0,composed:!0,detail:l});t.dispatchEvent(f)}}class I2 extends ld{constructor(t){super(t),this.state={startPointers:new Map,startCentroid:null,lastCentroid:null,movementThresholdReached:!1,totalDeltaX:0,totalDeltaY:0,activeDeltaX:0,activeDeltaY:0,lastDirection:{vertical:null,horizontal:null,mainAxis:null},lastDeltas:null},this.isSinglePhase=void 0,this.eventType=void 0,this.optionsType=void 0,this.mutableOptionsType=void 0,this.mutableStateType=void 0,this.threshold=void 0,this.direction=void 0,this.direction=t.direction||["up","down","left","right"],this.threshold=t.threshold||0}clone(t){return new I2(X({name:this.name,preventDefault:this.preventDefault,stopPropagation:this.stopPropagation,threshold:this.threshold,minPointers:this.minPointers,maxPointers:this.maxPointers,direction:[...this.direction],requiredKeys:[...this.requiredKeys],pointerMode:[...this.pointerMode],preventIf:[...this.preventIf]},t))}destroy(){this.resetState(),super.destroy()}updateOptions(t){super.updateOptions(t),this.direction=t.direction||this.direction}resetState(){this.isActive=!1,this.state=X({},this.state,{startPointers:new Map,startCentroid:null,lastCentroid:null,lastDeltas:null,activeDeltaX:0,activeDeltaY:0,movementThresholdReached:!1,lastDirection:{vertical:null,horizontal:null,mainAxis:null}})}handlePointerEvent(t,e){const r=Array.from(t.values());if(e.type==="forceCancel"){this.cancel(e.target,r,e);return}const i=this.getTargetElement(e);if(!i)return;if(this.shouldPreventGesture(i)){this.cancel(i,r,e);return}const a=this.getRelevantPointers(r,i);if(a.length<this.minPointers||a.length>this.maxPointers){this.cancel(i,a,e);return}switch(e.type){case"pointerdown":!this.isActive&&!this.state.startCentroid&&(a.forEach(s=>{this.state.startPointers.set(s.pointerId,s)}),this.originalTarget=i,this.state.startCentroid=ls(a),this.state.lastCentroid=X({},this.state.startCentroid));break;case"pointermove":if(this.state.startCentroid&&a.length>=this.minPointers){const s=ls(a),l=s.x-this.state.startCentroid.x,c=s.y-this.state.startCentroid.y,f=Math.sqrt(l*l+c*c),d=oj(this.state.lastCentroid??this.state.startCentroid,s),g=this.state.lastCentroid?s.x-this.state.lastCentroid.x:0,m=this.state.lastCentroid?s.y-this.state.lastCentroid.y:0;!this.state.movementThresholdReached&&f>=this.threshold&&uj(d,this.direction)?(this.state.movementThresholdReached=!0,this.isActive=!0,this.state.lastDeltas={x:g,y:m},this.state.totalDeltaX+=g,this.state.totalDeltaY+=m,this.state.activeDeltaX+=g,this.state.activeDeltaY+=m,this.emitPanEvent(i,"start",a,e,s),this.emitPanEvent(i,"ongoing",a,e,s)):this.state.movementThresholdReached&&this.isActive&&(this.state.lastDeltas={x:g,y:m},this.state.totalDeltaX+=g,this.state.totalDeltaY+=m,this.state.activeDeltaX+=g,this.state.activeDeltaY+=m,this.emitPanEvent(i,"ongoing",a,e,s)),this.state.lastCentroid=s,this.state.lastDirection=d}break;case"pointerup":case"pointercancel":case"forceCancel":if(this.isActive&&this.state.movementThresholdReached){if(a.filter(s=>s.type!=="pointerup"&&s.type!=="pointercancel").length<this.minPointers){const s=this.state.lastCentroid||this.state.startCentroid;e.type==="pointercancel"&&this.emitPanEvent(i,"cancel",a,e,s),this.emitPanEvent(i,"end",a,e,s),this.resetState()}}else this.resetState();break}}emitPanEvent(t,e,r,i,a){var C,I;if(!this.state.startCentroid)return;const s=((C=this.state.lastDeltas)==null?void 0:C.x)??0,l=((I=this.state.lastDeltas)==null?void 0:I.y)??0,c=this.state.startPointers.values().next().value,f=c?(i.timeStamp-c.timeStamp)/1e3:0,d=f>0?s/f:0,g=f>0?l/f:0,m=Math.sqrt(d*d+g*g),v=this.gesturesRegistry.getActiveGestures(t),_={gestureName:this.name,initialCentroid:this.state.startCentroid,centroid:a,target:i.target,srcEvent:i,phase:e,pointers:r,timeStamp:i.timeStamp,deltaX:s,deltaY:l,direction:this.state.lastDirection,velocityX:d,velocityY:g,velocity:m,totalDeltaX:this.state.totalDeltaX,totalDeltaY:this.state.totalDeltaY,activeDeltaX:this.state.activeDeltaX,activeDeltaY:this.state.activeDeltaY,activeGestures:v,customData:this.customData},w=kc(this.name,e),b=new CustomEvent(w,{bubbles:!0,cancelable:!0,composed:!0,detail:_});t.dispatchEvent(b),this.preventDefault&&i.preventDefault(),this.stopPropagation&&i.stopPropagation()}cancel(t,e,r){if(this.isActive){const i=t??this.element;this.emitPanEvent(i,"cancel",e,r,this.state.lastCentroid),this.emitPanEvent(i,"end",e,r,this.state.lastCentroid)}this.resetState()}}class R2 extends ld{constructor(t){super(X({},t,{minPointers:t.minPointers??2})),this.state={startDistance:0,lastDistance:0,lastScale:1,lastTime:0,velocity:0,totalScale:1,deltaScale:0},this.isSinglePhase=void 0,this.eventType=void 0,this.optionsType=void 0,this.mutableOptionsType=void 0,this.mutableStateType=void 0,this.threshold=void 0,this.threshold=t.threshold??0}clone(t){return new R2(X({name:this.name,preventDefault:this.preventDefault,stopPropagation:this.stopPropagation,threshold:this.threshold,minPointers:this.minPointers,maxPointers:this.maxPointers,requiredKeys:[...this.requiredKeys],pointerMode:[...this.pointerMode],preventIf:[...this.preventIf]},t))}destroy(){this.resetState(),super.destroy()}updateOptions(t){super.updateOptions(t)}resetState(){this.isActive=!1,this.state=X({},this.state,{startDistance:0,lastDistance:0,lastScale:1,lastTime:0,velocity:0,deltaScale:0})}handlePointerEvent(t,e){const r=Array.from(t.values()),i=this.getTargetElement(e);if(!i)return;if(this.shouldPreventGesture(i)){this.isActive&&(this.emitPinchEvent(i,"cancel",r,e),this.resetState());return}const a=this.getRelevantPointers(r,i);switch(e.type){case"pointerdown":if(a.length>=2&&!this.isActive){const s=Fv(a);this.state.startDistance=s,this.state.lastDistance=s,this.state.lastTime=e.timeStamp,this.originalTarget=i}break;case"pointermove":if(this.state.startDistance&&a.length>=this.minPointers){const s=Fv(a),l=Math.abs(s-this.state.lastDistance);if(l!==0&&l>=this.threshold){const c=this.state.startDistance?s/this.state.startDistance:1,f=c/this.state.lastScale;this.state.totalScale*=f;const d=(e.timeStamp-this.state.lastTime)/1e3;if(this.state.lastDistance){const m=(s-this.state.lastDistance)/d;this.state.velocity=Number.isNaN(m)?0:m}this.state.lastDistance=s,this.state.deltaScale=c-this.state.lastScale,this.state.lastScale=c,this.state.lastTime=e.timeStamp,this.isActive?this.emitPinchEvent(i,"ongoing",a,e):(this.isActive=!0,this.emitPinchEvent(i,"start",a,e),this.emitPinchEvent(i,"ongoing",a,e))}}break;case"pointerup":case"pointercancel":case"forceCancel":if(this.isActive){const s=a.filter(l=>l.type!=="pointerup"&&l.type!=="pointercancel");if(s.length<this.minPointers)e.type==="pointercancel"&&this.emitPinchEvent(i,"cancel",a,e),this.emitPinchEvent(i,"end",a,e),this.resetState();else if(s.length>=2){const l=Fv(s);this.state.startDistance=l/this.state.lastScale}}break}}emitPinchEvent(t,e,r,i){const a=ls(r),s=this.state.lastDistance,l=this.state.lastScale,c=this.gesturesRegistry.getActiveGestures(t),f={gestureName:this.name,centroid:a,target:i.target,srcEvent:i,phase:e,pointers:r,timeStamp:i.timeStamp,scale:l,deltaScale:this.state.deltaScale,totalScale:this.state.totalScale,distance:s,velocity:this.state.velocity,activeGestures:c,direction:cj(this.state.velocity),customData:this.customData};this.preventDefault&&i.preventDefault(),this.stopPropagation&&i.stopPropagation();const d=kc(this.name,e),g=new CustomEvent(d,{bubbles:!0,cancelable:!0,composed:!0,detail:f});t.dispatchEvent(g)}}class D2 extends ld{constructor(t){super(t),this.state={startCentroid:null,lastPosition:null,timerId:null,startTime:0,pressThresholdReached:!1},this.isSinglePhase=void 0,this.eventType=void 0,this.optionsType=void 0,this.mutableOptionsType=void 0,this.mutableStateType=void 0,this.duration=void 0,this.maxDistance=void 0,this.duration=t.duration??500,this.maxDistance=t.maxDistance??10}clone(t){return new D2(X({name:this.name,preventDefault:this.preventDefault,stopPropagation:this.stopPropagation,minPointers:this.minPointers,maxPointers:this.maxPointers,duration:this.duration,maxDistance:this.maxDistance,requiredKeys:[...this.requiredKeys],pointerMode:[...this.pointerMode],preventIf:[...this.preventIf]},t))}destroy(){this.clearPressTimer(),this.resetState(),super.destroy()}updateOptions(t){super.updateOptions(t),this.duration=t.duration??this.duration,this.maxDistance=t.maxDistance??this.maxDistance}resetState(){this.clearPressTimer(),this.isActive=!1,this.state=X({},this.state,{startCentroid:null,lastPosition:null,timerId:null,startTime:0,pressThresholdReached:!1})}clearPressTimer(){this.state.timerId!==null&&(clearTimeout(this.state.timerId),this.state.timerId=null)}handlePointerEvent(t,e){const r=Array.from(t.values());if(e.type==="forceCancel"){this.cancelPress(e.target,r,e);return}const i=this.getTargetElement(e);if(!i)return;if(this.shouldPreventGesture(i)){this.isActive&&this.cancelPress(i,r,e);return}const a=this.getRelevantPointers(r,i);if(a.length<this.minPointers||a.length>this.maxPointers){this.isActive&&this.cancelPress(i,a,e);return}switch(e.type){case"pointerdown":!this.isActive&&!this.state.startCentroid&&(this.state.startCentroid=ls(a),this.state.lastPosition=X({},this.state.startCentroid),this.state.startTime=e.timeStamp,this.isActive=!0,this.originalTarget=i,this.clearPressTimer(),this.state.timerId=setTimeout(()=>{if(this.isActive&&this.state.startCentroid){this.state.pressThresholdReached=!0;const s=this.state.lastPosition;this.emitPressEvent(i,"start",a,e,s),this.emitPressEvent(i,"ongoing",a,e,s)}},this.duration));break;case"pointermove":if(this.isActive&&this.state.startCentroid){const s=ls(a);this.state.lastPosition=s;const l=s.x-this.state.startCentroid.x,c=s.y-this.state.startCentroid.y;Math.sqrt(l*l+c*c)>this.maxDistance&&this.cancelPress(i,a,e)}break;case"pointerup":if(this.isActive){if(this.state.pressThresholdReached){const s=this.state.lastPosition||this.state.startCentroid;this.emitPressEvent(i,"end",a,e,s)}this.resetState()}break;case"pointercancel":case"forceCancel":this.cancelPress(i,a,e);break}}emitPressEvent(t,e,r,i,a){const s=this.gesturesRegistry.getActiveGestures(t),l=i.timeStamp-this.state.startTime,c={gestureName:this.name,centroid:a,target:i.target,srcEvent:i,phase:e,pointers:r,timeStamp:i.timeStamp,x:a.x,y:a.y,duration:l,activeGestures:s,customData:this.customData},f=kc(this.name,e),d=new CustomEvent(f,{bubbles:!0,cancelable:!0,composed:!0,detail:c});t.dispatchEvent(d),this.preventDefault&&i.preventDefault(),this.stopPropagation&&i.stopPropagation()}cancelPress(t,e,r){if(this.isActive&&this.state.pressThresholdReached){const i=this.state.lastPosition||this.state.startCentroid;this.emitPressEvent(t??this.element,"cancel",e,r,i),this.emitPressEvent(t??this.element,"end",e,r,i)}this.resetState()}}class O2 extends ld{constructor(t){super(t),this.state={startCentroid:null,currentTapCount:0,lastTapTime:0,lastPosition:null},this.isSinglePhase=void 0,this.eventType=void 0,this.optionsType=void 0,this.mutableOptionsType=void 0,this.mutableStateType=void 0,this.maxDistance=void 0,this.taps=void 0,this.maxDistance=t.maxDistance??10,this.taps=t.taps??1}clone(t){return new O2(X({name:this.name,preventDefault:this.preventDefault,stopPropagation:this.stopPropagation,minPointers:this.minPointers,maxPointers:this.maxPointers,maxDistance:this.maxDistance,taps:this.taps,requiredKeys:[...this.requiredKeys],pointerMode:[...this.pointerMode],preventIf:[...this.preventIf]},t))}destroy(){this.resetState(),super.destroy()}updateOptions(t){super.updateOptions(t),this.maxDistance=t.maxDistance??this.maxDistance,this.taps=t.taps??this.taps}resetState(){this.isActive=!1,this.state={startCentroid:null,currentTapCount:0,lastTapTime:0,lastPosition:null}}handlePointerEvent(t,e){const r=Array.from(t.values()),i=this.getTargetElement(e);if(!i)return;const a=this.getRelevantPointers(r,i);if(this.shouldPreventGesture(i)||a.length<this.minPointers||a.length>this.maxPointers){this.isActive&&this.cancelTap(i,a,e);return}switch(e.type){case"pointerdown":this.isActive||(this.state.startCentroid=ls(a),this.state.lastPosition=X({},this.state.startCentroid),this.isActive=!0,this.originalTarget=i);break;case"pointermove":if(this.isActive&&this.state.startCentroid){const s=ls(a);this.state.lastPosition=s;const l=s.x-this.state.startCentroid.x,c=s.y-this.state.startCentroid.y;Math.sqrt(l*l+c*c)>this.maxDistance&&this.cancelTap(i,a,e)}break;case"pointerup":if(this.isActive){this.state.currentTapCount+=1;const s=this.state.lastPosition||this.state.startCentroid;if(!s){this.cancelTap(i,a,e);return}this.state.currentTapCount>=this.taps?(this.fireTapEvent(i,a,e,s),this.resetState()):(this.state.lastTapTime=e.timeStamp,this.isActive=!1,this.state.startCentroid=null,setTimeout(()=>{this.state&&this.state.currentTapCount>0&&this.state.currentTapCount<this.taps&&(this.state.currentTapCount=0)},300))}break;case"pointercancel":case"forceCancel":this.cancelTap(i,a,e);break}}fireTapEvent(t,e,r,i){const a=this.gesturesRegistry.getActiveGestures(t),s={gestureName:this.name,centroid:i,target:r.target,srcEvent:r,phase:"end",pointers:e,timeStamp:r.timeStamp,x:i.x,y:i.y,tapCount:this.state.currentTapCount,activeGestures:a,customData:this.customData},l=new CustomEvent(this.name,{bubbles:!0,cancelable:!0,composed:!0,detail:s});t.dispatchEvent(l),this.preventDefault&&r.preventDefault(),this.stopPropagation&&r.stopPropagation()}cancelTap(t,e,r){if(this.state.startCentroid||this.state.lastPosition){const i=this.state.lastPosition||this.state.startCentroid,a=this.gesturesRegistry.getActiveGestures(t),s={gestureName:this.name,centroid:i,target:r.target,srcEvent:r,phase:"cancel",pointers:e,timeStamp:r.timeStamp,x:i.x,y:i.y,tapCount:this.state.currentTapCount,activeGestures:a,customData:this.customData},l=kc(this.name,"cancel"),c=new CustomEvent(l,{bubbles:!0,cancelable:!0,composed:!0,detail:s});t.dispatchEvent(c)}this.resetState()}}class M2 extends S4{constructor(t){super(t),this.state={totalDeltaX:0,totalDeltaY:0,totalDeltaZ:0},this.isSinglePhase=void 0,this.eventType=void 0,this.optionsType=void 0,this.mutableOptionsType=void 0,this.mutableStateType=void 0,this.sensitivity=void 0,this.max=void 0,this.min=void 0,this.initialDelta=void 0,this.invert=void 0,this.handleWheelEventBound=void 0,this.sensitivity=t.sensitivity??1,this.max=t.max??Number.MAX_SAFE_INTEGER,this.min=t.min??Number.MIN_SAFE_INTEGER,this.initialDelta=t.initialDelta??0,this.invert=t.invert??!1,this.state.totalDeltaX=this.initialDelta,this.state.totalDeltaY=this.initialDelta,this.state.totalDeltaZ=this.initialDelta,this.handleWheelEventBound=this.handleWheelEvent.bind(this)}clone(t){return new M2(X({name:this.name,preventDefault:this.preventDefault,stopPropagation:this.stopPropagation,sensitivity:this.sensitivity,max:this.max,min:this.min,initialDelta:this.initialDelta,invert:this.invert,requiredKeys:[...this.requiredKeys],pointerMode:[...this.pointerMode],preventIf:[...this.preventIf]},t))}init(t,e,r,i){super.init(t,e,r,i),this.element.addEventListener("wheel",this.handleWheelEventBound)}destroy(){this.element.removeEventListener("wheel",this.handleWheelEventBound),this.resetState(),super.destroy()}resetState(){this.isActive=!1,this.state={totalDeltaX:0,totalDeltaY:0,totalDeltaZ:0}}updateOptions(t){super.updateOptions(t),this.sensitivity=t.sensitivity??this.sensitivity,this.max=t.max??this.max,this.min=t.min??this.min,this.initialDelta=t.initialDelta??this.initialDelta,this.invert=t.invert??this.invert}handleWheelEvent(t){if(this.shouldPreventGesture(this.element))return;const e=this.pointerManager.getPointers()||new Map,r=Array.from(e.values());this.state.totalDeltaX+=t.deltaX*this.sensitivity*(this.invert?-1:1),this.state.totalDeltaY+=t.deltaY*this.sensitivity*(this.invert?-1:1),this.state.totalDeltaZ+=t.deltaZ*this.sensitivity*(this.invert?-1:1),["totalDeltaX","totalDeltaY","totalDeltaZ"].forEach(i=>{this.state[i]<this.min&&(this.state[i]=this.min),this.state[i]>this.max&&(this.state[i]=this.max)}),this.emitWheelEvent(r,t)}emitWheelEvent(t,e){const r=t.length>0?ls(t):{x:e.clientX,y:e.clientY},i=this.gesturesRegistry.getActiveGestures(this.element),a={gestureName:this.name,centroid:r,target:e.target,srcEvent:e,phase:"ongoing",pointers:t,timeStamp:e.timeStamp,deltaX:e.deltaX*this.sensitivity*(this.invert?-1:1),deltaY:e.deltaY*this.sensitivity*(this.invert?-1:1),deltaZ:e.deltaZ*this.sensitivity*(this.invert?-1:1),deltaMode:e.deltaMode,totalDeltaX:this.state.totalDeltaX,totalDeltaY:this.state.totalDeltaY,totalDeltaZ:this.state.totalDeltaZ,activeGestures:i,customData:this.customData};this.preventDefault&&e.preventDefault(),this.stopPropagation&&e.stopPropagation();const s=kc(this.name,"ongoing"),l=new CustomEvent(s,{bubbles:!0,cancelable:!0,composed:!0,detail:a});this.element.dispatchEvent(l)}}const ku=n=>n.preventDefault(),N2=({svgRef:n})=>{H.useEffect(()=>{const e=n.current;if(!e)return;const r=new aj({gestures:[new I2({name:"pan",threshold:0,maxPointers:1}),new C2({name:"move",preventIf:["pan","pinch"]}),new R2({name:"pinch",threshold:5,preventIf:["pan"]}),new M2({name:"turnWheel",sensitivity:.01,initialDelta:1}),new O2({name:"tap",maxDistance:10,preventIf:["pan","pinch"]}),new D2({name:"quickPress",duration:50,maxDistance:10})]});return r.registerElement(["pan","move","pinch","turnWheel","tap","quickPress"],e),()=>{r.destroy()}},[n]);const t=H.useCallback((e,r,i)=>{const a=n.current;return a==null||a.addEventListener(e,r,i),{cleanup:()=>a==null?void 0:a.removeEventListener(e,r)}},[n]);return H.useEffect(()=>{const e=n.current;return e==null||e.addEventListener("gesturestart",ku),e==null||e.addEventListener("gesturechange",ku),e==null||e.addEventListener("gestureend",ku),()=>{e==null||e.removeEventListener("gesturestart",ku),e==null||e.removeEventListener("gesturechange",ku),e==null||e.removeEventListener("gestureend",ku)}},[n]),{instance:{addInteractionListener:t}}};N2.params={};N2.getInitialState=()=>({});const fj=[T2,S2,Wg,Yg,N2,Xg],hj=["apiRef"],dj=n=>{let{plugins:t}=n,e=_e(n.props,hj);const r={};t.forEach(s=>{Object.assign(r,s.params)});const i={};return Object.keys(e).forEach(s=>{const l=e[s];r[s]&&(i[s]=l)}),t.reduce((s,l)=>l.getDefaultizedParams?l.getDefaultizedParams({params:s}):s,i)};let tT=0;function gj(n,t,e){const r=dC(),i=H.useMemo(()=>[...fj,...n],[n]),a=dj({plugins:i,props:t});a.id=a.id??r;const l=H.useRef({}).current,c=mj(t.apiRef),f=H.useRef(null),d=H.useRef(null),g=H.useRef(null);if(g.current==null){tT+=1;const _={cacheKey:{id:tT}};i.forEach(w=>{w.getInitialState&&Object.assign(_,w.getInitialState(a,_,e))}),g.current=new hF(_)}const m=_=>{const w=_({instance:l,params:a,plugins:i,store:g.current,svgRef:d,chartRootRef:f,seriesConfig:e});w.publicAPI&&Object.assign(c.current,w.publicAPI),w.instance&&Object.assign(l,w.instance)};return i.forEach(m),{contextValue:H.useMemo(()=>({store:g.current,publicAPI:c.current,instance:l,svgRef:d,chartRootRef:f}),[l,c])}}function pj(n){return n.current==null&&(n.current={}),n}function mj(n){const t=H.useRef({});return n?pj(n):t}const T4=H.createContext(null),C4=()=>{},I4=4,R4=20+2*I4,vj=40+2*I4,yj="hover",xj={top:5,bottom:5,left:5,right:5},i1={minStart:0,maxEnd:100,step:5,minSpan:10,maxSpan:100,panning:!0,filterMode:"keep",slider:{enabled:!1,preview:!1,size:R4,showTooltip:yj}},P2=(n,t,e)=>{var r;if(n)return n===!0?X({axisId:t,axisDirection:e},i1):X({axisId:t,axisDirection:e},i1,n,{slider:X({},i1.slider,{size:((r=n.slider)==null?void 0:r.preview)??i1.slider.preview?vj:R4},n.slider)})};function D4(n,t){const e={top:0,bottom:0,none:0};return(n&&n.length>0?n:[{id:w2,scaleType:"linear"}]).map((a,s)=>{var v;const l=a.dataKey,c=s===0?"bottom":"none",f=a.position??c,d=fF+(a.label?g4:0),g=a.id??`defaultized-x-axis-${s}`,m=X({offset:e[f]},a,{id:g,position:f,height:a.height??d,zoom:P2(a.zoom,g,"x")});if(f!=="none"&&(e[f]+=m.height,(v=m.zoom)!=null&&v.slider.enabled&&(e[f]+=m.zoom.slider.size)),l===void 0||a.data!==void 0)return m;if(t===void 0)throw new Error("MUI X Charts: x-axis uses `dataKey` but no `dataset` is provided.");return X({},m,{data:t.map(_=>_[l])})})}function O4(n,t){const e={right:0,left:0,none:0};return(n&&n.length>0?n:[{id:b2,scaleType:"linear"}]).map((a,s)=>{var v;const l=a.dataKey,c=s===0?"left":"none",f=a.position??c,d=cF+(a.label?g4:0),g=a.id??`defaultized-y-axis-${s}`,m=X({offset:e[f]},a,{id:g,position:f,width:a.width??d,zoom:P2(a.zoom,g,"y")});if(f!=="none"&&(e[f]+=m.width,(v=m.zoom)!=null&&v.slider.enabled&&(e[f]+=m.zoom.slider.size)),l===void 0||a.data!==void 0)return m;if(t===void 0)throw new Error("MUI X Charts: y-axis uses `dataKey` but no `dataset` is provided.");return X({},m,{data:t.map(_=>_[l])})})}function C1(n,t){return n==null||t==null?NaN:n<t?-1:n>t?1:n>=t?0:NaN}function _j(n,t){return n==null||t==null?NaN:t<n?-1:t>n?1:t>=n?0:NaN}function k2(n){let t,e,r;n.length!==2?(t=C1,e=(l,c)=>C1(n(l),c),r=(l,c)=>n(l)-c):(t=n===C1||n===_j?n:Aj,e=n,r=n);function i(l,c,f=0,d=l.length){if(f<d){if(t(c,c)!==0)return d;do{const g=f+d>>>1;e(l[g],c)<0?f=g+1:d=g}while(f<d)}return f}function a(l,c,f=0,d=l.length){if(f<d){if(t(c,c)!==0)return d;do{const g=f+d>>>1;e(l[g],c)<=0?f=g+1:d=g}while(f<d)}return f}function s(l,c,f=0,d=l.length){const g=i(l,c,f,d-1);return g>f&&r(l[g-1],c)>-r(l[g],c)?g-1:g}return{left:i,center:s,right:a}}function Aj(){return 0}function Ej(n){return n===null?NaN:+n}const wj=k2(C1),M4=wj.right;k2(Ej).center;class eT extends Map{constructor(t,e=Tj){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:e}}),t!=null)for(const[r,i]of t)this.set(r,i)}get(t){return super.get(nT(this,t))}has(t){return super.has(nT(this,t))}set(t,e){return super.set(bj(this,t),e)}delete(t){return super.delete(Sj(this,t))}}function nT({_intern:n,_key:t},e){const r=t(e);return n.has(r)?n.get(r):e}function bj({_intern:n,_key:t},e){const r=t(e);return n.has(r)?n.get(r):(n.set(r,e),e)}function Sj({_intern:n,_key:t},e){const r=t(e);return n.has(r)&&(e=n.get(r),n.delete(r)),e}function Tj(n){return n!==null&&typeof n=="object"?n.valueOf():n}const Cj=Math.sqrt(50),Ij=Math.sqrt(10),Rj=Math.sqrt(2);function Q1(n,t,e){const r=(t-n)/Math.max(0,e),i=Math.floor(Math.log10(r)),a=r/Math.pow(10,i),s=a>=Cj?10:a>=Ij?5:a>=Rj?2:1;let l,c,f;return i<0?(f=Math.pow(10,-i)/s,l=Math.round(n*f),c=Math.round(t*f),l/f<n&&++l,c/f>t&&--c,f=-f):(f=Math.pow(10,i)*s,l=Math.round(n/f),c=Math.round(t/f),l*f<n&&++l,c*f>t&&--c),c<l&&.5<=e&&e<2?Q1(n,t,e*2):[l,c,f]}function Ky(n,t,e){if(t=+t,n=+n,e=+e,!(e>0))return[];if(n===t)return[n];const r=t<n,[i,a,s]=r?Q1(t,n,e):Q1(n,t,e);if(!(a>=i))return[];const l=a-i+1,c=new Array(l);if(r)if(s<0)for(let f=0;f<l;++f)c[f]=(a-f)/-s;else for(let f=0;f<l;++f)c[f]=(a-f)*s;else if(s<0)for(let f=0;f<l;++f)c[f]=(i+f)/-s;else for(let f=0;f<l;++f)c[f]=(i+f)*s;return c}function Zy(n,t,e){return t=+t,n=+n,e=+e,Q1(n,t,e)[2]}function Qy(n,t,e){t=+t,n=+n,e=+e;const r=t<n,i=r?Zy(t,n,e):Zy(n,t,e);return(r?-1:1)*(i<0?1/-i:i)}function Dj(n,t,e){n=+n,t=+t,e=(i=arguments.length)<2?(t=n,n=0,1):i<3?1:+e;for(var r=-1,i=Math.max(0,Math.ceil((t-n)/e))|0,a=new Array(i);++r<i;)a[r]=n+r*e;return a}function ms(n,t){switch(arguments.length){case 0:break;case 1:this.range(n);break;default:this.range(t).domain(n);break}return this}function Oj(n,t){switch(arguments.length){case 0:break;case 1:{typeof n=="function"?this.interpolator(n):this.range(n);break}default:{this.domain(n),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const rT=Symbol("implicit");function J1(){var n=new eT,t=[],e=[],r=rT;function i(a){let s=n.get(a);if(s===void 0){if(r!==rT)return r;n.set(a,s=t.push(a)-1)}return e[s%e.length]}return i.domain=function(a){if(!arguments.length)return t.slice();t=[],n=new eT;for(const s of a)n.has(s)||n.set(s,t.push(s)-1);return i},i.range=function(a){return arguments.length?(e=Array.from(a),i):e.slice()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return J1(t,e).unknown(r)},ms.apply(i,arguments),i}function Kg(){var n=J1().unknown(void 0),t=n.domain,e=n.range,r=0,i=1,a,s,l=!1,c=0,f=0,d=.5;delete n.unknown;function g(){var m=t().length,v=i<r,_=v?i:r,w=v?r:i;a=(w-_)/Math.max(1,m-c+f*2),l&&(a=Math.floor(a)),_+=(w-_-a*(m-c))*d,s=a*(1-c),l&&(_=Math.round(_),s=Math.round(s));var b=Dj(m).map(function(C){return _+a*C});return e(v?b.reverse():b)}return n.domain=function(m){return arguments.length?(t(m),g()):t()},n.range=function(m){return arguments.length?([r,i]=m,r=+r,i=+i,g()):[r,i]},n.rangeRound=function(m){return[r,i]=m,r=+r,i=+i,l=!0,g()},n.bandwidth=function(){return s},n.step=function(){return a},n.round=function(m){return arguments.length?(l=!!m,g()):l},n.padding=function(m){return arguments.length?(c=Math.min(1,f=+m),g()):c},n.paddingInner=function(m){return arguments.length?(c=Math.min(1,m),g()):c},n.paddingOuter=function(m){return arguments.length?(f=+m,g()):f},n.align=function(m){return arguments.length?(d=Math.max(0,Math.min(1,m)),g()):d},n.copy=function(){return Kg(t(),[r,i]).round(l).paddingInner(c).paddingOuter(f).align(d)},ms.apply(g(),arguments)}function N4(n){var t=n.copy;return n.padding=n.paddingOuter,delete n.paddingInner,delete n.paddingOuter,n.copy=function(){return N4(t())},n}function P4(){return N4(Kg.apply(null,arguments).paddingInner(1))}function L2(n,t,e){n.prototype=t.prototype=e,e.constructor=n}function k4(n,t){var e=Object.create(n.prototype);for(var r in t)e[r]=t[r];return e}function ud(){}var Bh=.7,tg=1/Bh,lc="\\s*([+-]?\\d+)\\s*",Vh="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ha="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Mj=/^#([0-9a-f]{3,8})$/,Nj=new RegExp(`^rgb\\(${lc},${lc},${lc}\\)$`),Pj=new RegExp(`^rgb\\(${ha},${ha},${ha}\\)$`),kj=new RegExp(`^rgba\\(${lc},${lc},${lc},${Vh}\\)$`),Lj=new RegExp(`^rgba\\(${ha},${ha},${ha},${Vh}\\)$`),Bj=new RegExp(`^hsl\\(${Vh},${ha},${ha}\\)$`),Vj=new RegExp(`^hsla\\(${Vh},${ha},${ha},${Vh}\\)$`),iT={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};L2(ud,Fh,{copy(n){return Object.assign(new this.constructor,this,n)},displayable(){return this.rgb().displayable()},hex:aT,formatHex:aT,formatHex8:Fj,formatHsl:jj,formatRgb:sT,toString:sT});function aT(){return this.rgb().formatHex()}function Fj(){return this.rgb().formatHex8()}function jj(){return L4(this).formatHsl()}function sT(){return this.rgb().formatRgb()}function Fh(n){var t,e;return n=(n+"").trim().toLowerCase(),(t=Mj.exec(n))?(e=t[1].length,t=parseInt(t[1],16),e===6?oT(t):e===3?new Pr(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):e===8?a1(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):e===4?a1(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Nj.exec(n))?new Pr(t[1],t[2],t[3],1):(t=Pj.exec(n))?new Pr(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=kj.exec(n))?a1(t[1],t[2],t[3],t[4]):(t=Lj.exec(n))?a1(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Bj.exec(n))?cT(t[1],t[2]/100,t[3]/100,1):(t=Vj.exec(n))?cT(t[1],t[2]/100,t[3]/100,t[4]):iT.hasOwnProperty(n)?oT(iT[n]):n==="transparent"?new Pr(NaN,NaN,NaN,0):null}function oT(n){return new Pr(n>>16&255,n>>8&255,n&255,1)}function a1(n,t,e,r){return r<=0&&(n=t=e=NaN),new Pr(n,t,e,r)}function Uj(n){return n instanceof ud||(n=Fh(n)),n?(n=n.rgb(),new Pr(n.r,n.g,n.b,n.opacity)):new Pr}function Jy(n,t,e,r){return arguments.length===1?Uj(n):new Pr(n,t,e,r??1)}function Pr(n,t,e,r){this.r=+n,this.g=+t,this.b=+e,this.opacity=+r}L2(Pr,Jy,k4(ud,{brighter(n){return n=n==null?tg:Math.pow(tg,n),new Pr(this.r*n,this.g*n,this.b*n,this.opacity)},darker(n){return n=n==null?Bh:Math.pow(Bh,n),new Pr(this.r*n,this.g*n,this.b*n,this.opacity)},rgb(){return this},clamp(){return new Pr(Sl(this.r),Sl(this.g),Sl(this.b),eg(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:lT,formatHex:lT,formatHex8:zj,formatRgb:uT,toString:uT}));function lT(){return`#${_l(this.r)}${_l(this.g)}${_l(this.b)}`}function zj(){return`#${_l(this.r)}${_l(this.g)}${_l(this.b)}${_l((isNaN(this.opacity)?1:this.opacity)*255)}`}function uT(){const n=eg(this.opacity);return`${n===1?"rgb(":"rgba("}${Sl(this.r)}, ${Sl(this.g)}, ${Sl(this.b)}${n===1?")":`, ${n})`}`}function eg(n){return isNaN(n)?1:Math.max(0,Math.min(1,n))}function Sl(n){return Math.max(0,Math.min(255,Math.round(n)||0))}function _l(n){return n=Sl(n),(n<16?"0":"")+n.toString(16)}function cT(n,t,e,r){return r<=0?n=t=e=NaN:e<=0||e>=1?n=t=NaN:t<=0&&(n=NaN),new Ni(n,t,e,r)}function L4(n){if(n instanceof Ni)return new Ni(n.h,n.s,n.l,n.opacity);if(n instanceof ud||(n=Fh(n)),!n)return new Ni;if(n instanceof Ni)return n;n=n.rgb();var t=n.r/255,e=n.g/255,r=n.b/255,i=Math.min(t,e,r),a=Math.max(t,e,r),s=NaN,l=a-i,c=(a+i)/2;return l?(t===a?s=(e-r)/l+(e<r)*6:e===a?s=(r-t)/l+2:s=(t-e)/l+4,l/=c<.5?a+i:2-a-i,s*=60):l=c>0&&c<1?0:s,new Ni(s,l,c,n.opacity)}function Hj(n,t,e,r){return arguments.length===1?L4(n):new Ni(n,t,e,r??1)}function Ni(n,t,e,r){this.h=+n,this.s=+t,this.l=+e,this.opacity=+r}L2(Ni,Hj,k4(ud,{brighter(n){return n=n==null?tg:Math.pow(tg,n),new Ni(this.h,this.s,this.l*n,this.opacity)},darker(n){return n=n==null?Bh:Math.pow(Bh,n),new Ni(this.h,this.s,this.l*n,this.opacity)},rgb(){var n=this.h%360+(this.h<0)*360,t=isNaN(n)||isNaN(this.s)?0:this.s,e=this.l,r=e+(e<.5?e:1-e)*t,i=2*e-r;return new Pr(jv(n>=240?n-240:n+120,i,r),jv(n,i,r),jv(n<120?n+240:n-120,i,r),this.opacity)},clamp(){return new Ni(fT(this.h),s1(this.s),s1(this.l),eg(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const n=eg(this.opacity);return`${n===1?"hsl(":"hsla("}${fT(this.h)}, ${s1(this.s)*100}%, ${s1(this.l)*100}%${n===1?")":`, ${n})`}`}}));function fT(n){return n=(n||0)%360,n<0?n+360:n}function s1(n){return Math.max(0,Math.min(1,n||0))}function jv(n,t,e){return(n<60?t+(e-t)*n/60:n<180?e:n<240?t+(e-t)*(240-n)/60:t)*255}const B2=n=>()=>n;function Gj(n,t){return function(e){return n+e*t}}function $j(n,t,e){return n=Math.pow(n,e),t=Math.pow(t,e)-n,e=1/e,function(r){return Math.pow(n+r*t,e)}}function qj(n){return(n=+n)==1?B4:function(t,e){return e-t?$j(t,e,n):B2(isNaN(t)?e:t)}}function B4(n,t){var e=t-n;return e?Gj(n,e):B2(isNaN(n)?t:n)}const hT=function n(t){var e=qj(t);function r(i,a){var s=e((i=Jy(i)).r,(a=Jy(a)).r),l=e(i.g,a.g),c=e(i.b,a.b),f=B4(i.opacity,a.opacity);return function(d){return i.r=s(d),i.g=l(d),i.b=c(d),i.opacity=f(d),i+""}}return r.gamma=n,r}(1);function Xj(n,t){t||(t=[]);var e=n?Math.min(t.length,n.length):0,r=t.slice(),i;return function(a){for(i=0;i<e;++i)r[i]=n[i]*(1-a)+t[i]*a;return r}}function Wj(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function Yj(n,t){var e=t?t.length:0,r=n?Math.min(e,n.length):0,i=new Array(r),a=new Array(e),s;for(s=0;s<r;++s)i[s]=Zg(n[s],t[s]);for(;s<e;++s)a[s]=t[s];return function(l){for(s=0;s<r;++s)a[s]=i[s](l);return a}}function V2(n,t){var e=new Date;return n=+n,t=+t,function(r){return e.setTime(n*(1-r)+t*r),e}}function xe(n,t){return n=+n,t=+t,function(e){return n*(1-e)+t*e}}function Kj(n,t){var e={},r={},i;(n===null||typeof n!="object")&&(n={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in n?e[i]=Zg(n[i],t[i]):r[i]=t[i];return function(a){for(i in e)r[i]=e[i](a);return r}}var tx=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Uv=new RegExp(tx.source,"g");function Zj(n){return function(){return n}}function Qj(n){return function(t){return n(t)+""}}function Jj(n,t){var e=tx.lastIndex=Uv.lastIndex=0,r,i,a,s=-1,l=[],c=[];for(n=n+"",t=t+"";(r=tx.exec(n))&&(i=Uv.exec(t));)(a=i.index)>e&&(a=t.slice(e,a),l[s]?l[s]+=a:l[++s]=a),(r=r[0])===(i=i[0])?l[s]?l[s]+=i:l[++s]=i:(l[++s]=null,c.push({i:s,x:xe(r,i)})),e=Uv.lastIndex;return e<t.length&&(a=t.slice(e),l[s]?l[s]+=a:l[++s]=a),l.length<2?c[0]?Qj(c[0].x):Zj(t):(t=c.length,function(f){for(var d=0,g;d<t;++d)l[(g=c[d]).i]=g.x(f);return l.join("")})}function Zg(n,t){var e=typeof t,r;return t==null||e==="boolean"?B2(t):(e==="number"?xe:e==="string"?(r=Fh(t))?(t=r,hT):Jj:t instanceof Fh?hT:t instanceof Date?V2:Wj(t)?Xj:Array.isArray(t)?Yj:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?Kj:xe)(n,t)}function V4(n,t){return n=+n,t=+t,function(e){return Math.round(n*(1-e)+t*e)}}function tU(n){return function(){return n}}function eU(n){return+n}var dT=[0,1];function yi(n){return n}function ex(n,t){return(t-=n=+n)?function(e){return(e-n)/t}:tU(isNaN(t)?NaN:.5)}function nU(n,t){var e;return n>t&&(e=n,n=t,t=e),function(r){return Math.max(n,Math.min(t,r))}}function rU(n,t,e){var r=n[0],i=n[1],a=t[0],s=t[1];return i<r?(r=ex(i,r),a=e(s,a)):(r=ex(r,i),a=e(a,s)),function(l){return a(r(l))}}function iU(n,t,e){var r=Math.min(n.length,t.length)-1,i=new Array(r),a=new Array(r),s=-1;for(n[r]<n[0]&&(n=n.slice().reverse(),t=t.slice().reverse());++s<r;)i[s]=ex(n[s],n[s+1]),a[s]=e(t[s],t[s+1]);return function(l){var c=M4(n,l,1,r)-1;return a[c](i[c](l))}}function cd(n,t){return t.domain(n.domain()).range(n.range()).interpolate(n.interpolate()).clamp(n.clamp()).unknown(n.unknown())}function Qg(){var n=dT,t=dT,e=Zg,r,i,a,s=yi,l,c,f;function d(){var m=Math.min(n.length,t.length);return s!==yi&&(s=nU(n[0],n[m-1])),l=m>2?iU:rU,c=f=null,g}function g(m){return m==null||isNaN(m=+m)?a:(c||(c=l(n.map(r),t,e)))(r(s(m)))}return g.invert=function(m){return s(i((f||(f=l(t,n.map(r),xe)))(m)))},g.domain=function(m){return arguments.length?(n=Array.from(m,eU),d()):n.slice()},g.range=function(m){return arguments.length?(t=Array.from(m),d()):t.slice()},g.rangeRound=function(m){return t=Array.from(m),e=V4,d()},g.clamp=function(m){return arguments.length?(s=m?!0:yi,d()):s!==yi},g.interpolate=function(m){return arguments.length?(e=m,d()):e},g.unknown=function(m){return arguments.length?(a=m,g):a},function(m,v){return r=m,i=v,d()}}function F4(){return Qg()(yi,yi)}function aU(n){return Math.abs(n=Math.round(n))>=1e21?n.toLocaleString("en").replace(/,/g,""):n.toString(10)}function ng(n,t){if((e=(n=t?n.toExponential(t-1):n.toExponential()).indexOf("e"))<0)return null;var e,r=n.slice(0,e);return[r.length>1?r[0]+r.slice(2):r,+n.slice(e+1)]}function vc(n){return n=ng(Math.abs(n)),n?n[1]:NaN}function sU(n,t){return function(e,r){for(var i=e.length,a=[],s=0,l=n[0],c=0;i>0&&l>0&&(c+l+1>r&&(l=Math.max(1,r-c)),a.push(e.substring(i-=l,i+l)),!((c+=l+1)>r));)l=n[s=(s+1)%n.length];return a.reverse().join(t)}}function oU(n){return function(t){return t.replace(/[0-9]/g,function(e){return n[+e]})}}var lU=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function jh(n){if(!(t=lU.exec(n)))throw new Error("invalid format: "+n);var t;return new F2({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}jh.prototype=F2.prototype;function F2(n){this.fill=n.fill===void 0?" ":n.fill+"",this.align=n.align===void 0?">":n.align+"",this.sign=n.sign===void 0?"-":n.sign+"",this.symbol=n.symbol===void 0?"":n.symbol+"",this.zero=!!n.zero,this.width=n.width===void 0?void 0:+n.width,this.comma=!!n.comma,this.precision=n.precision===void 0?void 0:+n.precision,this.trim=!!n.trim,this.type=n.type===void 0?"":n.type+""}F2.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function uU(n){t:for(var t=n.length,e=1,r=-1,i;e<t;++e)switch(n[e]){case".":r=i=e;break;case"0":r===0&&(r=e),i=e;break;default:if(!+n[e])break t;r>0&&(r=0);break}return r>0?n.slice(0,r)+n.slice(i+1):n}var j4;function cU(n,t){var e=ng(n,t);if(!e)return n+"";var r=e[0],i=e[1],a=i-(j4=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,s=r.length;return a===s?r:a>s?r+new Array(a-s+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+ng(n,Math.max(0,t+a-1))[0]}function gT(n,t){var e=ng(n,t);if(!e)return n+"";var r=e[0],i=e[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const pT={"%":(n,t)=>(n*100).toFixed(t),b:n=>Math.round(n).toString(2),c:n=>n+"",d:aU,e:(n,t)=>n.toExponential(t),f:(n,t)=>n.toFixed(t),g:(n,t)=>n.toPrecision(t),o:n=>Math.round(n).toString(8),p:(n,t)=>gT(n*100,t),r:gT,s:cU,X:n=>Math.round(n).toString(16).toUpperCase(),x:n=>Math.round(n).toString(16)};function mT(n){return n}var vT=Array.prototype.map,yT=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function fU(n){var t=n.grouping===void 0||n.thousands===void 0?mT:sU(vT.call(n.grouping,Number),n.thousands+""),e=n.currency===void 0?"":n.currency[0]+"",r=n.currency===void 0?"":n.currency[1]+"",i=n.decimal===void 0?".":n.decimal+"",a=n.numerals===void 0?mT:oU(vT.call(n.numerals,String)),s=n.percent===void 0?"%":n.percent+"",l=n.minus===void 0?"−":n.minus+"",c=n.nan===void 0?"NaN":n.nan+"";function f(g){g=jh(g);var m=g.fill,v=g.align,_=g.sign,w=g.symbol,b=g.zero,C=g.width,I=g.comma,R=g.precision,M=g.trim,N=g.type;N==="n"?(I=!0,N="g"):pT[N]||(R===void 0&&(R=12),M=!0,N="g"),(b||m==="0"&&v==="=")&&(b=!0,m="0",v="=");var k=w==="$"?e:w==="#"&&/[boxX]/.test(N)?"0"+N.toLowerCase():"",O=w==="$"?r:/[%p]/.test(N)?s:"",S=pT[N],D=/[defgprs%]/.test(N);R=R===void 0?6:/[gprs]/.test(N)?Math.max(1,Math.min(21,R)):Math.max(0,Math.min(20,R));function V(B){var F=k,j=O,rt,mt,q;if(N==="c")j=S(B)+j,B="";else{B=+B;var Z=B<0||1/B<0;if(B=isNaN(B)?c:S(Math.abs(B),R),M&&(B=uU(B)),Z&&+B==0&&_!=="+"&&(Z=!1),F=(Z?_==="("?_:l:_==="-"||_==="("?"":_)+F,j=(N==="s"?yT[8+j4/3]:"")+j+(Z&&_==="("?")":""),D){for(rt=-1,mt=B.length;++rt<mt;)if(q=B.charCodeAt(rt),48>q||q>57){j=(q===46?i+B.slice(rt+1):B.slice(rt))+j,B=B.slice(0,rt);break}}}I&&!b&&(B=t(B,1/0));var it=F.length+B.length+j.length,gt=it<C?new Array(C-it+1).join(m):"";switch(I&&b&&(B=t(gt+B,gt.length?C-j.length:1/0),gt=""),v){case"<":B=F+B+j+gt;break;case"=":B=F+gt+B+j;break;case"^":B=gt.slice(0,it=gt.length>>1)+F+B+j+gt.slice(it);break;default:B=gt+F+B+j;break}return a(B)}return V.toString=function(){return g+""},V}function d(g,m){var v=f((g=jh(g),g.type="f",g)),_=Math.max(-8,Math.min(8,Math.floor(vc(m)/3)))*3,w=Math.pow(10,-_),b=yT[8+_/3];return function(C){return v(w*C)+b}}return{format:f,formatPrefix:d}}var o1,j2,U4;hU({thousands:",",grouping:[3],currency:["$",""]});function hU(n){return o1=fU(n),j2=o1.format,U4=o1.formatPrefix,o1}function dU(n){return Math.max(0,-vc(Math.abs(n)))}function gU(n,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(vc(t)/3)))*3-vc(Math.abs(n)))}function pU(n,t){return n=Math.abs(n),t=Math.abs(t)-n,Math.max(0,vc(t)-vc(n))+1}function mU(n,t,e,r){var i=Qy(n,t,e),a;switch(r=jh(r??",f"),r.type){case"s":{var s=Math.max(Math.abs(n),Math.abs(t));return r.precision==null&&!isNaN(a=gU(i,s))&&(r.precision=a),U4(r,s)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(a=pU(i,Math.max(Math.abs(n),Math.abs(t))))&&(r.precision=a-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(a=dU(i))&&(r.precision=a-(r.type==="%")*2);break}}return j2(r)}function Jg(n){var t=n.domain;return n.ticks=function(e){var r=t();return Ky(r[0],r[r.length-1],e??10)},n.tickFormat=function(e,r){var i=t();return mU(i[0],i[i.length-1],e??10,r)},n.nice=function(e){e==null&&(e=10);var r=t(),i=0,a=r.length-1,s=r[i],l=r[a],c,f,d=10;for(l<s&&(f=s,s=l,l=f,f=i,i=a,a=f);d-- >0;){if(f=Zy(s,l,e),f===c)return r[i]=s,r[a]=l,t(r);if(f>0)s=Math.floor(s/f)*f,l=Math.ceil(l/f)*f;else if(f<0)s=Math.ceil(s*f)/f,l=Math.floor(l*f)/f;else break;c=f}return n},n}function U2(){var n=F4();return n.copy=function(){return cd(n,U2())},ms.apply(n,arguments),Jg(n)}function z4(n,t){n=n.slice();var e=0,r=n.length-1,i=n[e],a=n[r],s;return a<i&&(s=e,e=r,r=s,s=i,i=a,a=s),n[e]=t.floor(i),n[r]=t.ceil(a),n}function xT(n){return Math.log(n)}function _T(n){return Math.exp(n)}function vU(n){return-Math.log(-n)}function yU(n){return-Math.exp(-n)}function xU(n){return isFinite(n)?+("1e"+n):n<0?0:n}function _U(n){return n===10?xU:n===Math.E?Math.exp:t=>Math.pow(n,t)}function AU(n){return n===Math.E?Math.log:n===10&&Math.log10||n===2&&Math.log2||(n=Math.log(n),t=>Math.log(t)/n)}function AT(n){return(t,e)=>-n(-t,e)}function EU(n){const t=n(xT,_T),e=t.domain;let r=10,i,a;function s(){return i=AU(r),a=_U(r),e()[0]<0?(i=AT(i),a=AT(a),n(vU,yU)):n(xT,_T),t}return t.base=function(l){return arguments.length?(r=+l,s()):r},t.domain=function(l){return arguments.length?(e(l),s()):e()},t.ticks=l=>{const c=e();let f=c[0],d=c[c.length-1];const g=d<f;g&&([f,d]=[d,f]);let m=i(f),v=i(d),_,w;const b=l==null?10:+l;let C=[];if(!(r%1)&&v-m<b){if(m=Math.floor(m),v=Math.ceil(v),f>0){for(;m<=v;++m)for(_=1;_<r;++_)if(w=m<0?_/a(-m):_*a(m),!(w<f)){if(w>d)break;C.push(w)}}else for(;m<=v;++m)for(_=r-1;_>=1;--_)if(w=m>0?_/a(-m):_*a(m),!(w<f)){if(w>d)break;C.push(w)}C.length*2<b&&(C=Ky(f,d,b))}else C=Ky(m,v,Math.min(v-m,b)).map(a);return g?C.reverse():C},t.tickFormat=(l,c)=>{if(l==null&&(l=10),c==null&&(c=r===10?"s":","),typeof c!="function"&&(!(r%1)&&(c=jh(c)).precision==null&&(c.trim=!0),c=j2(c)),l===1/0)return c;const f=Math.max(1,r*l/t.ticks().length);return d=>{let g=d/a(Math.round(i(d)));return g*r<r-.5&&(g*=r),g<=f?c(d):""}},t.nice=()=>e(z4(e(),{floor:l=>a(Math.floor(i(l))),ceil:l=>a(Math.ceil(i(l)))})),t}function rg(){const n=EU(Qg()).domain([1,10]);return n.copy=()=>cd(n,rg()).base(n.base()),ms.apply(n,arguments),n}function ET(n){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/n))}}function wT(n){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*n}}function wU(n){var t=1,e=n(ET(t),wT(t));return e.constant=function(r){return arguments.length?n(ET(t=+r),wT(t)):t},Jg(e)}function H4(){var n=wU(Qg());return n.copy=function(){return cd(n,H4()).constant(n.constant())},ms.apply(n,arguments)}function bT(n){return function(t){return t<0?-Math.pow(-t,n):Math.pow(t,n)}}function bU(n){return n<0?-Math.sqrt(-n):Math.sqrt(n)}function SU(n){return n<0?-n*n:n*n}function TU(n){var t=n(yi,yi),e=1;function r(){return e===1?n(yi,yi):e===.5?n(bU,SU):n(bT(e),bT(1/e))}return t.exponent=function(i){return arguments.length?(e=+i,r()):e},Jg(t)}function z2(){var n=TU(Qg());return n.copy=function(){return cd(n,z2()).exponent(n.exponent())},ms.apply(n,arguments),n}function CU(){return z2.apply(null,arguments).exponent(.5)}function G4(){var n=[.5],t=[0,1],e,r=1;function i(a){return a!=null&&a<=a?t[M4(n,a,0,r)]:e}return i.domain=function(a){return arguments.length?(n=Array.from(a),r=Math.min(n.length,t.length-1),i):n.slice()},i.range=function(a){return arguments.length?(t=Array.from(a),r=Math.min(n.length,t.length-1),i):t.slice()},i.invertExtent=function(a){var s=t.indexOf(a);return[n[s-1],n[s]]},i.unknown=function(a){return arguments.length?(e=a,i):e},i.copy=function(){return G4().domain(n).range(t).unknown(e)},ms.apply(i,arguments)}const zv=new Date,Hv=new Date;function kn(n,t,e,r){function i(a){return n(a=arguments.length===0?new Date:new Date(+a)),a}return i.floor=a=>(n(a=new Date(+a)),a),i.ceil=a=>(n(a=new Date(a-1)),t(a,1),n(a),a),i.round=a=>{const s=i(a),l=i.ceil(a);return a-s<l-a?s:l},i.offset=(a,s)=>(t(a=new Date(+a),s==null?1:Math.floor(s)),a),i.range=(a,s,l)=>{const c=[];if(a=i.ceil(a),l=l==null?1:Math.floor(l),!(a<s)||!(l>0))return c;let f;do c.push(f=new Date(+a)),t(a,l),n(a);while(f<a&&a<s);return c},i.filter=a=>kn(s=>{if(s>=s)for(;n(s),!a(s);)s.setTime(s-1)},(s,l)=>{if(s>=s)if(l<0)for(;++l<=0;)for(;t(s,-1),!a(s););else for(;--l>=0;)for(;t(s,1),!a(s););}),e&&(i.count=(a,s)=>(zv.setTime(+a),Hv.setTime(+s),n(zv),n(Hv),Math.floor(e(zv,Hv))),i.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?i.filter(r?s=>r(s)%a===0:s=>i.count(0,s)%a===0):i)),i}const ig=kn(()=>{},(n,t)=>{n.setTime(+n+t)},(n,t)=>t-n);ig.every=n=>(n=Math.floor(n),!isFinite(n)||!(n>0)?null:n>1?kn(t=>{t.setTime(Math.floor(t/n)*n)},(t,e)=>{t.setTime(+t+e*n)},(t,e)=>(e-t)/n):ig);ig.range;const Ka=1e3,xi=Ka*60,Za=xi*60,us=Za*24,H2=us*7,ST=us*30,Gv=us*365,Al=kn(n=>{n.setTime(n-n.getMilliseconds())},(n,t)=>{n.setTime(+n+t*Ka)},(n,t)=>(t-n)/Ka,n=>n.getUTCSeconds());Al.range;const G2=kn(n=>{n.setTime(n-n.getMilliseconds()-n.getSeconds()*Ka)},(n,t)=>{n.setTime(+n+t*xi)},(n,t)=>(t-n)/xi,n=>n.getMinutes());G2.range;const $2=kn(n=>{n.setUTCSeconds(0,0)},(n,t)=>{n.setTime(+n+t*xi)},(n,t)=>(t-n)/xi,n=>n.getUTCMinutes());$2.range;const q2=kn(n=>{n.setTime(n-n.getMilliseconds()-n.getSeconds()*Ka-n.getMinutes()*xi)},(n,t)=>{n.setTime(+n+t*Za)},(n,t)=>(t-n)/Za,n=>n.getHours());q2.range;const X2=kn(n=>{n.setUTCMinutes(0,0,0)},(n,t)=>{n.setTime(+n+t*Za)},(n,t)=>(t-n)/Za,n=>n.getUTCHours());X2.range;const fd=kn(n=>n.setHours(0,0,0,0),(n,t)=>n.setDate(n.getDate()+t),(n,t)=>(t-n-(t.getTimezoneOffset()-n.getTimezoneOffset())*xi)/us,n=>n.getDate()-1);fd.range;const tp=kn(n=>{n.setUTCHours(0,0,0,0)},(n,t)=>{n.setUTCDate(n.getUTCDate()+t)},(n,t)=>(t-n)/us,n=>n.getUTCDate()-1);tp.range;const $4=kn(n=>{n.setUTCHours(0,0,0,0)},(n,t)=>{n.setUTCDate(n.getUTCDate()+t)},(n,t)=>(t-n)/us,n=>Math.floor(n/us));$4.range;function Fl(n){return kn(t=>{t.setDate(t.getDate()-(t.getDay()+7-n)%7),t.setHours(0,0,0,0)},(t,e)=>{t.setDate(t.getDate()+e*7)},(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*xi)/H2)}const ep=Fl(0),ag=Fl(1),IU=Fl(2),RU=Fl(3),yc=Fl(4),DU=Fl(5),OU=Fl(6);ep.range;ag.range;IU.range;RU.range;yc.range;DU.range;OU.range;function jl(n){return kn(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-n)%7),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e*7)},(t,e)=>(e-t)/H2)}const np=jl(0),sg=jl(1),MU=jl(2),NU=jl(3),xc=jl(4),PU=jl(5),kU=jl(6);np.range;sg.range;MU.range;NU.range;xc.range;PU.range;kU.range;const W2=kn(n=>{n.setDate(1),n.setHours(0,0,0,0)},(n,t)=>{n.setMonth(n.getMonth()+t)},(n,t)=>t.getMonth()-n.getMonth()+(t.getFullYear()-n.getFullYear())*12,n=>n.getMonth());W2.range;const Y2=kn(n=>{n.setUTCDate(1),n.setUTCHours(0,0,0,0)},(n,t)=>{n.setUTCMonth(n.getUTCMonth()+t)},(n,t)=>t.getUTCMonth()-n.getUTCMonth()+(t.getUTCFullYear()-n.getUTCFullYear())*12,n=>n.getUTCMonth());Y2.range;const cs=kn(n=>{n.setMonth(0,1),n.setHours(0,0,0,0)},(n,t)=>{n.setFullYear(n.getFullYear()+t)},(n,t)=>t.getFullYear()-n.getFullYear(),n=>n.getFullYear());cs.every=n=>!isFinite(n=Math.floor(n))||!(n>0)?null:kn(t=>{t.setFullYear(Math.floor(t.getFullYear()/n)*n),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e*n)});cs.range;const fs=kn(n=>{n.setUTCMonth(0,1),n.setUTCHours(0,0,0,0)},(n,t)=>{n.setUTCFullYear(n.getUTCFullYear()+t)},(n,t)=>t.getUTCFullYear()-n.getUTCFullYear(),n=>n.getUTCFullYear());fs.every=n=>!isFinite(n=Math.floor(n))||!(n>0)?null:kn(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/n)*n),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e*n)});fs.range;function q4(n,t,e,r,i,a){const s=[[Al,1,Ka],[Al,5,5*Ka],[Al,15,15*Ka],[Al,30,30*Ka],[a,1,xi],[a,5,5*xi],[a,15,15*xi],[a,30,30*xi],[i,1,Za],[i,3,3*Za],[i,6,6*Za],[i,12,12*Za],[r,1,us],[r,2,2*us],[e,1,H2],[t,1,ST],[t,3,3*ST],[n,1,Gv]];function l(f,d,g){const m=d<f;m&&([f,d]=[d,f]);const v=g&&typeof g.range=="function"?g:c(f,d,g),_=v?v.range(f,+d+1):[];return m?_.reverse():_}function c(f,d,g){const m=Math.abs(d-f)/g,v=k2(([,,b])=>b).right(s,m);if(v===s.length)return n.every(Qy(f/Gv,d/Gv,g));if(v===0)return ig.every(Math.max(Qy(f,d,g),1));const[_,w]=s[m/s[v-1][2]<s[v][2]/m?v-1:v];return _.every(w)}return[l,c]}const[LU,BU]=q4(fs,Y2,np,$4,X2,$2),[VU,FU]=q4(cs,W2,ep,fd,q2,G2);function $v(n){if(0<=n.y&&n.y<100){var t=new Date(-1,n.m,n.d,n.H,n.M,n.S,n.L);return t.setFullYear(n.y),t}return new Date(n.y,n.m,n.d,n.H,n.M,n.S,n.L)}function qv(n){if(0<=n.y&&n.y<100){var t=new Date(Date.UTC(-1,n.m,n.d,n.H,n.M,n.S,n.L));return t.setUTCFullYear(n.y),t}return new Date(Date.UTC(n.y,n.m,n.d,n.H,n.M,n.S,n.L))}function Jf(n,t,e){return{y:n,m:t,d:e,H:0,M:0,S:0,L:0}}function jU(n){var t=n.dateTime,e=n.date,r=n.time,i=n.periods,a=n.days,s=n.shortDays,l=n.months,c=n.shortMonths,f=th(i),d=eh(i),g=th(a),m=eh(a),v=th(s),_=eh(s),w=th(l),b=eh(l),C=th(c),I=eh(c),R={a:Z,A:it,b:gt,B:_t,c:null,d:OT,e:OT,f:uz,g:xz,G:Az,H:sz,I:oz,j:lz,L:X4,m:cz,M:fz,p:Mt,q:It,Q:PT,s:kT,S:hz,u:dz,U:gz,V:pz,w:mz,W:vz,x:null,X:null,y:yz,Y:_z,Z:Ez,"%":NT},M={a:Et,A:zt,b:$t,B:pe,c:null,d:MT,e:MT,f:Tz,g:Lz,G:Vz,H:wz,I:bz,j:Sz,L:Y4,m:Cz,M:Iz,p:Re,q:Ke,Q:PT,s:kT,S:Rz,u:Dz,U:Oz,V:Mz,w:Nz,W:Pz,x:null,X:null,y:kz,Y:Bz,Z:Fz,"%":NT},N={a:V,A:B,b:F,B:j,c:rt,d:RT,e:RT,f:nz,g:IT,G:CT,H:DT,I:DT,j:QU,L:ez,m:ZU,M:JU,p:D,q:KU,Q:iz,s:az,S:tz,u:$U,U:qU,V:XU,w:GU,W:WU,x:mt,X:q,y:IT,Y:CT,Z:YU,"%":rz};R.x=k(e,R),R.X=k(r,R),R.c=k(t,R),M.x=k(e,M),M.X=k(r,M),M.c=k(t,M);function k(ft,wt){return function(Rt){var pt=[],Ae=-1,Nt=0,ke=ft.length,Ze,$e,ei;for(Rt instanceof Date||(Rt=new Date(+Rt));++Ae<ke;)ft.charCodeAt(Ae)===37&&(pt.push(ft.slice(Nt,Ae)),($e=TT[Ze=ft.charAt(++Ae)])!=null?Ze=ft.charAt(++Ae):$e=Ze==="e"?" ":"0",(ei=wt[Ze])&&(Ze=ei(Rt,$e)),pt.push(Ze),Nt=Ae+1);return pt.push(ft.slice(Nt,Ae)),pt.join("")}}function O(ft,wt){return function(Rt){var pt=Jf(1900,void 0,1),Ae=S(pt,ft,Rt+="",0),Nt,ke;if(Ae!=Rt.length)return null;if("Q"in pt)return new Date(pt.Q);if("s"in pt)return new Date(pt.s*1e3+("L"in pt?pt.L:0));if(wt&&!("Z"in pt)&&(pt.Z=0),"p"in pt&&(pt.H=pt.H%12+pt.p*12),pt.m===void 0&&(pt.m="q"in pt?pt.q:0),"V"in pt){if(pt.V<1||pt.V>53)return null;"w"in pt||(pt.w=1),"Z"in pt?(Nt=qv(Jf(pt.y,0,1)),ke=Nt.getUTCDay(),Nt=ke>4||ke===0?sg.ceil(Nt):sg(Nt),Nt=tp.offset(Nt,(pt.V-1)*7),pt.y=Nt.getUTCFullYear(),pt.m=Nt.getUTCMonth(),pt.d=Nt.getUTCDate()+(pt.w+6)%7):(Nt=$v(Jf(pt.y,0,1)),ke=Nt.getDay(),Nt=ke>4||ke===0?ag.ceil(Nt):ag(Nt),Nt=fd.offset(Nt,(pt.V-1)*7),pt.y=Nt.getFullYear(),pt.m=Nt.getMonth(),pt.d=Nt.getDate()+(pt.w+6)%7)}else("W"in pt||"U"in pt)&&("w"in pt||(pt.w="u"in pt?pt.u%7:"W"in pt?1:0),ke="Z"in pt?qv(Jf(pt.y,0,1)).getUTCDay():$v(Jf(pt.y,0,1)).getDay(),pt.m=0,pt.d="W"in pt?(pt.w+6)%7+pt.W*7-(ke+5)%7:pt.w+pt.U*7-(ke+6)%7);return"Z"in pt?(pt.H+=pt.Z/100|0,pt.M+=pt.Z%100,qv(pt)):$v(pt)}}function S(ft,wt,Rt,pt){for(var Ae=0,Nt=wt.length,ke=Rt.length,Ze,$e;Ae<Nt;){if(pt>=ke)return-1;if(Ze=wt.charCodeAt(Ae++),Ze===37){if(Ze=wt.charAt(Ae++),$e=N[Ze in TT?wt.charAt(Ae++):Ze],!$e||(pt=$e(ft,Rt,pt))<0)return-1}else if(Ze!=Rt.charCodeAt(pt++))return-1}return pt}function D(ft,wt,Rt){var pt=f.exec(wt.slice(Rt));return pt?(ft.p=d.get(pt[0].toLowerCase()),Rt+pt[0].length):-1}function V(ft,wt,Rt){var pt=v.exec(wt.slice(Rt));return pt?(ft.w=_.get(pt[0].toLowerCase()),Rt+pt[0].length):-1}function B(ft,wt,Rt){var pt=g.exec(wt.slice(Rt));return pt?(ft.w=m.get(pt[0].toLowerCase()),Rt+pt[0].length):-1}function F(ft,wt,Rt){var pt=C.exec(wt.slice(Rt));return pt?(ft.m=I.get(pt[0].toLowerCase()),Rt+pt[0].length):-1}function j(ft,wt,Rt){var pt=w.exec(wt.slice(Rt));return pt?(ft.m=b.get(pt[0].toLowerCase()),Rt+pt[0].length):-1}function rt(ft,wt,Rt){return S(ft,t,wt,Rt)}function mt(ft,wt,Rt){return S(ft,e,wt,Rt)}function q(ft,wt,Rt){return S(ft,r,wt,Rt)}function Z(ft){return s[ft.getDay()]}function it(ft){return a[ft.getDay()]}function gt(ft){return c[ft.getMonth()]}function _t(ft){return l[ft.getMonth()]}function Mt(ft){return i[+(ft.getHours()>=12)]}function It(ft){return 1+~~(ft.getMonth()/3)}function Et(ft){return s[ft.getUTCDay()]}function zt(ft){return a[ft.getUTCDay()]}function $t(ft){return c[ft.getUTCMonth()]}function pe(ft){return l[ft.getUTCMonth()]}function Re(ft){return i[+(ft.getUTCHours()>=12)]}function Ke(ft){return 1+~~(ft.getUTCMonth()/3)}return{format:function(ft){var wt=k(ft+="",R);return wt.toString=function(){return ft},wt},parse:function(ft){var wt=O(ft+="",!1);return wt.toString=function(){return ft},wt},utcFormat:function(ft){var wt=k(ft+="",M);return wt.toString=function(){return ft},wt},utcParse:function(ft){var wt=O(ft+="",!0);return wt.toString=function(){return ft},wt}}}var TT={"-":"",_:" ",0:"0"},Xn=/^\s*\d+/,UU=/^%/,zU=/[\\^$*+?|[\]().{}]/g;function ge(n,t,e){var r=n<0?"-":"",i=(r?-n:n)+"",a=i.length;return r+(a<e?new Array(e-a+1).join(t)+i:i)}function HU(n){return n.replace(zU,"\\$&")}function th(n){return new RegExp("^(?:"+n.map(HU).join("|")+")","i")}function eh(n){return new Map(n.map((t,e)=>[t.toLowerCase(),e]))}function GU(n,t,e){var r=Xn.exec(t.slice(e,e+1));return r?(n.w=+r[0],e+r[0].length):-1}function $U(n,t,e){var r=Xn.exec(t.slice(e,e+1));return r?(n.u=+r[0],e+r[0].length):-1}function qU(n,t,e){var r=Xn.exec(t.slice(e,e+2));return r?(n.U=+r[0],e+r[0].length):-1}function XU(n,t,e){var r=Xn.exec(t.slice(e,e+2));return r?(n.V=+r[0],e+r[0].length):-1}function WU(n,t,e){var r=Xn.exec(t.slice(e,e+2));return r?(n.W=+r[0],e+r[0].length):-1}function CT(n,t,e){var r=Xn.exec(t.slice(e,e+4));return r?(n.y=+r[0],e+r[0].length):-1}function IT(n,t,e){var r=Xn.exec(t.slice(e,e+2));return r?(n.y=+r[0]+(+r[0]>68?1900:2e3),e+r[0].length):-1}function YU(n,t,e){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(e,e+6));return r?(n.Z=r[1]?0:-(r[2]+(r[3]||"00")),e+r[0].length):-1}function KU(n,t,e){var r=Xn.exec(t.slice(e,e+1));return r?(n.q=r[0]*3-3,e+r[0].length):-1}function ZU(n,t,e){var r=Xn.exec(t.slice(e,e+2));return r?(n.m=r[0]-1,e+r[0].length):-1}function RT(n,t,e){var r=Xn.exec(t.slice(e,e+2));return r?(n.d=+r[0],e+r[0].length):-1}function QU(n,t,e){var r=Xn.exec(t.slice(e,e+3));return r?(n.m=0,n.d=+r[0],e+r[0].length):-1}function DT(n,t,e){var r=Xn.exec(t.slice(e,e+2));return r?(n.H=+r[0],e+r[0].length):-1}function JU(n,t,e){var r=Xn.exec(t.slice(e,e+2));return r?(n.M=+r[0],e+r[0].length):-1}function tz(n,t,e){var r=Xn.exec(t.slice(e,e+2));return r?(n.S=+r[0],e+r[0].length):-1}function ez(n,t,e){var r=Xn.exec(t.slice(e,e+3));return r?(n.L=+r[0],e+r[0].length):-1}function nz(n,t,e){var r=Xn.exec(t.slice(e,e+6));return r?(n.L=Math.floor(r[0]/1e3),e+r[0].length):-1}function rz(n,t,e){var r=UU.exec(t.slice(e,e+1));return r?e+r[0].length:-1}function iz(n,t,e){var r=Xn.exec(t.slice(e));return r?(n.Q=+r[0],e+r[0].length):-1}function az(n,t,e){var r=Xn.exec(t.slice(e));return r?(n.s=+r[0],e+r[0].length):-1}function OT(n,t){return ge(n.getDate(),t,2)}function sz(n,t){return ge(n.getHours(),t,2)}function oz(n,t){return ge(n.getHours()%12||12,t,2)}function lz(n,t){return ge(1+fd.count(cs(n),n),t,3)}function X4(n,t){return ge(n.getMilliseconds(),t,3)}function uz(n,t){return X4(n,t)+"000"}function cz(n,t){return ge(n.getMonth()+1,t,2)}function fz(n,t){return ge(n.getMinutes(),t,2)}function hz(n,t){return ge(n.getSeconds(),t,2)}function dz(n){var t=n.getDay();return t===0?7:t}function gz(n,t){return ge(ep.count(cs(n)-1,n),t,2)}function W4(n){var t=n.getDay();return t>=4||t===0?yc(n):yc.ceil(n)}function pz(n,t){return n=W4(n),ge(yc.count(cs(n),n)+(cs(n).getDay()===4),t,2)}function mz(n){return n.getDay()}function vz(n,t){return ge(ag.count(cs(n)-1,n),t,2)}function yz(n,t){return ge(n.getFullYear()%100,t,2)}function xz(n,t){return n=W4(n),ge(n.getFullYear()%100,t,2)}function _z(n,t){return ge(n.getFullYear()%1e4,t,4)}function Az(n,t){var e=n.getDay();return n=e>=4||e===0?yc(n):yc.ceil(n),ge(n.getFullYear()%1e4,t,4)}function Ez(n){var t=n.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+ge(t/60|0,"0",2)+ge(t%60,"0",2)}function MT(n,t){return ge(n.getUTCDate(),t,2)}function wz(n,t){return ge(n.getUTCHours(),t,2)}function bz(n,t){return ge(n.getUTCHours()%12||12,t,2)}function Sz(n,t){return ge(1+tp.count(fs(n),n),t,3)}function Y4(n,t){return ge(n.getUTCMilliseconds(),t,3)}function Tz(n,t){return Y4(n,t)+"000"}function Cz(n,t){return ge(n.getUTCMonth()+1,t,2)}function Iz(n,t){return ge(n.getUTCMinutes(),t,2)}function Rz(n,t){return ge(n.getUTCSeconds(),t,2)}function Dz(n){var t=n.getUTCDay();return t===0?7:t}function Oz(n,t){return ge(np.count(fs(n)-1,n),t,2)}function K4(n){var t=n.getUTCDay();return t>=4||t===0?xc(n):xc.ceil(n)}function Mz(n,t){return n=K4(n),ge(xc.count(fs(n),n)+(fs(n).getUTCDay()===4),t,2)}function Nz(n){return n.getUTCDay()}function Pz(n,t){return ge(sg.count(fs(n)-1,n),t,2)}function kz(n,t){return ge(n.getUTCFullYear()%100,t,2)}function Lz(n,t){return n=K4(n),ge(n.getUTCFullYear()%100,t,2)}function Bz(n,t){return ge(n.getUTCFullYear()%1e4,t,4)}function Vz(n,t){var e=n.getUTCDay();return n=e>=4||e===0?xc(n):xc.ceil(n),ge(n.getUTCFullYear()%1e4,t,4)}function Fz(){return"+0000"}function NT(){return"%"}function PT(n){return+n}function kT(n){return Math.floor(+n/1e3)}var Lu,Z4,Q4;jz({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function jz(n){return Lu=jU(n),Z4=Lu.format,Lu.parse,Q4=Lu.utcFormat,Lu.utcParse,Lu}function Uz(n){return new Date(n)}function zz(n){return n instanceof Date?+n:+new Date(+n)}function K2(n,t,e,r,i,a,s,l,c,f){var d=F4(),g=d.invert,m=d.domain,v=f(".%L"),_=f(":%S"),w=f("%I:%M"),b=f("%I %p"),C=f("%a %d"),I=f("%b %d"),R=f("%B"),M=f("%Y");function N(k){return(c(k)<k?v:l(k)<k?_:s(k)<k?w:a(k)<k?b:r(k)<k?i(k)<k?C:I:e(k)<k?R:M)(k)}return d.invert=function(k){return new Date(g(k))},d.domain=function(k){return arguments.length?m(Array.from(k,zz)):m().map(Uz)},d.ticks=function(k){var O=m();return n(O[0],O[O.length-1],k??10)},d.tickFormat=function(k,O){return O==null?N:f(O)},d.nice=function(k){var O=m();return(!k||typeof k.range!="function")&&(k=t(O[0],O[O.length-1],k??10)),k?m(z4(O,k)):d},d.copy=function(){return cd(d,K2(n,t,e,r,i,a,s,l,c,f))},d}function J4(){return ms.apply(K2(VU,FU,cs,W2,ep,fd,q2,G2,Al,Z4).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function Hz(){return ms.apply(K2(LU,BU,fs,Y2,np,tp,X2,$2,Al,Q4).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Gz(){var n=0,t=1,e,r,i,a,s=yi,l=!1,c;function f(g){return g==null||isNaN(g=+g)?c:s(i===0?.5:(g=(a(g)-e)*i,l?Math.max(0,Math.min(1,g)):g))}f.domain=function(g){return arguments.length?([n,t]=g,e=a(n=+n),r=a(t=+t),i=e===r?0:1/(r-e),f):[n,t]},f.clamp=function(g){return arguments.length?(l=!!g,f):l},f.interpolator=function(g){return arguments.length?(s=g,f):s};function d(g){return function(m){var v,_;return arguments.length?([v,_]=m,s=g(v,_),f):[s(0),s(1)]}}return f.range=d(Zg),f.rangeRound=d(V4),f.unknown=function(g){return arguments.length?(c=g,f):c},function(g){return a=g,e=g(n),r=g(t),i=e===r?0:1/(r-e),f}}function $z(n,t){return t.domain(n.domain()).interpolator(n.interpolator()).clamp(n.clamp()).unknown(n.unknown())}function tR(){var n=Jg(Gz()(yi));return n.copy=function(){return $z(n,tR())},Oj.apply(n,arguments)}function qz(n,t){return function(r,i){return i.location==="tick"?i.scale.tickFormat(n)(r):i.location==="zoom-slider-tooltip"?t.tickFormat(2)(r):`${r}`}}function og(n){return n.scaleType==="band"}function Z2(n){return n.scaleType==="point"}function Xz(n){return n.scaleType==="symlog"}function Wz(n){return n.type==="piecewise"?G4(n.thresholds,n.colors):tR([n.min??0,n.max??100],n.color)}function _c(n){return n.values?J1(n.values,n.colors).unknown(n.unknownColor??null):J1(n.colors.map((t,e)=>e),n.colors).unknown(n.unknownColor??null)}function Tl(n){return n.type==="ordinal"?_c(n):Wz(n)}function eR(n){const{tickMaxStep:t,tickMinStep:e,tickNumber:r,range:i,domain:a}=n,s=e===void 0?999:Math.floor(Math.abs(a[1]-a[0])/e),l=t===void 0?2:Math.ceil(Math.abs(a[1]-a[0])/t),c=r??Math.floor(Math.abs(i[1]-i[0])/50);return Math.min(s,Math.max(l,c))}function nR(n,t){return t[1]-t[0]===0?1:n/((t[1]-t[0])/100)}function Yz(n,t){const e=H4(n,t),r=e.ticks,{negativeScale:i,linearScale:a,positiveScale:s}=Kz(e);return e.ticks=l=>{const c=r(l),f=e.constant();let d=0,g=0,m=0;c.forEach(_=>{_>-f&&_<f&&(g+=1),_<=-f&&(d+=1),_>=f&&(m+=1)});const v=[];if(d>0&&v.push(...i.ticks(d)),g>0){const _=a.ticks(g);v.at(-1)===_[0]?v.push(..._.slice(1)):v.push(..._)}if(m>0){const _=s.ticks(m);v.at(-1)===_[0]?v.push(..._.slice(1)):v.push(..._)}return v},e.tickFormat=(l=10,c)=>{const f=e.constant(),[d,g]=e.domain(),m=g-d,v=i.domain(),_=v[1]-v[0],b=(m===0?0:_/m)*l,C=a.domain(),I=C[1]-C[0],M=(m===0?0:I/m)*l,N=s.domain(),k=N[1]-N[0],S=(m===0?0:k/m)*l,D=i.tickFormat(b,c),V=a.tickFormat(M,c),B=s.tickFormat(S,c);return F=>(F.valueOf()<=-f?D:F.valueOf()>=f?B:V)(F)},e}function Kz(n){const t=n.constant(),e=n.domain(),r=[e[0],Math.min(e[1],-t)],i=rg(r,n.range()),a=[Math.max(e[0],-t),Math.min(e[1],t)],s=U2(a,n.range()),l=[Math.max(e[0],t),e[1]],c=rg(l,n.range());return{negativeScale:i,linearScale:s,positiveScale:c}}function lg(n,t,e){switch(n){case"log":return rg(t,e);case"pow":return z2(t,e);case"sqrt":return CU(t,e);case"time":return J4(t,e);case"utc":return Hz(t,e);case"symlog":return Yz(t,e);default:return U2(t,e)}}const ug=n=>(n==null?void 0:n[0])instanceof Date;function cg(n,t){const e=J4(n.data,t);return(r,{location:i})=>i==="tick"?e.tickFormat(n.tickNumber)(r):`${r.toLocaleString()}`}const Xv=(n,t)=>{const e=n[1]-n[0],r=t[1]-t[0],i=n[0]-t[0]*e/r,a=n[1]+(100-t[1])*e/r;return[i,a]};let LT,BT;class Zz{constructor(){if(this.types=new Set,LT)throw new Error("You can only create one instance!");LT=this.types}addType(t){this.types.add(t)}getTypes(){return this.types}}class Qz{constructor(){if(this.types=new Set,BT)throw new Error("You can only create one instance!");BT=this.types}addType(t){this.types.add(t)}getTypes(){return this.types}}const rp=new Zz;rp.addType("bar");rp.addType("line");rp.addType("scatter");const rR=new Qz;rR.addType("radar");function Q2(n){return rp.getTypes().has(n)}const Jz=(n,t,e,r,i,a,s,l)=>{var _;const c=r==="x"?i[t].xExtremumGetter:i[t].yExtremumGetter,f=((_=s[t])==null?void 0:_.series)??{},[d,g]=(c==null?void 0:c({series:f,axis:e,axisIndex:a,isDefaultAxis:a===0,getFilters:l}))??[1/0,-1/0],[m,v]=n;return[Math.min(d,m),Math.max(g,v)]},iR=(n,t,e,r,i,a)=>{const l=Object.keys(e).filter(Q2).reduce((c,f)=>Jz(c,f,n,t,e,r,i,a),[1/0,-1/0]);return Number.isNaN(l[0])||Number.isNaN(l[1])?[1/0,-1/0]:l},tH=(n,t,e,r)=>{const i=new Set;return Object.keys(t).filter(Q2).forEach(s=>{var f,d,g;const l=((f=e[s])==null?void 0:f.series)??{},c=(g=(d=t[s]).axisTooltipGetter)==null?void 0:g.call(d,l);c!==void 0&&c.forEach(({axisId:m,direction:v})=>{v===n&&i.add(m??r)})}),i},eH=(n,t,e,r)=>{var i;if(n.domainLimit!==void 0)return n.domainLimit;if(t==="x")for(const a of((i=r.line)==null?void 0:i.seriesOrder)??[]){const s=r.line.series[a];if(s.xAxisId===n.id||s.xAxisId===void 0&&e===0)return"strict"}return"nice"};function nH(n,t,e){const r=t==="x"?[n.left,n.left+n.width]:[n.top+n.height,n.top];return e.reverse?[r[1],r[0]]:r}const rH=.2,iH=.1;function aR({drawingArea:n,formattedSeries:t,axis:e,seriesConfig:r,axisDirection:i,zoomMap:a,zoomOptions:s,getFilters:l,preferStrictDomainInLineCharts:c}){if(e===void 0)return{axis:{},axisIds:[]};const f=tH(i,r,t,e[0].id),d={};return e.forEach((g,m)=>{const v=g,_=s==null?void 0:s[v.id],w=a==null?void 0:a.get(v.id),b=w?[w.start,w.end]:[0,100],C=nH(n,i,v),[I,R]=iR(v,i,r,m,t,w===void 0&&!_?l:void 0),M=!v.ignoreTooltip&&f.has(v.id),N=v.data??[];if(og(v)){const Z=v.categoryGapRatio??rH,it=v.barGapRatio??iH,gt=i==="y"?[C[1],C[0]]:C,_t=Xv(gt,b);if(d[v.id]=X({offset:0,height:0,categoryGapRatio:Z,barGapRatio:it,triggerTooltip:M},v,{data:N,scale:Kg(v.data,_t).paddingInner(Z).paddingOuter(Z/2),tickNumber:v.data.length,colorScale:v.colorMap&&(v.colorMap.type==="ordinal"?_c(X({values:v.data},v.colorMap)):Tl(v.colorMap))}),ug(v.data)){const Mt=cg(v,gt);d[v.id].valueFormatter=v.valueFormatter??Mt}}if(Z2(v)){const Z=i==="y"?[...C].reverse():C,it=Xv(Z,b);if(d[v.id]=X({offset:0,height:0,triggerTooltip:M},v,{data:N,scale:P4(v.data,it),tickNumber:v.data.length,colorScale:v.colorMap&&(v.colorMap.type==="ordinal"?_c(X({values:v.data},v.colorMap)):Tl(v.colorMap))}),ug(v.data)){const gt=cg(v,Z);d[v.id].valueFormatter=v.valueFormatter??gt}}if(v.scaleType==="band"||v.scaleType==="point")return;const k=v.scaleType??"linear",O=c?eH(v,i,m,t):v.domainLimit??"nice",S=[v.min??I,v.max??R];if(typeof O=="function"){const{min:Z,max:it}=O(I,R);S[0]=Z,S[1]=it}const D=eR(X({},v,{range:C,domain:S})),V=nR(D,b),B=Xv(C,b),F=lg(k,S,B);Xz(v)&&v.constant!=null&&F.constant(v.constant);const j=O==="nice"?F.nice(D):F,[rt,mt]=j.domain(),q=[v.min??rt,v.max??mt];d[v.id]=X({offset:0,height:0,triggerTooltip:M},v,{data:N,scaleType:k,scale:j.domain(q),tickNumber:V,colorScale:v.colorMap&&Tl(v.colorMap),valueFormatter:v.valueFormatter??qz(V,lg(k,C.map(Z=>F.invert(Z)),C))})}),{axis:d,axisIds:e.map(({id:g})=>g)}}function aH(n){return n!=null}function sR({zoomMap:n,zoomOptions:t,seriesConfig:e,formattedSeries:r,direction:i}){return(a,s)=>{const l=t[a.id];if(!l||l.filterMode!=="discard")return null;const c=n==null?void 0:n.get(a.id);if(c===void 0||c.start<=0&&c.end>=100)return null;const f=a.scaleType;return f==="point"||f==="band"?sH(a.data,c.start,c.end,i):oH(f,iR(a,i,e,s,r),c.start,c.end,i,a.data)}}function sH(n,t,e,r){const i=(n==null?void 0:n.length)??0,a=Math.floor(t*i/100),s=Math.ceil(e*i/100);return function(c,f){return(c[r]??(n==null?void 0:n[f]))==null?!0:f>=a&&f<s}}function oH(n,t,e,r,i,a){let s,l;[s,l]=lg(n??"linear",t,[0,100]).nice().domain(),s=s instanceof Date?s.getTime():s,l=l instanceof Date?l.getTime():l;const c=s+e*(l-s)/100,f=s+r*(l-s)/100;return function(g,m){const v=g[i]??(a==null?void 0:a[m]);return v==null?!0:v>=c&&v<=f}}const lH=n=>({currentAxisId:t,seriesXAxisId:e,seriesYAxisId:r,isDefaultAxis:i})=>(a,s)=>{var f,d;return!(t===e?r:e)||i?((d=(f=Object.values(n??{}))[0])==null?void 0:d.call(f,a,s))??!0:[r,e].filter(g=>g!==t).map(g=>n[g??""]).filter(aH).every(g=>g(a,s))},VT=n=>(t=[])=>t.reduce((e,r)=>{const{zoom:i,id:a}=r,s=P2(i,a,n);return s&&(e[a]=s),e},{}),uH=n=>{const t=new Map;return n.forEach(e=>{t.set(e.axisId,e)}),t},oR=n=>n.zoom,lR=St([oR],n=>n==null?void 0:n.isInteracting),ip=St([oR],n=>(n==null?void 0:n.zoomData)&&uH(n==null?void 0:n.zoomData)),hd=St([Vl,Pc],(n,t)=>X({},VT("x")(n),VT("y")(t)));St([hd,(n,t)=>t],(n,t)=>n[t]);const cH=St([ip,hd,ps,Vi],(n,t,e,r)=>n&&t&&sR({zoomMap:n,zoomOptions:t,seriesConfig:e,formattedSeries:r,direction:"x"})),fH=St([ip,hd,ps,Vi],(n,t,e,r)=>n&&t&&sR({zoomMap:n,zoomOptions:t,seriesConfig:e,formattedSeries:r,direction:"y"})),uR=St([cH,fH,Vl,Pc],(n,t,e,r)=>{if(n===void 0||t===void 0)return;const i=e==null?void 0:e.reduce((s,l,c)=>{const f=n(l,c);return f!==null&&(s[l.id]=f),s},{}),a=r==null?void 0:r.reduce((s,l,c)=>{const f=t(l,c);return f!==null&&(s[l.id]=f),s},{});if(!(Object.keys(i??{}).length===0&&Object.keys(a??{}).length===0))return lH(X({},i,a))}),Jr=St([Vl,gs,Vi,ps,ip,hd,uR,A4],(n,t,e,r,i,a,s,l)=>aR({drawingArea:t,formattedSeries:e,axis:n,seriesConfig:r,axisDirection:"x",zoomMap:i,zoomOptions:a,getFilters:s,preferStrictDomainInLineCharts:l})),ti=St([Pc,gs,Vi,ps,ip,hd,uR,A4],(n,t,e,r,i,a,s,l)=>aR({drawingArea:t,formattedSeries:e,axis:n,seriesConfig:r,axisDirection:"y",zoomMap:i,zoomOptions:a,getFilters:s,preferStrictDomainInLineCharts:l}));St([Jr,ti,(n,t)=>t],(n,t,e)=>(n==null?void 0:n.axis[e])??(t==null?void 0:t.axis[e]));St([Vl,Pc,(n,t)=>t],(n,t,e)=>{const r=(n==null?void 0:n.find(i=>i.id===e))??(t==null?void 0:t.find(i=>i.id===e))??null;if(r)return r});function Fi(n){return n.bandwidth!==void 0}function Bu(n){return n instanceof Date?n.getTime():n}function Ac(n,t){const{scale:e,data:r,reverse:i}=n;if(!Fi(e)){const s=e.invert(t);if(r===void 0)return-1;const l=Bu(s);return r==null?void 0:r.findIndex((f,d)=>{const g=Bu(f);return g>l&&(d===0||Math.abs(l-g)<=Math.abs(l-Bu(r[d-1])))||g<=l&&(d===r.length-1||Math.abs(Bu(s)-g)<Math.abs(Bu(s)-Bu(r[d+1])))})}const a=e.bandwidth()===0?Math.floor((t-Math.min(...e.range())+e.step()/2)/e.step()):Math.floor((t-Math.min(...e.range()))/e.step());return a<0||a>=r.length?-1:i?r.length-1-a:a}function FT(n,t,e){const{scale:r,data:i}=n;if(!Fi(r)){const a=r.invert(t);return e<0?a:i[e]}return e<0||e>=i.length?null:i[e]}function nx(n,t){const e=n.createSVGPoint();return e.x=t.clientX,e.y=t.clientY,e.matrixTransform(n.getScreenCTM().inverse())}const hH=Object.is;function cR(n,t){if(n===t)return!0;if(!(n instanceof Object)||!(t instanceof Object))return!1;let e=0,r=0;for(const i in n)if(e+=1,!hH(n[i],t[i])||!(i in t))return!1;for(const i in t)r+=1;return e===r}const Lc=({store:n})=>{const t=io(function(){n.update(s=>X({},s,{interaction:{pointer:null,item:null}}))}),e=io(function(s){n.update(l=>{const c=l.interaction.item;return s?c===null||Object.keys(s).some(f=>s[f]!==c[f])?l:X({},l,{interaction:X({},l.interaction,{item:null})}):c===null?l:X({},l,{interaction:X({},l.interaction,{item:null})})})}),r=io(function(s){n.update(l=>cR(l.interaction.item,s)?l:X({},l,{interaction:X({},l.interaction,{item:s})}))}),i=io(function(s){n.update(l=>X({},l,{interaction:X({},l.interaction,{pointer:s})}))});return{instance:{cleanInteraction:t,setItemInteraction:r,removeItemInteraction:e,setPointerCoordinate:i}}};Lc.getInitialState=()=>({interaction:{item:null,pointer:null}});Lc.params={};const J2=n=>n.interaction,dH=St([J2],n=>n!==void 0),fR=St([J2],n=>(n==null?void 0:n.item)??null),hR=St([J2],n=>(n==null?void 0:n.pointer)??null),dd=St([hR],n=>n&&n.x),gd=St([hR],n=>n&&n.y),gH=St([fR],n=>n!==null);function uc(n,t){if(n===t)return!0;if(n&&t&&typeof n=="object"&&typeof t=="object"){if(n.constructor!==t.constructor)return!1;if(Array.isArray(n)){const i=n.length;if(i!==t.length)return!1;for(let a=0;a<i;a+=1)if(!uc(n[a],t[a]))return!1;return!0}if(n instanceof Map&&t instanceof Map){if(n.size!==t.size)return!1;const i=Array.from(n.entries());for(let a=0;a<i.length;a+=1)if(!t.has(i[a][0]))return!1;for(let a=0;a<i.length;a+=1){const s=i[a];if(!uc(s[1],t.get(s[0])))return!1}return!0}if(n instanceof Set&&t instanceof Set){if(n.size!==t.size)return!1;const i=Array.from(n.entries());for(let a=0;a<i.length;a+=1)if(!t.has(i[a][0]))return!1;return!0}if(ArrayBuffer.isView(n)&&ArrayBuffer.isView(t)){const i=n.length;if(i!==t.length)return!1;for(let a=0;a<i;a+=1)if(n[a]!==t[a])return!1;return!0}if(n.constructor===RegExp)return n.source===t.source&&n.flags===t.flags;if(n.valueOf!==Object.prototype.valueOf)return n.valueOf()===t.valueOf();if(n.toString!==Object.prototype.toString)return n.toString()===t.toString();const e=Object.keys(n),r=e.length;if(r!==Object.keys(t).length)return!1;for(let i=0;i<r;i+=1)if(!Object.prototype.hasOwnProperty.call(t,e[i]))return!1;for(let i=0;i<r;i+=1){const a=e[i];if(!uc(n[a],t[a]))return!1}return!0}return n!==n&&t!==t}const ap=(n,t)=>t;function rx(n,t,e=t.axisIds[0]){return Array.isArray(e)?e.map(r=>Ac(t.axis[r],n)):Ac(t.axis[e],n)}const dR=(n,t,e)=>{if(n===null)return null;const r=rx(n,t,e);return r===-1?null:r},t_=St([dd,Jr,ap],dR),e_=St([gd,ti,ap],dR),pH=St([dd,gd,Jr,ti],(n,t,e,r)=>[...n===null?[]:e.axisIds.map(i=>({axisId:i,dataIndex:rx(n,e,i)})),...t===null?[]:r.axisIds.map(i=>({axisId:i,dataIndex:rx(t,r,i)}))].filter(i=>i.dataIndex!==null&&i.dataIndex>=0));function gR(n,t,e,r=t.axisIds[0]){return Array.isArray(r)?r.map((i,a)=>FT(t.axis[i],n,e[a])):FT(t.axis[r],n,e)}const mH=St([dd,Jr,t_,ap],(n,t,e,r)=>n===null||e===null||t.axisIds.length===0?null:gR(n,t,e,r)),vH=St([gd,ti,e_,ap],(n,t,e,r)=>n===null||e===null||t.axisIds.length===0?null:gR(n,t,e,r)),pR=St([dd,Jr],(n,t)=>n===null?[]:t.axisIds.filter(e=>t.axis[e].triggerTooltip).map(e=>({axisId:e,dataIndex:Ac(t.axis[e],n)})).filter(({dataIndex:e})=>e>=0),{memoizeOptions:{resultEqualityCheck:uc}}),mR=St([gd,ti],(n,t)=>n===null?[]:t.axisIds.filter(e=>t.axis[e].triggerTooltip).map(e=>({axisId:e,dataIndex:Ac(t.axis[e],n)})).filter(({dataIndex:e})=>e>=0),{memoizeOptions:{resultEqualityCheck:uc}}),yH=St([pR,mR],(n,t)=>n.length>0||t.length>0),xH=()=>{};function _H(n,t,e,r){const i=gC(AH,{store:n,selector:t,skip:r}).current;i.effect=e,H.useEffect(i.onMount(r),[r])}function AH(n){const{store:t,selector:e,skip:r}=n;let i=!1,a;const s=()=>{l.dispose??(l.dispose=t.subscribe(c=>{const f=e(c);l.effect(a,f),a=f}))},l={effect:xH,dispose:null,onMount:c=>()=>{if(!c)return i||(i=!0,a=e(t.value)),s(),()=>{var f;(f=l.dispose)==null||f.call(l),l.dispose=null}}};return r||(i=!0,a=e(t.value),s()),l}const Bc=({params:n,store:t,seriesConfig:e,svgRef:r,instance:i})=>{const{xAxis:a,yAxis:s,dataset:l,onHighlightedAxisChange:c}=n,f=Ut(t,gs),d=Ut(t,Vi),g=Ut(t,dH),{axis:m,axisIds:v}=Ut(t,Jr),{axis:_,axisIds:w}=Ut(t,ti);C4({controlled:n.highlightedAxis}),ki(()=>{n.highlightedAxis!==void 0&&t.update(R=>R.controlledCartesianAxisHighlight===n.highlightedAxis?R:X({},R,{controlledCartesianAxisHighlight:n.highlightedAxis}))},[t,n.highlightedAxis]);const b=H.useRef(!0);H.useEffect(()=>{if(b.current){b.current=!1;return}t.update(R=>X({},R,{cartesianAxis:X({},R.cartesianAxis,{x:D4(a,l),y:O4(s,l)})}))},[e,f,a,s,l,t]);const C=v[0],I=w[0];return _H(t,pH,(R,M)=>{if(!Object.is(R,M)){if(R.length!==M.length){c(M);return}R!=null&&R.some(({axisId:N,dataIndex:k},O)=>M[O].axisId!==N||M[O].dataIndex!==k)&&c(M)}},!c),H.useEffect(()=>{const R=r.current;if(!g||!R||n.disableAxisListener)return()=>{};const M=i.addInteractionListener("moveEnd",B=>{var F;B.detail.activeGestures.pan||(F=i.cleanInteraction)==null||F.call(i)}),N=i.addInteractionListener("panEnd",B=>{var F;B.detail.activeGestures.move||(F=i.cleanInteraction)==null||F.call(i)}),k=i.addInteractionListener("quickPressEnd",B=>{var F;!B.detail.activeGestures.move&&!B.detail.activeGestures.pan&&((F=i.cleanInteraction)==null||F.call(i))}),O=B=>{var mt,q;const F=B.detail.srcEvent,j=B.detail.target,rt=nx(R,F);if(B.detail.srcEvent.buttons>=1&&(j!=null&&j.hasPointerCapture(B.detail.srcEvent.pointerId))&&!(j!=null&&j.closest("[data-charts-zoom-slider]"))&&(j==null||j.releasePointerCapture(B.detail.srcEvent.pointerId)),!i.isPointInside(rt.x,rt.y,j)){(mt=i.cleanInteraction)==null||mt.call(i);return}(q=i.setPointerCoordinate)==null||q.call(i,rt)},S=i.addInteractionListener("move",O),D=i.addInteractionListener("pan",O),V=i.addInteractionListener("quickPress",O);return()=>{S.cleanup(),M.cleanup(),D.cleanup(),N.cleanup(),V.cleanup(),k.cleanup()}},[r,t,m,C,_,I,i,n.disableAxisListener,g]),H.useEffect(()=>{const R=r.current,M=n.onAxisClick;if(R===null||!M)return()=>{};const N=i.addInteractionListener("tap",k=>{let O=null,S=!1;const D=nx(R,k.detail.srcEvent),V=Ac(m[C],D.x);S=V!==-1,O=S?V:Ac(_[I],D.y);const B=S?v[0]:w[0];if(O==null||O===-1)return;const F=(S?m:_)[B].data[O],j={};Object.keys(d).filter(rt=>["bar","line"].includes(rt)).forEach(rt=>{var mt;(mt=d[rt])==null||mt.seriesOrder.forEach(q=>{const Z=d[rt].series[q],it=Z.xAxisId,gt=Z.yAxisId,_t=S?it:gt;(_t===void 0||_t===B)&&(j[q]=Z.data[O])})}),M(k.detail.srcEvent,{dataIndex:O,axisValue:F,seriesValues:j})});return()=>{N.cleanup()}},[n.onAxisClick,d,r,m,v,_,w,C,I,i]),{}};Bc.params={xAxis:!0,yAxis:!0,dataset:!0,onAxisClick:!0,disableAxisListener:!0,onHighlightedAxisChange:!0,highlightedAxis:!0};Bc.getDefaultizedParams=({params:n})=>X({},n,{colors:n.colors??E4,theme:n.theme??"light",defaultizedXAxis:D4(n.xAxis,n.dataset),defaultizedYAxis:O4(n.yAxis,n.dataset)});Bc.getInitialState=n=>X({cartesianAxis:{x:n.defaultizedXAxis,y:n.defaultizedYAxis}},n.highlightedAxis===void 0?{}:{controlledCartesianAxisHighlight:n.highlightedAxis});const Vc=n=>n.controlledCartesianAxisHighlight,vR=(n,t,e)=>e!==void 0?e.filter(r=>t.axis[r.axisId]!==void 0).map(r=>r):n===null?[]:[{axisId:t.axisIds[0],dataIndex:n}];St([t_,Jr,Vc],vR);St([e_,ti,Vc],vR);const yR=(n,t,e,r)=>r!==void 0?r.map(i=>{var a,s;return X({},i,{value:(s=(a=e.axis[i.axisId])==null?void 0:a.data)==null?void 0:s[i.dataIndex]})}).filter(({value:i})=>i!==void 0):t===null?[]:[{axisId:e.axisIds[0],dataIndex:n,value:t}],EH=St([t_,mH,Jr,Vc],yR),wH=St([e_,vH,ti,Vc],yR),xR=(n,t)=>n===void 0?[t.axis[t.axisIds[0]]]:n.map(r=>t.axis[r.axisId]??null).filter(r=>r!==null);St([Vc,Jr],xR);St([Vc,ti],xR);function jT(n,t){return n.id!==void 0?n:X({id:t},n)}function UT(n){return n.colorMap?X({},n,{colorScale:n.colorMap.type==="ordinal"&&n.data?_c(X({values:n.data},n.colorMap)):Tl(n.colorMap.type==="continuous"?X({min:n.min,max:n.max},n.colorMap):n.colorMap)}):n}function _R(n,t){if(!n||n.length===0)return{axis:{},axisIds:[]};const e={},r=[];return n.forEach((i,a)=>{const s=i.dataKey,l=i.id??`defaultized-z-axis-${a}`;if(s===void 0||i.data!==void 0){e[l]=UT(jT(i,l)),r.push(l);return}if(t===void 0)throw new Error("MUI X Charts: z-axis uses `dataKey` but no `dataset` is provided.");e[l]=UT(jT(X({},i,{data:t.map(c=>c[s])}),l)),r.push(l)}),{axis:e,axisIds:r}}const pd=({params:n,store:t})=>{const{zAxis:e,dataset:r}=n,i=H.useRef(!0);return H.useEffect(()=>{if(i.current){i.current=!1;return}t.update(a=>X({},a,{zAxis:_R(e,r)}))},[e,r,t]),{}};pd.params={zAxis:!0,dataset:!0};pd.getInitialState=n=>({zAxis:_R(n.zAxis,n.dataset)});const bH=n=>n,SH=St([bH],n=>n.zAxis),Ul=({store:n,params:t})=>{C4({controlled:t.highlightedItem}),ki(()=>{n.update(i=>i.highlight.item===t.highlightedItem?i:X({},i,{highlight:X({},i.highlight,{item:t.highlightedItem})}))},[n,t.highlightedItem]);const e=io(()=>{var i;(i=t.onHighlightChange)==null||i.call(t,null),n.update(a=>X({},a,{highlight:{item:null}}))}),r=io(i=>{var s;const a=n.getSnapshot().highlight.item;cR(a,i)||((s=t.onHighlightChange)==null||s.call(t,i),n.update(l=>X({},l,{highlight:{item:i}})))});return{instance:{clearHighlight:e,setHighlight:r}}};Ul.getDefaultizedParams=({params:n})=>X({},n,{highlightedItem:n.highlightedItem??null});Ul.getInitialState=n=>({highlight:{item:n.highlightedItem}});Ul.params={highlightedItem:!0,onHighlightChange:!0};function AR(n){let t=1/0,e=-1/0;for(const r of n??[])r<t&&(t=r),r>e&&(e=r);return[t,e]}const zT=(n,t)=>t==="x"?{x:n,y:null}:{x:null,y:n},ER=n=>{var s;const{axis:t,getFilters:e,isDefaultAxis:r}=n,i=e==null?void 0:e({currentAxisId:t.id,isDefaultAxis:r}),a=i?(s=t.data)==null?void 0:s.filter((l,c)=>i({x:null,y:null},c)):t.data;return AR(a??[])},wR=n=>t=>{const{series:e,axis:r,getFilters:i,isDefaultAxis:a}=t;return Object.keys(e).filter(s=>{const l=n==="x"?e[s].xAxisId:e[s].yAxisId;return l===r.id||a&&l===void 0}).reduce((s,l)=>{const{stackedData:c}=e[l],f=i==null?void 0:i({currentAxisId:r.id,isDefaultAxis:a,seriesXAxisId:e[l].xAxisId,seriesYAxisId:e[l].yAxisId}),[d,g]=(c==null?void 0:c.reduce((m,v,_)=>f&&(!f(zT(v[0],n),_)||!f(zT(v[1],n),_))?m:[Math.min(...v,m[0]),Math.max(...v,m[1])],[1/0,-1/0]))??[1/0,-1/0];return[Math.min(d,s[0]),Math.max(g,s[1])]},[1/0,-1/0])},TH=n=>Object.keys(n.series).some(e=>n.series[e].layout==="horizontal")?wR("x")(n):ER(n),CH=n=>Object.keys(n.series).some(e=>n.series[e].layout==="horizontal")?ER(n):wR("y")(n);function In(n){return function(){return n}}const HT=Math.abs,lr=Math.atan2,dl=Math.cos,IH=Math.max,Wv=Math.min,na=Math.sin,Ju=Math.sqrt,Dr=1e-12,Uh=Math.PI,fg=Uh/2,I1=2*Uh;function RH(n){return n>1?0:n<-1?Uh:Math.acos(n)}function GT(n){return n>=1?fg:n<=-1?-fg:Math.asin(n)}const ix=Math.PI,ax=2*ix,ml=1e-6,DH=ax-ml;function bR(n){this._+=n[0];for(let t=1,e=n.length;t<e;++t)this._+=arguments[t]+n[t]}function OH(n){let t=Math.floor(n);if(!(t>=0))throw new Error(`invalid digits: ${n}`);if(t>15)return bR;const e=10**t;return function(r){this._+=r[0];for(let i=1,a=r.length;i<a;++i)this._+=Math.round(arguments[i]*e)/e+r[i]}}let MH=class{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?bR:OH(t)}moveTo(t,e){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+e}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,e){this._append`L${this._x1=+t},${this._y1=+e}`}quadraticCurveTo(t,e,r,i){this._append`Q${+t},${+e},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(t,e,r,i,a,s){this._append`C${+t},${+e},${+r},${+i},${this._x1=+a},${this._y1=+s}`}arcTo(t,e,r,i,a){if(t=+t,e=+e,r=+r,i=+i,a=+a,a<0)throw new Error(`negative radius: ${a}`);let s=this._x1,l=this._y1,c=r-t,f=i-e,d=s-t,g=l-e,m=d*d+g*g;if(this._x1===null)this._append`M${this._x1=t},${this._y1=e}`;else if(m>ml)if(!(Math.abs(g*c-f*d)>ml)||!a)this._append`L${this._x1=t},${this._y1=e}`;else{let v=r-s,_=i-l,w=c*c+f*f,b=v*v+_*_,C=Math.sqrt(w),I=Math.sqrt(m),R=a*Math.tan((ix-Math.acos((w+m-b)/(2*C*I)))/2),M=R/I,N=R/C;Math.abs(M-1)>ml&&this._append`L${t+M*d},${e+M*g}`,this._append`A${a},${a},0,0,${+(g*v>d*_)},${this._x1=t+N*c},${this._y1=e+N*f}`}}arc(t,e,r,i,a,s){if(t=+t,e=+e,r=+r,s=!!s,r<0)throw new Error(`negative radius: ${r}`);let l=r*Math.cos(i),c=r*Math.sin(i),f=t+l,d=e+c,g=1^s,m=s?i-a:a-i;this._x1===null?this._append`M${f},${d}`:(Math.abs(this._x1-f)>ml||Math.abs(this._y1-d)>ml)&&this._append`L${f},${d}`,r&&(m<0&&(m=m%ax+ax),m>DH?this._append`A${r},${r},0,1,${g},${t-l},${e-c}A${r},${r},0,1,${g},${this._x1=f},${this._y1=d}`:m>ml&&this._append`A${r},${r},0,${+(m>=ix)},${g},${this._x1=t+r*Math.cos(a)},${this._y1=e+r*Math.sin(a)}`)}rect(t,e,r,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+e}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}};function NH(n){let t=3;return n.digits=function(e){if(!arguments.length)return t;if(e==null)t=null;else{const r=Math.floor(e);if(!(r>=0))throw new RangeError(`invalid digits: ${e}`);t=r}return n},()=>new MH(t)}function PH(n){return n.innerRadius}function kH(n){return n.outerRadius}function LH(n){return n.startAngle}function BH(n){return n.endAngle}function VH(n){return n&&n.padAngle}function FH(n,t,e,r,i,a,s,l){var c=e-n,f=r-t,d=s-i,g=l-a,m=g*c-d*f;if(!(m*m<Dr))return m=(d*(t-a)-g*(n-i))/m,[n+m*c,t+m*f]}function l1(n,t,e,r,i,a,s){var l=n-e,c=t-r,f=(s?a:-a)/Ju(l*l+c*c),d=f*c,g=-f*l,m=n+d,v=t+g,_=e+d,w=r+g,b=(m+_)/2,C=(v+w)/2,I=_-m,R=w-v,M=I*I+R*R,N=i-a,k=m*w-_*v,O=(R<0?-1:1)*Ju(IH(0,N*N*M-k*k)),S=(k*R-I*O)/M,D=(-k*I-R*O)/M,V=(k*R+I*O)/M,B=(-k*I+R*O)/M,F=S-b,j=D-C,rt=V-b,mt=B-C;return F*F+j*j>rt*rt+mt*mt&&(S=V,D=B),{cx:S,cy:D,x01:-d,y01:-g,x11:S*(i/N-1),y11:D*(i/N-1)}}function SR(){var n=PH,t=kH,e=In(0),r=null,i=LH,a=BH,s=VH,l=null,c=NH(f);function f(){var d,g,m=+n.apply(this,arguments),v=+t.apply(this,arguments),_=i.apply(this,arguments)-fg,w=a.apply(this,arguments)-fg,b=HT(w-_),C=w>_;if(l||(l=d=c()),v<m&&(g=v,v=m,m=g),!(v>Dr))l.moveTo(0,0);else if(b>I1-Dr)l.moveTo(v*dl(_),v*na(_)),l.arc(0,0,v,_,w,!C),m>Dr&&(l.moveTo(m*dl(w),m*na(w)),l.arc(0,0,m,w,_,C));else{var I=_,R=w,M=_,N=w,k=b,O=b,S=s.apply(this,arguments)/2,D=S>Dr&&(r?+r.apply(this,arguments):Ju(m*m+v*v)),V=Wv(HT(v-m)/2,+e.apply(this,arguments)),B=V,F=V,j,rt;if(D>Dr){var mt=GT(D/m*na(S)),q=GT(D/v*na(S));(k-=mt*2)>Dr?(mt*=C?1:-1,M+=mt,N-=mt):(k=0,M=N=(_+w)/2),(O-=q*2)>Dr?(q*=C?1:-1,I+=q,R-=q):(O=0,I=R=(_+w)/2)}var Z=v*dl(I),it=v*na(I),gt=m*dl(N),_t=m*na(N);if(V>Dr){var Mt=v*dl(R),It=v*na(R),Et=m*dl(M),zt=m*na(M),$t;if(b<Uh)if($t=FH(Z,it,Et,zt,Mt,It,gt,_t)){var pe=Z-$t[0],Re=it-$t[1],Ke=Mt-$t[0],ft=It-$t[1],wt=1/na(RH((pe*Ke+Re*ft)/(Ju(pe*pe+Re*Re)*Ju(Ke*Ke+ft*ft)))/2),Rt=Ju($t[0]*$t[0]+$t[1]*$t[1]);B=Wv(V,(m-Rt)/(wt-1)),F=Wv(V,(v-Rt)/(wt+1))}else B=F=0}O>Dr?F>Dr?(j=l1(Et,zt,Z,it,v,F,C),rt=l1(Mt,It,gt,_t,v,F,C),l.moveTo(j.cx+j.x01,j.cy+j.y01),F<V?l.arc(j.cx,j.cy,F,lr(j.y01,j.x01),lr(rt.y01,rt.x01),!C):(l.arc(j.cx,j.cy,F,lr(j.y01,j.x01),lr(j.y11,j.x11),!C),l.arc(0,0,v,lr(j.cy+j.y11,j.cx+j.x11),lr(rt.cy+rt.y11,rt.cx+rt.x11),!C),l.arc(rt.cx,rt.cy,F,lr(rt.y11,rt.x11),lr(rt.y01,rt.x01),!C))):(l.moveTo(Z,it),l.arc(0,0,v,I,R,!C)):l.moveTo(Z,it),!(m>Dr)||!(k>Dr)?l.lineTo(gt,_t):B>Dr?(j=l1(gt,_t,Mt,It,m,-B,C),rt=l1(Z,it,Et,zt,m,-B,C),l.lineTo(j.cx+j.x01,j.cy+j.y01),B<V?l.arc(j.cx,j.cy,B,lr(j.y01,j.x01),lr(rt.y01,rt.x01),!C):(l.arc(j.cx,j.cy,B,lr(j.y01,j.x01),lr(j.y11,j.x11),!C),l.arc(0,0,m,lr(j.cy+j.y11,j.cx+j.x11),lr(rt.cy+rt.y11,rt.cx+rt.x11),C),l.arc(rt.cx,rt.cy,B,lr(rt.y11,rt.x11),lr(rt.y01,rt.x01),!C))):l.arc(0,0,m,N,M,C)}if(l.closePath(),d)return l=null,d+""||null}return f.centroid=function(){var d=(+n.apply(this,arguments)+ +t.apply(this,arguments))/2,g=(+i.apply(this,arguments)+ +a.apply(this,arguments))/2-Uh/2;return[dl(g)*d,na(g)*d]},f.innerRadius=function(d){return arguments.length?(n=typeof d=="function"?d:In(+d),f):n},f.outerRadius=function(d){return arguments.length?(t=typeof d=="function"?d:In(+d),f):t},f.cornerRadius=function(d){return arguments.length?(e=typeof d=="function"?d:In(+d),f):e},f.padRadius=function(d){return arguments.length?(r=d==null?null:typeof d=="function"?d:In(+d),f):r},f.startAngle=function(d){return arguments.length?(i=typeof d=="function"?d:In(+d),f):i},f.endAngle=function(d){return arguments.length?(a=typeof d=="function"?d:In(+d),f):a},f.padAngle=function(d){return arguments.length?(s=typeof d=="function"?d:In(+d),f):s},f.context=function(d){return arguments.length?(l=d??null,f):l},f}function TR(n){return typeof n=="object"&&"length"in n?n:Array.from(n)}function jH(n,t){return t<n?-1:t>n?1:t>=n?0:NaN}function UH(n){return n}function zH(){var n=UH,t=jH,e=null,r=In(0),i=In(I1),a=In(0);function s(l){var c,f=(l=TR(l)).length,d,g,m=0,v=new Array(f),_=new Array(f),w=+r.apply(this,arguments),b=Math.min(I1,Math.max(-I1,i.apply(this,arguments)-w)),C,I=Math.min(Math.abs(b)/f,a.apply(this,arguments)),R=I*(b<0?-1:1),M;for(c=0;c<f;++c)(M=_[v[c]=c]=+n(l[c],c,l))>0&&(m+=M);for(t!=null?v.sort(function(N,k){return t(_[N],_[k])}):e!=null&&v.sort(function(N,k){return e(l[N],l[k])}),c=0,g=m?(b-f*R)/m:0;c<f;++c,w=C)d=v[c],M=_[d],C=w+(M>0?M*g:0)+R,_[d]={data:l[d],index:c,value:M,startAngle:w,endAngle:C,padAngle:I};return _}return s.value=function(l){return arguments.length?(n=typeof l=="function"?l:In(+l),s):n},s.sortValues=function(l){return arguments.length?(t=l,e=null,s):t},s.sort=function(l){return arguments.length?(e=l,t=null,s):e},s.startAngle=function(l){return arguments.length?(r=typeof l=="function"?l:In(+l),s):r},s.endAngle=function(l){return arguments.length?(i=typeof l=="function"?l:In(+l),s):i},s.padAngle=function(l){return arguments.length?(a=typeof l=="function"?l:In(+l),s):a},s}function Ec(n,t){if((s=n.length)>1)for(var e=1,r,i,a=n[t[0]],s,l=a.length;e<s;++e)for(i=a,a=n[t[e]],r=0;r<l;++r)a[r][1]+=a[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function wc(n){for(var t=n.length,e=new Array(t);--t>=0;)e[t]=t;return e}function HH(n,t){return n[t]}function GH(n){const t=[];return t.key=n,t}function CR(){var n=In([]),t=wc,e=Ec,r=HH;function i(a){var s=Array.from(n.apply(this,arguments),GH),l,c=s.length,f=-1,d;for(const g of a)for(l=0,++f;l<c;++l)(s[l][f]=[0,+r(g,s[l].key,f,a)]).data=g;for(l=0,d=TR(t(s));l<c;++l)s[d[l]].index=l;return e(s,d),s}return i.keys=function(a){return arguments.length?(n=typeof a=="function"?a:In(Array.from(a)),i):n},i.value=function(a){return arguments.length?(r=typeof a=="function"?a:In(+a),i):r},i.order=function(a){return arguments.length?(t=a==null?wc:typeof a=="function"?a:In(Array.from(a)),i):t},i.offset=function(a){return arguments.length?(e=a??Ec,i):e},i}function $H(n,t){if((r=n.length)>0){for(var e,r,i=0,a=n[0].length,s;i<a;++i){for(s=e=0;e<r;++e)s+=n[e][i][1]||0;if(s)for(e=0;e<r;++e)n[e][i][1]/=s}Ec(n,t)}}function qH(n,t){if((c=n.length)>0)for(var e,r=0,i,a,s,l,c,f=n[t[0]].length;r<f;++r)for(s=l=0,e=0;e<c;++e)(a=(i=n[t[e]][r])[1]-i[0])>0?(i[0]=s,i[1]=s+=a):a<0?(i[1]=l,i[0]=l+=a):(i[0]=0,i[1]=a)}function XH(n,t){if((i=n.length)>0){for(var e=0,r=n[t[0]],i,a=r.length;e<a;++e){for(var s=0,l=0;s<i;++s)l+=n[s][e][1]||0;r[e][1]+=r[e][0]=-l/2}Ec(n,t)}}function WH(n,t){if(!(!((s=n.length)>0)||!((a=(i=n[t[0]]).length)>0))){for(var e=0,r=1,i,a,s;r<a;++r){for(var l=0,c=0,f=0;l<s;++l){for(var d=n[t[l]],g=d[r][1]||0,m=d[r-1][1]||0,v=(g-m)/2,_=0;_<l;++_){var w=n[t[_]],b=w[r][1]||0,C=w[r-1][1]||0;v+=b-C}c+=g,f+=v*g}i[r-1][1]+=i[r-1][0]=e,c&&(e-=f/c)}i[r-1][1]+=i[r-1][0]=e,Ec(n,t)}}function IR(n){var t=n.map(YH);return wc(n).sort(function(e,r){return t[e]-t[r]})}function YH(n){for(var t=-1,e=0,r=n.length,i,a=-1/0;++t<r;)(i=+n[t][1])>a&&(a=i,e=t);return e}function RR(n){var t=n.map(DR);return wc(n).sort(function(e,r){return t[e]-t[r]})}function DR(n){for(var t=0,e=-1,r=n.length,i;++e<r;)(i=+n[e][1])&&(t+=i);return t}function KH(n){return RR(n).reverse()}function ZH(n){var t=n.length,e,r,i=n.map(DR),a=IR(n),s=0,l=0,c=[],f=[];for(e=0;e<t;++e)r=a[e],s<l?(s+=i[r],c.push(r)):(l+=i[r],f.push(r));return f.reverse().concat(c)}function QH(n){return wc(n).reverse()}const Yv={appearance:IR,ascending:RR,descending:KH,insideOut:ZH,none:wc,reverse:QH},Kv={expand:$H,diverging:qH,none:Ec,silhouette:XH,wiggle:WH},OR=n=>{const{series:t,seriesOrder:e,defaultStrategy:r}=n,i=[],a={};return e.forEach(s=>{const{stack:l,stackOrder:c,stackOffset:f}=t[s];l===void 0?i.push({ids:[s],stackingOrder:Yv.none,stackingOffset:Kv.none}):a[l]===void 0?(a[l]=i.length,i.push({ids:[s],stackingOrder:Yv[c??(r==null?void 0:r.stackOrder)??"none"],stackingOffset:Kv[f??(r==null?void 0:r.stackOffset)??"diverging"]})):(i[a[l]].ids.push(s),c!==void 0&&(i[a[l]].stackingOrder=Yv[c]),f!==void 0&&(i[a[l]].stackingOffset=Kv[f]))}),i},JH=n=>n==null?"":n.toLocaleString(),tG=(n,t)=>{const{seriesOrder:e,series:r}=n,i=OR(n),a=t??[];e.forEach(l=>{const c=r[l].data;if(c!==void 0)c.forEach((f,d)=>{a.length<=d?a.push({[l]:f}):a[d][l]=f});else if(t===void 0)throw new Error([`MUI X Charts: bar series with id='${l}' has no data.`,"Either provide a data property to the series or use the dataset prop."].join(`
`))});const s={};return i.forEach(l=>{const{ids:c,stackingOffset:f,stackingOrder:d}=l,g=CR().keys(c.map(m=>{const v=r[m].dataKey;return r[m].data===void 0&&v!==void 0?v:m})).value((m,v)=>m[v]??0).order(d).offset(f)(a);c.forEach((m,v)=>{const _=r[m].dataKey;s[m]=X({layout:"vertical",labelMarkType:"square",minBarSize:0,valueFormatter:r[m].valueFormatter??JH},r[m],{data:_?t.map(w=>{const b=w[_];return typeof b!="number"?null:b}):r[m].data,stackedData:g[v].map(([w,b])=>[w,b])})})}),{seriesOrder:e,stackingGroups:i,series:s}};function Kr(n,t){return typeof n=="function"?n(t):n}const eG=n=>{const{seriesOrder:t,series:e}=n;return t.reduce((r,i)=>{const a=Kr(e[i].label,"legend");return a===void 0||r.push({markType:e[i].labelMarkType,id:i,seriesId:i,color:e[i].color,label:a}),r},[])},MR=(n,t,e)=>{const r=n.layout==="vertical",i=r?t==null?void 0:t.colorScale:e==null?void 0:e.colorScale,a=r?e==null?void 0:e.colorScale:t==null?void 0:t.colorScale,s=r?t==null?void 0:t.data:e==null?void 0:e.data;return a?l=>{if(l===void 0)return n.color;const c=n.data[l],f=c===null?n.color:a(c);return f===null?n.color:f}:i&&s?l=>{if(l===void 0)return n.color;const c=s[l],f=c===null?n.color:i(c);return f===null?n.color:f}:()=>n.color},nG=n=>{const{series:t,getColor:e,identifier:r}=n;if(!r||r.dataIndex===void 0)return null;const i=Kr(t.label,"tooltip"),a=t.data[r.dataIndex];if(a==null)return null;const s=t.valueFormatter(a,{dataIndex:r.dataIndex});return{identifier:r,color:e(r.dataIndex),label:i,value:a,formattedValue:s,markType:t.labelMarkType}},rG=n=>Object.values(n).map(t=>t.layout==="horizontal"?{direction:"y",axisId:t.yAxisId}:{direction:"x",axisId:t.xAxisId}),iG=(n,t,e)=>X({id:n.id??`auto-generated-id-${t}`,color:e[t%e.length]},n),aG={seriesProcessor:tG,colorProcessor:MR,legendGetter:eG,tooltipGetter:nG,axisTooltipGetter:rG,xExtremumGetter:TH,yExtremumGetter:CH,getSeriesWithDefaultValues:iG},sG=n=>{const{series:t,axis:e,isDefaultAxis:r,getFilters:i}=n;let a=1/0,s=-1/0;for(const l in t){if(!Object.hasOwn(t,l))continue;const c=t[l].xAxisId;if(!(c===e.id||c===void 0&&r))continue;const f=i==null?void 0:i({currentAxisId:e.id,isDefaultAxis:r,seriesXAxisId:t[l].xAxisId,seriesYAxisId:t[l].yAxisId}),d=t[l].data??[];for(let g=0;g<d.length;g+=1){const m=d[g];f&&!f(m,g)||m.x!==null&&(m.x<a&&(a=m.x),m.x>s&&(s=m.x))}}return[a,s]},oG=n=>{const{series:t,axis:e,isDefaultAxis:r,getFilters:i}=n;let a=1/0,s=-1/0;for(const l in t){if(!Object.hasOwn(t,l))continue;const c=t[l].yAxisId;if(!(c===e.id||c===void 0&&r))continue;const f=i==null?void 0:i({currentAxisId:e.id,isDefaultAxis:r,seriesXAxisId:t[l].xAxisId,seriesYAxisId:t[l].yAxisId}),d=t[l].data??[];for(let g=0;g<d.length;g+=1){const m=d[g];f&&!f(m,g)||m.y!==null&&(m.y<a&&(a=m.y),m.y>s&&(s=m.y))}}return[a,s]},lG=({series:n,seriesOrder:t},e)=>({series:Object.fromEntries(Object.entries(n).map(([i,a])=>{const s=a==null?void 0:a.datasetKeys,l=["x","y","id"].filter(f=>typeof(s==null?void 0:s[f])!="string");if(a!=null&&a.datasetKeys&&l.length>0)throw new Error([`MUI X Charts: scatter series with id='${i}' has incomplete datasetKeys.`,`Properties ${l.map(f=>`"${f}"`).join(", ")} are missing.`].join(`
`));const c=s?(e==null?void 0:e.map(f=>({x:f[s.x]??null,y:f[s.y]??null,z:s.z&&f[s.z],id:s.id&&f[s.id]})))??[]:a.data??[];return[i,X({labelMarkType:"circle",markerSize:4},a,{preview:X({markerSize:1},a==null?void 0:a.preview),data:c,valueFormatter:a.valueFormatter??(f=>f&&`(${f.x}, ${f.y})`)})]})),seriesOrder:t}),uG=(n,t,e,r)=>{const i=r==null?void 0:r.colorScale,a=e==null?void 0:e.colorScale,s=t==null?void 0:t.colorScale;return i?l=>{var d,g;if(l===void 0)return n.color;if(((d=r==null?void 0:r.data)==null?void 0:d[l])!==void 0){const m=i((g=r==null?void 0:r.data)==null?void 0:g[l]);if(m!==null)return m}const c=n.data[l],f=c===null?n.color:i(c.z);return f===null?n.color:f}:a?l=>{if(l===void 0)return n.color;const c=n.data[l],f=c===null?n.color:a(c.y);return f===null?n.color:f}:s?l=>{if(l===void 0)return n.color;const c=n.data[l],f=c===null?n.color:s(c.x);return f===null?n.color:f}:()=>n.color},cG=n=>{const{seriesOrder:t,series:e}=n;return t.reduce((r,i)=>{const a=Kr(e[i].label,"legend");return a===void 0||r.push({markType:e[i].labelMarkType,id:i,seriesId:i,color:e[i].color,label:a}),r},[])},fG=n=>{const{series:t,getColor:e,identifier:r}=n;if(!r||r.dataIndex===void 0)return null;const i=Kr(t.label,"tooltip"),a=t.data[r.dataIndex],s=t.valueFormatter(a,{dataIndex:r.dataIndex});return{identifier:r,color:e(r.dataIndex),label:i,value:a,formattedValue:s,markType:t.labelMarkType}},hG=(n,t,e)=>X({id:n.id??`auto-generated-id-${t}`,color:e[t%e.length]},n),dG={seriesProcessor:lG,colorProcessor:uG,legendGetter:cG,tooltipGetter:fG,xExtremumGetter:sG,yExtremumGetter:oG,getSeriesWithDefaultValues:hG},gG=n=>{const{axis:t}=n;return AR(t.data??[])};function pG(n,t,e,r){return e.reduce((i,a,s)=>{if(t[s]===null)return i;const[l,c]=n(a);return r&&(!r({y:l,x:null},s)||!r({y:c,x:null},s))?i:[Math.min(l,c,i[0]),Math.max(l,c,i[1])]},[1/0,-1/0])}const mG=n=>{const{series:t,axis:e,isDefaultAxis:r,getFilters:i}=n;return Object.keys(t).filter(a=>{const s=t[a].yAxisId;return s===e.id||r&&s===void 0}).reduce((a,s)=>{const{area:l,stackedData:c,data:f}=t[s],d=l!==void 0,g=i==null?void 0:i({currentAxisId:e.id,isDefaultAxis:r,seriesXAxisId:t[s].xAxisId,seriesYAxisId:t[s].yAxisId}),m=d&&e.scaleType!=="log"&&typeof t[s].baseline!="string"?b=>b:b=>[b[1],b[1]],v=pG(m,f,c,g),[_,w]=v;return[Math.min(_,a[0]),Math.max(w,a[1])]},[1/0,-1/0])};function vG(n,t){const e={};return Object.keys(n).forEach(r=>{e[r]=X({},n[r],{valueFormatter:n[r].valueFormatter??t})}),e}const yG=(n,t)=>{const{seriesOrder:e,series:r}=n,i=OR(X({},n,{defaultStrategy:{stackOffset:"none"}})),a=t??[];e.forEach(l=>{const c=r[l].data;c!==void 0&&c.forEach((f,d)=>{a.length<=d?a.push({[l]:f}):a[d][l]=f})});const s={};return i.forEach(l=>{const{ids:c,stackingOrder:f,stackingOffset:d}=l,g=CR().keys(c.map(m=>{const v=r[m].dataKey;return r[m].data===void 0&&v!==void 0?v:m})).value((m,v)=>m[v]??0).order(f).offset(d)(a);c.forEach((m,v)=>{const _=r[m].dataKey;s[m]=X({labelMarkType:"line"},r[m],{data:_?t.map(w=>{const b=w[_];return typeof b!="number"?null:b}):r[m].data,stackedData:g[v].map(([w,b])=>[w,b])})})}),{seriesOrder:e,stackingGroups:i,series:vG(s,l=>l==null?"":l.toLocaleString())}},xG=(n,t,e)=>{const r=e==null?void 0:e.colorScale,i=t==null?void 0:t.colorScale;return r?a=>{if(a===void 0)return n.color;const s=n.data[a],l=s===null?n.color:r(s);return l===null?n.color:l}:i?a=>{var c;if(a===void 0)return n.color;const s=(c=t.data)==null?void 0:c[a],l=s===null?n.color:i(s);return l===null?n.color:l}:()=>n.color},_G=n=>{const{seriesOrder:t,series:e}=n;return t.reduce((r,i)=>{const a=Kr(e[i].label,"legend");return a===void 0||r.push({markType:e[i].labelMarkType,id:i,seriesId:i,color:e[i].color,label:a}),r},[])},AG=n=>{const{series:t,getColor:e,identifier:r}=n;if(!r||r.dataIndex===void 0)return null;const i=Kr(t.label,"tooltip"),a=t.data[r.dataIndex],s=t.valueFormatter(a,{dataIndex:r.dataIndex});return{identifier:r,color:e(r.dataIndex),label:i,value:a,formattedValue:s,markType:t.labelMarkType}},EG=n=>Object.values(n).map(t=>({direction:"x",axisId:t.xAxisId})),wG=(n,t,e)=>X({id:n.id??`auto-generated-id-${t}`,color:e[t%e.length]},n),bG={colorProcessor:xG,seriesProcessor:yG,legendGetter:_G,tooltipGetter:AG,axisTooltipGetter:EG,xExtremumGetter:gG,yExtremumGetter:mG,getSeriesWithDefaultValues:wG},SG=(n="none")=>{if(typeof n=="function")return n;switch(n){case"none":return null;case"desc":return(t,e)=>e-t;case"asc":return(t,e)=>t-e;default:return null}},TG=n=>{const{seriesOrder:t,series:e}=n,r={};return t.forEach(i=>{const a=zH().startAngle(2*Math.PI*(e[i].startAngle??0)/360).endAngle(2*Math.PI*(e[i].endAngle??360)/360).padAngle(2*Math.PI*(e[i].paddingAngle??0)/360).sortValues(SG(e[i].sortingValues??"none"))(e[i].data.map(s=>s.value));r[i]=X({labelMarkType:"circle",valueFormatter:s=>s.value.toLocaleString()},e[i],{data:e[i].data.map((s,l)=>X({},s,{id:s.id??`auto-generated-pie-id-${i}-${l}`},a[l])).map((s,l)=>{var c,f;return X({labelMarkType:"circle"},s,{formattedValue:((f=(c=e[i]).valueFormatter)==null?void 0:f.call(c,X({},s,{label:Kr(s.label,"arc")}),{dataIndex:l}))??s.value.toLocaleString()})})})}),{seriesOrder:t,series:r}},CG=n=>t=>n.data[t].color,IG=n=>{const{seriesOrder:t,series:e}=n;return t.reduce((r,i)=>(e[i].data.forEach((a,s)=>{const l=Kr(a.label,"legend");l!==void 0&&r.push({markType:a.labelMarkType??e[i].labelMarkType,id:a.id??s,seriesId:i,color:a.color,label:l,itemId:a.id??s})}),r),[])},RG=n=>{const{series:t,getColor:e,identifier:r}=n;if(!r||r.dataIndex===void 0)return null;const i=t.data[r.dataIndex];if(i==null)return null;const a=Kr(i.label,"tooltip"),s=X({},i,{label:a}),l=t.valueFormatter(s,{dataIndex:r.dataIndex});return{identifier:r,color:e(r.dataIndex),label:a,value:s,formattedValue:l,markType:i.labelMarkType??t.labelMarkType}},DG=(n,t,e)=>X({id:n.id??`auto-generated-id-${t}`},n,{data:n.data.map((r,i)=>X({color:e[i%e.length]},r))}),OG={colorProcessor:CG,seriesProcessor:TG,legendGetter:IG,tooltipGetter:RG,getSeriesWithDefaultValues:DG},MG={bar:aG,scatter:dG,line:bG,pie:OG},NG=[pd,Bc,Lc,Ul];function PG(n){const{children:t,plugins:e=NG,pluginParams:r={},seriesConfig:i=MG}=n,{contextValue:a}=gj(e,r,i);return A.jsx(T4.Provider,{value:a,children:t})}const Ro=()=>{const n=H.useContext(T4);if(n==null)throw new Error(["MUI X Charts: Could not find the Chart context.","It looks like you rendered your component outside of a ChartDataProvider.","This can also happen if you are bundling multiple versions of the library."].join(`
`));return n};function Ve(){const n=Ro();if(!n)throw new Error(["MUI X Charts: Could not find the charts context.","It looks like you rendered your component outside of a ChartContainer parent component."].join(`
`));return n.store}function Ei(){const n=Ve();return Ut(n,gs)}function n_(){const n=Ve();return Ut(n,ZF)}function r_(n){return rR.getTypes().has(n)}const kG=(n,t,e,r,i,a,s)=>{var v;const l=r==="rotation"?i[t].rotationExtremumGetter:i[t].radiusExtremumGetter,c=((v=s[t])==null?void 0:v.series)??{},[f,d]=(l==null?void 0:l({series:c,axis:e,axisIndex:a,isDefaultAxis:a===0}))??[1/0,-1/0],[g,m]=n;return[Math.min(f,g),Math.max(d,m)]},LG=(n,t,e,r,i)=>{const s=Object.keys(e).filter(r_).reduce((l,c)=>kG(l,c,n,t,e,r,i),[1/0,-1/0]);return Number.isNaN(s[0])||Number.isNaN(s[1])?[1/0,-1/0]:s},tc=(n,t)=>n===void 0?t:Math.PI*n/180,BG=(n,t,e,r)=>{const i=new Set;return Object.keys(t).filter(r_).forEach(s=>{var f,d,g;const l=((f=e[s])==null?void 0:f.series)??{},c=(g=(d=t[s]).axisTooltipGetter)==null?void 0:g.call(d,l);c!==void 0&&c.forEach(({axisId:m,direction:v})=>{v===n&&i.add(m??r)})}),i};function VG(n,t,e){if(t==="rotation"){if(e.scaleType==="point"){const r=[tc(e.startAngle,0),tc(e.endAngle,2*Math.PI)],i=r[1]-r[0];return i>Math.PI*2-.1&&(r[1]-=i/e.data.length),r}return[tc(e.startAngle,0),tc(e.endAngle,2*Math.PI)]}return[0,Math.min(n.height,n.width)/2]}const FG=.2,jG=.1;function NR({drawingArea:n,formattedSeries:t,axis:e,seriesConfig:r,axisDirection:i}){if(e===void 0)return{axis:{},axisIds:[]};const a=BG(i,r,t,e[0].id),s={};return e.forEach((l,c)=>{const f=l,d=VG(n,i,f),[g,m]=LG(f,i,r,c,t),v=!f.ignoreTooltip&&a.has(f.id),_=f.data??[];if(og(f)){const D=f.categoryGapRatio??FG,V=f.barGapRatio??jG;if(s[f.id]=X({offset:0,categoryGapRatio:D,barGapRatio:V,triggerTooltip:v},f,{data:_,scale:Kg(f.data,d).paddingInner(D).paddingOuter(D/2),tickNumber:f.data.length,colorScale:f.colorMap&&(f.colorMap.type==="ordinal"?_c(X({values:f.data},f.colorMap)):Tl(f.colorMap))}),ug(f.data)){const B=cg(f,d);s[f.id].valueFormatter=f.valueFormatter??B}}if(Z2(f)&&(s[f.id]=X({offset:0,triggerTooltip:v},f,{data:_,scale:P4(f.data,d),tickNumber:f.data.length,colorScale:f.colorMap&&(f.colorMap.type==="ordinal"?_c(X({values:f.data},f.colorMap)):Tl(f.colorMap))}),ug(f.data))){const D=cg(f,d);s[f.id].valueFormatter=f.valueFormatter??D}if(f.scaleType==="band"||f.scaleType==="point")return;const w=f.scaleType??"linear",b=f.domainLimit??"nice",C=[f.min??g,f.max??m];if(typeof b=="function"){const{min:D,max:V}=b(g,m);C[0]=D,C[1]=V}const I=eR(X({},f,{range:d,domain:C})),R=nR(I,d),M=lg(w,C,d),N=b==="nice"?M.nice(I):M,[k,O]=N.domain(),S=[f.min??k,f.max??O];s[f.id]=X({offset:0,triggerTooltip:v},f,{data:_,scaleType:w,scale:N.domain(S),tickNumber:R,colorScale:f.colorMap&&Tl(f.colorMap)})}),{axis:s,axisIds:e.map(({id:l})=>l)}}const PR=n=>n.polarAxis,kR=St([PR],n=>n==null?void 0:n.rotation),UG=St([PR],n=>n==null?void 0:n.radius),zl=St([kR,gs,Vi,ps],(n,t,e,r)=>NR({drawingArea:t,formattedSeries:e,axis:n,seriesConfig:r,axisDirection:"rotation"})),zG=St([UG,gs,Vi,ps],(n,t,e,r)=>NR({drawingArea:t,formattedSeries:e,axis:n,seriesConfig:r,axisDirection:"radius"})),HG=St([gs],n=>({cx:n.left+n.width/2,cy:n.top+n.height/2})),GG=n=>(t,e)=>Math.atan2(t-n.cx,n.cy-e);function sp(n){return(n%360+360)%360}const Zv=2*Math.PI;function $G(n){return(n%Zv+Zv)%Zv}function $T(n,t){const{scale:e,data:r,reverse:i}=n;if(!Fi(e))throw new Error("MUI X Charts: getAxisValue is not implemented for polare continuous axes.");if(!r)return-1;const a=$G(t-Math.min(...e.range())),s=e.bandwidth()===0?Math.floor((a+e.step()/2)/e.step())%r.length:Math.floor(a/e.step());return s<0||s>=r.length?-1:i?r.length-1-s:s}function vs(){const n=Ve(),{axis:t,axisIds:e}=Ut(n,Jr);return{xAxis:t,xAxisIds:e}}function Do(){const n=Ve(),{axis:t,axisIds:e}=Ut(n,ti);return{yAxis:t,yAxisIds:e}}function qG(n){const t=Ve(),{axis:e,axisIds:r}=Ut(t,Jr),i=r[0];return e[i]}function XG(n){const t=Ve(),{axis:e,axisIds:r}=Ut(t,ti),i=r[0];return e[i]}function LR(){const n=Ve(),{axis:t,axisIds:e}=Ut(n,zl);return{rotationAxis:t,rotationAxisIds:e}}function WG(){const n=Ve(),{axis:t,axisIds:e}=Ut(n,zG);return{radiusAxis:t,radiusAxisIds:e}}function YG(n){const t=Ve(),{axis:e,axisIds:r}=Ut(t,zl),i=r[0];return e[i]}function hg(n){return Fi(n)?t=>(n(t)??0)+n.bandwidth()/2:t=>n(t)}function i_(){const n=Ve(),{axis:t,axisIds:e}=Ut(n,SH)??{axis:{},axisIds:[]};return{zAxis:t,zAxisIds:e}}function a_(){const n=Ro();if(!n)throw new Error(["MUI X Charts: Could not find the svg ref context.","It looks like you rendered your component outside of a ChartContainer parent component."].join(`
`));return n.svgRef}function op(){const n=Ve();return Ut(n,Vi)}function KG(n,t){if(n===t)return!0;if(!Array.isArray(n)||!Array.isArray(t))return!1;let e=n.length;if(e!==t.length)return!1;for(;e--;)if(n[e]!==t[e])return!1;return!0}function BR(n){const t=St([Vi,(e,r)=>r],(e,r)=>{var a,s,l,c,f,d;if(!r||Array.isArray(r)&&r.length===0)return((s=(a=e[n])==null?void 0:a.seriesOrder)==null?void 0:s.map(g=>{var m;return(m=e[n])==null?void 0:m.series[g]}))??[];if(!Array.isArray(r))return(c=(l=e[n])==null?void 0:l.series)==null?void 0:c[r];const i=[];for(const g of r){const m=(d=(f=e[n])==null?void 0:f.series)==null?void 0:d[g];m&&i.push(m)}return i});return e=>{const r=Ve();return Ut(r,t,[e],KG)}}function VR(n){const t=St([Vi],e=>e[n]);return()=>{const e=Ve();return Ut(e,t)}}BR("pie");const ZG=VR("pie");function QG(){return ZG()}BR("bar");const JG=VR("bar");function t$(){return JG()}function e$(){return!1}function FR(n,t){return!n||!t?e$:function(r){return r?n.highlight==="series"?r.seriesId===t.seriesId:n.highlight==="item"?r.dataIndex===t.dataIndex&&r.seriesId===t.seriesId:!1:!1}}function n$(){return!1}function jR(n,t){return!n||!t?n$:function(r){return r?n.fade==="series"?r.seriesId===t.seriesId&&r.dataIndex!==t.dataIndex:n.fade==="global"?r.seriesId!==t.seriesId||r.dataIndex!==t.dataIndex:!1:!1}}const r$=n=>n.highlight,i$=n=>n.series,a$=St([i$],n=>{const t=new Map;return Object.keys(n.processedSeries).forEach(e=>{var i;const r=n.processedSeries[e];(i=r==null?void 0:r.seriesOrder)==null||i.forEach(a=>{const s=r==null?void 0:r.series[a];t.set(a,s==null?void 0:s.highlightScope)})}),t}),md=St([r$],function(t){return t.item}),lp=St([a$,md],function(t,e){if(!e)return null;const r=t.get(e.seriesId);return r===void 0?null:r}),s$=St([lp,md],FR),o$=St([lp,md],jR),l$=St([lp,md,(n,t)=>t],function(t,e,r){return FR(t,e)(r)}),u$=St([lp,md,(n,t)=>t],function(t,e,r){return jR(t,e)(r)});function UR(n){const t=Ve(),e=Ut(t,l$,[n]),r=Ut(t,u$,[n]);return{isHighlighted:e,isFaded:!e&&r}}function c$(){const n=Ve(),t=Ut(n,s$),e=Ut(n,o$);return{isHighlighted:t,isFaded:e}}function f$(n,t){return Object.keys(n).flatMap(e=>{const r=t[e].legendGetter;return r===void 0?[]:r(n[e])})}function h$(){const n=op(),t=Ve(),e=Ut(t,ps);return{items:f$(n,e)}}function d$(){const n=n_();return H.useCallback(t=>`${n}-gradient-${t}`,[n])}function g$(){const n=n_();return H.useCallback(t=>`${n}-gradient-${t}-object-bound`,[n])}var Qv,qT;function p$(){if(qT)return Qv;qT=1;var n=4,t=.001,e=1e-7,r=10,i=11,a=1/(i-1),s=typeof Float32Array=="function";function l(w,b){return 1-3*b+3*w}function c(w,b){return 3*b-6*w}function f(w){return 3*w}function d(w,b,C){return((l(b,C)*w+c(b,C))*w+f(b))*w}function g(w,b,C){return 3*l(b,C)*w*w+2*c(b,C)*w+f(b)}function m(w,b,C,I,R){var M,N,k=0;do N=b+(C-b)/2,M=d(N,I,R)-w,M>0?C=N:b=N;while(Math.abs(M)>e&&++k<r);return N}function v(w,b,C,I){for(var R=0;R<n;++R){var M=g(b,C,I);if(M===0)return b;var N=d(b,C,I)-w;b-=N/M}return b}function _(w){return w}return Qv=function(b,C,I,R){if(!(0<=b&&b<=1&&0<=I&&I<=1))throw new Error("bezier x values must be in [0, 1] range");if(b===C&&I===R)return _;for(var M=s?new Float32Array(i):new Array(i),N=0;N<i;++N)M[N]=d(N*a,b,I);function k(O){for(var S=0,D=1,V=i-1;D!==V&&M[D]<=O;++D)S+=a;--D;var B=(O-M[D])/(M[D+1]-M[D]),F=S+B*a,j=g(F,b,I);return j>=t?v(O,F,b,I):j===0?F:m(O,S,S+a,b,I)}return function(S){return S===0?0:S===1?1:d(k(S),C,R)}},Qv}var m$=p$();const v$=_D(m$),s_=300,zR="cubic-bezier(0.66, 0, 0.34, 1)",y$=v$(.66,0,.34,1);var bc=0,ph=0,nh=0,HR=1e3,dg,mh,gg=0,Nl=0,up=0,zh=typeof performance=="object"&&performance.now?performance:Date,GR=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(n){setTimeout(n,17)};function o_(){return Nl||(GR(x$),Nl=zh.now()+up)}function x$(){Nl=0}function pg(){this._call=this._time=this._next=null}pg.prototype=$R.prototype={constructor:pg,restart:function(n,t,e){if(typeof n!="function")throw new TypeError("callback is not a function");e=(e==null?o_():+e)+(t==null?0:+t),!this._next&&mh!==this&&(mh?mh._next=this:dg=this,mh=this),this._call=n,this._time=e,ox()},stop:function(){this._call&&(this._call=null,this._time=1/0,ox())}};function $R(n,t,e){var r=new pg;return r.restart(n,t,e),r}function sx(){o_(),++bc;for(var n=dg,t;n;)(t=Nl-n._time)>=0&&n._call.call(void 0,t),n=n._next;--bc}function XT(){Nl=(gg=zh.now())+up,bc=ph=0;try{sx()}finally{bc=0,A$(),Nl=0}}function _$(){var n=zh.now(),t=n-gg;t>HR&&(up-=t,gg=n)}function A$(){for(var n,t=dg,e,r=1/0;t;)t._call?(r>t._time&&(r=t._time),n=t,t=t._next):(e=t._next,t._next=null,t=n?n._next=e:dg=e);mh=n,ox(r)}function ox(n){if(!bc){ph&&(ph=clearTimeout(ph));var t=n-Nl;t>24?(n<1/0&&(ph=setTimeout(XT,n-zh.now()-up)),nh&&(nh=clearInterval(nh))):(nh||(gg=zh.now(),nh=setInterval(_$,HR)),bc=1,GR(XT))}}function E$(n,t,e){var r=new pg;return t=t==null?0:+t,r.restart(i=>{r.stop(),n(i+t)},t,e),r}class w${constructor(t,e,r){this.duration=void 0,this.elapsed=0,this.easingFn=void 0,this.timer=null,this.onTickCallback=void 0,this.duration=t,this.easingFn=e,this.onTickCallback=r,this.resume()}get running(){return this.timer!==null}timerCallback(t){this.elapsed=Math.min(t,this.duration);const e=this.duration===0?1:this.elapsed/this.duration,r=this.easingFn(e);this.onTickCallback(r),this.elapsed>=this.duration&&this.stop()}resume(){if(this.running||this.elapsed>=this.duration)return this;const t=o_()-this.elapsed;return this.timer=$R(e=>this.timerCallback(e),0,t),sx(),this}stop(){return this.running?(this.timer&&(this.timer.stop(),this.timer=null),this):this}finish(){return this.stop(),E$(()=>this.timerCallback(this.duration)),sx(),this}}function b$(n,t){if(Object.is(n,t))return!0;if(typeof n!="object"||n===null||typeof t!="object"||t===null)return!1;const e=Object.keys(n),r=Object.keys(t);if(e.length!==r.length)return!1;for(let i=0;i<e.length;i+=1){const a=e[i];if(!Object.prototype.hasOwnProperty.call(t,a)||!Object.is(n[a],t[a]))return!1}return!0}function S$(n,{createInterpolator:t,applyProps:e,skip:r,initialProps:i=n}){const a=H.useRef(i),s=H.useRef(null),l=H.useRef(null),c=H.useRef(n);ki(()=>{c.current=n},[n]),ki(()=>{var g;r&&((g=s.current)==null||g.finish(),s.current=null,l.current=null,a.current=n)},[n,r]);const f=H.useCallback(g=>{const m=a.current,v=t(m,n);s.current=new w$(s_,y$,_=>{const w=v(_);a.current=w,e(g,w)})},[e,t,n]);return H.useCallback(g=>{var v,_,w,b;if(g===null){(v=s.current)==null||v.stop();return}const m=l.current;if(m===g){if(b$(c.current,n)){(_=s.current)==null||_.resume();return}(w=s.current)==null||w.stop()}m&&((b=s.current)==null||b.stop()),l.current=g,(s.current||!r)&&f(g)},[f,n,r])}function vd(n,{createInterpolator:t,transformProps:e,applyProps:r,skip:i,initialProps:a=n,ref:s}){const l=e??(d=>d),c=S$(n,{initialProps:a,createInterpolator:t,applyProps:(d,g)=>r(d,l(g)),skip:i});return X({},e(i?n:a),{ref:pC(c,s)})}function T$(n,t){const e=xe(n.x,t.x),r=xe(n.y,t.y),i=xe(n.width,t.width),a=xe(n.height,t.height);return s=>({x:e(s),y:r(s),width:i(s),height:a(s)})}function C$(n){const t={x:n.layout==="vertical"?n.x:n.xOrigin,y:n.layout==="vertical"?n.yOrigin:n.y,width:n.layout==="vertical"?n.width:0,height:n.layout==="vertical"?0:n.height};return vd({x:n.x,y:n.y,width:n.width,height:n.height},{createInterpolator:T$,applyProps(e,r){e.setAttribute("x",r.x.toString()),e.setAttribute("y",r.y.toString()),e.setAttribute("width",r.width.toString()),e.setAttribute("height",r.height.toString())},transformProps:e=>e,initialProps:t,skip:n.skipAnimation,ref:n.ref})}function I$(n,t){const e=xe(n.x,t.x),r=xe(n.y,t.y),i=xe(n.width,t.width),a=xe(n.height,t.height);return s=>({x:e(s),y:r(s),width:i(s),height:a(s)})}function R$(n){const t={x:n.layout==="vertical"?n.x+n.width/2:n.xOrigin,y:n.layout==="vertical"?n.yOrigin:n.y+n.height/2,width:n.width,height:n.height},e={x:n.x+n.width/2,y:n.y+n.height/2,width:n.width,height:n.height};return vd(e,{createInterpolator:I$,transformProps:r=>r,applyProps(r,i){r.setAttribute("x",i.x.toString()),r.setAttribute("y",i.y.toString()),r.setAttribute("width",i.width.toString()),r.setAttribute("height",i.height.toString())},initialProps:t,skip:n.skipAnimation,ref:n.ref})}function D$(n,t){const e=xe(n.startAngle,t.startAngle),r=xe(n.endAngle,t.endAngle),i=xe(n.innerRadius,t.innerRadius),a=xe(n.outerRadius,t.outerRadius),s=xe(n.paddingAngle,t.paddingAngle),l=xe(n.cornerRadius,t.cornerRadius);return c=>({startAngle:e(c),endAngle:r(c),innerRadius:i(c),outerRadius:a(c),paddingAngle:s(c),cornerRadius:l(c)})}function O$(n){const t={startAngle:(n.startAngle+n.endAngle)/2,endAngle:(n.startAngle+n.endAngle)/2,innerRadius:n.innerRadius,outerRadius:n.outerRadius,paddingAngle:n.paddingAngle,cornerRadius:n.cornerRadius};return vd({startAngle:n.startAngle,endAngle:n.endAngle,innerRadius:n.innerRadius,outerRadius:n.outerRadius,paddingAngle:n.paddingAngle,cornerRadius:n.cornerRadius},{createInterpolator:D$,transformProps:e=>({d:SR().cornerRadius(e.cornerRadius)({padAngle:e.paddingAngle,innerRadius:e.innerRadius,outerRadius:e.outerRadius,startAngle:e.startAngle,endAngle:e.endAngle}),visibility:e.startAngle===e.endAngle?"hidden":"visible"}),applyProps(e,r){e.setAttribute("d",r.d),e.setAttribute("visibility",r.visibility)},initialProps:t,skip:n.skipAnimation,ref:n.ref})}function M$(n,t){const e=xe(n.startAngle,t.startAngle),r=xe(n.endAngle,t.endAngle),i=xe(n.innerRadius,t.innerRadius),a=xe(n.outerRadius,t.outerRadius),s=xe(n.paddingAngle,t.paddingAngle),l=xe(n.cornerRadius,t.cornerRadius);return c=>({startAngle:e(c),endAngle:r(c),innerRadius:i(c),outerRadius:a(c),paddingAngle:s(c),cornerRadius:l(c)})}function N$(n){const t={startAngle:(n.startAngle+n.endAngle)/2,endAngle:(n.startAngle+n.endAngle)/2,innerRadius:n.arcLabelRadius??n.innerRadius,outerRadius:n.arcLabelRadius??n.outerRadius,paddingAngle:n.paddingAngle,cornerRadius:n.cornerRadius};return vd({startAngle:n.startAngle,endAngle:n.endAngle,innerRadius:(n==null?void 0:n.arcLabelRadius)??n.innerRadius,outerRadius:(n==null?void 0:n.arcLabelRadius)??n.outerRadius,paddingAngle:n.paddingAngle,cornerRadius:n.cornerRadius},{createInterpolator:M$,transformProps:e=>{const[r,i]=SR().cornerRadius(e.cornerRadius).centroid({padAngle:e.paddingAngle,startAngle:e.startAngle,endAngle:e.endAngle,innerRadius:e.innerRadius,outerRadius:e.outerRadius});return{x:r,y:i}},applyProps(e,{x:r,y:i}){e.setAttribute("x",r.toString()),e.setAttribute("y",i.toString())},initialProps:t,skip:n.skipAnimation,ref:n.ref})}function P$(){return Ro().chartRootRef}const k$={"image/png":"PNG","image/jpeg":"JPEG","image/webp":"WebP"},L$=n=>({components:{MuiChartsLocalizationProvider:{defaultProps:{localeText:X({},n)}}}}),qR={loading:"Loading data…",noData:"No data to display",zoomIn:"Zoom in",zoomOut:"Zoom out",toolbarExport:"Export",toolbarExportPrint:"Print",toolbarExportImage:n=>`Export as ${k$[n]??n}`},B$=qR;L$(qR);const V$=["localeText"],lx=H.createContext(null);function F$(n){const{localeText:t}=n,e=_e(n,V$),{localeText:r}=H.useContext(lx)??{localeText:void 0},i=Ai({props:e,name:"MuiChartsLocalizationProvider"}),{children:a,localeText:s}=i,l=H.useMemo(()=>X({},B$,s,r,t),[s,r,t]),c=H.useMemo(()=>({localeText:l}),[l]);return A.jsx(lx.Provider,{value:c,children:a})}const XR=()=>{const n=H.useContext(lx);if(n===null)throw new Error(["MUI X Charts: Can not find the charts localization context.","It looks like you forgot to wrap your component in ChartsLocalizationProvider.","This can also happen if you are bundling multiple versions of the `@mui/x-charts` package"].join(`
`));return n};function j$(n){const{id:t,offset:e}=n,{left:r,top:i,width:a,height:s}=Ei(),l=X({top:0,right:0,bottom:0,left:0},e);return A.jsx("clipPath",{id:t,children:A.jsx("rect",{x:r-l.left,y:i-l.top,width:a+l.left+l.right,height:s+l.top+l.bottom})})}function U$(){return typeof window>"u"}const u1=new Map,z$=2e3,H$={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},G$=["minWidth","maxWidth","width","minHeight","maxHeight","height","top","left","fontSize","padding","margin","paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom"],WT="mui_measurement_span";function WR(n,t){return G$.indexOf(n)>=0&&t===+t?`${t}px`:t}function YR(n){return n.split("").reduce((r,i)=>i===i.toUpperCase()?[...r,"-",i.toLowerCase()]:[...r,i],[]).join("")}const $$=n=>Object.keys(n).sort().reduce((t,e)=>`${t}${YR(e)}:${WR(e,n[e])};`,"");let Jv;const yd=(n,t={})=>{if(n==null||U$())return{width:0,height:0};const e=`${n}`,r=$$(t),i=`${e}-${r}`,a=u1.get(i);if(a)return a;try{let s=document.getElementById(WT);s===null&&(s=document.createElement("span"),s.setAttribute("id",WT),s.setAttribute("aria-hidden","true"),document.body.appendChild(s));const l=X({},H$,t);Object.keys(l).map(d=>(s.style[YR(d)]=WR(d,l[d]),d)),s.textContent=e;const c=s.getBoundingClientRect(),f={width:c.width,height:c.height};return u1.set(i,f),u1.size+1>z$&&u1.clear(),Jv&&clearTimeout(Jv),Jv=setTimeout(()=>{s.textContent=""},0),f}catch{return{width:0,height:0}}};function KR({style:n,needsComputation:t,text:e}){return e.split(`
`).map(r=>X({text:r},t?yd(r,n):{width:0,height:0}))}function l_(){const[n,t]=H.useState(typeof window<"u"||!1);return H.useEffect(()=>{t(!0)},[]),n}const q$=["x","y","style","text","ownerState"],X$=["angle","textAnchor","dominantBaseline"];function mg(n){const{x:t,y:e,style:r,text:i}=n,a=_e(n,q$),s=r??{},{angle:l,textAnchor:c,dominantBaseline:f}=s,d=_e(s,X$),g=l_(),m=H.useMemo(()=>KR({style:d,needsComputation:g&&i.includes(`
`),text:i}),[d,i,g]);let v;switch(f){case"hanging":case"text-before-edge":v=0;break;case"central":v=(m.length-1)/2*-m[0].height;break;default:v=(m.length-1)*-m[0].height;break}return A.jsx("text",X({},a,{transform:l?`rotate(${l}, ${t}, ${e})`:void 0,x:t,y:e,textAnchor:c,dominantBaseline:f,style:d,children:m.map((_,w)=>A.jsx("tspan",{x:t,dy:`${w===0?v:m[0].height}px`,dominantBaseline:f,children:_.text},w))}))}function u_(n){return typeof n=="number"&&!Number.isFinite(n)}const ty={start:0,extremities:0,end:1,middle:.5};function W$(n){const{scale:t,tickNumber:e,valueFormatter:r,tickInterval:i,tickPlacement:a="extremities",tickLabelPlacement:s,isInside:l}=n;if(Fi(t)){const m=t.domain(),v=s??"middle";return t.bandwidth()>0?[...(typeof i=="function"&&m.filter(i)||typeof i=="object"&&i||m).map(b=>{const C=`${b}`;return{value:b,formattedValue:(r==null?void 0:r(b,{location:"tick",scale:t,tickNumber:e,defaultTickLabel:C}))??C,offset:t(b)-(t.step()-t.bandwidth())/2+ty[a]*t.step(),labelOffset:v==="tick"?0:t.step()*(ty[v]-ty[a])}}),...a==="extremities"?[{formattedValue:void 0,offset:t.range()[1],labelOffset:0}]:[]]:(typeof i=="function"&&m.filter(i)||typeof i=="object"&&i||m).map(w=>{const b=`${w}`;return{value:w,formattedValue:(r==null?void 0:r(w,{location:"tick",scale:t,tickNumber:e,defaultTickLabel:b}))??b,offset:t(w),labelOffset:0}})}if(t.domain().some(u_))return[];const f=s,d=typeof i=="object"?i:t.ticks(e),g=[];for(let m=0;m<d.length;m+=1){const v=d[m],_=t(v);if(l(_)){const w=t.tickFormat(e)(v);g.push({value:v,formattedValue:(r==null?void 0:r(v,{location:"tick",scale:t,tickNumber:e,defaultTickLabel:w}))??w,offset:_,labelOffset:f==="middle"?t(d[m-1]??0)-(_+t(d[m-1]??0))/2:0})}}return g}function cp(n){const{scale:t,tickNumber:e,valueFormatter:r,tickInterval:i,tickPlacement:a="extremities",tickLabelPlacement:s,direction:l}=n,{instance:c}=Ro(),f=l==="x"?c.isXInside:c.isYInside;return H.useMemo(()=>W$({scale:t,tickNumber:e,tickPlacement:a,tickInterval:i,tickLabelPlacement:s,valueFormatter:r,isInside:f}),[t,e,a,i,s,r,f])}function Y$(n=!1){const[t,e]=H.useState(!1);return ki(()=>{n||e(!0)},[n]),H.useEffect(()=>{n&&e(!0)},[n]),t}const ZR=typeof window<"u"&&"Intl"in window&&"Segmenter"in Intl?new Intl.Segmenter(void 0,{granularity:"grapheme"}):null;function K$(n){return n.length}function Z$(n){const t=ZR.segment(n);let e=0;for(const r of t)e+=1;return e}const Q$=ZR?Z$:K$;function J$(n){return n*(Math.PI/180)}const QR=typeof window<"u"&&"Intl"in window&&"Segmenter"in Intl?new Intl.Segmenter(void 0,{granularity:"grapheme"}):null;function tq(n,t){return n.slice(0,t)}function eq(n,t){const e=QR.segment(n);let r="",i=0;for(const a of e)if(r+=a.segment,i+=1,i>=t)break;return r}const nq=QR?eq:tq,YT="…";function JR(n,t){const{width:e,height:r,measureText:i}=t,a=J$(t.angle),s=i(n),l=Math.abs(s.width*Math.cos(a))+Math.abs(s.height*Math.sin(a)),c=Math.abs(s.width*Math.sin(a))+Math.abs(s.height*Math.cos(a));return l<=e&&c<=r}function t6(n,t){if(t(n))return n;let e=n,r=1,i=1/2;const a=Q$(n);let s=a,l=a,c=null;do{if(l=s,s=Math.floor(a*i),s===0)break;e=nq(n,s).trim();const f=t(e+YT);r+=1,f?(c=e,i+=1/2**r):i-=1/2**r}while(Math.abs(s-l)!==1);return c?c+YT:""}function rq(n,t,e,r,i){const a=new Map,s=sp((i==null?void 0:i.angle)??0);let l=1,c=1;(i==null?void 0:i.textAnchor)==="start"?(l=1/0,c=1):(i==null?void 0:i.textAnchor)==="end"?(l=1,c=1/0):(l=2,c=2),s>90&&s<270&&([l,c]=[c,l]),r&&([l,c]=[c,l]);for(const f of n)if(f.formattedValue){const d=Math.min((f.offset+f.labelOffset)*l,(t.left+t.width+t.right-f.offset-f.labelOffset)*c),g=m=>JR(m,{width:d,height:e,angle:s,measureText:v=>yd(v,i)});a.set(f,t6(f.formattedValue.toString(),g))}return a}const KT=5;function iq(n,t,e=0){const r=Math.min(Math.abs(e)%180,Math.abs(Math.abs(e)%180-180)%180);if(r<KT)return n;if(r>90-KT)return t;const i=tc(r),a=Math.atan2(t,n);return i<a?n/Math.cos(i):t/Math.sin(i)}function aq(n,{tickLabelStyle:t,tickLabelInterval:e,tickLabelMinGap:r,reverse:i,isMounted:a,isXInside:s}){const l=d=>{if(!a||d.formattedValue===void 0)return{width:0,height:0};const g=KR({style:t,needsComputation:!0,text:d.formattedValue});return{width:Math.max(...g.map(m=>m.width)),height:Math.max(g.length*g[0].height)}};if(typeof e=="function")return new Set(n.filter((d,g)=>e(d.value,g)));let c=0;const f=i?-1:1;return new Set(n.filter((d,g)=>{const{offset:m,labelOffset:v}=d,_=m+v;if(g>0&&f*_<f*(c+r)||!s(_))return!1;const{width:w,height:b}=l(d),C=iq(w,b,t==null?void 0:t.angle),I=_-f*C/2;return g>0&&f*I<f*(c+r)?!1:(c=_+f*C/2,!0)}))}function e6(n){return Zr("MuiChartsAxis",n)}const c1=Qr("MuiChartsAxis",["root","line","tickContainer","tick","tickLabel","label","directionX","directionY","top","bottom","left","right","id"]),n6=un("g",{name:"MuiChartsAxis",slot:"Root"})(({theme:n})=>({[`& .${c1.tickLabel}`]:X({},n.typography.caption,{fill:(n.vars||n).palette.text.primary}),[`& .${c1.label}`]:{fill:(n.vars||n).palette.text.primary},[`& .${c1.line}`]:{stroke:(n.vars||n).palette.text.primary,shapeRendering:"crispEdges",strokeWidth:1},[`& .${c1.tick}`]:{stroke:(n.vars||n).palette.text.primary,shapeRendering:"crispEdges"}})),sq=n=>{const{classes:t,position:e,id:r}=n,i={root:["root","directionX",e,`id-${r}`],line:["line"],tickContainer:["tickContainer"],tick:["tick"],tickLabel:["tickLabel"],label:["label"]};return kr(i,e6,t)},ux=3,oq=4,r6=un(n6,{name:"MuiChartsXAxis",slot:"Root"})({}),lq={disableLine:!1,disableTicks:!1,tickSize:6,tickLabelMinGap:4};function i6(n){const t=sp(n);return t<=30||t>=330||t<=210&&t>=150?"middle":t<=180?"end":"start"}function a6(n){const t=sp(n);return t<=30||t>=330?"hanging":t<=210&&t>=150?"auto":"central"}function s6(n){switch(n){case"start":return"end";case"end":return"start";default:return n}}const uq=["scale","tickNumber","reverse"],o6=n=>{const{xAxis:t,xAxisIds:e}=vs(),r=t[n.axisId??e[0]],{scale:i,tickNumber:a,reverse:s}=r,l=_e(r,uq),c=Ai({props:X({},l,n),name:"MuiChartsXAxis"}),f=X({},lq,c),{position:d,tickLabelStyle:g,labelStyle:m,slots:v,slotProps:_}=f,w=Hh(),b=mC(),C=sq(f),I=d==="bottom"?1:-1,R=(v==null?void 0:v.axisLine)??"line",M=(v==null?void 0:v.axisTick)??"line",N=(v==null?void 0:v.axisTickLabel)??mg,k=(v==null?void 0:v.axisLabel)??mg,O=i6((d==="bottom"?0:180)-((g==null?void 0:g.angle)??0)),S=a6((d==="bottom"?0:180)-((g==null?void 0:g.angle)??0)),D=lo({elementType:N,externalSlotProps:_==null?void 0:_.axisTickLabel,additionalProps:{style:X({},w.typography.caption,{fontSize:12,lineHeight:1.25,textAnchor:b?s6(O):O,dominantBaseline:S},g)},className:C.tickLabel,ownerState:{}}),V=lo({elementType:k,externalSlotProps:_==null?void 0:_.axisLabel,additionalProps:{style:X({},w.typography.body1,{lineHeight:1,fontSize:14,textAnchor:"middle",dominantBaseline:d==="bottom"?"text-after-edge":"text-before-edge"},m)},ownerState:{}}),B=i.domain(),F=Fi(i),j=F&&B.length===0||!F&&B.some(u_)||d==="none";return{xScale:i,defaultizedProps:f,tickNumber:a,positionSign:I,skipAxisRendering:j,classes:C,Line:R,Tick:M,TickLabel:N,Label:k,axisTickLabelProps:D,axisLabelProps:V,reverse:s,isRtl:b}};function cq(n){const{xScale:t,defaultizedProps:e,tickNumber:r,positionSign:i,skipAxisRendering:a,classes:s,Line:l,Tick:c,TickLabel:f,Label:d,axisTickLabelProps:g,axisLabelProps:m,reverse:v,isRtl:_}=o6(n),w=Y$(),{position:b,disableLine:C,disableTicks:I,label:R,tickSize:M,valueFormatter:N,slotProps:k,tickInterval:O,tickLabelInterval:S,tickPlacement:D,tickLabelPlacement:V,tickLabelMinGap:B,sx:F,offset:j,height:rt}=e,mt=Ei(),{left:q,top:Z,width:it,height:gt}=mt,{instance:_t}=Ro(),Mt=l_(),It=I?4:M,Et=cp({scale:t,tickNumber:r,valueFormatter:N,tickInterval:O,tickPlacement:D,tickLabelPlacement:V,direction:"x"}),zt=aq(Et,{tickLabelStyle:g.style,tickLabelInterval:S,tickLabelMinGap:B,reverse:v,isMounted:w,isXInside:_t.isXInside});if(a)return null;const $t=R?yd(R,m.style).height:0,pe={x:q+it/2,y:i*rt},Re=Math.max(0,rt-(R?$t+oq:0)-It-ux),Ke=Mt?rq(zt,mt,Re,_,g.style):new Map(Array.from(zt).map(ft=>[ft,ft.formattedValue]));return A.jsxs(r6,{transform:`translate(0, ${b==="bottom"?Z+gt+j:Z-j})`,className:s.root,sx:F,children:[!C&&A.jsx(l,X({x1:q,x2:q+it,className:s.line},k==null?void 0:k.axisLine)),Et.map((ft,wt)=>{const{offset:Rt,labelOffset:pt}=ft,Ae=pt??0,Nt=i*(It+ux),ke=_t.isXInside(Rt),Ze=Ke.get(ft),$e=zt.has(ft);return A.jsxs("g",{transform:`translate(${Rt}, 0)`,className:s.tickContainer,children:[!I&&ke&&A.jsx(c,X({y2:i*It,className:s.tick},k==null?void 0:k.axisTick)),Ze!==void 0&&$e&&A.jsx(f,X({x:Ae,y:Nt},g,{text:Ze}))]},wt)}),R&&A.jsx("g",{className:s.label,children:A.jsx(d,X({},pe,m,{text:R}))})]})}const rh={start:0,extremities:0,end:1,middle:.5,tick:0};function fq(n){const{scale:t,tickInterval:e,tickLabelPlacement:r="middle",tickPlacement:i="extremities",groups:a}=n;return H.useMemo(()=>{const s=t.domain(),l=typeof e=="function"&&s.filter(e)||typeof e=="object"&&e||s;if(t.bandwidth()>0){const c=ZT(l,a,i,r,t);return c[0]&&(c[0].ignoreTick=!0),[{formattedValue:void 0,offset:t.range()[0],labelOffset:0,groupIndex:a.length-1},...c,{formattedValue:void 0,offset:t.range()[1],labelOffset:0,groupIndex:a.length-1}]}return ZT(l,a,i,r,t)},[t,e,a,i,r])}function ZT(n,t,e,r,i){const a=[],s=new Map;let l=0;for(let c=0;c<t.length;c+=1)for(let f=0;f<n.length;f+=1){const d=n[f],g=t[c].getValue(d,f),m=a[a.length-1];if((m==null?void 0:m.value)!==g||(m==null?void 0:m.groupIndex)!==c){l=1;const _=Fi(i)?i(d)-(i.step()-i.bandwidth())/2+rh[e]*i.step():i(d),w=i.step()*l*(rh[r]-rh[e]);a.push({value:g,formattedValue:`${g}`,offset:_,groupIndex:c,dataIndex:f,ignoreTick:!1,labelOffset:w}),s.has(f)||s.set(f,new Set);const b=s.get(f);for(const C of b.values())a[C].ignoreTick=!0;b.add(a.length-1)}else{l+=1;const _=i.step()*l*(rh[r]-rh[e]);m.labelOffset=_}}return a}const QT={tickSize:6},hq=(n,t,e)=>{const r=n[t]??{},i=e??QT.tickSize,a=i*t*2+i;return X({},QT,r,{tickSize:r.tickSize??a})};function dq(n){const{xScale:t,defaultizedProps:e,positionSign:r,skipAxisRendering:i,classes:a,Line:s,Tick:l,TickLabel:c,Label:f,axisTickLabelProps:d,axisLabelProps:g}=o6(n);if(!Fi(t))throw new Error("MUI X Charts: ChartsGroupedXAxis only supports the `band` and `point` scale types.");const{position:m,disableLine:v,disableTicks:_,label:w,tickSize:b,valueFormatter:C,slotProps:I,tickInterval:R,tickPlacement:M,tickLabelPlacement:N,sx:k,offset:O,height:S}=e,D=e.groups,V=Ei(),{left:B,top:F,width:j,height:rt}=V,{instance:mt}=Ro(),q={x:B+j/2,y:r*S},Z=fq({scale:t,tickInterval:R,tickPlacement:M,tickLabelPlacement:N,groups:D});return i?null:A.jsxs(r6,{transform:`translate(0, ${m==="bottom"?F+rt+O:F-O})`,className:a.root,sx:k,children:[!v&&A.jsx(s,X({x1:B,x2:B+j,className:a.line},I==null?void 0:I.axisLine)),Z.map((it,gt)=>{const{offset:_t,labelOffset:Mt}=it,It=Mt??0,Et=mt.isXInside(_t),zt=it.formattedValue,$t=it.ignoreTick??!1,pe=it.groupIndex??0,Re=hq(D,pe,b),Ke=r*Re.tickSize,ft=r*(Re.tickSize+ux);return A.jsxs("g",{transform:`translate(${_t}, 0)`,className:a.tickContainer,"data-group-index":pe,children:[!_&&!$t&&Et&&A.jsx(l,X({y2:Ke,className:a.tick},I==null?void 0:I.axisTick)),zt!==void 0&&A.jsx(c,X({x:It,y:ft},d,{text:zt}))]},gt)}),w&&A.jsx("g",{className:a.label,children:A.jsx(f,X({},q,g,{text:w}))})]})}function gq(n){const{xAxis:t,xAxisIds:e}=vs(),r=t[n.axisId??e[0]];return"groups"in r&&Array.isArray(r.groups)?A.jsx(dq,X({},n)):A.jsx(cq,X({},n))}function pq(n,t,e,r,i){const a=new Map,s=sp((i==null?void 0:i.angle)??0);let l=1,c=1;(i==null?void 0:i.textAnchor)==="start"?(l=1/0,c=1):(i==null?void 0:i.textAnchor)==="end"?(l=1,c=1/0):(l=2,c=2),s>180&&([l,c]=[c,l]),r&&([l,c]=[c,l]);for(const f of n)if(f.formattedValue){const d=Math.min((f.offset+f.labelOffset)*l,(t.top+t.height+t.bottom-f.offset-f.labelOffset)*c),g=m=>JR(m,{width:e,height:d,angle:s,measureText:v=>yd(v,i)});a.set(f,t6(f.formattedValue.toString(),g))}return a}const mq=["scale","tickNumber"],vq=n=>{const{classes:t,position:e,id:r}=n,i={root:["root","directionY",e,`id-${r}`],line:["line"],tickContainer:["tickContainer"],tick:["tick"],tickLabel:["tickLabel"],label:["label"]};return kr(i,e6,t)},JT=2,yq=2,xq=un(n6,{name:"MuiChartsYAxis",slot:"Root"})({}),_q={disableLine:!1,disableTicks:!1,tickSize:6};function Aq(n){const{yAxisIds:t,yAxis:e}=Do(),r=e[n.axisId??t[0]],{scale:i,tickNumber:a}=r,s=_e(r,mq),l=Ai({props:X({},s,n),name:"MuiChartsYAxis"}),c=X({},_q,l),{position:f,disableLine:d,disableTicks:g,label:m,labelStyle:v,tickLabelStyle:_,tickSize:w,valueFormatter:b,slots:C,slotProps:I,tickPlacement:R,tickLabelPlacement:M,tickInterval:N,tickLabelInterval:k,sx:O,offset:S,width:D}=c,V=Hh(),B=mC(),F=l_(),j=vq(c),{instance:rt}=Ro(),mt=Ei(),{left:q,top:Z,width:it,height:gt}=mt,_t=g?4:w,Mt=cp({scale:i,tickNumber:a,valueFormatter:b,tickPlacement:R,tickLabelPlacement:M,tickInterval:N,direction:"y"}),It=f==="right"?1:-1,Et=typeof(_==null?void 0:_.fontSize)=="number"?_.fontSize:12,zt=(C==null?void 0:C.axisLine)??"line",$t=(C==null?void 0:C.axisTick)??"line",pe=(C==null?void 0:C.axisTickLabel)??mg,Re=(C==null?void 0:C.axisLabel)??mg,Ke=i6((f==="right"?-90:90)-((_==null?void 0:_.angle)??0)),ft=a6((f==="right"?-90:90)-((_==null?void 0:_.angle)??0)),wt=lo({elementType:pe,externalSlotProps:I==null?void 0:I.axisTickLabel,additionalProps:{style:X({},V.typography.caption,{fontSize:Et,textAnchor:B?s6(Ke):Ke,dominantBaseline:ft},_)},className:j.tickLabel,ownerState:{}}),Rt=lo({elementType:Re,externalSlotProps:I==null?void 0:I.axisLabel,additionalProps:{style:X({},V.typography.body1,{lineHeight:1,fontSize:14,angle:It*90,textAnchor:"middle",dominantBaseline:"text-before-edge"},v)},ownerState:{}}),pt=lo({elementType:zt,externalSlotProps:I==null?void 0:I.axisLine,additionalProps:{strokeLinecap:"square"},ownerState:{}}),Ae=i.domain(),Nt=Fi(i);if(Nt&&Ae.length===0||!Nt&&Ae.some(u_)||f==="none")return null;const ke={x:It*D,y:Z+gt/2},Ze=Math.max(0,D-(m?yd(m,Rt.style).height+yq:0)-_t-JT),$e=F?pq(Mt,mt,Ze,B,wt.style):new Map(Array.from(Mt).map(ei=>[ei,ei.formattedValue]));return A.jsxs(xq,{transform:`translate(${f==="right"?q+it+S:q-S}, 0)`,className:j.root,sx:O,children:[!d&&A.jsx(zt,X({y1:Z,y2:Z+gt,className:j.line},pt)),Mt.map((ei,ys)=>{const{offset:xa,labelOffset:_a,value:Fc}=ei,xs=It*(_t+JT),Oo=_a,Hl=typeof k=="function"&&!(k!=null&&k(Fc,ys)),qe=rt.isYInside(xa),ce=$e.get(ei);return qe?A.jsxs("g",{transform:`translate(0, ${xa})`,className:j.tickContainer,children:[!g&&A.jsx($t,X({x2:It*_t,className:j.tick},I==null?void 0:I.axisTick)),ce!==void 0&&!Hl&&A.jsx(pe,X({x:xs,y:Oo,text:ce},wt))]},ys):null}),m&&F&&A.jsx("g",{className:j.label,children:A.jsx(Re,X({},ke,Rt,{text:m}))})]})}function Eq(n){const{slots:t,slotProps:e}=n,{xAxisIds:r,xAxis:i}=vs(),{yAxisIds:a,yAxis:s}=Do();return A.jsxs(H.Fragment,{children:[r.map(l=>!i[l].position||i[l].position==="none"?null:A.jsx(gq,{slots:t,slotProps:e,axisId:l},l)),a.map(l=>!s[l].position||s[l].position==="none"?null:A.jsx(Aq,{slots:t,slotProps:e,axisId:l},l))]})}function wq(n){return Zr("MuiChartsGrid",n)}const tC=Qr("MuiChartsGrid",["root","line","horizontalLine","verticalLine"]),bq=un("g",{name:"MuiChartsGrid",slot:"Root",overridesResolver:(n,t)=>[{[`&.${tC.verticalLine}`]:t.verticalLine},{[`&.${tC.horizontalLine}`]:t.horizontalLine},t.root]})({}),l6=un("line",{name:"MuiChartsGrid",slot:"Line"})(({theme:n})=>({stroke:(n.vars||n).palette.divider,shapeRendering:"crispEdges",strokeWidth:1}));function Sq(n){const{axis:t,start:e,end:r,classes:i}=n,{scale:a,tickNumber:s,tickInterval:l}=t,c=cp({scale:a,tickNumber:s,tickInterval:l,direction:"x"});return A.jsx(H.Fragment,{children:c.map(({value:f,offset:d})=>{var g;return A.jsx(l6,{y1:e,y2:r,x1:d,x2:d,className:i.verticalLine},`vertical-${((g=f==null?void 0:f.getTime)==null?void 0:g.call(f))??f}`)})})}function Tq(n){const{axis:t,start:e,end:r,classes:i}=n,{scale:a,tickNumber:s,tickInterval:l}=t,c=cp({scale:a,tickNumber:s,tickInterval:l,direction:"y"});return A.jsx(H.Fragment,{children:c.map(({value:f,offset:d})=>{var g;return A.jsx(l6,{y1:d,y2:d,x1:e,x2:r,className:i.horizontalLine},`horizontal-${((g=f==null?void 0:f.getTime)==null?void 0:g.call(f))??f}`)})})}const Cq=["vertical","horizontal"],Iq=({classes:n})=>kr({root:["root"],verticalLine:["line","verticalLine"],horizontalLine:["line","horizontalLine"]},wq,n);function Rq(n){const t=Ai({props:n,name:"MuiChartsGrid"}),e=Ei(),{vertical:r,horizontal:i}=t,a=_e(t,Cq),{xAxis:s,xAxisIds:l}=vs(),{yAxis:c,yAxisIds:f}=Do(),d=Iq(t),g=c[f[0]],m=s[l[0]];return A.jsxs(bq,X({},a,{className:d.root,children:[r&&A.jsx(Sq,{axis:m,start:e.top,end:e.height+e.top,classes:d}),i&&A.jsx(Tq,{axis:g,start:e.left,end:e.width+e.left,classes:d})]}))}function Dq(n){return Zr("MuiChartsTooltip",n)}const qu=Qr("MuiChartsTooltip",["root","paper","table","row","cell","mark","markContainer","labelCell","valueCell","axisValueCell"]),fp=n=>kr({root:["root"],paper:["paper"],table:["table"],row:["row"],cell:["cell"],mark:["mark"],markContainer:["markContainer"],labelCell:["labelCell"],valueCell:["valueCell"],axisValueCell:["axisValueCell"]},Dq,n);function Oq(){var k,O,S;const n=Ve(),t=Ut(n,fR),e=Ut(n,ps),r=op(),{xAxis:i,xAxisIds:a}=vs(),{yAxis:s,yAxisIds:l}=Do(),{zAxis:c,zAxisIds:f}=i_(),{rotationAxis:d,rotationAxisIds:g}=LR(),{radiusAxis:m,radiusAxisIds:v}=WG(),_=r.xAxisId??a[0],w=r.yAxisId??l[0],b=r.zAxisId??f[0],C=r.rotationAxisId??g[0],I=r.radiusAxisId??v[0];if(!t)return null;const R=(k=r[t.type])==null?void 0:k.series[t.seriesId];if(!R)return null;const M=((S=(O=e[R.type]).colorProcessor)==null?void 0:S.call(O,R,_&&i[_],w&&s[w],b&&c[b]))??(()=>""),N={};return _!==void 0&&(N.x=i[_]),w!==void 0&&(N.y=s[w]),C!==void 0&&(N.rotation=d[C]),I!==void 0&&(N.radius=m[I]),e[R.type].tooltipGetter({series:R,axesConfig:N,getColor:M,identifier:t})}const cx=un("div",{name:"MuiChartsTooltip",slot:"Container",overridesResolver:(n,t)=>t.paper})(({theme:n})=>{var t;return{backgroundColor:(n.vars||n).palette.background.paper,color:(n.vars||n).palette.text.primary,borderRadius:(t=(n.vars||n).shape)==null?void 0:t.borderRadius,border:`solid ${(n.vars||n).palette.divider} 1px`}}),fx=un("table",{name:"MuiChartsTooltip",slot:"Table"})(({theme:n})=>({borderSpacing:0,[`& .${qu.markContainer}`]:{display:"inline-block",width:`calc(20px + ${n.spacing(1.5)})`,verticalAlign:"middle"},"& caption":{borderBottom:`solid ${(n.vars||n).palette.divider} 1px`,padding:n.spacing(.5,1.5),textAlign:"start",whiteSpace:"nowrap","& span":{marginRight:n.spacing(1.5)}}})),hx=un("tr",{name:"MuiChartsTooltip",slot:"Row"})(({theme:n})=>({"tr:first-of-type& td":{paddingTop:n.spacing(.5)},"tr:last-of-type& td":{paddingBottom:n.spacing(.5)}})),ec=un(st,{name:"MuiChartsTooltip",slot:"Cell"})(({theme:n})=>({verticalAlign:"middle",color:(n.vars||n).palette.text.secondary,textAlign:"start",[`&.${qu.cell}`]:{paddingLeft:n.spacing(1),paddingRight:n.spacing(1)},[`&.${qu.labelCell}`]:{fontWeight:n.typography.fontWeightRegular},[`&.${qu.valueCell}, &.${qu.axisValueCell}`]:{color:(n.vars||n).palette.text.primary,fontWeight:n.typography.fontWeightMedium},[`&.${qu.valueCell}`]:{paddingLeft:n.spacing(1.5),paddingRight:n.spacing(1.5)},"td:first-of-type&, th:first-of-type&":{paddingLeft:n.spacing(1.5)},"td:last-of-type&, th:last-of-type&":{paddingRight:n.spacing(1.5)}}));function Mq(n){return Zr("MuiChartsLabelMark",n)}const Vu=Qr("MuiChartsLabelMark",["root","line","square","circle","mask","fill"]),Nq=n=>{const{type:t}=n;return kr({root:typeof t=="function"?["root"]:["root",t],mask:["mask"],fill:["fill"]},Mq,n.classes)},u6=(n,t,e)=>H.forwardRef(function(i,a){var m;const s=Ai({props:i,name:n}),l=typeof t.defaultProps=="function"?t.defaultProps(s):t.defaultProps??{},c=vC(l,s),f=Hh(),d=(m=t.classesResolver)==null?void 0:m.call(t,c,f),g=H.forwardRef(e);return A.jsx(g,X({},c,{classes:d,ref:a}))}),Pq=["type","color","className","classes"],kq=un("div",{name:"MuiChartsLabelMark",slot:"Root"})(()=>({display:"flex",width:14,height:14,[`&.${Vu.line}`]:{width:16,height:"unset",alignItems:"center",[`.${Vu.mask}`]:{height:4,width:"100%",borderRadius:1,overflow:"hidden"}},[`&.${Vu.square}`]:{height:13,width:13,borderRadius:2,overflow:"hidden"},[`&.${Vu.circle}`]:{height:15,width:15},svg:{display:"block"},[`& .${Vu.mask} > *`]:{height:"100%",width:"100%"},[`& .${Vu.mask}`]:{height:"100%",width:"100%"}})),vg=u6("MuiChartsLabelMark",{defaultProps:{type:"square"},classesResolver:Nq},function(t,e){const{type:r,color:i,className:a,classes:s}=t,l=_e(t,Pq),c=r;return A.jsx(kq,X({className:Xa(s==null?void 0:s.root,a),ownerState:t,"aria-hidden":"true",ref:e},l,{children:A.jsx("div",{className:s==null?void 0:s.mask,children:typeof c=="function"?A.jsx(c,{className:s==null?void 0:s.fill,color:i}):A.jsx("svg",{viewBox:"0 0 24 24",preserveAspectRatio:r==="line"?"none":void 0,children:r==="circle"?A.jsx("circle",{className:s==null?void 0:s.fill,r:"12",cx:"12",cy:"12",fill:i}):A.jsx("rect",{className:s==null?void 0:s.fill,width:"24",height:"24",fill:i})})})}))});function Lq(n){const{classes:t,sx:e}=n,r=Oq(),i=fp(t);if(!r)return null;if("values"in r){const{label:f,color:d,markType:g}=r;return A.jsx(cx,{sx:e,className:i.paper,children:A.jsxs(fx,{className:i.table,children:[A.jsxs(st,{component:"caption",children:[A.jsx("div",{className:i.markContainer,children:A.jsx(vg,{type:g,color:d,className:i.mark})}),f]}),A.jsx("tbody",{children:r.values.map(({formattedValue:m,label:v})=>A.jsxs(hx,{className:i.row,children:[A.jsx(ec,{className:Xa(i.labelCell,i.cell),component:"th",children:v}),A.jsx(ec,{className:Xa(i.valueCell,i.cell),component:"td",children:m})]},v))})]})})}const{color:a,label:s,formattedValue:l,markType:c}=r;return A.jsx(cx,{sx:e,className:i.paper,children:A.jsx(fx,{className:i.table,children:A.jsx("tbody",{children:A.jsxs(hx,{className:i.row,children:[A.jsxs(ec,{className:Xa(i.labelCell,i.cell),component:"th",children:[A.jsx("div",{className:i.markContainer,children:A.jsx(vg,{type:c,color:a,className:i.mark})}),s]}),A.jsx(ec,{className:Xa(i.valueCell,i.cell),component:"td",children:l})]})})})})}function Bq(n){const t=Ve(),e=Ut(t,ps);return H.useMemo(()=>{const i={};return Object.keys(e).forEach(a=>{i[a]=e[a].colorProcessor}),i},[e])}function Vq(){const n=a_(),[t,e]=H.useState(null);return H.useEffect(()=>{const r=n.current;if(r===null)return()=>{};const i=s=>{s.pointerType!=="mouse"&&e(null)},a=s=>{e({pointerType:s.pointerType})};return r.addEventListener("pointerenter",a),r.addEventListener("pointerup",i),()=>{r.removeEventListener("pointerenter",a),r.removeEventListener("pointerup",i)}},[n]),t}function Fq(n){return n instanceof Date?n.toUTCString():n.toLocaleString()}const jq="@media (pointer: fine)",Uq=()=>hC(jq,{defaultMatches:!0}),c6=(n,t)=>t,f6=(n,t)=>t;function h6(n,t,e){return Array.isArray(e)?e.map(r=>$T(t.axis[r],n)):$T(t.axis[e],n)}const d6=St([dd,gd,HG],(n,t,e)=>n===null||t===null?null:GG(e)(n,t)),zq=St([d6,zl,c6],(n,t,e=t.axisIds[0])=>n===null?null:h6(n,t,e)),g6=St([d6,zl,f6],(n,t,e=t.axisIds)=>n===null?null:h6(n,t,e));St([zl,zq,c6],(n,t,e=n.axisIds[0])=>{var i;if(t===null||t===-1||n.axisIds.length===0)return null;const r=(i=n.axis[e])==null?void 0:i.data;return r?r[t]:null});St([zl,g6,f6],(n,t,e=n.axisIds)=>t===null?null:e.map((r,i)=>{var s;const a=t[i];return a===-1?null:(s=n.axis[r].data)==null?void 0:s[a]}));const p6=St([g6,zl],(n,t)=>n===null?[]:t.axisIds.map((e,r)=>({axisId:e,dataIndex:n[r]})).filter(({axisId:e,dataIndex:r})=>t.axis[e].triggerTooltip&&r>=0),{memoizeOptions:{resultEqualityCheck:uc}});St([],()=>[]);const Hq=St([p6],n=>n.length>0);function ey(n,t,e){var s;const r=((s=n.data)==null?void 0:s[t])??null,a=(n.valueFormatter??(l=>n.scaleType==="utc"?Fq(l):l.toLocaleString()))(r,{location:"tooltip",scale:n.scale});return{axisDirection:e,axisId:n.id,mainAxis:n,dataIndex:t,axisValue:r,axisFormattedValue:a,seriesItems:[]}}function Gq(n={}){const{multipleAxes:t,directions:e}=n,r=qG(),i=XG(),a=YG(),s=Ve(),l=Ut(s,pR),c=Ut(s,mR),f=Ut(s,p6),d=op(),{xAxis:g}=vs(),{yAxis:m}=Do(),{zAxis:v,zAxisIds:_}=i_(),{rotationAxis:w}=LR(),b=Bq();if(l.length===0&&c.length===0&&f.length===0)return null;const C=[];return(e===void 0||e.includes("x"))&&l.forEach(({axisId:I,dataIndex:R})=>{!t&&C.length>1||C.push(ey(g[I],R,"x"))}),(e===void 0||e.includes("y"))&&c.forEach(({axisId:I,dataIndex:R})=>{!t&&C.length>1||C.push(ey(m[I],R,"y"))}),(e===void 0||e.includes("rotation"))&&f.forEach(({axisId:I,dataIndex:R})=>{!t&&C.length>1||C.push(ey(w[I],R,"rotation"))}),Object.keys(d).filter(Q2).forEach(I=>{const R=d[I];return R?R.seriesOrder.forEach(M=>{var D;const N=R.series[M],k=N.xAxisId??r.id,O=N.yAxisId??i.id,S=C.findIndex(({axisDirection:V,axisId:B})=>V==="x"&&B===k||V==="y"&&B===O);if(S>=0){const V="zAxisId"in N?N.zAxisId:_[0],{dataIndex:B}=C[S],F=((D=b[I])==null?void 0:D.call(b,N,g[k],m[O],V?v[V]:void 0)(B))??"",j=N.data[B]??null,rt=N.valueFormatter(j,{dataIndex:B}),mt=Kr(N.label,"tooltip")??null;C[S].seriesItems.push({seriesId:M,color:F,value:j,formattedValue:rt,formattedLabel:mt,markType:N.labelMarkType})}}):[]}),Object.keys(d).filter(r_).forEach(I=>{const R=d[I];return R?R.seriesOrder.forEach(M=>{var S;const N=R.series[M],k=N.rotationAxisId??(a==null?void 0:a.id),O=C.findIndex(({axisDirection:D,axisId:V})=>D==="rotation"&&V===k);if(O>=0){const{dataIndex:D}=C[O],V=((S=b[I])==null?void 0:S.call(b,N)(D))??"",B=N.data[D]??null,F=N.valueFormatter(B,{dataIndex:D}),j=Kr(N.label,"tooltip")??null;C[O].seriesItems.push({seriesId:M,color:V,value:B,formattedValue:F,formattedLabel:j,markType:N.labelMarkType})}}):[]}),t?C:C.length===0?C[0]:null}function $q(n){return Gq(X({},n,{multipleAxes:!0}))}function qq(n){const t=fp(n.classes),e=$q();return e===null?null:A.jsx(cx,{sx:n.sx,className:t.paper,children:e.map(({axisId:r,mainAxis:i,axisValue:a,axisFormattedValue:s,seriesItems:l})=>A.jsxs(fx,{className:t.table,children:[a!=null&&!i.hideTooltip&&A.jsx(st,{component:"caption",children:s}),A.jsx("tbody",{children:l.map(({seriesId:c,color:f,formattedValue:d,formattedLabel:g,markType:m})=>d==null?null:A.jsxs(hx,{className:t.row,children:[A.jsxs(ec,{className:Xa(t.labelCell,t.cell),component:"th",children:[A.jsx("div",{className:t.markContainer,children:A.jsx(vg,{type:m,color:f,className:t.mark})}),g||null]}),A.jsx(ec,{className:Xa(t.valueCell,t.cell),component:"td",children:d})]},c))})]},r))})}function Xq(n){let t,e;const r=()=>{e=null,n(...t)};function i(...a){t=a,e||(e=requestAnimationFrame(r))}return i.clear=()=>{e&&(cancelAnimationFrame(e),e=null)},i}function Wq(){const n=Ve(),t=Ut(n,kR),e=Ut(n,Vl);return t!==void 0?"polar":e!==void 0?"cartesian":"none"}const Yq=["trigger","classes","children"],Kq=()=>!1,Zq=un(aD,{name:"MuiChartsTooltip",slot:"Root"})(({theme:n})=>({pointerEvents:"none",zIndex:n.zIndex.modal}));function Qq(n){const t=Ai({props:n,name:"MuiChartsTooltipContainer"}),{trigger:e="axis",classes:r,children:i}=t,a=_e(t,Yq),s=a_(),l=fp(r),c=Vq(),f=Uq(),d=H.useRef(null),g=gC(()=>({x:0,y:0})),m=Wq(),v=Ve(),_=Ut(v,e==="axis"?m==="polar"&&Hq||m==="cartesian"&&yH||Kq:gH);H.useEffect(()=>{const R=s.current;if(R===null)return()=>{};const M=Xq(()=>{var k;return(k=d.current)==null?void 0:k.update()}),N=k=>{g.current={x:k.clientX,y:k.clientY},M()};return R.addEventListener("pointerdown",N),R.addEventListener("pointermove",N),()=>{R.removeEventListener("pointerdown",N),R.removeEventListener("pointermove",N),M.clear()}},[s,g]);const w=H.useMemo(()=>({getBoundingClientRect:()=>({x:g.current.x,y:g.current.y,top:g.current.y,left:g.current.x,right:g.current.x,bottom:g.current.y,width:0,height:0,toJSON:()=>""})}),[g]),b=(c==null?void 0:c.pointerType)==="mouse"||f,C=(c==null?void 0:c.pointerType)==="touch"||!f,I=H.useMemo(()=>[{name:"offset",options:{offset:()=>C?[0,64]:[0,8]}},...b?[]:[{name:"flip",options:{fallbackPlacements:["top-end","top-start","bottom-end","bottom"]}}]],[b,C]);return e==="none"?null:A.jsx(iD,{children:_&&A.jsx(Zq,X({className:l==null?void 0:l.root,open:_,placement:b?"right-start":"top",popperRef:d,anchorEl:w,modifiers:I},a,{children:i}))})}function m6(n){const{classes:t,trigger:e="axis"}=n,r=fp(t);return A.jsx(Qq,X({},n,{classes:t,children:e==="axis"?A.jsx(qq,{classes:r}):A.jsx(Lq,{classes:r})}))}function Jq(n){return Zr("MuiChartsLabel",n)}Qr("MuiChartsLabel",["root"]);const tX=n=>kr({root:["root"]},Jq,n.classes),eX=["children","className","classes"],nX=u6("MuiChartsLabel",{classesResolver:tX},function(t,e){const{children:r,className:i,classes:a}=t,s=_e(t,eX);return A.jsx("span",X({className:Xa(a==null?void 0:a.root,i),ref:e},s,{children:r}))}),rX=n=>({type:"series",color:n.color,label:n.label,seriesId:n.seriesId,itemId:n.itemId});function iX(n){return Zr("MuiChartsLegend",n)}const aX=n=>{const{classes:t,direction:e}=n;return kr({root:["root",e],item:["item"],mark:["mark"],label:["label"],series:["series"]},iX,t)},eC=Qr("MuiChartsLegend",["root","item","series","mark","label","vertical","horizontal"]),sX=["slots","slotProps"],oX=["ownerState"],lX=(n,t,e,r)=>{function i(a,s){var N;const l=Ai({props:a,name:n}),c=typeof e.defaultProps=="function"?e.defaultProps(l):e.defaultProps??{},f=vC(c,l),d=f,{slots:g,slotProps:m}=d,v=_e(d,sX),_=Hh(),w=(N=e.classesResolver)==null?void 0:N.call(e,f,_),b=(g==null?void 0:g[t])??r,C=e.propagateSlots&&!(g!=null&&g[t]),I=lo({elementType:b,externalSlotProps:m==null?void 0:m[t],additionalProps:X({},v,{classes:w},C&&{slots:g,slotProps:m}),ownerState:{}}),R=_e(I,oX),M=X({},R);for(const k of e.omitProps??[])delete M[k];return A.jsx(b,X({},M,{ref:s}))}return H.forwardRef(i)},uX=["direction","onItemClick","className","classes"],cX=un("ul",{name:"MuiChartsLegend",slot:"Root"})(({ownerState:n,theme:t})=>X({},t.typography.caption,{color:(t.vars||t).palette.text.primary,lineHeight:"100%",display:"flex",flexDirection:n.direction==="vertical"?"column":"row",alignItems:n.direction==="vertical"?void 0:"center",flexShrink:0,gap:t.spacing(2),listStyleType:"none",paddingInlineStart:0,marginBlock:t.spacing(1),marginInline:t.spacing(1),flexWrap:"wrap",li:{display:n.direction==="horizontal"?"inline-flex":void 0},[`button.${eC.series}`]:{background:"none",border:"none",padding:0,fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",letterSpacing:"inherit",color:"inherit"},[`& .${eC.series}`]:{display:n.direction==="vertical"?"flex":"inline-flex",alignItems:"center",gap:t.spacing(1)}})),v6=lX("MuiChartsLegend","legend",{defaultProps:{direction:"horizontal"},omitProps:["position"],classesResolver:aX},H.forwardRef(function(t,e){const r=h$(),{onItemClick:i,className:a,classes:s}=t,l=_e(t,uX);if(r.items.length===0)return null;const c=i?"button":"div";return A.jsx(cX,X({className:Xa(s==null?void 0:s.root,a),ref:e},l,{ownerState:t,children:r.items.map((f,d)=>A.jsx("li",{className:s==null?void 0:s.item,"data-series":f.id,children:A.jsxs(c,{className:s==null?void 0:s.series,role:i?"button":void 0,type:i?"button":void 0,onClick:i?g=>i(g,rX(f),d):void 0,children:[A.jsx(vg,{className:s==null?void 0:s.mark,color:f.color,type:f.markType}),A.jsx(nX,{className:s==null?void 0:s.label,children:f.label})]})},f.id))}))}));function fX(n){return Zr("MuiChartsAxisHighlight",n)}Qr("MuiChartsAxisHighlight",["root"]);const yg=un("path",{name:"MuiChartsAxisHighlight",slot:"Root"})(({theme:n})=>({pointerEvents:"none",variants:[{props:{axisHighlight:"band"},style:X({fill:"white",fillOpacity:.1},n.applyStyles("light",{fill:"gray"}))},{props:{axisHighlight:"line"},style:X({strokeDasharray:"5 2",stroke:"#ffffff"},n.applyStyles("light",{stroke:"#000000"}))}]}));function hX(n){const{type:t,classes:e}=n,{left:r,width:i}=Ei(),a=Ve(),s=Ut(a,wH),l=Ut(a,ti);return s.length===0?null:s.map(({axisId:c,value:f})=>{const g=l.axis[c].scale,m=hg(g),v=t==="band"&&f!==null&&Fi(g);return A.jsxs(H.Fragment,{children:[v&&g(f)!==void 0&&A.jsx(yg,{d:`M ${r} ${g(f)-(g.step()-g.bandwidth())/2} l 0 ${g.step()} l ${i} 0 l 0 ${-g.step()} Z`,className:e.root,ownerState:{axisHighlight:"band"}}),t==="line"&&f!==null&&A.jsx(yg,{d:`M ${r} ${m(f)} L ${r+i} ${m(f)}`,className:e.root,ownerState:{axisHighlight:"line"}})]},`${c}-${f}`)})}function dX(n){const{type:t,classes:e}=n,{top:r,height:i}=Ei(),a=Ve(),s=Ut(a,EH),l=Ut(a,Jr);return s.length===0?null:s.map(({axisId:c,value:f})=>{const g=l.axis[c].scale,m=hg(g),v=t==="band"&&f!==null&&Fi(g);return A.jsxs(H.Fragment,{children:[v&&g(f)!==void 0&&A.jsx(yg,{d:`M ${g(f)-(g.step()-g.bandwidth())/2} ${r} l ${g.step()} 0 l 0 ${i} l ${-g.step()} 0 Z`,className:e.root,ownerState:{axisHighlight:"band"}}),t==="line"&&f!==null&&A.jsx(yg,{d:`M ${m(f)} ${r} L ${m(f)} ${r+i}`,className:e.root,ownerState:{axisHighlight:"line"}})]},`${c}-${f}`)})}const gX=()=>kr({root:["root"]},fX);function pX(n){const{x:t,y:e}=n,r=gX();return A.jsxs(H.Fragment,{children:[t&&A.jsx(dX,{type:t,classes:r}),e&&A.jsx(hX,{type:e,classes:r})]})}function mX(n){return Zr("MuiBarElement",n)}const vX=Qr("MuiBarElement",["root","highlighted","faded","series"]),yX=n=>{const{classes:t,id:e,isHighlighted:r,isFaded:i}=n,a={root:["root",`series-${e}`,r&&"highlighted",i&&"faded"]};return kr(a,mX,t)};function xX(n){"hasPointerCapture"in n.currentTarget&&n.currentTarget.hasPointerCapture(n.pointerId)&&n.currentTarget.releasePointerCapture(n.pointerId)}const y6=(n,t)=>{const{instance:e}=Ro(),r=H.useRef(!1),i=H.useCallback(()=>{r.current=!0,e.setItemInteraction({type:n.type,seriesId:n.seriesId,dataIndex:n.dataIndex}),e.setHighlight({seriesId:n.seriesId,dataIndex:n.dataIndex})},[e,n.type,n.seriesId,n.dataIndex]),a=H.useCallback(()=>{r.current=!1,e.removeItemInteraction({type:n.type,seriesId:n.seriesId,dataIndex:n.dataIndex}),e.clearHighlight()},[e,n.type,n.seriesId,n.dataIndex]);return H.useEffect(()=>()=>{r.current&&a()},[a]),{onPointerEnter:i,onPointerLeave:a,onPointerDown:xX}},_X=["ownerState","skipAnimation","id","dataIndex","xOrigin","yOrigin"];function AX(n){const{ownerState:t}=n,e=_e(n,_X),r=C$(n);return A.jsx("rect",X({},e,{filter:t.isHighlighted?"brightness(120%)":void 0,opacity:t.isFaded?.3:1,"data-highlighted":t.isHighlighted||void 0,"data-faded":t.isFaded||void 0},r))}const EX=["id","dataIndex","classes","color","slots","slotProps","style","onClick","skipAnimation","layout","x","xOrigin","y","yOrigin","width","height"];function wX(n){const{id:t,dataIndex:e,classes:r,color:i,slots:a,slotProps:s,style:l,onClick:c,skipAnimation:f,layout:d,x:g,xOrigin:m,y:v,yOrigin:_,width:w,height:b}=n,C=_e(n,EX),I=y6({type:"bar",seriesId:t,dataIndex:e}),{isFaded:R,isHighlighted:M}=UR({seriesId:t,dataIndex:e}),N={id:t,dataIndex:e,classes:r,color:i,isFaded:R,isHighlighted:M},k=yX(N),O=(a==null?void 0:a.bar)??AX,S=lo({elementType:O,externalSlotProps:s==null?void 0:s.bar,externalForwardedProps:C,additionalProps:X({},I,{id:t,dataIndex:e,color:i,x:g,xOrigin:m,y:v,yOrigin:_,width:w,height:b,style:l,onClick:c,cursor:c?"pointer":"unset",stroke:"none",fill:i,skipAnimation:f,layout:d}),className:k.root,ownerState:N});return A.jsx(O,X({},S))}function bX(n,t){const e=xe(n.x,t.x),r=xe(n.y,t.y),i=xe(n.width,t.width),a=xe(n.height,t.height),s=xe(n.borderRadius,t.borderRadius);return l=>({x:e(l),y:r(l),width:i(l),height:a(l),borderRadius:s(l)})}function SX(n){const t={x:n.layout==="vertical"?n.x:n.xOrigin,y:n.layout==="vertical"?n.yOrigin:n.y,width:n.layout==="vertical"?n.width:0,height:n.layout==="vertical"?0:n.height,borderRadius:n.borderRadius};return vd({x:n.x,y:n.y,width:n.width,height:n.height,borderRadius:n.borderRadius},{createInterpolator:bX,transformProps:e=>({d:CX(n.hasNegative,n.hasPositive,n.layout,e.x,e.y,e.width,e.height,n.xOrigin,n.yOrigin,e.borderRadius)}),applyProps(e,{d:r}){r&&e.setAttribute("d",r)},initialProps:t,skip:n.skipAnimation,ref:n.ref})}function TX(n){const{maskId:t,x:e,y:r,width:i,height:a,skipAnimation:s}=n,{ref:l,d:c}=SX({layout:n.layout??"vertical",hasNegative:n.hasNegative,hasPositive:n.hasPositive,xOrigin:n.xOrigin,yOrigin:n.yOrigin,x:e,y:r,width:i,height:a,borderRadius:n.borderRadius??0,skipAnimation:s});return!n.borderRadius||n.borderRadius<=0?null:A.jsx("clipPath",{id:t,children:A.jsx("path",{ref:l,d:c})})}function CX(n,t,e,r,i,a,s,l,c,f){if(e==="vertical"){if(t&&n){const g=Math.min(f,a/2,s/2);return`M${r},${i+s/2} v${-(s/2-g)} a${g},${g} 0 0 1 ${g},${-g} h${a-g*2} a${g},${g} 0 0 1 ${g},${g} v${s-2*g} a${g},${g} 0 0 1 ${-g},${g} h${-(a-g*2)} a${g},${g} 0 0 1 ${-g},${-g} v${-(s/2-g)}`}const d=Math.min(f,a/2);if(t)return`M${r},${Math.max(c,i+d)} v${Math.min(0,-(c-i-d))} a${d},${d} 0 0 1 ${d},${-d} h${a-d*2} a${d},${d} 0 0 1 ${d},${d} v${Math.max(0,c-i-d)} Z`;if(n)return`M${r},${Math.min(c,i+s-d)} v${Math.max(0,s-d)} a${d},${d} 0 0 0 ${d},${d} h${a-d*2} a${d},${d} 0 0 0 ${d},${-d} v${-Math.max(0,s-d)} Z`}if(e==="horizontal"){if(t&&n){const g=Math.min(f,a/2,s/2);return`M${r+a/2},${i} h${a/2-g} a${g},${g} 0 0 1 ${g},${g} v${s-g*2} a${g},${g} 0 0 1 ${-g},${g} h${-(a-2*g)} a${g},${g} 0 0 1 ${-g},${-g} v${-(s-g*2)} a${g},${g} 0 0 1 ${g},${-g} h${a/2-g}`}const d=Math.min(f,s/2);if(t)return`M${Math.min(l,r-d)},${i} h${a} a${d},${d} 0 0 1 ${d},${d} v${s-d*2} a${d},${d} 0 0 1 ${-d},${d} h${-a} Z`;if(n)return`M${Math.max(l,r+a+d)},${i} h${-a} a${d},${d} 0 0 0 ${-d},${d} v${s-d*2} a${d},${d} 0 0 0 ${d},${d} h${a} Z`}}function IX(n){return Zr("MuiBarLabel",n)}const ny=Qr("MuiBarLabel",["root","highlighted","faded","animate"]),RX=n=>{const{classes:t,seriesId:e,isFaded:r,isHighlighted:i,skipAnimation:a}=n,s={root:["root",`series-${e}`,i&&"highlighted",r&&"faded",!a&&"animate"]};return kr(s,IX,t)},DX=n=>{const{barLabel:t,value:e,dataIndex:r,seriesId:i,height:a,width:s}=n;return t==="value"?e?e==null?void 0:e.toString():null:t({seriesId:i,dataIndex:r,value:e},{bar:{height:a,width:s}})},OX=["seriesId","dataIndex","color","isFaded","isHighlighted","classes","skipAnimation","layout","xOrigin","yOrigin"],MX=un("text",{name:"MuiBarLabel",slot:"Root",overridesResolver:(n,t)=>[{[`&.${ny.faded}`]:t.faded},{[`&.${ny.highlighted}`]:t.highlighted},t.root]})(({theme:n})=>{var t,e,r,i;return X({},(t=n==null?void 0:n.typography)==null?void 0:t.body2,{stroke:"none",fill:(i=(r=(e=n.vars||n)==null?void 0:e.palette)==null?void 0:r.text)==null?void 0:i.primary,transition:"opacity 0.2s ease-in, fill 0.2s ease-in",textAnchor:"middle",dominantBaseline:"central",pointerEvents:"none",opacity:1,[`&.${ny.faded}`]:{opacity:.3}})});function NX(n){const t=Ai({props:n,name:"MuiBarLabel"}),e=_e(t,OX),r=R$(t);return A.jsx(MX,X({},e,r))}const PX=["seriesId","classes","color","dataIndex","barLabel","slots","slotProps","xOrigin","yOrigin","x","y","width","height","value","skipAnimation","layout"],kX=["ownerState"];function LX(n){const{seriesId:t,classes:e,color:r,dataIndex:i,barLabel:a,slots:s,slotProps:l,xOrigin:c,yOrigin:f,x:d,y:g,width:m,height:v,value:_,skipAnimation:w,layout:b}=n,C=_e(n,PX),{isFaded:I,isHighlighted:R}=UR({seriesId:t,dataIndex:i}),M={seriesId:t,classes:e,color:r,isFaded:I,isHighlighted:R,dataIndex:i,skipAnimation:w,layout:b},N=RX(M),k=(s==null?void 0:s.barLabel)??NX,O=lo({elementType:k,externalSlotProps:l==null?void 0:l.barLabel,additionalProps:X({},C,{xOrigin:c,yOrigin:f,x:d,y:g,width:m,height:v,className:N.root}),ownerState:M}),{ownerState:S}=O,D=_e(O,kX);if(!a)return null;const V=DX({barLabel:a,value:_,dataIndex:i,seriesId:t,height:v,width:m});return V?A.jsx(k,X({},D,S,{children:V})):null}function BX(n){return Zr("MuiBar",n)}Qr("MuiBar",["root","series","seriesLabels"]);const x6=n=>kr({root:["root"],series:["series"],seriesLabels:["seriesLabels"]},BX,n),VX=["bars","skipAnimation"];function FX(n){const{bars:t,skipAnimation:e}=n,r=_e(n,VX),i=x6();return A.jsx(H.Fragment,{children:t.flatMap(({seriesId:a,data:s})=>A.jsx("g",{className:i.seriesLabels,"data-series":a,children:s.map(({xOrigin:l,yOrigin:c,x:f,y:d,dataIndex:g,color:m,value:v,width:_,height:w,layout:b})=>A.jsx(LX,X({seriesId:a,dataIndex:g,value:v,color:m,xOrigin:l,yOrigin:c,x:f,y:d,width:_,height:w,skipAnimation:e??!1,layout:b??"vertical"},r),g))},a))})}function _6(n){const t=Ve(),e=Ut(t,DF);return n||e}function jX(){const n=Ve();return Ut(n,lR)}const ry=(n,t)=>{const e=`${n}-axis`,r=`${n}Axis`;return t===(n==="x"?w2:b2)?`The first \`${r}\``:`The ${e} with id "${t}"`};function UX(n,t,e,r,i,a,s){const l=i[r],c=s[a],f=n?l:c,d=n?c:l,g=n?r:a,m=n?a:r,v=n?"x":"y",_=n?"y":"x";if(!og(f))throw new Error(`MUI X Charts: ${ry(v,g)} should be of type "band" to display the bar series of id "${t}".`);if(f.data===void 0)throw new Error(`MUI X Charts: ${ry(v,g)} should have data property.`);if(og(d)||Z2(d))throw new Error(`MUI X Charts: ${ry(_,m)} should be a continuous type to display the bar series of id "${t}".`)}function zX(n,t,e){const r=t$()??{series:{},stackingGroups:[]},i=vs().xAxisIds[0],a=Do().yAxisIds[0],s=n_(),{series:l,stackingGroups:c}=r,f={};return{completedData:c.flatMap(({ids:g},m)=>{const v=n.left,_=n.left+n.width,w=n.top,b=n.top+n.height;return g.map(C=>{const I=l[C].xAxisId??i,R=l[C].yAxisId??a,M=t[I],N=e[R],k=l[C].layout==="vertical";UX(k,C,l[C],I,t,R,e);const O=k?M:N,S=M.scale,D=N.scale,V=MR(l[C],t[I],e[R]),B=O.scale.bandwidth(),{barWidth:F,offset:j}=HX({bandWidth:B,numberOfGroups:c.length,gapRatio:O.barGapRatio}),rt=m*(F+j),{stackedData:mt,data:q,layout:Z,minBarSize:it}=l[C],gt=O.data.map((_t,Mt)=>{if(q[Mt]==null)return null;const Et=mt[Mt].map(Rt=>k?D(Rt):S(Rt)),zt=Math.round(Math.min(...Et)),$t=Math.round(Math.max(...Et)),pe=l[C].stack,{barSize:Re,startCoordinate:Ke}=GX(k,zt,$t,q[Mt],it),ft={seriesId:C,dataIndex:Mt,layout:Z,x:k?S(_t)+rt:Ke,y:k?Ke:D(_t)+rt,xOrigin:S(0)??0,yOrigin:D(0)??0,height:k?Re:F,width:k?F:Re,color:V(Mt),value:q[Mt],maskId:`${s}_${pe||C}_${m}_${Mt}`};if(ft.x>_||ft.x+ft.width<v||ft.y>b||ft.y+ft.height<w)return null;f[ft.maskId]||(f[ft.maskId]={id:ft.maskId,width:0,height:0,hasNegative:!1,hasPositive:!1,layout:ft.layout,xOrigin:S(0),yOrigin:D(0),x:0,y:0});const wt=f[ft.maskId];return wt.width=ft.layout==="vertical"?ft.width:wt.width+ft.width,wt.height=ft.layout==="vertical"?wt.height+ft.height:ft.height,wt.x=Math.min(wt.x===0?1/0:wt.x,ft.x),wt.y=Math.min(wt.y===0?1/0:wt.y,ft.y),wt.hasNegative=wt.hasNegative||(ft.value??0)<0,wt.hasPositive=wt.hasPositive||(ft.value??0)>0,ft}).filter(_t=>_t!==null);return{seriesId:C,data:gt}})}),masksData:Object.values(f)}}function HX({bandWidth:n,numberOfGroups:t,gapRatio:e}){if(e===0)return{barWidth:n/t,offset:0};const r=n/(t+(t-1)*e),i=e*r;return{barWidth:r,offset:i}}function GX(n,t,e,r,i){if(r===0||r==null)return{barSize:0,startCoordinate:t};const a=e-t<i,s=a?i:e-t,l=n&&r>=0,c=!n&&r<0;return a&&(l||c)?{barSize:s,startCoordinate:e-s}:{barSize:s,startCoordinate:t}}const $X=["skipAnimation","onItemClick","borderRadius","barLabel"],qX=un("g",{name:"MuiBarPlot",slot:"Root"})({[`& .${vX.root}`]:{transition:"opacity 0.2s ease-in, fill 0.2s ease-in"}});function XX(n){const{skipAnimation:t,onItemClick:e,borderRadius:r,barLabel:i}=n,a=_e(n,$X),s=jX(),l=_6(s||t),{xAxis:c}=vs(),{yAxis:f}=Do(),{completedData:d,masksData:g}=zX(Ei(),c,f),m=!r||r<=0,v=x6();return A.jsxs(qX,{className:v.root,children:[!m&&g.map(({id:_,x:w,y:b,xOrigin:C,yOrigin:I,width:R,height:M,hasPositive:N,hasNegative:k,layout:O})=>A.jsx(TX,{maskId:_,borderRadius:r,hasNegative:k,hasPositive:N,layout:O,x:w,y:b,xOrigin:C,yOrigin:I,width:R,height:M,skipAnimation:l??!1},_)),d.map(({seriesId:_,data:w})=>A.jsx("g",{"data-series":_,className:v.series,children:w.map(({dataIndex:b,color:C,maskId:I,layout:R,x:M,xOrigin:N,y:k,yOrigin:O,width:S,height:D})=>{const V=A.jsx(wX,X({id:_,dataIndex:b,color:C,skipAnimation:l??!1,layout:R??"vertical",x:M,xOrigin:N,y:k,yOrigin:O,width:S,height:D},a,{onClick:e&&(B=>{e(B,{type:"bar",seriesId:_,dataIndex:b})})}),b);return m?V:A.jsx("g",{clipPath:`url(#${I})`,children:V},b)})},_)),i&&A.jsx(FX,X({bars:d,skipAnimation:l,barLabel:i},a))]})}const WX=["message"],YX=un("text")(({theme:n})=>X({},n.typography.body2,{stroke:"none",fill:(n.vars||n).palette.text.primary,shapeRendering:"crispEdges",textAnchor:"middle",dominantBaseline:"middle"}));function KX(n){const{message:t}=n,e=_e(n,WX),{top:r,left:i,height:a,width:s}=Ei(),{localeText:l}=XR();return A.jsx(YX,X({x:i+s/2,y:r+a/2},e,{children:t??l.loading}))}const ZX=["message"],QX=un("text")(({theme:n})=>X({},n.typography.body2,{stroke:"none",fill:(n.vars||n).palette.text.primary,shapeRendering:"crispEdges",textAnchor:"middle",dominantBaseline:"middle"}));function JX(n){const{message:t}=n,e=_e(n,ZX),{top:r,left:i,height:a,width:s}=Ei(),{localeText:l}=XR();return A.jsx(QX,X({x:i+s/2,y:r+a/2},e,{children:t??l.noData}))}function tW(){const n=op();return Object.values(n).every(t=>{if(!t)return!0;const{series:e,seriesOrder:r}=t;return r.every(i=>e[i].data.length===0)})}function A6(n){var e,r,i,a;const t=tW();if(n.loading){const s=((e=n.slots)==null?void 0:e.loadingOverlay)??KX;return A.jsx(s,X({},(r=n.slotProps)==null?void 0:r.loadingOverlay))}if(t){const s=((i=n.slots)==null?void 0:i.noDataOverlay)??JX;return A.jsx(s,X({},(a=n.slotProps)==null?void 0:a.noDataOverlay))}return null}const eW=[pd,Bc,Lc,Ul],nW=["xAxis","yAxis","series","width","height","margin","colors","dataset","sx","axisHighlight","grid","children","slots","slotProps","skipAnimation","loading","layout","onItemClick","highlightedItem","onHighlightChange","borderRadius","barLabel","className","hideLegend","showToolbar"],rW=n=>{var ft,wt,Rt,pt,Ae;const{xAxis:t,yAxis:e,series:r,width:i,height:a,margin:s,colors:l,dataset:c,sx:f,axisHighlight:d,grid:g,children:m,slots:v,slotProps:_,skipAnimation:w,loading:b,layout:C,onItemClick:I,highlightedItem:R,onHighlightChange:M,borderRadius:N,barLabel:k,className:O}=n,S=_e(n,nW),V=`${dC()}-clip-path`,B=C==="horizontal"||C===void 0&&r.some(Nt=>Nt.layout==="horizontal"),F=H.useMemo(()=>[{id:w2,scaleType:"band",data:Array.from({length:Math.max(...r.map(Nt=>(Nt.data??c??[]).length))},(Nt,ke)=>ke)}],[c,r]),j=H.useMemo(()=>[{id:b2,scaleType:"band",data:Array.from({length:Math.max(...r.map(Nt=>(Nt.data??c??[]).length))},(Nt,ke)=>ke)}],[c,r]),rt=H.useMemo(()=>r.map(Nt=>X({type:"bar"},Nt,{layout:B?"horizontal":"vertical"})),[B,r]),mt=B?void 0:F,q=H.useMemo(()=>t?B?t:t.map(Nt=>X({scaleType:"band"},Nt)):mt,[mt,B,t]),Z=B?j:void 0,it=H.useMemo(()=>e?B?e.map(Nt=>X({scaleType:"band"},Nt)):e:Z,[Z,B,e]),gt=X({},S,{series:rt,width:i,height:a,margin:s,colors:l,dataset:c,xAxis:q,yAxis:it,highlightedItem:R,onHighlightChange:M,disableAxisListener:((ft=_==null?void 0:_.tooltip)==null?void 0:ft.trigger)!=="axis"&&(d==null?void 0:d.x)==="none"&&(d==null?void 0:d.y)==="none",className:O,skipAnimation:w,plugins:eW}),_t={onItemClick:I,slots:v,slotProps:_,borderRadius:N,barLabel:k},Mt={vertical:g==null?void 0:g.vertical,horizontal:g==null?void 0:g.horizontal},It={clipPath:`url(#${V})`},Et={id:V},zt={slots:v,slotProps:_,loading:b},$t={slots:v,slotProps:_},pe=X({},B?{y:"band"}:{x:"band"},d),Re={slots:v,slotProps:_};return{chartsWrapperProps:{sx:f,legendPosition:(Rt=(wt=n.slotProps)==null?void 0:wt.legend)==null?void 0:Rt.position,legendDirection:(Ae=(pt=n.slotProps)==null?void 0:pt.legend)==null?void 0:Ae.direction},chartContainerProps:gt,barPlotProps:_t,gridProps:Mt,clipPathProps:Et,clipPathGroupProps:It,overlayProps:zt,chartsAxisProps:$t,axisHighlightProps:pe,legendProps:Re,children:m}},iW={baseButton:qt,baseIconButton:Xr},aW={},sW=X({},iW,aW),oW=H.createContext(null);function lW(n){const{slots:t,slotProps:e={},defaultSlots:r,children:i}=n,a=H.useMemo(()=>({slots:X({},r,t),slotProps:e}),[r,t,e]);return A.jsx(oW.Provider,{value:a,children:i})}const ts=11102230246251565e-32,ur=134217729,uW=(3+8*ts)*ts;function iy(n,t,e,r,i){let a,s,l,c,f=t[0],d=r[0],g=0,m=0;d>f==d>-f?(a=f,f=t[++g]):(a=d,d=r[++m]);let v=0;if(g<n&&m<e)for(d>f==d>-f?(s=f+a,l=a-(s-f),f=t[++g]):(s=d+a,l=a-(s-d),d=r[++m]),a=s,l!==0&&(i[v++]=l);g<n&&m<e;)d>f==d>-f?(s=a+f,c=s-a,l=a-(s-c)+(f-c),f=t[++g]):(s=a+d,c=s-a,l=a-(s-c)+(d-c),d=r[++m]),a=s,l!==0&&(i[v++]=l);for(;g<n;)s=a+f,c=s-a,l=a-(s-c)+(f-c),f=t[++g],a=s,l!==0&&(i[v++]=l);for(;m<e;)s=a+d,c=s-a,l=a-(s-c)+(d-c),d=r[++m],a=s,l!==0&&(i[v++]=l);return(a!==0||v===0)&&(i[v++]=a),v}function cW(n,t){let e=t[0];for(let r=1;r<n;r++)e+=t[r];return e}function xd(n){return new Float64Array(n)}const fW=(3+16*ts)*ts,hW=(2+12*ts)*ts,dW=(9+64*ts)*ts*ts,Fu=xd(4),nC=xd(8),rC=xd(12),iC=xd(16),Er=xd(4);function gW(n,t,e,r,i,a,s){let l,c,f,d,g,m,v,_,w,b,C,I,R,M,N,k,O,S;const D=n-i,V=e-i,B=t-a,F=r-a;M=D*F,m=ur*D,v=m-(m-D),_=D-v,m=ur*F,w=m-(m-F),b=F-w,N=_*b-(M-v*w-_*w-v*b),k=B*V,m=ur*B,v=m-(m-B),_=B-v,m=ur*V,w=m-(m-V),b=V-w,O=_*b-(k-v*w-_*w-v*b),C=N-O,g=N-C,Fu[0]=N-(C+g)+(g-O),I=M+C,g=I-M,R=M-(I-g)+(C-g),C=R-k,g=R-C,Fu[1]=R-(C+g)+(g-k),S=I+C,g=S-I,Fu[2]=I-(S-g)+(C-g),Fu[3]=S;let j=cW(4,Fu),rt=hW*s;if(j>=rt||-j>=rt||(g=n-D,l=n-(D+g)+(g-i),g=e-V,f=e-(V+g)+(g-i),g=t-B,c=t-(B+g)+(g-a),g=r-F,d=r-(F+g)+(g-a),l===0&&c===0&&f===0&&d===0)||(rt=dW*s+uW*Math.abs(j),j+=D*d+F*l-(B*f+V*c),j>=rt||-j>=rt))return j;M=l*F,m=ur*l,v=m-(m-l),_=l-v,m=ur*F,w=m-(m-F),b=F-w,N=_*b-(M-v*w-_*w-v*b),k=c*V,m=ur*c,v=m-(m-c),_=c-v,m=ur*V,w=m-(m-V),b=V-w,O=_*b-(k-v*w-_*w-v*b),C=N-O,g=N-C,Er[0]=N-(C+g)+(g-O),I=M+C,g=I-M,R=M-(I-g)+(C-g),C=R-k,g=R-C,Er[1]=R-(C+g)+(g-k),S=I+C,g=S-I,Er[2]=I-(S-g)+(C-g),Er[3]=S;const mt=iy(4,Fu,4,Er,nC);M=D*d,m=ur*D,v=m-(m-D),_=D-v,m=ur*d,w=m-(m-d),b=d-w,N=_*b-(M-v*w-_*w-v*b),k=B*f,m=ur*B,v=m-(m-B),_=B-v,m=ur*f,w=m-(m-f),b=f-w,O=_*b-(k-v*w-_*w-v*b),C=N-O,g=N-C,Er[0]=N-(C+g)+(g-O),I=M+C,g=I-M,R=M-(I-g)+(C-g),C=R-k,g=R-C,Er[1]=R-(C+g)+(g-k),S=I+C,g=S-I,Er[2]=I-(S-g)+(C-g),Er[3]=S;const q=iy(mt,nC,4,Er,rC);M=l*d,m=ur*l,v=m-(m-l),_=l-v,m=ur*d,w=m-(m-d),b=d-w,N=_*b-(M-v*w-_*w-v*b),k=c*f,m=ur*c,v=m-(m-c),_=c-v,m=ur*f,w=m-(m-f),b=f-w,O=_*b-(k-v*w-_*w-v*b),C=N-O,g=N-C,Er[0]=N-(C+g)+(g-O),I=M+C,g=I-M,R=M-(I-g)+(C-g),C=R-k,g=R-C,Er[1]=R-(C+g)+(g-k),S=I+C,g=S-I,Er[2]=I-(S-g)+(C-g),Er[3]=S;const Z=iy(q,rC,4,Er,iC);return iC[Z-1]}function f1(n,t,e,r,i,a){const s=(t-a)*(e-i),l=(n-i)*(r-a),c=s-l,f=Math.abs(s+l);return Math.abs(c)>=fW*f?c:-gW(n,t,e,r,i,a,f)}const aC=Math.pow(2,-52),h1=new Uint32Array(512);class xg{static from(t,e=xW,r=_W){const i=t.length,a=new Float64Array(i*2);for(let s=0;s<i;s++){const l=t[s];a[2*s]=e(l),a[2*s+1]=r(l)}return new xg(a)}constructor(t){const e=t.length>>1;if(e>0&&typeof t[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=t;const r=Math.max(2*e-5,0);this._triangles=new Uint32Array(r*3),this._halfedges=new Int32Array(r*3),this._hashSize=Math.ceil(Math.sqrt(e)),this._hullPrev=new Uint32Array(e),this._hullNext=new Uint32Array(e),this._hullTri=new Uint32Array(e),this._hullHash=new Int32Array(this._hashSize),this._ids=new Uint32Array(e),this._dists=new Float64Array(e),this.update()}update(){const{coords:t,_hullPrev:e,_hullNext:r,_hullTri:i,_hullHash:a}=this,s=t.length>>1;let l=1/0,c=1/0,f=-1/0,d=-1/0;for(let D=0;D<s;D++){const V=t[2*D],B=t[2*D+1];V<l&&(l=V),B<c&&(c=B),V>f&&(f=V),B>d&&(d=B),this._ids[D]=D}const g=(l+f)/2,m=(c+d)/2;let v,_,w;for(let D=0,V=1/0;D<s;D++){const B=ay(g,m,t[2*D],t[2*D+1]);B<V&&(v=D,V=B)}const b=t[2*v],C=t[2*v+1];for(let D=0,V=1/0;D<s;D++){if(D===v)continue;const B=ay(b,C,t[2*D],t[2*D+1]);B<V&&B>0&&(_=D,V=B)}let I=t[2*_],R=t[2*_+1],M=1/0;for(let D=0;D<s;D++){if(D===v||D===_)continue;const V=vW(b,C,I,R,t[2*D],t[2*D+1]);V<M&&(w=D,M=V)}let N=t[2*w],k=t[2*w+1];if(M===1/0){for(let B=0;B<s;B++)this._dists[B]=t[2*B]-t[0]||t[2*B+1]-t[1];nc(this._ids,this._dists,0,s-1);const D=new Uint32Array(s);let V=0;for(let B=0,F=-1/0;B<s;B++){const j=this._ids[B],rt=this._dists[j];rt>F&&(D[V++]=j,F=rt)}this.hull=D.subarray(0,V),this.triangles=new Uint32Array(0),this.halfedges=new Uint32Array(0);return}if(f1(b,C,I,R,N,k)<0){const D=_,V=I,B=R;_=w,I=N,R=k,w=D,N=V,k=B}const O=yW(b,C,I,R,N,k);this._cx=O.x,this._cy=O.y;for(let D=0;D<s;D++)this._dists[D]=ay(t[2*D],t[2*D+1],O.x,O.y);nc(this._ids,this._dists,0,s-1),this._hullStart=v;let S=3;r[v]=e[w]=_,r[_]=e[v]=w,r[w]=e[_]=v,i[v]=0,i[_]=1,i[w]=2,a.fill(-1),a[this._hashKey(b,C)]=v,a[this._hashKey(I,R)]=_,a[this._hashKey(N,k)]=w,this.trianglesLen=0,this._addTriangle(v,_,w,-1,-1,-1);for(let D=0,V,B;D<this._ids.length;D++){const F=this._ids[D],j=t[2*F],rt=t[2*F+1];if(D>0&&Math.abs(j-V)<=aC&&Math.abs(rt-B)<=aC||(V=j,B=rt,F===v||F===_||F===w))continue;let mt=0;for(let _t=0,Mt=this._hashKey(j,rt);_t<this._hashSize&&(mt=a[(Mt+_t)%this._hashSize],!(mt!==-1&&mt!==r[mt]));_t++);mt=e[mt];let q=mt,Z;for(;Z=r[q],f1(j,rt,t[2*q],t[2*q+1],t[2*Z],t[2*Z+1])>=0;)if(q=Z,q===mt){q=-1;break}if(q===-1)continue;let it=this._addTriangle(q,F,r[q],-1,-1,i[q]);i[F]=this._legalize(it+2),i[q]=it,S++;let gt=r[q];for(;Z=r[gt],f1(j,rt,t[2*gt],t[2*gt+1],t[2*Z],t[2*Z+1])<0;)it=this._addTriangle(gt,F,Z,i[F],-1,i[gt]),i[F]=this._legalize(it+2),r[gt]=gt,S--,gt=Z;if(q===mt)for(;Z=e[q],f1(j,rt,t[2*Z],t[2*Z+1],t[2*q],t[2*q+1])<0;)it=this._addTriangle(Z,F,q,-1,i[q],i[Z]),this._legalize(it+2),i[Z]=it,r[q]=q,S--,q=Z;this._hullStart=e[F]=q,r[q]=e[gt]=F,r[F]=gt,a[this._hashKey(j,rt)]=F,a[this._hashKey(t[2*q],t[2*q+1])]=q}this.hull=new Uint32Array(S);for(let D=0,V=this._hullStart;D<S;D++)this.hull[D]=V,V=r[V];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(t,e){return Math.floor(pW(t-this._cx,e-this._cy)*this._hashSize)%this._hashSize}_legalize(t){const{_triangles:e,_halfedges:r,coords:i}=this;let a=0,s=0;for(;;){const l=r[t],c=t-t%3;if(s=c+(t+2)%3,l===-1){if(a===0)break;t=h1[--a];continue}const f=l-l%3,d=c+(t+1)%3,g=f+(l+2)%3,m=e[s],v=e[t],_=e[d],w=e[g];if(mW(i[2*m],i[2*m+1],i[2*v],i[2*v+1],i[2*_],i[2*_+1],i[2*w],i[2*w+1])){e[t]=w,e[l]=m;const C=r[g];if(C===-1){let R=this._hullStart;do{if(this._hullTri[R]===g){this._hullTri[R]=t;break}R=this._hullPrev[R]}while(R!==this._hullStart)}this._link(t,C),this._link(l,r[s]),this._link(s,g);const I=f+(l+1)%3;a<h1.length&&(h1[a++]=I)}else{if(a===0)break;t=h1[--a]}}return s}_link(t,e){this._halfedges[t]=e,e!==-1&&(this._halfedges[e]=t)}_addTriangle(t,e,r,i,a,s){const l=this.trianglesLen;return this._triangles[l]=t,this._triangles[l+1]=e,this._triangles[l+2]=r,this._link(l,i),this._link(l+1,a),this._link(l+2,s),this.trianglesLen+=3,l}}function pW(n,t){const e=n/(Math.abs(n)+Math.abs(t));return(t>0?3-e:1+e)/4}function ay(n,t,e,r){const i=n-e,a=t-r;return i*i+a*a}function mW(n,t,e,r,i,a,s,l){const c=n-s,f=t-l,d=e-s,g=r-l,m=i-s,v=a-l,_=c*c+f*f,w=d*d+g*g,b=m*m+v*v;return c*(g*b-w*v)-f*(d*b-w*m)+_*(d*v-g*m)<0}function vW(n,t,e,r,i,a){const s=e-n,l=r-t,c=i-n,f=a-t,d=s*s+l*l,g=c*c+f*f,m=.5/(s*f-l*c),v=(f*d-l*g)*m,_=(s*g-c*d)*m;return v*v+_*_}function yW(n,t,e,r,i,a){const s=e-n,l=r-t,c=i-n,f=a-t,d=s*s+l*l,g=c*c+f*f,m=.5/(s*f-l*c),v=n+(f*d-l*g)*m,_=t+(s*g-c*d)*m;return{x:v,y:_}}function nc(n,t,e,r){if(r-e<=20)for(let i=e+1;i<=r;i++){const a=n[i],s=t[a];let l=i-1;for(;l>=e&&t[n[l]]>s;)n[l+1]=n[l--];n[l+1]=a}else{const i=e+r>>1;let a=e+1,s=r;ih(n,i,a),t[n[e]]>t[n[r]]&&ih(n,e,r),t[n[a]]>t[n[r]]&&ih(n,a,r),t[n[e]]>t[n[a]]&&ih(n,e,a);const l=n[a],c=t[l];for(;;){do a++;while(t[n[a]]<c);do s--;while(t[n[s]]>c);if(s<a)break;ih(n,a,s)}n[e+1]=n[s],n[s]=l,r-a+1>=s-e?(nc(n,t,a,r),nc(n,t,e,s-1)):(nc(n,t,e,s-1),nc(n,t,a,r))}}function ih(n,t,e){const r=n[t];n[t]=n[e],n[e]=r}function xW(n){return n[0]}function _W(n){return n[1]}const sC=1e-6;class El{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(t,e){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+e}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(t,e){this._+=`L${this._x1=+t},${this._y1=+e}`}arc(t,e,r){t=+t,e=+e,r=+r;const i=t+r,a=e;if(r<0)throw new Error("negative radius");this._x1===null?this._+=`M${i},${a}`:(Math.abs(this._x1-i)>sC||Math.abs(this._y1-a)>sC)&&(this._+="L"+i+","+a),r&&(this._+=`A${r},${r},0,1,1,${t-r},${e}A${r},${r},0,1,1,${this._x1=i},${this._y1=a}`)}rect(t,e,r,i){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+e}h${+r}v${+i}h${-r}Z`}value(){return this._||null}}class dx{constructor(){this._=[]}moveTo(t,e){this._.push([t,e])}closePath(){this._.push(this._[0].slice())}lineTo(t,e){this._.push([t,e])}value(){return this._.length?this._:null}}class AW{constructor(t,[e,r,i,a]=[0,0,960,500]){if(!((i=+i)>=(e=+e))||!((a=+a)>=(r=+r)))throw new Error("invalid bounds");this.delaunay=t,this._circumcenters=new Float64Array(t.points.length*2),this.vectors=new Float64Array(t.points.length*2),this.xmax=i,this.xmin=e,this.ymax=a,this.ymin=r,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:t,hull:e,triangles:r},vectors:i}=this;let a,s;const l=this.circumcenters=this._circumcenters.subarray(0,r.length/3*2);for(let w=0,b=0,C=r.length,I,R;w<C;w+=3,b+=2){const M=r[w]*2,N=r[w+1]*2,k=r[w+2]*2,O=t[M],S=t[M+1],D=t[N],V=t[N+1],B=t[k],F=t[k+1],j=D-O,rt=V-S,mt=B-O,q=F-S,Z=(j*q-rt*mt)*2;if(Math.abs(Z)<1e-9){if(a===void 0){a=s=0;for(const gt of e)a+=t[gt*2],s+=t[gt*2+1];a/=e.length,s/=e.length}const it=1e9*Math.sign((a-O)*q-(s-S)*mt);I=(O+B)/2-it*q,R=(S+F)/2+it*mt}else{const it=1/Z,gt=j*j+rt*rt,_t=mt*mt+q*q;I=O+(q*gt-rt*_t)*it,R=S+(j*_t-mt*gt)*it}l[b]=I,l[b+1]=R}let c=e[e.length-1],f,d=c*4,g,m=t[2*c],v,_=t[2*c+1];i.fill(0);for(let w=0;w<e.length;++w)c=e[w],f=d,g=m,v=_,d=c*4,m=t[2*c],_=t[2*c+1],i[f+2]=i[d]=v-_,i[f+3]=i[d+1]=m-g}render(t){const e=t==null?t=new El:void 0,{delaunay:{halfedges:r,inedges:i,hull:a},circumcenters:s,vectors:l}=this;if(a.length<=1)return null;for(let d=0,g=r.length;d<g;++d){const m=r[d];if(m<d)continue;const v=Math.floor(d/3)*2,_=Math.floor(m/3)*2,w=s[v],b=s[v+1],C=s[_],I=s[_+1];this._renderSegment(w,b,C,I,t)}let c,f=a[a.length-1];for(let d=0;d<a.length;++d){c=f,f=a[d];const g=Math.floor(i[f]/3)*2,m=s[g],v=s[g+1],_=c*4,w=this._project(m,v,l[_+2],l[_+3]);w&&this._renderSegment(m,v,w[0],w[1],t)}return e&&e.value()}renderBounds(t){const e=t==null?t=new El:void 0;return t.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),e&&e.value()}renderCell(t,e){const r=e==null?e=new El:void 0,i=this._clip(t);if(i===null||!i.length)return;e.moveTo(i[0],i[1]);let a=i.length;for(;i[0]===i[a-2]&&i[1]===i[a-1]&&a>1;)a-=2;for(let s=2;s<a;s+=2)(i[s]!==i[s-2]||i[s+1]!==i[s-1])&&e.lineTo(i[s],i[s+1]);return e.closePath(),r&&r.value()}*cellPolygons(){const{delaunay:{points:t}}=this;for(let e=0,r=t.length/2;e<r;++e){const i=this.cellPolygon(e);i&&(i.index=e,yield i)}}cellPolygon(t){const e=new dx;return this.renderCell(t,e),e.value()}_renderSegment(t,e,r,i,a){let s;const l=this._regioncode(t,e),c=this._regioncode(r,i);l===0&&c===0?(a.moveTo(t,e),a.lineTo(r,i)):(s=this._clipSegment(t,e,r,i,l,c))&&(a.moveTo(s[0],s[1]),a.lineTo(s[2],s[3]))}contains(t,e,r){return e=+e,e!==e||(r=+r,r!==r)?!1:this.delaunay._step(t,e,r)===t}*neighbors(t){const e=this._clip(t);if(e)for(const r of this.delaunay.neighbors(t)){const i=this._clip(r);if(i){t:for(let a=0,s=e.length;a<s;a+=2)for(let l=0,c=i.length;l<c;l+=2)if(e[a]===i[l]&&e[a+1]===i[l+1]&&e[(a+2)%s]===i[(l+c-2)%c]&&e[(a+3)%s]===i[(l+c-1)%c]){yield r;break t}}}}_cell(t){const{circumcenters:e,delaunay:{inedges:r,halfedges:i,triangles:a}}=this,s=r[t];if(s===-1)return null;const l=[];let c=s;do{const f=Math.floor(c/3);if(l.push(e[f*2],e[f*2+1]),c=c%3===2?c-2:c+1,a[c]!==t)break;c=i[c]}while(c!==s&&c!==-1);return l}_clip(t){if(t===0&&this.delaunay.hull.length===1)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const e=this._cell(t);if(e===null)return null;const{vectors:r}=this,i=t*4;return this._simplify(r[i]||r[i+1]?this._clipInfinite(t,e,r[i],r[i+1],r[i+2],r[i+3]):this._clipFinite(t,e))}_clipFinite(t,e){const r=e.length;let i=null,a,s,l=e[r-2],c=e[r-1],f,d=this._regioncode(l,c),g,m=0;for(let v=0;v<r;v+=2)if(a=l,s=c,l=e[v],c=e[v+1],f=d,d=this._regioncode(l,c),f===0&&d===0)g=m,m=0,i?i.push(l,c):i=[l,c];else{let _,w,b,C,I;if(f===0){if((_=this._clipSegment(a,s,l,c,f,d))===null)continue;[w,b,C,I]=_}else{if((_=this._clipSegment(l,c,a,s,d,f))===null)continue;[C,I,w,b]=_,g=m,m=this._edgecode(w,b),g&&m&&this._edge(t,g,m,i,i.length),i?i.push(w,b):i=[w,b]}g=m,m=this._edgecode(C,I),g&&m&&this._edge(t,g,m,i,i.length),i?i.push(C,I):i=[C,I]}if(i)g=m,m=this._edgecode(i[0],i[1]),g&&m&&this._edge(t,g,m,i,i.length);else if(this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return i}_clipSegment(t,e,r,i,a,s){const l=a<s;for(l&&([t,e,r,i,a,s]=[r,i,t,e,s,a]);;){if(a===0&&s===0)return l?[r,i,t,e]:[t,e,r,i];if(a&s)return null;let c,f,d=a||s;d&8?(c=t+(r-t)*(this.ymax-e)/(i-e),f=this.ymax):d&4?(c=t+(r-t)*(this.ymin-e)/(i-e),f=this.ymin):d&2?(f=e+(i-e)*(this.xmax-t)/(r-t),c=this.xmax):(f=e+(i-e)*(this.xmin-t)/(r-t),c=this.xmin),a?(t=c,e=f,a=this._regioncode(t,e)):(r=c,i=f,s=this._regioncode(r,i))}}_clipInfinite(t,e,r,i,a,s){let l=Array.from(e),c;if((c=this._project(l[0],l[1],r,i))&&l.unshift(c[0],c[1]),(c=this._project(l[l.length-2],l[l.length-1],a,s))&&l.push(c[0],c[1]),l=this._clipFinite(t,l))for(let f=0,d=l.length,g,m=this._edgecode(l[d-2],l[d-1]);f<d;f+=2)g=m,m=this._edgecode(l[f],l[f+1]),g&&m&&(f=this._edge(t,g,m,l,f),d=l.length);else this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(l=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return l}_edge(t,e,r,i,a){for(;e!==r;){let s,l;switch(e){case 5:e=4;continue;case 4:e=6,s=this.xmax,l=this.ymin;break;case 6:e=2;continue;case 2:e=10,s=this.xmax,l=this.ymax;break;case 10:e=8;continue;case 8:e=9,s=this.xmin,l=this.ymax;break;case 9:e=1;continue;case 1:e=5,s=this.xmin,l=this.ymin;break}(i[a]!==s||i[a+1]!==l)&&this.contains(t,s,l)&&(i.splice(a,0,s,l),a+=2)}return a}_project(t,e,r,i){let a=1/0,s,l,c;if(i<0){if(e<=this.ymin)return null;(s=(this.ymin-e)/i)<a&&(c=this.ymin,l=t+(a=s)*r)}else if(i>0){if(e>=this.ymax)return null;(s=(this.ymax-e)/i)<a&&(c=this.ymax,l=t+(a=s)*r)}if(r>0){if(t>=this.xmax)return null;(s=(this.xmax-t)/r)<a&&(l=this.xmax,c=e+(a=s)*i)}else if(r<0){if(t<=this.xmin)return null;(s=(this.xmin-t)/r)<a&&(l=this.xmin,c=e+(a=s)*i)}return[l,c]}_edgecode(t,e){return(t===this.xmin?1:t===this.xmax?2:0)|(e===this.ymin?4:e===this.ymax?8:0)}_regioncode(t,e){return(t<this.xmin?1:t>this.xmax?2:0)|(e<this.ymin?4:e>this.ymax?8:0)}_simplify(t){if(t&&t.length>4){for(let e=0;e<t.length;e+=2){const r=(e+2)%t.length,i=(e+4)%t.length;(t[e]===t[r]&&t[r]===t[i]||t[e+1]===t[r+1]&&t[r+1]===t[i+1])&&(t.splice(r,2),e-=2)}t.length||(t=null)}return t}}const EW=2*Math.PI,ju=Math.pow;function wW(n){return n[0]}function bW(n){return n[1]}function SW(n){const{triangles:t,coords:e}=n;for(let r=0;r<t.length;r+=3){const i=2*t[r],a=2*t[r+1],s=2*t[r+2];if((e[s]-e[i])*(e[a+1]-e[i+1])-(e[a]-e[i])*(e[s+1]-e[i+1])>1e-10)return!1}return!0}function TW(n,t,e){return[n+Math.sin(n+t)*e,t+Math.cos(n-t)*e]}class c_{static from(t,e=wW,r=bW,i){return new c_("length"in t?CW(t,e,r,i):Float64Array.from(IW(t,e,r,i)))}constructor(t){this._delaunator=new xg(t),this.inedges=new Int32Array(t.length/2),this._hullIndex=new Int32Array(t.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const t=this._delaunator,e=this.points;if(t.hull&&t.hull.length>2&&SW(t)){this.collinear=Int32Array.from({length:e.length/2},(m,v)=>v).sort((m,v)=>e[2*m]-e[2*v]||e[2*m+1]-e[2*v+1]);const c=this.collinear[0],f=this.collinear[this.collinear.length-1],d=[e[2*c],e[2*c+1],e[2*f],e[2*f+1]],g=1e-8*Math.hypot(d[3]-d[1],d[2]-d[0]);for(let m=0,v=e.length/2;m<v;++m){const _=TW(e[2*m],e[2*m+1],g);e[2*m]=_[0],e[2*m+1]=_[1]}this._delaunator=new xg(e)}else delete this.collinear;const r=this.halfedges=this._delaunator.halfedges,i=this.hull=this._delaunator.hull,a=this.triangles=this._delaunator.triangles,s=this.inedges.fill(-1),l=this._hullIndex.fill(-1);for(let c=0,f=r.length;c<f;++c){const d=a[c%3===2?c-2:c+1];(r[c]===-1||s[d]===-1)&&(s[d]=c)}for(let c=0,f=i.length;c<f;++c)l[i[c]]=c;i.length<=2&&i.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=i[0],s[i[0]]=1,i.length===2&&(s[i[1]]=0,this.triangles[1]=i[1],this.triangles[2]=i[1]))}voronoi(t){return new AW(this,t)}*neighbors(t){const{inedges:e,hull:r,_hullIndex:i,halfedges:a,triangles:s,collinear:l}=this;if(l){const g=l.indexOf(t);g>0&&(yield l[g-1]),g<l.length-1&&(yield l[g+1]);return}const c=e[t];if(c===-1)return;let f=c,d=-1;do{if(yield d=s[f],f=f%3===2?f-2:f+1,s[f]!==t)return;if(f=a[f],f===-1){const g=r[(i[t]+1)%r.length];g!==d&&(yield g);return}}while(f!==c)}find(t,e,r=0){if(t=+t,t!==t||(e=+e,e!==e))return-1;const i=r;let a;for(;(a=this._step(r,t,e))>=0&&a!==r&&a!==i;)r=a;return a}_step(t,e,r){const{inedges:i,hull:a,_hullIndex:s,halfedges:l,triangles:c,points:f}=this;if(i[t]===-1||!f.length)return(t+1)%(f.length>>1);let d=t,g=ju(e-f[t*2],2)+ju(r-f[t*2+1],2);const m=i[t];let v=m;do{let _=c[v];const w=ju(e-f[_*2],2)+ju(r-f[_*2+1],2);if(w<g&&(g=w,d=_),v=v%3===2?v-2:v+1,c[v]!==t)break;if(v=l[v],v===-1){if(v=a[(s[t]+1)%a.length],v!==_&&ju(e-f[v*2],2)+ju(r-f[v*2+1],2)<g)return v;break}}while(v!==m);return d}render(t){const e=t==null?t=new El:void 0,{points:r,halfedges:i,triangles:a}=this;for(let s=0,l=i.length;s<l;++s){const c=i[s];if(c<s)continue;const f=a[s]*2,d=a[c]*2;t.moveTo(r[f],r[f+1]),t.lineTo(r[d],r[d+1])}return this.renderHull(t),e&&e.value()}renderPoints(t,e){e===void 0&&(!t||typeof t.moveTo!="function")&&(e=t,t=null),e=e==null?2:+e;const r=t==null?t=new El:void 0,{points:i}=this;for(let a=0,s=i.length;a<s;a+=2){const l=i[a],c=i[a+1];t.moveTo(l+e,c),t.arc(l,c,e,0,EW)}return r&&r.value()}renderHull(t){const e=t==null?t=new El:void 0,{hull:r,points:i}=this,a=r[0]*2,s=r.length;t.moveTo(i[a],i[a+1]);for(let l=1;l<s;++l){const c=2*r[l];t.lineTo(i[c],i[c+1])}return t.closePath(),e&&e.value()}hullPolygon(){const t=new dx;return this.renderHull(t),t.value()}renderTriangle(t,e){const r=e==null?e=new El:void 0,{points:i,triangles:a}=this,s=a[t*=3]*2,l=a[t+1]*2,c=a[t+2]*2;return e.moveTo(i[s],i[s+1]),e.lineTo(i[l],i[l+1]),e.lineTo(i[c],i[c+1]),e.closePath(),r&&r.value()}*trianglePolygons(){const{triangles:t}=this;for(let e=0,r=t.length/3;e<r;++e)yield this.trianglePolygon(e)}trianglePolygon(t){const e=new dx;return this.renderTriangle(t,e),e.value()}}function CW(n,t,e,r){const i=n.length,a=new Float64Array(i*2);for(let s=0;s<i;++s){const l=n[s];a[s*2]=t.call(r,l,s,n),a[s*2+1]=e.call(r,l,s,n)}return a}function*IW(n,t,e,r){let i=0;for(const a of n)yield t.call(r,a,i,n),yield e.call(r,a,i,n),++i}const hp=({svgRef:n,params:t,store:e,instance:r})=>{var k;const{disableVoronoi:i,voronoiMaxRadius:a,onItemClick:s}=t,l=Ut(e,gs),{axis:c,axisIds:f}=Ut(e,Jr),{axis:d,axisIds:g}=Ut(e,ti),m=Ut(e,lR),{series:v,seriesOrder:_}=((k=Ut(e,Vi))==null?void 0:k.scatter)??{},w=H.useRef({}),b=H.useRef(void 0),C=H.useRef(void 0),I=f[0],R=g[0];ki(()=>{e.update(O=>O.voronoi.isVoronoiEnabled===!i?O:X({},O,{voronoi:{isVoronoiEnabled:!i}}))},[e,i]),ki(()=>{if(m||_===void 0||v===void 0||i)return;w.current={};let O=[];_.forEach(S=>{const{data:D,xAxisId:V,yAxisId:B}=v[S],F=c[V??I].scale,j=d[B??R].scale,rt=hg(F),mt=hg(j),q=[],Z=[];for(let it=0;it<D.length;it+=1){const{x:gt,y:_t}=D[it],Mt=rt(gt),It=mt(_t);r.isPointInside(Mt,It)&&(q.push(Mt),q.push(It),Z.push(it))}w.current[S]={seriesId:S,seriesIndexes:Z,startIndex:O.length,endIndex:O.length+q.length},O=O.concat(q)}),b.current=new c_(O),C.current=void 0},[m,I,R,v,_,c,d,l,r,i]),H.useEffect(()=>{if(n.current===null||i)return;const O=n.current;function S(Z){const it=nx(O,Z);if(!r.isPointInside(it.x,it.y))return C.current=void 0,"outside-chart";if(!b.current)return"no-point-found";const gt=b.current.find(it.x,it.y,C.current);if(gt===void 0)return"no-point-found";C.current=gt;const _t=Object.values(w.current).find(Et=>2*gt>=Et.startIndex&&2*gt<Et.endIndex);if(_t===void 0)return"no-point-found";const Mt=(2*gt-w.current[_t.seriesId].startIndex)/2,It=w.current[_t.seriesId].seriesIndexes[Mt];if(a!==void 0){const Et=b.current.points[2*gt],zt=b.current.points[2*gt+1];if((Et-it.x)**2+(zt-it.y)**2>a**2)return"outside-voronoi-max-radius"}return{seriesId:_t.seriesId,dataIndex:It}}const D=r.addInteractionListener("moveEnd",Z=>{var it,gt;Z.detail.activeGestures.pan||((it=r.cleanInteraction)==null||it.call(r),(gt=r.clearHighlight)==null||gt.call(r))}),V=r.addInteractionListener("panEnd",Z=>{var it,gt;Z.detail.activeGestures.move||((it=r.cleanInteraction)==null||it.call(r),(gt=r.clearHighlight)==null||gt.call(r))}),B=r.addInteractionListener("quickPressEnd",Z=>{var it,gt;!Z.detail.activeGestures.move&&!Z.detail.activeGestures.pan&&((it=r.cleanInteraction)==null||it.call(r),(gt=r.clearHighlight)==null||gt.call(r))}),F=Z=>{var Mt,It,Et,zt,$t,pe;const it=S(Z.detail.srcEvent);if(it==="outside-chart"){(Mt=r.cleanInteraction)==null||Mt.call(r),(It=r.clearHighlight)==null||It.call(r);return}if(it==="outside-voronoi-max-radius"||it==="no-point-found"){(Et=r.removeItemInteraction)==null||Et.call(r),(zt=r.clearHighlight)==null||zt.call(r);return}const{seriesId:gt,dataIndex:_t}=it;($t=r.setItemInteraction)==null||$t.call(r,{type:"scatter",seriesId:gt,dataIndex:_t}),(pe=r.setHighlight)==null||pe.call(r,{seriesId:gt,dataIndex:_t})},j=r.addInteractionListener("tap",Z=>{const it=S(Z.detail.srcEvent);if(typeof it!="string"&&s){const{seriesId:gt,dataIndex:_t}=it;s(Z.detail.srcEvent,{type:"scatter",seriesId:gt,dataIndex:_t})}}),rt=r.addInteractionListener("move",F),mt=r.addInteractionListener("pan",F),q=r.addInteractionListener("quickPress",F);return()=>{j.cleanup(),rt.cleanup(),D.cleanup(),mt.cleanup(),V.cleanup(),q.cleanup(),B.cleanup()}},[n,d,c,a,s,i,l,r]);const M=io(()=>{e.update(O=>X({},O,{voronoi:X({},O.voronoi,{isVoronoiEnabled:!0})}))}),N=io(()=>{e.update(O=>X({},O,{voronoi:X({},O.voronoi,{isVoronoiEnabled:!1})}))});return{instance:{enableVoronoi:M,disableVoronoi:N}}};hp.getDefaultizedParams=({params:n})=>X({},n,{disableVoronoi:n.disableVoronoi??!n.series.some(t=>t.type==="scatter")});hp.getInitialState=n=>({voronoi:{isVoronoiEnabled:!n.disableVoronoi}});hp.params={disableVoronoi:!0,voronoiMaxRadius:!0,onItemClick:!0};const E6=[pd,Bc,Lc,Ul,hp],RW=["children","localeText","plugins","seriesConfig","slots","slotProps"],DW=n=>{const t=Ai({props:n,name:"MuiChartDataProvider"}),{children:e,localeText:r,plugins:i=E6,seriesConfig:a,slots:s,slotProps:l}=t,c=_e(t,RW),f=Hh(),d={plugins:i,seriesConfig:a,pluginParams:X({theme:f.palette.mode},c)};return{children:e,localeText:r,chartProviderProps:d,slots:s,slotProps:l}};function w6(n){const{children:t,localeText:e,chartProviderProps:r,slots:i,slotProps:a}=DW(n);return A.jsx(PG,X({},r,{children:A.jsx(F$,{localeText:e,children:A.jsx(lW,{slots:i,slotProps:a,defaultSlots:sW,children:t})})}))}function oC(n){const{isReversed:t,gradientId:e,size:r,direction:i,scale:a,colorMap:s}=n;return r<=0?null:A.jsx("linearGradient",{id:e,x1:"0",x2:"0",y1:"0",y2:"0",[`${i}${t?1:2}`]:`${r}px`,gradientUnits:"userSpaceOnUse",children:s.thresholds.map((l,c)=>{const f=a(l);if(f===void 0)return null;const d=t?1-f/r:f/r;return Number.isNaN(d)?null:A.jsxs(H.Fragment,{children:[A.jsx("stop",{offset:d,stopColor:s.colors[c],stopOpacity:1}),A.jsx("stop",{offset:d,stopColor:s.colors[c+1],stopOpacity:1})]},l.toString()+c)})})}const OW=10;function lC(n){const{gradientUnits:t,isReversed:e,gradientId:r,size:i,direction:a,scale:s,colorScale:l,colorMap:c}=n,f=[c.min??0,c.max??100],d=f.map(s).filter(_=>_!==void 0);if(d.length!==2)return null;const g=typeof f[0]=="number"?xe(f[0],f[1]):V2(f[0],f[1]),m=Math.round((Math.max(...d)-Math.min(...d))/OW),v=`${f[0]}-${f[1]}-`;return A.jsx("linearGradient",{id:r,x1:"0",x2:"0",y1:"0",y2:"0",[`${a}${e?1:2}`]:t==="objectBoundingBox"?1:`${i}px`,gradientUnits:t??"userSpaceOnUse",children:Array.from({length:m+1},(_,w)=>{const b=g(w/m);if(b===void 0)return null;const C=s(b);if(C===void 0)return null;const I=e?1-C/i:C/i,R=l(b);return R===null?null:A.jsx("stop",{offset:I,stopColor:R,stopOpacity:1},v+w)})})}const MW=10,NW=n=>n?{x1:"1",x2:"0",y1:"0",y2:"0"}:{x1:"0",x2:"1",y1:"0",y2:"0"};function sy(n){const{isReversed:t,gradientId:e,colorScale:r,colorMap:i}=n,a=[i.min??0,i.max??100],s=typeof a[0]=="number"?xe(a[0],a[1]):V2(a[0],a[1]),l=MW,c=`${a[0]}-${a[1]}-`;return A.jsx("linearGradient",X({id:e},NW(t),{gradientUnits:"objectBoundingBox",children:Array.from({length:l+1},(f,d)=>{const g=d/l,m=s(g);if(m===void 0)return null;const v=r(m);return v===null?null:A.jsx("stop",{offset:g,stopColor:v,stopOpacity:1},c+d)})}))}function PW(){const{top:n,height:t,bottom:e,left:r,width:i,right:a}=Ei(),s=n+t+e,l=r+i+a,c=d$(),f=g$(),{xAxis:d,xAxisIds:g}=vs(),{yAxis:m,yAxisIds:v}=Do(),{zAxis:_,zAxisIds:w}=i_(),b=v.filter(R=>m[R].colorMap!==void 0),C=g.filter(R=>d[R].colorMap!==void 0),I=w.filter(R=>_[R].colorMap!==void 0);return b.length===0&&C.length===0&&I.length===0?null:A.jsxs("defs",{children:[b.map(R=>{const M=c(R),N=f(R),{colorMap:k,scale:O,colorScale:S,reverse:D}=m[R];return(k==null?void 0:k.type)==="piecewise"?A.jsx(oC,{isReversed:!D,scale:O,colorMap:k,size:s,gradientId:M,direction:"y"},M):(k==null?void 0:k.type)==="continuous"?A.jsxs(H.Fragment,{children:[A.jsx(lC,{isReversed:!D,scale:O,colorScale:S,colorMap:k,size:s,gradientId:M,direction:"y"}),A.jsx(sy,{isReversed:D,colorScale:S,colorMap:k,gradientId:N})]},M):null}),C.map(R=>{const M=c(R),N=f(R),{colorMap:k,scale:O,reverse:S,colorScale:D}=d[R];return(k==null?void 0:k.type)==="piecewise"?A.jsx(oC,{isReversed:S,scale:O,colorMap:k,size:l,gradientId:M,direction:"x"},M):(k==null?void 0:k.type)==="continuous"?A.jsxs(H.Fragment,{children:[A.jsx(lC,{isReversed:S,scale:O,colorScale:D,colorMap:k,size:l,gradientId:M,direction:"x"}),A.jsx(sy,{isReversed:S,colorScale:D,colorMap:k,gradientId:N})]},M):null}),I.map(R=>{const M=f(R),{colorMap:N,colorScale:k}=_[R];return(N==null?void 0:N.type)==="continuous"?A.jsx(sy,{colorScale:k,colorMap:N,gradientId:M},M):null})]})}const kW=["children","className","title","desc"],LW=un("svg",{name:"MuiChartsSurface",slot:"Root"})(({ownerState:n})=>({width:n.width??"100%",height:n.height??"100%",display:"flex",position:"relative",flexDirection:"column",alignItems:"center",justifyContent:"center",overflow:"hidden",touchAction:"pan-y",userSelect:"none"})),b6=H.forwardRef(function(t,e){const r=Ve(),{width:i,height:a}=Ut(r,qF),{width:s,height:l}=Ut(r,x4),c=a_(),f=pC(c,e),d=Ai({props:t,name:"MuiChartsSurface"}),{children:g,className:m,title:v,desc:_}=d,w=_e(d,kW),b=a>0&&i>0;return A.jsxs(LW,X({ownerState:{width:s,height:l},viewBox:`0 0 ${i} ${a}`,className:m},w,{ref:f,children:[v&&A.jsx("title",{children:v}),_&&A.jsx("desc",{children:_}),A.jsx(PW,{}),b&&g]}))}),BW=["width","height","margin","children","series","colors","dataset","desc","onAxisClick","highlightedAxis","onHighlightedAxisChange","disableVoronoi","voronoiMaxRadius","onItemClick","disableAxisListener","highlightedItem","onHighlightChange","sx","title","xAxis","yAxis","zAxis","rotationAxis","radiusAxis","skipAnimation","seriesConfig","plugins","localeText","slots","slotProps","experimentalFeatures"],S6=(n,t)=>{const e=n,{width:r,height:i,margin:a,children:s,series:l,colors:c,dataset:f,desc:d,onAxisClick:g,highlightedAxis:m,onHighlightedAxisChange:v,disableVoronoi:_,voronoiMaxRadius:w,onItemClick:b,disableAxisListener:C,highlightedItem:I,onHighlightChange:R,sx:M,title:N,xAxis:k,yAxis:O,zAxis:S,rotationAxis:D,radiusAxis:V,skipAnimation:B,seriesConfig:F,plugins:j,localeText:rt,slots:mt,slotProps:q,experimentalFeatures:Z}=e,it=_e(e,BW),gt=X({title:N,desc:d,sx:M,ref:t},it);return{chartDataProviderProps:{margin:a,series:l,colors:c,dataset:f,disableAxisListener:C,highlightedItem:I,onHighlightChange:R,onAxisClick:g,highlightedAxis:m,onHighlightedAxisChange:v,disableVoronoi:_,voronoiMaxRadius:w,onItemClick:b,xAxis:k,yAxis:O,zAxis:S,rotationAxis:D,radiusAxis:V,skipAnimation:B,width:r,height:i,localeText:rt,seriesConfig:F,experimentalFeatures:Z,plugins:j??E6,slots:mt,slotProps:q},chartsSurfaceProps:gt,children:s}},VW=(n,t)=>n==="vertical"?(t==null?void 0:t.horizontal)==="start"?"row":"row-reverse":(t==null?void 0:t.vertical)==="bottom"?"column-reverse":"column",FW=(n,t)=>{if(n==="vertical"){if((t==null?void 0:t.vertical)==="top")return"flex-start";if((t==null?void 0:t.vertical)==="bottom")return"flex-end"}if(n==="horizontal"){if((t==null?void 0:t.horizontal)==="start")return"flex-start";if((t==null?void 0:t.horizontal)==="end")return"flex-end"}return"center"},jW=un("div",{name:"MuiChartsWrapper",slot:"Root",shouldForwardProp:n=>sD(n)&&n!=="extendVertically"})(({ownerState:n})=>({display:"flex",flexDirection:VW(n.legendDirection,n.legendPosition),flex:1,justifyContent:"center",alignItems:FW(n.legendDirection,n.legendPosition),variants:[{props:{extendVertically:!0},style:{height:"100%"}}]}));function T6(n){const{children:t,sx:e,extendVertically:r}=n,i=P$(),a=Ve(),{height:s}=Ut(a,x4);return A.jsx(jW,{ref:i,ownerState:n,sx:e,extendVertically:r??s===void 0,children:t})}const oy=H.forwardRef(function(t,e){var R,M,N,k;const r=Ai({props:t,name:"MuiBarChart"}),{chartsWrapperProps:i,chartContainerProps:a,barPlotProps:s,gridProps:l,clipPathProps:c,clipPathGroupProps:f,overlayProps:d,chartsAxisProps:g,axisHighlightProps:m,legendProps:v,children:_}=rW(r),{chartDataProviderProps:w,chartsSurfaceProps:b}=S6(a,e),C=((R=r.slots)==null?void 0:R.tooltip)??m6,I=(M=r.slots)==null?void 0:M.toolbar;return A.jsx(w6,X({},w,{children:A.jsxs(T6,X({},i,{children:[r.showToolbar&&I?A.jsx(I,X({},(N=r.slotProps)==null?void 0:N.toolbar)):null,!r.hideLegend&&A.jsx(v6,X({},v)),A.jsxs(b6,X({},b,{children:[A.jsx(Rq,X({},l)),A.jsxs("g",X({},f,{children:[A.jsx(XX,X({},s)),A.jsx(A6,X({},d)),A.jsx(pX,X({},m))]})),A.jsx(Eq,X({},g)),A.jsx(j$,X({},c)),_]})),!r.loading&&A.jsx(C,X({},(k=r.slotProps)==null?void 0:k.tooltip))]}))}))}),UW=["classes","color","dataIndex","id","isFaded","isHighlighted","onClick","cornerRadius","startAngle","endAngle","innerRadius","outerRadius","paddingAngle","skipAnimation"];function zW(n){return Zr("MuiPieArc",n)}Qr("MuiPieArc",["root","highlighted","faded","series"]);const HW=n=>{const{classes:t,id:e,isFaded:r,isHighlighted:i,dataIndex:a}=n,s={root:["root",`series-${e}`,`data-index-${a}`,i&&"highlighted",r&&"faded"]};return kr(s,zW,t)},GW=un("path",{name:"MuiPieArc",slot:"Root",overridesResolver:(n,t)=>t.arc})(({theme:n})=>({stroke:(n.vars||n).palette.background.paper,transitionProperty:"opacity, fill, filter",transitionDuration:`${s_}ms`,transitionTimingFunction:zR})),$W=H.forwardRef(function(t,e){const{classes:r,color:i,dataIndex:a,id:s,isFaded:l,isHighlighted:c,onClick:f,cornerRadius:d,startAngle:g,endAngle:m,innerRadius:v,outerRadius:_,paddingAngle:w,skipAnimation:b}=t,C=_e(t,UW),I={id:s,dataIndex:a,classes:r,color:i,isFaded:l,isHighlighted:c},R=HW(I),M=y6({type:"pie",seriesId:s,dataIndex:a}),N=O$({cornerRadius:d,startAngle:g,endAngle:m,innerRadius:v,outerRadius:_,paddingAngle:w,skipAnimation:b,ref:e});return A.jsx(GW,X({onClick:f,cursor:f?"pointer":"unset",ownerState:I,className:R.root,fill:I.color,opacity:I.isFaded?.3:1,filter:I.isHighlighted?"brightness(120%)":"none",strokeWidth:1,strokeLinejoin:"round","data-highlighted":I.isHighlighted||void 0,"data-faded":I.isFaded||void 0},C,M,N))});function C6(n){const{id:t,data:e,faded:r,highlighted:i,paddingAngle:a=0,innerRadius:s=0,arcLabelRadius:l,outerRadius:c,cornerRadius:f=0}=n,{isFaded:d,isHighlighted:g}=c$();return H.useMemo(()=>e.map((v,_)=>{const w={seriesId:t,dataIndex:_},b=g(w),C=!b&&d(w),I=X({additionalRadius:0},C&&r||b&&i||{}),R=Math.max(0,tc(I.paddingAngle??a)),M=Math.max(0,I.innerRadius??s),N=Math.max(0,I.outerRadius??c+I.additionalRadius),k=I.cornerRadius??f,O=I.arcLabelRadius??l??(M+N)/2;return X({},v,I,{dataIndex:_,isFaded:C,isHighlighted:b,paddingAngle:R,innerRadius:M,outerRadius:N,cornerRadius:k,arcLabelRadius:O})}),[f,s,c,a,l,e,r,i,d,g,t])}const qW=["slots","slotProps","innerRadius","outerRadius","cornerRadius","paddingAngle","id","highlighted","faded","data","onItemClick","skipAnimation"];function XW(n){const{slots:t,slotProps:e,innerRadius:r=0,outerRadius:i,cornerRadius:a=0,paddingAngle:s=0,id:l,highlighted:c,faded:f={additionalRadius:-5},data:d,onItemClick:g,skipAnimation:m}=n,v=_e(n,qW),_=C6({innerRadius:r,outerRadius:i,cornerRadius:a,paddingAngle:s,id:l,highlighted:c,faded:f,data:d});if(d.length===0)return null;const w=(t==null?void 0:t.pieArc)??$W;return A.jsx("g",X({},v,{children:_.map((b,C)=>A.jsx(w,X({startAngle:b.startAngle,endAngle:b.endAngle,paddingAngle:b.paddingAngle,innerRadius:b.innerRadius,outerRadius:b.outerRadius,cornerRadius:b.cornerRadius,skipAnimation:m??!1,id:l,color:b.color,dataIndex:C,isFaded:b.isFaded,isHighlighted:b.isHighlighted,onClick:g&&(I=>{g(I,{type:"pie",seriesId:l,dataIndex:C},b)})},e==null?void 0:e.pieArc),b.dataIndex))}))}const WW=["id","classes","color","startAngle","endAngle","paddingAngle","arcLabelRadius","innerRadius","outerRadius","cornerRadius","formattedArcLabel","isHighlighted","isFaded","style","skipAnimation"];function YW(n){return Zr("MuiPieArcLabel",n)}const KW=Qr("MuiPieArcLabel",["root","highlighted","faded","animate","series"]),ZW=n=>{const{classes:t,id:e,isFaded:r,isHighlighted:i,skipAnimation:a}=n,s={root:["root",`series-${e}`,i&&"highlighted",r&&"faded",!a&&"animate"]};return kr(s,YW,t)},QW=un("text",{name:"MuiPieArcLabel",slot:"Root"})(({theme:n})=>({fill:(n.vars||n).palette.text.primary,textAnchor:"middle",dominantBaseline:"middle",pointerEvents:"none",animationName:"animate-opacity",animationDuration:"0s",animationTimingFunction:zR,[`&.${KW.animate}`]:{animationDuration:`${s_}ms`},"@keyframes animate-opacity":{from:{opacity:0}}})),JW=H.forwardRef(function(t,e){const{id:r,classes:i,color:a,startAngle:s,endAngle:l,paddingAngle:c,arcLabelRadius:f,cornerRadius:d,formattedArcLabel:g,isHighlighted:m,isFaded:v,skipAnimation:_}=t,w=_e(t,WW),C=ZW({id:r,classes:i,isFaded:v,isHighlighted:m,skipAnimation:_}),I=N$({cornerRadius:d,startAngle:s,endAngle:l,innerRadius:f,outerRadius:f,paddingAngle:c,skipAnimation:_,ref:e});return A.jsx(QW,X({className:C.root},w,I,{children:g}))}),tY=["arcLabel","arcLabelMinAngle","arcLabelRadius","cornerRadius","data","faded","highlighted","id","innerRadius","outerRadius","paddingAngle","skipAnimation","slotProps","slots"],eY=180/Math.PI;function nY(n,t,e){var i;if(!n||(e.endAngle-e.startAngle)*eY<t)return null;switch(n){case"label":return Kr(e.label,"arc");case"value":return(i=e.value)==null?void 0:i.toString();case"formattedValue":return e.formattedValue;default:return n(X({},e,{label:Kr(e.label,"arc")}))}}function rY(n){const{arcLabel:t,arcLabelMinAngle:e=0,arcLabelRadius:r,cornerRadius:i=0,data:a,faded:s={additionalRadius:-5},highlighted:l,id:c,innerRadius:f,outerRadius:d,paddingAngle:g=0,skipAnimation:m,slotProps:v,slots:_}=n,w=_e(n,tY),b=C6({innerRadius:f,outerRadius:d,arcLabelRadius:r,cornerRadius:i,paddingAngle:g,id:c,highlighted:l,faded:s,data:a});if(a.length===0)return null;const C=(_==null?void 0:_.pieArcLabel)??JW;return A.jsx("g",X({},w,{children:b.map(I=>A.jsx(C,X({startAngle:I.startAngle,endAngle:I.endAngle,paddingAngle:I.paddingAngle,innerRadius:I.innerRadius,outerRadius:I.outerRadius,arcLabelRadius:I.arcLabelRadius,cornerRadius:I.cornerRadius,id:c,color:I.color,isFaded:I.isFaded,isHighlighted:I.isHighlighted,formattedArcLabel:nY(t,e,I),skipAnimation:m??!1},v==null?void 0:v.pieArcLabel),I.id??I.dataIndex))}))}function vl(n,t){if(typeof n=="number")return n;if(n==="100%")return t;if(n.endsWith("%")){const e=Number.parseFloat(n.slice(0,n.length-1));if(!Number.isNaN(e))return e*t/100}if(n.endsWith("px")){const e=Number.parseFloat(n.slice(0,n.length-2));if(!Number.isNaN(e))return e}throw new Error(`MUI X Charts: Received an unknown value "${n}". It should be a number, or a string with a percentage value.`)}function uC(n,t){const{height:e,width:r}=t,{cx:i,cy:a}=n,s=Math.min(r,e)/2,l=vl(i??"50%",r),c=vl(a??"50%",e);return{cx:l,cy:c,availableRadius:s}}function iY(n){return Zr("MuiPieChart",n)}Qr("MuiPieChart",["root","series","seriesLabels"]);const aY=n=>kr({root:["root"],series:["series"],seriesLabels:["seriesLabels"]},iY,n);function sY(n){const{skipAnimation:t,slots:e,slotProps:r,onItemClick:i}=n,a=QG(),{left:s,top:l,width:c,height:f}=Ei(),d=_6(t),g=aY();if(a===void 0)return null;const{series:m,seriesOrder:v}=a;return A.jsxs("g",{children:[v.map(_=>{const{innerRadius:w,outerRadius:b,cornerRadius:C,paddingAngle:I,data:R,cx:M,cy:N,highlighted:k,faded:O}=m[_],{cx:S,cy:D,availableRadius:V}=uC({cx:M,cy:N},{width:c,height:f}),B=vl(b??V,V),F=vl(w??0,V);return A.jsx("g",{className:g.series,transform:`translate(${s+S}, ${l+D})`,"data-series":_,children:A.jsx(XW,{innerRadius:F,outerRadius:B,cornerRadius:C,paddingAngle:I,id:_,data:R,skipAnimation:d,highlighted:k,faded:O,onItemClick:i,slots:e,slotProps:r})},_)}),v.map(_=>{const{innerRadius:w,outerRadius:b,arcLabelRadius:C,cornerRadius:I,paddingAngle:R,arcLabel:M,arcLabelMinAngle:N,data:k,cx:O,cy:S}=m[_],{cx:D,cy:V,availableRadius:B}=uC({cx:O,cy:S},{width:c,height:f}),F=vl(b??B,B),j=vl(w??0,B),rt=C===void 0?(F+j)/2:vl(C,B);return A.jsx("g",{className:g.seriesLabels,transform:`translate(${s+D}, ${l+V})`,"data-series":_,children:A.jsx(rY,{innerRadius:j,outerRadius:F??B,arcLabelRadius:rt,cornerRadius:I,paddingAngle:R,id:_,data:k,skipAnimation:d,arcLabel:M,arcLabelMinAngle:N,slots:e,slotProps:r})},_)})]})}const oY=[Lc,Ul],lY=["series","width","height","margin","colors","sx","skipAnimation","hideLegend","children","slots","slotProps","onItemClick","loading","highlightedItem","onHighlightChange","className","showToolbar"],cC=H.forwardRef(function(t,e){var B,F,j,rt,mt,q,Z,it;const r=Ai({props:t,name:"MuiPieChart"}),{series:i,width:a,height:s,margin:l,colors:c,sx:f,skipAnimation:d,hideLegend:g,children:m,slots:v,slotProps:_,onItemClick:w,loading:b,highlightedItem:C,onHighlightChange:I,className:R,showToolbar:M}=r,N=_e(r,lY),k=_4(l,xj),{chartDataProviderProps:O,chartsSurfaceProps:S}=S6(X({},N,{series:i.map(gt=>X({type:"pie"},gt)),width:a,height:s,margin:k,colors:c,highlightedItem:C,onHighlightChange:I,className:R,skipAnimation:d,plugins:oY}),e),D=(v==null?void 0:v.tooltip)??m6,V=(B=r.slots)==null?void 0:B.toolbar;return A.jsx(w6,X({},O,{children:A.jsxs(T6,{legendPosition:(j=(F=r.slotProps)==null?void 0:F.legend)==null?void 0:j.position,legendDirection:((mt=(rt=r==null?void 0:r.slotProps)==null?void 0:rt.legend)==null?void 0:mt.direction)??"vertical",sx:f,children:[M&&V?A.jsx(V,X({},(q=r.slotProps)==null?void 0:q.toolbar)):null,!g&&A.jsx(v6,{direction:((it=(Z=r==null?void 0:r.slotProps)==null?void 0:Z.legend)==null?void 0:it.direction)??"vertical",slots:v,slotProps:_}),A.jsxs(b6,X({},S,{children:[A.jsx(sY,{slots:v,slotProps:_,onItemClick:w}),A.jsx(A6,{loading:b,slots:v,slotProps:_}),m]})),!b&&A.jsx(D,X({trigger:"item"},_==null?void 0:_.tooltip))]})}))});function uY(){const{loading:n,error:t,summary:e,tagStats:r,monthlyFinished:i,monthlyAddedBooks:a,monthlyMemos:s,topAuthors:l,topPublishers:c,statusDistribution:f}=lF(),d=e&&(e.totalBooks>0||e.finishedBooks>0||e.readingBooks>0);return A.jsxs(vt,{sx:{maxWidth:900,mx:"auto",mb:10},children:[A.jsx(Hg,{title:"統計",subtitle:"あなたの読書活動を可視化"}),A.jsxs(vt,{sx:{p:2},children:[n&&A.jsxs(vt,{sx:{display:"flex",alignItems:"center",gap:1,mb:2},children:[A.jsx(px,{size:20}),A.jsx(st,{variant:"body2",children:"読み込み中..."})]}),t&&A.jsx(st,{color:"error",sx:{mb:2},children:t}),!n&&!t&&!d&&A.jsx(pn,{sx:{mb:2},children:A.jsxs(mn,{sx:{textAlign:"center",py:4},children:[A.jsx(st,{variant:"h6",color:"text.secondary",gutterBottom:!0,children:"📚 読書データがありません"}),A.jsx(st,{variant:"body2",color:"text.secondary",children:"本を追加して読書を始めると、ここに統計が表示されます"})]})}),d&&A.jsxs(A.Fragment,{children:[A.jsxs(te,{container:!0,spacing:2,sx:{mb:2},children:[A.jsx(te,{item:!0,xs:12,sm:4,children:A.jsx(pn,{"data-testid":"stats-total-books",children:A.jsxs(mn,{children:[A.jsx(st,{variant:"h6",children:"総冊数"}),A.jsx(st,{variant:"h4",sx:{fontWeight:"bold"},children:(e==null?void 0:e.totalBooks)??"-"})]})})}),A.jsx(te,{item:!0,xs:12,sm:4,children:A.jsx(pn,{"data-testid":"stats-finished-books",children:A.jsxs(mn,{children:[A.jsx(st,{variant:"h6",children:"読了冊数"}),A.jsx(st,{variant:"h4",sx:{fontWeight:"bold"},children:(e==null?void 0:e.finishedBooks)??"-"})]})})}),A.jsx(te,{item:!0,xs:12,sm:4,children:A.jsx(pn,{"data-testid":"stats-reading-books",children:A.jsxs(mn,{children:[A.jsx(st,{variant:"h6",children:"読書中冊数"}),A.jsx(st,{variant:"h4",sx:{fontWeight:"bold"},children:(e==null?void 0:e.readingBooks)??"-"})]})})})]}),!!e&&A.jsx(pn,{sx:{mb:2},"data-testid":"chart-status-pie",children:A.jsxs(mn,{children:[A.jsx(st,{variant:"h6",sx:{mb:1},children:"ステータス内訳"}),A.jsx(cC,{height:220,series:[{data:[{id:"finished",label:"読了",value:(f==null?void 0:f.finished)??0},{id:"reading",label:"読書中",value:(f==null?void 0:f.reading)??0}],innerRadius:30,paddingAngle:2}]})]})}),A.jsx(d1,{sx:{my:2}}),A.jsx(st,{variant:"h6",sx:{mb:1},children:"月別読了冊数（直近12ヶ月）"}),A.jsx(pn,{sx:{mb:2},"data-testid":"chart-monthly-finished",children:A.jsx(mn,{children:A.jsx(oy,{xAxis:[{scaleType:"band",data:(i??[]).map(g=>g.key)}],series:[{data:(i??[]).map(g=>g.count),label:"読了冊数"}],height:260})})}),A.jsxs(te,{container:!0,spacing:2,sx:{mb:2},children:[A.jsxs(te,{item:!0,xs:12,md:6,children:[A.jsx(st,{variant:"subtitle1",sx:{mb:1},children:"月別追加冊数（直近12ヶ月）"}),A.jsx(pn,{"data-testid":"chart-monthly-added",children:A.jsx(mn,{children:A.jsx(oy,{xAxis:[{scaleType:"band",data:(a??[]).map(g=>g.key)}],series:[{data:(a??[]).map(g=>g.count),label:"追加冊数",color:"#42a5f5"}],height:220})})})]}),A.jsxs(te,{item:!0,xs:12,md:6,children:[A.jsx(st,{variant:"subtitle1",sx:{mb:1},children:"月別メモ数（直近12ヶ月）"}),A.jsx(pn,{"data-testid":"chart-monthly-memos",children:A.jsx(mn,{children:A.jsx(oy,{xAxis:[{scaleType:"band",data:(s??[]).map(g=>g.key)}],series:[{data:(s??[]).map(g=>g.count),label:"メモ数",color:"#9c27b0"}],height:220})})})]})]}),A.jsx(d1,{sx:{my:2}}),A.jsx(st,{variant:"h6",sx:{mb:1},children:"タグ使用頻度（上位）"}),!!(r!=null&&r.length)&&A.jsx(pn,{sx:{mb:2},"data-testid":"chart-tag-pie",children:A.jsx(mn,{children:A.jsx(cC,{height:260,series:[{data:r.slice(0,6).map(g=>({id:g.tag,label:g.tag,value:g.totalCount})),innerRadius:40,paddingAngle:2}]})})}),A.jsxs(te,{container:!0,spacing:2,children:[((r==null?void 0:r.slice(0,10))??[]).map(g=>A.jsx(te,{item:!0,xs:12,sm:6,children:A.jsx(pn,{"data-testid":`tag-stat-${g.tag}`,children:A.jsxs(mn,{children:[A.jsx(st,{variant:"subtitle1",sx:{fontWeight:600},children:g.tag}),A.jsxs(st,{variant:"body2",color:"text.secondary",children:["本: ",g.bookCount," / メモ: ",g.memoCount," / 合計: ",g.totalCount]})]})})},g.tag)),(!r||r.length===0)&&!n&&A.jsx(te,{item:!0,xs:12,children:A.jsx(st,{variant:"body2",color:"text.secondary",children:"タグデータがありません。"})})]}),A.jsx(d1,{sx:{my:2}}),A.jsx(st,{variant:"h6",sx:{mb:1},children:"著者トップ"}),A.jsxs(te,{container:!0,spacing:2,sx:{mb:2},children:[((l==null?void 0:l.slice(0,10))??[]).map(g=>A.jsx(te,{item:!0,xs:12,sm:6,children:A.jsx(pn,{"data-testid":`author-top-${g.author}`,children:A.jsxs(mn,{children:[A.jsx(st,{variant:"subtitle1",sx:{fontWeight:600},children:g.author}),A.jsxs(st,{variant:"body2",color:"text.secondary",children:["冊数: ",g.total]})]})})},g.author)),(!l||l.length===0)&&!n&&A.jsx(te,{item:!0,xs:12,children:A.jsx(st,{variant:"body2",color:"text.secondary",children:"著者データがありません。"})})]}),A.jsx(st,{variant:"h6",sx:{mb:1},children:"出版社トップ"}),A.jsxs(te,{container:!0,spacing:2,children:[((c==null?void 0:c.slice(0,10))??[]).map(g=>A.jsx(te,{item:!0,xs:12,sm:6,children:A.jsx(pn,{"data-testid":`publisher-top-${g.publisher}`,children:A.jsxs(mn,{children:[A.jsx(st,{variant:"subtitle1",sx:{fontWeight:600},children:g.publisher}),A.jsxs(st,{variant:"body2",color:"text.secondary",children:["冊数: ",g.total]})]})})},g.publisher)),(!c||c.length===0)&&!n&&A.jsx(te,{item:!0,xs:12,children:A.jsx(st,{variant:"body2",color:"text.secondary",children:"出版社データがありません。"})})]})]})]})]})}function cY(){const n=_C({onSwipedLeft:()=>alert("左スワイプ!"),onSwipedRight:()=>alert("右スワイプ!"),preventDefaultTouchmoveEvent:!0,trackMouse:!0});return A.jsxs("div",{style:{maxWidth:400,margin:"40px auto"},children:[A.jsx("h2",{children:"react-swipeable サンプル"}),A.jsx("div",{...n,style:{background:"#fff",border:"1px solid #ccc",padding:48,fontSize:18,textAlign:"center",userSelect:"none"},children:"このエリアを左右にスワイプ（またはドラッグ）してみてください"})]})}const fY=()=>{const{isOnline:n,isInstallable:t,isInstalled:e,installApp:r,shouldShowInstallPrompt:i,shouldShowManualInstallGuide:a,recordInstallPromptDismiss:s}=d2(),[l,c]=H.useState(!1),[f,d]=H.useState(!1),[g,m]=H.useState(!1),[v,_]=H.useState(!1);H.useEffect(()=>{t&&!e&&i?m(!0):t&&!e&&c(!0)},[t,e,i]),H.useEffect(()=>{a&&!e&&_(!0)},[a,e]),H.useEffect(()=>{d(!n)},[n]);const w=async()=>{try{await r(),c(!1),m(!1)}catch(N){console.error("Installation failed:",N)}},b=()=>{c(!1),s&&s()},C=()=>{m(!1),s&&s()},I=()=>{d(!1)},R=()=>{_(!1),s&&s()},M=[{icon:A.jsx(uD,{}),title:"高速起動",description:"アプリのように素早く起動"},{icon:A.jsx(cD,{}),title:"オフライン対応",description:"インターネットなしでも利用可能"},{icon:A.jsx(fD,{}),title:"ホーム画面に追加",description:"いつでも簡単にアクセス"}];return A.jsxs(A.Fragment,{children:[A.jsx(qf,{open:l,anchorOrigin:{vertical:"bottom",horizontal:"center"},sx:{mb:8},children:A.jsx(oo,{severity:"info",action:A.jsxs(vt,{sx:{display:"flex",alignItems:"center",gap:1},children:[A.jsx(qt,{color:"inherit",size:"small",startIcon:A.jsx(R1,{}),onClick:w,"data-testid":"pwa-install-button",variant:"contained",sx:{backgroundColor:"primary.main",color:"white","&:hover":{backgroundColor:"primary.dark"}},children:"インストール"}),A.jsx(Xr,{"aria-label":"close",color:"inherit",size:"small",onClick:b,children:A.jsx(z0,{fontSize:"inherit"})})]}),sx:{width:"100%"},children:A.jsx(st,{variant:"body2",children:"BookMemoをホーム画面に追加して、より快適にご利用いただけます"})})}),A.jsx(qf,{open:g,anchorOrigin:{vertical:"bottom",horizontal:"center"},sx:{mb:8,width:"100%",maxWidth:"600px"},children:A.jsx(pn,{sx:{width:"100%",boxShadow:3},children:A.jsxs(mn,{sx:{p:2},children:[A.jsxs(vt,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",mb:2},children:[A.jsx(st,{variant:"h6",component:"h2",sx:{fontWeight:"bold"},children:"📱 BookMemoをアプリとしてインストール"}),A.jsx(Xr,{size:"small",onClick:C,sx:{mt:-.5},children:A.jsx(z0,{})})]}),A.jsx(st,{variant:"body2",sx:{mb:2,color:"text.secondary"},children:"より快適な読書メモ管理体験をお届けします"}),A.jsx(bh,{direction:"row",spacing:1,sx:{mb:2,flexWrap:"wrap",gap:1},children:M.map((N,k)=>A.jsx(On,{icon:N.icon,label:N.title,size:"small",variant:"outlined",sx:{fontSize:"0.75rem"}},k))}),A.jsxs(vt,{sx:{display:"flex",gap:1,justifyContent:"flex-end"},children:[A.jsx(qt,{variant:"outlined",size:"small",onClick:C,children:"後で"}),A.jsx(qt,{variant:"contained",size:"small",startIcon:A.jsx(R1,{}),onClick:w,sx:{backgroundColor:"primary.main","&:hover":{backgroundColor:"primary.dark"}},children:"今すぐインストール"})]})]})})}),A.jsx(qf,{open:f,anchorOrigin:{vertical:"top",horizontal:"center"},children:A.jsx(oo,{severity:"warning",icon:A.jsx(oD,{}),action:A.jsx(Xr,{"aria-label":"close",color:"inherit",size:"small",onClick:I,children:A.jsx(z0,{fontSize:"inherit"})}),sx:{width:"100%"},children:A.jsx(st,{variant:"body2",children:"オフラインです。一部の機能が制限される場合があります"})})}),A.jsx(qf,{open:n&&f,anchorOrigin:{vertical:"top",horizontal:"center"},autoHideDuration:3e3,onClose:I,children:A.jsx(oo,{severity:"success",icon:A.jsx(lD,{}),sx:{width:"100%"},children:A.jsx(st,{variant:"body2",children:"オンラインに復帰しました"})})}),A.jsx(qf,{open:v,anchorOrigin:{vertical:"bottom",horizontal:"center"},sx:{mb:8,width:"100%",maxWidth:"600px"},children:A.jsx(pn,{sx:{width:"100%",boxShadow:3},children:A.jsxs(mn,{sx:{p:2},children:[A.jsxs(vt,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",mb:2},children:[A.jsx(st,{variant:"h6",component:"h2",sx:{fontWeight:"bold"},children:"📱 BookMemoをホーム画面に追加"}),A.jsx(Xr,{size:"small",onClick:R,sx:{mt:-.5},children:A.jsx(z0,{})})]}),A.jsx(st,{variant:"body2",sx:{mb:2,color:"text.secondary"},children:"iPhoneでBookMemoをアプリとして使用するには、以下の手順でホーム画面に追加してください："}),A.jsxs(vt,{sx:{mb:2},children:[A.jsx(st,{variant:"body2",sx:{fontWeight:"bold",mb:1},children:"1. 共有ボタンをタップ"}),A.jsx(st,{variant:"body2",sx:{mb:1,pl:2},children:"Safariの下部にある「共有」ボタン（□↑）をタップします"}),A.jsx(st,{variant:"body2",sx:{fontWeight:"bold",mb:1},children:"2. 「ホーム画面に追加」を選択"}),A.jsx(st,{variant:"body2",sx:{mb:1,pl:2},children:"共有メニューから「ホーム画面に追加」を選択します"}),A.jsx(st,{variant:"body2",sx:{fontWeight:"bold",mb:1},children:"3. 追加を確認"}),A.jsx(st,{variant:"body2",sx:{pl:2},children:"「追加」をタップしてホーム画面に追加します"})]}),A.jsx(bh,{direction:"row",spacing:1,sx:{mb:2,flexWrap:"wrap",gap:1},children:M.map((N,k)=>A.jsx(On,{icon:N.icon,label:N.title,size:"small",variant:"outlined",sx:{fontSize:"0.75rem"}},k))}),A.jsxs(vt,{sx:{display:"flex",gap:1,justifyContent:"flex-end"},children:[A.jsx(qt,{variant:"outlined",size:"small",onClick:R,children:"後で"}),A.jsx(qt,{variant:"contained",size:"small",onClick:R,sx:{backgroundColor:"primary.main","&:hover":{backgroundColor:"primary.dark"}},children:"手順を確認しました"})]})]})})})]})},hY=yC({palette:{primary:{main:"#1976d2"},secondary:{main:"#dc004e"}},typography:{h4:{fontSize:"1.5rem","@media (min-width:600px)":{fontSize:"2rem"}},h6:{fontSize:"1rem","@media (min-width:600px)":{fontSize:"1.1rem"}},body2:{fontSize:"0.8rem","@media (min-width:600px)":{fontSize:"0.9rem"}},caption:{fontSize:"0.7rem","@media (min-width:600px)":{fontSize:"0.8rem"}}},components:{MuiCard:{styleOverrides:{root:{height:"100%",display:"flex",flexDirection:"column"}}},MuiCardContent:{styleOverrides:{root:{flex:1,display:"flex",flexDirection:"column",padding:"12px","@media (min-width:600px)":{padding:"16px"}}}},MuiTextField:{styleOverrides:{root:{"& .MuiInputBase-root":{fontSize:"0.9rem","@media (min-width:600px)":{fontSize:"1rem"}}}}},MuiButton:{styleOverrides:{root:{fontSize:"0.9rem",padding:"8px 16px","@media (min-width:600px)":{fontSize:"1rem",padding:"10px 20px"}}}},MuiChip:{styleOverrides:{root:{fontSize:"0.7rem",height:"20px","@media (min-width:600px)":{fontSize:"0.8rem",height:"24px"}}}},MuiBottomNavigation:{styleOverrides:{root:{height:"64px","@media (min-width:600px)":{height:"72px"}}}},MuiBottomNavigationAction:{styleOverrides:{root:{fontSize:"0.7rem","@media (min-width:600px)":{fontSize:"0.8rem"}}}}}});function Uu({children:n}){const{user:t,loading:e}=qn();return e?A.jsx("div",{children:"Loading..."}):t?n:A.jsx(EC,{to:"/login"})}function dY(){const n=Gh(),t=AC(),[e,r]=H.useState(0);return H.useEffect(()=>{t.pathname.startsWith("/add")?r(1):t.pathname.startsWith("/tags")?r(2):t.pathname.startsWith("/stats")?r(3):t.pathname.startsWith("/mypage")?r(4):r(0)},[t.pathname]),A.jsxs(dD,{value:e,onChange:(i,a)=>{r(a),a===0&&n("/"),a===1&&n("/add"),a===2&&n("/tags"),a===3&&n("/stats"),a===4&&n("/mypage")},showLabels:!0,sx:{position:"fixed",bottom:0,left:0,right:0,zIndex:1e3,backgroundColor:"background.paper",borderTop:1,borderColor:"divider",height:{xs:"64px",sm:"72px"},"& .MuiBottomNavigationAction-root":{minWidth:{xs:"60px",sm:"80px"},padding:{xs:"6px 4px",sm:"8px 6px"}},"& .MuiBottomNavigationAction-label":{fontSize:{xs:"0.7rem",sm:"0.8rem"},marginTop:{xs:"2px",sm:"4px"}},"& .MuiBottomNavigationAction-iconOnly":{fontSize:{xs:"1.5rem",sm:"1.75rem"}}},children:[A.jsx(Xf,{label:"本一覧",icon:A.jsx(gD,{}),sx:{"&.Mui-selected":{color:"primary.main"}}}),A.jsx(Xf,{label:"本を追加",icon:A.jsx(pD,{}),sx:{"&.Mui-selected":{color:"primary.main"}}}),A.jsx(Xf,{label:"検索・タグ",icon:A.jsx(mD,{}),sx:{"&.Mui-selected":{color:"primary.main"}}}),A.jsx(Xf,{label:"統計",icon:A.jsx(vD,{}),sx:{"&.Mui-selected":{color:"primary.main"}}}),A.jsx(Xf,{label:"マイページ",icon:A.jsx(yD,{}),sx:{"&.Mui-selected":{color:"primary.main"}}})]})}function gY(){const n=AC(),{user:t}=qn(),e=n.pathname.startsWith("/login")||n.pathname.startsWith("/signup")||!t;return A.jsxs(A.Fragment,{children:[A.jsx(vt,{id:"app-scroll-container",sx:{height:"100vh",overflowY:"auto",WebkitOverflowScrolling:"touch",pb:e?0:{xs:"64px",sm:"72px"},background:`
            url('/paper-texture.jpg'),
            #f5f5dc
          `,backgroundSize:"100% auto, cover",backgroundRepeat:"repeat-y, no-repeat",backgroundPosition:"center top, center",backgroundAttachment:"fixed",minHeight:"100vh",width:"100%"},children:A.jsxs(wD,{children:[A.jsx(qa,{path:"/login",element:A.jsx(z7,{})}),A.jsx(qa,{path:"/signup",element:A.jsx(H7,{})}),A.jsx(qa,{path:"/",element:A.jsx(Uu,{children:A.jsx(X7,{})})}),A.jsx(qa,{path:"/add",element:A.jsx(Uu,{children:A.jsx(FV,{})})}),A.jsx(qa,{path:"/book/:id",element:A.jsx(Uu,{children:A.jsx(XV,{})})}),A.jsx(qa,{path:"/tags",element:A.jsx(Uu,{children:A.jsx(aF,{})})}),A.jsx(qa,{path:"/stats",element:A.jsx(Uu,{children:A.jsx(uY,{})})}),A.jsx(qa,{path:"/mypage",element:A.jsx(Uu,{children:A.jsx(cY,{})})}),A.jsx(qa,{path:"*",element:A.jsx(EC,{to:"/"})})]})}),!e&&A.jsx(dY,{})]})}function pY(){const[n,t]=H.useState("");return A.jsx(U7,{children:A.jsx(Lr.Provider,{value:{setGlobalError:t},children:A.jsx(ED,{basename:"/project-01-bookmemo",children:A.jsxs(xC,{theme:hY,children:[A.jsx(hD,{}),A.jsx(mY,{}),A.jsx(gY,{}),A.jsx(fY,{}),A.jsx($7,{open:!!n,message:n,onClose:()=>t("")})]})})})})}function mY(){const{registerServiceWorker:n}=d2();return H.useEffect(()=>{n()},[n]),null}const vY=yC({palette:{mode:"light",background:{default:"#f5f7fa",paper:"#fff"},primary:{main:"#1976d2"},secondary:{main:"#f50057"},text:{primary:"#222"}},typography:{fontFamily:"Segoe UI, Helvetica Neue, Arial, sans-serif",h1:{fontSize:"1.8rem","@media (min-width:600px)":{fontSize:"2.5rem"}},h2:{fontSize:"1.5rem","@media (min-width:600px)":{fontSize:"2rem"}},h3:{fontSize:"1.3rem","@media (min-width:600px)":{fontSize:"1.6rem"}},h4:{fontSize:"1.1rem","@media (min-width:600px)":{fontSize:"1.4rem"}},h5:{fontSize:"1rem","@media (min-width:600px)":{fontSize:"1.2rem"}},h6:{fontSize:"0.9rem","@media (min-width:600px)":{fontSize:"1.1rem"}},body1:{fontSize:"0.9rem","@media (min-width:600px)":{fontSize:"1rem"}},body2:{fontSize:"0.8rem","@media (min-width:600px)":{fontSize:"0.9rem"}}},components:{MuiTextField:{styleOverrides:{root:{marginBottom:"8px","@media (min-width:600px)":{marginBottom:"16px"}}},defaultProps:{size:"small",margin:"dense"}},MuiButton:{styleOverrides:{root:{fontSize:"0.9rem",padding:"8px 16px","@media (min-width:600px)":{fontSize:"1rem",padding:"10px 20px"}}},defaultProps:{size:"medium"}},MuiCard:{styleOverrides:{root:{marginBottom:"8px","@media (min-width:600px)":{marginBottom:"16px"}}}},MuiCardContent:{styleOverrides:{root:{padding:"12px","@media (min-width:600px)":{padding:"16px"},"&:last-child":{paddingBottom:"12px","@media (min-width:600px)":{paddingBottom:"16px"}}}}},MuiPaper:{styleOverrides:{root:{padding:"12px","@media (min-width:600px)":{padding:"16px"}}}},MuiAutocomplete:{styleOverrides:{root:{marginBottom:"8px","@media (min-width:600px)":{marginBottom:"16px"}}}},MuiChip:{styleOverrides:{root:{fontSize:"0.8rem",height:"24px","@media (min-width:600px)":{fontSize:"0.9rem",height:"32px"}}}},MuiDialog:{styleOverrides:{paper:{margin:"16px",width:"calc(100% - 32px)",maxWidth:"400px","@media (min-width:600px)":{margin:"32px",width:"calc(100% - 64px)",maxWidth:"600px"}}}},MuiBottomNavigation:{styleOverrides:{root:{height:"56px","@media (min-width:600px)":{height:"64px"}}}}},breakpoints:{values:{xs:0,sm:600,md:900,lg:1200,xl:1536}},spacing:n=>`${4*n}px`});ID.createRoot(document.getElementById("root")).render(A.jsx(H.StrictMode,{children:A.jsx(xC,{theme:vY,children:A.jsx(pY,{})})}));
